# StackOverflow 问答 14701000-14701999

# iphone - 在 UITextView 中的一行中退格多个字符

> ID：14701002
> 
> 赞同：2
> 
> 时间：2013-02-05T05:51:31.063
> 
> 标签：iphone, ios, objective-c, xcode, uitextviewdelegate

我想检查用户是否在 textView 中退格了一个字符，是否有任何相同的字符连接它以将它们全部删除...

例如，如果我要检查的字符是“e”，我有文本“easy heeeeeello”并且用户开始按退格键，它将变为：

简单的 heeeeeello -> 简单的 heeeeeell -> 简单的 heeeeeel -> 简单的 heeeeee -> 简单的 h

代码应该检测到按下了退格键。然后它会检测哪些文本将被删除，如果该文本是一个字符（在我们的例子中是“e”），它将检查是否有更多的“e”接触那个“e”，创建一个“e”链s 并将它们全部删除。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:27:15.900

好的，所以我写了这段代码，它对我有用

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    if([text isEqualToString:@""]) {
    //Detected backspace character as the new character is @"" meaning something will be deleted

        char toDelete = [textView.text characterAtIndex:range.location];

        int duplicateCharCount = 0;
        for(int i =range.location-1; i>=0; i--) {

            if([textView.text characterAtIndex:i] == toDelete) {
                duplicateCharCount++;
            } else {
                break;
            }  
        }

        NSRange newRange = NSMakeRange(0, range.location - duplicateCharCount);
        [textView setText:[textView.text substringWithRange:newRange]];

        return NO;
    } else {
        return YES;
    }
} 
```

我知道这不是最好的实现，但现在你知道如何进行了

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:04:04.013

有点好玩，所以我刚才写了代码。该代码有效。

首先，我们应该设置 UITextView 的委托并响应 .

`textView:shouldChangeTextInRange:replacementText:`

根据[文件](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html#//apple_ref/occ/intfm/UITextViewDelegate/textView%3ashouldChangeTextInRange%3areplacementText%3a)，

> 如果用户按下 Delete 键，则范围的长度为 1，并且一个空字符串对象替换该单个字符。

所以代码如下：

```
#pragma mark - 
#pragma mark - UITextView Delegate

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    static NSString *suffix = @"e";

    if (range.length == 1 && [text length] == 0) {
        // The user presses the Delete key.
        NSString *currentText = [textView.text substringToIndex:range.location+1];
        NSString *appendingText = [textView.text substringFromIndex:range.location+1];

        if ([currentText hasSuffix:suffix]) {
            NSRange range = [self inverseRangeOfString:currentText withSuffix:suffix];
            currentText = [currentText stringByReplacingCharactersInRange:range withString:@""];

            textView.text = [currentText stringByAppendingString:appendingText];

            return NO;
        }
    }

    return YES;
}

- (NSRange)inverseRangeOfString:(NSString *)str withSuffix:(NSString *)suffix
{
    int length = [str length];
    int lastIndex = length - 1;

    int cnt = 0;
    for (; lastIndex >= 0; --lastIndex) {
        NSString *subStr = [str substringFromIndex:lastIndex];
        if ([subStr hasPrefix:suffix]) {
            cnt++;
        } else {
            break;
        }
    }

    NSRange range = (NSRange){++lastIndex, cnt};

    return range;
} 
```

# android - android上的原始套接字程序

> ID：14701005
> 
> 赞同：1
> 
> 时间：2013-02-05T05:51:51.250
> 
> 标签：android, java-native-interface

我在 c 中创建了一个原始套接字程序并从 jni 调用它。它编译但不构建。事实上没有错误。但警告“未找到 JNI_OnLoad”。

请让我知道这件事。

是因为原始套接字吗？如何知道错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:58:52.673

“未找到 JNI_OnLoad”

实际上根本不是错误或非典型情况。这是一个温和的警告，不幸的是，它似乎比实际更重要——这意味着您的 JNI 库没有利用加载库时自动调用的初始化函数的能力。

但是，尚不清楚您的应用程序是否能够获得在 Android 上使用原始套接字的权限——我原以为它不能。

# jquery - 子元素属性-链接href-jquery

> ID：14701010
> 
> 赞同：-2
> 
> 时间：2013-02-05T05:52:19.337
> 
> 标签：jquery

嗨，我在获取表中链接的 href 属性时遇到了麻烦。

```
<table border="1" align="center" width="90%" id="choose-address-table">
<tr><td>Header</td><td> Effective Date</td><td> Header</td></tr>
<tr><td><ul><li><a href="http://www.google.com" target="_blank">Text (1)</a></li></ul></td><td>01-01-2013</td> <td> <input type="button" class="SelectorButton"  name="Request Print" value="Request Print"/></td></tr></tabl> 
```

JS

```
$(".use-address").click(function () {

         var link = $(this).parent().siblings(":first").children().children();
         var link1 = $(this).find('a'); alert(link1.attr('href'));
         //             alert(link.html());
         //             alert(link.text()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:01:19.437

您发布的标记中没有任何内容具有 class `use-address`。假设您正在尝试选择表：

```
$('#choose-address-table').click( function() {
    var link1 = $(this).find('a');
    alert(link1.attr('href')); // alerts correct value
}); 
```

# c# - 是否可以使用 WebClient 定义一种 WebException？

> ID：14701017
> 
> 赞同：1
> 
> 时间：2013-02-05T05:53:01.503
> 
> 标签：c#, windows-phone-7, exception, timeout, webclient

这是我上一个问题的延续：[Download file in chunks](https://stackoverflow.com/questions/14602186/download-file-in-chunks-windows-phone)

现在，我有一个工作应用程序，允许下载和播放大型媒体文件。但是，仍然存在一个问题。正如我所注意到的，如果下载时间超过五分钟，连接就会因为超时而关闭。这不是问题，因为应用程序可以轻松地重新打开它、发送另一个请求等

现在，这是一个问题：响应可能有几种类型的错误，但我不能将“超时过期”异常（如果我抓住这个，我使用将继续下载的方法）与其他异常，这确实是由错误引起的。它们都有 WebException 类型。我也尝试了[这篇文章](https://stackoverflow.com/questions/2650758/handling-two-webexceptions-properly)的解决方案，但`ex.Status` 值为“未知错误”（！）。消息值也等于“远程服务器返回错误：NotFound”。

所以，我的问题很简单：如何定义错误是由超时引起的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:12:17.770

可能的解决方案：

WebException 的类型可以这样定义：

```
 catch (WebException ex)
            {
              HttpWebResponse response = (HttpWebResponse)ex.Response;

              if (response.StatusCode == HttpStatusCode.someCode)
                    DoSomething();
            } 
```

因此，在我的情况下，HttpStatusCode 将是“禁止的”（错误 403）。使用此信息，我可以创建未来的逻辑。

# android - ppc avd 管理器和 android sdk

> ID：14701019
> 
> 赞同：0
> 
> 时间：2013-02-05T05:53:23.293
> 
> 标签：android, sdk, emulation, powerpc

我有一台运行 10.5.8 的非 Intel PowerPC G5。我下载了 Eclipse 并安装了 Android SDK 和工具，还使用 ​​Eclipse 帮助部分中的“安装软件”安装了一个插件。

我有最新的 sdk 和工具，并尝试使用命令行来更正我在 x86_64 的 adt bundle-mac 的工具文件夹中单击“android”时收到的此错误

"users-imac-g5-2:~ owner1$ /Android/adt-bundle-mac-x86_64/sdk/tools/android ; 退出; SWT 文件夹 '/Android/adt-bundle-mac-x86_64/sdk/tools/lib /ppc' 不存在。请导出 ANDROID_SWT 以指向包含您平台的 swt.jar 的文件夹。注销

[处理完成]

现在，我下载了 Soylatte。我无法启动模拟器 AVD，并且想知道我需要使用什么命令将 swt_jar 连接到 ANDROID_SWT

还是这是 Java 问题，我需要安装较旧的 Android SDK？

当我进入 SDK 并单击其中一个模拟器时。我得到这个 **最后登录：Tue Feb 5 00:49:38 on ttys000 /Android/adt-bundle-mac-x86_64/sdk/tools/emulator64-x86 ；出口; users-imac-g5-2:~ owner1$ /Android/adt-bundle-mac-x86_64/sdk/tools/emulator64-x86 ; 出口; -bash：/Android/adt-bundle-mac-x86_64/sdk/tools/emulator64-x86：可执行注销中的错误 CPU 类型**

[处理完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:25:18.117

您正在安装适用于不同架构 (x86_64) 的软件，该架构与 PowerPC 不兼容，因此无法正常工作。

# c# - 获取计算机在过去 x 分钟内的平均 CPU 使用率

> ID：14701029
> 
> 赞同：3
> 
> 时间：2013-02-05T05:54:02.400
> 
> 标签：c#, .net, cpu-usage, system.diagnostics

这个问题[“如何在 C# 中获取 CPU 使用率？”](https://stackoverflow.com/questions/278071/how-to-get-the-cpu-usage-in-c) 显示了在 .NET 中获取计算机当前 CPU 使用率 (%) 的一些方法。

由于 CPU 使用率波动非常频繁，我认为当前的 CPU 使用率通常不能很好地指示计算机的繁忙程度（例如，用于调度或负载平衡目的）。有没有一种有效的方法来获得最后 x 分钟的平均 CPU 使用率，例如最后 5 分钟？

我正在考虑类似方法 GetAverageCpuUsage(int period) 可以由负载平衡或调度模块调用的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T05:58:12.800

实际上，这正是另一个问题中[第二个最受好评的答案中的](https://stackoverflow.com/a/6168408/80274)[PerformanceCounter](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter%28VS.80%29.aspx)所做的，它们的测量时间仅超过 1 秒。

`NextValue()`它给你的百分比是最后一次在柜台上进行的 CPU seance 的平均百分比。因此，如果您想要过去 5 分钟的平均 cpu，只需`NextValue()`每 5 分钟调用一次。

[这是一篇很好的文章](https://web.archive.org/web/20130509235529/http://blogs.msdn.com/b/bclteam/archive/2006/06/02/618156.aspx)，解释了如何使用性能计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-29T18:59:42.683

上面的答案为计算 CPU 使用率的方法提供了一个很好的例子。但我想指出一些不正确且被误导的东西。SubtractTimes 函数需要稍有不同。

```
private UInt64 SubtractTimes(ComTypes.FILETIME a, ComTypes.FILETIME b)
    {
        UInt64 aInt = ((UInt64)(a.dwHighDateTime << 32)) | (UInt32)a.dwLowDateTime;
        UInt64 bInt = ((UInt64)(b.dwHighDateTime << 32)) | (UInt32)b.dwLowDateTime;

        return aInt - bInt;
    } 
```

注意 lowDateTime 的 UINT32。这是因为，至少在 C# 中，comtype.FILETIME 结构将 DWORD 强制转换为 int32，因此如果该值大于 MAX 有符号 Int，您会看到一个负值，这种情况绝不应该出现。如果您将其直接转换为“UINT64”类型，则在内部为保留符号，它首先转换为 Int64，然后转换为 UInt64，因此您会看到不正确的值。相反，您希望将 lowDateTime 转换为 Uint32 类型以消除负号，然后转换为 UInt64（这将自动发生，因为它是 | 操作的一部分）。dwHighDateTime 组件也应该如此，但这很好，因为它通常不应该超过 MaxInt （嗯，这又取决于你的用例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:08:34.903

尝试类似：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using ComTypes = System.Runtime.InteropServices.ComTypes;
using System.Threading;
using System.Diagnostics;

namespace example1
{
    public class CpuUsage
    {
        [DllImport("kernel32.dll", SetLastError = true)]
        static extern bool GetSystemTimes(
                    out ComTypes.FILETIME lpIdleTime,
                    out ComTypes.FILETIME lpKernelTime,
                    out ComTypes.FILETIME lpUserTime
                    );

        ComTypes.FILETIME _prevSysKernel;
        ComTypes.FILETIME _prevSysUser;

        TimeSpan _prevProcTotal;

        Int16 _cpuUsage;
        DateTime _lastRun;
        long _runCount;

        public CpuUsage()
        {
            _cpuUsage = -1;
            _lastRun = DateTime.MinValue;
            _prevSysUser.dwHighDateTime = _prevSysUser.dwLowDateTime = 0;
            _prevSysKernel.dwHighDateTime = _prevSysKernel.dwLowDateTime = 0;
            _prevProcTotal = TimeSpan.MinValue;
            _runCount = 0;
        }

        public short GetUsage()
        {
            short cpuCopy = _cpuUsage;
            if (Interlocked.Increment(ref _runCount) == 1)
            {
                if (!EnoughTimePassed)
                {
                    Interlocked.Decrement(ref _runCount);
                    return cpuCopy;
                }

                ComTypes.FILETIME sysIdle, sysKernel, sysUser;
                TimeSpan procTime;

                Process process = Process.GetCurrentProcess();
                procTime = process.TotalProcessorTime;

                if (!GetSystemTimes(out sysIdle, out sysKernel, out sysUser))
                {
                    Interlocked.Decrement(ref _runCount);
                    return cpuCopy;
                }

                if (!IsFirstRun)
                {
                    UInt64 sysKernelDiff = SubtractTimes(sysKernel, _prevSysKernel);
                    UInt64 sysUserDiff = SubtractTimes(sysUser, _prevSysUser);

                    UInt64 sysTotal = sysKernelDiff + sysUserDiff;

                    Int64 procTotal = procTime.Ticks - _prevProcTotal.Ticks;

                    if (sysTotal > 0)
                    {
                        _cpuUsage = (short)((100.0 * procTotal) / sysTotal);
                    }
                }

                _prevProcTotal = procTime;
                _prevSysKernel = sysKernel;
                _prevSysUser = sysUser;

                _lastRun = DateTime.Now;

                cpuCopy = _cpuUsage;
            }
            Interlocked.Decrement(ref _runCount);

            return cpuCopy;

        }

        private UInt64 SubtractTimes(ComTypes.FILETIME a, ComTypes.FILETIME b)
        {
            UInt64 aInt = ((UInt64)(a.dwHighDateTime << 32)) | (UInt64)a.dwLowDateTime;
            UInt64 bInt = ((UInt64)(b.dwHighDateTime << 32)) | (UInt64)b.dwLowDateTime;

            return aInt - bInt;
        }

        private bool EnoughTimePassed
        {
            get
            {
                const int minimumElapsedMS = 250;
                TimeSpan sinceLast = DateTime.Now - _lastRun;
                return sinceLast.TotalMilliseconds > minimumElapsedMS;
            }
        }

        private bool IsFirstRun
        {
            get
            {
                return (_lastRun == DateTime.MinValue);
            }
        }
    }
} 
```

在你的代码中使用它之后：

```
 CpuUsage _cu = new CpuUsage();
   string cpuUsage = _cu.GetUsage(); 
```

在某事上有所帮助

# zend-framework - Zend 错误 SQLSTATE[HY000] [1045]

> ID：14701035
> 
> 赞同：0
> 
> 时间：2013-02-05T05:54:24.297
> 
> 标签：zend-framework, zend-db

我在使用 zend 框架和与数据库的连接时遇到问题，我正在尝试创建一个登录名，创建了表，并且代码显然很好，但是给了我这个：

```
An error occurred
Application error
Exception information:

Message: SQLSTATE[HY000] [1045] Access denied for user 'onetag51_teste'@'localhost' (using  password: YES)
Stack trace:

#0 C:\xampp\Zend\library\Zend\Db\Adapter\Pdo\Mysql.php(109):   Zend_Db_Adapter_Pdo_Abstract->_connect()
#1 C:\xampp\Zend\library\Zend\Db\Adapter\Abstract.php(860): Zend_Db_Adapter_Pdo_Mysql->_connect()
#2 C:\xampp\Zend\library\Zend\Db\Adapter\Abstract.php(930): Zend_Db_Adapter_Abstract->quote('pass1', NULL)
#3 C:\xampp\Zend\library\Zend\Auth\Adapter\DbTable.php(449): Zend_Db_Adapter_Abstract->quoteInto('`password` = ?', 'pass1')
#4 C:\xampp\Zend\library\Zend\Auth\Adapter\DbTable.php(368): Zend_Auth_Adapter_DbTable->_authenticateCreateSelect()
#5 C:\xampp\Zend\library\Zend\Auth.php(117): Zend_Auth_Adapter_DbTable->authenticate()
#6 C:\xampp\htdocs\Eulen\application\controllers\AuthenticationController.php(27): Zend_Auth->authenticate(Object(Zend_Auth_Adapter_DbTable))
#7 C:\xampp\Zend\library\Zend\Controller\Action.php(516): AuthenticationController->logininAction()
#8 C:\xampp\Zend\library\Zend\Controller\Dispatcher\Standard.php(308): Zend_Controller_Action->dispatch('logininAction')
#9 C:\xampp\Zend\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#10 C:\xampp\Zend\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch()
#11 C:\xampp\Zend\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#12 C:\xampp\htdocs\Eulen\public\index.php(26): Zend_Application->run()
#13 {main}  

Request Parameters:

array (
'controller' => 'authentication',
'action' => 'loginin',
'module' => 'default',
 ) 
```

我正在寻找解决方案，其中一些可能的错误是拼写错误（我没有找到任何错误），无法使用我的通行证和用户连接到 phpmyadmin（如果我访问 phpmyadmim 站点，我可以使用用户名和密码）。

我尝试了几种解决方案，但我无法弄清楚。

我是不是错过了什么。

文件 config.ini：

```
 resources.db.params.charset = "utf8"
 resources.db.adapter = "pdo_mysql"
resources.db.params.host = localhost
resources.db.params.username = "onetag51_teste"
resources.db.params.password = "*******"
resources.db.params.dbname = "onetag51_eulenhugo" 
```

最好将身份验证控制器放在这里，也许问题就在那里..

```
 <?php

 class AuthenticationController extends Zend_Controller_Action
{

 public function init()
 {
    /* Initialize action controller here */
}

public function indexAction()
{
    // action body
}

public function logininAction()
{
    // action body
    $authAdapter =$this->getAuthAdapter();
    $username='hugo';
    $password='pass1';

    $authAdapter->setIdentity($username)
                ->setCredential($password);

    $auth =Zend_Auth::getInstance();
    $result = $auth->authenticate($authAdapter);
    if($result->isValid())
    {
        echo 'valid';
    }
    else
    {
        echo 'invalid';
    }
}

public function logoutAction()
{
    // action body
}
private function  getAuthAdapter()
{
    $authAdapter = new Zend_Auth_Adapter_DbTable(Zend_Db_Table::getDefaultAdapter());
    $authAdapter->setTableName('users')
                ->setIdentityColumn('username')
                ->setCredentialColumn('password');

    return $authAdapter;
}              

} 
```

我一直在和我的一个朋友交谈，他告诉我，我需要设置通过 zend 访问 phpmyadmim 的权限...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:13:15.853

你不需要在你的配置文件中使用你的 adpater、用户名、密码和 dbname 的引号。我的没有，希望对你有帮助。

我发现更多阅读可能有助于[用户@'localhost'拒绝访问数据库''，](https://stackoverflow.com/questions/8621649/access-denied-for-user-localhost-to-database)因为它提到

> 如果您想从外部访问数据库（即网页），则需要向用户授予权限。在答案中。

[还有这个关于将用户添加到mysql中的数据库的链接。](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T03:31:50.580

所以问题与权限有关，感谢 ARJMP，我尝试更改权限，但主机没有让我这样做，所以我所做的是使用 xamp 创建本地数据库并尝试使用我在 xamp 中创建的数据库登录，并且它起作用了...

# wordpress - wordpress 中的输出缓冲

> ID：14701038
> 
> 赞同：0
> 
> 时间：2013-02-05T05:54:52.170
> 
> 标签：wordpress

我正在尝试为 wordpress 创建一个自动从 API 发布数据的插件。我已将生成 HTML 的代码放在一个类中：

```
class Poster{
  public function generateHTML($data){
      ob_start();
      /*
      some html and php code
      */
      $html = ob_get_contents();
      ob_end_flush();
      return $html;
  }
} 
```

该事件在 admin_menu 操作上触发：

```
add_action('admin_menu', function(){
  /*
  get data from API
  */

  $poster = new Poster();
  $html = $poster->generateHTML($data);
  $post = array(
    'post_title' => $title,
    'post_content' => $html,
    'post_type' => 'post',
    'comment_status' => 'open',
    'ping_status' => 'open',
    'post_status' => 'publish'
   );

   wp_insert_post($post, $wp_error, true);    
}); 
```

我的代码有问题吗？它有时有效，但大多数时候无效。

“它可以工作”是指从该方法返回的 html，然后存储在 $html 变量中。但大多数时候，从方法返回的html是唯一被输出的，它在管理面板中输出（管理面板的其余部分不输出，只输出方法生成的内容）。

那么我如何处理这个有什么问题吗？我可以做些什么来达到相同的结果吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:41:43.693

放置一条 error_log 消息以找出路径，当它在 admin 中仅显示您的文本时，然后从那里捕获它。难以猜测，但您需要使用错误日志进行调试。

# python - 机械化python嵌套表单错误

> ID：14701043
> 
> 赞同：1
> 
> 时间：2013-02-05T05:54:59.650
> 
> 标签：python, forms, mechanize

我正在尝试填写具有以下字段的表格：旧密码，新密码，验证密码

```
<b><u>Please Enter the Informations</u></b><br>
<form method=post action="chpass.php?action=changepass">
<table border=0>
<tr><td>LAN UserName</td><td></td></tr>
<tr><td>Old password</td><td><input type="password" name="password"></td></tr>
<tr><td>New password</td><td><input type="password" name="password1"></td></tr>
<tr><td>Conform password</td><td><input type="password" name="password2"></td></tr>
tr><td colspan=2 align=center>
<input type=submit name="submit" value="submit">
&nbsp;&nbsp;&nbsp;
<form><input type="button" onClick="show();" value="Logout"></form> 
```

在 python 中使用以下代码：

```
br.open('url_of_form')
br.select_form(nr=0)
br['password']='abc'
br['password1']='bcdef'
br['password2']='bcdef'
br.submit() 
```

我之前使用过这段代码来登录网站，但是在尝试更改密码时这不起作用。错误消息说 'ParseError: nested FORMs' 。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:29:38.053

您有两个打开标签和一个关闭标签“表单”。也许它有问题？尝试使用[抓取](http://grablib.org/)

# java - 在 Mac OSX 10.7.5 上的 Netbeans 中编译 Java 1.5 Web 应用程序

> ID：14701047
> 
> 赞同：1
> 
> 时间：2013-02-05T05:55:41.650
> 
> 标签：java, macos, netbeans

我在使用 Java 1.6 的 Mac OSX 10.7.5 上运行 Netbeans。我需要在 Netbeans 中针对 Java 1.5 编译我的 Web 应用程序。我试图在我的 Mac OSX 上安装 Java 1.5，但它不会让你。如何在我的 mac osx 上针对 Java 1.5 编译我的 netbeans Web 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:21:22.187

转到**工具**-> **Java 平台**。在那里，单击**Add Platform**，将其指向**YOUR_JDK_LOCATION**。您可以设置另一个 JDK 版本或删除现有版本。

添加多个平台后，根据您的要求更改项目编译规范

要下载 jdk 二进制文件，请访问以下位置

[链接 1 个压缩文件](http://ituploads.com/software-downloads/apple/jdk.1.5.0-leopard.zip)

[链接 2 tar 文件](http://ituploads.com/software-downloads/apple/java.1.5.0-leopard.tar.gz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:03:02.333

更改您的 java 版本

`$ export JAVA_HOME=`/usr/libexec/java_home -v '1.5*'`

或者

像这样参数化编译器`javac -source 1.5 -target 1.5`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:15:57.297

我相信我想通了。在 Netbeans 中，如果您右键单击项目并转到“属性”，则在“源”类别中有一个选项显示“源/二进制格式”，其中包含一个下拉列表，您可以在其中选择 JDK 版本来构建您的项目。

由于我在我的 Mac 上运行 JDK 6，它将允许您选择版本 6 及以下版本，就我而言，我选择版本 5。

# ios - 如何判断当前线程是否创建为 NSThread？

> ID：14701048
> 
> 赞同：3
> 
> 时间：2013-02-05T05:55:47.000
> 
> 标签：ios, multithreading, macos, cocoa, pthreads

我从购买的媒体流 SDK 库中获得 C++ 回调，该库在内部创建了多个线程。

具体来说，当库想要记录消息时，我会收到回调。有时我在一些 NSThread 的上下文中被调用，那里有一个自动释放池，但有时我是从没有自动释放池的其他线程调用的。一些调用线程是实时线程（音频抓取等），因此性能很重要。

如何区分在 NSThread（应用程序的主线程或其他 NSThread）中调用我的情况和 SDK 库创建的内部“仅限 C++”线程的情况？

Apple 的文档中没有任何内容告诉我使用时会发生什么

[NSThread 当前线程]

当我处于另一种线程的上下文中时，以及当我在 NSThread 上调用 pthreadSelf() 或类似的 API 时会发生什么。

此外，如果可能的话，我想听听关于将自动释放池附加到这些内部线程的想法，以及关于不时耗尽它们的想法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:01:15.193

`NSThread`是 pthread 之上的包装器，因此`pthread_self`如果线程是使用`NSThread`、pthread、GCD 或 C++ 线程 API 创建的，则始终返回有效的线程对象！

`[NSThread currentThread]``NSThread`即使线程不是使用 API 创建的并且使用公共 API也将返回一个对象`NSThread`，无法判断返回的对象是代理还是“实际” `NSThread`。

您可以使用该`@autoreleasepool`指令生成轻量级自动释放池。

# django - tweepy callback_url 设置不起作用

> ID：14701059
> 
> 赞同：0
> 
> 时间：2013-02-05T05:56:54.267
> 
> 标签：django, google-app-engine, twitter, tweepy

文档说：

如果您有一个 Web 应用程序并且正在使用需要动态提供的回调 URL，您可以像这样传递它：

auth = tweepy.OAuthHandler(consumer_token, consumer_secret, callback_url)

如果回调 URL 不会改变，最好在设置应用程序配置文件时在 twitter.com 上静态配置它。

我设置

```
auth = tweepy.OAuthHandler(consumer_token, consumer_secret,
'http://127.0.0.1:8080') 
```

我在 twitter 应用程序设置中删除了 callback_URL，但我不工作。

我设置

```
auth = tweepy.OAuthHandler(consumer_token, consumer_secret,) 
```

并在 twitter 应用程序设置中将 callback_URL 设置为 http:**127.0.0.1:8080 ，然后它就可以工作了

所以....tweepy 不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:43:11.590

' [http://127.0.0.1:8080](http://en.wikipedia.org/wiki/Localhost) '（带有双斜杠）指的是您的本地主机。如果您将该网址发送给其他人，它将引用他们的本地主机（指向他们自己，而不是您）。

如果您实际上是在端口 8080 上向世界响应，请找到您的主机的公共 ip 并尝试注册它。

# android - 网格视图重叠其他视图android

> ID：14701063
> 
> 赞同：0
> 
> 时间：2013-02-05T05:57:17.090
> 
> 标签：android, button, android-linearlayout, android-gridview, overlapping

我需要一个按钮、一个网格视图和一个按钮，垂直排列。我可以看到 Button 和 GridView 但看不到在网格视图之后声明的按钮。为什么？网格视图声明下方的任何视图都会发生这种情况。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
        <TextView
        android:id="@+id/text_view"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center_horizontal|center_vertical"
        android:layout_marginTop="20dip"
        android:text="Fragment1"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="30dip" />

        <Button 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Button1"/>

     <GridView 
          android:id="@+id/gridview"
          android:layout_width="wrap_content" 
          android:layout_height="match_parent"overla
          android:columnWidth="90dp"
          android:numColumns="auto_fit"
          android:verticalSpacing="10dp"
          android:horizontalSpacing="10dp"
          android:stretchMode="columnWidth"
          android:gravity="center"/>                            

            <Button 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Button1"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:17:27.363

当您采用垂直方向的 LinearLayout 时，`wrap_content`请指定 GridView 的高度。

现在，如果您想要屏幕下方的最后一个按钮，则将其包含**`android:layout_weight="1"`**在 GridView 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:10:40.070

尝试这个

```
 <RelativeLayout 
   android:layout_width="match_parent"
   android:layout_height="match_parent">
 <Button 
     android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Button1"/>

 <Button 
    android:id="@+id/button2"  
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="Button1"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:31:07.160

由于您已将 gridview 的高度声明为 match_parent，因此如果找不到足够的屏幕空间来显示它，它应该与在其下方声明的视图重叠。您应该尝试在gridview 下声明的视图上调用bringtoFront() 方法。从我的角度来看，另一件事是尽可能尝试 relativeLayout，并将 android:layout_above 和 android:layout_below 与 gridview 一起使用。

# linux - 如何管理控制套接字和传输套接字？

> ID：14701064
> 
> 赞同：0
> 
> 时间：2013-02-05T05:57:28.290
> 
> 标签：linux, sockets, networking

我们正在开发一个基于 C/S 的网络应用程序，在这个应用程序中，服务器需要向客户端传输文件，有时还需要从客户端接收文件。所以在服务器应用程序中，它需要为每个客户端创建一个控制套接字和许多传输套接字。

我的问题是我们如何创建和定义一个套接字作为控制套接字或传输套接字的角色？（以下已删除：服务器应用程序如何区分控制套接字和传输套接字？）。目前服务端使用监听套接字，对于所有通过accept(监听套接字)建立的新连接，它都将它们平等地存储在一个数组中，最后让客户端将它们注册到服务端作为控制套接字或传输套接字(即在传输文件之前) ，客户端需要告诉它想使用哪个套接字作为控制套接字，以及它想使用哪个套接字作为传输套接字）。

我认为这不是在服务器应用程序和客户端之间创建控制套接字和传输套接字的好模式。那么还有其他适合此类问题的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:11:37.297

> 我们如何创建这个控制套接字和所有其他传输套接字？

与创建任何其他套接字的方式相同。我不明白这个问题。

> 服务器应用程序如何区分控制套接字和传输套接字？

通过客户告知，并在每个客户的某种数据结构中记住它。或者，也许您应该为控制套接字和传输套接字使用不同的侦听端口。或者，传输套接字应该是 FTP 中的回调。

# android - 如何在android中以编程方式执行adb命令

> ID：14701065
> 
> 赞同：0
> 
> 时间：2013-02-05T05:57:42.440
> 
> 标签：android, adb

我使用以下命令手动植根了我的模拟器

```
adb shell mount -o rw,remount -t yaffs2 /dev/block/mtdblock03 /system
adb push su /system/xbin/su
adb shell chmod 06755 /system
adb shell chmod 06755 /system/xbin/su
adb install superuser.apk 
```

它已成功植根并运行 su 命令，但是在关闭模拟器并再次打开模拟器时，su 命令不起作用。为了克服这个问题，我想创建一个示例应用程序以编程方式执行上述命令

```
Runtime.getRuntime().exec(); 
```

请有人帮助我如何以编程方式执行上述命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:06:31.847

模拟器是开箱即用的，因为 ADB shell 以 root 身份运行。

你所做的不是“根植”它，而是使用预先存在的 root shell 来安装一个通用的 hack，然后让应用程序以 root 身份运行帮助任务。

但是您不能从设备上的应用程序中执行此操作，该应用程序还没有能力以 root 身份启动帮助程序 - 因此您陷入循环依赖或需要 root 才能安装 root 帮助程序的先有鸡还是先有蛋的问题.

如果没有找到要利用的安全漏洞（或预先存在的故意特权提升机制），您将无法在设备甚至模拟器上执行此操作。

然而：

*   您可以阅读如何使模拟器的状态持久化，并且只手动执行一次

*   您可以从在开发机器上运行的脚本发出命令，而不是在设备/模拟器上

# r - 在 gedit 中集成 R

> ID：14701066
> 
> 赞同：1
> 
> 时间：2013-02-05T05:57:54.623
> 
> 标签：r, gedit

我正在使用 Ubuntu 12.04 (Precise)、Gedit-3.4.1、R-2.15.2、rgedit v0.8.0.1-Gtk3 插件

我正在按照[此处的说明进行操作](http://www.stattler.com/article/using-gedit-or-rgedit-r)

rgedit v0.8.0.1-Gtk3（2013 年 1 月 16 日）的最新版本，没有以下文件

*   RCtrl.gedit-插件
*   RCtrl.首选项

但它有 RCtrl.plugin 文件而不是 RCtrl.gedit-plugin。

我将 rgedit v0.8.0.1-Gtk3 的内容提取到 /usr/lib/gedit/plugins/ 并从主菜单中的编辑>首选项>插件中启用“R集成”插件“R”出现，

但是当我点击“配置 R 界面”时，没有显示配置面板。

即使我单击其他选项，也没有显示活动？

我应该将 RCtrl.plugin 文件重命名为 RCtrl.gedit-plugin 并使用它吗？

& 我应该使用哪个版本？rgedit v0.8.0.1-Gtk3 或 rgedit v0.8.0.1-Gtk2

会有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T11:06:04.660

您的 Gedit 是 3.X 版。要安装，请在某处提取`rgedit-X.X.X.X-Gtk3.tar.bz2`插件存档文件并将生成的文件夹的内容复制到您的`~/.local/share/gedit/plugins`. 如果该`plugins`文件夹不存在，只需创建它。

安装后，您需要运行 Gedit 并从“编辑”菜单中选择“首选项”。然后在插件选项卡上，选中“R 集成”框。这将在 Gedit 的基础上打开一个 R 控制台并加载 R。

# java - CSS，JS和图像的最小化技术，以避免对服务器的多个请求

> ID：14701071
> 
> 赞同：5
> 
> 时间：2013-02-05T05:58:05.187
> 
> 标签：java, javascript, css, performance, webserver

我有一个用 Java 开发的基于 Web 的应用程序。它有 10+ js 文件和 15+ 图像和 10+ css 文件供每个页面加载。

浏览器上的每个文件加载都视为单个请求，因此我正在寻找更好的解决方案来避免对网络服务器的多个请求以提高我的页面性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:18:15.857

如果您使用 Java 进行开发，您可能会使用 Maven。Maven 有几个非常棒的插件，用于 CSS 和 JS 缩小以及创建 css sprites。我们的 pom xml 中的以下代码从我们现有的 css 中创建 sprites 图像，然后缩小 css 和 js。

```
<plugin>
                <groupId>net.jangaroo</groupId>
                <artifactId>smartsprites-maven-plugin</artifactId>
                <version>1.5</version>
                <configuration>
                    <rootDirPath>${webappDirectory}/resources/css/sprites/</rootDirPath>
                    <outputDirPath>${webappDirectory}/resources/css/generated_sprites/</outputDirPath>
                    <cssFileSuffix>-generated-sprite</cssFileSuffix>
                    <logLevel>WARN</logLevel>
                    <spritePngDepth>AUTO</spritePngDepth>
                    <spritePngIeSix>false</spritePngIeSix>
                    <cssFileEncoding>UTF-8</cssFileEncoding>
                    <documentRootDirPath>${webappDirectory}</documentRootDirPath>
                </configuration>
                <executions>
                    <execution>
                        <id>createSprites</id>
                        <phase>generate-sources</phase>
                        <goals>
                             <goal>createSprites</goal>  
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>com.samaxes.maven</groupId>
                <artifactId>minify-maven-plugin</artifactId>
                <version>1.6</version>
                <executions>
                    <execution>
                        <id>minify-initial-load-css</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <charset>utf-8</charset>
                            <verbose>false</verbose>
                            <debug>true</debug>
                            <timeout>180</timeout>
                            <webappTargetDir>${targetDirectory}/resources/</webappTargetDir>
                            <cssSourceDir>/resources/css/</cssSourceDir>
                            <cssSourceIncludes>
                                <cssSourceInclude>initial_load/*.css</cssSourceInclude>
                                <cssSourceInclude>generated_sprites/*.css</cssSourceInclude>
                            </cssSourceIncludes>
                            <cssFinalFile>initial_load.css</cssFinalFile>
                        </configuration>
                        <goals>
                            <goal>minify</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>minify-internal-pages-css</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <charset>utf-8</charset>
                            <verbose>false</verbose>
                            <debug>true</debug>
                            <timeout>180</timeout>
                            <webappTargetDir>${targetDirectory}/resources/</webappTargetDir>
                            <cssSourceDir>/resources/css/</cssSourceDir>
                            <cssSourceIncludes>
                                <cssSourceInclude>internal_pages/*.css</cssSourceInclude>
                                <cssSourceInclude>generated_sprites/*.css</cssSourceInclude>
                            </cssSourceIncludes>
                            <cssFinalFile>internal_pages.css</cssFinalFile>
                        </configuration>
                        <goals>
                            <goal>minify</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>minify-initial-load-js</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <charset>utf-8</charset>
                            <verbose>false</verbose>
                            <debug>true</debug>
                            <timeout>180</timeout>
                            <jsEngine>closure</jsEngine>
                            <webappTargetDir>${targetDirectory}/resources/</webappTargetDir>
                            <jsSourceDir>/resources/js/initial_load</jsSourceDir>
                            <jsSourceIncludes>
                                <jsSourceInclude>jquery-1.7.1.min.js</jsSourceInclude>
                                <jsSourceInclude>*.js</jsSourceInclude>
                            </jsSourceIncludes>
                            <jsSourceExcludes>
                                <jsSourceExclude>*gui.nocache.js</jsSourceExclude>                              
                            </jsSourceExcludes>
                            <jsFinalFile>initial_load.js</jsFinalFile>
                        </configuration>
                        <goals>
                            <goal>minify</goal>
                        </goals>
                    </execution> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:34:55.140

也许看看 grunt.js 你将不得不设置一个构建过程，在这个过程中你可以缩小/丑化你的代码并连接你的文件，所以你最终只有一个 .js 文件......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:11:04.157

几乎所有浏览器都具有缓存机制，直到您在外部未定义不在客户端浏览器上存储文件。一旦下载文件将缓存在浏览器中，因此下次对同一文件的任何命中都将从浏览器缓存中返回。

因此，在您的情况下，所有文件都将下载一次，下次不会下载。对于第一次打击，它会很慢，但之后会变得很快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T19:13:01.670

这些是您应该使用的某些优化技术

1.  缩小 js - 您可以使用 Yahoo 的 YUI 压缩。
2.  CSS文件可以合并为一个。
3.  图像文件 - 使用 CSS Sprites - 访问 Google 的网站，了解如何应用 CSS Sprites 以最大程度地减少到服务器的往返行程

最重要的是，彻底的代码审查是最重要的因素，在 JS 文件中将重复/未使用的代码排除在外。

为了进一步优化，请尝试使用 Firefox 上的 Firebug 和 Chrome 上的 Page Speed 来衡量您的 JS 性能。如果你是jave IE10那么使用这三个工具来判断页面性能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T23:16:45.923

我认为没有任何现有的解决方案可以将所有 CSS/JS/图像捆绑到一个请求中，除非您愿意自己将 CSS/JS 文件合并到一个文件中。对于图像，它仍然是多个请求。您可以采取以下措施来提高性能

1.  对于 Javascript 和 CSS，您可以使用缩小功能来减小下载大小。我在我的一个项目中选择了 YUI，它减少了 40-50% 的大小。我关闭了混淆功能，以便开发人员更容易调试 JavaScript。可以在运行时或构建时进行缩小。我选择构建时间是为了减少干扰。

2.  利用浏览器缓存减少对服务器的请求。但是，由于浏览器设置可能因客户端而异，因此最好使用服务器端缓存相关标头来控制行为。对于静态文件，大多数应用服务器都有自己的默认设置。例如，WebLogic 使用 FileServlet 来处理对 css 和 javascript 等静态内容的请求，并且 FileServlet 将所有标头设置为静态内容。为了改变默认标头并精细控制缓存行为，一种方法是使用 servlet 过滤器来修改响应对象中的标头。

希望这些有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T07:52:42.423

看看[颚](http://jawr.java.net/)或[颗粒](http://code.google.com/p/granule/)。这些将缩小和优化您的 css/javascript。Jawr 还可以使用 base64 编码将您的 css 图像嵌入到 css 本身中，但是该项目已经有一段时间没有更新了，但我已经在多个项目中成功使用它。

Granule 似乎使用了[Google Closure Compiler](http://developers.google.com/closure/compiler/)，它似乎具有先进的 javascript 优化技术。

# mysql - 从 MySQL 中获取每个人的最新记录

> ID：14701073
> 
> 赞同：3
> 
> 时间：2013-02-05T05:58:23.657
> 
> 标签：mysql, sql, greatest-n-per-group

我有一张这样的桌子

```
╔════╦════════╦═════════════╦═════════════════╗
║ PK ║  NAME  ║   DEGREE    ║ YEAR_OF_PASSING ║
╠════╬════════╬═════════════╬═════════════════╣
║  1 ║ Shrey  ║ B.E.        ║            2004 ║
║  2 ║ Shrey  ║ High School ║            2000 ║
║  3 ║ Gaurav ║ B.E.        ║            2000 ║
║  4 ║ Gaurav ║ M.Sc.       ║            2002 ║
╚════╩════════╩═════════════╩═════════════════╝ 
```

如何查询得到每个人最新学位的结果集，如下图所示？

```
╔════╦════════╦════════╦═════════════════╗
║ PK ║  NAME  ║ DEGREE ║ YEAR_OF_PASSING ║
╠════╬════════╬════════╬═════════════════╣
║  1 ║ Shrey  ║ B.E.   ║            2004 ║
║  4 ║ Gaurav ║ M.Sc.  ║            2002 ║
╚════╩════════╩════════╩═════════════════╝ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:05:04.920

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  Name, MAX(Year_Of_Passing) max_val
            FROM tableName
            GROUP BY Name
        ) b ON  a.name = b.name AND
                a.Year_Of_Passing = b.max_val 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3579f/8)

**更新 1**

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  Name, MAX(Year_Of_Passing) max_val, MAX(PK) max_pk
            FROM tableName
            GROUP BY Name
        ) b ON  a.name = b.name AND
                CASE WHEN b.max_val IS NULL
                     THEN a.pk = max_PK
                     ELSE a.Year_Of_Passing = b.max_val 
                  END 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3579f/5)

# javascript - 从 html 调用 javascript 函数

> ID：14701074
> 
> 赞同：1
> 
> 时间：2013-02-05T05:58:27.993
> 
> 标签：javascript, html

我需要从 html 调用一个 javascript 函数，但它似乎不起作用。我点击图像，没有任何反应。变量“brushVar”似乎没有改变。blue.png 是一个蓝色的小按钮，而 blueN.png 是一个蓝色的小按钮，具有不同的蓝色阴影，等等......非常感谢任何帮助

```
<body>

<script>
var brushVar;

function blue() {
    brushVar = ("#000000");
    alert(brushVar);
}

function blueN() {
    brushVar = ("#000000");
    alert(brushVar);
}

function cyan() {
    brushVar = ("#000000");
    alert(brushVar);
}

function cyanN() {
    brushVar = ("#000000");
    alert(brushVar);
}

function green() {
    brushVar = ("#000000");
    alert(brushVar);
}

function greenN() {
    brushVar = ("#000000");
    alert(brushVar);
}

function purple() {
    brushVar = ("#000000");
    alert(brushVar);
}

function purpleN() {
    brushVar = ("#000000");
    alert(brushVar);
}

function red() {
    brushVar = ("000000");
    alert(brushVar);
}

function redN() {
    brushVar = ("000000");
    alert(brushVar);
}

function yellow() {
    brushVar = ("#000000");
    alert(brushVar);
}

function yellowN() {
    brushVar = ("#000000");
    alert(brushVar);
}
</script>

<div id="buttons" style="position:absolute; width:100%; height:100%>
 <a href="#" onclick="blue()';" >
    <img src="/blue.png"/>
</a>
<a href="#" onclick="blueN()';" >
    <img src="blueN.png"/>
</a>
<a href="#" onclick="cyan()';" >
    <img src="cyan.png"/>
</a>
<a href="#" onclick="cyanN()';" >
    <img src="cyanN.png"/>
</a>
<a href="#" onclick="green()';" >
    <img src="green.png"/>
</a><a href="#" onclick="greenN()';" >
    <img src="greenN.png"/>
</a>
<a href="#" onclick="purple()';" >
    <img src="purple.png"/>
</a>
<a href="#" onclick="purpleN()';" >
    <img src="purpleN.png"/>
</a>
<a href="#" onclick="red()';" >
    <img src="red.png"/>
</a>
<a href="#" onclick="redN()';" >
    <img src="redN.png"/>
</a>
<a href="#" onclick="yellow()';" >
    <img src="yellow.png"/>
</a>
<a href="#" onclick="yellowN()';" >
    <img src="yellowN.png"/>
</a>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:03:00.840

您的 javascript 必须用脚本标记括起来，并且您的字符串必须用引号引起来：

```
<div id="over" style="position:absolute; width:100%; height:100%>
 <img src="blue.png" href='' onclick='blue();'>
 <img src="blue.png"  href='' onclick='blue();' >
 <img src="blueN.png"  href='' onclick='blueN();' >
 <img src="cyan.png" href='' onclick='cyan();' >
 <img src="cyanN.png" href='' onclick='cyanN();'>
 <img src="green.png" href='' onclick='green();' >
 <img src="greenN.png" href='' onclick='greenN();'>
 <img src="purple.png" href='' onclick='purple();'>
 <img src="purpleN.png" href='' onclick='purpleN();'>
 <img src="red.png" href='' onclick='red();'>
 <img src="redN.png" href='' onclick='redN();'>
 <img src="yellow.png" href='' onclick='yellow();'>
 <img src="yellowN.png" href='' onclick='yellowN();'>
</div>

<script type="text/javascript">
    var color;

    function blue() {
        color = "blue";
    }

    function redN() {
        color = "red-N";
    }
</script> 
```

# c++ - 模板怪异

> ID：14701075
> 
> 赞同：1
> 
> 时间：2013-02-05T05:58:28.897
> 
> 标签：c++, templates

我有五个班级，声明如下：

```
template <typename T>
class A {
    void fn(X);
};
template <typename T>
class B {};
class C {};
class D {};
class X {}; 
```

我有两个这样声明的实例：

```
A<B<C>> abc;
A<B<D>> abd; 
```

如何进行模板化`fn`，以便必须`abc.fn()`使用类型对象和类型对象`C`调用？`abd.fn()``D`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:46:04.150

您可以像这样对您的课程进行部分专业化：

```
template <typename T> class A;
template <typename T> class B {};

template <typename T>
class A<B<T> > {
  public:
    void fn(T) { }
};

class C {};

class D {};

int main(int,char**)
{
  A<B<C>> abc;
  A<B<D>> abd;
  abc.fn(C());
  abd.fn(D());
  return 0;
} 
```

如果您希望它适用于任何模板，而不仅仅是 B，您可以像这样部分专门化 A 类：

```
template <typename T,template <typename> class U>
class A<U<T> > {
  public:
    void fn(T) { }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:03:41.493

这不会太漂亮。

```
template <typename T>
class B {public: typedef T type;};

template <typename T>
class A {
    void fn(typename T::type X);
    //void fn(...){}  // would prevent an error if T does not have type.
}; 
```

基本上，您将类型保存在 typedef 中，然后在`A`. 如果 B 没有 of ，这当然会`T`出错。`A``T::type`

# android - 空指针异常Android

> ID：14701076
> 
> 赞同：0
> 
> 时间：2013-02-05T05:58:37.613
> 
> 标签：android, nullpointerexception, bundler

正在将一个字符串从一个活动传递到另一个，它的工作但如果我尝试打开活动而不传递字符串它会抛出一个空指针异常，请协助

```
 Bundle gotBasket = getIntent().getExtras(); 
    gotPassenger= gotBasket.getString("passenger");
    gotStaffNumber= gotBasket.getString("clientcode");
    etPassenger.setText(""+ gotPassenger );
    etStaffNumber.setText("" + gotStaffNumber); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:02:02.833

> 如果我尝试在不传递字符串的情况下打开活动它会引发空指针异常

对，因为你没有发送任何数据

在分配之前检查 gotBasket 是否为**NULL**

像这样：

```
Bundle gotBasket = getIntent().getExtras();
if(gotBasket != null){
    gotPassenger= gotBasket.getString("passenger");
    gotStaffNumber= gotBasket.getString("clientcode");
    etPassenger.setText(""+ gotPassenger );
    etStaffNumber.setText("" + gotStaffNumber);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:03:10.637

代替：

```
Bundle gotBasket = getIntent().getExtras(); 
```

更好地使用这个：

```
if(getIntent().hasExtras("passenger")){
//get Extras here
} 
```

这样，您将不会获得**NPE**，因为您仅在通过 Bundle Extras 时才尝试获得它们

# php - php 999.99 中的数字格式

> ID：14701077
> 
> 赞同：0
> 
> 时间：2013-02-05T05:58:49.080
> 
> 标签：php, numbers, format

请帮助我处理 php 中的数字格式，例如我有一些计算，比如 a+b=c 我想在 php 中以 999.99 格式回答我已经阅读了 number_format,sprintf 但它没有用。请给我一些有用的想法。我的最终结果应该是 999.99 格式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T06:00:56.737

根据“无用”文档：

```
$num = 999.98353;
$num = number_format($num, 2, '.', ''); 
```

如果您花时间实际[阅读文档](http://php.net/manual/en/function.number-format.php)，则有相关示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:09:33.463

除了 number_format，还可以使用 sprintf

```
$a = 999;
$b = .99;
$c = $a + $b;
echo sprintf('%03.2f', $c); // 999.99 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:02:49.087

```
$num = 999.98353;
$num1 = 10;
$num2 = $num + $num1;
echo number_format($num2, 2, '.', '');   // output 1009.98 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T06:03:08.513

尝试这个

```
$a = 500.3755;
$b = 600.9855;
$c = $a + $b;
echo number_format($c, 2, '.', ''); //1101.36
echo number_format($c, 2, '.', ','); //1,101.36 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T06:11:50.913

您可以使用

```
$c = sprintf('%0.2f',$a)+sprintf('%0.2f',$b); 
```

或者您也可以尝试：

```
$c = $a+ $b; // If $c = 999.9999
$c = substr($c, 0, 2); // $c is now the string 999.9999
echo( number_format($c-1,2) );  // Will output 998.99 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T06:27:44.950

```
    $a = 1234.5678;
    $b = 1234.5678;
    $num = 圆形(($a + $b), 2);
    echo number_format($num, 2, '.', ',');

```

number_format 有效，请尝试发布您的一些代码。

# plugins - 应该如何开始创建 sbt 插件？

> ID：14701079
> 
> 赞同：7
> 
> 时间：2013-02-05T05:59:00.107
> 
> 标签：plugins, sbt, scala-2.9

我想为 Scala 项目创建一个 sbt 插件。

请任何人建议我我们如何开始？

我参考了[插件](http://www.scala-sbt.org/0.13.1/docs/Extending/Plugins.html)文档，但无法理解步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-24T02:41:28.987

成为 sbt 插件作者的第一步是了解 sbt 构建定义。最好的资源是[入门指南](http://www.scala-sbt.org/release/docs/Getting-Started/Welcome.html)。对于插件，您必须了解作用域的概念。我的一些博客文章（例如[sbt 0.10 v2.0 的非官方指南](http://eed3si9n.com/sbt-010-guide)和[使用 sbt 0.13 穿越第四维度）](http://eed3si9n.com/4th-dimension-with-sbt-013)讨论了该主题。

接下来，尝试阅读现有插件的源代码：

*   [sbt/sbt-appengine](https://github.com/sbt/sbt-appengine/blob/8a0dd5b8dd9e516f9c2f4b9d0725ca14d3b2ca12/src/main/scala/AppenginePlugin.scala)

    *   `sbt-appengine`添加定义`appengineSettings`，构建用户可以将其包含在他或她的构建定义中以添加`appengineDeploy`和其他与应用引擎相关的任务。
*   [sbt/sbt-man](https://github.com/sbt/sbt-man/blob/240e4afcc5a1f87fbba171ab93406cc79ced46e0/src/main/scala/sbtman/Plugin.scala)

    *   `sbt-man`另一方面覆盖`settings`并添加`man`命令。

这些大致是插件的两种模式。一旦你完全理解了它们，试着制作你自己的插件。

另一个灵感来源是 sbt 本身的来源。每当我编写插件时，我都会参考[Defaults.scala](https://github.com/sbt/sbt/blob/5275dcab4b9512f941daceda9fa3d843899612d1/main/src/main/scala/sbt/Defaults.scala)以了解 sbt 如何实现我感兴趣的特定任务。一旦你感到舒服，你也应该阅读[插件最佳实践](http://www.scala-sbt.org/0.13.1/docs/Extending/Plugins-Best-Practices.html)。

# opencl - 在opencl内核中使用原子函数时读回主机内存中的数据时出现错误CL_OUT_OF_RESOURCES

> ID：14701081
> 
> 赞同：0
> 
> 时间：2013-02-05T05:59:01.377
> 
> 标签：opencl, gpgpu, gpu

我正在尝试在我的 opencl 内核中实现原子函数。我正在创建的多个线程并行尝试写入单个内存位置。我希望他们在特定的代码行上执行串行执行。我以前从未使用过原子函数。

我在许多博客和论坛上发现了类似的问题，我正在尝试一种解决方案。即使用两种不同的功能“获取”和“释放”来锁定和解锁信号量。我已经包含了必要的 opencl 扩展，我的设备（NVIDIA GeForce GTX 630M）肯定都支持这些扩展。

我的内核执行配置：

```
global_item_size = 8;
ret = clEnqueueNDRangeKernel(command_queue2, kernel2, 1, NULL, &global_item_size2, &local_item_size2, 0, NULL, NULL); 
```

这是我的代码：reducer.cl

```
#pragma OPENCL EXTENSION cl_khr_fp64 : enable
#pragma OPENCL EXTENSION cl_khr_global_int32_base_atomics : enable
#pragma OPENCL EXTENSION cl_khr_local_int32_base_atomics : enable
#pragma OPENCL EXTENSION cl_khr_global_int32_extended_atomics : enable
#pragma OPENCL EXTENSION cl_khr_local_int32_extended_atomics : enable

typedef struct data
{
  double dattr[10];
  int d_id;
  int bestCent;
}Data;

typedef struct cent
{
  double cattr[5];
  int c_id;
}Cent;

__global void acquire(__global int* mutex)
{
    int occupied;
    do {
        occupied = atom_xchg(mutex, 1);
    } while (occupied>0);
}

__global void release(__global int* mutex)
{
    atom_xchg(mutex, 0); //the previous value, which is returned, is ignored
}

__kernel void reducer(__global int *keyMobj, __global int *valueMobj,__global Data *dataMobj,__global Cent *centMobj,__global int *countMobj,__global double *sumMobj, __global int *mutex)
{
  __local double sum[2][2];
  __local int cnt[2];

  int i = get_global_id(0);
  int n,j;

  if(i<2)
    cnt[i] = countMobj[i];
  barrier(CLK_GLOBAL_MEM_FENCE);

  n = keyMobj[i];
  for(j=0; j<2; j++)
  {
     barrier(CLK_GLOBAL_MEM_FENCE);
          acquire(mutex);
             sum[n][j] += dataMobj[i].dattr[j];
      release(mutex);
  }

  if(i<2)
  {
    for(j=0; j<2; j++)
    {
       sum[i][j] = sum[i][j]/countMobj[i];
       centMobj[i].cattr[j] = sum[i][j];
    }
  }
} 
```

不幸的是，该解决方案似乎对我不起作用。当我将 centMobj 读回主机内存时，使用

```
ret = clEnqueueReadBuffer(command_queue2, centMobj, CL_TRUE, 0, (sizeof(Cent) * 2),  centNode, 0, NULL, NULL);
ret = clEnqueueReadBuffer(command_queue2, sumMobj, CL_TRUE, 0, (sizeof(double) * 2 * 2), sum, 0, NULL, NULL); 
```

对于 centMobj 和 sumMobj，它给我错误代码 = -5 (CL_OUT_OF_RESOURCES)。

如果我的原子函数代码有任何问题，或者问题是在将数据读回主机内存时，我不知道。如果我错误地使用了原子函数，请纠正我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:16:09.187

在 OpenCL 中，工作项之间的同步*只能*在工作组内完成。尝试在不同工作组之间同步工作项的代码可能在一些非常具体的（和实现/设备相关的）情况下工作，但在一般情况下**会失败。**

解决方案是使用原子来序列化对同一内存位置的访问（但不会阻塞任何工作项），或者以不同的方式重新设计代码。

# ios - 如何使用 MVVM 在 MonoTouch TableView 中绑定删除按钮

> ID：14701082
> 
> 赞同：2
> 
> 时间：2013-02-05T05:59:02.390
> 
> 标签：ios, mvvm, xamarin.ios, mvvmcross

我需要将 Mono touch 的 Table View 中出现的删除按钮绑定到我的 ViewModel 中的命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:48:55.173

一种方法是更改​​您的 MyItemType （在 ViewModel 的集合中使用），使其具有`PleaseDeleteMeCommand`，然后将其称为：

```
 public override void CommitEditingStyle(UITableView tableView, UITableViewCellEditingStyle editingStyle, NSIndexPath indexPath)
        {
            if (editingStyle == UITableViewCellEditingStyle.Delete)
            {
                var item = (MyItemType)GetItemAt(indexPath);
                item.PleaseDeleteMeCommand.Execute(null);
            }
            base.CommitEditingStyle(tableView, editingStyle, indexPath);
        } 
```

另一种方法是将命令添加到拥有的 ViewModel 中。

```
 public override void CommitEditingStyle(UITableView tableView, UITableViewCellEditingStyle editingStyle, NSIndexPath indexPath)
        {
            if (editingStyle == UITableViewCellEditingStyle.Delete)
            {
                var item = (MyItemType)GetItemAt(indexPath);
                viewModel.PleaseDeleteItemCommand.Execute(item);
            }
            base.CommitEditingStyle(tableView, editingStyle, indexPath);
        } 
```

如果愿意，这两种方式都可以适应使用声明性数据绑定 - 只需将相关的 ViewModel 端 ICommand 绑定到客户端属性。

* * *

显然，您也可以使用自定义按钮而不是内置的表格删除按钮来实现相同的功能 - 请参阅视频[http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor。 html](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)了解宠物店如何销售小猫（这涉及删除行）。

# asp.net - 没有动态控件的静态 html 和 asp.net 站点之间的性能差异。？？

> ID：14701083
> 
> 赞同：-1
> 
> 时间：2013-02-05T05:59:04.683
> 
> 标签：asp.net, html, dynamic, static

我现在使用visual studio 2012制作网站，因为我喜欢IDE。我想知道静态html网站和没有动态控件的asp.net网站之间是否存在任何性能差异......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:39:17.080

等待网页加载的大部分时间是网络延迟。由于服务器动态生成页面，几乎没有任何延迟（假设代码不是很糟糕）。所以答案是，不，静态页面和动态页面之间的加载时间没有明显差异。

# php - SQL - 从两个表中创建与回显数据的关系

> ID：14701086
> 
> 赞同：2
> 
> 时间：2013-02-05T05:59:18.323
> 
> 标签：php, sql, phpmyadmin, relational-database, echo

我做了一些研究，但还没有找到实现这一目标所需的确切概念：

::: 编辑 ::: 我最初的请求不明确，所以我在这里再试一次

我有两张桌子，

`table_01`有四列：///`id`有两列 ： `name`/`address``id_cat``table_02``id_cat``category`

`id_cat`in `table_01`and`table_02`只是一个 INT(10)，而`category`VARCHAR 应该包含类别的确切名称（很长）。我想要做的是，当在 上进行查询时`table_01`，回显显示行`table_01`作为结果，但不是显示`id_cat`为数字，而是显示来自 的文本`table_02` `category`。

结果显示如我所料，但是，例如，如果在 中`table_02`，我有一行`id_cat`= 1 ，`category`= AAAAAA，我想将 from 回显`id_cat`为`table_01`from `category`，`table_02`所以仍然例如 002 | 站立 | 市场街125号| AAAAA 而不是我现在得到的，即 002 | 站立 | 市场街125号| 1.

我还没有在两个表之间创建关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:19:16.870

如果我了解您所追求的，您对数据的查询只需要类似于：

```
select t1.id as id, t2.category as category from tab_01 as t1
left join tab_02 as t2 on t1.id_cat = t2.id_cat where t1.id = '5'; 
```

5 显然是您在 tab_01 中寻找的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:30:13.620

我对你的问题不是很清楚。但我认为这会对你有所帮助。

现在，您已经在这两个表之间创建了一对多的关系。这意味着一个类别 ( `tab_02`) 可以有多个`tab_01`数据。

你可以试试这个查询：

```
SELECT t1.id_cat AS id_cat_number, t2.* 
FROM tab_02 t2 
INNER JOIN tab_01 t1 ON t1.id_cat = t2.id_cat 
WHERE t2.category = XXXXXXXX 
```

# wordpress - 在 wordpress 文件夹上设置另一个网站

> ID：14701087
> 
> 赞同：0
> 
> 时间：2013-02-05T05:59:19.570
> 
> 标签：wordpress, .htaccess, mod-rewrite

我正在 wordpress 安装文件夹中建立一个网站。所以它就像：

```
http://mysite.com/newsite/ 
```

主要`http://mysite.com`是wordpress安装，现在我想在newsite目录上设置另一个站点* *（不是wordpress网站）* *，所以基本上它看起来像这样`mysite/newsite/`

当我转到该链接时，它会更改 URL 并引导我进入一页`mysite`页面。我想可能是因为 .htaccess 的 wordpress 安装。

如何在不将我重定向到[http://mysite.com](http://mysite.com)页面的情况下访问我新设置的网站？

PS：Wordpress .htaccess 配置：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

您的帮助将不胜感激！

# primefaces - Primefaces：在数据表中隐藏/显示精确过滤器

> ID：14701088
> 
> 赞同：1
> 
> 时间：2013-02-05T05:59:24.787
> 
> 标签：primefaces

我正在创建一个带有过滤器的数据表，其中可以使用 selectBooleanButton 显示/隐藏过滤器。我可以隐藏文本过滤器，但“精确”过滤器的选择框不会隐藏。代码如下。我将不胜感激任何帮助。

```
<p:dataTable id="orgs" var="id" widgetVar="idTable"
value="#{orgList.ids}" rows="10"
rowKey="#{id.idPk}"
paginator="true" paginatorPosition="top" 
selectionMode="single" 
selection="#{orgList.selectedOrg}"
filteredValue="#{orgList.filteredValues}"
>

<f:facet name="header">
    <p:toolbar id="orgListToolbar">
        <p:toolbarGroup align="right">
            <p:selectBooleanButton value="#{orgList.showFilter}" onIcon="myfilter" offIcon="ui-icon-minusthick" onLabel="F" offLabel="F">
                <p:ajax update="orgs" oncomplete="idTable.clearFilters()"/>
            </p:selectBooleanButton>
        </p:toolbarGroup>
    </p:toolbar>
</f:facet>

<p:column sortBy="#{id.id}" headerText="Id" filterBy="#{id.id}" filterStyle="#{orgList.showFilter?'':'display: none; visibility: hidden;'}">
    <h:outputText value="#{id.id}" />
</p:column>
<p:column sortBy="#{id.idCls.clsName}" headerText="Id Type"             
        filterBy="#{id.idCls.clsName}" filterMatchMode="exact" filterOptions="#{commonLists.selectItemIdClses}" 
        filterStyle="#{orgList.showFilter?'':'display: none; visibility: hidden;'}" >
    <h:outputText value="#{id.idCls.clsName}" />
</p:column> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:28:48.063

那是因为 Primefaces 覆盖了您的`filterStyle`

您可以执行以下操作：

在您的自定义 css 文件中添加以下内容（`id`是您的表 id）

```
#id .ui-column-filter{
 display:none;
} 
```

确保最后包含你的css......（你可以在正文中加载css）像这样

```
<h:body>
    <h:outputStylesheet library="css" name="myCssFile.css" target="head" /> 
```

注意就够了，根本`display: none;`不需要`visibility: hidden;`

* * *

为了隐藏/显示过滤器，您可以使用带有正确选择器的 jQuery `.hide()`/`.show()`函数

例如 ：

```
$("#form\\:dataTable th select").hide();//.show

$("#form\\:dataTable th input").hide();//.show 
```

在[DataTable - Filtering](http://www.primefaces.org/showcase/ui/datatableFiltering.jsf;jsessionid=5417A2CC639003EB068647742D7EFD0F)中检查（在浏览器开发者工具的控制台中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-04T05:18:53.933

从 jsf 数据表中的列标题隐藏过滤器包括

filterStyle="显示：无"

它将隐藏过滤器列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-24T08:47:01.873

最简单的解决方案是定义自己的样式并用 !important 覆盖该值。

```
 <style type="text/css">
            .ui-column-filter{
                display:none !important;
            }
        </style> 
```

# c# - 用户锁定线程

> ID：14701089
> 
> 赞同：3
> 
> 时间：2013-02-05T05:59:30.047
> 
> 标签：c#, locking

我需要一种方法来按用户锁定 c# 线程

我有我的数据对象，并为每个用户创建新实例。每个用户都有几个使用这个对象的线程，在 IO 操作中我只想为这个用户锁定这个对象实例。使用简单的 Lock {} 锁定所有对象实例，以阻止其他用户。

我需要一些简单的解决方案。

**编辑**

`MyDataObj`我为每个用户构建新实例；`MyDataObj`然后运行每分钟更新一些数据的作业；使用`lockObj`作为锁，将数据锁定给所有用户（虽然它不是静态变量）我只需要将数据锁定给当前用户

这是代码示例

```
public sealed class MyDataObj
{
    private static readonly Dictionary<object, MyDataObj> _instances = new Dictionary<object, MyDataObj>();
    public object lockObj = new object();
    public bool jobRunning = false;
    private string data = string.Empty;
    //// --------- constractor -------------------
    private MyDataObj(int key)
    {
        LoadMyDataObj(key);
    }

    public static MyDataObj GetInstance(int key)
    {
        lock (_instances)
        {
            MyDataObj instance;
            if (_instances.TryGetValue(key, out instance))
            {
                instance = _instances[key];
                return instance;
            }
            instance = new MyDataObj(key);
            return instance;
        }
    }

    private void LoadMyDataObj(int key)
    {
        // get the data from db

    }

    public void UpdateMyData(string newData)
    {
        lock (lockObj)
        {
            this.data = newData;
        }
    }
    public string ReadMyData()
    {
        lock (lockObj)
        {
            return this.data;
        }
    }

    public class ActionObject
    {
        MyDataObj myDataObj;
        int UserID;
        //// --------- constractor -------------------
        public ActionObject(int userid)
        {
            this.UserID = userid;
            myDataObj = MyDataObj.GetInstance(userid);
            if (!myDataObj.jobRunning)
            {
                jobs jbs = new jobs(myDataObj);
                System.Threading.Thread RunJob = new System.Threading.Thread(new System.Threading.ThreadStart(jbs.dominutesAssignment));
                RunJob.Start();
                myDataObj.jobRunning = true;
            }
        }
        public ActionObject()
        {
            myDataObj = MyDataObj.GetInstance(this.UserID);
            myDataObj.UpdateMyData("some data");
        }
    }

    public class jobs
    {
        MyDataObj myDataObj = null;

        public jobs(MyDataObj grp)
        {
            this.myDataObj = grp;
        }
        public void dominutesAssignment()
        {
            while (true)
            {
                myDataObj.ReadMyData();
                System.Threading.Thread.Sleep(1000);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:48:50.267

> 我需要一种方法来按用户锁定 c# 线程。我有我的数据对象，并为每个用户创建新实例

为每个用户创建一个锁。或者如果用户存在的时间比线程长：使用用户对象作为锁。

```
lock (userOrTheUserObject)
{
    //Do some op
} 
```

> 每个用户都有多个线程使用这个对象并在 IO 操作中

这听起来更像是您应该使用异步 IO 而不是创建多个线程（这会降低效率）

> 我只想为这个用户锁定这个对象实例。使用简单的 Lock {} 锁定所有对象实例，以阻止其他用户。

如果该对象在所有用户之间共享，您必须使用`lock`. 否则锁不会很有效。另一个目标是重新设计现在要共享的对象。

> 我需要一些简单的解决方案。

没有简单的线程解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:33:59.930

您可以使用[`Monitor`](http://msdn.microsoft.com/en-us/library/de0542zz.aspx). 在此示例中，除用户 1 之外的任何人都可以同时执行 DoIt 方法。当用户 1 执行 DoIt 时，没有人可以进入它。一个弱点是如果用户 1 在用户 2 已经执行 DoIt 时尝试执行它，用户 2 会继续执行它。此外，您必须正确处理异常，否则可能会出现死锁。

```
private static readonly object lockObj = new Object();

public void Do(int userId)
{
     Monitor.Enter(lockObj);

     if (userId != 1)
          Monitor.Exit(lockObj);

     try
     {
        DoIt();
     }
     finally 
     {
         if (userId == 1)
             Monitor.Exit(lockObj);
     }
}

public void DoIt()
{
    // Do It
} 
```

# php - codeigniter 获取视图的值

> ID：14701091
> 
> 赞同：0
> 
> 时间：2013-02-05T05:59:36.097
> 
> 标签：php, codeigniter

如何获得加载视图的值？

```
$test = $this->load->view('testing',$data); 
```

如何`$this->load->view('testing',$data);`将传递的内容放入变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:03:10.513

试试这样......

```
$test = $this->load->view('testing',$data,true); 
```

整个视图将以`$test`字符串形式返回。

如需参考，请通过此链接

[http://ellislab.com/codeigniter/user-guide/general/views.html](http://ellislab.com/codeigniter/user-guide/general/views.html)

在上述链接的页面末尾查看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:06:22.617

```
 $test = $this->load->view('testing',$data,true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:03:02.720

添加`TRUE`为第三个参数：

```
$test = $this->load->view('testing',$data, TRUE); 
```

# android - 视频标签无法在我的 webview 上播放

> ID：14701092
> 
> 赞同：0
> 
> 时间：2013-02-05T05:59:37.113
> 
> 标签：android, video, webview, browser

我正在尝试从 webview 打开此链接[http://www.broken-links.com/tests/video/](http://www.broken-links.com/tests/video/)但完全没有运气。实际上它适用于我手机上的网络浏览器（android 2.3），可以播放视频。但如果我使用 webview 在我的测试应用程序上尝试它不起作用，网站已加载但视频不可用。

并不是 webview 不支持 video 标签，因为 web 浏览器可以完美运行，但我不知道我哪里出错了。

请帮忙。谢谢你！

我的简单代码是

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String fileUrl="http://www.broken-links.com/tests/video/";

    WebView wv=(WebView)findViewById(R.id.webView1);
    WebSettings settings=wv.getSettings();
    settings.setAllowFileAccess(true);
    settings.setLoadWithOverviewMode(true);
    settings.setUseWideViewPort(true);
    settings.setBuiltInZoomControls(true);
    settings.setJavaScriptEnabled(true);
    settings.setPluginsEnabled(true);

    wv.setWebChromeClient(new WebChromeClient(){
        @Override
        public boolean onConsoleMessage(
                ConsoleMessage consoleMessage) {
            Log.e("viewengine.createWebView()",
                    consoleMessage.toString());
            return true;
        }
    });

    wv.setWebViewClient(new WebViewClient(){
        @Override
        public boolean shouldOverrideUrlLoading(
                        WebView view,String url) {

            return true;
        }
    });

    wv.setHorizontalScrollBarEnabled(false);
    wv.setVerticalScrollBarEnabled(false);

    wv.loadUrl(fileUrl);
}
} 
```

和清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.nsoft.test18"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.nsoft.test18.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

和布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T12:37:43.650

在清单文件中添加这一行

```
 android:hardwareAccelerated="true" 
```

编辑：这个对我有用

```
 <application android:icon="@drawable/icon" 
            android:label="@string/app_name" 
            android:hardwareAccelerated="true" 
            android:allowBackup="true"
            android:configChanges="orientation"> 
```

你可以参考这个： [https ://stackoverflow.com/a/17273141/2210514](https://stackoverflow.com/a/17273141/2210514)

# c# - 如何从键盘布局标识符中获取键盘布局名称？

> ID：14701095
> 
> 赞同：2
> 
> 时间：2013-02-05T05:59:51.093
> 
> 标签：c#, .net

我的应用程序必须显示系统中所有已安装的输入语言以及针对每种输入语言的键盘布局。

例如：

```
 [InputLaguage]
    Tamil
      [Keyboard layouts]
        US
        Murasu Anjal
        Tamil
    English
        US 
```

我们可以从

```
 GetKeyboardLayoutList(User32.dll) 
```

`API function by splitting LWORD and HWORD.`

但是我没有找到从键盘布局标识符中获取键盘布局名称的方法。从上面的例子中，我必须得到`US, Murasu Anjal and Tamil against Tamil language.`

请帮忙……</p>

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-01T22:33:48.450

对于您的问题，这不是一个完整的答案，但这里有很大一部分是我花了几个小时手工编译的。这是每个布局代码到我的 Windows 7 版本可用的布局名称的映射。我不得不手动输入名字，所以请原谅那里的任何错别字。这些代码是以编程方式收集的。

```
using System;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows.Input;

namespace DesktopDictation.DeviceButtonMappings
{
  public class KeyboardLayout
  {
    const int KL_NAMELENGTH = 9;

    [DllImport("user32.dll")]
    private static extern long GetKeyboardLayoutName(StringBuilder pwszKLID); 

    //each keyboard layout is defined in Windows as a hex code
    public static string GetLayoutCode()
    {
      var name = new StringBuilder(KL_NAMELENGTH);
      GetKeyboardLayoutName(name);

      return name.ToString();
    }

    //This is a mapping table from hex to descriptive name
    public static String MapLayoutName(string code = null)
    {
      if (code == null)
        code = GetLayoutCode();

      switch (code)
      {
        case "0000041C":
          return "Albanian";
        case "00000401":
          return "Arabic (101)";
        case "00010401":
          return "Arabic (102)";
        case "00020401":
          return "Arabic (102) Azerty";
        case "0000042B":
          return "Armenian eastern";
        case "0001042B":
          return "Armenian Western";
        case "0000044D":
          return "Assamese - inscript";
        case "0000082C":
          return "Azeri Cyrillic";
        case "0000042C":
          return "Azeri Latin";
        case "0000046D":
          return "Bashkir";
        case "00000423":
          return "Belarusian";
        case "0000080C":
          return "Belgian French";
        case "00000813":
          return "Belgian (period)";
        case "0001080C":
          return "Belgian (comma)";
        case "00000445":
          return "Bengali";
        case "00010445":
          return "Bengali - inscript (legacy)";
        case "00020445":
          return "Bengali - inscript";
        case "0000201A":
          return "Bosnian (cyrillic)";
        case "00030402":
          return "Bulgarian";
        case "00000402":
          return "Bulgarian(typewriter)";
        case "00010402":
          return "Bulgarian (latin)";
        case "00020402":
          return "Bulgarian (phonetic)";
        case "00040402":
          return "Bulgarian (phonetic traditional)";
        case "00011009":
          return "Canada Multilingual";
        case "00001009":
          return "Canada French";
        case "00000C0C":
          return "Canada French (legacy)";
        case "00000404":
          return "Chinese (traditional) - us keyboard";
        case "00000804":
          return "Chinese (simplified) -us keyboard";
        case "00000C04":
          return "Chinese (traditional, hong kong s.a.r.) - us keyboard";
        case "00001004":
          return "Chinese (simplified, singapore) - us keyboard";
        case "00001404":
          return "Chinese (traditional, macao s.a.r.) - us keyboard";
        case "00000405":
          return "Czech";
        case "00020405":
          return "Czech programmers";
        case "00010405":
          return "Czech (qwerty)";
        case "0000041A":
          return "Croatian";
        case "00000439":
          return "Deanagari - inscript";
        case "00000406":
          return "Danish";
        case "00000465":
          return "Divehi phonetic";
        case "00010465":
          return "Divehi typewriter";
        case "00000413":
          return "Dutch";
        case "00000425":
          return "Estonian";
        case "00000438":
          return "Faeroese";
        case "0000040B":
          return "Finnish";
        case "0001083B":
          return "Finnish with sami";
        case "0000040C":
          return "French";
        case "00011809":
          return "Gaelic";
        case "00000437":
          return "Georgian";
        case "00020437":
          return "Georgian (ergonomic)";
        case "00010437":
          return "Georgian (qwerty)";
        case "00000407":
          return "German";
        case "00010407":
          return "German (ibm)";
        case "0000046F":
          return "Greenlandic";
        case "00000468":
          return "Hausa";
        case "0000040D":
          return "Hebrew";
        case "00010439":
          return "Hindi traditional";
        case "00000408":
          return "Greek";
        case "00010408":
          return "Greek (220)";
        case "00030408":
          return "Greek (220) latin";
        case "00020408":
          return "Greek (319)";
        case "00040408":
          return "Greek (319) latin";
        case "00050408":
          return "Greek latin";
        case "00060408":
          return "Greek polyonic";
        case "00000447":
          return "Gujarati";
        case "0000040E":
          return "Hungarian";
        case "0001040E":
          return "Hungarian 101 key";
        case "0000040F":
          return "Icelandic";
        case "00000470":
          return "Igbo";
        case "0000085D":
          return "Inuktitut - latin";
        case "0001045D":
          return "Inuktitut - naqittaut";
        case "00001809":
          return "Irish";
        case "00000410":
          return "Italian";
        case "00010410":
          return "Italian (142)";
        case "00000411":
          return "Japanese";
        case "0000044B":
          return "Kannada";
        case "0000043F":
          return "Kazakh";
        case "00000453":
          return "Khmer";
        case "00000412":
          return "Korean";
        case "00000440":
          return "Kyrgyz cyrillic";
        case "00000454":
          return "Lao";
        case "0000080A":
          return "Latin america";
        case "00000426":
          return "Latvian";
        case "00010426":
          return "Latvian (qwerty)";
        case "00010427":
          return "Lithuanian";
        case "00000427":
          return "Lithuanian ibm";
        case "00020427":
          return "Lithuanian standard";
        case "0000046E":
          return "Luxembourgish";
        case "0000042F":
          return "Macedonian (fyrom)";
        case "0001042F":
          return "Macedonian (fyrom) - standard";
        case "0000044C":
          return "Malayalam";
        case "0000043A":
          return "Maltese 47-key";
        case "0001043A":
          return "Maltese 48-key";
        case "0000044E":
          return "Marathi";
        case "00000481":
          return "Maroi";
        case "00000450":
          return "Mongolian cyrillic";
        case "00000850":
          return "Mongolian (mongolian script)";
        case "00000461":
          return "Nepali";
        case "00000414":
          return "Norwegian";
        case "0000043B":
          return "Norwegian with sami";
        case "00000448":
          return "Oriya";
        case "00000463":
          return "Pashto (afghanistan)";
        case "00000429":
          return "Persian";
        case "00000415":
          return "Polish (programmers)";
        case "00010415":
          return "Polish (214)";
        case "00000816":
          return "Portuguese";
        case "00000416":
          return "Portuguese (brazillian abnt)";
        case "00010416":
          return "Portuguese (brazillian abnt2)";
        case "00000446":
          return "Punjabi";
        case "00010418":
          return "Romanian (standard)";
        case "00000418":
          return "Romanian (legacy)";
        case "00020418":
          return "Romanian (programmers)";
        case "00000419":
          return "Russian";
        case "00010419":
          return "Russian (typewriter)";
        case "0002083B":
          return "Sami extended finland-sweden";
        case "0001043B":
          return "Sami extended norway";
        case "00000C1A":
          return "Serbian (cyrillic)";
        case "0000081A":
          return "Serbian (latin)";
        case "0000046C":
          return "Sesotho sa Leboa";
        case "00000432":
          return "Setswana";
        case "0000045B":
          return "Sinhala";
        case "0001045B":
          return "Sinhala -Wij 9";
        case "0000041B":
          return "Slovak";
        case "0001041B":
          return "Slovak (qwerty)";
        case "00000424":
          return "Slovenian";
        case "0001042E":
          return "Sorbian extended";
        case "0002042E":
          return "Sorbian standard";
        case "0000042E":
          return "Sorbian standard (legacy)";
        case "0000040A":
          return "Spanish";
        case "0001040A":
          return "Spanish variation";
        case "0000041D":
          return "Swedish";
        case "0000083B":
          return "Swedish with sami";
        case "00000807":
          return "Swiss german";
        case "0000100C":
          return "Swiss french";
        case "0000045A":
          return "Syriac";
        case "0001045A":
          return "Syriac phonetic";
        case "00000428":
          return "Tajik";
        case "00000449":
          return "Tamil";
        case "00000444":
          return "Tatar";
        case "0000044A":
          return "Telugu";
        case "0000041E":
          return "Thai Kedmanee";
        case "0002041E":
          return "Thai Kedmanee (non-shiftlock)";
        case "0001041E":
          return "Thai Pattachote";
        case "0003041E":
          return "Thai Pattachote (non-shiftlock)";
        case "00000451":
          return "Tibetan (prc)";
        case "0001041F":
          return "Turkish F";
        case "0000041F":
          return "Turkish Q";
        case "00000442":
          return "Turkmen";
        case "00000422":
          return "Ukrainian";
        case "00020422":
          return "Ukrainian (enhanced)";
        case "00000809":
          return "United Kingdom";
        case "00000452":
          return "United Kingdom Extended";
        case "00000409":
          return "United States";
        case "00010409":
          return "United States - dvorak";
        case "00030409":
          return "United States - dvorak left hand";
        case "00050409":
          return "United States - dvorak right hand";
        case "00004009":
          return "United States - india";
        case "00020409":
          return "United States - international";
        case "00000420":
          return "Urdu";
        case "00010480":
          return "Uyghur";
        case "00000480":
          return "Uyghur (legacy)";
        case "00000843":
          return "Uzbek cyrillic";
        case "0000042A":
          return "Vietnamese";
        case "00000485":
          return "Yakut";
        case "0000046A":
          return "Yoruba";
        case "00000488":
          return "Wolof";

        default:
          return "unknown";
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:53:36.543

没有内置函数可以做到这一点。您可能必须使用此处发布的解决方案： [如何将 Microsoft 区域设置 ID (LCID) 转换为语言代码](https://stackoverflow.com/questions/1192361/how-to-convert-microsoft-locale-id-lcid-into-language-code-or-locale-object-in)

# sql - 从 sql server 中的 2 个表中获取不同的列名

> ID：14701103
> 
> 赞同：4
> 
> 时间：2013-02-05T06:00:34.270
> 
> 标签：sql, sql-server-2008, sql-server-2005

我有不同列的项目和销售表，例如，

物品

```
ItemName                        
Itemcost                       
ItemQty 
```

销售量

```
 SalesName     
 SalesDate  
 SalesQty 
```

在上面的表格中没有公共列，但我需要得到输出

```
ItemName,ItemCost,SalesName,SalesDate. 
```

我试过联合，

```
select ItemName,ItemCost from Item
union     
select SalesName,SalesDate from Sales 
```

但我只得到 1 个表列，如 ItemName,ItemCost

请帮我解决这个问题

提前致谢

文卡特。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:04:30.700

使用下面的 sql 查询：

```
select i.ItemName, i.ItemCost, s.SalesName, s.SalesDate 
from Item as i, Sales as s; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:10:31.823

使用以下查询：

这会将 table1 中的每一行与返回所有列的 table2 （笛卡尔积）连接起来。

```
Select im.ItemName, im.ItemCost, sl.SalesName,sl.SalesDate from Item as im, Sales as sl; 
```

# magento - Magento中分层导航中的多选

> ID：14701106
> 
> 赞同：0
> 
> 时间：2013-02-05T06:00:47.767
> 
> 标签：magento, multi-select, layered-navigation

在分层导航中，当我选择特定属性时，它会从左侧选择面板中消失，所以我希望我应该能够多次选择。如果我知道它来自哪个系列，那将很有帮助。

-提前致谢。

```
public function apply(Zend_Controller_Request_Abstract $request, $filterBlock) {
    $filter = $request->getParam($this->_requestVar);
    if (is_array($filter)) {
        $text = array();
        foreach ($filter as $f)
            array_push ($text, $this->_getOptionText($f));
            if ($filter && $text) {
            $this->_getResource()->applyFilterToCollection($this, $filter);
            $this->getLayer()->getState()->addFilter($this->_createItem($text, $filter));
            $this->_items = array();
        }
        return $this;
    }
    $text = $this->_getOptionText($filter);
    if ($filter && $text) {
        $this->_getResource()->applyFilterToCollection($this, $filter);
        $this->getLayer()->getState()->addFilter($this->_createItem($text, $filter));
        $this->_items = array();
    }
    return $this;
}

public function applyFilterToCollection($filter, $value)
{
    $collection = $filter->getLayer()->getProductCollection();
    $attribute  = $filter->getAttributeModel();
    $connection = $this->_getReadAdapter();
    $tableAlias = $attribute->getAttributeCode() . '_idx';
     if (!is_array($value)) {
        $conditions = array(
        "{$tableAlias}.entity_id = e.entity_id",
        $connection->quoteInto("{$tableAlias}.attribute_id = ?", $attribute->getAttributeId()),
        $connection->quoteInto("{$tableAlias}.store_id = ?", $collection->getStoreId()),
        $connection->quoteInto("{$tableAlias}.value = ?", $value)
    );
     }else{

         $conditions = array(
        "{$tableAlias}.entity_id = e.entity_id",
        $connection->quoteInto("{$tableAlias}.attribute_id = ?", $attribute->getAttributeId()),
        $connection->quoteInto("{$tableAlias}.store_id = ?", $collection->getStoreId()),
        $connection->quoteInto("{$tableAlias}.value in (?)",$value)
    );
     }

    $collection->getSelect()->join(
        array($tableAlias => $this->getMainTable()),
        implode(' AND ', $conditions),
        array()
    );

    //echo $collection->getSelect();

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:24:37.017

我做过类似的事情，你必须重写 Mage_Catalog_Model_Layer_Filter_Attribute 类，它使用方法 apply() 来过滤结果。

# java - 用swt中的表项刷新表编辑器

> ID：14701116
> 
> 赞同：0
> 
> 时间：2013-02-05T06:01:24.177
> 
> 标签：java, swt

您好，我有以下 swt 表代码

```
private Table   folderAssociationTable;
private TableItem            item;
private TableEditor          editor; 

folderAssociationTable = componentsRenderer.createTableWidget(container, SWT.BORDER | SWT.MULTI  | SWT.FULL_SELECTION, 2, true);

        folderAssociationTable.addListener(SWT.MeasureItem, new Listener() {
            public void handleEvent(Event event) {
                event.height = 20;
            }
        });

        componentsRenderer.createTableColumWidget(folderAssociationTable, SWT.CHECK, "Item", 80);
        // add a column to display source folders
        componentsRenderer.createTableColumWidget(folderAssociationTable, 
                SWT.LEFT, PropertyClass.getPropertyLabel(QTLConstants.SOURCE_FOLDER_COLUMN_LABEL), 200);
        // add a column to display target folders
        componentsRenderer.createTableColumWidget(folderAssociationTable,
                SWT.LEFT, PropertyClass.getPropertyLabel(QTLConstants.TARGET_FOLDER_COLUMN_LABEL), 200); 
```

然后以这种方式添加表数据

```
item = new TableItem(folderAssociationTable, SWT.NONE);
                            editor = new TableEditor (folderAssociationTable);

                            Button button = new Button(folderAssociationTable, SWT.CHECK);
                            button.setText("item "+ (i+1));
                            button.pack();
                            editor.minimumWidth = button.getSize ().x;
                            editor.setEditor(button, item, 0);

                            item.setText(1, folderlist[i]);    // add source folder to the first column of the table
                            item.setText(2, targetFolderPath);  // add target folder to the second column of the table
                            sourceTargetFolderMap.put(folderlist[i], targetFolderPath); 
```

我在表格组件外部的此页面上有删除按钮，在其操作侦听器上，我正在从表格中删除选定的行，但在这种情况下，当表格更新时，只有表格项目被更新，但表格编辑器保持在同一位置，我如何刷新两者单击删除按钮时的表格编辑器和表格项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:29:22.047

您看过[文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/TableEditor.html)中给出的示例吗？将此添加到您的`ActionListener`：

```
// to close the old editor
Control oldEditor = editor.getEditor();
if (oldEditor != null) oldEditor.dispose();

// add some logic if you want to open the editor again on a different row 
```

# ios6 - ios,set uitabbarcontroller：不推荐使用两阶段旋转动画。此应用程序应使用更流畅的单阶段动画

> ID：14701117
> 
> 赞同：0
> 
> 时间：2013-02-05T06:01:24.223
> 
> 标签：ios6, window, uitabbarcontroller, deprecated

我有一个按钮，里面有触摸事件。当我编写以下代码来更改根 viewController 时，警告显示：`Two-stage rotation animation is deprecated. This application should use the smoother single-stage animation`

```
- (IBAction)fn_login:(id)sender {
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    UIWindow *window = delegate.window;
    rootTabViewController* rootVC = [[[rootTabViewController alloc]init]autorelease];
    window.rootViewController = rootVC;
} 
```

rootTabViewController 是一个 UITabbarController。

如果将 UINavigationBar 与 UITabbarViewController 一起使用，则警告是相同的。

```
UINavigationController *navigationCtrl = [[[UINavigationController alloc] initWithRootViewController:rootVC] autorelease];
window.rootViewController = navigationCtrl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:07:53.290

您正在分配 rootViewController 两次。分配时一次

```
 UINavigationController *navigationCtrl = [[[UINavigationController alloc] initWithRootViewController:rootVC] autorelease];

                                                                                     //^here 
```

第二次

```
window.rootViewController = navigationCtrl;
      ^^here 
```

无需分配两次。只需删除最后一行

# libgit2sharp - 需要一点帮助在远程存储库上执行操作

> ID：14701119
> 
> 赞同：0
> 
> 时间：2013-02-05T06:01:35.427
> 
> 标签：libgit2sharp

我一直在修补，并阅读了我能找到的少量 Wiki 信息，并查看了我认为可能相关的测试，但是我在为一些事情想出一个可行的解决方案时遇到了问题。

大多数情况下，我正在寻找一种方法来列出在您的工作存储库/本地提交之前已推送到服务器的提交。我尝试过使用 Fetch 和 FetchHeads，但是我想，查看 Network 类的所有文档似乎并没有产生任何我能理解的东西。理想情况下，我有兴趣看到以下内容：

```
 IQueriableCommitLog Repository.Network.GetCommitsAhead 
```

或者

```
 IQueriableCommitLog Repository.Remote.GetCommitsAhead 
```

然后，只需像您一样使用结果：

```
 IQueriableCommitLog Repository.Commits 
```

此外，也许是远程提交的 Commit.UpdateTo() 之类的方法。

对于我正在寻找的东西，我离基地太远了吗？此时是否可以执行诸如此类的操作？libgit2是否支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:13:25.663

> 大多数情况下，我正在寻找一种方法来列出在您的工作存储库/本地提交之前已推送到服务器的提交。

A`Branch`是本地的或远程的。跟踪其他的本地`Branch`es 暴露一个`TrackedBranch`属性。

考虑具有非空属性的本地**分支**`TrackedBranch`

*   已在此本地分支上执行且从跟踪的分支中不知道的提交。

`repo.Commits.QueryBy(new Filter { Since = branch.Tip, Until = branch.TrackedBranch });`

*   存在于被跟踪分支中且本地不知道的提交

`repo.Commits.QueryBy(new Filter { Since = TrackedBranch, Until = Tip })`

# c# - C# 复合赋值（例如 +=、-= 等）“例外”

> ID：14701124
> 
> 赞同：-3
> 
> 时间：2013-02-05T06:01:58.373
> 
> 标签：c#, events, compound-assignment

我正在读一本关于 C# 的书，其中有关于复合赋值的内容（例如 +=、-=、*=、/=、<<=、>>=）：

> 这个规则的一个微妙的例外是事件，我们将在第 4 章中描述：这里的 += 和 -= 运算符被特殊处理并映射到事件的添加和删除访问器。

谁能用简单的英语解释一下这意味着什么？我还没到第四章。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T06:06:39.480

通常 a`+=`会将右侧的表达式/变量添加到左侧的表达式/变量，并将结果分配给左侧。

```
// if a = 4, after this statement, a would be 5
a += 1; 
```

但是，如果带有 a 的表达式的左侧`+=`是一个事件，则情况并非如此，而是右侧的事件处理程序，它被添加到该事件的事件处理程序列表中。

```
// whereas on the below statement someEventHandler is added to the collection of event handlers for the 'OnSomeEvent' event
self.OnSomeEvent += someEventHandler 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:06:32.847

它只是意味着 += 将事件方法附加到例如控件而不是加法（例如算术加法）

```
// += as in arithmetic addition
int i = 3;
i += 1;  // i now outputs 4

// += as in programmatically attaching an event to a control 
Button btn = new Button();
btn.Click += new EventHandler(btn_Click); 

private void btn_Click(object obj) { ... ; } 
```

看到不同？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:19:07.620

C# 中有一个委托的概念，它可以指向一个方法。您可以将事件视为一种特殊类型的委托。您可以`add`（或`remove`）许多方法来处理一个事件。它允许您在发生特定事件时执行指定的方法。

一个简单的示例，当您删除在控制台和 MessageBox 上都显示删除结果的文件时。

```
// This is the delegate. Any instance with DeletedEventHandler type 
// can point a method which returns voids and accepts parameters (object,bool)
public delegate void DeletedEventHandler(object sender, bool deleted);

public class FileDeleter
{   
     private DeletedEventHandler onDelete;

     public event DeletedEventHandler OnDelete
     {
         // The add and remove accessors
         add { onDelete += value; }
         remove { onDelete -= value; }
     }

     public void Delete(string filePath)
     {
         try
         {
             File.Delete(filePath);
             RaiseOnDelete(true);
         }
         catch
         {
             RaiseOnDelete(false);
         }
     }

     private void RaiseOnDelete(bool deleted) 
     {
         if (onDelete != null)
             onDelete(this, deleted); // all methods added executes here
     }
}

public void TestMethod()
{
    FileDeleter deleter = new FileDeleter();
    // Note that both ShowDeleteInfoWindows and ShowDeleteInfoConsole are in form of void(object,bool) which is compatible with DeletedEventHandler 
    deleter.OnDelete += new DeletedEventHandler(DeletedOnConsole);
    deleter.OnDelete += new DeletedEventHandler(ShowDeleteInfoWindows);
    deleter.Delete(@"C:\test.txt");
}

private void ShowDeleteInfoConsole(object deleter, bool isDeleted)
{
    Console.WriteLine(isDeleted);
}

private void ShowDeleteInfoWindows(object deleter, bool isDeleted)
{
    MessageBox.Show(isDeleted.ToString());
} 
```

# ios - 如何使用我的 ViewModel 绑定“UITableViewVellAccessory.CheckMark”？

> ID：14701127
> 
> 赞同：2
> 
> 时间：2013-02-05T06:02:05.923
> 
> 标签：ios, xamarin.ios, mvvmcross

我需要将 viewModel 中的 bool 属性绑定到 Table Cell 属性 UITableViewVellAccessory.CheckMark？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T07:37:21.823

一种方法是在您的单元格中设置一个布尔属性并绑定到该属性：

```
 public bool IsChecked
    {
        get { return Accessory == UITableViewCellAccessory.Checkmark; }
        set { base.Accessory = value ? UITableViewCellAccessory.Checkmark : UITableViewCellAccessory.None; }
    } 
```

另一种方法是设置一个`ValueConverter`将您的 ViewModel 属性转换为一个`UITableViewCellAssessory`值

```
 public class MyValueConverter : MvxBaseValueConverter 
    {
        public override object Convert(object value, Type type, object parmeter, CultureInfo cultureInfo)
        {
            return ((bool) value) ?  UITableViewCellAccessory.Checkmark : UITableViewCellAccessory.None;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:08:12.737

在您的`cellForRowAtIndexPath`代表中，尝试检查并`UITableViewCellAccessory`根据您的情况给出....

```
if (//here you check)
    { // item needed - display checkmark
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else
    { // not needed no checkmark
        cell.accessoryType = UITableViewCellAccessoryNone;
    } 
```

# jquery - 数据框 - Jquery Mobile

> ID：14701132
> 
> 赞同：1
> 
> 时间：2013-02-05T06:02:36.893
> 
> 标签：jquery, jquery-mobile

我正在使用 Jquery mobile(1.2.0) [脱机工作] 为 Android 手机创建应用程序。我正在使用 Datebox.. 所以下载并链接了 1.7.1 版本的 datebox css 文件，这限制了我只能使用更高版本的 css 和 js 文件，而不是稳定版本 1.2.0..

检查了jquery移动网站，没有1.2.0版本的datebox js文件。我不想插入这么多的css和js文件。那么，我该怎么做呢？

# django - 未绑定到模型的 Django Piston 处理程序的 ImportError

> ID：14701137
> 
> 赞同：0
> 
> 时间：2013-02-05T06:02:58.827
> 
> 标签：django, importerror, django-piston

我创建了一个未绑定到 ORM 中的模型的自定义处理`CustomHandler`程序（这是我的设置：**`ImportError: cannot import CustomHandler`**`resources.py`

**custom_handlers.py**：

```
from piston.handler import BaseHandler

class CustomHandler(BaseHandler):
    allowed_methods = ('GET',)

    def read(self, request):
        return 'test' 
```

**资源.py**：

```
from piston.resource import Resource
from piston.utils import rc
import simplejson as json
from api.authentication import DjangoAuthentication
from api.handlers import CustomHandler # ERROR THROWN HERE

auth = DjangoAuthentication(realm='...')

class JSONResource(Resource):
    def determine_emitter(self, request, *args, **kwargs):
        """
        Default to the json emitter.
        """
        try:
            return kwargs['emitter_format']
        except KeyError:
            pass
        if 'format' in request.GET:
            return request.GET.get('format')
        return 'json'

    def form_validation_response(self, e):
        """
        Turns the error object into a serializable construct.
        """
        resp = rc.BAD_REQUEST
        json_errors = json.dumps(
            dict(
                (k, map(unicode, v))
                for (k, v) in e.form.errors.iteritems()
            )
        )
        resp.write(json_errors)
        return resp

custom_handler = JSONResource(CustomHandler, authentication=auth) 
```

**urls.py**：

```
from django.conf.urls.defaults import patterns, url

from api.resources import custom_handler

urlpatterns = patterns('',
    url(r'^things/$', custom_handler),
) 
```

**更新：**我尝试手动将 s 编译`py`为`pyc`s ，但没有成功。我也在[Piston 的文档](https://bitbucket.org/jespern/django-piston/wiki/FAQ#!why-does-piston-use-fields-from-previous-handlers)中读到了这个：

> 当您创建一个绑定到模型的处理程序时，Piston 将自动注册它（通过元类。）

但我在文档中找不到任何关于创建与模型无关的处理程序的内容，特别*是如何注册它*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:25:33.783

不得不添加`from api.handlers.custom_handlers import CustomHandler`到`api/handlers/__init__.py`

# python - 计算行向量和平均行向量之间的差异？

> ID：14701150
> 
> 赞同：0
> 
> 时间：2013-02-05T06:03:17.517
> 
> 标签：python

假设矩阵为 M=

```
[[.10, .32, .20, .40, .80], 
 [.23, .18, .56, .61, .12], 
 [.90, .30, .60, .50, .30], 
 [.34, .75, .91, .19, .21]] 
```

平均行向量是 rav=

```
[ 0.3925  0.3875  0.5675  0.425   0.3575] 
```

我想从上述矩阵 (M) 中的每个行向量中减去平均行向量 (rav)，即 M(i)-rav。我怎样才能以有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:08:32.993

假设您使用的是 numpy，这很简单：

```
M = np.asarray(M) # make sure M is an array...it presumably would be
rav = np.mean(M, axis=0)
diffs = M - rav 
```

由于[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)而起作用。

如果您使用的是普通列表，它会稍微复杂一些，并且代码会慢得多，但是应该这样做：

```
# M is a list of num_rows lists of num_cols floats
rav = [sum(row[j] for row in M) / num_rows for j in range(num_cols)]
diffs = [[x - mean_x for x, mean_x in zip(row, rav)] for row in M] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:11:43.173

在纯 Python 中

```
>>> [[i-j for i,j in zip(m, rav)] for m in M]
[[-0.2925, -0.0675, -0.3675, -0.024999999999999967, 0.44250000000000006], [-0.1625, -0.20750000000000002, -0.007499999999999951, 0.185, -0.2375], [0.5075000000000001, -0.08750000000000002, 0.03249999999999997, 0.07500000000000001, -0.057499999999999996], [-0.05249999999999999, 0.3625, 0.3425, -0.235, -0.1475]] 
```

如果您正在执行一堆矩阵运算，使用 numpy 会更快。与 numpy 矩阵相互转换是相当昂贵的。

# php - wordpress 在搜索结果中包含类别

> ID：14701155
> 
> 赞同：0
> 
> 时间：2013-02-05T06:03:38.153
> 
> 标签：php, wordpress

我正在尝试在搜索结果中包含类别，我已经用谷歌搜索了几个小时，但没有解决方案。

现在，通过包括类别，我并不是指在某个类别中搜索，我的意思是说我有一家自行车店，并且网站中包含许多公司。例如，用户搜索`BMX mountain cross..`。它将首先返回类别 BMX（通过单击您将被发送到类别页面）以及与 wordpress 通常所做的搜索词相关的帖子。

有人有任何线索或可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:16:36.807

这个插件应该可以解决问题 [http://guff.szub.net/source/search-catname.php](http://guff.szub.net/source/search-catname.php)

# php - PHP中单例设计模式中私有构造函数的行为

> ID：14701160
> 
> 赞同：2
> 
> 时间：2013-02-05T06:03:50.650
> 
> 标签：php, design-patterns, singleton

考虑这个示例单例类：

```
class Model_Acl
{
    protected static $_instance;

    private function __construct($a) {
        echo $a;
    }

    public static function getInstance()
    {
        if(!isset(self::$_instance)) {
            self::$_instance = new Model_Acl('hello world');
        }
        return self::$_instance;
    }
} 
```

在同一类的静态方法中，我能够初始化构造函数私有的类。这是否意味着在尝试实例化类中的对象时，类初始化的范围变为本地？

如果有人可以参考访问修饰符来解释类实例化时 PHP 的行为，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:18:30.183

您只能通过 Model_Acl::getinstance() 对其进行初始化。

但是，是的，它会起作用。

单例不被认为是一种好的做法，您应该考虑依赖注入。

[http://fabien.potencier.org/article/11/what-is-dependency-injection](http://fabien.potencier.org/article/11/what-is-dependency-injection)。

有关 php 单例的更多信息

[PHP 单例类的最佳实践](https://stackoverflow.com/questions/8776788/best-practice-on-php-singleton-classes)

# android - tabwidget 图标对齐文本

> ID：14701165
> 
> 赞同：2
> 
> 时间：2013-02-05T06:04:14.020
> 
> 标签：android, android-layout, android-tablelayout, android-tabs

您好，我已经有一个在 android 中使用标签小部件的标签布局代码，每个标签都有自己的活动，但我得到了这个：

如何向下移动红色的文本圆圈？

这是我的代码：

**主要活动：**

```
package com.example.androidtablayout;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class AndroidTabLayoutActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        // Tab for Photos
        TabSpec photospec = tabHost.newTabSpec("En Vivo");
        photospec.setIndicator("En Vivo", getResources().getDrawable(R.drawable.icon_songs_tab));
        Intent photosIntent = new Intent(this, PhotosActivity.class);
        photospec.setContent(photosIntent);

        // Tab for Songs
        TabSpec songspec = tabHost.newTabSpec("Twitter");
        // setting Title and Icon for the Tab
        songspec.setIndicator("Twitter", getResources().getDrawable(R.drawable.icon_photos_tab));
        Intent songsIntent = new Intent(this, SongsActivity.class);
        songspec.setContent(songsIntent);

        // Tab for Videos
        TabSpec videospec = tabHost.newTabSpec("Contactenos");
        videospec.setIndicator("Contactenos", getResources().getDrawable(R.drawable.icon_videos_tab));
        Intent videosIntent = new Intent(this, VideosActivity.class);
        videospec.setContent(videosIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(photospec); // Adding photos tab
        tabHost.addTab(songspec); // Adding songs tab
        tabHost.addTab(videospec); // Adding videos tab
    }
} 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:18:06.830

我这样做是为了使图像和文本在标签上对齐：

```
for(int i=0;i<tabHost.getTabWidget().getChildCount();i++) 
            {
                TextView tv = (TextView) tabHost.getTabWidget().getChildAt(i).findViewById(android.R.id.title);
                tv.setTextColor(Color.WHITE);
                tv.setPadding(0, 0, 0, 5);
                tv.setShadowLayer(2, 2, 2, Color.BLACK);
            } 
```

根据您的要求设置填充。

设置标签的高度：

```
LinearLayout.LayoutParams tab1=(LinearLayout.LayoutParams) getTabHost().getTabWidget().getChildAt(0).getLayoutParams();
            LinearLayout.LayoutParams tab2=(LinearLayout.LayoutParams) getTabHost().getTabWidget().getChildAt(1).getLayoutParams();
            LinearLayout.LayoutParams tab3=(LinearLayout.LayoutParams) getTabHost().getTabWidget().getChildAt(2).getLayoutParams();
            LinearLayout.LayoutParams tab4=(LinearLayout.LayoutParams) getTabHost().getTabWidget().getChildAt(3).getLayoutParams();
            LinearLayout.LayoutParams tab5=(LinearLayout.LayoutParams) getTabHost().getTabWidget().getChildAt(4).getLayoutParams();

            tab1.setMargins(10, 10, 5, 0);
            tab2.setMargins(5, 10, 5, 0);
            tab3.setMargins(5, 10, 5, 0);
            tab4.setMargins(5, 10, 10, 0);
            tab5.setMargins(0, 10, 10, 0); 
```

# ant - 使用 h5bp / ant-build-script 删除调试输出

> ID：14701168
> 
> 赞同：0
> 
> 时间：2013-02-05T06:04:21.087
> 
> 标签：ant, html5boilerplate

在 ant-build-script 文档中，它说我可以用注释标记我的脚本，以说明要缩小和合并的 Javascript 文件。

> <-- 通过构建脚本连接和缩小的脚本 -->
> <script src="js/plugins.js"></script>
> <cript src="js/main.js"></script>
> <-- 结束脚本-->

有没有办法可以使用类似的方法来禁用调试输出，或删除任何文件（Javascript、PHP 等）中的特定行

我正在尝试完成的一个示例：

> <!-- 删除这些行 -->
> console.log("Starting test");
> console.log("测试 2");
> <-- 结束删除这些行-->

此外，使用相同的示例，如果它可以替换一行。这方面的一个例子是，如果我希望它将变量从本地测试目录更改为远程生产目录。

我希望这是有道理的，我很感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:12:10.023

如果您尝试使用 h5bp 默认 Google Closure Compiler 删除 Javascript 行，我建议查看 @define JSDoc Tag

```
/** @define {boolean} */ 
var DEBUG = true; 
```

然后，在您的 project.properties 文件中查找：`# Closure Compiler Options`并设置：`tool.closure.opts = --define DEBUG=false`

最后，将您希望在生产中忽略的任何代码包装在条件中：

```
if (!DEBUG) {
    console.log("Starting test");
    console.log("Test 2");
} 
```

@define JSDoc 标签也将帮助您解决第二个问题。

```
/** 
 * @define {string} 
 */ 
var AJAX_URL = 'http://localhost/';

console.log(AJAX_URL); 
```

使用编译选项：（`--compilation_level ADVANCED_OPTIMIZATIONS --define AJAX_URL=\'http://example.com/\'`注意：您需要根据您的平台调整引号转义）结果代码是：

```
console.log("http://example.com/"); 
```

当然，有很多方法可以解决这个问题，请参阅：

*   [http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)
*   [http://dailyjs.com/2012/02/02/console/](http://dailyjs.com/2012/02/02/console/)
*   [https://developers.google.com/closure/compiler/docs/js-for-compiler?hl=en](https://developers.google.com/closure/compiler/docs/js-for-compiler?hl=en)

# perl - 一些 GNUPlot 终端从命令行工作，但从 Perl 调用时不能（管道）

> ID：14701169
> 
> 赞同：1
> 
> 时间：2013-02-05T06:04:22.523
> 
> 标签：perl, cgi, pipe, gnuplot

我正在使用 Perl 编写一个 CGI 程序，将输入通过管道传输到 Gnuplot，如下所示：

[如何从 perl 调用 gnuplot 脚本](https://stackoverflow.com/questions/11646153/how-to-call-a-gnuplot-script-from-perl)

首先，我通过编写一个 .gnu 文件并在 bash 终端中使用 gnuplot 执行它来测试我所有的 gnuplot 绘图例程。我已经尝试了许多具有相应输出格式的不同 gnuplot 终端（“设置终端...，设置输出...”），这总是有效的。

其次，在执行了第一个测试之后，我尝试将相同的“字符串”（粗略地说）从 .gnu 文件传递​​到 perl 脚本中的 gnuplot。我已经检查了很多次以确保字符串具有正确转义的字符。这适用于 epslatex 终端，但不适用于 png、gif、pdf、jpeg、cairolatex 或 pdfcairo 终端，尽管所有这些终端类型在我的第一个测试用例中都有效。我所说的“不起作用”的意思是在 Perl CGI 中使用这些终端会生成一个输出名称的文件，但它的大小为 0kB。

我怀疑冲洗管道可能有问题，类似于：

[为什么我的父进程在退出之前看不到子进程的输出？](https://stackoverflow.com/questions/2343633/why-doesnt-my-parent-process-see-the-childs-output-until-it-exits)

但是在通过管道传输到 gnuplot 的字符串末尾添加换行符，然后打开 autoflush ($|=1) 并不能解决问题。

我很困惑。知道会发生什么吗？

编辑：这是示例代码：

是否有效：

```
open my $GP, '|-', 'gnuplot';  
my $GPoutput = "set xrange [-5:5]  
set terminal epslatex  
set output \"graph1.tex\  
plot sin(x)";  
$|=1;  
print $GP "$GPoutput"; 
```

不工作：

```
open my $GP, '|-', 'gnuplot';  
my $GPoutput = "set xrange [-5:5]  
set terminal cairolatex  
set output \"graph1.tex\  
plot sin(x)";  
$|=1;  
print $GP "$GPoutput"; 
```

虽然如果我将 $GPoutput 的字符串放入 .gnu 文件并从命令行执行 gnuplot，它确实可以工作，并且在 gnuplot 上运行“设置终端”表明 cairolatex 是一个有效的终端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:23:00.770

您可能想为此尝试一个[CPAN 模块](https://metacpan.org/search?q=gnuplot)，我碰巧知道它比您想象的要难。

我熟悉的是[PDL（Perl 数据语言）](http://pdl.perl.org)的扩展，称为[PDL::Graphics::Gnuplot](https://metacpan.org/module/PDL%3a%3aGraphics%3a%3aGnuplot)。

# java - Java 中哪个更快：DB2 INSERT/SELECT 或 File Write/Read

> ID：14701174
> 
> 赞同：0
> 
> 时间：2013-02-05T06:04:45.907
> 
> 标签：java, multithreading, db2

在处理应用程序时，解析大量文本文件（例如 4000 个文件）；发现使用 JDBC 作为 INSERT/SELECT Prepared Statements 将解析的数据存储/读取到 DB2 中的时间延迟。（仅供参考：使用单独的线程解析数据，然后将日期粘贴到另一个线程以保存到 DB2 中）。

**我可以使用文件写入/读取机制来解析数据，而不是 DB2 交互吗？它会比它更快吗？**

> 如果文件处理会更快，那么需要使用哪种机制：简单文件写入/读取或对象写入/读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:07:41.543

如果使用得当，简单的文件读/写应该更快，即如果数据以大块的形式传输。

另外，考虑使用[内存映射文件](http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:33:57.800

您是否考虑过从 Java 使用 DB2 LOAD。插入将非常快，您可以使用光标进行选择，或从文件中插入。

但是，将数据插入/加载到数据库中与写入文件完全不同。你想让我做什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:15:53.613

这取决于您要读取/写入的数据范围。读取一个巨大的文件有它自己的开销。如果 source 是一个小文件，您显然可以快速读取它，因为解析开销会很低。但如果文件由复杂结构组成，RDBMS 或数据库可能是一个可行的选择。

另一种选择是您可能想要查看要读取和写入的数据的自动性、一致性、隔离性和持久性 (ACID)。

# ajax - jsonp调用mvc

> ID：14701178
> 
> 赞同：0
> 
> 时间：2013-02-05T06:05:00.850
> 
> 标签：ajax, asp.net-mvc, jsonp

是否有可能在 mvc architecturere 中获得跨域 ajax？我正在使用 jsonp，如果两个站点都在本地主机中，它可以完美运行。我的疑问是，mvc架构是否阻止了jsonp调用。？？ `<script src="www.example.com"></script>`

`$.ajax({ url: "www.example.com?id=abc&callback=?", dataType: "jsonp" });`

```
function mycallback(data)
{`alert(data);`

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:33:52.710

在 ASP.NET MVC 3 中返回 JSONP 数据并不是开箱即用的，您需要为其编写包装器。

什么是 JSONP？

> 服务器返回 JSONP 并在查询字符串中添加了“?callback=”，因此服务器将处理请求，而不是返回 JSON 对象或 XML，它使用回调参数作为包装器以“application/x-javascript”响应进行响应函数，所以当请求被响应时，浏览器会执行返回的 JavaScript。

# sip - 非对称后拨号延迟

> ID：14701181
> 
> 赞同：1
> 
> 时间：2013-02-05T06:05:06.463
> 
> 标签：sip, voip, 3g, modem

我正在尝试测量具有不同介质传输的 IMS 客户端之间的拨号后延迟。

我所拥有的是：

当呼叫者使用*HSDPA*（上升 384 kbps。下降 3,6 kbps）并且接收者使用*EDGE*时，它比呼叫者*EDGE*和被呼叫者*HSDPA*具有更多的*PDD*。

 **有谁知道这怎么会发生？

*它必须具有相同的 PDD，不是吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:16:11.763

我根本不明白为什么 PDD 会与网络传输有关。PDD 很可能与您的运营商的计费和路由服务器在拨打电话之前需要执行的任何处理有关。

如果您的 IMS 客户端使用 SIP，正如您在问题的标签中提到的那样，那么相对而言，呼叫请求数据包是如此之小，以至于通过任何网络传输的传输时间可能可以忽略不计。**

# linux - 使用双头显卡上的 qt-creator 在不同的显示器上运行 2 个 UI

> ID：14701182
> 
> 赞同：2
> 
> 时间：2013-02-05T06:05:12.367
> 
> 标签：linux, qt, qt-creator, multiple-monitors

我的系统 (RHEL 6.3) 上有一个双显示显卡。

我使用 qt creator (qt-4.8) 开发了一个简单的应用程序，它会抛出两个不同的 UI。

当我执行此操作时，两个 UI 仅在一个显示器中启动。

我需要的是我的一个 UI 应该在主屏幕上运行，一个在辅助屏幕上运行（即 0.0 和 0.1）。

我应该如何使用 qt-creator 做到这一点？

```
xclock -display :0.0 
xclock -display :0.1 
```

工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:47:38.600

您可以使用[QDesktopWidget](http://doc.qt.digia.com/stable/qdesktopwidget.html)来获取屏幕信息。它允许您查询屏幕数量和每个屏幕的尺寸

```
int QDesktopWidget::screenCount () const;
const QRect QDesktopWidget::availableGeometry ( int screen = -1 ) const; 
```

从那里，您可以将小部件移动到任何给定的屏幕。例如，以下代码将小部件移动到给定屏幕，如果指定屏幕不可用，则移动到默认屏幕：

```
QDesktopWidget* w = QApplication::desktop();
//some value
int mydesiredscreen = 1;
//fallback to default screen if none
if(mydesiredscreen >=  w->screenCount())  mydesiredscreen = -1; 

QRect rect1 = w->availableGeometry(mydesiredscreen);
mywindow->move(rect1.topLeft()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:13:33.527

光辉，

要在辅助监视器上显示您的第二个 UI，您可以为您的第二个 UI 使用 setParent 属性：

int screenNumber = 1; /* 想要的屏幕编号 */

QWidget secondaryUI_widget; /* 次要 UI 对象，将在次监视器上显示 */

QDesktopWidget myDesktopWidget; /* 创建一个 QDesktopWidget 对象 */

secondUI_myDesktopWidget.setParent(myDesktopWidget(screenNumber));

上面的行将设置您希望在其上将页面显示为 UI 对象的父级的所需屏幕。现在您可以在程序中的任何位置为您的第二个 UI 调用 show() 函数，第二个 UI 将显示在所需的屏幕编号上，就像 screenNumber 值一样

# c# - 禁用窗体的双击最大化/最小化

> ID：14701191
> 
> 赞同：2
> 
> 时间：2013-02-05T06:05:53.053
> 
> 标签：c#, .net, winforms, forms

> **可能重复：**
> [如何停止双击窗口标题栏以最大化 FormBorderStyle.FixedToolWindow 的窗口？](https://stackoverflow.com/questions/9588540/how-can-i-stop-a-double-click-of-the-window-title-bar-from-maximizing-a-window-o)

我有一个表单，我从中删除了**最小化**和**最大化**按钮，将其设置`FormBorderStyle`为无，添加了[拖放行为](https://stackoverflow.com/a/14363217/1471381)，但我希望我的表单大小是静态的。现在表格在 上最大化/最小化`Double Click`。

我搜索但没有找到相关的答案，我提出的问题是关于禁用最小化和最大化按钮。

我有一种方法可以告诉我的表单*“嘿，你会忽略双击并保持你的大小吗？”* ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T06:13:17.853

您可以设置`MaximumSize`和`MinimumSize`。如果它们都相等，它应该防止表单改变大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:49:03.990

如果您可以将 FormBorderStyle 从 None 设置为 FixedSingle 或 Fixed3D ，它将防止双击时形成 maximix

# android - 进度条显示相应文本视图的进度？

> ID：14701194
> 
> 赞同：1
> 
> 时间：2013-02-05T06:06:18.187
> 
> 标签：android

所以我正在研究这个游戏创意，我认为有一个进度条作为 XP 条真的很酷。所以我有一个 textView 显示你有多少 XP，我希望进度条随着你获得更多 XP 而增加，然后在玩家升级后重置并增加数量。

我不知道如何使用这些，我希望得到一些提示....

有任何想法吗？

# flash - 显示时闪烁错误：DIV 块

> ID：14701198
> 
> 赞同：0
> 
> 时间：2013-02-05T06:06:28.333
> 
> 标签：flash, css

我在一个 div 中有一个 flash 对象。加载时工作正常。

现在我要做的是，我设置 style="display:none;" 在一个按钮上单击 Div 并在另一个按钮上单击我设置其样式 =“显示：块；”。

因此，当它设置为 style="display:block;" 时，它会给我以下错误并且不会加载 Flash：

> “这部电影中的一个脚本导致 Adob​​e Flash Player 运行缓慢。如果它继续运行，您的计算机可能会变得无响应。要中止脚本吗？”</p>

为什么会发生？有什么解决方法吗？

问候， 萨加尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:10:36.027

我不确定原因，我会建议一个应该工作的解决方法。创建一个 CSS 类

`.hide { display: hidden; }`

`<div>`单击button1时将此类添加到您的，单击button2时删除此类。

# curl - curl 忽略特殊字符

> ID：14701205
> 
> 赞同：1
> 
> 时间：2013-02-05T06:07:22.143
> 
> 标签：curl

我想将 curl 用于发布请求。这个[链接](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)告诉你怎么做。但是，如果参数中的内容具有`&`. 它分解文本并将其假定为另一个属性。如何处理这样的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:13:03.967

也许您可以对它们进行[URL 编码](http://wikipedia.org/wiki/Percent-encoding)。

我成功地使用了[Eric Meyer 的页面](http://meyerweb.com/eric/tools/dencoder)。在你的情况下

```
& = %26 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:13:31.757

您需要对“&”字符进行编码...取决于您使用哪种语言进行编码，总有一种方法。

# iphone - MapKit 没有场地名称？

> ID：14701207
> 
> 赞同：2
> 
> 时间：2013-02-05T06:07:29.253
> 
> 标签：iphone, ios, ios6, mkmapview, mapkit

这一定是一个超级新手的问题，但我刚刚开始使用 Mapkit，而且我认为理所当然的场地名称似乎并不是 Mapkit 开箱即用的。我看到的版本只有街道名称，仅此而已。没有“苹果商店”，没有“中央公园”，什么都没有，只有类似建筑物的盒子。这是它在我的 iPhone 上的样子：

![完全缩放的 mkmapview](../Images/1e053599d21c3b7cb8325e4908bdb29e.png)

所以我的问题是：真的没有设置或任何我可以简单地打开以在这些框顶部显示更多场地信息的设置，例如谷歌地图（甚至苹果自己的地图应用程序！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T19:29:44.257

如您在此屏幕截图中所见，地图上的地名有限，但不如地图应用程序中的多。

![在此处输入图像描述](../Images/cd8a075192686492ba33b5a9e0c719c0.png)

# c# - 在用户屏幕上设置窗口的默认位置

> ID：14701209
> 
> 赞同：1
> 
> 时间：2013-02-05T06:07:38.247
> 
> 标签：c#, winforms

我有一个 Windows 窗体应用程序。我希望当应用程序运行时，我的窗口将始终位于任务栏上，右侧表示用户屏幕的右下角。用户屏幕分辨率是多少并不重要.那么我该怎么做？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:16:00.520

要建立在[MeNoMore 的答案](https://stackoverflow.com/a/14701228/80274)上，让您的表单显示在主屏幕的右下角（带有任务栏的屏幕通常是主屏幕），您可以在表单的构造函数中设置以下内容。

```
this.StartPosition = FormStartPosition.Manual;
this.Location = new Point(Screen.PrimaryScreen.WorkingArea.Width - this.Width,
                          Screen.PrimaryScreen.WorkingArea.Height - this.Height); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:15:42.637

其他答案将不起作用。你必须做**两**件事：

1.  将表单设置`StartPosition`为`Manual`
2.  将表格设置`Location`为您想要的点

例如在表单的构造函数内部：

```
StartPosition = FormStartPosition.Manual;
Location = new Point(Screen.PrimaryScreen.WorkingArea.Width - Width,
                     Screen.PrimaryScreen.WorkingArea.Height - Height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:09:54.860

您可以尝试使用：

```
Form1.Location = new Point(x, y); 
```

看看[这里](http://msdn.microsoft.com/en-us/library/aa984420%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T12:22:25.910

您使用 WinTaskBar 组件来考虑桌面/屏幕上的其他因素。

```
 [DllImport("SHELL32", CallingConvention = CallingConvention.StdCall)]
    static extern uint SHAppBarMessage(int dwMessage, ref APPBARDATA pData); 
```

它可以让您控制位置（左和上）。

例子：

```
formStartLeft = Screen.PrimaryScreen.WorkingArea.Width - this.Width;
formStartTop = taskBarHeight + Screen.PrimaryScreen.WorkingArea.Height; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T06:17:04.163

使用[Form.StartPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.startposition.aspx)属性

# c# - DotNetNuke 自定义模块不加载图像或 CSS

> ID：14701213
> 
> 赞同：0
> 
> 时间：2013-02-05T06:08:02.583
> 
> 标签：c#, asp.net, dotnetnuke-6

我有一个带有自定义模块的 DotNetNuke 6.2.6 的 localhost 安装。

问题是 module.css 文件中包含的任何图像或 css 都不会加载。Firebug 在检索图像或 module.css 文件时报告 500 Internal Server 错误。

我的图像标签是：

```
"< asp:Image ID="DeleteButton" ImageUrl="~/DesktopModules/PositionsManagement/images/delete.gif" runat="server" / >" 
```

Web 浏览器显示一个损坏的图像图标，其属性指向

```
http://localhost/dotnetnuke/DesktopModules/PositionsManagement/images/delete.gif 
```

当我尝试导航到上述链接时，我收到以下错误消息：

*如果要为 .NET Framework 4.0 或更高版本进行编译，则提供程序选项中的“compilerVersion”属性的值必须是“v4.0”或更高版本。要为 .NET Framework 3.5 或更早版本编译此 Web 应用程序，请从 Web.config 文件的元素中删除“targetFramework”属性。*

当我像它建议的那样删除 targetframework 属性时，我得到了这个：

*解析器错误消息：代码子目录“/dotnetnuke/DesktopModules/PositionsManagement/App_Code/RazorHelpers/”不存在。*

有谁知道问题是什么或我如何获得它似乎想要的 RazorHelpers 内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-24T12:40:43.467

在 IIS 管理器中查看。我收到此错误并通过删除在错误模块的文件夹上创建的应用程序来解决它。我不知道为什么这个文件夹在应用程序中被转换。

![删除应用程序之前](../Images/c08e7511d8fd71df33af2c97688d62a0.png)

![删除应用程序后](../Images/9fdeaeb218b4554275e8af2058c13046.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T00:34:54.503

似乎 DNN 在 Windows 8、Visual Studio 2012 和 SQL Server 2012 上表现不佳。无论是 Win8，还是它们的某种组合，我都不知道。

我通过创建 Windows 7 虚拟机解决了这个问题。

编辑：在一些本地帮助下，删除模块 web.config 文件并清理应用程序池中的 Web 应用程序似乎有所帮助。（不知何故，我在 localhost/dotnetnuke/etc 和 localhost/dnn/etc 有两次。清理并删除 web.config 后，它又开始工作了。

# python - 显示 xlrd、python 正在处理的文件名。Book 类没有文件名属性

> ID：14701214
> 
> 赞同：1
> 
> 时间：2013-02-05T06:08:06.773
> 
> 标签：python, filenames, xlrd

我正在尝试做一些我觉得应该非常直截了当的事情，但似乎并不作为 xlrd Book Class 的属性而存在。

在解析目录中的所有 xlsx 文件时，我想记录哪个文件中存在哪些错误。为此，我需要打印正在处理的文件名。

目标：打印 xlrd 正在处理的文件的名称。即：以下示例中的“filename.xlsx”

示例代码：

```
Wb = xlrd.open_workbook ( "./data/excel_files/filename.xlsx" )
print "File being processed is: %s" % Wb.name_obj_list[0].name 
```

这将输出“_xlnm._FilterDatabase”。我想打印“filename.xlsx”。Book Class 的文档没有简单的方法来做到这一点。 [http://www.lexicon.net/sjmachin/xlrd.html#xlrd.Book-class](http://www.lexicon.net/sjmachin/xlrd.html#xlrd.Book-class)

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:48:23.280

我只是将文件名与另一个类的 Wb 对象一起传递并打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:34:08.967

尝试简单的方法：

```
for filename in glob('*.xls*'):
    try:
       wb = xlrd.open_workbook(filename)
    except xlrd.XLRDERROR:
       print 'Problem processing {}'.format(filename) 
```

# java - 如何根据宽度和高度像素在 Android 中缩放位图？

> ID：14701216
> 
> 赞同：1
> 
> 时间：2013-02-05T06:08:16.293
> 
> 标签：java, android, bitmap, resize, scale

我希望能够根据屏幕尺寸缩放图像。在一个普通的java小程序中，我会做如下的事情......

```
int windowWidth = 1280;
int windowHeight = 720;

Image image;

public void paint(Graphics g)
{
    g.drawImage(image, x, y, windowWidth / 4, windowHeight / 16, null);
} 
```

我一直在寻找答案一段时间，我发现的一切似乎都出现了一些奇怪的结果。根据我读到的内容，我可能需要对与分辨率无关的像素做一些事情，但我不确定 %100。

我要避免的事情是必须为不同的屏幕密度创建一组全新的图像和图标。我上面展示的方法可以毫无问题地调整桌面应用程序的大小。

编辑：

这就是我一直用来在android中绘制图像的方法。

```
Matrix matrix = new Matrix();
Bitmap image;

Constuctor....()
{
image = BitmapFactory.decodeResource(context.getResources(), R.drawable.play);
}

public void render(Canvas c)
{
    c.drawBitmap(image, matrix, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:19:05.607

嗨，看到这个问题我已经发布了[比例位图](https://stackoverflow.com/questions/14399089/how-to-scale-the-images-so-that-they-should-occupy-the-entire-screen)

如果您使用的是画布，请获取画布的宽度和高度。或者如果你想让它有正式的正常布局，那么通过使用获取宽度和高度

```
DisplayMetrics metrics = new DisplayMetrics();
 getWindowManager().getDefaultDisplay().getMetrics(metrics);
 dispWidth=metrics.widthPixels;
 dispheight=metrics.heightPixels; 
```

然后像这样根据您的要求缩放我们的位图。在这个我必须有 8 块砖，所以我通过除以列数来取宽度

```
 String strwidth=String.valueOf(((float)(bmp.getWidth())/NO_COLUMNS));
        if(strwidth.contains("."))
        {
            scalebit=Bitmap.createScaledBitmap(bmp, (int)(Math.ceil(((float)bmp.getWidth())/NO_COLUMNS))*NO_COLUMNS, bmp.getHeight(), true);
        }
        else
        {
            scalebit=bmp;
        } 
```

# android - LocationManager 在实际设备上不起作用

> ID：14701222
> 
> 赞同：1
> 
> 时间：2013-02-05T06:08:57.923
> 
> 标签：android

我有这个问题。我正在获取位置更新。它在我的模拟器上运行良好。但是当我在我的设备上测试它时，它显示当前位置很好。但是当我改变我的位置时，它不会显示我的位置更新。但它在模拟器上运行良好。这是我的代码 **Main.java**

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class Main extends Activity {

    TextView tvStatus;
    LocationManager lm;
    boolean gpsEnabled;
    LocationListener ls = new LocationListener() {

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {}

        @Override
        public void onProviderEnabled(String provider) {}

        @Override
        public void onProviderDisabled(String provider) {}

        @Override
        public void onLocationChanged(Location location) {
            tvStatus.setText("Latitude: "
                    + location.getLatitude() + "\nLongitude: "
                    + location.getLongitude());
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Toast.makeText(this, "on create", 300).show();
        tvStatus = (TextView) findViewById(R.id.textView1);
        lm = (LocationManager) getSystemService(LOCATION_SERVICE);
    }
    @Override
    protected void onResume() {
        super.onResume();
        Toast.makeText(this, "on resume", 200).show();
        if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            Location l = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            tvStatus.setText(l.getLatitude()+" "+ l.getLongitude());
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ls);
        }else{
            //use network provider
            Toast.makeText(this, "dsfdsfdsfdsf", 300).show();
        }
    }
    @Override
    protected void onPause() {
        super.onPause();
        Toast.makeText(this,"on pause" ,300).show();
        lm.removeUpdates(ls);
    }

} 
```

我在 manifest.xml 中添加了所有权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:24:56.323

首先，确保您的 gps 已启用并且信号已锁定/固定在实际设备上。如果问题仍然存在，则在 OnCreate() 中而不是在课堂上初始化您的 locationlistener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:51:27.930

If you are inside a building my suggestion is not to use GPS_PROVIDER as gps doesn't work much inside the building or takes large amount of time while taking the location fixes.

# java - 静态方法与对象方法在此类代码示例中更好

> ID：14701229
> 
> 赞同：0
> 
> 时间：2013-02-05T06:10:06.450
> 
> 标签：java, static

```
public class VerifyFactory {

    private static final VerifyFactory INSTANCE = new VerifyFactory();

    private VerifyFactory() {
    }

    public static VerifyFactory getInstance() {
        return INSTANCE;
    }

    public Verifiable getVerifyForEntryConference(ServerOperations serverOperations, String logPath,
         language);
    }

    public Verifiable getVerifyForEntryTone(ServerOperations serverOperations, String logPath,

    }

    }

public class VerifyFactory {

    public static Verifiable getVerifyForEntryConference(ServerOperations serverOperations, String logPath,
         language);
    }

    public static Verifiable getVerifyForEntryTone(ServerOperations serverOperations, String logPath,

    }

    } 
```

静态方法与对象方法在此类代码示例中更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:14:59.913

“静态方法与对象方法哪个更好”这取决于您的使用目的。

如果您希望仅在创建类的实例（包含该方法）之后调用您的方法，那么您应该将该方法定义为非静态的

如果你想在不创建类实例的情况下调用你的方法，那么你应该将你的方法定义为静态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:16:17.120

对象方法比静态方法好得多，但它取决于方法和要求。当无法在方法调用之前创建对象时，我通常使用静态。如果你的类有一些实例变量，那么使用对象方法。您不能在静态方法中使用类实例变量。

对象方法特定于对象，但静态方法不是。

因此，如果您的方法不干扰实例变量，那么您可以将它们设为静态。

你可以检查这个问题。也：[静态方法和实例方法之间的区别](https://stackoverflow.com/questions/11993077/difference-between-static-methods-and-instance-methods)

# visual-studio-2008 - 部署后报表服务器上未显示的参数更改

> ID：14701233
> 
> 赞同：13
> 
> 时间：2013-02-05T06:10:45.567
> 
> 标签：visual-studio-2008, reporting-services, ssrs-2008

我的 SSRS 2008 报告中有 7 个参数（3 个多选字符串、1 个日期时间、3 个字符串值），并且我已将*默认值*中的所有参数设置为 null 。

它在我的 Visual Studio 2008 预览窗口中运行良好。但**在部署**到我的报表服务器后，**未选中参数的“NULL”复选框**，导致报表最初无法加载。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T08:45:08.030

这是“设计使然”：

当您首次[部署报告](http://msdn.microsoft.com/en-us/library/ms159615.aspx)时，会上传参数及其所有设置。

然后允许这些报告的管理员调整报告参数在[报告 Web 管理器](http://msdn.microsoft.com/en-us/library/ms157147.aspx)中的作用方式：更改它们是否接受空值、默认值等。

如果您稍后*重新部署*报告，则不*会对现有参数进行任何更改*（系统不希望“覆盖”报告管理员所做的更改）。

**解决方案：**

*   删除报告，*然后*重新部署它。
*   直接在部署的报告中更改参数设置。

# javascript - IE8 中的 JavaScript 错误

> ID：14701235
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:11:01.367
> 
> 标签：javascript, jquery

> **可能重复：**
> [window.onload() 在第一次使用 IE 8 时未触发](https://stackoverflow.com/questions/886668/window-onload-is-not-firing-with-ie-8-in-first-shot)

在第 20 行用 JavaScript 运行代码时出现错误。第 20 行代码就在这里：

```
window.onload = setTimeout( function(){
    $('#notification_div').slideUp(2000);
} , 6000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:18:08.930

事件处理程序应该是一个函数，

```
window.onload = function() {setTimeout( function(){
    $('#notification_div').slideUp(2000);
} , 6000);}; 
```

当您使用 jquery 时，可能会更好

```
$(window).load(
 function() {
  setTimeout( function(){
        $('#notification_div').slideUp(2000);
  } , 6000)
 }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:19:38.750

我相信你想要的是这个

```
window.onload = function(){
  setTimeout( function(){
    $('#notification_div').slideUp(2000);
  } , 6000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:19:51.353

好吧，您缺少以下功能`.onload`：

```
window.onload = function(){ //<-------missing this
   setTimeout( function(){
      $('#notification_div').slideUp(2000);
   } , 6000);
}; 
```

为什么不使用 jquery 版本`.load()`：

```
$(window).load(function(){
   setTimeout( function(){
     $('#notification_div').slideUp(2000);
   } , 6000);
}); 
```

# c# - mvc3 更改身份验证值

> ID：14701237
> 
> 赞同：1
> 
> 时间：2013-02-05T06:11:04.067
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

`User.Identity.Name`用户登录系统后，我已将身份验证信息存储在其中。使用[这种](https://stackoverflow.com/a/1150085/926460)方法

```
FormsAuthentication.SetAuthCookie(Id + " | " + Name + " | " + Language + " | " + Culture + " | " + Email + " | " + Role+ " | " + TimeOffset+ " | " + Rights, RememberMe); 
```

现在我想`User.Identity.Name`在用户更改某些配置设置时更改内部的某些值，例如`Language`

但是在调用之后`FormsAuthentication.SetAuthCookie()`，里面的值`User.Identity.Name`就不再改变了

```
string identity = HttpContext.Current.User.Identity.Name; // modify current value
FormsAuthentication.SetAuthCookie(identity, false); // assign new value 
```

如何更改此值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:31:19.343

`SetAuthCookie`使用更新后的值更新包含 FormsAuth 票证的 cookie，但它不设置`User`当前上下文的 cookie。您可以通过创建新的`IPrincipal`and来更改当前上下文的用户`IIdentity`。就像获取电流`HttpContext`和设置`User`属性一样简单。

您通常会`IHttpModule`在事件中的或 Global.asax.cs 中执行此操作`PostAuthenticateRequest`，因为此时 FormsAuth 已经验证了用户的票证并设置了身份。在此事件之后，`IPrincipal`您创建的新内容将在请求的剩余部分中可供应用程序使用。

```
protected void Application_PostAuthenticateRequest(object sender, EventArgs args)
{
    var application = (HttpApplication)sender;
    var context = application.Context;

    if (context.User != null || !context.User.Identity.IsAuthenticated) return; // user not authenticated, so you don't need to do anything else

    // Here, you'd process the existing context.User.Identity.Name and split out the values you need. that part is up to you. in my example here, I'll just show you creating a new principal
    var oldUserName = context.User.Identity.Name;
    context.User = new GenericPrincipal(new GenericIdentity(oldUserName, "Forms"), new string[0]); 
} 
```

顺便说一句，我不建议在身份名称中打包值，而是在票的`UserData`属性中打包。在这种情况下，您可以检查`context.User.Identity`is`FormsIdentity`和 access是否`Ticket.UserData`：

```
protected void Application_PostAuthenticateRequest(object sender, EventArgs args)
{
    var application = (HttpApplication)sender;
    var context = application.Context;

    if (context.User != null || !context.User.Identity.IsAuthenticated) return; // user not authenticated, so you don't need to do anything else

    var formsIdentity = context.User.Identity as FormsIdentity;

    if (formsIdentity == null) return; // not a forms identity, so we can't do any further processing

    var ticket = formsIdentity.Ticket;

    // now you can access ticket.UserData
    // to add your own values to UserData, you'll have to create the ticket manually when you first log the user in

    var values = ticket.UserData.Split('|');

    // etc.
    // I'll pretend the second element values is a comma-delimited list of roles for the user, just to illustrate my point
    var roles = values[1].Split(',');

    context.User = new GenericPrincipal(new GenericIdentity(ticket.Name, "Forms"), roles); 
} 
```

[以下](http://www.danharman.net/2011/07/07/storing-custom-data-in-forms-authentication-tickets/)是有关在 UserData 中使用自定义值创建 FormsAuth 票证的更多信息。

# liferay - 将参数传递给 Liferay PortletURL

> ID：14701240
> 
> 赞同：0
> 
> 时间：2013-02-05T06:11:14.937
> 
> 标签：liferay, portlet

我想通过键入他的个人密钥来验证用户的请求。首先他执行请求，现在 portlet 重定向到第二个 jsp 文件，他在其中使用密钥进行验证，最后如果没问题， portlet 完成请求，否则返回第一步。

这是代码，

1.- view.jsp（请求）

```
<%@ include file="/html/blue/init.jsp" %>

Welcome to our Colors workflow
<br/>

<% 
PortletURL redirectURL = renderResponse.createActionURL();
redirectURL.setParameter(ActionRequest.ACTION_NAME, "redirect");
%>

<aui:form name="fmAdd" method="POST" action="<%= redirectURL.toString() %>">
<aui:input type="hidden" name="myaction" value="add" />
<aui:button type="submit" value="Add New Box"/>
</aui:form>
&nbsp;
<aui:form name="fmList" method="POST" action="<%= redirectURL.toString() %>">
<aui:input type="hidden" name="myaction" value="list" />
<aui:button type="submit" value="Show All Boxes"/>
</aui:form> 
```

2.- java代码，

```
public void redirect(ActionRequest actionRequest,
        ActionResponse actionResponse) throws IOException, PortletException {

    String action = ParamUtil.getString(actionRequest, "myaction");

    PortletURL redirectURL = null;
    String redirectJSP = "/checkuser.jsp";
    if(action != null) {
        String portletName = (String)actionRequest.getAttribute(WebKeys.PORTLET_ID);
        ThemeDisplay themeDisplay = (ThemeDisplay) actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
        redirectURL = PortletURLFactoryUtil.create(PortalUtil.getHttpServletRequest(actionRequest),
                portletName, themeDisplay.getLayout().getPlid(), PortletRequest.RENDER_PHASE);
        redirectURL.setParameter("myaction", action);
        redirectURL.setParameter("jspPage", redirectJSP);
    }

    actionResponse.sendRedirect(redirectURL.toString());
} 
```

3._ checkuser.jsp（用户用他的密钥验证）

```
<%@ include file="/html/blue/init.jsp" %>

<% 
PortletURL checkUserURL = renderResponse.createActionURL();
checkUserURL.setParameter(ActionRequest.ACTION_NAME, "checkUser");

String myaction = renderRequest.getParameter("myaction");
%>

<p> Your action:&nbsp;<%= myaction %> </p>

<aui:form name="fm" method="POST" action="<%= checkUserURL.toString() %>">
<aui:input type="hidden" name="myaction" value="<%= myaction %>" />
<aui:input type="text" name="key" value=""/>
<aui:button type="submit" value="Save"/>
</aui:form> 
```

在这个阶段，我遇到了第一个问题，因为我没有看到请求的值（myaction 变量）。这仅用于调试。

4._捕捉最后一种形式的java代码，

```
public void checkUser(ActionRequest actionRequest,
        ActionResponse actionResponse) throws IOException, PortletException {

    String key = ParamUtil.getString(actionRequest, "key");
    String action = ParamUtil.getString(actionRequest, "myaction");

    String portletName = (String)actionRequest.getAttribute(WebKeys.PORTLET_ID);
    ThemeDisplay themeDisplay = (ThemeDisplay) actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
    PortletURL redirectURL = PortletURLFactoryUtil.create(PortalUtil.getHttpServletRequest(actionRequest),
            portletName, themeDisplay.getLayout().getPlid(), PortletRequest.RENDER_PHASE);

    String redirectJSP = "/view.jsp";
    if(key != null) {
        if(key.equalsIgnoreCase("blue")) {
            if(action != null) {
                if(action.equalsIgnoreCase("add")) {
                    redirectJSP = "/update.jsp";
                }
                if(action.equalsIgnoreCase("list")) {
                    redirectJSP = "/list.jsp";
                }
            }
        }
    }

    redirectURL.setParameter("jspPage", redirectJSP);
    actionResponse.sendRedirect(redirectURL.toString());
} 
```

在这个阶段，portlet 总是转到用户执行请求的 view.jsp。我认为 key 和 action 变量都是 null 或至少其中一个。

我究竟做错了什么？

问候，何塞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:27:27.083

在 Liferay 中，参数是使用命名空间设置的，因此当页面上存在超过 1 个 portlet 时它们不会引起问题。特别是如果您在页面上有两次完全相同的 portlet！所以当你设置时`myaction`，它真的被设置为类似`_myportlet_INSTANCE_xlka_myaction`或类似的东西。

您可以使用它`com.liferay.portal.kernel.util.ParamUtil`来帮助您获取参数，而不必担心范围。例如：

```
ParamUtil.getString(request, "myaction"); 
```

# java - 哪个工具用于识别该方法是否有测试用例？

> ID：14701243
> 
> 赞同：0
> 
> 时间：2013-02-05T06:11:20.680
> 
> 标签：java, unit-testing, testing, testcase

我正在一家中级公司从事该项目。但我没有任何工具来确定该方法是否具有测试用例。所以现在我手动去检查该方法是否有测试用例。因此，如果您知道任何工具来识别与我有关的这种情况。请给我一个想法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:19:57.463

本文[列出](http://ibiblio.org/java/slides/albany/codecoverage/Measuring_JUnit_Code_Coverage.html)了各种 JUnit 代码覆盖率指标。

[Eclemma](http://www.eclemma.org/)也是 JUnit 代码覆盖率及其免费的另一个有趣的地方。

# javascript - 是否可以导航到 window.unload 上的特定 URL？

> ID：14701244
> 
> 赞同：0
> 
> 时间：2013-02-05T06:11:23.317
> 
> 标签：javascript, jquery, asp.net

是否可以导航到 window.unload 上的特定 URL？

如下所示.......目标浏览器是 chrome 和 safari。

```
 $(window).on('beforeunload', function () {
            window.location.href = "default.aspx";            
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:15:07.997

将此添加到`<head>`标签中。

```
<script>
window.onbeforeunload = function () {
window.location = 'http://www.example.com';
return false;
}
</script> 
```

或者，如果您有外部 js，那也可以。

# vhdl - vhdl 中的 16 位 std_logic_vector 到低 8 位 std_logic-vector

> ID：14701254
> 
> 赞同：-3
> 
> 时间：2013-02-05T06:11:45.497
> 
> 标签：vhdl

我有一个块的 16 位 std_logic_vector 输出。但在后期我必须只使用较低的 8 位 std_logic_vector。它会产生综合问题......请告诉我如何避免这种情况..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T07:49:04.833

如果您有 16 位`std_logic_vector`，则可以像这样访问各个字节：

```
signal largeVariable      : std_logic_vector(15 downto 0);
signal lower8bitsVariable : std_logic_vector(7 downto 0);
signal upper8bitsVariable : std_logic_vector(7 downto 0);

(...)

lower8bitsVariable <= largeVariable(7 downto 0);     --Store the lower 8 bits of largeVariable
upper8bitsVariable <= largeVariable(15 downto 8);    --Store the upper 8 bits of largeVariable 
```

# c - C Mergesort Segfault

> ID：14701255
> 
> 赞同：1
> 
> 时间：2013-02-05T06:11:46.907
> 
> 标签：c, algorithm, sorting, segmentation-fault

## 情况

我试图实现一个更有趣的合并排序，它创建一个具有随机值的随机长度数组，然后将它们随机化，但是在调试和编译它之后会出现段错误。我不知道为什么会出现段错误，但我确定它与内存分配有关。

## 问题

为什么这段代码会导致段错误？

## 代码

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

// Declare some stuff up front

int array_size(int *array);
int print_array(int *array);

//Some decade old main function coming at you

int main() {

    //Concerned with the integrity of my rand
    srand( (unsigned)time( NULL ));

    //A global, random length array between 1 and 100?
    int *array;
    array = malloc(sizeof(*array) * ((rand() % 100) + 1));

    init_array(*array);

    getchar();
    return 0;
}

int init_array(int *array)  {
    //Base case
    array[0] = 1;
    //random values for i in array
    int i;
    for(i = 1; i <= array_size(array); i++)  {
          array[i] = rand() % array_size(array) + 1;
    }
    //randomize the random values in the random length array
    for (i = 0; i < (array_size(array) - 1); i++)
    {
        unsigned int swapA = (rand() % array_size(array)) + 1;
        int a = array[swapA];
        array[swapA] = array[i];
        array[i] = a;
    }
    //output random array, then mergeSort the array
    print_array(array);
    sort_array(array);
    return 0;
}

//Get my array.Length
int array_size(int *array) {
    return sizeof(array)/sizeof(array[0]);
}

//Output array
int print_array(int *array) {
     int i;
     for(i = 0; i < (array_size(array) + 1); i++) {
           printf("%d\n", array[i]);
     }
     return 0;
}
     //merge the array after sorting
void merge_array(int *array, int low, int split, int high)  {
     int sorted[high-low+1];
     int a = 0;
     int b = low;
     int c = split + 1;
     //iterate from beginning to middle and from middle to end in parallel
     while(b <= split && c <= high)
     {
            if(array[b] < array[c])
            {
                sorted[a++] = array[b++];
            }
            else
            {
                sorted[a++] = array[c++];
            }
     }

     while(b <= split) sorted[a++] = array[b++];
     while(c <= high)  sorted[a++] = array[c++];
     int i;
     for(i = 0; i < a; i++) {
           array[i+low] = sorted[i];
     }
     print_array(array);            //Print sorted array
}
     //Sort the array
int sort_array(int *array, int low, int high) {
    int split = ( low + high ) / 2;
    if( low < high ) {
        sort_array(array, low, split);
        sort_array(array, split + 1, high);
        merge_array(array, low, split, high);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:20:46.040

```
return sizeof(array)/sizeof(array[0]); 
```

上述语句的计算结果为`1`（假设`sizeof(int *) = sizeof(int)`，如 H2CO3 所指出的那样）。

试试这样的，

```
int main() {

//Concerned with the integrity of my rand
srand( (unsigned)time( NULL ));

//A global, random length array between 1 and 100?
int *array;
int number_of_elements = (rand() % 100) + 1;
array = malloc(sizeof(*array) * num_of_elements);

init_array(*array, num_of_elements);

getchar();
return 0; 
```

}

将元素的数量作为参数传递给`init_array`而不是每次都计算它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:18:39.280

这似乎是问题所在：

```
//Get my array.Length
int array_size(int *array) {
    return sizeof(array)/sizeof(array[0]);
} 
```

你本质上`return sizeof(int*)/sizeof(int)`，这*不是*你想要的。这整件事之所以出现是因为数组在传递给函数时会衰减为指针。

您应该阅读comp.lang.c 常见问题解答中的[数组和指针部分以获得启发。](http://c-faq.com/~scs/cgi-bin/faqcat.cgi?sec=aryptr "数组和指针")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:25:29.343

1.  当您使用 /WALL 运行程序时会发生什么？吐出什么警告？为什么？
2.  当您在附加调试器的情况下单步执行程序时会发生什么？每行的每个变量的值是多少？为什么？

您的代码有几个问题：

1.  您不检查 malloc 的结果以查看它是否返回 NULL。

2.  您将数组的取消引用传递给 init_array，即您将数组的第一个 int 发送给 init_array，然后立即取消引用它。由于 malloc 返回垃圾数据，因此您在 init_array 中取消引用一个随机数。

3.  array_size 不是魔术。如果您不跟踪 C 中数组的大小，则无法追溯找出您希望它们有多大。您需要记住数组的大小并将其传递给 init_array。

# java - 在 Java 中优化 I/O 操作？

> ID：14701258
> 
> 赞同：0
> 
> 时间：2013-02-05T06:11:55.890
> 
> 标签：java, io

我有一个文件“a.txt”，其中包含以下几行：

```
14,15,16,17
13,16,15,14
15,17,12,13
...
... 
```

我知道每行总是有 4 列。

我必须读取此文件并根据分隔符拆分行（这里是“，”）并将每列的值写入其相应文件中，即如果列中的值为 14，则必须将其转储/写入 14 .txt，如果是 15，那么它将被写入 15.txt，依此类推。

这是我到目前为止所做的：

```
Map <Integer, String> filesMap = new HashMap<Integer, String>();
for(int i=0; i < 4; i++)
{
  filesMap.put(i, i+".txt"); 
}

File f = new File ("a.txt");
BufferedReader reader = new BufferedReader (new FileReader(f));
String line = null;
String [] cols = {};
while((line=reader.readLine()) != null)
{
    cols = line.split(",");
    for(int i=0;i<4;i++)
    {
        File f1 = new File (filesMap.get(cols[i]));
        PrintWriter pw = new PrintWriter(new BufferedWriter(new FileWriter(f1)));
        pw.println(cols[i]);
        pw.close();
    }   
} 
```

所以对于文件“a.txt”的第 1 行，我将不得不打开、写入和关闭文件 14.txt、15.txt、16.txt 和 17.txt

再次对于第 2 行，我必须再次打开、写入和关闭文件 14.txt、15.txt、16.txt 和一个新文件 13.txt

那么有没有更好的选择，我不必打开和关闭之前已经打开的文件。

在完成操作结束时，我将关闭所有打开的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:17:39.700

像这样的东西应该工作：

```
Map <Integer, PrintWriter> filesMap = new HashMap<>();
...
if(!filesMap.containsKey(cols[i]))
{
  //add a new PrintWriter
} else
{
  //use the existing one
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:21:28.397

尝试

```
 Set<String> s = new HashSet<>();
    Scanner sc = new Scanner(new File ("a.txt")).useDelimiter("[\n\r,]+");
    while(sc.hasNext()) {
        String n = sc.next();
        if (s.add(n)) {
            FileWriter w  = new FileWriter(n + ".txt");
            w.write(n);
            w.close();
        }
    }
    sc.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:37:07.617

```
 public static void main(String[] args) throws Exception {
    FileReader fr = new FileReader("a.txt");
    BufferedReader reader = new BufferedReader(fr);
    String line = "";

    while ((line = reader.readLine()) != null) {
        String[] cols = line.split(",");
        for (int i = 0; i < 4; i++) {
            FileWriter fstream = new FileWriter(cols[i] + ".txt" , true);// true is for appending the data in the file.
            BufferedWriter fbw = new BufferedWriter(fstream);

            fbw.write(cols[i] + "\n");

            fbw.close();
        }
    }
} 
```

尝试这个 。我想你想这样做。

# cloudbees - 为什么在 CloudBees run@cloud 中运行的 Web 应用程序不允许分块传输编码？

> ID：14701264
> 
> 赞同：0
> 
> 时间：2013-02-05T06:13:15.107
> 
> 标签：cloudbees, chunked-encoding, paas

我正在使用将 SOAP 请求 (HTTP POST) 发送到在 CloudBees PaaS (run@cloud) 中运行的应用程序的应用程序。SOAP 发送方应用程序从服务器收到以下错误：传输错误：411 错误：需要长度。这意味着它不应该使用分块传输编码，因为分块不会发送服务器似乎想要的 Content-length 标头。

是否有某些原因无法使用分块？我知道某些 Web 服务器，例如 Apache，可能存在与分块传输编码相关的 DOS 漏洞。这是原因吗？还是因为 run@cloud 使用 Nginx 作为代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:41:58.573

Cloudbees Nginx 路由器确实使用 http 1.0，因此没有[分块传输](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)支持。由于我们正在开发 websocket 支持，新版本的 NGinx 可能很快就会推出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:06:29.997

您现在可以为您的应用设置端到端的 httpVersion：

启用：httpVersion=1.1

例如，这就是 WebSocket 的工作方式：

[https://developer.cloudbees.com/bin/view/RUN/WebSockets](https://developer.cloudbees.com/bin/view/RUN/WebSockets)

您可以也应该设置 proxyBuffering=false - （这是新应用程序的默认设置）。

# selenium - 出现错误：错误：无法打开显示：IP：192.168.72.112

> ID：14701266
> 
> 赞同：1
> 
> 时间：2013-02-05T06:13:17.900
> 
> 标签：selenium, python-2.6, xvfb

我在运行 selenium 代码时使用 selenium，但出现错误：

```
WebDriverException: Message: 'The browser appears to have exited before we could connect. The output was: Error: cannot open display: IP:192.168.72.112\n' 
```

我正在通过腻子运行我的代码，因为腻子中没有显示。我使用了虚拟显示的概念并安装了“pyvirtualdisplay”模块。在运行脚本之前，我有以下命令：

```
export DISPLAY='IP:191.168.72.112' 
```

但仍然无法运行...请帮助我并建议我，我做错了什么？

Python硒代码：

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re
from pyvirtualdisplay import Display

class PSeleTry1(unittest.TestCase):
    def setUp(self):
        display = Display(visible=0, size=(1024, 768))
        display.start()
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "http://www.example.com/"
        ......
        .....// remaining code generated by selenium ide// 
```

# wcf - 尝试调用 wcf 服务时出现“调用服务失败”

> ID：14701268
> 
> 赞同：0
> 
> 时间：2013-02-05T06:13:31.443
> 
> 标签：wcf, iis-7

我正在尝试在 IIS 上托管 Wcf 服务，但无法这样做。我将 IIS 中的网站内的服务添加为应用程序，并且还能够获取该服务的 wsdl。但是当尝试通过 WcfTestClient 访问服务时，我收到以下错误 -

> 调用服务失败。可能原因：服务离线或无法访问；客户端配置与代理不匹配；现有代理无效。有关更多详细信息，请参阅堆栈跟踪。您可以尝试通过启动新代理、恢复到默认配置或刷新服务来恢复。

我已经完成了在 IIS 上托管 wcf 服务的步骤。不知道我错过了什么或做错了什么。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:25:34.257

WCF 中似乎有错误。

尝试使用 try 和 catch 或创建一个空方法以返回 Hello World

# silverlight - 将水印插入 Telerik Radrichtextbox

> ID：14701271
> 
> 赞同：0
> 
> 时间：2013-02-05T06:13:38.727
> 
> 标签：silverlight, c#-4.0, telerik, watermark

我正在为 Silverlight 使用 Telerik Richtexbox 版本 - 2012.2.607.1040。我正在使用 DocxFormatProvider 在文本框中显示 word 文档。我想知道是否可以以**编程**方式向文本框中显示的每个页面添加水印，这样我就不必在 MS word 的每个单独文档中插入水印。富文本框本身不支持[水印](http://www.telerik.com/community/forums/silverlight/richtextbox/watermark-for-radrichtextbox.aspx)，唯一的方法是根据 Telerik 支持添加自定义层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T22:41:54.620

对于 Silverlight 控件的当前版本的 Telerik UI，RadRichTextBox 原生支持此功能：

```
WatermarkTextSettings textSettings = new WatermarkTextSettings();
textSettings.Text = "Purple Watermark";
textSettings.RotateAngle = 30;
textSettings.Opacity = 1;
textSettings.ForegroundColor = Colors.Purple;

this.radRichTextBox.SetWatermarkText(textSettings); 
```

Telerik 的 Silverlight 文档 UI 中有详细的[帮助文章](http://docs.telerik.com/devtools/wpf/controls/radrichtextbox/features/watermark.html#manipulating-watermarks-programmatically)。

# java - 使用 jax rpc soap 消息处理程序更改 SOAP 消息中的命名空间

> ID：14701273
> 
> 赞同：1
> 
> 时间：2013-02-05T06:13:43.813
> 
> 标签：java, web-services, jax-rpc

我正在尝试使用 jax-rpc 肥皂消息处理程序中的 saaj api 更改肥皂请求中元素的名称空间。

例如：

```
<\s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing"    xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">  
<\s:Body>
   <\ns2:getAllGeneratedPasswords\>xmlns:ns2="http://service.services.manufacturing.evse.inds.ge.com/">
          <\ps1:userType xmlns="ps1:http://sdsdf.asdasd">user<\/ps1:userType>
        <\/ns2:getAllGeneratedPasswords>
      <\/s:Body>
<\/s:Envelope> 
```

在上面的肥皂请求中，我想更改：

> xmlns:ns2="http://service.services.manufacturing.evse.inds.ge.com/"

至

> xmlns:ns2="http://service.company.com/"

```
import javax.xml.rpc.handler.GenericHandler
import....
import...

public class ServiceHandler extends GenericHandler{

    public boolean handleRequest(SOAPMessageContext arg0) {
        //manipulate namespace here
    }
} 
```

# javascript - 谷歌地球中的 localOrientationMatrixToHeadingTiltRoll 功能无法正常工作

> ID：14701274
> 
> 赞同：1
> 
> 时间：2013-02-05T06:13:51.583
> 
> 标签：javascript, math, 3d, google-earth-plugin

在玩牛奶卡车游戏时，我想我可能发现了一个错误，或者这可能是我的理解错误。在 truck.js 或 car.js 中，具体取决于您在第 396 行附近的行之后正在查看的版本：

```
absRoll += me.roll; 
```

我添加以下行。

```
console.log ('heading current at end = ' + this.model.getOrientation().getHeading());
console.log('heading at end set to = ' + newhtr[0]); 
```

当我这样做时，我得到以下输出：

> 尾端当前航向 = 90 尾端
> 航向设置为 = 116.62015241568602

现在默认情况下，代码中的标题设置为 90，如果我没有按下任何转键。那么为什么标题会在这里设置为 116 呢？

我只能假设我们最初设置 modelMatrix 的方式有问题，或者 localOrientationMatrixToHeadingTiltRoll 方法有问题。它与使用的局部或全局坐标系有关吗？

无论如何，任何人都可以为我阐明这一点。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:02:18.170

我认为这仅仅是因为一旦挤奶车上路，它就会非常轻微地转向。如果你看一下这个例子，汽车在半空中装载，航向 90 - 然后“撞上虚拟停机坪”并因为地形的轻微坡度而转向。

# c++ - 如何使用迭代器更新二维字符串向量的元素

> ID：14701275
> 
> 赞同：0
> 
> 时间：2013-02-05T06:13:53.140
> 
> 标签：c++, vector

请参阅此代码。我需要使用迭代器更改 2D 字符串向量中特定元素的值。我可以使用带有索引的 for 循环来执行此操作。但这里我需要的是直接使用迭代器来引用元素。任何想法`(*ite)[0] = "new name"` ？为了您的方便，我在这里添加了完整的工作代码

```
#include <iostream>
#include <vector>
#include <string>
#include <sstream>

using namespace std;

string convertInt(int number)
{
   stringstream ss;
   ss << number;
   return ss.str();
}

int main()
{
    vector<vector<string>> studentList;
    for(int i=0; i<10; i++){
        vector<string> student;
        student.push_back("name-"+convertInt(i));
        student.push_back(convertInt(i+10));
        studentList.push_back(student);
    }
    vector<string> temp;
    for(vector<vector<string>>::iterator ite = studentList.begin(); ite != studentList.end(); ++ite){
        temp = *ite;
        if(temp[0].compare("name-5")==0){
            cout << "Changeing the name of student 5" << endl;
            // I need to change the studentList[5][0] (original value not the one in temp vector) at here using iterator ite
        }
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:17:03.080

因为`temp = *ite`复制了 vector( *student* )，如果你修改 on `temp`，它不会在 real 上修改`studentList`，这就是为什么你需要`(*ite)[0] = "new name"`改变 real 元素的值。

使用 for 循环有点“*丑陋*”，使用[std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)代替 for 循环：

```
bool IsFindFifthName(const std::vector<std::string>& student)
{
   return student[0] == "name-5";
}

 std::vector<std::vector<std::string>>::iterator iter 
  = std::find_if(studentList.begin(), studentList.end(), IsFindFifthName);

if (iter != studentList.end() )
{
   (*iter)[0] = " new name";       
} 
```

或者如果 C++11 可用，则使用 Lambda：

```
std::vector<std::vector<std::string>>::iterator iter 
  = std::find_if(studentList.begin(), studentList.end(), 
    [](std::vector<std::string>& student){ return student[0] == "name-5"; });

 if (iter != studentList.end() )
 {
    (*iter)[0] = " new name";       
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:53:54.573

以防万一使用 STL 算法变换可能是一个不错的选择。该算法在内部使用迭代器。一个示例：

```
typedef std::vector<std::string> VectorOfString;
void DisplayStudent(const std::vector<VectorOfString>& StudentList)
{
    std::for_each(StudentList.cbegin(), StudentList.cend(), 
        [](const VectorOfString& vectorElement)
    {
        std::for_each(vectorElement.cbegin(), vectorElement.cend(), 
            [](const std::string& value)
        {
            std::cout << value << endl;
        });     
    });
}

std::vector<VectorOfString> StudentList;

std::string data1 = "One";
std::string data2 = "Two";

VectorOfString data(2);
data.push_back(data1);
data.push_back(data2);

StudentList.push_back(data);

DisplayStudent(StudentList);

std::for_each(std::begin(StudentList), std::end(StudentList), 
    [](VectorOfString& vectorElement)
{
    std::transform(std::begin(vectorElement), std::end(vectorElement), std::begin(vectorElement),
        [](std::string& value)-> std::string
    {
        if(value.compare("One") == 0)
            return "OneOne";
        else
            return value;
    });     
});

DisplayStudent(StudentList); 
```

# blackberry-10 - Blackberry 10 中的自定义字体

> ID：14701278
> 
> 赞同：3
> 
> 时间：2013-02-05T06:14:06.980
> 
> 标签：blackberry-10

嗨，我是 blackberry10 平台的新手，我坚持在 blackberry10 中添加自定义字体。请任何人告诉我如何在黑莓 10 中添加自定义字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:25:06.733

根据 BlackBerry，自定义字体只能使用 OpenGL 项目添加。SDK 捆绑了一个示例项目（sdkdir\target_10_0_9_2318\qnx6\usr\share\samples\ndk\GoodCitizen）。

在 main.c 文件中，将发送到 bbutil_load_font 函数的字体的路径更改为您的字体文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T10:13:05.930

我们可以在 QML 中添加自定义字体。下面的链接提供了相同的示例：

[http://developer.blackberry.com/native/reference/cascades/bb__cascades__fontfacerule.html](http://developer.blackberry.com/native/reference/cascades/bb__cascades__fontfacerule.html) 下载您需要的字体文件（ttf），可以打包在assets文件夹中。

目前不支持在 C++ 中添加自定义字体。

# c++ - 当我关闭应用程序时，CocosDension 在 Windows 上崩溃

> ID：14701279
> 
> 赞同：0
> 
> 时间：2013-02-05T06:14:07.667
> 
> 标签：c++, windows, cocos2d-x

当我在 Windows 上关闭我的应用程序时。有时它会扔进**MciPlayer.cpp**类`Access violation writing location`的析构函数中

 **```
MciPlayer::~MciPlayer() {
Close();
DestroyWindow(m_hWnd);
} 
```

该应用程序有时会在`DestroyWindow(m_hWnd);`. 我不知道为什么会这样？

我在**Windows 7 x86上使用****cocos2d-2.0-x-2.0.4**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:34:58.343

在文件“CCEGLView.cpp”中，“DestroyWindow(m_hWnd)”将在函数 CCEGLView::end() 中调用。因此，请确保您没有将其销毁两次。

```
if(m_hWnd)
{
    DestroyWindow(m_hWnd);
    m_hWnd = NULL;
} 
```****

# php - Paypal：第一次获得“txn_type=recurring payment”而不是“txn_type=recurring_payment_profile_created”的响应

> ID：14701281
> 
> 赞同：0
> 
> 时间：2013-02-05T06:14:14.503
> 
> 标签：php, paypal, paypal-ipn

我曾经在我的 Web 应用程序中实现贝宝定期付款。我通过即时付款通知从贝宝收到响应到我的（paypalipn.php）页面，如下所示，

```
$payment_status = completed;
                $txn_type = recurring_payment;
                $paypal_txn_id = id comes here;
                $parent_txn_id =  id comes here;
                $recurring_payment_id =  id comes here; 
```

我第一次得到这个回复，但预计第一次，

```
$payment_status = completed;
                $txn_type = recurring_payment_profile_created;
                $paypal_txn_id = id comes here;
                $parent_txn_id =  id comes here;
                $recurring_payment_id =  id comes here; 
```

所以任何人指出我可能会发生什么错误或可能是什么原因........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:44:50.793

这两个事件通常在创建新的定期付款资料时触发。一个用于创建定期付款配置文件，另一个用于针对该定期付款配置文件处理的第一笔付款。从技术上讲，`recurring_payment_profile_created`应该先于`recurring_payment`；但是，IPN 是异步的，因此 IPN 可能会乱序传递。

# vb.net - 将整数和小数部分分开

> ID：14701283
> 
> 赞同：1
> 
> 时间：2013-02-05T06:14:28.527
> 
> 标签：vb.net

我遇到了关于数字的整数部分和小数部分的问题。实际上我需要的是说我有一个数字'101'。这实际上是经过一些计算和时间后得出的。我需要找到小时和分钟。所以我所做的是

```
 overtime = 101
                    Dim fraction As Decimal = 0
                    If overtime > 59 Then
                        fraction = overtime / 60
                        'overtime = overtime / 60
                        fraction = fraction - CInt(fraction)
                        fraction = fraction * 60
                        Dim str() As String = Split(fraction.ToString, ".")
                        Try
                            If str(2).Length > 2 Then

                            End If
                        Catch ex As Exception

                        End Try

                    End If 
```

但是整数正在四舍五入，所以我得到了错误的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:16:10.530

查看`\`运算符（与正常除法运算符相反的方向斜杠），它会自动截断小数部分，只留下一个整数，以及`Mod`只返回除法运算的余数的运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T20:22:06.403

您还可以使用 a`TimeSpan`为您进行转换：

```
 Dim overtime As Integer = 101
 Dim ov As TimeSpan = TimeSpan.FromMinutes(overtime)

 ' outputs "Hours: 1 Minutes: 41"
 Console.WriteLine(String.Format("Hours: {0} Minutes: {1}", ov.Days * 24 + ov.Hours, ov.Minutes)) 
```

`overtime`也可以是任何其他可以转换为`Double`.

# php - PHP - 从最后一个循环中删除逗号

> ID：14701286
> 
> 赞同：2
> 
> 时间：2013-02-05T06:14:55.430
> 
> 标签：php, while-loop

`,`我有一个 PHP while LOOP ，`echo '],';`如果它是最后一个循环，我想删除最后一个逗号

```
 while($ltr = mysql_fetch_array($lt)){
                echo '[';
                echo $ltr['days']. ' ,'. $ltr['name'];
                echo '],';
            } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T06:17:34.717

创建一个包含元素的数组，使它们看起来像`array = ([ELEMENT INFO], [ELEMENT INFO], [ELEMENT INFO])`，然后`implode`用逗号创建数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T06:19:05.527

```
$str = '';
while($ltr = mysql_fetch_array($lt)){
    $str .= '[';
    $str .= $ltr['days']. ' ,'. $ltr['name'];
    $str .= '],';
}

echo rtrim($str, ","); 
```

`,`这将从字符串中删除最后一个

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-11T08:57:38.177

我认为系统解决方案如下：

```
$separator = '';
while($ltr = mysql_fetch_array($lt)){
    echo $separator;
    echo '[';
    echo $ltr['days']. ' ,'. $ltr['name'];
    echo ']';
    if (!$separator) $separator = ', ';
} 
```

无需调用`count()`，无需额外迭代`implode()`，无需额外的字符串操作，为任何（不可预测的）结果做好准备。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-05T06:19:38.773

```
$result = mysql_fetch_array($lt);
for ($i=0;$i<=(count($result)-1);$i++) {
    $ltr = $result[$i];
    echo '[';
    echo $ltr['days']. ' ,'. $ltr['name'];
    echo ']';
    if(!count($result)-1 == $i){
        echo ',';
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T06:19:10.690

检查您有多少条目，创建一个“计数器”和一个条件，以便仅在逗号不是最后一个循环时放置逗号。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T06:40:10.110

```
$arr = array();
while($ltr = mysql_fetch_array($lt)){
    $arr[] = '[' . $ltr['days'] . ' ,' . $ltr['name'] . ']';
}

echo implode(',', $arr); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-05T06:43:45.017

```
$res_array = array();

while($ltr = mysql_fetch_array($lt)){
   $res_array[] = '['.$ltr['days']. ' ,'. $ltr['name'].']';
}

$str = implode(",",$res_array);
echo $str; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-05T06:44:37.013

将响应保存为 var 而不是回显它，然后使用 substr 删除末尾的最后一个字符。

```
 $response = "";
       while($ltr = mysql_fetch_array($lt)){
            $response .= '[';
            $response .= $ltr['days']. ' ,'. $ltr['name'];
            $response .= '],';
        }
      echo substr($response, 0, -1); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-28T10:35:01.223

```
//this one works
$result = mysql_fetch_array($lt);
for ($i=0;$i<=(count($result)-1);$i++) {
    $ltr = $result[$i];
    echo '[';
    echo $ltr['days']. ' ,'. $ltr['name'];
    echo ']';
    if(count($result)-1 != $i){
        echo ',';
    }
} 
```

# c++ - C++ 中是否有一种有效的方法可以在运行时检索函数的*完整签名*？

> ID：14701289
> 
> 赞同：1
> 
> 时间：2013-02-05T06:15:06.387
> 
> 标签：c++, visual-c++

> **可能重复：**
> [可用于打印方法名称的宏/关键字？](https://stackoverflow.com/questions/2192680/macro-keyword-which-can-be-used-to-print-out-method-name)

C++ 中是否有一种有效的方法可以在运行时检索函数的*完整签名*？

我需要这个用于记录目的。我知道宏 like `__FUNCTION__`，但没​​有达到目的，因为它只返回函数名称。同一函数可能有许多重载版本，我想记录完整的函数签名。我正在寻找一个即使修改了函数签名也能正常工作的解决方案。解决方案应始终记录当前的函数签名

```
void log(const char* const message)    
    {
        cout << message << endl;
    }

    void ABC(const int& number)
    {
        Log(???); // what should I pass to this function so full signature of the ABC function is logged??
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:11:15.493

MSDN 上的[Predefined Macros (C/C++) 页面](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)列出了所有可用的宏。您正在寻找的可能是`__FUNCSIG__`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:18:08.663

一般来说没有，但如果使用 GCC 你可以使用[`__PRETTY_FUNCTION__`](http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html)伪宏....

```
 void ABC(const int& number) {
     Log(__PRETTY_FUNCTION__);
     /// etc...
 } 
```

Clang/LLVM 编译器也有它。

# sql - 在 sql server 2008 中使用外部/左连接进行分组

> ID：14701294
> 
> 赞同：3
> 
> 时间：2013-02-05T06:15:24.573
> 
> 标签：sql, sql-server-2008, join, group-by

我在 1 个表中有数据

```
UserID CourseID TestID   Result
1         1       1        P
1         1       2        P
2         1       1        F
2         1       2        F 
```

这表明 2 个用户（UserID =1 和 2）在 CourseID =1 中参加了测试（TestID=1 和 2）

现在 CourseID 总共有 3 个测试（比如 TestID=1,2,7）

```
CourseID TestID
1          1
1          2
1          7 
```

这意味着没有用户参加过测试（TestID=7）现在我想显示如下数据

```
UserID CourseID TestID   Result
1         1       1        P
1         1       2        P
1         1       7        null
2         1       1        F
2         1       2        F
2         1       7        null 
```

我一直在尝试使用 Group by 进行左/右外连接，但无法获得所需的结果。如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:40:58.143

[SQL小提琴](http://sqlfiddle.com/#!3/fbe93/2)

**MS SQL Server 2008 架构设置**：

```
create table Result
(
  UserID int,
  CourseID int,
  TestID int,
  Result char(1)
)
insert into Result values
(1,         1,       1,        'P'),
(1,         1,       2,        'P'),
(2,         1,       1,        'F'),
(2,         1,       2,        'F')

create table Course
(
  CourseID int,
  TestID int
)

insert into Course values
(1, 1),
(1, 2),
(1, 7) 
```

**查询 1**：

```
select U.UserID,
       C.CourseID,
       C.TestID,
       R.Result
from (
     select distinct UserID
     from Result
     ) as U
  cross apply Course as  C
  left outer join Result as R
    on R.CourseID = C.CourseID and
       R.TestID = C.TestID and
       R.UserID = U.UserID 
```

**[结果](http://sqlfiddle.com/#!3/fbe93/2/0)**：

```
| USERID | COURSEID | TESTID | RESULT |
---------------------------------------
|      1 |        1 |      1 |      P |
|      1 |        1 |      2 |      P |
|      1 |        1 |      7 | (null) |
|      2 |        1 |      1 |      F |
|      2 |        1 |      2 |      F |
|      2 |        1 |      7 | (null) | 
```

注意：如果你有一个表`Users`，你可以替换派生表

```
 (
 select distinct UserID
 from Result
 ) as U 
```

取而代之`Users as U`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:21:19.473

```
SELECT uct.UserId, ct.CourseID, ct.TestID, uct.Result
FROM CourseTest ct
LEFT JOIN UserCourseTest uct ON uct.CourseID=ct.CourseID AND uct.TestID=ct.TestID 
```

# sql - ORACLE的SQL查询中如何使用MAX和TOP？

> ID：14701296
> 
> 赞同：1
> 
> 时间：2013-02-05T06:15:39.037
> 
> 标签：sql, oracle, oracle10g

假设我有下表

```
ID   ITEM   QUANTITY   DATE
1    A      50         Jan 3, 2013
2    B      80         Jan 1, 2013
3    C      70         Jan 5, 2013
4    D      80         Jan 4, 2013 
```

我必须进行一个查询，该查询将获取具有最高数量和最高日期的记录。例如，最终结果应该是

```
4    D    80   Jan 4, 2013 
```

**更新：**首先我必须选择数量最多的记录。在这种情况下，它将是记录号。2 和 4。然后我必须再次从这两个具有最高日期的记录中过滤掉

我应该如何在 ORACLE 中进行 SQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:25:10.450

要获取这些数据，您可以编写与此类似的查询：

```
select id
     , item
     , quantity
     , date
  from (select id
             , item
             , quantity
             , date
          from your_table
         order by quantity desc, date desc
        )
where rownum = 1 
```

# c - sqlite3 源代码中对 sqlite3 结构的混淆

> ID：14701298
> 
> 赞同：1
> 
> 时间：2013-02-05T06:15:49.760
> 
> 标签：c, database, sqlite

在函数中

```
static int sqlite3Prepare(
    sqlite3 *db,              /* Database handle. */
    const char *zSql,         /* UTF-8 encoded SQL statement. */
    int nBytes,               /* Length of zSql in bytes. */
    int saveSqlFlag,          /* True to copy SQL text into the sqlite3_stmt */
    Vdbe *pReprepare,         /* VM being reprepared */
    sqlite3_stmt **ppStmt,    /* OUT: A pointer to the prepared statement */
    const char **pzTail       /* OUT: End of parsed string */
    ) {
     ...
     pParse = sqlite3StackAllocZero(db, sizeof(*pParse));
     ...
     assert( !db->mallocFailed );
     ...
} 
```

我知道 sqlite3 只是一个声明为的假结构

```
 typedef struct sqlite3 sqlite3; 
```

没有任何身体。我知道`sqlite3 *`通常是强制转换为`Vdbe*`.

但在这里，`db`属于 的类型`sqlite3*`，怎么可能`db->malloFailed`存在呢？为什么编译器不抱怨？

有类似的情况`sqlite3_stmt`：

```
typedef struct sqlite3_stmt sqlite3_stmt; 
```

没有身体。我猜`sqlite3_stmt`是解析后的 SQL 语句的语法树。我想看看它的结构。但是，使用这种奇怪的模式将类型隐藏得如此之深，以至于我看不到它是什么。

甚至`Vdbe`是同样的情况……

```
typedef struct Vdbe Vdbe; 
```

到底哪里是真实的`struct`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:56:37.133

`sqlite3`不是*假*结构；该`sqlite.h`文件只是没有定义它的主体。

它的定义在`sqliteInt.h`文件中（这也是`sqlite3.c`合并的一部分）：

```
/*
** Each database connection is an instance of the following structure.
*/
struct sqlite3 {
  sqlite3_vfs *pVfs;            /* OS Interface */
  struct Vdbe *pVdbe;           /* List of active virtual machines */
  CollSeq *pDfltColl;           /* The default collating sequence (BINARY) */
  ...
  u8 mallocFailed;              /* True if we have seen a malloc failure */
  ... 
```

# unix - 如何通过 ssh 将本地输出重定向到标准输入以远程执行本地脚本？

> ID：14701301
> 
> 赞同：1
> 
> 时间：2013-02-05T06:15:58.430
> 
> 标签：unix, ssh, pipe, io-redirection

我正在尝试通过 ssh 远程执行从标准输入获取数据的 perl 脚本。棘手的部分是我不想将脚本本身上传到远程服务器。远程脚本将从标准输入读取的数据由另一个本地运行的 perl 脚本生成。

让我们假设以下内容：

*   我的本地脚本生成数据称为 cron_extract_section.pl
*   我将远程运行的本地脚本称为 cron_update_section.pl
*   两个脚本都在命令行上接受一个参数，一个简单的词

如果脚本存在于远程机器上，我设法远程执行脚本：

```
./cron_extract_section.pl ${SECTION} 2> /dev/null | ssh user@remote ~/path/to/remote/script/cron_update_section.pl ${SECTION} 
```

我也知道我可以在远程服务器上运行脚本而无需先上传它，使用以下语法：

```
ssh user@remote "perl - ${SECTION}" < ./cron_update_section.pl 
```

我不知道如何通过 ssh 将本地脚本 cron_update_section.pl 提供给 perl，并将本地脚本 cron_extract_section.pl 的结果通过管道传输到 perl。

我尝试了以下方法，perl 脚本执行得很好，但是从 stdin 中没有可读取的内容：

```
./cron_extract_section.pl ${SECTION} 2> /dev/null | ssh user@remote perl - ${SECTION} < ./cron_update_section.pl 
```

您知道是否可以在不修改脚本的情况下这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:14:11.537

使用`DATA`文件句柄。例如：

要在远程机器上运行的本地脚本：

```
# script.pl
while(<DATA>) {
  print "# $_";
}
__DATA__ 
```

然后，将其运行为：

```
(cat script.pl && /cron_extract_section.pl ${SECTION}) | ssh $host perl 
```

# performance - 在 Matlab 中查找没有 NaN 的行的最快方法

> ID：14701304
> 
> 赞同：7
> 
> 时间：2013-02-05T06:16:06.953
> 
> 标签：performance, matlab, matrix, vectorization

我想以最快的方式找到没有任何 NaN 的行的索引，因为我需要这样做数千次。到目前为止，我已经尝试了以下两种方法：

```
find(~isnan(sum(data, 2)));
find(all(~isnan(data), 2)); 
```

有没有一种聪明的方法可以加快速度，或者这是最好的方法吗？数据矩阵的维度通常是千乘百。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:28:42.177

**编辑：** 矩阵乘法可以比求和快，因此对于超过 500 x500 个元素的矩阵（在我的 Matlab 2012a 机器中），运算速度几乎快两倍。所以我的解决方案是：

```
find(~isnan(data*zeros(size(data,2),1))) 
```

* * *

在您在问题中建议的两种方法（表示为`f`和`g`）中，第一种方法更快（使用[`timeit`](http://www.mathworks.com/matlabcentral/fileexchange/18798)）：

```
data=rand(4000);
nani=randi(numel(data),1,500);
data(nani)=NaN;
f= @() find(~isnan(sum(data, 2)));
g= @() find(all(~isnan(data), 2));
h= @() find(~isnan(data*zeros(size(data,2),1)));

timeit(f) 
ans =
     0.0263

timeit(g)
ans =
     0.1489

timeit(h)
ans =
     0.0146 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:48:31.270

如果`nan`密度足够高，那么双循环将是最快的方法。这是因为一旦`nan`找到第一行，就可以放弃对行的搜索。例如，考虑以下速度测试：

```
%# Preallocate some parameters
T = 5000; %# Number of rows
N = 500; %# Number of columns
X = randi(5, T, N); %# Sample data matrix
M = 100; %# Number of simulation iterations
X(X == 1) = nan; %# Randomly set some elements of X to nan

%# Your first method
tic
for m = 1:M
    Soln1 = find(~isnan(sum(X, 2)));
end
toc

%# Your second method
tic
for m = 1:M
    Soln2 = find(all(~isnan(X), 2));
end
toc

%# A double loop
tic
for m = 1:M
    Soln3 = ones(T, 1);
    for t = 1:T
        for n = 1:N
            if isnan(X(t, n))
                Soln3(t) = 0;
                break
            end
        end
    end
    Soln3 = find(Soln3);
end
toc 
```

结果是：

```
Elapsed time is 0.164880 seconds.
Elapsed time is 0.218950 seconds.
Elapsed time is 0.068168 seconds. %# The double loop method 
```

当然，`nan`这个模拟中的密度非常高，以至于没有一行是`nan`空闲的。但是你从来没有说过`nan`你的矩阵的密度，所以我想我会发布这个答案以供一般消费和沉思:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:56:27.143

`any()`比`all()`或快`sum()`。尝试：

```
idx = find(~any(isnan(data), 2)); 
```

更正：似乎`sum()`方法更快：

```
idx = find(~isnan(sum(data, 2))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T06:42:23.940

你能告诉更多关于你想用索引做什么

```
time = cputime;  
    A = rand(1000,100);              % Some matrix data
    for i = 1:100  
        A(randi(20,1,100)) = NaN;    % Randomly assigned NaN  
        B = isnan(A);                % B has 0 and 1  
        C = A(B == 0);               % C has all ~NaN elements
        ind(i,:) = find(B == 1);     % ind has all NaN indices
    end
    disp(cputime-time) 
```

循环 100 次，0.1404 秒

# android - Android：谷歌地图当前位置和其他标记点

> ID：14701307
> 
> 赞同：0
> 
> 时间：2013-02-05T06:16:18.930
> 
> 标签：android, google-maps, balloon, currentlocation

我正在开发一个安卓谷歌地图应用程序。如何创建当前位置、气球覆盖和其他标记位置点。

我正在（CustomMap.java）中创建其他标记位置点

在这里我也想当前位置。请帮助我

**CustomMap.java**

```
 public class CustomMap extends MapActivity implements LocationListener {

MapView mapView;
List<Overlay> mapOverlays;
Drawable drawable;
Drawable drawable2;
CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay;
CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay2;
double longitude;
double latitude;

long start;
long stop;
int x, y;
int lati = 0; 
int longit = 0;
GeoPoint touchedPoint;
public boolean overlay_status=false;

 /** Called when the activity is first created. */
    @Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    // making it full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_custom_map);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();

    // first overlay
    drawable = getResources().getDrawable(R.drawable.marker);
    itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);

    //first overlay in first pinpoint
    GeoPoint point = new GeoPoint((int)(13.0094444*1E6),(int)(77.5508333*1E6));
    CustomOverlayItem overlayItem = new CustomOverlayItem(point, "ISKCON Temple Bangalore(1997)", 
            "(ISKCON Temple, Chord Rd, Mahalakshmipuram Layout, Nagapura, Bangalore, Karnataka, India)", 
            "http://www.iskcon-bda.org/data/HKH.jpg");
    itemizedOverlay.addOverlay(overlayItem);

    //first overlay in second pinpoint
    GeoPoint point2 = new GeoPoint((int)(12.8008*1E6),(int)(77.5756*1E6));
    CustomOverlayItem overlayItem2 = new CustomOverlayItem(point2, "Bannerghatta National Park", 
            "(Bannerghatta Biological Park is carved out of the Bannerghatta National Park in the year 2002)", 
            "http://www.google.co.in/imgres?imgurl=http://travel.sulekha.com/" +
            "india/karnataka/bangalore/photos/bannerghatta-national-park-25.jpg&imgrefurl=http://travel.sulekha.com/" +
            "a-visit-to-bannerghatta-national-park_bangalore-travelogue-3541.htm&h=194&w=259&sz=1&tbnid=K5TNPwXHgihgRM:&tbnh=" +
            "119&tbnw=160&zoom=1&usg=__MFNGL1C2InXP7jw7XmEi4ym45NY=&docid=d78iF3T5ditWeM&itg=1&hl=en&sa=X&ei=" +
            "CpwQUdOmHIPUrQe0m4H4Bg&sqi=2&ved=0CHwQ_B0wCw");        
    itemizedOverlay.addOverlay(overlayItem2);

    mapOverlays.add(itemizedOverlay);

    // second overlay
    drawable2 = getResources().getDrawable(R.drawable.marker2);
    itemizedOverlay2 = new CustomItemizedOverlay<CustomOverlayItem>(drawable2, mapView);

    //second overlay in third pinpoint
    GeoPoint point3 = new GeoPoint((int)(12.8339956*1E6),(int)(77.4009816*1E6));
    CustomOverlayItem overlayItem3 = new CustomOverlayItem(point3, "Wonderla Bangalore(2005)", 
            "(Wonderla is an amusement park located near Bidadi, 28 kilometres Bangalore, spanning 82 acres of land)",
            "http://www.google.co.in/imgres?imgurl=http://www.yohyoh.com/places-tourism/pictures/wb3.jpg&imgrefurl=http://" +
            "www.yohyoh.com/places-tourism/view.php/popular-tours/Karnataka/Bangalore/wonderla-bangalore/561/8192987807&h=" +
            "194&w=259&sz=1&tbnid=RoLC5gzRHP6VSM:&tbnh=160&tbnw=213&zoom=1&usg=__ShDQAmQ0zjQaKbsy0A63BokHAmk=" +
            "&docid=J1aN09WXjvHw4M&itg=1&hl=en&sa=X&ei=Sp0QUbvIEMHjrAfTy4GgBA&ved=0CNMBEPwdMAo");
    itemizedOverlay2.addOverlay(overlayItem3);

    //second overlay in third pinpoint
    GeoPoint point4 = new GeoPoint((int)(12.8385923*1E6),(int)(77.661710599*1E6));
    CustomOverlayItem overlayItem4 = new CustomOverlayItem(point4, "Wipro Technologies,Bangalore", 
            "(Wipro Technologies, Electronics City Phase 1, Electronics City, Bangalore, Karnataka 560100, India)", 
            "http://www.electronic-city.in/companies/profile/wipro/wipro-electronic-city.jpg");     
    itemizedOverlay2.addOverlay(overlayItem4);

    mapOverlays.add(itemizedOverlay2);

    // Getting LocationManager object from System Service LOCATION_SERVICE
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    // Creating a criteria object to retrieve provider
    Criteria criteria = new Criteria();

    criteria.setAccuracy(Criteria.ACCURACY_FINE);

    // Getting the name of the best provider
    String provider = locationManager.getBestProvider(criteria, true);

    // Getting Current Location
    Location location = locationManager.getLastKnownLocation(provider);

    if(location!=null){
        onLocationChanged(location);
    }

    locationManager.requestLocationUpdates(provider, 20000, 0, this);

    String address = "";
    Geocoder geoCoder = new Geocoder(
            getBaseContext(), Locale.getDefault());

   latitude = location.getLatitude();

    // Getting longitude
    longitude = location.getLongitude();

    // Creating an instance of GeoPoint corresponding to latitude and longitude
    GeoPoint point5 = new GeoPoint((int)(latitude * 1E6), (int)(longitude*1E6));

    try {
        List<Address> addresses = geoCoder.getFromLocation(
            point.getLatitudeE6()  / 1E6, 
            point.getLongitudeE6() / 1E6, 1);

            if (addresses.size() > 0) {
                for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                    address += addresses.get(0).getAddressLine(index) + " ";
            }
            tvLocation.setText("Address :" +  address  );
    }
    catch (IOException e) {                
        e.printStackTrace();
    }

    drawable = getResources().getDrawable(R.drawable.url);
    itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);

    mapView.getOverlays().add(itemizedOverlay);
    itemizedOverlay.runOnFirstFix(new Runnable() {
     @Override
    public void run() {
     // TODO Auto-generated method stub
     mapView.getOverlays().add(itemizedOverlay);
     }
     });
    MapController mapController = mapView.getController();

    // Locating the Geographical point in the Map
    mapController.animateTo(point5);
    itemizedOverlay.enableMyLocation();
     mapView.postInvalidate();
    // Getting list of overlays available in the map
    List<Overlay> mapOverlays = mapView.getOverlays();

    CustomOverlayItem currentLocation = new CustomOverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude, null);

    // Adding the mark to the overlay
    itemizedOverlay.addOverlay(currentLocation);

    // Clear Existing overlays in the map
    mapOverlays.clear();
    mapOverlays.add(itemizedOverlay);

    if (savedInstanceState == null) {

    //Contains Displaying the pinpoint
    final MapController mc = mapView.getController();
    mc.animateTo(point);
    mc.setZoom(16);
    }else {

        // example restoring focused state of overlays
        int focused;
        focused = savedInstanceState.getInt("focused_1", -1);
        if (focused >= 0) {
            itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
        }
        focused = savedInstanceState.getInt("focused_2", -1);
        if (focused >= 0) {
            itemizedOverlay2.setFocus(itemizedOverlay2.getItem(focused));
        }

    }

    Touchy t = new Touchy();
    mapOverlays = mapView.getOverlays();
    mapOverlays.add(t);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
@Override
protected void onSaveInstanceState(Bundle outState) {

    // example saving focused state of overlays
    if (itemizedOverlay.getFocus() != null) outState.putInt("focused_1", itemizedOverlay.getLastFocusedIndex());
    if (itemizedOverlay2.getFocus() != null) outState.putInt("focused_2", itemizedOverlay2.getLastFocusedIndex());
    super.onSaveInstanceState(outState);

}

//Contains creating the option menu items 
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, 0, 1, "Remove Overlay");
    menu.add(0, 1, 1, "set Overlay");
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.drawable.home_menu, menu);
    return true;
}
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if(overlay_status==false)
    {
     menu.findItem(1).setVisible(false);
     menu.findItem(0).setVisible(true);

    //overlay_status=true;
    }
    else
    {
         menu.findItem(0).setVisible(false);
         menu.findItem(1).setVisible(true);

        // overlay_status=false;
    }
 return super.onPrepareOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.home1:
         finish();
        return true;
    case 0:

        //Toast.makeText(getApplicationContext(), "remove overlay ", Toast.LENGTH_SHORT).show();

        // example hiding balloon before removing overlay
                    if (itemizedOverlay.getFocus() != null) {
                        itemizedOverlay.hideBalloon();
                    }
                    mapOverlays.remove(itemizedOverlay);
                    mapView.invalidate();
                    overlay_status=true;
                return true;    
    case 1:

        Toast.makeText(getApplicationContext(), "set overlay ", Toast.LENGTH_SHORT).show();
        if (itemizedOverlay.getFocus() != null) {
            itemizedOverlay.getBalloonBottomOffset();
        }
        mapOverlays.add(itemizedOverlay);
             mapView.bringToFront();

             overlay_status=false;
             return true;
    default:
        return super.onOptionsItemSelected(item);
}

}

class Touchy extends Overlay{
    List<Address> address;
    String display = "";
    String display1;
    @SuppressWarnings({ "deprecation" })
    public boolean onTouchEvent(MotionEvent e,MapView m){
        if(e.getAction() == MotionEvent.ACTION_DOWN){
            start = e.getEventTime();
            x = (int)e.getX();
            y = (int)e.getY();
            touchedPoint = mapView.getProjection().fromPixels(x, y);
            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());    
            try{
                address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6, 1);
                if(address.size() > 0){

                    for(int i = 0; i<address.get(0).getMaxAddressLineIndex(); i++){
                        display +=address.get(0).getAddressLine(i) + "\n";
                    }

                    Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG).show();

                }

            }catch(IOException e1){

            }
            finally
            {
                display1=display;
                display=" ";
            }

            }
        if(e.getAction() == MotionEvent.ACTION_UP){
            stop = e.getEventTime();
        }

    /**contains the creating a Alert Dialog Box (place apinpoint, get address, Toggle View)
     * In Dialog Box Maximum three buttens
     */
    if(stop - start > 1000){
        AlertDialog alert = new AlertDialog.Builder(CustomMap.this).create();
        alert.setTitle("pick an Option");
        alert.setMessage("I told to pick an option");

        alert.setButton("place a pinpoint", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                CustomOverlayItem overlayItem = new CustomOverlayItem(touchedPoint,"Address:",display1, display1);
 //                 SimpleItemizedOverlay itemizedOverlay = new SimpleItemizedOverlay(drawable, mapView);
                CustomItemizedOverlay<CustomOverlayItem> itemOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);
 //                 CustomPinpoint custom = new CustomPinpoint(drawable, CustomMap.this);
 //                 custom.insertPinpoint(overlayItem);
                itemOverlay.insertPinpoint(overlayItem);
                itemOverlay.addOverlay(overlayItem);
                mapOverlays.add(itemOverlay);
            }
        });

        alert.setButton2("get address", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());    
                try{
                    List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6, 1);
                    if(address.size() > 0){
                        String display = "";
                        for(int i = 0; i<address.get(0).getMaxAddressLineIndex(); i++){
                            display +=address.get(0).getAddressLine(i) + "\n";
                        }
                        Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG).show();

                    }

                }catch(IOException e){

                }
            }
        });

        alert.setButton3("Toggle View", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

                if(mapView.isSatellite()){
                    mapView.setSatellite(false);
                    mapView.setStreetView(true);
                }else{ 
                    mapView.setStreetView(false);
                    mapView.setSatellite(true);
                }

            }
        });

        alert.show();
        return true;
    }
    return false;

}

 }
@Override
public void onLocationChanged(Location location) {
    lati = (int) (location.getLatitude() * 1E6);
    longit = (int) (location.getLongitude() * 1E6);
    GeoPoint ourLocation = new GeoPoint(lati, longit);
    OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up?", "2nd String");
    CustomPinpoint custom = new CustomPinpoint(drawable, CustomMap.this);
    custom.insertPinpoint(overlayItem);
    mapOverlays.add(custom);

}

@Override
public void onProviderDisabled(String provider) {

}

@Override
public void onProviderEnabled(String provider) {

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {

}

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:52:49.783

试试这个 AndroidHive Google 代码

Google Map Link [Android 使用 Google Places 和 Maps 教程](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

```
public class SinglePlaceActivity extends Activity {
// flag for Internet connection status
Boolean isInternetPresent = false;

// Connection detector class
ConnectionDetector cd;

// Alert Dialog Manager
AlertDialogManager alert = new AlertDialogManager();

// Google Places
GooglePlaces googlePlaces;

// Place Details
PlaceDetails placeDetails;

// Progress dialog
ProgressDialog pDialog;

// KEY Strings
public static String KEY_REFERENCE = "reference"; // id of the place

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_place);

    Intent i = getIntent();

    // Place referece id
    String reference = i.getStringExtra(KEY_REFERENCE);

    // Calling a Async Background thread
    new LoadSinglePlaceDetails().execute(reference);
}

/**
 * Background Async Task to Load Google places
 * */
class LoadSinglePlaceDetails extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(SinglePlaceActivity.this);
        pDialog.setMessage("Loading profile ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Profile JSON
     * */
    protected String doInBackground(String... args) {
        String reference = args[0];

        // creating Places class object
        googlePlaces = new GooglePlaces();

        // Check if used is connected to Internet
        try {
            placeDetails = googlePlaces.getPlaceDetails(reference);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed Places into LISTVIEW
                 * */
                if(placeDetails != null){
                    String status = placeDetails.status;

                    // check place deatils status
                    // Check for all possible status
                    if(status.equals("OK")){
                        if (placeDetails.result != null) {
                            String name = placeDetails.result.name;
                            String address = placeDetails.result.formatted_address;
                            String phone = placeDetails.result.formatted_phone_number;
                            String latitude = Double.toString(placeDetails.result.geometry.location.lat);
                            String longitude = Double.toString(placeDetails.result.geometry.location.lng);

                            Log.d("Place ", name + address + phone + latitude + longitude);

                            // Displaying all the details in the view
                            // single_place.xml
                            TextView lbl_name = (TextView) findViewById(R.id.name);
                            TextView lbl_address = (TextView) findViewById(R.id.address);
                            TextView lbl_phone = (TextView) findViewById(R.id.phone);
                            TextView lbl_location = (TextView) findViewById(R.id.location);

                            // Check for null data from google
                            // Sometimes place details might missing
                            name = name == null ? "Not present" : name; // if name is null display as "Not present"
                            address = address == null ? "Not present" : address;
                            phone = phone == null ? "Not present" : phone;
                            latitude = latitude == null ? "Not present" : latitude;
                            longitude = longitude == null ? "Not present" : longitude;

                            lbl_name.setText(name);
                            lbl_address.setText(address);
                            lbl_phone.setText(Html.fromHtml("<b>Phone:</b> " + phone));
                            lbl_location.setText(Html.fromHtml("<b>Latitude:</b> " + latitude + ", <b>Longitude:</b> " + longitude));
                        }
                    }
                    else if(status.equals("ZERO_RESULTS")){
                        alert.showAlertDialog(SinglePlaceActivity.this, "Near Places",
                                "Sorry no place found.",
                                false);
                    }
                    else if(status.equals("UNKNOWN_ERROR"))
                    {
                        alert.showAlertDialog(SinglePlaceActivity.this, "Places Error",
                                "Sorry unknown error occured.",
                                false);
                    }
                    else if(status.equals("OVER_QUERY_LIMIT"))
                    {
                        alert.showAlertDialog(SinglePlaceActivity.this, "Places Error",
                                "Sorry query limit to google places is reached",
                                false);
                    }
                    else if(status.equals("REQUEST_DENIED"))
                    {
                        alert.showAlertDialog(SinglePlaceActivity.this, "Places Error",
                                "Sorry error occured. Request is denied",
                                false);
                    }
                    else if(status.equals("INVALID_REQUEST"))
                    {
                        alert.showAlertDialog(SinglePlaceActivity.this, "Places Error",
                                "Sorry error occured. Invalid Request",
                                false);
                    }
                    else
                    {
                        alert.showAlertDialog(SinglePlaceActivity.this, "Places Error",
                                "Sorry error occured.",
                                false);
                    }
                }else{
                    alert.showAlertDialog(SinglePlaceActivity.this, "Places Error",
                            "Sorry error occured.",
                            false);
                }

            }
        });

    }

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:23:39.957

尝试这个，

```
 mapView.getOverlays().add(locationoverlay);
locationoverlay.runOnFirstFix(new Runnable() {
 @Override
public void run() {
 // TODO Auto-generated method stub
 mapView.getOverlays().add(locationoverlay);
 }
 });
 locationoverlay.enableMyLocation();
 mapView.postInvalidate(); 
```

上面的代码将在android默认标记覆盖中提供当前位置

# perl - DBIx::Class 使用 HTML::FormHandler 重用 dbh

> ID：14701313
> 
> 赞同：2
> 
> 时间：2013-02-05T06:16:38.417
> 
> 标签：perl, catalyst, dbix-class

我在[Catalyst应用程序中使用](http://www.catalystframework.org)[DBIx::Class](https://metacpan.org/module/DBIx::Class)，我想知道是否有可能使[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)使用代码前面已经使用的相同 dbh （也许它已经这样做了？）。例如：`DBIx::Class`

```
#connect to db and make query
my $val = $c->model('DB::Example')->search({ condition => 'y'});

my $form = myapp::Form::Example->new;

#now reuse dbh here when updating somehow??
return unless $form->process(
    schema  => $c->model('DB')->schema,
    item_id => $c->user->id,
    params => $c->req->params,
); 
```

我知道即使创建两个数据库句柄也不会影响性能，但我想尽可能简洁:)

另外，如果我要一个接一个地调用 DB `DBIx::Class`，那会重用相同的 dbh 吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:04:57.827

每个 DBIx::Class::Schema 实例都有自己的 dbh。如果你 fork，它也会注意为每个进程创建一个新的数据库连接。

因此，如果您将 Catalyst 模型实例传递给 Formhandler，它将重用 dbh。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T05:25:05.553

传递 dbh 可能不是你想要的，MVC 的整个想法是提供抽象，所有建议的解决方案都违反了它。您可以将 dbh（使用 dbh 可能不是最好的主意，但仍然是）保留在控制器中，并使用 $c->stash('what/whatever.html') 获取数据并将其存储在 html 中。因此，前端确实必须处理任何数据获取。

# sql - IS NULL 与 <> 1 SQL 位

> ID：14701314
> 
> 赞同：21
> 
> 时间：2013-02-05T06:16:41.780
> 
> 标签：sql, sql-server, null, sql-server-2012

我在 SQL Server 2012 数据库中的表上有一个位列。

我正在尝试检索此位列为`NULL`或不为真的所有行。

此查询没有返回它应该返回的内容：（返回 0 行）

```
Select * 
from table 
where bit_column_value <> 1 
```

此查询带回正确的行：

```
Select * 
from table 
where bit_column_value IS NULL 
```

现在，我很乐意使用第二个查询，但我的问题是，在对另一个表的类似查询中，上述相反的情况是正确的，第一种方法有效，但第二种方法无效！

有人可以帮助解释上面的区别吗？我已专门将相关位列更新为 NULL，这不会改变结果。`Null`（认为​​“空”和值之间可能存在差异。

提前感谢您的任何解释。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-05T06:37:53.700

`<>`不起作用的原因是 SQL 将`NULL`其视为未知 - 它不知道`NULL`应该是什么意思，因此它对两者`=`和`<>`一个`NULL`值进行评估`UNKNOWN`（在 where 子句或连接条件中被视为 false）。有关更多信息，请阅读：[Why does NULL = NULL evaluate to false in SQL server](https://stackoverflow.com/questions/1843451/why-does-null-null-evaluate-to-false-in-sql-server)。

如果上面有索引，使用 ISNULL 函数将意味着无法使用索引，因此要确保查询可以使用索引，只需使用`OR`：

```
SELECT * 
FROM TableName
WHERE
   bit_column_value IS NULL OR bit_column_value = 0 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-05T06:21:55.743

您最好的选择是这样编写查询：

```
SELECT
     * 
FROM 
     table 
WHERE 
     ISNULL(bit_column_value, 0) = 0 
```

这应该返回所有 NULL 和 FALSE 记录。

如果没有看到您的表结构和数据，我无法真正评论为什么您从 2 个查询中得到不同的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T07:27:46.557

MSDN 说[BIT](http://msdn.microsoft.com/en-us/library/ms177603.aspx)类型可以存储值 0、1 或 NULL。（BIT 值为 NULL 的事实必须与位值本身分开存储，因为可以压缩位值，以便将 8 个 BIT 值存储在一个字节中。）

请记住，当条件为 TRUE 时，WHERE 子句中的条件会选择一行。对于大多数二元谓词（条件），如果将 NULL 与某个值进行比较，则结果为 NULL 或 UNKNOWN（不是 TRUE）。因此，例如，如果列中的值为 NULL，则`column = 0`计算结果为 NULL 或 UNKNOWN， 也是如此`column <> 0`。

查看您的查询：

```
SELECT * FROM table WHERE bit_column_value <> 1 
```

如果`bit_column_value`列中的值为 1，则条件为 FALSE，因此不返回该行；如果值为 0，则条件为 TRUE，因此返回该行；如果值为 NULL，则条件也是 NULL 或 UNKNOWN，因此不会返回该行。

```
SELECT * FROM table WHERE bit_column_value IS NULL 
```

根据 SQL 标准，IS [NOT] NULL 谓词和相关的 IS [NOT] {TRUE|FALSE|UNKNOWN} 谓词略有不同。如果测试值为 NULL，则 IS NULL 测试返回 TRUE；否则，它们返回 FALSE（并且永远不会返回 UNKNOWN）。IS [NOT] {TRUE|FALSE|UNKNOWN} 测试类似；如果值是指定类型，则返回 TRUE，否则返回 FALSE（不是 UNKNOWN）。例如：

```
Column   IS TRUE   IS FALSE   IS UNKNOWN   IS NOT TRUE   IS NOT FALSE   IS NOT UNKNOWN
FALSE    FALSE     TRUE       FALSE        TRUE          FALSE          TRUE
TRUE     TRUE      FALSE      FALSE        FALSE         TRUE           TRUE
NULL     FALSE     FALSE      TRUE         TRUE          TRUE           FALSE 
```

因此，在您的第二个查询中，只会选择`bit_column_value`值为 NULL（与 0 和 1 分开）的行——不是 TRUE，也不是 FALSE。

* * *

> 我正在尝试检索此位列为 NULL 或 NOT TRUE 的所有行。

尝试直接从您的规范编写查询：

1.  `SELECT * FROM table WHERE bit_column_value IS NULL OR bit_column_value IS NOT TRUE`
2.  `SELECT * FROM table WHERE bit_column_value IS NULL OR bit_column_value = FALSE`
3.  `SELECT * FROM table WHERE bit_column_value IS NULL OR bit_column_value <> TRUE`
4.  `SELECT * FROM table WHERE bit_column_value IS NOT TRUE`

鉴于上面的真值表，查询 4 ​​将产生您想要的结果——主要的警告是我不确定 MS SQL Server 是否支持 IS [NOT] {TRUE|FALSE|UNKNOWN}。从 MSDN on [Predicates](http://msdn.microsoft.com/en-us/library/ms189523.aspx)判断，不支持 IS [NOT] {TRUE|FALSE|UNKNOWN} 谓词（但我可能错过了手册的正确部分）。如果正确，您需要使用查询 2 或 3 之一。

* * *

（当值不是简单的列而是行值时，这些谓词会有一些额外的复杂性。但是，这与您的问题或问题无关；由于 MS SQL Server 似乎不支持它们，因此更是如此。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T06:29:47.740

请检查您的表格数据，如果它包含 value = 0 ？

[SQL Bit 数据类型](http://msdn.microsoft.com/en-us/library/ms177603.aspx)的值只能是 0、1 或`NULL`，如果插入其他值，则视为 1（例外：如果插入 ' `False`' 它将变为 0， ' `True`' 将变为 1）。

例如 ：

```
insert into t1 values (1),(2),(1),(3),(-1),(0),(NULL),('false'),('true') 
```

结果 ：

> 1, 1, 1, 1, 1, 0, 空值, 0, 1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T06:38:07.693

我认为这是因为所有数据`NULL`在此列中都有值。所以：

```
Select * 
from table 
where bit_column_value <> 1; 
```

不会给你结果的。既然`NULL`是未知数。和这个：

```
Select * 
from table 
where bit_column_value IS NULL; 
```

会给你你正在寻找的结果。

*但是您对*使用数据类型表示*真假*有一个误解。*`bit`*

 *您将*false*表示为`NULL`,`0`是空的，而*true*是任何其他值。`bit`数据类型如[@IswantoSan 在他的回答中解释的那样](https://stackoverflow.com/a/14701488/722783)工作；它应该是 0 或 1 或`NULL`：

*   0 为假，
*   1 是真的，
*   `NULL`是空的。

因此得到：

*   `true`值使用`where bit_column_value = 1`.
*   `false`值使用`where bit_column_value = 0`.
*   `NULL`或空`where bit_column_value IS NULL`。
*   `NULL or not true:`其中 bit_column_value 为 NULL 或 bit_column_value = 0`。

另外需要注意的是，`NULL`和空是两个不同的东西，它们是不一样的。在`BIT`数据类型空的情况下`NULL`不是0，因为0应该是假的。但是考虑一个字符串数据类型`VARCHAR`，例如，空字符串`''`与值完全不同`NULL`。*

# c++ - 为什么串口发送数据时会跳过数据？

> ID：14701316
> 
> 赞同：2
> 
> 时间：2013-02-05T06:16:48.763
> 
> 标签：c++, serial-port, arduino, termios

我已经编写了一些 C++ 代码来通过串行与我的 arduino 通信。它只是尝试使用正弦和余弦在两个伺服电机上产生振荡，但它正在跳过数据。我不确定为什么会这样。我将 termios.h 用于串行内容。C++ 的输出类似于“V180H90”，即垂直 180，水平 90。我之前使用 fstream 和 usleep() 发送数据并且它正在工作，但我想使用比延迟一些任意数字更好的方法.

感谢您的任何帮助或指导。

我的arduino代码

```
#include <Servo.h>
typedef enum { NONE, GOT_V, GOT_H } states;
states state = NONE;
Servo pan;
Servo tilt;
int laser = 11;
unsigned int currentValue;

int v_pan = 0;
int v_tilt = 0;

void setup()
{
  pan.attach(10);
  tilt.attach(9);

  Serial.begin(9600);
  state = NONE;
}

void processVertical(const unsigned int value)
{
  Serial.print("Vertical = ");
  Serial.println(value);
  int result = 1300 + (value - 90) * 2;
  //Serial.println(result);
  tilt.writeMicroseconds(result);
}

void processHorizontal(const unsigned int value)
{
  Serial.print("Horizontal = ");
  Serial.println(value);
  int result = 1500 + (value - 180) * 1;
  //Serial.println(result);
  pan.writeMicroseconds(result);
}

void handlePreviousState()
{
  switch(state)
  {
    case GOT_V:
      processVertical(currentValue);
      break;
    case GOT_H:
      processHorizontal(currentValue);
      break;
  }
  currentValue = 0;
}

void processIncomingByte (const byte c)
{
  if (isdigit(c))
  {
    currentValue *=10;
    currentValue += c - '0';
  }
  else
  {
    handlePreviousState();

    switch (c)
    {
      case 'V':
        state = GOT_V;
        break;
      case 'H':
        state = GOT_H;
        break;
      default:
        state = NONE;
        break;
    }
  }
}

void loop()
{
  if(Serial.available() > 0) 
  { 
    processIncomingByte(Serial.read());
  } 
  digitalWrite(laser, HIGH);
}

//check out writeMicroseconds 
```

我的 C++ 代码

```
// Program for sending data to serial

#include <iostream>
#include <sstream>
#include <string>
#include <termios.h>
#include <fcntl.h>
#include <math.h>

using namespace std;

//open serial port
int openPort(string path)
{
  int fd; //file descriptor for port
  fd = open(path.c_str(), O_RDWR | O_NOCTTY | O_NDELAY);
  if (fd == -1)
    cerr << "Cannot open port" << endl;
  else
    fcntl(fd, F_SETFL, 0);
  return (fd);
}

//set options for an open serial port
void setOptions(int fd)
{
  struct termios options;
  tcgetattr(fd, &options);
  cfsetispeed(&options, B9600);
  cfsetospeed(&options, B9600);

  //No parity 8N1
  options.c_cflag &= ~PARENB;
  options.c_cflag &= ~CSTOPB;
  options.c_cflag &= ~CSIZE;
  options.c_cflag |= CS8;

  //No flow control
  options.c_cflag &= ~CRTSCTS;

  //Turn off s/w flow control
  options.c_iflag &= ~(IXON | IXOFF | IXANY);

  //Turn on read and ignore ctrl lines
  options.c_cflag |= (CLOCAL | CREAD); 

  if( tcsetattr(fd, TCSANOW, &options) < 0) { 
    cerr << "Could not set attributes" << endl; 
  }
}

//write to serial port
void writePort(int fd, string data)
{
  int n = write(fd, data.c_str(), 9);
  if (n < 0)
    cerr << "Cannot write to port" << endl;
}

int main() {
  string path = "/dev/tty.usbmodemfd131";
  //string path = "/dev/tty.usbmodemfa141";
  int fd = openPort(path);
  setOptions(fd);

  stringstream ss;
  string output;
  unsigned short vertical = 0;
  unsigned short horizontal = 0; 
  unsigned short freq = 10;

  for(int i = 0; i < 360; i++) {
    vertical = ((cos(i * freq * ((M_PI)/180))) + 1) * 90;
    horizontal = ((sin(i * freq * ((M_PI)/180))) + 1) * 90;
    ss << "V" << vertical << "H" << horizontal << endl; 
    output = ss.str();
    ss.str("");
    writePort(fd, output);
//    cout << output; //DEBUG
  }

  close(fd);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:34:33.053

设备内部的“processIncomingByte”循环可能遇到了速度问题，因为您在收到新模式后立即处理先前的状态（handlePreviousState）。

该问题可能是由于在相应函数中执行 Serial.print 而导致值数据字节仍连续从 PC 传入。串行打印在微控制器逻辑中是一个相对较慢的过程。

我对Arduino硬件不熟悉，但是一些低端的微控制器板正在使用bitbanging方法执行软件串行接口，所以当你发送时，接收完全停止。要验证这一点，您可以注释 Serial.print 以查看它是否有帮助。

无论如何，在传入数据流的中间进行冗长的处理总是有问题的，除非您在设备中有一个具有大量 FIFO 缓冲区的硬件串行接口。

解决此问题的正确方法是首先在缓冲区中接收整个消息，然后仅在收到消息结束标记时处理它。例如，将您的消息插入到 [] 对中，如 [V180H90]。在“[”上重置缓冲区并在收到“]”后处理缓冲区。当您将字节收集到缓冲区中时，请确保您还检查缓冲区溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:01:56.147

显然，您的设备读取/处理数据的速度比通过串行端口发送数据的速度要慢。我在这里看到几个可能的解决方案：

1) 实现流控，以阻塞方式通过串口发送数据。发送后您仍然需要等待，但只需等待设备读取和处理数据所需的时间即可。

2) 实现双向通信，以便您的设备发送确认消息（即任何单个 ASCII 符号）以表明它已准备好接受数据。

3）将您的代码分为两个并行部分，即：主循环（或ISR）仅从串行端口读取数据并将其存储在[环形缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)中，另一个循环轮询环形缓冲区并在有数据时立即从中获取/处理数据一些可用的数据。这是三者中最困难的解决方案，因为您需要两个单独的线程（或一个线程和一个 ISR）并保护环形缓冲区免受并发访问，但也是最强大和最灵活的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:49:59.903

If you just shove data down the port's throat, it'll do its best not to set on fire, but the excess data isn't going to be sent. After all, the port operates at a finite speed and is a pretty limited and dump device.

So, before sending a character to the port you need to check the status of the port to see if it's actually ready to accept another character of data for transmission. Some serial ports can even generate interrupts when they can take more data to help you avoid wasteful status polling.

Also, sometimes two serial ports on the two devices can be connected with an extra pair of non-data signals (`RTS` and `CTS`) to indicate whether the receiving side is ready to receive more data. If you have those connected and your device is using them to indicate its readiness, your program should take the state of the device's `CTS` into account as well.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T06:19:25.443

您将数据写入串行设备的速度太快，并且设备本身吐出数据的速度比您在设备另一侧读回数据的速度要快。

解决这个问题的正确方法是限制对串行设备的写入速度，以避免数据泛滥。

# python - 日期时间在 xml 中不起作用

> ID：14701317
> 
> 赞同：2
> 
> 时间：2013-02-05T06:16:55.397
> 
> 标签：python, xml, openerp

我正在使用 OpenERP-7.0 和 Ubuntu-10.04。

以下代码在 6.0 和 6.1 中运行良好，但在 7.0 中出现错误

这是我的代码：

```
 <record model="ir.actions.act_window" id="action_leave_not_accounted">
        <field name="name">Leaves to be Accounted</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.holidays</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('date_from','&gt;=',(datetime.date.today()-relativedelta(weeks=1)).strftime('Y-%m-%d')),('holiday_status_id.name','in',['Annual','Termination','Resignation'])]</field>
        <field name="view_id" ref="hr_holidays.view_holiday_simple"/>
    </record> 
```

我面临以下错误：

`7.0/server/openerp/tools/safe_eval.py", line 241, in safe_eval return eval(test_expr(expr, _SAFE_OPCODES, mode=mode), globals_dict, locals_dict) File "", line 1, in <module> NameError: name 'datetime' is not defined`

谁能帮帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:57:27.717

您只能在 XML Parsing 中使用时间。

> [('date','<',time.strftime('%Y-%m-%d %H:%M:%S'))]

因此，您已将代码从 V6.1 修改为 V7.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:01:22.357

在 7.0 中使用`context_today()`而不是`datetime.date.today()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:19:29.770

试试这个它会工作：

```
<field name="domain">[('date_from', '&lt;', (context_today()-datetime.timedelta(weeks=1)).strftime('%Y-%m-%d'))]</field> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:52:21.033

在 OpenERP 7 中它`DateTime.today()`不是`datetime.date.today()`。

# android - Android 本地化代码列表

> ID：14701321
> 
> 赞同：0
> 
> 时间：2013-02-05T06:17:04.623
> 
> 标签：android, localization

你知道android中使用的以下国家的本地化密钥吗？

安哥拉 法国 葡萄牙 阿根廷 比利时 巴西 保加利亚 加拿大 克罗地亚 丹麦 德国 西班牙 希腊 爱尔兰 意大利 卢森堡 马提尼克 墨西哥 黑山 Nederland Nouvelle Caledonie Pays Bas 波兰 罗马尼亚 苏格兰 新加坡 斯洛伐克 斯洛文尼亚 瑞士 瑞士 英国 美国 阿尔及利亚 奥地利 刚果 英国 Espagne 芬兰/芬兰 瓜德罗普 圭亚那 匈牙利 冰岛 以色列 Lettonie拉脱维亚 立陶宛 摩洛哥 莫里斯 马约特 波利尼西 法兰西 大溪地 马耳他共和国 澳大利亚 挪威 瑞典 爱沙尼亚 / Eesti

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:03:21.490

在这里，您可以找到带有本地化代码的大量支持语言列表：

[Android 上支持的语言/区域列表是什么？](https://stackoverflow.com/questions/7973023/what-is-the-list-of-supported-languages-locales-on-android)

希望这对你有用。

# java - Apache POI - 如何使用选项保护工作表？

> ID：14701322
> 
> 赞同：15
> 
> 时间：2013-02-05T06:17:05.230
> 
> 标签：java, excel-2007, apache-poi

我正在使用 Apache POI 生成 Excel 文件 (2007)。我想要的是保护工作表，但启用了一些选项。选项是指当您尝试保护 Excel 应用程序中的工作表时的复选框列表（在“允许此工作表的所有用户：”标签下）。具体来说，我想启用“选择锁定/解锁的单元格”、“格式化列”、“排序”和“允许自动筛选”。非常感谢！:D

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T08:20:03.147

在 Apache POI 3.9 中，您可以通过启用锁定功能来使用 XSSF 表保护。即使您可以留下一些未锁定的 excel 对象，如下面的情况我遗漏了未锁定的 excel 对象（即文本框）而其余部分被锁定。

```
 private static void lockAll(Sheet s, XSSFWorkbook workbookx){
    String password= "abcd";
    byte[] pwdBytes = null;
    try {
        pwdBytes  = Hex.decodeHex(password.toCharArray());
    } catch (DecoderException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
    XSSFSheet sheet = ((XSSFSheet)s);
    removePivot(s,workbookx);
    sheet.lockDeleteColumns();
    sheet.lockDeleteRows();
    sheet.lockFormatCells();
    sheet.lockFormatColumns();
    sheet.lockFormatRows();
    sheet.lockInsertColumns();
    sheet.lockInsertRows();
    sheet.getCTWorksheet().getSheetProtection().setPassword(pwdBytes);
    for(byte pwdChar :pwdBytes){
        System.out.println(">>> Sheet protected with '" + pwdChar + "'");
    }
    sheet.enableLocking();

    workbookx.lockStructure();

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-01T11:13:17.613

您可能会遇到无法选择哪些功能，要么全有，要么全无。这是当前 Apache Poi 中的一个已知错误。来源： [https ://issues.apache.org/bugzilla/show_bug.cgi?id=51483](https://issues.apache.org/bugzilla/show_bug.cgi?id=51483)

您可以使用以下解决方法解决此问题：

```
 xssfSheet.enableLocking();
  CTSheetProtection sheetProtection = xssfSheet.getCTWorksheet().getSheetProtection();
  sheetProtection.setSelectLockedCells(true); 
  sheetProtection.setSelectUnlockedCells(false); 
  sheetProtection.setFormatCells(true); 
  sheetProtection.setFormatColumns(true); 
  sheetProtection.setFormatRows(true); 
  sheetProtection.setInsertColumns(true); 
  sheetProtection.setInsertRows(true); 
  sheetProtection.setInsertHyperlinks(true); 
  sheetProtection.setDeleteColumns(true); 
  sheetProtection.setDeleteRows(true); 
  sheetProtection.setSort(false); 
  sheetProtection.setAutoFilter(false); 
  sheetProtection.setPivotTables(true); 
  sheetProtection.setObjects(true); 
  sheetProtection.setScenarios(true); 
```

# java - 根据下拉值隐藏或显示

> ID：14701325
> 
> 赞同：0
> 
> 时间：2013-02-05T06:17:28.727
> 
> 标签：java, ajax, struts2

我有一个下拉菜单，当我从下面的字段中选择一个时，它必须消失。我该怎么做。我是新来的struts。请帮我

```
<td>
    <s:select
      headerKey="none" headerValue="Select UI Controller"
      list="UiControllersMap"
      name="uiController"/>

    <s:fielderror fieldName="uiController" cssClass="customErrorMessage"/>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:54:26.197

从您的问题中不确定哪个字段需要消失：下拉菜单或下面的标签？让我们假设标签。

```
<td>
    <s:select
      id="dropDownId"
      headerKey="none" headerValue="Select UI Controller"
      list="UiControllersMap"
      name="uiController"
      onchange="hideField()"  
      />

    <s:fielderror id="fieldId" fieldName="uiController" cssClass="customErrorMessage"/>
</td>
<script language="text/javascript">
   function hideField() {
      dropDown = document.getElementById("dropDownId");
      fieldError = document.getElementById("fieldId");
      if (dropDown && fieldError) {
         if (dropDown.options[dropDown.selectedIndex].text == fieldError.innerText) {
            fieldError.style.display='none';
         }
         else {
            fieldError.style.display='';
         }
      }
   }
</script> 
```

# iphone - 在 iPhone 中一次选择所有复选框

> ID：14701326
> 
> 赞同：0
> 
> 时间：2013-02-05T06:17:31.837
> 
> 标签：iphone, ios

我有 8 个 checkbox `button`（标题为 A、B、C、D、E、F、G、H）和一个 checkbox `button`（标题为 ' `myButton`'）

当我单击“”复选框时，我想选中所有 8`myButton`个复选框，如果取消选中 8 个复选框中的任何一个，则取消选中“ `myButton`”复选框。

让我知道是否有人有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:26:06.857

给您的复选框标签，例如：1,2,3,...,8 和 9 用于`myButton`复选框。

当你点击`myButton`：

```
if(//If my check box button is not already selected)
{
   //check all
   for (int loop = 1; loop<9;loop++)
   {
     UIButton *check = (UIButton *)[self.view viewWithTag:loop];
     //check that button
   }
}
else
{
   //uncheck all
} 
```

要取消选中，`myButton`您可以使用：

```
UIButton *check = (UIButton *)[self.view viewWithTag:9];
//uncheck it 
```

编辑：

如果您创建了用于放置按钮的中间视图，请使用该视图而不是`self.view`.

```
 UIButton *check = (UIButton *)[placedView viewWithTag:loop]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:40:48.980

```
 //Creating a button

    for (int i = 100; i < 108; i++) {

        UIButton *checkBtn = [UIButton buttonWithType:UIButtonTypeCustom];
        checkBtn.tag = i;
        checkBtn.frame = CGRectMake(15, 10+30*i-100, 250, 30);
        checkBtn.titleLabel.text = [NSString stringWithFormat:@"Btn %d",i];
        [checkBtn setBackgroundImage:[UIImage imageNamed:@"uncheck.png"] forState:UIControlStateNormal];
        [customView addSubview:checkBtn];

    } 
```

全选按钮

```
-(void) selectAll:(id)sender
{
    for (int i = 100; i < 108; i++) {

        UIButton *selectBtn = (UIButton*)[customView viewWithTag:i];
        [selectBtn setBackgroundImage:[UIImage imageNamed:@"check.png"] forState:UIControlStateNormal];

    }
} 
```

# c# - 在 WPF 列表视图中显示数据

> ID：14701334
> 
> 赞同：0
> 
> 时间：2013-02-05T06:17:50.183
> 
> 标签：c#, wpf, listview

我正在开发 wpf 应用程序，其中我有 listview 控件。我对 wpf 很陌生。但设法在 Listview 中添加一些样式并显示水平网格线，如下所示，

```
 <DataTemplate x:Key="IDBorderedCellTemplate">

                <Border BorderBrush="Black" Margin="0,5,0,1"

                BorderThickness="0,0,0,1" >

                    <TextBlock Foreground="MediumBlue" FontFamily="Calibri" Margin="3,0,0,2" Text=""
                />

                </Border>
            </DataTemplate>

 <ListView.View>

                <GridView ColumnHeaderContainerStyle="{StaticResource myHeaderStyle}">

                    <!-- Product ID -->

                    <GridViewColumn

          CellTemplate="{StaticResource IDBorderedCellTemplate}"> 
```

现在我的问题是我可以在加载窗口时在列表视图中显示项目，它只显示网格线。由于我的要求是我有一个浏览文件的浏览按钮，因此这些浏览的文件必须显示在列表视图中。

在加载事件中，我添加了以下代码行，

```
 try
    {

        listviewitem = new ListViewItem();
        //displays only the filename in the listview
        listviewitem.Content = System.IO.Path.GetFileName(_name);
        _listFiles.Items.Add(listviewitem);
    }
    catch (Exception)
    {
   } 
```

在 xaml 中添加 gridview 设置后，此数据未显示在列表视图中。现在它只显示网格线。任何建议/帮助都是可观的。

问候拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:04:11.387

对于动态/频繁变化的数据，选择 listview 的 ItemsSource 作为 ObservableCollection 或 BindingList，而不是使用 listviewItem。

XAML

```
 <ListView  Name="listView1" ItemsSource="{Binding FileStore}">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="120" Header="Files" DisplayMemberBinding="{Binding}" />
        </GridView>
    </ListView.View>
 </ListView> 
```

C＃

```
 public partial class MainWindow : Window
 {
   public ObservableCollection<string> fileList= new ObservableCollection<string>();

    public MainWindow()
    {
       InitializeComponent();
        this.DataContext = this;
       // Add files to fileList (ObservableCollection)  
    }

    public ObservableCollection<string> FileStore
   {
      get { return fileList; }
   } 
  } 
```

可以将项目添加到 ObservableCollection 任何地方，例如浏览按钮单击或加载。

# php - 如何使用 php ssh exec 将多行内容写入任何 linux 文件系统？

> ID：14701343
> 
> 赞同：0
> 
> 时间：2013-02-05T06:18:50.753
> 
> 标签：php, shell, remote-server

假设有一个包含内容的文件 ( **test.txt** )。

```
testing php data
employee data
country data 
```

我想将此内容写入远程 linux 机器的**/tmp目录中。**我正在使用以下代码

```
 // $con contains all content of the text.txt file
 $con = file_get_contents("C:/wamp/www/test.txt");
 // $ssh is the sshobject for the remote machine
 $ssh->exec('echo "$con" > /tmp/text1.txt'); 
```

它在远程机器上创建一个空文件。我应该使用什么来复制远程机器上的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:22:12.810

检查你的报价。

```
$ssh->exec('echo "'.$con.'" > /tmp/text1.txt'); 
```

$con 不会用单引号解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:23:44.933

你应该写这段代码

```
 // $con contains all content of the text.txt file
 $con = file_get_contents("C:/wamp/www/test.txt");
 // $ssh is the sshobject for the remote machine
 $ssh->exec("echo '{$con}' > /tmp/text1.txt"); 
```

# android - SQLite DROP 表回滚

> ID：14701345
> 
> 赞同：6
> 
> 时间：2013-02-05T06:19:05.800
> 
> 标签：android, sqlite

在 Android SQLite 中，我有一张桌子`MyTable`。错误地我在升级数据库后放弃了它。

如果可能的话，我怎样才能回滚那个丢弃的表。

任何好的答案都会被接受。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:20:43.720

删除表*不是*可恢复的操作，除非作为回滚事务的一部分执行（这似乎*不是*您的特定情况的场景）。

从[SQLite 文档](http://sqlite.org/lang_droptable.html)：

> DROP TABLE 语句删除使用 CREATE TABLE 语句添加的表。指定的名称是表名。
> 
> 删除的表从数据库模式和磁盘文件中完全删除。***该表无法恢复。***与表关联的所有索引和触发器也将被删除。

这不是*完整*的图片，因为可以看到回滚事务下的行为（在[https://sqliteonline.com/](https://sqliteonline.com/)上测试）：

```
drop table if exists paxtable;
create table paxtable (paxcolumn integer);
insert into paxtable values (42);
begin transaction;
drop table paxtable;
rollback;
select paxcolumn from paxtable; 
```

这表明该表在回滚后仍然存在。如果您提交而不是回滚（或者如果您完全删除事务控制），则表已经死亡，过期，去见它的制造者，洗牌了这个致命的线圈，<在此处插入您最喜欢的隐喻>。

因此，由于您*没有*将其作为回滚事务的一部分进行（正如表实际上已经消失的事实所证明的那样*）*，您需要从头开始重新创建它（或者如果可能的话从备份中重新创建它）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T06:21:41.313

澄清：

尽管您可以提交或回滚诸如“插入”或“删除”之类的 DML 语句（前提是您在事务中执行此操作），但通常您不能回滚诸如“更改表”或“删除表”之类的 DDL 语句。

在大多数情况下，大多数数据库都是如此：Oracle、MSSQL、mySQL 等。

sqlite有一个*例外*：如果您`drop table`在事务中，那么 a`rollback`将*恢复*该表。

否则（根据 sqlite 手册）：

> *   [http://sqlite.org/lang_droptable.html](http://sqlite.org/lang_droptable.html)
> 
> DROP TABLE 语句删除使用 CREATE TABLE 语句添加的表。指定的名称是表名。删除的表从数据库模式和磁盘文件中完全删除。该表无法恢复。与表关联的所有索引和触发器也将被删除。

PS：

如果您有兴趣，此链接将讨论“DDL”、“DML”和相关的首字母缩略词：

*   [http://www.orafaq.com/faq/what_are_the_difference_between_ddl_dml_and_dcl_commands](http://www.orafaq.com/faq/what_are_the_difference_between_ddl_dml_and_dcl_commands)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-05T22:47:12.200

我认为对这个问题有两种不同的解释，我想确保两者都得到回答和最终证明，因为这仍然是**sqlite drop table rollback**的顶级搜索结果（并且指向 SQLite 文档的链接似乎也具有误导性）。

对于第一个问题，您**可以**回滚事务范围内发生的删除表 DDL 操作，即

```
// with connection created
var transaction = connection.BeginTransaction();
try {
    // create a table
    // drop a different table
    transaction.Commit(); // go ahead and commit if everything is successfully
}
catch
{
    transaction.Rollback(); // rollback in case of error
} 
```

为了确认这是与语言无关的相同行为，下面是使用 SQ Lite 命令行 shell 的相同行为：

```
sqlite3 demo
// outside transaction scope
create table tbl1( col varchar(10));
// list the current tables
.tables
// start a transaction that wraps both your DDL commands 
begin transaction;
enter code here
create table tbl2 (col varchar(10));
drop table tbl1;
rollback;
.tables 
```

期望最终`list tables`命令仍应返回，`tbl1`因为`create table`和`drop table`命令都已回滚。另一种说法是，对于 Oracle 中存在的可以回滚的操作，SQLite 不受相同的 DML/DDL 区别的约束。

对于问题的第二种解释，即，我可以恢复一个在事务范围之外删除的表（这也需要您作为开发人员以及灾难恢复可能拥有的“哦 S#%T”经验），对 SQ Lite 文档的引用是适当的：

> 删除的表从数据库模式和磁盘文件中完全删除。该表无法恢复。与表关联的所有索引和触发器也将被删除。

# sql - 我可以在 Postgres 中使用来自其他表的聚合数据更新表中的多个字段吗？

> ID：14701349
> 
> 赞同：1
> 
> 时间：2013-02-05T06:19:07.997
> 
> 标签：sql, postgresql

我想出了如何一次处理一个字段（请参阅下面的两个更新查询）。有没有办法在一个查询中做到这一点？

```
UPDATE upload_data sd
SET
  photo_count =
  (SELECT sum(photo_count) 
  FROM media_uploads mu
  WHERE mu.user_id=sd.user_id
  AND mu.date=current_date
  GROUP BY mu.user_id);

UPDATE upload_data sd
SET
  video_count =
  (SELECT sum(video_count) 
  FROM media_uploads mu
  WHERE mu.user_id=sd.user_id
  AND date_trunc('month', mu.date)=date_trunc('month', sd.date)
  GROUP BY mu.user_id); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:22:56.637

我认为你可以通过`JOIN`with来做到这一点`UPDATE`。在 postgresql 中作为[`UPDATE`语法](http://www.postgresql.org/docs/current/static/sql-update.html)，它将是这样的：

```
UPDATE upload_data sd
SET  sd.photo_count = m.photo_count,
     sd.video_count = m.video_count
FROM
(
  SELECT 
    user_id, 
    sum(photo_count) AS  photo_count, 
    SUM(video_count) AS video_count
  FROM media_uploads 
  WHERE mu.date = current_date
  GROUP BY user_id
) AS m 
WHERE m.user_id = sd.user_id; 
```

# sonarqube - 声纳，如何排除二进制文件

> ID：14701355
> 
> 赞同：2
> 
> 时间：2013-02-05T06:19:32.287
> 
> 标签：sonarqube

我正在导入我的完整二进制文件夹，其中包含我不想分析的类的二进制文件，以及我也想分析的测试。尽管 Sonar 文档声明 sonar.properties 属性支持逗号分隔值，但它是不正确的。如果我尝试包含许多文件夹，用逗号分隔，则分析中只会包含第一个文件夹路径。

我知道在 Sonar 仪表板中您可以排除源文件，但它没有说明任何关于排除 .class 文件的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:44:11.880

> 我知道在 Sonar 仪表板中您可以排除源文件，但它没有说明任何关于排除`.class`文件的内容。

在“ [SONAR - 如何排除在“sonar.test”下定义的包</a>”之后，指令如下：](https://stackoverflow.com/a/8238642/6309)

 [```
/path/to/class/dir/**/*.class 
```](https://stackoverflow.com/a/8238642/6309) 

[应该排除所有`.class`文件。
它应该与`sonar.exclusions`](https://stackoverflow.com/a/8238642/6309) [Analysis Parameter](http://docs.codehaus.org/display/SONAR/Analysis+Parameters)相当相似。

# android - 使用处理程序将所有图像从 sdcard 文件夹一张一张加载到 imageview 但只显示一张图像

> ID：14701361
> 
> 赞同：0
> 
> 时间：2013-02-05T06:20:00.473
> 
> 标签：android, imageview, handler, android-sdcard

我正在尝试从 sdcard 文件夹图像中一张一张地加载图像，并在几秒钟后使用处理程序，它们会自动更改但不会更改其他图像仅显示一张图像

在这里，我将用于获取和设置图像的处理程序代码放在创建活动中

> HomeActivity.java

```
final Handler imagehandler = new Handler();

                    Runnable runnable;

                    runnable = new Runnable()
                    {

                        int i=0;
                        @SuppressLint("SdCardPath")
                        public void run()
                        {   // slider image run

                            File dir = new File("/mnt/sdcard/images/");
                            File file[]=dir.listFiles();

                            for (int i=0;i<file.length;i++)
                            {

                                Drawable d = (Drawable) Drawable.createFromPath(file[i].toString());
                                imageslider.setImageDrawable(d);
                                imagehandler.postDelayed(this, 4000);

                          // for interval
                        }

                    };
                    imagehandler.postDelayed(runnable,10);
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:29:35.043

在此之前从 Runnable 中删除 for 循环将始终显示 imageView 中的最后一个图像。而不是 for 循环使用计数器来显示图像，例如：

```
 File dir = new File("/mnt/sdcard/images/");
 File file[]=dir.listFiles();

public static int count=0;
new Handler().postDelayed(new Runnable() {
                public void run() {

                     if(count<file.length){

                       Drawable d = (Drawable) 
                           Drawable.createFromPath(file[count].toString());

                       imageslider.setImageDrawable(d);

                        count++;  //<<< increment counter here
                     }
                    else{
                          // reset counter here
                          count=0;
                     }

                }
            }, 4000); 
```

# java - 在junit测试中获取一个类作为javax.lang.model.element.Element

> ID：14701362
> 
> 赞同：4
> 
> 时间：2013-02-05T06:20:09.653
> 
> 标签：java, class, testing, annotation-processing

我想测试我的实用程序类 ElementUtils，但我不知道如何将类作为元素。在 AnnotationProcessors 中，我使用以下代码获取我的元素

```
Set<? extends Element> elements = roundEnvironment.getElementsAnnotatedWith(annotation); 
```

但由于 RoundEnvironment 在测试中不可用，这不是一个选项。

有没有办法将一个类作为 javax.lang.model.element.Element 获取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-10T05:14:56.267

您可以使用 JUnit @Rule 在测试期间调用编译器运行，此时您可以使用 Types 和 Elements 实用程序类来获取 TypeMirror 和 Element 实例。

这样的规则已经创建并且是[http://github.com/google/compile-testing](http://github.com/google/compile-testing)的一部分，可以这样使用：

```
public @Rule CompilationRule rule = new CompilationRule();
private Elements elements;
private Types types;

@Before
public void setup() {
  elements = rule.getElements();
  types = rule.getTypes();
}

@Test void testStuff() {
  TypeElement typeElement = elements.getTypeElement("some.fully.qualified.ClassName");
  // do stuff.
} 
```

可以在公共子模块的[http://github.com/google/auto](http://github.com/google/auto)项目中找到一些您可以操作（无论是在测试中还是在其他方面）TypeMirror 和 Element 实例的东西，其中包含用于管理这些的实用程序java.lang.model 类方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T17:49:21.397

`Element`实例仅在中间编译有效。[`equals()`](http://docs.oracle.com/javase/7/docs/api/javax/lang/model/element/Element.html#equals%28java.lang.Object%29)声明“元素的身份涉及隐式状态”的文档，在`javac`编译完成后实际上在实现中无效。因此，如果您试图保存对`Element`实例的引用并将它们与`Element`测试中的其他实例进行比较，那么它不会起作用。

也就是说，如果您将 a转换为 a ，您*确实*具有一定的灵活性。然后，您可以手动调用和阶段并使用从 .`javax.tools.JavaCompiler.CompilationTask``com.sun.source.util.JavacTask``parse()``analyze()``Element``Elements``JavacTask.getElements()`

# c - 两个的互补表示是否普遍独立于平台？

> ID：14701376
> 
> 赞同：4
> 
> 时间：2013-02-05T06:21:03.113
> 
> 标签：c, memory, language-lawyer, twos-complement, memset

将一块内存初始化为零是惯用的

```
memset(p, 0, size_of_p); 
```

当我们想将其初始化为负一时，我们可以：

```
memset(p, -1, size_of_p); 
```

不管 p 是什么类型，因为在二进制的互补表示中，减一是 0xff 表示 8 位整数，0xffff 表示 16 位，0xffffffff 表示 32 位。

我担心的是，这种两者的互补表示是否普遍适用于现代计算机领域？我可以期望这样的代码独立于平台并且足够健壮以移植到其他平台吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:29:14.560

不，ISO C 标准允许三种表示负数的方案：

*   二进制补码；
*   个的补码；和
*   符号/大小。

但是，您应该记住，我已经*很久*没有看到使用这两种不太常见的方案的平台了。我会说所有现代实现都使用二进制补码。

如果您想 100% 便携，您只需要关心这一点。如果您是那种乐于 99.99999% 便携的人，请不要担心。

* * *

另请参阅有关[补充 Unisys 2200 的信息](https://stackoverflow.com/questions/12276957/are-there-any-non-twos-complement-implementations-of-c)（在 2010 年仍然有效）和解释布局的[这个答案。](https://stackoverflow.com/questions/3952123/representation-of-negative-numbers-in-c/3952262#3952262)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:29:19.357

简单的答案是肯定的，但更好的答案是你过早地进行了优化。

编写显而易见的代码，而不是您认为快速的代码：

```
 for(i = 0; i < p; i++)
    array[i] = -1; 
```

将由优化编译器自动转换为可能的最快表示形式（在 VS 中，当 p 足够大时它将成为一个 memset），它可以执行您想要的操作，而无需考虑这种过早的优化是否始终有效。

# php - Paypal IPN 返回无效且没有数据

> ID：14701377
> 
> 赞同：0
> 
> 时间：2013-02-05T06:21:06.683
> 
> 标签：php, drupal, paypal, paypal-ipn

我昨天也有这个问题，但是对于沙盒，但有人建议我沙盒有问题，我应该用 live paypal 进行测试。

这是条件——

我有一个 Drupal 表单，我在其中收集一些数据，我从中进行查询并将其发送到带有如下 URL 的贝宝——

```
$form_state['redirect'] = 'https://www.paypal.com/cgi-bin/webscr?' .$query; 
```

其中查询变量的结果携带——

```
cmd=_xclick&business=ctaep.austin%40gmail.com&page_style=Primary&bn=PP-DonationsBF&item_name=Membership¤cy_code=USD&no_shipping=1&tax=0&lc=US&rm=1&return=http%3A%2F%2Fctaep-test.kr001.us%2F%3Fq%3Dpaypal%2Fpayment&cancel_return=http%3A%2F%2Fctaep-test.kr001.us%2F%3Fq%3Duser%2Fregister&uname=Raj_vm&email=rajeevkr.dei%40gmail.com&user_type=General&first_name=Rajeev&last_name=Kumar&comp_name=&address1=sector+27&address2=&city=noida&state=ca&zip=201301&phone=9650361380&mobile=&fax=&amount=0.01&item_number=1 
```

填写表格并提交后，我被转发到贝宝，我在那里付款，然后我不得不按下返回按钮（虽然我也通过查询发送了返回路径），

状态为无效，因为被调用以处理 IPN 的函数中的条件始终处于无效条件。这是代码 -

```
function paypal_payment_paypal_ipn_callback(){  
  header("Content-type: text/html");
  header("Expires: Wed, 29 Jan 1975 04:15:00 GMT");
  header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
  header("Cache-Control: no-cache, must-revalidate");
  header("Pragma: no-cache");

  watchdog('paypal', '1');

  // read the post from PayPal system and add 'cmd'
  $req = 'cmd=_notify-validate';

  foreach ($_POST as $key => $value) {        
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
  }

  // post back to PayPal system to validate
  $header = '';
  $header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
  $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
  $header .= "Host: www.paypal.com\r\n";
  $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
  $fp =  fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

  if (!$fp) {
    watchdog('paypal', 'HTTP error');
  } 
  else 
  {
    fputs ($fp, $header . $req);
    watchdog('paypal-fp-else-', $header . $req);
    dpm($_POST['uname']);
    dpm($_POST['user_type']);
    while (!feof($fp)) {
      watchdog('paypal', '3');
      watchdog('pay_status',$res);      
      if (strcmp ($res, "VERIFIED") == 0) {
        watchdog("verified");
        watchdog('paypal', '4');

        //Information about you:
        $receiver_email = $_POST['business'];

        //Information about the transaction:
        $item_name = $_POST['item_name'];
        $item_number = $_POST['item_number'];
        $payment_status = $_POST['payment_status'];
        $payment_amount = $_POST['mc_gross'];
        $payment_currency = $_POST['mc_currency'];
        $txn_id = $_POST['txn_id'];
        $receiver_email = $_POST['receiver_email'];
        $payer_email = $_POST['payer_email'];

        $user_name = $_POST['uname'];
        $user_email = $_POST['email'];
        $user_type = $_POST['user_type'];
        $first_name = $_POST['first_name'];
        $last_name = $_POST['last_name'];
        $company_name = $_POST['comp_name'];
        $address_address_line_1 = $_POST['address1'];
        $address_address_line_2 = $_POST['address2'];
        $address_city = $_POST['city'];
        $address_state = $_POST['state'];
        $address_zip = $_POST['zip'];
        $user_phone = $_POST['phone'];
        $user_mobile = $_POST['mobile'];
        $user_fax = $_POST['fax'];        

        // process payment
        $password = user_password(8);
        $fields = array(
          'name' => $user_name,
          'mail' => $user_email,
          'pass' => $password,
          'status' => 1,
          'init' => $user_email,
          'roles' => array(
            DRUPAL_AUTHENTICATED_RID => $user_type,),
          'field_first_name' => array(
              LANGUAGE_NONE => array(
                  array('value' => $first_name))),
          'field_last_name' => array(
              LANGUAGE_NONE => array(
                  array('value' => $last_name))),
          'field_company_name' => array(
              LANGUAGE_NONE => array(
                  array('value' => $company_name))),
          'field_address_line_1' => array(
              LANGUAGE_NONE => array(
                  array('value' => $address_address_line_1))),
          'field_address_line_2' => array(
              LANGUAGE_NONE => array(
                  array('value' => $address_address_line_2))),
          'field_user_city' => array(
              LANGUAGE_NONE => array(
                  array('value' => $address_city))),
          'field_user_state' => array(
              LANGUAGE_NONE => array(
                  array('value' => $address_state))),
          'field_user_zip' => array(
              LANGUAGE_NONE => array(
                  array('value' => $address_zip))),
          'field_phone_number_' => array(
              LANGUAGE_NONE => array(
                  array('value' => $user_phone))),
          'field_mobile_number_' => array(
              LANGUAGE_NONE => array(
                  array('value' => $user_mobile))),
          'field_fax_number_' => array(
              LANGUAGE_NONE => array(
                  array('value' => $user_fax))),
       );
      $account = user_save('', $fields);
      watchdog("user registered");
      }
      elseif (stripos($res, "INVALID") == 0) {
        watchdog('Res value--', stripos($res, "INVALID"));
        watchdog('paypal', 'INVALID');
      }
      else{
        watchdog("Not Verified nor Invalid");
      }
    }
    fclose ($fp);
  }
  return 'Transaction Complete';
} 
```

我相信，即使状态是无效的，我也应该得到我发送到那里的数据作为回报，但是，当我试图通过`**$_POST**`（你可以在 else 部分的 while 循环之前看到它）来获取它时，我收到错误“未定义指数”。

编辑 - -

我尝试转储 $_POST 变量，它只是在数组中返回我返回路径，该路径为 14 个字符。

我不知道该怎么办..

我可以从任何人那里得到任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:08:05.733

根据[https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro)中的“IPN 消息和响应示例”段落，您需要 POST 与您*相同的字符串*已收到。IE

> 对于 Express Checkout 进行的 19.95 美元购买，PayPal 会发送一条类似于以下消息的消息：
> 
> mc_gross=19.95&protection_eligibility=Eligible&address_status=confirmed&payer_id=LPLWNMTBWMFAY&tax=0.00&address_street=1+Main+St&payment_date=20%3A12%3A59+Jan+13%2C+2009+PST&payment_status=Completed&charset=windows-1252&address_zip=95131&first_name=Test&mc_fee=0.88&address_country_code=US&address_name =Test+User¬ify_version=2.6&custom=&payer_status=verified&address_country=United+States&address_city=San+Jose&quantity=1&verify_sign=AtkOfCXbDm2hu0ZELryHFjY-Vb7PAUvS6nMXgysbElEn9v-1XcmSoGtf&payer_email=gpmac_1231902590_per%40paypal.com&txn_id=61E67681CH3238416&payment_type=instant&last_name=User&address_state=CA&receiver_email=gpmac_1231902686_biz%40paypal.com&payment_fee=0.88&receiver_id =S8XGHLYDW9T3S&txn_type=express_checkout&item_name=&mc_currency=USD&item_number=&residence_country=US&test_ipn=1&handling_amount=0.00&transaction_subject=&payment_gross=19.95&shipping=0.00
> 
> 在您可以信任邮件的内容之前，您必须首先验证邮件来自 PayPal。要验证消息，您必须按照接收到的确切顺序发回内容，并在其前面加上命令 _notify-validate，如下所示：
> 
> [https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_notify-validate&mc_gross=19.95&protection_eligibility=Eligible&address_status=confirmed&payer_id=LPLWNMTBWMFAY&tax=0.00&...&payment_gross=19.95&shipping=0.00](https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_notify-validate&mc_gross=19.95&protection_eligibility=Eligible&address_status=confirmed&payer_id=LPLWNMTBWMFAY&tax=0.00&...&payment_gross=19.95&shipping=0.00)

所以：在尝试验证之前不要更改您收到的数据。

# c# - Fluent API 首先在 EF 代码中实现零或一到零或一的关系

> ID：14701378
> 
> 赞同：37
> 
> 时间：2013-02-05T06:21:10.067
> 
> 标签：c#, entity-framework, ef-code-first, entity-relationship, fluent

我有两个 POCO 课程：

**订单类别：**

```
public class Order
{
    public int Id { get; set; }
    public int? QuotationId { get; set; }
    public virtual Quotation Quotation { get; set; }
    ....
} 
```

**报价类：**

```
public class Quotation
{
    public int Id { get; set; } 
    public virtual Order Order { get; set; }
    ....   
} 
```

*   每一个`Order` **都可以**由一个或零个引用组成，并且
*   每个报价**都可能**导致一个订单。

所以我有一个“一或零”到“一或零”的关系，我该如何通过API在`EF`代码中实现这一点？`Fluent`

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-11T19:18:29.560

通过将 pocos 更改为：

```
public class Order
{
    public int OrderId { get; set; }
    public virtual Quotation Quotation { get; set; }
}
public class Quotation
{
    public int QuotationId { get; set; }
    public virtual Order Order { get; set; }
} 
```

并使用这些映射文件：

```
public class OrderMap : EntityTypeConfiguration<Order>
{
    public OrderMap()
    {
        this.HasOptional(x => x.Quotation)
            .WithOptionalPrincipal()
            .Map(x => x.MapKey("OrderId"));
    }
}

public class QuotationMap : EntityTypeConfiguration<Quotation>
{
    public QuotationMap()
    {
        this.HasOptional(x => x.Order)
            .WithOptionalPrincipal()
            .Map(x => x.MapKey("QuotationId"));
    }
} 
```

我们将拥有这个数据库（这意味着 0..1-0..1）：

![在此处输入图像描述](../Images/587f209259c77a93f2e7e7475630ec8d.png)

特别感谢（[瓦希德·纳西里先生](http://www.dotnettips.info/)）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-11-07T06:38:27.800

@Masoud 的程序是：

```
modelBuilder.Entity<Order>()
            .HasOptional(o => o.Quotation)
            .WithOptionalPrincipal()
            .Map(o => o.MapKey("OrderId"));

modelBuilder.Entity<Quotation>()
            .HasOptional(o => o.Order)
            .WithOptionalPrincipal()
            .Map(o => o.MapKey("QuotationId")); 
```

它给：

![在此处输入图像描述](../Images/2101f4aaaef314b39a52ca85c26c5d98.png)

通过将代码更改为：

```
modelBuilder.Entity<Order>()
            .HasOptional(o => o.Quotation)
            .WithOptionalPrincipal(o=> o.Order); 
```

它给：

![在此处输入图像描述](../Images/c6945e4a2a0f3e848863ab137ed21cf9.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-05T13:43:11.260

请参阅[http://msdn.microsoft.com/en-us/data/jj591620](http://msdn.microsoft.com/en-us/data/jj591620) EF 关系

一本优秀的书 [http://my.safaribooksonline.com/book/-/9781449317867](http://my.safaribooksonline.com/book/-/9781449317867)

这是 2010 年 12 月开发人员的帖子。但仍然相关 [http://social.msdn.microsoft.com/Forums/uk/adonetefx/thread/aed3b3f5-c150-4131-a686-1bf547a68804](http://social.msdn.microsoft.com/Forums/uk/adonetefx/thread/aed3b3f5-c150-4131-a686-1bf547a68804) 上面的文章是一个很好的总结或这里的可能组合。

依赖表具有来自主表的键的解决方案是可能的。

如果您想要在 PK/FK 场景中两者都是主体的独立密钥，我认为您不能使用 Fluent API 在代码中执行此操作。如果他们共享一个密钥，你就可以了。1:1 可选假设依赖项使用来自 Primary 的密钥。

但是因为您需要先保存其中一个表。您可以使用代码检查其中一个外键。或者在代码首先创建它之后将第二个 Foreign 添加到数据库。

你会靠近的。但是，如果您希望两者都是外键，EF 会抱怨外键冲突。本质上，A 取决于 B 取决于 A EF 不喜欢，即使这些列在 DB 上可以为空并且在技术上是可行的。

这里使用这个测试程序来试一试。只需注释掉 Fluent API 的内容即可尝试一些选项。 **我无法让 EF5.0 与 INDEPENDENT PK/FK 0:1 到 0:1 一起工作，** 但当然有一些合理的折衷方案，正如所讨论的那样。

```
using System.Data.Entity;
using System.Linq;
namespace EF_DEMO
{
class Program
{
    static void Main(string[] args) {
        var ctx = new DemoContext();
        var ord =  ctx.Orders.FirstOrDefault();
        //. DB should be there now...
    }
}
public class Order
{
public int Id {get;set;}
public string Code {get;set;}
public int? QuotationId { get; set; }   //optional  since it is nullable
public virtual Quotation Quotation { get; set; }
  //....
}
public class Quotation
{
 public int Id {get;set;}
 public string Code{get;set;}
// public int? OrderId { get; set; }   //optional  since it is nullable
 public virtual Order Order { get; set; }
 //...
}
public class DemoContext : DbContext
{
    static DemoContext()
    {
    Database.SetInitializer(new DropCreateDatabaseIfModelChanges<DemoContext>());
    }
    public DemoContext()
        : base("Name=Demo") { }
    public DbSet<Order> Orders { get; set; }
    public DbSet<Quotation> Quotations { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
       modelBuilder.Entity<Order>().HasKey(t => t.Id)
                    .HasOptional(t => t.Quotation)
                    .WithOptionalPrincipal(d => d.Order)
                    .Map(t => t.MapKey("OrderId"));  // declaring here  via MAP means NOT declared in POCO
        modelBuilder.Entity<Quotation>().HasKey(t => t.Id)
                    .HasOptional(q => q.Order)
            // .WithOptionalPrincipal(p => p.Quotation)  //as both Principals
            //        .WithOptionalDependent(p => p.Quotation) // as the dependent
            //         .Map(t => t.MapKey("QuotationId"));    done in POCO.
            ;
    }   
}
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-05T13:34:02.420

改编自这个[答案](https://stackoverflow.com/questions/10108160/entity-framework-code-first-setting-up-one-to-one-foreign-key-association-usin)，试试这个。

首先，修复你的类：

```
public class Order
{
  public int Id {get; set;}
  public virtual Quotation Quotation { get; set; }
  // other properties
}

public class Quotation
{
  public int Id {get; set;}
  public virtual Order Order { get; set; }
  // other properties
} 
```

然后像这样使用流利的API：

```
modelBuilder.Entity<Quotation>()
.HasOptional(quote => quote.Order)
.WithRequired(order=> order.Quotation); 
```

基本上，对于 1:1 或 [0/1]:[0/1] 关系，EF 需要共享主键。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-28T02:59:57.603

> ```
> public class OfficeAssignment
> {
>     [Key]
>     [ForeignKey("Instructor")]
>     public int InstructorID { get; set; }
>     [StringLength(50)]
>     [Display(Name = "Office Location")]
>     public string Location { get; set; }
> 
>     public virtual Instructor Instructor { get; set; }
> } 
> ```
> 
> 关键属性
> 
> Instructor 和 OfficeAssignment 实体之间存在一对零或一的关系。办公室分配仅与分配给它的讲师相关，因此它的主键也是其对 Instructor 实体的外键。但实体框架无法自动将 InstructorID 识别为该实体的主键，因为它的名称不遵循 ID 或 classnameID 命名约定。因此，使用 Key 属性将其标识为键：

[https://www.asp.net/mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net- mvc-应用程序](https://www.asp.net/mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-29T06:24:08.673

使用数据注释：

```
public class Order
{
       [Key]
       public int Id {get; set;}

       public virtual Quotation Quotation { get; set; }
}

public class Quotation
{
     [Key, ForeignKey(nameof(Order))]
     public int Id {get; set;}

     public virtual Order Order { get; set; }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-19T20:55:21.513

（请注意，这是使用 EF 6.4.4。）

只要您不想要外键属性，指定起来就相当简单：

```
modelBuilder
.Entity<Order>()
.HasOptional(o => o.Quotation)
.WithOptionalPrincipal(q => q.Order);

modelBuilder
.Entity<Quotation>()
.HasOptional(q => q.Order)
.WithOptionalDependent(o => o.Quotation); 
```

`WithOptionalPrincipal`请注意这里和的用法`WithOptionalDependent`。这应该在依赖端为您提供一个外键列（示例中的引号），但没有外键属性。如果您想要另一边的外键，请切换“依赖”和“主体”。

（请注意，没有必要同时拥有以上两个定义；`WithOptionalDependent`这意味着另一方是主体，反之亦然，因此如果需要，您可以只使用其中一个，但我发现指定双方的关系有助于防止错误通过双重声明；任何冲突都会导致模型错误，让你知道你错过了一些东西。）

虽然外键列上有索引，但该索引没有唯一约束。虽然可以添加自己的唯一约束（这需要`Key IS NOT NULL`过滤器），但它似乎不起作用，并且在某些情况下更新关系时会出现异常。我认为这与 EF 将在单独的查询中执行其更新的“交换问题”有关，因此强制唯一性将阻止 EF 分两步“移动”密钥。

EF 似乎在内部处理关联本身，没有唯一的 DB 约束：

*   在任一方面，分配已使用的引用会导致引用的其他用法被自动删除。（所以如果你打开上下文的时候已经是A1 <=> B1，然后你写A1 => B2，那么A1 <=> B1被去掉，A1 <=> B2被添加，不管哪边轮到你了。）
*   如果您尝试通过多次分配相同的引用来创建重复键，EF 将抛出一个异常，说“违反多重约束”。（所以在相同的上下文中，您同时编写了 A1 => B1 和 A2 => B1，或者一些类似的冲突映射。）
*   如果您手动更新数据库以创建重复键的情况，当 EF 遇到这种情况时，它会抛出一个异常，说“发生关系多重性约束违规......这是一个不可恢复的错误。”

在 EF6 中似乎不可能将属性映射到外键列（至少使用 Fluent API）。尝试这样做会导致非唯一的列名异常，因为它尝试分别对属性和关联使用相同的名称。

另请注意，拥有两个外键（即：两边各一个）在技术上是不正确的。这样的安排实际上是*两个*0..1 到 0..1 的关联，因为没有什么可以说两端的键应该匹配。如果您通过 UI 和/或某种数据库约束以其他方式强制执行关系，这可能会起作用。

我还注意到，对于 0..1 到 0..1 关联究竟是什么，可能存在误解/误解。这意味着，根据我的理解以及 EF 似乎也考虑它的方式，它是一个 1 对 1 的关联，双方都是可选的。因此，您可以在任何一方拥有没有关系的对象。（而 1 到 0..1 的关联，一侧的对象可以在没有关系的情况下存在，但另一侧的对象总是需要一个对象来关联。）

但是 0..1 到 0..1 并不意味着您可以让关联在一个方向而不是另一个方向上传播。如果 A1 => B1，则 B1 => A1 (A1 <=> B1)。如果不使 A1 与 B1 相关，则无法将 B1 分配给 A1。这就是为什么这个关联可以只使用一个外键。我认为有些人可能试图建立一个不正确的关联（A1 与 B1 相关，但 B1 与 A1 无关）。但这实际上不是一个关联，而是两个 0..1 到 0..1 关联。

# algorithm - 类似于 Unblock Me 的游戏的关卡生成算法

> ID：14701379
> 
> 赞同：1
> 
> 时间：2013-02-05T06:21:15.620
> 
> 标签：algorithm

**对于类似于 Unblock Me 的游戏，什么是体面的关卡生成算法？**

我的第一次尝试是从一个已解决的关卡开始，然后向后工作。我从板右侧出口旁边的红色水平矩形开始。最初，棋盘上的其他棋子为零。因此，我尝试将伪随机添加到所需的片数（比如七）。仅限于水平或垂直部分的关卡不是很有趣，所以我在添加时在水平和垂直部分之间交替。最后，我尝试通过随机移动它们来打乱这些碎片。通过几个示例后，很明显这种方法通常会生成无趣的关卡。最小移动计数也是未知的。

下一次尝试以不同的方式解决问题。级别是随机生成的。然后搜索算法找到解决难题的最小移动数（如果可能的话）。虽然我还没有实现这一点，但我认为它会创建一些有趣的关卡。由于板子相对较小（上限为 10x10），我认为运行时间对于生成与应用程序捆绑的关卡是可以接受的。最小移动计数也是已知的，这对于得分很重要。

我怀疑第一种方法按原样工作。但是，我没有考虑过的变化可能会起作用。我对第二种方法的唯一保留是潜在的代码复杂性。我认为这将是一个带有备忘录表和 BoardState 对象的 BFS。在深入研究第二种方法之前，我想听听一些替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:07:23.350

我会这样做：

*   生成游戏的随机状态，其中红色矩形位于出口旁边
*   计算从该状态开始的棋盘的完整状态空间
*   选择状态空间中距离已解决状态最远的状态之一作为实际问题。我将使用作为距离测量不同棋子的移动次数，即连续计算同一棋子的多次移动为 1
*   如果生成的状态空间太小，移除碎片并重做
*   如果生成的状态空间很大，但从任何状态到解的距离很小，则添加碎片并重做

# c# - 不显示系统的ip地址

> ID：14701380
> 
> 赞同：1
> 
> 时间：2013-02-05T06:21:15.623
> 
> 标签：c#, .net, wmi

以下代码运行成功，但我无法获取系统的 IP 地址。

```
 ManagementObjectSearcher mos=new ManagementObjectSearcher("select IPAddress,IPEnabled from win32_NetworkAdapterConfiguration where IPEnabled=true");
 ManagementObjectCollection moc=mos.Get();
 foreach(ManagementObject mo in moc)
 {
    Console.WriteLine("Variable = {0},Value = {1}  ",
         mo["IPAddress"],mo["IPEnabled"]);
 } 
```

上面的代码结果为

```
 " Variable = System.String[]  ,  Value = True" 
```

你能告诉我如何获得我的系统的IP地址...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:38:38.737

如果您想使用原始代码，请执行以下操作

```
ManagementObjectSearcher mos=new ManagementObjectSearcher("select IPAddress,IPEnabled from win32_NetworkAdapterConfiguration where IPEnabled=true");
 ManagementObjectCollection moc=mos.Get();
 foreach(ManagementObject mo in moc)
 {
    Console.WriteLine("Variable = {0},Value = {1}  ",
         (string[])mo["IPAddress"],mo["IPEnabled"]);
 } 
```

*如果您调试答案，您将看到当您将鼠标放在**“（”**此行**（字符串 []）mo["IPAddress"],mo["IPEnabled"])**外部时，您将看到 IP 地址和MAC地址*

# java - 排除在 Hibernate 对象中加载特定属性

> ID：14701386
> 
> 赞同：3
> 
> 时间：2013-02-05T06:21:54.717
> 
> 标签：java, hibernate, entity, criteria

我有一个实体类

```
class B{
    @ManyToOne(fetch = FetchType.EAGER)
    private A a;
    @ManyToOne(fetch = FetchType.LAZY)
    private C c; 
```

}

在某些情况下，我不想加载对象 A，因为我已经拥有该对象。C 也一样。但这些是我根本不想加载这些对象的特定场景。

有什么方法可以告诉休眠不要加载实体对象的某些属性。{没有 Eager/Fetch 建议。我只是希望这仅在特定情况下发生]

注意：我现在正在使用 Criteria 来获取对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:45:48.140

由于您使用`HQL`的是查询，因此您可以使用“fetch”关键字根据您的条件[在运行时指定您的获取策略，如下所示：](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/performance.html#performance-fetching-profiles)

```
List result = sess.createCriteria(B.class)
    .add( Restrictions.like("name", "yourcondition%") )
    .setFetchMode("a", FetchMode.EAGER)
    .setFetchMode("c", FetchMode.LAZY)
    .list(); 
```

***编辑：***

由于不推荐使用 FetchMode.EAGER 和 FetchMode.LAZY，因此 FetchMode.SELECT 或 FetchMode.JOIN

```
List result = sess.createCriteria(B.class)
    .add( Restrictions.like("name", "yourcondition%") )
    .setFetchMode("a", FetchMode.JOIN)
    .setFetchMode("c", FetchMode.SELECT)
    .list(); 
```

如果你想避免 SELECT 或 JOIN[在这里](https://stackoverflow.com/questions/2934753/avoiding-secondary-selects-or-joins-with-hibernate-criteria-or-hql-query)检查。

# c# - 多绑定作为 XAML 中的资源

> ID：14701391
> 
> 赞同：6
> 
> 时间：2013-02-05T06:22:24.637
> 
> 标签：c#, wpf, xaml, binding, multibinding

是否有可能（如果是的话），将[多值绑定](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)表达式添加到资源中。

我有一个多值绑定，它需要 2 个单独的绑定，以及其中一个绑定中的转换器参数。

我必须将此绑定用于 5 个不同的项目，而这些绑定标签仅在转换器参数上有所不同。休息一切都一样。

我会避免重复多绑定样板标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T01:19:08.753

查看是否有效的简单方法：尝试一下！

```
 <Style TargetType="Button">
        <Setter Property="Content">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource OmgLolzConverter}">
                    <Binding Path="One" Converter="{StaticResource CakeConverter}"/>
                    <Binding Path="Two" Converter="{StaticResource CakeConverter}"/>
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style> 
```

工作正常。

# macos - 用户拖动时如何设置默认 NSDragOperation？

> ID：14701392
> 
> 赞同：1
> 
> 时间：2013-02-05T06:22:31.907
> 
> 标签：macos, cocoa, drag-and-drop, cursor, icons

我正在制作一个拖放代码。我`NSDragOperationGeneric | NSDragOperationMove | NSDragOperationCopy | NSDragOperationLink`对所有拖放代码都使用了模式。我的问题是鼠标光标默认显示为*复制*模式（光标旁边有“+”图标）而不是*普通*模式（没有任何图标），默认情况下没有按下修饰键

我想模仿 Finder 行为，默认情况下不使用修饰键移动文件并使用选项键复制。所以当用户没有按下任何修饰键时，我想将拖动光标显示为普通的。

我怎样才能做到这一点？

# php - CodeIgniter：允许内存耗尽

> ID：14701398
> 
> 赞同：4
> 
> 时间：2013-02-05T06:23:01.157
> 
> 标签：php, codeigniter

我在 CodeIgniter 工作。我想要做的是读取 Excel 文件并保存到数据库。要读取 Excel 文件，我正在使用[这个库](https://github.com/EllisLab/CodeIgniter/wiki/Excel-Reader-Class)。上传后，在读取 Excel 文件时，我收到此错误：

> 致命错误：第 430 行 /home/webscwi1/public_html/projects/OnlineExam/application/libraries/excel_reader.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 71 字节）

无论如何，我可以将内存大小从 12Mb 更改为 512Mb，但我仍然遇到同样的错误。我不知道确切的错误是什么，我想知道这是服务器错误还是代码问题。

附加信息：如果我上传 15 行的文件，它工作正常，但如果我在 Excel 中上传 90 行，我会收到此错误：

```
 $this->load->library('excel_reader');
 $this->excel_reader->read('question/'.$filename);
 $worksheet = $this->excel_reader->worksheets[0]; 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T11:02:18.367

您应该增加内存限制：

*   编辑你的 php.ini 文件

    memory_limit = 512M

或者

*   包括脚本顶部的这一行

    ini_set("memory_limit","512M");

您还应该检查这些行是否在您的 .htaccess 中：

```
php_value memory_limit <value>
php_value upload_max_filesize <value> 
```

它们的值会覆盖 php 配置。所以他们应该反映你的需求，或者干脆被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-02T14:10:31.623

您应该在文件**NameOfProject/.htaccess上添加属性 php_value**

> `<IfModule mod_rewrite.c> php_value memory_limit 256M </IfModule>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T18:59:24.233

这个内存溢出可以是最后一次查询的自动保存，你可以这样`$this->db->save_queries = false;`或者在文件config/database.php中更改为`'save_queries' => FALSE,`

# sharepoint - 将 SQL Server 2012 报告服务与 SharePoint Server 2010 集成时出错

> ID：14701401
> 
> 赞同：0
> 
> 时间：2013-02-05T06:23:12.173
> 
> 标签：sharepoint, sharepoint-2010, reporting-services, ssrs-2012

我有一个安装了 SQL Server 2012 的 VM。另一个用于 SharePoint Server 2010 的 VM。SharePoint 使用 SQL Server 2012 进行配置。除了报告之外，一切都运行良好。我通过运行安装向导添加了 SharePoint 报告功能。引用的链接是：http: [//msdn.microsoft.com/en-in/library/gg492276.aspx#bkmk_install_SSRS_sharedservice](http://msdn.microsoft.com/en-in/library/gg492276.aspx#bkmk_install_SSRS_sharedservice). 已成功完成第 1 部分：以 SharePoint 模式安装 Reporting Services 报表服务器。转到第 2 部分：安装和启动 Reporting Services SharePoint 服务，当在 SharePoint 2010 命令行管理程序中运行 cmdlet Install-SPRSService 时，我遇到了一个错误：术语“Install-SPRSService”未被识别为 cmdlet 的名称，函数、脚本文件或可运行的程序……如何解决？在运行之前我需要激活 SharePoint 中的任何功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:00:02.663

请安装 Sharepoint VM 上链接中提到的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T11:49:23.733

我遇到了同样的问题，我通过安装 SQL 媒体中的“SharePoint 报告服务插件”和“SQL Server 2012 Service Pack 1”解决了这个问题。

# html - modernizr.js 如何与 HTML5 文件通信？

> ID：14701402
> 
> 赞同：-2
> 
> 时间：2013-02-05T06:23:25.760
> 
> 标签：html, css, cordova, modernizr

我想在我的网站上使用modernizr.js。它是如何工作的？它如何与其他js文件通信？我该如何使用它？

它是否适用于使用 PhoneGap 进行移动应用程序开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:41:00.803

> Modernizr 在页面加载时快速运行以检测功能；然后它会创建一个带有结果的 JavaScript 对象，并将类添加到 html 元素中，以便您键入 CSS。Modernizr 支持数十种测试，并且可以选择包含 YepNope.js 用于有条件地加载外部 .js 和 .css 资源。

是的，它确实适用于phonegap。通常，modernizr 所做的只是检查“浏览器”是否具有特定属性并将类应用于 html 标记。因此您可以为支持该功能的浏览器和不支持该功能的浏览器创建样式。

例如

```
cssmasks .icon {
    width: 60px;
    height: 60px;
    margin: 0 auto;
    background-color: #ffcc33;
    display: inline-block;
}
.no-cssmasks .icon {
    width: 60px;
    height: 60px;
    margin: 0 auto;
    display: inline-block;
    background-image: url('http://i.cubeupload.com/VvBVjp.png'); 
}
.cssmasks .icon-note{
    -webkit-mask-image: url('http://i.cubeupload.com/VvBVjp.png'); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:37:02.107

据我所知，它主要用于不支持的浏览器中的 HTML5 或 CSS3。

Modernizr 是一个小型 JavaScript 库，用于检测下一代 Web 技术的本地实现的可用性，即源自 HTML5 和 CSS3 规范的特性。其中许多功能已经在至少一个主流浏览器中实现（大部分在两个或多个浏览器中实现），Modernizr 所做的很简单，就是告诉你当前浏览器是否原生实现了这个功能。

查看此链接 - [http://modernizr.com/docs/#whatis](http://modernizr.com/docs/#whatis)

# android - Paint：如何使用渐变图像或位图图像绘制弧线

> ID：14701405
> 
> 赞同：0
> 
> 时间：2013-02-05T06:23:31.500
> 
> 标签：android, draw, paint, drawrect

我可以使用 Paint 绘制弧线并将一些渐变颜色传递给它，我的问题是我需要使用渐变图像绘制弧线。是否可以使用图像绘制弧线？

如果有怎么办？

这是我当前的代码：

```
Paint nPaint = new Paint();
        nPaint.setAntiAlias(true);
        nPaint.setDither(true);
        nPaint.setStrokeJoin(Paint.Join.ROUND);
        nPaint.setStrokeCap(Paint.Cap.ROUND);
        int gradientStart = getResources().getInteger(R.integer.gradient_start);
        int gradientend = getResources().getInteger(R.integer.gradient_end);

        nPaint.setShader(new RadialGradient(getWidth() / 2, getHeight() / 2, getWidth() / 2,
            gradientStart, gradientend, Shader.TileMode.CLAMP)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:29:54.340

试试这个代码，我希望这对你有帮助

```
 @Override
    protected void onDraw(Canvas canvas) {

        canvas.drawColor(Color.CYAN);
        Paint p = new Paint();
        // smooths
        p.setAntiAlias(true);
        p.setColor(Color.RED);
        p.setStyle(Paint.Style.STROKE); 
        p.setStrokeWidth(5);
        // opacity
        //p.setAlpha(0x80); //

        RectF rectF = new RectF(50, 20, 100, 80);
        canvas.drawOval(rectF, p);
        p.setColor(Color.BLACK);
        canvas.drawArc (rectF, 90, 45, true, p);
    } 
```

# apache - WHM mod_rewrite mod_userdir

> ID：14701407
> 
> 赞同：1
> 
> 时间：2013-02-05T06:23:36.280
> 
> 标签：apache, mod-rewrite, whm

我面临着类似的问题

[mod_rewrite 和 mod_userdir 的问题](https://stackoverflow.com/questions/7661747/problems-with-mod-rewrite-and-mod-userdir)

但是有了WHM，我不知道最好的开始方式。

当 mod_rewrite 应该转到位于 /home/ *user* /public_html 的用户的 userdir 文件时，它会转到 /usr/local/apache/htdocs/。确切的错误是

```
File does not exist: /usr/local/apache/htdocs/index.php, referer: http://<my ip>/~*user*/default.php 
```

我考虑过修改 httpd.conf 但看到很多错误说重新配置 WHM 会删除修改。

我还查看了 WHM 文档并看到了 open_basedir 调整：[http ://docs.cpanel.net/twiki/bin/view/11_32/WHMDocs/TweakPhp](http://docs.cpanel.net/twiki/bin/view/11_32/WHMDocs/TweakPhp)

我想我会先要求避免随机故障排除，因为我在服务器上有实时站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:46:55.637

在我的 .htaccess 中，我有

```
RewriteBase / 
```

我把它改成

```
RewriteBase /~<user>/ 
```

例子：

```
RewriteBase /~myusername/ 
```

现在它正在工作。

# svn - 使用 ant 脚本从 svn 导出文件夹

> ID：14701412
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:23:50.080
> 
> 标签：svn, ant

我在使用 svn 存储库时遇到了一种情况。我想使用 ANT 脚本将多个文件夹从 svn 导出到 C 驱动器中的工作区，但无法配置如何操作。任何人都可以帮助我了解应该使用什么 ant 脚本我写将文件夹从 svn 导出到本地工作区。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:08:08.953

您可以使用[svnant](http://subclipse.tigris.org/svnant.html)库来执行此操作。在stackoverflow 中也有一些答案，例如[here](https://stackoverflow.com/questions/2400893/how-to-checkout-from-svn-with-an-ant-task)（svnant 的使用）和[here](https://stackoverflow.com/questions/3495253/svnant-command-to-copy-files-from-an-ssh-repository-to-a-sever)（svnant export 命令）。

# datatable - 如何在jquery数据表中添加数据

> ID：14701413
> 
> 赞同：0
> 
> 时间：2013-02-05T06:23:52.290
> 
> 标签：datatable, jquery-data

我需要将一些过滤器数据（来自条件）添加到 jquery 数据表中。怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:50:50.753

```
$('#table_items').dataTable({
        "aaSorting": [[ 5, "desc" ]],
        "bPaginate": false,
        "bFilter": false,
        "bInfo": false
});

'#table_items' - the id of your table
"aaSorting": [[ 5, "desc" ]]  - here 5 is the number of column for default sorting
All columns will be sortable automatically 
```

# ios - 尝试在已经工作的项目中使用 OpenCV 框架时出现 Apple O-Linker 错误

> ID：14701414
> 
> 赞同：2
> 
> 时间：2013-02-05T06:23:54.017
> 
> 标签：ios, opencv, undefined-symbol, xcode4.6

我所做的是使用了基于 openCV 框架的[教程中的一些代码。](https://github.com/BloodAxe/OpenCV-Tutorial)从`EdgeDetectionSample.cpp`文件中，我导入代码。

> 架构 armv7 的未定义符号：“std::__1::basic_string, std::__1::allocator >::basic_string(std::__1::basic_string, std::__1::allocator > const&)”，引用自： cv::Exception::Exception(int, std::__1::basic_string, std::__1::allocator > const&, std::__1::basic_string, std::__1::allocator > const&, std::__1 ::basic_string, std::__1::allocator > const&, int) in opencv2(system.o) cv::Exception::Exception(cv::Exception const&) in opencv2(system.o) "std::__1: :basic_string, std::__1::allocator >::~basic_string()"，引用自： cv::Mat::create(int, int const*, int) in opencv2(matrix.o) __ZN2cvL7setSizeERNS_3MatEiPkiPKmb in opencv2(matrix .o) cv::Mat::Mat(cv::Mat const&, cv::Range const&, cv::Range const&) 在 opencv2(matrix.o) 中 cv::Mat::Mat(cv::Mat const&, cv::Range const*) 在 opencv2(matrix.o) 中 cv::Mat::diag(int) 在 opencv2( matrix.o) cv::Mat::Mat(_IplImage const*, bool) 在 opencv2(matrix.o) cv::Mat::reserve(unsigned long) 在 opencv2(matrix.o) ... "std:: __1::basic_string, std::__1::allocator >::__init(char const*, unsigned long)"，引用自： cv::Mat::create(int, int const*, int) in opencv2(matrix. o) __ZN2cvL7setSizeERNS_3MatEiPKiPKmb in opencv2(matrix.o) cv::Mat::Mat(cv::Mat const&, cv::Range const&, cv::Range const&) 在 opencv2(matrix.o) cv::Mat::Mat (cv::Mat const&, cv::Range const*) 在 opencv2(matrix.o) cv::Mat::diag(int) const 在 opencv2(matrix.o) cv::Mat::Mat(_IplImage const* , bool) 在 opencv2(matrix.o) opencv2(matrix.o) 中的 cv::Mat::reserve(unsigned long) ... "std::_*1::* _vector_base_common::__throw_length_error() const"，引用自：std::_ *1::vector, std::__1::allocator > >::* _append(unsigned long) in opencv2(matrix.o) std:: _ *1::vector, std::__1::allocator >>::* _append(unsigned long) in opencv2(matrix.o) std::_ *1::vector, std::__1::allocator >>::* _append (unsigned long) 在 opencv2(matrix.o) std::_ *1::vector, std::__1::allocator > >::* _append(unsigned long) 在 opencv2(matrix.o) std::_ *1::向量，std::__1::allocator > >::* _append(unsigned long) in opencv2(matrix.o) std::_ *1::vector, std::__1::allocator >::* _append(unsigned long)在 opencv2(matrix.o) 标准::_*1::vector, std::__1::allocator >::* _append(unsigned long) in opencv2(matrix.o) ... "std::__1::basic_string, std::__1::allocator >:: operator=(std::__1::basic_string, std::__1::allocator > const&)"，引用自： cv::Exception::formatMessage() in opencv2(system.o) ld: symbol(s) not found对于架构 armv7 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这个你能帮我吗。我无法阅读这些错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:00:56.207

您的项目已链接到`libstd++ (GNU C++ standard library)`，但最新的 OpenCV 已链接到`libc++ (LLVM C++ standard library with C++ 11 support)`，因此您有两种方法可以解决此问题：

1.  将您的项目链接到 libc++
2.  使用 libstd++ 重建 OpenCV。

要将您的项目与 libc++ 链接，请转到 -> 构建设置 -> 找到“C++ 标准库”行并在那里选择 libc++。

# bash - 用于 ETL 过程的 KornShell 或 Bash Shell？

> ID：14701416
> 
> 赞同：2
> 
> 时间：2013-02-05T06:23:54.590
> 
> 标签：bash, scripting, ksh, data-warehouse, etl

我正在做一个项目，我需要使用 ETL 过程将数据加载到数据仓库中。我有 csv、非结构化和平面文件格式的数据。我正在考虑使用 shell 脚本来执行 ETL 过程。我对 bash shell 和 KornShell (ksh) 知之甚少，但我在 ETL 过程中非常陌生。所以我的问题是 ETL 过程的更好选择是什么。我应该使用 Bash Shell 还是 KornShell？

非常感谢使用 ETL 过程和 shell 脚本的用户的回答。

预先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:54:00.847

通常，我的 ETL 流程使用 SQL 语句进行数据库内转换，因此它们实际上是“ELT”流程。shell 只是用作移动文件、执行数据加载和提取以及执行 SQL 语句的工具。如果您的 DW 位于一个足够强大的系统上，那么它通常是进行转换工作的最佳位置，除非您打算让一个系统位于 EDW 之外进行数据转换。

我所描述的这种 ELT 进程的 shell 选择实际上是一种维护。当你离开时，谁会支持这个？公司是否有很多人知道 bash，但只有一个人知道 KSH？还是 99% 是 .NET 商店？然后我建议在小的 C# 控制台应用程序中编写您的 ETL。当您不使用真正的“ETL”工具时，选择用于执行 ETL 的语言应该关注这些因素，而不是“最佳”语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:27:05.460

Korn 更便携。Bash 更强大。“Bourne shell”是一个很好的最小公分母。

在所有条件相同的情况下，我建议使用“bash”。特别是如果您的平台是 Linux。

恕我直言 ..

PS：

“bash”这个名字代表“Bourne Again Shell”，这是对原始“Bourne”shell 遗产的双关语。Bourne 脚本与 bash 兼容，但反之则不然。

# ios - 缩小上部 UIImage 时滚动表格视图

> ID：14701417
> 
> 赞同：0
> 
> 时间：2013-02-05T06:24:03.360
> 
> 标签：ios, uitableview, scroll, key-value-observing

我不知道这篇文章的标题是否具有描述性，所以我将尝试更深入地解释它。我有这个 UserProfileViewController：

![在此处输入图像描述](../Images/e301ed202c20b0a52107972e8735fd05.png)

顶部是一个 UIImage，它有这些按钮作为子视图，也可以左右翻转。底部是一个容器视图，它将根据这些按钮显示不同的视图控制器。视图控制器都是表格视图，所以我想要实现的是，当我滚动每个表格视图时，上半部分的 UIImage 会缩小，因为 tabeview 的框架会放大，直到表格视图丰富，巫婆点的导航栏将继续滚动。我在其中一个 tableviews 的 contentOffset 上放了一个 kvo，并尝试修改上部 UIImage 和 tableview 的大小，但它没有按预期工作。他们不同步移动，也不流畅。

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if([keyPath isEqualToString:@"contentOffset"]){
        CGPoint offset = [[change valueForKey:NSKeyValueChangeNewKey] CGPointValue];
        NSLog(@"Old value: %f", offset.y);

        CGRect newFrame = self.hoverView.frame;
        newFrame.size.height -= offset.y;
        self.hoverView.frame = newFrame;

        CGRect newFrame2 = self.backOfHeaderView.frame;
        newFrame2.size.height -= offset.y;
        self.backOfHeaderView.frame = newFrame2;

        CGRect newFrame3 = self.userWallViewController.activityFeedTableView.frame;
        newFrame3.origin.y -= offset.y;
        self.userWallViewController.activityFeedTableView.frame = newFrame3;
    }
} 
```

任何想法和建议都将受到欢迎。谢谢

**更新：更好的解释**

所以基本上，当你用拇指向上滚动（向下滚动 tableview）时，tableview 的框架会向上扩展直到全屏，同时 UIImage 会缩小，所以它看起来应该像 tableview 一样，它将 UIImage 推出屏幕。当你用拇指向下滚动（所以你向上滚动表格视图）时，表格视图的框架会缩小，直到它恢复到初始位置并且 UIImage 会增长。它应该看起来像将 UIImage 拖回屏幕上的 tablewview。这样你就可以使用按钮

# php - 重命名 mongo 数据库

> ID：14701418
> 
> 赞同：2
> 
> 时间：2013-02-05T06:24:06.123
> 
> 标签：php, mongodb

我正在使用 mongodb 和 php 做项目。所以在这里我尝试使用 php 重命名现有数据库。所以我做了以下重命名数据库的方法。

*   首先我创建新数据库（用户新数据库名称）
*   从旧数据库读取所有记录并插入到新数据库
*   然后我放弃旧数据库

这是我的代码。

```
 $conn = new \MongoClient('mongodb://example.com:27017', array("connect" => TRUE));
            $exist_dbs = $conn->listDBs();

            foreach ($exist_dbs["databases"] as $databse) {
                if ($databse['name'] == $new_name) {
                    $new_name_is_exist = true;
                }
            }
            if (!$new_name_is_exist) {
                $db = new \MongoDB($conn, $old_name);

                //create new database
                $db_new = new \MongoDB($conn, $new_name);
                $collections = $db->getCollectionNames();

                foreach ($collections as $collection) {
                    //create collection
                    $new_collection = new \MongoCollection($db_new, $collection);

                    $mongo_collection = $db->$collection;
                    $objects = $mongo_collection->find();

                    while ($document = $objects->getNext()) {
                        //add records
                        $new_collection->insert($document);
                    }
                }
                $db->drop();
                $msg = 'database renamed';
            } else {
                $msg = 'given database name already exist';
            }
            $conn->close(); 
```

它工作正常。但我想知道有没有更好的方法来使用 php 重命名 mongo 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:04:20.037

复制数据库（php + mongodb）：

```
<?php

$rename = 'oldname';
$name = 'newname';
$mongo = (new MongoClient());
$db = $mongo->admin;
$response = $db->command(array(
    'copydb' => 1, 
    'fromhost' => 'localhost',
    'fromdb' => $rename,
    'todb' => $name
    ));

print_r($response); 
```

删除数据库（php + mongodb）：

```
<?php

$name = 'oldname';
$mongo = (new MongoClient());
$db = $mongo->$name;
$response = $db->command(array(
    'dropDatabase' => 1
    ));

print_r($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T16:29:12.230

you can use this

```
$mongo = new MongoClient('_MONGODB_HOST_URL_');
$query = array("renameCollection" => "Database.OldName", "to" => "Database.NewName", "dropTarget" => "true");

$mongo->admin->command($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T21:40:46.850

```
$db=new new Mongo(); 
```

将 old_db 复制到 new_db

```
$responseCopy = $db->admin->command(array(
    'copydb' => 1, 
    'fromhost' => 'localhost',
    'fromdb' => 'old_db',
    'todb' =>'new_db'
    )); 
```

现在删除 old_db

```
if($responseCopy['ok']==1){
 $responseDrop=$db->old_db->command(array('dropDatabase' => 1));
 //OR 
 $responseDrop =$db->old_db->drop();
} 
```

显示输出

```
print_r($responseCopy);
print_r($responseDrop); 
```

输出将是这样的

```
Array ( [ok] => 1 ) 
Array ( [dropped] => old_db [ok] => 1 ) 
```

# r - 根据 R 中的列值对数据框进行子集化时出现问题

> ID：14701420
> 
> 赞同：0
> 
> 时间：2013-02-05T06:24:27.697
> 
> 标签：r

`data frame`我在对in进行子集化时遇到问题`R`。数据框`att2`有一个`filter_name`基于我想要的列`subset`。此列的`unique`值如下。

```
unique(att2[["filter_name"]])
# [1] title             Type        Operating_System         Occasion           Brand
148 Levels: Accessories Age Antennae Art_Style Aspect_ratio ... Zoom 
```

这表明这`Brand`是`filter_name`列的值。但是当我使用下面的代码对框架进行子集化时，它给出了 0 行，如下所示。

```
att3 <- subset(att2, filter_name == 'Brand')
> att3
[1] a      b         c  filter_name
<0 rows> (or 0-length row.names) 
```

我无法找出原因。有没有人遇到过这种问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:44:15.457

我们所能做的就是*猜测*您的问题的根源可能是什么。

这是我的最佳猜测：您的“filter_name”列中包含空格，因此在您去除空格之前，您实际上不应该寻找“Brand”。

*如果我的猜测正确*，这是一个重现您的问题的最小示例：

首先，一些示例数据：

```
mydf <- data.frame(Param =  c("   Brand   ", "Operating System", 
                              "Type ", "   Brand   ", "Type ", 
                              "Type ", "   Brand   ", "Type ", 
                              "   Brand   "), Value = 1:9)
unique(mydf[["Param"]])
# [1]    Brand         Operating System Type            
# Levels:    Brand    Operating System Type 

subset(mydf, Param == "Brand")
# [1] Param Value
# <0 rows> (or 0-length row.names) 
```

`print`与参数一起使用`quote = TRUE`以查看您的空格`data.frame`：

```
print(mydf, quote = TRUE)
#                Param Value
# 1      "   Brand   "   "1"
# 2 "Operating System"   "2"
# 3            "Type "   "3"
# 4      "   Brand   "   "4"
# 5            "Type "   "5"
# 6            "Type "   "6"
# 7      "   Brand   "   "7"
# 8            "Type "   "8"
# 9      "   Brand   "   "9" 
```

***如果***这恰好是您的问题，那么`gsub`应该快速解决它：

```
mydf$Param <- gsub("^\\s+|\\s+$", "", mydf$Param)
unique(mydf[["Param"]])
# [1] "Brand"            "Operating System" "Type"  

subset(mydf, Param == "Brand")
#   Param Value
# 1 Brand     1
# 4 Brand     4
# 7 Brand     7
# 9 Brand     9 
```

您可能还想查看`strip.white`默认`read.table`为`FALSE`. 尝试重新读取您的数据，`strip.white = TRUE`然后尝试您的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:26:04.090

首先，你真的应该阅读[这篇](https://stackoverflow.com/questions/how-to-ask)关于如何提出好问题的 stackoverflow 帖子。

对于您的问题，类似这样的问题（当您不发布可重现的示例时很难，正如 Arun 在上面指出的那样）

```
 att2 <- (data.frame(v=rnorm(10), filter_name=c('Brand','Not Brand')))

 att2[att2$filter_name == 'Brand', ]
            v filter_name
1 -1.84217530       Brand
3 -0.36199449       Brand
5 -0.54431665       Brand
7 -0.05659442       Brand
9  1.29753513       Brand

 subset(att2, filter_name == 'Brand')
            v filter_name
1 -1.84217530       Brand
3 -0.36199449       Brand
5 -0.54431665       Brand
7 -0.05659442       Brand
9  1.29753513       Brand 
```

[这里](http://www.ats.ucla.edu/stat/r/faq/subset_R.htm)有更多关于子设置的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:50:33.447

使用`stringr`包，你可以做类似的事情

```
 dat$filter_name_trim <- str_trim(dat$filter_name)
   att3 <- subset(att2, filter_name_trim == 'Brand') 
```

# android - 启动和停止广播接收器

> ID：14701422
> 
> 赞同：6
> 
> 时间：2013-02-05T06:24:53.623
> 
> 标签：android

我想通过两个按钮启动和停止广播接收器。我已经在两个按钮侦听器中为此编写了代码。

代码如下：-

在 startButton 中，我编写了注册接收器的代码，如下所示

```
 startCallBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            startCallBtn.setVisibility(View.INVISIBLE);
            stopCallBtn.setVisibility(View.VISIBLE);

            //register call receiver.
            registerReceiver(callReceiver, new IntentFilter(
            "android.intent.action.CALL"));
           System.out.println("Registered Call Receiver Perfectly");
        }
    }); 
```

在停止按钮中，我将停止接收器的调用写为

```
 stopCallBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            stopCallBtn.setVisibility(View.INVISIBLE);
            startCallBtn.setVisibility(View.VISIBLE);
            stopService(new Intent(MainActivity.this, SpeakOut.class));
            FileOutputStream fos;

          //Unregister sms receivers
            unregisterReceiver(callReceiver);
            System.out.println("Unregistered Call Broadcast Receiver");
        }
    }); 
```

接收新呼叫时，侦听器仍在呼叫

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T06:41:14.820

你可以试试这个代码`enable`和`disable` `BroadcastReceiver`..我希望这对你有帮助..

```
public void enableBroadcastReceiver(View view)
{

    ComponentName receiver = new ComponentName(this, AlarmManagerBroadcastReceiver.class);
    PackageManager pm = this.getPackageManager();

    pm.setComponentEnabledSetting(receiver,
            PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
            PackageManager.DONT_KILL_APP);
    Toast.makeText(this, "Enabled broadcast receiver", Toast.LENGTH_SHORT).show();
   }
   /**
    * This method disables the Broadcast receiver registered in the AndroidManifest file.
    * @param view
    */
   public void disableBroadcastReceiver(View view){
    ComponentName receiver = new ComponentName(this, AlarmManagerBroadcastReceiver.class);
    PackageManager pm = this.getPackageManager();
        pm.setComponentEnabledSetting(receiver,
            PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
            PackageManager.DONT_KILL_APP);
    Toast.makeText(this, "Disabled broadcst receiver", Toast.LENGTH_SHORT).show();
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:36:12.703

在**清单中**

```
 <receiver android:name="your receiver name"> 
```

主要 **活动**

```
BroadcastReceiver br = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            Log.w("Check", "Inside On Receiver");
            Toast.makeText(getApplicationContext(), "received", Toast.LENGTH_SHORT).show();
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        IntentFilter filter = new IntentFilter();
        filter.addAction(BROADCAST_ACTION);
        filter.addCategory(Intent.CATEGORY_DEFAULT);
        registerReceiver(br, filter);

    }

    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(br);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:44:08.070

确保您调用的对象与您调用的对象`unregisterReceiver()`相同。如果您在释放之前为同一个接收器创建新对象，则已注册的旧接收器对象不能再取消注册，因为您已为其分配了新的内存块。`receiver``registerReceiver()`

例如，这样做：

```
MyBroadcastReceiver receiver = new MyBroadCastReceiver();
registerReceiver(receiver);
unregisterReceiver(receiver);

receiver = new MyBraodCastReceiver(); 
```

# php - PHP stripslashes 吃太多反斜杠

> ID：14701425
> 
> 赞同：0
> 
> 时间：2013-02-05T06:24:57.783
> 
> 标签：php, stripslashes

我正在尝试使用传统`stripslashes`功能去除一些斜线，但结果很奇怪：

```
echo stripslashes('\\\\'); 
```

这给了我：`\`

```
echo stripslashes('\\\\\\\\\\\\');
// there should be 12 slashes above 
```

这给了我：（`\\\`这里应该有三个斜线。即使这样也很奇怪）

它正在吃双斜线>.<

但是，当我将相同的输入插入[http://www.tools4noobs.com/online_php_functions/stripslashes/](http://www.tools4noobs.com/online_php_functions/stripslashes/)时，结果会很好吗？

有谁知道发生了什么？我怎样才能控制 stripslashes 的胃口，让它停止双重吞噬这些 sloshes？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:30:50.253

反斜杠`\`转义后面的一个字符。为了打印反斜杠，您需要两个：

```
\\ 
```

`\\\\`给你两个反斜杠，因为每个反斜杠都会转义它后面的反斜杠。

`stripslashes('\\\\');`从剩余的两个中去除一个反斜杠。

# android - Android View pager with listview和动态添加文本

> ID：14701429
> 
> 赞同：2
> 
> 时间：2013-02-05T06:25:17.457
> 
> 标签：android, android-listview, android-fragments, android-viewpager, android-fragmentactivity

我在 Fragment 活动中有一个 Viewpager，它有一个带有编辑文本和发送按钮的底部框架。在片段布局中，我有一个 Listview 并在片段中附加了一个适配器。现在我正在从片段内的父级实现发送按钮，单击时我试图通过适配器将编辑文本中的文本（再次来自父级）添加到列表（在片段中）。但是这里的问题是当我输入一些文本并单击发送时，将文本添加到寻呼机中的当前视图而不是下一个，当我转到最后一个项目时，它有时会添加到同一个视图（这是预期的）。有时它是随机的，而不是下一个项目的顺序。片段活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/detailLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/form" >
    </android.support.v4.view.ViewPager>

    <RelativeLayout
        android:id="@+id/form"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal"
        android:padding="2dp" >

        <EditText
            android:id="@+id/editText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/btnSend"
            android:drawableRight="@drawable/edit_keyboard"
            android:inputType="textMultiLine"
            android:maxLines="3" />

        <ImageButton
            android:id="@+id/btnSend"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:src="@drawable/send" />
    </RelativeLayout>

</RelativeLayout> 
```

片段布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <ListView
        android:id="@+id/listView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@android:color/transparent"
        android:cacheColorHint="@android:color/transparent"
        android:divider="@android:color/transparent"
        android:listSelector="@android:color/transparent"
        android:scrollbars="none" />

</RelativeLayout> 
```

以下是实现发送 ImageButton 的方法：

```
ImageButton sendBtn = (ImageButton) getActivity().findViewById(R.id.btnSend);

sendBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String msg = msgBox.getText().toString();
                if (msg.length() > 0) {
                    long date = new Date().getTime();
                    // TODO Auto-generated method stub
                    commentAdapter.add(new OneComment(false, msg, "Me",
                    String.valueOf(date), "0"));

                    msgBox.setText("");
                } else
                    Toast.makeText(getActivity(), "type in some text..", Toast.LENGTH_SHORT).show();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:35:15.790

您可以执行以下操作访问当前片段（带有列表的片段）：

```
Fragment currentFragment = (Fragment) viewPager.getAdapter().instantiateItem(viewPager, viewPager.getCurrentItem()); //gets current fragment
//now you have to cast it to your fragment with list, let's say it's name is SukarnoListFragment

((SukarnoListFragment)currentFragment).messageList.add(...); // you have now access to public fields and methods that are inside your fragment 
```

而且我认为如果你在 Activity 中有你的按钮，那么你应该在你的 Activity 中实现这个按钮的 onClick，而不是在你的片段中。

# c++ - 将 Xaml 文本框转换为双精度，但如何验证用户输入是双精度而不是 Windows 8 应用程序的 c++ 中的字符串

> ID：14701431
> 
> 赞同：0
> 
> 时间：2013-02-05T06:25:21.550
> 
> 标签：c++, xaml, windows-8, visual-studio-2012, winrt-xaml

这就是我在 xaml 中为我的文本框所拥有的。

```
<TextBox x:Name="number1" HorizontalAlignment="Left" Height="85" Margin="115,239,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="328" FontSize="60" TextAlignment="Center"/> 
```

这就是我必须从文本框中获取文本的内容：

```
void Simple_Calculator_4_Kids::MainPage::add_Click(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
String^ str1 = txtNumberToMultiply->Text; 
wstring ws1( str1->Data());
wstringstream convertor; 
double ws1_d;
convertor << ws1; 
convertor >> ws1_d; 
ws1_d = ws1_d + 2.2; 
} 
```

我不明白如何添加一种方法来验证文本框中的内容实际上是双精度而不是一串字母或为空。我将如何继续添加一种方法来验证文本框中的内容是否为双精度？这是使用 C++ 使用 Visual Studio 2012 for Windows 8 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:00:35.353

我花了一段时间才弄清楚 wstring 如何使用 char16 保持其输入，所以我编写了这段代码。它只检查句点和数字。

```
bool isValidInput(String^ str){
    int decimalX = 0;
    wstring ws(str->Data());
    int strSize = ws.length();
    if(strSize<1)
        return false;
    else{
        for(int i=0;i<strSize;i++){
            if(ws[i]==46||ws[i]==48||ws[i]==49||ws[i]==50||ws[i]==51||ws[i]==52||ws[i]==53||ws[i]==54||ws[i]==55||ws[i]==56||ws[i]==57){
                if(ws[i]==46){
                    decimalX++;
                    if(decimalX>1)
                        return false;
                }
            }
            else
                return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:38:10.767

使用 C 运行时库中的 strtod（将字符串转换为双精度值）。根据文档，针对函数测试您的文本输入并检查错误。通过 C++ 和 CRT 支持 Windows Store 应用程序的 strtod（和朋友）。

[http://msdn.microsoft.com/en-us/library/kxsfc1ab(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/kxsfc1ab(v=vs.110).aspx)

# hibernate - 休眠时解析错误

> ID：14701432
> 
> 赞同：0
> 
> 时间：2013-02-05T06:25:28.617
> 
> 标签：hibernate

我对休眠非常陌生，我创建了一个非常基本的示例，但是当我尝试运行此应用程序时，xml 解析错误即将到来。我已经为资源创建了一个包，我在其中保存了`Employee.hbm.xml`Eclipse 中的 src 文件夹，我保存了`hibernate.cfg.xml`

这是我的错误

```
log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
log4j:WARN Please initialize the log4j system properly.
Initial SessionFactory creation failed.org.hibernate.HibernateException: problem parsing configuration/com/nousinfo/resource
Exception in thread "main" java.lang.ExceptionInInitializerError
    at com.nousinfo.tutorial.utils.HibernateUtil.buildSessionFactory(HibernateUtil.java:17)
    at com.nousinfo.tutorial.utils.HibernateUtil.<clinit>(HibernateUtil.java:7)
    at com.nousinfo.tutorial.dao.impl.EmployeeDAO.<clinit>(EmployeeDAO.java:15)
    at main.hibernatetest.main(hibernatetest.java:30)
Caused by: org.hibernate.HibernateException: problem parsing configuration/com/nousinfo/resource
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1222)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1161)
    at com.nousinfo.tutorial.utils.HibernateUtil.buildSessionFactory(HibernateUtil.java:12)
    ... 3 more
Caused by: org.dom4j.DocumentException: Error on line 1 of document  : Content is not allowed in prolog. Nested exception: Content is not allowed in prolog.
    at org.dom4j.io.SAXReader.read(SAXReader.java:350)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1217)
    ... 5 more 
```

这是我的 hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping 
PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN" 
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name=hibernate.dialect ">
            org.hibernate.dialect.MySQLDialect
        </property-name>
            <property name=hibernate.connection.driver_class ">
                com.mysql.jdbc.Driver
            </property-name>
                <property name=hibernate.connection.url ">
                    jdbc:mysql://192.168.25.30:3306/employee
                </property-name>
                    <property name=hibernate.connection.username ">
                        jack
                    </property-name>
                        <property name=hibernate.connection.password ">
                            jack1234
                        </property-name>
                            <property name="show_sql">
                                true
                            </property>

                            <property name="connection.autocommit">
                                true
                            </property>
                            <!-- List of XML mapping files -->
                            <mapping resource="com/nousinfo/resource/Employee.hbm.xml" />
    </session-factory>
</hibernate-configuration> 
```

这是我的 Employee.hbm.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping 
PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN" 
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="Employee" table="EMPLOYEE">
        <meta attribute="class-description">
            This class contains the employee detail
        </meta>
        <id name="employeeNumber" type="int" column="EMPLOYE_NUMBER">
            <generator class="native" />
        </id>
        <property name="firstName" type="string" column="FIRST_NAME" />
        <property name="lastName" type="string" column="LAST_NAME" />
        <property name="title" type="string" column="TITLE" />
        <property name="departmentId" type="string" column="DEPARTMENT_ID" />
        <property name="address1" type="string" column="ADDRESS_1" />
        <property name="address2" type="string" column="ADDRESS_2" />
        <property name="city" type="string" column="CITY" />
        <property name="state" type="string" column="STATE" />
        <property name="pincode" type="int" column="PINCODE" />
        <property name="telephoneNumber" type="int" column="TELEPHONE_NUMBER" />
        <property name="mobileNumber" type="int" column="MOBILE_NUMBERr" />
        <property name="dateOfBirth" type="date" column="DATE_OF_BIRTH" />
        <property name="dateOfAnniversary" type="date" column="DATE_OF_ANNIVERSARY" />
        <property name="dateOfJoining" type="date" column="DATE_OF_JOINING" />
        <property name="dateOfLeaving" type="date" column="DATE_OF_LEAVING" />
        <property name="reasonForLeaving" type="string" column="REASON_FOR_LEAVING" />
    </class>

</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:37:19.020

你得到这个例外

1.  您没有`name =`在休眠配置文件的许多行中添加左引号 (")。
2.  您已经在休眠配置文件的多行中结束了一个`property`带有标签的标签。`property-name`
3.  在休眠配置文件中未完全指定属性。

除此之外，你的休眠配置文件充满了语法错误。请参阅以下链接了解如何准备休眠配置文件。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

# python - Mysql - 比较两个条目时如何识别和选择不同的列？

> ID：14701434
> 
> 赞同：1
> 
> 时间：2013-02-05T06:25:37.383
> 
> 标签：python, mysql, select, sqlalchemy

我的表设置如下：

```
ID EVENT Value1 Value2 Value3 Value4 ... Value10
1  400   2      2      2      2          2
... 
7  500   3      6      5      5          1
8  200   4      4      4      4          4
9  500   3      7      6      5          1 
```

在创建/插入 ID 9 的时间点，它将是表中的最高 ID。插入此条目后，我想找到事件与 ID 9 的事件匹配的最近的先前条目（在此示例中为 id 7）。然后仅选择/返回值不同的列（在此示例中，Value2 和 Value3）。我不知道哪些值或多少值会提前不同。

期望的输出：

```
ID EVENT Value2 Value3
7  500   6      5
9  500   7      6 
```

我正在使用 python/sqlalchemy，我想知道我是否可以单独使用 mysql 对包含数千个条目的表有效地进行这种分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:21:01.403

对于给定的查询，结果列的数量是固定的。它仅取决于数据库的架构，而不取决于其中的实际数据。因此，您无法预先检索列的子集。我建议您改为检测 Python 中的相关列。

# android - android中带有异步任务的进度条

> ID：14701438
> 
> 赞同：0
> 
> 时间：2013-02-05T06:25:47.493
> 
> 标签：android

我是 android.so 任何人都知道如何在一定时间内显示进度条，然后再次不可见它。我在 xml 文件中创建了一个进度条，我有几毫秒的时间来显示该数量的进度条时间。任何类型的示例，并希望使用 asynctask 完成所有进度任务提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:37:35.680

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)**`onProgressUpdate(Integer...)`**的方法。

仅供参考，通过使用**`publishProgress()`**内部方法`doInBackground()`，您可以执行 UI 更新操作。因此，您可以随时从`doInBackground()`方法中更新进度条。

# asp.net - ASP.NET MVC 从不同模块获取图像路径

> ID：14701440
> 
> 赞同：0
> 
> 时间：2013-02-05T06:25:54.730
> 
> 标签：asp.net, asp.net-mvc-3

对于示例，我得到了这两个模块。模块.管理模块.Web

然后，在 Module.Admin 中上传的所有图像都放在里面，站点地图是这样的。Module.Admin - 内容 -- 上传 --- 图片

现在，如何在 Module.Web > View .cshtml 文件中加载这些图像作为源？正如我所注意到的，这两个模块有两个不同的端口。我希望你明白我在说什么。随意问。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:21:38.547

听起来你也把模块做成了一个 web 项目？这意味着它们将在不同的站点中运行，并且无法共享信息。

您可能应该改用插件。我已经在我的博客中描述了如何做到这一点：http: [//blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

如果您只想访问文件，则必须设置一个`VirtualPathProvider`可以从其他库访问文件的自定义。

# java - 如何更新java线程中使用的变量的值

> ID：14701441
> 
> 赞同：0
> 
> 时间：2013-02-05T06:25:58.663
> 
> 标签：java, multithreading

在 java 程序中，我在多个线程中运行相同的函数。我想做的是这个——

1.  识别特定的正在运行的线程——例如，如果有 2 个正在运行的线程，我如何从外部函数访问其中一个线程？（外部函数是具有线程的同一个 java 应用程序的一部分）
2.  假设在上面的两个线程中都使用了一个名为“x”的变量。我可以在 thread1 和 thread2 中存储和检索“x”的单独值吗？这是线程中使用的任何变量的默认行为吗？
3.  访问/更新特定线程中的变量值——例如，我希望更新“x”的值，因为它在“线程 1”中使用。
4.  终止一个（特定的）正在运行的线程。例如，我希望终止 Thread1（从上面的 2 个正在运行的线程中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:43:25.090

答案

1.  有几种方法可以做到这一点。你可以；一个名为`ThreadUtil`和内部的 Util 类有一个`static Set<Thread>`. 您可以添加您创建的线程，以便在线程完成执行时设置和删除。或者您可以扩展`ThreadPoolExecutor`并覆盖方法`beforeExecute`，`afterExecute`方法来执行上述相同的操作。您可以使用该集合来获取正在运行的线程。如果要按名称存储和检索，可以使用地图。
2.  这可以通过使用`ThreadLocal`类来实现。看[这篇](http://shazsterblog.blogspot.com/2012/10/usage-of-threadlocal-in-java.html)文章如何使用`ThreadLocal`
3.  可能与`ThreadLocal`
4.  您可以`boolean stop`在线程中使用 Flag ( ) 来执行此操作，以及将此标志设置为的方法`true`

# jquery - .on() 更改函数在使用 jquery 更新文本时不会触发

> ID：14701445
> 
> 赞同：1
> 
> 时间：2013-02-05T06:26:36.733
> 
> 标签：jquery, ajax, onchange

我正在尝试使用 jquery 更新文本，并且正在尝试使用 .change() 触发一些功能，但没有任何效果。

```
<div class="btn btn-tag" data-toggle='dropdown'>
  Explore
</div> 
```

当使用 jQuery 函数（在 jquery 中使用 .text()）更改此文本时，它不会发出警报：

```
 $(body).on('change','btn-tag',function() {
   alert('test');
 }); 
```

当它更改文本时，它应该发出警报，但它没有为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:27:58.210

您不能将更改事件应用于 body、div、span 等，而可以应用于文本、复选框等输入类型。您可以定期合并内容以检查元素子项中的更改，或者您可以使用`DOMNodeInserted`并`DOMNodeRemoved`检查元素是否添加或删除，有关详细信息，请查看此[帖子](https://stackoverflow.com/questions/4979738/fire-jquery-event-on-div-change)。

```
$(body).on('DOMNodeInserted DOMNodeRemoved','.btn-tag', function(event) {
         if (event.type == 'DOMNodeInserted') {
        alert('Content added! Current content:' + '\n\n' + this.innerHTML);
    } else {
        alert('Content removed! Current content:' + '\n\n' + this.innerHTML);
    }
}); 
```

请注意，`DOMNodeInserted`并且`DOMNodeRemoved`并非在所有地方都有效，并且 DOMNodeInserted 事件在 Internet Explorer 9 中存在错误，第一次插入节点时不会触发它，[参考](http://help.dottoro.com/ljmcxjla.php).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:28:36.323

div 不能有`change`你可以申请的事件`click`：

*   代表机构`''`
*   类选择器前缀`.`

像这样：

```
$('body').on('click','.btn-tag',function() {
   alert('test');
 }); 
```

但是如果你想用一些更新你的 div `dropdown values`：

试试这个箱子：`[http://jsbin.com/ulecom/1/edit](http://jsbin.com/ulecom/1/edit)`

```
$('select').change(function(){
  if($('.btn-tag').text() == $('select').val()){
    alert('test');
  } 
}); 
```

# performance - 转换为long long，C中的优缺点

> ID：14701450
> 
> 赞同：0
> 
> 时间：2013-02-05T06:26:57.857
> 
> 标签：performance, double, type-conversion, long-long

我想使用`long long`而不是`double`数据类型来加速我的算法。我的算法是在有向的`acyclic graph (DAG)`. 简单地说，它添加了一条边的权重`"E: a->b" to b`，如果新的权重`b`低于之前的权重，则它与设置为 a 的父级一起更新。

我的意思是，我的算法只是一些加法和比较操作。边的权重最初是`"double"`，我是否可以将它们乘以一个大数并将它们转换为`"long long"`。如果此调整使我的程序更快并且值得考虑。如何处理由于四舍五入导致的不稳定`big double`问题`long long`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:47:43.063

在 i5 x64 上*，甚至*imul 似乎也比双倍乘法快 40%。整数加法也应该以更少的周期/更好的吞吐量发生。关于“不精确”问题，您应该知道双精度数可能比整数更不精确。

[计算将十进制转换为浮点时哪些数字会导致问题？](https://stackoverflow.com/questions/14688609/calculate-which-numbers-cause-problems-when-converting-decimal-to-floating-point/14689040#14689040)

如果您可以访问原始数据（例如权重的十进制表示，将它们乘以 10 的大幂应该会产生没有任何舍入伪影的精确整数。使用 long long 唯一的问题是溢出问题。

如何解决可能的舍入不稳定性取决于权重的动态范围和最大迭代次数。例如，如果您的权重都小于 1.0 且大于 2^-52，则乘以 2^52 会得到精确的整数，而不会出现舍入误差。那么“不稳定”是由溢出的可能性决定的。(2^12 * 2^52) >= 2^64。

# java - 如何自动扩展 Heroku Java 后端测功机？

> ID：14701453
> 
> 赞同：3
> 
> 时间：2013-02-05T06:27:15.087
> 
> 标签：java, heroku, jetty, grizzly, autoscaling

我正在使用由 web 和 worker dynos（一种 RESTful 服务）组成的 Java 对云后端进行原型设计。现在我已接近完成，我想知道是否有适用于网络和工作人员测功机的自动缩放器。我看到有 HireFire 和 Hero Scale，但它们针对的是在 Sinatra 或 Rails 上运行的 Ruby。

对于worker dynos，我想我可以尝试找出队列容量（我使用AMQP RabbitMQ）并相应地进行扩展，但我有点不确定如何扩展web dynos（Jersey on Jetty via Grizzly）。有没有办法查看所有 web dynos 上所有请求的平均 http 响应时间？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:50:02.077

You might want to take a look at [HeroScale](http://heroscale.com/), they might be able to do what you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T15:48:52.070

[http://scaledynos.herokuapp.com](http://scaledynos.herokuapp.com)适用于所有 Heroku worker 和 dynos，不管是什么语言

# php - 创建图表并将它们包含在电子邮件中，一个可以呈现为图像的 PHP 库？

> ID：14701455
> 
> 赞同：1
> 
> 时间：2013-02-05T06:27:15.887
> 
> 标签：php, codeigniter, charts, highcharts

我是[highcharts.js](http://www.highcharts.com)的粉丝，用于在我的网页上显示图表，但需要为大约 300 个用户呈现独特的条形图并每年通过电子邮件发送几次（“会员更新”之类的事情）让我寻找另一个库可以渲染为图像。

据我了解，大量使用 CSS/jQuery 等的“漂亮”图表库都不能在 HTML 电子邮件这样危险的地方工作。

任何人都可以推荐一个基于 PHP 的简单库（我正在使用代码点火器），它可以让人们将图表保存为图像并自定义图表的显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:59:01.997

有一个名为 PChart 的开源图表库可以完全满足您的需求。[PChart](http://www.pchart.net/)可以将图表的图像直接呈现给浏览器，也可以将其保存到文件中。请参阅文档中的[脚本输出](http://wiki.pchart.net/doc.faq.script.output.html)。想法是将其保存到服务器，并将其用作电子邮件中标签的`src`属性。`<img>`

pChart 需要在您的 Web 服务器上安装 GD 和 FreeType PHP 扩展。从任何脚本和 ctrl+f调用`phpinfo()`“Freetype”和“GD”以检查它们是否已启用。如果没有，请先启用它们。

至于与 CodeIgniter 的集成，您应该能够从目录中挑选出您需要的类`class`并将它们扔到`application/libraries`目录中。

从那里，您将能够执行：

```
$this->load->library('pDraw');
$this->pDraw->someMethod(); 
```

与其他相关类依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:35:31.633

为什么不直接创建一个网页，将数据保存在漂亮的图表中，并在电子邮件中发送带有唯一 ID 的 URL 以允许他们查看图表/数据？

# c - 在数组中查找数字是否按顺序排列

> ID：14701457
> 
> 赞同：2
> 
> 时间：2013-02-05T06:27:20.550
> 
> 标签：c

我有一个包含 5 个元素的数组（1024,1025,1026,1027,1028）。如何检查这些元素是否按顺序排列。如果数组有偶数个元素，我也可以这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:30:57.693

遍历数组并确保前一个成员（如果存在）等于当前的减号`1`。

```
for (int i = 1; i < 5; i++) {
     if (arr[i - 1] != arr[i] - 1) {
          // It's not sequential.
          break;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:30:39.133

我会建议这个解决方案（如果说`sequential`你的意思是`ordered`）：

```
#include <stdio.h>

int isArraySequential(int * array, int size) {
    int isAscendingFirst;
    int isAscendingCurrent;
    int isChangeFound = 0;
    int i;

    // arrays of length 0/1/2 are assumed to be sequential
    if (size < 3)
      return 1;

    for (i=1; i < size; i++) {
      // in case there is a change
      if (array[i] != array[i-1]) {
          isAscendingCurrent = (array[i] > array[i-1]);
          // on first change
          if (!isChangeFound) {
            isChangeFound = 1;
            isAscendingFirst = isAscendingCurrent;
          }
          // on subsequent changes
          else {
            if (isAscendingFirst != isAscendingCurrent)
              return 0;
          }
      }
    }

    return 1;
}

int main(){
  int array1[4] = {1, 1, 0, -1};
  int array2[4] = {2, 2, 2, 2};
  int array3[4] = {1, 2, 4, 3};

  printf("Is array1 sequential ? %d\n", isArraySequential(array1, 4));
  printf("Is array2 sequential ? %d\n", isArraySequential(array2, 4));
  printf("Is array3 sequential ? %d\n", isArraySequential(array3, 4));

  return 0;
} 
```

因为通常顺序数组可以按`ascending`OR`descending`顺序排列，必须考虑到这一点。还有一些极端情况——长度为 0/1/2 的数组总是连续的（我不确定长度为 0）。

**编辑：**我已经修复了第一个数组元素具有相同值的情况的代码。现在它应该可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:32:07.893

只需遍历数组：

```
bool is_sequence(int *arr, int size) 
{
    int i;

    for(i = 0; i < (size - 1); i++)
    {
        if((arr[i] + 1) != arr[i])
            /* array is not sequential */
            return false;
    }

    /* array is sequential */
    return true;
}

<...>
if(is_sequence(my_array, 5))
    printf("sequential!"
else
    printf("not sequential"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T06:51:14.530

You should compare the two neighboring numbers and you have to do the same thing for many times. So, a loop is necessary. An easy programme is as followed.

```
#include<stdio.h>
int main()
{
    int a[5]={1024,1025,1026,1027,1028};
    int i,s;
    for(i=0;i<4;i=i+1)
    {
        if(a[i]+1 != a[i+1])
        {  s=-1; break; }
        else
        {  s=0; }
    }
    if(s=0)
    { printf("sequential."); }
    else
    { printf("not sequential."); }
} 
```

I hope that my answer could help you. Thank you.

# mysql - Magento中的mysql语法错误

> ID：14701460
> 
> 赞同：0
> 
> 时间：2013-02-05T06:27:38.293
> 
> 标签：mysql, database, magento, syntax-error

嗨，我正在尝试使用以下脚本从 magento 数据库中获取数据，但我正在尝试以下错误

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 15 行的 ': Description --104: Meta Description --506: Anahi's Tip --1067: Size & Fit ' 附近使用正确的语法**

```
$conn1 = mysql_pconnect("db.aviesta.com","gys",'d3v3l0p3r$') or die ("Error In Connetion Databse" . mysql_error());
mysql_select_db("customer_transaction_dev",$conn1);
//db Connection end
$select=mysql_query("SELECT DISTINCT A.entity_id AS productID,
A.sku, A.created_at, B.value AS Price,
C.value AS Description,
E.qty AS Quantity,
F.stock_status,
H.Value AS imageURL
FROM catalog_product_entity A
INNER JOIN catalog_product_entity_decimal B
ON A.entity_id=B.entity_id AND B.store_id=5
INNER JOIN catalog_product_entity_varchar C
ON A.entity_id=C.entity_id AND C.attribute_id=105 --Description
INNER JOIN catalog_product_entity_text D
ON A.entity_id=D.entity_id
AND D.attribute_id= 97
--97: Description
--104: Meta Description
--506: Anahi's Tip
--1067: Size & Fit
--1068: Style Ideas
INNER JOIN cataloginventory_stock_item E
ON A.entity_id=E.product_id
INNER JOIN cataloginventory_stock_item F
ON A.entity_id=F.product_id AND F.website_id=2
INNER JOIN catalog_product_relation G
ON A.entity_id=G.parent_id
INNER JOIN catalog_product_entity_varchar H
ON A.entity_id=H.entity_id
AND H.attribute_id =106 --Image
WHERE A.attribute_set_id IN (70,71)
AND A.entity_id=26179' ") or die(mysql_error()); 
```

请告诉我我在哪里做错了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:37:24.400

双破折号注释需要一个空格。

错误的：

```
--97: Description 
```

正确的：

```
-- 97: Description 
```

见[http://dev.mysql.com/doc/refman/5.5/en/comments.html](http://dev.mysql.com/doc/refman/5.5/en/comments.html)

* * *

回复您的评论：

```
WHERE A.attribute_set_id IN (70,71)
AND A.entity_id=26179' 
```

在查询的第 30 行的 WHERE 子句末尾有一个杂散的单引号。SQL 解析器从 SQL 语句的开始计算行数，而不是从文件的开始。

* * *

唯一发生的地方`Image`是这里：

```
ON A.entity_id=H.entity_id
AND H.attribute_id =106 --Image 
```

这是另一种情况，在双破折号注释后需要一个空格。

在查询的前面似乎还有一个这样的案例：

```
ON A.entity_id=C.entity_id AND C.attribute_id=105 --Description 
```

我针对一些空表测试了查询，一旦通过添加空格更正了所有注释，查询就起作用了。

# mysql - DataMapper 枚举字段在保存或更新时不会持续存在

> ID：14701463
> 
> 赞同：1
> 
> 时间：2013-02-05T06:27:54.233
> 
> 标签：mysql, ruby, database, ruby-datamapper, enumerated-types

我正在尝试使用新的 DataMapper 模型映射旧版 MySQL 数据库。

MySQL 架构：

```
CREATE TABLE IF NOT EXISTS `backer` (
  `backer_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `secret` varchar(16) NOT NULL,
  `email` varchar(255) DEFAULT NULL,
  `status` enum('pending','ready') NOT NULL DEFAULT 'pending',  # relevant bit
  PRIMARY KEY (`backer_id`),
  UNIQUE KEY `backer_id` (`secret`),
  KEY `email` (`email`,`status`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=8166 ; 
```

数据映射器模型：

```
class Backer
  include DataMapper::Resource
  storage_names[:default] = "backer"     

  property :id,      Serial, :field => "backer_id"
  property :secret,  String, :field => "secret"
  property :email,   String, :field => "email"
  property :status,  Enum[ :pending, :ready ], :field => "status", :default => "pending"
  has n, :items, :child_key => "backer_id"
end

DataMapper.finalize 
```

对于大多数属性，我可以坚持：

```
b = Backer.first
b.first_name = "Daniel"
b.save!
# Backer.first.first_name == "Daniel" 
```

它仍然很好。但是当我这样做时`enum`：

```
b = Backer.first
b.status = :pending
b.save!

# b.status == :pending
# Backer.first.status != :pending
# Backer.first.update!(:status => :pending) ... 
```

对字段的更新/保存`enum`似乎不会持续存在。

SQL 通常看起来像：

```
1.9.3p327 :019 > Backer.last.update(:status => :ready)
 ~ (0.000349) SELECT `backer_id`, `secret`, `email`, `status` FROM `backer` ORDER BY `backer_id` DESC LIMIT 1
 ~ (0.000190) UPDATE `backer` SET `status` = 2 WHERE `backer_id` = 8166
 => true 
```

但是当我查看对象（例如`Backer.last`）时`status`，不会改变。

**更新**

我已经验证`status`了 MySQL 数据库中的枚举字段正在被持久化。但是，`status`DataMapper 类中的枚举属性根本不反映这一点（始终为`nil`）。

这里发生了什么事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:22:21.297

谢谢@morbusg：这是一种解决方案。

另一个是将`Enum`at my end 更改为 a `String`，这对我的目的来说效果很好。

# haskell - haskell 理解数据类型

> ID：14701477
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:28:51.737
> 
> 标签：haskell

假设我们有下一个数据：

```
data Value =
IntVal Int
| BoolVal Bool 
```

和功能

```
f :: Value -> Int 
```

如何在 Value 类型的参数上区分不同构造函数的案例？`f (IntVal 1)`一种行为和另一种行为也是如此`f (BoolVal True)`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:48:45.080

有几种不同的方法，一种流行的方法是在函数参数中使用模式匹配。

```
negateValue :: Value -> Value
negateValue (IntVal  n) = IntVal  (-n)
negateValue (BoolVal p) = BoolVal (not p) 
```

另一种方法是使用案例模式。

使用案例：

```
negateValue val = case val of
    IntVal  n -> IntVal  (-n)
    BoolVal p -> BoolVal (not p) 
```

# magento - magento中的相对baseurl

> ID：14701479
> 
> 赞同：-2
> 
> 时间：2013-02-05T06:29:13.623
> 
> 标签：magento

我想知道如果magento中有任何设置我们可以删除固定的baseurl并保持动态（相对）baseurl，例如drupal。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:15:27.747

不可能有相对的基本 URL，但是有一个很好的教程如何在实时/登台的情况下通过 ini 文件设置基本 URL。您可以根据自己的需要进行调整：

[http://maglife.co.uk/2009/03/28/magento-base-urls-and-devstaging-installations/](http://maglife.co.uk/2009/03/28/magento-base-urls-and-devstaging-installations/)

我会将其更改为从 Apache 变量中读取基本 url，您可以为每个虚拟主机设置或直接从 $_SERVER['HTTP_HOST'] 中读取它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T01:11:45.017

我发现 Magento 有时会返回不正确的协议（HTTP/HTTPS）。为了绕过这一点，我在某些情况下（仅在 phtml 模板中）使用了硬编码的[相对协议 URL ，而不是调用函数。](http://paulirish.com/2010/the-protocol-relative-url/)

# java - Primefaces java.lang.NullPointerException

> ID：14701483
> 
> 赞同：0
> 
> 时间：2013-02-05T06:29:22.640
> 
> 标签：java, mysql, primefaces

我的项目有以下错误

> 严重：为组件“loginButton”调用动作侦听器“#{tableBean.addNew}”时收到“java.lang.NullPointerException”严重：java.lang.NullPointerException

这是我的 addNew 函数：

```
public void addNew(ActionEvent actionEvent) throws SQLException {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");

        initiate_ddate=sdf.format(initiateddate);
        teststart_date=sdf.format(teststartdate);
        scheduledend_date=sdf.format(scheduledenddate);
        revised_end=sdf.format(revisedend);

        System.err.println("erorrrrrrrrrr");

        Connection connadd = new Connector().getConn();
        Statement stmt = connadd.createStatement();

        String sql2 = "INSERT INTO status (`name`, `initiateddate`, `agreementstatus`, `testingdoc`, `teststartdate`, `scheduledenddate`, `teststatus`, `revisedend`, `launcstatus`) VALUES (  '" + name + "'  , '" + initiate_ddate + "' , '" + agreement_status + "', '" + testing_doc + "', '" + teststart_date + "', '" + scheduledend_date + "', '" + test_status + "', '" + revised_end + "', '" + launc_status + "' );  ";

        stmt.executeUpdate(sql2);
        FacesMessage msg = new FacesMessage("Project Edited", name + " " + initiate_ddate + " " + agreement_status + " " + testing_doc + " " + teststart_date + " " + scheduledend_date + " " + test_status + " " + revised_end + " " + launc_status);

        FacesContext.getCurrentInstance().addMessage(null, msg);
    } 
```

这是什么原因？

这是堆栈跟踪：

```
SEVERE: Received 'java.lang.NullPointerException' when invoking action listener '#{tableBean.addNew}' for component 'loginButton'
SEVERE: java.lang.NullPointerException
    at java.util.Calendar.setTime(Calendar.java:1070)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:859)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:852)
    at java.text.DateFormat.format(DateFormat.java:316)
    at table.TableBean.addNew(TableBean.java:192)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)

SEVERE: JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=form_tab:tabView, Message=/index.xhtml @234,223 actionListener="#{tableBean.addNew}": java.lang.NullPointerException
SEVERE: /index.xhtml @234,223 actionListener="#{tableBean.addNew}": java.lang.NullPointerException
javax.faces.event.AbortProcessingException: /index.xhtml @234,223 actionListener="#{tableBean.addNew}": java.lang.NullPointerException
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NullPointerException
    at java.util.Calendar.setTime(Calendar.java:1070)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:859)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:852)
    at java.text.DateFormat.format(DateFormat.java:316)
    at table.TableBean.addNew(TableBean.java:192)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
    ... 35 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:43:45.810

NullpointerExceptions 通常很容易解决，在这种情况下也是如此：

诀窍是在堆栈跟踪中查找您拥有的一段代码

```
SEVERE: java.lang.NullPointerException
    at java.util.Calendar.setTime(Calendar.java:1070)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:859)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:852)
    at java.text.DateFormat.format(DateFormat.java:316)
    at table.TableBean.addNew(TableBean.java:192) 
```

在这种情况下，它是 table.TableBean.addNew 方法在 DateFormat 上执行格式

你正在做其中的 4 个（我不知道第 192 行是什么）：

```
 initiate_ddate=sdf.format(initiateddate);
 teststart_date=sdf.format(teststartdate);
 scheduledend_date=sdf.format(scheduledenddate);
 revised_end=sdf.format(revisedend); 
```

根本原因是以下变量之一为空。它被传递给格式化函数并抛出一个 NPE

*   发起日期
*   测试开始日期
*   预定结束日期
*   修改结束

# web-services - 从 wp7 中的类影响页面

> ID：14701484
> 
> 赞同：0
> 
> 时间：2013-02-05T06:29:25.570
> 
> 标签：web-services, windows-phone-7, events, binding

我在一个类中调用一个 Web 服务，并且需要在我的项目的某个页面中得到结果。当该类中的事件被触发时，我如何在我的页面中执行某些操作？注意：调用是异步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:20:37.817

您可以在视图模型中使用[INotifyPropertyChanged轻松完成此操作。](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)只需将视图模型绑定到您的页面，当后台发生任何变化（例如异步）时，应该更新视图。

尝试在您的应用程序中使用 MVVM，您会很顺利。另外，请注意，您可以将视图模型全局放置在 App 类中。由于每个人都可以访问 App，因此这将使从一个地方进行更新变得容易。

# iphone - 检查rootviewcontroller的类型

> ID：14701494
> 
> 赞同：0
> 
> 时间：2013-02-05T06:30:26.333
> 
> 标签：iphone, ios, objective-c, xcode

我的应用中有许多导航控制器和一个标签栏控制器。现在我想检查当前我是否在导航视图或标签栏视图上。我如何检查我当前的视图类。

```
NSString *className=self.window.rootViewController.description;
NSLog(@"class name is %@ ",className); 
```

当我在导航控制器视图上时，输出是：

```
class name is <UINavigationController: 0x1cd78780> 
```

当我在标签栏控制器上时，它会打印

```
class name is <UITabBarController: 0x1cdbd8d0> 
```

我怎么能认出他们。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:35:25.817

```
Class rootClass = [self.window.rootViewController class];

if (rootClass == [UINavigationController class]) {

} else if (rootClass == [UITabBarController class]) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:38:40.373

这简单。您已经发现它的 UINavigationController 现在是否只需要从导航控制器获取顶部视图控制器

```
NSString *className = navigationController.topViewController.description;
NSLog(@"class name is %@ ",className); 
```

# mediawiki - 维基百科模板参数中的等号将无法正确显示

> ID：14701495
> 
> 赞同：4
> 
> 时间：2013-02-05T01:16:30.037
> 
> 标签：mediawiki, wikipedia, mediawiki-templates

我注意到使用带有等号的链接似乎不能正常工作（当链接放在`{{missing information}}`模板内时）。有没有办法解决这个限制，以便在 MediaWiki 模板中包含等号链接？

`{{missing information|[https://www.google.com/search?q=google+search+test This link has an equals sign in it, and the template is not displaying properly.]}}`

`{{missing information|[https://www.google.com/ This link has no equals sign in it, and it's working properly.]}}`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T06:59:33.450

这是因为 MediaWiki 将其视为带有名称的参数`[https://www.google.com/search?q`（该值是字符串参数后面的其余部分`=`）。您可以通过使用[编号参数](http://www.mediawiki.org/wiki/Help%3aTemplates#Numbered_parameters)来解决此问题：

`{{missing information|1=[https://www.google.com/search?q=google+search+test This link has an equals sign in it, and the template is not displaying properly.]}}`

如果您有更多参数并且只有其中一些有问题，事情会变得更加复杂，我不确定它是如何工作的。但是对所有内容使用编号参数应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T18:47:09.980

您可以使用[Template:=](https://en.wikipedia.org/wiki/Template:%3D)，根据其文档“允许在未命名的模板参数中使用“=”，否则它将被视为键/值分隔符。例如，这有效：

`{{missing information|[https://www.google.com/search?q{{=}}cool Cool!]}}`

# php - 如何在magento的pdf装箱单中显示总计？

> ID：14701496
> 
> 赞同：0
> 
> 时间：2013-02-05T06:30:43.197
> 
> 标签：php, magento

我们为订单创建了部分发票和发货。所以我的问题是我如何在 pdf 装箱单上显示订单的特定部分装运或订单总额的总额？

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T11:23:34.720

我前段时间通过`app/code/local/Mage/Sales/Model/Order/Pdf/Shipment.php`在`getPdf()`-function 中实现此代码来做到这一点：

```
$total = 0;
foreach($shipment->getAllItems() as $item) {
                if ($item->getOrderItem()->getParentItem()) {
                    continue;
                }
                if(!$item->getOrderItem()->getData('qty_shipped') >= (float)1.0000) {                   
                    continue;
                }
                $total += ($item->getPrice() - $item->getOrderItem()->getDiscountAmount())*$item->getQty();
        } 
```

希望我能帮上忙。关于您的问题：下次您提出问题并希望社区为您提供帮助时，请发布一些代码示例，解释您尝试过的内容以及失败的原因/方式，并更准确地说明您在 magento 的代码结构中的位置#re努力实现你的目标。

顺便说一句，还有一个 Magento-Stackexchange-Site：

[https://magento.stackexchange.com/](https://magento.stackexchange.com/)

# jquery - 反转所有图像，然后重新开始，而不是在 jQuery 滑块中循环

> ID：14701504
> 
> 赞同：1
> 
> 时间：2013-02-05T06:31:06.977
> 
> 标签：jquery, slider

jQuery滑块显示所有图像直到结束，然后快速反转到第一张图像，然后从第一张图像重新开始。我不想显示所有反向图像，而是像骑自行车一样显示（不显示所有反向图像）。怎么做？

网站链接：[designcompanyusa.com/test](http://www.designcompanyusa.com/test)

我的代码：

```
$(document).ready(function() {
    $('.slider').jcarousel( {
        initCallback: slider_initCallback,
        scroll: 1,
        auto: 5,
        wrap: 'both',
        //This tells jCarousel NOT to autobuild prev/next buttons
        buttonNextHTML: null,
        buttonPrevHTML: null
    });
});

function slider_initCallback (carousel) {
    $('.slider-nav a').bind('click', function() {
        carousel.scroll($.jcarousel.intval($(this).text()));
        return false;
    });
}

function slider_firstInCallback(carousel, item, idx, state) {
    $('.slider-nav a').removeClass('active');
    $('.slider-nav a').eq(idx-1).addClass('active');
} 
```

# requirejs - 如何使用 RequireJS 检查相应的页面并相应地加载脚本

> ID：14701508
> 
> 赞同：0
> 
> 时间：2013-02-05T06:31:22.033
> 
> 标签：requirejs

在我的网站上，我有一堆 JavaScript 文件，所有这些文件都用于不同的用途，但登录页面只需要`jquery`和`loginValidate`文件。当我附加我的`main.js`时，假设通过检查条件仅加载这两个文件。怎么做？

我的配置文件：

```
requirejs.config({
    baseUrl:"scripts",
    paths:{
        //libraries
        jquery          :"lib/jquery-1.9.0.min",
        jqueryUI        :"lib/jquery-ui-1.9.2.custom.min",
        underScore      :"lib/underscore-min",
        backBone        :"lib/backbone-min",
        //scripts
        appInit         :"js/tasklist",
        loginValidate   :"js/loginValidate"
    },
    shim:{
        "underScore":{
            exports: "_"
        },
        "backBone":{
            exports:"Backbone",
            deps:["underScore"]
        },
        "appInit" : {
            deps:["jquery","jqueryUI","underScore","backBone"]
        },
        "jqueryUI":{
            deps:["jquery"]
        },
        "loginValidate":{
            deps:['jquery']
        }
    }
}); 
```

仅在登录页面上需要：

```
 require(["jquery","loginValidate"], function($,validate){
        how can i call the loginValidate function?
    }); 
```

`loginValidate`功能：

```
define(function(){

    var tasklistHandler = function (params) {
       //params take care.. to validate
    };

        $(function(){ // calling internally the function
            var paramsLoginForm = {
                loginForm : $('#tlLoginForm')
            }
        tasklistHandler(paramsLoginForm);
    });

    }) 
```

这是正确的做法吗？我也在使用 Backbone.js 来利用其他页面；我该如何处理这些页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:28:06.857

您遇到的问题是“工厂”函数（您传递给最后一个片段中的定​​义调​​用的回调函数）中缺少“返回”。

相反，你需要有这样的东西：

```
define(function(){
    return function (params) {
       //params take care.. to validate
    };
}) 
```

在您的`require`调用中，您使用运行工厂函数返回给您的函数：

```
require(["jquery","loginValidate"], function($, validate){
    var paramsLoginForm = {
        loginForm : $('#tlLoginForm')
    }
    // \|/ that is what is returned by `define`'s callback function.
    validate(paramsLoginForm);
}); 
```

# vhdl - 注册启用

> ID：14701509
> 
> 赞同：0
> 
> 时间：2013-02-05T06:31:26.150
> 
> 标签：vhdl, fpga

这是场景：

我有一个启用的寄存器（称为 RegA）。RegA 的输入 put 被永久拉高。

同时，RegA 的使能线通过一些简单的组合逻辑连接到 RegB 的输出端。

现在在场景中，在下一个时钟脉冲上，RegB 的输出将**仅在一个时钟周期内**变高。

我的问题是，我会看到 RegA 的输出在 RegB 变高的同一个时钟周期内变高，还是 RegA 在下一个时钟周期变高，或者由于竞争条件它可能永远不会变高？

根据经验，我觉得 RegA 会在 RegB 变高的同一时钟周期内变高，但是，我想知道这是否是不好的做法并且不可靠。我认为在启用线路的信号和 RegA 变高的时钟沿之间可能存在竞争条件。由于使能线经过了一些组合逻辑，因此似乎每次都会失去竞争，因此 RegA 不会在 RegB 变高的同一时钟周期内识别出使能线为高电平。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:21:53.397

我假设您所说的启用是时钟启用？在这种情况下，如果我理解正确的话，在 RegA 变高之前你会得到一个时钟周期的延迟。解释：

仅当时钟到达时其使能输入处于活动状态时，RegA 才会对时钟周期做出反应。然而，由于 RegB 有一些内部延迟，并且由于从其输出到达到 RegA 使能甚至还有一些额外的组合延迟，所以在 RegA 已经忽略时钟周期之前，有效信号不会“进入”RegA。

不过，这是双向的，因此当第二个时钟周期到来时，活动使能信号也**不会**消失，从而使 RegA 看到时钟周期并对其做出反应。在下一个时钟周期内，使能将再次无效。

请记住，停用的时钟使能只会导致时钟输入被忽略，因此当时钟使能输入无效时，寄存器将保持其值。

这不是竞争条件（除非您有一个设计不佳的系统，例如有很多时钟偏差，但是您也有很多其他问题），并且可以可靠地使用 - 否则很多 FPGA 设计人员会采用想当然是不可能做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:23:26.517

只要您的时钟分布正常（例如，在 FPGA 中，这将由工具为您管理），那么您将获得明确定义的行为。

在第一个时钟脉冲上，RegB 的输出将在时钟边沿之后变为高电平。因此，RegA 将在时钟转换点“看到”其启用的低电平，因此它不会改变。

在下一个时钟周期，RegB 的输出将在时钟边沿之后变为低电平。然而，这对于 RegA 来说已经太晚了，因为它已经“查看”了使能信号（当时钟沿到来时）——它会看到它的使能信号为高电平，并将高输入传输到输出（经过很短的延迟）。

所以，是的，你会得到一个额外的周期延迟。

# java - Android：sqlite 返回：错误代码 = 1，msg = 没有这样的表

> ID：14701511
> 
> 赞同：0
> 
> 时间：2013-02-05T06:31:54.933
> 
> 标签：java, android, sqlite, android-sqlite

我从 API 获取数据，然后将该数据插入 SQLite 数据库。但是当我插入该数据时，出现了一些问题。我无法找出那个问题。我正在从 API 获取正确的数据。没有问题。唯一的问题是将数据插入数据库。

**我的 Json 数据格式是：**

> {"sku":"T_010","product_id":"7","name":"footaball","thumbnail_image":" [http://www.keyss.in/pos/magento/media/catalog/product/ no_selection](http://www.keyss.in/pos/magento/media/catalog/product/no_selection) ","description":null,"short_description":null,"weight":"0.0000","created_at":"2013-01-15 07:00:36","updated_at":"2013-01-15 07:00:36","price":"13.0000","special_price":null,"tax_class_id":"1","cat_id":["4","15"],"cat_name":{"4 ":"手机和配件","15":"运动健身"}},

**我的主要课程**

[链接到主类](http://pastebin.com/asQqyqEc)

**我的 ProductDbHandler 类** [链接到我的数据库类](http://pastebin.com/RwxApQGm)

**Getter 和 Setter** [类链接到 Getter 和 Setter 类](http://pastebin.com/fpXP1AB1)
**My Logcat 显示如下：**

```
02-05 12:31:39.601: I/Database(274): sqlite returned: error code = 1, msg = table tbProductDetails has no column named cat_id
02-05 12:31:39.621: E/Database(274): Error inserting cat_id=["5"] price=10.0 updated_at=null weight=1.0 product_id=1 tax_class_id=0 description=324354 thumbnail_image=http://www.keyss.in/pos/magento/media/catalog/product/no_selection name=assdfg created_at=2013-01-15 06:19:59 sku=T_001 special_price=12.0 cat_name={"5":"Cameras"}
02-05 12:31:39.621: E/Database(274): android.database.sqlite.SQLiteException: table tbProductDetails has no column named cat_id: , while compiling: INSERT INTO tbProductDetails(cat_id, price, updated_at, weight, product_id, tax_class_id, description, thumbnail_image, name, created_at, sku, special_price, cat_name) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
02-05 12:31:39.621: E/Database(274):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
02-05 12:31:39.621: E/Database(274):    at database.in.ProductDbHandler.addProducts(ProductDbHandler.java:64)
02-05 12:31:39.621: E/Database(274):    at com.hellovx100.in.ClerkLogin.getItemsOfDept(ClerkLogin.java:110)
02-05 12:31:39.621: E/Database(274):    at com.hellovx100.in.ClerkLogin.onCreate(ClerkLogin.java:92)
02-05 12:31:39.621: E/Database(274):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-05 12:31:39.621: E/Database(274):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-05 12:31:39.621: E/Database(274):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-05 12:31:39.621: E/Database(274):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-05 12:31:39.621: E/Database(274):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-05 12:31:39.621: E/Database(274):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-05 12:31:39.621: E/Database(274):    at android.os.Looper.loop(Looper.java:123)
02-05 12:31:39.621: E/Database(274):    at android.app.ActivityThread.main(ActivityThread.java:4627)
02-05 12:31:39.621: E/Database(274):    at java.lang.reflect.Method.invokeNative(Native Method)
02-05 12:31:39.621: E/Database(274):    at java.lang.reflect.Method.invoke(Method.java:521)
02-05 12:31:39.621: E/Database(274):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-05 12:31:39.621: E/Database(274):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-05 12:31:39.621: E/Database(274):    at dalvik.system.NativeStart.main(Native Method) 
```

我在哪里做错了，请指导我。

任何帮助都会得到帮助。

编辑：我认为问题出在 josn 数据格式上，我得到**"cat_id":["4","15"],"cat_name":{"4":"Mobile & Accessories","15":"Sports Fitness"}}，**我们如何在 json 中解析它，因为它就像数组中的数组。logcat 还在**02-05 12:31:39.601 给出错误：I/Database(274): sqlite returned: error code = 1, msg = table tbProductDetails has no column named cat_id**

如何处理此类问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:57:52.113

我认为这是您的问题，您缺少一个空格。

代替 ：

```
database.in.DatabaseAndTableNames.PRODUCT_DISCRIPTION_COLUMN+"TEXT," 
```

尝试

```
database.in.DatabaseAndTableNames.PRODUCT_DISCRIPTION_COLUMN+" TEXT," 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T08:16:56.957

在此处发布您的创建语句。验证并确保您添加了 cat_id 列和特定的数据类型。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-05T06:54:31.717

02-05 11:13:09.993: I/Database(287): sqlite 返回：错误代码 = 1，msg = 没有这样的表：tbProductDetails

首先创建表然后插入数据..

# c# - 将虚拟路径之外的 csv 文件绑定到数据表

> ID：14701512
> 
> 赞同：0
> 
> 时间：2013-02-05T06:31:56.617
> 
> 标签：c#, asp.net, visual-studio-2012

我正在开发一个 ASP.NET 4.5 应用程序，它读取服务器 My Documents 文件夹中另一个应用程序的日志文件。当我在调试模式下运行但没有部署一次时，它运行良好。给出以下错误：

> 'C:\Users\Performance\My Folder\Log\' 不是有效路径。确保路径名拼写正确并且您已连接到文件所在的服务器。

我已授予网络服务和 IISUSER 对此文件的读/写访问权限。（*仅此文件而不是文件夹*）

这是我的代码：

```
 protected void lstArea_TextChanged(object sender, EventArgs e)
    {
          //create instance foe oledb connection class
        OleDbConnection con = new OleDbConnection();
        //Your datasource Location path currently i placed csv file in server location 
        string dsource = lstArea.SelectedValue;
        //Put your datasource path in the connection string for example if you have csv files in C:\ directory change datasource= C:\
        string constr = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + dsource + ";Extended Properties='text;HDR=No;FMT=Delimited';";

        try
        {
            con.ConnectionString = constr;
            //create instance for command object 
            OleDbCommand cmd = new OleDbCommand();
            cmd.Connection = con;
            // set your file name in the below query
            cmd.CommandText = "select * from [wksplog.txt]";
            //Open Oledb Connection to read CSV file 
            con.Open();
            //Create one datatable to store data from CSV file
            DataTable dt = new DataTable();
            dt.Load(cmd.ExecuteReader(), LoadOption.OverwriteChanges);
            //Bind data in the Gridview
            gvMain.DataSource = dt;
            gvMain.DataBind();
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            con.Close();
        }   
    } 
```

我将目录传递为 C:\Users\Performance\My Folder\Log\

出了什么问题？顺便说一句，我正在使用匿名/表单身份验证。这台机器不在域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:52:42.440

运行应用程序的用户需要读取日志文件的所有父文件夹的权限，否则您将收到访问冲突。

# ruby - 如何在 Heroku 上使用 rdiscount？

> ID：14701516
> 
> 赞同：11
> 
> 时间：2013-02-05T06:32:12.557
> 
> 标签：ruby, heroku, gem, bundler, rdiscount

我正在尝试将一个小型测试应用程序推送到 Heroku。这是应用程序和 Gem 文件：

应用程序：

```
require 'sinatra'
require 'haml'
require 'rdiscount'

set :markdown, :layout_engine => :haml, :layout => :layout

get '/' do 
  haml :index
end

get '/blog' do 
  markdown :test
end 
```

宝石文件：

```
source :rubygems
gem 'sinatra'
gem 'thin'
gem 'haml'
gem 'rdiscount' 
```

在推到 Heroku 之前，我运行`bundle install`. 但是尝试安装 rdiscount gem 时推送到 Heroku 失败：

```
-----> Ruby/Rack app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
   Running: bundle install --without development:test --path vendor/bundle --binstubs   vendor/bundle/bin --deployment
   Fetching gem metadata from http://rubygems.org/..........
   Fetching gem metadata from http://rubygems.org/..
   Using daemons (1.1.9)
   Using eventmachine (1.0.0)
   Using haml (3.1.7)
   Using rack (1.4.3)
   Using rack-protection (1.3.2)
   installing rdiscount (2.0.7)
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for random()... yes
   checking for srandom()... yes
   checking for rand()... yes
   checking for srand()... yes
   checking size of unsigned long... long
   checking size of unsigned int... int
   no int with size 4
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-rdiscount-dir
   --without-rdiscount-dir
   --with-rdiscount-include
   --without-rdiscount-include=${rdiscount-dir}/include
   --with-rdiscount-lib
   --without-rdiscount-lib=${rdiscount-dir}/lib
   Gem files will remain installed in /tmp/build_3aijv3ga0dy1y/vendor/bundle/ruby/1.9.1/gems/rdiscount-2.0.7 for inspection.
   Results logged to /tmp/build_3aijv3ga0dy1y/vendor/bundle/ruby/1.9.1/gems/rdiscount-2.0.7/ext/gem_make.out
   An error occurred while installing rdiscount (2.0.7), and Bundler cannot continue.
   Make sure that `gem install rdiscount -v '2.0.7'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rack app 
```

我确实了解 rdiscount 可能依赖于其他一些 Gems 或库，并且这种依赖关系似乎没有得到解决。但是，我不明白如何解决这个问题。你能给我一些关于如何让它工作的建议吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-05T07:16:51.183

Heroku 上的 Ruby 1.9.2 似乎存在问题，它认为 int 的字节数是多少。

尝试`ruby "1.9.3"`像这样向您添加 Gemfile：

```
source :rubygems
ruby "1.9.3"

gem 'sinatra'
gem 'thin'
gem 'haml'
gem 'rdiscount' 
```

我自己的测试在 1.9.2 上重现了您的错误，并在 1.9.3 上成功

# ruby - 在 OS X 上安装 Homebrew 时出错

> ID：14701519
> 
> 赞同：3
> 
> 时间：2013-02-05T06:32:27.177
> 
> 标签：ruby, macos, installation, homebrew

我正在尝试安装[Homebrew](https://en.wikipedia.org/wiki/Homebrew_%28package_management_software%29)，但遇到了一些问题。我在下面列出了结果。我该如何解决这个问题？

```
$ ~ $ brew install wget
==> Downloading http://ftpmirror.gnu.org/wget/wget-1.14.tar.gz
Already downloaded: /Library/Caches/Homebrew/wget-1.14.tar.gz
==> ./configure --prefix=/usr/local/Cellar/wget/1.14 --sysconfdir=/usr/local/etc --with-ssl=openssl --disable-iri
checking whether make sets $(MAKE)... ./configure: /usr/local/Library/ENV/4.3/sed:/bin/bash^M: bad interpreter: No such file or directory
no
configure: error: cannot run /bin/sh build-aux/config.sub
./configure: /usr/local/Library/ENV/4.3/sed: /bin/bash^M: bad interpreter: No such file or directory
./configure: /usr/local/Library/ENV/4.3/sed: /bin/bash^M: bad interpreter: No such file or directory

READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting 
```

注意：我事先卸载了 MacPorts，并且`brew doctor`工作顺利。

**已解决**：我使用在[Homebrew wiki 页面](https://github.com/Homebrew/homebrew/wiki/Installation)上找到的另一种安装方法（“在任何地方解压缩”）解决了问题。

我跑了什么：`mkdir homebrew && curl -L https://github.com/mxcl/homebrew/tarball/master | tar xz --strip 1 -C homebrew`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:36:40.317

`/bin/bash^M`是你的线索。出于某种原因，正在下载的内容中有一个 DOS 行尾字符。这可能是公式中的一个错误，但如果您喜欢冒险，您可以`brew install dos2unix`然后`dos2unix`在有问题的文件夹上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T07:09:28.757

您在 Unix/Linux/Mac OS X 中使用 Windows 样式的行尾。如果您之前修改了 Git core.autocrlf 属性，请尝试：

```
git config --global core.autocrlf input 
```

然后重新安装 Homebrew。

# sql - 在 DB2 中使用 LIKE 和 IN

> ID：14701521
> 
> 赞同：1
> 
> 时间：2013-02-05T06:32:36.707
> 
> 标签：sql, db2

我想使用类似的东西：

```
SELECT A.* FROM MYSCHEMA.MYTABLE A, MYSCHEMA.SECONDTAB B WHERE A.COL1 LIKE B.COL1 || '%' 
```

如何在 DB2 中实现这一点？

[类似的问题，但没有答案](https://stackoverflow.com/questions/11838919/how-to-use-like-with-in-in-db2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:35:33.743

不太确定您尝试实现什么，但它在 DB2 中有效。只需添加 TRIM 功能`LIKE TRIM(B.COL1) || '%'` 或将其交换到`WHERE B.COL1 LIKE TRIM(A.COL1) || '%'`

[编辑] 以上在 DB2 中的 as/400 中工作（或他们现在所称的任何名称）

下面可能适用于 DB2 LUW（使用 DB2 windows v8.2 测试），假设 COL1 type = varchar

```
WHERE SUBSTR(A.COL1,1,LENGTH(A.COL1)) = SUBSTR( B.COL1, 1,LENGTH(A.COL1)) 
```

# asp.net - 在 asp.net 中创建新的 Asmx 页面

> ID：14701525
> 
> 赞同：1
> 
> 时间：2013-02-05T06:33:10.563
> 
> 标签：asp.net, web-services

我正在创建一个 asmx Web 服务。在项目名称上的 Visual Studio 2012 中，我右键单击并添加了一个 Web 服务名称**UserDetails.asmx**

现在我正在尝试在 js 文件中使用 Web 服务。像这样

```
$.ajax({
    type: "POST",
    url: "UserDetails.asmx/HelloWorld",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {
       alert('success');
    },
    error: function () {
        alert("Error");
    }
}); 
```

**POST http://192.168.9.185/GPS/UserDetails.asmx/HelloWorld 500 (Internal Server Error)**显示错误

 **我的代码中是否有任何错误，或者我遗漏了一些东西，所以它显示错误。我的 Asmx 页面

```
<%@ WebService Language="C#" CodeBehind="~/App_Code/UserDetails.cs" Class="UserDetails" %> 
```

我的代码背后

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

/// <summary>
/// Summary description for UserDetails
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class UserDetails : System.Web.Services.WebService {

public UserDetails () {

    //Uncomment the following line if using designed components 
    //InitializeComponent(); 
}

[WebMethod]
public string HelloWorld() {
    return "Hello World";
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:48:07.203

**编辑**

简短回答：只需取消注释 [System.Web.Script.Services.ScriptService]

通过使用深入挖掘错误消息

```
error: function (xhr,status, error) {
        alert("Error");
       } 
```

并检查 xhr 发现实际错误是其他错误（只能从脚本调用类定义中具有 [ScriptService] 属性的 Web 服务）。

I used [WebMethod] in my aspx code behind and whenever I received such message, I found out that there was an error in the data I am passing. So try adding `data:"{}",` in your $.ajax()

as described in [this](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/) post

> When making a read-only request, the empty data parameter is the key. For reasons unknown, jQuery does not properly set the specified content-type when there is no data included.**

# css - 在网页上垂直和水平居中对齐图像

> ID：14701527
> 
> 赞同：3
> 
> 时间：2013-02-05T06:33:25.387
> 
> 标签：css, alignment

我需要显示简单的施工页面，该页面有一个图像让我们说 800x700px 并且我希望这个图像垂直和水平地出现在页面的中心，

我尝试了不同的方法，但没有奏效。下面的示例 html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">

html, body { height: 100%; width: 100%; }
body { position: relative;  background-image:url('images/bg.jpg');background-repeat:repeat; }
#mydiv { 
    position: absolute;
    height: 100%;
    width: 100%;
    text-align:ceter;
}
</style>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-05-17T23:42:15.013

无论长度如何，此 CSS 都可以使您的图像居中。

```
.centered {
  position: fixed;
  top: 50%;
  left: 50%;
  /* bring your own prefixes */
  transform: translate(-50%, -50%);
} 
```

秘密就在`transform`. 没有它，它只会把图像的左上角像素放在中心，而不是把整个图像漂亮地放在中间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T06:45:48.340

查看 Chris Coyier 关于 CSS-Tricks 的这篇文章。我认为这可能会有所帮助。几天前我遇到了同样的问题，他的回答对我有用。

[水平和垂直居中图像](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)

基本上这个想法是，如果您的图像具有设定的宽度和高度。您可以将其从左侧和顶部 50% 绝对定位，然后执行等于宽度和高度一半的负边距以使其回到死点。如果图像没有设置尺寸，它们是垂直居中图像的其他方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:41:46.327

您没有为 div 设置 ID，我已对其进行了编辑，一旦完成，图像将水平对齐。此外， mydiv 不需要定位为“绝对”。

要垂直对齐图片，不使用 javascript 的最佳解决方案是给 img 一个带 % 的 margin-top。

```
#mydiv {
 text-align: center;
}

#mydiv img {
 margin-top: 15%;
} 
```

# python - 生成随机函数（相对于随机数）

> ID：14701529
> 
> 赞同：3
> 
> 时间：2013-02-05T06:33:46.773
> 
> 标签：python, algorithm, hash, random

我想创建一个函数，它接受一个字符串并返回一个介于 0 和 1 之间的数字。当给定相同的字符串时，该函数应该始终返回相同的数字，但除此之外，结果应该没有可辨别的模式。任何大量输入字符串的输出数字都应遵循均匀分布。

此外，我需要生成多个这样的函数，即当给定字符串“abc”时，函数 A 可能始终返回 0.593927，而函数 B 始终返回 0.0162524。我需要它快速（它用于数值模拟），并且具有相当好的统计数据。

我正在使用 Python，并会接受以下形式的答案：“这是一种使用 Python 库的简单方法”或“这是一种您可以实现的算法”。如果在 Python 中没有快速的方法，我将改用 C。

我意识到以下两种方法中的任何一种都可以，但是每种方法都有缺点，这使我想寻找更优雅的解决方案。

1.  **存储一个字典**
    我可以在每次给定一个新字符串时计算一个新的随机数，并将其存储在字典中，以便在我再次收到相同的字符串时检索。**但是**，我的应用程序很可能会生成很多只出现一次的字符串，这最终会导致必须在内存中存储一​​个非常大的字典。这也使可重复性变得更加困难，因为即使我使用相同的种子，如果我以不同的顺序接收相同的字符串，我也会生成不同的函数。由于这些原因，“动态”一致地计算随机数会更好。

2.  **使用散列函数**
    我可以在字符串上调用散列函数，然后将结果转换为数字。例如，可以通过将“种子”字符串附加到每个输入字符串来解决生成多个函数的问题。**然而**，然后我坚持尝试找到具有适当速度和统计数据的哈希函数。Python 的内置哈希速度很快，但依赖于实现，我不知道统计数据会有多好，因为它不是为此类目的而设计的。另一方面，我可以使用诸如 md5 之类的安全散列算法，它具有良好的统计数据，但这对于我的应用程序来说太慢了。针对数据存储应用程序的哈希函数通常比像 md5 这样的加密安全函数快得多，但它们的设计目的是避免冲突，而不是产生均匀分布的输出，而且这些函数不一定在所有情况下都相同。

**关于散列函数的进一步说明**

为了说明避免冲突和产生统一结果是不同的事情，请考虑以下使用 Python 内置哈希函数的示例：

```
>>> hash("aaa") % 1000
340
>>> hash("aab") % 1000
343
>>> hash("aac") % 1000
342
>>> hash("aad") % 1000
337
>>> hash("aae") % 1000
336
>>> hash("aaf") % 1000
339
>>> hash("aag") % 1000
338
>>> hash("aah") % 1000
349
>>> hash("aai") % 1000
348
>>> hash("aaj") % 1000
351
>>> hash("aak") % 1000
350 
```

上面的输出没有冲突，但也明显不是均匀分布的，因为它们都在336和351之间，而且第三位数也有一定的规律。我意识到我可能通过这样做可以获得更好的统计数据`(hash("aaa")/HASH_MAX)*1000`（假设我可以计算出`HASH_MAX`应该是什么），但这应该有助于说明一个好的散列函数的要求与我正在寻找的函数的要求不同.

**关于问题的一些相关信息**

我不确切知道该算法需要处理的字符串是什么，因为字符串将由模拟生成，但可能会出现以下情况：

1.  它们将具有非常有限的字符集（可能只有 4 或 5 个不同的符号）。

2.  会有很多独特或稀有的字符串和一些非常常见的长度不等的字符串。

3.  字符串的长度没有上限，但短的可能比长的更常见。如果我从未见过超过 100 个字符的字符，我不会感到惊讶，但我不确定。其中许多只有一到三个字符，因此该算法对于短字符串的速度非常重要。（但我想我可以使用查找表来查找小于一定长度的字符串。）

4.  通常，字符串将具有共同的大子字符串 - 通常两个字符串的不同之处仅在于在开头或结尾附加一个字符。当字符串相似时，算法不会给出相似的输出值，这一点很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:09:20.687

使用一个好的随机数生成器并用字符串作为种子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:46:23.263

[Lookup3](http://www.burtleburtle.net/bob/c/lookup3.c)被认为具有非常好的碰撞特性，这应该意味着结果的均匀分布，而且速度也很快。将它放在 Python 扩展中应该很简单。

更一般地说，如果您找到一个函数可以很好地减少哈希表冲突并具有您需要的速度属性，那么您只需要从 32 位或 64 位整数到浮点数的最终转换。网络和其他地方有许多字符串散列函数的来源。检查[Knuth](http://en.wikipedia.org/wiki/The_Art_of_Computer_Programming)，对于初学者。

**添加**

另一件可能值得尝试的事情是首先使用像 RC4 这样的快速 1-1 算法（不安全，但仍然足够接近伪随机）加密字符串，然后运行一个简单的哈希（h = h + a * c[i ] + b) 覆盖密文。RC4 密钥是唯一标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:05:35.987

尝试使用指纹，例如拉宾指纹。
[http://en.wikipedia.org/wiki/Fingerprint_(computing)](http://en.wikipedia.org/wiki/Fingerprint_%28computing%29)。

如果您选择 N 位指纹，您只需将结果除以 2^N。

指纹是一种散列函数，通常对计算机来说非常快（与MD5 等[密码散列函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)相比），但对密码应用程序不利（密钥值可以通过其指纹以某种方式恢复）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T06:45:54.503

[在关于通用散列](http://en.wikipedia.org/wiki/Universal_hashing)的维基百科文章中的“散列字符串”部分中有一个算法。

或者，您可以只使用一些内置的哈希函数；您的每个随机函数都会在散列之前为字符串添加一个随机（但固定的）前缀。

# magento - 没有产品的 Magento 中的类别导入

> ID：14701530
> 
> 赞同：2
> 
> 时间：2013-02-05T06:33:51.417
> 
> 标签：magento

我想先导入与类别相关的数据，然后再导入产品。但是，当我要仅上传类别 csv 文件时，它显示错误“未找到 sku”，当我尝试导入类别和产品 csv 的合并数据时，它正在导入产品但不显示任何类别，并且在产品中显示 0 记录找到并在导入中显示上传成功消息。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:01:46.100

您必须单独导入类别。

将所有信息放入您的 csv 中，然后通过如下自定义脚本：

（在您的 Magento 根文件夹中创建一个脚本目录，并在此位置创建一个 category.php 文件）。

然后您就可以通过访问 yoursite.com/script/category.php 来导入您的类别

您可以在此处找到示例：

[http://www.magentoworks.net/import-bulk-category-in-magento](http://www.magentoworks.net/import-bulk-category-in-magento)

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T01:28:56.860

请参考我的教程，它使用 magento 脚本创建类别和子类别。

[http://www.pearlbells.co.uk/import-the-categories-programmatically/](http://www.pearlbells.co.uk/import-the-categories-programmatically/)

```
foreach ($arrResult as $import_category) {
    try {
        if (strtolower($import_category[16]) == 'true') {
            $enabled = 1;
        } else {
            $enabled = 0;
        }

        if ($import_category[1] == 0) {
            $parentId = '2';
        }
        else {
            $parentId = $list[$import_category[1]];
        }

        $category = Mage::getModel('catalog/category');
        $category->setName($import_category[2]);
        $category->setMetaTitle($import_category[2]);
        $category->setIncludeInMenu(1);
        $category->setUrlKey($import_category[10]);
        $category->setDescription(strip_tags($import_category[11]));
        $category->setMetaDescription($import_category[12]);
        $category->setMetaKeywords($import_category[13]);
        $category->setIsActive($enabled);
        $category->setDisplayMode('PRODUCTS');
        $category->setIsAnchor(1); //for active anchor
        $category->setStoreId(Mage::app()->getStore()->getId());
        $parentCategory = Mage::getModel('catalog/category')->load($parentId);
        $category->setPath($parentCategory->getPath());
        $category->setCustomUseParentSettings(true);
        $category->setImage($import_category[6]);
        $category->save();
        $list[$import_category[0]] = $category->getId();
        echo 'Category ' . $category->getName() . ' ' . $category->getId() . ' imported successfully' . PHP_EOL;
    } catch (Exception $e) {
        echo 'Something failed for category ' . $import_category[2] . PHP_EOL;
        print_r($e);
    }
} 
```

# python - Python：TypeError：'str'对象不可调用

> ID：14701532
> 
> 赞同：0
> 
> 时间：2013-02-05T06:34:01.563
> 
> 标签：python, django

我正在使用一个函数来实例化 python 类。

Hers 是类结构

```
from DB.models import ApiKey,ServiceProvider

class SMSMrg( object ):
    _instance = None
    class Singleton:
        def __init__(self):
            self.username = None
            self.password = None
            self.allsp = []
            self.classnames = {}
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(SMSMrg, cls).__new__(
                                cls, *args, **kwargs)
        return cls._instance

    def loadsettings(self):

        get_all_sp = ServiceProvider.objects.filter(status = False)
        for (options,obj) in enumerate(get_all_sp):
            cla = str(obj.class_Name)
            self.classnames[cla] = cla
        print self.classnames

        for (options,obj) in enumerate(get_all_sp):
            cla = str(obj.class_Name)
            class_object = self.classnames[cla](obj.userName,obj.password,obj.sendingurl)

       # self.allsp = get_all_sp 
    def send(self):
        print "+++++++++++++++++++== Global send "

if __name__ == "__main__":

    b = SMSMrg()
    b.loadsettings() 
```

我已经将类名存储在数据库中，并且我已经在不同的文件上定义了每个类结构。

Like`cla` 将包含一个类名。

但是当我调用上面的函数时，我得到了类型错误。

```
Traceback (most recent call last):
  File "allsms.py", line 30, in <module>
    b.loadsettings()
  File "allsms.py", line 21, in loadsettings
    class_object = cla(obj.userName,obj.password,obj.sendingurl)
TypeError: 'str' object is not callable 
```

请告诉我如何实例化我的 db 中存在名称的所有类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:36:35.837

在`cla = str(SERVIVEPROVIDER)`您转换`SERVIVEPROVIDER`为字符串的行上。在下一行你试图调用它，因此你得到一个错误......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:36:42.140

```
 # Means `cla` is pointing to a string
cla = str(SERVIVEPROVIDER)

# there is no function called `cla` now it contains a string
cla(obj.userName,obj.password,obj.sendingurl) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:37:22.783

正如您所说`cla`，包含类的名称，这意味着您不能将其用作可调用对象。

您可以构建一个`dict`并从那里获取类对象：

```
from somemodule import SomeClass

class TheClass(object):
    def __init__(self, username, password, url):
        #do stuff

class AnOtherClass(object):
    def __init__(self, username, password, url):
        # do stuff

CLASS_NAMES_TO_CLASSES = {
    # Note: TheClass is *not* a string, is the class!!!
    'FirstName': TheClass,
    'SecondName': AnOtherClass,
    'SomeClass': SomeClass,
    }

class SMSMrg(object):
    #do stuff
    def loadsettings(self):
       get_all_sp = ServiceProvider.objects.filter(status = True)
       for obj in get_all_sp:
           SERVIVEPROVIDER = obj.class_Name
           cla = str(SERVIVEPROVIDER)
           class_object = CLASS_NAMES_TO_CLASSES[cla](obj.userName,obj.password,obj.sendingurl) 
```

此方法要求您能够构建这样的`dict`，因此您要么提前知道哪些类最终会出现在数据库中，要么您不能使用此方法。

请注意，这*不是*`CLASS_NAMES_TO_CLASSES`将字符串映射到字符串的字典。它将字符串映射到类对象。如果从模块中导入类，则必须将其放入字典中。*`SomeClass`*

 *另一种方法可以`eval`用来评估类名，但如果数据库包含来自用户的数据（这是不安全的），你应该避免这种情况。

另一个*可能*有用的选项是避免保存类名，而是`pickle`直接保存实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T06:51:19.943

> Please tell me how can instansiate all the classes which names are present in my db .

Try this:

```
class A(object): pass
class B(object): pass

class_names = {'first': A, 'second': B}
obj = class_names['first']()
type(obj)
<class 'yourmodule.A'> 
```

Or, if your classes are stored somewhere else, say in a module called `mymodule`:

```
import mymodule
obj = getattr(mymodule, 'A')() 
```*

# crystal-reports - Crystal Report 1 字段应在同一行

> ID：14701536
> 
> 赞同：2
> 
> 时间：2013-02-05T06:34:14.073
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-2010, crystal-reports-8.5

我正在使用 Crystal Reports，我有这样的输出：

```
 NumberId         ART_No          InkColor
     ------------------------------------------
     0010             23003             BLUE
     0010             23003             RED
     0010             23003             GREEN
     0013             23004             ORANGE
     0013             23004             PINK
     0013             23004             WHITE
     0015             23007             GREEN
     0015             23007             PINK 
```

即使不使用 SQL 脚本，有什么方法可以使输出（在 Crystal Reports 中）像这样：

```
 NumberId         ART_No          InkColor
     ------------------------------------------
     0010             23003             BLUE, RED, GREEN
     0013             23004             ORANGE, PINK, WHITE
     0015             23007             GREEN, PINK 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:30:57.677

你需要做一些事情来实现这一点。

1.  为`NumberId`.

2.  抑制组标题。

3.  创建一个公式字段；我们会调用它`@ColorReset`。它应该包含以下代码：

    ```
    同时打印记录；
    stringVar 颜色 := "";

    ```

    将其放在您的组标题中。`Colors`每次点击 Group Header 时，这将重置stringVar。

4.  抑制细节部分。

5.  创建另一个公式字段；我们会调用它`@ColorAppend`。它应该像这样连接值：

    ```
    同时打印记录；
    stringVar 颜色 := 颜色 + ", " + {YourTable.InkColor};

    ```

    将其放在您的详细信息部分。这将在每次详细信息部分循环时构建您的颜色字​​符串。

6.  再创建一个 FormulaField 来显示颜色，名为`@ColorsShow`. 它将显示如下颜色：

    ```
    同时打印记录；
    字符串变量颜色；

    右（颜色，LEN（颜色） - 2）；// 去掉前面的逗号和空格

    ```

    将它放在您的组页脚中，`NumberId`以及`ART_No`

* * *

您的最终结果应该是：

```
---------- Group Header 1 ----------
/////////// @ColorReset ////////////

------------- Details --------------
////////// @ColorAppend ////////////

---------- Group Footer 1 ----------
[NumberId] [ART_No] [@ColorsShow] 
```

它看起来有点吓人，但它非常简单。

# iphone - 超出范围摘要在调试时不可用

> ID：14701539
> 
> 赞同：2
> 
> 时间：2013-02-05T06:34:29.997
> 
> 标签：iphone, debugging, ios5, scope

我正在开发一个简单的 iPhone 游戏。我正在使用`if else if else if else`循环。当我尝试调试 else 部分并将光标保持在变量上方时，它会显示一条`'out of scope Summary Unavailable'`消息。

我确信大括号是正确的，并且对于其他 else if 和 if 循环的一部分也可以正常工作。

为什么会这样？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:29:43.020

检查您正在使用的变量，可能是您在其范围之外访问它们，尝试使用唯一的变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:49:46.587

Put break point just below your variable and type following in console gdb

*   p "your variable name if its primitive type like int"
*   po "your object name"

This will print the value in them.

# three.js - 问题 - 在 Three.js 中的 PhongMaterial 上应用图像纹理时不出现反射

> ID：14701543
> 
> 赞同：0
> 
> 时间：2013-02-05T06:35:08.273
> 
> 标签：three.js

当我在 PhongMaterial 上应用默认纹理时，反射看起来很好，但是，当我在 PhongMaterial 上应用图像纹理时，反射不会出现。

请务必将您对这个问题的反馈发送给我。非常感谢您的帮助。

谢谢阅读。

问候，维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:54:28.570

您需要为您的问题显示一些代码。一种用于默认纹理，一种用于图像纹理。坦率地说，所有纹理都是图像，那么默认纹理是什么意思。

# android - 如何使用谷歌地方在android中获取一个城市中的所有百货商店？

> ID：14701549
> 
> 赞同：6
> 
> 时间：2013-02-05T06:35:31.933
> 
> 标签：android, google-maps, google-maps-api-3, google-places-api, google-places

嗨，我开发了一个应用程序，它使用 google-places API 来获取附近百货公司的列表。这很好用，我正在使用[本](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)教程来获取这些位置，但现在我需要为此添加一个更多功能，即；是否可以获得特定城市中所有百货商店的详细信息，如果可以，如何做到这一点。

如果不可能，该怎么做。我已经搜索了互联网，但我找不到任何有用的东西。

```
To summarize I need to have 3 buttons in my app. 
1\. Displays the map which displays the nearby department stores.
2\. Displays the nearby stores in the form of a list.
3\. Displays the list of stores in a particular city. 
```

我是 Android 新手，不明白如何完成上述所有操作。如果有人可以指导我或发布一些教程，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:51:28.543

我认为最好为您的应用程序维护另一个数据库（您自己的）。在您的数据库中存储所有类型的信息，包括纬度和经度。然后从您的应用程序查询您的数据库。您可以使用 JSON 解析器从数据库中检索数据。

快乐编码

# string - 在elisp中转义反斜杠

> ID：14701550
> 
> 赞同：5
> 
> 时间：2013-02-05T06:35:48.527
> 
> 标签：string, escaping, elisp

我正在尝试`\]`在 elisp 中创建字符串以包含在正则表达式中。当我返回字符串时，`\\]`我得到了字符串`\\]`，但是当我返回字符串时，`\]`我得到了字符串`]`。这对我来说真的没有任何意义。这是 ielm 的输出：

```
ELISP> "\\"
"\\"
ELISP> "\\]"
"\\]"
ELISP> "\]"
"]" 
```

这里发生了什么。为什么第一个反斜杠没有转义第二个反斜杠？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T06:47:34.417

您缺少的是字符串的打印方式与您键入它们的方式相同。因此，如果字符串包含需要转义的字符，则会在其前面打印反斜杠。但如果它包含不需要转义的字符，则不会打印。

当您键入`"\\"`时，它会创建一个包含单个反斜杠字符的字符串。这被打印为`"\\"`.

当您键入`"\\["`时，它会创建一个包含两个字符的字符串：反斜杠后跟方括号。这被打印为`"\\["`.

当您键入`"\["`时，反斜杠会转义方括号。这种转义是多余的，因为方括号不需要转义。因此它创建了与 : 相同`"["`的字符串，该字符串包含单个方括号字符。这将打印为`"["`，因为不需要转义方括号。

# c# - 列出元组日期时间

> ID：14701552
> 
> 赞同：0
> 
> 时间：2013-02-05T06:35:53.730
> 
> 标签：c#, linq

我有一个变量`List< Tuple< DateTime, double>> myList`。
给定 a `datetime`，希望它通过 using返回`Tuple`前面的那个。 例如，提供了，想要查看列表中日期时间在 this 之前的最后一个 Tuple 。 `datetime``Linq`
`if "2013-Feb-08 21:34:00"``timestamp`

我该怎么做`Linq`？

编辑：
myList.Where(t => t.Item1 < timestamp).Last();
解决了我的问题。
与myList.TakeWhile(t => t.Item1 < timestamp).Last();相比，哪个在性能方面更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:47:26.700

使用[MoreLinq](http://code.google.com/p/morelinq/wiki/OperatorsOverview) MaxBy（可从 NuGet 获得）：

```
myList.Where(t => t.Item1 < timestamp).MaxBy(t => t.Item1); 
```

或者（如果项目已排序）：

```
myList.TakeWhile(t => t.Item1 < timestamp).Last(); 
```

* * *

更新（使用二进制搜索）写入比较器：

```
public class MyComparer : IComparer<Tuple<DateTime, double>>
{
    public int Compare(Tuple<DateTime, double> x, Tuple<DateTime, double> y)
    {
        return x.Item1.CompareTo(y.Item1);
    }
} 
```

然后搜索

```
 int index = myList.BinarySearch(new Tuple<DateTime, double>(timestamp, 0), 
                                   new MyComparer());

   if (index == 0)
      // there is no items before timestamp

   if (index > 0)
      result = myList[index - 1]; // your item is previous

   if (index < 0) // no tuple with date equal to timestamp
      var nearestIndex = ~index;
      if (nearestIndex > 0)
          result = myList[nearestIndex - 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:56:16.747

```
var result = myList.OrderByDescending(t => t.Item1)
  .SkipWhile(t => t.Item1 > timestamp)
  .First(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:23:26.623

为了获得最佳性能，您根本不应该使用 LINQ。二进制搜索提供了 O(log n) 的性能，而不是 LINQ 可以提供的 O(n)。

为您的类型创建一个比较器：

```
public class MyListComparer : IComparer<Tuple<DateTime, double>> {

  public int Compare(Tuple<DateTime, double> x, Tuple<DateTime, double> y) {
    return x.Item1.CompareTo(y.Item1);
  }

} 
```

将比较器与[`BinarySearch`方法](http://msdn.microsoft.com/en-us/library/ftfdbfx6.aspx)一起使用：

```
int idx = myList.BinarySearch(new Tuple<DateTime, double>(new DateTime(2013,2,8,21,34,0), 0), new MyListComparer());
if (idx < 0) {
  idx = (~idx) - 1;
}
Tuple<DateTime, double> item = myList[idx]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T06:42:14.097

myList.Where(t => t.Item1 < datetime).OrderByDescending(t => t.Item1).Last();

# objective-c - C指针和Objective C指针有什么区别？

> ID：14701553
> 
> 赞同：2
> 
> 时间：2013-02-05T06:35:56.350
> 
> 标签：objective-c, c, pointers

我知道这是一个非常基本的问题。有一些我需要澄清的内存问题。这是我的疑问：

```
int *p = malloc (50); // will allocate 50 bytes and it is pointed by p.

// Freeing C pointer-->

free(p); 
```

Objective-C 指针：

```
ClassAobject *objA = .... // allocated ClassAobject..

// Freeing obj-C pointer--->

objA = nil // Is it enough??? will it release all ivars memory properly.. 
```

如果是这种情况，如果我在目标 C 类中有一些 C 指针怎么办？如何在 ARC 中处理这个问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T06:42:10.510

标题不能反映您的要求。**C 指针和“Objective-C 指针”之间没有区别。**真的，它们只是普通的 C 指针。

您要问的是它们正确用法之间的区别。如果一个指针指向一个Objective-C对象，那么在MRC下，你必须做

```
[obj release]; 
```

减少它的引用计数（这可能会释放它）。在 ARC 下，将指针设置为`nil`就足够了（如您的示例中所示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T13:54:43.887

“C 指针”和“Objective-C 指针”之间没有区别。void* 和 int* 在 C 和 Objective-C 中是完全一样的。

但是，当您使用 ARC 时，某些指针类型由 ARC 专门处理。这些指针类型是：

```
id
Pointers to Objective-C objects like NSString*
Class
Blocks 
```

这些都是指向各种被引用计数的 Objective-C 对象的指针。ARC 自动跟踪存在对这些对象中的任何一个的引用的数量，如果最后一个引用被删除，则对象本身将被释放。

如果一个对象被释放，ARC 会自动删除它所引用的对象的所有引用。但是，如果一个对象的指针不受 ARC 控制，则您必须在 dealloc 中执行您需要执行的任何操作。

# seo - 面包屑应该遵循 URL 结构吗？

> ID：14701554
> 
> 赞同：2
> 
> 时间：2013-02-05T06:36:02.313
> 
> 标签：seo, e-commerce, friendly-url

据我了解，页面离根越近，对 SEO 来说就越好。因此，鉴于不需要保留在 url 中，因此类似的东西`http://mystore.com/book1`具有更多的 SEO 权限。`http://mystore.com/cat1/author1/book1``cat1`

如果我要将商店的 URL 展平为`http://mystore.com/book1`，我是否也应该在面包屑中反映这一点，使其不再跟随`cat1 > author1 > book1`？

请注意，我想保留页面`http://mystore.com/cat1`甚至`http://mystore.com/cat1/author1`（或替代`http://mystore.com/author1`）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:42:52.000

对于 seo，最好将诸如[http://mystore.com/book1](http://mystore.com/book1)之类的 URL 展平，并且 cat1 > author1 > book1 之后的面包屑没有问题（搜索引擎不太聪明地确定站点上的面包屑），但如果面包屑是链接所以对于 seo 会更好 cat1 > author1 > book1 然后只有一个链接 book1。

PS：我认为面包屑更适合真实的人，而不是 seo :)

# python - 使用 python 和 __repr__ 打印嵌套对象

> ID：14701560
> 
> 赞同：1
> 
> 时间：2013-02-05T06:36:43.700
> 
> 标签：python, repr

我很好奇我应该如何实现一个对象的**repr**方法，该对象包含实现**repr**的其他对象。

例如（pythonish）：

```
class Book():
    def__repr__
        return 'author ... isbn'

class Library(): 
    def __repr__:
        me ='['
        for b in books:
            me = me + b.repr()
        me = me + ']'
        return me 
```

我必须直接调用 repr() 方法吗？我似乎不能只是连接它并让它隐式地将其转换为字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:44:13.663

你想要`repr(b)`，没有`b.repr`。 `repr`是一个函数。 `__repr__`是当您调用该对象时`repr`在该对象上调用的魔术方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:49:12.023

在实例上调用`repr()`函数：`Book`

`object.__repr__(self)`^([[文档]](http://docs.python.org/2/reference/datamodel.html#object.__repr__))

```
Called by the repr() built-in function and by string conversions (reverse quotes)
to compute the “official” string representation of an object. [...] The return 
value must be a string object. If a class defines __repr__() but not __str__(),
then __repr__() is also used when an “informal” string representation of 
instances of that class is required. 
```

* * *

```
class Book(object):    
    def __repr__(self):
        return 'I am a book'

class Library(object):    
    def __init__(self,*books):
        self.books = books
    def __repr__(self):
        return ' | '.join(repr(book) for book in self.books)

b1, b2 = Book(), Book()
print Library(b1,b2)

#prints I am a book | I am a book 
```

# ant - 批处理脚本 + ant - 停止自动退出的 cmd 提示符

> ID：14701561
> 
> 赞同：8
> 
> 时间：2013-02-05T06:36:49.943
> 
> 标签：ant, batch-file

我有一个 ant build.xml 可以做一些建筑工作。在我执行这个之前，我需要设置一些变量/环境。我正在使用`.bat`脚本来执行此操作，并且还尝试`ant`直接从那里调用，这样我就不必执行 2 个步骤。

虽然脚本调用了 ant 目标，但命令提示符窗口会在 ant 构建完成后自动退出（无论构建失败/成功）

我已经尝试过`pause`，而且`cmd /k` 他们似乎都没有工作。

该`.bat`文件看起来像这样：

```
@echo off
call C:/somefile.bat
ant targetName
pause
cmd /k 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T08:48:11.443

如果 ant 脚本是控制台应用程序，那么您也需要这样做`call`，否则控制权将转移给它并且永远不会返回批处理

```
@echo off
call C:/somefile.bat
call ant targetName
pause 
```

# assembly - 哪些寄存器可以在函数中安全使用（x86）

> ID：14701563
> 
> 赞同：8
> 
> 时间：2013-02-05T06:37:06.693
> 
> 标签：assembly, x86, abi

根据[Wikipedia](http://en.wikipedia.org/wiki/X86_calling_conventions#Intel_ABI)，英特尔 ABI 允许使用`EAX`，`ECX`并且`EDX`不将它们保存在函数中。
我不确定“英特尔 ABI”是什么意思。这是否意味着所有针对英特尔 CPU 的编译器都强制/遵循它？我正在编写一个将从 C 代码中调用的汇编函数。我可以为所有编译器假设这个吗？（我`x86`目前只针对）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T06:48:51.253

英特尔 ABI 只是英特尔建立的调用约定。

通常，在函数调用期间如何传递参数以及保存或丢弃哪些寄存器由函数的调用约定定义：

[http://en.wikipedia.org/wiki/Calling_convention](http://en.wikipedia.org/wiki/Calling_convention)

特别是对于 __cdecl、__stdcall 和 __fastcall，您应该期望 EAX、ECX 和 EDX 被丢弃，并且您的函数应该保留其他寄存器并在 EAX 上返回（或 EDX:EAX 用于 64 位返回）。

如果您不知道应该使用什么调用约定，则不应该使用汇编语言编写，因为弄乱调用约定可能会导致应用程序中出现可利用的错误。

在 C 中，默认调用约定通常是 __cdecl，对于 Windows 导出的 API，它通常是 __stdcall。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:43:58.090

It's the Intel Application Binary Interface, a set of rules dictating things like what registers are available for use without saving, how arguments are pushed on the stack, whether caller or callee cleans up the stack frames and so on.

If you *know* that the rules are being followed, that's fine. I tend to save everything just in case (other than those things I'm using for returning information of course).

But it's not necessarily enforced for all compilers and you would be unwise to think so unless the compiler specifically states it.

# c# - 更改对象值时未刷新 DataContext

> ID：14701566
> 
> 赞同：4
> 
> 时间：2013-02-05T06:37:22.160
> 
> 标签：c#, .net, wpf, data-binding

我有一个`grid`，它`DataContext`是从后面的代码中分配的：

```
CustomerDataGrid.DataContext = _customerobj; 
```

当某些函数正在执行时，`_customerobj`对象会发生变化：

```
_customerobj = obj; 
```

但`DataContext`不会根据新对象的详细信息进行更新。如果我使用以下内容，它会更新：

```
_customerobj = obj;
CustomerDataGrid.DataContext = _customerobj; 
```

每次**_customerobj**更新时我是否需要遵循相同的操作，或者我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:51:24.617

您所遇到**的不是**由于未实施`INotifyPropertyChanged`.

当您这样做时`CustomerDataGrid.DataContext = _customerobj;`，您将 设置`DataContext`为某个值。之后你设置`_customerobj = obj;`时，你只是给`_customerobj`一个新值，但`DataContext`仍然引用原始对象，所以它不会改变。

例如：

```
string a = "hello";
string b = a; // b points to "hello"
a = "world";  // a points to "world"
              // but b's pointer doesn't change

Console.WriteLine(b); // Outputs "hello" 
```

这意味着您还必须设置 DataContext。

注意：这实际上不是字符串的工作方式，因为 .NET 字符串是不可变的，但希望这能说明问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T09:05:48.630

@AdiLester 上面的回答是正确的，这就是发生这种情况的原因。
也就是说，如果您宁愿只设置一次 DataContext，并且仍然在网格中更改对象，您可以*包装*您的属性（例如在 ViewModel 中），将网格绑定到属性，然后当属性更改时网格也会改变。

例如：

```
public class MyViewModel : INotifyPropertyChanged
{
   private MyObj _customerObj;
   public MyObj CustomerObj
   {
       get { return _customerObj;}
       set
        {
            if (_customerObj != value)
            {
                _customerObj = value;

                if (PropertyChanged != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs("CustomerObj"));
                }
            }
        }
   }
} 
```

现在你可以这样做：

```
 MyViewModel vm = new MyViewModel();
 vm.CustomerObj = //Whatever;
 CustomerDataGrid.DataContext = vm; 
```

当您绑定网格时，请使用：`{Binding CustomerObj}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:13:44.163

正如@Johan Larsson 所建议的，您需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)以让 UI 知道数据已更改。

[本教程](http://www.dreamincode.net/forums/topic/208833-using-the-inotifypropertychanged-functionality/)以简单的方式详细介绍了如何。

# android - 应用程序无法在模拟器上运行

> ID：14701570
> 
> 赞同：0
> 
> 时间：2013-02-05T06:37:29.877
> 
> 标签：android

我是android应用程序开发的初学者。我正在尝试制作一个可以从手机访问联系人的应用程序。我的控制台显示应用程序安装成功，但它没有在模拟器中启动。谁能告诉我什么可以可能是什么原因？？

```
import java.util.ArrayList;
import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity    { 
ListView lvItem;
private Button btnAdd;
String displayName="", emailAddress="", phoneNumber="";
ArrayList<String> contactlist=new ArrayList<String>();
ArrayAdapter<String> itemAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
   lvItem = (ListView)this.findViewById(R.id.listView_items);  
   btnAdd = (Button)this.findViewById(R.id.btnAddItem);
   itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
   lvItem.setAdapter(itemAdapter);
   btnAdd.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
           readContacts();
       }
   });
}

private void readContacts()
{
    ContentResolver cr =getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (cursor.moveToNext()) 
    {
        displayName="";emailAddress=""; phoneNumber="";
        displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
        Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
        while (emails.moveToNext()) 
        { 
            emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
            break;
        }
        emails.close();
        if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
        {
            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
            while (pCur.moveToNext()) 
            {
                 phoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                break;
            }
            pCur.close();
        }
            contactlist.add("DisplayName: "+displayName+", PhoneNumber: "+phoneNumber+", EmailAddress: "+ emailAddress+"\n");
            itemAdapter.notifyDataSetChanged();
    }
    cursor.close(); 
} 
```

}

清单.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.contacts"
        android:versionCode="1"
        android:versionName="1.0" >
        <uses-sdk
           android:minSdkVersion="8"
           android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
               android:name="com.example.contacts.MainActivity"
               android:label="@string/app_name" >
               <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
               </intent-filter>
            </activity>
        </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:52:19.617

在真机上试一下，模拟器上没有任何联系人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:00:56.723

仔细检查您的清单文件 活动名称和访问联系人的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:53:23.503

可能的原因是您没有在清单文件的活动中添加此代码

```
 <category android:name="android.intent.category.LAUNCHER" /> 
```

因此您的应用程序已成功安装，但由于上述代码而无法启动。请添加上述代码，它将起作用...

# android - Android 更新 listview 聚焦

> ID：14701578
> 
> 赞同：0
> 
> 时间：2013-02-05T06:38:32.560
> 
> 标签：android, listview

您好我正在尝试使用列表视图。我的列表视图有一个项目列表，当我第一次启动程序时会显示这些项目。然后在同一个屏幕中，如果用户按下按钮，则会弹出一个新屏幕，然后他们将另一个项目输入到列表中。但是在添加项目屏幕关闭后，列表不会更新。

您如何在重新聚焦时更新列表？我似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:56:33.193

`adapter.notifyDataSetChanged();`将项目添加到列表后调用。

# android - 减小位图图像大小后图像旋转

> ID：14701584
> 
> 赞同：3
> 
> 时间：2013-02-05T06:38:45.457
> 
> 标签：android, bitmap

我的应用程序拍照然后上传。由于拍摄的照片尺寸较大，因此我必须缩小其尺寸然后上传。因此，我使用以下代码来减小存储在 SD 卡中某处的相机拍摄的图像的大小。但我不知道代码有什么问题，如果图像是纵向的，图像会逆时针旋转 90 度，否则在横向模式下拍摄时图像很好。

以下是我用来减小大小的代码。

```
public File getReducedImage(File mediaFile){        

    Bitmap b = decodeFile(mediaFile);
    return getfileFromBitmap(b, mediaFile.getPath());
}
private File getfileFromBitmap(Bitmap b, String path) {     
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    b.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

    //you can create a new file name "test.jpg" in sdcard folder.
    File f = new File(path);
    try {
        f.createNewFile();
        FileOutputStream fo = new FileOutputStream(f);
        fo.write(bytes.toByteArray());          
        // remember close de FileOutput
        fo.close();
        Log.v(TAG, "returned");
        return f;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.v(TAG, "Exception caught");
        return null;
    }
    //write the bytes in file
}

private Bitmap decodeFile(File f){
     final int IMAGE_MAX_SIZE=400;
    Bitmap b = null;
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        FileInputStream fis = new FileInputStream(f);

        BitmapFactory.decodeStream(fis, null, o);

        fis.close();

        int scale = 1;
        if (o.outHeight > IMAGE_MAX_SIZE || o.outWidth > IMAGE_MAX_SIZE) {
            scale = (int)Math.pow(2, (int) Math.round(Math.log(IMAGE_MAX_SIZE / 
               (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
        }

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        fis = new FileInputStream(f);
        b = BitmapFactory.decodeStream(fis, null, o2);
        fis.close();
    } catch (IOException e) {
        Log.v(TAG, "error in bitmap conversion");
        e.printStackTrace();

    }
    return b;
} 
```

编辑：实际上问题是图像一旦调整大小就会丢失其方向信息。我通过适当旋转来解决它。以下是我的解决方案。希望它会帮助某人。

公共文件getReducedImage（文件媒体文件）{

```
 Bitmap b = decodeFileWithRotationIfNecessary(mediaFile);
    File f = getfileFromBitmap(b, mediaFile.getPath());     
    return f;
}

private File getfileFromBitmap(Bitmap b, String path) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    b.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

    // you can create a new file name "test.jpg" in sdcard folder.
    File f = new File(path);
    try {
        f.createNewFile();
        FileOutputStream fo = new FileOutputStream(f);
        fo.write(bytes.toByteArray());
        // remember close de FileOutput
        fo.close();
        return f;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.v(TAG, "Exception caught");
        return null;
    }
    // write the bytes in file
}

private Bitmap decodeFileWithRotationIfNecessary(File f) {
    final int IMAGE_MAX_SIZE = 400;
    Bitmap b = null;
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        FileInputStream fis = new FileInputStream(f);

        BitmapFactory.decodeStream(fis, null, o);

        fis.close();

        int scale = 1;
        if (o.outHeight > IMAGE_MAX_SIZE || o.outWidth > IMAGE_MAX_SIZE) {
            scale = (int) Math.pow(
                    2,
                    (int) Math.round(Math.log(IMAGE_MAX_SIZE
                            / (double) Math.max(o.outHeight, o.outWidth))
                            / Math.log(0.5)));
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        fis = new FileInputStream(f);
        b = BitmapFactory.decodeStream(fis, null, o2);
        fis.close();
    } catch (IOException e) {
        Log.v(TAG, "error in bitmap conversion");
        e.printStackTrace();

    }

    Bitmap bMapRotate = Bitmap.createBitmap(b, 0, 0, b.getWidth(),
            b.getHeight(), getMatrix(f), true);

    return bMapRotate;
}

private Matrix getMatrix(File f) {
    Matrix mat = new Matrix();
    mat.postRotate(90);
    try {
        ExifInterface exif = new ExifInterface(f.getPath());

        int orientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION, -1);

        switch (orientation) {
        case ExifInterface.ORIENTATION_FLIP_HORIZONTAL:
            Log.v(TAG, "flip horizontal");

            break;
        case ExifInterface.ORIENTATION_FLIP_VERTICAL:

            Log.v(TAG, "flip vertical");
            break;

        case ExifInterface.ORIENTATION_ROTATE_180:
            Log.v(TAG, "rotate 180");
            mat.postRotate(90);

            break;
        case ExifInterface.ORIENTATION_ROTATE_90:
            Log.v(TAG, "rotate 90");

            break;
        case ExifInterface.ORIENTATION_ROTATE_270:
            Log.v(TAG, "rotate 270");
            mat.postRotate(180);

            break;
        case ExifInterface.ORIENTATION_TRANSPOSE:
            Log.v(TAG, "transpose");

            break;
        case ExifInterface.ORIENTATION_UNDEFINED:   
            Log.v(TAG, "undefined");

            break;
        case ExifInterface.ORIENTATION_NORMAL:
            Log.v(TAG, "normal");
            mat.postRotate(270);

            break;
        default:
            Log.v(TAG, "default");
        //  mat.postRotate(0);

            break;
        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.v(TAG, "error in finding exif information");
    }

    return mat;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T07:28:25.260

一个原因可能是您没有保留 EXIF 数据：

```
ExifInterface ei = new ExifInterface(<file-path>);

int o = ei.getAttributeInt(ExifInterface.TAG_ORIENTATION,
                           ExifInterface.ORIENTATION_NORMAL);

//--decode -- encode save--

ExifInterface ei2 = new ExifInterface(<new-file-path>);

ei2.setAttribute(ExifInterface.TAG_ORIENTATION,o);

ei2.saveAttributes(); 
```

默认相机应用程序将应用正确的方向保存。如果您使用自己的代码拍摄/修改图片，则必须以正确的方向保存图像。

# asp.net-mvc-3 - 忽略编辑视图asp.net mvc 3中的一个文件

> ID：14701585
> 
> 赞同：0
> 
> 时间：2013-02-05T06:38:45.287
> 
> 标签：asp.net-mvc-3, edit

我在 mu 模型中有一个属性，我不希望用户在编辑操作期间访问它的值。如果我不将它包含在编辑视图中，它会得到一个空值。如果我将它作为隐藏值包含在内，用户可以通过浏览器中的“查看源代码”选项查看它的值。

有什么提示吗？这是我用于编辑操作的 ProfileController 代码

```
 public ActionResult Edit()
    {
        Profile profile = null;
        if (_db.Profiles.Count() > 0)
            profile = _db.Profiles.Single(p => p.UserName == User.Identity.Name);
        if (null == profile)
            return RedirectToAction("Create");
        else
            return View(profile);
    }
    //
    // POST: /Profile/Edit/5

    [HttpPost]
    public ActionResult Edit( Profile newProfile)
    {
        try
        {
            TryUpdateModel(newProfile);
            if (ModelState.IsValid)
            {
                _db.Entry(newProfile).State = EntityState.Modified;
                _db.SaveChanges();
                if (newProfile.Confirmed)
                {
                    return RedirectToAction("Index", "Home");
                }
                else
                    return RedirectToAction("Confirm");
            }
            else
                return View(newProfile);
        }
        catch
        {
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:04:37.697

在这种情况下，您正在编辑数据库中的现有条目。这样你就可以：

*   使用对象的唯一标识符从数据库中加载现有数据
*   仅覆盖您希望从您从 POST 获得的模型中保留的一组值
*   刷新对数据库的更改

这样，您不必在页面中包含确认号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:20:43.483

这是一种解决方案。在注册期间，当在 DB 中创建新记录时，为该用户创建一个新的 GUID() 字段。

```
new Guid() 
```

然后，每当用户想要编辑他/她的个人资料时，您都会将该 guid 作为 URL 参数之一。从数据库中提取数据时，只需获取与该 GUID 匹配的记录。

```
var record = repository.FirstOrDefault(x => x.Guid == 'guid from url'); 
```

记录 => 将保存您的用户数据。

这样，您就不会以任何方式显示任何验证码。

# html - CSS：扩大字体大小时保持div大小相同

> ID：14701595
> 
> 赞同：0
> 
> 时间：2013-02-05T06:39:48.997
> 
> 标签：html, css

我想在将鼠标悬停在链接上时放大链接的字体大小，这可以通过 CSS 代码中的以下行轻松实现。

```
a:hover {font-size:110%} 
```

但是，当链接字体大小增加时，它也会“膨胀”`<div>`我的链接所在的大小，这会“挤压”它下面的 div 并使整个页面“摇晃”。

有没有办法保持`<div>`相同的大小，而链接字体大小放大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:02:10.493

你可以让你`div`有一个固定的大小，并且用一个`position:absolute;`为你的`<a>`，使它的字体变大不会影响到`<div>`。

**[演示](http://jsfiddle.net/AliBassam/EsNSe/)**

**HTML**

```
<div id="content">
    <a href="#">Hey there</a>
</div>
<div id="more">More Divs</div> 
```

**CSS**

```
a
{
    font-size:16px;
    position:absolute;

}
a:hover
{
    font-size:110%;
}
#content
{
    position:relative;
    height:20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:07:54.223

上面的代码有效，但这里还有另一种可能适用于您的解决方案。没有理由使用 % ，如果有，这个文档仍然有效。

有 2 个示例：字体大小为像素，字体大小为百分比。

[http://jsfiddle.net/MJUjP/](http://jsfiddle.net/MJUjP/)

HTML

```
<div class="main">
    <div class="content">
        PX
    </div>
</div>

<div class="main">
    <div class="content2">
        %
    </div>
</div> 
```

CSS

```
.main {
    /*Styling for better viweing*/
    background: #000fff;
    float:left;
    height: 100px;
    width: 100px;
}
.content{
     /*Styling for better viweing*/
    background: #ff0000;
    margin: 8px;
    border: #000 1px solid;
    float:left;
    text-align: center;

    /*Set Size of DIV snd font*/
    height:80px;
    width:80px;
    font-size:30px;

    /*Optional to hide overflow*/
    overflow-x:hidden;
    overflow-y:hidden;
}
.content:hover{
    /*Set New Font Size*/
    font-size:80px;
}

.content2{
     /*Styling for better viweing*/
    background: #ff0000;
    margin: 8px;
    border: #000 1px solid;
    float:left;
    text-align: center;

    /*Set Size of DIV snd font*/
    height:80px;
    width:80px;
    font-size:100%;
    line-height:100%;

    /*Optional to hide overflow*/
    overflow-x:hidden;
    overflow-y:hidden;
}
.content2:hover{
    /*Set New Font Size*/
    font-size:800%;
    line-height:110%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:42:12.760

HTML：

```
<div id="mydiv">
   <a href="#">Link</a>
</div> 
```

CSS：

```
#mydiv a {
   display:block;
   font: 16px/30px Arial, Helvetica, sans-serif;
   border:1px solid #CCC;
   padding:10px;
}
#mydiv a:hover {
   font-size: 200%;
} 
```

查看直播[http://jsfiddle.net/imtiazmasrur/rqMLd/](http://jsfiddle.net/imtiazmasrur/rqMLd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-25T10:24:46.927

听起来您`em`在`div`. 这通常不是一件坏事，但如果你增加字体大小，你也会增加`em`. 正常情况下`1 em = 16px`。

您可以使用您的属性的`rem`长度值。这样您就可以使用 html 根目录的标准字体大小。（只要你没有做这样的事情。那会改变to的标准值。）`height``div``html { font-size 35px; }``em``35px`

或者你可以去 oldschool 并`px`在你的`div`.

# sencha-touch - 如何在可滚动的配置中使面板不可滚动

> ID：14701597
> 
> 赞同：1
> 
> 时间：2013-02-05T06:39:55.100
> 
> 标签：sencha-touch, sencha-touch-2

当我将配置设置为可滚动时，整个面板都会滚动。但是，`items`在可滚动面板中，我想锁定一个`panel`和`scroll`其余部分。

怎么做到呢？

```
config: {
    scrollable: true,
    items: [{
        xtype: 'panel',
        layout: {
            //type: 'vbox',
            //align: 'start',
            pack: 'fit'
        },
        items: [{
            //want to lock this panel
            xtype: 'panel',
            id: 'name',
            flex: 3,
            scrollable: false,
            html: '<b>Hello</b><br/>' +
                'My name is rohan'
        }, {
            xtype: 'panel',
            scrollable: true,
            layout: 'fit',
            flex: 5,
            listeners: {
                initialize: function(thisObj, eOpts) {
                    var parentObj = Ext.getCmp('id')
                    var service = parentObj.config.record.get('service')
                    var serviceArr = services.length;
                    for (i = 0; i < serviceArr; i++) {
                        thisObj.insert(i, {
                            xtype: 'panel',
                            cls: 'service',
                            layout: 'fit',
                            items: [{
                                html: '<br/>' + servicesOffered[i].service,
                                cls: 'serviceTitle',
                            }, {
                                xtype: 'list',
                                cls: 'namelist',
                                scrollable: 'false',
                                itemTpl: '{name} <span> {tel} - {mobile}</span>',
                                data: servicesOffered[i].namedetails,
                                height: 332,
                            }]
                        });
                    }
                }
            }
        }]
    }]
} 
```

现在整个面板正在滚动。我想锁定最上面的面板。

# android - 在 Android 中----我们如何在 Text to Speech 中提示哪个单词正在说话？

> ID：14701602
> 
> 赞同：2
> 
> 时间：2013-02-05T06:40:12.583
> 
> 标签：android, text-to-speech, google-text-to-speech

任何机构帮助我在文本到语音中提供提示？

我在 Array 中得到消息，但`TextToSpeech.QUEUE_ADD`需要几秒钟才能说出并且使粗体字快速运行。

我的代码如下：-（tts是一个`TextToSpeech`对象）

```
String[] strArr = txtText.getText().toString().split(" ");
txtText.setText("");
for(int i=0;i<strArr.length;i++)
{
   Log.d("","Value :- "+strArr[i]);
   HashMap<String, String> myHashAlarm = new HashMap<String, String>();
   myHashAlarm.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_NOTIFICATION));
   myHashAlarm.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, "test");
   tts.speak(strArr[i], TextToSpeech.QUEUE_ADD,myHashAlarm);
   txtText.append(Html.fromHtml("<b>" + strArr[i] + "</b>"+" "));
} 
```

我也无法理解`tts.speak`最后一个参数（`myHashAlarm`）。它是如何工作的？

谢谢

# php - 邮件发送，但邮件中没有变量 - cakePHP

> ID：14701605
> 
> 赞同：0
> 
> 时间：2013-02-05T06:40:33.177
> 
> 标签：php, email, cakephp-2.2

**背景**

我有一个发送电子邮件的脚本。这封邮件发送得很好。它发送模板，设计工作正常，所有硬编码文本都在那里。

**问题**

尽管邮件发送正常，但所有变量都丢失了。

**代码**

这是我的电子邮件模板，`boardroom_email.ctp`在`APP/View/Emails/html/`文件夹中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
  </head>

  <body bgcolor="#CCCCCC">
    <table width="800" align="center" bgcolor="#8dc641" cellpadding="0" cellspacing="0">
      <tr>
        <td>
          <!-- Header Image -->
        </td>
      </tr>
      <tr>
        <td style="font-family:Arial, Helvetica, sans-serif; font-size:18px; font-weight:bold"><h3 align="center">New Boardroom Booking</h3></td>
      </tr>
      <tr>
        <td style="padding:10px">
          <table width="100%" cellpadding="5" cellspacing="5" style="font-family:Arial, Helvetica, sans-serif; font-size:14px" bgcolor="#FFFFFF">
            <tr>
              <td colspan="2">
                The following Boardroom Booking has been made
              </td>
            </tr>
            <tr>
              <td width="30%">
                <b>Requested By:</b>
              </td>
              <td width="70%">
                <?php echo $BoardroomBooking['BoardroomBooking']['name'] ?>
              </td>
            </tr>
<!-- File truncated because the rest just repeats the above variable --> 
```

这里是 BoardroomBookingsController 中的函数，当成功保存记录时会调用该函数。

```
function _sendNewBoardroomBookingMail($id) {
    $BoardroomBooking = $this->BoardroomBooking->read(null,$id);
    $this->Email->to = array('Person 1 <person1@mycompany.com>', 'Person 2 <person2@mycompany.com>');
    $this->Email->subject = 'A new boardroom booking has been made';
    $this->Email->replyTo = 'no-reply@mycompany.com';
    $this->Email->from = 'My Company Intraweb <no-reply@mycompany.com>';
    $this->Email->template = 'boardroom_email';
    $this->Email->sendAs = 'html';
    $this->set('BoardroomBooking', $BoardroomBooking);
    $this->Email->delivery = 'smtp';
    $this->Email->_debug = true;
    if ($this->Email->send()) {
        return true;
    } else {
        return false;
    }
} 
```

**结果**

这是上面的代码给我的：

![在此处输入图像描述](../Images/1e22e97353754d18937731029d1edc56.png)

**问题**

显然我错过了一些小东西。我让它在一个阶段工作，不记得我改变了什么，但现在，它给我发了一封没有数据的电子邮件。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:00:56.927

`$this->set('BoardroomBooking', $BoardroomBooking);`在新版本中不起作用`CakeEmailComponent`

你需要使用：

```
$this->Email->viewVars(compact('BoardroomBooking'));
//or
$this->Email->viewVars(array('BoardroomBooking' => $BoardroomBooking)); 
```

# android - 通过代码发送短信

> ID：14701606
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:40:36.460
> 
> 标签：android, sms

我对在 Android 手机中发送短信有疑问。

我想制作将 SMS 发送到内部存储上的文本文件中写入的号码的功能，其正文写入内部存储上的文本文件中。

但我不知道如何制作这个功能。

你能帮我知道如何实现这个功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:19:08.727

这是如何

第1步。

在您的 AndroidManifest.xml 文件中包含以下权限

开放标签

使用权限 android:name="android.permission.SEND_SMS"

closetag

第2步。

导入android.telephony.SmsManager；

步骤 3。

在您将从表单中获取消息和电话号码的方法中使用此代码段

```
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(phoneNumber, null, message, null, null); 
```

并从内部存储中获取值，请参阅此链接

[http://www.mysamplecode.com/2012/06/android-internal-external-storage.html](http://www.mysamplecode.com/2012/06/android-internal-external-storage.html)

# python - 传输异常

> ID：14701608
> 
> 赞同：3
> 
> 时间：2013-02-05T06:40:54.943
> 
> 标签：python, hadoop, hbase, thrift

我正在尝试导入happybase，但在连接时收到以下错误消息。我已经运行了 Hadoop 伪节点集群和 Hbase。安装的组件版本如下，Hadoop版本 - 1.0.4 Hbase版本 - 0.94.4 happybase -0.4

有人可以查看下面的例外情况并让我知道，如果有任何节俭的特定设置或任何解决此问题的指导。

谢谢你。

```
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.

import happybase

connection = happybase.Connection('localhost')

Traceback (most recent call last):

 File "<stdin>", line 1, in <module>
    File "/Library/Python/2.6/site-packages/happybase/api.py", line 121, in __init__
    self.open()

    File "/Library/Python/2.6/site-packages/happybase/api.py", line 138, in open
    self.transport.open()

    File "/Library/Python/2.6/site-packages/thrift/transport/TTransport.py", line 149, in open
    return self.__trans.open()

    File "/Library/Python/2.6/site-packages/thrift/transport/TSocket.py", line 99, in open
    message=message)

    thrift.transport.TTransport.TTransportException: Could not connect to localhost:9090 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T16:50:26.560

在尝试连接之前，请确保您已启动 Thrift 服务器。

```
hbase thrift start -threadpool 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:53:29.443

trift 服务器必须启动并运行。您的连接也必须打开：

```
nohup hbase thrift start & 
```

使用前在python中打开连接：

```
connection.open() 
```

例子：

```
#!/usr/bin/python
import happybase
connection = happybase.Connection('localhost', autoconnect=False)
connection.open() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T00:55:42.623

```
connection = happybase.Connection('localhost','2181') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T14:56:44.313

这对我有用：

```
sudo server hbase-thrift restart 
```

# unit-testing - 使用 WindowsStoreApp 的单元测试库中的 CeateFile2 读取 Documents 文件夹中的文件

> ID：14701609
> 
> 赞同：0
> 
> 时间：2013-02-05T06:40:56.067
> 
> 标签：unit-testing, windows-8, windows-store-apps

我正在编写一个单元测试库（用于 Windows 商店应用程序）。我需要读取一个 bin 文件作为启动测试用例的一部分。我在我的单元测试库的 appmanifest 中提供了读取文档文件夹中的 .bin 文件的功能。我正在使用 CreateFile2 函数以读取模式打开文件。

但是 CreateFile2 函数因句柄无效而失败，并且 GetLastError() 正在返回 AccessDenied 。

我们不能使用 CreateFile2 函数吗？文档说它在 windowsstore Apps 中受支持。或者我们不能使用这个 CreateFile API 读取文档文件夹吗？如果我想在 CreateFile2 函数而不是 winRT API 上使用，那么放置 bin 文件的备用位置是什么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:51:32.540

我能够使用 CreateFile2 和其他旧功能成功访问的唯一位置是应用程序包和 ApplicationData localFolder。

# trigger.io - 如何从“Forge”更改我的 Trigger.IO iOS 应用程序名称？

> ID：14701610
> 
> 赞同：0
> 
> 时间：2013-02-05T06:40:57.610
> 
> 标签：trigger.io

当我在 iPhone 配置实用程序工具中查看我构建的 iOS Trigger.IO 应用程序时，它有一个名称`Forge`。我如何将其更改为我自己的名字？

![在此处输入图像描述](../Images/92c2ba0ffd48298e07e0d4353112969f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:14:35.857

不，`Forge`名称已包含在内：我们是否忽略了为什么需要自定义二进制名称的原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:43:47.900

您可以像这样在 config.json 中设置值：

```
 "config_version": "3", 
    "uuid": "xxx", 
    "author": "joe.blow@whatever.com",
    "name": "My App", 
    "platform_version": "v1.4", 
    "version": "1.0.0", 
    "description": "Your app description." 
```

或者，您可以使用 Toolkit UI - [http://docs.trigger.io/en/v1.4/config.html](http://docs.trigger.io/en/v1.4/config.html)

# extjs - 未捕获的 Ext.AbstractManager.register()：注册重复 id

> ID：14701612
> 
> 赞同：3
> 
> 时间：2013-02-05T06:40:59.697
> 
> 标签：extjs, extjs4, extjs4.1

在下面的应用程序中，我试图将`id`'s 动态添加到生成的项目中。我的代码工作正常，但是当我在其中添加以下两条注释行时。它抛出错误

> 未捕获的 Ext.AbstractManager.register()：向该管理器注册重复的 id "73"

* * *

当我试图找出错误的来源时，我发现代码运行良好，直到执行`81`id's ( `console.log(_idGen)`)。由此可见，该错误与超出范围异常有关。(9*9 = 81) 并且***仅在 Fiddle 中***，当我将 HTML 文本添加到子面板时，我才知道它们在`73 to 81`??( 而不是`1 to 81`) 之间，这让我很困惑，怎么办？

**[小提琴](http://jsfiddle.net/v7hZH/1/)**

```
Ext.onReady(function(){
  var _idGen = 1;
  var childItems = [], items = [];

  for (var i = 0; i < 9; i++) {
    childItems.length = 0;
    for (var j = 0; j < 9; j++) {
       childItems.push({
           xtype: 'panel',
 /****************************/
           id: _idGen,
           html: _idGen + "",
 /****************************/
           width: 50,
           height: 50,
           style: {borderWidth: '1px'}
       });
       console.log(_idGen);
/*****************************/
       _idGen++;
/*****************************/
    }
    items.push({
        xtype: 'panel',
        layout: {
            type: 'table',
            columns: 3
        },

        items: childItems
    });
  }
  Ext.create('Ext.container.Container', {
     layout: {
        type: 'table',
        // The total column count must be specified here
        columns: 3
     },
     renderTo: Ext.getBody(),    
     style: {width: '455px',marginLeft: 'auto',marginRight: 'auto', marginTop: '30px'},
     items: items
  });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:44:10.960

如果不是严格要求，请不要用您的韩元创建 ID！

它始终是错误的来源，所以当框架已经照顾好时，为什么还要为此烦恼。

使用自定义标识符属性或更好的，框架已经支持的属性`itemId`。该属性只需要在每个组件级别中是唯一的。您还可以使用该`getComponent('your-item-id')`方法接收嵌套到调用组件中的组件。

我已修改您的示例以使用`itemId's`并在底部为您提供演示查询

见**[JSFiddle](http://jsfiddle.net/v7hZH/2/)**

```
var _idGen = 1,
      _outerIdGen = 1;
  var childItems = [], items = [];

  for (var i = 0; i < 9; i++) {
  // You will keep the same array with and just alter all instances each time. 
  // This is what causes all your problems and the duplicates!      
  // childItems.length = 0; 
  // But you need a new array each time
    childItems = [];
    for (var j = 0; j < 9; j++) {
       childItems.push({
           xtype: 'panel',
           itemId: 'inner-'+_idGen++,
           html: _idGen + "",
           width: 50,
           height: 50,
           style: {margin: '1px',borderColor: 'white',backgroundColor:'cornflowerblue'}
       });
    }
    items.push({
        xtype: 'panel',
        layout: {
            type: 'table',
            columns: 3
        },
        itemId: 'outer-'+_outerIdGen++,
        items: childItems
    });
  }
  Ext.create('Ext.container.Container', {
     layout: {
        type: 'table',
        // The total column count must be specified here
        columns: 3
     },
     renderTo: Ext.getBody(),    
     style: {width: '455px',marginLeft: 'auto',marginRight: 'auto', marginTop: '30px'},
     items: items
  });
  console.log(Ext.ComponentQuery.query('container > panel[itemId=outer-1] > panel[itemId=inner-73]')[0]); 
```

# logging - JavaFx 日志记录示例

> ID：14701617
> 
> 赞同：5
> 
> 时间：2013-02-05T06:41:38.563
> 
> 标签：logging, javafx

我正在使用带有本机打包的 JavaFx。将系统控制台输出记录到文件的最佳方法是什么？是否可以使用 sl4j-simple？你能举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:04:14.817

最简单的方法可能是使用[java.util.logging](http://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html)框架并将其输出路由到文件，方法如下：[How to get java Logger output to file by default](https://stackoverflow.com/questions/751736/how-to-get-java-logger-output-to-file-by-default)。然后，您无需为日志框架打包任何额外的依赖项而烦恼。如果你这样做，你必须使用 java.util.logging api，它与 slf4j 相比略显尴尬，但它仍然可以使用。

你当然可以使用[slf4j](http://www.slf4j.org/)作为你的接口，但是你需要在你的应用程序中打包额外的 jar 文件来完成它。如果您了解 maven，那么打包库的最简单方法可能是使用[zenjava maven 插件](http://www.zenjava.com/2012/11/24/from-zero-to-javafx-in-5-minutes/)构建您的项目，并将适当的依赖项放置在您想要使用的 slf4j 日志库的项目 pom 中。（虽然我自己没有使用过 zenjava maven 工具）。

# javascript - 如何在跨域的 iframe 中获取父域名？

> ID：14701620
> 
> 赞同：8
> 
> 时间：2013-02-05T06:42:01.923
> 
> 标签：javascript, jquery, iframe

我想在 iframe javascript 中获取父域或 url 或主机名。

我已经用过`document.referrer`，但它只在第一次工作。我的意思是我的 iframe 包含表单，因此当用户提交表单时，iframe 会再次加载，并且引用者将成为我的 iframe 的域。

现在每次加载 iframe 时，我只需要父域名，因为我正在使用它创建链接。

例子：

```
$(".setUrl").each(function(){
                var referrer = document.referrer;
                this.href=referrer+"/abc.html";
  }); 
```

但由于我上面提到的原因，这只适用于第一次。那么有人可以帮我克服这个问题吗？

询问我是否需要更清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:21:16.987

当您在 iFrame 中拥有父域 URL（来自 document.referrer）时，您可以将该 URL 存储在 localStorage 中，然后在提交表单后，从**localStorage**本身检索它。

就像是：

```
var referringURL = document.referrer;
//store the url in localStorage 
localStorage['referrer'] = referringURL; 
```

现在提交表单后：

```
var originalReferrer = localStorage['referrer'];
//you have the original referrer back 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:18:45.240

你可以为此做一件事：

1.  将您的父域/网址/主机名保存在表单中的某个隐藏变量中。然后提交该表单。
2.  不要从当前 url 设置/保存/使用 documentReferrer 值。需要时，使用隐藏变量。

您可以使用任何逻辑...例如：

```
var refval=$("#documentReferrer").val();
if(refval=="")
{
     $("#documentReferrer").val(referrer); //So, for the future, this will not execute...
} 
```

# php - 如何从 PHP 打印以下行

> ID：14701626
> 
> 赞同：-2
> 
> 时间：2013-02-05T06:42:35.423
> 
> 标签：php, escaping, echo

嗨朋友一个简单的问题。

如何从 PHP echo 打印以下行

```
<?xml version="1.0" encoding="iso-8859-1"?> 
```

我对转义序列感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:50:06.500

## Printing the XML

You can either escape the double quotes like so:

```
echo "<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>"; 
```

or you can use single quotes, and therefore no escaping is needed:

```
echo '<?xml version="1.0" encoding="iso-8859-1"?>'; 
```

Alternatively, you can also use the `print()` method like so:

```
print "<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>"; 
```

or

```
print '<?xml version="1.0" encoding="iso-8859-1"?>'; 
```

Which one you use, depends on what you would like to achieve. In most cases `echo` is the better option as it is ever so slightly faster.

[**See Here**](https://stackoverflow.com/questions/234241/how-are-echo-and-print-different-in-php) for the differences between `echo` and `print`

## Outputting XML to the browser

However, if you are trying to generate XML, then it is also important to output the correct headers for the document, like so:

```
header("Content-Type: text/xml"); 
```

**This will tell the browser to interpret what you output, as XML**

### Advanced XML Outputting

To take the XML output a step further, you may want to look into the `simpleXML` extension in PHP.

**[See Here](http://php.net/simplexml)** for more information

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:53:13.483

```
echo <<<XML
<?xml version="1.0" encoding="iso-8859-1"?>
XML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:53:23.343

您必须放置标题（让浏览器知道如何呈现显示）：

```
header ("Content-Type:text/xml");
echo "<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T06:43:38.377

使用单引号：

```
echo '<?xml version="1.0" encoding="iso-8859-1"?>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T06:43:43.050

```
echo '<?xml version="1.0" encoding="iso-8859-1"?>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T06:49:40.557

you can screen them using "\" (if you have some var in this statement) i.e. echo `"<?xml version=\"1.0\" encoding=\"iso-8859-1"?>\"`;
If no var then just `'<?xml version="1.0" encoding="iso-8859-1"?>'`
Or you can use $text = `'<?xml version="1.0" encoding="iso-8859-1"?>'`; echo $text;
Or you can use [Heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc) (use it for big text only)

And read about difference between ' and " in PHP

# java - 使用 JVMTI 计算 CPU 使用率

> ID：14701627
> 
> 赞同：1
> 
> 时间：2013-02-05T06:42:37.500
> 
> 标签：java, performance, cpu-usage, jvmti, hprof

我正在寻找我的 java 应用程序的 CPU 使用率。我发现获得 CPU 使用率的最佳方法是 (process_time/elapsed_time)*100.0。对于 java 应用程序，process_time 由 com.sun.management.OperatingSystemMXBean 获取。有没有办法使用 JVMTI 计算 CPU 使用率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-30T08:14:31.373

您可以为此使用 OSHI。请参阅此处的方法和文档[OSHI](https://oshi.github.io/oshi/apidocs/oshi/software/os/OSProcess.html)

# core-data - Restkit Core Data 映射崩溃应用程序

> ID：14701630
> 
> 赞同：0
> 
> 时间：2013-02-05T06:42:54.503
> 
> 标签：core-data, ios6, restkit

我正在将 restkit 响应映射到核心数据，但它会使应用程序崩溃。即使我无法使用restkit映射核心数据，我也阅读了restkit核心数据映射的文档。我想问几个问题。我还尝试了在 restkit [RKTwitterCoreData](https://github.com/RestKit/RestKit/tree/development/Examples/RKTwitterCoreData)中使用的方式。但它也会使应用程序崩溃。但它会造成这样的混乱。

1）这是否需要使用restkit [RKTwitterCoreData](https://github.com/RestKit/RestKit/tree/development/Examples/RKTwitterCoreData)示例中使用的种子数据库？2）如何直接将响应映射到核心数据类？这是我的代码。

```
 RKManagedObjectStore *objectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel: [NSManagedObjectModel mergedModelFromBundles:nil]];

[objectStore addSQLitePersistentStoreAtPath: [RKApplicationDataDirectory() stringByAppendingPathComponent:@"CoffeeShop.sqlite"] fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:nil];
[objectStore createManagedObjectContexts];

RKObjectManager* objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"https://api.foursquare.com/v2"]];
[objectManager setManagedObjectStore:objectStore];

RKEntityMapping* venueMapping = [RKEntityMapping mappingForEntityForName:@"Venue" inManagedObjectStore:objectStore];

[venueMapping addAttributeMappingsFromDictionary:@{
 @"name" : @"name",
 @"categories":@"prefix"}];

venueMapping.identificationAttributes=@[@"name"];

RKResponseDescriptor * responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:venueMapping
pathPattern:nil 
keyPath:@"response.venues"
statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[objectManager addResponseDescriptor:responseDescriptor]; 
```

这是发出请求和检索数据。

```
 RKObjectManager *objectManager=[RKObjectManager sharedManager];
  NSString *latLon = @"23.0280,72.5577";
  NSString *clientID = [NSString stringWithUTF8String:kCLIENTID];
  NSString *clientSecret = [NSString stringWithUTF8String:kCLIENTSECRET];
  NSDictionary *queryParams;
  queryParams = [NSDictionary dictionaryWithObjectsAndKeys:latLon, @"ll",    clientID, @"client_id", clientSecret, @"client_secret", @"coffee", @"query", @"20120602", @"v", nil];

 [objectManager getObjectsAtPath:@"venues/search" parameters:queryParams success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult)
 {
     NSLog(@"It Worked: %@",mappingResult.array);
     data=[[NSMutableArray alloc] initWithArray:mappingResult.array];
     NSLog(@"Data Counr%d",[data count]);
     // Or if you're only expecting a single object:
   //  NSLog(@"It Worked: %@", [mappingResult firstObject]);
     //[self.tableView reloadData];

 }failure:^(RKObjectRequestOperation *operation, NSError *error) {
     NSLog(@"It Failed: %@", error);
 }]; 
```

这是一个崩溃日志

```
2013-02-05 11:52:19.209 CoffeeShop[2715:11603] I restkit.network:RKHTTPRequestOperation.m:152 GET 'https://api.foursquare.com/v2/venues/search?client_id=U0JM2MAO3202LHDEGSJXOBNJODNWOFK2DS2F0IFDFJYQ2QAT&client_secret=5RNBGWHFWZRXSD4RCESRTIXR22KQSY2IEITAJ52NR1GMUP4F&ll=23.0280,72.5577&query=coffee&v=20120602'
 2013-02-05 11:52:20.863 CoffeeShop[2715:11603] I restkit.network:RKHTTPRequestOperation.m:179 GET 'https://api.foursquare.com/v2/venues/search?client_id=U0JM2MAO3202LHDEGSJXOBNJODNWOFK2DS2F0IFDFJYQ2QAT&client_secret=5RNBGWHFWZRXSD4RCESRTIXR22KQSY2IEITAJ52NR1GMUP4F&ll=23.0280,72.5577&query=coffee&v=20120602' (200 OK) [1.6540 s]
 2013-02-05 11:52:20.880 CoffeeShop[2715:12b03] -[__NSCFArray length]: unrecognized selector sent to instance 0xaa2fd90
 2013-02-05 11:52:20.881 CoffeeShop[2715:12b03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray length]: unrecognized selector sent to instance 0xaa2fd90'
 *** First throw call stack:(0x1dd1012 0x1bf6e7e 0x1e5c4bd 0x1dc0bbc 0x1dc094e 0x1c6196 0x1c54a2 0x2504d8 0x16a2fe3 0x23af3 0x23fdf 0x251d9 0x2645a 0x2cbff 0x162fd23 0x162fa34 0x17b7a 0x17462 0x1879d 0x19183 0x19a05 0x162fd23 0x162fa34 0x8310e 0x1e4d3f 0x250b014 0x24fad5f 0x24faaa3 0x1e4cba 0x81c91 0x7fc5f 0x162fd23 0x162fa34 0x16bc301 0x24f953f 0x250b014 0x24fc2e8 0x24fbfcb 0x9814fb24 0x981516fe)
 libc++abi.dylib: terminate called throwing an exception 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T23:07:19.140

您无法识别的选择器错误可能掩盖了僵尸的 EXC_BAD_ACCESS。我敢打赌，根本原因与这个问题中发生的事情相同：

[RestKit 核心数据 NSError dealloc 崩溃](https://stackoverflow.com/questions/23574607/restkit-core-data-nserror-dealloc-crash/24768921#24768921)

你可以看到我关于如何解决这个问题的答案。

# qt - Pyside QgraphicsScene 无法捕获鼠标事件

> ID：14701631
> 
> 赞同：0
> 
> 时间：2013-02-05T06:43:10.200
> 
> 标签：qt, pyqt, pyside, qt-signals, qt-events

我找不到将鼠标事件附加到场景的方法。没有查看所有事件都会被捕获，但是当被注释掉时，只有 mousePressEvent 有效。请帮忙。

```
from PySide import QtGui, QtCore

class Window(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.Scene()
        self.View()

    def mousePressEvent(self, event):
        if event.button() == QtCore.Qt.LeftButton:
            print "Pressed!!!"

    def mouseMoveEvent(self, event):
        print "moving....."

    def mouseReleaseEvent(self, event):
        print "-------released"

    def Scene(self):
        self.s = QtGui.QGraphicsScene(self)

    def View(self):
        self.v = QtGui.QGraphicsView(self.s)
        self.setCentralWidget(self.v)

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(300, 200)
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:31:56.427

在 Qt 中，事件是从子级到父级处理的。首先，孩子得到事件。然后它决定是否处理该事件。如果它不想对它采取行动，它可以`ignore`事件并且事件将被传递给父级。

在您的设置中，您有`QMainWindow`作为父级，a`QGraphicsView`作为它的子级。上的每个事件`QGraphicsView`都将由第一个处理`QGraphicsView`。如果它不想要这个事件，它会`ignore`它并传递给`QMainWindow`.

为了更好地可视化它，子类化`QGraphicsView`并覆盖它`mouse*Event`的 s：

```
from PySide import QtGui, QtCore

class View(QtGui.QGraphicsView):
    def mousePressEvent(self, event):
        print "QGraphicsView mousePress"

    def mouseMoveEvent(self, event):
        print "QGraphicsView mouseMove"

    def mouseReleaseEvent(self, event):
        print "QGraphicsView mouseRelease"

class Window(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.Scene()
        self.View()

    def mousePressEvent(self, event):
        print "QMainWindow mousePress"

    def mouseMoveEvent(self, event):
        print "QMainWindow mouseMove"

    def mouseReleaseEvent(self, event):
        print "QMainWindow mouseRelease"

    def Scene(self):
        self.s = QtGui.QGraphicsScene(self)

    def View(self):
        self.v = View(self.s)
        self.setCentralWidget(self.v)

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(300, 200)
    window.show()
    sys.exit(app.exec_()) 
```

您会看到如下输出：

```
QGraphicsView mousePress
QGraphicsView mouseMove
...
QGraphicsView mouseMove
QGraphicsView mouseRelease 
```

如您所见，只有`view`“看到”事件，因为`view`不选择传递事件。

或者，您可以选择忽略`QGraphicsView`. 这就像在说‘我什么都不做，让别人来处理它’。并且该事件将被传递给父级以选择要执行的操作：

```
class View(QtGui.QGraphicsView):
    def mousePressEvent(self, event):
        print "QGraphicsView mousePress"
        # ignore the event to pass on the parent.
        event.ignore()

    def mouseMoveEvent(self, event):
        print "QGraphicsView mouseMove"
        event.ignore()

    def mouseReleaseEvent(self, event):
        print "QGraphicsView mouseRelease"
        event.ignore() 
```

和输出：

```
QGraphicsView mousePress
QMainWindow mousePress
QGraphicsView mouseMove
QMainWindow mouseMove
...
QGraphicsView mouseMove
QMainWindow mouseMove
QGraphicsView mouseRelease
QMainWindow mouseRelease 
```

现在，您可以看到它`view`首先获取事件。但由于它`ignore`是事件，它被传递到主窗口，然后才`QMainWindow`接收信号。

*长话短说*，别着急。您`view`将收到事件并对其采取行动。

# javascript - 使用 Javascript 显示和隐藏多个字段

> ID：14701632
> 
> 赞同：1
> 
> 时间：2013-02-05T06:43:10.383
> 
> 标签：javascript, hide, show

我正在尝试隐藏和显示几个选择和文本字段

这个想法是，在选择“Banco”时的第一个字段中，它会显示一个下拉列表供用户选择哪个银行，直到该部分一切正常，当在下一个“banco”下拉列表中人们选择“otros”时问题就来了它应该为客户显示一个文本字段来写银行的名称，但我已经做了所有事情，似乎无法让它工作

你能帮我吗？？

这是JS

```
function formapago() {
if (document.getElementById('infopago').value == 'banco') {
    document.getElementById('banco').style.display = '';
    document.getElementById('tipopago').style.display='';
    }   

else {
          document.getElementById('banco').style.display = 'none';
          document.getElementById('tipopago').style.display='none';
}

if (document.getElementById('infopago').value == 'mp') {
    document.getElementById('mpcobro').style.display = '';
} else {
          document.getElementById('mpcobro').style.display = 'none';
}  
if (document.getElementById('banco').value == 'otros') {
    document.getElementById('otrosban').style.display = '';
    }   

else {
          document.getElementById('otrosban').style.display = 'none';
} 
```

}

和 HTLM

```
<select name="infopago" id="infopago" onchange='formapago()'>
          <option value="elegir" selected="selected">Elegir</option>
          <option value="banco">Banco</option>
          <option value="mp">Mercado Pago</option>
        </select>
        </p>
        <div id="banco" style="display: none">
      <p><strong>BANCO: </strong></p>
      <p>
        <label for="banco">Banco Emisor</label>
        <select name="banco" id="banco" onchange='formapago()'>
          <option value="elegir" selected="selected">Elegir</option>
          <option value="provincial">Provincial</option>
          <option value="mercantil">Mercantil</option>
          <option value="banesco">Banesco</option>
          <option value="venezuela">Venezuela</option>
          <option value="otros">Otro</option>
        </select>
      </p> </div>

      <div id="otroban" style="display: none">
      <p>
        <label for="otroban">Otro Banco</label>
        <input type="text" name="otroban" id="otroban"/>
      </p>
      </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:50:15.343

Your problem is that you have two element with same ID.

This part :

```
 <div id="banco" style="display: none">
    <p><strong>BANCO: </strong></p>
    <p>
      <label for="banco">Banco Emisor</label>
      <select name="banco" id="banco" onchange='formapago()'>
       <option value="elegir" selected="selected">Elegir</option>
       <option value="provincial">Provincial</option>
       <option value="mercantil">Mercantil</option>
       <option value="banesco">Banesco</option>
       <option value="venezuela">Venezuela</option>
       <option value="otros">Otro</option>
       </select>
    </p> 
 </div> 
```

div and select element have id="banco". Try to change select id.

**EDIT**

Here some problem i found when i see your HTML :

1.  Multiple element with same id.
2.  In your javascript, it try to get tipopago and mpcobro element, where is the element ?
3.  I think this part :

> ```
>  document.getElementById('otrosban').style.display = ''; 
> ```

Should be :

> ```
>  document.getElementById('otroban').style.display = ''; 
> ```

# visual-studio - 是否有适用于数据库专业人员的最新版本的 Visual Studio Team Edition？

> ID：14701635
> 
> 赞同：5
> 
> 时间：2013-02-05T06:43:32.027
> 
> 标签：visual-studio, database-versioning

我刚刚查看了一些关于数据库版本控制的文章，并偶然发现了 Jeff Atwood 的博客，他在该博客中推荐了 Visual Studio Team Edition for Database Professionals。他提供了一个试验链接，但唯一的问题是该试验是从 2005 年开始的。

该产品完全是 Visual Studio 的单独版本，还是某种加载项？无论哪种情况，是否有最新版本？当我用谷歌搜索时，我没有看到 2012 年的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:45:55.393

在 Visual Studio 2012 中，[SQL Server Data Tools](http://msdn.microsoft.com/en-US/data/hh297027)替换了现有 Visual Studio 数据库项目并提供了转换功能。

自 2010 年以来，这些在 Visual Studio 中被称为数据库项目（在此之前，2008 年的 GDR）

> 如果您已经拥有 Visual Studio 2012 的 Professional、Ultimate 或 Premium Edition，并且在安装过程中没有选择不安装 SQL Server Data Tools，那么您的计算机上已经安装了 SSDT。

*   [SQL Server 数据工具](http://msdn.microsoft.com/en-US/data/tools)

# android - 应用程序运行时如何处理来电

> ID：14701642
> 
> 赞同：0
> 
> 时间：2013-02-05T06:43:56.377
> 
> 标签：android, android-activity

当我的应用程序处于活动状态时，我应该如何处理来电？我的应用程序会终止还是暂停？如果你能举一些例子就好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:52:53.670

Android Dev 网站上的[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)一文中详细讨论了该主题。

简而言之，它将调用配置更改，就像更改屏幕方向一样，您的 Activity 可以被销毁和重新创建。你应该能够处理它。

您可以通过执行屏幕方向或使用 2 个模拟器并互相调用来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:51:10.973

If you handle the Activity lifecycle methods correctly, as explained in [http://developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html), your Activity will be able to behave correctly if it's at the top of the stack when an incoming call is received.

# php - 自动屏幕调整 and scripts

> ID：14701643
> 
> 赞同：1
> 
> 时间：2013-02-05T06:43:56.520
> 
> 标签：php, html, css, iframe

How can I do auto screen adjustment in `<iframe>` and scripts? They contain link to external sites.

**`<iframe>` code**:

```
<iframe id="tmc-ticker" src="http://themoneyconverter.com/AUD/RateTicker.aspx" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" height="30px"  width="460px" style="float:left; margin:-1px 0px 0px 4px;"></iframe> 
```

**Script**:

```
<script>
var width='460';
var profile='CMSForexWebQuotes1-B';
</script>
<script id="vtCurrencyPairs" src="http://webcharts.fxserver.com/pairs/js/addActivePairs.js">/**/</script>
<div> <a href="http://www.cmsfx.com"></a> </div> 
```

Please take a look at the site: [http://hannahsclinic.com/salaamforex/](http://hannahsclinic.com/salaamforex/)

On zoom in / zoom out the size changes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:55:50.837

更改`var width='460';`为 var `width='100%';`。与 iframe 相同`width="100%"`

```
<script>
var width='100%';
var profile='CMSForexWebQuotes1-B';
</script> 
```

**[演示](http://jsfiddle.net/yEwTy/1/)**

```
<div class="cmsfxWidgetWrapper" style="width: 460px; height: 346px;"> 
```

在上面的代码中删除`width:460px`并制作它`width:auto`

# php - Apache：自动将javascript代码添加到我的页面

> ID：14701647
> 
> 赞同：0
> 
> 时间：2013-02-05T06:44:07.340
> 
> 标签：php, apache, wamp

我正在为我的项目使用 wamp 服务器，我遇到了这个奇怪的事情：当我直接运行我的 html 文件时，它没有显示额外的代码，但是当我尝试使用 apache 将它保存在 www root 中运行它时，它显示了一些奇怪的脚本`<head>`和`<body>`。

IE ：`<script type="text/javascript" async="" src="//r.skimresources.com/api/?callback=skimlinksApplyHandlers&amp;data=%7B%22pubcode%22%3A%2241688X1080834%22%2C%22domains%22%3A%5B%5D%7D"></script>`

`<script src="https://streamified.s3.amazonaws.com/assets/scripts/defaultinjection.js"></script>`

这些脚本是什么以及如何将它们添加到我的页面中？他们的后果是什么？我的设计看起来也被这些脚本弄得一团糟。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:02:45.473

它很可能是由浏览器扩展插入的。如果没有明确的请求，apache 不会做任何类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:08:44.380

Skimlinks 是 WordPress.com 合作在博客上投放广告的广告联盟合作伙伴之一。我猜你的项目在 wordpress.com 上或使用 wordpress。

# android - 如何在设置中将我的应用重定向到位置服务

> ID：14701653
> 
> 赞同：7
> 
> 时间：2013-02-05T06:45:30.277
> 
> 标签：android

我正在开发一个应用程序，我需要用户当前位置，所以如果没有启用位置服务，那么我创建了一个警报来设置位置服务，但我没有重定向到位置设置

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T06:47:22.963

您可以使用下面的 Intent 启动 Activity 以将用户重定向到设置屏幕：

```
startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS)); 
```

# javascript - Javascript - 动态更改函数的内容

> ID：14701661
> 
> 赞同：3
> 
> 时间：2013-02-05T06:46:02.593
> 
> 标签：javascript, jquery

我有这个功能（在页面加载时）使用“css”jQuery方法更改我的边距......

```
function page_change() {
  var h = window.location.hash;

  switch (h) {
    case 'home':
      $('.page-slide-box').css({marginLeft: 0});
      break;
    case 'history':
      $('.page-slide-box').css({marginLeft: '-820px'});
      break;
    // more cases here.....
  }
} 
```

...但是在页面加载后，我想为更改**设置动画**。我在想我可以使用 replace() 更改现有函数（而不是编写另一个冗余函数），如下所示：

```
window.onhashchange = function() {
  var get = page_change.toString();
  var change = get.replace(/css/g, ￼'animate');
  page_change();
} 
```

这成功地将我的 page_change() 函数中的所有“css”实例更改为“animate”。替换字符串后，如何使此函数动态更改？或者这只是一个坏主意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:57:24.860

在你的例子中，我会说这是一个糟糕的主意。为什么不简单地定义一个可以同时做这两个的函数，并相应地使用它：

```
var page_change = function(e)
{
    var method = e instanceof Event ? 'animate' : 'css';
    switch (location.hash)
    {
        case 'home':
            $('.page-slide-box')[method]({marginLeft: 0});
        break;
        //and so on...
    }
}; 
```

直接调用这个函数，它会设置css，像这样使用它：

```
window.onhaschange = page_change; 
```

它会`animate`代替使用该`css`方法。简单的

如果你想轻松测试，你可以试试这个：

```
var page_change = function(e)
{
    var method = e instanceof Event ? 'animate' : 'css';
    console.log(method);
};
document.body.onclick = page_change;
page_change();//logs css
//click the body and... 
//animate will be logged 
```

基本上，这就是它的工作原理。
定义这样的函数（匿名函数，分配给变量或由 var*引用*）的额外好处是您可以轻松地将新函数分配给同一个变量：

```
var myFunc = function(){ console.log('foo');};
myFunc();//logs foo
myFunc = function(){console.log('bar')};
myFunc();//logs bar 
```

这也可能对您有用……当然。您甚至可以存储旧功能：

```
var myFunc = function(){ console.log('foo');};
myFunc();//logs foo
var oldMyFunc = myFunc;
myFunc = function(){console.log('bar')};
myFunc();//logs bar
oldMyFunc();//logs foo 
```

玩一会儿，找到最适合您需求的方法（这很可能是我在这个答案中谈到的事情的组合）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:51:56.040

您仍然需要创建一个`new Function()`带有被替换的主体的主体`css`，因此只需编写另一个函数，您可以在其中放置延迟和回调以及您需要的所有其他内容`animate()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:55:39.377

分配一个布尔值来反映页面加载状态（比如`loadstatus`），并使用它来确定操作。您可以使用[括号表示法](https://www.inkling.com/read/javascript-definitive-guide-david-flanagan-6th/chapter-6/querying-and-setting-properties)来触发正确的操作：

```
function page_change() {
  var h = window.location.hash,
      action = loadstatus ? 'animate' : 'css';
  //           ^ set loadstatus to true after page load.
  switch (h) {
    case 'home':
      $('.page-slide-box')[action]({marginLeft: 0});
  //                       ^ action used here
      break;
    case 'history':
      $('.page-slide-box')[action]({marginLeft: '-820px'});
      break;
    // more cases here.....
  }
} 
```

# java - 如何在 JBehave 的测试执行中包含和排除场景？

> ID：14701662
> 
> 赞同：2
> 
> 时间：2013-02-05T06:46:03.410
> 
> 标签：java, selenium, testng, jbehave, thucydides

我有一些故事。每个故事都有一些场景。例子：

```
Story 1.
Scenario 1.
Scenario 2.
Scenario 3.
Story 2.
Scenario 1.
Scenario 2. 
```

TestNG 有 suite.xml 文件用于配置应该执行哪些测试和\或方法。

我在 jBehave StoryFinder 类中找到了，但是每次执行不同的场景时它都需要修改我的代码。

例如，我想在故事 1 场景 2 和场景 3 中执行，而在故事 2 中只执行场景 2。我没有找到如何配置 jBehave 故事以便于轻松配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:09:32.503

您可以在场景中使用元标记 @skip 来执行此操作。

此处给出的示例：http: [//jbehave.org/reference/stable/meta-info.html](http://jbehave.org/reference/stable/meta-info.html)

# c# - To From 动画改变网格大小

> ID：14701666
> 
> 赞同：0
> 
> 时间：2013-02-05T06:46:18.777
> 
> 标签：c#, silverlight, silverlight-4.0

需要从 c# 动画更改网格的大小，我知道 To From 动画最适合它，但不知道如何做到这一点，如果可用也建议更好的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:39:14.360

在 MSDN 上得到它

```
// Create a red rectangle that will be the target 
Rectangle myRectangle = new Rectangle();
myRectangle.Width = 200;
myRectangle.Height = 200;
Color myColor = Color.FromArgb(255, 255, 0, 0);
SolidColorBrush myBrush = new SolidColorBrush();
myBrush.Color = myColor;
myRectangle.Fill = myBrush;

// Add the rectangle to the tree.
LayoutRoot.Children.Add(myRectangle);

// Create a duration of 2 seconds.
Duration duration = new Duration(TimeSpan.FromSeconds(2));

// Create two DoubleAnimations and set their properties.
DoubleAnimation myDoubleAnimation1 = new DoubleAnimation();
DoubleAnimation myDoubleAnimation2 = new DoubleAnimation();

myDoubleAnimation1.Duration = duration;
myDoubleAnimation2.Duration = duration;

Storyboard sb = new Storyboard();
sb.Duration = duration;

sb.Children.Add(myDoubleAnimation1);
sb.Children.Add(myDoubleAnimation2);

Storyboard.SetTarget(myDoubleAnimation1, myRectangle);
Storyboard.SetTarget(myDoubleAnimation2, myRectangle);

// Set the attached properties of Canvas.Left and Canvas.Top
// to be the target properties of the two respective DoubleAnimations.
Storyboard.SetTargetProperty(myDoubleAnimation1, new PropertyPath("(Canvas.Left)"));
Storyboard.SetTargetProperty(myDoubleAnimation2, new PropertyPath("(Canvas.Top)"));

myDoubleAnimation1.To = 200;
myDoubleAnimation2.To = 200;

// Make the Storyboard a resource.
LayoutRoot.Resources.Add("unique_id", sb);

// Begin the animation.
sb.Begin(); 
```

# java - Oracle日期格式实现

> ID：14701667
> 
> 赞同：1
> 
> 时间：2013-02-05T06:46:19.293
> 
> 标签：java, oracle

> **可能重复：**[从 ResultSet 将日期作为字符串读取时，](https://stackoverflow.com/questions/14700962/default-jdbc-date-format-when-reading-date-as-a-string-from-resultset)
> [Oracle 日期模式到 Java 日期模式的默认 JDBC 日期格式](https://stackoverflow.com/questions/14689247/oracle-date-pattern-to-java-date-pattern)

**在我的 java 应用程序中，我每次05-Feb-2013**都有一个来自 db 的日期字符串，格式不同，格式为**DD-MON-YYYY**。

我需要将此**日期字符串转换为 java.util.Date**。Java 的默认**java.text.DateFormat**实现，即**java.text.SimpleDateFormat**在这里不起作用，因为它无法理解 oracle 数据库的格式模式。我的问题是

1）有没有其他java.text.DateFormat的实现，**比如**java.text.SimpleDateFormat **（**毕竟是DatePattern的一个实现），它可以接受oracle db的格式模式并返回java.util.Date？

或者

2) 是否有任何实用程序可以从 oracle db 格式模式中绘制 java simpledateformat 模式？

或者

3）可以通过其他方式实现吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:48:57.227

如果您的值类型是 Date 则首先将其转换为 String 通过 String DateStr = value.toString(); 然后使用 SimpleDateFormat 类格式化如下： SimpleDateFormat formatter = new SimpleDateFormat(YourFormat); 然后使用此代码按照您的意愿格式化 formatter.format(DateStr); 希望对你有帮助 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:24:09.327

这个[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)模式应该适用于您的示例日期：`dd-MMM-yyyy`. 您可能需要将语言环境设置为英语才能正常工作。

您说日期的格式每次都不同。如果你不知道格式是什么，你怎么能希望解析一些东西呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:56:57.310

1）如果你有'datevalue'与'datepattern'你没有问题使用`simpleDateFormatter`

```
SimpleDateFormat format = new SimpleDateFormat(datePatternfromOracle); 
```

2) //对所有值执行此操作 format = new SimpleDateFormat(datePatternFromOracle); format.format(dateValueFromOracle);

3）有多种方法，但这是直截了当的

# android - “http://www.google.com/m?client=ms-{CID}&source=android-home”是什么意思？

> ID：14701669
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:46:26.857
> 
> 标签：android, browser

我发现android默认主页是“ `http://www.google.com/m?client=ms-{CID}&amp;source=android-home`”，这是什么意思？为什么不是“ `http://www.google.com`”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:58:24.047

这意味着您正在检索由 Google 为 android 改编的页面。

# jquery - Jquery TableSorter SaveSort 重置或清除

> ID：14701671
> 
> 赞同：1
> 
> 时间：2013-02-05T06:46:33.183
> 
> 标签：jquery, tablesorter

我正在使用表格排序器“保存排序”小部件来保存排序标准。

在我的情况下，基于一些过滤器，我正在通过 ajax 调用加载表格。每次单击按钮生成新列表时，我的排序顺序都不会改变。这意味着保存排序按预期工作。请注意，在此处单击按钮时，我仅加载页面的表格部分，而整个页面并未刷新。

但我想要一些类似的东西，

当我重新加载整个页面（按 F5 或单击链接）时，必须重置整个页面的排序标准，并且应该根据初始排序标准对其进行排序。基本上保存排序必须清除或重置。

我已关注[此帖子](https://github.com/Mottie/tablesorter/issues/123) 并尝试过

```
 $.tablesorter.storage( $('table')[0], 'tablesorter-savesort', '' ); 
```

但它给错误，

```
 Uncaught TypeError: Object [object Object] has no method 'storage' 
```

执行排序的 Jquery 代码

```
 $(function() {

     if(0 < $("#trainingList tbody tr").length){ 
         $("#trainingList")
            .tablesorter({widthFixed: true,sortList: [[2,0]],widgets: ["saveSort"],
                headers: { 
                    2: { // <-- zero-based index of column
                        sorter:'ddMMMyy' 
                    } ,
                    3: { // <-- zero-based index of column
                        sorter:'ddMMMyy' 
                    } 
                } 

            })
            .tablesorterPager({container: $(".pager")});

     }       
}); 
```

# php - 在 PhP 中如何知道服务器 IP（主 IP）

> ID：14701674
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:46:45.447
> 
> 标签：php, webserver, ip

在我问如何知道服务器可用的所有 IP 之前。如果我想知道主IP怎么办？

服务器是否有一个主 IP 或所有 IP 真的相等？

它在 $_SERVER 数组中吗？

我不是在询问主机的 IP。我说的是主 IP。每台服务器在所有这些IP中都有一个主IP吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T07:00:08.500

运行脚本的服务器`$_SERVER["SERVER_ADDR"]`的 IP 地址在，请求脚本的客户端的 IP 地址在`$_SERVER["REMOTE_ADDR"]`。

查看[手册](http://php.net/manual/en/reserved.variables.server.php)了解更多详情。

# ios - UISlider 需要有一个 1-5 的范围并将它自己对齐到最近的缺口

> ID：14701681
> 
> 赞同：0
> 
> 时间：2013-02-05T06:47:29.637
> 
> 标签：ios, uislider

我有 4 个 UISlider 需要具有 1-5 的值，其中 1 是最小值，5 是最大值。

我已经设置了滑块并将它们称为slider1、slider2、slide3、slider4

我还设置了插座等，并在界面生成器中设置了最小值和最大值

但是，当我滚动滑块时，它只是滑动而不是坚持 1-5 比例。

我尝试了以下操作并且失败了，因为我在其他一些 SO 问题上看到了这一点

```
- (IBAction) sliderValueChanged:(id)sender
{

    [sender setValue:((int)((sender getValue] + 2.5) / 5) * 5) animated:NO];

} 
```

更新：这似乎是一个解决方案

```
 - (IBAction) sliderValueChanged:(UISlider *)sender
{

    NSUInteger index = (NSUInteger)([sender value] + 0.5); // Round the number.
    [sender setValue:index animated:NO];
    NSLog(@"index: %i", index);

 //   NSNumber *number = [numbers objectAtIndex:index]; // <-- This is the number you want.
 //   NSLog(@"number: %@", number);

} 
```

你能帮我解决这个问题吗？上面的 getValue 函数也出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:49:00.420

Objective-C 不是 Java，getter 的命名约定是不同的。使用`value`代替`getValue`（无论如何，你为什么不声明`sender`为`UISlider *`？）

# android - 带有子字符串函数 Android 的 StringIndexOutOfBoundException

> ID：14701682
> 
> 赞同：0
> 
> 时间：2013-02-05T06:47:31.590
> 
> 标签：android, substring

我对这个子字符串函数感到沮丧。在这里，我的子字符串函数只在第一次给我价值。它已存储在 arraylist 中的前 3 个字符。第二次无法取其他 3 个字符，并且已将“”值存储在 arralist 中。

我的代码如下：

```
 String mStr= "jklpourtujolkjth";

     ArrayList<String> mLst = new ArrayList<String>();

       for (int i = 0; i < mStr.length(); i+=3)

        {
            if ((i + 3) < mStr.length())
            {
                mLst.add(mStr.substring(i,3));
            }
            else{
                mLst.add(mStr.substring(i));

            }
        } 
```

帮我处理这段代码。我怎么了？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:03:04.057

```
String mStr= "jklpourtujolkjth";

 ArrayList<String> mLst = new ArrayList<String>();
   for (int i = 0; i < mStr.length(); i+=3)
   {
        int to=i+3;
        if (to < mStr.length())
        {
            mLst.add(String.valueOf(mStr.substring(i,to)));
        }
        else
        {
            mLst.add(mStr.substring(i));
        }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:03:21.427

你忘了`endIndex`在 substring 方法中给出。这就是为什么你得到 outofboundsexception 的原因。将您的代码更改为这样...

这里的问题是在循环中获取子字符串，第一次调用

```
 mStr.substring(0,3)) which gives the string as jkl 
```

下次通话

```
 mStr.substring(3,3)) which will give outofboundsexception 
```

要了解有关子字符串的更多信息，请从[此处阅读文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)

```
String mStr= "jklpourtujolkjth";

ArrayList<String> mLst = new ArrayList<String>();
  for (int i = 0; i < mStr.length(); i+=3)
  {
       if ((i + 3) < mStr.length())
       {
           mLst.add(String.valueOf(mStr.substring(i,i+3)));// here is the change

       }
       else{
           mLst.add(mStr.substring(i));

       }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:53:42.180

您可能正在假设`mStr`并且`mystr`是相同的。你的意思是`mStr`在两个地方都使用吗？（在 else 块和 if 块中）

编辑（现在已经修复）：

您应该使用`mStr.substring(i,i+3)`而不是`mStr.substring(i,3)`. 子字符串需要一个起始索引和结束索引，但您假设它需要一个起始索引和长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T07:10:01.763

您必须在 mLst.add(String.valueOf(mStr.substring(i,3)));

因为当 i = 6 时，您将从 substring(6,3) 中得到什么。所以第二个参数应该是可变的

# facebook - 不能在生产服务器上点赞

> ID：14701687
> 
> 赞同：0
> 
> 时间：2013-02-05T06:47:53.147
> 
> 标签：facebook, facebook-like

我已经在我的页面上集成了 Facebook-Like-Button。当我在我的机器上使用有效的 url 测试这个本地时，它工作正常。但是当我在我的网络服务器上做我的网站时，它就不起作用了。对于我的高效网站，我有另一个 URL 和另一个 Facebook-App-ID。

当我想在我的高效网站上“点赞”时，它会检查按钮，然后跳回零点赞。我不知道为什么:(

我在 Facebook 上测试了另一个 URL 和另一个应用程序，但同样的问题。

知道有什么问题吗？

我已经集成了这样的按钮：

```
<fb:like href="#local.review.likelink#" send="false" layout="button_count" show_faces="false"></fb:like> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:12:15.510

尝试使用

```
<fb:like send="false" layout="button_count" show_faces="false"></fb:like> 
```

或确保定义一个有效的 URL。

并且 Facebook 不会允许 url 与用户所在的页面不同。

# jquery - Rails Jquery 从另一个 js.erb 文件渲染 js.erb 部分

> ID：14701692
> 
> 赞同：5
> 
> 时间：2013-02-05T06:48:36.293
> 
> 标签：jquery, ajax, ruby-on-rails-3, erb, code-duplication

我在不同模型的 ajax 响应之间有重复的 js.erb 代码。我想通过将参数传递到 js.erb 部分来重构重复的 js.erb 代码。

如何从 js.erb 文件渲染 js.erb 部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T07:10:43.440

就像您使用 erb 渲染任何其他部分一样。假设你的部分被调用`_my_partial.js.erb`（注意部分总是以 开头`_`），那么在你的主`.js.erb`文件中你会这样做：

```
<%= render 'my_partial' %> 
```

如果您的部分在另一个目录中，只需使用：

```
<%= render 'path/to/my_partial' %> 
```

# sockets - 发送短信时，黑莓套接字 / http 连接似乎断开了

> ID：14701693
> 
> 赞同：1
> 
> 时间：2013-02-05T06:48:36.113
> 
> 标签：sockets, tcp, blackberry, sms, cellular-network

我们在 Blackberry 应用程序中遇到了以下问题：

一些用户在使用 2G/Edge 网络时无法连接到我们的服务器（无论是通过 TCP 套接字还是 HTTP）。但是，他们能够在使用 3G/WiFi 时成功连接。

我们怀疑 2G/Edge 网络故障是因为我们的应用在启动网络之前发送了 SMS（这对我们的工作流程至关重要），并且不知何故 2G/Edge 网络受到了 SMS 发送的干扰/中断。但是我们无法重现我们身边的问题，我们的客户离我们很远。

我想知道以前有没有人遇到过类似的问题？

以下是我们打开套接字连接的方法：

```
private static int[] preferredTransportTypes = {
        TransportInfo.TRANSPORT_TCP_WIFI,
        TransportInfo.TRANSPORT_TCP_CELLULAR, TransportInfo.TRANSPORT_WAP2,
        TransportInfo.TRANSPORT_WAP, TransportInfo.TRANSPORT_BIS_B,
        TransportInfo.TRANSPORT_MDS, };//

public SocketConnection getConnection() throws IOException {
    String serverUrl = "socket://" + Adaptor.getInstance().monetUrl + ":"
            + Adaptor.getInstance().monetPort;

    ConnectionFactory connFactory = new ConnectionFactory();
    connFactory.setConnectionTimeout(5000);
    connFactory.setTimeoutSupported(true);
    connFactory.setPreferredTransportTypes(preferredTransportTypes);
    ConnectionDescriptor cd = connFactory.getConnection(serverUrl);

    SocketConnection sc = (SocketConnection) cd.getConnection();

    return sc;
} 
```

# php - 多个条件在 PHP 中不起作用

> ID：14701699
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:49:02.477
> 
> 标签：php, minecraft, whitelist

我正在为我的我的世界白名单进行测试，我有 15 个问题，每个问题的值必须是 = 是，当我有 6 个问题条件 (question1 - question6) 时，一切正常且正常工作！但是当我添加超过 6 个条件（值“是”需要 15 个条件）时，脚本不起作用

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Whitelist</title>
  <style>
    body
    {
    background-image: url('img/background.jpg');
    background-repeat: no-repeat;
    background-position: top left;
    background-attachment: fixed;
    }
  </style>
</head>
<body font="Arial" background="img/background.jpg" background-repeat: "no-repeat" text="#ffffff">
<title>Chunk.cz - Whitelist</title>
</body>

<br><br>
<center><img src="img/chunk-whitelist.png">
<br><br>

<?php

$ip = 'xx.xx.xx.xx'; 

$question1 = $_POST['question1'];
$question2 = $_POST['question2'];
$question3 = $_POST['question3'];
$question4 = $_POST['question4'];
$question5 = $_POST['question5'];
$question6 = $_POST['question6'];
$question7 = $_POST['question7'];

$player = $_POST['player'];

if (!empty($_POST['player'])) {

   if ($question1 == "yes" && $question2 == "yes" && $question3 == "yes" && $question4 == "yes" && $question5 == "yes" && $question6 == "yes" && $question7 == "yes") {

  if(!in_array($param,$bad)) {

      echo '<table width="700" background="img/stone.png">';
      echo '<tr><td height="32" background="img/slab.png"></td></tr>'; 
      echo '<tr><td><center><font size="5" color="#00ff33"><b>Byl si přidán na whitelist pod nickem:</b> ', $hrac;
      echo '<br><b>IP serveru: </b>';
      echo '', $ip;
      echo '</font></center></td></tr><tr><td height="32" background="img/slab.png"></td></tr></table>';

                            $connect = mysql_connect("xx.xx.xx.xx","xxxxxx","xxxxxx");
                            if (!$connect)
                            {
                            die("NELZE SE PRIPOJIT DO DATABAZE! PROSIM OPAKUJTE POKUS POZDEJI. DEKUJI ZA POCHOPENI.");
                            }

                            $DB = mysql_select_db('chunk');

                            if(!$DB)
                            {
                            die("MySQL nemuze vybrat databazi!");
                            }  

                            if(!mysql_query("INSERT INTO whitelist (name)
                            VALUES ('$player')"))
                            {
                            die("Zadost nebyla podana, nemuzeme se spojit s databazi. Omlouvame se, zkuste to pozdeji.)");
                            }

    }
    else { // Špatná odpovìï
      echo '<table width="700" background="img/stone.png">';
      echo '<tr><td height="32" background="img/slab.png"></td></tr>';
      echo '<tr><td height="150"><center><font size="5" color="red"><b>Máš něco špatně, zkus to znova</b></font><br><br>';
      echo '<input type=button onclick="history.back()" value="Zkusit znova">';
      echo '</center></td></tr><tr><td height="32" background="img/slab.png"></td></tr></table>';
    } 
}
else {
  echo '
<table width="700" background="img/stone.png">
<tr><td height="32" background="img/slab.png"></tr></td>  
  <form method="POST">
    <tr><td>
      <center>      
          Napiš svůj nick z minecraft.net: 
            <br><input type="text" name="hrac">
      </center>
    </td></tr>
<tr><td height="32" background="img/slab.png"></tr></td>  
  <tr>
    ', /* Zaèátek otázek */' 

    <tr><td><br><br>
      <b>1\. Co je to griefing?</b>
        <br><input type="radio" name="question1" value="no"> To je příkaz pouze pro administrátory, množí si tak materiál.
        <br><input type="radio" name="question1" value="no"> Group briefing - plugin na "schůze" v chatu - vytváří soukromé chatové kanály.
        <br><input type="radio" name="question1" value="yes"> Úmyslné způsobování škody jiným hráčům jakýmkoliv způsobem. Obvykle jde o ničení staveb.
    </td></tr>

    <tr><td><br><br>        
      <b>2\. Když se chci k někomu podívat do domu:</b>
        <br><input type="radio" name="question2" value="no"> Pomocí bugu obejdu zamčené dveře, stejně nikdo nic nopozná.
        <br><input type="radio" name="question2" value="yes"> Požádám majitele domu, jestli by mě dál nopozval.
        <br><input type="radio" name="question2" value="no"> Nakouknu dovnitř tak, abych nomusel nic ničit, a pokud se mu to nolíbí, okamžitě odejdu.
        <br><input type="radio" name="question2" value="ne"> Prokopu se dovnitř a díru zase zacpu.
    </td></tr>

    <tr><td><br><br>         
      <b>3\. Jaké mody (modifikace hry) nejsou na serveru zakázané?</b>
        <br><input type="radio" name="question3" value="ne"> Na serveru nejsou zakázané žádné mody.
        <br><input type="radio" name="question3" value="ne"> X-ray.
        <br><input type="radio" name="question3" value="yes"> Optifine, Minimapy.
        <br><input type="radio" name="question3" value="ne"> Smart moving.
    </td></tr>

    <tr><td><br><br>         
      <b>4\. Jakým příkazem zjistím, kolik mám zrovna peněz?</b>
        <br><input type="radio" name="question4" value="ne"> Napíšu moderátorovi, on mi to řekne.
        <br><input type="radio" name="question4" value="ne"> Na serveru nejsou žádné peníze, jen výměnný obchod.
        <br><input type="radio" name="question4" value="ne"> /penize
        <br><input type="radio" name="question4" value="yes"> /money
    </td></tr>

    <tr><td><br><br>        
      <b>5\. K čemu především slouží redstone?</b>     
        <br><input type="radio" name="question5" value="yes"> K vytváření "elektrických drátů" v logických obvodech (například na připojení dveří na páku, která je otevře).
        <br><input type="radio" name="question5" value="ne"> K ničemu, má jen zpomalovat kopání.
        <br><input type="radio" name="question5" value="ne"> K výrobě nástrojů.
    </td></tr>

    <tr><td><br><br>   
      <b>6\. Co je hlavním úkolem moderátorů?</b>
        <br><input type="radio" name="question6" value="ne"> Stavět obří projekty.
        <br><input type="radio" name="question6" value="ne"> Teleportovat hráče na požádání.
        <br><input type="radio" name="question6" value="yes"> Dohlížet na dodržování pravidel ve hře.
        <br><input type="radio" name="question6" value="ne"> Rozdávat bany lidem, kteří jim odporují nebo se jim nelíbí.
    </td></tr>

    <tr><td><br><br>
      <b>7\. Jak správně natěžím dřevo?</b>
        <br><input type="radio" name="question7" value"ne"> Stačí dřevo na které dosáhnu, zbytek shnije.
        <br><input type="radio" name="question7" value"ne"> Pokácím celý strom tak, aby nezůstalo vůbec žádné dřevo ani listí.
        <br><input type="radio" name="question7" value"yes"> Vykácím všechno dřevo, listí nechám a namísto kmenu dám sazeničku.
        <br><input type="radio" name="question7" value"ne"> Alespoň jeden kousek dřeva se musí nechat, aby strom dorostl.
    </td></tr>

', /*
Pokud budete chtít pøidat další otázku, tak pøipište: 

    <tr><td><br><br>
      <b>#. Nadpis Otázky:</b>
        <br><input type="radio" name="question#" value"ne"> Špatná odpovìï
        <br><input type="radio" name="question#" value"yes"> Správná odpovìï
        <br><input type="radio" name="question#" value"ne"> Špatná odpovìï
    </td></tr>

(všechny znaky "#" nahraïte poøadím otázky (napø pro 7\. otázku èíslem 7))
(hodnota value mùže být yes/ne , u správné odpovìdi dejte yes (správná odpoveï mùže být pouze 1!))
*/'    
    ', /* Konec otázek */'    

<tr><td height="32" background="img/slab.png"><center><font color="red">Stisknutím tlačítka potvrzujete, že souhlasíte s <a href="http://www.chunk.cz/pravidla/">pravidly</a> serveru</font><br><input type="submit" value="Odeslat požadavek"></center></tr></td>  
  </tr>
  </table>  
</form>
';
}

?>
</center>
</html> 
```

这是条件线

```
if ($question1 == "yes" && $question2 == "yes" && $question3 == "yes" && $question4 == "yes" && $question5 == "yes" && $question6 == "yes" && $question7 == "yes") { 
```

当它是这样的时候，它的工作原理：

```
if ($question1 == "yes" && $question2 == "yes" && $question3 == "yes" && $question4 == "yes" && $question5 == "yes" && $question6 == "yes") { 
```

但是当我添加更多条件时，它不起作用

```
if ($question1 == "yes" && $question2 == "yes" && $question3 == "yes" && $question4 == "yes" && $question5 == "yes" && $question6 == "yes" && $question7 == "yes" && $question8 == "yes" && $question9 == "yes" && $question10 == "yes" ..........) { 
```

非常感谢您的帮助！这是我的世界白名单，抱歉我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:01:29.320

我不确定为什么添加更多条件会使您的代码不起作用，但您可以执行以下操作：

`$answers=array('question1'=>yes,'question2'=>yes,'question3'=>no); //array of the answers received
$count=0;
$requiredCount=3;
foreach ($answers as $key=>$value){
if ($value=='yes'){
$count++;
}
}
if ($count==$requiredCount)
{
//process as valid
}else{
//process as not valid
}` 

当然，您希望在适当的位置使用选项卡以使您的代码更具可读性，唉，它们在这里被剥离了。

# html - 选择被跳过

> ID：14701703
> 
> 赞同：0
> 
> 时间：2013-02-05T06:49:12.460
> 
> 标签：html, option, html-select, selecteditem, selected

好的，所以我在这里遇到了一个非常奇怪的问题，刚刚开始出现。我制作了一个年龄选择器，允许将最低年龄设置为 18 岁，然后是 18-68 岁。出于某种原因，它在 Firefox 上被打印为 18 作为自动选择的选项。如果我取出 18 岁，那么它会回到自动选择最小年龄。谁能帮我理解我做错了什么？

```
<select name="age_min_search_html" id="Age_min_search_html" data-mini="true">
  <option value="18" selected="selected">Minimum Age</option>
  <option value="18" >18</option>
  <option value="19" >19</option>
  <option value="20" >20</option>
  <option value="21" >21</option>
  <option value="22" >22</option>
  <option value="23" >23</option>
  <option value="24" >24</option>
  <option value="25" >25</option>
  <option value="26" >26</option>
  <option value="27" >27</option>
  <option value="28" >28</option>
  <option value="29" >29</option>
  <option value="30" >30</option>
  <option value="31" >31</option>
  <option value="32" >32</option>
  <option value="33" >33</option>
  <option value="34" >34</option>
  <option value="35" >35</option>
  <option value="36" >36</option>
  <option value="37" >37</option>
  <option value="38" >38</option>
  <option value="39" >39</option>
  <option value="40" >40</option>
  <option value="41" >41</option>
  <option value="42" >42</option>
  <option value="43" >43</option>
  <option value="44" >44</option>
  <option value="45" >45</option>
  <option value="46" >46</option>
  <option value="47" >47</option>
  <option value="48" >48</option>
  <option value="49" >49</option>
  <option value="50" >50</option>
  <option value="51" >51</option>
  <option value="52" >52</option>
  <option value="53" >53</option>
  <option value="54" >54</option>
  <option value="55" >55</option>
  <option value="56" >56</option>
  <option value="57" >57</option>
  <option value="58" >58</option>
  <option value="59" >59</option>
  <option value="60" >60</option>
  <option value="61" >61</option>
  <option value="62" >62</option>
  <option value="63" >63</option>
  <option value="64" >64</option>
  <option value="65" >65</option>
  <option value="66" >66</option>
  <option value="67" >67</option>
  <option value="68" >68</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:52:29.157

您没有两个具有相同**值**的选项。将值更改`Minimum Age`为另一个值

# java - Java getID - 两个值？

> ID：14701705
> 
> 赞同：0
> 
> 时间：2013-02-05T06:49:16.963
> 
> 标签：java

我现在无法解决这个问题，所以任何帮助都会很棒..

```
for(EdgeOf e: gra.getEachVertex()) {
     System.out.println(e.getId());
} 
```

由此我得到 的结果`41_1`，`32_2`但我想将这些值拆分并重用它们。如果不将它们放在一起，我似乎无法提取这些值..？

我怎么能`string.split`这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:20:49.073

在第一次迭代时，e.getId() 返回 41_1，所以你可以使用 split("_") 将其拆分为 41 和 1，在第二次迭代中也这样做..

```
for(EdgeOf e: gra.getEachVertex()) {
String str = e.getId();
String[] str2 = str.split("_");
     System.out.println(str2[0] + " " + str2[1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:14:04.857

尝试使用`string.split()`：

```
for(EdgeOf e: gra.getEachVertex()) {
     String[] values = e.getId().split("_");
     String x = values[0];
     String y = values[1];
} 
```

# javascript - button to main

> ID：14701709
> 
> 赞同：0
> 
> 时间：2013-02-05T06:49:31.063
> 
> 标签：javascript, jquery, iframe

I have this kind of code:

**`iframe.html`:**

```
<div id="w">
<div id="a">
 ...
</div>
<div id="b" style="display:none">
 ...
</div>
</div>
<a href="#" id="button" class="b open">Change</a> 
```

**`main.html`:**

```
...
<div id="con">
        <iframe src="http://localhost/iframe.html" scrolling="no" id="myiframe">
            <p>Your browser does not support iframes.</p>
        </iframe>
    </div>
<div id="show" style="display:none">
Hello WOrld!
</div> 
```

My JavaScript inside the `<iframe>`:

```
$(document).ready(function() {
  $("a#button").click(function(){
    if ($(this).hasClass('open')) {
                $(this).removeClass('open');
                $(this).addClass('close');
                $('#a').fadeOut(200);
                $("#b").fadeIn(200);
 }else{
$("a#button").css({"margin-top":""});
                $(this).removeClass('close');
                $(this).addClass('open');
                $("#b").fadeOut(200);
                $('#a').fadeIn(200);
}

  });
}); 
```

I try to insert this code in the `<iframe>` JavaScript:

```
....
 $("a#button").click(function(){
    $("#show").css({"display":"block", "background":"green"});
....
} 
```

However, it won't work because the JavaScript code is inside the `<iframe>` and it cannot see the `#show` `<div>`.

Is there any way using JavaScript or jQuery that when I click the `#button` in the `<iframe>` that it will reflect the `#show` `<div>`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:02:49.967

尝试这个

```
 $("a#button").click(function(){
   $('#show', window.parent.document).css({"display":"block", "background":"green"});
   ... 
 } 
```

或者

```
parent.top.$("#show").css({"display":"block", "background":"green"}); 
```

# microsoft-metro - linq to sql (Local database for Windows Phone) better ? (OR) A sqlite-net version for mobile better ?? for windows phone 8 local database creation

> ID：14701710
> 
> 赞同：2
> 
> 时间：2013-02-05T06:49:33.070
> 
> 标签：microsoft-metro, windows-runtime, windows-phone-8, local-database

Hi I am creating windows phone 8 app , i want to store huge amount data in my app ,

i have already completed my windows 8 tablet app using sqlite version for windows 8\.

my doubt is regarding creating a local datbase in windows phone 8 which is the most reliable one to go with ?

option 1:- Working with SQLite in Windows Phone 8: a sqlite-net version for mobile

option 2:- linq to sql (Local database for Windows Phone)

if i use the option 1 i can easily re-use all my Data, DALC, BIZ layers as it is even in my phone versions (which i already built for windows 8 tablet app).

if i use option 2 i need to create .sdf files type of my data and revamp my layers as per linq to sql .

1) I wanted to know which one is most reliable ?

2) are there any drawbacks in Working with SQLite in Windows Phone 8: a sqlite-net version for mobile ?

thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:19:22.590

您可以将 sqlite 与 linq to sql 甚至实体框架一起使用。在此处查看文章[http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo](http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo)

我不知道你的设计，所以你必须在那里估计你的可移植性。

说到可靠性，用它开发的人说 sqlite 是超可靠的。我找不到任何研究，但知道例如 firefox 在内部使用它，而且我从未听说过 firefox 的配置损坏的案例，我只是可能同意这种说法。另一个众所周知的实现是在 TeamSpeak 中。

由于您正在使用手机，因此电池寿命确实是一个问题。你说你有很多数据，这会导致很多查询。正因为如此，您可能需要转向 sqlite。

如果我是你，我会有一个抽象这个层的 DAL。使用依赖注入来选择 DAL。从 sqlite 开始，如果它在某些时候不足，您可以随时切换。但是，手机上的数据迁移可能会引起问题。

# python - Automatic loading of templates in django is not working for my app

> ID：14701711
> 
> 赞同：1
> 
> 时间：2013-02-05T06:49:38.920
> 
> 标签：python, django

According to the [documentation](https://docs.djangoproject.com/en/1.4/ref/templates/api/#template-loaders), django should load templates automatically from my app if i have a folder named 'templates' in the root dir of the app.

I've added my app

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    # 'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    # Use email as username https://github.com/dabapps/django-email-as-username
     'emailusernames',
     'purchaseapp' # this is my app
) 
```

I've created a templates folder

![enter image description here](../Images/5bdf780f330093015022479152b99f85.png)

and i've setup urlpatterns to use the admin as the login page

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'timely.views.home', name='home'),
    # url(r'^timely/', include('timely.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    url(r'^$', hello),
    url(r'^accounts/logout/$', 'django.contrib.auth.views.logout'),
    url(r'^accounts/login/$', 'django.contrib.auth.views.login', {'template_name': 'admin/login.html'}),
    url(r'^accounts/$', 'django.views.generic.simple.redirect_to', {'url': '/'}),
    url(r'^accounts/profile/$', 'django.views.generic.simple.redirect_to', {'url': '/'}),
) 
```

i overwrote base_site.html but i can't see my customization, which i see if it add the folder to TEMPLATE_DIRS

```
TEMPLATE_DIRS = (
    "/Users/nicola/Documents/Aptana Studio 3 Workspace/timely/purchaseapp/templates",
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
) 
```

What am i doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:21:43.617

问题是 django 在找到有效模板时可能会停止搜索，因此我的应用程序必须比 contrib 管理员排在第一位

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    # 'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'purchaseapp', #this is my app
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    # Use email as username https://github.com/dabapps/django-email-as-username
     'emailusernames',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:57:06.053

您需要在 admin 下创建更多目录（来自[docs](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#set-up-your-projects-admin-template-directories)）：

> 为了覆盖其中的一个或多个，首先在项目的模板目录中创建一个管理目录。这可以是您在 TEMPLATE_DIRS 中指定的任何目录。
> 
> 在此管理目录中，创建以您的应用命名的子目录。在这些应用程序子目录中创建以您的模型命名的子目录。请注意，管理应用程序在查找目录时会将模型名称小写，因此如果要在区分大小写的文件系统上运行应用程序，请确保以全小写命名目录。
> 
> 要覆盖特定应用程序的管理模板，请从 django/contrib/admin/templates/admin 目录复制和编辑模板，并将其保存到您刚刚创建的目录之一。

# ios6 - Using UINavigationController in Tab bar application in ios 6

> ID：14701726
> 
> 赞同：0
> 
> 时间：2013-02-05T06:50:49.243
> 
> 标签：ios6, uinavigationcontroller, xcode4.5

I'm developing an Tab bar application in that i want to use navigation controller. In `didSelectRowAtIndexPath` i want to push the new view to the controller. I tried the following code but it did'nt help me.

```
DetailView *detailView = [[DetailView alloc] init];
[self.navigationController pushViewController:detailView animated:YES]; 
```

Can any one guide me where i'm doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:27:44.943

如果没有父 UINavigationController 您可以创建一个并像这样调用它。

```
DetailView *detailView = [[DetailView alloc] init];
UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:myCont];
[self presentViewController:navController animated:YES completion:^{
    NSLog(@"Called on Completion");
}]; 
```

如果您已经有一个 UINavigationController 只需调用它

```
[self presentViewController:detailView animated:YES completion:^{
    NSLog(@"Called on Completion");
}]; 
```

# android - grep the adb logcat & write the output to a text file

> ID：14701728
> 
> 赞同：38
> 
> 时间：2013-02-05T06:50:49.637
> 
> 标签：android, file, text, grep, logcat

I want to grep the adb logcat & write the output to a text file. If I just do

```
./adb logcat > std.txt 
```

it writes the entire log to the text file & If I do

```
./adb logcat | grep ABC 
```

it prints all lines containing ABC to my terminal. But now I wish to search for ABC & write only these lines to a text file.

```
./adb logcat | grep ABC > std.txt 
```

doesn't work. Plz help.

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-08-09T12:06:55.757

我认为 grep 缓冲存在问题。你可以尝试这样的事情：

```
./adb logcat | grep --line-buffered ABC > std.txt 
```

链式 grep 应该是同样的问题。

编辑：可以在这里找到一个类似的问题：[为什么使用 grep 两次时没有显示输出？](https://stackoverflow.com/questions/5427483/tail-pipe-to-grep-pipe-to-another-grep-seems-to-be-a-pipe-too-far).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-09T13:34:53.450

编辑：这似乎有效

```
 ./adb logcat |grep --line-buffered  ABC >a.txt 
```

* * *

我可以向你解释这里发生了什么。希望有人可以从中得出解决方案。如果您在终端中运行以下命令

```
cat |grep "ABC" 
```

并开始输入文本行，您可以看到 grep 立即输出包含的任何行。

```
 cat somefile.txt | grep "ABC" 
```

将按预期将所有包含“ABC”的行打印到终端。

但是如果你跑

```
cat |grep ABC >a.txt 
```

并开始在终端上输入文本，您可以看到在您输入 EOF 字符 (Ctrl+D) 并使 cat 终止之前，该文件不会被写入。

但是使用 --line-buffered 会以预期的方式提供输出

```
cat |grep --line-buffered  ABC >a.txt 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-15T13:53:01.620

这对我有用：

`./adb logcat | grep ABC | dd of=/home/levex/dump.txt`

**说明：** `./adb logcat`打开 logcat，然后它通过一个管道将`grep ABC`行过滤到包含 的行`ABC`，然后再次通过管道将`dd of=/home/levex/dump.txt`其打印到文件中。 `of=xxx`参数设置输出文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-16T08:58:16.370

尝试`adb logcat | grep ABC | tee out`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-04T19:33:13.617

类似的东西可能会寻找所有带有单词时间、testapk1 和 testapk2 的条目

```
adb logcat -v time testapk1 testapk2 *:S -d > adblogfilter.log 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T06:58:14.963

尝试这个

```
./adb logcat -s "ABC" > std.txt 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-12T14:24:50.340

[将 LogCat 保存到文本文件](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)

“要将 LogCat 保存到文本文件，请打开终端窗口并输入：adb logcat -d > logcat.txt”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-26T02:07:13.810

尝试这个

```
adb logcat -d -e "ABC" > std.txt 
```

# google-app-engine - App Engine 搜索中的“每个文档一致”

> ID：14701731
> 
> 赞同：2
> 
> 时间：2013-02-05T06:51:03.313
> 
> 标签：google-app-engine

只是阅读了搜索 api 文档并遇到了一个堆栈溢出问题，其答案中提到了默认的“每个文档一致”索引（[Appengine Search API - Globally Consistent](https://stackoverflow.com/questions/13313118/appengine-search-api-globally-consistent)）。

我在 Search API 的 App Engine 文档中找不到任何提及该术语的内容，我想知道这意味着什么（或指出我正确的方向）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:09:37.283

全球一致的索引在 1.7.3 版中被弃用（参见：[https](https://code.google.com/p/googleappengine/wiki/SdkReleaseNotes#Version_1.7.3_-_October_23,_2012) ://code.google.com/p/googleappengine/wiki/SdkReleaseNotes#Version_1.7.3_-_October_23,_2012 ）

一致性模式之间的区别在此处的源代码中进行了说明：[https ://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/search/search.py​​?r=281# 2334](https://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/search/search.py?r=281#2334)

具体来说：

> 索引支持的一致性模式。创建索引时，您可以请求索引是 GLOBALLY_CONSISTENT 还是 PER_DOCUMENT_CONSISTENT。设置了 GLOBALLY_CONSISTENT 模式的索引在搜索时返回结果，其中包含在搜索请求之前提交的所有更改。对于设置了 PER_DOCUMENT_CONSISTENT 模式的索引，搜索结果可能包含一些过时的文档。但是，对存储在此类索引中的任何文档的任何两次更改都以正确的顺序应用。PER_DOCUMENT_CONSISTENT 的好处是它提供了比全局一致的更高的索引文档吞吐量。
> 
> 通常，如果组织个人用户信息，您将使用 GLOBALLY_CONSISTENT，以在任何搜索结果中反映用户已知的所有更改。PER_DOCUMENT_CONSISTENT 应该用于合并来自多个来源的信息的索引中，其中没有单个用户知道所有收集的数据。

# java - Pick/move/resize/delete annotation in JUNG graph

> ID：14701732
> 
> 赞同：0
> 
> 时间：2013-02-05T06:51:09.073
> 
> 标签：java, jung

Does JUNG give the ability to pick, move, resize, or delete `Annotation` objects from the graph?

**Edit:**

After considering the [AnnotationDemo](http://jung.sourceforge.net/site/jung-samples/xref/edu/uci/ics/jung/samples/AnnotationsDemo.html) (cited by @sdasdadas), the following code of interest was identified (in lines 126-134):

```
// Get the RenderContext for this visualization viewer
RenderContext<String,Number> rc = vv.getRenderContext();

// Create a new AnnotatingGraphMousePlugin with default settings.
// The AnnotatingGraphMousePlugin class is a subclass of AbstractGraphMousePlugin
// and also implements the interfaces MouseListener and MouseMotionListener. As
// such, the respective overridden methods would be a interesting place to embed
// the logic for the required behavior. However I am still not sure!
AnnotatingGraphMousePlugin<String,Number> annotatingPlugin =
        new AnnotatingGraphMousePlugin<String,Number>(rc);

// Create a GraphMouse for the main view, using the annotating mouse plugin.
final AnnotatingModalGraphMouse<String,Number> graphMouse = 
        new AnnotatingModalGraphMouse<String,Number>(rc, annotatingPlugin); 
```

and (in lines 174-180):

```
// Create annotation controls to allow the selection of color, shape, fill,
// and z-order. None of these controls is of interest to us.
AnnotationControls<String,Number> annotationControls = 
        new AnnotationControls<String,Number>(annotatingPlugin); 
```

Based on the comments shown above, my initial question remains the same.

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:18:04.183

是的，看看[AnnotationsDemo](http://jung.sourceforge.net/site/jung-samples/xref/edu/uci/ics/jung/samples/AnnotationsDemo.html)。

# ruby-on-rails - Shell 脚本启动乘客

> ID：14701742
> 
> 赞同：0
> 
> 时间：2013-02-05T06:51:30.800
> 
> 标签：ruby-on-rails, shell, scripting, crontab

我有一个 shell 脚本，如果它没有运行，它会启动一个乘客实例：

```
#!/bin/bash
/usr/sbin/lsof -i :82 > /home/var/www/site-owner/data/www/site.com/currenttest
if [ ! -s /home/var/www/site-owner/data/www/site.com/currenttest ];
  then
    cd /home/var/www/site-owner/data/www/site.com/current/
    passenger start -p 82 -d -e production --user site-owner
fi 
```

如果我从 root ssh 环境启动它，它会非常好用。我尝试从 crontab 启动它，但它没有以错误开头：“passenger_loader.sh：第 12 行：乘客：找不到命令”。

经过数小时的谷歌搜索，我发现来自 root 用户和 root 控制台用户的 crontab 有不同的环境，但无论如何，我不明白如何让 crontab root 用户像 root 控制台用户一样运行脚本。我开始添加

```
source ~/.bash_profile
source ~/.bashrc 
```

到一个脚本，但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:03:17.530

我不知道这是否是一个解决方案，但它就像我需要的那样工作（我从 bash 开始）：

```
#!/bin/bash

if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi

HOME=/root
PATH=/usr/local/rvm/gems/ruby-1.9.3-p374/bin:/usr/local/rvm/gems/ruby-1.9.3-p374@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p374/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/root/bin
export HOME PATH

/usr/sbin/lsof -i :82 > /home/var/www/site-owner/data/www/site.com/currenttest
if [ ! -s /home/var/www/site-owner/data/www/site.com/currenttest ];
  then
    # passenger down
    date
    #. "/usr/local/rvm/scripts/rvm"
    rvm use 1.9.3
    cd /home/var/www/site-owner/data/www/site.com/current/
    passenger start -p 82 -d -e production --user site-owner
fi 
```

# vb.net - VB.Net append text file into access mdb

> ID：14701743
> 
> 赞同：2
> 
> 时间：2013-02-05T06:51:42.753
> 
> 标签：vb.net, ms-access

I have a VB.NET program that reads a text file and inserts the data into a mdb. The text file is a stream string that is not possible to split, so I need to use substring to get the different fields. The way that the code works now is that the string is substring, then put inserted into different fields in the mdb. But the speed is too slow.

Example: `12345678TomChan 80`

*   The first eight digits are the ID
*   The folowing 10 digits are the name
*   The final two digits are mark

This is the string layout and it has about 20000 records.

Is there a faster way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:51:19.577

使用 schema.ini 文件并直接导入到 MS Access。

```
[imp.txt]
ColNameHeader=False
Format=FixedLength
Col1=ID  Char Width 8
Col2=AName  Char Width 10
Col3=Mark Char Width 2 
```

SQL

```
SELECT * INTO Imp FROM [Text;DATABASE=Z:\docs].[imp.txt] 
```

参考： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms709353 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx)

# tesseract - 正方体示例代码错误

> ID：14701745
> 
> 赞同：0
> 
> 时间：2013-02-05T06:51:48.337
> 
> 标签：tesseract

我正在尝试在 Eclipse 中运行 tesseract 的测试程序以进一步创建 Java 应用程序。当我执行以下程序时： import java.io.File; 导入 net.sourceforge.tess4j.*；

公共类 TesseractExample {

```
public static void main(String[] args) {
    File imageFile = new File("eurotext.tif");
    Tesseract instance = Tesseract.getInstance();  // JNA Interface Mapping
    //Tesseract1 instance = new Tesseract1(); // JNA Direct Mapping

    try {
        String result = instance.doOCR(imageFile);
        System.out.println(result);
    } catch (TesseractException e) {
        System.err.println(e.getMessage());
    }
} 
```

}

生成的错误是：线程“main”java.lang.Error中的异常：未解决的编译问题：

```
at net.sourceforge.vietocr.ImageIOHelper.getIIOImageList(ImageIOHelper.java:243)
at net.sourceforge.tess4j.Tesseract.doOCR(Tesseract.java:166)
at net.sourceforge.tess4j.Tesseract.doOCR(Tesseract.java:151)
at TesseractExample.main(TesseractExample.java:13) 
```

所有库都包含在类路径中，包括对 pdf 图像的支持。帮助任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:48:38.337

我在使用 Tesseract1 的 Windows 中遇到了问题（我不确定确切的问题是否是那个问题，但 Tesseract1 从未在 Windows 中工作过，而 Tesseract 可以）。我搬到了 Ubuntu Linux 12 32 位，两个类都运行良好（不过必须编译 Tesseract）。

# java - 如何解析 Sub JSONArray 并显示图像？

> ID：14701747
> 
> 赞同：0
> 
> 时间：2013-02-05T06:52:12.920
> 
> 标签：java, android, json, arrays

我是一名 php 程序员，我正在努力学习 JAVA。我在尝试解析 json 文件时遇到问题。已经3天了..对此感到头疼。我正在创建一个 android 应用程序（使用 JAVA）来解析 json 文件。这是示例 json 数据（[http://metalgearrisingguide.com/samplejson.json](http://metalgearrisingguide.com/samplejson.json)）以及如何显示图像？

当我尝试时，我的 logcat 出现以下错误，模拟器上没有显示任何内容

```
Error parsing data org.json.JSONException: Value {"product":[{"summary":"Speak a word and the knob will turn by itself","state":"good","image":"http:\/\/upload.wikimedia.org\/wikipedia\/commons\/e\/e9\/Door_Knob_with_Lock_USA.jpg","title":"Special Door knob requires no holding just music","address":[{"address":"Merchant address 1"},{"address":"merchant address 2"}],"url":"http:\/\/merchantwebsite.com"},{"summary":"This door bell will detect faces of known people and change music if unknown","state":"good","image":"http:\/\/www.thedoorbell.net\/images\/DoorbellHeader.jpg","title":"Special Door Bell that uses face recognition technology","address":[{"address":"Merchant address 1"},{"address":"merchant address 2"}],"url":"http:\/\/merchantwebsite2.com"},{"summary":"Can't wake up in the morning?\r\nWill you be awake for party? Listen to your favourite song that will awake you!","state":"refurnished","image":"http:\/\/jgrundig.wpengine.netdna-cdn.com\/wp-content\/uploads\/2011\/08\/RCA-Alarm-Clock-with-Charging-Cord-RC107.jpg","title":"The only alarm clock that plays your favourite song from your smartphone","address":[{"address":"Merchant address 1"},{"address":"merchant address 2"}],"url":"http:\/\/merchantwebsite3.com"}],"site":{"sitename":"Simple Product Find","imgprefix":"http:\/\/mydomain.com\/","urlprefix":"http:\/\/mydomain.com\/"}} at data of type org.json.JSONObject cannot be converted to JSONArray 
```

这是我的 JSONfunctions 类：

```
public class JSONfunctions {
    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();

        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{

            jArray = new JSONObject(result);            
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
        //return result;
    }
} 
```

这是我的代码：

```
public class Main extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://metalgearrisingguide.com/samplejson.json");

        try{

            JSONArray data = json.getJSONArray("data");
            JSONArray products = data.getJSONArray(1);

           for(int i=0;i<products.length();i++){    

                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = products.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("title", "Product name:" + e.getString("title"));
                        map.put("state", "Condition:" + e.getString("state"));
                map.put("summary", "Description: " +  e.getString("summary"));
                mylist.add(map);

                Set set = map.entrySet(); 
                // Get an iterator 
                Iterator o = set.iterator(); 
                // Display elements 
                while(o.hasNext()) { 
                Map.Entry me = (Map.Entry)o.next(); 
                System.out.print(me.getKey() + ": "); 
                System.out.println(me.getValue()); 
                } 
                System.out.println(); 

            }

        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                        new String[] { "state", "summary" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(Main.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:32:30.083

你提出两个问题，第一个，如何解析子json；第二，如何显示来自网络的图像；我通过您的示例 json url 做了一个成功的演示，如下所示：

首先，定义一个数据类：Data.java

```
 package com.example.jsonparser;

import java.util.ArrayList;

public class Data {

    private String mState;
    private String mImageUrl;
    private String mTitle;
    private String mSummary;
    private ArrayList<String> mAddList;
    private String mUrl;

    public Data(String mState, String mImageUrl, String mTitle,
            String mSummary, ArrayList<String> addList, String mUrl) {
        super();
        this.mState = mState;
        this.mImageUrl = mImageUrl;
        this.mTitle = mTitle;
        this.mSummary = mSummary;
        this.mAddList = addList;
        this.mUrl = mUrl;
    }

    public String getmState() {
        return mState;
    }

    public void setmState(String mState) {
        this.mState = mState;
    }

    public String getmImageUrl() {
        return mImageUrl;
    }

    public void setmImageUrl(String mImageUrl) {
        this.mImageUrl = mImageUrl;
    }

    public String getmTitle() {
        return mTitle;
    }

    public void setmTitle(String mTitle) {
        this.mTitle = mTitle;
    }

    public String getmSummary() {
        return mSummary;
    }

    public void setmSummary(String mSummary) {
        this.mSummary = mSummary;
    }

    public ArrayList<String> getmAddress1() {
        return mAddList;
    }

    public void setmAddress1(ArrayList<String> mAddress1) {
        this.mAddList = mAddress1;
    }

    public String getmUrl() {
        return mUrl;
    }

    public void setmUrl(String mUrl) {
        this.mUrl = mUrl;
    }

} 
```

二、定义解析json字符串的解析器类：Parser.java

```
 package com.example.jsonparser;

import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class Parser {

    private ArrayList<Data> mDataSource = new ArrayList<Data>();

    public Parser(String json) {
        jsonParser(json);
    }

    private void jsonParser(String json) {

        try {

            JSONObject obj = new JSONObject(json);
            JSONObject var = obj.getJSONObject("data");

            JSONArray list = var.getJSONArray("product");

            int len  = list.length();
            for (int i = 0; i < len; i++) {
                try {
                    JSONObject data = list.getJSONObject(i);
                    String state = data.getString("state");
                    String image = data.getString("image");
                    String title = data.getString("title");
                    String summary = data.getString("summary");
                    String url = data.getString("url");
                    ArrayList<String> addList = new ArrayList<String>();
                    JSONArray addArray = data.getJSONArray("address");
                    int size = addArray.length();
                    /**
                     * parser sub json
                     */
                    for(int j = 0; j < size; j++) {
                        addList.add(addArray.getJSONObject(j).getString("address"));
                    }
                    mDataSource.add(new Data(state, image, title, summary, addList, url));

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public ArrayList<Data> getSource() {
        return mDataSource;
    }
} 
```

三、通过url定义一个任务下载图片：DownloadImageTask.java

```
 package com.example.jsonparser;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.widget.ImageView;

public class DownloadImageTask extends AsyncTask<Void, Void, Bitmap> {

    private String mUrl;
    private ImageView mImageView = null;

    public DownloadImageTask(String Url, ImageView imageView) {

        mUrl = Url;
        this.mImageView = imageView;
    }

    protected void onPostExecute(Bitmap result) {
        super.onPostExecute(result);
        if (result != null) {
            mImageView.setImageBitmap(result);
        }
    }

    protected Bitmap doInBackground(Void... params) {

        Bitmap bitmap = getBitmap(mUrl);
        return bitmap;
    }

    public Bitmap getBitmap(String imageUrl) {
        Bitmap mBitmap = null;
        try {
            URL url = new URL(imageUrl);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            InputStream is = conn.getInputStream();
            mBitmap = BitmapFactory.decodeStream(is);

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return mBitmap;
    }
} 
```

第四，定义一个扩展 BaseAdapter 的适配器，用于显示数据和图像：Adapter.java

```
 package com.example.jsonparser;

import java.util.ArrayList;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AbsListView.RecyclerListener;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class Adapter extends BaseAdapter {

    private static final String TAG = "Adapter";
    private Activity mActivity;
    public ArrayList<Data> mObjects;

    static class ViewHolder {
        ImageView icon;
        TextView title;
        DownloadImageTask mTask;
    }

    public Adapter(Activity activity, ArrayList<Data> mObjects) {

        this.mActivity = (Activity) activity;
        this.mObjects = mObjects;
    }

    public void setObjects(ArrayList<Data> mObjects) {
        this.mObjects = mObjects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        Data item = mObjects.get(position);
        View rowView = convertView;

        if (rowView == null) {
            LayoutInflater inflater = mActivity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.item, parent, false);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.icon = (ImageView) rowView.findViewById(R.id.image);
            viewHolder.title = (TextView) rowView.findViewById(R.id.title);
            rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();

        holder.title.setText(item.getmTitle());
        holder.icon.setBackgroundResource(R.drawable.ic_launcher);
        holder.mTask = new DownloadImageTask(item.getmImageUrl(), holder.icon);
        if (!holder.mTask.isCancelled()) {
            holder.mTask.execute();
        }

        return rowView;
    }

    @Override
    public int getCount() {

        return (this.mObjects.size());
    }

    @Override
    public Object getItem(int position) {

        return (this.mObjects.get(position));
    }

    @Override
    public long getItemId(int position) {

        return (position);
    }

    public AbsListView.RecyclerListener mRecyclerListener = new RecyclerListener( ){

        public void onMovedToScrapHeap(View view) {
            ViewHolder viewHolder = (ViewHolder) view.getTag();
            DownloadImageTask imagetask = viewHolder.mTask;
            if (imagetask != null) {
                imagetask.cancel(true);
            }
        }

    };
} 
```

最后，在活动中使用这些类：MainActivity.java

```
 package com.example.jsonparser;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.widget.ListView;

public class MainActivity extends Activity {

    private ListView mListView;
    private Adapter mAdapter;
    private ArrayList<Data> mSource = new ArrayList<Data>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mListView = (ListView) findViewById(android.R.id.list);
        mAdapter = new Adapter(this, mSource);
        mListView.setAdapter(mAdapter);
        mListView.setRecyclerListener(mAdapter.mRecyclerListener);

        final String url = "http://metalgearrisingguide.com/samplejson.json";
        new Thread(new Runnable() {

            @Override
            public void run() {
                Parser parser = new Parser(getJSONfromURL(url));
                mSource = parser.getSource();
                Message msg = mHandler.obtainMessage();
                mHandler.sendMessage(msg);

            }
        }).start();

    }

    private Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            mAdapter.setObjects(mSource);
            mAdapter.notifyDataSetChanged();
        }
    };

    public String getJSONfromURL(String url) {
        InputStream is = null;
        String result = "";

        // http post
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }
        return result;
    }
} 
```

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:cacheColorHint="@android:color/transparent" />

</LinearLayout> 
```

项目.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_gravity="left|top"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp" />

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:gravity="left|top"
        android:lineSpacingExtra="3.0dp"
        android:textColor="#ffffff"
        android:textSize="15sp" />

</LinearLayout> 
```

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:00:59.097

与 PHP 一样，您将首先读取您感兴趣的 JSON 对象的“图像”字段，然后让您的程序处理它 - 如果您使用的是 Java 客户端，则获取图像然后绘制并将其添加到帆布; 如果您在网络上，则通过在 img 上设置 href 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:15:52.720

使用此代码：

```
 JSONObject json = JSONfunctions.getJSONfromURL("http://metalgearrisingguide.com/samplejson.json");

            try{

                JSONArray products = json.getJSONArray("product");

               for(int i=0;i<products.length();i++){  
    JSONObject new_json = products.getJSONObject(i);
    String image_url = new_json.getString("image")
      }
    } catch(Exception e){
    } 
```

# c - 如何有效地找到另一个数组中子数组的所有匹配项？

> ID：14701755
> 
> 赞同：1
> 
> 时间：2013-02-05T06:53:14.730
> 
> 标签：c, arrays, search, optimization

例如，这是我现在实现它的方式：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

size_t *find_matches(char *needle, size_t needleSize, char *haystack, size_t haystackSize, size_t *size) {
    size_t max_matches = 256;
    size_t *matches = malloc(sizeof(size_t) * max_matches);
    int matchCount = 0;
    for(int i = 0; i + needleSize <= haystackSize; i++) {
        bool matched = true;
        for(int j = 0; j < needleSize; j++) {
            if(haystack[i + j] != needle[j]) {
                matched = false;
                break;
            }
        }

        if(matched) {
            matches[matchCount] = i;
            matchCount++;
            if(matchCount == max_matches) {
                break;
            }
        }
    }
    *size = matchCount;
    return matches;
}

int main() {
    char needle[] = {0xed, 0x57, 0x35, 0xe7, 0x00};
    char haystack[] = {0xed, 0x57, 0x35, 0xe7, 0x00, ..., 0xed, 0x57, 0x35, 0xe7, 0x00, ...};
    size_t size;
    size_t *matches = find_matches(needle, sizeof(needle), haystack, sizeof(haystack), &size);

    for(size_t i = 0; i < size; i++) {
        printf("Match %zi: %zi\n", i, matches[i]);
    }

    return 0;
} 
```

这不能再优化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:13:04.847

请参阅[Rabin-Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)和其他算法（[Knuth-Morris-Pratt 算法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)、[Boyer-Moore 算法](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)）。

# php - 将动态文本框字段值插入数据库？动态创建mysql字段？

> ID：14701756
> 
> 赞同：0
> 
> 时间：2013-02-05T06:53:16.680
> 
> 标签：php, javascript

我一直在寻找一种将动态表单的值输入数据库的方法，但我没有想法。我找到了如何动态创建这些文本框的解决方案。最大为 6 个文本框，名为 txtdatefrom0 和 txtdateto0、txtdatefrom1 和 txtdateto1，依此类推。

这是将其插入数据库的 php 代码（不工作）：

```
<?php
if(!mysql_connect($mysql_host, $mysql_user, $mysql_pass) || !mysql_select_db($mysql_db)) {
    die(mysql_error());
}
$sets=mysql_real_escape_string($_REQUEST["num"]); 
for($loop=0;$loop<$sets;$loop++){
    $df="txtdatefrom".$loop;
    $dt="txtdateto".$loop;
    if(isset($_POST[$df]) && isset($_POST[$dt])) {
        $datefrom=mysql_real_escape_string($_REQUEST[$df]);
        $dateto=mysql_real_escape_string($_REQUEST[$dt]);
        $query="INSERT INTO testob (datefrom,dateto) VALUES ('$datefrom','$dateto')";
        $query_run=mysql_query($query);
    }
    else {
        echo 'Fill up all fields';
    }
}
?> 
```

我想到了两种解决方案，要么为我的动态文本框创建静态字段，要么为创建的每个文本框在数据库中自动创建字段。感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:04:35.703

静态字段是要走的路。您不希望列数不受控制。如果出现问题，您的数据库可能很快就会看起来像意大利面条。如果您有最大数量的字段..只需创建那么多静态字段。

# java - 在java中将字符串列表转换为BigDecimal列表

> ID：14701757
> 
> 赞同：4
> 
> 时间：2013-02-05T06:53:19.203
> 
> 标签：java, list, collections, type-conversion

我在将 String 列表转换为 Java 中的 Bigdecimal 列表时遇到问题。

我有一个字符串列表，例如，

```
List<String> stringList = new LinkedList<String>();
stringList.add("123");
stringList.add("456");
stringList.add("789"); 
```

和 BigDecimal 列表为

```
List<BigDecimal> bigDecimalList = new LinkedList<BigDecimal>(); 
```

现在我想转换`stringList`为`bigDecimalList`. 我知道我们可以遍历`stringList`并且可以添加到`bigDecimalList`using `new BigDecimal(string)`。除了循环还有其他工作吗？？？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T06:57:09.643

好吧*，有些东西*必须循环——直到 Java 8 带有 lambda 表达式以更容易地表达转换，没有通用的方法来进行转换。显然，您可以编写一个采用类名并始终将传入列表的每个元素作为参数通过反射传递给目标类的构造函数的方法，但这在各种其他情况下都会失败。

鉴于循环有多短，我肯定会这样做：

```
List<BigDecimal> bigDecimalList = new LinkedList<BigDecimal>();
for (String value : stringList) {
    bigDecimalList.add(new BigDecimal(value));
} 
```

你*真的*需要避免那 4 行代码吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T06:56:17.803

在*某个*级别——无论是在外部库、较低级别的库中，还是在您的代码中——您必须遍历结构并`BigDecimal`在其他列表中创建新对象。

现在 Java 8 已经有效地退出了，它可以这样表达得相当简洁。此代码假定您已经在`stringList`某处定义。

```
List<BigDecimal> bigDecimalList = stringList.stream()
        .map(BigDecimal::new)
        .collect(Collectors.toList()); 
```

这将获取 的所有内容`stringList`，将它们映射到 的构造函数`BigDecimal`，并将它们收集到一个新`List`对象中，然后我们对其进行分配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T07:21:05.530

使用 Google Common 的[`transform`](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Lists.html#transform%28java.util.List,%20com.google.common.base.Function%29). 您提供原始列表和转换函数，它会执行循环，将转换应用于每个元素。这实际上是懒惰地完成的，因此在您迭代或获取元素之前不会应用转换。

```
List<String> strings = ...
List<BigDecimal> numbers = Lists.transform(strings, new Function<String, BigDecimal>() {
  public BigDecimal apply(String str) {
    return new BigDecimal(str);
  }
}); 
```

这样做会让你更接近函数式编程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T22:19:15.580

如果您使用[Eclipse Collections](http://www.eclipse.org/collections/)（以前的 GS Collections）并将 stringList 更改为 MutableList 或类似的东西，您可以编写：

```
MutableList<String> stringList = FastList.newListWith("123", "456", "789");

MutableList<BigDecimal> bigDecimalList = stringList.collect(new Function<String, BigDecimal>()
{
    public BigDecimal valueOf(String eachString)
    {
        return new BigDecimal(eachString);
    }
}); 
```

使用 Java 8 方法引用，这变为：

```
MutableList<BigDecimal> bigDecimalList = stringList.collect(BigDecimal::new); 
```

**注意：**我是 Eclipse Collections 的提交者。

# c - 在 C 中引用双指针

> ID：14701758
> 
> 赞同：1
> 
> 时间：2013-02-05T06:53:22.343
> 
> 标签：c, pointers

我正在尝试为 qsort 编写一个比较函数，并且在取消引用双指针时遇到了麻烦。

我定义了一个结构

```
typedef struct {
    float x;
    float y;
} point; 
```

我做了一个指向指针的数组：

```
point* ptarr[2]={pt1,pt3} //pt1 and pt3 have type point* 
```

我的比较函数定义如下：

```
int compare(const void * a, const void * b){
    return *(point**)a->x-*(point**)b->x;  //This is wrong
} 
```

由于 a 和 b 是指向数组中的值的指针，因此在我的情况下，它们是指向指向结构点的指针的指针。因此，我将它们转换为双指针（point**），然后取消引用它一次，并尝试访问 struct 中的值。编译器给了我一个“在不是结构或联合的东西中请求成员'x'”错误

我真的很困惑。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:55:42.167

这只是一个语法问题，真的。

```
return *(point**)a->x-*(point**)b->x;        // This is wrong

return (*(point**)a)->x - (*(point**)b)->x;  // This is right 
```

你得到错误的原因`*x->y`是一样的`*(x->y)`，但是你想要`(*x)->y`。

您的代码中还有一个错误：

```
point* ptarr[2]={pt1,pt3} // pt1 and pt3 have type point 
```

你看到错误了吗？要么`pt1`and`pt3`应该有类型`point *`（在这种情况下注释是错误的），或者`pt1`and`pt3`应该被替换为`&pt1`and `&pt3`。评论中的错误应被视为错误，因此无论哪种方式都是错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:56:14.777

如果您检查有关[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)的参考表，您将看到`->`访问运算符的优先级高于类型转换。这意味着表达式`(point**)a->x`实际上对`x`成员而不是`a`结构指针进行类型转换。你想要例如`(*(point**)a)->x`.

# vb.net - vb.net HTTPWebRequest 标头

> ID：14701765
> 
> 赞同：2
> 
> 时间：2013-02-05T06:53:46.327
> 
> 标签：vb.net, authentication, httpwebrequest, httpwebresponse, digest

我正在使用 VB.net，我正在尝试使用 HTTPWebRequest 加载文件。

我发现如果我请求一个需要用户名和密码的文件，我需要在请求的标头中设置它，如下所示：

```
Digest username=admin,password=21232f297a57a5a743894a0e4a801fc3,realm=MyServer,nonce="3b010c090c0a0000c0a80157c70079babf",uri="/data.xml",cnonce="3690046e5d2f641e5c4a8bd3dcf1f541",nc=00000003,algorithm=MD5,response="8f6129b934467074b3d0b9c543f7e025",qop="auth",opaque="4e6573732041636365737320436f6e74" 
```

但是我发现如果用户名或密码甚至领域、nonce、cnonce、response、opaque 错误，那么它也会拒绝访问。

但是，当这种情况发生并且它拒绝访问时，我需要一种方法来读取被拒绝的标头的标头，以便我可以从中读取领域、随机数和随机数。

当我尝试捕获错误时，我不确定该使用什么。

有没有办法查看被拒绝的标题？

我正在使用的代码如下所示：

（它有效，但如果用户名或密码等不正确，它会失败，我需要查看失败请求的标头）

```
' Create a WebRequest to the remote site
Dim request As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("http://192.168.0.30/data.xml")

' NB! Use the following line ONLY if the website is protected
request.Credentials = New System.Net.NetworkCredential("admin", "admin")

request.UseDefaultCredentials = False

request.Accept = "*/*"
request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)"

request.Headers("Accept-Encoding") = "gzip, deflate"
request.Headers("Pragma") = "no-cache"

request.ContentLength = 0
request.Method = "POST"

request.ContentType = "text/xml"
request.PreAuthenticate = True

Dim authorization_type As String = "Digest"
Dim username As String = "admin"
Dim password As String = "21232f297a57a5a743894a0e4a801fc3"
Dim realm As String = "MyServer"

Dim nonce As String = "3b010c090c0a0000c0a80157c70079babf"
Dim Uri As String = "/data.xml"
Dim cnonce As String = "3690046e5d2f641e5c4a8bd3dcf1f541"
Dim nc As String = "00000003"
Dim algorithm As String = "MD5"
Dim response As String = "8f6129b934467074b3d0b9c543f7e025"
Dim qop As String = "auth"
Dim opaque As String = "4e6573732041636365737320436f6e74"

Dim Authorization As String = authorization_type & " username=" & username & ",password=" & password & ",realm=" & realm & ",nonce=""" & nonce & """,uri=""" & Uri & """,cnonce=""" & cnonce & """,nc=" & nc & ",algorithm=" & algorithm & ",response=""" & response & """,qop=""" & qop & """,opaque=""" & opaque & """"

request.Headers("Authorization") = Authorization.ToString

' Call the remote site, and parse the data in a response object
Dim response1 As System.Net.HttpWebResponse = request.GetResponse()

' Check if the response is OK (status code 200)
If response1.StatusCode = System.Net.HttpStatusCode.OK Then

    ' Parse the contents from the response to a stream object
    Dim stream As System.IO.Stream = response1.GetResponseStream()
    ' Create a reader for the stream object
    Dim reader As New System.IO.StreamReader(stream)
    ' Read from the stream object using the reader, put the contents in a string
    Dim contents As String = reader.ReadToEnd()
    ' Create a new, empty XML document
    Dim document As New System.Xml.XmlDocument()

    ' Load the contents into the XML document
    'document.LoadXml(contents)

    MsgBox(contents) ' used for testing

    ' Now you have a XmlDocument object that contains the XML from the remote site, you can
    ' use the objects and methods in the System.Xml namespace to read the document

Else
    ' If the call to the remote site fails, you'll have to handle this. There can be many reasons, ie. the 
    ' remote site does not respond (code 404) or your username and password were incorrect (code 401)
    '
    ' See the codes in the System.Net.HttpStatusCode enumerator 

    Throw New Exception("Could not retrieve document from the URL, response code: " & response1.StatusCode)

End If 
```

# c# - TypeError：使用类型化数组时出现类型错误

> ID：14701771
> 
> 赞同：2
> 
> 时间：2013-02-05T06:54:32.020
> 
> 标签：c#, javascript, typed-arrays

当我尝试将我的 XHR 响应转换为`TypedArray`JavaScript 时，我得到：

> TypeError：类型错误

这是我的服务器端代码（ASP.NET Web 窗体）：

```
public partial class _Default : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        int number = 4;
        Response.BinaryWrite(BitConverter.GetBytes(number));
        Response.End();
    }
} 
```

这里是我的客户端代码：

```
xhr.open("GET", "http://localhost:6551/Default.aspx", false);  
xhr.overrideMimeType("text/plain; charset=x-user-defined");  
xhr.send(null);
var sss = new DataView(xhr.response); 
```

此外，当我尝试转换`xhr.response`with时，`Int16Array`我收到此错误：

> RangeError：大小太大（或为负）。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:28:19.040

好的，我发现了问题，我应该`xhr.responseType = "arraybuffer";`在 XHR 请求中使用，最后的代码是：

```
var xhr = new XMLHttpRequest();

xhr.open("GET", "http://localhost:6551/Default.aspx", true);
xhr.responseType = "arraybuffer"; 
xhr.onload = function(e) {
  var arraybuffer = xhr.response; // not responseText
  console.log(new Uint32Array(arraybuffer));
}
xhr.send(); 
```

更多细节：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

感谢您的帮助@MarcoK。

# sql - 使用 SSMA 迁移后使用 SQL Server 验证 Oracle 中的 Long RAW 列

> ID：14701773
> 
> 赞同：2
> 
> 时间：2013-02-05T06:54:42.443
> 
> 标签：sql, oracle, sql-server-2008, oracle11g, migration

我有一个 oracle 11g 源，我使用 Microsoft 的 SQL Server 迁移助手工具将其迁移到 SQL Server 2008。oracle 源有一个包含长原始列的表。用于迁移的类型映射是 long raw -> varbinary(max)。当我使用 SQL 开发人员查看 oracle 数据时，该列仅在每一行中显示 RAW。但是在 SQL Server 中，我能够以字符串格式查看迁移的数据。

我可以做些什么来验证或交叉检查 oracle 中的数据与 SQL 服务器中的数据，或者至少可以验证长原始列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T17:18:35.553

如果您仍然可以访问您的 Oracle 11g 数据库服务器：那么，在 Oracle 数据库上，创建一个到 SQL Server 数据库的远程数据库链接。有关信息，请参见[http://www.dba-oracle.com/t_database_link_sql_server_oracle.htm](http://www.dba-oracle.com/t_database_link_sql_server_oracle.htm)。

然后，仍然在 Oracle 上，编写一个 PLSQL 例程，该例程从本地 Oracle 表 LONG RAW 列中读取数据并将其与远程 SQL Server 表（迁移表）中的数据进行比较。

您可能需要使用内置的 PLSQL UTL_RAW 包来读取和比较数据。有关如何使用它的信息，请参阅 [http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/u_raw.htm#BABFGDG](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/u_raw.htm#BABFGDDG)

有关 LONG RAW 列在 11g 中的一般工作方式的信息，请参阅： http: [//docs.oracle.com/cd/B28359_01/appdev.111/b28370/datatypes.htm#CJAEGDEB](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/datatypes.htm#CJAEGDEB) [http://docs.oracle.com/cd /B28359_01/server.111/b28286/sql_elements001.htm#SQLRF00201](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements001.htm#SQLRF00201)

请注意，在使用较旧的 Oracle 数据库（例如 Oracle 8i）时，如果您的 Oracle LONG RAW 列大于 32K，您将无法使用 PLSQL 读取它们，您必须使用另一种编程语言来读取它们。请参阅[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:201012348073](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:201012348073)

# c# - 如何在asp.net c#中的gridview的列中显示文本和图像

> ID：14701774
> 
> 赞同：1
> 
> 时间：2013-02-05T06:54:45.673
> 
> 标签：c#, asp.net

从数据库中，如果有简单的文本，则文本应显示在网格视图中，如果表中的文本是图像文件的名称，则应显示图像

例子

```
id           text
----         -------
1            hello
2            hi
3            imagename.jpg 
```

现在我想在gridview的列[0]中显示hello和hi，也在同一列中显示图像（imagename.jpg），即列[0] ...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:03:13.167

您可以有类型的列`DataGridViewImageColumn`并为图像提供文本。

```
DataGridViewImageColumn column = new DataGridViewImageColumn();
column.HeaderText = "Image Name"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:06:51.690

```
<asp:GridView ID="grdImages" runat="server" AutoGenerateColumns="false">
    <Columns>

      <asp:ImageField DataImageUrlField="URL" NullDisplayText="Text when no image."/>
    </Columns>
</asp:GridView>

protected void Page_Load(object sender, EventArgs e)
{
        grdImages.DataSource = yourDataSource;
        grdImages.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:07:05.277

我已经做到了

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
     if (e.Row.RowType == DataControlRowType.DataRow)
     {
         string img = ((Image)e.Row.FindControl("Image1")).ImageUrl;
         string []ext=img.Split('.');
         if (ext.Length == 1)
         {
             ((Image)e.Row.FindControl("Image1")).Visible = false;
         }
         else
         {
             ((Image)e.Row.FindControl("Image1")).Visible = true;
         }
      }
     BindGrid();
} 
```

# php - 如何使用 dompdf 合并 PDF？

> ID：14701776
> 
> 赞同：7
> 
> 时间：2013-02-05T06:54:56.590
> 
> 标签：php, pdf, dompdf

我正在使用 dompdf 库来创建 PDF。除了我想将另一个 PDF（它位于特定路径）页面与新创建的 PDF 合并。

无论如何可以使用 dompdf 或我们有任何其他库吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T06:57:21.270

您是在谈论将一个 PDF 覆盖在另一个 PDF 之上还是将一个文档的页面附加到另一个文档？DOMPDF 目前不支持这两种功能，因为它专注于 HTML 到 PDF 的转换。由于该项目的这一重点，您不太可能在短期内看到任何支持处理现有 PDF 的工作。

您需要先将 HTML 呈现为 PDF（可能分为两部分），然后使用其他工具（如 pdftk（系统二进制文件）或 PDF Merger）将它们组合起来。我还没有尝试过 PDF Merger，但 pdftk 就像一个冠军。

# c# - 获取表格行中动态生成的控件 ID

> ID：14701779
> 
> 赞同：0
> 
> 时间：2013-02-05T06:55:29.220
> 
> 标签：c#, asp.net, dynamic, user-controls, row

我有一个 Web 应用程序，我使用用户控件根据行将其放置在表中，具体取决于计数。在用户控件中有 4 个文本框，我已将每个用户控件放置在表行中，并在页面加载时为该行提供唯一 ID。问题是，当我提交表单时，我试图通过行 id 获取数据，但控件返回 null。我正在获取行但在该行中我无法找到控件。如果我做过任何磨损，请查看我的代码。

```
MasterPage ctl00 = FindControl("ctl00") as MasterPage;
ContentPlaceHolder cplacehld = ctl00.FindControl("ContentPlaceHolder1") as ContentPlaceHolder;
foreach (SeatBookDetails sff in SBD)
{
    TableRow trow = (TableRow)cplacehld.FindControl("Row_" + sff.SeatRowId.ToString() + "_" + sff.SeatRowno.ToString());
    if (trow != null)
    {
        string ss = trow.ID;

        TextBox txtcust = (TextBox)trow.FindControl("txtcustname");

        if (txtcust != null)
        {

      }
        TextBox txtprofession = (TextBox)trow.FindControl("txtprofession");
        if (txtprofession != null)
        {

        }
    }
} 
```

当我检查元素时，我发现了结构，我附上了这个外观的图像。在这里可以做什么？我怎么能得到这个控件？

![截图](../Images/ef2dc2f8f0f121f44cda8f3d67f6675f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:27:52.513

首先在您的用户控件类中提供仅具有 get 访问器的属性，例如：

`public string CustomerName { get { return txtCustName.Text; } }`

`foreach`然后您可以使用循环遍历表格的行和单元格

然后使用以下命令找到您的用户控件：

`if (_control is Usercontrol) { Usercontrol _form = (Usercontrol )_control; string name = _form.CustomerName; }`

还要确保动态加载用户控件集合`Page_init`或`Page_Load` 使其可访问。

# jquery - 显示 JSON 源的 jQuery 自动完成问题

> ID：14701782
> 
> 赞同：0
> 
> 时间：2013-02-05T06:55:40.523
> 
> 标签：jquery, json

以下是我的 jQuery 代码：

```
$("#destinations").autocomplete({
    source: function (request, response) {
        $.getJSON("http://localhost/contactApi.do?&callback=?", 
          { 'contactMobile': request.term, maxRows: 12, style: "full" }, 
          function(data) {
              if(data.ApiResponse){
                  var x = $.map(data.ApiResponse, function(v, i){
                      console.log(v)
                      return {
                          label: v.Mobile + ' - ' + v.Name, 
                          v: v.Name
                      }
                  });
                  response(x);
              }
          }
        );        
    }
}) 
```

我可以通过 FireBug 观察到以下 JSON 响应是作为输入手机号码（如 123）的结果创建的......

```
{"ApiResponse":{"Status":1000,"TransactionId":"","Data":{"Contacts":[{"Email":"","Mobile":"123456","Name":"john"}]},"Operation":"api","ResponseTime":"2013-02-05T16:08:33+11:00","StatusText":"Success","RequestTime":"2013-02-05T16:08:33+11:00","Object":"Contact"}} 
```

这表明 jQuery 部分可能工作正常，但我的输入区域下方没有显示过滤结果的下拉菜单。我的脚本或 JSON 格式有问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:59:05.227

来自 JqueryUI 自动完成 API[自动完成](http://api.jqueryui.com/autocomplete/)

> 标签属性显示在建议菜单中。当用户选择一个项目时，该值将被插入到输入元素中。如果只指定了一个属性，它将用于两者，例如，如果您只提供值属性，则该值也将用作标签。

应该是这样的。

```
return 
     {    label: v.Mobile + ' - ' + v.Name,,
          value: v.Name
     } 
```

# php - 关于 sql 查询

> ID：14701785
> 
> 赞同：2
> 
> 时间：2013-02-05T06:55:52.670
> 
> 标签：php, mysql, sql

我对 SQL 有疑问，我解释一下：

我有 2 张桌子

> 公告工作
> 
> 公告_教育

您可以在下面看到表格的预览

**公告_教育** ![公告_教育](../Images/8e99dc733cb57ea00df60ac3309c1506.png)

**公告工作** ![公告工作](../Images/7b5fa25ebaa6b803731666299b9f0f02.png)

我认为我的数据库结构不是很好......但为时已晚！（忘记我的数据类型，实际上是胡说八道），我是坏人吗？

所以：你怎么能得到最后 5 条记录 ORDER BY insert_db_date （这两个表之间）？

-> 如果不可能，您有其他解决方案吗？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:05:06.190

在选择之前，您需要将订单应用到您的列。也就是说，假设您尚未添加总是最新的条目。但最好是安全而不是抱歉！

```
SELECT * FROM announcements_education ORDER BY DESC insert_db_date LIMIT 5; 
```

分别：

```
SELECT * FROM announcements_job ORDER BY DESC insert_db_date LIMIT 5; 
```

您必须指定按降序排序，因为默认`ORDER BY`将按升序排序。该`LIMIT`语句将确保您只返回前五个条目。由于您的表格是按从最新条目数据到最新的顺序排列的，因此仅显示最近的五个。

**更新：**

我稍微误读了你的问题。如果你想在两个表中都获得前 5 名，下面的代码就是你想要的。

```
(SELECT * FROM announcements_education ORDER BY DESC insert_db_date)
UNION ALL
(SELECT * FROM announcements_job ORDER BY DESC insert_db_date)
LIMIT 5 
```

让我知道它有效！

# html - Chrome 中一个奇怪的渲染错误

> ID：14701787
> 
> 赞同：2
> 
> 时间：2013-02-05T06:55:56.600
> 
> 标签：html, google-chrome, css

> # 更新
> 
> 如果您第一次加载[页面](http://www.arch0-0.com/)并且没有出现此错误，
> 
> 单击![锚](../Images/26dda5e9971d4a87a1bf7e7272b1edcf.png)再次将您定向到主页的 ，该错误很可能会出现。（很烦人，几乎每次我从其他页面回到主页时，都会出现这个错误。）
> 
> 我正在使用 Chrome 24.0.1312.57。

* * *

Chrome 一直是支持 CSS3 的最优秀的浏览器之一。当我遇到她这种类似于虫子的怪异行为时，我感到非常失望。

我[用 CSS3 和 jQuery 手工制作了一些简单的圆形按钮](http://www.arch0-0.com/)。（我没有选择纯 Javascript，因为我自己懒于研究跨浏览器兼容性。）

一个按钮基本上由一个包含两个子部分的部分组成，一个子部分还包含另一个子部分。它们都在触发窗口叠加的锚点内：

```
<a><div class="archbox smaller"><div class="archfacebook"></div>
<div class="archrollerx"><div class="archfacebook below2"></div></div></div></a> 
```

锚的样式很简单`flow:right`，这就是外部分区的样式：

```
-webkit-border-radius: 22px;
border-radius: 22px;
height: width: 44px;
height: 44px;
overflow: hidden;
border: 1px #FFF solid;
position: relative; 
```

当没有任何问题时，这就是他们在休息阶段的样子：

![在此处输入图像描述](../Images/6f0199c1f604824f3550725a97b24255.png)

但有时当我加载页面时，会发生这种情况：

![在此处输入图像描述](../Images/d32f9bf7221e9481f57eddc169eedc68.png)

但是在鼠标悬停后，它又恢复了正常。（就好像您刚刚告诉 Chrome 存在错误一样。）

有一段时间是正常的，但过了一段时间又出现了。

有时它会在鼠标悬停时提供额外的边框：

![在此处输入图像描述](../Images/cb28415c111f2bd8fefb78045a8d8038.png)

这确实是一种奇怪的行为，因为它不像每次加载页面时都会发生的运行时错误。有时它会发生，而有时它根本不会发生。所以我觉得有必要修复它。

起初我认为边框有一些错误，所以我添加了这个：

```
border:1px #FFF solid!important; 
```

到按钮的正常、悬停和访问状态。但这并没有解决问题；它仍然经常发生。我真的很沮丧。想来想去，我终于意识到这个位移其实有一个bug：Chrome似乎有“下意识地”在推特和谷歌加号按钮后面再次显示Facebook和Twitter按钮的倾向，给人一种他们有边界的错觉。而且我不知道如何阻止 Chrome 以这种方式行事。

有没有人遇到过同样的问题？我应该怎么做才能完全不会发生这种情况？

我尝试了 Firefox 和 Safari，但我还没有遇到过这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:14:10.310

我多次重载页面，也使用了隐私浏览来避免如果缓存，还没有遇到这个错误。谷歌浏览器 24.0.1312.57 m，Windows 7 Ultimate 64b。

您的谷歌浏览器是否可能从缓存中加载一些资源？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:59:20.243

**更新**：

```
<a class="con archtwitterx" href="https://twitter.com/intent/tweet?text=+check+this+article+ out&amp;url=http%3A%2F/www.arch0-0.com/2013/02/why-i-chose-to-drop-out.html" onclick="javascript:window.open(this.href,   '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=800');return false;" target="_parent" style="
    border: 0;
"> 
```

样式=“边框：0；” 在固定它

* * *

```
outline: 0; 
```

可能会成功。但我的猜测是在边界上。

# oracle - 在 oracle 触发器中使用 SELECT 检查条件

> ID：14701789
> 
> 赞同：0
> 
> 时间：2013-02-05T06:56:06.913
> 
> 标签：oracle, plsql, triggers

我的触发器有什么问题？我使用 toad for oracle
执行此 sql toad 后显示此消息，不再显示！：

```
Warning: compiled but with compilation errors 
```

并且触发器不起作用

我的触发器在这里：

```
CREATE OR REPLACE TRIGGER trg_delete_mmtp_user_feature
   BEFORE DELETE
   ON mmtp_user
   FOR EACH ROW
BEGIN
-- for these cases delete not allowed
   IF ((SELECT COUNT (*)
          FROM payment p INNER JOIN mmtp_user mt
               ON mt.customer_id = p.requester_id
         WHERE p.rp_reason_id = 20 AND mt.mmtp_user_id = :OLD.mmtp_user_id) >
                                                                             0
      )
   THEN
      raise_application_error
             (-20654,
              'Query has attempted to delete MMTP_USER with existing payment'
             );

   ELSE                            --befor deleting features should be deleted
      DELETE FROM mmtp_user_feature
            WHERE mmtp_user_id = :OLD.mmtp_user_id;
   END IF;
END;
/ 
```

并删除我收到此消息：

```
ORA-04098: trigger 'DEVX2.TRG_DELETE_MMTP_USER_FEATURE' is invalid and failed re-validation 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T07:22:58.857

*出现编译*错误的原因是我们不能在 IF 子句中使用 SELECT 语句。所以你需要像这样打破它：

```
....
DECLARE
    n pls_integer;
BEGIN
    SELECT COUNT (*)
    into n
    FROM payment p INNER JOIN mmtp_user mt
               ON mt.customer_id = p.requester_id
    WHERE p.rp_reason_id = 20 AND mt.mmtp_user_id = :OLD.mmtp_user_id
-- for these cases delete not allowed
   IF n > 0
   THEN
.... 
```

解决了这个问题后，您会发现，正如 Florin 指出的那样，您将收到运行时变异表错误。当我们将查询放入访问拥有该触发器的表的触发器中时，Oracle 会抛出此错误。发生这种情况是因为表处于不稳定状态并且查询的结果是不可预测的。

变异表错误几乎总是表明数据模型不好，罪魁祸首是标准化不足。这意味着修复它们需要了解业务规则。在这种情况下，明显的解决方案是：

```
SELECT COUNT (*)
into n
FROM payment p 
WHERE p.requester_id = :OLD.customer_id
AND p.rp_reason_id = 20 
```

如果 和 之间存在一对一的关系，这将`user_id`起作用`customer_id`。如果没有这样的关系，您将不得不使用您对业务规则的了解来找出解决方案。

顺便说一句，使用 COUNT(*) 来测试是否存在并不是一个可扩展的解决方案。对于有很多付款的客户来说，这将需要很长时间。当您所需要的只是他们*至少有*一个这样的记录时，这会浪费很多精力。添加`and rownum = 1`到查询中将减少不必要的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:06:27.653

问题是

```
 SELECT COUNT (*)
              FROM payment p INNER JOIN mmtp_user mt
                   ON mt.customer_id = p.requester_id
             WHERE p.rp_reason_id = 20 AND mt.mmtp_user_id = :OLD.mmtp_user_id 
```

您正在读取正在更新/删除的表，因此您会收到 mutating table 错误。

也许如果你只是验证

```
SELECT COUNT (*)
          FROM payment p 
          WHERE :OLD:customer_id = p.requester_id
            and p.rp_reason_id = 20 
```

大于零，够吗？

# ruby-on-rails - 使用 ruby -prof 使用 ruby 1.8.7 和 1.9.2 分析 rails 应用程序

> ID：14701790
> 
> 赞同：1
> 
> 时间：2013-02-05T06:56:08.527
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在尝试分析运行 ruby​​ 1.8.7 和 1.9.2 的 rails 应用程序。我已按照[此处](https://github.com/rdp/ruby-prof)指定的说明进行操作， 但出现了一些奇怪的错误，上面写着“未定义的方法 reverse_merge！”。我不明白为什么它会显示这些错误。如果我在开发模式或生产模式下运行我的应用程序，它工作正常，如果我尝试在配置文件模式下运行相同，我会收到此错误。

```
`call': undefined method `reverse_merge!' for #<Proc:0x7fab9b26e500> (NoMethodError)
    from /home/jeevan/.rvm/gems/ruby-1.8.7-p371/gems/railties-3.0.7/lib/rails/application.rb:77:in `send'
    from /home/jeevan/.rvm/gems/ruby-1.8.7-p371/gems/railties-3.0.7/lib/rails/application.rb:77:in `method_missing'
    from /home/jeevan/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.2.2/lib/rack/builder.rb:73:in `to_app'
    from /home/jeevan/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `inject'
    from /home/jeevan/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.2.2/lib/rack/builder.rb:73:in `each'
    from /home/jeevan/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.2.2/lib/rack/builder.rb:73:in `inject'
    from /home/jeevan/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.2.2/lib/rack/builder.rb:73:in `to_app' 
```

# iphone - 如何使用imageview在iphone中显示相册照片

> ID：14701794
> 
> 赞同：0
> 
> 时间：2013-02-05T06:56:16.633
> 
> 标签：iphone, ios, objective-c

我已经使用 Imagepickerview 控制器来挑选照片并使用 imageview 在 uiview 中显示它，但我的问题是使用 imageview 只有一个图像能够显示而不是两个。如果我选择第二个，它会继续替换现有的。请给一些建议如何显示两张照片。

```
here is my source code.

-(void) ViewDidLoad
{
      attachPhotoBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    attachPhotoBtn.frame = CGRectMake(400, 125, 44, 44);
    UIImage *attachImg = [UIImage imageNamed:@"album_add_off.png"];
    [attachPhotoBtn setImage:attachImg forState:UIControlStateNormal];
    [attachPhotoBtn addTarget:self action:@selector(attachPhoto:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:attachPhotoBtn];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        imageView = [[UIImageView alloc] initWithFrame:CGRectMake(50, 125, 64, 52)];
//        imageView.backgroundColor = [UIColor greenColor];
        [self.view addSubview:imageView];
    }

}

- (IBAction)attachPhoto:(id)sender {

    [sender setImage:[UIImage imageNamed:@"album_add.png"] forState:UIControlStateNormal];

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *imagePicker =[[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *) kUTTypeImage,(NSString *)kUTTypeVideo,nil];
        imagePicker.allowsEditing = NO;

        // On iPad use pop-overs.
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        {
            _popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
            [_popover presentPopoverFromRect:attachPhotoBtn.frame
                                          inView:self.view
                        permittedArrowDirections:UIPopoverArrowDirectionUp
                                        animated:YES];
            }
        }
        else
        {
            // On iPhone use full screen presentation.

            // [[self presentingViewController] presentViewController:imagePicker animated:YES completion:nil];
        }

        newMedia = NO;
    }

#pragma mark Image picker controller delegate methods

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

//    [self dismissModalViewControllerAnimated:YES];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {

        UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
        imageView.image = image;

    [picker dismissViewControllerAnimated:NO completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:01:58.207

您正在使用单个 UIImageView 组件来显示图像，每次选择图像时，它将被最新的图像覆盖。

有多种方法可以显示多个图像。

1.  **当您在(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info**函数中获取图像时，您可以动态创建 UIImageView 组件。

2.  您可以使用 NSMutableArray 来放置所有图像并可以在 UITableView 中显示。

3.  或者，您可以在 ScrollView 中添加图像视图。

但最终你将需要多个 UIImageView 组件来显示多个图像而不是一个。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:09:32.600

您可以使用资产库从照片库中获取所有图像，

**1.添加AssetsLibrary.framework**

**2\. #import "AssetsLibrary/AssetsLibrary.h"**

**3\. 获取数组中的所有结果**

这是代码

```
void (^myAssetEnumerator)( ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if(result != NULL)
        {
            NSLog(@"See Asset: %@", result);

            if ([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto])
            {
                [assetsArray addObject:result];
            }
        }
    };

    //This block of code used to enumerate ALAssetsGroup.
    void (^myAssetGroupEnumerator)( ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop) {
        if(group != nil) {
            [group enumerateAssetsUsingBlock:myAssetEnumerator];

            [self createScrollView];//Or you can use your `assetsArray` data, in UITableView,UICollectionView 

        }
        //[activity stopAnimating];
        // [activity setHidden:YES];
    };

    library = [[ALAssetsLibrary alloc] init];

    [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
                           usingBlock:myAssetGroupEnumerator
                         failureBlock: ^(NSError *error) {
                             NSLog(@"Failure");
                         }
     ]; 
```

**4\. 获取缩略图**

```
ALAsset *asset=[assetsArray objectAtIndex:i]; 
UIImage*image = [UIImage imageWithCGImage:[asset thumbnail]]; 
```

# c# - C# Excel 图表创建

> ID：14701797
> 
> 赞同：-3
> 
> 时间：2013-02-05T06:56:20.240
> 
> 标签：c#, excel, c#-4.0, charts

您好我正在编写 C# 代码以在 Excel 表中生成图表，从 SQL 服务器获取数据。编写以下代码来声明图表。它为索引提供了例外。帮我解决这个问题。

```
Worksheet sheet1 = workbook.Worksheets[0];

Worksheet sheet2 = workbook.Worksheets[1];

Chart chart = sheet2.Charts[0]; 
```

例外是在图表声明中。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:59:54.167

可能会发生异常，因为 sheet2 的 Charts 集合为空。在调用 Charts[0] 之前检查 sheet2.Charts 的计数是否大于零：

```
if (sheet2.Charts.Count > 0)
{
    Chart chart = sheet2.Charts[0];
} 
```

# python - 查找您尚未投票的某些类别中的帖子（django-voting，django-categories）

> ID：14701802
> 
> 赞同：0
> 
> 时间：2013-02-05T06:56:40.037
> 
> 标签：python, django, django-voting

`django-categories`我有一个应用程序，使用该应用程序，使用硬链接（ForeignKey to ）将帖子分成不同的类别`categories.Category`。

我还使用该`django-voting`应用程序来允许用户对某些帖子进行投票或投票。

现在我有一个视图，我需要`Categories`用户未投票且不是他自己的帖子的（用户类别白名单）列表中的最新帖子。从数据库查询负载的角度来看，我如何以最有效的方式获取这些帖子。

这是我的帖子模型：

```
class Post(models.Model):
    published = models.DateTimeField(default=datetime.now)
    author = models.ForeignKey(User, blank=True, null=True,
                               verbose_name='author', 
                               related_name='author_post')
    caption = models.CharField(max_length="240")
    image = models.ImageField(upload_to='user_images')
    up_votes = models.PositiveIntegerField(default=0)
    down_votes = models.PositiveIntegerField(default=0)
    category = models.ForeignKey('categories.Category') 
```

我是否应该使用 RAW DB 查询以反向时间顺序获取当前登录用户未投票且不是他自己的帖子的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:24:44.773

取决于你的数据库。如果是`PosgtreSQL`，那么您可以使用子查询。

```
voted_already = (Vote.objects.filter(user=…, 
                                     content_type=…)
                             .values_list('object_id', flat=True))
not_voted = (Post.objects.filter(category__in=…)
                         .exclude(author=…, 
                                  pk__in=voted_already)
                         .order_by('-published')) 
```

# java - 如何通过cmd将输入作为文件提供给jar应用程序？

> ID：14701805
> 
> 赞同：0
> 
> 时间：2013-02-05T06:56:47.490
> 
> 标签：java, jar, cmd

我有一个 jar 文件，它在 windows 中提供了一个 GUI，它使用文本作为输入，在其文本框中手动输入。并对文本数据进行一些计算。我想手动重复这个过程 500 次，这很麻烦。有什么办法可以自动完成。通过命令提示符？（我用的是Win7）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:02:42.680

1）如果 jar 是您自己的应用程序或者您有源代码，那么您需要修改代码以存储来自的参数

```
public static void main (String[] args) 
```

然后将其设置为文本框`JTextField.setText(args[0]);`

2）如果它不是您的应用程序并且您只有 jar，那么首先检查文档是否提供了这种可能性。如果不是，但 jar 本身很简单，那么您可以使用[Java Decompiler](http://java.decompiler.free.fr/)对其进行反编译，然后使用自己的修改再次重建。

# mysql - 我想解决我的 Sql 查询

> ID：14701812
> 
> 赞同：-1
> 
> 时间：2013-02-05T06:57:01.360
> 
> 标签：mysql, sql, join

```
SELECT 
    a.studentcode, 
    a.studentname, 
    a.fathername, 
    a.date, 
    c.centrename, 
    cm.feename, 
    l.location, 
    a.periodofissue, 
    a.image 
FROM admission a 
INNER JOIN centre c ON a.centreid = c.id 
INNER JOIN coursemaster cm ON a.courseid = cm.id 
INNER JOIN location l ON a.locationid = l.id where a.id in (".$pc.") 
```

并在执行查询后发生错误，即：

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以`)`在第 1 行的 ' '附近使用正确的语法`SELECT a.studentcode, a.studentname, a.fathername, a.date, c.centrename, cm.feename, l.location, a.periodofissue, a.image FROM admission a INNER JOIN centre c ON a.centreid = c.id INNER JOIN coursemaster cm ON a.courseid = cm.id INNER JOIN location l ON a.locationid = l.id where a.id in ()`”

请给我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:01:04.790

也许尝试类似：

```
SELECT a.`studentcode` , a.`studentname` , a.fathername, a.date, 
       c.`centrename` , cm.`feename` , l.`location`, 
       a.periodofissue, a.image 
FROM admission a 
INNER JOIN centre c ON a.centreid = c.id 
INNER JOIN coursemaster cm ON a.courseid = cm.id 
INNER JOIN location l ON a.locationid = l.id 
where a.id in (select id from admission where id = ".$pc.") 
```

或者：

```
SELECT a.`studentcode` , a.`studentname` , a.fathername, a.date, 
       c.`centrename` , cm.`feename` , l.`location`, 
       a.periodofissue, a.image 
FROM admission a 
INNER JOIN centre c ON a.centreid = c.id 
INNER JOIN coursemaster cm ON a.courseid = cm.id 
INNER JOIN location l ON a.locationid = l.id 
where a.id = ".$pc." 
```

# ember.js - Handlebars Helper 根据条件逻辑将视图插入模板

> ID：14701815
> 
> 赞同：1
> 
> 时间：2013-02-05T06:57:08.503
> 
> 标签：ember.js, handlebars.js

我有一个迭代实体数组的模板。

我想根据一些逻辑为其中一些实体显示一个“删除”按钮，我只是想了解执行此操作的最佳方法。

实际的删除按钮将使用以下标记呈现，请注意该标记包括对内置*操作*帮助程序的调用。：

```
<button class="btn btn-danger" {{action "removeEntityFunctionInController" entitity}}><i class="icon-remove icon-white"></i> Remove</button> 
```

我想用

```
{{optionalRemoveEntityButton entity}} 
```

我正在尝试创建一个无逻辑的模板，所以我想也许我可以创建一个助手，例如：

```
Ember.Handlebars.registerHelper('optionalRemoveEntityButton', function(entity, options) {
  logicForDeterminingWhetherToShowView 
  removeEntityButtonView = howDoILoadAViewProgrammatically?
  return removeEntityButtonView;
}); 
```

我不明白如何以编程方式加载视图。我想使用一个视图，因为这个助手不仅仅是返回一些简单的标记。它还包括对*{{action}}*助手的调用。

除非有更好的方法来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:17:29.077

> 我有一个迭代实体数组的模板。我想根据一些逻辑为其中一些实体显示一个“删除”按钮，我只是想了解执行此操作的最佳方法。

这是一个非常常见的用例。这种逻辑的想法是在控制器中。

> 实际的删除按钮将使用以下标记呈现，请注意该标记包括对内置操作帮助程序的调用。：`<button class="btn btn-danger" {{action "removeEntityFunctionInController" entitity}}><i class="icon-remove icon-white"></i> Remove</button>`
> 
> 我想用`{{optionalRemoveEntityButton entity}}`

我建议您保留原始标记。

> 除非有更好的方法来实现我想要做的事情？

将逻辑排除在模板之外是一个很好的目标，但通常这并不意味着构建大量的车把助手。通常，当您发现一些在许多视图中重复的显示逻辑时，您只会构建一个助手。

另一种方法是使用`{{#if}}`助手有条件地显示按钮

```
{{#if showDeleteButton}}
  <button class="btn btn-danger" {{action "removeEntityFunctionInController" entitity}}><i class="icon-remove icon-white"></i> Remove</button>
{{/if}} 
```

您需要将 ArrayController 的 itemController 属性设置为将包装每个单独项目的控制器（可能是 ObjectController）的名称。然后`showDeleteButton`在该 itemController 上定义方法。有关设置的详细信息，请参阅[Ember.ArrayController](http://emberjs.com/api/classes/Ember.ArrayController.html)文档。

# css - 使 Web 表单字段对齐

> ID：14701826
> 
> 赞同：0
> 
> 时间：2013-02-05T06:58:14.613
> 
> 标签：css, css-float, stylesheet

我的 Web 表单字段没有正确排列有问题。

看截图：[http ://awesomescreenshot.com/00cw0c80e](http://awesomescreenshot.com/00cw0c80e)

标签比正常长，但我需要它那么长。如果我缩短标签，它会按预期排列。

任何人都可以帮忙吗？

谢谢！:)

附言。我看过网上的各种样本，但没有成功。

**我的 CSS**

```
input.issu {
    margin-bottom: 8px;
    width: 220px;
}

label.issu {
    display: block;
    float: left;
    margin-bottom: 8px;
    padding-left: 10px;
    padding-right: 10px;
    width: 270px;
    text-align: left;
    vertical-align: top;
}

select.issu {
    margin-bottom: 8px;
    width: 240px;
}

br.issu {
    float: clear;
} 
```

**我的 html 代码（我尝试过使用和不使用 div 标签）**

```
 <div>
        <label for="departingFrom" class="issu">Direct flight into Singapore from (please name city)<span class="red">* required</span></label>
        <input id="departingFrom" name="departingFrom" class="issu" value="" type="text">
        <br class="issu">
        </div>

        <div>
        <label for="additionalInfo" class="issu">Additional info(e.g. accompanying family members)<span class="red">* required</span></label>
        <input id="additionalInfo" name="additionalInfo" class="issu" value="" type="text">
        <br class="issu">
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:03:14.493

将**溢出：隐藏**属性添加到标签的容器 div 并输入如下。它会正常工作。

CSS：

```
div{
    overflow:hidden
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:29:33.237

使用表格，将标签放在一列中，在另一列中输入字段。然后`vertical-align`根据需要设置单元格（在这种情况下，对于“排队”的含义有不同的解释）。

# jquery - 自定义 sorttype 函数在 jqGrid 中无法正常工作

> ID：14701828
> 
> 赞同：1
> 
> 时间：2013-02-05T06:58:15.687
> 
> 标签：jquery, sorting, jqgrid

我的 jqGrid 包含一个特殊列，其值由另一个值生成，例如 Duration Span 列，其实际值以秒为单位，如 3690 秒，我应该将其转换为格式化字符串“小时：分钟：秒”，因此它是“1:1:30”。现在，我希望它在排序中运行良好，所以我编写了一个自定义函数来处理这个问题：

1，下面的代码片段是列定义：

```
{
    name : 'time',
    index : 'time',
    align: 'center',
    width :  '12%',
    sorttype : sortTimeFuc
} 
```

2、以下代码片段为排序功能：

```
var sortTimeFuc = (function(cell) {
    var a = cell.split(':');
    var value = parseInt(a[2]) + parseInt(a[1]) * 60 + parseInt(a[0]) * 3600;
    return value;
}); 
```

但它工作不正确，如下所示：

![在此处输入图像描述](../Images/8849afa5400a3ba48d52d0e0f266c9f8.png)

有人可以帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:22:01.403

在我看来，你犯了一些错误。首先，您应该删除函数上的括号。不需要的括号可以跟随函数的调用。我在您的代码中看到的第二个也是最重要的错误是使用[parseInt](http://www.w3schools.com/jsref/jsref_parseint.asp)而没有第二个参数 10。最后一个错误是使用`width : '12%'`. jqGrid 不支持宽度内的“%”。取而代之的是，您可以使用 just`width: 12`并指定`width`总网格或使用`autowidth: true`. 因为该选项`shrinkToFit: true`是默认选项 if 将根据 jqGrid 的总宽度和`width`列的属性来缩放列的宽度，这将定义列之间的比例。

所以生成的代码可能如下

```
{
    name: 'time',
    align: 'center',
    width: 12,
    sorttype: function (cell) {
        var a = cell.split(':');
        return parseInt(a[2], 10) + parseInt(a[1], 10) * 60 +
            parseInt(a[0], 10) * 3600;
    }
} 
```

[将答案](https://stackoverflow.com/a/5296935/315935)视为自定义排序非常接近实现的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:21:43.280

因为合并的时间字符串满足字符串的排序条件，所以只需将该列的排序类型设置为'text'即可。问题解决了。

# android - 如何判断我使用的是哪个 Android 支持库 v4 版本？

> ID：14701830
> 
> 赞同：12
> 
> 时间：2013-02-05T06:58:24.953
> 
> 标签：android, android-support-library, android-version

我可以在 Android SDK 管理器中看到我计算机上安装的版本（在 Android SDK 管理器中），但通常项目使用它自己的 libs 文件夹中的副本。

除了文件日期之外，有没有办法告诉我在特定项目中使用的 android-support-v4.jar 是哪个版本？

任何方法都相当可观——通过代码/eclipse/文件管理器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:38:13.547

1.  在 Eclipse 包资源管理器中右键单击您的项目
2.  选择 android 工具 -> 添加支持的库

    在那里你看到你有哪个支持库修订ID，在我的例子中是11 ![在此处输入图像描述](../Images/d605c1d216c5a634bee784488b59bf44.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:32:07.493

*   在应用程序的*libs*目录中获取 jar的[md5哈希值。](http://en.wikipedia.org/wiki/MD5)
**   将其与支持库 jar 文件的哈希值进行比较，以准确确定您使用的是哪一个。*

 *例如，要生成可以使用的哈希值：http: [//nule.org/wp/](http://nule.org/wp/?page_id=86) ?page_id=86 从批处理文件运行它：

```
java -jar JMd5Sum.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:40:18.647

当您选择 android Tools -> Add support Library 选项时。它已自动添加兼容的 v4 库 .android os 告诉您哪个与您的项目兼容。如果您想添加任何 jar 的特定版本。首先您已下载并手动放入 libs 文件夹，然后将其添加为外部 jar。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-28T19:32:52.053

构建支持库 v4 jar 文件的 SHA1 哈希，并将结果与​​此处列出的哈希进行比较：[http ://www.smartphoner.org/2014/11/23/android-support-library-v4-revisionen-und-hashes /](http://www.smartphoner.org/2014/11/23/android-support-library-v4-revisionen-und-hashes/)

现在，实际的支持库版本等于最新 android 版本的 api 级别。目前这是 21（棒棒糖）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-09T05:50:33.000

Android SDK 可以显示Android support Repository 的版本，并确保您使用Android SDK Manager 下载Android Support Repository。

[![安卓 SDK](../Images/2305503e1727295e837ef8571332ea2d.png)](https://i.stack.imgur.com/Zdj0W.png)

如果你真的想添加一个旧的支持库，你可以在 Android studio 下查看版本。右键单击您的项目，选择 "Open Module Settings" -> 然后选择您的应用程序模块 -> "Dependencies" 。您可以检查您的支持库版本。

[![依赖项](../Images/63b60d3b0db8fa37946617224a392ba8.png)](https://i.stack.imgur.com/B95W1.png)*

# php - 在 PHP 中搜索数组

> ID：14701831
> 
> 赞同：2
> 
> 时间：2013-02-05T06:58:39.800
> 
> 标签：php, forms, search, multidimensional-array, search-engine

我正在开发一个常见问题解答（常见问题）PHP 脚本，我想为用户实现一种搜索常见问题解答的方法。这是一个小脚本，所以我在一个数组中有类别和常见问题解答，如下所示：

```
$qa = array();
$qa['Getting Started'] = array(array('What is 1+1?', '2'), array('What is the square root of 16?', 'The square root is 4'));
$qa['Installation'] = array(array('What is 2+2?', '4'), array('What is the square root of 64?', 'The square root is 8')); 
```

现在，我想做的是从表单中获取搜索查询（使用 GET 请求）并在这个数组中搜索该搜索查询。我想知道我该怎么做呢？我是否必须先解析搜索查询才能搜索数组？我可以为此使用该`array_search()`函数还是必须编写自己的代码来遍历数组？我还想知道使用不同的方法（XML、SQL 等）存储常见问题是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:16:25.920

我会使用数据库来解决以下问题：

```
id int not null auto increment primary_key,
question text not null,
answer text not null 
```

然后我会做一个 where like 查询：

```
...
WHERE question LIKE '%questionsearchvalue%'
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:19:17.487

请看看这个线程，特别是阅读所有用户的评论。你可能会得到你需要的东西。

[http://greengaloshes.cc/2007/04/recursive-multidimensional-array-search-in-php/](http://greengaloshes.cc/2007/04/recursive-multidimensional-array-search-in-php/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T07:08:48.830

您可以使用另一种方法来解决它。回显所有常见问题，然后使用 jquery highlight 插件在 html 中搜索。

[链接在这里](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

# android - 如何禁用我的注册页面在按下后退按钮时重新显示

> ID：14701840
> 
> 赞同：0
> 
> 时间：2013-02-05T06:59:13.000
> 
> 标签：android, android-intent, android-manifest

在我的应用程序中，我有一个注册页面，我希望用户填写她的凭据并单击图片。完成并注册用户后，我想阻止在按下后退按钮时访问此特定页面。我以前用过

```
 android:noHistory="true" 
```

但是，当我在上述活动的清单声明中使用上述代码行启动相机意图时，我会丢失从相机意图发送的数据。如果有任何其他方法可以在按下后退按钮时跳过页面，我想要一些建议。覆盖后退按钮是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:02:24.893

像这样声明 Intent 实例：

```
Intent showActivity = new Intent(CURRENT_ACTIVITY.this, TARGET_ACTIVITY.class);
showActivity.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(showActivity);
finish(); 
```

`android:noHistory="true"`Manifest 中的属性`Activity`从`Activity Stack`

**编辑：**

只有在完成 Camera Intent 代码**后，**您才应该使用上面的代码。也就是说，**在***注册过程*完成之后，您现在想要使用实际应用程序的主活动。此代码自然会因相机意图而失败。;-)

# c++ - 如何交叉编译成ARM9板子？

> ID：14701846
> 
> 赞同：0
> 
> 时间：2013-02-05T06:59:34.683
> 
> 标签：c++, ubuntu, poco-libraries

> **可能重复：**
> [构建 ARM GNU 交叉编译器](https://stackoverflow.com/questions/1245295/building-arm-gnu-cross-compiler)

我正在使用 POCO c++ 库在 ubuntu 环境中实现我的项目。我想从我的 POCO c++ 代码交叉编译到基于 ARM9 的板上。

如何为 ARM9 交叉编译它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:37:05.487

为您的目标获取交叉编译器。然后在 $POCO_BASE/build/config（ARM-Linux、DigiEL、Angstrom、ELDK 等）中获取交叉构建配置之一，复制它并为您的工具链进行必要的更改。您可能需要更改 CC 和 CXX 变量以匹配工具链的可执行名称以及 POCO_TARGET_OSARCH。将环境变量 POCO_CONFIG 设置为您的构建配置的名称并为 Foundation、XML 等运行 make，或者运行

```
./configure --config=<YourConfig> --no-samples --no-tests
./make -s 
```

为您的目标构建 POCO。

此外，构建系统文档位于[http://pocoproject.org/docs/99150-GMakeBuildNotes.html](http://pocoproject.org/docs/99150-GMakeBuildNotes.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-05T07:00:45.117

1.  为您的目标构建一个交叉编译器。
2.  使用交叉编译器为该目标构建。

# windows - Dotfuscator 无效的序列号

> ID：14701847
> 
> 赞同：0
> 
> 时间：2013-02-05T06:59:49.320
> 
> 标签：windows, dotfuscator, preemptive

我为 Dotfuscator Professional Edition 3.0 运行了设置文件。运行安装程序后，它需要用户输入才能完成注册。然后在完成注册后，它会要求用户输入序列号。我错误地输入了错误的序列号。如果我现在打开它，它会给我以下错误。

```
Invalid Dotfuscator Serial Number. Please contact your vendor 
```

单击确定后，它将关闭应用程序。我尝试重新安装软件（希望它会再次要求我输入序列号）但选择已经输入了错误的序列号。我也尝试过删除旧的注册表值。我现在不想格式化我的机器来完成它的删除，这个软件是必须的。如果我再次安装 Windows，它会用所有的软件耗尽我一整天的时间。任何人都可以提出一些建议。我希望它完全安装，然后使用正确的序列号安装和激活它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:29:27.167

您应该能够通过删除位于“C:\ProgramData\PreEmptive Solutions\Dotfuscator Professional Edition\3.0”（或您的操作系统的等效文件）中的“Dotfuscator.dat”文件来纠正此问题。

# linux - 如何更改 sed 的记录分隔符

> ID：14701850
> 
> 赞同：2
> 
> 时间：2013-02-05T06:59:58.393
> 
> 标签：linux, sed

我知道我可以`RS =something`在 awk 中更改。

有什么办法可以将`\n`RS 更改为 sed 中的 muliline 模式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:51:24.193

简短的回答：不，你不能。Sed 读取文本行，而不是带有字段的记录。

根据文本的性质，您可以`tr`先将所有`\n`s 更改为未使用的字符，并将所需的（单字符）记录分隔符更改为`\n`. 在 中进行您想要的更改`sed`，然后使用`tr`更改分隔符。

您还可以操纵保留空间，让您处理多行文本。例如，Dougherty 和 Robbins在*sed & awk中对此进行了描述。*

不过，使用它可能更容易`awk`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-08T17:41:33.753

GNU sed 具有用于空分隔记录的选项[`-z`// `--null-data`，`--zero-terminated`](https://www.gnu.org/software/sed/manual/sed.html#index-_002dz)但这几乎是它所能得到的。

例子：

```
sed -z 's/\n\n+/\n\n/g' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T07:45:48.557

是否要使用 sed 替换所有换行符？
然后这样做。如果不解释你想要什么

```
 sed -e :a -e N -e 's/\n/|/g' -e '$!ba' file 
```

# perl - HTML::FormHandler 动态设置默认表单值

> ID：14701853
> 
> 赞同：0
> 
> 时间：2013-02-05T07:00:21.660
> 
> 标签：perl, forms, default-value

我正在使用[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)并且我希望能够为表单动态设置默认值。这将是我希望能够做的一个很好的例子：

```
#this doesn't work
my $form = myapp::Form::Example->new(field1=>'default1',field2=>$default2); 
```

在上面的示例中，`field1`' 的值将保存“default1”，而`field2`' 的值将保存标量所`$default2`保存的任何内容。然而，上面的例子并没有这样做。有谁知道这样做的方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:42:29.833

有很多方法可以设置默认值。您可以使用 init_object：

```
my $form = MyApp::Form::Example->new;
$form->process( init_object => { field1 => 'default1', field2 => 'default2' }, ... ); 
```

您还可以使用“默认”快捷方式动态更新字段：

```
$form->process( defaults => { field1 => 'default1', field2 => 'default2' }, ... ); 
```

'init_object' 代替数据库行（项目），所以如果你还传递了一个 'item'，你可能还必须设置 'use_init_obj_over_item' 标志。它使用对象/表单“值”格式，其中包括嵌套的 hashrefs 和 arrayrefs。'defaults' hashref 需要一个扁平的 hashref，比如你从 'fif' （填写表格）方法中获得的。

见[https://metacpan.org/module/HTML::FormHandler::Manual::Defaults](https://metacpan.org/module/HTML%3a%3aFormHandler%3a%3aManual%3a%3aDefaults)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:30:11.900

从文档中，Q 中的代码很好。请尝试使用以下方法调试问题。这将允许您窥视对象的“内部”并查看发生了什么。

我的猜测：默认值被实际数据覆盖或变量为空。

```
use Data::Dumper;
print Dumper($default2);
my $form = myapp::Form::Example->new(field1=>'default1',field2=>$default2);
print Dumper($form); 
```

# winrt-xaml - 在 XAML 页面之间传递参数

> ID：14701855
> 
> 赞同：0
> 
> 时间：2013-02-05T07:00:36.690
> 
> 标签：winrt-xaml, windows-store-apps, c++-cx

我有以下要求，我有 4 页。前 3 页提示用户输入一些信息，最后在第四页进行一些处理并显示结果。

我想出了这种方法。我创建了一个类，所有字段用户在各个页面中输入

```
ref class CameraWiFiInfo sealed
{

   public:
   property String^ sCameraName;
   property String^ sWiFIName;
   property String^ sWifiPassword;
   CameraWiFiInfo()
   {
    sCameraName = ref new String;
    sWiFIName = ref new String;
    sWifiPassword = ref new String;
   }
}; 
```

我正在尝试按如下方式传递此对象

```
 PAGE #1
    CameraWiFiInfo^ cameraInfo = ref new CameraWiFiInfo();
    cameraInfo->sCameraName = txtCameraName->Text;
    this->Frame->Navigate(TypeName(WifiCheck::typeid),cameraInfo);

  PAGE#2
  void Page2::OnNavigatedTo(NavigationEventArgs^ e)
  {
       (void) e;    // Unused parameter
       CameraWiFiInfo^ cameraInfo= e->Parameter ;

  } 
```

我在这里收到错误错误 C2440：“正在初始化”：无法从“Platform::Object ^”转换为“CameraWiFiInfo ^”。

我在网上看了看，我没有得到任何合适的 C++/Win Rt XAML 示例来将数据从一个 XAML 页面传递到另一个页面。如果有人尝试在 C++/Win Rt 中传递数据，请就此提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:36:22.150

你需要一个明确的演员：

```
CameraWiFiInfo^ cameraInfo= (CameraWiFiInfo^)e->Parameter; 
```

但是根据[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh702394)，这样做时要小心：

> 要使用 启用框架状态的序列化`GetNavigationState`，您必须仅将基本类型传递给此方法，例如字符串、字符、数字和 GUID 类型。[...] 通常，我们不鼓励将非基本类型作为参数传递给 to，`Navigate`因为它在应用程序挂起时无法序列化，并且会消耗更多内存 [...]

# ember.js - Ember.js 向导控件

> ID：14701856
> 
> 赞同：3
> 
> 时间：2013-02-05T07:00:38.647
> 
> 标签：ember.js

我有一个带有多个步骤的 ember.js 向导控件。

ember 模型对象在向导的每个阶段都设置了各种属性。

我可以看到更改视图的唯一方法是使用 linkTo 帮助器，如下所示：

```
{{#linkTo steps.two model}}Step 2{{/linkTo}} 
```

但这对我没有好处，因为我需要链接到的每个步骤都是动态路线：

```
@resource "steps", ->
  @route "one", {path: 'one/:model_id'}
  @route "one", {path: 'two/:model_id'}
  #etc. 
```

动态路径不好，因为模型要到向导结束才会保存。如果我尝试使用 transitionTo 来传递模型，那么 url 显然会搞砸，因为它正在模型上调用 tostring。

我更喜欢使用渲染助手之类的东西，它在渲染内容时保留上下文，但我认为不可能以这种方式替换整个视图。

任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T14:38:28.260

您不必在路径中使用 model_id。您只需要覆盖路由中的模型属性。一个基本的应该是：

```
@resource "steps", ->
  @route "one", {path: 'one'}
  @route "two", {path: 'two'}

Redbot.StepsRoute = Ember.Route.extend({
  model: function() {
    return App.User.createRecord({});
  }
});

Redbot.StepsOneRoute = Ember.Route.extend({
  model: function() {
    return this.modelFor('steps');
  }
});

Redbot.StepsTwoRoute = Ember.Route.extend({
  model: function() {
    return this.modelFor('steps');
  }
}); 
```

每个子路由只使用父路由中定义的模型。

ember 默认所做的只是使用 model_id 参数设置模型，因此覆盖模型使您可以控制该功能。

# c++ - netbeans 中的 Visual Studio 键盘映射（C++）

> ID：14701860
> 
> 赞同：2
> 
> 时间：2013-02-05T07:00:48.670
> 
> 标签：c++, visual-studio-2010, netbeans

是否有复制 Visual Studio 键映射的 Netbeans 键映射配置文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:59:07.913

由于无法根据您的操作（例如在 VS 中）映射键，因此无法获得 VS 键映射的*精确*副本。无论如何，您可以自己制作：

**`Tools -> Options -> Keymap -> Manage Profiles`**在那里复制当前的*（作为备份）*

现在您可以将密钥更改为 VS2010。

# jquery - -moz-transition 在 chrome 中工作，但在 firefox safari 中没有，请帮助我

> ID：14701861
> 
> 赞同：0
> 
> 时间：2013-02-05T07:00:54.353
> 
> 标签：jquery, html, google-chrome, firefox, css

我的代码如下：

```
.Frozenbg
{
    background-image:url('Images/Frozen.png');
    background-repeat:no-repeat;
    transition: background 1s linear;
    -moz-transition: background 1s linear; /* Firefox*/
    -webkit-transition: background 1s linear; /* Safari and Chrome */
    -o-transition: background 1s linear; /* Opera */
} 
```

问题是我在悬停时添加了类，它的工作很好，这意味着它添加了具有背景图像的类，淡入效果看起来不错，但是淡入/过渡效果在 firefox 和其他浏览器上没有发生，请帮助我从昨晚开始我就陷入了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:43:57.210

背景图像的转换还不是规范的一部分。有一个建议为他们做交叉淡入淡出，但它仍然是一个相当早期的草案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:24:56.387

> 原来在 Firefox 中有一个错误（firefox hover opacity）。

[CSS3 过渡/悬停效果在 Firefox 中不起作用；Firefox 错误？](https://stackoverflow.com/questions/6309691/css3-transition-hover-effect-not-working-in-firefox-a-firefox-bug)

# php - 检查子节点是否在xml中退出

> ID：14701862
> 
> 赞同：0
> 
> 时间：2013-02-05T07:00:56.367
> 
> 标签：php, xml, cakephp, dom

我在这里停留了一段时间。我使用 getElementsByTagName 在 xml 中获取节点值。但是当节点有子节点时我面临一个问题。现在，当我使用标签 getElementsByTagName 时，我什至想打印子节点及其值。

```
ex:-
   <data>
  <details>SOme details </details>
 <item> 
  <title>Top Tories urge gay marriage support</title>  
  <description>Three senior Conservative ministers urge party MPs to drop any opposition to allowing gay marriage in England and Wales, ahead of a Commons vote.</description>  
  <link>http://www.bbc.co.uk/news/uk-politics-21325702#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
  <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-politics-21325702</guid>  
  <pubDate>Tue, 05 Feb 2013 05:04:20 GMT</pubDate>  
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65702000/jpg/_65702114_65557953.jpg"/>  
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65702000/jpg/_65702115_65557953.jpg"/> 
</item>  
<item> 
  <title>'Independence day' plans revealed</title>  
  <description>The Scottish government has drawn up detailed plans for a transition to independence in March 2016 if there is a "yes" vote, the BBC can reveal.</description>  
  <link>http://www.bbc.co.uk/news/uk-scotland-scotland-politics-21331302#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
  <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-scotland-scotland-politics-21331302</guid>  
  <pubDate>Tue, 05 Feb 2013 05:31:51 GMT</pubDate>  
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700866_013673187-1.jpg"/>  
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700988_013673187-1.jpg"/> 
</item>  
<item> 
  <title>Reconstructed face of Richard III</title>  
  <description>A facial reconstruction of how Richard III may have looked is released, after archaeologists confirmed a skeleton found beneath a Leicester car park was that of the English king.</description>  
  <link>http://www.bbc.co.uk/news/uk-england-leicestershire-21328380#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
  <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-england-leicestershire-21328380</guid>  
  <pubDate>Mon, 04 Feb 2013 23:03:16 GMT</pubDate>  
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65701000/png/_65701188_richardiii.png"/>  
  <media:thumbnail width="144" height="81"   url="http://news.bbcimg.co.uk/media/images/65701000/png/_65701189_richardiii.png"/> 
</item>  
</data> 
```

我得到的输出为：-

```
somedata1somedata2somedata3somedata4. 
```

我想要输出为： -

```
 subnode1:-somedata1
 subnode2:-somedata2
 subnode3:-somedata3
 subnode4:-somedata4 
```

我的代码是：-

```
 $dom->load($url);//url of the xml file
    $link = $dom->getElementsByTagName($tag_name);//tag_name is the node name
    $value = array();

    for ($i = 0; $i < $link->length; $i++) {
        $childnode['name'] = $link->item($i)->nodeName;
        $childnode['value'] = $link->item($i)->nodeValue;
        echo "Name : " . $childnode['name'];
        echo "<br /> Value : " . $childnode['value'];
        $value[$childnode['name']] = $childnode['value'];
       }
     print_r($value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:04:47.153

```
$dom = new DOMDocument('1.0');
$dom->loadXML('<?xml version="1.0" encoding="UTF-8"?>
<node>
<subnode1>somedata1</subnode1>
<subnode2>somedata2</subnode2>
<subnode3>somedata3</subnode3>
<subnode4>somedata4</subnode4>
</node>');
$node = $dom->getElementsByTagName('node');
$subNodes = $node->item(0)->childNodes;
for ($i = 0; $i < $subNodes->length; $i++) {
    $subNode = $subNodes->item($i);
    if ($subNode->nodeType === XML_ELEMENT_NODE) { 
        printf('%s: %s<br>', $subNode->nodeName, $subNode->nodeValue);
    }
} 
```

**UPD**

```
$dom = new DOMDocument('1.0');
@$dom->loadXML('<?xml version="1.0" encoding="UTF-8"?>
<data>
  <details>SOme details </details>
 <item>
  <title>Top Tories urge gay marriage support</title>
  <description>Three senior Conservative ministers urge party MPs to drop any opposition to allowing gay marriage in England and Wales, ahead of a Commons vote.</description>
  <link>http://www.bbc.co.uk/news/uk-politics-21325702#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa></link>
  <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-politics-21325702</guid>
  <pubDate>Tue, 05 Feb 2013 05:04:20 GMT</pubDate>
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65702000/jpg/_65702114_65557953.jpg"/>
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65702000/jpg/_65702115_65557953.jpg"/>
</item>
<item>
  <title>\'Independence day\' plans revealed</title>
  <description>The Scottish government has drawn up detailed plans for a transition to independence in March 2016 if there is a "yes" vote, the BBC can reveal.</description>
  <link>http://www.bbc.co.uk/news/uk-scotland-scotland-politics-21331302#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>
  <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-scotland-scotland-politics-21331302</guid>
  <pubDate>Tue, 05 Feb 2013 05:31:51 GMT</pubDate>

  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700866_013673187-1.jpg"/>
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700988_013673187-1.jpg"/>

</item>
<item>
  <title>Reconstructed face of Richard III</title>
  <description>A facial reconstruction of how Richard III may have looked is released, after archaeologists confirmed a skeleton found beneath a Leicester car park was that of the English king.</description>
  <link>http://www.bbc.co.uk/news/uk-england-leicestershire-21328380#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>
  <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-england-leicestershire-21328380</guid>
  <pubDate>Mon, 04 Feb 2013 23:03:16 GMT</pubDate>
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65701000/png/_65701188_richardiii.png"/>
  <media:thumbnail width="144" height="81"   url="http://news.bbcimg.co.uk/media/images/65701000/png/_65701189_richardiii.png"/>
</item>
</data>');

$xpath = new DOMXPath($dom);
$details = $xpath->query('//data/details')->item(0)->nodeValue;
echo "Details: $details<br><br>";
$items = $xpath->query('//data/item');
foreach ($items as $item) {
    $subItem = $item->childNodes;
    for ($i = 0; $i < $subItem->length; $i++) {
        $current = $subItem->item($i);
        if ($current->nodeType === XML_ELEMENT_NODE) { //ELEMENT_NODE
            $name = $current->nodeName;
            $value = ($current->nodeName !== 'thumbnail') ? $current->nodeValue : $current->getAttribute('url');
            printf('%s: %s<br>', $name, $value);
        }
    }
    echo '<br>';
} 
```

**UPD #2**

```
$data = $dom->getElementsByTagName('data');
$dataChildren = $data->item(0)->childNodes;
for ($i = 0; $i < $dataChildren->length; $i++) {
    $child = $dataChildren->item($i);
    if ($child->nodeName === 'details') {
        $details = $dataChildren->item($i);
        printf('%s: %s<br><br>', $details->nodeName, $details->nodeValue);
    }
    if ($child->nodeName === 'item') {
        $itemChildren = $child->childNodes;
        for ($j = 0; $j < $itemChildren->length; $j++) {
            $item = $itemChildren->item($j);
            if ($item->nodeType === XML_ELEMENT_NODE) {
                $name = $item->nodeName;
                $value = ($item->nodeName !== 'thumbnail') ? $item->nodeValue : $item->getAttribute('url');
                printf('%s: %s<br>', $name, $value);
            }
        }
        echo '<br>';
    }
} 
```

# javascript - 指定 URL 或 URLRoot 属性 -bone.js

> ID：14701869
> 
> 赞同：1
> 
> 时间：2013-02-05T07:01:22.617
> 
> 标签：javascript, backbone.js, appcelerator

```
exports.definition = {

    config : {
        // table schema and adapter information
    },

    extendModel: function(Model) {      
        _.extend(Model.prototype, {
            // Extend, override or implement the Backbone.Model methods                     
        });
        return Model;
    },

    extendCollection: function(Collection) {        
        _.extend(Collection.prototype, {

            // Implement the comparator method.
            comparator : function(book) {
                return book.get('title');
            }

        }); // end extend

        return Collection;
    }
} 
```

我应该在哪里指定 url 属性以与我的休息服务进行通信。

[http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Models](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Models)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:31:29.940

```
exports.definition = {
    config: {
            "columns": {
                "username": "",
                "password": ""
            },
            "defaults": {
                "username": "-",
                "password": "-"
            },
            "adapter": {
                "type": "restapi",
                "collection_name": "user"
            }
        },

    extendModel: function(Model) {      
        _.extend(Model.prototype, {
            **urlRoot**:'',
            checkLogin: function(){

            } 
        });

        return Model;
    },

    extendCollection: function(Collection) {        
        _.extend(Collection.prototype, {
            // Extend, override or implement Backbone.Collection 
        });

        return Collection;
    }
} 
```

创建这些类时，Backbone.sync 方法对 Model.urlRoot 或 Collection.url 属性指定的 URL 执行 RESTful JSON 请求。您可以在`Model or Collection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:04:27.713

我不太了解 appcelerator，但在骨干网中，您在 Collection 中添加 url 配置，请[在此处查看](http://backbonejs.org/#Collection-url)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:11:50.250

好吧，我不确定如何在 Appcelerator 中执行此操作，但 Backbone 唯一的解决方案是您需要将 url 选项传递给您的模型或集合。

首先，您需要创建您的主干模型定义 url（用于集合的 urlRoot），然后在您的 Appcelerator 模型中扩展它们。

这是钛文档的解释。

> “由于 Backbone 的主要用途是用于 Web 应用程序，默认情况下，Backbone.sync 方法会在创建这些类时对 Model.urlRoot 或 Collection.url 属性指定的 URL 执行 RESTful JSON 请求。”

# ios - 长期存在的 CTCallCenter 实例显示没有调用，也从不调用事件处理程序

> ID：14701876
> 
> 赞同：2
> 
> 时间：2013-02-05T07:02:03.573
> 
> 标签：ios, objective-c, xcode

我`CTCallCenter`在启动后创建了一个实例（alloc/init）。事件处理程序永远不会被调用（既不是`NSLog`也不是`breakpoint`火灾）。如果我稍后询问有关当前调用的信息，它会返回 nil。如果我`[[[CTCallCenter alloc] init] currentCalls]`同时打电话，那么它确实会返回电话。

例如，当调用处于活动状态时（我将应用程序带回前台并随后触发了一个计时器），这里有一个`NSLog`显示长期存在的`CTCallCenter`实例、它为 currentCalls 返回的内容以及新的瞬态实例返回的内容：

```
CTCallCenter(0x1e5639c0): {
    server_connection: 0x1e5640e0   currentCalls: {(
)}  callEventHandler: 0xa0c90
}

(null) 

{(
    CTCall (0x1e5a0fb0) {
    callState: [CTCallStateIncoming]
    Call ID: [1EB2A082-4A12-48C2-A76C-2244F8F402EE]
}

)} 
```

很明显，注册了一个处理程序，并且长期存在的实例认为没有调用。我很高兴总是使用瞬态实例来获取调用列表，但我确实需要触发事件处理程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T12:39:50.073

我找到了答案。`[[CTCallCenter alloc] init]`必须在主队列中运行。我在自定义串行调度队列中运行它。推测`CTCallCenter`代码正在对当前队列执行某些操作，或者可能需要运行循环。

如果您在主队列之外执行`alloc`/ `init`，那么如果立即调用 currentCalls 将是正确的，但该数据永远不会更新，事件处理程序也不会触发。文档中没有提到这一点，也没有`errors`返回或引发异常。

# filemaker - 在相关表中创建记录*仅*如果以前不存在那里

> ID：14701877
> 
> 赞同：1
> 
> 时间：2013-02-05T07:02:05.637
> 
> 标签：filemaker

我有一个 Filemaker 数据库，其中包含一个 Members 表、一个 Events 表和一个名为 Attendance 的连接表，该表应列出哪些成员参加了哪些活动。出席为成员勾选了“允许创建新记录”设置（活动不需要它）。

数据以 Excel 电子表格的形式到达，用于导入考勤。但是后来我想看看是否有人参加了我们的记录中没有的人......有点像这样：

1.  查看考勤表中每条新添加的记录
2.  **查看成员表中是否存在提到的成员**
3.  如果是这样，什么也不做
4.  否则，使用出勤表中的数据为他们在成员表中创建一条新记录。

如果我理解正确，第 3 步和第 4 步应该如下所示：

```
Set Variable [ $fname; Value: Attendance::firstname ] 
Go To Layout ["Member" (Firstname)]
New Record/Request
Set Field [Member::Firstname; $fname] 
```

即将所需信息放入变量中，在相关表中开始新记录并将那里的数据设置为变量的值。

但是我如何让第 2 步发生呢？我猜某种循环会遍历出勤中找到的记录集，并获取相关标识符。如何将其显示给成员表以查看它是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T04:50:47.543

用 EQUALS 关系链接这两个表。

写一个脚本：

```
 // Loop through your attendance records.
     // Be sure you're in the correct layout
Go to Layout ["imported list"]
     // Attempt to go to the membership record of the person who is attending the event.
Go to Related Record [Show only records from: from table: "membership table"; using layout: "membership table"
     // If the person who is attending IS in the membership list, you'll go to that member's record in the "membership table."
     // If the person who is attending is NOT in the membership list, you'll get an error. You can use that error in an if statement to execute code to add that member.
If [Get ( LastError ) = "101"]
     // insert code to add new member
End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T18:53:28.467

如果您有很多成员，“名字”可能有点轻，无法确定一个独特的成员！因此，我假设您将为每个成员拥有某种唯一的密钥。从那里开始，只需在成员库中搜索成员，然后再创建新记录……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-25T00:12:01.050

`Member`由于您已经在和之间建立了关系`Attendance`，这意味着您可以跨关系从出勤表中“看到”任何相关成员。

我们也知道您只需要评估来自电子表格的*新出勤记录。*

我还假设电子表格中每个成员可能有不止一个出席记录。情况可能并非如此，但假设它是可能的更安全。

我还假设您通过成员中的主键和出勤中的外键将成员表链接到出勤表，即`Member::ID = Attendance::Member ID`.

所以这是我建议的脚本过程：

*   将新的考勤记录导入考勤表。
    *   这将为您提供一组**仅**找到的新出勤记录
*   从**出勤**布局中，查找`Member`带有省略号的相关记录，即：

    ```
    # This assumes you're already on the Attendance layout
    Enter Find Mode
    Set field [Member::ID ; "*"]
    Omit record
    Constrain Find 
    ```

*   这将为您提供一组**没有匹配成员记录的****新**出勤记录。

 **从这里您可以遍历每个出勤记录并根据需要创建成员记录。

如果您检查`Allow creation`成员 -< 出勤关系的成员侧，您可以直接从出勤布局中设置成员表中的字段。

由于成员和出勤之间的一对多关系为 1=Member Many=Attendance，因此您需要检查以确保您尚未在循环期间创建成员记录，即如果新成员有多个出勤记录，您可以已经在循环期间创建了成员记录。

您的循环将如下所示：

```
Go to Record [First]
Loop
    If [IsEmpty(Member::ID)]
        Set Field [Member::First Name] // This first Set Field will create your new Member Record as long as the "Allow Creation" is enabled on the Member side
        Set Field [Member::Last Name]
        ... This would be the rest of your set field steps for Member
    End If
    Go to Record [Next ; Exit After Last]
End Loop 
```

这样您就无需离开您的出勤记录集。此外，将通过关系本身的属性自动创建和设置两个表的主键和外键。**

# javascript - 负前瞻正则表达式

> ID：14701879
> 
> 赞同：4
> 
> 时间：2013-02-05T07:02:15.927
> 
> 标签：javascript, regex

我有一个这样的字符串：

```
<p>Year: ={year}</p>\
<p>Director: ={director}</p>\
<ul>@{actors}<li class="#{class}">={actor}</li>{actors}</ul>\ 
```

我想提取所有不在`={match}`里面的东西`@{word}...{word}`，所以在这种情况下我想匹配`={year}`而`={director}`不是`={actor}`。这是我到目前为止得到的，但它不起作用。

```
/(?!@.*)=\{([^{}]+)\}/g 
```

有任何想法吗？

**编辑：**`={match}`我目前的解决方案是在里面找到所有内容`@{}...{}`并`=`用`=&`. 然后我抓住外面的那些，最后我回来将标记的那些替换回原来的状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:41:49.610

您可以使用正则表达式将字符串分解为段，如下所示：

```
var s = '<p>Year: ={year}</p> \
<p>Director: ={director}</p> \
<ul>@{actors}<li class="#{class}">={actor}</li>{actors}</ul>',
  re = /@\{([^}]+)\}(.*?)\{\1\}/g,
  start = 0,
  segments = [];

while (match = re.exec(s)) {
  if (match.index > start) {
    segments.push([start, match.index - start, true]);
  }
  segments.push([match.index, re.lastIndex - match.index, false]);
  start = re.lastIndex;
}

if (start < s.length) {
  segments.push([start, s.length - start, true]);
}

console.log(segments); 
```

根据您的示例，您将获得以下细分：

```
[
    [0, 54, true], 
    [54, 51, false], 
    [105, 5, true]
] 
```

布尔值表示您是在外 - `true`- 还是在`@{}...{}`段内。它使用反向引用来匹配结尾和开头。

然后，根据细分，您可以正常执行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:16:50.097

`{whatever}`给你，也需要消极展望结局

`/(?!@.*)=\{([^{}]+)\}(?!.*\{[^{}]+\})/g`

## 更新：

以前只适用于`{match}`每行。

挂钩`@`实际上意味着 LookBehind，在这种情况下很难使用 LookBehind，因为 LookBehind 非常喜欢确切地知道要查找多少个字符。

所以让我们使用 LookAhead 来展望未来：**`=\{([^{}]+)\}(?![^@]*[^=@]{)`**最后有钩子`{tag}`

**编辑：**演示[http://regex101.com/r/zH7uY6](http://regex101.com/r/zH7uY6)

# android - Android使用Dom解析器解析所有标签

> ID：14701884
> 
> 赞同：0
> 
> 时间：2013-02-05T07:02:38.063
> 
> 标签：android, domparser

我正在尝试使用 Dom 解析器解析以下 xml 文件。但我得到了前三个标签（日期、早餐、午餐）。如何获取所有日期、早餐和午餐标签。

```
-<Content>
  <Date>2/4/2013</Date>
  <Breakfast>WG Biscuit, Grits, sausage patty, fruit, juice, milk</Breakfast>
  <Lunch>Chicken tenders with sauce, WG affle stick and syrup, carrots-MC, romaine garden salad, fruit, juice, milk</Lunch>
  <Date>2/5/2013</Date>
  <Breakfast>grilleed cheese sandich, grits, fruit, juice, milk</Breakfast>
  <Lunch>meat sauce w/WG pasta, green beans, caesar salad, WW garlic toast, fruit, juice, milk</Lunch>
  <Date>2/6/2013</Date>
  <Breakfast>WG biscuit with chicken patty, fruit, juice, milk</Breakfast>
  <Lunch>WG pizza, spinach salad, WKcorn, fruit, juice, milk</Lunch>
  <Date>2/7/2013</Date>
  <Breakfast>WG french toast sticks (4), sausage links, fruit, juice, milk</Breakfast>
  <Lunch>salisbury steak, black eyed peas, creamed potatoes with gravy, greens-MC, spring mixed salad, WW cornbread, fruit, juice, milk</Lunch>
  <Date>2/8/2013</Date>
  <Breakfast>WG breakfast bagel, yogurt, fruit, juice, milk</Breakfast>
  <Lunch>BBQ rib portion on WG bun, sweet potato fries or yams, romaine garden salad, fruit, juice, milk</Lunch>
  <Date>2/11/2013</Date>
  <Breakfast>Mardi Gras Holiday - No School</Breakfast>
  <Lunch/>
</Content> 
```

**我正在使用以下代码：**

```
StringBuilder sb=new StringBuilder(arg0[0]);
             String findlink=sb.toString();
             try{
                    HttpClient client=new DefaultHttpClient();
                    HttpGet request=new HttpGet();
                    request.setURI(new URI(findlink)) ;

                    HttpResponse response=client.execute(request);
                    //et.setText("its working"); 
                 DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();

                 DocumentBuilder Builder=factory.newDocumentBuilder();
                 dom=Builder.parse(response.getEntity().getContent());
                 dom.getDocumentElement().normalize();
                  nList5=dom.getElementsByTagName("Content");
                    for(int temp=0;temp<nList5.getLength();temp++)
                    {
                         Node nNode=nList5.item(temp);
                         if(nNode.getNodeType()==Node.ELEMENT_NODE)
                         {
                                    Element eElement=(Element)nNode;
                                    String  base1 =getTagValue("Date",eElement);
                                    Date.add(base1);
                                    String  base2 =getTagValue("Breakfast",eElement);
                                    Breakfast.add(base2);
                                    String  base3 =getTagValue("Lunch",eElement);
                                    Lunch.add(base3);

                          }
                    } 
```

如何解析内容下的所有标签。帮我做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:21:20.537

首先确保您的 XML 数据已格式化，我的意思是它不应错过任何关闭标签，并且大括号`<>`使用任何在线`XML formator`来验证您的 XML。在此之后尝试以下代码。

XML解析器函数

```
/**
 * Getting XML DOM element
 * 
 * @param XML
 *            string
 * */
public Document getDomElement(String xml) {
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    dbf.setCoalescing(true);
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }

    return doc;

} 
```

获取节点值。

```
/**
 * Getting node value
 * 
 * @param Element
 *            node
 * @param key
 *            string
 * */
public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
} 
```

}

像这样调用上面的函数

```
 Document doc = parser.getDomElement(yourXMLString);
            NodeList nl = doc.getElementsByTagName("Content");

            for (int i = 0; i < nl.getLength(); i++) {

                Element e = (Element) nl.item(i);

                // Get your Data Here

                                String  base1 =getTagValue("Date",eElement);
                                Date.add(base1);
                                String  base2 =getTagValue("Breakfast",eElement);
                                Breakfast.add(base2);
                                String  base3 =getTagValue("Lunch",eElement);
                                Lunch.add(base3);

        } 
```

像这样更改您的 XML

```
<Contents>
<content>
<Date>2/4/2013
</Date>
<Breakfast>WG Biscuit, Grits, sausage patty, fruit, juice, milk
</Breakfast>
<Lunch>Chicken tenders with sauce, WG affle stick and syrup, carrots-MC, romaine garden salad, fruit, juice, milk
</Lunch>
</content>
<content>
<Date>2/5/2013
</Date>
<Breakfast>grilleed cheese sandich, grits, fruit, juice, milk
</Breakfast>
<Lunch>meat sauce w/WG pasta, green beans, caesar salad, WW garlic toast, fruit, juice, milk
</Lunch>
</content>
<content>
<Date>2/6/2013
</Date>
<Breakfast>WG biscuit with chicken patty, fruit, juice, milk
</Breakfast>
<Lunch>WG pizza, spinach salad, WKcorn, fruit, juice, milk
</Lunch>
</content>
<content>
<Date>2/7/2013
</Date>
<Breakfast>WG french toast sticks (4), sausage links, fruit, juice, milk
</Breakfast>
<Lunch>salisbury steak, black eyed peas, creamed potatoes with gravy, greens-MC, spring mixed salad, WW cornbread, fruit, juice, milk
</Lunch>
</content>
<content>
<Date>2/8/2013
</Date>
<Breakfast>WG breakfast bagel, yogurt, fruit, juice, milk
</Breakfast>
<Lunch>BBQ rib portion on WG bun, sweet potato fries or yams, romaine garden salad, fruit, juice, milk
</Lunch>
</content>
<content>
<Date>2/11/2013
</Date>
<Breakfast>Mardi Gras Holiday - No School
</Breakfast>
<Lunch />
</content>
</Contents> 
```

并称之为`NodeList nl = doc.getElementsByTagName("Content");`

# eclipse - Linux 上 g++ 和 Eclipse 的问题 - 未解决的符号

> ID：14701890
> 
> 赞同：0
> 
> 时间：2013-02-05T07:02:52.117
> 
> 标签：eclipse, g++, ubuntu-12.04

我正在运行 Ubuntu 64 位版本，并下载了最新的 64 位 Eclipse。安装了 g++ 和`build-essential`. 测试 g++ 以确保它在终端上工作，并且工作正常。

```
alex@ubuntu:~/Desktop$ g++ test.cpp -o test
alex@ubuntu:~/Desktop$ ./test
Hello World!alex@ubuntu:~/Desktop$ 
```

但是，尝试构建简单的 C++ Hello Word 项目（Eclipse 附带的默认项目之一）时，我遇到了错误。

```
Description Resource    Path    Location    Type
Program "g++" not found in PATH         Preferences, C++/Build/Settings/Discovery, [CDT GCC Builtin Compiler Settings] options  C/C++ Scanner Discovery Problem 
```

我添加了`g++`以 value命名的环境变量`/usr/bin/g++`，上面的错误消失了，但是，现在我得到了未解决的错误，尽管项目编译并在控制台中显示`!!!Hello World!!!`

```
Description Resource    Path    Location    Type
Symbol 'endl' could not be resolved test_hello.cpp  /test_hello/src line 13 Semantic Error
Symbol 'cout' could not be resolved test_hello.cpp  /test_hello/src line 13 Semantic Error
Symbol 'std' could not be resolved  test_hello.cpp  /test_hello/src line 10 Semantic Error 
```

我是否正确输入了环境变量？我怎样才能修复“未解决”的错误？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:44:36.327

编译时需要考虑两件重要的事情：1.) 我的路径是否与可执行文件保持同步？2.) 我的*库*路径是否正确？

看来您满足 1.) 但不满足 2.)

未*解决的符号*错误意味着 Eclipse 无法通过`LD_LIBRARY_PATH`或其他媒介找到您的库。它试图找到标准编译的 C++ 库。

你是怎么安装的`g++`？

请这样做并发布结果：

`Project > Properties > C/C++ Build > Environment`

如果那里的一切看起来都是名义上的，你可以试试

`/sbin/ldconfig`

这应该有望重新解析您的系统库路径并可能更新您的环境。

# python - 多处理还是 os.fork、os.exec？

> ID：14701901
> 
> 赞同：4
> 
> 时间：2013-02-05T07:03:41.793
> 
> 标签：python

我正在使用多处理模块来分叉子进程。由于在分叉时，子进程获取父进程的地址空间，因此我为父进程和子进程获取相同的记录器。我想清除从父进程继承的任何值的子进程的地址空间。我知道多处理在较低级别执行 fork() 但不是 exec()。我想知道在我的情况下使用多处理是否好，或者我应该使用 os.fork() 和 os.exec() 组合还是有其他解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T07:41:45.193

由于`multiprocessing`正在从您的程序中运行一个函数，就好像它是一个线程函数一样，它肯定需要您的进程状态的完整副本。这意味着做`fork()`.

使用由 提供的更高级别的接口`multiprocessing`通常更好。至少你自己不应该关心`fork()`返回码。

`os.fork()`是一个较低级别的功能，提供较少的开箱即用服务，尽管您当然可以将它用于任何用途......以部分重新实现代码`multiprocessing`为代价。`multiprocessing`所以，我认为，`multiprocessing`对你来说应该没问题。

但是，如果您处理的内存占用太大而无法复制它（或者如果您有其他原因避免分叉——打开与数据库的连接、打开日志文件等），您可能必须创建要运行的函数一个新的进程一个单独的 python 程序。然后您可以使用 运行它`subprocess`，将参数传递给它`stdin`，捕获它`stdout`并解析输出以获得结果。

**UPD：** `os.exec...` [函数系列](http://docs.python.org/2/library/os.html#os.execl)很难用于大多数用途，因为它用衍生的进程替换了您的进程（如果您运行与正在运行的程序相同的程序，它将从一开始就重新启动，而不保留任何内存数据）。但是，如果确实不需要继续父进程执行，`exec()`可能会有一些用处。

根据我的个人经验：`os.fork()`经常用于在 Unix 上创建守护进程；我经常使用`subprocess`（通信是通过stdin/stdout）；几乎从不使用多处理；我一生中没有一次需要`os.exec...()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-18T01:03:24.120

您可以将子进程中的记录器重新绑定到它自己的。我不知道其他操作系统，但在 Linux 上，分叉不会复制整个内存占用（正如 Ellioh 所提到的），而是使用“写时复制”概念。因此，直到您更改子进程中的某些内容 - 它仍保留在父进程的内存范围内。例如，您可以 fork 100 个子进程（不写入内存，只读取）并检查整体内存使用情况。不会`parent_memory_usage * 100`，但更少。

# javascript - 完成 json 字符串化

> ID：14701903
> 
> 赞同：1
> 
> 时间：2013-02-05T07:04:07.307
> 
> 标签：javascript, json

我如何转换

```
var blockobject= new Array();
blockobject[blockobject.length]={area:"1",markerid:[{position:"(34.689703991083334, 135.50275325775146)",title:"sometitle"},{position:"24.689703991083334, 125.50275325775146",title:"sometitle"}]}; 
```

变成我试过的字符串

```
var saveobject = JSON.stringify(blockobject,["markerid","area"]);
alert(saveobject); 
```

它返回

```
 [{"markerid":[{},{}],"area":"1"}] 
```

我正在使用 json2.js

# jquery - Youtube API 批处理获取用户订阅

> ID：14701909
> 
> 赞同：1
> 
> 时间：2013-02-05T07:04:27.917
> 
> 标签：jquery, youtube-api

我正在尝试获取用户的订阅列表。您一次只能获得 50 个，所以我想创建一个批处理来一次完成所有操作。

我正在使用 Jquery 和 ajax 发送这样的 POST 请求：

```
var query = "<feed xmlns='http://www.w3.org/2005/Atom'";
query += "xmlns:media='http://search.yahoo.com/mrss/'";
query += "xmlns:batch='http://schemas.google.com/gdata/batch'"
query += "xmlns:yt='http://gdata.youtube.com/schemas/2007'>";

for(var i = 0; i < loop; ++i)
{
    query += '<entry>';
    query += '<id>http://gdata.youtube.com/feeds/api/users/' + youtube_username + '/subscriptions?max-results=50&start-index=' + ((i * 50) + 1) + '&alt=json</id>';
    query += "<batch:operation type='query'/>";
    query += '</entry>';
}

query += '</feed>';

$.ajax({
    type: 'POST',
    url: 'http://gdata.youtube.com/feeds/api/users/batch?v=2',
    data: query,
    contentType:"application/atom+xml",
    dataType:"xml",
    success: function(data){
        alert(data);
    }
}); 
```

当我执行此请求时，我收到错误 400（错误的 url 请求）。然后我尝试使用此 URL 获取条目：

```
query += '<id>http://gdata.youtube.com/feeds/api/users/' + youtube_username + '/subscriptions/</id>'; 
```

但我收到了这个错误：

> 元素类型“feed”必须后跟属性规范“>”或“/>”。

谢谢你，祝你有美好的一天，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:07:37.067

“批处理请求支持对提要条目但不支持整个提要的查询 (GET) 操作。例如，如果您要发送一个播放列表的批处理请求，您可以包含一个或多个条目来检索有关单个播放列表条目的信息。但是，批处理请求无法检索包含这些条目的播放列表提要。”，如[https://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing中所述](https://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing)

我更喜欢这样解释：

*   假设**订阅**是您想要批量处理的内容。你打开 [http://gdata.youtube.com/feeds/api/users/google/subscriptions?v=2&alt=json&prettyprint=True](http://gdata.youtube.com/feeds/api/users/google/subscriptions?v=2&alt=json&prettyprint=True)

*   1.  导航条目，提取条目 ID。id 不是从**id": {"$t": "tag:youtube.com,2008:user:google:subscriptions"}**或**tag:youtube.com,2008:user:google:subscription:X7RMFNKroIVT2j3zlJcZK2BI2_ZLB1PH1-0aiYV1oMo**中提取的，您应该找到带有**self的****链接**标签，这意味着您从**链接的 self**标签中提取 id。ID 将是**[http://gdata.youtube.com/feeds/api/users/google/subscriptions/X7RMFNKroIVT2j3zlJcZK7VKfC7MoH_jycANXotcvEI?v=2](http://gdata.youtube.com/feeds/api/users/google/subscriptions/X7RMFNKroIVT2j3zlJcZK7VKfC7MoH_jycANXotcvEI?v=2)**。还有一件事，**链接**标签在**入口**标签内，而不是在**feed**内。如果你从**feed**中提取它，你会得到**************[http://gdata.youtube.com/feeds/api/users/google/subscriptions?alt=json&start-index=1&max-results=25&v=2](http://gdata.youtube.com/feeds/api/users/google/subscriptions?alt=json&start-index=1&max-results=25&v=2)**这是错误的。************

*****   1.  最后，请求 API。使用 curl 的示例是： **`curl -vLk -d "<feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:batch='http://schemas.google.com/gdata/batch' xmlns:yt='http://gdata.youtube.com/schemas/2007'><batch:operation type='query'/><entry><id>http://gdata.youtube.com/feeds/api/users/google/subscriptions/X7RMFNKroIVT2j3zlJcZK7VKfC7MoH_jycANXotcvEI?v=2</id></entry></feed>" -X POST "http://gdata.youtube.com/feeds/api/users/google/subscriptions/batch?v=2"`******

 ****另一个例子是视频，例如：

**curl -vLk -d "http://www.w3.org/2005/Atom' xmlns:media=' [http://search.yahoo.com/mrss/](http://search.yahoo.com/mrss/) ' xmlns:batch=' [http://schemas.google .com/gdata/batch](http://schemas.google.com/gdata/batch) ' xmlns:yt=' [http://gdata.youtube.com/schemas/2007](http://gdata.youtube.com/schemas/2007) '> [https://gdata.youtube.com/feeds/api/videos/EWKcFuluXpo](https://gdata.youtube.com/feeds/api/videos/EWKcFuluXpo) "-X POST" [https ://gdata.youtube.com/feeds/api/videos/batch?v=2](https://gdata.youtube.com/feeds/api/videos/batch?v=2) "**

以及**用户/频道的信息**示例，例如：

**curl -vLk -d "http://www.w3.org/2005/Atom' xmlns:media=' [http://search.yahoo.com/mrss/](http://search.yahoo.com/mrss/) ' xmlns:batch=' [http://schemas.google .com/gdata/batch](http://schemas.google.com/gdata/batch) ' xmlns:yt=' [http://gdata.youtube.com/schemas/2007](http://gdata.youtube.com/schemas/2007) '> [http://gdata.youtube.com/feeds/api/users/GoogleDevelopers](http://gdata.youtube.com/feeds/api/users/GoogleDevelopers) “-X POST” [http ://gdata.youtube.com/feeds/api/users/batch?v=2](http://gdata.youtube.com/feeds/api/users/batch?v=2) "**

所以，我认为在不知道条目ID的情况下，不可能通过批处理查询订阅列表。****

# varnish - 如何在 URL 中使用修订查询缓存静态资产

> ID：14701910
> 
> 赞同：0
> 
> 时间：2013-02-05T07:04:29.200
> 
> 标签：varnish

我想为我的静态资产添加一个修订号，以便在更新它们时浏览器会刷新它们 -[如何在代码部署后强制浏览器重新加载静态资产？](https://stackoverflow.com/questions/14690113/how-to-force-browsers-reload-static-assets-after-code-deployment/14690149?iemail=1#14690149)

如果没有修订查询字符串，我可以在“varnishstat”中看到命中，通过它们，我看到它将请求传递到后端。

如何缓存带有修订的静态资产？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:03:35.923

将您的静态资产正则表达式更改为以下内容：

```
if (req.url ~ "\.(jpeg|jpg|png|gif|ico|swf|js|css)(\?.*|)$") {
  return (lookup);
} 
```

它也将匹配修订。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:44:08.073

这是一个奇怪的需求，但以下代码应该可以解决您的问题：

```
sub vcl_recv {
  set req.url = regsub(req.url, "(\.(jpeg|jpg|png|gif|ico|swf|js|css))\?.*$", "\1");
} 
```

每次在后端更新资源时，您都需要清除清漆缓存（清除/禁止）。

# sql - 不仅在表上触发数据库

> ID：14701912
> 
> 赞同：2
> 
> 时间：2013-02-05T07:04:47.840
> 
> 标签：sql, sql-server-2008

当我们在表中插入或更新数据时，有时我希望将主键和表名插入到另一个表中。
我需要这个在一天结束时进行核对，今天更新的所有表格。

请建议。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:07:37.923

看看 CDC -[变更数据捕获](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)

或者 Paul Nielsen 的[AutoAudit](https://autoaudit.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:51:36.113

我已经解决了这样的问题......我希望它能回答你的问题。

1.  创建几个测试表进行演示
2.  创建 SQL 以在所有表​​上创建触发器
3.  简单的插入语句。

> ```
>  CREATE TABLE [dbo].[log_table](
>           [table_name] [varchar](1000) NULL,
>           [column_name] [varchar](1000) NULL,
>           [column_value] [varchar](1000) NULL,
>           [datetime] [datetime] NULL
>         ) 
>         GO 
> ```

```
 CREATE TABLE [dbo].[Animals](
        [AnimalID] [int] IDENTITY(1,1) NOT NULL,
        [AnimalName] [varchar](50) NULL,
     CONSTRAINT [PK_Animals] PRIMARY KEY CLUSTERED 
    ([AnimalID] ASC)
    )

    GO

    CREATE TABLE [dbo].[Countries](
        [CountryID] [uniqueidentifier] NOT NULL,
        [CountryName] [varchar](50) NULL,
     CONSTRAINT [PK_Countries] PRIMARY KEY CLUSTERED 
    ([CountryID] ASC))
    ALTER TABLE [dbo].[Countries] ADD  CONSTRAINT [DF_Countries_countryID]  DEFAULT (newid()) FOR [CountryID]
    GO 
```

> ```
>  SELECT 
>   ' IF OBJECT_ID ('+ CHAR(39) + SCHEMA_NAME(tbl.SCHEMA_ID) + '.trg_' + tbl.name + CHAR(39) + ',''TR'') IS NOT NULL ' + 
>   ' DROP TRIGGER ' + SCHEMA_NAME(tbl.SCHEMA_ID) + '.trg_'+ tbl.name + ';' + 
>   ' EXEC (' + CHAR(39) +
>   ' CREATE TRIGGER ' + SCHEMA_NAME(tbl.SCHEMA_ID) + '.trg_'+ tbl.name + 
>   ' ON '+ SCHEMA_NAME(tbl.SCHEMA_ID) + '.' + tbl.name + ' FOR INSERT,UPDATE AS ' + 
>   ' DECLARE @newval varchar(1000) ' + 
>   ' SELECT @newval ='+ COL_NAME(tbl.object_id, ic.column_id) + ' FROM INSERTED' + 
>   ' INSERT INTO log_table(table_name,column_name,column_value,datetime) VALUES('+ 
>   CHAR(39)+ CHAR(39) + SCHEMA_NAME(tbl.SCHEMA_ID)  +'.'+  tbl.name + CHAR(39)+ CHAR(39) + ' ,'+ 
>   CHAR(39)+ CHAR(39) + COL_NAME(tbl.object_id, ic.column_id) + CHAR(39)+ CHAR(39) + ' ,'+     
>   '@newval,getdate()'+ ')' + CHAR(39)+ ')'
> FROM
>   sys.tables AS tbl
>   INNER JOIN  sys.key_constraints AS kc ON kc.parent_object_id = tbl.object_id
>   INNER JOIN sys.indexes AS i  ON kc.unique_index_id = i.index_id  AND kc.parent_object_id = i.object_id
>   INNER JOIN sys.index_columns AS ic  ON i.object_id = ic.object_id  AND i.index_id = ic.index_id
> WHERE  tbl.type = 'U'  AND ic.is_included_column = 0 and tbl.name NOT IN ('sysdiagrams','log_table')
> ORDER BY  tbl.object_id,  ic.key_ordinal; 
> ```

现在插入我们的表格

> ```
> INSERT INTO Countries(CountryName) VALUES('South Africa')
> INSERT INTO Countries(CountryName) VALUES('USA')
> INSERT INTO Countries(CountryName) VALUES('Brazil')
> INSERT INTO Countries(CountryName) VALUES('Zimbabwe')
> INSERT INTO Countries(CountryName) VALUES('Africa is not a country')
> 
> INSERT INTO Animals(AnimalName) VALUES ('Lion')
> INSERT INTO Animals(AnimalName) VALUES ('African Elephant')
> INSERT INTO Animals(AnimalName) VALUES ('Rhinoceros')
> INSERT INTO Animals(AnimalName) VALUES ('Leopard')
> INSERT INTO Animals(AnimalName) VALUES ('Cape Buffalo') 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:09:07.190

```
SELECT name
FROM sys.objects
WHERE DATEDIFF(D,modify_date, GETDATE()) < 1 
```

通过使用此查询，您可以获得数据库的所有修改。代替 1，您可以指定不希望看到更改的天数。

# sockets - windows socket(ipv6) 无法接收邻居广告(NA) 数据包

> ID：14701915
> 
> 赞同：2
> 
> 时间：2013-02-05T07:04:58.427
> 
> 标签：sockets, ipv6, icmp

我使用原始套接字（IPv6）发送/接收 ICMP 数据包。发送 ping 请求（类型 128）和接收 ping 接收（类型 129）数据包工作正常。发送邻居请求（类型 135）也很有效。

但是同一个socket总是收不到Neighbor Advertisement(NA)包。我不确定在我的情况下是否应该设置任何套接字选项？感谢帮助。

将“RCVALL_ON”设置为socket后，可以从socket接收NA数据包。这是否意味着只能通过这种方式接收NA数据包？

# iphone - 专注于 UITextField 不起作用

> ID：14701917
> 
> 赞同：0
> 
> 时间：2013-02-05T07:05:15.017
> 
> 标签：iphone, ios, xcode

在我的 iPhone 应用程序中，我有一个带有多个 UITextField 的 UIScrollView。
使用 BSKeyboardControls 我添加了 Prev/Next/Done 按钮以在字段之间移动。但是，所选字段上的焦点不起作用，这意味着文本字段实际上仍在键盘下方，尽管已选中。
`becomeFirstResponder`已激活，但只是不设置焦点。
有什么想法可能是错的吗？
谢谢

在 H 文件中

```
#import "BSKeyboardControls.h"
...
@interface AddClientViewController : BaseViewController<UIAlertViewDelegate, UIScrollViewDelegate, UIPickerViewDelegate, UIPickerViewDataSource, UITextFieldDelegate, UITextViewDelegate, BSKeyboardControlsDelegate>
...
@property (strong, nonatomic) IBOutlet UITextField *firstName;
@property (strong, nonatomic) IBOutlet UITextField *lastName;
@property (strong, nonatomic) IBOutlet UITextField *email;
@property (strong, nonatomic) IBOutlet UITextField *mobile;
@property (strong, nonatomic) IBOutlet UITextField *birthday;
@property (strong, nonatomic) IBOutlet UITextField *anniversary;
@property (strong, nonatomic) IBOutlet UITextField *street;
@property (strong, nonatomic) IBOutlet UITextField *city;
@property (strong, nonatomic) IBOutlet UITextField *state;
@property (strong, nonatomic) IBOutlet UITextField *zip;
@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;

@property (nonatomic, strong) BSKeyboardControls *keyboardControls;
.... 
```

在 M 文件中

```
- (void)viewDidLoad
{
...
    NSArray *fields = @[ self.firstName, self.lastName,
    self.email, self.mobile,
    self.birthday, self.anniversary,
    self.street, self.city, self.state, self.zip];

    [self setKeyboardControls:[[BSKeyboardControls alloc] initWithFields:fields]];
    [self.keyboardControls setDelegate:self];
}

- (void)keyboardControlsDonePressed:(BSKeyboardControls *)keyboardControls
{
    [keyboardControls.activeField resignFirstResponder];
}
- (void)keyboardControls:(BSKeyboardControls *)keyboardControls directionPressed:(BSKeyboardControlsDirection)direction
{
    UIView *view = keyboardControls.activeField.superview.superview;
    [self.scrollView scrollRectToVisible:view.frame animated:YES];
}
- (void)keyboardControls:(BSKeyboardControls *)keyboardControls selectedField:(UIView *)field inDirection:(BSKeyboardControlsDirection)direction
{
    UIView *view = keyboardControls.activeField.superview.superview;
    [self.scrollView scrollRectToVisible:view.frame animated:YES];
}
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self.keyboardControls setActiveField:textField];
}
- (void)textViewDidBeginEditing:(UITextView *)textView
{
    [self.keyboardControls setActiveField:textView];
} 
```

BSKeyboardControls 中的 setActiveField

```
- (void)setActiveField:(id)activeField
{
    if (activeField != _activeField)
    {
        if ([self.fields containsObject:activeField])
        {
            _activeField = activeField;

            if (![activeField isFirstResponder])
            {
                [activeField becomeFirstResponder];
            }

            [self updateSegmentedControlEnabledStates];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:14:19.143

由于您正在使用带有 UITextFields 的 UIScrollView，因此您可以使用[`scrollRectToVisible`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)UIScrollview 的方法，方法大致如下：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
    [_myScrollView scrollRectToVisible:textField.frame animated:YES];
} 
```

为此，您需要确保滚动视图`UIViewController`中`UITextFieldDelegate`的每个文本字段都是 。您可以在 UIViewController 的 viewDidLoad 方法中执行此操作：

```
[textField1 setDelegate:self];
[textField2 setDelegate:self]; 
```

...等等

# asp.net-mvc-3 - 从 jquery ajax 请求将用户重定向到登录页面

> ID：14701919
> 
> 赞同：0
> 
> 时间：2013-02-05T07:05:17.207
> 
> 标签：asp.net-mvc-3, jquery

我在我的操作方法上使用自定义授权过滤器来检查用户是否有权访问它。如果用户没有访问权限，则用户将被重定向到 Unauthorize 页面。

我在这里面临的问题是我使用 Jquery Ajax 请求来调用该操作方法。如果用户有权访问，一切都会正常工作。但是，如果用户没有访问权限，则代码无法绑定 View("Unauthorize") 并在浏览器屏幕上显示现有视图；

任何的意见都将会有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:23:40.467

问题是 ajax 请求不能发送重定向响应。相反，您可以返回一个状态代码，告诉调用 javascript 重定向，或者简单地将其更改`Response.ContentType`为`application/javascript`并`window.location = "newUri"`用作响应正文。

# ios - GET 请求的 URL

> ID：14701922
> 
> 赞同：0
> 
> 时间：2013-02-05T07:05:53.903
> 
> 标签：ios, json, get

为了获得 JSON，我使用了这个答案[SBJsonWriter Nested NSDictionary](https://stackoverflow.com/questions/11765037/sbjsonwriter-nested-nsdictionary/12383548#12383548)

`{"key1":"bla1","key2":{"a":"a1","b":"b1","c":"c1","d":"d1"},"key3":"bla3"}`现在我有一个我已经调用的刺痛，`theString` 我需要将它添加到一个 url`http://mysyte.net:8888/JSON?` 并接收这样的东西`http://lcwebtest.sytes.net:8888/JSON?{"key1":"bla1","key2":{"a":"a1","b":"b1","c":"c1","d":"d1"},"key3":"bla3"}`

这是我所做的： `NSString *urlString = [NSString stringWithFormat:@"http://mysyte.net:8888/JSON?%@",theString];`

NSLog 给出`http://mysyte.net:8888/JSON?{"key2":{"d":"d1","b":"b1","c":"c1","a":"a1"},"key1":"bla1","key3":"bla3"}`

然后我通过 NSURL *url1 = [NSURL URLWithString:urlString];

但是`NSLog(@"%@",url1);`给了我`{null}`

我假设 NSURL 不想读取“{”或“}”，并认为 url 格式错误。

如何接收 URL 以发出 GET 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:10:27.037

> 我假设 NSURL 不想读取“{”或“}”，并认为 url 格式错误。

没错，您不能在 URL 中放置一些特殊字符。您想像这样转义 JSON 字符串：

```
CFStringRef escaped = CFURLCreateStringByAddingPercentEscapes(
    NULL,
    (CFStringRef)theString, // (__bridge CFStringRef)theString if you use ARC
    CFSTR(""),
    CFSTR("?&=%,:+-"),
    kCFStringEncodingUTF8
);
NSString *urlString = [NSString stringWithFormat:@"http://mysyte.net:8888/JSON?%@", (NSString *)escaped];
CFRelease(escaped); 
```

# sql-server - 为什么 SQL Server 表值函数插入需要很长时间？

> ID：14701923
> 
> 赞同：0
> 
> 时间：2013-02-05T07:05:56.977
> 
> 标签：sql-server, sql-server-2008-r2, user-defined-functions

我有一个非常复杂的查询，但我应用了一些索引，现在它在不到 1 秒的时间内运行得非常顺利。查询的结构是这样的（我发现没有必要发布完整的查询，因为我稍后会证明 - 错误不在查询本身）：

```
DECLARE @period varchar(6);
SET @period = '201302';

DECLARE @day datetime;
SET @day = dba.fnu_firstdate(@period);//returns 2013-02-01

SELECT
    user_id,
    (SELECT CAST(MAX(c1) AS varchar) FROM table t WHERE t.user_id = table.user_id AND when = DATEADD(day, 0, @day)) Day01,
    ...    
    (SELECT CAST(MAX(c1) AS varchar) FROM table t WHERE t.user_id = table.user_id AND when = DATEADD(day, 30, @day)) Day31
FROM
    table 
```

所以是的，如果我执行这个查询，大约需要 1 秒才能完成，这对我来说非常好。但是，如您所见，我需要为其提供参数。因此，我将其更改为表值函数，以便可以轻松地从中进行选择查询：

```
CREATE FUNCTION fnu_data(@period varchar(6))
RETURNS @results TABLE
(
    id int,
    Day01 varchar(10) null,
    ...
    Day31 varchar(10) null
)
AS
BEGIN
    DECLARE @day datetime;
    SET @day = dba.fnu_firstdate(@period);

    INSERT INTO @results 
    (
        id,     
        Day01,
        ...
        Day31
    )
    SELECT

SELECT
    user_id,
    (SELECT CAST(MAX(c1) AS varchar) FROM table t WHERE t.user_id = table.user_id AND when = DATEADD(day, 0, @day)) Day01,
    ...    
    (SELECT CAST(MAX(c1) AS varchar) FROM table t WHERE t.user_id = table.user_id AND when = DATEADD(day, 30, @day)) Day31
FROM
    table

RETURN 
```

现在当我做

```
SELECT * FROM dba.fnu_data('201302') 
```

需要6秒，太长了。在我的同事的建议下，我尝试在 id 上添加主索引并将每个子选择替换为连接，但它将执行查询的时间延长到 8 秒。（PS 查询返回约 3200 行）。

在我看来，罪魁祸首是插入，但我不知道如何摆脱它。

我可以做些什么来改进我的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:06:42.623

不确定是什么可能导致独立`SELECT`和`INSERT ... SELECT`作为函数的一部分之间的性能差异，但我可以建议重写您的 SELECT 语句，因为您的 SELECT 对我来说看起来绝对不是最佳的。

您似乎正在做一个支点，SQL Server 2005+ 中有本机语法。考虑以下查询：

```
WITH data AS (
  SELECT
    user_id,
    DAY([when]) AS day,
    c1
  FROM [table] t
  CROSS APPLY (
    SELECT CAST(@period + '01' AS date)  -- this is supposed to be a replacement
                                         -- for dba.fnu_firstdate(), but you
                                         -- could use your function here instead
  ) x (startdate)
  WHERE t.day >= x.startdate
    AND t.day <  DATEADD(MONTH, 1, startdate)
)
INSERT INTO @results
(
  id,
  Day01,
  ...
  Day31
)
SELECT
  id,     
  [1],
  ...
  [31]
FROM data
PIVOT (
  MAX(c1) FOR day IN ([1], [2], ..., [30], [31])
) p
; 
```

它使用公用表表达式将指定月份的数据作为单独的步骤准备好，然后使用 PIVOT 语法通过聚合对结果进行透视。

请注意，上面使用单个语句完成整个工作，这也是一个 SELECT 语句。这意味着您可以将多语句 TVF 转换为*内联*TVF：

```
IF OBJECT_ID('dba.fnu_data') IS NOT NULL
  DROP FUNCTION dba.fnu_data
GO
CREATE FUNCTION dba.fnu_data(@period varchar(6))
RETURNS TABLE
RETURN (
  WITH data AS (
    SELECT
      user_id,
      DAY([when]) AS day,
      c1
    FROM [table] t
    CROSS APPLY (
      SELECT CAST(@period + '01' AS date)
    ) x (startdate)
    WHERE t.day >= x.startdate
      AND t.day <  DATEADD(MONTH, 1, startdate)
  )
  SELECT
    id,
    CAST([1] AS varchar(30)) AS Day01,
    ...
    CAST([31] AS varchar(30)) AS Day31
  FROM data
  PIVOT (
    MAX(c1) FOR day IN ([1], [2], ..., [30], [31])
  ) p
)
GO 
```

内联 TVF 在多语句 TVF 之前的优势在于，它的计划是根据调用函数的整个查询来选择的。在这方面，内联 TVF 就像一个视图。

请注意，*必须*使用`DROP`+来完成转换`CREATE`，就像上面一样，因为多语句 TVF 和内联 TVF 是 SQL Server 中不同类型的对象，不能将一个对象更改为另一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:16:20.377

我不认为你的问题是物理插入......而是插入的最终选择。

此特定查询将成为您的瓶颈，因为它执行至少 30 次单独的 SELECT 以生成结果集，然后您将其填充回您的表变量中。

```
SELECT
    user_id,
    (SELECT CAST(MAX(c1) AS varchar) FROM table t WHERE t.user_id = table.user_id AND when = DATEADD(day, 0, @day)) Day01,
    ...    
    (SELECT CAST(MAX(c1) AS varchar) FROM table t WHERE t.user_id = table.user_id AND when = DATEADD(day, 30, @day)) Day31
FROM
    table 
```

你能解释一下你想从这个查询中实现什么吗？

# vb.net - 使用 vb.net 扫描一个工作簿中的两个工作表

> ID：14701924
> 
> 赞同：0
> 
> 时间：2013-02-05T07:06:01.527
> 
> 标签：vb.net, excel

嗨，我在扫描我的工作簿时遇到问题，需要扫描两个工作表。我做的最后一件事是扫描第一个工作表，但第二个工作表仍未包括在内。这是我的示例代码：

```
Dim xlApp As Excel.Application
Dim xlWorkBook As Excel.Workbook
Dim xlWorkSheet As Excel.Worksheet
xlApp = New Excel.ApplicationClass
reportpath = filename
xlWorkBook = xlApp.Workbooks.Open(reportpath)
xlWorkSheet = xlWorkBook.Worksheets("Sheet1")
xlWorkSheet = xlWorkBook.Worksheets("Sheet2") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:40:00.107

将您的代码更改为：

```
Dim xlApp As Excel.Application
Dim xlWorkBook As Excel.Workbookv
Dim xlWorkSheet1 As Excel.Worksheet
Dim xlWorkSheet2 As Excel.Worksheet
xlApp = New Excel.ApplicationClass
reportpath = filename
xlWorkBook = xlApp.Workbooks.Open(reportpath)
xlWorkSheet1 = xlWorkBook.Worksheets("Sheet1")
xlWorkSheet2 = xlWorkBook.Worksheets("Sheet2")

For i = 1 To 10
    MsgBox(xlWorkSheet1.Range("A" & i))
Next i 
```

通过使用此代码，您正在“扫描”的前 10 行列`A`。`Sheet1`

`xlWorkSheet2`如果您想“扫描”，请执行相同操作`Sheet2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:08:56.273

查看本[教程](http://vb.net-informations.com/excel-2007/vb.net_excel_oledb.htm "教程")以从 excel 中获取数据，并在 DataTable 中处理，这种方式比 with 更快：

*将 xlApp 调暗为 Excel.Application*

*将 xlWorkBook 调暗为 Excel.Workbook* *...*

或检查我的方式：

将 _con 调暗为 OleDbConnection

```
Dim _cmd As New OleDbCommand

    Dim DtSet As DataSet

    Dim _tabExtrato as new DataTable

    Dim _adaptCommand As OleDbDataAdapter 
```

Private Sub _readXLS（ByVal TXT 作为文本框，ByVal _linkFILE 作为字符串，ByVal _folha 作为字符串，ByVal DGV 作为 DataGridView）

```
 _con = New OleDbConnection _
    ("provider=Microsoft.Jet.OLEDB.4.0; Data Source='" & _linkFILE & "'; Extended Properties=Excel 8.0;")

    Dim trimTxt As String = "SELECT * FROM "

    '_folha = the sheet
    Dim _sqlQuery As String = " " & trimTxt & " [" & _folha & "$] "

    _adaptCommand = New OleDbDataAdapter(_sqlQuery, _con)

    _adaptCommand.TableMappings.Add("Table", "DSTable")

    DtSet = New DataSet

    '_adaptCommand.Fill(DtSet)
    _adaptCommand.Fill(_tabExtrato)

    DGV.DataSource = _tabExtrato

    _con.Close()

End Sub 
```

# c# - 选项卡控件事件

> ID：14701925
> 
> 赞同：1
> 
> 时间：2013-02-05T07:06:06.037
> 
> 标签：c#, tabcontrol

是否有选项卡控件的预定义事件，或者我可以开发的自定义事件，这将允许我在从选项卡控件的控件集合中删除的控件上执行一些逻辑，然后再将它从选项卡控件中删除。

语境 ：

我有一个带有标签页的标签控件。这些标签页加载与参考网格中的条目相关的文档。每次我在参考网格中选择一行时，一个加载了相应文档的标签页就会添加到我的标签控件中。网格中该行的检查列也会被检查。

我希望能够在我的选项卡控件中关闭一个选项卡页，并能够将此关闭的选项卡页与其在参考网格中的相应条目相关联，以便我可以取消选中该行。

我尝试浏览所有可能的选项卡控件事件，但没有找到合适的。ControlRemoved 事件仅在我的选项卡关闭且选项卡焦点自动转移到下一个选项卡后触发....这导致我的 controlremoved 逻辑失败并进入无限循环，试图关闭所有可用选项卡而不仅仅是这个，并在关闭最后一个异常时引发无效索引异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:57:40.707

If you need a reference to your tab BEFORE it gets removed, there is one simple way to do it. Make CustomTabControl that inherits from TabControl and override its OnControlRemoved event.

If you have this:

```
public class CTabControl:TabControl
    {
        protected override void OnControlRemoved(ControlEventArgs e)
        {
            TabPage tp = e.Control as TabPage; // reference to tab page before it gets removed
            base.OnControlRemoved(e);// gets removed here
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:41:05.410

您需要确保以编程方式取消选中网格中的项目时不会更新选项卡控件。否则，您总是会陷入无限循环，导致不必要的行为。

您可以通过使用布尔标志来实现这一点。在下面的代码示例中，我没有使用“真正的”事件处理程序，因为我手头没有 IDE 来测试它，而是用简单的方法替换它们，所以明白了：

```
private bool suppressTabUpdate = false;

private void HandleGridCheckedOrUncheckedEvent()
{
    if (suppressTabUpdate)
        return;
    // Insert logic here to create or remove the tab pages as required
}

private void HandleTabPageRemovedEvent()
{
    suppressTabUpdate = true;
    // Uncheck the item in the grid here
    suppressTabUpdate = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:41:19.890

我不确定您是否正在寻找一个确切的事件，但我有另一种方法可以提出。

在我看来，一些 UI 代码过于紧密地联系在一起。网格和选项卡控件不应该直接从事件处理程序相互交谈：这就是导致无限循环的原因（事件是来回“乒乓”的）。

相反，我建议网格和选项卡控件都由另一个“组件”（只是一个类，或现有表单类中的一些方法）管理，并且该组件管理打开/关闭选项卡和修改网格中的行。

例如，当用户选择网格中的一行时，根本不要直接修改网格：而是调用一个新方法来执行选择行时需要发生的任何事情：选中复选框、打开选项卡等. 当不再需要选择一行时，不要直接更改任何选择：相反，调用一个新方法来执行未选择行时需要发生的任何事情：取消选中复选框，关闭选项卡等。

# javascript - jQuery getJSON 不适用于实时网址

> ID：14701926
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:06:17.380
> 
> 标签：javascript, jquery, getjson

> **可能重复：**
> [JSONP 请求：“资源解释为脚本，但使用 MIME 类型文本/html 传输”</a>](https://stackoverflow.com/questions/10827116/jsonp-request-resource-interpreted-as-script-but-transferred-with-mime-type-te)
> 
> [](https://stackoverflow.com/questions/10827116/jsonp-request-resource-interpreted-as-script-but-transferred-with-mime-type-te)

 [任何人都可以让我知道我在这里做错了什么，将不胜感激。

这是本地 URL / localhost 上带有 json 文件的代码。而且这项工作没有问题

```
(function() {
    var json_url = 'http://localhost:8888/MOD/some-folder/app/mysql-to-json.php?page=index';

    $.getJSON(json_url, function(data){
        $.each(data, function(i, item) {
            $('#state-list').append('<li><a href="display.html?state=' + item.d_state  + '" data-transition="slide" rel="external">' + see_abbrv(item.d_state) + '</a></li>');
        });
        $('#state-list').listview('refresh'); 
    });
}) (); 
```

但是当我这样做时，我刚刚将 json_url 更新为来自 localhost 的 json_url 的 live url。

数据不会显示。当我尝试检查页面时出现警告：](https://stackoverflow.com/questions/10827116/jsonp-request-resource-interpreted-as-script-but-transferred-with-mime-type-te) 

> [](https://stackoverflow.com/questions/10827116/jsonp-request-resource-interpreted-as-script-but-transferred-with-mime-type-te)
> 
> > [](https://stackoverflow.com/questions/10827116/jsonp-request-resource-interpreted-as-script-but-transferred-with-mime-type-te)
> > 
> > [资源解释为脚本，但使用 MIME 类型 text/html 传输：“](https://stackoverflow.com/questions/10827116/jsonp-request-resource-interpreted-as-script-but-transferred-with-mime-type-te) [http://www.live-server.com/app/mysql-to-json.php?page=index&callback=jQuery18201751285600475967_1360047415705&_=1360047415772](http://www.live-server.com/app/mysql-to-json.php?page=index&callback=jQuery18201751285600475967_1360047415705&_=1360047415772) ”。

使用实时网址更新代码：

```
(function() {
    var json_url = 'http://www.live-server.com/app/mysql-to-json.php?page=index&callback=?';

    $.getJSON(json_url, function(data){
        $.each(data, function(i, item) {
            $('#state-list').append('<li><a href="display.html?state=' + item.d_state  + '" data-transition="slide" rel="external">' + see_abbrv(item.d_state) + '</a></li>');
        });
        $('#state-list').listview('refresh'); 
    });
}) (); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:21:07.277

OP 需要跨源脚本并且几乎就在那里，我们更改了 PHP 文件以生成 JSONP：

```
header('contentType: application/javascript');
print $_GET["callback"]."(". json_encode($rows) .");"; 
```

并将 JavaScript 改回以包含参数“&callback=?”

```
(function() {
    var json_url 
        = 'http://www.live-server.com/app/mysql-to-json.php?"
            +"page=index&callback=?';
    $.getJSON(json_url, function(data){
        $.each(data, function(i, item) {
            $('#state-list').append('<li><a href="display.html?state=' 
                + item.d_state  
                + '" data-transition="slide" rel="external">' 
                + see_abbrv(item.d_state) + '</a></li>');
        });
        $('#state-list').listview('refresh'); 
    });
}) (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:11:30.000

在标题上添加这个

```
header('Content-type: text/javascript'); 
```

如果您使用它并且它在 php 上，那么它会在输出生成 json 文件。

```
print $_GET["callback"]."(". json_encode($rows) .")"; 
```

这到 json 文件的 url 的末尾

```
&callback=? 
```

感谢一百万 MHR 解决了这个问题.. 谢谢一堆兄弟.. :-)

# c# - 无法使空单元格仅着色

> ID：14701932
> 
> 赞同：1
> 
> 时间：2013-02-05T07:06:32.383
> 
> 标签：c#, devexpress

我想通过该代码只为空单元格着色。但我让所有的细胞都上色了。谁能告诉我我的错在哪里。。

```
private void gridView3_RowCellStyle(object sender, DevExpress.XtraGrid.Views.Grid.RowCellStyleEventArgs e)
{
        GridView View = sender as GridView;
        if(e.Column.FieldName == "First Name") 
        {
            string category = View.GetRowCellDisplayText(e.RowHandle, View.Columns["First Name"]);
            if(category != "") 
            {   
                e.CellStyle.BackColor = Color.DeepSkyBlue;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:38:18.830

一方面，条件是错误的：

```
if (category != "") 
```

您正在过滤，以便不为空的单元格被着色。因此，将其替换为`String.IsNullOrEmpty(category)`第一个。

接下来，因为您使用的是 DevExpress 控件，也许您可​​以使用内置的条件格式：[http ://documentation.devexpress.com/#WindowsForms/CustomDocument759](http://documentation.devexpress.com/#WindowsForms/CustomDocument759)

可能是这样的：

```
StyleFormatCondition condition1 = new DevExpress.XtraGrid.StyleFormatCondition();
condition1.Appearance.BackColor = Color.DeepSkyBlue;
condition1.Appearance.Options.UseBackColor = true;
condition1.Condition = FormatConditionEnum.Expression;
condition1.Expression = "[First Name] == ''";
gridView1.FormatConditions.Add(condition1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:39:46.210

您的代码正在为非空单元格着色（检查您的条件`if(category != "")`）

以下对我有用：

```
private void gridView3_RowCellStyle(object sender, DevExpress.XtraGrid.Views.Grid.RowCellStyleEventArgs e)
{
    GridView View = sender as GridView;
    if (e.Column.FieldName == "First Name" &&
        string.IsNullOrEmpty(View.GetRowCellDisplayText(e.RowHandle, e.Column)))
    {
        e.Appearance.BackColor = Color.DeepSkyBlue;
    }
} 
```

# php - 使用 PHP 文件提交查询表

> ID：14701934
> 
> 赞同：1
> 
> 时间：2013-02-05T07:07:02.510
> 
> 标签：php

我是新手，有人可以看看我的 sendresults 脚本并告诉我哪里出错了吗？

该表单是一个单独的 HTML 文档，.php 被上传到根目录，我在根目录中也有一个确认和 error.html。提交时的表单返回空白。这是脚本；（我已经取出了完整的商业网站网址）

```
<?php

// Subject 
$subject = "Results from Enquiry form";
//  form information will be sent to.
$mailto = 'my email';
//form url
$formurl = "http://www....";
// redirect after form is processed.
$confirmurl = 'http://www.....';
//redirect for errors
$errorurl = "http://www....";

$email_is_required =1;
$name_is_required =1;
$comments_is_required = 1;
$telephone_is_required = 1;
$uself = 0;
$forcelf = 0;
$use_envsender = 0;
$use_sendmailfrom = 0;
$smtp_server_win = "";
$use_webmaster_email_for_from = 0;
$use_utf8 = 1;

define ('MAX_LINE_LENGTH', 900 );
$headersep = $uself ? "\n":"\r\n";
$content_nl = $forcelf ? "\n" : (defined('PHP_EOL') ? PHP_EOL : "\n");
$content_type = $use_utf8 ? 'Content-Type: text/plain; charset="utf-8"' : 'Content-Type: text/plain; charset="iso-8859-1"';
if ($use_sendmailfrom) {
    ini_set('sendmail_from', $mailto);
}

$envsender = "-f$mailto";
$name = isset($_POST['name']) ?
    $_POST['name']: $_POST['name'];
    $address = $_POST['address'];
    $city = $_POST['city'];
    $state = $_POST['state'];
    $postcode = $_POST['postcode'];
    $telephone = $_POST['telephone'];
    $email = $_POST['email'];
    $comments = $_POST['comments'];  
    $bushwalking = $_POST['bushwalking'];
    $trout_fishing = $_POST['trout_fishing'];
    $canoeing = $_POST['canoeing'];
    $accommodation = $_POST['accommodation'];
    $corporate_events = $_POST['corporate_events'];
    $guests_for_accomm = $_POST['guests_for_accomm'];
    $stay = $_POST['stay'];
    $dday = $_POST['dday'];
    $dMonth = $_POST['dMonth'];
    $dYear = $_POST['dYear'];
    $http_referrer = getenv ("HTTP_REFERER" );

if (!isset($_POST['email']))  {
    header("Location: $formurl" );
    exit;
}
if (($email_is_required && (empty($email) || !preg_match('/@/', $email))) || ($name_is_required && empty($name)) || ($comments_is_required && empty($comments))) {
           header("Location: $errorurl" );
           exit;
}
if ( preg_match("/[\r\n]/", $name) || preg_match ("/[\r\n]/", $email) ) {header( "Location: $errorurl" );
exit;
}
if (empty($email)) {
    $email = $mailto ;
}
$fromemail = $use_webmaster_email_for_from ? $mailto : $email;
if (function_exists('get_magic_quotes_gpc' ) && get_magic_quotes_gpc()) {
    $comments = stripslashes ($comments);
}
$messageproper = "Ths message was sent from:" . $content_nl . 
                 "http_referer" . $content_nl .
                 "-----------------------------------------------------------------
                 " . $content_nl .
                 "Name of sender: $name" . $content_nl .
                 "Address of sender: $address" . $content_nl .
                 "City of sender: $city" . $content_nl .
                 "State of sender: $state" . $content_nl .
                 "Postcode of sender: $postcode" . $content_nl .
                 "Telephone of sender: $telephone" . $content_nl .
                 "Email of sender: $email" . $content_nl .
                 "Required information: $bushwalking, $trout_fishing, $canoeing, $accommodation, $corporate_events " . $content_nl .
                 "Number of guest: $guests_for_accomm" . $content_nl . 
                 "Length of stay: $stay" . $content_nl .
                 "Date if arrival: $dday, dMonth, dYear" . $content_nl . 
                 "-------------------------------------------COMMENTS--------------------------------------" . $content_nl . $contents_nl . 
                 wordwrap($comments, MAX_LINE_LENGTH, $content_nl, true ) . $content_nl . $content_nl . "---------------------------------------------------------------------------------------------------------" . $content_nl ;
                 $headers = "From:\"$name\" <$fromemail>" . 
                 $headersep . "Reply-To:\"$name\"<$email>" .
                 $headersep . "X-Mailer: chfeedback.php 2.16.2" . 
                 $headersep . 'MIME-Version: 1.0' . $headersep . $content_type ;
if ($use_envsender) {
         if(mail($mailto, $subject, $messageproper, $headers, $envsender))
         {
          echo("Location: $confirmurl");
}}
else  {
          echo( "Location: $errorurl" );   
}
?>

Here is the html
<body>
<div id="apDiv1">
<div class="form"><form id="enquiry_form" name="enquiry_form" method="post" action="/sendresults.php" enctype="text/plain" onsubmit="return exec()">
  <table width= "420" border="0" cellpadding="0" cellspacing="5">
   <tr><td height="15" colspan="2"></td>
    <tr>
      <th colspan="2">Please enter details for your enquiry below<br/><br/>
        </th>
    </tr>
    <tr>
      <td width="25%" align="left">
         Name:</td>
          <td width="75%"><label><input name="name" type="text" class="content_fieldset" id="name" value=""/>*
          </label></td>
       </tr>
       <tr>
         <td>Address:</td>
          <td><label><input name="address" id="address" type="text" class="content_fieldset" value="" /></label></td>
          </tr>
       <tr><td>City:</td>
          <td><label><input name="city" id="city" type="text" class="content_fieldset" value="" /></label></td>
          </tr>
        <tr><td>State:</td>
          <td><label><input name="state" id="state" type="text" class="content_fieldset" value="" /></label></td>
          </tr>
        <tr><td>Postcode:</td>
       <td><label><input name="postcode" id="postcode" type="text" class="content_fieldset" value="" /></label></td></tr>
          </tr>
      <tr><td>Telephone:</td>
          <td><label><input name="telephone" type="text" class="content_fieldset" id="telephone" value="" />*</label></td>
          </tr>
     <tr><td>E-mail:</td>
          <td><label><input name="email" type="text" class="content_fieldset" id="email" value=""/>*</label></td>
          </tr>
        <tr>
          <td colspan="2" align="right">* Required fields</td>
        </tr>
        <tr><td height="15" colspan="2"></td></tr> 
           <tr><td colspan="2"> What would you like information about?</td>
           </tr>
         <tr><td height="10" colspan="2"></td></tr>
          <tr><td width=10%><label><input type="checkbox" name="bushwalking" id="bushwalking" value="bushwalking" checked="checked" /></label></td><td>Bush walking</td>         </tr>
          <tr><td><label><input type="checkbox" name="trout_fishing" id="trout_fishing" value="trout_fishing" /></label></td><td>Trout Fishing</td>
          </tr>
          <tr><td><label><input type="checkbox" name="canoeing" id="canoeing" value="canoeing" /></label></td><td>Canoeing</td>
          </tr>
          <tr><td><label><input type="checkbox" name="corporate_events" id="corporate_events" value="corporate_events" /></label></td><td>Corporate Events</td>
          </tr>
          <tr><td><label><input type="checkbox" name="accommodation" id="accommodation" value="accommodation" checked="checked" /></label></td><td>Accommodation</td>
          </tr>
          <tr><td height="20" colspan="2"></td>
          </tr>
          <tr><td width="40%">No. of Guests requiring accommodation:</td>
          <td><label><input name="guests_for_accomm" type="text" id="guests_for_accomm" size="3" value="" /></label></td>
          <tr><td height="15" colspan="2"></td> 
          </tr>
          <tr><td>Length of Stay:</td><td><label>
          <select name="stay" id="stay">
            <option>0 nights</option>
            <option>1 night</option>
            <option>2 nights</option>
            <option>3 nights</option>
            <option>4 nights</option>
            <option>5 nights</option>
            <option>6 nights</option>
            <option>7 nights</option>
            <option>8 nights</option>
            <option>9 nights</option>
            <option>10 nights</option>
          </select>
          </label></td>
          </tr>
           <tr><td height="15" colspan="2"></td>
          <tr><td width="35%">Date of Arrival:</td>
          <td><select name="dday" id="dday">
            <option value="01" >1</option>
            <option value="02" >2</option>
            <option value="03" >3</option>
            <option value="04" >4</option>
            <option value="05" >5</option>
            <option value="06" >6</option>
            <option value="07" >7</option>
            <option value="08" >8</option>
            <option value="09" >9</option>
            <option value="10" >10</option>
            <option value="11" >11</option>
            <option value="12" >12</option>
            <option value="13" >13</option>
            <option value="14" >14</option>
            <option value="15" >15</option>
            <option value="16" >16</option>
            <option value="17" >17</option>
            <option value="18" >18</option>
            <option value="19" >19</option>
            <option value="20" >20</option>
            <option value="21" >21</option>
            <option value="22" >22</option>
            <option value="23" >23</option>
            <option value="24" >24</option>
            <option value="25" >25</option>
            <option value="26" >26</option>
            <option value="27" >27</option>
            <option value="28" >28</option>
            <option value="29" >29</option>
            <option value="30" >30</option>
            <option value="31" >31</option>
          </select>
          <select name="dMonth" id="dMonth">
            <option value="01" >January</option>
            <option value="02" >February</option>
            <option value="03" >March</option>
            <option value="04" >April</option>
            <option value="05" >May</option>
            <option value="06" >June</option>
            <option value="07" >July</option>
            <option value="08" >August</option>
            <option value="09" >September</option>
            <option value="10" >October</option>
            <option value="11" >November</option>
            <option value="12" >December</option>
          </select>
          <select name="dYear" id="dYear">
            <option value="2012" >2013</option>
            <option value="2013" >2014</option>
            <option value="2014" >2015</option>
            <option value="2015" >2016</option>
            <option value="2016" >2017</option>
            <option value="2017" >2018</option>
          </select></td>
          </tr>
       <tr><td height="15" colspan="2"></td>
          <tr><td>Comments:</td>
          <td><textarea name="comments" rows="6" cols="30" id="comments" ></textarea></td>
       </tr>
       <tr><td height="15" colspan="2"></td> 
          <tr><td colspan="2"><label><input name="submit" type="submit" class="button" id="submit" value="Submit"/> 
           <input type="reset" value="Reset"/></label></td>
        </tr> 
  </table>
</form></div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:01:25.383

```
<?php
// Subject 
$subject = "Results from Enquiry form";
//  form information will be sent to.
$mailto = 'abc@eabc.com';
//form url
$formurl = "http://www.e247dubai.com";
// redirect after form is processed.
$confirmurl = 'http://www.e247dubai.com';
//redirect for errors
$errorurl = "http://www.e247dubai.com";

$email_is_required =1;
$name_is_required =1;
$comments_is_required = 1;
$telephone_is_required = 1;
$uself = 0;
$forcelf = 0;
$use_envsender = 1;
$use_sendmailfrom = 0;
$smtp_server_win = "";
$use_webmaster_email_for_from = 0;
$use_utf8 = 1;
define ('MAX_LINE_LENGTH', 900 );
$headersep = $uself ? "\n":"\r\n";
$content_nl = $forcelf ? "\n" : (defined('PHP_EOL') ? PHP_EOL : "\n");
$content_type = $use_utf8 ? 'Content-Type: text/plain; charset="utf-8"' : 'Content-Type: text/plain; charset="iso-8859-1"';
if ($use_sendmailfrom) {
    ini_set('sendmail_from', $mailto);
}

$envsender= "-f$mailto";
$name = isset($_POST['name']) ?  $_POST['name']: $_POST['name'];
$address=$_POST['address'];
$city=$_POST['city'];
$state=$_POST['state'];
$postcode=$_POST['postcode'];
$telephone=$_POST['telephone'];
$email=$_POST['email'];
$comments=$_POST['comments'];  
$bushwalking=$_POST['bushwalking'];
$trout_fishing=$_POST['trout_fishing'];
$canoeing=$_POST['canoeing'];
$accommodation=$_POST['accommodation'];
$corporate_events=$_POST['corporate_events'];
$guests_for_accomm=$_POST['guests_for_accomm'];
$stay=$_POST['stay'];
$dday=$_POST['dday'];
$dMonth=$_POST['dMonth'];
$dYear=$_POST['dYear'];
$http_referrer=getenv ("HTTP_REFERER" );
if (!isset($_POST['email']))  {
header("Location: $formurl" );
exit;
}
if (($email_is_required && (empty($email) || !preg_match('/@/', $email))) || ($name_is_required && empty($name)) || ($comments_is_required && empty($comments))) {
header("Location: $errorurl" );
exit;
}
if ( preg_match("/[\r\n]/", $name) || preg_match ("/[\r\n]/", $email) ) {header( "Location: $errorurl" );
exit;
}
if (empty($email)) {
$email = $mailto ;
}
$fromemail = $use_webmaster_email_for_from ? $mailto : $email;
if (function_exists('get_magic_quotes_gpc' ) && get_magic_quotes_gpc()) {
 $comments = stripslashes ($comments);
}
//echo "name :".$name. " Address: ".$address." City:".$city;
$messageproper = "Ths message was sent from:" . $content_nl . 
"http_referer" . $content_nl .
"-----------------------------------------------------------------
" . $content_nl .
"Name of sender: $name" . $content_nl .
"Address of sender: $address" . $content_nl .
"City of sender: $city" . $content_nl .
"State of sender: $state" . $content_nl .
"Postcode of sender: $postcode" . $content_nl .
"Telephone of sender: $telephone" . $content_nl .
"Email of sender: $email" . $content_nl .
"Required information: $bushwalking, $trout_fishing, $canoeing, $accommodation, $corporate_events " . $content_nl .
"Number of guest: $guests_for_accomm" . $content_nl . 
"Length of stay: $stay" . $content_nl .
"Date if arrival: $dday, dMonth, dYear" . $content_nl . 
"-------------------------------------------COMMENTS--------------------------------------" . $content_nl . $contents_nl . 
wordwrap($comments, MAX_LINE_LENGTH, $content_nl, true ) . $content_nl . $content_nl . "---------------------------------------------------------------------------------------------------------" . $content_nl ;
$headers = "From:\"$name\" <$fromemail>" . 
$headersep . "Reply-To:\"$name\"<$email>" .
$headersep . "X-Mailer: chfeedback.php 2.16.2" . 
$headersep . 'MIME-Version: 1.0' . $headersep . $content_type ;
if ($use_envsender) {
if(mail($mailto, $subject, $messageproper, $headers, $envsender))
{
echo ("Location: $confirmurl");
}}
else  {
echo( "Location: $errorurl" );   
}
?> 
```

尝试这个。

# javascript - 如何以相同的格式显示 div 内容？内容取自数据库

> ID：14701941
> 
> 赞同：1
> 
> 时间：2013-02-05T07:07:48.330
> 
> 标签：javascript, asp.net

我有一个存储在数据库中的模板。我想在 Div 中显示模板

我使用下面的代码来填充 Div 中的模板。

document.getElementById('dvPreview').innerHTML = 模板；我使用 Ajax POST 来获取模板。

实际模板是

亲爱的阿伦

欢迎来到公司

您的电子邮件 ID：arun@company.com

员工编号：E6498

重新审视

团队 。

但 div 内容显示如下

亲爱的 Arun 欢迎来到公司 您的电子邮件 ID : arun@company.com 员工代码 : E6498 Regading Team

邮件内容也是错误的。

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:20:49.890

请检查这个。

Template.Replace("\n", "< br/>");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:12:48.633

模板应该是html格式的。你应该首先将格式化的模板保存在数据库中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:13:18.100

您可能必须将返回更改为`<br/>`'s. 你可以通过调用来做到这一点

```
yourTemplate.replace(/\n/g,"<br />"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T07:17:03.060

首先检查模板是否正确保存在数据库中。现在您的问题是新行常量，因此您必须先更改返回值`"\n" (the new line)`，`<br />`然后再将其分配给 div 的 innerhtml。

试试这个（在客户端使用javascript）

```
Template.replace(/\n/g,"<br />"); 
```

在后面的代码中你可以这样做

```
Template.Replace("\n", "<br/>"); 
```

# c++ - 用新的双括号初始化？

> ID：14701944
> 
> 赞同：1
> 
> 时间：2013-02-05T07:07:53.483
> 
> 标签：c++

您好，只是想知道在 C++03 中是否可以执行以下操作。我已经尝试过了，但对我不起作用。

```
struct SomeClass{
int a,b,c,d;
};

SomeClass * temp  = new SomeClass();
*temp = { 1,2,3,4}; 
```

我做到了，但编译器给了我一个警告，只有 C++11 才支持扩展初始化器。
在使用 new 创建对象时，是否有其他方法可以使用双括号初始化？不允许构造函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:45:27.943

我不认为您可以直接在 C++03 中执行此操作，但与蛮力相比，您可以（也许）简化工作，您可能会将其视为“类外构造函数”：

```
struct someclass{
    int a, b, c, d;
};

someclass make(int a, int b, int c, int d) { 
    someclass ret = {a, b, c, d};
    return ret;
}

int main(){
    someclass *s = new someclass();

    *s = make(1, 2, 3, 4);
} 
```

很容易打赌，任何相当新的（甚至可能是最古老的）C++ 编译器都会内联函数调用，因此函数调用不会带来任何开销。如果您愿意，您还可以将函数转换为模板，并为不同数量的参数重载它，因此您可以执行以下操作：

```
someclass *s = new someclass();

*s = make<someclass>(1, 2, 3, 4);

otherclass *o = new otherclass();

*o = make<otherclass>(1, 2); 
```

然而，归根结底，这里最大的问题是你一开始就走错了路。有可能（至少）在接下来的一两年内，您应该完全忘记 C++ 有`new`表达式。感觉自己需要它（尤其是在这种情况下）是一个相当好的迹象，表明您还没有很好地适应 C++，并且仍在尝试编写 Java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:09:04.477

技术上当前`C++`是`C++11`.

无论如何，没有`C++11`. 您只能在创建结构或数组时进行大括号初始化。

IE

```
SomeClass temp = { 1,2,3,4 }; 
```

编辑：我需要查看它在 C++ 中的支持，但这在 C99 中似乎是可能的，通过使用称为[复合文字的东西](http://gcc.gnu.org/onlinedocs/gcc-4.3.2/gcc/Compound-Literals.html)

```
SomeClass temp;

temp = ((SomeClass){1,2,3,4}); 
```

Edit2 - 没有雪茄 -[`source.cpp:9:31: warning: ISO C++ forbids compound-literals [-pedantic]`](http://liveworkspace.org/code/1i3qI5%240)

好像[其他人也有同样的问题](http://www.cplusplus.com/forum/beginner/13778/)

# c# - 从两个字符串之间的字符串中检索字符串？

> ID：14701949
> 
> 赞同：-1
> 
> 时间：2013-02-05T07:08:03.087
> 
> 标签：c#, string, design-patterns

我有一个字符串喜欢

```
"Hello i want to go." 
```

我的代码给出`"want to go."` ，但我需要字符串，`" i "`我`" to "`怎样才能得到这个？我的代码如下。

```
string[] words = Regex.Split("Hello i want to go.", " i ");
string respons = words[1]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:25:32.850

```
string input = "Hello i want to go.";
Regex regex = new Regex(@".*\s[Ii]{1}\s(\w*)\sto\s.*");
Match match = regex.Match(input);
string result = string.Empty;
if (match.Success)
{
    result = match.Groups[1].Value;
} 
```

此正则表达式将匹配“i”（不区分大小写）和“to”之间的任何“单词”。

编辑：按照评论中的建议将 ...to.* => 更改为 \s.* 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:10:59.407

```
string input = "Hello I want to go.";
string result = input.Split(" ")[2]; 
```

如果你想要“i”之后的单词，那么：

```
string result = input.Split(" i ")[1].Split(" ")[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:11:59.073

```
 string input = "Hello I want to go.";
    string[] sentenceArray = input.Split(' ');
    string required = sentenceArray[2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T07:13:37.823

采用

```
string s = "Hello i want to go.";
string[] words = s.split(' ');
string response = wor 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T07:16:14.603

只需一行简单的代码即可

```
 var word = "Hello i want to go.".Split(' ')[2]; 
```

//返回单词“want”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T07:28:18.480

这是一个使用正则表达式的示例，它为您提供每次出现“想要”的索引：

```
string str = "Hello i want to go. Hello i want to go. Hello i want to go.";
Match match = Regex.Match(str, "want");

while(match.Success){
    Console.WriteLine(string.Format("Index: {0}", match.Index));
    match = match.NextMatch();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T07:36:24.497

没有地方说正则表达式...

```
string result = input.Split.Skip(2).Take(1).First() 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-05T08:29:10.193

这是工作

```
public static string Between(this string src, string findfrom, string findto)
{
    int start = src.IndexOf(findfrom);
    int to = src.IndexOf(findto, start + findfrom.Length);
    if (start < 0 || to < 0) return "";
    string s = src.Substring(
                   start + findfrom.Length, 
                   to - start - findfrom.Length);
    return s;
} 
```

它可以称为

```
string respons = Between("Hello i want to go."," i "," to "); 
```

它返回`want`

# javascript - Javascript检测android原生浏览器

> ID：14701951
> 
> 赞同：11
> 
> 时间：2013-02-05T07:08:04.130
> 
> 标签：javascript, jquery, html

我想用 javascript 检测原生 android 浏览器（每个 android 手机上都安装的那个）。

我应该在 useragent 中寻找什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-23T14:29:47.843

这应该有效。

```
var nua = navigator.userAgent;
var is_android = ((nua.indexOf('Mozilla/5.0') > -1 && nua.indexOf('Android ') > -1 &&     nua.indexOf('AppleWebKit') > -1) && !(nua.indexOf('Chrome') > -1)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-23T13:59:06.410

原生浏览器，我们一开始无法检测到自己，使用上面提到的代码：

```
var nua = navigator.userAgent;
var is_android = ((nua.indexOf('Mozilla/5.0') > -1 && nua.indexOf('Android ') > -1 &&     nua.indexOf('AppleWebKit') > -1) && !(nua.indexOf('Chrome') > -1)); 
```

对于大多数设备，我们得到以下作为 chrome 浏览器的用户代理：

![在此处输入图像描述](../Images/ac93a1feadd9a73e4e3f82f6bb6874a0.png)

在本机浏览器中：

![在此处输入图像描述](../Images/3fc795790872f7261f71bbe01591d27d.png)

并针对三星 Galaxy S3、HTC 渴望、华硕 Zenfone5 进行了此项观察。

并发现大多数设备都存在“Chrome/30.0.0.0”或“chrome/”以及该版本，包括 Zenfone 5、Samsung Galaxy s3。但是“版本/”没有。存在于用户代理对象中足以区分本机和 Chrome。

我们使用了以下代码：

```
var ua = navigator.userAgent;
var is_native_android = ((ua.indexOf('Mozilla/5.0') > -1 && ua.indexOf('Android ') > -1 && ua.indexOf('AppleWebKit') > -1) && (ua.indexOf('Version') > -1)); 
```

希望，它对你也有用...... :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T07:17:52.703

有关不同用户代理字符串的概述，请参阅[此页面。](http://www.zytrax.com/tech/web/mobile_ids.html)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-05T07:17:12.157

尝试这样的事情：

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
  // Do something
} 
```

或者

检查这个网址： [http ://davidwalsh.name/detect-android](http://davidwalsh.name/detect-android)

# ruby-on-rails - rake db:create 命令不起作用。为什么？

> ID：14701957
> 
> 赞同：0
> 
> 时间：2013-02-05T07:08:53.993
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake

> **可能重复：**
> [库未加载：libmysqlclient.16.dylib 尝试在 OS X 10.6 上使用 mysql2 gem 运行“rails server”时出错](https://stackoverflow.com/questions/4546698/library-not-loaded-libmysqlclient-16-dylib-error-when-trying-to-run-rails-serv)

我是 Ruby on rails 的新手。我正在运行此命令`rake db:create`，但出现以下错误。我确实安装了mysql。

```
Zafars-MacBook-Pro:erierb zafar$ rake db:create
rake aborted!
 dlopen(/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9):     Library not loaded: libmysqlclient.18.dylib
  Referenced from: /Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
  Reason: image not found - /Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `require'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `<top (required)>'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
/Users/zafar/Desktop/erierb/config/application.rb:13:in `<top (required)>'
/Users/zafar/Desktop/erierb/Rakefile:5:in `require'
/Users/zafar/Desktop/erierb/Rakefile:5:in `<top (required)>'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `eval'
/Users/zafar/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

以下是我的 database.yml 文件

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: erierb_development
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: erierb_test
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: erierb_production
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

这是我的宝石文件

```
source 'https://rubygems.org'

    gem 'rails', '3.2.11'

    # Bundle edge Rails instead:
    # gem 'rails', :git => 'git://github.com/rails/rails.git'

    gem 'mysql2'

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails',   '~> 3.2.3'
      gem 'coffee-rails', '~> 3.2.1'

      # See https://github.com/sstephenson/execjs#readme for more supported runtimes
      # gem 'therubyracer', :platforms => :ruby

      gem 'uglifier', '>= 1.0.3'
    end

    gem 'jquery-rails'

    group :development, :test do
      gem 'rspec-rails'
    end

    # To use ActiveModel has_secure_password
    gem 'bcrypt-ruby', '~> 3.0.0' 
```

# canvas - webapp上交互式图像的响应速度最快的方法

> ID：14701964
> 
> 赞同：1
> 
> 时间：2013-02-05T07:09:31.993
> 
> 标签：canvas, svg, raphael, imagemap, paperjs

我正在寻找构建一个基于交互式图像的界面的网络应用程序。每个图像将有 10-200 个可点击/可触摸/可突出显示的不规则形状区域（想想类似地图）。

我可以看到几种执行此操作的方法，例如 svg 图像、图像映射、`<canvas>`元素或 javascript 库，例如 paper.js 或 raphael。 **不过，我的问题是，哪种方式反应最快？** 而且我完全排除了Flash。

通过响应，我的意思是：

*   快速加载，准备好被触摸/点击
*   被点击的即时反应时间（我想一些库可能需要一些处理时间来确定点击是否在特定区域，当有很多区域时）
*   每个区域都可以快速突出显示和取消突出显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:06:25.180

我遇到了同样的问题，我们选择了 svg + Raphael.js

我基于鼠标悬停在地图上或悬停在触发 DOM 相关事件的 HTML 元素上突出显示地图部分，其中之一调用 Raphael.js 脚本来突出显示相同的部分。

反应灵敏。该代码目前无法共享，但是是的，它确实工作得很好，所以我想它会与触摸/点击事件一样反应

# wpf - 通过绑定不同的颜色设置为一列 - DataGrid

> ID：14701965
> 
> 赞同：0
> 
> 时间：2013-02-05T07:09:31.903
> 
> 标签：wpf, mvvm, datagrid

我有一个 X 类有一些数据：

```
 private string yyy;

    public string YYY
    {
        get { return yyy; }
        set
        {
            yyy= value;
            NotifyPropertyChanged("YYY");
        }
    }

    private string color;
    [Browsable(false)]
    public string Color
    {
        get { return color; }
        set
        {
            color = value;
            NotifyPropertyChanged("Color");
        }
    } 
```

我有 ObservableCollection 保存类 X 的列表

```
public ObservableCollection<X> xxx{ get; set; } 
```

通过绑定到 DataGrid 的列表如下：

```
 <DataGrid x:Name="XXXX" ItemsSource="{Binding}" AutoGenerateColumns="True">
                </DataGrid> 
```

该列表位于 DataGrid 的 DataContext 中，

我希望每行中第一列的文本将是我拥有的类数据的颜色？我会做从字符串到颜色的转换器，但我如何在 xmal 中定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:31:02.183

你可以使用一个[`DataGridTemplateColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn.celltemplate%28v=vs.95%29.aspx)

```
<DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
   <DataGrid.Columns>
        <DataGridTemplateColumn Header="FirstName" >
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding FirstName}" Foreground="{Binding Color}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
       <DataGridTextColumn Header="LastName" Binding="{Binding LastName}"></DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

从字符串到颜色的转换是隐式的。我知道这不是严格的 MVVM，但我不会因为拥有 Color 类型的 Color 属性而失眠。

# python - 有没有一种简单的方法可以在 Python 列表中表示 base64 字母？

> ID：14701968
> 
> 赞同：1
> 
> 时间：2013-02-05T07:09:37.517
> 
> 标签：python, encoding, base64

字母表（及其索引）可以在这里找到：

[http://www.garykessler.net/library/base64.html](http://www.garykessler.net/library/base64.html)

有比`alphabet = ['A','B',...]`表示这个字母表更短的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T07:14:44.383

您可以使用该`string`模块

```
import string
alphabet = string.ascii_uppercase + string.ascii_lowercase + string.digits + '+/' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T07:10:32.430

字符串也是序列。

```
'ABCD...' 
```

# ios6 - IOS 6 旋转的奇怪行为

> ID：14701979
> 
> 赞同：0
> 
> 时间：2013-02-05T07:10:43.340
> 
> 标签：ios6, uinavigationcontroller, rotation, xcode4.5, autorotate

我已经在网上和论坛上搜索了两个星期。我找不到像我的问题一样的东西。我在 IOS 3 上构建了一个应用程序，并且及时使其与所有 IOS 版本兼容。所有应用程序都处于纵向模式，而我只有一个处于横向模式的屏幕（图表）。在 IOS 5 和 IOS 5 之前，我在旋转时也得到了带有黑边的漂亮矩形。在 IOS 6 上，我看到旋转后，图表 Nib 从右上角呈现。（我不能发布图片或视频来展示它，因为它有一个标志，我不确定它是否被允许。

我在开始时使用 setRootViewController。

我附上了一张草图来演示。![在此处输入图像描述](../Images/cd9f2e3ae63bbadb9da1bc9d20841eb4.png)

如何检索正确的动画？

# c# - 如何修复无法打开 wav 设备 LumiSoft.Net？

> ID：14701980
> 
> 赞同：0
> 
> 时间：2013-02-05T07:10:52.703
> 
> 标签：c#, .net, voice, lumisoft

我将此代码用于打开 wave 设备，并得到“无法打开 wave 设备”的异常。当我重置计算机时，它没有给出异常，第一次运行程序时它没问题，但之后每次运行都以例外 。

```
public WaveOut(WavOutDevice outputDevice,int samplesPerSec,int bitsPerSample,int channels)
        {
            if(outputDevice == null){
                throw new ArgumentNullException("outputDevice");
            }
            if(samplesPerSec < 8000){
                throw new ArgumentException("Argument 'samplesPerSec' value must be >= 8000.");
            }
            if(bitsPerSample < 8){
                throw new ArgumentException("Argument 'bitsPerSample' value must be >= 8.");
            }
            if(channels < 1){
                throw new ArgumentException("Argument 'channels' value must be >= 1.");
            }

            m_pOutDevice    = outputDevice;
            m_SamplesPerSec = samplesPerSec;
            m_BitsPerSample = bitsPerSample;
            m_Channels      = channels;
            m_BlockSize     = m_Channels * (m_BitsPerSample / 8);
            m_pPlayItems    = new List<PlayItem>();

            // Try to open wav device.            
            WAVEFORMATEX format = new WAVEFORMATEX();
            format.wFormatTag      = WavFormat.PCM;
            format.nChannels       = (ushort)m_Channels;
            format.nSamplesPerSec  = (uint)samplesPerSec;                        
            format.nAvgBytesPerSec = (uint)(m_SamplesPerSec * m_Channels * (m_BitsPerSample / 8));
            format.nBlockAlign     = (ushort)m_BlockSize;
            format.wBitsPerSample  = (ushort)m_BitsPerSample;
            format.cbSize          = 0; 
            // We must delegate reference, otherwise GC will collect it.
            m_pWaveOutProc = new waveOutProc(this.OnWaveOutProc);
            int result = WavMethods.waveOutOpen(out m_pWavDevHandle,m_pOutDevice.Index,format,m_pWaveOutProc,0,WavConstants.CALLBACK_FUNCTION);

            if(result != MMSYSERR.NOERROR){
                throw new Exception("Failed to open wav device, error: " + result.ToString() + ".");
            }
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T09:37:30.873

尽管我对 c# 中的 wav 设备几乎没有经验，但我认为您的问题与程序关闭时不关闭设备有关。

你需要一个电话

```
WavMethods.waveOutClose(m_pWavDevHandle); 
```

在您的应用程序退出之前的某个地方（如果 waveOutoOpen 调用失败，显然不需要）

# .net - GC是.net中的一个线程吗

> ID：14701983
> 
> 赞同：2
> 
> 时间：2013-02-05T07:11:00.577
> 
> 标签：.net

> 垃圾收集是java中的守护线程。
> 我有一个很大的困惑，垃圾收集也是Dot net中的一个线程吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:13:53.920

垃圾收集器在 .NET 或 Java 中都不是“线程”。*在这两个平台上，垃圾收集器使用*另一个线程（或可能是多个线程）——例如，在其上运行终结器。实际的垃圾收集*也*可以在单独的线程上执行。但这并不意味着垃圾收集器*是*一个守护线程，正如 Web 服务器是一个线程一样。

（如果您只是想知道 .NET 中的垃圾收集器除了您的应用程序创建的任何线程之外是否还需要至少一个线程，那么答案是肯定的……但是您需要清楚自己究竟是什么'感兴趣。）

# jboss7.x - 检测集群节点故障 Jboss AS 7.1.1-Final

> ID：14701998
> 
> 赞同：0
> 
> 时间：2013-02-05T07:12:20.567
> 
> 标签：jboss7.x, infinispan

我在 Jboss AS 7.1.1-Final 中配置了 2 个节点集群。我打算使用粘性会话。同时，我还在 Infinispan 缓存中记录了活跃在线用户的数量，节点 IP 来自该用户会话的创建位置，用于报告目的。

我已经处理了登录/注销的场景，我将清除我们的缓存条目。问题是如果其中一个服务器节点出现故障，我需要编写清理例程以从缓存中清除该节点的此类记录。

一种选择是编写客户端并以特定间隔检查服务器是否还活着，否则会触发清理例程。这种方法可行，但我正在寻找更清洁的方法，如果我可以检测到服务器节点故障并通知其他活动节点，那么我可以进行清理。

从控制台我知道它会显示服务器何时关闭或启动。但是那个监听器会听这样的事件。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:13:04.000

如果您只需要知道节点何时离开某个服务器模块（在 JBoss 服务器内），您可以使用[ViewChanged 侦听器](http://docs.jboss.org/infinispan/5.1/apidocs/org/infinispan/notifications/Listener.html)

您无法在通过 REST 或 memcached 协议连接的客户端上获取此信息 - 使用 HotRod 协议是可行的，但非常 hackish，您必须覆盖*TransportFactory.updateServers*（可能只是扩展*TcpTransportFactory* - 请参阅配置属性 infinispan.client.hotrod.transport_factory）