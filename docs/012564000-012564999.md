# StackOverflow 问答 12564000-12564999

# c++ - 我如何让编译器识别这些字符

> ID：12564002
> 
> 赞同：0
> 
> 时间：2012-09-24T11:21:36.233
> 
> 标签：c++, file-io

我有一个文件，我想打印它的内容，但编译器无法识别以下内容：“/ . \ ____ \ \ _ -. " //"/ /__ - /__**\* _\_ *\ \" " **\ /\ _*** **\ . /_ *_* _** // **//" "** //_ */ \ \ _\ \ -* ****__** **" "********_** \ __ ***/ - /\ " "*** *\ -.\ \* ****\ /__****/ ." "\ \ _* \ \ -。\ **_ " "- \ *_* __****\* _\ `__ *\* **_ *\ " "。/* ___****// **/ /*** // **_** / "**************

 ******这是我的代码：

```
int main()
{
  MenuText text;
  string test = "Champion";
  ofstream output("File.txt");
  text.save(output);
  fstream output ("File.txt");
  text.load("File.txt");//This is an error.
  text.print();

MenuText::MenuText()
{
    mText = "Default";

}
MenuText :: MenuText(string text)
{
mText = text;
}
void MenuText::print()
{
cout<< "Story= " << mText<< endl;
cout<< endl;
}
void MenuText::save(ofstream& outFile)
{
outFile<<   "/         .   \  \____    \\   \\    _ -. "
            //"/    /__        -    \/\_______\\__\\__\ \"
            "__\  /\   __   \     .      \/_______//__//"
            "__/\/__/ \  \   \_\  \       -   ________  "
            "___    ___  ______  \  \_____/     -  /\    "
            "__    \\   -.\    \\   ___\ \/_____/    ."
            "\  \  \__\   \\   \-.      \\   __\_        "
            "-   \ _\_______\\__\  `\___\\_____\           "
            ".     \/_______//__/    /___//_____/ "<< mText<< endl;
cout<< endl;
outFile<< endl;
}
void MenuText::load(ifstream& inFile)
{
string garbage;
inFile>> garbage >> mText;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:24:04.380

您需要避免出现`\`as `\\`。在你想要其中两个的地方，你需要同时逃脱 - `\\\\`。

另请注意，第二行已被注释掉：

```
//"/    /__        -    \/\_______\\__\\__\ \" 
```

关于什么：

```
 "/         .   \\  \\____    \\\\   \\\\    _ -. "
        "/    /__        -    \\/\\_______\\\\__\\\\__\\ \\"
        "__\\  /\\   __   \\     .      \\/_______//__//"
        "__/\\/__/ \\  \\   \\_\\  \\       -   ________  "
        "___    ___  ______  \\  \\_____/     -  /\\    "
        "__    \\\\   -.\\    \\\\   ___\\ \\/_____/    ."
        "\\  \\  \\__\\   \\\\   \\-.      \\\\   __\\_        "
        "-   \\ _\\_______\\\\__\\  `\\___\\\\_____\\           "
        ".     \\/_______//__/    /___//_____/ "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:24:51.323

`\`是文字字符串中的转义字符。如果要表示反斜杠，则需要为每次出现应用两次：

```
\ => \\
\\ => \\\\ 
```

`"`文字字符串中的字符也需要转义`\"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:27:08.727

编译器将任何`\<any_symbol>`对视为[控制字符](http://en.wikipedia.org/wiki/Control_character)，例如`\n`换行符和`\t`制表符。因此每次使用反斜杠时，编译器都会尝试解释它，并将下一个符号作为控制字符。

为避免这种情况，您必须用另一个反斜杠*转义*每个反斜杠，因此每次要使用`\`时，都需要将其替换为`\\`. 当然，如果您想使用多个反斜杠，则需要对它们中的每一个进行转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:31:23.550

假设“不识别”意味着类似于“替换某些字符”的内容，或者它包含非法转义序列：反斜杠`\`是某些特殊字符的前缀。您既不需要将其转义，也不需要`\\`使用 C++ 2011，您可以使用原始字符串。例如，`"\\"`abd`R"(\)"`都应该产生一个反斜杠。******

# regex - 需要正则表达式来解析 Apache 文件

> ID：12564003
> 
> 赞同：0
> 
> 时间：2012-09-24T11:21:37.873
> 
> 标签：regex, apache

我需要一个正则表达式来解析 Apache 文件

```
 For example:
 Here is a portion of a /var/log/httpd/error_log

[Sun Sep 02 03:34:01 2012] [notice] Digest: done
[Sun Sep 02 03:34:01 2012] [notice] Apache/2.2.15 (Unix) DAV/2 mod_ssl/2.2.15 OpenSSL/1.0.0- fips SVN/1.6.11 configured -- resuming normal operations
[Sun Sep 02 03:34:01 2012] [error] avahi_entry_group_add_service_strlst("localhost") failed: Invalid host name
[Sun Sep 02 08:01:14 2012] [error] [client 216.244.73.194] File does not exist: /var/www/html/manager
[Sun Sep 02 11:04:35 2012] [error] [client 58.218.199.250] File does not exist: /var/www/html/proxy 
```

我想要一个包含空格作为分隔符并排除嵌入空间的正则表达式。并且 apache 错误日志格式在

```
[DAY MMM DD HH:MM:SS YYYY] [MSG_TYPE] DESCRIPTOR: MESSAGE

[DAY MMM DD HH:MM:SS YYYY] [MSG_TYPE] [SOURCE IP] ERROR: DETAIL 
```

我创建了 2 个正则表达式，第一个是

```
^(\[[\w:\s]+\]) (\[[\w]+\]) (\[[\w\d.\s]+\])?([\w\s/.(")-]+[\-:]) ([\w/\s]+)$ 
```

这个很简单，只需按原样匹配内容即可

我想要类似于我创建的以下正则表达式

```
 (?<=|\s)([\w:\S]+) 
```

这个没有给我想要的输出，它不包括嵌入式空间。所以我需要一个正则表达式，它对每个字段进行分组，包括嵌入空间并使用空间作为分隔符。请帮我解释一下逻辑！！！！

我的代码

```
void regexparser( CharBuffer cb)
{ try{
    Pattern linePattern = Pattern.compile(".*\r?\n");
    Pattern csvpat = Pattern.compile( "^\\[([\\w:\\s]+)\\] \\[([\\w]+)\\] (\\[([\\w\\d.\\s]+)\\])?([\\w\\s/.(\")-]+[\\-:]) ([\\w/\\s].+)",Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE | Pattern.MULTILINE);
    Matcher lm = linePattern.matcher(cb);
    Matcher pm = null;

    while(lm.find())
    {   //System.out.print("1st loop");
        CharSequence cs = lm.group();

        if (pm==null)
            pm = csvpat.matcher(cs);
            else
                pm.reset(cs);
        while(pm.find())
        {  // System.out.println("2nd loop");
                //System.out.println(pm.groupCount());
                //CharSequence ps = pm.group();
                //System.out.print(ps);
            if(pm.group(4)==null)
                System.out.println(pm.group(1)+" "+pm.group(2)+" "+pm.group(5)+" "+pm.group(6));
            else
                System.out.println(pm.group(1)+" "+pm.group(2)+" "+pm.group(4)+" "+pm.group(5)+" "+pm.group(6)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:32:10.327

我同意这项任务应该使用现有的解析 Apache 日志的解决方案来完成。

但是，如果您想尝试一些用于培训目的的东西，也许您想从这个开始。我不是在一个巨大的正则表达式中解析所有内容，而是以更易读的小步骤进行：

## 代码

```
#!/usr/bin/env perl

use strict;
use warnings;
use DateTime::Format::Strptime;
use feature 'say';

# iterate log lines
while (defined(my $line = <DATA>)) {
    chomp $line;

    # prepare
    my %data;
    my $strp = DateTime::Format::Strptime->new(
        pattern => '%a %b %d %H:%M:%S %Y',
    );

    # consume date/time
    next unless $line =~ s/^\[(\w+ \w+ \d+ \d\d:\d\d:\d\d \d{4})\] //;
    $data{date} = $strp->parse_datetime($1);

    # consume message type
    next unless $line =~ s/^\[(\w+)\] //;
    $data{type} = $1;

    # "[source ip]" alternative
    if ($line =~ s/^\[(\w+) ([\d\.]+)\] //) {
        @data{qw(source ip)} = ($1, $2);

        # consume "error: detail"
        next unless $line =~ s/([^:]+): (.*)//;
        @data{qw(error detail)} = ($1, $2);
    }

    # "descriptor: message" alternative
    elsif ($line =~ s/^([^:]+): (.*)//) {
        @data{qw(descriptor message)} = ($1, $2);
    }

    # invalid
    else {
        next;
    }

    # something left: invalid
    next if length $line;

    # parsed ok: output
    say "$_: $data{$_}" for keys %data;
    say '-' x 40;
}

__DATA__
[Sun Sep 02 03:34:01 2012] [notice] Digest: done
[Sun Sep 02 03:34:01 2012] [notice] Apache/2.2.15 (Unix) DAV/2 mod_ssl/2.2.15 OpenSSL/1.0.0- fips SVN/1.6.11 configured -- resuming normal operations
[Sun Sep 02 03:34:01 2012] [error] avahi_entry_group_add_service_strlst("localhost") failed: Invalid host name
[Sun Sep 02 08:01:14 2012] [error] [client 216.244.73.194] File does not exist: /var/www/html/manager
[Sun Sep 02 11:04:35 2012] [error] [client 58.218.199.250] File does not exist: /var/www/html/proxy 
```

## 输出

```
descriptor: Digest
date: 2012-09-02T03:34:01
type: notice
message: done
----------------------------------------
descriptor: avahi_entry_group_add_service_strlst("localhost") failed
date: 2012-09-02T03:34:01
type: error
message: Invalid host name
----------------------------------------
detail: /var/www/html/manager
source: client
ip: 216.244.73.194
date: 2012-09-02T08:01:14
error: File does not exist
type: error
----------------------------------------
detail: /var/www/html/proxy
source: client
ip: 58.218.199.250
date: 2012-09-02T11:04:35
error: File does not exist
type: error
---------------------------------------- 
```

请注意，根据您的格式描述，第二行无效并被程序忽略。

# java - xsd:自定义类型的list生成到List中

> ID：12564004
> 
> 赞同：6
> 
> 时间：2012-09-24T11:21:38.823
> 
> 标签：java, xsd, jaxb

我们有一个带有如下声明的 xsd 模式：

```
<xsd:simpleType name="customId">
    <xsd:annotation>
        <xsd:appinfo>
            <jaxb:javaType name="com.company.identifiers.CustomId" parseMethod="fromString" printMethod="toString"/>
        </xsd:appinfo>
    </xsd:annotation>
    <xsd:restriction base="xsd:int" />
</xsd:simpleType> 
```

然后，我想在生成的 Java 类中有一个这种类型的列表：

```
<xsd:complexType name="SomeMessage">
    ...
<xsd:attribute name="customIds" use="optional">
        <xsd:simpleType>
            <xsd:list itemType="customId" />
        </xsd:simpleType>
</xsd:attribute>
    ...
</xsd:complexType> 
```

但是由于`customIds`某种原因，该字段生成为`List<String>`。

我想，`xsd:sequence`可以用来代替`xsd:list`，但`SomeMessage`已经有一个`xsd:choice`，据我所知，`xsd:sequence`在同一个声明中是非法的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:02:01.583

使用 NetBeans 7.1.2 生成的代码，在 Java 1.7.0_02 上运行。

如果要将简单类型映射到 Java 类，一种方法是全局设置`mapSimpleTypeDef="true"`

```
<xsd:annotation>
    <xsd:appinfo>
        <jaxb:globalBindings mapSimpleTypeDef="true"/>
    </xsd:appinfo>
</xsd:annotation> 
```

生成的代码：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "SomeMessage")
public class SomeMessage {

    @XmlAttribute(name = "customIds")
    protected List<CustomId> customIds;

    /**
     * Gets the value of the customIds property.
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link CustomId }
     * 
     * 
     */
    public List<CustomId> getCustomIds() {
        if (customIds == null) {
            customIds = new ArrayList<CustomId>();
        }
        return this.customIds;
    }

} 
```

如果您想引用预先存在的 CustomId 类，那么在我的情况下可以使用以下方法：

```
<xsd:simpleType name="customId">
    <xsd:restriction base="xsd:int"/>
</xsd:simpleType>
<xsd:complexType name="SomeMessage">
    <xsd:attribute name="customIds" use="optional">
        <xsd:simpleType>
            <xsd:annotation>
                <xsd:appinfo>
                    <jaxb:javaType name="java.util.List&lt;com.company.identifiers.CustomId>" parseMethod="Class1.fromString" printMethod="Class1.toString"/>
                </xsd:appinfo>
            </xsd:annotation>
            <xsd:list itemType="customId"/>
        </xsd:simpleType>
    </xsd:attribute>
</xsd:complexType> 
```

您将获得以下信息：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "SomeMessage")
public class SomeMessage {

    @XmlAttribute(name = "customIds")
    @XmlJavaTypeAdapter(Adapter1 .class)
    protected List<CustomId> customIds;

    /**
     * Gets the value of the customIds property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public List<CustomId> getCustomIds() {
        return customIds;
    }

    /**
     * Sets the value of the customIds property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setCustomIds(List<CustomId> value) {
        this.customIds = value;
    }

} 
```

以及生成的Adapter1：

```
public class Adapter1
    extends XmlAdapter<String, List<CustomId>>
{

    public List<CustomId> unmarshal(String value) {
        return (Class1.fromString(value));
    }

    public String marshal(List<CustomId> value) {
        return (Class1.toString(value));
    }

} 
```

# google-app-engine - AppEngine 定价和 IO 等待

> ID：12564006
> 
> 赞同：2
> 
> 时间：2012-09-24T11:21:45.873
> 
> 标签：google-app-engine, amazon-ec2, hosting, cloud-hosting

AppEngine 定价与单核实例的 Amazon EC2 定价相似

```
AppEngine  - $0.08 / hour
Amazon EC2 - Small (Default)    $0.080 per Hour 
```

但是我的脚本在等待 IO 时，似乎要付出时间。我希望为实际的 CPU 周期付费，而不是等待。当我的脚本等待 DataStore 或 URL 获取时，其他脚本可能会在同一内核上执行。在我的测试用例中，97-99% 的时间是脚本等待 IO。那么，如果我在 EC2 或专用服务器上运行，我是否必须支付比预期多 70-100 倍的费用？

我认为 AppEngine 适合可扩展的应用程序，但如果我的流量很高，那将是一个杀戮法案。低托管成本和可扩展的平台很重要。与 Amazon EC2 相比，我对 AppEngine 定价的估计是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:55:53.437

您可以为 java 或 python 2.7 应用程序打开 multithreadind。在多线程模式下，每个实例可以同时处理 8-10 个请求。

Python： [https ://developers.google.com/appengine/docs/python/config/appconfig#Using_Concurrent_Requests](https://developers.google.com/appengine/docs/python/config/appconfig#Using_Concurrent_Requests)

Java： [https ://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)

# android - 我的应用程序 UI 挂起

> ID：12564010
> 
> 赞同：0
> 
> 时间：2012-09-24T11:21:57.557
> 
> 标签：android

我正在编写一个 android 应用程序，其中我有 1 个**按钮**和 1 个**进度条**作为 UI 元素。

这个应用程序的主要目的是当用户按下这个按钮时，它必须创建一个包含所有自定义格式的电话簿联系人的数据库，这意味着我正在阅读联系人数据库并根据我的要求进行操作。

所以我使用**SQLiteOpenHelper**进行数据库操作。我编写了一个方法**downloadPhonebook()**来执行所有必需的操作。我编写了应用程序，当用户按下按钮时，我使进度条可见并调用此方法。

在这种情况下，用户界面在单击按钮后挂起，并在 15 秒后显示带有**强制关闭**和**等待按钮的对话框。**

为了避免这种情况，我尝试了以下机制。

-> 广播按钮点击消息并调用方法downloadPhonebook()。这里没有用，出现同样的问题。

-> 使用 Thread 和 AsyncTask 调用此方法，这里我遇到了 Runtime 异常，例如**Couldn't create Handler inside a Thread, Looper.prepare not called**。我尝试调用 Looper.prepare() 和 Looper.loop() 甚至发生异常。

-> 我尝试使用 Android 服务和广播意图，同样的问题 UI 再次挂起。

如果有人遇到这个问题或知道解决方案或知道如何使用 Looper.prepare 和 Looper.loop，请回复我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:28:34.170

工作流应该是这样的：在你的主类中创建一个处理程序，在你的 sql 助手类中添加一个处理程序，在你创建它时将主类的处理程序传递给 sql 助手类。在主类的单独线程上运行下载，下载准备好后，调用`yourHandler.sendEmptyMessage(0)`. 您应该覆盖`Handler.handleMessage`主类中的（我不确定方法的确切名称）。您还可以发送消息以更新进度，阅读有关[Andoid Handler](http://developer.android.com/reference/android/os/Handler.html)的更多信息

# recursion - 这个长度≤1怎么做不止一次？

> ID：12564013
> 
> 赞同：2
> 
> 时间：2012-09-24T11:22:09.010
> 
> 标签：recursion, scheme, y-combinator, the-little-schemer, anonymous-recursion

我花了一天时间阅读**The Little Schemer**`length≤1`一书中的第 166 页；有以下代码：

 **```
(((lambda (mk-length)
    (mk-length mk-length))
  (lambda (mk-length)
   (lambda (l)
    (cond
      ((null? l) 0)
      (else (add1 
           ((mk-length eternity)
            (cdr l))))))))
 l) 
```

其中`l`is`(apples)`和`eternity`is 如下：

```
(define eternity 
  (lambda (x)
    (eternity x))) 
```

第 166 页（第 4 版）指出：

> 当我们申请`mk-length`一次时，我们得到`length≤1`

进而

> 我们可以多次这样做吗？

但我不知道如何做到这一点`length≤2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T22:59:08.370

假设`l`是`(apples oranges)`，那么它将像这样评估（注意`mk-length`绑定到`(lambda (mk-length) ...)`函数本身：

```
(cond ((null? l) 0) 
      (else (add1 ((mk-length eternity) (cdr l)))))
==>
(add1 ((mk-length eternity) '(oranges)))
==>
(add1 ((lambda (l) (cond ((null? l) 0
                          (else (add1 ((eternity eternity) (cdr l))))))))
==>
(add1 (add1 ((eternity eternity) '()))) 
```

所以在这里，经过两个步骤，`eternity`最终被应用，但我们想要的是它调用`mk-length`. 所以在原始函数中，如果我们替换`eternity`为`mk-length`，那么我写的最后一步将包含`(mk-length mk-length)`而不是`(eternity eternity)`，从而允许计算继续进行。**

# textarea - Javafx 下划线和/或着色文本区域面板中的部分文本

> ID：12564015
> 
> 赞同：1
> 
> 时间：2012-09-24T11:22:17.310
> 
> 标签：textarea, javafx

> **可能重复：**
> [突出显示 JavaFX TextArea 中的字符串](https://stackoverflow.com/questions/9128535/highlighting-strings-in-javafx-textarea)

我正在开发一个 javafx 用户界面。我必须在文本区域面板（javafx.scene.control.TextArea）中为部分文本加下划线/着色。

选择部分文本作为字符串很简单。但我不知道如何为这部分着色和/或下划线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:42:03.573

@jean

更改在 TextArea 中选择的文本的颜色非常容易。您必须为此添加 CSS。为 textarea foreg 添加新的样式类。“我的地盘”

## CSS部分：

```
.myarea{    
    -fx-highlight-fill: green; /* makes color of highlight region */
    -fx-highlight-text-fill: white;  /* makes the color of highlighted text */
} 
```

您不能在选定的 TextArea 字符串下划线，因为它没有在 JavaFX TextArea CSS 核心类中定义。

-纳拉扬

# wordpress - 在 Wordpress 上获取帖子大小

> ID：12564017
> 
> 赞同：0
> 
> 时间：2012-09-24T11:22:24.190
> 
> 标签：wordpress

有没有合适的方法来找出 Wordpress 中一篇文章的大小？是否有插件或类似的东西，甚至有办法在 phpmyadmin 上找到它？

编辑：我可以`average_row_length`在 phpmyadmin 中获取表格，但我只想为 ONE ROW 执行此操作（因此没有平均值，而是精确的大小）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:20:42.127

愚蠢的解决方案：

1.  打开 phpmyadmin
2.  导航到 wp_posts
3.  单击要检查的行旁边的复选标记。
4.  向下滚动并单击表格底部的导出图标。
5.  检查导出行的文件大小。

或者，您可以根据字段的长度对表格进行排序，例如`post_content`：

```
SELECT * 
FROM  `wp_posts` 
ORDER BY LENGTH(  'post_content' ) DESC 
```

这只是发布内容……很多数据也被保存到 wp_postmeta 表中，所以我不确定这种思路有多大用处。

# django - 编辑 Django 评论

> ID：12564023
> 
> 赞同：0
> 
> 时间：2012-09-24T11:22:42.917
> 
> 标签：django, django-comments, django-contrib

我正在尝试编辑现有评论（即用新评论替换旧评论）。我的评论应用是 django.contrib.comments。

```
new_comment = form.cleaned_data['comment']

#all of the comments for this particular review
comments = Comment.objects.for_model(Review).filter(object_pk=review_id)

print comments[0].comment
#'old comment'

comments[0].comment = new_comment

print comments[0].comment
#'old comment' is still printed 
```

为什么评论没有被新评论更新？

谢谢你。

编辑：调用`comments[0].save()` 然后`print comments[0].comment`，仍然打印`'old comment'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:25:50.727

您需要保存该值

```
comments = comments[0]    
comments.comment = new_comment
comments.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:30:38.607

这与评论无关。只是每次切片时都会重新评估查询集。因此`comments[0]`，您更改的第一个与第二个不同 - 第二个是从数据库中再次获取的。这会起作用：

```
comments = Comment.objects.for_model(Review).filter(object_pk=review_id)
comment = comments[0]
comment.comment = new_comment 
```

现在您可以根据需要保存或打印`comment`。

# ant - objectify4 构建破坏

> ID：12564030
> 
> 赞同：0
> 
> 时间：2012-09-24T11:23:01.617
> 
> 标签：ant, objectify

嗨，我使用`git clone https://code.google.com/p/objectify-appengine/` 运行时克隆了存储库，`ant jar`但出现以下错误-

```
D:\gae\objectify4\objectify-appengine\build.xml:76: Problem: failed to create task or type antlib:org.apache.ivy.ant:cachepath
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet

This appears to be an antlib declaration.
Action: Check that the implementing library exists in one of:
        -E:\Softwares\apache-ant-1.8.4\lib
        -C:\Users\shwetanka\.ant\lib
        -a directory added on the command line with the -lib argument 
```

需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:17:04.103

编辑：忽略这个答案，构建现在是基于 Gradle 的。安装 Gradle 并运行“gradle build”。wiki 已更新： [https ://code.google.com/p/objectify-appengine/wiki/ContributingToObjectify](https://code.google.com/p/objectify-appengine/wiki/ContributingToObjectify)

* * *

哇，时间好快！我昨天将构建切换到 Ivy，但尚未更新文档。

下载 Ivy 并将 ivy jar 复制到 ~/.ant/lib。然后你应该能够构建。没有其他配置要求（edit-this-to-build.properties 已被删除）。

如果您想在 Eclipse 中使用 Objectify，请下载 IvyIDE。

在接下来的几天里，构建系统将会有更多的变化，因为我想出了如何让 Ivy 签署并将工件发布到 Maven Central。

顺便说一句：为了获得更快的响应，请发布到 Objectify Google Group。

# php - 为什么 netbeans 和 PHP 都不会从这段代码中报告错误

> ID：12564032
> 
> 赞同：0
> 
> 时间：2012-09-24T11:23:02.627
> 
> 标签：php

为什么 netbeans 和 PHP 都不会从这段代码中报告错误：

```
public function __construct ()
{
global $blog;
$this->_blog_id = $blog->blog_id;
$this->_post_amount = $blog->
$this->_limit_per_page = $blog->config_get('posts_limit_per_page');
$this->_short_sign_limit = $blog->config_get('posts_short_sign_limit');
} 
```

我打了一个电话，忘记了那条未完成的第三行，保存了我的工作，网站默默地死在上面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:24:38.743

```
$this->_post_amount = $blog->
$this->_limit_per_page = $blog->config_get('posts_limit_per_page'); 
```

也可以写成

```
$this->_post_amount = $blog->$this->_limit_per_page = $blog->config_get('posts_limit_per_page'); 
```

这没有任何意义，但完全有效。

但是，在您的情况下，它会破坏您的脚本，因为`$instance->$other_instance`不使用`__toString`方法会导致此错误：`Object of class Test could not be converted to string`. 您的 IDE 不会对此进行检查，因为它确实是一种边缘情况，并且一旦不是，`$this->$this`但例如作为另一个函数的返回值，几乎不可能知道可以是什么。`$this->$that``$that``$that`

* * *

这是一些示例代码，可以证明`$this->$this`实际上如何正常工作：

```
<?php
class Foo {
    public $foo = 'bar';
}

class Test {
    private $xyz;
    function __construct() {
        $this->xyz = new Foo();
    }
    function __toString() {
        return 'xyz';
    }
    function run() {
        echo $this->$this->foo;
    }
}

$t = new Test();
$t->run(); 
```

该`$this->$this`语句将导致`__toString`被用于第二个`$this`，因此它将等同于`$this->xyz`因此整行将最终成为`echo $this->xyz->foo;`有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:25:18.247

这是因为你在技术上做

```
$this->_post_amount = $blog->{$this->_limit_per_page} = $blog->config_get('posts_limit_per_page'); 
```

这是有效的。

# android - 适用于 Android 和 Iphone 的相同 Titanium 代码库

> ID：12564033
> 
> 赞同：4
> 
> 时间：2012-09-24T11:23:03.470
> 
> 标签：android, iphone, titanium

我一直在尝试为 Iphone 和 Android 创建一个用于中级应用程序的代码库。（4 个选项卡、多个窗口、地图等）使用 itanium 2.1 API。但是，我发现 Android 平台上的东西不像在 Iphone 上那样顺利或心甘情愿地工作，尤其是 tableviews 和 UI 元素。Android 上的 UI 响应速度也很慢。厨房水槽的例子非常简单。我正在寻找一个企业级应用程序，该应用程序必须至少在未来几年内维护。有没有人在类似的平台上工作过，并成功地从 SAME 代码库创建功能齐全的 iOS 和 Android 应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:22:37.713

我使用编译时 CommonJS 机制获得了很大的成功，该机制拥有一个根视图，然后具有特定于操作系统的功能。

例如，我的独立于操作系统的视图可能是**ui/MyView.js**：

```
var createAddButton = require("ui/MyView.AddButton");

var MyView = function() {
    var self = Ti.UI.createWindow();
    createAddButton(self, function() { alert('ADD!'); });
    return self;
};

module.exports = MyView; 
```

然后，我创建特定于操作系统的函数来处理它：

**iphone/ui/MyView.AddButton.js**

```
module.exports = function(view, addHandler) {
    var addButton = Titanium.UI.createButton({
        systemButton: Titanium.UI.iPhone.SystemButton.ADD
    });

    addButton.addEventListener("click", addHandler);

    view.rightNavButton = addButton;
}; 
```

**android/ui/MyView.AddButton.js**

```
module.exports = function(view, addHandler) {
    view.activity.onCreateOptionsMenu = function(e){
        var menuItem = e.menu.add({ title: "Add" });
        menuItem.addEventListener("click", addHandler);
    }; 
}; 
```

他们实现的 CommonJS 系统将选择适当版本的**MyView.AddButton.js**，以便将按钮添加到正确的位置。它允许大多数视图是相同的，但特定于操作系统的东西可以正确分离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:51:26.790

Titanium 并不适用于所有人的 1 个代码库。你确实需要为每个操作系统重写东西。然而，一些应用程序开发人员声称已经重用了 95% 的代码。所以只有 5% 的代码是特定于操作系统的。但我确信他们的代码充满了 if-else。

我建议做的是能够正确维护它，而无需成千上万的 if-else 构造，是构建一个后端核心，并专门为每个操作系统的 UI 相关事务编写代码。这样，您就有了一些适用于 Android 的 UI 相关代码、适用于 iOS 的 UI 相关代码和 1 个适用于两者的核心。

由于 Android 和 iOS 差异很大，编写一个单一的代码库将确保您永远不会使用操作系统特定的功能（如 android 硬件菜单按钮或 iOS NavigationGroup），并且会让 UI 看起来不直观。

# eclipse - 用于复杂语法的一部分的简单 Xtext 编辑器

> ID：12564037
> 
> 赞同：1
> 
> 时间：2012-09-24T11:23:15.237
> 
> 标签：eclipse, grammar, dsl, xtext

我有一个复杂的 Xtext 语法，可以说简化版本如下所示：

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.common.Terminals
generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

ComplexGrammar:
    'Define Complex Grammar'
    (
        'Define Some Value {' someValues+=SomeValue+ '}'
        & 'Define Parts {' requiredParts+=RequiredPart+ '}'
        & 'Define FeatureX {' xfeatures+=FeatureX+ '}'
        & 'Define FeatureY {' yfeatures+=FeatureY+ '}'
    )
    'End'
;

RequiredPart:
    'Part' name=ID ';'
;

FeatureX:
    // I need this part of the grammar in a single editor.
    // It should support the Xtext validation to show errors.
    // The editor should only use FeatureX instead of the whole grammar.
    // But it also needs RequiredPart which is necessary for the complex grammar, too.
    'Here it requires' requiredPart = [RequiredPart]
;

FeatureY:
    // The same like FeatureX, but for FeatureY
    'Requires' requires = [RequiredPart] 'for FeatureY, too!'
;

SomeValue:
    // This part is not required by FeatureX or FeatureY
    // But it is required for the ComplexGrammar
    'Unimportant' name=ID 'Value' value=Double ';'
;

Double returns ecore::EDouble:
    '-'? INT? '.' INT
; 
```

现在我喜欢将编辑器集成到 Eclipse FormPage 中。我不需要编辑器来编辑整个语法，因为这对用户来说太复杂了。

**我需要**的是“FeatureX”和“FeatureY”的编辑器。两者都应该是单独的编辑器，并且“FeatureX”编辑器中的 Xtext 验证应该只检查语法部分“FeatureX”的错误。换句话说：我需要一个语法的一部分的编辑器，它只检查给定语法部分的错误，它应该支持简单的自动完成。

我有**想法**使用类似“ComplexGrammar”的虚拟对象来确保不违反语法的其余部分，但目前我不知道如何使用虚拟资源打开我的编辑器并只显示编辑器“特征 X”。

希望你能给我一些想法或例子。提前致谢。

迈克尔

**[编辑]**我稍微更改了上面的语法，因为该示例没有显示一个必需的功能：我的“ComplexGrammar”定义了“RequiredPart”，“FeatureX”和“FeatureY”也需要它。

首先是“ComplexGrammar”语法的完整示例：

```
Define Complex Grammar
    Define Parts {
        Part GlobalPartA ;
        Part GlobalPartB ;
    }

    Define FeatureX {
        Here it requires GlobalPartA  
    }

    Define FeatureY {
        Requires GlobalPartA for FeatureY, too!

        Requires GlobalPartB for FeatureY, too!
    }

    Define Some Value {
        Unimportant ObjName Value 1.0 ;
    }

End 
```

但是我的编辑器应该只为这个语法的一部分工作，例如“FeatureY”：

```
Define FeatureY {
    Requires GlobalPartA for FeatureY, too!

    Requires GlobalPartB for FeatureY, too!
} 
```

如果我分开我的语法（就像 Bananeweizen 说的那样），我怎么能定义“RequiredPart”？我是否也在单独的语法中定义它 - 然后我在两个语法中导入语法？还有其他想法如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:06:55.580

如果语法的那一小部分是自包含的，那么您可以将其移动到自己单独的语法定义中，并让您的复杂语法导入它（就像您导入 ecore 定义一样）。

区分复杂文​​法和简化文法的重要部分是允许复杂文法规则引用简化文法中的类型和规则，但不能反过来。

为了使这一切在实践中发挥作用，有必要对 MWE 工作流程进行一些调整。这里我不能真正参考具体的说明，可能是[这个变化](http://www.eclipse.org/forums/index.php/t/239664/)。

# c++ - 替代 inotify 以检测何时在文件夹下创建新文件

> ID：12564039
> 
> 赞同：1
> 
> 时间：2012-09-24T11:23:16.793
> 
> 标签：c++, linux, inotify

我正在 Linux 上开发我的程序，是否有一种编程方式来检测另一个应用程序何时在特定文件夹下创建/复制文件。我想在创建新文件时尽快检测到它，并且我想处理该文件。

据我研究，我可以使用 inotify 完成此操作。有没有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-26T12:01:48.213

[http://en.highscore.de/cpp/boost/asio.html](http://en.highscore.de/cpp/boost/asio.html)上的[http://www.highscore.de/boost/dir_monitor.zip](http://www.highscore.de/boost/dir_monitor.zip)是一个跨平台的 C++ Boost 解决方案，虽然我还没有尝试过.

[http://boost.2283326.n4.nabble.com/ASIO-file-monitoring-help-td4645105.html](http://boost.2283326.n4.nabble.com/ASIO-file-monitoring-help-td4645105.html)的代码使用它是错误的，修复看起来是让作者假设的更多对象可能是临时的而是永久的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:07:35.477

inotify 是 Linux 内核提供的适当 API。您的工具包可能在它之上具有便利性，例如`KDirWatch`来自 libkdecore，但它在内部使用 inotify。

当您的程序是跨平台的时，使用工具包中的 API 是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-20T06:57:02.143

[http://man7.org/linux/man-pages/man7/fanotify.7.html](http://man7.org/linux/man-pages/man7/fanotify.7.html)是另一种选择

这是一篇很好的文章，总结了所有方法[http://www.lanedo.com/filesystem-monitoring-linux-kernel/](http://www.lanedo.com/filesystem-monitoring-linux-kernel/)

# php - 动态安排 PHP 脚本执行

> ID：12564040
> 
> 赞同：3
> 
> 时间：2012-09-24T11:23:25.830
> 
> 标签：php, cron

我认为 Cron 可能是最好的答案，但这项任务似乎令人生畏，而且我对 cron 知之甚少，我最好先问一下。

我正在为一个 iPhone 应用程序编写一个 API，该应用程序在一个组中安排共享任务。这将需要在不同时间发送推送通知。这是一个例子：

人员 A 为人员 B 分配一项任务，以在 n 天内完成。添加此任务后，通知人员 B 已分配任务，并在 n-1 天后发送提醒通知，如果在 n 天后未完成任务，则发送另一个通知提醒人员 B，他们未能完成任务任务。

我的假设是这个过程会是这样的：

*   当最初分配任务并将任务添加到数据库时，将调用一个 cron 调度脚本，该脚本将调度 2 个 cron 作业 - 1 个触发提醒通知，一个触发失败通知。
*   当任务完成时，它会调用另一个脚本，该脚本要么在数据库中将任务标记为已完成（或将其删除），然后取消调度 cron 作业。

我在这里离基地很远吗，还是这是最简单的方法？如果是 - 是否有任何 PHP 类可以更轻松地动态调度（和取消调度）cron 作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:40:41.203

您的主机可能会在您的主机控制面板中提供 cron 功能。我使用它的几次，我发现这是一种将要在服务器上运行的文件的路径然后从几个下拉菜单中选择频率的情况。从那里你走了..

至于解决方案，你可以作为一个非常简单的例子......

cron.php

```
<?php

/*

Steps
1 - Set any completed tasks to done
2 - Check if users need to be notified and send the notifications

*/

function send_notifications($email,$time_ends){

// insert code here to deal with sending the notification to the iphone

}

include("db.php"); // contains your MySQL connection vars or whatnot

// STEP 1 - Set any completed tasks to done
$update_db = mysql_query("UPDATE Notifications SET complete = '1' WHERE time_completed > '0000-00-00 00:00:00'");

// STEP 2 - Send any outstanding notifications out
$result = mysql_query("SELECT * FROM Notifications WHERE time_completed = '0000-00-00 00:00:00'"); // add another where clause to prevent bombarding with notifications for example " AND notification_2_days = '0'"
while($row = mysql_fetch_array($result))
{
  send_notifications($row['email'],$row['time_ends']);
  // insert an update query here to flag as a notification sent, you dont want to bombard
}

?> 
```

警告 - 为了简单起见，这是使用折旧的连接代码（查找 MySQL PDO 等），这缺乏任何类型的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:26:21.127

你可以有一个每天触发一次的 cron 作业。

如果需要发送提醒（例如今天是 n-1 天，则发送通知），这会遍历数据库中的数据。

如果该日期已过且尚未完成，则它可以发送失败通知。

如果任务完成，那么您可以更改该 cron 任务中的数据库，或者更频繁地触发的单独的数据库。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:31:14.160

我最近在一个邮件队列上工作，我实现它如下：有一个 cron 作业每分钟触发一个脚本，检查数据库是否包含队列中的任何电子邮件。如果找到它们，脚本会将它们发送出去。

还有另一个 cron 作业，每天都会触发，它将预定的电子邮件添加到数据库中（在指定的时间，何时发送出去）。

因此，有一个每日 cron 作业会生成要在不同时间处理的作业，还有另一个会不断运行并处理队列中的作业。

添加一些优先级机制也很容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:29:35.843

我的建议是：确定所需的最快响应是什么（每分钟、每 10 分钟、每小时等）并在该时间范围内运行 cron 脚本。

脚本本身可以是 PHP，当脚本运行时，它会确定要做什么，需要什么操作等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-11T10:38:04.443

cron 非常适合定期运行的脚本，但是如果您希望在特定时间运行一次性（或两次）脚本，您可以使用 unix 'at' 命令，您可以直接从 php使用这样的代码：

```
/****
 * Schedule a command using the AT command
 *
 * To do this you need to ensure that the www-data user is allowed to
 * use the 'at' command - check this in /etc/at.deny
 *
 *
 * EXAMPLE USAGE ::
 *
 * scriptat( '/usr/bin/command-to-execute', 'time-to-run');
 * The time-to-run shoud be in this format: strftime("%Y%m%d%H%M", $unixtime)
 *
 **/

function scriptat( $cmd = null, $time = null ) {
    // Both parameters are required
    if (!$cmd) {
        error_log("******* ScriptAt: cmd not specified");
        return false;
    }
    if (!$time) {
        error_log("******* ScriptAt: time not specified");
        return false;
    }

    // We need to locate php (executable)
    if (!file_exists("/usr/bin/php")) {
        error_log("~ ScriptAt: Could not locate /usr/bin/php");
        return false;
    }

    $fullcmd = "/usr/bin/php -f $cmd";

    $r = popen("/usr/bin/at $time", "w");
    if (!$r) {
        error_log("~ ScriptAt: unable to open pipe for AT command");
        return false;
    }
    fwrite($r, $fullcmd);
    pclose($r);

    error_log("~ ScriptAt: cmd=${cmd} time=${time}");

    return true;
} 
```

# python - 使用函数 reversed 在 Python 中反转嵌套元组

> ID：12564043
> 
> 赞同：1
> 
> 时间：2012-09-24T11:23:28.790
> 
> 标签：python

我有一个元组，想在 Python 中反转它。

元组看起来像这样：`(2, (4, (1, (10, None))))`。

我尝试通过以下方式在 Python 中反转：

```
a = (2, (4, (1, (10, None))))
b = reversed(a) 
```

它返回给我：

```
<reversed object at 0x02C73270> 
```

我如何得到相反的`a`？或者我必须编写一个函数来做到这一点？

结果应如下所示：

```
((((None, 10), 1), 4), 2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:45:22.280

```
def my_reverser(x):
  try:
    x_ = x[::-1]
  except TypeError:
    return x
  else:
    return x if len(x) == 1 else tuple(my_reverser(e) for e in x_) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:46:56.337

试试这个深度反向函数：

```
def deep_reverse(t):
    return tuple(deep_reverse(x) if isinstance(x, tuple) else x 
                 for x in reversed(t)) 
```

这将处理任意嵌套的元组，而不仅仅是两个元组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T11:39:21.187

如[文档](http://docs.python.org/library/functions.html#reversed)中所述，该`reversed`函数返回一个迭代器（因此是`<reversed at ...>`）。如果您想从中获取列表或元组，只需使用`list(reversed(...))`or `tuple(reversed(...))`。

但是，这只是我们问题的一部分：您将初始对象反转`(2, (...))`为`(...,2)`，而`...`保持不变。您必须实现*递归*反转：如果输入元组的一个元素是可迭代的，则需要将其反转为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T11:42:44.343

`reversed`对不起，这样做没有意义。但是一个简单的递归函数会返回你想要的：

```
def reversedLinkedTuple(t):
  if t is None:
    return t
  a, b = t
  return reversedLinkedTuple(b), a 
```

`reversed`仅可用于可逆的可迭代对象，如列表、元组等。从 Python 内置`iter`.

您可以为您的链表编写一个包装类来实现这一点，然后提供一个反向迭代器，但我认为这将是矫枉过正并且不会真正满足您的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-14T09:45:11.733

```
def reverse(x):
    while x >= 0:
        print(x)

x = x = 1
reverse(x) 
```

# c# - 如何在 C# 中以编程方式添加新引用？

> ID：12564049
> 
> 赞同：0
> 
> 时间：2012-09-24T11:24:03.173
> 
> 标签：c#, asp.net, .net, c#-3.0, asp.net-3.5

我想在 C# 中以编程方式添加对 dll 文件的引用。我面临一个场景，将项目列表从框架 1.1 转换为框架 3.5。在转换它时，框架 3.5 显示了一些绝对方法，我需要转换它。即使我转换了这种绝对方法。

现在我需要通过编程方式为这个转换后的项目添加一个新的引用。

在转换自身时，我需要添加对项目的新引用。有没有办法通过 C# 代码添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:28:29.587

只需编辑您的项目文件（`csproject`）。在其简单的 XML 中

看起来像这样：

```
<Reference Include="log4net">
    <HintPath>..\packages\log4net.2.0.0\lib\net40-client\log4net.dll</HintPath>
</Reference> 
```

我会使用简单的搜索和替换。但当然你可以为此编写 C# 代码。

# youtube - Youtube：验证错误（检查服务名称）

> ID：12564058
> 
> 赞同：0
> 
> 时间：2012-09-24T11:24:32.023
> 
> 标签：youtube, youtube-api

我创建了一个 Gmail 帐户并将其与 Youtube 相关联。我可以使用 Youtube 网站上的凭据登录，但在使用数据 API 时出现此错误

**例外：**

```
com.google.gdata.util.AuthenticationException: Error authenticating (check service name) 
```

**代码：**

```
 YouTubeService service = new YouTubeService("", messages.get("youtube.devkey"));
        try {
            service.setUserCredentials("XXXXan@gmail.com", "alXXXX23");
        } catch (AuthenticationException e) { 
```

谁能解释为什么会发生这种情况和/或服务名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:29:07.057

将我的评论移至正式答案，因为它似乎已经解决了问题：

[在http://apiblog.youtube.com/2011/03/clientlogin-fail.html](http://apiblog.youtube.com/2011/03/clientlogin-fail.html)上列出了 ClientLogin 可能失败的常见原因和建议的替代方法

# spring - 使用 Spring JMS 和 ActiveMQ 的正确 Maven 依赖项是什么？

> ID：12564059
> 
> 赞同：10
> 
> 时间：2012-09-24T11:24:33.240
> 
> 标签：spring, maven, jetty, activemq, spring-jms

这是一个很常见的问题，我在网上找到了很多不适合我的解决方案。我声明：

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-jms</artifactId>
  <version>3.0.7.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.apache.activemq</groupId>
  <artifactId>activemq-all</artifactId>
  <version>5.5.0</version>
</dependency> 
```

和码头插件

```
<plugin>
  <groupId>org.mortbay.jetty</groupId>
  <artifactId>jetty-maven-plugin</artifactId>
</plugin> 
```

但是在发出“mvn jetty:run”时，我不断收到以下异常：

> org.springframework.beans.FatalBeanException：找不到命名空间 [http://activemq.apache.org/schema/core] 的 NamespaceHandler 类 [org.apache.xbean.spring.context.v2.XBeanNamespaceHandler]；嵌套异常是 java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler

运行 Jetty、ActiveMQ 和 Spring JMS 的正确 maven 依赖项是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T11:59:07.817

你需要依赖 xbean-spring

```
<dependency>
  <groupId>org.apache.xbean</groupId>
  <artifactId>xbean-spring</artifactId>
  <version>3.7</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:32:04.883

如果您的意图是将这些依赖项作为您的 web 应用程序的“提供”依赖项，然后使它们成为 jetty-maven-plugin 本身的依赖项，您可以在 jetty-maven-plugin 的 decl 内添加标签。假设您验证了您缺少的类存在于这些依赖项或其传递依赖项中。

# eclipse-rcp - 如何删除由 Eclipse 4 应用程序向导（RCP）创建的工具栏

> ID：12564061
> 
> 赞同：0
> 
> 时间：2012-09-24T11:24:37.730
> 
> 标签：eclipse-rcp, toolbar

当我使用向导创建 Eclipse 4 应用程序时，它会自动创建这些默认工具栏和菜单。似乎无论我做什么他们都呆在那里。我无法修改它们，唯一有效的是修改处理程序的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:32:23.363

原因是工作区由于某种原因没有更新，所以我所做的是在启动配置上标记了“清除工作区数据”复选框，并且解决了

# video - 如何通过优酷获取直接视频下载链接

> ID：12564070
> 
> 赞同：0
> 
> 时间：2012-09-24T11:24:58.687
> 
> 标签：video

我正在尝试从优酷获取直接文件下载链接。

示例网址：http: [//v.youku.com/v_show/id_XNDU0MTgxNzI0.html](http://v.youku.com/v_show/id_XNDU0MTgxNzI0.html)

我使用了一个视频下载网站，试图模仿下载路径。我使用了 hxxp://flvcd 。com 来解析链接。（您可以将示例 URL 粘贴到搜索字段中，然后您将得到结果，应该有 4 个链接）。

获得 4 直接链接后，我使用 fiddler2 捕获 HTTP 输出。我能够找到视频的第一部分（根据 flvcd 网站应该有 4 个）

我尝试在页面源中搜索直接下载链接字符串，但找不到任何匹配项。我想实际的直接链接是使用网站 javascript 获取的？

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:49:21.177

这是我正在使用的代码；我从 SO 上的另一个答案中找到了它，但我现在找不到它..

```
<?php

class VideoUrlParser{
    private $video_code;
    private $video_type;
    private $success;

    public function __construct($url = null, $type = null) {
        $this->success = false;

        if(!empty($url) && !empty($type)) {
            $this->video_code = trim($url);
            $this->video_type = trim($type);
            $this->success = true;
            return;
        }

        if(!empty($url)) {
            $urls = parse_url(trim($url));

            //url is http://youtu.be/xxxx
            if($urls['host'] == 'youtu.be'){
                $this->video_code = ltrim($urls['path'],'/');
                $this->video_type = "youtube";
                $this->success = true;
            }
            else if($urls['host'] == 'youtube.com' || $urls['host'] == 'www.youtube.com'){
                $this->video_type = "youtube";

                //url is http://www.youtube.com/embed/xxxx
                if(strpos($urls['path'],'embed') == 1){
                    $this->video_code = end(explode('/',$urls['path']));
                    $this->success = true;
                }
                //http://www.youtube.com/watch?feature=player_embedded&v=m-t4pcO99gI
                //url is http://www.youtube.com/watch?v=xxxx
                else{
                    parse_str($urls['query'],$parts);
                    $this->video_code = $parts['v'];
                    $this->success = true;
                }
            }
            else if(strpos($urls['host'],'youku.com') > 0){
                $this->video_type = "youku";
                $regExp = "#/(?:player.php/sid/|v_show/id_)([a-zA-Z0-9]+)(?:/|\\.)#";

                    if(preg_match($regExp, $urls['path'], $url_parts)){
                        $this->video_code = $url_parts[1];
                        $this->success = true;
                    }
                }
            //url is xxxx only
            else if(strpos($url,'/')===false){
                $this->video_code = $url;
                $this->video_type = "unknown";
            }
            return;
        }
    }

    public function success() {
        return $this->success;
    }
    public function getVideoType() {
        return $this->video_type;
    }
    public function getVideoCode() {
        return $this->video_code;
    }
    public function getVideoURL() {
        if($this->video_type == "youtube") {
            return 'http://www.youtube.com/?v=' . $this->video_code;
        } elseif($this->video_type == "youku") {
            return "http://v.youku.com/v_show/id_" . $this->video_code . ".html";
        }
    }
    public function getEmbedCode($rel, $width, $height) {
        if($this->video_type == "youtube") {
            return '<iframe src="http://www.youtube.com/embed/'.$this->video_code.'?rel='.$rel.'" frameborder="0" width="'.($width?$width:560).'" height="'.($height?$height:349).'"></iframe>';
        } else if($this->video_type == "youku") {
            return '<iframe width="'.($width?$width:560).'" height="'.($height?$height:349).'" src="http://player.youku.com/player.php/sid/'.$this->video_code.'/v.swf"></iframe>';
        } else {
            return "unknown video type in class.video_url_parser";
        }

    }
} 
```

# javascript - 拖放到浏览器窗口 - 防止默认的 firefox

> ID：12564074
> 
> 赞同：0
> 
> 时间：2012-09-24T11:25:14.833
> 
> 标签：javascript, firefox

我正在尝试在我的页面上创建拖放的可能性。

当文件被拖入窗口时，我必须阻止浏览器的默认操作。这是我的代码：

```
document.addEventListener("drop", function(e) {
    e.preventDefault();
}); 
```

这适用于 Chrome，但不适用于 Firefox。

如何防止 Firefox 的默认操作？

*** 发现 ***

还必须取消 dragover 事件，firefox 才能监听 drop 事件。

```
document.addEventListener("dragover", function(e) {
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:21:00.323

你可以使用dragleave

```
 document.addEventListener("dragleave", function(e) {
         e.preventDefault();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:29:30.600

Firefox 也必须取消 dragover 事件才能监听 drop 事件：

```
document.addEventListener("dragover", function(e) {
    e.preventDefault();
}); 
```

# python - 计算年份和月份中两个 datetime.date() 日期之间的差异

> ID：12564077
> 
> 赞同：9
> 
> 时间：2012-09-24T11:25:21.067
> 
> 标签：python, date, timedelta

我想以年和月计算两个 datetime.date() 日期之间的差异。

例如;

```
d1 = date(2001,5,1)  
d2 = date(2012,1,1)   
d3 = date(2001,1,1)   
d4 = date(2012,5,1)   

diff1 = d2 - d1  
diff2 = d4 - d3 
```

期望的结果：

```
diff1 == 10 years & 8 months. 
diff2 == 11 years & 4 months. 
```

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-24T11:40:43.087

如果你能够安装优秀的[dateutil](http://labix.org/python-dateutil)包，你可以这样做：

```
>>> from dateutil import relativedelta as rdelta
>>> from datetime import date
>>> d1 = date(2001,5,1)
>>> d2 = date(2012,1,1)
>>> rd = rdelta.relativedelta(d2,d1)
>>> "{0.years} years and {0.months} months".format(rd)
'10 years and 8 months' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T11:29:38.593

在python中，减去两个`datetime.date`对象会得到一个[`datetime.timedelta`对象](http://docs.python.org/library/datetime.html#timedelta-objects)，它有一个`days`属性。

将天数差异转化为年月没有明确定义；如果将一年定义为 365 天，将一个月定义为 30 天，则可以使用：

```
years, remainder = divmod(diff1.days, 365)
months = remainder // 30 
```

或者，您可以将平均年份和月份长度定义为（稍微）更准确：

```
avgyear = 365.2425        # pedants definition of a year length with leap years
avgmonth = 365.2425/12.0  # even leap years have 12 months
years, remainder = divmod(diff1.days, avgyear)
years, months = int(years), int(remainder // avgmonth) 
```

通过后一种计算，您的第二个差异为 11 年零*3*个月。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:39:15.067

timedelta 对象没有关于月份的信息，最好直接计算年份和月份

```
>>> d2.year - d1.year + (d2.month - d1.month)/12,  (d2.month - d1.month)%12
(10, 8)
>>> d4.year - d3.year + (d4.month - d3.month)/12,  (d4.month - d3.month)%12
(11, 4) 
```

# jquery - jQuery对其进行计算后如何保留Rails的数字格式？

> ID：12564079
> 
> 赞同：1
> 
> 时间：2012-09-24T11:25:31.643
> 
> 标签：jquery, ruby-on-rails

我有一张包含许多**项目的****发票**。当用户决定更改商品的**价格**或**数量**时，该商品的**小计**会通过以下两个 jQuery 函数立即更新：

 ******```
// Re-calculate item subtotal when quantity gets changed
$('[id$=quantity]').change(function() {
  var quantity = $(this).val();
  var price = $(this).closest('.item_fields').find('[id$=price]').val();
  recalculate_subtotal($(this), price, quantity);       
});

function recalculate_subtotal($element, price, quantity) {
  $element.closest('.item_fields').find('#Subtotal').val(price * quantity);     
} 
```

这工作正常。但是，jQuery 似乎无法保留小计字段的格式。这是我的代码中的样子：

```
<%= text_field_tag 'Subtotal', number_to_currency(f.object.subtotal), :disabled => true %> 
```

因此，当用户创建新项目时，Rails 会正确格式化小计，例如：`$200.00`

但是，一旦他更改了商品的价格或数量，所有格式都消失了，只剩下裸整数，例如`200`.

有没有办法使用 jQuery 保留 Rails 的格式？

更复杂的是，在我的例子中，格式是从 .yml 文件派生的，所以从长远来看，如果用户愿意，它应该能够适应不同的格式。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:57:01.803

很不幸的是，不行。

调用 JQuery 后，您将使用 JavaScript，并且 JavaScript 格式不同，例如使用 toPrecision(2)。

Rails 已经远离 ruby​​ 或 ruby​​ on rails 为中心的解决方案，如 rjs 和观察者。

你的例子很好地说明了以 ruby​​ on rails 为中心的解决方案适合 RoR 开发，并且使用相同的技能组合而不需要培训/雇用具有*不同*技能组合的人。您的示例是保留 RoR 允许您集中格式化、本地化或用户偏好。

因此，使用通用参数集中格式化的唯一方法是编写或查找类似于某些 ruby​​ 格式化的 JavaScript。然后，您可以将页面中展开的 yaml 中的格式参数作为参数发送到 JavaScript 格式。

*编辑进一步的解释以回应评论*

这是 JavaScript 文件中 erb 的情况。对定义 recalculate_subtotal 的文件使用 .js.erb 扩展名。在 ruby​​ 中编写一个辅助方法 get_format，并在您的 .js.erb 文件中使用此代码：

```
function format_number(value, <%= get_format %>)
{
    ...
}

function recalculate_subtotal($element, price, quantity)
{
  format_number($element.closest('.item_fields').find('#Subtotal').val(price * quantity));
} 
```

对我来说，这是容易的部分。编写 format_number 的内容很难。:)******

# java - Java 返回 indexof 基于数组的 xy

> ID：12564082
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:25:37.307
> 
> 标签：java, android, arrays

我有一个方法如下

```
 private double get_date_number(String day, String month, String year) {
        // TODO Auto-generated method stub

        date_array[0][0] = 6.18;
        date_array[0][1] = 1.22;
        date_array[0][2] = 6.26;
        date_array[0][3] = 6.30;
        return date_array[Integer.parseInt(month)-1][Integer.parseInt(day)-1];
    } 
```

我这样称呼它：

```
 date_number = get_date_number(Day, Month, Year); 
```

date_array 定义为 double[][]

date_number 被定义为双精度

如果我回来：

```
return date_array[0][2]; 
```

它就像一个魅力，但如果我像上面那样做，应用程序崩溃......

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:36:25.850

`date_array`已超出二维数组的界限。这很可能发生在包含以下任一行的行中：

```
date_array[0][3] = 6.30; 
```

或者

```
date_array[Integer.parseInt(month)-1][Integer.parseInt(day)-1] 
```

检查 和 的值，`month`并`day`确保您分别有足够的行和列来匹配这些值。

# javascript - 确定当前窗口是否使用fancybox打开？

> ID：12564090
> 
> 赞同：1
> 
> 时间：2012-09-24T11:25:58.217
> 
> 标签：javascript, asp.net-mvc-3, fancybox

我有一个页面，既可以通过 Fancybox 打开，也可以在不使用 fancybox 的情况下查看。我可以在javascript中以某种方式检查这个页面是否是使用fancybox打开的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:44:00.697

由于这是一个外部页面，您很可能会使用 fancybox 打开它`"type":"iframe"`

您可以简单地将这段代码放在该页面中：

```
if(parent.jQuery().fancybox) {
 alert("I was opened inside fancybox");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:07:16.460

您可以跟踪通过花式框查看的页面的页面浏览量。

假设您有一个“条款和条件”页面，并且您在页脚导航中添加了一个指向该页面的链接，并且您在注册页面上添加了一个链接。

```
<a href="#" id="terms-and-conditions-link" >Terms & Conditions</a> 
```

由于上面的链接在弹出窗口中打开“条款和条件”，但人们担心如何捕获通过花式弹出窗口查看的页面视图，他们是捕获此类页面视图的一种非常简单的方法，您可以使用谷歌分析结合jQuery。

这里的代码

```
 var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-xxxxxxxx-1']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

            // explicitly triggering a page view for Google Analytic 
            $('#terms-and-conditions-link').click(function(){
                _gaq.push(['_trackPageview', '/terms-accessed-via-fancybox']);
            }); 
```

下面的代码正在发挥作用，您明确告诉 Google 您网站上名为“terms-accessed-via-fancybox”的页面已被访问，您可以将“terms-accessed-via-fancybox”更改为您想要的任何字符串.

```
_gaq.push(['_trackPageview', '/terms-accessed-via-fancybox']); 
```

希望它可以帮助你:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:22:13.390

我使用这个 if 条件来测试我是否在一个花哨的盒子里：

```
//IE7-8 Fix: when not in iframe parent equals self
if (self != parent && typeof parent.$.fancybox !== 'undefined') {
    //Code to execute when inside the fancybox
} 
```

此解决方案希望您使用 iframe 在 Fancybox 中显示页面内容，并检查 iframe 的父级是否加载了 fancybox 插件。

*我正在使用 1.3.4 版本的 fancybox 插件。*

# php - 在 PHP 中，我应该使用今天的日期函数还是 MySQL 中的 curdate()？

> ID：12564092
> 
> 赞同：0
> 
> 时间：2012-09-24T11:26:03.820
> 
> 标签：php, mysql, date

我正在写一个`PHP/MySQL`程序。每次添加新记录时，我都需要添加当前日期`TABLE`。我有一个名为`DATE_ADDED`. 我很困惑如何使用`CURDATE()`函数 from`MySQL`将其写入 TABLE。或者我应该`PHP`使用日期函数来获取今天的日期并将其作为要写入表的变量传递？我不需要一个`TIMESTAMP`，只是`YYYY-MM-DD`。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:29:54.693

您必须尝试使用​​ php

```
$today = date("Y-m-d"); 
```

然后在将数据添加到您的数据库时，将这个值与剩余的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:33:39.260

```
INSERT INTO table_name ( field1, field2,...DATE_ADDED )
                   VALUES
                   ( value1, value2,...CURDATE()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:29:30.960

`date_added`您可以将其设置为表定义中该列的默认值，如下所示：

```
date_added TIMESTAMP DEFAULT CURRENT_TIMESTAMP 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T12:23:23.997

```
$regdate=date('Y-m-d');
$sql = "INSERT INTO table_name (fld_name1, fld_name2,fld_regdate) VALUES ('value1', 'value2', '$regdate')";
$rs = mysql_query($sql) or die('ERROR:' mysql_error()); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-06-22T01:48:47.983

```
 $sql = 'INSERT INTO joke SET     
       joketext = :joketext,     
       jokedate =  CURDATE()'; 
    $s = $pdo->prepare($sql); 
    $s->bindValue(':joketext', $_POST['joketext']); 
    $s->execute(); 
```

# ruby-on-rails - 无法使用 Capistrano 部署 Rails 应用程序

> ID：12564093
> 
> 赞同：0
> 
> 时间：2012-09-24T11:26:06.363
> 
> 标签：ruby-on-rails, capistrano, linode

嗨，我正在使用 Linode 服务器。我完成了所有配置并安装了 Capistrano 并将该 gem 包含在 Gemfile 中。还使用部署脚本完成。但是在尝试运行“cap deploy”时出现以下错误。

我对rails很陌生。如果有人可以提供帮助，那将会很有用。

![在此处输入图像描述](../Images/0ce7ea719d777077abf96e5dcc4d943e.png)

帽文件：

![在此处输入图像描述](../Images/51e0b98d45d006f61d4b1829e7b623cf.png)

部署脚本： ![在此处输入图像描述](../Images/b1c1d9dfa2f59d3c2dc5456ea47cf1ef.png)

我认为一些 Ruby 版本的问题，但不确定。使用红宝石：1.9.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:31:04.483

看起来你错过了`rvm-capistrano`宝石。

尝试将此添加到您的`Gemfile`

```
gem 'rvm-capistrano' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:25:57.257

解决了

随后，本指南逐步开始工作。感谢帮助 ：）

网址： http: [//guides.beanstalkapp.com/deployments/deploy-with-capistrano.html](http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html)

# javascript - 为什么单选按钮单击事件的行为不同

> ID：12564097
> 
> 赞同：1
> 
> 时间：2012-09-24T11:26:17.040
> 
> 标签：javascript, html, javascript-events

[JS Fiddle 上的示例](http://jsfiddle.net/yejinxin/RPSwD/)。

问题是：

如果第一次单击是在单选按钮上，则行为正常；但是如果第一次点击是跨文本（即aaaa），它不能得到选中的收音机。

请告诉我为什么以及如何使它相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:33:18.543

此代码在单击单选按钮时发生：

```
var obj = $(e.target||e.srcElement).parent();
score = obj.find('input:checked').val(); 
```

将父级放入`obj`变量中，该变量是包含 DIV。这包含两个单选按钮。然后它会在该 DIV 中找到第一个检查的输入元素，该元素在检查后始终是具有“第一个”值的元素。

您应该只获得被点击的项目的价值：

```
score = $(e.target||e.srcElement).val(); 
```

这可以重写为

```
score = $(this).val(); 
```

这是一个工作示例：http: [//jsfiddle.net/RPSwD/10/](http://jsfiddle.net/RPSwD/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:35:22.373

见新[小提琴](http://jsfiddle.net/RPSwD/12/)。

问题是这一行：

```
score = obj.find('input:checked').val(); 
```

将其更改为：

```
score = $(this).val(); 
```

这样做的原因是您正在 div 中查找所选项目，但在第一次单击时，该项目尚未被选中。鉴于事件是针对单选按钮的，您可以假设单选按钮是选定的。

另请注意，您不需要使用`e.target||e.srcElement`. jQuery 会为您解决这个问题。改为使用`$(this)`。

此外，您需要在单选按钮上设置一个名称以阻止两者都被选中。或者，如果同时选择两者是所需的行为，请改用复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:37:10.927

您不需要使用任何`event`属性：

```
var score = $(this).val(); // in your '.x' click handler

$('.y').click(function(e) {
    $(this).prev('.x').click();
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-24T11:36:55.930

只需像这样将您的单选按钮包装在标签标签内

```
<label for="radio1">
   <input type=radio class="x" id="radio1" value="First"/>
   <span class="y">aaaa</span>
</label> 
```

不需要额外的 jquery 或 javascript

在这里查看**[演示](http://jsfiddle.net/RPSwD/11/)**

# css - CSS居中多个图像/元素

> ID：12564102
> 
> 赞同：2
> 
> 时间：2012-09-24T11:26:29.510
> 
> 标签：css, image, center

我想将以下 2 个按钮并排居中，而不是彼此下方。这是[一个关于它在 JS Fiddle 上的表现的示例](http://jsfiddle.net/2ws9r/1/)

你能告诉我处理这个问题的最佳方法吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:32:52.950

添加一个固定宽度和边距为 0 auto 的容器；

[http://jsfiddle.net/2ws9r/13/](http://jsfiddle.net/2ws9r/13/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:29:24.550

**将display:inline-block**定义为您的`anchor tags`& 将**text-align:center**定义为它的`parent`. 像这样写：

```
a.button {
     display:inline-block;
     *display:inline;/* For IE7 */
     *zoom:1;/*For IE7*/
     padding: 3px 10px 3px 10px;
     width:50px;
     margin-left:auto;
     margin-right:auto;
     text-align: center;
     color: #636363;
     text-decoration: none;
     border-top: solid 1px #ccc;
     border-left: solid 1px #ccc;
     border-bottom: solid 1px #ccc;
     border-right: solid 1px #ccc;
}

.parent{
    text-align:center;
} 
```

**HTML**

```
<div class="parent">
    <a class="button">Test</a>
    <a class="button">Test</a>
</div> 
```

检查这个 [http://jsfiddle.net/2ws9r/11/](http://jsfiddle.net/2ws9r/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:27:35.107

[**JSFiddle**](http://jsfiddle.net/2ws9r/10/)

```
<div>
  <a class="button">Test</a>
  <a class="button">Test</a>
</div>

div{ text-align: center; }
a.button {
     display: inline-block;
     padding: 3px 10px 3px 10px;
     width:50px;
     margin-left:auto;
     margin-right:auto;
     text-align: center;
     color: #636363;
     text-decoration: none;
     border-top: solid 1px #ccc;
     border-left: solid 1px #ccc;
     border-bottom: solid 1px #ccc;
     border-right: solid 1px #ccc;
}

a.button:hover  {
     color: #179FD9;
} 
```

# java - 启动时调试 java 应用程序

> ID：12564105
> 
> 赞同：6
> 
> 时间：2012-09-24T11:26:37.747
> 
> 标签：java, eclipse, debugging

这听起来可能有点太天真了，但我总是很难在服务器启动期间调试 java 类。这是场景：

*   Java 应用程序托管在 tomcat 服务器上。
*   假设有一个类在 tomcat 服务器启动时被调用。
*   一旦我停止 tomcat 实例以重新启动，eclipse 调试就会停止，只有在应用程序启动并运行后我才能开始调试。
*   现在如何在 Eclipse 上调试这个类？

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T07:38:10.437

您需要将“等待调试器连接”标志传递给 tomcat。所以启动会等到你连接上，这样你就不会错过断点。

以那些使 tomcat 侦听调试器的 java 选项为例：

```
-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8797,server=y,suspend=y 
```

等待调试器连接标志是`suspend=y`上述行中的条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:32:41.840

在启动期间调试类应该没有问题。例如，假设您实现了一个[ServletContextListener 类](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)。所属的 contextInitialized 方法在 Tomcat 启动期间被调用（或者更准确地说：当你的应用程序被部署时）。

您可以在此类中设置断点。此时，Tomcat已经完全启动，调试应该没有任何问题。

# android - android 相机：onActivityResult() 意图为空，如果它有额外的

> ID：12564112
> 
> 赞同：39
> 
> 时间：2012-09-24T11:26:57.220
> 
> 标签：android, android-camera-intent

在 Stack Overflow 上搜索了所有相关问题后，一无所获，请尝试帮助我。

我创建了一个捕获图片的意图。然后我在以下位置看到了不同的行为`onActivityResult()`：如果我没有在 Intent 中添加任何额外内容（对于小图片），onActivityResult 中的 Intent 是可以的，但是当我在将图片写入文件的意图中添加额外内容时，onActivityResult 中的意图是`null`！

意图创建：

```
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
// without the following line the intent is ok
takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
startActivityForResult(takePictureIntent, actionCode); 
```

为什么它为空，我该如何解决？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-24T12:18:50.167

我也遇到了同样的情况，如果你提供`MediaStore.EXTRA_OUTPUT`，那么意图是空的，但你将在你提供的文件中拥有照片（`Uri.fromFile(f)`）。

如果您没有指定`MediaStore.EXTRA_OUTPUT`，那么您将有一个意图，其中包含相机保存照片的文件中的 uri。

不知道它是否是一个错误，但它是这样工作的。

**编辑：**所以在 onActivityResult() 中，如果为空，您不再需要检查数据。以下与我一起工作：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case PICK_IMAGE_REQUEST://actionCode
            if (resultCode == RESULT_OK && data != null && data.getData() != null) {
                //For Image Gallery
            }
            return;

        case CAPTURE_IMAGE_REQUEST://actionCode
            if (resultCode == RESULT_OK) {
                //For CAMERA
                //You can use image PATH that you already created its file by the intent that launched the CAMERA (MediaStore.EXTRA_OUTPUT)
                return;
            }
    }
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T23:12:02.070

用 Kotlin 编写的示例。您创建一个`Uri`用于相机的应用程序，将其保留到相机从保存您的照片返回并按照您的预期将`CameraFragment`其返回给您。`onActivityResult`

### 相机片段.kt

充当消费者和相机应用程序之间的中介。将其`Uri`作为输入并在 data 中返回`Intent`。

```
class CameraFragment : Fragment() {

    companion object {
        val TAG = CameraFragment::class.java.simpleName

        private val KEY_URI = ".URI"

        fun newInstance(uri: Uri, targetFragment: Fragment, requestCode: Int): CameraFragment {
            val args = Bundle()
            args.putParcelable(KEY_URI, uri)
            val fragment = CameraFragment()
            fragment.arguments = args
            fragment.setTargetFragment(targetFragment, requestCode)
            return fragment
        }
    }

    private lateinit var uri: Uri

    private var fired = false

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        retainInstance = true

        fired = savedInstanceState?.getBoolean("fired") ?: false

        if (!fired) {
            val args = arguments
            uri = args.getParcelable(KEY_URI)

            val i = Intent(MediaStore.ACTION_IMAGE_CAPTURE)
            i.putExtra(MediaStore.EXTRA_OUTPUT, uri)
            i.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION)
            context.grantUriPermission(i, uri, Intent.FLAG_GRANT_WRITE_URI_PERMISSION)

            startActivityForResult(i, targetRequestCode)
            fired = true
        }
    }

    override fun onSaveInstanceState(outState: Bundle) {
        super.onSaveInstanceState(outState)
        outState.putBoolean("fired", fired)
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)

        if (requestCode == targetRequestCode) {
            context.revokeUriPermission(uri, Intent.FLAG_GRANT_WRITE_URI_PERMISSION)

            val newData = Intent()
            newData.data = uri
            targetFragment.onActivityResult(requestCode, resultCode, newData)

            dismiss()
        }
    }

    private fun dismiss() {
        fragmentManager.beginTransaction().remove(this).commit()
    }
}

/** Grant Uri permissions for all camera apps. */
fun Context.grantUriPermission(intent: Intent, uri: Uri, modeFlags: Int) {
    val resolvedIntentActivities = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    for (resolvedIntentInfo in resolvedIntentActivities) {
        val packageName = resolvedIntentInfo.activityInfo.packageName;
        grantUriPermission(packageName, uri, modeFlags);
    }
} 
```

### 调用相机意图

`this`是您的应用程序中的一个片段，它将触发相机。`RC_CAMERA`是您对此操作的请求代码。

```
val uri = /* Your output Uri. */
val f = CameraFragment.newInstance(uri, this, RC_CAMERA)
fragmentManager.beginTransaction().add(f, CameraFragment.TAG).commit() 
```

### 处理相机结果

```
override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    super.onActivityResult(requestCode, resultCode, data)

    when(requestCode) {
        RC_CAMERA -> {
            if (resultCode == Activity.RESULT_OK) {
                val uri = data?.data
                // Do whatever you need.
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:02:26.543

你在哪里创建`f`的`Uri.fromFile(f)`？

它必须是一个有效的`File`对象。尝试在行之前创建它`EXTRA_OUTPUT`。

```
File f = new File("valid path"); 
```

尝试这样的事情：

```
File file = new File(dataFile);
Uri outFileUri = Uri.fromFile(file);
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
intent.putExtra(MediaStore.EXTRA_OUTPUT, outFileUri);
startActivityForResult(intent, TAKE_PHOTO); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-25T09:17:17.123

当我们将在 android 中从相机中捕获图像时，`Uri`或者为`data.getdata()`空。我们有两个解决方案来解决这个问题。

1.  我们可以从 Bitmap Image 中得到 Uri 路径
2.  我们可以从光标处获取 Uri 路径。

我将在这里实现所有方法，请仔细观看并阅读这些：-

首先，我将告诉如何从位图图像中获取 Uri：完整代码是：

首先，我们将通过两种方法都相同的 Intent 捕获图像，因此我将仅在此处编写一次代码：

```
 // Capture Image

  captureImg.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            if (intent.resolveActivity(getPackageManager()) != null) {
                startActivityForResult(intent, reqcode);
            }

        }
    }); 
```

现在我们将实现 OnActivityResult :-(这对于上述两种方法都是相同的):-

```
 @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if(requestCode==reqcode && resultCode==RESULT_OK)
            {

    Bitmap photo = (Bitmap) data.getExtras().get("data");
    ImageView.setImageBitmap(photo);

                // CALL THIS METHOD TO GET THE URI FROM THE BITMAP
                Uri tempUri = getImageUri(getApplicationContext(), photo);

                \\ Show Uri path based on Image
                Toast.makeText(LiveImage.this,"Here "+ tempUri, Toast.LENGTH_LONG).show();

               \\ Show Uri path based on Cursor Content Resolver
                Toast.makeText(this, "Real path for URI : "+getRealPathFromURI(tempUri), Toast.LENGTH_SHORT).show();
    }
            else
            {
                Toast.makeText(this, "Failed To Capture Image", Toast.LENGTH_SHORT).show();
            }
        } 
```

\现在我们将创建上述所有方法以通过类从 Image 和 Cursor 方法创建 Uri：

现在来自位图图像的 URI 路径

```
 private Uri getImageUri(Context applicationContext, Bitmap photo) {
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        photo.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
        String path = MediaStore.Images.Media.insertImage(LiveImage.this.getContentResolver(), photo, "Title", null);
        return Uri.parse(path);
    } 
```

\ Uri 来自保存图像的真实路径

```
 public String getRealPathFromURI(Uri uri) {
        Cursor cursor = getContentResolver().query(uri, null, null, null, null);
        cursor.moveToFirst();
        int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);
        return cursor.getString(idx);
    } 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-06-21T09:36:57.077

使用以下内容：

位图 bitmap = data.getExtras().getParcelable("data");

有用。

# silverlight - 超过最大 URI 长度 2083

> ID：12564113
> 
> 赞同：5
> 
> 时间：2012-09-24T11:27:02.270
> 
> 标签：silverlight

我创建了一个 Silverlight 应用程序。因为我在服务器端采用了一个实体框架模型，我在客户端没有客户端列表，当我尝试传递大约 15 到 20 个客户端时，我想将该列表传递给服务器端，它会给我正确的输出但是当我试图通过超过它时，它会给我这样的错误：

> 已超出最大 URI 长度 2083

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T11:29:33.443

尝试改用 POST 方法，其中 URI 长度并不重要。

```
[Query(HasSideEffects=true)] 
```

# shell - shell脚本只保留最新的两个tar文件，但删除所有其他tar文件？

> ID：12564115
> 
> 赞同：0
> 
> 时间：2012-09-24T11:27:04.357
> 
> 标签：shell, backup, tar, sysadmin

> **可能重复：**
> [删除 bash 中除最近的 X 文件之外的所有文件](https://stackoverflow.com/questions/25785/delete-all-but-the-most-recent-x-files-in-bash)

场景如下：

每天会在一个目录下创建两个tar文件，但我只需要最新的两个文件，那么如何每天自动删除其他文件？

我是否可以使用纯 shell 命令编写此脚本，而不是使用 perl、python 或 ruby​​ 等高级语言...

这个问题有点类似于[FTP - 只想保留最新的 10 个文件 - 删除 LRU](https://stackoverflow.com/questions/1088848/ftp-only-want-to-keep-latest-10-files-delete-lru)以及[如何删除文件夹中除最新三个文件之外的所有文件](https://stackoverflow.com/questions/4447326/how-to-delete-all-files-except-the-latest-three-in-a-folder)

**但我的还需要测试 tar 文件是否损坏**

如果新的 tar 文件损坏，我不会保留它，而是保留旧的，那么脚本应该是什么样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:34:38.193

显然，这可以使用两遍方法解决。

1.  检测并删除损坏的 tar 文件。
2.  如引用的问题中所述，删除除最新的 N 个文件之外的所有文件。

第一遍可以用一些东西来执行

```
for t in *.tar; do
    if program_that_checks_tar_file_for_integrity $t; then
        : # OK
    else
        rm $t
    fi
done 
```

# asp.net-mvc - MVC 4 实体框架多次插入

> ID：12564123
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:27:24.373
> 
> 标签：asp.net-mvc, entity-framework

在带有实体框架的 MVC 4 上，最好的方法是什么。

**例子：**

我们有这样的表格。所有记录的日期都相同。但是 Pax 和 Price 会发生变化。而且我不想多次发布。我需要一个用于 Pax 和 Price 的 ADD 按钮。日期和地区将相同。

人数：1

价格：500 美元

日期：DateTime.Now

地区：地点

我使用 MVC 模型和实体框架

我问**最好**的方法。我可以用我的旧知识做到这一点。Jquery 在我认为的表单后面追加和拆分。那是真的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:31:53.157

我会使用淘汰赛并使用它动态添加表单元素。然后，您可以将单个帖子作为您的类型的 Ienumerable。请参阅此处的示例[http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/)

淘汰赛非常适合像您这样的场景。您可以在视图模型的添加功能中对有关相同日期等的规则进行编码，并使表单元素不可编辑等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:35:09.133

```
[HttpPost]
public void PostArticle(List<Article> articles)
{
    foreach(var article in articles)
    {
        Context.AddObject(article);
    }
    Context.SaveAllChanges();
}

public ActionResult ShowArticles()
{
    //Returns list of articles (use a model for this)
    return View(Context.GetArticles());
} 
```

您也可以使用表单集合，但您需要自己删除字典。

# android - 如何在Android中绘制一个圆圈并移动它/拖动它

> ID：12564125
> 
> 赞同：3
> 
> 时间：2012-09-24T11:27:33.670
> 
> 标签：android, canvas, view

在我的应用程序中，我需要画一个圆圈，用户可以将它拖到屏幕上的任何位置。

为此，我创建了一个视图，在`onDraw`方法中绘制了圆圈。我尝试使用`onTouchEvent`. 但是当我尝试拖动圆圈时，圆圈并没有真正移动，而是在我触摸屏幕的任何地方创建一个新圆圈。

请有人帮我解决我所缺少的。

这是我的代码

```
public class Circle extends View {

Paint paint, paintSmall;
private Point start = null;
private Point cursorAtMouseDown = null;
private Point startAtMouseDown = null;
private Point endAtMouseDown = null;
private boolean movingStart = false;
private boolean movingEnd = false;
private boolean movingLine = false;

public Circle(Context context) {
    super(context);
    init();
}

public Circle(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public Circle(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

private void init() {
    paint = new Paint();
    start = new Point(100, 100);
    paint.setColor(Color.BLUE);
    paint.setStrokeWidth(10);
    paint.setStyle(Paint.Style.STROKE);

}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    paint.setStyle(Paint.Style.STROKE);
    canvas.drawCircle(start.x, start.y, 80, paint);

    canvas.drawCircle(start.x, start.y, 10, paint);

}

@Override
public boolean onTouchEvent(MotionEvent event) {

    Log.d("Inside On Touch", "");
    switch (event.getAction()) {
    case MotionEvent.ACTION_UP:

        if (movingStart || movingEnd || movingLine) {
            invalidate();
        }

        movingStart = false;
        movingEnd = false;
        movingLine = false;
        break;
    case MotionEvent.ACTION_OUTSIDE:
        if (movingStart || movingEnd || movingLine) {
            invalidate();
        }

        movingStart = false;
        movingEnd = false;
        movingLine = false;
        break;
    case MotionEvent.ACTION_MOVE:

        Log.d("Inside On Touch", "ACTION_MOVE");

        if (movingStart) {
            start.x = (int) event.getX();
            start.y = (int) event.getY();
            invalidate();
            Log.d("Inside On Touch", "--movingStart=" + movingStart);
            return true;
        } else if (movingEnd) {
            start.x = (int) event.getX();
            start.y = (int) event.getY();
            invalidate();
            Log.d("Inside On Touch", "--movingEnd=" + movingEnd);
            return true;
        } else if (movingLine) {
            Log.d("Inside On Touch", "--movingLine=" + movingLine);
            if (cursorAtMouseDown != null) {
                // double diffX = event.getX() - cursorAtMouseDown.x;
                // double diffY = event.getY() - cursorAtMouseDown.y;
                // start.x = (int) (startAtMouseDown.x + diffX);
                // start.y = (int) (startAtMouseDown.y + diffY);

                start = cursorAtMouseDown;

                invalidate();
                return true;
            }

        }
        return false;

    case MotionEvent.ACTION_DOWN:
        cursorAtMouseDown = new Point((int) event.getX(),
                (int) event.getY());

        if (cursorAtMouseDown.equals(start)) {

        }

        if (isCircleCenterChaged(cursorAtMouseDown)) {
            movingLine = true;
        }

        return true;

    default:
        return super.onTouchEvent(event);

    }
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:58:24.387

我不确定，但如果您管理以下变量，那么它可以解决您的问题：

```
private Point cursorAtMouseDown = null; 
private Point startAtMouseDown = null; 
private Point endAtMouseDown = null; 
private boolean movingStart = false; 
private boolean movingEnd = false; 
private boolean movingLine = false; 
```

请管理布尔变量和鼠标移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:50:18.927

我不完全确定使用movingLine、movingEnd 和movingStart 标志是什么意思；但是似乎movingEnd和movingStart标志从未设置为true。因此，它们对应的 onTouch() 代码块永远不会被访问。

# android - 更快更短的查找视图方式

> ID：12564127
> 
> 赞同：0
> 
> 时间：2012-09-24T11:27:51.790
> 
> 标签：android, android-view

有没有比这更快或更短的方法来初始化我的布局中的所有视图：

```
 row2[0] = (RelativeLayout) findViewById(R.id.ll22);
    row2A[0] = (RelativeLayout) findViewById(R.id.ll22alt);
    row2B[0] = (RelativeLayout) findViewById(R.id.ll22blank);
    mOffsiteDataBackup[0] = (TextView) findViewById(R.id.ll22_backup);
    mRam[0] = (TextView) findViewById(R.id.ll22_ram);
    mCpu[0] = (TextView) findViewById(R.id.ll22_cpu);
    mHdd[0] = (TextView) findViewById(R.id.ll22_hdd);
    mOs[0] = (TextView) findViewById(R.id.ll22_system);
    mStatusIcon[0] = (ImageView) findViewById(R.id.ll22_image);
   .
   .
   . 
```

写很多行只是为了找到视图真的很烦人。在我找到所有这些并初始化一些侦听器之前，我`onCreate`有 400 多行，这是我当然不想要的。

感谢您的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:30:12.373

不管你怎么做，它的打字量都差不多，在某些情况下甚至更多。50> 活动中的观看次数过多...

我能想到的缩小它的唯一方法是将它们分成片段并使用更新的框架...... 70 个元素不应该在一个 ui 中...... ui 意味着简单易用。没有很多元素会分散用户对他们想要的主要任务的注意力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:47:56.567

如果少数 UI 元素是功能统一的（如您的 progresBar 和 textView），您可以使用这些元素创建自定义视图。这使代码更加清晰，特别是如果您在一个活动中使用此视图的更多实例。

# php - UDP 端口或 TCP/IP 端口以外的任何其他数据发送方法

> ID：12564129
> 
> 赞同：0
> 
> 时间：2012-09-24T11:28:02.983
> 
> 标签：php, tcp, udp

您能否建议一种替代方法，通过 GSM 设备通过 Internet 将数据传输到 Web 服务器，而不是通过 UDP 端口或 TCP 端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:30:48.817

“Web 服务器”意味着它使用 TCP。您不能与使用其他协议的 Web 服务器通信，因为它将不再是“Web 服务器”，而是使用 HTTP 的其他类型的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:30:10.757

不，使用 TCP 或 UDP 是唯一可行的方法。

# symfony - 根据另一个或环境（的值）设置 Symfony 2 配置选项？

> ID：12564134
> 
> 赞同：1
> 
> 时间：2012-09-24T11:28:11.397
> 
> 标签：symfony, symfony-2.1

`true`如果环境是“测试” ，我如何将“disable_delivery”设置为默认值？这甚至可能吗？

另一个问题是如何根据另一个配置选项（如“用户名”）设置它？

```
$rootNode
    ->children()
        ->scalarNode('method')
            ->isRequired()
            ->cannotBeEmpty()
            ->validate()
                ->ifNotInArray($methods)
                ->thenInvalid('The method %s is not supported.')
            ->end()
        ->end()
        ->scalarNode('username')->isRequired()->cannotBeEmpty()->end()
        ->scalarNode('password')->isRequired()->cannotBeEmpty()->end()
        ->booleanNode('disable_delivery')->end()
    ->end()
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:48:42.017

更好的方法是在 config_test.yml 配置文件中设置这个变量。

如果您仍想使用默认值：将容器实例传递给您的配置类并使用：

```
->booleanNode('disable_delivery')->defaultValue('test' === $this->container->get(‘http_kernel’)->getEnvironment() ? true : false)->end() 
```

但这似乎不是一个好主意。

与第二个问题相同：在配置文件中使用参数。对于您的捆绑包的最终用户（您将在两到三个月内）来说，它更加简单和清晰。

# objective-c - 在 Windows 上为 iOS 构建静态库

> ID：12564140
> 
> 赞同：3
> 
> 时间：2012-09-24T11:28:29.393
> 
> 标签：objective-c, windows, static-libraries, gnustep

我想在 Windows 或 Linux (*.a) 上交叉构建一个 C++ 静态库，它将包含在 Xcode 4 中，最终用于 iOS 应用程序。谁能告诉我该怎么做？

# android - 如何将Listview项目数据（图像和文本）从一个活动发送到android中的另一个活动

> ID：12564146
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:28:45.703
> 
> 标签：android, android-intent, android-emulator

我正在开发应用程序，在该应用程序中，用户将能够使用 json 从 weburl 检索数据并且我已经制作了该模块，但现在我想使用意图在另一个活动中显示选定的列表视图项，我必须在其中显示它们的图像和文本选定的项目...你能告诉我一些源代码或为同一项目编写代码的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:39:03.060

如果您要从 JSON 数据中扩充视图，难道您不能将 JSON 字符串作为额外的活动意图发送，然后在第二个活动中扩充视图吗？例如，

```
Intent.putExtra("json",mJson); 
```

其中 mJson 是包含 JSON 的字符串对象的名称。然后在您的其他活动的 onResume 中，执行类似的操作

```
mJson = getIntent().getExtras().getString("json"); 
```

然后使用该 JSON 字符串扩展视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:49:07.713

您不能简单地将图像添加到您的包中。您可以像 Intent.putExtra("text",yourText); 一样添加文本。

要将图像添加到捆绑包中，请参阅此，

[您如何使用捆绑包在 android 活动之间传递图像（位图）？](https://stackoverflow.com/questions/4352172/how-do-you-pass-images-bitmaps-between-android-activities-using-bundles)

您必须在捆绑包中使用 parceble 对象。

# javascript - Three.js - 在运行时更改材质

> ID：12564156
> 
> 赞同：29
> 
> 时间：2012-09-24T11:29:34.267
> 
> 标签：javascript, 3d, webgl, three.js

我有一些从 Blender 导出的 .js 文件并加载它们`THREE.JSONLoader();`

我的回调：

```
var callback   = function( geometry ) { createMesh(geometry); 
```

我的加载：

```
loader.load( "Models/sculp.js", callback ); 
```

我的创建方法：

```
function createMesh(geometry){

    inArr[id] = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial( { color: 0xbbbbbb} ) );
    inArr[id].scale.set( 100, 100, 100 );
    scene.add( inArr[id] );
    id++;
} 
```

现在我想通过使用我的键盘在运行时更改我的材质（更改颜色和不透明度）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-24T13:39:38.760

当您为每个网格创建新材质时，我假设您只想更改一个网格的颜色，而不是更改`inArr`阵列中的所有颜色，您可能需要为此进行某种选择。但是单独改变材质的颜色是很容易的：

```
var onKeyDown = function(event) {
  if (event.keyCode == 67) { // when 'c' is pressed
    object.material.color.setHex(0xff0000); // there is also setHSV and setRGB
  }
};
document.addEventListener('keydown', onKeyDown, false); 
```

`object`是您要更改的网格。关键代码可以在这里找到：http: [//www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

# java - 无法成功地将字符串值“$10.55”作为弹簧路径变量传递

> ID：12564164
> 
> 赞同：3
> 
> 时间：2012-09-24T11:29:54.823
> 
> 标签：java, spring, spring-mvc

我的控制器类是

```
@RequestMapping(method = RequestMethod.POST, value = "/auditregistry/collectionentry/cid/{cid}/collid/{collid}/colldt/{collectiondate}/amount/{amt}")

public ModelAndView saveManualCollection(@PathVariable("cid") Integer custId, @PathVariable("collid") Integer collRtId, @PathVariable("collectiondate") String dt, **@PathVariable("amt") String amount**) throws Exception 
{
    debug("amount recieving=="+amount); 
```

我传递给 url 的值是

> /auditregistry/collectionentry/cid/9991/collid/10/colldt/20120726/amount/ **$14.55**

当我尝试将金额值打印为“$14”而不是“$14.55”时，我应该如何打印实际值“$14.55”

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T11:43:02.337

将您的 RequestMapping 更改为以下

```
@RequestMapping(method = RequestMethod.POST, value = "/auditregistry/collectionentry/cid/{cid}/collid/{collid}/colldt/{collectiondate}/amount/{amt:.*}") 
```

此处更改为您的 RequestMapping 中的**{amt:.*}** insted of **{amt}**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T11:42:28.390

这是因为默认情况下 Spring MVC 会剥离之后的所有内容`.`并将其视为文件扩展名（例如`/file.txt`）。这很容易解决。使用 Spring MVC 3.1 和 Java 配置：

```
@Configuration
class Cfg extends WebMvcConfigurationSupport {

    @Override
    public RequestMappingHandlerMapping requestMappingHandlerMapping() {
        final RequestMappingHandlerMapping mapping = super.requestMappingHandlerMapping();
        mapping.setUseSuffixPatternMatch(false);
        return mapping;
    }

} 
```

注意调用：[`RequestMappingHandlerMapping.setUseSuffixPatternMatch()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerMapping.html#setUseSuffixPatternMatch(boolean))。

# delphi - 使用 Tobybears VST 模板获得完整的音频频谱？

> ID：12564167
> 
> 赞同：0
> 
> 时间：2012-09-24T11:29:57.633
> 
> 标签：delphi, audio, signal-processing, asio, vst

我正在尝试使用 Tobybears VST Template for Delphi 制作一个简单的频率分析器 VST 插件。

我遇到的问题是，我似乎无法找到任何文档或信息，说明如何从主机收到的一大块音频数据中获取表示不同频率的值数组之类的东西。

有人知道如何做到这一点吗？

此外，每当我尝试使用 DelphiASIOVst 库时，我的 VST 主机就会不断崩溃，这是另一个用于制作自定义 VST 的库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:39:44.003

Tobybears VST 模板已过时（vst 2.3）。而是使用 sourceforge 上的 DAV 项目，正如 Shannon 所建议的那样。（这使得一些 vst 2.4）

关于分析，这很容易，您基本上必须对信号进行一些 FFT（缓冲输入，当累积 2^n 数据时进行 FFT），然后计算每个虚实对*的*假设得到一个波段的近似幅度......然后你在图表上绘制......结合包络跟随器和一些 GUI 编程技能，你会得到像 Voxengo Span 这样的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:47:57.477

VST 插件接收音频信号作为时域信号。音频信号数据不包含频率信息（这就是您找不到任何文档的原因）。

要实现频率分析仪，您需要将接收到的时域信号转换为频域信号。执行[快速傅里叶变换 (FFT)](http://en.wikipedia.org/wiki/Fast_Fourier_transform)是将时域信号转换为频域信号的标准方法。

# django - Django BooleanField 作为 Inlineadmin 的单选按钮

> ID：12564168
> 
> 赞同：3
> 
> 时间：2012-09-24T11:30:01.943
> 
> 标签：django, django-admin

我找不到街头的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:46:26.377

尝试使用[formfield_overrides](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_overrides)属性来更改使用的小部件（它可用于 InlineAdmin 类以及 ModelAdmin）：

```
from django.forms.widgets import RadioSelect

class ArticleDetailsInlineAdmin(admin.TabularInline):
    ...
    fields = ['current', 'slug', 'summary', 'mod_date']
    formfield_overrides = {
            models.BooleanField: {'widget': RadioSelect},
        } 
```

*请注意，这将对 ArticleDetailsInlineAdmin 中的所有*BooleanField使用单选按钮而不是复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:30:01.943

我找不到一种街头方式来做到这一点，所以我用 JavaScript 进行了调整来做到这一点。

```
$(document).ready(function() {
  $(".field-current").live("click",function(){

    $action = $($(this).children()[0])
    current_state = $action.is(':checked');
    $('.field-current').each(function(index) {
      var $temp = $($(this).children()[0])
      $temp.val(false);  
      $temp.attr('checked', false);
    });

    var $current = $($(this).children()[0])
    if (current_state == "on" || current_state == true){  
      $current.val(true);
      $current.attr('checked', true);
    }else{
      $current.val(false);
      $current.attr('checked', false);
    }
  });
}); 
```

在管理页面添加

```
class ArticleDetailsInlineAdmin(admin.TabularInline):
     ....
    fields     = ['current', 'slug','summary','mod_date']

class ArticleHeaderAdmin(admin.ModelAdmin):
    inlines = [ArticleDetailsInlineAdmin,]
    ......
    form = ArticleForm

class Media:
        js = ('js/admin-current-article.js') 
```

通过这样做，当前字段将像 inlineadmin 中的单选按钮

# c# - SMTP 中继 - 从控制台应用程序发送电子邮件

> ID：12564170
> 
> 赞同：5
> 
> 时间：2012-09-24T11:30:05.317
> 
> 标签：c#, .net, email, smtp

是否可以通过 .net 应用程序从使用 smtp-relay 的服务器发送电子邮件。

我正在使用 app.config 来获取服务器 IP 前的实际值，以及电子邮件应该使用的 fromadress。

根据 IT 技术人员的说法，不需要授权的用户名和密码，因为它使用 smtp-relay。将要发送电子邮件的计算机位于有效计算机的 smtp-servers 列表中。

这真的可以吗，我不需要指定用户名/密码吗？

```
try
{
    MailMessage mail = new MailMessage();
    SmtpClient SmtpServer = new SmtpClient(_smtpserver);
    mail.From = new MailAddress(_fromAdress);
    mail.To.Add(_toAdress);
    mail.Subject = _subject;
    mail.Body = _body;
    mail.Priority = MailPriority.High;
    SmtpServer.Port = Convert.ToInt32(_port);
    SmtpServer.Credentials = new System.Net.NetworkCredential(_authUsername, _authPassword);
    SmtpServer.EnableSsl = true;
    SmtpServer.Send(mail);
}
catch (Exception ex)
{
    Console.WriteLine(ex.ToString());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:36:38.440

在您的代码段中，您正在指定凭据

```
SmtpServer.Credentials = new System.Net.NetworkCredential(_authUsername, _authPassword); 
```

您可以删除该行，如果按照您所说的配置了 SMTP 中继，它仍然可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:45:58.250

在你的情况下，如果你在 webconfig 中设置你的用户名和密码，那么你需要像上面那样调用它。但是如果您使用默认邮件凭据，那么它将自动选择..如果您使用不同的邮件客户端作为发件人，那么您必须传递凭据..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T18:16:55.947

我有同样的情况。我得到了相同的错误代码。我注意到，我使用过 system.web.mail。但我的应用程序是一个控制台应用程序。我改变了图书馆，我使用了 system.net.mail。它现在有效。

# android - Imageview没有设置中心

> ID：12564174
> 
> 赞同：0
> 
> 时间：2012-09-24T11:30:27.913
> 
> 标签：android, android-imageview

我想显示屏幕的图像视图中心。我使用了下面的 xml 代码，但我的图像只显示在边缘附近。我提到了开发者网站，它给出了 android:ScaleType。但我也使用了 scaletype。我的图像没有设置屏幕的中心。列表视图.xml：

```
 <?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:layout_width="wrap_content"
                android:paddingBottom="5px"                
                android:paddingTop="5px"
                android:paddingLeft="5px">

   <ImageView android:id="@+id/ImageView01"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_below="@+id/TextView01"
              android:scaleType="fitCenter">
                </ImageView>
<TextView android:id="@+id/TextView01"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textSize="20px"
          android:textStyle="bold"

            android:textColor="#0099CC">
                </TextView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:33:11.563

将您的相对布局更改`layout_width`为`fill_parent`. 可能是这个问题。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:40:18.003

试试这个..

```
 <?xml version="1.0" encoding="utf-8"?>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:paddingBottom="5px"                
            android:paddingTop="5px"
            android:paddingLeft="5px">

<TextView android:id="@+id/TextView01"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:textSize="20px"
      android:textStyle="bold"
      android:layout_alignTop="@id/ImageView01"

        android:textColor="#0099CC">
            </TextView>
<ImageView android:id="@+id/ImageView01"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_below="@+id/TextView01"
          android:layout_gravity="center">
            </ImageView>

</RelativeLayout> 
```

# android - 什么是 .0 dp 在 android 中？

> ID：12564177
> 
> 赞同：1
> 
> 时间：2012-09-24T11:30:33.497
> 
> 标签：android, xml, density-independent-pixel

例如 xml 中大小为 33.0 dp 的 textview。这意味着双数还是具有其他功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:35:01.943

我假设您指的是 layout_width 或 layout_height；在这种情况下，这些数字始终是浮点数。最后的“.0”没有特别的意义。

有关详细信息，请参阅[http://developer.android.com/reference/android/R.attr.html#layout_width](http://developer.android.com/reference/android/R.attr.html#layout_width)。

# php - 通过 PHP 获取 DOM 的内容

> ID：12564191
> 
> 赞同：0
> 
> 时间：2012-09-24T11:31:44.533
> 
> 标签：php, html

我需要通过 PHP 获取网站的内容，但是，该内容仅在启用 JavaScript 时可用。我现在使用的解决方法是制作一个 AppleScript 以在 Safari 中打开网站，然后选择所有页面内容，将其复制到剪贴板并粘贴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:37:17.097

我想这真的很难实现。如果您观察该页面上负责准备内容的 JS，您可能会发现它只是另一个 AJAX 调用，您可以直接从 PHP 脚本调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:38:11.517

你是什​​么意思：

> 内容仅在启用 JavaScript 时可用

页面是否通过 JS 从某处提取数据？分析数据的来源并直接从 PHP 访问该位置会更容易吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:46:50.830

最佳解决方案：向网站所有者询问 api/export 访问权限；）

如果做不到，只能祈祷你能分析通过JavaScript初始化的请求并模仿它们。（可能的工具：带有 firebug 或 tamper data 插件的 firefox）。

**警告**网站所有者可能不喜欢这种方法，实际上可能不允许自动抓取数据

# c# - C#简单的DHCP服务器，DNS请求？

> ID：12564194
> 
> 赞同：1
> 
> 时间：2012-09-24T11:31:52.210
> 
> 标签：c#, dhcp

我正在为我公司的新产品编写新的测试设备。

其中一项测试是以太网测试，有人告诉我会这样测试。

1.  一旦产品通过以太网连接，它将使用 DHCP 协议请求 IP 地址。
2.  MAC 地址将被捕获和验证。
3.  为产品提供 IP 地址。
4.  现在产品请求主机名“something.something.something.se”的 IP 地址
5.  必须检查和验证主机名。
6.  DNS 服务器发回主机名的 IP 地址。
7.  然后产品将与给定的 IP 地址建立 TCP 连接。

我的问题是我收到了来自产品的 DHCP 发现消息并且我做出了回应。然后我收到 IP 地址的 DHCP 请求消息（步骤 1）。我发回一个 IP 地址，然后我就再也听不到产品的消息了。

如果我在我提供的 IP 地址上对产品进行 PING 操作，我会收到响应，因此我知道产品已收到并设置其 IP 地址。

我正在使用 UdpClient 进行通信，并且设置如下

```
IPEndPoint ProductEndPoint = new IPEndPoint(IPAddress.Any, 0);
UdpClient host = new UdpClient();
host.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
host.Client.Bind(new IPEndPoint(IPAddress.Parse("192.168.0.1"), 67)); //192.168.0.1 is ip address of PC

for(int i = 0; i < 30; i++)
{
  if (host.Available > 0)
  {
    byte[] Data = host.Receive(ref ProductEndPoint);

    // Do something with the data
  }
  else
    Thread.Sleep(1000);
} 
```

知道为什么我对第 4 步没有回复吗？

编辑我检查了作为 DNS 发送的 IP 地址，并将其更改为 192.168.0.1（原为 0.0.0.0），但仍然没有变化。正如我所说，我知道产品获得了 IP 地址，因为我可以 ping 它，但似乎 DNS 地址有问题。我已经确认了这一点，因为该产品有一个闪烁的红灯，我被告知这意味着 DNS 请求失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:55:50.287

如果我理解您的问题/问题是正确的，要全面测试所有步骤，您将不得不模拟 DHCP 服务器（我认为您已经在这样做了）、DNS 服务器，最后是产品连接的服务。

我猜您不应该测试有关 MAC 地址捕获和验证的部分，这不是您正在测试的产品的一部分。

因此，当产品从 DHCP 请求 IP 地址时，您应该确保产品也获得假 DNS 服务器的 IP 号码。然后，该 DNS 服务器（您的代码）在对主机名进行 DNS 请求时，应该将 IP 交给产品以获取另一个虚假服务。最后，您的更多代码已准备好捕获来自产品的连接请求。

然后您应该能够测试所有步骤。

# iphone - 将捕获的图像转换为单独的 png 文件，并将该 png 文件名作为字符串插入到 sqlite 数据库中并检索它

> ID：12564196
> 
> 赞同：0
> 
> 时间：2012-09-24T11:31:57.200
> 
> 标签：iphone, objective-c, sqlite

在我的 iPhone 应用程序中，我需要捕获一张图片并将其保存到 sqlite 数据库中。

```
 NSString *insertQuery = [NSString stringWithFormat:@"INSERT INTO ProfileTable (NAME, MOBILE, EMAIL, ProfilePICTURE) VALUES(?, ?, ?, ?)"];

                  const char *insert = [insertQuery UTF8String];
                  if(sqlite3_prepare_v2(contactsDB, insert, -1, &insertStatement, NULL) != SQLITE_OK) {
                        NSLog(@"Error while creating insert Statement");
                  }
                  else 
                  {
                        sqlite3_bind_text(insertStatement, 1, [name UTF8String], -1, SQLITE_TRANSIENT);
                        sqlite3_bind_text(insertStatement, 2, [mobile UTF8String], -1, SQLITE_TRANSIENT);
                        sqlite3_bind_text(insertStatement, 2, [email UTF8String], -1, SQLITE_TRANSIENT);

                        sqlite3_bind_blob(insertStatement, 4, [profilePic bytes], [contactImage length], NULL);

                  }
            }

// Same Query  for insert statement also 
```

我以 blob 类型的形式保存了该文件，但这会导致占用大量内存并导致内存警告。

所以我有一个想法。

我想将捕获的图像保存为 png 文件以假设“image1.png”并将标题“image1.png”插入为 varchar 类型，并在我们想要显示时检索具有该名称的文件。

任何帮助如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:33:58.237

每次您可以创建一个随机字符串并将您捕获的图像重命名为随机生成的字符串。

```
NSString *letters = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    NSMutableString *randomString = [NSMutableString stringWithCapacity:6];

    for (int i=0; i<6; i++) 
      {
[randomString appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
        }

NSString *fileName = [NSString stringWithFormat:@"%@.png",randomString]; 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:44:37.853

在 appDelegate.h 文件中添加 int 计数器

还要在应用程序中添加 didFinishLaunchingWithOptions 方法：

```
counter = 0;
if(![[NSUserDefaults standardUserDefaults] integerForKey:@"ImageNumber"])
{
   [[NSUserDefaults standardUserDefaults] setInteger:counter ForKey:@"ImageNumber"]
}
else
{
   counter = [[NSUserDefaults standardUserDefaults] integerForKey:@"ImageNumber"];
} 
```

还要在 appDelegate.h 文件中添加此方法

```
+ (NSString *) applicationDocumentsDirectory 
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
} 
```

现在，当在数据库中添加捕获的图像时，首先添加 int Doc Directory，如下所示：

```
appDelegate = (appDelegate *)[[UIApplication sharedApplication] delegate];
NSString *strDocDirPath = [appDelegate applicationDocumentsDirectory];
NSString *fileName = [NSString stringWithFormat:@"Image%03d.png",appDelegate.counter];
strDocDirPath = [strDocDirPath stringByAppendingPathComponent:fileName];
NSData* imgdata = UIImagePNGRepresentation(yourCapturedImage);
[imgdata writeToFile:strDocDirPath atomically:YES];
appDelegate.counter ++;
[[NSUserDefaults standardUserDefaults] setInteger:appDelegate.counter ForKey:@"ImageNumber"];
//add in database with  fileName 
```

像这样检索：

```
 appDelegate = (appDelegate *)[[UIApplication sharedApplication] delegate];
NSString *strDocDirPath = [appDelegate applicationDocumentsDirectory];
strDocDirPath = [strDocDirPath stringByAppendingPathComponent:@"Image001.png"]; //use your database image name here 
 UIImage *img = [[UIImage alloc]initWithContentsOfFile:strDocDirPath]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T11:42:19.883

获取文档目录（或您可能想要存储图像的其他目录）：

```
/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

将图像存储为 png：

```
NSURL *documentsDirURL = [self applicationDocumentsDirectory];
NSURL *fileURL = [documentsDirURL URLByAppendingPathComponent:@"some-image-name.png"];
NSData* data = UIImagePNGRepresentation(image);
[data writeToURL:fileURL atomically:YES];
NSString *filePath = [fileURL path];

// now save your filePath as string to sqlite 
```

请注意，您必须填写详细信息，例如适当的目录在文件系统中的位置、命名约定、生成文件名（除非它们已经存在）等。

**编辑：**

这里有一些关于图像序列命名的帮助。有很多不同的解决方案。

`NSUserDefaults`使用 key在 中创建一个条目`@"lastImageNumber"`。当您需要一个新的图像名称时：

```
NSInteger imageNumber = [[NSUserDefaults standardUserDefaults] integerForKey:@"lastImageNumber"] + 1;
NSString *imageName = [NSString stringWithFormat:@"image%05d.png",imageNumber];
// save the new imageNumber in the `NSUserDefaults`
[[NSUserDefaults standardUserDefaults] setInteger:imageNum ForKey:@"lastImageNumber"]; 
```

# wpf - 如何在caliburn micro中设置windows的样式

> ID：12564198
> 
> 赞同：1
> 
> 时间：2012-09-24T11:32:07.070
> 
> 标签：wpf, caliburn.micro

在calibrun micro中，主窗口是由caliburn创建的，我无法访问它。怎么画风。例如，我想让它无法调整大小等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:34:19.937

Caliburn micro 有*WindowManager*类。您可以创建自己的派生自这个类并覆盖*CreateWindow*方法。

例子：

```
public class CustomWindowManager : WindowManager
{
       protected override Window CreateWindow(object rootModel, bool isDialog, object context)
        {
             var window = base.CreateWindow(rootModel, isDialog, context);

             window.Style = YourCustomStyle; 

             return window;
        }
} 
```

# c - 如何在 C 中读取格式为“123 35 123 0 0 0 817”的数据

> ID：12564199
> 
> 赞同：2
> 
> 时间：2012-09-24T11:32:09.230
> 
> 标签：c, io

我想从字符串中读取数据。字符串是这样的：

```
"123 35   123 0    0      0       817 0    0   0   0" 
```

字符串中有一些不确定的数字和空格。我想读第三个数字。如何读取数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T11:34:19.720

使用`sscanf()`. 它将跳过空格。

```
int a, b, c;
if( sscanf(string, "%d %d %d", &a, &b, &c) == 3)
  printf("the third number is %d\n", c); 
```

您还可以使用`%*`来禁止分配前两个数字：

```
int a;
if( sscanf(string, "%*d %*d %d", &a) == 1)
  printf("the third number is %d\n", a); 
```

请注意，它返回它进行的成功转换（和分配）的数量，这就是为什么在依赖输出变量的值*之前*`sscanf()`必须检查返回值的原因。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:33:53.720

[`sscanf`](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)就是为此而设计的，特别是`*`丢弃输入的修饰符：

```
const char *input = "...";
int value;

// here we use the '*' modifier to discard the input from our string
sscanf("%*i %*i %i", &value);

// value now magically has the value you need. 
```

`sscanf`然而，它确实有它的缺点。虽然它确实会根据需要丢弃空格，但传统上它也很慢。如果可以，我会改用`strtol`它，它更快（因为它不需要解析格式字符串）。*

# javascript - 跨文档消息传递 - 发布对象功能检查 FF3.6

> ID：12564200
> 
> 赞同：0
> 
> 时间：2012-09-24T11:32:13.980
> 
> 标签：javascript, html, firefox, iframe, postmessage

我正在使用跨域消息传递在窗口和插入的 iFrame 之间进行交谈。下面的代码是与父窗口对话的 iframe。

```
sendToParent = function (event, response) {
        // send to parent
        event.source.postMessage(response.data, event.origin);
        //sent
        consolePrint('Sent: ' + response.data);
    } 
```

并且 response.data 可以是字符串或对象。

字符串很好，但 FF3.6 不喜欢对象。所以我们需要对对象进行字符串化，这不是问题。

我们遇到的问题是功能检查 FF3.6 是否缺少对象跨文档消息传递支持……我们真的不想走用户代理字符串和单个设备子句的道路。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:38:31.667

我建议此时始终将对象序列化为 JSON。不仅很难知道哪个浏览器支持对象，哪个不支持对象，而且即使对于那些似乎支持对象的浏览器，也可能并非所有浏览器都完全一致。

# android - 从首选项中获取视图以添加 KeyListener

> ID：12564201
> 
> 赞同：1
> 
> 时间：2012-09-24T11:32:31.420
> 
> 标签：android, android-preferences, preferenceactivity

我的目标是`View`从我的自定义`Preference`中添加一个`KeyListener`监听左右键事件的人，如果用户在选择 Seekbar 时发送左/右事件，它会将指针移动到左/右。

![我的 SeekBar 偏好](../Images/bdae958cfa67a57ff8f6b2b0dcfa4512.png)

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:23:49.723

如果您使用自定义首选项，则可以覆盖[onBindView](http://developer.android.com/reference/android/preference/Preference.html#onBindView%28android.view.View%29)方法，该方法接收`View`映射到您的`Prefence`实例的对象。这样，您可以添加相应的侦听器。

# java - 显示 JFrame 或 JDialog (Swing)

> ID：12564204
> 
> 赞同：0
> 
> 时间：2012-09-24T11:32:36.597
> 
> 标签：java, swing, jframe

我是 Java 桌面应用程序编程的新手，所以我会很感激一些帮助......

我用构建器添加了框架的组件。

当我单击主框架的按钮时，我将显示如下对话框：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {  
            BehaviorDialog behavDialog = new BehaviorDialog(this, rootPaneCheckingEnabled);
            behavDialog.setVisible(true);
    } 
```

我的`BehaviorDialog`课是这样的：

```
public class BehaviorDialog extends javax.swing.JDialog {

/**
 * Creates new form BehaviorDialog
 */
public BehaviorDialog(java.awt.Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();
    setTitle("Add behavior");
    setLocationRelativeTo(this);
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {
//....
}// </editor-fold>                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */

    /* Create and display the dialog */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
                BehaviorDialog dialog = new BehaviorDialog(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                    @Override
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    //...
    // End of variables declaration                   
} 
```

我的问题是：

*   这是启动框架/对话框的正确方法吗？（它有效，但我想确定它是否是最好的方法......）

*   当我删除`invokeLater()`in 时`main`，它似乎以相同的方式工作......我应该保留它还是可以删除它？删除它有什么后果？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:40:12.523

我认为您的代码没有任何问题。但是您绝对应该保留[invokeLater](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)，因为它会为您处理线程。也就是说，它将这个事件排队，直到其他 AWT 事件完成。这使您可以确保界面保持平稳运行。

但是当然，如​​果您想在其他地方重用这个 JDialog（并且想要做一些小的修改，比如位置和大小），我建议您将 setTitle 和（可能）setLocationRelativeTo 方法移动到调用框架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:44:56.393

这是可能的方法之一。有些人喜欢为每个对话框/窗口创建子类，因此该类管理自己的布局和（通常）行为。其他人更喜欢委托，即不要通过创建一种创建对话框及其布局的工厂方法来为每个对话框创建子类。我认为这种方法更好，因为它更灵活。您可以更轻松地将代码分层。例如创建主面板的层，创建子面板的子层，将面板放入对话框的更高层等。将来您可以替换处理对话框的层并将相同的布局放入 JFrame 或其他面板等。

关于`invokeLater()`- 它只是异步运行您的代码。在您的情况下，这没有意义。但它对于需要时间的操作很有用。例如，如果您想执行需要 10 秒单击按钮的操作，您可能希望异步运行此操作。否则，您的 GUI 将冻结 10 秒。

# android - 从 mapactivity 访问主要活动类的变量时出错

> ID：12564206
> 
> 赞同：0
> 
> 时间：2012-09-24T11:32:40.663
> 
> 标签：android, eclipse, google-maps, variables

这似乎是一个典型的问题，但它不是我在从 mapavtivity 访问主要活动的 onitemselected 类（微调器类）的变量时遇到的问题

在主活动地图中显示在按钮单击上

现在我想使用mapctivity mapactivity代码中的主要活动类的变量

```
 String dest ;

      OnItemSelectedListener place = new OnItemSelectedListener();
      dest = place.onItemSelected(); 
```

现在onitemselected类

```
 public void onItemSelected(AdapterView<?> parent, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

  name = "Destination:" + parent.getSelectedItem().toString()+ "\n";

    etTextOut.setText(name);

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

public String onItemSelected() {
    // TODO Auto-generated method stub
    //dest = name;

    return name;

} 
```

}

问题出在mapactivity中，变量为null，它无法获取值

告诉我我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:28:00.030

我不确定我是否了解您的程序设置方式，但据我了解，您有一个主程序`Activity`，其中有一个微调器。

首先确保您在`onItemSelectedlistener`创建微调器后实际将其设置为微调器。

```
OnItemSelectedListener place = new OnItemSelectedListener();
//Replace "spinnerId" with the id you have set for your spinner in your layout
Spinner spinner = (Spinner) findViewById(R.id.spinnerId);
spinner.setOnItemSelectedListener(place); 
```

然后，如果您想启动`MapActivity`并让它可以访问“名称”值，则必须在用于启动活动的意图中传递该值。

```
String dest = place.onItemSelected(); 
//You might want to rename this method to something clearer like "getName" but that's just me.
Intent intent = new Intent(this, MapActivity.class);
intent.putExtra("DestValue", dest);
startActivity(intent); 
```

现在，在您的 中`MapActivity`，您将可以使用以下方法访问此值：

```
Intent intent = getIntent();
String dest = intent.getStringExtra("DestValue"); 
```

如果您的主要活动没有启动 MapActivity，您还可以尝试查看`SharedPreferences`在活动之间传递值。

希望这会有所帮助。

更正答案：

在你的活动中试试这个。它应该工作：

```
private EditTextBox etTextOut;

@Override
protected void onCreate(Bundle savedInstanceBundle){
    EditTextBox etTextOut = (EditTextBox) findViewById(R.id.etTextOutId);
    Spinner spinner = (Spinner) findViewById(R.id.spinnerId);
    OnItemSelectedListener spinnerListener = new OnItemSelectedListener{

        private String name;

        public void onItemSelected(AdapterView<?> parent, View view, int position, long id){
            name = name = "Destination:" + parent.getSelectedItem().toString()+ "\n";
            etTextOut.setText(name);
        }

        public void onNothingSelected(AdapterView<?> parent){}

        public String getName(){
            return name;
        }
    }

     spinner.setOnItemClickListener(spinnerListener);

} 
```

# android - 如何在 Adob e Flash Builder 4.6 中创建视图列表

> ID：12564209
> 
> 赞同：1
> 
> 时间：2012-09-24T11:32:53.107
> 
> 标签：android, listview, mobile, calculator, flash-builder

我目前正在 Flash builder 中编写一个 android 应用程序。最终，我想在 Flash builder 中创建一套计算器。我希望主屏幕是一长串计算器。用户将能够搜索他们想要的计算器的名称，并将计算器的名称返回给他们。我不知道从哪里开始实施这种类型的应用程序。

请帮忙。我将提供应用程序的图片，以显示我在寻找什么。搜索栏下方的灰色框是我想添加计算器列表的地方。如果您查看屏幕左侧，您将看到 A1C 计算器，我已经开始处理第一个计算器。

感谢您的时间。

Ryan, PS 由于我是新用户，他们让我把图片拿掉，如果你想看图片，请给我发电子邮件或消息。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:09:20.720

正如我从这种方法中了解到的，每个页面都必须有一个分配的 ID。一旦您在代码中实现了这一点，接下来将定义 ArrayList。数组列表也应该有一个 ID。注意下面这个特定应用程序组件的数据提供者是 ArrayList。

```
<s:List id="list" width="100%" height="100%" labelField=" label">
    <s:dataProvider>
    <s:ArrayList>
    <fx:Object label="Page One" />
    <fx:Object label="Page Two" />
    <fx:Object label="Page Three" />
    <fx:Object label="Page Four" />
    </s:ArrayList>
    </s:dataProvider>
</s:List> 
```

# iphone - 在 HTML 和 CSS 中居中 div，但在移动屏幕上被截断

> ID：12564211
> 
> 赞同：2
> 
> 时间：2012-09-24T11:33:06.447
> 
> 标签：iphone, css, html, center

我在 CSS 上遇到了一些真正的问题！

我进行了以下设置以使#Box div 居中，它可以在除移动浏览器之外的所有设备上完美运行。因为移动浏览器的屏幕尺寸太窄了，左手边一直被截断。我之前问过类似的问题，但试图调整它无济于事。

自上次以来，我已将容器和布局 div 放入，但仍然出现相同的问题。有什么办法可以调整代码以使左侧不会被砍掉？

```
 .pageContainer {
        margin-left: auto;
        margin-right: auto;
        width: 100%;
        height: auto;
        padding-left: 1.82%;
        padding-right: 1.82%;
        position:relative; }

    #LayoutDiv1 {
        clear: both;
        margin: auto;
        width: 100%;
        display: block;
        text-align:center;
        position: relative; }

    #Box {
        width: 487px;
        height: 181px;
        position: absolute;
        left: 50%;
        top: 236px; 
        margin-left: -244px;
        z-index:6; } 
```

的HTML：

```
 <body>
<div class="pageContainer">
    <div id="LayoutDiv1">
    <div id="Twitter">
    <a href="http://www.twitter.com/wekaptureit" target="new"><img     src="images/TwitterNORMAL.png" onmouseover="this.src='images/TwitterHOVER.png'" onmouseout="this.src='images/TwitterNORMAL.png'"/></a>
    </div>

<div id="Facebook">
<a href="http://www.facebook.com/wekaptureit" target="new"><img src="images/fbNORMAL.png" onMouseOver="this.src='images/fbHOVER.png'" onMouseOut="this.src='images/fbNORMAL.png'"/></a>
</div>

<div>
<img id="Box" src="images/BOX.png" width="487" height="181">
</div>

    </div>
    </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:52:32.987

2012 年更聪明的方法是使用[媒体查询](http://css-tricks.com/css-media-queries/)，[这里有一些灵感](http://mediaqueri.es/)

您基本上创建了另一个样式表，它只为较小的屏幕加载。现在看起来可能有点矫枉过正，但随着您网站的发展，您会感谢我提出这个建议（或者您不能；））

另外，不要这样做`margin-left: -244px;`，它很hacky并且可能导致跨浏览器问题。向我们展示一些 HTML，我们将向您展示一种更简洁的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:01:47.183

您是否包含视口元标记？它应该消除您在移动设备中可能遇到的任何缩放问题。 `<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

对你来说 CSS: `<div>`s 是块元素，它们的默认行为是扩展其父级的宽度（100%）。那些 CSS 声明不是必需的。

从您的代码和布局来看，您似乎不需要`#LayoutDiv1`或使用定位。

这个更简单的代码负责左侧截止（[这是一个小提琴](http://jsfiddle.net/kzmEx/)）：

```
.pageContainer {
    margin:0 auto;
}

#LayoutDiv1 {
        margin: auto;
        text-align:center;
}

#Box {
    width: 487px;
    height: 181px;
    top: 236px; 
    margin:236px auto 0;
} 
```

就像之前提到的海报一样，您可以添加一个@media 查询来为移动设备上的#Box 加载较小的图像（您可以简单地在现有的 CSS 文件中添加一两行 [或 200]）：

```
@media only screen and (max-width: 767px) {
    #Box { background:url('imgs/mobile-hero.jpg'); }
} 
```

# android - Android如何从AsyncTask内部处理网络异常

> ID：12564220
> 
> 赞同：2
> 
> 时间：2012-09-24T11:33:41.983
> 
> 标签：android

我正在从 AsyncTask 调用 Web 服务。它工作正常，但是当我关闭手机的移动网络时，我正在尝试对其进行测试。这是为了复制没有信号的用户。

这是代码。

```
 @Override
        protected Void doInBackground(String... params) {

            try {
                Log.e(TAG, "inside doInBackground");

                rotaArray = nfcscannerapplication.loginWebservice.getRota(params[0], params[1]);

            } catch (Exception e) {

                Log.e(TAG, "there's a problem");

               e.printStackTrace();

            }
            return null;

        } 
```

尽管抛出了 java.net.ConnectionException，但 log 语句永远不会注销到 logcat enev。我该如何处理可能没有网络信号并优雅地退出应用程序，或者更好地再次调用活动 oncreate？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:50:22.580

我相信您想在网络故障的情况下提供一些消息或解决问题....如果是这种情况，那么您需要检查您的设备是否具有活动的网络连接....

我认为[这个链接](https://stackoverflow.com/questions/6493517/android-detect-if-device-has-internet-connection)会有所帮助...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:51:01.037

做这样的事情

```
// this is inner to activity class
class MyAsyncTask extends AsyncTask {
...
    @Override
    protected Void doInBackground(String... params) {

        try {
            Log.e(TAG, "inside doInBackground");
            rotaArray = nfcscannerapplication.loginWebservice.getRota(params[0], params[1]);

        } catch (IOException e) {
           HandleNetworkError(e);
           e.printStackTrace();
        }
        return null;

    }
}
// Some where in your activity class.
void HandleNetworkError(Exception e) {
    // Do whatever with the exception message, eg display it in a dialog.
    ...
} 
```

# c++ - 根据字符串定义变量

> ID：12564226
> 
> 赞同：0
> 
> 时间：2012-09-24T11:34:09.767
> 
> 标签：c++

如何根据字符串定义变量。我已经定义了很多类。但是我想根据一些字符串创建这个类的变量。

代码看起来像这样。

```
class AA {};
class BB {};
class CC {
    CC(void *pt);
    virtual ~CC();
};
......

void test(char *ss,void *pt=NULL) {
    //??????How to do?

}

int main() {
    a1=test("AA");    //a1=new AA();
    a2=test("AA");    //a2=new AA();
    b1=test("BB");    //b1=new BB();
    c1=test("CC",pt); //c1=new CC(pt);
} 
```

或者，您可以将其视为 URL 和句柄函数。std::map 是根据字符串获取类实例的常用方法。但不能为变量创建新实例。我希望根据字符串得到一个新的实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:38:01.310

C++ 是一种强类型语言，所以这在你现在拥有它是不可能的。

最好的情况是，您将使用通用基类`AA`, `BB`，`CC`然后使用[factory](http://en.wikipedia.org/wiki/Abstract_factory_pattern)。你不能只写：

```
a1=test("AA");    //a1=new AA();
a2=test("AA");    //a2=new AA();
b1=test("BB");    //b2=new BB();
c1=test("CC",pt); //b2=new CC(pt); 
```

没有定义变量的类型。

例如：

```
class Base{};
class AA : public Base {};
class BB : public Base {};

Base* create(const std::string& what)
{
   if (what == "AA")
       return new AA;
   if (what == "BB")
       return new BB;
   return NULL;
}

int main()
{
    Base* a;
    a = create("AA");
} 
```

Alternitively, you should use smart pointers. If you don't you'll have to manage the memory yourself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:43:05.750

You probably want you function to return something, either `void*` or, preferably, a [smart] pointer to a common base. The string should probably be passed as `char const*` or as `std::string const&`. Within the function you either directly compare the argument and you call the appropriate allocation or you create a `std::map<std::string, FactoryFunction>` to look up a factory function based on the string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:07:11.507

Maybe instead of using string names of types - use types as they are. To do this - use templates.

```
class AA {};
class BB {};
class CC {
public:
    CC(void *pt) {}
    virtual ~CC() {}
};

template <class T>    
T* test() {
    return new T();

}
template <class T>    
T* test(void *pt) {
    return new T(pt);

}

int main() {
    void* pt;
    AA* a1=test<AA>();    //a1=new AA();
    AA* a2=test<AA>();    //a2=new AA();
    BB* b1=test<BB>();    //b1=new BB();
    CC* c1=test<CC>(pt); //c1=new CC(pt);
} 
```

# sql - 如何将循环转换为基于表的查询？

> ID：12564227
> 
> 赞同：2
> 
> 时间：2012-09-24T11:34:10.830
> 
> 标签：sql, sql-server-2008, set-based

我有一个`IDTable`包含一列的表，还有一个带有参数的`ID`表值函数`MyProcedure`。这个参数是我的专栏`ID`。此函数返回一个表。我需要为 column 中的每个值调用此函数`ID`。我有这样的代码：

```
Declare @ResultTable table(
  ClientID nvarchar(50) null,
  [Date] datetime null,
  Item varchar(100) null
)

Declare @IDTable table(
    id int
 )

 declare @counter as int 
 set @counter = isnull( (select max(id) from @IDTable),0) 
 while @counter<>0 
 begin 
    set @ID = (select id from @IDTable where id=@counter)

    insert into @ResultTable
       select ClientID
              [Date],
              Item
       from MyProcedure (@ID)

    delete from @IBTable where id=@counter 
    set @counter=isnull((select max(id) from @IBTable),0) 
 end 
```

我需要删除 while 循环并制作基于集合的替代方案。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:43:05.450

您可以使用`CROSS APPLY`：

```
 insert into @ResultTable
   select   b.ClientID,
            b.[Date],
            b.Item
   from     @IDTable a
   CROSS    APPLY MyProcedure(a.id) b 
```

# asp.net - 从 youtube 获取相应用户 ID 的视频

> ID：12564229
> 
> 赞同：-2
> 
> 时间：2012-09-24T11:34:12.713
> 
> 标签：asp.net, c#-4.0, youtube-api

我在以下网址中使用了不同的用户 ID -“https://gdata.youtube.com/feeds/api/users/userid/uploads”，但我无法获取属于该相应用户的视频，而不是我得到以下错误“请求执行失败：[https](https://gdata.youtube.com/feeds/api/users/ashok/uploads) ://gdata.youtube.com/feeds/api/users/ashok/uploads “我需要知道为什么会出现这种异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:36:48.847

我收到消息：`User's`帐户已关闭`

有关更多详细信息，请查看 youtube API

[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

# ios6 - iOS 6 dateFromString 返回错误的日期

> ID：12564235
> 
> 赞同：2
> 
> 时间：2012-09-24T11:34:40.687
> 
> 标签：ios6

我最近升级到 iOS 6，发现 dateFromString 工作不正常，除非我的 dateFormat 有问题。它在升级之前工作。

**代码：**

```
NSString *string = @"2012-09-24 - Sun";
NSLog(@"string = %@", string);
NSDateFormatter *df = [[NSDateFormatter alloc] init];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en-US"];
[df setLocale:locale];
[df setDateFormat:@"yyyy-MM-dd - EEE"];
NSDate *date = [df dateFromString:string];
NSLog(@"date = %@", date); 
```

**输出：**

```
string = 2012-09-24 - Sun
date = 1999-12-26 05:00:00 +0000 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T14:59:51.713

看起来格式化程序更改了 iOS 6 中的规格：

*   OS X v10.8 和 iOS 6.0 中的格式化程序使用版本[tr35-25](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)。
*   iOS 5.0-5.1 中的格式化程序使用版本[tr35-19](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T07:33:48.917

请检查：

```
NSString *string = @"2012-09-24 - Sun";
NSLog(@"string = %@", string);
NSDateFormatter *df = [[NSDateFormatter alloc]init];
[df setDateFormat:@"yyyy-MM-dd - EEE"];
NSDate * date = [df dateFromString: string];
NSDate * sourceDate = date;
NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];
NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;   
date = [[NSDate alloc] initWithTimeInterval:interval sinceDate:date];
NSLog(@"date = %@", date); 
```

# c# - LINQ to Entities 不支持 LINQ 表达式节点类型

> ID：12564236
> 
> 赞同：0
> 
> 时间：2012-09-24T11:34:40.537
> 
> 标签：c#, linq, entity-framework, linq-to-entities, iqueryable

当我尝试在 LINQ to Entities 中运行以下查询时出现错误：

```
 var query = DBConn.myView
                            .Select(dm => new App.DTOs.MyDTO
                            {
                                ID = dm.ID,
                                Prop1 = dm.Prop1
                                ....
                            })
                            .Where(dm => dm.TypeID != 4); 
```

错误消息是：

```
LINQ expression node type 'TypeID' is not supported in LINQ to Entities 
```

通话失败`.ToList()`：

```
private List<MyDTO> lstDTO;
lstDTO = query.ToList(); 
```

但是，如果我`.Where()`从查询中删除它，它就可以工作。有没有办法在`Where`这个查询中使用该子句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:36:31.297

你只需要交换你的`Select`和`Where`部分：

```
var query = DBConn.myView
              .Where(dm => dm.TypeID != 4)
              .Select(dm => new App.DTOs.MyDTO
                            {
                                ID = dm.ID,
                                Prop1 = dm.Prop1
                                ....
                            }); 
```

# java - Graphics2D 对象以不同方式呈现同一对象的透明度

> ID：12564239
> 
> 赞同：1
> 
> 时间：2012-09-24T11:34:59.860
> 
> 标签：java

我的问题如下。我正在使用标准的 SWING 事件调度线程来绘制一个具有低 alpha 值的椭圆，并在中心绘制另一个较小的椭圆来表示其中心。当我运行模拟时，我使用一个单独的线程，并允许用户在模拟运行时添加这些障碍。现在，当单独的线程未运行但单独的模拟线程正在运行时，这可以正常工作，较大的椭圆（应该用低 alpha 绘制）不会用低 alpha 值绘制，因此会创建一个实体大红色椭圆形。为什么会发生这种情况，我该如何解决？

如果我的解释不太清楚，请告诉我。

```
private void drawObstacleCircle(Obstacle o, Graphics2D g)
{
    final double OBSTACLE_CENTER_RADIUS = 2.0;
    final double OBSTACLE_RADIUS = o.getRadius(true);

    float scaleToUse = Math.max(0.8f, scale);

    Vector pos = o.getPosition();

    int xPos = (int) (pos.getX() * getBufferedHeightMap().getWidth());
    int yPos = (int) (pos.getY() * getBufferedHeightMap().getHeight());

    Point positionPoint = convertToPanelPoint(new Point(xPos, yPos));

    // Draw the circle where the Obstacle's center is
    Graphics2D g1 = (Graphics2D) g.create();

    g1.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g1.setColor(Color.RED);
    g1.fillOval(positionPoint.x - (int) (OBSTACLE_CENTER_RADIUS * scaleToUse), positionPoint.y - (int) (OBSTACLE_CENTER_RADIUS * scaleToUse), (int) (OBSTACLE_CENTER_RADIUS * 2 * scaleToUse), (int) (OBSTACLE_CENTER_RADIUS * 2 * scaleToUse));

    Color c = Color.RED;
    g1.setColor(new Color(c.getRed(), c.getGreen(), c.getBlue(), 100));
    g1.fillOval(positionPoint.x - (int) (OBSTACLE_RADIUS * scaleToUse), positionPoint.y - (int) (OBSTACLE_RADIUS * scaleToUse), (int) (OBSTACLE_RADIUS * 2 * scaleToUse), (int) (OBSTACLE_RADIUS * 2 * scaleToUse));

    g1.dispose();
    g2.dispose();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:05:05.773

没有围绕它的代码很难判断，但在我看来，在开始重绘场景之前您并没有擦除画布。添加新线程是否会导致`drawObstacleCircle`使用相同的图形上下文多次调用该方法？

这意味着该方法绘制在已经绘制的场景之上。因此，在先前绘制的椭圆的位置上一次又一次地绘制一个稍微透明的椭圆，直到该区域看起来是纯红色。

# jquery - 在主干中绑定 Jquery 事件

> ID：12564252
> 
> 赞同：1
> 
> 时间：2012-09-24T11:35:51.483
> 
> 标签：jquery, events, backbone.js

我有一个 jquery datepicker 组件，我正在尝试使用主干来收听。jquery 文档提到了 onSelect 事件，所以我尝试执行以下操作：

```
events: {'onSelect #date-picker': 'dateSelected'},

dateSelected: function(){
   console.log('date selected');
} 
```

但不会调用 dateSelected 函数。像 click 这样的标准 javascript 事件被调用。我错过了什么吗？

提前致谢

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:44:44.090

尝试使用`select`而不是`onSelect`：

```
events: {'select #date-picker': 'dateSelected'},

dateSelected: function(){
   console.log('date selected');
} 
```

# jquery - 在回发时关闭颜色框

> ID：12564254
> 
> 赞同：0
> 
> 时间：2012-09-24T11:36:00.127
> 
> 标签：jquery, asp.net, colorbox

我正在使用 colorbox 在 iframe 中打开页面。在该页面中，我使用 ajax 文件上传异步上传图像，然后绑定新图像的数据列表。我在同一页面上有一个按钮来使用此代码关闭 iframe

```
 protected void Cancel_Click(object sender, EventArgs e)
    { 
       ClientScript.RegisterClientScriptBlock(this.GetType(), "none", "<script>$(function(){closeIframe()});</script>"); 
    } 
```

当我不上传任何图像并单击它时，它工作正常。它关闭了颜色框，但是当我上传图像并单击它时，它会将我带到另一个页面并给出以下 js 错误。

> 未捕获的类型错误：无法调用未定义的方法“关闭”

这是我用来关闭弹出窗口的功能

```
<script>
function closeIframe() {
    parent.$.fn.colorbox.close();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:11:59.863

您可以发布指向您的项目的链接吗？没有它，我们所能做的就是猜测。所以这里有一个猜测...

你说“它带我到不同的页面”。如果该页面没有加载 ColorBox，您将收到您所看到的错误。

那个“不同的页面”是原始页面的 iFrame 吗？如果不是，您将收到您所看到的错误。

要开始深入研究，请执行以下操作： * 重现错误 * 在生成错误的页面上，检查 DOM 以查看是否加载了 ColorBox。* 如果不是，请重新考虑您的页面导航或重新考虑如何使用 ColorBox。

发布指向您的项目的链接以获得更好的帮助。

问候。

# php - 使用 PHP/MySQL 从包含多个值的列中提取单个值

> ID：12564255
> 
> 赞同：0
> 
> 时间：2012-09-24T11:36:05.647
> 
> 标签：php, mysql, database

我使用 implode 函数将 select 语句中的多个值插入到单个列中。现在我想分别检索这些值以进行进一步的查询。我有一个学生表，我在其中使用内爆函数 implode(',', $_POST['aoi']); 将他们不同的兴趣区域存储在单个列中。表的结构是这样的：

```
id   |  Name   |           AOI
-------------------------------------------
101  | Paul    | Hardware,Networking
102  | Fred    | Finance,Insurance,Banking 
```

现在我想根据他们的兴趣分别检索这些学生数据。我尝试使用爆炸功能提取数据。但它以数组格式返回数据。

而且我必须单独提取感兴趣的区域。谁能告诉我如何从包含多个值的列中提取单个值。这样我就可以执行我的进一步查询。

像 $query = "select student.id,student.Name from student where AOI = 'Insurance'";

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:40:35.913

您的数据库结构从根本上是错误的，并且很可能会导致进一步的可伸缩性问题。您应该研究[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)的概念。在这种特殊情况下，您应该使用多对多关系：

学生们：

```
id   | name  
---------------
101  | Paul    
102  | Fred 
```

学生兴趣

```
id   |  student_id  | interest_id
---------------------------------
1    |  101         | 1
2    |  101         | 2
3    |  102         | 1 
```

兴趣

```
id   | interest
----------------
1    | Insurance
2    | Networkings 
```

# function - 如何在 Cucumber 中编写函数？

> ID：12564260
> 
> 赞同：0
> 
> 时间：2012-09-24T11:36:16.210
> 
> 标签：function, testing, cucumber, watir-webdriver

如何使用 watir-webdriver 在黄瓜中编写函数？我的意思是，我有相同的代码，我不想总是重写它。我只想写这个函数然后使用它。这将帮助我缩短代码。

例如，这个函数：

```
def login
  @b.text_field(:id => `login`).set `login`
  @b.text_field(:id => `passw`).set `passw`
  @b.button(:id => `submit`).click
end 
```

...然后我想以这种方式使用它：

```
get :login 
```

...但我不知道如何正确编写它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:00:28.300

```
def login
  @b.text_field(:id => `login`).set `login`
  @b.text_field(:id => `passw`).set `passw`
  @b.button(:id => `submit`).click
end

login 
```

# iphone - 根据距离和度数获取纬度经度

> ID：12564269
> 
> 赞同：1
> 
> 时间：2012-09-24T11:36:39.017
> 
> 标签：iphone, objective-c, ios, core-location, latitude-longitude

我需要根据当前的经纬度、距离和度数来获取经纬度。

我想知道的是，

> 例如，如果我当前的经纬度是 40.7142, 74.0064
> 我有距离，比如 10 英里
> 我有度数，比如从北顺时针方向 40 度

现在基于上述数据，我需要计算该点的另一个经纬度。

如何根据距离和度数计算经纬度？

谢谢 ...

# c# - 为任务/意图提供单声道跨平台支持

> ID：12564272
> 
> 赞同：2
> 
> 时间：2012-09-24T11:36:44.740
> 
> 标签：c#, mvvm, mono, xamarin.android, mvvmcross

我有一个适用于 WP7 和 Android 的应用程序，该应用程序必须支持“任何”连接类型（WiFi、NFC、蓝牙等）

然后我用 MVVMCross [https://github.com/slodge/MvvmCross创建了一个分层模型](https://github.com/slodge/MvvmCross)

我有一个接口，例如 Android 蓝牙必须实现

```
interface IConnectionService
{
    List<TargetDevice> FindDevices();
    void Connect(TargetDevice targetDevice);
    void Disconnect();
    byte[] Read();
    void Write(byte[] command);
} 
```

我希望能够请求用户进行蓝牙访问，但我不想将我的 UI 专门编程为 Android 蓝牙，所以视图和视图模型不应该知道使用了哪个意图，所有这些都应该由类处理实现 IConnectionService

问题是它也应该适用于不使用意图的 Windows Phone，它使用任务，所以我如何制作一个界面，允许我在不知道需要什么类型的请求的情况下发出意图请求或任务请求?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:53:19.383

这类似于 MvvmCross 允许用户拨打电话的方式。

使用此模式时：

ViewModel 代码通过接口使用与平台无关的服务 - 例如：

```
public interface IMvxPhoneCallTask
{
    void MakePhoneCall(string name, string number);
} 
```

被消耗

```
 protected void MakePhoneCall(string name, string number)
    {
        var task = this.GetService<IMvxPhoneCallTask>();
        task.MakePhoneCall(name, number);
    } 
```

在[https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.Core/ViewModels/BaseViewModel.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.Core/ViewModels/BaseViewModel.cs)

应用程序设置代码为接口注入平台特定的实现 - 例如：

```
 RegisterServiceType<IMvxPhoneCallTask, MvxPhoneCallTask>(); 
```

在 WP7 - 这使用`PhoneCallTask`- [https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/WindowsPhone/Platform/Tasks/MvxPhoneCallTask​​.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/WindowsPhone/Platform/Tasks/MvxPhoneCallTask.cs)

```
public class MvxPhoneCallTask : MvxWindowsPhoneTask, IMvxPhoneCallTask
{
    #region IMvxPhoneCallTask Members    

    public void MakePhoneCall(string name, string number)
    {
        var pct = new PhoneCallTask {DisplayName = name, PhoneNumber = number};
        DoWithInvalidOperationProtection(pct.Show);
    }

    #endregion
} 
```

在 Droid 中 - 它使用`ActionDial Intent`- [https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Android/Platform/Tasks/MvxPhoneCallTask​​.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Android/Platform/Tasks/MvxPhoneCallTask.cs)

```
public class MvxPhoneCallTask : MvxAndroidTask, IMvxPhoneCallTask
{
    #region IMvxPhoneCallTask Members

    public void MakePhoneCall(string name, string number)
    {
        var phoneNumber = PhoneNumberUtils.FormatNumber(number);
        var newIntent = new Intent(Intent.ActionDial, Uri.Parse("tel:" + phoneNumber));
        StartActivity(newIntent);
    }

    #endregion
} 
```

In Touch - 它只使用 Urls - [https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Touch/Platform/Tasks/MvxPhoneCallTask ​​.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Touch/Platform/Tasks/MvxPhoneCallTask.cs)

```
public class MvxPhoneCallTask : MvxTouchTask, IMvxPhoneCallTask
{
    #region IMvxPhoneCallTask Members

    public void MakePhoneCall(string name, string number)
    {
        var url = new NSUrl("tel:" + number);
        DoUrlOpen(url);
    }

    #endregion
} 
```

* * *

在 mvvmcross 的 vnext 版本中，这种方法使用插件进一步形式化 - 请参阅[http://slodge.blogspot.co.uk/2012/06/mvvm-mvvmcross-monodroid的“便携式”演示文稿中对这些方法的简要介绍-monotouch-wp7.html](http://slodge.blogspot.co.uk/2012/06/mvvm-mvvmcross-monodroid-monotouch-wp7.html)

例如，在 vNext 中，上面的电话代码包含在 PhoneCall 插件中 - [https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/PhoneCall](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/PhoneCall)

* * *

您的任务的挑战之一可能是“任何”这个词 - 平台实现的差异可能会导致难以定义跨平台接口，该接口适用于 NFC、蓝牙等任何一个平台，更不用说所有平台了。他们。

# php - 结帐一页选择地址事件

> ID：12564273
> 
> 赞同：0
> 
> 时间：2012-09-24T11:36:47.957
> 
> 标签：php, events, magento

每当客户更改或在结帐页面上选择地址时，我都必须更改订单总金额。我不认为存在任何与之相关的magento事件。

有没有办法做到这一点？

# wpf - 单击 Windows 8 的一次部署

> ID：12564276
> 
> 赞同：3
> 
> 时间：2012-09-24T11:36:53.820
> 
> 标签：wpf, clickonce, signing

一旦应用程序通过签名发布到服务器，我就会单击 WPF。它可以完美运行，并且可以毫无问题地识别客户端计算机中的发布者。但在 Windows 8 中，即使它运行良好，它也会在下载过程结束时显示智能屏幕过滤​​器。其中显示发布者未经过验证。

我试过手动签署EXE。但没有运气。

MS 家伙似乎关闭了相同错误的报告。这真的固定了吗？

我正在使用 Windows 8 RTM 企业版。

# linux - g 流媒体音频错误

> ID：12564278
> 
> 赞同：0
> 
> 时间：2012-09-24T11:36:56.787
> 
> 标签：linux, gstreamer

我有 ag streamer 命令运行良好

> gst-launch-0.10 v4l2src ！视频缩放方法=0！视频/x-raw-yuv,width=852,height=480,framerate=(fraction)24/1 ！ffmpeg色彩空间！x264enc pass=pass1 threads=0 bitrate=900 tune=zerolatency ！flvmux 名称=多路复用器！rtmpsink location='rtmp://.../live/testing' 解复用器。阿尔萨斯！音频/x-raw-int,rate=16000,channels=1,depth=16 ！音频转换！音频率！音频重采样！*faac 比特率=96000 ！音频/mpeg,mpegversion=4,流格式=原始！多路复用器。

但是音频样本正在减少，并且在流式传输时，终端上会显示一些错误消息。

> gstbaseaudiosrc.c(840): gst_base_audio_src_create (): /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0: 丢弃 3520 个样本。这很可能是因为下游无法跟上并且消耗样本太慢。

我尝试通过降低音频采样率，但没有奏效，所以帮助我解决了这个问题。提前致谢

阿米斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:03:03.437

尝试使用 Fluendo 编解码器包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:01:59.587

警告意味着您的 CPU 过载。为什么不首先尝试使用 speed-preset=1 或 x264enc 的一些小值。

此外，在捕获和编码器之间添加一个队列，以便它们可以在不同的线程上运行。

# asp.net - css 样式复选框在所有浏览器中看起来都像 safari

> ID：12564281
> 
> 赞同：0
> 
> 时间：2012-09-24T11:36:59.373
> 
> 标签：asp.net, asp.net-mvc-3, css

我有 asp.net mvc 项目，许多复选框客户端给了我 psd，其中 chech 框是白色和黑色的白色边框。

```
<input name="24" type="checkbox" value="true" />
<input name="24" type="hidden" value="false" />
<label for="Industry__Manufacturing__and_Technology">Industry</label>
<br />
<input name="25" type="checkbox" value="true" />
<input name="25" type="hidden" value="false" />
<label for="Intelligence">Intelligence</label>                        
<br />
........... 
```

我喜欢上面自动生成的html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:39:55.503

使用本机控件是不可能的。操作系统比浏览器更多地设置表单元素的样式。您需要使用某种替换技术，例如[Uniform](http://uniformjs.com/)（如果您使用 jQuery）将起作用

# c++ - 几分钟后动态分配的工作线程泄漏，尽管它不应该

> ID：12564287
> 
> 赞同：1
> 
> 时间：2012-09-24T11:37:27.863
> 
> 标签：c++, memory-leaks

Visual Studio 2010 SP1，32 位 exe，戴尔酷睿 i7。

为清晰而编辑：

我正在追逐生产代码中的一个小内存泄漏。它使用在工作线程上执行的 lambda 将事件分派给侦听器。这是一个关于如何导致泄漏的提炼示例。如果您让它运行足够长的时间（几分钟），该样本就会泄漏。谁能告诉我为什么？我敢肯定，当它被指出时，我会踢自己。谢谢。

```
#include "stdafx.h"
#include <process.h>
#include <cassert>
#include <tchar.h>
#include <stdlib.h>
#include <stdio.h>

//////////////////////////////////////////////////////////////////////////
template <class Func>
static void __cdecl WorkerThreadProc(void* pData) {
    assert(pData != nullptr);
    Func* pFunc = static_cast<Func*>(pData);
    (*pFunc)();   // Execute the task.
    delete pFunc; // Clean up.
}
//////////////////////////////////////////////////////////////////////////
template <class Func>
static void BeginThread(Func fn) {
    Func* pFn = new Func(fn);
    if (_beginthread(WorkerThreadProc<Func>, 0, pFn) == -1L) {
        errno_t err;
        _get_errno(&err);
        assert(false);        
        delete pFn; // Clean up.
    }
}
//////////////////////////////////////////////////////////////////////////
int main(int, char**)
{
    printf_s("CTRL-C to quit:\n");
    while (true) {
        BeginThread( []()->void{} ); // Launch worker to execute task.
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:08:10.670

编辑2：自从写了这个答案以来，问题已经改变了。我将按原样保留答案，但请注意，它不再与（现在已更改）问题非常相关。

* * *

不知道任何泄漏，但是`new`-ing 和`void*`丢失类型信息的东西都是完全*没有必要*的。

所以，只需删除那些东西。

否`new`= 没有泄漏。

此外，对于那些`new`有必要的情况，请使用智能指针进行清理。

这也将有助于防止内存泄漏（尽管不像不做那样有保证，也就是说`new`，Java 中可能会发生内存泄漏，这让许多 Java 程序员大吃一惊）。

* * *

编辑：我认为[@interjay 的评论](https://stackoverflow.com/questions/12564287/c11-lambda-as-function-arg-why-does-my-code-leak/12564789#comment16925007_12564287)，“如果你的`main`函数创建线程的速度比线程可以执行和关闭的速度快，你会看到看起来像泄漏的东西”，对于明显的内存泄漏，可能一针见血。

# qml - 如何将属性动态添加到 QML 元素？

> ID：12564289
> 
> 赞同：7
> 
> 时间：2012-09-24T11:37:36.627
> 
> 标签：qml

我想将属性动态添加到 QML 元素：

```
Item {
 id: dynamicProperty;
 property int first;

 Component.onCompleted: {
  /* once this block of code is executed, i want to add
     property int second; property bool third; property variant fourth;
  */
 }

} 
```

有什么办法可以完成上述任务。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-10-19T07:35:44.330

一方面：我不明白为什么有人要这样做，因为它完全是非声明性的。然而，由于 QML 扩展了 JavaScript，而后者是一种原型语言，**是的，你可以**做到。

关于操作方法，我建议阅读关于[如何定义属性](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)的 JS 文档。但是我写了一个简短的例子来演示它的使用。

```
MouseArea {
    anchors.fill: parent
    onClicked: console.log(rect.newProp)
}

Rectangle {
    id: rect
    width: 50
    height: 50
    x: 50
    y: 50
    color: 'green'

    MouseArea {
        anchors.fill: parent
        onClicked: { var obj = Object.defineProperty(rect, 'newProp',
                                                     {
                                                         enumerable: false,
                                                         configurable: false,
                                                         writable: false,
                                                         value: '50'
                                                     })}
    }
} 
```

第一次单击背景时，将打印“未定义”。单击矩形后，它将变为“50”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T18:26:11.027

我不认为 QML 旨在支持动态属性创建。

根据您的用例，这可以使用“脚本实例”（我编造了这个术语）来解决。基本上，每个没有`.pragma library`声明的导入脚本的 QML 组件实例化都将使用它自己在脚本中声明的全局变量的副本。

例如，您可以查看 PageStack (qt-components)[代码](http://qt.gitorious.org/qt-components/qt-components/blobs/master/src/meego/PageStack.qml)。

有`import "PageStack.js" as Engine`声明，它后来提到使用全局变量的调用函数，就像它是实例变量一样。

如果您正在寻找一种将成员添加到 QML 组件的方法并且不需要属性更改通知，那么“脚本实例”就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-05T02:54:19.227

也许你可以这样做：

```
Item {
    id: dynamicProperty;
    property int first;
    property var extraData;

    Component.onCompleted: {
        /* once this block of code is executed, i want to add
           property int second; property bool third; property variant fourth;
        */
        var data;
        data["second"] = 0;
        data["third"] = false;
        ...
        extraData = data;
   }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-04-21T17:46:17.610

我不确定是否可以向 qml 对象添加动态属性，购买一种最简单的形式是禁用、隐藏或更改属性，例如：

```
if(manual==true)
{
    icon.visible=true
}
else {
    icon.visible=false
} 
```

或者您可以创建项目的动态组件或使用 loader 元素更改视图。

# c++ - 什么是 c++ 单态类，这会是一个例子吗？

> ID：12564291
> 
> 赞同：-4
> 
> 时间：2012-09-24T11:37:46.380
> 
> 标签：c++, oop, class, monomorphism

请告诉我，如果以下类是单态的？

是什么使它具有单态性？单态实际上是什么意思？

```
class Foo
{
public:
    Foo(int n)
    {
        this->m = n;
    }

    void print()
    {
        std::cout << this->m << std::endl;
    }

private:
    int m;
}; 
```

编辑：

在类 Boo 的上下文中：

```
class Boo
{
 public:
  Boo& Boo::operator=(const Boo &boo)
  {
     *foo1 = *boo.foo1;
     *foo2 = *boo.foo2;

     return *this;
  }

 private:
   Foo* foo1;
   Foo* foo2;
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T12:04:02.033

首先，为了回答这个问题，我们需要检查`monomorphic`真正的含义。为此，让我们分解这个词：

```
单态

```

所以，如果我们假设**mono = one**和**morphic = transformable**（至少对于这个例子 - 不要因为字典语义而杀了我）

所以，我们可以把它理解为很多东西，这里有一些是我想不到的：

1.  我们的班级只能换一次
2.  或者它可以用作多态的对立面（意味着它不能被子类化）
3.  最后，它可以参考数学的属性：[http ://en.wikipedia.org/wiki/Monomorphism](http://en.wikipedia.org/wiki/Monomorphism)

因此，假设答案 3 不是我们正在寻找的（在这种情况下，您必须找到更好的答案，因为那篇文章令人困惑），让我们逐步介绍第一个和第二个。

**1.我们的班级只能换一次**

在我看来，这是最可能的意思。乍一看，您的对象是*单态*的，这意味着它只能通过构造函数（指定构造函数或内置复制构造函数）更改一次。

在任何具有读写内存的计算机中，这不可能是真的，因为如果您愿意/需要，几乎总有一种方法可以手动设置内存中的位。

但是，除非使用您提供的接口，否则您的类是**单态**的，因为它的成员 ( `m`) 仅通过构造函数设置。

**2\. 我们的类不是多态的**

这个问题的答案有点复杂。与大多数语言不同，C++ 有两种形式的多态性。在传统的 OO 意义上，它能够创建被子类覆盖的函数，该子类将被标记为`virtual`. 但是，您不这样做，因此您的类不可能实现 OO 多态性。

然而，正如我之前所说，C++ 中有不止一种类型的多态性可用。第二种类型称为`template polymorphism`or `function polymorphism`，它在整个 STL 中都使用（主要用于迭代器），它的工作方式有点像这样：

```
template<typename aImpl>
void printA(const aImpl &a)
{
    a.print();
}

class A {
    public:
    void print() { puts("I'm in A!"); }
}; 
```

这是一个完全有效的接口，它会按预期工作。但是，没有什么可以阻止将以下类放入函数中：

```
class B {
    public:
    void print() { puts("I'm in B!"); }
}; 
```

这显然会打印不同的值。

归根结底，C++ 是一门复杂的语言，如果你真的想让一个类不能是多态的，你需要让所有的成员和函数都是私有的，这违背了拥有对象的初衷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-06T18:31:27.330

我遇到了这篇文章，其中术语“单态”在 C++ 语言的上下文中使用，从 1997 年[开始的赋值运算符剖析](http://www.icu-project.org/docs/papers/cpp_report/the_anatomy_of_the_assignment_operator.html)。这个术语似乎很少在其他地方使用，这意味着它可能在 C++ 中浮动在 90 年代循环，但没有获得太大的牵引力，不再使用。文章指出：

> 问题如下：
> 
> 考虑以下类定义：
> 
> ```
> class TFoo : public TSuperFoo {
>     TBar* fBar1;
>     TBar* fBar2;
>     // various method definitions go here...
> } 
> ```
> 
> 你有一个类 ，`TFoo`它是一个类 的后代`TSuperFoo`，它有两个数据成员，它们都是指向类对象的指针`TBar`。出于本练习的目的，将两个指针都考虑为具有拥有语义和`TBar`单**态类**。为这个类编写赋值运算符。

查看各种字典定义，最常见的词根“morphic”被定义为“具有特定形式或形状”，然后是一些指示它通常与某些前缀一起使用，例如 poly（多态）或 homo（同态）。

前缀“mono”最常被定义为“single”或“one”或“lone”，通常与一些后缀一起使用，例如“plane”（单翼或单翼飞机）或“rail”（单轨或单轨或追踪）。

在这种情况下以及似乎是问题的情况下，“单态”（单态）被用作“多态”（多态）的对立面。单态类是不用作任何其他类的基类也不从另一个类派生的类。

单态类的更严格定义是该类还必须仅使用单态类或内置数据类型。单态类不得包含任何多态类作为其定义或行为的一部分。

这确实提出了一个严格的单态类是否可以包含模板化变量或方法的问题。我的第一个直觉是，只要模板创建一个单态类就可以了。换句话说，如果编译器正在为您编写一个单态类，那么它就像是 Sally 在下排隔间中编写它一样。

那么也许严格的定义应该排除运行时多态性？

因此，通过第一个不太严格的单态类定义，`Foo`问题中的类似乎是单态的，因为它不是从任何其他类派生的，也没有`virtual`析构函数，暗示它不打算用于派生另一个类类，也没有任何`virtual`方法。

然而，它确实`std::cout`在该`print()`方法中使用，并且`std::cout`绝对是多态的。所以也许更准确地说这是一个半单态类，因为它使用了一个多态类？

看起来单态类是独立的。但是，我们如何编写一个类，使其独立，编译器将标记任何从该类派生另一个类的尝试。

C++ 允许一个类通过从现有类派生一个新类成为其他类的超类。关于什么是可能的，多态性如何成功工作，有时有许多非常复杂的规则，但是最终将`final`关键字（C++11）与一个类一起使用是唯一合理的方法来创建一个类，另一个类无法导出。

虽然浏览了一下，我发现这篇文章[Simulating final class in C++](http://www.geeksforgeeks.org/simulating-final-class-in-c/)，它提供了一个使用`private`构造函数和`virtual`继承的方法。

> ```
> /* A program without any compilation error to demonstrate that instances of 
>    the Final class can be created */
> #include<iostream>
> using namespace std;
> 
> class Final;
> 
> class MakeFinal
> {
> private:
>     MakeFinal() { cout << "MakeFinal constructor" << endl; }
>     friend class Final;
> };
> 
> class Final : virtual MakeFinal
> {
> public:
>     Final() { cout << "Final constructor" << endl; }
> };
> 
> int main(int argc, char *argv[])
> {
>     Final f;
>     return 0;
> } 
> ```

# sql - 从多个 SQl 服务器实例到中央 SQL 服务器的数据用于报告目的

> ID：12564294
> 
> 赞同：0
> 
> 时间：2012-09-24T11:37:49.097
> 
> 标签：sql, ssis, replication, instances

我有多个（超过 20 个位置，每年有 1000 万次事务）位置与 SQL 服务器实例。

我需要将所有这些事务（在每个站点上具有独立身份）从多个站点移动到总部的主 SQL 实例，仅用于报告目的。我需要在身份列和复制中不使用 Bigint 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:55:49.147

尝试使用 NEWID() 或 NEWSEQUENTIALID()

# android - 我想在点击按钮后打开一个联系表单（Android）

> ID：12564304
> 
> 赞同：-3
> 
> 时间：2012-09-24T11:38:18.580
> 
> 标签：android

我正在设计一个带有按钮的表单。当我点击那个按钮时，我想打开一个新的注册表单。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:40:04.390

本教程向您展示了该做什么 - [http://www.itcsolutions.eu/2011/08/31/android-tutorial-how-to-create-and-display-a-new-form-window-or-activity /](http://www.itcsolutions.eu/2011/08/31/android-tutorial-how-to-create-and-display-a-new-form-window-or-activity/)

如果你想要这个结果：

![在此处输入图像描述](../Images/dac7a7b729e8d1ee35638074c92729ef.png)

# asp.net - 使用大 URL 列表调用 asp.net MVC 3 控制器时出现 404 错误

> ID：12564308
> 
> 赞同：0
> 
> 时间：2012-09-24T11:38:46.537
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iis

我有一个必须放入 GET 请求的操作。

该 URL 是实时构建的，如下所示：

> [https://我的域名。COM / MyController / MyAction？MyParameter = 8259％2c8318％2c8201％2c81888％2c7155％2c6​​894％2c8221％2c8187％2c7030％2c8214％2c7489％2c8145％2c8223％2c8208％2c823％2c8208％2c0％2c8292％2c6931％2c7072％2c7007％2c8195％ 2C8235％2C7493％2C7525％2C7492％2C8262％2C7491％2C7013％2C8157％2C7180％2C7181％2C7182％2C7183％2C7421％2C7422％2C7500％2C7501％2C8238％2C8239％2C8240％2C8241％2C7710％2C7711％2C7712％2C7713％2C8068％ 2C8432％2C7358％2C7008％2C8135％2C8307％2C8163％2C8164％2C8132％2C8182％2C8183％2C8081％2C8083％2C8109％2C8110％2C7681％2C7682％2C7683％2C7593％2C7594％2C7595％2C7546％2C7547％2C7548％2C7577％2C7578％ 2C7581％2C8300％2C8301％2C8302％2C8282％2C8283％2C8284％2C8311％2C8312％2C8313％2C8217％2C8218％2C8244％2C8245％2C8479％2C8482％2C8398％2C8399％2C8400％2C8401％2C8404％2C8407％2C8392％2C8394％2C6959％ 2c6960％2c6961％2c7041％2c7042％2c7043％2c8227％2c8228％2c8229％2c7638％2c7708％2c7118％2c80％2c7118％2c82m6898％2c68901％2c6900％2c6901％2c6902％2c6842％2c6843％2c6844％2c684％5％2C6846％2C6847％2C7361％2C7362％2C7363％2C7364％2C7365％2C7366％2C8165％2C8166％2C8167％2C8168％2C8169％2C8170％2C8247％2C8248％2C8249％2C8250％2C8251％2C8252％2C8099％2C8100％2C6903％2C6904％ 2C6905％2C6906％2C6907％2C6908％2C7704％2C8291％2C8253％2C7709％2C8277％2C7372％2C7282％2C7552％2C8205％2C7341％2C8264％2C7384％2C7701％2C7432％2C7625％2C7169％2C6912％2C8095％2C7481％2C8452％2C7062％ 2C7664％2C8088％2C8209％2C8278％2C6986％2C6978％2C7128％2C7440％2C6987％2C8224％2C8225％2C8178％2C8179％2C6889％2C6890％2C8191％2C8093％2C8230％2C7317％2C6895％2C8211％2C8226％2C8285％2C7266％2C7321％ 2C7445％2C7672％2C7453％2C7476％2C7533％2C6967％2C8054％2C7377％2C7188％2C8323％2C8105％2C7276％2C8202％2C8072％2C7689％2C8434％2C7075％2C7257％2C7379％2C6864％2C7570％2C8146％2C8147％2C8148％2C8149％ 2C7018％2C7019％2C7020％2C7021％2C8031％2C7044％2C7278％2C7486％2C8409％2C7707％2C8438％2C7378％2C7265％2C7176％2C7199％2C7706％2C7632％2C6998％2C7584％2C8171％2C7399％2C7125％2C6836％2C7535％2C7528％2C6968％2C7327％2C8319％2C8098％2C7543％2C6852％2C7103％2C6882％2C8426％2C8114％2C6957％2C6952％2C7527％2C6956％2C6953％2C8196％2C6989％2C7246％2C8272％2C8320％2C8324％2C6979％2C8315％ 2C8293％2C8294％2C8322％2C8204％2C7203％2C7326％2C7355％2C7087％2C7009％2C7498％2C7700％2C8113％2C8274％2C8325％2C8321％2C8116％2C7211％2C7252％2C7332％2C7023％2C7074％2C6977％2C7603％2C8096％2C7063％ 2C7014％2C7416％2C8190％2C8310％2C7032％2C7129％2C7136％2C7131％2C7187％2C7170％2C7159％2C7532％2C7651％2C7262％2C7670％2C7402％2C7403％2C7245％2C7235％2C7601％2C7316％2C7545％2C7343％2C7376％2C7665％ 2C7688％2C7374％2C7375％2C8041％2C7404％2C7409％2C7419％2C8422％2C7461％2C7438％2C7443％2C7487％2C7464％2C7515％2C7514％2C7512％2C7523％2C7598％2C8176％2C7544％2C7620％2C7652％2C7690％2C8330％2C8335％ 2C8418%2C8417%2C8421%2C8442%2C8458%2C8492%2C8457%2C8474%2C8483C6956％2C6953％2C8196％2C6989％2C7246％2C8272％2C8320％2C8324％2C6979％2C8315％2C8293％2C8294％2C8322％2C8204％2C7203％2C7326％2C7355％2C7087％2C7009％2C7498％2C7700％2C8113％2C8274％2C8325％2C8321％ 2C8116％2C7211％2C7252％2C7332％2C7023％2C7074％2C6977％2C7603％2C8096％2C7063％2C7014％2C7416％2C8190％2C8310％2C7032％2C7129％2C7136％2C7131％2C7187％2C7170％2C7159％2C7532％2C7651％2C7262％2C7670％ 2C7402％2C7403％2C7245％2C7235％2C7601％2C7316％2C7545％2C7343％2C7376％2C7665％2C7688％2C7374％2C7375％2C8041％2C7404％2C7409％2C7419％2C8422％2C7461％2C7438％2C7443％2C7487％2C7464％2C7515％2C7514％ 2C7512%2C7523%2C7598%2C8176%2C7544%2C7620%2C7652%2C7690%2C8330%2C8335%2C8418%2C8417%2C8421%2C8442%2C8458%2C8492%2C8457%2C8474%3C6956％2C6953％2C8196％2C6989％2C7246％2C8272％2C8320％2C8324％2C6979％2C8315％2C8293％2C8294％2C8322％2C8204％2C7203％2C7326％2C7355％2C7087％2C7009％2C7498％2C7700％2C8113％2C8274％2C8325％2C8321％ 2C8116％2C7211％2C7252％2C7332％2C7023％2C7074％2C6977％2C7603％2C8096％2C7063％2C7014％2C7416％2C8190％2C8310％2C7032％2C7129％2C7136％2C7131％2C7187％2C7170％2C7159％2C7532％2C7651％2C7262％2C7670％ 2C7402％2C7403％2C7245％2C7235％2C7601％2C7316％2C7545％2C7343％2C7376％2C7665％2C7688％2C7374％2C7375％2C8041％2C7404％2C7409％2C7419％2C8422％2C7461％2C7438％2C7443％2C7487％2C7464％2C7515％2C7514％ 2C7512%2C7523%2C7598%2C8176%2C7544%2C7620%2C7652%2C7690%2C8330%2C8335%2C8418%2C8417%2C8421%2C8442%2C8458%2C8492%2C8457%2C8474%37023％2C7074％2C6977％2C7603％2C8096％2C7063％2C7014％2C7416％2C8190％2C8310％2C7032％2C7129％2C7136％2C7131％2C7187％2C7170％2C7159％2C7532％2C7651％2C7262％2C7670％2C7402％2C7403％2C7245％2C7235％ 2C7601％2C7316％2C7545％2C7343％2C7376％2C7665％2C7688％2C7374％2C7375％2C8041％2C7404％2C7409％2C7419％2C8422％2C7461％2C7438％2C7443％2C7487％2C7464％2C7515％2C7514％2C7512％2C7523％2C7598％2C8176％ 2C7544%2C7620%2C7652%2C7690%2C8330%2C8335%2C8418%2C8417%2C8421%2C8442%2C8458%2C8492%2C8457%2C8474%2C84837023％2C7074％2C6977％2C7603％2C8096％2C7063％2C7014％2C7416％2C8190％2C8310％2C7032％2C7129％2C7136％2C7131％2C7187％2C7170％2C7159％2C7532％2C7651％2C7262％2C7670％2C7402％2C7403％2C7245％2C7235％ 2C7601％2C7316％2C7545％2C7343％2C7376％2C7665％2C7688％2C7374％2C7375％2C8041％2C7404％2C7409％2C7419％2C8422％2C7461％2C7438％2C7443％2C7487％2C7464％2C7515％2C7514％2C7512％2C7523％2C7598％2C8176％ 2C7544%2C7620%2C7652%2C7690%2C8330%2C8335%2C8418%2C8417%2C8421%2C8442%2C8458%2C8492%2C8457%2C8474%2C848321%2C8442%2C8458%2C8492%2C8457%2C8474%2C848321%2C8442%2C8458%2C8492%2C8457%2C8474%2C8483](https://my-domain.com/MyController/MyAction?MyParameter=8259%2C8318%2C8201%2C8188%2C7155%2C6894%2C8221%2C8187%2C7030%2C8214%2C7489%2C8145%2C8223%2C8208%2C8273%2C8257%2C8292%2C6931%2C7072%2C7007%2C8195%2C8235%2C7493%2C7525%2C7492%2C8262%2C7491%2C7013%2C8157%2C7180%2C7181%2C7182%2C7183%2C7421%2C7422%2C7500%2C7501%2C8238%2C8239%2C8240%2C8241%2C7710%2C7711%2C7712%2C7713%2C8068%2C8432%2C7358%2C7008%2C8135%2C8307%2C8163%2C8164%2C8132%2C8182%2C8183%2C8081%2C8083%2C8109%2C8110%2C7681%2C7682%2C7683%2C7593%2C7594%2C7595%2C7546%2C7547%2C7548%2C7577%2C7578%2C7581%2C8300%2C8301%2C8302%2C8282%2C8283%2C8284%2C8311%2C8312%2C8313%2C8217%2C8218%2C8244%2C8245%2C8479%2C8482%2C8398%2C8399%2C8400%2C8401%2C8404%2C8407%2C8392%2C8394%2C6959%2C6960%2C6961%2C7041%2C7042%2C7043%2C8227%2C8228%2C8229%2C7638%2C7708%2C7118%2C8288%2C6897%2C6898%2C6899%2C6900%2C6901%2C6902%2C6842%2C6843%2C6844%2C6845%2C6846%2C6847%2C7361%2C7362%2C7363%2C7364%2C7365%2C7366%2C8165%2C8166%2C8167%2C8168%2C8169%2C8170%2C8247%2C8248%2C8249%2C8250%2C8251%2C8252%2C8099%2C8100%2C6903%2C6904%2C6905%2C6906%2C6907%2C6908%2C7704%2C8291%2C8253%2C7709%2C8277%2C7372%2C7282%2C7552%2C8205%2C7341%2C8264%2C7384%2C7701%2C7432%2C7625%2C7169%2C6912%2C8095%2C7481%2C8452%2C7062%2C7664%2C8088%2C8209%2C8278%2C6986%2C6978%2C7128%2C7440%2C6987%2C8224%2C8225%2C8178%2C8179%2C6889%2C6890%2C8191%2C8093%2C8230%2C7317%2C6895%2C8211%2C8226%2C8285%2C7266%2C7321%2C7445%2C7672%2C7453%2C7476%2C7533%2C6967%2C8054%2C7377%2C7188%2C8323%2C8105%2C7276%2C8202%2C8072%2C7689%2C8434%2C7075%2C7257%2C7379%2C6864%2C7570%2C8146%2C8147%2C8148%2C8149%2C7018%2C7019%2C7020%2C7021%2C8031%2C7044%2C7278%2C7486%2C8409%2C7707%2C8438%2C7378%2C7265%2C7176%2C7199%2C7706%2C7632%2C6998%2C7584%2C8171%2C7399%2C7125%2C6836%2C7535%2C7528%2C6968%2C7327%2C8319%2C8098%2C7543%2C6852%2C7103%2C6882%2C8426%2C8114%2C6957%2C6952%2C7527%2C6956%2C6953%2C8196%2C6989%2C7246%2C8272%2C8320%2C8324%2C6979%2C8315%2C8293%2C8294%2C8322%2C8204%2C7203%2C7326%2C7355%2C7087%2C7009%2C7498%2C7700%2C8113%2C8274%2C8325%2C8321%2C8116%2C7211%2C7252%2C7332%2C7023%2C7074%2C6977%2C7603%2C8096%2C7063%2C7014%2C7416%2C8190%2C8310%2C7032%2C7129%2C7136%2C7131%2C7187%2C7170%2C7159%2C7532%2C7651%2C7262%2C7670%2C7402%2C7403%2C7245%2C7235%2C7601%2C7316%2C7545%2C7343%2C7376%2C7665%2C7688%2C7374%2C7375%2C8041%2C7404%2C7409%2C7419%2C8422%2C7461%2C7438%2C7443%2C7487%2C7464%2C7515%2C7514%2C7512%2C7523%2C7598%2C8176%2C7544%2C7620%2C7652%2C7690%2C8330%2C8335%2C8418%2C8417%2C8421%2C8442%2C8458%2C8492%2C8457%2C8474%2C8483)

我得到一个 404 错误。

如果我用`%2C`原来的替换`,`我会遇到同样的问题，只是需要更多的参数。

如果我用更少的参数发出相同的请求，它就可以工作。

我已经有了这个：

```
<system.web>
    <httpRuntime maxUrlLength="2097151" maxQueryStringLength="2097151" relaxedUrlToFileSystemMapping="true"/>
</system.web> 
```

因为以前我告诉我我的 maxQueryStringLength 设置太大了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:44:45.477

无论您设置多大`maxQueryStringLength`，浏览器都有[限制](https://stackoverflow.com/questions/812925/what-is-the-maximum-possible-length-of-a-query-string)。例如，某些浏览器仅支持 2048 个字符的请求长度。你的更长（2440 个字符）。您唯一可以做的就是使用`POST`而不是`GET`发送如此大的数据，因为 POST 请求没有这样的限制。因此，您生成一个 HTML`<form>`元素`method="post"`并`action`指向该 url 和其中包含此数据的隐藏字段，然后提交此表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:14:25.850

事实上，我被 IIS 限制阻止了：maxUrl 大小和最大查询大小（以八位字节为单位测量：

```
 <system.webServer>
      <security>
        <requestFiltering>
          <requestLimits maxUrl="1048576" maxQueryString="1048576" />
        </requestFiltering>
      </security>
  </system.webServer> 
```

这解决了我的问题

# jsf - 翻译分页器模板

> ID：12564313
> 
> 赞同：0
> 
> 时间：2012-09-24T11:39:06.390
> 
> 标签：jsf, primefaces, translation

我在我的 p:datatable 上使用 paginatorTemplate （Primefaces1 我知道，旧的，但遗留代码）

```
paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}  #{msg.all_lists_numberOfRowsDisplayed_label}{RowsPerPageDropdown}"> 
```

在屏幕上我得到

```
 << first < prev 12 next > last >> Number of Rows: 
```

是否可以翻译“第一个”“上一个”“下一个”和“最后一个”标签？

# javascript - 如何在 Sencha Touch 2 中获取用户名和密码的值

> ID：12564314
> 
> 赞同：0
> 
> 时间：2012-09-24T11:39:07.433
> 
> 标签：javascript, extjs, sencha-touch-2

我有一个包含用户名和密码的两个字段的表单。我有一个带有处理程序的 [loginbutton]。如何从登录按钮的处理程序中的字段中获取这些值，以便为控制器触发事件​​？

```
 handler: function() {
                            var form = this.parent.parent;
                            //HOW TO GET THESE VALUES?
                            var username = form.user;
                            var password = form.password;
                            form.fireEvent('login', username, password);

                        } 
```

使用调试器，我发现这是可行的，但对我来说似乎是一个非常复杂的解决方案：

```
 handler: function() {
                    var form = this.parent.parent;
                    var fieldset = form.items.items[0];
                    var username = fieldset.innerItems[0]._component._value;
                    var password = fieldset.innerItems[1]._component._value;
                    form.fireEvent('login', username, password); 
```

这是带有配置声明的代码。

```
Ext.define('AddressBook.view.Login', {
    title: "Luminizer Login",
    extend: 'Ext.form.Panel',
    xtype: 'loginForm',

    config: {
        url: 'login.php',
        standardSubmit: false,
        items: [
            {
                xtype: 'fieldset',
                title: 'MyCompony',
                instructions: 'Log in with username and password.',
                defaults: {
                    required: true,
                    labelAlign: 'left',
                    labelWidth: '40%'
                },
                items: [
                    {
                        //SCROLL DOWN FOR HANDLER
                        xtype: 'textfield',
                        name: 'name',
                        label: 'Name',
                        value: 'user',
                        autoCapitalize: false
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'password',
                        label: 'Password',
                        value: 'test'
                    }
                ]
            },
            {
                xtype: 'toolbar',
                docked: 'bottom',
                items: [
                    {xtype: 'spacer'},
                    {
                        text: 'Reset',
                        handler: function() {
                            form.reset();
                        }
                    },
                    {
                        text: 'Login',
                        ui: 'confirm',
                        handler: function() {
                            var form = this.parent.parent;
                            //HOW TO GET THESE VALUES?
                            var username = form.user;
                            var password = form.password;
                            form.fireEvent('login', username, password);

                        }
                    }
                ]
            }
        ],
     ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:27:32.997

试试这个代码

```
 var form = this.parent.parent;
  var name=form.getValues().firstname 
```

此代码将为您提供名称为名字的文本字段的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:57:40.733

解决方案是给文本字段一个 id：

```
items: [
  {
   xtype: 'textfield',
   ...
   id: 'username',
   ...
   }, 
```

并在表单组件上使用函数 down() 和 getValue()

```
var form = this.parent.parent;
var username = form.down('#username').getValue() 
```

# c# - 在 URL 中显示机器 IP 并运行定义的 Web 服务

> ID：12564316
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:39:12.390
> 
> 标签：c#, java, asp.net

我已经开始学习网络服务。我得到了整个概念。直到现在我正在运行`localhost:1234/services.asmx`。它正在工作。但是现在我想把我的机器IP地址而不是localhost。我有网络服务的想法。是否有任何特定的方法可以通过机器 ip 运行？请帮助我。我做了很多搜索。请告诉我任何解决方案。

```
namespace WebService1
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [ToolboxItem(false)]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:51:09.893

您可以在 web.config 或 app.config 中配置您（所谓的）绑定。

如果它不是自托管的，则必须在尝试访问它之前将其部署到 IIS-Webserver。

# java - 如何防止通过 url 直接访问 jsp？

> ID：12564319
> 
> 赞同：2
> 
> 时间：2012-09-24T11:39:17.880
> 
> 标签：java

我正在用java开发一个Web应用程序。为了防止直接访问 url，我使用了检查会话验证的代码。它是一个客户员工应用程序。

在除登录页面之外的每个页面中，我都有相同的标题，其中菜单项是使用会话动态生成的，具体取决于角色。但是，当员工直接访问 url 时，应该只有客户可以访问，url 仍然可以访问。不应该是这样的。

如何防止员工使用仅对客户有效的 url 直接访问 jsp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:03:13.143

应用过滤器，

```
public class SessionCheck implements Filter

{
public void doFilter(ServletRequest arg0, ServletResponse arg1, FilterChain arg2) throws IOException, ServletException
    {
        HttpServletRequest request = (HttpServletRequest) arg0;
        HttpServletResponse response = (HttpServletResponse) arg1;
        if(null==((String) request.getSession().getAttribute("SESSION_PARAM_CUSTOMERID")) || ((String) request.getSession().getAttribute("SESSION_PARAM_CUSTOMERID")).equals(""))
        {
            response.sendRedirect(PAGE_SIGN_IN);
            return;
        }
        arg2.doFilter(request, response);
    }

} 
```

**web.xml**

```
<filter>
  <filter-name>SessionCheckFilter</filter-name>
  <filter-class>
    com.mycomp.filter.SessionCheck
  </filter-class>
</filter> 
```

使用过滤器映射标签映射您的每个安全请求 URL，如下所示。

```
 <filter-mapping>
      <filter-name>SessionCheckFilter</filter-name>
      <url-pattern>/personal-info</url-pattern>
    </filter-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:13:08.453

我理解你的需要是，

1.  任何未经验证的用户都来了--------显示----->登录页面
2.  具有客户角色的经过身份验证的用户-----显示----->与客户相关的菜单项
3.  具有角色 Employee 的经过身份验证的用户----显示----->与 Employee 相关的菜单项

在这种情况下，我认为你应该做的是，

当人员此时输入 URL 时，检查会话是否为真/设置。为此，您可以将任何变量（如 userName）设置为键。

如果未设置会话，则显示通用登录页面，并在身份验证后将用户名密钥设置为会话，否则不会。

如果设置了会话（您可以再次检查 userName 键以验证会话是否存在），然后检查用户的角色，

如果用户属于角色 CUSTOMER ------> 相应地工作。如果用户属于角色 EMPLOYEE ------> 相应地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:46:30.023

您只是在检查会话是否有效。您需要检查会话参数之一，例如用户名或客户 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:43:22.747

使用过滤器仅允许经过身份验证的请求访问资源

# javascript - 如何使用javascript从另一个视图刷新一个视图

> ID：12564320
> 
> 赞同：0
> 
> 时间：2012-09-24T11:39:17.437
> 
> 标签：javascript, asp.net-mvc, visual-studio-2010

我有两个不同的视图（不是父视图），我想从另一个页面刷新/重新加载一个页面，如何使用 javascript 执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:42:45.633

您不能使用 javascript 执行此操作，因为它们是 2 个独立的视图，它们永远不会同时呈现在同一个 HTML 页面中。不要忘记javascript在客户端上工作。这可以通过在某个主视图中呈现的部分视图来完成。您可以使用例如 AJAX 来刷新这些部分视图。使用标准视图，您可以使用标准 HTML 技术——例如 HTML 表单或锚链接在您的控制器操作之间导航（在术语上将呈现不同的视图）。

# css - https @font-face 不适用于 IE 7 和 IE8

> ID：12564322
> 
> 赞同：2
> 
> 时间：2012-09-24T11:39:23.000
> 
> 标签：css, fonts

我们有一个网站，下面有一个 CSS。笑脸在那里，因此它可以与 IE 7 和 IE 8 一起使用。但是，站点字体在 IE 9、chrome、firefox 等上运行良好，但在 IE 7 和 8 上却不行。

```
@font-face {
        font-family: 'BrauerNeue-Bold';
        src: url('fonts/brauerneue-bold-webfont.eot');
        src: local('☺'), 
              url('fonts/brauerneue-bold-webfont.woff') format('woff'), 
              url('fonts/brauerneue-bold-webfont.ttf') format('truetype'),
              url('fonts/brauerneue-bold-webfont.svg#webfontvlyLbaAW') format('svg');
        font-weight: normal;
        font-style: normal;
    } 
```

我还验证了以下内容：

1.  eot、woff 和 ttf 字体位于 Fonts 文件夹下。

2.  通过 URL 直接访问时可以下载这些文件。

3.  第一次字体在 IE7 和 8 上加载正常，但是当我们执行 CTRL + F5 或浏览器刷新时，上述字体不会被渲染。

4.  已验证 IIS 7.0 mime 类型上存在 eot。

5.  HTTP 或 HTTPS 是否重要

6.  需要任何 IIS 配置吗？

有人可以帮我如何让上述字体在 IE7 和 8 上工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:42:07.517

像这样使用它 -

```
@font-face {
    font-family: 'MyFontFamily';
    src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
         url('myfont-webfont.woff') format('woff'), 
         url('myfont-webfont.ttf')  format('truetype'),
         url('myfont-webfont.svg#svgFontName') format('svg');
    } 
```

[**在这里阅读更多**](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:42:11.620

你写了两次`src`属性。第二个擦除第一个。

并且IE7和IE8对font-face的支持不包括

*   [WOFF 字体](http://caniuse.com/#feat=woff)
*   [真字体](http://caniuse.com/#feat=ttf)
*   [svg 字体](http://caniuse.com/#feat=svg-fonts)

这意味着您必须使用[嵌入的 opentype](http://caniuse.com/#feat=eot)字体。

但是当你删除唯一可能的值时，你不能使用它......

你可以这样做：

```
@font-face {
    font-family: 'BrauerNeue-Bold';
    src: local('☺'), 
          url('fonts/brauerneue-bold-webfont.eot'),
          url('fonts/brauerneue-bold-webfont.woff') format('woff'), 
          url('fonts/brauerneue-bold-webfont.ttf') format('truetype'),
          url('fonts/brauerneue-bold-webfont.svg#webfontvlyLbaAW') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# c# - 在设计时向我的“即时”用户控件添加控件..？

> ID：12564323
> 
> 赞同：4
> 
> 时间：2012-09-24T11:39:23.587
> 
> 标签：c#, .net, winforms, dynamic-usercontrols

我有一个 C# WinForms 'ListboxPanelControl' UserControl，它由一个 SplitContainer 组成，它在左侧的 'Panel1' 中托管一个用户绘制的 Listbox 控件。SplitContainer 的右侧“Panel2”将承载在项目添加到列表框中时添加的面板。因此，如果设计时用户将第一项添加到 Listbox，则关联的 Panel 将添加到 SplitContainer 的“Panel2”。如果将第二个项目添加到列表框，则会将第二个面板添加到 SplitContainer 的“Panel2”。然后，当用户选择 Listbox 项目时，相关的 Panel 会显示在右侧。

问题出现在设计时，当用户将控件（例如按钮）从工具箱拖放到当前活动的右侧面板（与当前选定的列表框项对应的面板）上时。我以编程方式将其添加到适当的 Panel 的 Controls 集合中，但这会导致Microsoft Visual Studio IDE中出现**“'child' is not a child control of this parent”错误。**

我研究了这个问题并发现了一些有用的文章，显示“如何允许一个控件，它是另一个控件的子控件，在设计时接受将控件放到它上面”，例如： http: [//www.codeproject.com/文章/37830/设计嵌套控件](http://www.codeproject.com/Articles/37830/Designing-Nested-Controls)

这将“DesignerSerializationVisibility”属性与 ControlDesigner 的“EnableDesignMode”方法结合使用，以允许 VS IDE 处理将控件拖放到另一个控件上。问题在于，在这种情况下，UserControl 的目标宿主 Control 是有效固定的并且预先知道。**使用我的控件，可以在设计时将其他控件拖放到其上的目标托管面板是预先未知的，因为我的 UserControl 本身可以“即时”构建（当用户添加更多列表框项目时在更多潜在的托管小组中）。**

我尝试过以更灵活的方式使用“DesignerSerializationVisibility”和“EnableDesignMode”方法，但似乎仍然遇到上述“子不是此父级的子控件”错误。

我希望这一切都有意义！？代码目前看起来像这样：

这是在 ListboxPanelControl 类中：...

```
 [
    Category("Appearance"),
    DesignerSerializationVisibility(DesignerSerializationVisibility.Content)
    ]
    public Panel MainPanel
    {
        get
        {
            //Instead of returning a 'fixed' Panel we return whatever the currently
            //active Panel is according to the currently selected Listbox item
            if( mnCurrentlyActiveListBoxIndex >= 0 )
            {
                ListBoxEntry lEntry = (ListBoxEntry)listBox.Items[mnCurrentlyActiveListBoxIndex];
                return lEntry.RelatedPanel;
            }

            return null;
        }
    } 
```

然后，在 ListBoxPanelControl 的“OnControlAdded”事件中，我为当前活动的面板调用“EnableDesignMode”（通过简单的“SetDesignMode”包装），然后添加控件：

```
protected override void OnControlAdded(ControlEventArgs e)
{
...
mDesigner.SetDesignMode(MainPanel, "MainPanel" + mnCurrentlyActiveListBoxIndex.ToString());
                    ListBoxEntry lEntry = (ListBoxEntry)listBox.Items[mnCurrentlyActiveListBoxIndex];
                    lEntry.RelatedPanel.Controls.Add(e.Control);
                    e.Control.BringToFront();
                    e.Control.Refresh();
...
} 
```

我希望我已经足够清楚地解释了这个问题！基本上，有没有人设法将控件添加到他们的 WinForms UserControl，其中目标托管控件本身就是一个子控件，并且当他们的 UserControl 本身是动态的并且是动态构建的？

感谢您的帮助/见解！托尼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:21:17.003

只是想我会提供更新，以防它对任何未来的读者有用。我设法解决了“'child'不是这个父级的子控件”错误。问题是我在“当前活动”面板上调用“EnableDesignMode”，以允许将控件拖放到它上面，但没有意识到“EnableDesignMode”方法的要求之一是：*“子控件child 指定的是此控件设计器控件的子控件。”* （[http://msdn.microsoft.com/en-us/library/system.windows.forms.design.controldesigner.enabledesignmode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.design.controldesigner.enabledesignmode.aspx)）。并且因为当前活动面板是拆分容器右侧面板的子项，而不是“这个”整体父 ListboxPanel 控件，

最后，我意识到我们还需要序列化控件，经过大量的痛苦和反复试验，我们最终没有使用“EnableDesignMode”！相反，要走的路似乎是使用设计器的服务：IComponentChangeService、IDesignerHost 和 ISelectionService。我不只是以传统方式添加控件（如 "Controls.Add()" ），而是使用 IDesignerHost 的 "CreateComponent" 方法，以便设计人员“正式”了解它。我们将每个操作包装在一个事务中，以便它可以“撤消/重做”。有点像这样：

```
DesignerTransaction designerTransaction = m_designHost.CreateTransaction("Add Page");
try
{
    Panel p = (Panel)m_designHost.CreateComponent(typeof(Panel));

    m_changeService.OnComponentChanging(mControl.MainPanel, TypeDescriptor.GetProperties(mControl.MainPanel)["Controls"]);

    ...
    ...
    //Add our Panel to our splitContainer Panel2's controls collection, etc

    ...
    m_changeService.OnComponentChanged(mControl.MainPanel, TypeDescriptor.GetProperties(mControl.MainPanel)["Controls"], null, null);

    //Use the selection service to select the newly added Panel
    m_selectionService.SetSelectedComponents(new object[] { p });

}
catch( Exception ex )
{
     designerTransaction.Cancel();
}
finally
{
     designerTransaction.Commit();
} 
```

希望这对某人有用...

# php - 分页 - 行数过多的表格

> ID：12564324
> 
> 赞同：0
> 
> 时间：2012-09-24T11:39:26.710
> 
> 标签：php, symfony, doctrine-orm

我想从一个表中获取所有行的数量，以便计算有多少页。但问题是该表大约有 1000 行，每次我试图找出它们有多少时，计算机都会变慢并需要重新启动。

我只需要行数，不需要别的。我试过这个：

```
public function countRows()
{
    $q = $this->createQueryBuilder('q');

    $q->select('q.username');

    return $q->getQuery()->getSingleScalarResult();
} 
```

但它似乎很慢。

有没有更好更快的方法来计算行数？或者也许是另一种分页方式，但是如何知道会有多少页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:05:17.227

如果您多次计算 COUNT，请将 countRows() 方法的结果保存在该对象的属性中并返回：

```
public function countRows()
{
    if ($this->countRowsQ === null)
    {
        $q = $this->createQueryBuilder('q');

        $q->select('COUNT(q.username)');

        $this->countRowsQ = $q->getQuery()->getSingleScalarResult();
    }

    return $this->countRowsQ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:43:36.440

试试这个：

```
public function countRows()
{
    $q = $this->createQueryBuilder('q');

    $q->select('COUNT(q.username)');

    return $q->getQuery()->getSingleScalarResult();
} 
```

您的查询没有计算在内，而是选择了所有行，这可能会很慢。

# c# - Entity Framework v4 - 来自链接服务器的简单存储过程选择语句（打开查询）返回 -1

> ID：12564327
> 
> 赞同：2
> 
> 时间：2012-09-24T11:39:37.730
> 
> 标签：c#, sql-server, entity-framework, linked-server, openquery

在 SQL Server 中，我创建了一个存储过程，它使用 Open Query 触发一个简单的选择语句（SET NOCOUNT OFF）来从链接服务器查询数据。在 SQL Server 中查询此数据时，会返回正确的结果，例如：

```
SELECT * FROM OPENQUERY(SERVER, ''SELECT * FROM db.table WHERE field = ' + '''' + '''' + @var+ '''' + ''''')' 
```

我现在有一个 C# WinForms 应用程序，它使用 Entity Framework v4 来访问数据，并希望在代码中访问这个存储过程。

我做了通常的“从数据库更新模型”并添加了存储过程，然后选择添加函数导入（例如称为 getData）。然后我注意到单击“获取列信息”后，我收到了以下消息：

```
'The selected stored procedure returns no columns' 
```

此时我点击了确定，然后写了一些简单的代码来访问SP（如下）：

```
using(var context = new MyContext())
{
    var result = context.getData('paramdata');
} 
```

单步执行代码时，结果设置为“-1”。在做了一些阅读之后，有人建议在我所做的存储过程中将 NOCOUNT 设置为 OFF，但没有任何区别。

我不确定为什么这适用于 SQL Server 中的查询而不是实体框架？

有没有办法让这个工作？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:37:53.403

因为您使用的是 OpenQuery，所以 SQL 服务器不知道列列表。

尝试创建一个表变量，将 openquery 的结果插入其中，然后从表变量中进行选择。

```
declare @t table(ID int, value nvarchar(50))
insert @t (ID, value)
select Id,Value FROM OPENQUERY(SERVER, 'SELECT * FROM db.table')

select ID, Value from @t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T15:11:46.723

```
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
DECLARE @Query nvarchar(max);
DECLARE @LinkServer varchar(20);
DECLARE @CatalogSch varchar(20);

DECLARE @DIVISION_NO INT;
DECLARE @BLOCK_NO INT;
DECLARE @LOT_NO INT

/* With this code I get the server and catalog (production or develpment environment)*/
EXEC [dbo].[usp_GetLinkServerAndSchema] 'ACTJO', @LinkServer out, @CatalogSch out;

/* Declare the table */
declare @t table(Division_no int, block_no int, lot_no int)

/* Build the query to get the three values */
SET @Query = 'SELECT @DIVISION_NO = [DIVISION_NO], @BLOCK_NO = [BLOCK_NO], @LOT_NO = [LOT_NO] FROM OPENQUERY ('+@LinkServer+',''
          SELECT DIVISION_NO, BLOCK_NO, LOT_NO
            FROM '+@CatalogSch+'.[CSS_PREMISE]
            WHERE ACCOUNT_NO = '+convert(varchar,@account)+''')'

/* execute the query */ 
EXEC sp_executesql @Query, N'@DIVISION_NO INT output, @BLOCK_NO INT output, @LOT_NO INT output', @DIVISION_NO output, @BLOCK_NO output, @LOT_NO output;

/* insert the values into the table */
insert @t (Division_no,block_no,lot_no)
    select @DIVISION_NO, @BLOCK_NO, @LOT_NO;

/* query the temporary table */
select Division_no,block_no,lot_no from @t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:45:05.900

您的查询不返回任何数据，因此不返回行信息。尝试修复您的查询并检查您正在运行的数据库。并修复您选择 *，这是查询数据库的真正糟糕模式。

# php - PHP 父类和子类 DB 操作

> ID：12564328
> 
> 赞同：1
> 
> 时间：2012-09-24T11:39:39.127
> 
> 标签：php, database, oop, inheritance

PHP 和 OOP 的新手，所以请多多包涵……我正处于设计和编写我的第一个 PHP 和 OOP 网站的乐观早期阶段，因为我一生都在写蹩脚的 M$ VBA 垃圾。

我有一个“用户”类，它有一个带有相关数据库调用等的保存方法......（实际上我有处理连接和 CRUD 的 DB 和 DBUtils 类 - 我的业务类只是调用 DB Utils 上的选择、更新、删除方法并传递关联的数据数组）

Anywho...我的“用户”类由一个“管理员”类扩展，它在“用户”yada yada 之外具有一些附加属性...

处理“管理员”上的保存方法的最佳方法是什么？我知道如果我向 Admin 类添加一个保存方法，它将取代 User 上的方法，但我不希望它这样做。我想在 Admin 上编写 save 方法，只处理特定于 Admin 对象的属性等，以及从“User”继承的属性在 User save 方法中处理。

那有意义吗？它是我正在寻找的特定 OOP 模式吗？任何有关我应该如何设计和构建此代码的帮助或指导将不胜感激。

*编辑：哇！感谢以下所有答案。不确定哪个是我的首选。我将不得不做一些玩...*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:46:35.200

您的主要问题源于您一直忽略 OOP 中的核心思想之一：[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)..^([再说一次，似乎每个提供“答案”的人都不知道 SRP 是什么。])

您所说的“业务逻辑”应该与存储相关的操作分开。no的实例`User`都不`Admin`应该知道存储是如何执行的，因为它不是业务逻辑。

```
$entity = new Admin;
$mapper = new AdminMapper( $db );

$entity->setName('Wintermute');
$mapper->fetch( $entity ); 
//retrieve data for admin with that name

$entity->setName('Neuromancer');
$mapper->store( $entity );
// rename and save 
```

您在上面看到的是[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)模式的一个极其简化的应用。这种模式的目标是分离业务和存储逻辑。

如果不是直接实例化映射器`$mapper = new AdminMapper( $db )`，而是由[注入](http://martinfowler.com/articles/injection.html)的工厂提供`$mapper = $this->mapperFactory->build('Admin')`（因为它应该在适当的代码库中），那么您将没有关于存储介质的指示。数据可以存储在 SQL DB 或文件中，也可以存储在某个远程 REST API 中。如果映射器的界面保持不变，您可以随时更换它。

使用工厂可以避免与特定类名的紧密耦合，并且对于 SQL 数据库的映射器，可以让您在每个实例中注入相同的数据库连接。

要了解更多关于它的信息，您可以阅读[this](https://stackoverflow.com/a/11943107/727208)、[this](https://stackoverflow.com/a/11369679/727208)和[this](https://stackoverflow.com/a/9675647/727208)。

但是，如果您正在认真考虑学习 OOP，那么**阅读[这本书](https://rads.stackoverflow.com/amzn/click/com/0321127420)是必须的**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T12:13:06.537

您正在尝试实现[活动记录模式](http://en.wikipedia.org/wiki/Active_record_pattern)。

对象持久化的一种方法是提供一个共同的祖先类[例如`BasicEntity`]每个子类都扩展，它基于给定的数据模式构建查询：

```
class BasicEntity
{

    protected $tablename;

    protected $schema;

    public function update()
    {

        $fields = "";
        $placeholders = "";

        foreach($this -> schema as $field => $type)
        {

            // you join the fields here to get something like ('username', 'email', 'enabled', 'createdAt', 'password')
            // then you write your PDO statement providing placeholders like (:?, :?, :?, :?, :?)
            // you'll have to bind parameters based on their $type [int, string, date]

        }

        $query = sprintf(
            "UPDATE %s SET VALUES(%s) = %s",
            $this -> tablename,
            $fields,
            $placeholders
        );

        // execute statement here, handle exceptions, and so...

    }

} 
```

所以你的`User`课会是这样的：

```
class User extends BasicEntity
{

    protected $id;
    protected $username;
    protected $email;
    protected $password;
    protected $enabled;
    protected $createdAt;

    public function __construct()
    {

        $this -> tablename = '_user';
        $this -> schema = array(
            'id'        => 'int',
            'username'  => 'string',
            'email'     => 'string',
            'password'  => 'string',
            'enabled'   => 'int',
            'createdAt' => 'datetime'
        );

    }

} 
```

还有你的`Admin`课：

```
class Admin extends User
{

    protected $additionalProperty;

    public function __construct()
    {

        parent::__construct();

        $this -> schema['additionalProperty'] = 'string';

    }

} 
```

调用`update()`将基于类模式构建正确的查询。这种方法适用于低复杂度级别，因为您会注意到：

*   如果您扩展实体 [在同一张表上！]，您需要提供空表字段，即使对于没有此类字段的行 [在这种情况下，`additionalProperty`]；
*   如果你的模式改变了[例如你改变了一个变量名]，你必须把它硬编码到类构造函数中，使它更难维护；
*   如果你想处理实体之间的关系，那么在每个 SELECT 语句中编写正确的连接将是一个很大的痛苦，除非你只是编写大量单独的查询，从而降低性能。

要解决第一个问题，您需要**组合**对象，因此您不会使主表增长太多[`AdditionalPropertyList`例如，它只是获取对外部实体的引用]。

要解决第二个问题，您必须将架构保存在外部文件中或使用[内联注释](https://stackoverflow.com/questions/3623499/how-is-annotation-useful-in-php/3623715)。

要解决第三个问题，您必须编写自己的 ORM [[对象关系映射](http://en.wikipedia.org/wiki/Object_relational_mapping)]，或者更好地切换到[现有的](http://doctrine-project.org/)。

无论如何，出于学习的好处，我会站在巨人的肩膀上，如果您计划构建可扩展且可维护的应用程序，我会选择一个框架。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T11:46:27.923

当您在 Admin 类中编写保存方法时，您可以在推迟到标准保存的父对象之后执行额外的工作......

```
class Admin extends User
{
    // Other methods

    public function save()
    {
        parent::save();
        // now save your additional fields wherever they need to go
    }
} 
```

附带说明一下，虽然使用对象来表示域，例如 User 和 Admin，但很好 - 在其他地方使用持久性逻辑有时是值得的，例如通过使用[The Repository Pattern](http://martinfowler.com/eaaCatalog/repository.html)。这可以防止您的对象被绑定到持久性机制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T11:46:47.990

有很多方法可以解决这个问题。其中之一是有一个受保护的方法，可以在扩展类中重写以提供来自该扩展类的数据；

一个例子：

```
class User
{
  public function Save()
  {
    $savestuff = $this->GetProperties();
    // do save acctions
  }

  protected function GetProperties()
  {
    return 'user prop';
  }
}

class Admin Extends User
{
  protected function GetProperties()
  {
    return  'admin prop';
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T11:51:28.510

尽管是 OO 的新手，但听起来您确实遇到了 PHP 对象模型的主要缺点之一。您想要做的事情可以通过方法重载轻松实现（具有多个具有相同名称但采用不同参数的方法的能力，调用的实际成员函数取决于参数）。

`save`您可以通过检查类中方法中的参数来解决此问题`Admin`：

```
class Admin
{
    public function save(Model_Abstract $model = null)//type hinting
    {
        if ($model instanceof Model_Admin)
        {
            //do admin insert/update stuff here
            return;
        }
        parent::save($model);//call regular method
    }
} 
```

# iphone - 蒙版 UIView、CALayer 的动画

> ID：12564336
> 
> 赞同：7
> 
> 时间：2012-09-24T11:40:00.107
> 
> 标签：iphone, ios, ipad, animation, calayer

我正在尝试实现以下目标：用户点击一个视图，一个*圆形*视图弹出到它的左侧，其中包含一些图像内容。视图应该从触摸点开始动画到触摸视图外部和左侧的最后一帧。在动画过程中它应该是一个圆圈，增长到正确的位置和大小

一切都适用于下面的代码，只是*在动画期间*，圆形边界**仅在左侧。**就好像`CALayer`形状正在滑入它的最后一帧。

它看起来有点像这样。

![在此处输入图像描述](../Images/7306d587aae8dbb92c639c29ff0afdb8.png)

动画完成后，我按预期完成了整个循环。

```
CGFloat w = 300;
CGRect frame = CGRectMake(myX, myY, w, w);
CGPoint p = [touch locationInView:self.imageView];
CGRect initialFrame = CGRectMake(p.x, p.y, 0,0);
UIImageView *circle = [[UIImageView alloc] initWithFrame:frame];
circle.image = [UIImage imageNamed:@"china"];
circle.contentMode = UIViewContentModeScaleAspectFill;
circle.backgroundColor = [UIColor clearColor];
circle.layer.borderWidth = 1;
circle.layer.borderColor = [UIColor grayColor].CGColor;
circle.layer.masksToBounds = YES;

CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
CGRect maskRect = CGRectMake(0, 0, w, w);
CGMutablePathRef path = CGPathCreateMutable();
CGPathAddEllipseInRect(path, nil, maskRect);
maskLayer.path = path;
CGPathRelease(path);
circle.layer.mask = maskLayer;

circle.frame = initialFrame;
[self.imageView addSubview:circle];
[UIView animateWithDuration:1.0 animations:^{
    circle.frame = frame;
}]; 
```

我试过只使用`cornerRadius`的`CALayer`，但这也不会产生令人满意的结果，因为半径也必须随框架大小而变化。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-09T08:05:58.333

您正在为框架设置动画，但不是为蒙版设置动画。圆形蒙版的大小保持不变，您的图像帧从左上角动画到最后的全尺寸。这就是为什么你会得到图像左上角的圆形剪裁，直到它达到最后的帧大小。

这就是动画中基本上发生的事情： ![在此处输入图像描述](../Images/8ea23c507f1a9ec5b03c43990e7245c3.png)

您可以尝试为变换设置动画（这将完全按照您希望的样子变换最终剪辑的图像）而不是为帧设置动画。

就像是：

```
// Don't animate the frame. Give it the finale value before animation.
circle.frame = frame;

// Animate a transform instead. For example, a scaling transform.
circle.transform = CGAffineTransformMakeScale(0, 0);
[UIView animateWithDuration:1.0 animations:^{
    circle.transform = CGAffineTransformMakeScale(1, 1);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:42:48.453

您是否尝试过使用圆形视图的 autoresizingMask，使其具有灵活的左右边距？

这可能会在动画中发挥作用，并解释为什么您的视图出现“滑动”。 *（至少值得一试）*

# bash - 如何在bash参数中保持引用的字符串

> ID：12564337
> 
> 赞同：3
> 
> 时间：2012-09-24T11:40:02.187
> 
> 标签：bash, parameter-passing, double-quotes, variable-expansion

我有一个 Bash 脚本，它传递模式并切换到 grep。

```
#!/bin/bash

foo() {
    grep $@ *.txt
}

foo $@ 
```

而且，当然，`myscript SomeText`有效但`myscript "Text1 Text2"`无效。将参数从脚本传递给 foo() 然后从 foo() 传递给 grep 时，有没有办法保留引号？

请注意，我不能简单地使用 eval 并将整个 $@ 包装在 grep 之前，因为它也可以包含开关，所以我需要保留从命令行传递的原始引用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:46:29.277

您的 grep 命令看起来不完整，您是否使用带引号的参数编写这样的脚本：

```
#!/bin/bash
set -x # for debug purpose only, comment out later

foo() {
    grep "$@" *.txt
}

foo "$@" 
```

并这样称呼它：

```
./myscript "Text1 Text2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:50:20.493

简单引用`$@`：

```
#!/bin/bash 

foo() { 
    grep "$@" 
} 

foo "$@" 
```

`$@`这是和之间的区别`$*`。

# ios - 如何本地化 iOS 6 新的 Info.plist 隐私目的字符串？

> ID：12564347
> 
> 赞同：27
> 
> 时间：2012-09-24T11:40:21.683
> 
> 标签：ios, ios6, localization

Apple 为每个应用引入了新的隐私设置，允许用户决定是否允许应用访问用户的通讯录、日历、照片和提醒。当应用第一次尝试访问这些资源之一时，用户将看到 UIAlertView，类似于应用想要访问位置时的已知机制。

也可以设置目的字符串，让用户知道应用程序为什么要访问。但是，现在这是通过 Info.plist 中的键完成的，例如联系人的“隐私 - 联系人使用说明”（NSContactsUsageDescription）。

现在我问自己如何本地化这些值？对于位置目的文本，我曾经使用 NSLocalizedString(...) 设置 CLLocationManager 实例的目的属性。我如何对 Info.plist 中的那些新键做类似的事情？

附录：新的隐私密钥在以下链接中列出，但摘要列未将它们列为可本地化： [https ://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/ CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW14](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW14)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-03T18:33:24.723

将密钥添加到支持文件中的本地化`InfoPlist.strings`。出于以下目的，它应该看起来像这样：

```
/* Localized version of location services purpose for Info.plist */
NSLocationUsageDescription = "here is your purpose to use location service"; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T11:43:40.300

您可以通过本地化 InfoPlist.strings 文件来本地化 Info.plist。

# jquery - 如何使用jQuery遍历HTML页面中每个表的所有表行

> ID：12564354
> 
> 赞同：2
> 
> 时间：2012-09-24T11:40:41.560
> 
> 标签：jquery, html, css

我需要正确的语法来在彼此内部编写两个循环。第一个循环遍历没有 id 或类的 html 页面中的每个表，第二个循环遍历 jQuery 中第一个循环指定的表的每个表行。

这是我的 jQuery，但它不工作可能是错误的语法。

```
$(document).ready(function(){
    $('table.rep').each(function(){
        $(this + ' tr').each(function{
            // change style of this tr
        });
    });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:42:03.397

`tr`你这样做（使用 jQuery 上下文参数将元素的搜索限制在表中：

```
$(document).ready(function(){
    $('table.rep').each(function(){
        $('tr', this).each(function{
             // change style of this tr
        });
    });
}); 
```

或者，像这样（使用该`find`方法查找驻留在由您调用该方法的 jQuery 对象表示的元素内的元素）：

```
$(document).ready(function(){
    $('table.rep').each(function(){
        $(this).find('tr').each(function{
             // change style of this tr
        });
    });
}); 
```

您甚至不必根据要执行的操作来嵌套循环，只需遍历所有表行就足够了：

```
$('table tr').each(function(){
    // change tr style
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:43:38.047

或这个：

```
$('table.rep tr').each(function(){
   ...        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:53:51.943

```
<script>
    $(document).ready(function () {
        $('table.rep').each(function () {
            $(this).find('tr').each(function () {
            // Do your stuff
            });
        });
    });

 </script> 
```

# ruby - Ruby 运算符混淆

> ID：12564355
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:40:43.243
> 
> 标签：ruby, ruby-on-rails-3

任何人都可以就其工作原理提供一些指导：

```
self.primary_format == "Single" || self.primary_format == "EP" 
```

但这并不

```
self.primary_format == "Single" || "EP" 
```

有没有更简洁的方法来做到这一点？

我需要执行以下操作，并希望使其尽可能整洁。基于上述情况，我不确定以下内容能否正常工作。

```
self.release.primary_genre.id ==  3 || 6 || 8 || 12 || 18 
```

非常感谢！

编辑：我应该指出这些是 if 语句的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:46:40.657

这是 的正常语义`||`。您正在`self.primary_format`比较`"Single"`. 如果它不同，则您正在`"EP"`以布尔方式检查（如果不是`nil`并且不是`false`）。

我更喜欢表达你的意思的方式是

```
["Single", "EP"].include? self.primary_format
[3, 6, 8, 12, 18].include? self.release.primary_genre.id 
```

`include?`您也可以使用等效的`member?`.

如果您想以更自然的顺序编写条件，请阅读[Is there an inverse 'member？红宝石中的方法？](https://stackoverflow.com/q/8133397/908515).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:45:30.107

在 ruby​​ 中，nil 和 false 被视为`Boolean false`意味着您的条件只有在其值为 false 或 nil 时才会失败。

```
self.primary_format == "Single" || self.primary_format == "EP" 
```

在上面的语句中，您正在检查 primary_format 应该是“Single”还是“EP”，如果不是，它将失败。

```
self.primary_format == "Single" || "EP" 
```

在上面的语句中，您有两个语句`self.primary_format == "Single"`，`"EP"` 因此当其中任何一个正确时，您的条件都会通过。但是根据红宝石，在布尔语句中，除了 nil 和 false 之外的任何对象都被认为是 true。在这种情况下，无论`self.primary_format`条件的值是什么，总是返回 true

所以你必须使用[`include?`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)数组的方法

```
[3, 6, 8, 12, 18].include?(self.release.primary_genre.id ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:05:19.913

让我们拆掉第一个例子。

`self.primary_format == "Single" || self.primary_format == "EP"`

如果你应用运算符优先级并添加括号，你会得到：

`(self.primary_format == "Single") || (self.primary_format == "EP")`

既然`#==`是一种方法，你会得到这个：

`(self.primary_format.==("Single")) || (self.primary_format.==("EP"))`

让我们为 填写一个值`self.primary_format`。怎么样`"EP"`。

`("EP".==("Single")) || ("EP".==("EP"))`

调用`#==`双方的方法，你得到

`(false) || (true)`

由于左侧是虚假的，我们返回右侧：

`true`

* * *

现在让我们拆掉第二个例子。

`self.primary_format == "Single" || "EP"`

如果你应用运算符优先级并添加括号，你会得到这个，因为`==`绑定比`||`：

`(self.primary_format == "Single") || ("EP")`

再一次，让我们切换`#==`到它的方法调用变体：

`(self.primary_format.==("Single")) || "EP"`

`"EP"`让我们`self.primary_format`再次填写一个。

`("EP".==("Single")) || "EP")`

打电话给`#==`你

`(false || "EP")`

由于 的左边`||`是假的，所以返回右边。所以价值是：

`"EP"`

这本身就是真的，因为它既不是`false`也不是`nil`。

* * *

因此，总而言之，您需要考虑运算符如何喜欢`||`或`==`将其两侧的表达式组合在一起。

第一个例子说“如果这个值等于'Single'，告诉我'true'。如果不是，如果它等于'EP'，告诉我'true'，否则告诉我'false'”

第二个例子说“如果这个值等于'Single'，告诉我'true'。如果不是，告诉我'EP'”。

我希望这会有所帮助！

# android - Android Facebook 集成不需要登录

> ID：12564358
> 
> 赞同：0
> 
> 时间：2012-09-24T11:40:57.253
> 
> 标签：android, facebook

如果我不想使用 facebook 登录，只将我的应用程序中的文本 + 图像分享到应用程序用户的 facebook 个人资料。我需要通过 keyhash 的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:35:48.070

是的，您必须先在 Facebook 平台上注册您的应用，然后您的应用才能发布/分享。注册后，您的身份将得到确认，您将获得应用的唯一 ID。稍后您需要使用 facebook 登录来获取活动的 access_token，这是共享您的文本+图像所必须的。

# codeigniter - 如何在 codeigniter 中创建印地语网站？

> ID：12564360
> 
> 赞同：0
> 
> 时间：2012-09-24T11:41:01.857
> 
> 标签：codeigniter, hindi

我需要创建一个网站，该网站应该对印地语和英语的用户都可用。

有什么建议么？

**编辑**

当我尝试保存`hindi_lang.php`时，它不仅仅是给出 unicode 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:46:31.090

使用带有印地语 unicode 的 i18n 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:45:47.543

好吧，CodeIgniter 有一个漂亮的类，叫做[`Language`](http://codeigniter.com/user_guide/libraries/language.html). 您可以为印地语创建语言文件并将其存储在文件夹 system/language/hindi

以重复文档所说的内容为代价：

# 创建语言文件

语言文件必须以`_lang.php`文件扩展名命名。例如，假设您要创建一个包含错误消息的文件。您可以将其命名为：`error_lang.php`

在文件中，您将每行文本分配给`$lang`使用此原型调用的数组：

```
$lang['language_key'] = "The actual message to be shown"; 
```

注意：最好为给定文件中的所有消息使用公共前缀，以避免与其他文件中类似命名的项目发生冲突。例如，如果您正在创建错误消息，您可以在它们前面加上 error_

```
$lang['error_email_missing'] = "You must submit an email address";
$lang['error_url_missing'] = "You must submit a URL";
$lang['error_username_missing'] = "You must submit a username"; 
```

然后像在 CI 中加载其他任何内容一样加载语言文件，`$this->lang->load('filename', 'language');`

# gwt - 如何将一个 gwt 应用程序的源代码用于另一个应用程序

> ID：12564362
> 
> 赞同：2
> 
> 时间：2012-09-24T11:41:19.187
> 
> 标签：gwt

我有两个不同的 gwt 项目，并且想将一个 gwt 应用程序的类用于另一个模块。有没有办法做到这一点？

我遵循以下方法，在第二个项目中添加了以下两行

```
 <inherits name="com.yellowbook.mdb.NationalResidential"/>
   <source path='com.yellowbook.mdb' /> 
```

但我收到以下错误：

```
 Unable to find 'com/yellowbook/mdb/NationalResidential.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source? 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:53:32.100

除了复制和粘贴之外，您还可以编写第三个 GWT 模块来实现这些类并在两个应用程序中继承这个新模块。这样你就可以在任何你想要的地方重复使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:24:07.210

如果您想将一个项目用于另一个项目，那么以下是一些可能的方法：

# 第一种方法

如果您将两个项目用作单独的模块，即[GWT Module](https://developers.google.com/web-toolkit/tools/gwtdesigner/wizards/gwt/module)，那么您可以为通用代码创建一个包结构并将条目添加到 gwt.xml 文件中。

项目模块1.gwt.xml

```
 <source path='shared'/> 
```

项目模块2.gwt.xml

```
 <source path='shared'/> 
```

# 第二种方法

如果您为此创建了单独的项目，那么

**开发中：**

1.  在 gwt.xml 文件中添加模块条目，即

    ```
    <inherits name='com.project2'/> //same for project 1 
    ```

2.  此外，如果您使用 Eclipse，则在构建路径中添加所需的项目以进行开发

**生产中：**

1.  您需要为这两个项目创建一个 jar 并添加到类路径中。

但是如果你使用第二种方法，那么这不是一个很好的方法，因为当你想加载一个 project1 时，project2 会自动加载并且会加载不必要的 javascript，所以最好使用模块方法，或者创建第三个项目，它有一个project1 & project2 的通用代码，并在两个项目中使用。

# html - HTML5 Canvas 中的取消绑定功能

> ID：12564365
> 
> 赞同：-2
> 
> 时间：2012-09-24T11:41:23.590
> 
> 标签：html, html5-canvas

我想取消绑定 HTML5 Canvas 中的功能...

示例：当我在选择选项矩形后选择画笔时，它也会在我使用画笔时创建矩形。请帮助我。

谢谢

德韦什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:09:00.920

选择矩形然后选择橡皮擦后看到另一个矩形的原因如下：

```
 function addClick(x, y, dragging) {
        clickX.push(x);
        clickY.push(y);
        clickDrag.push(dragging);
        hitColors.push(bgColor);
        clickTool.push(tool);
        toolSize.push(radius);
    } 
```

您正在将每个单击的工具添加到 clickTool 数组。所以一旦你添加了矩形然后橡皮擦，矩形仍然存在。

然后当你循环时：

```
 function redraw() {
        context.width = canvas.width; // Clears the canvas
        context.lineJoin = "round";        

        for (var i = 0; i < clickX.length; i++) {
           // this will log rect then eraser over and over
           console.log(clickTool[i]);
        // ......
        }
    } 
```

因此，您需要弄清楚为什么要拥有一系列已被选中的工具，也许您一次只需要一个而不是全部持有。

# android - Android 网络位置提供程序问题

> ID：12564366
> 
> 赞同：2
> 
> 时间：2012-09-24T11:41:38.973
> 
> 标签：android, networking, location

android 网络位置提供程序是否可以在没有互联网或 wifi 的情况下工作？我在这种行为中面临不一致，因为有时即使没有互联网/wifi 也会调用我的 onlocationchanged() 方法。

有时，如果 Internet/wifi 关闭并显示以下消息“太多无位置 ap-s.Not 计算位置”用于 wifilocator 和 celllocator-缓存中的主单元未命中，我有时无法获得位置修复。

请让我知道我该如何解决这个问题？

我正在使用 API 7。在 android 2.3.6 Samsung Galaxy Y 上测试这个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:25:05.733

把你的 onLocationChanged() 方法放在这个里面：

```
 public boolean haveNetworkConnection()
     {
       ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
       NetworkInfo netInfo = cm.getActiveNetworkInfo();
       if (netInfo == null)
          return false;
      else
          {
          if(netInfo.isConnected())
              return true;
          else
              return false;
          }
    } 
```

希望 ！这会有所帮助。尝试这个。

当我再次查看您的问题时。我找到了这个 ：

是的，您需要连接到 Internet 才能获得正确的网络位置修复。至少大部分时间。手机收集以下数据（无需连接到 Internet 即可执行此操作）：

*   通过扫描wifi接入点附近的wifi信息。

*   附近的移动蜂窝信息可从手机的蜂窝无线电获得。

然后电话将此数据发送到服务器。服务器使用此数据查看其数据库以确定手机最可能的位置。服务器将位置信息发送回手机。这一切都是通过互联网（移动互联网或wifi）使用数据连接完成的。一些实现额外将少量服务器的数据库下载到手机（描述手机当前位置周围的一小块区域），这样手机就不必一直查询互联网。但是，一旦手机移出这个小区域，它就需要访问 Internet 才能再次获得正确的位置。

因此，基本上，如果没有 Internet 连接，您就无法（可靠地）使用网络位置。

# java - Netbeans 7.2 中的代码导航

> ID：12564367
> 
> 赞同：0
> 
> 时间：2012-09-24T11:41:39.627
> 
> 标签：java, netbeans, netbeans-7.2

在 Netbeans 7.2 中，当我尝试导航到方法实现（具有多个实现）时，什么也没有发生。如果该方法只有一个实现，则一切正常，但如果它有多个实现，则不会。是否有可能让它建议两种实现（例如在 eclipse 中）？

**更新1：** 我对此进行了调查，发现NB7.2仅在您自己的代码中支持这种导航。因此，如果您有一个由一个接口和两个实现该接口的类组成的库，它不会建议您导航到这两个类，而是 Netbeans 会告诉您“未找到覆盖的方法”。也许 nNtbeans 编译器无法找到这些类。

**更新 2：** 在 Eclipse 中，此功能指的是 JDT 编织。我想知道，netbeans中有没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:48:59.520

对于您的第一个问题，在页边距（行号所在的位置）中，您将看到一个绿色的“i”表示工具，或者一个“o”覆盖或一个小灰点（我认为这两者都有）。 ..

![在此处输入图像描述](../Images/44e68a1d3e0ca077def36a3419c6d760.png)

因此，如果您单击它，您可以“向上”导航父链或“向下”子链，具体取决于您想要做什么。

它实际上可以很整洁，因为您不需要单击，单击，单击，单击以进入父类/接口，单击并选择：P

# grails - Grails 无法解码 unicode 字符

> ID：12564369
> 
> 赞同：3
> 
> 时间：2012-09-24T11:41:45.660
> 
> 标签：grails

我对 Grails 应用程序有以下配置：

1.  Grails 1.3.7
    在 config.groovy 文件中设置如下
    `grails.views.default.codec="none"`
    `grails.views.gsp.encoding="UTF-8"`
    `grails.converters.encoding="UTF-8"`

2.  Tomcat 7.0.22
    为tomcat在server.xml文件中设置如下
    `URIEncoding="UTF-8" useBodyEncodingForURI="true"`

而且，在我的 gsp 页面中，我已经设置`charset=UTF-8"`了因为我想使用 UTF-8 字符编码。

然后，在任何输入框中，当我输入一个 unicode 字符并提交表单并检查控制器中相关操作处的参数转储时，unicode 字符是乱码。使用 Firebug 检查浏览器对服务器的请求表明 unicode 字符被正确编码并提交给服务器。

但是，如果我做某事。喜欢 `params.unicodeInput = new String(params.unicodeInput.getBytes("8859_1"), "UTF8");`

Unicode 字符被正确解码。我想知道为什么在正常的浏览器请求中没有正确解码 unicode 字符，尽管浏览器正确发送了 unicode 字符。

谢谢！！

**编辑**
我创建了一个具有相同配置的演示应用程序，演示应用程序上的一切似乎都很好。此问题仅存在于此特定应用程序中。可能是由于其他一些安装的插件吗？

并打印`request.getCharacterEncoding()`和`response.getCharacterEncoding()`都产生UTF-8。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-06T21:11:34.080

我不确定，但是当我遇到 Grails + Tomcat 的 unicode 问题时，我解决了将以下参数添加到 Tomcat 的 setenv.sh 的问题： `JAVA_OPTS="-Djavax.servlet.request.encoding=UTF-8 -Dfile.encoding=UTF-8"`

# objective-c - 获取 NSDocumentDirectory 的大小并清除其内容

> ID：12564374
> 
> 赞同：1
> 
> 时间：2012-09-24T11:41:55.567
> 
> 标签：objective-c, ios, nsdocumentdirectory

我正在开发一个 iphone 应用程序。

该应用程序从服务器下载图像并使用以下方法将它们保存在手机上

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath2 = [NSString stringWithFormat:@"%@/%@.png", documentsDirectory, fileName];

[UIImagePNGRepresentation(imageToSave) writeToFile:filePath2 atomically:YES]; 
```

我的问题是：

有没有办法获得它保存的文件夹的大小？因为我正在保存图像并且我想跟踪它的大小。当它超过一定大小时，我想清除它。我怎样才能清除我保存的图像？我应该一一循环并删除它们吗？或者我可以直接清除整个缓存的图像吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:48:51.227

请参阅以下问题： [获取文件夹大小的简单方法（ObjC/Cocoa）？](https://stackoverflow.com/questions/1275627/easy-way-to-get-size-of-folder-objc-cocoa)

通过这个你可以得到文件夹的大小。您可以使用 NSFileManager 清除路径的内容。

# java - 带有 JS 前端和 Java 后端的 Google API

> ID：12564382
> 
> 赞同：2
> 
> 时间：2012-09-24T11:42:19.063
> 
> 标签：java, javascript, google-drive-api

我想为*Google Drive实现一个**HTML/JS*前端，以便在我的软件项目中将文件上传到我自己的数据库中。我的后端将用*Java*编写。

 ****问题是：通过***Google 的*OAuth2进行用户登录过程的可行设计是什么？

我想让用户在前端单击链接“登录到谷歌驱动器”，并且 JS 向我的 java 后端发送一个请求，该后端通过 google java api lib 生成*OAuth2* url。现在 URL 被发送回浏览器并打开一个新窗口，让用户登录到谷歌，谷歌将访问代码返回给浏览器（或我的 java web 服务？）。

我不是经验丰富的软件开发人员，想问一下您将如何设计/处理此登录过程。登录后，我将使用令牌列出所有文件并在浏览器中显示它们等。

我只是在学习使用 java servlet（和 tomcat）创建这个小型 web 服务的第一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:02:02.157

这是处理 oauth2 授权的示例： [https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

简而言之，您必须获得一个授权令牌并用它签署对 google api 的每个请求。有不同的方式来获得令牌。您可以在客户端获取令牌并将其发送到服务器端以在进一步的请求中重用，或者您可以在服务器端处理它。它是由你决定。

要获得它，您必须：

*   将用户重定向到谷歌登录提示
*   等待用户被重定向到您在创建应用程序时在[google api 控制台中定义的回调](https://code.google.com/apis/console)
*   结果将包含令牌或错误消息

无论您在哪里获得令牌，都将其存储在服务器端并重复使用直到它过期。**

# html - 子域的 IE 图像问题

> ID：12564392
> 
> 赞同：0
> 
> 时间：2012-09-24T11:43:03.450
> 
> 标签：html, css, image, internet-explorer, cross-browser

我正在子域上开发一个基本站点。我在标题中有一个图像，在谷歌浏览器上显示很好，但在 IE8 上它没有显示图像。

图像 SRC 是[http://subdomain.domain.com](http://subdomain.domain.com)。我能想到的唯一想法是 IE8 正在尝试向图像链接添加“www”，例如[http://www.subdomain.domain.com/images/image.jpg](http://www.subdomain.domain.com/images/image.jpg)并且没有浏览器可以找到它。

还有其他人对此有解决方案吗？

编辑 - 这是我正在使用的代码

```
 <div id="header">
 <a href="http://subdomain.domain.co.uk"><img src="http://subdomain.domain.co.uk/images/theLogo.jpg" width="300px" />
 </a>
 </div>
 <div class="clear"></div> 
```

谢谢，

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:56:19.837

当您打开网页时，该页面中的 .PNG 图像可能不会显示（在 Internet Explorer 中）。相反，可能会出现红色 X 或占位符来代替图像。但是，所有其他图像文件类型可能会在 Internet Explorer 中正确显示。
安装第三方应用程序后可能会出现此问题，该应用程序可能更改了 PNG 文件类型的文件类和 MIME 设置。要解决此问题，请查看[此链接](http://www.winhelponline.com/articles/202/1/PNG-images-are-not-displayed-on-Web-sites-in-Internet-Explorer.html)。
或使用 .jpg 图片。

更多信息：
1\. [IE8 不显示图像（红色 x）……有时](https://stackoverflow.com/questions/4188203/ie8-not-displaying-images-red-x-sometimes)
2\. [IE8 不会显示 .PNG 图像](https://superuser.com/questions/406434/ie8-wont-display-png-images)

**添加更多信息**
1\. [IE8 中不显示图像](https://stackoverflow.com/questions/1989138/images-dont-show-up-in-ie8)：您是否尝试过不包括结束标记？根据规范，它不应该有一个。作者：[Mike](https://stackoverflow.com/users/242043/mike)
2。[图像不会出现在 IE8 中，仅在 Chrome、Firefox 或 IE9 中](https://stackoverflow.com/questions/11555877/image-wont-show-up-in-ie8-only-in-chrome-or-firefox-or-ie9)：IE8 似乎在设置宽度属性和 css“max-width”属性的 img 标签上存在问题......也许只是删除它们。[多米尼克·克申](https://stackoverflow.com/questions/11555877/image-wont-show-up-in-ie8-only-in-chrome-or-firefox-or-ie9)霍费尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:36:42.010

您的图像可能使用了不正确的[MIME-type](http://www.boutell.com/newfaq/definitions/mimetype.html)。要确定您的图像是否使用正确的 MIME 类型提供，请执行以下操作：

1.  在 Google Chrome 中打开您的网页。
2.  按`F12`打开开发者工具。
3.  打开![网络](../Images/d27d3425d5cff297440518356d4d80af.png)选项卡。
4.  按`F5`重新加载页面。
5.  在列中查找图像的名称![名称/路径](../Images/f9f98a215ab5eec1f6152395f13cdfcb.png)。
6.  如果您找到了您的图像，请查看![类型](../Images/25ae09bcd4031c26b7205e82beae349e.png)同一行中的列。
7.  列中的值[应该是`image/jpg`](http://www.w3.org/Graphics/JPEG/)。
8.  如果它有任何其他值，则说明您的服务器未正确配置。
9.  您应该查找有关为您使用的服务器类型正确配置 MIME 类型的说明。例如，如果您使用的是 Apache，您可以尝试搜索*[MIME 类型 Apache](https://startpage.com/do/search?q=mime%20type%20apache)*。

# php - Php Regex 排除已匹配的某个模式

> ID：12564394
> 
> 赞同：4
> 
> 时间：2012-09-24T11:43:09.290
> 
> 标签：php, regex

嗨，我需要以下模式的手：

```
(?<=\")([0-9\.\/])+(?=\") 
```

内容

```
<ul>
<li><a href="../">..</a></li>
<li><a href="1.0/">1.0/</a></li>
<li><a href="1.1/">1.1/</a></li>
<li><a href="1.23/">1.23/</a></li>
</ul> 
```

上述模式选择`../, 1.0/, 1.1/, 1.23/`

我**不想**匹配`../`，但数字、句点和 / 的任何排列都应该匹配。

请帮我一把。

一如既往地感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:45:01.323

您可以在现有的正则表达式中放置一个否定的前瞻性断言：

```
(?<=\")(?!\.\.)([0-9\.\/])+(?=\")
       ^^^^^^^^ 
```

[看见](http://www.rubular.com/r/yzQHAjQfrl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:12:31.737

我通过添加负前瞻（**(?!\.)**）来修改您的正则表达式。

```
(?<=\")(?!\.)([0-9\.\/])+(?=\") 
```

# android - 在android中的片段之间切换？

> ID：12564398
> 
> 赞同：1
> 
> 时间：2012-09-24T11:43:31.120
> 
> 标签：android, fragment, sliding

我想从一个切换`fragment`到另一个，这样我`PreviousFragment`就不能完全关闭，而且我`NewFragment`的屏幕宽度不适合整个屏幕宽度，但`100 dp`很短，并且`NewFragment`会滑过另一个。使用动画可以做到这一点吗？请提供一些链接。我是碎片的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:50:13.237

我认为您要使用的是 LayoutTransition。它处理片段更改之间的转换的所有动画。当您使用替换并在包含片段的主视图上使用布局转换时，您将拥有此动画。

# ajax - Openlayers 中 WMS 层的异步更新

> ID：12564399
> 
> 赞同：1
> 
> 时间：2012-09-24T11:43:33.663
> 
> 标签：ajax, asynchronous, openlayers, geoserver

我在 Openlayers 地图上有一个 WMS 图层。此 WMS 图层显示地图上某个人的位置。因此，层需要随着人的移动而更新。如果我在某个预定义的时间间隔调用 WMS 层的 redraw() 函数，它会正确更新。但问题是：在每一个时间间隔，WMS层都会闪烁。我想解决这个问题。

有什么方法可以像 ajax 或任何异步方式来更新 WMS 层，这样用户就不会觉得在每个时间间隔内都发生了一些不必要的事情。任何其他替代方案也受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:45:13.430

终于可以解决问题了。我无法通过 WMS 层找到任何方法来实现这一点。相反，我可以通过矢量图层来实现这一点。

现在我有一个带有 Refresh 策略的矢量图层，如下所示：

```
strategies: [new OpenLayers.Strategy.BBOX(), 
                                 new OpenLayers.Strategy.Refresh({ interval: 5000,
                                     refresh: function() {
                                         myVectorLayer.refresh({force:true})
                                     }

                                  })
            ] 
```

这将有助于刷新矢量图层“myVectorLayer”以每 5 秒刷新一次。

我希望这将有助于任何未来的问题解决者。

# jquery - 如何替换特定的字符数？

> ID：12564401
> 
> 赞同：-3
> 
> 时间：2012-09-24T11:43:36.413
> 
> 标签：jquery, regex, replace, character

> **可能重复：**
> [用javascript缩短长字符串的聪明方法](https://stackoverflow.com/questions/1199352/smart-way-to-shorten-long-strings-with-javascript)

我有

```
<h1>"Very big" page title </h1> 
```

页面标题，我需要检查字符数是否大于 30，而不是替换最后一个字符`...`

我可以以某种方式将文本分成两部分并替换第二部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:45:35.347

您必须使用 . 检查标题的长度`jQuery`。如果大于`30`，则将其拆分为指定长度并`...`在最后添加。

`Regex`在这里没用。

```
$('h1').each(function(){
  var text = $(this).text();
  if ( text.length > 30 ) {
    $(this).text( text.substring(0, 30) + '...' );
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:46:33.130

代码可能是这样的：

```
var text = $('h1').text();
if(text.length > 30)
   $('h1').text(text.sustring(0,30) + "...") 
```

并且不需要正则表达式。

# android - 如何设置 X 轴最小值和最大值

> ID：12564406
> 
> 赞同：4
> 
> 时间：2012-09-24T11:43:44.500
> 
> 标签：android, time-series, achartengine

我正在尝试设置 X 轴最小值和最大值。我找到了方法`mRenderer.setXAxisMax(value); mRenderer.setXAxisMin(value);`，但我不知道如何在 TimeSeries 中设置 X。

当我使用时间戳时`mRenderer.setXAxisMin(1347963701812)`，它说 int 超出范围

当我使用字符串`mRenderer.setXAxisMin("2012-09-20 15:00:00")`时，它说这不适用于字符串。

如何在 TimeSeries 上设置最小和最大 X 日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:01:47.087

在您的问题中，值得一提的是，当您说“它”时，“它”是 Java 编译器。

只需让编译器了解您正在传递一个不适合 int 的 double 值：

```
mRenderer.setXAxisMin(1347963701812.0); 
```

# entity-framework - 如何找到流利的API映射了哪个表？

> ID：12564408
> 
> 赞同：4
> 
> 时间：2012-09-24T11:43:55.477
> 
> 标签：entity-framework, ef-code-first, fluent-interface

我需要找到映射到 EntityTypeConfiguration 类的表。例如：

```
 public class PersonMap : EntityTypeConfiguration<Person>
    {
        public PersonMap()
        {
    ...
            this.ToTable("Persons");
    ....

        }
    } 
```

我需要类似反向映射的东西：

```
var map=new PersonMap(); 
string table =map.GetMappedTableName(); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:51:27.127

将字段添加到 PersonMap：

```
public class PersonMap : EntityTypeConfiguration<Person>
{
    public string TableName { get { return "Persons"; } }
    public PersonMap()
    {
        ...
        this.ToTable(TableName);
        ...
    }
} 
```

像这样访问它：

```
var map = new PersonMap(); 
string table = map.TableName; 
```

如果您可能不知道地图的类型，请使用接口：

```
public interface IMap
{
    string TableName { get; }
}
public class PersonMap : EntityTypeConfiguration<Person>, IMap
{
    public string TableName { get { return "Persons"; } }
    public PersonMap()
    {
        ...
        this.ToTable(TableName);
        ...
    }
} 
```

像这样访问：

```
IMap map = new PersonMap(); 
string table = map.TableName; 
```

# javascript - 如何根据另一个元素的预期滚动距离添加到 scrollTop

> ID：12564410
> 
> 赞同：1
> 
> 时间：2012-09-24T11:44:02.623
> 
> 标签：javascript, jquery

小提琴：http: [//jsfiddle.net/DerNalia/88N4d/9/](http://jsfiddle.net/DerNalia/88N4d/9/)

**我试图完成的行为：**

1.  如果有足够的空间放置侧边栏，则应将它们固定在页面上
2.  如果没有足够的空间，侧边栏应该滚动
3.  向下滚动并到达侧边栏的底部时，它应该停止滚动
4.  向下滚动时，侧边栏也应向下滚动，直到到达侧边栏的底部
5.  向上滚动并到达侧边栏的顶部时，它应该停止滚动
6.  如果在内容滚动期间的任何时候，用户切换滚动方向，侧边栏也应与页面/内容的其余部分沿相同方向移动
7.  向上滚动时，侧边栏也应该向上滚动，直到到达侧边栏的顶部
8.  *如果内容比侧边栏短，侧边栏应该仍然可以滚动* **这是我遇到的问题**

如何做到这一点，以便我可以检测到用户所需的预期滚动距离，而不是使用内容正文的实际滚动距离？可能还有另一种解决方案，但这是我现在能想到的。

我目前在 Mac 上使用 Chrome。

更新：

我注意到的一件事：在 Mac 上使用触控板会在边缘进行拉伸/有弹性的滚动恶作剧.. 这会弄乱这个 javascript 硬核。如果您向上弹起足够多的次数，则可以将侧边栏完全滚动到屏幕之外。鼠标滚轮滚动没有这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:25:45.770

我认为你最好定位列`absolute`，然后检查位置滚动并切换位置。

它变得相当复杂，因为如果两列都是固定的并且内容有规律的流动，滚动将会跳转。

我使用更简单的逻辑为您创建了一个解决方案：

```
var $win = $(window);
var $containers = $(".container").css('position','absolute');

// we need to force a height to the body for fixed positioning
$('body').css('minHeight', Math.max.apply( Math, $containers.map(function() {
    return $(this).height();
})));

$win.bind("resize scroll", function() {
    var scrolled = $win.scrollTop(),
        winheight = $win.height(),
        elheight = 0;
    $containers.each(function() {
        elheight = $(this).height();
        $(this).css('position', function() {
            if ( elheight > (winheight+scrolled) ) {
                $(this).css('top',0);
                return 'absolute';
            }
            $(this).css('top', Math.min(0, winheight-elheight));
            return 'fixed';
        });
    });
}); 
```

它应该满足您的要求。如果列短于窗口高度，或者如果 scrollTop 足够，则固定定位启动。

一个充满荣耀的演示：http: [//jsfiddle.net/mb9qC/](http://jsfiddle.net/mb9qC/)

# iphone - 带有 uitableview 的基于页面的应用程序；转到下一页时如何显示详细视图并在表格中显示其他数据？

> ID：12564412
> 
> 赞同：1
> 
> 时间：2012-09-24T11:44:22.510
> 
> 标签：iphone, ios, uitableview, uipageviewcontroller

我有基于页面的应用程序。在每个页面上，我在顶部有 3 个 uibuttons，在右侧有字母表（用于在 uitable 中排序数据的 uibuttons）的 uiscrollview，在中心有 uitableview。如何显示单元格的详细视图？如果有必要添加 uinavigationcontroller 我不能这样做。如果我添加它，它会禁用与我的表格、按钮和滚动视图的交互。另一个问题是当进入下一页时如何在 tableview 和 scrollview 中显示新数据？

我有 rootViewController 类和 DataViewController 类。rootViewController 清单：

```
@interface RootViewController ()
@property (readonly, strong, nonatomic) ModelController *modelController;
@end

@implementation RootViewController

@synthesize pageViewController = _pageViewController;
@synthesize modelController = _modelController;
@synthesize navContr = _navContr;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
// Configure the page view controller and add it as a child view controller.

//[self presentModalViewController:navContr animated:YES];

self.pageViewController = [[[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil] autorelease];
self.pageViewController.delegate = self;

DataViewController *startingViewController = [self.modelController viewControllerAtIndex:0 storyboard:self.storyboard];
NSArray *viewControllers = [NSArray arrayWithObject:startingViewController];
[self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];

   self.pageViewController.dataSource = self.modelController;

[self addChildViewController:self.pageViewController];
[self.view addSubview:self.pageViewController.view];

self.navContr = [[UINavigationController alloc] initWithRootViewController:self.pageViewController];
[self.view addSubview:self.navContr.view];

// Set the page view controller's bounds using an inset rect so that self's view is visible around the edges of the pages.
CGRect pageViewRect = self.view.bounds;
self.pageViewController.view.frame = pageViewRect;

[self.pageViewController didMoveToParentViewController:self];

// Add the page view controller's gesture recognizers to the book view controller's view so that the gestures are started more easily.
self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;
for (UIGestureRecognizer *recognizer in self.pageViewController.gestureRecognizers){
    if ([recognizer isKindOfClass:[UITapGestureRecognizer class]]){
        [recognizer setEnabled:NO];
    }
}
} 
```

* * *

经过几次操作后，它可以工作，但我需要帮助才能让它正常工作！

所以现在看起来像这样

![一](../Images/c59bb7cfc3a69255d847d5e29b9b588a.png) ![二](../Images/dc0866b079de65a7b6b92d86ad303f9d.png)

下一个问题：如何去除顶部的棕色空间？？？

* * *

：：更新：：

问题解决了。只需将 UINavigationController 的 y 轴位置设置为 -20 ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:59:41.580

可能还有其他方法，但到目前为止最简单的方法是使用导航控制器。事实上，它正是为了做到这一点而构建的。

如果您不想要导航栏，则可以将其隐藏在 viewWillAppear 函数中。

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

然后，您可以添加另一个 UIViewController 以在用户选择单元格时推送。

再次阅读您的 OP 后，我不确定您是如何添加导航控制器的。

要使用 navigationController，您需要创建它并在开始时加载它。然后创建当前的 viewController（带有按钮和表格等的那个）并将其设置为 navigationController 的 rootViewController。

然后显示导航控制器。

你能解释一下你是如何添加你的 navigationController 的，因为它可能有助于理解出了什么问题。

谢谢

：：编辑：：

好的，我的假设是正确的。

您使用导航控制器的方式与预期不同。

好的，所以目前您的 AppDelegate 文件将有一个方法 Application didFinishLaunching...

它看起来像这样......

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[OJFViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

你应该改变它，使它像这样......

首先向您的 appDelegate 添加一个属性...

```
@property (nonatomic, strong) UINavigationController *navigationController; 
```

然后将 didFinishLaunchingMethod 更改为此...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[OJFViewController alloc] initWithNibName:@"MainViewController" bundle:nil];

    self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这仍然会显示 MainViewController，但它现在将包含在 navigationController 中。

接下来在您的 MainViewController 函数中`viewWillAppearAnimated`添加该行...

```
[self.navigationController setNavigationBarHidden:YES animated:animated]; 
```

然后，这将隐藏视图顶部的导航栏，因此您仍然可以访问您的按钮。

您需要一个新的 ViewController 和 xib 文件（例如 DetailViewController）。

当用户选择表格行时，您需要执行类似...

```
DetailViewController *detailView = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];

//pass in details of which row was selected.

[self.navigationController pushViewController:detailView animated:YES]; 
```

这将显示您的新视图和新视图控制器。您还需要编写一种传入数据的方法（在 DetailViewController 上设置一个属性）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:04:29.127

我不确定这个关于创建基于导航的项目的链接是否可以帮助你.. (http://iosmadesimple.blogspot.com/2012/08/navigation-based-project-doing-it.html)

在该教程中，有一个名为 SampleViewController 的类，它是 UIViewController 的子类。您可能希望将 tableView 放在 SampleViewController.xib 文件中。然后在您的 SampleViewController.h 文件中，添加一个 IBOutlet UITableView* yourTable 属性并合成它。将它连接到 .xib 文件中的 tableView。//或者您可以通过编程方式进行

在您的 SampleViewController.h 中，使您的界面标题看起来像这样。我想您已经知道了...

@interface SampleViewController:UIViewController < UITableviewDelegate, UITableViewDatasource >

在您的 SampleViewcontroller.m 中，在 viewDidLoad 方法下，将表委托和数据源设置为 self：

```
yourTableView.delegate = self;
yourTableView.datasource = self; 
```

之后，您实现 tableView 委托和数据源方法... //您已经知道这些，因为您已经能够显示 tableview ;)

**其中一种方法是“tableview：didSelectAtIndexpath：”->这是您单击其中一个单元格时可以放置代码的部分。**

假设您有 DetailsViewController 类，这是您希望在单击单元格并显示其详细信息后显示的类。

DetailsViewController 类必须有一个变量来接受您想要显示的数据。比方说，一个 NSString *detailsMessage; // 做@property 和@synthesize 的事情...

让我们回到 SampleViewController.m 文件，在 tableview:didSelectAtIndexpath: Method: 里面那个 Method.. 把这些代码。

```
DetailsViewController *detailsVC = [[DetailsViewController alloc] init];
detailsVC.detailsMessage = @"The Data you want to pass.";
[self.navigationController pushViewController:detailsVC animated:YES]; 
```

我希望这有帮助。:(

# asp.net-web-api - 如何执行 HttpClientHandler 的内存测试

> ID：12564419
> 
> 赞同：0
> 
> 时间：2012-09-24T11:44:39.357
> 
> 标签：asp.net-web-api

我正在通过将`HttpServer`实例直接传递给`HttpClient`. 我怎样才能连线`HttpClientHandler`？

```
Establish ctx = () =>
{
    var config = new HttpConfiguration();
    config.Routes.MapHttpRoute(name: "Default", routeTemplate: "api/{controller}/{id}", defaults: new { controller = "values", id = RouteParameter.Optional });
    config.MessageHandlers.Add(new CompressionHandler());

    var server = new HttpServer(config)
    {
        InnerHandler = new DecompressionHandler()
    };
    client = new HttpClient(server);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:09:03.377

您可以链接处理程序：

```
var handler = new HttpServer(config)
{
    InnerHandler = new HttpClientHandler()
};

HttpClient client = new HttpClient(handler); 
```

更多信息（惊喜！:-) 在 asp.net - [http://www.asp.net/web-api/overview/working-with-http/http-message-handlers](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:32:54.823

为了测试客户端处理程序，我必须将其实际设置`HttpServer`为**内部**处理程序：

```
var server = new HttpServer(config);

var handler = new DecompressionHandler
{
    InnerHandler = server
};

client = new HttpClient(handler); 
```

# android - 如何在android中获取wifi配置文件位置

> ID：12564423
> 
> 赞同：8
> 
> 时间：2012-09-24T11:44:51.837
> 
> 标签：android, android-wifi

我正在开发一个应用程序，它可以从任何 android 设备（root）备份 wifi 配置，所以我想知道如何在 android 设备中获取文件位置，以便处理它。

我知道有很多位置取决于您的 ROM 或设备

喜欢`/data/wifi/bcm_supp.conf`或`/data/misc/wifi/wpa_supplicant.conf`

但我想动态获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:18:24.647

您需要创建一个`WifiConfiguration`这样的实例：

```
String networkSSID = "test";
String networkPass = "pass";

WifiConfiguration conf = new WifiConfiguration();
conf.SSID = "\"" + networkSSID + "\"";   // 
```

然后，对于 WEP 网络，您需要执行以下操作：

```
conf.wepKeys[0] = "\"" + networkPass + "\""; 
conf.wepTxKeyIndex = 0;
conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40); 
```

对于 WPA 网络，您需要像这样添加密码：

```
conf.preSharedKey = "\""+ networkPass +"\""; 
```

对于开放网络，您需要这样做：

```
 conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE); 
```

然后，您需要将其添加到 Android Wi-Fi 管理器设置：

```
WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE); 
wifiManager.add(conf); 
```

最后，您可能需要启用它，以便 Android 连接到它：

```
List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
for (WifiConfiguration i : list) {
    if (i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
        wm.disconnect();
        wm.enableNetwork(i.networkId, true);
        wm.reconnect();
        break;
    }
} 
```

在 WEP 的情况下，如果您的密码是十六进制的，则不需要用引号括起来。

# java - 是“Throws Throwable”的好习惯吗

> ID：12564428
> 
> 赞同：38
> 
> 时间：2012-09-24T11:45:21.350
> 
> 标签：java

在过去，我会使用以下方法阅读大量代码：

```
public Object doSomething() throws Throwable {
    ...
} 
```

这样做是常见的做法吗？

有什么优点和缺点？

`throws Trowable`在我看来，这就像完成异常事务的“橙子特工”方式

**编辑**

* * *

1.  处理方法中的预期异常

2.  抛出意外的异常（一一）

3.  不关心错误

这是要走的路吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-24T11:52:25.917

你不应该扔`Throwable`。这就是为什么。

Throwable 是可以抛出的事物层次结构的顶部，由`Exceptions`和组成`Errors`。由于`Errors`根据定义是由不可挽救的条件引起的，因此将它们包含在您的方法声明中是没有意义的。就这样离开了`Exception`。

您应该`throws Exception`改为声明您的方法。

注意范围越窄`throws`越好。

`throws Exception`如果您的方法不生成异常，而是调用声明为的其他代码`throws Exception`并且您希望异常渗透到调用堆栈中，则声明您的方法是可以的。

如果您的方法是*生成*异常，则声明一个更窄的范围，例如`throws IOException, MyProcessingException`，等

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T11:57:25.060

这是一个加载的问题。这与其说是关于异常处理，不如说是关于代码的可读性。

这取决于您从哪里获得代码示例。专业人士在抛弃一种方法时更喜欢更具体。主要原因是它使您的 API 更具可读性。例如，如果您的方法抛出 Throwable，这基本上意味着任何事情都可能发生，而您的方法无论如何都不想处理它。但实际上，只会发生有限数量的事情：

*   无论您在方法中进行的其他调用导致的任何已检查异常
*   无论您根据自己的断言故意抛出什么已检查异常
*   无论您没有计划什么未经检查的异常
*   `java.lang.Error`对 JVM 和环境更具有全局性的错误 ( )

通过明确说明您要抛出的异常，您是在告诉 API 的用户他们应该注意什么。例如，当您使用 时`InputStream`，您会注意到大多数方法 throw 至少`java.io.IOException`，这为您提供了一些关于您应该注意什么的有用信息。

在编码时，作为一般规则，您希望尽可能保持 API 的表现力。你基本上有一行代码来显示一个方法的公共 API（即它的签名，我猜也是注释），所以你希望它完全具有表现力（返回类型、名称、参数，还有抛出的异常）。

至于捕获可抛出对象并打印堆栈跟踪，我会说您不应该捕获异常，除非您可以对此做些什么。相反，让它滚动调用堆栈，直到某个类抓住它来做一些事情。有时，它可能会一直滚动到您的主类，我想它必须抓住它并打印堆栈跟踪作为最后的手段。基本上，如果你不能对异常采取行动，那就让它进入调用堆栈。此外，您极少会发现自己处于应该使异常保持沉默的情况（即捕获它但不采取任何措施）。当需要解决问题时，这通常会引发问题。

[这是一篇](http://nekulturniy.com/Writings/RebelWithoutAClause/Rebel_without_a_clause.html)关于滥用异常处理的有趣但有趣的文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-08T14:18:51.757

在极少数情况下，抛出`Throwable`s 是可以接受的。例如，`@Around`Spring AOP 中的通知通常被声明为抛出一个`Throwable`.

以下示例是从[Spring AOP 文档](http://docs.spring.io/spring/docs/4.3.1.RELEASE/spring-framework-reference/html/aop.html#aop-ataspectj-around-advice)中逐字复制的：

```
 import org.aspectj.lang.annotation.Aspect;
  import org.aspectj.lang.annotation.Around;
  import org.aspectj.lang.ProceedingJoinPoint;

  @Aspect
  public class AroundExample {

      @Around("com.xyz.myapp.SystemArchitecture.businessService()")
      public Object doBasicProfiling(ProceedingJoinPoint pjp) throws Throwable {
          // start stopwatch
          Object retVal = pjp.proceed();
          // stop stopwatch
          return retVal;
      }

  } 
```

为什么`doBasicProfiling`声明抛出一个`Throwable`？因为原始方法（即执行连接点）可能会抛出一个`Error`, `RuntimeException`, 或一个检查异常。所以只有声明`doBasicProfiling`抛出一个`Throwable`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T11:49:43.237

在功能上，它等同于`throws Exception`，因为错误是未经检查的。

我认为没有理由声明抛出 Throwable 的方法。然而，这并不意味着 catch 和 printStackTrace 是一个好的选择。

通常，您希望捕获可以对它们做一些明智的事情的可投掷物。

抛出你没想到的 throwable 的代码应该会爆炸，所以你可以看到错误并修复错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T11:51:16.373

> 这样做是常见的做法吗？

在 JDK 中很少见。这主要用于不清楚如何处理已检查的异常时。

> 有什么优点和缺点？

优点是你可以编译你的代码而不用担心检查异常。

缺点是您应该处理的异常被忽略了。

> catch 和 printStackTrace() 不是更好吗？

无论如何，通常都会打印未处理的异常，因此捕获它们并没有多大帮助。

当您可以通过这样做添加一些值时，您应该捕获异常，并在不能`throws`时将异常添加到子句中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-24T12:01:04.497

这真是一个值得商榷的事情。让方法抛出太多异常将导致大量错误处理代码。有时它不是故意的。

但是因为我不喜欢签名中的太多异常并不意味着让我们使用所有异常的父级并且我们完成了！不起作用。

可以 做的是对异常进行分类，`BusinessException`例如`ServiceException``minimum balance in account can not be less than say 100$``InsufficientBalance``BusinessException`

所以你的方法会像

```
public Object doSomething() throws BusinessException {

 if(!hasMinimumbalance())
  { 
    throw new InsufficientBalance(ErrorCode);
  }
} 
```

这将做的是将相关的异常组合在一起，并且每当 API 用户想要检测异常特定的错误时，他就可以做到，否则通用错误处理是可能的。

这里的核心点是在你应该向用户显示**你已经用完余额并且你不能提款的 UI 上**

您可以在更大的方面说，为了显示人类可读的错误形式，确实有必要分离异常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T11:50:21.663

你是在问 Throwable 吗？如果是这样，那么这不是一个好习惯。它不向类（方法）用户提供任何有用的信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-24T15:08:02.547

抛出（和捕获）Throwable（或异常）通常是不好的做法，因为它“覆盖”了您可能想要捕获的任何特定异常。那么你将不得不诉诸丑陋，如下所示：

```
public void myMethod() throws Throwable {
    if (x) {
        throw new MyException1();
    }
    if (y) {
        throw new MyException2();
    }
}

public void callingMethod() {
    try {
        myMethod();
    }
    catch(Throwable t) {
        if (t instanceof MyException1) {
            // handle exception 1
        }
        else if (t instanceof MyException2) {
            // handle exception 2
        }
        else {
            // handle other exceptions
        }
    }
} 
```

这很容易出错（并被 CheckStyle 标记为代码违规）。最好有这样的代码：

```
public void myMethod() throws MyException1, MyException2 {
    if (x) {
        throw new MyException1();
    }
    if (y) {
        throw new MyException2();
    }
}

public void callingMethod() {
    try {
        myMethod();
    }
    catch(MyException1 e) {
        // handle exception 1
    }
    catch(MyException2 e) {
        // handle exception 2
    }
} 
```

仅仅通过调用 printStackTrace() 来处理异常通常不是一个好主意。printStackTrace() 将堆栈跟踪发送到标准错误，可能根本无法读取。更好的选择是使用应用程序的日志记录工具（如 log4j）来报告异常。即便如此，仅仅记录它可能还不够。

我的经验法则是：

如果您可以在本地处理异常，请执行此操作。例如，当将 String 解析为 Integer 时，您可以捕获 NumberFormatException 并返回默认值：

```
prvate int parseAmount(String amountValue) {
    int amount;
    try {
        amount = Integer.parseInt(amountValue);
    }
    catch(NumberFormatException e) {
        // default amount
        amount = 0;
    }
    return amount;
} 
```

如果您无法在本地处理异常，请考虑是否应该公开正在引发的异常类型。如果此类型是某种晦涩的（依赖于实现的）类型，那么将其包装在您自己的通用异常类型中可能是一个好主意：

```
private Customer getCustomer(int customerId) throws ServiceException {
    try {
        return customerService.getCustomer(customerId);
    }
    catch(CustomerServiceSpaghettiTangledException e) {
        throw new ServiceException("Error calling the customer service", e);
    }
} 
```

这里的“ServiceException”是您创建的 Exception 的子类。Spring 还专门为此目的提供了[异常层次结构。](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/dao/DataAccessException.html)

通过包装异常，您隐藏了实现细节，使您的服务层更易于使用。

如果您决定从您的方法中抛出异常，则需要在调用堆栈中“更高”地处理它。这可以是您的 Web 应用程序中的通用错误页面，说明出现问题并可能提供错误消息或代码。在某些情况下，更高级别的代码可以尝试重试或可能的替代方式来获得所需的结果。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-17T15:14:24.707

我能想到的唯一用例是单元测试之类的测试代码。但亚当的对立面仍然是“如果是这样，那么这不是一个好的做法。它没有为类（方法）用户提供任何有用的信息。”

# bonjour - 如何像使用 Bonjour 一样使用 Avahi

> ID：12564430
> 
> 赞同：3
> 
> 时间：2012-09-24T11:45:26.643
> 
> 标签：bonjour, mdns, avahi

我使用 Avahi 和 Bonjour 作为 mDNS 响应器。

在 Bonjour 中，我得到了我的 query-in-answer 部分的答案，并且 SRV、A 和 AAAA 记录等附加信息位于 DNS 数据包的附加部分中。

但在 Avahi 中，所有 PTR、SRV、A、AAAA 都出现在答案部分。

如何配置 Avahi 以与 Bonjour 相同的方式生成响应？

我还希望在 Avahi 中进行相同的查询，延迟 <= 2 毫秒。

# sql - 在 SQL Server 表中使用序号填充主 ID 列

> ID：12564440
> 
> 赞同：1
> 
> 时间：2012-09-24T11:46:05.327
> 
> 标签：sql, sql-server, case, dateadd

我浏览了论坛，找不到完全符合我的问题的任何内容。此查询应该为员工添加定期假期。如果我排除 PL_ID 变量并且只有一个没有主键的表，则代码会添加在 case 语句中定义的正确日期假期，这是在测试表上，但需要添加到具有超过 25,000 个条目的表中。

该表包括 PL_ID、Log_Date、Out_Time、In_Time

我目前有这个代码：

```
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
DECLARE @DateVar DateTime
DECLARE @PL_ID int

SET @StartDate = '1/10/2012'
SET @EndDate = '1/11/2012'
SET @DateVar = @StartDate
SET @PL_ID = 0

WHILE @DateVar <= @EndDate

BEGIN 
 INSERT INTO Logger_test2(PL_ID,Log_Date,In_Time,Out_Time)
 SELECT @PL_ID,@DateVar,
        CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN '9'
             WHEN DATENAME(dw,@DateVar) = 'Monday' THEN '12'
         END AS In_Time,
        CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN 'After 5'
             WHEN DATENAME(dw,@DateVar) = 'Monday' THEN 'After 5'
         END AS Out_Time      
  WHERE DATENAME(dw,@DateVar) IN ('Thursday','Monday')

 SET @DateVar = DATEADD(d,1,@DateVar)
 UPDATE Logger_test2 set @PL_ID = PL_ID = @PL_ID +1
 END 
```

使用此代码，它只会在具有最大 PL_ID 的表中添加一行，但我需要它为每个条目创建一个新 ID，抱歉，它有点模糊。真的很感谢你的帮助！

现在离得到它更近了！但是，如果我将日期更改为下个月，则会出现重复的键错误：消息 2627，级别 14，状态 1，第 15 行违反主键约束“PK_Logger_test2”。无法在对象“dbo.Logger_test2”中插入重复键。重复键值为 (4) - 是否有另一种方法可以避免插入重复键？

已解决：这是完整的代码:)，很有魅力，让我的生活更轻松！只需更改用户ID，即可输入每个人预定的明年假期：

```
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
DECLARE @DateVar DateTime
DECLARE @PL_ID int
DECLARE @User_ID int
DECLARE @Reason nvarchar(50)
DECLARE @Details nvarchar (500)

SET @StartDate = '30/09/2012'
SET @EndDate = '24/12/2012'
SET @DateVar = @StartDate
SET @User_ID = 55
SET @Reason = 'Day off'
SET @Details = 'Day off' 

--SET @PL_ID = 0
SELECT @PL_ID = max(PL_ID) from People_Logger

WHILE @DateVar <= @EndDate

BEGIN
 select @PL_ID = @PL_ID +1
 SET IDENTITY_INSERT dbo.People_logger ON;
 INSERT INTO People_Logger(PL_ID,LOG_Date,User_ID,Reason,Details,In_Time,Out_Time)
 SELECT @PL_ID,@DateVar,@User_ID,@Reason,@Details,
        CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN 'After 5'
             WHEN DATENAME(dw,@DateVar) = 'Friday' THEN 'After 5'
         END AS In_Time,
        CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN '9'
             WHEN DATENAME(dw,@DateVar) = 'Friday' THEN '9'
         END AS Out_Time
  WHERE DATENAME(dw,@DateVar) IN ('Thursday','Friday')
SET IDENTITY_INSERT dbo.People_Logger OFF; 
 SET @DateVar = DATEADD(d,1,@DateVar)
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:54:51.413

好的，我认为您只需要在插入之前增加变量的值。像这样

```
WHILE @DateVar <= @EndDate
BEGIN

  select @PL_ID = @PL_ID + 1

  INSERT INTO Logger_test2(PL_ID,Log_Date,In_Time,Out_Time)
  SELECT @PL_ID,@DateVar,
  etc etc

  Set @DateVar= DATEADD(d,1,@DateVar)
  -- NO Update statement
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:59:33.807

```
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
DECLARE @DateVar DateTime
DECLARE @PL_ID int

SET @StartDate = '1/10/2012'
SET @EndDate = '1/11/2012'
SET @DateVar = @StartDate
SET @PL_ID = 0

WHILE @DateVar <= @EndDate

BEGIN 
 INSERT INTO Logger_test2(PL_ID,Log_Date,In_Time,Out_Time)
 SELECT @PL_ID,@DateVar,
        CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN '9'
             WHEN DATENAME(dw,@DateVar) = 'Monday' THEN '12'
         END AS In_Time,
        CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN 'After 5'
             WHEN DATENAME(dw,@DateVar) = 'Monday' THEN 'After 5'
         END AS Out_Time      
  WHERE DATENAME(dw,@DateVar) IN ('Thursday','Monday')

 SET @DateVar = DATEADD(d,1,@DateVar)
 SET @PL_ID = @PL_ID +1
 END 
```

# javascript - 如何将对象引用传递给另一个对象？

> ID：12564442
> 
> 赞同：1
> 
> 时间：2012-09-24T11:46:16.227
> 
> 标签：javascript, function, reference, this, typeerror

例子：

JS文件：

```
function Controller() {
 self = this;

 self.createObject = createObject;
  function createObject() {
   new ObjectTest(self);
  }

 self.createAlert = createAlert;
 function createAlert(text) {
  alert(text);
 }
}

function ObjectTest(controller) {
 this.controller = controller;
 this.controller.createAlert("test");
} 
```

* * *

HTML 文档 - 构造对象并执行方法

```
<body onload="new Controller.createObject()"> 
```

* * *

这将给出错误消息：

```
Uncaught TypeError: Object #<Controller> has no method 'createAlert' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:47:23.363

构造实例时，需要加括号：

```
<body onload="new Controller().createObject()"> 
```

但是您可以简化控制器并使用更标准的构造：

```
function Controller() {
 self = this;
 self.createObject = function(){
   new ObjectTest(self);
 };
 self.createAlert = function(text) {
  alert(text);
 };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:52:39.960

您的代码被解释为命名空间，因此它会尝试创建`Controller.createObject`函数的实例（没有）。括号就是一切，你想要

```
(new Controller).createObject()
// or
new Controller().createObject() 
```

代替

```
new Controller.createObject()
// which is like
new (Controller.createObject)() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:55:02.953

你错过了后面的括号`Controller`。你写了：

```
<body onload="new Controller.createObject()"> 
```

这基本上意味着*“从`Controller.createObject`”*创建一个新实例，您的意思是*“创建一个新实例`Controller`，然后调用`createObject()`”*：

```
<body onload="new Controller().createObject()"> 
```

此外，它似乎`Controller`更像是一个单例或“静态类”。您实际上可以避免创建一个新实例，只需使用一个简单的对象：

```
var Controller = {
    createObject: function () {
        return new ObjectTest(this);
    },

    createAlert: function(text) {
        alert(text);
    }
} 
```

然后从您的代码中：

```
<body onload="Controller.createObject()"> 
```

希望能帮助到你。

# bash - 串联和追加的区别

> ID：12564454
> 
> 赞同：6
> 
> 时间：2012-09-24T11:46:44.830
> 
> 标签：bash, paste, cat

Concatenate和Append之间的基本和本质区别是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:48:17.403

“连接”将两个特定项目连接在一起，而“附加”将您指定的内容添加到可能已经存在的内容中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T11:53:18.997

当在两个字符串上使用`Concat`or`append`时，它们在输出它们时可能会给出相同的结果，但主要区别在于使用连接创建新的字符串对象，因为在以下情况下它不一样`StrinBuffer APPEND()`

# java - 如何从 java 调用命名的 XSLT 模板

> ID：12564462
> 
> 赞同：0
> 
> 时间：2012-09-24T11:47:24.703
> 
> 标签：java, xslt

我有`XSLT`命名模板的文件：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" />
    <xsl:template name="A">...</xsl:template>
    <xsl:template name="B">...</xsl:template>
    <xsl:template name="C">...</xsl:template>
</xsl:stylesheet> 
```

如何`(A,B,C)`从 java 代码中调用命名模板（我需要这个只是为了测试）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:40:45.933

`XSLT 1.0`不允许这样做。`XSLT 2.0`确实如此，但 API 取决于您使用的产品（`JAXP`从未赶上`XSLT 2.0`）。对于`Saxon`，使用`s9api`方法`XsltTransformer.setInitialTemplate()`。

# java - 在Android中迭代HashMap并替换值

> ID：12564464
> 
> 赞同：1
> 
> 时间：2012-09-24T11:47:38.817
> 
> 标签：java, android, hashmap

嗨，我有一个带有 {key,value}`{var1:10},{var2:20}`等的 HashMap。

我有另一个带有 {key,value} 的 hashMap 作为`{value,import android droid = android.Android() average = (var1 + var2)/2 droid.makeToast('Hello World' +str(average))}`.

我想用第一个 hashMap 中的值替换变量名。

谁能帮助我如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:15:04.457

假设您的第一个地图是类型`HashMap<String, Integer>`，而您的第二个地图是类型`HashMap<String, String>`，您可以遍历这两个地图并执行字符串替换：

```
for (Entry<String, String> e1 : map2.entrySet()) {
    String s = e1.getValue();
    for (Entry<String, Integer> e2 : map1.entrySet()) {
        s = s.replace(e2.getKey(), e2.getValue().toString());
    }
    map2.put(e1.getKey(), s);
} 
```

# c# - 您如何将 AsParallel 与 async 和 await 关键字一起使用？

> ID：12564465
> 
> 赞同：25
> 
> 时间：2012-09-24T11:47:44.080
> 
> 标签：c#, asynchronous

我正在查看某人的异步示例代码，并注意到它的实现方式存在一些问题。在查看代码时，我想知道使用并行循环遍历列表是否比仅正常循环遍历列表更有效。

据我所知，性能差异很小，两者都用尽了每个处理器，并且都在相同的时间内完成。

这是第一种方法

```
var tasks= Client.GetClients().Select(async p => await p.Initialize()); 
```

这是第二个

```
var tasks = Client.GetClients().AsParallel().Select(async p => await p.Initialize()); 
```

我是否正确假设两者之间没有区别？

完整的程序可以在下面找到

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            RunCode1();
            Console.WriteLine("Here");
            Console.ReadLine();

            RunCode2();
            Console.WriteLine("Here");

            Console.ReadLine();

        }

        private async static void RunCode1()
        {
            Stopwatch myStopWatch = new Stopwatch();
            myStopWatch.Start();

            var tasks= Client.GetClients().Select(async p => await p.Initialize());

            Task.WaitAll(tasks.ToArray());
            Console.WriteLine("Time ellapsed(ms): " + myStopWatch.ElapsedMilliseconds);
            myStopWatch.Stop();
        }
        private async static void RunCode2()
        {
            Stopwatch myStopWatch = new Stopwatch();
            myStopWatch.Start();
            var tasks = Client.GetClients().AsParallel().Select(async p => await p.Initialize());
            Task.WaitAll(tasks.ToArray());
            Console.WriteLine("Time ellapsed(ms): " + myStopWatch.ElapsedMilliseconds);
            myStopWatch.Stop();
        }
    }
    class Client
    {
        public static IEnumerable<Client> GetClients()
        {
            for (int i = 0; i < 100; i++)
            {
                yield return new Client() { Id = Guid.NewGuid() };
            }
        }

        public Guid Id { get; set; }

        //This method has to be called before you use a client
        //For the sample, I don't put it on the constructor
        public async Task Initialize()
        {
            await Task.Factory.StartNew(() =>
                                      {
                                          Stopwatch timer = new Stopwatch();
                                          timer.Start();
                                          while(timer.ElapsedMilliseconds<1000)
                                          {}
                                          timer.Stop();

                                      });
            Console.WriteLine("Completed: " + Id);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-24T12:24:20.617

应该有非常小的可辨别的差异。

在您的第一种情况下：

```
var tasks = Client.GetClients().Select(async p => await p.Initialize()); 
```

正在执行的线程将（一次一个）开始`Initialize`为客户端列表中的每个元素执行。`Initialize`立即将一个方法排队到线程池并返回一个未完成的`Task`.

在你的第二种情况下：

```
var tasks = Client.GetClients().AsParallel().Select(async p => await p.Initialize()); 
```

The executing thread will fork to the thread pool and (in parallel) start executing `Initialize` for each element in the client list. `Initialize` has the same behavior: it immediately queues a method to the thread pool and returns.

The two timings are nearly identical because you're only parallelizing a small amount of code: the queueing of the method to the thread pool and the return of an uncompleted `Task`.

If `Initialize` did some longer (synchronous) work before its first `await`, it may make sense to use `AsParallel`.

Remember, all `async` methods (and lambdas) start out being executed synchronously (see the [official FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx) or [my own intro post](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T12:22:08.560

有一个独特的主要区别。

在以下代码中，您将自行执行分区。换句话说，您正在从调用返回的[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)每个项目中创建一个对象：[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)`GetClients()`

```
var tasks= Client.GetClients().Select(async p => await p.Initialize()); 
```

在第二个中，调用将[`AsParallel`](http://msdn.microsoft.com/en-us/library/system.linq.parallelenumerable.asparallel.aspx)在内部使用`Task`实例来执行 的分区，`IEnumerable<T>` *并且*您将获得`Task`从 lambda 返回的初始值`async p => await p.Initialize()`：

```
var tasks = Client.GetClients().AsParallel().
    Select(async p => await p.Initialize()); 
```

最后，在这里使用[`async`](http://msdn.microsoft.com/en-us/library/hh156513.aspx)/并没有真正做任何事情[`await`](http://msdn.microsoft.com/en-us/library/hh156528.aspx)。当然，编译器*可能会*对此进行优化，但您只是在等待一个返回 a 的方法，`Task`然后返回一个通过 lambda 什么都不做的延续。也就是说，由于调用 to`Initialize`已经返回 a `Task`，因此最好保持简单并执行以下操作：

```
var tasks = Client.GetClients().Select(p => p.Initialize()); 
```

`Task`这将为您返回实例序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T17:59:47.663

为了改进上述 2 个答案，这是获得可等待的异步/线程执行的最简单方法：

var results = await Task.WhenAll(Client.GetClients().Select(async p => p.Initialize()));

这将确保它旋转单独的线程并最终获得结果。希望对某人有所帮助。我花了很长时间才弄清楚这一点，因为这不是很明显，而且 AsParallel() 函数似乎是你想要的，但不使用 async/await。

# mysql - 如何将一行数据复制到另一行

> ID：12564468
> 
> 赞同：6
> 
> 时间：2012-09-24T11:48:01.537
> 
> 标签：mysql, sql-update

> **可能重复：**
> [使用同一表中另一行的数据更新行](https://stackoverflow.com/questions/5574434/update-row-with-data-from-another-row-in-the-same-table)

我已经创建了表

```
create table myTable (id INT, myData varchar(20)); 
```

我的价值观是

```
insert into myTable VALUES 
(1, 'Value 1'),
(2, 'Value 2'),
(3, 'Value 3'); 
```

现在我将行插入为

```
insert into myTable (id) values (4); 
```

现在我想为 id 4 插入数据。id 4 的值与 id 3 相同。所以我相信我需要使用 UPDATE 语句。

我在下面尝试过，但是它不起作用。

```
 update myTable SET myData=(select myData FROM myTable WHERE id=3) WHERE id=4; 
```

请让我知道需要做什么。

## [在 sqlfiddle 演示](http://sqlfiddle.com/#!8/ee8d2/1)

## 笔记

实际上，我的 myData 类型为**MEDIUMBLOB**，但出于演示目的，我使用了 varchar。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T11:51:56.640

在 MySQL 中，您无法更新您选择的同一张表。这会导致错误

> 您不能在 FROM 子句中指定目标表“myTable”进行更新

但是你可以通过创建一个临时表来欺骗 MySQL

```
update myTable
SET myData=(select * from (select myData FROM myTable WHERE id=3) x)
WHERE id=4; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:00:40.097

你能不能`inner join`像这样使用带有别名的表：

```
update myTable left_table 
inner join myTable right_table ON right_table.id = 3
set left_table.myData = right_table.myData
where left_table.id = 4; 
```

[更新的小提琴](http://sqlfiddle.com/#!8/f2af8/1)

# maven-3 - 如何使用 exec 插件运行 maven compile 两次？

> ID：12564473
> 
> 赞同：4
> 
> 时间：2012-09-24T11:48:42.483
> 
> 标签：maven-3, maven-compiler-plugin

我有一个简单的代码生成器 G，它从我的项目中读取一个接口 A 并从中生成一个新的接口 B。因此我需要实现这一点：

1.  编译 A
2.  执行 G
3.  编译 B

第 1 步和第 3 步由 maven-compiler-plugin 处理，而第 2 步我使用 maven-exec-plugin。目前第 1 步和第 2 步运行良好，但我不知道如何再次运行编译器插件来编译新生成的 B 版本。

maven可以做到这一点，还是有另一种方法可以解决我的问题？

**解决方案：**

根据 khmarbaise 的回答，我将其添加到我的 pom.xml 中，以让第一次编译在*generate-sources*阶段运行，并在*process-sources*阶段生成代码，使生成的类在*编译*阶段可用：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <executions>
                <execution>
                    <id>pre-compile</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <phase>process-sources</phase>
                    <goals>
                        <goal>java</goal>
                    </goals>
                    <configuration>
                        <mainClass>com.example.MyCodeGenerator</mainClass>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T13:07:35.113

让我们在 generate-sources 中进行编译。只需将 maven-compiler-plugin 配置为在该特定生命周期阶段运行，并将生成的代码（编译代码）放在默认情况下的其他位置。其次，让您的执行在之后的一个阶段中运行（流程源），最后让其余的照常进行。结果是您必须将 maven-compiler-plugin 绑定到 generate-sources 阶段，将 exec-plugin 绑定到 process-sources 生命周期阶段。

# command-line - p4 sync Perforce 命令行通过仅输入一次更改列表将多棵树同步到一个更改列表

> ID：12564476
> 
> 赞同：1
> 
> 时间：2012-09-24T11:49:00.307
> 
> 标签：command-line, perforce, sync, alias

如何通过仅输入一次更改列表来同步给定更改列表中的 2 个完全独立的树，例如给出与

```
p4 sync //tree1/a/b/c/...@1234 //tree2/d/e/...@1234 
```

哪个有效，但需要输入 1234 两次？

这给出了“意外标记‘（’附近的语法错误”：

```
p4 sync (//tree1/a/b/c/... //tree2/d/e/...)@1234 
```

这会将 //tree1/a/b/c/... 同步到 head ：

```
p4 sync //tree1/a/b/c/... //tree2/d/e/...@1234 
```

主要原因是我想做一个shell别名但是1234部分是用户输入的，所以只能输入一次。我知道我可以使用 shell 脚本或函数，但由于各种原因，我必须使用别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:39:25.247

从评论中，（至少是bash）shell语法

```
p4 sync {//tree1/a/b/c/...,//tree2/d/e/...}@1234 
```

应该管用。有关详细说明，请参阅bash 参考的[大括号扩展部分](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)。

# android - 输入买家邮件 ID 后，paypal phonegap 插件出现错误

> ID：12564477
> 
> 赞同：0
> 
> 时间：2012-09-24T11:49:02.983
> 
> 标签：android, cordova, phonegap-plugins

输入买家邮件 ID 后，paypal phonegap 插件出现错误“该应用程序未获批准使用以下参数进行此类付款”此错误的含义是什么

我想我的错误在这里

```
var obj = {
           server : 'ENV_SANDBOX',
           appId : 'APP-80W284485P519543T'
       }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:25:25.247

PayPal 插件的原始开发者最近刚刚将这条消息发布到了 repo。

> 这个插件对于 PhoneGap 和 PayPal 来说已经过时了。它只能用作更新实现的参考。

所以看起来需要做更多的工作来更新这个插件到今天的 PayPal API。

# c++ - extern "C"，它有什么用？

> ID：12564481
> 
> 赞同：0
> 
> 时间：2012-09-24T11:49:17.717
> 
> 标签：c++, c, c-preprocessor

> **可能重复：**
> [结合 C++ 和 C - #ifdef __cplusplus 如何工作？](https://stackoverflow.com/questions/3789340/combining-c-and-c-how-does-ifdef-cplusplus-work)

我在许多图书馆都遇到过以下几行；它们有什么用？__何时/何`cplusplus`地定义？

```
#ifdef __cplusplus
    extern "C" {
#endif

//...

#ifdef __cplusplus
    }
#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:51:20.617

`__cplusplus`是为 C++ 代码定义的。有时您必须混合使用 C 代码和 C++ 代码。这可能有很多原因，例如，您有一个很久以前用 C 语言编写的驱动程序，您想在全新的 C++0x 项目中使用它。

每个函数类型和名称都有一个语言链接。C 和 C++ 函数之间存在差异，因为 C 没有函数名重载，所以函数名可以作为 C 中的唯一标识符，但不能在 C++ 中。这称为[函数修饰](http://en.wikipedia.org/wiki/Name_mangling)。

由于您不需要在 C 中修改名称，因此使用`extern "C"`将使编译器省略添加参数信息以进行链接。

C++ 标准在 7.5 第 3 段中明确指出：

> 每个实现都应提供与用 C 编程语言“C”编写的函数的链接，以及与 C++ 函数“C++”的链接。

```
complex sqrt(complex); //C++ linkage by default
extern "C" {
    double sqrt(double);//C linkage
} 
```

# algorithm - 在 N 维矩阵中找到大于 x 的值，其中 x 是索引的总和

> ID：12564483
> 
> 赞同：1
> 
> 时间：2012-09-24T11:49:25.100
> 
> 标签：algorithm, matrix, permutation, combinations

我们得到一个阶数为 [m][m][m]....n 次的 N 维矩阵，其中位置值包含其索引的值总和。例如，在 6x6 矩阵`A`中，位置处的值`A[3][4]`将为 7。

**我们必须找出大于 x 的元素的总数。**对于二维矩阵，我们有以下方法：

如果我们知道一个索引，`[i][j] {i+j = x}`那么我们只需使用约束来`[i++][j--]`创建对角线，并且总是在 to 的范围内例如 在二维矩阵 A[6][6] 中，值 A[3][4] (x = 7)，对角线可以通过以下方式创建：`[i--][j++]``i``j``0``m.`

```
A[1][6] -> A[2][5] -> A[3][4] -> A[4][3] -> A[5][2] -> A[6][2] 
```

**在这里，我们将我们的问题转换为另一个问题，即计算对角线以下的元素，包括对角线。** 我们可以很容易地计算`O(m)`复杂性，而不是花费矩阵`O(m^2)`的`2`顺序。但是，如果我们考虑 N 维矩阵，我们将如何做，因为在 N 维矩阵中，如果我们知道该位置的索引，其中索引的总和就是`x`次数`A[i1][i2][i3][i4]....[in]`。那么可能有多个满足该条件的对角线，比如说通过这样做`i1--`我们可以增加任何一个`{i2, i3, i4....in}`

因此，上述用于二维矩阵的方法在这里变得无用......因为只有两个变量 i1 和 i2 存在。请帮我找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:53:37.980

对于 2D：对角线以下元素的计数是[三角形数](http://en.wikipedia.org/wiki/Triangular_number)。

对于 3D：对角线平面以下元素的计数是[四面体数](http://en.wikipedia.org/wiki/Tetrahedral_number)

请注意，第 K 个四面体数是前 K 个三角形数的总和。

对于nD：*n-单纯形*（我不知道确切的英文术语）数字（是第一个（n-1）-单纯形数字的总和）。

Kth n-simplexial 的值为

```
 S(k, n) = k * (k+1) * (k+2).. (k + n - 1) / n! = BinomialCoefficient(k+n-1, n) 
```

**编辑：**此方法“按原样”适用于主对角线（超​​）平面下方的有限 X 值。

**生成函数方法**：让我们有多项式

A(s)=1+s+s^2+s^3+..+s^m

那么它的 n 次方
B(s) = A ^n (s) 有一个重要的性质：s 的 k 次方系数是从 n 个和数组成 k 的方法数。所以第n个到第k个系数的总和给了我们第k个对角线以下元素的计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:35:13.967

对于二维矩阵，您将问题转换为另一个问题，即`count the elements below the diagonal including the diagonal`.

尝试将其可视化为 3-d 矩阵。在 3 维矩阵的情况下，问题将简化为另一个问题，即`count the elements below the diagonal plane including the diagonal`

# android - 如何在android中创建推送通知？

> ID：12564489
> 
> 赞同：0
> 
> 时间：2012-09-24T11:49:46.170
> 
> 标签：android, push-notification

我正在开发可以随时从服务器接收数据的 android 应用程序。我在 google 中搜索以获取一些信息。

1）安卓云到设备消息（C2DM）。2) 持久的 TCP/IP 连接。

如何实现 C2DM 功能和其他如何注册 C2DM？请解释详细信息并发给我示例应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:54:07.213

C2DM 已弃用，您可以使用 GCM 满足您的要求

Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到他们在 Android 设备上的 Android 应用程序。这可能是一条轻量级消息，告诉 Android 应用程序有新数据要从服务器获取（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此应用程序如即时通讯可以直接消费消息）。GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面

本文档描述了如何使用 GCM 提供的帮助程序库（客户端和服务器）编写 Android 应用程序和服务器端逻辑。

检查这些链接，

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

[http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html)

[http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/](http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/)

对于客户端应用程序，您可以在此处找到代码

[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:54:21.943

c2dm 已弃用。

[https://developers.google.com/android/c2dm](https://developers.google.com/android/c2dm)

也许你最好从 GCM 开始

此致

# java - Birt 报告：如何根据另一个报告参数的选择加载报告参数集

> ID：12564491
> 
> 赞同：1
> 
> 时间：2012-09-24T11:49:54.610
> 
> 标签：java, reporting, birt

我是 Birt 报告的新手。我有一个疑问。我需要两个报告参数作为列表框。一个是“国家：”，第二个是“州”。根据所选国家，州列表框应填写属于所选国家的州。我该怎么做？。我需要创建多少个数据集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:01:33.580

这个问题可以使用级联参数组来解决。您将需要 2 个数据集来创建此报告。

第一个数据集：

从 table_country_state 中选择国家

第二个数据集：

SELECT State FROM table_country_state WHERE country = ?

这 '？' 是对您将在级联参数组中拥有的参数的引用。（你会有一个错误，因为你还没有设置它，所以暂时忽略）。

现在您可以创建您的级联参数组。根据需要命名并在多数据集选项中“添加”两个参数。第一个参数是国家（第一个数据集和值 = 国家）。第二个是国家（与国家相同的逻辑）。添加它们后，您可以编辑它们的外观......在您的情况下，列表框。

毕竟，您可以返回到第二个 DataSet 并添加一个参数（在参数部分中）。您会喜欢带有您的国家/地区参数的参数。

提示：如果您不需要多项选择，就像看起来一样，请使用组合框类型。

你可以在这里查看一个例子：http: [//www.eclipse.org/birt/phoenix/examples/reports/birt2.1/cascade/index.php](http://www.eclipse.org/birt/phoenix/examples/reports/birt2.1/cascade/index.php)

# asp.net-mvc - Autofac 注入到使用 RegisterControllers() 加载的控制器

> ID：12564493
> 
> 赞同：3
> 
> 时间：2012-09-24T11:50:05.063
> 
> 标签：asp.net-mvc, dependency-injection, asp.net-mvc-4, autofac

有没有办法在通过`builder.RegisterControllers()`外部程序集加载的控制器中启用注入？当我在我的插件文件夹中复制完全相同的程序集时，我得到一个无参数构造函数未找到错误。

```
// This doesnt work, parameterless constructor not found!
var assemblies = new DirectoryInfo(
                      HttpContext.Current.Server.MapPath("~/App_Plugins/"))
                .GetFiles("*.dll")
                .Select(r => Assembly.LoadFrom(r.FullName)).ToArray();  

// This works, injection happens correctly on constructor
var assemblies = new[] {typeof (MvcApplication).Assembly}; 
```

第二个将起作用，而第一个将产生错误。我也尝试过手动注册“外部”控制器，但仍然是同样的问题：

```
builder.RegisterAssemblyTypes(assemblies)
      .Where(r => r.BaseType == typeof(Controller))
      .InstancePerHttpRequest(); 
```

我正在使用 mvc 4 的 DefaultControllerFactory

堆栈跟踪是这样的：

`No parameterless constructor defined for this object.`

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +113
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +232
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +83
   System.Activator.CreateInstance(Type type) +6
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +55

[InvalidOperationException: An error occurred when trying to create a controller of type 'TestProject.Controllers.HomeController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +178
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +77
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +66
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +191
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:43:28.763

我没有看到堆栈跟踪中涉及 Autofac。如果 Autofac 不满意，异常将类似于：

```
[DependencyResolutionException: None of the constructors found with 'Public binding flags' on type 'SomeApp.WebApplication.Areas.Shared.Controllers.AccountController' can be invoked with the available services and parameters:
Cannot resolve parameter 'SomeApp.WebApplication.Areas.Shared.Controllers.Slappy slappy' of constructor 'Void .ctor(SomeApp.Web.LoginService, SomeApp.Web.AccountMembership.IMembershipService, SomeApp.Infrastructure.Logging.ILog, SomeApp.WebApplication.Areas.Shared.Controllers.Slappy)'.]
   Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters) +377
   Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters) +48
   Autofac.Core.Resolving.InstanceLookup.Execute() +48
   Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) +167
   Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters) +64
   Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +163
   Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance) +70
   Autofac.ResolutionExtensions.ResolveOptionalService(IComponentContext context, Service service, IEnumerable`1 parameters) +53
   Autofac.Integration.Mvc.AutofacDependencyResolver.GetService(Type serviceType) +59
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +41

[InvalidOperationException: An error occurred when trying to create a controller of type 'SomeApp.WebApplication.Areas.Shared.Controllers.AccountController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +179
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +196
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +49
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +88
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

验证您正在设置`DependencyResolver`.

```
DependencyResolver.SetResolver(new AutofacDependencyResolver(ApplicationContainer)); 
```

# menu - 显示 Drupal 7 自定义菜单

> ID：12564495
> 
> 赞同：0
> 
> 时间：2012-09-24T11:50:17.437
> 
> 标签：menu, drupal-7

我创建了一个名为“footer-link”的自定义菜单，并在其下创建了链接。我如何显示它？谁能帮帮我谢谢！

我试过的一些片段

`menu_navigation_links('footer-link'), 'attributes' => array('class'=> array('links', 'site-menu')) ));?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:20:38.290

转到管理面板上的“结构”。然后单击“块”。您应该会看到可用块的列表。您还将看到自定义菜单的块。

在那里，您可以选择要显示链接的区域。

我希望这有帮助。这是你问的一个非常简单的问题。我很惊讶还没有人回答。

# jquery - 我怎样才能捕捉到仅当 a 的值发生时才发生的事件通过用户输入改变？对于普通的选择列表，我有以下代码： $('.update-title') .change(function () { var title = $('option:selected', this).prop('title'); $( "#modal_Title").val(title); }); 这似乎在填充选择时被触发。只有当用户进入并手动重新选择不同的值时，我才能做到这一点？您的代码完全正确，除了语法错误。删除语法错误工作

> ID：12564500
> 
> 赞同：2
> 
> 时间：2012-09-24T11:50:20.663
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:56:08.790

您可以使用布尔值来确定事件是否是第一次触发。例如，您的代码可能是这样的......

```
var first_time_select = true;
$('.update-title')
    .change(function () {
        if (first_time_select) {
            first_time_select = false;
        } else {
            var title = $('option:selected', this).prop('title');
            $("#modal_Title").val(title);
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:04:54.760

我不确定为什么当你用数据填充它时会触发你的 select 的 change 事件（我注意到 Knockout 发生了类似的事情）。但是，如果你想避免它被触发，为什么不在元素上使用`.off()`( [link](http://api.jquery.com/off/) ) 来更改它，然后`.on(callback)`再次激活它呢？（我建议使用命名函数而不是内联函数来执行此操作。）

这是一个人为的例子：http: [//jsfiddle.net/b2x2T/11/](http://jsfiddle.net/b2x2T/11/)

请注意，在该示例中，我实际上不需要使用开/关，因为它不会触发`change`事件，但我认为您明白了。

编辑：出于好奇，您何时以及如何填充选择列表？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:54:54.220

您的代码完全正确，除了语法错误。删除语法错误

工作**[演示](http://jsfiddle.net/CXkt4/1/)**

```
$('.update-title')
        .change(function () {
            var title = $('option:selected', this).prop('title');
             $("#modal_Title").val(title);//you are missing quotes
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:58:22.160

不是这样，但是当您以编程方式更改选择框时，您始终可以将数据分配给选择框。然后你会检查它是否设置为更改：

```
$('#mybutton').on('click', function() {
    $('.update-title').data('dont-change', 1);
    // repopulate the dropdown here...
});

$('.update-title')
    .change(function () {
        if (!$(this).data('dont-change')) {
            var title = $('option:selected', this).prop('title');
             $("#modal_Title").val(title);//you are missing quotes
        } else {
            $(this).removeData('dont-change');
        }
    }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-24T12:02:11.520

该`change`事件仅在元素获得焦点、值发生变化、元素失去焦点时由浏览器触发。最初填充元素时不会发生这种情况，而且我个人从未遇到过在最初填充元素时`change`触发的事件`<select>`。

似乎您在某处有一些代码以编程方式触发该元素上的更改事件处理程序，因为您所描述的不是标准行为。

# php - URL 内的重复模式

> ID：12564505
> 
> 赞同：1
> 
> 时间：2012-09-24T11:50:38.713
> 
> 标签：php, regex, string, url, duplicate-data

有人可以帮助我们使用正则表达式来检测 URL 字符串中的重复模式吗？目标显然是检测~~格式错误~~的奇怪 URL。

**例如，以下 URL 是可以的：**

```
http://www.somewhere.com/help/content/21/23/en/
http://www.somewhere.com/help/content/21/24/en/
http://www.somewhere.com/help/content/21/64/en/
http://www.somewhere.com/help/content/21/65/en/
http://www.somewhere.com/help/content/21/67/en/ 
```

**虽然这个这个是不正确的，应该标记：**

```
http://www.somewhere.com/help/content/21/content/1/54/en/
http://www.somewhere.com/help/content/21/content/1/62/en/
http://www.somewhere.com/help/content/21/content/8/52/en/ 
```

由于**内容**重复了两次。到目前为止，我们一直在使用 parse_url 和 explode 来解决这个问题，但它看起来效率很低！

同样，我知道可能有许多 URL 在路径中重复数字或其他值，因此任何解决此问题的建议都将受到欢迎。

非常感谢！

为了更好地理解该问题，您可以访问以下链接并单击“Administrador MySQL”：

[http://www.elserver.com/ayuda/content/21/65/es/](http://www.elserver.com/ayuda/content/21/65/es/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:54:10.883

假设您有一个`testdata.txt`包含 URL 列表的文件 ( )，每行一个，以下测试脚本将提取那些具有（至少）一个重复路径段的 URL：

```
<?php // test.php Rev:20120924_0800
$re = '%
    ^                  # Anchor to start of line.
    (?:[^:/?#\s]+:)?   # URI scheme (optional).
    (?://[^/?#\s]*)?   # URI Authority (optional).
    (?:/[^/?#\s]*)*?   # URI path segments (before repeats).
    /([^/?#\s]+)       # $1: Repeated URI path segment.
    (?:/[^/?#\s]*)*?   # URI path segments (between repeats)
    /\1                # $1: Repeated URI path segment.
    (?:/[^/?#\s]*)*    # URI path segments (after repeats).
    (?:\?[^#\s]*)?     # URI query (optional).
    (?:\#\S*)?         # URI fragment (optional).
    $                  # Anchor to end of line.
    %mx';
$text = file_get_contents('testdata.txt');
if (preg_match_all($re, $text, $matches)) print_r($matches[0]);
else echo("no matches!");
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:33:13.123

只是一些提示可以让您朝着正确的方向前进：

*   URI 没有*格式错误*。它们在语法上是正确的，因此格式正确。
*   要解决您的问题，请不要首先生成这些 URI。
*   如果您创建一个爬虫，您需要遵守标准，包括如何将相对 URI 解析为文档基础 URI：[https ://www.rfc-editor.org/rfc/rfc3986#section-4.2](https://www.rfc-editor.org/rfc/rfc3986#section-4.2)

但是除非您不发布任何代码，否则我们无话可说。可能重复的问题是：

*   [使用简单 HTML DOM 将相对 URL 转换为绝对 URL？](https://stackoverflow.com/questions/3329499/convert-a-relative-url-to-an-absolute-url-with-simple-html-dom)
*   [PHP：如何解析相对网址](https://stackoverflow.com/questions/1243418/php-how-to-resolve-a-relative-url)

* * *

示例数据集显示数据存在问题：

```
Base URI: http://www.elserver.com/ayuda/content/21/65/es/
HREF    : content/1/62/es/%BFc%F3mo-ingreso-al-phpmyadmin.html
          (ISO/IEC 8859-1    %BF = ¿    %F3 = ó) 
```

这被正确解析为以下绝对 URI：

```
http://www.elserver.com/ayuda/content/21/65/es/content/1/62/es/%BFc%F3mo-ingreso-al-phpmyadmin.html 
```

这会产生重复的内容。显然这是在网站上做的一个错误，可以通过测试轻松验证：

```
http://www.elserver.com/ayuda/content/1/62/es/%BFc%F3mo-ingreso-al-phpmyadmin.html 
```

因为您无法仅通过查看两个 URI 来确定它们是相同的，因此您需要制定一个（或多个）策略来处理问题。

例如，您可以...

*   ...然后自己比较重复的内容，例如创建内容的 MD5 和 SHA-1 校验和并保留一个列表。如果两个校验和相同，则内容很可能也相同。
*   ... 决定如果 URI 变得太长，它们就会被破坏。
*   ... 建立机器学习来了解哪些 URL 模式会创建重复内容。
*   ...如果在基本 URI 和为检测此类问题而给出的相对 URI 之间存在一些重叠，则创建“足以尝试”的 URI。测试这些 URI 是否有效。

显然，不同的策略需要您做更多或更少的工作，并且还会对您的爬虫所拥有的数据结构和数据库产生影响。

正如你所看到的，这不是微不足道的。一些网站甚至提供无穷无尽的 URL tarpit 来让爬虫放弃。因此，无论如何，您应该已经在这里拥有更强大的东西，以使您的爬虫更加强大。

# jakarta-ee - 验证正在发送的 X.509 证书

> ID：12564507
> 
> 赞同：0
> 
> 时间：2012-09-24T11:50:41.360
> 
> 标签：jakarta-ee, soap, x509certificate, soapui

我正在尝试使用 WebAS 上的客户端证书设置 SSL 相互身份验证。使用我用 JavaEE 编写的 SOAP Web 服务。我正在尝试使用 SOAP UI 对此进行测试 - 但是我在尝试找出 SOAP UI 是否发送所需的所有内容时遇到了困难，例如，在将我的 PFX 配置为项目设置中的密钥库之后（包括私钥在那里指定），我仍然在 Charles Proxy 中看到纯文本请求。我已经尝试过 tcpmon 但它没有产生任何更好的结果。

有什么方法可以验证请求是否在客户端正确发送？因为在服务器端我只看到“身份验证失败”。我在 Oracle 的文档中看到，有一个名为 USER_CERT 的标头字段 - 但这是标准吗？我在请求中的任何地方都没有看到它。我需要检查客户端是否正确，直到我可以在服务器端进行一些试验和错误。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:17:06.677

您应该能够查看是否正在使用`javax.net.debug`系统属性发送客户端证书，如[“*调试 SSL/TLS 连接”*](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html)中所述。

充其量，Fiddler 本身可以发送其客户端证书，但这与让您的应用程序将其直接发送到服务器并不完全相同。如果 Fiddler 也向您的应用程序请求客户端证书（我不确定它是否可以这样做），它可能能够充分模仿该行为，但这实际上与您的目标服务器看到的实际客户端证书无关（尽管您在实践中可能会使用相同的方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:10:04.333

显然，由于某种原因，我的 SOAP UI 无法发送客户端证书。所以我在 SOAP UI 和我的服务器之间设置了 Fiddler。

在 Fiddler 中弹出一条消息，表明服务器正在请求证书，当我将正确的证书放在指定的路径中时，登录就可以了！

我已经阅读了大量的soap ui文档和讨论线程，由于错误（4.5.0无法读取密钥库），不得不用另一个版本替换soap ui两次，4.5.1显示了一个类转换异常，我回到 4.0.1 - 只是让它在五分钟内与 Fiddler 一起工作:)

# c# - 如何启用对整个 DataGridViewRow 的编辑？

> ID：12564510
> 
> 赞同：0
> 
> 时间：2012-09-24T11:51:01.080
> 
> 标签：c#, .net, datagridview

我正在尝试在按钮事件`DataGridViewRow`之后将整体置于编辑模式。`click`当我需要以编程方式编辑单元格时，我使用下面的代码，但`BeginEdit`不适用于行，它只允许编辑一个单元格。

```
DataGridView.CurrentCell.ReadOnly = false;
DataGridView.BeginEdit(true); 
```

我怎样才能使整个`DataGridViewRow`可编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:54:52.953

DataGridView 应该有一种标准的工作方式......尝试让它以不同的方式工作，你会遇到很多挫折和大量的代码。

我可以在这里想到几件事：

**1）找到一个第三方网格控件，做你需要的。**

**2) 编写您自己的网格控件来执行此操作。**

**3) 尝试让 DataGridView 做它不打算做的事情。**

我假设您的消息仅限于选项 3？如果是这样，那么你可以试试这个：

*   保留一个标志，表明您处于编辑模式（我*讨厌*基于标志的编程 - 但有时没有其他简单的选择......）。

*   当用户单击按钮时，设置标志并在单元格上执行 BeginEdit。

*   在 EndEdit 上，使用 BeginEdit 开始编辑下一个单元格（假设标志仍然设置）。

*   当用户按下 Enter 键时，退出当前编辑单元格的编辑并关闭标志（这应该防止任何其他单元格被编辑）。

# javascript - 电子邮件验证 Javascript RegExp

> ID：12564513
> 
> 赞同：0
> 
> 时间：2012-09-24T11:51:10.803
> 
> 标签：javascript, regex, email-validation

使用此 RegExp，我可以轻松检查电子邮件是否有效：

```
RegExp(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/); 
```

但是，对于此类地址，这只会返回 true：

```
example@example.com 
```

我也想接受：

```
*@example.com 
```

我需要对我的 RegExp 应用哪些更改？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:53:09.477

要从字面上回答您的问题，您可以“增强”您的正则表达式：

```
RegExp(/^([\w.*-]+@([\w-]+\.)+[\w-]{2,4})?$/); 
```

但对于电子邮件验证来说，这是一个糟糕的正则表达式。正则表达式是*错误的工具*。你为什么[坚持这样做](https://stackoverflow.com/questions/12563547/regular-expression-for-email-address-in-arabic)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:00:56.870

检查电子邮件地址并不是那么简单，参见。[RFC 822，第 6.1 节](https://www.rfc-editor.org/rfc/rfc822#section-6.1)。

可以在[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)找到一个很好的正则表达式列表，描述 RFC 一致性和实用性之间的权衡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:03:33.867

几件事：接受`*@foo.bar`：

```
var expression = /^([\w-\.*]+@([\w-]+\.)+[\w-]{2,4})?$/;//no need to pass it to the RegExp constructor 
```

但是这个表达式确实 accept `-@-.--`，但话又说回来，正则表达式和电子邮件并不是很好的朋友。但是根据您的表达，这是一个不太可靠的版本：

```
var expression = /^[\w-\.\d*]+@[\w\d]+(\.\w{2,4})$/; 
```

不过，有一个表达式可以验证网络上某处的所有有效类型的电子邮件地址。调查一下，看看为什么正则表达式验证几乎总是会排除有效输入或过于宽容

# java - 使用 SmartGWT 包装预制元素？

> ID：12564518
> 
> 赞同：0
> 
> 时间：2012-09-24T11:51:27.607
> 
> 标签：java, html, gwt, smartgwt

我可以通过 GWT 小部件包装 HTML 按钮、表单和其他已经存在的元素，然后在 GWT 中使用它们：

```
FormPanel form = FormPanel.wrap(Document.getElementById(LOGINFORM_ID));
Button submit = Button.wrap(DOM.getElementById(SUBMIT_BUTTON)); 
```

SmartGWT 中是否提供类似的功能？我可以将普通的旧 HTML“转换”成`IButton`甚至更好地转换成`SubmitItem`?

SmartGWT 中的代码方面：

```
DynamicForm form = ???
IButton submit = ??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:40:16.713

我认为没有任何直接的方法可以做到这一点。Personnaly 我会尝试 For a`SubmitItem`因为它是一个子类，用你想充当的 Html设置this`CanvasItem`的 Content 。`Canvas``CanvasItem``SubmitItem`

# jquery-ui - jQuery datepicker 不会在月份之间滚动，并且在 IE8 中关闭时没有任何反应

> ID：12564526
> 
> 赞同：0
> 
> 时间：2012-09-24T11:52:02.787
> 
> 标签：jquery-ui, internet-explorer-8, jquery-ui-datepicker

我正在尝试使[此处](http://jqueryui.com/demos/datepicker/)的示例在我的页面上工作。我在页面正文中包含以下内容：

```
<script>
    $(function () {
        $("#datepicker").datepicker();
    });
</script>

<div id="myDivId">
    <p>Date: <input type="text" id="datepicker"></p>
</div> 
```

这与样本相同。

在示例中，当我单击编辑框时，会出现日期选择器。我可以在几个月之间切换，当我单击特定日期时，该日期将发布到编辑框中。

现在在我的页面上，当我点击编辑框时，日期选择器确实出现了，但是“下一个”和“上一个”按钮没有效果，当我点击一个特定的日期时，日期选择器没有关闭并且日期没有发布但是页面滚动到顶部。

该问题仅在 IE 中重现（我仅尝试过 IE 8） - 适用于 Firefox 和 Chrome。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:51:59.507

原来这是因为默认情况下在 Windows Server 2008 R2 上启用了一些“额外安全”配置。

# google-maps-api-3 - 在谷歌地图中围绕折线绘制多边形

> ID：12564527
> 
> 赞同：2
> 
> 时间：2012-09-24T11:52:09.413
> 
> 标签：google-maps-api-3, polygon

我正在尝试围绕现有折线创建一个多边形。我想绘制与现有多段线平行的多段线，然后将它们连接起来以创建一个多边形。我试图做数学来绘制平行线，但没有成功。我找到了我用来在两边创建折线的链接。

[http://wtp2.appspot.com/ParallelLines.htm](http://wtp2.appspot.com/ParallelLines.htm)

这似乎正是我想要的。我开始从 v2 到 v3 的转换。我试图保持最少的代码并删除其余的。我还删除了原始代码中存在的缩放级别更改的侦听器。

当我使用小的固定折线时，它工作得很好。然而，当我增加折线的大小时，平行折线开始变得混乱。

我拥有的代码是：

```
 var points = null;
    var map;
    var line1;
    var line2;
    var prj = null;
    var idlelistener;
    var gapPx = 2;
    var weight = 4; 

    function BDCCParallelLines(maps, point, bounds) {   

        map = maps;
        points = point;
        //map.fitBounds(bounds);
        MyOverlay.prototype = new google.maps.OverlayView();
    MyOverlay.prototype.onAdd = function() { }
    MyOverlay.prototype.onRemove = function() { }
    MyOverlay.prototype.draw = function() { }
    function MyOverlay(map) { this.setMap(map); }

    var overlay = new MyOverlay(map);
    // Wait for idle map
    idlelistener = google.maps.event.addListener(map, 'idle', function() {
       // Get projection
       prj = overlay.getProjection();
       recalc();    
    })
    }

    function recalc() {
        google.maps.event.removeListener(idlelistener);
       var zoom = this.map.getZoom();

       //left and right swapped throughout!

       var pts1 = new google.maps.MVCArray();//left side of center 
       var pts2 = new google.maps.MVCArray();//right side of center

       //shift the pts array away from the centre-line by half the gap + half the line width
       var o = (this.gapPx + this.weight)/2;

       var p2l,p2r;

       for (var i=1; i<this.points.length; i+=2){

          var p1lm1;
          var p1rm1;
          var p2lm1;
          var p2rm1;
          var thetam1;

          var p1 = this.prj.fromLatLngToContainerPixel(this.points.getAt(i-1),zoom) //**fromLatLngToPixel
          var p2 = this.prj.fromLatLngToContainerPixel(this.points.getAt(i),zoom) //**fromLatLngToPixel
          var theta = Math.atan2(p1.x-p2.x,p1.y-p2.y) + (Math.PI/2);
          var dl = Math.sqrt(((p1.x-p2.x)*(p1.x-p2.x))+((p1.y-p2.y)*(p1.y-p2.y)));  

          if(theta > Math.PI)
              theta -= Math.PI*2; 
          var dx = Math.round(o * Math.sin(theta));
          var dy = Math.round(o * Math.cos(theta));

          var p1l = new google.maps.Point(p1.x+dx,p1.y+dy); //GPoint
          var p1r = new google.maps.Point(p1.x-dx,p1.y-dy); 
          p2l = new google.maps.Point(p2.x+dx,p2.y+dy);
          p2r = new google.maps.Point(p2.x-dx,p2.y-dy);

          if(i==1){   //first point
            pts1.push(this.prj.fromContainerPixelToLatLng(p1l),zoom); //**fromPixelToLatLng
            pts2.push(this.prj.fromContainerPixelToLatLng(p1r),zoom); //**fromPixelToLatLng
          }
          else{ // mid points

            if(theta == thetam1){
                // adjacent segments in a straight line 
                pts1.push(this.prj.fromContainerPixelToLatLng(p1l),zoom);
                pts2.push(this.prj.fromContainerPixelToLatLng(p1r),zoom);
            }
            else{
                var pli = this.intersect(p1lm1,p2lm1,p1l,p2l);
                var pri = this.intersect(p1rm1,p2rm1,p1r,p2r);

                var dlxi = (pli.x-p1.x);
                var dlyi = (pli.y-p1.y);
                var drxi = (pri.x-p1.x);
                var dryi = (pri.y-p1.y);
            var di = Math.sqrt((drxi*drxi)+(dryi*dryi));  
                var s = o / di;

                var dTheta = theta - thetam1;
                if(dTheta < (Math.PI*2))
                    dTheta += Math.PI*2;
                if(dTheta > (Math.PI*2))
                    dTheta -= Math.PI*2;

                if(dTheta < Math.PI){
                   //intersect point on outside bend
                   pts1.push(this.prj.fromContainerPixelToLatLng(p2lm1),zoom);
                   pts1.push(this.prj.fromContainerPixelToLatLng(new google.maps.Point(p1.x+(s*dlxi),p1.y+(s*dlyi))),zoom);
                   pts1.push(this.prj.fromContainerPixelToLatLng(p1l));
                }
            else if (di < dl){
                   pts1.push(this.prj.fromContainerPixelToLatLng(pli),zoom);
            }
                else{
                   pts1.push(this.prj.fromContainerPixelToLatLng(p2lm1),zoom);
                   pts1.push(this.prj.fromContainerPixelToLatLng(p1l),zoom);
            }

                dxi = (pri.x-p1.x)*(pri.x-p1.x);
                dyi = (pri.y-p1.y)*(pri.y-p1.y);
                if(dTheta > Math.PI){
                   //intersect point on outside bend
                   pts2.push(this.prj.fromContainerPixelToLatLng(p2rm1),zoom);
                   pts2.push(this.prj.fromContainerPixelToLatLng(new google.maps.Point(p1.x+(s*drxi),p1.y+(s*dryi))),zoom);
                   pts2.push(this.prj.fromContainerPixelToLatLng(p1r),zoom);
                }
            else if(di<dl)
                   pts2.push(this.prj.fromContainerPixelToLatLng(pri),zoom);
                else{
                   pts2.push(this.prj.fromContainerPixelToLatLng(p2rm1),zoom);
                   pts2.push(this.prj.fromContainerPixelToLatLng(p1r),zoom);
            }
            }
          }

          p1lm1 = p1l;
          p1rm1 = p1r;
          p2lm1 = p2l;
          p2rm1 = p2r;
          thetam1 = theta;
       }

       pts1.push(this.prj.fromContainerPixelToLatLng(p2l),zoom);//final point
       pts2.push(this.prj.fromContainerPixelToLatLng(p2r),zoom);

       this.line1 = new google.maps.Polyline({
              map:           map,
              path:          pts1,
              strokeColor:   "#0000FF",
              strokeWeight:  4,
              strokeOpacity: 1.0
        });

       this.line2 = new google.maps.Polyline({
            map:           map,
                      path:          pts2,
                      strokeColor:   "#0000FF",
                      strokeWeight:  4,
                      strokeOpacity: 1.0
        });*/

       createPolygon(pts1,pts2);
    }

    function intersect(p0,p1,p2,p3)
    {
    // this function computes the intersection of the sent lines p0-p1 and p2-p3
    // and returns the intersection point, 

    var a1,b1,c1, // constants of linear equations
        a2,b2,c2,
        det_inv,  // the inverse of the determinant of the coefficient matrix
        m1,m2;    // the slopes of each line

    var x0 = p0.x;
    var y0 = p0.y;
    var x1 = p1.x;
    var y1 = p1.y;
    var x2 = p2.x;
    var y2 = p2.y;
    var x3 = p3.x;
    var y3 = p3.y;

    // compute slopes, note the cludge for infinity, however, this will
    // be close enough

    if ((x1-x0)!=0)
       m1 = (y1-y0)/(x1-x0);
    else
       m1 = 1e+10;   // close enough to infinity

    if ((x3-x2)!=0)
       m2 = (y3-y2)/(x3-x2);
    else
       m2 = 1e+10;   // close enough to infinity

    // compute constants

    a1 = m1;
    a2 = m2;

    b1 = -1;
    b2 = -1;

    c1 = (y0-m1*x0);
    c2 = (y2-m2*x2);

    // compute the inverse of the determinate

    det_inv = 1/(a1*b2 - a2*b1);

    // use Kramers rule to compute xi and yi

    var xi=((b1*c2 - b2*c1)*det_inv);
    var yi=((a2*c1 - a1*c2)*det_inv);

    return new google.maps.Point(Math.round(xi),Math.round(yi)); // ** CHANGED HERE

    }

    function createPolygon(side1,side2){
        var a = new Array();
        for(var i = 0; i < side1.length;i++){
            a.push(side1.getAt(i))
        }
        for(var i = side1.length-1; i >=0;i--){
            a.push(side2.getAt(i));
        }
        drawPolylinePolygon(a)  
    }

    function drawPolylinePolygon(a){
        a.push(a[0]);
        var color = getColor(false);
          var polygon_options = {
                paths: a,
                strokeColor: color,
                strokeOpacity: 0.7,
                strokeWeight: 2,
                fillColor: color,
                fillOpacity: 0.2
          };
          current_polygon = new google.maps.Polygon(polygon_options);
          current_polygon.setMap(map);
    } 
```

createPolygon() 函数用于合并两条折线以创建多边形。

这是html页面：

```
 <?xml version="1.0" encoding="utf-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">

    <head>
    <title></title>

    <script src="http://maps.google.com/maps/api/js?sensor=true&libraries=drawing,geometry" type="text/javascript"></script>
    <script src="BDCCParallelLines.js" type="text/javascript"></script>

    <script type="text/javascript">
        //<![CDATA[

    var map;

    function linesMap(){

            var latlng1 = new google.maps.LatLng(51.42, -0.95);
            var mapOptions = {zoom: 22, center:latlng1, mapTypeId: google.maps.MapTypeId.ROADMAP, mapTypeControl: false};
            var map = new google.maps.Map(document.getElementById('mapLines'),mapOptions);

            var pts = new Array();
            var latlngbounds = new google.maps.LatLngBounds();
            pts.push (new google.maps.LatLng(51.42, -0.97));
            latlngbounds.extend(new google.maps.LatLng(51.42, -0.97));
            pts.push (new google.maps.LatLng(51.43, -0.96));
            latlngbounds.extend(new google.maps.LatLng(51.43, -0.96));
            pts.push (new google.maps.LatLng(51.425, -0.955));
            latlngbounds.extend(new google.maps.LatLng(51.425, -0.955));
            pts.push (new google.maps.LatLng(51.42, -0.95));//straight at zoom = 13
            latlngbounds.extend(new google.maps.LatLng(51.42, -0.95));
            pts.push (new google.maps.LatLng(51.43, -0.94));
            latlngbounds.extend(new google.maps.LatLng(51.43, -0.94));
            pts.push (new google.maps.LatLng(51.43, -0.9375));//horz & straight
            latlngbounds.extend(new google.maps.LatLng(51.43, -0.9375));
            pts.push (new google.maps.LatLng(51.43, -0.935));
            latlngbounds.extend(new google.maps.LatLng(51.43, -0.935));
            pts.push (new google.maps.LatLng(51.425, -0.935));
            latlngbounds.extend(new google.maps.LatLng(51.425, -0.935));
            pts.push (new google.maps.LatLng(51.42, -0.935));//vert & straight
            latlngbounds.extend(new google.maps.LatLng(51.42, -0.935));

            var poly = new BDCCParallelLines(map,pts,latlngbounds);

            var poly2 = new google.maps.Polyline({
                      map:           map,
                      path:          pts,
                      strokeColor:   "#FF0000",
                      strokeWeight:  2,
                      strokeOpacity: 1.0
                });
    }

        //]]>

    </script>
    </head>

    <body     onload="linesMap();"
    style="font-weight: bold; font-size: large; font-family: Arial; background-color: #cccc99">
                    <div id="mapLines" style="width: 800px; height: 600px">
                    </div>
    </body>
    </html> 
```

搜索后，我发现了这篇文章，Ben 似乎也有同样的问题。链接上的图像显示了我遇到的完全相同的问题。 [谷歌地图 api 平行路径线](https://stackoverflow.com/questions/8140988/google-maps-api-parallel-path-lines/8215994#8215994)

我想知道是否有任何方法可以改进平行折线的现有代码，或者是否有任何其他方法我正在寻找的最终结果是折线周围的多边形。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T14:59:27.940

您应该使用存在于任何空间 API 或数据库中的缓冲区函数，例如 [sharpmap](http://sharpmap.codeplex.com/discussions/40494)。

# objective-c - xcode 的布尔函数

> ID：12564529
> 
> 赞同：1
> 
> 时间：2012-09-24T11:52:12.520
> 
> 标签：objective-c, xcode

我正在练习一些布尔函数，我似乎被困住了，任何帮助都将不胜感激。我一定是犯了一些小错误。

```
-(BOOL) checkForWin
{
    if ([[dictionary valueForKey:[cowsShuffled objectAtIndex:cowsCard]] intValue]  == 2{
       return YES;
    }
}

 -(void) moo 
{
    if (checkForWin == YES) {
        NSLog (@"foo");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T11:54:24.343

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:54:10.477

你的方法调用是错误的。您调用这样的方法：`[object method]`.

在你的情况下`[self checkForWin]`。

# java - 在java中访问包

> ID：12564530
> 
> 赞同：-1
> 
> 时间：2012-09-24T11:52:16.577
> 
> 标签：java, oop, class, packages

我在 Java 中有一个包结构，它应该可以访问，如下所示。

![在此处输入图像描述](../Images/259d771e1efd74e703540bb93faa3439.png)

如何使底层包类只能被中间包访问？TestApp 应该只与接口包直接通信。TestApp 不应获得有关基础和中间包类的任何信息。怎么做？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:03:50.957

您可以将 TestApp 和 Interface 放在同一个包中。然后 Interface 必须继承 Middle 使用**受保护**的方法。然后 Middle 在同一个使用**包保护**方法的底层包中。

它可以满足您的要求，但老实说，我认为这样做没有任何意义。它假设“接口包”不是Java接口......

[Ceylon 语言](http://ceylon-lang.org/documentation/introduction/)可能对代码单元和模块有更好的概念，但 Java 6,7 和 8 语言还没有准备好向其他程序员真正隐藏东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:06:49.217

是不可能的。
您可以设置对类的包访问权限，但您将面临从其他包调用它们的困难。这意味着从中间包到底层包的访问本质上与从TestApp到底层包的访问相同。
UPD：我看到了关于继承的答案，但它并没有完全解决问题——你可以从 TestApp 中的底层包继承，没有什么能阻止你。
UPD2：顺便说一句，你的要求让我想起了`friend`C++ 中的关键字。它在 Java 中不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:06:57.703

不可能在 Java 中使用“朋友”系统来指定对包成员的更细粒度的访问。如果你让某个包外的东西可见，那么包外的*任何东西都*可以访问它。

您可以为 TestApp 和 Interface Package 包使用一个通用包，但这在语义上并不正确 - 您将客户端与接口混合在一起。

如果您想强制执行模块化，[OSGi](http://www.osgi.org/Main/HomePage)允许您将单元内的某些包标记为“内部” - 这些根本不会暴露（“连接”）给客户端。

# android - 我们可以在 android 的 One Work 空间中拥有多个 android 项目吗？

> ID：12564533
> 
> 赞同：0
> 
> 时间：2012-09-24T11:52:29.430
> 
> 标签：android, eclipse, adt

我是 android 新手，我想知道是否可以在一个工作空间中拥有多个 android 项目。我正在使用日食。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:55:20.647

只需在左侧面板中创建或导入新项目 - 包资源管理器......）））））

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:25:42.263

对于新项目：`File`，然后`New`，然后`Android Application Project`。

要导入现有项目：`File`，然后`Import...`，然后`Existing Projects into Workspace`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T11:59:35.993

这是完全可能的。添加任意数量的项目。我建议使用工作集对它们进行分组，方法是右键单击项目并选择分配工作集。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T11:54:21.317

是的，有可能，而且实际上是通常的做法；P

# java - String.format() 字符串最后一个字符的格式

> ID：12564535
> 
> 赞同：9
> 
> 时间：2012-09-24T11:52:35.187
> 
> 标签：java, string, format

是否有可能设置一个 String.format 参数，以便`N`使用输入的最后一个字符，例如：

```
String s = String.format("%1${N}s", "abcdef"); 
```

所以`s`包含`"def"`？这在脚本语言中很常见，您可以说

```
exp = "abcdef"
s = exp[-3] 
```

**编辑**

好的，所以我不想格式化我的数据并在将其放入`String#format`函数时对其进行处理。这就是格式描述的重点。这种格式描述代表了一种模块化的形式，如果我必须事先格式化我的输入数据，尽管有一个格式化程序来了，但它会被严重破坏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-20T12:20:27.260

不幸的是，即使是现在（y2017）[Java 8 Formatter](https://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html)也不支持“子字符串”。

你可以试试：

*   自由标记和[`slicing (substrings)`](http://freemarker.org/docs/dgui_template_exp.html#dgui_template_exp_stringop_slice)：

    ```
    // string 'abcde', evaluates to "bcd"
    <#assign s="abcde">
    ${s[1..3]} 
    ```

*   Spring 表达式语言 (SpEL) 和[`expressions methods`](https://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html#expressions-methods)：

    ```
    // string literal 'abcde', evaluates to "bcd"
    ExpressionParser parser = new SpelExpressionParser();
    String sub = parser.parseExpression("'abcde'.substring(2, 4)").getValue(String.class); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:04:31.130

`String#substring(int index)`与您的脚本示例执行相同的操作：

```
String a = "abcdef";
String b = String.format("%s", a.substring(3)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:23:50.907

我不清楚是否`String.format`有这种功能。但是使用 的功能`String`，就可以实现。

```
 int n = 10;
    String a = "01234567891234";

    // Split into to strings.
    String lastString = a.substring(a.length() - n);
    String firstString = a.substring(0, a.length() - n);

    // Format second string and result is concatenated with first.
    String formattedLastString = String.format("%15s", lastString);
    String formattedString = firstString.concat(formattedLastString); 
```

# php - PHP：解析当前 URL

> ID：12564539
> 
> 赞同：-2
> 
> 时间：2012-09-24T11:53:00.693
> 
> 标签：php

我可以捕获当前的 URL`$_SERVER['REQUEST_URI']`并且`/mysitw/project/detail/fp/3`想要解析

```
array(0=>mysite, 1=>project, 2=>detail, 3=>fp, 4=>3) 
```

然后轻松搜索我需要的值`in_array()`，如果可以在数组中成功解析 url，我可以使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:59:46.960

如果你这样做...

```
$array = explode('/', $_SERVER['REQUEST_URI']); 
```

你的数组应该是这样的......

```
echo $array [0]; // mysite
echo $array [1]; // project
echo $array [2]; // detail
echo $array [3]; // fp
echo $array [4]; // 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:58:17.650

```
$url = $_SERVER['REQUEST_URI'];
$url_splits = parse_url($url);
$path = $url_splits['path'];

$each_elemts = explode("/",$path);

print_r($each_elemts); 
```

# macos - OSX 10.6 (& Qt)：检查运行进程的位数 - 即使在 32 位兼容模式下

> ID：12564542
> 
> 赞同：2
> 
> 时间：2012-09-24T11:53:04.953
> 
> 标签：macos, qt, process, 64-bit, 32-bit

如何在运行进程内部检查自己的位状态：这意味着是“英特尔”（32 位）还是“英特尔（64 位）”，因为我想根据该结果设置一定的限制。问题是在编译时检查没有帮助，因为您可以使用`Finder > Information`兼容模式设置为 32 位。

是否有（在 Qt 内部）类似于`IsWow64Process-command`Windows 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:02:50.110

我假设您想知道机器硬件，而不是您的代码正在运行的当前进程架构。

Shell 命令`uname -m`将返回底层硬件的名称。在 64 位机器上，它将返回字符串“x86_64”。

用于[`QProcess`](http://qt-project.org/doc/qt-4.8/qprocess.html)调用命令并检查返回的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:42:22.930

有一个编译器定义的预处理器宏`__LP64__`在 64 位代码中是正确的。这是编译时检查，但没关系。能够使用 Finder 设置 32 位模式打开或关闭的唯一方法是，如果您已经为这两种架构编译了代码。

# python - 在 sphinx 的头函数声明部分中包含 python 源代码

> ID：12564543
> 
> 赞同：0
> 
> 时间：2012-09-24T11:53:06.607
> 
> 标签：python, python-2.7, python-sphinx

我是狮身人面像的新手。我面临的情况是我有一个复杂的函数，并且在我想展示的 sphinx 文档中，直接使用该函数的一些示例。

```
def myComplicatedFunction(status):
    """Here I have a brief description

    :param status: explanation

    :returns: explanation
    """
    <<< code >>>

    return statstics 
```

在狮身人面像部分的某处，我想包含一些显示示例输入和示例输出的 python 代码。但是无论我做什么（使用**``**或**::**），因为文档表明它没有得到语法高亮显示。它只是作为简单的文本包含在内，这使得阅读变得困难。

***我应该如何在 sphinx 中包含 python 代码示例？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:13:09.107

模拟 Python 交互式会话；以 开头的块`>>>`被自动视为 Python 源代码：

```
def myComplicatedFunction(status):
    """Here I have a brief description

    :param status: explanation

    :returns: explanation

    >>> myComplicatedFunction('status value')
    {'foo': 2, 'bar': -400}

    """
    # Code

    return statistics 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:25:49.823

```
.. code-block:: language
      def foo().... 
```

适用于 python，但请确保您已安装 pygments。

在 somethingconf.py 配置文件中，这两个语句很有趣：

```
pygments_style = 'sphinx' 
```

并根据输出写出类似的东西

```
options['add_syntax_highlighting'] = True 
```

# c# - 在linq中动态设置order by子句内的键

> ID：12564545
> 
> 赞同：2
> 
> 时间：2012-09-24T11:53:10.287
> 
> 标签：c#, linq, reflection

我需要使用 linq 在 OrderBy 子句中设置键，其中键是对象的属性。我只有财产名称。如何动态设置属性。

```
class Obj 
{
    string Level
    {
       get;
       set;
    }
}

List<Obj> objList;

objList.OrderByDescending(x => x.Level); => "here i only have property name." 
```

希望任何人都可以提供帮助

谢谢苏尼尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:59:17.213

您可以通过**[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)**和动态**[创建表达式树来做到这一点](http://msdn.microsoft.com/en-us/library/bb397951.aspx)**

```
public static IOrderedQueryable<T> OrderByDescending<T>(this IQueryable<T> enumerable, string sortColumn)
{
    var param = Expression.Parameter(typeof(T), "x");
    var mySortExpression = Expression.Lambda<Func<T, object>>(Expression.Property(param, sortColumn), param);
    return enumerable.OrderByDescending(mySortExpression);;
 } 
```

和 OrderBy

```
public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> enumerable, string sortColumn)
{
    var param = Expression.Parameter(typeof(T), "x");
    var mySortExpression = Expression.Lambda<Func<T, object>>(Expression.Property(param, sortColumn), param);
    return enumerable.OrderBy(mySortExpression);;
 } 
```

你可以将这两者合二为一

```
public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> enumerable, string sortColumn, string direction)
{
     var param = Expression.Parameter(typeof(T), "x");
     var mySortExpression = Expression.Lambda<Func<T, object>>(Expression.Property(param, sortColumn), param);

      IOrderedQueryable<T> iQuery;
      switch(direction)
      {
          case "desc": 
            iQuery = enumerable.OrderByDescending(mySortExpression);
            break;
          case "asc":
          default :
            iQuery = enumerable.OrderBy(mySortExpression);
            break;
      }
      return iQuery;
 } 
```

然后你可以这样称呼它`objList.OrderBy("Level","asc")`//For Ascending `objList.OrderBy("Level","desc")`//For Descending

希望它会有所帮助

# mysql - 如何返回仅包含四个字符或更少字符的表中的所有列？

> ID：12564554
> 
> 赞同：5
> 
> 时间：2012-09-24T11:53:46.200
> 
> 标签：mysql

我正在映射 MySQL 表中的数据，并且有一个包含超过 50 列和超过 100,000 行的表，我需要映射**其中包含 4 个字符或更少的数据**的列。

如何获取表中包含仅包含四个字符或更少字符的数据的所有列的列表？就我而言，所有列都是 varchar(255)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:02:56.987

```
SELECT
  COLUMN_NAME

FROM INFORMATION_SCHEMA.COLUMNS

WHERE TABLE_NAME = <table>
AND CHAR_LENGTH(COLUMN_NAME) <= 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:01:21.877

这将为您提供名称包含 4 个或更少字符的列：

```
SHOW COLUMNS FROM table WHERE CHAR_LENGTH(Field) < 5 
```

在上面的 sql 中，你只需`table`要用你的表名替换，这`Field`是一个文字，你必须保持这种方式。

**更新：**
如果您想要包含 4 个或更少字符的列内容，那么您可以这样：

```
select * from table where CHAR_LENGTH(column_name) < 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:21:02.760

我认为您需要使用来自的信息创建一个动态查询`INFORMATION_SCHEMA.COLUMNS`，然后执行该查询。未经测试，但类似于：

```
SET @s = 'SELECT GROUP_CONCAT(X) AS FOUR_CHAR_COLS, ID FROM (' + 
        (SELECT GROUP_CONCAT('SELECT CASE WHEN CHAR_LENGTH(`' + COLUMN_NAME + 
        '`) <= 4 THEN ''' + COLUMN_NAME + ''' ELSE NULL END AS X, ID FROM MyTableName' 
          SEPARATOR ' UNION ALL ')
        FROM INFORMATION_SCHEMA.COLUMNS
        WHERE TABLE_NAME = 'MyTableName') + 
    ') XX GROUP BY ID';

PREPARE stmt FROM @s;
EXECUTE stmt; 
```

这应该列出每行中包含 4 个或更少字符的所有列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:41:22.640

它可以通过存储过程来完成。

1.  从表中选择所有重要的列名并存储到临时表中；
2.  使用 WHILE 或 REPEAT 循环遍历它们并执行 SELECT LENGTH(column_name) FROM table。

# ssh - SSH - 遍历 txt 文件中的行并删除文件

> ID：12564555
> 
> 赞同：0
> 
> 时间：2012-09-24T11:53:47.417
> 
> 标签：ssh, cron

我有一个 .txt 文件，每一行都有一个不同的文件位置，例如

```
file1.zip
file2.zip
file3.zip 
```

如何打开该文件，遍历每一行并在每一行上循环 rm -f 文件名？

此外，如果文件不存在（已被删除），删除它是否会引发错误，如果是，我该如何避免这种情况？

编辑：文件名中可能有空格，因此也需要考虑到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:57:22.893

您可以使用`for`循环`cat`来遍历这些行：

```
IFS=$'\n'; \
for file in `cat list.txt`; do \
    if [ -f $file ]; then \
        rm -f "$file"; \
    fi; \
done 
```

将`if [ -f $file ]`检查文件是否存在并且是常规文件（不是目录）。如果检查失败，它将跳过它。

`IFS=$'\n'`顶部的 将分隔符设置为仅换行符；这将允许您处理带有空格的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:57:09.567

`xargs -n1 echo < test.txt`

用 rm -f 或任何其他命令替换“echo”。你也可以使用`cat test.txt |`

'man xargs' 了解更多信息。

# wolfram-mathematica - 增加 Mathematica FunctionInterpolation Accuracy/Domain

> ID：12564556
> 
> 赞同：3
> 
> 时间：2012-09-24T11:53:49.320
> 
> 标签：wolfram-mathematica

我当前的问题是尝试在复杂函数上使用 FunctionInterpolation[] ，最容易看到这可能是当您比较以下之间的区别时：

```
FunctionInterpolation[Sin[t], {t, 0, 30}]
Plot[%[t], {t, 0, 30}] 
```

和

```
FunctionInterpolation[Sin[t], {t, 0, 1000}]
Plot[%[t], {t, 0, 30}] 
```

通过增加函数的域，插值变得非常不准确，我正在寻找一种方法来创建一个 FunctionInterpolation[] ，它对于任意长的域具有任意高的精度。短域似乎是可能的，但到目前为止我一直无法找到两者的解决方案。

如果这是不可能的，为什么不呢？我不知道 InterpolationFunction 的形式有什么特别之处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:14:08.303

您也可以尝试包括衍生品：

```
FunctionInterpolation[{Sin[t], Cos[t], -Sin[t], -Cos[t]}, {t, 0, 1000}]
Plot[%[t], {t, 0, 100}] 
```

![阴谋](../Images/35bb57718730e662118c3c3767cfe245.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T21:30:33.293

您显然可以通过对函数范围使用未记录的语法来增加基础采样频率：

```
FunctionInterpolation[Sin[t], {t, 0, 1000, 20}]

Plot[%[t], {t, 0, 30}] 
```

![数学图形](../Images/82a4379b2f0a6a47c29c10feea0cf3e7.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-16T21:48:26.127

尝试使用大赞的未记录选项`InterpolationOrder->n`，`n`例如`50`：

```
With[{func = FunctionInterpolation[Sin[t], {t, 0, 1000}]}, 
  Plot[func[x], {x, 150, 160}]
] 
```

[![在此处输入图像描述](../Images/9630d62e6fc1beaea7705767e34af54d.png)](https://i.stack.imgur.com/8LKcq.png)

```
With[{func = FunctionInterpolation[Sin[t], {t, 0, 1000}, InterpolationOrder -> 50]}, 
  Plot[func[x], {x, 150, 160}]
] 
```

[![在此处输入图像描述](../Images/dd274cc30f9768fdf42f721151942446.png)](https://i.stack.imgur.com/Lg6Dm.png)

您也可以尝试未记录的`InterpolationPoints`：

```
With[{func = FunctionInterpolation[Sin[t], {t, 0, 1000}, InterpolationPoints -> 50]}, 
  Plot[func[x], {x, 150, 160}]
] 
```

[![在此处输入图像描述](../Images/4618c8608a0d336eda185f12aa8c1a95.png)](https://i.stack.imgur.com/HbbYo.png)

# php - 使用 .htaccess 和 php5.4 内置服务器

> ID：12564559
> 
> 赞同：11
> 
> 时间：2012-09-24T11:53:54.297
> 
> 标签：php, .htaccess

在我的开发环境中，我使用 php5.4 的 web 内置 web 服务器，但 .htaccess 似乎无法正常工作。我找不到该服务器的文档。有人能告诉我是否可以像 apache 一样使用 htaccess 和 mod_rewrite 吗？

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T11:58:40.757

正如我在评论中提到的，当前目录默认是您的 webroot。此网络服务器也不支持`.htaccess`.

你会在这里找到关于你的问题的一个[很好的解释。](http://www.lornajane.net/posts/2012/php-5-4-built-in-webserver)

> **让服务器运行**
> 
> 默认情况下，当前目录是您的 webroot，您现在可以请求此处的任何文件，并以通常的方式运行 PHP

或者

> **像 Apache Rewrite 这样的路由请求**
> 
> 我一直在寻找的一个直接功能是将所有传入请求重定向到 index.php 的能力，我通常使用 .htaccess 文件执行此操作。这个网络服务器不支持这些（尽管我的好朋友 Josh 已经创建了一些非常接近的东西），但它确实支持路由文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T07:20:40.123

我不是这样做的粉丝，但我已经看到软件 Magento 在野外这样做了：

```
/**
 * Parse .htaccess file and apply php settings to shell script
 *
 */
protected function _applyPhpVariables()
{
    $htaccess = $this->_getRootPath() . '.htaccess';
    if (file_exists($htaccess)) {
        // parse htaccess file
        $data = file_get_contents($htaccess);
        $matches = array();
        preg_match_all('#^\s+?php_value\s+([a-z_]+)\s+(.+)$#siUm', $data, $matches, PREG_SET_ORDER);
        if ($matches) {
            foreach ($matches as $match) {
                @ini_set($match[1], str_replace("\r", '', $match[2]));
            }
        }
        preg_match_all('#^\s+?php_flag\s+([a-z_]+)\s+(.+)$#siUm', $data, $matches, PREG_SET_ORDER);
        if ($matches) {
            foreach ($matches as $match) {
                @ini_set($match[1], str_replace("\r", '', $match[2]));
            }
        }
    }
} 
```

[https://github.com/OpenMage/magento-mirror/blob/1b7c8107492ddea9d480152bdc81908befd0795c/shell/abstract.php#L110-L134](https://github.com/OpenMage/magento-mirror/blob/1b7c8107492ddea9d480152bdc81908befd0795c/shell/abstract.php#L110-L134)

它旨在将 PHP 设置应用`.htaccess`到 PHP CLI 脚本，但我想它也应该适用于 PHP 的内置 Web 服务器。

# android - Android：如何创建带有上下文的首选项数组？

> ID：12564560
> 
> 赞同：0
> 
> 时间：2012-09-24T11:53:58.400
> 
> 标签：android, arrays, sharedpreferences

目前我有一些测试代码开始如下：

```
 CheckBoxPreference cb1 = new CheckBoxPreference(this);
    CheckBoxPreference cb2 = new CheckBoxPreference(this); 
```

我想要实现的是一个 CheckBoxPreferences 数组，我希望它看起来像这样：

```
private CheckBoxPreference[] mFilterSubjects = new CheckBoxPreference(this)[24]; 
```

但是，这会生成错误“表达式的类型必须是数组类型，但它解析为 CheckBoxPreference”。以下代码正确编译：

```
private CheckBoxPreference[] mFilterSubjects = new CheckBoxPreference[24]; 
```

但是，如果我尝试对数组的某个元素（例如 mFilterSubjects[0]）执行某些操作，我会收到 NullPointerException，因为没有上下文。

如何更改我的声明以使其正常工作，换句话说，如何使用上下文声明数组的每个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:00:12.313

您只是创建一个空数组来容纳 24 个元素，这就是您获得空指针的原因：

```
private CheckBoxPreference[] mFilterSubjects = new CheckBoxPreference[24]; 
```

您需要向该数组添加首选项：

```
for(int i = 0; i < 24; i++){
    mFilterSubjects[i] = new CheckBoxPreference(this);
} 
```

# ruby-on-rails - Spork & Rails 3.1 引擎：助手不会重新加载

> ID：12564566
> 
> 赞同：0
> 
> 时间：2012-09-24T11:54:11.100
> 
> 标签：ruby-on-rails, rspec, rails-engines, spork

我正在开发 Rails 3.1 引擎并想对其进行测试。我为此使用 RSpec，一切运行良好，但是在尝试使用 Spork 时，我遇到的问题是我的助手没有正确重新加载。

我读了很多关于模型的类似问题的文章，我想出了以下可能的解决方法：

```
# my_engine/spec/spec_helper.rb

ActiveSupport::Dependencies.clear
ActiveRecord::Base.instantiate_observers

Dir[File.join(File.dirname(__FILE__), '..', 'app', 'helpers', '*.rb')].each do |file|
  require file
end

# my_engine/spec/dummy/config/environments/test.rb
Dummy::Application.configure do
  # ...
  config.cache_classes = !(ENV['DRB'] == 'true') # Ensure that classes aren't cached when using Spork.
  # ...
end 
```

只要它肯定会重新加载帮助文件（我添加了一个断点来检查这一点），它就可以工作，但是这些更改不会反映在测试中，只有重新启动 Spork 才会这样做。也许是因为助手是模块，并且测试不依赖于模块而是依赖于实现模块的类，所以模块被正确地重新加载但没有正确混合？

目前，我只是将所有初始化程序代码放入 each_run 块中：

```
# Configure Rails Environment
ENV["RAILS_ENV"] = "test"

require File.expand_path("../dummy/config/environment.rb", __FILE__)
require 'rspec/rails'

Rails.backtrace_cleaner.remove_silencers!

# Load support files
Dir["#{File.dirname(__FILE__)}/support/**/*.rb"].each { |f| require f }

RSpec.configure do |config|
  config.use_transactional_fixtures = true

  config.treat_symbols_as_metadata_keys_with_true_values = true
  config.filter_run :focus => true
  config.run_all_when_everything_filtered = true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:00:14.050

我对这个话题做了很多研究，我在这两篇博文中写过：

*   [如何轻松开发 Rails 3.1 引擎：第一部分 - 引擎](http://lsd4coders.muheimwebdesign.ch/2012/09/how-to-develop-rails-3-1-engines-with-ease-part-i-the-engine/)
*   [如何轻松开发 Rails 3.1 引擎：第二部分 – 宝石](http://lsd4coders.muheimwebdesign.ch/2012/09/how-to-develop-rails-3-1-engines-with-ease-part-ii-the-gem/)

特别是关于我上面的问题：我可以想象它没有工作，因为我没有`require 'rspec/autorun'`在`Spork.prefork`街区，但我不完全确定。

这是`spec_helper.rb`我当前的引擎（根据需要成功重新加载所有内容）：

```
require 'rubygems'
require 'spork'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../dummy/config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    config.use_transactional_fixtures = true
    config.fixture_path = "#{::Rails.root}/spec/fixtures"
    config.infer_base_class_for_anonymous_controllers = false
    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.filter_run :focus => true
    config.run_all_when_everything_filtered = true
  end
end

Spork.each_run do
  # This code will be run each time you run your specs.
end 
```

# linux - linux。将文件内容设置为环境变量时如何保留行？

> ID：12564576
> 
> 赞同：6
> 
> 时间：2012-09-24T11:54:42.270
> 
> 标签：linux, shell, environment-variables, newline

我有一个包含几行的文件。在shell中使用cat/more/less [file]时，
内容逐行显示

执行以下命令时：

```
temp=`cat [file]`
echo $temp 
```

内容显示在一行中。

有没有办法在设置环境变量时保留行尾然后回显它？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T12:01:45.713

是的：

```
temp=`cat [file]`
echo "$temp" 
```

魔法就在周围的引号中`$temp`；没有他们，`echo`得到这些论点：

```
echo line1\nline2\nlin3 
```

shell 解析算法将在空白处拆分命令行，因此会`echo`看到三个参数。如果引用变量，`echo`将看到一个参数，并且 shell 解析不会触及引号之间的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:24:49.227

这是一个超精确的答案：进程替换到变量中**不会**保留：

*   任何 ASCII NUL
*   任意数量的尾随换行符

只有后者可以解决：

```
temp=$(realprocess; echo x)  ## Add x to the end to preserve trailing newlines
temp=${temp%x}  ## Remove the x again (keeping originally trailing newlines) 
```

如果要显示变量的真实内容，请使用`printf`. `echo`添加一个额外的换行符，并且不可靠（`-n`例如，当输入以字符串开头时）。

在任何情况下，请始终引用您的变量，否则 shell 会将它们在空格上拆分为任意数量的参数！

```
printf %s "$temp" 
```

通常，将文件的完整内容保存在 shell 变量中并不是您想要的。有文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T12:01:21.707

如果我执行以下操作，则会保留换行符：

```
echo a >> test
echo b >> test
temp=`cat test`
echo $temp 
```

# windows - 如何在多个程序中接收相同的 udp-stream？

> ID：12564580
> 
> 赞同：2
> 
> 时间：2012-09-24T11:54:50.990
> 
> 标签：windows, networking, udp, mpeg2-ts

我有一个封闭的第三方系统，它发送我想在同一台计算机上的两个不同程序中访问的单播 UDP 流 (MPEG-TS)。我无法更改源上的任何内容，甚至无法更改 IP 或端口。

除了编写我自己的小程序来捕获流然后创建新流并重新发送两者之外，还有其他选择吗？

似乎两个目标程序中只有一个处理多播，所以我需要两个单播流。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:34:21.437

您应该能够使用[`socat`](http://www.dest-unreach.org/socat/)将单播 UDP 转发到多播组，或者只是将数据保存到文件中并稍后处理。

### 编辑0：

这是一个示例（这是在 Linux 上 - 没有任何 Windows 框）。监听单播端口`4242`，转发到多播（如果你在同一台机器上做所有事情，`224.10.10.10:5252`你可能需要添加选项）：`ip-multicast-loop`

```
~$ socat UDP-LISTEN:4242 UDP-DATAGRAM:224.10.10.10:5252 
```

接收多播（需要接口地址或名称），转发到单播`192.168.0.1:6666`：

```
~$ socat UDP-RECVFROM:5252,ip-add-membership=224.10.10.10:eth0,reuseaddr,fork \
   UDP-DATAGRAM:192.168.0.1:6666 
```

使用不同的目标地址运行上述两个（`reuseaddr`选项允许它们在同一台机器上运行）。

# lisp - lisp 迭代函数总是返回 nil

> ID：12564587
> 
> 赞同：1
> 
> 时间：2012-09-24T11:55:09.430
> 
> 标签：lisp, iteration, let

此函数应该计算元素“a”出现在列表中的次数，但不起作用：

```
(defun iter-a_count (lst)
   (let ((count 0))
        (dolist (x lst)
                (if (equal x 'a) 
                    (setf count (+ count 1)))
         count ))) 
```

这个函数总是返回 nil。请问我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:03:36.507

从`dolist`宏返回的值是它的第三个“参数”，即

```
(dolist (iterator iterable result) forms) 
```

`iterator`每次迭代都将where更新为`car`的下一个单元格`iterable`，在访问完所有列表单元格之后，`result`返回。

您没有指定结果，结果的默认值为`nil`. 我不确定最后一行中计数的目的是什么——也许你想返回计数——在这种情况下，把它放在 lst 之后。

您还需要考虑几件事情：

```
(setf x (+ x 1)) 
```

相当于：

```
(setf x (1+ x)) 
```

这相当于：

```
(incf x) 
```

写起来更习惯

```
(when x forms) 
```

代替

```
(if x true-branch) 
```

因为如果您以后想要向 中添加更多表达式`true-branch`，则必须将它们包装起来`progn`- 这只会使代码混乱。

此外，您正在做的事情（或似乎正在做的事情）可以`count-if`用适当的谓词调用来代替。

```
(defun count-a (list)
  (count-if #'(lambda (x) (equal x 'a)) list))

(count-a '(a b c d a b a d a c b d e))  ; 4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:15:27.520

> 请问我哪里出错了？

缩进（如，你缩进错误）：你写

```
(defun iter-a_count (lst)
  (let ((count 0))
    (dolist (x lst)
      (if (equal x 'a) 
          (setf count (+ count 1)))
      count))) 
```

但我认为你的意思是

```
(defun iter-a_count (lst)
  (let ((count 0))
    (dolist (x lst)
      (if (equal x 'a) 
          (setf count (+ count 1))))
    count)) 
```

# wpf - 为什么模板化的 DataGridColumnHeader 中会出现额外的列？

> ID：12564588
> 
> 赞同：0
> 
> 时间：2012-09-24T11:55:09.930
> 
> 标签：wpf, xaml, datagrid, datagridcolumnheader

您好，有一个非常简单的 WPF DataGrid 布局，如下所示：

```
<wpftk:DataGrid Grid.Row="1"
        x:Name="myOrdersGrid"
        ColumnHeaderStyle="{DynamicResource FilterColumnHeaderStyle}"
        CanUserResizeColumns="True"
        VerticalAlignment="Stretch"
        HorizontalAlignment="Stretch">

  <wpftk:DataGrid.Resources>
    <Style x:Key="FilterColumnHeaderStyle" TargetType="{x:Type Primitives:DataGridColumnHeader}">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type Primitives:DataGridColumnHeader}">
            <WrapPanel Width="50" Orientation="Vertical">
              <ContentPresenter Content="{TemplateBinding Content}" HorizontalAlignment="Stretch"  />
              <TextBox Text="Hello" FontSize="10" Background="OldLace" HorizontalAlignment="Center" />
            </WrapPanel >
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </wpftk:DataGrid.Resources>

  <wpftk:DataGrid.Columns>
    <wpftk:DataGridTextColumn SortMemberPath="Name" Binding="{Binding Name}" IsReadOnly="True"/>
    <wpftk:DataGridTextColumn SortMemberPath="Name" Binding="{Binding Price}" IsReadOnly="True"/>
  </wpftk:DataGrid.Columns>
</wpftk:DataGrid> 
```

目的是将文本框放入每个标题中，以充当过滤器。

但是，当它呈现时，我会在数据网格的中途获得一个额外的文本框，如下所示：

![带有额外列的 DataGrid](../Images/b9ee9b72466958e15f6a6f55d3a39b1e.png)

有谁知道为什么？我玩过各种设置等，但无法弄清楚为什么会发生这种情况（更不用说如何修复它了......）。额外的文本框似乎没有启用/可点击，所以它看起来像是某种禁用/玻璃化的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:01:44.273

关闭`AutoGenerateColumns`。您有两个声明性列，加上您要绑定的数据项中的任何列 - 因此，如果您绑定到 a`List<string>`那么您将获得第三列（并且由于您定义了`DataGridColumnHeader`模板，它将在第三列中使用列）。

（注意：您是否编辑过发布的代码以删除`AutoGenerateColumns`？我确定当我第一次查看时它就在那里）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:57:03.907

好的，所以我发现了问题。额外的控件似乎被放置在数据网格自动插入最后定义的列和数据网格的 RHS 之间的“填充”列中。

更好的方法是使用 ContentTemplate 作为标题控件，如下所示：

```
<Style x:Key="FilterColumnHeaderStyle" TargetType="{x:Type Primitives:DataGridColumnHeader}">
      <Setter Property="ContentTemplate">
        <Setter.Value>
          <DataTemplate>
            <WrapPanel Orientation="Vertical">
              <ContentPresenter Content="{TemplateBinding Content}" HorizontalAlignment="Stretch"  />
              <TextBox Text="{grid:GridFilter UpdateSourceTrigger=PropertyChanged}"
                  Visibility="{Binding ElementName=FilterCheckbox, Path=IsChecked, Converter={StaticResource b2v}}"
                  FontSize="10" Width="50" Background="OldLace" HorizontalAlignment="Center" />
            </WrapPanel >
          </DataTemplate>
        </Setter.Value>
      </Setter>
    </Style> 
```

这意味着自定义标头保留网格中的正确样式并包含拇指等，而无需在 XAML 中显式声明它们。

仍然有兴趣知道数据网格中的额外列是否是错误（出于模板目的） - 我读了一篇文章，表明它已在 .Net 4 中修复。

# wordpress - .htaccess 中的子域和路径的 RewriteCond 问题

> ID：12564589
> 
> 赞同：0
> 
> 时间：2012-09-24T11:55:13.000
> 
> 标签：wordpress, .htaccess, mod-rewrite, qtranslate

我有三个不同的域指向同一个 WordPress 的主机实例，具体取决于语言（使用 qTranslate 插件管理）：

```
RewriteEngine On
Options +FollowSymLinks
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.cat$
RewriteRule ^/?$ "http\:\/\/ca\.mydomain\.com\/" [R=301,L]
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$
RewriteRule ^/?$ "http\:\/\/en\.mydomain\.com\/" [R=301,L]
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.es$
RewriteRule ^/?$ "http\:\/\/es\.mydomain\.com\/" [R=301,L] 
```

有了这个，我设法实现了以下重定向：

*   mydomain.cat 或 www.mydomain.cat ---> **ca** .mydomain.com ---> 以加泰罗尼亚语显示网站
*   mydomain.es 或 www.mydomain.es ---> **es** .mydomain.com ---> 以西班牙语显示网站
*   mydomain.com 或 www.mydomain.com ---> **en** .mydomain.com ---> 以英文显示网站

现在我遇到的问题是，例如，用户键入 mydomain.cat/work 它不能正常工作，它转到 mydomain.com/work/ 并且子域中的语言部分丢失。如果在这种情况下，它会重定向到 ca.mydomain.com/work，那将是完美的。

我已经研究并尝试修改三个 RewriteCond 规则以在 url 末尾“添加”附加内容（不知道使用 QUERY_STRING 还是使用参数更好），但我无法得到它工作正常，而不是我不知道这是否是实现它的最佳方法。

任何人都可以帮助我或给我一个线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:34:49.547

好的，我得到了它的工作：

```
RewriteEngine On
Options +FollowSymLinks
RewriteBase /
RewriteCond %{REQUEST_URI} ^/[^\.]+[^/]$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [R=301,L]
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.cat$
RewriteRule (.*) "http\:\/\/ca\.mydomain\.com\/$1" [R=301,L]
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$
RewriteRule (.*) "http\:\/\/en\.mydomain\.com\/$1" [R=301,L]
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.es$
RewriteRule (.*) "http\:\/\/es\.mydomain\.com\/$1" [R=301,L] 
```

我在 RewriteRule 语句的末尾添加了 $1，并用 (.*) 覆盖了开头的 ^/?$。我还在其他行之上添加了这两行：

```
RewriteCond %{REQUEST_URI} ^/[^\.]+[^/]$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [R=301,L] 
```

防止尾随斜杠。我希望这对某人有帮助。

# git - 带有 --index-filter 的 git-filter-branch ：奇怪的 bash 错误（！：未找到事件）

> ID：12564592
> 
> 赞同：2
> 
> 时间：2012-09-24T11:55:22.923
> 
> 标签：git, bash, git-filter-branch

我正在使用[这个问题](https://stackoverflow.com/questions/2982055/detach-many-subdirectories-into-a-new-separate-git-repository)的答案将存储库的克隆剥离到我想要保留在该项目的衍生文件中的文件列表中。假设我想剥离除目录`src/main`及其子目录之外的所有内容。因为我将有多个文件和目录，所以我使用`--index-filter`而不是`--subdirectory-filter`.

我认为以下应该有效：

```
git filter-branch --index-filter "git rm -r -f --cached --ignore-unmatch ↩
  src/!(main)" --prune-empty -- --all 
```

但我得到的只是

```
-bash: !: event not found 
```

我尝试了各种不同的路径而不是`src/!(main)`. 我总是得到确切的错误信息。这似乎是一个 bash 问题，因为该行也没有进入我的命令行历史记录？

* * *

也就是说，如果我有顶级文件`A`，和`B`，和子目录`C/D`，我怎么能删除**除了**这三个东西之外的所有东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:43:29.327

这 ！是问题所在，因为它用于命令历史调用。在引号内，在前面加上反斜杠也无济于事，所以`\!` 必须是外引号。可以使用一些带有 echo 的示例来说明：

```
/home/user1> echo "src/!(main)"
-bash: !: event not found
/home/user1> echo "src/\!(main)"
src/\!(main)
/home/user1> echo "src/"\!"(main)"
src/!(main) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T11:09:43.113

要回答澄清中添加的实际问题：您正在尝试使用 bash的*extglob*来删除. 这不起作用，因为 index-filter 命令*不是*由您的 shell 执行的，而是由via （请参阅 参考资料）执行的。`src``main``git index-filter`*`sh``eval``/usr/lib/git-core/git-filter-branch:327`*

 *[这样做时你不能告诉 git 启用*extglob*，但你可以让你的 shell在将它传递给之前扩展*extglob*`index-filter`](https://stackoverflow.com/a/8079852/396967)：

```
git filter-branch --index-filter "git rm -r -f --cached --ignore-unmatch $(ls -xd src/!(main))" --prune-empty -- --all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:15:56.470

Bash 的语法中使用感叹号来进行[历史扩展](http://www.gnu.org/software/bash/manual/html_node/History-Interaction.html#History-Interaction)，这就是造成混乱的原因。您必须使用反斜杠或单引号对其进行转义：

```
git filter-branch --index-filter "git rm -r -f --cached --ignore-unmatch ↩
  src/\!(main)" --prune-empty -- --all 
```*

# c++ - Objective C 协议引用作为 C++ 类中的实例变量

> ID：12564593
> 
> 赞同：0
> 
> 时间：2012-09-24T11:55:31.550
> 
> 标签：c++, objective-c, protocols

是否可以在 C++ 类中引用 Objective C 协议？这

```
(id)<B2ContactListener> _B2ContactListener; 
```

行导致两个错误：

'*预期; 在声明列表的末尾*'

和

' *C++ 要求所有声明的类型说明符*'。

这是代码。

B2_ContactListener.mm：

```
#import "Box2D.h"
#import "B2_ContactListener.h"

class ContactListener : public b2ContactListener
{
private:
  (id)<B2ContactListener> _B2ContactListener; // ERRORs

public:
  //Methods
}; 
```

B2_ContactListener.h：

```
#import "B2_Contact.h"

@protocol B2ContactListener
-(void)B2BeginContact: (B2Contact*) contact;
@end 
```

我正在使用当前的 XCode 编译器 BTW。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:57:14.590

去掉括号：

```
id<B2ContactListener> _B2ContactListener; 
```

那应该行得通。

您可能要考虑的另一件事是将其`NSObject *`改为一个，因此您可以调用继承自的方法`NSObject`而无需强制转换。

# android - 如何修复忽略 minwidth 和 minheight 的 AppWidgetProvider 声明

> ID：12564594
> 
> 赞同：0
> 
> 时间：2012-09-24T11:55:31.863
> 
> 标签：android, appwidgetprovider

我已经声明了一个 AppWidgetProvider 使用

```
 <receiver android:name="uk.co.bmc.rad.widgets.NearestOpenCragWidgetProvider" android:exported="false">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data android:name="android.appwidget.provider"
                   android:resource="@xml/nearest_open_crag_widget_info" />
        </receiver> 
```

在 res/xml 我添加了nearest_open_crag_Widget_info.xml 包含

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" >
    android:minWidth="486dp"
    android:minHeight="144dp"
    android:updatePeriodMillis="86400000"
    android:initialLayout="@layout/nearest_open_crag_widget"
    android:resizeMode="none">
</appwidget-provider> 
```

我在 Eclipse 模拟器中运行它，无论我为 minWidth 和 minHeight 指定什么尺寸，都会添加相同尺寸的小部件。

正如您在屏幕底部看到的那样：![截屏](../Images/e2d0a638462f4cca4160978d299baeb5.png)

* * *

如果布局有问题，我会在此处包含它。我（希望）根据状态隐藏或显示三个相对布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="@dimen/widget_margin"
    android:background="#525252" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="35dp"
        android:background="@color/bmc_red"
        android:gravity="center" >

        <TextView
            android:id="@+id/widget_title"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="center|fill_horizontal"
            android:gravity="center|center_horizontal"
            android:text="@string/the_nearest_open_crag_is_"
            android:textColor="@android:color/white"
            android:textSize="20dp" />
    </RelativeLayout>

    <ProgressBar
        android:id="@+id/nearest_crag_loading_progress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:indeterminate="true" />

    <RelativeLayout
        android:id="@+id/nearest_crag_loading_error_wrapper"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:visibility="gone" >

        <ImageView
            android:id="@+id/nearest_crag_error_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:contentDescription="@string/error_image_content_description"
            android:src="@android:drawable/ic_dialog_alert" />

        <TextView
            android:id="@+id/nearest_crag_loading_error"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/nearest_crag_error_image"
            android:gravity="center|center_vertical"
            android:text="@string/ah_no_error_message_crikey_" >
        </TextView>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/nearest_open_crag_details_wrapper"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:visibility="gone" >

        <TextView
            android:id="@+id/name_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/crag_list_spacer"
            android:singleLine="true"
            android:text="@string/list_view_name_string"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/distance_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@id/name_text"
            android:layout_marginLeft="@dimen/crag_list_spacer"
            android:layout_marginRight="@dimen/crag_list_spacer"
            android:singleLine="true"
            android:text="@string/list_view_distance_string"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/description_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/distance_text"
            android:layout_marginLeft="@dimen/crag_list_spacer"
            android:layout_marginRight="@dimen/crag_list_spacer"
            android:ellipsize="end"
            android:singleLine="true"
            android:text="@string/crag_description"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Button
            android:id="@+id/nearest_crag_btn_details"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/description_text"
            android:layout_below="@+id/description_text"
            android:layout_marginTop="10dp"
            android:clickable="true"
            android:text="@string/open_details" />
    </RelativeLayout>

</LinearLayout> 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:52:29.593

它不会忽略您的设置

在这里阅读[http://developer.android.com/guide/practices/ui_guidelines/widget_design.html](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)

> 如果您的小部件背景九补丁中有任何固有的内容填充，您应该相应地添加到 minWidth 和 minHeight。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:14:10.047

您需要将相同的 minHeight 或 minWidth 应用于子元素（看起来很迟钝，不是吗？）

如果您为孩子调整相同的设置，则 appwidget-provider 中的设置有效，在我的情况下是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="@dimen/widget_margin"
    android:background="#525252" 
    android:minWidth="486dp"
    android:minHeight="144dp"> 
```

# objective-c - iOS 5.1 和 6.0 中具有其他大小的相同文本字段

> ID：12564603
> 
> 赞同：1
> 
> 时间：2012-09-24T11:56:21.927
> 
> 标签：objective-c, uitextfield, ios6, ios5.1, uifont

我有一个`UITextfield`：

```
 textField = [[UITextField alloc] initWithFrame:CGRectMake(20, 10, 200, 33)];
    [textField setFont:[UIFont fontWithName:@"Helvetica Neue Regular" size:14]] ;
    [textField setDelegate:self]; 
```

`textfield`您可以在下面看到`iOS 6.0`和`iOS 5.1`。 ![在此处输入图像描述](../Images/6854f9a5c2804395a92633f4221bfb0c.png)

![在此处输入图像描述](../Images/309c3da020774726dae828d8e23d7e21.png)

为什么在 5.1 文本上它更大？`setFont`大小为`14`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:31:16.243

据我了解，您从模拟器中截取屏幕截图。如果是真的，5.1 上的文本总是比 6.0 大，因为 iPhone 4 和 iPhone 5 的屏幕分辨率不同，但模拟器 iPhone 4 和 iPhone 5 的“窗口”大小是相同的。

# android - 无法在android中访问超类成员

> ID：12564606
> 
> 赞同：1
> 
> 时间：2012-09-24T11:56:41.830
> 
> 标签：android, class, string-concatenation

在我的 android 项目中有一个小错误我无法从 AsyncTask 子类访问 Super 类字符串变量我收到以下错误

```
public class XyzActivity extends ListActivity {

    // JSON Node names
                private static final String TAG_CONTACTS = "results";
                private static final String TAG_ID = "id";
                private static final String TAG_NAME = "name";
                private static final String TAG_GENDER = "rating";
                private static final String TAG_ADDRESS = "formatted_address";
                private static final String TAG_REFERENCE = "reference";

                private static final String TAG_LOCATION = "location";
                private static final String TAG_TYPE="type";

    // contacts JSONArray
    JSONArray results = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bundle extras = getIntent().getExtras();
        if (extras != null) {
           String location = extras.getString("TAG_LOCATION");

        // url to make request
        String url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurents+in+"+location+"&sensor=true&key=AIzaSyD38pak_katUfSR92WE2_O2b9y0JSp5htA";
        }

        LoadData ld = new LoadData();
        ld.onPreExecute();
    new LoadData().execute();

    }

class LoadData extends AsyncTask<String, String, String>
    { 
    ProgressDialog pDialog;

protected void onPreExecute() {

pDialog = new ProgressDialog(Xyz.this); 
pDialog.setMessage("Populating list please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
}

    // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    protected String doInBackground(String... args) {

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();
        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Results
            results = json.getJSONArray(TAG_CONTACTS);

            // looping through All Contacts
            for(int i = 0; i < results.length(); i++){
                JSONObject c = results.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String formatted_address = c.getString(TAG_ADDRESS);
                String rating = c.getString(TAG_GENDER);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_ADDRESS, formatted_address);
                map.put(TAG_GENDER, rating);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
            }    
        protected void onPostExecute(String file_url) {

        this.pDialog.cancel();
                // dismiss the dialog after getting all products
                    /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(Xyz.this, contactList,
                R.layout.listview_item_row,
                new String[] { TAG_NAME, TAG_ADDRESS, TAG_GENDER,}, new int[] {
                        R.id.txtTitle, R.id.txtTitle1, R.id.txtTitle3 });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), ProfileViewActivity.class);

            }
        });

        }

}
} 
```

**错误是**

```
JSONObject json = jParser.getJSONFromUrl(url); 
```

我无法从 onCreate() 方法调用 url 字符串 任何人都可以修复此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:58:58.100

在...**之前**定义字符串`onCreate`

```
public class XyzActivity extends ListActivity {

// JSON Node names
            private static final String TAG_CONTACTS = "results";
            private static final String TAG_ID = "id";
            private static final String TAG_NAME = "name";
            private static final String TAG_GENDER = "rating";
            private static final String TAG_ADDRESS = "formatted_address";
            private static final String TAG_REFERENCE = "reference";

            private static final String TAG_LOCATION = "location";
            private static final String TAG_TYPE="type";

// contacts JSONArray
JSONArray results = null;

private String url = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Bundle extras = getIntent().getExtras();
    if (extras != null) {
       String location = extras.getString("TAG_LOCATION");

    // url to make request
    url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurents+in+"+location+"&sensor=true&key=AIzaSyD38pak_katUfSR92WE2_O2b9y0JSp5htA";
    }

    LoadData ld = new LoadData();

new LoadData().execute();

}

class LoadData extends AsyncTask<String, String, String>
{ 
ProgressDialog pDialog;

protected void onPreExecute() {

pDialog = new ProgressDialog(Xyz.this); 
pDialog.setMessage("Populating list please wait...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
}

// Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
protected String doInBackground(String... args) {

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();
    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Results
        results = json.getJSONArray(TAG_CONTACTS);

        // looping through All Contacts
        for(int i = 0; i < results.length(); i++){
            JSONObject c = results.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);
            String formatted_address = c.getString(TAG_ADDRESS);
            String rating = c.getString(TAG_GENDER);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_ADDRESS, formatted_address);
            map.put(TAG_GENDER, rating);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return null;
        }    
    protected void onPostExecute(String file_url) {

    this.pDialog.cancel();
            // dismiss the dialog after getting all products
                /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(Xyz.this, contactList,
            R.layout.listview_item_row,
            new String[] { TAG_NAME, TAG_ADDRESS, TAG_GENDER,}, new int[] {
                    R.id.txtTitle, R.id.txtTitle1, R.id.txtTitle3 });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), ProfileViewActivity.class);

        }
    });

    }

}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:31:06.073

`url`是您`onCreate`方法中的局部变量。它甚至不应该在这种状态下编译。（更不用说它可以未定义并且您的 AsyncTask 仍在执行）。

您需要将 url 作为参数传递给执行方法：

```
new LoadData().execute(url); 
```

然后在 AsyncTask 中，您可以获取它：

```
String url = args[0]; 
```

此外，从 AsyncTask 返回 null 并不是很有用，最好返回您获取的元素数组。

# android - 如何从以编程方式添加的按钮中获取 OnClick()？

> ID：12564616
> 
> 赞同：5
> 
> 时间：2012-09-24T11:57:28.880
> 
> 标签：android, button, onclick, onclicklistener, buttonclick

我添加了一些带有以下行的按钮：

```
for (int i=0; i<XML.size(); i++) {
//add button
ToggleButton b = new ToggleButton(this); 
// Setting the parameters
lefttextv.setLayoutParams(lleft); 
b.setLayoutParams(bright);
//customize button
    b.setOnClickListener(this);
b.setId(id_button);
System.out.println(id_button);
b.setHeight(100);
b.setWidth(200);
// Adding to the RelativeLayout as a child
layouth.addView(lefttextv);
layouth.addView(b);
    id_button++;  
    } 
```

但是我怎样才能得到那些 OnClick() 方法呢？我已经用这个方法实现了 View.OnClickListener：

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId())
    {
    case id_button: Log.d("Button 0","Button 0 pressed);
        break;
    }
} 
```

但这不起作用，我如何获得ID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T12:04:49.800

`b`是视图，如果您的 onClick 方法在您的主类中，只需使用`b.setOnClickListener(this);`并让您的活动实现 onClickListener 就可以了。或者按照通常的方式设置巡回听众。

id 用于 xml 引用，创建对象并使用此 id 来引用，在您的情况下，您使用`b`ToggleButton 的所有属性创建了视图。这是视图。

相反，如果使用`v.getId()`只是使用`if(v == b)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T12:00:39.830

只需使用`b.setOnClickListener(this)`，where`this`指的是实现的类`OnClickListener`。

**编辑：**

您可以使用 ID 资源来识别您的按钮。请参阅[此处](http://developer.android.com/guide/topics/resources/more-resources.html#Id)了解更多信息。您可以将这些 ID 分配给以编程方式生成的视图，并在您的 switch/case 语句中检查它们。

或者，正如@SmartLemon 所说，您可以只检查`if (v == b)`，然后您就不需要打扰ID。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T12:02:01.847

你有正确`id`的`button`设置`id_button`吗？

添加 onCreate 方法：

```
 b1.setOnClickListener(this); 
```

在 onClick 方法中使用该 ID，如下所示：

```
@Override
 public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId() == R.id.id_button)
    {
    Log.d("Button 0","Button 0 pressed);
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T12:05:38.970

当您在活动类中实现 onClickListener 时，您可以使用此关键字传递当前对象以注册组件的单击侦听器。

```
class MyActivity extends Activity implements OnClickListener{
     private static final int id_button = 0;

     public void onCreate(Bundle b){
        //add button
        ToggleButton b = new ToggleButton(this); 
        // Setting the parameters
        lefttextv.setLayoutParams(lleft); 
        b.setLayoutParams(bright);
        //customize button
        b.setId(id_button);
        System.out.println(id_button);
        b.setHeight(100);
        b.setWidth(200);
        // Adding to the RelativeLayout as a child
        layouth.addView(lefttextv);
        layouth.addView(b);
        b.setOnClickListener(this);
     }

     @Override
     public void onClick(View v) {
        // TODO Auto-generated method stub
       switch (v.getId()){
       case 0: Log.d("Button 0","Button 0 pressed);
            break;
       }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T12:05:40.837

改成这样。。

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    int i= b.getId();
    switch (v.getId())
    {
        case i:
            Log.d("Button 0","Button 0 pressed");
            break;
    }
} 
```

# php - DDoS 易受攻击的形式

> ID：12564617
> 
> 赞同：0
> 
> 时间：2012-09-24T11:57:30.257
> 
> 标签：php, security, ddos

我最近听说一个网站可以通过那些使用 2MB 数据（以字符为单位）提交表单的攻击者进行 DDoS，很多时候非常快。这个说法是真的吗？如果是这样，我可以在 PHP 中做些什么来防止这种情况发生，即设置表单数据限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:15:36.547

通过提交大量数据进行 DDoS 攻击需要在数据处理中存在一些漏洞，否则这并不合理，因为攻击者的上传速度成为一个更大的因素。[使用slowloris](http://ha.ckers.org/slowloris/)或 ping flood攻击会容易得多。

使用数据，过时的服务器可以通过使用变量解析问题（即哈希冲突攻击）（不仅是 PHP）进行 DDoS 攻击。在第 28 届混沌通讯大会上讨论，可以在[这里](http://www.youtube.com/watch?v=R2Cq3CLI6H8)观看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:43:17.453

可能有不止一件在后台发生的事情会导致这种 DoS。我假设 OP 正在使用 DDoS 而不仅仅是 DoS。无论如何，发生这种情况的原因是，代码在单个请求上花费了太多时间，日志记录过多（即服务器每次收到错误请求时都会写入日志）或在服务器端。而且我相信 2 MB 对于 POST 请求来说是一个中等大小。如果低于该值不会影响您的功能，请继续减少它。

在这里查看我的问题，这是相同的：[https ://serverfault.com/questions/413718/tomcat-denial-of-service-due-to-large-packets](https://serverfault.com/questions/413718/tomcat-denial-of-service-due-to-large-packets)

# python - 如何一起使用 zc.buildout 和 setup.py？

> ID：12564619
> 
> 赞同：1
> 
> 时间：2012-09-24T11:57:40.287
> 
> 标签：python, package, buildout, setup.py

我使用 zc.buildout 来开发我的项目并下载依赖项（使用-site-packages 是`off`）。

我想在运行它之前将我的项目作为一个包安装在目标系统上。为此，我制作了 setup.py。

我是否需要再次重复 setup.py 中的依赖项列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:01:12.237

`zc.buildout` *依赖*于您的包 setup.py，因此如果您的包有依赖项，请在列表中`setup.py` `install_requires`列出它们。

仅在您的构建配置中列出这些依赖项以将版本固定在一个`versions`部分中。

所以，安装一个简单的鸡蛋`foo`，它依赖于`bar`and `baz`：

```
[buildout]
parts = foo

[foo]
recipe = zc.recipe.egg
eggs = foo 
```

鸡蛋在哪里`setup.py`有一个条目。Buildout 将负责安装并为您服务，而无需明确列出。`foo``install_dependencies = ['bar', 'baz']``bar``baz`

固定版本号：

```
[buildout]
parts = foo
versions = versions

[foo]
recipe = zc.recipe.egg
eggs = foo

[versions]
foo = 1.2.1
bar = 0.2
baz = 3.0b1 
```

# java - Android前台服务失去上下文

> ID：12564620
> 
> 赞同：0
> 
> 时间：2012-09-24T11:57:41.737
> 
> 标签：java, android, service, multitasking, foreground

我在理解我创建的服务生命周期的情况时遇到了一点问题。我的应用程序声明并使用服务“LocalisationService”，其目标是启动位置侦听器并将更新的位置添加到数组中。

就那么简单。该服务在前台运行。

问题是，如果我通过任务切换器或 Eclipse 手动终止我的应用程序，该服务将保留（GPS 和通知在通知区域中）。没关系，这就是我想要的，如果我点击通知，它将带我回到我的应用程序保存状态。但是现在的问题是，如果我通过单击图标而不是服务通知来启动应用程序，它将从头开始启动应用程序。但它应该将应用程序恢复到最新状态不是吗？就像我点击了服务通知一样。

我像这样启动服务：

```
Intent i = new Intent(this, LocalisationService.class);
startService(i); 
```

这是服务的代码：

```
public class LocalisationService extends Service {

private LocationManager locationManager;
private LocationListener locationListener;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Notification notification = new Notification(R.drawable.iconsmall,
            "Notification text", System.currentTimeMillis());
    notification.flags |= Notification.FLAG_ONGOING_EVENT;
    Intent i = new Intent(this, RouteActivity.class);

    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent pi = PendingIntent.getActivity(this, 0, i, 0);

    notification.setLatestEventInfo(this, "Notification title",
            "notification message)", pi);
    startForeground(1337, notification);
    startListenLocation();
    return (START_NOT_STICKY);
}

@Override
public void onDestroy() {
    stopListenLocation();
    stopForeground(true);
}

public void startListenLocation() {
    locationManager = (LocationManager) getApplicationContext()
            .getSystemService(Context.LOCATION_SERVICE);
    locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            CurrentRouteManager.getSharedManager().updateWithLocation(
                    location);
        }

        public void onStatusChanged(String provider, int status,
                Bundle extras) {

        }

        public void onProviderEnabled(String provider) {

        }

        public void onProviderDisabled(String provider) {

        }

    };
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
            200, locationListener);
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 0, 200, locationListener);
}

public void stopListenLocation() {
        locationManager.removeUpdates(locationListener);
} 
```

如果我杀死应用程序然后通过服务重新启动它，它将调用 onStartCommand(); 再次。此外，似乎我失去了与位置侦听器的链接，当我在重新启动后销毁服务时，通知图标消失但 GPS 图标没有。

编辑：这是我的清单文件中有趣的部分关于启动服务的活动的部分

```
 <activity
        android:name="com.wayzup.activity.RouteActivity"
        android:screenOrientation="portrait"
        android:launchMode="singleTop" >
    </activity> 
```

关于我的服务的部分

```
 <service android:name="com.wayzup.services.LocalisationService" >
        </service> 
```

# oracle - oracle listener 不支持服务

> ID：12564623
> 
> 赞同：1
> 
> 时间：2012-09-24T11:57:52.173
> 
> 标签：oracle, listener

我的 Oracle 实例有问题。

在命令提示符下运行 lsnrctl stat 时出现以下错误。我什至确认 Oracle 服务正在运行。

侦听器不支持任何服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:26:31.787

我假设平台是 Windows，Oracle 版本是 11g。当 Oracle 数据库实例启动时，它会尝试将自己注册到默认侦听器或在 init 参数中注册为 local_listener 的侦听器。你能做的是

*   确保您的 local_listener 参数指向您的侦听器
*   确保您的侦听器在 localhost 端口 1521 上运行（使用 listener.ora 文件）

这是数据库使用动态侦听器的时候。您还可以通过在 listener.ora 文件中输入实例详细信息来使侦听器成为静态侦听器。关于 listener.ora 的文档可在此处找到[Oracle Net Listener Parameters (listener.ora)](http://docs.oracle.com/cd/E11882_01/network.112/e10835/listener.htm#NETRF008)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:33:49.157

在创建数据库后创建侦听器时，我们需要显式注册我们的实例。

尝试：

通过启动来启动数据库并通过 lsnrctl status 检查侦听器状态，如果您的实例正在运行，则意味着 pmon 已完成向侦听器本身注册您的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-14T20:24:48.143

就我而言，这很容易 - 出于某种原因，重新启动我的笔记本电脑后，服务停止工作。所以，Run > services > start OracleService 帮助启动了监听器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-26T11:26:13.060

我在安装了 CentOS 8 的最新 Oracle 19c 版本时遇到了这个问题。

所以这个 Oracle 数据库实例存在一个错误。

**会发生什么：** 当您安装 ORACLE DB 时，它会自动创建带有实例的侦听器。问题存在于 Linux 的 Hierarchy File System 以及权限如何在 Sudo 用户组和非 oracle 用户之间分配。

**你必须做的：**

好的，要解决这个问题，你必须打开你的 bash 配置文件

1.  `***nano ~/.bash_profile***`
    这相当于 Windows 中的环境变量。

2.  在编辑器中写入文本：***export ORACLE_HOME=/u01/app/oracle/product/{oracle-version}/dbhome_1***

    保存并退出

3.  执行：***export ORACLE_HOME=/u01/app/oracle/product/{oracle-version}/dbhome_1***

4.  测试环境变量： ***Echo $ORACLE_HOME*** -- 应该显示结果

5.  执行***chmod 777 /home***

6.  执行***chown -R oracle /home***

7.  打开终端 ***su oracle && cd /u01/app/oracle/product/{oracle-version}/dbhome_1/bin***

8.  使用 oracle 帐户执行 ***./lsnrctl start*** - 它应该在没有服务的情况下运行

9.  执行：***su {root 帐户} && sudo ./dbstart***

    ```
     it should run run with 1 or 2 error.. its fine as long as it doesn't say "ORACLE_HOME is not set" 
    ```

10.  返回执行： ***su oracle && ./lsnrctl status*** with non root account

就是这样..它现在应该与您的服务和处理程序连接，应该提供要连接的数据库名称的实例。您可以在安装过程中使用**sys 作为 sysdba 和密码**来登录数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-12T09:19:21.237

启动侦听器服务后，我必须等待 60 秒，然后服务才会显示为正在运行。因此，如果您输入“lsnrctl stop”，然后输入“lsnrctl start”，您可能需要等待一分钟，“lsnrctl status”才会显示您的侦听器服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T19:11:26.100

这个错误的解决方法很简单，首先我们来了解一下为什么会出现这个错误。基本上有两个原因：

1）您的数据库和服务名称在 Oracle 环境中设置不正确，它应该在任何地方都相同检查以下参数值

```
-ORACLE_SID in oracle environment.
-Check Database Instance name.
-SID_NAME in tnsnames.ora file.
-SERVICE_NAME in listener.ora file. 
```

2) 主机名/IP 地址缺失、不正确或拼写错误，请检查以下内容。

```
-Check the IP ADDRESS in /etc/hosts file.
-It should be same in listener.ora and tnsnames.ora file
-And it should be able to ping from the local and remote server. 
```

现在看到我也遇到了同样的问题并解决了：

请访问此 StackOverflow 链接： [https ://stackoverflow.com/a/45065640/6332029](https://stackoverflow.com/a/45065640/6332029)

我希望它会有所帮助，谢谢！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-25T10:00:33.467

I did check all the things but could not find the cause. So I re-installed the Oracle and using that now.

# iphone - 如何在有关使用按钮的 iPhone 帮助页面中创建气泡和箭头？

> ID：12564627
> 
> 赞同：4
> 
> 时间：2012-09-24T11:58:10.830
> 
> 标签：iphone, helper, drawrect

今天的大多数应用程序都提供教程，教用户如何使用应用程序中的按钮。这个帮助页面通常是黑色的，带有一点 alpha 值（所以只有背景是半可见的），带有一个气泡框，其中包含定义控件的文本和指向相应组件的箭头。

这是示例图像..（来自应用程序[MyThings](http://itunes.apple.com/in/app/mythings-for-iphone/id537678529?mt=8)）

这是正常页面

![在此处输入图像描述](../Images/5a0b8009738486a1dafc0dc19d1e599d.png)

如果您从下到上滑动，帮助视图将显示为..

![在此处输入图像描述](../Images/25a7cf89c5c22bc31ea8647e187e1bb5.png)

这是我的疑问：

*   哪一个最适合在此帮助视图中创建图像和文本？使用 Core Graphics 或简单地将 UIImageView 与 png 图像一起绘制图像和文本？哪一个是高效的？

*   用现成的 png 图片实现 UIImageView 是没有问题的。据我所知，这里的问题是图像文件大小和加载时间。如果我们考虑绘图方法，我的脑海中关于以下问题的事情。

*   画一个长方形就是这么简单。（[参考这里](https://stackoverflow.com/questions/7451852/how-to-draw-a-rectangle-in-objective-c)）。但是如何绘制一个带有弯曲角的矩形呢？是否有任何功能可以处理这种情况？

*   然后是指向相应组件的箭头。我们如何找到应该指向的确切点？（直到 iPhone 4S，我希望没有问题，iPhone 5 有不同的高度）

*   如何从矩形中的特定位置绘制这个指针？

有任何想法吗？

只是糊涂！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:09:30.480

在你的情况下，我会参考可调整大小和可重复使用的图像。我的应用程序中也有许多覆盖屏幕，我最终为 uilabel 生成了 5 6 个通用项目箭头、标签背景和矩形背景图像。

我知道绘制矩形很容易，但有时可能只是超载。

如果要更改这些箭头的方向，可以将图层转换应用于 UIImageview，如下所示

```
 arrowIamgeView.transform = CGAffineTransformMakeRotation(-M_PI / 20); 
```

对于矩形的圆角，我假设您可以使用具有特定背景颜色的文本字段并设置其图层的cornerradius 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:22:25.670

*   恕我直言，用 CG 绘制气泡和箭头更好。即使您完全更改应用程序（例如，如果您正确地将它们绘制为指向按钮的中心），它也会起作用。对于图像，您需要为不同的显示分辨率和比例准备多个副本。此外，如果您更改任何内容，则需要更新箭头。

*   我没有看到任何性能缺陷。这两种方法都会非常快速地绘制气泡。另外，认为您可以缓存 CG 生成的图像以供将来使用。

*   请参阅这些问题以了解如何绘制气泡：

    *   [如何在 iPhone 上画出“讲话泡泡”？](https://stackoverflow.com/a/4444039/143097)
    *   [如何使用 iPhone 中的核心图形制作思想泡泡](https://stackoverflow.com/a/10060751/143097)
*   使用每个气泡指向的按钮中心似乎是合乎逻辑的。您的绘图方法需要知道箭头指向的位置和当前方向（如果应用程序旋转）。应考虑其他气泡，避免重叠。您可以将空间划分为行和列，并为每个气泡分配*可用空间。*

*   为了更好的用户体验，这些气泡不应该*消耗*水龙头。如果在气泡可见时点击按钮，则应执行预期的操作（而不是仅仅隐藏气泡并需要第二次点击）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:19:50.547

最后我做到了！！

根据我一天的经验，我知道有三种方法可以处理这种情况。

*   只需将所需的图像创建为 png 文件，然后使用 UIImageView 来显示。（但请记住，您应该拥有具有不同分辨率的相同图像。这会增加您的应用程序大小）。

*   第二种方法是，通过创建标签、文本字段等来显示气泡（或者可能是一个矩形）。带有箭头图像。您可以简单地变换图像以更改箭头的指向位置。（正如 Ilker Baltaci 在之前的回答中所说）。

*   第三种方式是通过 Core Graphics。你可以在这里画任何你想要的东西。据我所知，通过初始化/分配/保留标签和文本字段来增加应用程序的大小或增加内存消耗，我们可以通过 Core Graphics 进行尝试。

我想在三个视图中实现此帮助屏幕工具。对于三个屏幕，我可以使用三种方法中的任何一种，因为如果我们将它用于很少需要的情况，则与性能没有太大区别。但是我尝试了第三种方式，因为我真的对Core Graphics一无所知。所以只是为了学习。。

**我面临的问题**：

*   箭头应该指向按钮的中心（或者可能是按钮的顶部）。所以找到这个确切的位置很复杂。我只在我的应用程序的 3 个页面中使用了此功能。每页最多包含 4 个图标来描述。所以我只是硬编码了这些值（我的另一个幸运是，该应用程序不支持横向模式）。但是，如果你想在这么多页面上使用这个特性，你应该定义一些数组和一个方法，通过参考它们的原点、高度和宽度、等等来计算图标的中心来找到图标的中心。

*   另一个问题是，您应该确保气泡不会在任何地方重叠。在这里，我们还需要一个全局方法来找到每个气泡的位置。气泡的大小取决于要放置在其中的文本大小。这是一个更复杂的问题，对于仅 3 个屏幕，我不会定义一个包含数百次计算的全局方法。*所以我再次参考self.view*对每个气泡的原点、高度和宽度进行了硬编码

**   最后但并非最不重要的......箭头！箭头的高度可能随气泡的位置而变化。气泡的宽度也可能随高度而变化。此外，您应该知道箭头指向按钮的气泡的边和点。如果您已经在脑海中修复了气泡的位置，那么这些对您来说根本不是问题..：P* 

 *现在让我们来编码部分，

```
- (void) createRect:(CGRect)rect xPoint:(float)x yPoint:(float)y ofHeight:(float)height ofWidth:(float)width toPointX:(float)toX toPointY:(float)toY withString:(NSString *)helpString inDirection:(NSString *)direction
{
    float distance = 5.0;
    float widthOfLine = 5.0;
    float arrowLength = 15.0;

    //Get current context

    CGContextRef context = UIGraphicsGetCurrentContext();

    //Set width of border & colors of bubble

    CGContextSetLineWidth(context, widthOfLine);
    CGContextSetStrokeColorWithColor(context, [[UIColor darkGrayColor] CGColor]);
    CGContextSetFillColorWithColor(context, [[UIColor colorWithRed:0 green:0 blue:0 alpha:0.9] CGColor]);

    CGContextBeginPath(context);
    CGContextMoveToPoint(context, x, y);

    CGContextAddLineToPoint(context, x+width, y);
    CGContextAddQuadCurveToPoint(context, x+width, y, x+width+distance, y+distance);

    CGContextAddLineToPoint(context, x+width+distance, y+distance+height);
    CGContextAddQuadCurveToPoint(context, x+width+distance, y+distance+height, x+width, y+distance+height+distance);

    CGContextAddLineToPoint(context, x, y+distance+height+distance);    
    CGContextAddQuadCurveToPoint(context, x, y+distance+height+distance, x-distance, y+distance+height);

    CGContextAddLineToPoint(context, x-distance, y+distance);
    CGContextAddQuadCurveToPoint(context, x-distance, y+distance, x, y);

    CGContextDrawPath(context, kCGPathFillStroke);

    //Draw curvely arrow from bubble to button (but without arrow mark)

    CGContextBeginPath(context);
    CGContextSetLineWidth(context, 5.0);
    CGContextSetStrokeColorWithColor(context, [[UIColor whiteColor] CGColor]);

    CGPoint startPoint = CGPointMake(x+(width/2.0), y+distance+distance+height);

    CGPoint endPoint = CGPointMake(toX, toY);

    CGContextMoveToPoint(context, startPoint.x, startPoint.y+5.0);

    if ([direction isEqualToString:@"left"])
    {
        CGContextAddCurveToPoint(context, startPoint.x, startPoint.y+5.0, endPoint.x, endPoint.y, toX-10, toY);
    }

    else
    {
        CGContextAddCurveToPoint(context, startPoint.x, startPoint.y+5.0, endPoint.x, endPoint.y, toX+10, toY);
    }

    CGContextStrokePath(context);

    //Draw the arrow mark

    CGContextBeginPath(context);
    CGContextSetLineWidth(context, 5.0);
    CGContextSetStrokeColorWithColor(context, [[UIColor whiteColor] CGColor]);

    if ([direction isEqualToString:@"left"])
    {
        CGContextMoveToPoint(context, toX-10.0, toY-arrowLength);

        CGContextAddLineToPoint(context, toX-10.0, toY);
        CGContextAddLineToPoint(context, toX-10.0+arrowLength, toY);
    }

    else
    {
        CGContextMoveToPoint(context, toX+10.0, toY-arrowLength);

        CGContextAddLineToPoint(context, toX+10.0, toY);
        CGContextAddLineToPoint(context, toX+10.0-arrowLength, toY);
    }

    CGContextStrokePath(context);

    .......
    .......
} 
```

您可以从这样的方法中调用此方法`drawRect:`..

```
[self createRect:rect xPoint:30.0 yPoint:250.0 ofHeight:100.0 ofWidth:100.0 toPointX:48.0 toPointY:430.0 withString:@"xxxxxxx" inDirection:@"left"];

[self createRect:rect xPoint:160.0 yPoint:100.0 ofHeight:100.0 ofWidth:100.0 toPointX:260.0 toPointY:420.0 withString:@"yyyyyyy" inDirection:@"right"]; 
```

最终的图像将是这样的..

![在此处输入图像描述](../Images/aeec6008aed5010d1b695ace7d772cfb.png)

我跳过了三角形箭头，因为这种箭头类型会产生手写效果。

感谢 @djromero 和 Ilker Baltaci 提供的宝贵答案。

我的下一个困惑是关于绘图文本！！！！！！:P*

# java - 从 Google Calendar API 访问数据的问题

> ID：12564638
> 
> 赞同：1
> 
> 时间：2012-09-24T11:58:48.163
> 
> 标签：java, eclipse, google-api, google-calendar-api, google-api-java-client

我想通过**java** [google calendar API](https://developers.google.com/google-apps/calendar/) (V3.0) 获取用户日历事件（条目）。不幸的是，我找不到任何工作示例（教程）或成功运行任何东西。到目前为止我做了什么：

*   我检查了[APIs Explorer](http://code.google.com/apis/explorer/#_s=calendar&_v=v3)并通过谷歌网站和我的开发者 api 密钥成功运行了一些请求（结论：我的 API 访问在理论上有效）。
*   我尝试遵循“[您的第一个应用程序](https://developers.google.com/google-apps/calendar/firstapp)”指南。调用 API 有两种方法：REST 或客户端库。我想使用 java 客户端库。
*   所以我尝试设置[客户端库](https://developers.google.com/google-apps/calendar/setup)：下载 jars 并将它们添加到构建路径（在 eclipse 中） - 因为我通常使用外部 jars 执行此操作。我现在可以毫无错误地导入类。
*   在这里，如果我想使用 java 客户端库而不是直接通过 REST 访问它，该指南会突然结束……
*   从这里我完全不知道该怎么做。我在网上找到了很多示例（通常用于 v1.0 或 v2.0 API），但无法运行其中任何一个。（在 Google Developers 上，我找到[了几个示例](http://code.google.com/p/google-api-java-client/wiki/APIs#Calendar_API)，但都适用于 Android 或 AppEngine。没有任何效果......）

你们中有人知道通过 Java 库（Google Code API）获取用户事件的非常简单的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:19:07.233

我自己解决了。对于所有想要开始在 Eclipse 中使用 Google API 的人。我强烈推荐使用 Maven，它对包含正确的 jars 有很大帮助（实际上，它会为你做这件事）。然后尝试此示例代码（[链接](https://developers.google.com/google-apps/calendar/instantiate)）开始（OAuth2 身份验证）。您还需要一个来自 google 的开发帐户和 API 密钥：[link](https://accounts.google.com/ServiceLogin?service=devconsole&passive=1209600&continue=https://code.google.com/apis/console/&followup=https://code.google.com/apis/console/)。然后你就可以开始编码了：）享受吧！

# javascript - 如何使用 jQuery 知道 Scroll 事件已完成

> ID：12564640
> 
> 赞同：5
> 
> 时间：2012-09-24T11:58:49.943
> 
> 标签：javascript, jquery, scroll

> **可能重复：**
> [Javascript：用户完成滚动后执行操作](https://stackoverflow.com/questions/4289473/javascript-do-an-action-after-user-is-done-scrolling)

该`Scroll`事件在用户开始滚动页面时触发，对吗？那怎么知道他是否完成了？我想在滚动完成后调用一个函数。有人知道吗？

谢谢！

PS 请使用 jQuery，但纯 JS 也可以。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T12:03:57.150

您可以使用`setTimeout`. 您可以根据您的要求更改超时（我使用 100）值。

```
var timeoutId;
$(selector).scroll(function(){
  if(timeoutId ){
         clearTimeout(timeoutId );  
  }
  timeoutId = setTimeout(function(){
   // your code 
  }, 100);

}); 
```

# sql - 如何获取分层数据

> ID：12564644
> 
> 赞同：1
> 
> 时间：2012-09-24T11:58:56.447
> 
> 标签：sql, hierarchical-data

我要执行一个SQL语句，有两个表

```
Table Name      Description
*********      *********
H_person    Employee Data
Modelorg    Position Data 
```

我想写一个显示“谁连接到谁”的sql。在 h_person 表中

```
Fıeld Name      Description
*********      *********
p_no        Employee ID
P_ad        Employee Name
P_soyad Employee Surname
P_pzsyn Employee Position ID 
```

在 Modelorg 表中

```
Fıeld Name      Description
*********      *********
Pozkod      Position ID
Pozad       Position Name
USTPOZKOD   the upper position (POZKOD connected to USTPOZKOD) 
```

USTPOZKOD同时也是POZKOD，有层次联系。

1.  我想形成一份报告，显示人员 ID、姓名、姓氏、职位名称、上层职位名称、经理 ID 和经理姓名-姓氏（持有上层职位 ID）。

2.  此外，有时 Upperpostion 可能为空，并且在执行报告时，它将为空。我想加一条规则，如果upperposition为null，请带2级上级经理

    在 H_person 表第一个数据 ***** **** ***** **** P_no=14556 P_ad=John p_Soyad= Onel P_Pzsyn= 72878 /Account Specialist 第二个数据 P_no=14656 P_ad=Sara p_Soyad= Yildiz P_Pzsyn= 5455 /Account Manager ***** **** ***** **** In Modelorg Table Pozkod=72878 Pozad=客户专家 Ustpozkod=5455（客户经理） USTPOZKOD 同时也是一个 pozkod。

3.  选择 p_no、p_ad、p_soyad、Pozad、USTPOZKOD（我们将 pozkod 连接到 USTPOZKOD，我想从 h_person、modelorg 带来“谁持有这个 USTPOZKOD(NAME, Surname)。

4.  USTPOZKOD 也等于 POZKOD 因为有人担任这个职位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:02:53.040

您需要使用[公用表表达式 (CTE)](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)来构建递归查询。

一个例子：

```
WITH #rec AS
(
    SELECT ID, ParentID
    FROM RecTable
    WHERE ParentID = 0

    UNION ALL

    SELECT R.ID, R.ParentID
    FROM RecTable R
    INNER JOIN #rec P ON R.ParentID = P.ID
)
SELECT *
FROM #rec 
```

# unix - 从不同的用户运行 Puppet 管理的 redis

> ID：12564645
> 
> 赞同：0
> 
> 时间：2012-09-24T11:58:56.383
> 
> 标签：unix, redis, puppet

目前我正在从 root 用户运行 puppet。我想使用 puppet 管理 Redis。我找到了 puppet 的 redis 模块。我想使用“redis”用户运行 redis-server。那么在 puppet 中是否可以使用不同的用户启动命令/进程/脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:00:44.080

完成此操作的最佳方法是确保您的服务管理框架使用正确的用户启动服务。

如果您想使用 Puppet 直接启动服务，这不是最佳实践，那么您可以使用 exec 资源类型的 user 参数。exec 资源类型的文档位于：[http ://docs.puppetlabs.com/references/latest/type.html#exec](http://docs.puppetlabs.com/references/latest/type.html#exec)

# xpages - 在 xe:dataView 如何编写摘要方面以显示/隐藏详细方面？

> ID：12564647
> 
> 赞同：1
> 
> 时间：2012-09-24T11:59:03.157
> 
> 标签：xpages, lotus-domino, xpages-extlib

默认情况下，摘要列添加一个链接以打开在 dataView 的 pageName 属性中指定的基础文档。我有一个用例，我想将应用程序保留在 dataView 中，而不是打开任何“documentXPage”。

我知道这可以重复完成，但是 dataView 的其他部分/功能可以很好地用于应用程序，所以理想情况下我只是希望覆盖 summaryColumn 的默认行为。

为了覆盖链接行为，我将摘要列添加为方面，而不是属性，如下所示：

```
<xp:this.facets>
    <xp:panel xp:key="summary" id="summaryPanel">
        <xp:text escape="false" id="computedField3">
            <xp:this.value><![CDATA[#{javascript:
var custName = viewEntry.getColumnValue("Customer");
return "<h4>"+custName+"</h4>"}]]>
                   </xp:this.value>
        </xp:text>
    </xp:panel>
    <xp:panel xp:key="detail" id="detailsPanel" readonly="true">
            <xp:text escape="true" id="computedField1">
            <xp:this.value><![CDATA[{javascript:
viewEntry.getDocument().getItemValueString("Address") + ",      " +
viewEntry.getDocument().getItemValueString("City") + ", " +
viewEntry.getDocument().getItemValueString("State")}]]>
                    </xp:this.value>
            </xp:text>
   </xp:panel>
<\xp:this.facets> 
```

如何对摘要方面进行编码以在单击时显示/隐藏详细信息方面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:12:54.333

这取决于设置 detailsOnClient。

如果设置为 true，您应该能够使用 CSJS 将显示设置为“block”或“none”，并且您应该能够使用 getComponent("dataView1") 计算出需要更改的元素的 ID .getRowIndex() （假设您的 dataView 的 ID 为 dataView1）

如果 detailsOnClient 为 false，这也是执行相同操作的关键。以下代码将起作用。

```
var idex=getComponent("dataView1").getRowIndex();
getComponent("dataView1").toggleDetailVisible(@Text(idex+1)); 
```

您基本上得到了当前 rowIndex 的句柄（从 0 开始），添加 1 以使行切换并将其转换为文本。DataView 控件有一个方法 toggleDetailVisible(String) 用于进行切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T19:31:44.907

正如@Mikael 在 Domino 9 中所述，toggleDetailVisible 函数似乎不起作用。根据 Brad Balassaitis 的建议，我通过获取 twistie 对象的句柄并单击它来使其工作。

```
var myid = "#{id:link3}";
var parts = myid.split(":");
var outparts = [];
for(var idx=0; idx<parts.length-1; idx++){
    outparts[idx] = parts[idx];
}
outparts[outparts.length-1] += "_shimg";
var bid = outparts.join(":");

var btn = document.getElementById(bid);
btn.click(); 
```

# mysql - 在 MySQL 查询中获取意外的行数

> ID：12564649
> 
> 赞同：1
> 
> 时间：2012-09-24T11:59:12.377
> 
> 标签：mysql

我正在使用 JAVA 中的 JDBC 连接对 MySQL 数据库执行以下两个查询。

1：

```
SELECT count(*) 
FROM transaction 
WHERE 
    (entry_time between STR_TO_DATE('2012-09-24 00:00:00','%Y-%m-%d %k:%i:%s') 
    AND STR_TO_DATE('2012-09-24 23:59:59','%Y-%m-%d %k:%i:%s')) 
```

2：

```
SELECT * 
FROM transaction 
WHERE 
    (entry_time between STR_TO_DATE('2012-09-24 00:00:00','%Y-%m-%d %k:%i:%s') 
    AND STR_TO_DATE('2012-09-24 23:59:59','%Y-%m-%d %k:%i:%s')) 
```

当我不断搜索时，我每次都会得到不同的记录。例如

1.  68
2.  72
3.  58
4.  69

我在日志文件中打印了输出，发现对于第一个查询，它带来了数据库中实际的值。当执行第二个查询并且有一些过程正在进行时，它会给出不同的值。为什么会这样？

我的第二个问题是第二个查询，我也得到了 '2012-09-23' 的值。但根据指定的范围，它不应该带它。

我正在使用 MySQL 5.1 和 JAVA 1.6.0_14。这是一个 Web 应用程序，现在位于生产服务器上。我无法调试的地方。:( 问题仅在生产服务器上发生，测试设置工作正常。感谢任何帮助。

# ruby-on-rails - 访问贝宝响应的数组值

> ID：12564653
> 
> 赞同：0
> 
> 时间：2012-09-24T11:59:27.257
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, hash

和`logger.info response.inspect`

我得到：

```
#<ActiveMerchant::Billing::AdaptivePaymentResponse:0x0000000599dc48 @json="{\"responseEnvelope\":{\"timestamp\":\"2012-09-24T04:34:36.888-07:00\",\"ack\":\"Failure\",\"correlationId\":\"22d02b45ed143\",\"build\":\"3692562\"},\"error\":[{\"errorId\":\"540031\",\"domain\":\"PLATFORM\",\"subdomain\":\"Application\",\"severity\":\"Error\",\"category\":\"Application\",\"message\":\"You do not have permission to issue this refund\"}]}", @response=#<Hashie::Rash error=[#<Hashie::Rash category="Application" domain="PLATFORM" error_id="540031" message="You do not have permission to issue this refund" severity="Error" subdomain="Application">] response_envelope=#<Hashie::Rash ack="Failure" build="3692562" correlation_id="22d02b45ed143" timestamp="2012-09-24T04:34:36.888-07:00">>, @xml_request="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<RefundRequest>\n  <requestEnvelope>\n    <detailLevel>ReturnAll</detailLevel>\n    <errorLanguage>en_US</errorLanguage>\n  </requestEnvelope>\n  <actionType>REFUND</actionType>\n  <payKey>AP-2JV97573KK140871P</payKey>\n  <currencyCode>USD</currencyCode>\n  <feesPayer>EACHRECEIVER</feesPayer>\n</RefundRequest>\n", @request={"RefundRequest"=>{"requestEnvelope"=>{"detailLevel"=>"ReturnAll", "errorLanguage"=>"en_US"}, "actionType"=>"REFUND", "payKey"=>"AP-2JV97573KK140871P", "currencyCode"=>"USD", "feesPayer"=>"EACHRECEIVER"}}, @action="Refund"> 
```

`response.ack`我得到`"Failure"`

如果我写`logger.info response.error.inspect`，我会得到：

```
[#<Hashie::Rash category="Application" domain="PLATFORM" error_id="540031" message="You do not have permission to issue this refund" severity="Error" subdomain="Application">] 
```

例如，我如何访问或获得`error_id`价值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:18:27.847

作为`response.error`一个数组，您必须对其进行迭代循环或简单地执行以下操作

```
response.error[0].error_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:03:27.293

只需通过以下代码：

```
response.error.error_id 
```

作为参考，请看这里：[github 上的 rash](https://github.com/tcocca/rash)

简而言之，Rash 是为了方便而设计的。:)

# jquery - 在背景图像上滚动内容？

> ID：12564655
> 
> 赞同：0
> 
> 时间：2012-09-24T11:59:29.630
> 
> 标签：jquery, iphone, html, css, mobile

我正在使用 jQuery Mobile、HTML 和 CSS 为移动设备制作网站，并且我刚刚设置了背景图片。我希望图像在滚动其余内容时保持不变。我想我应该使用它的“背景附件：固定”，它可以在我的电脑上使用，但不能在我的手机上使用。在我的手机上，内容与背景图像一起滚动，这不是我想要的。我在手机上的浏览器是 Safari，因为它是 iPhone，在电脑上我使用 Opera。有谁知道怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:06:14.993

`fixed`不会在手机上工作。这里是详细解释的链接，以使其在移动设备上工作[http://www.developerdrive.com/2012/01/developing-a-responsive-website-background-images/](http://www.developerdrive.com/2012/01/developing-a-responsive-website-background-images/)

你可以试试`background-size: cover;`

# objective-c - 带有opengl视图的“renderincontext”问题

> ID：12564658
> 
> 赞同：6
> 
> 时间：2012-09-24T11:59:35.727
> 
> 标签：objective-c, ios

我有一个问题，openGL 视图。我有两个 openGL 视图。第二个视图作为子视图添加到主视图。这两个 opengl 视图是在两个不同的 opengl 上下文中绘制的。我需要使用两个 opengl 视图来捕获屏幕。

问题是，如果我尝试在如下上下文中渲染一个 CAEAGLLayer：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(context, 1*(self.frame.size.width*0.5), 1*(self.frame.size.height*0.5));
CGContextScaleCTM(context, 3, 3);
CGContextTranslateCTM(context, abcd, abcd);

CAEAGLLayer *eaglLayer = (CAEAGLLayer*) self.myOwnView.layer;
[eaglLayer renderInContext:context]; 
```

这没用。如果我看到上下文（给定输出为图像），opengl 层中的内容丢失。但是我在输出图像中找到了附加到视图的工具栏和 2d 图像。我不确定这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T01:39:20.730

我有一个类似的问题，并找到了一个更优雅的解决方案。基本上，您将 CAEAGLLayer 子类化，并添加您自己的 renderInContext 实现，它只是要求 OpenGL 视图使用 glReadPixels 呈现内容。美妙之处在于，现在您可以在层次结构中的任何层上调用 renderInContext，结果是一个完整的、完美的屏幕截图，其中包括您的 OpenGL 视图！

我们在子类 CAEAGLLayer 中的 renderInContext 是：

```
- (void)renderInContext:(CGContextRef)ctx
{
    [super renderInContext: ctx];
    [self.delegate renderInContext: ctx];
} 
```

然后，在 OpenGL 视图中，我们替换 layerClass 以便它返回我们的子类而不是普通的 CAEAGLLayer：

```
+ (Class)layerClass
{
    return [MyCAEAGLLayer class];
} 
```

我们在视图中添加一个方法来实际将视图的内容渲染到上下文中。请注意，此代码必须在您的 GL 视图被渲染之后，但在您调用之前运行，`presentRenderbuffer`以便渲染缓冲区将包含您的帧。否则，生成的图像很可能是空的（您可能会在此特定问题上看到设备和模拟器之间的不同行为）。

```
- (void) renderInContext: (CGContextRef) context
{
    GLint backingWidth, backingHeight;

    // Bind the color renderbuffer used to render the OpenGL ES view
    // If your application only creates a single color renderbuffer which is already bound at this point,
    // this call is redundant, but it is needed if you're dealing with multiple renderbuffers.
    // Note, replace "_colorRenderbuffer" with the actual name of the renderbuffer object defined in your class.
    glBindRenderbuffer(GL_RENDERBUFFER, _colorRenderBuffer);

    // Get the size of the backing CAEAGLLayer
    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &backingWidth);
    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &backingHeight);

    NSInteger x = 0, y = 0, width = backingWidth, height = backingHeight;
    NSInteger dataLength = width * height * 4;
    GLubyte *data = (GLubyte*)malloc(dataLength * sizeof(GLubyte));

    // Read pixel data from the framebuffer
    glPixelStorei(GL_PACK_ALIGNMENT, 4);
    glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data);

    // Create a CGImage with the pixel data
    // If your OpenGL ES content is opaque, use kCGImageAlphaNoneSkipLast to ignore the alpha channel
    // otherwise, use kCGImageAlphaPremultipliedLast
    CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, data, dataLength, NULL);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGImageRef iref = CGImageCreate(width, height, 8, 32, width * 4, colorspace, kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast,
                                    ref, NULL, true, kCGRenderingIntentDefault);

    CGFloat scale = self.contentScaleFactor;
    NSInteger widthInPoints, heightInPoints;
    widthInPoints = width / scale;
    heightInPoints = height / scale;

    // UIKit coordinate system is upside down to GL/Quartz coordinate system
    // Flip the CGImage by rendering it to the flipped bitmap context
    // The size of the destination area is measured in POINTS
    CGContextSetBlendMode(context, kCGBlendModeCopy);
    CGContextDrawImage(context, CGRectMake(0.0, 0.0, widthInPoints, heightInPoints), iref);

    // Clean up
    free(data);
    CFRelease(ref);
    CFRelease(colorspace);
    CGImageRelease(iref);
} 
```

最后，为了获取屏幕截图，您可以使用通常的方式使用 renderInContext。当然，美妙之处在于您不需要直接抓取 OpenGL 视图。您可以抓取 OpenGL 视图的其中一个超级视图，并获得一个组合屏幕截图，其中包括 OpenGL 视图以及它旁边或顶部的任何其他内容：

```
UIGraphicsBeginImageContextWithOptions(superviewToGrab.bounds.size, YES, 0);
CGContextRef context = UIGraphicsGetCurrentContext();
[superviewToGrab.layer renderInContext: context]; // This recursively calls renderInContext on all the sublayers, including your OpenGL layer(s)
CGImageRef screenShot = UIGraphicsGetImageFromCurrentImageContext().CGImage;
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T18:58:31.410

这个问题已经解决了，但我想指出 Idoogy 的答案实际上是危险的，对于大多数用例来说都是一个糟糕的选择。

*您可以使用现有的委托方法*来完成完全相同的事情，而不是继承 CAEAGLLayer 并创建一个新的委托对象。例如：

```
- (void) drawLayer:(CALayer *) layer inContext:(CGContextRef)ctx; 
```

是在基于 GL 的视图中实现的好方法。您可以使用 glReadPixels 以与他建议的方式相同的方式实现它：只需确保将视图上的 Retained-Backing 属性设置为 YES，这样您就可以随时调用上述方法，而不必担心它已被无效演示文稿。

子类化 CAEAGL 层与现有的 UIView / CALayer 委托关系混淆：在大多数情况下，在您的自定义层上设置委托对象将导致您的 UIView 被排除在视图层次结构之外。因此，代码如下：

```
customLayerView = [[CustomLayerView alloc] initWithFrame:someFrame];
[someSuperview addSubview:customLayerView]; 
```

将导致一种奇怪的、单向的超视图-子视图关系，因为 UIView 所依赖的委托方法不会被实现。（不过，您的超级视图仍将拥有自定义视图中的子图层）。

因此，与其继承 CAEAGLLayer，不如实现一些委托方法。Apple 在这里为您列出：[https ://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CALayerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012871](https://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CALayerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012871)

祝一切顺利，

山姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:37:00.080

我认为[http://developer.apple.com/library/ios/#qa/qa1704/_index.html](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)提供了你想要的。

# richtextbox - 想要我的单元格中的几种字体颜色

> ID：12564661
> 
> 赞同：0
> 
> 时间：2012-09-24T11:59:51.923
> 
> 标签：richtextbox, xtrareport

我正在创建一个新单元格 = new XRTableCell();

我将展示我的代码示例。即使我在“如果”中更改了它，我的单元格中总是以相同的颜色结束。

```
foreach (TaskTime tt in di.TaskTimes[i])
                    {
.....

TimeToAdd = ClassLibrary.Utils.GetTimeStringFromSec(tt.FromSec % 86400) + " - " + ClassLibrary.Utils.GetTimeStringFromSec(tt.UntilSec % 86400) + " (" + tt.Abbreviation+ ")";

                        if (taskTimeTextBox.Text.Length > 0)
                            taskTimeTextBox.Text += "\n";
                        taskTimeTextBox.Text += TimeToAdd;

if (tt.OnOtherCostDivision)
                            {
                                taskTimeTextBox.SelectionStart = taskTimeTextBox.Find(TimeToAdd);
                                taskTimeTextBox.SelectionFont = new Font("Calibri", 9, FontStyle.Italic);
                                taskTimeTextBox.SelectionColor = Color.Gray;
                            }
                            else
                            {
                                taskTimeTextBox.SelectionStart = taskTimeTextBox.Find(TimeToAdd);
                                taskTimeTextBox.SelectionFont = new Font("Calibri", 9, FontStyle.Italic);
                                taskTimeTextBox.SelectionColor = Color.Blue;
                            }

                richTxtObject.Rtf = taskTimeTextBox.Rtf;
                cell.Controls.Add(richTxtObject);
            }
            row.Cells.Add(cell); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:42:15.637

魂飞魄散！当我以这种方式“taskTimeTextBox.Text += xxxxxxxx”时没有工作。所以我制作了一个字符串列表，如果它是“onOtherCostDivision”，则保存我的文本。后来我不得不循环我的列表并查看最终的 taskTimeTextBox.Text 是否包含文本，因此我添加了颜色。

```
 foreach (var task in taskCostDivList)
                {
                    if (taskTimeTextBox.Text.Contains(task))
                    {
                        taskTimeTextBox.SelectionStart = taskTimeTextBox.Find(task);
                        taskTimeTextBox.Font = new Font("Calibri", 9, FontStyle.Italic);
                        taskTimeTextBox.SelectionColor = Color.Gray;
                    }
                    else
                    {
                        taskTimeTextBox.Font = new Font("Calibri", 9, FontStyle.Regular);
                        taskTimeTextBox.SelectionColor = Color.Black;
                    }
                } 
```

# java - 如何获得两个日期之间的差异

> ID：12564668
> 
> 赞同：1
> 
> 时间：2012-09-24T12:00:40.373
> 
> 标签：java, android

我必须计算两个日期之间的差异。这是我的代码：

```
 System.out.println("date1  "+date1);
        System.out.println("date2  "+date2);

        totalDifference=date2.getSeconds()-date1.getSeconds();

        System.out.println("Total Difference is"+totalDifference); 
```

我面临的问题是结果为0：

```
 09-24 17:24:53.839: I/System.out(9317): date1  Wed Aug 15 00:00:00 GMT+05:30 2012
 09-24 17:24:53.839: I/System.out(9317): date2  Mon Sep 24 17:24:00 GMT+05:30 2012
 09-24 17:24:53.839: I/System.out(9317): Total Difference is 0 
```

我做错了什么？

感谢大家的解决方案和其他宝贵的资源，也请帮助我解决这个问题。 **嘿，假设如果我输入 31st Aug 23:59:00 和下一个日期 1 September 00:02:00 ，我需要将记录显示为 1 天。请帮我做这个**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:09:33.000

getSeconds() 返回日期的第二个，所以在你的例子中，

日期 1 星期三 8 月 15 日 00:00:00 GMT **+** 05:30 2012

日期 2 周一 9 月 24 日 17:24:00 GMT **+** 05:30 2012

在这两种情况下，日期的第二个都是 0。如果你想要差异，你有一个例子

[Android/Java - 以天为单位的日期差异](https://stackoverflow.com/questions/3838527/android-java-date-difference-in-days)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:03:29.940

该`date.getSeconds()`方法返回该日期对象中的秒数。

在您的情况下，两个日期都有 00 秒，因此差异为 0。

您将不得不使用`date.getTime()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:00:46.233

Just see the code below an make small changes according to you.

```
package com.datediff;

import java.util.Calendar;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class DateDiffActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Calendar thatDay = Calendar.getInstance();
    thatDay.set(Calendar.DAY_OF_MONTH,24);
    thatDay.set(Calendar.MONTH,7); // 0-11 so 1 less
    thatDay.set(Calendar.YEAR, 2012);

    Calendar today = Calendar.getInstance();

    long diff = today.getTimeInMillis() - thatDay.getTimeInMillis(); 

    Toast.makeText(getApplicationContext(), diff+"", Toast.LENGTH_LONG).show();

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:08:44.597

[此处](http://www.roseindia.net/java/beginners/DateDifferent.shtml)给出了此方案的最佳示例。它包含类似的东西

```
Calendar calendar1 = Calendar.getInstance();
  Calendar calendar2 = Calendar.getInstance();
  calendar1.set(2007, 01, 10);
  calendar2.set(2007, 07, 01);
  long milliseconds1 = calendar1.getTimeInMillis();
  long milliseconds2 = calendar2.getTimeInMillis();
  long diff = milliseconds2 - milliseconds1;
  long diffSeconds = diff / 1000;
  long diffMinutes = diff / (60 * 1000);
  long diffHours = diff / (60 * 60 * 1000);
  long diffDays = diff / (24 * 60 * 60 * 1000);
  System.out.println("\nThe Date Different Example");
  System.out.println("Time in milliseconds: " + diff
 + " milliseconds.");
  System.out.println("Time in seconds: " + diffSeconds
 + " seconds.");
  System.out.println("Time in minutes: " + diffMinutes 
+ " minutes.");
  System.out.println("Time in hours: " + diffHours 
+ " hours.");
  System.out.println("Time in days: " + diffDays 
+ " days."); 
```

最初尝试用谷歌搜索你的问题:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T12:03:40.903

您可以使用`getTime()`方法 on`java.util.Date`以毫秒为单位获取日期，并使用它来找出两个`java.util.Date`变量之间的差异，以获得更精确的差异。

# google-cloud-storage - Google Cloud Storage 中充当“重定向”或“符号链接”的对象

> ID：12564669
> 
> 赞同：30
> 
> 时间：2012-09-24T12:00:53.547
> 
> 标签：google-cloud-storage

我希望将现有网站移至 Google Cloud Storage。但是，该现有网站过去曾多次更改其 URL 结构。这些更改当前由 Apache 处理：例如，URL /days/000233.html 重定向到 /days/new-post-name 和 /days/new-post-name 重定向到 /days/2002/01/01/new -职位名称。同样，/index.rss 重定向到 /feed.xml，依此类推。

有没有办法在 GCS 中标记一个对象，以便它充当同一个桶中另一个 GCS 对象的“符号链接”？也就是说，当我将网站配置添加到存储桶时，请求一个对象（理想情况下）会生成一个 301 重定向标头到另一个对象，或者（不太理想）将另一个对象的内容作为自己的内容提供？

我不想简单地在每个 URL 上复制对象，因为这会使我的存储空间增加三倍。我也不能在对象内容中使用元刷新标头，因为某些重定向对象不是 HTML 文档（它们是图像或 RSS 提要）。出于类似的原因，我无法使用 JavaScript 在 NotFound 404.html 中处理此问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-24T17:22:42.637

不幸的是，谷歌云存储目前不支持符号链接功能。这是一个好主意，值得考虑作为未来的功能。

# c# - 将vb代码转换为c#

> ID：12564674
> 
> 赞同：1
> 
> 时间：2012-09-24T12:01:10.037
> 
> 标签：c#, vb.net, vb6-migration

我使用 mobitek gsm 调制解调器，它使用的源代码是在 VB 中。现在我想将代码转换为 c#。我遇到问题的代码是`intModemStatus = SMS.ModemInit(frmModem.txtPort.Text, "")`。之后，代码将通过以下选择案例进行：

```
intModemStatus = SMS.ModemInit(frmModem.txtPort.Text, "")

    Select Case intModemStatus

        Case 0
            FrmModem.txtText.Text = "GSM Modem Not Connected!"
            '[VB - Module1] frmModem.txtText = "GSM Modem Not Connected!"
            Exit Sub

        Case 1
            FrmModem.txtText.Text = "CONNECTED!"
            '[VB - Module1] frmModem.txtText = "GSM Modem Connected!"
            Exit Sub

        Case 2
            FrmModem.txtText.Text = "PIN Required!"
            '[VB - Module1] frmModem.txtText = "PIN Required!"
            Exit Sub

        Case 3
            FrmModem.txtText.Text = "Incorrect PIN Entered! Warning after 3 tries of incorrect PIN entered, your SIM card will be blocked by TELCO!"
            '[VB - Module1] frmModem.txtText = "Incorrect PIN entered! Warning: after 3 tries of incorrect PIN entered, your SIM card will be blocked by TELCO!"
            Exit Sub

        Case 4
            FrmModem.txtText.Text = "Your SIM card is blocked by TELCO!"
            '[VB - Module1] frmModem.txtText = "Your SIM card is blocked by TELCO!"
            Exit Sub

        Case 5
            FrmModem.txtText.Text = "Your SIM card has problem!"
            '[VB - Module1] frmModem.txtText = "Your SIM card has problem!"
            Exit Sub

        Case Else
            FrmModem.txtText.Text = "GSM Modem Not Connected!"
            '[VB - Module1] frmModem.txtText = "GSM Modem Not Connected!"
            Exit Sub

    End Select 
```

我已将所有内容都转换为 c#，包括这样的开关盒：

```
int ModemStatus = sms.ModemInit(txtPort.Text, "");
        switch (intModemStatus)
        {
            case 0:

                txtText.Text = "GSM Modem Not Connected!";
                //[VB - Module1] frmModem.txtText = "GSM Modem Not Connected!"
                return;

                break;
            case 1:
                txtText.Text = "CONNECTED!";
                //[VB - Module1] frmModem.txtText = "GSM Modem Connected!"
                return;

                break;
            case 2:
                txtText.Text = "PIN Required!";
                //[VB - Module1] frmModem.txtText = "PIN Required!"
                return;

                break;
            case 3:
                txtText.Text = "Incorrect PIN Entered! Warning after 3 tries of incorrect PIN entered, your SIM card will be blocked by TELCO!";
                //[VB - Module1] frmModem.txtText = "Incorrect PIN entered! Warning: after 3 tries of incorrect PIN entered, your SIM card will be blocked by TELCO!"
                return;

                break;
            case 4:
                txtText.Text = "Your SIM card is blocked by TELCO!";
                //[VB - Module1] frmModem.txtText = "Your SIM card is blocked by TELCO!"
                return;

                break;
            case 5:
                txtText.Text = "Your SIM card has problem!";
                //[VB - Module1] frmModem.txtText = "Your SIM card has problem!"
                return;

                break;
            default:
                txtText.Text = "GSM Modem Not Connected!";
                //[VB - Module1] frmModem.txtText = "GSM Modem Not Connected!"
                return;

                break;
        } 
```

但是，我在使用此代码时遇到了问题`int ModemStatus = sms.ModemInit(txtPort.Text, "");`。它说

> 参数 1 无法将字符串转换为短字符串。mobitekSMSAPI5.ModemInit(short, string) 的最佳重载方法匹配有一些无效参数。

然后我试图改变`int ModemStatus = sms.ModemInit(txtPort.Text, "");`，但它说的一样。

要使用 mobitek gsm 调制解调器，我需要添加 MobitekSMSAPI5 的引用，我做到了。开关代码将确定调制解调器是否已连接。

我真的希望有人能加紧解决这个问题。我卡在中间，我不知道从哪里开始。任何形式的帮助表示赞赏。谢谢你。

这是我的错误：当我使用此代码时，它会出现：

```
 short port;
if (!short.TryParse(txtPort.Text, out port))
{
    throw new Exception("Failed to parse port");
    // or any other handling - depends on your needs
}

int ModemStatus = sms.ModemInit(port, ""); 
```

![在此处输入图像描述](../Images/d2e65845e20d1c4abacc9c910116450e.png)

现在，当我像下面这样更改代码时，它会出现不同的错误。

![在此处输入图像描述](../Images/09595028b8965b45f60be3521263a323.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T12:04:27.167

`sms.ModemInit`接受`short`作为第一个参数。只要您正在处理 VB.Net，字符串到短的转换是隐式完成的。这可能是由于编译器的`Option Strict`选项，默认情况下是禁用的。启用此选项后，仅允许隐式[扩展转换](http://msdn.microsoft.com/en-US/library/k1e94s7e%28v=vs.80%29.aspx)。禁用时（默认状态），此选项允许隐式[缩小和扩大转换](http://msdn.microsoft.com/en-US/library/k1e94s7e%28v=vs.80%29.aspx)。

然而，在 C# 中，禁止缩小隐式转换，这就是您的翻译代码失败的原因。因此，您需要`string`显式解析您的值并将解析后的数字传递给该方法：

```
short port = short.Parse(txtPort.Text);
int ModemStatus = sms.ModemInit(port, ""); 
```

或者，更好的是，使用 TryParse 来避免可能的异常：

```
short port;
if (!short.TryParse(txtPort.Text, out port))
{
    throw new Exception("Failed to parse port");
    // or any other handling - depends on your needs
}

int ModemStatus = sms.ModemInit(port, ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:17:52.510

你的问题只是几个铸造问题。第一个与端口号有关，该`ModemInit`方法需要一个`short`值，但您传递了 a `string`，因此您已经通过使用`short.TryParse`.

另一个问题是您的返回类型，该`ModemInit`方法似乎返回它自己的自定义`enum`值，如果您只对整数值感兴趣，那么您只需将其转换为`int`.

```
int ModemStatus = (int)sms.ModemInit(port, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:06:40.453

我会这样做：

```
short shortValue = 0;
if (short.TryParse(txtPort.Text, out shortValue))
{
    ... continue using shortValue
}
else
{
    ...Tell user the value must be a number
} 
```

通过这种方式，您可以处理用户输入非数字的情况（不诉诸例外）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:03:21.630

正如错误明确指出的那样，您不能将字符串作为短字符串传递。

你需要打电话`short.Parse()`。

# vb.net - Vb.Net Array List 和 ListItems 的限制

> ID：12564677
> 
> 赞同：0
> 
> 时间：2012-09-24T12:01:18.493
> 
> 标签：vb.net

我已经声明了一个`ArrayList`这样的

```
Dim List1 As ArrayList = New ArrayList 
```

添加`ListItem`一个

```
Dim Item As String = ""
List1.Add(New ListItem(Item)) 
```

`ListItem`可以包含多少个字符有任何限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:04:05.653

*“Item可以包含多少字符有没有限制。”* 它受到 a 的长度限制`String`和你的记忆的限制。

> 理论极限可能是 2,147,483,647，但实际极限远不及此。由于 .Net 程序中没有单个对象可能超过 2GB，并且字符串类型使用 unicode（每个字符 2 个字节），因此您可以做的最好的事情是 1,073,741,823，但您不太可能将其分配到32 位机器。

[https://stackoverflow.com/a/140749/284240](https://stackoverflow.com/a/140749/284240)

除此之外，始终使用强类型[`List(Of ListItem)`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx#Y0)而不是`ArrayList`.

```
Dim List1 = New List(Of ListItem)
List1.Add(New ListItem("Foo1")) 
```

[c#什么时候应该使用List，什么时候应该使用arraylist？](https://stackoverflow.com/questions/725459/c-sharp-when-should-i-use-list-and-when-should-i-use-arraylist)

# javascript - iframe 中的操作破坏了我的脚本 jQuery

> ID：12564684
> 
> 赞同：4
> 
> 时间：2012-09-24T12:01:44.960
> 
> 标签：javascript, jquery, jquery-ui, html, iframe

我有一个脚本可以剪切 iframe 的一部分（没有标题的 iframe）并显示它。我的问题是，如果我在这个 iframe 中进行操作，iframe 会重新加载，但没有应用 jquery 过滤来只给我那部分，但是 instad 给了我所有带有标题的页面，所以我假设脚本在重新加载时不起作用iframe 没有具有 iframe 的主页的窗口重新加载：

```
<iframe class="test" width="100%" height="100%" src="/message.html?msjId=260" style="height:100%;width:100%;">

 $(window).load(function () {
     $('.test').each(function(){         

       var filteredContents1 = $(this).contents().find('.div_iframe').html();
       $(this).contents().find('body').html(filteredContents1);       

     });

 }); 
```

请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:26:48.063

我认为您还需要为帧添加加载事件。在 document.ready 函数中添加加载事件，如下所示。如果它有效，您可以省略您已经拥有的用于过滤帧数据的窗口加载事件。

```
 $(document).ready(function(){     
      $('.test').load(function () {

         var filteredContents1 = $('#frame1').contents().find('#divChild').html();
         $('#frame1').contents().find('body').html(filteredContents1);

      });
  }); 
```

应提问者要求更新

```
 $(document).ready(function(){     
      $('.test').load(function () {            

         $('#frame1, #frame2, #frame3').each(function(){
             var filteredContents1 = $(this).contents().find('#divChild').html();
             $(this).contents().find('body').html(filteredContents1);
         });            

      });
  }); 
```

.

# c# - ResourceLoader 和中性语言

> ID：12564689
> 
> 赞同：0
> 
> 时间：2012-09-24T12:01:55.433
> 
> 标签：c#, windows-8, microsoft-metro

我想本地化我的 Windows 应用商店应用程序。我有 string\cs-CZ\Resources.resw，我使用 ResourceLoader 在 C# 中加载字符串。当我将系统设置为 cs-CZ 语言环境时，字符串返回正常。当我设置为另一个语言环境时，GetString 方法返回一个空字符串。我将我的项目中性解决方案设置为 cs-CZ 那么问题是什么？如何让应用程序始终从 string\cs-CZ\Resources.resw 获取资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:29:19.420

默认语言环境可以使用编程方式设置

```
Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride = "cs-CZ"; 
```

在`OnLaunched`

# html - 将 li 放在特定高度之后的下一列

> ID：12564700
> 
> 赞同：4
> 
> 时间：2012-09-24T12:02:31.780
> 
> 标签：html, css, wordpress

我正在研究 wordpress 网站中的导航菜单。请查看CSS 和 html的[背景图像始终与顶部对齐。](https://stackoverflow.com/questions/12456428/background-image-always-align-to-top)

这篇文章是成功的，但现在我想在 ul 的列表项 (li) 达到特定高度后将其推送到新列。进一步解释，我有一个固定高度的子菜单背景图像。当子菜单达到背景高度时，它们应该被推到下一列。

这样子菜单将始终位于背景图像中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:10:27.827

您可以在 css 中尝试添加特定计数。基本上你会说有一定数量的项目，如果超过了这个数量，它会将它推到下一个列

```
ul {
    -moz-column-count: 2;
    -webkit-column-count: 2;
    column-count: 2;
}​ 
```

不过我必须警告你，它并没有得到普遍支持，受到挑战的浏览器只会忽略它。你必须为此想出别的办法。

另一种方法可能是在您的整体 div 中设置一定的高度，例如这样：

```
ul
{
    height: 100px;
    border: 1px solid #f00;
}

li
{
     float: left;
     border: 1px solid #0f0;
     width: 50px;
} 
```

此外，我认为它只是稍微弄乱了 css，并试图找出对你来说最方便的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:10:54.297

这可以使用 css 属性 column-count 来完成，例如，

```
 column-count:2; 
```

li 或 div 上的属性和一些高度，

以下链接将为您解释更多

[如何使浮动 DIV 列表出现在列中，而不是行中](https://stackoverflow.com/questions/5484215/how-to-make-floating-div-list-appear-in-columns-not-rows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:25:05.157

我认为最简单的方法是设置`inline-block`您的`li`元素。

只要您的宽度/高度未定义为 100%，它应该可以工作。

# user-interface - 保存过滤器和排序顺序值

> ID：12564702
> 
> 赞同：0
> 
> 时间：2012-09-24T12:02:38.803
> 
> 标签：user-interface, jsf-2, primefaces

我的全局过滤器通过更新表来保存选定的值。表格由文本过滤，例如更新。在更新/刷新 dataTable 后，列中的 sortBy 或 filterBy 正在清理和清空...如何在列中保存 filterBy 和 sortBy 的类型值？以下是一些代码片段：

```
 <h:form id="showEmployees">
        <p:dataTable id="liste" value="#{employeeView.allEmployeeList}"
            filteredValue="#{employeeView.filteredEmployees}" var="employee"
            widgetVar="employeeTable" resizableColumns="true"
            emptyMessage="#{msg.noData}" rowKey="#{employee}"
            selection="#{employeeView.selected}" selectionMode="single"
            tableStyle="width:auto">

            <p:ajax event="rowDblselect" listener="#{employeeView.onRowSelect}"
                update=":employeeEditDialog" oncomplete="dlgEmployeeEdit.show()" />

            <f:facet name="header">
                <p:commandButton value="#{msg.employeeAdd}" id="addButton"
                    update=":employeeEditDialog" oncomplete="dlgEmployeeEdit.show()">
                </p:commandButton>
                <p:outputPanel>
                    <h:outputText value="#{msg.searchField}" />
                    <p:inputText id="globalFilter" onkeyup="employeeTable.filter()"
                        style="width:150px" />
                    <p:commandButton value="#{msg.export}" ajax="false"
                        action="#{employeeView.exportExcel()}" />
                </p:outputPanel>
            </f:facet>

            <p:column filterBy="#{employee.active}" headerText="#{msg.active}"
                filterOptions="#{employeeView.activeOptions}"
                filterMatchMode="exact" sortBy="#{employee.active}">
                <h:outputText value="#{(employee.active) ? 'X' : ''}" />
            </p:column>

            <p:column filterBy="#{employee.salutation.description}"
                filterMatchMode="contains"
                sortBy="#{employee.salutation.description}"
                headerText="#{msg.salutation}">
                <h:outputText value="#{employee.salutation.description}" />
            </p:column> 
```

如何存储实际过滤器和排序值？

# jquery - bxslider，部分回发和slideToggle重置滑块宽度

> ID：12564703
> 
> 赞同：0
> 
> 时间：2012-09-24T12:02:43.127
> 
> 标签：jquery, ajax, webforms, slidetoggle, bxslider

我的 bxslider 可以工作，但是当我尝试在 a) updatepanel 或 b) jquery ajax 调用之后运行它时，宽度重置为 100px，而不是我的外部 div 的宽度为 960px。这发生在一些基本动画之后，例如 slideToggle 或 show。这是我的代码

```
 <script type="text/javascript">
    function pageLoad(sender, args) {
        if (args.get_isPartialLoad()) {
            var eventSlider = $("#season-slider").bxSlider();

        $(".event-list li a").click(function() {
            //var eventID = $(this).
            var selectedIndex = $(this).closest("li").index();

            $('html, body').animate({ scrollTop: 0 }, 'slow',
            function() {
                eventSlider.goToSlide(selectedIndex - 1);
            });

            //eventSlider.reloadShow();
        });

        $(".down-slide-panel").stop(true, true).slideToggle('slow', "easeOutQuart", function () {});
        }
        else {

        }
    }
</script> 
```

当我执行slideToggle 位时，它的宽度已重置为100px，如果我不slideToggle 它工作正常。所以我尝试将 slidetoggle 更改为 show() 并遇到了同样的问题。为什么这些动画将其宽度重置为 100 像素？

奇怪的是，这只发生在 Chrome、Firefox 和 IE9 中，而不是 IE7 或 IE8！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:16:22.767

在这里找到了答案，虽然问题与他们使用 .show() 略有不同，但对于 slideToggle() 的解决方案相同

[显示/隐藏 div 中的 bxSlider](https://stackoverflow.com/questions/11071269/bxslider-within-show-hide-divs)

在 slideToggle() 使其适用于所有浏览器之后，简单地执行以下操作。

```
eventSlider.reloadShow(); 
```

# java - Java - 如何创建一个类>> 对象

> ID：12564704
> 
> 赞同：1
> 
> 时间：2012-09-24T12:02:44.990
> 
> 标签：java, class, object, reflection, casting

如果这是一个菜鸟问题，我很抱歉。我有一个方法，它接受一个具有泛型类型的 Class 对象作为参数。我能够做到以下几点：

```
Class cs = Map.class; 
```

但是当我通过这个时，我得到一个“NoSuchMethodException”，因为声明了该方法：

```
public void doSomething(Class<Map<Object, List<Object>>> theclass){
...     
} 
```

我试图像这样投射它：

```
Class cs = (Class<Map<Object, List<Object>>>)(Class<?>)Map.class; 
```

但我仍然得到同样的例外。

有没有办法做到这一点？

我不能在这里发布完整的代码，但我已经重现了错误：应用程序实际上正在使用反射。我不能在这里发布原始代码，但我已经复制了异常：

```
import java.lang.reflect.Method;
import java.util.*;

public class Main {
    public static void main(String[] args) {
        Class c = null;
        try {
            c = Class.forName("Second");
        } catch (ClassNotFoundException e1) {
            e1.printStackTrace();
        }
        String m = "doSomething";
        Method method = null;
        Class cs = Map.class;
        try{
            method = c.getMethod(m, cs);
        } catch (NoSuchMethodException e){
            e.printStackTrace();
        }
    }
}

class Second{
    public static void doSomething(Class<Map<Object, List<Object>>> theclass){
        System.out.println("HERE I AM!");   
    }   
} 
```

例外：

```
java.lang.NoSuchMethodException: Second.doSomething(java.util.Map)
    at java.lang.Class.throwNoSuchMethodException(Class.java:283)
    at java.lang.Class.getMethod(Class.java:825)
    at Main.main(Main.java:16) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:08:53.610

如果您进行此类转换，我认为您正在与旨在帮助您的类型系统作斗争。对于初学者，

```
Class cs = Map.class; 
```

是*原始*类型（有关更多信息，请参见[此处](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)）。您是否尝试过实例化所需`Map`类型的类，并将该类传递*给*您的函数？

例如

```
(new HashMap<Object, List<Object>>()).getClass(); 
```

注意：正如上面评论中提到的*ruakh*，您必须传递 Map 接口的实例，因此上面的方法声明将禁止这样做。基本上这里有一个基本的 API 设计问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:47:26.450

知道了！我更改了以下行：

```
method = c.getMethod(m, cs); 
```

至：

```
method = c.getMethod(m, cs.getClass()); 
```

现在它起作用了！

# asp.net - 如何在asp.net中压缩图像？

> ID：12564705
> 
> 赞同：4
> 
> 时间：2012-09-24T12:02:47.690
> 
> 标签：asp.net, performance, http-compression

我在 asp.net webapi 中工作。我`30 to 40 images`的资源文件夹中有。无论如何我可以以编程方式而不是手动压缩我的图像，调整资源中的图像大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:21:28.440

如果您正在谈论调整图像大小，Internet上有很多教程，并且在SO上有一个很好的答案：

[ASP.NET 图像上传与调整大小](https://stackoverflow.com/questions/254419/asp-net-image-uploading-with-resizing)

# php - PHP - MongoDB 将数组移动到子数组

> ID：12564722
> 
> 赞同：0
> 
> 时间：2012-09-24T12:03:45.863
> 
> 标签：php, arrays, mongodb

好的，我正在制作一个使用 MongoDB 作为后端的博客系统。当您编辑它时，我想做与 wordpress 相同的事情，它会保存过去的版本，并允许您在需要时恢复它们。

我也想这样做。

我有几种方法可以做到这一点。但不确定这是否是最简单的方法，并希望得到一些建议。

第一个是查找和插入 $SET

```
<?php
 $cursor = $collection->find(array("_id"=> new MongoId($data)));

        if ($cursor->count() > 0)
        {
              while( $cursor->hasNext() ) {
                foreach($cursor->getNext() as $key => $value)
                {
                    define("_".strtoupper($key), $value);
                }

              }

$cursor = $collection->update(array("_id" => new MongoId($data)),
 '$set'=>array("title"=>$data['TITLE'], "content"=>$data['content'], "past_versons"=>array("title" => _TITLE, "content" => _CONTENT)));
        }
?> 
```

所以我的问题是我会这样做。

这是一个示例 JSON

```
{
"title":"blog title",
"content":"blog content",
"past_verson":[{"title":"blog title past","content":"past blog content"}]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:33:35.327

在您的示例中，您正在迭代[MongoCursor](http://php.net/manual/en/class.mongocursor.php)，即使您最多只希望使用一个文档。[MongoCollection::findOne()](http://php.net/manual/en/mongocollection.findone.php)在这里更合适，因为它将返回第一个结果的文档数组，或者`null`如果没有匹配的文档。

即使您需要遍历多个结果，您最好利用 MongoCursor 的可迭代特性（它实现了 Iterator，它扩展了 Traversable，这意味着您可以在`foreach`循环中使用它）。我也不认为[define()](http://php.net/manual/en/function.define.php)适合在这里存储本质上是临时变量的内容。此外，假设此代码需要运行两次（由于重新定义而出错）或标题或内容不是标量（另一个错误）。

考虑以下重写（我认为`$data['id']`是正确的，您在上面的代码中使用`$data`单独的 MongoId 打错了）：

```
$document = $collection->findOne(array('_id' => new MongoId($data['id'])));

if (null !== $document) {
    $collection->update(
        array('_id' => new MongoId($data['id'])),
        array(
            '$set' => array(
                'title' => $data['title'],
                'content' => $data['content'],
            ),
            '$push' => array(
                'past_versions' => array(
                    'title' => $document['title'],
                    'content' => $document['content'],
                ),
            ),
        )
    );
} 
```

您可能不需要的一个偏差是我将旧版本聚合到一个`past_versions`数组中。我们可以使用[$push](http://www.mongodb.org/display/DOCS/Updating#Updating-%24push)运算符追加到文档中的数组字段。或者，`$set`如果您只需要/想要存储最新版本，您可以简单地使用。

# jquery - java 列表返回 json 字符串，JSON.parse: 预期的属性名称或 '}'？

> ID：12564728
> 
> 赞同：1
> 
> 时间：2012-09-24T12:04:15.580
> 
> 标签：jquery, json, parsing

我使用 Gson 将 java 列表转换为 JSON 并作为对 AJAX 调用的响应返回。
我将以下数据作为成功方法变量数据的 json 对象获取。

> [{Id:121,RefId:123,日期:2012 年 9 月 22 日上午 12:00:00}]

解析时给出以下错误消息，

> JSON.parse：Firebug 中的预期属性名称或“}”。

我使用此代码返回 json 对象。

> Gson gson = 新 Gson();
> 字符串 json = gson.toJson(list);

Jquery 的问题在哪里无法处理？
任何回复都非常值得赞赏..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:05:32.910

这似乎是无效的 JSON，它缺少[strings 周围的所有引号](http://json.org/)。

它应该是这样的：

```
[{"Id": 121, "RefId": 123, "Date": "Sep 22, 2012 12:00:00 AM"}] 
```

# objective-c - Objective-c 中的 URL 解码

> ID：12564732
> 
> 赞同：-1
> 
> 时间：2012-09-24T12:04:35.527
> 
> 标签：objective-c, ios, cocoa-touch

我有一个名为 url 的字符串，即

```
NSString *url = @"http://sound17.mp3pk.com/indian/barfi/%5BSongs.PK%5D%20
              Barfi%20-%2001%20-%20Barfi!.mp3"; 
```

现在我正在下载这首歌并保存它，我需要指定文件名。我希望文件名的方式是它应该从 url 中获取文件名本身。就像在这个 url 中一样，它应该使用`%5BSongs.PK%5D%20 Barfi%20-%2001%20-%20Barfi!.mp3`哪个文件名url 但不应由 Url 格式化程序组成。

我正在做的是

```
Dest_path=[NSHomeDirectory() stringByAppendingString:@"/Documents/a3"];

result =[Dest_path stringByAppendingString:@".mp3"];
helper = [DownloadHelper download:url withTargetPath:result withDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:11:02.520

像这样的东西应该工作：

```
NSString *URLString = @"http://sound17.mp3pk.com/indian/barfi/%5BSongs.PK%5D%20Barfi%20-%2001%20-%20Barfi!.mp3";
NSURL *URL = [NSURL URLWithString:url];
NSString *filename = [[[URL path] lastPathComponent] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
//=> [Songs.PK] Barfi - 01 - Barfi!.mp3 
```

`http://example.com/getsong?q=foobar`请注意，如果内容是动态的（例如，类似），您不能总是从 URL 中获得有用的文件名。

*编辑：*从任意 URL 获取文件名的更好方法是发出请求并检查响应的`Content-Disposition` [HTTP 标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)。

# jquery - 用 animate() CSS3 替换 jQuery 幻灯片

> ID：12564735
> 
> 赞同：3
> 
> 时间：2012-09-24T12:04:46.077
> 
> 标签：jquery, css, slide

我在页面上有 jQuery slideUp 和 down 并且动画的性能非常糟糕。所以我想用 .animate() 或 .css() 替换滑动函数来利用 CSS3 动画（通常比 jQuery 更流畅）

这是我的代码

```
jQuery('.close').on("click", function() {
var parent = jQuery(this).parent('.parentbox');
parent.children('.box').slideUp('500');
jQuery(this).hide();
parent.children('.open').show();
parent.animate({"opacity":"0.4"});
});

jQuery('.open').on("click", function() {
var parent = jQuery(this).parent('.parentbox');
parent.children('.box').slideDown('500');
jQuery(this).hide();
parent.children('.close').show();
parent.animate({"opacity":"1"});
}); 
```

现在，如果我替换为单击`.slideUp`时`.animate({"height":"0px"});`如何将其恢复到以前的高度`.open`？

如果上次关闭盒子，我会使用 cookie 来关闭盒子。这使我无法使用`.height()` 复选框的高度，因为在某些情况下它可能已关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:19:51.400

您可以使用`.animate({ "height":"hide" })`（反之亦然）来完成此操作。

例子：

```
function slideUp() {
    $(".slideme").animate({ "height": "hide" });
}

function slideDown() {
    $(".slideme").animate({ "height": "show" });  
} 
```

jsFiddle：http: [//jsfiddle.net/8VVde/14/](http://jsfiddle.net/8VVde/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T06:45:01.663

我认为也许这不值得。我不确定一个完整的 CSS3 替代品会比这个烂摊子更简洁。这是假设您使用的是[jQuery Transit](http://ricostacruz.com/jquery.transit/)。诀窍是在开始 CSS3 过渡之前您需要渲染高度，这并非易事。

```
var $new = $(content)
    .css({'visibility': 'hidden', 'position': 'absolute', 'overflow': 'hidden'})
    .appendTo($append);
var height = $new.height();
$new.css({'height': 0})
    .css({'position': 'static', 'visibility': 'visible'})
    .transition({'height': height + 'px'}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-22T08:44:01.340

我正在尝试替换 jQuery slideDown。

Anders Holmström 的建议就像一个魅力！可以用“transition()”（[http://ricostacruz.com/jquery.transit](http://ricostacruz.com/jquery.transit)）代替动画吗？

这似乎没有动画，而是在单击时完成：

```
el.transition({ "display": "block", "height": "show"}, 250); 
```

# iphone - 自 iOS6 以来的按钮背景和渐变变化

> ID：12564738
> 
> 赞同：7
> 
> 时间：2012-09-24T12:04:57.973
> 
> 标签：iphone, uibutton, ios6, cagradientlayer

对于一个应用程序，我必须创建一个`UIButton`填充了渐变和背景图像。一切正常，直到我将操作系统从 iOS 5.1 升级到最近发布的 iOS 6。

这是模拟器的两个屏幕截图：

![iOS 5.1 截图](../Images/34d284ac7ee16b34264356922d73ceb7.png)

![iO 6 截图](../Images/7810a04fd45a6c2c79e2a886f8350d24.png)

嗯，第一个屏幕截图显示了我需要（并且做了），你可以看到棕色背景和灰色辐射。

下面是具有相同按钮但运行 iOS 6 的屏幕截图。如您所见，渐变消失了，底部出现了一条奇怪的白色条带`UIButton`。

我已经查看了这是一个错误还是什么，但我什么也没发现，也许这里有人遇到过同样的问题？这是我的渐变代码

```
CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = btnCountry.bounds;
    UIColor *colorTop = [UIColor colorWithRed:.992f green:.992f blue:.992f alpha:1];
    UIColor *colorBot = [UIColor colorWithRed:.788f green:.769f blue:.745f alpha:1];
    gradient.colors = [NSArray arrayWithObjects:(id)[colorTop CGColor], (id)[colorBot CGColor], nil];
    gradient.borderColor = [UIColor colorWithRed:.545f green:.506f blue:.459f alpha:1].CGColor;
    gradient.borderWidth = 1;

    gradient.masksToBounds = YES;
    gradient.cornerRadius = 11;
    [[btnCountry layer] insertSublayer:gradient atIndex:0]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T14:34:21.273

这是 ios6 中一个非常奇怪的问题，我在设置渐变时遇到了同样的问题，就像你通常会做的那样：

```
[myButton.layer insertSublayer:gradient atIndex:0]; 
```

所以我尝试将底线更改为此在 iOS 6 和较低版本的 IOS 中运行良好

```
[myButton.layer insertSublayer:gradient below:myButton.titleLabel.layer]; 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T07:49:04.097

正如您在我的评论中看到的那样，问题来自班级`UIGroupTableViewCellBackground`，我只是将其隐藏起来。我认为这不是一个“干净”的解决方案，如果你有更好的解决方案我会很高兴听到它:-)

这是代码：

```
for(UIView* subView in btnCountry.subviews)
    if([subView isKindOfClass:NSClassFromString(@"UIGroupTableViewCellBackground")])
        [subView setHidden:YES]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T10:17:56.897

在索引位置 1 插入图层对我有用。

可能最好的解决方案是检查 iOS 版本，并根据它在索引 0 或 1 处插入。

# jquery - 如果我的 javascript 包含在每个页面上，我如何使用 jQuery mobiles pageinit？我的页面已预加载

> ID：12564740
> 
> 赞同：0
> 
> 时间：2012-09-24T12:05:07.303
> 
> 标签：jquery, jquery-mobile

我有一个移动站点，其中所有页面都包含一个脚本 js 文件，所有页面都是独立的，但预加载到 dom 缓存中。我有一个移动站点，其中页面都包含一个脚本 js 文件，所有页面都是独立的，但是预加载到 dom 缓存中。

当我可以的时候，我可以：

```
$(document).live('pageinit',function() { console.log('test') } 
```

由于从起始页面预加载了大约 15 个页面，我收到了大约 15 条消息。是否存在仅在页面实际进入活动状态时才会触发的适当替代事件？

或解决此问题的其他方法？

编辑：附加信息：

我正在使用 php 框架来提供页面，并且每个页面都被模板化以包含相同的 script.js 文件，这个脚本文件简单地控制导航手风琴和动态页面更改，但是它会为每个预加载页面触发一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:13:49.530

这取决于您希望如何构建页面。我不知道有 15 个不同的页面有自己的逻辑背后的意图是什么。我看到了两种不同的方式

1.  有一个“主”页面，其中包含`pageinit`事件并处理其所有“子”页面，这些页面只是显示的（jquery mobile）HTML 的容器
2.  在每个页面上使用一个单独`pageinit`的，它只初始化它自己的上下文，即它所在的页面。这可能会变得棘手，因为我不确定您是否能够始终清楚地识别您`pageinit`当前正在运行的上下文。

我不确定我是否能够帮助你。您必须更详细地解释`pageinit`每页上有 15 个不同的 s 背后的意图是什么。

# xcode - 无法使用 iOS6 启动仪器

> ID：12564743
> 
> 赞同：5
> 
> 时间：2012-09-24T12:05:19.720
> 
> 标签：xcode, instruments, ios6

我正在使用 Xcode3.2.5 在 iOS6.0 上开发应用程序。由于我已将 iPhoneOS6.0.sdk 和 DeviceSupport/6.0 复制到 Developer 目录，我可以使用 Xcode 安装和运行应用程序。但是无论是从 Xcode 启动还是直接双击 Instruments 应用程序，我都无法使用 Instruments 运行应用程序。错误信息是：

> 设备连接失败
> 
> 无法在“iPod007(v6.0)”((null)) 上为“iOS”启动 Instruments 守护程序
> 
> 请重新连接设备。

重新连接设备后，我收到相同的消息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T09:17:34.010

我有同样的问题，因为我的 MAC 上有很多仪器。所以，我确实运行了一个旧版本。

通过这种方式，您可以运行最新版本。

打开最新的 Xcode --> Xcode 菜单 --> 打开开发者工具 --> Instruments

或在这里查看图片

![在此处输入图像描述](../Images/e616de352c7ea55de42eead0d7ec8a12.png)

祝你好运！

# java - 更新以 mysql blob 格式保存的图像

> ID：12564745
> 
> 赞同：1
> 
> 时间：2012-09-24T12:05:24.557
> 
> 标签：java, mysql, image, blob

在我的程序中，用户可以通过 java 程序将图像保存在 mysql 中。它将显示在 Jlabel 中。图像插入部分工作正常。图像被插入并正确显示。但是当用户尝试更新它时，图像没有正确更新。更新后，当我去查看 Mysql 时，图像不存在。有一些垃圾价值。谁能帮我 ？

```
//Method to get the image from the file chooser
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    JFileChooser chooser = new JFileChooser();
    chooser.showOpenDialog(null);
    File f = chooser.getSelectedFile();
    filename = f.getAbsolutePath();
    jTextField1.setText(filename);

    try {
        File image = new File(filename);
        FileInputStream fis = new FileInputStream(image);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte buf[] = new byte[1024];

        for (int readNum; (readNum = fis.read(buf)) != -1;) {
            bos.write(buf, 0, readNum);
        }
        menu_image_new = bos.toByteArray();
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
    }
} 

// Save button click event where the update query run
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    try {
        Connection con = DB_Con.getConnection();
        String sql = "update menu set Menu_Image='" + menu_image_new + "' where Menu_Code='" + FoodMenu_FOA.clicked + "'";
        PreparedStatement st = (PreparedStatement) con.prepareStatement(sql);
        st.executeUpdate();
        JOptionPane.showMessageDialog(null, "Image Updated Successfully");
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
    }
} 

//Method to display image in Jlabel
public void set_Icon_menu() {
    try {
        int row = menu_table.getSelectedRow();
        Connection con = DB_Con.getConnection();
        ResultSet rs;
        String menu_id = menu_table.getModel().getValueAt(row, 0).toString();
        String sql = "select Menu_Image from menu where Menu_Code='" + menu_id + "'";
        PreparedStatement st = (PreparedStatement) con.prepareStatement(sql);
        rs = st.executeQuery();
        if (rs.next()) {
            byte[] imagedata = rs.getBytes("Menu_Image");
            format = new ImageIcon(imagedata);
            menu_label.setIcon(format);

        }
    } catch (Exception e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:36:35.897

我不知道如何在您的 Java 库中执行此操作，但您应该使用带参数的 SQL 查询（可能是 setBinaryStream 或 setBlob），而不是连接 SQL 字符串。这可能会解决你的问题...

发现这可能对您有所帮助：

[Java上的PreparedStatement和设置参数的概率](https://stackoverflow.com/questions/9558952/preparedstatement-on-java-and-probability-to-set-parameters)

[http://www.herongyang.com/JDBC/MySQL-PreparedStatement-Parameters.html](http://www.herongyang.com/JDBC/MySQL-PreparedStatement-Parameters.html)

和这个：

[http://www.jdbc-tutorial.com/jdbc-prepared-statements.htm](http://www.jdbc-tutorial.com/jdbc-prepared-statements.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:51:06.207

```
PreparedStatement stmt = con.preparestatement("update menu set Menu_Image= ? where Menu_Code= ?");
stmt.setString(1, menu_image_new);
stmt.setBlob(2, FoodMenu_FOA.clicked); 
```

这将创建一个准备好的语句，请注意完全确定它是否会解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T14:58:31.497

我有同样的问题，您首先需要在列中清除 blob 格式。通过将 Menu_Image 设置为 null

```
// Save button click event where the update query run

     private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
   PreparedStatement st;
 try {
    Connection con = DB_Con.getConnection();
 String sql = "update menu set Menu_Image= null where Menu_Code='" + 
   FoodMenu_FOA.clicked + "'";
    st = (PreparedStatement) con.prepareStatement(sql);
    st.executeUpdate();
    } catch (Exception e) {
      JOptionPane.showMessageDialog(null, e);
   } 

 // As your are using prepare statement set 

    try {
      Connection con = DB_Con.getConnection();
        String sql = "update menu set Menu_Image= ? where Menu_Code='" + 
      FoodMenu_FOA.clicked + "'";
        st = (PreparedStatement) con.prepareStatement(sql);
      st.executeUpdate();
      JOptionPane.showMessageDialog(null, "Image Updated Successfully");
    } catch (Exception e) {
      JOptionPane.showMessageDialog(null, e);
       }
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-04T05:42:06.203

你可以试试：

```
try {
    String update = "update menu set IMAGE=? where Menu_Code='" + 
        edit_idnumber.getText() + "'";
    pst = conn.prepareStatement(update);
    pst.setBytes(1, menu_image_new);
    pst.execute();  
} catch (Exception e) {
    JOptionPane.showMessageDialog(null, e);
} 
```

# java - VPS和基础设施即服务IaaS，有什么区别？

> ID：12564746
> 
> 赞同：5
> 
> 时间：2012-09-24T12:05:27.203
> 
> 标签：java, vps, iaas

我是 Java 开发人员，从我的角度来看，VPS 和基础设施即服务 IaaS 是相同的，两者都为我提供虚拟机来构建我想要的任何应用程序堆栈，这是对的还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:53:01.153

VPS 是 IaaS 解决方案的一个组件。IaaS 提供商还可能提供 DNS 实用程序，帮助您托管 Web 服务器、流量整形和带宽功能、洞察服务器性能、防火墙等。

不过，IaaS 的核心是由 VPS 组成。然而，许多主要供应商正在转向 PaaS，它提供了按需扩展或缩减 VPS 的能力，并且可以抽象出硬件和软件的关键部分。例如，谷歌应用引擎将整个操作系统抽象出来，只托管你的网络服务。

# python - Openerp：如何使用管理菜单更改基本字段属性？

> ID：12564750
> 
> 赞同：1
> 
> 时间：2012-09-24T12:05:52.390
> 
> 标签：python, openerp

如何使用 更改基本字段属性`Administration>customization>database structure->fields`？

在尝试执行此操作时，我收到此错误“无法以这种方式更改基本字段的属性！请通过 Python 代码修改它们，最好通过自定义插件！”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:35:03.013

我很确定您不能使用该屏幕来更改基本字段，因为它们的属性是在 Python 代码中定义的。该屏幕用于添加自定义字段并对其进行编辑。如果要更改基本字段，则必须[编写一个](http://doc.openerp.com/v6.1/developer/03_modules_1.html)继承和修改字段的模块，或者修改核心模块的源代码以更改属性。建议继承该模块，因为它可以更轻松地迁移到未来版本。

# java - Java ProGuard。类保留（不要删除）但允许被混淆

> ID：12564754
> 
> 赞同：7
> 
> 时间：2012-09-24T12:06:11.813
> 
> 标签：java, class, obfuscation, proguard, preserve

我想从删除中跳过一个特定的类。它通常不会在我的应用程序中的任何地方引用，而只能通过反射来引用，因此它确实会被收缩器删除。它被其包中的其他“相邻”类引用，但并未直接用于我的应用程序，而仅用于反射。

我决定专门为这个特定的类处理一个映射：

```
org.mypckg.Helper -> gh6 
```

...然后我当然改变了我的应用程序的反射调用：

```
forName("gh6") 
```

我的映射输入似乎没有问题，但映射规则本身不足以防止类被删除。此外，我仍然无法使用 -keep 开关保留该类，因为它确实使用其原始名称 (org.mypckg.Helper) 来保留它，这是我不想要的。

出于某种原因，我无法在项目中手动将类折射（重命名）为“gh6”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T21:22:49.527

ProGuard 识别结构`Class.forName("org.mypckg.Helper")`；`org.mypckg.Helper`然后它在没有进一步配置的情况下保留和混淆。

除此以外：

```
-keep,allowobfuscation class org.mypckg.Helper
-adaptclassstrings org.mypckg.AdjacentClass* 
```

参照。ProGuard 手册 > 使用 > [Keep 选项概述](http://proguard.sourceforge.net/manual/usage.html#keepoverview)

参照。ProGuard 手册 > 用法 > [-adaptclassstrings](http://proguard.sourceforge.net/manual/usage.html#adaptclassstrings)

# php - 您如何使用 PHP 获取 Document 根目录的某个部分？

> ID：12564756
> 
> 赞同：0
> 
> 时间：2012-09-24T12:06:17.083
> 
> 标签：php

我正在为我的朋友和我自己创建一个网站，它需要有点安全。我有一个用于存储用户信息的 SQL 数据库，我将数据库的变量存储在公共文件之外，并具有检索它们的功能。

使用这个被调用的函数，`getSQL_Info($n)`它获取文本文件中的行并将其分解并将变量放入数组并返回`array[$n]`。

为了使用变量加载文件，我必须提供位置，而不是在函数中写入路径，我想拥有它，以便您执行类似的操作 `$_SERVER['DOCUMENT_ROOT']`并使用它来获取路径的基本部分。

本质上，我想`"home2/(mySecretUsername)/config/file.txt"` 在它给我的时候有路径`"home2/(mySecretUsername)/public_html/fpi"`。

我只是需要一个很好的解释来说明如何取出`"home2/(mySecretUsername)/"`零件并添加`"config/file.txt"`.

感谢您抽出宝贵时间，如果我的问题解释得不好，请告诉我，我会添加更多信息。——迈克尔·米切尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:58:46.700

这种方法对你有用吗？

```
function getConfigFile() {
   $components = explode('/' , $_SERVER['DOCUMENT_ROOT']);
   $componentLen = count($components);
   if ($componentLen < 3) {
       return ''; // Something goes wrong
   }
   $components2 = array_slice($path, 0, $componentLen - 2);
   return implode( '/' , $components2) . '/config/file.txt'
} 
```

它显然依赖于平台，但看起来它可以完成这项工作。

# jquery - 更新所有 div 元素的内部内容

> ID：12564757
> 
> 赞同：1
> 
> 时间：2012-09-24T12:06:26.083
> 
> 标签：jquery

我有一个高度和`Div`宽度。`300px``300px`

我想放一些文本，`Div`所以我想检查文本量是否大于这个 div 区域制作另一个 Div 标签并将其余文本放入其中。这个有可能？

**已编辑**

或者可能是这样：我如何将（例如）此文本转换为某些 Div 300 * 300：

```
A fractal is a mathematical set that has a fractal dimension that usually exceeds its topological dimension[1] and may fall between the integers.[2] Fractals are typically self-similar patterns, where self-similar means they are "the same from near as from far"[3] Fractals may be exactly the same at every scale, or as illustrated in Figure 1, they may be nearly the same at different scales.[2][4][5][6] The definition of fractal goes beyond self-similarity per se to exclude trivial self-similarity and include the idea of a detailed pattern repeating itself.[2]:166; 18[4][7]

As mathematical equations, fractals are usually nowhere differentiable, which means that they cannot be measured in traditional ways.[2][6][8] An infinite fractal curve can be perceived of as winding through space differently from an ordinary line, still being a 1-dimensional line yet having a fractal dimension indicating it also resembles a surface.[1]:48[2]:15

The mathematical roots of the idea of fractals have been traced through a formal path of published works, starting in the 17th century with notions of recursion, then moving through increasingly rigorous mathematical treatment of the concept to the study of continuous but not differentiable functions in the 19th century, and on to the coining of the word fractal in the 20th century with a subsequent burgeoning of interest in fractals and computer-based modelling in the 21st century.[9][10] The term "fractal" was first used by mathematician Benoît Mandelbrot in 1975\. Mandelbrot based it on the Latin frāctus meaning "broken" or "fractured", and used it to extend the concept of theoretical fractional dimensions to geometric patterns in nature.[2]:405[7] 
```

结果必须是这样的：

![在此处输入图像描述](../Images/413f87dfb79c8a1b48438a3c35d19b74.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:43:46.300

尝试以下操作：

```
var str = "This is a very long string. You don't know exactly how much width you will need for it to be displayed";
var ar = str.split(" ");
var index = 0;
var $test = $("#test");

while($test.height() < 300){
    console.log($test.height());
 $test.html($test.html() +" "+ ar[index++]); 
    if(!ar[index]){break;}  
}

var fits = ar.splice(0,index-1);
$("#fixed").html(fits.join(" "));
$("#overflow").html(ar.join(" ")); 
```

这对你来说应该是一个很好的起点。

**[例子](http://jsfiddle.net/TdNKp/5/)**

编辑：扩展示例

# javascript - 根据面板上呈现的当前页面上的操作更改面板的 contentURL

> ID：12564758
> 
> 赞同：1
> 
> 时间：2012-09-24T12:06:26.267
> 
> 标签：javascript, firefox-addon-sdk

我正在使用 Erik Vold 的工具栏按钮。我有一个固定在上面的面板。在面板中呈现的 html 静态页面上单击其中一个链接时，我需要在同一面板中显示其他内容。

我正在尝试使用端口 API 在插件代码和 html 静态页面之间传递消息。在监听某个事件时，我想更改面板的 contentURL 字段：

```
var myScript = "window.addEventListener('click', function(event) {" +
           "  var t = event.target;" +
           "  if (t.nodeName == 'A')" +
           "    self.port.emit('click-link', t.id);" +
           "}, false);"

var mainPanel = require("panel").Panel({
  width: 200,
  height: 200,
  contentURL: require("self").data.url("appList.html"),
  contentScript: myScript
});

mainPanel.port.on("click-link", function(appName) {
  if(appName=='app1'){
  //mainPanel.resize(700,500);  --works
    mainPanel.contentURL="http://www.some-server/app1.html";  --fails
  }
  if(appName=='app2')
    ...
}); 
```

mainPanel.resize() 可以很好地调整面板的大小。是否有类似的方法来更改面板的 contentURL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:28:08.843

该代码应该可以工作，您在面板模块中发现了一个错误。耶！

我为您提交了[错误 795490](https://bugzilla.mozilla.org/show_bug.cgi?id=795490)，并且有一个包含修复的[拉取请求](https://github.com/mozilla/addon-sdk/pull/594)，可能需要一些时间才能登陆，但修复应该会到来。

# oracle - oracle在哪里存储用户定义的异常？

> ID：12564759
> 
> 赞同：2
> 
> 时间：2012-09-24T12:06:28.207
> 
> 标签：oracle

是否有存储用户定义异常的 oracle 表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:28:12.190

不。

用户定义的异常与其他变量一样，在 PL/SQL 块中定义，并且具有 PL/SQL 变量所具有的任何范围。所以，例如

```
DECLARE
  my_exception EXCEPTION;
BEGIN
  RAISE my_exception;
EXCEPTION 
  WHEN my_exception
  THEN
    dbms_output.put_line( 'Caught my_exception' );
END; 
```

将创建用户定义的异常`my_exception`，但该异常只存在于匿名 PL/SQL 块的范围内。您可以在包中定义异常，以便它们可以被多个 PL/SQL 块引用。您可以使用`exception_init`pragma 将用户定义的异常与特定的错误代码相关联

```
SQL> ed
Wrote file afiedt.buf

  1      DECLARE
  2        my_exception EXCEPTION;
  3        pragma exception_init( my_exception, -20001 );
  4      BEGIN
  5        RAISE my_exception;
  6*     END;
SQL> /
    DECLARE
*
ERROR at line 1:
ORA-20001:
ORA-06512: at line 5 
```

或者您可以`raise_application_error`单独使用该函数，也可以与用户定义的异常变量一起使用

```
SQL> ed
Wrote file afiedt.buf

  1      DECLARE
  2        my_exception EXCEPTION;
  3        pragma exception_init( my_exception, -20001 );
  4      BEGIN
  5        RAISE_APPLICATION_ERROR( -20001, 'This is my error text' );
  6      EXCEPTION
  7        WHEN my_exception
  8        THEN
  9          dbms_output.put_line( 'Caught my_exception' );
 10          dbms_output.put_line( sqlerrm );
 11*     END;
SQL> /
Caught my_exception
ORA-20001: This is my error text

PL/SQL procedure successfully completed. 
```

没有数据字典表来存储用户定义的异常，因为您的代码可能定义这些异常的方式太多（可能存在冲突）。从良好的异常管理的角度来看，您通常希望提出一种一致的方法来定义特定于应用程序的异常并坚持使用该方法。就个人而言，我喜欢一个包，它定义了我所有的异常并将它们与错误代码相关联

```
SQL> ed
Wrote file afiedt.buf

  1  create or replace package error_pkg
  2  as
  3    invalid_name exception;
  4    pragma exception_init( invalid_name, -20001 );
  5    invalid_address exception;
  6    pragma exception_init( invalid_address, -20002 );
  7* end;
SQL> /

Package created. 
```

假设我所有的用户定义的异常都是这样定义的，我可以转到包定义中的所有定义。

# c# - ExecuteNonQuery() 不保存任何记录

> ID：12564761
> 
> 赞同：3
> 
> 时间：2012-09-24T12:06:39.993
> 
> 标签：c#, database, sqlcommand, mdf, executenonquery

我正在使用基于 WinForms 的 C# 工具，该工具具有附加的基于 MDF 文件的数据库。我正在尝试使用该`SqlCommand.ExecuteNonQuery()`方法将记录保存到此附加的 MDF 数据库中，但未保存该记录。没有错误或异常发生；唯一的问题是该记录并未实际保存。

我`Console.WriteLine`在顶部有一个显示我正在尝试运行的查询。它的语法正确，如果我从输出窗口复制粘贴它并单独运行它，它就可以工作。

我已经正确定义了连接字符串，如下所示，它可以很好地获取记录：

`public static String connectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\TestBuildDB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";`

这是我用来保存记录的功能：

```
public static void PerformDBWriteTransaction(string inputSQLStatement)
{
    Console.WriteLine(inputSQLStatement);
    DataTable returnDataTable = new DataTable();
    SqlConnection sqlConnection = new SqlConnection();
    sqlConnection.ConnectionString = connectionString;
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = sqlConnection;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = inputSQLStatement;
    cmd.Connection.Open();
    try
    {
        cmd.ExecuteNonQuery();
    }
    catch (SqlException ex)
    {
        errorMessages.Clear();
        errorMessages.Append("The following errors were found in the SQL statement:\n\n");

        for (int i = 0; i < ex.Errors.Count; i++)
        {
            errorMessages.Append("Index #" + i + "\n" +
                "Message: " + ex.Errors[i].Message + "\n" +
                "LineNumber: " + ex.Errors[i].LineNumber + "\n" +
                "Source: " + ex.Errors[i].Source + "\n" +
                "Procedure: " + ex.Errors[i].Procedure + "\n");
        }
        MessageBox.Show(errorMessages.ToString());
    }
    finally
    {
        cmd.Connection.Close();
    }
} 
```

有人可以告诉我可能是什么问题吗？我是否需要以某种方式执行“提交”？

编辑：

我找到了问题，并在下面写了一个解决方案.. 感谢所有帮助我的人:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T09:27:37.683

我发现了问题！这很简单，真的很愚蠢:)..上面的代码都是正确的..是的，人们指出了优化等，但上面的代码仍然是正确的。

问题是当我将 TestDB.MDF 文件导入到我的 Visual 2010 项目中时，在项目文件夹中制作了一份副本。当您运行/调试程序时，会制作此文件的*另一个*副本并将其放在 \bin\Debug\ 文件夹中。在我使用的连接字符串中，我提到过：`AttachDbFilename=|DataDirectory|\TestBuildDB.mdf`.. 这意味着所有读/写操作都对 bin\Debug 文件夹中的副本进行。但是，我正在查看以验证是否插入记录的 TestDB.MDF 文件位于项目的文件夹中！所以基本上，有两个 MDF 文件，我将记录写入一个文件，但试图在另一个文件中找到它们:)

当您将 MDF 文件添加到 VS2010 项目中时，VS2010 默认情况下会连接到该 MDF 文件，您可以从中浏览该 MDF 文件中的内容。用于此目的的 MDF 文件是放置在项目文件夹中的文件，而不是 bin\Debug\ 文件夹中的那个。就像我之前说的，我的代码使用了 bin\Debug 文件夹中的那个:)

所以我现在所做的是从我的项目中删除了 Test.MDF 文件引用，这会删除项目文件夹中存在的副本。但是，我在 bin\Debug\ 文件夹中确实有一个 TestDB.MDF 文件的副本，我从我的应用程序中连接到该文件。如果我想在我的项目之外浏览 MDf 文件，我会使用 SQL Management Studio。这里唯一的问题是 MDF 文件在给定时间只能由一个程序使用。因此，如果我必须在我的应用程序中使用它，我必须从 SQL Management Studio 将其离线，反之亦然！

我希望这个解释可以帮助那里的人:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-11T06:15:23.343

这个问题的解决方法很简单，只需在连接字符串中给出原始 MDF 文件的完整路径，如下所示：

```
connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=**C:\VISUAL STUDIO 2012\PROJECTS\ENGLISHTOHINDIDICTIONARY\ENGLISHTOHINDIDICTIONARY\DICTIONARY.MDF**;Initial Catalog=Dictionary;Integrated Security=false"
        providerName="System.Data.SqlClient" 
```

就这样，你的问题解决了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-21T07:26:32.980

我遇到了同样的挑战，我只是将数据库属性“复制到输出目录”从“始终复制”更改为“不复制”，然后将我的 database.mdf（从我的 IDE 拖放）移动到 bin\debug 文件夹中。

提示：bin 目录通常是隐藏的，使用“显示所有文件”来显示它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:27:08.307

首先，您应该始终将`IDisposable`对象包装在 a`using`中，以确保它们已正确关闭和处置（并且连接池可以完成它的工作）。其次，在修改数据时，将您的 sql 包装在事务中以保持数据完整性。

尝试以下代码，看看是否引发了任何异常。我通常不建议捕获`Exception`，因为它太笼统了，我会让它冒泡到调用机制并在那里处理它 - 但对于这种情况，它会向你展示任何和所有问题。我认为您的特定问题处于`.Open`连接阶段，因此请尝试逐步完成。

```
public static void PerformDBWriteTransaction(string inputSQLStatement)
{
    DataTable returnDataTable = new DataTable();

    try
    {
        using (SqlConnection sqlConnection = new SqlConnection(connectionString))
        {
            sqlConnection.Open();

            using (SqlTransaction sqlTrans = sqlConnection.BeginTransaction())
            {
                try
                {
                    using (SqlCommand cmd = new SqlCommand(inputSQLStatement, sqlConnection))
                    {
                        cmd.CommandType = CommandType.Text;
                        cmd.Transaction = sqlTrans;
                        cmd.ExecuteNonQuery();
                    }
                }
                catch (SqlException sqlEx)
                {
                    sqlTrans.Rollback();

                    throw sqlEx;
                }

                sqlTrans.Commit();
            }
        }
    }
    catch (Exception ex)
    {
        errorMessages.Clear();
        errorMessages.Append("The following errors were found in the SQL statement:\n\n");

        for (int i = 0; i < ex.Errors.Count; i++)
        {
            errorMessages.Append("Index #" + i + "\n" +
            "Message: " + ex.Errors[i].Message + "\n" +
            "LineNumber: " + ex.Errors[i].LineNumber + "\n" +
            "Source: " + ex.Errors[i].Source + "\n" +
            "Procedure: " + ex.Errors[i].Procedure + "\n");
        }

        MessageBox.Show(errorMessages.ToString());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T12:18:26.673

为所有异常提供一个 catch 子句。如果除了 SqlException 之外还有其他问题，您将永远看不到它是什么，并且您的数据库将永远不会被更新。想象一下有一个 FormatException ......

还要检查 ExecuteNonQuery 的返回：它是受查询影响的行数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-18T07:36:14.073

嗨，我正在处理图书馆数据库，当我添加学生记录时`executionNonQuery` 显示错误，例如打开了无效的列名页面，但保存数据不会发生。这里我给出了代码声明

```
public partial class add_student_info : Form
{
    SqlConnection con = new SqlConnection(@"Data Source=DESKTOP-SPT6GLG\SQLEXPRESS;Initial Catalog=library_managment;Integrated Security=True;Pooling=False");

    public add_student_info()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {

            con.Open();
            SqlCommand cmd = con.CreateCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "insert into student_info values('" + textBox1.Text + "','" + textBox2.Text + "','" + textBox3.Text + "','" + textBox4.Text + "'," + textBox5.Text + "," + textBox6.Text + "," + textBox7.Text + ")";
            cmd.ExecuteNonQuery();
            con.Close();

            MessageBox.Show("Student recorc addedd sussfully");

        }
    }
} 
```

# c# - 发送电子邮件时拒绝中继访问

> ID：12564771
> 
> 赞同：1
> 
> 时间：2012-09-24T12:07:19.767
> 
> 标签：c#, visual-studio-2010, c#-4.0, smtp

我想通过我的桌面应用程序发送电子邮件
这是我的代码

```
 MailMessage m = new MailMessage("mahmoud@isysway.com", "gavoh3d@yahoo.com", "subject", "body");
        m.IsBodyHtml = true;
        SmtpClient smtp = new SmtpClient("out.tedata.net.eg");
        smtp.Credentials = new System.Net.NetworkCredential("mahmoud@isysway.com", "password");
        smtp.UseDefaultCredentials = true;
        smtp.Send(m); 
```

我的问题是：这段代码抛出异常

```
Transaction failed. The server response was: 5.7.1 <gavoh3d@yahoo.com>: Relay access denied 
```

我认为因为我的互联网提供商需要传出服务器 (SMTP) 身份验证，所以我在 Outlook 中将其配置如下 ![在此处输入图像描述](../Images/6589c70294a854c9227320c4c1d62e82.png)
现在，如何在我的代码中配置它

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:25:56.907

可能是各种问题：

1.  你能从你的 Outlook 发送邮件到雅虎邮箱吗？[检查此链接](http://www.penpublishing.com/support/emailerrors/understandingemailerrors/default.aspx#554)如果是
2.  检查[IIS SMTP 虚拟服务器中继限制](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/58f05ef9-55a3-42b3-9f57-27fdc8723b8a.mspx?mfr=true)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:16:53.393

我发现了这个问题，因为我有同样的问题。我使用 /etc/postfix/main.cf 中的 myNetworks 条目解决了它 将发送的 IP 添加到 myNetworks 行，我认为 PostFix 需要一个空格来分隔 IP 地址，对我来说最好使用逗号，但是如果我同时使用它，它会起作用。

这个解决方案并不理想，所以我会很感激有一个更好的！

抢

# string - 从空间 powerbuilder 清除字符串

> ID：12564772
> 
> 赞同：0
> 
> 时间：2012-09-24T12:07:21.493
> 
> 标签：string, powerbuilder

我有字符串

```
'TEST1, TEST2, TEST3' 
```

我希望有

```
'TEST1,TEST2,TEST3' 
```

在powerbuilder中是一个像replace，substr之类的函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:29:30.177

当然有（你可以很容易地在帮助中找到它），但它并不是很有帮助。

它的原型是`Replace ( string1, start, n, string2 )`，所以在调用它之前你需要知道要替换的字符串的位置。

有一个通用的包装器，它包括循环`pos()`/`replace()`直到没有任何东西可以替换。下面是一个全局函数的源码：

```
global type replaceall from function_object
end type

forward prototypes
global function string replaceall (string as_source, string as_pattern, string as_replace)
end prototypes

global function string replaceall (string as_source, string as_pattern, string as_replace);//replace all occurences of as_pattern in as_source by as_replace 

string ls_target
long i, j

ls_target=""
i = 1
j = 1
do
    i = pos( as_source, as_pattern, j )
    if i>0 then
        ls_target += mid( as_source, j, i - j )
        ls_target += as_replace
        j = i + len( as_pattern )
    else
        ls_target += mid( as_source, j )
    end if
loop while i>0

return ls_target

end function 
```

请注意，PB 中的字符串函数（搜索和连接）效率不高，另一种解决方案可能是使用[PbniRegex](http://sebastien.kirche.free.fr/powerbuilder/en.html#pbni)扩展`FastReplaceall()`提供的全局函数。它是 PB 经典版 9 到 12 的 c++ 编译插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T23:45:09.040

一种方法是使用数据库，因为您可能有一个活动连接。

```
string ls_stringwithspaces = "String String String     String"
string ls_stringwithnospace = ""
string ls_sql = "SELECT  replace('" + ls_stringwithspaces + "', ' ', '')"

DECLARE db DYNAMIC CURSOR FOR SQLSA;
PREPARE SQLSA FROM :ls_sql USING SQLCA;

OPEN DYNAMIC db;
IF SQLCA.SQLCode > 0 THEN
       // erro handling
END IF
FETCH  db INTO :ls_stringwithnospace;
CLOSE db;

MessageBox("", ls_stringwithnospace) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:01:58.637

我这样做：

```
 long space, ll_a
     FOR ll_a = 1 to len(ls_string)
            space = pos(ls_string, " ")
            IF space > 0 THEN
            ls_string= Replace(ls_string, space, 1, "")
            END IF
     NEXT 
```

# php - mcrypt 没有在 MAC 上加载

> ID：12564775
> 
> 赞同：1
> 
> 时间：2012-09-24T12:07:26.060
> 
> 标签：php, phpmyadmin, mcrypt

我已经在运行 lion 的 mac 上手动安装了 PHP。我也安装了 mcrypt。它工作正常，直到几天前它停止工作（没有加载）。这很可能发生在最新的软件更新之后。

现在我正在尝试再次安装 mcrypt。我尽我所能，并按照大多数在线教程进行操作。还没有运气。

这是我所做的。

1.  下载的 libmcrypt
2.  配置并安装它。

我正在运行 php 5.4.7

1.  我下载了源码。去mcrypt文件夹和phpize。
2.  配置和安装。
3.  编辑 php.ini 以添加 extension = mycrypt.so。甚至尝试将路径放在 extension_dir 中。
4.  重新启动阿帕奇。还是不行。

我现在已经花了几天的时间来解决这个问题，但仍然无法解决。我正在考虑进行全新安装:(

这些是我注意到的一些奇怪的事情，可能是问题的原因。

当我做 phpize 这就是我得到的

```
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626 
```

但是当它完成安装它给了我路径

```
/usr/lib/php/extensions/no-debug-non-zts-20100525/ 
```

任何帮助将不胜感激。如果您需要任何帮助，我将提供任何必要的详细信息。

# postgresql - 如何在 PostgreSQL 中进行仅模式备份和还原？

> ID：12564777
> 
> 赞同：43
> 
> 时间：2012-09-24T12:07:39.237
> 
> 标签：postgresql, pg-dump

如何在 PostgreSQL 数据库中进行模式级备份并在另一个数据库上恢复？是否有任何可用的命令？例如，我可以单行 pg_dump 和恢复吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-24T12:08:21.107

```
pg_dump --schema=masters oldDB > masters1.sql
cat masters1.sql | psql newDB 
```

或者

在单个命令中，您可以这样做

```
pg_dump oldDB --schema masters  | psql -h localhost newDB; 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-05-13T21:29:15.167

备份模式并在系统上为 postgresql 恢复它，如下所示：

数据库的转储模式

```
pg_dump -s database_name > db.sql 
```

特定表的转储模式

```
pg_dump -s database_name -t table_name > db.sql 
```

使用以下命令恢复备份的架构

```
psql -d database_name -h localhost -U postgres < path/db.sql 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-11T06:10:12.743

`-s`或`--schema-only`从转储 [文档中排除数据](https://www.postgresql.org/docs/9.1/app-pgdump.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-24T12:24:28.437

[文档](http://www.postgresql.org/docs/current/interactive/app-pgdump.html)有什么问题？

手册中的示例：

> 要转储名称以东或西开头并以 gsm 结尾的所有模式，不包括名称包含单词 test 的任何模式：
> 
> $ pg_dump -n 'east*gsm' -n 'west*gsm' -N ' *test* ' mydb > db.sql

# c# - AppDomain.DoCallback()在什么情况下会失败？

> ID：12564780
> 
> 赞同：1
> 
> 时间：2012-09-24T12:07:47.053
> 
> 标签：c#, .net, appdomain, .net-assembly

我正在尝试使用`AppDomain`运行时加载和卸载程序集。在实现程序集加载之前，我试图让 MSDN 上的示例在我的应用程序中工作，但我遇到了问题 - `DoCallback`-invokation 失败并出现异常

> 无法加载文件或程序集“[MyPluginAssembly]、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

我的程序集 ( `[MyPluginAssembly]`) 正在运行，由主机应用程序加载（即它是一个插件）。插件`AppDomain`似乎是应用程序域（即它没有在单独的域中沙箱化）。我已经尝试在新域中加载条目/调用/执行程序集以确保`[MyPluginAssembly]`已加载，但即使这些调用返回非空值，我仍然会收到上述异常。

我使用的代码（如[MSDN 上的示例](http://msdn.microsoft.com/en-us/library/system.appdomain.docallback.aspx)+ 加载“父”程序集的代码）：

```
public class PingPong : MarshalByRefObject
{
    private string greetings = "PING!";

    public static void Main()
    {
        AppDomain otherDomain = AppDomain.CreateDomain("otherDomain");
        // All of these Load()-calls returns non-null
        Assembly entryAssembly = otherDomain.Load(Assembly.GetEntryAssembly().GetName());
        Assembly callingAssembly = otherDomain.Load(Assembly.GetCallingAssembly().GetName());
        Assembly executingAssembly = otherDomain.Load(Assembly.GetExecutingAssembly().GetName());

        PingPong pp = new PingPong();
        pp.MyCallBack();
        pp.greetings = "PONG!";
        otherDomain.DoCallBack(new CrossAppDomainDelegate(pp.MyCallBack));

        // Output: 
        //   PING! from defaultDomain 
        //   PONG! from defaultDomain
    }

    // Callback will always execute within defaultDomain due to inheritance from 
    // MarshalByRefObject 
    public void MyCallBack()
    {
        string name = AppDomain.CurrentDomain.FriendlyName;
        if (name == AppDomain.CurrentDomain.SetupInformation.ApplicationName)
        {
            name = "defaultDomain";
        }
        Console.WriteLine(greetings + " from " + name);
    }
} 
```

什么情况会导致我得到异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:07:06.710

您应该查看[CreateInstanceFromAndUnwrap](http://msdn.microsoft.com/en-us/library/y7h7t2a2.aspx)方法。它适用于像您这样的沙盒加载项方案。System.AddIn (MAF) 正在使用此方法加载加载项管道段。

# iphone - iOS 应用程序在连续拍照期间崩溃

> ID：12564782
> 
> 赞同：0
> 
> 时间：2012-09-24T12:07:55.907
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，单击按钮即可按顺序拍摄五张照片。但是，当我在这张照片拍摄过程中按下设备中的主页按钮时，应用程序像往常一样进入其后台阶段，但是当我尝试重新启动时，应用程序崩溃了。你能建议任何解决这个问题的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:18:06.833

嗨，请参考这三种方法，这可能会解决您的内存泄漏问题，实际上崩溃是由于内存泄漏，因为有时当我们拍摄更多高分辨率照片并且我们正在使用它是我们的应用程序时，iphone 无法处理更多内存。

还有一件事我需要说对不起，因为我不知道如何格式化代码。

*   (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info { [picker dismissModalViewControllerAnimated:YES]; [选择器发布]；

    [popoverdismissPopoverAnimated:YES]; [弹出框发布]；

    UIImage *capturedImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"]; [self performSelector:@selector(waitUntillImageCaptured:) withObject:capturedImage afterDelay:0.2]; }

    -(void)waitUntillImageCaptured:(UIImage *)originalImage {
    UIImage *tempimg;

    tempimg = [self scaleAndRotateImage:originalImage];

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSString *imagePath = [[appDelegate applicationDocumentDirectoryString] stringByAppendingPathComponent:@"ClientTempthumb.png"];

    //UIImageView *tempView = [[UIImageView alloc] initWithImage:tempimg]; NSData *data = [NSData dataWithData:UIImagePNGRepresentation(tempimg)];

    if(data != nil) { [data writeToFile:imagePath atomically:YES]; } else { [[NSFileManager defaultManager] removeItemAtPath:imagePath error:NULL]; }

    [btnPhoto setImage:tempimg forState:UIControlStateNormal]; [池释放]；// [appDelegate hideLoadingView]; }

    *   (UIImage *)scaleAndRotateImage:(UIImage *)image { int kMaxResolution = 550; // 管他呢

    CGImageRef imgRef = image.CGImage;

    CGFloat 宽度 = CGImageGetWidth(imgRef); CGFloat 高度 = CGImageGetHeight(imgRef);

    CGAffineTransform 变换 = CGAffineTransformIdentity; CGRect bounds = CGRectMake(0, 0, width, height); if (width > kMaxResolution || height > kMaxResolution) { CGFloat ratio = width/height;

    ```
    if (ratio > 1) 
    {
        bounds.size.width = kMaxResolution;
        bounds.size.height = roundf(bounds.size.width / ratio);
    }
    else 
    {
        bounds.size.height = kMaxResolution;
        bounds.size.width = roundf(bounds.size.height * ratio);
    } 
    ```

    }

    CGFloat scaleRatio = bounds.size.width / width; CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef)); CGFloat boundHeight; UIImageOrientation 方向 = image.imageOrientation;

    开关（方向）{

    ```
    case UIImageOrientationUp: //EXIF = 1

        // landscape right
        transform = CGAffineTransformIdentity;
        break;

    case UIImageOrientationUpMirrored: //EXIF = 2
        transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        break;

    case UIImageOrientationDown: //EXIF = 3

        // landscape left
        transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;

    case UIImageOrientationDownMirrored: //EXIF = 4
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
        transform = CGAffineTransformScale(transform, 1.0, -1.0);
        break;

    case UIImageOrientationLeftMirrored: //EXIF = 5
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationLeft: //EXIF = 6
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationRightMirrored: //EXIF = 7
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeScale(-1.0, 1.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    case UIImageOrientationRight: //EXIF = 8

        // Portrait Mode 
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    default:
        [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"]; 
    ```

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef 上下文 = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) { CGContextScaleCTM(context, -scaleRatio, scaleRatio); CGContextTranslateCTM(context, -height, 0); } else { CGContextScaleCTM(context, scaleRatio, -scaleRatio); CGContextTranslateCTM(context, 0, -height); }

    CGContextConcatCTM（上下文，变换）；

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef); UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext();

    返回图像复制；}

# opengl - Kdevelop 4 链接 glew 和 freeglut

> ID：12564784
> 
> 赞同：0
> 
> 时间：2012-09-24T12:08:02.777
> 
> 标签：opengl, kdevelop, kdevelop4

如何使用 Kdevelop 4 将 glew 和 freeglut 链接到我的项目？glut 和 opengl 的功能显示在代码完成建议列表中，但是当我构建它时，由于未定义对 glut 函数的引用而失败。我必须如何设置以及设置哪些内容？路径？标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:33:49.073

您需要添加链接器标志`-lGLEW -lglut`

# java - 如何使用 java 查找 SSH RSA 密钥的密钥长度

> ID：12564787
> 
> 赞同：2
> 
> 时间：2012-09-24T12:08:08.120
> 
> 标签：java, ssh, rsa, jsch

我正在使用 JSCH API 来查找 RSA SSH 密钥的长度。

我使用以下代码来做到这一点：

```
KeyPairRSA KPR = (KeyPairRSA) KeyPairRSA.load(jsch, keypath);
System.out.println("size " +KPR.getKeySize()); 
```

这总是返回长度 1024 。我认为它的错误与 API 本身有关。谁能告诉我如何找到 RSA/DSA SSH 密钥的长度？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:58:28.213

我是JSch的作者。

这是一个错误或 KeyPair* 类的不完整。它们刚刚被引入用于密钥对生成目的。但是，在我们的内部开发版本中，KeyPair* 类已经过大修，并且该方法运行良好。

# 这是题外话，但我们添加了对 Putty 私钥格式的支持，作为奖励！:-)

无论如何，该修复将在下一个版本中提供，如果您等不及，请将 KeyPairRSA#getKeySize() 替换为以下内容，

```
public int getKeySize(){
  return (new java.math.BigInteger(n_array)).bitLength();
} 
```

# mongodb - 在 MONGODB 中拆分和计算 CSV 中的数据时出现问题（在列名中具有 Null 值：“”）

> ID：12564791
> 
> 赞同：0
> 
> 时间：2012-09-24T12:08:19.827
> 
> 标签：mongodb

我使用以下脚本来拆分和计算字段（mongodb）中逗号分隔值的数据数。但在我的情况下，我有像这样的空值“”，它显示“errmsg”：“异常：reduce -> 还不支持多个”，（这个错误）。如果值不为空，则它可以正常工作。我需要为具有像这样的空值的列工作它[字符：“”]。请帮助。

错误：“errmsg”：“异常：reduce -> 尚不支持多个”，“代码”：10075，“ok”：0

```
enter code here
map = function() {
var array = this.characters.split(',');
emit(this.characters, array.length);
}

reduce = function(key, values) {
return values;
}

result = db.runCommand({
    "mapreduce" : "book", 
    "map" : map,
    "reduce" : reduce,
    "out" : "comma_result"
 });` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:51:58.117

我想我已经发现了问题所在。考虑以下输入数据：

```
{_id: 1, characters: ""}
{_id: 2, characters: "a, b, c"}
{_id: 3, characters: "a, b, c"}

> db.collection.mapReduce(map, reduce, {out: { inline : 1}})
"exception: reduce -> multiple not supported yet" 
```

此错误消息表明 MR 当前不能用于返回值数组。如果你看一下你的 reduce 函数：

```
reduce = function(key, values) {
    return values;
} 
```

“values”将是一个由键组合在一起的“array.length”数组。由于键“a,b,c”被发射了两次（对于带有“”的多个文档遵循相同的逻辑），值（在我的示例中）是一个包含两个元素的数组，并且 MR 不能返回数组。

如果为特定键发出单个文档（_id:1 就是这种情况），则不会调用 reduce 函数。这解释了为什么在不发出空字符时不会收到错误消息。

要让这个 MR 操作起作用，您需要为 {characters: ""} 发出一个文档。如果您提供有关您的数据的其他信息，我们可能会帮助您找到解决方法。

编辑：

以下 reduce 函数将确保返回单个值而不是数组：

```
reduce = function(key, values) {
        return values[0];
} 
```

编辑2：

为了防止错误，“errmsg”：“异常：映射调用失败：JS错误：TypeError：this.characters没有属性nofile_b：1”，“code”：9014 ...

```
map = function() { 
    if (this.characters != null){ 
         var array = this.characters.split(','); 
         emit(this.characters, array.length);
    } 
} 
```

# php - 教义：与属性或位置的多对多关系

> ID：12564793
> 
> 赞同：2
> 
> 时间：2012-09-24T12:08:20.863
> 
> 标签：php, database, orm, symfony, doctrine

我有这些实体：

第一：ProductCupMain -> 喜欢一个产品

```
<?php

namespace xxx\Security\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * xxx\Security\Entity\ProductCupMain
 *
 * @ORM\Table(name="product_cup_main")
 * @ORM\Entity
 */
class ProductCupMain
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=45, nullable=true)
     */
    private $name;

    /**
     * @var string $image
     *
     * @ORM\Column(name="image", type="string", length=128, nullable=true)
     */
    private $image;

    /**
     * @var string $pdf
     *
     * @ORM\Column(name="pdf", type="string", length=128, nullable=true)
     */
    private $pdf;

    /**
     * @var ProductCategories
     *
     * @ORM\ManyToMany(targetEntity="ProductCategories", inversedBy="productCupMain")
     * @ORM\JoinTable(name="product_cup_main_has_product_categories",
     *   joinColumns={
     *     @ORM\JoinColumn(name="product_cup_main_id", referencedColumnName="id")
     *   },
     *   inverseJoinColumns={
     *     @ORM\JoinColumn(name="product_categories_id", referencedColumnName="id")
     *   }
     * )
     */
    private $productCategories; 
```

第二个：ProductCategories -> like Categories

```
<?php

namespace xxx\Security\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * xxx\Security\Entity\ProductCategories
 *
 * @ORM\Table(name="product_categories")
 * @ORM\Entity
 */
class ProductCategories
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=45, nullable=false)
     */
    private $name;

    /**
     * @var string $image
     *
     * @ORM\Column(name="image", type="string", length=100, nullable=true)
     */
    private $image;

    /**
     * @var string $shortname
     *
     * @ORM\Column(name="shortname", type="string", length=164, nullable=false)
     */
    private $shortname;

    /**
     * @var integer $position
     *
     * @ORM\Column(name="position", type="integer", nullable=false)
     */
    private $position;

    /**
     * @var ProductCupMain
     *
     * @ORM\ManyToMany(targetEntity="ProductCupMain", mappedBy="productCategories")
     */
    private $productCupMain; 
```

所以，我想在许多类别中保存许多产品。（ManyToMany 关系）我的问题是一个位置。产品在类别中有不同的位置。

我想保存关系上的位置，如下所示：

[http://i.stack.imgur.com/Z0gzw.jpg](https://i.stack.imgur.com/Z0gzw.jpg)

我需要一个方法，例如： getPositionInCategory($categoryId) 我可以在其中获得正确的位置。你能帮助我吗 ？

[此外，我在这里](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table)发现了类似的问题，但我无法为我找到正确的解决方案。

**编辑 1**

@mbinette 的解决方案：我创建了第三个实体供参考。这样对吗 ？

//产品类别参考

```
<?php

namespace xxx\Security\Entity;

use Doctrine\ORM\Mapping as ORM;

    /**
     * xxx\Security\Entity\ProductCategoryReference
     *
     * @ORM\Table(name="product_cup_main_has_product_categories")
     * @ORM\Entity
     */
    class ProductCategoryReference
    {

        /**
         * @ORM\ManyToOne(targetEntity="ProductCupMain", inversedBy="categoriesHavetheProduct") 
         */
        private $prductCupMain;

        /**
         * @ORM\ManyToOne(targetEntity="ProductCategories", inversedBy="productsInCategory")
         */
        private $productsCategorie; 

        /**
         * @ORM\Column(name="postionInCategorie", type="integer", length=164, nullable=false)
         */
        private $postionInCategorie;

        public function getProductCupMain()
        {
            return $this->prductCupMain;
        }

        public function setProductCupMain($prductCupMain)
        {
            $this->prductCupMain = $prductCupMain;
        }

        public function getProductsCategorie()
        {
            return $this->productsCategorie;
        }

        public function setProductsCategorie($productsCategorie)
        {
            $this->productsCategorie = $productsCategorie;
        }

        public function getPostionInCategorie()
        {
            return $this->productsCategorie;
        }

        public function setPostionInCategorie($postionInCategorie)
        {
            $this->postionInCategorie = $postionInCategorie;
        }

    } 
```

但是产品实体和类别实体是什么？

产品实体：

```
/**
 * @var CategoryHavetheProduct
 * 
 * @OneToMany(targetEntity="ProductCategoryReference", mappedBy="productCupMain")
 * 
**/
   private $categoriesHavetheProduct;

   //Please show me the getter and setter methods 
```

类别实体：

```
/**
 * @var ProductsInCategory
 * 
 * @OneToMany(targetEntity="ProductCategoryReference", mappedBy="productsCategorie")
 * 
 **/
private $productsInCategory;

//Please show me the getter and setter methods 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:21:34.783

无法向 Dotrine/Doctrine2 实体关系添加更多属性。如果您需要保存更多与关系相关的数据（除了所涉及的实体），那么它不仅仅是一个简单的关系，不是吗？;-)

您可以做的正是您在图表中所做的 - 创建 3 个不同的实体，它们由 ManyToOne/OneToMany 关系链接。然后您可以自定义该实体并添加您需要的信息/职责。

**编辑**

你所说的职位，是指你设定的职位，对吧？或者你的意思是你想保持它们被添加到你的收藏中的顺序？如果是这样，有一些关于它的未解决的票（[票 1](http://www.doctrine-project.org/jira/browse/DDC-213)和[票 2](http://www.doctrine-project.org/jira/browse/DDC-181)），所以也许我们将来会看到。现在，我认为您必须坚持使用 RelationshipEntity（3 个实体）。

希望这可以帮助。

# php - 将运行时创建的下拉列表值保存到数据库中

> ID：12564794
> 
> 赞同：1
> 
> 时间：2012-09-24T12:08:21.187
> 
> 标签：php, javascript, mysql, html

我创建了一个表格，其中包括测试代码、测试名称、测试参数、仪器代码和添加测试参数按钮，测试代码、测试名称、测试参数是文本框，仪器代码是下拉列表框，单击添加测试参数按钮新文本框和仪器代码下拉列表将生成，其运行时创建的文本框值将保存到数据库中，但仪器代码值不能更改。对于所有新生成的文本框保持相同。我要保存选择下拉列表项你能指导我这是我的 PHP 代码：

```
 <?PHP
        include_once "dTestCreation.php";   
            global $Hostname;   
        global $Username;   
        global $Password;           
        global $Database_name;  

    function getConnection()    
    {
        $Hostname = "localhost";    
        $Username ="root";
        $Password ="";
        $Database_name="labdata";

        $oMysqli = new mysqli($Hostname,$Username,$Password,$Database_name);    //create connection object.

        return($oMysqli);   //return connection object.
    }
        if(isset($_POST['submit'])) //when click on submit button
    {

        $Testcode = $_POST['testcode'];
        $TestName = $_POST['testname'];
        $TestParameter = $_POST['testparameter'];
        $Instrumentcode = $_POST['instrument_code'];

        $InsertQuery = "INSERT INTO demo_test(testcode,testname) VALUES('$Testcode','$TestName')";  //query for insert data into table
        $oMysqli=getConnection();       //establish connection
        $oMysqli->query($InsertQuery);
        //print_r($InsertQuery);exit();

        $InsertQuery1 = "INSERT INTO test_table(testcode,testparameters,instrument_code) VALUES('$Testcode','$TestParameter','$Instrumentcode')";   //query for insert data into table
        $oMysqli=getConnection();       //establish connection
        $oMysqli->query($InsertQuery1);

        $length = count($_POST['testparameters']);
        for($i=0;$i<$length;$i++)
             {
                //echo $_POST['testparameters'][$i];
                $a =  $_POST['testparameters'][$i];

                $na = array('testparameters' => $a['testparameters']);
                foreach($na as $k => $v)
                {
                    $na[$k] = mysql_real_escape_string($v);
                }
                $TestParameters = $na['testparameters'];

        $TestParameters = $_POST['testparameters'][$i];
            $InsertQuery2 = "INSERT INTO test_table(testcode,testparameters,instrument_code) VALUES('$Testcode','$TestParameters','$Instrumentcode')";  //query for insert data into table
            $oMysqli=getConnection();       //establish connection
                $oMysqli->query($InsertQuery2);

            }
      } 
    ?>
    <html>
    <head>
    <title>TestData</title>
    <script type="text/javascript"> 
    function create_row()   //create function create_row
    {
        var newtr=document.createElement("tr");  //variable for tr
        var newtd=document.createElement("td");  //variable for  td 
        var newtd1=document.createElement("td"); //variable f 
        var output="<input type=\"text\" name=\"testparameters[]\">";
        var output1="<select id=\"instrument_name\" name=\"instrument_name\"><?php include_once "dTestCreation.php";    //include file dTestCreation.php 
        $tResult = getIname();  
        for($kkk=0;$kkk<count($tResult);$kkk++)
        {
            echo "<option value=".$tResult[$kkk].">".$tResult[$kkk]."</option>";    
        }//display values of instrument into list.
    ?></select>";
          newtd.innerHTML=output;  //display first td
          newtd1.innerHTML=output1; //display second td
          newtr.appendChild(newtd); //increment no of rows.
          newtr.appendChild(newtd1);
          document.getElementById("table1body").appendChild(newtr);
       }
    </script>
    </head>
    <body>

    <form name="testdetails" method="post" target="_self" action="<?php $_PHP_SELF ?>">

    <label for='Testcode'>Testcode</label>
    <input type="text" name="testcode"></input>

    <label for='TestName'>TestName</label>
    <input type="text" name="testname"></input><br></br>

    <label for='Testparameter'>Testparameter</label>
    <input type="text" name="testparameter"></input>

    <label for='Instrumentcode'>Instrumentcode</label>
    <select name="instrument_name" id="instrument_name">
      <?php 
        $tResult = getIname(); 
        for($kkk=0;$kkk<count($tResult);$kkk++) 
        {
           echo "<option value=".$tResult[$kkk].">".$tResult[$kkk]."</option>"; 
        }
      ?>
    </select>
    <table>
          <tbody id="table1body">
               <tr>
        <!--<td><input type="textfield" name="testparameters"></td>-->
             <td> <input type="button" name="button" value="Add Test Parameter" onclick="create_row()"> <!--call function create_row() for onclik add new row-->
          </tr>
        </tbody>
       </table>
       <input type="submit" name="submit" value="submit"></input>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:23:05.837

当您有同名的不同表单元素时（假设不使用数组），发送到操作页面的值是最后一个具有该名称的表单元素的值。

## **解决方案1：**

*   单击添加新测试名称时，将选定下拉列表的值写入每个记录集的隐藏字段中。

## 解决方案2：

只需使用数组

```
<select name = "instrument_name[]" id="instrument_name">
//php code
</select> 
```

只需`print_r($_POST)`在操作页面上执行即可，每个表单元素都会有一个数组，从这里您可以获取值

# testing - 从命令行运行时，运行 Mocha 测试（记者 html）的 Backbonejs 挂起

> ID：12564795
> 
> 赞同：1
> 
> 时间：2012-09-24T12:08:26.140
> 
> 标签：testing, backbone.js, jenkins, requirejs, mocha.js

我们正在编写一个基于 Backbone.js 的应用程序，并尝试将我们的 Mocha 测试与我们的 Jenkins 持续集成服务器一起使用。

到目前为止，我可以使用[Testem](https://github.com/airportyh/testem)或[mocha-phantomjs 之](https://github.com/metaskills/mocha-phantomjs)类的东西运行测试。测试运行，但它们从不触发退出代码，因此脚本永远不会返回到命令行提示符。这正是脚本应该做的，所以我猜测我们设置 Mocha 测试库的方式有问题。我自己没有发现问题。

有没有其他人遇到过这个问题，至少找到了解决方法。

有任何想法吗？

我们的 test.html

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Dashboard Mocha Tests</title>
  <link rel="stylesheet" href="css/mocha.css" />

  <script src="js/vendor/require.js" type="text/javascript"></script>
  <script>
    requirejs.config({
      baseUrl: 'js/',
      paths: {
        jquery        : 'vendor/jquery.min',
        underscore    : 'vendor/underscore',
        backbone      : 'vendor/backbone',
        handlebars    : 'vendor/handlebars',
        text          : 'vendor/require-text',
        json          : 'vendor/require-json',
        chaplin       : 'vendor/chaplin',
        mocha         : 'vendor/mocha',
        chai          : 'vendor/chai',
        sinon         : 'vendor/sinon',
        moment        : 'vendor/moment'
      },
      shim: {
        backbone: {
          deps        : ['underscore', 'jquery'],
          exports     : 'Backbone'
        },
        underscore: {
          exports     : '_'
        }
      }
    });

  if (location.hash === '#testem')
    document.write('<script src="/testem.js"></'+'script>')
</script>
</head>
<body>
  <div id="mocha"></div>
  <script type="text/javascript">
    require(['require', 'vendor/chai', 'vendor/mocha', 'vendor/sinon'], function(require, chai) {

      assert = chai.assert;
      expect = chai.expect;
      should = chai.should();

      mocha.setup({
        ui: 'bdd',
      });
      var specs = [
        'test/lib/utils',
        'test/models/campaigns',
        'test/models/campaign',
        'test/views/input/input',
        'test/views/input/text',
        'test/views/input/textarea',
        'test/views/input/checkbox',
        'test/views/input/email',
        'test/views/input/password',
        'test/views/input/button',
        'test/views/input/submit_button',
        'test/views/input/reset_button',
        'test/views/input/number',
        'test/views/input/date_time',
        'test/views/input/date'
      ];
      require(specs, function() {
         mocha.run()
      })
    })
  </script>

</body>
</html> 
```

这是我们的一个测试外观的示例。

```
(function() {

  define(['views/forms/textarea'], function(Textarea) {
    'use strict';
    return describe('Textarea', function() {
      var field;
      field = new Textarea;
      describe('defaults', function() {
        it('is enabled by default', function() {
          return assert.isTrue(field.isEnabled());
        });
        return it('contains one textarea field', function() {
          return assert.lengthOf($(field.el).find('textarea'), 1);
        });
      });
      return describe('value', function() {
        return it('can have set and get a value', function() {
          field.setValue('my super value');
          return assert.equal('my super value', field.getValue());
        });
      });
    });
  });

}).call(this); 
```

任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:51:02.253

你试过在`ci`模式下运行 testem 吗？我这样运行它：

```
% testem ci --launch PhantomJS 
```

只要确保`phantomjs`可执行文件在您的路径中并且一切正常。

# android - 如何在 android 中为我的活动制作像通知栏一样的滑块效果？

> ID：12564797
> 
> 赞同：2
> 
> 时间：2012-09-24T12:08:35.383
> 
> 标签：android

我想通过我们将如何通过关闭打开通知来打开另一个布局或屏幕。我想要从下到上并从上到下关闭它。所以你能帮我怎么做吗？

# web-applications - Boot 2 Gecko 开发套件

> ID：12564798
> 
> 赞同：1
> 
> 时间：2012-09-24T12:08:40.993
> 
> 标签：web-applications, firefox-os

我正在研究用于开发 Web 应用程序的 Mozilla 的 Boot 2 Gecko Os，它还将公开硬件和系统级访问（相机、文件系统、联系人）的功能。

任何人都可以建议应该使用哪个合适和首选的开发 IDE 以及我可以从哪里获得开发套件得到 Boot 2 Gecko？

谢谢，拉克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:18:19.193

Firefox OS (B2G) 应用程序只是增强版的 Web 应用程序，因此您可以使用标准的 Web 开发工具集为其创建应用程序。没有外部依赖项（如 Android 和 iOS SDK），它只是 HTML，可以通过一组 JavaScript API 访问设备方向、相机和本地文件系统等内容。

[您可以在Mozilla Developer Network](https://developer.mozilla.org/)上找到大量的 HTML、CSS、JavaScript 和 DOM 文档，还有[一个专门介绍 Firefox OS 的部分](https://developer.mozilla.org/en-US/docs/Mozilla/Firefox_OS)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:45:42.457

您可以使用标准的 Web 开发工具进行开发，并使用 Firefox 内置/Firebug 调试工具来测试 Firefox OS (B2G)。虽然您可能需要物理设备来测试某些功能（相机、加速器......等）。

1.  您可以获得 Firefox Nightly (Aurora)

    Firefox 每晚[http://nightly.mozilla.org/](http://nightly.mozilla.org/)

2.  然后安装 Firefox-os Simulator 插件

    Firefox-os 模拟器[https://addons.mozilla.org/firefox/addon/firefox-os-simulator/](https://addons.mozilla.org/firefox/addon/firefox-os-simulator/)

3.  从工具/开发人员/Firefox OS 模拟器运行模拟器

4.  准备本地或远程 Web 服务器来托管您的网页。

5.  在模拟器的浏览器中打开您的页面并查看它的外观

完毕。您可以按照 Firefox MarketPlace 的 Web 开发人员指南来改进您的网页，使其成为优雅的应用程序 [https://marketplace.firefox.com/developers/docs/web_developers](https://marketplace.firefox.com/developers/docs/web_developers)

# python - PyLab 中的插值

> ID：12564804
> 
> 赞同：1
> 
> 时间：2012-09-24T12:08:59.477
> 
> 标签：python, arrays, function, numpy, scipy

我有两个数组`x`，`y`带有一个函数的坐标。

例子：

```
x=[0,1,2,3,4,5]
y=[0,1,5,20,30,32] 
```

`pylab.plot(x,y)`向我展示了一个平滑的功能。

有没有办法获得`x`-Value for `y=3`？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:10:09.777

您应该可以使用`numpy.interp`它。

例如：

```
numpy.interp(3.,y,x)  #1.5 
```

请注意，这仅适用于您的 y 值是单调的。如果您的 y 值不是单调的，则无法保证您的 y->x 映射是唯一的。

# maven - 如果服务器中缺少应用程序，则停止应用程序并在服务器上部署应用程序

> ID：12564807
> 
> 赞同：1
> 
> 时间：2012-09-24T12:09:06.763
> 
> 标签：maven, maven-2, weblogic, pom.xml, weblogic12c

我正在使用 Maven 版本 2.2.1 在 Weblogic Server 12.1.1 上部署应用程序。

我已经编写了 pom.xml 文件并将应用程序部署在 weblogic 服务器中。

现在，如果服务器中缺少应用程序，则停止应用程序目标将失败。

所以在我的情况下，如果应用程序不存在，它应该跳过其余的进程并将应用程序部署到服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:36:37.770

maven 标签 `<failOnError>` 可用于此目的。

# tridion - 禁用链接解析的最佳方法？

> ID：12564809
> 
> 赞同：4
> 
> 时间：2012-09-24T12:09:29.937
> 
> 标签：tridion, tridion-2011

我了解在 SDL Tridion 2011 实施中，禁用链接解析有两种可能性。因此，当发布组件时，并非所有链接的组件也会重新发布。

这两种方式是：

*   使用**事件系统**，通过订阅发布事件并修改解析指令，如下所示：

```
args.PublishInstruction.ResolveInstruction.IncludeComponentLinks = false; 
```

*   使用自定义解析器并实现`Tridion.ContentManager.Publishing.Resolving.IResolver`接口

问题是：这些选项中的哪一个更受欢迎，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:53:26.030

我认为事件系统是最有效的。解析器将起作用，但您将对已解析的项目进行“后处理”。我的意思是，您将从默认解析器添加的发布事务中过滤掉项目。偶数系统将首先阻止此链接被解析。

# c# - 阻止线程进入方法

> ID：12564812
> 
> 赞同：0
> 
> 时间：2012-09-24T12:09:56.763
> 
> 标签：c#, multithreading

示例代码：

```
MyObject myObject = new MyObject ();

public void FunA () // accessed from thread 1 (when user click a button)
{
    myObject = null;
    // do some stuff
    myObject = new MyObject ( someNewValues );
}

public void FunB () // accessed from thread 2 (calling using timer or smth.)
{
    int x = myObject.ReadX ();
} 
```

在大多数情况下，它可以正常工作，但是当 FunA 将 myObject 设为 null 并且 FunB 将同时访问它时，应用程序将崩溃。

问题：如何做到这一点，当线程1访问FunA时，线程2无法进入FunB？

**更新：**我之前尝试过锁，但问题是 FunB 正在调用线程 1 (GUI) (guiForm.Invoke) 的事件，线程 1 将在 FunA { lock...} 之前卡住。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:12:28.580

只需在锁定对象上发出锁定，如下所示：

```
static object lockObject = new Object();
MyObject myObject = new MyObject (); 

public void FunA () // accessed from thread 1 (when user click a button) 
{ 
    lock (lockObject)
    {
        myObject = null; 
        // do some stuff 
        myObject = new MyObject ( someNewValues ); 
    }
} 

public void FunB () // accessed from thread 2 (calling using timer or smth.) 
{ 
    lock (lockObject)
    {
        int x = myObject.ReadX (); 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:24:27.150

这是另一种方法，也许使用像[AutoResetEvent这样的](http://msdn.microsoft.com/en-us/library/System.Threading.AutoResetEvent.aspx)[EventWaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.aspx)，所以线程 2 阻塞，直到线程 1 设置了线程同步对象。

示例代码：

```
MyObject myObject = new MyObject ();
private static EventWaitHandle WaitHandle_m = new AutoResetEvent(false);

public void FunA () // accessed from thread 1 (when user click a button)
{   
    myObject = null;
    // do some stuff
    myObject = new MyObject ( someNewValues );
    WaitHandle_m.Set();
}

public void FunB () // accessed from thread 2 (calling using timer or smth.)
{
    if (!WaitHandle_m.WaitOne(TimeSpan.FromMinutes(10)))
    {
        // whoops.
    }
    else
    {
        int x = myObject.ReadX ();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:11:48.940

您可以锁定`myObject`，以便只有当前线程可以使用它。

```
public void FunA () // accessed from thread 1 (when user click a button)
{
  lock(myObject)
    {
       myObject = null;
       // do some stuff
       myObject = new MyObject ( someNewValues );
    }
} 
```

这将阻止`FunB`访问`myObject`，直到它被锁释放。

**更新**

正如评论中所指出的，修改您锁定的对象可能不是一个好主意。在这种情况下，您可以简单地拥有一个您锁定的对象和一个您修改的对象，这样：

```
var lockObj = new object();
var myObject = new MyObject();

public void FunA () // accessed from thread 1 (when user click a button)
{
  lock(lockObj)
    {
       myObject = null;
       // do some stuff
       myObject = new MyObject ( someNewValues );
    }
}

public void FunB () // accessed from thread 2 (calling using timer or smth.)
{
    lock(lockObj)
    {
       int x = myObject.ReadX ();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T12:13:20.287

这是一个经典的同步问题。互斥锁将很有用。从 MSDN 查看示例。 [http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

应该是这样的

```
MyObject myObject = new MyObject ();
Mutex mutex = new Mutex();

public void FunA ()
{
    mutex.WaitOne();
    myObject = null;
    // do some stuff
    myObject = new MyObject ( someNewValues );
    mutex.ReleaseMutex();
}

public void FunB ()
{
    mutex.WaitOne();
    int x = myObject.ReadX ();
    mutex.ReleaseMutex();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T12:20:20.273

看看[Lazy 类](http://msdn.microsoft.com/en-us/library/dd642331.aspx)。这可确保**自动处理对具体对象的**多线程访问。

您可以通过在构造函数中定义[LazyThreadSafetyMode](http://msdn.microsoft.com/en-us/library/system.threading.lazythreadsafetymode.aspx)来控制**如何**处理同时访问。

# linux-device-driver - 使用 MAJOR 和 MINOR 设备号

> ID：12564824
> 
> 赞同：0
> 
> 时间：2012-09-24T12:10:55.573
> 
> 标签：linux-device-driver

我对主要和次要设备号的概念有一些澄清。我理解以下概念。

*   在 Linux 世界中，硬件设备不过是称为设备文件的文件（但特殊）。
*   并且每个设备文件都与捆绑到一个`dev_t`类型中的 MAJOR 和 MINOR 编号相关联。
*   这些编号由函数分配给设备`register_chrdev_region`

我的问题是这些数字到底在哪里使用。截至我检查时，它引导我得到以下答案

> 内核使用此编号来识别与设备关联的驱动程序

谁能帮我这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:15:48.747

做 a`ls -l /dev/*`会显示一些类似的东西

```
...
crw-rw---T+ 1 root audio 116, 33 sept. 21 09:19 timer
... 
```

是这个`116, 33`特定设备的主要和次要设备。

Tha major 设置设备的类型，通常是与其关联的驱动程序。次要列出该类型的第一个、第二个、第三个……设备。

每个主要编号只有一个驱动程序，并且可以处理多个未成年人。

当然，现在可以动态分配这些数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:26:00.147

简单来说，

**主要编号**告诉使用哪个驱动程序。此编号是在注册设备驱动程序时分配的。

**次要编号**告诉哪个设备确切使用了该设备类型。

假设硬盘可能有四个分区。每个分区将具有单独的次要编号，其中只有一个主要编号。因为所有分区都使用相同的存储驱动程序。

更多详情，[http://www.makelinux.net/ldd3/](http://www.makelinux.net/ldd3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T17:39:30.490

主设备号和次设备号告诉内核如何访问设备。

一个通用的主设备号分配给由同一设备驱动程序控制的所有设备。次要编号有助于区分使用相同设备驱动程序的确切设备类型/控制器。

# c++ - 如何在单独的文件中使用 `yy_scan_string(const char *str)`（由 lex yacc 生成）

> ID：12564825
> 
> 赞同：4
> 
> 时间：2012-09-24T12:10:58.283
> 
> 标签：c++, redirect, bison, yacc, lex

我想使用`YY_BUFFER_STATE yy_scan_string(const char *str)`和我的其他功能一样`yyparse()`，`main.cpp`我做了一些事情：

```
extern "C"{
extern YY_BUFFER_STATE yy_scan_string(const char *str);
} 
```

但是有一个错误`error:`YY_BUFFER_STATE' does not name a type`，然后我做了：

```
extern yy_buffer_state;
typedef yy_buffer_state *YY_BUFFER_STATE;
extern int yyparse();
extern YY_BUFFER_STATE yy_scan_buffer(char *, size_t); 
```

但是同样的问题，怎么办，谢谢，非常感谢您的帮助！

这是 main.cpp 文件。#include “main.h”

```
 #include <string.h>
 extern "C"{void scan_string(const char* str);}
 int yyparse();
 void test::getvalue(int& var)
 {
    if (var!=0)
        std::cout<<"True"<<std::endl;
    else
        std::cout<<"False"<<std::endl;
  }

  int main(){
     std::string str="T+F";
     //how to send str as an Input to parse?

     yyparse();
     return 0;
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:14:56.613

最简单的解决方案可能是在您的语法文件中添加一个单独的函数，该函数依次调用`yy_scan_string`.

```
/* Stuff... */

%%

/* Grammar */

%%

void scan_string(const char* str)
{
    yy_switch_to_buffer(yy_scan_string(str));
} 
```

然后`scan_string`从您的代码中调用。

# python - MySQL 中的休眠进程

> ID：12564828
> 
> 赞同：1
> 
> 时间：2012-09-24T12:11:12.783
> 
> 标签：python, mysql, mysql-python

我有一系列旨在长时间运行的 python 脚本。当我查看 MySQL 进程监视器时，我看到其中三个的时间始终为 0，然后我用来将数据实际插入数据库的 2 个将具有始终向上计数的值，并且永远不会被重置到 0 意味着他们最终会遇到可怕的“MySQL 已经消失”。

我正在使用 MySQLdb。

有人可以解释为什么会这样吗？

有没有办法确保他们将此值重置为 0？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:13:36.360

听起来您的空闲超时即将到期。但是，这是在 mysqld 服务器配置中设置的，对于 MySQLdb 来说并不是真正的问题。您需要在服务器配置中或在连接时使用 SQL 语句调整[等待超时系统变量。](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_wait_timeout)

# r - R中的短函数

> ID：12564832
> 
> 赞同：2
> 
> 时间：2012-09-24T12:11:36.677
> 
> 标签：r

我正在尝试重现我在研究论文中发现的分析（转录组分析）。方法部分说：

> 标准化后，计算每个细胞系的表达阈值，以消除可被视为技术噪声的低强度探针。首先，探针组通过增加表达值进行排序。对于每个探针组，进行 t 检验以评估该探针组与具有较少表达值的探针组的中值之间的差异表达。

我在 R 中使用了 shorth 函数来重现这个分析，我想知道你是否认为这是一种合适的方法。

我的数据来自 Affymetrix Hugene 1.1 st 数组。使用 RMA *(dat)*标准化后，我执行以下代码以获得表达较少的探针集：

```
 med.exp <- rowMedians(exprs(dat))
  med <- shorth(med.exprs) 
```

然后，我计算了一个`t.test`用于将每个探针组与*med*值进行比较的

```
 tt <- rep(0.8256, 23) ## 0.8256 is the value of *shorth(med.exprs)* and I have 23 samples
 result.pvalue <- sapply(1:nrow(myAB1_rma.exprs), function(i) t.test(dat[i,], tt)) 
```

这种方法可能有效吗？

提前谢谢了，

胡安

# python - 如何让 zc.sourcerelease 使用本地鸡蛋缓存？

> ID：12564837
> 
> 赞同：2
> 
> 时间：2012-09-24T12:12:19.170
> 
> 标签：python, packaging, buildout

我观看了[这个视频](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-deploying-applications-with-zc-buildout-4897770)并尝试使用源发布工具。

首先，这是文档中不确定的部分：

> 要创建源版本，只需运行 buildout-source-release 脚本，传递文件 URL 或 subversion URL [3] 以及要使用的配置文件的名称。文件 URL 对测试很有用，并且可以与非颠覆源代码控制系统一起使用。

他们的意思是什么文件网址？项目根？

其次，另一个参数应该是 buildout.cfg 的路径。当我在项目中使用通常的 buildout.cfg 时，sourcerelease 会重新构建整个项目。如果它在途中崩溃，`bin/buildout-source-release`不见了，我必须`bin/buildout`再次运行。这是可以避免的吗？

第三，`buildout-source-release`下载包（即使它们是固定的并且这些版本在 中`~/.buildout`）。我还使用 buildout.cfg 中指定的自定义包缓存：

```
[buildout]
index = http://pypi.*****.com 
```

bsr 也忽略它！当然，在我拥有的大约 50 个包中，有一些目前不可用（大多数情况下 Scipy 服务器已关闭）。

如何让它重用我的本地包源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:34:25.167

该脚本通过将提供的 Subversion URL 检出到一个临时目录中，从头开始创建一个完整的发行版，然后在该目录中运行由第二个参数命名的构建配置文件。

或者，代替 Subversion 存储库，它可以只复制文件 URL 指向的目录结构；后者是一种权宜之计，不仅支持 SVN 存储库。例如，您创建 Git 项目的工作副本，然后使用`file:///path/to/git/wc/`URL 指向它。

该脚本构建您的构建的完全独立副本。为此，它必须创建一个*空*缓存并通过让配方完成其工作来填充它。稍后，安装脚本会重用该缓存来运行安装。

此外，recipes 使用自己的方法检查缓存和下载资源，buildout 不会代表 recipes 维护它。因此，目前还没有适当的机制让脚本确定是否可以从现有缓存中重用任何内容。

# excel - 类型不匹配错误 (vba)

> ID：12564842
> 
> 赞同：0
> 
> 时间：2012-09-24T12:12:37.110
> 
> 标签：excel, vba

我在这部分代码的最后一行收到类型不匹配错误：

```
Dim test As Object
Set test = Mid(Trim(row.Cells(1, 19).Value), 9, 1) Mod 2 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:16:06.017

VBA 中没有类型层次结构，`Object`它用于对象实例，它不能保存原始类型。

用一个`Long`

```
Dim test As long
test = Mid(Trim(row.Cells(1, 19).Value), 9, 1) Mod 2 
```

# javascript - 带有 Jquery Mobile 的 Javascript 无法在 Android 2.3 及更低版本中运行

> ID：12564845
> 
> 赞同：4
> 
> 时间：2012-09-24T12:12:53.323
> 
> 标签：javascript, android, jquery, jquery-mobile

我正在开发一个应用程序，但它不会对用户操作做出任何响应。当您提交表单时，您只会得到一个空页面。Anoniem inloggen 按钮也不起作用，两者都是用 javascript 创建的。这仅在使用*Android 2.3*或更低版本时发生。我尝试了很多解决方案，但到目前为止都没有。即使已经给出的解决方案也行不通。

应用程序链接：http: [//goo.gl/MsZfO](http://goo.gl/MsZfO)。

这个应用程序的索引脚本如下所示：

```
<script type="text/javascript">
    $(document).ready(function($) { 
    checkMail();
    $.post('stats.php',
            function (data, textStatus) {
                $('#stats').empty();
                $('#stats').append(data).page();
                $('#stats').page('destroy').page();

            });

            $.post('welcome.php',
            function (data, textStatus) {
                $('#mail').empty();
                $('#mail').append(data).page();
                $('#mail').page('destroy').page();

            });

    function checkMail() {
                    var item = localStorage.getItem('maillogin');
            if (item !== null) {
                window.location = '#stats';
                }
            else{
                window.location = '#mail';
                }
    }
    });
</script> 
```

索引正文：

```
<div data-role="page" data-theme="a" id="mail" data-transition="none">
</div>
<div data-role="page" data-theme="a" id="stats" data-transition="none">
</div> 
```

这是问题页面（welcome.php）脚本：

```
 $(document).ready(function($) { 
    $('#mailform').submit(function () {
            $.mobile.showPageLoadingMsg();
            var email = document.getElementById('email');
            var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if (!filter.test(email.value)) {
                        $.mobile.changePage("#mail");
                        alert('Dit is geen geldig mailadres');
                        $.mobile.hidePageLoadingMsg();
                        return false
                    }
                else{
                if($('#checkbox').attr('checked')) {
            $.post('mailinsert.php',
            $('#mailform').serialize())
                localStorage.setItem('maillogin', $('#email').val());
                $('#inlogmail').empty();
                $('#inlogmail').append(localStorage.getItem('maillogin')).trigger('create');
                $.post('stats.php',
                                         function (data, textStatus) {
                                         $('#stats').empty();
                                         $('#stats').append(data).page();
                                         $('#stats').page('destroy').page();
                                         $.mobile.changePage("#stats");
                                         $.mobile.hidePageLoadingMsg();
                                         });

                }
                else{                       $.mobile.changePage("#mail");
                        alert('De voorwaarden zijn niet geaccepteerd');
                        $.mobile.hidePageLoadingMsg();
                        return false;
                        }

                }
            });
$('#skipright').click(function(){
                localStorage.setItem('maillogin', 'anoniem');
                $.post('stats.php',
                                         function (data, textStatus) {
                                         $('#stats').empty();
                                         $('#stats').append(data).page();
                                         $('#stats').page('destroy').page();
                                         $.mobile.changePage("#stats");
                                         $.mobile.hidePageLoadingMsg();
                                         });

});
}); 
```

问题页面（welcome.php）正文：

```
<form id="mailform">
<div data-role="fieldcontain">
<label for="email">E-mail:</label>
<input name="email" id="email" type="text" />
<br />
<div class="ui-grid-b ui-corner-all ui-shadow ui-bar ui-bar-b">
<input type="checkbox" name="checkbox" id="checkbox" data-role="none"/>
<label for="checkbox">Ja, ik accepteer de voorwaarden</label>
</div></br>
<input type="submit" value="Stemmen maar!"/>
</div>
</form>
<h3><a class="skipright" id="skipright">Anoniem inloggen</a></h3>
</div> 
```

因此，简而言之，welcome.php 中的 .click 和 .submit 等实现的操作在 android 2.3 或更低版本的 index.html 中不起作用。我们如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:15:58.217

尝试更改以下行：

```
window.location = '#stats'; 
```

对于这个：

```
window.location.href += '#stats'; 
```

**更新**：
如果您已经在该位置（如`#home`）加载了锚链接，请执行以下操作：

```
window.location.href = window.location.href.substr(0, window.location.href.lastIndexOf('#')) + '#stats'; 
```

# git - git rm --cached 和致命：pathspec

> ID：12564855
> 
> 赞同：26
> 
> 时间：2012-09-24T12:13:25.840
> 
> 标签：git, git-rm

我只是试图检查我的主分支并遇到：

```
error: Untracked working tree file 'app.xcodeproj/project.xcworkspace/xcuserdata/u.xcuserdatad/UserInterfaceState.xcuserstate' would be overwritten by merge. 
```

因此，我尝试使用以下命令从 git 中删除此文件（我已经在 .gitignore 中添加了一个表达式来捕获它）：

```
git rm --cached app.xcodeproj/project.xcworkspace/xcuserdata/u.xcuserdatad/UserInterfaceState.xcuserstate 
```

并得到：

```
fatal: pathspec 'app.xcodeproj/project.xcworkspace/xcuserdata/u.xcuserdatad/UserInterfaceState.xcuserstate' did not match any files 
```

所以，有点亏。据我了解，工作文件不是这里的问题。但是，为了完整起见，确实存在工作文件。例如

```
ls -l app.xcodeproj/project.xcworkspace/xcuserdata/u.xcuserdatad/UserInterfaceState.xcuserstate
-rw-r--r--  1 u  u  56061 24 Sep 12:42 app.xcodeproj/project.xcworkspace/xcuserdata/u.xcuserdatad/UserInterfaceState.xcuserstate 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T12:46:15.687

所以，解决方案是这样的：

该文件在当前分支 B 中未被跟踪

但它存在于我们尝试签出的分支 A 中，因此我们收到警告，指出当前工作树中的文件将被覆盖（即使我们没有跟踪它）

所以：

1.  删除分支 B 的现有目录中的文件（为了安全起见，我只是将其移出工作树的某个位置）

2.  查看您想要的分支 - 即分支 A

3.  使用以下方法将其从分支 A 中删除：

    git rm --cached app.xcodeproj/project.xcworkspace/xcuserdata/u.xcuserdatad/UserInterfaceState.xcuserstate

注意：Fwiw，分支 A 是我的主分支。B 分支是我的开发分支。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-02T19:42:04.327

对于题名中的问题，一般可以这样解决：

```
git rm --cached *

fatal: pathspec 'blah' did not match any files 

git ls-files 
```

这将列出 git 在其索引中确实具有的文件，然后您可以一一明确地删除它们。例如，如果它列出`img/blah.jpg`：

```
git rm --cached img/blah.jpg 
```

这将解决更一般情况下的 pathspec 错误，无论是此处的其他答案中的分支问题，还是新的 .gitignore 条目，或者在同一目录中使用 2 个 repos 的结果等。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-03T22:23:42.247

简单的：

```
git add file.ext
git rm --cached file.ext 
```

或者

```
git add path/*
git rm --cached path/* 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-26T10:41:57.940

**尝试 --ignore-unmatch 标志**

尝试使用通配符匹配取消跟踪 Git 已经跟踪的某些文件时，我遇到了同样的错误，并且由于有些文件似乎没有退出，我收到了文件不匹配的错误，这导致整个操作崩溃。所以我检查了手册并尝试了**--ignore-unmatch**标志，它就像一个魅力：

`$ git rm --cached --ignore-unmatch cron/*.json`

# ios - 生成游戏代码的图表或层次结构

> ID：12564859
> 
> 赞同：1
> 
> 时间：2012-09-24T12:13:56.687
> 
> 标签：ios, cocos2d-iphone

我想对我的 Cocos2d 游戏结构（尤其是类和方法）有一个图表或分层外观。是否有任何开源软件可以从我的代码中生成它？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:35:04.120

[当您安装了Graphviz时，](http://www.graphviz.org) [Doxygen](http://www.doxygen.nl/)可以做到这一点（至少使用 C 和 C++ 代码）。

# html - 如何提取在ruby watir中没有任何属性的值

> ID：12564860
> 
> 赞同：-1
> 
> 时间：2012-09-24T12:13:58.050
> 
> 标签：html, ruby, regex, text, watir

我有一个响应页面，其中存在一些文本。没有属性可以基于它从响应中获取所需的文本。有人可以给我写一个代码来做同样的事情。我在这里附上了来源。

```
Mux isconnected
requesting...
response got
field id="0" value="0110"field id="3" value="000000"<BR>field id="4" value="000000010000"<BR>field id="6" value="000000010000"<BR>
Response - Success
<-- 0110 000326 33444489 
```

在上面的源代码中，我想提取 [ id="0" value="0110" ]，然后在接下来的测试步骤中使用 value=0100。

我有代码来拆分文本并仅使用值，如下所示

```
text = 'response got field id="0" value="525XXXXXXXXX66"' 
matcher = text.match(/value="(.+)"/) 
puts matcher.captures.first 
```

但首先我需要提取 require 标记或文本，并在上述函数中将其指定为“文本”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:49:06.700

要提取第一个`field id="0" value="0110"`，您可以使用此正则表达式

```
/(field\s+id=".+?"\s+value=".+?")/.match(yourString)[1] 
```

并使用第一组。正则表达式中的组允许您在表达式中获取文本的特定部分，例如，使用正则表达式`/ma(.+?)l/`对`manual`您将在第一组中获得“nua”，即`/ma(.+?)l/.match('manual')[1]`等于“nua”。

如果您想获取特定值（例如 29）的 id 并且 id 总是**在**值之前，请执行此操作

```
str=29
myResult = /field\s+id="#{str}"\s+value="(.+?)"/.match(yourString)[1] 
```

`value`在`\1`组中（即`[1]`），因此`myResult`包含您需要的数字。当然你可以在 str 中放任何东西。

另请看[这里](http://rubular.com/r/nRvFb7JHRa)，这是您需要的正则表达式的工作示例！

**编辑：**

我想我已经正确回答了你的问题。你进一步的澄清要求让我觉得你错过了完成这项任务的编程背景。如果您需要了解其他任何信息，请发布另一个问题或花一些精力学习您正在使用的编程语言。这个社区（据我了解）不欢迎这种行为。

# c# - 加载没有实例的表单

> ID：12564866
> 
> 赞同：0
> 
> 时间：2012-09-24T12:14:49.513
> 
> 标签：c#, winforms

大家好，我想从 加载表单`database`，我将表单名称存储`Form1`在我的数据库中。现在我想在另一个表单按钮单击事件上获取此表单名称我尝试如下通过将表单名称存储在字符串中但我无法加载表单有人可以帮助我

```
string strFromName="Form1";
Type type = Type.GetType(strFromName); // Null reference is coming here
Form form = (Form)Activator.CreateInstance(type); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:17:52.577

在获得实例类型后，从程序集中获取所有类型并按名称将实例与字符串“Form1”进行比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:21:07.983

您必须提供表单的完全限定名称（“TopNamespace.SubNameSpace.Form1”），或者如果表单类驻留在调用之外的程序集中，则必须提供[AssemblyQualifiedName](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)（“TopNamespace.SubNameSpace.Form1，MyAssembly” ）。

有关详细信息，请参阅[Type.GetType](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)文档。

# c# - 在代码中为具有复合键的表创建实体键

> ID：12564869
> 
> 赞同：1
> 
> 时间：2012-09-24T12:15:03.437
> 
> 标签：c#, entity-framework-4

我正在尝试为表创建一个实体键，以便在不加载相关表的情况下在表中插入一行。

我正在尝试使用这个构造函数：http: [//msdn.microsoft.com/en-us/library/bb739024.aspx](http://msdn.microsoft.com/en-us/library/bb739024.aspx)

上面链接中的代码示例使用了不同的构造函数。

我到目前为止的代码是：

```
KeyValuePair<String, Object> key1 = new KeyValuePair<string,object>("MainId", 1);
KeyValuePair<String, Object> key2 = new KeyValuePair<string,object>("SubId", 2);

List<KeyValuePair<String, Object>> keyList = new List<KeyValuePair<String, Object>>();
keyList.Add(key1);
keyList.Add(key2);

EntityKey entitykey = new EntityKey( 
```

如何完成实体密钥的创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:23:58.620

```
object value = null;
keyList.TryGetValue("MainId", out value);
EntityKey entitykey = new EntityKey("EntitySetName.TableName", "FieldName", value); 
```

**编辑：** 添加多个键：

```
IEnumerable<KeyValuePair<string, object>> entityKeyValues =
 new KeyValuePair<string, object>[] { new KeyValuePair<string, object>("Key", "Value") };
EntityKey key = new EntityKey("EntitySetName.TableName", entityKeyValues); 
```

那应该做的工作。

# c++ - std::unique_ptr 上的 CPPUNIT_ASSERT_EQUAL

> ID：12564871
> 
> 赞同：4
> 
> 时间：2012-09-24T12:15:08.460
> 
> 标签：c++, c++11, cppunit

我想测试我的应用程序是否返回 nullptr 唯一 ptr。我尝试了一些东西，但没有通过编译器。我希望有人已经尝试过并找到了一种方法来完成这项工作。我尝试过的一些事情：

```
std::unique_ptr<SomeClass> some_class_ptr;

CPPUNIT_ASSERT_EQUAL(std::unique_ptr<SomeClass>(), some_class_ptr); 
```

给出：libcppunit/include/cppunit/TestAssert.h|49|error: no match for 'operator<<' in 'ost << x'|

在 TestAssert.h 中：

```
template <class T>
void assertEquals( const T& expected,
                   const T& actual,
                   SourceLine sourceLine,
                   const std::string &message )
{
  if ( !assertion_traits<T>::equal(expected,actual) ) // lazy toString conversion...
  {
    Asserter::failNotEqual( assertion_traits<T>::toString(expected),
                            assertion_traits<T>::toString(actual),
                            sourceLine,
                            message );
  }
} 
```

* * *

```
CPPUNIT_ASSERT_EQUAL(nullptr, some_class_ptr); 
```

给出：/tests/SomeTestClass.cpp|432|error: no matching function for call to 'assertEquals(std::nullptr_t, std::unique_ptr&, CppUnit::SourceLine, const char [1])'|

* * *

```
CPPUNIT_ASSERT_EQUAL(nullptr, some_class_ptr.get()); 
```

给出：/tests/SomeTestClass.cpp|432|错误：没有匹配函数调用 'assertEquals(std::nullptr_t, std::unique_ptr::pointer, CppUnit::SourceLine, const char [1])'|

* * *

我认为第一个应该是正确的，但它没有编译。谁能给我一个正确的结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:25:36.207

[`CPPUNIT_ASSERT_EQUAL`要求其参数的类型完全相同。](http://cppunit.sourceforge.net/doc/lastest/group___assertions.html#ga3) 由于您不需要能够输出参数的表示`nullptr`，您可以使用`CPPUNIT_ASSERT`：

```
CPPUNIT_ASSERT(nullptr == some_class_ptr); 
```

或者

```
CPPUNIT_ASSERT(!some_class_ptr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T12:19:21.087

问题似乎与`CPPUNIT_ASSERT_EQUAL`，但我看不出有什么好的理由使用它。我假设有一个`CPPUNIT_ASSERT`或类似的（检查文档或来源）。然后只需编写`CPPUNIT_ASSERT( some_class_ptr().get() == 0 )`，或者您喜欢的任何表达式来检查指针是否为空。

# silverlight - 使用 Button 类型作为基础的 CustomControl 不触发 MouseLeftButtonUp 事件

> ID：12564878
> 
> 赞同：0
> 
> 时间：2012-09-24T12:15:56.237
> 
> 标签：silverlight, silverlight-5.0

我创建了一个基于 Button 控件的简单自定义 ImageButton 控件。这个想法是我提供了一个鼠标向下图像和一个鼠标向上图像，并且图像根据鼠标左键操作进行交换。MouseLeftButtonDown 事件触发得很好，我的图像已更新，但 MouseLeftButtonUp 事件永远不会触发。

这是有原因的，我是否执行不正确？

自定义控件：

```
namespace Reader.Controls
{
    using System.IO;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Input;
    using System.Windows.Media.Imaging;

    [TemplatePart(Name = "PART_Image", Type = typeof(Image))]
    public class ImageButton : Button
    {
        public Image PartImage;

        public ImageButton()
        {
            this.DefaultStyleKey = typeof(ImageButton);
        }

        public override void OnApplyTemplate()
        {
            this.PartImage = this.GetTemplateChild("PART_Image") as Image;

            if (this.PartImage != null)
            {
                this.PartImage.MouseLeftButtonDown += this.PartImageOnMouseLeftButtonDown;
                this.PartImage.MouseLeftButtonUp += this.PartImageOnMouseLeftButtonUp;

                this.SetImageSource(OffImageSource);
            }
        }

        #region Dependency properties

        public byte[] OffImageSource
        {
            get
            {
                return (byte[])this.GetValue(OffImageProperty);
            }
            set
            {
                this.SetValue(OffImageProperty, value);
            }
        }

        public static DependencyProperty OffImageProperty = DependencyProperty.Register(
            "OffImageSource", typeof(byte[]), typeof(ImageButton), new PropertyMetadata(null));

        public byte[] OnImageSource
        {
            get
            {
                return (byte[])this.GetValue(OnImageProperty);
            }
            set
            {
                this.SetValue(OnImageProperty, value);
            }
        }

        public static DependencyProperty OnImageProperty = DependencyProperty.Register(
            "OnImageSource", typeof(byte[]), typeof(ImageButton), new PropertyMetadata(null));

        #endregion

        #region Button events

        private void PartImageOnMouseLeftButtonDown(object sender, MouseButtonEventArgs mouseButtonEventArgs)
        {
            if (this.PartImage != null)
            {
                this.SetImageSource(OnImageSource);
            }
        }

        private void PartImageOnMouseLeftButtonUp(object sender, MouseButtonEventArgs mouseButtonEventArgs)
        {
            if (this.PartImage != null)
            {
                this.SetImageSource(OffImageSource);
            }
        }

        #endregion

        private void SetImageSource(byte[] imageSource)
        {
            using (var ms = new MemoryStream(imageSource, 0, imageSource.Length - 1))
            {
                var bi = new BitmapImage();
                bi.SetSource(ms);

                this.PartImage.Source = bi;
            }
        }
    }
} 
```

默认样式模板：

```
<Style TargetType="Controls:ImageButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Controls:ImageButton">
                <Image x:Name="PART_Image" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

用法：

```
<Controls:ImageButton x:Name="btnLangEn" Click="btnLangEn_Click" /> 
```

后面的使用代码（ImageLibrary 是对资源文件的引用）：

```
public LanguageSelection()
{
    InitializeComponent();

    btnLangEn.OffImageSource = ImageLibrary.LangEn_off;
    btnLangEn.OnImageSource = ImageLibrary.LangEn_on;
}

private void btnLangEn_Click(object sender, RoutedEventArgs e)
{
    // handle click event here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:38:29.980

我通过将点击处理程序替换为 OnMouseLeftButtonDown 和 OnMouseLeftButtonUp 的重写方法来对此进行排序，如下所示：

```
 protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonDown(e);

        if (this.PartImage != null)
        {
            this.SetImageSource(OnImageSource);
        }
    }

    protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonUp(e);

        if (this.PartImage != null)
        {
            this.SetImageSource(OffImageSource);
        }
    } 
```

这是在派生类中处理事件的推荐方法：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.control.onmouseleftbuttonup (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.onmouseleftbuttonup(v=vs.95).aspx)

# android - /mnt/sdcard 和 /sdcard 有区别吗？

> ID：12564884
> 
> 赞同：5
> 
> 时间：2012-09-24T12:16:22.900
> 
> 标签：android, android-image, android-file

我正在尝试将位图保存到图片目录中。这是代码

```
 File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);

            File file = new File(path, "test1.PNG");
            try { 
                   path.mkdirs();
                   OutputStream out = new FileOutputStream(file);
                   mBitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
                   out.flush();
                   out.close();

            } catch (Exception e) {
                   e.printStackTrace();
                   Log.w("ExternalStorage", "Error writing " + file, e);
            } 
```

但是执行卡在`OutputStream out = new FileOutputStream(file);` 我使用调试器并且完整路径返回`mnt/sdcard/Pictures/test1.PNG`，是`mnt/`我无法通过的罪魁祸首`OutputStream out = new FileOutputStream(file);`吗？因为我只能`sdcard/`在我的文件目录中看到。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:37:48.333

`/sdcard`是`/mnt/sdcard`...的软链接，并且`/sdcard`在文件系统中是只读的，因此更好地使用`/mnt/sdcard/`..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:26:26.310

您可以使用它`Environment.getExternalStorageDirectory()`作为 mnt/sdcard 或 sdcard/ 获取和访问 sdcard 目录，它是一个设备相关目录，操作系统如何访问和使用外部目录，无需担心不同的设备和不同的目录通过这种方法返回。

**编辑**

访问外部存储需要权限并在`androidmanifest.xml`文件中定义为用户权限

```
WRITE_EXTERNAL_STORAGE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:23:54.767

像这样使用

```
 String filePath = "/sdcard/yourfile.txt";

 FileOutputStream os = null;
 os = new FileOutputStream(filePath); 
 os.write(write it to file);
 os.close(); 
```

# javascript - 使用 JavaScript 访问 Google Maps API

> ID：12564885
> 
> 赞同：3
> 
> 时间：2012-09-24T12:16:24.473
> 
> 标签：javascript, jquery, google-maps

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<script type="text/javascript">
    var url = "https://maps.googleapis.com/maps/api/place/search/json?key=AIzaSyBnEjp_CRcL_APx4mMsmuke9SV1PWZfnww&sensor=false&location=26.526437,-80.163004&radius=500&keyword=Physican%27s+Weight+Loss+Centers&types=";
    jQuery.getJSON(url, function (data) {
        alert(data);
    });

</script>
</body>
</html> 
```

运行上面的代码时，我没有收到警报窗口。URL 没有任何回调函数。任何帮助或有用的链接如何使用 jQuery 或 Javascript 从 JSON URL 解析/检索数据将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:28:20.857

谷歌为该请求返回的标头不允许跨域查询。

```
HTTP/1.1 200 OK
status: 200 OK
version: HTTP/1.1
cache-control: private
content-encoding: gzip
content-length: 1932
content-type: application/json; charset=UTF-8
date: Mon, 24 Sep 2012 12:27:10 GMT
server: mafe
vary: Accept-Language
x-frame-options: SAMEORIGIN
x-xss-protection: 1; mode=block 
```

所以你真正需要做的是在你的服务器中有一些代码获取数据，然后传递它，这样你就不会违反跨域规则。

要么，要么看看谷歌是否提供了 API 的 JSONP 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:36:10.937

我假设这是跨域的。在这种情况下，下面的 jQuery 应该可以工作：

```
$.ajax(url, {
    crossDomain: true,
    dataType: 'jsonp'
}).success(function(data) {
    alert(data);
}).fail(function() {
    alert('fail');
}); 
```

注意：jQuery 不会让您访问跨域请求的 http 状态代码，它只会在 200 响应时触发 .success()，在非 200 响应时触发 .fail() - 例如，您将难以处理404 与 403 客户端。如果您想进行更好的控制，请考虑使用 jquery-jsonp 之类的东西。

另外值得注意的是：使用浏览器调试器（firebug/whatever），这至少应该告诉您 ajax 请求返回什么响应 - 很可能是您的请求得到非 200 - 这将是一个失败案例jQuery。在这种情况下，你能做的有点有限。

一些背景阅读：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:29:44.810

请参阅 Paul Tregoing 的帖子，了解正在发生的事情以及如何绕过它。

**但是**，在这种情况下，实际上有一个适用于 Google 地图的 JavaScript API（包括您似乎正在使用的 Places）。你可以在[这里查看](https://developers.google.com/maps/documentation/javascript/places)。

# spring - 使用 Spring 管理 Hibernate 会话

> ID：12564887
> 
> 赞同：2
> 
> 时间：2012-09-24T12:16:33.663
> 
> 标签：spring, hibernate, session, spring-mvc

我有很多关于休眠会话的问题要问，因为我一直遇到问题。

我正在使用 Spring 3.1.1 和 Hibernate 4.1.3。

首先是我正在处理的类图。

![类图](../Images/20cb6592e6945843209d8f1de0edeb27.png)

代码类：

```
public class Equipement {

  @ManyToOne(fetch = FetchType.LAZY)
  @Cascade({CascadeType.SAVE_UPDATE, CascadeType.DELETE})
  public getOffice(){
    return office ;
  }

public class Office {    
  @ManyToOne(fetch = FetchType.LAZY)
  @Cascade({CascadeType.SAVE_UPDATE, CascadeType.DELETE})
  public getService(){
    return service ;
  }

public class Service {
  @ManyToOne(fetch = FetchType.LAZY)
  @Cascade({CascadeType.SAVE_UPDATE, CascadeType.DELETE})
  public getDepartement(){
    return departement ;
  } 
```

这是我加载所有设备的方法。

```
public class HibernateEquipementDao{

  @SuppressWarnings("unchecked")
  public List<Equipement> getAll() {
      return sessionFactory.getCurrentSession().createQuery("from Equipement").list() ;
  }
} 
```

假设我将所有设备加载到 a 中`List<Equipement> allEquipements`，并且希望仅使用某些服务或某些部门的设备来填充我的视图。

```
 List<Equipement> aListOfEquipements = new ArrayList<Equipement>() ;
 for(Equipement equipement : allEquipements)
   if(equipement.getOffice().getService().getName().equals("name"))
     aListOfEquipements.add(equipement) ; 
```

我真的可以随时这样做吗？**名为Current**的会话始终处于活动状态？有时我会得到那个例外。 **org.hibernate.LazyInitializationException：无法初始化代理 - 没有会话**

这让我问我的 EquipementDao 使用的当前会话在哪里？

当我想获得设备部门时，有没有**办法**打开**会话**？

还是有另一种方法可以继续？如何管理会话以及如何加载我的所有设备并毫无问题地访问其他实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:30:55.290

为服务添加层，我知道这个名字在你的情况下不是那么幸运，但是在这个层中你将有负责你的逻辑的类。

一些原型：

```
public class EquipmentService {

   @Inject
   private HibernateEquipementDao dao;

   @Transactional
   public List<Equipement> doSomethingWithEquipmentWithoutLazyException(Equipment equipment){
      List<Equipement> allEquipments = dao.getAll();

      List<Equipement> aListOfEquipements = new ArrayList<Equipement>() ;
      for(Equipement equipement : allEquipements) {
         if(equipement.getOffice().getService().getName().equals("name")) {
             aListOfEquipements.add(equipement) ;
         }
      }
      return aListOfEquipments;
   }

} 
```

非常重要的是注解：`@Transactional`这意味着会话将在方法开始时打开并在方法结束时关闭，因此无法抛出 LazyLoadingException。

关于 Transactonal 的一些有趣[的话题：@Transactional 注释属于哪里？](https://stackoverflow.com/questions/1079114/spring-transactional-annotation-best-practice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T19:07:13.347

我已经看到了两种解决这个问题的方法。

**1.在视图中打开会话**：

您可以在视图中配置您的休眠设置打开会话。如果你以编程方式配置你的休眠，你可以使用这一行：

```
jpaProperties.put(org.hibernate.cfg.Environment.ENABLE_LAZY_LOAD_NO_TRANS, true) 
```

另一种方法是在 web.xml 中声明一个过滤器，如下所示：

```
 <filter>
        <filter-name>OpenEntityManagerInViewFilter</filter-name>
        <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>OpenEntityManagerInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

这种方法会影响您的所有系统，并且可能对您的性能不利。

**2.获取加入：**

您可以在查询中使用 FETCH JOIN 来强制休眠加载数据，例如：

```
from Equipement e FETCH JOIN e.office 
```

这种方法将更难做（您的系统中的许多点受到影响）并且要小心。

**3、查询返回后调用get方法：**

在您的 DAO 中，您可以在查询返回后调用 get 方法。我不喜欢这种方式，但通常工作。

嗯，我希望我能帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:32:55.747

对于大多数 Web 应用程序来说，让当前事务跨越整个请求是最简单且绝对合适的。最简单的方法是有一个过滤器来启动事务并在请求结束时提交/回滚。在 Spring/Hibernate 中，这称为 Open Entity in View 模式。Spring 通过 org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter 为此提供了一个过滤器实现。

当使用这种方法时，视图，即您的 JSP，参与相同的事务并且不需要重新加载，并且在 fetchtype LAZY 关系的情况下也可以导航实体。

# c++-cli - CLI/C++ 发布 .exe？

> ID：12564888
> 
> 赞同：2
> 
> 时间：2012-09-24T12:16:37.687
> 
> 标签：c++-cli

我有一个 C++-CLI 项目，我已经使用 Advance Installer 创建了最终的 .exe 和所有重新分发。

它不起作用..经过一场激烈的斗争，我意识到问题出在 Visual runtime x86 上。在互联网上研究后发现只能下载redist。运行时带有VS（请告诉我否则）。

关于最终的库，C++-CLI 也存在一些我不完全理解的问题。

你如何创建最终的.exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:26:07.970

客户端机器需要安装正确的目标框架：

*   [Microsoft .NET Framework 4（Web 安装程序）](http://www.microsoft.com/en-us/download/details.aspx?id=17851)
*   [Microsoft .NET Framework 4（独立安装程序）](http://www.microsoft.com/en-us/download/details.aspx?id=17718)
*   [Microsoft .NET Framework 3.5 服务包 1（完整包）](http://www.microsoft.com/en-us/download/details.aspx?id=21)
*   [Microsoft .NET Framework 2.0 服务包 2](http://www.microsoft.com/en-us/download/details.aspx?id=1639)

旧版本通常不再相关。大多数 Windows 安装都附带了最新版本的 .NET Framework 开箱即用。（例如 Windows 7，它包含 .NET Framework 3.5.1 作为操作系统组件）。

* * *

~~**更新**如果你真的想要一个独立的可执行镜像，你可以使用 Mono`mkbundle`来创建一个。~~

您最终会得到一个较大的可执行文件，具体取决于您在程序中实际使用了多少框架库。

看

~~*   [单声道 mkbundle 窗口](https://stackoverflow.com/questions/1948113/mono-mkbundle-windows)~~
*   ~~[将单声道编译为静态库](https://stackoverflow.com/questions/10719828/compilling-mono-as-static-library/10720450#10720450)~~

遗憾的是，这不适用于 MSVC++ 专有扩展，例如 C++/CLI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:23:54.520

[C++/CLI 旨在在CLR](http://en.wikipedia.org/wiki/Common_Language_Runtime)之上运行。[Joel Spolsky 在这里](http://www.joelonsoftware.com/articles/PleaseLinker.html)写过关于 CLR 的后果，其中一个后果是您没有获得独立的独立 EXE 文件。

您的安装程序需要检查目标计算机上是否安装了正确版本的 .NET。

# javascript - JavaScript 正则表达式替换不起作用？

> ID：12564889
> 
> 赞同：0
> 
> 时间：2012-09-24T12:16:40.220
> 
> 标签：javascript, replace

我有这个 JavaScript 代码：

```
var test123 = $('product-price-' + productId).innerHTML; // thats 26,00&nbsp;€
var finalPrice = test123.replace(/[^\d.,]/, ""); 
```

在这里测试我的正则表达式：[http](http://www.regular-expressions.info/javascriptexample.html) ://www.regular-expressions.info/javascriptexample.html正确返回我 26,00，正是我想要的。为什么它在我的代码中不起作用？在我的代码中，它根本没有取代任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:18:50.353

摆脱周期并添加`g`以使其全球化；

```
/[^\d\.,]/g 
```

# javascript - jQuery / JavaScript：检查数字是否比另一个数字大最小数量

> ID：12564890
> 
> 赞同：1
> 
> 时间：2012-09-24T12:16:50.563
> 
> 标签：javascript, jquery

我有一个函数，只有在用户向左或向右滚动时才会触发，方法是执行以下操作：

```
var currentScrollLeft = visibleArea.scrollLeft();

visibleArea.scroll(function () {
    var newScrollLeft = visibleArea.scrollLeft();

    if (newScrollLeft > currentScrollLeft) {
        // do something
    }
}); 
```

但这会在`scrollLeft`. 有没有办法告诉它只有在移动超过一定数量时才开火，比如说`50`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:17:56.547

```
if((Math.abs(newScrollLeft - currentScrollLeft)) > 50) 
```

所以你上面的代码会变成：

```
var currentScrollLeft = visibleArea.scrollLeft();

visibleArea.scroll(function () {
    var newScrollLeft = visibleArea.scrollLeft();

    if (Math.abs(newScrollLeft - currentScrollLeft) > 50) {
        // do something
    }

    currentScrollLeft = visibleArea.scrollLeft();
}); 
```

# hover - 做跨度的麻烦：悬停

> ID：12564891
> 
> 赞同：1
> 
> 时间：2012-09-24T12:17:09.013
> 
> 标签：hover, visibility, show, html, visible

首先对我糟糕的英语感到抱歉：

好吧，我有这个 CSS

```
span.favoritos {position:absolute;left:550px;visibility:hidden;}
span.favtitle {position:absolute;top:-20px;left:450px;visibility:hidden;background: rgba(81,81,81, .9);color:#f2f2f2;padding:2px 4px 2px 4px;width:115px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}
.favoritos a {display:block;
width:24px;
height:24px;
text-indent:-9999px;
background:url(img/sprite2.png) -21px -324px no-repeat;
-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}
.favoritos a:hover {
background:url(img/sprite2.png) -21px -283px no-repeat;}
.favsave a {display:block;
width:24px;
height:24px;
text-indent:-9999px;
background:url(img/sprites.png) -121px -108px no-repeat;
border:1px #ececec solid;
-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}
.content:hover span.favoritos {visibility:visible;}
.content:hover span.favdel {visibility:visible;}
.favoritos:hover span.favtitle {visibility:visible;} 
```

而这个 HTML

```
 <div class="content">
        <span class="favtitle">Añadir a favoritos</span>
                        <span class="favoritos"><a title="Guardar en favoritos" href="#oferta-guardada">favoritos</a></span>
    </div> 
```

但是当我将鼠标悬停在`<span class="favoritos"></span>`不起作用时，它不会显示`<span class="favtitle">`

我不知道为什么。

任何人都可以帮助我，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:28:44.460

`span.favtitle`不是`.favoritos:hover`您试图在最后一个选择器中解决它的后代。

# gwt - 获取 SelectionCell 中 ListBox 的选定值

> ID：12564893
> 
> 赞同：0
> 
> 时间：2012-09-24T12:17:28.600
> 
> 标签：gwt, select, listbox

我已阅读[相关问题](https://stackoverflow.com/questions/4565790/how-to-dynamically-update-the-choices-in-a-selectioncell-using-gwt)，但我仍然无法找到我的问题的答案。我在 Datagrid 的列中使用了一个[SelectionCell ，它显然包含一个 ListBox。](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/cell/client/SelectionCell.html)但是它不提供对 ListBox 的直接访问，因此当用户选择 ListBox 的选项时，我找不到**获取所选值的方法。**我知道 onBrowserEvent 方法，但它确实返回任何东西。我需要用户选择的值将其保存在数据库中。我可能需要上述方法中包含的代码行：

```
SelectElement select = parent.getFirstChild().cast();
String newValue = options.get(select.getSelectedIndex()); 
```

但是，父级不可用于任何自定义方法，那么我可以做些什么来获得选定的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:24:14.363

看起来您正在寻找`FieldUpdater`. 您链接到的问题中的示例用法。

# jquery - JQuery.Validate CDN 回退

> ID：12564896
> 
> 赞同：11
> 
> 时间：2012-09-24T12:17:39.167
> 
> 标签：jquery, jquery-validate, cdn

这个问题有点后续： [使用 Google 托管的 jQuery 的最佳方式，但回退到我在 Google 上的托管库失败](https://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go)

所以我可以检测 JQuery CDN 是否关闭并允许这样做：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript">
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='/Script/jquery-1.7.2.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
</script> 
```

当加载为：

```
<script type="text/javascript" language="javascript" src="http://ajax.microsoft.com/ajax/jQuery.Validate/1.6/jQuery.Validate.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T12:22:48.060

改用这个：

```
if(typeof $().validate == 'undefined')
{
    /// same code as before except pointing at your local jQuery.validate path
} 
```

### [DEMO](http://jsfiddle.net/FranWahl/JW8CP/) - 检查验证是否存在

如果存在，则在控制台中返回 true，否则返回 false。
删除 DEMO 中的脚本引用以获取 false 作为输出。

您的完整代码可能类似于以下内容：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jQuery.Validate/1.6/jQuery.Validate.min.js"></script>

<script type="text/javascript">
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/Script/jquery-1.7.2.min.js' type='text/javascript'%3E%3C/script%3E"));
    };

    if (typeof $().validate == 'undefined') {
        document.write(unescape("%3Cscript src='/Script/jquery.Validate-1.6.min.js' type='text/javascript'%3E%3C/script%3E"));
    }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T12:19:53.010

像这样的东西可以解决问题

```
<script type="text/javascript" language="javascript" src="http://ajax.microsoft.com/ajax/jQuery.Validate/1.6/jQuery.Validate.min.js"></script>
<script type="text/javascript">
    if (typeof jQuery().validate == 'undefined') {
        document.write(unescape("%3Cscript src='/js/jquery.validate.min.js' type='text/javascript'%3E%3C/script%3E"));
    }
</script> 
```

# sql - 在 SQLServer 中将字符串转换为日期，算术溢出

> ID：12564898
> 
> 赞同：0
> 
> 时间：2012-09-24T12:17:48.420
> 
> 标签：sql, sql-server

我想将`PERIOD`这种形式的字符串“” `yyyymmdd`（例如：20120701）转换为 SQLServer 中的日期。所以我使用了这样的转换函数：

```
CONVERT(DATETIME,PERIOD,102); 
```

和

```
 CONVERT(DATETIME,PERIOD,120); 
```

但我得到一个

> SqlException：“将表达式转换为数据类型日期时间的算术溢出错误。”
> 
> 这是整个查询，还有其他错误吗？

```
"SELECT ACTUAL_N_WELLS, TARGET_N_WELLS, [YTD ACTUAL] AS YTD_ACTUAL, [YTD BUDGET] AS YTD_BUDGET FROM DASH_GL_DRILLING_PERF WHERE ASSET_NAME='Bu Hasa Asset' AND ( CONVERT(DATETIME,PERIOD,112) > (SELECT DATEADD(MONTH,-3,MAX(CONVERT(DATETIME,PERIOD,112))) from DASH_GL_DRILLING_PERF))"); 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:19:54.733

因为它是 yyyymmdd，所以你需要

```
CONVERT(DATETIME, PERIOD, 112) 
```

看看[CAST AND CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:26:26.950

如果这是日期格式问题，您将收到超出范围的错误，因为您收到溢出错误检查您是否使用整数

```
CONVERT(DATETIME, 20120701, 102) - overflow
CONVERT(DATETIME,'20120701',102) - ok 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:29:22.737

```
select Convert(date,CONVERT(DATETIME,'20120701',102)); 
```

这将以日期格式转换给定的期间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:42:02.477

```
declare @dt varchar(100)='20120701'
select convert(datetime,@dt) 
```

# javascript - javascript innerHTML 结束标记案例

> ID：12564917
> 
> 赞同：1
> 
> 时间：2012-09-24T12:19:27.450
> 
> 标签：javascript, jquery

我使用`'tag'.innerHTML`.it 将通过添加 endtag 进行渲染。如何 仅获取所选标签 html 内**的显示内容？**

```
<div id="tabs">
    <ul class="tabs">
    <li class="current"><a><span>News</span></a></li>
    <li><a><span>Videos</span></a></li>
    <li><a><span>Photos</span></a></li>
    <li><a><span>Twitter</span></a></li>
    </ul>
</div> 
```

实际上我需要在标签之间通过js获取这样的`<pre>`代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:17:29.173

看这个 ：

[http://jsfiddle.net/qGyf6/](http://jsfiddle.net/qGyf6/)

**HTML：**

```
<li><a><span><b>News</b></span></a></li> 
```

**jQuery :**

```
var pureText = $("li").text();
var val = $("li").val();
var html = $("li").html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:21:22.270

如果你的意思是没有 HTML 标签的文本，你可以使用

```
$('tag').text() 
```

[参考](http://api.jquery.com/text/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:21:50.153

您应该`text()`改用，这将只返回文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:24:34.700

纯粹`JavaScript`你可以使用`innerText`

```
'tag'.innerText 
```

# sql - 为什么 Oracle 说不是 GROUP BY 表达式？

> ID：12564918
> 
> 赞同：2
> 
> 时间：2012-09-24T12:19:28.420
> 
> 标签：sql, oracle

我正在尝试使用以下条件从 Oracle 数据库表中检索数据

1.  所有按邮政编码找到的条目都应分组，按邮政编码降序排序。
2.  按城市找到的条目应按字母顺序分组。
3.  按经销商名称找到的所有条目都应按字母顺序进行分组和排序。

为了满足上述条件，我编写了如下查询

```
SELECT DISTINCT ba.uuid AS uuid
        , COUNT(*) over() AS rowcount 
FROM basicaddress ba 
WHERE ba.postalcode='143456' 
OR ba.lastname LIKE '%143456%' 
OR ba.city LIKE '%143456%'
GROUP BY
    CASE WHEN ba.postalcode='143456' THEN ba.postalcode END 
ORDER BY 
    CASE WHEN ba.postalcode='143456' THEN ba.postalcode END DESC, 
    CASE WHEN ba.lastname LIKE '%143456%' THEN ba.lastname END ASC, 
    CASE WHEN ba.city LIKE '%143456%' THEN ba.city ELSE ba.postalcode END DESC 
```

此查询在 MYSQL 中运行良好，但在 oracle 中显示*“不是 GROUP BY 表达式”*

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:58:45.123

这发生在你身上只是因为 MySQL 破坏了 SQL 的逻辑。

假设我们有表emp：

```
id ename dept
1  mark  10
2  John  10
3  Mary  10
4  Jane  20 
```

和查询：

```
select dept, ename
from emp 
group by dept; 
```

你会得到什么？你应该得到两行，因为有两个部门，但查询要求输入姓名。对于 20 是明确的，但对于 10，引擎应该返回什么？

它应该返回一个错误。猜不出要给什么名字。甲骨文报错 - 你的错误，但 MySQL 得到一个 ename（不保证哪个）。这是误导性的，可能会产生错误。

正确的查询是：

```
select dept, max(ename) --the latest, alaphabeticaly
from emp 
group by dept; 
```

和

```
--all enames and groups
select dept, ename 
from emp 
group by dept, ename; 
```

更正此部分后，您必须解决

```
COUNT(*) over() AS rowcount 
```

部分。在 oracle、AFAIK 中，您不能将分析函数与分组查询混合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:28:00.210

您问题的具体答案`uuid`是不包含在按表达式分组中。其他答案已经解释了允许这种情况发生的 MySQL (mis) 功能。修复查询很容易：

```
SELECT ba.uuid AS uuid, COUNT(*) over() AS rowcount
FROM basicaddress ba 
WHERE ba.postalcode='143456' OR ba.lastname LIKE '%143456%' OR ba.city LIKE '%143456%'
GROUP BY uuid,
        CASE WHEN ba.postalcode='143456' THEN ba.postalcode END 
ORDER BY 
        max(CASE WHEN ba.postalcode='143456' THEN ba.postalcode END) DESC, 
        max(CASE WHEN ba.lastname LIKE '%143456%' THEN ba.lastname END) ASC, 
        max(CASE WHEN ba.city LIKE '%143456%' THEN ba.city ELSE ba.postalcode END) 
```

我还删除了在使用 group by 时应该是多余的“distinct”。

也就是说，我不明白这如何满足您最初的问题。我期待更多类似以下内容：

```
select (case when postalcode is not null then postalcode
             when city is not null then city
             when lastname is not null then lastname
        end),
       (case when postalcode is not null then 1
             when city is not null then 2
             when lastname is not null then 3
        end),
       count(*)
from basicaddress ba
group by (case when postalcode is not null then postalcode
               when city is not null then city
               when lastname is not null then lastname
          end),
         (case when postalcode is not null then 1
             when city is not null then 2
             when lastname is not null then 3
        end)
order by 1, 2 
```

这可能不是您所需要的，但它应该为您指明正确的方向。此外，这是标准 SQL，适用于两个数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:32:37.463

它在 MySQl 中有效，因为 MySQL 对 SQL 的解释很拙劣。

在任何适当的方言中，`SELECT`or`ORDER BY`子句中的任何内容都需要是聚合函数或 GROUPed 表达式。

至少，您需要按 ba.uuid、姓氏和城市进行分组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:29:33.167

我不了解 MySQL，但以下在 Oracle 11g 中有效：

```
With 
T_PATTERN as (select '%143456%' as PATTERN from DUAL)
, T_INPUT as (
  select 1 as UUID, 'X143456y' as FIRSTNAME, 'last1' as LASTNAME, 'u143456v' as CITY, 'w143456z' as POSTALCODE from DUAL union
  select 2 as UUID, 'first2' as FIRSTNAME, 'a143456b' as LASTNAME, 'a143456b' as CITY, 'postal2' as POSTALCODE from DUAL union
  select 3 as UUID, 'first3' as FIRSTNAME, 'last3' as LASTNAME, 'c143456d' as CITY, 'postal3' as POSTALCODE from DUAL union
  select 4 as UUID, 'first4' as FIRSTNAME, 'last4' as LASTNAME, 'city4' as CITY, 'postal4' as POSTALCODE from DUAL
),
Q_FNAME as (
  select TI.UUID, TI.FIRSTNAME, COUNT(*) FN_COUNT from T_INPUT TI inner join T_PATTERN TP on 1=1 
  where UPPER(TI.FIRSTNAME) like TP.PATTERN
  GROUP BY TI.UUID, TI.FIRSTNAME
),
Q_LNAME as (
  select TI.UUID, TI.LASTNAME, COUNT(*) LN_COUNT from T_INPUT TI inner join T_PATTERN TP on 1=1 
  where UPPER(TI.LASTNAME) like TP.PATTERN
  group by TI.UUID, TI.LASTNAME
),
Q_CITY as (
  select TI.UUID, TI.CITY, COUNT(*) CT_COUNT from T_INPUT TI inner join T_PATTERN TP on 1=1 
  where UPPER(TI.CITY) like TP.PATTERN
  group by TI.UUID, TI.CITY
),
Q_PCODE as (
  select TI.UUID, TI.POSTALCODE, COUNT(*) PC_COUNT from T_INPUT TI inner join T_PATTERN TP on 1=1 
  where UPPER(TI.POSTALCODE) like TP.PATTERN
  group by TI.UUID, TI.POSTALCODE
)
select TI.UUID, TI.FIRSTNAME, TI.LASTNAME, TI.CITY, TI.POSTALCODE, 
  QF.FN_COUNT, QL.LN_COUNT, QC.CT_COUNT, QP.PC_COUNT
from T_INPUT ti
left join Q_FNAME QF on TI.UUID=QF.UUID
left join Q_LNAME QL on TI.UUID=QL.UUID
left join Q_CITY QC on TI.UUID=QC.UUID
left join Q_PCODE QP on TI.UUID=QP.UUID
order by ti.UUID; 
```

# java - 每次使用 @EJB 注入或在 Servlet 过滤器中进行查找

> ID：12564920
> 
> 赞同：0
> 
> 时间：2012-09-24T12:19:42.803
> 
> 标签：java, jakarta-ee, orm, ejb-3.0

我想将 EJB（本地）注入 Servlet 过滤器，并将 EAR 部署在 Weblogic 11g 上。

我的问题是：

@EJB Annotation 将在 Weblogic 11g 上工作还是将被忽略？或者我必须如下查找并提及 web.xml 和 weblogic xml 文件中的引用：

```
Hashtable env = new Hashtable();
env.put( Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory" );
Context ctx = new InitialContext( env );
ctx.lookup( "myejb" ); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:26:21.740

我只想支持如下

更多参考：[使用 managed-bean 和 ejb 的 JSF 应用程序](http://openejb.apache.org/examples-trunk/jsf-managedBean-and-ejb/)

远程和本地接口

```
 @Remote
    public interface IPersonEAORemote {
        public void show();
    }

    @Local
    public interface IPersonEAOLocal {
        public void show();
    } 
```

EJB Bean

```
 @Stateless(name = "PersonEAO", mappedName = "PersonEAO")
    public class PersonEAOBean implements IPersonEAORemote, IPersonEAOLocal {
        /* if you use JPA
        @PersistenceContext(name = "EJB_DEMO")
        private EntityManager em;
        */

        public void show() {
            System.out.println("Good Luck!");
        }
    } 
```

简单客户端

```
 public class Client {
        private IPersonEAORemote personEAO;

        private void init() {
            try {
                final Context context = getInitialContext();
                personEAO = (IPersonEAORemote)context.lookup("PersonEAO#<your package name>.IPersonEAORemote");
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }

        private static Context getInitialContext() throws NamingException {
            Hashtable env = new Hashtable();
            // WebLogic Server 10.x connection details
            env.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
            env.put(Context.PROVIDER_URL, "t3://127.0.0.1:7101");
            return new InitialContext(env);
        }

        public void show() {
            personEAO.show());
        }

        public static void main(String[] args) {
            Client client = new Client();
            client.init();
            client.show();
        }
    } 
```

ManageBean ：假设您使用 JSF，那么您的支持 bean 就在这里；

```
 public class JSFBackingBean {
        @EJB
        IPersonEAORemote personEAO;

        public void show() {
            personEAO.show();
        }
    } 
```

对于 JBoss 5：

```
 Context.INITIAL_CONTEXT_FACTORY ---> org.jnp.interfaces.NamingContextFactory
    Context.PROVIDER_URL ---->http://localhost:1099 
```

# gwt - 字符串数组上的序列化异常

> ID：12564926
> 
> 赞同：0
> 
> 时间：2012-09-24T12:20:12.023
> 
> 标签：gwt, gwt-rpc

我缺少一些东西：

在[Serializable Types](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideSerializableTypes)中明确说明了什么是序列化的：

> 该类型是可序列化类型的数组（包括其他可序列化数组）。

但是我无法序列化`new String[]{"s"}`

```
public void onModuleLoad()
{

    HashMap<String, String[]> p = new HashMap<String, String[]>();
    p.put("xxx", new String[]{"s"});

    ArrayList params = new ArrayList();
    params.add(p);

    greetingService.greetServer(params, new AsyncCallback<String>()
    {

        @Override
        public void onSuccess(String result)
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFailure(Throwable caught)
        {
            caught.printStackTrace();

        }
    });
  } 
```

另一方面，我可以序列化这个：

```
 ArrayList list = new ArrayList();
    list.add("s"); 
```

这是我得到的例外：

```
com.google.gwt.user.client.rpc.SerializationException
    at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:153)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.serialize(SerializerBase.java:125)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamWriter.serialize(ClientSerializationStreamWriter.java:183)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.client.rpc.core.java.util.Map_CustomFieldSerializerBase.serialize(Map_CustomFieldSerializerBase.java:53)
    at com.google.gwt.user.client.rpc.core.java.util.HashMap_CustomFieldSerializer.serialize(HashMap_CustomFieldSerializer.java:39)
    at com.google.gwt.user.client.rpc.core.java.util.HashMap_FieldSerializer.serial(HashMap_FieldSerializer.java:23)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.serialize(SerializerBase.java:126)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamWriter.serialize(ClientSerializationStreamWriter.java:183)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.serialize(Collection_CustomFieldSerializerBase.java:44)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serialize(ArrayList_CustomFieldSerializer.java:39)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer.serial(ArrayList_FieldSerializer.java:23)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.serialize(SerializerBase.java:126)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamWriter.serialize(ClientSerializationStreamWriter.java:183)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.example.client.GreetingService_Proxy.greetServer(GreetingService_Proxy.java:31)
    at com.example.client.AnotherTest.onModuleLoad(AnotherTest.java:56)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396)
    at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662) 
```

这是服务：

```
 @RemoteServiceRelativePath("greet")
    public interface GreetingService extends RemoteService
    {
        String greetServer(ArrayList name) throws IllegalArgumentException;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:19:31.253

尝试使用泛型声明所有可序列化的集合。例如 GreetingService 中的方法应该是：

```
String greetServer(ArrayList<HashMap<String, String[]>> name) throws IllegalArgumentException; 
```

and also replace all other references to ArrayList with the typed version. GWT uses the generics declaration to validate that the content of collections is serializable and it will often give errors if you don't provide them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:38:54.590

我在我的 GWT 代码中使用字符串数组来进行客户端和服务器之间的通信。我相信你的问题是你正在尝试序列化 HashMap。

# c++ - c中的类向量存在哪些非破坏性替代方案

> ID：12564933
> 
> 赞同：1
> 
> 时间：2012-09-24T12:20:58.397
> 
> 标签：c++, stdvector

我正在使用向量来保存指向类的指针。

```
class fooContainer{
private:
    vector <Foo *> foos;
public:
    void processFoo(int fooIndex);
}; 
```

我面临的问题是`pop_back()`删除元素，我只想将它从向量中删除，但不触摸有问题的对象。我还需要从向量中删除所有元素，以准备重新启动主循环（但保持相同的向量，这是一个类属性）。

我需要一个具有动态大小但不复制或删除其元素的结构，内容是保存指向它们的指针。

有没有更好的替代结构，还是我使用它们都错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:26:50.977

Vector 确实复制并销毁其内容，但在您的情况下，内容是指向对象而不是对象的指针。
指向对象的特定指针将被销毁，但指向该对象的其他指针以及对象本身不会被销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:23:31.403

你所拥有的正是这样做的。向量中指向的对象元素不会被销毁，除非您明确指出`delete`它们。

或者，如果您想在多个共享所有权的地方使用相同的指针，我建议使用`std::shared_ptr`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:24:13.410

`pop`不会“删除”元素，它只是将其从向量中删除。由于您的向量包含指针，因此您有责任适当地删除它们。

Vector 完全符合您的要求。

要删除元素，只需调用`vector.clear()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-24T12:24:29.733

如果您只想从向量中获取指针的副本，则可以使用`Foo* pfoo = v[0]` 或`at(index)`用于检查访问的功能。

您还想清除所有指针，您可以遍历它们并将它们全部删除并调用`v.clear()`以删除所有元素。

如果您想要一个已经为您正确删除指针的向量，请使用`boost::vector_ptr`

# vb.net - 一个视图忽略主布局

> ID：12564935
> 
> 赞同：1
> 
> 时间：2012-09-24T12:21:04.803
> 
> 标签：vb.net, asp.net-mvc-3, razor

> **可能重复：**
> [在 MVC3 中呈现没有母版页的视图](https://stackoverflow.com/questions/6134744/rendering-views-without-master-page-in-mvc3)

我的项目中有一个视图（账单），我希望该视图不显示在主视图包装器中 - 而我只希望显示视图中的 HTML。使视图忽略加载主布局的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T12:23:32.727

> 使视图忽略加载主布局的正确方法是什么？

您可以将以下内容放在视图的顶部：

```
@{ 
    Layout = null;
} 
```

或者从应该为该视图提供服务的控制器操作中返回 a`PartialView`而不是 a `View`：

```
public ActionResuilt SomeAction()
{
    return PartialView("_SomePartialView");
} 
```

甚至返回一个视图并指定一个空布局：

```
public ActionResuilt SomeAction()
{
    return View("SomeView", null, null);
} 
```

# sox - SoX 如何让混音不降低音量

> ID：12564936
> 
> 赞同：3
> 
> 时间：2012-09-24T12:21:04.723
> 
> 标签：sox

当我混合四个音轨时，声音会下降很多，我尝试过 mix-volume 和 mix。我怎么做才能使音量不变？

我试过`-M after "sox --combine mix-power"`了，但最终文件的长度为 0 秒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-01T14:44:24.533

只需在每个输入文件之前添加 -v 1 - 就像这样： -v 1 file.wav

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T12:38:30.283

> 我怎么做才能使音量不变？

## 简短的回答

你不能，你只能得到估计的相似度。估计可能来自在收听最终结果时调整增益，也可能来自根据输出的 RMS 电平调整增益。

如果你很幸运，[*@Yuki 的*回答](https://stackoverflow.com/a/23410018/1331399)可能不会导致任何剪辑并给你一个合理的结果。

## 更长的答案

当您混合曲目时，它们基本上是相互添加的。这意味着很容易超过样本可以具有的最大值，从而导致削波。为了避免这个问题`sox`，在添加之前将每个轨道除以轨道总数

假设您有 4 个名为`1.wav`、和的文件`2.wav`，这里有几种实现合理结果的简单方法（取决于您的情况）：`3.wav``4.wav`

**在混合之前标准化每个文件**

```
sox --combine mix "|sox 1.wav -p gain -n" \
                  "|sox 2.wav -p gain -n" \
                  "|sox 3.wav -p gain -n" \
                  "|sox 4.wav -p gain -n" \
                  out.wav 
```

**标准化最终结果**

```
sox --combine mix 1.wav 2.wav 3.wav 4.wav out.wav gain -n 
```

**为最终结果增加增益**

```
sox --combine mix 1.wav 2.wav 3.wav 4.wav out.wav 
```

现在添加带有`gain`效果的增益，除了 normalize-flag ( `-n`) 它还接受 dB 值，例如添加 6 dB 增益：

```
sox out.wav out-with-gain.wav gain +6 
```

`play(1)`您可以使用或通过将输出文件设置为来收听结果`-d`，例如：

```
play out.wav gain +6 
```

或者：

```
sox out.wav -d gain +6 
```

# java - 使用 Jackson 创建 JSON

> ID：12564938
> 
> 赞同：3
> 
> 时间：2012-09-24T12:21:16.720
> 
> 标签：java, json, jackson

我有一个`List<Person>`清单。我想使用 Jackson Api 将其序列化为具有其他一些属性的 JSON。

输出应该是这样的：

```
{
    "sEcho": 3,
    "iTotalRecords": 10,
    "iTotalDisplayRecords": 10,
    "aaData": [ <--here's the persons
        {
            "name": "TestName1", 
            "status": "ok" 

        },
        {
            "name": "TestName2",
            "status": "ok"
        },
    ...
    ]
} 
```

可能很简单，但无法从杰克逊的 Api 中弄清楚。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:32:43.250

我将创建一个名为 PersonGroup 的新类，其中包含您需要的任何额外字段，并将 List 作为此类的另一个字段 - 例如，您提供的该字段将命名为 aaData。

这将代表您在这里的结构。如果您认为一个新类太多了，那么您可以制作一个对象的 HashMap 并将额外的字段存储为您喜欢的任何对象，然后将它们添加到 HashMap，确保键与额外字段的名称匹配并确保您的列表也在 HashMap 中。

反序列化此类或 HashMap 应返回您提到的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:33:31.553

试试这个。希望它会有所帮助。

```
import java.util.ArrayList;
import java.util.List;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;

public class JsonSimpleExample {
    public static void main(String[] args) {

        List<Person> personList = new ArrayList<Person>();

        for(int i=0 ;i< 5;i ++) { 

            Person person = new Person("TestName" + (i+1), "OK");
            personList.add(person);
        }

        JSONObject obj = new JSONObject();
        obj.put("sEcho", 3);
        obj.put("iTotalRecords", 10);
        obj.put("iTotalDisplayRecords", 10);

        JSONArray list = new JSONArray();

        for (Person person : personList) {
            JSONObject innerObj = new JSONObject();
            innerObj.put("name",person.getName());
            innerObj.put("status",person.getStatus());
            list.add(innerObj);
        }
        obj.put("aaData", list);

        System.out.print(obj);
    }
}
class Person {
    private String name;
    private String status;

    public Person(String name, String status) {
        this.name = name;
        this.status = status;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getStatus() {
        return status;
    }
    public void setStatus(String status) {
        this.status = status;
    }
} 
```

# c++ - 归并排序中的 std:out_of_range

> ID：12564945
> 
> 赞同：0
> 
> 时间：2012-09-24T12:22:06.077
> 
> 标签：c++, algorithm, compiler-errors, mergesort

首先我不得不说我是算法和 C++ 的新手。在 vim 中编写此代码并调试此 c++ 代码后，我遇到了`error:std:out_of_range` 并且我不知道错误在哪里。所以我在这里，如果能得到您的帮助，我将非常感激。thx

```
#include <iostream>
#include <cstdio>
#include <ctime>
#include <cmath>
#include <vector>
#include <iterator>
#include <algorithm>
using namespace std;
void merge(vector<int> &a, int first, int mid, int last)
{
    a.resize(last - first + 1);
    int n1 = mid - first + 1;
    int n2 = last - mid;
    vector<int> larray(n1, 0);
    vector<int> rarray(n2, 0);
    for (int i = 0; i != n1; ++i)
        larray.at(i) = a.at(first + i);
    for (int i = 0; i != n2; ++i)
        rarray.at(i) = a.at(mid + 1 + i);
    int i = 0;
    int j = 0;
    int k = 0;
    while (i < n1 && j < n2)
    {
        if (larray.at(k) <= rarray.at(i))
            a[k++] = larray[i++];
        else
            a[k++] = rarray[j++];
    }
    while (i < n1)
        a[k++] = larray[i++];
    while (j < n2)
        a[k++] = rarray[j++];
}

void MegerSort(vector<int> &a, int first, int last)
{
    if (first < last)
    {
        int mid = (first + last) / 2;
        MegerSort(a, first, mid );
        MegerSort(a, mid + 1, last);
        merge(a, first, mid, last);
    }
}

int main()
{
    vector<int> array;
    srand(unsigned(time(0)));
    for (int i = 0; i != 10; ++i)
        array.push_back(rand() % 10);
    for (vector<int>::iterator it = array.begin(); it != array.end(); ++it)
        cout<<*it<<" ";
    cout<<endl;
    MegerSort(array, 0, 9);
    for (vector<int>::iterator it = array.begin(); it != array.end(); ++it)
        cout<<*it<<" ";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:24:47.823

我认为有问题`a.resize(last - first + 1);`。你不应该这样做。

假设你打电话

`void merge(vector<int> &a, int first, int mid, int last)`

与`first = 6`,`mid = 7`和`last = 8`.

然后在调整大小后，`a`大小 = (8 - 6 + 1) = 3。

所以这将是一个问题-

`rarray.at(i) = a.at(mid + 1 + i);`你看`mid + 1 = 8`

# knockout.js - 使用 Knockout.js 主视图详细信息 - 如何更新主视图？

> ID：12564947
> 
> 赞同：1
> 
> 时间：2012-09-24T12:22:07.000
> 
> 标签：knockout.js, master-detail

我正在使用 Knockout.js 处理主详细信息视图。基本上，一切正常，有一个小缺点：每当当前显示在详细视图中的项目发生更改时，主节点不会相应地更新自身。

基本上，我明白为什么会这样：

*   主视图基于 a `ko.observableArray`，因此它只跟踪插入和删除项目。它不会对更新的项目做出反应。
*   Whenever an item is selected, it is put into a `ko.observable`which is the base for the detail view.
*   更新详细视图后，数组会自动包含正确的数据（因为它使用的是相同的对象），但它不会反映 UI 的更改（因为没有插入或更新任何项目）。

现在的问题是如何以优雅和正确的方式处理这个问题？

我目前可以想到两种可能的解决方案：

*   将数组中的每个项目包装在一个`ko.observable`. 这样，它将检测在详细信息视图中所做的任何更改并相应地更新 UI。
*   或者：使用克隆对象“复制”已编辑的项目`JSON.parse(JSON.stringify(...));`和`replace()`数组中的条目。由于现在已经在内部删除并插入了一个对象，因此该数组会检测到更改并更新 UI。

问题：

*   对于大量数据，第一种解决方案并不容易。至少它会减慢一切。
*   第二种解决方案效果很好，但是......嗯，嗯，......简直不好;-)

有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:14:22.807

恕我直言 - 我不可能永远知道所有的性能问题。您解释的第一个解决方案很简单，可以做您想做的事。另一种可能的方法是将包含的标签重新绑定到 ko.computed(...)。

# yaml - /usr/bin/perl install-module.pl 日期时间

> ID：12564951
> 
> 赞同：0
> 
> 时间：2012-09-24T12:22:19.397
> 
> 标签：yaml, bugzilla

在 RHEL 上安装 bugzilla 时，它会检查所需的模块： `./checksetup.pl --check-modules`

它显示了一些不可用的模块。

在尝试安装其中一个时，我遇到了以下错误：

```
[root@localhost bugzilla-4.2.3]# /usr/bin/perl install-module.pl DateTime

Checking for                 CPAN (v1.81)     ok: found v1.94 

**Checking for                 YAML (any)       not found** 

Checking for   ExtUtils-MakeMaker (v6.31)     ok: found v6.55_02 

CPAN: Storable loaded ok (v2.20)

CPAN: LWP::UserAgent loaded ok (v5.833)

CPAN: Time::HiRes loaded ok (v1.9721)

Warning: no success downloading '/root/.cpan/source/authors/01mailrc.txt.gz.tmp19575'. 

Giving up on it. at `/usr/share/perl5/CPAN/Index.pm line 225`

Fetching with LWP:

http://www.perl.org/CPAN/authors/01mailrc.txt.gz

LWP failed with code[500] message[Can't connect to www.perl.org:80 (Bad hostname 'www.perl.org')]

Trying with "/usr/bin/curl -L -f -s -S --netrc-optional" to get "http://www.perl.org/CPAN/authors/01mailrc.txt.gz" :

curl: (6) Couldn't resolve host 'www.perl.org'

Function system("/usr/bin/curl -L -f -s -S --netrc-optional "http://www.perl.org/CPAN/authors/01mailrc.txt.gz"  > /root/.cpan/source/authors/01mailrc.txt.tmp19575")returned status 6 (wstat 1536)

Warning: expected file [/root/.cpan/source/authors/01mailrc.txt.gz.tmp19575] doesn't exist

Trying with "/usr/bin/wget -O /root/.cpan/source/authors/01mailrc.txt.tmp19575" to get<some URL>

--2012-09-24 17:29:33--  <some URL>

Resolving www.perl.org... failed: Name or service not known.

wget: unable to resolve host address “www.perl.org”

Function system("/usr/bin/wget -O /root/.cpan/source/authors/01mailrc.txt.tmp19575 "some URL ")

returned status 4 (wstat 1024)

Warning: expected file [/root/.cpan/source/authors/01mailrc.txt.gz.tmp19575] doesn't exist

Warning: no success downloading '/root/.cpan/source/authors/01mailrc.txt.gz.tmp19575'. 

Giving up on it. at /usr/share/perl5/CPAN/Index.pm line 225 
```

谁能帮我吗？

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:14:00.503

看起来它无法解析主机名，你能从那台机器上 ping www.google.co.uk 吗？

如果那是您可以临时编辑 DNS 设置的问题，我现在不知道它在 Red Hat 中是如何工作的，但这是 Ubuntu 的方式：

须藤纳米 /etc/resolv.conf

添加DNS服务器手册：

```
#Google nameserver 1:
nameserver 8.8.8.8
#Google nameserver 2:
nameserver 8.8.4.4 
```

保存文件并重新启动网络接口：

```
sudo /etc/init.d/networking restart 
```

# sql-server - 如何借助 Sys.Columns 中的列名获取父表的名称

> ID：12564956
> 
> 赞同：2
> 
> 时间：2012-09-24T12:22:44.700
> 
> 标签：sql-server

我想得到表名。我有列名，当我尝试查看 Sys.Columns 表时，我得到了匹配的列名。我将如何获取与所需列关联的表名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:25:16.347

```
SELECT OBJECT_SCHEMA_NAME(object_id) AS TableSchemaName,
       OBJECT_NAME(object_id) AS TableName
FROM sys.columns
WHERE name = 'YourColumnName' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:25:25.157

我希望这有帮助：

```
select t.name from sys.columns c
inner join sys.tables t
on c.object_id = t.object_id
where c.name = 'insert column name here' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:26:39.243

尝试这个

```
declare @columnName As varchar(50) = 'ParentColumnName'

select t.name from sys.tables t 
join sys.columns c 
   on c.object_id = t.object_id
and c.name = @columnName 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T12:53:25.103

```
select OBJECT_NAME(object_id) as TableName from sys.Columns where name='columnNamehere' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T12:28:01.893

```
select name as 'TableName' from sys.tables where object_id=
(select object_id from sys.columns where name='UserName') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-08T20:05:49.027

我知道这是一个老问题，但迄今为止列出的答案并没有得到视图列的父表名称是什么，或者列是否别名为相对于父列中的列名具有新名称桌子。

不幸的是，（至少在 2008R2 中）似乎即使将您的视图注册到 Schema，`referencing_minor_id`of `sys.dm_sql_referenced_entities`（或来自 的等效列`sys.SQL_Modules`）总是设置为零。但是，您可以检索所有引用的表（和父视图），以及使用`sys.dm_sql_referenced_entities`（或`sys.SQL_Modules`）查询这些表的哪些字段。但是，它不会捕获这些绑定的顺序，因此以下内容无法将视图列直接链接到表列，但它会提供一个近似值：

```
DECLARE @obj_name nvarchar(50) = 'Table_or_View_name_here';
with obj_id as (
    select object_id, name, OBJECT_SCHEMA_NAME(object_id)+'.'+name as qualified_name from sys.all_objects as o
    where o.name = @obj_name 
),
tv_columns as ( -- table or view
    select o.name as Obj_Name, c.* from sys.columns as c join 
        obj_id as o on
            c.object_id=o.object_id
),
sql_referenced_entities as  (
    SELECT
        o.name as referencing_name,
        o.object_id,
        COALESCE(NULLIF(referencing_minor_id,0),ROW_NUMBER() OVER (ORDER BY (select 'NO_SORT'))) as referencing_minor_id,
        referenced_server_name,
        referenced_database_name,
        referenced_schema_name,
        referenced_entity_name,
        referenced_minor_name,
        referenced_id,
        referenced_minor_id,
        referenced_class,
        referenced_class_desc,
        is_caller_dependent,
        is_ambiguous
    FROM obj_id as o, sys.dm_sql_referenced_entities((select qualified_name from obj_id), 'OBJECT') where referenced_minor_id<>0
)  
    select 
        c.object_id as object_id,
        o.name as object_name,
        c.column_id,
        c.name as column_name,
        c2.object_id as parent_table_object_id,
        o2.name as parent_table_name, 
        c2.column_id as parent_column_id,
        c2.name as parent_column_name
--      ,c.*,
--      ,c2.* 
    from sys.columns as c join 
        obj_id as o on
            c.object_id=o.object_id left outer join
        (sql_referenced_entities as s join
            sys.all_objects as o2 on
                s.referenced_id=o2.object_id and s.referenced_class=1 join
            sys.columns as c2 on
                s.referenced_id=c2.object_id and s.referenced_minor_id=c2.column_id
        ) on 
            c.object_id=s.object_id and c.column_id=s.referencing_minor_id 
```

要获得使用的真实别名以及涉及多个字段组合的任何计算，您必须解析其中一个`OBJECT_DEFINITION(OBJECT_ID('schema.view'))`（或可能`exec sp_helptext 'schema.view'`）的输出，如下所示

从...开始`OBJECT_DEFINITION(OBJECT_ID('schema.view'))`

1.  将单引号中的内容标记为替代删除和其他要遵循的规则
2.  删除`/* */`评论之间的块
3.  删除 之后的任何文本`--`，直到下一个换行序列（请参阅`EXEC SP_HELPTEXT 'sp_helptext'`它们的行尾代码）
4.  `FROM`从子句中查找表/子选择别名
5.  解析 SELECT 子句并以逗号分隔，而不是行尾。
6.  将任何连续的空格减少为单个空格字符。当点/句点（或空格）尚未出现时`[`，在前后强制使用空格。`]`
7.  我们将把上面的内容放入一个我们将调用的存储过程中`usp_helptext_for_view`
8.  查看哪些`table_alias.field_name`是别名或仅显示为`field_name`. 请参阅下面的代码片段以了解如何将字段别名与定义分开。
9.  根据需要将视图链接到表。

`drop table #s create table #s (id bigint identity(1,1) primary key, text nvarchar(max)) insert into #s (text) exec usp_helptext_for_view @qualified_viewname with s as (select id, text, az=(select MIN(x*(case x when 0 then null else 1 end)) FROM (VALUES (charindex(@viewfieldname,text COLLATE Latin1_General_CI_AS)), (charindex('['+@viewfieldname+']',text COLLATE Latin1_General_CI_AS)), (charindex('AS ['+@viewfieldname+']',text COLLATE Latin1_General_CI_AS)), (charindex('as '+@viewfieldname,text COLLATE Latin1_General_CI_AS)) ) AS value(x) ), NULLIF(charindex('=',text),0)) as eq --oh, the irony of how the two different styles are applied FROM #s ) SELECT @viewfieldname as ViewField, CASE eq WHEN NULL THEN IIF(az IS NULL, NULL, LEFT(text, az-2)) ELSE RIGHT(text,LENGTH(text)-eq) -- alternately ELSE CASE az WHEN NULL THEN NULL WHEN &lt;eq THEN RIGHT(text,LENGTH(text)-eq) ELSE NULL END END as ViewFieldDefinition, id as sortPosition FROM s WHERE text like '%'+@viewfieldname+'%' -- you should be able to eliminate this clause without affecting the results. ORDER BY id, @viewfieldname`

# owasp - 覆盖 ESAPI OWASP 方法 java

> ID：12564962
> 
> 赞同：0
> 
> 时间：2012-09-24T12:23:15.573
> 
> 标签：owasp, esapi

我正在尝试使用[ESAPI.override()](http://owasp-esapi-java.googlecode.com/svn/trunk_doc/latest/org/owasp/esapi/ESAPI.html#override%28org.owasp.esapi.SecurityConfiguration%29)覆盖 ESAPI OWASP 库中的现有方法。不知怎的，它不起作用，你知道为什么吗？

这是我的代码：

```
public class AntiSamyDOMScannerExpansion extends AbstractAntiSamyScanner {

//...
public CleanResults scan(String html, String inputEncoding, String outputEncoding) throws ScanException {
        ESAPI.override(new DefaultSecurityConfiguration());
//... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:13:38.127

`ESAPI.override()`仅用于覆盖配置。为了扩展其他类型的方法，在我的例子`AntiSamy.scan`中，需要扩展调用结构中的每个类。
这是因为执行不灵活。例如我们发现`HTMLValidationRule.java`：

```
private String invokeAntiSamy( String context, String input ) throws ValidationException {
        // CHECKME should this allow empty Strings? "   " us IsBlank instead?
        if ( StringUtilities.isEmpty(input) ) {
            if (allowNull) {
                return null;
            }
            throw new ValidationException( context + " is required", "AntiSamy validation error: context=" + context + ", input=" + input, context );
        }

        String canonical = super.getValid( context, input );

        try {
            AntiSamy as = new AntiSamy();
            CleanResults test = as.scan(canonical, antiSamyPolicy);

            List<String> errors = test.getErrorMessages();
            if ( !errors.isEmpty() ) {
                LOGGER.info( Logger.SECURITY_FAILURE, "Cleaned up invalid HTML input: " + errors );
            }

            return test.getCleanHTML().trim();

        } catch (ScanException e) {
            throw new ValidationException( context + ": Invalid HTML input", "Invalid HTML input: context=" + context + " error=" + e.getMessage(), e, context );
        } catch (PolicyException e) {
            throw new ValidationException( context + ": Invalid HTML input", "Invalid HTML input does not follow rules in antisamy-esapi.xml: context=" + context + " error=" + e.getMessage(), e, context );
        }
    } 
```

由于`AntiSamy as = new AntiSamy();`我们无法使其在自定义实现中可用。

# c# - 如何在模拟容器对象中传递模拟对象

> ID：12564966
> 
> 赞同：0
> 
> 时间：2012-09-24T12:23:28.493
> 
> 标签：c#, tdd, moq

我的方法需要一个 FloFilesList，它是一个存储 FloFile 对象列表的类（一个描述和对某些类型的文件执行操作的类）

我调用的方法根据 FloFile.FileName 的值返回 1 个 FloFile。

我想使用接口 IFloFile 来初始化模拟对象，而不是将 FloFile.FileName 设置为 Virtual 只是因为我被告知接口是要走的路。

```
 var mockFloFileOne = new Mock<IFloFile>();
        mockFloFileOne.SetupGet(f => f.FileName).Returns("FileName.xml"); 
```

如何将模拟 FloFile 添加到模拟 FloFilesList 中？我试过这个。

```
var mockFloFileList = new Mock<FloFilesList>();
mockFloFileList.Object.Add(mockFloFileOne.Object); 
```

这不起作用，因为我收到错误“...IFloFile 不可分配给 FloFile”

如何模拟 FloFilesList ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:25:38.497

您需要将`Object`属性的类型`FloFilesList`从更改`List<FloFile>`为`List<IFloFile>`。

# c# - Linq to sql 多列

> ID：12564969
> 
> 赞同：0
> 
> 时间：2012-09-24T12:23:49.427
> 
> 标签：c#, linq, linq-to-sql

我有一个字典`Dictionary<string, List<string>> FilterDictionary`，其中包含一个列名作为键，该键的值是一个将用作 where 子句的条件列表。

我需要查询我的数据库，并为字典中的每一列使用该键列表中的条件查询该列。

只是想知道最好的方法是什么？

这是我想要实现的目标，但显然我知道它不像`columnName == filterCriteria`.

```
var originalQuery = from p in productContext.Products
                    select p;
foreach (var item in FilterDictionary)
{
    string columnName = item.Key;

    foreach (var filterCriteria in FilterDictionary)
    {
        originalQuery.Where(columnName == filterCriteria); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:31:53.577

我会做这样的事情来保存你的过滤条件集合：

```
var filters = new List<Expression<Func<Product, Boolean>>>();
filters.Add(e => e.Name == "some name");

var originalQuery = from p in productContext.Products
                    select p;
originalQuery = filters
    .Aggregate(originalQuery, (current, condition) => current.Where(condition)); 
```

在`foreach`循环结束时，`originalQuery`将在逻辑`AND`上将`filters`.

# c# - 使用用户定义大小的方法不向控制台返回任何内容

> ID：12564974
> 
> 赞同：0
> 
> 时间：2012-09-24T12:24:06.357
> 
> 标签：c#, methods

下面是我为练习一些 C# 基础和原则而编写的程序。

这个程序询问用户他们想要一个数组有多大`int`，然后填充数组，最后返回数组中各个元素的平均值。

我知道我可以使用 LINQ 做到这一点，但由于我正在学习，我需要学习具体细节。

就目前而言，我编写的方法不会向控制台返回任何内容，有人可以告诉我它有什么问题吗？

在其中一个循环附近还有一条评论`for`，我需要一些帮助来理解它为什么会这样。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace _9_21_Test
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("enter the amount of numbers you would like to find the average of: ");
            int arraylength = Int32.Parse(Console.ReadLine());
            int[] AverageArray = new int[arraylength];

            ////filling the array with user input
            for (int i = 0; i < AverageArray.Length; i++)
            {
                Console.Write("enter the numbers you wish to find the average for: ");
                AverageArray[i] = Int32.Parse(Console.ReadLine());

            }
            //printing out the array, without the -1 the array prints out more one number than it should, don't know why
            Console.WriteLine("here is your array: ");
            for (int i = 0; i < AverageArray.Length -1 ; i++)
            {
                Console.WriteLine(AverageArray[i]);
            }
            Console.WriteLine(Calcs.FindAverage(AverageArray));
            Console.ReadLine();

        }

    }
    //Method to find the average is another class for learning porpoises
    class Calcs
    {
        public static double FindAverage(int[] averageNumbers)
        {
            int arraySum = 0;

            for (int i = 0; i < averageNumbers.Length; i++)
                arraySum += averageNumbers[i];

            return arraySum / averageNumbers.Length;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:35:37.553

我试过调试，你的代码工作正常。只是您在第二个循环中不需要 ArrayLength-1 。请改用 ArrayLength。

```
 static void Main(string[] args)
        {
            Console.WriteLine("enter array length ");
            int arraylength = Int32.Parse(Console.ReadLine());
            int[] AverageArray = new int[arraylength];

            for (int i = 0; i < AverageArray.Length; i++)
            {
                Console.Write("enter the numbers you wish to find the average for: ");
                AverageArray[i] = Int32.Parse(Console.ReadLine());

            }

            Console.WriteLine("here is your array: ");
            for (int i = 0; i < AverageArray.Length ; i++)
            {
                Console.WriteLine(AverageArray[i]);
            }

            Console.WriteLine("here is the result");
            Console.WriteLine(Calcs.FindAverage(AverageArray));
            Console.ReadLine();

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T19:32:53.253

**好吧，我认为 Visual Studio C#(Sharp) 会在for**循环之前的第二条代码语句上给你一个错误，因为 Array 使用常量变量作为索引大小。

```
 Console.WriteLine("enter array length ");
  const int arraylength = Int32.Parse(Console.ReadLine());
        int[] AverageArray = new int[arraylength]; 
```

Check **Calcs**在当前上下文中也不存在。

# iphone - 使用 TBXMLParser 的属性值

> ID：12564978
> 
> 赞同：3
> 
> 时间：2012-09-24T12:24:15.380
> 
> 标签：iphone, tbxml

我必须解析相对大量的 XML 数据，因此我打算使用`TBXMLParser`. 我对它很陌生。下面是示例 XML 格式。

```
<item>
<title> Test XML</title>
<link>http://www.google.com</link>
<media:content url="http://blog.directorymaximizer.com/wp-content/uploads/2012/09/google.jpg" medium="image">
    <media:title type="html”&gt;Google</media:title>
</media:content>

<media:content url="http://icons.iconarchive.com/icons/fasticon/web-2/256/Google-icon.png" medium="image">
    <media:title type="html”&gt;Google-Png</media:title>
</media:content>

<media:content url="http://icons.iconarchive.com/icons/fasticon/web-2/256/Google-icon.png" medium="image">
<media:title type="html”&gt;Google-Png</media:title>
</media:content>
</item>

and it goes on... 
```

我想获得第二个 url ='Have to...' 的值。

```
TBXMLElement *iconElement = [TBXML childElementNamed:@"Image" parentElement:element];
strIcon = [TBXML valueOfAttributeNamed:@"url" forElement:iconElement]; 
```

这是代码，我试过了。使用它，我能够获得第一个`url`属性值。任何建议将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:49:58.197

```
TBXML *tbxml = [TBXML tbxmlWithURL:[NSURL URLWithString:yourXMLString]];  //replace yuorXMLString with your string

    TBXMLElement * root = tbxml.rootXMLElement;

    // if root element is valid
    if (root!=nil) {

        TBXMLElement * element = [TBXML childElementNamed:@"item" parentElement:root];

        while (element != nil) {
TBXMLElement *iconElement = [TBXML childElementNamed:@"Image" parentElement:element];
strIcon = [TBXML valueOfAttributeNamed:@"url" forElement:iconElement];

    }
} 
```

希望这行得通？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:12:35.997

根据您编辑的示例数据获取第二个节点的值..

```
TBXML *tbxml = [TBXML tbxmlWithURL:[NSURL URLWithString:yourXMLString]];  //replace yuorXMLString with your string
TBXMLElement * root = tbxml.rootXMLElement;

// if root element is valid

if (root != nil) {
    TBXMLElement * element = [TBXML childElementNamed:@"item" parentElement:root];

         TBXMLElement *node= [TBXML childElementNamed:@"media:content" parentElement:element];
          TBXMLElement *secondNode= [TBXML nextSiblingNamed:@"media:content" searchFromElement:node];
        NSLog(@"the second url name is : %@",[TBXML valueOfAttributeNamed:@"url" forElement:secondNode]);

} 
```

# apache-flex - 调试器不适用于 Flash Builder 4

> ID：12564982
> 
> 赞同：0
> 
> 时间：2012-09-24T12:24:24.580
> 
> 标签：apache-flex, flash-builder

我在 Adob​​e Flash Builder 4 中遇到了一种情况，软件中有调试模式，但每当我点击它时；它给我一个错误说

```
"C:\WINDOWS\system32\Macromed\Flash\Flash32_11_2_202_160.ocx

Flash Builder cannot locate the required debugger version of Adobe Flash Player. You might need to install the debugger version of the Flash Player or reinstall Flash Builder.

Do you want to try to debug with the current version?" 
```

我不知道这是什么，Flash Builder 没有附加调试器，我的系统上安装了 Flash Player。

```
(I have a file named FlashUtil32_11_2_202_160_ActiveX.dll on this path "C:\WINDOWS\system32\Macromed\Flash\") 
```

任何想法都非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:37:30.797

它有时是由于损坏的闪存播放器（调试器）或堆内存分配而发生的。

如果您重新启动 flash builder 并清理构建项目，它有时会起作用。

或者

按照[http://forums.adobe.com/message/4057195](http://forums.adobe.com/message/4057195) 卸载现有的 Flash 播放器并根据您的操作系统安装最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:35:16.897

[你可以在这里](http://www.adobe.com/support/flashplayer/downloads.html)下载调试播放器

*   **ActiveX 控件内容调试器**适用于 Internet Explorer
*   **插件内容调试器**（如果适用于其他浏览器）
*   **投影仪内容调试器**是独立版本

# mod-rewrite - apache多次重写条件到nginx

> ID：12564988
> 
> 赞同：1
> 
> 时间：2012-09-24T12:24:35.277
> 
> 标签：mod-rewrite, nginx

谁能帮我这个？

```
RewriteCond %{REQUEST_URI} !^\/index\.php$
RewriteCond %{REQUEST_URI} !^\/search\/.*
RewriteCond %{REQUEST_URI} ^\/([^/]*)\.php$
RewriteRule (.*) http://www.mydomain.com/index.php?page=$1 
```

我需要将其转换为 nginx

我试过这个，但它不起作用：

```
if ($request_uri ~* !^\/search\/.*) {
  if ($request_uri ~* !^\/index\.php$) {
    if ($request_uri ~* ^\/([^/]*)\.php$) {
      rewrite (.*) http://www.mydomain.com/index.php?page=$1;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:50:23.130

我最终使用：

```
if ($uri !~ "^/index.php$") {
  set $rule_0 1$rule_0;
}
if ($uri !~ "^/search/.*") {
  set $rule_0 2$rule_0;
}
if ($uri ~ "^/([^/]*).php$") {
  set $rule_0 3$rule_0;
}
if ($rule_0 = "321") {
  rewrite ^(.*) /index.php?page=$1 last;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:28:50.507

尝试将 更改`~* !`为`!~*`，并结合最后两个：

```
if ($request_uri !~* ^/search/.*) {
  if ($request_uri !~* ^/index\.php$) {
    rewrite ^/([^/]*)\.php$ http://www.mydomain.com/index.php?page=$1 redirect; 
  }
} 
```

或坚持基于位置的规则：

```
location ~ /index\.php$ { } 
location ~ /search/.* { } 
location / { 
    rewrite ^/([^/]*)\.php$ http://www.mydomain.com/index.php?page=$1 redirect; 
} 
```

# php - 正则表达式将 html 元素与 html 子项匹配

> ID：12564990
> 
> 赞同：0
> 
> 时间：2012-09-24T12:24:38.267
> 
> 标签：php, regex

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我不知道如何表达这个问题。

基本上我有这个php代码：

```
$new_html = preg_replace('!<div.*?id="spotlight".*?>.*?</div>!is', '', $html); 
```

我希望它从此更改 html 代码（例如，不是实际的 html）：

```
<div id="container">
    <div id="spotlight">
        <!-- empty -->
    </div>
    <div id="content">
        <!-- lots of content -->
    </div>
</div> 
```

对此：

```
<div id="container">
    <div id="content">
        <!-- lots of content -->
    </div>
</div> 
```

如您所见，php 代码将成功执行此操作，因为正则表达式正在寻找：

```
<div{anything}id="spotlight"{anything}>{anything}</div> 
```

**然而**

如果 div id="spotlight" 包含像这样的子 div：

```
<div id="container">
    <div id="spotlight">
        <div></div>
    </div>
    <div id="content">
        <!-- lots of content -->
    </div>
</div> 
```

那么正则表达式将匹配子 div 的结束 div 标签！

我该如何防止这种情况？如果打开了另一个 div，我如何告诉正则表达式忽略关闭的 div？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:31:17.187

使用`DOMDocument`：

```
$html = '<div id="container">
    <div id="spotlight">
        <!-- empty -->
    </div>
    <div id="content">
        <!-- lots of content -->
    </div>
</div>';

$dom = new DOMDocument;
$dom->loadXML($html);

$xpath = new DOMXPath($dom);
$query = '//div[@id="spotlight"]';
$entries = $xpath->query($query);

foreach($entries as $one){

    $one->parentNode->removeChild($one);
}

echo $dom->saveHTML(); 
```

[键盘示例](http://codepad.org/Fs8wWYee)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:34:44.747

```
$a = preg_replace('/<div[^>]+>\\s+<\/div>/', '', $a); 
```

# cuteeditor - 从配置中设置 CuteEditor EnableStripIframeTags 属性

> ID：12564995
> 
> 赞同：0
> 
> 时间：2012-09-24T12:25:00.833
> 
> 标签：cuteeditor

我一直在研究一个使用 CuteEditor 控件的现有项目。我发现为了启用 iframe 标签，我需要添加属性`EnableStripIframeTags`并将其设置为 false。但是，CuteEditor 控件出现在很多页面中。

是否可以`EnableStripIframeTags`从 CuteEditor 的配置文件中进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:29:42.020

我不认为那是可能的。我的解决方案是创建一个方法来设置属性并从每个页面调用它。

通常还有几个其他属性需要更改，也可以添加到该方法中。

```
public void initialiseEditor(CuteEditor.Editor editor) {

        editor.EnableStripIframeTags = true;
        editor.EnableStripScriptTags = true;
        editor.EnableStripStyleTagsCodeInjection = true;

} 
```

# sql-server - sql server中的日期比较

> ID：12564996
> 
> 赞同：1
> 
> 时间：2012-09-24T12:25:03.643
> 
> 标签：sql-server, date-comparison, date-math

我正在尝试显示从今天开始 30 天的日期（我在表格中有列日期）的记录。一旦它显示出来，我需要通过使用 Date= 今天的日期添加详细信息来创建新记录。我试过这个：

```
select * from 
paymenthist 
where 
Date = CONVERT(datetime, CONVERT(varchar, DATEADD(day, -30, GETDATE()), 101)) 
```

但是所有记录都在显示..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:35:16.553

好的，我承认我建议的方式可能效率低下，但是如果一个是日期时间，另一个是日期，那么我相信这将比 >= <= 方法更有效，因为 SQL 通常不擅长利用索引进行查询像这样，并且在幕后日期时间实际上是一个浮点数，所以为了纯粹的效率，试试这个：

```
CREATE TABLE ##PaymentHistory
(
ID INT IDENTITY,
[Date] DATETIME,
Col1 INT,
Col2 INT
)

INSERT INTO ##PaymentHistory([Date],Col1,Col2)
VALUES(FLOOR(CAST(GETDATE() -29 AS FLOAT) ) ,1,1)
, (FLOOR(CAST(GETDATE() -30 AS FLOAT) ) ,2,2)
, (FLOOR(CAST(GETDATE() -31 AS FLOAT) ) ,3,3)

SET IDENTITY_INSERT ##PaymentHistory ON

INSERT INTO ##PaymentHistory(ID, [Date], Col1, Col2)
SELECT ID, GETDATE(), Col1, Col2 
FROM ##PaymentHistory 
WHERE CAST(Date AS FLOAT) = FLOOR(CAST(GETDATE() -30 AS FLOAT) ) 

SET IDENTITY_INSERT ##PaymentHistory OFF 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T12:31:26.290

它在某种程度上取决于日期列的数据类型，但试试这个。

```
select * from paymenthist where cast(Date as date) =  cast(DATEADD(day, -30, GETDATE()) as date) 
```

# joomla - 链接到单独页面的 Joomla 新闻快讯项目

> ID：12564997
> 
> 赞同：3
> 
> 时间：2012-09-24T12:25:04.920
> 
> 标签：joomla, content-management-system, joomla2.5

Joomla 2.5假设我有“新闻”类别，里面有一些文章和模块，我们称它们为“模块1”，“模块2”最多10个。通常，如果我有一个名为“新闻”的菜单项，其下有类别视图（它是在Joomla中称为博客或其他东西），我只设置了“module1”显示在那里，这个类别的所有项目都将以相同的布局显示。但是，如果我添加 ie. “module2”，这是一个新闻快讯，到我的主页，来自“新闻”类别的项目将与主页布局一起显示，并显示所有模块。我希望它们像在“新闻”页面上一样显示。怎么做？

答：将文章添加到“隐藏”菜单是不可接受的。想象一下博客，您必须将所有帖子添加到任何类型的菜单中。

视觉解释：通常，一个菜单位置列出文章的类别并且只启用了两个模块（称为模块1和模块2），将如下所示：http: [//imm.io/FGrJ](http://imm.io/FGrJ) 如果您单击任何项​​目，您将重定向到具有相同布局的页面（注意：我不必将所有文章添加到菜单，只需文章列表页面）：http: [//imm.io/FGrP](http://imm.io/FGrP)

但是，如果我在充满模块的主页上添加新闻快讯模块，单击一个项目将在主页上显示文章，在我称为主要内容的区域中。哪个不好。我希望它像文章列表中的文章一样打开。这是屏幕：http: [//imm.io/FGsR](http://imm.io/FGsR)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:47:29.653

[这篇](http://docs.joomla.org/How_to_control_module_display_when_linking_to_an_article_with_no_menu_item)关于 Joomla 文档的文章很好地了解了我所理解的你要做的事情。正如您在问题中所说的那样，您不希望拥有菜单项，我认为最好的方法是它们在底部标记为数字 3 - 安装一个扩展程序，以提供对模块显示位置的详细控制。他们的特色模块是[高级模块管理器](http://extensions.joomla.org/extensions/access-a-security/modules-management/10307)——它来自 NoNumber——很多网站都在使用它，并且有良好的记录。但是，这里有 Joomla 扩展目录上的整个模块[部分](http://extensions.joomla.org/extensions/style-a-design/modules-management)

# javascript - onclick 页面不带任何绝对路径进入首页

> ID：12564999
> 
> 赞同：10
> 
> 时间：2012-09-24T12:25:06.290
> 
> 标签：javascript, jquery, html

我想点击链接，我想自己去主页上的页面

```
<a onclick="javascript:GoToHomePage()" href="javascript:void(0)">Home page</a> 
```

功能是

```
function GoToHomePage()
{
    window.location = 'default.aspx';   
} 
```

但我想要 www.testtest.com 页面的 url 而不是 www.testtest.com/default.aspx

我什至不能给出像 www.testtest.com 这样的绝对路径，因为它是一个门户网站，并且同一页面会出现在几个门户网站中。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-24T12:30:15.683

以下代码将带您到“//www.testtest.com/”

```
 function GoToHomePage()
  {
    window.location = '/';   
  } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T12:29:42.020

试试这个：

```
window.location = '/'; 
```

执行此代码会将您的访问者直接发送到您网站的根目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:27:11.550

看起来你需要

```
window.location = '/default.aspx'; 
```

或者

```
window.location = '/'; 
```

（不确定你的目标）

'/' 表示“域的根”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:27:30.630

`/`之前添加`default.aspx`，它应该带你到`home page`

```
function GoToHomePage()
{
    window.location = '/default.aspx';   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-26T19:05:38.930

由于各种明显的原因，我强烈建议使用 href 而不是 onclick：

```
<a href="/">Home page</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-05T08:58:36.037

正如以下建议的那样，它对我有用`@Olly Hodgson`：

```
<a href="/">Home page</a> 
```