# StackOverflow 问答 14369000-14369999

# c# - 从 C# 向 IronPython 发送匿名类型会引发 MissingMemberException

> ID：14369019
> 
> 赞同：5
> 
> 时间：2013-01-16T22:23:39.493
> 
> 标签：c#, ironpython, anonymous-types

下面的代码抛出一个“MissingMemberException”

```
ScriptEngine engine = Python.CreateEngine();
ScriptRuntime runtime = engine.Runtime;
ScriptScope scope = runtime.CreateScope();

string code = "emp.Name==\"Bernie\"";

ScriptSource source =
  engine.CreateScriptSourceFromString(code, SourceCodeKind.Expression);

var emp = new {Name = "Bernie"};

scope.SetVariable("emp", emp);

var res = (double)source.Execute(scope); 
```

如果我声明一个名为“Employee”的类型并给它一个成员“Name”，然后改用它：

```
var emp = new Employee {Name = "Bernie"} 
```

它按预期工作。有谁知道为什么它不适用于匿名类型并且有解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:58:35.950

您的问题是匿名类型是内部的。当编译器生成匿名类型时，大概是这样的：

```
internal class <>f__AnonymousType0`1'<'<Name>j__TPar'> //or whatever silly name the compiler uses
{
    public string Name {get;set;}
} 
```

您可以通过将具体类更改为内部来复制您遇到的错误：

```
internal class Employee
{
    public string Name { get; set; }
} 
```

好的，这就是它发生的原因。你如何解决它？好吧，最好的方法是只使用您已经找到的公开的具体类。

# ruby-on-rails - 无法在 paymill 上进行 API 调用 - 作为响应找到 302 - rails

> ID：14369021
> 
> 赞同：0
> 
> 时间：2013-01-16T22:23:41.490
> 
> 标签：ruby-on-rails, api, paymill

我使用了 paymill 页面上的示例来毫无问题地获取令牌。我正在使用 ajax 调用传递令牌。但我无法通过 API 进行最终调用。我无法真正理解如何使用 github 上的 paymill-ruby 或 paymill-rails 代码中的代码，所以我通过代码找到了 API 调用——这是我所缺少的——但无法使其工作。我想做的只是简单的付款。没有订阅，没有用户。只需信用卡支付。这是我的控制器的代码：

```
token = params[:token]

params = {'amount' => '#{@@amount}', 'currency' => 'EUR', 'token' => '#{token}', 'description' => 'description'}

https = Net::HTTP.new('api.paymill.de', 80)
https.use_ssl = false
https.start do |connection|
  url = "/v2/transactions"
  https_request = Net::HTTP::Post.new(url)
  https_request.basic_auth(Paymill.api_key,"")
  https_request.set_form_data(params)
  @response = https.request(https_request)
end

puts @response.body
puts @response.header

render :action => "confirm" 
```

回应是

```
<html>
<head><title>302 Found</title></head>
<body bgcolor="white">
<center><h1>302 Found</h1></center>
<hr><center>nginx</center>
</body>
</html>
#<Net::HTTPFound:0x00000004a98400> 
```

而且我无法弄清楚出了什么问题...几周前我不知道ajax是什么...有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:50:05.470

我不是铁路专家，但...

...您在不使用 SSL 的情况下通过端口 80 连接到我们的 API。我们只允许向 API 发出 SSL 请求，因此您必须使用端口 443 进行连接并启用 SSL。

希望能解决您的问题。

# ruby - 如何使用 Ruby 从远程服务器上的 Dropbox 读取文件？

> ID：14369022
> 
> 赞同：1
> 
> 时间：2013-01-16T22:23:55.570
> 
> 标签：ruby, dropbox

我想运行自动化脚本来从我们服务器上的 Dropbox 文件夹中读取文件。我开始研究那里的保管箱 gem，它们似乎都要求用户通过打开浏览器来验证会话。这对于自动化任务显然没有意义。有没有办法在不需要用户手动打开浏览器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:50:56.450

它们都需要网络浏览器的原因是 Dropbox 使用 OAuth v1。Dropbox API T&C 有一种方法可能不是 100% 精神上的。

我将首先创建一个 Dropbox 帐户，该帐户将是您在脚本中使用的用户帐户。以该用户身份手动登录并转到您的应用的授权 URL 并批准它。

在您的脚本中，您将创建一个使用该用户 ID 和密码登录的 HTTP 连接。您需要将信息保留在描述用户会话的响应中。使用会话信息创建到授权 URL 的第二个 HTTP 连接。由于该应用程序已获得授权，因此您只需从重定向 URL 中捕获会话令牌。

这样做的明显缺点是用户的密码在您的脚本中。:P

# ruby-on-rails - 在 Capybara 中使用 sleep 是否有更好的选择？

> ID：14369024
> 
> 赞同：11
> 
> 时间：2013-01-16T22:24:00.720
> 
> 标签：ruby-on-rails, cucumber, capybara

在我的测试中，我有一个步骤，我填写一个字段并按 Enter。然后该字段在下一页返回结果集。

这是我的辅助方法：

```
def search(term)
  fill_in('query-text', :with => term)
  click_button('search-button')
end 
```

之后，我有一个步骤简单地说：

```
page.should have_content(tutor) 
```

但是，问题是即使我的页面加载了结果之后的页面，它之后的步骤也会通过，即使它应该是错误的。我在该步骤中设置了一个调试器，当我手动检查它时，断言也会失败，正如我所期望的那样。我的假设是下一步是在页面重新加载之前进行检查。我在搜索方法的末尾放置了一个睡眠，使其看起来像：

```
def search(term)
  fill_in('query-text', :with => term)
  click_button('search-button')
  sleep 5
end 
```

但我觉得使用 sleep 是解决这个问题的一种方法。我正在使用 Capybara 2，因此删除了 wait_until 的使用。有没有比依赖睡眠更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-10T21:32:05.457

您`tutor`的 HTML 页面中是否隐藏了文本？`has_content?`返回`true`html 中存在的任何文本，包括不可见的隐藏文本。所以我宁愿用 替换它`expect(page).to have_text(tutor)`，它只检查页面上的可见文本。`.text`也是相当慢的方法，所以这些额外的分秒可能对你很方便。

另一种方法是在您的规范助手中恢复 wait_until 方法，因为它在大多数情况下非常方便：

```
def wait_until(timeout = DEFAULT_WAIT_TIME)
  Timeout.timeout(timeout) do
    sleep(0.1) until value = yield
    value
  end
end 
```

无论如何，这比每次都等待固定的超时要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T09:35:46.507

此测试通过，因为`tutor`页面上已经存在。

因此，您应该检查的不是`tutor`其他内容，而是其他内容，例如`tutor`仅在页面重新加载后才出现的带有文本的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:28:37.780

是的，你说得对，wait_until 被删除，新方法是#synchronize，但我现在不知道如何使用它:)

调查

[http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara](http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara)

[https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/base.rb#L44](https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/base.rb#L44)

# asp.net-mvc-3 - 构建 MVC 路由

> ID：14369025
> 
> 赞同：0
> 
> 时间：2013-01-16T22:24:03.500
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我有以下 url 结构，只是想找出要配置的最佳路由。

**编辑：添加了更多网址**

/cars/{name}（显示汽车的一般信息）

/cars/{name}/models（显示特定汽车的模型列表）

/cars/{name}/models/{id}（显示特定汽车的特定型号）

/cars/{name}/models/edit（添加一个新模型，这将是一个动作）

/cars/{name}/models/{id}/owners（特定模型的所有者列表）

/cars/{name}/models/{id}/owners/create（添加新所有者）

到目前为止，我有

```
 routes.MapRoute(
            name: "CarReleases",
            url: "cars/{name}/models/{id}",
            defaults:
                new
                    {
                        controller = "Releases",
                        action = "Index",
                        id = UrlParameter.Optional
                    }
            ); 
```

如果我使用 /cars/{name}/models，这将有效，但显然，我没有可用于模型页面的操作。我必须为这种情况创建一个新的路线图吗？

我也有 CarController，它的映射如下：

```
 routes.MapRoute(
            name: "Cars",
            url: "cars/{name}/{action}",
            defaults: new { controller = "Cars", action = "Details", id = UrlParameter.Optional }
            ); 
```

正如你所看到的，我有一个动作和动态请求的一般混合。有点混淆了将其放入 maproutes 的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:33:42.340

**按从最具体到最不具体的**顺序排列您的路线。在我的示例中，所有操作都映射到控制器`Cars`；但是，您可以将它们分开。例如：

拥有者：

```
routes.MapRoute(
            name: "owners",
            url: "cars/{name}/models/{id}/owners/{action}/{ownerId} ",
            defaults: new { controller = "Cars", action = "OwnerIndex", id = UrlParameter.Optional, ownerId = UrlParameter.Optional }
            ); 
```

楷模：

```
routes.MapRoute(
            name: "models",
            url: "cars/{name}/models/{action}/{id}",
            defaults: new { controller = "Cars", action = "ModelIndex", id = UrlParameter.Optional }
            ); 
```

汽车：

```
routes.MapRoute(
            name: "Cars",
            url: "/cars/{name}/{action}/{id}",
            defaults: new { controller = "Cars", action = "Index", id = UrlParameter.Optional }
            ); 
```

请注意，默认操作已更改为索引，因此当您省略操作和 Id 时，它会列出所有操作（如果您决定将它们全部保存在一个控制器中，则可能需要更改它）

关于您是否应该将它们保存在一个控制器中的问题，我认为这很好，除非您想将管理功能（编辑、删除等）与查看分开。在任何情况下，您仍然可以将它们放在一个控制器中并添加`Authorize`属性。

```
[Authorize(Roles = "admin")]
public ViewResult Delete(int id){} 
```

# c++ - 如何设置 Vim 以使用 Visual Studio 2010 的 C++ 编译器进行编译？

> ID：14369032
> 
> 赞同：2
> 
> 时间：2013-01-16T22:24:38.473
> 
> 标签：c++, windows, visual-studio-2010, visual-c++, vim

我可以通过运行**vcvarsall.bat**从命令行进行编译，然后使用我的源文件作为唯一参数运行**cl.exe 。**问题是在没有首先使用上述批处理文件设置环境的情况下运行**cl.exe会由于“缺少库”而导致错误。**

我可以想象一些解决方法，例如在我的项目目录中创建一个包含**vcvarsall.bat**并执行所有编译的批处理文件。在我看来，这似乎是一个非常繁琐且不灵活的解决方案。我更希望能够像在 Unix 中一样从 Vim 编译和运行任何 C 或 C++ 文件：

```
:nnorebind <F5> :! g++ %<CR> 
```

不过，我不想将**vcvarsall.bat**添加到环境中的一堆路径永久添加。我不知道如何更好地表达我的问题：如何设置 Vim 以使用 Visual Studio 2010 C++ 编译器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:20:38.317

你可以在 Vim 中更新环境变量。例如，将“c:\foo”添加到 PATH 的开头：

```
let $PATH='c:\\foo;'.$PATH 
```

我将 vcvars*.bat 文件的相关部分复制到了我的 vimrc：

```
if !exists("visual_studio_paths_added")
    let visual_studio_paths_added = 1
    let $PATH="C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\Tools;C:\\Windows\\Microsoft.NET\\Framework\\v3.5;C:\\Windows\\Microsoft.NET\\Framework\\v2.0.50727;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\VCPackages;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\bin;".$PATH
    let $INCLUDE="C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\INCLUDE;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include;".$INCLUDE
    let $LIB="C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\ATLMFC\\LIB;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\LIB;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\lib;".$LIB
    let $LIBPATH="C:\\Windows\\Microsoft.NET\\Framework\\v3.5;C:\\Windows\\Microsoft.NET\\Framework\\v2.0.50727;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\ATLMFC\\LIB;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\LIB;".$LIBPATH
endif 
```

根据您的 Visual Studio 版本和安装目录进行调整。

就我而言，我把它放在一个函数中。`:vcvars`当我想使用 Visual Studio 时，我会打电话。但是您可以始终包含这些更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T11:50:10.797

扩展 David Rodríguez - dribeas 的评论，并查看如何`vcvarsall.bat`接受参数，我发现在我的源代码树中包含以下文件很有帮助：

`vc.bat`：

```
call "%VS100COMNTOOLS%\..\..\VC\vcvarsall.bat" amd64 & %* 
```

酌情调整 MSVS 版本和平台，或根据需要添加额外参数。环境变量由`%VS...COMNTOOLS%`MSVC 安装程序设置，这使得上面的内容与实际安装路径无关。

这允许我`<command>`在适当的 MSVC 环境中运行它，方法是：

```
vc.bat <command> 
```

如果不带参数调用，它只会为当前 shell 设置环境，而不执行任何进一步的命令。

如果您想更进一步，可以使用[CMake](http://www.cmake.org)，这是一个元构建系统，允许您从单个（CMake 语法）配置生成 Unix Makefile、MSVC 解决方案和其他几种构建文件类型。Windows 上支持的构建文件类型之一是*NMake Makefiles* ...`nmake <target>`在 Windows 上的处理`make <target>`方式与 Unix 上的处理方式差不多。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-19T05:08:46.783

Mud 的解决方案不适用于 Visual Studio 2017 社区。路径不同。我认为 DevSolar 使用 vcvarsall.bat 的方式更可靠，因为它让 VS 处理正确的路径。

因为我不想在我的 vim 配置中携带 .bat 文件，所以我正在寻找一种只能在 .vimrc 中工作的解决方案：

1.  将 vcvarsall.bat 添加到您的 PATH。就我而言`c:\Program Files (x86)\Microsoft Visual Studio 14.0\VC`。
2.  将以下内容放入您的 .vimrc 以按 F8 编译当前文件

    `nnoremap <F8> :!vcvarsall.bat && cl /EHsc % <CR>`

# ios - ios APP中全局模型的使用

> ID：14369040
> 
> 赞同：0
> 
> 时间：2013-01-16T22:25:07.817
> 
> 标签：ios, model-view-controller

我正在设计一个管理热水箱的应用程序。该应用程序对服务进行 RESTful API 调用以；

1.  获得罐内各层的温度曲线。
2.  允许用户使用计时器（如浸入式计时器）自定义控件来设置打开/关闭加热元件的时间。

因此，作为第一次剪辑，我在导航控制器中有两个选项卡；1\. 显示罐图片的图形，刻度显示温度。2\. 自定义控件，如商用家用定时器，带有两个同心环，允许用户指向和拖动 30 分钟的槽来设置加热元件的时间。

我的两个自定义视图都运行良好。我不敢说我​​被困在一个非常简单的观点上——即使在阅读了所有 Apple 的 ios 文档之后，并且希望得到一些帮助。

数据服务器（运行嵌入式 Linux 的 BeagleBone）实现了 2 组 RESTful API，一组处理油箱温度，另一组用于读取和更新计时器。

1.  是否最好使用视图控制器启动应用程序，该视图控制器实例化模型，发布 API 并显示“正在加载...”，然后填充单个应用程序范围的数据模型。

2.  让每个视图控制器（坦克的图像和计时器控制器）填充自己的（单独的）模型？

3.  对我来说最大的问题是（尽管在 Smalltalk、C++、Java... 工作了多年）推荐的方法是什么；

    *   实例化视图控制器
    *   如果模型尚未加载，则加载/显示带有“忙碌”微调器的视图

我的应用程序对于 GCD 或 KVO 来说不够复杂。这基本上是一个“显示视图，调用 Web 服务读取数据”，“修改数据”，“调用 Web 服务替换数据”

基本上，我相信我的问题是，当视图出现在屏幕上时，确定控制器具有模型或具有仍在加载数据的模型的最佳实践是什么？

很抱歉这个冗长的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:50:52.630

你问了一个非常好的问题，关于移动应用程序中一个非常常见的任务。我的建议是

1.  由于您的两个选项卡确实没有公共数据，因此问题简单地归结为“如何使用远程数据初始化视图控制器”。

2.  如果用户在没有远程数据的情况下无法使用您的应用程序，

    *   只需在 [vc viewDidLoad] 中显示加载视图，然后开始从服务器异步获取数据；你的 vc 应该实现 NSURLConnectionDelegate 来监听回调
    *   当从服务器成功获取数据时，关闭加载视图，并将数据呈现给用户
    *   如果数据获取失败（由于网络故障或服务器停机），向用户显示警报视图，然后重试数据获取；如果多次获取失败，告诉用户稍后再试
    *   您可以使加载视图更漂亮，以提供更好的用户体验；请注意，加载视图应涵盖所有按钮/控件，因此用户不能在数据获取期间弄乱您的应用程序状态
3.  如果用户可以在没有远程数据的情况下使用您的应用程序，那就另当别论了。在这种情况下，您不应该使用加载视图，而应该在后台静默获取数据。由于这似乎不是您的情况，因此我不会通过这种情况使答案复杂化。

# regex - 如何使用正则表达式在一行中找到两个实例？

> ID：14369041
> 
> 赞同：0
> 
> 时间：2013-01-16T22:25:10.020
> 
> 标签：regex

我正在尝试使用正则表达式来查找和替换文档文件夹中的一些文本。我的问题是，当文本在同一行中出现两次时，正则表达式通过从第一个开始到第二个结束一起运行两个表达式来“找到”匹配项。

这是我对正则表达式的尝试：

```
\\x.*\\x\* 
```

我要匹配的文本以 \x 开头，以 \x* 结尾。

第一个示例包含一个匹配项：

> 2Y Sara concibió **\xa \xo 21.2: \xt Heb 11.11.\x*** y le dio un hijo a Abrahán en su vejez, en el tiempo preciso que Dios le había anunciado。

第二个示例包含两个匹配项，但它们由正则表达式一起运行：

> 2Los creó hombre y mujer, **\xa \xo 5.2: \xt Mt 19.4; Mc 10.6.\x* y los bentijo.\xb \xo 5.1-2: \xt Gn 1.27-28.\x*** El día en que fueron creados les puso por nombre Adán。

由于诸如此类的挫折，我从未精通正则表达式……听起来总是个好主意。但我正在努力学习！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:28:59.587

您的`.*`匹配星号也是如此。默认情况下，正则表达式是*贪婪*的：它们匹配尽可能多的字符，然后向后继续直到匹配成功。

一种选择是在后面`.*`加上问号，创建`.*?`. 此语法坚持匹配是*non-greedy*，因此它匹配尽可能少的字符。`?`Perl、ECMA、Java 和[除 POSIX/GNU 实现之外的大多数其他实现](http://www.regular-expressions.info/refflavors.html)中的尾随语法兼容。即像这样：

```
\\x.*?\\x\* 
```

您的替代方法是匹配除星号以外的所有字符，在正则表达式中看起来像`[^*]*`. 但是，这将阻止您匹配字符串中的任何星号，即使是那些前面没有反斜杠的星号。

（感谢 lxop 指出勘误表！）

# c - 使用 ioctl 或 netlink 向接口添加和删除 IP 地址

> ID：14369043
> 
> 赞同：3
> 
> 时间：2013-01-16T22:25:16.100
> 
> 标签：c, network-programming, ioctl, ifconfig

无论如何在C中从接口（如环回）添加和删除IP地址？

我找到了 ioctl 和一些解释如何做到这一点的文档（例如[这个链接](http://www.lainoox.com/set-ip-address-c-linux/)），但是它们都是用于设置地址而不是添加和删除？

按照建议，我运行 strace 来添加新的环回，结果如下：

```
$ sudo strace ip addr add 1.2.3.4 dev lo
execve("/sbin/ip", ["ip", "addr", "add", "1.2.3.4", "dev", "lo"], [/* 17 vars */]) = 0
brk(0)                                  = 0x1bab000
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f221ed04000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=109414, ...}) = 0
mmap(NULL, 109414, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f221ece9000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libdl.so.2", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\340\r\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=14768, ...}) = 0
mmap(NULL, 2109704, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f221e8e0000
mprotect(0x7f221e8e2000, 2097152, PROT_NONE) = 0
mmap(0x7f221eae2000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x7f221eae2000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libc.so.6", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\200\30\2\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1811128, ...}) = 0
mmap(NULL, 3925208, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f221e521000
mprotect(0x7f221e6d6000, 2093056, PROT_NONE) = 0
mmap(0x7f221e8d5000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1b4000) = 0x7f221e8d5000
mmap(0x7f221e8db000, 17624, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f221e8db000
close(3)                                = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f221ece8000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f221ece7000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f221ece6000
arch_prctl(ARCH_SET_FS, 0x7f221ece7700) = 0
mprotect(0x7f221e8d5000, 16384, PROT_READ) = 0
mprotect(0x7f221eae2000, 4096, PROT_READ) = 0
mprotect(0x638000, 4096, PROT_READ)     = 0
mprotect(0x7f221ed06000, 4096, PROT_READ) = 0
munmap(0x7f221ece9000, 109414)          = 0
socket(PF_NETLINK, SOCK_RAW, 0)         = 3
setsockopt(3, SOL_SOCKET, SO_SNDBUF, [32768], 4) = 0
setsockopt(3, SOL_SOCKET, SO_RCVBUF, [1048576], 4) = 0
bind(3, {sa_family=AF_NETLINK, pid=0, groups=00000000}, 12) = 0
getsockname(3, {sa_family=AF_NETLINK, pid=6804, groups=00000000}, [12]) = 0
sendto(3, "\24\0\0\0\22\0\1\3\214;\367P\0\0\0\0\0\0\0\0", 20, 0, NULL, 0) = 20
recvmsg(3, {msg_name(12)={sa_family=AF_NETLINK, pid=0, groups=00000000}, msg_iov(1)=[{"\344\3\0\0\20\0\2\0\214;\367P\224\32\0\0\0\0\4\3\1\0\0\0I\0\1\0\0\0\0\0"..., 16384}], msg_controllen=0, msg_flags=0}, 0) = 2000
brk(0)                                  = 0x1bab000
brk(0x1bcc000)                          = 0x1bcc000
recvmsg(3, {msg_name(12)={sa_family=AF_NETLINK, pid=0, groups=00000000}, msg_iov(1)=[{"\24\0\0\0\3\0\2\0\214;\367P\224\32\0\0\0\0\0\0\1\0\0\0I\0\1\0\0\0\0\0"..., 16384}], msg_controllen=0, msg_flags=0}, 0) = 20
sendmsg(3, {msg_name(12)={sa_family=AF_NETLINK, pid=0, groups=00000000}, msg_iov(1)=[{"(\0\0\0\24\0\5\6\215;\367P\0\0\0\0\2 \0\0\1\0\0\0\10\0\2\0\1\2\3\4"..., 40}], msg_controllen=0, msg_flags=0}, 0) = 40
recvmsg(3, {msg_name(12)={sa_family=AF_NETLINK, pid=0, groups=00000000}, msg_iov(1)=[{"$\0\0\0\2\0\0\0\215;\367P\224\32\0\0\0\0\0\0(\0\0\0\24\0\5\6\215;\367P"..., 16384}], msg_controllen=0, msg_flags=0}, 0) = 36
exit_group(0)                           = ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:06:31.413

在 avahi 项目的帮助下。这是代码：

$ cat netlink-test.cc

```
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <asm/types.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <linux/netlink.h>
#include <linux/rtnetlink.h>
#include <malloc.h>
#include <string.h>
#include <iostream>

using namespace std;

struct rtnl_handle
{
    int fd;
    struct sockaddr_nl local;
    struct sockaddr_nl peer;
    __u32 seq;
    __u32 dump;
};

typedef struct
{
    __u8 family;
    __u8 bytelen;
    __s16 bitlen;
    __u32 flags;
    __u32 data[8];
} inet_prefix;

/* This uses a non-standard parsing (ie not inet_aton, or inet_pton)
 * because of legacy choice to parse 10.8 as 10.8.0.0 not 10.0.0.8
 */
static int get_addr_ipv4(__u8 *ap, const char *cp)
{
    int i;

    for (i = 0; i < 4; i++) {
        unsigned long n;
        char *endp;

        n = strtoul(cp, &endp, 0);
        if (n > 255)
            return -1;      /* bogus network value */

        if (endp == cp) /* no digits */
            return -1;

        ap[i] = n;

        if (*endp == '\0')
            break;

        if (i == 3 || *endp != '.')
            return -1;      /* extra characters */
        cp = endp + 1;
    }

    return 1;
}

// This function is to open the netlink socket as the name suggests.
int netlink_open(struct rtnl_handle* rth)
{
    int addr_len;
    memset(rth, 0, sizeof(rth));

    // Creating the netlink socket of family NETLINK_ROUTE

    rth->fd = socket(AF_NETLINK, SOCK_RAW, NETLINK_ROUTE);
    if (rth->fd < 0)
    {
        perror("cannot open netlink socket");
        return -1;
    }
    memset(&rth->local, 0, sizeof(rth->local));
    rth->local.nl_family = AF_NETLINK;
    rth->local.nl_groups = 0;

    // Binding the netlink socket
    if (bind(rth->fd, (struct sockaddr*)&rth->local, sizeof(rth->local)) < 0)
    {
        perror("cannot bind netlink socket");
        return -1;
    }
    addr_len = sizeof(rth->local);
    if (getsockname(rth->fd, (struct sockaddr*)&rth->local, (socklen_t*) &addr_len) < 0)
    {
        perror("cannot getsockname");
        return -1;
    }
    if (addr_len != sizeof(rth->local))
    {
        fprintf(stderr, "wrong address lenght %d\n", addr_len);
        return -1;
    }
    if (rth->local.nl_family != AF_NETLINK)
    {
        fprintf(stderr, "wrong address family %d\n", rth->local.nl_family);
        return -1;
    }
    rth->seq = time(NULL);
    return 0;
}

// This function does the actual reading and writing to the netlink socket
int rtnl_talk(struct rtnl_handle *rtnl, struct nlmsghdr *n, pid_t peer,
        unsigned groups, struct nlmsghdr *answer)
{
    int status;
    struct nlmsghdr *h;
    struct sockaddr_nl nladdr;
    // Forming the iovector with the netlink packet.
    struct iovec iov = { (void*)n, n->nlmsg_len };
    char buf[8192];
    // Forming the message to be sent.
    struct msghdr msg = { (void*)&nladdr, sizeof(nladdr), &iov, 1, NULL, 0, 0 };
    // Filling up the details of the netlink socket to be contacted in the
    // kernel.
    memset(&nladdr, 0, sizeof(nladdr));
    nladdr.nl_family = AF_NETLINK;
    nladdr.nl_pid = peer;
    nladdr.nl_groups = groups;
    n->nlmsg_seq = ++rtnl->seq;
    if (answer == NULL)
        n->nlmsg_flags |= NLM_F_ACK;
    // Actual sending of the message, status contains success/failure
    status = sendmsg(rtnl->fd, &msg, 0);
    if (status < 0)
        return -1;
}

// This is the utility function for adding the parameters to the packet.
int addattr_l(struct nlmsghdr *n, int maxlen, int type, void *data, int alen)
{
    int len = RTA_LENGTH(alen);
    struct rtattr *rta;

    if (NLMSG_ALIGN(n->nlmsg_len) + len > maxlen)
        return -1;
    rta = (struct rtattr*)(((char*)n) + NLMSG_ALIGN(n->nlmsg_len));
    rta->rta_type = type;
    rta->rta_len = len;
    memcpy(RTA_DATA(rta), data, alen);
    n->nlmsg_len = NLMSG_ALIGN(n->nlmsg_len) + len;
    return 0;
}

int get_addr_1(inet_prefix *addr, const char *name, int family)
{
    memset(addr, 0, sizeof(*addr));

    if (strcmp(name, "default") == 0 ||
            strcmp(name, "all") == 0 ||
            strcmp(name, "any") == 0) {
        if (family == AF_DECnet)
            return -1;
        addr->family = family;
        addr->bytelen = (family == AF_INET6 ? 16 : 4);
        addr->bitlen = -1;
        return 0;
    }

    if (strchr(name, ':')) {
        addr->family = AF_INET6;
        if (family != AF_UNSPEC && family != AF_INET6)
            return -1;
        if (inet_pton(AF_INET6, name, addr->data) <= 0)
            return -1;
        addr->bytelen = 16;
        addr->bitlen = -1;
        return 0;
    }

    addr->family = AF_INET;
    if (family != AF_UNSPEC && family != AF_INET)
        return -1;

    if (get_addr_ipv4((__u8 *)addr->data, name) <= 0)
        return -1;

    addr->bytelen = 4;
    addr->bitlen = -1;
    return 0;
}

int get_prefix(inet_prefix *dst, char *arg, int family)
{
    int err;
    unsigned plen;

    memset(dst, 0, sizeof(*dst));

    if (strcmp(arg, "default") == 0 ||
            strcmp(arg, "any") == 0 ||
            strcmp(arg, "all") == 0) {
        if (family == AF_DECnet)
            return -1;
        dst->family = family;
        dst->bytelen = 0;
        dst->bitlen = 0;
        return 0;
    }

    err = get_addr_1(dst, arg, family);
    if (err == 0) {
        switch(dst->family) {
            case AF_INET6:
                dst->bitlen = 128;
                break;
            case AF_DECnet:
                dst->bitlen = 16;
                break;
            default:
            case AF_INET:
                dst->bitlen = 32;
        }
    }
    return err;
}

int add_IP_Address(char * IP, struct rtnl_handle * rth)
{

    inet_prefix lcl;
    // structure of the netlink packet. 
    struct {
        struct nlmsghdr     n;
        struct ifaddrmsg    ifa;
        char            buf[1024];
    } req;

    memset(&req, 0, sizeof(req));
    req.n.nlmsg_len = NLMSG_LENGTH(sizeof(struct ifaddrmsg));
    req.n.nlmsg_type = RTM_NEWADDR;
    req.n.nlmsg_flags = NLM_F_CREATE | NLM_F_EXCL | NLM_F_REQUEST;

//  req.n.nlmsg_type = RTM_DELADDR;
//  req.n.nlmsg_flags = NLM_F_REQUEST;

    req.ifa.ifa_family = AF_INET ;
    req.ifa.ifa_prefixlen = 32 ;
    req.ifa.ifa_index = 1 ; // get the loopback index
    req.ifa.ifa_scope = 0 ;

    get_prefix(&lcl, IP, req.ifa.ifa_family);
    if (req.ifa.ifa_family == AF_UNSPEC)
        req.ifa.ifa_family = lcl.family;
    addattr_l(&req.n, sizeof(req), IFA_LOCAL, &lcl.data, lcl.bytelen);

    if (rtnl_talk(rth, &req.n, 0, 0, NULL) < 0)
        return -2;
}

int main(int argc, char **argv)
{
    struct rtnl_handle * rth;
    netlink_open(rth);
    char * ip = "1.2.3.4";
    return add_IP_Address(ip,rth);
} 
```

要删除，您只需取消注释：

```
 req.n.nlmsg_type = RTM_DELADDR;
    req.n.nlmsg_flags = NLM_F_REQUEST; 
```

并评论：

```
 req.n.nlmsg_type = RTM_NEWADDR;
    req.n.nlmsg_flags = NLM_F_CREATE | NLM_F_EXCL | NLM_F_REQUEST; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T08:34:31.567

首先，此响应仅适用于 linux。网络/接口/路由配置没有在任何标准中定义，因此每个操作系统都实现了自己的方式来配置网络内容。

在 Linux 中，网络配置是通过 NETLINK 套接字（不是 ioctl，可能在我不知道的其他操作系统中）执行的，这是一个特殊的套接字系列，用于通信内核和用户空间。更准确地说，它是由 NETLINK_ROUTE 协议通过 NETLINK 套接字配置的。在您发布的 strace 中，您可以查看它是如何创建 NETLIK 套接字的：

```
socket(PF_NETLINK, SOCK_RAW, 0)         = 3 
```

和

```
sendto(3, "\24\0\0\0\22\0\1\3\214;\367P\0\0\0\0\0\0\0\0", 20, 0, NULL, 0) = 20 
```

我确定这是一个带有 RTM_NEWADDR 消息的 NETLINK_ROUTE 请求。strace 的其余部分可以解释为 NETLINK_ROUTE 协议消息通信。

[您可以在此处](http://people.redhat.com/nhorman/papers/netlink.pdf)了解有关 NETLINK_ROUTE的更多信息，并在[此处](http://www.linuxforums.org/forum/programming-scripting/138916-netlink-socket-add-secondary-interface-question.html)和[此处](http://bitsup.blogspot.com.es/2008/04/monitoring-ip-changes-with-netlink.html)找到示例，并且正如 @alk 所建议的那样，阅读`ip`源代码可能会很有趣，以了解究竟发生了什么。

# javascript - 防止文本在 div 扩展时重新格式化

> ID：14369046
> 
> 赞同：4
> 
> 时间：2013-01-16T22:25:20.787
> 
> 标签：javascript, jquery, html, css

我正在使用 jquery 将一些 HTML 放入一个 div 中。在我这样做之后，我想扩展 div 以便其右侧的元素随着其宽度的增加而移动。无论如何，是否可以防止我正在扩展的 div 中的文本/HTML 随着宽度的增长而不断地重新格式化。就好像它正在被揭开，而不是不断地混乱？

```
$(document).ready(function(){
  $('body').on('click', '#btn', function(){
    var contents = $('#contentDiv').html(); 
        $('#div2').append(contents).animate({'width':'100px'}, 1000);
  });  
}); 
```

[http://jsbin.com/oqosiz/1/edit](http://jsbin.com/oqosiz/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:34:32.527

添加一个宽度设置的内部 div 和`overflow: hidden;`

然后为内部 div 周围的 div 宽度设置动画：

[http://jsbin.com/oqosiz/2/edit](http://jsbin.com/oqosiz/2/edit)

# html - 使用 HTML5 对象标签嵌入另一个网页？

> ID：14369047
> 
> 赞同：1
> 
> 时间：2013-01-16T22:25:22.217
> 
> 标签：html

我很好奇 html5`<object>`标签的灵活性到底是什么。

如果我有这样的主页设置

```
<body>
    <div id="container">
        <object data="??"></object>
    </div>
</body> 
```

在一个单独的网页中，我有这个：

```
<body>
    <div id="info">
        <p> text text blah blah text </p>
    </div>
</body> 
```

有没有办法将辅助页面上的“信息”div 中的 html 专门拉到主页面上的对象中？如果没有，我应该研究什么样的替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:30:51.193

`object`不是 HTML5 特定的标签，它也存在于 HTML 4.01 中。将页面包含到其他页面中没有用，而是允许页面包含 Java Applet、Flash 等。包含页面的唯一 HTML 解决方案是`iframe`标记。

您应该插入一些 JavaScript 来进行 AJAX 调用以获取第二页。使用`innerHTML`. 然后您可以使用选择所需的元素`getElementById`并将其插入到`container` `div`.

如果您想从服务器端执行此操作，请查看 PHP ...

# grep - 用 grep 查找不返回结果

> ID：14369048
> 
> 赞同：1
> 
> 时间：2013-01-16T22:25:27.100
> 
> 标签：grep, find

第一行返回几十个结果。第二行不返回任何内容。

```
sudo find /var/www/ . -type 'f' -name index.php | grep "php"           
sudo find /var/www/ . -type 'f' -name index.php | grep "require" 
```

有一些文件`index.php`包含两个文本字符串。为什么第二行似乎不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:30:45.857

您想在管道到 grep 之前调用 xargs。您所拥有的是 grep 搜索 find 的结果，而不是 find 找到的文件的内容。

```
sudo find /var/www/ . -type 'f' -name index.php | xargs grep "php" 
```

如果您进行大量这样的搜索，您可能需要查看[ack](http://betterthangrep.com)。例如，要在 /var/www 中的所有 PHP 文件中搜索“require”，您可以使用：

```
ack --php require /var/www 
```

# php - 无法从 html 表单将数据插入 MYSQL

> ID：14369051
> 
> 赞同：-2
> 
> 时间：2013-01-16T22:25:53.530
> 
> 标签：php, html, mysql, insert

我想做一个简单的注册表单，将数据存储在数据库中，但它似乎对我不起作用。

这是我的html代码：

```
<html>
<body>
    <form method="post" name="register" action="register.php">
    <table>
    <tr>
    <td>User Name:</td>
    <td><input type="text" name="name"></td>
    </tr>
    <tr>
    <td>User Email:</td>
    <td><input type="text" name="email"></td>
    </tr>
    <tr>
    <td>User Role:</td>
    <td><input type="text" name="role"></td>
    </tr>
    <tr>
    <td><input type="submit" name="SubmitForm" value="Save"></td>
    </tr>

</form>
</body>
</html> 
```

这是我的 PHP 代码：

```
<?php
// Make a MySQL Connection

$user="root";
$password="my password";
$database="playtime";
$host="localhost";
$table="ttuser";

mysql_connect($host, $user, $password) or die("Connection Failed");
mysql_select_db($database) or die("Connection Failed");

$name = $_POST['name'];
$email = $_POST['email'];
$role = $_POST['role'];

// Insert a row of information into the table "ttuser"

$query = "INSERT INTO ttuser (uemail, uname, urole) VALUES('$email', '$name', '$role')";
if(mysql_query($query)){
echo "inserted";}
else{
echo "fail";}

?> 
```

它可以很好地连接到数据库，但是当我在 html 页面上单击提交时，它会转到 php 但没有显示任何内容。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:04:07.997

如果表 ttuser 有任何没有默认值的字段并且您没有向这些字段提供任何数据（例如，有一个名为“usalary”的字段没有默认值，但您的 INSERT INTO 语句中没有包含该字段），则MySQL 语句将失败。

注意许多 sql 注入警告:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:29:14.307

OK guys it was all my fault because I was not viewing the page via the server. thanks for all your help, it was a silly mistake

# android - Android 从上下文菜单中选择错误的数据

> ID：14369054
> 
> 赞同：1
> 
> 时间：2013-01-16T22:25:58.003
> 
> 标签：android, sqlite, listview, contextmenu

我一直在寻找这个问题的答案，所以希望有人可以帮助我。

我有一段代码应该从 SQLite DB 创建的 ListView 中选择一个项目，将其返回到一个字符串，以便我可以运行 SQL 命令从 DB 中删除记录。但是，当单击条目时，它会从其下方的条目中返回数据，而不是选择的条目，因此我认为它选择了错误的索引。

如果有 3 个条目，比如 Adam、Bob 和 Charlie，如果我点击 Adam，它会将 Bob 返回到字符串；如果我点击 Bob，它将返回 Charlie；如果我点击 Charlie，它会抛出一个 IndexOutOfBoundsException！

我的代码如下：

```
public class viewdb extends ListActivity {

    private static final int DELETE_ID = Menu.FIRST + 1;
    private static final int EDIT_ID = Menu.FIRST + 2;
    private ArrayList<String> results = new ArrayList<String>();
    private String tableName = DBAdapter.DATABASE_TABLE;
    private SQLiteDatabase newDB;
    String strfieldName;
    String strSelFN;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("CalledActivity", "OnCreate");
        Intent in = new Intent();
        openAndQueryDatabase();

        displayResultList();
        registerForContextMenu(getListView());

    }

    public void displayResultList() {
        TextView tView = new TextView(this);
        tView.setText("Fields in Database");
        getListView().addHeaderView(tView);

        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, results));
        getListView().setTextFilterEnabled(true);

    }

    public void openAndQueryDatabase() {
        try {
            DatabaseHelper dbHelper = new DatabaseHelper(
                    this.getApplicationContext());
            newDB = dbHelper.getWritableDatabase();
            Cursor c = newDB.rawQuery("SELECT Field_Name FROM " + tableName,
                    null);

            if (c != null) {
                if (c.moveToFirst()) {
                    do {
                        strfieldName = c.getString(c.getColumnIndex("Field_Name"));
                        results.add(strfieldName);
                    } while (c.moveToNext());
                }
            }
        } catch (SQLiteException se) {
            Log.e(getClass().getSimpleName(),
                    "Could not create or open the database");
            newDB.close();
        }

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Object o = this.getListAdapter().getItem(position);
        strSelFN = o.toString();
        getListView().showContextMenu();
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        menu.setHeaderTitle("Entry Menu");
        menu.add(Menu.NONE, EDIT_ID, Menu.NONE, R.string.strEdit);
        menu.add(Menu.NONE, DELETE_ID, Menu.NONE, R.string.strDelete);}

    @Override
    public boolean onContextItemSelected(MenuItem item) {

        if (item.getItemId() == DELETE_ID) {
            // newDB.execSQL("DELETE FROM " + tableName +
            // " WHERE Field_Name = '" + strSelFN + "'");
            Toast.makeText(this, "Field Deleted: " + strSelFN,
                    Toast.LENGTH_LONG).show();
            return true;
        }
        return false;

    }

} 
```

我还没有定义 EDIT_ID 需要 DELETE_ID 函数主要工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:46:36.993

代替

```
Object o = this.getListAdapter().getItem(position); 
```

利用

```
Object o = this.getListView().getItemAtPosition(position); 
```

返回的 ListAdapter`getListAdapter`不知道您的标题视图，因此索引关闭了 1。

# c# - CruiseControl 和 NANT 构建

> ID：14369055
> 
> 赞同：0
> 
> 时间：2013-01-16T22:26:00.017
> 
> 标签：c#, cruisecontrol.net, nant

我正在测试一个非常简单的脚本来尝试从 CruiseControl.NET 运行我的 ant 构建文件。我按照我在网上找到的如何执行此操作的步骤进行操作，但我一直在 CruiseControl 中收到 nAnt 任务失败，没有任何解释，但是当我单独运行 NAnt 构建脚本时，它运行良好。

任何人都可以看看我的构建脚本、Ccnet.config 文件和日志中的输出并指出我正确的方向吗？

我的 XmLib.build NAnt 文件

```
<?xml version="1.0"?>
<project default="start">
    <property name="code.directory" value="C:\SHS" />
    <property name="server.code.directory" value="${code.directory}\XmLib" />
    <property name="server.code.project" value="${server.code.directory}\XmLib.sln" />

     <target name="start">
          <echo message="Building XmLib Component " />
     </target>
</project> 
```

我通过命令行使用 Nant.exe 运行构建文件时的输出。

```
Buildfile: file:///C:/SHS/Build Scripts/XmLib.build
Target framework: Microsoft .NET Framework 4.0
Target(s) specified: start 

 start:

 [echo] Building XmLib Component 

 BUILD SUCCEEDED

 Total time: 0.4 seconds. 
```

我的 CruiseControl.NET 配置文件

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder">
<project name="XmLib">
  <tasks>
    <nant>
      <executable>C:\Program Files (x86)\NAnt\bin\nant.exe</executable>
      <baseDirectory>C:\SHS\Build Scripts</baseDirectory>
      <buildFile>XmLib.build</buildFile>
      <logger>NAnt.Core.XmlLogger</logger>
      <targetList>
        <target>start</target>
      </targetList>
      <buildTimeoutSeconds>80</buildTimeoutSeconds>
    </nant>
  </tasks>
  <publishers>
      <xmllogger logDir="C:\tmp" />
  </publishers>
</project>
</cruisecontrol> 
```

当我尝试使用其仪表板通过 CruiseControl.NET 运行它时出现错误。

```
 <cruisecontrol project="XmLib">
  <request source="BUILDHPSMV" buildCondition="ForceBuild">Administrator triggered a build        (ForceBuild) from BUILDHPSMV</request>
  <parameters>
  <parameter name="$CCNetArtifactDirectory" value="C:\Program Files (x86)\CruiseControl.NET\server\XmLib\Artifacts" />
  <parameter name="$CCNetBuildCondition" value="ForceBuild" />
  <parameter name="$CCNetBuildDate" value="2013-01-16" />
  <parameter name="$CCNetBuildId" value="a7fb196a3193468e8d8505f7db7641d5" />
  <parameter name="$CCNetBuildTime" value="17:06:44" />
  <parameter name="$CCNetFailureTasks" value="System.Collections.ArrayList" />
  <parameter name="$CCNetFailureUsers" value="System.Collections.ArrayList" />
  <parameter name="$CCNetIntegrationStatus" value="Unknown" />
  <parameter name="$CCNetLabel" value="1" />
  <parameter name="$CCNetLastIntegrationStatus" value="Failure" />
  <parameter name="$CCNetListenerFile" value="C:\Program Files(x86)\CruiseControl.NET\server\XmLib\Artifacts\XmLib_ListenFile.xml" />
  <parameter name="$CCNetModifyingUsers" value="System.Collections.ArrayList" />
  <parameter name="$CCNetNumericLabel" value="1" />
  <parameter name="$CCNetProject" value="XmLib" />
  <parameter name="$CCNetProjectUrl" value="http://BUILDHPSMV/ccnet" />
  <parameter name="$CCNetRequestSource" value="BUILDHPSMV" />
  <parameter name="$CCNetUser" value="Administrator" />
  <parameter name="$CCNetWorkingDirectory" value="C:\Program Files(x86)\CruiseControl.NET\server\XmLib\WorkingDirectory" />
  </parameters>
  <modifications />
  <integrationProperties>
  <CCNetArtifactDirectory>C:\Program Files(x86)\CruiseControl.NET\server\XmLib\Artifacts</CCNetArtifactDirectory>
  <CCNetBuildCondition>ForceBuild</CCNetBuildCondition>
  <CCNetBuildDate>2013-01-16</CCNetBuildDate>
  <CCNetBuildTime>17:06:44</CCNetBuildTime>
  <CCNetFailureUsers />
  <CCNetFailureTasks>
    <task>NAntTask</task>
  </CCNetFailureTasks>
  <CCNetIntegrationStatus>Failure</CCNetIntegrationStatus>
  <CCNetLabel>1</CCNetLabel>
  <CCNetLastIntegrationStatus>Failure</CCNetLastIntegrationStatus>
  <CCNetListenerFile>C:\Program Files(x86)\CruiseControl.NET\server\XmLib\Artifacts\XmLib_ListenFile.xml</CCNetListenerFile>
  <CCNetModifyingUsers />
  <CCNetNumericLabel>1</CCNetNumericLabel>
  <CCNetProject>XmLib</CCNetProject>
  <CCNetProjectUrl>http://BUILDHPSMV/ccnet</CCNetProjectUrl>
  <CCNetRequestSource>BUILDHPSMV</CCNetRequestSource>
  <CCNetWorkingDirectory>C:\Program Files(x86)\CruiseControl.NET\server\XmLib\WorkingDirectory</CCNetWorkingDirectory>
  <CCNetUser>Administrator</CCNetUser>
  <CCNetBuildId>a7fb196a3193468e8d8505f7db7641d5</CCNetBuildId>
  <LastIntegrationStatus>Failure</LastIntegrationStatus>
  <LastSuccessfulIntegrationLabel>UNKNOWN</LastSuccessfulIntegrationLabel>
  <LastModificationDate>1/15/2013 5:06:44 PM</LastModificationDate>
  </integrationProperties>
  <build date="2013-01-16 17:06:44" buildtime="00:00:00" error="true"buildcondition="ForceBuild"></build>
  </cruisecontrol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:43:40.583

Only a guess but I suspect unquoted paths as cause of the failure. Try `"C:\Program Files (x86)\NAnt\bin\nant.exe"` resp. `"C:\SHS\Build Scripts"`.

# php - 如何使用来自的值更新我的数据库中的值标签 -（不是 $_POST）我想从 <select>或</select>  标签中获取值，但使用函数 onclick 按钮，而不是使用 $_POST。我试过了，但我有语法堆栈。如果 $_POST 是这样的： 我的表单中的按钮：  我的更新查询： if (isset($_POST[ 'submit']

> ID：14369059
> 
> 赞同：2
> 
> 时间：2013-01-16T22:26:17.480
> 
> 标签：php, database, joomla, joomla1.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:32:58.240

您将在客户端 (JS) 上运行的代码与在服务器端 (PHP) 上运行的代码混淆了。JS 在 PHP 完成后运行 - 因此除非您提交表单 (POST/GET) 或使用 AJAX，否则您不能从 JS“调用”到 PHP 中的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T22:57:28.570

如果您只想通过单击按钮而不是刷新或重定向浏览器来执行此操作，则必须使用 $.ajax

1）阅读[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

2）在你的按钮上添加一个事件处理程序 onclick="update();"

3）创建一个ajax的东西，如：

```
function request(variable1,variable2,variable3){

        var request = $.ajax({
          url: "/server.php", // The address of you php script that will handle the request 
          type: "POST", // Method type GET / POST in this case POST (Similar to form submission methods....)
          data: { // What you send to the server 'VariableName' : VariableValue, in this case you assign the varaiables that were passed to the request function.
                'var1': variable1,
                'var2' : variable2,
                'var3': variable3
                },
          dataType: "json" // The response type you expect from the server
        })

        request.done(function(msg) // Function being called when everything is ok and server sends back data
        {
             console.log(msg) // handle the reply / data
        })

        request.fail(function(jqXHR, textStatus) // Something went wrong...
        {
            console.log(textStatus); // See the error report
            console.log(jqXHR);
        })

        request.complete(function(){
            console.log("Ajax request complete!"); // This will always be executed when a request has completed even if it failed. (Executes after .done and .fail)
        })

} 
```

因此，您可以在每次单击按钮时调用的更新函数中执行此操作：

```
function update()
{
 var val1 = $.('#selectbox').val();
 var val2 = $.('#inputbox').val();
 var val3 = $.('#textarea').val();

 new request(val1,val2,val3);

} 
```

请求/变量将使用 POST 方法发送，因此在您的 php 脚本中，您可以像处理表单一样处理它们

```
if(isset($_POST['var1']) && isset($_POST['var2']) && isset($_POST['var3']))
{
   $serverReply = doThings($_POST['var1'],$_POST['var2'],$_POST['var3']);

   //and this is how you reply to your client/browser in json format

   echo json_encode($serverReply);
} 
```

确保查看更多关于 ajax 通信的深度教程。网上有很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:33:13.727

onclick 调用函数 javascript

函数 javascript 用 ajax 实现

例子：

```
$("#submitButtonId").click(function() {

    var url = "path/to/your/script.php"; // the script where you handle the form input.

    $.ajax({
           type: "POST",
           url: url,
           data: $("#idForm").serialize(), // serializes the form's elements.
           success: function(data)
           {
               alert(data); // show response from the php script.
           }
         });

    return false; // avoid to execute the actual submit of the form.
}); 
```

# jquery - 谷歌托管的 JQuery 打破了 Ajax

> ID：14369070
> 
> 赞同：0
> 
> 时间：2013-01-16T22:27:02.077
> 
> 标签：jquery, ajax, submit

我的问题似乎很简单：当托管我自己的 JQuery（未经编辑，最新版本）时，我的 Ajax 调用工作正常，但是，当我尝试用 Google 或 jquery.com 托管的替换它时，表单提交时不会发生 ajax 调用并且发生 $_POST 请求的标准 PHP 版本。

我的代码如下：

```
$("#login").submit(function(event) {
        event.preventDefault();
        $("#loadingGif").show();
        $("#login .formattedList").hide();

        $.post("ajax/login", {
            leftemail: $("#inp_leftemail").val(),
            leftpw: $("#inp_leftpw").val(),
            lefttoken: $("#inp_lefttoken").val(),
            remember: $("#inp_remember").is(":checked") ? "1" : false
        }, function(data) {
            $("#loadingGif").hide();
            $("#login .formattedList").show();
            if (data.success) location.reload();
            else $("#loginError").show().addClass("rounded pinkish badBorder error").html(data.msg);
            }, "json");
        }); 
```

任何人都可以就可能导致此问题的原因提供一些见解吗？

@Steve：我用来包含 Google 的 JQuery 的代码是 `<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>`. 尝试了所有`//`，`http://`和`https://`开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:39:48.680

您是否尝试将两者作为来源进行比较？将每个都通过一个 JS 格式化程序，然后运行一个差异 - 似乎在代码级别必须存在差异。找到这些，你就有了追求的线索。

# c# - 将文本框绑定到数据表的特定行/列

> ID：14369071
> 
> 赞同：0
> 
> 时间：2013-01-16T22:27:02.573
> 
> 标签：c#, wpf, xaml, data-binding, datatable

我有一个强类型数据集，其中包含一个具有静态行数的 DataTable。我正在尝试将单个标签和文本框绑定到数据表中的某些行/列组合。当我直接绑定到数据表时，文本框不会更新。我尝试通过 CollectionViewSource 进行绑定，但这不仅不会更新，而且也不允许我选择要绑定的数据行。将文本框绑定到 DataTable 的特定行和列的最佳方法是什么？具体来说，我正在寻找我应该在 XAML 中指定的源和路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:29:48.690

```
<TextBox Text="{Binding YourTable.Rows[1][ColumnName]}"/> 
```

# html - Safari vs Firefox：奇怪的 UL“填充”

> ID：14369073
> 
> 赞同：2
> 
> 时间：2013-01-16T22:27:24.207
> 
> 标签：html, css, firefox, safari, html-lists

我有这个 HTML：

```
<article class="images">
  <ul class="cf">
    <li>
      <a href="#">
        <img src="http://www.placehold.it/800x600" alt="" />
      </a>
    </li>
  </ul>
</article> 
```

这个CSS：

```
 * {
  margin: 0;
  padding: 0;
}

 .images ul {
  margin-left: -3%;
  width: 100%;
  background: red;
}
.images li {
  list-style-type: none;
}
.images li img {
  width: 17%;
  margin-left: 3%;
  margin-bottom: 3%;
  float: left;
} 
```

尽管如此，在 Safari 中`ul`，右侧似乎有某种填充。
在 Firefox 中`ul`正确显示。

自己看看：http: [//jsfiddle.net/EdCXx/](http://jsfiddle.net/EdCXx/)

有没有办法解决这个问题？

编辑：在 OS X 10.8.2 上使用 Safari 6.0.2，它看起来像这样：
![在此处输入图像描述](../Images/12bf80578b4066faf0774f33c262fbda.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:57:25.647

我假设问题是您使用的是负数`margin`，这会导致问题（我目前无法访问 Mac，因此无法验证）。

尝试将您的 CSS 更改为以下内容。我还把你的改成`clearfix`了我不久前买的一个，它有很好的跨浏览器结果。

[http://jsfiddle.net/EdCXx/4/](http://jsfiddle.net/EdCXx/4/)

CSS：

```
/* Reset */
* {
    margin: 0;
    padding: 0;
}

/* Clearfix */
.clear:after {
    clear: both;
    content: ".";
    display: block;
    height: 0;
    line-height: 0;
    visibility: hidden;
}

/* Images */
.images ul {
    width: 100%;
    background: red;
}
.images li {
    list-style: none;
    overflow: hidden;
    margin-right: 3%;
    margin-bottom: 3%;
    float: left;
    width: 17%;
    height: 17%;
}
.images li img {
    float: left;
    max-width: 100%;
    max-height: 100%;
} 
```

并收紧您的 HTML（不是必需的，但它更漂亮）：

```
<article class="images">
    <ul class="clear">
        <li> <a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
        <li><a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
        <li> <a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
        <li> <a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
        <li> <a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
        <li> <a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
        <li> <a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
        <li> <a href="#"><img src="http://www.placehold.it/800x600" alt="" /></a></li>
    </ul>
</article> 
```

# r - 从午夜到一天中的时间的秒数

> ID：14369075
> 
> 赞同：5
> 
> 时间：2013-01-16T22:27:35.583
> 
> 标签：r, time, lubridate

有一篇文章显示了如何使用`lubridate`从午夜开始到几秒。从午夜开始的几秒到一天中的某个时间怎么样？

那么，我如何使用 24752.05 来获取 06:52:32，而不是使用 06:52:32 来获取 24752.05？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T22:34:19.390

使用`as.POSIXct()`午夜时间戳和偏移量的总和，可能通过设置 TZ 进行调整。

在我的默认时区：

```
R> as.POSIXct(trunc(Sys.time(), units="days") + 24752.05)
[1] "2013-01-16 06:52:32.04 CST"
R> 
```

请注意，答案（就像前面的问题一样）可以在基础 R 中很好地解决，一直有传言说每次问题都必须涉及 lubridate 而不是承受。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T22:39:30.510

另外的选择：

```
format(as.POSIXct('1900-1-1') + 24752.05, '%H:%M:%S')
# [1] "6:52:32" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T22:36:30.620

仅`lubridate`用于多样性：

```
library(lubridate)

Sys.time() + seconds(24752.05) 
```

或从午夜开始：

```
as.Date(Sys.time()) + seconds(24752.05) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T23:17:26.733

当然，您可以直接计算小时、分钟和秒。这是基于 POSIX 时间的定义。午夜总是有一个`time_t`可以被 整除的值`86400`。

```
x <- 24752.05

paste(sprintf("%02d", floor(x / 3600)),
      sprintf("%02d", floor(x %% 3600 / 60)),
      sprintf("%02d", floor(x %% 60 )),
      sep=":"
)
## [1] "06:52:32" 
```

# facebook-graph-api - 选择不喜欢页面的朋友

> ID：14369079
> 
> 赞同：-3
> 
> 时间：2013-01-16T22:27:41.320
> 
> 标签：facebook-graph-api

我正在开发 Facebook 应用程序，我需要选择所有**不喜欢**特定页面的朋友：关于如何构建查询的任何想法？

**更新**

我道歉，我会尽量说得更清楚。

在我的应用程序中，我想选择所有不是页面粉丝的朋友，因为我想邀请他们加入**我喜欢**的页面。

查看我阅读的开发人员指南，无法执行 SQL **NOT IN**，因此使用 FQL 如何检索那些**不喜欢**该页面的朋友？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:34:32.870

运行此 FQL 查询：

`SELECT uid,name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND uid IN (SELECT uid FROM page_fan WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND page_id='YOUR_PAGE_ID')=''`

编辑：您必须拥有`user_likes`和`friends_likes`权限才能获取此数据

# sql - 在 SQL 中成对循环

> ID：14369086
> 
> 赞同：2
> 
> 时间：2013-01-16T22:28:06.330
> 
> 标签：sql, loops

我在这里查看了几个我认为可以回答这个问题的主题，但它们似乎并不是我想要的。

基本上，我有一个数据库，除其他外，还有一个用户表。由于那些相同的用户，我们经常会出现重复。换句话说，一个人有两个独立的帐户并使用它们，直到我们发现并将它们合并到一个帐户中，告诉他们这是哪个帐户并停止尝试使用第二个帐户。不幸的是，决定保留哪个帐户以及砍掉哪个帐户并不总是遵循公式，而是管理员对情况的了解，我会逐行了解哪些保留和离开。

合并的一部分涉及通过将任何出现的丢弃 ID 替换为我们保留的 ID 来修改多个表。最后一个完成这项工作的人有一个脚本来执行此操作，但它只是假设最近的登录是要保留的，然后拉出这对 ID 并制作了模组。但是，我不能依赖这种情况。我有一个电子表格，其中包含我希望能够运行和处理的 ID 对。直到现在，我一直都是手工完成，一次一个。

所以，我正在寻找的效果是：

```
foreach (x,y) in (oldID1, newID1, oldID2, newID2, ...){
   go through tables and change all instances of x to y;
   } 
```

希望这已经足够清楚了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:36:19.033

对于像这样简单的一次性工作，我喜欢使用[LINQPad](http://www.linqpad.com/)快速编写脚本。您可以只为您的 id 对使用匿名类型的数组，并为每一对执行脚本（假设 SQL Server）：

```
var idpairs = new [] {
    new { OldId = 5, NewId = 10 },
    new { OldId = 23, NewId = 45 },
    new { OldId = 443, NewId = 299 }
};

using (var con = new SqlConnection(connectionString)) {
    foreach (var idpair in idpairs) {
        var oldId = idpair.OldId;
        var newId = idpair.NewId;

        // prepare script with old/new id's inserted
        var sql = string.Format("blah blah blah {0} blah blah {1} blah",
            oldId, newId);

        // execute the command
        var cmd = con.CreateCommand();
        cmd.CommandText = sql;
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:47:46.820

由于信息未完全提供，我将做出一些假设。一种假设是电子表格被分成上述字段（oldID,newID） 将电子表格导入到 SQL 上的表中。

然后，使用以下代码（首先用于 MS SQL）：

```
DECLARE @oldID int, @newID int
DECLARE CURSOR idCursor STATIC FOR
SELECT oldID,newID FROM idSpreadsheetTable
OPEN idCursor
FETCH NEXT FROM idCursor INTO @oldID,@newID
WHILE (@@FETCH_STATUS = 0)
BEGIN
  UPDATE Table1 SET idField = @newID WHERE idField = @oldID
  ... More update table commands
  FETCH NEXT FROM idCursor INTO @oldID,@newID
END
CLOSE idCursor
DEALLOCATE idCursor 
```

这是 mySQL 语法：

```
DECLARE done INT DEFAULT FALSE;
DECLARE oldID,newID int;
DECLARE idCursor CURSOR FOR SELECT oldID,newID FROM idSpreadsheetTable
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
OPEN idCursor;
read_loop: LOOP
  FETCH idCursor INTO oldID, newID;
  IF done THEN
     LEAVE read_loop;
  END IF;
  UPDATE Table1 SET idField = newID WHERE idField = oldID;
  ... More update table commands
END LOOP;
CLOSE idCursor; 
```

# cordova - 在 Android 2.2 设备上构建 cordova JS 全局变量的异常

> ID：14369091
> 
> 赞同：0
> 
> 时间：2013-01-16T22:28:28.407
> 
> 标签：cordova, android-2.2-froyo

最近我升级了我的应用程序以使用 Cordova-2.2.0。在 Android 设备 2.3 及更高版本上完美运行。但是当我在 Android 2.2 上运行该应用程序时，它会在启动时引发警报

“异常构建cordova JS gloals：RangeError：超过关键“连接”的最大调用堆栈大小。

不知道这里发生了什么。有什么线索吗？

日志：

```
01-16 14:09:30.389: I/MAIN(981): MyActivity::onCreate
01-16 14:09:30.389: D/DroidGap(981): DroidGap.onCreate()
01-16 14:09:30.419: D/CordovaWebView(981): Origin to allow: http://127.0.0.1*
01-16 14:09:30.419: D/CordovaWebView(981): Origin to allow: .*
01-16 14:09:30.419: I/CordovaLog(981): Found log level DEBUG
01-16 14:09:30.419: I/CordovaLog(981): Changing log level to DEBUG(3)
01-16 14:09:30.419: I/CordovaLog(981): Found preference for useBrowserHistory=true
01-16 14:09:30.419: D/CordovaLog(981): Found preference for useBrowserHistory=true
01-16 14:09:30.429: I/CordovaLog(981): Found preference for exit-on-suspend=false
01-16 14:09:30.429: D/CordovaLog(981): Found preference for exit-on-suspend=false
01-16 14:09:30.439: D/JsMessageQueue(981): Set native->JS mode to 2
01-16 14:09:30.439: I/CordovaWebView(981): Disabled addJavascriptInterface() bridge since Android version is old.
01-16 14:09:30.439: D/DroidGap(981): DroidGap.init()
01-16 14:09:30.449: D/CordovaWebView(981): DroidGap.loadUrl(file:///android_asset/www/common/index.html, 10000)
01-16 14:09:30.449: D/DroidGap(981): onMessage(splashscreen,show)
01-16 14:09:30.449: D/CordovaWebView(981): >>> loadUrl(file:///android_asset/www/common/index.html)
01-16 14:09:30.449: D/PluginManager(981): init()
01-16 14:09:30.449: D/CordovaWebView(981): >>> loadUrlNow()
01-16 14:09:30.449: D/DroidGap(981): Resuming the App
01-16 14:09:30.499: D/SoftKeyboardDetect(981): Ignore this event
01-16 14:09:30.569: D/SoftKeyboardDetect(981): Ignore this event
01-16 14:09:30.579: D/DroidGap(981): onMessage(onPageStarted,file:///android_asset/www/common/index.html)
01-16 14:09:30.889: D/Cordova(981): onPageFinished(file:///android_asset/www/common/index.html#welcome)
01-16 14:09:30.889: D/DroidGap(981): onMessage(onNativeReady,null)
01-16 14:09:30.889: D/DroidGap(981): onMessage(onPageFinished,file:///android_asset/www/common/index.html#welcome)
01-16 14:09:30.899: D/Cordova(981): onPageFinished(file:///android_asset/www/common/index.html#welcome)
01-16 14:09:30.899: D/DroidGap(981): onMessage(onNativeReady,null)
01-16 14:09:30.899: D/DroidGap(981): onMessage(onPageFinished,file:///android_asset/www/common/index.html#welcome)
01-16 14:09:32.900: D/DroidGap(981): onMessage(spinner,stop)
01-16 14:09:32.959: D/DroidGap(981): onMessage(spinner,stop)
01-16 14:10:30.209: D/DroidGap(981): Paused the application!
01-16 14:10:30.209: D/CordovaWebView(981): Handle the pause
01-16 14:12:41.879: I/MAIN(981): Ac2Activity::onResume
01-16 14:12:41.879: D/DroidGap(981): Resuming the App
01-16 14:13:42.099: D/DroidGap(981): Paused the application!
01-16 14:13:42.099: D/CordovaWebView(981): Handle the pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:11:35.880

尝试在 Html 页面的 Head 部分添加您的 cordova 脚本。

实际上对我来说，这个解决方案也很有效。

# c - 存储分隔的字符串

> ID：14369092
> 
> 赞同：0
> 
> 时间：2013-01-16T22:28:34.950
> 
> 标签：c, string, stdio, words

所以我正在尝试编写这个程序，它接受一个字符串，将字符串分隔成单词并将分隔的单词放入“word1 + word2 + word3 ...”之类的格式我已经编写了一个获取字符串的C程序和将字符串分成单词。但是我对如何保留每个单词然后将其以上述格式放置有点困惑。

到目前为止，这是我的代码

```
#include <stdio.h>
#include <string.h>
int main()
{
 int wordCount = 0;
 char realString[200];
 char testString[200];
 char * nextWordPtr;

 printf("Input string\n");
 gets(realString);

 strcpy(testString,realString);

 nextWordPtr = strtok(testString," "); // split using space as divider

 while (nextWordPtr != NULL) {

 printf("word%d %s\n",wordCount,nextWordPtr);

 wordCount++;

 nextWordPtr = strtok(NULL," ");
}

} 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:06:12.190

我真的不明白你想要什么？如果您只想输出这样的字符串：' *word0+word1+...etc* '，您可以使用此代码来完成此操作：

```
#include <stdio.h>
#include <stdlib.h>

#define INPUT_STRING_LEN                128

int main(int argc, char **argv)
{
        char input_string[INPUT_STRING_LEN];
        char *out_string;
        int index;

        /* Get user input */
        fgets(input_string, INPUT_STRING_LEN, stdin);

        out_string = (char *) malloc((INPUT_STRING_LEN + 1) * sizeof(char));
        /* Loop through input string and replace space with '+' */
        index = 0;
        while (input_string[index] != '\0')
        {
                if (input_string[index] == ' ')
                        out_string[index] = '+';
                else
                        out_string[index] = input_string[index];

                index++;
        }

        /* We got this out string */
        fprintf(stdout, "We got this out string :\n--->\n%s<---\n", out_string);

        /* Free the allocated memory */
        free(out_string);

        return 0;
} 
```

如果您想要其他内容，请编辑问题。

# azure - 从 Azure 流式传输视频（Blob 或媒体服务）

> ID：14369093
> 
> 赞同：2
> 
> 时间：2013-01-16T22:28:45.423
> 
> 标签：azure, asp.net-mvc-4, media, azure-storage, azure-media-services

我有一个托管在 azure 中的 MVC 4 网站，需要上传视频，并且在不同的页面上允许将上传的视频流式传输回客户端播放器。

第一个选项允许用户上传和编码视频 (.mp4) 第二个选项是我手动上传和编码视频并将 URL 提供给用户。

在任何一种情况下，视频都会在另一个页面上呈现给用户。

我有一段时间试图让它发挥作用。有什么建议/工作样本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-02-19T13:43:35.747

我将以下代码用于我的 c# 应用程序，它可以正常工作。

```
public static string getBlobStreamURL(string fsBloblFilePath, string fsdirectory)
        {
            CloudBlobContainer cloudBlobContainer = storageAccount.CreateCloudBlobClient().GetContainerReference(fsdirectory);
            var cloudBlob = cloudBlobContainer.GetBlockBlobReference(fsBloblFilePath);
            var SharedAccessSignature = cloudBlob.GetSharedAccessSignature(new Microsoft.WindowsAzure.Storage.Blob.SharedAccessBlobPolicy()
            {
                Permissions = Microsoft.WindowsAzure.Storage.Blob.SharedAccessBlobPermissions.Read,
                SharedAccessExpiryTime = DateTime.UtcNow.AddHours(1)
            });
            var StreamURL = string.Format("{0}{1}", cloudBlob.Uri, lsSharedAccessSignature);
            return StreamURL;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:51:58.690

我已经写了一个关于如何从 Azure 提供视频的[先前答案。](https://stackoverflow.com/questions/14165110/how-can-i-host-and-embed-a-video-in-an-mvc-application-on-azure/14167807#14167807)

你需要使用 Azure Blob 存储来存储文件。这将很好地扩展，让您利用 Azure CDN 更快地交付，并且传出流量不会计入您的网站实例。

然后，您可以使用任何您想要的 HTML5 或 Flash 播放器。一件重要的事情，确保在保存文件时设置内容类型。您还可以更改[Azure 服务版本](http://www.jonnyreeves.co.uk/2012/streaming-video-from-azure-blob-storage/)以支持视频搜索。

# c++ - C/C++ 中的 int 类型

> ID：14369099
> 
> 赞同：0
> 
> 时间：2013-01-16T22:28:56.230
> 
> 标签：c++, c, 64-bit, int

> **可能重复：**
> [为什么 C++ int 和 long 类型都是 4 个字节？](https://stackoverflow.com/questions/13398630/why-are-c-int-and-long-types-both-4-bytes)

在 C/C++ 中，有什么区别：

```
u_int64 myNum; 
```

和：

```
unsigned long myNum; 
```

据我所知，两者都只吃无符号整数，内存为 64 位。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T22:29:50.157

`unsigned long`不必是 64 位，而必须是 64*位*`uint64_t`。有一种整数类型的层次结构，其中每种类型都必须至少与前面的类型一样大：`signed char`, `short`, `int`, `long`, `long long`, 并且对于它们的无符号对应物也是如此。有一些锚点，指出`char`是一个字节（一个字节不必是 8 位，据我所知`short`至少是~~2 个字节~~16 位。在 C++11 中，[long long 至少是 64 位](https://stackoverflow.com/questions/10053113/is-c11s-long-long-really-at-least-64-bits)。但是这些类型都不是*给*定的位数。

有关更多信息，请参阅[固定宽度整数类型](http://en.cppreference.com/w/cpp/types/integer)（感谢 @chris 提供的链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:35:36.173

`unsigned long``int`像C/C++ 中的每一个一样依赖于机器。许多库，尤其是允许两台机器交互的库，都会键入 def 最`int`相似的数字，以确保两者的大小相同。`u_int64`基本上是将 def 类型转换为 64 位的无符号整数，以允许在任何机器上使用。理论上`unsigned long`可以是 128、64、256 或几乎任何大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:32:30.130

`int`C 语言本身并没有说明 an有多大

`long`必须至少只要`int`
`long long`必须至少只要`long`

也是`u_int64_t`c99 类型，在 ANSI c89 中不可用。

在 64 位架构中也存在差异 LP64 表示`long`' 和指针是 64 位，LLP64 表示`long long`' 和指针是 64 位。

# javascript - Javascript日历在闰年跳过几天？

> ID：14369101
> 
> 赞同：0
> 
> 时间：2013-01-16T22:29:00.930
> 
> 标签：javascript, jquery

我用 javascript 和 jquery 编写了一个日历（改编自[“带有 Javascript 的简单日历”](http://en.wikicode.org/index.php/Simple_calendar_with_JavaScript)），它允许我一次前后移动几个月。

它通过在 2 月每 4 年增加一天来计算闰年，但似乎因此导致了错误。

当您向后或向前移动时，它会更改日期并`calendar()`根据新日期运行该功能。通常，它有 5 行 7 列，每列包含一天。如果 5 排没有足够的空间，例如第 1 排在星期六有 31 天，那么它将额外增加第 6 排以容纳。

但是，在闰年期间，如果发生上述相同情况，该函数似乎不会添加额外的行。

这是一个 jsFiddle：http: [//jsfiddle.net/charlescarver/DrMWM/](http://jsfiddle.net/charlescarver/DrMWM/)

这个要点`calendar()`：

```
function calendar(d){

                $("#calendar").remove();
                $("body").append("<table border='1' id='calendar'></table>");

                // Date vars
                var today = new Date(d);
                var month = today.getMonth();
                var day = today.getDay();
                var dayN = today.getDate();
                var week = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                var monthdays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                var days = monthdays[month];
                var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                // Determine if leap year, if not, set to current year
                if (month > 0) {
                    year = today.getYear();
                    if (year % 4 == 0){
                        days = 29;
                    }
                } else {
                    year = today.getYear();
                }

                // Parse vars
                var jumped = 0;
                var inserted = 1;
                var start = day - dayN%7 + 1;
                if (start < 0) start += 7;
                var weeks = parseInt((start + days)/7);
                if ((start + days)%7 != 0){
                    weeks++;
                }

                $("#calendar").append("<tr><td class='month' colspan='7'>" + monthNames[month] + " - " + today.getFullYear() + "</td></tr>");

                $("#calendar").append("<tr class='day'></tr>");
                for (var i=0; i<7; i++) {
                    $(".day").append("<td>" + week[i][0] + "</td>");
                }

                function datDate(m, n, y){
                    date = new Date(" " + monthNames[m] + " " + n + " " + y);
                    return date;
                }

                for (var i=weeks; i>0; i--) {
                    if (i === i){
                        $("#calendar").append("<tr class=" + i + "></tr>");
                        for (var j=0; j<7; j++) {
                            console.log(inserted);
                            if (jumped<start || inserted>days) {
                                $("." + i).append("<td> </td>");
                                jumped++;
                            }
                            else {
                                m = month;
                                n = inserted;
                                y = today.getFullYear();
                                date = datDate(m, n, y);
                                if (inserted == dayN) {
                                    $("." + i).append("<td><a class='calendar_date current_date' data-date='" + date + "'>[" + n + "]</a></td>");
                                } else {
                                    $("." + i).append("<td><a class='calendar_date' data-date='" + date + "'>" + n + "</a></td>");
                                }
                                inserted++;
                            }
                        }
                    }
                }   
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:05:04.283

```
 // Determine if leap year, if not, set to current year
            if (month == 1) {
                year = today.getYear();
                if (year % 4 == 0){
                    days = 29;
                }
            } else {
                year = today.getYear();
            } 
```

# c# - 在 Outlook 加载项启动期间并不总是发生事件绑定

> ID：14369102
> 
> 赞同：0
> 
> 时间：2013-01-16T22:29:01.290
> 
> 标签：c#, outlook, add-in, outlook-addin, outlook-2010

我正在使用 C# 和 Visual Studio 2010 开发我的第一个 Outlook 2010 插件。到目前为止，我的项目进展顺利。我在功能区中有一个自定义选项卡，每次在 Outlook 窗口中选择新消息时它都会更新。分析电子邮件中的文本，并在功能区中显示不同的信息。

使这一切工作的原因在于我的 ThisAddIn_Startup 方法。在那里我绑定了一些 Outlook 事件，因此我的代码可以在选择新电子邮件时做出相应的反应。

真正令人不安的是，大约有 1/3 的时间间歇性地失败。我们公司有多个来自不同供应商的 Outlook 加载项，因此很难确切知道 Outlook 启动过程中发生了什么。有时我的代码绑定到 Outlook 的事件，有时没有。如果没有，我关闭并重新打开 Outlook，它就可以工作了。任何意见，将不胜感激。有没有更好的方法可以使这项工作？如果我必须预料到这些间歇性启动失败，有什么想法可以让我的加载项意识到这一点并在不需要重新启动应用程序的情况下恢复？

这是我在 ThisAddIn.cs 中的代码示例：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e) {
    // set up event handler to catch when a new explorer (message browser) is instantiated
    Application.Explorers.NewExplorer += new Microsoft.Office.Interop.Outlook.ExplorersEvents_NewExplorerEventHandler(NewExplorerEventHandler);

    // ...and catch any Explorers already existing before this startup event was fired
    foreach (Outlook.Explorer Exp in Application.Explorers) {
        NewExplorerEventHandler(Exp);
    }
}

public void NewExplorerEventHandler(Microsoft.Office.Interop.Outlook.Explorer Explorer) {
    if (Explorer != null) {
        //set up event handler so our add-in can respond when a new item is selected in the Outlook explorer window
        Explorer.SelectionChange += new Outlook.ExplorerEvents_10_SelectionChangeEventHandler(ExplorerSelectionChange);
    }
}

private void ExplorerSelectionChange() {
    Outlook.Explorer ActiveExplorer = this.Application.ActiveExplorer();
    if (ActiveExplorer == null) { return; }
    Outlook.Selection selection = ActiveExplorer.Selection;
    Ribbon1 ThisAddInRibbon = Globals.Ribbons[ActiveExplorer].Ribbon1;

    if (ThisAddInRibbon != null) {
        if (selection != null && selection.Count == 1 && selection[1] is Outlook.MailItem) {
            // one Mail object is selected
            Outlook.MailItem selectedMail = selection[1] as Outlook.MailItem; // (collection is 1-indexed)
            // tell the ribbon what our currently selected email is by setting this custom property, and run code against it
            ThisAddInRibbon.CurrentEmail = selectedMail;
        } else {
            ThisAddInRibbon.CurrentEmail = null;
        }
    }
} 
```

更新：我在 ThisAddIn 类中添加了两个变量，用于两个我想从中捕获事件的对象：

```
Outlook.Explorers _explorers; // used for NewExplorerEventHandler
Outlook.Explorer _activeExplorer; // used for ExplorerSelectionChange event 
```

在 ThisAddIn_Startup 中：

```
_explorers = Application.Explorers;
_explorers.NewExplorer += new Microsoft.Office.Interop.Outlook.ExplorersEvents_NewExplorerEventHandler(NewExplorerEventHandler); 
```

在 ExplorerSelectionChange 中：

```
_activeExplorer = this.Application.ActiveExplorer(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:46:56.240

使用 COM 对象时：当您想要订阅一个事件时，您必须在类/应用程序级别保留对该对象的引用，否则当超出范围时它将被垃圾收集。

# ember.js - ember.js 容器视图关注点

> ID：14369105
> 
> 赞同：0
> 
> 时间：2013-01-16T22:29:07.553
> 
> 标签：ember.js

我正在使用一个容器视图，我在其中使用 currentview 属性动态添加和删除上下文表单，有点像这样：

```
showSomeForm: ->
  form = @get('theContainerView')

  if form.get('currentView')
    form.set('currentView', null)

  contextualForm = App.Form.create
                     controller: App.Controller.create()

showSomeOtherForm: ->
  form = @get('theContainerView') 
```

我担心每次创建控制器都会导致内存泄漏，如果这是最好的做事方式。

用户完成上下文表单后，我还将 currentView 设置为 null 以隐藏它。

有没有更好的方法可以做到这一点，我目前正在使用 ember v1.0.0-pre.2-54。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:55:05.843

您不必担心这里的内存泄漏。

您将控制器分配给插入到 a 中的视图`currentView`，而不是持有对它的引用。当视图被拆除时（当容器视图`currentView`被设置为`null`或其他时），Ember 会这样做`destroy`。这将释放对它的任何剩余引用，这将让 GC 收集它，以及引用的控制器连同它。

如果由于某种原因这不是真的，则可能是 Ember 错误。

# pentaho - Pentaho 水壶数据库

> ID：14369114
> 
> 赞同：0
> 
> 时间：2013-01-16T22:30:03.170
> 
> 标签：pentaho, kettle

我正在使用 Spoon 转换将数据插入数据库。我做了一个“合并连接”来连接输入表。d 如果我在数据库中有一天的数据说'2013-1-5'，并且如果我尝试添加同一天的数据'2013-1-5'，而不是从数据库中删除以前的数据，它会追加。

如何在运行转换时从数据库中删除以前的数据，而不是追加给定日期？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:36:41.697

您想删除数据，还是用新数据替换它？

删除 - 使用删除步骤。

要更新它，请使用更新步骤。

如果它不存在就插入，或者如果它存在就更新，然后使用插入/更新——听起来这就是你真正想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T10:53:54.650

嘿，您可以在这里使用 CDC 概念，例如：

如果新记录则插入/更新如果旧记录则删除或保持为非活动模式

# ember.js - 计算视图大小

> ID：14369129
> 
> 赞同：0
> 
> 时间：2013-01-16T22:32:02.853
> 
> 标签：ember.js

每次修改模型时，我都会尝试计算视图宽度。
模板正在调用绑定到模型的 view.labelStyle 计算属性
我收到以下错误：
Uncaught TypeError: Cannot read property 'defaultView' of undefined

我认为我的错误是由于 $(this).outerWidth() 调用...但我不知道在 Ember 视图上调用 JQuery 方法 outerWidth() 的正确方法是什么...

```
Ember.Handlebars.compile('<div class="secondary-field-label" {{bindAttr style="view.labelStyle"}}>

labelStyle: function() {
      var width=$(this).outerWidth());
      return 'width:' + width + 'px';
    }.property('content.label', 'content.value'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:36:52.553

您可以通过以下方式访问：

```
var width = this.$().outerWidth(); 
```

# iphone - 自定义 UITableViewCell 中的自定义 UIView

> ID：14369136
> 
> 赞同：0
> 
> 时间：2013-01-16T22:32:35.027
> 
> 标签：iphone, ios, xcode, uiview, uitableview

我有一个自定义`UITableViewCell`子类，`ItemDetailCell`它有许多连接到我的故事板文件的插座。其中有一个自定义`UIView`子类，它有一个到nib 文件中的 (priorityStatusView) 的`PriorityView`出口。`UIView`

```
@property (weak, nonatomic) IBOutlet PriorityView *redPriorityView; 
```

在 nib 文件 (PriorityView.xib) 中，我已将文件的所有者自定义类连接到 PriorityView。在`PriorityView.m`我加载 nib 文件时，`drawRect`使用：

```
NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"PriorityView" owner:self options:nil];
[self addSubview:[array objectAtIndex:0]]; 
```

在我的表格视图控制器中`cellForRowAtIndexPath`，我试图设置的背景颜色`redPriorityView.priorityStatusView`，但首先我调用`drawRect`的是加载笔尖。我不用来加载笔尖的原因是，除了不加载笔尖之外`initWithFrame`，它似乎还使 nib 无效。`PriorityView`我怀疑这是因为视图已经加载了`IBOutlet`. 我知道它是空的，因为我已经调用了：

```
NSLog(@"%@, %@", detailCell.redPriorityView, detailCell.redPriorityView.priorityStatusView); 
```

并且都返回null。但是，使用`drawRect`加载笔尖确实会返回两个日志不为空。我现在唯一的问题是背景颜色不会改变使用：

```
detailCell.redPriorityView.priorityStatusView.backgroundColor = [UIColor yellowColor]; 
```

我也试过使用`setBackgroundColor`无济于事。实际上，`redPriorityView`or的所有属性`redPriorityView.priorityStatusView`对我来说似乎都没有改变。背景颜色只是一个例子。

抱歉拖了这么久，我只是很难完成这项工作。提前感谢您的帮助！

**编辑**

我尝试设置`redPriorityView`使用方法的属性`ItemDetailCell`并通过调用它，`cellForRowAtIndexPath`但即使调用`NSLog`方法中的属性也不会改变。我认为问题可能在于视图如何连接到`PriorityView`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:19:41.940

尝试将您的访问器设置为强。也许...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:37:04.137

实现该`- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`方法，并尝试在其中设置背景颜色。希望这可以帮助！

# ios - -all_load 导致第 3 方框架中出现重复符号错误的其他链接器标志

> ID：14369143
> 
> 赞同：11
> 
> 时间：2013-01-16T22:33:05.120
> 
> 标签：ios, objective-c

我有一个用于内部应用程序的静态库，其中包含一些常见的实用程序代码。从之前的 SO 帖子中，我发现为了在运行时加载静态库中的类别，我需要`-all_load -ObjC`在 Build Settings 的 Other Linker Flags 字段中包含。

但是，对于我也在使用的封闭源代码的第 3 方库，如果我使用这些标志，我会收到几个重复的符号错误。我已经验证我可以通过去掉这些标志来构建应用程序，但是当然，在运行时使用类别方法时我会遇到无法识别的选择器崩溃。

有什么方法可以将目标`-all_load -ObjC`仅应用于我的静态库，不知何故？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T02:43:23.430

尝试改用 -force_load 标志

查看[这篇](https://stackoverflow.com/questions/3354864/xcode-project-target-settings-syntax-for-linker-flag-force-load-on-iphone)文章了解更多详情。

# php - 将 CSS 类名称添加到 WordPress 主题中的 comments_popup_link。

> ID：14369144
> 
> 赞同：0
> 
> 时间：2013-01-16T22:33:10.377
> 
> 标签：php, css, wordpress

我目前正在尝试设计一个 Wordpress 主题，我没有最丰富的 PHP 知识，但到目前为止它进展顺利。

我的一个问题是，如何添加类和 ID 以将我的 CSS 挂钩？例如：

在每个帖子上生成“发表评论”链接的代码是：

```
<?php comments_popup_link('Leave a Comment', '1 Comment', '% Comments'); ?> 
```

我想设置它的样式，它显示为一个链接，但显然我不能简单地为`a`我的主列中的每个标签更改 CSS。我需要添加某种类来挂钩。

我该怎么做呢？

```
<?php class="commentLnk" comments_popup_link('Leave a Comment', '1 Comment', '% Comments'); ?> 
```

^ 猜测这根本不对。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:36:48.020

这可以解决问题：

```
<span class="commentLnk"><?php comments_popup_link('Leave a Comment', '1 Comment', '% Comments'); ?></span> 
```

或者，该函数还接受将用作类的第四个参数：

```
<?php comments_popup_link('Leave a Comment', '1 Comment', '% Comments', 'commentLnk'); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T22:38:15.400

您可以将自己的 CSS 样式类添加到评论链接。

> comments_popup_link('发表评论', '1 Comment', '% Comments', 'cssclass');

[如commands_popup_link](http://codex.wordpress.org/Function_Reference/comments_popup_link)的 WordPress API 文档中所述。

# text - 解释没有分隔符的文本的含义

> ID：14369147
> 
> 赞同：2
> 
> 时间：2013-01-16T22:33:19.827
> 
> 标签：text, combinatorics

我得到一个没有分隔符的文本和一个字典。我必须找到文本的所有解释，即我可以在字符之间放置空格的所有方式，以便我产生一个相对于字典有意义的文本。

例如：

```
"Agoodday" 
```

可能：

```
"A good day" 
```

或者：

```
"Ago odd ay" 
```

这个问题叫什么？它在文学中有名字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:28:27.990

更广泛的数学问题属于模式识别。当专门应用于语言文本时，这就是[分词](http://en.wikipedia.org/wiki/Word_segmentation)。

# java - 摆位问题

> ID：14369148
> 
> 赞同：1
> 
> 时间：2013-01-16T22:33:21.843
> 
> 标签：java, swing, jtextarea, flicker

我正在编写一个小游戏，使用`Swing`for`GUI`并且遇到了问题。我发布了截图，以便您更好地了解情况。

![在此处输入图像描述](../Images/e2e75b51c835493c77354e4c734450d3.png)

起初，我只有使用`GridLayout`.

但是，我需要添加一个面板来显示分数，所以我放弃`GridLayout`了`GridBagLayout`. 我`JPanel`为分数正确定位了新的，并在其中添加了 2`JTextArea`以显示结果。

问题是每次其中一个玩家移动时（因此棋盘会被重新绘制以反映其新状态），文本区域会闪烁并被棋盘部分覆盖（见截图）。知道问题可能是什么吗？我已经设置了所有组件的首选大小并尝试使用`setOpaque`，但无济于事。

主布局持有者的代码。

```
public class BoardLayout extends JFrame implements ModelObserver {

    /**
     * {@value}
     */
    private static final long serialVersionUID = 5834762299789973250L;

    /**
     * {@value}
     */
    private static final int RESULTS_PANEL_HEIGHT = 100;

    private final BoardEventsListener eventsListener;

    private final ResultsLayout resultsLayout;

    private class CellMouseListener implements MouseListener {

        private final int cellIndex;

        public CellMouseListener(final int index) {
            cellIndex = index;
        }

        @Override
        public void mouseClicked(final MouseEvent event) {
            eventsListener.onCellSelected(cellIndex);
        }

        @Override
        public void mouseEntered(final MouseEvent event) {
            // blank
        }

        @Override
        public void mouseExited(final MouseEvent event) {
            // blank
        }

        @Override
        public void mousePressed(final MouseEvent event) {
            // blank
        }

        @Override
        public void mouseReleased(final MouseEvent event) {
            // blank
        }

    }

    public BoardLayout(final BoardEventsListener listener) throws HeadlessException {
        this(listener, "", null);
    }

    public BoardLayout(GraphicsConfiguration graphicsConfiguration) {
        this(null, "", graphicsConfiguration);
    }

    public BoardLayout(final BoardEventsListener listener, String title,
            GraphicsConfiguration graphicsConfiguration) {
        super(title, graphicsConfiguration);

        eventsListener = listener;

        setLayout(new GridBagLayout());
        setBoardSize();
        populateCells();
        resultsLayout = attachResultsLayout();

        resultsLayout.setOpaque(true);

        setVisible(true);
    }

    private ResultsLayout attachResultsLayout() {
        final ResultsLayout resultsLayout = new ResultsLayout(Game.BOARD_COLUMN_COUNT
                * BoardCellLayout.WIDTH_BOARD_CELL, RESULTS_PANEL_HEIGHT);
        final GridBagConstraints constraints = new GridBagConstraints();
        constraints.gridwidth = GridBagConstraints.REMAINDER;
        constraints.gridheight = GridBagConstraints.REMAINDER;
        constraints.gridx = 0;
        constraints.gridy = 8;
        getContentPane().add(resultsLayout, constraints, 64);
        return resultsLayout;
    }

    private void setBoardSize() {
        final Dimension boardDimension = getBoardDimension();
        setMinimumSize(boardDimension);
        setSize(boardDimension);
        setResizable(false);
    }

    private void populateCells() {
        final Container container = getContentPane();
        for (int i = 0; i < Game.BOARD_ROW_COUNT; ++i) {
            for (int j = 0; j < Game.BOARD_COLUMN_COUNT; ++j) {
                final BoardCellLayout currentCell = new BoardCellLayout();
                final int cellIndex = i * Game.BOARD_COLUMN_COUNT + j;
                final GridBagConstraints constraints = new GridBagConstraints();
                constraints.gridx = j;
                constraints.gridy = i;
                container.add(currentCell, constraints, cellIndex);
                currentCell.setOpaque(true);
                currentCell.addMouseListener(new CellMouseListener(cellIndex));
            }
        }
    }

    private Dimension getBoardDimension() {
        final Dimension boardDimension = new Dimension(Game.BOARD_COLUMN_COUNT
                * BoardCellLayout.WIDTH_BOARD_CELL, (Game.BOARD_ROW_COUNT + 1)
                * BoardCellLayout.HEIGHT_BOARD_CELL);
        return boardDimension;
    }

    public BoardLayout(String title) throws HeadlessException {
        this(null, title, null);
    }

    @Override
    public void setVisible(final boolean isVisible) {
        super.setVisible(isVisible);
        setBackground(Color.WHITE);
        pack();
    }

    @Override
    public void onModelChanged(Collection<Cell> changedCells, final int whiteDiscsCount,
            final int blackDiscsCount) {
        for (final Cell cell : changedCells) {
            final BoardCellLayout boardCell = getCellAt(cell.getIndex());
            boardCell.take(cell.getOwner());
        }
        resultsLayout.onResultChanged(whiteDiscsCount, blackDiscsCount);

    }

    @Override
    public void onNextMovesAcquired(Collection<Cell> nextMoves) {
        clearCellHighlight();
        for (final Cell cell : nextMoves) {
            final BoardCellLayout boardCell = getCellAt(cell.getIndex());
            boardCell.highlight();
        }
    }

    private void clearCellHighlight() {
        final Container container = getContentPane();
        for (int i = 0; i < container.getComponentCount() - 1; ++i) {
            final BoardCellLayout boardCellLayout = (BoardCellLayout) container.getComponent(i);
            boardCellLayout.clearHighlight();
        }
    }

    private BoardCellLayout getCellAt(final int index) {
        final Container container = getContentPane();
        return (BoardCellLayout) container.getComponent(index);
    }
} 
```

面板代码，保存结果：

```
public class ResultsLayout extends JPanel {

    /**
     * {@value}
     */
    private static final long serialVersionUID = 8379710427718395507L;

    private final ResultsTextView whiteTextView;

    private final ResultsTextView blackTextView;

    public ResultsLayout(final int width, final int height) {
        super(new GridLayout(2, 1));

        setVisible(true);

        final Dimension dimension = new Dimension(width, height);
        setMinimumSize(dimension);
        setPreferredSize(dimension);
        setSize(dimension);

        whiteTextView = new ResultsTextView(Player.WHITE);
        blackTextView = new ResultsTextView(Player.BLACK);

        add(whiteTextView, 0);
        add(blackTextView, 1);
    }

    public void onResultChanged(final int whiteDiscsCount, final int blackDiscsCount) {
        whiteTextView.setDiscCount(whiteDiscsCount);
        blackTextView.setDiscCount(blackDiscsCount);
    }

} 
```

JTextArea 的代码，保存结果：

```
public class ResultsTextView extends JTextArea {

    /**
     * {@value}
     */
    private static final long serialVersionUID = -6354085779793155063L;

    /**
     * {@value}
     */
    public static final String BACKGROUND_COLOR = "#066f02";

    private static final int START_DISCS_NUMBER = 2;

    private final Player player;

    public ResultsTextView(final Player player) {
        super();
        setEditable(false);

        setBackground(Color.decode(BACKGROUND_COLOR));

        this.player = player;
        setText(player.toString() + " result is: " + START_DISCS_NUMBER);

        final Dimension dimension = new Dimension(100, 20);
        setPreferredSize(dimension);
        setMinimumSize(dimension);
        setMaximumSize(dimension);
    }

    public void setDiscCount(final int discCount) {
        setText(player.toString() + " result is:" + discCount);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:57:34.313

添加分数面板让我想到了[MVC](https://stackoverflow.com/a/3072979/230513)模式，其中游戏板和分数都是听同一游戏*模型的**视图*。引用的一个[例子](http://robotchase.sourceforge.net/)还有一个基于网格的游戏，它可能会提供一些关于设计和布局的见解。尤其是view, in和view, in ，各听各的。游戏面板占据。*`RCStatus``BorderLayout.NORTH``RCInfo``BorderLayout.SOUTH``RCModel``BorderLayout.CENTER`*

 *关于您提供的片段的一些注释：

*   让您的主视图扩展`JPanel`并将其添加到`JFrame`实例中。

*   不要试图用一个布局来解决所有问题。

*   考虑`extends MouseAdapter`过`implements MouseListener`。

*   重新考虑[`setXxxSize()`](https://stackoverflow.com/q/7229226/230513)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T19:47:33.513

问题是我没有`SwingUtilities.invokeLater`用于更新 GUI，这导致了闪烁。我开始使用它，现在一切都很好:)*

# git - 如何更改过去的提交以包含丢失的文件？

> ID：14369155
> 
> 赞同：104
> 
> 时间：2013-01-16T22:34:19.750
> 
> 标签：git, git-commit

我已提交更改并忘记将文件添加到更改集中。在其他提交之后，我意识到该文件现在从`HEAD^4`提交中丢失了。

如何重写以前的提交以包含丢失的文件？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2016-06-16T00:52:07.523

我意识到人们可以用谷歌搜索并来这里找到一个更简单的答案：**如果它只是最后一次提交怎么办？** （OP的问题是修复历史上的第四次提交）

如果您提交并意识到您忘记**立即**添加一些文件，只需执行以下操作：

```
# edited file-that-i-remember.txt
git add file-that-i-remember.txt
git commit

# realize you forgot a file
git add file-that-i-forgot.txt
git commit --amend --no-edit 
```

哪里`--no-edit`会保留相同的提交消息。

十分简单！

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-01-16T22:43:06.317

使用[`git rebase --interactive HEAD~4`](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages)并设置`edit`您要修改的提交的选项。

请记住，您**不应**以这种方式修改推送到远程存储库的提交。在这种情况下，最好添加一个缺少文件的新提交。

* * *

为了更清楚地说明这一点，首先将所有当前更改存储为`git stash`. 那么，`git rebase --interactive HEAD~4`。您在文本编辑器中获得以下内容（请注意，您将获得 5 次提交，按降序排列）：

```
pick 123e123 fifth last commit message
pick 321e122 fourth last commit message
pick 1d23e3f third last commit message
pick 987a987 second last commit message
pick 8a8a8a8 last commit message 
```

将更改条目的前缀从 修改`pick`为`edit`。那是`edit 321e122 ...`给OP的。

`git rebase`按顺序浏览条目。由于我们只更改了一项，因此您只有一项需要更改。现在，添加您的文件`git add`，并`git commit --amend`使用这些添加的文件修改当前提交。

最后，`git rebase --continue`移动到下一个文件。因为只有一个，所以变基已经完成

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-16T22:44:45.653

如果你还没有推送这 4 个提交，你可以这样做：

为所有这些提交创建补丁文件：

```
git format-patch -4 
```

回退 4 次提交：

```
git reset --hard HEAD~4 
```

添加丢失的文件：

```
git add missing-file 
```

提交`--amend`：

```
git commit --amend 
```

应用所有保存的补丁：

```
git am *.patch 
```

* * *

如果您已推送，则不应使用此方法。相反，只需承认您的错误并在 HEAD 之上再创建一个提交即可解决此问题。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-12-05T21:20:07.747

尽管接受的答案是正确的，但它缺乏关于如何在变基过程中执行编辑提交的详细说明。

*   首先，启动一个 rebase 进程：

    ```
    git rebase --interactive HEAD~4 
    ```

*   将显示提交列表，通过更改单词`pick`来选择要编辑的提交`edit`并保存文件。

*   `git add`在您的代码中进行必要的修改（记得为新文件调用）

*   完成所有修改后，发出`git commit --amend`- 这将修改标记为的提交`edit`

*   调用`git rebase --continue`将完成该过程（如果有更多标记为的提交`edit`，则需要重复上述步骤）

**重要笔记：**

*   不要删除标记为`pick`您不想编辑的行 - 保持原样。删除这些行将导致删除相关的提交

*   `stash`如果您的工作目录不干净，GIT 会强制您在变基之前进行；但是，您可以`git stash pop / git stash apply`在变基期间将这些更改（即在启动变基过程之前隐藏的更改）修改为标记为的提交`edit`

*   如果出现问题并且您想在变基过程完成之前恢复在变基过程中所做的更改（即您想在开始变基之前恢复到该点），请使用`git rebase --abort`- 另请阅读：[如果 --abort 没有，如何中止交互式变基不行吗？](https://stackoverflow.com/questions/5104649/how-to-abort-an-interactive-rebase-if-abort-doesnt-work)

*   正如接受的答案中所说：

    > 请记住，您不应以这种方式修改推送到远程存储库的提交。在这种情况下，最好添加一个缺少文件的新提交。

    答案在[Git Book 中](https://git-scm.com/book/id/v2/Git-Branching-Rebasing)（标题为“ *The Perils of Rebase* ”的段落）：

    > 不要 rebase 存在于存储库之外的提交。
    > 
    > 如果您遵循该准则，您会没事的。如果你不这样做，人们会恨你，你会被朋友和家人鄙视。
    > 
    > 当你 rebase 东西时，你放弃了现有的提交并创建了相似但不同的新提交。如果你在某处推送提交，而其他人将它们拉下来并基于它们进行工作，然后你用 git rebase 重写这些提交并再次推送它们，你的协作者将不得不重新合并他们的工作，当你尝试时事情会变得一团糟把他们的工作拉回你的工作。
    > 
    > [...]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-16T08:45:47.833

这是一种非交互式`rebase`方法。

这需要额外的提交（因此不会按照 OP 的要求“重写以前的提交”），但我发现它更容易记住。

初始状态：

```
* e834111 (HEAD -> master) do something that depends on file x
* 6dde62a do stuff, forget to add file x
... 
```

第 1 步 - 在提交时签出一个应该包含文件 ( `git checkout -b temp 6dde`) 的新临时分支：

```
* e834111 (master) do something that depends on file x
* 6dde62a (HEAD -> temp) do stuff, forget to add file x
... 
```

第 2 步 -`add`丢失的文件和`commit`：

```
* 50d1412 (HEAD -> temp) add file x
| * e834111 (master) do something that depends on file x
|/  
* 6dde62a do stuff, forget to add file x
... 
```

第 3 步 - 签出原始分支并`rebase`进入`temp`：

```
* dd6f2dd (HEAD -> master) do something that depends on file x
* 50d1412 (temp) add file x
* 6dde62a do stuff, forget to add file x
... 
```

第 4 步 - 删除临时分支 ( `git branch -d temp`)

注意：这也可以在不创建临时分支的情况下完成，例如在分离的头上使用`git checkout 6dde`a`commit`和。`rebase`

# jquery - wpdb::prepare() 错误缺少参数 2

> ID：14369157
> 
> 赞同：-3
> 
> 时间：2013-01-16T22:34:30.623
> 
> 标签：jquery, wordpress, html5-video

我在 wordpress 中安装了 html5 视频播放器插件，它显示以下错误。请让我知道我该如何解决它。

```
 Warning: Missing argument 2 for wpdb::prepare(), called in C:\xampp\htdocs
 \wordpress\wp-content\plugins\lbg-vp2-html5-bottom\lbg-vp2-html5-bottom.php on 
 line 373   and defined in C:\xampp\htdocs\wordpress\wp-includes\wp-db.php on line 990

 Parse error: syntax error, unexpected end of file in C:\xampp\htdocs\wordpress
\wp-content\plugins\lbg-vp2-html5-bottom\tpl\players.php on line 41 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:14:51.577

`$wpdb->prepare`像`sprintf`or一样工作`vsprintf`。它应该有一个字符串，后跟可变数量的参数。

```
$wpdb->prepare(
    "SELECT * FROM {$wpdb->posts} WHERE post_title = %s",
    'My Great Title'
); 
```

如果缺少第二个参数，它过去只是传递数据，因此您可以执行以下操作：

```
$wpdb->prepare(
    "SELECT * FROM {$wpdb->posts} WHERE post_title = 'My Great Title'"
); 
```

它违背了这一点，`prepare`但它奏效了，人们做到了——也许只是出于习惯，也许`prepare`是出于对用途的误解。[最近的更改改变了这种行为，现在它失败并出现错误](http://codex.wordpress.org/Class_Reference/wpdb#Protect_Queries_Against_SQL_Injection_Attacks)。

诚然，我在猜测，但我认为这就是您所看到的问题。

# sh - bourne shell 小写

> ID：14369166
> 
> 赞同：3
> 
> 时间：2013-01-16T22:35:08.000
> 
> 标签：sh

有没有办法让 bourne shell 不关心字符串比较的大小写？或者，我可以将变量转换为全小写吗？

我试图将 tr 与 echo 一起使用，但永远无法让它覆盖我的变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T22:39:18.753

我刚试过

```
MYVAR="This is a Test."
MYVAR=$(echo $MYVAR | tr '[:upper:]' '[:lower:]')
echo $MYVAR 
```

结果是

```
this is a test. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T13:03:15.967

请注意，给出的答案是针对**bash**的，而不是针对不知道 **$(...)**构造的 Bourne shell。此外，所有 tr 实现中都不存在**tr**类**upper**、**lower等，这取决于您所在的平台（在 Solaris 上，您将使用 /usr/xpg4/bin/tr 而不是 /usr/bin/tr）。**具有经典 tr答案
的正确**Bourne shell是：**

```
MYVAR=`echo "$MYVAR" | tr '[A-Z]' '[a-z]'` 
```

由于您对给定的答案感到满意：很好，鉴于 bash 无处不在，这对于大多数读者来说可能没问题。

不过，您应该正确地标记了这个问题：bourne-shell 具有误导性。

# jquery - YouTube JS API 自定义播放器跳过/下一个视频功能

> ID：14369167
> 
> 赞同：0
> 
> 时间：2013-01-16T22:35:14.620
> 
> 标签：jquery, iframe, youtube-api, youtube-javascript-api

我有一个自定义的 youtube 播放器，主要用 javascipt/jQuery 编码，它使用 iframe 方法，并且有下一个和上一个轨道按钮，这些按钮可以在不使用 YouTube JavaScript API 函数的情况下工作。播放器还会根据用户点击的搜索结果链接改变播放视频的ID。我唯一的问题是我需要能够检测当前正在播放的视频何时结束，以便播放器知道何时跳到列表中的下一个曲目，而无需用户单击按钮。这可以在没有 API 调用的情况下完成吗？

如果不是，我应该如何使用 JavaScript API 实现 YouTube iframe 嵌入，以确定歌曲何时通过 OnStateChange 事件结束，同时仍然能够在用户点击搜索结果链接时更改正在播放的歌曲的 ID ?

这是否应该通过将视频 ID 传递给创建 YouTube 播放器对象的函数，然后在用户单击链接并插入具有新 ID 的 YouTube 播放器的新实例时将其销毁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:08:12.197

正是出于您描述的确切原因，我创建了 jQuery Tubeplayer 插件。

在这里查看：http: [//plugins.jquery.com/tubeplayer/](http://plugins.jquery.com/tubeplayer/)

不确定这是否会直接帮助您，但您当然可以查看库代码以了解正在执行的操作。您需要利用“onPlayerEnded”功能来触发下一个视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:00:51.730

我刚刚在我的 jquery $(document.ready() 语句之外创建了一个 youtube 播放器对象的实例，然后通过 jQuery 更改了 iframe 的“src”属性，这对我来说很有效。

# c# - 如何将 foreach 迭代器添加到 ServiceStack Markdown 中的 MarkdownPage？

> ID：14369169
> 
> 赞同：1
> 
> 时间：2013-01-16T22:35:23.777
> 
> 标签：c#, markdown, servicestack

我正在使用 ServiceStack 来呈现我的 Markdown，但是我正在以编程方式进行我所追求的。基本上我的代码如下所示：

```
//MarkdownRenderer.cs
var rootPath = HttpContext.Current.Server.MapPath("~/");
var format = new MarkdownFormat { VirtualPathProvider = new PathProvider() };
var pageTitle = "Test for StackOverflow";
var pageContent = "Foobar";
var page = new MarkdownPage(format, rootPath, pageTitle, pageContent)
{
    Template = "~/_Layout.cshtml"
};
format.AddPage(page);
var view = new Dictionary<string, object>
{
    {"PageTitle", pageTitle},
    {"ArrayData", new[]{"abc","def"}}
};
var html = format.RenderDynamicPageHtml(pageTitle, view); 
```

我有一个这样的 Markdown 页面：

```
//_Layout.cshtml
<!DOCTYPE html>
<html>
    <head>
        <title><!--@PageTitle--></title>
    </head>
    <body>
        <div>
        @foreach var item in ArrayData {
            - @item
        }
        </div>
        <div><!--@Body--></div>
    </body>
</html> 
```

@Body 标记完全按预期填充，@PageTitle 标记也是如此。我现在希望能够使@foreach 代码正常工作，并且从可用的文档中我无法解决。问题是我的语法吗？我是否需要将代码转储到一个单独的文件中，然后单独编译，然后将其结果注入我的降价页面，就像我做 @SwapVariables 一样？

任何和所有帮助将不胜感激，如果您有任何问题，请提出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:10:53.790

您正在将[ServiceStack 的 MVC Razor 支持](http://razor.servicestack.net)与[Markdown Razor 格式](https://github.com/ServiceStack/ServiceStack/wiki/Markdown-Razor)混合。ie 任何以**.cshtml**结尾的都是 MVC Razor 页面，而只有以**.md**结尾的页面被处理为 Markdown Razor 页面。

在 Markdown Razor 中，布局/模板页面通常被命名`default.shtml`，并且只是一个支持替换变量占位符的静态 HTML 页面，例如，只有以**.md**`<!--@Body-->`结尾的 Markdown 页面（即不是 HTML 模板）才能作为 Markdown Razor 处理。

 **这是一个[独立 Markdown Razor 程序](http://www.ipreferjim.com/2012/07/servicestacks-markdown-razor-engine-wow/)的示例，而这是一个[使用 ServiceStack 的 MVC Razor 支持的独立示例](https://stackoverflow.com/a/14263254/85785)。**

# java - 增加 Java 堆空间：Eclipse vs. BAT-script

> ID：14369171
> 
> 赞同：1
> 
> 时间：2013-01-16T22:35:33.307
> 
> 标签：java, heap-memory

我想为 Eclipse 中的程序增加 Java 堆空间。在虚拟机参数中增加堆空间`-Xmx1500m`没有问题，但如果我增加 6 GB，我会收到以下错误：

> 最大堆大小无效：-Xmx6G
> 
> 指定的大小超过了最大可表示大小。

如果我导出我开发的程序并将其作为 jar 文件在控制台的 bat 脚本中运行，则不会出现此问题。

有人知道为什么这个问题只发生在 Eclipse 中吗？

我的系统：

*   视窗 7、64 位
*   16GB 内存
*   Eclipse Juno，64 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:11:31.230

尝试阅读此文档： http: [//javahowto.blogspot.co.uk/2006/06/6-common-errors-in-setting-java-heap.html](http://javahowto.blogspot.co.uk/2006/06/6-common-errors-in-setting-java-heap.html)。它提供了与 Java Heap 相关的 6 个最常见错误尺寸设置。在您的情况下，问题如下：

问题：堆大小比 JVM 认为你需要的要大。例如：

```
 java -Xmx256g BigApp
   Invalid maximum heap size: -Xmx256g
   The specified size exceeds the maximum representable size.
   Could not create the Java virtual machine. 
```

解决方案：

```
The fix is to lower it to a reasonable value: java -Xmx256m BigApp 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T00:34:21.910

该消息告诉您`-Xmx6G`对于 Eclipse 尝试启动的 JVM 可执行文件来说太大了。它抱怨这么小的数字的事实告诉我，Eclipse 必须通过尝试启动 32 位 JVM 而不是 64 位的。相比之下，当您从命令行运行时，您将获得 64 位 JVM。

我的结论是您安装了 32 位和 64 位 JRE / JDK，并且您已经以某种方式将 Eclipse 配置为使用 32 位 JVM 来运行应用程序。

（我也会尝试使用小写的'g' ...）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T08:26:40.290

谢谢斯蒂芬C！

不知何故安装了两个 JRE（我假设是通过奇怪的更新）。完全重新安装 Java 解决了这个问题。但是我不能只在 Eclipse 中更改 JRE ......

# c# - 如何使用函数更改表单属性中的对象？

> ID：14369175
> 
> 赞同：0
> 
> 时间：2013-01-16T22:35:47.157
> 
> 标签：c#

假设您正在尝试设置标签的文本。通过这样做，您调用了一个函数 SetText(labelname, "texthere")。SetText 的“标题”是什么？

我正在努力：

```
private void SetText(object foo, string bar) 
```

但这不起作用

编辑：我有这个：

```
private void SetText(Control thing, string text)
{
if (this.InvokeRequired)
{
SetTextCallback d = new SetTextCallback(SetText);
Invoke(d, new object[] { text });
}
else
{
thing.Text = text;
}
} 
```

但它说明了无效的参数数量。我需要改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:39:23.733

使用[Control 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)而不是 Object，因为前者定义了控件（具有可视化表示的组件）的基类并公开了 Text 属性。

```
private void SetText(Control control, String text)
{
    control.Text = text;
} 
```

像这样，您不需要装箱/投射对象。否则，您还应该指定对象的类型，因为您可以传递文本框、标签等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:37:49.907

可能是因为您引用了错误的对象，请尝试：

```
private void SetText(ref object foo, string bar) 
```

注意`ref`关键字。

# batch-file - 在 Windows 批处理脚本中查找网络路径的问题 Windows XP 到具有嵌入式 XP 的终端

> ID：14369180
> 
> 赞同：0
> 
> 时间：2013-01-16T22:36:14.363
> 
> 标签：batch-file

我几乎完成了开发批处理文件以通过远程命令从特定目录中删除文件。剩下的唯一要解决的问题是获取正确的路径名。我正在使用的计算机是 Windows XP，我正在登录一台带有嵌入式 XP 的机器。

我首先使用 NET USE 连接到终端：

```
NET USE \\%IP% /user:UFDOMAIN\luci "city!!" 
```

其中 UFDOMAIN 是域，luci 是用户和城市！是密码（不是实际的域、用户和密码，但足够接近）。

成功连接后，我暂时尝试使用 COPY 命令来证明我可以做到，然后才开始疯狂删除。

```
COPY \\%IP%\Tools\Support\filetodelete.html filetodeletecopy.html 
```

但是，当我运行代码时，出现错误：

> 找不到网络路径。

我尝试了多种方法，包括

```
\\%IP%\C:\Tools\Support\filetodelete.html
\\10.xx.x.x\Tools\Support\filetodelete.html REM - 10.xx.x.x is the actual IP
\\%IP%C:\Tools\Support\filetodelete.html 
```

当然，这些都不起作用（我也不认为它们会起作用，但更容易摆脱简单的可能性），并且此代码基于已经与其他终端一起使用的代码。我以为它可能是终端，但出于所有密集目的，这个终端就像其他终端一样，只包含不同的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:53:12.053

Windows 使用特殊语法创建默认共享。而不是 using `C:`，您必须`C$`像这样使用：

```
del \\%IP%\C$\Path\File.ext 
```

如果 Windows 配置为禁用`C$`共享类型，则您必须通过在 Windows 资源管理器中浏览到该文件夹​​，右键单击该文件夹，选择“属性”和“共享”来为要共享的硬盘驱动器区域创建显式共享. 从那里您可以创建一个共享，以通过共享名称访问该文件夹及其所有内容。例如，我可以为 C: 驱动器创建一个名为 的共享`CDrive`，然后以这种方式访问​​它：

```
del \\%IP%\CDrive\Path\File.ext 
```

但是，在创建显式共享时应该小心，因为默认情况下，*读取*权限授予*所有人*。你可以调整这个，但你应该小心......

# asp.net-mvc - 保留错误/异常时的表单值

> ID：14369181
> 
> 赞同：0
> 
> 时间：2013-01-16T22:36:14.690
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4, angularjs

我正在使用 Html.TextBoxFor 输入文本并稍后提交。我想要得到的是，在提交时，如果出现异常/错误，将用户返回到表单视图**，并使用他之前输入的 value**。

我的 POST 动作：

```
[HttpPost]
public ActionResults Add(Model model)
{
    try
    {
        //on succeed
        _repository.Add(model);
        return RedirectToAction("ThankYou", "Home");
    }
    catch(Exception ex)
    {
        ModelState.AddModelError('foo', ex.Message);
    }

    return View(model);
} 
```

查看代码：

```
<div class="origin">
                <div class="float-left margin-right">
                    @Html.LabelFor(m => m.From, "From:", new { @class = "block-display" })
                    @Html.TextBoxFor(m => m.From, new
                        {
                            type = "text",
                            @class = "airport-auto-complete",
                            auto_complete = "",
                            placeholder = "enter place or airport",
                            ng_model = "From"
                        })
                </div>
                <div class="float-left">
                    @Html.LabelFor(m => m.DepartAt, "Depart:", new { @class = "block-display" })
                    @Html.TextBoxFor(m => m.DepartAt, new
                        {
                            type = "text",
                            @class = "begin-trip-date date-input",
                            ng_model = "DepartAt"
                        })
                    <input type="button" class="more-options-btn" value="More.." />
                    <input type="button" class="transport-btn" />
                </div>
                <br style="clear: left;" />
            </div>
            <div class="more-details">
                <div>
                    <label>
                        <input type="checkbox" id="allow-via" />
                        Allow nearby</label>
                    <br />
                </div>
                <div>
                    <label for="via" class="block-display">Via:</label><input type="text" id="via" auto-complete />
                </div>
                <div>
                    <div class="float-left left">
                        <label for="flight-num" class="block-display">Flight No.:</label><input type="text" id="flight-num" />
                    </div>
                    <div class="float-left">
                        <label for="stops" class="block-display">Stops:</label><input type="text" id="stops" />
                    </div>
                </div>
            </div>
            <div class="destination">
                <div class="float-left margin-right">
                    @Html.LabelFor(m => m.To, "To:", new { @class = "block-display" })
                    @Html.TextBoxFor(m => m.To, new
               {
                   type = "text",
                   @class = "airport-auto-complete",
                   auto_complete = "",
                   placeholder = "enter place or airport",
                   ng_model = "To"
               })
                </div>
                <div class="float-left">
                    @Html.LabelFor(m => m.ReturnAt, "Return:", new { @class = "block-display" })
                    @Html.TextBoxFor(m => m.ReturnAt, new
               {
                   type = "text",
                   @class = "end-trip-date date-input",
                   ng_model = "ReturnAt"
               })
                </div>
                <br style="clear: left;" />
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:12:02.037

事实证明，`ng_model = "To"`属性是这个问题的原因。 `ng-model`是 AngularJs 框架的内置指令，它处理客户端数据绑定，因为在这个范围内没有数据，所以我看不到任何数据。

你可以在这里阅读：[ngModel](http://docs.angularjs.org/api/ng.directive%3angModel)

# mysql - MySQL - 在 MAX 时间戳上左连接

> ID：14369182
> 
> 赞同：1
> 
> 时间：2013-01-16T22:36:18.827
> 
> 标签：mysql, join, max, min

我知道这是一个常见问题，因为我之前已经问过这个问题，并且已经看了几个，但尽管我的查询基于此，我仍然无法让它发挥作用。参见：[Mysql join based on max(timestamp)](https://stackoverflow.com/questions/1373559/mysql-join-based-on-maxtimestamp) and [mysql LEFT join for right table max value](https://stackoverflow.com/questions/6267878/mysql-left-join-for-right-table-max-value)

基本上我有一张不同物品的桌子（'椅子'，'桌子'），每种类型都有针对特定椅子或桌子的带有自己 ID 的记录。然后我有一个位置表，其中保存了所有曾经存在的位置，包括当前位置。当前位置由 MAX 时间戳记。

我的查询旨在获取所有项目，并加入当前位置。我遵循了其他人所说的有效方法，但它对我不起作用。任何帮助表示赞赏。

编辑：我没有说它是如何失败的：它获取记录并进行连接，它返回最大时间戳，但不返回与 MAX(timestamp) 记录对应的记录信息。所以它给出了正确的时间戳，但地板等不是来自具有 MAX 时间戳的记录。

谢谢！

查询：

```
$q = "SELECT
        'chairs' AS work_type,
        chairs.id AS work_id,
        chairs.title,
        chairs.dimensions,
        CurrentLocations.floor,
        CurrentLocations.bin,
        CurrentLocations.bay,
        CurrentLocations.other
       FROM chairs
             LEFT JOIN ( 
                        SELECT 
                              locations.id AS loc_id,
                              locations.work_type AS clwt,
                              locations.work_id AS clwi,
                              locations.floor,
                              locations.bin,
                              locations.bay,
                              locations.other,
                              MAX(locations.timestamp) AS latestLocation
                            FROM
                               locations
                            GROUP BY
                               locations.work_type, locations.work_id
                            ) CurrentLocations
                ON CurrentLocations.clwi = chairs.id AND CurrentLocations.clwt = 'chairs'
        WHERE cur_loc LIKE '%19th Street%'
        ORDER BY 
            FIELD(floor, 'Basement', '3rd Floor', '4th Floor', '5th Floor'), 
            bin, 
            bay,
            other"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:13:20.730

试试这个：

```
 SELECT
        'chairs' AS work_type,        -- do you really need this in the result?
        c.id AS work_id,
        c.title,
        c.dimensions,
        l.floor,
        l.bin,
        l.bay,
        l.other
    FROM 
        chairs AS c
      LEFT JOIN
        ( SELECT work_id,
                 MAX(timestamp) AS latestLocation
          FROM   locations
          WHERE  work_type = 'chairs'
          GROUP BY work_id
        ) AS cl                                  -- CurrentLocations
          ON  cl.work_id = c.id
      LEFT JOIN
        locations AS l 
          ON  l.work_type = 'chairs'
          AND l.work_id = cl.work_id
          AND l.timestamp = cl.latestLocation 
    WHERE 
        c.cur_loc LIKE '%19th Street%'
    ORDER BY 
        FIELD(l.floor, 'Basement', '3rd Floor', '4th Floor', '5th Floor'), 
        l.bin, 
        l.bay,
        l.other ; 
```

* * *

**描述：**

你要：

> 基本上，我有一张不同项目的表格（`chairs`, `tables`），每种类型都有针对特定椅子或桌子的带有自己 ID 的记录。然后我有一张`locations`桌子，上面保存着所有曾经去过的位置，包括现在的位置。当前位置以最大值标注`timestamp`。
> 
> 我的查询旨在获取所有项目（椅子），并加入当前位置。

因此，对于每个项目（即 a `chair`），您只需要**最新** `location`的. 对于`work_id`表中`location`的每一个，您都需要`MAX(timestamp)`. `GROUP BY`正如您已经发现的那样，这可以通过 a 轻松找到：

```
 ( SELECT work_id,
                 MAX(timestamp) AS latestLocation
          FROM   locations
          GROUP BY work_type
                 , work_id
        ) AS cl 
```

但是您还想使用该表中的其他列，如果您只是将它们添加到选择列表中，则会显示错误的结果。（请注意，在大多数 DBMS 中，为了使用不在列表中的`GROUP BY`列，您必须应用聚合函数，就像您应用`MAX()`到`timestamp`.MySQL 允许这种行为，如果使用得当，可以有一些好处。但它还没有实现它 100% 防故障，因此在某些情况下应用它，比如这个，会给出错误的结果。Postgres 有一个更好的实现这个特性，它不会允许错误的结果。）

因此，您需要做的就是将上述`GROUP BY`查询用作派生表（您可以命名它，`cl`或者`CurrentLocation`，任何您想要的名称）并将其连接到`locations`表中，使用列表中`GROUP BY`的所有列和聚合的列（`timestamp`）：

```
 JOIN
        locations AS l 
          ON  l.work_type = cl.work_type
          AND l.work_id = cl.work_id
          AND l.timestamp = cl.latestLocation 
```

之后，您可以像往常一样将他们加入`chairs`餐桌。因为，您`chairs LEFT JOIN locations`在原始查询中有一个，所以我也将这些保留在答案中。

另一个小的修改是，既然你有`CurrentLocations.work_id = 'chairs'`，你只需要表中的那些行`locations`。因此，首先进行分组然后拒绝所有不符合该条件的行是相当多余的。首先应用条件然后分组可能更有效。最终的分组查询和连接条件进行了相应的修改。

另请注意，索引`(work_type, work_id, timestamp)`将提高查询效率（`cl`子查询将仅使用该索引进行处理，并且`JOIN locations`也将使用该索引从位置表中定位所需的行。）

# selenium - Selenium：按钮导致 clickAndWait。页面加载，但 Selenium 停止记录更多

> ID：14369185
> 
> 赞同：0
> 
> 时间：2013-01-16T22:36:30.537
> 
> 标签：selenium, web-scraping

我正在尝试记录（用于抓取）此站点：[http ://www.easyjet.com/en](http://www.easyjet.com/en)

我在表格中输入我的信息，然后单击“显示航班”。这会导致 Selenium 命令“clickAndWait”。页面加载，我可以点击并做一些事情 - 但 Selenium 已停止录制。

有可能克服这个吗？我正在尝试 Selenium，因为传统方式（带有 cookie 的 Python urllib2）对我不起作用。认为他们可能非常有目的地阻止任何人刮擦。

编辑：我知道该页面设置了一个 cookie 并进行了重定向。但这应该由 Selnium 处理，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:44:05.187

我能够使用[selenium IDE for Firefox](http://seleniumhq.org/docs/02_selenium_ide.jsp)成功记录和回放寻找航班。我使用的是 1.0.10 版本。

# python - 全局变量未定义

> ID：14369187
> 
> 赞同：0
> 
> 时间：2013-01-16T22:36:33.730
> 
> 标签：python

```
import socket
import sys
import urllib

port = 6669
mac = "e448c7a96170"

try:
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    ip = socket.gethostbyname( mac  + '.rtn.iptv.svt.sciatl.com')
    sock.connect((ip, port))
    print(ip)
    sock.send("getdom;ipg")
    print "Message Sent"
    while True:
        global m;
        m=sock.recv(10000)
    print(m)
    sock.close()
except:
    print sys.exc_info() 
```

大家好，我是python的新手。我正在尝试打印'm'值。但它没有打印它，因为打印语句在循环之外。我正在尝试将接收到的数据存储在全局变量中并在后面使用它。但我无法做到，因为“m”变量在外部不可见。感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:38:58.430

你的问题是你的循环永远不会结束 -`while True`永远都是真的，所以 print(m) 永远不会执行

# c# - 从 Windows Phone 获取“实时”时间

> ID：14369188
> 
> 赞同：0
> 
> 时间：2013-01-16T22:36:35.657
> 
> 标签：c#, .net-4.0, windows-phone

我的应用程序中有一个函数，我将 Unix Epoch 的毫秒数与当前时间进行比较：

```
 DateTime.Now 
```

这导致时间不同，即：剩余 2 分钟或剩余 4 分钟。

我发现的问题是一些用户没有在他们的手机上正确设置时钟，或者故意将时钟稍微提前。

这会导致上面的计算不正确。

有没有办法解决这个问题，即；从某人那里读取“实时”时间。为方便起见，时间计算是在电话而不是服务器端完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T23:44:22.977

IMO您的问题不是实施而是设计。

由于多种原因，用户的时间可能会出错：用户选择、法律（例如在俄罗斯，定义时区和夏令时的法律每隔几年就会更改一次，这样政府就会提醒人们它仍然存在）或技术（硬件故障，移动运营商的设备设置不正确）。

您有 3 个选项来解决：

1.  让服务器返回 TimeSpan 而不是 DateTime。

2.  让服务器获取客户端的当前时间，并在客户端的时钟中返回 ETA。

3.  （最复杂，仅对时间非常敏感的任务需要，例如“日食+月食计划”应用程序）在启动和激活您的应用程序时，与您的服务器协商客户端设备上 UTC 日期+时间之间的时差，和服务器的时钟。

# c - 递归 C 中的阶乘：类型问题

> ID：14369198
> 
> 赞同：0
> 
> 时间：2013-01-16T22:37:13.633
> 
> 标签：c

在 gcc 4.7.2 (Ubuntu Server 12.10) 上编译此代码时遇到问题

```
#include <stdio.h>

int main()
{
  long int facto = 30;
  printf("%ld\n", fact(facto, facto - 1);
}
long int fact(long int n, long int a)
{
   if (a == 1)
      return (n);
   fact(n * a, a - 1);
} 
```

我知道这可以用一个参数函数来完成，但这不是重点。

我得到的错误是：'fact'的冲突类型（函数声明行）先前隐式声明的事实在这里（与printf行）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T22:38:50.053

`fact`在您调用它之前，您需要一个前向声明`main`

```
long int fact(long int n, long int a); // forward declaration
int main()
{
  long int facto = 30;
  printf("%ld\n", fact(facto, facto - 1);
}
long int fact(long int n, long int a) // actual function 
```

在这种情况下，您可以只移动`fact`上面的实现。`main`但是请注意，这种方法不会扩展到更复杂的程序，这些程序具有更长的函数相互调用。

**ADD** 你的阶乘函数是错误的。这是更正的版本

```
long int fact(long int n)
{
   if (a == 1)
      return (n);
   return n * fact(n - 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:40:42.590

```
#include <stdio.h>
long int fact(long int n, long int a);
int main()
{
  long int facto = 30;
  printf("%ld\n", fact(facto, facto - 1);
}
long int fact(long int n, long int a)
{
   if (a == 1)
      return (n);
   fact(n * a, a - 1);
} 
```

你需要一个函数原型，它基本上是函数的第一行带分号。这将告诉编译器该函数存在。

# java - 尝试保存游戏时出现 FileNotFoundException

> ID：14369202
> 
> 赞同：1
> 
> 时间：2013-01-16T22:37:33.923
> 
> 标签：java, android

当我尝试保存我的 android 游戏（通过我的 Windows 笔记本电脑上的 Android 模拟器玩）时，我得到一个`FileNotFoundException`. 我花了几个小时尝试不同的东西，但仍然感到困惑，因为代码在我以前的版本上完美运行，而不是在 Android 上运行。

```
FileOutputStream saveStream;
ObjectOutputStream savePlayerObject = null;
String destinationFile = player1.getName() + ".txt";

try
{
   saveStream = new FileOutputStream(destinationFile);    
   savePlayerObject = new ObjectOutputStream(saveStream);   
   savePlayerObject.writeObject(player1);
}

catch(FileNotFoundException ex)
{
   Toast toast = Toast.makeText(getApplicationContext(), "Save Failed", Toast.LENGTH_LONG);
   toast.show();
}

catch(IOException ex)
{
   Toast toast = Toast.makeText(getApplicationContext(), "Save Failed", Toast.LENGTH_LONG);
   toast.show();
}

finally
{
   try
   {
      if(savePlayerObject !=null)
      {
         savePlayerObject.flush();    
         savePlayerObject.close();   
         Toast toast = Toast.makeText(getApplicationContext(), "Thank-You For Playing, See You Soon", Toast.LENGTH_LONG);
         toast.show();   
         System.exit(0);   
      }
   }

   catch(IOException ex)
   {
      Toast toast = Toast.makeText(getApplicationContext(), "Save Failed", Toast.LENGTH_LONG);
      toast.show();
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:43:15.097

这意味着程序无法在指定位置创建文件。

```
String destinationFile = player1.getName() + ".txt"; 
```

该文件将在当前工作目录中创建。这通常不是你想要的。您需要考虑文件的确切位置，然后指定绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:43:32.260

也许您没有创建新文件的必要权限。

# ios - 根据第一个对象排序的两个 NSMutableArrays

> ID：14369205
> 
> 赞同：0
> 
> 时间：2013-01-16T22:37:59.500
> 
> 标签：ios, objective-c, ios6

我有两个带有 NSString 和 NSNumber 对象的 NSMutableArrays，更具体地说：

```
NSMutableArray * points; // NSNumber objects
NSMutableArray * players; //NSString objects 
```

我需要根据点的对象对它们进行排序。我尝试[基于一个订购两个 NSMutableArrays，](https://stackoverflow.com/questions/8688484/order-two-nsmutablearrays-based-on-one)但由于 NSArray 没有帮助。我需要在 NSMutableArrays 中执行此操作。我用这个排序点

```
NSSortDescriptor *highestToLowest = [NSSortDescriptor sortDescriptorWithKey:@"self" ascending:NO];
[points sortUsingDescriptors:[NSArray arrayWithObject:highestToLowest]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:48:38.103

我认为你应该介绍一个 Player Class

```
@interface Player : NSObject
@property(strong) NSString *name;
@property(strong) NSNumber *points;
@end 
```

不再将信息保存在单独的数组中，您现在将为每个玩家拥有一个 Player 对象并将点保存在里面。现在将所有玩家放在一个数组中，您可以轻松排序。

```
[players sortUsingComparator: ^(Player *p1, Player *p2){
    if (p1.points < p2.points)
        return NSOrderedAscending;   
    else if(p1.points > p2.points)
        return NSOrderedDescending 
    return NSOrderedSame;
}]; 
```

# visual-studio-2010 - 如何将本地存储库推送到远程存储库？

> ID：14369209
> 
> 赞同：3
> 
> 时间：2013-01-16T22:38:15.047
> 
> 标签：visual-studio-2010, git, github, push

这是我第一次在 Visual Studio 2010 上使用 Git。

首先，我使用用户名在 GitHub 上创建了一个帐户，并创建了一个名为[deneme](https://github.com/sonergonul/deneme)`sonergonul`的空白存储库。

之后，我安装了[Git](http://git-scm.com/)、[Git Source Control provider](http://gitscc.codeplex.com/)和[Git extensions](http://code.google.com/p/gitextensions/)。我创建了一个名为`ProgramConsole`. 当我查看 Visual Studio 时，它看起来像这样：

![在此处输入图像描述](../Images/4cb2cc59b6d8bb21c56d7fede70873f7.png)

在 Git Pending Changes 对话框中，我可以提交更改。当我查看 Git 扩展程序时，它看起来不错，并且可以看到最后一次提交。

![在此处输入图像描述](../Images/fb210323dd8b49f30f142db24ea4553a.png)

当我使用 Git 扩展程序提交时，这不会将本地存储库推送到 Github。当我查看时`Visual Studio->Git->Manage Remotes`，有一个名为远程存储库的选项。

我尝试了此选项的所有可能性，但找不到正确的设置。

![在此处输入图像描述](../Images/35ab1af157104633ed75b8c5deefc6ac.png)

另外，当我推送这个 repo 时，需要一个多小时（仍在进行中）。

![在此处输入图像描述](../Images/7bf95f3406df0aa4b98e5b86e3f254b6.png)

我在这里错过了什么吗？如果有人可以逐步解释此过程，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:40:43.090

如这个[Youtube 视频](http://www.youtube.com/watch?v=JByfXdbVAiE&t=0m45s)所示，推送的持续时间不应超过几秒钟；）

在 Git Extensions 中，如果要使用 https 地址推送，需要选择 Plugins->GitHub，并输入您的 Github 登录名和密码。

# sql - 如何在 Rails 应用程序中组织高级 SQL

> ID：14369212
> 
> 赞同：1
> 
> 时间：2013-01-16T22:38:31.753
> 
> 标签：sql, ruby-on-rails, ruby, conventions

在 Rails 应用程序中组织更高级（因此更复杂和更大）的 SQL 查询的选项有哪些？

目的：

*   将 SQL 和相关规范保存在常规位置。
*   将更大、更可重用的 SQL 提取到 SQL 函数、视图、触发器中（那么如何维护函数、视图的代码？迁移可能不是最好的选择）
*   将 SQL 片段作为 AR 的一部分或作为独立的一部分重用。
*   利用大部分底层数据库功能（例如 PostgreSQL CTE、FTS、扩展等）。
*   保持 SQL 的可管理性、可维护性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:18:37.600

我会考虑将所有内容打包为独立的 gem/Rails 引擎。

所有必要的自定义 SQL 迁移（创建视图、函数、存储过程等的代码）都可以放入其中，`/db/migrations/sql`并且可以编写自定义 Rake 任务来运行这些迁移。

然后，您可以编写各种测试/规范来练习特定于数据库的视图、函数、存储过程等。

这个 gem 将有自己的源代码库，并且可以有自己的生命/发布周期，所有这些都独立于您的主应用程序。可以想象，它可以由 Ruby 专家（用于 gem、specs、库）和 SQL 专家（显然）组成。

如果这个库/API 编写得很好，那么这将为您带来额外的好处，即从低级、特定于数据库的代码中抽象出您的主应用程序。也就是说，应用程序开发人员只需要担心调用`Widget.complex_sql_query`和处理它的返回值，而不必担心维护它。相反，数据库后端团队不必太担心他们的代码是如何使用的——只要两个团队都同意 API 合同并且所有测试覆盖率都很好。

这可以通过与主应用程序集成的所有代码来完成，但是将所有内容都作为一个单独的 gem 会带来身体和心理障碍，让两个团队更容易专注于各自的责任领域。

# mysql - 将 select 的结果返回到变量 MYSQL

> ID：14369214
> 
> 赞同：2
> 
> 时间：2013-01-16T22:38:32.460
> 
> 标签：mysql, sql, select

我尝试在变量中设置选择的结果（在我的结果中显示）但我得到一个错误

这是我的代码：

```
SELECT 8_Type,SET @var= (select Name from variables where  Ch8_ID  = variables.ID)
FROM TTable ; 
```

当我像下面这样更改代码时，这就是我想要的，但我需要更改列的名称：

```
SELECT 8_Type, (select Name from variables where  Ch8_ID  = variables.ID)
FROM TTable ;![enter image description here][1] 
```

我在列中获得了像这张图片这样的查询。

![第二个查询](../Images/fd0af2d30f701764773d506bdf6869ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:43:28.343

为表达式提供一个列别名... `SELECT expr AS my_name`例如

```
SELECT 8_Type
     , (select Name from variables where Ch8_ID = variables.ID) AS my_name
 FROM TTable 
```

MySQL 将返回“my_name”作为结果集中列（在元数据中）的标签。

（但完全不清楚您的 SQL 语句试图做什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:42:06.940

SELECT 字段 AS put_name_result FROM ttable

# java - java字符串编译

> ID：14369215
> 
> 赞同：4
> 
> 时间：2013-01-16T22:38:42.700
> 
> 标签：java, string, compilation

我正在编写一个使用*FTP*加载文件的应用程序。代码如下所示：

```
String username = "username";
String password = "password"; 
```

但是编译后我可以在 .class 文件中看到那些。编译后的代码如下所示：

```
\00username\00password 
```

所以问题是我可以在编译的代码中看到密码和登录。我认为这不好。我怎样才能让java编译字节码中的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:47:21.230

没有将字符串文字编译为“字节码”这样的事情。字符串有一个字节表示，但是，正如您所注意到的，大多数文本查看器会将这个字节表示转换为其正常的 ascii/unicode 表示。无论哪种方式，即使存储混淆的用户名/密码也是一种安全隐患，并且**永远不**应该这样做。

为了安全地存储用户名/密码，您应该从外部安全文件访问它，而不是将其硬编码到程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:03:42.413

Dicarlo2 说：

> 为了安全地存储用户名/密码，您应该从外部安全文件访问它，而不是将其硬编码到程序中。

这仍然比在 Java 代码中硬编码要好，但是您可能需要知道字符串是在字符串池中进行的，这也可能是一个安全问题。

这就是`Console.readPassword`返回 char 数组而不是 String 的原因。 [http://docs.oracle.com/javase/tutorial/essential/io/cl.html](http://docs.oracle.com/javase/tutorial/essential/io/cl.html)

> 其次，readPassword 返回一个字符数组，而不是字符串，因此可以覆盖密码，一旦不再需要它就将其从内存中删除。

但在实际应用中，密码通常用作字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:49:20.313

您需要将密码存储为加密值。对受密码保护的实例的每次访问都将使用加密密码，当然还有解密算法和密钥。那么编译文件中就没有密码了。有这个非常糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T22:50:56.793

不要对密码进行硬编码，除非它们是加密的或类似的。

如果要在命令行提示用户输入密码，可以使用SO 上发布的[这种方法。](https://stackoverflow.com/a/8138549/1979005)对于 Swing GUI，使用[`JPasswordField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html).

希望这可以帮助！！

# java - 在 JBoss AS 中部署 Java EE 应用程序：找不到可用的端口

> ID：14369220
> 
> 赞同：2
> 
> 时间：2013-01-16T22:39:02.833
> 
> 标签：java, jakarta-ee, jboss, port, jboss5.x

我在 JBoss AS 5.1GA 上部署 Java EE 项目时遇到了一个大问题（有点过时，但我的大学建议这样做）。

我注意到问题是

```
ERROR [AbstractKernelController] Error installing to Start: 
name=jboss.messaging:service=Connector,transport=bisocket state=Create mode=Manual 
requiredState=Installed
    java.io.IOException: Can not find a free port for use. 
```

但我已将整个控制台输出放在下面。

具有相同`JBoss`配置的相同项目等在我朋友的机器上运行良好。所以，我认为这只是我的 PC 上的问题，但我认为这不是防火墙问题，因为我已经尝试关闭所有其中...

下面（也许）有用的信息

所以：`Windows 8 64bit`

```
23:28:59,956 INFO  [ServerImpl] Starting JBoss (Microcontainer)...
23:28:59,957 INFO  [ServerImpl] Release ID: JBoss [The Oracle] 5.1.0.GA (build: SVNTag=JBoss_5_1_0_GA date=200905221634)
23:28:59,957 INFO  [ServerImpl] Bootstrap URL: null
23:28:59,957 INFO  [ServerImpl] Home Dir: C:\Software Development\jboss-5.1.0.GA
23:28:59,958 INFO  [ServerImpl] Home URL: file:/C:/Software%20Development/jboss-5.1.0.GA/
23:28:59,958 INFO  [ServerImpl] Library URL: file:/C:/Software%20Development/jboss-5.1.0.GA/lib/
23:28:59,959 INFO  [ServerImpl] Patch URL: null
23:28:59,959 INFO  [ServerImpl] Common Base URL: file:/C:/Software%20Development/jboss-5.1.0.GA/common/
23:28:59,959 INFO  [ServerImpl] Common Library URL: file:/C:/Software%20Development/jboss-5.1.0.GA/common/lib/
23:28:59,959 INFO  [ServerImpl] Server Name: default
23:28:59,959 INFO  [ServerImpl] Server Base Dir: C:\Software Development\jboss-5.1.0.GA\server
23:28:59,959 INFO  [ServerImpl] Server Base URL: file:/C:/Software%20Development/jboss-5.1.0.GA/server/
23:28:59,960 INFO  [ServerImpl] Server Config URL: file:/C:/Software%20Development/jboss-5.1.0.GA/server/default/conf/
23:28:59,960 INFO  [ServerImpl] Server Home Dir: C:\Software Development\jboss-5.1.0.GA\server\default
23:28:59,960 INFO  [ServerImpl] Server Home URL: file:/C:/Software%20Development/jboss-5.1.0.GA/server/default/
23:28:59,960 INFO  [ServerImpl] Server Data Dir: C:\Software Development\jboss-5.1.0.GA\server\default\data
23:28:59,960 INFO  [ServerImpl] Server Library URL: file:/C:/Software%20Development/jboss-5.1.0.GA/server/default/lib/
23:28:59,960 INFO  [ServerImpl] Server Log Dir: C:\Software Development\jboss-5.1.0.GA\server\default\log
23:28:59,960 INFO  [ServerImpl] Server Native Dir: C:\Software Development\jboss-5.1.0.GA\server\default\tmp\native
23:28:59,960 INFO  [ServerImpl] Server Temp Dir: C:\Software Development\jboss-5.1.0.GA\server\default\tmp
23:28:59,961 INFO  [ServerImpl] Server Temp Deploy Dir: C:\Software Development\jboss-5.1.0.GA\server\default\tmp\deploy
23:29:00,908 INFO  [ServerImpl] Starting Microcontainer, bootstrapURL=file:/C:/Software%20Development/jboss-5.1.0.GA/server/default/conf/bootstrap.xml
23:29:01,629 INFO  [VFSCacheFactory] Initializing VFSCache [org.jboss.virtual.plugins.cache.CombinedVFSCache]
23:29:01,632 INFO  [VFSCacheFactory] Using VFSCache [CombinedVFSCache[real-cache: null]]
23:29:01,924 INFO  [CopyMechanism] VFS temp dir: C:\Software Development\jboss-5.1.0.GA\server\default\tmp
23:29:01,934 INFO  [ZipEntryContext] VFS force nested jars copy-mode is enabled.
23:29:03,322 INFO  [ServerInfo] Java version: 1.7.0_09,Oracle Corporation
23:29:03,323 INFO  [ServerInfo] Java Runtime: Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
23:29:03,323 INFO  [ServerInfo] Java VM: Java HotSpot(TM) 64-Bit Server VM 23.5-b02,Oracle Corporation
23:29:03,323 INFO  [ServerInfo] OS-System: Windows 8 6.2,amd64
23:29:03,324 INFO  [ServerInfo] VM arguments: -Dprogram.name=run.bat -Xms128m -Xmx512m -XX:MaxPermSize=256m -Dfile.encoding=Cp1252 
23:29:03,358 INFO  [JMXKernel] Legacy JMX core initialized
23:29:05,773 INFO  [ProfileServiceBootstrap] Loading profile: ProfileKey@54985ce4[domain=default, server=default, name=default]
23:29:07,733 INFO  [WebService] Using RMI server codebase: http://127.0.0.1:8083/
23:29:15,847 INFO  [NativeServerConfig] JBoss Web Services - Stack Native Core
23:29:15,848 INFO  [NativeServerConfig] 3.1.2.GA
23:29:16,493 INFO  [AttributeCallbackItem] Owner callback not implemented.
23:29:18,249 INFO  [LogNotificationListener] Adding notification listener for logging mbean "jboss.system:service=Logging,type=Log4jService" to server org.jboss.mx.server.MBeanServerImpl@641c8053[ defaultDomain='jboss' ]
23:29:30,331 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@1427365531{vfszip:/C:/Software%20Development/jboss-5.1.0.GA/server/default/deploy/Swimv2.jar/}
23:29:30,332 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@1427365531{vfszip:/C:/Software%20Development/jboss-5.1.0.GA/server/default/deploy/Swimv2.jar/}
23:29:30,336 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@559468067{vfsfile:/C:/Software%20Development/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
23:29:30,336 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@559468067{vfsfile:/C:/Software%20Development/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
23:29:30,337 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@559468067{vfsfile:/C:/Software%20Development/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
23:29:30,337 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@559468067{vfsfile:/C:/Software%20Development/jboss-5.1.0.GA/server/default/deploy/profileservice-secured.jar/}
23:29:33,330 INFO  [JMXConnectorServerService] JMX Connector server: service:jmx:rmi://127.0.0.1/jndi/rmi://127.0.0.1:1090/jmxconnector
23:29:33,605 INFO  [MailService] Mail Service bound to java:/Mail
23:29:33,981 ERROR [AbstractKernelController] Error installing to Start: name=jboss.messaging:service=Connector,transport=bisocket state=Create mode=Manual requiredState=Installed
java.io.IOException: Can not find a free port for use.
    at org.jboss.remoting.transport.PortUtil.findFreePort(PortUtil.java:145)
    at org.jboss.remoting.transport.bisocket.BisocketServerInvoker.start(BisocketServerInvoker.java:224)
    at org.jboss.remoting.transport.Connector.start(Connector.java:344)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
    at $Proxy38.start(Unknown Source)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at [ .... ] 
```

正如建议的那样，我检查了提到的文件并找到了该部分

```
<attribute name="serverBindPort">${jboss.messaging.connector.bisocket.port:4457    }</attribute> 
```

但是当我在 SysinternalsTCPView 上寻找这个端口时，我发现没有与端口 4457 匹配。TCPView 出现了。

```
svchost.exe 232 TCP vitokr-pc   epmap   vitokr-pc   0   LISTENING                                       
svchost.exe 232 TCPV6   vitokr-pc   epmap   vitokr-pc   0   LISTENING                                       
System  4   UDP vitokr-pc   netbios-ns  *   *       147 7.350   9   450                     
System  4   UDP vitokr-pc   netbios-dgm *   *       3   621 3   621                     
System  4   TCP vitokr-pc   netbios-ssn vitokr-pc   0   LISTENING                                       
System  4   TCP vitokr-pc   microsoft-ds    vitokr-pc   0   LISTENING                                       
System  4   TCPV6   vitokr-pc   microsoft-ds    vitokr-pc   0   LISTENING                                       
svchost.exe 1040    UDP vitokr-pc   isakmp  *   *                                           
svchost.exe 1040    UDPV6   vitokr-pc   500 *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   ssdp    *   *               532 166.547                     
MezzmoMediaServer.exe   2132    UDP vitokr-pc   ssdp    *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   ssdp    *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   ssdp    *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   ssdp    *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   ssdp    *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   ssdp    *   *                                           
svchost.exe 2400    UDP vitokr-pc   ssdp    *   *               460 138.239                     
svchost.exe 2400    UDP vitokr-pc   ssdp    *   *                                           
svchost.exe 2400    UDPV6   [0:0:0:0:0:0:0:1]   ssdp    *   *                                           
svchost.exe 2400    UDPV6   vitokr-pc   ssdp    *   *                                           
System  4   TCP vitokr-pc   icslap  vitokr-pc   0   LISTENING                                       
System  4   TCPV6   vitokr-pc   icslap  vitokr-pc   0   LISTENING                                       
mysqld-nt.exe   3716    TCP vitokr-pc   3306    vitokr-pc   0   LISTENING                                       
dasHost.exe 1244    UDP vitokr-pc   ws-discovery    *   *                                           
dasHost.exe 1244    UDP vitokr-pc   ws-discovery    *   *                                           
dasHost.exe 1244    UDPV6   vitokr-pc   3702    *   *                                           
dasHost.exe 1244    UDPV6   vitokr-pc   3702    *   *                                           
svchost.exe 1072    UDP vitokr-pc   ws-discovery    *   *                                           
svchost.exe 2400    UDP vitokr-pc   ws-discovery    *   *                                           
svchost.exe 2400    UDP vitokr-pc   ws-discovery    *   *                                           
svchost.exe 1072    UDP vitokr-pc   ws-discovery    *   *                                           
svchost.exe 2400    UDPV6   vitokr-pc   3702    *   *                                           
svchost.exe 1072    UDPV6   vitokr-pc   3702    *   *                                           
svchost.exe 2400    UDPV6   vitokr-pc   3702    *   *                                           
svchost.exe 1072    UDPV6   vitokr-pc   3702    *   *                                           
svchost.exe 1040    UDP vitokr-pc   ipsec-msft  *   *                                           
svchost.exe 1040    UDPV6   vitokr-pc   4500    *   *                                           
mDNSResponder.exe   1888    UDP vitokr-pc   5353    *   *       1   42  23  3.110                       
mDNSResponder.exe   1888    UDPV6   [0:0:0:0:0:0:0:1]   5353    *   *                                           
mDNSResponder.exe   1888    TCP vitokr-pc   5354    vitokr-pc   0   LISTENING                                       
mDNSResponder.exe   1888    TCP vitokr-pc   5354    localhost   49155   ESTABLISHED                                     
svchost.exe 1256    UDP vitokr-pc   llmnr   *   *               269 6.692                       
svchost.exe 1256    UDPV6   vitokr-pc   5355    *   *                                           
System  4   TCP vitokr-pc   wsd vitokr-pc   0   LISTENING                                       
System  4   TCPV6   vitokr-pc   wsd vitokr-pc   0   LISTENING                                       
postgres.exe    2668    TCP vitokr-pc   5432    vitokr-pc   0   LISTENING                                       
postgres.exe    2668    TCPV6   vitokr-pc   5432    vitokr-pc   0   LISTENING                                       
TeamViewer_Service.exe  2632    TCP vitokr-pc   5939    vitokr-pc   0   LISTENING                                       
TeamViewer_Service.exe  2632    TCP vitokr-pc   5939    localhost   56659   ESTABLISHED         12  516                     
System  4   TCP vitokr-pc   12372   vitokr-pc   0   LISTENING                                       
System  4   TCPV6   vitokr-pc   12372   vitokr-pc   0   LISTENING                                       
System  4   TCPV6   [0:0:0:0:0:0:0:1]   12372   [0:0:0:0:0:0:0:1]   56669   ESTABLISHED 275 52.189  278 45.870                      
Dropbox.exe 5604    TCP vitokr-pc   17500   vitokr-pc   0   LISTENING   104 20.696  104 20.696                      
Dropbox.exe 5604    UDP vitokr-pc   17500   *   *                                           
Dropbox.exe 5604    TCP vitokr-pc   19872   localhost   56691   ESTABLISHED                                     
AppleMobileDeviceService.exe    1608    TCP vitokr-pc   27015   vitokr-pc   0   LISTENING                                       
AppleMobileDeviceService.exe    1608    TCP vitokr-pc   27015   localhost   56664   ESTABLISHED                                     
wininit.exe 772 TCP vitokr-pc   49152   vitokr-pc   0   LISTENING                                       
wininit.exe 772 TCPV6   vitokr-pc   49152   vitokr-pc   0   LISTENING                                       
svchost.exe 924 TCP vitokr-pc   49153   vitokr-pc   0   LISTENING                                       
svchost.exe 924 TCPV6   vitokr-pc   49153   vitokr-pc   0   LISTENING                                       
svchost.exe 1040    TCP vitokr-pc   49154   vitokr-pc   0   LISTENING                                       
svchost.exe 1040    TCPV6   vitokr-pc   49154   vitokr-pc   0   LISTENING                                       
AppleMobileDeviceService.exe    1608    TCP vitokr-pc   49155   localhost   5354    ESTABLISHED                                     
lsass.exe   884 TCP vitokr-pc   49156   vitokr-pc   0   LISTENING                                       
lsass.exe   884 TCPV6   vitokr-pc   49156   vitokr-pc   0   LISTENING                                       
svchost.exe 1072    UDP vitokr-pc   49161   *   *                                           
svchost.exe 1072    UDPV6   vitokr-pc   49162   *   *                                           
services.exe    868 TCP vitokr-pc   49164   vitokr-pc   0   LISTENING                                       
services.exe    868 TCPV6   vitokr-pc   49164   vitokr-pc   0   LISTENING                                       
svchost.exe 2256    TCP vitokr-pc   49165   vitokr-pc   0   LISTENING                                       
svchost.exe 2256    TCPV6   vitokr-pc   49165   vitokr-pc   0   LISTENING                                       
MezzmoMediaServer.exe   2132    TCP vitokr-pc   50041   vitokr-pc   0   LISTENING                                       
MezzmoMediaServer.exe   2132    UDP vitokr-pc   50041   *   *                                           
MezzmoMediaServer.exe   2132    UDP 169.254.204.244 50612   *   *                                           
MezzmoMediaServer.exe   2132    UDP 10.169.195.211  51090   *   *                                           
MezzmoMediaServer.exe   2132    UDP 192.168.0.100   51108   *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   52042   *   *       72  28.308                              
svchost.exe 2400    UDP vitokr-pc   52314   *   *                                           
svchost.exe 2400    UDPV6   vitokr-pc   52315   *   *                                           
MezzmoMediaServer.exe   2132    TCP vitokr-pc   53168   vitokr-pc   0   LISTENING                                       
svchost.exe 2400    UDPV6   vitokr-pc   54294   *   *                                           
svchost.exe 2400    UDPV6   [0:0:0:0:0:0:0:1]   54295   *   *                                           
svchost.exe 2400    UDP vitokr-pc   54296   *   *       30  3.990   270 84.180                      
svchost.exe 2400    UDP vitokr-pc   54297   *   *       30  3.990                               
MezzmoMediaServer.exe   2132    UDP vitokr-pc   55097   *   *                                           
MezzmoMediaServer.exe   2132    UDP 192.168.0.100   55861   *   *                                           
MezzmoMediaServer.exe   2132    UDP 169.254.204.244 56595   *   *                                           
TeamViewer.exe  6468    TCP vitokr-pc   56657   localhost   56658   ESTABLISHED                                     
TeamViewer.exe  6468    TCP vitokr-pc   56658   localhost   56657   ESTABLISHED                                     
TeamViewer.exe  6468    TCP vitokr-pc   56659   localhost   5939    ESTABLISHED 12  516                             
iTunesHelper.exe    4628    TCP vitokr-pc   56664   localhost   27015   ESTABLISHED                                     
Connectify.exe  4732    TCPV6   [0:0:0:0:0:0:0:1]   56669   [0:0:0:0:0:0:0:1]   12372   ESTABLISHED 278 45.870  275 52.189                      
Dropbox.exe 5604    TCP vitokr-pc   56691   localhost   19872   ESTABLISHED                                     
TeamViewer_Service.exe  2632    TCP vitokr-pc   56733   server1101.teamviewer.com   https   ESTABLISHED 13  312 13  312                     
explorer.exe    5900    TCP vitokr-pc   56741   157.55.236.106  https   ESTABLISHED                                     
Dropbox.exe 5604    TCP vitokr-pc   56778   v-d-2a.sjc.dropbox.com  https   CLOSE_WAIT                                      
chrome.exe  6480    TCP vitokr-pc   56833   95.101.34.34    http    ESTABLISHED 2   1.198   2   445                     
chrome.exe  6480    TCP vitokr-pc   56834   95.101.34.34    http    ESTABLISHED 7   4.093   33  39.562                      
chrome.exe  6480    TCP vitokr-pc   56835   95.101.34.34    http    ESTABLISHED 2   1.248   2   448                     
chrome.exe  6480    TCP vitokr-pc   56836   95.101.34.34    http    ESTABLISHED 5   3.105   5   1.116                       
chrome.exe  6480    TCP vitokr-pc   56837   95.101.34.34    http    ESTABLISHED 2   1.132   7   10.770                      
chrome.exe  6480    TCP vitokr-pc   56838   95.101.34.34    http    ESTABLISHED 2   1.201   2   444                     
chrome.exe  6480    TCP vitokr-pc   56845   208.81.234.118  http    ESTABLISHED 2   1.449   26  56.245                      
chrome.exe  6480    TCP vitokr-pc   56866   95.101.34.40    http    ESTABLISHED 37  30.018  37  9.059                       
chrome.exe  6480    TCP vitokr-pc   56867   95.101.34.40    http    ESTABLISHED 78  61.842  78  19.114                      
chrome.exe  6480    TCP vitokr-pc   56868   95.101.34.40    http    ESTABLISHED 9   7.128   9   2.212                       
chrome.exe  6480    TCP vitokr-pc   56889   95.101.34.34    http    ESTABLISHED 4   2.622   6   3.000                       
chrome.exe  6480    TCP vitokr-pc   56922   62.208.24.27    http    ESTABLISHED 4   3.537   72  171.832                     
chrome.exe  6480    TCP vitokr-pc   56951   81.88.48.90 http    ESTABLISHED 2   1.870   4   2.014                       
chrome.exe  6480    TCP vitokr-pc   56958   95.101.34.34    http    ESTABLISHED 2   1.253   4   2.055                       
chrome.exe  6480    TCP vitokr-pc   56959   95.101.34.40    http    ESTABLISHED 5   3.020   15  21.577                      
chrome.exe  6480    TCP vitokr-pc   56960   95.101.34.40    http    ESTABLISHED 3   1.838   7   11.150                      
chrome.exe  6480    TCP vitokr-pc   56961   95.101.34.40    http    ESTABLISHED 3   1.788   15  48.892                      
chrome.exe  6480    TCP vitokr-pc   56976   95.101.34.34    http    ESTABLISHED 4   2.052   4   888                     
chrome.exe  6480    TCP vitokr-pc   56979   fa-in-f125.1e100.net    https   ESTABLISHED         2   74                      
chrome.exe  6480    TCP vitokr-pc   56991   95.101.34.34    http    ESTABLISHED 2   1.235   5   3.872                       
chrome.exe  6480    TCP vitokr-pc   56992   95.101.34.34    http    ESTABLISHED 2   1.236   5   3.407                       
chrome.exe  6480    TCP vitokr-pc   56993   95.101.34.34    http    ESTABLISHED 2   1.254   6   3.114                       
chrome.exe  6480    TCP vitokr-pc   56994   95.101.34.40    http    ESTABLISHED 3   1.817   14  45.118                      
chrome.exe  6480    TCP vitokr-pc   56995   95.101.34.40    http    ESTABLISHED 6   3.605   20  17.270                      
chrome.exe  6480    TCP vitokr-pc   56996   95.101.34.40    http    ESTABLISHED 4   2.402   14  17.211                      
MezzmoMediaServer.exe   2132    UDP vitokr-pc   57102   *   *                                           
Dropbox.exe 5604    TCP vitokr-pc   57275   sjc-not15.sjc.dropbox.com   http    ESTABLISHED 11  4.169   22  1.969                       
chrome.exe  6480    TCP vitokr-pc   57338   62.208.24.82    https   ESTABLISHED 1   709 1   389                     
chrome.exe  6480    TCP vitokr-pc   57339   62.208.24.82    https   ESTABLISHED 1   741 5   8.805                       
chrome.exe  6480    TCP vitokr-pc   57340   62.208.24.82    https   ESTABLISHED 1   693 1   389                     
chrome.exe  6480    TCP vitokr-pc   57352   2.18.31.144 http    ESTABLISHED 1   1.264   2   405                     
chrome.exe  6480    TCP vitokr-pc   57354   2.18.31.144 http    ESTABLISHED 1   1.087   3   1.408                       
chrome.exe  6480    TCP vitokr-pc   57355   mil01s17-in-f2.1e100.net    https   ESTABLISHED 26  61.360  56  55.635                      
explorer.exe    5900    TCP vitokr-pc   57452   a213-254-17-64.deploy.akamaitechnologies.com    http    CLOSE_WAIT                                      
chrome.exe  6480    TCP vitokr-pc   57461   gru03s16-in-f15.1e100.net   https   ESTABLISHED 5   1.423   7   2.428                       
chrome.exe  6480    TCP vitokr-pc   57511   muc03s08-in-f18.1e100.net   https   ESTABLISHED                                     
[System Process]    0   TCP vitokr-pc   57516   r-199-59-148-20.twttr.com   http    TIME_WAIT                                       
AppleMobileDeviceService.exe    1608    UDP vitokr-pc   58245   *   *                                           
AppleMobileDeviceService.exe    1608    UDP vitokr-pc   58246   *   *                                           
mDNSResponder.exe   1888    UDP vitokr-pc   58247   *   *                                           
mDNSResponder.exe   1888    UDPV6   vitokr-pc   58248   *   *                                           
MezzmoMediaServer.exe   2132    UDP 192.168.0.100   58338   *   *                                           
MezzmoMediaServer.exe   2132    UDP 10.169.195.211  58500   *   *                                           
Skype.exe   4308    UDP vitokr-pc   58909   *   *       1   1   1   1                       
iTunesHelper.exe    4628    UDP vitokr-pc   58910   *   *                                           
iTunesHelper.exe    4628    UDP vitokr-pc   58911   *   *                                           
dasHost.exe 1244    UDP vitokr-pc   59036   *   *                                           
dasHost.exe 1244    UDPV6   vitokr-pc   59037   *   *                                           
MezzmoMediaServer.exe   2132    UDP vitokr-pc   59199   *   *                                           
MezzmoMediaServer.exe   2132    UDP 192.168.0.100   61198   *   *                                           
postgres.exe    2668    UDPV6   [0:0:0:0:0:0:0:1]   63157   *   *       14  320 14  320 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:43:48.120

`name=jboss.messaging:service=Connector,transport=bisocket`的端口定义`deploy\messaging\remoting-bisocket-service.xml`为

```
<attribute name="serverBindPort">${jboss.messaging.connector.bisocket.port:4457}</attribute> 
```

您可以使用[SysInternals TCPView](https://stackoverflow.com/questions/48198/how-can-you-find-out-which-process-is-listening-on-a-port-on-windows/)来查找其他应用程序正在占用此端口，甚至释放它。

**更新**

该问题似乎是此处描述的已知问题：[https](https://community.jboss.org/thread/160779) ://community.jboss.org/thread/160779 。

# css - 如何消除拖放div中的水平滚动条

> ID：14369221
> 
> 赞同：3
> 
> 时间：2013-01-16T22:39:15.993
> 
> 标签：css, html, drag-and-drop

我遇到了拖放 UI 的问题。当我从左侧拖动项目时，您可以看到它们在该 div 内以公平的方式滚动到右侧，然后才允许我放在日历上[（见展览 A）](http://screencast.com/t/paVbt9dt4)

我不是 CSS 专家，但我了解该设置：

```
overflow-x:hidden; 
```

...应该阻止这种情况的发生，但是我已经在父 div 和父 div 上尝试过，但没有运气 - 仍然水平滚动。我正在使用最新版本的 Chrome 和 Firefox。

[这是我正在使用的代码。](http://pastie.org/5699924)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:49:33.987

尝试在此类上添加修复宽度

```
 .woContainer
        {   width: 150px;
            height: 550px;
            max-width: 150px;
            overflow-x: hidden;
        } 
```

# c# - C#成员变量继承

> ID：14369232
> 
> 赞同：6
> 
> 时间：2013-01-16T22:40:01.220
> 
> 标签：c#, variables, inheritance, member-variables

我对 C# 有点陌生，但我在编程方面有相当广泛的背景。

我正在尝试做的事情：为游戏定义不同的 MapTiles。我已经像这样定义了基本的 MapTile 类：

```
public class MapTile
{
    public Texture2D texture;
    public Rectangle mapRectangle;

    public MapTile(Rectangle rectangle)
    {
        this.mapRectangle = rectangle;
    }
} 
```

然后我像这样定义一个子类 GrassTile：

```
class GrassTile : MapTile
{
    new Texture2D texture = Main.GrassTileTexture;
    new public Rectangle mapRectangle;

    public GrassTile(Rectangle rectangle) : base(rectangle)
    {
        this.mapRectangle = rectangle;
    }
} 
```

在我的 Main 类中，我正在创建一个新的 maptile，如下所示：

```
Maptile testTile;
testTile = new GrassTile(new Rectangle(0, 0, 50, 50); 
```

但是，当我尝试渲染这个 testTile 时，它​​的纹理最终为空。如果我在 MapTile 中定义纹理，我的代码可以正常工作，因此它与我之前的实现无关。

那么如何让 GrassTile 能够修改 MapTile 的成员变量纹理呢？或者让我的主类识别 GrassTile 的纹理而不是 MapTile 的我也摆弄了接口，但我不能声明接口成员变量。C# 继承还有什么我还没有得到的吗？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T22:43:12.213

子类将继承父类的成员。您无需指定它们。此外，最好使用属性而不是公共字段。

```
public class MapTile
{
    public Texture2D Texture { get; set; }
    public Rectangle MapRectangle { get; set; }

    public MapTile(Rectangle rectangle)
    {
        MapRectangle = rectangle;
    }
}

public class GrassTile : MapTile
{    
    public GrassTile(Rectangle rectangle) : base(rectangle)
    {
        Texture = Main.GrassTileTexture;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:47:31.163

你有一点语法混乱。“new”关键字既可以用作运算符来实例化某些东西，就像您在 main 中所做的那样，也可以用作成员的修饰符以隐藏继承的成员，这就是您在 GrassTile 中所做的。您实质上是在那里重新定义您的成员。正确的版本可能是：

```
 class GrassTile : MapTile
    {
        public GrassTile(Rectangle rectangle) : base(rectangle)
        {
            texture = Main.GrassTileTexture;
        }
    } 
```

因为您的矩形无论如何都在基本构造函数中设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:52:09.480

继承使继承的字段保留在派生类中。

```
public sealed class GrassTile : MapTile
{
    public GrassTile(Rectangle rectangle) : base(rectangle)
    {
        texture = Main.GrassTileTexture;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T22:58:32.350

我认为最好在这里澄清您如何使用`new`关键字。`new`可以以两种方式使用。作为运算符和修饰符。

`new`“操作员”

new 运算符用于创建对象和调用构造函数，例如：

```
Class1 MyClass  = new Class1(); 
```

`new`修饰符

使用 new 修饰符显式隐藏从基类继承的成员。要隐藏继承的成员，请在派生类中使用相同的名称声明它，并使用 new 修饰符对其进行修改。

考虑以下类：

```
public class MyBaseC 
{
   public int x;
   public void Invoke() {}
} 
```

在派生类中声明一个名为 Invoke 的成员会隐藏基类中的方法 Invoke，即：

```
public class MyDerivedC : MyBaseC
{
   new public void Invoke() {}
} 
```

但是，字段 x 不会受到影响，因为它没有被相似的名称隐藏。

通过继承隐藏名称采用以下形式之一：

*   在类或结构中引入的常量、字段、属性或类型会隐藏所有具有相同名称的基类成员。

*   在类或结构中引入的方法将同名的属性、字段和类型隐藏在基类中。它还隐藏了所有具有相同签名的基类方法。

*   在类或结构中引入的索引器隐藏了所有具有相同签名的基类索引器。

由于您是隐藏名称并声明`Maptile`类型但初始化为子`GrassTile`类型和父`MapTile`类型从未初始化您的`Texture`成员是您看到`null`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T23:06:57.847

代码中有一些需要改进的地方；

首先，该属性`Texture`已在基类 MapTile 中定义，因此无需在类中重新定义`GrassTile`；派生类 (GrassTile) 从基类 (MapTile) 继承此成员。

接下来，您可能会考虑将基类 'MapTile' 修改为[abstract](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx)，因为我认为它本身没有直接行为（纹理必须由具体的派生类实现提供）。

然后，您可以修改`texture`to be [protected](http://msdn.microsoft.com/en-au/library/bcd5672a%28v=vs.71%29.aspx)的声明，因为它不应该真正以这种方式在类层次结构之外访问。否则，将其变成带有`get`和`set`访问器的属性。

最后，您对[new](http://msdn.microsoft.com/en-us/library/vstudio/435f1dw2.aspx)修饰符的使用不正确。此修饰符仅用于（在此上下文中）允许您使用新行为（而不是继承基本行为）覆盖某些行为的基本实现。在这种情况下，您在 GrassTile 中声明了一个“新”纹理，这（不必要）将覆盖基本实例，但仅在通过类 GrassTile 引用时。

```
{
    MapTile m1 = new GrassTile(...);
    //m1.texture == null;
    GrassTile m2 = new GrassTile(...);
    //m2.texture = Main.GrassTileTexture
} 
```

# math - 给定由法线和点定义的平面时找到下坡方向矢量

> ID：14369233
> 
> 赞同：2
> 
> 时间：2013-01-16T22:40:04.713
> 
> 标签：math, trigonometry, vectormath

因此，我有一个由空间 P 中的一个点和一个法线 N 定义的平面。我想找到直接指向平面上“下山”的法线向量。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-01T02:36:53.260

好的，所以不需要该点在空间中的位置。您需要做的是将平面法线矢量与您定义为“向下”的任何矢量相乘。这为您提供了一个垂直于它们的矢量，即穿过具有平坦梯度的斜坡。然后你再次取这个新向量与法线的叉积，它将产生你想要的“下坡”向量：平行于具有最大向下分量的坡度的向量。

所以假设法向量和下向量具有单位长度并且这里的 * 运算符代表叉积：

`gradient = (normal * down) * normal;`

如果您的“向下”向量只是`(0, 0, -1)`，并且适用于大多数应用程序，您可以通过分配以下值来[简化代码中的计算：](http://www.wolframalpha.com/input/?i=((x%2Cy%2Cz)%20cross%20(0%2C0%2C-1))%20cross%20(x%2Cy%2Cz) "推导以下结果")

```
gradient.X = normal.X * normal.Z;
gradient.Y = normal.Y * normal.Z;
gradient.Z = -(normal.X * normal.X) - (normal.Y * normal.Y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:56:43.400

我认为这是负梯度向量。梯度应该是“上坡”的切向量，所以假设它是一个平面，如果你否定它应该是“下坡”的切向量。因此，如果

```
PLANE : z = ax + by + c where N = <a,b,c>
grad(z) = <d/dx(ax + by + c),d/dy(ax + by + c)> = <a,b>
-grad(z) = <-a,-b> 
```

~~因此，“下坡”切线*应该*是 <-a,-b>。~~

求解下降率留给读者作为练习：D

*请注意，位置 P 与确定梯度无关。*

编辑：实际上，我认为我必须自相矛盾。我在想，如果你“向下”看一个平面，法向量指向“向上”（就像旗杆直接从滑雪坡上伸出），那么“下坡”切线向量实际上是 N 到XY 平面，因此 t = 。我不太确定为什么渐变的东西没有解决。当然，这意味着，如果 c < 0，则向下向上；）

# python - 嵌套字典的麻烦

> ID：14369234
> 
> 赞同：1
> 
> 时间：2013-01-16T22:40:10.173
> 
> 标签：python

我有一个简单的嵌套字典，以字典形式表示具有节点、顶点和边权重的图形：

`{node: {vertex: weight, ... } ...}`.

这是我创建它的方法：

```
with open(file) as f:
        __, __1 = next(f).split()
        for line in f:
            tail, head, weight = line.split()
                g1[tail] = {}
                g1[tail][head] = int(weight) 
```

这段代码给了我想要的字典。但是，当我运行更多创建类似嵌套字典并访问此字典的代码时，我遇到了错误。这是代码：

```
nodes = g1.keys()
distance = {}

    for n in nodes:
        distance[n] = {}
    for k in nodes:
        distance[n][k] = graph[n][k] 
```

在这里的某个地方，出现了这个错误：

```
distance[n][k] = graph[n][k]
KeyError: '344' 
```

表明我还没有为“344”创建一个密钥，这就是这段代码试图做的。我想通过将每个节点 n 初始化为一个字典，然后我可以为距离 [n] [k] 创建一个条目。我试过使用默认字典——结果是一样的。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:44:43.257

```
for n in nodes:
    distance[n] = {} 
```

完成后`for-loop`， `n`等于 中的最后一个值`nodes`。

不能保证对于每个`k`in `nodes`，`graph[n][k]`都存在：

```
for k in nodes:
    distance[n][k] = graph[n][k] 
```

`nodes`都是尾巴，不是头。`k`迭代尾部也是如此。然而`graph[n][k]`正在放置`k`在预期的位置。

尾部和头部不一定可以互换，最后一个尾部 ,`n`可能不会连接到所有其他尾部 , `k`。

* * *

如果您尝试制作`distance`的副本`graph`，请使用

```
import copy
distance = copy.deepcopy(graph) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:45:35.303

该错误表明不是您不能分配给，而是在`distance[n][k]`中没有。 `344``graph[n]`

# c# - 这个 Rijndael 是否足够安全，可以在生产系统中使用？

> ID：14369235
> 
> 赞同：0
> 
> 时间：2013-01-16T22:40:20.253
> 
> 标签：c#, encryption, production-environment, rijndael

[在http://www.obviex.com/samples/Encryption.aspx](http://www.obviex.com/samples/Encryption.aspx)上找到了如何实现 Rijndael 的示例

此代码对于生产系统是否足够安全？

```
using System;
using System.IO;
using System.Text;
using System.Security.Cryptography; 
```

此类使用对称密钥算法 (Rijndael/AES) 来加密和解密数据。只要加密和解密例程使用相同的参数来生成密钥，就可以保证密钥是相同的。该类使用带有重复代码的静态函数，以便更轻松地演示加密和解密逻辑。在现实生活中的应用程序中，这可能不是处理加密的最有效方式，所以——一旦你觉得舒服——你可能想要重新设计这个类。

```
public class RijndaelSimple
{
    /// <summary>
    /// Encrypts specified plaintext using Rijndael symmetric key algorithm
    /// and returns a base64-encoded result.
    /// </summary>
    /// <param name="plainText">
    /// Plaintext value to be encrypted.
    /// </param>
    /// <param name="passPhrase">
    /// Passphrase from which a pseudo-random password will be derived. The
    /// derived password will be used to generate the encryption key.
    /// Passphrase can be any string. In this example we assume that this
    /// passphrase is an ASCII string.
    /// </param>
    /// <param name="saltValue">
    /// Salt value used along with passphrase to generate password. Salt can
    /// be any string. In this example we assume that salt is an ASCII string.
    /// </param>
    /// <param name="hashAlgorithm">
    /// Hash algorithm used to generate password. Allowed values are: "MD5" and
    /// "SHA1". SHA1 hashes are a bit slower, but more secure than MD5 hashes.
    /// </param>
    /// <param name="passwordIterations">
    /// Number of iterations used to generate password. One or two iterations
    /// should be enough.
    /// </param>
    /// <param name="initVector">
    /// Initialization vector (or IV). This value is required to encrypt the
    /// first block of plaintext data. For RijndaelManaged class IV must be 
    /// exactly 16 ASCII characters long.
    /// </param>
    /// <param name="keySize">
    /// Size of encryption key in bits. Allowed values are: 128, 192, and 256\. 
    /// Longer keys are more secure than shorter keys.
    /// </param>
    /// <returns>
    /// Encrypted value formatted as a base64-encoded string.
    /// </returns>
    public static string Encrypt(string   plainText,
                                 string   passPhrase,
                                 string   saltValue,
                                 string   hashAlgorithm,
                                 int      passwordIterations,
                                 string   initVector,
                                 int      keySize)
    {
        // Convert strings into byte arrays.
        // Let us assume that strings only contain ASCII codes.
        // If strings include Unicode characters, use Unicode, UTF7, or UTF8 
        // encoding.
        byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
        byte[] saltValueBytes  = Encoding.ASCII.GetBytes(saltValue);

        // Convert our plaintext into a byte array.
        // Let us assume that plaintext contains UTF8-encoded characters.
        byte[] plainTextBytes  = Encoding.UTF8.GetBytes(plainText);

        // First, we must create a password, from which the key will be derived.
        // This password will be generated from the specified passphrase and 
        // salt value. The password will be created using the specified hash 
        // algorithm. Password creation can be done in several iterations.
        PasswordDeriveBytes password = new PasswordDeriveBytes(
                                                        passPhrase, 
                                                        saltValueBytes, 
                                                        hashAlgorithm, 
                                                        passwordIterations);

        // Use the password to generate pseudo-random bytes for the encryption
        // key. Specify the size of the key in bytes (instead of bits).
        byte[] keyBytes = password.GetBytes(keySize / 8);

        // Create uninitialized Rijndael encryption object.
        RijndaelManaged symmetricKey = new RijndaelManaged();

        // It is reasonable to set encryption mode to Cipher Block Chaining
        // (CBC). Use default options for other symmetric key parameters.
        symmetricKey.Mode = CipherMode.CBC;        

        // Generate encryptor from the existing key bytes and initialization 
        // vector. Key size will be defined based on the number of the key 
        // bytes.
        ICryptoTransform encryptor = symmetricKey.CreateEncryptor(
                                                         keyBytes, 
                                                         initVectorBytes);

        // Define memory stream which will be used to hold encrypted data.
        MemoryStream memoryStream = new MemoryStream();        

        // Define cryptographic stream (always use Write mode for encryption).
        CryptoStream cryptoStream = new CryptoStream(memoryStream, 
                                                     encryptor,
                                                     CryptoStreamMode.Write);
        // Start encrypting.
        cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);

        // Finish encrypting.
        cryptoStream.FlushFinalBlock();

        // Convert our encrypted data from a memory stream into a byte array.
        byte[] cipherTextBytes = memoryStream.ToArray();

        // Close both streams.
        memoryStream.Close();
        cryptoStream.Close();

        // Convert encrypted data into a base64-encoded string.
        string cipherText = Convert.ToBase64String(cipherTextBytes);

        // Return encrypted string.
        return cipherText;
    }

    /// <summary>
    /// Decrypts specified ciphertext using Rijndael symmetric key algorithm.
    /// </summary>
    /// <param name="cipherText">
    /// Base64-formatted ciphertext value.
    /// </param>
    /// <param name="passPhrase">
    /// Passphrase from which a pseudo-random password will be derived. The
    /// derived password will be used to generate the encryption key.
    /// Passphrase can be any string. In this example we assume that this
    /// passphrase is an ASCII string.
    /// </param>
    /// <param name="saltValue">
    /// Salt value used along with passphrase to generate password. Salt can
    /// be any string. In this example we assume that salt is an ASCII string.
    /// </param>
    /// <param name="hashAlgorithm">
    /// Hash algorithm used to generate password. Allowed values are: "MD5" and
    /// "SHA1". SHA1 hashes are a bit slower, but more secure than MD5 hashes.
    /// </param>
    /// <param name="passwordIterations">
    /// Number of iterations used to generate password. One or two iterations
    /// should be enough.
    /// </param>
    /// <param name="initVector">
    /// Initialization vector (or IV). This value is required to encrypt the
    /// first block of plaintext data. For RijndaelManaged class IV must be
    /// exactly 16 ASCII characters long.
    /// </param>
    /// <param name="keySize">
    /// Size of encryption key in bits. Allowed values are: 128, 192, and 256.
    /// Longer keys are more secure than shorter keys.
    /// </param>
    /// <returns>
    /// Decrypted string value.
    /// </returns>
    /// <remarks>
    /// Most of the logic in this function is similar to the Encrypt
    /// logic. In order for decryption to work, all parameters of this function
    /// - except cipherText value - must match the corresponding parameters of
    /// the Encrypt function which was called to generate the
    /// ciphertext.
    /// </remarks>
    public static string Decrypt(string   cipherText,
                                 string   passPhrase,
                                 string   saltValue,
                                 string   hashAlgorithm,
                                 int      passwordIterations,
                                 string   initVector,
                                 int      keySize)
    {
        // Convert strings defining encryption key characteristics into byte
        // arrays. Let us assume that strings only contain ASCII codes.
        // If strings include Unicode characters, use Unicode, UTF7, or UTF8
        // encoding.
        byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
        byte[] saltValueBytes  = Encoding.ASCII.GetBytes(saltValue);

        // Convert our ciphertext into a byte array.
        byte[] cipherTextBytes = Convert.FromBase64String(cipherText);

        // First, we must create a password, from which the key will be 
        // derived. This password will be generated from the specified 
        // passphrase and salt value. The password will be created using
        // the specified hash algorithm. Password creation can be done in
        // several iterations.
        PasswordDeriveBytes password = new PasswordDeriveBytes(
                                                        passPhrase, 
                                                        saltValueBytes, 
                                                        hashAlgorithm, 
                                                        passwordIterations);

        // Use the password to generate pseudo-random bytes for the encryption
        // key. Specify the size of the key in bytes (instead of bits).
        byte[] keyBytes = password.GetBytes(keySize / 8);

        // Create uninitialized Rijndael encryption object.
        RijndaelManaged    symmetricKey = new RijndaelManaged();

        // It is reasonable to set encryption mode to Cipher Block Chaining
        // (CBC). Use default options for other symmetric key parameters.
        symmetricKey.Mode = CipherMode.CBC;

        // Generate decryptor from the existing key bytes and initialization 
        // vector. Key size will be defined based on the number of the key 
        // bytes.
        ICryptoTransform decryptor = symmetricKey.CreateDecryptor(
                                                         keyBytes, 
                                                         initVectorBytes);

        // Define memory stream which will be used to hold encrypted data.
        MemoryStream  memoryStream = new MemoryStream(cipherTextBytes);

        // Define cryptographic stream (always use Read mode for encryption).
        CryptoStream  cryptoStream = new CryptoStream(memoryStream, 
                                                      decryptor,
                                                      CryptoStreamMode.Read);

        // Since at this point we don't know what the size of decrypted data
        // will be, allocate the buffer long enough to hold ciphertext;
        // plaintext is never longer than ciphertext.
        byte[] plainTextBytes = new byte[cipherTextBytes.Length];

        // Start decrypting.
        int decryptedByteCount = cryptoStream.Read(plainTextBytes, 
                                                   0, 
                                                   plainTextBytes.Length);

        // Close both streams.
        memoryStream.Close();
        cryptoStream.Close();

        // Convert decrypted data into a string. 
        // Let us assume that the original plaintext string was UTF8-encoded.
        string plainText = Encoding.UTF8.GetString(plainTextBytes, 
                                                   0, 
                                                   decryptedByteCount);

        // Return decrypted string.   
        return plainText;
    }
}

/// <summary>
/// Illustrates the use of RijndaelSimple class to encrypt and decrypt data.
/// </summary>
public class RijndaelSimpleTest
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main(string[] args)
    {
        string   plainText          = "Hello, World!";    // original plaintext

        string   passPhrase         = "Pas5pr@se";        // can be any string
        string   saltValue          = "s@1tValue";        // can be any string
        string   hashAlgorithm      = "SHA1";             // can be "MD5"
        int      passwordIterations = 2;                  // can be any number
        string   initVector         = "@1B2c3D4e5F6g7H8"; // must be 16 bytes
        int      keySize            = 256;                // can be 192 or 128

        Console.WriteLine(String.Format("Plaintext : {0}", plainText));

        string  cipherText = RijndaelSimple.Encrypt(plainText,
                                                    passPhrase,
                                                    saltValue,
                                                    hashAlgorithm,
                                                    passwordIterations,
                                                    initVector,
                                                    keySize);

        Console.WriteLine(String.Format("Encrypted : {0}", cipherText));

        plainText          = RijndaelSimple.Decrypt(cipherText,
                                                    passPhrase,
                                                    saltValue,
                                                    hashAlgorithm,
                                                    passwordIterations,
                                                    initVector,
                                                    keySize);

        Console.WriteLine(String.Format("Decrypted : {0}", plainText));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:43:58.357

没有。

它犯了一个明显的错误，即不理解字符串和八位字节字符串之间的区别。对于盐来说，这可能是可以原谅的，但对于 IV 来说，情况肯定不是这样。

此外，它使用 Microsoft 专有的扩展 PKCS#5 PBKDF1 实现，`PasswordDeriveBytes`而不是`Rfc2898DeriveBytes`. 对于长度超过 20 字节的任何字节（这是 SHA-1 输出大小和 PBKDF1 的定义输出大小），此实现不安全 - 以至于它*可能在输出中重复字节*。任何超过 20 字节的输出都不会在其他框架上重现。甚至 Mono 也将其指定为“无法修复”。

初始化向量应该由安全的随机数生成器生成，而不是作为参数传递。

CBC 模式可以是安全的，但它不提供完整性保护，因此在传输协议上使用时（通常）不安全。

此列表可能并不详尽。

# android - 如何建立一个移动网站 - 基础知识，都是 CSS 吗？

> ID：14369236
> 
> 赞同：2
> 
> 时间：2013-01-16T22:40:25.180
> 
> 标签：android, iphone, html, css, mobile

这可能看起来很愚蠢，但我不确定除了更改 CSS 之外开发移动网站的基本构建块。我发现的所有文章都指向使用媒体查询开发新的 CSS 样式表以使其具有响应性。作为一名网络开发人员，我不禁认为我让自己变得非常困难。我可以澄清一些事情吗？

如果我要构建一个已经存在的桌面网站的移动版本，我是否会创建一个新的 html/php 文件并将其用作核心索引文件而不是原始文件，我的原因是链接的布局/顺序/按钮可能完全不同，所以我不确定如何将相同的代码用于桌面和移动设备。基于浏览器等具有完全不同的文件或不同布局的标准做法是什么？（类似于`<!--[if IE 7]>`，如果不是，它们如何更改顺序和内容？

如果我在 html/php 中使用更改，我如何让手机读取它而不是常规文件/代码？

如果这个问题太模糊，有人可以指点我一篇可靠的文章来回答这方面的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:47:25.733

这是一个巨大的主题，答案并不总是相同的。有时最好在不同的 URL 和所有内容上提供您网站的移动版本，有时您最好制作一个页面并使用 CSS 和 Javascript 使其具有响应性。

如果您计划从根本上改变布局以使您以不同的方式编写 HTML，您将希望将其设置为单独的页面。CSS 可以很好地移动一些东西，但是如果你发现你正在使用 CSS 将你的网站变成一个完全不同的网站，你绝对应该考虑一个单独的页面。

大多数情况下，这只是使用您自己的判断力的问题 - 您的用户不会太在意您使用哪种方法，只要它有效。做任何让您作为开发人员的工作更轻松的事情！

希望这个答案不会太模糊 - 您可以通过谷歌搜索响应式与单独的移动网站来找到更多信息。 [这是关于该主题的一个很好的案例研究](http://mobile.smashingmagazine.com/2012/08/22/separate-mobile-responsive-website-presidential-smackdown/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T22:49:36.433

阅读有关 Twitter Bootstrap 的信息。这是一个 CSS/JavaScript 插件，当应用于网站时，它会重新调整大小和重新组织以在 iPad、iPhone、android、Windows 等中工作。这是我所知道的将基本网站转变为移动设备的最简单和最有效的方法应用。

不确定这是否是您所追求的，但我前段时间从应用程序切换到引导程序并且它运行良好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T00:24:24.973

我想首先说我使用 jQuery Mobile 来构建我的网站。

jQuery Mobile“页面”结构经过优化以支持单个页面或页面内的本地内部链接“页面”。

该模型的目标是允许开发人员使用最佳实践来创建网站——普通链接无需任何特殊配置即可“正常工作”——同时创建标准 HTTP 请求无法实现的丰富的、类似原生的体验。

**移动页面结构**

一个 jQuery Mobile 站点必须以 HTML5 'doctype' 开头，以充分利用该框架的所有功能。（带有不理解 HTML5 的浏览器的旧设备将安全地忽略“doctype”和各种自定义属性。）在“head”中，对 jQuery、jQuery Mobile 和移动主题 CSS 的引用都是开始工作所必需的。

**这是一个 jQuery 页面的示例。**

这就是在 jQuery Mobile 框架中创建页面是多么容易。[www.jquerymobile.com](http://www.jquerymobile.com)上的整个站点包含移动设备所需的所有任务栏、弹出窗口、菜单项等的完整列表。它还允许页面滑动和酷炫的 iphone“滑动”动作。

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Page Title</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>Page content goes here.</p>      
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

</body>
</html> 
```

我强烈推荐给任何人，好像它具有如此多的多功能性和可用性。

问候，

-Epik-

# php - 从函数返回 2 个值

> ID：14369237
> 
> 赞同：1
> 
> 时间：2013-01-16T22:40:25.680
> 
> 标签：php, arrays, return, mediawiki

这是我第一次在stackoverflow上发帖！我是 mediawiki 用户，我正在尝试更改扩展[Autoincrement的](http://www.mediawiki.org/wiki/Extension%3aAutoincrement)[代码](http://svn.wikimedia.org/svnroot/mediawiki/trunk/extensions/Autoincrement/)，这样它就不会输出 1,2,3 而是创建 text1, text2, text3 （文本只是前面的一些单词扩展程序通常会创建的编号）。

我尝试更改 Autoincrement.php 文件，以便

```
function wfGroupHookSwitch( &$parser, &$varCache, &$index, &$ret ) {
    if ( $index === 'group' )
        $ret = ++$this->mCount; // No formatNum() just like url autonumbering

    return true;
} 
```

看起来像

```
function wfGroupHookSwitch( &$parser, &$varCache, &$index, &$ret, &$text ) {
    if ( $index === 'group' )
        $text = 'sometexthere';
        $ret = ++$this->mCount; // No formatNum() just like url autonumbering

    return true;
} 
```

但是尽管我尝试了所有的变化，但似乎没有什么是正确的。我是 php 的完全新手，所以我只是想知道，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T21:53:00.833

无需构建自定义扩展来执行此操作。我建议得到

变量： [http ://www.mediawiki.org/wiki/Extension:Variables](http://www.mediawiki.org/wiki/Extension:Variables)

和 ParserFunctions： [http ://www.mediawiki.org/wiki/Help:Extension:ParserFunctions](http://www.mediawiki.org/wiki/Help:Extension:ParserFunctions)

使用以下内容创建模板：自动增量：

```
<includeonly>{{#if: {{#var:AutoincrementVariable}}|{{#vardefineecho:AutoincrementVariable|{{#expr:{{#var:AutoincrementVariable}} + 1}} }}|{{#vardefineecho:AutoincrementVariable|1}} }}</includeonly> 
```

重复模板调用的示例用法和输出应如下所示：

```
SomeText{{Autoincrement}}
SomeText{{Autoincrement}}
SomeText{{Autoincrement}} 
```

生产

```
SomeText1
SomeText2
SomeText3 
```

# php - 文件上传返回“未定义索引”错误

> ID：14369239
> 
> 赞同：2
> 
> 时间：2013-01-16T22:40:29.897
> 
> 标签：php, file-upload

我正在尝试获取上传文件的错误，但出现以下错误：

```
if(isset($_FILES['fichier']) && $_FILES['fichier']['error'] == 0)
{
        //do stuff here, no problem
}

    //get an error on this line "Notice: Undefined index: fichier in .."
elseif($_FILES['fichier']['error'] != 0)
{

}
else
{
    echo 'no file selected or an error occured with the page.';
} 
```

我需要获取错误代码（1 到 8）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:44:23.567

您的布尔逻辑不正确，导致在`elseif`没有文件时调用该块。尝试以下操作：

```
if (isset($_FILES['fichier'])) {

    // we know we have a file; do our error checking.
    if ($_FILES['fichier']['error'] == 0) {
        // do stuff here, no problem
    } else {
        // handle the error
    }
} else {
    echo 'no file selected or an error occured with the page.';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:45:35.127

检查是否在表单发件人中发送带有 enctype='multipart/form-data' 的文件

# java - 在 saveInstanceState 包中存储大数据结构

> ID：14369245
> 
> 赞同：1
> 
> 时间：2013-01-16T22:40:42.330
> 
> 标签：java, android, optimization

我读过，如果我们想在活动重新启动（旋转设备）时保存任何数据，我们必须将所有数据存储在 Bundle 中`saveInstanceState()`。

但是，如果我们想将大数据结构保存在捆绑包中 - 它会冻结系统并增加内存使用量。

例如：
我有一个`HashMap`50,000,000 个元素。读数来自 SD 卡。所以，如果我保存`HashMap`到`Bundle`- 它会在很长一段时间内冻结设备的旋转。

有没有一种方法，我们可以在不存储的情况下保存数据`Bundle`？（例如保存指针`HashMap`？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:54:45.613

你绝对不应该这样做。您应该手动处理方向更改或将此数据保留在您的活动之外，例如在服务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:01:29.753

首先，在Java中没有指针，只有引用。唯一的一个`HashMap`不是问题，问题在于保存它包含的 50,000,000 个元素。如果你真的想这样做，你可以优化文件的读/写，检查[这个](http://nadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly)。

但是你不应该优化它。正如唐纳德·高德纳 (Donald Knuth) 所说：

> 过早的优化是万恶之源。

您应该编写处理屏幕旋转的代码，而不必在旋转期间保存和加载如此大的数据。

# android - 如何根据微调器选择更改 imageview 图像？

> ID：14369246
> 
> 赞同：0
> 
> 时间：2013-01-16T22:40:43.513
> 
> 标签：android, image, imageview, spinner

我正在尝试根据微调器选择更改图像视图中的图像，在 stackoverflow 和互联网上寻找类似的东西，但没有任何效果！为什么？任何帮助表示赞赏！这是我的 .java 源代码：

公共类 ChordsActivity 扩展 Activity 实现 OnItemSelectedListener{ Spinner spinner;

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_chords);
    spinner = (Spinner) findViewById(R.id.SpinnerAkordi);
    spinner.setOnItemSelectedListener(this);

    ImageView chord_img=(ImageView) findViewById(R.id.image);
    chord_img.setImageResource(R.drawable.c_dur);
}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    int position = spinner.getSelectedItemPosition ();
    ImageView chord_img= new ImageView(this); //delete this and it will work
    switch (position){
    case 0:
        new AlertDialog.Builder(this).setTitle("Odabrali ste akord:").setMessage("C").setNeutralButton("Close", null).show();
        chord_img.setImageResource(R.drawable.c_dur);
        break;
    case 1:
        new AlertDialog.Builder(this).setTitle("Odabrali ste akord:").setMessage("D").setNeutralButton("Close", null).show();
        chord_img.setImageResource(R.drawable.e_dur);
        break;
    case 2:
    new AlertDialog.Builder(this).setTitle("Odabrali ste akord:").setMessage("E").setNeutralButton("Close", null).show();
        chord_img.setImageResource(R.drawable.e_dur);
        break;
    }
}

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

}

和 .xml 的 imageview 部分：

答：删除：ImageView chord_img= new ImageView(this); 这是因为我已经有一个 imageview 并且通过这条线我创建了不可见的新 imageview。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:10:40.440

如果您将局部变量`chord_img`提升为字段，它可能会有所帮助。即：

```
private ImageView chord_img;

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    int position = spinner.getSelectedItemPosition ();
    chord_img = new ImageView(this);
    switch (position){
    case 0:
        new AlertDialog.Builder(this).setTitle("Odabrali ste akord:").setMessage("C").setNeutralButton("Close", null).show();
        chord_img.setImageResource(R.drawable.c_dur);
        break;
    case 1:
        new AlertDialog.Builder(this).setTitle("Odabrali ste akord:").setMessage("D").setNeutralButton("Close", null).show();
        chord_img.setImageResource(R.drawable.e_dur);
        break;
    case 2:
    new AlertDialog.Builder(this).setTitle("Odabrali ste akord:").setMessage("E").setNeutralButton("Close", null).show();
        chord_img.setImageResource(R.drawable.e_dur);
        break;
    }
} 
```

# ios - 检测 iOS 中的旋转变化

> ID：14369251
> 
> 赞同：17
> 
> 时间：2013-01-16T22:41:08.980
> 
> 标签：ios, interface, nsnotificationcenter, screen-rotation, autorotate

我正在制作一个 iOS 应用程序，它需要在旋转时进行一些界面重新排列。我试图通过实现来检测这一点`- (void)orientationChanged:(NSNotification *)note`，但这会通知我设备何时面朝上或面朝下。

我想要一种在界面改变方向时得到通知的方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-16T22:47:24.353

有几种方法可以做到这一点，你可以在[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中找到它们：

```
– willRotateToInterfaceOrientation:duration:
– willAnimateRotationToInterfaceOrientation:duration:
– didRotateFromInterfaceOrientation: 
```

您也可以在`viewWillLayoutSubviews`方法中执行此操作，但要小心，因为它也会在屏幕外观上调用，并且每当您添加子视图时都会调用它。

**编辑：**

现已弃用解决方案，请参阅已接受的答案。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-05-30T18:50:18.343

从 iOS 8 开始，上述方法已被弃用，处理和检测设备旋转的正确方法是：

[-(void) viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id)coordinator;](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIContentContainer_Ref/index.html#//apple_ref/occ/intfm/UIContentContainer/viewWillTransitionToSize:withTransitionCoordinator:)

要检测设备方向，您应该（根据文档）：*调用[statusBarOrientation](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/index.html#//apple_ref/occ/instm/UIApplication/statusBarOrientation)方法来确定设备方向*

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-12T08:37:02.173

从 iOS 8 开始，这是正确的方法。

```
override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)

    coordinator.animate(alongsideTransition: { context in
        // This is called during the animation
    }, completion: { context in
        // This is called after the rotation is finished. Equal to deprecated `didRotate`
    })
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-09T21:11:08.237

斯威夫特 3：

```
override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {

} 
```

# video - 带有控件的网络摄像头流媒体资源

> ID：14369252
> 
> 赞同：0
> 
> 时间：2013-01-16T22:41:13.373
> 
> 标签：video, streaming, embed, webcam

我正在寻找一个正确的项目，该项目需要流式传输 2 个网络摄像头并将流嵌入到具有平移/倾斜/缩放功能的网页上。

我知道其中大部分将与相机类型和相机硬件有关，但我不确定在流式传输和嵌入控件方面的发展方向。不知道我是否需要查看 red5 或 flash 流服务器，是否需要查看一些自定义开发以使控件映射通过，以便最终用户可以控制相机的平移/倾斜/缩放功能.

如果有人有任何见解，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:45:32.570

我在 Linux 上使用[运动](http://www.lavrsen.dk/foswiki/bin/view/Motion/WebHome)软件，它会自动运行一个网络服务器，您可以在其中查看摄像机，并且还具有仅记录检测到运动的视频时段的功能（因此得名）。这有助于节省磁盘空间。

我不确定它是否对平移/倾斜有很好的支持。

[对于超级用户](https://superuser.com/)站点来说，这可能是一个更好的问题。

# ruby-on-rails - 使用 jQuery/Coffee AJAX Rails 进行实时表单验证

> ID：14369255
> 
> 赞同：1
> 
> 时间：2013-01-16T22:41:26.523
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery, coffeescript

好的，所以我有这个问题......而且我已经有好几个星期了。我正在做一个学校项目，我应该使用 Ruby on rails 和 ajax (jQuery/Coffee) 进行实时表单验证。我用谷歌搜索了一下，找到了很多插件，但没有一个有用的教程。我有一些看起来合法的代码，但我需要帮助来使这些代码验证表单，检查数据库中的电子邮件、用户名等。它用于注册页面，所以我想你明白了。

```
$("#new_user").live "ajax:beforeSend", (event, xhr, status) ->
        form = $(this)
        form.validate {

        # Validations goes here, but how do I write it?

        }

        false unless form.valid() 
```

所以我想我想写一个控制器来通过这个jQuery处理验证。我对 Rails 和 Ajax 都很陌生，所以请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:03:48.427

你的学校项目现在可能要到期了，但无论如何都要进行。

查看[https://github.com/bcardarella/client_side_validations](https://github.com/bcardarella/client_side_validations)。

如果您使用它，则无需担心编写 javascript 来验证您的表单。您只需要担心在模型中编写正确的验证。

这可能会帮助您入门[http://railscasts.com/episodes/263-client-side-validations](http://railscasts.com/episodes/263-client-side-validations)。

此外，如果您是 Rails 新手，您应该知道对于大多数常见问题和许多不那么常见的问题，有一个 gem 形式的解决方案。

因此，如果您需要编写登录/注册功能，您可能需要查看[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)。其中还有一个 railscast [http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)。

最后是 wiki 页面，它解释了如何制作`client_side_validations`和`simple_form`协同工作[https://github.com/bcardarella/client_side_validations/wiki/Using-Devise](https://github.com/bcardarella/client_side_validations/wiki/Using-Devise)。

希望这可以帮助。

# c# - 图形不在位图上绘制

> ID：14369256
> 
> 赞同：0
> 
> 时间：2013-01-16T22:41:31.373
> 
> 标签：c#, wpf, graphics, bitmap, drawing

我正在编写一个程序，将一些`Kinect`数据呈现为小位图（记录的手势预览\帧预览）。我有一个类将映射的 Kinect 数据存储到屏幕 (X = [0; 1], Y = [0, 1]); 现在我想在小位图上绘制数据并显示在我的表单上。问题是“创建”位图......它是空的（透明的）。

这是我的映射数据类：

```
public class MappedJointData
{
    public JointType JointType { get; set; }
    public PointF MappedPosition { get; set; }
    public int Depth { get; set; }
    public JointTrackingState JointTrackingState { get; set; }
    public bool Seated { get; set; }
} 
```

然后我写了一个扩展类，它应该从数据中返回位图：

```
public static Bitmap ToBitmap(this RecordedSkeletonFrame frame, int width, int height)
{
    return DrawBonesAndJoints(frame.MappedJointData, width, height);
}

private static Bitmap DrawBonesAndJoints(List<MappedJointData> mappedJointData, int width, int height)
{
    Bitmap b = new Bitmap(width, height);
    using (Graphics g = Graphics.FromImage(b))
    {
        g.CompositingQuality = CompositingQuality.HighQuality;
        g.Clear(Color.Black);

        // (...)
        g.DrawEllipse(new Pen(drawBrush), joint.MappedPosition.X, joint.MappedPosition.Y, 3, 3);

        // (...)
        g.DrawLine(drawPen, joint0.MappedPosition.X, joint0.MappedPosition.Y, joint1.MappedPosition.X, joint1.MappedPosition.Y);
    }
    return b;
} 
```

成功录制后，我想浏览映射数据并绘制位图：

```
foreach (RecordedSkeletonFrame frame in _gestureRecorder.Frames)
{
    FrameImages.Add(frame.ToBitmap(100, 75));
} 
```

`FrameImages`是我`ObservableCollection<Bitmap>`绑定到的`ListView`（绑定应该可以工作，因为我使用一些已经渲染的图像对其进行了测试）。

为什么它不起作用？我试图在网络上找到一些东西，但是人们完全像我一样这样做。我不知道问题出在哪里。即使我渲染的数据很糟糕（但我不是设置了断点并检查了 and 的值`X`）`Y`，`g.Clear(Color.Black);`应该让我的位图变黑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:21:31.720

我确定您的问题不在粘贴的代码部分。不知何故，您会丢失/覆盖 FrameImages 或类似的数据。使用和图形部分肯定可以工作。

# javascript - 替换字符串中的撇号

> ID：14369259
> 
> 赞同：0
> 
> 时间：2013-01-16T22:42:36.080
> 
> 标签：javascript

```
var ScanLastName = "212227_O'Connell".replace(/'/g, '');

function btnScan_onclick(divToRefresh) 
{
    ScanDoc1 = $('input.scandocument').val();
    ScanDoc = ScanDoc1.replace(/\s/g, '');
    ScanDocFileName = ScanDoc+ScanLastName;
} 
```

我没有看到问题。我收到 btnScan_onclick 未定义的错误。

我正在尝试删除空格和撇号。

该代码一直有效，直到我添加了删除撇号的代码。

# ios - 逐步“入门”Google Maps SDK for iOS 问题

> ID：14369261
> 
> 赞同：0
> 
> 时间：2013-01-16T22:42:43.523
> 
> 标签：ios, iphone, google-maps, google-maps-api-3

事先谢谢你。

这是我的问题：

我有最新版本的 Xcode（我相信是 4.5.2）。我遵循了入门 google maps api sdk for iphone 教程，从未做过多或少。我使用了谷歌教程提供的示例代码，按照他们的解释更改了视图控制器名称，按照他们的建议创建了禁用“使用故事板”的项目，换句话说，我完全按照教程所说的做了，但我的应用程序从不显示地图，只是黑色视图，我认为它甚至没有显示视图，并且控制台显示以下内容（警告？错误？）：

2013-01-16 16:43:45.987 MapTest[9147:c07] 应用程序窗口应在应用程序启动结束时有一个根视图控制器

我不知道为什么会发生这种情况。有趣的是，我删除了 google maps api ios sdk 教程示例代码并且该应用程序正常工作，它显示了通常在您创建新应用程序时会显示的空白视图。您的帮助将不胜感激（对不起我的英语，它可能很烂）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:35:23.533

这是因为，从 iOS 5 及更高版本开始，应用程序的窗口需要有一个根视图控制器才能正确处理屏幕旋转。从您的 App Delegate 中，您应该替换

```
[window addSubview:viewController.view]; 
```

到

```
[self.window setRootViewController:viewController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:58:30.333

您必须启用“Google Maps SDK for iOS”。在您的 Google 帐户控制台“服务”选项卡中。试试这个 ：）

# javascript - anonym.to 是如何工作的？

> ID：14369266
> 
> 赞同：1
> 
> 时间：2013-01-16T22:43:08.513
> 
> 标签：javascript, redirect, http-referer

该网站如何设法使引荐来源为空白。所有其他引用者消隐服务似乎只是掩盖了引用者。然而，这个设法让谷歌分析相信用户在网站上输入。

我似乎无法弄清楚他们是如何做到的。

例如：[http ://www.anonym.to/http://google.com](http://www.anonym.to/http://google.com)

我什至没有在他们的页面上看到重定向它的 javascript 代码。我认为这可能是他们使用谷歌分析来触发一些 javascript 代码的某种技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:45:13.833

`<meta http-equiv="refresh" content="1; URL=http://google.com">`

它不会使引用者空白。它将其更改为`anonym.to`URL。

# c - 从鼠标位置计算索引

> ID：14369271
> 
> 赞同：-1
> 
> 时间：2013-01-16T22:43:20.123
> 
> 标签：c, winapi

我有这个板（0,0 是左上角）：

![](../Images/18a09850add17c97d67f57183640d634.png)

假设一个块是 LABEL_SIZE 高度和宽度。让我们说红点和蓝点是鼠标点击。我有这个板的二维数组，我想访问我用鼠标单击的单元格（蓝点或红点）。所以它看起来像简单的逻辑，只计算 ptCursor.x / LABEL_SIZE 来访问列，而 ptCursor.y / LABEL_SIZE 来访问行。但是当我尝试这个时，它会寻址到另一个单元格（比如几英里之外）。

怎么了？

```
#define LABEL_SIZE 40
#define XLOCATION  ptCursor.x / LABEL_SIZE
#define YLOCATION  ptCursor.y / LABEL_SIZE

case WM_LBUTTONDOWN:
        ptCursor.x = LOWORD(lParam);
        ptCursor.y = HIWORD(lParam);
        return 0;

case WM_KEYDOWN:
    if (wParam >= VK_NUMPAD0 && wParam <= VK_NUMPAD9)
    {
        wsprintf(szWndText, szFormat, wParam - VK_NUMPAD0);
        SetWindowText(hwndLabels[XLOCATION][YLOCATION],
                      szWndText);
    }
    return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:52:17.873

阅读： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms645607 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645607(v=vs.85).aspx)

它建议您不要使用`LOWORD`and`HIWORD`宏来提取光标位置。

如果您的系统有多个显示器，坐标可能是负数，这些宏将无法处理它。相反，使用`GET_X_LPARAM`和`GET_Y_LPARAM`。

# javascript - JQplot 格式字符串

> ID：14369274
> 
> 赞同：2
> 
> 时间：2013-01-16T22:43:26.510
> 
> 标签：javascript, jqplot, axis, format-string

我可以帮忙格式化 Y 轴上带有“%”符号的字符串吗？

这是'$'的代码：

```
tickOptions: {formatString: '$%d'} 
```

如何格式化字符串以使用“%”符号，因为“%”符号用作“关键字”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T01:37:16.340

Try something like this:

```
tickFormatter = function (format, val) { 
return val+"%";
} 
```

And add this option to the plot:

```
axes: {
 yaxis: {
 tickOptions: {
  formatter: tickFormatter
 }
} 
```

[http://jsfiddle.net/pabloker/9ZrKA/3/](http://jsfiddle.net/pabloker/9ZrKA/3/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T10:06:17.870

要写一个 '%' 符号，你必须把它加倍：

```
axes:
   {yaxis: 
        {tickOptions: 
               {formatString: '%%%d'}
        }
   } 
```

`%%%d`如果您的值为 10，将写入“%10”。同样，`%d%%`如果您的值再次为 10，将写入“10%”。因此，您只需将“$”符号替换为“%%”。

安东尼。

# jquery-mobile - jquery mobile 1.3 beta 侧面板可滚动内容

> ID：14369278
> 
> 赞同：1
> 
> 时间：2013-01-16T22:43:42.333
> 
> 标签：jquery-mobile

如果有很多项目，如何使侧面板内容可滚动，而不滚动主页上的内容（在 JQM 1.3 Beta 中）？我正在尝试为在桌面和移动浏览器上运行的应用程序实现此功能。到处寻找，但找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:45:43.687

```
.ui-panel-inner .ui-content myElement {
    overflow: scroll;
    -webkit-overflow-scrolling: touch;
} 
```

如果您希望整个侧面板可滚动，您可以使选择器更特定于给定元素，或者只保留“ui-panel-inner”。

注意：“-webkit-overflow-scrolling: touch”将本机惯性滚动添加到溢出中，如果您想要的只是滚动功能，则不需要。这应该适用于 webkit 浏览器；移动 Safari 和 chrome。但我只在移动 safari 上测试过。它不能在移动 IE 上运行，但我还没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:22:52.813

我在面板内创建了一个可滚动的 div，但这在没有两指滚动的情况下在 iOS4 及更低版本上不起作用（iOS 中 div 内的 div 问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:29:38.243

请访问以下内容以找到上述问题的答案：

JQM 1.3 面板 + iscrollview + 动态加载 [http://forum.jquery.com/topic/jqm-1-3-panel-iscrollview-dynamically-loaded-pages](http://forum.jquery.com/topic/jqm-1-3-panel-iscrollview-dynamically-loaded-pages)

jquery-mobile-iscrollview [https://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

# adobe-indesign - 如何在不复制/粘贴的情况下将多个 XML 文件导入到一个 inDesign 文档中？

> ID：14369280
> 
> 赞同：0
> 
> 时间：2013-01-16T22:43:52.367
> 
> 标签：adobe-indesign

我使用 InDesign CS6，我有几个结构相同的 XML 文件。只是数据不同。我在合并模式下创建了一个带有一些标记占位符框架的 Indesign 布局，用于自动布局。今天，我必须为每个 XML 文件创建一个新的 InDesign 文档来导入 XML。一切正常。然后为了将所有 Indesign 布局一个接一个地变成一个 Indesign 布局，我必须使用复制/粘贴功能。我的意思是，例如，将所有文档的内容复制到第一个。或者将其他文档的页面添加到第一个页面，然后删除每个页面之间的空格。

所以我的问题是：如何在没有复制/粘贴功能的情况下重复这个过程，知道 XML 文件的数量可能是未知的。

非常感谢您的回答。

# r - 执行 glm 时，“性别”变量以 value(M) 为后缀

> ID：14369284
> 
> 赞同：1
> 
> 时间：2013-01-16T22:44:17.950
> 
> 标签：r, glm

当我在 R 中运行“glm”时，“性别”变量以 M 为后缀（代表男性）。它有什么特殊含义还是我的代码有问题

```
>as.formula('response ~ gender + age + var1 +var2+var3+var4')
  response ~ gender + age + var1 + var2 + var3 + var4
>model <- try(glm(formula = fmla,   na.action=na.exclude , data = tmpData));
>summary(model) 
>    

                           Estimate Std. Error t value Pr(>|t|)    
(Intercept)                   27.5192512  0.7215193  38.141  < 2e-16 ***
genderM                       -3.1572328  0.3952508  -7.988 1.87e-15 ***
age                            0.0078203  0.0139269   0.562   0.5745    
var1                          -0.0007449  0.0004484  -1.661   0.0968 .  
var2                           0.0284026  0.0017356  16.365  < 2e-16 ***
var3                           0.0007293  0.0005172   1.410   0.1586    
var4                           0.0854644  0.0418632   2.042   0.0413 * 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:59:50.900

那是因为您已将性别定义为一个因素（检查 的输出`class(gender)`）。`glm()`将除参考水平（ 中的第一个`levels(gender)`）之外的因子的每个水平视为模型中的虚拟二分变量（0 或 1），并为每个水平输出回归系数。

如果您的因子有 n 个水平，那么您将有 n-1 个虚拟变量。如果你的因子只有两个水平，就像你的那样，你只会得到一个虚拟变量，系数与你有一个数字 0 或 1 变量一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:12:18.490

用于线性模型中每个变量的对比系数由 contrasts 属性确定，您可以使用该`contrasts()`函数查看和更改该属性，例如：

```
require(reshape)
mdata <- melt(UCBAdmissions)
contrasts(mdata$Gender)
glm(mdata$value ~ mdata$Gender + mdata$Admit + mdata$Dept)
contrasts(mdata$Gender) <- c(-0.5, 0.5) # Use "deviation coding" instead
glm(mdata$value ~ mdata$Gender + mdata$Admit + mdata$Dept) 
```

无序因子的默认对比编码是处理对比/虚拟编码。如果您不确定这些类型的对比编码之间的差异，您可能需要查看[stats.stackexchange.com](http://www.stats.stackexchange.com)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:57:59.570

就好像你有一个虚拟的 0-1 变量，其中 1 代表`gender`存在`M`（大概 0 代表`F`）。因此，您是说考虑到其他变量，具有该值的案例的响应比具有`gender`该值`M` 的案例的响应低约 3 `F`。

试试这个例子

```
require(reshape)
mdata <- melt(UCBAdmissions) 
glm(mdata$value ~ mdata$Gender + mdata$Admit + mdata$Dept) 
```

你会得到类似的东西。和其他部门的值`mdata$DeptB` 与 的基本位置不同`DeptA`。

# android - android虚拟设备管理器打不开

> ID：14369286
> 
> 赞同：0
> 
> 时间：2013-01-16T22:44:25.517
> 
> 标签：android, sdk

我正在创建一个新的 AVD，一旦我在设置 required 后按 OK，AVD 窗口停止响应，我重新启动 eclipse 并重新进入虚拟 android 设备管理器将无法打开，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:19:03.587

尝试转到 avd 管理器 --> 选择当前的 avd --> 单击删除，然后使用相同的属性创建新的并重新启动它。

# javascript - document.getElementById('inner').innerHTML="message"; 给我一个 IE 错误

> ID：14369287
> 
> 赞同：0
> 
> 时间：2013-01-16T22:44:31.890
> 
> 标签：javascript, internet-explorer

这是java脚本

```
window.onload="test";

  function test() {

     document.getElementById('inner').innerHTML="message";

  } 
```

这是我在 IE 中加载的 html 页面

```
<h1 class="serif">FDM Markets Trading Platform</h1>

<div class="layout" />  
 <div class="center">  
  <p class="paragraph">Login</p>
  <form name="anyForm">
   <span class="formlabel1">Username</span><input type="text" name="anyName" onKeyUp="Complete(this, event)" /></br>
   </br>
   <span class="formlabel2">Password</span><input type="text" name="password_box"></br>
   </br>
  </form>
  <span id="clock">&nbsp;</span>
 </div>
</div>

<div id="outer">

<div id="inner"></div>

</div> 
```

当我加载页面时，“消息”没有出现在网页中，并且我收到错误消息，指出对象为空或未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:46:56.930

您的 onload 处理程序是错误的。应该是这样的：

```
 function test() {

     document.getElementById('inner').innerHTML="message";

  }
  window.onload = test; 
```

您将 javascript 函数引用传递给`.onload`，而不是字符串。

# css - 如何通过 PhoneGap 制作基于设备宽高的 html 和 css

> ID：14369288
> 
> 赞同：1
> 
> 时间：2013-01-16T22:44:32.543
> 
> 标签：css, html, cordova, responsive-design

我刚刚开始通过 PhoneGap 设计一个带有 Html、Css、Js 的移动应用程序，我的第一个目标是确保所有内容都完美地适合任何给定的手机。所以我想问你们我的方法是否正确，我应该如何实施。

我的想法是通过 JavaScript 获取设备的宽度和高度，我认为有一些 PhoneGap 函数可以返回这些值。然后我将使用这个值来设置 html 宽度和高度（我认为我应该通过 onBodyLoad() 函数执行此操作，如果有错误请纠正我），这样我将 html 正文设置为设备屏幕大小，然后我通过 % 而不是像素来定位所有其他元素。

我还在一些随机搜索中看到了这一行：

```
<meta name="viewport" id="viewport"
 content="width=device-width, height=device-height,
 initial-scale=1.0, maximum-scale=1.0,
 user-scalable=no;" /> 
```

这看起来也应该有效，但我不确定它是否有效，以及它是如何工作的。Soo ...你们认为最好的方法是什么？也许还有其他一些我不知道的？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:18:18.680

根据您使用的元素等，您应该能够只将宽度设置为百分比，不需要任何 javascript 或类似的东西。

您发布的视口代码块是非常标准的 Phonegap 代码，它只是让您无法进入页面等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:46:20.730

[这](http://cordova.codeplex.com/)是一个免费的 PhoneGap 框架。它有一个 div#body 作为应用程序的外壳，#body 具有作为手机屏幕的全宽和全高。一切都包含在#div 中。

# php - 如何使用登录使用 2 文件设置会话？首页 > 登录 > 首页

> ID：14369295
> 
> 赞同：1
> 
> 时间：2013-01-16T22:45:18.400
> 
> 标签：php

如何使用登录使用 2 文件设置会话？主页 > 登录 > 主页
我的代码做错了吗？谢谢。

主页.php

```
<?php
    session_start();
?>
<!DOCTYPE html>
<html><head><title></title></head>
<body>
<?php
    if($_SESSION['account']){
        print"login successful";
        //do something
    }
    else{
        print"login invalid";
        print"
            <form method=\"post\" action=\"login.php\">
                account: <input type=\"text\" name=\"account\"><br>
                password: <input type=\"text\" name=\"password\"><br>
                <input type=\"submit\" value=\"login\">
            </form>
        ";
    }
?>
</body>
</html> 
```

登录.php

```
$account = mysql_escape_string($_POST['account']);
$password = mysql_real_escape_string($_POST['password']);
if($account == 'myaccount' && $password == 'mypassword'){
    session_start();
    $_SESSION['account'] = $account;
    $_SESSION['password'];
    print"<meta http-equiv=\"refresh\" content=\"0;url=home.php\">";
    header("location: home.php");
    exit();
}
else{
    print"<meta http-equiv=\"refresh\" content=\"0;url=home.php\">";
    header("location: home.php");
    exit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:47:36.400

您没有在`$_SESSION`阵列上存储任何数据。

尝试：

```
$_SESSION['account'] = true; // Or something else that evaluates to true and is relevant.
$_SESSION['password'] = 'please, anything but your password plaintext. think of the children'; 
```

这样，当您在 home.php 上测试登录操作的结果时：

```
if($_SESSION['account']){
    print"login successful";
    //do something
} 
```

你可以满足条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:49:56.740

根据您的脚本：

```
$_SESSION['account'];
$_SESSION['password']; 
```

应该是这样的：

```
$_SESSION['account'] = $account;
$_SESSION['password'] = $password; 
```

但请注意，请不要在生产站点中使用它。这将无法验证用户。

您不能将会话用作登录一个人并使他们保持登录的唯一方法。会话很容易被劫持。一个好的用户认证系统将：

加密密码

在数据库中存储用户信息

收集会话信息并设置它

现在为了让用户保持登录状态，每次他们访问新页面时，您将使用 seesion id、密码、用户 ip 和会话变量来验证用户并允许他们查看页面。基本上你会创建一个函数或一个类来以安全的方式处理它。

现在对于那些刚刚开始学习 php 的人来说，已经有很多很棒的登录脚本了。任何对其用户进行身份验证的好网站，都从一个非常好的用户身份验证系统开始，然后在其中构建一个网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:53:23.460

换行：

```
if($_SESSION['account']){
  print"login successful";
} 
```

经过

```
if(isset($_SESSION['account']) && $_SESSION['account'] == true){
     print"login successful";
} 
```

# java - 如何允许 JSONWriter 接受 XML 格式的密钥？

> ID：14369297
> 
> 赞同：0
> 
> 时间：2013-01-16T22:45:22.630
> 
> 标签：java, xml, json

我在 Java 中使用 org.json.JSONWriter。我需要某个键的 XML 值。

```
StringWriter writer = new java.io.StringWriter();
JSONWriter w = new JSONWriter(writer);
w.object()
    .key("data").value(xmlContents)
.endObject();
System.out.println(writer.toString()); 
```

`xmlContents`在有效 XML 文件内容的位置运行该代码。**生成的 JSONObject 最终转义了我的 XML 的所有结束标记。**XML 最初是

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?><my_xml><version>2.0</version><date>2013-01-16T20:44:31Z</date></my_xml> 
```

并变成

```
{"data":"<?xml version=\"1.0\" encoding=\"UTF-8\"?><my_xml><version>2.0<\/version><date>2013-01-16T20:44:31Z<\/date><\/my_xml>"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:45:14.147

不是 100% 确定，但请尝试`setHtmlSafe()`用于您的 JasonWriter..

来自 JavaDocs：setHtmlSafe()

配置此编写器以发出可安全地直接包含在 HTML 和 XML 文档中的 JSON。这会在将 HTML 字符 <、>、& 和 = 写入流之前对其进行转义。如果没有此设置，您的 XML/HTML 编码器应将这些字符替换为相应的转义序列。

# mysql - MySql 有条件地升序排序

> ID：14369298
> 
> 赞同：0
> 
> 时间：2013-01-16T22:45:23.690
> 
> 标签：mysql, sorting

尝试不断地从最低到最高对行进行排序，或者重复使用 MySql。例如：如果一列具有以下值：1,3,2,4,2,1,4,3,5，那么它应该像这样结束 1,2,3,4,5,1,2, 3,4。所以它从最低到最高，但尝试多次从最低到最高排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:52:20.490

没有订单两次只是这个

```
 ORDER BY column ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:12:30.067

让我们假设 PK 是一个唯一的整数。考虑以下...

```
CREATE TABLE seq(id INT NOT NULL PRIMARY KEY,val INT);

INSERT INTO seq VALUES (8,1),(4,2),(1,3),(2,4),(7,0),(6,1),(3,2),(5,5);

SELECT * FROM seq ORDER BY val;
+----+------+
| id | val  |
+----+------+
|  7 |    0 |
|  6 |    1 |
|  8 |    1 |
|  3 |    2 |
|  4 |    2 |
|  1 |    3 |
|  2 |    4 |
|  5 |    5 |
+----+------+

SELECT x.*
     , COUNT(*) rank 
  FROM seq x 
  JOIN seq y 
    ON y.val = x.val 
   AND y.id <= x.id 
 GROUP 
    BY id 
 ORDER 
    BY rank
     , val;
+----+------+------+
| id | val  | rank |
+----+------+------+
|  7 |    0 |    1 |
|  6 |    1 |    1 |
|  3 |    2 |    1 |
|  1 |    3 |    1 |
|  2 |    4 |    1 |
|  5 |    5 |    1 |
|  8 |    1 |    2 |
|  4 |    2 |    2 |
+----+------+------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:09:48.630

对于大型集合，半联接操作（草莓答案中的方法）可能会创建一个笨拙的结果集。（再说一次，MySQL 可能有一些优化。）

MySQL 中可用的另一种选择是使用“用户变量”，如下所示：

```
SELECT r.mycol
  FROM ( SELECT IF(q.mycol=@prev,@seq := @seq + 1,@seq := 1) AS seq
              , @prev := q.mycol AS mycol
           FROM mytable q
           JOIN (SELECT @prev := NULL, @seq := NULL) p
          ORDER BY q.mycol
       ) r
 ORDER BY r.seq, r.mycol 
```

让我解压一下，解释一下它在做什么，从内部查询开始（内联视图别名为`r`.）。我们告诉 MySQL 获取`mycol`包含要排序的值的列 ( )，例如 1,3,2 ,4,2,1,4,3,5 我们告诉 MySQL 按升序排列：1,1,2,2,3,3,4,4,5。

现在的“技巧”是使用 MySQL 用户变量，以便我们可以将`mycol`当前行的`mycol`值与前一行的值进行比较，然后我们使用它来分配一个升序值，从 1..n 开始独特的价值。

使用该结果集，我们可以告诉 MySQL 首先按分配的序列值排序，然后按 from 的值排序`mycol`。

* * *

如果每一行都有一个唯一的 id，那么可以使用相关的子查询来获得等效的结果（尽管这种方法不太可能在大型集合上执行得一样好）

```
 SELECT r.mycol
   FROM mytable r
  ORDER
     BY ( SELECT COUNT(1)
            FROM mytable q
           WHERE q.mycol = r.mycol
             AND q.id <= r.id
        )
      , r.mycol 
```

这是测试用例的设置：

```
CREATE TABLE mytable (id INT, mycol INT);
INSERT INTO mytable (id, mycol) VALUES 
(1,1),(2,3),(3,2),(4,4),(5,2),(6,1),(7,4),(8,3),(9,5); 
```

# android - Android SDK LogCat 输出未正确记录

> ID：14369300
> 
> 赞同：0
> 
> 时间：2013-01-16T22:45:35.217
> 
> 标签：android, eclipse, logging, logcat

我最近执行了一个更新到我的三星 Galaxy 10.1 的软件，现在我没有在 LogCat 中获得清晰/有用的日志数据，例如没有级别、时间、PID、应用程序或标签值，并且我没有获得任何调试数据。我的调试代码都没有输出。

还有其他人遇到这个问题吗？我需要在某处设置什么吗？

谢谢

样本输出

```
?:??: W/?(?): [ 01-16 13:26:08.115   354:  394 D/STATUSBAR-StatusBarManagerService ]
?:??: W/?(?): manageDisableList what=0x0 pkg=android
?:??: W/?(?): [ 01-16 13:26:08.122   112:  310 I/AudioHardwareTinyALSA ]
?:??: W/?(?): AudioStreamOutALSA::write setDevice
?:??: W/?(?): [ 01-16 13:26:08.122   112:  310 D/AudioHardwareTinyALSA ]
?:??: W/?(?): OutALSA::setDevice: mode = 0, newDevice=0x2, currentDevice=0x2 ,force= 0
?:??: W/?(?): [ 01-16 13:26:08.122   112:  310 D/AudioHardwareTinyALSA ]
?:??: W/?(?): OutALSA::setDevice: mDevice 0x2, newDevice = 0x2
?:??: W/?(?): [ 01-16 13:26:08.122   112:  310 D/AudioHardwareTinyALSA ]
?:??: W/?(?): setOutputVolume 
```

设备详情 型号 GT-P5100 Android 版本 4.1.1 内核版本 3.0.31-691336

Eclipse 版本：3.7.2 构建 ID：M20120208-0800

Android开发工具包版本：18.0.0.v201203301601-306762

Dalvik 调试监控服务版本：18.0.0.v201203301601-306762

# saml - 用于断言的 SAML2.0 格式化属性 - 联合身份

> ID：14369309
> 
> 赞同：0
> 
> 时间：2013-01-16T22:45:50.537
> 
> 标签：saml, saml-2.0, federated-identity, federation, service-provider

我们有一个 SAML 2.0 联合环境（IDP 和 SP）。我想为仅为一个 SP 创建的断言生成自定义属性。因此，我不会修改 IDP 配置。

我们需要创建的 SAML 断言片段：

> < saml:Attribute *NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" >
> Name="urn:oasis:names:tc:SAML:2.0:profiles:attribute:DCE:groups"* >
> 
> > < saml:AttributeValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
> > xsi:type="xsd:string"> *ABCD*

根据 SAML2 规范，我们需要修改 SP 扩展元数据以提供该属性。常量字符串“ABCD”是我们要发送的属性。我已经这样修改了，但没有结果。任何人都可以提供见解吗？

> <属性名称="urn:oasis:names:tc:SAML:2.0:profiles:attribute:DCE:groups">
> 
> > ```
> >  < Value>urn:oasis:names:tc:SAML:2.0:attrname-format:uri|ABCD</Value> 
> > ```
> > 
> > < /属性>

也试过：

> < 属性名称="urn:oasis:names:tc:SAML:2.0:profiles:attribute:DCE:groups" nameformat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri">
> 
> > ```
> >  < Value>"ABCD"</Value> 
> > ```
> > 
> > < /属性>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:23:26.403

查看元数据规范，您似乎使用以下语法来定义您希望 IDP 提供的属性。当然，必须将 IDP 配置为允许将此类属性导出到..

```
<AttributeConsumingService>
   <ServiceName xml:lang="en">youname</ServiceName>
   <RequestedAttribute 
      NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:theformat"
      Name="theAttributeName"
      FriendlyName="humanReadableName"/>
</AttributeConsumingService> 
```

此规范位于第 21 页 [https://www.oasis-open.org/committees/download.php/35391/sstc-saml-metadata-errata-2.0-wd-04-diff.pdf](https://www.oasis-open.org/committees/download.php/35391/sstc-saml-metadata-errata-2.0-wd-04-diff.pdf)

# ruby - 如何使用 DataMapper `NOT LIKE` 子句？

> ID：14369311
> 
> 赞同：4
> 
> 时间：2013-01-16T22:46:09.970
> 
> 标签：ruby, database, orm, sinatra, datamapper

我在 Sinatra 项目中使用 DataMapper。我希望能够`NOT LIKE`在 DataMapper finder 方法中使用 stament，但无法弄清楚如何做到这一点。

人们可能会想象这会起作用：

`@people = People.all(:female => 1, :name.like.not => '%julie%')`

...但 DataMapper 会引发错误。切换 and 的顺序`not`并`like`没有帮助。

有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:00:30.913

根据[文档](http://datamapper.org/docs/find.html)，您可以使用减法来产生`NOT`查询：

```
# Subtraction produces a NOT query
Zoo.all(:state => 'IL') - Zoo.all(:tiger_count.gte => 5)
# in SQL => SELECT * FROM "zoos" WHERE 
#             ("state" = 'IL' AND NOT("tiger_count" >= 5)) 
```

因此，答案似乎是：

```
@people = People.all(:female => 1) - People.all(:name.like => '%julie%') 
```

# batch-file - 如何将文件夹与另一个文件夹合并（其中包含所有内容）

> ID：14369312
> 
> 赞同：0
> 
> 时间：2013-01-16T22:46:09.747
> 
> 标签：batch-file

我想知道如何将一个文件夹复制到批处理文件中的另一个文件夹。我想覆盖同名的东西。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T00:35:54.213

除非我遗漏了什么，否则最简单的方法是使用 xcopy （假设您实际上是指 Windows 上的 .bat 文件）：

```
xcopy <SOURCE> <DEST> /e /d /y /h /r /c 
```

解释这些标志：

```
/e: Include directories and sub directories even if empty
/d: Only copy files which have changed on SOURCE more recently than DEST
/y: Suppress prompts
/h: Also copy hidden and system files
/r: Override read-only files (e.g. ignore Read Only flag)
/c: Continue even if there are errors 
```

资料来源：我的标准备份脚本，每天运行 6 年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:18:50.613

或查看 ROBOCOPY [en.wikipedia.org/wiki/Robocopy](http://en.wikipedia.org/wiki/Robocopy)

# excel - 使用日期计算度量的排除标准

> ID：14369314
> 
> 赞同：0
> 
> 时间：2013-01-16T22:46:14.967
> 
> 标签：excel, powerpivot, dax

我正在处理具有以下表格/关系的 PowerPivot 报告：

事实表：

*   客户
*   问题
*   日期ID

昏暗日期

*   日期ID
*   年
*   四分之一
*   月

我希望创建一个计算度量，即按年和季度计算的 COUNT(Issue)/DISTINCT(Client)，并对其进行过滤以从计算中排除每季度只有 1 个问题的客户。

通过创建两个计算度量值，第一部分非常简单：[Distinct Client] = COUNTROWS(DISTINCT('FactTable'[Client])) [Issues per Client] = 'FactTable'[Count of Issue]/'FactTable'[不同的客户]

数据透视：行标签 = 年，季度值 = [每个客户的问题]

我只是在学习 DAX，所以我不知道该怎么做。似乎 CALCULATE() 或 CALCULATETABLE() 是我最好的选择，但我不知道如何使用它来过滤 [Issues per Client per Quarter]。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:32:01.523

我发现这样做的一种方法是将客户端添加为行标签并将 [问题计数] 添加到值，然后为 [问题计数] 大于 1 的客户端创建值过滤器。

最终输出看起来像这样，季度折叠：

年份 | 季度 | 客户 --- 发行数量 | 每个客户的案例

# javascript - 将参数传递给 .toString() 有什么作用？

> ID：14369315
> 
> 赞同：1
> 
> 时间：2013-01-16T22:46:25.237
> 
> 标签：javascript

我不明白`.toString(16)`这段代码的作用 -

```
var fade = function (node) {
    var level = 1;

    var step = function () {
        var hex = level.toString(16); // ← This part
        node.style.backgroundColor = '#FFFF' + hex + hex;

        if (level < 15) {
            level += 1;
            setTimeout(step, 100);
        }
    };

    setTimeout(step, 100);
};

fade(document.body); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:49:00.920

在这种情况下，`level.toString(16)`将数字 ,`level`转换为其十六进制表示。中的数字`toString`是[基数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:49:02.653

`level.toString(16)`接受数字`level`并使用第一个参数指定的基数将其转换为字符串。

将数字转换为以 16 为基数的字符串表示形式实际上变成了数字的十六进制版本。

更多信息： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString)

# javascript - 是否可以访问 ES5-8.6.2 中定义的“内部”对象属性？

> ID：14369317
> 
> 赞同：7
> 
> 时间：2013-01-16T22:46:28.647
> 
> 标签：javascript

“内部”是指在**ES5 8.6.2**中定义的那些：

[http://www.ecma-international.org/publications/standards/Ecma-262.htm](http://www.ecma-international.org/publications/standards/Ecma-262.htm)

可以通过使用访问**[[Class]]**内部属性

```
Object.prototype.toString(Object) 
```

这些属性的用途是什么，是否可以访问？

该规范并未声称定义修改（p32-footer）的方法。

> 注意 本规范没有定义允许程序修改对象的 [[Class]] 或 [[Prototype]] 内部属性或将 [[Extensible]] 的值从 false 更改为 true 的 ECMAScript 语言运算符或内置函数。修改 [[Class]]、[[Prototype]] 或 [[Extensible]] 的实现特定扩展不得违反前一段中定义的不变量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:12:21.073

> 它们可以访问吗？

不完全是，您可以弄清楚它们返回的内容（基于它们各自的定义[§8.12](http://es5.github.com/#x8.12)），但您无法更改它们的工作方式。

以下是解决其中大部分问题的方法（列在[§8.6.2](http://es5.github.com/#x8.6.2)中）。对于所有示例，我假设对象存储为`obj`并且属性键是`name`,`val`是一个值并且`descriptor`是一个属性描述符。

*   `[[Prototype]]`,[`Object.getPrototypeOf(obj)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)
*   `[[Class]]`,[`Object.prototype.toString.call(obj)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)
*   `[[Extensible]]`,[`Object.isExtensible(obj)`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/isExtensible)
*   `[[Get]]`,`obj[name]`
*   `[[GetOwnProperty]]`,[`Object.getOwnPropertyDescriptor(obj, name)`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor)
*   `[[GetProperty]]`,`Object.getOwnPropertyDescriptor(obj, name)`结合向上继承 ( `Object.getPrototypeOf`)
*   `[[Put]]`,`obj[name] = val`
*   `[[CanPut]]`，查找`getOwnPropertyDescriptor`，如果*undefined*是`obj`可扩展的（[`Object.isExtensible`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/isExtensible)）？否则，检查setter *set的**可写*或存在
**   `[[HasProperty]]`,[`name in obj`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)*   `[[Delete]]`,[`delete obj.name`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)*   `[[DefaultValue]]`，不确定这个*   `[[DefineOwnProperty]]`,[`Object.defineProperty(obj, name, descriptor)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)*

 *> 这些属性有什么用？

它们与 JavaScript 引擎应如何根据规范（[第 8.12 节](http://es5.github.com/#x8.12)）工作的内部机制有关，并在算法（[示例](http://es5.github.com/#x15.4.4.4)）中被引用。

* * *

# ES6+

在 ES6 中，我们可以访问[`Proxy`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)s，这意味着我们可以创建对象，然后用 a 包装它们，`Proxy`让我们以自定义方式处理 get、set、has 等

```
// have some object
let o = {};
// wrap with proxy defining a get handler and set handler
let p = new Proxy(o, {
    get(t, n) {
        console.log(t, n, t[n]);
        return t[n];
    },
    set(t, n, v) {
        t[n] = +v;
        return true;
    }
});

// now accessing via proxy
p.foo; // undefined
// get handler logs Object o, "foo", undefined (this happens before .foo returns)

p.foo = '123'; // uses handler to sets on `o`
p.foo; // 123, notice value is Number due to set handler
// get handler logs Object o, "foo", 123 (this happens before .foo returns) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-10T19:14:43.913

## 是的，

它们*是*可访问的：

```
Object.defineProperty({}, 'key', {
    get: function(){
        console.log('GOT %s', 'key');
        return someValue;
    },
    set: function(value){
        console.log('SET %s', 'key');
        this[key] = value;
    }
}); 
```

这相当于：

```
var object = {
    _name: '',
    get name(){ return this._name; },
    set name(value){ this._name = value; }
}; 
```

但是，我还不知道如何访问 [[Put]] 和 [[Delete]] -- 如果你知道，请详细说明。*

# java - ubuntu 通讯链接失败的mysql和java连接问题

> ID：14369330
> 
> 赞同：2
> 
> 时间：2013-01-16T22:47:30.350
> 
> 标签：java, mysql, jdbc, jdbctemplate, spring-jdbc

这是场景

我正在尝试使用 spring 从核心 java 应用程序连接到 mysql 数据库服务器。我的应用程序和服务器在不同的盒子上运行，即打开有限的端口

这是我到目前为止所做的

1.  我能够从客户端机器远程登录到端口 5506（我的数据库服务器在该端口上运行）

2.  我能够从客户端机器从命令提示符（mysql客户端）连接到数据库服务器

3.我尝试了从 5.0.8 到最新的所有驱动程序版本

1.  当然，除了生产之外，相同的代码适用于任何地方:)

不知何故，我开始认为 Java 进程需要打开更多端口

这是例外

```
org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is com.mysql.jdbc.CommunicationsException: Communications link failure due to underlying exception: 

** BEGIN NESTED EXCEPTION ** 

java.net.ConnectException
MESSAGE: Connection refused

STACKTRACE:

java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    at java.net.Socket.connect(Socket.java:546)
    at java.net.Socket.connect(Socket.java:495)
    at java.net.Socket.<init>(Socket.java:392)
    at java.net.Socket.<init>(Socket.java:235)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:271)
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)
    at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
    at java.sql.DriverManager.getConnection(DriverManager.java:620)
    at java.sql.DriverManager.getConnection(DriverManager.java:169)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:113)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:381)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:455)
    at org.springframework.jdbc.core.JdbcTemplate.queryForRowSet(JdbcTemplate.java:498)
    at 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:16:04.470

您是否在连接 URL 中指定了 5506 端口？此端口不是 MySQL (3306) 的默认端口。

# python - 在 URL 上插入实体 ID

> ID：14369332
> 
> 赞同：0
> 
> 时间：2013-01-16T22:47:31.463
> 
> 标签：python, google-app-engine, jinja2

我想通过链接将实体的 ID 发送到另一个页面。

```
class FrontPage(FuHandler):
    def get(self):
        tuts = db.GqlQuery("SELECT * FROM Tutorial ")
        self.render('front.html', tuts=tuts) 
```

在 front.html 我有类似的东西：

```
{% for tut in tuts %}
<a href="/tutview?tut_key={{ tut.id }}"><div id="FrontPageTutorialTitle">{{ tut.title }}
</div>
</a>
{% endfor %} 
```

但链接总是 'tutview?tut_key='

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:58:21.743

只有键有 id。Tut 是 Model 的一个实例，key 获取一个 key 的实例，然后才可以访问 id

```
<a href="/tutview?tut_key={{ tut.key().id() }}"> 
```

# data-visualization - 处理大数据和数据可视化的最佳工具

> ID：14369344
> 
> 赞同：0
> 
> 时间：2013-01-16T22:48:50.377
> 
> 标签：data-visualization, bigdata, data-analysis

我目前正在（开始）我的大数据和数据可视化项目。所以请让我知道是否有最好的软件来处理大数据和数据可视化，即数据分析。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:50:08.533

Tableau 是一个非常好的软件。

但是，如果您对 Open Software 感兴趣，可以尝试 Gephi、Mondrian、R-Project 和 Google Refine（数据清理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:04:19.110

我想说从学习什么是大数据开始？有哪些各种数据可视化工具。

有很多工具，你有很多选择。你用 Excel 吗？Excel也可以做数据可视化。想要 Excel 中的更多内容？在 Excel 2013（测试版）中试用 Power View。想要更多？看看那里的软件。像 R 一样，Tableau 和列表还在继续……

我建议您阅读这本免费的简短电子书：http: [//parasdoshi.com/2012/05/18/want-to-learn-about-bigdata-read-oreillys-book-planning-for-bigdata/](http://parasdoshi.com/2012/05/18/want-to-learn-about-bigdata-read-oreillys-book-planning-for-bigdata/)

我希望这有帮助。

# user-interface - 节点/链接编程接口的通用术语是什么？

> ID：14369345
> 
> 赞同：0
> 
> 时间：2013-01-16T22:49:00.163
> 
> 标签：user-interface, simulink, puredata

有几个（很多？）编程/设计系统，用户构建一个（节点边）图来表示算法，然后可以运行生成的算法以获得结果。

我脑海中浮现的两个例子是

*   Simulink
*   纯数据

但我想研究这种方法的一般特征，用于设计用于设置数值处理问题的用户界面，所以我需要知道一些通用术语来简明地描述这种界面设计。

我正在寻找：

*   我在 Google 中输入“哪些编程系统（环境）使用 XXX 接口”，答案包括 Simulink 和 Pure Data。
*   我在 XXX 用户界面上找到了 Wikipedia 页面，它的系统列表中包括 Simulink 和 Pure Data。
*   有人写了一篇学术论文“AmazingSoftware: an XXX system for modeling systems”，他们构建了一个系统，具有这种类型的节点/边缘接口，允许以某种方式对种群动态进行建模（我对生态学不是特别感兴趣，相反，我想找到这个来了解他们对界面本身做了什么）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:22:29.877

Pure Data一般被描述为“实时图形数据流编程”，所以这里有三个关键词：

*   [real-time](https://en.wikipedia.org/wiki/Real-time_computing)：它是一个实时系统，因此具有内置的时间感和并发性，并“保证”在严格的时间限制内做出响应
*   [图形化](https://en.wikipedia.org/wiki/Visual_programming_language)：编程以图形方式执行和表示，而不是文本或穿孔卡片或其他任何东西（这也可以标记为**视觉**）
*   [数据流](https://en.wikipedia.org/wiki/Dataflow_programming)：编程逻辑基于数据流，而不是面向对象或过程

我的猜测是您最感兴趣的是其中的图形/视觉部分。

# c++ - C++ OpenGL 错误的 Collada 纹理坐标

> ID：14369349
> 
> 赞同：2
> 
> 时间：2013-01-16T22:49:15.733
> 
> 标签：c++, opengl, coordinates, textures, collada

我正在解析`Collada file`动画。我已经把它画好了，动画效果很好，但现在的问题是如何设置纹理坐标。我将它`OpenGL`准确地提供给 collada dae 文件如何将它提供给我，但它的映射完全错误。坐标范围从`[0-1].`

我必须重新排列它吗？

如果我这样做，请向我解释如何去做。我尝试使用 GL_LINEAR 和 GL_NEAREST 但它并没有解决问题。任何想法为什么？

我使用的模型是[http://www.wazim.com/Collada_Tutorial_1.htm](http://www.wazim.com/Collada_Tutorial_1.htm)提供的 AstroBoy 和 Amnesia Servant Grunt。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:02:50.197

根据您所说的结果是完全错误的映射，我猜您没有考虑纹理索引值。我也有类似的问题（尽管有不同的模型）。就像您可以拥有一个索引值数组以便 OpenGL 知道绘制顶点的顺序一样，Collada 也会分配 UV 索引值（和正常索引值），而且令人讨厌的是，它们的顺序永远不会相同。以以下 Collada 示例为例：

```
<source id="Box001-POSITION">
                <float_array id="Box001-POSITION-array" count="1008">
                    -167.172180 -193.451920 11.675772
                    167.172180 -193.451920 11.675772 .....
....
....
<source id="Box001-Normal0">
                <float_array id="Box001-Normal0-array" count="5976">
                    -0.000000 -0.025202 -0.999682
                    -0.000000 -0.025202 -0.999682 .....
....
....
<source id="Box001-UV0">
                <float_array id="Box001-UV0-array" count="696">
                    0.000000 0.000000
                    1.000000 0.000000
                    0.000000 1.000000 .....
....
....
<triangles count="664" material="_13 - Default">
                <input semantic="VERTEX" offset="0" source="#Box001-POSITION"/>
                <input semantic="NORMAL" offset="1" source="#Box001-Normal0"/>
                <input semantic="TEXCOORD" offset="2" set="0" source="#Box001-UV0"/>
                <p> 169 0 171 170 1 172 171 2 173 171 3
                    173 168 4 170 169 5 171 173 6 175 174
                    7 176 175 8 177 175 9 177 172 10 174 173 11 175 108 .... 
```

前三个部分表示顶点/法线/纹理坐标的值，但最后部分表示每个值的索引。注意第一个顶点索引是 169，但第一个法线索引是 0。事实上，法线索引是完全正常的，它们进展为“0..1..2..3”，但顶点和纹理的索引到处都是！您必须按照 Collada 文件指定的方式对顶点和纹理值进行排序。

另一种方法是编写一个小程序来解析 collada 文件并根据索引值将所有顶点、法线和 UV 值重新排列为正确的顺序。然后，您可以直接将您的观点输入 OpenGL，无需提出任何问题。当然，这取决于你，你想用哪种方式处理它。

（PS：如果你可以为 Collada 文件制作一个好的解析器，那么“交错索引”实际上非常方便，如果不是，我发现它对 Collada 来说过于复杂，但你真的无能为力它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:31:14.970

不，我建议你阅读一些 collada 的基本知识。

```
 <triangles count="664" material="_13 - Default">   
   <input semantic="VERTEX" offset="0" source="#Box001-POSITION"/>     
   <input semantic="NORMAL" offset="1" source="#Box001-Normal0"/>
   <input semantic="TEXCOORD" offset="2" set="0" source="#Box001-UV0"/>
   <p> 169 0 171 170 1 172 171 2 173 171 3...... 
```

169 是三角形的第一个点索引，0 是第一个法线索引，171 是第一个 texcoord 索引，依此类推。

# python - 如果不是，如何使函数输入成为字符串？

> ID：14369352
> 
> 赞同：1
> 
> 时间：2013-01-16T22:49:29.703
> 
> 标签：python, string, function, input, python-2.7

所以基本上，假设你定义了一个函数，然后在函数之后的 () 括号中写一些东西。如果我写函数（同性恋），它最终会成为“未定义错误名称”Python2.73

```
def lenRecur(aStr):
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    print type(aStr)
    return

def lenRecur2(aStr):
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    s = str(aStr)
    print type(s)
    return 
```

因此，当我输入 lenRecur(gay) 或 lenRecur2(gay) 时，无论我做什么都会出错。那么有没有办法避免呢？不使用“”引号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T22:52:22.290

否 - 除非您的输入已经是一个包含字符串（或另一个对象）的变量。

但是，您可以使用一个`try-except`块（但如果出现错误，它实际上不会做任何事情）。

```
try:
    lenRecur(foo)
    lenRecur2(foo)
except NameError:
    pass 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T22:59:53.333

该错误甚至在函数被调用之前发生。Python 尝试在调用函数之前评估参数。因此，Python 遇到了裸名`gay`并想知道，“这到底是什么？” 当它无法在本地、封闭、全局或内置范围中找到它的值时，它会引发 NameError。

没有办法解决这个问题。你必须清楚地说明你的意思。如果`gay`是字符串，则必须使用引号。

# sql - 在 sql 中使用时间戳

> ID：14369353
> 
> 赞同：1
> 
> 时间：2013-01-16T22:49:34.613
> 
> 标签：sql, sql-server, tsql

我在存储过程中有一个 if 语句，用于派生一些时间值。它看起来像这样：

```
 DECLARE @foo TIME
    IF (SELECT CONVERT(TIME,SYSUTCDATETIME())) > '15:00'
        SET @foo = DATEADD(hh,-15,CONVERT(TIME,SYSUTCDATETIME()))
    ELSE
        SET @foo = DATEADD(hh,+9,CONVERT(TIME,SYSUTCDATETIME())) 
```

稍后我想在以下 WHERE 子句中使用该值：

```
AND created_at > DATEADD(hh,-@DailyLimitOffsetTime, CONVERT(TIME,SYSUTCDATETIME())) 
```

我不断收到一个错误，即数据类型时间对于减号运算符无效。我怎样才能解决这个问题以使 and 子句起作用。我已经尝试转换数据类型，并且我有点理解 DATEADD(hh) 正在寻找参数 2 是 int 而不是时间的问题。有没有更简单的方法可以做到这一点，我必须承认，如果你不能告诉我我根本不擅长时间戳。任何帮助表示赞赏。

```
DECLARE @DailyLimitOffsetTime TIME
IF (SELECT CONVERT(TIME,SYSUTCDATETIME())) > '15:00'
    SET @DailyLimitOffsetTime = DATEADD(hh,-15,CONVERT(TIME,SYSUTCDATETIME()))
ELSE
    SET @DailyLimitOffsetTime = DATEADD(hh,+9,CONVERT(TIME,SYSUTCDATETIME()))

IF @Limit <=
(
   SELECT COUNT(*)
   FROM dbo.fooTable
   WHERE offerId = @OfferID
   AND created_at > 
   DATEADD(hh,DATEPART(hh,-@DailyLimitOffsetTime),CONVERT(TIME,SYSUTCDATETIME()))
)
    SET @ErrorTypeID = 9400 
```

我相信有更好的方法可以做到这一点，如果是这样，请分享。一如既往地感谢任何帮助。如果您需要有关此问题的任何进一步解释，请告诉我。这个有点乱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:49:44.837

DATEADD 函数中的第二个参数必须解析为 int

```
AND created_at > DATEADD(hh, -DATEPART(hh, @DailyLimitOffsetTime), CONVERT(TIME,SYSUTCDATETIME())) 
```

或者

```
DECLARE @time time = CONVERT(TIME, SYSUTCDATETIME())
IF @Limit <=
(
   SELECT COUNT(*)
   FROM dbo.fooTable
   WHERE offerId = @OfferID
   AND created_at >
   CASE WHEN @time > '15:00' 
        THEN DATEADD(hh, 15,  DATEADD(hh, -DATEPART(hh, @time), @time))
        ELSE DATEADD(hh, 09,  DATEADD(hh, -DATEPART(hh, @time), @time)) END 
   END    
)
SET @ErrorTypeID = 9400 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:58:36.477

我不明白你在做什么，因为你总是会做同样的时间，而不是只考虑时间的日期。如果您尝试在某个位置的 UTC 时间在下午 3 点之后显示不同的日期，则您不希望出现这种情况。所以如果你想提前九个小时你不会因为你只是通过使用时间框架来计算当天。因此，如果是 1-16-12 的晚上 8 点，您可以将时间设置为早上 5 点。我认为您需要根据需要设置 DATETIME，而不仅仅是时间。

```
DECLARE @foo Datetime
    IF (SELECT CONVERT(TIME,SYSUTCDATETIME())) > '15:00'
        SET @foo = Dateadd(hh, datediff(hh, 0, sysutcdatetime()) -15, 0)
    ELSE
        SET @foo = Dateadd(hh, datediff(hh, 0, sysutcdatetime()) + 9, 0)

select @foo 
```

# gwt - 如何使用 uibinder 在 GWT2.5 中创建 GlassPanel

> ID：14369356
> 
> 赞同：1
> 
> 时间：2013-01-16T22:49:43.057
> 
> 标签：gwt, uibinder, gwt-2.5

谁能建议使用 UiBinder 创建 Glasspanel 小部件的最佳方法？我正在使用 GWT 2.5 版

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:09:34.173

使用[Dialog Box](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DialogBox.html)，并将 glassEnabled 设置为 true。

# sql - 从表变量中获取列的确定名称

> ID：14369359
> 
> 赞同：6
> 
> 时间：2013-01-16T22:50:16.677
> 
> 标签：sql, sql-server, sql-server-2008, table-variable

我可以这样声明一个表变量：

```
DECLARE @tv_source TABLE(c1 int, 
providerName varchar(50),
providerSMS varchar(50)) 
```

如果我随后执行以下命令，我会看到类似于以下内容的表名：“#468862B0”

```
select top 1 * from tempdb.sys.tables where type = 'U' order by create_date desc
select TOP 1 name,* from tempdb.sys.sysobjects ORDER BY CRDATE desc 
```

如果我立即执行：

```
select TOP 3 * 
from tempdb.sys.columns 
where object_id in (select TOP 1 object_id from tempdb.sys.tables ORDER BY Create_date desc) 
```

我看到了我在上面为表变量声明的列。

我的问题是，**有没有办法将这些列与我在“@tv_source”上方的表声明中声明的名称明确关联？**

在普通表中，您会看到实际名称，但如上所述，表变量会变形为十六进制值（顺便说一句，它是 object_id 的十六进制值）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T06:36:53.503

`top(0)`您可以使用`outer apply`从一行查询您的表变量，`for xml path('')`然后在 XML 中查询元素名称。

只要您的列名没有无效的 XML 元素名称，这将起作用。例如，列名可以不使用与号或空格。

```
declare @tv_source table
(
  c1 int, 
  providerName varchar(50),
  providerSMS varchar(50)
)

select TN.N.value('local-name(.)', 'sysname') as ColumnName
from 
  (
  select TV.*
  from (select 1) as D(N)
    outer apply (
                select top(0) *
                from @tv_source
                ) as TV
  for xml path(''), elements xsinil, type
  ) as TX(X)
cross apply TX.X.nodes('*') as TN(N) 
```

另一种选择是`xmlschema`使用`for xml auto`. 此解决方案确实可以处理无效的 XML 字符，但它们会被转义，因此如果您有一个带有空格的列名，`[provider Name]`结果将是`provider_x0020_Name`.
您需要将生成的 XML 存储到一个变量中，并在该变量中查询您想要的信息。

```
declare @XML xml;

set @XML = 
  (
  select top(0) *
  from @tv_source
  for xml auto, xmlschema, type
  );

with xmlnamespaces('http://www.w3.org/2001/XMLSchema' as xsd)
select T.X.value('@name', 'sysname')
from @XML.nodes('//xsd:attribute') as T(X); 
```

由 所创建的 XML`xmlschema`包含更多可能感兴趣的信息。您也可以检索表变量名称和数据类型。

```
<xsd:schema xmlns:schema="urn:schemas-microsoft-com:sql:SqlRowSet12" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sqltypes="http://schemas.microsoft.com/sqlserver/2004/sqltypes" targetNamespace="urn:schemas-microsoft-com:sql:SqlRowSet12" elementFormDefault="qualified">
  <xsd:import namespace="http://schemas.microsoft.com/sqlserver/2004/sqltypes" schemaLocation="http://schemas.microsoft.com/sqlserver/2004/sqltypes/sqltypes.xsd" />
  <xsd:element name="_x0040_tv_source">
    <xsd:complexType>
      <xsd:attribute name="c1" type="sqltypes:int" />
      <xsd:attribute name="providerName">
        <xsd:simpleType>
          <xsd:restriction base="sqltypes:varchar" sqltypes:localeId="1035" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth">
            <xsd:maxLength value="50" />
          </xsd:restriction>
        </xsd:simpleType>
      </xsd:attribute>
      <xsd:attribute name="providerSMS">
        <xsd:simpleType>
          <xsd:restriction base="sqltypes:varchar" sqltypes:localeId="1035" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth">
            <xsd:maxLength value="50" />
          </xsd:restriction>
        </xsd:simpleType>
      </xsd:attribute>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-09T12:51:20.177

我从你的评论中看到，这个练习是为了学习，所以你没有特定的用例或需求。也就是说，从表变量变量中获取详细列元数据的另一种方法是使用 sp_describe_first_result_set。

```
EXEC sp_describe_first_result_set @tsql =  N'
declare @tableName table (ID bigint,
                            Column1 bigint,
                            Column2 datetime,
                            createdBy nvarchar(100),
                            dateAdded nvarchar(12),
                            Type nvarchar(10)
                            )
SELECT * FROM @tableName;'; 
```

# c++ - 带矩阵的 Prim 算法

> ID：14369365
> 
> 赞同：0
> 
> 时间：2013-01-16T22:51:01.363
> 
> 标签：c++, algorithm, prims-algorithm

我正在尝试使用 C++ 和矩阵来实现 Prim 的算法。

这是我的问题：

```
int node[] = {11, 11, 0, 11, 11, 11, 11, 11};
int nodeCon[8];

void generatePrims() {
    int cNode = 3;

    for (int i = 1; i <= 8; i++) {

        if (graph[cNode][i] != 0){

            if (node[i] > graph[cNode][i]) {
                node[i] = graph[cNode][i];
                nodeCon[i] = cNode;
                }
            }
        }
}; 
```

cNode 是起始节点。

`graph[][]`是保持连接的二维矩阵。

`nodeCon[]`是将保存 MST 连接的数组（哪个节点与其他节点连接）

`node[]=`保存 nodeCon 的成本值。

我的问题是我将如何继续下一跳？假设我找到了最小连接，我将设置`cNode= minConnection`循环的外观？我怎么知道我检查了所有节点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:17:47.087

像这样的东西：

```
int node[]={11,11,0,11,11,11,11,11};
int used[]={0,0,0,0,0,0,0,0,0,0};
int nodeCon[8];

void generatePrims(){
   int cNode = 3;
   int next, min_now;
   for(int i=0; i<8; ++i) {
      used[cNode] = 1;
      min_now = MAX_INT;
      for(int i=1;i<=8;i++){
         if(!used[i]){ 
            if(node[i] > graph[cNode][i]){
               node[i] = graph[cNode][i];
               nodeCon[i]= cNode;
            }
            if(node[i] < min_now) {
               min_now = node[i];
               next = i;
            }  
         } 
      }
      cNode = next;
   }
}; 
```

另外值得注意的是：如果您将使用未使用的顶点列表而不是数组“已使用”，它会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:43:53.663

我目前无法评论上一个答案（因为我没有足够的声誉）所以我会通过另一个答案来做。Piotr 解决方案几乎是正确的，但我相信 Prim 的算法考虑的不仅仅是当前节点。一个例子可以在这里看到[Prim 的算法](http://en.wikipedia.org/wiki/Prim%27s_algorithm#Example_run)。这实质上意味着您需要检查您访问过的节点的路径，而不仅仅是最近的节点。

这意味着您将需要存储一个向量，其中包含您访问过的节点并通过它们“针对每个”，而不是仅检查您访问过的最后一个节点的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:14:47.620

以下站点已实现算法和 junit 测试类。所以它应该是你正在寻找的。当然，单元测试类有一个实际的矩阵。并且实现类有代码。

[http://www.geekviewpoint.com/java/graph/mst](http://www.geekviewpoint.com/java/graph/mst)

# python - 使用诱变剂 mac 与 pc 分配专辑插图

> ID：14369366
> 
> 赞同：1
> 
> 时间：2013-01-16T22:51:04.510
> 
> 标签：python, mutagen

我正在尝试为歌曲分配图片，并且我有一些适用于 Mac 的代码，但不适用于 PC。

> 从 mutagen.easyid3 导入 EasyID3
> 
> 从 mutagen.id3 导入 ID3，APIC，错误
> 
> 从 mutagen.mp3 导入 MP3
> 
> def image_assigner(self):
> 
> ```
>  song = MP3(self.file, ID3=ID3)
> 
>    # add ID3 tag if it doesn't exist
>    try:
>        song.add_tags()
>    except error:
>        print "we got an image error"
>        pass
> 
>    song.tags.add(
>        APIC(
>            encoding=3, 
>            mime='image/jpeg', 
>            type=2, 
>            desc=u'Cover',
>            data=open('example.JPG', 'rb').read()
>        )
>    )
>    song.save() 
> ```

所以在 Mac 上，这段代码有效，但是当我在我的 PC 上尝试时，它不会。任何帮助，将不胜感激。谢谢！

*编辑* 所以，在做了更多研究之后，我发现这段代码确实将专辑插图保存到 Mac 和 Windows 上的 mp3 文件中，但它保存在 ID3v2.4 中，Mac 可以读取，但 Windows 不能阅读，所以它似乎没有保存在 Windows 上。似乎在诱变保存功能中使用 v1=2 选项应该将标签保存在 ID3v1 中（请参阅本页 10 月 4 日的帖子[）](https://code.google.com/p/mutagen/wiki/Tutorial)。如果我更新专辑、艺术家、标题等的标签似乎可以工作，但是当我为专辑封面更新时，它仍然没有出现在 Windows 资源管理器中。有没有人在这方面有经验并且可以对此有所了解？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T04:57:40.400

是的，不幸`Windows`的是不支持该版本。而不是只是将其保存在`ID3v1`尝试将其保存在`ID3v3`and中`ID3v1`。我在我的程序中使用它，它在`Windows 8`和`OSX`.

```
from mutagen.mp3 import MP3
from mutagen.id3 import ID3, APIC, error, TRCK, TIT2, TPE1, TALB, TDRC, TCON

audio = MP3([PATH_TO_FILE], ID3=ID3)
audio.tags.delete([PATH_TO_FILE], delete_v1=True, delete_v2=True)
audio.tags.add(
    APIC(
        encoding=3,
        mime='image/jpeg',
        type=3,
        desc=u'Cover',
        data=open([PATH_TO_COVER_IMAGE], 'rb').read()
    )
)
audio.save([PATH_TO_FILE], v2_version=3, v1=2) 
```

# performance - cuda如何计算加速

> ID：14369368
> 
> 赞同：-1
> 
> 时间：2013-01-16T22:51:05.473
> 
> 标签：performance, cuda

hy，我有一个 xeon 4core，带有特定于 gpu tesla c2050[的](http://www.nvidia.it/object/product_tesla_C2050_C2070_it.html)

我正在使用 CUDA 内核和串行 cpu 代码。使用 cpu_code 处理时间为 40 秒。使用 CUDA_kernel 可以在 2 秒内处理相同的问题。

我想计算加速[维基](http://en.wikipedia.org/wiki/Speedup)：

CPU: s(4core)=40/2 CUDA: s(448core)=40/2 ?????

我很困惑，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:39:40.033

维基百科的文章使“加速”看起来像是某种具有特定定义的科学术语。事实并非如此 ：）

只需将 CPU 实现的时间（40s）除以 GPU 实现的时间（2s），即可计算出两种实现的比率，并给出后面带“x”的数字，表示“次”。在你的情况下，40/2 = 20x。

然后，连同该数字一起提供有关硬件的详细信息，例如 CPU 和 GPU 的类型和时钟频率，以及实现详细信息，例如 CPU 版本使用的内核数量。

# c - c代码分段错误“SIGSEGV”使用gdb调试器

> ID：14369369
> 
> 赞同：-2
> 
> 时间：2013-01-16T22:51:11.967
> 
> 标签：c, debugging, gdb, while-loop, segmentation-fault

我有一个代码可以扫描整个目录以查找 .wor 文件，并从中提取信息。当我在包含 5 个 .wor 文件的目录上运行该文件时，它运行良好。但是当我尝试在包含 70 多个 .wor 文件的目录上运行它时，它给了我一个“内存故障（核心转储”错误）。

所以我尝试用 gdb 调试代码，这就是我得到的：

```
Program received signal SIGSEGV, Segmentation fault.
0x7af9fcbc in _sbrk () from /usr/lib/libc.2
(gdb) bt
#0  0x7af9fcbc in _sbrk () from /usr/lib/libc.2
#1  0x7af9db7c in _sigfillset () from /usr/lib/libc.2
#2  0x7af9bfe8 in __thread_callback_np () from /usr/lib/libc.2
#3  0x7afa0e64 in malloc () from /usr/lib/libc.2
#4  0x7b001160 in _findbuf () from /usr/lib/libc.2
#5  0x7afff7f4 in _filbuf () from /usr/lib/libc.2
#6  0x7afff404 in __fgets_unlocked () from /usr/lib/libc.2
#7  0x7afff5fc in fgets () from /usr/lib/libc.2
#8  0x2c14 in main (argc=1, argv=0x7dff11b4) at book2.c:99 
```

我查看了第 99 行，我有命令：while( fgets(buff, 100,fs) != NULL )，我不太了解 c 以找到错误所在，非常感谢这里的任何帮助，谢谢进步！

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/types.h>
#include <dirent.h>
#include <unistd.h>
#include <errno.h>

int main(int argc, char **argv) {

char directory[100];
char buff[100];
char delims[] = " :=";
char *result = NULL;
char *customer;
char *device;
char *testprog;
char *software;
char *dutboardid;
char *corlbox;
char *testerid;
char *temp;
char *buffer;
int i=0;
DIR * FD;
struct dirent* in_file;
int c=0;

printf ("Enter directory:");                                   
    scanf ("%s",directory);

    FILE * ft = fopen ( "workorderlist.csv", "w" ) ;    /* Open file to write to*/
    if ( ft == NULL )
    {
           puts ( "Cannot open target file" ) ;
           exit( 1 ) ;
    }

fprintf (ft, "Work Order,Customer,Device,Test Program,Software,DUT_board_id,Corl box, Tempurature, Test Station\n");

/* Open Directory*/

if (NULL == (FD = opendir (directory))) 
    {

        puts ("Cannot open directory");

    return 1;
    }

    while ((in_file = readdir(FD))) 
    {

    if (!strcmp (in_file->d_name, "."))
        continue;
    if (!strcmp (in_file->d_name, ".."))    
        continue;

    /* Open files to read from  */

buffer = (char*) malloc (200);
sprintf(buffer, "%s/%s", directory, in_file->d_name);

size_t len = strlen(buffer);
if (len >= 4 && memcmp(buffer + len - 4, ".wor", 4) == 0)   /* checks if file ends with .wor */
{

FILE * fs = fopen(buffer, "r");       /* open file to read */

customer = "0";
device = "0";
testprog = "0";
software = "0";
dutboardid = "0";
corlbox = "0";
testerid = "0";
temp = "0";

    if (fs == NULL)
    {
        puts ("Cannot open source file");

        return 1;
    }

    /* Scanning each file for targeted words: */

while( fgets(buff, 100,fs) != NULL )      
{   

 result = strtok( buff, delims );          
    while(result != NULL){   

            if((strcmp(result,"Customer")==0)){ 
        result = strtok(NULL,delims);  
        customer = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(customer, result);
        for(i=0;i<strlen(customer)+1;i++){ if(customer[i] == '\n') break; }
        customer[i] = ' ';
        }

            if((strcmp(result,"name")==0)){ 
        result = strtok(NULL,delims);  
        customer = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(customer, result);
        for(i=0;i<strlen(customer)+1;i++){ if(customer[i] == '\n') break; }
        customer[i] = ' ';
        }

            if(strcmp(result,"device")==0){ 
        result = strtok(NULL,delims);  
        device = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(device, result);
        for(i=0;i<strlen(device)+1;i++){ if(device[i] == '\n') break; } 
        device[i] = ' ';
        }

            if(strcmp(result,"test_prog")==0 || strcmp(result, "testprog")==0){ 
        result = strtok(NULL,delims);  
        testprog = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(testprog, result);
        for(i=0;i<strlen(testprog)+1;i++){ if(testprog[i] == '\n') break; } 
        testprog[i] = ' ';
        }

            if(strcmp(result,"Rev")==0 || strcmp(result,"use")==0){ 
        result = strtok(NULL,delims);  
        software = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(software, result);
        for(i=0;i<strlen(software)+1;i++){ if(software[i] == '\n') break; } 
        software[i] = ' ';
        }

        if(strcmp(result,"rev")==0){ 
        result = strtok(NULL,delims);  
        software = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(software, result);
        for(i=0;i<strlen(software)+1;i++){ if(software[i] == '\n') break; } 
        software[i] = ' ';
        }

            if(strcmp(result,"DUT_board_id")==0){ 
        result = strtok(NULL,delims);  
        dutboardid = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(dutboardid, result);
        for(i=0;i<strlen(dutboardid)+1;i++){ if(dutboardid[i] == '\n') break; } 
        dutboardid[i] = ' ';
        }                   

            if(strcmp(result,"box")==0){ 
        result = strtok(NULL,delims);  
        corlbox = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(corlbox, result);
        for(i=0;i<strlen(corlbox)+1;i++){ if(corlbox[i] == '\n') break; } 
        corlbox[i] = ' ';
        }

        if(strcmp(result,"Tester_id")==0){ 
        result = strtok(NULL,delims);  
        testerid = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(testerid, result);
        for(i=0;i<strlen(testerid)+1;i++){ if(testerid[i] == '\n') break; } 
        testerid[i] = ' ';
        }

        if(strcmp(result,"@")==0){ 
        result = strtok(NULL,delims);  
        temp = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(temp, result);
        for(i=0;i<strlen(temp)+1;i++){ if(temp[i] == '\n') break; } 
        temp[i] = ' ';
        }

        result = strtok(NULL,delims);
    }

}

if (strcmp(customer, "0")==0){
customer = "N/A";
}
if (strcmp(device, "0")==0){
device = "N/A";
}
if (strcmp(testprog, "0")==0){
testprog = "N/A";
}
if (strcmp(software,"0")==0){
software = "N/A";
}
if (strcmp(dutboardid, "0")==0){
dutboardid = "N/A";
}
if (strcmp(corlbox, "0")==0){
corlbox = "N/A";
}
if (strcmp(testerid, "0")==0){
testerid = "N/A";
}
if (strcmp(temp, "0")==0){
temp = "N/A";
}

fprintf (ft, "%s,%s,%s,%s,%s,%s,%s,%s,%s\n", in_file->d_name, customer, device, testprog, software, dutboardid, corlbox, temp, testerid);

printf(in_file->d_name);
printf("\n");
fclose (fs) ;
c++;

}
}
printf("Total Workorders Found: %d (Info saved to workorderlist.csv)\n", c);
    fclose ( ft ) ;
return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:53:17.627

内存不足。

例如，您调用 malloc 并将其分配给循环内的“客户”，并且似乎永远不会释放内存。

您有内存泄漏，最终您的内存使用量达到了系统限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:11:26.837

如果我们举这个例子：

```
customer = (char*)malloc((strlen(result)+1)*sizeof(char));
strcpy(customer, result);
for(i=0;i<strlen(customer)+1;i++){ if(customer[i] == '\n') break; }
customer[i] = ' '; 
```

它复制结果，占用`strlen(result)+1`字节。然后您将结果复制到客户中。之后，您在字符串中搜索 '\n'。如果字符串中没有 '\n' 会发生什么？什么是价值`i`？

我很确定问题在于，在某些时候，这种代码风格是在分配的内存之外编写的——因为我不知道你的输入到底是什么，我不能说几个副本中的哪一个这段代码出错了，但我敢打赌这就是发生的事情。这反过来意味着堆结构本身中的一些数据被破坏了，所以在调用 malloc 的某个时候，它在代码中使用了这些坏数据。

# .htaccess - .htaccess 301 重定向适用于 http 和 https 情况，.com 和 localhost

> ID：14369371
> 
> 赞同：0
> 
> 时间：2013-01-16T22:51:14.303
> 
> 标签：.htaccess, redirect, https, local, permanent

我需要在单个页面上进行 301 重定向。如果我只是想让它在 www.example.com 上工作，我会：

```
redirect 301 /urisegment1/urisegment2/urisegment3 http://www.example.com/urisegment1/urisegment2/NEWURISEGMENT3 
```

问题是，用户可以访问[http://www.example.com/urisegment1/urisegment2/urisegment3](http://www.example.com/urisegment1/urisegment2/urisegment3) 或有时[https://www.example.com/urisegment1/urisegment2/urisegment3/](https://www.example.com/urisegment1/urisegment2/urisegment3/)如果他们已经登录并访问 SSL-受保护的页面。我还在本地设置了站点，因此我可以通过[http://www.example.local/urisegment1/urisegment2/urisegment3访问它](http://www.example.local/urisegment1/urisegment2/urisegment3)

我怎样才能让它适用于所有情况？

* * *

（这是问题的结尾，我当前的 .htaccess 文件在下面以防万一。请注意，这主要不是我自己的工作，它来自各种来源）。

```
<IfModule mod_rewrite.c>

RewriteEngine on
RewriteBase /

#Removes trailing slashes (prevents SEO duplicate content issues)
#RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule ^(.+)/$ $1 [L,R=301]

#forces www.
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

#force homepage to http from https
RewriteCond %{HTTP_HOST} ^www\.example\.com$ 
RewriteCond %{HTTPS} on 
RewriteRule ^$ http://www.example.com/ [R=301,L]

#If a controller can't be found - then issue a 404 error from PHP
ErrorDocument 404 /404.html

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^sys.*
RewriteRule ^(.*)$ /index.php/$1 [L]

# Checks to see if the user is attempting to access a valid file,
# such as an image or css document, if this isn't true it sends the
# request to index.php. The first condition allows access to assets, css, js and the robots file
RewriteCond $1 !^(index\.php|assets|css|js|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{THE_REQUEST} ^.*/index.php
RewriteRule ^(.*)index.php$ http://www.example.com/$1 [R=301,L]

# Removes access to the system folder by users.
# Additionally this will allow you to create a System.php controller,
# previously this would not have been possible.
# 'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>

# Without mod_rewrite, route 404's to the front controller
ErrorDocument 404 /index.php

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:15:58.543

我刚刚尝试了以下规则

```
RewriteCond %{REQUEST_URI} !newvalue/?$
RewriteRule ^(.*)/[^/]+/?$ /$1/newvalue [L,R=301] 
```

它应该保留除最后一个 URI 段之外的所有内容，因此它应该适用于 http(s) 和不同的域。

您必须更新*两*行中的新值以避免无休止的重定向。

# html - 使带有叠加层的图像 div 完全响应？

> ID：14369372
> 
> 赞同：2
> 
> 时间：2013-01-16T22:51:30.657
> 
> 标签：html, css, responsive-design

过去我已经完成了很多响应式站点，但我正在努力解决这个问题。

我想产生这种效果： http: [//playwp.equiet.sk/](http://playwp.equiet.sk/)

我为其中一个图像 div 创建了一个我所做的 jsfiddle。我已经删除了我添加的响应方面，因为我无法让它与覆盖一起正常运行，并希望有人能帮助我解决这个问题。

这是我想要响应的 jsfiddle：http: [//jsfiddle.net/mattmagi/ZS7ZA/1/](http://jsfiddle.net/mattmagi/ZS7ZA/1/)

```
<div class="one">
  <img src="http://tst.eclipsecreative.ca/3clips3/wp-content/uploads/2013/01/team.jpg"/>
    <div class="two">
      <img src="http://tst.eclipsecreative.ca/3clips3/wp-content/uploads/2013/01/team-hover.jpg"/>
      <div class="info">
        <p class="name">Sally Salamander</p>
        <p class="position">Account Manager</p>
      </div>
      <div class="social">
        <a href="#"><img src="http://www.tompeters.com/_/i/twitter-icon.png" /></a> <a href="#"><img src="http://www.tompeters.com/_/i/twitter-icon.png" /></a> <a href="#"><img src="http://www.tompeters.com/_/i/twitter-icon.png" /></a>
      </div>
  </div>
</div>

.one {
    position: relative;
    background-color: transparent;
}
.two {
    position: relative;
    top: -364px;
    left: 0px;
}
.info {
position: relative;
top: -365px;
padding-top: 30px;
padding-left: 30px;
background-color: transparent;
}
.social {
position: relative;
top: -365px;
padding-top: 15px;
padding-left: 30px;
background-color: transparent;
}
.name {font-size: 24px;}
.position {font-size: 16px;} 
```

编辑：好的，这是我的意思的另一个例子（忽略悬停故障）：http: [//jsfiddle.net/mattmagi/3d5Jr/](http://jsfiddle.net/mattmagi/3d5Jr/)

这些块将浮动到左侧，因此当您的浏览器变大时会显示更多块，但是当它介于两者之间时，我希望它自动填充浏览器，因此图像右侧永远不会有任何空白，所以有它缩放以适应。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:35:55.487

您应该使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)和百分比宽度..

这样，您可以在媒体查询中通过指定子元素的宽度（*以完美加起来为 100% 的百分比*）来定义所需的列数，并通过使图像`width:100%`位于这些元素内，使它们自动缩放。

**演示在** [http://jsfiddle.net/gaby/Yz7mf/1/](http://jsfiddle.net/gaby/Yz7mf/1/)
（*全屏在[http://fiddle.jshell.net/gaby/Yz7mf/1/show/light/](http://fiddle.jshell.net/gaby/Yz7mf/1/show/light/)*）

所以对于一个结构

```
<div id="container">
  <div class="item"><img src="http://lorempixel.com/200/150/city/1" /></div>
  <div class="item"><img src="http://lorempixel.com/200/150/city/2" /></div>
  <div class="item"><img src="http://lorempixel.com/200/150/city/3" /></div>
  <div class="item"><img src="http://lorempixel.com/200/150/city/4" /></div>
  <div class="item"><img src="http://lorempixel.com/200/150/city/5" /></div>
  <div class="item"><img src="http://lorempixel.com/200/150/city/6" /></div>
</div> 
```

你可以使用一个CSS

```
#container{
    overflow:auto;
}
#container > div{
    float:left;
}
#container > div > img{
    width:100%;
    display:block;
}

@media screen and (max-width:400px){
  #container > div{
    width:50%;
  }
}
@media screen and (min-width:401px) and (max-width:600px){
  #container > div{
    width:25%;
  }
}
@media screen and (min-width:601px){
  #container > div{
    width:20%;
  }
} 
```

这意味着当浏览器的宽度达到 400px 时使用 2 列，对于 401px 和 600px 之间的宽度使用 4 列，对于大于 600px 的宽度使用 5 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:51:11.720

我找到了这个例子来说明你的意思：

[http://dabblet.com/gist/2778608](http://dabblet.com/gist/2778608)

这应该会有所帮助。我不确定如何将悬停与此集成。让我知道你是否知道。

此外，尝试使用响应式框架来节省大量时间：

[http://foundation.zurb.com](http://foundation.zurb.com)

# git - 如何让git在合并时忽略目录

> ID：14369378
> 
> 赞同：47
> 
> 时间：2013-01-16T22:52:19.860
> 
> 标签：git, merge

[与如何设置 git 驱动程序以在合并时忽略文件夹](https://stackoverflow.com/questions/3111515/how-to-setup-a-git-driver-to-ignore-a-folder-on-merge)的答案一样有趣和有用，它没有回答仍然让我难过的原始问题。

与上面链接的问题不同，我有两个具有相同目录集的分支，为了将一个分支合并到另一个分支中，我需要 git 完全忽略一个目录。

我使用自己的合并驱动程序进行了尝试，如[如何告诉 git 始终为特定文件的冲突合并选择我的本地版本？](https://stackoverflow.com/questions/928646/how-do-i-tell-git-to-always-select-my-local-version-for-conflicted-merges-on-a-s?lq=1)但这种方法的问题在于，只有在这两个分支中存在实际冲突文件时才会调用此驱动程序。每当文件的更改仅在一个分支上时，git 会合并它们而不调用我的合并驱动程序。

这会导致目录中的文件发生我不想要的更改。知道如何让 git 一直忽略该目录中的每个文件 - 无论它是否被触及？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-16T23:29:24.943

我实际上并没有使用 Git，但我认为这适用于您的情况：

使用类似于此处指定的内容：[https ://gist.github.com/564416](https://gist.github.com/564416)

```
git checkout master    
git merge --no-commit --no-ff development
git reset -- /path/to/folder # revert updates from path
git commit 
```

同样，我不使用 git，我只是根据我对 TryGit 的经验来思考我认为事情是如何工作的。

1.  结帐大师
2.  合并，但不要提交，不要快进。
3.  合并现在已上演，因此重置整个目录树
4.  犯罪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-02T08:22:30.803

假设我在分支登台想要合并 dev 并忽略 /build 文件夹中的更改：

```
git checkout staging
# go to staging branch

git checkout dev .
# this checkout dev file changes into staging

git reset HEAD build
# this remove added file in build folder

git clean -f
# this drops untracked files we just reseted

git checkout -- .
# this drops changed files we just rested

git status
# check is everything ok

git commit -am 'merge dev into branch'
# create a commit

git merge -s ours dev
# this create a fake merge to trick Git into thinking that a branch is already merged when doing a merge later on. 
```

这个解决方案并不完美，因为它将所有提交合并为一个。这意味着挑选一些提交可能不合适。

但它能够避免由于重命名/新建/删除导致需要清理的构建文件夹中的大量提交。

# bash - 双括号不适用于 -d 和 -f 命令

> ID：14369381
> 
> 赞同：1
> 
> 时间：2013-01-16T22:52:24.900
> 
> 标签：bash

```
if [[ -d "$HOME/test_bash/$KIT.stat_$KIT" ]; then
echo $KIT
else
mkdir $KIT.stat_$KIT
fi
if [[ "14"=="14" ]]; then 
echo "FOO"
fi 
```

第一个带有 [[ -d 的 if 语句不起作用，但是当我使用 bash test.sh 命令时，第二个 if 语句 "14"=="14" 确实起作用。但是，如果我将第一个 if 语句 '[[' 替换为单个括号 '['，它就可以工作。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:04:01.560

您的第一行只有一个结束`]`。

# ios - 按字母顺序排列的核心数据表

> ID：14369382
> 
> 赞同：0
> 
> 时间：2013-01-16T22:52:26.530
> 
> 标签：ios, core-data

我正在尝试使用从我的应用程序中的核心数据加载的联系人列表制作一个表格视图。

我正在使用 NSFetchedResultsController。

在启动应用程序时，我从通讯录中提取联系人并将它们添加到 Core Data。这样我就可以独立于地址簿管理联系人。在创建联系人对象时，我有一个 create 方法，其中包括以下代码：

```
contact = [NSEntityDescription insertNewObjectForEntityForName:@"Contact" inManagedObjectContext:context];
contact.name = name;
NSString *initial = [name substringToIndex:1];
NSString *capitalisedInitial = [initial capitalizedString];
contact.nameInitial = capitalisedInitial; 
```

这会将联系人的第一个字母保存到联系人对象的属性中。

在我的表视图控制器代码中，我设置了 NSFetchedResultsController 如下

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Contact"];
NSSortDescriptor *descriptor1 = [NSSortDescriptor sortDescriptorWithKey:@"nameInitial" ascending:YES];
NSSortDescriptor *descriptor2 = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(caseInsensitiveCompare:)];
request.sortDescriptors = [NSArray arrayWithObjects:descriptor1, descriptor2, nil];
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.contactsDatabase.managedObjectContext sectionNameKeyPath:@"nameInitial" cacheName:nil]; 
```

我的问题仅在我第一次运行应用程序时出现（从设备中删除应用程序后）。当我打开应用程序后直接打开联系人页面时，它显示一个完全空白的表格，并且在任何时候都不会刷新。如果我关闭应用程序（而不是删除）并重新启动它，表就可以正常工作。

另一个奇怪的是，在上面的最后一行代码中，如果我删除 @"nameInitial" 并使用 nil 代替 sectionNameKeyPath，一切正常，没有故障。但是我真的很想拥有这些部分，因为用户期望添加的快捷方式的字母列。

我想这与数据库未准备好或表首次加载时有关，但我认为这些获取的结果控制器应该监听数据库的更新并在准备好时进行相应的更新？

任何想法真的很感激......

编辑：

一些进一步的信息：

在第一次加载 numberOfSectionsInTableView 委托方法返回 0。这似乎是问题的原因。在随后的加载中，它会返回正确的数字。我已经记录了获取的结果控制器，它每次都获取一整套结果......

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   NSLog([NSString stringWithFormat:@"Number of Sections = %i", [[self.fetchedResultsController sections] count]]);
   return [[self.fetchedResultsController sections] count];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:32:16.867

你是否正确地[响应变化](http://developer.apple.com/library/ios/documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008227-CH1-SW28)？从文档...

> 直到控制器的托管对象上下文收到 processPendingChanges 消息后，更改才会反映。因此，如果您更改托管对象的属性值，以使其在获取的结果控制器的结果集中的位置发生更改，则控制器报告的其索引通常不会更改，直到当前事件周期结束（调用 processPendingChanges 时） ）。

听起来在您初始导入后，您的上下文没有处理它的更改，因此没有通知您的 FRC

# database - Neo4J 修改节点被忽略

> ID：14369383
> 
> 赞同：0
> 
> 时间：2013-01-16T22:52:32.833
> 
> 标签：database, neo4j, nosql

我正在使用此代码打开数据库：

```
GraphDatabaseAPI graphdb2 = (GraphDatabaseAPI) new GraphDatabaseFactory().newEmbeddedDatabaseBuilder("D:\\test\\neo4j\\data").setConfig(ShellSettings.remote_shell_enabled, "TRUE").
        setConfig(GraphDatabaseSettings.node_keys_indexable,
        USERNAME_PROPERTY + "," + TITLE_PROPERTY + ","
        + NAME_PROPERTY + "," + LABEL_PROPERTY + "," + TYPE_PROPERTY).
        setConfig(GraphDatabaseSettings.relationship_keys_indexable,
        USERNAME_PROPERTY).
        setConfig(GraphDatabaseSettings.node_auto_indexing, "true").
        setConfig(GraphDatabaseSettings.relationship_auto_indexing,
        "true").
        newGraphDatabase();
ServerConfigurator config;
config = new ServerConfigurator(graphdb2);
config.configuration().setProperty(
        Configurator.WEBSERVER_PORT_PROPERTY_KEY, 1234);
srv = new WrappingNeoServerBootstrapper(graphdb2, config);
srv.start();
graphDb = srv.getServer().getDatabase().getGraph();
registerShutdownHook(graphDb); 
```

但是，当我的应用程序停止运行时，所有修改都将被忽略。

这是为什么？

# objective-c - 提前“完成”的自定义segue？

> ID：14369384
> 
> 赞同：0
> 
> 时间：2013-01-16T22:52:39.153
> 
> 标签：objective-c, xcode, uiviewcontroller, segue, cgrect

我正在寻找实现一个自定义 segue 来推送到 UIViewController，但在新的 UIViewController 完全填满屏幕之前完成，从而使一些源视图控制器仍然在视图中并且可以正常工作。（例如；新的视图控制器覆盖了用户界面的一半）。

我热衷于使用 segue 而不是使用 CGRect、Quartz 框架方法或类似方法移动的视图，因为约束很容易变得混乱，除非自定义 segue 可以利用这些方法（？）

任何指针都非常欢迎！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:58:07.630

对于此任务，您将使用[容器视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)，它一次管理和显示多个其他视图控制器的内容，同时让它们像平常一样与它们的视图交互。这方面的一个例子是[UISplitViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)，它一次显示两个视图控制器的视图，一个在屏幕的每一侧。您可以设计 segue，在容器视图控制器中替换显示的多个视图控制器，类似于 Apple 实施的 Replace Segue 替换 UISplitViewController 的详细视图控制器（右侧的那个）。

# html - 向具有类的节点的第一个子节点添加星号

> ID：14369389
> 
> 赞同：-2
> 
> 时间：2013-01-16T22:52:51.600
> 
> 标签：html, css

我正在尝试在标签前添加一个星号符号，使其看起来像 *Country 基于具有“必需”类的父节点

```
 <span id="Country" class="none required">
  <label for="id_Country">Country</label>
    <select name="Country[]" id="id_Country">
       <option value="Paraguay">Paraguay</option>
       <option value="Peru">Peru</option>
    </select>
  </span> 
```

我正在尝试类似的东西：

```
.required:first-child:before {
    content : "* ";
    color   : red;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:59:33.410

如果您尝试在`*`之前应用`label`，那么您需要使用 CSS 选择器，如下所示：

```
.required > label:first-child:before {
    content : "* ";
    color   : red;
} 
```

选择`:first-child`器适用于它正在修改的实际元素。换句话说，它需要被读作“在第一个孩子的标签之前应用这个css到它的父级。这个父级还必须有一个必需的类”而不是“在节点的第一个孩子之前应用这个css需要作为类”，就像您在原始示例中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:01:59.440

您错误地使用了选择器，`first-child` [定义](http://www.quirksmode.org/css/firstchild.html)：

> :first-child 伪类表示“如果此元素是其父元素的第一个子元素”。

在您的情况下，这意味着“如果`.required`是*其父母的第一个孩子*”。我不认为那是你的意图。

怎么样：

```
$('label', '.required').prepend('*'); 
```

干杯

# c++ - 使用 X11/Xlib 确定队列中是否有事件

> ID：14369394
> 
> 赞同：1
> 
> 时间：2013-01-16T22:53:40.750
> 
> 标签：c++, x11, xlib

我正在开发一个 X11 应用程序，我正在尝试编写一个函数来处理当前队列中的任何事件，然后返回而不阻塞。

我发现的所有 Xlib 教程都在一个永久循环中使用 XNextEvent，该循环在每个 XNextEvent 调用上阻塞，直到事件准备好。

我查看了带有 QueuedAlready 的 XEventsQueued，它似乎应该返回准备处理的事件数，但即使我知道有可以使用 XNextEvent 检索的事件，它也总是返回 0。

我在这里遗漏了什么，还是有另一种方法来确定队列中是否有可用的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:43:09.230

好吧，如果您只是使用 QueuedAlready 调用 XEventsQueued，那么看起来事件永远不会从连接中读取并放入队列中。使用 QueuedAfterFlush 调用 XEventsQueued 将刷新输出缓冲区，然后将连接上可用的任何事件读入事件队列。XPending 做同样的事情。QueuedAfterFlush 或 XPending 是我需要的。

# ios - AlAssetsGroup 枚举需要很长时间才能在大型组上启动

> ID：14369396
> 
> 赞同：3
> 
> 时间：2013-01-16T22:53:45.520
> 
> 标签：ios, alassetslibrary

当 ALAssetsGroup 很大时，从调用 enumerateAssetsUsingBlock: 或 enumerateAssetsAtIndexes: 到调用第一个枚举块的时间之间会有几秒钟的延迟。

在库中有 10000 个资产的 iPad 2 上，此延迟大约是调用第一个资产块之前的 4.2 秒。

具有相同库的同一设备上的 Photos.app 将在不到一秒的时间内启动，显示库中的所有照片。我不知道它是怎么做到的。这就是我们希望看到的行为。

这是一个显示行为的最小测试用例：

```
ALAssetsLibrary* assetLibrary = [ALAssetsLibrary new];
[assetLibrary enumerateGroupsWithTypes:ALAssetsGroupLibrary
                            usingBlock:^(ALAssetsGroup *group, BOOL *stop)
 {
     if (group != nil) {
         NSLog(@"*** Got library group, start timer");
         NSDate* tic = [NSDate date];

         [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:0] options:0 usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
          {
              if (result==nil) {
                  NSLog(@"*** Elapsed time to final enumeration: %.2fs", -[tic timeIntervalSinceNow]);
              }
              else if (index==0) {
                  NSLog(@"*** Elapsed time to image 0: %.2fs", -[tic timeIntervalSinceNow]);
              }
          }];

         *stop = YES;
     }
 }
                          failureBlock:^(NSError *error)
 {
     NSLog(@"ERROR: %@", [error localizedDescription]);
 }]; 
```

输出：

```
*** Got library group, start timer
*** Elapsed time to image 0: 4.20s
*** Elapsed time to final enumeration: 4.20s 
```

（请注意，在这个（略有不同）问题中接受的解决方案不起作用。延迟发生在甚至到达第一个资产之前：[加速从 ALAssetsLibrary 读取和填充 UITableView 的可能方法](https://stackoverflow.com/questions/10239242/possible-ways-to-speed-up-reading-from-alassetslibrary-and-populating-a-uitablev)）

# c# - 将按键事件与文本框数组中的事件处理程序相关联

> ID：14369401
> 
> 赞同：0
> 
> 时间：2013-01-16T22:54:36.963
> 
> 标签：c#, winforms

我有一个数组，`textboxes`它在运行时生成一个可变数量`textboxes`的值，这些值`textbox`已经创建到表单中。

```
 int n;
 TextBox[] tb;        

 public void AggiungiArmoniche()
 {
        n = int.Parse(textBox4.Text);
        tb = new 
        TextBox[n];

    for (int i = 1; i < tb.Length; i++)
    {
        tb[i] = new TextBox();            
        tb[i].Name = "textBox" + i;                
        tb[i].Location = new Point(100 *i, 163);
        tb[i].Size = new Size(48, 20);
        tb[i].KeyPress += System.Windows.Forms.KeyPressEventHandler(textBoxP_KeyPress);            
        groupBox1.Controls.Add(tb[i]);            
    }
} 

private void textBoxP_KeyPress(object sender, KeyPressEventArgs e)
{
  // statements of the event        
} 
```

当我移动到我将事件与事件处理程序相关联的行时，它会给出错误*，它不是比赛中的有效构造”（特别是在单词中`keypresseventhandler`）*

关联中是否存在语法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:13:33.107

删除 KeyPressEventHandler 并像这样添加事件处理程序

```
tb[i].KeyPress += textBoxP_KeyPress; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:05:02.620

新的

```
tb[i].KeyPress += new System.Windows.Forms.KeyPressEventHandler(textBoxP_KeyPress); 
```

# php - Symfony2.1：得到以下错误致命错误：类 'Acme\.......' 未找到

> ID：14369402
> 
> 赞同：0
> 
> 时间：2013-01-16T22:54:38.437
> 
> 标签：php, symfony

这可能很简单，但我很难过。这是我正在尝试将 csv 文件加载到实体中的操作。我找到了一个 php 插件，但不知道如何安装，所以我下载了插件并使用脚本将 csv 文件读入我的包 Acme\StoreBundle 并实际将脚本 (sfCsvReader.php) 放在实体文件夹中当我尝试在网络上运行它时捆绑我收到以下错误

致命错误：在第 26 行的 /home/jan/symfonysandbox/src/Acme/StoreBundle/Controller/LoadCSVController.php 中找不到类 'Acme\StoreBundle\Controller\sfCsvReader'

我的控制器文件如下

```
<?php

namespace Acme\StoreBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Acme\StoreBundle\Entity\Congress;
use Acme\StoreBundle\Entity\sfCsvReader;

use Symfony\Component\HttpFoundation\Response;

class LoadCSVController extends Controller
{
    /**
     * @Route("/load/{name}")
     * @Template()
     */
public function indexAction()
{
 $congress = new Congress();
 $path = '~/Documents/congress.csv';
 $reader = new sfCsvReader($path);
 $reader->setSelectColumns('column_A, column_B');
 $reader->open();

    while ($data = $reader->read())
    {

    $congress->setTitle($data['column_A']);
    $congress->setName($data['column_B']);

    $em = $this->getDoctrine()->getManager();
    $em->persist($congress);
    $em->flush();

    return new Response('Created congress id '.$congress->getId() .'for'.$congress->getTitle().'for'.$congress->getName()); 
   }
    $reader->close();
}
} 
```

它的调用脚本是

sfCsvReader

```
<?php
namespace Acme\StoreBundle\Controller;
/**
 * sfCsvReader
 * by Carlos Escribano <carlos@markhaus.com>
 *
 * $csv = new sfCsvReader("/path/to/a/csv/file.csv");
 * $csv->open();
 * $csv->setSelectColumns('field_A, field_B'); // or array('field_A', 'field_B')
 * while ($data = $csv->read())
 * {
 *   // do something with $data['field_A'] and $data['field_B']
 * }
 * $csv->close();
 *
 * --- Alternative ---
 * $csv = new sfCsvReader("/path/to/a/csv/file.csv");
 * $csv->setSelectColumns('field_A, field_B'); // or array('field_A', 'field_B')
 * $csv->open();
 * ...
 * --- Alternative: NUMERICAL INDEXES ---
 * $csv = new sfCsvReader("/path/to/a/csv/file.csv");
 * $csv->open();
 * while ($data = $csv->read())
 * {
 *   // do something with $data[0] and $data[1]
 * }
 * $csv->close();
 * 
 *
 * --- CHARSET ---
 * $to = 'ISO-8859-1';
 * $from = 'UTF-8';
 * $csv->setCharset($to);
 * $csv->setCharset($to, $from);   
 */
class sfCsvReader
{
  private
    $header;

  private
    $file,
    $path,
    $initialized;

  private
    $length,
    $delimiter,
    $enclosure,
    $to,
    $from;

  /**
   * @param string  $path      Path to the file to read
   * @param char    $delimiter Character delimiting fields    (Optional)
   * @param char    $enclosure Character enclosing fields     (Optional)
   * @param integer $length    PHP's fgetcsv length parameter (Optional)
   */
  function __construct($path, $delimiter = ',', $enclosure = '"', $length = null)
  {
    $this->path      = $path;
    $this->length    = $length;
    $this->delimiter = $delimiter;
    $this->enclosure = $enclosure;

    $this->header = array(
      'map'      => null,
      'selected' => array()
    );

    $this->initialized = false;
  }

  public function close()
  {
    if ($this->file !== null)
    {
      fclose($this->file);
      $this->file = null;
      $this->initialized = false;
    }
  }

  public function open($path = null)
  {
    $this->close();

    if ($path !== null)
    {
      $this->path = $path;
    }

    if (!($this->file = fopen($this->path, "r")))
    {
      throw new Exception("File can not be opened (".$this->path.").");
    }

    $this->initialized = true;
    $this->map();
  }

  public function setSelectColumns($selected = array())
  {
    $this->test = true;

    if (!is_array($selected))
    {
      $selected = explode(',', preg_replace('/\s+/', '', $selected));
    }

    $this->header['selected'] = $selected;
    $this->map();
  }

  public function clearSelectColumns()
  {
    $this->header['selected'] = array();
    $this->map();
  }

  private function map()
  {
    if ($this->initialized)
    {
      $this->all = false;

      $x = count($this->header['selected']); // N. of selected columns
      $y = 0;                                // N. of real columns
      $z = 0;                                // N. of matching columns

      if ($x == 0)
      { // No selection. All fields.
    $this->header['map'] = null;
      }
      else
      {
    $this->header['map'] = array();

    fseek($this->file, 0, SEEK_SET);

    if ($line = fgetcsv($this->file, $this->length, $this->delimiter, $this->enclosure))
    {
      $y = count($line);

      if ($y > 0)
      {
        $common = array_intersect($line, $this->header['selected']);

        $z = count($common);

        if (($y < $x) || (($x > $z) && ($z > 0)))
        { // More columns in selection than in file or less common columns than selection
          throw new Exception("Too much columns or non existing columns in selection (LINE: $y, SEL: $x, COMMON: $z).");
        }

        if ($z == 0)
        { // Relaxed Mapping: 0 matches found, numerical.
          foreach ($this->header['selected'] as $i => $name)
          {
            $this->header['map'][$name] = $i;
          }

          fseek($this->file, 0, SEEK_SET);
        }
        else if ($z == $x)
        { // Absolute Mapping: First line is header.
          foreach ($line as $i => $name)
          {
            $this->header['map'][$name] = $i;
          }
        }
      } // Has columns
    } // Read line
      } // N columns selected
    } // Initialized
  }

  public function read()
  {
    if (!$this->initialized)
    {
      throw new Exception('sfCsvReader is not ready.');
    }

    if ($line = fgetcsv($this->file, $this->length, $this->delimiter, $this->enclosure))
    {
      if (is_array($this->header['map']))
      {
    $res = array();
    foreach ($this->header['selected'] as $name)
    {
      if ($this->to !== null)
      {
        $res[$name] = $this->encode($line[$this->header['map'][$name]], $this->to, $this->from);
      }
      else
      {
        $res[$name] = $line[$this->header['map'][$name]];
      }
    }
    return $res;
      }
      else
      {
    return $line;
      }
    }
    else
    {
      return null;
    }
  }

  private function encode($str, $to, $from = null)
  {
    if ($from === null)
    {
      $from = mb_detect_encoding($str);
    }

    if (function_exists('iconv'))
    {
      return iconv($from, $to, $str);
    }
    else
    {
      return mb_convert_encoding($str, $to, $from);
    }
  }

  public function setCharset($to, $from = null)
  {
    $this->to = $to;
    $this->from = $from;
  }

  function __destruct()
  {
    $this->close();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:47:08.753

您是否在调用脚本之前加载脚本？

尝试将以下代码添加到数组声明中的*app/autoload.php*中：`$loader->registerNamespaces(array(...`

```
 'SfCsvReader' => __DIR__.'/../src/Acme/StoreBundle/Entity/sfCsvReader.php', 
```

之后，将*sfCsvReader.php*文件中的命名空间重命名为，`namespace SfCsvReader\sfCsvReader;`并将控制器中请求的命名空间替换为`use SfCsvReader\sfCsvReader;`.

这应该可以正常工作，但也许您应该将文件移动到更合适的目录，例如在项目的*vendor/sfCsvReader*目录中。

您可以遵循 Symfony 2.0 文档中的建议。

自动加载信息位于以下链接[ClassLoader Component](http://symfony.com/doc/2.0/components/class_loader.html)中。

有关命名空间的更多信息可以在[php.net](http://php.net/manual/en/language.namespaces.php)中找到。

# java - 避免代码重复——最佳方法

> ID：14369405
> 
> 赞同：5
> 
> 时间：2013-01-16T22:54:52.313
> 
> 标签：java, design-patterns

我有两个方法具有相同的列表和参数类型以及几乎相同的主体，但它们中的每一个都调用另一个函数来获取元素列表。更准确地说：

```
 public void method1 (int a, int b) {
            //body (the same in both of methods)
            List<SomeObject> list = service.getListA(int c, int d);
            //rest of the body (the same in both of methods)
        }

        public void method2 (int a, int b) {
            //body (the same in both of methods)
            List<SomeObject> list = service.getListB(int c, int d, int e);
            //rest of the body (the same in both of methods)
        } 
```

在这种情况下，避免代码重复问题的最佳方法是什么？我考虑了策略模式，但参数列表存在差异。

更新：

```
 public void method1 (int a, int b) {
            //body (the same in both of methods)
            int c = some_value;
            List<SomeObject> list = service.getListA(a, b, c);
            //rest of the body (the same in both of methods)
        }

        public void method2 (int a, int b) {
            //body (the same in both of methods)
            int c = some_value;
            int d = another_value;
            List<SomeObject> list = service.getListB(a, b, c, d);
            //rest of the body (the same in both of methods)
        } 
```

所以有些变量是本地的，有些是通过参数传递的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T22:57:33.293

将它们分解为其他方法。

```
public void method1 (int a, int b) {
        MyClass myClass = method3(a, b);
        List<SomeObject> list = service.getListA(myClass.getC(), myClass.getD());
        method4(list);
}

public void method2 (int a, int b) {
        MyClass myClass = method3(a, b);
        List<SomeObject> list = service.getListB(myClass.getC(), myClass.getD(), myClass.getE());
        method4(list);
}

public MyClass {
    private final int c;
    private final int d;
    private final int e;
    ...
}

public MyClass method3(int a, int b) {
    // body
    return new MyClass(c, d, e)
}

public void method4(List<SomeObject> list) {
    // rest of body
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T23:01:23.517

在您的情况下避免代码重复的一种方法可能是引入一个额外的参数，该参数用于决定将使用哪种方法来检索列表：

```
public void method (int a, int b, int method) {
    //body (the same in both of methods)
    List<SomeObject> list = null;
    switch (method) {
        case 1: 
            list = service.getListA(int c, int d);
            break;
        case 2: 
            list = service.getListB(int c, int d, int e);
            break;
    }
    //rest of the body (the same in both of methods)
} 
```

`int method`我将使用新`enum`类型并在语句中定义一个`default`案例，而不是用作附加参数。`switch`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T23:12:33.570

将 service.getListA 或 service.getListB 的调用封装在 ListSource 类/接口中，在具体类中实现每个版本，并将具体实例作为第三个参数传递。这基本上是 jlordo 提出的答案的面向对象版本。

```
interface ListSource {
    List<SomeObject> getList(int c, int d, int e);
}

class ListSourceA implements ListSource {
    // constructor etc.
    @Override
    public getList(int c, int d, int e) {
      return service.getListB(c, d);
    }
}

class ListSourceB implements ListSource {
    // constructor etc.
    @Override
    public getList(int c, int d, int e) {
      return service.getListA(c, d, e);
    }
}

public void method (int a, int b, ListSource source) {
    //body (the same in both of methods)
    List<SomeObject> list = source.getList(int c, int d, int e);
    //rest of the body (the same in both of methods)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T23:14:12.040

```
public void method (int a, int b, List<SomeObject> theList) {
    //body (the same in both of methods)
    List<SomeObject> list = theList;
    //rest of the body (the same in both of methods)
} 
```

这对我来说消除了所有代码重复，这意味着每次我们想要对使用不同方法签名派生的列表进行操作时都不必修改方法。

如果使用泛型不知道 SomeObject 类型，我相信你可以进一步这样做（而且我不是 java 程序员，所以你必须[阅读文档](http://docs.oracle.com/javase/tutorial/java/generics/types.html)）

```
public void method (int a, int b, List<T> theList) {
    //body (the same in both of methods)
    List<T> list = theList;
    //rest of the body (the same in both of methods)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T23:15:45.137

您还可以使用枚举：

```
public void method(int a, int b, Service service) {
    // body
    List<SomeObject> list = service.getList(myClass);
    // rest
}

public enum Service {
    METHOD_1 {
        @Override
        public List<SomeObject> getList(MyClass myClass) {}
    },
    METHOD_2 {
        @Override
        public List<SomeObject> getList(MyClass myClass) {}
    };

    public abstract List<SomeObject> getList(MyClass myClass);
}

public MyClass {
    private final int c;
    private final int d;
    private final int e;
    ...
} 
```

本质上与@proskor 相同，只是形式不同。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-16T23:20:51.443

如果身体部位相互依赖，那么你不能像@dicarlo2 的回答那样做：

```
private interface GetObjects {
    List<SomeObject> get();
}

public void method1(int a, int b) {
    impl(a, b, new GetObjects() { public List<SomeObject> get() {
        return service.getListA(c, d);
    }});
}

public void method2(int a, int b) {
    impl(a, b, new GetObjects() { public List<SomeObject> get() {
        return service.getListB(c, d, e);
    }});
}

private void impl(int a, int b, GetObjects getObjects) {
    //body (the same in both of methods)
    List<SomeObject> list = getObjects.get();
    //rest of the body (the same in both of methods)
} 
```

`GetObjects`如果您担心，您可以使用枚举代替`new`，但不介意将顺序混淆，错过外部`this`并且不想打开它（尽管它可以实现公共接口）。

Java SE 8 中可能会出现更好的语法。IIRC，大致如下：

```
public void method1(int a, int b) {
    impl(a, b, { -> service.getListA(c, d) });
} 
```

# c# - 找不到具有名称和合同的端点元素

> ID：14369406
> 
> 赞同：6
> 
> 时间：2013-01-16T22:55:23.200
> 
> 标签：c#, wcf, binding, wcf-client, wcf-configuration

我添加了对具有两个端点的 WCF 服务的引用。添加服务时，将以下内容添加到配置文件中：

```
<client>
  <endpoint name="ABCServiceV1" address="http://staging.ABCwebservices.com/ABC/Service.svc"
    binding="basicHttpBinding" bindingConfiguration="ABCServiceV1"
    contract="ABCService.IService"  />
  <endpoint name="ABCServiceV2" address="http://staging.ABCwebservices.com/ABC/Service.svc/20"
    binding="basicHttpBinding" bindingConfiguration="ABCServiceV2"
    contract="ABCService.IService1"  />
</client> 
```

创建客户端的代码如下：

```
ABCService.ServiceClient ABCClient = new ServiceClient("ABCServiceV2"); 
```

但是，我收到运行时错误 - “在 ServiceModel 客户端配置部分中找不到名称为 'ABCServiceV2' 和合同 'ABCService.IService' 的端点元素。这可能是因为找不到您的应用程序的配置文件，或者因为没有可以在客户端元素中找到匹配此名称的端点元素。”

如果我使用`ABCService.ServiceClient ABCClient = new ServiceClient("ABCServiceV1");`，那么一切正常。但是当使用 ABCServiceV2 时，它会尝试寻找合同 - ABCService.IService - 它应该在寻找时 - ABCService.IService1。

我如何让它寻找正确的合同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:33:51.263

如果您添加了对不同服务 (ABCServiceV2) 的第二个引用，那么我相信这将为 ABCServiceV2 生成第二个服务类。这两个类将实现单独的合同（ABCService.IService 和 ABCService.IService1），因此您将无法互换端点。

我相信您应该能够像这样初始化您的两个服务端点：

```
ABCService.ServiceClient ABCClient = new ServiceClient("ABCServiceV1");
ABCService.Service1Client ABCClient1 = new Service1Client("ABCServiceV2"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-15T05:22:35.250

即使这篇文章很旧并且已经回答，但答案对我来说并没有帮助。**我的问题是我使用svcutil.exe**工具生成了服务客户端，但根本没有指定任何命名空间；所以合约命名空间名称默认生成为模式文档的目标命名空间，是的，一团糟。

另一方面，我试图使用将服务引用添加到项目时生成的配置文件。此文件中的合约命名空间是 ServiceReference1（默认情况下）或您想要的任何其他名称，完美风暴！但我所要做的就是从 FQN`<endpoint>`的 contract 属性中删除命名空间部分，然后 CLR 就可以看到该合约。

希望这对其他人有帮助

# javascript - 如何在 TypeScript 声明源文件中声明嵌套函数？

> ID：14369408
> 
> 赞同：3
> 
> 时间：2013-01-16T22:55:28.203
> 
> 标签：javascript, typescript

我正在为[KeyboardJS](http://robertwhurst.github.com/KeyboardJS/)构建声明源文件。该 API 是从加载 JavaScript 文件时实例化的静态对象 (KeyboardJS) 引用的。API 的一些方法嵌套在其他方法下。例如：

```
KeyboardJS.clear(keyCombo); 
```

和

```
KeyboardJS.clear.key(key); 
```

这是我的接口定义：

```
interface KeyboardJSStatic {
    enable(): void;
    disable(): void;
    activeKeys(): string[];
    on(keyCombo:string, onDownCallback?: (keyEvent: Event, keysPressed: string[], keyCombo: string) => {}, onUpCallback?: (keyEvent: Event, keysPressed: string[], keyCombo: string) => {}): KeyboardJSBinding;
    clear(keyCombo: string): void;
    clear.key(keyName: string): void;
    locale(localeName: string): KeyboardJSLocale;
    locale.register(localeName: string, localeDefinition: KeyboardJSLocale): void;
    macro(keyCombo:string , keyNames: string[]): void;
    macro.remove(keyCombo: string): void;
    key: KeyboardJSKey;
    combo: KeyboardJSCombo; 
} 
```

Visual Studio 2012 的 TypeScript 插件在 clear.key 行上生成并出错，建议在句点所在的位置使用分号。有没有人用类似的场景建立一个定义文件？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T00:05:30.287

您可以在如下类型上声明调用签名：

```
interface KeyboardJSStatic {
    // ...
    clear: {
        (keyCombo: string): void; // Call signature
        key(keyName: string): void; // Method
    };
    // ...
}

var n: KeyboardJSStatic;
n.clear('a'); // OK
n.clear.key('b'); // OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:12:11.003

来自瑞安的天才评论。使用与 jQuery 定义相同的模式，您可以执行以下操作：

```
interface KeyboardJSClear {
    (keyCombo: string) : void;
    key(keyName: string): void;
}

interface KeyboardJSLocale {
    (localeName: string) : KeyboardJSLocale;
    register(localeName: string, localeDefinition: KeyboardJSLocale): void;
}

interface KeyboardJSMacro {
    (keyCombo:string , keyNames: string[]): void;
    remove(keyCombo: string): void;
}

interface KeyboardJSStatic {
    enable(): void;
    disable(): void;
    activeKeys(): string[];
    on(keyCombo:string, onDownCallback?: (keyEvent: Event, keysPressed: string[], keyCombo: string) => {}, onUpCallback?: (keyEvent: Event, keysPressed: string[], keyCombo: string) => {}): KeyboardJSBinding;
    clear: KeyboardJSClear;
    locale: KeyboardJSLocale;
    macro: KeyboardJSMacro;
    key: KeyboardJSKey;
    combo: KeyboardJSCombo; 
}

declare var KeyboardJS: KeyboardJSStatic;

KeyboardJS.clear('');
KeyboardJS.clear.key(''); 
```

# extjs - 控制器中的 extjs4 MVC 侦听器

> ID：14369410
> 
> 赞同：0
> 
> 时间：2013-01-16T22:55:42.337
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2, extjs-mvc

我无法在控制器中为系列图表的“itemmouseup”事件创建侦听器。

控制器：

```
init: function () {
    this.control({
        'monthbalance > chart': {
            render: this.onChartRendered,
            itemmouseup : this.onChartClick
        },          
    });
}, 
```

如果我插入 'mouseup' 事件而不是 'itemmouseup' 它工作正常。但我需要'itemmouseup'。我哪里错了？

谢谢。

使用视图提取更新：

```
 },{
        id: 'card-1',
        xtype: 'chart',
        store: 'MonthBalances',
        title: 'This Year vs Previous Years',
        theme: 'Category1',
        legend: {position: 'right'},
        shadow: true,
        axes: [{
            type: 'Numeric',
            position: 'left',
            fields: ['monthbalance','monthlastyear','monthpreviousyear'],
            label: {
                renderer: Ext.util.Format.numberRenderer('0,0')
            },
            grid: true,
            minimum: 0
        },{
            type: 'Category',
            position: 'bottom',
            fields: ['month']
        }],

        series: [{
            type: 'line',
            title: 'this year',
            itemId: 'lineone',
            highlight: {
                size: 7,
                radius: 7
            },
            axis: 'left',
            xField: 'month',
            yField: 'monthbalance',
        //  listeners: {
        //      itemmouseup: function() {
        //          console.log('itemmouseup-thisyear');
        //      }
        //  },
        },{
            type: 'line',
            title: 'one year ago',
            itemId: 'linetwo',
            highlight: {
                size: 7,
                radius: 7
            },
            axis: 'left',
            xField: 'month',
            yField: 'monthlastyear',
        },{
            type: 'line',
            id: 'linethree',
            name: 'linethree',
            itemId: 'linethree',
            alias: 'widget.linethree',
            title: 'two years ago',
            highlight: {
                size: 7,
                radius: 7
            },
            axis: 'left',
            xField: 'month',
            yField: 'monthpreviousyear',

        }]
    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:34:16.063

**[因为Chart](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.chart.Chart)**没有`itemmouseup`事件。此事件仅适用于扩展或`Ext.view.View``Ext.panel.Table`

> 我认为您需要直接访问该系列，而不是包含该系列的图表。将控件设置为您在图表中使用的系列本身，而不是图表。您可以通过设置系列图表的*id*属性来做到这一点，以便您可以将控件绑定到该 id。

```
// untested but it should work
init: function () {
    this.control({
        '#your-id': {
            itemmouseup : this.onChartClick
        },          
    });
}, 
```

# html - 导航栏宽度通过 CSS

> ID：14369418
> 
> 赞同：-4
> 
> 时间：2013-01-16T22:57:12.937
> 
> 标签：html, css, wordpress, formatting, styles

我正在尝试通过 CSS 设置 Wordpress 网站上导航栏的宽度。在 Mac (Safari/Chrome/Firefox) 上应该是 52.5em。但是，该设置会导致菜单在 Windows (IE) 上中断并换行成两行。

有没有更好的方法来设置宽度，使其在所有浏览器中看起来都不错（而不是静态宽度值）？我试过`width: 100%`了，但它这样做了：

![在此处输入图像描述](../Images/b776af753599c6a0c460ac306fdd338f.png)

我的 CSS 是：

`#navigation { width: 52.5em; }`

链接：[兽医宠物](http://vetpets.org)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:54:19.147

```
ul.nav {
    position: relative;
    margin-bottom: 0px;
    width: 760px;
    margin-right: 30px;
} 
```

宽度：760px；！！！！没有汽车！！！

使用开发... firefox的工具 Ctrl+Shift+I

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:05:59.500

尝试`margin-right: 30px;`在 ul.nav 中删除，它在 ie 上为我修复了它

# sql - Oracle 缓存的 SQL 脚本结果或输出

> ID：14369422
> 
> 赞同：1
> 
> 时间：2013-01-16T22:57:29.290
> 
> 标签：sql, oracle, oracle10g

我正在使用 Oracle 10G 和 Oracle SQL developer ver 3。我想知道 Oracle 是否在某处存储/缓存查询的结果，以便接下来您使用相同的参数执行相同的查询，检索数据所需的时间更短比你第一次执行脚本。

如果它会缓存这些结果多长时间？

我试图执行一个选择 SQL 脚本，在重复 3 次后，它检索数据和显示所需的时间减少了近一半。但有时，如果我在另一个数据库上执行相同的脚本，即使我重复多次，它似乎也不会做出任何改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:14:16.080

Oracle 在库缓存中缓存 SQL 语句。当您多次执行一条语句时（无论是否使用相同的绑定变量值），Oracle 都会使用库缓存中的数据来避免重新解析 SQL 语句并生成新的查询计划。但是，当您考虑调整单个查询时，这种缓存不太可能对性能产生有意义的影响。解析 SQL 语句并生成查询计划通常是一个非常快速的过程。

Oracle 还在缓冲区缓存中缓存数据块。因此，当您执行查询并读取特定数据块以获取表中特定行的数据时，该块将被缓存。这经常允许使用相同的绑定变量集执行相同的 SQL 语句来执行更少的物理读取，因为查询需要读取的更多块被缓存。通常，这些块存储在 LRU（最近最少使用）缓存中，因此它们将被缓存直到它过期，因为其他块更受欢迎（有例外情况使缓冲区缓存不同于纯 LRU 缓存 - 块例如，通过全表扫描读取的数据通常放在缓存的末尾而不是开头 - 但通常将其视为 LRU 缓存是合理的）。

然后你就拥有了 Oracle 之外的所有缓存。例如，您的操作系统通常会配置为缓存读取的文件部分，因此即使一个块在 Oracle 的缓冲区缓存中老化，它也可能在文件系统缓存中，这仍然比从磁盘读取块快得多. 大多数 SAN 还将缓存最近使用的数据，这将允许检索该数据而无需从磁盘读取它。通常，如果数据缓存在 Oracle 中会更有效，但从文件系统缓存或 SAN 缓存中检索块仍然比从物理驱动器读取块更有效。

连续多次运行查询通常会变得更快，因为您会强制将更多您感兴趣的块缓存在某个地方，并大大减少系统需要执行的物理 I/O 量。当然，如果您的查询不受 I/O 限制，或者您的查询针对的是已经缓存的数据，则差异会小得多。但是，完全有可能同一查询会从一天运行多次而不是第二天完全受益，因为有一天它感兴趣的块都没有被缓存和其他会话，另一天所有的它感兴趣的块已经被缓存了。

在 11g 中，您可以选择配置结果缓存，它允许您缓存特定查询的结果，而不仅仅是为了生成这些结果而读取的块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:09:48.360

Oracle 通常会缓存它从磁盘读取的每个页面，并会尝试尽可能长时间地保存该信息（它基本上是一个 MRU 缓存）。在尝试衡量数据库操作的性能时，这是一个非常重要的考虑因素；查询的后续执行通常会比第一次快得多。

如果查询需要很少的 I/O，或者超出缓存的容量，或者缓存被其他用户大量使用，则缓存可能不明显。

请注意，查询计划也会被缓存，这也会影响观察到的查询性能。

# dynamic - 以编程方式从动态单元格中触发 segue

> ID：14369425
> 
> 赞同：3
> 
> 时间：2013-01-16T22:57:40.503
> 
> 标签：dynamic, uitableview, ios6, segue

我有两个分组的部分，每个部分都包含一个单元格视图。单击时，我需要一个单元格转到一个场景，另一个单元格转到另一个。我已经设置了从主视图控制器到其他两个场景的转场，现在我需要指示程序在单击正确的单元格时触发转场。

我认为这必须发生在我的代码的这个区域，每个部分都是自定义的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *serverLocCell = [tableView dequeueReusableCellWithIdentifier:@"serverLocation"];

    switch (indexPath.section) {
        case 0:
            serverLocCell.textLabel.text = testLocation;
            serverLocCell.detailTextLabel.text = @"Change";
            break;
        case 1:
            serverLocCell.textLabel.text = @"Speed Test";
            serverLocCell.detailTextLabel.text = @"Change";
            break;
        default:
            break;
    }

    return serverLocCell;
} 
```

我想我也需要这个功能：

```
self preformSegueWithIdentifier 
```

但是不能完全确定正确的代码/位置。

两个 segue 都有自己的标识符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T14:24:53.830

您认为需要 performSegueWithIdentifier 是正确的。您需要此方法以编程方式触发 segue，这在您的情况下是必需的。

您将需要表视图委托 didSelectRowAtIndexPath 来调用 performSegueWithIdentifier，并根据所点击的单元格使用正确的标识符：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0) {
        [self performSegueWithIdentifier:@"YourFirstIdentifier" sender:nil];
    }
    else {
        [self performSegueWithIdentifier:@"YourSecondIdentifier" sender:nil];
    }
} 
```

# sql - sql 查询与 Active Record 查询帮助程序出错

> ID：14369427
> 
> 赞同：0
> 
> 时间：2013-01-16T22:57:57.360
> 
> 标签：sql, ruby-on-rails

我正在尝试在带有 Rails 查询帮助器方法的 Rails 应用程序中使用以下 sql 语句。在原始（非 Rails）应用程序中，此 sql 的结果是使用任何字母对某人的姓名进行模糊搜索。例如，如果您在搜索框中输入“a”，它将返回在某处包含字母“a”的每个人的姓名。“Marissa Jones”和“Andrea Barfs”都可以匹配。

```
 "select e.id, e.firstName, e.lastName, e.title " .
      "from employee e left join employee r on r.managerId = e.id " .
      "WHERE UPPER(CONCAT(e.firstName, ' ', e.lastName)) LIKE :name " .
      "group by e.id order by e.lastName, e.firstName"; 
```

我尝试使用一些 Rails 活动记录查询接口帮助方法来翻译该 sql 语句。（我没有尝试从上面的 sql 中包含“join”，因为它似乎对于模糊搜索或我的应用程序的目的没有必要）。有一个用户提供的参数`:query`

**员工控制器.rb**

```
respond_to :json
 ...
def getEmployeesByName

    query = Employee.select("id, firstname, lastname, title")
    q = "%#{params[:query]}%"
    query.where("UPPER(CONCAT(firstName, ' ', lastName)) LIKE ?", q).to_sql
    query.group("id")
    query.order("lastname", "firstname")

    respond_with query.all 

end 
```

当我尝试我的代码时，它会返回数据库中的所有 5 名员工，即使他们的名字中没有字母“a”。这是服务器中显示的 sql，例如，当我在搜索框中输入“a”时。

```
 Processing by EmployeesController#getEmployeesByName as JSON
  Parameters: {"query"=>"a"}
  Employee Load (0.1ms)  SELECT id, firstname, lastname, title FROM "employees" 
```

所以我的行动的最后四行似乎被忽略了

```
 query.where("UPPER(CONCAT(firstName, ' ', lastName)) LIKE ?", q).to_sql
    query.group("id")
    query.order("lastname", "firstname")
    respond_with query.all 
```

谁能解释我做错了什么。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:33:43.810

I got it to include the other sql in the query by doing

```
respond_with Employee.select("id, firstname, lastname, title").where("UPPER(CONCAT(firstName, ' ', lastName)) LIKE ?", params[:query]) 
```

It turns out that sqlite3 doesn't have a CONCAT function but that's a separate issue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:34:09.067

`query` is being assigned an instance of `Employee` by the first line. You are then calling `where`, `group`, and `order` on the class `Employee` via the instance, but ignoring the result in every case. Finally, you are calling `Employee.all` via the instance, and inspecting the result, which correctly includes all records. Try something like:

```
respond_with Employee.where("UPPER(CONCAT(firstName, ' ', lastName)) LIKE ?", q).group("id").order("lastname", "firstname") 
```

# cookies - .net 4 有什么不同之处使 .ASPXAUTH cookie 消失吗？

> ID：14369430
> 
> 赞同：0
> 
> 时间：2013-01-16T22:58:05.613
> 
> 标签：cookies, .net-4.0, forms-authentication, .aspxauth

我遇到了与[ASP.NET MVC 4 cookie 消失](https://stackoverflow.com/questions/13343073/asp-net-mvc-4-cookie-disappears)几乎相同的行为。

为了确认它是 .net 4，我创建了一个使用 Forms 身份验证的新的空 .net 4 Web 应用程序。（我有几个使用相同表单身份验证设置的 .net 3.5 站点。）我添加了一个 Global.asax 文件并在 Application_BeginRequest 方法中设置了一个断点。我看到 ASPXAUTH cookie 出现在请求中。但是，当它到达 EndRequest 方法时，cookie 不再存在。有没有人在 .net 4 中看到过这种行为？它不会在 3.5 中发生，因此必须对默认行为进行一些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:52:58.533

好的，在向 Google 输入魔术词之后（我尝试了 Open Sesame 和一切），它揭示了之前的 StackOverflow 问题：[Asp.Net Forms Authentication SSO between 4.0 and 2.0 applications](https://stackoverflow.com/questions/12164178/asp-net-forms-authentication-sso-between-4-0-and-2-0-applications)

这最终成功了。我最终说是因为我已经为我的登录应用程序和我的新 4.0 应用程序修改了一些 web.config 设置，我花了一点时间才发现我已将 Decrytion="3DES" 添加到 v4 应用程序但没有在我的登录应用程序中不再有它。啊，.net，我们编织了多么纠结的 wwweb……

# django - 模型表单验证不起作用...我不明白为什么

> ID：14369432
> 
> 赞同：0
> 
> 时间：2013-01-16T22:58:11.100
> 
> 标签：django, django-models, django-forms, validation, model-validation

模型.py

```
from django.core.exceptions import ValidationError

def surname_validate(value):
if value == "123":
    raise ValidationError('is not an even number')

class Member(models.Model):
surname=models.CharField(max_length=50,validators=[surname_validate])
other_names=models.CharField(max_length=150,null=True, blank=True) 
```

表格.py

```
class MemberEditForm(forms.ModelForm):
class Meta:
    model=Member 
```

当我尝试保存没有输入的表单时，我收到默认的“此字段是必需的”错误，所以我知道我的观点是正确的。问题是我对姓氏字段的验证根本不起作用，我不明白。我在这里做错了什么。为什么它不起作用？？？这令人沮丧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:03:54.803

其实`Model Validation`不为`ModelForm`。如果要`surname`在表单中进行验证，则必须在其 clean 方法中为表单编写验证。

所以，你的表格必须是这样的：

```
class MemberEditForm(forms.ModelForm):

    class Meta:
        model = Member

    surname = forms.CharField(max_length = 50, required = True, error_messages = {'my_error': 'is not an even number'})

    def clean_surname(self):
        if self.cleaned_data['surname'] == '123':
            raise ValidationError(self.fields['surname'].error_messages['my_error'])
        return self.cleaned_data['surname'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:28:25.493

我终于使用了它并且它有效

```
attrs_dict = {'class': 'required'}

class MemberEditForm(forms.ModelForm):

class Meta:
    model = Member

surname = forms.RegexField(#regex=r'^[\w.@+-]+$',
    regex=r'^$',# my validation here
    max_length=50,
    widget=forms.TextInput(attrs=attrs_dict),
    label=_("Surname*"),
    error_messages={'invalid': _("Invalid Entry.")}) 
```

谢谢

# jquery - 将多个 Jquery DataTables 与单个表一起使用

> ID：14369433
> 
> 赞同：0
> 
> 时间：2013-01-16T22:58:11.457
> 
> 标签：jquery, datatables

我有这个脚本与两个单独的表一起使用：

```
<script>

$(document).ready(function() {
    tbl = $('#listtableB').dataTable( {
        "bStateSave": true,
        "bJQueryUI": true,
        "aLengthMenu": [ [ 10, 25, 50, 100, 400, 800, -1 ], [ 10, 25, 50, 100, 400, 800, 'Összes' ] ],
        "sPaginationType": "full_numbers",
        "oLanguage": {
                "sUrl": "lang/datatables_hu.txt"
            },
         "aoColumns": [
            { "bSortable": true },
            { "bSortable": true },
            { "bSortable": true },
            { "bSortable": false },
        ]
        })
    tbl.fnSort( [ [0,'asc'] ] );

        newsl = $('#listtableD').dataTable( {
        "bStateSave": true,
        "bJQueryUI": true,
        "aLengthMenu": [ [ 10, 25, 50, 100, 400, 800, -1 ], [ 10, 25, 50, 100, 400, 800, 'Összes' ] ],
        "sPaginationType": "full_numbers",
        "oLanguage": {
                "sUrl": "lang/datatables_hu.txt"
            },
         "aoColumns": [
            { "bSortable": true },
            { "bSortable": true },
            { "bSortable": false }
        ]
        })
    newsl.fnSort( [ [0,'asc'] ] );

    })

</script> 
```

但是只有第一个表发生变化，第二个保持正常表，但是如果我删除第一个数据表设置，第二个就变了。为什么它不适用于这两个表？

# sql - 连接多个表（多对多关系）

> ID：14369441
> 
> 赞同：2
> 
> 时间：2013-01-16T22:58:38.557
> 
> 标签：sql, sql-server, join, many-to-many

我有这个数据库图：

![在此处输入图像描述](../Images/91c43430643d5eeded557f4dde9c8533.png)

我试图创建一个查询，在这些表之间执行一些连接并导致如下所示：

```
||name_|| ||Type # 1|| ||Type #2|| ||Ability #1|| ||Ability #2|| 
```

（最后四列代表类型和能力的名称，没有它们的 ID。此外，类型 #2 和/或能力 #2 可能为空，具体取决于神奇宝贝）

我完全被困住了。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:02:36.490

您将首先要加入表格：

```
select k.name_,
  t.type,
  a.ability
from kanto k
left join kantotype kt
  on k.pokemonid = kt.pokemonid
left join types t
  on kt.typeid = t.typeid
left join kantoability ka
  on k.pokemonid = ka.pokemonid
left join abilities a
  on ka.abilityid = a.abilityid 
```

如果您在学习连接语法方面需要帮助，这里有一个很好[的 joins 视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

这将为您提供所有名称的列表，以及它们的类型和能力。

如果要旋转进入列的值，则可以使用带有`CASE`表达式的聚合函数来*透视*数据：

```
select k.name_,
  max(case when t.typeid = 1 then t.type end) Type1,
  max(case when t.typeid = 2 then t.type end) Type2,
  max(case when a.abilityid = 1 then a.ability end) Ability1,
  max(case when a.abilityid = 2 then a.ability end) Ability2
from kanto k
left join kantotype kt
  on k.pokemonid = kt.pokemonid
left join types t
  on kt.typeid = t.typeid
left join kantoability ka
  on k.pokemonid = ka.pokemonid
left join abilities a
  on ka.abilityid = a.abilityid
group by k.name_ 
```

在每个`case`表达式中，您都需要确定`id`要转换的：

```
 max(case when t.typeid = 1 then t.type end)
                          ^-- replace with your actual value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:06:07.817

您可能想要更改您的方法并让您的数据库查询返回如下内容：

```
||name_|| ||Type|| ||Ability|| 
```

代替

```
||name_|| ||Type # 1|| ||Type #2|| ||Ability #1|| ||Ability #2|| 
```

换句话说，返回类型和能力作为记录（行）而不是列。为此，请参阅 bluefeet 查询。

# python - 在 django 的语句和值错误中

> ID：14369443
> 
> 赞同：0
> 
> 时间：2013-01-16T22:58:56.953
> 
> 标签：python, sql, django, templates, select

我尝试使用以下语句用 django 创建一个 COUNT GROUP BY

```
top_book = Borrow.objects.filter(beginDate__gte=str(weekAgoDate)).values('book').order_by().annotate(num_borrow=Count('book')).order_by('-num_borrow')[:5] 
```

但是当我尝试访问模板中的数据时，它没有给出任何输出

```
{% for cont in top_book %}        
<tr>
<td><a href="/toplibrary/bookInfo/{{ cont.book.idBook }}/">{{ cont.book.title }}</a></td><td>{{ cont.book.isbn }}</td><td>{{ cont.book.author }}</td><td>{{ cont.book.editor }}</td>    

</tr>{% endfor %} 
```

所以我尝试用 Book 类做一个 IN 语句来获取我需要的关于我的书的所有信息

```
top_books=Book.objects.filter(idBook__in=top_book) 
```

但我得到这个错误

```
"This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'" 
```

有人可以提出解决方案吗？

```
class Book(models.Model):
    idBook = models.IntegerField(primary_key=True)
    title = models.CharField(max_length=255)
    isValid = models.BooleanField(default=True)
    linkDescr = models.CharField(max_length=255)
    editor = models.CharField(max_length=255)
    author = models.CharField(max_length=255)
    isbn = models.BigIntegerField()
    categories = models.ManyToManyField(Category, verbose_name="Categories")
    position = models.ForeignKey(Position, verbose_name="Position")
    addedDate = models.DateTimeField()

class Borrow(models.Model):
    beginDate = models.DateField()
    renewed = models.BooleanField(default=False)
    user = models.ForeignKey(User, verbose_name="BorrowHasUser")
    book = models.ForeignKey(Book, verbose_name="BorrowHasBook")
    returnDate = models.DateField(blank=True, null=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:14:52.243

等等，你是不是想得到借得最多的书？

也许这会更有意义：

```
top_book = Book.objects.annotate(num_borrow=Count('borrow')).order_by('-num_borrow')[:5] 
```

如果您的领域`related_name`有一套，请`Borrow.book`使用它而不是`borrow`.

抱歉，我先在自动驾驶仪上回答。

# android - 状态改变时需要关闭 MediaRecorder 播放的声音

> ID：14369445
> 
> 赞同：2
> 
> 时间：2013-01-16T22:59:00.337
> 
> 标签：android, cordova, audio, mute

我尝试了以下链接中的更改，但无济于事。

[状态改变时如何关闭MediaRecorder播放的声音](https://stackoverflow.com/questions/6804205/how-to-shut-off-the-sound-mediarecorder-plays-when-the-state-changes)

我都试过了

```
AudioManager audioManager = (AudioManager) getApplicationContext().getSystemService(Context.AUDIO_SERVICE);
audioManager.setStreamMute(AudioManager.STREAM_SYSTEM, false);
audioManager.setStreamMute(AudioManager.STREAM_MUSIC,false); 
```

和

```
// disable sound for recording.   
// disable sound when recording.
((AudioManager)activity.getApplicationContext().getSystemService(Context.AUDIO_SERVICE)).setStreamMute(AudioManager.STREAM_ALARM,true);
((AudioManager)activity.getApplicationContext().getSystemService(Context.AUDIO_SERVICE)).setStreamMute(AudioManager.STREAM_DTMF,true);
((AudioManager)activity.getApplicationContext().getSystemService(Context.AUDIO_SERVICE)).setStreamMute(AudioManager.STREAM_MUSIC,true);
((AudioManager)activity.getApplicationContext().getSystemService(Context.AUDIO_SERVICE)).setStreamMute(AudioManager.STREAM_RING,true);
((AudioManager)activity.getApplicationContext().getSystemService(Context.AUDIO_SERVICE)).setStreamMute(AudioManager.STREAM_SYSTEM,true);
((AudioManager)activity.getApplicationContext().getSystemService(Context.AUDIO_SERVICE)).setStreamMute(AudioManager.STREAM_VOICE_CALL,true); 
```

但是当我启动媒体录音机时，我仍然可以听到声音。我曾尝试将此代码放在应用程序的开头和直接之前：

```
mediaRecorder.start(); 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T20:00:03.690

SetStreamMute 仅适用于 SYSTEM 和 MUSIC。对于所有其他，您应该使用 SetStreamVolume。

试试下面的代码：

```
AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

    audioManager.setStreamMute(AudioManager.STREAM_SYSTEM, true);
    audioManager.setStreamMute(AudioManager.STREAM_MUSIC,true);
    audioManager.setStreamVolume(AudioManager.STREAM_ALARM, 0, 0);
    audioManager.setStreamVolume(AudioManager.STREAM_DTMF, 0, 0);
    audioManager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, 0, 0);
    audioManager.setStreamVolume(AudioManager.STREAM_RING, 0, 0); 
```

对于健全性检查：

```
Log.d(TAG, String.format("%d,  %d, %d, %d, %d, %d, %d",
            audioManager.getStreamVolume(AudioManager.STREAM_SYSTEM),
            audioManager.getStreamVolume(AudioManager.STREAM_MUSIC),
            audioManager.getStreamVolume(AudioManager.STREAM_ALARM),
            audioManager.getStreamVolume(AudioManager.STREAM_DTMF),
            audioManager.getStreamVolume(AudioManager.STREAM_NOTIFICATION),
            audioManager.getStreamVolume(AudioManager.STREAM_RING)
            )); 
```

结果应该给出： 0, 0, 0, 0, 0, 0

请记住，具有音量的游戏（不包括 setStreamMute）在活动结束后不会重置以前的值，因此您可能希望将它们存储在 onDestroy() 或更早的时间中恢复。

# python - 如何在 Python 中使用 BeautifulSoup 保存对 HTML 文件所做的更改？

> ID：14369447
> 
> 赞同：21
> 
> 时间：2013-01-16T22:59:13.700
> 
> 标签：python, html-parsing, beautifulsoup

我有下面的脚本，它修改`href`HTML 文件中的属性（将来，它将是目录中的 HTML 文件列表）。使用 BeautifulSoup 我设法访问标签值并按照我的意愿修改它们，但我不知道如何保存对文件所做的更改。

```
import os
import re
from bs4 import BeautifulSoup

htmlDoc = open('adding_computer_c.html',"r+")
soup = BeautifulSoup(htmlDoc)

replacements= [ ('_', '-'), ('../tasks/', prefixUrl), ('../concepts/', prefixUrl) ]

for link in soup.findAll('a', attrs={'href': re.compile("../")}):

    newlink=str(link)

    for k, v in replacements:

        newlink = newlink.replace(k, v)

    extrachars=newlink[newlink.find("."):newlink.find(">")]
    newlink=newlink.replace(extrachars,'')

    link=newlink
    print(link)
    ##How do I save the link I have modified back to the HTML file?

print(soup)##prints the original html tree

htmlDoc.close() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-16T23:13:15.530

```
newlink = link['href']
# .. make replacements
link['href'] = newlink # store it back 
```

现在`print(soup.prettify())`将显示更改的链接。要将更改保存到文件：

```
htmlDoc.close()

html = soup.prettify("utf-8")
with open("output.html", "wb") as file:
    file.write(html) 
```

要保留文档的原始字符编码，您可以使用`soup.original_encoding`“utf-8”来代替。请参阅[编码](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#encodings)。

# xslt-1.0 - 用于动态 XML 的通用 XSLT，其结构相同，用于求和函数

> ID：14369453
> 
> 赞同：1
> 
> 时间：2013-01-16T22:59:39.110
> 
> 标签：xslt-1.0

假设我的 xml 文件的结构是：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<main>
    <_All>
        <_999999>
            <Employee_Amount>10.0</Employee_Amount>
            <Cash_Count>10.0</Cash_Count>
            <Dine_in_Amount>10.0</Dine_in_Amount>
            <Promos_Actual>10.0</Promos_Actual>
            <Combo_Savings_Amount>10.0</Combo_Savings_Amount>
            <total_sales>10.0</total_sales>
            </_999999>
        <_test>
            <Employee_Amount>20.0</Employee_Amount>
            <Cash_Count>20.0</Cash_Count>
            <Dine_in_Amount>20.0</Dine_in_Amount>
            <Promos_Actual>20.0</Promos_Actual>
            <Combo_Savings_Amount>20.0</Combo_Savings_Amount>
            <total_sales>20.0</total_sales>
            </_test>
    </_All>
</main> 
```

我必须对所有节点求和（例如 - 两个节点的 Cash_Count，两个节点的 total_sales），节点名称可以更改，因此我无法使用其名称进行导航。我试过 for-each 但我坚持使用 xpath 表达式。因为我是 xslt 1.0 的新手，请帮助我。

在proskor在答案中建议我的帮助下，我尝试了以下xslt：

```
<?xml version="1.0" encoding="US-ASCII"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">
  <xsl:output method="html" indent="yes"/>
  <xsl:template match="/*">
    <table border="1" cellspacing="1" cellpadding="1">
        <tr>
            <xsl:apply-templates select="/*/*/*" mode="wrap"/>
        </tr>
        <tr>
        <td><xsl:value-of select="name(child::*)"/></td>
        <td>&#160;</td>
        <xsl:for-each select="/*/*/*/*[current()]">
                          <xsl:variable name="pos" select="position()" />
                         <td> <xsl:value-of select="sum(/*/*/*/*[$pos])" /></td>
                  </xsl:for-each>
        </tr>
        <xsl:apply-templates select="/*/*/*" mode="values"/>
    </table>
  </xsl:template>

 <xsl:template match="/*/*/*" mode="wrap">
    <xsl:if test="position() = 1">
    <th>Region</th>
    <th>Store</th>
    <xsl:for-each select="./*">
    <th><xsl:value-of select="name()"/></th>
    </xsl:for-each>
    </xsl:if>
</xsl:template>
<xsl:template match="/*/*/*" mode="values">
    <xsl:for-each select=".">
        <tr>
            <td>&#160;</td>
            <td><xsl:value-of select="name()"/></td>
            <xsl:for-each select="./*">
            <td><xsl:value-of select="."/></td>
            </xsl:for-each>
        </tr>
    </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

它工作得很好，但产生了额外的***td***输出，其值为 0。因为有 6 个节点，因此有 6 个额外的***td***，其值为 0。总和之后，这个***tr***看起来像这样..

```
<tr>
<td>30</td>
<td>30</td>
<td>30</td>
<td>30</td>
<td>30</td>
<td>30</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr> 
```

请任何人帮助弄清楚。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:33:19.360

将第 14 行的 xsl:for-each 元素的 select-attribute 更改为`"/*[1]/*[1]/*[1]/*"`：

```
<?xml version="1.0" encoding="US-ASCII"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">
  <xsl:output method="html" indent="yes"/>
  <xsl:template match="/*">
    <table border="1" cellspacing="1" cellpadding="1">
        <tr>
            <xsl:apply-templates select="/*/*/*" mode="wrap"/>
        </tr>
        <tr>
        <td><xsl:value-of select="name(child::*)"/></td>
        <td>&#160;</td>
        <xsl:for-each select="/*[1]/*[1]/*[1]/*">
                          <xsl:variable name="pos" select="position()" />
                         <td> <xsl:value-of select="sum(/*/*/*/*[$pos])" /></td>
                  </xsl:for-each>
        </tr>
        <xsl:apply-templates select="/*/*/*" mode="values"/>
    </table>
  </xsl:template>

 <xsl:template match="/*/*/*" mode="wrap">
    <xsl:if test="position() = 1">
    <th>Region</th>
    <th>Store</th>
    <xsl:for-each select="./*">
    <th><xsl:value-of select="name()"/></th>
    </xsl:for-each>
    </xsl:if>
</xsl:template>
<xsl:template match="/*/*/*" mode="values">
    <xsl:for-each select=".">
        <tr>
            <td>&#160;</td>
            <td><xsl:value-of select="name()"/></td>
            <xsl:for-each select="./*">
            <td><xsl:value-of select="."/></td>
            </xsl:for-each>
        </tr>
    </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

# ios - 将 UIFont 存储为 NSDictionary？

> ID：14369461
> 
> 赞同：0
> 
> 时间：2013-01-16T23:00:20.567
> 
> 标签：ios, nsdictionary, uifont

我想基于 plist 文件中的字典存储创建一个 UIFont 对象。

显然，我可以创建自己的键并使用它们来放置字体名称、家族名称和磅值，然后使用它来创建字体。

但是有标准的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:28:28.657

我不确定您在这里所说的“标准”是什么意思。没有“标准”API 将 a 编码`UIFont`为`NSDictionary`. 我建议您为`UIFont`. 一个将`UIFont`实例作为字典返回，另一个（类方法）`UIFont`从这样的字典创建实例。

# meteor - Meteor.methods() 是否保留因果关系？

> ID：14369465
> 
> 赞同：1
> 
> 时间：2013-01-16T23:00:38.823
> 
> 标签：meteor

我可以假设对 Meteor 方法的调用将完全按照它们在客户端上发布的顺序在服务器上执行吗？换句话说：Meteor 方法是否保留了因果关系？

编辑：无论答案是什么 - 这可能应该进入文档，除非我在那里忽略了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:53:29.233

注意：我认为以下内容是正确的，但我还无法在我的代码中确认它。我想从流星核心小组获得更多信息。

也就是说，这些是我最初的想法：

**如果您在不**使用的情况下在服务器上调用该方法`this.unblock`，该函数将同步运行，因此会阻止所有其他服务器端调用。这是*唯一*可以保证`Meteor.method`调用顺序的场景。[文档](http://docs.meteor.com/#meteor_methods)给出了很好的概述。

否则，`this.unblock`这些方法将在服务器上异步运行，因此您将无法保证排序。

但是，我还没有在我的代码中确认这一点。无论`this.unblock`在服务器端代码中如何，控制台都会以第一到第二到第三的顺序记录消息。在服务器上，我希望订单是第一到第三第二。

```
if (Meteor.isServer) {
    Meteor.methods({
        first: function() {
            console.log("server first");
            return "right away";
        },
        second: function () {
            this.unblock();
            for(var i = 0; i < 10000000; i++) {}
            console.log("server second");
            return "second one";
        },
        third: function () {
            console.log("server third");
            return "last";
        },
    });
}

if (Meteor.isClient) {
    Meteor.startup(function() {
        Meteor.call("first", function(error, result) {
            console.log("first completed: " + result);
        });
        Meteor.call("second", function(error, result) {
            console.log("second completed: " + result);
        });
        Meteor.call("third", function (error, result) {
            console.log("third completed: " + result);
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:51:29.990

在给定的客户端/服务器连接上，服务器按顺序处理来自客户端的消息（方法调用、子/取消子请求等）。在发生以下两种情况之一之前，服务器不会开始处理消息 N+1：

*   它完成了消息 N 的处理。对于方法，这意味着方法体完成运行。对于订阅，这意味着发布处理程序完成运行。
*   Message N 是一个方法调用，方法体调用`this.unblock`.

（可以想象将来会放宽这些限制，以便可以并行处理多个订阅方法，例如。）

# c++ - operator++ 作为后缀和前缀都不适用于 clang

> ID：14369468
> 
> 赞同：28
> 
> 时间：2013-01-16T23:01:00.920
> 
> 标签：c++, templates, c++11, operators, language-lawyer

我试图编写一个既可用作前缀又可用作后缀运算符的运算符

```
#include <iostream>
#include <utility>

struct B { 
  // ...
};

template<typename ...T>
void operator++(B, T...) {
  std::cout << ((sizeof...(T) == 0) ? "prefix" : "postfix") << std::endl;
}

int main() {
  B b;
  b++;
  ++b;
} 
```

GCC 可以编译并正常工作，但是 clang 说

> main.cpp:9:24：错误：重载后增量运算符的参数必须具有类型“int”（不是“T ...”）
> 
> ```
> void operator++(B, T...) { 
> ```

谁是对的？

* * *

感谢任何帮助我了解 GCC 行为的人。我提交了一份新的 Clang 错误报告：

[http://llvm.org/bugs/show_bug.cgi?id=14995](http://llvm.org/bugs/show_bug.cgi?id=14995)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T11:38:46.133

**原始答案：（**未*删除，因为它可能包含有用的信息*）

我想说这一切都归结为重载的运算符**模板**是否被认为是重载的运算符。从逻辑上讲，我认为情况并非如此，Clang 是错误的：我认为*应该*首先根据名称和签名兼容性选择模板作为重载解析的候选者，然后实例化，然后（可能）选择。在我看来，只有在实例化之后，编译器才应该检查生成的**函数**是否具有适当数量的参数。

但这只是我的*意见*。根据关于后缀重载的第 13.5.7/1 节`operator ++`：

*“如果函数是具有一个参数（应为 int 类型）的成员函数或具有两个参数（第二个应为 int类型）的非成员**函数**，则它为对象定义了后缀增量运算符 ++那种"*

该标准似乎没有阐明函数**模板**是否应被视为涉及对合法运算符重载签名的限制的**函数**（至少，我找不到任何解决这种歧义的句子）。只要这是真的，这个问题就很难给出明确的答案，我们只剩下*意见*了。

但我想提一下这个问题的另一个相关方面：**一致性**。

尽管问题文本中的代码确实无法在 Clang 上编译，但以下代码可以：

```
template<typename... Ts>
int operator + (X x1, Ts... args)
{
    return 0;
} 
```

我看不出这两种情况之间有任何概念上的区别：如果要*在实例化之前*检查运算符重载的签名，那么上述定义也不应该编译。如果不是这种情况，则应该编译问题文本中的代码。

所以在我看来，要么GCC是对的，要么它们都是错的。

**更新：**

正如@JesseGood 和@SethCarnegie 正确指出的那样，根据 14.7/4：

*“特化是被实例化或显式特化的类、函数或类成员。”*

此外，根据 14.6/8：

*“对于可以生成有效专业化的模板，不应发出诊断。”*

Thus, it seems Clang is indeed wrong and **no compilation error shall be produced** for the operator function template in the question's text.

# redirect - 301 Moved Permanently - 重定向页面的新链接在哪里？

> ID：14369471
> 
> 赞同：5
> 
> 时间：2013-01-16T23:01:12.790
> 
> 标签：redirect

我正在构建一个程序来阅读网页。我试着阅读

```
 http://en.wikipedia.org/wiki/France 
```

但后来我得到了回应：

```
 HTTP/1.0 301 Moved Permanently. 
```

我无法理解的是新链接（在位置字段中）与我给出的相同......那么重定向页面的新链接在哪里？

这是回应：

```
 HTTP/1.0 301 Moved Permanently
    Date: Wed, 16 Jan 2013 22:26:03 GMT
    Server: Apache
    X-Content-Type-Options: nosniff
    Cache-Control: private, s-maxage=0, max-age=0, must-revalidate
    Vary: Accept-Encoding,X-Forwarded-Proto,Cookie
    Last-Modified: Wed, 16 Jan 2013 22:26:03 GMT
    Location: http://en.wikipedia.org/wiki/France
    Content-Length: 0
    Content-Type: text/html; charset=utf-8
    X-Cache: MISS from sq64.wikimedia.org
    X-Cache-Lookup: HIT from sq64.wikimedia.org:3128
    Age: 45
    X-Cache: HIT from amssq32.esams.wikimedia.org
    X-Cache-Lookup: HIT from amssq32.esams.wikimedia.org:3128
    X-Cache: MISS from amssq35.esams.wikimedia.org
    X-Cache-Lookup: MISS from amssq35.esams.wikimedia.org:80
    Connection: close 
```

谢谢

* * *

根据 Eric 的回答，我再次测试我的程序。

我发送了以下命令：

```
 GET http://www.wikipedia.org/wiki/france HTTP/1.1 
```

回应是：

```
 HTTP/1.0 301 Moved Permanently
    Date: Thu, 17 Jan 2013 22:36:04 GMT
    Server: Apache
    Location: http://en.wikipedia.org/wiki/france
    Content-Length: 243
    Content-Type: text/html; charset=iso-8859-1
    X-Cache: MISS from sq64.wikimedia.org
    X-Cache-Lookup: MISS from sq64.wikimedia.org:3128
    X-Cache: MISS from amssq45.esams.wikimedia.org
    X-Cache-Lookup: MISS from amssq45.esams.wikimedia.org:3128
    X-Cache: MISS from knsq26.knams.wikimedia.org
    X-Cache-Lookup: MISS from knsq26.knams.wikimedia.org:80
    Connection: close

    <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
    <html><head>
    <title>301 Moved Permanently</title>
    </head><body>
    <h1>Moved Permanently</h1>
    <p>The document has moved <a href="http://en.wikipedia.org/wiki/france">here</a>.</p>
    </body></html> 
```

这当然是意料之中的。现在我发送了：

```
 GET http://en.wikipedia.org/wiki/france HTTP/1.1 
```

回应是：

```
 HTTP/1.0 301 Moved Permanently
    Date: Wed, 16 Jan 2013 22:26:03 GMT
    Server: Apache
    X-Content-Type-Options: nosniff
    Cache-Control: private, s-maxage=0, max-age=0, must-revalidate
    Vary: Accept-Encoding,X-Forwarded-Proto,Cookie
    Last-Modified: Wed, 16 Jan 2013 22:26:03 GMT
    Location: http://en.wikipedia.org/wiki/France
    Content-Length: 0
    Content-Type: text/html; charset=utf-8
    X-Cache: MISS from sq64.wikimedia.org
    X-Cache-Lookup: HIT from sq64.wikimedia.org:3128
    Age: 45
    X-Cache: HIT from amssq32.esams.wikimedia.org
    X-Cache-Lookup: HIT from amssq32.esams.wikimedia.org:3128
    X-Cache: MISS from amssq35.esams.wikimedia.org
    X-Cache-Lookup: MISS from amssq35.esams.wikimedia.org:80
    Connection: close 
```

我尝试使用 wget：

```
 wget.exe http://en.wikipedia.org/wiki/france 
```

没关系！页面已加载：

```
 wget.exe http://en.wikipedia.org/wiki/france
    --2013-01-18 00:43:06--  http://en.wikipedia.org/wiki/france
    Resolving en.wikipedia.org... 91.198.174.225
    Connecting to en.wikipedia.org|91.198.174.225|:80... connected.
    HTTP request sent, awaiting response... 301 Moved Permanently
    Location: http://en.wikipedia.org/wiki/France [following]
    --2013-01-18 00:43:06--  http://en.wikipedia.org/wiki/France
    Reusing existing connection to en.wikipedia.org:80.
    HTTP request sent, awaiting response... 200 OK
    Length: 854896 (835K) [text/html]
    Saving to: `France'

    100%[======================================>] 854,896      573K/s   in 1.5s

    2013-01-18 00:43:08 (573 KB/s) - `France' saved [854896/854896] 
```

那么我的程序有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:08:35.373

位置标头是新地址应该出现的位置。在这种情况下，它会导致网络浏览器继续尝试重新加载它，直到它放弃“重定向太多”错误。

如果我使用你上面使用的 URL，我会得到 200 的回报。如果我使用`wget --server-response http://wikipedia.org/wiki/France`，有趣的部分是：

```
wget --server-response http://wikipedia.org/wiki/France
--2013-01-16 18:10:59--  http://wikipedia.org/wiki/France
Resolving wikipedia.org... 208.80.152.201, 2620:0:860:ed1a::1
Connecting to wikipedia.org|208.80.152.201|:80... connected.
HTTP request sent, awaiting response... 
  HTTP/1.0 301 Moved Permanently
  Date: Wed, 16 Jan 2013 23:10:59 GMT
  Server: Apache
  Location: http://www.wikipedia.org/wiki/France
  Content-Length: 244
  Content-Type: text/html; charset=iso-8859-1
  X-Pad: avoid browser bug
  X-Cache: MISS from sq65.wikimedia.org
  X-Cache-Lookup: MISS from sq65.wikimedia.org:3128
  X-Cache: MISS from sq64.wikimedia.org
  X-Cache-Lookup: MISS from sq64.wikimedia.org:80
  Connection: keep-alive
Location: http://www.wikipedia.org/wiki/France [following]
--2013-01-16 18:10:59--  http://www.wikipedia.org/wiki/France
Resolving www.wikipedia.org... 208.80.154.225, 2620:0:861:ed1a::1
Connecting to www.wikipedia.org|208.80.154.225|:80... connected.
HTTP request sent, awaiting response... 
  HTTP/1.0 301 Moved Permanently
  Date: Wed, 16 Jan 2013 23:11:00 GMT
  Server: Apache
  Location: http://en.wikipedia.org/wiki/France
  Content-Length: 243
  Content-Type: text/html; charset=iso-8859-1
  X-Cache: MISS from cp1019.eqiad.wmnet
  X-Cache-Lookup: MISS from cp1019.eqiad.wmnet:3128
  X-Cache: MISS from cp1018.eqiad.wmnet
  X-Cache-Lookup: MISS from cp1018.eqiad.wmnet:80
  Connection: keep-alive
Location: http://en.wikipedia.org/wiki/France [following]
--2013-01-16 18:11:00--  http://en.wikipedia.org/wiki/France
Resolving en.wikipedia.org... 208.80.154.225, 2620:0:861:ed1a::1
Reusing existing connection to www.wikipedia.org:80.
HTTP request sent, awaiting response... 
  HTTP/1.0 200 OK 
```

如您所见，wget 正在跟踪从 wikipedia.org 到 www.wikipedia.org 并最终到 en.wikipedia.org 的重定向。我会重新检查您的 URL 并确保您没有使用 www.wikipedia.org。如果不是，那一定是他们服务器上的临时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:07:21.850

问题是我的程序在内部将给定地址更改为小写。这导致链接使用带有小写“f”的“法国”，而不是根据 301 响应所需的大写“F”。

我认为 URL 不区分大小写，但现在我知道了：

“虽然域名不区分大小写，但 URL 的其余部分可能是”（http://www.wisegeek.com/are-urls-case-sensitive.htm）

# javascript - 如何控制 document.write 的写入位置

> ID：14369474
> 
> 赞同：1
> 
> 时间：2013-01-16T23:01:21.260
> 
> 标签：javascript

我想让我的 javascript 从数组中打印一个随机引用。我设法做到了，但不知道如何控制它的写入位置。我想把它写在一个div中。帮助？

代码：

```
quotes = [];
quotes[0] = "I have a new philosophy. I'm only going to dread one day at a time.";
quotes[1] = "Reality is the leading cause of stress for those in touch with it.";
quotes[2] = "Few things are harder to put up with than the annoyance of a good example.";
quotes[3] = "The pure and simple truth is rarely pure and never simple.";
quotes[4] = "There's no business like show business, but there are several businesses like accounting.";
quotes[5] = "Man invented language to satisfy his deep need to complain.";

//calculate a random index
index = Math.floor(Math.random() * quotes.length);

//display the quotation
document.write("<p>" +  quotes[index] + "</p>"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:04:19.173

给 div 一个 id 说`divid`然后[`document.getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)用来获取 div 然后[innerHTML](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)来设置它的内容；

```
quotes = [];
quotes[0] = "I have a new philosophy. I'm only going to dread one day at a time.";
quotes[1] = "Reality is the leading cause of stress for those in touch with it.";
quotes[2] = "Few things are harder to put up with than the annoyance of a good example.";
quotes[3] = "The pure and simple truth is rarely pure and never simple.";
quotes[4] = "There's no business like show business, but there are several businesses like accounting.";
quotes[5] = "Man invented language to satisfy his deep need to complain.";

//calculate a random index
index = Math.floor(Math.random() * quotes.length);

//display the quotation
document.getElementById('divid').innerHTML = "<p>" +  quotes[index] + "</p>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:03:52.380

您应该使用选择器来获取您的 div 并将其写入 innerHtml 属性：

`document.getElementById("yourDivsId").innerHTML=quotes[index];`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T23:05:16.797

您可以使用：

```
document.getElementById("divID").innerHTML=quotes[index]; 
```

或者你可以使用 JQuery

```
$("#divID").html(quotes[index]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T23:05:58.283

`document.write`将准确地写出它所在的位置。最终没有条件目标`document.write`。但是，您正在寻找的是一些 DOM 操作。

您应该定位您的 div，然后将文本放在那里，如下所示：

html

```
<div id="divId"></div> 
```

js

```
quotes = [];
quotes[0] = "I have a new philosophy. I'm only going to dread one day at a time.";
quotes[1] = "Reality is the leading cause of stress for those in touch with it.";
quotes[2] = "Few things are harder to put up with than the annoyance of a good example.";
quotes[3] = "The pure and simple truth is rarely pure and never simple.";
quotes[4] = "There's no business like show business, but there are several businesses like accounting.";
quotes[5] = "Man invented language to satisfy his deep need to complain.";

//calculate a random index
index = Math.floor(Math.random() * quotes.length);

var mydiv = document.getElementById("divId");
mydiv.innerHTML = '<p>' +  quotes[index] + '</p>'; 
```

# php - 从 PHP 访问 Gmail 垃圾邮件文件夹

> ID：14369479
> 
> 赞同：4
> 
> 时间：2013-01-16T23:01:49.257
> 
> 标签：php, gmail, imap, spam

如何使用 PHP 从 Gmail 帐户访问垃圾邮件文件夹？这是我连接到 gmails imap 服务器的代码。当我用垃圾邮件替换收件箱时，会导致异常：

```
$mailbox = imap_open("{imap.googlemail.com:993/ssl}INBOX", "USERNAME@googlemail.com", "PASSWORD");
$mail = imap_search($mailbox, "ALL");
$mail_headers = imap_headerinfo($mailbox, $mail[0]);
$subject = $mail_headers->subject;
$from = $mail_headers->fromaddress;
imap_close($mailbox); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T00:05:37.743

从[这篇文章](http://www.electrictoolbox.com/open-mailbox-other-than-inbox-php-imap/)看起来文件夹名称将是`[Google Mail]/Spam`或`[Gmail]/Spam`

# regex - 正则表达式可选组不起作用

> ID：14369487
> 
> 赞同：1
> 
> 时间：2013-01-16T23:02:49.873
> 
> 标签：regex, html-parsing

目前我正在学习正则表达式，有很多东西我不明白。

我有一个带有表格的网站，我想在其中提取项目。其中一列可以包含固定值（在此示例中为“foo”）或不包含任何内容，其他列始终包含一些数据。它们的提取效果很好，但特殊列中的可选内容却没有。因此我使用类似的表达式

```
<a id=x .*?>(.*?)</a>.*?<a id=y .*?>(.*?)</a> 
```

我的实际问题是最终表达式的以下部分

```
...   .*?(foo)?.*?   ... 
```

这应该实现在其他单元格之间有一个内容为 foo 的单元格，它可能会丢失并且只有在它存在时才应该返回。我究竟做错了什么？一些基本的了解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:22:54.853

在 regex`.*?(foo)?.*?`中，因为`foo`是可选的，所以 regex 引擎只会查看文本中的当前位置。如果`foo`存在，它将被包含在匹配中；否则，它会跳过而不检查是否有任何内容`foo`。

您可以通过将正则表达式修改为`(.*?foo|.*?).*?`. 正则表达式将尽力寻找下一个`foo`. 除非前面的字符串不包含`foo`，否则上面的正则表达式肯定会消耗`foo`。在[regex-directed engine](http://www.regular-expressions.info/engine.html)中，交替`|`是不公平的，在这种情况下，正则表达式引擎将在尝试下一个之前最好匹配前面指定的引擎，如果匹配任何内容，它将继续（除非有什么前面不匹配，然后它会转回并回溯）。

请注意，我上面演示的内容很可能**不是**解决方案。您应该查看数据以查看是否有任何好的功能可以限制字符的使用方式，以便您可以区分匹配项。

# php - 在php中显示小时：分钟：秒：毫秒

> ID：14369489
> 
> 赞同：4
> 
> 时间：2013-01-16T23:02:54.043
> 
> 标签：php

嗨，我正在尝试花费总秒数，即 972 秒并将其转换为这种格式：

分：秒：毫秒

我找不到可以帮助我转换它的 PHP 函数，例如 gmdate()。请帮忙！

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-22T08:47:29.773

这适用于 PHP 5 >= 5.3.0

```
$date = DateTime::createFromFormat('U.u', microtime(TRUE));
var_dump($date->format('Y-m-d H:i:s.u')); 
```

从[DateTime 微秒](https://stackoverflow.com/questions/33691428/datetime-with-microseconds)

手册： http: [//php.net/manual/de/datetime.createfromformat.php](http://php.net/manual/de/datetime.createfromformat.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:09:01.160

在： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)你可以使用格式：date("i:s:u"); 在 PHP > 5.2.2 中，

i: minutes, s:seconds, u:microseconds 并在第二个参数中使用时间戳来设置你所说的 972 seconds -> 0:972:0 但是如果你只想要毫秒我认为你将不得不操纵结果字符串与 substr,...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-10T07:21:18.620

尝试这个

```
$second = "123456789"
$s = $second%60;
$m = floor(($second%3600)/60);
$h = floor(($second%86400)/3600);
$d = floor(($second%2592000)/86400);
$M = floor($second/2592000);

echo "$M months, $d days, $h hours, $m minutes, $s seconds"; 
```

# jquery - 使用 jQuery 重新排序有序列表

> ID：14369492
> 
> 赞同：0
> 
> 时间：2013-01-16T23:03:02.447
> 
> 标签：jquery, html

我有一个清单 EG

```
<ol>
  <li NumVotes="3">[Alot of HTML]</li>
  <li NumVotes="2">[Alot of HTML]</li>
  <li NumVotes="1">[Alot of HTML]</li>
</ol> 
```

最初订购它很好（C# LINQ），我有一个 JS 过滤系统，您可以更改显示的项目类型，所以我需要在过滤器更改后重新排序列表。我需要它快速，所以简单地复制 html() 并不是一个真正的选择。

我怎样才能做到这一点？

我查看了可排序插件，但似乎只是为了让用户拖动 LI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:10:12.170

一个简单的排序算法就可以解决问题：

```
var myArray = $("ol li");

myArray.sort(function (a, b) {

    a = parseInt($(a).attr("NumVotes"), 10);
    b = parseInt($(b).attr("NumVotes"), 10);

    if(a > b) {
        return 1;
    } else if(a < b) {
        return -1;
    } else {
        return 0;
    }
});

$("#results").append(myArray); 
```

还有一个小提琴：http: [//jsfiddle.net/HU5ve/](http://jsfiddle.net/HU5ve/)

如果性能确实是这里的问题，请使用 a.getAttribute() 而不是 jqueryish 方式。我怀疑它会比这个好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:39:51.990

找到了一个关于如何使用 jQuery 反转有序列表的教程：

```
$(document).ready(function() {   

    var countli = $('ol > li').size();
    $("ol > li").each(function(i) {
        var attrvalue = countli - i;
        $(this).attr("value",attrvalue);
    });
}); 
```

取自这里： http: [//www.designchemical.com/blog/index.php/website-coding/create-a-reverse-order-ordered-list-using-jquery/](http://www.designchemical.com/blog/index.php/website-coding/create-a-reverse-order-ordered-list-using-jquery/)

演示： http: [//www.designchemical.com/lab/jquery/demo/jquery_reverse_unordered_list.htm](http://www.designchemical.com/lab/jquery/demo/jquery_reverse_unordered_list.htm)

# sql - 在 SQL Server 中选择所有销售的最后一个产品

> ID：14369493
> 
> 赞同：2
> 
> 时间：2013-01-16T23:03:38.303
> 
> 标签：sql, sql-server

我有这个项目表存储在 SQL Server 数据库中：

```
ID_Item   | ID_Sale  | ID_Product |
1         | 200      | 2314       |
2         | 200      | 3894       |
3         | 200      | 4949       |
4         | 100      | 9389       |
5         | 100      | 9499       |
6         | 300      | 9388       | 
```

我需要获取“ID_Sale”列的最后一条记录。这些记录如下：

```
ID_Item   | ID_Sale  | ID_Product |
3         | 200      | 4949       |
5         | 100      | 9499       |
6         | 300      | 9388       | 
```

我正在尝试这段代码，但它只获取一条记录：

```
Select Top 1 * From Itens 
Where ID_Sale = 200
Order by ID_Item Desc 
```

如何获得遍历整个表的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:08:46.037

```
SELECT ID_Item, ID_Sale, ID_Product 
FROM Tbl
WHERE Id_Item IN
         (
             SELECT Max(Id_Item) Id
             FROM Tbl
             WHERE [DateTime] BETWEEN @StartDate AND @EndDate
             GROUP BY Id_Sale
          ) 
```

如果您使用 SQL SERVER 2005+

```
;WITH CTE
AS
(
   SELECT ID_Item, ID_Sale, ID_Product, ROW_NOUMBER() OVER (PARTITION BY ID_Sale ORDER BY ID_Item DESC) RN
   FROM Tbl
   WHERE [DateTime] BETWEEN @StartDate AND @EndDate
)
SELECT ID_Item, ID_Sale, ID_Product
FROM CTE
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:33:49.253

哟可以简单地使用这个查询

```
 select * from Item where ID_Item in(
select MAX(ID_Item) as ID_Item from Item group by ID_Sale) 
```

# magento - Magento Grid - 将平面表加入 EAV 后，排序和过滤工作不正确

> ID：14369497
> 
> 赞同：3
> 
> 时间：2013-01-16T23:03:56.303
> 
> 标签：magento

我有 2 个自定义集合。具有平面数据的通常集合。我需要将它们加入到客户选择中。它适用于 innerJoin，但对连接字段的过滤和排序不起作用。我该如何解决这个问题？

_prepareCollection() 示例

```
$collection = Mage::getResourceModel('customer/customer_collection')
    ->addNameToSelect()
    ->addAttributeToSelect('email');

$collection
    ->getSelect()
    ->joinInner(array('my_table' => $collection->getTable('my/table')), 'e.entity_id = my_table.customer_id', array('custom_field' => my_table.custom_field))
    ->joinInner(array('my_table1' => $collection->getTable('my/table1')), 'my_table1.other_id = my_table.id', array('custom_field1' => my_table1.custom_field));

$this->setCollection($collection);
return parent::_prepareCollection(); 
```

因此，排序和过滤不适用于 custom_field 和 custom_field1

添加列调用：

```
$this->addColumn('custom_field',
        array(
            'header'=>$this->__('Shopping club name'),
            'index'=>'custom_field',
            'filter_index'=>'my_table.custom_field',
    )); 
```

过滤时出现致命错误：

```
Call to a member function getBackend() on a non-object 
```

排序不起作用，没有显示错误

如果您将平面连接到平面表，则“filter_index”可以正常工作。但是这里 flat 与 EAV 相连。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-08T17:53:02.097

这其实一点都不难！

当我这样做时，我将 last_login 添加到客户网格中。

第一步，您已经完成，但为了完整起见，我将其包括在此处，是将该列添加到初始 select 语句中：

```
/**
 * set collection object
 *
 * @param Mage_Customer_Model_Resource_Customer_Collection $collection
 */
public function setCollection($collection)
{
    //Group by email since multiple customer_ids can exist in the log/customer.
    $collection->groupByEmail();

    //join the last_login field here.
    $collection->getSelect()->joinLeft(array('c_log' => $collection->getTable('log/customer')), 'c_log.customer_id=e.entity_id', array('last_login' => 'login_at'));

    parent::setCollection($collection);
} 
```

接下来，我们将列添加到网格中。请注意，我们定义了两个回调。'filter_condition_callback' 是 Magento 的股票。奇怪的是，没有回调索引（据我所知）对此进行排序。我们需要添加一个排序回调，否则我们无法对新列进行排序。

```
 $this->addColumnAfter('last_login', array(
         'header'                    => Mage::helper('customer')->__('Last Login'),
         'type'                      => 'datetime',
         'align'                     => 'center',
         'index'                     => 'last_login',
         'filter_index'              => '`c_log`.`login_at`',
         'gmtoffset'                 => true,
         //Stock Magento Callback - Notice the callback key has been assigned.
         'filter_condition_callback' => 'filter_last_login',
         //Custom Callback Index
         'order_callback'            => 'sort_last_login'
    ), 'customer_since'); 
```

接下来，我们添加将处理过滤和排序的回调函数：

```
if (!function_exists('filter_last_login')) {
    /**
     * @param Mage_Customer_Model_Resource_Customer_Collection $collection
     * @param Mage_Adminhtml_Block_Widget_Grid_Column          $column
     */
    function filter_last_login($collection, $column)
    {
        if (!$column->getFilter()->getCondition()) {
            return;
        }

        $condition = $collection->getConnection()
            ->prepareSqlCondition('c_log.login_at', $column->getFilter()->getCondition());
        $collection->getSelect()->where($condition);
    }
}

if (!function_exists('sort_last_login')) {
    /**
     * @param Mage_Customer_Model_Resource_Customer_Collection $collection
     * @param Mage_Adminhtml_Block_Widget_Grid_Column          $column
     */
    function sort_last_login($collection, $column)
    {
        $collection->getSelect()->order($column->getIndex() . ' ' . strtoupper($column->getDir()));
    }
} 
```

最后，由于 order_callback 不是真正的索引，我们需要调用此回调（如果已定义）而不是默认的排序机制。这就是我完成它的方式：

```
/**
 * Sets sorting order by some column
 *
 * @param Mage_Adminhtml_Block_Widget_Grid_Column $column
 *
 * @return Mage_Adminhtml_Block_Widget_Grid
 */
protected function _setCollectionOrder($column)
{
    if ($column->getOrderCallback()) {
        call_user_func($column->getOrderCallback(), $this->getCollection(), $column);

        return $this;
    }

    return parent::_setCollectionOrder($column);
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T06:23:19.700

您能否显示将您的属性添加到网格的 addColumn() 调用？

它应该是这样的：

```
$this->addColumn('custom_field', array(
    ...
    'filter_index' => 'my_table.custom_field',
    ...
)); 
```

可能您为“filter_index”键设置了别名值。

# c++ - 在列表 C++ 中搜索？

> ID：14369499
> 
> 赞同：0
> 
> 时间：2013-01-16T23:04:12.680
> 
> 标签：c++, search, element, stdlist

感谢您提前查看我的问题。

我正在完成一个大学作业的问题，该问题询问以下内容：

> 对于每个 std::list< >、std::map< >、std::unordered_map< > 文档并解释元素插入和查找的保证性能。

在我开始解释列表中的元素查找之前，我大部分时间都没有遇到任何问题。

我一直在从 Josuttis 和[http://www.cplusplus.com](http://www.cplusplus.com)收集我的信息，但似乎找不到任何关于此的信息。

我猜是因为不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:25:26.467

You mention that you had no trouble except with the `list` portion, so I'm only going to answer for that portion.

In order to answer this question, you need to understand how [`std::list`](http://en.cppreference.com/w/cpp/container/list) is implemented. Some quick searching brings up:

> List containers are implemented as doubly-linked lists.

From how I interpret it, **Guaranteed Performance** means the same thing as **Worse-case Runtime Complexity**.

For **element lookup** in a doubly-linked list, the worst-case scenario is that your list does not contain the item you are trying to lookup. In that case, you would have to compare every item in the list to the item you are searching for. So the worst-case runtime complexity of this operation is **O(n)**, where `n` is the size of the list.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:20:00.340

如果您想要更正式地声明所支持的内容，请参考标准的内容。关于我们可以做的最佳搜索是使用二分搜索，例如`std::lower_bound`（§25.4.3.1/3）：

> 复杂性：最多 log [2] ( `last − first`) + O(1) 次比较。

不过，这只告诉我们*比较*的次数。要在容器中移动，请`lower_bound`使用`std::advance`. 关于我们发现的 std::list (§23.3.5.1/1)：

> 列表是支持双向迭代器的序列容器 [...]

`std::advance`那么，对于提供双向迭代器的集合来说，它是如何工作的呢？（§24.4.4/1）：

> [...] 对于输入、前向和双向迭代器，他们使用 ++ 来提供线性时间实现。

因此，要在列表中查找任何内容（通过值或位置），我们将总体上查看线性复杂度，并进行对数比较。老实说，我们可能会更好`std::find`（§25.2.5/2）：

> 复杂性：最多`last - first`应用相应谓词。

不过，两者之间的选择可能并不总是很明显——遍历列表显然是线性的。`std::find`最小化遍历，同时`std::lower_bound`最小化比较。如果比较比遍历更昂贵，`std::lower_bound`可能会做得更好。如果比较便宜，`std::find`可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:36:27.250

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T23:25:37.053

From [http://www.cplusplus.com/reference/list/list/](http://www.cplusplus.com/reference/list/list/)

> The main drawback of lists and forward_lists compared to these other sequence containers is that they lack direct access to the elements by their position; For example, to access the sixth element in a list one has to iterate from a known position (like the beginning or the end) to that position, which takes linear time in the distance between these. They also consume some extra memory to keep the linking information associated to each element (which may be an important factor for large lists of small-sized elements).

So, iterating through a std::list< > (looking up an element) is linear complexity. Also, you cannot access elements by index.

# powershell - DTE - 在 powershell 中读取 ProjectItem.FileNames

> ID：14369504
> 
> 赞同：1
> 
> 时间：2013-01-16T23:04:27.763
> 
> 标签：powershell, envdte

我正在尝试在 powershell 中做一些非常简单的事情，我有 ProjectItem 的实例，我想读取 FileNames 属性的值（记录为字符串数组）。然而它的证明是相当困难的

```
ForEach ($item in $scripts.ProjectItems) {
    Write-Host $item.FileNames
    Write-Host $item.FileNames[0]
    Write-Host $item.FileNames(0)
} 
```

所以我的目标是在项目中移动一些文件。这 3 条 Write-Host 行的输出是

```
string FileNames (short) {get} 
string FileNames (short) {get} 
string FileNames (short) {get} 
```

有什么特别的事情我必须做才能把它读成一个数组吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:12:18.543

当您评估 .NET 方法而不调用它（即提供括号）时，PowerShell 将发出该方法的签名。尝试：

```
Write-Host $item.get_FileNames(0) 
```

**更新：**根据OP，以下确实有效：

```
Write-Host $item.FileNames(0) 
```

# tcl - TCL 数组或列表对变量的操作

> ID：14369507
> 
> 赞同：0
> 
> 时间：2013-01-16T23:04:34.680
> 
> 标签：tcl

下面的 TCL 函数被调用 n 次。每次将 numid 和 type 传递给此函数时，我都会尝试为每种类型添加 numid。

例如

如果传递的值如下

```
2       BLACK
1       RED
1       BLACK
3       BLUE
1       BLUE
2       BLUE
2       RED 
```

我得到的输出是使用 set_numid_type 函数

```
black_color_str 2 1
red_color_str 1 2
blue_color_str 3 1 2 
```

但我需要的输出如下。当类型不按顺序时，它应该附加到不同的变量类型。

```
black_color_str 2 
red_color_str 1
black_color_str 1
blue_color_str 3 1 2 (since BLUE color is called in sequence)
red_color_str 2

proc set_numid_type {numid type} {

  variable black_color_str
  variable red_color_str
  variable blue_color_str

  if {$type == "BLACK"} {

      if {![info exists black_color_str] || ![llength $ black_color_str]} {
          set black_color_str ""
          }

       lappend black_color_str $numid
   }

   if {$type == "RED"} {

      if {![info exists red_color_str] || ![llength $ red_color_str]} {
          set red_color_str ""
         }

       lappend red_color_str $numid
   }

   if {$type == "BLUE"} {

      if {![info exists blue_color_str] || ![llength $ blue_color_str]} {
          set blue_color_str ""
          }

       lappend blue_color_str $numid
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:15:32.650

这是一个对输入列表进行操作并返回输出列表的版本。如果你真的想要，你可以修改它来处理全局变量。

```
proc GroupSequences { inputPairs } {
    if {[llength $inputPairs] == 0} return {}       
    set sequences {}
    set lastColour ""
    set latestSequence {}
    foreach pair $inputPairs {
        puts 1
        if {"[lindex $pair 1]" != $lastColour} {
            puts 2
            if {[llength $latestSequence] > 0} {
                puts 3
                lappend sequences $latestSequence
            }
            puts 4
            set latestSequence [lreverse $pair]
            set lastColour [lindex $pair 1]
        } else {
            puts 5
            lappend latestSequence [lindex $pair 0]
        }
    }
    puts 6
    lappend sequences $latestSequence
    return $sequences
}

set input [list { 2 "black" } { 1 "red" } { 1 "black" } {3 "blue" } { 1 "blue" } { 2 "blue" } { 2 "red" } ]
set seq [GroupSequences $input] 
```

# facebook-ios-sdk - Trigger.io Facebook 在某些 iOS 设备上集成“意外读取权限”

> ID：14369511
> 
> 赞同：4
> 
> 时间：2013-01-16T23:05:13.027
> 
> 标签：facebook-ios-sdk, trigger.io

在 iOS 6 iPad 上，Facebook 模式权限对话框会弹出，但当被接受时，它似乎什么也不做。

我们的日志中出现以下错误：

```
Jan 16 11:57:50 CloudPad Forge[21287] <Warning>: [DEBUG] Native call: {
        callid = "2CB2131C-771C-466D-9640-D1FF99AB3E4B";
        method = "facebook.authorize";
        params =     {
            dialog = 1;
            permissions =         (
                "user_photos",
                "publish_stream",
                email
            );
        };
    }
Jan 16 11:57:50 CloudPad Forge[21287] <Warning>: FBConditionalLog: FBSession: a permission request for publish or manage permissions contains unexpected read permissions

Jan 16 11:57:53 CloudPad Forge[21582] <Warning>: [DEBUG] Returning to javascript: {
        callid = "EE3606FC-84D6-4F3F-8BC6-82FAF3BEC5EF";
        content =     {
            message = "The operation couldn\U2019t be completed. (com.facebook.sdk error 2.)";
            subtype = "<null>";
            type = "UNEXPECTED_FAILURE";
        };
        status = error;     } 
```

同一个应用程序可以在不同设备上与 Facebook auth 一起正常工作，有些是 iOS 6，有些是其他设备。

哈！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:30:58.300

看起来您在同一个调用中请求读取 (`user_photos`和`email`) 和写入 ( `publish_stream`) 权限 - iOS SDK 不支持此功能，请参见此处：

[https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)

> 请注意，要使用 iOS 6 原生身份验证，应用程序需要更改它们向用户请求权限的方式 - 应用程序必须将它们对读取和写入权限的请求分开。适用于 iOS 的 Facebook SDK 支持这些功能，并帮助开发人员使用它们来构建适用于多个 iOS 版本和设备配置的应用程序。

# c# - 将值绑定到用户控件时出现问题

> ID：14369513
> 
> 赞同：3
> 
> 时间：2013-01-16T23:05:16.957
> 
> 标签：c#, asp.net, user-controls

我在使用`usercontrol`. 我已经做了很多小时了，所以现在必须寻求帮助。

如果我像这样从标记页面调用用户控件：

```
<uc7:MenuMain2 ID="MenuMain2" runat="server" RootCategoryId="4" ImageHeight="40"
                        ImageWidth="260" /> 
```

它工作正常。

* * *

我也可以这样称呼它：

```
Control cont = LoadControl(@"../usercontrols/MenuMain2.ascx");
ContentPlaceHolder1.Controls.Add(cont ); 
```

这也很好。但是我也无法像我需要的那样设置属性。

* * *

但是，如果我将其称为如下代码中的代码的占位符，则它不起作用。我收到了我在页面底部发布的错误。

`Usercontrol`代码文件 - `MenuMain.ascx.cs`：

```
public partial class MenuMain2 : System.Web.UI.UserControl {

 public int ActiveCategoryId { get; set; }
 public int RootCategoryId { get; set; }
 public int articleID = 0;
 public int ImageWidth ;
 public int ImageHeight ;

  protected void Page_Load(object sender, EventArgs e) {
        if (!Page.IsPostBack)
            BindData();
    }

    private void BindData() {
        CategoriesService catSvc = new CategoriesService();
        if (ActiveCategoryId == 0) {
            if (articleID > 0) {
                M02ArticlesService artSvc = new M02ArticlesService();
                List<M02ArticlesEntity> artList = artSvc.FindById(articleID);
                if (artList.Count > 0)
                    ActiveCategoryId = artList.First().CategoryId;
            }
        }
        List<CategoriesEntity> catList = new List<CategoriesEntity>();
        catList = catSvc.GetPublishedByParentCategoryId(RootCategoryId);
        ViewState.Add("ActiveCategoryId", ActiveCategoryId);
        Repeater1.DataSource = catList;
        Repeater1.DataBind();
    }
} 
```

的代码隐藏`Masterpage`：

```
 public HttpCookie authCookie;
        public FormsAuthenticationTicket ticket;
        private string name;
        private MenuMain2 mn;

        protected void Page_Load(object sender, EventArgs e)
        {
            mn = new MenuMain2 {RootCategoryId = 4,ImageHeight = 100, ImageWidth = 260}
            //Control cont = LoadControl(@"../usercontrols/MenuMain2.ascx");

            if (Request.Cookies[".ASPXAUTH"] != null)
            {
                authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
                ticket = FormsAuthentication.Decrypt(authCookie.Value);
                name = ticket.Name;
            }

            if (name != null)
            {
                if (name.Equals("Jhon"))
                {
                    mn.RootCategoryId = 1;
                }
                if (name.Equals("Bob"))
                {
                    mn.RootCategoryId = 2;
                }
                if (name.Equals("Tom"))
                {
                    mn.RootCategoryId = 3;
                }
            }

            ContentPlaceHolder1.Controls.Add(mn);
            CategoriesEntity cat;
            int catId = Request.GetCategoryId();

            if (catId > 0)
            {
                cat = new CategoriesService().GetById(catId);
                if (cat != null && cat.RequireLogin && Request.Url.LocalPath != "/login.aspx")
                {
                    if (!view_M06PersonsCategoriesService.HasAccess(HttpContext.Current.User.Identity.Name, catId))
                    {
                        Response.Redirect(string.Format("~/login.aspx?ReturnUrl={0}&qs={1}&CatId={2}{3}",
                                                         Server.UrlEncode(Request.Url.LocalPath),
                                                         Server.UrlEncode(Request.Url.Query),
                                                         Request.QueryString["CatId"],
                                                         Request.QueryString["ArtId"].IsEmpty() ? String.Empty : "&ArtId=" + Request.QueryString["ArtId"]));
                    }
                }
            }

            if (!Page.IsPostBack)
            {
                litAdmin.Text = ConfigurationManager.AppSettings["WebName"].ToString();
                string url = Request.ServerVariables["URL"].ToString();
                if (url.ToLower().StartsWith("/default.aspx"))
                    GetPhotoalbum();
            }
        }
      }
    } 
```

错误信息 - 应用程序中的第 42 行是这一行 -- `Repeater1.DataSource = catList;`--

```
`Object reference not set to an instance of an object.`

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   No.Itl.Web.WebApplication.usercontrols.MenuMain2.BindData() in e:\WorkFolder\usercontrols\MenuMain2.ascx.cs:42
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +24
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +41
   System.Web.UI.Control.OnLoad(EventArgs e) +131
   System.Web.UI.Control.LoadRecursive() +65
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2427 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:56:00.257

试试这个：

```
MenuMain2 mn = (MenuMain2)LoadControl(@"../usercontrols/MenuMain2.ascx");

....

if (name != null)
{
    if (name.Equals("Jhon"))
    {
        mn.RootCategoryId = 1;
    }
    if (name.Equals("Bob"))
    {
        mn.RootCategoryId = 2;
    }
    if (name.Equals("Tom"))
    {
        mn.RootCategoryId = 3;
    }
} 
```

您正在将 UserControl 加载到其中`cont`，但定义了`MainMenu2`in类型`mn`并添加了尚未加载的对象。

# javascript - 如何将函数绑定到单击任何 ajax 生成的列表项？

> ID：14369515
> 
> 赞同：0
> 
> 时间：2013-01-16T23:05:35.473
> 
> 标签：javascript, jquery, ajax, click, bind

我有一个简单的无序列表，它是通过`$.ajax`...生成的

```
<ul id="simpleList"></ul> 
```

在 ajax 响应之后，它看起来像这样：

```
<ul id="simpleList">
    <li id="aaa">list item aaa</li>
    <li id="bbb">list item bbb</li>
    <li id="ccc">list item ccc</li>
</ul> 
```

我需要将单击的列表项从该列表移动到另一个列表 ( `#selectedList`)。

通常我会使用该`.click`函数来处理这个问题，但由于初始列表项是通过我开始使用的 ajax 调用动态创建的`.live`，但我仍然无法让它工作。这是我到目前为止的一个例子。

```
$('#simpleList > li').live('click', function() {
    console.log('click registered');
    var contents = $(this).html();
    var listId = $(this).attr('id');
    $(this).remove();
    $('#selectedList').show();
    $('#selectedList').append('<li id="' + listId + '">' + contents + '</li>');
}); 
```

我期待最终结果如下：（假设`#aaa`单击了列表项）

```
<ul id="simpleList">
    <li id="bbb">list item bbb</li>
    <li id="ccc">list item ccc</li>
</ul>
<ul id="selectedList">
    <li id="aaa">list item aaa</li>
</ul> 
```

但相反，什么也没有发生（甚至没有控制台日志）。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:11:08.753

由于`.live()`已弃用[`.on()`](http://api.jquery.com/on/)是首选

```
$('#simpleList').on('click', 'li', function() {
    console.log('click registered');
    var contents = $(this).html();
    var listId = $(this).attr('id');
    $(this).remove();
    $('#selectedList').show();
    $('#selectedList').append('<li id="' + listId + '">' + contents + '</li>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:11:26.927

如果`#simpleList`在您绑定事件时在页面上并且不会消失，您可以这样做

```
$('#simpleList').on('click', 'li', myFunction); 
```

如果不是，您应该选择一个父元素，或者您可以将其连接到`$(document)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:14:00.400

您可以使用 直接将它们移动到另一个列表[`.append()`](http://api.jquery.com/append/)。

```
$('#simpleList').on('click', 'li', function() {
    $('#selectedList').append(this);
}); 
```

正如其他人所说，[用于`.on()`委托事件](https://stackoverflow.com/questions/8042576/whats-the-difference-between-jquery-live-and-on)。`.on()`将适用于未来以及当前的元素。

[看这里！](http://jsfiddle.net/JzsXN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T23:11:36.710

你真的应该使用`on`而不是生活。您还可以轻松地将节点从一个父节点移动到另一个父节点`append()`。所以它可能看起来像这样：

```
$('#simpleList').on('click','li', function() {
    console.log('click registered');
    $('#selectedList').append(this).show();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T23:11:43.593

使用`on`而不是`live`. [这就是为什么](https://stackoverflow.com/questions/8042576/whats-the-difference-between-jquery-live-and-on)。

此外，您需要在 ajax 调用成功后调用您的代码，例如：

```
$.ajax({
    url: 'someUrl',                
    success: function (html) {
       $('#simpleList > li').on('click', function() {
        console.log('click registered');
        var contents = $(this).html();
        var listId = $(this).attr('id');
        $(this).remove();
        $('#selectedList').show();
        $('#selectedList').append('<li id="' + listId + '">' + contents + '</li>');
    });
    }
}); 
```

**更新：您可以用更少的代码移动它** （请参阅[appendTo](http://api.jquery.com/appendTo/) - 未经测试）

```
$('#simpleList > li').on('click', function() {    
            $(this).appendTo('#selectedList)
} 
```

# ruby-on-rails - 当我调用 page.driver .render 时测试挂起（使用 phantomjs、capybara 和 poltgergeist）

> ID：14369516
> 
> 赞同：2
> 
> 时间：2013-01-16T23:05:44.193
> 
> 标签：ruby-on-rails, capybara, phantomjs, testunit, poltergeist

我对这个问题感到沮丧.. 我有一个 Test::Unit 测试.. 使用 Capybara + Poltergeist + PhantomJS .. 试图截取屏幕截图..

但是当我调用它时..

```
 page.driver.render "screenshot.png" 
```

就是挂了。。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T15:52:11.243

毕竟，我不得不只使用 Selenium Web 驱动程序，而这些特定版本似乎在某些时候不同步，并且 capybara/它的包装器将无法与下面的驱动程序通信，因此 Phantom，如结果，无法访问。

此配置对我有用：

> 宝石'水豚'，'1.1.4'
> 
> 宝石'selenium-webdriver'，'2.27.2'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T14:43:49.967

尝试更具体。下面将它放在一个临时文件夹中，确保它存在，把它放在那里，然后在它准备好时打开它。

```
 dir = "#{Rails.root}/tmp/cache/capybara"
  file = "#{dir}/#{Time.now.strftime('%Y-%m-%d-%H-%M-%S')}.png"
  FileUtils.mkdir_p dir
  page.driver.render file
  wait_until { File.exists?(file) }
  system "open #{file}" 
```

# android - Android - 特定区域内的画布drawBitmap

> ID：14369518
> 
> 赞同：1
> 
> 时间：2013-01-16T23:05:46.660
> 
> 标签：android

我正在寻找一种在特定边框内的画布中绘制位图的方法，我正在尝试动态更改此位图的 x、y 位置 - 我希望它不会显示在特定边框之外

（图片说明）： ![在此处输入图像描述](../Images/fdf40a4441b431b3c68ec792c05809b0.png)

我知道我可以在 pacman 图像上绘制盒子图像 - 但我正在寻找另一种解决方案（如果可能的话）

# css - Flex 4 如何将背景图像设置为 VBox？

> ID：14369519
> 
> 赞同：0
> 
> 时间：2013-01-16T23:05:47.357
> 
> 标签：css, actionscript-3, apache-flex, styles, background-image

我正在尝试像在 html 中那样使用简单的 css 规则来自定义我的应用程序样式，但甚至很简单

```
.VBoxStyle{
    background-image:Embed("images/background.png"); 
} 
```

不起作用。我阅读了许多基于新旧 flex 版本的不同情况，但什么都不懂。那么如何在 flex mx 中更改简单的容器背景图像呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:28:58.900

问题是 Flex 4 组件默认使用 Spark 主题来定义它们的外观，并且在这个主题边框中没有 backgroundImage 属性。但是您可以将主题更改为光环，它会起作用。要更改主题，请在其他编译器参数中写入：

```
-theme=${flexlib}/themes/Halo/halo.swc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:58:35.600

它可以使用任何 Flex 3 容器类（VBox、HBox、Canvas 等）来完成。

我是在手机上输入的，所以我不是一个工作示例，而是来自一位 Flex SDK QA 工程师的这篇有用的博客文章：

[http://blog.flexexamples.com/2008/01/05/changeing-a-vbox-containers-background-image-attachment-in-flex/](http://blog.flexexamples.com/2008/01/05/changing-a-vbox-containers-background-image-attachment-in-flex/)

这显示了如何在 MXML 中执行此操作，但您也应该能够使用 CSS 执行此操作。

目前尚不清楚为什么它不适用于您的情况。在 Flex 中，我倾向于不在样式属性名称中使用连字符（背景图像而不是背景图像）。

另外，您是否尝试将这种样式应用于所有 VBox？或者使用 styleName 属性应用于特定的 VBox？

# php - 如何根据多个条件对多维数组进行排序

> ID：14369523
> 
> 赞同：0
> 
> 时间：2013-01-16T23:06:04.567
> 
> 标签：php, sorting, multidimensional-array

我有一个多维数组，我需要根据多个标准进行排序，但我不确定这样做的最佳方法是什么。

这是我正在使用的内容：

```
array {
  [0]=>
  array {
    ["itemid"]=>
    string "3135475"
    ["model"]=>
    array {
      ["Model"]=>
      string "MK1931"
    }
    ["brand"]=>
    array {
      ["Brand"]=>
      string "Castles"
      ["Manufacturer"]=>
      string "Castles Int'l, LTD"
    }
    ["views"]=>
    string "53465"
  }
  [1]=>
  array {
    ["itemid"]=>
    string "3616546"
    ["model"]=>
    array {
      ["Model"]=>
      string"1931"
      ["PartNumber"]=>
      string "MK1931"
    }
    ["brand"]=>
    array {
      ["Brand"]=>
      string "Castles"
      ["Manufacturer"]=>
      string "Castles Int'l, LTD"
    }
    ["views"]=>
    string "134465"
  }
  [2]=>
  array {
    ["itemid"]=>
    string "1024567"
    ["model"]=>
    array {
      ["PartNumber"]=>
      string "MK1931"
    }
    ["brand"]=>
    array {
      ["Brand"]=>
      string "Castles"
    }
    ["views"]=>
    string "253465"
  }
  [3]=>
  array {
    ["itemid"]=>
    string "35463810"
    ["model"]=>
    array {
      ["PartNumber"]=>
      string "MK1931-170952"
    }
    ["brand"]=>
    array {
      ["Brand"]=>
      string "Product By Castles"
    }
    ["views"]=>
    string "265"
  }
} 
```

我需要在数组中找到与“城堡”匹配的品牌最高# 和与“MK1931”匹配的最高# 模型的 itemid，然后我需要具有最高视图# 的元素。如果一个元素没有任何品牌和型号匹配，则应在检查视图之前将其丢弃。

在这种情况下，只是目测它，它将是元素 #2（项目编号 1024567）。

我试图找出使用 PHP 获取元素 #2 的最快、最少 CPU 密集型方法。

# sql - 表中每天的值总和

> ID：14369526
> 
> 赞同：3
> 
> 时间：2013-01-16T23:06:10.897
> 
> 标签：sql, postgresql, datetime, aggregate-functions

我的桌子：

```
Dataid 日期 register_type read_value
77 2012-08-15 第 20 代
77 2012-08-15 太阳能 48
77 2012-08-16 第 39 代
77 2012-08-16 第 22 代
80 2012-07-11 第 11 代
80 2012-07-12 编号 23
91 2012-02-01 编号 4
91 2012-02-01 第 59 代
91 2012-02-08 第 18 代
```

我希望每天`read_values`只为 "gen"做总和`register_type`。我基本上希望查询返回下表：

```
dataid 日期 daily_value
77 2012-08-15 20.00
77 2012-08-16 61.00
80 2012-07-11 11.00
91 2012-02-01 59.00
91 2012-02-08 18.00
```

我尝试了以下查询，但它不起作用：

```
select 
    dataid, 
    date_trunc('day', timestamp_localtime) as truncated_day,
    substring(cast(date_trunc('day', timestamp_localtime) as text)
              from 1 for 10) as date,            
    sum(read_value) as daily_gen
where register_type like ‘%gen%’
from table
group by dataid, date_trunc('day', timestamp_localtime) 
order by dataid, truncated_day 
```

我将如何编写此查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T00:03:04.323

在 Postgres 中工作：

```
SELECT dataid, date, sum(read_value) AS daily_value
FROM   tbl
WHERE  register_type = 'gen'
GROUP  BY 1,2
ORDER  BY 1,2 
```

或者您的专栏名称`date`实际上不是日期？
如果它实际上是 a ，请在我的查询中`timestamp`替换为(casting the to )，它应该可以工作。（即使 Postgres 允许，你也不应该使用保留字作为标识符开头 。[）](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)`date``date::date``timestamp``date`
`date`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:11:35.723

在 SQL Server 中，以下将起作用：

```
SELECT SUM(read_value) AS daily_value, dataid, date
FROM (SELECT *, CONVERT(VARCHAR(10),date,105) AS newdate FROM Table)
WHERE type = 'gen'
GROUP BY newdate 
```

对于 MySQL，请改用：

```
SELECT SUM(read_value) AS daily_value, dataid, date
FROM (SELECT *, DATE_FORMAT(newdate, '%d-%m-%Y') AS day FROM Table)
WHERE type = 'gen'
GROUP BY newdate 
```

子查询是必需的，因为`GROUP BY`不支持通常的聚合函数。但是，仅当`date`它是日期时间时才需要它。如果它只是一个日期，则无需从中提取*日期*。

# objective-c - 当 Grand Central Dispatch 作业队列完成时返回 bool

> ID：14369527
> 
> 赞同：1
> 
> 时间：2013-01-16T23:06:29.900
> 
> 标签：objective-c, macos, cocoa, grand-central-dispatch

我想在 dispatch_group_notify 完成后得到一个布尔值。不幸的是，下面的代码是错误的，我不知道该怎么做......编译器告诉我“不兼容的块指针类型将'BOOL'（^）（void）'传递给'dispatch_block_t'类型的参数（又名' void(^)(void^))" 有什么想法吗？

```
-(BOOL)saveToDB:(NSArray*)data{

// execute async the saveJSONDictionary
__block BOOL toReturn;
dispatch_group_t group = dispatch_group_create();
dispatch_queue_t queue = dispatch_queue_create("saveJsonDictionary", 0);
dispatch_group_async(group, queue, ^{
    for (int i = 0; i < [data count]; ++i) {
        NSDictionary* item = (NSDictionary*)[data objectAtIndex:i];
        [self saveJsonDictionary:item];
    }
    NSManagedObjectContext *moc = [[DatabaseManager sharedManager]managedObjectContext];
    toReturn = [moc save:nil];
});

dispatch_group_notify(group, queue, ^BOOL{
    return toReturn;
}); 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T23:28:06.697

First, there is no reason to create a new queue to only dispatch a single block. Toss that block onto one of the existing global queues and be done with it.

Secondly, you'll want to do something like this at the end of that block:

```
 ....
 BOOL success = [moc save:nil];
 dispatch_async(dispatch_get_main_queue(), ^{
     if (success)
         [someObjectThatCares theSaveIsAllDoneThanksAndComeAgain];
     else
         [someObjectThatCares saveFailedGetOutAndDoNotComeBackUntilYouGetItRight];
 }); 
```

That is, no need to use any complex mechanisms. Just add a bit of code at the end of your block that calls some method that can respond to the fact that saving is done.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:25:50.423

The parameter is a block that return void and doesn't accept any parameter, you can't force it to be another type of argument. You have to manually implement a mechanism to get the return value. For example:

```
dispatch_group_notify(group, queue, ^
{
    [self performSelectorOnMainThread: @selector(notifyValue:) withObject: @(trueOrFalse) waitUntilDone: NO];
}); 
```

The method:

```
- (void) notifyValue: (NSNumber*) value
{
    // You got the "virtual" return value of that method, you can use it.
} 
```

# json - Pl/SQL json 列表循环

> ID：14369529
> 
> 赞同：1
> 
> 时间：2013-01-16T23:06:37.570
> 
> 标签：json, plsql

如何使用[http://sourceforge.net/projects/pljson/](http://sourceforge.net/projects/pljson/)中的 pl/sql json 从下面的 json 中检索内容？

{“错误”：[“无效重量”，“无效托盘点”]}

我想得到这样的文字 1\. 重量无效，2\. 托盘点无效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T13:06:47.680

这实际上很简单：

```
DECLARE
    obj json := json();
    arr json_list := json_list();
BEGIN
    obj := json('{"errors":["Invalid weight","Invalid pallet spots"]}');
    arr := json_list(obj.get('errors'));

    dbms_output.put_line(arr.get(1).get_string());
    dbms_output.put_line(arr.get(2).get_string());
END;
/ 
```

您可能还想看看我自己的（性能优化）版本的 PL/SQL 的 json 库 @ [https://github.com/doberkofler/PLSQL-JSON](https://github.com/doberkofler/PLSQL-JSON)

# jsp - 如何在 JSP 页面中跟踪时间

> ID：14369530
> 
> 赞同：0
> 
> 时间：2013-01-16T23:06:51.167
> 
> 标签：jsp, time, jsessionid

我有一个从用户那里获取输入的 JSP 页面，当用户按下 SAVE 时，数据连同用于验证用户身份的 JSESSION ID 一起进入服务器。JSessionID 在 10 分钟不活动后过期。

现在可能会发生用户在 10 分钟后按下保存按钮的情况。在这种情况下，JSESSIONID 将过期，服务器将抛出异常，这对用户来说是可见的

我想要的是每 9 分钟后向服务器发起一次虚拟查询，以便 Jsessionid 不会过期。现在我如何在我的 JSP 页面中跟踪时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:20:51.030

您可以在超时后使用 JavaScript 对您的服务器进行 AJAX 调用。

例如，假设您使用的是 jQuery：

```
window.setInterval(
  function () { $.get('ping.jsp'); },
  9*60*1000); 
```

文档：

*   [window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)
*   [jQuery.get](http://api.jquery.com/jQuery.get/)

如果您不使用 jQuery，则必须将`$.get`调用替换为特定于浏览器的代码或来自另一个库的代码。

或者，您可以使用[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)或`Refresh`标头，但正如该文章中所述，有很多充分的理由不这样做。然而，在隐形中`iframe`它可能没有那么糟糕。我仍然会自己使用 JavaScript 版本。

# java - HoloEverywhere SeekBar ClassCastException

> ID：14369534
> 
> 赞同：2
> 
> 时间：2013-01-16T23:06:59.843
> 
> 标签：java, android, android-holo-everywhere

我正在使用 HoloEverywhere 提供的 SeekBar 类。我有以下进口：

```
import org.holoeverywhere.widget.SeekBar;
import org.holoeverywhere.widget.SeekBar.OnSeekBarChangeListener; 
```

我没有收到初步错误或警告，但是当我编译时，我在以下行中得到一个类转换异常：

```
sectionTimeElapsedSeekBar = (SeekBar) findViewById(R.id.sectionTimeElapsedSeekBar); 
```

下面是对应的 XML：

```
<SeekBar
        android:id="@+id/sectionTimeElapsedSeekBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/startOrPauseTimerButton"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="16dp"
        android:max="2100" /> 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:14:07.767

改成：

```
<org.holoeverywhere.widget.SeekBar
        android:id="@+id/sectionTimeElapsedSeekBar"
        ...
        /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:55:38.433

从 org.holoeverywhere.app.Activity 扩展活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:14:50.990

尝试导入：

```
import android.widget.SeekBar; 
```

代替

```
import org.holoeverywhere.widget.SeekBar; 
```

# sql - 从另一个表插入表，即使列数不匹配？

> ID：14369539
> 
> 赞同：1
> 
> 时间：2013-01-16T23:07:19.573
> 
> 标签：sql, sql-server, tsql

我正在尝试将数据从一个表（或存储过程）插入临时表。临时表列计数与源表列计数不匹配。我想从开始列将源数据插入临时表，其余列将空字符串列。

这意味着如果`Temp`表有 10 列而源表只有 3 列，则将前 3 列插入临时表，其余 7 列将为空或 null。

例子 ：

```
CREATE TABLE #VarTemp(Col1 nvarchar(256), Col2 nvarchar(256), Col3 nvarchar(256),
                      Col4 nvarchar(256), Col5 nvarchar(256), Col6 nvarchar(256),
                      Col7 nvarchar(256), Col8 nvarchar(256), Col9 nvarchar(256),
                      Col10 nvarchar(256))

INSERT into #VarTemp 
    EXEC sp_FindStringInTable 'Nareshbhai%', 'dbo', 'UserstoClean';

SELECT * FROM #VarTemp 
```

如果我单独执行

```
EXEC sp_FindStringInTable 'Nareshbhai%', 'dbo', 'UserstoClean'; 
```

我正进入（状态

```
 Constitid  FirstName   LastName    email   status          pincode
 3151502    Nareshbhai  Desai   desanar@iit.edu Inactive    desai 
```

错误是

> 有一个错误。检查以确保对象存在。（0 行受影响）
> 
> 消息 0，级别 11，状态 0，行 0
> 当前命令发生严重错误。结果，如果有的话，应该丢弃。

`sp_FindStringInTable` 是

```
ALTER PROCEDURE [dbo].[sp_FindStringInTable]
    @stringToFind VARCHAR(100), @schema sysname, @table sysname 
AS 
    DECLARE @sqlCommand VARCHAR(8000) 
    DECLARE @where VARCHAR(8000) 
    DECLARE @columnName sysname 
    DECLARE @cursor VARCHAR(8000) 

BEGIN TRY 
   SET @sqlCommand = 'SELECT * FROM ' + @schema + '.' + @table + ' WHERE' 
   SET @where = '' 

   SET @cursor = 'DECLARE col_cursor CURSOR FOR 
      SELECT COLUMN_NAME 
      FROM ' + DB_NAME() + '.INFORMATION_SCHEMA.COLUMNS 
      WHERE TABLE_SCHEMA = ''' + @schema + ''' 
        AND TABLE_NAME = ''' + @table + ''' 
        AND DATA_TYPE IN (''char'', ''nchar'', ''ntext'', ''nvarchar'', ''text'', ''varchar'')' 

   EXEC (@cursor) 

   OPEN col_cursor    
   FETCH NEXT FROM col_cursor INTO @columnName    

   WHILE @@FETCH_STATUS = 0    
   BEGIN    
       IF @where <> '' 
           SET @where = @where + ' OR' 

       SET @where = @where + ' ' + @columnName + ' LIKE ''' + @stringToFind + '''' 
       FETCH NEXT FROM col_cursor INTO @columnName    
   END    

   CLOSE col_cursor    
   DEALLOCATE col_cursor  

   SET @sqlCommand = @sqlCommand + @where 
   --PRINT @sqlCommand 
   EXEC (@sqlCommand)  
END TRY 
BEGIN CATCH 
   PRINT 'There was an error. Check to make sure object exists.' 
   IF CURSOR_STATUS('variable', 'col_cursor') <> -3 
   BEGIN 
       CLOSE col_cursor    
       DEALLOCATE col_cursor  
   END 
END CATCH
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:30:47.550

这将不起作用，因为它显示在此处：

''SELECT * FROM' + @schema + '.' + @table +'在哪里''

您正在加载动态 sql 以在表中生成 ALL COLUMNS 的列结果。除非所有这些表都特别具有与您明确定义相同的 10 列，否则这将中断。为什么需要将表动态选择到临时表中？如果您只想查找具有某种数据类型的表并选择前十个结果，那么这将起作用。

```
declare @Temp table ( id int identity, val varchar(64) )

--insert into @Temp
select distinct
  'select top 10 * from ' + s.name + '.' + t.name

from sys.tables t (nolock) 
    join sys.schemas s (nolock) on t.schema_id = s.schema_id
    join sys.columns c (nolock) on t.object_id = c.object_id
    join sys.types ty (nolock) on c.system_type_id = ty.system_type_id
        and ty.name in ('char', 'nchar', 'ntext', 'nvarchar')  --etc, if you want to find specific column types listed only

declare @Current int = 1, @max int, @SQL varchar(max);

select @Max = max(id) from @Temp

while @Current <= @Max
BEGIN
    select @SQL = val from @Temp where id = @Current

    exec (@SQL)

    set @Current += 1;
END 
```

# android - 拆分操作栏中 的正常项目溢出操作项

> ID：14369540
> 
> 赞同：0
> 
> 时间：2013-01-16T23:07:34.893
> 
> 标签：android, android-actionbar

![动作栏溢出问题](../Images/001df004dd21848709c30e46ddf861b7.png)

我正在使用拆分操作栏，底部共有 5 个项目，其中 3 个设置为 actionItem。但问题是溢出项高于正常项。

这是xml，我没有在代码中做任何事情：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item 
    android:id="@+id/item_solve"
    android:title="@string/button_coz"
    android:showAsAction="always|withText"
    android:enabled="false"
    />

<item 
    android:id="@+id/item_report"
    android:title="@string/button_report"
    android:showAsAction="always|withText"
    android:actionViewClass="com.sorusana.android.app.view.ReportCompoundButton"
    android:enabled="false"
    />

<item 
    android:id="@+id/item_kutu"
    android:title="@string/box_add"
    android:showAsAction="always|withText"
    android:enabled="false"
    />

<item 
    android:id="@+id/item_delete"
    android:title="@string/delete_question"
    android:enabled="false"
    />

<item 
    android:id="@+id/item_see_answer"
    android:title="@string/see_answer"
    android:enabled="false"
    />
</menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:12:42.400

错误总是归咎于你。尝试用 ifRoom 替换它

# sql-server - 如何将多个 SQL Server 查询合并为一个

> ID：14369541
> 
> 赞同：-2
> 
> 时间：2013-01-16T23:07:39.773
> 
> 标签：sql-server

如何将以下查询合并为一个。

```
SELECT MID,
       Status,
       Owner1Fname,
       Owner1Lname,
       LegalName,
       DBAName,
       DBAEmail,
       DBAPhone,
       CorpPhone,
       SICCode
FROM   vw_merLeadData

SELECT replastname,
       replastname
FROM   vw_XXX_Page1

SELECT installdate,
       model,
       ownership,
       serialno
FROM   dbo.merequip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:40:41.300

像以前的评论者一样，我不确定您*为什么*要这样做，但是我不知道您有什么需要它的背景，所以我想您有充分的理由！无论如何，这就是您的做法（抱歉无用的格式）：

```
SELECT MID,
   Status,
   Owner1Fname,
   Owner1Lname,
   LegalName,
   DBAName,
   DBAEmail,
   DBAPhone,
   CorpPhone,
   SICCode,
   replastname=NULL,
   replastname=NULL,
   installdate=NULL,
   model=NULL,
   ownership=NULL,
   serialno=NULL
   FROM   vw_merLeadData
   UNION ALL
   SELECT MID=NULL,
   Status=NULL,
   Owner1Fname=NULL,
   Owner1Lname=NULL,
   LegalName=NULL,
   DBAName=NULL,
   DBAEmail=NULL,
   DBAPhone=NULL,
   CorpPhone=NULL,
   SICCode=NULL,
   replastname=NULL,
   replastname=NULL,
   installdate=NULL,
   model=NULL,
   ownership=NULL,
   serialno=NULL       
FROM   vw_XXX_Page1
UNION ALL
SELECT 
MID=NULL,
   Status=NULL,
   Owner1Fname=NULL,
   Owner1Lname=NULL,
   LegalName=NULL,
   DBAName=NULL,
   DBAEmail=NULL,
   DBAPhone=NULL,
   CorpPhone=NULL,
   SICCode=NULL,
replastname=NULL,
   replastname=NULL,
installdate,
   model,
   ownership,
   serialno
 FROM   dbo.merequip 
```

基本上，您可以将任何 tqo 查询合并在一起，只要它们具有相同数量的列并且每个字段中的数据类型与其他查询中的相应字段相同（或至少可转换），因此所有 NULL 都只是虚拟列。
希望有帮助。

# cocos2d-iphone - 我需要在 xcode 项目中使用“cocos2d 库”目标吗？

> ID：14369548
> 
> 赞同：1
> 
> 时间：2013-01-16T23:08:44.663
> 
> 标签：cocos2d-iphone, xcode4.5, target

我一直在根据“Learning Cocos2D”一书构建一个项目。当我开始这个项目时，最新的 cocos2d-iphone 版本是 1.0.1。从那时起，最新版本是 2.0。我决定升级，因为我收到编译器错误“非 POD 元素类型 b2Vec2 的数组的可变长度”，解决此问题的[建议包括升级。](http://cartoonsmartblog.wordpress.com/2011/10/17/upgrading-xcode-from-4-1-to-4-2-and-updating-to-the-latest-cocos2d/)这指向了一个[教程](http://www.learn-cocos2d.com/2011/05/update-cocos2d-iphone-existing-project/)关于升级。在本教程中，第 4 步是关于重新添加库文件夹并说“确保只选择 cocos2d 库目标以避免任何构建错误”。不幸的是，我没有“cocos2d 库”目标。然后我又回到“学习 Cocos2D”的第二章，我注意到这本书在 p 上显示了这个目标的存在。25\. 但是，当我按照书中的说明创建项目时，它并没有被创建。

我需要这个 cocos2d 库目标吗？如果是这样，创建它是否为时已晚？到目前为止，没有它我从来没有遇到过问题，但现在我担心继续升级。如果我需要它，我该如何创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:10:55.027

本书和教程都解释了如何创建 cocos2d 库目标。也许从头开始再试一次，它肯定有效。

或者，您可以按照不使用静态库[的 Ray Wenderlich 的教程进行操作。](http://www.raywenderlich.com/23854/arc-and-cocos2d-v2-x)

它对单个项目没有太大影响。使用静态库只是一种更简洁的方法，[将事物分开](https://stackoverflow.com/questions/6113838/why-would-i-want-to-use-a-static-library)。一个好处是您可以拥有一个包含多个项目的工作区，这些项目都链接到 cocos2d 库，因此您只需构建一次 cocos2d 代码，其他项目可以使用 cocos2d 库而无需重新编译其源代码。

# jquery - 菜单上的动画、平滑滚动边框底部

> ID：14369551
> 
> 赞同：0
> 
> 时间：2013-01-16T23:08:47.653
> 
> 标签：jquery, scroll, jquery-animate, jquery-hover, floating

我的目标是产生这样的效果：[http](http://css-tricks.com/jquery-magicline-navigation/) ://css-tricks.com/jquery-magicline-navigation/但不是使用额外的浮动`<li></li>`，我想使用`border-bottom`属性 - 甚至可能吗？我试图做这样的事情：

```
$('ul#top_main_menu li a').hover(
    function () {
      $(this).addClass("active").animate(100);
    },
    function () {
      $(this).removeClass("active").animate(100);
    }
  ); 
```

哪里`.active`类添加到我的`<a href=""></a>`标签`border-bottom: 2px solid #A7E108;`- 任何人都知道我如何动画它以在悬停元素后平滑滚动？

# r - 计算不包含“NA”的数据帧的行数

> ID：14369554
> 
> 赞同：4
> 
> 时间：2013-01-16T23:09:16.323
> 
> 标签：r, dataframe, missing-data

> **可能重复：**
> [R - 删除 data.frame 中带有 NA 的行](https://stackoverflow.com/questions/4862178/r-remove-rows-with-nas-in-data-frame)

我有一个从以下函数派生的数据框：

```
complete <- function(directory,id = 1:332) {

   csvfiles <- sprintf("/Users/myname/Desktop/%s/%03d.csv", directory, id)

   nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))

        rowlabels <- nrow(nrows)

        data.frame(id=sprintf('%3d', id), 
            nobs=sapply(csvfiles,function(x) length(count.fields(x))),
            row.names=rowlabels
           )
       } 
```

此函数计算对象 csvfiles 生成的目录中包含的每个文件的行数。然后它输出一个数据框，显示文件号以及行数（所以两列）

以为我有它，但问题是我现在必须排除每个文件中`NA`存在实例的行。

我将如何编辑它以忽略每个文件中的那些行，而只计算不`NA`存在 s 的行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T23:26:25.817

Replace this line:

> `nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))`

with this line, which uses the `complete.cases` function:

> `nrows <- sapply( csvfiles, function(f) nrow(complete.cases(read.csv(f))))`

`complete.cases` takes a data frame and returns a data frame with the same columns, but with all the rows which contain at least one `NA` thrown out.

# c++ - C++中的双向选择排序

> ID：14369558
> 
> 赞同：0
> 
> 时间：2013-01-16T23:09:49.813
> 
> 标签：c++, sorting

我正在开发一个对小数组进行排序的程序。这是一项课堂作业，需要进行选择排序，但我想比它要求的更进一步。我以前做过选择排序，我想尝试实现一个双向版本。它有效，除了一个问题。我的第二个结果始终是第二个结果，并且永远不会排序。我觉得我错过了一些小而愚蠢的东西。

这是我的搜索功能的代码

```
void biSelSort(string engine[], double hits[]) {    
    int k = ARRAY_SIZE - 1;
    for (int i = 0; i < k; i++) {
        int min = i;
        int max = i;
        for (int j = i + 1; j <= k; j++) {
            if (hits[j] < hits[min]) {
                min = j;
            }
            if (hits[j] > hits[max]) {
                max = j;
            }
        }
        string tS = engine[min];
        double tD = hits[min];
        engine[min] = engine[i];
        hits[min] = hits[i];
        engine[i] = tS;
        hits[i] = tD;

        if (max == i) {
            tS = engine[min];
            tD = hits[min];
            engine[min] = engine[k];
            hits[min] = hits[k];
            engine[k] = tS;
            hits[k] = tD;
        } else {
            tS = engine[max];
            tD = hits[max];
            engine[max] = engine[k];
            hits[max] = hits[k];
            engine[k] = tS;
            hits[k] = tD;
        }
        i++;
        k--;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:17:39.790

你的意思是增加 i 两次，一次在你的 for 语句中，一次在你的循环结束？如果你这样做了，你真的应该修改你的代码，这样你就只在一个地方做。

# firefox - 转换原点在 Firefox 中不起作用

> ID：14369560
> 
> 赞同：2
> 
> 时间：2013-01-16T23:10:05.963
> 
> 标签：firefox, css, css-transitions

我正在使用 CSS 过渡和 jQuery 激活为 SVG 组制作动画。动画还用于`transform-origin: 50% 0%;`在 div 中保持居中。它在 Chrome 和 Safari 中运行良好，但在 Firefox 中，转换属性加载正常但`transform-origin`无法正常工作。该页面位于[此处](http://northviewhigh.com/graduation/tickets)，并且我在下面嵌入了相关代码。由于已知的 Webkit 错误，与 SVG 过滤器相关的代码已被注释掉。

CSS：

```
.chartsection {
    -webkit-transition: all .7s ease;
    -moz-transition:    all .7s ease;
    -o-transition:      all .7s ease;
    -ms-transition:     all .7s ease;
    transition:         all .7s ease;
    -webkit-transform-origin:   50% 0%;
    -moz-transform-origin:      50% 0%;
    -o-transform-origin:        50% 0%;
    -ms-transform-origin:       50% 0%;
    transform-origin:           50% 0%;
} 
```

jQuery：

```
function goToStud() {
$('#studchart').css({
    '-webkit-transform': 'scale(' + studScaleUp +')',
    '-moz-transform': 'scale(' + studScaleUp +')',
    '-o-transform': 'scale(' + studScaleUp +')',
    '-ms-transform': 'scale(' + studScaleUp +')',
    'transform': 'scale(' + studScaleUp +')'
})/*.attr("filter", "url(#noblur)")*/;

$('#guestchart').css({
    '-webkit-transform': 'scale(' + guestScaleDown +') translateY(' + guestMoveDown + 'px)',
    '-moz-transform': 'scale(' + guestScaleDown +') translateY(' + guestMoveDown + 'px)',
    '-o-transform': 'scale(' + guestScaleDown +') translateY(' + guestMoveDown + 'px)',
    '-ms-transform': 'scale(' + guestScaleDown +') translateY(' + guestMoveDown + 'px)',
    'transform': 'scale(' + guestScaleDown +') translateY(' + guestMoveDown + 'px)'
})/*.attr("filter", "url(#fullblur)")*/;

hideTitles(500);
} 
```

SVG：

```
<svg version="1.1"
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"
x="0px" y="0px" width="690px" height="420px"
viewBox="0 43 690 420"
enable-background="new 0 43 690 420" xml:space="preserve">
<defs></defs>

<!--
<filter id="fullblur" x="0" y="0">
<feGaussianBlur in="SourceGraphic" stdDeviation="2" />
</filter>

<filter id="halfblur" x="0" y="0">
<feGaussianBlur in="SourceGraphic" stdDeviation="1" />
</filter>

<filter id="noblur" x="0" y="0">
<feGaussianBlur in="SourceGraphic" stdDeviation="0" />
</filter>
-->

<!-- BACKGROUND (hidden) -->
<rect y="43" display="none" fill="#D1DBBB" width="690" height="420"/>

<!-- STAGE -->
<ellipse fill="#CC3333" stroke="#000000" cx="339.5" cy="43" rx="169.5" ry="42.5"/>

<!-- SEATS -->
<g>

<!-- STUDENT SECTIONS -->
<g id="studhover">
    <g id="studchart" class="chartsection">
    <!-- <g filter="url(#halfblur)" id="studchart" class="chartsection"> -->

        <g id="s1">
    <path class="sFill" fill="#FECB2F" d="M90.75,136c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V90.5c0-2.761-2.239-5-5-5h-150
        c-2.761,0-5,2.239-5,5V136z"/>
    <path class="sStroke" fill="none" stroke="#000000" d="M90.75,136c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V90.5c0-2.761-2.239-5-5-5h-150
        c-2.761,0-5,2.239-5,5V136z"/>
</g>

        <g id="s2">
        <path class="sFill" fill="#FECB2F" d="M265.75,150c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
    c-2.761,0-5,2.239-5,5V150z"/>
        <path class="sStroke" fill="none" stroke="#000000" d="M265.75,150c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
    c-2.761,0-5,2.239-5,5V150z"/>
    </g>

        <g id="s3">
        <path class="sFill" fill="#FECB2F" d="M439.25,136c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V90.5c0-2.761-2.238-5-5-5h-150c-2.762,0-5,2.239-5,5V136z"/>
        <path class="sStroke" fill="none" stroke="#000000" d="M439.25,136c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V90.5c0-2.761-2.238-5-5-5h-150
        c-2.762,0-5,2.239-5,5V136z"/>
    </g>

        <g id="s4">
        <path class="sFill" fill="#FECB2F" d="M90.75,205.5c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V160c0-2.761-2.239-5-5-5h-150
        c-2.761,0-5,2.239-5,5V205.5z"/>
        <path class="sStroke" fill="none" stroke="#000000" d="M90.75,205.5c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V160c0-2.761-2.239-5-5-5h-150
        c-2.761,0-5,2.239-5,5V205.5z"/>
        </g>

        <g id="s5">
        <path class="sFill" fill="#FECB2F" d="M265.75,218c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
    c-2.761,0-5,2.239-5,5V218z"/>
        <path class="sStroke" fill="none" stroke="#000000" d="M265.75,218c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
    c-2.761,0-5,2.239-5,5V218z"/>
    </g>

        <g id="s6">
        <path class="sFill" fill="#FECB2F" d="M439.25,205.5c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V160c0-2.761-2.238-5-5-5h-150
    c-2.762,0-5,2.239-5,5V205.5z"/>
        <path class="sStroke" fill="none" stroke="#000000" d="M439.25,205.5c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V160c0-2.761-2.238-5-5-5h-150
    c-2.762,0-5,2.239-5,5V205.5z"/>
    </g>

    </g>

    <!-- Filling in the gaps -->
    <g>
        <rect x="251" y="84" fill="transparent" width="15" height="140" id="sVertLine1" />
        <rect x="425" y="84" fill="transparent" width="15" height="140" id="sVertLine2" />

        <rect x="266" y="84" fill="transparent" width="159" height="15" id="sHorizLine1" />
        <rect x="90" y="140" fill="transparent" width="161" height="15" id="sHorizLine2a" />
        <rect x="440" y="140" fill="transparent" width="161" height="15" id="sHorizLine2b" />
        <rect x="266" y="153" fill="transparent" width="161" height="15" id="sHorizLine3" />
        <rect x="90" y="210" fill="transparent" width="161" height="12" id="sHorizLine4a" />
        <rect x="440" y="210" fill="transparent" width="161" height="12" id="sHorizLine4b" />
    </g>

</g>

<!-- GUEST SECTIONS -->
<g id="guesthover">
    <g id="guestchart" class="chartsection">
    <!--<g filter="url(#halfblur)" id="guestchart" class="chartsection">-->
        <g>
    <path class="gFill" fill="#3333CC" d="M91.5,273c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5v-45.5c0-2.761-2.239-5-5-5h-150
        c-2.761,0-5,2.239-5,5V273z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M91.5,273c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5v-45.5c0-2.761-2.239-5-5-5h-150
        c-2.761,0-5,2.239-5,5V273z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M440,273c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5H445c-2.762,0-5,2.239-5,5
        V273z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M440,273c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5H445
        c-2.762,0-5,2.239-5,5V273z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M91.5,342.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V297c0-2.762-2.239-5-5-5h-150
        c-2.761,0-5,2.238-5,5V342.5z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M91.5,342.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V297c0-2.762-2.239-5-5-5h-150
        c-2.761,0-5,2.238-5,5V342.5z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M440,342.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V297c0-2.762-2.238-5-5-5H445c-2.762,0-5,2.238-5,5
        V342.5z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M440,342.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V297c0-2.762-2.238-5-5-5H445
        c-2.762,0-5,2.238-5,5V342.5z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M266.5,287c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5h-150
        c-2.761,0-5,2.239-5,5V287z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M266.5,287c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5h-150
        c-2.761,0-5,2.239-5,5V287z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M266.5,355c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
        c-2.761,0-5,2.238-5,5V355z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M266.5,355c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
        c-2.761,0-5,2.238-5,5V355z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M91.5,410.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V365c0-2.762-2.239-5-5-5h-150
        c-2.761,0-5,2.238-5,5V410.5z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M91.5,410.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V365c0-2.762-2.239-5-5-5h-150
        c-2.761,0-5,2.238-5,5V410.5z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M440,410.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V365c0-2.762-2.238-5-5-5H445c-2.762,0-5,2.238-5,5
        V410.5z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M440,410.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V365c0-2.762-2.238-5-5-5H445
        c-2.762,0-5,2.238-5,5V410.5z"/>
</g>
        <g>
    <path class="gFill" fill="#3333CC" d="M266.5,423c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
        c-2.761,0-5,2.238-5,5V423z"/>
    <path class="gStroke" fill="none" stroke="#000000" d="M266.5,423c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
        c-2.761,0-5,2.238-5,5V423z"/>
</g>
    </g>

    <!-- Filling in the gaps -->
    <g>
        <rect x="251" y="224" fill="transparent" width="15" height="206" id="gVertLine1" />
        <rect x="425" y="224" fill="transparent" width="15" height="206" id="gVertLine2" />

        <rect x="266" y="222" fill="transparent" width="159" height="15" id="gHorizLine1" />
        <rect x="90" y="278" fill="transparent" width="161" height="15" id="gHorizLine2a" />
        <rect x="440" y="278" fill="transparent" width="161" height="15" id="gHorizLine2b" />
        <rect x="266" y="291" fill="transparent" width="161" height="15" id="gHorizLine3" />
        <rect x="90" y="348" fill="transparent" width="161" height="15" id="gHorizLine4a" />
        <rect x="440" y="348" fill="transparent" width="161" height="15" id="gHorizLine4b" />
        <rect x="266" y="360" fill="transparent" width="161" height="15" id="gHorizLine5" />
        <rect x="90" y="417" fill="transparent" width="161" height="13" id="gHorizLine4a" />
        <rect x="440" y="417" fill="transparent" width="161" height="13" id="gHorizLine4b" />
    </g>

</g> 
```

# hadoop - 如何访问Hadoop主程序中reducers输出的值（或键）？

> ID：14369561
> 
> 赞同：0
> 
> 时间：2013-01-16T23:10:06.800
> 
> 标签：hadoop, mapreduce

假设每个 Reducer 输出一个整数作为其值（或键）。有没有办法在 Hadoop 的主程序中访问这些值（或键）（例如总结它们）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:24:00.180

你的输出格式是什么？如果您使用的是 SequenceFileOutput，那么您可以在作业完成后使用 SequenceFile.Reader 类在主程序中打开 part-r-xxxxx 文件。例如输出 的作业`<Text, IntWritable>`，您可以对值求和，如下所示：

```
FileSystem fs = FileSystem.get(getConf());
Text key = new Text();
IntWritable value = new IntWritable();
long total = 0;
for (FileStatus fileStat : fs.globStatus(new Path("/user/jsmith/output/part-r-*"))) {
  SequenceFile.Reader reader = new SequenceFile.Reader(fs, fileStat.getPath(), getConf());
  while (reader.next(key, value)) {
    total = value.get();
  }
  reader.close();
} 
```

对于 TextOutputFormat，以下可能会执行此操作（替换 for 循环的内容）：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(fs.open(fileStat.getPath())));
String nextLine;
while ((nextLine = reader.readLine()) != null) {
  String tokens[] = nextLine.split("\t");
  total += Integer.parseInt(tokens[1]);
}
reader.close(); 
```

# ios - 如何获取存储在 plist 中的 url 地址并将其通过 segue 传递给 uiwebview

> ID：14369563
> 
> 赞同：0
> 
> 时间：2013-01-16T23:10:15.600
> 
> 标签：ios, url, uiwebview, plist

我正在使用以下代码从我的 plist 中获取 url 地址的值，并将其通过 segue 传递给我的 uiwebview。不幸的是，它没有像我希望的那样工作，所以有人可以告诉我问题是什么，非常感谢

plist 包含作为字符串的 url 地址，例如[http://www.apple.com](http://www.apple.com)

这是为segue做准备

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    NSString *abc = [NSString stringWithString:[[currentValues    objectAtIndex:0]objectForKey:@"Web"]];
    myWebView  = [segue destinationViewController];
    myWebView.url = abc;
} 
```

这是在包含 uiwebview 的模态视图控制器上加载的视图

```
NSURL *urlToLoad = [NSURL URLWithString:self.url];
[self.webView loadRequest:[NSURLRequest requestWithURL:urlToLoad]];
[super viewDidLoad]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:00:28.750

如果目标视图控制器以模态方式呈现，则它包含在导航控制器中。所以你需要做类似的事情

```
UINavigationController *nav  = (UINavigationController *)[segue destinationViewController];
 myWebView  = [[nav viewControllers] objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:03:43.017

感谢所有的输入，但我终于通过稍微重构我的代码来解决它现在使用以下内容可以按预期工作

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
   // NSString *abc = [NSString stringWithString:[[currentValues objectAtIndex:0]objectForKey:@"Web"]];
    myWebView  = [segue destinationViewController];
    myWebView.url = [NSString stringWithString:[[currentValues objectAtIndex:0]objectForKey:@"Web"]]; 
```

}

# php - 从ios照片上传中读取exif日期

> ID：14369570
> 
> 赞同：0
> 
> 时间：2013-01-16T23:11:18.990
> 
> 标签：php, iphone, ios, upload, exif

这似乎是一个简单的问题 - 我正在使用的网站上有一个标准的 php 图片上传，除了无法从通过 iOS 上传的照片中获取 DateTime 信息外，它工作正常。我能够获取方向数据和旋转图像等，但我无法找到任何拍摄日期的信息。信息可从通过 PC 上传的 iOS 照片（即从 iPhone/iPad 导入后）中检索，而不是从 iDevice 本身检索。

有谁知道是否可以通过php上传从iOS照片中获取日期？如果是这样，我应该在哪里查看 EXIF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-06T16:12:46.607

通过 safari mobile 上传的照片被删除了大部分元数据，包括日期时间和地理位置。您收到的唯一元数据是：

*   色彩空间
*   Exif IFD 指针
*   方向
*   像素X维度
*   像素Y维度

如果您将照片传输到桌面浏览器并上传，则元数据将存在。此外，如果您使用 Hybrid-Native 或 Native 应用程序，您可以保留照片元数据。

该数据是通过在 javascript 中测试 EXIF 数据解析器获得的。我找不到提到这个“功能”的实际 Apple 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:18:32.407

使用[http://es1.php.net/manual/es/function.exif-read-data.php](http://es1.php.net/manual/es/function.exif-read-data.php)和 FILE FileDateTime =

> $arrImageData = read_exif_data($web_dir); $datetime = $arrImageData["FILE"]["FileDateTime"];

看起来，我不知道哪个 EXIF 给了 iOS

# c# - 使用 MVP 模式编写用户界面设置类

> ID：14369574
> 
> 赞同：2
> 
> 时间：2013-01-16T23:11:29.280
> 
> 标签：c#, .net, winforms, mvp

我目前正在尝试了解 Model-View-Presenter 模式。假设我有一个用户界面（视图），上面有一些控件。我想为用户提供保存控件状态的选项（例如；窗口大小、选定的选项卡、DataGridView 列大小等）。

现在，如果我创建一个“设置”模型，它将具有“dgvColumnSize1”、“WindowsSize”等属性。但是模型知道视图，并专门为它设计。

我应该怎么做才能将它们解耦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:06:18.997

属性是解耦的，因为模型不直接耦合到特定视图，而是与具有这些属性的任何视图......但我明白你的意思。

您可以使用两种方法：

**不透明状态**

视图将它们的状态打包到一个不透明的状态对象中，该对象可以存储在模型中。然后视图负责从状态对象打包和解包其状态并相应地更改。可用于以不透明方式存储属性的对象示例包括字典、ExpandoObject 和 JSON/XML 字符串。

**MVP 层次结构**

Model-View-X 系列架构模式可以设置在层次结构中，其中底部 MV-X 的视图是下一个队列的模型。层次结构中通常需要两个或三个链接的 MV-X：

一个可选的底层 MVC 充当 DAL 层，一个可选的中间 MVC 充当业务层，以及一组用于顶部应用程序的不同用户/机器接口的 MVP。

底层的 MVC 架构完全与表示层无关，而顶层的 MVP 是为表示层量身定制的。

您问，顶级 MVP 如何将表示层的状态传递到底层以实现持久性？为什么当然要使用不透明的对象！

顺便说一句，如果这个设置听起来像微软在 WPF 中使用的 MVVM 模式，那是因为它是。MVVM 只是对 MVP 模式的轻微修改，如果它可以被称为不同的模式的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:14:57.463

View 实现的接口应该具有表示 Presenter 可以读取的这些数量的属性。然后 Presenter 可以读取它们并将它们存储在 Settings 对象中。

当 Presenter 启动时，它可以获取 Settings 对象，并将值复制回 View。

# ruby - 在 Ruby 1.9 中使用句子 ":foo => 'bar'" 或 "foo: 'bar'" 有约定吗？

> ID：14369576
> 
> 赞同：0
> 
> 时间：2013-01-16T23:11:32.577
> 
> 标签：ruby, coding-style

Ruby 1.9+ 中是否有使用`=>`或使用的约定？`:`喜欢：

```
:param => "foo" 
```

或者

```
param: "foo" 
```

编辑：感谢您的反馈，我编辑了问题以使其更清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:17:33.300

它们是有区别的; 较新的“JSON”哈希创建样式只能与符号键一起使用。如下所示。

```
{ param: "foo" } 
```

相当于

```
{ :param => "foo" } 
```

所以你不能用它来创建这个哈希：

```
{ "foo" => "bar" } 
```

或者这个：

```
{ 0 => "One" } 
```

这很有意义，因为最好的做法是尽可能使用符号键。

编辑：同样在您的示例`{ param => "foo" }`中，变量 param 的值将用作键。

所以

```
param = :foo
{ param => "bar" } 
```

相当于

```
{ :foo => "bar" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:16:59.403

我在 codeschool.com 的教程中听说它完全一样。`params:`它和直观一样直观，`params =>`但您可以保存三个字符......（`=>`一个字符之间有两个空格）

# ruby-on-rails - Gemfile.lock 中的两个版本的 rack 导致错误

> ID：14369579
> 
> 赞同：1
> 
> 时间：2013-01-16T23:11:42.437
> 
> 标签：ruby-on-rails, bundler, passenger, rack

Rails 应用程序在本地运行良好，但在远程服务器上出现此错误：

> 你已经激活了 rack 1.4.1，但是你的 Gemfile 需要 rack 1.4.4。使用 bundle exec 可以解决这个问题。

我已经`bundle update`-ed 好几次了。

我的 Gemfile.lock 有这些行（`...`为了清楚起见，表示删除的行）：

```
...
actionpack (3.2.11)
  ...
  rack (~> 1.4.0)
...
rack (1.4.4)
... 
```

宝石文件：

```
source 'http://rubygems.org'

gem 'rails', '3.2.11'
gem "haml"
gem 'execjs'
gem "rest-client"
gem "stripe"

group :assets do
  gem 'sass-rails', "~> 3.2.4"
  gem 'coffee-rails'
  gem 'uglifier'
  gem 'compass-rails'
  # Deploy with Capistrano
  gem 'capistrano'
  gem 'rvm-capistrano'
end

gem 'jquery-rails'
gem 'jquery-ui-rails'

group :production do
  gem 'libv8'
  gem 'therubyracer', "~> 0.10.2"
  gem "newrelic_rpm"
  gem 'exception_notification', git: 'git://github.com/alanjds/exception_notification.git', :require => 'exception_notifier'
end

gem 'sqlite3' # This has to be active in both modes

group :development do
  gem "thin"
end

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:54:11.883

得到它的工作，所以我会在这里发布它。这是我必须做的：

1.  在本地运行`gem uninstall rack`并删除所有 rack 实例
2.  添加`gem "rack", "1.4.1"`到我的 Gemfile（注意这是它说它已经加载的那个）
3.  `bundle update`在本地运行
4.  部署

现在它起作用了！

# python - 从 json 列表对象访问字典项

> ID：14369582
> 
> 赞同：0
> 
> 时间：2013-01-16T23:11:54.480
> 
> 标签：python, json

我有这种json数据：

```
{
  "data": [
    {
      "alpha": 1.93358, 
      "beta": 1.98596, 
      "confidence": 0.051
    }, 
    {
      "alpha": 1.92124, 
      "beta": 3.91954, 
      "confidence": 0.207
    },
    ... 
```

我只想要`beta`价值观。

我所做的是使用列表理解：

`[x['beta'] for x in data]`

但由于某种原因，我觉得有更合适的方法来解析这个字典并获得相同的数据，我没有看到它。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:25:46.917

Looks perfect to me. I'm sure you're already using the json loader to interpret this into a python dictionary, but just in-case you're not familiar example is below:

```
import json

def get_data(json_data) :
    data = json.loads(json_data)['data']
    return [x['beta'] for x in data] 
```

# javascript - Twitter Bootstrap 图片库：如何更改加载路径

> ID：14369589
> 
> 赞同：0
> 
> 时间：2013-01-16T23:12:27.253
> 
> 标签：javascript, jquery, twitter-bootstrap

我按照指示在我的供应商文件夹中安装了 Bootstrap Image Gallery。一切正常，除了我收到 JavaScript 错误：http://domain.com/img/loading.gif 404（未找到）。

该路径由 Bootstrap Image Gallery JS 文件设置，我需要知道如何将 /img 更改为我的 /images 文件夹，而不是图像所在的位置。我看到 line:144 附近有一个加载函数，但我对 JavaScript 不够熟悉，不知道如何调整它。

这是文件： [https ://github.com/blueimp/Bootstrap-Image-Gallery](https://github.com/blueimp/Bootstrap-Image-Gallery)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:15:50.457

看起来加载图像仅在[bootstrap-image-gallery.css 的 CSS-Line 70 中](https://github.com/blueimp/Bootstrap-Image-Gallery/blob/master/css/bootstrap-image-gallery.css#L70)定义。改变那里的路径，你应该很高兴。（如果您使用的是缩小文件，则搜索/替换`img`to`image`应该可以工作）。

# javascript - If 语句永远不会到达 else 分支 - “if (x = y)”

> ID：14369591
> 
> 赞同：1
> 
> 时间：2013-01-16T23:12:30.667
> 
> 标签：javascript, if-statement

我有这个奇怪的问题：

下面是一个 JavaScript 函数

```
function calculateSum()
 {
   var e2 = document.getElementById('hotel_names');
   var selValue2 = e2.options[e2.selectedIndex].value;

   if (selValue2='1')
   {
   alert("helloworld");
   }
   else
   {
   alert("byeworld");
   }
//function closes
 } 
```

它捕获 HTML 元素选择的选项值并显示适当的消息......或者它应该是。问题是无论选择如何，它总是显示 1。

另一方面，以下工作。

```
function calculateSum()
     {
       var e2 = document.getElementById('hotel_names');
       var selValue2 = e2.options[e2.selectedIndex].value;

       alert(selValue2);
     } 
```

每次您从选择中选择一个选项时，第二个功能都会显示正确的数字。任何想法为什么第一个不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:13:30.060

条件语句使用称为相等运算符的双等号 -

```
 if (selValue2 == '1'){
    ...
  } 
```

通过仅使用一个，您实际上所做的就是为变量赋值。这称为赋值运算符。

```
selValue2 = '1' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T23:14:01.130

您需要一个相等运算符。您正在使用赋值运算符。平等是

```
selValue2 == '1' 
```

分配是

```
selValue2 = '1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:17:35.673

只是添加到其他答案的一小部分。我建议使用`===`而不是`==`进行比较。

它检查被比较的参数的值和类型，并且通常更快。

# ios - ZeroMQ iOS 尝试调用系统库中不存在的符号

> ID：14369594
> 
> 赞同：0
> 
> 时间：2013-01-16T23:12:38.053
> 
> 标签：ios, objective-c, zeromq

我为拱门编译了 ZeroMQ 的胖静态库：i386 armv7

[我在这里](https://stackoverflow.com/questions/12500966/app-crashes-on-ios-6-symbol-not-found-sync-fetch-and-add-4)遇到了 zeromq 和 iOS6 的问题

所以我决定使用 5.1 SDK，我下载了 xcode 4.3.3 并将 5.1 SDK 提取到当前 XCode 并将我的项目的基础 SDK 和目标 SDK 设置为 5.1

在我这样做之后，我的项目现在构建没有错误，但是当我调用 zmq_init(1) 时，我得到了这个：

```
Detected an attempt to call a symbol in system libraries 
that is not present on the iPhone:
(null) called from function _ZN3zmq10signaler_t11make_fdpairEPiS1_ 
```

我现在不知道如何修复它。是 SDK 的问题还是 ZeroMq 的问题？

更新：问题只发生在模拟器上

# qml - QML - 2个动态创建的元素之间的交互

> ID：14369599
> 
> 赞同：2
> 
> 时间：2013-01-16T23:12:59.283
> 
> 标签：qml, dynamically-generated, qt5, qtquick2

在论坛的帮助下，我动态创建了一些按钮，我为“createObject()”函数中的属性分配了一个函数。现在，在这个函数中，我想引用其他动态创建的项目。

（伪）代码目前看起来像这样：

```
property var money_back: { '50e': 0,
                           '20e': 0,
                           '10e': 0,
                           '5e': 0,
                           '2e': 0,
                           '1e': 0,
                           '50c': 0,
                           '20c': 0,
                           '10c': 0,
                           '5c': 0,
                           '2c': 0,
                           '1c': 0 };
Row{
    id:money_row
    spacing: 5

    Component.onCompleted: {
        var button = Qt.createComponent("BubbleButton.qml");
        var selected = Qt.createComponent("ChangeText.qml");
        for (var prop in change_screen.money_back){
            selected.createObject(money_row,{
                                      "id": "selected_"+prop,
                                      "selected": "0"
                                    });
            button.createObject(money_row,{
                                            "id": "button_"+prop,
                                            // for testing purposes I wanted to make at least the first button work.. of course i want something like 'selected_+prop.selected'
                                            "action": [function(){ selected_50e.selected += 1; }], 
                                            //"ps": ps,
                                            "img_id.source": prop+".png",
                                            "img_id.align": "center",
                                            "color": "transparent"
                                        });
        }
    } 
```

最后我想做的是：为每个硬币/纸币创建按钮，当点击时，我想改变它旁边的文本内容..就像一个计数器，我点击了多少次按钮.

有没有比带着信号等走在路上更简单的方法？（看起来很复杂）

谢谢你的时间和帮助-m

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:27:28.127

您使用将对象实例传递给按钮操作。例如：

```
Component.onCompleted: {
    ...
    for (var prop in change_screen.money_back){
        var selectedObject = selected.createObject(...);
        button.createObject(money_row,{...,
                                       "action": [function(){ selectedObject.selected += 1; }], 
                                       ...}); 
```

Anyway, I recommend you to use the [Repeater](http://doc.qt.digia.com/qt/qml-repeater.html) element to dynamically create such huge amount of object.

# python - 从网站将图像写入python中的文件

> ID：14369601
> 
> 赞同：0
> 
> 时间：2013-01-16T23:13:20.513
> 
> 标签：python, web.py

我写了这段代码：

```
class uploadfromfile:
    def POST(self, name=None):
            filename = ''.join(random.choice('abcdefghijklmnopqrstuvwxyz') for i in range(20))
            x = web.input(upfile={})
            f = open(filename, 'w')
            f.write(x['upfile'].value)
            f.close()
            imgFromFile(filename)
            return "some html" 
```

但它不起作用。我收到一个以这个结尾的巨大错误：UnicodeDecodeError: 'utf8' codec can't decode byte 0xff in position 15: invalid start byte

错误似乎到达了 f.write(x['upfile'].value)，我终其一生都无法弄清楚原因。任何想法出了什么问题？我知道该值在该变量中，因为如果我只是返回它，图像就会显示在我的浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:45:47.323

我看到代码有问题的第一件事是文件没有以二进制模式打开。在读写不是简单字符串的文件时，需要二进制模式来将数据视为字节。只需切换文件打开方式`f = open(filename, 'wb')`即可解决该问题。

# extjs - 用于查看 PDF 的 ExtJS pdf.js 面板

> ID：14369603
> 
> 赞同：2
> 
> 时间：2013-01-16T23:13:22.333
> 
> 标签：extjs, pdf.js

我使用[https://github.com/SunboX/ext_ux_pdf_panel](https://github.com/SunboX/ext_ux_pdf_panel)在我的项目中查看 PDF 文件。但是，它似乎不适用于锁定的 PDF 文件。我已经环顾了3个多小时，但没有成功。有人知道我需要做什么来渲染锁定的 PDF 文件吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:56:09.137

从最新来源构建新的 pdf.js 解决了我的问题。不过渲染速度较慢。

# c# - 当尝试使用用 C# .NET 编写的插件绘制多个文件时，AutoCAD 仅适用于一个文件。如何解决？

> ID：14369604
> 
> 赞同：0
> 
> 时间：2013-01-16T23:13:23.457
> 
> 标签：c#, .net, pdf, autocad, dxf

大家！

我写了这段代码：

```
// (C) Copyright 2013 by  
//
using System;
using Autodesk.AutoCAD.Runtime;
using Autodesk.AutoCAD.ApplicationServices;
using Autodesk.AutoCAD.DatabaseServices;
using Autodesk.AutoCAD.Geometry;
using Autodesk.AutoCAD.EditorInput;
using Autodesk.AutoCAD.PlottingServices;
using AutoCAD;

// This line is not mandatory, but improves loading performances
[assembly: CommandClass(typeof(AutoCAD_CSharp_plug_in2.MyCommands))]

namespace AutoCAD_CSharp_plug_in2
{

// This class is instantiated by AutoCAD for each document when
// a command is called by the user the first time in the context
// of a given document. In other words, non static data in this class
// is implicitly per-document!
public class MyCommands
{
    static String[] arquivos = new String[] 
    {
        "C:/Users/igor.okuyama/Desktop/IS-PRS-0355-2047-0453_0_001.dxf",
        "C:/Users/igor.okuyama/Desktop/IS-PRS-0355-2047-0453_0_002.dxf"
    };
    static int count = arquivos.Length;
    static String arq = arquivos[count - 1];

    void MdiActiveDocument_CommandEnded(object sender, CommandEventArgs e)
    {
        Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("\n count:" + count.ToString() + "  " + e.GlobalCommandName + "\n");
        if (e.GlobalCommandName == "CONVERSOR")
        {
            //((AcadDocument)Application.DocumentManager.MdiActiveDocument.GetAcadDocument()).SendCommand("OPENFILE ");
            Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("\n terminei conversor: " + arq + "\n");
            Application.DocumentManager.MdiActiveDocument.SendStringToExecute("OPENFILE\n", true, false, true);
        }
        else if (e.GlobalCommandName == "OPENFILE")
        {
            //((AcadDocument)Application.DocumentManager.MdiActiveDocument.GetAcadDocument()).SendCommand("PLOTTOPDF ");
            Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("\n terminei openfile: " + arq + "\n");
            Application.DocumentManager.MdiActiveDocument.SendStringToExecute("PLOTTOPDF\n", true, false, true);
        }
        else if (e.GlobalCommandName == "PLOTTOPDF")
        {
            Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("\n terminei plottopdf: " + arq + "\n");
            //((AcadDocument)Application.DocumentManager.MdiActiveDocument.GetAcadDocument()).SendCommand("CLOSEFILE ");
            Application.DocumentManager.MdiActiveDocument.SendStringToExecute("CLOSEFILE\n", true, false, true);
        }
        else if (e.GlobalCommandName == "CLOSEFILE")
        {
            Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("\n terminei closefile: " + arq + "\n");
            count--;
            if (count > 0)
            {
                arq = arquivos[count - 1];
                //((AcadDocument)Application.DocumentManager.MdiActiveDocument.GetAcadDocument()).SendCommand("CONVERSOR ");
                Application.DocumentManager.MdiActiveDocument.SendStringToExecute("CONVERSOR\n", true, false, true);
            }
        }
    }

    [CommandMethod("OPENFILE", CommandFlags.Session)]
    public void OpenFile()
    {
        Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("OPENFILE ACIONADO. Arq: "+arq);
        Document doc = Application.DocumentManager.Open(arq);
        if (!doc.IsActive)
        {
            AcadDocument aDoc = (AcadDocument)doc.GetAcadDocument();
            aDoc.Activate();
        }
        //Application.DocumentManager.MdiActiveDocument.CommandEnded -= new CommandEventHandler(MdiActiveDocument_CommandEnded);
        //Application.DocumentManager.MdiActiveDocument.CommandEnded += new CommandEventHandler(MdiActiveDocument_CommandEnded);

    }

    [CommandMethod("CLOSEFILE", CommandFlags.Session)]
    public void CloseFile()
    {
        Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("CLOSEFILE ACIONADO. Arq: " + arq);
        Application.DocumentManager.MdiActiveDocument.CloseAndDiscard();
        //Application.DocumentManager.MdiActiveDocument.CommandEnded -= new CommandEventHandler(MdiActiveDocument_CommandEnded);
        //Application.DocumentManager.MdiActiveDocument.CommandEnded += new CommandEventHandler(MdiActiveDocument_CommandEnded);
    }

    [CommandMethod("PLOTTOPDF", CommandFlags.Session)]
    public void PlotToPDF()
    {
        short bgPlot = (short)Application.GetSystemVariable("BACKGROUNDPLOT");

        //set the BACKGROUNDPLOT = 0 temporarily.
        Application.SetSystemVariable("BACKGROUNDPLOT", 0);
        Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("PLOTFILE ACIONADO. Arq: " + arq);
        Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("\n + Um plot simples. " + "\n");

        Document doc =

          Application.DocumentManager.MdiActiveDocument;

        Editor ed = doc.Editor;

        Database db = doc.Database;

        Transaction tr =

          db.TransactionManager.StartTransaction();

        using (tr)
        {

            // We'll be plotting the current layout

            BlockTableRecord btr = CreateBlockTableRecord(db, tr);

            Layout lo = CreateLayout(tr, btr);

            PlotInfo pi = ConfigurePlotInfo(btr);

            PlotSettings ps = CreatePlotSettings(lo);

            CreatePlotSettings(ps);

            LinkPlotInfoToPlotSettings(pi, ps);

            // A PlotEngine does the actual plotting

            // (can also create one for Preview)

            if (PlotFactory.ProcessPlotState ==

                ProcessPlotState.NotPlotting)
            {

                PlotEngine pe =

                  PlotFactory.CreatePublishEngine();

                using (pe)
                {

                    // Create a Progress Dialog to provide info

                    // and allow thej user to cancel

                    PlotProgressDialog ppd =

                      new PlotProgressDialog(false, 1, true);

                    using (ppd)
                    {

                        ppd.set_PlotMsgString(

                          PlotMessageIndex.DialogTitle,

                          "Custom Plot Progress"

                        );

                        ppd.set_PlotMsgString(

                          PlotMessageIndex.CancelJobButtonMessage,

                          "Cancel Job"

                        );

                        ppd.set_PlotMsgString(

                          PlotMessageIndex.CancelSheetButtonMessage,

                          "Cancel Sheet"

                        );

                        ppd.set_PlotMsgString(

                          PlotMessageIndex.SheetSetProgressCaption,

                          "Sheet Set Progress"

                        );

                        ppd.set_PlotMsgString(

                          PlotMessageIndex.SheetProgressCaption,

                          "Sheet Progress"

                        );

                        ppd.LowerPlotProgressRange = 0;

                        ppd.UpperPlotProgressRange = 100;

                        ppd.PlotProgressPos = 0;

                        // Let's start the plot, at last

                        ppd.OnBeginPlot();

                        ppd.IsVisible = true;

                        pe.BeginPlot(ppd, null);

                        // We'll be plotting a single document
                        Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage(doc.Name);
                        AcadDocument ppp = (AcadDocument)doc.GetAcadDocument(); //ou GetAcadDocument()
                        String nome_arq = ppp.Name;
                        nome_arq = nome_arq.Remove(nome_arq.Length - 4, 4);

                        pe.BeginDocument(

                              pi,

                              doc.Name,

                              null,

                              1,

                              true, // Let's plot to file

                              "c:\\" + nome_arq

                            );

                            // Which contains a single sheet

                            ppd.OnBeginSheet();

                            ppd.LowerSheetProgressRange = 0;

                            ppd.UpperSheetProgressRange = 100;

                            ppd.SheetProgressPos = 0;

                            PlotPageInfo ppi = new PlotPageInfo();

                            pe.BeginPage(

                              ppi,

                              pi,

                              true,

                              null

                            );

                            pe.BeginGenerateGraphics(null);

                            pe.EndGenerateGraphics(null);

                            // Finish the sheet

                            pe.EndPage(null);

                            ppd.SheetProgressPos = 100;

                            ppd.OnEndSheet();

                            // Finish the document

                            pe.EndDocument(null);

                        // And finish the plot

                        ppd.PlotProgressPos = 100;

                        ppd.OnEndPlot();

                        pe.EndPlot(null);

                    }

                }

            }

            else
            {

                ed.WriteMessage(

                  "\nAnother plot is in progress."

                );

            }

        }

    }

    private static void LinkPlotInfoToPlotSettings(PlotInfo pi, PlotSettings ps)
    {
        // We need to link the PlotInfo to the

        // PlotSettings and then validate it

        pi.OverrideSettings = ps;

        PlotInfoValidator piv =

          new PlotInfoValidator();

        piv.MediaMatchingPolicy =

          MatchingPolicy.MatchEnabled;

        piv.Validate(pi);
    }

    private static void CreatePlotSettings(PlotSettings ps)
    {
        // The PlotSettingsValidator helps

        // create a valid PlotSettings object

        PlotSettingsValidator psv =

          PlotSettingsValidator.Current;

        // We'll plot the extents, centered and

        // scaled to fit

        psv.SetPlotType(

          ps,

          Autodesk.AutoCAD.DatabaseServices.PlotType.Extents

        );

        psv.SetUseStandardScale(ps, true);

        psv.SetStdScaleType(ps, StdScaleType.ScaleToFit);

        psv.SetPlotCentered(ps, true);

        // We'll use the standard DWF PC3, as

        // for today we're just plotting to file

        psv.SetPlotConfigurationName(

          ps,

          "DWG To PDF.pc3",

          "ANSI_A_(8.50_x_11.00_Inches)"

        );
    }

    private static PlotSettings CreatePlotSettings(Layout lo)
    {
        // We need a PlotSettings object

        // based on the layout settings

        // which we then customize

        PlotSettings ps =

          new PlotSettings(lo.ModelType);

        ps.CopyFrom(lo);
        return ps;
    }

    private static PlotInfo ConfigurePlotInfo(BlockTableRecord btr)
    {
        // We need a PlotInfo object

        // linked to the layout

        PlotInfo pi = new PlotInfo();

        pi.Layout = btr.LayoutId;
        return pi;
    }

    private static Layout CreateLayout(Transaction tr, BlockTableRecord btr)
    {
        Layout lo =

          (Layout)tr.GetObject(

            btr.LayoutId,

            OpenMode.ForRead

          );
        return lo;
    }

    private static BlockTableRecord CreateBlockTableRecord(Database db, Transaction tr)
    {
        BlockTableRecord btr =

          (BlockTableRecord)tr.GetObject(

            db.CurrentSpaceId,

            OpenMode.ForRead

          );
        return btr;
    }

    [CommandMethod("CONVERSOR", CommandFlags.Session)]
    public void Conversor()
    {
        //Editor ed = Application.DocumentManager.MdiActiveDocument.Editor;
        //PromptStringOptions pso = new PromptStringOptions("");
        //pso.AllowSpaces = true;
        //PromptResult res = ed.GetString("\nEnterName:");
        //diretorio = res.StringResult;
        //Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("diretorio" + diretorio);
        Application.DocumentManager.MdiActiveDocument.Editor.WriteMessage("CONVERSOR ACIONADO. Arq: " + arq);
        Application.DocumentManager.MdiActiveDocument.CommandEnded += new CommandEventHandler(MdiActiveDocument_CommandEnded);

    }

}

} 
```

正如您在此处看到的，它是一个具有四种状态的状态机：CONVERSOR、OPEN、PLOTTOPDF、CLOSE。我读取了磁盘中的 N 个文件，并在这个循环中保持状态，直到没有要处理的 mroe 文件。我希望所有 dxfs 文件都转换为 pdf。当我只为一个文件运行它时，它可以正常工作。问题是这样的：

想象一下，我在第一个文件中通过 CONVERSOR -> OPEN -> PLOTTOPDF -> CLOSE。AutoCAD打开文件，切换活动文档，我无法进入CLOSE状态，然后我的机器状态停止在PLOTTOPDF状态。（甚至第一个文件也没有关闭，而是正确转换为pdf）。任何人都可以帮助解决这个问题吗？我认为问题在于，当我打开一个新文件时，活动文档会发生变化，而 AutoCAD 在查看命令是否完成时会迷失方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:20:54.690

布局必须是最新的才能被绘制。所以你必须打电话给：

```
Application.DocumentManager.MdiActiveDocument = doc;
LayoutManager.Current.CurrentLayout = layoutName; 
```

否则，CreateLayout 方法的名称是错误的。你不是在创建一个布局，你只是得到它。

而且我不明白您为什么要使用 COM 来获取文档的名称。

```
AcadDocument ppp = (AcadDocument)doc.GetAcadDocument();
String nome_arq = ppp.Name;
nome_arq = nome_arq.Remove(nome_arq.Length - 4, 4); 
```

可以替换为：

```
nome_arq = System.IO.Path.GetFileNameWithoutExtension(doc.Name); 
```

# javascript - d3.js：当只想比较 HH:MM 时，时间尺度是否适合 x 轴？

> ID：14369608
> 
> 赞同：0
> 
> 时间：2013-01-16T23:13:37.987
> 
> 标签：javascript, d3.js

我想创建比较多组数据的图表。集合中的每个对象都有一个 Y 轴浮点值和一个 X 轴值，格式为“2013-01-11T00:00:00Z”。

我的数据结构如下：

```
{
  data_set_a:
    line_1:
      [ { x: x, y: y}, ... ]
    line_2:
      [ { x: x, y: y}, ... ]
  data_set_b:
    line_1:
      [ { x: x, y: y}, ... ]
    line_2:
      [ { x: x, y: y}, ... ]

   ...
  } 
```

注意：如果某些事情更有意义/更简单，我可以完全控制数据集。

对于以下问题，我只对绘制 data_set_a 中的内容感兴趣。其余的将是单独的图表。

1.  当 X 轴处理日期时，我是否想在时间尺度上使用序数比例并使用 time.format.iso.parse 进行解析？有没有办法告诉 d3 只比较“HH:MM”并为 X 轴文本指定一个自定义格式（即 12pm | | | 1pm 等，其中 | 是 15m 间隔的刻度）？还是这个任务更适合我在传递给 d3 之前处理日期的序数比例？

2.  我试图跟随部分示例演示设置一条线以用于图表上显示的所有线。如何设置比例和域，以便它们考虑适用于系列中所有行的范围？

这是我到目前为止的位置：[https](https://gist.github.com/87e52b278c3ab2ada196) ://gist.github.com/87e52b278c3ab2ada196 。假设我的图表还不太漂亮。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:35:16.433

首先，D3 带有开箱即用的[时间刻度。](https://github.com/mbostock/d3/wiki/Time-Scales)检查那些。

其次，为了为所有数据点正确设置比例，您需要计算所有数据点的界限：

```
var data = /* your data from above */,
    points = [].concat(d3.values(data.data_set_a)),
    x_extent = d3.extent(points, function(d) { return d.x; }),
    y_extent = d3.extent(points, function(d) { return d.y; }); 
```

有了这些信息，您应该能够正确设置您的秤。

# ruby-on-rails-3.2 - 让 Rails 嵌套资源路由到正确的嵌套控制器

> ID：14369609
> 
> 赞同：11
> 
> 时间：2013-01-16T23:13:47.220
> 
> 标签：ruby-on-rails-3.2, rails-routing, controllers, nested-resources

在 Rails 3.2.11 中，我有以下路由定义

```
resources :foos do
    resources :bars
    resources :bangs, :controller => 'foos/bangs'
end 
```

导致以下路线

```
 foo_bars GET    /foos/:foo_id/bars(.:format)            bars#index
              POST   /foos/:foo_id/bars(.:format)            bars#create
  new_foo_bar GET    /foos/:foo_id/bars/new(.:format)        bars#new
 edit_foo_bar GET    /foos/:foo_id/bars/:id/edit(.:format)   bars#edit
      foo_bar GET    /foos/:foo_id/bars/:id(.:format)        bars#show
              PUT    /foos/:foo_id/bars/:id(.:format)        bars#update
              DELETE /foos/:foo_id/bars/:id(.:format)        bars#destroy
    foo_bangs GET    /foos/:foo_id/bangs(.:format)           foos/bangs#index
              POST   /foos/:foo_id/bangs(.:format)           foos/bangs#create
 new_foo_bang GET    /foos/:foo_id/bangs/new(.:format)       foos/bangs#new
edit_foo_bang GET    /foos/:foo_id/bangs/:id/edit(.:format)  foos/bangs#edit
     foo_bang GET    /foos/:foo_id/bangs/:id(.:format)       foos/bangs#show
              PUT    /foos/:foo_id/bangs/:id(.:format)       foos/bangs#update
              DELETE /foos/:foo_id/bangs/:id(.:format)       foos/bangs#destroy
         foos GET    /foos(.:format)                         foos#index
              POST   /foos(.:format)                         foos#create
      new_foo GET    /foos/new(.:format)                     foos#new
     edit_foo GET    /foos/:id/edit(.:format)                foos#edit
          foo GET    /foos/:id(.:format)                     foos#show
              PUT    /foos/:id(.:format)                     foos#update
              DELETE /foos/:id(.:format)                     foos#destroy 
```

路径都是正确的，但控制器路由仅对`resources :bangs`. `resources :bars`应该路由到控制器而`foos/bars`不是`bars`控制器。

过去我可以在其中设置命名空间控制器`foos/`来处理嵌套资源。

```
#app/controllers/foos/bars_controller.rb

class Foos::BarsController < ApplicationController
    #/foos/:foo_id/bar/:id available here
end 
```

然而，这似乎不再是这种情况了。这种行为何时发生变化，如何在 Rails 3.2.11 中获得相同的功能？

**编辑**：我意识到`resources :bangs`正确的控制器映射中的结果，但我希望能够隐式地完成。如果我有多个嵌套资源`:foos`，我不想为每个资源定义控制器。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-20T16:42:25.097

您可以添加范围来指定模块。Rails 假定嵌套资源的控制器本身不是嵌套的。

```
resources :foos do
    scope module: :foos do
        resources :bars
        resources :bangs
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:36:12.163

```
resources :foos do
  resources :bars, :controller -> 'foos/bars'
  resources :bangs, :controller => 'foos/bangs'
end 
```

这不是你需要的吗？

# c# - RazorEngine 取消缓存已编译的模板

> ID：14369614
> 
> 赞同：14
> 
> 时间：2013-01-16T23:14:07.273
> 
> 标签：c#, service, razorengine

目前，我正在使用 RazorEngine v2.1 作为发送模板电子邮件（数千封）的后台进程的一部分。为了加快速度，模板以它们的 md5 总和作为名称进行编译。这使得当模板更改时，它会被重新编译，并且所有使用该模板的电子邮件都能够使用相同的编译模板。我在列表中跟踪已编译模板的名称，以便知道何时再次调用 compile（并做一些其他事情）。

**问题**：我突然想到，经过很长时间和大量模板修改后，所有这些缓存的编译模板可能仍会在内存中，因为它们看起来像是存储在`dynamic`. 对于这个可能一次运行数月而无需重新启动的特定进程，如果所有先前版本的模板仍然存在，这可能构成严重的内存泄漏。

**问题**：有没有办法取消缓存旧模板，使它们不再在`dynamic`?

例如，如果我能够自己保留已编译的模板对象，并在我想使用它们时将它们传递给 RazorEngine，我可以决定何时将它们扔掉，这样就可以消除内存泄漏。但是，如果 RazorEngine 已经有办法解决这个问题，那么了解这一点也会很方便，因为我在互联网上找不到很多关于这个特定问题的参考资料。关于为什么应该使用编译模板来减少内存使用的原因有很多，但是我很难找到关于在长期应用程序中积累大量未使用的编译模板的任何信息。

编辑：我刚刚阅读了一些关于缓存如何工作的内容，如果使用不同的模板传入相同的名称，它将重新缓存它并丢弃旧的。然而，这里的问题仍然存在，因为随着时间的推移，电子邮件将被添加和删除，并且随着时间的推移，所有已删除的旧电子邮件仍然存在（即使它不会存储模板的每个版本的副本）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-07T19:36:34.680

回答这个问题，因为它似乎仍然与某些人相关。（[https://github.com/Antaris/RazorEngine/issues/232#issuecomment-128802285](https://github.com/Antaris/RazorEngine/issues/232#issuecomment-128802285)）

> 对于这个可能一次运行数月而无需重新启动的特定进程，如果所有先前版本的模板仍然存在，这可能构成严重的内存泄漏。

当您更改和重新编译模板时，您会发生内存泄漏，因为您无法卸载已加载的程序集（RazorEngine 在后台为您编译和加载）。

*真正*释放内存的唯一方法是重新加载 AppDomain 或重新启动进程。

其他答案似乎是在谈论较新的版本，这些版本可以防止默认配置中的内存泄漏（让您意识到问题），并且需要一些自定义配置才能使用另一个模板代码重新编译密钥。请注意，所有其他答案实际上会*增加*内存消耗！

matthid，RazorEngine 贡献者

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-03T01:57:57.450

我最近升级到 RazorEngine (3.6.1) 的最新稳定版本，由于所有更改，我清除缓存的策略不再有效。发生了很多变化，该项目的文档不仅过时，而且从作者的角度编写，导致用户体验不佳。

这是我当前使用 3.6.1 清除所有缓存模板的代码。

```
public static class TemplateManager
{
    static IRazorEngineService Service { get; set; }
    static TemplateServiceConfiguration Configuration { get; set; }

    static TemplateManager()
    {
        Configuration = new TemplateServiceConfiguration()
        {
            // setting up our custom template manager so we map files on demand
            TemplateManager = new MyTemplateManager()
        };
        Service = RazorEngineService.Create(Configuration);
        Engine.Razor = Service;
    }

    /// <summary>
    /// Resets the cache.
    /// </summary>
    public static void ResetCache()
    {
        Configuration.CachingProvider = new RazorEngine.Templating.DefaultCachingProvider();
    }

    /// <summary>
    /// Compiles, caches and parses a template using RazorEngine.
    /// </summary>
    /// <param name="templateType">Type of the template.</param>
    /// <param name="anonymousType">Type of the anonymous object.</param>
    /// <param name="cachedEnabled">true to enabled caching; false otherwise</param>
    /// <returns></returns>
    public static string GetTemplate<T>(EmailTemplateType templateType, T anonymousType, bool cachedEnabled = true)
    {
        string templateName = templateType.ToString();

        if (cachedEnabled == false)
            ResetCache();

        // pre-compile, cache & parse the template
        return Engine.Razor.RunCompile(templateName, null, anonymousType);
    }
}

public enum EmailTemplateType
{
    ForgotPassword,
    EmailVerification
}

public class MyTemplateManager : ITemplateManager
{
    public ITemplateSource Resolve(ITemplateKey key)
    {
        string file = HttpContext.Current.Server.MapPath(string.Format("~/EmailTemplates/{0}.cshtml", key.Name));
        return new LoadedTemplateSource(System.IO.File.ReadAllText(file), file);
    }

    public ITemplateKey GetKey(string name, ResolveType resolveType, ITemplateKey context)
    {
        return new NameOnlyTemplateKey(name, resolveType, context);
    }

    public void AddDynamic(ITemplateKey key, ITemplateSource source)
    {
        throw new NotImplementedException("dynamic templates are not supported!");
    }
} 
```

这是 Asp.Net MVC 中代码的示例用法：

```
var emailBody = TemplateManager.GetTemplate(EmailTemplateType.ForgotPassword, new
{
    SiteUrl = Url.Action(MVC.Home.Index(), protocol: Request.Url.Scheme),
    SiteFriendlyName = SiteSettings.Instance.DomainName.FriendlyName,
    PasswordResetLink = Url.Action(MVC.Account.ActionNames.ResetPassword, MVC.Account.Name, new { userId = user.Id, code = code }, protocol: Request.Url.Scheme),
    NotRequestedUrl = Url.Action(MVC.Account.ActionNames.PasswordResetNotReqeuested, MVC.Account.Name, new { userId = user.Id, requesterIpAddress = WebUtils.GetClientIPAddress(), code = code }, protocol: Request.Url.Scheme)
},
/* this setting allows me to disable caching during development */
!SiteSettings.Instance.EmailSettings.DebugEmailTemplates );

// I could also have a button on an admin page that executed this code to manually reset the cache in production.
TemplateManager.ResetCache(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-12T09:14:46.133

似乎 RazorEngine 在 TemplateService 实例中存储了已编译模板的缓存。因此，您可以不时重新创建 TemplateService 的新实例以删除所有缓存的模板。

您还可以考虑使用我自己的基于 RazorEngine 并实现自定义缓存机制的库：[http ://www.nuget.org/packages/Essential.Templating.Razor](http://www.nuget.org/packages/Essential.Templating.Razor)

# c# - 当前顶点声明不包括当前顶点着色器所需的所有元素。缺少颜色 0。（绘制网格）

> ID：14369617
> 
> 赞同：1
> 
> 时间：2013-01-16T23:14:14.923
> 
> 标签：c#, 3d, xna, drawing, mesh

```
private void DrawModel()
    {
        Matrix worldMatrix = Matrix.CreateScale(0.0005f, 0.0005f, 0.0005f) * Matrix.CreateRotationZ(MathHelper.Pi) * Matrix.CreateTranslation(new Vector3(19, 12, -5));

        Matrix[] modelTransforms = new Matrix[testModel.Bones.Count];
        testModel.CopyAbsoluteBoneTransformsTo(modelTransforms);
        foreach (ModelMesh mesh in testModel.Meshes)
        {
            foreach (Effect currentEffect in mesh.Effects)
            {
                currentEffect.CurrentTechnique = currentEffect.Techniques["Colored"];
                currentEffect.Parameters["xWorld"].SetValue(modelTransforms[mesh.ParentBone.Index] * worldMatrix);
                currentEffect.Parameters["xView"].SetValue(viewMatrix);
                currentEffect.Parameters["xProjection"].SetValue(projectionMatrix);
            }
            mesh.Draw();
        }
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Black);
        DepthStencilState depthBufferState = new DepthStencilState();
        depthBufferState.DepthBufferEnable = true;
        GraphicsDevice.DepthStencilState = depthBufferState;
        RasterizerState rs = new RasterizerState();
        if (wireframeMode)
            rs.FillMode = FillMode.WireFrame;
        if (showAllTriangles)
            rs.CullMode = CullMode.None;//DO NOT INCLUDE IN FINAL PRODUCT--DRAWS ALL TRIANGLES
        GraphicsDevice.RasterizerState = rs;
        Matrix worldMatrix = Matrix.CreateTranslation(-terrainWidth / 2.0f, -terrainHeight / 2.0f, 0) * Matrix.CreateRotationZ(angle);
        effect.CurrentTechnique = effect.Techniques["Colored"];
        effect.Parameters["xView"].SetValue(viewMatrix);
        effect.Parameters["xProjection"].SetValue(projectionMatrix);
        effect.Parameters["xWorld"].SetValue(worldMatrix);
        //lighting (ambient)
        Vector3 lightDirection = new Vector3(1.0f, -1.0f, -1.0f);
        lightDirection.Normalize();
        effect.Parameters["xLightDirection"].SetValue(lightDirection);
        effect.Parameters["xAmbient"].SetValue(0.1f);
        effect.Parameters["xEnableLighting"].SetValue(true);
        //drawing
        foreach (EffectPass pass in effect.CurrentTechnique.Passes)
        {
            pass.Apply();

        }
        GraphicsDevice.Indices = indexBuffer;
        GraphicsDevice.SetVertexBuffer(vertexBuffer);
        GraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, vertices.Length, 0, indices.Length / 3);
        DrawModel();
        base.Draw(gameTime);
    } 
```

这是我用来绘制 3D 对象的代码。问题发生在 mesh.Draw();

错误是：当前顶点声明不包括当前顶点着色器所需的所有元素。缺少颜色 0。

我试图弄清楚发生了什么，但无济于事。即使你能告诉我在哪里看，这将是一个巨大的帮助！

编辑：.fx 文件在[这里](http://users.telenet.be/riemer/files/effects.fx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:36:01.263

我需要使用 VertexPositionNormalTexture，而不是 VertexPositionColorNormal。网格不能处理颜色，但它们可以处理纹理。

# php - 为什么这个 php 正则表达式不匹配所有输入

> ID：14369620
> 
> 赞同：0
> 
> 时间：2013-01-16T23:14:27.950
> 
> 标签：php, regex

为什么下面的正则表达式：`$regex = '/\b(V|E)?\d{1,2}? ?\d{3} ?\d{3}\b/i';` 不匹配下面的所有输入

我确实认为这`(V|E)?\d{1,2}? ?`将使字母、第一个或两个数字和第一个空格成为可选

# 输入

```
<?php

$sms = array(
    'test test test 11 111 111 test test test',
    'test test test 1 111 111 test test test',
    'test test test 111 111 test test test', // does not match
    'test test test test test test 11111111',
    'test test test 1111111 test test test',
    'test test test 111111 test test test', // does not match
    'test test test E11 111 111 test test test',
    'test test test V1 111 111 test test test',
    'test test test V111 111 test test test', // does not match
    'test test test V11111111 test test test',
    'test test test V1111111 test test test',
    'test test test E111111 test test test', // does not match
    'test test test V 11 111 111 test test test',
    'test test test V 1 111 111 test test test',
    'test test test E 111 111 test test test', // does not match
    'test test test V 11111111 test test test',
    'test test test V 1111111 test test test',
    'test test test V 111111 test test test', //does not match
    'test test test V11 111 111 test test test',
    'test test test V1 111 111 test test test',
    'test test test E111 111 test test test', //does not match
    'test test test V11111111 test test test',
    'V1111111 test test test  test test test',
    'test test test V111111 test test test', // does not match
);

$regex = '/\b(V|E)?\d{1,2}? ?\d{3} ?\d{3}\b/i';
$noMatches = 0;
$index = 0;
foreach($sms as $v) {
    $match = preg_match($regex, $v, $matches);

    if($match) {
        //print_r($matches);
        //echo "$v match!\n";
        //$matches++;
    }
    else {
        echo "$index - $v does NOT match!\n";
        $noMatches++;
    }
    $index++;
}
$total = count($sms);
echo "\n\nTotal: $total\nNo Matches: $noMatches\n"; 
```

# 输出

```
$ php test-regex.php 
2 - test test test 111 111 test test test does NOT match!
5 - test test test 111111 test test test does NOT match!
8 - test test test V111 111 test test test does NOT match!
11 - test test test E111111 test test test does NOT match!
14 - test test test E 111 111 test test test does NOT match!
17 - test test test V 111111 test test test does NOT match!
20 - test test test E111 111 test test test does NOT match!
23 - test test test V111111 test test test does NOT match!

Total: 24
No Matches: 8 
```

# 编辑：

使用马里奥建议正则表达式现在是`$regex = '/\b(V|E)?\d{0,2} ?\d{3} ?\d{3}\b/i';`，为什么在某些情况下，这个正则表达式不捕获字母`V`或`E`

```
$output = array(
    'test test test E11 111 111 test test test' => 'E11 111 111',
    'test test test V1 111 111 test test test' => 'V1 111 111',
    'test test test V111 111 test test test' => 'V111 111',
    'test test test V11111111 test test test' => 'V11111111',
    'test test test V1111111 test test test' => 'V1111111',
    'test test test E111111 test test test' => 'E111111',
    'test test test V 11 111 111 test test test' => '11 111 111', // Missing Letter
    'test test test V 1 111 111 test test test' => '1 111 111', // Missing Leter
    'test test test E 111 111 test test test' => 'E 111 111',
    'test test test V 11111111 test test test' => '11111111', // Missing Letter
    'test test test V 1111111 test test test' => '1111111', // Missing Letter
    'test test test V 111111 test test test' => 'V 111111',
    'test test test V11 111 111 test test test' => 'V11 111 111',
    'test test test V1 111 111 test test test' => 'V1 111 111',
    'test test test E111 111 test test test' => 'E111 111',
    'test test test V11111111 test test test' => 'V11111111',
    'V1111111 test test test  test test test' => 'V1111111',
    'test test test V111111 test test test' => 'V111111',
    'V 1111111 test test test' => '1111111', // Missing Letter
    'test test test V 1111111 test test test' => '1111111', // Missing Letter
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:19:41.903

`?`only 是组或文字字符或字符类之后的量词，例如

如果`?`发生在另一个量词之后，或者`*`它只会使匹配不那么贪婪。这意味着正则表达式将尝试匹配最少的数量。`+``{n,m}`

所以`\d{1,2}?`并不意味着可选。这意味着匹配一两个，但更喜欢只匹配一个。你的意思是改写`\d{0,2}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:19:13.700

它们不匹配，因为正则表达式总共需要至少 7 位数字：

```
/\b(V|E)?\d{1,2}? ?\d{3} ?\d{3}\b/
             |        |      |
             |        |      \-------->  3 digits exactly
             |        \--------------->  3 digits exactly
             \------------------------>  1 or 2 digits (prefers 1, but will match
                                         2 if there are 8 digits in a row) 
```

所有失败的输入都短一位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:19:46.467

如果您想让第一部分完全可选，则​​必须将其括在括号中并附加 a `?`。您还可以使用字符组`V|E`

```
(?:[VE]\d{1,2} )? 
```

# c# - 将项目异步添加到 ListBox

> ID：14369621
> 
> 赞同：0
> 
> 时间：2013-01-16T23:14:29.930
> 
> 标签：c#, webforms, asp.net-ajax, updatepanel

我正在向 ListBox 添加项目，`uxSearchList`. 但是，即使**后面的代码按预期工作**，单击后更改不会反映在`uxSearchList`ListBox 中`Search`。

我执行以下操作：

*   输入搜索条件 ( `uxEsnCheck/Text`, `uxLocationList/Text`)
*   点击`Search`
*   （进行中）将搜索结果填充到`uxSearchList`

如何`uxSearchList`通过我目前拥有的内容填充 ListBox？我的代码如下。

* * *

**.ASPX.CS**

```
 protected void uxSearchParams_Click(object sender, EventArgs e)
    {
        uxSearchList.Items.Clear();

        var selectedSerial = uxEsnText.Text;
        var selectedLocation = uxLocationList.Text;

        if (!uxEsnText.Enabled)
        {
            selectedSerial = string.Empty;
        }
        if (!uxLocationList.Enabled)
        {
            selectedLocation = string.Empty;
        }

        if (Page.IsValid)
        {
            var selectedParams = _presenter.OnSelectionParams(selectedSerial, selectedLocation);

            foreach (var param in selectedParams)
            {
                uxSearchList.Items.Add(param.SerialNumber);
            }
        }
    } 
```

**.ASPX**

```
 <asp:UpdatePanel ID="uxParamsPanel" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:CheckBox ID="uxEsnCheck" runat="server" CssClass="form-label" Text="Engine Serial Number" OnCheckedChanged="uxEsnCheck_CheckedChanged" AutoPostBack="true" />
                <asp:TextBox ID="uxEsnText" runat="server" Enabled="False"/>

                <asp:CheckBox ID="uxLocationCheck" runat="server" CssClass="form-label" Text="Location" OnCheckedChanged="uxLocationCheck_CheckedChanged" AutoPostBack="true" />
                <asp:DropDownList ID="uxLocationList" runat="server" Enabled="False"/>

                <asp:Button ID="uxSearchParams" runat="server" onclick="uxSearchParams_Click" CssClass="form-label" Text="Search" />
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="uxSearchParams" EventName="Click" />

                <asp:AsyncPostBackTrigger ControlID="uxEsnCheck" EventName="CheckedChanged" />
                <asp:AsyncPostBackTrigger ControlID="uxLocationCheck" EventName="CheckedChanged" />
            </Triggers>
        </asp:UpdatePanel>

        <asp:UpdatePanel ID="uxSelectionPanel" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Label ID="uxSearchDisplay" runat="server" CssClass="form-label" Text="Search Results" />
                <asp:ListBox ID="uxSearchList" runat="server" Width="250px" />

                <asp:Label ID="uxMemberDisplay" runat="server" CssClass="form-label" Text="Engine Group Members" />
                <asp:ListBox ID="uxMemberList" runat="server" Width="250px" />

                <asp:Button ID="uxAdd" runat="server" onclick="uxAdd_Click" Text=">" />
                <asp:Button ID="uxRemove" runat="server" onclick="uxRemove_Click" Text="<" />
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="uxAdd" EventName="Click" />
                <asp:AsyncPostBackTrigger ControlID="uxRemove" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:24:01.413

当您单击搜索时，您正在更新服务器端的列表。您需要为客户端提供一种更新方式。我看到 uxSearchList 在 UpdatePanel 中。我不太擅长这些，但我会尝试为此添加额外的触发器。这样，当 uxSearchList 的内容发生变化时，面向客户端的显示也会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:12:09.990

使用数据绑定方法可能会获得更好的结果。使用以下课程，我能够正确显示结果。

```
using System;
using System.Collections.Generic;

namespace Test.Web
{
    public partial class Test : System.Web.UI.Page
    {
        private readonly IList<string> database;
        private string currentSearch;

        public Test()
        {
            database = new List<string>();
            database.Add("hello");
            database.Add("world");
        }

        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);
            uxSearchList.DataBinding += dataBindSearch;
        }

        protected void OnSearch(object sender, EventArgs e)
        {
            currentSearch = searchText.Text;
            uxSearchList.DataBind();
        }

        private void dataBindSearch(object sender, EventArgs e)
        {
            IList<string> results = new List<string>();
            foreach (string item in database)
            {
                if (item.StartsWith(currentSearch))
                {
                    results.Add(item);
                }
            }
            uxSearchList.DataSource = results;
        }
    }
} 
```

主要区别是我使用`DataSource`而不是`Items`集合，并在搜索查询发生更改时调用列表上的 DataBind。

如果此更改对您不起作用，则标记可能存在另一个问题。我只是绑定 OnTextChanged 事件，仅此而已。

```
<div>
    <asp:TextBox ID="searchText" OnTextChanged="OnSearch" AutoPostBack="true" runat="server" />
    <asp:UpdatePanel ID="uxSelectionPanel" runat="server">
        <ContentTemplate>
            <asp:Label ID="uxSearchDisplay" runat="server" CssClass="form-label" Text="Search Results" />
            <asp:ListBox ID="uxSearchList" runat="server" Width="250px" />
        </ContentTemplate>
    </asp:UpdatePanel>
</div> 
```

# javascript - 用于 WP 的 jQuery 即兴

> ID：14369622
> 
> 赞同：0
> 
> 时间：2013-01-16T23:14:46.407
> 
> 标签：javascript, jquery, wordpress

我正在寻找一个像[jQuery Impromptu](http://trentrichardson.com/Impromptu/) for Wordpress 这样的插件，这个插件可以让我在主页上显示一个覆盖的“游览”。

我在谷歌上搜索了很多都无济于事，我发现 Impromptu 很难作为我的技能独立嵌入。

有人知道 Wordpress 解决方案吗？

回答：

从@mccanf 获取更多信息后，我发现[了这个](http://www.designfloat.com/blog/2012/09/10/jquery-website-tour-plugins/)不错的 jQuery 旅游插件集合页面。我只是没有在寻找正确的词，我猜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:20:08.680

您始终可以`script`使用标签将标签嵌入到您的 wordpress 页面中`wp_enqueue_script()`，或者如果您的所有 wordpress 页面都需要此库，您可以将其包含在 header.php 文件中。请参阅此[Wordpress 教程](http://codex.wordpress.org/Using_Javascript)，了解如何操作。

# actionscript-3 - 在 hittest 上删除数组时遇到问题

> ID：14369623
> 
> 赞同：0
> 
> 时间：2013-01-16T23:14:49.227
> 
> 标签：actionscript-3, flash, actionscript

我有以下错误：ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 flash.display::DisplayObjectContainer/removeChild() 在 lamagame_fla::MainTimeline/bulletEnterFrame()[lamagame_fla.MainTimeline::frame2:116]

在以下代码中：主时间轴

```
 var j:int;
    addEventListener(Event.ENTER_FRAME, enemyhit);
    function enemyhit(event:Event):void {
    for (i = enemy_array.length -1; i >= 0; i--){
        for(var j = 0; j < bulletarray.length; j++) {       
            if(enemy_array[i].hitTestObject(bulletarray[j])) {
                removeChild(enemy_array[i]);
            removeChild(bulletarray[j]);
            enemy_array.splice(j, 1);
            bulletarray.splice(i, 1);
            j--;
            break;
            }
        }

        }
    }
stage.addEventListener(MouseEvent.MOUSE_DOWN, onDown)
stage.addEventListener(MouseEvent.MOUSE_UP, onUp)

var pressedState:int = 0;

var myTimer:Timer = new Timer(10);
myTimer.addEventListener(TimerEvent.TIMER, onTimerTick);

function onDown(e:MouseEvent)
{
    myTimer.start();
    switch(e.currentTarget)
    {
        case stage:
        pressedState = 1;
        break;
    }
}

function onUp(e:MouseEvent)
{
    myTimer.stop();
    pressedState = 0
}

function onTimerTick(e:TimerEvent)
{
    switch(pressedState)
    {
        case 1:
        // Create a new bullet
    var b:Bullet = new Bullet();
    // Set his position to the tank position
        if(llama.scaleX==1) {
    b.x = llama.x+20;
    b.y = llama.y-50;
    }else{
        if(llama.scaleX==-1) {
    b.x = llama.x-25;
    b.y = llama.y-50;
    }else{
        b.x = llama.x+20;
        b.y = llama.y-50;
    }
    }
    // Save the randian angle between the mouse and the tank
    // This angle will set the direction of the bullet
    b.angleRadian = Math.atan2(mouseY - llama.y,mouseX - llama.x);
    // Add an enter frame event on each bullet
    b.addEventListener(Event.ENTER_FRAME, bulletEnterFrame);
    // Add this display object on the display list
    addChild(b);
    bulletarray.push(b);
        break;
    }
    return b;
}
import flash.display.MovieClip;
import flash.geom.Point;
import flash.events.MouseEvent;

// Code by Benoit Freslon.
// Tutorials, Flash games:
// http://www.benoitfreslon.com

// This object will always look at the mouse cursor
llama.head.addEventListener(Event.ENTER_FRAME,  llamaenterframe);
// This function will be launched every frame (25 times by seconds);
function llamaenterframe(pEvt) {
    // pEvt.currentTarget: myTank
    var b = pEvt.currentTarget;
    // Get the radian angle between the tank and the cursor
    // You can also replace mouseX and mouseY by another coordinates
    // Convert the radian angle in dedree angle
    var angleDegree = b.angleRadian * 90 / Math.PI;
    // Set the orientation
    b.rotation = angleDegree;
    // Display angle of rotation in degree
    vcam.txtAngle.text = Math.round(angleDegree) + "°";
}
// Velocity of each bullet
var speed = 8;

function bulletEnterFrame(pEvent) {
    // Get the current object (Bullet)
    var b = pEvent.currentTarget;
    // Move this bullet on each frames
    // On X axis use the cosinus angle
    b.x +=  Math.cos(b.angleRadian) * speed;
    // On Y axis use the sinus angle
    b.y +=  Math.sin(b.angleRadian) * speed;
    // Orient the bullet to the direction
    b.rotation = b.angleRadian * 180 / Math.PI;
    // You have to remove each created bullet
    // So after every moves you must check bullet position
    // If the bullet is out of the screen
    if (!b.hitTestObject(vcam)) {
        // Remove it from the display list
        removeChild(b);
        bulletarray.splice(bulletarray.indexOf(j), 1);
        // /!\ AND REOMOVE HIS EVENT LISTER
        b.removeEventListener(Event.ENTER_FRAME, bulletEnterFrame);
    }
}

// Set his position to the tank position

var maxHP:int = 400;
var currentHP:int = maxHP;
var percentHP:Number = currentHP / maxHP;
updateHealthBar();

function updateHealthBar():void
{
     percentHP = currentHP / maxHP;
     llama.healthBar.barColor.scaleX = percentHP;
}
// properties in class ----------
        var enemy_array:Array = new Array;  

         // dynamically place MovieClip instances on the stage ----------
        // inside Constructor function of class
        var enemy_number:int=100;//number of circles on the stage

        for(var i=0; i<enemy_number; i++) {

            enemy_array[i] = new enemy(); //linkage in the library
            enemy_array[i].x = MovieClip(root).background1tiles.x + Math.floor( Math.random()* MovieClip(root).background1tiles.width) ;
            enemy_array[i].y = MovieClip(root).background1tiles.y + Math.floor( Math.random()* MovieClip(root).background1tiles.height) ;
            enemy_array[i].addEventListener(Event.ENTER_FRAME, function (event:Event):void {
            if(event.currentTarget.hitTestObject(llama)) {
            currentHP -= 1;
            if(currentHP <= 0) //if the player died
            {
            currentHP = 0; //set his HP to zero, (just in case)
            vcam.gotoAndStop(2); //add any extra death-code here
            }
            updateHealthBar(); //update the healthBar   
            }
            });
            addChild(enemy_array[i]);
            enemy_array[i].addEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler_4);

function fl_EnterFrameHandler_4(event:Event):void
{
    if(event.currentTarget.hitTestObject(vcam)) {
        if(event.currentTarget.x < Math.floor(llama.x)) {
            event.currentTarget.x+=event.currentTarget.randomspeed;
        }else{
            event.currentTarget.x-=event.currentTarget.randomspeed;
        }
        if(event.currentTarget.y < Math.floor(llama.y)) {
            event.currentTarget.y+=event.currentTarget.randomspeed;
        }else{
            event.currentTarget.y-=event.currentTarget.randomspeed;
        }
    }
}
        }
/* Enter Frame Event
Executes the function fl_EnterFrameHandler_6 defined below each time the playhead moves into a new frame of the timeline.

Instructions:
1\. Add your custom code on a new line after the line that says "// Start your custom code" below.
The code will execute when the playhead moves into a new timeline frame.
*/

addEventListener(Event.ENTER_FRAME, basics);

function basics(event:Event):void {
    //Start your custom code
    // This example code displays the words "Entered frame" in the Output panel.
    if(llama.x > 3005.6) {
        llama.x = 3005.6;
    }
    if(llama.x < -2369) {
        llama.x = -2369;
    }
    if(llama.y > 0) {
    llama.y=0;
}
    vcam.x=llama.x;
    vcam.y=llama.y;
    vcam.coordinates.text="Llama's X is "+llama.x+".  And Llama's Y is "+llama.y;
    // End your custom code
}
/* Move with Keyboard Arrows
Allows the specified symbol instance to be moved with the keyboard arrows.

Instructions:
1\. To increase or decrease the amount of movement, replace the number 5 below with the number of pixels you want the symbol instance to move with each key press.
Note the number 5 appears four times in the code below.
*/

var upPressed:Boolean = false;
var downPressed:Boolean = false;
var leftPressed:Boolean = false;
var rightPressed:Boolean = false;

stage.addEventListener(Event.ENTER_FRAME, dothelistener);

function dothelistener(event:Event) {
if(vcam.currentFrame==2) {
    removeEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler_11);
    llama.removeEventListener(Event.ENTER_FRAME, fl_MoveInDirectionOfKey);
    stage.removeEventListener(KeyboardEvent.KEY_DOWN, fl_SetKeyPressed);
    stage.removeEventListener(KeyboardEvent.KEY_UP, fl_UnsetKeyPressed);
}
}

llama.addEventListener(Event.ENTER_FRAME, fl_MoveInDirectionOfKey);
stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_SetKeyPressed);
stage.addEventListener(KeyboardEvent.KEY_UP, fl_UnsetKeyPressed);

function fl_MoveInDirectionOfKey(event:Event)
{
    if (upPressed)
    {
        llama.y-=5;
    }
    if (downPressed)
    {
        llama.y+=5;
    }
    if (leftPressed)
    {
        llama.scaleX=-1;
        llama.x-=5;
    }
    if (rightPressed)
    {
        llama.scaleX=1;
        llama.x+=5;
    }
}

function fl_SetKeyPressed(event:KeyboardEvent):void
{
    switch (event.keyCode)
    {
        case Keyboard.UP:
        {
            upPressed = true;
            break;
        }
        case Keyboard.DOWN:
        {
            downPressed = true;
            break;
        }
        case Keyboard.LEFT:
        {
            leftPressed = true;
            break;
        }
        case Keyboard.RIGHT:
        {
            rightPressed = true;
            break;
        }
    }
}

function fl_UnsetKeyPressed(event:KeyboardEvent):void
{
    switch (event.keyCode)
    {
        case Keyboard.UP:
        {
            upPressed = false;
            break;
        }
        case Keyboard.DOWN:
        {
            downPressed = false;
            break;
        }
        case Keyboard.LEFT:
        {
            leftPressed = false;
            break;
        }
        case Keyboard.RIGHT:
        {
            rightPressed = false;
            break;
        }
    }
}
// Velocity of each llama

/* Mouse Click Event
Clicking on the specified symbol instance executes a function in which you can add your own custom code.

Instructions:
1\. Add your custom code on a new line after the line that says "// Start your custom code" below.
The code will execute when the symbol instance is clicked.
*/

vcam.magnify.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler_10);

function fl_MouseClickHandler_10(event:MouseEvent):void
{
    // Start your custom code
    // This example code displays the words "Mouse clicked" in the Output panel.
    vcam.width-=25;
    vcam.height-=20;
    // End your custom code
}

/* Mouse Click Event
Clicking on the specified symbol instance executes a function in which you can add your own custom code.

Instructions:
1\. Add your custom code on a new line after the line that says "// Start your custom code" below.
The code will execute when the symbol instance is clicked.
*/

vcam.magnifyun.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler_11);

function fl_MouseClickHandler_11(event:MouseEvent):void
{
    // Start your custom code
    // This example code displays the words "Mouse clicked" in the Output panel.
    vcam.width+=25;
    vcam.height+=20;
    // End your custom code
}
var bulletarray:Array = new Array;
/* Enter Frame Event
Executes the function fl_EnterFrameHandler_10 defined below each time the playhead moves into a new frame of the timeline.

Instructions:
1\. Add your custom code on a new line after the line that says "// Start your custom code" below.
The code will execute when the playhead moves into a new timeline frame.
*/

addEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler_10);

function fl_EnterFrameHandler_10(event:Event):void
{
    //Start your custom code
    // This example code displays the words "Entered frame" in the Output panel.
    if(vcam.currentFrame == 2) {
        llama.removeEventListener(Event.ENTER_FRAME,  llamaenterframe);
    }
    // End your custom code
}

/* Enter Frame Event
Executes the function fl_EnterFrameHandler_11 defined below each time the playhead moves into a new frame of the timeline.

Instructions:
1\. Add your custom code on a new line after the line that says "// Start your custom code" below.
The code will execute when the playhead moves into a new timeline frame.
*/

addEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler_11);

function fl_EnterFrameHandler_11(event:Event):void
{
    //Start your custom code
    // This example code displays the words "Entered frame" in the Output panel.
    vcam.count.text = bulletarray.length;
    // End your custom code
} 
```

我试过 if(parent) 但只有一些通过了命中测试（只有一些子弹移除，只有有时敌人的 hp 下降）敌人的 hp 是通过整数配置的（currentHP2） 任何帮助表示赞赏，谢谢。

[编辑]

在我做 if(bulletarray[j].parent) 之后，只有一些子弹起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:21:19.437

`removeChild(enemy_array[i]);`不起作用，因为您没有定义上下文，因此默认情况下使用当前对象，这可能是时间线。把它想象成`this.removeChild(enemy_array[i]);`，这是时间线。

修复它的最快方法是执行以下操作：

```
 (enemy_array[i] as MovieClip).parent.removeChild(enemy_array[i]); 
```

在哪里找到对象，将其作为影片剪辑读取，这样您就可以访问该`parent`对象，您可以在该对象上调用 remove。

# windows - parse() 后如何保留多字节字符

> ID：14369628
> 
> 赞同：7
> 
> 时间：2013-01-16T23:15:01.630
> 
> 标签：windows, r, parsing, encoding

当我在 Windows 下用非本地字符解析 R 代码时，这些字符似乎变成了它们的 Unicode 表示，例如

```
Encoding('ğ')
# [1] "UTF-8"
parse(text="'ğ'")
# expression('<U+011F>')
parse(text="'ğ'", encoding='UTF-8')
# expression('<U+011F>')
deparse(parse(text="'ğ'")[1])
# [1] "expression(\"<U+011F>\")"
eval(parse(text="'ğ'"))
# [1] "<U+011F>" 
```

由于我的语言环境是简体中文，我可以用中文字符解析代码而不会出现这样的问题，例如

```
parse(text="'你好'")
# expression('你好') 
```

我的问题是，我怎样才能保留像这个例子中的字母这样的字符`ğ`？或者至少在表达之后如何“重建”原始字符`deparse()`？

我的会话信息：

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Chinese (Simplified)_People's Republic of China.936 
[2] LC_CTYPE=Chinese (Simplified)_People's Republic of China.936   
[3] LC_MONETARY=Chinese (Simplified)_People's Republic of China.936
[4] LC_NUMERIC=C                                                   
[5] LC_TIME=Chinese (Simplified)_People's Republic of China.936    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:13:14.073

我很高兴看到更简单的表面，但这是一个开始。

```
eval.utags <- function(x) {
    op <- options("useFancyQuotes")
    on.exit(options(useFancyQuotes=op))
    options(useFancyQuotes=FALSE) # so dQuote/sQuote use ascii quotes

    # replace u-tag with u-escape, e.g., <U+12FF> --> \\u12FF
    with.uescapes <- gsub('<U\\+([[:xdigit:]]+)>', '\\\\u\\1', x)

    # find first quote char ('"' or "'"), if any
    # pick appropriate quote fun, dQuote or sQuote
    first.quote <- regmatches(with.uescapes, regexpr("\'|\"", with.uescapes))
    quote.fun <- if (identical(first.quote, "'")) dQuote else sQuote

    # parse/eval quoted characters 
    eval(parse(text=quote.fun(with.uescapes))) 
}
x <- '<U+011f><U+4f60><U+597d>abc'
y <- eval.utags(x)
y
# [1] "ğ你好abc"
Encoding(y)
# "UTF-8" 
```

### 编辑：

如果您的原始字符串可能具有要按原样保留的文字 unicode 标记子字符串，则在将其传递给 之前`parse`，具有等效 unicode 标记的`gsub`所有实例， .`"<U+"``"<U+003c><U+0055><U+002b>"`

```
x <- "'Щ<U+1234>'"
y <- eval(parse(text=gsub('<U\\+', '<U+003c><U+0055><U+002b>', x)))
# [1] "<U+0429><U+003c><U+0055><U+002b>1234>"
z <- eval.utags(y)
# [1] "Щ<U+1234>" 
```

当然，这并不是完全的证据。

这真是太可惜了，这必须如此骇人听闻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T22:55:49.020

问题的根源在于（引用[R 安装和管理手册](http://cran.r-project.org/doc/manuals/R-admin.html#Internationalization)）：“R 支持底层操作系统可以处理的所有字符集。这些是根据当前语言环境解释的”。不幸的是，Windows[没有支持 UTF-8 的语言环境](http://www.siao2.com/2007/01/03/1392379.aspx)。

现在，好消息是 Rgui[显然支持 UTF-8](https://svn.r-project.org/R/branches/R-2-15-branch/src/gnuwin32/CHANGES0)（向下滚动到 2.7.0 > 国际化）。但是，R 解析器仅适用于语言环境支持的字符。因此，一个对我有用的解决方案是暂时更改 R 语言环境，`Sys.setlocale()`只进行解析，然后在解析时使用`iconv()`转换为 UTF-8：

```
> Sys.getlocale()
[1] "LC_COLLATE=Greek_Greece.1253;LC_CTYPE=Greek_Greece.1253;LC_MONETARY=Greek_Greece.1253;LC_NUMERIC=C;LC_TIME=Greek_Greece.1253"
> orig.locale <- Sys.getlocale("LC_CTYPE")
> parse(text="'你好'")
expression('<U+4F60><U+597D>')
> Sys.setlocale(locale="Chinese")
[1] "LC_COLLATE=Chinese (Simplified)_People's Republic of China.936;LC_CTYPE=Chinese (Simplified)_People's Republic of China.936;LC_MONETARY=Chinese (Simplified)_People's Republic of China.936;LC_NUMERIC=C;LC_TIME=Chinese (Simplified)_People's Republic of China.936"
> a <- parse(text="'你好'")
> a
expression('你好')
> Sys.setlocale(locale="Turkish")
[1] "LC_COLLATE=Turkish_Turkey.1254;LC_CTYPE=Turkish_Turkey.1254;LC_MONETARY=Turkish_Turkey.1254;LC_NUMERIC=C;LC_TIME=Turkish_Turkey.1254"
> b <- parse(text="'ğ'")
> b
expression('ğ')
> Sys.setlocale(locale=orig.locale)
[1] "LC_COLLATE=Greek_Greece.1253;LC_CTYPE=Greek_Greece.1253;LC_MONETARY=Greek_Greece.1253;LC_NUMERIC=C;LC_TIME=Greek_Greece.1253"
> a
[1] expression('ΔγΊΓ')
> b
[1] expression('π')
> ai <- iconv(a, from="CP936", to="UTF-8")
> ai
[1] "你好"
> bi <- iconv(b, from="CP1254", to="UTF-8")
> bi
[1] "ğ" 
```

希望这可以帮助！

# mysql - Mysql查询1表同一列多次

> ID：14369630
> 
> 赞同：0
> 
> 时间：2013-01-16T23:15:13.223
> 
> 标签：mysql

我疯了，希望有人能帮助我......

我有一张桌子：

```
user_skils:
ID  | UID | SKILL
1     23    House
2     5    Disco
3     8    Punk
...  ...    ...
...  ...    ...
...  ...    ... 
```

现在我正在构建一个搜索查询，用户可以在其中搜索并过滤掉不符合条件的人：

示例搜索：迪斯科、朋克、豪斯

这意味着我只想要符合这 3 个条件的用户（有 House AND Disco AND PUNK）......我如何通过查询来管理这个？

就像是

```
SELECT count(uid) as matches , 
  GROUP_CONCAT(skill) as skills_grouped 
FROM user_skilks 
WHERE skill LIKE %Disco% 
  AND skill LIKE %punk% 
  AND skill LIKE %house% 
```

应该给我类似的东西：

```
Matches | skills_grouped
3         House,Punk,Disco 
```

这意味着有 3 人符合此条件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:26:35.900

对您的表进行分组`UID`，然后`HAVING`为感兴趣的组过滤结果组（即使用子句）：

```
SELECT   UID
FROM     user_skils
GROUP BY UID
HAVING   SUM(SKILL LIKE '%House%')
     AND SUM(SKILL LIKE '%Disco%')
     AND SUM(SKILL LIKE '%Punk%' ) 
```

这在 MySQL 中有效，因为它没有真正的布尔类型。在其他 RDBMS 中，您必须使用`CASE`表达式：

```
HAVING   SUM(CASE WHEN SKILL LIKE '%House%' THEN 1 ELSE 0 END) > 0
     AND ... 
```

要获取此类用户的数量，请再次对结果进行分组：

```
SELECT COUNT(*) FROM (
  SELECT   1
  FROM     user_skils
  GROUP BY UID
  HAVING   SUM(SKILL LIKE '%House%')
       AND SUM(SKILL LIKE '%Disco%')
       AND SUM(SKILL LIKE '%Punk%' )
) t 
```

# c# - 如何使用 c# 从当前的 Outlook 电子邮件中获取嵌入图像？

> ID：14369631
> 
> 赞同：0
> 
> 时间：2013-01-16T23:15:24.433
> 
> 标签：c#, outlook-addin, outlook-2010

我正在 Visual Studio 2010 中使用 c#.net 开发 Outlook 2010 插件。

我想将当前电子邮件（未附加）中的图像嵌入到我的表单区域中。

如何从 Outlook 电子邮件中获取嵌入图像？

我试图从谷歌中找出答案，但他们都展示了如何在电子邮件中嵌入图像。但我想从 Outlook 电子邮件中获取嵌入式图像。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:12:14.587

您应该能够使用：`Microsoft.Office.Interop.Outlook`。这是[Namespace](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.aspx)中的一个巨大的项目列表。您可能必须将其视为附件；将其保存到另一个文件夹。然后递归地从那里提取数据。

```
private void ThisApplication_Startup(object sender, System.EventArgs e)
{
    this.NewMail += new Microsoft.Office.Interop.Outlook
        .ApplicationEvents_11_NewMailEventHandler(ThisApplication_NewMail);
}

private void ThisApplication_NewMail()
{
    Outlook.MAPIFolder inBox = this.ActiveExplorer()
        .Session.GetDefaultFolder(Outlook
        .OlDefaultFolders.olFolderInbox);
    Outlook.Items inBoxItems = inBox.Items;
    Outlook.MailItem newEmail = null;
    inBoxItems = inBoxItems.Restrict("[Unread] = true");
    try
    {
        foreach (object collectionItem in inBoxItems)
        {
            newEmail = collectionItem as Outlook.MailItem;
            if (newEmail != null)
            {
                if (newEmail.Attachments.Count > 0)
                {
                    for (int i = 1; i <= newEmail
                       .Attachments.Count; i++)
                    {
                        newEmail.Attachments[i].SaveAsFile
                            (@"C:\TestFileSave\" +
                            newEmail.Attachments[i].FileName);
                    }
                }
            }
        }
    }
    catch (Exception ex)
    {
        string errorInfo = (string)ex.Message
            .Substring(0, 11);
        if (errorInfo == "Cannot save")
        {
            MessageBox.Show(@"Create Folder C:\TestFileSave");
        }
    }
} 
```

这会将嵌入或附加的项目保存到您选择的目录中；然后你可以简单地操作那些你选择的附加项目。希望至少可以为您指明写作方向。

# c++ - Qt 中的音频回调

> ID：14369638
> 
> 赞同：1
> 
> 时间：2013-01-16T23:16:14.607
> 
> 标签：c++, qt, audio, callback

我正在实现一个音频合成器。我有一个 AudioCallback 函数，它在需要 Audiodata 时被调用（由 Soundcarddriver ！？）。现在我想在 Qt 中创建一个 GUI。但这不起作用，因为回调函数会干扰 GUI（我认为这是问题所在）。

我的问题：

1) 如何在 Qt 中实现回调函数？2）对音频和gui使用不同的线程是否合理？还是有一个更简单的解决方案？

谢谢 ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:32:16.587

如果您打算以低延迟处理音频 - 这是实时使用的任何软合成器的绝对要求 - 必须使用单独的线程进行音频渲染，此外，您希望它具有实时调度优先级。您当然不想将其提供给您的 UI 代码。

音频需要频繁维护 - 可能每毫秒一次。UI 线程忙于其他职责，在调度 UI 事件时它无法处理音频。系统可实现的延迟受用于填充音频缓冲区的最长调度延迟的限制。这在 UI 线程上可能是无限的。

我不清楚您使用哪个库来访问音频 IO - 或者实际上是在哪个平台上。`QAudioOutput`QtMultimedia 提供的似乎不是你想要的。

音频渲染回调很可能在与 Qt 的交互很少的情况下发生。您当然不想将渲染请求发布到 UI 线程上——这似乎是 QT 开发的自然范例。

根据您平台的音频库的设置方式：

1.  您创建一个实时线程并阻塞，直到缓冲区需要填充（Linux/Alsa）；或者，
2.  音频库为您执行此操作并给您回电（MacOSX 和 iOS/CoreAudio）

在您的渲染线程中，除了生成数据以填充输出缓冲区之外，do 不应执行任何操作，并且您不执行任何可能阻塞的操作。

稍微有点毛茸茸的地方是线程安全将音符数据放入渲染循环。为了避免在访问事件队列时优先级反转，这通常实现为无锁 FIFO。如果您打算从渲染线程中触发 UI 更新，则需要将这些更新发布到 UI 循环中。Qt 的信号和槽是一个很好的选择。

如果您项目的真正目的是开发一个软合成器，您最好开发一个[VST](http://www.steinberg.net/en/products/vst.html)插件。有很多开源 VST 主机可以解决线程问题。

您还可以考虑查看[Juce](http://rawmaterialsoftware.com/juce.php) - 它为 VST 主机和插件提供源代码。

# html - 页面宽度太宽了...找不到导致它的 css

> ID：14369639
> 
> 赞同：-6
> 
> 时间：2013-01-16T23:16:18.343
> 
> 标签：html, css, wordpress

我在[http://www.uniqueamb.biz/bl](http://www.uniqueamb.biz/bl)有一个 wordpress 网站，页面宽度很宽。我似乎找不到有问题的代码...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T23:18:22.173

`.header { width: 1100%; }`错字

# asp.net-mvc - Umbraco 4.11.3 - 控制器类型的当前请求不明确

> ID：14369640
> 
> 赞同：5
> 
> 时间：2013-01-16T23:16:18.700
> 
> 标签：asp.net-mvc, umbraco

我有一个全新安装的 umbraco 4.11.3 我正在尝试使用 进行简单的控制器测试，但对我来说出了点问题。我创建了一个没有匹配模板的文档类型“演示”。然后基于该文档类型的名为“Demo”的内容项并更改此配置设置（defaultRenderingEngine --> MVC）我使用以下代码添加了一个新控制器。

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Web;
 using System.Web.Mvc;
 using Umbraco.Web.Models;

 namespace FrontEnd.Controllers
 {
    public class DemoController : Umbraco.Web.Mvc.RenderMvcController
   {
    //
    // GET: /Demo/

    public ActionResult Index(RenderModel model)
    {
        return base.Index(model);
    }
    public ActionResult Demo(RenderModel model)
    {
        return View(model);
    }
}
} 
```

我收到此错误：

```
The current request for action 'Index' on controller type 'DemoController' is ambiguous between the following action methods:
System.Web.Mvc.ActionResult Index(Umbraco.Web.Models.RenderModel) on type FrontEnd.Controllers.DemoController
System.Web.Mvc.ActionResult Index(Umbraco.Web.Models.RenderModel) on type Umbraco.Web.Mvc.RenderMvcController

Exception Details: System.Reflection.AmbiguousMatchException: The current request for action 'Index' on controller type 'DemoController'    
is ambiguous between the following action methods:
System.Web.Mvc.ActionResult Index(Umbraco.Web.Models.RenderModel) on type FrontEnd.Controllers.DemoController
System.Web.Mvc.ActionResult Index(Umbraco.Web.Models.RenderModel) on type Umbraco.Web.Mvc.RenderMvcController 
```

关于在这里做什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T01:15:26.893

忘记提供覆盖，

```
 public override ActionResult Index(RenderModel model)
    {
        return base.Index(model);
    } 
```

# skype - 有没有办法使用 pulseaudio 将 Skype 扬声器和振铃定向到不同的设备？

> ID：14369642
> 
> 赞同：1
> 
> 时间：2013-01-16T23:16:33.330
> 
> 标签：skype, pulseaudio

我刚刚从 CentOS 5.5 升级到 6.3，它使用 pulseaudio 来播放声音。

使用 CentOS 5.5 时，每个声音选项都会显示我所有的声音设备，因此我可以选择我的桌面扬声器作为振铃和耳机作为扬声器（他们在对话期间收听的术语）。

在 CentOS 6.3 下，声音选项仅显示 Pulseaudio，因此所有选项（扬声器、麦克风、振铃）都设置为耳机。结果，由于我不是一直戴着耳机，所以我听不到铃声。

有没有办法在 CentOS 6.3 下配置 Skype，以便我可以让 Ringing 转到桌面扬声器和扬声器（在对话期间收听）转到耳机？

谢谢，-W。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:20:19.283

最新版本的 Skype 以不同的方式标记振铃和呼叫流，因此 PulseAudio 可以区分两者。流可以采用“media.role”属性。振铃音标有“事件”角色，呼叫流标有“电话”角色。

PulseAudio 会尝试自动检测您所拥有的硬件的用途。它不能用内置卡做很多事情，但是像 USB 和蓝牙耳机这样的东西得到了“电话”的“预期角色”。因此，具有“电话”角色的流被路由到此类设备。

这意味着如果您的耳机具有“电话”预期角色（在“pactl list sinks”的输出中查找 device.intended_roles），那么您的呼叫流将自动使用该设备。

如果没有，您可以为此使用另一个 PulseAudio 行为。在通话期间，将通话流移动到您想要的设备（播放流和捕获流）。您将需要 pavucontrol 应用程序来执行此操作（也可以在命令行上完成）。移动它们后，如果设备可用，则默认情况下*所有*电话流都将路由到该设备（PulseAudio 会尝试记住您在移动流时做出的这些显式路由决定）。

希望这可以帮助。

# java - ISODateTimeFormat 中的 dateTimeNoMillis() 格式化程序

> ID：14369653
> 
> 赞同：0
> 
> 时间：2013-01-16T23:17:43.583
> 
> 标签：java, datetime, jodatime

我需要验证一个字符串是否采用 ISODateTimeFormat.dateTimeNoMillis() 格式。

```
final DateTimeFormatter dateHourMinuteSecondFormatter =ISODateTimeFormat.dateTimeNoMillis();
String s = "2012-W12-12";
try {
        dateHourMinuteSecondFormatter.parseDateTime(s);
    } catch (IllegalArgumentException e) {
        e.setMessage("exception thrown);
    } 
```

它应该抛出异常，因为日期格式错误，但事实并非如此。还有什么我需要补充的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:22:28.333

不，您无需再做任何事情。

我怀疑它实际上*是在*抛出示例，但是您的消息诊断不正确。这对我来说肯定失败了，使用 Joda Time 2.1：

```
import org.joda.time.*;
import org.joda.time.format.*;

public class Test {

    public static void main(String[] args) throws Exception {
        DateTimeFormatter formatter = ISODateTimeFormat.dateTimeNoMillis();
        String s = "2012-W12-12";
        try {
            DateTime dt = formatter.parseDateTime(s);
            System.out.println(dt);
        } catch (IllegalArgumentException e) {
            System.out.println(e);
        }
    }
} 
```

输出：

```
java.lang.IllegalArgumentException: Invalid format: "2012-W12-12" is malformed
at "W12-12" 
```

# c - WSAStringToAddress 错误 10022 / 从控制台参数读取 IPv6

> ID：14369658
> 
> 赞同：0
> 
> 时间：2013-01-16T23:17:59.707
> 
> 标签：c, windows, sockets, client-server, winsock2

当我尝试连接到我的服务器时，我的客户端在函数 WSAStringToAddress 期间失败并出现错误 10022，我认为问题在于我尝试从控制台参数获取 IPv6 地址。我的本地主机地址的控制台参数的格式是 ::1。

这是失败的功能：

```
WSAStringToAddress((LPWSTR)argv[1], AF_INET6, NULL, (SOCKADDR *)&server, &len) 
```

这里是 server 和 len 变量的代码：

```
struct sockaddr_in6 server;
int len = sizeof(server);
memset( &server, 0, sizeof (server));
server.sin6_family = AF_INET6;
server.sin6_port = htons(PORT); 
```

是的，我希望有人看到我犯的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:33:48.770

[错误 10022](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681391%28v=vs.85%29.aspx)是`WSAEINVAL`，这意味着您传递了无效的参数。这种情况下的问题是，在编译 Unicode 程序时，`WSAStringToAddress`需要一个**宽字符 string**，并且您将一个窄字符串转换为宽字符串。您在插入强制转换之前遇到的编译器错误应该已经引发了一个危险信号。

你有几个选择：

*   将您的应用程序更改为非 Unicode（**不推荐**）
*   将您的`main`函数更改为[`wmain`](http://msdn.microsoft.com/en-us/library/bky3b5dh%28v=vs.80%29.aspx)，它采用宽字符参数字符串
*   `WSAStringToAddressA`通过调用而不是显式使用窄 (ANSI) 版本`WSAStringToAddress`
*   使用将字符串从窄转换为宽[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)

在这种特殊情况下，我建议明确使用该`WSAStringToAddressA`函数，因为使用宽字符版本不会为该函数提供任何额外优势。

# html - 为什么会这样 示例在某些浏览器上失败？

> ID：14369660
> 
> 赞同：1
> 
> 时间：2013-01-16T23:18:07.493
> 
> 标签：html

为什么这个例子[http://chrisjj.drivehq.com/test.htm](http://chrisjj.drivehq.com/test.htm)

```
<audio controls>
  <source src="horse.ogg" type="audio/ogg">
  <source src="horse.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio> 
```

（来自[http://www.w3schools.com/html/html5_audio.asp](http://www.w3schools.com/html/html5_audio.asp)）在 Firefox 16 和 IE9 上失败？

它在 Chrome V24 上成功。

更新：

```
<!doctype html>  
<audio controls>
  <source src="horse.ogg" type="application/x-msdownload">
  <source src="horse.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio> 
```

适用于 IE9，但（尽管[http://web-sniffer.net/](http://web-sniffer.net/)显示“Content-Type: application/x-msdownload”）不适用于 FF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:31:49.757

在 Firefox 中，因为`content-type`服务器的 HTTP 响应的标`horse.ogg`头`application/x-msdownload`不是`audio/ogg`.

在 IE9 中，因为页面不是带有 、 和 元素的格式良好`DOCTYPE`的`<html>`HTML文档`<head>`。`<body>`不是正确的 HTML 文档会触发怪癖模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:24:16.757

看看[这个网站](http://msdn.microsoft.com/en-us/library/ie/gg589529%28v=vs.85%29.aspx)。

如果 IE 9 不接受您应提供的所有内容，您可能必须强制它接受 HTML5 doctype 及其相应的功能，并且从您的页面外观来看，您缺少一个 doctype，这意味着您没有甚至还没有这样做。

# c# - WinForms WebBrowser 控件和图片相对路径错误

> ID：14369669
> 
> 赞同：2
> 
> 时间：2013-01-16T23:19:03.837
> 
> 标签：c#, winforms

我正在使用[Winform 文本框](http://winformhtmltextbox.codeplex.com/)来编辑 HTML 片段，并且该项目使用 Winforms WebBrowser 控件。例如，如果我的 HTML`img`标签的`src`属性使用相对路径`src="../cat_images/VOD/VOD_logo_small_2.jpg"`，它将变成`src="about:../cat_images/VOD/VOD_logo_small_2.jpg"`

我该如何摆脱`about:`？

我应该只写一个方法来过滤掉`about:`，还是 WebBrowser 控件中有一个设置可以用来禁用它？WebBrowser 控件还添加了一个额外的回车符和换行符。有没有办法禁用它？

```
this.htmDisplay.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.chemicalMasterBindingSource, "CatalogDesc", true));
        this.htmDisplay.Fonts = new string[] {
    "Corbel",
    "Corbel, Verdana, Arial, Helvetica, sans-serif",
    "Georgia, Times New Roman, Times, serif",
    "Consolas, Courier New, Courier, monospace"};
        this.htmDisplay.IllegalPatterns = new string[] {
    "<script.*?>",
    "<\\w+\\s+.*?(j|java|vb|ecma)script:.*?>",
    "<\\w+(\\s+|\\s+.*?\\s+)on\\w+\\s*=.+?>",
    "</?input.*?>"};
        this.htmDisplay.Location = new System.Drawing.Point(92, 126);
        this.htmDisplay.Name = "htmDisplay";
        this.htmDisplay.Padding = new System.Windows.Forms.Padding(1);
        this.htmDisplay.ShowHtmlSource = true;
        this.htmDisplay.Size = new System.Drawing.Size(516, 245);
        this.htmDisplay.TabIndex = 149;
        this.htmDisplay.ToolbarStyle = GvS.Controls.ToolbarStyles.AlwaysInternal; 
```

# php - Mysql query update multiple columns error

> ID：14369671
> 
> 赞同：-1
> 
> 时间：2013-01-16T23:19:21.877
> 
> 标签：php, mysql, sql-update

I'm trying to upload multiple columns at once with this code:

```
 function updateMultiple($idElement,$arrayFieldValues=""){

        $toSave=$arrayFieldValues?$arrayFieldValues:$_POST;

        foreach($toSave as $field => $value) {
                    if (strpos($field, 'save_') === 0) {
                        $field = str_replace('save_', '', $field);
                        $updateString .= $field."='".addslashes($value)."', ";
                    }
                }
        $updateString = substr_replace($updateString ,"",-2);

       $query="UPDATE ".$this->tab."
            SET ".$updateString.", lastUser='".$usrId."'
            WHERE ".$colName." = '".$idElement."'";
            $this->execute($query);
   } 
```

However I get this error:

```
PDOStatement::execute() [pdostatement.execute]: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET Country='England', FirstName='John', LastName='Smith', lastUser='10' ' at line 2 
```

But to me it all seems right!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:28:39.527

Following from Tim's answer, you should be using `Prepared Statements`. Look at the [documentation](http://php.net/manual/en/pdo.prepared-statements.php) for examples and further documentation. In summary, instead of `$query="UPDATE ".$this->tab." SET ".$updateString.", lastUser='".$usrId."' WHERE ".$colName." = '".$idElement."'";` use:

```
$query = 'UPDATE '.$this->tab.' SET lastUser = :user WHERE '.$colName.' = :colvalue'; 
$pdo->execute(array(:user => $usrId, :colvalue => $idElement)); 
```

You may further want to use transactions, but that's an exercise left to the reader.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:21:06.690

~~You're missing a . between UPDATE and SET. Hmm, maybe. In any case, the SQL being sent to PDO is incorrect. It's missing the UPDATE keyword.~~ Check the comment.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:28:15.893

you need to provide a value for each column in your sql statement. try this code:

```
$query="UPDATE ".$this->tab." SET ".$updateString."='yourString' , lastUser='".$usrId."'
        WHERE ".$colName." = '".$idElement."'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-10T13:36:41.053

try this

```
$query="UPDATE news SET title='$title', date='$date', body='$body' WHERE newsID=$ID 
```

# javascript - 将值传递给显示函数 javascript

> ID：14369672
> 
> 赞同：1
> 
> 时间：2013-01-16T23:19:29.440
> 
> 标签：javascript, object, parameters

我需要帮助弄清楚如何将“div”的值传递给我正在处理的显示函数。这是我的代码。

//上面我有一个构造函数，我声明了“newbox”，我也得到了我的盒子的值 //在页面上显示盒子并获取它们的值工作正常

```
 function addBox(newbox) {  
   for (var i = 0; i < newbox.number; i++) {                                 
   var scene = document.getElementById("scene");              
   var div = document.createElement("div");                   
   div.className += " " + "box"; 
   div.innerHTML += newbox.name; 
   div.style.backgroundColor = newbox.color;  
   var x = Math.floor(Math.random() * (scene.offsetWidth-101));
   var y = Math.floor(Math.random() * (scene.offsetHeight-101));
   div.style.left = x + "px";
   div.style.top = y + "px"; 
   scene.appendChild(div); 
   div.onclick = display;                          
   //console.log("added"); 
    } 
   return div;                 
  } 
```

//函数使字符串传递给下一个函数

```
 function makeString(name,color) {
  var aString = "name" + "color";
  return aString;
  } 
```

//显示功能，当单击框时应显示警报。

```
 function display(e) {
  var a = e.target;
  var string = makeString(a.name, a.color);
  a.onclick = alert(string);
  } 
```

到目前为止，当我单击一个框时，我得到了字符串“namecolor”。我想通过执行“a.name”和“a.color”我可以从我点击的目标中获取这些值，但这显然不起作用。还尝试将 div 直接传递给 display() 函数，但我没有弄清楚如何正确地做到这一点。我是初学者，所以这可能非常明显，但感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:32:56.370

### 添加框

这种方法没有意义，因为您在 for 循环中循环以创建一定数量的 div，但是您只返回一个？

```
function addBox(newbox) {
  var i, div, scene = document.getElementById("scene");
  for (i = 0; i < newbox.number; i++) {
    div = document.createElement("div");
    scene.appendChild(div);
    div.onclick = display;
  }
  return div;
} 
```

像这样更有意义：

```
function addBox() {
  var i, div, scene = document.getElementById("scene");
  div = document.createElement("div");
  scene.appendChild(div);
  div.onclick = display;
  return div;
} 
```

### 制作字符串

正如其他人所说，不要将您的 vars 用引号括起来，因为这意味着它们被视为字符串，而不是变量。

```
function makeString(name,color) {
  var aString = "" + name + color;
  return aString;
} 
```

### 展示

如果您希望保持`string`可用的值，您必须为事件处理程序分配一个匿名函数，以便它可以被警告`onclick`。只分配 alert 方法的结果将意味着警报将立即发生，而不是等待点击。

```
a.onclick = alert(string); 
```

但是，这个`display`方法还是有点混乱，因为`display`是在点击 div 的时候触发的。然后，您将分配另一个`onclick`处理程序，该处理程序只会在下次单击 div 时触发。

```
function display(e) {
  var a = e.target;
  var string = makeString(a.name, a.color);
  a.onclick = function(){
    alert(string);
  }
} 
```

更有意义的是：

```
function display(e) {
  var a = e.target;
  var string = makeString(a.name, a.color);
  alert(string);
} 
```

### 名称和颜色

您的代码也没有提到 div 元素的位置`name`和`color`设置？您是指文本的颜色、背景的颜色还是其他任意值？`name`你的意思是还是`.nodeName`其他类似元素的`.name`属性？

如果你想在 div 上使用任意属性，你可以使用`setAttribute`，所以在你创建它之后，分配你想要的值：

```
div = document.createElement("div");
div.setAttribute('name', 'this_is_my_name');
div.setAttribute('color', 'midnight blue'); 
```

然后使用检索它们`getAttribute`：

```
var string = makeString(a.getAttribute('name'), a.getAttribute('color')); 
```

或者正如其他人所说，如果您希望获得 div 使用的当前文本颜色，`.currentStyle.color`并且`.getComputedStyle`- 然而更容易的是在 div 上专门定义颜色，`.style.color`这样更容易以跨浏览器的方式回读。

```
div = document.createElement("div");
div.style.color = 'red'; 
```

然后回读：

```
alert( div.style.color ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:21:20.720

您的代码中有几个问题。

首先，改变这个：

```
var string = makeString(a.name, a.color); 
```

对此：

```
var string = makeString(a.innerHTML, a.currentStyle['color']); 
```

然后，改变这个：

```
var aString = "name" + "color"; 
```

对此：

```
var aString = name + color; 
```

这将为您提供 DIV 的内容和 DIV 上的当前颜色 CSS 属性。你的问题有点不清楚你想要显示什么。如果您可以澄清要从 DIV 显示的内容或使用 HTML 更新您的问题，我可以相应地调整我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:22:25.450

更改`var aString = "name+"color"`为`var aString = name+color`不带引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T23:23:20.290

尝试

```
function makeString(name,color) {
    var aString = name+""+color;
    return aString;
} 
```

# c++ - 将双精度舍入到小数点后 3 点

> ID：14369673
> 
> 赞同：25
> 
> 时间：2013-01-16T23:19:34.117
> 
> 标签：c++, rounding

目前，我可以`double`使用以下方法将 a 舍入到输出流：

```
output.setf(std::ios::fixed,std::ios::floatfield);
output.precision(3); 
```

但是我得到了一个`double`，我需要在将其插入向量之前进行转换。例如，如果`-0.00078`出现数字，那么它等于`0.000`，我不需要保存它。另一方面，`1.0009`将成为`1.001`（与精度函数处理它相同）。

如何在 C++ 中转换这样的双精度数？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-16T23:25:14.840

一个常见的技巧是用数学来做：

```
value = round( value * 1000.0 ) / 1000.0; 
```

哪里`round`可以正确处理负值和正值......这样的事情（未经测试）：

```
inline double round( double val )
{
    if( val < 0 ) return ceil(val - 0.5);
    return floor(val + 0.5);
} 
```

由于浮点精度问题，您仍然希望在输出期间将小数位设置为 3。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-01T16:48:07.587

我知道这是一篇非常古老的帖子，但我一直在寻找解决同一问题的方法。但是，我不想为它创建一个特殊的函数，所以我想出了以下内容：

```
#include <sstream>
#include <iomanip>
...
...
...
double val = 3.14159;
stringstream tmp;
tmp << setprecision(3) << fixed << val;
double new_val = stod(tmp.str());   // new_val = 3.143
tmp.str(string());                  // clear tmp for future use 
```

不确定这是否是最好的方法，但它对我有用！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-16T23:29:07.873

这里的其他答案给了你一种技巧。但重要的是要提到并非所有值都可以用浮点数精确表示。1.001 就是一个很好的例子；最接近的可能值为 1.00099999999999988987。

因此，如果您的目标是严格保留 3 位小数，那么答案是：这是不可能的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-16T23:25:02.890

您可以将其乘以 1000，然后对其进行舍入（或截断）；这将为您提供 3 位小数位值的 1000 倍的值。请注意，如果您将其除以 1000 以获得“四舍五入”值，您最终可能会得到多于 3 位小数（由于舍入错误）。

# django - Django、Google App Engine、数据存储、用户登录

> ID：14369682
> 
> 赞同：0
> 
> 时间：2013-01-16T23:20:11.363
> 
> 标签：django, google-app-engine, django-models, django-users

我正在尝试在 django 中设置一个 Web 应用程序并在 GAE 上部署，我已经设置了 GAE、social-auth (django-social-auth)，现在我正在尝试添加 userena，以处理用户登录；但是，它不能在 GAE 上部署，因为 userena 不允许 models.OneToOneField 在数据存储中创建用户模型。我正在寻找一个不会对我造成此问题的 django-login 包，或者如果您有任何建议可以为我解决此问题。我正在使用[http://docs.django-userena.org/en/latest/installation.html#required-settings](http://docs.django-userena.org/en/latest/installation.html#required-settings)，这是我的错误。

`File "/git/ePapyri/epapyri-django/djangoappengine/db/base.py", line 160, in _value_for_db raise DatabaseError("Only strings and positive integers " django.db.utils.DatabaseError: Only strings and positive integers may be used as keys on GAE.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:57:29.037

我将数据存储更改为 google Cloud SQL 服务。我正在关注本教程 howto.pui.ch/post/39245389801/... 之后一切正常。主要问题是 django-nonrel 不支持 OneToOneField。所以我最终改变了设置。

# c# - IronRuby 有真正的文档吗？

> ID：14369685
> 
> 赞同：2
> 
> 时间：2013-01-16T23:20:38.683
> 
> 标签：c#, .net, ironruby

IronRuby 有真正的文档吗？因为老实说我没有找到任何东西，甚至直接在 IronRuby 网站上。他们的文档页面重定向到官方 Ruby 网站，该网站没有提供任何关于 IronRuby 和 .Net 的信息。

因此，从技术上讲，当我使用 IronRuby 在 ac# 文件中键入以下代码时：

```
var engine = Ruby.CreateEngine(); 
```

我想更多地了解我可以从那个新引擎对象访问的方法。Intellisense 给了我关于方法和属性的提示：

CreateObjRef() CreateOperations() Execute() GetScope() 运行时设置

等等。

但是，以类似于 MSDN 的方式查看关于它们的更好的解释和示例将非常有帮助。

提前感谢您的宝贵见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:16:33.777

有关 Ironruby 的文档，我真的可以推荐[http://www.amazon.com/IronRuby-Unleashed-Shay-Friedman/dp/067233078](http://www.amazon.com/IronRuby-Unleashed-Shay-Friedman/dp/067233078)。您可以大致了解 Ruby，它处理 Ironruby 特定项目，例如如何与 .Net 框架交互。

当然，您也可以前往第 9 频道并查找有关 Iron 语言的演示文稿。过去曾在 Mix an PDC 上进行过演示。那是在微软停止开发并将项目移交给社区之前。

查看[http://blog.jimmy.schementi.com/2010/03/mix10-ironruby-and-ironpython-part-1.html](http://blog.jimmy.schementi.com/2010/03/mix10-ironruby-and-ironpython-part-1.html)了解一些演示文稿的概述。

希望这个对你有帮助。

# python - 如何在 Python 中快速加载大型数据集？

> ID：14369696
> 
> 赞同：3
> 
> 时间：2013-01-16T23:21:31.080
> 
> 标签：python, performance, data-mining, pdb, large-data

我做数据挖掘研究，经常有 Python 脚本从 SQLite 数据库、CSV 文件、pickle 文件等加载大型数据集。在开发过程中，我的脚本经常需要更改，我发现自己等待 20 到 30 秒等待数据装载。

加载数据流（例如从 SQLite 数据库）有时可行，但并非在所有情况下都有效——如果我需要经常返回数据集，我宁愿支付加载数据的前期时间成本。

到目前为止，我最好的解决方案是对数据进行二次采样，直到我对最终脚本感到满意为止。有没有人有更好的解决方案/设计实践？

我的“理想”解决方案将涉及巧妙地使用 Python 调试器 (pdb)，以便数据保持加载在内存中，我可以编辑我的脚本，然后从给定点恢复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:34:06.020

一种方法是将加载和操作脚本保存在单独的文件 X 和 Y 中，并已`X.py`阅读

```
import Y
data = Y.load()
.... your code .... 
```

编写代码时`X.py`，您可以从文件中省略这部分并在交互式 shell 中手动运行它。然后您可以修改`X.py`并`import X`在 shell 中执行以测试您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:35:24.713

编写一个脚本来执行选择、对象关系转换，然后将数据腌制到本地文件。您的开发脚本将首先解开数据并继续。

如果数据明显小于物理 RAM，则可以内存映射两个进程之间共享的文件，并将腌制数据写入内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T10:52:47.523

Jupyter notebook 允许您将大型数据集加载到内存驻留数据结构中，例如一个单元格中的 Pandas 数据帧。然后，您可以在后续单元格中对该数据结构进行操作，而无需重新加载数据。

# jsf - jsf commandButton在值中使用标签

> ID：14369698
> 
> 赞同：3
> 
> 时间：2013-01-16T23:21:31.563
> 
> 标签：jsf, icons, commandbutton

不确定是否可能，但我的大部分学校项目都在使用引导程序。我通常在管理面板中使用的一个设计属性是使用图标（编辑 = 铅笔，删除 = 十字，添加 = 加号，...）。

因此，为了呈现这些简单的按钮，我使用以下代码：

```
<a href="#" class="btn"><i class="icon-pencil"></i></a> 
```

在与 JSF 一起使用时，我尝试使用：

```
<h:commandButton value="<i class='icon-delete icon-white'></i>" class="btn-danger" action="#{horseController.delete(item.id)}" /> 
```

但似乎不允许使用此错误消息中所述的“<”：

> 错误解析/admin/horses.xhtml：错误跟踪[行：27]与元素类型“null”关联的属性“value”的值不能包含“<”字符。

所以我的问题是：如何在命令按钮中使用标签，在这种情况下使用图标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T00:36:15.220

这`<h:commandButton>`是用于目的的错误标签。`<input type="submit">`当您需要HTML 元素时，它会生成一个HTML`<a>`元素。你需要一个`<h:commandLink>`代替。

```
<h:commandLink class="btn-danger" action="#{horseController.delete(item.id)}">
    <i class="icon-delete icon-white" />
</h:commandLink> 
```

# c++ - 跳空不配合灵气

> ID：14369704
> 
> 赞同：1
> 
> 时间：2013-01-16T23:21:52.727
> 
> 标签：c++, boost, boost-spirit

我有以下代码（floatDecs 和 intDecs 是符号解析器）：

```
// Definition of the value parser:
typedef boost::variant<double,int64_t> value_type;
typedef boost::fusion::vector<std::string, value_type> dec_type;
rule<std::string::const_iterator, boost::variant<double,int64_t>(std::string)> value;
value   =   real_parser<double, strict_real_policies<double>>() [ boost::phoenix::bind(boost::lambda::unlambda(floatDecs.add), _r1, _1) ] |
            int_parser<int64_t, 10>()                           [ boost::phoenix::bind(boost::lambda::unlambda(intDecs.add), _r1, _1)   ];

rule<std::string::const_iterator, std::string()> ident;
ident %= lexeme[ alpha >> *alnum ];

rule<std::string::const_iterator, dec_type(), boost::spirit::qi::locals<std::string>, space_type> dec;
ident %= ident [_a = _1] >> lit('=') >> value(_a);

boost::spirit::qi::phrase_parse(testing.cbegin(), testing.cend(), dec, space); 
```

问题：只有当我在每个规则中删除 space_type 并将最后一行替换为

```
boost::spirit::qi::parse(testing.cbegin(), testing.cend(), dec); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:05:30.243

我不清楚你在问什么问题。无论如何，这里有一个版本修复了您发布的代码的一些问题，并显示解析可以与船长一起工作：

**[在http://liveworkspace.org/code/6GVK4$0](http://liveworkspace.org/code/6GVK4%240)**上现场观看

输出

```
phrase_parse: true
allo1 = 213.13f 
```

代码

```
#include <boost/fusion/adapted.hpp>
#include <boost/optional.hpp>
#include <boost/variant.hpp>
#include <boost/lambda/lambda.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;
namespace phx   = boost::phoenix;

int main()
{
    typedef std::string::const_iterator It;
    typedef boost::variant<double,int64_t> value_type;
    typedef std::pair<std::string, value_type> dec_type;

    qi::rule<It, value_type(std::string)> value = 
        qi::real_parser<double, qi::strict_real_policies<double>>() /*[ phx::bind(boost::lambda::unlambda(floatDecs.add), qi::_r1, qi::_1) ]*/ |
        qi::int_parser<int64_t, 10>()                               /*[ phx::bind(boost::lambda::unlambda(intDecs.add), qi::_r1, qi::_1)   ]*/;

    qi::rule<It, std::string()> ident = qi::lexeme[ qi::alpha >> *qi::alnum ];

    qi::rule<It, dec_type(), qi::space_type, qi::locals<std::string> > declaration;
    declaration %= ident [qi::_a = qi::_1] >> '=' >> value(qi::_a);

    std::string testing("allo1 = 213.13");
    dec_type parsed;
    bool ok = qi::phrase_parse(testing.cbegin(), testing.cend(), declaration, qi::space, parsed);
    std::cout << "phrase_parse: " << std::boolalpha << ok << "\n";

    using namespace karma;
    std::cout << format(auto_ << " = " << (double_ << 'f' | int_) << eol, parsed);
} 
```

# linux - 将串行端口重定向到文件但一次只有 1（最后）行的最简单方法？

> ID：14369709
> 
> 赞同：0
> 
> 时间：2013-01-16T23:22:23.863
> 
> 标签：linux, networking, serial-port

我有一个数字秤，可以通过 RS232 输出当前重量。（连续，1 行）（例如：“10.13 kg\n”）

我想使用 Raspberry Pi 通过网络访问该值。所以只是一个简单的 html 文件应该保存串行输出的最后一个值/行。

```
cat /dev/ttyS0 > scale_value.html 
```

会让文件越来越大。

有没有 Linux 大师可以告诉我如何以“简单轻量”的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:46:33.687

这条线应该工作：

```
while true ; do $(head /dev/ttyS0 > scale_value.html) ; sleep 5 ; done 
```

另请参阅[如何每 5 秒运行一次脚本](https://askubuntu.com/questions/800/how-to-run-scripts-every-5-seconds-using-cron)以获取有关此内容以及如何添加功能以远程停止此脚本的更多信息。

# python - 退出对话框时不处理关闭事件

> ID：14369715
> 
> 赞同：1
> 
> 时间：2013-01-16T23:22:52.460
> 
> 标签：python, pyqt

我有关闭事件的代码

```
def closeEvent(self, event):
    print "cloce"
    quit_msg = "Are you sure you want to exit the program?"
    reply = QtGui.QMessageBox.question(self, 'Message',
                 quit_msg, QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)

    if reply == QtGui.QMessageBox.Yes:
         event.accept()
    else:
        event.ignore() 
```

但是，当我在窗口顶部单击 x 时，不会调用它。我应该将该 klik 与此功能连接还是其他方式连接它会起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:37:33.730

调用[`QDialog::reject ()`](http://doc.qt.digia.com/4.7-snapshot/qdialog.html#reject)隐藏对话框而不是关闭它。要在拒绝`QDialog`刚刚重新实现`reject`插槽之前显示提示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        super(myDialog, self).__init__(parent)

        self.buttonBox = QtGui.QDialogButtonBox(self)
        self.buttonBox.setGeometry(QtCore.QRect(30, 240, 341, 32))
        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
        self.buttonBox.setStandardButtons(QtGui.QDialogButtonBox.Cancel|QtGui.QDialogButtonBox.Ok)
        self.buttonBox.accepted.connect(self.accept)
        self.buttonBox.rejected.connect(self.reject)

        self.msgBox = QtGui.QMessageBox(self) 
        self.msgBox.setText("Are you sure you want to exit the program?")
        self.msgBox.setStandardButtons(QtGui.QMessageBox.Yes | QtGui.QMessageBox.No)
        self.msgBox.setDefaultButton(QtGui.QMessageBox.Yes)

    @QtCore.pyqtSlot()
    def reject(self):
        msgBoxResult = self.msgBox.exec_()

        if msgBoxResult == QtGui.QMessageBox.Yes:
            return super(myDialog, self).reject()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myDialog')

    main = myDialog()
    main.resize(400, 300)
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T23:43:43.217

您可以实现自己的事件过滤器

```
class custom(QWidget):
    def __init__(self):
        super(custom, self).__init__()
        self.installEventFilter(self)

    def eventFilter(self, qobject, qevent):
        qtype = qevent.type()
        if qtype == QEvent.Close:
            qobject.hide()
            return True
        # parents event handler for all other events
        return super(custom,self).eventFilter(qobject, qevent) 
```

# javascript - 在不使用内联 javascript 的情况下使用 mixin 进行计算

> ID：14369721
> 
> 赞同：0
> 
> 时间：2013-01-16T23:23:29.057
> 
> 标签：javascript, node.js, express, pug, mixins

所以我使用 mixin 在我的网络应用程序中显示一系列条目。我希望每个人都有一个相对时间戳，说明它是多久前发布的。

```
mixin listTitles(titles)
  each title in titles
     article.leaf
      article
    a.headline(href=title.URL)= title.title
  footer
    p.postData 
     | Posted 
     span#date=title.time
     a(href='someSource') The New York Times <br>
    a.commentButton(href=title.URL)
    a.sourceButton(href='#')
mixin listTitles(titles) 
```

title.time 包含 javascript 时间的提交时间（以毫秒为单位的 unix 时间）。我想将其与当前时间进行比较并显示自提交帖子以来的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:22:01.517

您可以在 Jade 模板中的任何地方使用 JS，方法是放置`-`在行首。

```
mixin listTitles(titles)
  - var now = Date.now();
  each title in titles
    p Posted #{now - title.time} millis ago. 
```

我假设“没有 javascript”是指这个逻辑应该在模板本身而不是调用`render()`.

# opengl - 3D图形管线

> ID：14369722
> 
> 赞同：0
> 
> 时间：2013-01-16T23:23:29.183
> 
> 标签：opengl, graphics, 3d, directx, pipeline

到目前为止，这就是我对图形管道（Opengl）的理解，有人可以确认吗？

*   对象空间：对象（几何）特定坐标；

*   世界空间：将物体旋转、平移和缩放到世界空间；

*   眼睛空间：限制世界观的视锥体，使用投影矩阵将 3d 坐标投影到 2d 平面（近平面？），在必要时缩放它，并在其超出视锥体/眼睛空间时对其进行裁剪

我读过眼睛空间反转 Z 轴，所以，原来的 +z 顶点从眼睛向后转动，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:04:57.553

没有。有

*   局部空间

→ 模型视图变换 →</p>

*   眼睛空间

→ 投影变换 →</p>

*   剪辑空间

→ 齐次坐标 w 归一化 →</p>

*   归一化坐标空间

模型视图和投影变换通常用矩阵乘法表示。对使用的矩阵没有特殊要求，但您通常希望它们是非奇异的。但在这之间，任何事情都会发生。通常发现的变换是旋转缩放+平移和剪切缩放+平移。

> 我读过眼睛空间反转 Z 轴，所以，原来的 +z 顶点从眼睛向后转动，为什么？

不，不是。我认为您可能会在投影矩阵中使用负 z 和 w 元素。但这只是为了获得正确的深度排序。您可以很好地翻转它们的符号，并通过对深度范围和深度测试功能进行某些调整来逆转这种效果。那里的负号只是常规获得默认设置的右手坐标系，即正 Z 眼空间坐标出现在屏幕上。

# android - 优化 android 从 web 数据库加载 url

> ID：14369723
> 
> 赞同：1
> 
> 时间：2013-01-16T23:23:36.997
> 
> 标签：android, bitmap, android-asynctask, gallery

在我的应用程序中，我从我的数据库中加载一些 URL 并将它们存储`ArrayList<Bitmap>`在一个库中。它工作得很好，但速度很慢。问题是我`ArrayList`在显示图像之前加载了所有位图。

```
 try
        {
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++)
            {
                Temp = jArray.get(i).toString();

                HttpURLConnection connection = null;
                try 
                {
                    connection = (HttpURLConnection) new URL(Temp).openConnection();
                } 
                catch (MalformedURLException e) 
                {
                    e.printStackTrace();
                } 
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
                connection.connect();
                InputStream input = connection.getInputStream();

                x = BitmapFactory.decodeStream(input);
                bitmapArray.add(x);
            }
        }
        return bitmapArray; // returning the array list with all the bitmaps inside

    protected void onPostExecute(ArrayList<Bitmap> donnees)
    {
        SetupInterface(); // This method sends the arraylist to an image adatper and display bitmaps to the screen.
    } 
```

我的问题是`SetupInterface()`仅在数组已满并返回时才调用它。所以当我打开我的活动时，显示画廊大约需要 4-5 秒，因为在显示之前必须加载数组中的所有位图。如何更快地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:35:45.833

下载图像和解码图像需要时间。您已经知道 jArray 的内容（至少是这些图像的长度、名称......）。您应该将带有默认背景图像的数组直接发送到图像适配器，并使用 AsyncTask 一张一张地加载这些实际图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:35:54.940

在活动开始时加载并仅显示第一张图像。在显示您的活动并完成所有初始化工作后，您将加载其余图像。你可以：

1.  [使用例如Handler](http://developer.android.com/reference/android/os/Handler.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台线程中一一加载它们。第二个将更容易实现。
2.  加载下一个图像，*当它必须被加载*时，例如用户点击“next”。它被称为延迟加载。

# php - 支持 Yii SEO 友好语言的网址

> ID：14369726
> 
> 赞同：0
> 
> 时间：2013-01-16T23:23:40.587
> 
> 标签：php, url, yii

我跟着[这个教程](http://www.yiiframework.com/wiki/294/seo-conform-multilingual-urls-language-selector-widget-i18n/)。

我想要实现的是

```
http://something.com/language/controller/action 
```

但我越来越

```
http://something.com/controller/action?language=en&id=1 
```

据我所知，[这是](http://www.yiiframework.com/wiki/294/seo-conform-multilingual-urls-language-selector-widget-i18n/#hh0)URL 生成的一部分。但我不知道如何解决它。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:57:52.417

正如@PanagiotisGeorgeRadi 建议的那样，您必须使用 .htaccess （在项目根目录中），我的略有不同，但基础是相同的：

```
RewriteEngine on

Options +FollowSymLinks
IndexIgnore */*

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# otherwise forward it to index.php
RewriteRule . index.php 
```

然后在**components数组的****protected/config/main.php**中设置 URL 管理器的配置文件：

 **```
 'urlManager' => array(
        'urlFormat' => 'path',
        'showScriptName' => false,
        'rules' => array(
            '<lang:(en|fr|it|es)>/<controller:\w+>/<action:\w+>' => '<controller>/<action>', // only these 4 lang codes
            '<lang:[a-z][a-z]>/<controller:\w+>/<action:\w+>' => '<controller>/<action>', // or a generic pattern
        ),
    ), 
```

那么你的控制器中的动作有这个签名：

```
class TestController{
  public function actionIndex($lang){
    // $lang will be en|fr|es|it
    // or [a-z][a-z]
  }
} 
```

使用 url 管理器，您将只接受支持的语言，而无需任何**if**或**switch**

添加关于 UrlManager 的好文档： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

url 管理器最好的部分是在页面中创建链接，例如：

```
$url=$this->createUrl('test/index',array('lang'=>'en')); 
```

将是相对路径：**en/test/index**

```
$url=$this->createAbsoluteUrl('test/index',array('lang'=>'en')); 
```

如果项目位于 documentRoot 中，则为绝对 URL **http://www.loc.dom/en/test/index** ；如果位于其他位置，则为**http://www.loc.dom/sub/path/en/test/index**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:30:37.677

通常，您会使用 url 管理器对象中的 defaultParams 选项添加/删除查询字符串参数。从[文档](http://www.yiiframework.com/doc/api/1.1/CUrlRule#defaultParams-detail)中：

> defaultParams：此规则提供的默认 GET 参数（名称=>值）。当该规则用于解析传入请求时，该属性中声明的值将被注入到 $_GET 中。

但是，在这种情况下，您扩展了 createURL 方法以手动将这些参数添加到 url 的末尾，以提供多语言 URL 支持。如果您不关心这一点，只需确保您的 params 对象设置为空数组：

```
return parent::createUrl($route); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:38:52.243

使用 htaccess 文件（如果您不熟悉 htaccess，请查看 google 上的教程）

在其中添加以下行

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)(.*)$ /index.php?page=$1&request=$2 
```

使用此规则，假设您拥有 domain.com 并且用户请求以下 url

[http://www.domain.com/news/December/politics/Titlearticle1](http://www.domain.com/news/December/politics/Titlearticle1)

上面的规则会破坏这个 url 请求并分配

```
$_GET['page'] = 'news'; 
```

和

```
$_GET['request'] = '/December/politics/Titlearticle1'; 
```

现在在你的 php 脚本中

你可以

1) 验证页面请求

2) 展开 $_GET['request'] 以进一步验证您的请求

```
$request_parts = explode('/',$_GET['request']); 
```

3）验证一切！这非常重要，否则您的网站可能容易受到攻击。

像这样：

```
if($_GET['page'] == 'news')
}
  include 'news.php';
{
else if ($_GET['page'] == 'home')
{
  include 'home.php';
}
  else
{
  include 'error.php';
} 
```

这是一些非常基本的概念，但您可以根据需要对其进行扩展...**

# c# - 通过表单上的所有控件进行递归循环

> ID：14369727
> 
> 赞同：0
> 
> 时间：2013-01-16T23:23:44.233
> 
> 标签：c#, .net, winforms, controls

我正在尝试遍历表单中的所有控件，以允许对我的应用程序进行语言本地化。

这就是我所拥有的。

```
 private void ChangeLanguage(string lang, ControlCollection controls)
    {
        foreach (Control c in controls)
        {
            ChangeLanguage(lang, c.Controls);
            ComponentResourceManager resources = new ComponentResourceManager(typeof(Form1));
            resources.ApplyResources(c, c.Name, new CultureInfo(lang));
        }
    } 
```

它不喜欢我如何尝试从父控件派生子控件。

有人对如何完成我的任务有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:29:39.807

确认。不要这样做。查看全球化和本地化。基本上你会使用

*   资源管理器，
*   Thread.CurrentThread.CurrentCulture,
*   Thread.CurrentThread.CurrentUICulture。

将控件绑定到 ResourceManager 或在表单呈现时从资源管理器填充值是正确的方法。魔法发生在本地化的 ResourceManager .resx 中。

[http://msdn.microsoft.com/en-us/library/y99d1cd3%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/y99d1cd3%28v=vs.80%29.aspx)

# vb.net - 使用图像作为表单背景？

> ID：14369729
> 
> 赞同：0
> 
> 时间：2013-01-16T23:23:49.290
> 
> 标签：vb.net, winforms, image, visual-studio, gdi

如果我想从图像创建可调整大小的表单，我必须使用矢量图像吗？

一个例子是 Photoshop。它可以调整大小并保持圆角和外边缘，而不会使其看起来变形和拉伸。

我知道可以在背景中平铺简单的图案，但尝试拥有完美的圆角是一项艰巨的任务。这将如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:26:48.393

You can override the `OnPaint` method for your form and draw the background yourself in the right size. Since you're drawing primitives (paths, rectangles, ellipses, etc.) it's not a source bitmap that gets scaled and you can adapt to the form's size.

# database - 在 VB.NET (Compact Framework) 中使用 DataAdapter 和关系

> ID：14369738
> 
> 赞同：0
> 
> 时间：2013-01-16T23:24:25.607
> 
> 标签：database, vb.net, compact-framework, sql-server-ce

我已经为这个问题寻找了几个小时的解决方案，但还没有，所以我在这里。

我有一个包含 4 个数据表的数据集：

```
 DS
    +Parent
    ++Child1
    ++Child2
    ++Child3 
```

我在数据集上定义了使用 pk 将父级链接到子级的关系。

问题是当我填充（使用 dataadapter.fill 方法）子表时，数据库返回所有记录，而不仅仅是与父表相关的记录，所以我的数据表比它们需要的大并且需要一段时间才能加载，并且由于此代码适用于移动设备，因此这是一个溢价。

我不能像在父级上那样只对子级使用 WHERE 过滤器，因为这取决于父级数据。

有没有办法在填充子表时只返回与父级相关的记录？

我一定是在看这里的东西，因为我认为这将是简单的东西？！？

多谢你们。

编辑：在构建 SELECT 命令时唯一已知的 ID 是父表的单个公共标识符。这对过滤子表没有好处，因为这些数据不存在于子表中，只有父 PK 存在，这是未知的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:50:30.923

您已经说过您正在使用 parent PK = child fk 链接到子表，因此您将在子表中有一个 parentid 列。因此，正如填充父表的查询的形式为 SELECT * FROM parent WHERE parentid = @parentid，填充子表的查询的形式为 SELECT * FROM child1 WHERE parentid = @parentid

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:52:14.927

如果您只知道父 ID，而这不足以确定子表中需要哪些记录，那么您可以尝试使用嵌套选择来封装您的业务逻辑：

```
SELECT * 
FROM child1 c
WHERE c.myforeignkey in 
    (
    select p.myforeignkey
    from parent p
    where p.parentid = ...
    ) 
```

也许是左连接？

```
SELECT c.* 
FROM child1 c
LEFT JOIN parent p on c.commonid = p.commonid
WHERE p.parentid = ... 
```

# python - 在 Python 中从字典创建邻接表

> ID：14369739
> 
> 赞同：3
> 
> 时间：2013-01-16T23:24:28.183
> 
> 标签：python, algorithm

我习惯于在 python 中使用 dicts 来表示图形，但是我在大型图形和复杂计算中遇到了一些严重的性能问题，所以我认为我应该转而使用邻接矩阵来绕过哈希表的开销。我的问题是，如果我有一个 g: {node: {vertex: weight . . . } 。. . }，将其转换为基于列表的邻接矩阵的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:17:02.593

可能不是最有效的，但将格式转换为基于列表的邻接矩阵的简单方法如下所示：

```
g = {1:{2:.5, 3:.2}, 2:{4:.7}, 4:{5:.6, 3:.3}}
hubs = g.items() # list of nodes and outgoing vertices
size=max(map(lambda hub: max(hub[0], max(hub[1].keys())), hubs))+1 # matrix dimension is highest known node index + 1
matrix=[[None]*size for row in range(size)] # set up a matrix of the appropriate size

for node, vertices in hubs: # loop through every node in dictionary
    for vertice, weight in vertices.items(): # loop through vertices
        matrix[vertice][node] = weight # define adjacency of both nodes by assigning the vertice's weight 
```

这适用于有向图，假设节点仅由从零开始的索引表示。这是此示例中处理的图形的可视化和结果矩阵：

![](../Images/cfca5c9f7911b9b1220be4a9d3887276.png)

```
 0    1    2    3    4    5
   ------------------------------
0 |                              
1 |                              
2 |      0.5                     
3 |      0.2            0.3      
4 |           0.7                
5 |                     0.6 
```

如果您的图表实际上是无向的，我可以考虑一些优化的机会。如果字典包含每个节点作为键并列出其所有顶点，例如`{1:{2:.2, 3:.3}, 2:{1:.2}, 3:{1:.3}}`，您可以在遍历之前对相应的列表进行排序并限制内部循环：

```
hubs = sorted(g.items())
for node, vertices in hubs:
    for vertice, weight in reversed(sorted(vertices.items())):
        if vertice >= node: 
            matrix[vertice][node] = weight
            matrix[node][vertice] = weight
        else: # do only care about vertices that haven't been saved before,
            break # continue with next node when the current one won't introduce any more vertices 
```

您可能可以通过使用[二分搜索](http://docs.python.org/2/library/bisect.html)来提高效率。由于生成的矩阵显然是镜像对称的，因此您还可以走得更远，只存储其中的一半。最简单的方法是在垂直轴上翻转它：

```
# unlike the one before, this sample doesn't rely on the dictionary containing every vertice twice
matrix=[[None]*size for row in range(size)]  
for node, vertices in hubs:
    for vertice, weight in vertices.items():
        matrix[vertice][size-node-1] = weight 
```

由于矩阵的一半被切断，并非每次查找节点之间的顶点`(u,v)`都会起作用，因此必须确保列的索引大于行的索引才能查找单元格：

```
u,v = sorted((u,v))
weight = matrix[v][u] 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T14:05:17.570

要在邻接列表中实现，您可以创建两个类，一个用于存储有关顶点的信息。

```
# Vertex, which will represent each vertex in the graph.Each Vertex uses a dictionary
# to keep track of the vertices to which it is connected, and the weight of each edge. 
class Vertex:

# Initialze a object of this class
# we use double underscore 
def __init__(self, key):
    # we identify the vertex with its key
    self.id = key
    # this stores the info about the various connections any object 
    # (vertex) of this class has using a dictionary which is called connectedTo.
    # initially its not connected to any other node so,
    self.connectedTo={}

# Add the information about connection between vertexes into the dictionary connectedTo
def addNeighbor(self,neighbor,weight=0):
    # neighbor is another vertex we update the connectedTo dictionary ( Vertex:weight )
    # with the information of this new Edge, the key is the vertex and
    # the edge's weight is its value. This is the new element in the dictionary
    self.connectedTo[neighbor] = weight

# Return a string containing a nicely printable representation of an object.
def __str__(self):
    return str(self.id) + ' connectedTo: ' + str([x.id for x in self.connectedTo])

# Return the vertex's self is connected to in a List
def getConnections(self):
    return self.connectedTo.keys()

# Return the id with which we identify the vertex, its name you could say
def getId(self):
    return self.id

# Return the value (weight) of the edge (or arc) between self and nbr (two vertices)
def getWeight(self,nbr):
    return self.connectedTo[nbr] 
```

正如您从评论中看到的那样，每个顶点都存储一个用于识别它的“键”，并且它有一个字典“connectedTo”，其中包含来自该顶点的所有连接的键权重对。连接顶点的键和边的权重。

现在我们可以使用可以像这样实现的 Graph 类来存储这些顶点的集合，

```
# The Graph class contains a dictionary that maps vertex keys to vertex objects (vertlist) and a    count of the number of vertices in the graph
class Graph:

def __init__(self):
    self.vertList = {}
    self.numVertices = 0

# Returns a vertex which was added to the graph with given key
def addVertex(self,key):
    self.numVertices = self.numVertices + 1
    # create a vertex object
    newVertex = Vertex(key)
    # set its key
    self.vertList[key] = newVertex
    return newVertex

# Return the vertex object corresponding to the key - n
def getVertex(self,n):
    if n in self.vertList:
        return self.vertList[n]
    else:
        return None

# Returns boolean - checks if graph contains a vertex with key n
def __contains__(self,n):
    return n in self.vertList

# Add's an edge to the graph using addNeighbor method of Vertex
def addEdge(self,f,t,cost=0):
    # check if the 2 vertices involved in this edge exists inside
    # the graph if not they are added to the graph
    # nv is the Vertex object which is part of the graph
    # and has key of 'f' and 't' respectively, cost is the edge weight
    if f not in self.vertList:
        nv = self.addVertex(f)
    if t not in self.vertList:
        nv = self.addVertex(t)
    # self.vertList[f] gets the vertex with f as key, we call this Vertex
    # object's addNeighbor with both the weight and self.vertList[t] (the vertice with t as key) 
    self.vertList[f].addNeighbor(self.vertList[t], cost)

# Return the list of all key's corresponding to the vertex's in the graph
def getVertices(self):
    return self.vertList.keys()

# Returns an iterator object, which contains all the Vertex's
def __iter__(self):
    return iter(self.vertList.values()) 
```

在这里，我们有一个图形类，它保存了“numVertices”中的顶点数，并有一个字典“vertList”，它具有图中存在的键和顶点（我们刚刚创建的类）对象。我们可以创建一个图表并通过调用来设置它

```
# Now lets make the graph
the_graph=Graph()

print "enter the number of nodes in the graph"
no_nodes=int(raw_input())

# setup the nodes
for i in range(no_nodes):
        print "enter the "+str(i+1)+" Node's key"
        the_graph.addVertex(raw_input())

print "enter the number of edges in the graph"
no_edges=int(raw_input())
print "enter the maximum weight possible for any of edges in the graph"
max_weight=int(raw_input())

# setup the edges
for i in range(no_edges):
    print "For the "+str(i+1)+" Edge, "
    print "of the 2 nodes involved in this edge \nenter the first Node's key"
    node1_key=raw_input()
    print "\nenter the second Node's key"
    node2_key=raw_input()
    print "\nenter the cost (or weight) of this edge (or arc) - an integer"
    cost=int(raw_input())
    # add the edge with this info
    the_graph.addEdge(node1_key,node2_key,cost) 
```

如果你想要无向图然后添加这条线`the_graph.addEdge(node2_key,node1_key,cost)` 因此连接将不是作为连接到 b 而是作为连接到 b 和 b 连接到 a 存储。还要注意上面两个类实现的缩进，它可能是不正确的。

# python - celeryd 任务中的导入错误

> ID：14369740
> 
> 赞同：2
> 
> 时间：2013-01-16T23:24:32.483
> 
> 标签：python, django, celery

我在运行 celery 任务时遇到问题，因为它找不到我的模块之一：

```
(ff)bash-3.2$ flipfinder_app/manage.py celeryd
[...]
Traceback (most recent call last):
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/billiard/process.py", line 248, in _bootstrap
self.run()
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/billiard/process.py", line 97, in run
self._target(*self._args, **self._kwargs)
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/billiard/pool.py", line 268, in worker
initializer(*initargs)
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/celery/concurrency/processes/__init__.py", line 51, in process_initializer
app.loader.init_worker()
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/celery/loaders/base.py", line 115, in init_worker
self.import_default_modules()
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/djcelery/loaders.py", line 136, in import_default_modules
super(DjangoLoader, self).import_default_modules()
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/celery/loaders/base.py", line 110, in import_default_modules
| self.builtin_modules]
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/celery/loaders/base.py", line 96, in import_task_module
return self.import_from_cwd(module)
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/celery/loaders/base.py", line 104, in import_from_cwd
package=package)
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/celery/utils/imports.py", line 96, in import_from_cwd
return imp(module, package=package)
File "/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/celery/loaders/base.py", line 99, in import_module
return importlib.import_module(module, package=package)
File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py", line 37, in import_module
__import__(name)
File "/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app/apps/tabs/keywords/tasks.py", line 11, in <module>
from apps.util.adsense import has_adsense
ImportError: No module named adsense 
```

它确实存在：

```
(ff)bash-3.2$ pwd
/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app/apps/util
(ff)bash-3.2$ ls | grep adsense
adsense.py 
```

当我使用 django shell 时，它可以正常导入。

```
(ff)bash-3.2$ ff_app/manage.py shell
Python 2.7.3 (default, Jan  9 2013, 09:25:40) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.65))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from apps.util.adsense import has_adsense
>>> has_adsense
<function has_adsense at 0x10d3171b8> 
```

我将此添加到任务文件中：

```
import sys
print sys.path 
```

并在我尝试运行 celery 时看到此输出：

```
['/Users/jasonlfunk/Workspace/Work/csm/ff-app', '/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app/lib',
 '/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app/apps', '/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app/lib',
 '/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app/apps', '/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/Users/jasonlfunk/.virtualenvs/ff/src/pywhois', '/Users/jasonlfunk/.virtualenvs/ff/src/django-filter',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python27.zip', '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/plat-darwin', '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/plat-mac',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/plat-mac/lib-scriptpackages', '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/lib-tk',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/lib-old', '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/lib-dynload',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages', '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/PIL',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/newrelic-1.5.0.103',
 '/Users/jasonlfunk/.virtualenvs/ff/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info'] 
```

您可以看到它`/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app`位于应该导入的路径中。

我还将此添加到任务文件中：

```
import os
os.chdir('/Users/jasonlfunk/Workspace/Work/csm/ff-app/ff_app') 
```

一切正常。

```
 -------------- celery@Jason-Funks-MacBook-Pro.local v3.0.11 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      django://guest@localhost:5672//
- ** ---------- . app:         default:0x10ddf5810 (djcelery.loaders.DjangoLoader)
- ** ---------- . concurrency: 2 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 

[2013-01-16 17:22:53,248: WARNING/MainProcess] celery@Jason-Funks-MacBook-Pro.local ready. 
```

这是怎么回事？为什么 cd'ing 到一个已经在我的路径中的目录可以解决问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:49:18.400

是从任务 def**中的 apps.util.adsense 导入 has_adsense吗？**

# jquery-hover - 悬停在每个

> ID：14369743
> 
> 赞同：0
> 
> 时间：2013-01-16T23:25:05.917
> 
> 标签：jquery-hover, jquery

我希望用户将鼠标悬停在一个链接上，该链接有一个名为图片的类和动画的跨度（增加填充顶部），这是我到目前为止所做的代码，但是当用户将鼠标悬停在它上面时，它会为它们设置动画，我只希望它为用户悬停的那个动画。

```
$('.picture').each(function(){
    $('.picture').hover(function(){
        $('.picture span').animate({
            'padding-top' : '20px'
        },'fast');
    });

    $('.picture').mouseout(function(){
        $('.picture span').animate({
            'padding-top' : '10px'
        },'fast');
    });
}); 
```

任何帮助将不胜感激我认为它在每个功能的某个地方我出错了，但我不确定。可以在这里找到它的链接：http: [//bathroomsyork.co.uk/](http://bathroomsyork.co.uk/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T23:34:33.340

我看不出你的外`each()`呼有什么好处。你应该试试这个：

```
$('.picture').hover(
    function() {
        $(this).find('span').animate({'padding-top' : '20px'},'fast');
    },
    function() {
        $(this).find('span').animate({'padding-top' : '10px'},'fast');
    }
); 
```

请注意，我们选择所有图片类元素，然后使用`hover()`函数的两个参数来指定`mouseenter`和`mouseleave`事件回调。

在每个回调中，获取当前悬停元素的子跨度`$(this)`，并执行动画。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T23:28:08.133

You don't need to iterate over all elements, you can bind the event handler to all the matched elements at the same time.

Also, use `$('span', this)` to select the correct `<span>` from the hovered element.

```
$('.picture').on({
  mouseenter: function () {
    $('span', this).animate({
      'padding-top': '20px'
    }, 'fast');
  },
  mouseout: function () {
    $('span', this).animate({
      'padding-top': '10px'
    }, 'fast');
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:57:52.103

这最终奏效了伙计们：

```
$('.picture').each(function(){
    $(this).hover(function(){
        $('span', this).animate({
            'padding-top' : '20px'
        },'fast');
    }, function(){
        $('span', this).animate({
            'padding-top' : '10px'
        },'fast');
    });
}); 
```

当我尝试使用 on() 的示例时，出现控制台错误，这与我以前从未见过的完全一样是什么？

不管怎么说，还是要谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T23:26:15.507

You don't need `each`.

```
$('.picture').on('mouseenter mouseleave', function(e){
    var padding = e.type == 'mouseenter' ? '20px' : '10px';
    $('span', this).animate({
        'padding-top' : padding
    },'fast');
}); 
```

# javascript - 为什么我必须将 Javascript 函数调用包含在匿名函数中以使其不会立即被调用？

> ID：14369749
> 
> 赞同：2
> 
> 时间：2013-01-16T23:25:28.177
> 
> 标签：javascript, jquery, closures, anonymous-function

我有这个 Javascript 函数：

```
function Card(term, def, terms, curTerm) {
    this.term = term;
    this.def = def;
    this.terms = terms;
    this.curTerm = curTerm;

    this.show = function() {
        that = this;
        var html = createCard(that.term, that.def);
        $('body').append(html);
        $('input[type=text]').focus();
        $('.answer').on('click', function(event) {
            event.preventDefault();
            answer = $(this).parent().serializeArray()[0].value;

            // answer correct
            if (that.term === answer) {
                $('.card').addClass('correct');
                $('form').replaceWith('<h2>Correct! ' + that.term + '</h2>');
                setTimeout(function () {that.destroy(terms, curTerm + 1);}, 1500);

            // answer incorrect
            } else {
                $('.card').addClass('incorrect');
                $('form').replaceWith('<h2>Incorrect! ' + that.term + '</h2>');
                setTimeout(function () {that.destroy(terms, curTerm);}, 1500);
            }
        });
    }; 
```

我遇到的问题是`setTimeout(function () {that.destroy(terms, curTerm + 1);}, 1500);`. 最初我有`setTimeout(that.destroy(terms, curTerm + 1), 1500);`，但它没有设置它刚刚调用的超时`that.destroy`。为什么放入匿名函数时不立即调用它？这和闭包有关系吗？因为似乎我必须创建一个闭包，但我对它们的了解还不够，无法确定。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T23:27:34.640

在您的第一次`setTimeout()`通话中，这是：

```
that.destroy(terms, curTerm + 1) 
```

是一个函数调用表达式。对其进行评估是为了构建要调用的参数值集`setTimeout()`。

当您将它包装在匿名函数中时，**不会**调用该（匿名）函数，因为您没有使用函数调用运算符作为后缀 - 带括号的参数列表。

因此：形式的表达

```
something ( p1, p2, ... pn ) 
```

表示在评估参数列表中的每个参数后调用“某物”引用的函数，然后在更大的表达式上下文进行时使用该值。它**总是**意味着在 JavaScript 中。没有语法可以说“这是我希望你稍后调用的函数，以及要传递的一些参数”。（现在有一个*函数*可以做到这一点——`.bind()`在函数原型上——但没有特殊的*语法*。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:28:20.243

这只是 JavaScript 语法的一部分。

`function name() {}`声明一个函数并`name()`调用它。您还可以使用语法立即调用匿名函数`(function (){})()`。

另请注意，您可以在匿名函数适合的地方传递函数*名称，例如：*

```
setTimeout(that.destroy, 1500) 
```

当然，在这种情况下你不能改变论点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:30:49.777

当 JavaScript 解释器看到`someFunction(param)`时，它立即调用该方法`someFunction`并将参数传递给它`param`。换句话说，当你这样做时：

```
setTimeout(someFunction(param), 1000); 
```

...您将 setTimeout 传递给 someFunction(param) 的结果。您可以改为将 someFunction 作为一等成员传递，如下所示：

```
setTimeout(someFunction, 1000, param); 
```

这样，您将 setTimeout 传递给 someFunction 的定义。请注意，`param`在这种情况下传递在 IE 中不起作用。

Also, see [http://www.helephant.com/2008/08/19/functions-are-first-class-objects-in-javascript/](http://www.helephant.com/2008/08/19/functions-are-first-class-objects-in-javascript/).

# class - clisp: how can I find a specification of complex

> ID：14369753
> 
> 赞同：0
> 
> 时间：2013-01-16T23:25:50.630
> 
> 标签：class, complex-numbers, clisp

I am writing a LISP program to deal with line integrals on complex numbers.I wonder if somebody can tell me where can I find a specification of **class complex** in **clisp**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:29:08.010

复数是 Common Lisp 标准的一部分。[您可以在Common Lisp HyperSpec](http://www.lispworks.com/documentation/HyperSpec/Front/index.htm)中了解它们。最相关的章节是：

*   [2.3.2.3 复合体的语法](http://www.lispworks.com/documentation/HyperSpec/Body/02_cbc.htm)，
*   [2.4.8.11 Sharpsign C](http://www.lispworks.com/documentation/HyperSpec/Body/02_dhk.htm)，
*   [12.1.5 复杂计算](http://www.lispworks.com/documentation/HyperSpec/Body/12_ae.htm)，
*   [22.1.3.1.4 印刷复合体](http://www.lispworks.com/documentation/HyperSpec/Body/22_acad.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:35:24.230

如果这确实是关于[GNU CLISP](http://clisp.org)的问题，您可能还想查看[CLISP-specific docs](http://clisp.org/impnotes/num-concepts.html#complex-comp)。

# iphone - NSDateFormatter 仅在特定时区为特定日期返回 nil

> ID：14369765
> 
> 赞同：0
> 
> 时间：2013-01-16T23:26:51.233
> 
> 标签：iphone, nsdate, nsdateformatter, nsdatecomponents, nstimezone

鉴于此代码：

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"yyyyMMdd"];
NSArray *datesArray = @[@"20130326", @"20130327", @"20130328", @"20130329", @"20130330", @"20130331", @"20130401"];
for (NSString *dateString in datesArray) {
    NSDate *date = [dateFormatter dateFromString:dateString];
    NSLog(@"date: %@", date);
} 
```

这是我的时区（EST）的输出：

```
date: 2013-03-26 04:00:00 +0000
date: 2013-03-27 04:00:00 +0000
date: 2013-03-28 04:00:00 +0000
date: 2013-03-29 04:00:00 +0000
date: 2013-03-30 04:00:00 +0000
date: 2013-03-31 04:00:00 +0000
date: 2013-04-01 04:00:00 +0000 
```

当我转到设置 -> 常规 -> 日期和时间，并将时区设置为约旦安曼 (GMT+3) 时，这是相同代码的输出：

```
date: 2013-03-25 22:00:00 +0000
date: 2013-03-26 22:00:00 +0000
date: 2013-03-27 22:00:00 +0000
date: (null)
date: 2013-03-29 21:00:00 +0000
date: 2013-03-30 21:00:00 +0000
date: 2013-03-31 21:00:00 +0000 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:42:02.087

我不确定，但28日约旦安曼的时钟发生变化可能不是巧合：[http ://www.evi.com/q/when_do_the_clocks_change_in_amman_jordan](http://www.evi.com/q/when_do_the_clocks_change_in_amman_jordan)

我的怀疑是时钟从 2013-03-28 21:59:59 跳到 2013-03-28 23:00:00，所以安曼不存在时间 2013-03-28 22:00:00 , 约旦时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:03:35.463

从 1970 年到现在，在 DST 在安曼开始的日期，我在几年、几个月和几天内运行了一个循环，`nil`返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:34:58.870

`dateFormatter`我认为您必须在从字符串设置值时指定时区。看到[这个问题](https://stackoverflow.com/questions/4258266/nsdateformatter-datefromstring-returns-nil)，它不是完全相同的问题，但它可能会有所帮助。

希望这可以帮助

# jquery - 如何选择每个 div 的第二张图片？

> ID：14369766
> 
> 赞同：0
> 
> 时间：2013-01-16T23:27:05.123
> 
> 标签：jquery

我正在尝试在 div 中获取第二张图片。我的结构就像

```
<div class='test'>

   <a href='#'>   <img src='haha.jpg'/>   </a>
   <a href='#'>   <img src='imageINeed.jpg'/>  </a>

</div>

<div class='test'>

   <a href='#'>   <img src='haha.jpg'/>   </a>
   <a href='#'>   <img src='imageINeed1.jpg'/>  </a>

</div>

<div class='test'>

   <a href='#'>   <img src='haha.jpg'/>   </a>
   <a href='#'>   <img src='imageINeed2.jpg'/>  </a>

</div> 
```

我下面的 jquery 不起作用

```
 $('.test').find('img:last').each(function(){

         $(this).css('max-width','none').width(500);
   }) 
```

我想在每个`test`div 中选择第二个图像。任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:33:17.383

这个怎么样：

```
$(".test").each(function () {
    $(this).find("img:eq(2)");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:31:03.640

因为您的图像在锚点内，您需要选择第二个锚点，然后它是子图像：

```
$('.test a:nth-child(2) img').each(...) 
```

# javascript - 当用户滚动到页面末尾时自动点击

> ID：14369769
> 
> 赞同：0
> 
> 时间：2013-01-16T23:27:34.107
> 
> 标签：javascript, jquery

我正在尝试在我的网站上创建无限滚动功能，但它不起作用。我的代码：

```
var post = {}
post.load_moreBtn = $('#home_load_more');
if($(window).scrollTop() + $(window).height() == $(document).height()) {
    post.load_moreBtn.trigger('click');
}
post.load_moreBtn.on('click', function () {
    $(this).html('<img src="' + base_url + 'images/core/loader2.gif"/>');
    post.load_more_messages($(this).attr('data-last_id'));
}); 
```

如果我用警报代替触发器它可以工作，如果我删除滚动检测位，负载更多工作正常。只是无法自动加载，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:22:26.373

使用 jQuery 很容易：

```
$(function(){ //on document ready
    $(document).scroll(function (e) { //bind scroll event

        var intBottomMargin = 300; //Pixels from bottom when script should trigger

        //if less than intBottomMargin px from bottom
        if ($(window).scrollTop() >= $(document).height() - $(window).height() - intBottomMargin) {
            $("#home_load_more").click(); //trigger click
        }

    });
}); 
```

我把它绑定在

# web-services - JAX-WS object in application scope

> ID：14369771
> 
> 赞同：1
> 
> 时间：2013-01-16T23:27:56.710
> 
> 标签：web-services, jax-ws

I'm looking for some advice on JAX-WS... or maybe tell me to use AXIS2, or some other WS impl.

What I'd like to do is hold an instance of an object in 'Application Scope', when I deploy my WS in a WAR. I'm using Servlet terminology here, but wondered if this is possible? In Servlet terms, we have Application, Session, Request scope. Is there anything similar in JAX-WS et al, that will allow me to load an object into 'Application Scope' at start up, such that subsequent request/response cycles can use this object?

I appreciate any advice or ridicule ;-)

# c# - Lambda 表达式转换

> ID：14369777
> 
> 赞同：4
> 
> 时间：2013-01-16T23:28:23.593
> 
> 标签：c#, generics, lambda, entity-framework-5

我怎样才能从

```
Expression<Func<T, bool>> predicate 
```

到

```
Expression<Func<SomeType, bool>> predicate 
```

?

到现在也没找到方法。或者至少`Expression<Func<SomeType, bool>>`通过使用谓词的第一个字符串表示来创建一个新的。

如果它有帮助，`T`则仅限于实现的类型`ISomeInterface`，并`SomeType`实现它。

**LE：进一步澄清**

界面类似于：

```
public interface ICacheable
{
    List<T> GetObjects<T>(Expression<Func<T, bool>> predicate) where T : ICacheable;
} 
```

那么你有

```
public partial class Video : ICacheable
{
    public List<T> GetObjects<T>(Expression<Func<T, bool>> predicate) where T : ICacheable
    {
        // implementation here that returns the actual List<Video>
        // but when I try to query the dbcontext I can't pass a predicate with type T, I have to cast it somehow
        List<Video> videos = db.Videos.Where(predicate).ToList(); // not working
    }
} 
```

那么你有：

```
public class RedisCache
{
    public List<T> GetList<T>(Expression<Func<T, bool>> predicate) where T : ICacheable
    {
        List<T> objList = // get objects from cache store here
        if(objList == null)
        {
            List<T> objList = GetObjects<T>(predicate);
            // cache the result next
        }
        return objList;
    }
} 
```

我从任何类中使用上述内容，如下所示：

```
// If the list is not found, the cache store automatically retrieves 
// and caches the data based on the methods enforced by the interface
// The overall structure and logic has more to it. 
List<Video> videos = redisCache.GetList<Video>(v => v.Title.Contains("some text"));
List<Image> images = redisCache.GetList<Image>(v => v.Title.Contains("another text")); 
```

我会将其扩展到我需要可缓存的任何类型的对象，如果在缓存中找不到实体或实体列表，则允许缓存存储自动检索实体或实体列表的方法。不过，我可能做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:18:23.383

这是一些（非常）基本的东西，我希望它可以帮助您在使用泛型进行缓存的过程中。

```
// ICacheable interface is used as a flag for cacheable classes
public interface ICacheable
{
}

// Videos and Images are ICacheable
public class Video : ICacheable
{
    public String Title { get; set; }
}

public class Image : ICacheable
{
    public String Title { get; set; }
}

// CacheStore will keep all objects loaded for a class, 
// as well as the hashcodes of the predicates used to load these objects
public class CacheStore<T> where T : ICacheable
{
    static List<T> loadedObjects = new List<T>();
    static List<int> loadedPredicatesHashCodes = new List<int>();

    public static List<T> GetObjects(Expression<Func<T, bool>> predicate) 
    {

        if (loadedPredicatesHashCodes.Contains(predicate.GetHashCode<T>()))
            // objects corresponding to this predicate are in the cache, filter all cached objects with predicate
            return loadedObjects.Where(predicate.Compile()).ToList();
        else
            return null;
    }

    // Store objects in the cache, as well as the predicates used to load them    
    public static void StoreObjects(List<T> objects, Expression<Func<T, bool>> predicate)
    {
        var hashCode = predicate.GetHashCode<T>();
        if (!loadedPredicatesHashCodes.Contains(hashCode))
        {
            loadedPredicatesHashCodes.Add(hashCode);
            loadedObjects = loadedObjects.Union(objects).ToList();
        }
    }
}

// DbLoader for objets of a given class
public class DbStore<T> where T : ICacheable
{
    public static List<T> GetDbObjects(Expression<Func<T, bool>> predicate)
    {
        return new List<T>(); // in real life, load objects from  Db, with predicate
    }
}

// your redis cache
public class RedisCache
{
    public static List<T> GetList<T>(Expression<Func<T, bool>> predicate) where T:ICacheable
    {
        // try to load from cache
        var objList = CacheStore<T>.GetObjects(predicate);
        if(objList == null)
        {
            // cache does not contains objects, load from db
            objList = DbStore<T>.GetDbObjects(predicate);
            // store in cache
            CacheStore<T>.StoreObjects(objList,predicate);
        }
        return objList;
    }
}

// example of using cache
public class useRedisCache
{
    List<Video> videos = RedisCache.GetList<Video>(v => v.Title.Contains("some text"));
    List<Image> images = RedisCache.GetList<Image>(i => i.Title.Contains("another text"));
}

// utility for serializing a predicate and get a hashcode (might be useless, depending on .Equals result on two equivalent predicates)
public static class PredicateSerializer
{
    public static int GetHashCode<T>(this Expression<Func<T, bool>> predicate) where T : ICacheable
    {
        var serializer = new XmlSerializer(typeof(Expression<Func<T, bool>>));
        var strw = new StringWriter();
        var sw = XmlWriter.Create(strw);
        serializer.Serialize(sw, predicate);
        sw.Close();
        return strw.ToString().GetHashCode();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:29:41.777

我对我的实体框架不了解，但我知道`DatabaseContext`LINQ 内部有一个`GetTable<T>`基于泛型返回表的方法。如果“ [ObjectContext 的 GetTable 等效项](https://stackoverflow.com/questions/7263083/gettable-equivalent-for-objectcontext)”可以通过，它是否也可以在 EF 中使用？

为了使您的陈述真正通用，您可以尝试以下操作：

```
public MyBaseObject<T>
{
    public List<T> GetObjects<T>(Expression<Func<T, bool>> predicate) where T : ICacheable
    {
        return db.CreateObjectSet<T>().Where(predicate).ToList();
    }
}

public partial class Image : MyBaseObject<Image>, ICacheable
{
}

public partial class Video : MyBaseObject<Video>, ICacheable
{
} 
```

# android - 如何在 XML (android) 中引用字符串数组元素

> ID：14369785
> 
> 赞同：4
> 
> 时间：2013-01-16T23:28:51.190
> 
> 标签：android, xml

如何访问字符串数组的元素

```
<string-array name="contextMenuItems">
    <item>Edit</item>
    <item>Info</item>
    <item>Delete</item>        
</string-array> 
```

从另一个资源 xml 文件

```
<menu>
    <item android:id="@+id/Edit"
        android:title="@string/contextMenuItems" />
    <item android:id="@+id/Info"
        android:title="@array/contextMenuItems" />
</menu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:59:45.353

根据这个类似帖子中的人看来，它似乎无法完成。

[如何从 android XML 中的 <string-array> 资源访问 <item>？](https://stackoverflow.com/questions/10205316/how-to-access-item-from-string-array-resource-in-an-android-xml?answertab=active)

我的建议是在加载特定活动时使用一些 Java 代码填充菜单项，或者为每个菜单项使用单独的 @string 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-12T15:57:16.247

我想重新组织字符串资源，如下所示

在文件 strings.xml 中，

```
<string name="label_edit">Edit</string>
<string name="label_info">Info</string>
<string name="label_delete">Delete</string> 
```

在文件 arrays.xml 中

```
<string-array name="contextMenuItems">
        <item>@string/label_edit</item>
        <item>@string/label_info</item>
        <item>@string/label_delete</item>        
</string-array> 
```

在文件 menu.xml

```
<menu>
    <item android:id="@+id/Edit" android:title="@string/label_edit" />
    <item android:id="@+id/Info" android:title="@array/label_info" />
</menu> 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:55:33.870

你必须重写一个函数：

```
public boolean onOptionsItemSelected(MenuItem item) 
       {
        // Handle item selection
        switch (item.getItemId()) 
        {
            case R.id.Edit:
                //Handled [0]
                return true;
                case R.id.Info:
                    // Handled [1]
            default:
                return super.onOptionsItemSelected(item);
        }
        } 
```

# google-apps-script - onOpen 功能无法正常工作

> ID：14369787
> 
> 赞同：0
> 
> 时间：2013-01-16T23:29:02.847
> 
> 标签：google-apps-script

脚本编辑器：使用 onOpen 函数编写脚本（见下文）。使用脚本编辑器启动时，它可以正常工作。当打开电子表格时启动时，我得到了 stmt 31“Logger.log(name)”的日志，没有其他任何事情发生。为什么？

这是完整的脚本：

```
function onOpen() {
  n0="T22 ";
  n1=n0+"aktuell"
  n2=n0+"Master"
  var y1=DayShift();
  Browser.msgBox("Returned with "+y1);
};

function DayShift() { 
  var dt=Browser.inputBox("Datum (YYMMDD) eingeben");
  if (dt=="cancel" || dt.length !=6) return("Input "+dt);

  var f1=GetFL(n1,0);
  if (f1=="cancel") return("F1 cancel");
  Logger.log(f1);
  var Rx=f1.getSheetByName("Sheet1").getRange("B9").getValue();
  f1.rename(n0+dt);
  Logger.log(Rx);
  Logger.log(f1.getName()+" finished");

  var f2=GetFL(n2,1);
  if (f2=="cancel") return("F2 cancel");
  Logger.log(f2);
  f2.getSheetByName("Sheet1").getRange("B7").setValue(Rx);
  Logger.log(f1.getName()+" finished");

  return("OK");
};

function GetFL(name,typ) {
  Logger.log(name);
  var fx = DocsList.find(name);
  Logger.log(name+" = "+fx.length);
  if (fx.length != 1)  return("cancel");
  if (typ==1) {
    var fy=fx[0].makeCopy(n1);
  } else {
    var fy=fx[0];
  };
  fy=SpreadsheetApp.openById(fy.getId());
  Logger.log(fy);
  return (fy);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:19:22.480

作为对 Jonathon 答案的补充，您可以使用可安装的`onOpen`触发器而不是简单的触发器。只需给这个函数另一个名称以避免混淆，例如`IonOpen()`或其他什么......可安装的触发器没有 Jonathon 提到的限制。[请参阅有关使用容器特定的可安装触发器的](https://developers.google.com/apps-script/understanding_triggers?hl=en)文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:40:44.380

从脚本编辑器运行`onOpen`将视为任何其他脚本。将它作为一个简单的触发函数运行将不允许访问 DocsList API，因为它不能匿名运行。即使您已授权脚本以您的身份运行，简单的触发器也会匿名运行，并且某些 API 不允许这样做。

在这种情况下`onOpen`(and `onEdit`) 默默地失败。

它不会为您解决这个问题，但可以在[GAS 文档](https://developers.google.com/apps-script/understanding_triggers "了解触发器")中找到解释。

当您第一次遇到这种情况时可能会感到沮丧/困惑，但是即使这意味着从菜单命令或按钮运行脚本，也有一些方法可以解决它：两者都在脚本上赋予用户身份。

# yaml-cpp - 如何使用复杂的密钥访问 yaml

> ID：14369791
> 
> 赞同：1
> 
> 时间：2013-01-16T23:29:20.230
> 
> 标签：yaml-cpp

文件 test.yaml .....

```
 ---
   map:
        ? [L, itsy] : ISO_LOW_ITSY(out, in, ctrl) 
        ? [L, bitsy] : ISO_LOW_BITSY(out, in, ctrl) 
        ? [L, spider] : ISO_LOW_SPIDER(out, in, ctrl) 
        ? [H, ANY] : ISO_HIGH(out, in, ctrl) 
```

我可以使用什么命令通过 yaml-cpp 访问其中之一。我可以访问整个地图，但不能访问单个元素。

这是我正在尝试的：

```
 YAML::Node doc = YAML::LoadFile("test.yaml");
    std::cout << "A:" << doc["mapping"] << std::endl;
    std::cout << "LS1:" << doc["mapping"]["[L, spider]"] << std::endl;
    std::cout << "LS2:" << doc["mapping"]["L", "spider"] << std::endl; 
```

这是我的结果：

```
 A:? ? - L
          - itsy
 : ISO_LOW_ITSY(out, in, ctrl)
: ~
? ? - L
    - bitsy
  : ISO_LOW_BITSY(out, in, ctrl)
: ~
? ? - L
    - spider
  : ISO_LOW_SPIDER(out, in, ctrl)
: ~
? ? - H
    - ANY
  : ISO_HIGH(out, in, ctrl)
: ~
LS1:
LS2: 
```

如果这在 yaml-cpp 中还不可能，我也想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:21:10.667

您必须定义与您的密钥匹配的类型。例如，如果您的键是两个标量的序列：

```
struct Key {
  std::string a, b;

  Key(std::string A="", std::string B=""): a(A), b(B) {}

  bool operator==(const Key& rhs) const {
    return a == rhs.a && b == rhs.b;
  }
};

namespace YAML {
  template<>
  struct convert<Key> {
    static Node encode(const Key& rhs) {
      Node node;
      node.push_back(rhs.a);
      node.push_back(rhs.b);
      return node;
    }

    static bool decode(const Node& node, Key& rhs) {
      if(!node.IsSequence() || node.size() != 2)
        return false;

      rhs.a = node[0].as<std::string>();
      rhs.b = node[1].as<std::string>();
      return true;
    }
  };
} 
```

然后，如果您的 YAML 文件是

```
? [foo, bar]
: some value 
```

你可以写：

```
YAML::Node doc = YAML::LoadFile("test.yaml");
std::cout << doc[Key("foo", "bar")];     // prints "some value" 
```

# 笔记：

我认为您的 YAML 没有达到您的预期。在块上下文中，显式键/值对必须位于单独的行上。换句话说，你应该做

```
? [L, itsy]
: ISO_LOW_ITSY(out, in, ctrl) 
```

而*不是*

```
? [L, itsy] : ISO_LOW_ITSY(out, in, ctrl) 
```

后者使其成为单个键，具有（隐式）空值；即，它与

```
? [L, itsy] : ISO_LOW_ITSY(out, in, ctrl)
: ~ 
```

（您可以通过 yaml-cpp 如何输出您的示例来查看这一点。）请参阅[规范中的相关区域](http://www.yaml.org/spec/1.2/spec.html#id2798057)。

# javascript - 对每个参数使用双引号

> ID：14369794
> 
> 赞同：1
> 
> 时间：2013-01-16T23:29:25.577
> 
> 标签：javascript, asp.net-mvc, razor

我正在使用这个 JavaScript 方法在视图中生成一个 url。

```
var url = '@Html.Raw(Url.Action("NewAPIForm", "Developer",
    new { ClientSecret ="test", clientID = @Html.Raw(Json.Encode(TempData["ClientID"])),
    AppName = @Html.Raw(Json.Encode(TempData["appname"])),
    Email = @Html.Raw(Json.Encode(TempData["email"])) }))'; 
```

希望得到这样的结果：

```
/Developer/NewAPIForm?ClientSecret=test&clientID=AP-QIYYL1B8&AppName=Test&Email=a%40gmail.com 
```

但它显示：

```
/Developer/NewAPIForm?ClientSecret=%228Ke4QYPctENcca0F1og5zZRpdlt5XuBa68gkSSN5hbCjYPaB%22&clientID=%22AP-26GKQJ86%22&AppName=%22Test%22&Email=%22a%40gmail.com%22 
```

如何生成我所追求的 url，并`%22`在当前结果中摆脱？谢谢。

# jquery - jQuery :: 动态创建菜单项

> ID：14369795
> 
> 赞同：1
> 
> 时间：2013-01-16T23:29:37.160
> 
> 标签：jquery, css

我正在学习 jQuery，对它了解不多，所以请多多包涵。

我创建了一个带有 Search AddNew Edit Delete 菜单项的菜单。现在我的要求是 - 每当我单击 AddNew 或 Edit 链接/按钮时，我的代码应将“AddNew”或“Edit”菜单项替换为 Update 和 Cancel 菜单项。除非按下取消或更新，否则这些菜单项不应让选择另一个菜单项。一旦我单击“取消”或“更新”菜单项，两个菜单项都应该消失，“编辑”菜单项应该返回。我试过了，但不知何故它没有任何好处。

```
 <body>
    <div class="menu">
        <a id="aSearch" href="#">Search</a><br />
        <a id="aAddNew" href="#">Add New</a><br />
        <a id="aEdit" href="#">Edit</a><br />
        <a id="aDelete" href="#">Delete</a><br />
    </div>
    </body> 
```

你能帮我解决这个问题吗？你可以在这里找到 jsFiddle：[JsFiddle 链接](http://jsfiddle.net/developer2013/ZkGbw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:49:51.883

与其只使用超链接，不如像 Mooseman 那样使用列表。

```
 $(function () {
        $("#lnkEdit").click(function () {
          $("#lnkCancelUpdate").toggle();
          $("#lnkEdit").toggle();           
        });
        $("#lnkCancel").click(function () {
          $("#lnkCancelUpdate").toggle();
          $("#lnkEdit").toggle();
        });
    }); 
```

以下是它的更新版本：http: [//jsfiddle.net/ZkGbw/19/](http://jsfiddle.net/ZkGbw/19/)

如果有帮助，请投票。谢谢。

# javascript - 如何让这个 Javascript 与同一页面上的多个链接一起工作？

> ID：14369801
> 
> 赞同：0
> 
> 时间：2013-01-16T23:30:02.330
> 
> 标签：javascript, hyperlink, onclick, mouseevent, hidden

截至目前，我能够让这个 javascript 函数与一个链接一起工作。但是，我想使用具有多个链接的功能。我已更改`obj`为不同的值，并且还尝试使用为每个函数指定不同值的多个函数来获得工作原型，但似乎没有任何效果。下面是从头开始的javascript函数，没有变化。

```
<script type="text/javascript">
    function gObj(obj) {
        var theObj;
        if(document.all){
            if(typeof obj=="string") {
                return document.all(obj);
            }
            else {
                return obj.style;
            }
        }
        if(document.getElementById) {
            if(typeof obj=="string") {
                return document.getElementById(obj);
            }
            else {
                return obj.style;
            }
        }
        return null;
    }
</script> 
```

和链接代码：

```
<div id="axphsh">
<b>Phone:</b><a href="#" onClick="
    gObj('axphsh').style.display='none'; 
    gObj('axphhd').style.display='block'; 
    return false;">Click for Phone Number</a></div>
<div id="axphhd" style="display:none">
<b>Phone:</b> 555-555-5555</div> 
```

最终我想要的是在同一页面上使用多个数字的链接代码，默认情况下全部隐藏，然后取消隐藏`onClick`。但就像我说的，这只适用于一个电话号码链接，那么如果同一页面上有更多指定，则该`onClick`事件根本不起作用。我认为这与`getElementById`可以以这种方式指定链接的 div id 有关，但我不完全确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:56:28.520

你应该学习一些基本的 JS DOM 操作。

为什么你甚至使用`document.all`不属于标准的部分？使用`document.getElementyById`或`document.querySelector`。

如果您的所有电话号码框都相似，您可以使用更通用的功能：

**HTML**：

```
<div class="phone-link-container">
    <a href="#" class="show-phone-number">Click for phone number</a>
</div>
<div class="phone-number-container">555-555-555</div> 
```

**JS**：

```
function showNumber (e) {
  var link = e.target,
    link_container = e.target.parentNode,
    phone_number = link_container.nextElementSibling;

  link_container.style.display = 'none';
  phone_number.style.display = 'block';
}

var numbers = document.querySelectorAll('.show-phone-number');
Array.prototype.forEach.call(numbers, function (el, i) {
  el.addEventListener('click', showNumber);
}); 
```

它选择具有类的所有元素`show-phone-number`并将函数绑定`showNumber`到`click`每个元素的事件。此函数隐藏链接的父级（`phone-link-container`在我的示例中）并显示父级的下一个兄弟（即`phone-link-container`）。

[http://jsfiddle.net/9ZF9q/2/](http://jsfiddle.net/9ZF9q/2/)

如果您的 JavaScript 代码在其中，`head`您需要将所有 DOM 操作包装在窗口`load`回调中：

```
window.addEventListener("load", function () {
  var numbers = document.querySelectorAll('.show-phone-number')
  Array.prototype.forEach.call(numbers, function (el, i) {
    el.addEventListener('click', showNumber);
  });
}); 
```

[您可以在https://developer.mozilla.org/en-US/docs/DOM/Element.nextElementSibling](https://developer.mozilla.org/en-US/docs/DOM/Element.nextElementSibling)上阅读更多关于那里使用的功能

当涉及到 DOM 操作时，如果您想保持与所有旧浏览器的兼容性，那么使用 jQuery 库会更容易——尤其是如果您是初学者。

# css - 在 div 中居中图像和文本

> ID：14369802
> 
> 赞同：4
> 
> 时间：2013-01-16T23:30:07.683
> 
> 标签：css

HTML

```
<div class="leave-comment">
  <a href="example-video-8/" rel="bookmark" title="Leave a comment for Example Video 8"><span class="comment-bubble"></span>Leave a comment for Example Video 8!</a>
</div> 
```

CSS

```
.leave-comment {
background: #010101;
clear: both;
font-size: 1.4em;
padding: 20px 0;
}

.comment-bubble {
background: url(http://i.imgur.com/iqOtL.png) no-repeat left center;
display: inline-block;
height: 24px;
width: 26px;
float: left;
margin-right: 10px;
  } 
```

这是 JS 小提琴：http: [//jsfiddle.net/CeZLy/](http://jsfiddle.net/CeZLy/)

我试图将评论气泡和文本都集中在黑框内。文本将始终在变化，因此我无法在`a`元素上设置固定宽度。有人可以帮我解决这个问题吗？

注意：对不起，如果我不清楚。我想要文本左侧的评论气泡，然后我想要评论气泡和文本在黑框内居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:53:50.740

移除跨度。将图像设置为`a`元素的背景。使用`text-align:center;`并为图像添加左填充：

```
.leave-comment {
    background: #010101;
    clear: both;
    font-size: 1.4em;
    padding: 20px 0;
    text-align:center;
}

.leave-comment a {
    background: url(http://i.imgur.com/iqOtL.png) no-repeat left center;
}

<div class="leave-comment">
    <a href="example-video-8/" rel="bookmark" title="Leave a comment for Example Video 8">Leave a comment for Example Video 8!</a>
</div> 
```

核实：

[http://jsfiddle.net/C9HKr/](http://jsfiddle.net/C9HKr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:47:41.840

从您的评论中，我会省略`float: left`并添加一个`text-align: center`

[JSFiddle](http://jsfiddle.net/CeZLy/6/)

垂直居中似乎有点困难。如果要垂直居中并具有固定高度，可以将`line-height`链接的高度设置为相同的高度。

见[JSFiddle](http://jsfiddle.net/CeZLy/8/)

[Vertical Centering With CSS](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)有一个很好的关于垂直居中的教程，解释了几种方法并强调了每种方法的优缺点。

*更新*：

我刚刚重读了你的评论。也许我误解了你。如果您只是希望链接向上或向下移动一点，您还可以在顶部和底部使用不同的填充。

看到这个[JSFiddle](http://jsfiddle.net/CeZLy/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:38:37.807

```
.leave-comment {
background-color: #010101;
 clear: both;
font-size: 1.4em;
padding: 20px 0;
text-align: center;
}
.comment-bubble {
background: url(http://i.imgur.com/iqOtL.png) no-repeat left center;
display: inline-block;
height: 24px;
width: 26px;
margin-right: 10px;
position: relative;
top: 7px;
} 
```

那么你现在需要跨度。

[http://jsfiddle.net/CeZLy/7/](http://jsfiddle.net/CeZLy/7/)在行动

# bash - 自制程序无法安装闭包编译器

> ID：14369803
> 
> 赞同：3
> 
> 时间：2013-01-16T23:30:14.373
> 
> 标签：bash, command-line-interface, homebrew

我的系统似乎无法安装闭包编译器。这是计算机发生的事情：

```
$ brew install closure-compiler   
==> Checking out http://closure-compiler.googlecode.com/svn/trunk/    
dyld: Library not loaded: /usr/local/lib/libsqlite3.0.8.6.dylib    
  Referenced from: /usr/local/bin/svn    
  Reason: image not found    
Error: Failure while executing: svn checkout -q --force http://closure-compiler.googlecode.com/svn/trunk    / /Library/Caches/Homebrew/closure-compiler--svn -r 2388 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T03:55:37.713

升级自制安装的 svn 后，我遇到了类似的问题。

我按照[https://github.com/mxcl/homebrew/issues/17172](https://github.com/mxcl/homebrew/issues/17172)`brew rm svn serf neon`中`brew install svn`的建议解决了它

记得在那之后重新打开你的终端。

# android - Android AsyncTask onPostExecute 关闭主 ui 线程

> ID：14369806
> 
> 赞同：7
> 
> 时间：2013-01-16T23:30:28.403
> 
> 标签：android, multithreading, android-asynctask

我在使用 AsyncTask 和 onPostExecute 时遇到问题。我发现 onPostExecute 正在与主 ui 线程不同的线程上执行，这导致在我修改任何视图时发生 CalledFromWrongThreadException。

我输入了一些日志来查看 onPreExecute、doInBackground 和 onPostExecute 正在运行的线程。我会看到这样的结果...

```
onPreExecute ThreadId: 1
doInBackground ThreadId: 25
onPostExecute ThreadId: 18 
```

我相信主 ui 线程 id 是 1，我希望 onPre 和 onPost 都在线程 1 上执行。我确保从 ui 线程创建并调用 execute 方法（例如在 Activity 的 onCreate 中）。

我注意到的另一件事是，稍后的异步任务将在与之前的异步任务 onPostExecute 方法（在本例中为线程 18）相同的线程上运行它们的 onPostExecute 方法。

现在为了解决这个问题，我将代码包装在我的 onPostExecute 方法中，以调用 runOnUiThread，但我认为这是 hacky，我想解决真正的问题。

我没主意了！任何人有任何见解？我很乐意回答任何有助于进一步调查的问题！

编辑：

在代码中运行异步任务有两种方式。我想知道这些例子中的后者是否会导致一些奇怪的事情发生？

```
public class SomeActivity extends Activity {
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main_layout);

       new SomeAsyncTask().execute();
   }

   private class SomeAsyncTask extends AsyncTask<String, Void, Integer> {
        @Override
        public void onPreExecute() {
            Thread.currentThread().getId() // 1
            //Show a dialog
        }

        @Override
        public Integer doInBackground(String... params) {
            Thread.currentThread().getId() // 25
            return 0;
        }

        @Override
        public void onPostExecute(Integer result) {
            Thread.currentThread().getId() // 18
            //hide dialog
            //update text view -> CalledFromWrongThreadException!!!
        }
    } 
```

}

上面看起来像是 AsyncTask 的普通用法，但我仍然看到即使在这样的简单情况下也会出现这个问题。下一个示例使用异步任务来运行其他异步任务。也许有一些我不知道当异步任务被构造时会发生什么导致一些奇怪的行为？

```
public class SomeActivity extends Activity implements TaskRunner.OnFinishListener {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);

        TaskRunner taskRunner = new TaskRunner();
        taskRunner.setOnFinishListener(this);
        taskRunner.addTask(new SingleTask());
        taskRunner.addTask(new SingleTask());
        taskRunner.execute();
    }

    @Override
    public void onTaskFinish(List<Integer> results) {
       //Thread id is 18 when it should be 1
       //do something to a view - CalledFromWrongThreadException!!
    }

}

//In a different file
public class SingleTask extends AsyncTask<String, Void, Integer> {
    //This is a an async task so we can run it separately as an asynctask
    //Or run it on whatever thread runnerExecute is called on
    @Override
    public Integer doInBackground(String... params) {
        return runnerExecute(params);
    }

    //Can be called outside of doInBackground
    public Integer runnerExecute(String... params) {
        //some long running task
        return 0;
    }
}

//In a different file
public class TaskRunner {

    private List<SingleTask> tasks;
    private OnFinishListener onFinishListener;

    public interface OnFinishListener {
        public void onTaskFinish(List<Integer> results);
    }

    public TaskRunner() {
        this.tasks = new ArrayList<SingleTask>();
    }

    public void setOnFinishListener(OnFinishListener listener) {
        this.onFinishListener = listener;
    }

    public void addTask(SingleTask task) {
        tasks.add(task);
    }

    public void executeTasks() {
        new RunnerTask().execute((SingleTask[]) tasks.toArray());
    }

    //Calls the runnerExecute method on each SingleTask
    private class RunnerTask extends AsyncTask<SingleTask, Integer, List<Integer>> {
        @Override
        public void onPreExecute() {
            //Runs on thread 1
        }

        @Override
        public List<Integer> doInBackground(SingleTask... params) {
            //Runs on arbitrary thread
            List<Integer> results = new ArrayList<Integer>();
            for(SingleTask task : params) {
                int result =task.runnerExecute(task.getParams());
                results.add(result);
            }
            return results;
        }

        @Override
        public void onPostExecute(List<Integer> results) {
            //Runs on thread 18
            onFinishListener.onTaskFinish(results);
        }
    }
} 
```

也许这里发生的事情非常奇怪，而且根本不是异步任务的使用方式，无论哪种方式，都能找到问题的根源。

如果您需要更多上下文，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-18T10:37:06.910

我遇到了同样的问题，结果发现问题出在 Flurry 3.2.1 上。但是，问题不仅限于 Flurry 库。

幕后的问题是有史以来第一次（当第一次加载应用程序时）从不是主 UI 线程的 looper 线程调用 AsyncTask。此调用将 AsyncTask 中的 sHandler 静态变量初始化为错误的线程 id，然后在所有后续 AsyncTask$onPostExecute() 调用中使用此 id。

为了解决这个问题，我在第一次加载应用程序时调用了一个空的（什么都不做）AsyncTask，只是为了正确初始化 AsyncTask。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:36:10.633

尝试使用：

```
getBaseContext().runOnUiThread(new Runnable()
{
@override
public void run()
{

}
}); 
```

`run`并在函数内编写代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T10:15:44.023

AsyncTask 旨在从主线程中使用。您的问题是第二种情况，是您从后台线程调用 SingleTask 上的执行。在 RunnerTask 的 doInBackground 方法中调用它。然后从 RunnerTask 的后台线程运行 onPostExecute

两种选择。

1：垃圾RunnerTask，并从你的主线程执行SingleTasks，它们都会并行运行，你不知道哪个先完成，但是在主线程上调用onPreExecute和onPostExecute

2：将SingleTask 丢弃，改为定义为Runnables，然后在RunnerTask 的doInBackground 中依次运行即可。它们都将按照您调用 Run 的顺序在 RunnerTask 的后台线程中运行。完成后，RunnerTask 的 onPostExecute 在主线程上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T06:35:22.970

我刚刚尝试了您的代码，并且 onPreExecute 和 onPostExecute 确实在同一个线程上运行，您如何输出线程 id ？尝试：

```
Log.d("THREADTEST","PRE"+Long.toString(Thread.currentThread().getId()));

Log.d("THREADTEST","BACKGROUND"+Long.toString(Thread.currentThread().getId()));

Log.d("THREADTEST","POST"+Long.toString(Thread.currentThread().getId())); 
```

PS应该是：

```
new SomeAsyncTask().execute(); 
```

和

```
private class SomeAsyncTask extends AsyncTask<String, Void, Integer> { ... } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-09T14:50:26.717

您实际上是从 RunnerTask 的 doinbackground 方法执行 SingleTask ，这是不正确的，因为 asynctask 应该只从主线程执行。您需要重新研究从 RunnerTask 运行一组 SingleTasks 的逻辑。

# javascript - Html：是否可以使用 Javascript 使用静态 html 进行无限（有限？）滚动？

> ID：14369808
> 
> 赞同：0
> 
> 时间：2013-01-16T23:30:38.853
> 
> 标签：javascript, jquery, html, static

我有自动生成并保存在 S3 中的静态 html 文件。有时文件达到 2mb 大小。是否可以使用 javascript 获取 html 文件的一部分，显示它，当用户到达页面底部时，获取下一部分等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:39:32.687

[XHR 对象](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method)提供了一种设置自定义 HTTP 标头的方法。因此，您可以尝试设置[Range 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)以仅获取静态文件的一部分。

您将不得不考虑该块不是正确的 HTML，因为您正在剪切文件的任意切片，因此如果您打算显示结果，则必须实现逻辑以正确处理结果。

我很乐意看到您以这种方式实现它，而不是像通常的情况那样利用分块到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:38:48.717

问题不在于如何进行无限滚动，而在于如何一次加载大文件的一部分，在用户向下滚动时加载更多内容。我不确定这是否可能，所以这是另一种解决方案：

将大文件存储在较小的块中，比如说`1.txt, 2.txt ...`然后，在您的页面上，当您向下滚动时，您可以加载下一个`N.txt`. （顺便说一句，不一定是txt）。只需确保您的包装器（用户实际看到的文件）具有完整的 HTML，并且它正在加载的块只是内容。这意味着块不应该像`</body></html>`... 应该在包装文件中。

这是[使用 AJAX](https://stackoverflow.com/questions/5437447/ajax-reading-from-file)或使用[jQuery](http://api.jquery.com/jQuery.get/)获取文件的方法。您真正需要做的就是跟踪您所在的部分，以便加载下一个部分。如果它不存在，那么您已经加载了整个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:40:21.993

这是完全可能的——想法是您可以在服务器上预渲染“片段”，其中每个片段代表 N 篇文章的“子页面”或您拥有的内容。然后，您使用 0（或 1）个片段呈现页面，并将其发送到客户端。当客户端滚动到底部时，您只需请求下一个片段（使用 AJAX）并将其附加到前一个片段的末尾。无限期地继续这样做。

要理解的关键点是每个片段都是在服务器上静态渲染的。尽管片段本身可能不是一个完整的 HTML 页面，但它们可以“无限附加”到现有页面中。HTTP 的部分乐趣（相对于完整的 HTML）是您不必拥有完整的 HTML 页面即可成功提供任何片段。您可以将 HTML 视为“样板”，它围绕着任意块额外的、非格式良好的 HTML（当放置在您的样板中时格式正确）。

由于 AJAX 基于 HTTP 请求，因此您可以请求任意内容。哎呀，您可以要求自己的自定义标记，只要“捕获”响应的 Javascript 可以以浏览器可以理解的方式格式化它 - 即 HTML、CSS 和 JavaScript。

# android - 将依赖的 .so 文件与 Android 的 ndk-build 链接

> ID：14369809
> 
> 赞同：0
> 
> 时间：2013-01-16T23:30:43.027
> 
> 标签：android, android-ndk

我创建了一个 .so 文件，该文件通过 JNI 公开了对 Java 的本机 C 调用。这很好用，如果我只在我的 C 代码中使用系统库，我可以将应用程序部署到我的 Android 系统上。但是，如果我想调用其他 .so 文件中的函数，我无法让我的项目正确链接。

例如，假设我有一个“libotherso.so”文件，其中包含用 C 定义的 API，我可以从用于生成“libMyJNILibrary.so”的“MyJNILibrary.c”代码中调用这些 API。

我尝试按如下方式更改我的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := MyJNILibrary
LOCAL_SRC_FILES := MyJNILibrary.c

LOCAL_LDLIBS += -lotherso

include $(BUILD_SHARED_LIBRARY) 
```

但是当我为此调用 ndk-build 时，发现 -lotherso 时出现错误。我应该将“libotherso.so”文件放在哪里，以便 ndk-build 可以获取它？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:25:46.507

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := otherso
LOCAL_SRC_FILES := ../lib/libotherso.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := MyJNILibrary
LOCAL_SRC_FILES := MyJNILibrary.c
LOCAL_SHARED_LIBRARIES := otherso
include $(BUILD_SHARED_LIBRARY) 
```

请注意，LOCAL_SRC_FILES 与您的 LOCAL_PATH 相关。

不要忘记在您自己的 JNI 库之前加载您的依赖项：

```
static {
  System.loadLibrary("otherso");
  System.loadLibrary("MyJNILibrary");
} 
```

# c++ - 安装类型程序，我如何在 C++ 程序中从网上下载一些东西？

> ID：14369813
> 
> 赞同：-1
> 
> 时间：2013-01-16T23:30:52.427
> 
> 标签：c++, download

我正在制作一个程序来设置服务器，但我不知道如何在 c++ 程序中从 Internet 下载文件。最好下载图书馆或其他东西。另外，我还是一个初级程序员。我正在使用：Microsoft Windows 7 Professional 64x Notepad ++ Borland 的 C++ 编译器 v5.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:41:45.830

有很多方法可以做到这一点。在我看来，最适合你的方法是使用[cURL 库](http://curl.haxx.se)（aka `libcurl`）。从阅读一些[文档](http://curl.haxx.se/docs/)开始。[这个例子](https://stackoverflow.com/a/1636415/405725)也很有帮助，因为它正是这样做的。当然，您总是可以采用其他（不太受欢迎的？）方式：

1.  使用 Qt 网络库（[示例](http://www.java2s.com/Code/Cpp/Qt/DownloadfromURL.htm)）。
2.  使用 Poco C++ 库（这里是一些[介绍性 PDF](http://pocoproject.org/slides/200-Network.pdf)）。
3.  找到其他一些库并尝试一下。
4.  自己做。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:09:15.680

好吧，基于编译器的选择，我看到你想要艰难的方式。[WinInet](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383630%28v=vs.85%29.aspx)将工作。如果你觉得很冒险，试试[windows sockets](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740673%28v=vs.85%29.aspx)。

# visual-studio-2010 - Visual Studio - 获取选择构建时将调用的命令行

> ID：14369818
> 
> 赞同：2
> 
> 时间：2013-01-16T23:31:26.287
> 
> 标签：visual-studio-2010, visual-studio, automation, envdte, visual-studio-extensions

我正在寻找一种方法来确定 Visual Studio 在选择时使用的命令行：

*   `Build Solution`==> 主菜单 -> 构建 -> 构建解决方案
*   `Build Selection`==> 主菜单 -> 构建 -> 构建选择
*   `Compile`==> 选择单个文件 (C/C++) 并在解决方案资源管理器上下文菜单中选择编译

有没有办法确定每次调用生成什么命令行？

例如，构建一个项目可能会产生：

```
MsBuild.exe projec1.vcproj (... some parameters) 
```

依次调用带有一些参数的 cl.exe。

我想知道在执行构建时是否有任何方法可以知道原始调用（MSBuild.exe 调用）是什么。

# node.js - NodeJS 如何扩展企业应用程序？

> ID：14369821
> 
> 赞同：2
> 
> 时间：2013-01-16T23:31:58.790
> 
> 标签：node.js, architecture, software-design

假设我有一个企业 Java 应用程序，它基本上执行以下操作：

收集用户输入，查询后端数据库（可能是多个），运行一些算法（比如对查询的数据集进行一些内存计算以产生一些统计数据等），然后在一些 html 页面中返回数据。

我的问题是：如果应用程序的瓶颈在 db 查询上，那么 NodeJS 在这种情况下如何帮助我，因为我仍然需要在渲染页面之前执行所有这些 post-db 算法？应用程序架构是什么样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:26:43.683

当然，节点无法加速您的存储层，也无法让导致如此多的后端处理的单个请求更快地满足最终用户的请求。但它可以做的不是在应用服务器线程池中占用一个线程。当工作正在进行时，单个线程可以继续循环并接受另一个请求。

另一个请求可能是一个更便宜的请求，它会在它的工作完成后返回。这也可能发生在具有线程池模型的应用程序服务器中……除非线程池模型中的所有线程都被阻塞在 I/O 请求上 - 以及每个线程的开销。较便宜的请求将排队等待线程池中的线程，因为它们都是阻塞的。节点单线程将循环并服务廉价请求。

这是可行的，因为节点要求所有 I/O 都是异步的，并且阻塞循环的唯一工作是您的代码。这就是为什么说“[节点中的所有内容都并行运行，除了你的代码](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)”。虽然可以在其他应用程序服务器中编写异步代码并获得类似的结果，但许多提供非异步线程池模型，其中编码更容易，但有时可扩展性较差。

例如，[这篇 hanselman 帖子](http://www.hanselman.com/blog/InstallingAndRunningNodejsApplicationsWithinIISOnWindowsAreYouMad.aspx)说明了 asp.net 如何能够执行异步请求，但这并不是大多数人使用的通用模型。

# jquery - jquery ColorBox - 内联内容仅第一次显示

> ID：14369831
> 
> 赞同：0
> 
> 时间：2013-01-16T23:32:58.177
> 
> 标签：jquery, colorbox

我似乎无法让我非常基本的 ColorBox 示例正常工作。

这是一个简单的内联 div，第一次正确显示，但之后根本没有要显示的内容（颜色框看起来非常小 - 检查显示里面没有内容）。

```
<html>
<head>
<title>Colorbox Test</title>
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<!-- Add colorbox -->
<link rel="stylesheet" type="text/css" href="css/colorbox.css">
<script type="text/javascript" src="js/jquery.colorbox-min.js"></script>
<script type="text/javascript">
    $(function(){
        $('a.enter').colorbox({inline:true});
    });
</script>
</head>
<body>
       <div class="wrapper">
        <a class="enter" href="#entrydiv">Click To Enter</a> 
       </div>
        <div style="display:none">
            <div id="entrydiv">
                <h2>Enter your details below</h2>
            </div>
        </div>
</body>
</html> 
```

任何人都可以给我任何指示。我已经查看了关于 SO 的大多数相关问题，但它们似乎都不完全相同。

已在 Mac 上的 Safari 和 Firefox 上进行过测试

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:18:12.287

从 GitHub 获取最新版本的 Colorbox，它解决了这个问题

# sql-server - 在两个数据集上构建报表逻辑

> ID：14369838
> 
> 赞同：1
> 
> 时间：2013-01-16T23:33:34.377
> 
> 标签：sql-server, ssrs-2008, reporting-services

我正在构建一个报告，该报告必须满足从两个不同数据源中提取的两个数据集的以下条件：

> **数据集 1：来自 SharePoint 列表数据源**
> 
> 如果状态 =“有资格迁移”**或**“等待 QA/QC 审查”**或** “重新考试已完成”</p>
> 
> ***而如果：***
> 
> **数据集 2：来自 SQL Server 数据库数据源**
> 
> 安排第 1 次简报会日期为空白**或**（第 1 次简报出席 =未出席且安排**第**2 次简报会日期为空白）**或**（第 2 次简报出席 = 未出席）**或**（第 1 次简报出席日期为今天之前的日期且第一次简报出席为空白) **或**（安排第 2 次简报会日期是今天之前的日期**，并且**第 2 次简报会出席为空白）

为此，我使用对上述逻辑建模的表达式向两个数据源添加过滤器，然后在使用 DataSet1 客户 ID 匹配 DataSet2 客户 ID 并返回问题状态（DataSet2 特有）的表中进行查找。**我无法将 DataSet 2 字段添加到 DataSet 1 表中，这就是我进行查找的原因。**但是，这是行不通的。我在下面添加了用于 DataSet2 过滤的代码，以防它可能出现问题。

***我还应该补充一点，我在报告中为我设置了数据源和数据集，因为我没有凭据，但我能够向数据集添加过滤器。***

```
=IIF(IsNothing(Fields!FirstBriefingDate.Value) 
or (Fields!FirstBriefingAttendance.Value = "No Show" and 
IsNothing(Fields!SecondBriefingDate.Value)) or 
Fields!SecondBriefingAttendance.Value = "No Show" or 
(Fields!FirstBriefingDate.Value<Today() and 
IsNothing(Fields!FirstBriefingAttendance.Value)) or 
(Fields!SecondBriefingDate.Value<Today() and 
IsNothing(Fields!SecondBriefingAttendance.Value)), 1, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:39:25.013

事实证明，我只需要在 SQL 查询本身中为第二个数据集应用过滤器。我最终需要这些凭据。

# python - Reading two lines at a time from two different files in Python

> ID：14369839
> 
> 赞同：3
> 
> 时间：2013-01-16T23:33:34.007
> 
> 标签：python

I have two files as shown below:

File 1 (tab delimited):

```
A1   someinfo1     someinfo2    someinfo3
A1   someinfo1     someinfo2    someinfo3
B1   someinfo1     someinfo2    someinfo3
B1   someinfo1     someinfo2    someinfo3

```

File 2 (tab delimited):

```
A1   newinfo1     newinfo2    newinfo3
A1   newinfo1     newinfo2    newinfo3
B1   newinfo1     newinfo2    newinfo3
B1   newinfo1     newinfo2    newinfo3

```

I want to read two lines together (lines starting with A1 and A1) from File 1 and two lines (lines starting with A1 and A1) from File 2\. To be more clear, I have two requirements:

```
1) Reading two lines from the same file
2) Read same two lines from the other file.  

```

To be precise, I want to read four lines together ( 2 consecutive lines from two files (2 lines from each file)).

I searched online and was able to get a code to read two lines together but only from one file.

```
with open(File1) as file1:
        for line1,line2 in itertools.izip_longest(*[file1]*2):

```

Also, I was also able to read one line from each of the two files as:

```
for i,(line1,line2) in enumerate(itertools.izip(f1,f2)):
        print line1, line2

```

But I want to do sth like:

Pseudocode:

```
for line1, line2 from file1 and line_1 and line_2 from file2:
              compare line1 with line2
              compare line1 with line_1
              compare line2 with line_1
              compare line2 with line_2

```

I am hoping a solution to be a linear time one. All the files have same number of lines and the first column (primary id) is same for the consecutive lines within a file and the other file follows the same order (See the above example).

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T23:39:05.580

这个怎么样：

```
with open('a') as A, open('b') as B:
    while True:
        try:
            lineA1, lineA2, lineB1, lineB2 = next(A), next(A), next(B), next(B)
            # compare lines
            # ...
        except StopIteration:
            break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:08:16.377

```
>>> from itertools import izip
>>> with open("file1") as file1, open("file2") as file2:
...     for a1, a2, b1, b2 in izip(file1, file1, file2, file2):
...         print a1, a2, b1, b2
... 
A1   someinfo1     someinfo2    someinfo3
A1   someinfo1     someinfo2    someinfo3
A1   newinfo1     newinfo2    newinfo3
A1   newinfo1     newinfo2    newinfo3

B1   someinfo1     someinfo2    someinfo3
B1   someinfo1     someinfo2    someinfo3
B1   newinfo1     newinfo2    newinfo3
B1   newinfo1     newinfo2    newinfo3 
```

您*可以*像这样将行数作为参数（`n`）

```
for lines in izip(*[file1]*n+[file2]*n): 
```

现在行将是一个带有`n*2`元素的元组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T23:39:48.753

让我们看看如何将这些放在一起。第一的：

```
with open(File1) as file1:
    for line1,line2 in itertools.izip_longest(*[file1]*2): 
```

好吧，去掉`for`循环，你就有了一个 2-line-at-a-time 迭代器 over `file`，对吧？因此，您可以对`file2`. 然后你可以`zip`把它们放在一起：

```
with open(File1) as file1, open(File2) as file2:
    f1 = itertools.izip_longest(*[file1]*2)
    f2 = itertools.izip_longest(*[file2]*2)
    for i,((f1_line1, f1_line2), (f2_line1, f2_line2)) in enumerate(itertools.izip(f1,f2)):
        # do stuff 
```

但你真的不想这样做。

首先，大多数人没有直观地阅读`izip_longest(*[file1]*2)`并意识到它是成对分组的。把它包装成一个函数。事实上，甚至不要自己编写函数；从[itertools 文档](http://docs.python.org/2/library/itertools.html#recipes)`grouper`中取出。

所以现在，它是：

```
with open(File1) as file1, open(File2) as file2:
    pairs1 = grouper(2, file1)
    pairs2 = grouper(2, file2)
    for i,((f1_line1, f1_line2), (f2_line1, f2_line2)) in enumerate(itertools.izip(f1,f2)):
        # do stuff 
```

接下来，模式匹配可能很酷，但是在复杂表达式中间分解的嵌套模式有点太多了。所以，让我们把它分解，并通过再次`flatten`从`itertools`文档中借用来取消嵌套：

```
with open(File1) as file1, open(File2) as file2:
    pairs1 = grouper(2, file1)
    pairs2 = grouper(2, file2)
    zipped_pairs = itertools.izip(pairs1, pairs2)
    for i, zipped_pair in enumerate(zipped_pairs):
        f1_line1, f1_line2, f2_line1, f2_line2 = flatten(zipped_pair)
        # do stuff 
```

此解决方案的优点是它是抽象的和通用的，这意味着如果您以后决定需要 5 行或 3 个文件的组，则更改是显而易见的。

这种解决方案的缺点是它是抽象的和通用的，这意味着它不可能像做具体的等价物那样简单。（例如，如果你没有`zip`增加一对`grouper`s，你就不必得到`flatten`结果。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:08:25.170

这是一个概括，它允许任意数量的连续行具有相同的 id 列：

```
from itertools import groupby, izip, product

getid = lambda line: line.partition(" ")[0] # first space-separated column
same_id = lambda lines: groupby(lines, key=getid)

with open(File1) as file1, open(File2) as file2:
     for (id1, lines1), (id2, lines2) in izip(same_id(file1), same_id(file2)):
         if id1 != id2: 
            # handle error here
            break
         # compare all possible combinations
         for a, b in product(lines1, lines2): 
             compare(a, b) 
```

# php - MySQL Join returning ALL data from left table and whatever is found in right table

> ID：14369846
> 
> 赞同：0
> 
> 时间：2013-01-16T23:34:24.833
> 
> 标签：php, mysql, join

Brain bad. Something isn't clicking that I know is probably simple. I'm trying my best to avoid a subquery but it may be unavoidable.

There are 11 records in the left table [`cards_types`] and between 1 and 11 records in the right table [`users_cards`]. I need to return all records from the left table and whatever is found in the right table. The only caveat to the right table is doing some IF / ELSE statements to return 0 values if it `card_types`.`id` is not found in `users_cards`. Also, there is a foreign key constraint on `cards_types`.`id` => `users_cards`.`type_id` (if it matters).

Query

```
SELECT
  t.id,
  t.slug,
  t.label AS type_label,
  t.points AS point_value,
  IF (c.mtg_id IS NULL, 0, c.mtg_id) AS mtg_id,
  IF (c.label IS NULL, 0, c.label ) AS card_label,
  IF (uc.points IS NULL, 0, uc.points ) AS card_score
FROM cards_types t
JOIN users_cards uc
  ON uc.type_id = t.id
JOIN cards c
  ON c.id = uc.card_id
WHERE uc.user_id = 1
  AND uc.season_id = 1
ORDER BY t.priority ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:37:46.080

您当前使用的是`INNER JOIN`，请将其更改为`LEFT JOIN`。我还将您的`WHERE`子句过滤器移至 ，`JOIN`因此您将从`cards_type`. 如果您将过滤器留在`WHERE`子句中，那么它将像一个`INNER JOIN`：

```
SELECT
  t.id,
  t.slug,
  t.label AS type_label,
  t.points AS point_value,
  COALESCE(c.mtg_id, 0) AS mtg_id,
  COALESCE(c.label, 0) AS card_label,
  COALESCE(uc.points, 0) AS card_score
FROM cards_types t
LEFT JOIN users_cards uc
  ON uc.type_id = t.id
  AND uc.user_id = 1  -- < -- move the where filters here
  AND uc.season_id = 1
LEFT JOIN cards c
  ON c.id = uc.card_id
ORDER BY t.priority ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:38:52.533

像这样尝试左连接

```
 SELECT
  t.id,
  t.slug,
  t.label AS type_label,
  t.points AS point_value,
  COALESCE(c.mtg_id, 0) AS mtg_id,
  COALESCE(c.label, 0) AS card_label,
  COALESCE(uc.points, 0) AS card_score
FROM cards_types t
LEFT JOIN users_cards uc
  ON uc.type_id = t.id
  AND uc.user_id = 1
  AND uc.season_id = 1
LEFT JOIN cards c
  ON c.id = uc.card_id
ORDER BY t.priority ASC 
```

# java - 为什么 Java swing timer 导致的动画卡顿比睡眠少？

> ID：14369849
> 
> 赞同：4
> 
> 时间：2013-01-16T23:34:33.710
> 
> 标签：java, performance, swing, animation, timer

我有两个几乎相同的类：AnimationFrame1 和 AnimationFrame2。这两个类都显示一个蓝色球在 500 x 500 窗口中水平来回移动。除了 runAnimation() 和 createAndShowGUI() 方法之外，这两个类是相同的。在其 runAnimation() 方法中，AnimationFrame1 使用 while 循环和 sleep 方法来创建动画循环，而 AnimationFrame2 使用 Swing Timer。在其 createAndShowGUI() 方法中，AnimationFrame1 创建了一个新线程并在其上调用 runAnimation() 方法，而 AnimationFrame2 仅调用 runAnimation() 方法而没有新线程。

编译完这两个类后，我发现使用 Swing Timer 的 AnimationFrame2 显示的动画更流畅，不像 AnimationFrame1 中显示的动画那样卡顿，后者使用 while 循环和 sleep 方法。我的问题是：为什么 AnimationFrame1 的动画显示比 AnimationFrame2 更卡顿？我已经四处寻找了这个原因，但到目前为止还没有找到任何东西。

另外，我显然是 Java 新手，所以如果您发现我的代码有任何问题或者您知道我可以改进它的任何方法，请告诉我。

这是AnimationFrame1：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;

class AnimationFrame1 extends JPanel {

    int ovalX;
    int prevX;
    Timer timer;
    boolean moveRight;
    BufferedImage img;

    public AnimationFrame1() {
        setPreferredSize(new Dimension(500, 500));
    }

    public void runAnimation() {
        moveRight = true;
        img = null;
        ovalX = 0;
        prevX = 0;
        while(true) {
            if (moveRight == true) {
                prevX = ovalX;
                ovalX = ovalX + 4;
            }
            else {
                prevX = ovalX - 4;
                ovalX = ovalX - 4;
            }
            repaint();
            if (ovalX > 430) {
                moveRight = false;
            }
            if (ovalX == 0) {
                moveRight = true;
            }
            try {
                Thread.sleep(25);
            }
            catch(Exception e) {
            }
        }
    }

    public void paintComponent(Graphics g) {
        if (img == null) {
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice gs = ge.getDefaultScreenDevice();
            GraphicsConfiguration gc = getGraphicsConfiguration();
            img = gc.createCompatibleImage(78, 70);
            Graphics gImg = img.getGraphics();
            gImg.setColor(getBackground());
            gImg.fillRect(0, 0, getWidth(), getHeight());
            gImg.setColor(Color.BLUE);
            gImg.fillOval(4, 0, 70, 70);
            gImg.dispose();
        }
        g.drawImage(img, ovalX, 250, null);
    }

    public static void createAndShowGUI() {
        JFrame mainFrame = new JFrame();
        final AnimationFrame1 animFrame = new AnimationFrame1();
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.add(animFrame);
        mainFrame.pack();
        mainFrame.createBufferStrategy(2);
        mainFrame.setVisible(true);
        new Thread(new Runnable() {
            public void run() {
                animFrame.runAnimation();
            }
        }).start();
    }    

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

} 
```

这是AnimationFrame2：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;

class AnimationFrame2 extends JPanel {

    int ovalX;
    int prevX;
    Timer timer;
    boolean moveRight;
    BufferedImage img;

    public AnimationFrame2() {
        setPreferredSize(new Dimension(500, 500));
    }

    public void runAnimation() {
        moveRight = true;
        img = null;
        ovalX = 0;
        prevX = 0;
        timer = new Timer(25, new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                if (moveRight == true) {
                    prevX = ovalX;
                    ovalX = ovalX + 4;
                }
                else {
                    prevX = ovalX - 4;
                    ovalX = ovalX - 4;
                }
                repaint();
                if (ovalX > 430) {
                    moveRight = false;
                }
                if (ovalX == 0) {
                    moveRight = true;
                }
            }
        });
        timer.start();
    }

    public void paintComponent(Graphics g) {
        if (img == null) {
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice gs = ge.getDefaultScreenDevice();
            GraphicsConfiguration gc = getGraphicsConfiguration();
            img = gc.createCompatibleImage(78, 70);
            Graphics gImg = img.getGraphics();
            gImg.setColor(getBackground());
            gImg.fillRect(0, 0, getWidth(), getHeight());
            gImg.setColor(Color.BLUE);
            gImg.fillOval(4, 0, 70, 70);
            gImg.dispose();
        }
        g.drawImage(img, ovalX, 250, null);
    }

    public static void createAndShowGUI() {
        JFrame mainFrame = new JFrame();
        final AnimationFrame2 animFrame = new AnimationFrame2();
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.add(animFrame);
        mainFrame.pack();
        mainFrame.createBufferStrategy(2);
        mainFrame.setVisible(true);
        animFrame.runAnimation();
    }    

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:44:08.500

在代码中放置标记后，似乎 Timer 版本实际上每 30 毫秒运行一次，而 Thread.sleep 版本每 25 毫秒运行一次。可能有几种解释，包括：

*   Timers的分辨率，不如Thread.sleep
*   定时器是单线程的（除了等待，一切都在 EDT 中运行），所以如果一个任务（如重绘）花费超过 25 毫秒，它将延迟下一个任务

如果我将睡眠时间增加到 30 毫秒，则 2 个动画是相似的（实际数字可能因您的机器而异）。

注意：Thread.sleep 版本中存在潜在的线程安全问题。您在没有适当同步的情况下在工作线程和 UI 线程之间共享变量。尽管似乎在`repaint`内部引入了一个同步屏障，以确保工作线程对 UI 线程所做的更改的可见性，但这是一个偶然的效果，明确地确保可见性是一种更好的做法，例如通过声明变量 volatile .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:24:36.517

问题的原因很可能是由于第一版中“违反”了 AWT 语义。您*不能*在 EDT 之外运行 gui 更新代码。

更新：即使`repaint()`从另一个线程调用该方法是安全的，它所做的只是排队一个将在 EDT 上运行的事件。这意味着在修改椭圆形的线程和正在读取它的线程 EDT 线程之间存在竞争条件。这将导致运动不均匀，因为绘图代码可能会看到与信号代码预期不同的值。

# php - 从属下拉列表

> ID：14369852
> 
> 赞同：0
> 
> 时间：2013-01-16T23:34:51.120
> 
> 标签：php, javascript, ajax

我在一个页面上有三个列表框。第一个可以填充五个不同选项之一。第二个列表框将根据五个列表框之一的选择进行填充。第三个将基于第二个填充。我的第一个工作正常，第二个和第三个有重大问题。这是到目前为止调用和填充的代码。第一个盒子命名为 Doggie，第二个为 Kitty，第三个为 Pig。mydoggie.php 有一个嵌套开关。大小写，然后键入。

```
 $(document).ready(function() {
    $("input:image").click(function(evt) {
        evt.preventDefault();
        display("Doggie", $(this).val());
        })

    $("Doggie").change(function(){
              display("Kitty", $(Doggie).val());
        })

        $("Kitty").change(function(){
              display("Pig", $(Kitty).val());
        });
  });

function display(what, type) {
    $.getJSON("mydoggie.php?ajax=true", { "case": what, "type" : type}, function(data) {
        $("#"+_type_).empty();
        $.each(data, function(index, objRecord) {
            $("#"+_type_).append('<option value="' + objRecord.ID + '">' + objRecord.Name + '</option>');
        });
    });
} 
```

'你可以在 www.menuhead.net/index.php 看到一个几乎可以工作的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:50:50.230

更改`$(document).change`为`$(you kitty id list).change`...

# wpf - IActionCommand 在什么命名空间？

> ID：14369855
> 
> 赞同：1
> 
> 时间：2013-01-16T23:34:57.457
> 
> 标签：wpf

我在这里找到了一个我想做的事情的例子：http: [//csharprambling.wordpress.com/2011/08/15/true-mvvm-by-implementing-event-triggers-for-non-button-base-controls-在银光/](http://csharprambling.wordpress.com/2011/08/15/true-mvvm-by-implementing-event-triggers-for-non-button-base-controls-in-silverlight/)

但是对于我的生活，我似乎无法找出 IActionCommand<> 接口到底在哪里，并且在谷歌上搜索它会出现令人惊讶的少量信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:36:32.650

`IActionCommand<T>`不是框架的一部分，可能是第 3 方 MVVM 库的一部分。（这是许多库中的通用接口，例如[Jounce](http://jounce.codeplex.com/wikipage?title=Commands)。）

# matlab - 将线分成多段

> ID：14369857
> 
> 赞同：-1
> 
> 时间：2013-01-16T23:35:06.813
> 
> 标签：matlab

假设我想将时间线划分为线性增长的部分，范围从 1"（起始值）到 10"（结束值）。如果给出了总和（例如 120"），我想知道每个段的值。我如何在 matlab 中计算？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:37:34.907

~~使用该[`linspace()`](http://www.mathworks.co.uk/help/matlab/ref/linspace.html)功能，正是为了这个目的。~~

# c# - 从页面更新窗口上的文本块

> ID：14369859
> 
> 赞同：0
> 
> 时间：2013-01-16T23:35:09.113
> 
> 标签：c#, wpf

我使用具有一些控件的 WPF 制作了一个小型应用程序。其中一个控件是一个名为 的文本块`Credit`，另一个控件是一个框架，并且在该框架内页面是打开的。例如：SendMessage.xaml

我希望有人帮助我，解释是否有办法按下页面 SendMessage.xaml 内的按钮，并更新包含框架的窗口中的文本块。

我的窗口 xaml

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:testeSMS"
xmlns:Properties="clr-namespace:testeSMS.Properties" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" mc:Ignorable="d"
x:Class="testeSMS.JanelaPrincipal"
x:Name="Window"
Title="JanelaPrincipal"
Width="640" Height="480" WindowStyle="None" BorderThickness="1" ResizeMode="NoResize" WindowStartupLocation="CenterScreen">
<Window.Resources>

    <Style x:Key="ButtonStyle1" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="closeBT">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <local:CloseBT x:Name="closeBT" Foreground="{x:Null}" Opacity="0.3"/>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Content="" OpacityMask="Black"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True"/>
                        <Trigger Property="IsPressed" Value="True"/>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ButtonStyle3" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:0.5"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(TextElement.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="label">
                                            <EasingColorKeyFrame KeyTime="0" Value="#FF33FFFF"/>
                                        </ColorAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Label x:Name="label" Content="Nome da APP by  © Kineth Networks" Foreground="#FF3399FF" FontSize="8"/>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Content=""/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True"/>
                        <Trigger Property="IsPressed" Value="True"/>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="MenuBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#F6F6F6" Offset="0.25"/>
        <GradientStop Color="#EAE8E8" Offset="0.25"/>
        <GradientStop Color="#DCD9D9" Offset="0.8"/>
        <GradientStop Color="White" Offset="1"/>
    </LinearGradientBrush>
    <Style x:Key="MenuStyle1" TargetType="{x:Type Menu}">
        <Setter Property="Background" Value="{StaticResource MenuBackground}"/>
        <Setter Property="FontFamily" Value="{DynamicResource {x:Static SystemFonts.MenuFontFamilyKey}}"/>
        <Setter Property="FontSize" Value="{DynamicResource {x:Static SystemFonts.MenuFontSizeKey}}"/>
        <Setter Property="FontStyle" Value="{DynamicResource {x:Static SystemFonts.MenuFontStyleKey}}"/>
        <Setter Property="FontWeight" Value="{DynamicResource {x:Static SystemFonts.MenuFontWeightKey}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Menu}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMainMenu" Value="True"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="RadPanelBarStyle1" TargetType="{x:Type telerik:RadPanelBar}">
        <Setter Property="KeyboardNavigation.TabNavigation" Value="Local"/>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <telerik:PanelBarPanel IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type telerik:RadPanelBar}">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="OrientationStates">
                                <VisualState x:Name="Vertical">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="(telerik:LayoutTransformControl.LayoutTransform)" Storyboard.TargetName="transformationRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <RotateTransform Angle="0"/>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Horizontal">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="(telerik:LayoutTransformControl.LayoutTransform)" Storyboard.TargetName="transformationRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <RotateTransform Angle="-90"/>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <telerik:LayoutTransformControl x:Name="transformationRoot" IsTabStop="False" Foreground="#FF2D2C2C">
                            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                                <ScrollViewer x:Name="ScrollViewer" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" HorizontalScrollBarVisibility="Auto" IsTabStop="False" Margin="0,-1,0,0" Padding="{TemplateBinding Padding}" VerticalScrollBarVisibility="Auto" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                                    <telerik:StyleManager.Theme>
                                        <telerik:Expression_DarkTheme/>
                                    </telerik:StyleManager.Theme>
                                    <ItemsPresenter/>
                                </ScrollViewer>
                            </Border>
                        </telerik:LayoutTransformControl>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Orientation" Value="Vertical"/>
        <Setter Property="IsTabStop" Value="True"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Foreground" Value="#FFDDDDDD"/>
        <Setter Property="BorderBrush" Value="#FF595959"/>
        <Setter Property="Background" Value="#FF3D3D3D"/>
        <Setter Property="BorderThickness" Value="1"/>
    </Style>
    <Style x:Key="ButtonStyle2" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True"/>
                        <Trigger Property="IsPressed" Value="True"/>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ButtonFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#F3F3F3" Offset="0"/>
        <GradientStop Color="#EBEBEB" Offset="0.5"/>
        <GradientStop Color="#DDDDDD" Offset="0.5"/>
        <GradientStop Color="#CDCDCD" Offset="1"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF707070"/>
    <Style x:Key="ButtonStyle4" TargetType="{x:Type Button}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
        <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" RenderDefaulted="{TemplateBinding IsDefaulted}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" OpacityMask="Black"/>
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="true">
                            <Setter Property="RenderDefaulted" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="ToggleButton.IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ButtonStyle5" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(TextElement.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="label">
                                            <EasingColorKeyFrame KeyTime="0" Value="#FF4FAAFF"/>
                                        </ColorAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Label x:Name="label" Content="[Logout]" Foreground="White" FontSize="10.667"/>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Content=""/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True"/>
                        <Trigger Property="IsPressed" Value="True"/>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Window.Background>
    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="#00F0F0FF" Offset="0"/>
        <GradientStop Color="White" Offset="1"/>
    </LinearGradientBrush>
</Window.Background>
<Window.Effect>
    <DropShadowEffect/>
</Window.Effect>

<Grid x:Name="LayoutRoot">
    <Grid.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFF0F0FF" Offset="0"/>
            <GradientStop Color="White" Offset="1"/>
        </LinearGradientBrush>
    </Grid.Background>
    <Rectangle MouseDown="Rectangle_MouseDown_1" Height="66" VerticalAlignment="Top" Width="639">
        <Rectangle.Stroke>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF1D2D42" Offset="0"/>
                <GradientStop Color="#FF35537A" Offset="1"/>
            </LinearGradientBrush>
        </Rectangle.Stroke>
        <Rectangle.OpacityMask>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="Black" Offset="0"/>
                <GradientStop Color="Black" Offset="1"/>
            </LinearGradientBrush>
        </Rectangle.OpacityMask>
        <Rectangle.Fill>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF1D2D42" Offset="0"/>
                <GradientStop Color="#FF35537A" Offset="1"/>
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Image Height="66" Margin="0,0,477.5,0" Source="logo2.png" Stretch="Fill" VerticalAlignment="Top" OpacityMask="Black">
        <Image.Effect>
            <DropShadowEffect BlurRadius="10" RenderingBias="Quality" ShadowDepth="4"/>
        </Image.Effect>
    </Image>

    <Button Content="Button" Click="Button_Click_1" Height="10" Margin="0,0,6,464" Style="{DynamicResource ButtonStyle1}" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="12"/>
    <Button Content="Button" Click="Button_Click_2" Height="1.667" Margin="0,13.583,20.653,0" Style="{DynamicResource ButtonStyle1}" VerticalAlignment="Top" HorizontalAlignment="Right" Width="9.833"/>

    <Label Content="Nome da App © Kineth Networks" Margin="285.5,0,160.006,-2.96" VerticalAlignment="Bottom" FontSize="9.333" Foreground="#80000000" FontWeight="Bold"/>
    <Frame x:Name="mainFrame" Content=". . ." Margin="0,66,0,23.453" HorizontalAlignment="Right" Width="513" NavigationUIVisibility="Hidden" />
    <DockPanel LastChildFill="False" Margin="0,66,0,0" HorizontalAlignment="Left" Width="125" Background="#FF3D3D3D">
        <telerik:RadPanelBar  Focusable="False" Height="174.5" Width="123" Margin="0,0,0,235.5" telerik:StyleManager.Theme="Expression_Dark" BorderThickness="0" Background="#FF3D3D3D" BorderBrush="Black" VerticalAlignment="Bottom" HorizontalAlignment="Center" Style="{DynamicResource RadPanelBarStyle1}">
            <telerik:RadPanelBarItem DropPosition="Inside" Header="Contactos" Width="123" Background="{x:Null}" BorderBrush="#5A000000" FontWeight="Bold" Margin="0,0,0,1" BorderThickness="1,0,1,1">
                <telerik:RadPanelBarItem Click="RadPanelBarItem_Click_2" Header="Inserir" Width="100" HorizontalAlignment="Left" Margin="0,2,0,0"/>
                <telerik:RadPanelBarItem Click="RadPanelBarItem_Click_5" Header="Listar" Width="100" HorizontalAlignment="Left" Margin="0,1,0,0"/>
            </telerik:RadPanelBarItem>
            <telerik:RadPanelBarItem DropPosition="Inside" Header="Grupos" Width="123" Background="{x:Null}" BorderBrush="#59000000" FontWeight="Bold" Margin="0,0,0,1">
                <telerik:RadPanelBarItem Click="RadPanelBarItem_Click_3" Header="Inserir" Width="100" HorizontalAlignment="Left" Margin="0,2,0,0"/>
                <telerik:RadPanelBarItem Click="RadPanelBarItem_Click_4" Header="Listar" Width="100" HorizontalAlignment="Left" Margin="0,1,0,0" IsExpanded="True"/>
            </telerik:RadPanelBarItem>
            <telerik:RadPanelBarItem DropPosition="Inside" Header="SMS" Width="123" Background="{x:Null}" BorderBrush="#59000000" FontWeight="Bold" Margin="0,0,0,1">
                <telerik:RadPanelBarItem Click="RadPanelBarItem_Click_1" Header="Enviar" Width="100" HorizontalAlignment="Left" Margin="0,2,0,0"/>
            </telerik:RadPanelBarItem>
            <telerik:RadPanelBarItem DropPosition="Inside" Header="Info" Width="123" Background="{x:Null}" BorderBrush="#59000000" FontWeight="Bold" Margin="0,0,0,1">
                <telerik:RadPanelBarItem Header="Historico" Width="100" HorizontalAlignment="Left" Margin="0,1,0,0"/>
                <telerik:RadPanelBarItem Header="Creditos" Width="100" HorizontalAlignment="Left" Margin="0,1,0,0"/>
            </telerik:RadPanelBarItem>
            <telerik:RadPanelBarItem DropPosition="Inside" Header="Pacotes" Width="123" Background="{x:Null}" BorderBrush="#59000000" FontWeight="Bold" Margin="0,0,0,1" BorderThickness="1,1,1,2">
                <telerik:RadPanelBarItem Header="Gerir" Width="100" HorizontalAlignment="Left" Margin="0,1,0,0"/>
            </telerik:RadPanelBarItem>
        </telerik:RadPanelBar>
    </DockPanel>
    <TextBlock  x:Name="labelCredito" Text="0 sms" HorizontalAlignment="Right" Margin="0,51,68,0" VerticalAlignment="Top" Foreground="White" FontFamily="/testeSMS;component/Fonts/#Segoe UI" FontSize="10.667" IsManipulationEnabled="True"/>
    <Label Content="Username:" HorizontalAlignment="Right" Margin="0,30,61.899,0" VerticalAlignment="Top" FontSize="10.667" Foreground="White"/>
    <Label x:Name="lb_username" Content="Son Goku" HorizontalAlignment="Right" Margin="0,30,0,0" VerticalAlignment="Top" Foreground="White" FontSize="10.667" FontWeight="Bold"/>
    <Button Content="Button" HorizontalAlignment="Right" Height="23.959" Margin="0,45,5.5,0" Style="{DynamicResource ButtonStyle5}" VerticalAlignment="Top" Width="49.879" Click="Logout_Butt"/>

</Grid> 
```

打开页面的代码隐藏文件中的方法

```
private void RadPanelBarItem_Click_1(object sender, Telerik.Windows.RadRoutedEventArgs e)
{

    mainFrame.Source = new Uri("SmS_Enviar.xaml", UriKind.Relative);
} 
```

在 SmS_Enviar.xaml 页面上，我有一个方法，当我按下按钮时会执行一些操作，操作完成后，我想更新“JanelaPrincipal”窗口上的标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:48:11.113

您可以为此使用[MVVMLight 的](http://www.galasoft.ch/mvvm/)Messenger 或[中介者模式](http://en.wikipedia.org/wiki/Mediator_pattern)的其他实现。让页面中的代码发送一条消息，并且包含的​​窗口代码订阅该消息。

# javascript - 在 apache 中运行 Node.js？

> ID：14369865
> 
> 赞同：82
> 
> 时间：2013-01-16T23:35:56.613
> 
> 标签：javascript, apache, node.js, webserver

我们在一台机器上安装了一个 Apache Webserver，它也使用 Perl 提供页面服务。

对于一个项目，我决定使用 Node.js 而不是 Perl/Ruby。只是想知道是否可以使用 Apache 作为我的网络服务器（因此它为页面提供服务）并使用 Node.js 动态创建网页（这是针对我正在创建的网络应用程序）？

所以换句话说，它们可以像 Apache/Perl 或 Apache/PHP 等一样齐头并进。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-05-28T11:08:11.277

通过 apache 托管 nodejs 站点可以使用 apache 代理模块进行组织。

最好在 localhost 上使用默认端口 1337 启动 nodejs 服务器

使用命令启用代理：

```
sudo a2enmod proxy proxy_http 
```

**在确保服务器安全之前，请勿使用 ProxyRequests 启用代理。开放式代理服务器对您的网络和整个 Internet 都是危险的。将 ProxyRequests 设置为 Off 不会禁用 ProxyPass 指令。**

配置 /etc/apche2/sites-availables

```
<VirtualHost *:80>
    ServerAdmin admin@site.com
    ServerName site.com
    ServerAlias www.site.com 

    ProxyRequests off

    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    <Location />
        ProxyPass http://localhost:1337/
        ProxyPassReverse http://localhost:1337/
    </Location>
</VirtualHost> 
```

并重新启动 apache2 服务。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-01-18T04:43:12.207

不，NodeJS 不能像 mod-perl 和 mod-php 那样作为 Apache 模块使用，因此无法在“Apache”之上运行节点。正如 hexist 所指出的，可以将 node 作为单独的进程运行并安排两者之间的通信，但这与您已经使用的 LAMP 堆栈完全不同。

作为 Apache 的替代品，如果您有许多同时连接，节点会提供性能优势。还有一个庞大的模块生态系统，几乎可以满足您的任何想法。

从您的问题来看，尚不清楚您是否需要在每个请求上动态生成页面，或者只是定期生成新内容以进行缓存和服务。如果是后者，您可以使用单独的节点任务将内容生成到 Apache 将服务的目录，但同样，这与 PHP 或 Perl 完全不同。

Node 并不是提供静态内容的最佳方式。Nginx 和 Varnish 在这方面更有效。它们可以在 Node 处理动态数据时提供静态内容。

如果您正在考虑将 node 用于 Web 应用程序，那么 Express 应该是您的首选。您可以纯粹在 Node 中实现 Web 应用程序，但 Express（以及 Flatiron、Derby 和 Meteor 等类似框架）旨在消除很多痛苦和乏味。虽然 Express 文档起初看起来有点稀疏，但请查看此处仍然可用的屏幕投射：http: [//expressjs.com/2x/screencasts.html](http://expressjs.com/2x/screencasts.html) 他们会让您很好地了解 express 提供的内容以及原因它是有益的。ExpressJS 的 github 存储库还包含许多很好的示例，涵盖从身份验证到组织应用程序的所有内容。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-10-08T16:06:02.847

虽然这里有很多很好的提示，但我想回答您提出的问题：

> 所以换句话说，它们可以像 Apache/Perl 或 Apache/PHP 等一样齐头并进。

**是的，****如果**您将其作为 CGI 模块运行，您可以在 Apache 上与 Perl 和 PHP 一起运行 Node.js。到目前为止，我无法找到 Apache 的 mod-node，但请查看：此处为 Apache 的 CGI-Node [http://www.cgi-node.org/](http://www.cgi-node.org/)。

[cgi-node](http://www.cgi-node.org/)的有趣之处在于它使用 JavaScript 与使用 PHP 生成动态内容、服务静态页面、访问 SQL 数据库等完全一样。您甚至可以在服务器和客户端/浏览器之间共享核心 JavaScript 库。

我认为客户端和服务器之间向单一语言的转变正在发生，JavaScript 似乎是一个很好的候选者。

来自 cgi-node.org 网站的一个简单示例：

```
<? include('myJavaScriptFile.js'); ?>
<html>
   <body>
      <? var helloWorld = 'Hello World!'; ?>
      <b><?= helloWorld ?><br/>
      <? for( var index = 0; index < 10; index++) write(index + ' '); ?>
   </body>
</html> 
```

这输出：

```
Hello World!
0 1 2 3 4 5 6 7 8 9 
```

您还可以完全访问 HTTP 请求。这包括表单、上传的文件、标题等。

我目前正在通过 Godaddy 上的 cgi-node 模块运行 Node.js。

CGI-Node.org 站点包含所有入门文档。

我知道我对此赞不绝口，但最终使用 PHP 以外的东西是一种解脱。此外，能够在客户端和服务器上编写 JavaScript。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-16T23:48:05.607

做你想做的事情的常用方法是并排运行它们，或者根据域/url代理从 apache 到 node.js 的请求，或者只是让你的 node.js 内容从节点中提取。 js 端口。后一种方法非常适用于在您的网站上拥有诸如 socket.io 驱动的小部件等。

* * *

但是，如果您要在 node 中生成所有动态内容，那么您也可以使用 node.js 作为您的主要网络服务器，它在处理静态和动态 http 请求方面做得非常好。

看：

[http://expressjs.com/](http://expressjs.com/)

[https://github.com/joyent/node/wiki/modules](https://github.com/joyent/node/wiki/modules)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-28T20:12:09.637

你总是可以做一些shell脚本，比如：

```
#!/usr/bin/node

var header = "Content-type: text/plain\n";
var hi = "Hello World from nodetest!";
console.log(header);
console.log(hi);

exit; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-15T20:49:00.687

在进行自己的服务器端 JS 实验时，我最终使用了[teajs](http://code.google.com/p/teajs/wiki/ApacheConfiguration)。它符合[common.js](http://wiki.commonjs.org/wiki/CommonJS)，基于 V8 并且是我所知道的唯一提供 'mod_teajs' apache 服务器模块的项目。

在我看来，Node.js 服务器还没有为生产做好准备，并且缺少太多的特性——Apache 经过了实战考验，并且是执行 SSJS 的正确方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-13T16:50:06.967

如果您使用的是 PHP，您可以通过 shell_exec 将您的请求传递给 Node 脚本，在命令行中将参数作为 JSON 字符串传递给脚本。示例调用：

```
<?php
    shell_exec("node nodeScript.js"); // without arguments
    shell_exec("node nodeScript.js '{[your JSON here]}'"); //with arguments
?> 
```

需要注意的是，当用户数据进入命令行附近时，您需要*非常小心地处理用户数据。*噩梦示例：

```
<?php
    $evilUserData = "'; [malicious commands here];";
    shell_exec("node nodeScript.js '{$evilUserData}'");
?> 
```

# css - 使用动画 gif 作为 CSS 精灵是一个好习惯吗？

> ID：14369868
> 
> 赞同：7
> 
> 时间：2013-01-16T23:36:14.130
> 
> 标签：css, performance, sprite, gif, animated-gif

我有一个网站，当你弹出动画图标`mouseover`时

但我认为这可能会导致浏览器的图形性能不佳。我可以将动画图标放在一个精灵中，而将非动画图标放在另一个中，但有什么意义呢？这样，精灵就不再有用了。您是否建议使用手动为放置在精灵中的图标设置动画的脚本？你的建议是什么？因为我需要一个好的表现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T00:02:07.933

不要猜，*测试！*严重地。只要动画 gif 的尺寸合理，我怀疑这将是一个大问题。但是，找出答案的最佳方法是尝试一下。尝试使用 Chrome 或 Safari 的 Web Inspector 使用各种策略（无动画、动画图标在一个单独的文件中、所有内容都在一个图像中）来分析页面加载时间，看看哪个表现最好。如果没有太大区别，请选择最简单的一个。如果性能成为问题，您可以随时更改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:44:10.500

gif 压缩格式是一种棘手的格式，因为所有空白空间都不会像 jpg 或 png（按位）那样处理。然而，随着动画数量的增加和颜色数量的增加，gif 格式将开始崩溃。您应该做的是根据精灵图像的大小测试各个大小。移动精灵的性能根本不是问题，但正如其他答案所说，您必须使用不同的浏览器和外形尺寸对其进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T00:22:08.987

几乎自万维网 (www) 出现以来，所有主流浏览器都支持动画 GIF；2 几十年前。如果他们对不支持 Lynx 等图形的人的任何现代浏览器摘录有任何担忧，我会感到非常惊讶。

如果帧速率太高，您可能会遇到某些浏览器的问题，但您向我们展示的这些图标显然不是这种情况。

# html - 从 html 文件中发送电子邮件

> ID：14369869
> 
> 赞同：-1
> 
> 时间：2013-01-16T23:36:16.690
> 
> 标签：html, css, email

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:47:33.610

“mailto:”功能在您的默认电子邮件客户端中打开一封新电子邮件。因为看起来您正在使用 GMail，所以我只是在猜测（如果我错了，请纠正我）但是您正在使用 Web 界面来撰写和检查您的 Gmail 邮件，并且没有设置默认的电子邮件客户端。设置您的默认客户端（Outlook、Thunderbird、Mail 等），或者如果您使用 Chrome 网络浏览器，您可以将其设置为默认 gmail 客户端（[将 Gmail 设为默认邮件应用程序](http://support.google.com/mail/bin/answer.py?hl=en&answer=10966)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:44:51.677

查看您使用的是哪个标准电子邮件客户端。在 Firefox 中：选项 > 应用程序 > 过滤器 > 搜索“mailto”。我猜客户列表为空或未设置。

CSS 不能阻止 mailto，但是 JS 可以。

尝试将您的代码放在一个简单的空白 HTML 文件中，然后单击链接：

```
<html>
<head>
</head>

<body>
    <a href= "mailto:me@gmail.com"> Myself </a> 
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:51:20.467

您需要一个处理**URL:Mailto**文件类型的电子邮件客户端。如果没有适当的默认电子邮件客户端，则单击链接时不会发生任何事情。

顺便提一句。mailto 的使用可以扩展为在创建的电子邮件中包含草稿和接收者。

```
<a href="mailto:someone@yoursite.com
    ?cc=someoneelse@theirsite.com, another@thatsite.com, me@mysite.com
       &bcc=lastperson@theirsite.com
           &subject=Big%20News&body=Body-goes-here">mail now</a> 
```

# java - Spring 批处理和 XA 以及本地事务

> ID：14369876
> 
> 赞同：1
> 
> 时间：2013-01-16T23:37:13.197
> 
> 标签：java, spring, transactions, spring-batch, distributed-transactions

春季批处理中可以有一个jobRepository来使用本地事务，但在分布式XA事务中执行特定的作业步骤？

对于 XA，我使用 Atomicos 3.8.0。步骤应该读取 JMS 消息并在处理后更新数据库。

spring配置的相关部分：

```
<job id="job" xmlns="http://www.springframework.org/schema/batch">
     <step id="inventorySync">
         <tasklet transaction-manager="xaTransactionManager">
            <chunk reader="jmsQueueReader"
                   processor="messageProcessor"
                   writer="dbWriter"
                   reader-transactional-queue="true"/>
         </tasklet>
     </step>
</job> 

    <bean id="xaTransactionManager" class="org.springframework.transaction.jta.JtaTransactionManager"
          lazy-init="true" depends-on="inventoryDataSource">
        <constructor-arg name="transactionManager" ref="userTransactionManager"/>
        <constructor-arg name="userTransaction" ref="userTransaction"/>
        <property name="allowCustomIsolationLevels" value="true"/>
    </bean>

<bean id="jobRepository" class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean">
    <property name="dataSource" ref="batchJobsDataSource"/>
    <property name="transactionManager" ref="transactionManager"/>
    <property name="databaseType" value="${batch.data.source.type}"/>
</bean>

    <jdbc:embedded-database id="batchJobsDataSource" type="HSQL"/>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="batchJobsDataSource"/>
    </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:51:44.747

在成功在单元测试中使用 Bitronix 并在生产中成功使用 WebSphere JTA 之前，我已经在所有 3 个资源中使用了 XA 事务。如果批处理数据库与步骤的其余部分有单独的事务管理器，则在任一位置（批处理数据库或步骤）发生故障时，步骤和批处理数据库可能会“不同步” ）。

例如，您可能在步骤（JMS 和 DB）上成功提交，然后在批处理数据库上失败。当您重新开始工作时，它会认为某个步骤不成功，而您的基础执行却是。覆盖同一事务管理器中的所有 3 个资源将防止这种情况发生。

# css - 每一步的css3动画延迟

> ID：14369878
> 
> 赞同：1
> 
> 时间：2013-01-16T23:37:35.190
> 
> 标签：css, jquery-animate

我想用 css3 制作一个滑块，我不想要任何按钮。只是一个滑动 5 个单独图像的无限动画，问题是我想要这样的东西：

加载页面，等待 30 秒然后显示第 2 次等待 30 秒然后显示第 3 次等待 30 秒然后显示第 4 次等待 30 秒然后显示第 5 次等待 30 秒然后首先显示

```
#overflow #banner {
    height: 350px;
    width: 500%;
    background: #fff;
    -webkit-animation:slide-animation 10s infinite;
}

@-webkit-keyframes slide-animation { 
    0% {margin-left: 0;}
    20% {margin-left:-100%;}
    40% {margin-left:-200%;}
    60% {margin-left:-300%;}
    80% {margin-left:-400%;}
    100% {margin-left:0;}
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:43:58.713

使用 css 属性`animation-delay`（`-webkit-animation-delay`或`-moz-animation-delay`）。复制动画并将这些延迟设置为 30s、60s、90s 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:53:10.570

我自己以另一种方式完成了此操作，这是我的示例：

```
-webkit-animation: baloon 10s ease-in-out 3s infinite normal;

@-webkit-keyframes baloon { 
0% { -webkit-transform: translate(0px, 0px); } 
50% { -webkit-transform: translate(50px, 75px); } 
100% { -webkit-transform: translate(0px, 0px); } 
} 
```

第一行的 3s 会在页面加载后开始延迟 3 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:17:00.383

要使初始延迟在 10 秒后添加 30 秒，即设置初始延迟。

要设置重复延迟，您可以使用 javascript 中的 setInterval 函数来更改您想要的每个时间间隔的动画状态。

您可以将此代码用作 css 的跳板：

```
animation-play-state: paused;
-moz-animation-play-state: paused; /* Firefox*/
-webkit-animation-play-state: running; /* Safari and Chrome */
-o-animation-play-state: running; /* Opera */ 
```

使用 javascript，这个函数应该可以解决问题：

```
function changeAnimState() {
    x = 0;
    var banner = document.getElementById("banner");
    if (x%2 == 0) {banner.style.animationPlayState="running";}
    else {banner.style.animationPlayState="paused";};
    x+ = x;
)

window.onload = setInterval(changeAnimState(), 30000); 
```

此代码是针对无前缀动画播放状态的，要添加前缀版本，只需添加：WebkitAnimationPlayState 或 MozAnimationPlayState 或 OAnimationPlayState。

# android - 使用 Robolectrics 框架对 Android 应用程序进行 JUnit 测试

> ID：14369886
> 
> 赞同：0
> 
> 时间：2013-01-16T23:38:50.557
> 
> 标签：android, junit, robolectric

我目前正在 Eclipse ADT 中使用 Robolectrics 进行测试项目，该项目针对我的主要 android 应用程序进行测试。我正在使用 Junit 4。但是，我无法让它工作。谁能指出我的代码中的任何错误。代码如下。我真的很努力。这是错误跟踪：

```
java.lang.RuntimeException: java.lang.NumberFormatException: For input string: "FFFFFF

    "
    at com.xtremelabs.robolectric.res.ResourceLoader.init(ResourceLoader.java:148)
    at com.xtremelabs.robolectric.res.ResourceLoader.setLayoutQualifierSearchPath(ResourceLoader.java:506)
    at com.xtremelabs.robolectric.RobolectricTestRunner.setupApplicationState(RobolectricTestRunner.java:362)
    at com.xtremelabs.robolectric.RobolectricTestRunner.internalBeforeTest(RobolectricTestRunner.java:307)
    at com.xtremelabs.robolectric.RobolectricTestRunner.methodBlock(RobolectricTestRunner.java:285)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.NumberFormatException: For input string: "FFFFFF

    "
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Long.parseLong(Unknown Source)
    at com.xtremelabs.robolectric.res.ColorResourceLoader.convertRawValue(ColorResourceLoader.java:44)
    at com.xtremelabs.robolectric.res.ColorResourceLoader.convertRawValue(ColorResourceLoader.java:9)
    at com.xtremelabs.robolectric.res.ResourceReferenceResolver.processResource(ResourceReferenceResolver.java:29)
    at com.xtremelabs.robolectric.res.ColorResourceLoader.processNode(ColorResourceLoader.java:38)
    at com.xtremelabs.robolectric.res.XpathResourceXmlLoader.processResourceXml(XpathResourceXmlLoader.java:27)
    at com.xtremelabs.robolectric.res.DocumentLoader.loadResourceXmlFile(DocumentLoader.java:58)
    at com.xtremelabs.robolectric.res.DocumentLoader.loadResourceXmlDir(DocumentLoader.java:52)
    at com.xtremelabs.robolectric.res.DocumentLoader.loadResourceXmlDir(DocumentLoader.java:39)
    at com.xtremelabs.robolectric.res.ResourceLoader.loadValueResourcesFromDir(ResourceLoader.java:233)
    at com.xtremelabs.robolectric.res.ResourceLoader.loadValueResourcesFromDirs(ResourceLoader.java:227)
    at com.xtremelabs.robolectric.res.ResourceLoader.loadValueResources(ResourceLoader.java:170)
    at com.xtremelabs.robolectric.res.ResourceLoader.init(ResourceLoader.java:132)
    ... 19 more

   @RunWith(CustomTestRunner.class)
public class AccessActivity_Test{

    private AccessActivity activity;
     private Button signup;
     private Button signupwithFB;

    @Before
    public void setUp() {

        activity = new AccessActivity();
        activity.onCreate(null);
        //MockitoAnnotations.initMocks(this);
        //FrameLayout layout = (FrameLayout) activity.findViewById(R.layout.access_main);
        signup= (Button)activity.findViewById(R.id.btn_signup);
        signupwithFB = (Button) activity.findViewById(R.id.btn_signupFB);
        //frag = Robolectric.shadowOf(activity.getSupportFragmentManager().findFragmentById(R.id.container));
    }

    @After
    public void tearDown() {
    }

    @Test
    public void TestSignUpButton()throws Exception{

        signup.performClick();

    }

    @Test
    public void TestSignUpWithFBButton(){
        signupwithFB.performClick();

    } 
```

这是自定义的 TestRunner：

```
 public class CustomTestRunner extends RobolectricTestRunner {

    public CustomTestRunner(Class<?> testClass) throws InitializationError {
        super(testClass);
        addClassOrPackageToInstrument("com.actionbarsherlock.app.SherlockActivity");
        addClassOrPackageToInstrument("com.actionbarsherlock.app.SherlockFragmentActivity");
    }

    @Override
    protected void bindShadowClasses() {
        super.bindShadowClasses();
        Robolectric.bindShadowClass(ShadowSherlockActivity.class);
        Robolectric.bindShadowClass(ShadowSherlockFragmentActivity.class);
    }
 } 
```

这是活动：

```
public class AccessActivity extends RoboSherlockFragmentActivity {

    private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.access_main);

        // Set up the action bar.
        getSupportActionBar().show();

        getSupportFragmentManager().beginTransaction()
              .replace(R.id.container, new AccessOptionsFragment())
              .commit();
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
            getSupportActionBar().setSelectedNavigationItem(
                    savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        outState.putInt(STATE_SELECTED_NAVIGATION_ITEM,
                getSupportActionBar().getSelectedNavigationIndex());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.main_menu, menu);
        return true;
    }
} 
```

这是片段的代码：

```
public class AccessOptionsFragment extends RoboSherlockFragment implements
        AnimationListener, OnClickListener  {
    // @InjectView(tag = "logo_layout")
    // LinearLayout logo_layout;
    // @InjectView(tag = "signup_layout")
    // LinearLayout signup_layout;
    //result codes if other than standard
    //@InjectView(tag = "signup_layout")LinearLayout signup_layout;

    public final static int LOGIN_REQUESTED = 1;
    public final static int SIGNUP_REQUESTED = 2;
    public final static int SIGNUPFB_REQUESTED = 3;
    public final static int SKIPACCESS_REQUESTED = 4;

    private Animation fadeInAnimation;
.....

.. 
```

谁能给我任何提示哪里出错了？或者任何人有更好的主意？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T12:07:06.107

这可能已经晚了，但是您需要将`android.jar`其作为外部库添加到您的项目中，以便可以使用其类`Robolectric`重新实现它。`Shadow`

您可以在 .jar 文件中找到该 jar 文件`sdk\platforms\android-xx\android.jar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:24:41.703

出于某种原因，Robolectric 没有找到 Android SDK。转到 testProject 的运行配置并将 Enviromnt 变量设置为：

ANDROID_HOME = C:\your\sdk\location

这对我有用。希望有帮助。

# facebook - 将“喜欢”页面的用户与应用用户相关联

> ID：14369888
> 
> 赞同：1
> 
> 时间：2013-01-16T23:38:52.543
> 
> 标签：facebook, facebook-page, facebook-insights

我有一个链接到我的应用程序的页面。这个页面有越来越多的“喜欢”。

我们想知道有多少“喜欢”我们页面的 FB 用户授权了我们的应用程序。

根据[“喜欢”我的 Facebook 页面的查询用户，我](https://stackoverflow.com/questions/5183251/querying-users-who-like-my-facebook-page)似乎无法获取页面的“喜欢者”列表，以便将 FB id 与我的应用程序用户群相关联。

两个问题：

1) 我应该使用现有的 Insights 指标来获取此信息吗？这似乎是一种特殊的“转换”（从页面 - 喜欢者到应用程序 - 用户）。

2）我看到的唯一其他选择是抓取

```
https://www.facebook.com/browse?type=page_fans&page_id=PAGE_ID 
```

有些人认为这违反了 FB TOS（为什么会这样，顺便说一句？）。有没有人有任何其他建议？

3）经过进一步思考，我发现我可以从应用程序中解决这个问题。我应该能够为我的应用用户获得点赞，并查看我的页面是否在其中。谁能验证这是否可行？

非常感谢，韦斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:44:02.130

不，您需要在用户使用您的应用程序时使用用户的访问令牌手动计算，以查看他们是否喜欢该页面 - Facebook 的 API 不会为您提供应用程序的用户列表或喜欢的人列表页面

# scala - Scala Slick 延迟获取

> ID：14369899
> 
> 赞同：14
> 
> 时间：2013-01-16T23:39:52.827
> 
> 标签：scala, slick

我希望能够使用 Slick 从一个非常大的表中获取所有记录。如果我尝试通过 foreach、for 或列表获取来做到这一点；我收到内存不足异常。

有什么方法可以将“游标”与 Slick 或延迟加载一起使用，只在需要时获取对象以减少使用的内存量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:24:13.267

不确定游标是什么意思，但您可以使用分页获取部分数据：

```
query.drop(0).take(1000) will take the first 1000 records

query.drop(1000).take(1000) will take from 1001 to 2000 lines of the table. 
```

但是这个查询效率将取决于你的数据库，如果它支持它，如果表是正确的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T13:40:14.310

您可以使用`iterator`返回迭代器的组合：

```
 val object = Objects.where(...).map(w => w).iterator() 
```

和一个groupby：

```
val chunkSize = 1000
val groupedObjects = objects.grouped(chunkSize)
groupedObjects.foreach {objects => objects.par.map(h => doJob(h))} 
```

正如这个[答案中所建议的](https://stackoverflow.com/questions/6751463/iterate-over-lines-in-a-file-in-parallel-scala)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-17T20:26:32.520

dirceusemighini 的回答是正确的。由于对 Query.list() 的错误假设，几天前我遇到了类似的问题，所以我可以提供更多上下文。来自 Slick 参考：

“查询是使用 Invoker trait（或无参数版本的 UnitInvoker）中定义的方法执行的。Query 有一个隐式转换，因此您可以直接执行任何 Query。最常见的使用场景是将完整的结果集读入严格的使用特殊方法（例如列表）或可以构建任何类型集合的通用方法的集合”

Query.list() 确实将完整的结果集加载到内存中。考虑到这一点，您可以有多种方法来解决您的问题。

# android - 从两个不同的包启动 Activity

> ID：14369900
> 
> 赞同：1
> 
> 时间：2013-01-16T23:39:53.217
> 
> 标签：android, android-intent, android-activity

我有一个项目有两个包*first.pack*和*second.pack*，有两个不同的活动。我正在尝试使用该代码从第一个活动开始第二个活动

```
Intent intent = new Intent(Intent.ACTION_MAIN); 
      intent.setComponent(new ComponentName("second.pack", "second.pack.SecondActivity")); 
      startActivity(intent); 
```

奇怪的是，这段代码已经运行了一段时间，但是在我卸载并重新安装应用程序后，它开始向我返回以下错误：

```
Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {second.pack/second.pack.SecondActivity}; have you declared this activity in your AndroidManifest.xml? 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:45:24.733

确保在 AndroidManifest.xml 文件中已经像这样定义了活动：

```
<activity
      android:name="second.pack.SecondActivity"
      android:label="@string/yor_title"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T05:54:21.670

你有一个项目有 2 个包，但是项目中有多少个应用程序？假设只有一个应用程序。ComponentName的第一个参数是应用程序的包名，与你要调用的activity的包名无关。

因此，如果您只有一个应用程序的包是“first.pack”，而您想从中调用包“second.pack”的活动，那么正确的调用是：

```
Intent intent = new Intent(Intent.ACTION_MAIN); 
  intent.setComponent(new ComponentName("first.pack", "second.pack.SecondActivity")); 
  startActivity(intent); 
```

它停止工作的一个可能原因可能是您更改了应用程序的包（例如，从“second.pack”更改为“first.pack”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T15:13:48.263

当应用程序中有不同的包时，请先执行以下操作：

```
<activity android:name=".Kunal.Android" /> 
```

在 manifest.xml 中声明该活动。

```
Intent intent = new Intent(MainActivity.this,Second package name.class ); 
```

以下是我的代码：

```
switch (position) {
    case 0:
        Intent newActivity = new Intent(MainActivity.this,com.example.owner.listview_1.Kunal.Android.class);
        startActivity(newActivity);
        break;
    case 1:
        Intent newActivity1 = new Intent(MainActivity.this, com.example.owner.listview_1.Kunal.Iphone.class);
        startActivity(newActivity1);
        break;
    case 2:
        Intent newActivity2 = new Intent(MainActivity.this,com.example.owner.listview_1.Kunal.Window.class);
        startActivity(newActivity2);
        break;
} 
```

# scroll - android中的google plus滚动技术

> ID：14369901
> 
> 赞同：0
> 
> 时间：2013-01-16T23:39:54.037
> 
> 标签：scroll, google-plus

我想知道有没有一种方法可以复制 google plus 滚动的工作方式。我特别是在谈论新项目出现在屏幕上的方式，它是延迟的，我猜它添加了一些动画。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:20:52.877

在自定义适配器的 getView 方法中，尝试将以下动画添加到 convertView(list view item)，你应该能够做到这一点..它对我有用

您需要为视图设置一个 TranslateAnimation ，这样就可以解决问题。

```
TranslateAnimation translateAnim = new TranslateAnimation(0, 0, 200, 0 );
listView.clearAnimation();
translateAnim.setDuration(500);   
translateAnim.setFillBefore(true);   
listView.startAnimation(translateAnim); 
```

希望这可以帮助 ：）

# android - 将字符串从 AsyncTask 传递到另一个活动

> ID：14369902
> 
> 赞同：0
> 
> 时间：2013-01-16T23:39:58.567
> 
> 标签：android, android-asynctask, httpclient

我正在尝试使用 HTTPClient 使用 AsyncTask 获取网站的 html 代码并将代码传递回我的主 Activity。

我使用此代码来（尝试）这样做：

```
public class AsyncTaskGet extends AsyncTask<String, String, String>{
    String result;
    InputStream in;

    protected String doInBackground(String... params) {

        try
        {
        HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpRequest  = new HttpGet("http://www.google.fr");
        HttpResponse response = httpClient.execute(httpRequest);

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(null, result), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            if (response != null) {
                in = response.getEntity().getContent(); 
            }
            in.close();
            result = sb.toString();
        }catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }
    }catch(IOException e){
        e.printStackTrace();
    }   
        return result;
    }   

       @Override
        protected void onPostExecute(String result) {
    //Here is one of my problem, I don't know how to get the returned value result as a string.           
        }    
} 
```

这是我的 AsyncTaskGet，因为我尝试了很多无济于事的尝试，我删除了除这部分之外的主要活动中的所有代码。

```
new AsyncTaskGet().execute(); 
```

所以基本上，我想做的是将结果作为字符串返回到我的主要活动中，以便在 TextView 中显示它。现在我希望我的应用程序简单，这样我就可以了解使用 AsyncTasks 的基础知识，我没有检查互联网连接或类似的东西，我在清单上添加了使用互联网的权限（显然

（请放纵一点，因为这是我的第一个应用程序之一）

最后一件事，请原谅我糟糕的英语，不幸的是，我不是你必须看到的以英语为母语的人。

提前，非常感谢！

真挚地 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:51:28.680

最简单的方法是通过构造函数将调用活动传递给 AsyncTask 并创建一个方法，该方法将结果作为活动本身的参数。

```
private Activity mActivity;

public AsyncTaskGet(Activity activity) {
    mActivity = activity;
}

protected void onPostExecute(String result) {
    mActivity.takeItBack(result);           
} 
```

有一些限制：当前代码仅适用于 AsyncTask 和 Activity 之间的 1 对 1 关系，这意味着私有成员变量类型必须是您调用它的 Activity。如果你不希望你需要实现一个接口：

```
// interface
public interface AsyncTaskCallback {
    void takeItBack(String result);
}

// activity
public MyActivity implements AsyncTaskCallback {
    @Override
    public void takeItBack(String result) {
        // do something
    }
}

// AsyncTask
public class AsyncTaskGet extends AsyncTask<String, String, String> {
    private AsyncTaskCallback mCallback;

    public AsyncTaskGet(AsyncTaskCallback callback) {
        mCallback= callback;
    }

    protected void onPostExecute(String result) {
        mCallback.takeItBack(result);           
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:46:26.467

您已经将结果`onPostExecute()`作为`String`. 如果您`AsyncTask`是您的内部类，`Activity`那么您可以将结果设置为`Activity`. 否则，您可以在`Activity`from中调用一个函数`onPostExecute()`来对数据执行您想要的操作。

另外，你的英语不好真的一点也不差:)

# php - PHP array_diff 输出 - 不清楚

> ID：14369909
> 
> 赞同：-2
> 
> 时间：2013-01-16T23:41:28.743
> 
> 标签：php, arrays

这是数组。

```
Array1
(
[439] => dsaffsdfdfdfsffdsf
[379] => 3454
[375] => 3 ///why is it removed in the resulting array?
[436] => Fdsafdfsdf
[432] => 3  /// this one too
[431] => 2
[385] => 499
[434] => 3501
[435] => 2013-01-16
[430] => 1
[440] => fsdzsdaffdsfffdsf
[406] => YES
[438] => 32442344324324234
[376] => 3
)

Array2
(
[376] => 3
[385] => 499
)

array_diff(array1, array2)

result
(
[439] => dsaffsdfdfdfsffdsf
[379] => 3454
[436] => Fdsafdfsdf
[431] => 2
[434] => 3501
[435] => 2013-01-16
[430] => 1
[440] => fsdzsdaffdsfffdsf
[406] => YES
[438] => 32442344324324234
) 
```

在我看来很奇怪。任何的想法？它的去除基于价值？

我只想`Array2`从中删除元素`Array1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:45:47.637

**手册是你最好的朋友：**

*   [array_diff()](http://php.net/manual/en/function.array-diff.php)比较 array1 和 array2 并返回差值。
*   [array_diff_assoc()](http://php.net/manual/en/function.array-diff-assoc.php)比较 array1 和 array2 并返回差值。与 array_diff() 不同，数组键也用于比较。
*   [array_diff_key()](http://php.net/manual/en/function.array-diff-key.php)将 array1 中的键与 array2 中的键进行比较并返回差值。这个函数类似于 array_diff() ，只是比较是在键而不是值上完成的。

# asp.net - 跨站点使用 Asp.Net Membership

> ID：14369910
> 
> 赞同：1
> 
> 时间：2013-01-16T23:41:40.983
> 
> 标签：asp.net, web-services, authentication, asp.net-membership

我在生产上有多个（17）个站点，它们使用 ASP.Net 成员身份来存储用户凭据，现在我计划创建一个通用 Web 服务，它将接受用户名和站点名称，并将密码返回给我纯文本，使用 Web 服务的用户被授权。

现在我想知道如何使用 ASP.Net 成员资格获取密码，有什么方法可以根据网站传递 ASP.Net 成员资格提供程序，并且有了它，我将能够检索密码。

谁能帮我解决这个问题。

# java - Ant：p4sync 文件集

> ID：14369917
> 
> 赞同：0
> 
> 时间：2013-01-16T23:42:40.053
> 
> 标签：java, ant, sync, perforce

我有一个文件集，其中包含我需要强制同步的一堆 .jar 文件。但是，p4sync 任务将视图作为参数，所以我不确定如何将文件集中的文件传递给它。

请注意，我能够做到这一点：

```
<p4sync view="./lib/mod/hello-*" force="true"/> 
```

但这失败了：

```
<p4sync force="true">
   <fileset refid="lib.mod.hello"/>
<p4sync/> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:42:02.130

您可以使用任务将文件集转换为字符串属性`<pathconvert>`，然后将该属性用作`<p4sync>`任务中的视图值，例如：

```
<fileset id="files" dir=".">
    <include name="file1"/>
    <include name="file2"/>
</fileset>
<pathconvert refid="files" pathsep=" " property="view"/>
<p4sync view="${view}" force="true"/> 
```

# html - 在 ServiceMix 中实现 XSLT

> ID：14369918
> 
> 赞同：0
> 
> 时间：2013-01-16T23:42:49.220
> 
> 标签：html, xml, xslt, apache-servicemix

我正在尝试编写一个 xslt，它接受一个 html 页面并对其进行转换，使其仅包含 id 为“content”的 div 标记的内容。我正在使用 Apache ServiceMix 开发一个执行此操作但完全迷失的服务单元！

到目前为止，我已经创建了一个单元（至少我认为它这样做）获取一个文件，应用转换并将其保存到输出文件夹：

```
<?xml version="1.0" encoding="UTF-8"?>
<blueprint
    xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="

http://www.osgi.org/xmlns/blueprint/v1.0.0

      http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

    <camelContext xmlns="http://camel.apache.org/schema/blueprint">
      <route>
        <from uri="file:camel/input"/>
        <log message="Moving ${file:name} to the output directory"/>
        <to uri="xslt:file:///transform.xsl"/>
        <to uri="file:camel/output"/>
      </route>
    </camelContext>

</blueprint> 
```

和一个转换 .xsl 文件：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xhtml="http://www.w3.org/1999/xhtml"
 xmlns="http://www.w3.org/1999/xhtml"
 exclude-result-prefixes="xhtml">
    <xsl:template match="/">
        <html>
            <head><title>HTML Transformation</title></head>
            <body>
                <xsl:copy-of select="//xhtml:DIV[@id='content']"/>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

但它一直抛出这个错误：

```
21:23:50,395 | INFO  | le://camel/input | route3                           | 91 - org.apache.camel.camel-core - 2.8.5 | Moving INPUTFILE.html to the output directory
21:23:50,850 | ERROR | le://camel/input | DefaultErrorHandler              | 91 - org.apache.camel.camel-core - 2.8.5 | Failed delivery for exchangeId: ID-servicemix-48257-1358413760241-2-2137\. Exhausted after delivery attempt: 1 caught: javax.xml.transform.TransformerException: java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd
javax.xml.transform.TransformerException: java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd
    at org.apache.xalan.transformer.TransformerImpl.fatalError(TransformerImpl.java:782)[:]
    at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:756)[:]
    at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:1273)[:]
    at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:1251)[:]
    at org.apache.camel.builder.xml.XsltBuilder.process(XsltBuilder.java:123)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:102)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:72)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.impl.converter.AsyncProcessorTypeConverter$ProcessorToAsyncProcessorBridge.process(AsyncProcessorTypeConverter.java:48)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:114)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:284)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:109)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:90)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:318)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:209)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:306)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:116)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:79)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:139)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:106)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:353)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:176)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:137)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:139)[91:org.apache.camel.camel-core:2.8.5]
    at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:91)[91:org.apache.camel.camel-core:2.8.5]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)[:1.6.0_38]
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)[:1.6.0_38]
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)[:1.6.0_38]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)[:1.6.0_38]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)[:1.6.0_38]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)[:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_38]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_38]
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1459)[:1.6.0_38]
    at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)[:]
    at org.apache.xerces.impl.XMLEntityManager.startEntity(Unknown Source)[:]
    at org.apache.xerces.impl.XMLEntityManager.startDTDEntity(Unknown Source)[:]
    at org.apache.xerces.impl.XMLDTDScannerImpl.setInputSource(Unknown Source)[:]
    at org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)[:]
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)[:]
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)[:]
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)[:]
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)[:]
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)[:]
    at org.apache.xml.dtm.ref.DTMManagerDefault.getDTM(DTMManagerDefault.java:439)[:]
    at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:699)[:]
    ... 45 more 
```

我不知道这意味着什么:(有人可以帮忙吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:53:29.433

正如评论中所讨论的，这里的问题是您正在访问的 HTML 页面中的 DTD 引用了一个不可访问的文件，这导致解析器在尝试访问该文件时失败。

如果 HTML 是您可以修改的，一个可能的解决方案是修改 DTD（看起来 HTML4 松散的 DTD 可以通过以下 URL 访问：[http](http://www.w3.org/TR/html4/loose.dtd) ://www.w3.org/TR/html4/loose.dtd ） . 您正在使用的解析器可能有一个忽略 DTD 的选项，尽管这可能不是最佳选择，因为文档可能使用仅 HTML 实体，例如`&nbsp;`.

# security - 可以通过哪些方式发起中间人攻击？

> ID：14369919
> 
> 赞同：0
> 
> 时间：2013-01-16T23:42:52.283
> 
> 标签：security, cryptography, communication, man-in-the-middle

我正在创建一个遵循服务器/客户端范例的聊天服务程序。该聊天程序既作为聊天服务器又作为聊天客户端存在，用户可以托管聊天室（并将他的客户端连接到该服务器），或者他可以加入现有的聊天室。

客户端通过其他用户将告诉他们的直接 IP 地址（例如从 whatismyip.com 获得）和指定的端口号进行连接。

在此聊天程序中的任何时间，一个用户都可以将文件发送给另一个用户。这是通过要求服务器在两个用户之间建立握手来启动的，用户 A 通过服务器将他的 IP 传递给用户 B，并且用户 B 调用用户 A 为文件传输创建的新服务。这消除了原来的聊天服务器，用户通过使用 nettcp 协议的直接 IP 连接。

在此文件传输中，文件在最初通过 RSA 加密发送 AES 私钥后使用 AES 加密。

我想知道有人可以用什么样的方式在这里发起中间人攻击。显然，我看到了通过服务器将 IP 地址传递给其他用户的缺陷，但现在我看不到任何其他方式，因为我无法让服务器检索发件人的 IPV4。

中间人的攻击方式是不是他可以看到这两个用户正在传输文件，并以某种方式从两端将数据流拉到自己身上？他可以在已经进行的文件传输会话中执行此操作吗？

我试图了解 MITM 攻击的工作方式，以便我可以查看是否可以保护我的程序免受此类攻击......但如果唯一可靠的方法是使用证书颁发机构（我仍在学习关于），请继续告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:14:44.320

在进行了更多搜索之后，我发现这个很棒的链接解释了不同类型的 MITM 攻击以及它们是如何工作和执行的非常详细。

[http://www.windowsecurity.com/articles/Understanding-Man-in-the-Middle-Attacks-ARP-Part1.html](http://www.windowsecurity.com/articles/Understanding-Man-in-the-Middle-Attacks-ARP-Part1.html)

一共有四个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T05:25:30.300

> 中间人的攻击方式是不是他可以看到这两个用户正在传输文件，并以某种方式从两端将数据流拉到自己身上？他可以在已经进行的文件传输会话中执行此操作吗？

您需要定义一个威胁模型。通常的嫌疑人是消息插入、删除、篡改和重新排序。有时攻击者只需要篡改一条消息，这样你就做错了。例如，他/她可能需要稍微翻转一下，以便“将 100 美元从 A 转移到 B”更改为“将 900 美元从 A 转移到 B”。在这种情况下，攻击者不需要在中间或解密消息。

* * *

> 我正在尝试了解 MITM 攻击的工作方式，以便我可以查看是否可以保护我的程序免受此类攻击......但如果唯一可靠的方法是使用证书颁发机构（我仍在学习关于），请继续告诉我。

与其尝试设计一个强化的协议，也许您可​​以使用一个已经存在的协议来解决您的问题。

该协议将是 Z 实时传输协议 (ZRTP)。该协议在 RFC 6189, [ZRTP: Media Path Key Agreement for Unicast Secure RTP](https://www.rfc-editor.org/rfc/rfc6189)中指定。

ZRTP 是一种密钥交换协议，其中包括短身份验证字符串 (SAS) 以阻止中间人攻击。本质上，SAS 是一种只需要执行一次的语音认证。您可以省略 SAS 检查，但不建议这样做。如果您省略了检查*并且*坏人没有攻击，那么对于当前和未来的会话来说一切正常。

一旦您建立了第一个没有对抗性篡改的安全通道，所有未来的会话都将是安全的，因为当前会话的密钥协议依赖于早期会话。并且已知最早的会话（第一个会话）是安全的。

ZRTP 还提供前向保密，因此当前会话的妥协不会影响过去会话的安全性。

ZRTP 不需要认证机构或其他（不）受信任的第三方。

Matthew Green 博士在他的密码学工程网站[Let's talk about](http://blog.cryptographyengineering.com/2012/11/lets-talk-about-zrtp.html) ZRTP 上有一篇关于 ZRTP 的博客。

要回答您关于 MitM 的问题，Stack Overflow 的答案太多了。一本很棒的免费书籍是 Peter Guttman 的[Engineering Security](https://www.cs.auckland.ac.nz/%7Epgut001/pubs/book.pdf)。MitM 有时是攻击者的目标，但它不是他/她唯一的载体。Guttman 的书着眼于许多威胁、人类如何行动和反应、攻击者成功的原因以及如何围绕许多问题进行设计。

# jquery - jquery逻辑不工作

> ID：14369920
> 
> 赞同：1
> 
> 时间：2013-01-16T23:42:59.117
> 
> 标签：jquery, html, logic

我有以下代码，我想要的逻辑如下：

1.  用户不能两次选择一项运动。用户可能将运动保存在数据库中，考虑到这一点，数据库记录将被加载并显示，并且只要它们没有出现在列表中，用户就可以添加其他运动。现在我已经将 Baseball 设置为来自数据库，但是当我再次选择它时，我的逻辑是允许用户再次添加它。我做错了什么？

JSFIDDLE：http: [//jsfiddle.net/Jrqqq/](http://jsfiddle.net/Jrqqq/)

```
 var allVals = [{ id: 1, value: "Baseball"}];

     $.each(allVals, function (k, v) {
         $("#results").append("<label class=\"wList\"><input checked=\"checked\" class=\"wList-chk\" name=\"wList[]\" type=\"checkbox\" value=\""
         + v.id
         + "\">"
         + v.value
         + "</label>");
     });

     $(function () {
         var sports = [{ id: 1, value: "Baseball" },
                    { id: 2, value: "Soccer" },
                    { id: 3, value: "Basketball" },
                    { id: 4, value: "Volleyball" },
                    { id: 5, value: "Tennis" },
                    { id: 6, value: "Running" },
                    { id: 7, value: "Swimming"}];

         $("#sports").autocomplete({
             source: sports,
             select: function (event, ui) {

                 if ($.inArray(ui.item.id, allVals) == -1) {
                     allVals.push(ui.item.id);
                     $("#results")
                                 .append("<label class=\"wList\"><input checked=\"checked\" class=\"wList-chk\" name=\"wList[]\" type=\"checkbox\" value=\""
                                 + ui.item.id
                                 + "\">"
                                 + ui.item.value
                                 + "</label>");
                     $('input.wList-chk[type="checkbox"][value="' + ui.item.id + '"]').parent().effect('highlight', {}, 1500);
                     ui.item.value = "";
                 }
                 else {
                     ui.item.value = "";
                     $('input.wList-chk[type="checkbox"][value="' + ui.item.id + '"]').parent().effect('highlight', {}, 1500);
                 }
             }
         });
     });

     $(document).on("change", ".wList-chk", function () {
         if ($(this).attr('checked')) {
             return;
         } else {
             var thisVal = $(this).val();
             var index = $.inArray(thisVal, allVals);
             allVals.splice(index, 1);
             $(this).parent('.wList').remove();
         }
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:57:04.357

看起来您没有将棒球 id 添加到`allVals`数组中。

# c# - C# 尝试捕获重新抛出堆栈跟踪

> ID：14369921
> 
> 赞同：3
> 
> 时间：2013-01-16T23:43:03.667
> 
> 标签：c#, exception, try-catch, stack-trace, throw

> **可能重复：**
> [重新抛出错误的堆栈跟踪](https://stackoverflow.com/questions/4217616/incorrect-stacktrace-by-rethrow)

我读了这个问题[Why catch and rethrow an exception in C#?](https://stackoverflow.com/questions/881473/why-catch-and-rethrow-exception-in-c) 关于之间的差异

```
try {
  // do stuff that might throw an exception
} catch (Exception e) {
  throw e; // this destroys the strack trace information!
} 
```

和

```
try {
  // do stuff that might throw an exception
} catch (Exception e) {
  throw ; //this preserves the stack trace
} 
```

由此我假设 Main 方法中的 ex.StackTrace 将指向与 Division 方法中的 ex.StackTrace 相同的代码行。但这并没有发生。为方便起见，我标记了第 33 行和第 40 行。

如果我`throw`将 Division 方法中的更改为`throw ex`我会看到相同的输出，如下所示。上面链接的问题讨论了这两个`throw`s 之间的区别，但我认为输出没有区别。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ExceptionTests
{
    class Program
    {
        static void Main(string[] args)
        {
            BadMath b = new BadMath();
            try
            {
                int result =  b.Division(2, 0);
            }
            catch (Exception ex)
            {
                System.Console.WriteLine("\n\nException caught in Main Method");
                System.Console.WriteLine(ex.Message);
                System.Console.WriteLine(ex.StackTrace);
            }
        }
    }

    class BadMath
    {
        public int Division(int a, int b)
        {
            try
            {
    LINE 33      return a / b;
            }
            catch (DivideByZeroException ex)
            {
                System.Console.WriteLine("DivideByZeroException caught in Division Method");
                System.Console.WriteLine(ex.Message);
                System.Console.WriteLine(ex.StackTrace);
    LINE 40     throw;
            }
        }
    }
} 
```

**输出**

```
DivideByZeroException caught in Division Method
Attempted to divide by zero.
   at ExceptionTests.BadMath.Division(Int32 a, Int32 b) in c:\testdev\ExceptionT
ests\ExceptionTests\Program.cs:line 33

Exception caught in Main Method
Attempted to divide by zero.
   at ExceptionTests.BadMath.Division(Int32 a, Int32 b) in c:\testdev\ExceptionT
ests\ExceptionTests\Program.cs:line 40
   at ExceptionTests.Program.Main(String[] args) in c:\testdev\ExceptionTests\Ex
ceptionTests\Program.cs:line 16 
```

**解决方案**

这个问题在上面的例子中并不明显，但在下面的例子中很明显。

```
namespace ExceptionTests
{
    class Program
    {
        static void Main(string[] args)
        {
            BadMath b = new BadMath();
            try
            {
                int result =  b.Division(2, 0);
            }
            catch (Exception ex)
            {
                System.Console.WriteLine("\n\nException caught in Main Method");
                System.Console.WriteLine(ex.Message);
                System.Console.WriteLine(ex.StackTrace);
            }
        }
    }

    class BadMath
    {
        public int Division(int a, int b)
        {
            try
            {
                return DoDivision(a, b);
            }
            catch (DivideByZeroException ex)
            {
                System.Console.WriteLine("DivideByZeroException caught in Division Method");
                System.Console.WriteLine(ex.Message);
                System.Console.WriteLine(ex.StackTrace);
                throw ;
                //throw ex ;
            }

        }

        public int DoDivision(int a, int b)
        {
            return a / b;
        }
    }
} 
```

`output when using throw`

```
Exception caught in Main Method
Attempted to divide by zero.
   at ExceptionTests.BadMath.DoDivision(Int32 a, Int32 b) in c:\testdev\Exceptio
nTests\ExceptionTests\Program.cs:line 47
   at ExceptionTests.BadMath.Division(Int32 a, Int32 b) in c:\testdev\ExceptionT
ests\ExceptionTests\Program.cs:line 40
   at ExceptionTests.Program.Main(String[] args) in c:\testdev\ExceptionTests\Ex
ceptionTests\Program.cs:line 16 
```

`output when using throw ex`

```
Exception caught in Main Method
Attempted to divide by zero.
   at ExceptionTests.BadMath.Division(Int32 a, Int32 b) in c:\testdev\ExceptionT
ests\ExceptionTests\Program.cs:line 40
   at ExceptionTests.Program.Main(String[] args) in c:\testdev\ExceptionTests\Ex
ceptionTests\Program.cs:line 16 
```

# javascript - 从多个窗口打开 javascript 弹出窗口不会将值返回到正确的窗口

> ID：14369922
> 
> 赞同：1
> 
> 时间：2013-01-16T23:43:07.997
> 
> 标签：javascript, asp.net

我有 3 个窗口/页面。

Page1 是一个基本网页，当单击按钮时，它会通过 javascript 打开一个弹出窗口

Page2 与第一页类似，只是在不同的页面上。

Page3（又名弹出窗口）是 Page1 和 Page2 可以打开的实际弹出窗口。

Page1 和 Page2 使用类似的 javascript 打开弹出窗口（Page3）。javascript看起来像这样......

```
 function openPopup() {

        popupwindow = window.open(Page3Url, title, options, true);
        popupwindow.focus();

        var unloadFunc = function () {
                self.focus();                  
                $('#txtBox').val(popupwindow.$('#SomeTextBoxValueINeed').val());
            }
        };

        popupwindow.attachEvent('onbeforeunload', unloadFunc);                         
    } 
```

我还应该提到弹出窗口 (Page3) 有一个提交按钮，该按钮将回发到服务器并将一些 window.close() javascript 注入 ScriptManager 以关闭页面。

如果我从 Page1 打开弹出窗口并提交弹出窗口，我的“unloadFunc”会被调用，一切正常。

从 Page2 打开 Page3 也是如此。

问题是如果我从 Page1 打开弹出窗口并且不关闭弹出窗口然后我从 Page2 打开弹出窗口，弹出窗口将被刷新就好了，但是当我提交弹出窗口时，我的 unloadFunc 没有被调用，我没有知道为什么。有什么想法吗？！

提前致谢！任何帮助，将不胜感激！

# c# - NHibernate 映射异常。没有持久性：NHibernateTesting.Account

> ID：14369924
> 
> 赞同：5
> 
> 时间：2013-01-16T23:43:26.313
> 
> 标签：c#, .net, nhibernate, unit-of-work

我只是想开始学习 NHibernate，在使用极其简单的 POCO 进行测试时，我已经遇到了问题。我得到了 No Persister 异常，这是我的代码的样子：

`Account`桌子：

```
create table Account
(
    AccountID int primary key identity(1,1),
    AccountName varchar(10),
    CreateDate datetime
)
go 
```

`Account`班级：

```
public class Account
{
    public virtual int AccountID { get; set; }
    public virtual string AccountName { get; set; }
    public virtual DateTime CreateDate { get; set; }

    public Account()
    {
        AccountID = 0;
        AccountName = "";
        CreateDate = new DateTime();
    }
} 
```

映射文件，`Account.hbm.xml`（是的，它嵌入到程序集中）：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   namespace="NHibernateTesting" assembly="NHibernateTesting">
  <class name="Account" table="Account">
    <id name="AccountID">
      <generator class="native"/>
    </id>
    <property name="AccountName" />
    <property name="CreateDate" />
  </class>
</hibernate-mapping> 
```

配置文件中的配置部分：

```
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property>
      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="connection.connection_string">My connection string</property>

      <mapping assembly="NHibernateTesting" />

    </session-factory>
</hibernate-configuration> 
```

最后，进行调用的代码：

```
using (var session = NHibernateHelper.GetASession())
{
    using (var tran = session.BeginTransaction())
    {
        var newAccount = new Account();
        newAccount.AccountName = "some name";

        session.Update(newAccount); // Exception thrown here.

        tran.Commit();
    }
} 
```

谁能看到我做错了什么或者为什么我会得到这个异常，我在网上读到这个问题与映射有关，但我看不出这个例子有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T05:35:16.723

我已经复制了您展示的所有映射和代码，并且它正在工作。除了：

```
var newAccount = new Account(); // NEW
...
session.Update(newAccount); // Update throws exception: 
```

> NHibernate.StaleStateException：批量更新从更新返回了意外的行数；实际行数：0；预期：1

新对象必须通过以下方式保存：`session.Save(newAccount);`

当您说映射文件被标记为嵌入式资源时……很难说到底出了什么问题。请尝试仔细阅读此链接（并重新检查您的项目），并提供关于**No persister**异常的非常好的经验链：

*   [NHibernate.MappingException：没有持久性：](https://stackoverflow.com/q/57804/1679310)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-18T12:27:56.103

出现此错误是因为映射配置无效。您应该检查为会话工厂设置 .Mappings 的位置。基本上在您的项目中搜索“.Mappings(”并确保您在下面的行中指定了正确的实体类。

```
.Mappings(m => m.FluentMappings.AddFromAssemblyOf<YourEntityClassName>()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T07:18:16.540

我通过将列名更改为**Id**解决了这个错误。正如我第一次完成**TemplateId**所以它显示了这个错误但是当我将字段更改为**Id**时它得到了解决。因此，nhibernate 或 Orchard 要求将身份字段或主键作为**Id**。

# c# - 处理 SocketError ConnectionReset

> ID：14369926
> 
> 赞同：2
> 
> 时间：2013-01-16T23:43:34.290
> 
> 标签：c#, sockets

我们有 C# socketserver，它是`SocketAyncEventArgs`基于松散地基于 MS 示例开发的：[SocketAyncEventArgs 示例](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx)。

最近我们的套接字服务器出现问题，它根本不接受新连接。但是在重新启动服务后它工作了。它经常发生。

当我查看日志时，我在自行连接时看到很多连接重置错误。

# jquery - Behance API Ajax 加载内容

> ID：14369927
> 
> 赞同：0
> 
> 时间：2013-01-16T23:43:40.250
> 
> 标签：jquery, ajax, json, api

我试图让以下代码工作，以便在选择图像时将项目内容加载到页面中。I have the images loading from the behance api, but I am struggling with the second bit when the a is selected it should take the url from the page and add it to the JSON to load each project content into the page. 谁能看到我在哪里

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script> 
$(document).ready(function(){
var jqxhr;
jqxhr = $.getJSON("http://www.behance.net/v2/users/USER/projects?api_key=KEY&callback=?", function(data) {
    var project_str = "";
    for(var i=0; i<  data.projects.length; i++){
        obj = {};
          obj = data.projects[i];
project_str += '<a class="link" href="#' + obj.id  + '"><img src="' + obj.covers['404'] + '" /></a>';       }
    $('#behance_container div').append(project_str);
});
          });

$('a.link').click(function(){
var hash = location.hash.replace("#","");
var jqxhri;
jqxhri = $.getJSON("http://www.behance.net/v2/projects/' + hash + '?api_key=KEY&callback=?", function(data) {
    $('#behance_header h3').html(data.project.name);
    var project_data = '<p>' + data.project.description + '</p>';       
    $('#behance_project').html(project_data);   });
        });
</script>
</head>
<body>
    <div id='behance_container'>
    <div></div>  
    </div>
    <div id='behance_header'><h3></h3><p></p></div> <div id='behance_project'></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:59:51.067

您正在定义`getBehanceProject(id)`接受一个`id`参数并且您在函数中使用该参数，但是当您调用该函数时，您不会传递一个`id`参数。

此外，在 中`getBehanceProject(id)`，您将定义一个名为`id`too 的局部变量，这不应该是。

您应该解决的第一件事是在调用时将所需的 id 传递`getBenhanceProject()`给它。

* * *

其次，您需要意识到这`addBehance()`是异步的。它会在你调用它之后完成一段时间。因此，在您当前的代码中，您将`getBehanceProject()`在 AJAX 调用`addBehance()`完成之前调用，这可能会导致您的代码出现问题。

# c# - WPF“找不到绑定源”与 ContentPresenters 和 UserControl

> ID：14369932
> 
> 赞同：0
> 
> 时间：2013-01-16T23:44:01.337
> 
> 标签：c#, .net, wpf, data-binding, binding

我有一个：

> System.Windows.Data 错误：4：找不到与引用“ElementName = Test”进行绑定的源。绑定表达式：路径=值；数据项=空；目标元素是 'Slider' (Name=''); 目标属性是“值”（类型“双”）

在非常特殊的情况下出错。我虽然关于名称范围问题，但我不知道如何解决它。

考虑以下 WPF 应用程序：

**MyUserControl.xaml**：

```
<UserControl x:Class="WpfApplication1.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Label Grid.Row="0" Content="Move me !"/>
        <Slider x:Name="Test" Grid.Row="0" Grid.Column="1" />
        <Label Grid.Row="1" Content="Binded slider"/>
        <ContentPresenter Grid.Row="1" Grid.Column="1">
            <ContentPresenter.Content>
                <Slider Value="{Binding Value, ElementName=Test}"/>
            </ContentPresenter.Content>
        </ContentPresenter>
    </Grid>
</UserControl> 
```

**MyUserControl.xaml.cs**：

```
using System.Windows.Controls;

namespace WpfApplication1
{
    public partial class MyUserControl : UserControl
    {
        public MyUserControl()
        {
            InitializeComponent();
        }
    }
} 
```

**MainWindow.xaml**：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Title="MainWindow" Width="300" Height="120">

    <StackPanel>
        <Button Click="Button_Click" Content="Click me to show Sliders !" Height="25"/>
        <ContentPresenter x:Name="contentPresenter"/>
    </StackPanel>
</Window> 
```

**MainWindow.xaml.cs**：

```
using System.Windows;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        private MyUserControl myUserControl;

        public MainWindow()
        {
            InitializeComponent();

            myUserControl = new MyUserControl();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            contentPresenter.Content = myUserControl;
        }
    }
} 
```

给定 MyUserControl.xaml 的代码，我希望绑定的滑块与第一个滑块具有相同的值。

但什么也没有发生。

现在，棘手的部分：启动应用程序，单击按钮，移动第一个滑块，打开“WPF Inspector”并将其附加到应用程序。结果：绑定已修复。

你如何解释这种现象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:42:20.133

这会成功的

```
 <!--<ContentPresenter Grid.Row="1" Grid.Column="1">
        <ContentPresenter.Content>-->
            <Slider Value="{Binding Value, ElementName=Test}" Grid.Column="1" Grid.Row="1"/>
        <!--</ContentPresenter.Content>
    </ContentPresenter>--> 
```

因为 Slider 在内容演示者内部，所以您无法访问它的值。您需要绑定到相同的 viewmodel 属性来实现这一点，同时将它放在内容呈现器中。

**编辑**

[获取 Prism](http://www.microsoft.com/en-us/download/details.aspx?id=28950)并使用 ViewModel...我不会详细说明...但是您需要做的是...

下载所有内容后，将`Microsoft.Practices.Prism`dll 添加到您的项目中

创建一个新类（ViewModel）。将其命名为您想要的任何名称。我打电话给我`MyUserControlViewModel`，让它看起来像这样

```
using Microsoft.Practices.Prism.ViewModel;

namespace YourNamespace
{
    public class MyUserControlViewModel : NotificationObject
    {
        private double _sliderValue;

        public double SliderValue
        {
            get { return _sliderValue; }
            set
            {
                _sliderValue = value;
                RaisePropertyChanged(() => SliderValue);
            }
        }

    }
} 
```

像这样更改用户控件中的 XAML

```
<Slider x:Name="Test" Grid.Row="0" Grid.Column="1" Value="{Binding SliderValue, Mode=TwoWay}"/>        
<ContentPresenter Grid.Row="1" Grid.Column="1">
    <ContentPresenter.Content>
        <Slider Value="{Binding SliderValue}"/>
    </ContentPresenter.Content>
</ContentPresenter> 
```

并将这行代码添加到您的 MyUserControl.cs 文件中

```
DataContext = new MyUserControlViewModel(); 
```

现在 ViewModel 接管了繁重的工作......您将第一个滑块的值绑定到属性`SliderValue`（`Mode=TwoWay`表示此控件可以设置和获取属性的状态）并且您已将另一个滑块绑定到相同`SliderValue`的它与第一个同步移动

希望这可以帮助

# audio - 如何在通话期间播放只有我才能听到的声音/音频文件？

> ID：14369934
> 
> 赞同：1
> 
> 时间：2013-01-16T23:44:07.900
> 
> 标签：audio, notifications, phone-call, playing

我正在开发一个正在检查切换性能的 Android 应用程序。它应该在通话期间播放声音/通知（执行切换时），**但只有我能听到。**我知道不可能为双方播放声音，但我的情况不同。有时在通话过程中，我们可以听到传入的短信通知或类似的东西。所以可以做到。

我创建了测试无限循环，它在通话期间播放声音，但它不起作用。声音仅在通话后播放。下面有一些我的代码：

```
private PhoneStateListener callListener = new PhoneStateListener() {
      public void onCallStateChanged(int state, String incomingNumber) {
          try {
              switch (state) {
                    case TelephonyManager.CALL_STATE_RINGING:
                        System.out.println("Polaczenie przychodzace");
                        break;
                    case TelephonyManager.CALL_STATE_OFFHOOK:
                        System.out.println("Polaczenie wychodzace");

                          Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                          Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);

                        while(true)
                          {
                              r.play();             
                          }

                    case TelephonyManager.CALL_STATE_IDLE:
                        break;
                    default:
              }
          } catch (Exception e) {
          }
      }
}; 
```

我应该改变什么？

# .net - 有没有办法改变菜单条悬停突出显示颜色？

> ID：14369940
> 
> 赞同：1
> 
> 时间：2013-01-16T23:44:34.523
> 
> 标签：.net, vb.net, winforms, visual-studio-2010, gdi

> **可能重复：**
> [如何更改菜单悬停颜色 - WINFORMS](https://stackoverflow.com/questions/9260303/how-to-change-menu-hover-color-winforms)

当您将鼠标悬停在 .net 中使用菜单条时，它会在其上方添加一个蓝色突出显示。所以我想知道是否可以将突出显示颜色更改为不同的颜色/样式？

我猜你可以使用 OnPaint() 方法覆盖它，但我不知道从那里去哪里。

我正在使用 vb.net 和 WinForms。

# jquery - jQuery 在调整浏览器大小时表现得像媒体查询？

> ID：14369944
> 
> 赞同：0
> 
> 时间：2013-01-16T23:45:11.183
> 
> 标签：jquery, media-queries

我已经为此苦苦挣扎了一段时间。基本上我有一个特定高度的 div (#memberrevealwrapper)，除非视口的宽度小于 790px，否则它是另一个高度。（这是一个响应式网页设计）

现在，#memberrevealwrapper 使用 jQuery 进行动画处理，使其功能类似于单击时从浏览器顶部出现的拉动选项卡，然后再次单击并回滚。

这是我的 jQuery：

```
<script>
    $(document).ready(function() {
        $('#memberloginrevealwrapper').animate({ marginTop: '-75px'}, 200);
        $('#memberloginlink a').toggle(
            function(){
                $('#memberloginrevealwrapper').animate({ marginTop: '0' }, 500);
            },
            function(){
                $('#memberloginrevealwrapper').animate({ marginTop: '-75px'}, 500);
            }
        );
    });

    $(document).ready(function(){
        var pageWidth = $(window).width();  

        if ( pageWidth <= 790 ) {

            $('#memberloginrevealwrapper').animate({ marginTop: '-147px' }, 200);
            $('#memberloginlink a').toggle(
                function(){
                    $('#memberloginrevealwrapper').animate({ marginTop: '0' }, 500);
                },
                function(){
                    $('#memberloginrevealwrapper').animate({ marginTop: '-147px'}, 500);
                }
            );

        }; 
    });

</script> 
```

在您调整浏览器大小之前，这非常有效。当您调整浏览器大小时，它没有找到新的高度并重新调整高度。

这是正在运行的网站：clients.januarycreative.com/PES。我指的是页面顶部的“会员登录”选项卡。

任何人都知道如何在调整浏览器大小时让 jQuery 刷新？我已经尝试了所有我知道的方法，并且已经完成了从切断页面到使页面连续多次像篮球一样弹跳的所有事情。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:52:15.707

当浏览器调整大小时，您需要重新运行代码。您在那里所拥有的只是在页面加载时运行代码一。您需要一个**循环**（技术上是一个随着页面调整大小而反复触发的事件）。

干得好：

```
function updateSize() {
    var pageWidth = $(window).width();  

    if ( pageWidth <= 790 ) {
        $('#memberloginrevealwrapper').animate({ marginTop: '-147px' }, 200);
        $('#memberloginlink a').toggle(
            function(){
                $('#memberloginrevealwrapper').animate({ marginTop: '0' }, 500);
            },
            function(){
                $('#memberloginrevealwrapper').animate({ marginTop: '-147px'}, 500);
            }
        );
    }
}

$(window).resize(updateSize); 
```

# c++ - WSO2 C++ 客户端应用程序在调用 Environment::initialize 方法时崩溃

> ID：14369946
> 
> 赞同：1
> 
> 时间：2013-01-16T23:45:23.120
> 
> 标签：c++, visual-studio-2010, wso2

我正在使用 WSO2 框架为我的一个项目编写基于 C++ 的 Web 服务。我能够安装框架、运行轴服务器并使用示例客户端程序对其进行测试。

当我尝试自己编写客户端时，代码编译时没有任何问题或警告。但是，应用程序在运行时崩溃而没有正确的消息。我尝试放置一些控制台 std::count 并发现崩溃是在调用 Environment::initialize 方法期间发生的。请参阅下面的客户端代码。这几行代码构成了整个客户端应用程序，因此没有遗漏任何代码。

`int main(int argc, char *argv[]){`

 ````
ServiceClient * sc;
Environment::initialize("hello.log", AXIS2_LOG_LEVEL_TRACE);
string end_point = "http://localhost:9090/axis2/services/hello";
sc = new ServiceClient(end_point);
OMElement * payload = new OMElement("greet");
payload->setText("Hello Service!");
try
{
   OMElement* response = sc->request(payload, "");
    if (response)
    {
        cout << endl << "Response: " << response << endl;
    }
}
catch (AxisFault & e)
{
    if (sc->getLastSOAPFault())
    {
        cout << endl << "Fault: " << sc->getLastSOAPFault() << endl;
    }
    else
    {
        cout << endl << "Error: " << e << endl;
    }
}
delete payload; 
```` 

`}`

我将 Visual Studio 2010 用于 IDE 和编译器。我已经包含了所有头文件和必要库的路径 [axutil.lib;axiom.lib;axis2_parser.lib;axis2_engine.lib;wso2_wsf.lib;]。

代码编译在调试和发布模式下都没有问题。应用程序在运行时崩溃。

任何帮助是极大的赞赏。

提前谢谢你，普拉迪普。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T00:25:13.037

根据[这个线程](http://wso2.com/forum/thread/9797)：

> 当您将发布二进制文件链接到调试二进制文件时，会出现此问题。调试构建和发布构建的内存结构不同，有时这会导致问题。最好的办法是在启用调试的情况下构建 WSF/CPP。那么问题应该会消失。或者您可以将您的示例构建为发布版本。

所以这给你留下了两个选择：

*   在发布模式下编译。
*   Rebuild WSO2 WSF/C++ with debug enabled. You can activate this option in the `configure.ini` file (or files) in the source project.

# java - Spring 3 MVC：将 java mimemessage 电子邮件显示为 html

> ID：14369948
> 
> 赞同：0
> 
> 时间：2013-01-16T23:45:25.563
> 
> 标签：java, spring-mvc, jakarta-mail, mime-message

我做了一些搜索，虽然我可以找到很多关于如何用 Java 发送电子邮件的好帖子，但我找不到一个很好的起点来展示它们。这是交易，我的 Spring 3 web-app 刚刚收到一个类型的对象，

```
javax.mail.internet.MimeMessage 
```

（更准确地说，它只是构建了一个现在可以读取发送。）

我将如何在 HTML 中显示该消息的预览？我知道我可以跟踪放入其中的所有内容，但是有页眉和页脚、签名等组件，这些组件超出了我的能力范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:44:18.577

如果您关心的是遍历大量字段，为什么不使用`ObjectMapper`? 例如，`org.springframework.web.servlet.view.json.MappingJacksonJsonView`可以将 JSON 数据发送到 UI，并且还可以让 UI 负责呈现该数据。

您可以将其传递给```：

```
<bean id="contentNegotiatingViewResolver"
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver"
    p:defaultContentType="text/html">       
    <property name="mediaTypes">
        <map>
            <entry key="xml" value="application/xml" />
            <entry key="json" value="application/json" />
            <entry key="${mimeKey}" value="${mimeMessageType} />
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView"
                p:objectMapper-ref="objectMapper" />
            <bean class="org.springframework.web.servlet.view.xml.MarshallingView"
                p:marshaller-ref="objectMarshaller" />
        </list>
    </property>
    ...
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:18:11.023

处理所有案件是一项艰巨的任务。[JavaMail 第三方产品](http://www.oracle.com/technetwork/java/javamail/third-party-136965.html)列表中的某个产品可能有一些可重用的代码？

# r - 我如何从我的变量中删除这些不需要的级别

> ID：14369953
> 
> 赞同：2
> 
> 时间：2013-01-16T23:45:52.523
> 
> 标签：r

基本上 ctb2 是城市税带数据集中的一个变量，我只是将其重命名以使我更容易，我已经为 ctb2 生成了一个摘要和一个表格，就像我的顾问所说的那样作为初学者，他还说我需要删除我们来自变量，因为它们是未知数，所以我可以只拥有 A 到 I 的级别，因为它们与我的分析更相关，她还说我可以用 NA 替换它们，我不知道该怎么做，也一直在努力从变量中删除 U，因为我不知道如何只保留 A 到 I 并摆脱 U 和站在那里的 952。我对 R 很陌生，一直在研究如何但没有任何意义。请帮忙

```
> summary(ctb2)
        A      B      C      D      E      F      G      H      I      U 
952  72258  75890 116903 104229  83516  49943  50607   5689    131  35020 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:19:46.520

以下应该有效：

```
ctb2[ctb2=="U"] <- NA 
```

由于您似乎也有空条目，您可能想要做

```
ctb2[ctb2==""] <- NA 
```

或者

```
ctb2[ctb2==" "] <- NA 
```

取决于那里的 952 到底是什么。

# c# - 实体框架对象上下文保存未添加的新实体

> ID：14369954
> 
> 赞同：0
> 
> 时间：2013-01-16T23:46:02.120
> 
> 标签：c#, winforms, entity-framework, objectcontext

我一直在我的项目中使用实体框架（VS2010 Framework 4.0）。我在为每个表单使用不同的对象上下文时遇到了一些麻烦。我当时所做的是在主菜单表单中创建一个对象上下文（保持打开状态），每次创建并显示一个表单时，我都会将该对象上下文传递给这个新表单。例子：

```
 public partial class frm_Menu : Base
{
    public Sistema_financiero_Entities db = new Sistema_financiero_Entities();

    private void cancelarCuotaToolStripMenuItem_Click(object sender, EventArgs e)
    {
        frm_Cancelacion_Cuota Form1 = new frm_Cancelacion_Cuota();
        Form1.db = db;
        Form1.Show();
    }
} 
```

好的，该解决方案直到现在都运行良好，因为我需要使用和传递对象有时会抛出不同的形式，如果对象上下文不同，我就会出错。

现在，我用这种方式发现了一个巨大的问题。我有一个表格，我可以在其中支付贷款的不同分期付款。我会附上一张图片，这样你就可以看到我在说什么。

![在此处输入图像描述](../Images/42f72e5695d5b868106e0fd306557ea5.png)

在那里，您可以选择要支付的不同分期付款。然后，您介绍您最终将在“Total cobrado”中支付的价值。这是重要的事情：当复选框图像被选中时（蓝色的 - 已经在图像中选中），我每期创建一个“付款”实体。每个“支付”对象都存储在一个列表中。如果我取消选中它，我可以更改值并完成同样的事情。显然，我在做`list.Clear();`. 然后，选中一个复选框，我可以按“Aceptar”（接受）。在那里，我将列表中的每个“付款”（PAGO）添加到数据库中。之后，我保存所有更改。

```
foreach (Pago p in Lista_nuevos_pagos)
{
    db.AddToPago(p);
}
try
{
    db.SaveChanges();
    this.Close();
} 
```

我的问题是，它不仅在列表中添加了那些“付款”，而且在清除之前添加了列表中的其他“付款”实体。我得出的结论是，当我清除列表时，对象仍保留在对象上下文中。我认为如果实体不在数据库中，我必须将它添加到对象上下文中的实体中，就像我对 pago ( `db.AddToPago(p);`) 所做的那样。

我想问你们我该如何解决这个问题。我现在解决了这个问题：

```
private void cancelarCuotaToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Sistema_financiero_Entities db = new Sistema_financiero_Entities();
        frm_Cancelacion_Cuota Form1 = new frm_Cancelacion_Cuota();
        Form1.db = db;
        Form1.Show();
    } 
```

我没有为所有表单创建一个全局数据库，而是在主菜单中为每个表单创建一个。然后，在该表单关闭事件中，我处理该对象上下文。然后，当我检查复选框图像时，在创建“付款”之前，我从对象上下文中删除每个“Pago”实体：

```
foreach (Pago p in Lista_nuevos_pagos)
        {
            db.DeleteObject(p);
        }

Lista_nuevos_pagos.Clear(); 
```

这样做可以正常工作，但是当我清除列表时，我仍然遇到一些其他创建的实体（分期付款）没有被删除的问题。我认为我做错了，这就是为什么我需要一些指导才能正确使用 EF。我真的需要尽快完成这项工作，我没有太多时间阅读 EF 教程。

以防万一，这就是我创建每个“Pago”（付款）的方式

```
Pago p = new Pago();                                                    
p.desc_aumento_intereses = nudwb1.Value;                            
p.desc_aumento_punitorios = nudwb2.Value; 
p.desc_aumento_gastos = nudwb3.Value;                           
p.desc_aumento_comision = nudwb4.Value;
p.cotizacion = ntxt_Cotizacion.Value;
p.fecha_hora = fecha_hora;

Cuota c = new Cuota();
string name = tbx.Name.Substring(tbx.Name.IndexOf("-") + 1);
int nro_cuota = Convert.ToInt32(name);
c = Lista_cuotas_cobrar.Where(x => x.num_cuota == nro_cuota).First();

p.Cuota.Add(c); 
```

感谢您的阅读，我知道这是很多信息。希望尽快有指导..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:21:41.427

我猜您在 Lista_nuevos_pagos 列表中引用了这些对象。这就是为什么它们会被复制。

# jquery - 使用 jquery 延迟下拉菜单

> ID：14369960
> 
> 赞同：0
> 
> 时间：2013-01-16T23:47:03.343
> 
> 标签：jquery, drop-down-menu, menu

我要修改的菜单具有以下 HTML 结构：

```
<nav>
  <ul id="fashionmenu">
    <li class=""><a href="#">Home<a/></li>
    <li class=""><a href="about.html">About<a/></li>
    <li class=""><a href="#">Services</a>
        <ul>
           <li><a href="#">Service 1</a></li>
           <li><a href="#">Service 2</a></li>
        </ul>
    </li>
    <li class=""><a href="#">Contact</a>
  </ul>
</nav> 
```

我试图完成的是下拉菜单的延迟，我已经有了它的 Jquery 代码，但由于某种原因我无法理解（这里是我请你指导我的地方）为什么悬停，甚至如果对 hover 有很好的平滑效果，除非我再次将其悬停在菜单上，否则菜单不会退出。但是，当然，我希望每当我将鼠标移动到不同的菜单项时，下拉菜单都会自动退出。

这是javascript：

```
    $(函数(){
      $('#fashionmenu > li > ul')
        。隐藏（）
        .click(函数(e){
        e.stopPropagation();
      });

      $('#fashionmenu > li').toggle(function(){
        $(这个)
        .removeClass('等待')
        .find('ul').slideDown();
      }， 功能（）{
        $(这个)
        .removeClass('等待')
        .find('ul').slideUp();
      });

    $('#fashionmenu > li').hover(function(){
      $(this).addClass('等待');
        设置超时（函数（）{
          $('#fashionmenu .waiting')
          。点击（）
          .removeClass('等待');
          },300);
        }， 功能（）{
          $('#fashionmenu .waiting').removeClass('waiting');
        });

    });

```

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:56:50.893

做这样的事情：http: [//jsfiddle.net/mwwFn/1/](http://jsfiddle.net/mwwFn/1/)

```
$(function () {
  $('#fashionmenu > li > ul').hide().click(function (e) {
    e.stopPropagation();
  });

  $('#fashionmenu > li').toggle(function () {
    $(this).removeClass('waiting').find('ul').slideDown();
  }, function () {
    $(this)
      .removeClass('waiting')
      .find('ul').slideUp();
  });

  $('#fashionmenu > li').hover(function () {
    $(this).addClass('waiting').find('ul').slideDown();

  }, function () {
    $(this).removeClass('waiting').find('ul').delay(3000).slideUp();
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:33:39.227

据我了解您的问题......它可以通过著名的 hoverIntend 插件来解决： [https ://github.com/briancherne/jquery-hoverIntent](https://github.com/briancherne/jquery-hoverIntent)

旧但相同的目的 - DoTimeOut [http://benalman.com/code/projects/jquery-dotimeout/examples/hoverintent/](http://benalman.com/code/projects/jquery-dotimeout/examples/hoverintent/)

# forms - MODx eForm：填充隐藏字段

> ID：14369963
> 
> 赞同：0
> 
> 时间：2013-01-16T23:47:23.643
> 
> 标签：forms, modx, modx-evolution

我的目标是，eForm 使用我的脚本从数据库接收的数据填充隐藏字段。我能够使用通过 &eFormOnBeforeFormParse 调用的函数成功填充所有可见的输入字段。当我想填充隐藏字段时，它不起作用。它们是空的或 MODx/eForm 抱怨表单被篡改。

我可以将数据放入常规输入字段并使用 css 隐藏它们，但是有没有办法使用 type="hidden" 字段适当地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:20:25.363

使用该`eform`属性来防止验证隐藏字段：

```
<input type="hidden" name="calculatedField" value="" eform="::0::" /> 
```

更多信息在这里： [http ://wiki.modxcms.com/index.php/EForm#Hidden_​​fields.2C_select_boxes.2C_radio_options_and_checkbox_fields](http://wiki.modxcms.com/index.php/EForm#Hidden_fields.2C_select_boxes.2C_radio_options_and_checkbox_fields)

# java - 如何获取登录用户名？

> ID：14369965
> 
> 赞同：3
> 
> 时间：2013-01-16T23:47:29.650
> 
> 标签：java, jsp, servlets

我尝试在基本身份验证后使用 servlet 请求来检索用户名。但我发现没有这样的方法来检索用户名。有获取用户角色的方法，但没有获取名称？

有人知道如何获取用户名吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:52:20.213

在 HTTP BASIC 身份验证的情况下，用户名由[`HttpServletRequest#getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29).

因此，在 Servlet 中：

```
String username = request.getRemoteUser();
// ... 
```

在 JSP 中：

```
<p>Welcome, ${pageContext.request.remoteUser}</p> 
```

此外，用户主体可通过[`HttpServletRequest#getUserPrincipal()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getUserPrincipal%28%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:48:18.267

登录时将有用的数据放在会话属性中，并在需要的地方读取它

```
request.getSession(true).setAttribute("key", dataInstance); 
```

# java - 解析XML文档Android时为空

> ID：14369966
> 
> 赞同：0
> 
> 时间：2013-01-16T23:47:32.737
> 
> 标签：java, android, xml

我正在解析这样的 xml 文档：

```
InputStream raw = getApplicationContext().getAssets().open("pubs.xml");
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder= dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(raw);
        NodeList lista = doc.getElementsByTagName("name");
        for(int i =0; i < lista.getLength(); i++)
            titulos.add(lista.item(i).getNodeValue()); 
```

好吧，当我查看我的最终列表 (titulos) 时，一切都是空的，我不知道为什么，因为解析 XML 文档需要一些时间：/我做错了什么？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:29:15.520

如[Java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html)中所示，元素的节点值始终为空。相反，您需要检索元素的文本内容。这会更好吗？

```
for(int i =0; i < lista.getLength(); i++)
     titulos.add(lista.item(i).getTextContent()); 
```

# json - 将 JSON 数据传递给 Spring Controller 时出现错误请求

> ID：14369971
> 
> 赞同：2
> 
> 时间：2013-01-16T23:47:41.677
> 
> 标签：json, spring, request

我参考了 Spring Jquery Ajax Post 上 @ [400 Bad request 的帖子](https://stackoverflow.com/questions/13075101/400-bad-request-on-spring-jquery-ajax-post)

但是即使我按照之前帖子中提供的建议，我仍然收到 400 错误请求。谁能让我知道我哪里出错了。

控制器：

```
 @RequestMapping(value = "validateLine.htm", method = RequestMethod.POST)
@ResponseBody
public JSONResponse checkForExceptions(HttpSession session,@RequestBody  OrderLine[] lineData) { 

    // do something
} 
```

和 AJAX 调用

```
$.ajax({
    type : "POST",
    url : "/order/validateLine.htm",
    data : aData,
    dataType : 'json',
    contentType: 'application/json',
    success: function(response){  
            // do Something
            }
    }); 
```

从 FireBug 发送到服务器的数据

```
[{"lineId":"2","itemDesctiption":"Item Desc 2","bundleDescription":"Bundle Desc 2"},{"lineId":"2","itemDesctiption":"Item Desc 2","bundleDescription":"Bundle Desc 2"}] 
```

如果我说 @RequestBody ArrayList <OrderLine> lineData 我将数据作为 LinkedHashMap 并引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:46:59.230

您需要确保它返回正确的内容类型：

```
headers.add("Content-Type", "application/json; charset=utf-8"); 
```

此外，在那里，应该只接受正确的内容类型：

```
@RequestMapping(headers = "Accept=application/json") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:32:18.383

花了一天时间后，我终于弄清楚了这个问题。它是一个错字:(我从javascript发送lineId，但它是我的Object类，它是lineID（大写D）。

谢谢大家的时间。欣赏它。

# java - 如何将 Pentaho Kettle 存储库配置为包含 Kettle ETL 脚本的文件夹和/或 SVN 存储库？

> ID：14369974
> 
> 赞同：0
> 
> 时间：2013-01-16T23:48:01.077
> 
> 标签：java, repository, etl, pentaho, kettle

我是 Kettle 的新手，需要一些帮助来正确设置它。我试图将 Kettle 指向一个 SVN 存储库。现在，我只有以下文件夹。

```
D:\ETL\data-integration\
D:\ETL\.kettle\
D:\ETL\Kettle-custom\
D:\ETL\scripts\
D:\ETL\logs\ 
```

数据集成文件夹是从 pdi-ce-4.3.0-stable.zip 中提取的。

在 D:\ETL.kettle\repositories.xml 中，我指向 D:\ETL\Kettle-custom\

```
<?xml version="1.0" encoding="UTF-8"?>
<repositories>
<repository>    
    <id>KettleFileRepository</id>
    <name>3</name>
    <description>custom_import</description>
    <base_directory>D:\ETL\Kettle-custom</base_directory>
    <read_only>N</read_only>
    <hides_hidden_files>N</hides_hidden_files>
  </repository>
</repositories> 
```

我有一个名为“etl”的 SVN 存储库和一个名为“kettle”的项目。

```
https://mydomain:8443/svn/etl/kettle/trunk 
```

此时，我收到此弹出窗口，但我不确定“管理员”密码是什么，或者在此之后该怎么做。我首先想将 Kettle 连接到这个文件夹。但如果可能的话，我也想将它连接到 SVN。你能向我解释的任何事情都会有所帮助。

![在此处输入图像描述](../Images/b32de723984a95bc6d5672055a4f4d85.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:11:23.617

我认为您对“存储库”一词感到困惑。PDI 存储库不是 SVN 存储库，它是自定义的本地数据库存储库。

因此，您需要单击 + 按钮添加存储库并输入一些数据库详细信息。创建存储库后，密码就是 admin/admin IIRC。

不过，您不需要使用存储库。如果您想将文件存储在 SVN 中，然后打开这些文件，则只需取消此对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T10:57:42.260

启动勺子后，您是否检查了存储库是否已连接，如果未连接，则连接然后能够在您的共享位置看到 repositiers.xml 文件

# java - 用Java画一条线 - 线不可见

> ID：14369981
> 
> 赞同：3
> 
> 时间：2013-01-16T23:48:40.787
> 
> 标签：java, swing, jpanel, paintcomponent, graphics2d

我正在自学Java。尝试创建一个带有线条的框架。它看起来很基本，但我看不到这条线。代码编译，我似乎无法理解为什么我看不到这条线。我在框架中看到了其他组件。我正在使用 2 个 java 文件。一个文件是容器文件，另一个文件有画线代码。它们是包 a1 的一部分。这是我的代码（请帮助）：

**容器文件：**

```
package a1;
import javax.swing.*;
import java.awt.*;

public class gameContainer {

    public static void addComponentsToPane(Container pane) {
        pane.setLayout(null);

        //add button to the pane
        JButton b3 = new JButton("B1");
        pane.add(b3);

        //add line to the pane
        drawingLine line1 = new drawingLine();
        pane.add(line1);

        //size and position all relatively          
        Insets insets = pane.getInsets();
        Dimension size;
        size = b3.getPreferredSize();        
        b3.setBounds(350+insets.left,15+insets.top,size.width+50,size.height+20);
        size = line1.getPreferredSize();
        line1.setBounds(350+insets.left,75+insets.top,size.width+50,size.height+20);    

    }

    private static void createAndShowGUI() {
        int l = 200, w = 80;

        //Create and set up the window.
        JFrame frame = new JFrame("Frame");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Set up content pane
        addComponentsToPane(frame.getContentPane());

        //add menu bar
        JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("Menu");
        menu.add(new JMenuItem("Do nothing"));
        menuBar.add(menu);
        frame.setJMenuBar(menuBar);

        // size and display root pane/window
        Insets insets = frame.getInsets();
        frame.setSize(500+insets.left+insets.right,300+insets.top+insets.bottom);
        frame.setLocation(w,l);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
        });
    }

} 
```

**画线文件：**

```
package a1;
import javax.swing.*;
import java.awt.geom.Line2D;
import java.awt.Graphics2D;
import java.awt.Graphics;

public class drawingLine extends JPanel{

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        Line2D line = new Line2D.Double(200, 300, 1000, 1000);
        //g2d.setColor(Color.black);
        g2d.draw(line);
        //g.drawLine(200, 300, 1000, 1000);
        //g.setColor(color.BLACK);

    }

} 
```

为什么我看不到线？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T00:04:29.713

您的主要问题是您使用`null`/`Absolute`布局。

你应该在这里阅读：

*   [在容器中布置组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)

1）您应该使用适当的`LayoutManager`（或将多个 s 嵌套在一起`LayoutManager`）和/或覆盖`getPreferredSize()`来`JComponent`返回适合图纸的正确尺寸。

2）在设置可见之前不要调用`setSize`而`JFrame`不是调用（记住以上）`pack()``JFrame`

3）无需通过as添加到*contentPane*，已经转发到contentPane。`getContentPane().add(..)``add(..)` `setLayout(..)``remove(..)`

4）注意类名，遵守java约定类名以大写字母开头，之后的每个新单词的第一个字母都应该大写，即`gameContainer`应该是`GameContainer`，`drawingLine`应该是`DrawingLine`

这是您实现了上述修复的代码（不是最好的布局，但它只是一个示例）：

![在此处输入图像描述](../Images/b56971baa9b1a385f25bb1ceb8c76039.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Line2D;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;

public class GameContainer {

    public static void addComponentsToPane(JFrame frame) {

        JPanel buttonPanel=new JPanel();//create panel to hold button
        //add button to the pane
        JButton b3 = new JButton("B1");
        buttonPanel.add(b3);
        frame.add(buttonPanel, BorderLayout.EAST);//use contentPane default BorderLayout

        //add line to the pane
        DrawingLine line1 = new DrawingLine();
        frame.add(line1);

    }

    private static void createAndShowGUI() {

        //Create and set up the window.
        JFrame frame = new JFrame("Frame");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Set up content pane
        addComponentsToPane(frame);

        //add menu bar
        JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("Menu");
        menu.add(new JMenuItem("Do nothing"));
        menuBar.add(menu);
        frame.setJMenuBar(menuBar);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
}
class DrawingLine extends JPanel {

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        Line2D line = new Line2D.Double(10, 10, 100, 100);
        g2d.draw(line);

    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:57:18.370

David Kroukamp 展示了正确的（更好地说，更容易，更不容易出错）的方法。至于你原来的问题，修改原来的代码是这样的：

```
line1.setBounds(350+insets.left,75+insets.top,size.width+50,size.height+20);    
line1.setBorder(BorderFactory.createEtchedBorder()); // add this line 
```

您的线从点 200,300 开始，但您正在绘制它的面板的宽度为 50+10，高度为 20+10 - 至少在我的计算机上 - 这意味着该线在`drawingLine`面板之外，这就是它没有的原因不被吸引。要验证是否像这样修改原始行中的行`drawingLine.paintComponent`：

```
Line2D line = new Line2D.Double(0, 0, 1000, 1000); 
```

您将看到以下结果：

![在此处输入图像描述](../Images/0be3ee7ab8d67e8d1cf49717f6df8df8.png)

原始代码中的这一行：

```
pane.setLayout(null); 
```

很清楚 - 您没有使用布局管理器，或者换句话说，您选择使用[绝对定位](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)。这意味着组件的坐标、宽度和高度必须由您预先计算和设置。但是，如果您在某处犯了错误（正如您的示例很好地展示的那样），则很难检测到。更不用说，例如，如果您想处理窗口大小调整。这就是[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)存在的原因。

我还建议阅读：

*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)
*   [解决常见布局问题](http://docs.oracle.com/javase/tutorial/uiswing/layout/problems.html)

# html - 链接到 Django HTML 模板中的 CSS 文件

> ID：14369984
> 
> 赞同：0
> 
> 时间：2013-01-16T23:49:02.987
> 
> 标签：html, css, django

我正在构建一个简单的 Django 应用程序，并且我的 CSS 没有显示在开发服务器上，即使我只是在浏览器中打开链接到它的 HTML 文件，它确实可以工作。我已经调查了关于 SO 的其他相关问题，以及关于提供静态文件的官方教程，但仍然无法弄清楚如何让我的 CSS 工作。

我是新手，所以请尽可能以最简单的方式提供建议（但不是更简单）。

谢谢！

目录结构：

```
uber
  uber
  static
    css
      style.css
  templates
    home.html 
```

设置.py：

```
MEDIA_ROOT = '/Users/pavelfage/Desktop/Hacking/django/uber/static/'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/static/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = ''

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    #'/Users/pavelfage/Desktop/Hacking/django/uber/uberpoll/static',
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '(au)ipe++*c6e6r1s00z9d99qgsx!loqh*-!hcqys=6&amp;bjk#*a'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    #'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'uber.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'uber.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/Users/pavelfage/Desktop/Hacking/django/uber/templates',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    # 'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'uberpoll'
) 
```

网址.py：

```
from django.conf.urls import patterns, include, url
from uber import settings

urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'uberpoll.views.home'),
    # url(r'^uber/', include('uber.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
    url(r'^$', 'django.views.static.serve', {'document_root':settings.MEDIA_ROOT})
) 
```

带有链接的 HTML 头：

```
<head>
        <link rel='stylesheet' href='/static/css/style.css' type='text/css' media='screen'>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:01:18.933

开发服务器仅通过静态文件框架自动提供文件。

您真的应该将您的媒体文件夹添加到您的文件夹中`STATICFILES_DIRS`以利用该框架。

但是，如果你想在开发中服务`MEDIA_ROOT`，`MEDIA_URL`你必须自己设置一个 URLConf 来服务这些。

[https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-other-directories](https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-other-directories)

```
if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

# email - 从字符串中获取电子邮件地址

> ID：14369986
> 
> 赞同：0
> 
> 时间：2013-01-16T23:49:13.063
> 
> 标签：email, grails, groovy

如何从以下字符串中获取电子邮件地址：

```
def emailAddress="john@doe.com <\john@doe.com\\>" 
```

这样我就可以在调用时使用它`Contactperson.findByEmailAddress(variable)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:57:21.440

JavaMail 提供了一个表示电子邮件地址的类，该类可以解析您拥有的格式的字符串。看看[`javax.mail.internet.InternetAddress`](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/InternetAddress.html)。

Grails 有一个[邮件插件](http://grails.org/plugin/mail)，可以自动使 JavaMail 可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:59:44.877

我假设您需要比较的电子邮件在括号内：

```
Contactperson.findByEmailAddressIlike('%<${variable}>%') 
```

根据您的数据库，您可能需要转义特殊字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:39:25.017

一个简单的解决方案是

```
Contactperson.findByEmailAddress(emailAddress.split('<')[0]) 
```

但是您需要先做一些验证工作以避免格式错误。

# php - 将html表单发送到php文件时出错

> ID：14369990
> 
> 赞同：0
> 
> 时间：2013-01-16T23:49:46.897
> 
> 标签：php, jquery, html

我正在尝试制作一个 GPA 计算器，允许用户根据需要输入更多字段。我将所有字段命名为“grades[]”，将所有字段命名为“units[]”。当数据被提交时，php 文件扫描每个字段并将数据分别输入到名为 $GradeArray 和 $UnitsArray 的变量中，然后对这两个变量进行所需的所有计算。

我让计算器正常工作，但随后我测试了是否存在任何错误。当我跳过任何字段并将数据输入下一个字段时，结果为 0，或者只是一个错误的答案。

这是导致错误发生的原因的照片：

![在此处输入图像描述](../Images/0e20069c044caf64c3d82cf3fb6c2784.png)

但是当我按顺序输入字段时，没有遗漏任何字段，答案就出来了。

我猜我的 foreach() 语句有问题。无论如何这里是代码......希望你能帮忙！

Jquery 动态添加额外的输入字段（我为可读性添加了空格）：

```
$('#add').click(function() {
$('<div>
    <select  name = "grades[]">
        <option value = "0"> SELECT </option>
        <option value = "A"> A</option>
        <option value = "AMINUS"> A- </option>
        <option value = "BPLUS"> B+ </option>
        <option value = "B"> B </option> 
        <option value = "BMINUS"> B- </option> 
        <option value = "CPLUS"> C+ </option>
        <option value = "C"> C </option> 
        <option value = "CMINUS"> C- </option> 
        <option value = "DPLUS"> D+ </option> 
        <option value ="D"> D </option> 
        <option value = "DMINUS"> D-</option>
        <option value = "F"> F </option> 
   </select> <input name = "units[]"  />
 </div>  ').fadeIn('slow').appendTo('.inputs');
i++;
}); 
```

的HTML：

```
<form method = "post" action = "process.php" name = "myform" id = "myform">
            <div class = "inputs">
                <select name = "grades[]">
                    <div><option value = "0"> SELECT </option></div>
                    <div><option value = "A" > A </option></div>
                    <div><option value = "AMINUS"> A-</option></div>
                    <div><option value = "BPLUS" > B+ </option></div>
                    <div><option value = "B"> B </option></div>
                    <div><option value = "BMINUS" > B- </option></div>
                    <div><option value = "CPLUS"> C+ </option></div>
                    <div><option value = "C" > C </option></div>
                    <div><option value = "CMINUS"> C- </option></div>
                    <div><option value = "DPLUS" > D+ </option></div>
                    <div><option value = "D"> D </option></div>
                    <div><option value = "DMINUS" > D- </option></div>
                    <div><option value = "F"> F </option> </div>
                </select>
                <input name = "units[]" type = "text"/>
                <br>
                <select name = "grades[]">
                    <div><option value = "0"> SELECT </option></div>
                    <div><option value = "A" > A </option></div>
                    <div><option value = "AMINUS"> A-</option></div>
                    <div><option value = "BPLUS" > B+ </option></div>
                    <div><option value = "B"> B </option></div>
                    <div><option value = "BMINUS" > B- </option></div>
                    <div><option value = "CPLUS"> C+ </option></div>
                    <div><option value = "C" > C </option></div>
                    <div><option value = "CMINUS"> C- </option></div>
                    <div><option value = "DPLUS" > D+ </option></div>
                    <div><option value = "D"> D </option></div>
                    <div><option value = "DMINUS" > D- </option></div>
                    <div><option value = "F"> F </option> </div>
                </select>
                <input name = "units[]" type = "text" />
                <br>
                <select name = "grades[]">
                    <div><option value = "0"> SELECT </option></div>
                    <div><option value = "A" > A </option></div>
                    <div><option value = "AMINUS"> A-</option></div>
                    <div><option value = "BPLUS" > B+ </option></div>
                    <div><option value = "B"> B </option></div>
                    <div><option value = "BMINUS" > B- </option></div>
                    <div><option value = "CPLUS"> C+ </option></div>
                    <div><option value = "C" > C </option></div>
                    <div><option value = "CMINUS"> C- </option></div>
                    <div><option value = "DPLUS" > D+ </option></div>
                    <div><option value = "D"> D </option></div>
                    <div><option value = "DMINUS" > D- </option></div>
                    <div><option value = "F"> F </option> </div>
                </select>
                <input name = "units[]" type = "text" />
                <br>
                <select name = "grades[]">
                    <div><option value = "0"> SELECT </option></div>
                    <div><option value = "A" > A </option></div>
                    <div><option value = "AMINUS"> A-</option></div>
                    <div><option value = "BPLUS" > B+ </option></div>
                    <div><option value = "B"> B </option></div>
                    <div><option value = "BMINUS" > B- </option></div>
                    <div><option value = "CPLUS"> C+ </option></div>
                    <div><option value = "C" > C </option></div>
                    <div><option value = "CMINUS"> C- </option></div>
                    <div><option value = "DPLUS" > D+ </option></div>
                    <div><option value = "D"> D </option></div>
                    <div><option value = "DMINUS" > D- </option></div>
                    <div><option value = "F"> F </option> </div>
                </select>
                <input name = "units[]" type = "text"/>

            </div>

                <input type = "submit" value = 'Submit' id = "Submit" style = "font-family:'HelveticaNeue-Light', 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, 'Lucida Grande', sans-serif; width: 80px;background-color: #c5Da37; border: none; color: white;"/>
                <input type ="reset" style = "background-color: #0499ff; width: 90px; color: white;">
   </form> 
```

PHP：

```
//ARRAYS
$GradeArray = array();
$UnitArray = array();
$GradePoints = array();

//INPUT GRADES (NUMERICAL) INTO GRADE ARRAY
foreach($_POST['grades'] as $grades)
{

    if ($grades == "A"){
        $GradeArray[] = 4.0;
    }
    else if ($grades == "AMINUS"){
        $GradeArray[] = 3.7;
    }
    else if ($grades == "BPLUS"){
        $GradeArray[] = 3.3;
    }
    else if ($grades == "B"){
        $GradeArray[] = 3.0;
    }
    else if ($grades == "BMINUS"){
        $GradeArray[] = 2.7;
    }
    else if ($grades == "CPLUS"){
        $GradeArray[] = 2.3;
    }
    else if ($grades == "C"){
        $GradeArray[] = 3.0;
    }
    else if ($grades == "CMINUS"){
        $GradeArray[] = 2.7;
    }
    else if ($grades == "DPLUS"){
        $GradeArray[] = 2.3;
    }
    else if ($grades == "D"){
        $GradeArray[] = 2.0;
    }
    else if ($grades == "DMINUS"){
        $GradeArray[] = 1.7;
    }
    else if ($grades == "F"){
        $GradeArray[] = 0;
    }
}

//INSERT VALUES FROM UNITS INTO UNITS ARRAY
foreach($_POST['units'] as $units)
{
    if ($units == NULL)
    {
        $UnitArray[] = 0;
    }

    $UnitArray[] = $units;
}

//CALCULATE GP
for ($i = 0; $i <= count($GradeArray); $i++)
{
    $GradePoints[$i] = $GradeArray[$i] * $UnitArray[$i];
}

//SUM UP GRADE POINTS
$sumGradePoints= 0; 
for($i = 0; $i != count($GradeArray); $i++)
{
    $currentItem = $GradePoints[$i];

    $sum = $sumGradePoints+$currentItem;

    $sumGradePoints = $sum;
}

//SUM UP CREDIT HOURS
$sumUnitPoints = 0;
for ($i = 0; $i <= count($UnitArray); $i++)
{
    $currentItem = $UnitArray[$i];

    $sum = $sumUnitPoints+$currentItem;

    $sumUnitPoints = $sum;
}

$result = $sumGradePoints/$sumUnitPoints;

echo $result;

?> 
```

# mysql - 用于模糊搜索查询的 sql

> ID：14369991
> 
> 赞同：0
> 
> 时间：2013-01-16T23:49:50.690
> 
> 标签：mysql, sqlite

我有一个 mysql 数据库的 sql 查询，其中包括以下内容

```
where("UPPER(CONCAT(firstName, ' ', lastName)) LIKE ?", params[:query]) 
```

由于 sqlite3 没有 concat 函数，而是使用管道 ||，因此我尝试将上面的内容写为

```
where("UPPER(firstName || ' ' || lastName) LIKE ?", params[:query]) 
```

但查询没有返回任何结果。我没有`||`正确使用吗？

注意，小写的 where 是 Rails 查询助手。

**更新**

事实证明 concat 运算符不是问题，所以我将标题更改为这个问题。我正在尝试对姓名进行模糊搜索，即返回包含该人姓名中搜索词的所有记录。例如，如果您搜索“a”，“tanja”将是一个正向匹配服务器正在使用我的 sql 运行此查询

这是正在运行的 sql（如果在搜索框中输入了“a”）

```
SELECT id, firstname, lastname, title FROM "employees" WHERE (upper(firstName ||' '||lastName) LIKE 'a') 
```

ajax 请求（如控制台所示）是这样的

```
findByName: a employee.js:20
XHR finished loading: "http://localhost:3000/employees/search/a". jquery.js:8215
[] ##empty array returned 
```

如果我在 Rails 控制台中运行查询，它也会返回空，所以问题可能出在我的 sql 上

```
>> Employee.select("id, firstname, lastname, title").where("upper(firstName ||' '||lastName) LIKE ?", "a")
  Employee Load (0.2ms)  SELECT id, firstname, lastname, title FROM "employees" WHERE (upper(firstName ||' '||lastName) LIKE 'a')
=> [] 
```

但是，数据库中有名称包含字母“a”的记录。例如，这是数据库记录。谁能解释为什么像上面这样的查询（假设人名包含搜索的字母）在这样的记录上不起作用。

```
[#<Employee id: 1, firstname: "Steven", lastname: "Wells", managerid: 4, title: "Software Architech", department: "Engineering", officephone: "604-999-8989", cellphone: "345-678-0987", email: "sweels@email.com", city: "Vancouer", picture: "assets/steven_wells.jpg", twitterid: "@fartbreath", blogurl: "http://blahblah.com", created_at: "2013-01-16 01:24:38", updated_at: "2013-01-16 01:24:38">, 
```

谁能解释可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:36:48.677

我不确定，但你需要一些带有“a”的通配符吗？例如 - “%a%”？

# java - 无法从 Powershell 将参数传递给 JAR 文件...在命令提示符下工作

> ID：14369992
> 
> 赞同：0
> 
> 时间：2013-01-16T23:50:10.023
> 
> 标签：java, powershell, jar, command-line-arguments, command-prompt

当我尝试在 Powershell 中运行以下命令时

```
& java -jar myEncrypter.jar abc123 
```

我得到错误：

> 严重：null java.security.InvalidKeyException：非法密钥大小

但是，如果我在命令提示符下运行它，它可以工作

```
java -jar myEncrypter.jar abc123 
```

注意：Java 的路径 C:\Program Files (x86)\Java\jre6\bin 设置正确，所以这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:07:47.690

您没有在两个环境之间运行相同的 java exe。不知道为什么 cmd.exe 和 PowerShell 之间的路径不同，但显然是。使用 java.exe 的完整路径或修复 PowerShell 看到的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:07:18.483

Keith Hill 是正确的...我需要在 jar 的路径和 java 的路径中引用 C:\Program Files (x86)\Java\jre6\bin。

```
C:\Program Files (x86)\Java\jre6\bin\java -jar C:\Program Files (x86)\Java\jre6\bin\myEncrypter.jar abc123 
```

# c# - 导出到 excel 包括下拉列表

> ID：14369993
> 
> 赞同：0
> 
> 时间：2013-01-16T23:50:10.117
> 
> 标签：c#, devexpress

我需要将 a 导出`datagrid`到 Excel 中。可以修改导出的 Excel 数据并将其导入回网格。我正在导出一个`datagrid`使用 Dev Express 导出器控件（`dx:ASPxGridViewExporter`）。

现在我有一个场景，导出的 Excel 应该包含一个`dropdownlist`. 例如，State Master 网格导出的 Excel 应该包含国家代码作为 a `dropdownlist`，将国家代码预填到 a`dropdown`中，这样我们就可以限制用户不键入国家代码。

任何建议，将不胜感激。我正在使用`ASP.net`, `C#`和`Dev Express`控件。

# xmlhttprequest - 停止异步 XMLHttpRequest

> ID：14369999
> 
> 赞同：0
> 
> 时间：2013-01-16T23:50:57.567
> 
> 标签：xmlhttprequest, browser-close

我有不耐烦的用户更新网页上的一条数据。更新触发异步`XMLHttpRequest`，响应导致页面更新。

我的问题是这个。如果用户在请求完成之前关闭浏览器窗口，浏览器是否会向 Web 服务器发送指令以停止请求？

FWIW 用户正在使用 Firefox 或 Safari。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:01:10.850

浏览器应该关闭连接，这应该会导致服务器收到一个关闭/结束数据包。此时，由服务器决定是完成处理还是在该点停止处理。

我检查了是否可以找到 Apache 的功能，但没有找到任何文档。