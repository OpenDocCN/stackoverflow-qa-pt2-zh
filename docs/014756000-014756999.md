# StackOverflow 问答 14756000-14756999

# android - Android proguard 和库项目

> ID：14756006
> 
> 赞同：1
> 
> 时间：2013-02-07T16:27:54.340
> 
> 标签：android, proguard

proguard 正在用这样的消息杀死我：

“[proguard] 警告：类 [facebook/bin/classes/com/facebook/internal/FileLruCache$StreamHeader.class] 意外包含类 [com.facebook.internal.FileLruCache$StreamHeader]”

最后的警告是：

> [proguard] 警告：错误命名的文件中有 332 个类。[proguard] 你应该确保所有的文件名都与它们的类名相对应。[proguard] 目录层次结构必须与包层次结构相对应。[proguard] 如果你不介意没有写出提到的类，[proguard]
> 你可以使用'-ignorewarnings' 选项试试运气。

在我看来，我没有调整我正在使用的库项目（如 facebook）和 proguard。

我真的不想混淆 lib 项目，但是这些行

> -keep class com.facebook.** { *; }
> 
> -keep interface com.facebook.** { *; }

不这样做的伎俩。

你能告诉我那个吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:53:35.310

参照。ProGuard 手册 > 疑难解答 >[警告：类文件...意外包含类...](http://proguard.sourceforge.net/manual/troubleshooting.html#unexpectedclass)

您的配置似乎包含一个 -injars 选项，它不指向包和类的根目录（.../facebook/bin/classes）。

但是，标准的 Android 构建过程已经为您指定了所有必要的 -injars 选项，因此您不应添加任何选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:28:14.113

好的，我在 proguard 配置文件中使用了许多 -dontwarn 选项。

此外，我不会混淆不在我的主包中的任何内容（-keepclass !com.yyy.** { *; } 和 keepinterface）。这似乎工作得很好。

# excel - 具有两个数据系列的 Libre calc 散点图

> ID：14756011
> 
> 赞同：0
> 
> 时间：2013-02-07T16:28:10.550
> 
> 标签：excel, point, scatter-plot, libreoffice

在 libre calc 中，我有一组数据，其中一些样本已使用两种不同的方法运行。我想以散点图-esc 的方式显示它们，但我不知道如何将两个图叠加在一起。我对excel更熟悉，但不幸的是我不熟悉电脑

```
09      10      11      12      13      14      15      16      18      19      
99.93   99.89   99.56   98.7    98.16   98.46   98.46   98.53   99.56   49.51
                                                        99.88   99.83 
```

这是我的数据集的一个例子。有没有办法将两个点放在同一个样本上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:26:28.520

请执行下列操作：

1.  键入`=NA()`数据数组的每个空单元格（只有 2 个点）。
2.  制作一个包含 2 个系列的折线图 - 一个只有 2 个点。
3.  仅选择 2 个系列中的一部分并根据需要更改其类型 - 例如分散。

希望对您有所帮助）

# json - extjs 嵌套模型

> ID：14756012
> 
> 赞同：1
> 
> 时间：2013-02-07T16:28:10.767
> 
> 标签：json, extjs, model, nested

我是 Sencha Extjs 的新手，我遇到了模型设计问题。这是来自服务器的示例响应：

```
[
{
    "success": "true",
    "data": {
        "sromain": [
            {
                "corporation": "DEV 1 s.r.o.",
                "dbName": "dev_1_s_r_o_",
                "prijmyCelk": "2 106,00 €",
                "nakladyCelk": "2 049,00 €",
                "ziskCelk": "57,00 €",
                "neuhrVydCelk": "2 106,00 €",
                "neuhrPrijCelk": "2 049,00 €",
                "dph": "9,52 €"
            }
        ],
        "branches": [
            {
                "branch_name": "Bratislava",
                "branch_code": "BA",
                "strediskoprijmyCelk": "180,00 €",
                "strediskonakladyCelk": "0,00 €",
                "strediskoziskCelk": "180,00 €",
                "strediskoneuhrVydCelk": "180,00 €",
                "strediskoneuhrPrijCelk": "0,00 €",
                "streddphCelk": "30,00 €"
            },
            {
                "branch_name": "Banská Bystrica",
                "branch_code": "BB",
                "strediskoprijmyCelk": "600,00 €",
                "strediskonakladyCelk": "0,00 €",
                "strediskoziskCelk": "600,00 €",
                "strediskoneuhrVydCelk": "600,00 €",
                "strediskoneuhrPrijCelk": "0,00 €",
                "streddphCelk": "100,00 €"
            },
            {
                "branch_name": "Centrála",
                "branch_code": "C",
                "strediskoprijmyCelk": "666,00 €",
                "strediskonakladyCelk": "213,00 €",
                "strediskoziskCelk": "453,00 €",
                "strediskoneuhrVydCelk": "666,00 €",
                "strediskoneuhrPrijCelk": "213,00 €",
                "streddphCelk": "75,52 €"
            },
            {
                "branch_name": "Košice",
                "branch_code": "KE",
                "strediskoprijmyCelk": "420,00 €",
                "strediskonakladyCelk": "1 836,00 €",
                "strediskoziskCelk": "-1 416,00 €",
                "strediskoneuhrVydCelk": "420,00 €",
                "strediskoneuhrPrijCelk": "1 836,00 €",
                "streddphCelk": "-236,00 €"
            },
            {
                "branch_name": "Nitra",
                "branch_code": "NR",
                "strediskoprijmyCelk": "240,00 €",
                "strediskonakladyCelk": "0,00 €",
                "strediskoziskCelk": "240,00 €",
                "strediskoneuhrVydCelk": "240,00 €",
                "strediskoneuhrPrijCelk": "0,00 €",
                "streddphCelk": "40,00 €"
            }
        ]
    }
} 
```

]

你能帮我设计一个用于这个 JSON 响应的功能模型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T04:47:26.697

我不知道这背后的业务逻辑是怎样的，但我的理解是你需要一个 Store，它的每条记录都应该有一个分支列表和一个 sromains 列表。如果是这种情况，您应该执行以下操作：

定义将包含分支列表和 sromains 列表的模型。我打电话给 ResponseModel

```
Ext.define("ResponseModel", {
extend: 'Ext.data.Model',
fields: [],

hasMany: [{
    model: 'Sromain',
    name: 'sromain'
}, {
    model: 'Branch',
    name: 'branches'
}

]
}); 
```

定义 sromain 模型

```
Ext.define("Sromain", {
extend: 'Ext.data.Model',
fields: [
    'corporation',
    'dbName',
    'prijmyCelk',
    'nakladyCelk',
    'ziskCelk',
    'neuhrVydCelk',
    'neuhrPrijCelk',
    'dph'],
belongsTo: 'ResponseModel'
}); 
```

定义分支模型

```
Ext.define("Branch", {
extend: 'Ext.data.Model',
fields: [
    'branch_name',
    'branch_code',
    'strediskoprijmyCelk',
    'strediskonakladyCelk',
    'strediskoziskCelk',
    'strediskoneuhrVydCelk',
    'strediskoneuhrPrijCelk',
    'streddphCelk'],
belongsTo: 'ResponseModel'
}); 
```

创建商店

```
var store = Ext.create('Ext.data.Store', {
model: "ResponseModel",
autoLoad: true,
data: data,
proxy: {
    type: 'memory',
    reader: {
        type: 'json',
        root: 'data'
    }
}
}); 
```

如果要查看第一个 responseRecord 的所有分支，则必须这样做

```
var firstRecord = store.getAt(0);
console.log(firstRecord.branches()); 
```

与sromains相同的事情

```
console.log(firstRecord.sromain()); 
```

在这里您可以找到一个工作示例 [http://jsfiddle.net/alexrom7/PVtkF/1/](http://jsfiddle.net/alexrom7/PVtkF/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:26:43.003

如果您想将此存储与 Dataview 一起使用，您需要首先创建一个 XTemplate 变量。我创建了一个简单的 XTemplate，它显示了 html 表中的所有分支以及每个响应记录的另一个表中的所有 Srdomain。

```
var tpl = new Ext.XTemplate(
'<h2 class="response-label">Response Record id = {#}</h2>',
'<table>',
'<caption>Branches:</caption>',
'<tr>',    
             '<th>Branch Code</th>', 
             '<th>Branch Name</th>',
 '</tr>',   
'<tpl for="(branches)">',
    '<tr>',    
             '<td>{branch_code}</td>',  
             '<td>{branch_name}</td>',
    '</tr>',    
'</tpl>',
'</table>',

'<table>',
'<caption>Sromains:</caption>',
'<tr>',    
             '<th>DBName</th>', 
             '<th>Corporation</th>',
 '</tr>',   
'<tpl for="(sromain)">',
    '<tr>',    
             '<td>{dbName}</td>',  
             '<td>{corporation}</td>',
    '</tr>',    
'</tpl>',
'</table>'
); 
```

现在您可以创建数据视图。

```
Ext.create('Ext.DataView', {
renderTo          : Ext.getBody(),
store             : Ext.getStore('responseStore'),
itemTpl               : tpl    
}); 
```

请注意，我使用了 itemTpl 属性，这意味着我们创建的 XTemplate 将用于显示“responseStore”中的每条记录。如果您想更好地控制要显示的记录，可以在数据视图中使用 tpl 属性，但是您必须在 XTemplate 代码中遍历 responseStore。

[http://jsfiddle.net/alexrom7/4Zs5H/1/](http://jsfiddle.net/alexrom7/4Zs5H/1/)

# pdf-generation - 生成 PDF 时强制将内容放入新页面

> ID：14756015
> 
> 赞同：1
> 
> 时间：2013-02-07T16:28:19.820
> 
> 标签：pdf-generation, itext, playframework-1.x

我使用播放框架并使用 rednerPDF() 方法渲染 PDF。

我想始终在新页面中显示部分内容。

例如，我有两个表，一个表应该在第一页，另一个表应该在下一页而不是从第一页继续。第一个表格内容是动态的，我们无法确定表格的高度。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:52:37.837

是否可以？**是**的。
你说一个表（第一个）应该在第一页，你又说它的内容是动态的。
现在我的问题是它跨越页面并且在下一页你想写第二个表？
这是一个通用场景，您提到的是特定场景。
您可以开始尝试使用 PdfPTable **setSplitLate** () 和**setSplitRows**
() 的两个属性（只需 google 了解详细信息，请阅读 Itext In Action）。只需将两个表保留为外部表的两行。
将这两个属性设置为内部和外部以您想要的某种方式（即
通用案例/特定案例）。
另一种替代方法是使用**writeSelectedRows** () 方法**PdfContentByte**（我不知道
您将使用哪个对象来处理 pdf，但您可以在生成表格后从**PdfWriter**，* *PdfStamper* * 通过使用
**getDirectContent** /* *UnderContent* */ **OverContent**）。要使用此方法，您必须设置总宽度表格的高度，因此可以通过 PdfPTable 的 getTotalHeight 方法计算高度**。**如果**您**正确使用此高度，您绝对知道表格的结束位置。但是所有这些特定部分您必须首先阅读和理解。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:41:36.497

使用 yahp，您可以使用特殊的 html 标签来强制分页

```
<yahp:pb /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:38:23.493

我们可以通过 page-break-after:always 来实现

请参阅 [替代 PDF 以了解动态生成的带有分页符的文档](https://stackoverflow.com/questions/9660510/alternate-to-pdf-for-dynamically-generated-document-with-page-breaks)**

# mysql - 使用 DataReader 从 mySQL 中的多个表中检索数据

> ID：14756016
> 
> 赞同：0
> 
> 时间：2013-02-07T16:28:26.013
> 
> 标签：mysql, sql, vb.net, sqldatareader

我将如何从“DAILY_CALCULATIONS”表中检索数据

```
 Dim SqlQuery As String = "SELECT WEEKLY_TIMECARD.*,DAILY_CALCULATIONS.*,EMPLOYEE_PROFILES.EMPLOYEE_NUMBER "
    SqlQuery = SqlQuery + " FROM WEEKLY_TIMECARD, DAILY_CALCULATIONS, employee_profiles WHERE employee_profiles.employee_number"
    SqlQuery = SqlQuery + " = WEEKLY_TIMECARD.employee_number AND EMPLOYEE_PROFILES.EMPLOYEE_NUMBER = DAILY_CALCULATIONS.EMPLOYEE_NUMBER AND"
    SqlQuery = SqlQuery + " WEEKLY_TIMECARD.WEEK_NUMBER = DAILY_CALCULATIONS.WEEK_NUMBER AND WEEKLY_TIMECARD.EMPLOYEE_NUMBER ="
    SqlQuery = SqlQuery + "'" + txtENumber.Text + "' AND WEEKLY_TIMECARD.WEEK_NUMBER = '" + CBWeekNum.SelectedItem + "'"

    Try

        con.Open()

        If con.State = ConnectionState.Open Then
            con.ChangeDatabase("shopclocksoftware")
            Command = New MySqlCommand(SqlQuery, con)
            Data = Command.ExecuteReader()

            While Data.Read
                txtHUnits.Text = Data(2).ToString
                txtOUnits.Text = Data(3).ToString
            End While 
```

我查看了 Data.NextResult 方法，但我无法正确实现它，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:29:12.407

```
Dim SqlQuery As String = "SELECT wtc.A, wtc.B, wtc.C, dc.D, dc.E, ep.F, ep.G"
SqlQuery = SqlQuery + " FROM WEEKLY_TIMECARD wtc, DAILY_CALCULATIONS dc, employee_profiles ep "
SqlQuery = SqlQuery + " WHERE ep.employee_number"
SqlQuery = SqlQuery + " = wtc.employee_number AND ep.EMPLOYEE_NUMBER = dc.EMPLOYEE_NUMBER AND"
SqlQuery = SqlQuery + " wtc.WEEK_NUMBER = dc.WEEK_NUMBER AND wtc.EMPLOYEE_NUMBER ="
SqlQuery = SqlQuery + "@ENumber AND wtc.WEEK_NUMBER = @CBWeekNum"

Try
    con.Open()

    If con.State = ConnectionState.Open Then
        con.ChangeDatabase("shopclocksoftware")
        Command = New MySqlCommand(SqlQuery, con)
        Command.Parameters.AddWithValue("@ENumber", txtENumber.Text);
        Command.Parameters.AddWithValue("@CBWeekNum", CBWeekNum.SelectedItem);

        Data = Command.ExecuteReader()

        Dim aOrdinal As Integer = reader.GetOrdinal("a")
        Dim bOrdinal As Integer = reader.GetOrdinal("b")

        While Data.Read
            txtHUnits.Text = Data.GetString(aOrdinal)
            txtOUnits.Text = Data.GetString(bOrdinal)
        End While
....
Exit Try 
```

需要注意的几点：

1.  我将您的 SQL 更改为使用别名，并返回明确的字段名称。using`*`通常是一个坏主意，尤其是当您实际上只需要列的子集时。
2.  查询现在已参数化，因此您不会受到 SQL 注入攻击
3.  我利用`GetOrdinal`来定位结果集中任何列的位置。这是一个小的优化。
4.  `GetString`如果您返回的列是字符串，则调用。否则，您可以像以前一样调用。

显然我现在不知道你的列名，所以 SQL 不起作用，但你应该明白了。

# excel - 是否可以覆盖 Excel 2007 的右键单击功能并将其替换为自定义菜单？

> ID：14756018
> 
> 赞同：0
> 
> 时间：2013-02-07T16:28:30.423
> 
> 标签：excel, excel-2007, vba

我正在制作一个预测电子表格，我希望它能让我的预测员尽可能轻松地编辑预测。我希望开发一些自定义 VB，允许用户突出显示一组单元格（在一个特定行中），然后右键单击以显示一个菜单，其中包括调整突出显示单元格的各种方法：

1.  增加 10%
2.  将 2 添加到每个突出显示的单元格
3.  将输入值均匀分布到突出显示的单元格
4.  和别的

问题：

1.  如何覆盖 Excel 的右键单击功能，以便当我的预测员右键单击时，他们会获得预测调整器菜单表单，而不是 Excel 标准格式菜单。

2.  谁能指出我所描述的细胞调节器的方向。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:39:45.087

我用它来编辑我的右键菜单：

[右菜单](http://yoursumbuddy.com/menurighter/)

注意：我没有写这个，全部归功于@Doug Glancy

# javascript - 除了 AJAX 和 iframe，还有其他方法可以刷新页面的一部分吗？

> ID：14756021
> 
> 赞同：0
> 
> 时间：2013-02-07T16:28:45.963
> 
> 标签：javascript, jquery, html, ajax

我现在正在使用第三方评论插件，它提供的只是一段脚本，如下所示：

```
<div id="uyan_frame"></div>
<script type="text/javascript"
        id="UYScript"
        src="http://v1.uyan.cc/js/iframe.js?UYUserId=1674366" async="">
</script> 
```

由于它不是实时评论插件，所以我想在它旁边添加一个刷新按钮以手动重新加载它以查看最新评论而不是重新加载整个页面。（我知道 Disqus 是一个很好的评论插件，但我们针对的是中文用户，我必须使用当前的）。

由于它是第三方插件，因此我对它没有太多控制权。而且我也认为 iframe 是一种丑陋的方式来实现这个部分令人耳目一新的事情。那么，还有其他方法可以实现这一目标吗？就像我每次单击刷新按钮时一样，它会清除此脚本生成的所有 HTML 元素，重新创建此脚本标记，将其附加到适当的位置，然后再次运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:46:35.177

您不必使用 iframe，因为它很慢。您可以做的是创建一个 div 或部分并给它一个 id 或类，然后创建一个按钮，单击该按钮将获取脚本并将正确的 html 内容附加到您创建的 div 或部分中。为了更容易理解代码看起来像这样。

```
<section id="content"></section>
<button id="refresher"></button>
<script>

$('#refresher').click(function(){
    //Load your script like so
    $.getScript('url of the script you are trying to get', function(){...})

    //Load your content here
    $('#content').html('Current contents will be erased and will be replaced by whatever you placed here')

    //...or if you need ajax fetching 
    $.ajax({
      url: url,
      success: function(){
        $('#content').html('place your content here and this will erase old content')
      }
    });

})

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:52:03.443

我会问第 3 方公司如何在不刷新整个页面的情况下刷新评论。他们确实开发了这个，他们必须有办法轻松刷新它。

例如，UYComment.refresh(document.getElementById('comment'))

如果您不想问他们，您也可以通过查看他们的 javascript 代码找到这种解决方案。

您可以不使用 3rd-party 提供的代码，即用 ajax 替换 div、刷新 iframe 等，但根据我的经验，它总是让您的代码更混乱。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T16:33:59.097

由于您标记了 jQuery，我假设您正在使用它。

尝试将单击处理程序添加到刷新按钮，然后使用 .html() 示例： $('#uyan_frame').html('');

当您调用 .html 时，它应该替换您调用它的元素，并且它应该调用您传入的字符串中的任何脚本。作为免责声明，这未经测试。

# layout - 如何在 iPhone 的 Safari 和任何桌面浏览器中将文本设置为相同的相对大小？

> ID：14756023
> 
> 赞同：0
> 
> 时间：2013-02-07T16:28:52.983
> 
> 标签：layout, text, size, fluid

我想建立一个在所有屏幕宽度上看起来都完全相同的网站，这意味着整个网站将根据屏幕或更准确地说是视口的宽度进行缩放。

这对于 SVG 图像来说相对容易，并且我可以根据视口的宽度正确缩放所有图像。视口的宽度是所有图像缩放的参考点。但是，任何桌面浏览器和 iPhone 的 Safari（我假设任何移动浏览器）之间的文本参考点都是不同的。

根据我的研究，不同大小的文本似乎有两个可能的原因：默认 CSS 的差异或渲染引擎的差异。由于我在 Chrome 的默认 CSS 或 Firefox 的默认 CSS 上找不到任何对像素大小文本的引用，因此我假设此设置来自渲染引擎。

我的 IP 是动态的，所以我无法提供一个实时示例，但这里是比较[iPhone 的 Safari](http://i48.tinypic.com/ke8du0.jpg)和[桌面上的 Chrome 中](http://i47.tinypic.com/2my6vr9.jpg)的同一站点的屏幕。请注意文本大小的巨大差异。

有什么办法可以使这两个浏览器中的文本具有相同的相对大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T10:00:48.020

此外，如果您想通过使用 rems 来避免级联地狱并尊重原始布局设计，例如 1024px 宽度，您可以坚持：

```
onresize = onload = function(){
  document.querySelector("html").style.fontSize = ( innerWidth * 100 ) / 1024 + "%";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:57:41.637

我在 JavaScript 中找到了答案：

```
onresize=onload=function(){
    document.body.style.fontSize=window.innerWidth/20+"px"
} 
```

它根据 body 元素上的视口宽度设置文本大小。由于在 em 中设置的所有文本的大小都与它们的父元素相关，因此所有文本的大小都与 body 元素相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T06:10:31.333

你应该试试[CSS Unit`vw`](http://www.w3schools.com/cssref/css_units.asp)，像这样：

```
body { font-size: 1.5vw; } 
```

但是，我不确定移动浏览器是否支持它...

## 编辑

[在此处](http://caniuse.com/#feat=viewport-units)检查浏览器兼容性。

# javascript - Firebase 的通用 Javascript 代理

> ID：14756024
> 
> 赞同：3
> 
> 时间：2013-02-07T16:28:55.070
> 
> 标签：javascript, proxy-classes, firebase

我正在使用代理类，因为我拥有的数据是对存储我的对象的 Firebase 位置的引用，但我想表现得好像我拥有对象本身一样。我有一些工作正常的东西，但我想改进它，关键标准是减少重复。我怀疑通过检查 Map 类并使用 apply() 可能会发生一些事情，但我不知道该怎么做（或者是否有更好的解决方案）。

我认为，如果可以将解决方案推广到支持任何类，而不仅仅是 Map 类，那也会很有用。

```
var Map = function() {
  ...
};

var MapProxy = function(mapRef) {
  this.mapRef = mapRef;
};

Map.prototype.addToken = function(portrait, newLocation) {
  ...
};

Map.prototype.removeToken = function(token) {
  ...
};

Map.prototype.moveToken = function(token, newLocation) {
  ...
};

MapProxy.prototype.addToken = function(portrait, newLocation) {
  var mapRef = this.mapRef;

  mapRef.once('value', function(data) {
    var map = new Map();
    map.init(mapRef, data.val());

    map.addToken(portrait, newLocation);
  });
};

MapProxy.prototype.removeToken = function(token) {
  var mapRef = this.mapRef;

  mapRef.once('value', function(data) {
    var map = new Map();
    map.init(mapRef, data.val());

    map.removeToken(token);
  });
};

MapProxy.prototype.moveToken = function(token, newLocation) {
  var mapRef = this.mapRef;

  mapRef.once('value', function(data) {
    var map = new Map();
    map.init(mapRef, data.val());

    map.moveToken(token, newLocation);
  });
};

var mapProxy = new MapProxy(mapRef); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:10:10.130

想我最后自己解决了。

```
var FirebaseProxy = function(classToProxy, firebaseRef) {
  var key,
      self = this;

  self.proxy = classToProxy;
  self.firebaseRef = firebaseRef;

  for (key in self.proxy.prototype) {
    if (typeof self.proxy.prototype[key] === 'function') {
      (function(inner_key) {
        self[inner_key] = function ()
        {
          var args = arguments;

          self.firebaseRef.once('value', function(data) {
            var proxiedInstance = new self.proxy();

            if (typeof proxiedInstance.init === 'function') {
              proxiedInstance.init(self.firebaseRef, data.val());
            }

            proxiedInstance[inner_key].apply(proxiedInstance, args);
          });
        } 
      })(key);        
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:50:08.220

我不认为我完全遵循你想要完成的事情。你能放弃代理而只使用这样的东西吗？

```
var Map = function(mapRef) {
  mapRef.on('value', function(snap) {
    this.init(snap.val());
  });
};

Map.prototype.init = function(data) {
  // update internal state with new data from Firebase ...
};

... 
```

由于每次 mapRef 处的数据更改时都会触发“值”，因此您的地图对象将始终拥有最新数据。

值得注意的是，如果您需要定期获取最新的地图数据，您可能应该使用 .on()，而不是 .once()。.once() 将在您每次请求时从服务器检索数据，而 .on() 将始终缓存最新数据（因为它订阅更新）。所以它会更快并且使用更少的带宽。

# xcode - 如何将 Xcode 降级到以前的版本？

> ID：14756026
> 
> 赞同：122
> 
> 时间：2013-02-07T16:29:01.160
> 
> 标签：xcode, uninstallation, downgrade

我必须偶尔使用 Xcode，现在遇到了一个问题，我已经升级到 Xcode 4.6，但是我正在使用的另一个软件不支持它，所以我需要回到 Xcode 4.5。

我不习惯 Mac 的一般工作方式，所以如果提供的答案可以考虑到这一点，那会很有帮助。:)

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2013-02-07T16:33:30.127

我假设您至少拥有 OSX 10.7，因此请继续进入应用程序文件夹（单击 Finder 图标 > 在侧边栏上，您将找到“应用程序”，单击它），删除“Xcode”图标。这将从您的系统中完全删除 Xcode。重启你的mac。

现在转到[Xcode Releases 页面](https://xcodereleases.com)或[Apple Developer More Downloads](https://developer.apple.com/download/more/)并根据需要下载**旧版本的 Xcode**并安装。您需要一个 Apple ID 才能登录该门户。

安装后，您还可以在多个版本之间切换：

Xcode > 首选项 > 位置 > 命令行工具

[![Xcode 切换版本](../Images/be00eb17cd4dccb64aec58ce48a68187.png)](https://i.stack.imgur.com/YLFrN.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-07T16:30:58.837

当您登录到您的开发者帐户时，您可以在 Xcode 下载部分的底部找到一个链接，上面写着[“正在寻找旧版本的 Xcode？”。](https://developer.apple.com/downloads/index.action?name=Xcode). 在那里你可以找到旧版本 Xcode 和其他开发者工具的下载链接

# ios - UIWebview 中的 iOS pdf，错误 FT_Select_Charmap 失败

> ID：14756033
> 
> 赞同：1
> 
> 时间：2013-02-07T16:29:30.380
> 
> 标签：ios, xcode, pdf, uiwebview, load

我已经环顾了一段时间，但似乎找不到答案。我使用将我的pdf加载到UIWebview中；

`[myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:path ofType:@"pdf"]]]];`

在控制台中，我收到以下错误；

FT_Select_Charmap 失败：错误 6

FT_Select_Charmap 失败：错误 38

现在，据我所知，这不会导致应用程序崩溃，但我想知道原因。

谢谢

# php - 创建具有多个重写规则的友好 URL？

> ID：14756034
> 
> 赞同：0
> 
> 时间：2013-02-07T16:29:30.003
> 
> 标签：php, .htaccess, url-rewriting

```
RewriteEngine on

RewriteBase /school/courses/more-courses/courses-type/coursedetails/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule [^/]+ index.php [QSA,L] 
```

因此使用 php 将 /coursedetails/ 部分替换为课程名称，例如 /school/courses/more-courses/courses-type/cooking/，因此上面的脚本会将不存在的所有内容重定向到 index.php。

我想要做的是创建一个友好的 URL 来映射，例如，/school/courses/more-courses/courses-type/cooking/ 到 /school/courses/cooking/

这是否可以通过添加额外的重写规则来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:49:37.390

那这个呢：

```
RewriteBase ^/school/courses/([a-z\-]+/){1,5}$ 
```

这允许您拥有任何以 开头的 URL `/school/courses/`，然后是模式中的任何内容（1-5 次）`folder-name/`。现在，在您的引导程序 (index.php) 中，您可以获得请求 URI 并相应地处理操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:42:25.490

```
RewriteRule ^/school/courses/more-courses/courses-type/cooking/$ /school/courses/cooking/ [R,L] 
```

# php - 将 UTF8 插入到 MYSQL 的 PHP 脚本

> ID：14756039
> 
> 赞同：0
> 
> 时间：2013-02-07T16:29:38.993
> 
> 标签：php, mysql, utf-8

我有 php & mysql 的问题，使用 utf-8 插入数据库。第一个文件：addsite：

```
<?php
include 'header.php';
if(isset($data)) {
foreach($_POST as $key => $value) {
$posts[$key] = filter($value);
}
if(isset($posts['type'])){
if($posts['url'] == "http://" || $posts['url'] == ""){
$error = "Add your page link!";
}else if($posts['title'] == ""){
$error = "Add your page title!";
}else if(!preg_match("/\bhttp\b/i", $posts['url'])){
$error = "URL must contain http://";
}else if(!preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i',       $posts['url'])){
$error = "Please do not use special characters in the url.<";
}else{
    include "plugins/" . $posts['type'] . "/addsite.php";
}
}
?>
<div class="contentbox">
<font size="2">
<li>Pick the type of exchange you are promoting from the dropdown menu.</li>
<li>Set the amount of coins you wish to give per user complete(CPC).</li>
<li>The higher the amount of coins the higher the Links position.</li>
</div>
<div class="contentbox">
<div class="head">Add Site</div>
<div class="contentinside">
    <?php if(isset($error)) { ?>
    <div class="error">ERROR: <?php echo $error; ?></div>
    <?php }
    if(isset($success)) { ?>
    <div class="success">SUCCESS: <?php echo $success; ?></div>
    <?php }
    if(isset($warning)) { ?>
    <div class="warning">WARNING: <?php echo $warning; ?></div>
    <?php } ?>

    <form class="contentform" method="post">
        Type<br/>
        <select name="type"><?php $select = hook_filter('add_site_select', ""); echo   $select; ?></select><br/><br/>
        Link<br/>
        <input name="url" type="text" value="<?php if(isset($posts["url"])) { echo $posts["url"]; } ?>"/><br/><br/>
        Title<br/>
        <input name="title" type="text" value="<?php if(isset($posts["title"])) { echo $posts["title"]; } ?>"/><br/><br/>
        Cost Per Click<br/>
        <?php if($data->premium > 0) { ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->premcpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php }else{ ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->cpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php } ?>
        <input style="width:40%;" type="Submit"/>
    </form>
</div>
 </div>
<?php
 }
else
 {
echo "Please login to view this page!";
 }
 include 'footer.php';
  ?> 
```

第二个文件，插件 addsite.php ：

```
<?php
header('Content-Type: text/html; charset=utf-8');
mysql_query("SET NAMES utf8");
$num1 = mysql_query("SELECT * FROM `digg` WHERE `url`='{$posts['url']}'");
mysql_query("SET NAMES utf8");
$num = mysql_num_rows($num1);
mysql_query("SET NAMES utf8");
if($num > 0){
$error = "Page already added!";
}else if(!strstr($posts['url'], 'digg.com')) {
$error = "Incorrect URL! You must include 'digg.com'";
}else{
mysql_query("SET NAMES utf8");
   mysql_query("INSERT INTO `digg` (user, url, title, cpc) VALUES('{$data->id}',    '{$posts['url']}', '{$posts['title']}', '{$posts['cpc']}') ");
  $success = "Page added successfully!";
}
?> 
```

当我在表单中编写阿拉伯语并提交时，它以未知语言进入数据库，例如：

Oslash;£Ø³Ù

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:01:30.463

3 解决方案在您的情况下...

首先，您可以在 UTF-8 字符集中创建数据库，不需要转换。

其次，您可以测试此代码...

```
htmlentities(urldecode( $my_var_to_utf8 ), ENT_QUOTES, 'UTF-8'); 
```

如果它不起作用，请尝试此功能...

```
function to_utf8( $string ) {
        // From http://w3.org/International/questions/qa-forms-utf-8.html
        if ( preg_match('%^(?:
                [\x09\x0A\x0D\x20-\x7E]              # ASCII
                | [\xC2-\xDF][\x80-\xBF]             # non-overlong 2-byte
                | \xE0[\xA0-\xBF][\x80-\xBF]         # excluding overlongs
                | [\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}  # straight 3-byte
                | \xED[\x80-\x9F][\x80-\xBF]         # excluding surrogates
                | \xF0[\x90-\xBF][\x80-\xBF]{2}      # planes 1-3
                | [\xF1-\xF3][\x80-\xBF]{3}          # planes 4-15
                | \xF4[\x80-\x8F][\x80-\xBF]{2}      # plane 16
        )*$%xs', $string) ) {
        return $string;
        } else {
            return iconv('CP1252', 'UTF-8', $string);
        }
    } 
```

要使用...

```
echo(to_utf8($my_var_to_utf8)); 
```

# robots.txt - 如何在 robots.txt 中使用通配符

> ID：14756042
> 
> 赞同：0
> 
> 时间：2013-02-07T16:29:47.840
> 
> 标签：robots.txt

是否有可能：

```
User-agent: *
Disallow: /apps/abc*/ 
```

在 robots.txt 文件中禁止 abc123、abc-xyz 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:33:02.503

引用[维基百科](http://en.wikipedia.org/wiki/Robots_exclusion_standard#Universal_.22.2A.22_match)：

> 机器人排除标准没有提及 Disallow: 语句中有关“*”字符的任何内容。一些爬虫，如 Googlebot 和 Slurp 识别包含“*”的字符串，而 MSNbot 和 Teoma 以不同的方式解释它。

其他研究可以在[引用的来源](http://ghita.org/search-engines-dynamic-content-issues.html)中找到。

# if-statement - 如果使用 Imacros (IE) 找到图像，如何执行命令

> ID：14756044
> 
> 赞同：0
> 
> 时间：2013-02-07T16:29:51.860
> 
> 标签：if-statement, imacros

我知道如何让 Imacros 搜索图像，但我的问题是，我希望 imacros 搜索图像，如果找到执行此命令，否则执行此命令，我需要在 Imacros 中使用 IF 语句，我知道在 Firefox 上可用，在 Javascript 中，但我不能使用 Firefox，所以我基本上想要的是：

ImageCheck，如果找到，请执行此命令，否则请执行此命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:22:45.700

那应该是这样的。我认为无法在 IE 上使用它，也无法在 FireFox 中使用它。我不知道任何其他可以在 IE 中工作的代码，因为没有 JavaScript 就无法完成。

```
 var macroSearchImage;

macroSearchImage ="CODE:";
macroSearchImage +="TAG POS=1 TYPE=IMG ATTR=HREF:www.somelink.com/image.png CONTENT=EVENT:MOUSEOVER"+"\n";

if(iimPlay(macroSearchImage)>0)
{
alert("image found");

//do something
}
else
{
alert("Image not found");

//do something
}

//end of the code 
```

# sql-server - WITH 语句是每个查询执行一次还是每行执行一次？

> ID：14756047
> 
> 赞同：3
> 
> 时间：2013-02-07T16:30:02.417
> 
> 标签：sql-server, performance, sql-server-2008, common-table-expression, with-statement

我对 WITH 语句 (CTE) 的理解是它每次查询执行一次。使用这样的查询：

```
WITH Query1 AS ( ... )
SELECT *
FROM
    SomeTable t1
    LEFT JOIN Query1 t2 ON ... 
```

如果这导致 100 行，我希望`Query1`它只执行一次 - 而不是 100 次。如果该假设是正确的，则运行整个查询所花费的时间大致等于执行以下操作所花费的时间： run `Query1`+ select from `SomeTable`+ join `SomeTable`to `Query1`。

我处于以下情况：

*   `Query1`单独运行大约需要 5 秒（40 万行）。
*   查询的其余部分，在删除`WITH`语句后`LEFT JOIN`需要大约 15 秒（400k 行）。

`WITH`因此，当使用语句和原地运行整个查询时`LEFT JOIN`，我希望查询能够及时完成，而不是让它运行了一个多小时，一旦停止，它只得到了 11k 行.

我显然错了，但为什么呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T00:21:46.840

例子：

```
SET NOCOUNT ON;
SET IMPLICIT_TRANSACTIONS ON;

CREATE TABLE MyTable (MyID INT  PRIMARY KEY);
GO
INSERT  MyTable (MyID)
VALUES  (11), (22), (33), (44), (55);

PRINT 'Test MyCTE:';
WITH MyCTE
AS (
    SELECT  *, ROW_NUMBER()OVER(ORDER BY MyID) AS RowNum
    FROM    MyTable
)
SELECT  *
FROM    MyCTE crt
LEFT JOIN MyCTE prev ON crt.RowNum=prev.RowNum+1;

ROLLBACK; 
```

如果您在 SSMS 中运行之前的脚本（按`Ctrl+M`-> 实际执行计划），那么您将获得最后一个查询的执行计划： ![在此处输入图像描述](../Images/c9688e88427821d1d1c66c3c77f020a6.png)

在这种情况下，CTE 对 alias 执行一次，对`crt`alias 执行五 (!) 次`prev`，对于 from 中的每一行执行一次`crt`。

所以，这个问题的答案

> WITH 语句是每个查询执行一次还是每行执行一次？

是`both`：每个查询一次（`crt`）和每行一次（`prev`：一次 for each for from `crt`）。

要优化此查询，首先，1）您可以尝试将 CTE（`MyCTE`或`Query`）的结果存储到表变量或临时表中

2）将此表的主键定义为连接列，

3）重写最终查询以使用此表变量或临时表。

当然，您可以尝试在 CTE 之间没有这种自连接的情况下重写最终查询。

# wpf - WPF 弹出面板占用所需空间

> ID：14756049
> 
> 赞同：0
> 
> 时间：2013-02-07T16:30:03.667
> 
> 标签：wpf, frontend

我在使弹出通知面板仅占用其内部控件所需的空间时遇到问题。

我有什么：

```
 <Grid>
    <DockPanel Panel.ZIndex="1111" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Stretch" Visibility="{Binding MessageVisibility}">
        <Button Visibility="Collapsed" Name="clickButton" Command="{Binding Path=CloseMessage}"/>
        <Border Background="LightGray" CornerRadius="20" MouseDown="Border_MouseDown" BorderThickness="8" BorderBrush="CadetBlue">
            <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Margin="20px">
                <ItemsControl Grid.Column="0" Grid.Row="0" ItemsSource="{Binding Messages}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock TextBlock.TextAlignment="Center" Text="{Binding FallbackValue='Message'}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                </ItemsControl>

            </Grid>
        </Border>
    </DockPanel>
    <DockPanel  Panel.ZIndex="0">
...
    </DockPanel>
</Grid> 
```

我试图让第一个 DockPanel 只占用 ItemsControl 所需的空间。它似乎占据了整个空间。设置宽度/高度将使其保持在中心，但不会让它增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:49:22.137

从 DockPanel 更改为 Stackpanel 并设置水平/垂直对齐中心有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:54:55.767

以下修改后的代码可能会有所帮助并解决您的专业问题

```
<Grid>
           <Grid.RowDefinitions>            
                <RowDefinition/>            
                <RowDefinition/>            
            </Grid.RowDefinitions> 
       <Grid.ColumnDefinitions>          
             <ColumnDefinitions/>
       </Grid.ColumnDefinitions>          

    <DockPanel Panel.ZIndex="1111" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Stretch" Visibility="{Binding MessageVisibility}">
        <Button Visibility="Collapsed" Name="clickButton" Command="{Binding Path=CloseMessage}"/>
        <Border Background="LightGray" CornerRadius="20" MouseDown="Border_MouseDown" BorderThickness="8" BorderBrush="CadetBlue">
            <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Margin="20px">
                <ItemsControl Grid.Column="0" Grid.Row="0" ItemsSource="{Binding Messages}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock TextBlock.TextAlignment="Center" Text="{Binding FallbackValue='Message'}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                </ItemsControl>

            </Grid>
        </Border>
    </DockPanel>
    <DockPanel  Panel.ZIndex="0" Grid.Column="0" Grid.Row="1">
...
    </DockPanel>
</Grid> 
```

# php - 根据记录的用户类型加载视图

> ID：14756054
> 
> 赞同：0
> 
> 时间：2013-02-07T16:30:19.347
> 
> 标签：php, codeigniter

我实际上在我的项目中使用 Codeigniter 和 php，当用户登录页面时，如果普通用户加载相同的视图，如果他是管理员但更改了其中的一些内容。

我认为将变量传递给控制器​​并根据它加载视图，并根据用户进行更改。但它的 url 似乎不太酷，让我们这样：

```
 public function dc($q="")
    {
        if($q=="o")
        {

        // Here i have to change some parts of the template for normal users
        $this->load->view('Main/template_main', $data, FALSE);
        }elseif ($q=="a") {
            // Here i have to change some parts of the template for admins
        $this->load->view('Main/template_main', $data, FALSE); 
```

url 就像 www.xxx.com/controller/o 或 /a 我想看到它像 www.xxx.com/controller 因为它的索引页..

谢谢你的时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:53:24.450

您应该按照 Damien 建议的方式处理此问题。您的控制器应设置会话数据，例如：

```
$this->session->set_userinfo('is_admin', FALSE); 
```

然后，当您检查了登录凭据后，您可以在用户是管理员时设置会话数据：

```
$this->session->set_userinfo('is_admin', TRUE); 
```

然后，在您的页面上，您可以根据此值设置谁可以看到什么。

# c# - 我应该使用线程异步访问连接到 PCI 总线的设备吗？

> ID：14756055
> 
> 赞同：4
> 
> 时间：2013-02-07T16:30:20.677
> 
> 标签：c#, multithreading, asynchronous, pci

我有一块硬件通过 PCI 总线连接到我的 PC。我正在通过设备驱动程序周围的 .NET 包装器访问硬件。

我没有关于设备如何执行 PCI 的任何规范。这让我想到了我的第一个问题。

1）通过PCI连接的设备是否保证以一定的速度传输数据？

2) 与设备通信时，我希望我的 UI 保持响应。在（线程池）线程中启动与设备的通信是个好主意，或者与访问 PCI 总线的速度相比，与此相关的开销是否太大？

**编辑：**
问题重写。过多地反映了漫长工作日的结束。
删除了线程是线程池线程的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:22:01.100

一般来说，只要有机会编写没有线程关联的代码，这样做通常是个好主意。这样一来，当它成为响应性问题时，您可以自由关闭 UI 线程。使用异步方法为此 I/O 设计您的 API 还可以让您的选项以一种良好的方式向前发展。

如果您不必长时间占用它，您所在的线程是线程池线程还是您自己生成的线程似乎无关紧要。如果你可以做异步 I/O，那么线程池线程应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T18:43:40.447

> 通过 PCI 连接的设备是否可以保证以一定的速度传输数据？

不。据我了解，[PCI是一种具有](http://en.wikipedia.org/wiki/Conventional_PCI)[总线主控](http://en.wikipedia.org/wiki/Bus_mastering)功能的共享总线，该功能允许单个设备临时利用全部总线带宽。在[非服务器环境](http://en.wikipedia.org/wiki/Conventional_PCI#Conventional_hardware_specifications)中，这通常意味着 133MB/s 的带宽。一旦 PCI 总线上有几个 I/O 卡，您就可以看到带宽在负载下可能变得稀缺。行为不端的设备也会对延迟产生不利影响；一些控制器挂起，直到其驱动器响应 I/O，但允许，这是一种异常情况。

> 与设备通信时，我希望我的 UI 保持响应。在（线程池）线程中启动与设备的通信是个好主意，或者与访问 PCI 总线的速度相比，与此相关的开销是否太大？

在编写面向用户的软件时，将 UI 与 I/O 或其他可能长时间运行的进程分开总是一个好主意。例如，现代 Android SDK 在其 HTTP 客户端中强制执行此操作 - 如果在 UI 线程上执行 HTTP 请求，它会引发异常。

根据您所针对的 .NET 框架的版本，您可以使用多种选项将设备通信与 UI 分开。查看[.NET Framework 中的并行处理和并发，以](http://msdn.microsoft.com/en-us/library/hh156548.aspx)获得各种选项的高级概述。线程是低级抽象，您可能会发现使用更高级别的抽象（例如[Tasks](http://msdn.microsoft.com/en-us/library/hh873175.aspx)或 C# 的[async 和 await 关键字](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)）更容易且不易出错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T08:32:47.877

我认为当您需要监控硬件状态时，使用长时间运行的后台线程是有意义的。[TaskCreationOptions.LongRunning](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Threading.Tasks.TaskCreationOptions.LongRunning%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)看起来很合适。

此外，使用 C# 的新 async/await 功能与设备异步交互对我来说很有意义。我不确定它是否会有所帮助，但这里有一个片段来说明我通常如何处理硬件交互（对我来说通常是 WinUSB 设备）：

```
class Controller : IDisposable // to dispose the unmanaged resources related to the hardware
{
    // this will be used to call back to the UI
    private static readonly SynchronizationContext DefaultContext = new SynchronizationContext();

    public Controller()
    {         
        Task.Factory.StartNew(this.Monitor, ct, TaskCreationOptions.LongRunning);
    }

    public async Task<Result> ActionOnHardwareAsync(object parameter)
    {
        // you may need to synchronize with the monitor method here.  
    }

    // This method monitors hw status, calling back to the UI when something happens
    private void Monitor(object state)
    {
        // Do some stuffs...
        this.synchronizationContext.Post(~ your SendOrPostCallback here ~, ~ event from the hw ~);
    }
} 
```

# hash - ie8书签#点击移动页面

> ID：14756057
> 
> 赞同：0
> 
> 时间：2013-02-07T16:30:24.617
> 
> 标签：hash, internet-explorer-8, scroll, jcarousel, bookmarks

我有一些基本控件是没有网址的锚点，例如

```
 <a id="UP" href="#">UP</a> 
```

有 jQuery 东西将它附加到点击事件（它是一个隐藏溢出的 jcarousel 控件）

我知道 onclick 需要在其上返回 false 以停止滚动到该锚点的页面上的“#”。问题是，在新加载时，没有滚动并且 UP 点击全部在视图中，页面仍然移动。更糟糕的是，# 似乎有 3 或 4 个不同的地方！当我反复单击 UP 时，页面会在我单击并单击时上下移动几个像素。这总是不同于页面最初呈现的绝对顶部。

是否由于剪辑导致列表溢出不再可见？调整元素的高度以使列表项均匀裁剪是否会阻止这种情况？还是有其他一些我不知道的 ie8 缺陷？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:54:16.483

经过一番跟踪和错误后，我发现我需要“返回 false”点击处理程序，以便它停止事件链继续（即，跟随散列）。此外，我调整了包装纸和剪刀的高度，使它们均匀，因为这是 3 或 4 个不同高度移动的踢脚线

# ios - 更改viewController iOS4.3后崩溃

> ID：14756058
> 
> 赞同：1
> 
> 时间：2013-02-07T16:30:25.553
> 
> 标签：ios, objective-c, xcode, crash-reports

我想知道为什么我的 iOS 应用程序（部署目标 iOS 4.3 - xcode 4）会崩溃。

我在 iPad 模拟器 5.0 到 6.1 中进行了测试，并且可以 100% 工作，但在我的 iPad 上使用 iOS 4.3（嗯，它不是我的，所以我无法更新 iOS，但最好用旧的 iOS 版本练习）使应用程序崩溃，这样说：

```
2013-02-07 16:07:45.093 GeoRuta[169:707] -[mainViewController presentViewController:animated:completion:]: unrecognized selector sent to instance 0x331960
2013-02-07 16:07:45.113 GeoRuta[169:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[mainViewController presentViewController:animated:completion:]: unrecognized selector sent to instance 0x331960'
*** Call stack at first throw:
(
0   CoreFoundation                      0x30f8064f __exceptionPreprocess + 114
1   libobjc.A.dylib                     0x32828c5d objc_exception_throw + 24
2   CoreFoundation                      0x30f841bf -[NSObject(NSObject) doesNotRecognizeSelector:] + 102
3   CoreFoundation                      0x30f83649 ___forwarding___ + 508
4   CoreFoundation                      0x30efa180 _CF_forwarding_prep_0 + 48
5   GeoRuta                             0x00003781 -[mainViewController saltarConfiguracion:] + 184
6   CoreFoundation                      0x30ef0571 -[NSObject(NSObject) performSelector:withObject:withObject:] + 24
7   UIKit                               0x3575eec9 -[UIApplication sendAction:to:from:forEvent:] + 84

8   UIKit                               0x3575ee69 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 32
9   UIKit                               0x3575ee3b -[UIControl sendAction:to:forEvent:] + 38
10  UIKit                               0x3575eb8d -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 356
11  UIKit                               0x3575f423 -[UIControl touchesEnded:withEvent:] + 342
12  UIKit                               0x3575dbf5 -[UIWindow _sendTouchesForEvent:] + 368
13  UIKit                               0x3575d56f -[UIWindow sendEvent:] + 262
14  UIKit                               0x35746313 -[UIApplication sendEvent:] + 298
15  UIKit                               0x35745c53 _UIApplicationHandleEvent + 5090
16  GraphicsServices                    0x31a4de77 PurpleEventCallback + 666
17  CoreFoundation                      0x30f57a97 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 26
18  CoreFoundation                      0x30f5983f __CFRunLoopDoSource1 + 166
19  CoreFoundation                      0x30f5a60d __CFRunLoopRun + 520
20  CoreFoundation                      0x30eeaec3 CFRunLoopRunSpecific + 230
21  CoreFoundation                      0x30eeadcb CFRunLoopRunInMode + 58
22  GraphicsServices                    0x31a4d41f GSEventRunModal + 114
23  GraphicsServices                    0x31a4d4cb GSEventRun + 62
24  UIKit                               0x35770d69 -[UIApplication _run] + 404
25  UIKit                               0x3576e807 UIApplicationMain + 670
26  GeoRuta                             0x000030a9 main + 172
27  GeoRuta                             0x00002ff8 start + 40
)
terminate called after throwing an instance of 'NSException' 
```

选择器是：

```
- (IBAction) saltarConfiguracion: (id)sender
{
    configuracionViewController *obj = [[configuracionViewController alloc]initWithNibName:@"configuracionViewController" bundle:nil];
    [self presentViewController:obj animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T16:34:44.110

因为`[self presentViewController:obj animated:YES completion:nil]`是一个新的 iOS 5 方法。你不能在 iOS 4 上使用它。相反，尝试调用`[self presentModalViewController:obj animated:YES]`（类似的东西）

# javascript - jQuery Mobile 1.2.0 任何页面 onClick 隐藏固定页脚

> ID：14756061
> 
> 赞同：7
> 
> 时间：2013-02-07T16:30:39.020
> 
> 标签：javascript, jquery-mobile

在 jQuery Mobile 1.2.0 中修复页脚后，只要我单击页面上的任何位置，页脚就会向下滑动。经过检查，我发现 ui-fixed-hidden 类被应用于页脚，但我不知道为什么。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T16:30:39.020

在 data-position="fixed" 发生的任何地方添加以下内容可以解决问题

```
data-tap-toggle="false" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-07T12:27:31.657

我使用的是 PrimeFaces 5.0 最终版本，这意味着我使用的是 jQuery Mobile 1.4.2。

我按照这里的建议添加了 data-tap-toggle="false" （以及关于stackoverflow的许多其他问题），但这并没有解决我的标题问题。

```
<div data-role="header" data-position="fixed" data-tap-toggle="false"> 
```

所以，我还添加了以下内容，这解决了我的问题。

```
.ui-header.ui-fixed-hidden {
    position: fixed !important;
} 
```

# jquery - 获取提交函数事件之外的变量内容

> ID：14756064
> 
> 赞同：-1
> 
> 时间：2013-02-07T16:30:44.557
> 
> 标签：jquery

这是我的第三个问题，所以请理解:)。

我有这个提交功能 - 没什么特别的，只是一个 serializeArray() 和一些检索到的值：

```
$("#myform").submit(function(){

    var formdata = $(this).serializeArray();
    var values = {};

    $.each(formdata, function(i, field){
        values[field.name] = field.value
    });

    var id = values["mrmid"];

}); 
```

**如何在提交函数事件之外传递 id 变量，以便可以在此 div 上写入变量 id 的内容？**

```
$("#results").html(id); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:33:49.897

```
$("#myform").submit(function(){

    var formdata = $(this).serializeArray();
    var values = {};

    $.each(formdata, function(i, field){
        values[field.name] = field.value
    });

    var id = values["mrmid"];

    $("#results").html(id);

}); 
```

我想我不明白。这很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:33:55.917

更改`id`为**全局变量**：

```
var id;

$("#myform").submit(function(){

    var formdata = $(this).serializeArray();
    var values = {};

    $.each(formdata, function(i, field){
        values[field.name] = field.value
    });

    id = values["mrmid"];

});

$("#results").html(id); 
```

# android - 如何更改 AndEngine 上的背景纹理？

> ID：14756065
> 
> 赞同：1
> 
> 时间：2013-02-07T16:30:50.787
> 
> 标签：android, background, andengine

我有一个背景纹理，并想将其更改为其他背景纹理。我已经阅读并测试了一些关于背景纹理的样本，但第二个背景没有显示。

这是我用来尝试更改的最后一个代码......有人可以帮忙吗？谢谢

```
 Scene scene1 = new Scene();
    ITexture backgroundTexture1 = null;
    try {
        backgroundTexture1 = new BitmapTexture(this.getTextureManager(), new IInputStreamOpener() {
            @Override
            public InputStream open() throws IOException {
                return getAssets().open("gfx/crackedscreen.png");
            }
        });
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    backgroundTexture1.load();
    this.mBackgroundTextureRegion1 = TextureRegionFactory.extractFromTexture(backgroundTexture1);
    Sprite backgroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion1, getVertexBufferObjectManager());
    scene1.attachChild(backgroundSprite);
    scene1.setBackgroundEnabled(true);
    return scene1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:14:38.730

我在使用 Sprites 更改背景时也遇到了一些麻烦。我终于成功使用了 SpriteBackground。只需从您的 Sprite 创建一个：

```
SpriteBackground background = new SpriteBackground(backgroundSprite); 
```

不要调用 attachchild，而是调用 setBackground：

```
scene.setBackground(background); 
```

# sql - 将 nvarchar 转换为日期列

> ID：14756067
> 
> 赞同：1
> 
> 时间：2013-02-07T16:30:56.417
> 
> 标签：sql, sql-server

我有一个表，其中有一列以 m/d/yyyy 格式存储在*nvarchar(50)*数据类型中的日期（我继承了这个......）。我想将这些列转换为*日期*数据类型，以便正确存储它们，但不能意外删除列中的数据。

我已经尝试在 SQL Server 2008R2 中执行此操作，使用设计器将数据类型更改为最新。这适用于我的测试列（保留日期、更正格式等），但所有空值都变为 1900-01-01。我可以忍受，但似乎有一个更有说服力的解决方案。

但是，当我在真实数据列上尝试时，我收到了一个错误：

> 无法修改表。从字符串转换日期和/或时间时转换失败。

处理这个问题的正确方法是什么？对不起，如果这是重复的。我一直在寻找一个小时，还没有弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:34:43.903

您显然在表中的某处有 SQL Server 无法转换为日期的数据。您可以通过以下方式找到带有查询的行：

```
SELECT * FROM TableName WHERE ISDATE(ColumnName) != 1 
```

显然，您需要将 TableName 和 ColumnName 替换为实际名称。

一旦您确定了包含错误数据的行，处理它取决于您...手动更改每行的数据，将它们设置为空，在这种情况下您认为可以接受的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:33:50.650

我建议您添加一个具有 Date 数据类型的新列，然后转换/复制数据，最后删除原始列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:34:26.120

你能做的是

1.  在类型表中添加另一列`DATETIME`

2.  通过将现有列值转换为来更新新列值`DATETIME`

3.  删除现有列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T16:38:51.217

也许您可以暂时复制数据类型为 date 的列，这样您可以运行更新命令将 varchar 转换为 datetime 并将其存储在这个新列中，当您确定所有信息都正确时，您可以删除列并将新列重命名为其原始名称。

当我需要确保不会丢失有关更改数据类型的信息时，我总是这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:00:52.077

您可以使用以下查询来更新您的日期，`ISO Format (yyyymmdd)`这将保证在任何服务器上工作。[SQL SERVER - DEMO](http://sqlfiddle.com/#!3/efba1/4)涵盖了 4 种可能的日期情况，例如`'d/m/yyyy'`,`'dd/m/yyyy'`和`'d/mm/yyyy'`&`'dd/mm/yyyy'`并将它们更新为`ISO Format`

```
Update mytable
Set d = right(d,charindex('/',reverse(d),1)-1) + 
            right('0' + substring(d, charindex('/',d,1) + 1, charindex('/', d, charindex('/',d,1) + 1 ) - charindex('/',d,1) -1 ),2) +
            right('0' + left(d,charindex('/',d,1)-1),2) 
```

***或者***您可以直接在选择查询中使用此方法

```
Select id,convert(date,
            right(d,charindex('/',reverse(d),1)-1) + 
            right('0' + substring(d, charindex('/',d,1) + 1, charindex('/', d,
                        charindex('/',d,1) + 1 ) - charindex('/',d,1) -1 ),2) +
            right('0' + left(d,charindex('/',d,1)-1),2)
            ) correctDate
From mytable 
```

# python - 如何在 Python 中定义具有默认参数值和可选参数的函数？

> ID：14756069
> 
> 赞同：2
> 
> 时间：2013-02-07T16:30:58.793
> 
> 标签：python

我想定义一个可以省略输入参数或具有默认值的函数。

我有这个功能：

```
def nearxy(x,y,x0,y0,z):
   distance=[]
   for i in range(0,len(x)):   
   distance.append(abs(math.sqrt((x[i]-x0)**2+(y[i]-y0)**2)))
   ...
   return min(distance) 
```

我想要 make`x0`并`y0`有一个默认值，`z`如果我没有一个`z`值，则让它成为可选的。

我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T16:34:17.677

你不能在 Python 中使函数参数成为可选的，但你可以给它们默认值。所以：

```
def nearxy(x, y, x0=0, y0=0, z=None):
    ... 
```

这使得`x0`并`y0`具有默认值`0`，并且`z`具有默认值`None`。

假设`None`作为 的实际值没有意义`z`，那么您可以在函数中添加逻辑以`z`仅在它不是时才执行某些操作`None`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T16:34:52.597

```
def nearxy(x, y, x0 = 0, y0 = 0, z = None):
   ... 
```

检查 if `z`is`None`看它是否被省略了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T16:36:56.583

像这样给 x0,y0 提供默认值，如果 z 也是可选的：

```
def nearxy(x,y,x0=0,y0=0,z=None):
   distance=[]
   for i in range(0,len(x)):   
   distance.append(abs(math.sqrt((x[i]-x0)**2+(y[i]-y0)**2)))
   if z is not None:
        blah blah
   return min(distance) 
```

称呼 ：

```
nearxy(1,2) 
```

如果您只想分配 z ：

```
 nearxy(1,2,z=3) 
```

……

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T16:35:10.503

要指定默认值，请使用“=”定义参数，然后定义值。

指定默认值的参数*是*可选参数。

例如，如果您希望`x0`、`y0`和`z`具有默认值 1、2、3：

```
def nearxy(x,y,x0=1,y0=2,z=3):
   distance=[]
   for i in range(0,len(x)):   
       distance.append(abs(math.sqrt((x[i]-x0)**2+(y[i]-y0)**2)))
   ...
   return min(distance) 
```

有关更多信息，请参阅[http://docs.python.org/2/tutorial/controlflow.html#default-argument-values](http://docs.python.org/2/tutorial/controlflow.html#default-argument-values)。

# sql - 判断哪些值不在sql表中

> ID：14756075
> 
> 赞同：1
> 
> 时间：2013-02-07T16:31:08.880
> 
> 标签：sql, oracle

我在 oracle 中有这个查询：

```
select * from table where col2 in (1,2,3,4); 
```

可以说我得到了这个结果

```
col1 | col2
-----------
a       1
b       2 
```

我的 'in (1,2,3,4)' 部分有 20 个或更多选项，我如何确定在我的表中找不到哪些值？在我的示例中，表中不存在 3 和 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:33:54.963

你不能以你想要的方式。

您需要将要查找的值插入表中，然后选择所需表中不存在的所有值。

假设您要查找的数据位于其中，`A`并且您想知道哪些数据不存在于`B`.

```
SELECT *
FROM   table_a A
WHERE  NOT EXISTS (SELECT * 
                   FROM table_b B 
                   WHERE B.col1 = A.col1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:39:37.270

IN 列表是愚蠢的，或者至少不是很有用。改为使用 SQL 类型集合来存储您的值，因为我们可以将它们转换为表。

在这个例子中，我使用了不起眼的 SYS.KU$_OBJNUMSET 类型，这是我所知道的 10g 上唯一的 Number 嵌套表。（11g 中还有更多内容）。

所以

```
select t.column_value 
from table ( SYS.KU$_OBJNUMSET  (1,2,3,4) ) t
        left join your_table 
          on col2 = t.column_value
where col2 is null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:39:05.453

如果您只是在特定示例中使用整数，这将是一种方法：

```
SELECT *
FROM (
  Select Rownum r
  From dual
  Connect By Rownum IN (1,2,3,4)
) T
LEFT JOIN YourTable T2 ON T.r = T2.Col2
WHERE T2.Col2 IS NULL 
```

还有[小提琴](http://www.sqlfiddle.com/#!4/4c819/1)。

这会根据您的 where 条件 1、2、3、4 创建一个表格并将其用于`LEFT JOIN`打开。

- 编辑

因为值不是整数，所以这是另一个“丑陋”的选项：

```
SELECT *
FROM (
  Select 'a' r From dual UNION
  Select 'b' r From dual UNION
  Select 'c' r From dual UNION
  Select 'd' r From dual
) T
LEFT JOIN YourTable T2 ON T.r = T2.Col2
WHERE T2.Col2 IS NULL 
```

[http://www.sqlfiddle.com/#!4/5e769/2](http://www.sqlfiddle.com/#!4/5e769/2)

祝你好运。

# c# - 使用 C#、XAML 为 Windows 8 Metro 风格应用程序解析 html

> ID：14756076
> 
> 赞同：3
> 
> 时间：2013-02-07T16:31:11.987
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我的应用程序应该解析 html 并将内容加载到列表框中。我可以通过 webclient 获取 html，但无法解析它。
我听说过 Htmlagilitypack 和 Fizzler，但找不到任何关于它们用法的教程或示例。

我需要一些帮助来从下面显示的 html 文档中将“first_content”和“second_content”抓取到列表框中。

```
<html>
<body> 
<div>
<section>
<article>
   <header> 
       <hgroup> 
           <h1> 
              first_content
           </h1>
       </hgroup>
   </header> 
   <ul> 
        <li> 
           second_content
        </li>
   </ul>
</article> 
</section>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:17:26.610

HtmlAgilityPack 是要走的路，我一直在 WCF、Windows Phone 和现在的 WinRt 中使用它并取得了圆满成功，有关教程请查看[此博客文章](http://www.4guysfromrolla.com/articles/011211-1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:11:56.827

您可以使用 XPath。例如 ...

```
var html = "<html><body><div><section><article><header><hgroup><h1>first_content</h1></hgroup></header><ul><li>second_content</li></ul></article> </section></div></body></html>";
var doc = new XmlDocument();
doc.LoadXml(html);
var txt1 = doc.SelectSingleNode("/html/body/div/section/article/header/hgroup/h1").InnerText;
var txt2 = doc.SelectSingleNode("/html/body/div/section/article/ul/li").InnerText; 
```

# python - 在异步代码中使用 PIL (Twisted Web)

> ID：14756079
> 
> 赞同：2
> 
> 时间：2013-02-07T16:31:19.730
> 
> 标签：python, asynchronous, twisted, python-imaging-library

我有一个接收图像并将其传递给另一个异步服务的 Web API。但是，在通过之前，如果我进一步使用 PIL 将其缩小。

我的代码看起来像这样（简化，跳过不相关的细节）：

```
def render_POST(self, request):
    pil_image = Image.open(request.content)
    pil_image.thumbnail((640,640), Image.ANTIALIAS) 
    outfile = StringIO()
    pil_image.save(outfile, "JPEG")
    do_something_async_and_write_result(outfile)
    return NOT_DONE_YET 
```

有没有办法让它异步而不过度设计*它？

**例如，我会考虑为过度工程设置消息队列服务*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:21:56.860

如果给出线程安全（关于 PIL 以及如何使用它），您可以使用 deferToThread：
[https ://twistedmatrix.com/documents/current/api/twisted.internet.threads.html](https://twistedmatrix.com/documents/current/api/twisted.internet.threads.html)

增强配方，感谢 Calderone

# c# - 更新一对多表实体框架

> ID：14756082
> 
> 赞同：1
> 
> 时间：2013-02-07T16:31:39.620
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework

我有一个创建用户 ASP.NET MVC 3 页面 - 在页面上有一个多选的汽车框，它是从我的数据库中的 Cars 表中预先填充的。在保存用户时，我返回与用户关联的 CarId 整数列表。我正在使用 WCF 服务和 Entity Framework 5.0 将我的数据返回到 SQL Server 并保存到 SQL Server。

然后我在我的数据库 CarUser 中有一个表 - 它只包含一个用户 ID 和一个客户端 ID - 用户表中的 UserId 和 Cars 表中的 CarId 的两个 FK。

当我创建用户时，它正在更新 CarUser 表正在正确更新（例如 - 它可能看起来像这样）

CarId UserId 2 4 3 4 4 4 5 4

所以它看起来是正确的，因为我的 CarUser 表显示了与从多选框中选择的 4 个 CarId 关联的用户 4。但是我遇到的问题是它正在重新创建汽车表中的汽车 - 例如，它正在创建汽车 ID 9、10、11、12，但它们的详细信息与 2、3、4 完全相同,5

我为此编写的代码如下：

```
 public User User_Create(User user, List<int> carIds)
    {
        DAL.CarUserWCFFServiceImpl carUser = new DAL.CarUserWCFFServiceImpl();

        // cal the DAL layer to do the create
        User newUser = carUser.User_Create(user);

        //call the DAL layer to create the cars linked to a user
        carUser.CarUserMapping_Create(newUser.UserID, carIds); 
```

所以我的第一个 DAL 方法（这是列出此代码的方法下面的一层）调用创建了用户 - 然后一旦我有了用户，所以我有了 ID 等，我在 DAL 层调用另一个方法，传入 UserID新创建的用户，然后是与用户关联的 carId 列表。

第二种方法的代码如下：

```
 public void CarUserMapping_Create(int userId, List<int> carIds)
    {
        using (CUEntities entities = new CUEntities())
        {
            User user = User_GetById(userId);
            entities.Users.Attach(userId);

            foreach (int carId in carIds)
            {
                Car car = Car_GetById(carId);

                user.Cars.Add(car);
                entities.ObjectStateManager.ChangeObjectState(user, System.Data.EntityState.Modified);
                entities.SaveChanges();
            }
        }
    } 
```

谁能看到我做错了什么？我在想的另一个选择是把它从实体框架中拿走，然后在 CarUserMapping_Create 中调用一个存储过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:15:07.847

也许您需要添加执行以下操作：

```
public void CarUserMapping_Create(int userId, List<int> carIds)
{
    using (CUEntities entities = new CUEntities())
    {
        User user = User_GetById(userId);
        entities.Users.Attach(userId);

        foreach (int carId in carIds)
        {
            Car car = Car_GetById(carId);
            car.UserID = user.UserID;
            entities.Entry(car).State = EntityState.Modified;
            entities.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:03:27.550

你不应该那样设置状态。这就像强奸框架。

Instedad 将模型实例 ( `entities`) 作为参数发送到读取汽车和用户的方法。（并且 ofc。`entities`在方法中使用 ObjectContext），如下所示：

```
using (CUEntities entities = new CUEntities())
{
    User user = User_GetById(entities , userId);

    foreach (int carId in carIds)
    {
        Car car = Car_GetById(entities, carId);
        car.UserID = user.UserID;
        entities.SaveChanges();
    }
} 
```

这样，实体框架将保留实体状态

# c++ - 使用 >> 运算符从二进制文件中读取签名短裤列表

> ID：14756083
> 
> 赞同：0
> 
> 时间：2013-02-07T16:31:42.693
> 
> 标签：c++, stream, short

这不能通过 >> 运算符实现吗？

资料来源：

[http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt) [http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/](http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/)

's' 的值保持不变：它似乎没有从输入流中获取任何数字。

```
vector<signed short> CReadFileTest::ReadIntegersFromFile( const char * filename )
{
    ifstream ifs(filename, ifstream::in, ifstream::binary);
    vector<signed short> vec ;
    if (ifs)
    {
        signed short s ;

        while (!ifs.eof())
        {
            ifs >> s;
            vec.push_back(s);
        }
        ifs.close();

    }
    return vec;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:34:29.603

当你打开一个二进制文件时，你必须使用[read](http://en.cppreference.com/w/cpp/io/basic_istream/read)。

# vb.net - 在 .NET 中使用 RSA 解密消息 - m**d mod p*q 不起作用

> ID：14756087
> 
> 赞同：-1
> 
> 时间：2013-02-07T16:32:02.173
> 
> 标签：vb.net, encryption, cryptography, rsa, rsacryptoserviceprovider

我正在尝试使用 Mega 加密 API，但我被 RSA 解密部分卡住了。

使用的 JavaScript 是这样的：

```
// Compute m**d mod p*q for RSA private key operations.

function RSAdecrypt(m, d, p, q, u)
{    
 var xp = bmodexp(bmod(m,p), bmod(d,bsub(p,[1])), p);
 var xq = bmodexp(bmod(m,q), bmod(d,bsub(q,[1])), q);

 var t=bsub(xq,xp);
 if(t.length==0)
 {
  t=bsub(xp,xq);
  t=bmod(bmul(t, u), q);
  t=bsub(q,t);
 }
 else
 {
  t=bmod(bmul(t, u), q);
 } 
 return badd(bmul(t,p), xp);
} 
```

我正在使用 .NET（支持 BigInteger 的 4.0）并且我正在尝试复制相同的行为。

我拥有的 RSA 数据是：

```
p (1024 bits)
q (1024 bits)
d (2044 bits)
u (1024 bits)
m (2044 bits) (the ciphered data) 
```

我尝试使用 RSACryptoServiceProvider 没有运气。在另一篇[文章](https://stackoverflow.com/questions/14576424/how-do-i-use-rsacryptoserviceprovider-to-decrypt-given-that-i-only-have-p-q-d)中，另一位用户报告说他使用基本的 RSA 解密算法 (m**d mod p*q) 并避免使用 RSACryptoServiceProvider。

我实现了它（我理解 U 部分不是必需的），确保输入与 Javascript 输入完全相同，但仍然没有运气。输出与 Javascript 代码的预期不同。

这是实现的功能：

```
Public Shared Function RSA_Decrypt(ByVal P As Numerics.BigInteger, ByVal Q As Numerics.BigInteger, ByVal D As Numerics.BigInteger, ByVal M As Numerics.BigInteger) As Byte()
    Dim N As System.Numerics.BigInteger = Numerics.BigInteger.Multiply(P, Q)
    Dim DecryptedData As System.Numerics.BigInteger = Numerics.BigInteger.ModPow(M, D, N)
    Return DecryptedData.ToByteArray
End Function 
```

测试代码：

```
Dim P As New Numerics.BigInteger(Convert.FromBase64String("gbb1FjTy...s="))
Dim Q As New Numerics.BigInteger(Convert.FromBase64String("o0fGo0v...8="))
Dim D As New Numerics.BigInteger(Convert.FromBase64String("GFVe9C...bQ=="))
Dim Data As New Numerics.BigInteger(Convert.FromBase64String("BnrSc/..Dg=="))

Dim ResultBytes As Byte() = cripto.RSA_Decrypt(P, Q, D, Data)
Dim ResultStr As String = Convert.ToBase64String(ResultBytes) 
```

此代码返回：

```
Vd2jBCzObTx...QW1y+VRSZHAw== 
```

但是，JavaScript 函数返回

```
LUyj3pyIyr4g...1aZU= 
```

你知道我做错了什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:19:50.283

@CodesInChaos 是对的，这是一个字节序问题。

我使用了从[这里](http://www.codeproject.com/Articles/421656/RSA-Library-with-Private-Key-Encryption-in-Csharp)获取的功能“OS2IP” 。只是用它从字节数组中生成 BigInteger。

```
Dim P As Numerics.BigInteger = cripto.OS2IP(Convert.FromBase64String("gbb1FjTyN ... hs="), false) 
```

然后我不得不反转生成的字节数组：

```
Dim ResultBytes As Byte() = cripto.RSA_Decrypt(P, Q, D, Data).Reverse.ToArray 
```

以及纠正字节顺序的功能：

```
''' <summary>
''' Converts a byte array to a non-negative integer.
''' </summary>
''' <param name="data">The number in the form of a byte array.</param>
''' <param name="isLittleEndian">Endianness of the byte array.</param>
''' <returns>An non-negative integer from the byte array of the specified endianness.</returns>
Public Shared Function OS2IP(data As Byte(), isLittleEndian As Boolean) As Numerics.BigInteger
    Dim bi As Numerics.BigInteger = 0
    If isLittleEndian Then
        For i As Integer = 0 To data.Length - 1
            bi += Numerics.BigInteger.Pow(256, i) * data(i)
        Next
    Else
        For i As Integer = 1 To data.Length
            bi += Numerics.BigInteger.Pow(256, i - 1) * data(data.Length - i)
        Next
    End If
    Return bi
End Function 
```

有了这个改变，结果现在是正确的。现在我将看看时间攻击问题:)

# wordpress - WordPress 中的 Orderby 自定义字段和性能

> ID：14756088
> 
> 赞同：0
> 
> 时间：2013-02-07T16:32:03.527
> 
> 标签：wordpress, custom-fields, custom-taxonomy

我在各种索引页面中有几个不同的 WP_Query，按类别查询。

```
 $args1 = array(
   'post_type' => 'page', 'cat' => 3, 'meta_key' => 'indextitle', orderby => 'meta_value', 'order' => 'ASC'
    );
   $query1 = new WP_Query($args1); 
```

如您所见，我正在按元键“indextitle”对查询进行排序。我知道使用自定义字段进行查询会大大降低性能，但我想知道是否有人知道当您选择按自定义字段排序查询时是否存在类似的性能影响。换句话说，orderby 参数是否对性能有很大的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:53:57.340

简短的回答：没有

它对性能没有太大影响。WP_Query 对象为您构造 MySQL 查询，本身不进行任何排序，这意味着性能下降将由 MySQL 而不是 Wordpress 引起。

[如果您要查询的表非常大，那么使用表索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)等技术研究 MySQL 数据库/表优化可能是值得的。

# android - Monodroid - 相机活动没有返回

> ID：14756090
> 
> 赞同：0
> 
> 时间：2013-02-07T16:32:05.183
> 
> 标签：android, mono, camera

我正在尝试使用相机在我的应用程序的一个活动中拍照，保存并返回文件位置以供进一步使用。但是，当我在相机活动中按下确定按钮时，什么也没有发生（尽管取消工作）。

我正在使用模拟器。

有用于调用Camera Activity的代码：

```
FindViewById<Button>(Resource.Id.exSetPicture).Click += delegate { 
            var dir = new Java.IO.File (
                Android.OS.Environment.GetExternalStoragePublicDirectory (
                Android.OS.Environment.DirectoryPictures), "MySuperbPictures");

            if (!dir.Exists ()) {
                dir.Mkdirs ();
            }

            _file = new Java.IO.File (dir, String.Format ("Picture\t{0}.jpg", Guid.NewGuid ()));
            Intent cameraIntent = new Intent(Android.Provider.MediaStore.ActionImageCapture);  
            cameraIntent.PutExtra (MediaStore.ExtraOutput, Android.Net.Uri.FromFile (_file));
            StartActivityForResult(cameraIntent, SET_NEW_PICTURE); 
        }; 
```

我发现似乎对我不起作用的解决方案：

*   检查应用权限（相机、外部存储已设置）
*   确保创建文件夹（断点确实表明它不会进入 if (!dir.Exists())
*   将 IntentExtra 设置为新文件，而不是直接设置 Uri.FromFile(folder)

我现在有点卡住了..这可能真的很愚蠢，但我不明白为什么它不起作用..

帮助将不胜感激：P

**编辑：**

这是我的“OnActivityResult”中与此相关的部分：

```
 protected override void OnActivityResult (int requestCode, Result resultCode, Android.Content.Intent data)
    {
        int ResultID = 0;
        base.OnActivityResult (requestCode, resultCode, data);

        if (data != null) {
            if(resultCode == Result.Ok) {
                switch (requestCode) {
                case SET_NEW_PICTURE:
                    var contentUri = Android.Net.Uri.FromFile (_file);
                    PhotoLocation = contentUri.ToString();
                    FindViewById<Button>(Resource.Id.exViewPhoto).Visibility = Android.Views.ViewStates.Visible;
                    break;
                default:
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:56:27.113

问题已解决：似乎 Android 不喜欢文件名中的“\t”......不知何故......这是 Monodroid 文档 fml 的一部分。

# c# - 如何在 iTextSharp 中制作双线表格边框？

> ID：14756091
> 
> 赞同：1
> 
> 时间：2013-02-07T16:32:08.017
> 
> 标签：c#, pdf-generation, itextsharp

到目前为止，我必须在 iTextSharp 中制作双线表格边框，我设法使边框仅出现在使用以下代码的特殊位置：

```
cell.Border = Rectangle.TOP_BORDER | Rectangle.BOTTOM_BORDER; 
```

但是边框是单线，有没有可以创建双线表格边框的方法。我试着把它做成这样：

```
cell.Border = Rectangle.TOP_BORDER | Rectangle.BOTTOM_BORDER | Rectangle.TOP_BORDER |  Rectangle.BOTTOM_BORDER ; 
```

但不起作用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:25:55.290

使用嵌套表怎么样？这是一个例子：[http ://www.ujihara.jp/iTextdotNET/examples/Chap1010.pdf](http://www.ujihara.jp/iTextdotNET/examples/Chap1010.pdf)

您可以尝试将表嵌套在 1x1 父表中。

这是上述 PDF 的代码：[http ://www.ujihara.jp/iTextdotNET/examples/Chap1010.cs](http://www.ujihara.jp/iTextdotNET/examples/Chap1010.cs)

从这个页面：[http ://www.ujihara.jp/iTextdotNET/en/examples.html](http://www.ujihara.jp/iTextdotNET/en/examples.html)

您使用的是哪个版本的 iTextSharp？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T10:33:04.397

这工作正常：

```
cell.Border = Rectangle.TOP_BORDER + Rectangle.BOTTOM_BORDER; 
```

# javascript - 通过 xml 文件包含 javascript 文件

> ID：14756098
> 
> 赞同：1
> 
> 时间：2013-02-07T16:32:20.213
> 
> 标签：javascript, xml

我有这个代码...

```
 <script type="text/javascript">
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET", "Client-Controls/ClientGridView.xml", true);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;

    var oHead = document.getElementsByTagName('HEAD').item(0);
    var x = xmlDoc.getElementsByTagName("script");
    for (i = 0; i < x.length; i++) {
        var oScript = document.createElement("script");
        oScript.language = "javascript";
        oScript.type = "text/javascript";
        oScript.src = x[i].childNodes[0].nodeValue;
        oHead.appendChild(oScript);
    }
</script> 
```

这渲染了一些，但我不能使用那个 javascript 文件函数......有什么诀窍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:08:31.627

您的脚本将异步加载，因此您无法立即使用它们。给他们一个 onload 处理程序，这样你就知道他们什么时候准备好了：

```
var oScript = document.createElement("script");
oScript.type = "text/javascript";
oScript.src = x[i].childNodes[0].nodeValue;
oScript.onload = function () {
    // run bar, which is contained in foo.js
    bar();
};
oHead.appendChild(oScript); 
```

* * *

如果要确保所有脚本都已加载，可以创建一个计数器：

```
function counter(count, callback) {
    return function() {
        count -= 1;
        if (count === 0) {
            callback();
        }
    }
} 
```

并将其传递给每个负载处理程序：

```
var x = xmlDoc.getElementsByTagName("script"),
    countdown = counter(x.length, function(){ alert("All scripts loaded!"; });
for (i = 0; i < x.length; i++) {
    var oScript = document.createElement("script");
    oScript.type = "text/javascript";
    oScript.src = x[i].childNodes[0].nodeValue;
    oScript.onload = countdown;
    oHead.appendChild(oScript);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-19T04:41:08.437

扩展丹尼斯的观点，在`Javascript`您尝试获取的文件中添加一个变量并检查该变量是否存在或者它是否是一个整数，检查该值。无论如何，您可以在 Javascript 中轻松地做到这一点。这里有两种方法。

**选项一**

```
var neededScript = document.createElement("script");
n//if you want the script to be asynchronous, then set the async attribute like this:
neededScript.async="";
//then point the [src] attribute to the required script.
neededScript.src="src";
document.head.appendChild(neededScript);
```

可选地，如果您想将 附加`script`到`body`, 而不是`document.head.appendChild`使用`document.body.appendChild`. `document.getElementById`您可以使用or将子元素附加到任何元素，`document.getElementsByClassName`或者如果您想按标签名称（`<html>`是标签）过滤元素，然后使用`document.getElementByTagName`or - 我个人最喜欢的来自 jQuery - `document.querySelector`。您应该阅读所有这些方法，因为它们对于操作 DOM 至关重要。

**第二个选项**

第二个选项是使用一个非常流行的库，称为 jQuery。它的语法比文档 API 语法短**很多。**它的主要目的是使 DOM 操作更容易。

```
var requiredScriptSrc="src";
$("head").append("<script src='"+requiredScriptSrc+"'></script>");
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

jQuery 使用`selectors`，如果您尝试过 CSS 或`document.querySelector`.

**选项三**

选项三是使用`custom tags`一个`for`循环来获取 的属性`custom tag`并创建一个脚本元素。

```
for(var i = 0; i<document.getElementsByTagName("js-module").length; i++){
  var s = document.getElementsByTagName("js-module")[i].getAttribute("src");
  var r = document.createElement("script");
  r.src = s;
  document.head.appendChild(r);
}
```

```
<js-module src="src"></js-module>
```

如果您需要更多帮助，请在此帖子上发表评论。

# java - 每当收到无效的 HTTP 请求时，停止 Jetty 抛出堆栈跟踪

> ID：14756100
> 
> 赞同：6
> 
> 时间：2013-02-07T16:32:26.307
> 
> 标签：java, url-rewriting, jetty, stack-trace, tuckey-urlrewrite-filter

我在 Jetty 中运行我的 servlet 应用程序，它有时会输出如下所示的堆栈跟踪。我认为这意味着它正在接收无效的 URL 请求，但我实际上看不到该请求。我可以在这里处理这个异常，以便我的日志不会被这个讨厌的堆栈跟踪堵塞吗？如果可以，它可以在我的代码中处理，还是在获取我的代码之前发生此错误，因此需要使用 Jetty 配置来处理？

**编辑** 因此，如果我确实移至 Jeety 9，我该如何配置它以便堆栈跟踪继续运行，我是否可以配置合适的 http 响应代码

或者，我意识到码头在[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)处理后正在接收请求，如果生成的 url 无效，我应该在 UrlRewriteFilter 中配置什么来做其他事情。

```
2013-01-11 23:48:10.939:WARN:oeju.UrlEncoded:org.eclipse.jetty.util.Utf8Appendable$NotUtf8Exception: Not valid UTF8! byte B0 in state 0
2013-01-11 23:48:10.939:WARN:oejs.ServletHandler:/ws/2/release/
org.eclipse.jetty.util.Utf8Appendable$NotUtf8Exception: Not valid UTF8! byte B0 in state 0
at org.eclipse.jetty.util.Utf8Appendable.appendByte(Utf8Appendable.java:174)
at org.eclipse.jetty.util.Utf8Appendable.append(Utf8Appendable.java:99)
at org.eclipse.jetty.util.UrlEncoded.decodeString(UrlEncoded.java:709)
at org.eclipse.jetty.util.UrlEncoded.decodeTo(UrlEncoded.java:251)
at org.eclipse.jetty.util.UrlEncoded.decodeTo(UrlEncoded.java:187)
at org.eclipse.jetty.server.Request.mergeQueryString(Request.java:2045)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:244)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:103)
at org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:213)
at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:171)
at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:365)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Thread.java:722) 
```

**编辑** 有人建议，也许这可以在我的 tukey 配置中处理，所以这就是它目前的样子

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 3.1//EN"
        "http://tuckey.org/res/dtds/urlrewrite3.1.dtd">

<!--

    Configuration file for UrlRewriteFilter
    http://tuckey.org/urlrewrite/

-->
<urlrewrite use-query-string="true">
    <rule>
       <note>
           Matches urls like http://localhost:8080/ws/1/artist/?query=blur&amp;fmt=xml
           and converts to http://localhost:8080/?type=artist&amp;query=blur&amp;fmt=xml&amp;version=1
       </note>
       <from>^/ws/(\d)/(.*)/\?(.*)$</from>
       <to>/?version=$1&amp;type=$2&amp;$3</to>
     </rule>

    <rule>
        <note>
            The rule means that requests to /test/status/ will be redirected to /rewrite-status
            the url will be rewritten.
        </note>
        <from>/test/status/</from>
        <to type="redirect">%{context-path}/rewrite-status</to>
    </rule>

    <outbound-rule>
        <note>
            The outbound-rule specifies that when response.encodeURL is called (if you are using JSTL c:url)
            the url /rewrite-status will be rewritten to /test/status/.

            The above rule and this outbound-rule means that end users should never see the
            url /rewrite-status only /test/status/ both in their location bar and in hyperlinks
            in your pages.
        </note>
        <from>/rewrite-status</from>
        <to>/test/status/</to>
    </outbound-rule>
</urlrewrite> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:16:26.553

为此异常编写一个 log4j 过滤器。

# .net - 从 .net 调用 oracle 存储过程并获取 PLS-00201：

> ID：14756103
> 
> 赞同：0
> 
> 时间：2013-02-07T16:32:32.383
> 
> 标签：.net, oracle, stored-procedures

我不确定这里发生了什么。突然之间，我很难调用以前很容易调用的存储过程。我得到了上述例外。

当我在 sql developer 中调用它们时，它们工作得很好。我需要更新连接字符串或 dll 之类的吗？

**更新：添加代码**

```
 if (implemtation == 1)
            sProc = "XXX.XXXXX";
        else if (implemtation == 2)
            sProc = "xxx.xxxxx";
        else
            throw new Exception(string.Format("Error Determening stored Proc... Stored Proc: {0}",(sProc == "" ? "Empty" : sProc)));
        try
        {
            using (OracleConnection conn = new OracleConnection(ConfigurationManager.ConnectionStrings["ACODBConnectionString2"].ConnectionString))
            {
                ///Not so simple getting Oracle Data back into .Net... However, these code sections do it...
                ///Consider placing this section into its own method for more a object oriented application... Little time to consider that now however
                using (OracleCommand cmd = new OracleCommand(sProc, conn))
                {
                    conn.Open();
                    cmd.CommandType = CommandType.StoredProcedure;
                    OracleParameter inputParm = new OracleParameter("XXXXIn", OracleDbType.Decimal);
                    OracleParameter inputParm2 = new OracleParameter("XXXXIn", OracleDbType.Decimal);
                    OracleParameter inputParm3 = new OracleParameter("XXXXIn", OracleDbType.Decimal);
                    inputParm.Value = Double.Parse(PopID);
                    inputParm2.Value = Double.Parse(History);
                    inputParm3.Value = Double.Parse(isActive);
                    OracleParameter outRefParam = new OracleParameter("cur_out", OracleDbType.RefCursor, DBNull.Value, ParameterDirection.Output);
                    cmd.Parameters.Add(inputParm);
                    cmd.Parameters.Add(inputParm2);
                    cmd.Parameters.Add(inputParm3);
                    cmd.Parameters.Add(outRefParam);
                    adapter = new OracleDataAdapter(cmd);
                    adapter.Fill(ds);
                    //cmd.ExecuteNonQuery();
                    acoData = SerializeOracleData(ds);
                }
            }
        } 
```

几天前，同样的代码还在工作。

# mysql - 在mysql中以句子格式打印报告

> ID：14756106
> 
> 赞同：1
> 
> 时间：2013-02-07T16:32:35.057
> 
> 标签：mysql, concat, mysql6

作为一个新手，我再次需要你的帮助。这次我尝试在 MYSQL 6.0 中打印一份报告，该报告以下列格式显示每个分支及其位置：“分支名称”位于“城市名称”所在城市的“街道地址”。我也需要标签。这是我所做的并得到的结果：

```
SELECT CONCAT(name, ' ',  ' is located at', address, city, ' in the city of ')
FROM branch; 
```

我有一个名为 address 的列，其中包含 6 个街道地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:07:19.453

根据您的评论，听起来您只需要以下内容：

```
SELECT 
  CONCAT(name, ' is located at ', address,' in the city of ',  city) As Label
FROM branch; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/80df0/2)。

这会产生以下结果：

```
|                                                          LABEL |
------------------------------------------------------------------
| Robinhood is located at 1234 Robinhood Rd in the city of Salem |
|           New is located at 123 test dr in the city of Testing | 
```

# asp.net-mvc - 在 ASP MVC3 视图中设置“编辑器字段”值

> ID：14756107
> 
> 赞同：0
> 
> 时间：2013-02-07T16:32:38.207
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想在我的 ASP MVC 视图中给一个字段当前日期的默认值，但我不知道如何在视图代码中执行此操作。但是，我需要允许它成为可更新的字段，因为它并不总是最新的日期。有什么建议么？

```
 <div class="M-editor-label">
        Effective Date
    </div>
    <div class="M-editor-field">            
        @Html.EditorFor(model => model.EffectiveDate)
        @Html.ValidationMessageFor(model => model.EffectiveDate)
    </div> 
```

编辑

我试图在模型中给这个字段一个默认值，就像这样

```
 private DateTime? effectiveDate = DateTime.Now;

    public Nullable<System.DateTime> EffectiveDate
    {
        get { return DateTime.Now; } 
        set { effectiveDate = value; }
    } 
```

但是该`get`属性给了我以下错误消息：

`Monet.Models.AgentTransmission.EffectiveDate.get must declare a body because it is not marked abstract extern or partial`

^（Monet 是项目的名称，AgentTransmission 是我正在工作的当前模型的名称，其中 EffectiveDate 是一个属性。）

第二次编辑

根据以下答案之一中的建议，我将构造函数设置为这样，但是在呈现视图时，这仍然会在字段中放置一个空白值。

```
 public AgentTransmission()
    {
        EffectiveDate = DateTime.Now;
    } 
```

第三次编辑

修复了上述问题`get`，发布了到目前为止我在控制器中的全部内容。

```
 public AgentTransmission()
    {
        EffectiveDate = DateTime.Today;
        this.AgencyStat1 = new HashSet<AgencyStat>();
    }

    //Have tried with an without this and got the same results
    private DateTime? effectiveDate = DateTime.Today;

    public Nullable<System.DateTime> EffectiveDate
    {
        get { return effectiveDate; }  
        set { effectiveDate = value; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:58:02.877

我会在模型类的构造函数中设置默认值。像这样的东西：

```
class YourClass {
  public DateTime EffectiveDate {get;set;}

  public YourClass() {
    EffectiveDate = DateTime.Today;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:44:45.107

正如其他答案所建议的那样，我通过在构造函数中创建一个默认值来解决这个问题，就像这样

```
public AgentTransmission()
{
    EffectiveDate = DateTime.Today;
    this.AgencyStat1 = new HashSet<AgencyStat>();
}

private DateTime? effectiveDate;

public Nullable<System.DateTime> EffectiveDate
{
    get { return effectiveDate; }  
    set { effectiveDate = value; }
} 
```

并将此代码添加到构造函数中的特定页面以初始化新对象；

```
 public ActionResult Create()
    {
        return View(new AgentTransmission());
    } 
```

# windows - 环境变量未扩展

> ID：14756108
> 
> 赞同：1
> 
> 时间：2013-02-07T16:32:38.530
> 
> 标签：windows, batch-file

平台：Windows Vista Service Pack 2 (x86)

我在搞乱批处理脚本并意识到它们可以充当命令提示符（是的，我知道批处理脚本运行会引发命令提示符）我的意思是批处理脚本可以提示用户输入命令然后调用命令。

```
SET command=
SET /P command=%cd%^>

ECHO(
%command%
ECHO( 
```

唯一的问题是，当我输入例如 cd %windir% 时，我收到一条错误消息，告诉我系统找不到指定的路径。所以我输入了 echo %windir% 并 echo print %windir% 完全没有扩展。我想知道问题是否是因为我将环境变量嵌套在 %command% 变量中，但据我了解 CMD.exe 确实支持嵌套的环境变量。我尝试使用延迟扩展，但变量仍然没有扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:45:58.207

添加`call`或`cmd /c`以这种方式评估变量。

```
@echo off
setlocal
SET /P command=%cd%^>

call %command%
ECHO; 
```

# php - 将 CSV 文件中的同义记录转换为 MySQL DB 条目

> ID：14756117
> 
> 赞同：0
> 
> 时间：2013-02-07T16:33:11.010
> 
> 标签：php, mysql, database-design

我有一个应用程序，它使用 CSV 格式的信息填充文本文件。问题是，每条记录的列数应该是灵活的，并且不是恒定的。我正在尝试在 MySQL 中实现相同的数据结构，以便从许多节点更快地读取和并行写入。

这是从我的 CSV 文件中获取的示例

```
like|love|adore|admire
hate|dislike
revive|resurrect
info|information|pieces of information|data
shoot|snipe|kill|hunt 
```

每条记录代表具有相同含义的单词。稍后，我使用该 CSV 文件获得了单词的同义词。例如，我得到了单词的同义词，该单词在我的应用程序`hate`中`dislike`使用一个函数来解析 csv 文件并输出匹配的单词。

除了使用 MySQL 之外，我有哪些选项可以执行相同的实现方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:40:50.277

你在这里处理多对多的关系。头顶上的解决方案看起来像：

```
CREATE TABLE words (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    word VARCHAR(40) NOT NULL UNIQUE
);
CREATE TABLE synonyms (
    word_id INT UNSIGNED NOT NULL,
    synonym_id INT UNSIGNED NOT NULL
    PRIMARY KEY (word_id, synonym_id)
); 
```

然后，要获取 id 为 $Y 的单词 $X 的所有同义词：

```
SELECT w.id, w.word
FROM synonyms s
JOIN words w ON (s.synonym_id = w.id)
WHERE s.word_id = $Y; 
```

这样你也可以在某个时候添加反义词。

# jquery - 使用 jquery 滚动幻灯片

> ID：14756129
> 
> 赞同：1
> 
> 时间：2013-02-07T16:33:41.640
> 
> 标签：jquery, html, css

我有 4 个 div 内联，使用 php 我为每一个分配一个唯一的 id，在任何时候只有一个 div 是可见的，这是结果 html：

```
<div id="contentslider">
    <div class="cs_wrapper">
        <div class="cs_slider">
            <div id="1" class="cs_article">
                SLIDE 1
            </div>
            <div id="2" class="cs_article">
                SLIDE 2
            </div>
            <div id="3" class="cs_article">
                SLIDE 3
            </div>
            <div id="4" class="cs_article">
                SLIDE 4
            </div>
        </div>
    </div>
</div> 
```

和CSS：

```
.contentslider {
  position:relative;
  display:block;
  width:480px;
  height:400px;
  margin:0 auto;
  overflow:hidden;
}

.cs_wrapper {
  position:relative;
  display:block;
  width:480px;
  height:400px;
  margin:0;
  padding:0;
  overflow:hidden;
}
.cs_slider {
  position:absolute;
  width:10000px;
  height:100%;
  margin:0;
  padding:0;
}
.cs_article {
  float:left;
  position:relative;
  top:0;
  left:0;
  display:block;
  width:480px;
  height:400px;
  margin:0 auto;
  padding:0;
} 
```

我正在尝试编写一个 jquery 函数，该函数给出一个 id 它将动画并转到选定的幻灯片，但我不知道从哪里开始，有什么建议吗？

**编辑**：如果您需要，这是一个[jsFiddle 。](http://jsfiddle.net/kMnsZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:51:27.180

使用该功能制作了一个快速的[jsFiddle](http://jsfiddle.net/ZTDL3/1/)。正如上面对您问题的评论，我将 ID 更改为非数字。

这是功能：

```
function GoToSlide(id) {
    $(".cs_article:visible").slideUp("slow");
    $("#" + id).slideDown("slow");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:20:01.163

Martin Angelov 提供了一个极好的教程，用于创建与您所描述的非常相似的应用程序：[Beautiful Apple-style Slideshow Gallery With CSS & jQuery](http://tutorialzine.com/2009/11/beautiful-apple-gallery-slideshow/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:24:53.520

我更喜欢隐藏所有的方法。

这是在不使用 css 的情况下使用箭头键导航幻灯片。

```
$(".cs_article").hide();
$(".cs_article").eq(0).show();
$(window).keydown(function(e) {
    curSlide = $(".cs_slider .cs_article:visible");
    if (e.which==37 &&  curSlide.prev()[0]) { 
        curSlide.hide(); curSlide.prev().show();
    } else if (e.which==39 && curSlide.next()[0]) {
        curSlide.hide(); curSlide.next().show();
    }
}) 
```

如果你想展示一个，就展示一个

```
$(".cs_article").hide();
$("#3.cs_article").show();  // to show slide 3 only 
```

# ios - UITableView 在已创建的单元格上更改 detailText

> ID：14756130
> 
> 赞同：0
> 
> 时间：2013-02-07T16:33:43.317
> 
> 标签：ios, objective-c

我有一个 UITableView，我通过 UIButton 添加单元格。在创建时，单元格从 2 个数组中获取其`textLabel`& 。`detailTextLabel`但是，如果表中已经存在具有相同标题的项目，我想更改`detailTextLabel.text`现有单元格的，而不添加新单元格。

那么有没有一种方法可以在某个特定的细节文本`UITableViewCell`已经被创建时更新它？

也许我应该删除旧的并添加新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:46:26.890

创建 UITableView 单元格应该只是创建而不是填充数据，因为我们重复使用单元格，我们应该始终假设单元格数据是陈旧的并且需要刷新，因此您应该始终有办法重置单元格的值，如果您有一个自定义单元格，您应该公开您正在使用的控件并在 cellForRowAtIndexPath 中相应地设置它们的值，如果您需要更改一个单元格，您应该更改数据源值并通过重新加载单元格`- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation`，或者抓住带有 cellForRowAtIndexPath 的单元格并相应地更改值......我的观点是不需要重新创建单元格..

# c++ - 底层 std::array 的正确类型

> ID：14756138
> 
> 赞同：0
> 
> 时间：2013-02-07T16:33:56.213
> 
> 标签：c++, arrays, data-structures, c++11, std

我对 C++ 很陌生，所以如果这个问题的答案很明显，我很抱歉。

我一直在编写一个 STL 风格的自定义数据结构来提高我的技能。（实际上我也确实对这种结构有实际需求，但出于学习目的，我有点过火了。）

这个结构需要动态调整大小（就像一个向量），在我的初稿中，我将底层的“容器”做成了一个 C 风格的数组，并手动完成了所有的分配和取消分配。我正在重构，我想使用 C++11 风格的 std::array 作为我的底层结构，只是为了让代码更简洁一些。我的问题是我不知道如何以允许调整大小的方式声明数组类成员。由于不同的模板参数需要不同的类型，我不能只将成员声明为数组，然后在调整大小时将相同的变量分配给数组。

我考虑过为每个潜在的大小声明一个成员，比如

```
private:
    array<T, 8>
    array<T, 16>
    array<T, 32>
    ... 
```

但我不希望这些数组中的每一个都默认构造 T 成员。

这里有干净的解决方案吗？还是我只需要坚持使用 C 风格的数组？

谢谢您的帮助。

编辑：

重新阅读我的问题后，我认为这实际上没有意义。我知道 std::array 的大小必须在编译时知道，但由于某种原因，我的大脑推断出我的目标是不可能的。现在对我来说似乎很明显，我被 C 风格的数组和堆困住了。我想我只需要写出来就可以完全清楚了。

感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T16:36:06.397

`std::array`表示一个其大小是静态已知的（即在编译时）的数组，因此它不能用于诸如这种大小仅在运行时才知道的情况。

简单地使用`std::vector`它，它有一个将大小作为参数的[构造函数。](http://en.cppreference.com/w/cpp/container/vector/vector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:36:32.557

`std::array`专门设计为不可调整大小。这主要是解决固定大小数组不是一流值类型这一事实的解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:01:43.287

我能想到的唯一用例是某种外部化或序列化对象（存储在磁盘上或通过套接字传递，或类似的东西），其中有一个动态大小的组件。如果您已经为此定义了格式，那么您可能应该坚持现有的格式。`std::array<>`如果在编译时不知道大小，则尝试重用它是行不通的。

如果您想重构，可能有用的是模板类，它可以将 C 数组作为构造函数参数，但为其提供 STL 容器接口。

# android - 如何定期启动 Intent 服务

> ID：14756141
> 
> 赞同：1
> 
> 时间：2013-02-07T16:34:00.180
> 
> 标签：android

我需要保持服务运行以通过内容观察器监视更改。

我还需要知道，我设置的定期间隔闹钟可以删除吗？如果是，那么什么时候？

任务杀手可以删除 2.2 以上版本的警报吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:58:30.013

如果要保持服务运行，请使用`Service.startForeground`. 那么安卓系统就不会杀了它，除非是在最极端的情况下。

您需要提供一个不断向用户显示的通知，以便他们知道他们正在运行的服务可能正在使用资源。这似乎是一个深思熟虑的（和明智的）设计决定。

只要您这样做，并且只要您`ContentObserver`实际工作，您就根本不需要使用`AlarmManager`. 您的服务应该持续运行，并且每当内容更改时都应该调用您的代码。

# c++ - 保持 QLayout 排序

> ID：14756143
> 
> 赞同：1
> 
> 时间：2013-02-07T16:34:07.433
> 
> 标签：c++, qt

问题：

我正在 C++ 中创建一个类，其中包含一个 QVBoxLayout 按钮，这些按钮被专门检查（单击）。每个按钮代表一个 Client 对象，其中包含的数据不仅仅是按钮的标题。当检查任何按钮时，新类“ SelectionLayout”将发出信号，并将返回可以（由父类）关联的ID到该按钮的客户端对象。我希望能够在此布局中添加和删除按钮，同时保持按按钮标题排序。似乎没有用于将正确排序的小部件插入布局的 Qt 类或方法，因此我提出了自己的解决方案。如果可能的话，我非常支持以“标准”方式做事，所以请告诉我是否有更好的解决方案来解决这个问题，或者我创建的解决方案是否存在错误。

我的解决方案：

QButtonGroup 提供排他检查（一次只能检查一个按钮），但排序不是。所以我需要一个额外的数据结构来保持它的排序，(QString, int) 的 Map 在这里似乎很有意义，因为它将保持排序并且我可以将选中的按钮与将传递给父级的整数 id 相关联班级。我还需要 QVBoxLayout 与地图一起保持排序，这将采取一些逻辑，在将索引插入并中继到布局后从地图中抓取索引。

父类必须能够将它创建的每个按钮的 id 映射到 Client 对象，这样我们才能正确处理 SelectionLayout 类发出的信号。我可以使用 QHash (Client*, int) 来做到这一点，因为我们不关心排序。

所有这一切似乎都相当复杂（四个数据结构来保存和保持一切排序），我希望有一种更简单的方法。

提前感谢您的帮助，如果我的解释不充分，请告诉我。

# iphone - Objective-c/iOS：在异步函数中设置状态文本很慢

> ID：14756144
> 
> 赞同：4
> 
> 时间：2013-02-07T16:34:08.967
> 
> 标签：iphone, ios, objective-c

在我的应用程序中，我正在与远程服务器进行一些通信，因为这可能很慢，我认为异步运行该代码是个好主意。我将通信代码放在传递给 dispatch_async 的块中。此代码进行通信，并在完成后设置标签的文本。最后一部分是问题所在。文本已设置，但会在几秒钟的延迟后出现。这是我的代码。

```
- (void)doNetworkingTask {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Slow network task goes here.

        // Slow network task done, notify the user.
        [self.myLabel setText:@"task done."];
        NSLog(@"task done.");
    });
} 
```

这里发生的是我的网络任务完成，NSLog-text 被记录，几秒钟后，标签的文本被更新。我的问题是 1）为什么标签文本不会立即更新？和 2) 做我想做的事的正确方法是什么？（执行慢速网络任务而不阻塞其他任何内容，完成后通过文本标签更新用户。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T16:38:36.787

UI 更新必须在主线程上。将您的代码更新为如下内容：

```
- (void)doNetworkingTask {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Slow network task goes here.

        // Slow network task done, notify the user.
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.myLabel setText:@"task done."];
        });
        NSLog(@"task done.");
    });
} 
```

# ios - 在一对多关系中搜索

> ID：14756148
> 
> 赞同：0
> 
> 时间：2013-02-07T16:34:20.367
> 
> 标签：ios, core-data, one-to-many

在 iOS 的 Core Data 项目中，我有一个对象图，其中对象`A`具有称为字段的一对多关系。每个字段都是一个名为 的类的实例`BlueField`。class`BlueField`是 class 的子类`Field`，其中包含一个名为 header 的字符串。

我想检索与字符串标头具有特定值`A`的实例有关系的类的所有实例。`BlueField`

我尝试使用以下谓词获取对象但没有成功：

```
[NSPredicate predicateWithFormat:@"ANY fields.header CONTAINS[cd] %@",searchText]; 
```

使用此谓词获取没有对象作为响应，即使存在应该与查询匹配的对象。关于如何解决这个问题的任何想法？

# ruby-on-rails - 如何用elasticsearch排序？

> ID：14756149
> 
> 赞同：0
> 
> 时间：2013-02-07T16:34:20.487
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

我正在尝试制定排序方法`desc`和`asc`. 我正在使用 rails、tire gem 和 elasticsearch。我想弄清楚我可以在 URL 中发送哪些排序参数

所以我在搜索块中定义它正在对结果进行排序。

```
sort { by :price, "desc"} 
```

当用户搜索位于：**纽约**的公寓时，结果为降序排序。

搜索查询/URL 如下所示：

```
http://localhost:3000/apartmens?utf8&query=newyork 
```

为什么我不能在 url 中添加排序参数，如下所示：

```
http://localhost:3000/apartmens?utf8&query=newyork&sort=asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:19:14.267

我相信它会是这样的。

```
params[:sort] ||= 'asc'
Tire.search('apartmens') do |s| 
   s.query do |q|
     q.string 'newyork'
   end
   s.sort { by :__FIELD_YOU_WANT_TO_SORT_, params[:sort]}
end 
```

# highcharts - 创建仪表后，如何更改 highcharts 仪表上的“标签”（valueSuffix）？

> ID：14756161
> 
> 赞同：1
> 
> 时间：2013-02-07T16:34:45.917
> 
> 标签：highcharts

创建仪表后，如何更改 highcharts 仪表上的“标签”（valueSuffix）？

像这样的东西：

```
chart.series[0].remove();
chart.addSeries({
    name: 'Speed',
    data: [Math.random() * 200],
    tooltip: {
        valueSuffix: parseInt(Math.random() * 200, 16)
    }
}); 
```

[http://jsfiddle.net/noahpeters/d36Se/1/](http://jsfiddle.net/noahpeters/d36Se/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:35:24.183

是的，可以使用 html 作为 yAxis 标题。然后就可以用jquery或者js来改变div的内容了。

[http://jsfiddle.net/d36Se/2/](http://jsfiddle.net/d36Se/2/)

```
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        type: 'gauge',
        plotBackgroundColor: null,
        plotBackgroundImage: null,
        plotBorderWidth: 0,
        plotShadow: false
    },

    title: {
        text: 'Speedometer'
    },

    pane: {
        startAngle: -150,
        endAngle: 150,
        background: [{
            backgroundColor: {
                linearGradient: {
                    x1: 0,
                    y1: 0,
                    x2: 0,
                    y2: 1
                },
                stops: [
                    [0, '#FFF'],
                    [1, '#333']
                ]
            },
            borderWidth: 0,
            outerRadius: '109%'
        }, {
            backgroundColor: {
                linearGradient: {
                    x1: 0,
                    y1: 0,
                    x2: 0,
                    y2: 1
                },
                stops: [
                    [0, '#333'],
                    [1, '#FFF']
                ]
            },
            borderWidth: 1,
            outerRadius: '107%'
        }, {
            // default background
        }, {
            backgroundColor: '#DDD',
            borderWidth: 0,
            outerRadius: '105%',
            innerRadius: '103%'
        }]
    },

    // the value axis
    yAxis: {
        min: 0,
        max: 200,

        minorTickInterval: 'auto',
        minorTickWidth: 1,
        minorTickLength: 10,
        minorTickPosition: 'inside',
        minorTickColor: '#666',

        tickPixelInterval: 30,
        tickWidth: 2,
        tickPosition: 'inside',
        tickLength: 10,
        tickColor: '#666',
        labels: {
            step: 2,
            rotation: 'auto'
        },
        title: {
            useHTML:true,                text: '<div id="tooltipTitle">km/h</div>'
        },
        plotBands: [{
            from: 0,
            to: 120,
            color: '#55BF3B' // green
        }, {
            from: 120,
            to: 160,
            color: '#DDDF0D' // yellow
        }, {
            from: 160,
            to: 200,
            color: '#DF5353' // red
        }]
    },

    tooltip: {
        formatter: function(){
        return 'aaa';
        }
        //valueSuffix: ' km/h'
    },
    series: [{
        name: 'Speed',
        data: [80]
    }]

},
// Add some life
function (chart) {
    setInterval(function () {
        chart.series[0].remove();
        chart.addSeries({
            name: 'Speed',
            data: [Math.random() * 200]
        });

        $('#tooltipTitle').html('aaaa');
    }, 3000);
}); 
```

# sharepoint-2010 - 在sharepoint caml中过滤

> ID：14756164
> 
> 赞同：0
> 
> 时间：2013-02-07T16:34:52.717
> 
> 标签：sharepoint-2010, caml

下面我有我在列表模式中的视图。问题是它从不选择 where 子句。当我去修改视图时它会正确显示 order by 子句，而不是应该显示在过滤器中的 where 子句部分。我还尝试在 UI 中创建一个视图，然后通过共享点管理器获取架构，然后创建一个视图但仍然无法正常工作。我在这里做错了什么。

```
<View BaseViewID="1" Type="HTML" WebPartZoneID="Main" DisplayName="Tab 1" DefaultView="FALSE" MobileView="TRUE" MobileDefaultView="FALSE" SetupPath="pages\viewpage.aspx" ImageUrl="/_layouts/images/generic.png" Url="T1.aspx">
<Toolbar Type="Standard" />
<XslLink Default="TRUE">main.xsl</XslLink>
<RowLimit Paged="TRUE">30</RowLimit>
<Query>
<OrderBy Override="TRUE">
<FieldRef Name="Test1" />
<FieldRef Name="Test2" />
</OrderBy>
<Where>
<Eq>
<FieldRef Name="Test3"/>
<Value Type="Text">1</Value>
</Eq>
</Where>
</Query>
<ViewFields>
<FieldRef Name="Attachments"></FieldRef>
<FieldRef Name="LinkTitle"></FieldRef>
<FieldRef Name="Test1"></FieldRef>
<FieldRef Name="Test2"></FieldRef>
<FieldRef Name="Test3"></FieldRef>

<FieldRef Name="Audience"></FieldRef>
</ViewFields>

<ParameterBindings>
<ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
<ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noXinviewofY_DEFAULT)" />
</ParameterBindings>
</View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:26:42.920

尝试将 Where 子句放在 Order By 子句之前。

我不是 100% 肯定，但试一试

# asp.net-mvc - 加速 linq 查询

> ID：14756168
> 
> 赞同：1
> 
> 时间：2013-02-07T16:34:56.353
> 
> 标签：asp.net-mvc, linq, linq-to-sql

我正在尝试使用 linq 复制以下 SQL 查询。在 SQL Server 上运行只需几分之一秒：

```
select g.reference, count(*)
from isis.dbo.[group] as g inner join
     isis.dbo.enrolment as e on g.groupid = e.groupid inner join
     isis.dbo.student as s on e.studentid = s.studentid inner join
     isis.dbo.progression as p on s.studentid = p.studentid
where p.academicyear = '12/13' and g.istutorgroup = 1 
group by reference 
```

在我的 MVC 应用程序中，我将“TutorGroups”列表传递给视图。对于视图中的每个导师组，我需要显示有关他们的各种信息，其中一项是他们进行的“进步”采访的数量。

我尝试了几种方法，但它们都需要 30 秒以上才能在我的 MVC 应用程序中运行：

```
<%TTMrequired = tg.Enrolments
                  .SelectMany(e => e.Student.Progressions
                                    .Where(p => p.TTMChecked == false && 
                                                p.TTMInterview == true && 
                                                p.AcademicYear == year))
                  .Count(); %> 
```

和

```
<%TTMrequired = tg.Enrolments
                  .Where(e => e.Student.Progressions
                               .Any(p => p.TTMChecked == false && 
                                         p.TTMInterview == true && 
                                         p.AcademicYear == year))
                  .Count(); %> 
```

有人对我如何加快速度有任何建议吗？我怀疑问题是我试图以一种愚蠢的方式去做——通常是这样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:39:06.173

您可以尝试做 a `Sum`of counts 而不是 a `SelectMany`：

```
tg.Enrolments.Sum(e => e.Student.Progressions
                                .Count(p => p.TTMChecked == false && 
                                            p.TTMInterview == true && 
                                            p.AcademicYear == year)
                  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:45:19.170

应该使用以下语法编写：

```
var TTMRequired = (from g in tg.Groups 
                   join e in tg.Enrolment on g.groupid equals e.groupid
                   join s in tg.Students on e.studentid equals s.studentid
                   join p in tg.Progressions on s.studentid = p.studentid
                   where p.academicyear.Equals("12/13") && g.istutorgroup.Equals(1)
                   group g by g.reference into grp
                   select new { 
                      grpRef = grp.Key,
                      grpCount = grp.Count()
                   }); 
```

注意：如果`g.istutorgroup`是 type`BIT`而不是`INT`，请考虑使用`.Equals(true)`.

# jquery - 隐藏工具栏 Jquery Mobile

> ID：14756169
> 
> 赞同：0
> 
> 时间：2013-02-07T16:34:58.177
> 
> 标签：jquery, jquery-mobile

使用 jquery mobile 隐藏工具栏的各种方法有哪些？理想情况下，我想在没有焦点时隐藏标题上方的工具栏。我开始摆弄基本布局

```
 <div data-role="navbar">
<ul>
    <li><a href="a.html">Settings</a></li>
    <li><a href="b.html">Whatever</a></li>
</ul> 
```

[http://jsfiddle.net/DMUwp/](http://jsfiddle.net/DMUwp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:40:06.120

一种解决方案可能是在单击标题时隐藏**导航栏：**

```
 $("div[data-role=header]").on("click", function () {
        $("div[data-role=navbar]").slideToggle(200);
    });

    $("div[data-role=navbar]").on("click", function (e) {
        e.stopPropagation();
    }); 
```

这是一个**[演示](http://jsfiddle.net/Dim13i/DMUwp/4/)**。

另一种可能是使用库提供的**data-position="fixed"**和**data-fullscreen="true"**，当单击/触摸屏幕上的某个位置时，它们将在页面底部隐藏/显示您的**导航栏。**

这是一个**[演示](http://jsfiddle.net/Dim13i/DMUwp/7/)**。

* * *

**编辑**

对于第一个，在加载页面时可能会出现一些问题，因此为避免此问题，您可以从**标题**中取出**导航栏**并将其放在上面，如下所示：

 **```
 <div data-role="navbar">
        <ul>
            <li><a href="a.html">Settings</a>

            </li>
            <li><a href="b.html">Whatever</a>

            </li>
        </ul>
    </div>
    <div data-role="header">
         <h1>Hide the Toolbar</h1>
    </div> 
```

然后添加这个js代码：

```
 $("div[data-role=header]").on("click", function () {
        $("div[data-role=navbar]").slideToggle(200);
    }); 
```

这是一个**[演示](http://jsfiddle.net/Dim13i/DMUwp/8/)**。**

# c# - 在 C# 中从特定日期字符串转换.ToDateTime

> ID：14756176
> 
> 赞同：1
> 
> 时间：2013-02-07T16:35:11.623
> 
> 标签：c#, .net, .net-3.5

我有一个具体的日期`string`：`"13/02/07,16:05:13+00"`

我正在尝试将其转换`C#`为`datetime`( `Convert.toDateTime`) 但我不断收到错误。

我也尝试使用以下代码解析它，但无济于事：

```
 DateTime dt = DateTime.ParseExact(date, "yy/MM/dd,hh:mm:ss+00",System.Globalization.CultureInfo.CurrentCulture); 
```

如何将 a 转换`string`为`datetime`真正特定的`datetime` `string`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:38:32.557

不要使用`CurrentCulture`- 使用不变的文化。否则，您将选择当前区域性的日期和时间分隔符。

此外，您需要使用`HH`而不是`hh`使用 24 小时制，而不是 12 小时制。这工作正常：

```
using System;
using System.Collections.Generic;
using System.Globalization;

class Test
{
    static void Main()
    {
        string date = "13/02/07,16:05:13+00";
        DateTime dt = DateTime.ParseExact(date, "yy/MM/dd,HH:mm:ss+00",
                                          CultureInfo.InvariantCulture);
        Console.WriteLine(dt);
    }
} 
```

“+00”肯定总是一样的吗？如果您需要处理非零偏移量，它会稍微改变一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:48:02.180

使用`HH`军用时间时用于小时部分。

```
DateTime dt = DateTime.ParseExact("13/02/07,16:05:13+00", "yy/MM/dd,HH:mm:ss+00",System.Globalization.CultureInfo.CurrentCulture); 
```

# ruby-on-rails-3 - Amazon S3 Rails 3.1.1 和 Windows 7 的连接问题

> ID：14756184
> 
> 赞同：1
> 
> 时间：2013-02-07T16:35:43.607
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip

我正在使用 Paperclip 升级我的 rails 应用程序并通过 ftp 上传我的附件（使用 paperclipftp gem）。我目前在我的开发环境中，其中包括 Rails 3.1.1、Ruby ruby​​ 1.9.2p290、回形针 3.0.4、aws-sdk 1.8.1.2 我对我的应用程序进行了更改以利用 aws-sdk gem 来利用 amazon s3 用于我的附件存储。这是我的 Gemfile 中的内容：

```
gem 'mysql2'
gem 'execjs'
gem 'web-app-theme', '~> 0.8.0'
gem 'therubyracer', :platforms => :ruby
gem 'paperclip', '~> 3.0.0'
gem 'tinymce-rails'
gem 'cocaine', '~> 0.3.2'
gem 'aws-sdk' 
```

在我的模型中，我定义了附件：

```
#paperclip
  has_attached_file :upload,
     :styles => Proc.new { |attach| attach.instance.attachment_styles },
     :storage => :s3,
     :s3_credentials => Rails.root.join('config', 's3.yml'),
     :path => "/:attachment/:id/:style/:basename.:extension",
     :url => "http://" + FTP_CONFIG['file_host'] + "/:attachment/:id/:style/:basename.:extension" 
```

我的 s3.yml 文件如下所示：

```
development:
  bucket: a36-dev
  access_key_id: #########
  secret_access_key: ##########

test:
  bucket: a36-test
  access_key_id: #########
  secret_access_key: #########

production:
  bucket: a36-prod
  access_key_id: #########
  secret_access_key: ######### 
```

我继续得到的错误是： MediaController#create_for_content 中的 Errno::ECONNABORTED 已建立的连接被主机中的软件中止

这是堆栈跟踪：

```
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/openssl/buffering.rb:235:in `syswrite'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/openssl/buffering.rb:235:in `do_write'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/openssl/buffering.rb:249:in `write'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/protocol.rb:191:in `write0'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/protocol.rb:167:in `block in write'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/protocol.rb:182:in `writing'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/protocol.rb:166:in `write'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/http.rb:1756:in `send_request_with_body_stream'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/http.rb:1726:in `exec'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/http.rb:1189:in `transport_request'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/net/http.rb:1177:in `request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/net/http/connection_pool/session.rb:64:in `request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/net/http/connection_pool.rb:173:in `block in request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/net/http/connection_pool.rb:194:in `session_for'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/net/http/connection_pool.rb:171:in `request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/net/http/connection_pool/connection.rb:173:in `request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/http/net_http_handler.rb:66:in `handle'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:230:in `block in make_sync_request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:266:in `retry_server_errors'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:226:in `make_sync_request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:451:in `block (2 levels) in client_request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:334:in `log_client_request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:420:in `block in client_request'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:316:in `return_or_raise'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/core/client.rb:419:in `client_request'
(eval):3:in `put_object'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/s3/s3_object.rb:1649:in `write_with_put_object'
vendor/bundle/ruby/1.9.1/gems/aws-sdk-1.8.1.2/lib/aws/s3/s3_object.rb:600:in `write'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/storage/s3.rb:313:in `block in flush_writes'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/storage/s3.rb:299:in `each'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/storage/s3.rb:299:in `flush_writes'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/attachment.rb:200:in `save'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/instance_methods.rb:17:in `block in save_attached_files'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/instance_methods.rb:10:in `block in each_attachment'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/instance_methods.rb:9:in `each'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/instance_methods.rb:9:in `each_attachment'
vendor/bundle/ruby/1.9.1/gems/paperclip-3.0.4/lib/paperclip/instance_methods.rb:16:in `save_attached_files'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:401:in `_run_save_callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/callbacks.rb:264:in `create_or_update'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/persistence.rb:37:in `save'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/validations.rb:50:in `save'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/attribute_methods/dirty.rb:22:in `save'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:241:in `block (2 levels) in save'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:208:in `transaction'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:241:in `block in save'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:240:in `save'
app/controllers/media_controller.rb:207:in `create_for_content'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/abstract_controller/base.rb:167:in `process_action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/rendering.rb:10:in `process_action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:425:in `_run__690981913__process_action__778841897__callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:386:in `_run_process_action_callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/abstract_controller/callbacks.rb:17:in `process_action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/rescue.rb:17:in `process_action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/notifications.rb:53:in `block in instrument'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/notifications.rb:53:in `instrument'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/params_wrapper.rb:201:in `process_action'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/abstract_controller/base.rb:121:in `process'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/abstract_controller/rendering.rb:45:in `process'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal.rb:193:in `dispatch'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal.rb:236:in `block in action'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:65:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:65:in `dispatch'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:29:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/route_set.rb:152:in `block in call'
vendor/bundle/ruby/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:96:in `block in recognize'
vendor/bundle/ruby/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:75:in `optimized_each'
vendor/bundle/ruby/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:95:in `recognize'
vendor/bundle/ruby/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/route_set.rb:141:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:532:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/etag.rb:23:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/conditionalget.rb:35:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/head.rb:14:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/flash.rb:243:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/session/abstract/id.rb:195:in `context'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/session/abstract/id.rb:190:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/cookies.rb:331:in `call'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/query_cache.rb:62:in `call'
vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:477:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:392:in `_run_call_callbacks'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/callbacks.rb:28:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/reloader.rb:68:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/sendfile.rb:101:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/rack/logger.rb:13:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/methodoverride.rb:24:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/runtime.rb:17:in `call'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/lock.rb:15:in `call'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/middleware/static.rb:53:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/engine.rb:456:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/rack/content_length.rb:16:in `call'
vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/rack/log_tailer.rb:14:in `call'
vendor/bundle/ruby/1.9.1/gems/rack-1.3.9/lib/rack/handler/webrick.rb:59:in `service'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
```

我无法弄清楚为什么我不断收到此错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:39:10.273

我遇到了同样的问题，并记得我最近更新了我的 aws-sdk、回形针、可卡因宝石。我最终做的是将回形针锁定到版本“3.0.4”，将 aws-sdk 锁定到最新版本“~> 1.8.3.1”，并将可卡因锁定在“0.3.2”。这解决了 imagemagick 和 amazon 的问题。我知道这并不能真正解决问题，但它对我有用。

# data-binding - 带有选项绑定的淘汰赛集自定义属性

> ID：14756186
> 
> 赞同：7
> 
> 时间：2013-02-07T16:35:46.740
> 
> 标签：data-binding, knockout.js

我有一个简单的选择多个选项绑定，如下所示：

```
<select multiple="multiple" width="50" data-bind="options: propositions, optionsText: function(item){ return item.name }, optionsValue: function(item) { return item.name }"></select> 
```

这可以在选项项目的 value 属性上设置 item.name，如下所示：

```
<option value=" item.name value here ... "> item.name also here </option> 
```

我想要的是设置一个这样的自定义属性：

```
<option value=" item.name " data-value = " item.name "> item.name also here </option> 
```

是否可以告诉敲除在绑定中设置属性**数据值**，您将如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T16:58:25.380

除了使用`options`绑定之外，您还可以使用`foreach`. 在这种情况下，您可以将任何属性分配给选项元素：

```
<select multiple="multiple" width="50" data-bind="foreach: propositions">
   <option data-bind="value: name, attr: {'data-value': name}"></option>
</select> 
```

# c# - 尝试在 ConfigurationElementCollection 上使用 Parallel.ForEach。无法让它工作

> ID：14756188
> 
> 赞同：1
> 
> 时间：2013-02-07T16:35:54.713
> 
> 标签：c#, app-config, ienumerable, ienumerator

我有一个自定义配置部分，其中包含我使用从这个[问题](https://stackoverflow.com/questions/3935331/how-to-implement-a-configurationsection-with-a-configurationelementcollection)中获得的以下代码创建的集合：

```
public class GenericConfigurationElementCollection<T> : ConfigurationElementCollection, IEnumerable<T> where T : ConfigurationElement, new()
{
    List<T> _elements = new List<T>();

    protected override ConfigurationElement CreateNewElement()
    {
        T newElement = new T();
        _elements.Add(newElement);
        return newElement;
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return _elements.Find(e => e.Equals(element));
    }

    public new IEnumerator<T> GetEnumerator()
    {
        return _elements.GetEnumerator();
    }
} 
```

我使用以下属性实现了我的集合：

```
 [ConfigurationProperty("states")]
    [ConfigurationCollection(typeof(StateElement))]
    public GenericConfigurationElementCollection<StateElement> States
    {
        get
        {
            return (GenericConfigurationElementCollection<StateElement>)this["states"];
        }
    } 
```

问题是，当我尝试使用 Parallel.ForEach 遍历集合时，如下所示

```
Parallel.ForEach<StateElement>(config.States.GetEnumerator(), state=> theState.StateStatus(state)); 
```

我收到以下错误：

```
The best overloaded method match for 'System.Threading.Tasks.Parallel.ForEach<States.Configuration.StateElement>(System.Collections.Generic.IEnumerable<States.Configuration.StateElement>, System.Action<States.Configuration.StateElement>)' has some invalid arguments   
Argument 1: cannot convert from 'System.Collections.Generic.IEnumerator<States.Configuration.StateElement>' to 'System.Collections.Generic.IEnumerable<States.Configuration.StateElement>' 
```

最后一个让我难住了。无法从 IEnumerator 转换为 IEnumerable？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:42:28.947

尝试

```
config.States.Cast<StateElement>() 
```

代替

```
config.States.GetEnumerator() 
```

# sql - 级联删除可能会导致循环

> ID：14756191
> 
> 赞同：0
> 
> 时间：2013-02-07T16:36:07.097
> 
> 标签：sql, sql-server

我有一个名为 Request 的表和一个名为 LoadingBase 的表。一个“请求”有一个装载地点和一个卸载地点。这两个信息都保存在 LoadingBase 中。

例如：

请求 #123 ...

*   参考 LoadingBase #567 获取加载信息
*   参考 LoadingBase #568 获取卸载信息

所以我有外键关系：

*   FK_Requests_LoadingBases_Loading_ID（删除规则：无操作）
*   FK_Requests_LoadingBases_Unloading_ID（删除规则：无操作）

现在我想设置级联删除。

当我为第一个FK（删除规则：级联）设置并保存时，保存成功。

当我尝试第二个 FK 时，出现以下错误：

'LoadingBases' 表已成功保存 'Requests' 表 - 无法创建关系 'FK_Requests_LoadingBases_Loading_ID'。
**在表“Requests”上引入 FOREIGN KEY 约束“FK_Requests_LoadingBases_Loading_ID”可能会导致循环或多个级联路径。**指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

有人知道如何在这种情况下执行级联删除吗？

谢谢。

# c# - 如何找到（强类型）集合中包含的类型？

> ID：14756193
> 
> 赞同：3
> 
> 时间：2013-02-07T16:36:09.300
> 
> 标签：c#, reflection

我有一个看起来像这样的类：

```
public class ObjectA
{
    public ObjectB OneObject { get; set; }

    public List<ObjectC> ManyObject { get; set; }
} 
```

然后是一个函数来读取类包含的内容并返回属性的类型：

```
source = typeof(*some ObjectA*)

var classprops = source.GetProperties(BindingFlags.Public | BindingFlags.Instance)
.Where(x => x.PropertyType.IsClass && !x.PropertyType.IsValueType && x.PropertyType.Name != "String");

foreach (var prop in classprops)
{
    var classnamespace = CommonTool.GetNamespaceFromProp(prop);

    if ((prop.PropertyType).Namespace == "System.Collections.Generic")
    {
        string newprop = prop.ToString();
        int start = newprop.IndexOf("[")+1;
        int end = newprop.IndexOf("]");
        newprop = newprop.Substring(start, end-start);
        newprop = string.Format("{0}, Env.Project.Entites", newprop);
        classnamespace = newprop;
    }
    //some code to read attributes on the properties...
} 
```

我的问题是`if ((prop.PropertyType).Namespace == "System.Collections.Generic")`. 它**闻起来**。

有更好的方法吗？

## 编辑 ：

应用程序中的一个类使用`List<int>`.
这导致了崩溃。
它不仅气味难闻。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:50:50.253

如果要检查属性是否为泛型集合，并获取元素类型，则可以检查它是否为 impelements ，如果是则`IEnumerable<T>`获取类型`T`

```
Type propType = prop.PropertyType;
if (propType.IsGenericType)
{
    Type enumerableType = propType.GetInterfaces().FirstOrDefault(it => it.IsGenericType && it.GetGenericTypeDefinition() == typeof(IEnumerable<>)));
    if(enumerableType != null)
    {
        Type elementType = enumerableType.GetGenericArguments()[0];
    }
} 
```

# c# - C#：我可以在不使用基类的构造函数的情况下创建继承类吗？

> ID：14756194
> 
> 赞同：-1
> 
> 时间：2013-02-07T16:36:10.043
> 
> 标签：c#, inheritance, constructor

我需要使用构造函数创建一个**继承类，而不是在****基**类中定义？问题是，继承类中的构造函数需要**构造**`:base()`函数吗？如何在不更改**基**类的任何组件的情况下解决此问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T16:40:45.940

否。创建派生类的实例*始终为*¹意味着链接到基类构造函数，无论是显式还是隐式（也可能是间接地，通过派生类中的其他构造函数）。

不过，它不必是无参数的构造函数。例如，您可以：

```
public class Base
{
    private readonly int id;

    public Base(int id)
    {
        this.id = id;
    }
}

public class Derived : Base
{
    public Derived(int id) : base(id)
    {
    }
} 
```

不过，用于基类构造函数的参数的值不必与参数直接相关。例如，使用与上面相同的基类，您可以：

```
public class Derived : Base
{
    private readonly string name;

    public Derived(string name) : base(name.Length)
    {
        this.name = name;
    }

    public Derived() : base(-1)
    {
        this.name = null;
    }
} 
```

重要的是每个类都必须确保以有效的方式构造它。例如，`Base`可能会验证`id`是偶数，或类似的东西 - 如果您在创建派生类的实例时可以绕过该验证，那就太糟糕了，因为`Base`那时的其余代码不能依赖它.

* * *

¹好的，可能是由于序列化或其他类似魔法而根本没有调用构造函数的奇怪情况。忽略那些虽然...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:40:20.650

拥有一个具有与基类不同的参数的构造函数的继承类并没有错：

```
public class Parent
{
    public int Value { get; set; }
    public Parent()
    {
        Value = 5;
    }
}

public class Child : Parent
{
    public string Text { get; set; }
    public Child(string text)
        : base()  //note this line can be omitted; the compiler will add it automatically
    {
        Text = text;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:48:52.757

没有**构造函数**就不可能实现一个类。即使您没有**定义**任何内容，*默认*构造函数也会作为`public BaseClass() { }`. 一定是因为你无法*访问*基类中定义的构造函数。现在的问题是您是不想更改基类实现还是根本不想更改。

您需要将基类构造函数（可能是私有的或内部的）的访问修饰符更改为**protected**或**public**。

# c# - 正则表达式从表单结果返回值

> ID：14756195
> 
> 赞同：3
> 
> 时间：2013-02-07T16:36:17.803
> 
> 标签：c#, regex

网络表单的结果通过文本邮件发送给我，我需要解析其中的所有值。我想要一个能够为给定键返回结果的正则表达式。

```
String Pattern = String.Format("^.*{0}:\s*(?<mail><mailto\:)?(.*)(?(mail)>)\s*$", InputString); 
```

我启用了这两个选项：`RegexOptions.IgnoreCase | RegexOptions.Multiline`

### 这是需要解析的文本的一部分。

```
City:     Test City
Country:  Mycountry

Phone:    212
Fax:      
E-Mail:   <mailto:mymail@example.com> 
```

除了没有价值的情况（例如`Fax`. 如果我将`Fax`InputString 作为输入，则将返回完整的下一行`E-Mail: <mailto:mymail@example.com>`。我想要没有结果或空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:41:40.227

你的问题是，即使你没有使用`RegexOptions.SingleLine`，因此`.`不匹配`\n`，`\s`字符类*确实*匹配`\n`。

您可以通过替换`\s`with的每个实例来解决此问题`[^\S\r\n]`，即不匹配“空格（包括换行符）”，而是匹配“非（非空格或换行符）”。

```
string pattern = String.Format(
    @"^[^\S\r\n]*{0}:[^\S\r\n]*(?<mail><mailto\:)?(.*)(?(mail)>)[^\S\r\n]*$",
    "Fax"); 
```

但是，您会遇到另一个问题：`RegexOptions.Multiline`表示`^`或`$`匹配 a `\n`，因此`\r`如果匹配中的换行符是`\r\n`.

要解决此问题，您*不能*使用`RegexOptions.Multiline`，而是替换`^`为`(?<=^|\r\n)`和`$`，`(?=$|\r\n)`手动匹配`\r\n`换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:59:13.760

这是一个模式和代码，它将项目放入字典中以进行提取。如果值为空，则其键在字典中有效，但该 ke 包含或返回的值为 null。

```
string data = @"City: Test City
Country: Mycountry
Phone: 212
Fax:
E-Mail: <mailto:mymail@example.com>";

string pattern = @"^(?<Key>[^:]+)(?::)(?<Value>.*)";

var resultDictionary =

Regex.Matches(data, pattern, RegexOptions.Multiline)
     .OfType<Match>()
     .ToDictionary (mt => mt.Groups["Key"].Value, mt => mt.Groups["Value"].Value);

/* resultDictionary is a dictionary with these values:

City      Test City
Country   Mycountry
Phone     212
Fax
E-Mail  <mailto:mymail@example.com>
*/ 
```

# vb.net - WCF 多态参数

> ID：14756196
> 
> 赞同：0
> 
> 时间：2013-02-07T16:36:18.223
> 
> 标签：vb.net, wcf, serialization, soap

我有一个公开函数的 WCF 服务：

```
Public Function FeedAnimal(ByVal animal As Animal) As Animal Implements IFarm.FeedAnimal
    animal.Feed()
    Return animal;
End Function 
```

然而，Animal 是一个具有许多派生类型的抽象类，每个派生类型都有自己的属性。但是，当我在 SOAPUI 中使用指示 Cow 的属性发出请求时，我收到一个错误，即我无法创建抽象类。如何让 WCF 将参数反序列化为其实际类型？让我们假设它们都可以通过不同命名的属性来区分。

我已经尝试在任何地方添加 KnownType 属性，但无济于事。这样做允许我*返回*派生类型，但不接受它们作为参数。

如果我想做的事情完全疯狂，请告诉我下一个最接近的事情

**已编辑；如果我可以让它回退到仅用于此功能的 XmlSerializer，我会很满意，它曾经在以前的版本中工作**

```
[ServiceContract(Namespace:=Constants.SERVICE_NAMESPACE)]
[ServiceKnownType(GetType(Cow))]
Public Interface IFarm
    [OperationContract()]
    [ServiceKnownType(GetType(Cow))]
    [Validation(CheckAssertions:=False, SchemaValidation:=True)]
    Function FeedAnimal(ByVal animal As Animal) _
        As Animal
End Interface 
```

和类

```
[KnownType(GetType(Cow))]
Public MustInherit Class Animal
    Public weight As Integer
End Class

Public Class Cow
    Inherits Animal
    Public mooPower As Double
End Class 
```

和请求：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:v3="mycomapnyaddresss" xmlns:foo="animalnamespace">
   <soap:Header/>
   <soap:Body>
  <v3:FeedAnimal>
     <!--Optional:-->
     <v3:animal>
        <!--Optional:-->
        <foo:weight>100</foo:weight>
        <foo:mooPower>10.0</foo:mooPower>
     </v3:animal>
  </v3:FeedAnimal> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:39:06.960

您是否尝试过[ServiceKnownType](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)属性？

[MSDN](http://blogs.msdn.com/b/sowmy/archive/2006/06/06/618877.aspx)这里有一篇博客文章很好地解释了它。

ServiceKnownType 继续实际的服务接口本身......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:44:37.920

您必须将[KnownType](http://msdn.microsoft.com/en-us/library/ms730167.aspx)属性添加到合同中：

```
<DataContract(), KnownType(GetType(Cow)), KnownType(GetType(Dog))> _
Public Class Animal
   ...
End Class 
```

# ember.js - 如何在模板中呈现 ember-data 日期

> ID：14756199
> 
> 赞同：2
> 
> 时间：2013-02-07T16:36:23.153
> 
> 标签：ember.js

我正在尝试在我的车把模板中打印日期属性。但是输出是空的。我该如何渲染它？

我的模型：

```
App.Post = DS.Model.extend({
    type: DS.attr('string'),
    title: DS.attr('string'),
    summary: DS.attr('string'),
    body: DS.attr('string'),
    date: DS.attr('date')
});

App.Post.FIXTURES = [
    {id:1, type:"news", title:"Some", summary:"Lorem ", date:new Date()}, 
    {id:2, type:"gallery", title:"Some", summary:"Lorem", date:new Date()}
]; 
```

我的车把模板：

```
<script type="text/x-handlebars" data-template-name="posts">
    {{#each post in controller}}
        {{post.date}}: {{post.type}}- {{post.title}}
    {{/each}}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T16:45:32.697

您不能在 Fixture 本身中使用 new Date()，您应该使用 ISOstring 或类似的东西。请记住，Date 的转换会查找来自持久层（在您的情况下为 Fixture）的字符串，然后将其从您的字符串转换为 Date 对象。

因此，将您在 Fixture 中的日期设置为“2013-02-07T16:44:57.000Z”或类似的内容，即“2013-02-07T16:44:57”也应该可以。

# php - 从另一个 SQL 表中搜索后在 SQL 中插入数据数组

> ID：14756203
> 
> 赞同：0
> 
> 时间：2013-02-07T16:36:34.333
> 
> 标签：php, mysql, sql, arrays, insert

我有一个数组`$members`，其中包含`ID`table 中的一些（最多 6 个）`users`。使用以下代码，我遍历 的每个索引`$members`，搜索详细信息并将它们存储在另一个数组中。

```
 foreach($members as $key=>$value){
            $res = mysql_query("SELECT id,name,email FROM users WHERE id='$value'");
            if ($res === false) {
                echo mysql_error();
                die;
            }
            $row = mysql_fetch_assoc($res);

            if($row['id'])
            {
                $members_name[]=$row['name'];//array for name
            }
        } 
```

现在我想将存储在数组中的`ID`&插入到另一个 TABLE中，格式如下：（左侧是我的 TABLE ）`names``register``rows``register`

```
mem_0_id-->$members[0]
mem_0_name-->$members_name[0]
mem_1_id-->$members[1]
mem_1_name-->$members_name[1]
mem_2_id-->$members[2]
mem_2_name-->$members_name[2]
mem_3_id-->$members[3]
mem_3_name-->$members_name[3]
mem_4_id-->$members[4]
mem_4_name-->$members_name[4] 
```

我怎样才能以这种方式插入？只使用一个 INSERT 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:50:56.397

没有尝试过，但无论如何这是我的答案:)

```
$query = "INSERT INTO register(id, name) VALUES ($members[0], $members_name[0])";

for($i=1; $i<count($members); $i++)
{
    $query .= ", ($members[$i], $members_name[$i])";
} 
```

然后尝试执行查询..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:16:22.260

您是否对数组执行其他任何操作，或者您只是从一个表中检索它以便将其插入到另一个表中？

如果是这样，那么您可以这样做。

```
$memberIds = implode(',', $members); // comma separated list of member ids
$query = "insert into register (id, name) select id, name from users where id in ($memberIds)";
mysql_query($query); // this will select and insert in one go 
```

如果您确实需要将数组保存在内存中，那么一次将其全部取出仍然是一个好主意

```
$memberIds = implode(',', $members); // comma separated list of member ids
$query = "select id, name from users where id in ($memberIds)";
$res = mysql_query($query);
while ($row = mysql_fetch_assoc($res)) {
    $memberData[] = $row;
} 
```

这是因为在循环中运行查询对性能非常不利。每次运行查询都会产生开销，因此一次获取所有数据意味着您只需支付一次而不是多次的开销。

然后你可以构建一个语句来插入多行：

```
$sql = "insert into register (id, name) values ";
$sql .= "(" . $memberData[0]['id'] . "," . $memberData[0]['name'] . ")";
for($i = 1; $i < count($memberData); $i++) {
    $sql .= ",(" . $memberData[$i]['id'] . ",'" . $memberData[$i]['name'] . "')";
}
mysql_query($sql); 
```

由于逗号和引号，这有点讨厌，但如果我做得正确，那么如果你这样做

```
echo $sql; 
```

你应该得到类似的东西

```
insert into register (id, name) values (1, 'john'), (2, 'jane'), (3, 'alice'); 
```

您可以看到第一种方式，即您在一个语句中选择和插入，更好更容易，所以如果您不对数组做任何其他事情，那么我强烈建议您这样做。

# html - 为什么保证金：自动不起作用？

> ID：14756204
> 
> 赞同：23
> 
> 时间：2013-02-07T16:36:42.247
> 
> 标签：html, css

我想将我的元素居中，但是当我使用

```
margin-left: auto;
margin-right: auto; 
```

它不起作用！

这是我的html

```
<section id="t">
    <article class="tc">Hi</article>
    <article class="tc">Hi agian!</article>
</section> 
```

这是我的CSS：

```
#t {
    margin-left: auto;
    margin-right: auto;
    margin-top:10px;
}
.tc {
    margin-left: auto;
    margin-right: auto;
    width: 600px;
    display: inline;
    border-style: solid;
    border-width:1px;
} 
```

你可以在[这里](http://jsfiddle.net/ahmadalli/2sagZ/5/)看到结果。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-07T16:40:50.697

```
margin-left: auto;
margin-right: auto; 
```

不会影响元素宽度`display:inline`。

如果你想让它工作，你应该给一个固定的宽度，并设置`display:block`or `display:inline-block`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-07T16:39:34.570

要使边距自动工作，您需要在项目上有一个宽度。

`#t { width: some-width; }`

[http://jsfiddle.net/2sagZ/7/](http://jsfiddle.net/2sagZ/7/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T16:42:07.177

CSS

```
body{
    width:100%;
}

#t {
    margin-left: auto;
    margin-right: auto;
    margin-top:10px;
    width:600px;
}
.tc {
    display:inline;
    border-style: solid;
    border-width:1px;
} 
```

HTML

```
<body>
<section id="t">
    <article class="tc">Hi</article>
    <article class="tc">Hi agian!</article>
</section>
</body> 
```

那是你想要的吗？

[http://jsfiddle.net/ahmadalli/2sagZ/5/](http://jsfiddle.net/ahmadalli/2sagZ/5/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T16:38:21.390

您正在内联显示您的文章。只有块元素可以通过将它们的边距设置为居中`auto`。因此，您需要使它们成为块级元素`margin: auto`才能工作。

默认情况下，您的主要部分标签的宽度为 100%。因此，如果它已经填满屏幕，则无法将其居中。所以你需要使宽度小于 100%`margin: auto`才能工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T16:52:22.270

如果您正在使用`inline`样式，则可以使用`text-align: center`

[http://jsfiddle.net/3MJEm/](http://jsfiddle.net/3MJEm/)

```
#t {
    margin-left: auto;
    margin-right: auto;
    margin-top:10px;
    text-align:center;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T16:38:46.680

您可以尝试给宽度一个百分比，例如 width: 75%;。我也会给 div 定位，我建议使用相对。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T16:39:13.180

`#t`需要一个宽度才能居中。

设置为`articles`时不会居中`display:inline`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-20T20:35:19.323

```
#t {
margin: auto;
margin-top:10px;
width: 84px; 
}
.tc {
display: inline;
border-style: solid;
border-width:1px;
} 
```

# vb.net - 使用 vb.net 向群组发送群发短信

> ID：14756207
> 
> 赞同：0
> 
> 时间：2013-02-07T16:36:50.953
> 
> 标签：vb.net, api, sms, sms-gateway, bulksms

我最近使用 vb.net 连接到 SMS 提供程序 API

我创建了一个组表并在该组中插入了所有数字，然后到达每一行并发送触发 API 以处理发送。短信不是发给所有群成员的，它只成功发送到群中的第一个手机号码。

如何解决这个问题呢 ？我想我必须在每次发送之间设置一个延迟，但我没有用。我的代码如下：

```
 Function GetGroupsMobileNumbers() As ArrayList
    Dim MobileNumbersArrayList As New ArrayList

    For Each Contact As FilsPayComponent.ContactAddress In FilsPayComponent.ContactAddress.GetAllContactAddressByGroupId(ddlGroup.SelectedValue)
        MobileNumbersArrayList.Add(Contact.Mobile)
    Next

    Return MobileNumbersArrayList
End Function
Protected Sub btnSend_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSend.Click

    If ddlGroup.SelectedValue = 0 Then
        lbResult.Text = "No groups selected"
        Exit Sub
    End If

    Dim MobileNumbersArrayList As ArrayList
    MobileNumbersArrayList = GetGroupsMobileNumbers()

    If MobileNumbersArrayList.Count = 0 Then

        lbResult.Text = "Group doesnt contain numbers"

        Exit Sub
    End If

    Dim TotalNo As Integer = FilsPayComponent.ContactAddress.AddressContactsCount(ddlGroup.SelectedValue)
    If MobileNumbersArrayList.Count * messagecount.Value <= FilsPayComponent.SmSUser.GetSmSUserByUserId(Context.User.Identity.Name).Balance Then

        Dim txtMsg As String
        Dim smstype As Integer

        If hidUnicode.Value <> "1" Then
            txtMsg = txtMessage.Text
            smstype = 1
        Else
            txtMsg = ConvertTextToUnicode(txtMessage.Text)

            smstype = 2
        End If
        Dim x As Integer
        'For Each Contact As FilsPayComponent.ContactAddress In FilsPayComponent.ContactAddress.GetAllContactAddressByGroupId(ddlGroup.SelectedValue)
        For Each Contact In MobileNumbersArrayList.ToArray

            Dim toMobile As String = Contact.Mobile

            If toMobile.Length > 10 Then

                Dim ExecArrayList As ArrayList
                ExecArrayList = SendSMS(toMobile, txtMsg, smstype)

                '-- give the excution more time
                If ExecArrayList.Count < 1 Then
                    Threading.Thread.Sleep(1000)
                End If
                '-- give the excution more time
                If ExecArrayList.Count < 1 Then
                    Threading.Thread.Sleep(1000)
                End If
                '-- give the excution more time
                If ExecArrayList.Count < 1 Then
                    Threading.Thread.Sleep(1000)
                End If

                x = x + 1

                '  lbresult.Text = "Sent Successfully"
            End If

        Next

        FilsPayComponent.SmSUser.RemoveSmsCredit(Context.User.Identity.Name, messagecount.Value * x)

        Dim NewsmsarchiveItem As New FilsPayComponent.smsarchive
        NewsmsarchiveItem.FromMobile = txtSenderID.Text
        NewsmsarchiveItem.ToMobile = "0"
        NewsmsarchiveItem.GroupId = ddlGroup.SelectedValue
        NewsmsarchiveItem.DateSent = DateTime.Now
        NewsmsarchiveItem.Msg = txtMessage.Text
        NewsmsarchiveItem.GroupCount = x
        NewsmsarchiveItem.Optional1 = Context.User.Identity.Name
        NewsmsarchiveItem.Optional2 = "1"

        NewsmsarchiveItem.MessageNo = messagecount.Value

        Try
            NewsmsarchiveItem.Addsmsarchive()
            lbResult.Text = "Message sent successfully"
            btnSend.Visible = False

        Catch ex As Exception
            lbResult.Text = ex.Message
        End Try

    Else

        lbResult.Text = "Not enough credit, please refill "

    End If
End Sub

Sub SendSMS(ByVal toMobile As String, ByVal txtMsg As String, ByVal smstype As Integer)
    Dim hwReq As HttpWebRequest
    Dim hwRes As HttpWebResponse

    Dim smsUser As String = "xxxxxx"
    Dim smsPassword As String = "xxxxxx"
    Dim smsSender As String = "xxxxxx"

    Dim strPostData As String = String.Format("username={0}&password={1}&destination={2}&message={3}&type={4}&dlr=1&source={5}", Server.UrlEncode(smsUser), Server.UrlEncode(smsPassword), Server.UrlEncode(toMobile), Server.UrlEncode(txtMsg), Server.UrlEncode(smstype), Server.UrlEncode(smsSender))
    Dim strResult As String = ""
    Try

        hwReq = DirectCast(WebRequest.Create("http://xxxxx:8080/bulksms/bulksms?"), HttpWebRequest)

        hwReq.Method = "POST"
        hwReq.ContentType = "application/x-www-form-urlencoded"
        hwReq.ContentLength = strPostData.Length

        Dim arrByteData As Byte() = ASCIIEncoding.ASCII.GetBytes(strPostData)
        hwReq.GetRequestStream().Write(arrByteData, 0, arrByteData.Length)

        hwRes = DirectCast(hwReq.GetResponse(), HttpWebResponse)
        If hwRes.StatusCode = HttpStatusCode.OK Then
            Dim srdrResponse As New StreamReader(hwRes.GetResponseStream(), Encoding.UTF8)
            Dim strResponse As String = srdrResponse.ReadToEnd().Trim()
            Select Case strResponse
                Case "01"
                    strResult = "success"

                    Exit Select
                Case Else
                    strResult = "Error: " + strResponse
                    Exit Select

            End Select
        End If
    Catch wex As WebException
        strResult = "Error, " + wex.Message
    Catch ex As Exception
        strResult = "Error, " + ex.Message
    Finally
        hwReq = Nothing
        hwRes = Nothing
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:23:23.653

如果`function GetGroupsMobileNumbers()`不返回数字数组列表（作为字符串），则注释掉。`MobileNumbersArrayList = GetGroupsMobileNumbers()` 然后使用下面注释掉的代码（使用您自己的三个电话号码）将其设置为测试。

```
 Private Sub btnSend_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSend.Click
    If ddlGroup.SelectedValue = 0 Then
        lbResult.Text = "No groups selected"
        Exit Sub
    End If

    Dim MobileNumbersArrayList As New ArrayList
    MobileNumbersArrayList = GetGroupsMobileNumbers()

    'MobileNumbersArrayList.Add("07702123456")
    'MobileNumbersArrayList.Add("07702123457")
    'MobileNumbersArrayList.Add("07702123458")

    If MobileNumbersArrayList.Count = 0 Then

        lbResult.Text = "Group doesnt contain numbers"
        Exit Sub
    End If

    Dim TotalNo As Integer = FilsPayComponent.ContactAddress.AddressContactsCount(ddlGroup.SelectedValue)

    If MobileNumbersArrayList.Count * messagecount.Value <= FilsPayComponent.SmSUser.GetSmSUserByUserId(Context.User.Identity.Name).Balance Then
        Dim txtMsg As String
        Dim smstype As Integer

        If hidUnicode.Value <> "1" Then
            txtMsg = txtMessage.Text
            smstype = 1
        Else
            txtMsg = ConvertTextToUnicode(txtMessage.Text)
            smstype = 2
        End If

        Dim x As Integer
        For Each Contact In MobileNumbersArrayList
            If Contact.Length > 10 Then
                SendSMS(Contact, txtMsg, smstype)
                x = x + 1
            End If

        Next

        FilsPayComponent.SmSUser.RemoveSmsCredit(Context.User.Identity.Name, messagecount.Value * x)

        Dim NewsmsarchiveItem As New FilsPayComponent.smsarchive
        NewsmsarchiveItem.FromMobile = txtSenderID.Text
        NewsmsarchiveItem.ToMobile = "0"
        NewsmsarchiveItem.GroupId = ddlGroup.SelectedValue
        NewsmsarchiveItem.DateSent = DateTime.Now
        NewsmsarchiveItem.Msg = txtMessage.Text
        NewsmsarchiveItem.GroupCount = x
        NewsmsarchiveItem.Optional1 = Context.User.Identity.Name
        NewsmsarchiveItem.Optional2 = "1"

        NewsmsarchiveItem.MessageNo = messagecount.Value

        Try
            NewsmsarchiveItem.Addsmsarchive()
            lbResult.Text = "Message sent successfully"
            btnSend.Visible = False

        Catch ex As Exception
            lbResult.Text = ex.Message
        End Try

    Else

        lbResult.Text = "Not enough credit, please refill "

    End If
End Sub 
```

`btnSend`如果您的其余代码没问题，这个sub 应该可以工作。注意你的线路。

```
Dim TotalNo As Integer = FilsPayComponent.ContactAddress.AddressContactsCount(ddlGroup.SelectedValue) 
```

似乎什么也没做。如果您需要设置延迟，最好将其转换为向循环`SendSMS`返回已发送确认的函数。`btnSend`大多数短信 API 可以处理数字列表，而不是等待每条短信的响应。毕竟，他们只会在最后被添加到队列中。

# java - InputVerifier 错误地产生焦点并需要将其与其他 ActionListener 方法一起使用的建议

> ID：14756211
> 
> 赞同：0
> 
> 时间：2013-02-07T16:37:00.033
> 
> 标签：java, actionlistener, inputverifier

我有一个 GUI，用户可以在其中将测量值输入多个字段并根据测量值计算结果。我正在尝试为这些字段实现以下内容 -

1.  输入的值必须在适当的范围内
2.  我有一个选项对话框，其中包括设置单位。任何包含值的字段都必须更新为当前单位
3.  当字段中的值发生变化时，我需要查看是否输入了所有测量值，如果是，则执行（或重做）计算。

我已经用表格做了类似的事情（模型保留了“标准”单位中的值，并且自定义渲染器和单元格编辑器处理了向用户显示当前单位中的值并将值存储在模型中的“标准”单位中）。

我不相信 JTextField 有要覆盖的渲染器，文档编辑器看起来有点吓人，而且用户不喜欢 JFormattedTextField，所以我想我会创建一个自定义 JTextField 来存储“标准”值并使用 inputVerifier我以前用于表的。

示例代码如下（它几乎可以工作）。我使用 JComboBox 作为选项对话框的替代品，并且只实现了一个文本字段。

我可以使用一些专家的建议-

1.  我可能误解了 setInputVerifier。我认为如果我尝试从文本字段更改焦点并在我说不产生焦点时将焦点保持在文本字段中，则应该调用它。但是，如果我在文本字段中输入“aa”（不按回车键），我可以更改组合框中的值。我的调试 println 说-

Volume value changed (f) // 我的焦点监听器触发了更新模型 // 从我的焦点监听器验证：'aa' //来自我的输入验证器 无效的数字 //来自我的输入验证器

文本框出现红色轮廓，我听到哔声，但组合框处于活动状态。文本字段以空值结束，因为当我更改其值时会调用组合框操作侦听器。为什么允许我更改组合框的值？我该如何阻止它？

1.  我添加一个 InputVerifier、两个 ActionListener 和一个 FocusListener 似乎是错误的。我确实喜欢任务的逻辑分离。我应该做什么？我是否应该扩展 DoubleVerifier 并覆盖 actionPerformed 以仅包含 DoubleVerifier 中当前的内容以及 VolumeValueListener 中的内容？

我希望验证文本字段，并在用户输入 (CR) 并留在字段中或离开字段时更新基础数据的视图。这就是为什么行动和焦点听众。

欢迎任何更正或见解。

UnitsTextField.java

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class UnitsTextField extends JTextField
{
   Double modelValue = null;
   Double viewValue  = null;

   UnitsTextField( int cols )
   {
      super( cols );
   }

   public void updateModel() throws Exception
   {
      System.out.println( "Updating model" );
      modelValue = Conversion.modelValue( this.getText() );
   }

   public void refreshView()
   {
      this.setText( Conversion.viewString( modelValue ) );
   }

   public Double getModelValue()
   {
      return modelValue;
   }
} 
```

UnitsLabel.java

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class UnitsLabel extends JLabel
{
   public void refreshView()
   {
      super.setText( Conversion.viewLabel() );
   }
} 
```

转换.java

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class Conversion
{
   public  static enum  UNITS {CC, L, GAL};

   public  static Map<String,UNITS> unitTypes = 
                                       new HashMap<String, UNITS>()
   {
      {
         put( "Cubic centimeters", UNITS.CC  );
         put( "Liters",            UNITS.L   );
         put( "Gallons",           UNITS.GAL );
      }
   };

   public  static Map<UNITS,Double> unitConversions =
                                       new HashMap<UNITS, Double>()
   {
      {
         put( UNITS.CC,     1.0 );
         put( UNITS.L,   1000.0 );
         put( UNITS.GAL, 4404.9 );
      }
   };

   private static UNITS unitType = UNITS.CC;

   public static void   setUnitType( UNITS unit )
   {
      unitType = unit;
   }

   public static void   setUnitType( String unitString )
   {
      unitType = unitTypes.get(unitString);
   }

   public static String[] getUnitNames()
   {
      return (unitTypes.keySet()).toArray(new String[0]);
   }

   public static String viewLabel()
   {
      return unitType.toString();
   }

   public static Double modelValue( String viewString ) throws Exception
   {
      Double value = null;

      if (viewString != null && viewString.length() > 0)
      {
         value = Double.parseDouble( viewString );
         value = value * unitConversions.get(unitType);
      }
      return value;
   }

   public static String viewString( Double modelValue )
   {
      Double value = null;

      if (modelValue != null)
      {
         value = modelValue / unitConversions.get(unitType);
      }
      return (value == null) ? "" : value.toString();
   }
} 
```

DoubleVerifier.java

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import java.text.NumberFormat;
import java.awt.Toolkit;

public class DoubleVerifier extends InputVerifier implements ActionListener
{
   public boolean shouldYieldFocus(JComponent input)
   {
      JTextField tf   = (JTextField) input;
      boolean inputOK = verify(input);

      if (inputOK)
      {
         tf.setBorder( new LineBorder( Color.black ) );
         return true;
      }
      else
      {
         tf.setBorder( new LineBorder( Color.red ) );
         Toolkit.getDefaultToolkit().beep();
         return false;
      }
   }

   public boolean verify(JComponent input)
   {
      JTextField tf  = (JTextField) input;
      String     txt = tf.getText();
      double     n;

      System.out.println( "Verifying: '" + txt + "'" );
      if (txt.length() != 0)
      {
         try
         {
            n = Double.parseDouble(txt);
         }
         catch (NumberFormatException nf)
         {
            System.out.println( "Invalid number" );
            return false;
         }
      }
      return true;
   }

   public void actionPerformed(ActionEvent e)
   {
      System.out.println( "Input verification" );
      JTextField source = (JTextField) e.getSource();
      shouldYieldFocus(source);
   }
} 
```

VolumeTextFieldTest.java

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;

class VolumeTextFieldTest extends JFrame
{
   private JComboBox      volumeCombo;
   private UnitsLabel     volumeLabel;
   private UnitsTextField volumeField;

   public VolumeTextFieldTest()
   {
      setSize(300, 100);
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      volumeCombo   = new JComboBox( Conversion.getUnitNames() );
      volumeCombo.addActionListener( new VolumeListener() );
      volumeCombo.addFocusListener( new VolumeListener() );
      volumeLabel   = new UnitsLabel();
      volumeLabel.refreshView();
      volumeField   = new UnitsTextField(8);
      DoubleVerifier dVerify = new DoubleVerifier();
      volumeField.setInputVerifier(  dVerify );
      volumeField.addActionListener( dVerify );
      volumeField.addActionListener( new VolumeValueListener() );
      volumeField.addFocusListener(  new VolumeValueListener() );
      JPanel myPane = new JPanel();
      myPane.add(volumeCombo);
      myPane.add(volumeField);
      myPane.add(volumeLabel);
      getContentPane().add(myPane);
      setVisible(true);
   }

   public class VolumeListener implements ActionListener, FocusListener
   {
      @Override
      public void actionPerformed( ActionEvent ae )
      {
          System.out.println( "Volume type changed" );
     Conversion.setUnitType( (String) volumeCombo.getSelectedItem() );
     volumeLabel.refreshView();
          volumeField.refreshView();
      }
      @Override
      public void focusGained( FocusEvent fg )
      {
      }
      @Override
      public void focusLost( FocusEvent fl )
      {
          System.out.println( "Volume type changed" );
     Conversion.setUnitType( (String) volumeCombo.getSelectedItem() );
     volumeLabel.refreshView();
          volumeField.refreshView();
      }
   }

   public class VolumeValueListener implements ActionListener, FocusListener
   {
      @Override
      public void actionPerformed( ActionEvent ae )
      {
         System.out.println( "Volume value changed (a)" );
         try
         {
        volumeField.updateModel();
        volumeField.refreshView();
         }
         catch (Exception e)
         {}
      }
      @Override
      public void focusGained( FocusEvent fg )
      {
      }
      @Override
      public void focusLost( FocusEvent fl )
      {
         System.out.println( "Volume value changed (f)" );
         try
         {
        volumeField.updateModel();
        volumeField.refreshView();
         }
         catch (Exception e)
         {}
      }
   }

   public static void main(String[] args)
   {
      try
      {
         SwingUtilities.invokeLater( new Runnable()
         {
            public void run ()
            {
               VolumeTextFieldTest runme = new VolumeTextFieldTest();
            }
         });
      }
      catch (Exception e)
      {
         System.out.println( "GUI did not start" );
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:48:03.790

我从其他研究中了解了我的部分问题。InputVerifier 只关心焦点。如果输入无效，则不会转移焦点，但会允许动作事件发生。我看到的投诉与具有退出按钮的人有关，即使字段中的数据无效，也会执行其操作。就我而言，我有一个组合框，即使 InputVerifier 抱怨无效数据（文本字段出现红色边框并发出哔哔声），仍然可以执行其操作。所以关于问题的那个方面，我不相信有一个好的解决方案。一个建议是所有操作侦听器在执行操作之前检查的变量，该变量将由 InputVerifier 设置。我在单独的文件中有我的（理想情况下）可重用的例程，

我仍然不确定如何优雅地处理我有几个不同的通用操作（验证输入、转换单位、更新视图）的情况，其中任何给定字段只需要一些操作并且我想分配 ActionListeners 和 FocusListeners顺序。我现在唯一的想法是拥有一个基本侦听器，例如验证输入，然后扩展它并覆盖 actionPerformed、focusGained 和 focusLost 方法，尽管看起来我最终会为每个组合复制代码。

# c# - 在 Quickbooks Desktop SDK 中，有没有办法修改销售交易的总税额

> ID：14756212
> 
> 赞同：3
> 
> 时间：2013-02-07T16:37:00.517
> 
> 标签：c#, sdk, quickbooks, intuit

我正在使用 QuickBooks 桌面并通过 QBFC 和 C# 进行交互。

QuickBooks 计算每个销售行的增值税，但您可以在桌面上手动修改发票的总税额。

有什么方法可以通过界面进行这种修改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T11:51:36.293

我一直在尝试解决同样的问题 - 不幸的是，在销售线上设置 TaxAmount 没有任何影响。我试图这样做是为了处理导入数据和计算的增值税之间的差异，并设法通过使用总数字并将销售收据设置为 IsTaxIncluded true - 不确定这是否对您有任何帮助。

# ruby-on-rails - 在 Rails 中创建多对多关系

> ID：14756213
> 
> 赞同：0
> 
> 时间：2013-02-07T16:37:01.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我是 Rails n00b，我想创建一个“收藏夹”关系，以便用户可以拥有许多收藏的项目。我不完全确定如何做到这一点，这就是我要尝试的方式，但我不确定这是否是一个好习惯：

```
class User < ActiveRecord::Base
 has_many :favorites
 //other code
end

class Favorite < ActiveRecord::Base
 belong_to :user
 has_one :item
end

class Item < ActiveRecord::Base
 belongs_to :item
end 
```

这是一个好方法吗？我应该使用`has_and_belongs_to_many`吗？我特别关注以下场景：假设用户有 100 个最喜欢的项目。当我执行 a`User.find(id)`时，我还会检索 100 个收藏夹和 100 个项目吗？

如果它很重要：ruby 版本 1.9.3，rails 版本 3.2.11

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:39:12.357

你能试试`has_many => :through`吗？

```
class User < ActiveRecord::Base
 has_many :favorites
 has_many :items, :through => :favorites
 //other code
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:18:30.907

在你的情况下 has_many :through 绝对是要走的路。我建议阅读： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

对您的问题特别感兴趣：

2.8 在 has_many :through 和 has_and_belongs_to_many 之间进行选择

> Rails 提供了两种不同的方式来声明模型之间的多对多关系。更简单的方法是使用 has_and_belongs_to_many，它允许您直接进行关联：

```
class Assembly < ActiveRecord::Base
  has_and_belongs_to_many :parts
end

class Part < ActiveRecord::Base
  has_and_belongs_to_many :assemblies
end 
```

> 声明多对多关系的第二种方法是使用 has_many :through。这通过连接模型间接地建立关联：

```
class Assembly < ActiveRecord::Base
  has_many :manifests
  has_many :parts, :through => :manifests
end

class Manifest < ActiveRecord::Base
  belongs_to :assembly
  belongs_to :part
end

class Part < ActiveRecord::Base
  has_many :manifests
  has_many :assemblies, :through => :manifests
end 
```

> 最简单的经验法则是，如果您需要将关系模型作为独立实体使用，则应该设置一个 has_many :through 关系。如果您不需要对关系模型做任何事情，那么设置 has_and_belongs_to_many 关系可能会更简单（尽管您需要记住在数据库中创建连接表）。
> 
> 如果您需要验证、回调或连接模型上的额外属性，您应该使用 has_many :through。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:09:07.307

它比使用`has_and_belongs_to_many`.

> 当我执行 User.find(id) 时，我还会检索 100 个收藏夹和 100 个项目吗？

不，你只会得到用户对象。

**更新：**`User.include(:favourites, :items).find(id)`如果您想从用户对象多次调用项目表， 调用将使您加入表。

# c - 链接的默认函数实现

> ID：14756214
> 
> 赞同：2
> 
> 时间：2013-02-07T16:37:06.803
> 
> 标签：c

我有一系列从一组 .o 文件拼凑而成的可执行文件。有一些可重用的，然后通常是几个可执行的特定模块。其中一个可重用的部分想要提供一种“应用程序挂钩”。但是许多可执行文件只是做一个标准的无操作的事情。而其他几个人实际上想为所说的钩子定义有趣的行为。

理想的情况是，如果有一种方法可以提供函数的标准默认版本，如果没有其他 .o 文件定义所述函数，则链接器将使用该函数，但如果有，则使用其他函数。

有什么方法/技术可以用直接的 C 来近似这种事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:47:36.403

如果您使用 GCC 作为编译器，那么您可以像这样声明可替换函数：

```
void foo() __attribute__ ((weak)); 
```

这是一个有关其工作原理的示例。在您的 main.c 文件中：

```
#include <stdio.h>

void foo()__attribute__ ((weak))
{
    printf("%s", "Hidden foo\n");
}

int main()
{
    foo();
    return 0;
} 
```

在另一个文件 foo.c 中：

```
#include <stdio.h>

void foo()
{
    printf("%s", "foo\n");
} 
```

现在当你只编译、链接和运行 main.c 时，你会得到：

```
gcc main.c -o 主
。/主要的
隐藏的 foo

```

如果你也编译 foo.c，你会得到：

```
gcc main.c foo.c -o main
。/主要的
富

```

foo() 的弱版本已被替换。

在实际设置中，您可能会使用头文件来提供函数原型：

```
void foo(); 
```

然后像这样实现这些函数的弱版本：

```
__attribute__ ((weak)) void foo()
{
    // ...
} 
```

您还可以使用宏使其更具可读性：

```
#define WEAK_SYMBOL __attribute__ ((weak)) 
```

这样你会得到：

```
WEAK_SYMBOL void foo() { /* ... */ } 
```

# c# - 获取Ninject中的父对象

> ID：14756215
> 
> 赞同：0
> 
> 时间：2013-02-07T16:37:07.817
> 
> 标签：c#, ninject

我有彼此双向连接的课程。当 Ninject 创建类`Parent`时，它也会创建一个`Child`. 问题是`Child`必须知道它的父母是谁。`IContext`但我在父对象中找不到任何信息。

```
//The parent
class Parent:IParent
{
   public Parent(Child child) {...}
}

//The child needing to know who its parent is
class Child:IChild
{
   public Child(Parent parent) {...}
}

//The Ninject binding
Bind<IChild>().To<Child>.WithConstructorArgument("parent", x=>GetParent(x));
Bind<IParent>().To<Parent>;
Bind<IFactory>().ToFactory();

//Method to get the constructor parameter to Child containing the parent
private IParent GetParent(IContext context)
{
    // Should return the IParent that requested this IChild
} 
```

当我打电话时，`IFactory.CreateParent()`我想得到一个与孩子有双向连接的父母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:56:59.527

据我所知，你不能。

您在这里拥有的是 a `circular reference`，这是一件坏事。
你在 ctors 中说的是：我需要一个父母才能创造一个孩子，并且能够创造那个父母，我需要这个孩子。其中一个需要先创建，而没有一个可以，因为它们需要在 ctor 中创建另一个。

您需要使用该`Mediator`模式来摆脱它，或者作为最后的手段使用`Property Injection`它来使其工作。

# xcode - 在 Xcode 中设置 FLTK

> ID：14756216
> 
> 赞同：1
> 
> 时间：2013-02-07T16:37:12.967
> 
> 标签：xcode, fltk

我是 Xcode 的新手，现在我正在尝试设置 FLTK 环境。FLTK 为我提供了一个 xcode 项目`FLTK.xcodeproj`，我想知道如何使用它来创建我自己的 FLTK 项目，我可以在其中添加`fltk.framework`一个库，该库已经添加到`FLTK.xcodeproj`.

提前致谢。

# r - R 转换矩阵

> ID：14756217
> 
> 赞同：-1
> 
> 时间：2013-02-07T16:37:18.927
> 
> 标签：r

我想将向量转换为转换矩阵。我有一个向量 t 并将其除以它的最大值以获得 0 和 1 之间的值。然后我将其制成一个矩阵

```
t <- c(22, 65, 37, 84, 36, 14, 9, 19, 5, 49)
x <- t/max(t)
y <- x%*%t(x) 
```

我的问题是我希望矩阵 (y) 的列加起来为 1，即使其成为转换矩阵，但我不知道该怎么做。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:46:16.673

`sweep()`是一个多功能的小函数，您可以在这里使用它来将每列除以其自己的总和：

```
yy <- sweep(y, MARGIN = 2, STATS = colSums(y), FUN = "/")

## Confirm that the columns of yy all sum to 1
colSums(yy)
##  [1] 1 1 1 1 1 1 1 1 1 1 
```

# iphone - 您如何确保 UIView 缩小到其父视图的大小？

> ID：14756219
> 
> 赞同：1
> 
> 时间：2013-02-07T16:37:23.043
> 
> 标签：iphone, ios, uiview, subviews

我正在创建一个自定义视图（UIView 的子类），其目的是将静态背景图像、静态边框/框架叠加层以及几个可以在视图周围旋转、拉伸和拖动的较小图像（在整个视图导出为图像之前）。

我坚持从另一个视图中显示这个自定义视图。这些图像来自 iPhone 相机，它具有非常高的分辨率，到目前为止，我唯一能做到的就是切断大部分图像或让我的视野越过屏幕末端。我需要能够在不编辑图像的情况下将其与菜单项等一起显示（以便可以以完整形式发送）。

我还将图像添加到全屏视图，它仍然不会改变大小。

我正在初始化视图如下

```
- (id)initWithImage:(UIImage *)image
{
    self = [super init];
    if (self) {
        [self setClipsToBounds:YES];
        [self setAutoresizesSubviews:YES];
        [self setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];

        _image = image;
        _imageView = [[UIImageView alloc] initWithImage:_image];
        [_imageView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
        [self addSubview:_imageView];
    }
    return self;
} 
```

我将它添加到另一个视图

```
self.card = [[SGImageCard alloc] initWithImage:[SGCardDataController cardImage]];
[self.cardPlaceHolder setAutoresizesSubviews:YES];
[self.cardPlaceHolder setContentMode:UIViewContentModeScaleAspectFit];
[self.cardPlaceHolder addSubview:self.card]; 
```

该视图也已在 Interface Builder 中设置，并设置为自动调整其子视图的大小并设置为 cliptobounds（有时 - 我已经尝试了两种方式）。我已经在 viewdidload 中添加了我的视图（当占位符没有它的框架时，由于我不知道的原因），以及后来，当它有时（并且它不起作用）。

我错过了什么？（我是否以正确的方式解决了这个问题？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:44:50.440

我终于通过将 AutoResizeMasks 设置为

```
UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight |
UIViewAutoresizingFlexibleRightMargin | UIViewAutoResizingFlexibleBottomMargin 
```

并将 ContentModes 设置为

```
UIViewContentModeScaleAspectFit 
```

# mysql - HAVING 子句中的多个聚合函数

> ID：14756222
> 
> 赞同：45
> 
> 时间：2013-02-07T16:37:53.930
> 
> 标签：mysql, sql, count

由于我查询的性质，我有计数为 3 的记录，这些记录也符合计数为 2 的条件，依此类推。我想知道是否可以查询“计数大于 x 且小于 7”？我怎么会写这个。这是我当前的代码。

```
GROUP BY meetingID
HAVING COUNT( caseID )<4 
```

我想要类似的东西

```
GROUP BY meetingID
HAVING COUNT( caseID )<4 AND >2 
```

这样它就只能算到 3

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-07T16:39:18.577

```
GROUP BY meetingID
HAVING COUNT(caseID) < 4 AND COUNT(caseID) > 2 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-07T16:39:39.797

不需要做两次检查，为什么不检查count = 3：

```
GROUP BY meetingID
HAVING COUNT(caseID) = 3 
```

如果要使用多项检查，则可以使用：

```
GROUP BY meetingID
HAVING COUNT(caseID) > 2
 AND COUNT(caseID) < 4 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T16:39:32.233

对于您的示例查询，大于 2 且小于 4 的唯一可能值是 3，因此我们简化：

```
GROUP BY meetingID
HAVING COUNT(caseID) = 3 
```

* * *

在您的一般情况下：

```
GROUP BY meetingID
HAVING COUNT(caseID) > x AND COUNT(caseID) < 7 
```

或者（可能更容易阅读？），

```
GROUP BY meetingID
HAVING COUNT(caseID) BETWEEN x+1 AND 6 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-02T08:04:12.133

在这里，我正在编写完整的查询，这将消除您的所有疑问

```
SELECT BillingDate,
       COUNT(*) AS BillingQty,
       SUM(BillingTotal) AS BillingSum
FROM Billings
WHERE BillingDate BETWEEN '2002-05-01' AND '2002-05-31'
GROUP BY BillingDate
HAVING COUNT(*) > 1
AND SUM(BillingTotal) > 100
ORDER BY BillingDate DESC 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-07T16:41:49.123

像这样的东西？

```
HAVING COUNT(caseID) > 2
AND COUNT(caseID) < 4 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-11T06:42:53.760

```
select CUSTOMER_CODE,nvl(sum(decode(TRANSACTION_TYPE,'D',AMOUNT)),0)) DEBIT,nvl(sum(DECODE(TRANSACTION_TYPE,'C',AMOUNT)),0)) CREDIT,
nvl(sum(decode(TRANSACTION_TYPE,'D',AMOUNT)),0)) - nvl(sum(DECODE(TRANSACTION_TYPE,'C',AMOUNT)),0)) BALANCE from TRANSACTION   
GROUP BY CUSTOMER_CODE
having nvl(sum(decode(TRANSACTION_TYPE,'D',AMOUNT)),0)) > 0
AND (nvl(sum(decode(TRANSACTION_TYPE,'D',AMOUNT)),0)) - nvl(sum(DECODE(TRANSACTION_TYPE,'C',AMOUNT)),0))) > 0 
```

# javascript - 如何更改使用选项组的下拉列表的选定值？

> ID：14756223
> 
> 赞同：0
> 
> 时间：2013-02-07T16:37:56.460
> 
> 标签：javascript, jquery, html-select, optgroup

我有一个下拉列表，它在页面上呈现如下：

```
<select id="DropDown">
    <optgroup label="">
        <option value="-1">
        </option>
    </optgroup>
    <optgroup label="Group 1">
        <option value="1">Item 1</option>
        <option value="2">Item 2</option>
        <option value="3">Item 3</option>
    </optgroup>
    <optgroup label="Group 2">
        <option value="11">Item 4</option>
        <option value="12">Item 5</option>
    </optgroup>
</select> 
```

如何使用 Javascript（使用 JQuery）来更改下拉值？在过去的情况下，我已经遍历了 dropdown.options 的下拉列表以找到我想要的值，然后根据该值设置选择索引——但是该选项对我来说不适用于那里的 optgroups。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:40:16.960

亲，就这么简单：

```
$('#id').val('the value you want to select'); 
```

在您的示例中，如果您想选择：

```
<option value="2">Item 2</option> 
```

用这个：

```
$('#DropDown').val('2'); 
```

您不需要迭代任何东西，只需分配值和 jQuery，浏览器将完成剩下的工作。

# ios - 如何将 CGContextScaleCTM 和 CGContextTranslateCTM 放在 drawRect 之外？

> ID：14756225
> 
> 赞同：1
> 
> 时间：2013-02-07T16:37:58.410
> 
> 标签：ios, drawrect, cgcontext, scaletransform

我在这种路径绘制方面相当初学者，但是在显示地图时，我意识到 CGContextScaleCTM 和 CGContextTranslateCTM 在我的 drawRect 中占用了大量时间。把那些带到外面就好了。因为我总是画同一张地图，我认为这应该是可能的。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:51:40.103

可以像这样扩展：

```
CGAffineTransform currentTransform = myView.transform;
CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, 0.5, 0.5);
[myView setTransform:newTransform]; 
```

并以类似的方式对 x/y 使用 CGAffineTransformTranslate。

# c# - Silverlight 应用程序托管在 ASP.Net 中

> ID：14756226
> 
> 赞同：0
> 
> 时间：2013-02-07T16:38:01.243
> 
> 标签：c#, asp.net, silverlight-4.0, session-state

我在 ASP.Net 页面中托管了 Silverlight 应用程序。

我们使用 WCF 服务来更新/绑定控件上的数据。

当我们在负载平衡环境中部署应用程序时，它适用于我们所有的测试用例，即使是在不同机器上为同一用户进行测试时也是如此。

会失败吗？

当从单服务器迁移到多服务器环境时，我们没有做任何代码更改（是的，服务引用的 URL 在负载平衡之后是相同的 - 添加新服务器）。

是不是因为客户端代码加载在浏览器机器上而我们不需要执行会话管理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:40:43.270

Silverlight 应用程序的会话状态有点神奇。通常，在 ASP.Net 中，会话状态存储在浏览器中并与表单一起提交；每次提交表单时都会重新传输。

由于 Silverlight 不进行表单提交（它可以，但没有人以这种方式使用它） - 它通过 WCF/RIA - 会话状态被加载一次并在浏览器中维护，允许 Silverlight 应用程序按需访问它。

# c++ - g++ 4.7 严格别名检查无效

> ID：14756234
> 
> 赞同：4
> 
> 时间：2013-02-07T16:38:33.183
> 
> 标签：c++, g++

当我用`g++ 4.7`.

```
g++ -Wall -fstrict-aliasing 
```

我会在第一次演员表上收到警告：

`warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]`

第二个演员很好，没有任何警告。谁能帮我理解为什么在第一次演员表上发出警告？

```
int main()
{
    char a [16];
    char * p = &a[0];

    //int i = *((int *)(&a[0])); //bad
    int j = *((int *)(p));  //ok
    return  0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:22:36.873

> 第二个演员很好，没有任何警告。谁能帮我理解为什么在第一次演员表上发出警告？

这不是你应该问的问题。你应该问的问题是为什么第二个演员没有显示警告，即使它和第一个演员一样有问题。

不会为 发出警告`(int *) p`，因为根据其类型，可以通过将指向 int 的指针强制转换为 来合法地`p` *获得*`char *`。但是，除非是这种情况，否则仍不允许取消引用结果。即使你没有收到警告。

请注意，警告与可能“破坏”您的代码的优化无关。您的代码可能会收到警告并按预期工作。您的代码无法收到警告并失败。

# javascript - 使 JS 菜单显示在悬停而不是单击时

> ID：14756235
> 
> 赞同：0
> 
> 时间：2013-02-07T16:38:33.743
> 
> 标签：javascript

我从这里得到了下拉菜单 3：http: [//tympanus.net/codrops/2012/10/04/custom-drop-down-list-styling/](http://tympanus.net/codrops/2012/10/04/custom-drop-down-list-styling/)

在点击时工作得很好，但我不知道如何让它在悬停时工作。

我对 JS 的尝试：

```
<script type="text/javascript">

        function DropDown(el) {
            this.dd = el;
            this.placeholder = this.dd.children('span');
            this.opts = this.dd.find('ul.dropdown > a');
            this.val = '';
            this.index = -1;
            this.initEvents();
        }
        DropDown.prototype = {
            initEvents : function() {
                var obj = this;

                obj.dd.on('hover', function(event){
                    $(this).toggleClass('active');
                    return false;
                });

                obj.opts.on('hover',function(){
                    var opt = $(this);
                    obj.val = opt.text();
                    obj.index = opt.index();
                    obj.placeholder.text(obj.val);
                });
            },
            getValue : function() {
                return this.val;
            },
            getIndex : function() {
                return this.index;
            }
        }

        $(function() {

            var dd = new DropDown( $('#dd') );

            $(document).hover(function() {
                // all dropdowns
                $('.wrapper-dropdown-3').removeClass('active');
            });

        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:43:11.387

我认为这应该有效：

```
 $(function() {

        var dd = new DropDown( $('#dd') );

        $('.wrapper-dropdown-3').hover(function() {
            $(this).toggleClass('active');
        });

    }); 
```

如果有任何问题，请说出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:45:18.233

尝试：

```
 obj.dd.on('mouseenter', function(event){
                $(this).toggleClass('active');
                return false;
            });

            obj.opts.on('mouseleave',function(){
                var opt = $(this);
                obj.val = opt.text();
                obj.index = opt.index();
                obj.placeholder.text(obj.val);
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:46:17.020

如果我没记错的话， hover() 函数会查找 mouseover 和 mouseoff 事件。为什么您希望仅在鼠标悬停在顶部的项目上时才更改菜单？一旦你鼠标关闭它就会改变。我建议只使用鼠标悬停，然后使用鼠标离开而不是悬停。

# php - file_get_content（转换为 htmlspecialchars）

> ID：14756244
> 
> 赞同：1
> 
> 时间：2013-02-07T16:38:48.937
> 
> 标签：php, zend-framework, file-get-contents

所以我有这个 url [http://my-server.com/feeds/feed.pl?op=retrieveIncidents&type=social,government&cbsa=31100](http://my-server.com/feeds/feed.pl?op=retrieveIncidents&type=social,government&cbsa=31100)包含由另一个进程构建的 xml 数据。现在我正在使用`file_get_contents()`硬编码的 url，它工作得很好。在开发的这个阶段，我必须开始使用登录应用程序的当前用户的配置文件和 cbsa 代码。

现在这`/feeds/feed.pl?op=retrieveIncidents&type=social,government&cbsa=`来自配置。

这`31100`来自用户对象。

这`http://my-server.com`来自一个助手 fn()。

```
$server = $this->serverUrl();
$config = new Zend_Config_Ini(APPLICATION_PATH.'/configs/application.ini', APPLICATION_ENV);
$curOperator = Default_Model_Operator::getActiveOperator();

$feedUrl = $server.$config->ims->idfFeed.$curOperator->regions; 
```

如果我打印/回显`$feedUrl`看起来像`http://my-server.com/feeds/feed.pl?op=retrieveIncidents&type=social,government&cbsa=31100`

但是当我这样做时，`$feed = file_get_contents($feedUrl)`我会收到
**警告**：file_get_contents( [http://vdot.orion.meridian-enviro.com/feeds/feed.pl?op=retrieveIncidents](http://vdot.orion.meridian-enviro.com/feeds/feed.pl?op=retrieveIncidents)`&amp;` type=social,government `&amp;`cbsa=31100) [function.file-get-contents ]：打开流失败：HTTP 请求失败！HTTP/1.1 404 Not Found in **/home/Agena/lvegerano/svn/webapps/ims/trunk/phpfiles/application/views/scripts/chp/list-for-dashboard.phtml**在第**9行**

记下`&amp;`. 我已经尝试过`htmlentities_decode()`，`urlencode()`其他并无法使其正常工作。我该怎么做才能将 file_get_contents() 翻译`&amp;`成`&`？

任何有关如何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:09:24.670

我想我忘了回答这个问题。问题是我们的清漆设置。它设置为查找 url，如果识别则插入主机名。因为我刚开始在这里工作，所以我不知道这个功能。因此，我认为错误不是因为清漆掩盖了网址。

# android - 从 HTML 加载图像的 Webview 问题

> ID：14756246
> 
> 赞同：1
> 
> 时间：2013-02-07T16:38:52.510
> 
> 标签：android, html, css, image, webview

我有一个 Webview，我在其中使用以下代码加载 HTML 数据（也使用 css）：

```
final String mime = "text/html";
final String encoding = "utf-8";
final String htmlData = "<link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />"
            + aboutDescriptions[index];

    wv.loadDataWithBaseURL("file:///android_asset/", htmlData, mime,
            encoding, null); 
```

在 HTML 中，我像这样加载图像：

```
&lt;img src=\"file:///android_res/drawable/myimage.jpg\"/&gt; 
```

在我的 CSS 中，我为“img”标签定义了以下内容：

```
img {
 max-width: 100%;
 max-height: 100%;
} 
```

在我的（真正的）2.3.3 Android 手机和我的 Google Nexus 7 平板电脑上，一切都按预期工作（HTML 使用 css 呈现良好并显示图像）。

然而，在真正的 Galaxy Nexus 手机和许多模拟设备上，图像根本不会显示。我究竟做错了什么？我已经使用 WebView 解决了一些错误，希望这是一个可以修复的错误？（也许是 CSS 调整？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:55:15.127

设法通过像这样更改我的css来解决这个问题：

```
img {
  width: 100%;
  height: auto;
} 
```

# bash - 为什么 /bin/kill 的有效信号与 kill 不同？

> ID：14756247
> 
> 赞同：4
> 
> 时间：2013-02-07T16:39:00.047
> 
> 标签：bash, signals, kill

我正在尝试编写一个快速 bash 脚本来在脚本检测到的特定条件下向程序发出信号，并且出于习惯，我正在使用一些 bin utils 的完整路径，即代替`/bin/rm`and 。但是，特别是，我注意到我可以发送的有效信号有所不同，这让我感到困惑：`/bin/kill``rm``kill``kill`

```
[root@linux]# which kill
/bin/kill

[root@linux]# /bin/kill -l
HUP INT QUIT ILL ABRT FPE KILL SEGV PIPE ALRM TERM USR1 USR2 CHLD CONT
STOP TSTP TTIN TTOU TRAP IOT BUS SYS STKFLT URG IO POLL CLD XCPU XFSZ
VTALRM PROF PWR WINCH UNUSED

[root@linux]# kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL
 5) SIGTRAP      6) SIGABRT      7) SIGBUS       8) SIGFPE
 9) SIGKILL     10) SIGUSR1     11) SIGSEGV     12) SIGUSR2
13) SIGPIPE     14) SIGALRM     15) SIGTERM     16) SIGSTKFLT
17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU
25) SIGXFSZ     26) SIGVTALRM   27) SIGPROF     28) SIGWINCH
29) SIGIO       30) SIGPWR      31) SIGSYS      34) SIGRTMIN
35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3  38) SIGRTMIN+4
39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12
47) SIGRTMIN+13 48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14
51) SIGRTMAX-13 52) SIGRTMAX-12 53) SIGRTMAX-11 54) SIGRTMAX-10
55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7  58) SIGRTMAX-6
59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX 
```

我也没有任何 kill 别名：

```
[root@linux]# alias 
alias cp='cp -i'
alias l.='ls -d .* --color=tty'
alias ll='ls -l --color=tty'
alias ls='ls --color=tty'
alias mv='mv -i'
alias rm='rm -i'
alias vi='vim'
alias which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde' 
```

显然，解决方法是只使用，但是如果解决了`kill`，为什么它们会有所不同呢？ `which kill``/bin/kill`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T16:47:24.397

`kill`是内置的 bash。不幸的是，bash 没有内置`which`（就像`zsh`它立即告诉我 kill 是一个内置的 shell 命令一样），并且`/usr/bin/which`无法知道您的 shell 内置命令。（我希望`bash`有一些等效的东西可以快速检查命令是否是内置的。`help kill`不过，对于交互式使用来说成功就足够了）。

正如@chepner 在评论中所解释的那样，`type -a COMMAND`可用于获取: 上*任何*目录中的`COMMAND`内置函数、别名、函数和二进制文件的可用变体列表：*`PATH`*

 *```
$ type -a kill
kill is a shell builtin
kill is /bin/kill 
```*

# android - 如何在android中以编程方式检查wifi连接是否是静态的

> ID：14756248
> 
> 赞同：1
> 
> 时间：2013-02-07T16:39:01.313
> 
> 标签：android, wifi, android-wifi

我使用连接管理器类并获取网络信息，我只知道网络类型是 Wifi 还是以太网。但是当我的网络类型是 Wifi 时，我想知道它是静态的还是动态的。

有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T17:46:05.320

下面你可以找到从这个[线程](https://stackoverflow.com/questions/18136000/assign-static-ip-address-for-wifi-network-on-android-3-x-and-4-x "线")改编的简单（未优化）代码。代码是为 Android 4.0 编写的。

记得添加额外的用户权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

方法：

```
public String getIpAssignment(){

    String myenumvalue="";
    WifiConfiguration wifiConf = null;
    WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
    WifiInfo connectionInfo = wifiManager.getConnectionInfo();
    List<WifiConfiguration> configuredNetworks = wifiManager.getConfiguredNetworks();        
    for (WifiConfiguration conf : configuredNetworks){
        if (conf.networkId == connectionInfo.getNetworkId()){
            wifiConf = conf;
            break;              
        }
    }
    if(wifiConf != null){

        try {
            Object Enumer = getDeclaredField(wifiConf, "ipAssignment");
            myenumvalue = Enumer.toString();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }   

    }

    return myenumvalue;
} 
```

它从 ipAssignment 返回枚举字段之一：UNASSIGNED | 静电 | DHCP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-26T14:06:42.203

我的android测试设备android版本5.1.1（嵌入式板）我使用了上面的代码，但它陷入了错误（“catch NoSuchFieldException”）

我使用此代码查找静态或 dhcp 连接：

```
 public void getWifiDhcpStatic(){
    WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
    WifiInfo connectionInfo = wifiManager.getConnectionInfo();
    List<WifiConfiguration> configuredNetworks = wifiManager.getConfiguredNetworks();
    for (WifiConfiguration conf : configuredNetworks){
        if (conf.networkId == connectionInfo.getNetworkId()){
            if (conf.toString().toLowerCase().indexOf("DHCP".toLowerCase())>-1){
                Log.i("myLogDHCPorSTATIC","DHCP ");

            }else if(conf.toString().toLowerCase().indexOf("STATIC".toLowerCase())>-1){
                Log.i("myLogDHCPorSTATIC","STATIC ");

            }
            break;
        }
    }
} 
```

不要忘记添加清单

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /> 
```

# iphone - 位于屏幕顶部的 Fram Origin UITabBarController 以编程方式没有响应

> ID：14756258
> 
> 赞同：1
> 
> 时间：2013-02-07T16:39:27.740
> 
> 标签：iphone, xcode, uitabbarcontroller, uitabbar

我试图在 UINavigationBar 下方的应用程序的屏幕顶部放置一个 UITabBar。我的 UITabBar 定位正确，但要显示选项卡内容的视图被设置为与 TabBar 相同的原点。我正在使用的代码如下：

```
tabC = [[UITabBarController alloc]init];
            tabC.tabBar.frame = CGRectMake(0, 0, 320, 40);

NSArray *arr = [[NSArray alloc]initWithObjects:[[UIViewController alloc] init], [[HomeTabViewController alloc] init], nil];
tabC.viewControllers = arr;

[tabC.view setBackgroundColor:[UIColor whiteColor]];

// CGRect viewFrame = tabC.view.frame;
// viewFrame.origin.y = 40;
// tabC.view.frame = viewFrame;

[_topLayer addSubview:tabC.view]; 
```

如果我尝试使用注释中的代码来尝试更改原点，那么整个事情都会向下移动，如下图所示：

没有注释代码： ![在此处输入图像描述](../Images/fbb6eed8bddbd5bf97337c6e152d58d7.png)

随着注释代码更改原点：

![在此处输入图像描述](../Images/14edfc115b1f183153981cf99912969a.png)

如何更改 UITabBarController 的 View 部分的 Y 轴原点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:48:32.250

您是否尝试过使用以下代码设置框架？

`tabC.inputView.frame = viewFrame;`

# c++ - 如何在 C++ 中创建一个 3d 数组，每个层都有自己的数据类型

> ID：14756269
> 
> 赞同：0
> 
> 时间：2013-02-07T16:39:48.547
> 
> 标签：c++, arrays

我创建了一个 int 数据类型的 3d 数组。但我的需求现在更加强大，数组的每一层都可以是不同的数据类型。例如：layer1 可以是 int 类型，而 layer 2 可以是 float 类型。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:44:01.500

在我看来，您的数据结构已经达到了复杂程度，最好用一个适当封装的类甚至多个嵌套类而不是多维数组来表示它。这些类的方法取决于您的实际需求，只能从您的帖子中猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:59:11.193

听起来你想要的是一个二维元组数组。假设您想要三层，分别是`int`、`float`和`char`。然后你会想要：

```
std::tuple<int, float, char> arr[X][Y]; 
```

然后前两个索引将为您提供“层”中的位置，最后一个是哪一层：

```
std::get<2>(arr[5][7]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:35:27.023

如果您想以一种简单的方式进行操作，只需定义一个满足您要求的结构即可。

# three.js - 无法将当前结果传递给下一次渲染

> ID：14756270
> 
> 赞同：2
> 
> 时间：2013-02-07T16:39:54.133
> 
> 标签：three.js, webgl, textures

我正在尝试使用前一个渲染作为下一个渲染的纹理进行渐进式渲染。

`EDIT 1:`正如评论中所建议的，我确实将我的 THREE.js 版本更新到了最新可用的版本，并保留了我的旧代码，结果是相同的（即使对象的垂直位置翻转了）。我的问题仍然存在。请考虑我的更新并祈祷帮助。

`Original message:`

我的片段着色器应该只将绿色通道上的颜色增加 0.1，如下所示：

```
#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D sampa;
varying vec2 tc;

void main(void)
{
     vec4 c = texture2D(sampa, tc);
     vec4 t = vec4(c.x, c.y + .1, c.z, 1.);
     gl_FragColor = t;
} 
```

我的作曲家是这样的：

```
composer.addPass(renderModel);
composer.addPass(screenPass);
composer.addPass(feedPass); 
```

renderModel 是一个 RenderPass，渲染我的场景，其中我有一个平面和一个立方体。和 screenPass 和 feedPass 相同，唯一的区别是一个在屏幕上呈现，另一个在 writeBuffer ( `composer.renderTarget1`) 中呈现。

```
var renderModel = new THREE.RenderPass(scene, camera);
renderModel.clear = false;

screenPass = new THREE.ShaderPass(shader2, 'sampa');
screenPass.renderToScreen = true;
screenPass.clear = false;
screenPass.needsSwap = false;

feedPass = new THREE.ShaderPass(shader2, 'sampa');
feedPass.renderToScreen = false;
feedPass.clear = false;
feedPass.needsSwap = false; 
```

在动画循环中，我有这样的东西：

```
composer.render();
if(step % 250 == 0)
{
    newmat = new THREE.MeshBasicMaterial(
    {
        map : composer.renderTarget1
    });

    plane.material = newmat;
}
step++;
requestAnimationFrame(animate); 
```

的部分`step % 250`是延迟材料的变化。

无论如何，问题是当这种情况发生时飞机正在消失。即使它在前 250 步中被正确渲染。我猜它仍然存在，但没有纹理数据，所以它实际上并没有被渲染。

我知道 EffectComposer 不是库的一部分，它只在示例中找到，可能不受支持，但我真的会接受任何关于这种情况的建议，任何答案都将不胜感激。

至于有关该问题的任何其他信息，或其他可能对我有帮助的代码，我非常愿意分享。

你能指出我做错了什么吗？

我感谢你的好意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T13:06:00.637

这个问题的解决方案似乎是使用`two`RenderTargets，并在每一步都在它们之间切换。我有限的知识使我无法准确理解原因，但这正是 EffectComposer 的工作方式。对于那些可能遇到此问题并需要解决方案的人，您应该尝试将着色器通道设置`needsSwap`为`true`。如果你不使用 EffectComposer，那么记得使用两个渲染目标。

# list - 将预增量分配为要列出的行号

> ID：14756272
> 
> 赞同：1
> 
> 时间：2013-02-07T16:39:57.657
> 
> 标签：list, c#-4.0

我试图为 List 分配一个行号和一个 Set-number，但 Set Number 在一组中包含错误的行数。

```
 var objx = new List<x>();
            var i = 0;
            var r = 1;

            objY.ForEach(x => objx .Add(new x 
                                                  {
                                                      RowNumber = ++i,
                                                      DatabaseID= x.QuestionID,
                                                      SetID= i == 5 ? r++ : i % 5 == 0 ? r += 1 : r
                                                  })); 
```

对于上面的代码，如 objY 包含 23 行，我想在 5-5 组中打破 23 行。所以上面的代码会给出这样的序列[**只考虑 RowNumber** ]

```
[1 2 3 4 5][6 7 8 9][ 10 11 12 13 14 ]....... 
```

它的逻辑是有效的，如果我将 Setid 的逻辑更改为

```
 SetID= i % 5 == 0 ? r += 1 : r 
```

结果会像

```
[1 2 3 4 ][5 6 7 8 9][10 11 12 13 14]. 
```

再次正确输出代码

但预计为 5 套。

```
[1 2 3 4 5][ 6  7 8 9 10]......... 
```

我错过了什么......

我应该非常认真地学习我的数学课。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:50:47.310

我想你想要这样的东西：

```
var objX = objY.Select((x, i) => new { ObjX = x, Index = i })
    .GroupBy(x => x.Index / 5)
    .Select((g, i) => 
        g.Select(x => new objx
        {
            RowNumber = x.Index + 1
            DatabaseID = x.ObjX.QuestionID,
            SetID = i + 1
        }).ToList())
    .ToList(); 
```

请注意，我正在分组`x.Index / 5`以确保每个组都有 5 个项目。

[**这是一个演示**](http://ideone.com/RZGDVB)。

**更新**

> 如果你能解释你的逻辑，这将非常有帮助

我应该从哪里开始？我正在使用 Linq 方法来选择原始列表并将其分组以创建一个新列表，`List<List<ObjX>>`其中每个内部列表最多有 5 个元素（如果总计数不可被 5 整除，则在最后一个列表中更少）。

[`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)可以从输入序列中*投射一些东西来创建新的东西。*此方法类似于循环中的变量。在这种情况下，我用原始对象和列表中的索引投影一个匿名类型（`Select`具有包含索引[的重载](http://msdn.microsoft.com/en-us/library/bb534869.aspx)）。我创建这个匿名类型是为了简单的查询，因为我稍后需要 GroupBy 中的索引。

[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)可以通过指定的键对序列中的元素进行分组。这个密钥可以是任何可以从元素派生的东西。在这里，我使用索引两个最大大小为 5 的构建组：

```
.GroupBy(x => x.Index / 5) 
```

之所以有效，是因为 C#（或 C）中的整数除法总是导致 a `int`，其中余数被截断（与 VB.NET btw 不同），因此**3/4 导致 0**。您可以使用此事实来构建指定大小的组。

然后我`Select`在组上使用创建内部列表，再次使用索引重载来设置`SetId`组的：

```
.Select((g, i) => 
    g.Select(x => new objx
    {
        RowNumber = x.Index + 1
        DatabaseID = x.ObjX.QuestionID,
        SetID = i + 1
    }).ToList()) 
```

最后一步是使用`ToList`on`IEnumerable<List<ObjX>>`创建最终的`List<List<ObX>>`. 这也“实现”了查询。查看[延迟执行](https://stackoverflow.com/questions/7324033/what-are-the-benefits-of-a-deferred-execution-in-linq)，尤其是[**Jon Skeets 博客**](http://msmvps.com/blogs/jon_skeet/archive/2010/03/25/just-how-lazy-are-you.aspx)以了解更多信息。

# android-edittext - 如何设置editView最小宽度？(安卓 2.2)

> ID：14756279
> 
> 赞同：2
> 
> 时间：2013-02-07T16:40:21.180
> 
> 标签：android-edittext, android-tablelayout, css

我有一个包含两个 tableRows 的表格，每个表格包含四个视图：texView、Spinner、editView 和 texView。

当微调器的其中一个子项的内容不适合时，它会被自动剪切，这很好。但是我希望它旁边的 editView 保持最小宽度为 40dp。现在 textViews 的宽度被保留，但 editView 宽度没有。我怎样才能做到这一点（如果不是像我现在尝试的那样设置宽度和/或最小宽度，请参阅 xml 文件）？

直到这个孩子的长度很好：
![美好的](../Images/74ef39947c477f00d765ecc1ab52f9b9.png)

现在它不太好：
![不好](../Images/b40b22ea9ce3909a20f6ecc1a65f70a1.png)

这是布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:ignore="InefficientWeight" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="10dp"
            android:text="Worp "
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:paddingLeft="10dp"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:drawSelectorOnTop="true"
                android:tag="SP1" />

            <EditText
                android:id="@+id/editText1"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="phone"
                android:minWidth="40dp" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:textAppearance="?android:attr/textAppearanceLarge" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:paddingLeft="10dp"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <Spinner
                android:id="@+id/spinner2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:drawSelectorOnTop="true"
                android:tag="SP2" />

            <EditText
                android:id="@+id/editText2"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="phone"
                android:minWidth="40dp" >

                <requestFocus />
            </EditText>

            <TextView
                android:id="@+id/textView5"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:textAppearance="?android:attr/textAppearanceLarge" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>
    </TableLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:43:05.117

似乎由于 wrap_content 属性，表格列的宽度正在发生变化。尝试将表格行的属性从 wrap_content 更改为 match_parent 或尝试使用 weightSum。

# wpf - 将 xaml 列映射到在 wpf datagrid 后面的代码中生成的列

> ID：14756281
> 
> 赞同：0
> 
> 时间：2013-02-07T16:40:24.347
> 
> 标签：wpf, datagrid

我想在包含 16 列和所需行数的数据网格中显示一个包含大约 300 个元素的字节数组。我在后面的代码中为数据表生成列和行，然后将数据表绑定到数据网格项源。我需要更改每列的标题样式。我怎样才能做到这一点？如果我在 xaml 中生成 16 列，我如何将这些列映射到代码隐藏文件中生成的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:08:43.847

您可以在自身后面的代码处绑定 DataGrid 绑定。但是您应该在 XAML 中定义网格并将自动生成列设置为 false。然后，定义`Window.Resources`并设置样式 TargetType 为 DataGridColumnHeader。在这种样式中，您可以修改标题外观

```
 <Window.Resources>
        <Style TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Background" Value="Orange" />
            <Setter Property="Foreground" Value="White" />
        </Style>
    </Window.Resources> 
```

# c++ - 在 OS X 中，C++ 未处理的异常不会自动打印 what() 的输出

> ID：14756282
> 
> 赞同：4
> 
> 时间：2013-02-07T16:40:27.443
> 
> 标签：c++, macos, exception

拿这段代码：

```
#include <exception>

int main()
{
    throw std::exception();
    return 0;
} 
```

当我在 Ubuntu Linux 中使用 gcc 编译和运行它时，我得到以下有用的输出：

```
terminate called after throwing an instance of 'std::exception'
what():  std::exception
Aborted (core dumped) 
```

但是，当在 OS X Mountain Lion（同时使用 GCC 和 clang）上编译和运行时，我得到以下有用的输出：

```
libc++abi.dylib: terminate called throwing an exception 
```

有没有办法让 OS X 默认在未处理的异常上打印 what() 的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T05:31:27.607

对于它的价值，这在 OS X Mavericks 中对我有用：

```
$ echo '
> #include <stdexcept>
>
> int main()
> {
>     throw std::runtime_error("oh no");
>     return 0;
> }
> ' | g++ -x c++ - ; ./a.out
libc++abi.dylib: terminating with uncaught exception of type std::runtime_error: oh no    
Abort trap: 6 
```

所以我猜苹果刚刚开始为你解决这个问题。

编辑：另外，我不知道为什么我也没有测试你的例子，但这也有效：

来自 g++/clang：

```
libc++abi.dylib: terminating with uncaught exception of type std::exception: std::exception
Abort trap: 6 
```

# intellij-idea - 使用 IntelliJ 监控 JMS 队列

> ID：14756285
> 
> 赞同：2
> 
> 时间：2013-02-07T16:40:30.093
> 
> 标签：intellij-idea, jms

是否可以从 Idea IDE 查看 JMS 数据（例如计数器和内容）以及执行管理命令（例如刷新队列）？

吉尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:49:09.113

你可以看看[SoapUi 插件](http://www.soapui.org/IDE-Plugins/intellij.html)

它提供[JMS 支持](http://www.soapui.org/JMS/getting-started.html)

# java - 将音乐复制到 iPod 的 API

> ID：14756286
> 
> 赞同：1
> 
> 时间：2013-02-07T16:40:36.427
> 
> 标签：java, python, ipod

是否有将音乐（磁盘上的文件）复制到 iPod 的 API？

任何语言都可以，但最好是 Java 或 python。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T16:44:21.933

我相信 iTunes 和 ipod 之间的传输协议是一个封闭的协议..因此不认为有一个公开可用的协议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T16:54:15.860

您可以查看用于 Linux/Mac的[gtkpod及其使用的库。](http://www.gtkpod.org/wiki/Home)更具体地说，gtkpod（和其他程序）使用的[libgpod 。](http://www.gtkpod.org/libgpod/docs/)

# python - setattr(object, name, value) vs object.__setattr__(name,value)

> ID：14756289
> 
> 赞同：6
> 
> 时间：2013-02-07T16:40:47.440
> 
> 标签：python, coding-style

我只是在阅读帖子[如何在 python 中通过 __dict__ 分配新的类属性？](https://stackoverflow.com/questions/432786/how-can-i-assign-a-new-class-attribute-via-dict-in-python)@bruno desthuilliers 有一条评论说：

> 不应该直接调用魔术方法——它们在这里是作为运算符或通用函数的实现。在这种情况下，惯用的解决方案是使用`setattr(obj, name, value)`.

setattr 的情况似乎超出了他自己评论的范围：不是运算符，也不是泛型函数的真正实现。

有人可以解释评论吗？为什么我应该更喜欢一个而不是另一个？

在什么情况下最好使用`obj.__setattr__(name, value)`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T16:46:49.793

您应该始终使用`setattr()`，评论者非常正确。

`__setattr__`例如，`setattr()`如果类型允许设置属性，则并非所有类型都实现了。

双下划线方法是钩子，可以让您的自定义类实现自定义行为。Python API 将使用这些钩子（如果存在），以在缺少钩子时回退到默认行为。通过绕过 API，您将不得不在自己的代码中实现回退。

您只需要`__setattr__`在实现子类时直接调用，然后最好通过`super()`调用：

```
def Foo(Bar):
   def __setattr__(self, attr, value):
       # do something with attr and value
       super(Foo, self).__setattr__(attr, value) 
```

# mobile - C# 移动设备应用程序中的 SQL 复制

> ID：14756293
> 
> 赞同：1
> 
> 时间：2013-02-07T16:40:51.783
> 
> 标签：mobile, sql-server-ce, windows-ce, database-replication, motorola

我有一个在摩托罗拉 Symbol 3090 上运行的移动应用程序 (CE)，它应该允许扫描库存项目并在我们的 SQL 服务器上更改它们的属性（该表已在服务器上存在多年，现在他们想要一种使用移动设备的方法更新）。

这是我面临的需要解决的问题。

1.  我们的仓库非常大，跨越多个位置，因此不可避免地我们在仓库中存在死区，因此不可能进行持续的连接。我提出的是一种进入离线模式并在本地设备上拥有我们库存的最新副本的方法。这将允许在本地找到和记录所有交易。当设备返回底座或返回 wifi 时，它会更新数据库。有了这个提议，我不确定 SQL 复制是否是处理此类应用程序的最佳方式。

希望一些更有经验的移动设备开发人员对设计方案有任何投入。

我只在这些类型的系统（摩托罗拉符号 3090）上开发了大约 2 个月，并且没有 SQL 复制的背景知识。我了解复制的基本原理，但这与我对该主题的知识程度有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:27:45.240

正如 ErikEJ 在上面的评论中指出的那样，合并复制适用于这种情况。以下是一些帮助您入门的资源：

*   [MSDN 的“解释”](http://msdn.microsoft.com/en-us/library/ms172367%28v=sql.105%29.aspx)
*   [抢蒂芙尼的书](https://rads.stackoverflow.com/amzn/click/com/0979891213)
*   [克里斯·费尔贝恩的博客](http://www.christec.co.nz/blog/archives/373)
*   [埃里克的图书馆](https://sqlcemergelib.codeplex.com/)

# javascript - 从父 URL 中提取部分 URL

> ID：14756295
> 
> 赞同：0
> 
> 时间：2013-02-07T16:41:06.007
> 
> 标签：javascript, jquery

对于这个网址

```
"http://testsite/sites/TestSubSite/objstrat/CultureConnection/Pages/default.aspx" 
```

试图在企业/站点之后提取所有内容。我想`"/TestSubSite/objstrat/CultureConnection/Pages/default.aspx"`

我可以得到这样的文件名：

```
var filename = parenturl.substring(parenturl.lastIndexOf("/") + ); 
```

但不知道如何从中间提取..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:46:23.770

对于片段或查询中的`lastIndexOf`任何 URI 引用，使用将失败，如.`/``http://example.com/foo/bar#/baz/boo`

* * *

像[Google Closure 的 Uri 模块](http://closure-library.googlecode.com/svn/docs/class_goog_Uri.html)这样的库可以让这变得简单。

```
new goog.Uri(parenturl).getPath() 
```

* * *

如果您选择的库不支持 URI，那么[http://www.ietf.org/rfc/rfc3986.txt](http://www.ietf.org/rfc/rfc3986.txt)附录 B 建议

```
var urlRegex = /^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;
var path = decodeURIComponent(urlRegex.exec(parenturl)[5]); 
```

将为您提供路径部分。

* * *

`/sites/`一旦你有了路径，你就可以通过做类似的事情来剥离部分

```
var pathSuffix = path.replace(/^\/sites\//, '/'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:37:08.117

我喜欢带有 DOM 元素的 Javascript。

```
var link = document.createElement('a');
link.href = "http://testsite/sites/TestSubSite/objstrat/CultureConnection/Pages/default.aspx";

link.protocol;
link.hostname;
link.port;
link.pathname;
link.search;
link.hash;
link.host;

link.pathname.replace(/^\/sites/,"") // "/TestSubSite/objstrat/CultureConnection/Pages/default.aspx" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:53:30.230

最简单的事情可能是使用 javascript 的 Split() 函数并从结果数组中重建字符串（省略前几项）

```
 var parenturl = "http://testsite/sites/TestSubSite/objstrat/CultureConnection/Pages/default.aspx";
        var tokens = parenturl.split("/");

    for(var i=0;i<tokens .length;i++)
    {
        console.log(tokens [i]);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T16:57:36.543

怎么样：

```
var parenturl = "http://testsite/sites/TestSubSite/objstrat/CultureConnection/Pages/default.aspx";
var filename = parenturl.match(/\/sites(.*)$/)[1];
alert(filename); 
```

# php - FuelPHP分页问题

> ID：14756296
> 
> 赞同：1
> 
> 时间：2013-02-07T16:41:06.903
> 
> 标签：php, pagination, fuelphp

我最近将我的 FuelPHP 升级到 v1.5。现在我正在尝试设置分页类。

这是我的代码：

```
$data['news'] = Model_News::find()->where('font', '>', -1);
        $count = count($data['news']);

        $config = array(
                'pagination_url' => 'http://localhost/public/mobile/barbecue/',
                'total_items'    => $count,
                'per_page'       => 12,
                'uri_segment'    => 3,
        );

        $pagination = Pagination::forge('mypagination', $config);

        $data['news'] = Model_News::find()->where('font', '>', -1)->order_by(array('date' => 'desc'))->limit($pagination->per_page)->offset($pagination->offset)->get();
        $data['pagination'] = $pagination->render();
        $this->template->title = "Teams";
        $this->template->content = View::forge('news/index', $data); 
```

我复制了`core/config/pagination.php`to `app/config/pagination.php`。在我看来`news/index.php`，分页已设置：`<?php echo $pagination ?>`

结果：查询得到的信息正常显示，但字符串$ pagination什么也不返回。燃料显示没有错误。

我所做的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T11:36:33.100

在新版本的 Fuelphp 中，在视图中执行此更改：

```
echo html_entity_decode($pagination); 
```

并更新分页配置文件。下面给出了一些更改。

```
'previous-marker'         => "<",
//and
'next-marker'             => ">" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:11:52.823

对于 FuelPHP v1.5+，这将是

```
<?php echo $pagination->render(); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:44:08.247

在您看来，使用以下命令打印分页：

```
<?php echo \Pagination::create_links(); ?> 
```

代替

```
<?php echo $pagination ?> 
```

# c# - 从 C++ 到 C# 的 WM_COPYDATA

> ID：14756299
> 
> 赞同：3
> 
> 时间：2013-02-07T16:41:23.670
> 
> 标签：c#, c++, unmanaged, managed

我正在使用 Visual Studio 2010 开发 4 个应用程序（使用 Internet 中的已建立示例）：C++ MFC 中的 2 个（命名为：SenderCpp 和 ReceiverCpp）和 C# 中的 2 个（命名为：SenderCsh 和 ReceiverCsh）来测试 WM_DATACOPY 进程间通信。

我的目标是让 C++ 应用程序“SenderCpp”向 C# 应用程序“ReceiverCsh”发送一些数据，但它不起作用，“ReceiverCsh”没有收到任何消息。

所以：

*   SenderCpp->ReceiverCpp：有效
*   SenderCsh->ReceiverCsh：有效
*   SenderCpp->ReceiverCsh：不工作

SenderCpp 代码是：

```
void SendCopyData(HWND hFind)
{
    COPYDATASTRUCT cp;
    StackRecord record;

    record.CursorX = 1;
    record.CursorY = -1;

   _tcscpy(record.cmdline, L"Hello World!");
   cp.cbData = sizeof(record);
   cp.lpData = &record;
   cp.dwData = 12;
   SendMessage(hFind, WM_COPYDATA, NULL, (LPARAM)&cp);
}

void CCANDriverDlg::OnBnClickedButton2()
{
   HWND hWnd = ::FindWindow(NULL, CString("ReceiverCpp"));
   SendCopyData(hWnd);
}

void CCANDriverDlg::OnBnClickedButton1()
{
   HWND hWnd = ::FindWindow(NULL, CString("ReceiverCsh"));
   SendCopyData(hWnd);
} 
```

ReceiverCsh 是：

```
 protected override void WndProc(ref Message m)
    {
        switch(m.Msg)
        {
            case WM_COPYDATA:
                // Win32.CopyDataStruct st = (Win32.CopyDataStruct)Marshal.PtrToStructure(m.LParam, typeof(Win32.CopyDataStruct));
                CopyDataStruct st = (CopyDataStruct)Marshal.PtrToStructure(m.LParam, typeof(CopyDataStruct));
                //txtmessagereceive.Text = strData;

                CANMessage MsgIn = new CANMessage(8);
                MsgIn = (CANMessage)Marshal.PtrToStructure(st.lpData, typeof(CANMessage));

                // Decode the marshaled message
                txtmessagereceive.Text = "dwData = " + st.dwData.ToString() +"\r\n" +
                                        "cbData = " + st.cbData + " bytes\r\n" +
                                        "CANID = " + MsgIn.CANID.ToString() + "\r\n";
                for (int i=0; i<8; i++)
                {
                    txtmessagereceive.Text += String.Format("Data[{0}]={1}\r\n", i, MsgIn.Data[i]);
                }

                break;
            default:
                // let the base class deal with it
                base.WndProc(ref m);
                break;
        }
    } 
```

使用 Spy++ 我看到监视“ReceiverCsh”时，当 SenderCpp 发送 WM_COPYDATA 时没有显示消息，而是在分析 ReceiverCpp 时显示消息。

你有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:50:04.277

我想知道是否`ReceiverCsh`是控制台应用程序。为了使用 WndProc 覆盖，您需要有一个消息泵来接收外部消息。确保是这种情况。

有关更多详细信息，请参阅[在控制台应用程序中处理消息](http://msdn.microsoft.com/en-us/magazine/cc163417.aspx)

# javascript - 将远程 XML 文件读入数组的 Javascript

> ID：14756305
> 
> 赞同：0
> 
> 时间：2013-02-07T16:41:48.783
> 
> 标签：javascript, xml, arrays, spotify, playlist

我想根据这个文件创建一个包含 20 首歌曲的艺术家和曲目名称的多维数组。

[http://ws.audioscrobbler.com/2.0/user/bbc6music/weeklytrackchart.xml](http://ws.audioscrobbler.com/2.0/user/bbc6music/weeklytrackchart.xml)

因此，我可以创建一个 Spotify 应用程序，生成该列表中前 20 首歌曲的播放列表。

看起来相当直截了当，但我无法接受它。

我会很感激任何帮助，干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:04:51.283

您可以使用 jQuery 获取数据并通过它进行解析

```
$.get("http://ws.audioscrobbler.com/2.0/user/bbc6music/weeklytrackchart.xml",
function(xmlData){
     var $page = $(xmlData);
     //you can now use all the jQuery to conquer the world
     $page.find("track:lt(20)").each(function(){
           var $data = $(this);
           var artistName = $data.find("artist").text();
           //mischief goes here
      });
      //tap the map and say "mischief managed"
 }
); 
```

[http://jquery.com/](http://jquery.com/)

# jquery - javascript select2 允许的标签

> ID：14756309
> 
> 赞同：16
> 
> 时间：2013-02-07T16:41:54.323
> 
> 标签：jquery, jquery-select2

我需要允许用户在选择中仅选择允许的标签。

目前我有：

```
$("input#id_txtcolor").select2({tags:["red", "green", "blue"]}); 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-11T00:56:38.720

从 3.3 开始，您可以在使用始终返回 null 的标签时指定自己的 createSearchChoice，从而防止创建默认选项。

```
$().select2({
    createSearchChoice: function() { return null; },
    tags:...
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-18T16:24:07.653

有时我们的开发人员不使用我们的第 7 种感觉，这是常识，我挣扎了 2 个小时然后它点击了我的感觉。如果您希望用户只选择允许的值，那么它不再**标记**它的**选择**所以只需删除`tags:true`选项和在选择中保留`mulitple`属性，直接在选择元素中提供选项或加载远程数据。

# php - 从表中提取去年的数据

> ID：14756310
> 
> 赞同：0
> 
> 时间：2013-02-07T16:42:02.090
> 
> 标签：php, sql

您好，我正在尝试更新此奖学金申请框。但是，当年份更改为 2013 年时，它只显示 2013 年的奖学金申请者信息。我希望它显示 2012 年的信息。我试着弄乱日期，但我似乎无法弄清楚。任何帮助将不胜感激！

```
 <?php
$appYear = date("Y").'-'.(date("Y")+1);
$sql = 'select * from sApplication where studentID = "'.$database->iPrep($_SESSION['ID']).'" AND appYear = "'.$appYear.'" LIMIT 1';
$appID = Scholarship::iFindSQL($sql);
$total = count($appID);
if ($total > 0)
    { 
        $app = array_shift($appID); 
    }
    else
        {
            $app = 0;
        }
?>
<li id="item-2">
  <div id="appStatus">
    <h3>Application Status</h3>
    <blockquote>
    <?php if ($app->submitted == ('0000-00-00') || !isset($app->submitted)) { ?> 

    <table style="border:1px solid #000;" width="100%" border="0" cellspacing="5" cellpadding="0">
  <tr>
    <td width="50%"><strong>Scholarship<br /> 2013-2014</strong></td>
    <td width="50" align="right"> <a style="font-size:16px;" href="welcome.php?   app=Scholar">Apply Now</a></td>
  </tr>
  <tr>
    <td><strong>Date Submitted</strong></td>
    <td align="right">&nbsp;</td>
  </tr>
  <tr>
    <td><strong>References</strong></td>
    <td align="right">&nbsp;</td>
  </tr>
  <tr>
    <td><strong>Decision</strong></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td colspan="2"><hr /></td>
    </tr>
  <tr>
    <td><strong>Scholarship 2012-2013</strong></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><strong>Decision</strong></td>
    <td>&nbsp;</td>
  </tr>
    </table>

      <?php } else { ?> 
      <table style="border:1px solid #000;" width="100%" border="0" cellspacing="5" cellpadding="0">

        <tr>
          <td width="90%"><strong>Scholarship 2013-2014</strong></td>
          <td width="10%" align="right">&nbsp;</td>
        </tr>
        <tr>
          <td><strong>Date Submitted</strong></td>
          <td align="right"><?=dbOutDate($app->submitted)?></td>
        </tr>
        <tr>
          <td><strong>References</strong> </td>
          <td align="right"></td>
        </tr>

        <tr>
        <td colspan="2">
        <?php  
         $refs = Reference::iFindSQL("Select * from reference where appID = '".$app->ID."'");?>

        <table width="100%" border="0" cellspacing="0" cellpadding="0">

         <?php foreach($refs as $ref) { ?>
         <tr> <td> <small><?php if($ref->rType == 'Academic Reference'){ echo 'Academic/Artistic/Professional'; } else { echo 'Community Service'; } ?></small></td> <td align="right"><?=$ref->status?></td></tr>
      <?php } ?>

        </table>
        </td>
        </tr>
        <tr>
          <td><strong>Decision</strong></td>
          <td align="right">
         <?php
                if ($app->complete == 'Approved') { echo '<a   href="'.$_SERVER['PHP_SELF'].'?app=Bank&appID='.$app->ID.'">Approved</a>'; }
                if ($app->complete == 'Declined') { echo '<a href="'.$_SERVER['PHP_SELF'].'?app=Declined&appID='.$app->ID.'">Declined</a>'; }
                if ($app->complete == 'Pending') { echo 'Pending'; }
                if ($app->complete == 'Incomplete') { echo 'Incomplete'; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:44:33.340

删除限制年份的 WHERE 子句。使用 ORDER BY 按年份降序排序。

```
$sql = 'select * from sApplication 
    where studentID = "'.$database->iPrep($_SESSION['ID']).
    '" ORDER BY appYear DESC LIMIT 1'; 
```

# windows-authentication - SignalR C# 客户端未与 NTLM 连接

> ID：14756312
> 
> 赞同：2
> 
> 时间：2013-02-07T16:42:09.850
> 
> 标签：windows-authentication, signalr, ntlm

SignalR 1.0 RC2 aspnet C# 客户端示例。需要做什么才能让该客户端使用 Windows 身份验证连接到禁用匿名登录的 (IIS 6) 集线器服务器。那里有样品吗？这是一个依赖于 AD 用户 ID 的 Intranet 应用程序。客户端最终将被实现为服务。基于浏览器的客户端可以正常工作。任何帮助或线索将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:01:43.483

尝试设置

```
connection.Credentials = CredentialCache.DefaultCredentials; 
```

# c# - 如何禁用用户控件来绘制它的背景（或区域）

> ID：14756318
> 
> 赞同：1
> 
> 时间：2013-02-07T16:42:51.733
> 
> 标签：c#, winforms, background

我的问题：**如何禁用用户控件来绘制它的背景（或区域）**

注意：我已经尝试覆盖并清空 OnPaintBackground 或将背景颜色设置为透明。

我正在尝试为自定义容器中的自定义用户控件绕过 winform 绘制。为此，我想尝试一下：[Beginners-Starting-a-2D-Game-with-GDIplus](http://www.codeproject.com/Articles/409988/Beginners-Starting-a-2D-Game-with-GDIplus)

我的设置是：

*   包含以下内容的表格：
    *   用户控件（绘图板）
    *   一个包含元素的容器，我可以将其拖放到此绘图板（它是一个列表框）。

我的渲染循环位于绘图板内，所有元素都在上一个链接中指定。

```
public DrawingBoard()
{
    InitializeComponent();

    //Resize event are ignored
    SetStyle(ControlStyles.FixedHeight, true);
    SetStyle(ControlStyles.FixedWidth, true);
    SetStyle(System.Windows.Forms.ControlStyles.AllPaintingInWmPaint, true);// True is better
    SetStyle(System.Windows.Forms.ControlStyles.OptimizedDoubleBuffer, true); // True is better
    // Disable the on built PAINT event. We dont need it with a renderloop.
    // The form will no longer refresh itself
    // we will raise the paint event ourselves from our renderloop.
    SetStyle(System.Windows.Forms.ControlStyles.UserPaint, false); // False is better
}

#region GDI+ RENDERING
public Timer t = new Timer();
//This is your BackBuffer, a Bitmap:
Bitmap B_BUFFER = null;
//This is the surface that allows you to draw on your backbuffer bitmap.
Graphics G_BUFFER = null;
//This is the surface you will use to draw your backbuffer to your display.
Graphics G_TARGET = null;
Size DisplaySize = new Size(1120, 630);
bool Antialiasing = false;

const int MS_REDRAW = 32;

public void GDIInit()
{
    B_BUFFER = new Bitmap(DisplaySize.Width, DisplaySize.Height);
    G_BUFFER = Graphics.FromImage(B_BUFFER); //drawing surface
    G_TARGET = CreateGraphics();

    // Configure the display (target) graphics for the fastest rendering.
    G_TARGET.CompositingMode    = CompositingMode.SourceCopy;
    G_TARGET.CompositingQuality = CompositingQuality.AssumeLinear;
    G_TARGET.SmoothingMode      = SmoothingMode.None;
    G_TARGET.InterpolationMode  = InterpolationMode.NearestNeighbor;
    G_TARGET.TextRenderingHint  = TextRenderingHint.SystemDefault;
    G_TARGET.PixelOffsetMode    = PixelOffsetMode.HighSpeed;

    // Configure the backbuffer's drawing surface for optimal rendering with optional
    // antialiasing for Text and Polygon Shapes            
    //Antialiasing is a boolean that tells us weather to enable antialiasing.
    //It is declared somewhere else
    if (Antialiasing)
    {
        G_BUFFER.SmoothingMode      = SmoothingMode.AntiAlias;
        G_BUFFER.TextRenderingHint  = TextRenderingHint.AntiAlias;
    }
    else
    {
        // No Text or Polygon smoothing is applied by default
        G_BUFFER.CompositingMode    = CompositingMode.SourceOver;
        G_BUFFER.CompositingQuality = CompositingQuality.HighSpeed;
        G_BUFFER.InterpolationMode  = InterpolationMode.Low;
        G_BUFFER.PixelOffsetMode    = PixelOffsetMode.Half;
    }

    t.Tick += RenderingLoop;
    t.Interval = MS_REDRAW;
    t.Start();
}
void RenderingLoop(object sender, EventArgs e)
{
    try
    {
        G_BUFFER.Clear(Color.DarkSlateGray);
        UIPaint(G_BUFFER);
        G_TARGET.DrawImageUnscaled(B_BUFFER, 0, 0);
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
    }
}
#endregion 
```

然后我的元素触发事件并尝试绘制我想要的内容：

```
public override void UIPaint(Graphics g)
{     
    Pen p = new Pen(Color.Blue,4);
    p.Alignment = System.Drawing.Drawing2D.PenAlignment.Inset;          
    g.DrawLines(p, new Point[] { new Point(Location.X, Location.Y), new Point(Location.X + Width, Location.Y), new Point(Location.X + Width, Location.Y + Height), new Point(Location.X, Location.Y + Height), new Point(Location.X, Location.Y - 2) });

    g.DrawImageUnscaled(GDATA.GetWindowImage(), Location);        
    } 
```

这是我的绘图板上发生的事情：

因为我不能发布图片...这里是链接：[http ://s8.postimage.org/iqpxtaoht/Winform.jpg](http://s8.postimage.org/iqpxtaoht/Winform.jpg)

*   背景是 DarkSlateGray 因为我的 G_BUFFER 状态用它来清除每个刻度，好的
*   蓝色矩形是我画的，但它被裁剪了，KO
*   纹理被裁剪，KO
*   裁剪我的绘图的区域是控件大小。

所以从那里我已经尽我所能禁用 WinForm 在后台制作一些魔术图。试图覆盖和清空所有在 Form/DrawingBoard/Elements 上获得绘制/更新/刷新/无效/验证的所有内容，但没有什么能让我的纹理或绘图不被控件背景裁剪：（

我还尝试将元素的背景设置为透明，并将 Form.TransparencyKey = blabla 设置为每个元素 BackColor = blabla。但每次都失败了。

我当然错过了一些东西：/但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-21T00:16:09.507

你为什么不想画背景？为了避免在我的自定义控件（派生自 class `Control`）中出现闪烁问题，这就是我所做的：

(1) 覆盖`OnPaintBackground`：

```
protected override void OnPaintBackground(PaintEventArgs pevent)
{
} 
```

（2）画在一个离屏`Bitmap`，然后转移到屏幕上：

```
Bitmap _completeFrame;
protected override void OnPaint(PaintEventArgs pe)
{
    DrawFrame(); // draws onto _completeFrame, calling new Bitmap() 
                 // when _completeFrame is null or its Size is wrong
    var g = pe.Graphics;
    g.DrawImage(_completeFrame, new Point());
} 
```

# excel - 使用 SSIS 加载带有复选框（表单控件）的 Excel

> ID：14756320
> 
> 赞同：0
> 
> 时间：2013-02-07T16:42:54.260
> 
> 标签：excel, ssis

我必须将非结构化的 excel 文件加载到临时表中，将其视为带有复选框（表单控件）的调查表。

我的问题是如果我将 excel 转换为 CSV 或任何其他格式，复选框值不会出现。

我可以使用 SSIS 加载此 excel 文件或如何加载此文件以便还捕获复选框值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:19:03.793

一般情况下，可以通过引用`Cell Link`控件属性中的单元格来获取复选框的值。（有关确定该单元格引用的详细信息，请参阅[Office 文档](http://office.microsoft.com/en-us/excel-help/add-a-check-box-option-button-or-toggle-button-to-a-worksheet-HP010236677.aspx#BMadd_or_edit_a_check_box_%28forms_toolba)。）

但是，听起来您的情况并非如此。如果是这样，您将**无法**通过 SSIS Excel 连接管理器访问该复选框。您必须编写代码来遍历 Excel 对象模型并以这种方式获取值。

# php - 如何在不替换 PHP 中的任何内容的情况下插入文本

> ID：14756321
> 
> 赞同：4
> 
> 时间：2013-02-07T16:42:53.687
> 
> 标签：php, string, insert

如何在特定点将文本插入 PHP 字符串而不覆盖任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:11:48.450

使用长度值为 0 的 substr_replace()。

**代码：**

```
substr_replace("abcdefgh","-bbbb-",3,0); 
```

上面的输出将是“abc-bbbb-defgh”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:01:38.657

简单，使用`substr()`：

```
$str_a = "foo bar";
$str_b = substr($str_a, 0, 3) . ' baz' . substr($str_a, 3); 
```

# php - 使用 Dreamweaver 创建页面限制时遇到问题

> ID：14756323
> 
> 赞同：0
> 
> 时间：2013-02-07T16:42:56.273
> 
> 标签：php, html, mysql, phpmyadmin, restrictions

**我正在尝试创建一个简单的登录表单和一个带有页面限制的页面**

我创建了一个 mysql 数据库并上传了用户的详细信息。

我创建了一个登录页面：[http](http://www.diydirector.com/loginform.php) ://www.diydirector.com/loginform.php这似乎工作正常。然后，我将其设置为在成功登录后定向到受限页面。

然后，我根据用户名和密码创建了一个具有访问限制的受限页面：[http://www.diydirector.com/restricted-page.php](http://www.diydirector.com/restricted-page.php)该页面被设置为在无法访问的结果中直接返回登录页面。

输入正确的用户名和密码后，我无法访问受限页面，我尝试了很多次。

除了使用dreamweaver 的mysql 数据库之外，我还完成了所有这些工作。我在这里错过了什么吗？

登录表单的用户名是：jdoe，密码是：doepass

非常感谢您对此的任何帮助。提前谢谢了

**这是登录表单的代码**

```
<?php require_once('Connections/couch.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}
?>
<?php
// *** Validate request to login to this site.
if (!isset($_SESSION)) {
  session_start();
}

$loginFormAction = $_SERVER['PHP_SELF'];
if (isset($_GET['accesscheck'])) {
  $_SESSION['PrevUrl'] = $_GET['accesscheck'];
}

if (isset($_POST['username'])) {
  $loginUsername=$_POST['username'];
  $password=$_POST['password'];
  $MM_fldUserAuthorization = "";
  $MM_redirectLoginSuccess = "restricted-page.php";
  $MM_redirectLoginFailed = "loginform.php";
  $MM_redirecttoReferrer = false;
  mysql_select_db($database_couch, $couch);

  $LoginRS__query=sprintf("SELECT username, password FROM auth_users WHERE username=%s AND password=%s",
    GetSQLValueString($loginUsername, "text"), GetSQLValueString($password, "text")); 

  $LoginRS = mysql_query($LoginRS__query, $couch) or die(mysql_error());
  $loginFoundUser = mysql_num_rows($LoginRS);
  if ($loginFoundUser) {
     $loginStrGroup = "";

    if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();}
    //declare two session variables and assign them
    $_SESSION['MM_Username'] = $loginUsername;
    $_SESSION['MM_UserGroup'] = $loginStrGroup;       

    if (isset($_SESSION['PrevUrl']) && false) {
      $MM_redirectLoginSuccess = $_SESSION['PrevUrl'];  
    }
    header("Location: " . $MM_redirectLoginSuccess );
  }
  else {
    header("Location: ". $MM_redirectLoginFailed );
  }
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Login Form</title>
</head>

<body>
<h1>Login Form 1</h1>
<form method="POST" action="<?php echo $loginFormAction; ?>">
<p><strong>username:</strong><br/>
<input type="text" name="username"/></p>
<p><strong>password:</strong><br/>
<input type="password" name="password"/></p>
<p><input type="submit" name="submit" value="login"/></p>
</form>
</body>
</html> 
```

**这是受限页面的代码**

```
<?php
if (!isset($_SESSION)) {
  session_start();
}
$MM_authorizedUsers = "";
$MM_donotCheckaccess = "true";

// *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
  // For security, start by assuming the visitor is NOT authorized. 
  $isValid = False; 

  // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
  // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
    // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
    // Parse the strings into arrays. 
    $arrUsers = Explode(",", $strUsers); 
    $arrGroups = Explode(",", $strGroups); 
    if (in_array($UserName, $arrUsers)) { 
      $isValid = true; 
    } 
    // Or, you may restrict access to only certain users based on their username. 
    if (in_array($UserGroup, $arrGroups)) { 
      $isValid = true; 
    } 
    if (($strUsers == "") && true) { 
      $isValid = true; 
    } 
  } 
  return $isValid; 
}

$MM_restrictGoTo = "loginform.php";
if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
  $MM_qsChar = "?";
  $MM_referrer = $_SERVER['PHP_SELF'];
  if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
  if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
  $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
  header("Location: ". $MM_restrictGoTo); 
  exit;
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<h1>Restricted Page</h1>
</body>
</html> 
```

**这是dreamweaver 放入名为“connections”的文件夹中的mysql 连接代码。（我把密码弄模糊了）**

```
<?php
# FileName="Connection_php_mysql.htm"
# Type="MYSQL"
# HTTP="true"
$hostname_couch = "diydirectorcom.ipagemysql.com";
$database_couch = "couch1";
$username_couch = "couch1";
$password_couch = "******";
$couch = mysql_pconnect($hostname_couch, $username_couch, $password_couch) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T04:33:53.220

以下链接将帮助您创建登录模块：

[http://www.wmtips.com/php/simple-ways-restrict-access-webpages-using.htm](http://www.wmtips.com/php/simple-ways-restrict-access-webpages-using.htm)

[http://www.phpclasses.org/package/1906-PHP-Site-user-registration-and-page-access-restriction.html](http://www.phpclasses.org/package/1906-PHP-Site-user-registration-and-page-access-restriction.html)

# c++ - (bool) 强制转换的默认行为

> ID：14756328
> 
> 赞同：2
> 
> 时间：2013-02-07T16:43:07.630
> 
> 标签：c++, c++11, operator-overloading, std

stl 中的类，例如 unique_ptr 偶尔会显示以下示例：

```
// unique_ptr constructor example
#include <iostream>
#include <memory>

int main () {
  std::default_delete<int> d;
  std::unique_ptr<int> u1;
  std::unique_ptr<int> u2 (nullptr);
  std::unique_ptr<int> u3 (new int);
  std::unique_ptr<int> u4 (new int, d);
  std::unique_ptr<int> u5 (new int, std::default_delete<int>());
  std::unique_ptr<int> u6 (std::move(u5));
  std::unique_ptr<void> u7 (std::move(u6));
  std::unique_ptr<int> u8 (std::auto_ptr<int>(new int));

  std::cout << "u1: " << (u1?"not null":"null") << '\n';
  std::cout << "u2: " << (u2?"not null":"null") << '\n';
  std::cout << "u3: " << (u3?"not null":"null") << '\n';
  std::cout << "u4: " << (u4?"not null":"null") << '\n';
  std::cout << "u5: " << (u5?"not null":"null") << '\n';
  std::cout << "u6: " << (u6?"not null":"null") << '\n';
  std::cout << "u7: " << (u7?"not null":"null") << '\n';
  std::cout << "u8: " << (u8?"not null":"null") << '\n';

 *emphasized text* return 0;
} 
```

该行：

```
 std::cout << "u1: " << (u1?"not null":"null") << '\n'; 
```

显示 unique_ptr u1 如果跟踪空指针，则直接转换为 false。

我已经在其他自定义类中看到了这种行为。这是如何管理的以及由哪个运算符决定直接转换为 bool 的方法是返回 true 还是 false？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T16:46:02.727

它被实现为表单的成员转换运算符`explicit operator bool() const;`。返回true还是false是在类本身的逻辑中实现的。例如，这个类有一个 bool 转换运算符，`true`如果它的数据成员有 value 则返回`42`，`false`否则：

```
struct Foo
{
  explicit operator bool() const { return n==42; }
  int n;
};

#include <iostream>

int main()
{
  Foo f0{12};
  Foo f1{42};

  std::cout << (f0 ? "true\n" : "false\n"); 
  std::cout << (f1 ? "true\n" : "false\n"); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:45:45.723

```
operator bool(); 
```

这是一个标准的类型转换运算符`bool`。

以下是如何使用它的示例：

```
class Checked
{
    bool state;

public:
    Checked(bool _state) : state(_state) { }

    explicit operator bool() const {
        return state;
    }
};

Checked c (true);
if (c)
    cout << "true"; 
```

注意`explicit`关键字。它出现在 C++11 中，并允许将类*安全地*转换为 bool，简而言之，这发生在诸如 等逻辑上下文中`if()`。`while()`如果没有`explicit`，可能会发生坏事，因为存在`bool`到数字类型的隐式转换。在 C++03 及更早版本中，重载 更安全`operator ! ()`，然后将其测试为`if (!!c)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:47:06.593

转换运算符用于此功能：

```
operator bool(){ return false; } 
```

在 C++11 中，您也可以制作它们`explicit`

```
explicit operator bool(){ return true; } 
```

隐式转换运算符是一项容易出错的工作。考虑如果`unique_ptr`有一个隐式转换运算符来布尔，你可以做一些无意义的事情，比如......

```
std::unique_ptr<Thing> x;
int y = 7 + x; 
```

在上述情况下`y`等于`7`+（如果 x 为空则为 0，如果 x 为非空则为 1）

# asp.net - HttpContext 的 Cache 和 Items 属性有什么区别？

> ID：14756333
> 
> 赞同：6
> 
> 时间：2013-02-07T16:43:16.113
> 
> 标签：asp.net, caching, httpcontext, httpcontext.cache

[`HttpContext`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)类[`Cache`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)和[`Items`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)属性之间有什么区别？

从 MSDN 文档：

> **Cache**
> 获取当前应用程序域的 Cache 对象。
> 
> **Items**
> 获取一个键/值集合，该集合可用于在 HTTP 请求期间在 IHttpModule 接口和 IHttpHandler 接口之间组织和共享数据。

我真的不明白该文档试图解释什么。

在处理 ASP.NET Web 应用程序时，我经常使用`Items`按请求缓存数据，以便多个用户控件最终不会从数据库中查找相同的数据。本文对此进行了[描述](http://aspnet.4guysfromrolla.com/articles/060904-1.aspx)。

不过今天，我遇到了该`Cache`属性的用法，看起来像每个请求的缓存。我试图理解差异，但找不到任何比较这两者的好文档。所以我想知道...

HttpContext 的 Cache 和 Items 属性有什么区别？请尝试详细说明*为什么*您会在不同的现实世界场景中选择使用其中一种。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T16:49:03.147

项目是每个请求的，因此它仅适用于该给定 HTTP 请求的给定用户。缓存在内存中存储一​​段持久的时间，它不依赖于特定的用户。因此缓存可以跨多个请求在多个用户之间共享，但 Items 是每个用户每个请求的。

这取决于您希望数据存在多长时间。我使用 Items 在 EF 中存储诸如 ObjectContext 或 DbContext 之类的内容，我只想为给定的请求共享这些内容。但是引用所有用户将在许多请求中使用的表数据，因此缓存会更好。

# ios - 动画 UITextInput 的 textInputView

> ID：14756334
> 
> 赞同：6
> 
> 时间：2013-02-07T16:43:19.093
> 
> 标签：ios, objective-c, uitextfield, uitextview, uitextinput

UIKit 文本输入组件，例如`UITextView`并`UITextField`具有`inputView`添加自定义键盘的属性。我有两个与此相关的问题。

1.  如果键盘当前可见并且属性设置为新的输入视图，则不会发生任何事情。辞职和重新获得第一响应者状态会刷新输入并显示新视图。这是最好的方法吗？如果是这样，它可能会回答我更大的问题：

2.  是否可以为两个输入视图之间的过渡设置动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:55:01.833

来自 UIResponder 文档：

> 需要自定义视图以从用户那里收集输入的响应程序对象应将此属性重新声明为读写并使用它来管理其自定义输入视图。当接收者随后成为第一响应者时，响应者基础结构会自动呈现指定的输入视图。同样，当视图放弃其第一响应者状态时，响应者基础结构会自动关闭指定的视图。

所以不幸的是，1 的答案是肯定的，而 2 的答案是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T01:29:52.117

1.  Actually there is a method to do it cleanly: `UIResponder`'s `reloadInputViews`, available from iOS 3.2!

2.  I think you can animated it with some extra work:

    *   Create a clear background window of a higher `UIWindowLevel` than the keyboard window.
    *   Add your custom keyboard there and animate its frame into place.
    *   Then set it as your text input's `inputView` and refresh the first responder as you do.

Your custom keyboard will change its parent view from your custom window to the keyboard one, but hopefully the user won't notice ;)

# php - 在一页中连接两个不同的数据库

> ID：14756335
> 
> 赞同：0
> 
> 时间：2013-02-07T16:43:20.013
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/f14addac6fbf7ea13bf2939425656921.png)

第二列，在程序中，它说没有记录。不应该是这样的。那里的结果来自另一个数据库的数据。我已经有了它的代码，如果我将包含与另一个 mysql_connect 配置（来自另一个数据库）的不同 php 文件一起使用，则不会像这里看到的那样检索患者信息：

![在此处输入图像描述](../Images/13f68323c578a4b2880180e2ba158885.png)

我知道如何通过存储两个连接的不同变量来进行多个连接。但它让我很困惑，因为它在不同的包含文件中。

屏幕截图中的那个页面是`editclient.php`我`editclient_include_inv.php`在“程序”部分的代码中包含的。

`editclient.php`

```
<?

include('header.php');

  if ($id) {
echo "<h1>Edit Medical Records # : $id</h1>";
}
else
{
echo " <h1>Medical Records</h1>";
}

if($submit)
{
//-------------------check user name-----------------------------------------------------
$name = $_POST['name'];

$select = "select first_name from patient where last_name = '".$last_name."';";
$query = mysql_query($select) or die ("Mysql error! It was: ".mysql_error());
$rows = mysql_num_rows($query);
if ($rows != 0)
{

  echo ("<script language=javascript>alert ('Sorry! $first_name is already taken!')</script>");
  echo ("<script language=javascript>document.location.href = 'editclient.php'</script>");

exit;
}
if($name == "admin"){
  echo ("<script language=javascript>alert ('Sorry! $first_name is not a good thing to do!')</script>");
  echo ("<script language=javascript>document.location.href = 'editclient.php'</script>");
exit;

}
//-----------------------------------end check-------------------------------------------
$sql = "INSERT INTO patient (`first_name`, `last_name`,`country`, `address`, `gender`, `telno`, `occ`, `spo`, `occ2`,`cp`, `tel2`, `reff`, `all`, `ill`, `mat`, `frat`, `datetime`, `vs`,`ppe`, `ffup`)
VALUES ('$first_name','$last_name','$country','$address','$gender','$telno','$occ','$spo','$occ2', '$cp','$tel2','$reff','$all','$ill','$mat','$frat','$datetime','$vs','$ppe','$ffup')";
$result = mysql_query($sql);
//echo ("<script language=javascript>document.location.href = 'editclient.php?id=$id&message=Patient $id has been Created!'</script>");
echo ("<SCRIPT LANGUAGE='JavaScript'>
    window.alert('Succesfully Updated')
    window.location.href='sample4.php';
    </SCRIPT>");

}
else if($update)
{

$sql = "UPDATE patient set first_name='$first_name',last_name='$last_name',
country='$country',address='$address',gender='$gender',telno='$telno',
occ='$occ',spo='$spo',occ2='$occ2', cp='$cp', tel2='$tel2',reff='$reff', ill='$ill', mat='$mat', frat='$frat', datetime='$datetime', vs='$vs', ppe='$ppe' ,ffup='$ffup'
WHERE clientid=$id";
$result = mysql_query($sql);
//echo ("<script language=javascript>document.location.href = 'editclient.php?id=$id&message=Client $id has been Updated!'</script>");
echo ("<SCRIPT LANGUAGE='JavaScript'>
    window.alert('Succesfully Updated')
    window.location.href='sample4.php';
    </SCRIPT>");

}
else if($id)
{
$result = mysql_query("SELECT * FROM patient WHERE clientid=$id",$db);
$row = mysql_fetch_array($result);

?>
</p>
<br><font color=red size=4><?php if (isset($_GET['message'])) { echo ' - '.$_GET['message']; } ?></font><BR>
<?

//-------------NEXT PREVIOUS----------------------------------------------------------------------

$sql ="SELECT * FROM patient WHERE clientid < '$id' ORDER by clientid DESC LIMIT 1";

$resultp = mysql_query($sql);
$previousrows = mysql_num_rows($resultp);
while ($prerow = mysql_fetch_array($resultp)) {
$prev=$prerow['clientid'];
}
//echo $prev;

$sql2 ="SELECT clientid FROM patient WHERE clientid > '$id' ORDER by clientid ASC LIMIT 1";

$resultn = mysql_query($sql2);
$nextrows = mysql_num_rows($resultn);
while ($nextrow = mysql_fetch_array($resultn)) {
$next=$nextrow['clientid'];
}
//echo $next;
if ($previousrows == "") {
echo "";
}else{
echo "<B><a href=$PHP_SELF?id=$prev>$prev <- Prev</a> | ";
}
echo "<font size=6><B>$id</B></font>";
if ($nextrows == "") {
echo "";
}else{
echo "<b> | <a href=$PHP_SELF?id=$next > Next -> $next</a></b>";
}
//-----------------end next prev-----------------------------------------------------
?><br><br>
<?php include("inc/nav.inc");?>
<form name="form2a" method="post" action="<?php echo $PHP_SELF?>">
   <table width="760" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td class=topHeadrow1 valign="middle" width="50%" colspan="2">
Edit Patient Information:</td>
      <td class=topHeadrow1 valign="middle" width="10" rowspan="20">
&nbsp;</td>
      <td class=topHeadrow1 valign="middle" width="50%">
Procedures:</td>
    </tr>
    <tr>
      <td valign="top" align="right">
<input type="hidden" name="id" value="<?php echo $row["clientid"]?>">
First name:<br>
</td>
      <td valign="top" align="left">
&nbsp;<input type="text" size="20" name="first_name" value="<?php echo $row["first_name"]?>" ></td>
      <td valign="top" width="10%" rowspan="13">
<?
include('editclient_include_inv.php');
?>

      </td>
   </tr>
    <tr>
      <td valign="top" align="right">
Last Name:
</td>
      <td valign="top" align="left">
&nbsp;<input type="text" name="last_name" size="20" value="<?php echo $row["last_name"]?>"></td>
   </tr>

   <tr> 
    <td valign="top" align="right"> Gender:</td>
      <td valign="top" align="left"><select name="gender">
      <option value="Male">Male</option>
      <option value="Female">Female</option> </select> 
         </td>
    </tr>
    <tr> 
    <td valign="top" align="right">  Country:</td>
  <td valign="top" align="left">
      <select name="country" >
        <option value="Afghanistan">Afghanistan</option>
        <option value="Bahrain">Bahrain</option>

<option value="Bangladesh">Bangladesh</option>
<option value="Bhutan">Bhutan</option>
<option value="Brunei">Brunei</option>
<option value="Cambodia">Cambodia</option>
        <option value="China">China</option>
        <option value="Malaysia">Malaysia</option>

<option value="Maldives">Maldives</option>
<option value="Mongolia">Mongolia</option>
<option value="Myanmar">Myanmar (Burma)</option>
<option value="Pakistan">Pakistan</option>
<option value="Philippines">Philippines</option>
<option value="Saudi Arabia">Saudi Arabia</option>
<option value="Singapore">Singapore</option>
<option value="Sri Lanka">Sri Lanka</option>
<option value="Syria">Syria</option>
<option value="UAE">United Arab Emirates</option>
<option value="Uzbekistan">Uzbekistan</option>

    </select> 

    </tr>

        <tr>
      <td valign="top" align="right">
Tel. no.:</td>
      <td valign="top" align="left">
<input
 type="text" size="20" name="telno" placeholder="###-####" value="<?php echo $row["telno"]?>"></td></tr>
 <tr>
      <td valign="top" align="right">
Occupation:</td>
      <td valign="top" align="left">
<input
 type="text" size="20" name="occ" value="<?php echo $row["occ"]?>"></td></tr>
 <tr>
      <td align="right">
Spouse:</td>
      <td >
<input
 type="text" size="20" name="spo" value="<?php echo $row["spo"]?>"></td></tr><tr>
  <td align="right">
Occupation:</td>
      <td >
<input
 type="text" size="20" name="occ2" value="<?php echo $row["occ2"]?>"></td></tr>

 <tr>
      <td align="right" width="20">
Contact Person(in case of emergency):</td>
      <td >
<input
 type="text" size="20" name="cp" value="<?php echo $row["cp"]?>"></td></tr><tr>
  <td align="right">
Tel. no:</td>
      <td >
<input
 type="text" size="20" name="tel2" value="<?php echo $row["tel2"]?>"></td></tr>

    <tr>
      <td valign="top" align="right" nowrap>
Address:</td>
      <td valign="top" align="left">
<input type="text" name="address" value="<?php echo $row["address"]?>" size="31"></td>
      </tr>

      <tr>
      <td valign="top" align="right" nowrap>
Reffered By:</td>
      <td valign="top" align="left">
<input type="text" name="reff" value="<?php echo $row["reff"]?>" size="31" ></td>
      </tr>

          <tr>
      <td class=topHeadrow1 valign="middle" width="50%" colspan="2">
Past Medical History:</td>
      </tr>
    <tr>
      <td valign="top" align="right" nowrap>
Allergy:</td>
      <td valign="top" align="left">
<input type="text" name="all" value="<?php echo $row["all"]?>" size="31"></td>
      </tr> 
      <tr>
      <td valign="top" align="right" nowrap>
Previous illness:</td>
      <td valign="top" align="left">
<input type="text" name="ill" value="<?php echo $row["ill"]?>" size="31"></td>
      </tr>

    <tr>
     <td class=topHeadrow1 valign="middle" width="50%" colspan="2">
<b><font size="4">
Heredo-Familial Diseases:</font></b></td>
      </tr>
    <tr>
      <td valign="top" align="right" nowrap>
Maternal:
     </td>
      <td valign="top" align="left">
<input type="text" name="mat" value="<?php echo $row["mat"]?>" size="20"></td>
      </tr>
    <tr>
      <td valign="top" align="right" nowrap>
Fraternal:
     </td>
      <td valign="top" align="left">
<input type="text" name="frat" value="<?php echo $row["frat"]?>" size="20"></td>
      </tr>

<tr>
     <td class=topHeadrow1 valign="middle" width="50%" colspan="2">
<b><font size="4">
Examination:</font></b></td>
      </tr>   
<tr>
      <td valign="top" align="right" nowrap>
Date / Time:</td>
      <td valign="top" align="left">
<input type="text" name="datetime" value="<?php echo $row["datetime"]?>" size="31"></td>
      </tr>
      <tr>
      <td valign="top" align="right" nowrap>
Vital Signs:</td>
      <td valign="top" align="left">
<input type="text" name="vs" value="<?php echo $row["vs"]?>" size="31"></td>
      </tr>
      <tr>
      <td align="center" nowrap>
Complain PPE Findings:</td>
      <td valign="top" align="left">
<input type="text" name="ppe" value="<?php echo $row["ppe"]?>" size="31"></td>
      </tr>
       <tr>
      <td align="center" nowrap>
Plan / Management / FF-UP</td>
      <td valign="top" align="left">
<input type="text" name="ffup" value="<?php echo $row["ffup"]?>" size="31"></td>
      </tr>

    <tr>
      <td class=topHeadrow1 valign="middle" width="100%" colspan="4">
<p align="center"><input class="form-button" type="Submit" name="update" value="Update Information"></td>
    </tr>
    <tr>
      <td valign="top" width="100%" colspan="4">
<br>
</td>
    </tr>
  </table>

  </form>

<?
}
else
{
//----------------------------begin add client--------------------------------------------------------
?>
<br><font color=red size=4><?php if (isset($_GET['message'])) { echo ' - '.$_GET['message']; } ?></font><BR>

<form name="form2b" method="post" action="editclient.php" onSubmit="return checkPw(this)">
  <table>
    <tr>
      <td class="topHeadrow5" valign="top" width="100%" colspan="5">
<b><font size="4">Patient Information:</font></b></td>
    </tr>
    <tr>
      <td valign="top" align="right">
First Name:</td>
      <td valign="top" align="left">
<input
 type="text" size="20" name="first_name" ></td></tr>
    <tr>
      <td valign="top" align="right">
Last Name:</td>
      <td valign="top" align="left">
<input type="text" name="last_name" size="20"></td></tr>
    <tr> 
    <td valign="top" align="right"> Gender:</td>
      <td valign="top" align="left"><select name="gender">
      <option value="Male">Male</option>
      <option value="Female">Female</option> </select> 
           </td>
    </tr>
    <tr> 
    <td valign="top" align="right">Country:</td>
  <td valign="top" align="left">
      <select name="country" >
        <option value="Afghanistan">Afghanistan</option>
        <option value="Bahrain">Bahrain</option>

<option value="Bangladesh">Bangladesh</option>
<option value="Bhutan">Bhutan</option>
<option value="Brunei">Brunei</option>
<option value="Cambodia">Cambodia</option>
        <option value="China">China</option>
        <option value="Malaysia">Malaysia</option>

<option value="Maldives">Maldives</option>
<option value="Mongolia">Mongolia</option>
<option value="Myanmar">Myanmar (Burma)</option>
<option value="Pakistan">Pakistan</option>
<option value="Philippines">Philippines</option>
<option value="Saudi Arabia">Saudi Arabia</option>
<option value="Singapore">Singapore</option>
<option value="Sri Lanka">Sri Lanka</option>
<option value="Syria">Syria</option>
<option value="UAE">United Arab Emirates</option>
<option value="Uzbekistan">Uzbekistan</option>

    </select> 

    </tr>
    <tr>
      <td valign="top" align="right">
Tel. no.:</td>
      <td valign="top" align="left">
<input
 type="text" size="20" name="telno" placeholder="###-####"></td></tr>
 <tr>
      <td valign="top" align="right">
Occupation:</td>
      <td valign="top" align="left">
<input
 type="text" size="20" name="occ" ></td></tr>
 <tr>
      <td align="right">
Spouse:</td>
      <td >
<input
 type="text" size="20" name="spo" ></td>
  <td align="right">
Occupation:</td>
      <td >
<input
 type="text" size="20" name="occ2" ></td></tr>

 <tr>
      <td align="right" width="20">
Contact Person(in case of emergency):</td>
      <td >
<input
 type="text" size="20" name="cp" ></td>
  <td align="right">
Tel. no:</td>
      <td >
<input
 type="text" size="20" name="tel2" ></td></tr>

  <tr>
      <td valign="top" align="right" nowrap>
Address:</td>
      <td valign="top" align="left">
<input type="text" name="address"  size="50"></td>
      </tr>

      <tr>
      <td valign="top" align="right" nowrap>
Reffered By:</td>
      <td valign="top" align="left">
<input type="text" name="reff" size="31"></td>
      </tr>

    <tr>
     <td class="topHeadrow5" valign="top" width="200" colspan="5">
<b><font size="4">
Past Medical History:</font></b></td>
      </tr>

<tr>
      <td valign="top" align="right" nowrap>
Allergy:</td>
      <td valign="top" align="left">
<input type="text" name="all" size="31"></td>
      </tr> 
      <tr>
      <td valign="top" align="right" nowrap>
Previous illness:</td>
      <td valign="top" align="left">
<input type="text" name="ill" size="31"></td>
      </tr>

    <tr>
     <td class="topHeadrow5" valign="top" width="100%" colspan="5">
<b><font size="4">
Heredo-Familial Diseases:</font></b></td>
      </tr>
    <tr>
      <td valign="top" align="right" nowrap>
Maternal:
     </td>
      <td valign="top" align="left">
<input type="text" name="mat" size="20"></td>
      </tr>
    <tr>
      <td valign="top" align="right" nowrap>
Fraternal:
     </td>
      <td valign="top" align="left">
<input type="text" name="frat" size="20"></td>
      </tr>

<tr>
     <td class="topHeadrow5" valign="top" width="100%" colspan="5">
<b><font size="4">
Examination:</font></b></td>
      </tr>   
<tr>
      <td valign="top" align="right" nowrap>
Date / Time:</td>
      <td valign="top" align="left">
<input type="text" name="datetime" size="31"></td>
      </tr>
      <tr>
      <td valign="top" align="right" nowrap>
Vital Signs:</td>
      <td valign="top" align="left">
<input type="text" name="vs" size="31"></td>
      </tr>
      <tr>
      <td align="center" nowrap>
Complain PPE Findings:</td>
      <td valign="top" align="left">
<input type="text" name="ppe" size="31"></td>
      </tr>
       <tr>
      <td align="center" nowrap>
Plan / Management / FF-UP</td>
      <td valign="top" align="left">
<input type="text" name="ffup" size="31"></td>
      </tr>
    <tr>
      <td width="10%">&nbsp;</td>
      <td width="90%"><input class="form-button" type="Submit" name="submit" value="Enter information"></td>
    </tr>
  </table>
  </form>
<p>&nbsp;</p>

<?
}

?> 
```

`editclient_include_inv.php`

```
<?

if ($num < 1){

$mysql_hostname = "localhost";
$mysql_user = "root";
$mysql_password = "";
$mysql_database = "hmis";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) or die("Could not connect database");
mysql_select_db($mysql_database, $bd) or die("Could not select database");

//printf("<td align=left><font face=Verdana size=1 color=red>There are no Records</font></td>",$num); //prints number

$procedures = "SELECT * FROM incurredcharges WHERE patient_no = '$id'";
$result = mysql_query($procedures);

    if (mysql_num_rows($result) >= 1){

            $procedures = "SELECT
            `incurredcharges`.`procedure_no`,
  `c`.`procedure`

FROM
  incurredcharges
  INNER JOIN (
    SELECT `procedure`, `procedure_no` FROM `charges`
    UNION ALL
    SELECT `confinement`, `procedure_no` FROM `confinement`
    UNION ALL
    SELECT `service`, `procedure_no` FROM `ultrasound`
  ) c ON `incurredcharges`.`procedure_no` = c.`procedure_no`
WHERE `incurredcharges`.`patient_no` = '$id'";

            $result2 = mysql_query($procedures);

            echo "<p><table border=1 cellspacing=0 cellpadding=2 bordercolor=#000000 width=100%>";
            echo "<tr align=top>
            <td class=topHeadrow5><b>Procedure #</b></td>
            <td class=topHeadrow5><b>Charge Incurred</b></td></tr>";

        while($row = mysql_fetch_array($result2)){

                    echo '
                    <tr>
                        <td>'.$row[0].'</td>
                        <td>'.$row[1].'</td>'; 
                        echo "</tr>";

        }
        echo '</table>';
        }
    else {

        echo "<p><table border=1 cellspacing=0 cellpadding=2 bordercolor=#000000 width=100%>";
        echo "<tr align=top>
        <td class=topHeadrow4><b>There are no Records</b></td></tr></table>";
        return false;
        }
}

?> 
```

第二个代码用于从另一个数据库中检索的“过程”列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:49:37.530

您尚未发布任何代码，但从您的问题文本中，我可以看到您正在使用`mysql_connect()`连接到数据库。

这里首先要学习的是不要使用`mysql_xxx()`函数。这有很多原因——首先，它们已被弃用，而且它们也不安全。

您应该使用 PHP 中内置的另外两个 API：要么`mysqli`要么`PDO`.

但在这种情况下，不使用这些函数的更好理由`mysql`是它们使管理多个数据库连接变得更加困难。

另一方面，使用`mysqli`或管理多个数据库连接`PDO`非常容易。

```
$db1 = new PDO('mysql:host=xxxxx,etc',$user1,$pass1);
$db2 = new PDO('mysql:host=xxxxx,etc',$user2,$pass2);

$db1->query('SELECT * FROM table_on_db1');
$db2->query('SELECT * FROM table_on_db2'); 
```

因此，您可以根据需要保持尽可能多的连接对象处于活动状态，并且只使用适合任何给定查询的连接对象。

您可以在此处了解有关 mysqli API 的更多信息：[http ://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)

关于这里的 PDO API：http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:52:00.587

`mysql_connect()`返回您需要存储的连接标识符，然后传递给您的所有 mysql_* 函数。这就是每个脚本维护多个数据库连接的方式。

但是，mysql_* 函数已被弃用，您应该迁移到 PDO 或 mySQLi。这将有一个额外的好处，即允许您初始化和存储单独的数据库对象，而不是跟踪连接标识符。IE：

```
$db1 = new PDO('mysql:host=host1;dbname=db1', $user1, $pass1);
$db2 = new PDO('mysql:host=host2;dbname=db2', $user2, $pass2); 
```

# java - 对象到 SQL 和 SQL 到对象

> ID：14756336
> 
> 赞同：1
> 
> 时间：2013-02-07T16:43:20.190
> 
> 标签：java, sql

我想知道是否有任何方法可以从 sql 查询创建数据对象，反之亦然。

示例：这是对象：

```
public class DataObject {
int id;
String name;
} 
```

有没有办法做类似的事情：

```
DataObject[] dataObjects = methodXX("SELECT id, name from XXTABLEXX"); 
```

相反，我的意思是例如创建 DataObject，设置一些值，然后将其直接插入/更新到数据库中。

希望它看起来不会太奇怪。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:45:16.910

听起来您正在寻找[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。

对于 Java，请查看[Hibernate](http://www.hibernate.org/)框架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T16:45:24.223

您正在寻找 ORM ( [http://en.wikipedia.org/wiki/Object-relational_mapping](http://en.wikipedia.org/wiki/Object-relational_mapping) ) 框架。

例如休眠（[http://www.hibernate.org/](http://www.hibernate.org/)）。

# parameters - 没有输入参数的聚类数据

> ID：14756340
> 
> 赞同：4
> 
> 时间：2013-02-07T16:43:31.903
> 
> 标签：parameters, machine-learning, hierarchical-clustering

这更像是一个理论问题：

你知道任何不需要任何输入参数的聚类算法（平面或分层），比如聚类的数量或邻域的大小等？换句话说，您只需将数据作为输入提供给算法，然后将集群作为输出。

如果有关文件/文件的建议，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:09:57.450

在仍然被认为是开放性研究问题中，自动确定集群的数量确实是一个棘手的问题。

最先进的聚类技术之一是将您的数据建模为 Dirichlet Process Mixture 请参阅 [贝叶斯层次聚类](http://www.gatsby.ucl.ac.uk/~heller/bhcnew.pdf)，但它并非微不足道，需要贝叶斯方法和马尔可夫链蒙特卡罗 (MCMC) 估计的扎实背景。

这种方法可以自动估计聚类的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:39:01.270

通常，一旦您定义了聚类的含义，答案就会出现。这是困难的部分。

对于实值数据，我喜欢使用带有自动*h*选择的均值偏移。聚类对应于数据密度图中的模式，分组结果类似于分水岭变换。

[http://en.wikipedia.org/wiki/Mean-shift](http://en.wikipedia.org/wiki/Mean-shift)
[http://en.wikipedia.org/wiki/Kernel_density_estimation](http://en.wikipedia.org/wiki/Kernel_density_estimation)
[http://en.wikipedia.org/wiki/Multivariate_kernel_density_estimation](http://en.wikipedia.org/wiki/Multivariate_kernel_density_estimation)

# php - PHP 会默认在 Oracle OAS 上运行吗？

> ID：14756341
> 
> 赞同：2
> 
> 时间：2013-02-07T16:43:33.413
> 
> 标签：php, oracle, oas

我不完全确定是否应该在这里或 SuperUser 论坛问这个问题，但我想知道 Oracle 应用服务器是否能够默认运行 PHP 脚本。我似乎在互联网上找不到任何说法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:46:42.180

我希望这会清楚

> Oracle HTTP Server 支持 PHP 作为 mod (mod_php)。Oracle 应用服务器 10g 第 3 版 (10.1.3.1.0) 随附的版本是 PHP 5.1.2。

从[oracle doc 1.6 开始](http://www.oracle.com/technetwork/middleware/ias/ohs-101310-faq-131717.pdf)

> Oracle 在其中间层 Application Server 10g 第 3 版中包含 PHP，允许您将相同的 Web 服务器用于 PHP 和 J2EE 应用程序。
> 
> 默认情况下启用 PHP。Oracle`HTTP`服务器文档根目录是
> 
> `$ORACLE_HOME/Apache/Apache/htdocs` 此目录中带有***.php***或***.phtml***扩展名的文件将由*PHP*执行。带有 .phps 扩展名的文件将显示为格式化的源代码。
> 
> 以上引自[Oracle：PHP和Oracle](https://blogs.oracle.com/opal/entry/upgrade_php_with_oracle_applic)

# c# - 如何处理ondatabound上的空详细信息视图

> ID：14756345
> 
> 赞同：0
> 
> 时间：2013-02-07T16:43:54.527
> 
> 标签：c#, asp.net, detailsview, databound

我在 detailsview 上有记录。从 onDataBound 获取数据

```
<aasp:DetailsView ID="DetailsView1" runat="server" AllowPaging="False" 
    AutoGenerateRows="False" DataKeyNames="myID" DataSourceID="mySource"
    OnDataBound = "OnDetailsView_DataBound" > 
```

这是我的 OnDetailsView_DataBound

```
protected void OnDetailsView_DataBound(Object sender,EventArgs e)
    {
        if (DetailsView1.CurrentMode == DetailsViewMode.Edit)
        {
              //Display data in detailsview
        }
    } 
```

它还有一个删除按钮，用于删除记录。在我没有“OnDetailsView_DataBound”方法之前。所以当我删除一条记录时，它只是给我一个空白页。但是现在当我执行删除时，我得到了这个错误

> 你调用的对象是空的。

但是，数据被删除。我试图通过执行检查详细信息视图是否为空

```
if (Detailsview1.DataItemCount == 0) 
```

但没有运气。如何在详细信息视图中处理删除时的空数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:06:59.297

我自己想通了。这是我的问题的解决方案，适用于其他有同样问题的人

```
DataRowView myView = (DataRowView)DetailsView1.DataItem;
        if (myView == null)
        { 
```

# python - 通过 pip install 在 ubuntu 上安装 pysox，无法解析 sox.h

> ID：14756346
> 
> 赞同：4
> 
> 时间：2013-02-07T16:43:59.090
> 
> 标签：python, ubuntu, pip, sox

我正在尝试在 Ubuntu 12.04.2 LTS 上使用 pip 安装 pysox 包（easy_install 引发完全相同的错误）。

```
$ pip install pysox
[...]
building 'pysox.sox' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c pysox/sox.c -o build/temp.linux-x86_64-2.7/pysox/sox.o

pysox/sox.c:227:17: fatal error: sox.h: No such file or directory 
```

我的系统已安装：

```
$ dpkg --list | grep sox
ii  libsox-fmt-all      14.3.2-3    All SoX format libraries
ii  libsox-fmt-alsa     14.3.2-3    SoX alsa format I/O library
ii  libsox-fmt-ao       14.3.2-3    SoX Libao format I/O library
ii  libsox-fmt-base     14.3.2-3    Minimal set of SoX format libraries
ii  libsox-fmt-ffmpeg   14.3.2-3    SoX ffmpeg format library
ii  libsox-fmt-mp3      14.3.2-3    SoX MP3 format library
ii  libsox-fmt-oss      14.3.2-3    SoX OSS format I/O library
ii  libsox-fmt-pulse    14.3.2-3    SoX PulseAudio format I/O library
ii  libsox1b            14.3.2-3    SoX library of audio effects and processing
ii  sox                 14.3.2-3    Swiss army knife of sound processing 
```

以及`libasound2-plugins`和`libasound2-python`包。我什至提取了 SoX 源并将 ~/sox/src/sox.h 添加到 my`PATH`中，但均无济于事。确实，a`find`没有找到 sox.h，尽管我的二进制文件看起来都井然有序。pysox 源似乎也不包含 sox.h。

pysox[官方页面](http://pypi.python.org/pypi/pysox)指出“特别是您的包含路径中需要 sox.h，链接路径中需要 libsox.so 和 libsox.a。”

但是除了从源代码编译所有内容之外，我看不到如何仅从二进制包中获取这些文件。是否可以使用普通的包管理器进行此安装，我是否需要自己编译、链接和包含所有内容？

如何在 Debian/Ubuntu 上正确安装 pysox？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-09-28T16:30:16.057

如果有帮助，我遇到了同样的问题，但使用时出错：

```
sudo apt-get install libasound2-plugins libasound2-python libsox-fmt-all libsox-dev sox 
```

我确实通过放弃似乎不再可用的 libasound 请求让它工作了。

这对我有用......我认为这个过程是：

```
pip3 install sox

sudo apt-get install sox libsox-fmt-all 

sudo apt-get install sox libsox-dev 

pip3 install pysox 
```

我只花了大约 11 个小时来解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T12:51:38.477

好的，这是意料之中的：忘记安装 SoX 的开发包，即 libsox-dev。起初对我来说并不明显，因为标准包是 sox，而 lib 包都以 libsox-fmt 开头（关于这方面的文档很少）。

无论如何，这是您在 Debian 机器上为 pip/easy_install 准备好适当文件所需的一切，以便为 SoX 正确打包管理您的模块：

```
sudo apt-get install libasound2-plugins libasound2-python libsox-fmt-all libsox-dev sox 
```

# c++ - 两次调用 EnumServicesStatusEx() 时，我仍然在 C++ 中得到 EROR_MORE_DATA

> ID：14756347
> 
> 赞同：1
> 
> 时间：2013-02-07T16:44:00.543
> 
> 标签：c++, winapi, msdn

我在我的代码中调用 EnumServicesStatusEx() 两次，第一次应该失败并将正确的缓冲区大小放在 dwBuffNeeded 中，这样当我第二次调用它时，缓冲区大小应该是正确的。但是，有时，在第二次通话后，我并不总是得到 ERROR_MORE_DATA 。任何想法为什么？谢谢

```
DWORD pId=GetCurrentProcessId();
    SC_HANDLE hSCM    = NULL;
    PUCHAR  pBuf    = NULL;
    ULONG  dwBufSize   = 0x00;
    ULONG  dwBufNeed   = 0x00;
    ULONG  dwNumberOfService = 0x00;
    LPENUM_SERVICE_STATUS_PROCESS pInfo = NULL;

    hSCM = OpenSCManager( NULL, NULL, SC_MANAGER_ENUMERATE_SERVICE | SC_MANAGER_CONNECT );

    if (hSCM == NULL)
    {
        GetCustomLog().Log( SV_ERROR, 10004807, "Could not open Service Control Manager: %s", GetLastOSErrorString().c_str() );
        return;
    }

    //Query services once to get correct buffer size, always fails
    if ( EnumServicesStatusEx(
        hSCM,
        SC_ENUM_PROCESS_INFO,
        SERVICE_WIN32, 
        SERVICE_ACTIVE,
        NULL,
        dwBufSize,
        &dwBufNeed,
        &dwNumberOfService,
        NULL,
        NULL) == 0 )
    {

        DWORD err = GetLastError();
        if ( ERROR_MORE_DATA == err )
        {
            dwBufSize = dwBufNeed + 0x10;
            pBuf  = (PUCHAR) malloc(dwBufSize);

            //Query services again with correct buffer size
            if ( EnumServicesStatusEx(
                hSCM,
                SC_ENUM_PROCESS_INFO,
                SERVICE_WIN32, 
                SERVICE_ACTIVE,
                pBuf,
                dwBufSize,
                &dwBufNeed,
                &dwNumberOfService,
                NULL,
                NULL ) == 0 )

            {
//FAILS HERE
                GetCustomLog().Log( SV_ERROR, 10004808, "Could not enumerate services, error: %s", GetLastOSErrorString().c_str() );
                free(pBuf);
                return;
            }
        }
        else
        {
            GetCustomLog().Log( SV_ERROR, 10004809, "Could not enumerate services, error: %s", GetLastOSErrorString().c_str() );
            return;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T15:42:25.333

我也遇到了同样的问题，但是在查询 SERVICE_STATE_ALL 时，我认为每次调用都需要相同数量的内存（除非已安装/卸载服务）。仅使用 pcbBytesNeeded 参数中返回的大小的缓冲区重试是不够的：

```
BOOL WINAPI EnumServicesStatusEx(
  _In_         SC_HANDLE hSCManager,
  _In_         SC_ENUM_TYPE InfoLevel,
  _In_         DWORD dwServiceType,
  _In_         DWORD dwServiceState,
  _Out_opt_    LPBYTE lpServices,
  _In_         DWORD cbBufSize,
  _Out_        LPDWORD pcbBytesNeeded,
  _Out_        LPDWORD lpServicesReturned,
  _Inout_opt_  LPDWORD lpResumeHandle,
  _In_opt_     LPCTSTR pszGroupName
); 
```

与其他 WIN32 API 调用不同，这不是返回所需的绝对字节数，而是相对于 cbBufSize 参数所需的*额外字节数。*作为一个实验，我故意提供了一个小缓冲区，并且每次都将其翻倍，以找出系统将在 pcbBytesNeeded 中返回什么作为响应。在这个系统上 sizeof(ENUM_SERVICE_STATUS_PROCESS) 是 56 字节。最后一行是导致成功调用的最小缓冲区。

```
+-----------+----------------+
| cbBufSize | pcbBytesNeeded | 
+-----------+----------------+
|      112  |         37158  |
|      224  |         37013  |
|      448  |         36766  |
|      896  |         36374  |
|     1792  |         35280  |
|     3584  |         33202  |
|     7168  |         28972  |
|    14336  |         20765  |
|    28672  |          4215  |
|    32032  |             0  |
+-----------+----------------+ 
```

您可以看到每一行粗略地加起来所需的缓冲区大小，而且就系统而言，所需的缓冲区大小也不是很可预测。本例调用成功返回的服务条目数为233，只需要13048字节。事实证明，由 ENUM_SERVICE_STATUS_PROCESS lpDisplayName 和 lpServiceName 指针指向的字符串只是存储在提供的缓冲区的尾部（我一直想知道它们的支持在哪里，为什么它是稳定的并且不需要分开释放）。无论如何，这解释了一些不确定的响应以及奇数：系统可能具有不适合的当前条目并且确切地知道它需要多少大小，但猜测其余部分。

下面的代码是可靠的，通常只需要两个调用，但有时可能需要三个（即使使用 SERVICE_STATE_ALL）。我不知道为什么需要三个，系统的低估一次会持续几分钟，但最终会自行解决。我从来没有见过它需要四个电话。

```
int EnumerateAllServices(SC_HANDLE hSCM) {
  void* buf = NULL;
  DWORD bufSize = 0;
  DWORD moreBytesNeeded, serviceCount;
  for (;;) {
    printf("Calling EnumServiceStatusEx with bufferSize %d\n", bufSize);
    if (EnumServicesStatusEx(
        hSCM,
        SC_ENUM_PROCESS_INFO,
        SERVICE_WIN32,
        SERVICE_STATE_ALL,
        (LPBYTE)buf,
        bufSize,
        &moreBytesNeeded,
        &serviceCount,
        NULL,
        NULL)) {
      ENUM_SERVICE_STATUS_PROCESS* services = (ENUM_SERVICE_STATUS_PROCESS*)buf;
      for (DWORD i = 0; i < serviceCount; ++i) {
        printf("%s\n", services[i].lpServiceName);
      }
      free(buf);
      return 0;
    }
    int err = GetLastError();
    if (ERROR_MORE_DATA != err) {
      free(buf);
      return err;
    }
    bufSize += moreBytesNeeded;
    free(buf);
    buf = malloc(bufSize);
  }
} 
```

“+=”是“技巧”，并没有很清楚地记录（但是，事后看来，我现在理解了 MSDN 对 pcbBytesNeeded 参数的解释中的细微差别）：

```
pcbBytesNeeded [out]

    A pointer to a variable that receives the number of bytes
    needed to return the remaining service entries, if the buffer
    is too small. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-22T19:24:24.563

因为服务信息不是静态的，理论上任何事情都可能发生在两次调用之间`EnumServicesStatusEx()`，所以最好迭代地使用这个 API。

正如 Kat Marsen 建议的那样，您当然可以反复尝试获取所有服务（只要 API 返回 ERROR_MORE_DATA，就循环和增长缓冲区）。
但这有两个缺点：

1.  你告诉 SCM 不断填写它实际上已经发回给你的信息（即使它相当罕见，我实际上想避免它）。
2.  根据 MSDN 文档，缓冲区的硬上限为 256K 字节。正如我在上面的评论中提到的，后者实际上不太可能；作为程序员，您仍然想安全行事。

## 迭代方法

相反，我们只能假设 IMO 负责 EnumServicesStatusEx() 的作者有理由这样设计它：

*   一个缓冲区，如果有效且足够大，至少可用于一项服务，则立即填充。
*   SCM 为尚未迭代的服务假定的剩余字节的输出参数。
*   最重要的是，有一个输出参数告诉您恢复点。

恢复点和剩余点都允许更容易的迭代方法。

让我展示完整的真实世界功能，工作得相当好，并展示一些 C++ 好东西。
`chunk_fetch_all_win32_services`预先分配一些内存，为每个块调用一个回调，并让回调决定它是消耗内存还是离开它以便重用。
`enum_all_win32_services`消耗每个块，然后为每个单独的服务调用回调。

```
#include <type_traits>
#include <memory>
#include <stddef.h>
#include <Windows.h>

using std::unique_ptr;
using std::error_code;
using std::system_error;
using std::system_category;
using std::function;
using std::make_unique;

/** @short Fetch all win32 services in chunks.

    This function fetches all services of type `SERVICE_WIN32=(SERVICE_WIN32_OWN_PROCESS | SERVICE_WIN32_SHARE_PROCESS)`,
    in chunks as decided by the SCM (refer to EnumServicesStatusEx()).

    @param scmHandle Handle to the SCM with access right SC_MANAGER_ENUMERATE_SERVICE
    @param stateMask One of SERVICE_ACTIVE, SERVICE_INACTIVE, SERVICE_STATE_ALL
    In the callback you can decide whether you want to consume the passed memory or leave
    it in order to be reused.

    @note This is most probably rare but expect the callback being invoked multiple times
    in case the SCM didn't return information about all services at once.
 */
bool chunk_fetch_all_win32_services(SC_HANDLE scmHandle, DWORD stateMask, const function<bool(unique_ptr<ENUM_SERVICE_STATUS_PROCESS[]>&, DWORD /*nServices*/)>& cb, error_code* ec)
{
    // (optionally) preallocate
    // (the amount stems from Win XP's upper size of 64k;
    //  on a typical Win7 system there are about 220 services (about 34k))
    unique_ptr<BYTE[]> mem = make_unique<BYTE[]>(64 * 1024);
    DWORD nAllocated = 64 * 1024, nRemaining;
    DWORD resumePoint = 0;
    do
    {
        DWORD nServices;
        if (!EnumServicesStatusEx(scmHandle, SC_ENUM_PROCESS_INFO, SERVICE_WIN32, stateMask, mem.get(), nAllocated, &nRemaining, &nServices, &resumePoint, nullptr))
        {
            const int errorCode = GetLastError();
            if (errorCode != ERROR_MORE_DATA)
            {
                if (!ec)
                    throw system_error{ errorCode, system_category(), "Can't enumerate services" };
                ec->assign(errorCode, system_category());
                return false;
            }
        }

        if (nServices)
        {
            // memory initialized, transfer ownership to typed pointer
            unique_ptr<ENUM_SERVICE_STATUS_PROCESS[]> cache{ LPENUM_SERVICE_STATUS_PROCESS(mem.release()) };
            if (!cb(cache, nServices))
                // early bail-out requested
                return true;

            // document that the typed pointer can be 'downgraded' again without the need to destroy objects
            static_assert(std::is_trivially_destructible_v<ENUM_SERVICE_STATUS_PROCESS>);
            // possibly reuse existing buffer
            mem.reset(PBYTE(cache.release()));
        }

        if (nRemaining)
        {
            // re-allocate if buffer too small or consumed by callback
            if (!mem || nAllocated < nRemaining)
                mem = make_unique<BYTE[]>(nRemaining),
                nAllocated = nRemaining;
        }

        // loop as long as there are more services to be enumerated
    } while (nRemaining);

    return true;
}

/** @short Enumerate all win32 services.

    This function enumerates all services of type `SERVICE_WIN32=(SERVICE_WIN32_OWN_PROCESS | SERVICE_WIN32_SHARE_PROCESS)`.

    @param scmHandle Handle to the SCM with access right SC_MANAGER_ENUMERATE_SERVICE
    @param stateMask One of SERVICE_ACTIVE, SERVICE_INACTIVE, SERVICE_STATE_ALL
    @param cb Callback receiving process information of a single service process information and the number of services.

    @note This is most probably rare but expect the number of services passed to the callback to change
    in case the SCM didn't return information about all services at once; if, then this of course happens
    after the provided number of information items have been iterated.
 */
bool enum_all_win32_services(SC_HANDLE scmHandle, DWORD stateMask, const function<bool(ENUM_SERVICE_STATUS_PROCESS&, DWORD /*nServices*/)>& cb, error_code* ec)
{
    return chunk_fetch_all_win32_services(scmHandle, stateMask, [&cb](unique_ptr<ENUM_SERVICE_STATUS_PROCESS[]>& cache, DWORD nServices)
    {
        for (size_t idx = 0; idx < nServices; ++idx)
        {
            if (!cb(cache[idx], nServices))
                // early bail-out requested
                return true;
        }

        return true;
    }, ec);
} 
```

# iphone - 在分组的表格单元格内安装一个按钮

> ID：14756349
> 
> 赞同：1
> 
> 时间：2013-02-07T16:44:08.157
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我正在尝试使按钮适合分组表格单元格的边界。您可能知道，分组的表格视图在单元格的左侧和右侧都有边距。但是，单元格的边界就好像这些边距不存在一样。我可以对框架进行硬编码，但我很好奇是否有更好的方法可以将按钮放入分组表的单元格边界内。

这是我当前的设置...我还在这里阅读了另一篇文章来尝试自动调整大小的蒙版，但这也不起作用。

```
 SubmitButton *search = tableValues.key; //pulling my button object from an array
        search.frame = cell.bounds;
        cell.clipsToBounds=YES;
        [cell addSubview:search]; 
```

这样，按钮的边缘仍然延伸到单元格的边缘之外。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:02:33.117

子视图应该添加到单元格的 contentView 中，而不是直接添加到单元格中。单元格的框架是表格视图的整个宽度，即使是分组表格也是如此。单元格的 contentView 大小适当，以考虑普通与分组以及各种单元格装饰，如删除图标、重新排序句柄和披露指示符。

将按钮的框架调整为 并将按钮`contentView`添加到`contentView`。

# python - python-keyring 如何在 Windows 上实现？

> ID：14756352
> 
> 赞同：17
> 
> 时间：2013-02-07T16:44:16.910
> 
> 标签：python, windows, security, python-keyring

python-keyring 如何在 Windows 上提供安全性？

在 Linux 上的 GNOME/KDE 中，系统会提示用户输入他的密码，以根据每个应用程序授权访问密钥环。

在 Windows 中，当应用程序访问密钥环时没有这样的提示。什么是阻止随机 python 应用程序通过运行从密钥环中检索密码

```
import keyring
get_password(service, username) 
```

用户同意如何实施？整个概念，至少在 Windows 中，是否基于所有已安装程序都是“受信任”的假设？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-06-11T14:30:41.713

稍微研究一下，密码似乎存储在 Windows Credential Vault 中，这相当于 Gnome 或 KDE 密钥环。您实际上可以通过打开 Windows 凭据管理器查看已存储的那些。我只需`Credential Manager`从开始屏幕输入 Windows 8.1 即可到达那里，但我认为您也可以从用户帐户页面访问它。

无论如何，正如您从所附图像中看到的那样，我作为测试添加到密钥环的密码显示在`Windows Credentials` `->` `Generic Credentials` `->` `keyring_demo`. 在 PC 上以其他用户身份打开此窗口不会显示此密码，因此它似乎对其他用户是安全的。此屏幕还允许您撤销或更改密码。

![Windows 凭据管理器](../Images/9d50d79008a4c1f99538f9b03159488f.png)

至于如何实现同意，我相信`keyring`只要您的 Windows 用户帐户登录就可以运行，但我不知道具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-13T21:48:46.853

凭证管理器方法有效，但在我的情况下添加：

*   互联网或网络地址“myPassGroup”
*   用户名“pass1”
*   密码“xxx”

然后使用相同的网络地址添加另一个条目

*   互联网或网络地址“myPassGroup”
*   用户名“pass2”
*   密码“xxx”

pass2 将覆盖第一个条目***pass1***！这是一个主要缺点，因为“互联网或网络地址”在密钥环中用作组名，我需要将多个密码放在同名下

我的解决方案是直接使用python命令

*   在 Windows 中打开 CMD
*   键入 Python
*   然后输入导入密钥环
*   然后输入 keyring.set_password("groupName", "passKey" ,"password")
*   然后输入 keyring.set_password("groupName", "passKey2" ,"password2")

您可以通过以下方式验证结果

*   keying.get_password("groupname", "passKey")
*   keying.get_password("groupname", "passKey2")

我知道这会起作用，但仍然很难找到实际数据的保存位置

我使用以下命令尝试找出

*   python -c“导入keyring.util.platform_；打印（keyring.util.platform_.config_root（））”

*   python -c "导入 keyring.util.platform_; print(keyring.util.platform_.data_root())"

在我的情况下，data_root 是“C:\Users\JunchenLiu\AppData\Local\Python Keyring” 我检查了文件夹，它不存在......它必须保存在某个地方。也许有人可以弄清楚。

但我的解决方案应该可以在 Windows 上完美运行

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2013-09-24T04:14:08.200

```
from keyring.backend import KeyringBackend

class SimpleKeyring(KeyringBackend):
    """Simple Keyring is a keyring which can store only one
    password in memory.
    """
    def __init__(self):
        self.password = ''

    def supported(self):
        return 0

    def get_password(self, service, username):
        return self.password

    def set_password(self, service, username, password):
        self.password = password
        return 0

    def delete_password(self, service, username):
        self.password = None 
```

# java - 与 Eclipse 的 Java JDBC 连接

> ID：14756356
> 
> 赞同：0
> 
> 时间：2013-02-07T16:44:24.930
> 
> 标签：java, eclipse, jdbc

我正在尝试在我的 Linux PC 上的以下链接[http://code.google.com/p/sqlite-jdbc/的帮助下连接 SQLite 数据库。](http://code.google.com/p/sqlite-jdbc/)

当我通过命令行尝试时一切正常（根据该链接）。由于我的完整项目已插入 Eclipse ，因此我尝试将其添加`sqlite-jdbc-3.5.7.jar`到 eclipse Project --> Properties --> Java Build Path。

但是当我尝试运行应用程序时出现以下错误`java.lang.NoClassDefFoundError: org/ibex/classgen/CGConst .`

有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:22:40.890

sqlite-jdbc-3.5.7.jar 中不存在类 org/ibex/classgen/CGConst。当您使用数据库连接时，请检查项目以确保类路径配置（可能是版本冲突）和类中的导入。

# android - 来自移动设备请求的 IP 地址

> ID：14756357
> 
> 赞同：0
> 
> 时间：2013-02-07T16:44:28.017
> 
> 标签：android, ios, web-services, mobile, asp.net-web-api

如果移动应用程序（不是移动浏览器）正在向 Web 服务发出请求：

1.  如何找到 IP 地址（是否在`Request`对象中？）
2.  如果移动设备正在使用移动网络（例如：Verizon），IP 地址是来自提供商的 IP 地址吗？
3.  如果移动设备使用Wifi，IP地址是无线路由器的吗？
4.  此外，如果我将设备 A（例如在 Tmobile 上）设置为 wifi 热点并连接设备 B（在 Verizon 上）并发出请求，会发生什么情况。对象中发送的 IP 地址是什么`Request`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:45:23.413

1）试试这个：

```
string ipAddress = HttpContext.Current.Request.UserHostAddress; 
```

注意：这在自托管中不起作用，仅在网络托管中起作用。

2）服务器看到的IP地址将与移动网络相关联。随着手机移动并重新连接到网络，IP 地址也会随着时间而改变。

3）是的，服务器看到的IP地址将是路由器的IP地址。

4) IP 地址将再次与移动网络关联。服务器获取的 IP 地址将与服务器看到的带有 wifi 热点的手机的 IP 地址相同。电话实际上变成了路由器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T02:02:43.970

比这更复杂——运营商现在拥有“on the fly NAT”。就您的设备而言，您的连接可能是稳定的，具有已知地址，但相关服务可能会看到不同的 IP 地址/端口组合，甚至是 IPv4 或 IPv6 组合，如果运营商选择这样做，则逐个请求。鉴于 IPv4 地址短缺，需要应用内容过滤器（法律要求）、CALEA 等，您很少能“直接连接”到 Internet。

# objective-c - 函数在视图加载之前运行

> ID：14756358
> 
> 赞同：1
> 
> 时间：2013-02-07T16:44:28.500
> 
> 标签：objective-c, xcode

我想在视图加载之前运行一个函数，我尝试过`initWithNibName`但没有成功。有什么函数在渲染之前加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:49:59.710

这样做`loadView`：

```
- (void)loadView {
    [self myImportantMethod];

    [super loadView];
} 
```

这可以确保`myImportantMethod`在加载视图控制器的视图之前调用您的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:51:54.440

你试过initWithFrame吗？根据我的经验，*其中一个*是首先调用的。

# html - 带有 html5 和 CANCEL 按钮的 Symfony2 表单验证

> ID：14756362
> 
> 赞同：7
> 
> 时间：2013-02-07T16:44:37.987
> 
> 标签：html, validation, symfony, twig

我在 Symfony2 上有一个联系表，其中我将一些验证器作为电子邮件、minLength 等。所有这些字段也设置为 notBlank。

因此，HTML5 也在验证这些字段（对于电子邮件而不是空白），这对我来说很好。

我有一个提交按钮：

```
<input type="submit" value="Submit"/> 
```

**问题是**我有另一个提交按钮，它是一个取消按钮：

```
<input name="cancel" type="submit" value="Cancel" /> 
```

使用此按钮，在我的控制器中，我正在执行重定向：

```
if( $request->get('cancel') == 'Cancel' )
    return  $this->redirect($this->generateUrl('SciForumVersion2Bundle_homepage')); 
```

现在，由于 HTML5 验证，我无法重定向，因为例如字段为空。

为了解决这个问题，我找到了两种解决方案，但我不喜欢它们：

1.  禁用 HTML 5 验证：

    ```
    <form novalidate> 
    ```

2.  使用 JavaScript

但正如我所说，我不喜欢这些方法，而且我确信有一些不错的 Symfony 方法可以解决这个问题。

任何想法？非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-07T20:34:41.810

使用以下命令专门为取消按钮禁用表单验证`formnovalidate`：

```
<input name="cancel" type="submit" value="Cancel" formnovalidate/> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-02T14:58:59.447

我看到这是一个较旧的线程，但我想提供一个替代解决方案，以防其他人发现它有用。我对这个主题的其他答案不满意，因为我想做三件事：

*   不必在每个视图模板中进行任何自定义表单渲染（我喜欢使用`{{ form(form) }}`）
*   让取消按钮出现在提交按钮旁边（令人惊讶的是，如果你不进行自定义渲染，symfony 默认将所有表单按钮包装在一个 div 标签中）
*   能够将取消操作设置为*控制器中的*一个选项，因为链接会根据我是添加还是编辑等而有所不同

我想在应用 DRY 原则的同时完成这一切。首先，我扩展了基本表单类型以允许自定义选项“cancel_action”：

```
<?php
namespace AcmeBundle\Form\Extension;

use Symfony\Component\Form\AbstractTypeExtension;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormView;
use Symfony\Component\OptionsResolver\OptionsResolver;

class FormTypeExtension extends AbstractTypeExtension
{
    /**
     * {@inheritdoc}
     */
    public function configureOptions(OptionsResolver $resolver)
    {
        parent::configureOptions($resolver);

        $resolver->setDefined('cancel_action');
        $resolver->setAllowedTypes('cancel_action', 'string');
    }

    /**
     * {@inheritdoc}
     */
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        parent::buildView($view, $form, $options);

        if (isset($options['cancel_action'])) {
            $view->vars['cancel_action'] = $options['cancel_action'];
        }
    }

    /**
     * {@inheritdoc}
     */
    public function getExtendedType()
    {
        return 'form';
    }
} 
```

并在我的配置中注册了该表单类型扩展名（使用别名“form”，以便它可用于我的所有表单）：

```
acme.form_type_extension:
    class: AcmeBundle\Form\Extension\FormTypeExtension
    tags:
        - {name: form.type_extension, alias: form} 
```

然后我使用表单主题来扩展基本表单视图（我扩展了 submit_widget 块，以便取消按钮位于 div 标签内的提交按钮旁边）：

```
{# AcmeBundle:Form:fields.html.twig #}

{% extends 'form_div_layout.html.twig' %}

{%- block submit_widget -%}
    {%- set type = type|default('submit') -%}
    {{ block('button_widget') }}
    {% if form.parent.vars.cancel_action is defined %}
        <a class="btn btn-default" href="{{ form.parent.vars.cancel_action }}" role="button">Cancel</a>
    {% endif %}
{%- endblock submit_widget -%} 
```

并在我的 twig 配置中注册了该表单主题，以便它默认应用于所有表单视图：

```
twig:
    form_themes:
        - 'AcmeBundle:Form:fields.html.twig' 
```

瞧！现在对于每个表单，如果我想要一个取消按钮，我需要做的就是在控制器中初始化表单时将取消操作指定为一个选项：

```
$form = $this->createForm(new AlbumType(), $album, array(
    'cancel_action' => $this->generateUrl('album_home')
)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T08:30:33.147

我恢复我的评论:)

当处理表单（HTML5 与否）并且您想退出时，您不需要提交和验证任何数据您只需放置一个简单的 href 链接即可更改页面。使用你最喜欢的 css 样式来拥有相同的外观

提示：当用户更改输入值时，您可以收听 javascript 事件**“onbeforeunload” 。**它提醒用户他将退出页面

希望它有所帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-04T22:32:06.683

```
->add('cancel', 'submit', array(
            'label' => 'Cancel',
            'attr' => array(                       
                    'formnovalidate'=>'formnovalidate'
            ) 
    )) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-19T09:30:38.437

**我们可以通过formnovalidate**使用 HTML5 required 属性轻松禁用表单验证

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-08T14:07:24.180

你也可以这样做：

```
<button name="cancel" type="submit" value="Cancel" formnovalidate>Cancel</button> 
```**

# python - 如何在 OpenERP 中连接到不同的数据库？

> ID：14756365
> 
> 赞同：1
> 
> 时间：2013-02-07T16:45:03.027
> 
> 标签：python, xml-rpc, openerp

如何根据正在使用的模块连接到不同的数据库？我们的场景如下：

我们有一个独立的应用程序，它在某个服务器上拥有自己的数据库，而 OpenERP 在不同的服务器上运行。我们想在 OpenERP 中创建一个模块，它可以利用独立应用程序服务器上的实体，而不是在自己的数据库中创建自己的实体，这可能吗？我们如何更改 ORM 用来连接自己的数据库的连接参数以指向不同的数据库？

当然，一种方法是使用 base_synchro 模块在两个数据库之间同步所需的实体，但考虑到数据量很大，我们不希望重复。另一种方法是使用 xmlrpc 将数据导入 OpenERP，但这仍然需要实体存在于 OpenERP 数据库中。

我们如何在不重复数据的情况下解决这个问题？如何基于不同的数据库创建 OpenERP 中的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:13:56.763

连接到外部应用程序的一种方法是创建*连接器*模块。已经有几个连接器模块可供您查看：

*   雷鸟和 Outlook 插件
*   joomla 和 magento 模块
*   “事件moodle”模块

例如，joomla 连接器使用 joomla 插件来处理 OpenERP 和 joomla 之间的通信。使用的通信协议是 XML-RPC，但您可以选择任何您想要的协议。您甚至可以选择使用 psycopg2 模块直接连接到外部数据库（如果外部数据库使用 Postgresql），但不建议这样做。但是，如果此外部应用程序没有连接 API，您可能别无选择。

您需要了解连接到此外部应用程序的可用方法并选择其中一种。一旦您选择了正确的协议，您就可以创建您的 OpenERP 模块。

您可以使用 osv.TransientModel 对象（以前称为 osv 内存）映射存储在外部应用程序上的实体。与这些对象相关的表仍将在 OpenERP 数据库中创建，但数据是易变的（一段时间后删除）。

# asterisk - 我正在使用 Misc Destination 将来电转接到外部目的地（在我的星号之外）

> ID：14756372
> 
> 赞同：0
> 
> 时间：2013-02-07T16:45:19.720
> 
> 标签：asterisk

我在 Freepbx 上创建了一个带有目标外部号码的“Misc Destination”，然后添加了一个入站路由，该路由将所有来电转发到该 DID 到“Misc Destination”中定义的号码

我有一些问题：1.星号上的“Misc Destination”的配置文件在哪里 2.星号上的所有入站路由的配置文件在哪里 3.如果我收到对我的星号的来电并且我使用它将呼叫转接到另一个外部号码（不在我的星号中）的方法，该号码将在该呼叫中被收费（$$）？？？

请帮助我，我是星号的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:50:02.553

1.  /etc/asterisk.extensions_additional.conf
2.  与#1 相同
3.  通话付费给您，您付费拨打下一站（外部号码）

# javascript - 以下内容的“鼠标悬停”等价物是什么？

> ID：14756380
> 
> 赞同：-2
> 
> 时间：2013-02-07T16:45:38.843
> 
> 标签：javascript, jquery, click, mouseover

以下代码有效，但不是单击“容器”div 部分，而是希望该函数由`mouseover`事件触发。我应该`.click`在下面替换什么？

```
$('.container').click(function() {     
    $('.menuBar div').hide(); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:48:01.963

只需替换[`click`](http://api.jquery.com/click/)为[`mouseover`](http://api.jquery.com/mouseover/)... 你可以自己考虑一下：

```
$('.container').mouseover(function() { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:47:50.043

这应该有效。

```
$('.container').on('hover', function() {     
    $('.menuBar div').hide(); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:47:36.030

像这样 ？

```
$('.container').hover(function() {     
    $('.menuBar div').toggle();
}); 
```

如果您不希望鼠标离开时 div 再次可见`.container`，请使用`hide`代替`toggle`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T16:47:54.303

您实际上正在寻找鼠标悬停：

[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

# java - 需要另一个访问 1 个 java 类的方法

> ID：14756383
> 
> 赞同：1
> 
> 时间：2013-02-07T16:45:56.207
> 
> 标签：java, android

我正在尝试通过另一个 java 类从 java 类访问方法。我已经创建了该类的对象并将该类导入我的 java 类，但我无法访问我的代码。

```
 package com.example.musicplayer;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import android.R.string;

import android.app.ListActivity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.provider.MediaStore.Audio.Playlists;
import android.test.suitebuilder.TestSuiteBuilder.FailedToCreateTests;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

        public class MainActivity extends ListActivity {

    public static final String MEDIA_PATH = new String("/sdcard/");
    private List<String> songs = new ArrayList<String>();
    public MediaPlayer mp = new MediaPlayer();
    private int currentPosition = 0;

    public MediaPlayer getmp(){
        return mp;
    }
    public void setmp(MediaPlayer mp){
        this.mp = mp;
    }

       @Override
          protected void onCreate(Bundle icicle) {
             super.onCreate(icicle);
           setContentView(R.layout.activity_main);
         updateSongList();         
     }

            private void updateSongList() {
        // TODO Auto-generated method stub
        File home = new File(MEDIA_PATH);
        if(home.listFiles(new Mp3Filter()).length > 0){
            for(File file: home.listFiles(new Mp3Filter())){
                songs.add(file.getName());
            }
          }
                ArrayAdapter<String> songList = new ArrayAdapter<String>(this, R.layout.song_item, songs);

        setListAdapter(songList);
      }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id){
        currentPosition = position;
        playSong(MEDIA_PATH + songs.get(position));

        //Toast.makeText(getApplicationContext(), songs.get(position).toString(), Toast.LENGTH_SHORT).show();

        final String songName = songs.get(position).toString();
        //final TextView textchange = (TextView) v.findViewById(R.id.current_song_name);

        Intent in = new Intent(this, current_song.class);
        in.putExtra("song_name", songName);
        startActivity(in);

        //Toast.makeText(getApplicationContext(), "End of Song List", Toast.LENGTH_SHORT).show();       
        //textchange.setText(songName);
    }

    private void playSong(String songPath) {
        // TODO Auto-generated method stub

        try{

            mp.reset();
            mp.setDataSource(songPath);
            mp.prepare();
            mp.start();

            mp.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                    // TODO Auto-generated method stub
                    auto_nextSong();
                }               
            });

        }
        catch (Exception e) {
            // TODO: handle exception
        }

    }

    public void pause(){
        mp.pause();
    }

    public void stop(){

        mp.stop();
    }

    public void next(){ 
        Toast.makeText(getApplicationContext(), "In Next()", Toast.LENGTH_SHORT).show();
        if(currentPosition < songs.size()){
            currentPosition = currentPosition + 1;
            playSong(MEDIA_PATH + songs.get(currentPosition));
        }
    }

    public void prv(){
        if(currentPosition > songs.size()){
            currentPosition = currentPosition - 1;      
            playSong(MEDIA_PATH + songs.get(currentPosition));
        }
    }

    private void auto_nextSong() {
        // TODO Auto-generated method stub
        if(++currentPosition >= songs.size()){
            currentPosition = 0;
            Toast.makeText(getApplicationContext(), "End of Song List", Toast.LENGTH_SHORT).show();
        }
        else{
            playSong(MEDIA_PATH + songs.get(currentPosition));
            Toast.makeText(getApplicationContext(), "Next Song", Toast.LENGTH_SHORT).show();
        }
    }

     } 
```

从上面的类我试图访问 pause() 和 stop()

这是我要访问的课程

```
package com.example.musicplayer;

     import com.example.musicplayer.MainActivity;
             import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

        public class current_song extends Activity implements OnClickListener{

     public MainActivity ma;
     protected void onCreate(Bundle icicle, MainActivity ma) {

         Bundle extra = getIntent().getExtras();

         super.onCreate(icicle);
         setContentView(R.layout.songplay_page);

         if(extra != null){
             String song_name = extra.getString("song_name");
             TextView textchange = (TextView)findViewById(R.id.current_song_name);
             textchange.setText(song_name);
             textchange.setSelected(true);
         }       

         //MainActivity ma = ((MainActivity)getApplicationContext());
         //MediaPlayer mp = ma.getmp();

         this.ma = ma;
         Button btn_pause = (Button)findViewById(R.id.pause_btn);
         btn_pause.setOnClickListener(this);    

         Button btn_next = (Button)findViewById(R.id.next_btn);
         btn_next.setOnClickListener(this);

         Button btn_prv = (Button)findViewById(R.id.prv_btn);
         btn_prv.setOnClickListener(this);

         Button btn_stop = (Button)findViewById(R.id.stop_btn);
         btn_stop.setOnClickListener(this);

     }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        //Toast.makeText(getApplicationContext(), "In Onclick ()", Toast.LENGTH_SHORT).show();
        switch(v.getId())
        {
            case R.id.pause_btn:
                ((MainActivity)ma).pause();
            break;

            case R.id.next_btn:
                //ma.next();
            break;

            case R.id.prv_btn:
                //ma.prv();
            break;

            case R.id.stop_btn:
                ((MainActivity)ma).stop();
            break;
        }

    }

       } 
```

这个概念是我想停下来，暂停正在播放的音乐。如果我的逻辑我错了，请指导我如何去做，否则请帮助我如何在 Current music java 类中控制我当前的音乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:51:53.353

请把你所有的音乐播放代码移到服务中。活动不是这样工作的。

考虑以下内容： [http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle) [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:07:15.527

我认为你是 android 新手，但没问题：你不能像这样从任何其他类调用活动的函数（Object.method();）

所以对于这种类型的处理，您应该创建一个`inner Handler class`which`extends Handler inside your MainActivity.`并覆盖它的 onHandle(message msg){} 方法。

和`When You start current_song activity pass this handler object in the intent.`

当您想从 MainActivity 执行任何任务时（例如停止、暂停），`pass messages through that handler`例如`object.sendmessage(new msgObject("stop"));`

和`inside you onHandle() method call your stop or pause methods through diffrentiating command received from the message object.`

喜欢`if(message's content == stop) MainActivity.this.stop();`

# ios - 在IOS中解析多个json

> ID：14756384
> 
> 赞同：0
> 
> 时间：2013-02-07T16:45:56.427
> 
> 标签：ios, objective-c, json, parsing

对于我的代码，我遵循此链接[http://www.youtube.com/watch?v=RJZcD3hfs3k](http://www.youtube.com/watch?v=RJZcD3hfs3k)上的说明并成功，
但我想修改为多个 JSON 并失败（如果我打印日志，它正在运行）。

我修改：

```
- (void)viewDidLoad  
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

这是我修改后的代码（ViewController.m）：

```
#import "ViewController.h"
#import "DetailViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"News";

    //[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    //before
    //NSURL *url = [NSURL URLWithString:@"http://zacandcatie.com/YouTube/json.php"];

    //after
    NSURL *url = [NSURL URLWithString:@"http://service.berisiknews.com/article/byAll/0/3"];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    data = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [data appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    //before 
    //news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    //[mainTableView reloadData];
    //ßNSLog(@"array %@", news);

    //after
    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:data options: NSJSONReadingMutableContainers error: nil];
    NSArray *news = [jsonArray valueForKeyPath:@"data"];
    [mainTableView reloadData];
    NSLog(@"array %@", news);
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"The download could not complete please make sure you're connected to either 3G or Wi-Fi" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

- (int)numberINSectionsInTableView: (UITableView *)tableView
{
    return 1;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [news count];
    //return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];
    //cell.detailTextLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"date_string"];
    cell.detailTextLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"category_name"];
    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    detailViewController.title = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];
    detailViewController.newsArticle = [news objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:detailViewController animated:YES];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T06:50:08.943

```
@interface AlbumViewController ()

@end

@implementation AlbumViewController

- (void)viewDidLoad

{

    [super viewDidLoad];
    //navigation Controller
    [self.navigationController setNavigationBarHidden:NO];
    self.title=@"Album List";

    //json data parsing
    NSURL *url = [NSURL URLWithString:@".......your Link......"];

    NSURLRequest *urlrequest = [[NSURLRequest alloc]initWithURL:url];

    NSData *data = [NSURLConnection sendSynchronousRequest:urlrequest returningResponse:nil error:nil];

    dict_data = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
    self.ary_data = [dict_data objectForKey:@"album"];

    NSLog(@"%@",self.ary_data);

}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{

    return [ary_data count];

}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    UITableViewCell *cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@""];
    [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    NSMutableDictionary *dic= [[ary_data objectAtIndex:indexPath.row] mutableCopy];
    AlbumCellController *albumCell = [[AlbumCellController alloc]init];

    [cell.contentView addSubview:albumCell.view];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                       albumCell.Img_album.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[dic objectForKey:@"cover_photo"]]]];
    });
    albumCell.lbl_name.text = [dic objectForKey:@"title"];
    albumCell.lbl_releasedate.text = [dic objectForKey:@"release_date"];

    NSString *SongNo=[dic objectForKey:@"no_of_songs"];
    NSLog(@"%@",SongNo);
    //albumCell.lbl_songno.text=SongNo;

    return cell;

}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{

    NSMutableDictionary *dic= [[ary_data objectAtIndex:indexPath.row] mutableCopy];
    SongsViewController *songList = [[SongsViewController alloc]init];
    songList.imgURL = [dic objectForKey:@"cover_photo"];
    songList.Album_id = [dic objectForKey:@"album_id"];
    [self.navigationController pushViewController:songList animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T03:59:37.643

您的新闻数组是作为代码的局部变量。

在connectionDidFinishLoading中，请修改如下

```
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:data options: NSJSONReadingMutableContainers error: nil];
news = [jsonArray valueForKeyPath:@"data"];
[mainTableView reloadData];
NSLog(@"array %@", news); 
```

所以它将是您在表格视图中访问的正确新闻数组。这对我来说可以。

# magento - PHP致命错误：PHP启动：apc_mmap：mmap失败：在第0行未知

> ID：14756385
> 
> 赞同：1
> 
> 时间：2013-02-07T16:45:58.110
> 
> 标签：magento, apc

我正在尝试为 PHP（magento）启动并运行 APC，但我遇到了一个困扰我的奇怪问题。我已经通过以下命令完成了我的 apc 安装

pecl install apc pecl/apc 已经安装，和发布的3.1.13版本一样

我还在 /etc/php.d/apc.ini 中添加了配置参数，如下所示

```
extension=apc.so
apc.enabled=1
apc.num_files_hint=10000
apc.user_entries_hint=10000
apc.max_file_size=100M
apc.stat=0
apc.optimization=0
apc.shm_segments=1
apc.enable_cli=1
apc.cache_by_default=1
apc.include_once_override=1
apc.shm_size=4
apc.mmap_file_mask = /tmp/apc.XXXXXX 
```

之前我认为可能是我的配置搞砸了，但是当我删除了 apc.ini 文件中的每一行但在执行 php --ini 时仍然出现以下错误

> PHP 致命错误：PHP 启动：apc_mmap：mmap 失败：在第 0 行的未知分段错误（核心转储）

现在我真的不知道该怎么办

我的 PHP 版本是 5.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:48:04.597

在尝试了不同的 APC 软件包后，我已经解决了这个问题。那里的教程可能会很混乱，因为每个提到使用 pecl 安装 APC 的教程可能不适用于 PHP54。

所以你真正需要做的是获得正确的安装包，在我的例子中，我发出了以下命令

```
yum install php54w-pecl-apc 
```

一旦我这样做了，一切都很顺利。apc.ini 文件是使用位置 /etc/php.d 中的基本配置自动创建的

phpinfo 还将 APC 列为已配置。

**我的php版本**

php -v PHP 5.4.11 (cli) (built: Jan 30 2013 18:05:25) Copyright (c) 1997-2013 The PHP Group Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies

# php - php 5.3 上的 HotProperty 高级搜索错误

> ID：14756390
> 
> 赞同：0
> 
> 时间：2013-02-07T16:46:04.227
> 
> 标签：php, mysql, joomla

我不得不将旧的 mambo 站点（基于 joomla）迁移到具有 PHP 5.3 的新服务器。
修复了所有 mambo 问题后，最后一个问题是 hotproperty 高级搜索错误。
这是错误：

```
Unknown column \'p.type\' in \'on clause\' SQL=INSERT INTO mos_hp_temp (`id`, `price`) \n SELECT p.id, p.price\n FROM mos_hp_properties AS p, mos_hp_companies AS c\n LEFT JOIN mos_hp_prop_types AS t ON p.type = t.id\n LEFT JOIN mos_hp_agents AS a ON p.agent = a.id\n WHERE p.published=\'1\' AND p.approved=\'1\' AND t.published=\'1\'\n AND a.company=c.id\n    AND (publish_up = \'0000-00-00 00:00:00\' OR publish_up <= NOW())\n AND (publish_down = \'0000-00-00 00:00:00\' OR publish_down >= NOW()) 
```

为了更好的可读性，我对其进行了一些格式化。

```
Unknown COLUMN 'p.type' IN 'on clause' sql= 

INSERT INTO mos_hp_temp 
            ( ` id ` , 
             ` price ` ) 
SELECT p.id, 
       p.price 
FROM   mos_hp_properties AS p, 
       mos_hp_companies AS c 
       LEFT JOIN mos_hp_prop_types AS t 
              ON p.type = t.id 
       LEFT JOIN mos_hp_agents AS a 
              ON p.agent = a.id 
WHERE  p.published = '1' 
       AND p.approved = '1' 
       AND t.published = '1' 
       AND a.company = c.id 
       AND ( publish_up = '0000-00-00 00:00:00' 
              OR publish_up <= Now() ) 
       AND ( publish_down = '0000-00-00 00:00:00' 
              OR publish_down >= Now() ) 
```

我现在无法更新任何东西，所以它不是一个选项。
我该如何解决这个问题？
自然，我检查并 mos_hp_properties 具有类型列。

罗比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:25:19.857

我发现了问题。
线条

```
mos_hp_properties AS p,
mos_hp_companies AS c 
```

应该是相反的顺序。
打开 components/com_hotproperty/hotproperty.php 并使用以下代码更改第 711/712 行：

```
$sql2 .= "\n FROM #__hp_companies AS c, #__hp_properties AS p "
. "\n LEFT JOIN #__hp_prop_types AS t ON p.type = t.id" 
```

罗比

# iphone - 从字符串中删除 Html 格式

> ID：14756391
> 
> 赞同：1
> 
> 时间：2013-02-07T16:46:16.033
> 
> 标签：iphone, ios, xcode, nsstring

我一直在尝试在我的文本视图中格式化一个字符串，但我无法解决。我对 xcode 很陌生。

我在这个文件中遗漏了什么吗？我一直在查看堆栈，这就是您的操作方式..但它不起作用。

![在此处输入图像描述](../Images/c502de7bed67cce2bed3524b1474e773.png)

```
- (NSString *)stripTags:(NSString *)str
{
    NSMutableString *html = [NSMutableString stringWithCapacity:[str length]];

    NSScanner *scanner = [NSScanner scannerWithString:str];
    scanner.charactersToBeSkipped = NULL;
    NSString *tempText = nil;

    while (![scanner isAtEnd])
    {
        [scanner scanUpToString:@"<" intoString:&tempText];

        if (tempText != nil)
            [html appendString:tempText];

        [scanner scanUpToString:@">" intoString:NULL];

        if (![scanner isAtEnd])
            [scanner setScanLocation:[scanner scanLocation] + 1];

        tempText = nil;
    }

    return html;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *str = newsArticle;

    descTextView.text = [NSString stringWithString:str];

    // Do any additional setup after loading the view from its nib.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:51:43.180

此代码是此处发布的类似问题的答案的修改版本[https://stackoverflow.com/a/4886998/283412](https://stackoverflow.com/a/4886998/283412)。这将获取您的 HTML 字符串并去除格式。

```
-(void)myMethod
{
   NSString* htmlStr = @"<some>html</string>";
   NSString* strWithoutFormatting = [self stringByStrippingHTML:htmlStr];
}

-(NSString *)stringByStrippingHTML:(NSString*)str
{
  NSRange r;
  while ((r = [str rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
  {
     str = [str stringByReplacingCharactersInRange:r withString:@""];
  }
  return str;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:50:41.930

您正在尝试将 HTML 放入标签中。你想使用 UIWebView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T06:33:26.597

@试试这个

```
-(NSString *) stringByStrippingHTML:(NSString *)HTMLString {

    NSRange r;
    while ((r = [HTMLString rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
        HTMLString = [HTMLString stringByReplacingCharactersInRange:r withString:@""];
    return HTMLString;
} 
```

# asp.net - AppFabric 重建缓存而不影响应用程序性能

> ID：14756398
> 
> 赞同：0
> 
> 时间：2013-02-07T16:46:28.313
> 
> 标签：asp.net, caching, appfabric, ncache

我正在研究在我的 ASP.NET Web 应用程序中使用进程外缓存。我正在寻找允许我从头开始重建缓存而无需最终用户等待它重建的功能。我的应用程序最多可能需要 2 分钟来重建缓存。

我正在考虑将现有缓存值复制到新位置，同时填充新缓存值。应用程序将使用这些复制的值，直到填充新值。

AppFabric/NCache 等是否提供开箱即用的那种功能？我在网上找不到任何关于它的信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:15:32.460

也许不影响应用程序性能的最佳方法是通过其他方式执行此操作。

避免此问题的一种简单方法是使用定期后台异步任务在项目过期之前更新缓存。2分钟重建缓存很长，也许你可以尝试拆分你的数据项并使用一些并行任务。

此外，AppFabric Cache 中有两种编程模型：

*   **缓存除外**：应用程序必须将数据从原始数据源重新加载到缓存中
*   **Read Through/Write Behind**：如果某个项目不在缓存中，则提供程序从后端检索它。当项目写入缓存时，写入的项目会定期异步写入后端。在这个[链接](http://msdn.microsoft.com/en-us/library/hh377669%28v=azure.10%29.aspx)上掠夺。

# mysql - mysql过程中的内循环可以使用外循环的结果吗

> ID：14756399
> 
> 赞同：0
> 
> 时间：2013-02-07T16:46:33.210
> 
> 标签：mysql

我试图在mysql中创建以下过程

```
 PROCEDURE fix()
BEGIN

  DECLARE event_id_ INT;
  DECLARE gate_number INT;

  DECLARE l_done          INT DEFAULT  0;
  DECLARE curs_event_id CURSOR FOR SELECT DISTINCT event_id FROM history_15min;
  DECLARE curs_gate_number CURSOR FOR SELECT DISTINCT gate_number 
                                         FROM history_15min WHERE event_id =event_id_;
 ( -- HERE IS THE PROBLEM - event_id_ IS BLANK THERE FOR  THE INNER LOOP RETURNS NO RESULTS ....)            

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET l_done=1;  

    OPEN curs_event_id;
    event_loop : LOOP
    FETCH curs_event_id INTO event_id_;
    IF l_done=1 THEN LEAVE event_loop;
    END IF;

        OPEN curs_gate_number;
        gate_loop : LOOP
        FETCH curs_gate_number INTO gate_number;
        IF l_done=1 THEN LEAVE gate_loop;
        END IF;

insert into t value ('1');

        END LOOP gate_loop;
        CLOSE curs_gate_number;
        SET l_done=0;

    END LOOP event_loop;
    CLOSE curs_event_id;

END 
```

有没有办法让第一个循环的结果成为第二个循环中的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:47:36.407

感谢 CHill60 ，您的链接有我正在寻找的答案

这是执行嵌套循环的正确方法：

```
PROCEDURE fix()
BLOCK1: BEGIN

  DECLARE colA_ INT;

  DECLARE l_done INT DEFAULT 0;
  DECLARE curs_colA CURSOR FOR SELECT DISTINCT colA FROM tableA;

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET l_done=1;  

    OPEN curs_colA;
    first_loop : LOOP
    FETCH curs_colA INTO colA_;
    IF l_done=1 THEN LEAVE first_loop;
    END IF;

        BLOCK2: BEGIN
              DECLARE calB_ INT;
              DECLARE l_done INT DEFAULT 0;
              DECLARE curs_calB CURSOR FOR SELECT DISTINCT calB FROM tableB WHERE colA = colA_;

              DECLARE CONTINUE HANDLER FOR NOT FOUND SET l_done=1;  

                    OPEN curs_calB;
                    second_loop : LOOP
                    FETCH curs_calB INTO calB_;
                    IF l_done=1 THEN LEAVE second_loop;
                    END IF;

insert into tmp value ('1');

                    END LOOP second_loop;
                    CLOSE curs_calB;
                    SET l_done=0;
            END BLOCK2; 

    END LOOP first_loop;
    CLOSE curs_colA;

END BLOCK1 
```

# sql-server-2008 - 求和函数产生整数而不是百分比

> ID：14756404
> 
> 赞同：0
> 
> 时间：2013-02-07T16:46:44.083
> 
> 标签：sql-server-2008

所以我有一个由 (fin_dec+fin_acc) 组成的“总计”字段。我一直在尝试将总数除以 fin acc：

```
 select sum(case when fin_acc = 0 then 0 else (total/fin_acc)end)as sum1 
```

case语句是因为它不会被0除！

例如，total 为 4，fin_acc 为 3，因此总和应该为 75%，但它只给了我 3。这可能是我创建 fin_dec、fin_acc 字段的方式，例如......然后是 1，否则为 0，因此不会分成百分比。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:51:25.993

像这样：

```
select sum(fin_acc) as s, count(fin_acc) as n from .. 
```

然后用你的编程语言：

```
if(n>0) avg= s/n else avg= null; 
```

或者只是使用：

```
select avg(fin_acc) as a from .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:33:51.320

使用 nullif 函数：

```
select sum(1.0*total/nullif(fin_acc,0))as sum1 
```

# extjs - 隐藏 ExtJs 中可折叠面板的折叠图标

> ID：14756406
> 
> 赞同：1
> 
> 时间：2013-02-07T16:46:47.420
> 
> 标签：extjs

当我有一个可折叠的面板时，ExtJs 会在工具区域中呈现一个图标以展开/折叠，但也会在面板之间放置一个黑色的小三角形来做同样的事情。

我在文档中发现我可以使用 hideCollapseTool:true 隐藏工具区域中的图标，但我想隐藏那个黑色小三角形。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T17:30:34.800

你`split:false`在面板上试过吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-02T19:39:10.033

在 Ext JS 5（可能还有一些早期版本）中，`split`配置参数可以是布尔值或对象的配置`Ext.resizer.BorderSplitter`对象。

根据[API](http://docs.sencha.com/extjs/5.0.1/#!/api/Ext.resizer.BorderSplitter "边界分离器")，该`collapsible`属性可用于手动显示或隐藏拆分器中的折叠按钮，因此您可以将该属性设置`false`为隐藏您正在谈论的按钮。

在 5.1 中测试和工作的解决方案如下所示，假设面板包含在具有边框布局的容器中：

```
{
    xtype: 'panel',
    region: 'west',
    split: {
        collapsible: false
    }
} 
```

PS我知道这已经晚了2年，但我在自己寻找解决方案时发现了这个问题。想我不妨从 API 分享解决方案。

编辑：[做了一个小提琴](https://fiddle.sencha.com/#fiddle/hhj)。此外，值得一提的是，它保留了使用 时丢失的所有其他拆分器功能`split: false`，例如保持面板可调整大小。

# jsp - 如何使用 JSTL 显示在 JSP 本身中定义的 ArrayList 的值

> ID：14756412
> 
> 赞同：3
> 
> 时间：2013-02-07T16:47:02.010
> 
> 标签：jsp, arraylist, foreach, jstl, el

我有一个在 JSP 的 scriptlet 中定义的 ArrayList。在正文部分，我想使用 JSTL forEach 循环显示项目。

在经历了这样的教程之后[，](http://www.java2s.com/Tutorial/Java/0380__JSTL/UseForEachtoLoopThroughArrayList.htm)我编写了以下代码：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page import="java.util.ArrayList" %>

<%
ArrayList<String> fruits = new ArrayList<String>();
fruits.add("Orange");
fruits.add("Apple");
%>

<html>
<head>
    <title>JSTL</title>
</head>
<body>
    <c:forEach var="fruit" items="${fruits}">
        <c:out value="${fruit}" />
    </c:forEach>
</body>
</html> 
```

但我得到一个空白页。我在上面的代码中哪里出错了？

我能找到的所有教程似乎都在 servlet 中定义了一个 ArrayList bean，并通过`request`. 在 forEach 循环中，他们使用`c:out`and`${bean.prop}`来打印它。我没有这样尝试过。我想做一些更简单的事情，但似乎无法让这段代码工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:06:08.460

添加 pageContext.setAttribute("fruits", fruits);

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page import="java.util.ArrayList" %>

<%
ArrayList<String> fruits = new ArrayList<String>();
fruits.add("Orange");
fruits.add("Apple");
pageContext.setAttribute("fruits", fruits);
%>
<html>
<head>
<title>JSTL</title>
</head>
<body>
    <c:forEach var="fruit" items="${fruits}">
     <c:out value="${fruit}" />
    </c:forEach>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:53:36.710

您需要将数组放入请求中。在最后一次 fruits.add() 调用之后立即执行此操作。

```
<%= request.setAttribute( "fruits", fruits ); %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T11:53:35.330

最简单的方法是使用和使用它来定义一个变量。

```
<c:set var="fruits">
   <%= fruits %>
<c:set>

<c:forEach var="fruit" items="${fruits}">
    <c:out value="${fruit}" />
</c:forEach 
```

<%= fruits %> 是您在 scriptlet 中创建的数组列表。

# jquery - jquery ajax 将参数传递给webservice

> ID：14756413
> 
> 赞同：1
> 
> 时间：2013-02-07T16:47:03.633
> 
> 标签：jquery, ajax, web-services

我必须在 Web 服务中运行，其中一个可以正常工作，接收两个参数，我可以执行它，但是另一个也接收参数的不能工作，粘贴这个函数和我的 Ajax 代码，这样你就可以帮我看看是什么正在发生。

```
html

<script type="text/javascript">
    function CallService() {
        $.ajax({
            type: "POST",
            url: "findMe.asmx/locateMe2",  
            crossDomain:true,
            data: '{value1: ' + $("#txtValue1").val() + ', value2: ' + $("#txtValue2").val() + '}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: OnSuccess,
            error: OnError
        });

    }

    function OnSuccess(data, status) {
        $("#lblResult").html(data.d);

    }

    function OnError(request, status, error) {
        $("#lblResult").html(request.statusText);

    }

</script>    

</head>
<body>
<form id="frmCoords" runat ="server" >
    <div>
<table>
    <tbody>
        <tr>
            <th>
                Value 1:
            </th>
            <td>
                <asp:TextBox ID="txtValue1" runat="server" />
            </td>
        </tr>
        <tr>
            <th>
                Value 2:
            </th>
            <td>
                <asp:TextBox ID="txtValue2" runat="server" />
            </td>
        </tr>
    </tbody>
</table>

<asp:Button ID="btnGo" Text="Go" OnClientClick="CallService(); return false;" runat="server" />

<asp:Label ID="lblResult" Text="&nbsp;" Width="100%" runat="server" ForeColor="black"  />
    </div>

</form>

--webservice
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]

    public int Add(int value1, int value2)
    {
        return value1 + value2;
    }

    public string locateMe2(Double value1, Double value2)
    {

        FormClosingEventArgs ee = new FormClosingEventArgs(CloseReason.UserClosing, false);
        DialogResult dlgResult = MessageBox.Show("", "Cadena", MessageBoxButtons.OK, MessageBoxIcon.Information);

        SqlConnection Conn = new SqlConnection();
        Conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Audi.Properties.Settings.ConexionSql"].ConnectionString);
        string procedure = "usp_PointInPolygon";

        SqlCommand cmd = new SqlCommand(procedure, Conn);
        SqlDataReader reader;

        //cmd.CommandText = "usp_PointInPolygon";
        cmd.CommandType = CommandType.StoredProcedure;
        //cmd.Parameters.Clear();
        SqlParameter param1;
        SqlParameter param2;
        param1 = cmd.Parameters.Add("@lat", SqlDbType.Float,14);
        param2 = cmd.Parameters.Add("@lng", SqlDbType.Float,14);

        param1.Value = value1;
        param2.Value = value2;

        Conn.Open();

        reader = cmd.ExecuteReader();
        string column = "";
        while (reader.Read())
        {
            column = reader["county"].ToString();
            //int columnValue = Convert.ToInt32(reader["ColumnName"]);
        }
        Conn.Close();

        return column;

    } 
```

函数 Add 工作正常，它接收两个 int 值，函数 locateMe2 也接收 lat 和 lng 并且是浮点值的值不起作用，你发现有什么问题吗？

```
the locateMe2 function will return just a string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T15:51:50.583

```
var params = {value1: $("#txtValue1").val(), value2: $("#txtValue2").val()};
function CallService() {
  $.ajax({
        type: "POST",
        url: "findMe.asmx/locateMe2",  
        crossDomain:true,
        data: JSON.stringify(params),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnSuccess,
        error: OnError
    });
} 
```

值可以直接作为字符串放入“数据”设置中将值设置在 ajax 方法之外有助于监控您在从变量或元素获取值时特别编写的内容，而“stringify”方法有助于将值放入字符串形状为这是必需的。

# c# - WPF 上的浏览 按钮

> ID：14756414
> 
> 赞同：2
> 
> 时间：2013-02-07T16:47:03.787
> 
> 标签：c#, wpf, visual-studio-2012

在 WPF 应用程序中，通过使用 c#，我希望用户能够将他们的数据导入网格视图。那么我需要一个浏览按钮还是什么？

如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T16:58:41.603

以下代码可帮助您显示浏览按钮

```
<TextBox Height="32" HorizontalAlignment="Left" Margin="6,10,0,0" Name="FileNameTextBox"
                 VerticalAlignment="Top" Width="393" />
        <Button Content="Browse" Height="32" HorizontalAlignment="Left" Margin="405,10,0,0"
                Name="button1" VerticalAlignment="Top" Width="88" Click="button1_Click" />

// Create OpenFileDialog
Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();          

// Set filter for file extension and default file extension
dlg.DefaultExt = ".txt";
dlg.Filter = "Text documents (.txt)|*.txt";

// Display OpenFileDialog by calling ShowDialog method
Nullable<bool> result = dlg.ShowDialog();

// Get the selected file name and display in a TextBox
if (result == true)
{
    // Open document
    string filename = dlg.FileName;
    FileNameTextBox.Text = filename;
 } 
```

# asp.net - 如何从数据库表中填充 asp.net 中的下拉列表？

> ID：14756417
> 
> 赞同：3
> 
> 时间：2013-02-07T16:47:07.157
> 
> 标签：asp.net, sql, database, drop-down-menu

我想用我创建的表中的值填充一个下拉列表。我只想用其中一个字段填充列表 - 我表中的语言。我认为我已正确连接到数据源，但我不知道我必须做什么才能将值放入列表中。我可以输入自己的值，但我宁愿让它自动化。

这是我到目前为止所拥有的，但我猜它不仅仅是将列表链接到数据源。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:HBshareIndexConnectionString %>" 

SelectCommand="SELECT * FROM [Web_Metrics] WHERE ([LCID] = @LCID)">
<SelectParameters>
    <asp:QueryStringParameter Name="LCID" QueryStringField="LCID" Type="Int32" />
</SelectParameters>

</asp:SqlDataSource>

<asp:Label ID="Label1" runat="server" Text="Select LCID: " ></asp:Label> &nbsp; &nbsp;  
<asp:DropDownList ID="DropDownList1" Width="150px" runat="server" DataSourceID="SqlDataSource1"  DataTextField="LCID" DataValueField="LCID">
<asp:ListItem>Select LCID...</asp:ListItem>
</asp:DropDownList> 
```

谢谢您的帮助。我现在填充了下拉列表，但我想知道如何真正获得用于显示此人选择的 LCID 详细信息的中继器？我见过人们谈论 page.isPostback 但我不知道那是什么或者它是否适用于我当前的设置。我需要以某种方式获取他们选择的 LCID，然后刷新页面以显示该 LCID 的详细信息。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:36:37.243

您的问题是您正在尝试定义列表项和数据源。

如果你想插入一个“选择一个项目..”选项，我建议将它添加到你的结果集（让它总是在你的结果集中`UNION`，并且`ORDER BY`可能很困难，具体取决于你的字段）或者在数据绑定之后插入它后面的代码：

修改`DropDownList1`s属性：

```
<asp:DropDownList ID="DropDownList1" Width="150px" runat="server" DataSourceID="SqlDataSource1"  DataTextField="CountryName" DataValueField="LCID" OnDataBound="InsertChooseItem" /> 
```

C＃：

```
protected void InsertChooseItem(object sender, EventArgs e)
{
    ListItem selectOnePlease = new ListItem("Select LCID..", 0);

    DropDownList1.Items.Insert(0, selectOnePlease);
} 
```

VB：

```
Protected Sub InsertChooseItem(sender As Object, e As EventArgs)

    Dim selectOnePlease As New ListItem("Select LCID..", 0)

    DropDownList1.Items.Insert(0, selectOnePlease)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:41:52.570

您已将 select 参数指定为**查询字符串**，因此只有当 URL 类似于以下内容时才会填充 DropDownList 中的数据：

```
http://{Your server name}/Default.aspx?LCID=1 
```

但这没有任何意义，因为表中的 LCID 列应该是唯一的，因此尽管这可行，但下拉列表中只有一个值*。*

我认为您想要的是在下拉列表中显示数据库中的所有语言，这是一个示例：

```
<asp:SqlDataSource ID="sqlDS" runat="server" 
ConnectionString="<%$ ConnectionStrings:HBshareIndexConnectionString %>"
    SelectCommand="SELECT LCID,Language FROM [Web_Metrics]">
</asp:SqlDataSource>
<asp:DropDownList ID="ddlLanguages" AppendDataBoundItems="true" Width="150px" runat="server" DataSourceID="sqlDS" DataTextField="Language" DataValueField="LCID">
    <asp:ListItem>Select Language</asp:ListItem>
</asp:DropDownList> 
```

请注意，您永远不应该向客户端显示 ID，这对他们来说完全没有意义，ID 主要由开发人员在后台使用，这就是为什么在下拉列表中我设置：

1.  DataTextField="Language"（这是用户可见的语言名称）
2.  DataValueField="LCID"（对用户不可见，但对后面代码中的任何附加处理很有用）

    AppendDataBoundItems="true" - 这行代码将保留您手动添加到下拉列表中的所有项目，例如“选择语言”，并将附加任何数据绑定项目，例如来自 SQL 表

# javascript - 模拟点击传单地图项

> ID：14756420
> 
> 赞同：12
> 
> 时间：2013-02-07T16:47:17.560
> 
> 标签：javascript, leaflet, geojson

有了 Leaflet [Choropleth 教程](http://leafletjs.com/examples/choropleth.html)，我必须模拟特定地图区域上的点击事件。例如：我必须有一个类似的功能`clickOnMapItem(itemId)`将点击由以下代码定义的地图区域

```
{"type":"Feature","id":"05","properties":{"name":"Arkansas","density":56.43},"geometry":{"type":"Polygon","coordinates":[...} 
```

其中**“id”：“05”**是我需要点击的id

我的其余代码如示例所示：

状态数据.js：

```
var statesData = {"type":"FeatureCollection","features":[
{"type":"Feature","id":"01","properties":{"name":"Alabama","density":94.65},"geometry":{"type":"Polygon","coordinates":[[[-87.359 and so on 
```

html:

...标题省略

```
<!-- language:lang-html -->
    <body>
        <div id="map"></div>

        <script src="dist/leaflet.js"></script>

        <script type="text/javascript" src="us-states.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script type="text/javascript">

            var map = L.map('map').setView([37.8, -96], 4);

            var cloudmade = L.tileLayer('http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png', {
                attribution: 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade',
                key: 'BC9A493B41014CAABB98F0471D759707',
                styleId: 22677
            }).addTo(map);

            // control that shows state info on hover
            var info = L.control();

            info.onAdd = function (map) {
                this._div = L.DomUtil.create('div', 'info');
                this.update();
                return this._div;
            };

            info.update = function (props) {
                this._div.innerHTML = '<h4>US Population Density</h4>' +  (props ?
                    '<b>' + props.name + '</b><br />' + props.density + ' people / mi<sup>2</sup>'
                    : 'Hover over a state');
            };

            info.addTo(map);

            // get color depending on population density value
            function getColor(d) {
                return d > 1000 ? '#800026' :
                       d > 500  ? '#BD0026' :
                       d > 200  ? '#E31A1C' :
                       d > 100  ? '#FC4E2A' :
                       d > 50   ? '#FD8D3C' :
                       d > 20   ? '#FEB24C' :
                       d > 10   ? '#FED976' :
                                  '#FFEDA0';
            }

            function style(feature) {
                return {
                    weight: 2,
                    opacity: 1,
                    color: 'white',
                    dashArray: '3',
                    fillOpacity: 0.7,
                    fillColor: getColor(feature.properties.density)
                };
            }
            //ON HOVER HANDLER
            function highlightFeature(e) {
                var layer = e.target;
                layer.setStyle({
                    weight: 5,
                    color: '#666',
                    dashArray: '',
                    fillOpacity: 0.7
                });

                if (!L.Browser.ie && !L.Browser.opera) {
                    layer.bringToFront();
                }

                info.update(layer.feature.properties);
            }

            var geojson;

            function resetHighlight(e) {
                geojson.resetStyle(e.target);
                info.update();
            }

            function zoomToFeature(e) {

                map.fitBounds(e.target.getBounds());
            }
            //setting click handlers
            function onEachFeature(feature, layer) {

                layer.on({
                    mouseover: highlightFeature,
                    mouseout: resetHighlight,
                    click: zoomToFeature
                });
            }

            geojson = L.geoJson(statesData, {
                style: style,
                onEachFeature: onEachFeature
            }).addTo(map);

            map.attributionControl.addAttribution('Population data &copy; <a href="http://census.gov/">US Census Bureau</a>');

            var legend = L.control({position: 'bottomright'});

            legend.onAdd = function (map) {

                var div = L.DomUtil.create('div', 'info legend'),
                    grades = [0, 10, 20, 50, 100, 200, 500, 1000],
                    labels = [],
                    from, to;

                for (var i = 0; i < grades.length; i++) {
                    from = grades[i];
                    to = grades[i + 1];

                    labels.push(
                        '<i style="background:' + getColor(from + 1) + '"></i> ' +
                        from + (to ? '&ndash;' + to : '+'));
                }

                div.innerHTML = labels.join('<br>');
                return div;
            };

            legend.addTo(map);

        </script>
    </body> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-01-08T04:47:11.580

抱歉，这是一个 3 年前的问题，但我会在这里尝试回答：

首先，在下面更新您的代码：

```
//setting click handlers
function onEachFeature(feature, layer) {
  layer.on({
    mouseover: highlightFeature,
    mouseout: resetHighlight,
    click: zoomToFeature
  });
  //add this line
  layer._leaflet_id = feature.id;
} 
```

上面的新行将“分配”您的 geoJSON 的“id”作为图层的leaflet_id，然后创建一个像这样的新函数：

```
function clickOnMapItem(itemId) {
    var id = parseInt(itemId);
    //get target layer by it's id
    var layer = geojson.getLayer(id);
    //fire event 'click' on target layer 
    layer.fireEvent('click');  
} 
```

所以，根本不需要填充任何坐标！！！

希望能帮助到你！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-03T08:44:20.453

要添加到@snkashis：`fireEvent`仅当您输入正确的类型时才会起作用。这意味着这样做：

```
 var latlngPoint = new L.LatLng(x, y);
    map.fireEvent('click', {
      latlng: latlngPoint,
      layerPoint: map.latLngToLayerPoint(latlngPoint),
      containerPoint: map.latLngToContainerPoint(latlngPoint)
    }); 
```

您也可以对特定标记/图层执行此操作，无论它是否已添加到地图中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T10:58:49.217

所以你想模拟一个点击事件？为什么不使用 Leaflet 之`fireEvent`类的`map.fireEvent('click',{latlng:[x,y]})`

您可能需要将 layerPoint 和 containerPoint 填充到对象的参数中。

请参阅[http://leafletjs.com/reference.html#mouse-event](http://leafletjs.com/reference.html#mouse-event)

# android - 如何在android中创建微调器列表

> ID：14756421
> 
> 赞同：0
> 
> 时间：2013-02-07T16:47:18.657
> 
> 标签：android, android-listview

我正在努力`listView`在 android 中制作一个，如下图所示 ![在此处输入图像描述](../Images/7969cc79c9a504c4f723af709d7623b0.png)

我展示图片的目的是如何制作两个`listView`旋转的 android 并且应该在它们中间选择它们，如图所示。如果有人请对此有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:57:58.873

我想你正在寻找这个。[安卓轮](http://code.google.com/p/android-wheel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:59:53.927

在[Play Store](https://play.google.com/store/apps/details?id=com.groidify.uipatterns&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5ncm9pZGlmeS51aXBhdHRlcm5zIl0.) demo Demo -> Picker-> Android-wheel 中可以找到一个开源库来[进行演示。](http://code.google.com/p/android-wheel/)

# css - 使用 css 动画 svg 路径填充

> ID：14756422
> 
> 赞同：6
> 
> 时间：2013-02-07T16:47:22.427
> 
> 标签：css, animation, svg

可以使用 css 更改 svg 填充。但我没有设法创建动画。这是我的 svg 对象：

```
<svg version="1.1" id="tick" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve"> 
<rect id="fill" x="21" y="26" width="60" height="60"/>
</svg> 
```

并且，使用 SASS：

```
@include keyframes(loading)
  0%
    fill: black
  50%
    fill: white
  100%
    fill: black
#fill
  fill: white
  @include animation(loading 3s infinite) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T17:02:23.320

**编辑**

好的，看起来像这样的东西应该可以工作。

```
 <svg version="1.1" id="tick" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve"> 
  <style type="text/css" >
        <![CDATA[

          @keyframes fill {
              0% {
                  fill: black;
              }
              50% {
                  fill: white;
              }
              100% {
                  fill: black;
              }
          }

          #fill {
              fill: black;
              animation-name: fill;
              animation-duration: 3s;
              animation-iteration-count: infinite;
          }

        ]]>
    </style>
    <rect id="fill" x="21" y="26" width="60" height="60"/>
</svg> 
```

这是示例：http: [//jsbin.com/ayiheb/2/edit](http://jsbin.com/ayiheb/2/edit)

# c++ - 如何在 out.write 中正确声明/使用具有特定 ASCII 码的字符？

> ID：14756424
> 
> 赞同：0
> 
> 时间：2013-02-07T16:47:27.340
> 
> 标签：c++

我有以下缓冲区

```
std::vector<char> vecBuffer; 
```

以下分隔符

```
char delim = char(167); 
```

以下替换功能

```
std::replace(vecBuffer.begin(), vecBuffer.end(), delim, ' '); 
```

以及以下输出例程

```
out.write(&vecBuffer[0], x.length());
out.write(delim, 1); 
```

但是最后一行给了我错误

```
error: invalid conversion from 'char' to 'const char*' [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:49:03.880

`delim`是一个`char`并且`write`似乎期望一个指针。所以得到它的地址：

```
out.write(&delim, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:04:53.233

正确的语法是，

```
out.write((const char*)&delim, 1); 
```

# php - sql删除部分字符串以格式化日期

> ID：14756426
> 
> 赞同：0
> 
> 时间：2013-02-07T16:47:34.520
> 
> 标签：php, sql, sql-server, regex, tsql

我从工作人员那里继承了一个数据库，他们将所有日期存储在 VARCHAR() 中。通常我会把它转换成日期时间然后继续。但它以“2012 年 6 月 19 日星期二上午 11:46:40”的格式存储我正在使用 PHP 和 SQL 中的一些脚本和日期比较，我需要将其设为可用日期。

我尝试以这种方式转换它：通过获取旧日期并将其转换为一个单独的字段，我将在转换时重命名该字段。当我运行它时，我得到一个错误

```
 UPDATE ticket_backup
    SET new_date = CONVERT(VARCHAR(50), CAST(submit_date AS DATETIME), 109) 
```

> 从二进制/varbinary 字符串转换日期时间时转换失败。

所以现在我想我需要使用正则表达式删除一个子字符串来删除我不需要的东西。我需要将其转换为“2013-02-07 11:28:51”的 SQL 服务器 DATETIME 标准格式

任何帮助将不胜感激，因为我遇到了障碍并且我需要转换很多记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:52:29.550

不完整，但这就是我将如何处理它：

1.  创建一个新的日期列
2.  更新所有当前值以摆脱白天部分...

    update mytable set mydate = replace(mydate, 'Monday, ', '' );

    update mytable set mydate = replace(mydate, 'Tuesday, ', '' );

等等

1.  删除那个'at'字

    update mytable set mydate = replace(mydate, ' at ', '' );

2.  再次尝试转换

    UPDATE ticket_backup SET new_date = CONVERT(VARCHAR(50), CAST(submit_date AS DATETIME), 109)

3.  删除旧列

4.  重命名新列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:01:22.080

SQL 日期.. 总是很有趣！试试这个，只要所有行的格式与您的演示行相同（例如，一天后的逗号），就应该可以工作：

```
UPDATE ticket_backup
    SET new_date = CAST(REPLACE(SUBSTRING(CAST(submit_date as varchar(50)) ,
            PATINDEX('%,%',CAST(submit_date as varchar(50)) )+2 ,LEN(CAST(submit_date as varchar(50)) )),'at ', '') as datetime) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:09:37.593

这是可以完成的一种方法，就像我认为可以做到的那样简单：

```
SELECT CONVERT(DATETIME,REPLACE(RIGHT(submit_date,LEN(submit_date)-CHARINDEX(',',submit_date)),' at ',' '),109) 
```

[**SQL小提琴**](http://www.sqlfiddle.com/#!3/b6075/1/0)

# ios - canShowCallout 按钮不起作用

> ID：14756433
> 
> 赞同：0
> 
> 时间：2013-02-07T16:47:52.493
> 
> 标签：ios, uinavigationcontroller, uibutton, mkmapview

我认为我的代码有问题，但我找不到。

我想通过单击`leftCalloutAccessoryView`按钮来切换视图，但我总是收到相同的错误：

```
NSInvalidArgumentException', reason: '
-[ThirdViewController showDetailView:]: unrecognized selector sent to instance 
```

这是我的代码：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
    {
        return nil;
    }
    else
    {
        MKPinAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"loc"];
        annotationView.canShowCallout = YES;
        UIButton *detailButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        [detailButton addTarget:self action:@selector(showDetailView:) forControlEvents:UIControlEventTouchUpInside];
        annotationView.rightCalloutAccessoryView=detailButton;
        annotationView.enabled = YES;

        UIImage *image = [UIImage imageNamed:@"logo.jpeg"];
        UIImageView *imgView = [[UIImageView alloc] initWithImage:image];
        annotationView.leftCalloutAccessoryView = imgView;
        annotationView.image = [UIImage imageNamed:@"pin.png"];
        return annotationView;
    }
}
- (IBAction)detailButton:(UIButton *)sender
{
    ThirdViewController *infoView = [[ThirdViewController alloc] init];
    [self.navigationController pushViewController:infoView animated:YES];
    NSLog(@"pushed Button!!!!!!");

} 
```

我的故事板的小截图：

![在此处输入图像描述](../Images/0fdd6d90cdc67c20dc69fcfcd3b2d90a.png)

感谢您的帮助！

最好的问候 CTS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:13:33.020

在中`addTarget`，代码说按钮应该调用方法`showDetailView:`：

```
[detailButton addTarget:self action:@selector(showDetailView:) forControlEvents... 
```

但是没有这样的方法（这就是错误的意思）。

更改此方法的名称：

```
- (IBAction)detailButton:(UIButton *)sender 
```

到：

```
- (IBAction)showDetailView:(UIButton *)sender 
```

# javascript - Infovis 强制有向图，节点上的弹出窗口

> ID：14756436
> 
> 赞同：1
> 
> 时间：2013-02-07T16:47:59.093
> 
> 标签：javascript, infovis

嗨，如果那里有任何 infovis 用户，他们可能会提供帮助，我是一个 infovis 菜鸟，我刚刚启动了我的强制定向图并运行通过 Json 在我的节点中传递，无论如何我可以将每个节点的弹出信息窗口修改为一个单击标记时可能会在 Google 地图上看到，我已经绕圈子转了几个小时。

谢谢。

这是我尝试将图像附加到每个节点的尝试仍然无法使其正常工作：

```
onCreateLabel: function(domElement, node) {
      var actionElem;
      var link = document.createElement('a');
      var frame = document.createElement('div');

      actionElem = document.createElement('img');
      // http://promote.opera.com/logos/Opera-icon-high-res.png
      //actionElem.src = photoUrls[node.id];
      actionElem.src = 'http://promote.opera.com/logos/Opera-icon-high-res.png';
      actionElem.className = 'profilePicture';

      //actionElem.onclick = function() { nodeOnClick(node) };
      link.href = '/' + node.id;
      link.className = 'link';
      link.target = '_blank';
      link.innerHTML = node.name;
      frame.className = 'detailFrame';
      frame.appendChild(actionElem);
      frame.appendChild(document.createElement('br'));
      frame.appendChild(link);
      domElement.appendChild(frame);
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:25:05.897

您可以通过执行以下操作将图像添加到节点：

```
onCreateLabel: function(label, node){
label.innerHTML = "<div><img src='/images/node.png'/></div>;
} 
```

要添加唯一图像，您可以在 json 中传入图像名称：

```
onCreateLabel: function(label, node){
label.innerHTML = "<div><img src='/images/"+node.data.image+"'/></div>;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:45:16.083

如果您希望图像出现在您悬停节点时出现的弹出窗口中，那么您可以使用“提示”。初始化可视化时添加以下代码（egforce 指导）。

```
 Tips: {
          enable: true,
          onShow: function(tip, node) {

            tip.innerHTML = "<div class=\"tip-title\"> <img src = "your-image-url"  >" +   "</div>" ;

          }
        } 
```

# c# - 为什么只有一个更新面板更新时，页面上的所有更新进度都会变为活动状态？

> ID：14756437
> 
> 赞同：1
> 
> 时间：2013-02-07T16:47:59.293
> 
> 标签：c#, asp.net, asp.net-ajax, updatepanel, updateprogress

我在很多项目中都有这个问题。我在页面的各个部分添加了许多更新面板，每个面板都包含一个带有“正在加载...”文本和图像的更新进度。每当我单击一个更新面板中的按钮时，页面的所有更新进度面板都会变得可见。谁能告诉我为什么会这样？为什么不能只显示执行操作的更新面板的更新进度，而其他所有的更新进度都保持不可见？这是asp.net的更新面板和更新进度的默认行为吗？或者我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:06:49.027

尝试使用要定位的 UpdatePanel 的 ID 设置 PanelProgress 控件的“AssociatedUpdatePanelId”属性。

# excel - VBA粘贴法

> ID：14756438
> 
> 赞同：0
> 
> 时间：2013-02-07T16:47:59.387
> 
> 标签：excel, vba

我一直在努力学习改进此代码的方法并从该站点和其他站点中获取示例-但是我似乎无法克服运行时错误 1004“工作表类的粘贴方法失败”。我有另外两个类似的宏和一个按钮，它将运行所有 3 个。它以相同的语法运行前两个，围绕粘贴到“MyQueue”文件中很好，但第三个它不会粘贴并引发此错误。任何人都可以帮忙吗？

```
Sub CSQAgentSummaryEdit()

Dim MyPath As String
MyPath = " path "
MyFile = " file "
QueuePath = "path "
MyQueue = " file "
Dim wb1 As Workbook
Dim wb2 As Workbook

Set wb1 = Workbooks.Open(QueuePath)
Set wb2 = Workbooks.Open(MyPath)

Columns("A:V").Delete Shift:=xlUp
Columns("B").Delete Shift:=xlUp
Columns("C:R").Delete Shift:=xlUp

 Range("A1").Select
  Selection.End(xlDown).Select
  ActiveCell.Offset(2, 0).Range("A1").Select
  Selection.consolidate Sources:= _
    "'file data " _
    , Function:=xlSum, LeftColumn:=True

    Range("A1").CurrentRegion.Delete Shift:=xlUp
    Rows("1:1").Delete

    Range("A1").CurrentRegion.Select
    With Selection.Borders
    .LineStyle = xlContinuous
    .Weight = xlThin
    .ColorIndex = xlAutomatic
    End With

  Selection.Copy
  Workbooks.Open (QueuePath)
  Range("A1").Select
  Selection.End(xlDown).Select
  ActiveCell.Offset(20, 0).Range("A1").Select
  ActiveSheet.Paste , False
  Workbooks(MyQueue).Save
  Workbooks(MyFile).Close False

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:04:03.703

您似乎打开了两次 QueuePath 工作簿。

代替

```
Selection.Copy
Workbooks.Open (QueuePath)
Range("A1").Select 
```

尝试

```
Selection.Copy
wb2.Sheets("Sheet1").Range("A1").Select 
```

指定您正在使用的工作簿将有助于避免粘贴到错误的工作簿/粘贴错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:08:06.933

请记住，Excel 会受到外部影响和自身行为的影响。VBA 通常不是。Active-anything 通常是不可取的。总是更好：

```
set wsc = Sheets("Copy Sheet")
set wsp = Sheets("Paste Sheet") 
```

..然后指定范围内。

我也总是使用 .PasteSpecial 而不是 .Paste - 它会导致更少的错误并且不依赖于激活工作表，但这实际上是您问题的线索。

所以，这部分：

```
Selection.Copy
Workbooks.Open()  'I also think you did this twice so it could be removed, but see below
Range("A1").Select
Selection.End(xlDown).Select
ActiveCell.Offset(20, 0).Range("A1").Select
ActiveSheet.Paste , False 
```

您不需要选择每个单元格，并且作为一个小问题，.Cells(1) 在指定单个单元格时比 .Range("A1") 更容易阅读 - 但两者都有效。只管破产，然后试试这个：

```
set rngToCopy = Selection
Set wsToPaste = wb2.Sheets("Name of Sheet")  'you don't need this if there's one sheet in the wb
rngToCopy.copy
wsToPaste.Cells(1).End(xlDown).Offset(20, 0).PasteSpecial
Application.CutCopyMode = False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:54:07.783

您需要激活的工作簿可能不是正确的工作簿。检查此链接：[Excel VBA pastelink 运行时错误 1004：应用程序定义或对象定义错误](https://stackoverflow.com/q/1753550/122139)

# delphi - 从注册表读取中读取是否有可能阻止 COM 服务器启动？

> ID：14756442
> 
> 赞同：2
> 
> 时间：2013-02-07T16:48:10.110
> 
> 标签：delphi, com, registry

我有一些代码`CreateComObject(...)`在检查注册表项`HKEY_CURRENT_USER\SOFTWARE\Classes\CLSID\...\LocalServer32`是否有效后基本上会调用。

问题是：COM 服务器只有在我不检查注册表项时才能正确加载。

这怎么可能？

```
const
  csLibGuid                 : TGUID  = '...';
  csLibMd5Sum               : string = '...';
  csLibRegKeyFormatRegular  : string = '\SOFTWARE\Classes\CLSID\%s\LocalServer32';
  csLibRegKeyFormatWow64    : string = '\SOFTWARE\Classes\Wow6432Node\CLSID\%s\LocalServer32';
  csLibClassName            : string = '...';

procedure TLibLoader.CheckLibraryChecksum;
var
  FileNames  : TStringList;
  Registry   : TRegistry;

  procedure AddFileName(AHKEY: HKEY; const AFormat: string);
  begin
    Registry.RootKey := AHKEY;
    Registry.OpenKey(
        Format(AFormat, [GUIDToString(csLibGuid)])
      , False
    );
    try
      FileName := Registry.ReadString(csEmpty);
      if Trim(FileName) > csEmpty then begin
        FileNames.Add(FileName);
      end;
    finally
      Registry.CloseKey;
    end;
  end;

var
  FileName   : string;
  FileDigest : string;
begin
  Registry := TRegistry.Create(KEY_EXECUTE);
  try
    FileNames := TStringList.Create;
    try
      FileNames.Duplicates := dupIgnore;
      FileNames.Sorted     := True;
      AddFileName(HKEY_LOCAL_MACHINE, csLibRegKeyFormatRegular);
      AddFileName(HKEY_LOCAL_MACHINE, csLibRegKeyFormatWoW64);
      AddFileName(HKEY_CURRENT_USER , csLibRegKeyFormatRegular);
      AddFileName(HKEY_CURRENT_USER , csLibRegKeyFormatWoW64);
      if FileNames.Count = 0 then begin
        raise EProtector.Create('All registry keys are empty');
      end;
      for FileName in FileNames do begin
        if not FileExists(FileName) then begin
          raise Exception.Create(Format('File "%s" does not exist', [FileName]));
        end;
        FileDigest := TMD5.HashFile(FileName);
        if not AnsiSameText(FileDigest, csLibMd5Sum) then begin
          raise Exception.Create(Format('File "%s" is not valid', [FileName]));
        end;
      end;
    finally
      FileNames.Free;
    end;
  finally
    Registry.Free;
  end;
end;

CheckLibraryChecksum;
CreateComObject(csLibGuid); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:00:26.243

您没有检查`OpenKey`. 您必须这样做，并且只有在`OpenKey`返回时才继续读取值`True`。

我怀疑其中一些键不存在。然后，您忽略`False`返回`OpenKey`的值并尝试读取一个值。这将导致引发异常。

所以你的功能应该是这样的：

```
procedure AddFileName(AHKEY: HKEY; const AFormat: string);
begin
  Registry.RootKey := AHKEY;
  if Registry.OpenKey(
      Format(AFormat, [GUIDToString(csLibGuid)])
    , False
  ) then begin
    try
      FileName := Registry.ReadString(csEmpty);
      if Trim(FileName) > csEmpty then begin
        FileNames.Add(FileName);
      end;
    finally
      Registry.CloseKey;
    end;
  end;
end; 
```

我个人会使用`OpenKeyReadOnly`，因为我觉得它更明确。我意识到您使用`KEY_EXECUTE`的`Access`价值与`KEY_READ`. 我只是觉得这`OpenKeyReadOnly`让人类读者更容易验证意图。

# zend-framework2 - 如何让 Zend Di 使用带有 RuntimeDefinition 的 setter 注入

> ID：14756443
> 
> 赞同：1
> 
> 时间：2013-02-07T16:48:10.087
> 
> 标签：zend-framework2

我有一些设置器的类，我希望使用设置器注入，但是使用 RuntimeDefinition 它只是没有触发。我最初认为这可能是不可能的，但后来我升级到 Zend 2.1.0 并开始收到我的 Zend\Db\Adapter\Adapter 错误，因为引入了新的 setProfiler() 方法，所以它被注入到其他一些类中，并且它正在尝试对其进行 setter 注入（同时使用默认的 RuntimeDefinition）。我查看了 Adapter 的代码，我发现该代码与我的代码之间的唯一区别是 setProfiler() 方法中有一些带有 @param 的文档注释，所以我认为反射可能使用它。我在我的代码中添加了一些，它也不起作用。显然我错过了一些东西。即使我编译成 DI 定义文件，

```
'methods' => 
array (
  '__construct' => true,
  'setProfiler' => true,
) 
```

而我的定义是这样的：

```
'methods' => 
array (
  'setMyValue' => false,
) 
```

如何让 Di 正确识别我的 setter 函数，以便它们习惯于注入必要的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:08:08.123

在深入研究了[`CompilerDefinition`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/Di/Definition/CompilerDefinition.php)班级的内部之后，我已经弄清楚了。

在 Zend\Db\Adapter\Adapter 的情况下调用 setter 的原因是`Profiler\ProfilerAwareInterface`.

看来，如果您的类实现了一个接口并且该接口中有一个设置器，那么该设置器将被调用。实现的接口名称[与 regex 匹配`/\w*Aware\w*/`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/Di/Definition/IntrospectionStrategy.php#L31-L34)也很重要。

您可以在[Ralphschindler 的示例中看到此逻辑的`Zend\Di`示例](https://github.com/ralphschindler/Zend_DI-Examples/blob/master/example-02.php)。

# wordpress - WordPress更新错误

> ID：14756444
> 
> 赞同：0
> 
> 时间：2013-02-07T16:48:10.963
> 
> 标签：wordpress, permissions

当我尝试将 WordPress 更新到最新版本时，我收到以下错误：

“下载失败。：文件流的目标目录不存在或不可写。安装失败”

我们在 IIS 7.5 中的专用 Win 2008 R2 服务器上运行 WordPress，您能帮我修复这个错误，或者至少帮我找出 WordPress 尝试访问文件系统的帐户吗？类似问题（[WordPress 更新失败](https://stackoverflow.com/questions/8725157/wordpress-update-failing)）中的任何建议都不起作用。我也没有在 WordPress 支持网站上找到任何有效的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:51:51.057

确保 PHP 用户有权访问 WordPress 目录。这使 IIS 无法确定实际用户。

通常，它是**IUSR**，而不是应用程序池身份用户。

# android - 幻灯片菜单和选项卡式 ViewPager 作为片段

> ID：14756445
> 
> 赞同：-1
> 
> 时间：2013-02-07T16:48:15.813
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在使用`Slidemenu`jfeinstein10 的[GitHub repo](https://github.com/jfeinstein10/SlidingMenu)。我目前正在使用`switchFragment`他的方法来交换上述片段。目前的代码松散地基于响应式 ui 示例。

```
private void switchFragment(Fragment fragment) {
    if (getActivity() == null)
        return;

    if (getActivity() instanceof BaseActivity) {
        BaseActivity ra = (BaseActivity) getActivity();
        ra.switchContent(fragment);
    }
} 
```

它工作正常，但我认为上面的每个片段都应该有一个`viewpager`（每个人都有不同的选项卡）。像这样的东西：

![小样](../Images/ac442a71a7ba6b5762a7c8e2d023c4bd.png)

所以对于 a`viewpager`我需要将片段转换为`FragmentActivity`. 最好的方法是什么？

**编辑：**

我尝试了什么？首先，我通过stackoverflow和slidemenu github搜索了类似的问题。然后我尝试了将片段转换为 FragmentActivity 并修复代码（错误明智）的愚蠢方法。但是，我收到了一些令人讨厌的错误，并且不知何故之后的代码很丑陋。所以我希望这里有更多Android专业知识的人知道如何更优雅地完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:51:10.333

没关系。解决它。我使用意图启动 FragmentActivity 并使用 BaseActivity 扩展 ViewPager。

# asp.net - .DataSource 输出重复列表？

> ID：14756449
> 
> 赞同：1
> 
> 时间：2013-02-07T16:48:36.723
> 
> 标签：asp.net, datasource

当用户从下拉列表中选择一个值并单击按钮时，该值将添加到第二个列表（也显示在屏幕上）。

问题是当用户单击按钮时，所选值被添加到第二个列表中，但是下拉列表被复制并添加到原始下拉列表中。

所以我们在原始下拉列表中有 1、2、3，用户选择“1”并按下按钮。'1' 被添加到第二个列表并显示在屏幕上，但是当用户单击下拉列表时，它现在包含 2、3、1、2、3

我用断点检查了我的代码，我认为它与.dataSource有关。

```
protected void UpdatePage()
{
   int Id = System.Convert.ToInt32(Id.Value);

   List<Contractor> allContractors = new List<Contractor>();
   ClarkeDBDataContext db = new ClarkeDBDataContext();

   allSubContractors = (from BoqContractors in db.BOQ_Contractors
                        where BoqContractors.Bill_Of_Quantity_id == tempBoqId
                        select BoqContractors.Contractor).ToList();

   repeaterShowContractorName.DataSource = allContractors;
   repeaterShowContractorName.DataBind();

   IEnumerable<Sub> availableContractors = 
       (from sc in db.Contractors
        select sc).ToList().Except(allContractors);

    //i've tried to set it to null to test it, but to no avail
    DropDownListContractors.DataSource = null;
    DropDownListContractors.DataSource = availableContractors;
    DropDownListContractors.DataBind();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:02:29.157

由于 ViewState 和 Postback，ddl 中存在原始值。ddl 在 Postback 上重新填充。这就是为什么存在原始值的原因。

我不确定在这个用例中为什么需要从数据库中重新获取数据。如果您确实需要从数据库刷新列表，只需`DropDownListContractors.Clear()`在设置`DataSource`. 这将清除列表。

**但是**，就像我之前所说的，我认为您不需要从数据库中重新绑定 ddl。只需从您的代码中删除这些行（回发时），它应该可以按您的意愿工作：

```
 IEnumerable<Sub> availableContractors = 
       (from sc in db.Contractors
        select sc).ToList().Except(allContractors);

    //i've tried to set it to null to test it, but to no avail
    DropDownListContractors.DataSource = null;
    DropDownListContractors.DataSource = availableContractors;
    DropDownListContractors.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:42:18.893

在 VB 方面， DropDownListContractors.ClearSelection() 是不够的，如果你没有选择数据，在我的情况下我没有，但仍然需要清除列表中的数据。

如果我只使用 DropDownListContractors.Items.Clear()，它将清除我的列表中已经在我的 aspx 页面中设置的数据。（我有时需要保留一两行以及数据绑定数据）。

我发现的唯一解决方法是在页面加载中添加一个条件，无论页面是否已经从我们的数据库中获取了源。该数据不太可能改变。：

```
If Not Page.IsPostBack Then
  'myComboBox.Items.Clear() 
  'Can't use this, i got one or two items i gotta keep from the aspx page
  'myComboBox.DataSource = Nothing 
  'DOESNT WORK
  myComboBox.DataSource = someSource
  myComboBox.DataBind()
End If 
```

如果我支持您的情况，我只需调用 items.clear() 并在后面的 .vb 代码中手动添加我需要的项目。

# c - 如何在 C 中通过 HTTP 编写图像？

> ID：14756453
> 
> 赞同：0
> 
> 时间：2013-02-07T16:48:56.247
> 
> 标签：c, http, networking, network-programming

刚才我通过连接编写HTML内容没有问题。

```
 sprintf(toreturn, "%s\r\n%s\r\n%s\r\n\r\n%s", "HTTP/1.1 200 OK", "Content-Type: text/html", "Connection: close",htmlstring);
    write(*inputfd, toreturn, strlen(toreturn)) 
```

哪个工作正常。但这就是我试图传递图像以响应图像请求的原因。在这种情况下，它适用于`.ico`文件，但我的问题代表任何二进制文件。

```
 FILE *writefile = (FILE *)calloc(1,sizeof(FILE));
    char *charptr = inputaddress;
    charptr++;
    writefile=fopen(charptr,"r");

    sprintf(toreturn, "%s\r\n%s\r\n%s\r\n\r\n", "HTTP/1.1 200 OK", "Content-Type: image/vnd.microsoft.icon", "Connection: close");
    write(*inputfd, toreturn, strlen(toreturn))
    write(*inputfd, *writefile, strlen(toreturn)
    close(*inputfd);
    fclose (writefile); 
```

这是行不通的。如何`write()`在 C 中通过 HTTP 生成图像（或任何二进制文件）文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:00:46.053

处理二进制数据时不能使用 C 字符串函数。C 字符串以 0 字节结尾，因此`strlen()`在任何可能包含二进制数据的字符串上使用都将返回截断的结果。

此外，您不能使用`'*'`运算符来获取文件的内容。此外，您不应该将`FILE*`函数（fopen/fclose/fread/fwrite）与常规函数（open/close/read/write）混合使用，并且使用`sprintf()`通常会带来麻烦 - 更安全的替代方法是`snprintf()`.

至于你必须做什么才能让它工作，你应该`open()`阅读图标，然后使用该`read()`函数在循环中获取缓冲区的数据，直到返回小于0的值。可能会找到一个例子这里：[http ://www.java-samples.com/showtutorial.php?tutorialid=569](http://www.java-samples.com/showtutorial.php?tutorialid=569)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:02:00.163

两个问题：

1.  您必须在 HTTP 标头中输出内容长度标头。

2.  Writefile 不是您图像的数据，您的代码所做的只是将文件描述符的内容输出到客户端。

正确的顺序应该是这样的

1.  打开图标文件。
2.  查询图标文件长度
3.  创建 HTTP 标头，方法与现在相同，但也包括 Content-Length 标头。
4.  将文件内容读入缓冲区
5.  将内容输出到输出套接字。

注意，对于大文件，第 4 步和第 5 步必须写在循环中，否则会浪费内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:55:17.313

那么，您认为*这段*代码的作用是什么？

```
writefile=fopen(charptr,"r");
...
write(*inputfd, *writefile, strlen(toreturn) 
```

如果您说“写入`writefile`引用的文件的内容”，那`inputfd`您就错了。

`write`获取一个包含您要写入的*实际数据的**缓冲区*，并要求您指定要写入的字节数。您正在向它传递一个（这不是函数期望或需要的）并要求它写入与标题一样多的字节。*`FILE`*

 *坦率地说，我很惊讶这甚至可以编译......

尝试打开您想要的文件，找出大小，分配适当大小的缓冲区，将内容读入所述缓冲区，关闭文件，然后将整个缓冲区发送给客户端。*

# requirejs - 这两个 requirejs 模块有什么区别？

> ID：14756455
> 
> 赞同：0
> 
> 时间：2013-02-07T16:49:02.987
> 
> 标签：requirejs

抱歉，如果这似乎是一个奇怪的问题，但我刚刚开始学习 requirejs 和一些高级 javascript。

这两个模块都有效，所以问题是：有什么区别，为什么我应该更喜欢第一种/第二种方式？

```
// First way
define(['handlebars', 'backbone.marionette'], 
    function() {
        console.log(Handlebars, Backbone.Marionette); // Ok
    }
);

// Another way
define(['handlebars', 'backbone.marionette'], 
    function(Handlebars, BackboneMarionette) {
        console.log(Handlebars, BackboneMarionette); // Ok
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:58:06.683

```
define(['handlebars', 'backbone.marionette'], 
    function() {
        console.log(Handlebars, Backbone.Marionette); // Ok
    }
); 
```

这个工作的唯一原因是您已经在窗口命名空间中存在车把和木偶。因此，Handlebars、Backbone.Marionette 是存在于函数定义之外的全局值。IE ：

```
console.log(Handlebars, Backbone.Marionette); // ok
define(['handlebars', 'backbone.marionette'], 
    function() {
        console.log(Handlebars, Backbone.Marionette); // Ok
    }
); 
```

# android - 关于 PreferenceActivity 的 Android 已弃用方法警告

> ID：14756457
> 
> 赞同：18
> 
> 时间：2013-02-07T16:49:05.287
> 
> 标签：android, sharedpreferences, deprecated, android-preferences, preferenceactivity

当我尝试按照 Android 的开发人员指南和教程使用首选项创建设置活动时，我收到如下警告：

“不推荐使用 PreferenceActivity 类型的方法 addPreferencesFromResource(int)”

对于代码中的这两行：

```
getPreferenceManager().setSharedPreferencesName(PREFS_NAME);
addPreferencesFromResource(R.xml.default_values); 
```

我知道这些只是警告，但我想知道当我运行我正在设计的应用程序时，它们是否会在现在或将来引起任何问题。

```
public class DefaultValues extends PreferenceActivity {

    static final String PREFS_NAME = "defaults";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getPrefs(this);
        getPreferenceManager().setSharedPreferencesName(PREFS_NAME);
        addPreferencesFromResource(R.xml.default_values);
    }

    static SharedPreferences getPrefs(Context context) {
        PreferenceManager.setDefaultValues(context, PREFS_NAME, MODE_PRIVATE,
                R.xml.default_values, false);
        return context.getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2018-07-03T08:21:30.870

`PreferenceActivity()`已弃用，但`PreferenceFragment()`现在也已弃用。`PreferenceFragmentCompat()`现在是要走的路：

**添加依赖**

```
implementation "androidx.preference:preference:1.1.1" 
```

或者，如果您仍在使用支持库：

```
implementation "com.android.support:preference-v7:28.0.0" 
```

**扩展 PreferenceFragmentCompat**

```
class MyPreferenceFragment : PreferenceFragmentCompat() {
    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
        addPreferencesFromResource(R.xml.app_preferences)
    }
} 
```

**展示你的片段**

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    supportFragmentManager.beginTransaction().replace(android.R.id.content, MyPreferenceFragment()).commit()
} 
```

**指定偏好主题**

在您的 AppTheme 中，添加以下任一首选项主题，具体取决于您认为哪个更好看：

```
<item name="preferenceTheme">@style/PreferenceThemeOverlay</item>
<item name="preferenceTheme">@style/PreferenceThemeOverlay.v14.Material</item> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-07T17:02:30.620

由于该方法已被弃用，因此建议您不要在代码中使用它，因为它完全有可能在未来的 Android 版本中被删除。但是，我还没有遇到实际上已从 Android 中删除的已弃用方法。

该方法的描述中没有提供替代方法，因为首选方法（从 API 级别 11 开始）是实例化[PreferenceFragment](http://developer.android.com/reference/android/preference/PreferenceFragment.html)对象以从资源文件加载您的首选项。在此处查看示例代码：[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-05T04:59:52.663

如果您面临来自以下方法的弃用警告：

```
addPreferencesFromResource(R.xml.default_values); 
```

您必须使用 PreferenceFragment 因为 API 11 及更高版本需要这种方法。

以下是如何使用 PreferenceFragment 的示例：

1.创建/res/xml/preferences.xml来定义我们的偏好。

```
 <PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android">

<PreferenceCategory
        android:title="PreferenceCategory A">

    <CheckBoxPreference
            android:key="checkbox_preference"
            android:title="title_checkbox_preference"
            android:summary="summary_checkbox_preference" />

</PreferenceCategory>

<PreferenceCategory
        android:title="PreferenceCategory B">

    <EditTextPreference
            android:key="edittext_preference"
            android:title="title_edittext_preference"
            android:summary="summary_edittext_preference"
            android:dialogTitle="dialog_title_edittext_preference" />

</PreferenceCategory> 
```

2.创建 PrefsFragment.java 将 PreferenceFragment 扩展为 addPreferencesFromResource。

```
 package com.example.androidpreferencefragment;

   import android.os.Bundle;
   import android.preference.PreferenceFragment;

   public class PrefsFragment extends PreferenceFragment {

   @Override
   public void onCreate(Bundle savedInstanceState) {
   // TODO Auto-generated method stub
   super.onCreate(savedInstanceState);

   // Load the preferences from an XML resource
    addPreferencesFromResource(R.xml.preferences);
   }

 } 
```

3.创建SetPreferenceActivity.java来加载PrefsFragment。

```
package com.example.androidpreferencefragment;

import android.app.Activity;
import android.os.Bundle;

public class SetPreferenceActivity extends Activity {

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  // TODO Auto-generated method stub
  super.onCreate(savedInstanceState);

  getFragmentManager().beginTransaction().replace(android.R.id.content,
                new PrefsFragment()).commit();
 }

} 
```

4.修改主布局，/res/layout/activity_main.xml，以显示首选项。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<CheckBox
    android:id="@+id/prefCheckBox"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="CheckBoxPreference" />

<TextView
    android:id="@+id/prefEditText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

5.主Activity，MainActivity.java。

```
package com.example.androidpreferencefragment;

import android.os.Bundle;
import android.preference.PreferenceManager;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.CheckBox;
import android.widget.TextView;

public class MainActivity extends Activity {

 CheckBox prefCheckBox;
 TextView prefEditText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    prefCheckBox = (CheckBox)findViewById(R.id.prefCheckBox);
 prefEditText = (TextView)findViewById(R.id.prefEditText);

 loadPref();
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {

  /*
   * Because it's onlt ONE option in the menu.
   * In order to make it simple, We always start SetPreferenceActivity
   * without checking.
   */

  Intent intent = new Intent();
    intent.setClass(MainActivity.this, SetPreferenceActivity.class);
    startActivityForResult(intent, 0); 

    return true;
 }

  @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  // TODO Auto-generated method stub
  //super.onActivityResult(requestCode, resultCode, data);

  /*
   * To make it simple, always re-load Preference setting.
   */

  loadPref();
 }

 private void loadPref(){
  SharedPreferences mySharedPreferences =        PreferenceManager.getDefaultSharedPreferences(this);

  boolean my_checkbox_preference = mySharedPreferences.getBoolean("checkbox_preference", false);
  prefCheckBox.setChecked(my_checkbox_preference);

  String my_edittext_preference = mySharedPreferences.getString("edittext_preference", "");
  prefEditText.setText(my_edittext_preference);

 }

} 
```

5.最后修改AndroidManifest.xml，添加SetPreferenceActivity。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.androidpreferencefragment"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".SetPreferenceActivity"
        android:label="@string/title_activity_main" >
    </activity>
</application> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T17:38:12.253

首选实现现在使用`Fragment`s。以下将起作用：

```
public class DefaultValues extends Activity {

    static final String PREFS_NAME = "defaults";    
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // Display the fragment as the main content.
        if (savedInstanceState == null)
            getFragmentManager().beginTransaction().add(android.R.id.content, new PrefFragment()).commit();
    }

    public static class PrefFragment extends PreferenceFragment
    {
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);

            getPreferenceManager().setSharedPreferencesName(PREFS_NAME);
            addPreferencesFromResource(R.xml.default_values);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T17:13:43.867

Raghav Sood 是正确的。但是，如果您需要 PreferenceFragment bad（我需要在选项卡中），您可以使用它。但它可以在未来刹车，所以最好只将它用于旧的 api。这是我用 SupportLibrary 和反射做的一点修改的 PreferenceFragment。

```
import java.lang.reflect.Constructor;
import java.lang.reflect.Method;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.preference.Preference;
import android.preference.PreferenceManager;
import android.preference.PreferenceScreen;
import android.support.v4.app.Fragment;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnKeyListener;
import android.widget.ListView;

@SuppressLint("HandlerLeak")
public abstract class PreferenceFragment
        extends Fragment
{

    private static final String PREFERENCES_TAG = "android:preferences";

    private PreferenceManager mPreferenceManager;
    private ListView mList;
    private boolean viewCreated;
    // private boolean mHavePrefs;
    // private boolean mInitDone;

    /**
     * The starting request code given out to preference framework.
     */
    private static final int FIRST_REQUEST_CODE = 100;

    private static final int MSG_BIND_PREFERENCES = 1;
    private final Handler mHandler = new Handler()
    {
        @Override
        public void handleMessage(Message msg)
        {
            switch (msg.what) {

            case MSG_BIND_PREFERENCES:
                if (viewCreated) {
                    bindPreferences();
                }
                break;
            }
        }
    };

    private final Runnable mRequestFocus = new Runnable()
    {
        @Override
        public void run()
        {
            mList.focusableViewAvailable(mList);
        }
    };

    /**
     * Interface that PreferenceFragment's containing activity should implement
     * to be able to process preference items that wish to switch to a new
     * fragment.
     */
    public interface OnPreferenceStartFragmentCallback
    {
        /**
         * Called when the user has clicked on a Preference that has a fragment
         * class name associated with it. The implementation to should
         * instantiate and switch to an instance of the given fragment.
         */
        boolean onPreferenceStartFragment(PreferenceFragment caller,
                Preference pref);
    }

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        try {
            Constructor<?> constructor = PreferenceManager.class
                    .getDeclaredConstructor(Activity.class, int.class);
            constructor.setAccessible(true);
            mPreferenceManager = (PreferenceManager) constructor.newInstance(
                    getActivity(), FIRST_REQUEST_CODE);
        } catch (Throwable e) {
            throw new RuntimeException(
                    "Could not instantiate PreferenceManager: "
                            + e.getMessage());
        }

    }

    @Override
    public final View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.activity_preferences, null);
        this.viewCreated = true;
        return v;
    }

    // @Override
    // public View onCreateView(LayoutInflater inflater, ViewGroup container,
    // Bundle savedInstanceState) {
    // return inflater.inflate(R.layout.preference_list_fragment, container,
    // false);
    // }

    @Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);

        // if (mHavePrefs) {
        bindPreferences();
        // }

        // mInitDone = true;

        if (savedInstanceState != null) {
            Bundle container = savedInstanceState.getBundle(PREFERENCES_TAG);
            if (container != null) {
                final PreferenceScreen preferenceScreen = getPreferenceScreen();
                if (preferenceScreen != null) {
                    preferenceScreen.restoreHierarchyState(container);
                }
            }
        }
    }

    // @Override
    // public void onStart() {
    // super.onStart();
    // IllegalAccessException
    // try {
    // Method m = PreferenceManager.class
    // .getDeclaredMethod("setOnPreferenceTreeClickListener",
    // Class.forName("android.preference.PreferenceManager$OnPreferenceTreeClickListener"));
    // m.invoke(mPreferenceManager, this);
    // } catch (Exception e) {
    // e.printStackTrace();
    // }
    // mPreferenceManager.setOnPreferenceTreeClickListener(this);
    // }

    @Override
    public void onStop()
    {
        super.onStop();
        try {
            Method m = PreferenceManager.class
                    .getDeclaredMethod("dispatchActivityStop");
            m.setAccessible(true);
            m.invoke(mPreferenceManager);
        } catch (Exception e) {
            e.printStackTrace();
        }
        // IllegalAccessException
        // try {
        // Method m = PreferenceManager.class
        // .getDeclaredMethod("setOnPreferenceTreeClickListener",
        // Class.forName("android.preference.PreferenceManager$OnPreferenceTreeClickListener"));
        // m.invoke(mPreferenceManager, (Object) null);
        // } catch (Exception e) {
        // e.printStackTrace();
        // }
        // mPreferenceManager.setOnPreferenceTreeClickListener(null);
    }

    @Override
    public void onDestroyView()
    {
        this.viewCreated = false;
        mList = null;
        mHandler.removeCallbacks(mRequestFocus);
        mHandler.removeMessages(MSG_BIND_PREFERENCES);
        super.onDestroyView();
    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        try {
            Method m = PreferenceManager.class
                    .getDeclaredMethod("dispatchActivityDestroy");
            m.setAccessible(true);
            m.invoke(mPreferenceManager);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);

        final PreferenceScreen preferenceScreen = getPreferenceScreen();
        if (preferenceScreen != null) {
            Bundle container = new Bundle();
            preferenceScreen.saveHierarchyState(container);
            outState.putBundle(PREFERENCES_TAG, container);
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);

        try {
            Method m = PreferenceManager.class.getDeclaredMethod(
                    "dispatchActivityResult", int.class, int.class,
                    Intent.class);
            m.setAccessible(true);
            m.invoke(mPreferenceManager, requestCode, resultCode, data);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Returns the {@link PreferenceManager} used by this fragment.
     * 
     * @return The {@link PreferenceManager}.
     */
    public PreferenceManager getPreferenceManager()
    {
        return mPreferenceManager;
    }

    /**
     * Sets the root of the preference hierarchy that this fragment is showing.
     * 
     * @param preferenceScreen
     *            The root {@link PreferenceScreen} of the preference hierarchy.
     */
    public void setPreferenceScreen(PreferenceScreen preferenceScreen)
    {
        try {
            Method m = PreferenceManager.class.getDeclaredMethod(
                    "setPreferences", PreferenceScreen.class);
            m.setAccessible(true);
            boolean result = (Boolean) m.invoke(mPreferenceManager,
                    preferenceScreen);
            if (result && preferenceScreen != null) {
                postBindPreferences();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Gets the root of the preference hierarchy that this fragment is showing.
     * 
     * @return The {@link PreferenceScreen} that is the root of the preference
     *         hierarchy.
     */
    public PreferenceScreen getPreferenceScreen()
    {
        try {
            Method m = PreferenceManager.class
                    .getDeclaredMethod("getPreferenceScreen");
            m.setAccessible(true);
            return (PreferenceScreen) m.invoke(mPreferenceManager);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    /**
     * Adds preferences from activities that match the given {@link Intent}.
     * 
     * @param intent
     *            The {@link Intent} to query activities.
     */
    public void addPreferencesFromIntent(Intent intent)
    {
        requirePreferenceManager();
        try {
            Method m = PreferenceManager.class
                    .getDeclaredMethod("inflateFromIntent");
            m.setAccessible(true);
            PreferenceScreen ps = (PreferenceScreen) m.invoke(
                    mPreferenceManager, intent, getPreferenceScreen());
            setPreferenceScreen(ps);
        } catch (Throwable e) {

        }
    }

    /**
     * Inflates the given XML resource and adds the preference hierarchy to the
     * current preference hierarchy.
     * 
     * @param preferencesResId
     *            The XML resource ID to inflate.
     */
    public void addPreferencesFromResource(int preferencesResId)
    {
        requirePreferenceManager();

        try {
            Method m = PreferenceManager.class.getDeclaredMethod(
                    "inflateFromResource", Context.class, int.class,
                    PreferenceScreen.class);
            m.setAccessible(true);
            PreferenceScreen prefScreen = (PreferenceScreen) m.invoke(
                    mPreferenceManager, getActivity(), preferencesResId,
                    getPreferenceScreen());
            setPreferenceScreen(prefScreen);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * {@inheritDoc}
     */
    public boolean onPreferenceTreeClick(PreferenceScreen preferenceScreen,
            Preference preference)
    {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            try {
                Method m = Preference.class.getDeclaredMethod("getFragment");
                Object o = m.invoke(preference);
                if (o != null
                        && getActivity() instanceof OnPreferenceStartFragmentCallback) {
                    return ((OnPreferenceStartFragmentCallback) getActivity())
                            .onPreferenceStartFragment(this, preference);
                }
            } catch (Throwable e) {
            }
        }
        return false;
    }

    /**
     * Finds a {@link Preference} based on its key.
     * 
     * @param key
     *            The key of the preference to retrieve.
     * @return The {@link Preference} with the key, or null.
     * @see PreferenceGroup#findPreference(CharSequence)
     */
    public Preference findPreference(CharSequence key)
    {
        if (mPreferenceManager == null) {
            return null;
        }
        return mPreferenceManager.findPreference(key);
    }

    private void requirePreferenceManager()
    {
        if (mPreferenceManager == null) {
            throw new RuntimeException(
                    "This should be called after super.onCreate.");
        }
    }

    private void postBindPreferences()
    {
        if (mHandler.hasMessages(MSG_BIND_PREFERENCES))
            return;
        mHandler.obtainMessage(MSG_BIND_PREFERENCES).sendToTarget();
    }

    private void bindPreferences()
    {
        final PreferenceScreen preferenceScreen = getPreferenceScreen();
        if (preferenceScreen != null) {
            preferenceScreen.bind(getListView());
        }
    }

    /** @hide */
    public ListView getListView()
    {
        ensureList();
        return mList;
    }

    private void ensureList()
    {
        if (mList != null) {
            return;
        }
        View root = getView();
        if (root == null) {
            throw new IllegalStateException("Content view not yet created");
        }
        View rawListView = root.findViewById(android.R.id.list);
        if (!(rawListView instanceof ListView)) {
            throw new RuntimeException(
                    "Content has view with id attribute 'android.R.id.list' "
                            + "that is not a ListView class");
        }
        mList = (ListView) rawListView;
        if (mList == null) {
            throw new RuntimeException(
                    "Your content must have a ListView whose id attribute is "
                            + "'android.R.id.list'");
        }
        mList.setOnKeyListener(mListOnKeyListener);
        mHandler.post(mRequestFocus);
    }

    private OnKeyListener mListOnKeyListener = new OnKeyListener()
    {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            Object selectedItem = mList.getSelectedItem();
            if (selectedItem instanceof Preference) {
                View selectedView = mList.getSelectedView();
                Preference p = (Preference) selectedItem;
                try {
                    Method m = Preference.class.getDeclaredMethod("onKey",
                            View.class, int.class, KeyEvent.class);
                    m.setAccessible(true);
                    boolean result = (Boolean) m.invoke(p, selectedView,
                            keyCode, event);
                    return result;
                } catch (Throwable e) {
                }
            }
            return false;
        }

    };
} 
```

# watir - 如何使用 watir 从 HTML 中获取所有链接？

> ID：14756470
> 
> 赞同：0
> 
> 时间：2013-02-07T16:49:50.707
> 
> 标签：watir, watir-webdriver

我需要获取 HTML 页面上所有链接的数组。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T17:21:20.290

您可以通过执行以下操作获取页面上所有链接的集合：

```
browser.links 
```

或者

```
browser.as 
```

然后，您可以执行以下操作：

```
#Get all link texts as an array
browser.links.collect(&:text)

#Click the second link
browser.links[1].click 
```

如果您真的希望将链接作为数组，您可以使用该`to_a`方法（尽管我不记得需要这样做的时间）：

```
browser.links.to_a 
```

# sql - DB 设计：测试调度 - 我的计划有什么问题吗？

> ID：14756479
> 
> 赞同：0
> 
> 时间：2013-02-07T16:50:21.127
> 
> 标签：sql, database

我很困惑如何为我需要设计的测试调度应用程序设计我的数据库。我将有一个测试中心。该测试中心将有 X 个座位。人们可以在 30 分钟内安排一次测试。

起初我打算用每个可用位置的记录填充我的数据库，然后将它们标记为“保留”，但这似乎是多余的，而且是错误的做法。

我的计划是有一张桌子（我们将来可能会有多个考试中心），上面写着考试中心 A 有 X 个座位。

然后，当一个人尝试安排测试时（或者当我显示可用座位时），我可以为每 30 分钟的时间块查询类似的内容：

`SELECT * FROM reservations WHERE startTime == >= x AND endTime <= Y`或类似的东西。然而，这需要我每次想知道有多少座位空着时都要进行复杂的查询。我基本上必须计算每个时间块存在的预订数量，认为我会将这些开始/结束时间保存为一个跨度，而不仅仅是每个 30 分钟块的单个记录。

我的另一个计划是这样的。如果一个人保留时间表格 9-10。创建两条记录，一条在 9，一条在 930，但使用指向实际预订记录的外键。因此，要找到空位，我可以查询保存单个保留块的表。

有没有人做过类似的应用程序，或建议，在哪里寻找构建这些数据的例子？w

我知道这个问题有点含糊，但我不知道在哪里最好发布讨论。我认为必须有一种正确的方法来做到这一点，以一种简单的方式保持标准化数据。**有更好的地方问这个吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:56:44.970

您最好忘记任意 30 分钟的时间段，而只考虑开始和结束时间。

# ssl - Apache Httpd 作为 SSL 终止代理

> ID：14756480
> 
> 赞同：8
> 
> 时间：2013-02-07T16:50:29.597
> 
> 标签：ssl, https, apache

我想将我的 Httpd 设置为嵌入式 Jetty 的 SSL 终止代理。

我找到了这篇[文章](http://www.nczonline.net/blog/2012/08/08/setting-up-apache-as-a-ssl-front-end-for-play/)，但是，它不适用于我的配置。在我的 httpd-vhosts.conf 中使用以下内容，我可以`http://mysite:9023`通过`http://app.mysite`. 但是，我无法`http://mysite:9023`通过`https://app.mysite`.

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerName app.mysite
    ServerAlias www.app.mysite
    ProxyPreserveHost On
    <Proxy *>
        AddDefaultCharset Off
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPass / http://mysite:9023/
    ProxyPassReverse / http://mysite:9023/
</VirtualHost>

NameVirtualHost *:443
<VirtualHost *:443>
    ServerName app.mysite
    ServerAlias www.app.mysite
    ProxyPreserveHost On
    SSLEngine On
    SSLCertificateFile    "C:\apache\httpd\conf\server.crt"
    SSLCertificateKeyFile "C:\apache\httpd\conf\server.key"
    <Location />
        SSLRequireSSL
    </Location>
   ProxyPass / http://mysite:9023/
   ProxyPassReverse / http://mysite:9023/
</VirtualHost> 
```

# java - 在按钮中添加总计

> ID：14756481
> 
> 赞同：0
> 
> 时间：2013-02-07T16:50:30.247
> 
> 标签：java, vector, controller, software-design

我在按钮中添加代码时遇到了一些问题，例如：我在数量上输入 2 它将 * 价格和数量示例 400 * 2 = 800 但是当我再次输入 2 时意味着 800 x 2 = 1600，有人可以指导我吗？感谢错误显示在最后 2 行。
` 私有 void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
int id = Integer.parseInt(jTextField1.getText()); int qty = Integer.parseInt(jTextField2.getText());

```
 purchasecontroller.PurchaseProduct(id, qty);
       String getname = displaycontroller.SearchbyProductName(id);
        jLabel4.setText( "" + getname );
        jLabel3.setText("" + qty);
          jList1.addElement(getname + qty);
  //     jList1.add(new Product("Hello", 1));
        String getprice = displaycontroller.SearchbyProductPrice(id);
      int total = qty * Integer.parseInt (getprice);
      jLabel11.setText("" + total );
       int finals = (total * qty);
       jLabel12.setText("" + finals );
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:53:01.063

应该

```
int total = qty * Integer.parseInt (getprice); 
```

代替

```
int total = qty * getprice; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:53:17.937

在这条线上：

```
int total = qty * getprice; 
```

您正在尝试将 int (qty) 乘以 String (getprice)，这是无法完成的。

您需要将 getprice 解析为整数，然后在`total`分配中用该新整数替换 getprice。

# css - 我的 CSS 填充是否显示不正确？还是我的语法错误？

> ID：14756482
> 
> 赞同：1
> 
> 时间：2013-02-07T16:50:41.840
> 
> 标签：css, padding

我正在为`h1`和`p`在css中设置填充值，如下所示：

```
h1 {
    padding-left: 30px;
    padding-right: 30px;
}
p {
    padding-left: 33px;
    padding-right: 135px;
    padding-bottom: 30px;
} 
```

但是在使用它们的表格中似乎有某种形式的预格式化填充，因为当表格的 css 中没有缩进时，顶部显示缩进填充了大约 30px。我究竟做错了什么？这是一张图片来解释我的意思：

![1] [示例](../Images/d10ddd320b9add4ec8bb677e5b3ebd7a.png)

我的代码中没有“标题”上方的填充。

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:53:56.430

可能需要重置`h1`元素的默认边距

```
h1 {
    margin:0;
    padding: 0 30px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:57:04.550

在 HTML 中，`h1`标签具有默认边距，请参阅[http://www.w3.org/TR/CSS21/sample.html](http://www.w3.org/TR/CSS21/sample.html)

您可能最好使用以下方法从 h1 中取出默认边距：

```
h1{
margin:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:59:30.010

您可以使用此[重置样式表](http://meyerweb.com/eric/tools/css/reset/)来避免此类问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:10:21.013

如果您使用的是 a`table`那么您需要为`td`顶部设置垂直对齐方式，而不是默认设置`middle`

```
td {
    vertical-align:top;
} 
```

# spring - 什么是春天的“刻板印象”？

> ID：14756486
> 
> 赞同：47
> 
> 时间：2013-02-07T16:50:54.593
> 
> 标签：spring, spring-annotations, stereotype

在 SpringSource 博客条目中，以下句子引用了一个*原型*。

> 因为`@Controller`是 Spring 的`@Component` Stereotype 注释的特化，所以 Spring 容器将自动检测该类作为容器的组件扫描过程的一部分，创建一个 bean 定义并允许像任何其他 Spring 管理的组件一样依赖注入实例。

刻板印象这个词的用法是指什么？这是一个技术性的 Spring 术语吗？还是刻板印象只是在一般意义上使用？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-07T17:26:11.307

[JavaDoc](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/stereotype/package-summary.html)对此做了一些说明。

> 表示类型或方法在整个架构中的角色的注释（在概念级别，而不是实现级别）。

[Merriam-Webster](http://www.merriam-webster.com/dictionary/stereotype)的名词定义是`stereotype`这样说的：

> 符合固定或一般模式的东西；尤指：群体成员共同持有的一种标准化的心理图景，它代表一种过于简单化的观点、偏见的态度或不加批判的判断

似乎是为了建议正在注释的特定类的角色。这似乎是有道理的，因为通常建议您使用 注释您的 Controller 类，使用 注释`@Controller`Service 类`@Service`，等等。

除了明显的组件扫描功能之外，Spring 建议它们为您的 AOP 需求做出很好的切入点划分。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-03-24T19:09:25.673

> 这是一个技术性的 Spring 术语吗？还是刻板印象只是在一般意义上使用？

我认为 Spring 将 Stereotype 一词从现实世界借用为 Spring 的技术术语。

来自美国英语词典：

> （名词）对特定类型的人或事物的广泛持有但固定且过于简单的形象或想法。

在现实世界中，我们知道一些刻板印象，例如：美国人喜欢喝咖啡。英国人喜欢喝茶。当然，并非对所有美国人或英国人都是如此。它只是对美国人或英国人的过度简化。

使用刻板印象帮助我们做出更快的决定。当你的美国朋友过来时，不要问他们“你想喝什么？” 并等待他们的回应。你可以假设他们想要一杯咖啡。

在 Spring 中，构造型帮助我们简化对象创建。您不需要定义 之间的关系`Type`，因为您对`Type`.

注意：[`Type`在 Java 中](https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)。类是一个`Type`.

* * *

假设我们有这些类：

```
public abstract class Friend {

    public abstract String favoriteDrink();
}

public class American extends Friend {

    @Override
    public String favoriteDrink() {
        return "Coffee";
    }
} 
```

**没有刻板印象**

您必须在配置中定义朋友和美国人（朋友是美国人）之间的关系。

```
@Configuration
public class YourAppConfig {

    @Bean
    public Friend defineFriend() {
        return new American();
    }
} 
```

因此，在测试中您可以验证：

```
@RunWith(SpringRunner.class)
@SpringBootTest
public class YourAppTest {

    @Autowired
    private Friend friend;

    @Test
    public void drinkTest() {
        assertEquals(friend.favoriteDrink(), "Coffee");
    }
} 
```

**刻板印象**

刻板印象告诉 Spring，所有 Friend 都是美国人，直接在 Class 声明上。

```
@Component
public class American extends Friend {

    @Override
    public String favoriteDrink() {
        return "Coffee";
    }
} 
```

如果您的课程遇到 Friend 课程，它将假定它是美国人。这是朋友和美国人之间的一对一关系。

如果您希望您的班级以这种方式行事，这将非常有用。您不需要在配置文件中定义 Bean。（您甚至不需要配置文件）。Spring 将自动从该 Stereotype 创建一个 Bean。

* * *

这就是为什么 Component、Repository、Service 和 Controller 注释属于 Stereotype 包的原因。Spring 不太关心你的类的细节，从 Spring 的角度来看，你的类是`Repository`,`Service`和`Controller`，如果它不属于任何一个，那么它就是一个`Component`.

Spring 只是**过度简化**了你的类。因此，名称刻板印象。

# jquery - jQuery 选择器返回由没有特定类的元素隐藏的所有元素

> ID：14756487
> 
> 赞同：1
> 
> 时间：2013-02-07T16:50:55.603
> 
> 标签：jquery

是否可以编写一个选择器来查询所有具有隐藏父级的元素，而隐藏的父级没有特定的类。

例如，给定下面的 HTML，它只会选择 Field2，因为它的父元素是隐藏的，并且隐藏它的父元素没有“选项卡”类。

```
<div class="tab" style="display: none;">
    <div>
        <input name="Field1" />
    </div>
    <div style="display: none;">
        <input name="Field2" />
    </div>
</div>
<div class="tab" style="display: none;">
    <div>
        <input name="Field3" />
    </div>
</div>
<div class="tab">
    <div>
        <input name="Field4" />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:56:32.573

尝试这个：

```
$("input").filter(function() { 
    var parent = $(this).parent();
    return parent.css("display") == "none" && parent.not(".tab");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:56:51.213

当父级隐藏时，其后代也被视为隐藏，因此`:hidden`选择器不会完全满足您的需要。在这种情况下，唯一的方法是实际检查`style`属性。

```
$("[style*='display: none']:not(.tab) >"); 
```

这会选择所有带有 (和`style="display: none"`之间的空格的元素是必需的，但您也可以编写另一个不需要它且没有类的选择器。`:``none``.tab`

*`style`如果父级可以被类以外的东西隐藏，这显然不起作用。在这种情况下，除非您想解析样式表并检查每个单独的父级及其类，否则您无能为力。*

[http://jsfiddle.net/ExplosionPIlls/zXmXL/1/](http://jsfiddle.net/ExplosionPIlls/zXmXL/1/)

与 对比`$("body :hidden:not(.tab) >")`。使用`body`是因为 all `<head>`is `:hidden`。

[http://jsfiddle.net/ExplosionPIlls/zXmXL/3/](http://jsfiddle.net/ExplosionPIlls/zXmXL/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:54:51.107

这个怎么样？

```
$('div:not(.tab):hidden input'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T16:53:24.393

```
$(':hidden:has(*)').filter(function(){
    return !this.class;
}).find('*').dojQueryFuncHere(); 
```

虽然我必须说这不是最好的做法，但查询“某事” -`*`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:15:36.687

这是你要找的吗？

```
$("div:not(.tab) > *:hidden") 
```

或者

```
$("div:hidden:not(.tab) > *:hidden") 
```

----编辑----你可以这样做

```
$("div[style='display: none;']:not(.tab) > *") 
```

但这并不是一个好方法。我宁愿改变那些 style='display: none;' 到一个css类，然后像这样运行；我在这里测试了[http://jsfiddle.net/bighostkim/KaaYc/](http://jsfiddle.net/bighostkim/KaaYc/)

```
$("div.noShow:not(.tab) > *") 
```

# java - 如何在 groovy 中处理数字

> ID：14756490
> 
> 赞同：1
> 
> 时间：2013-02-07T16:51:08.630
> 
> 标签：java, groovy

我有以下代码片段：

```
mystring = "1.43 something something"
def foo = mystring =~ /(\d*.\d*).*/
def number = foo[0][1]
number = (int)(number * 2.54) 
```

上面的代码失败，但有异常：`Cannot cast object '1.431.43' with class 'java.lang.String' to class 'int'`

但是，如果我将最后一行更改为：`number = (int)(Double.parseDouble(number) * 1.54)`那么一切似乎都正常。

在 groovy 中执行此操作的最佳方法是什么？

`(int)(Double.parseDouble(number)`确实有效，但有点冗长和javaish。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:56:58.263

您可以使用以下方法将数字转换为双精度`as double`：

```
def number = foo[0][1] as double
number = (int)(number * 2.54) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:00:17.730

利用

```
def number = foo[0][1] as double 
```

或者

```
def number = foo[0][1].toDouble() 
```

查看[Groovy 食谱](http://groovycookbook.org/basic_types/numbers/)以获取更多信息。

# javascript - 在倒计时中设置时区

> ID：14756491
> 
> 赞同：0
> 
> 时间：2013-02-07T16:51:12.617
> 
> 标签：javascript, date, timezone, countdown

我有如下代码，我想为它设置时区。我可以知道我该怎么做吗？

代码：

```
<script type="text/javascript">
  $(function () {
    var year = new Date();

    year = new Date(year.getFullYear(), 11 - 1, 20);

    $('#dvCountDown').countdown({
      until: new Date('2013-02-08'),
      format: 'HMS',
      onExpiry: liftOff
    });

    $('#CountdownbyValue').countdown({
      until: '0h +0m +8s',
      format: 'HMS',onExpiry: liftOff
    });

    $('#year').text(austDay.getFullYear());

    //Time is up!
    function liftOff() { 
      alert('Time is up!'); 
    }

  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:22:56.230

尝试使用这个：

```
var year = new Date();
year.setUTCMonth(11 - 1);
year.setUTCDay(20);
year.setUTCHour( /* your timezone offset */ );
year.setUTCMinutes( /* your timezone offset */ );
year.setUTCSeconds(0);

$('#dvCountDown').countdown({
  until: new Date(Date.UTC(2013, 2-1, 08)),
  format: 'HMS',
  onExpiry: liftOff
}); 
```

# php - 函数“Delphi”到“PHP”

> ID：14756492
> 
> 赞同：0
> 
> 时间：2013-02-07T16:51:18.200
> 
> 标签：php, delphi, function

我需要在 PHP 中创建一个函数，它从 Delphi 中的函数返回相同的结果。在 PHP 中用“/ /”注释的 excerpts 函数中，我无法替代那些返回相同结果的行。

**德尔福代码：**

```
function Crypt_(Action, Src: String): String;
Label Fim;
var KeyLen : Integer;
  KeyPos : Integer;
  OffSet : Integer;
  Dest, Key : String;
  SrcPos : Integer;
  SrcAsc : Integer;
  TmpSrcAsc : Integer;
  Range : Integer;
begin
  if (Src = '') Then
  begin
    Result:= '';
    Goto Fim;
  end;
  Key :=
'YUQL23KL23DF90WI5E1JAS467NMCXXL6JAOAUWWMCL0AOMM4A4VZYW9KHJUI2347EJHJKDF3424SKL K3LAKDJSL9RTIKJ';
  Dest := '';
  KeyLen := Length(Key);
  KeyPos := 0;
  SrcPos := 0;
  SrcAsc := 0;
  Range := 256;
  if (Action = UpperCase('C')) then
  begin
    Randomize;
    OffSet := Random(Range);
    Dest := Format('%1.2x',[OffSet]);
    for SrcPos := 1 to Length(Src) do
    begin
      SrcAsc := (Ord(Src[SrcPos]) + OffSet) Mod 255;
      if KeyPos < KeyLen then KeyPos := KeyPos + 1 else KeyPos := 1;
      SrcAsc := SrcAsc Xor Ord(Key[KeyPos]);
      Dest := Dest + Format('%1.2x',[SrcAsc]);
      OffSet := SrcAsc;
    end;
  end
  Else if (Action = UpperCase('D')) then
  begin
    OffSet := StrToInt('$'+ copy(Src,1,2));
    SrcPos := 3;
  repeat
    SrcAsc := StrToInt('$'+ copy(Src,SrcPos,2));
    if (KeyPos < KeyLen) Then KeyPos := KeyPos + 1 else KeyPos := 1;
    TmpSrcAsc := SrcAsc Xor Ord(Key[KeyPos]);
    if TmpSrcAsc <= OffSet then TmpSrcAsc := 255 + TmpSrcAsc - OffSet
    else TmpSrcAsc := TmpSrcAsc - OffSet;
    Dest := Dest + Chr(TmpSrcAsc);
    OffSet := SrcAsc;
    SrcPos := SrcPos + 2;
  until (SrcPos >= Length(Src));
  end;
  Result:= Dest;
  Fim:
end; 
```

**PHP代码：**

```
<?php
function Crypt_($Action, $Src) {
  $Key    = 'YUQL23KL23DF90WI5E1JAS467NMCXXL6JAOAUWWMCL0AOMM4A4VZYW9KHJUI2347EJHJKDF3424SKL K3LAKDJSL9RTIKJ';
  $KeyLen = strlen($Key);
  $KeyPos = 0;
  if ($Action == 'C') {
    $OffSet = rand(0,256);
//  Dest := Format('%1.2x',[OffSet]); //I tried to replace the function "sprintf", but the result is null
    $SrcPos = 1;
    while ($SrcPos <= strlen($Src)) {
      $SrcAsc = (ord($Src[$SrcPos]) + $OffSet) % 255;
      if ($KeyPos < $KeyLen) $KeyPos = $KeyPos + 1; else $KeyPos = 1;
      $SrcAsc = $SrcAsc xor ord($Key[$KeyPos]);
//    Dest := Dest + Format('%1.2x',[SrcAsc]); //I tried to replace the function "sprintf", but the result is null
      $OffSet = $SrcAsc;
      $SrcPos = $SrcPos + 1;
    }
  } else {
//  OffSet := StrToInt('$'+ copy(Src,1,2));
    $Dest   = '';
    $SrcPos = 3;
    while ($SrcPos >= strlen($Src)) {
//    SrcAsc := StrToInt('$'+ copy(Src,SrcPos,2));
      if ($KeyPos < $KeyLen) $KeyPos = $KeyPos + 1; else $KeyPos = 1;
      $TmpSrcAsc = $SrcAsc xor ord($Key[$KeyPos]);
      if ($TmpSrcAsc <= $OffSet) $TmpSrcAsc = 255 + $TmpSrcAsc - $OffSet;
      else $TmpSrcAsc = $TmpSrcAsc - $OffSet;
      $Dest = $Dest + chr($TmpSrcAsc);
      $OffSet = $SrcAsc;
      $SrcPos = $SrcPos + 2;
    }
  }
  return $Dest;
}
?> 
```

我还想知道“xor”、“ord”和“chr” PHP 是否会与 Delphi 有相同的结果。

感谢大家的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:06:01.223

# 德尔福

带参数的`Format`函数`%x`将整数转换为字符串十六进制表示；在这种情况下，一个字节。例如 168*转换*为`'A8'`.

具有以 开头的参数的 StrToInt 函数进行`'$'`逆*变换*，从 . 返回 168 `'$A8'`。

# PHP

在 PHP 中，您可以通过调用[`dechex`](http://php.net/manual/en/function.dechex.php)和[`hexdec`](http://php.net/manual/en/function.hexdec.php)函数来获得相同的结果。

考虑到`hexdec`呼叫不需要`'$'`前缀。

# delphi - 如何在 Spring for Delphi 中使用具有自动装配功能的模拟？

> ID：14756493
> 
> 赞同：3
> 
> 时间：2013-02-07T16:51:23.987
> 
> 标签：delphi, dependency-injection, mocking, ioc-container, spring4d

如果我有这些接口：

```
ISequencer = interface;
IController = interface; 
```

他们的实现（控制器需要通过构造器注入的 Sequencer）：

```
TSequencer = class(TInterfacedObject, ISequencer)
end;

TController = class(TInterfacedObject, IController)
  constructor Create(Sequencer: ISequencer);
end; 
```

我在全局容器中注册实现：

```
GlobalContainer.RegisterType<TSequencer>.Implements<ISequencer>;
GlobalContainer.RegisterType<TController>.Implements<IController>;

GlobalContainer.Build; 
```

最后，通过自动连接功能，我可以获得一个新的`IController`接口实例：

```
Controller := ServiceLocator.GetService<IController>; 
```

这对于真正的应用程序代码来说是可以的。但在测试项目中我想模拟`ISequencer`. 根据测试，当我向容器请求实现时`ISequencer`，有时我需要真正的实现（`TSequencer`），而其他时候我需要一个模拟实现（如`TSequencerMock`）。我该怎么做这个开关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:59:45.430

您可以为给定接口注册多个实现。然后你叫他们名字：

```
GlobalContainer.RegisterType<TSequencer>.Implements<ISequencer>('real');
GlobalContainer.RegisterType<TController>.Implements<IController>('mock'); 
```

然后您可以根据需要按名称调用它们：

```
Controller := ServiceLocator.GetService<IController>('mock'); 
```

我在这里写了一篇关于如何做到这一点的文章：

[http://www.nickhodges.com/post/Getting-Giddy-with-Dependency-Injection-and-Delphi-Spring-9-%E2%80%93-One-Interface-Many-Implementations.aspx](http://www.nickhodges.com/post/Getting-Giddy-with-Dependency-Injection-and-Delphi-Spring-9-%E2%80%93-One-Interface-Many-Implementations.aspx)

# matlab - 在 Matlab 中将变量推入向量中

> ID：14756497
> 
> 赞同：10
> 
> 时间：2013-02-07T16:51:31.243
> 
> 标签：matlab

如何在 Matlab 中将变量推入向量中？

像这样的东西：

```
A = [5 2 3];
push(A, 7);
% A = [5 2 3 7] 
```

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-07T17:18:19.170

我找到了答案。

用这个：

```
A = [A, 7]; 
```

或这个：

```
A(end + 1) = 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-11T06:35:37.477

如果你想垂直堆叠它，你可以使用

```
A = [A; 7] 
```

但是要执行此操作， A 应该与下一个参数具有相同的尺寸。例如，如果

```
A=[1,2
   3,4] 
```

您可以在 A 中堆叠长度为 2 的向量

```
A = [A;5,6] 
```

# actionscript-3 - mxml 将自定义 as3 组件动态添加到阶段

> ID：14756498
> 
> 赞同：0
> 
> 时间：2013-02-07T16:51:40.943
> 
> 标签：actionscript-3, apache-flex, mxml

我正在构建一个自定义视频播放器，其中包含不同的外部和内部（osmf）播放器对象。我的库中有单独的 as3 组件中的播放器代码。直接在 mxml 中添加播放器对象会使 swf 文件大小大于所需大小，因为所有对象都已添加（但未加载）

```
<osmf:OSMFPlayer id="playerOSMF" depth="1" /> 
```

如何将 as3 组件动态添加到舞台？

我的 mxml 包含一个主脚本

```
<fx:Script source="main.as" /> 
```

当我在 applicationComplete() 上添加 init() 函数时

```
public var player:OSMFPlayer;

private function init():void {
  player = new OSMFPlayer();
  addChild(player);
} 
```

这不起作用，我已经尝试了我能想到的一切，有人得到一些有用的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:10:28.953

您不能直接将 OSMFPlayer 添加到舞台。

请参阅下面的代码。

```
//flash imports
import flash.display.Sprite ; 
import flash.events.MouseEvent ;
//osmf imports
import org.osmf.containers.MediaContainer ; 
import org.osmf.layout.LayoutMetadata ; 
import org.osmf.media.MediaPlayer ; 
import org.osmf.media.MediaElement ; 
import org.osmf.media.MediaFactory ; 
import org.osmf.media.DefaultMediaFactory ; 
import org.osmf.media.URLResource ; 
import org.osmf.elements.SerialElement ; 

//point to two separate pieces of media
const MEDIA_URL:String  = "myVideo.mp4"; 
const VIDEO_WIDTH:int = 1024;
const VIDEO_HEIGHT:int = 768;
//variable declarations
var mediaFactory:MediaFactory; 
var serialElement:SerialElement; 
var mediaElement:MediaElement; 
var mediaPlayer:MediaPlayer; 
var mediaContainer:MediaContainer; 
var layout:LayoutMetadata ;

function loadPlayer() 
{ 
    //create a new DefaultMediaFactory
    mediaFactory = new DefaultMediaFactory(); 
    //use the mediaFactory to create two new MediaElement objects
    mediaElement = mediaFactory.createMediaElement(new URLResource(MEDIA_URL)); 
    //create, size and position two LayoutMetadata objects
    layout1 = new LayoutMetadata(); 
    layout1.width = VIDEO_WIDTH; 
    layout1.height = VIDEO_HEIGHT; 
    layout1.x = 0; 
    layout1.y = 0; 
    //create a new SerialElement
    serialElement = new SerialElement () ; 
    //tie each LayoutMetadata object to one of the MediaElement objects
    mediaElement.addMetadata(LayoutMetadata.LAYOUT_NAMESPACE, layout); 
    //create a new MediaPlayer instance
    mediaPlayer = new MediaPlayer(); 
    //set the mediaPlayer not to begin playback by default
    mediaPlayer.autoPlay = false; 
    //set the media property of the mediaPlayer to the serialElement
    mediaPlayer.media = serialElement; 
    //create a new MediaContainer
    mediaContainer = new MediaContainer(); 
    //add both MediaElement instances to the serialElement
    serialElement.addChild ( mediaElement ) ;
    //add the serialElement to the MediaContainer
    mediaContainer.addMediaElement(serialElement); 
    //add the mediaContainer to the display list
    addChild(mediaContainer); 
    //listen for the click event on the stage
    stage.addEventListener ( MouseEvent.CLICK , onPlayToggle ) ;
} 

function onPlayToggle ( evt : MouseEvent ) : void
{
    //if the mediaPlayer is running
    if ( mediaPlayer.playing )
    //pause the mediaPlayer
    mediaPlayer.pause ( ) ;
    else 
    //resume the mediaPlayer
    mediaPlayer.play ( ) ;
}

loadPlayer(); 
```

我建议，阅读 OSMF 文档。

[OSMF](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/org/osmf/media/package-detail.html)

并参考 Adob​​e 官方示例代码。

[OSMF 市场](http://www.adobe.com/cfusion/marketplace/index.cfm?event=marketplace.home&marketplaceid=3)

# node.js - 我无法使用 node.js 中的 nodemailer 向 yahoo 用户发送邮件

> ID：14756500
> 
> 赞同：-1
> 
> 时间：2013-02-07T16:51:52.243
> 
> 标签：node.js, yahoo, nodemailer

我正在尝试使用 nodemailer 向 node.js 中的 GMail 和 Yahoo 用户发送确认邮件。我试过这个：

```
nodemailer.createTransport("SMTP",
        {
                 service: 'gmail',
                 auth:
                 {
                        user: "xxx@gmail.com",
                        pass: "xxxx"
                 }
        });
 var message ={

                        from: 'XXX.com',
                        to:xxx@gmail.com,
                        subject: 'Confirm your registration',

              } 
```

它适用于 Gmail，但我想发送 Yahoo，所以我给了`yahoo`而不是`service:Gmail`但显示以下错误：

> 来自命令的邮件失败 - 553 未验证来自地址 - 请参阅 [http://help.yahoo.com/l/us/yahoo/mail/original/manage/sendfrom-07.html](http://help.yahoo.com/l/us/yahoo/mail/original/manage/sendfrom-07.html)

如何向雅虎发送邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:28:33.480

您无需`service`针对不同的目的地进行更改。即，如果您提供 gmail 登录凭据并向 yahoo 发送电子邮件，您的服务仍然是“gmail”。

# programming-languages - 我在哪里可以了解语义分析？

> ID：14756503
> 
> 赞同：1
> 
> 时间：2013-02-07T16:51:57.333
> 
> 标签：programming-languages, semantics

一段时间以来，我一直在为自己的习惯语言进行语义分析通行证，但没有取得多大成功。但是如果我在谷歌上搜索任何这样的东西，那么绝大多数链接都是无用的大学课程资料或学术论文，或者只是完全不相关的过程，例如英语文本的语义分析，而不是有用的知识。

我也找了传说中的龙书，但我读到它在这方面确实没有太多内容（而且现在也超出了我在亚马逊上的价格范围）。

关于在哪里可以找到此特定编译阶段的材料的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:18:44.800

语义分析是一个笼统的术语，涵盖了编译器中的许多简单步骤。

它通常由以下内容组成：

*   语法糖和/或宏扩展传递以简化进一步分析
*   标识符解析和重命名。即，每个名称都变成一个完全限定的标识符，每个局部范围的标识符都被赋予一个唯一的名称
*   类型检查（类型推断或类型传播）
*   约束检查
*   各种健全性检查（即，“如果一个非 void 函数返回一个值”，或者“如果一个变量在初始化之前使用”）

当前的趋势是尝试将所有约束检查限制在类型系统中，而不是单独通过。适用于许多不同语言的通用且强大的类型算法是[Hindley-Milner](https://en.wikipedia.org/wiki/Hindley-Milner)。虽然它看起来很复杂，但实际上它比哑类型传播（如在 C 或 Java 中）更容易实现，如果你以正确的方式进行。

进行复杂类型和任意语义检查的一个非常通用和简单的技巧是遍历您的 AST 并发出一个平面序列的 Prolog（在某些情况下甚至是 Datalog）表达式，您可以将其提供给一个简单的 Prolog 解释器并获取您的整个 AST约束系统解决。

# iphone - 使用 OpenCV 人脸检测在 iOS 中裁剪图像

> ID：14756505
> 
> 赞同：5
> 
> 时间：2013-02-07T16:52:02.887
> 
> 标签：iphone, ios, objective-c, image-processing, opencv

在我的人脸检测代码中，我使用以下代码从图像中裁剪人脸。但我没有得到正确的人脸图像，我得到的是图像的一部分，而不是人脸。我的代码有什么问题？

```
_faceCascade.detectMultiScale(mat, faces, 1.1, 2, kHaarOptions, cv::Size(40, 40)); 
```

在 displayfaces 函数中，我正在使用以下代码进行裁剪：

```
CGRect cropRect = CGRectMake(faces[i].x, faces[i].y, faces[i].width, faces[i].width);
CGImageRef cropped_img = CGImageCreateWithImageInRect(self.storeImage.CGImage, cropRect);
UIImage *img = [UIImage imageWithCGImage:cropped_img];
UIImageWriteToSavedPhotosAlbum( img, self,  nil,nil); 
```

我得到正确的坐标`faces[i]`。但问题仅在于裁剪和设置 ROI。有人可以帮我解决它吗？

我也尝试使用以下代码，再次获得相同的图像。（即，我没有得到实际的面部图像）

```
cv :: Mat image_roi;
cv::Rect roi(faces[i].x, faces[i].y, faces[i].width, faces[i].height);
cv::Mat(testMat, roi).copyTo(image_roi);
UIImage *img = [CaptureViewController imageWithCVMat:image_roi ];
UIImageWriteToSavedPhotosAlbum( img, self,  nil,nil); 
```

**注意：**我正在使用 opencv facedetect 检测实时视频流中的人脸。我可以得到脸部周围的绿色矩形。但我无法使用面部参数裁剪面部。我还尝试设置 faceroi 来检测眼睛，即使这样也失败了。为了缩小问题范围，问题可能在于为图像设置 ROI？

**更新于 2013 年 11 月 2 日：**

**我已经完成裁剪，如下所示，但 ROI 设置不正确，图像裁剪得不好：**

我为我的上述帖子找到了问题（感谢@Jameo 指出这是因为旋转问题。）我已将图像旋转如下。

```
UIImage *rotateImage = [[UIImage alloc] initWithCGImage: image.CGImage
                               scale: 1.0
                         orientation: UIImageOrientationRight]; 
```

**并使用以下代码裁剪图像：**

```
// get sub image
+ (UIImage*) getSubImageFrom: (UIImage*) img WithRect: (CGRect) rect
{
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    // translated rectangle for drawing sub image
    CGRect drawRect = CGRectMake(-rect.origin.x, -rect.origin.y, img.size.width, img.size.height);
    // clip to the bounds of the image context
    // not strictly necessary as it will get clipped anyway?
    CGContextClipToRect(context, CGRectMake(0, 0, rect.size.width, rect.size.height));
    // draw image
    [img drawInRect:drawRect];
    // grab image
    UIImage* subImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return subImage;
} 
```

图像被裁剪但没有实际坐标。

**我的观察：** 1) 我用 Affinetransform 返回的 FaceRect 裁剪图像。这会是错误坐标的原因还是因为我的代码中的错误？2) 在设置仿射变换之前我无法为图像设置 ROI，这是什么原因，这是设置 ROI 的过程吗？

```
faceRect = CGRectApplyAffineTransform(faceRect, t); 
```

但是仍然没有正确进行裁剪 区别如下所示：

**全图：**

![全图](../Images/1629d267c09d97fff7c6204a1d5fcaa8.png)

**裁剪图像**

![在此处输入图像描述](../Images/75762791f5d6ae3cafd99c52ea4a5320.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:19:55.373

那这个呢？

```
- (UIImage *) getSubImageFrom:(UIImage *)imageToCrop WithRect:(CGRect)rect {

    CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);    
    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return cropped;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T06:12:27.367

试试这个来获得面部坐标：

```
CGRect newBounds = CGRectMake(faceFeature.bounds.origin.x, 
                              _picture.size.height - faceFeature.bounds.origin.y - largestFace.bounds.size.height, 
                              faceFeature.bounds.size.width, 
                              faceFeature.bounds.size.height); 
```

然后使用以下方法裁剪图像：

```
CGImageRef subImage = CGImageCreateWithImageInRect(image.CGImage, newBounds);
UIImage *croppedImage = [UIImage imageWithCGImage:subImage];
UIImageView *newView = [[UIImageView alloc] initWithImage:croppedImage]; 
```

# ios - UITableViewCell 获取UITabBarController

> ID：14756508
> 
> 赞同：0
> 
> 时间：2013-02-07T16:52:06.170
> 
> 标签：ios, uitableview, uitabbarcontroller, uitabbar, uiapplication

我有一个`UITableViewCell`，我想在它的 a`ViewController`中调用一个 void `UITabBar`。这可能使用`[UIApplication sharedApplication]`吗？如果是，我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:09:43.573

这很模糊，答案是肯定的，有可能做这样的事情。你只需要以这样的方式设计你的类，使其成为可能。

有多种方法可以解决它

1.  `ViewController`在的接口上创建一个`UITableViewCell`可以调用的方法
2.  使用委托模式
3.  发布通知并观察通知`ViewController`

话虽如此，这对我来说听起来很奇怪，为什么你的 UITableViewCell 会作用于 UITabBar？互动“感觉”很奇怪。通常触摸表格中的单元格不会更改用户所在的选项卡，这可能会相当混乱。如果那不是您正在做的事情，那么为什么 ViewController 中的这个方法是控制 UITabBar 的？您可能需要区分您的担忧。

# regex - pcre 正则表达式：组捕获和析取 - 没有匹配时返回默认值

> ID：14756510
> 
> 赞同：1
> 
> 时间：2013-02-07T16:52:11.087
> 
> 标签：regex, default, pcre, capture, regex-group

我正在尝试搜索字符串以匹配多个捕获组。在两个这样的捕获组的情况下，数据是可选的，因此它们可能匹配也可能不匹配。我正在使用带有选项 -onumber 的 pcregrep 来返回各种捕获组。问题是：在没有值匹配的情况下如何返回默认值。我尝试使用析取但没有成功。

例子：

```
../pcre-8.32/pcregrep  -Min -o1 -o2 --om-separator="; " '(?s)<!-- BOUNDARY -->(?!.*?Read the full review).*?((\d*) of (\d*) people found the following review helpful|.*?).*?Help other customers find the most helpful' shirts/B000W18VGW 
```

产生正确的行号。

```
-Min -o1 -o2 --om-separator="; " '(?s)<!-- BOUNDARY -->(?!.*?Read the full review).*?(\d*) of (\d*) people found the following review helpful.*?Help other customers find the most helpful' shirts/B000W18VGW 
```

产生正确的输出，但仅适用于具有

```
(\d*) of (\d*) people found the following review helpful 
```

如果上面的行不存在，我想为每个捕获组返回“0”。

这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:24:32.473

你不能让一个角色神奇地出现。也就是说，如果`0`您的主题字符串中没有任何内容，则无法捕获`0`. 因此，如果要捕获 a `0`，则必须将 a`0`插入主题中。

现在，假设出于某种疯狂的原因，您能够并且愿意修改您的主题字符串（尽管显然您不能或不愿意`0`在正则表达式之外设置大小写，*即*在代码中）。然后，这是一个解决方案。

附加`0 of 0 people found the following review helpful`在主题字符串的最后，而不是这样：

```
((\d*) of (\d*) people found the following review helpful|.*?) 
```

做这个：

```
(?=.*?(\d*) of (\d*) people found the following review helpful) 
```

换句话说，通过附加`0 of 0 people [...]`您保证该句子将存在*于某处*，因此通过在零宽度前瞻断言中捕获数字，您可以在主题字符串中的任何位置查找该句子，然后再继续您的其余部分正则表达式。

# c++ - 如何使用 std::rel_ops 自动提供比较运算符？

> ID：14756512
> 
> 赞同：6
> 
> 时间：2013-02-07T16:52:20.203
> 
> 标签：c++, templates, c++11, visual-studio-2012

如何从and 获取运算符`>`, `>=`, `<=`, and ？`!=``==``<`

标准标头定义了一个命名空间 std::rel_ops ，它根据运算符and`<utility>`定义上述运算符，但我不知道如何使用它（哄我的代码使用这样的定义：`==``<`

```
std::sort(v.begin(), v.end(), std::greater<MyType>); 
```

我在其中定义了非成员运算符：

```
bool operator < (const MyType & lhs, const MyType & rhs);
bool operator == (const MyType & lhs, const MyType & rhs); 
```

如果我`#include <utility>`并指定`using namespace std::rel_ops;`编译器仍然抱怨`binary '>' : no operator found which takes a left-hand operand of type 'MyType'`..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T17:04:17.027

我会使用[`<boost/operators.hpp>`](http://www.boost.org/libs/utility/operators.htm)标题：

```
#include <boost/operators.hpp>

struct S : private boost::totally_ordered<S>
{
  bool operator<(const S&) const { return false; }
  bool operator==(const S&) const { return true; }
};

int main () {
  S s;
  s < s;
  s > s;
  s <= s;
  s >= s;
  s == s;
  s != s;
} 
```

* * *

或者，如果您更喜欢非会员运营商：

```
#include <boost/operators.hpp>

struct S : private boost::totally_ordered<S>
{
};

bool operator<(const S&, const S&) { return false; }
bool operator==(const S&, const S&) { return true; }

int main () {
  S s;
  s < s;
  s > s;
  s <= s;
  s >= s;
  s == s;
  s != s;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:54:42.947

其实只要`<`够了。这样做：

`a == b`<=>`!(a<b) && !(b<a)`

`a > b` <=>`b < a`

`a <= b`<=>`!(b<a)`

`a != b`<=>`(a<b) || (b < a)`

对于对称情况，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:56:21.320

```
 > equals !(<=)
>= equals !(<)
<= equals == or <
!= equals !(==) 
```

像这样的东西？

# c# - 客户端 SendEmail-Method 不起作用

> ID：14756513
> 
> 赞同：2
> 
> 时间：2013-02-07T16:52:20.630
> 
> 标签：c#, email, sharepoint-2013, sharepoint-clientobject

我想使用 SharePoint 2013 客户端对象模型[SendEmail-Method](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.utilities.utility.sendemail.aspx)发送电子邮件，但我总是收到“必须指定收件人”。错误。我尝试使用不同的电子邮件地址和多个 SharePoint 服务器，但在所有情况下都发生了错误。

示例源代码（C#）：

```
string webUrl = "http://sharepoint.example.com/";

EmailProperties properties = new EmailProperties();
properties.To = new string[] { "email@example.com" };
properties.Subject = "Test subject";
properties.Body = "Test body";

ClientContext context = new ClientContext(webUrl);

Utility.SendEmail(context, properties);

context.ExecuteQuery(); // ServerException thrown here
context.Dispose(); 
```

错误信息：

> 必须指定收件人。

错误类型：

> System.InvalidOperationException

服务器堆栈跟踪：

```
 at System.Net.Mail.SmtpClient.Send(MailMessage message)
   at Microsoft.SharePoint.Utilities.SPUtility.SendEmail_Client(EmailProperties properties)
   at Microsoft.SharePoint.ServerStub.Utilities.SPUtilityServerStub.InvokeStaticMethod(String methodName, XmlNodeList xmlargs, ProxyContext proxyContext, Boolean& isVoid)
   at Microsoft.SharePoint.Client.ServerStub.InvokeStaticMethodWithMonitoredScope(String methodName, XmlNodeList args, ProxyContext proxyContext, Boolean& isVoid)
   at Microsoft.SharePoint.Client.ClientMethodsProcessor.InvokeStaticMethod(String typeId, String methodName, XmlNodeList xmlargs, Boolean& isVoid)
   at Microsoft.SharePoint.Client.ClientMethodsProcessor.ProcessStaticMethod(XmlElement xe)
   at Microsoft.SharePoint.Client.ClientMethodsProcessor.ProcessOne(XmlElement xe)
   at Microsoft.SharePoint.Client.ClientMethodsProcessor.ProcessStatements(XmlNode xe)
   at Microsoft.SharePoint.Client.ClientMethodsProcessor.Process() 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:30:47.750

我认为电子邮件收件人必须解析为当前的 SharePoint 网站用户。因此，您不能使用随机电子邮件地址作为电子邮件收件人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T05:47:41.863

它应该是：

```
user.LoginName after EnusreUser for Ex:
User user = clientContext.Web.EnsureUser(strlogonName);
clientContext.Load(user);
clientContext.ExecuteQuery();

EmailProperties properties = new EmailProperties();
properties.To = new string[] { user.LoginName };
properties.Subject = "Test subject";
properties.Body = "Test body";

ClientContext context = new ClientContext(webUrl);

Utility.SendEmail(context, properties); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T10:10:02.417

尝试使用用户登录名而不是邮件地址；）

# c# - 将依赖注入 DelegatingHandler

> ID：14756519
> 
> 赞同：10
> 
> 时间：2013-02-07T16:52:50.513
> 
> 标签：c#, dependency-injection, asp.net-web-api, ninject, ninject.web.mvc

我是依赖注入的新手，但`Ninject`对`Ninject.Extensions.Logging`我`[Inject]`需要`ILogger`它的地方感到满意。

然而，一些**DelegatingHandlers**破坏了所有的乐趣。

```
public class HttpsHandler : DelegatingHandler
{
    [Inject]
    public ILogger Logger { get; set; }

    protected override Task<HttpResponseMessage> SendAsync(
            HttpRequestMessage request, CancellationToken cancellationToken)
        {
            if (!string.Equals(request.RequestUri.Scheme, "https", StringComparison.OrdinalIgnoreCase))
            {
                Logger.Info(String.Format("{0}: is using HTTP", request.RemoteAddress());
                return
                    Task.Factory.StartNew(
                        () =>
                        new HttpResponseMessage(HttpStatusCode.BadRequest)
                        {
                            Content = new StringContent("HTTPS Required")
                        });
            }

            return base.SendAsync(request, cancellationToken);
        }
 } 
```

谁能指出我如何在委托处理程序中将 Ninject.Extensions.Logger.Nlog2 注入 Ilogger 的正确方向？

**更新**

我认为皮特在评论中让我朝着正确的方向前进（谢谢！）。我将以下构造函数添加到`HttpsHandler`：

```
public HttpsHandler()
        {
            var kernel = new StandardKernel();

            var logfactory = kernel.Get<ILoggerFactory>();
            this.Logger = logfactory.GetCurrentClassLogger();
        } 
```

现在我已经让 Logger 工作了！

我唯一的问题是，这是*正确*的做法，还是反模式？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-07T22:32:59.117

`DelegatingHandlers`仅在应用程序启动时在 Web API 中初始化一次。

这是 Web API 的一个已知问题/设计功能（我推测是出于性能原因） - 请参阅此处的错误报告[http://aspnetwebstack.codeplex.com/workitem/62](http://aspnetwebstack.codeplex.com/workitem/62)。

像您自己建议的那样使用构造函数初始化，仅在您具有单例类型依赖项时才有效（这就是您记录器工作的原因）。无论如何，如果您想将解决方案委托给 Web API `DependencyResolver`，您必须使用`GetDependencyScope()`（可以从 中调用`HttpRequestMessage`）作为一种解决方法。

不久前，我[发布了一个关于使用 Ninject 执行此操作的演练。](http://www.strathweb.com/2012/11/asp-net-web-api-and-dependencies-in-request-scope/)您应该使用这种方法来解决您的问题，因为您当前的解决方案已经耦合了 Ninject 和您的处理程序，这远非理想。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-18T08:46:03.947

我正在使用这个：

```
 protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
 {
    var service = GlobalConfiguration.Configuration.DependencyResolver.GetService(typeof(IFooService)) as IFooService;
    // Other stuff
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:25:15.203

我想你需要的是[这个](https://github.com/ninject/ninject.web.mvc/blob/master/mvc3/src/Ninject.Web.Mvc/NinjectDependencyResolver.cs)。

它是 MVC 的 Ninject 依赖解析器。那么我相信你需要使用：

```
GlobalConfiguration.Configuration.ServiceResolver.SetResolver() 
```

并传入 NInject 依赖解析器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-19T14:36:03.000

我有类似的情况，并从这篇文章和相关链接中得到提示，我想出了以下构造函数注入解决方案，这对我来说似乎工作正常：

```
using Ninject.Extensions.Logging; 
```

公共静态无效注册（HttpConfiguration配置）{

```
ILoggerFactory loggerFactory =
   config.DependencyResolver.GetService(typeof(ILoggerFactory))
   as ILoggerFactory;
config.MessageHandlers.Add(
   new HttpsHandler(loggerFactory.GetLogger(typeof(HttpsHandler))));

// Other codes ... 
```

}

我虽然使用 Ninject for WebAi 2/log4net 并安装了所有相关的 nuget 包

# joomla - 在搜索结果中获取 K2 额外字段和评分，generic.php

> ID：14756520
> 
> 赞同：2
> 
> 时间：2013-02-07T16:52:50.363
> 
> 标签：joomla, tags, rating, joomla-k2

我尝试在搜索结果中显示标签、项目评级和 exztra 字段。我有要显示的标签，但我在评级和额外字段方面失败了。有人可以建议我或给出代码示例吗？这是在 generic.php 中显示标签的代码：

```
 <?php 
  $tags = K2ModelItem::getItemTags($item->id);
  for ($i=0; $i<sizeof($tags); $i++) {
    $tags[$i]->link = JRoute::_(K2HelperRoute::getTagRoute($tags[$i]->name));
  }
  $item->tags=$tags;
    ?>

    <?php if(count($item->tags)): ?>
       <!-- Item tags -->
   <div class="genericItemTagsBlock">
  <span><?php echo JText::_("Tagged under"); ?></span>
  <ul class="genericItemTags">
    <?php foreach ($item->tags as $tag): ?>
    <li><a href="<?php echo $tag->link; ?>"><?php echo $tag->name; ?></a></li>
    <?php endforeach; ?>
  </ul>
    <div class="clr"></div>
     </div>
      <?php endif; ?> 
```

在此先感谢您的帮助！关于寒冷B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T14:26:21.097

这对我有用：

```
$rating_width  = 0;
$vote = K2ModelItem::getRating($item->id);

if (!is_null($vote) && $vote->rating_count != 0) {
    $rating_width = number_format(intval($vote->rating_sum) /  intval($vote->rating_count), 2) * 20;
}

<div class="itemRatingBlock">
<div class="itemRatingForm">
    <ul class="itemRatingList">
    <li class="itemCurrentRating" id="itemCurrentRating<?php echo $item->id; ?>" style="cursor: inherit; width:<?php echo $rating_width;?>%;">
            </li>
    </ul>
</div> 
```

# c# - AutoMapper - 映射子列表时非常奇怪的行为

> ID：14756530
> 
> 赞同：4
> 
> 时间：2013-02-07T16:53:24.537
> 
> 标签：c#, .net, entity-framework, automapper

这肯定是一个特殊的问题，在发现没有人有同样的问题之后，我希望我能找到真正知道问题所在的人。

我有，说：

```
public class ViewModel
{
     public string TestString { get; set; }
     public ChildObject Child { get; set; }
     public List<Children> Children { get; set; }
} 
```

现在，当我在控制器中映射我的对象时......即

```
TestObject testObject = Repository.GetObject() // This is my Entity Framework object (with dynamic proxies attached to it)
Mapper.Map(ViewModel, testObject); 
```

而且，我的映射定义为：

```
Mapper.CreateMap<ViewModel, TestObjectType>();
Mapper.CreateMap<ViewModelChildView, TestObjectChildType>(); 
```

一切都很好，所以我的 ViewModel 设置正确，我的表单。问题呢？这是有趣的部分。

`ChildObject`就像我的原始对象一样，是一个 DynamicProxy（实体框架）。但是`List<Children>`，设置为普通列表（即使原始列表是 的 DynamicProxy `List<Children>`）。

反过来，这意味着实体框架无法访问此列表，因为它没有正确绑定到上下文。我整天都在努力寻找没有运气的解决方法。有什么想法吗？

**编辑**

这些是我的实际对象绑定：

```
 Mapper.CreateMap<CompanyViewModel, Company>();
 Mapper.CreateMap<CompanyCategoryViewModel, CompanyCategory>(); // I've ever tried removing this line.
 Mapper.CreateMap<List<CompanyCategoryViewModel>, List<CompanyCategory>>(); 
```

控制器：

```
Mapper.Map(companyViewModel, company); 
```

公司对象 = 动态代理 CompanyCategories 列表子对象（公司的）、地图，但仍然不是动态代理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:11:11.503

您既需要`Child`对象类型的映射，也需要集合的映射。如果你有一个`List<>`你需要`List<>`在你的`CreateMap`（它不会与`IEnumerable`

```
Mapper.CreateMap<ViewModel, TestObjectType>();
Mapper.CreateMap<ViewModelChildView, TestObjectChildType>();
Mapper.CreateMap<List<ViewModelChildView>>, List<TestObjectChildType>>(); 
```

这是一个包含我的复制代码的[GIST 。](https://gist.github.com/anonymous/0e61d1088ac0e6728282)

为了完成图片，我使用了 AutoMapper 的最新预实现版本`2.2.1-ci9004.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:07:12.263

所以基本上我认为唯一的区别是你如何创建地图。

也许在旁边

```
 Mapper.CreateMap<ViewModelChildView, TestObjectChildType>(); 
```

您还应该创建一个列表映射，例如

```
 Mapper.CreateMap<IEnumerable<ViewModelChildView>, IEnumerable<TestObjectChildType>>(); 
```

# c++ - 比较图像的相似性

> ID：14756533
> 
> 赞同：1
> 
> 时间：2013-02-07T16:53:30.483
> 
> 标签：c++, opencv

我试图自动确定两个数字是否相似。你可以在这里找到三个例子：http: [//imgur.com/N5SeaQW,IZYszx5,4RxLy4o](http://imgur.com/N5SeaQW,IZYszx5,4RxLy4o)

第一张图和第二张图和第三张图不一样，但是第二张图和第三张图是一样的（不完全相同，仔细看会有一些细微差别）

我的代码（大部分来自 OpenCV 文档中的特征单应性示例）读取两个不同的图像，计算它们的关键点和描述符（使用 SIFT，但我也尝试过 SURF 和 ORB），使用 FlannBasedMatcher 匹配它们并计算单应性矩阵。从可选的状态向量中，我计算内点与关键点总数的比率，以计算“距离”。

但是，计算出的距离并没有做出正确的区分：

```
d(img1, img2) = 0.296296
d(img1, img3) = 0.407407
d(img2, img3) = 0.362069 
```

所以我无法断定图像 1 与图像 2 不同，图像 1 与图像 2 不同，图像 2 等于图像 3。

是否有更好的方法或指标来确定哪些图像相似？

```
Mat img_object = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
Mat img_scene = imread( argv[2], CV_LOAD_IMAGE_GRAYSCALE );

//-- Step 1: Detect keypoints using SIFT
Ptr<FeatureDetector > detector;
detector = new SiftFeatureDetector();
std::vector<KeyPoint> keypoints_object, keypoints_scene;
detector->detect( img_object, keypoints_object );
detector->detect( img_scene, keypoints_scene );

//-- Step 2: Calculate descriptors (feature vectors)
Ptr<DescriptorExtractor > extractor;
extractor = new SiftDescriptorExtractor;
Mat descriptors_object, descriptors_scene;
extractor->compute( img_object, keypoints_object, descriptors_object );
extractor->compute( img_scene, keypoints_scene, descriptors_scene );

//-- Step 3: Matching descriptor vectors using FLANN matcher
FlannBasedMatcher matcher;
std::vector< DMatch > matches;
matcher.match( descriptors_object, descriptors_scene, matches );

//-- Step 4: Compute homography matrix and status vector
std::vector<Point2f> obj;
std::vector<Point2f> scene;
for( int i = 0; i<matches.size(); i++){
    obj.push_back( keypoints_object[ matches[i].queryIdx ].pt );
    scene.push_back( keypoints_scene[ matches[i].trainIdx ].pt );
}
std::vector<uchar> status;
Mat H = findHomography( obj, scene, status, CV_RANSAC, 3 );

//-- Step 5: Compute inliers/status.size
int inliers = 0;
for(int i = 0; i<status.size(); i++){
    inliers += status[i];
}
printf("Percentage of inliers: %f \n",( (float) inliers)/( (float) status.size() )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:51:00.617

> 是否有更好的方法或指标来确定哪些图像相似？

你为什么不找到所有的圆圈并计算它们之间的距离？

这是代码：

```
Point2i center(vector<Point2i> contour)
{
    Moments m = moments(contour);

    return Point2i(m.m10/m.m00, m.m01/m.m00);
}

vector<Point2i> getCenters(Mat img)
{
    vector<vector<Point2i> > contours;

    threshold(img, img, 0, 255, THRESH_OTSU);

    findContours(img, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);

    vector<Point2i> result(contours.size());

    for (int i=0; i<contours.size(); i++)
    {
        result[i] = center(contours[i]);
    }

    return result;
}

double distanceCenter(Point2i center1, Point2i center2)
{
    return (center1.x - center2.x)*(center1.x - center2.x) + (center1.y - center2.y)*(center1.y - center2.y);
}

double distanceCenters(vector<Point2i> centers1, vector<Point2i> centers2)
{
    if (centers1.size() != centers2.size())
    {
        return -1;
    }
    else
    {
        double result = 0;

        for (int i=0; i<centers1.size(); i++)
        {
            double min = INT_MAX;

            for (int j=0; j<centers2.size(); j++)
            {
                double dist = distanceCenter(centers1[i], centers2[j]);
                if (dist < min)
                {
                    min = dist;
                }
            }

            result += min;
        }

        return result;
    }
}

int main()
{
    Mat img1 = imread("image1.png", CV_LOAD_IMAGE_GRAYSCALE),
        img2 = imread("image2.png", CV_LOAD_IMAGE_GRAYSCALE);

    cout << distanceCenters(getCenters(img1), getCenters(img2)) << endl;

    return 0;
} 
```

和结果：

> 1和2之间的距离：14676
> 
> 2和3之间的距离：393

# c++ - Windows 的线程本地存储是否初始化值？

> ID：14756535
> 
> 赞同：6
> 
> 时间：2013-02-07T16:53:38.797
> 
> 标签：c++, winapi, thread-local-storage

我在 MSDN 中发现了关于线程本地存储的初始值的矛盾。 [这个页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686749%28v=vs.85%29.aspx)说：

> 创建线程时，系统会为 TLS 分配一个 LPVOID 值数组，这些值初始化为 NULL。

这让我相信，如果我从一个从未为同一索引调用过 TlsSetValue 的线程中使用有效索引调用 TlsGetValue，那么我应该得到一个空指针。

[但是，此页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686812%28v=vs.85%29.aspx)说：

> 程序员有责任确保……线程在调用 TlsGetValue 之前调用 TlsSetValue。

这表明您不能依赖从 TlsGetValue 返回的值，除非您确定它已使用 TlsSetValue 显式初始化。

然而，[第二页](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686812%28v=vs.85%29.aspx)同时通过以下内容强化了初始化为空的行为：

> 存储在 TLS 槽中的数据可以具有值 0，因为它仍然具有其初始值，或者因为线程调用 TlsSetValue 函数时使用 0。

所以我有两条语句说数据被初始化为 null（或 0），还有一条语句说我必须在读取值之前显式初始化它。实验上，这些值似乎确实被自动初始化为空指针，但我无法知道我是否只是幸运，以及是否总是如此。

我试图避免使用 DLL 来分配 DLL_THREAD_ATTACH。我想按照以下方式进行惰性分配：

```
LPVOID pMyData = ::TlsGetValue(g_index);
if (pMyData == nullptr) {
  pMyData = /* some allocation and initialization*/;
  // bail out if allocation or initialization failed
  ::TlsSetValue(g_index, pMyData);
}
DoSomethingWith(pMyData); 
```

这是一种可靠且安全的模式吗？或者我是否必须在尝试读取之前明确初始化每个线程中的插槽？

**更新：**文档还说[TlsAlloc 将已分配索引的插槽归零](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686801%28v=vs.85%29.aspx)。因此，程序的另一部分以前是否使用过插槽似乎无关紧要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T18:56:14.750

~~当文档说系统为 TLS 分配的初始值为零时，文档太有用了。该陈述是正确的，但没有用。~~

原因是应用程序可以通过调用来释放 TLS 插槽`TlsFree`，因此当您分配一个插槽时，并不能保证您是第一个获得该插槽的人。因此，您不知道该值是系统分配的初始 0 还是插槽的先前所有者分配的其他垃圾值。

考虑：

*   组件 A 调用`TlsAlloc`并获得分配的插槽 1。插槽 1 从未使用过，因此它包含其初始值 0。
*   组件 A 调用`TlsSetValue(1, someValue)`.
*   组件 A 调用`TlsGetValue(1)`并`someValue`返回。
*   组件 A 完成并调用`TlsFree(1)`.
*   组件 B 调用`TlsAlloc`并获得分配的插槽 1。
*   组件 B 调用`TlsGetValue(1)`并`someValue`返回，因为那是组件 A 留下的垃圾值。

因此，程序员有责任确保线程在调用`TlsSetValue`之前调用`TlsGetValue`。否则，您`TlsGetValue`将阅读剩余垃圾。

~~误导性的文档是说“剩余垃圾的默认值为零”，但这没有帮助，因为您不知道从系统初始化到最终给您的时间槽发生了什么。~~

Adrian 的跟进促使我再次研究情况，确实当组件 A 调用时内核将插槽归零`TlsFree(1)`，因此当组件 B 调用时`TlsGetValue(1)`它会归零。`TlsSetValue(1)`这假定它在之后调用的组件 A 中没有错误`TlsFree(1)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T17:37:34.807

Raymond Chen 的推理非常有道理，所以我昨天接受了他的回答，但今天我在[TlsAlloc](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686801%28v=vs.85%29.aspx)的 MSDN 文档中发现了另一条关键线：

> 如果函数成功，则返回值为 TLS 索引。*索引的槽被初始化为零。*

如果 TlsAlloc 确实将插槽初始化为零，那么您不必担心该插槽的前一个用户留下的垃圾值。为了验证 TlsAlloc 确实以这种方式运行，我进行了以下实验：

```
void TlsExperiment() {
  DWORD index1 = ::TlsAlloc();
  assert(index1 != TLS_OUT_OF_INDEXES);
  LPVOID value1 = ::TlsGetValue(index1);
  assert(value1 == 0);  // Nobody else has used this slot yet.
  value1 = reinterpret_cast<LPVOID>(0x1234ABCD);
  ::TlsSetValue(index1, value1);
  assert(value1 == ::TlsGetValue(index1));
  ::TlsFree(index1);

  DWORD index2 = ::TlsAlloc();
  // There's nothing that requires TlsAlloc to give us back the recently freed slot,
  // but it just so happens that it does, which is convenient for our experiment.
  assert(index2 == index1); // If this assertion fails, the experiment is invalid.

  LPVOID value2 = ::TlsGetValue(index2);
  assert(value2 == 0);  // If the TlsAlloc documentation is right, value2 == 0.
                        // If it's wrong, you'd expect value2 == 0x1234ABCD.
} 
```

我在 Windows 7 上运行了实验，带有 32 位和 64 位测试程序，用 VS 2010 编译。

结果支持 TlsAlloc 将值重新初始化为 0 的想法。我想 TlsAlloc 可能正在做一些蹩脚的事情，比如仅为当前线程将值归零，但文档明确表示“插槽”（复数），所以它看起来很安全假设如果您的线程尚未使用插槽，则该值将为 0。

**更新：**进一步的实验表明，将插槽重新初始化为 0 的是 TlsFree 而不是 TlsAlloc。因此，正如 Raymond 指出的那样，在释放插槽*后仍然存在另一个名为 TlsSetValue 的组件的风险。*那将是另一个组件中的错误，但它会影响您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:01:47.690

我看不出矛盾。第二页只是告诉您系统将所有 TLS 插槽初始化为，`0`但除了一些基本的边界检查之外，无法知道特定 TLS 索引是否包含有效数据（`0`也可能是完全有效的用户设置值！）并且由您来确保您请求的索引是您想要的索引并且它包含有效数据。

# javascript - jQuery 从 JSON 数组中找到相似的颜色

> ID：14756542
> 
> 赞同：0
> 
> 时间：2013-02-07T16:53:58.927
> 
> 标签：javascript, jquery, json

我是 Javascript 和 jQuery 新手，无法调整以下脚本：

[http://jsfiddle.net/kJdX3/](http://jsfiddle.net/kJdX3/)

如所写，它从一组颜色值中找到最接近的颜色。

我怎么能编辑代码，而不是评估这个数组中的颜色值：

```
var base_colors=["660000","0066cc","ff9900"]; 
```

它将评估 JSON 数组中的 hexvalue 属性，如下所示：

```
var base_colors = [
    { "name" : "burgundy" , "number" : "17A" , "hexvalue" : "660000"}, 
    { "name" : "blue" , "number" : "18B ", "hexvalue" : "0066cc"}, 
    { "name" : "orange" , "number" : "19C" , "hexvalue" : "ff9900"}]; 
```

最后，如何使用 jQuery 引用包含 base_colors 数组的外部 JSON 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:01:40.967

我已经对您的 jsFiddle 进行了更改，以实现这一目标。

[http://jsfiddle.net/kJdX3/9/](http://jsfiddle.net/kJdX3/9/)

```
function getSimilarColors (color) {
    var base_colors = [
{ "name" : "burgundy" , "number" : "17A" , "hexvalue" : "660000"}, 
{ "name" : "blue" , "number" : "18B ", "hexvalue" : "0066cc"}, 
{ "name" : "orange" , "number" : "19C" , "hexvalue" : "ff9900"}];
    //Convert to RGB, then R, G, B
    var color_rgb = hex2rgb(color);
    var color_r = color_rgb.split(',')[0];
    var color_g = color_rgb.split(',')[1];
    var color_b = color_rgb.split(',')[2];

    //Create an emtyp array for the difference betwwen the colors
    var differenceArray=[];

    //Function to find the smallest value in an array
    Array.min = function( array ){
           return Math.min.apply( Math, array );
    };

    //Convert the HEX color in the array to RGB colors, split them up to R-G-B, then find out the difference between the "color" and the colors in the array
    $.each(base_colors, function(index, value) { 
        var base_color_rgb = hex2rgb(value.hexvalue);
        var base_colors_r = base_color_rgb.split(',')[0];
        var base_colors_g = base_color_rgb.split(',')[1];
        var base_colors_b = base_color_rgb.split(',')[2];

        //Add the difference to the differenceArray
        differenceArray.push(Math.sqrt((color_r-base_colors_r)*(color_r-base_colors_r)+(color_g-base_colors_g)*(color_g-base_colors_g)+(color_b-base_colors_b)*(color_b-base_colors_b)));
    });

    //Get the lowest number from the differenceArray
    var lowest = Array.min(differenceArray);

    //Get the index for that lowest number
    var index = differenceArray.indexOf(lowest);

    //Function to convert HEX to RGB
    function hex2rgb( colour ) {
        var r,g,b;
        if ( colour.charAt(0) == '#' ) {
            colour = colour.substr(1);
        }

        r = colour.charAt(0) + colour.charAt(1);
        g = colour.charAt(2) + colour.charAt(3);
        b = colour.charAt(4) + colour.charAt(5);

        r = parseInt( r,16 );
        g = parseInt( g,16 );
        b = parseInt( b ,16);
        return r+','+g+','+b;
    }

    //Return the HEX code
    return base_colors[index].hexvalue;
} 
```

这是我更改的内容：

`var base_color_rgb = hex2rgb(value.hexvalue);`

`return base_colors[index].hexvalue;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:57:40.247

使用[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

```
$.getJSON(url, params, function(data) {
 // your json with colors
}); 
```

**非常重要：** json 应该是有效的！

# javafx - 动态访问/遍历/操作从控制器类外部的 FXML 创建的 JavaFX 节点

> ID：14756549
> 
> 赞同：1
> 
> 时间：2013-02-07T16:54:10.557
> 
> 标签：javafx, fxml

有人可以帮帮我。我是 JavaFX 和 FXML 的新手，我已经尝试了无数个小时来尝试做某事而没有任何运气。有人可以给我看一个代码的工作示例吗

1) 加载包含节点（例如标签和按钮）的 FXML，这些节点在不同的窗格和节点中嵌套了几层；

2）遍历列出节点（如标签和按钮）的整个场景；

3) 将 Java 代码耦合到一个节点（例如标签和按钮），以便我可以在为 FXML 定义的控制器类之外更改其属性（例如它的标签和内容）。

我的目标是使用 Scene Builder 构建 UI，然后能够动态更改场景的内容以及向其中添加其他节点。我的问题是我无法到达场景/舞台内的对象。

这是我一直在使用的代码。评论表明我在寻找什么。

//

```
public void start(Stage stage) throws Exception {
    FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("Sample.fxml"));
    Parent root = (Parent)fxmlLoader.load();
    SampleController controller = (SampleController)fxmlLoader.getController();
    controller.label.setText("Label text has been set");
    controller.button.setText("Button text has been set");

    // Looking for an example of traversing all the objects within the controller
    // looking for an object such as a TableView and its columns. Would like to
    // attach code outside the controller which populates the TableView.

    Scene scene = new Scene(root);
    stage.setScene(scene);
    stage.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-12T07:26:59.870

# strace - strace 在系统调用之前还是之后打印参数值？

> ID：14756550
> 
> 赞同：0
> 
> 时间：2013-02-07T16:54:11.913
> 
> 标签：strace

当系统调用修改其参数时，strace 是打印修改后的值，还是显示传入的原始值？

例如，这里是 epoll_wait 系统调用的一些 strace 输出：

`11:30:14.602559 epoll_wait(5, {{EPOLLIN|EPOLLOUT, {u32=1210872224, u64=140506770993568}}, {EPOLLIN|EPOLLOUT, {u32=1208190976, u64=140506768312320}}}, 128, 0) = 2`

epoll_wait 的第二个参数由系统调用填充。由于结构中有两个事件，并且返回值为 2，我猜 strace 会在调用完成后打印值。但是我找不到任何可以验证这一点的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:53:21.823

它因系统调用而异。在特定情况下`epoll`，此处打印：

[https://github.com/adetaylor/strace-android/blob/android/desc.c#L731](https://github.com/adetaylor/strace-android/blob/android/desc.c#L731)

（抱歉，这是一个相当奇怪的分支，但原则仍然适用）。

代码是：

```
static void
epoll_wait_common(struct tcb *tcp)
{
if (entering(tcp)) {
    printfd(tcp, tcp->u_arg[0]);
    tprints(", ");
} else {
    if (syserror(tcp))
        tprintf("%lx", tcp->u_arg[1]);
    else if (tcp->u_rval == 0)
        tprints("{}");
    else {
... 
```

该`if (entering(tcp))`位回答您的问题 - 此代码被调用两次。第一次，它`if`被触发，它只会打印文件描述符和逗号。第二次进入该`else`部分并打印其余详细信息。

# iphone - 在多列上使用 LIKE "%%" 提高搜索性能

> ID：14756551
> 
> 赞同：0
> 
> 时间：2013-02-07T16:54:13.583
> 
> 标签：iphone, sqlite, search

我们在 iPhone 应用程序上使用 sqlite。在搜索框中，我们想要查询数据库并返回与用户输入的内容相关的任何值。目前，我们正在搜索几个不同的列，例如

```
Gene
Disease
Medicine
Keywords 
```

我们从当搜索文本改变时调用这个方法（带有一些伪代码）的蛮力方法开始：

```
// Basically we do this for our 4 columns we are searching on
    NSString *query2 = [NSString stringWithFormat:@"select * from MedicineList where MedicineList.Keywords like \"%%%@%%\"",searchtext];

    FMResultSet * rs2 = [ _patientAnnotatedDatabase executeQuery:query2];
    while ([rs2 next])
    {
        // if you find anything, put it in a dictionary
    }
    [rs2 close]; 
```

这是一种搜索列并返回结果字典的大方法。当我们的数据集很小时，它就可以工作。当然，现在我们的数据集更大了，它的性能并不是那么好。除了在我们正在搜索的列上创建索引之外，我们还可以做其他性能方面的事情吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:58:59.253

`LIKE`像这样的模式`%word%`无法使用普通索引进行优化。

搜索单词是 SQLite 的[全文搜索](http://www.sqlite.org/fts3.html)扩展的设计目的。

# android - 在 Android 上是否可以实现低 OSC/Midi（无音频）延迟？

> ID：14756554
> 
> 赞同：5
> 
> 时间：2013-02-07T16:54:16.990
> 
> 标签：android, midi, latency, osc

我想为音频交互的实时界面做一个概念，所以真正的低延迟是必不可少的。上周我读了很多关于这个话题的文章，但是在这么短的时间内不可能得到一个真正的概述。所以在我深入挖掘之前，我需要评估这个项目的可行性。

我已经阅读了很多关于 Android 和低延迟音频应用程序的问题，并且我知道 iOS 在这个领域非常出色，但如果可能的话，我更喜欢 Android。（我没有开发 iOS 必不可少的 mac，我只是更喜欢更“开放”的 Andoid 更多）

所以我的问题是：

1.  糟糕的低延迟行为是否仅与实际的音频缓冲/处理有关，或者它是否也影响 midi 或仅 OSC 应用程序？对我来说，界面是重要的部分——这意味着我只需获取在单独的 PC 中处理的 midi/OSC 命令就可以了。

2.  我需要较低的整体延迟（从手指触摸事件到命令输出）。与iOS相比，这也是Android的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:40:03.790

延迟主要是音频缓冲区的函数。这里对最新发展进行了广泛的讨论：

[http://createdigitalmusic.com/2012/07/android-high-performance-audio-in-4-1-and-what-it-means-plus-libpd-goodness-today/](http://createdigitalmusic.com/2012/07/android-high-performance-audio-in-4-1-and-what-it-means-plus-libpd-goodness-today/)

Tl;dr 版本：Galaxy Nexus 能够在 Jelly Bean 中实现 12 毫秒的音频缓冲延迟。我在其他地方读到过 Nexus 10 和 Nexus 4 也可以做到这一点，但 Nexus 7 落后了。

这里有一个稍微技术性的讨论，它也将引导您找到一个使用 Open SL 来实现低延迟的库：

[https://github.com/libpd/pd-for-android/wiki/Low-latency-support-for-compliant-devices](https://github.com/libpd/pd-for-android/wiki/Low-latency-support-for-compliant-devices)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T08:16:11.967

Android 声音的慢延迟与设备的声音缓冲区长度有关。

我用我的旧平板电脑（Android 3.2，Acer ICONIA Tab A500）进行了基准测试。
传输一个 MIDI 事件（Note-on）的延迟平均为 12 毫秒。
我认为没有音频的应用程序就足够了。

我用 Java 创建了基准测试。使用 Android NDK 将获得更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T15:57:16.250

除了 kshoji 和 anthropomo 的答案，
另一个很棒的评论：
[http ://createdigitalmusic.com/2013/05/why-mobile-low-latency-is-hard-explained-by-google-galaxy-nexus-still-android-选择/](http://createdigitalmusic.com/2013/05/why-mobile-low-latency-is-hard-explained-by-google-galaxy-nexus-still-android-of-choice/)

# ruby - Ruby Kafka 生产者 BufferUnderflow

> ID：14756557
> 
> 赞同：3
> 
> 时间：2013-02-07T16:54:27.287
> 
> 标签：ruby, apache-kafka

我想使用 ruby​​ kafka 客户端库来生成事件，但遇到了一个我不知道如何解决的问题。任何帮助，将不胜感激。

我尝试过使用 kafka-rb（acrosa、mheffner 和 bpot 叉子）。问题是，无论我通过图书馆发送什么，例如

```
require 'kafka'
host = 'localhost'
port = 9092
producer = Kafka::Producer.new(

        :topic => 'login',
        :host => host,
        :port => port
)
producer.send([Kafka::Message.new("aaaaa")]) 
```

我得到一个：

```
java.nio.BufferUnderflowException
    at java.nio.HeapByteBuffer.get(HeapByteBuffer.java:127)
    at java.nio.ByteBuffer.get(ByteBuffer.java:675)
    at kafka.api.ApiUtils$.readShortString(ApiUtils.scala:22)
    at kafka.api.ProducerRequest$.readFrom(ProducerRequest.scala:34)
    at kafka.api.RequestKeys$$anonfun$1.apply(RequestKeys.scala:34)
    at kafka.api.RequestKeys$$anonfun$1.apply(RequestKeys.scala:34)
    at kafka.network.RequestChannel$Request.<init>(RequestChannel.scala:48)
    at kafka.network.Processor.read(SocketServer.scala:321)
    at kafka.network.Processor.run(SocketServer.scala:231)
    at java.lang.Thread.run(Thread.java:680) 
```

在服务器上。在同一台服务器上，我可以通过提供的控制台生产者发送文本而不会出现任何问题。

如果您之前看到过此内容，我将不胜感激。由于我对 Scala 不是很熟悉，所以我不确定问题出在哪里，但在我看来，引发此异常的那一行与从套接字读取 clientId 有关，而且在我看来， ruby 客户端没有发送这样的东西。

当我查看在 tcpdump 表单 kafka-rb 和提供的生产者上生成的消息时。红宝石的看起来更短。此外，无论我使用 kafka-0.7 还是 0.8，我都会得到完全相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:19:18.843

我可以用 Kafka 0.8 重现你的错误，但是当我尝试这个实现时：

```
require 'rubygems'
require 'kafka'
producer = Kafka::Producer.new({ :host => "localhost", :port => 9092, :topic => "test" , :compression => 0 })
message = Kafka::Message.new("some random message content")
producer.send(message) 
```

它适用于 Kafka 0.7：

![消费者示例](../Images/f834a6e0b67ef9d1617c8e7ac0c0fe2a.png)

根据 Kafka 文档，您提到的客户端仅支持 0.7.x ( [https://cwiki.apache.org/KAFKA/clients.html#Clients-Ruby](https://cwiki.apache.org/KAFKA/clients.html#Clients-Ruby) )。0.8 部分说：

> 0.8 版本相当大地改变了协议。这个版本还没有发布。此处记录了新协议。许多客户端正在进行中，我们将在完成后更新。

所以我认为[https://github.com/acrosa/kafka-rb](https://github.com/acrosa/kafka-rb)在这种情况下不起作用:-(。

最好的

预

# xml - 从 calstable 模型中去除空列

> ID：14756558
> 
> 赞同：0
> 
> 时间：2013-02-07T16:54:27.753
> 
> 标签：xml, xslt, xslt-2.0

我有一堆使用 CALS 模型标记的 XML 表，其中一些有我想删除的空列。所以这里有一些示例标记

```
 <table frame="none">
                 <tgroup cols="4" colsep="0" rowsep="0">
                    <colspec colname="1" colnum="1" colwidth="75pt"/>
                    <colspec colname="2" colnum="2" colwidth="63pt" align="center"/>
                    <colspec colname="3" colnum="3" colwidth="63pt" align="center"/>
                    <colspec colname="4" colnum="4" colwidth="63pt"/>
                    <thead>
                       <row valign="bottom">
                          <entry> </entry>
                          <entry>No. 9</entry>
                          <entry>No. 10</entry>
                          <entry> </entry>
                       </row>
                    </thead>
                    <tbody>
                       <row>
                          <entry>Max. size:</entry>
                          <entry>10.5 m.</entry>
                          <entry>6.7 m.</entry>
                          <entry> </entry>
                       </row>
                       <row>
                          <entry>Length:</entry>
                          <entry>210 m.</entry>
                          <entry>100 m.</entry>
                          <entry> </entry>
                       </row>
                       <row>
                          <entry>Depth:</entry>
                          <entry>11.0</entry>
                          <entry>7.0</entry>
                          <entry> </entry>
                       </row>
                    </tbody>
                 </tgroup>
              </table> 
```

因此，我想完全删除上面示例中的第 4 列。在许多（大多数？）情况下，它将是最后一列，但并不总是如此。

您会注意到第 4 列确实包含空格，或者可能是 160; 人物。

那么我将如何使用 xslt 删除这些整列？

TIA

恐惧症

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:34:58.307

请试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <!-- This key will allow us to select all the entries in a column based on their
       column  number -->
  <xsl:key name="kColumn" match="entry"
           use="count(. | preceding-sibling::entry)"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="tgroup">
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <!-- Select colspecs whose column isn't all blank -->
      <xsl:apply-templates 
        select="colspec[key('kColumn', position())[normalize-space(.)]]" />
      <xsl:apply-templates select="node()[not(self::colspec)]" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="colspec">
    <colspec colname="{position()}" colnum="{position()}">
      <xsl:apply-templates 
        select="@*[local-name() != 'colname' and local-name() != 'colnum']" />
      <xsl:apply-templates select="node()" />
    </colspec>
  </xsl:template>

  <!-- Omit entries that belong to all-blank columns -->
  <xsl:template match="entry[not(key('kColumn', position())[normalize-space(.)])]" />
</xsl:stylesheet> 
```

除了删除空白列之外，它还负责对保留的列重新编号（我假设您会想要这个），因此使用此输入，其中第二列为空白：

```
<table frame="none">
  <tgroup cols="4" colsep="0" rowsep="0">
    <colspec colname="1" colnum="1" colwidth="75pt"/>
    <colspec colname="2" colnum="2" colwidth="63pt" align="center"/>
    <colspec colname="3" colnum="3" colwidth="63pt" align="center"/>
    <colspec colname="4" colnum="4" colwidth="63pt"/>
    <thead>
      <row valign="bottom">
        <entry> </entry>
        <entry> </entry>
        <entry>No. 9</entry>
        <entry>No. 10</entry>
      </row>
    </thead>
    <tbody>
      <row>
        <entry>Max. size:</entry>
        <entry> </entry>
        <entry>10.5 m.</entry>
        <entry>6.7 m.</entry>
      </row>
      <row>
        <entry>Length:</entry>
        <entry> </entry>
        <entry>210 m.</entry>
        <entry>100 m.</entry>
      </row>
      <row>
        <entry>Depth:</entry>
        <entry> </entry>
        <entry>11.0</entry>
        <entry>7.0</entry>
      </row>
    </tbody>
  </tgroup>
</table> 
```

结果是：

```
<table frame="none">
  <tgroup cols="4" colsep="0" rowsep="0">
    <colspec colname="1" colnum="1" colwidth="75pt" />
    <colspec colname="2" colnum="2" colwidth="63pt" align="center" />
    <colspec colname="3" colnum="3" colwidth="63pt" />
    <thead>
      <row valign="bottom">
        <entry> </entry>
        <entry>No. 9</entry>
        <entry>No. 10</entry>
      </row>
    </thead>
    <tbody>
      <row>
        <entry>Max. size:</entry>
        <entry>10.5 m.</entry>
        <entry>6.7 m.</entry>
      </row>
      <row>
        <entry>Length:</entry>
        <entry>210 m.</entry>
        <entry>100 m.</entry>
      </row>
      <row>
        <entry>Depth:</entry>
        <entry>11.0</entry>
        <entry>7.0</entry>
      </row>
    </tbody>
  </tgroup>
</table> 
```

# php - 如何在后台运行用户请求？

> ID：14756559
> 
> 赞同：0
> 
> 时间：2013-02-07T16:54:28.453
> 
> 标签：php, jquery, ajax, zend-framework, crontab

Estou precisando que quando o usuário clique em determinado botão na tela (que dispara uma solicitação Ajax p/o servidor) o servidor libere a tela do usuário e continue executando o serviço em background。Estou utilizando PHP com ZendFRamework e jQuery。

**轻度编辑的机器翻译：**

我需要当用户单击屏幕上的特定按钮（触发不带服务器的 Ajax 请求）时，服务器释放用户的屏幕并继续在后台服务中运行。我在 ZendFramework 中使用 PHP 和 jQuery。我应该如何处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:49:43.260

在 ajax 调用脚本中添加 php exec 怎么样。

```
exec($cmd . " > /dev/null &"); 
```

您也必须在某处重新路由程序输出，通常是 /dev/null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:20:57.517

很难理解您的问题（葡萄牙语版本并不比英语更清晰）。据我了解，您希望让您的 php 代码继续运行，而用户可以做其他事情。

通常你不需要做任何事情来实现这一点，当 ajax 调用在后台运行时，即使发出其他请求，你的服务器也会继续处理。此外，控制用户屏幕的不是服务器，因为那是客户端。

如果您希望能够在 ajax 运行时运行 js，那么 jQuery 支持同步和异步调用，但默认是异步的，因此您不应该做任何特别的事情。

请进一步详细说明您的问题，并可能显示一些代码以便我们理解，一旦我理解您的意思，我将更新我的回答并清理您问题中的英文。

# ruby - RSpec 未通过套件，单独通过测试

> ID：14756561
> 
> 赞同：1
> 
> 时间：2013-02-07T16:54:28.980
> 
> 标签：ruby, rspec

我的`spec`文件夹中有两个测试，当我单独运行它们时它们都是绿色的：

```
rspec spec\temp_stab_target_spec.rb   
32 examples, 0 failures

rspec spec\mock_spec.rb
10 examples, 0 failures 
```

但是当我运行所有这些时：

```
rspec spec
42 examples, 32 failures 
```

一切为了`spec\mock_spec.rb`过去，一切为了`spec\temp_stab_target_spec.rb`不是

我做了一些研究，发现我遇到了与[这里](https://stackoverflow.com/questions/7156261/rspec-tests-pass-individually-but-fail-as-suite-because-of-argv)讨论的相同的问题。当我检查`ARGV`时，它包含`spec`. 我尝试`before(:each) { ARGV.clear }`像他一样使用，但无济于事。

另外，当我检查`ARGV`just running时`rspec spec\temp_stab_target_spec.rb`，它是空的。

有人可以解释发生了什么或帮我解决它吗？我将扩展套件，我希望能够一次运行所有测试，而不是单独运行。

万一它是相关的，我正在运行`ruby 1.8.7 (2012-02-08 patchlevel 358) [i386-mingw32]`和`rspec 2.12.2`.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:59:17.503

不要在测试中使用对 ARGV 的引用！

将类似的内容输入到您正在测试的代码中。使用构造函数、工厂方法或任何有助于将代码从难以测试的部分中分离出来的方法。

# javascript - 为微风从 ef 上下文中省略元数据

> ID：14756562
> 
> 赞同：1
> 
> 时间：2013-02-07T16:54:32.997
> 
> 标签：javascript, vb.net, asp.net-web-api, breeze

我正在使用微风.js webapi 来公开下面的类。我知道不支持 DbGeography 类型，所以我使用 JsonIgnore 从输出中删除它，但是如何让它从元数据中被忽略/省略？

```
Public Class Household
<Key>
Public Property Id As Integer
Public Property Postcode As String
Public Property Saving As Decimal
<JsonIgnore>
Public Property Coordinates As DbGeography
Public ReadOnly Property Latitude As Double
    Get
        Return Coordinates.Latitude.Value
    End Get
End Property
Public ReadOnly Property Longitude As Double
    Get
        Return Coordinates.Longitude.Value
    End Get
End Property
End Class

<BreezeController>
Public Class HouseholdsController
Inherits ApiController

Private ReadOnly _contextProviders As EFContextProvider(Of EnergyFriendContext) = New     EFContextProvider(Of EnergyFriendContext)

' ~/api/Households/Metadata 
<HttpGet>
Public Function Metadata() As String
    Return _contextProviders.Metadata()
End Function

' ~/api/Households/Households
' ~/api/Households/Households?$filter=IsArchived eq false&$orderby=CreatedAt
<HttpGet>
Public Function Households() As IQueryable(Of Household)
    Return _contextProviders.Context.Households
End Function

End Class 
```

微风js错误：

```
Unable to recognize DataType for: Edm.Geography 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:31:05.290

好的，从 1.1.1 版开始，当遇到“未知”数据类型时，微风将不再抛出此异常。

具有“未知”数据类型的数据属性现在将出现在 DataType 为“未定义”的 EntityType 元数据中。

从服务器返回的任何“未定义”数据类型的数据现在将通过原始数据传递，这意味着数据将完全是在服务器上序列化的数据，无需任何轻量处理。

这目前包括 DbGeometry 和 DbGeography 类。

现在可以从**EntityType.dataProperties**属性返回的数组中删除单个数据属性。

删除一个属性会告诉微风，当返回给客户端时，这个属性不应该被具体化到任何这种类型的实体上。这允许客户端有效地忽略任何服务器端属性的数据。

注意：在忽略一个属性时可能需要确保它不会被服务器序列化**。**我认为你已经在这样做了。

希望这可以帮助。

# javascript - 使用 require js 加载 jquery 插件

> ID：14756567
> 
> 赞同：22
> 
> 时间：2013-02-07T16:54:47.093
> 
> 标签：javascript, jquery, jquery-plugins, requirejs

我是新手，需要 js，问题是我不太了解如何加载 jQuery 插件。

我想加载多个插件，但我已经遇到了第一个插件的问题，选择的插件

js

```
//site full url
var siteUrl = window.location.protocol+"//"+window.location.host + "/";

requirejs.config({
    baseUrl: siteUrl + "assets/js",

    paths: {
        "jquery": "libs/jquery",
        "jquery-ui": "libs/jquery-ui",
        "bootstrap": "libs/bootstrap",
        "scripts": "scripts",
        "plugins": "plugins",
    }, 
});

requirejs(['jquery', 'jquery-ui', 'bootstrap', 'plugins/chosen'],
function($, chosen){
    $('.chzn-select').chosen();
}); 
```

我的测试html

```
<select data-placeholder="Choose a country..." style="width:350px;" class="chzn-select">
    <option value="">Test</option>
    <option value="">Test</option>
    <option value="">Test</option>
</select> 
```

当我尝试加载它时，我收到以下错误

```
TypeError: $ is not a function

...tion(){"in"==self.hoverState&&self.show()},self.options.delay.show),void 0):self...

bootstrap.js (line 6)

TypeError: $(...).chosen is not a function

$('.chzn-select').chosen(); 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-07T17:28:36.103

当您加载依赖项时，requirejs 会同时加载它们。当您收到该错误时，这意味着您的插件在加载 jQuery 之前已被加载和执行。您需要设置一个 shim 来告诉 requirejs 该插件依赖于已加载的 jQuery。

此外，大多数 jQuery 插件不支持 AMD，因此您还需要告诉 requirejs 寻找什么来告诉它正确加载的脚本。您可以使用 shim 中的“导出”条目来执行此操作。

我也不相信 jqueryUI 是 AMD 感知的，所以垫片中的一个条目可能也是为了这个。我不使用引导程序，所以我不确定你是否需要任何东西。

这是您的插件和 jQueryUI 的 shim，将其添加到您对 requirejs.config 的调用中：

```
shim: {
    'plugins\chosen': {
        deps: [ 'jquery' ],
        exports: 'jQuery.fn.chosen'
    },
    'jquery-ui': {
        deps: [ 'jquery' ],
        exports: 'jQuery.ui'
    }
} 
```

你可能还有一些我还没有看到的问题，但这至少应该让你继续前进。此外，这可能值得一读：[http](http://requirejs.org/docs/api.html#config-shim) ://requirejs.org/docs/api.html#config-shim 。如果您还没有，我肯定会建议您阅读整页。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-19T10:37:59.410

嗨，我想在这里告诉你，如果你想包含非 AMD 脚本（不包括 define() 调用），我们使用 shim config 。我想用一个简单的 jquery hightlight 插件示例来解释。

这将是您定义所有路径的配置文件

```
paths:{
    "jquery":"/path/to/jquery",
    "jgHighlight":"/path/to/jquery.highlight"
},
   shim:{

        deps:["jquery"], // jquery.highlight dependeps on jquery so it will load after jquery has been loaded 
        exports:"jqHighlight"

   } 
```

现在在以 define 开头的模块中，像这样包含 jqHighlight

```
define(["requireModulesArray","jgHighlight"],function(requiredModulesAliasArray){

   // no need to include any alias for jgHighlight in function(...)
   //use it like this now

     $("#divT").highlight("someText");

}); 
```

类似地，将包含和使用其他非 amd 模块。谢谢

# c# - 保持打开的 StreamWriter 作为类字段

> ID：14756576
> 
> 赞同：0
> 
> 时间：2013-02-07T16:55:15.507
> 
> 标签：c#, .net-4.0, streamwriter

我试图编写一个保持打开状态的类，`StreamWriter`直到实例化的对象被破坏——这是为了避免正常的`using`习惯用法，因为在程序运行时外部源不要编辑文件很重要（因此`FileShare.Read`）。

实例化后，通过构造函数成功创建文件。对该方法的调用`Write`实际上并不写任何东西，也不会抛出异常。`sw.Close()`一旦对象被销毁，析构函数会在of上抛出异常`Cannot access a closed file.`，即使`BaseStream`is not 也是如此`null`。我不确定我是否理解其中的原因。

这个[问题](https://stackoverflow.com/questions/12105545/initializing-filestream-and-streamwriter-fields-in-a-service-class)遵循某种类似的方法，但在其他类型的类中。所以我认为这种方法应该有效，但无法确定为什么无效。

```
class SchemaWriter
{
    private StreamWriter sw;
    private string path;

    /// <summary>
    /// Creates an object to handle writing Schema.ini information
    /// </summary>
    /// <param name="Path">Path to place Schema.ini file in</param>
    public SchemaWriter(string Path)
    {
        path = Path;
        sw = new StreamWriter(File.Open(Path + "Schema.ini", FileMode.Create,
                              FileAccess.ReadWrite, FileShare.Read));
    }

    /// <summary>
    /// Writes Schema information about the supplied file name
    /// </summary>
    /// <param name="FileName">Name of file to write the Schema info about</param>
    public void Write(string FileName)
    {
        sw.WriteLine(String.Format(@"[{0}]", FileName));
        sw.WriteLine(@"Format=TabDelimited");
        sw.WriteLine();
    }

    /// <summary>
    /// Closes StreamWriter, deletes ini file
    /// </summary>
    ~SchemaWriter()
    {
        if(sw.BaseStream != null)
            sw.Close();
        File.Delete(path + @"Schema.ini");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:24:27.503

GC 已经认领了它（并处置了它）。您唯一应该做的就是实施`IDisposable`. 请执行下列操作：

```
class SchemaWriter : IDisposable
{
    private StreamWriter sw;

    public void Dispose()
    {
       sw.Dispose();
    }

    ...
} 
```

您现在可以将您的对象用于：

```
using(var writer = new SchemaWriter())
{
} 
```

`StreamWriter`完成对象后，这将立即关闭。如果您不使用GC，GC 会在您需要时为您`using`收集。`StreamWriter`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:09:55.523

您应该使用`using`块的原因之一是`StreamReaders`/`Writers`被缓冲，因此它们不必为写入的每个字节重新访问硬盘驱动器。这意味着在您调用`StreamWriter.Flush`.

我仍然建议使用这些`using`块，但只需使用“保持打开”覆盖。看：

[http://msdn.microsoft.com/en-us/library/gg712853.aspx](http://msdn.microsoft.com/en-us/library/gg712853.aspx)

# unit-testing - AQTime 无法分析基于 .NET 4 和 NUnit 的单元测试项目的代码覆盖率

> ID：14756579
> 
> 赞同：1
> 
> 时间：2013-02-07T16:55:26.203
> 
> 标签：unit-testing, nunit, code-coverage, .net-framework-version, aqtime

我最近在尝试使用 AQtime 来分析基于 .NET 框架 4 并由 NUnit 断言的单元测试项目的代码覆盖率时遇到了一个问题。非常感谢您的意见和想法。

假设我有一个基于 .NET 框架 4.0 并由 NUnit 断言的单元测试项目。我尝试在 NUnit 控制台中执行单元测试，并在我运行 AQTime 代码覆盖率分析器时要求 AQTime 启动 NUnit。然而，在 NUnit 中完成所有测试之后，AQTime 总是显示没有例程，也没有命中行。因此，AQTime 中显示的覆盖率始终为 0.0%。不知道为什么会这样，因为它适用于另一个基于 .NET 框架 3.5 的单元测试项目。

我们有另一个基于 .NET 3.5 的单元测试项目，AQTime 运行良好，没有问题。由于我们的新测试项目必须基于 .NET4，因此将其基础更改为 3.5 不是一种选择。

如果您遇到类似情况，请告诉我，感谢您的意见。提前致谢。

# objective-c - 更改 smjobbless 对话框的文本 kAuthorizationEnvironmentPrompt

> ID：14756583
> 
> 赞同：0
> 
> 时间：2013-02-07T16:55:30.950
> 
> 标签：objective-c, authorization

SMJobBless 有一个对话框提示，告诉用户它正在安装帮助工具并输入密码以继续。我想更改文本。

以下代码没有更改文本，而是将我的自定义文本放在开头并仍显示默认文本。我错过了什么或做错了什么？

```
// Creating auth item to bless helper tool and install framework
AuthorizationItem authItem = {kSMRightBlessPrivilegedHelper, 0, NULL, 0};

// Creating a set of authorization rights
AuthorizationRights authRights = {1, &authItem};

NSString *promptText = @"Customized Text. Privilege?\n\n";

AuthorizationItem dialogConfiguration[1] = { kAuthorizationEnvironmentPrompt, [promptText length], (char *) [promptText UTF8String], 0 };

AuthorizationEnvironment authorizationEnvironment = { 0 };
authorizationEnvironment.items = dialogConfiguration;
authorizationEnvironment.count = 1;

// Specifying authorization options for authorization
AuthorizationFlags flags = kAuthorizationFlagDefaults | kAuthorizationFlagInteractionAllowed | kAuthorizationFlagExtendRights;

// Open dialog and prompt user for password
OSStatus status = AuthorizationCreate(&authRights, &authorizationEnvironment, flags, authRef);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T08:45:50.510

使用 kAuthorizationRightExecute 而不是 kSMRightBlessPrivilegedHelper 会得到一个短文本，它只要求输入密码。使用 kAuthorizationEnvironmentPrompt 作为环境可以在提示的开头添加额外的文本。

# jquery - jquery从变量中删除html元素

> ID：14756584
> 
> 赞同：4
> 
> 时间：2013-02-07T16:55:33.807
> 
> 标签：jquery, html, dom

我将 html 保存在变量中

```
var  itinerary =  $('.events_today').html() ; 
```

我有很多 html 和一个要删除的按钮。它的 ID 为“myButton”。如何从保存在我的变量中的 html 中删除它

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T17:07:25.480

我建议这种方法

```
var itinerary = $('.events_today')
                .clone(true)       /* get a clone of the element and from it */
                .find('#myButton') /* retrieve the button, then */
                .remove()          /* remove it, */
                .end()             /* return to the previous selection and */
                .html() ;          /* get the html */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:59:37.963

尝试这个：

```
itinerary.filter(function() { return $(this).not("#myButton"); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:57:45.590

只需通过它的 id 定位元素并删除：

```
$('#myButton').remove() 
```

然后获取您的行程：

```
var itinerary =  $('.events_today').html() ; 
```

// 以上将从 DOM 中删除按钮。要在不从 DOM 中取出按钮的情况下获取 html，您可以执行以下操作：

```
var itinerary = $('.events_today').clone(true).find('#myButton').remove().end().html(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T16:58:10.370

在集合中找到元素并将其删除。

`$('.events_today').find('#myButton').remove();`

**编辑：**在意识到我可能误解了 OP 之后，这可能会起作用（虽然不是很漂亮）。

```
var html = $('.events_today').html();
// Parse the html, but don't add it to the DOM
var jqHtml = $(html);
// Find and remove the element with the specified id.
jqHtml.find('#myButton').remove();
// Get the new html without the myButton element.
var result = jqHtml.html(); 
```

更新：根据@Fabrizio Calderan 的回答，您可以使用jQuery 方法更好地完成我上面所做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T13:35:50.323

尝试这个：

```
var html = $('#myHtml').clone(true).find('#elementThatYouWantToRemove').remove().end().html(); 
```

# javascript - 如何从多个元素中获取属性值而不仅仅是第一个匹配项

> ID：14756585
> 
> 赞同：2
> 
> 时间：2013-02-07T16:55:44.457
> 
> 标签：javascript, jquery, attributes

如何从以下代码行中获取所有数据 ID

**HTML：**

```
<div data-id='1' class="userId">
    <span> user name-1 </span>
</div>
<div data-id='2' class="userId">
    <span>user name-2</span>
</div> 
```

**javascript:**

```
var userIds = $('.userId').attr("data-id"); 
```

但它只返回**1**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T16:57:14.063

```
var userIds = $('.userId').map(function(){
    return $(this).data('id');
}).get(); 
```

**它是如何工作的？**

它抓取所有`userId`类元素，然后它将执行一个函数（with `map`），该函数将使用返回`data-id`属性`data`，然后使用 `get.

**为什么你的代码不起作用？**

```
var userIds = $('.userId').attr("data-id"); 
```

`attr`仅适用于集合中的第一个匹配元素，因此它仅返回第一个元素 id- `1`。

[attr：](http://api.jquery.com/attr/) *获取匹配元素集中第一个元素的属性值...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:59:44.377

```
var ar = [];
$('div[data-id]').each( function() {
    ar.push($(this).data('id'));
}); 
```

...应该这样做，但我没有测试它。

# jquery - jquery getJSON() 不工作

> ID：14756587
> 
> 赞同：0
> 
> 时间：2013-02-07T16:55:45.473
> 
> 标签：jquery, json, jquery-mobile

我似乎无法让我的 jquery json 阅读器工作。我正在使用以下代码（改编自 jquery 文档上的 flickr 示例）：

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
<div data-role="page" id="ScheduleDay">
    <div data-role="header">
        <a href="#HomePage" data-icon="home" data-direction="reverse">Home</a>      
        <h1 id="ScheduleDayText">Schedule</h1>
    </div>
    <div data-role="content">   
        <ul data-role="listview" id="ScheduleList" data-autodividers="true">
       </ul>
    </div>
</div>
<script>
$(document).on("pageinit", "#ScheduleDay", function(){
    $.getJSON("http://oregonffa.com/EventMaster/WebService/ScheduleEvents.php",
    function(data){
        $.each(data, function(i,item){
            $("ul#ScheduleList").append('<li time="' + item.StartTime + '"><a href="javascript:viewScheduleEvent(' + item.ScheduleID + ')">' + item.Name + '</a></li>');
        });
        $("ul#ScheduleList:visible").listview('refresh');
    });
});
</script>
</body>
</html> 
```

它似乎没有正确读取 json 提要。我创建了一个[jsfidle](http://jsfiddle.net/4fGT6/19/)来显示发生了什么。

我敢肯定，像往常一样，我忽略了代码中的某些内容，但我一生都无法弄清楚在哪里/什么。

编辑：我应该指出 json 提要确实解析正确。这是一个例子：

```
[{"ScheduleID":"1","StartTime":"3:30 PM","Name":"Registration Opens"},{"ScheduleID":"2","StartTime":"3:30 PM","Name":"State Creed Speaking Order Drawing"},{"ScheduleID":"3","StartTime":"4:30 PM","Name":"State Creed Public Speaking"},{"ScheduleID":"4","StartTime":"7:00 PM","Name":"Opening Session"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:00:24.073

您无法从其他主机获取 JSON，因此您必须在 jQuery 中使用 JSONP

在您的示例控制台中显示以下错误

> XMLHttpRequest 无法加载 [http://oregonffa.com/EventMaster/WebService/ScheduleEvents.php](http://oregonffa.com/EventMaster/WebService/ScheduleEvents.php)。Access-Control-Allow-Origin 不允许来源 [http://fiddle.jshell.net 。](http://fiddle.jshell.net)

您可以使用[本文](http://www.jquery4u.com/json/jsonp-examples/)了解 JSONP，但如果您不能修改此服务，则可以在您的网站中使用代理页面，

# iis - 自动化自签名证书 IIS7（可能使用 appcmd）

> ID：14756588
> 
> 赞同：0
> 
> 时间：2013-02-07T16:55:50.203
> 
> 标签：iis, ssl, iis-7, self-signed, build-script

我目前有一个 rake 脚本，它可以编译、打包和部署一个 ASP MVC Web 项目。目前，每次运行构建脚本时，我都会拆除并设置 IIS，但是我现在正在考虑添加一些 SSL 添加，因此希望使用自签名证书部署 IIS 站点并设置绑定以允许 HTTPS。

快速浏览一下互联网后，似乎没有简单的解决方案，只是想仔细检查一下，因为理想情况下，我只想通过命令行搭载 appcmd 并发送一些关于该做什么的信息，但是我可以使用另一个工具，只要我可以通过命令行运行它来完成所需的工作

任何与上述相关的信息将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:06:24.450

我个人通过这种方式解决了这种情况。我在 IIS 网站中创建，其中存在绑定、生成和关联的自签名证书等（完整设置网站）。网站目录的路径例如是 C:\Website。如果您使用 Visual Studio 2012，您可以（在首次创建后）在网站项目上“发布”。我将项目发布到文件系统到目录 C:\Website（网站目录）。一切正常。

最好的问候，彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:53:17.400

最终使用了 SelfSSL7，它可以满足我的一切需求。它允许您在 IIS 中为其提供站点名称，它会创建证书，也可以将其标记为受信任，尽管我不确定这是否仅适用于 IE。

# c++ - 为什么我们不能将 &array 传递给 &array[0] 可能的函数

> ID：14756589
> 
> 赞同：1
> 
> 时间：2013-02-07T16:55:52.930
> 
> 标签：c++

```
void fun(int* array){}  

int main(){

int array[]={1,2,3};
fun(&array);----->(1)//error in this line
return 0;
} 
```

`error: cannot convert âint (*)[3]â to âint*â for argument â1â to âvoid fun(int*â).`

如果我通过`fun(&array[0])`，它工作正常。根据我的理解`&array`，`&array[0]`两者都产生相同的地址。请澄清。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T16:58:45.450

虽然任何聚合的地址（这意味着数组和标准布局类）都保证与第一个元素的地址相同，但类型不同，并且没有隐式转换。

* * *

例如，为什么不同类型很重要且有用：

```
for( int *p = array; p < (&array)[1]; ++p ) 
```

遍历 的所有元素`array`，而

```
for( int *p = array; p < (&array[0])+1; ++p ) 
```

只执行一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:05:43.000

在 C++11 中，如果你运行这个：

```
#include<iostream>
template<class T>
void foo(T t) {
  std::cout << __PRETTY_FUNCTION__ << std::endl;
}

int main() {
   int arr[] = {1,2,3};
   foo(arr);
   foo<decltype(arr)>(arr);
   foo(&arr);
   foo(&arr[0]);
} 
```

它将产生结果：

```
void foo(T) [with T = int*]
void foo(T) [with T = int [3]]
void foo(T) [with T = int (*)[3]]
void foo(T) [with T = int*] 
```

有趣的是，数组默认折叠成一个指针（不确定这是 gcc 行为还是预期的）。但是，第二行显示的类型`arr`是`int[3]`，因此`&arr`是*指向`int[3]`*不同于的指针`int*`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:02:51.890

它们不起作用，因为它们意味着不同的元素大小。索引 an`int*`会增加它的地址`sizeof(int)`，因为它索引到`int`. 索引 an`int(*)[3]`会使它的地址增加`sizeof(int) * 3`，因为它索引到 3 个 int 的数组的数组中。因此，即使起始地址相同，它们也是非常不同的类型，并且意味着非常不同的指针算法。编译器非常正确地告诉您它们不兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T16:58:36.453

数组在传递时自然会衰减为指针。您不必使用 address-of 运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:00:49.550

你有不匹配的类型。

该函数需要`*int`（指向 int 的指针）。

`array`并且`&array[0]`属于那种类型，`*int`。

但是`&array`是类型`int(*)[3]`（指向 3 个整数数组的指针）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T17:03:31.257

尝试这个：

```
void fun(int* array){} // int *array is integer pointer so it can point to int not the int pointer. 

int main(){

int array[]={1,2,3};
fun(array); //remove &. now *array of pm point to array[0] i.e int.
return 0;
} 
```

# regex - 正则表达式匹配第一次出现

> ID：14756591
> 
> 赞同：1
> 
> 时间：2013-02-07T16:56:14.643
> 
> 标签：regex

我有一个包含各种文章的巨大文本文件，我正在尝试使用正则表达式从中提取行。我知道标题下面的行以 For/From 开头（大多数时候）我写了以下正则表达式，但如果有文章的段落以 From/For 开头，它会匹配标题直到段落。如何使正则表达式匹配 For/From 的第一次出现？

```
((?<=\n)[A-Z].*\n+(?=(?:(?:From)|(?:For)))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:57:41.307

让你的量词不贪婪。

```
((?<=\n)[A-Z].*?\n+(?=(?:(?:From)|(?:For))))
               ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:17:45.007

您似乎正在使用该`/g`标志。删除它可能会解决您的问题，因为您不想匹配所有匹配项，只匹配第一个匹配项。

# image - 使用类时如何创建图形？AS3

> ID：14756596
> 
> 赞同：0
> 
> 时间：2013-02-07T16:56:32.867
> 
> 标签：image, actionscript-3, apache-flex, components

我正在创建一种“游戏”，其中三个不同颜色的圆圈出现在屏幕上，并需要不同数量的点击才能消失。我有一个主要的 mxml 函数，然后是 4 个其他类。我以为我快要完成它了，但我遇到了一个错误，它没有告诉我它是什么。这是[此处](http://mypage.iu.edu/~tfaas/222/assignments/project1.html)的评分准则的链接运行代码时遇到的错误是：“错误 #2032：流错误。URL：file:///C|/Users/Gabe/Adobe Flash Builder 4.6/Project 1/bin -debug/framework_4.6.0.23201.swf" 这是我的代码：

主.mxml：

```
import com.multiClicker.*;

        import spark.components.Image;

        //create the init function
        public function init():void {
            //create new target and add it to the stage
            onEnterFrame();

        }

        public function onEnterFrame(e:Event):void{
            //2% chance of being added per frame
            if(Math.random() <= .02) {
                //33% chance of adding red target
                if(Math.random() <= .033){
                    //make a new image
                    var newCircle1:RedTarget = new RedTarget();

                    this.addElement(newCircle1);

                    //position circle 
                    newCircle1.x = Math.random() * stage.stageWidth;
                    newCircle1.y = Math.random() * stage.stageHeight;
                }
                //33% chance of adding blue target
                else if(Math.random() > .066){
                    //make a new image
                    var newCircle2:BlueTarget = new BlueTarget();

                    this.addElement(newCircle2);

                    //position circle 
                    newCircle2.x = Math.random() * stage.stageWidth;
                    newCircle2.y = Math.random() * stage.stageHeight;
                }
                //33% chance of adding green target
                else {
                    //make a new image
                    var newCircle3:GreenTarget = new GreenTarget();

                    this.addElement(newCircle3);

                    //position circle 
                    newCircle3.x = Math.random() * stage.stageWidth;
                    newCircle3.y = Math.random() * stage.stageHeight;
                }

            }
        } 
```

我的 Target.as 文件：

```
package com.multiClicker{

//import the needed classes
import flash.display.Shape;
import flash.events.MouseEvent;
import flash.utils.Timer;

import spark.components.Image;

public var hp:Number;

public class Target extends Image 
{

    public function Target() {

        //add event listeners
        this.addEventListener(MouseEvent.CLICK, onClick);

    }

    //sets the hp of the target
    public function hP():Number { 
        return hp;
    }

    //get function that returns false if alpha is <= 0
    public function dead():Boolean {

        if(alpha <= 0){
            return false;
        }

    }

    //subtracts one from targets HP when clicked
    public function onClick(e:MouseEvent = null):void {

        //subtracts one from hp each click
        hp--;

        if(hp <=0) {
            this.addEventListener(onEnterFrame);
        }

    }

    //subtracts .1 from the classes alpha
    public function onEnterFrame(e:Timer):void{
        this.alpha =- .1;
    }

    //draws the target
    public function drawTarget(color):void {

        var circle:Shape = new Shape();

        circle.graphics.beginFill(color);
        circle.graphics.drawCircle(0,0,30);

    }

} 
```

}

那么目标文件 Red、Blue 和 GreenTarget.as 都是一样的：

```
package com.multiClicker{   
import flash.events.MouseEvent;

public class RedTarget extends Target
{

    private var hp:Number = 3;

    public function RedTarget()
    {
        //draw the red circle
        this.graphics.beginFill(0x990000);
        this.graphics.drawCircle(0,0,30);

        //include the super function
        super();
    }

    //subtracts one from targets HP when clicked
    override public function onClick(e:MouseEvent=null):void {

        super.onClick(e);

        //subtracts one from hp each click
        hp--;

        if(hp <=0) {
            this.addEventListener(onEnterFrame);
        }

    }

} 
```

}

我只在 Target 和 GreenTarget 中遇到错误。它没有告诉我错误是什么或在哪里。任何帮助都是极好的！

编辑：我发布了我收到的错误消息。我在 Flash Builder 上使用了 clean 功能，它消除了我的错误。然后我再次运行它，我得到一个找不到文件的错误。它说找不到我的 Main.swf。

edit2：我想我找到了错误，我删除了 Main.mxml 文件中的 onEnterFrame 函数，错误消失了。现在我只是看不出该功能有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:21:22.473

我使用 MiniBuilder 做了类似的事情：

[http://www.swfcabin.com/open/1360282440](http://www.swfcabin.com/open/1360282440)

以下是课程：

应用程序.as

```
package com.multiClicker {
import flash.display.*;
import flash.events.*;

public class Application extends Sprite {
    public function
    Application() {
        addEventListener( Event.ENTER_FRAME, onEnterFrame );
    }

    private function
    onEnterFrame( e:Event ):void {
        var circle:Target;
        var n:Number = Math.random();

        // 33% of 2% chance each of being added per frame
        if ( n <= 0.00667 )     circle = new RedTarget();
        else if( n <= 0.01334 ) circle = new GreenTarget();
        else if( n <= 0.02 )    circle = new BlueTarget();

        if ( circle ) {
            circle.x = Math.random() * stage.stageWidth;
            circle.y = Math.random() * stage.stageHeight;
            addChild( circle );
        }

        // Remove dead
        for ( var i:int = 0; i < numChildren; i++ ) {
            var child:Target = getChildAt( i ) as Target;
            if ( child ) {
                if ( child.dead ) {
                    removeChild( child );
                    i--;
                }
            }
        }
    }
}
} 
```

目标.as

```
package com.multiClicker {
import flash.display.*;
import flash.events.*;

public class Target extends Sprite {
    protected var hp:Number;

    public function 
    Target() {
        addEventListener( MouseEvent.CLICK, onClick );
    }

    public function
    get dead():Boolean {
        if ( alpha <= 0 ) return true;
        return false;
    }

    protected function
    drawTarget( color:uint ):void {
        graphics.beginFill( color );
        graphics.drawCircle( 0, 0, 30 );
        graphics.endFill();
    }

    private function 
    onClick( e:MouseEvent = null ):void {
       if ( --hp <= 0 ) addEventListener( Event.ENTER_FRAME, onEnterFrame );
    }

    private function 
    onEnterFrame( e:Event ):void{
        alpha -= 0.1;
        if ( alpha <= 0 ) {
            removeEventListener( Event.ENTER_FRAME, onEnterFrame );
            removeEventListener( MouseEvent.CLICK, onClick );
        }
    }
}
} 
```

RedTarget.as

```
package com.multiClicker {
public class RedTarget extends Target {
    public function
    RedTarget() {
        super();
        hp = 3;
        drawTarget( 0xff0000 );
    }
}
} 
```

绿色目标

```
package com.multiClicker {
public class GreenTarget extends Target {
    public function
    GreenTarget() {
        super();
        hp = 2;
        drawTarget( 0x00ff00 );
    }
}
} 
```

BlueTarget.as

```
package com.multiClicker {
public class BlueTarget extends Target {
    public function
    BlueTarget() {
        super();
        hp = 1;
        drawTarget( 0x0000ff );
    }
}
} 
```

我希望这会有所帮助。

# c# - 尝试创建下拉列表和文本框，将列表项设置为数据，将文本框设置为值-asp.net mvc 4

> ID：14756599
> 
> 赞同：0
> 
> 时间：2013-02-07T16:56:51.713
> 
> 标签：c#, asp.net, razor, asp.net-mvc-4

我正在尝试创建一个基于服务器名称或打印机名称进行搜索的搜索表单。这是我的控制器的片段：

```
List<SelectListItem> items = new List<SelectListItem>();
        items.Add(new SelectListItem { Text = "Server Name", Value = "ServerName" });
        items.Add(new SelectListItem { Text = "Printer Name", Value = "PrinterName" });

        ViewData["newlist"] = items; 
```

这是我的观点（我知道这是错误的，因为它不起作用）：

```
 @using (Html.BeginForm("search", "PrintQueues", FormMethod.Get))
{
    <fieldset>
        <legend>
            Search
        </legend>

    @Html.DropDownList("newlist",ViewData["newlist"] as SelectList)
    @Html.TextBox("newlist")
    <p> 
       <input type="submit" value="Submit" />
   </p>
    </fieldset> 
} 
```

如果我选择“服务器名称”并在文本框中输入一个值（例如“myservernaem”，我希望 url 显示：

```
/search?ServerName=myservername 
```

我很确定我的控制器和视图都不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:00:45.150

不是这种方法的忠实拥护者... Http 的工作原理是为每个`input`控制器发送一个值。根据您在控制器中收到的值，您应该能够返回适当的页面和信息。

因此，如果您将下拉列表重命名为*searchType*并将您的文本框重命名为*searchCriteria* ，您将有一个很好的查询字符串，例如：`/Search?searchType=Printer&searchCriteria=epson`。在您的控制器中，您应该能够接收这些并返回适当的页面（无论是打印机还是服务器）。

```
public ActionResult Search(string searchType, string searchCriteria)
{
    if(searchType == "PrinterName")
    {
        // search your printers using searchCriteria and return appropriate View
    }
    else if(searchType == "ServerName")
    {
        // search your servers using searchCriteria and return appropriate View
    }
} 
```

如果您采用这种方法，您可以创建一个`enum`名为*SearchType*并使用它而不是`string`，这将允许您执行以下操作：`if(searchType == SearchType.Printer)`...

如果您想采用您的方法，则可以在尝试搜索和附加 URL 时从输入中获取值：

```
@Html.DropDownList("searchType",ViewData["newlist"] as SelectList)
@Html.TextBox("searchCriteria")
<button type="button" onclick="GoToSearch();">Search</button>

function Search() {

    // assumption of jquery (use document.getElementById otherwise...)
    var type = $('#searchType').val();
    var searchCriteria = $('#searchCriteria').val();

    window.location = '@Url.Action("Search", "PrintQueues")' + '?' + type + '=' + searchCriteria;
} 
```

很高兴回答任何问题。

# javascript - Bing Maps v7 图钉 htmlContent 导致事件在不可见时变为未绑定

> ID：14756603
> 
> 赞同：3
> 
> 时间：2013-02-07T16:57:00.430
> 
> 标签：javascript, bing-maps

当使用设置了 htmlContent 属性的图钉创建地图时，当图钉离开地图区域（例如：放大然后缩小）时，事件可能会变得未绑定。

**重建步骤：**

加载地图 点击图钉（应提醒） 放大地图上的任意位置，使图钉不再在地图上 缩小 再次点击图钉（将不再提醒） 当图钉没有 htmlContent 时不会发生这种情况属性集。

我在这里创建了演示：

破碎的例子：http: [//jsfiddle.net/wYddq/3/](http://jsfiddle.net/wYddq/3/)

```
var pushpinOptions = {width: null, height: null, htmlContent: "<div style='font-size:12px;font-weight:bold;border:solid 2px;background-color:LightBlue;width:100px;'>Custom Pushpin</div>"}; 
```

工作示例：http: [//jsfiddle.net/wYddq/4/](http://jsfiddle.net/wYddq/4/)

```
var pushpinOptions = {width: null, height: null}; 
```

在 Chrome 24（W7 和 OSX）、IE9（W7）和 IE10（W8）中测试，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T10:06:49.527

Bing Maps 论坛中似乎有一个解决方案：http: [//social.msdn.microsoft.com/Forums/en-US/ef4b7ef1-d53e-4385-9e58-775c6a028ebe/bing-maps-custom-html-pushpin-不触发任何信息框事件](http://social.msdn.microsoft.com/Forums/en-US/ef4b7ef1-d53e-4385-9e58-775c6a028ebe/bing-maps-custom-html-pushpin-not-firing-any-infobox-event)

# bash - 按排序顺序打印字符

> ID：14756612
> 
> 赞同：1
> 
> 时间：2013-02-07T16:57:20.417
> 
> 标签：bash

例如，给定“可见字符”类

```
[:graph:] 
```

又名

```
[\x21-\x7E] 
```

我怎么能以“整理”顺序打印那些，这是由`LC_COLLATE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:23:20.053

只需通过排序运行它。最难的部分是获取字符列表。这适用于 ASCII：

```
for ((i=0x21; i<=0x7E; i++))
do 
    printf "\\$(printf '%03o' $i)\0"; 
done | sort -z | tr -d '\0' 
```

它写出每个字符后跟一个 NUL 字节，然后将它们全部排序（`sort`考虑 LC_COLLATE），最后删除 NUL。

# testng - 当数据集之一导致失败时，不执行dependsOnMethods 和dataprovider 方法

> ID：14756613
> 
> 赞同：1
> 
> 时间：2013-02-07T16:57:27.637
> 
> 标签：testng

我正在尝试创建一个 testNG 测试，该测试取决于上一个测试的成功执行（比如我想创建一个帐户然后编辑一些详细信息）。我想将它与数据提供者结合起来。我决定使用dependsOnMethods，因为这似乎是合乎逻辑的，但是我注意到它的行为与我预期的不同。在下面的示例中，我希望测试“三”被跳过一次并执行一次，因为第一组数据提供通过条件，而另一组数据提供失败条件。不幸的是，我似乎错过了“dependsOnMethods”背后的一些概念。也许还有其他方法可以做到这一点？谢谢你的帮助。

```
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;
import org.testng.Assert;

public class simpleTest {

@DataProvider(name = "provided data")
public static Object[][] data() throws Exception {
       Object[][] data = new Object[][] { 

               {true},
               {false}
               };

       return data;
}

@Test(dataProvider = "provided data")
public void one(boolean cond){
    System.out.println("******** 1");

}
@Test(dataProvider = "provided data")
public void thisfailssometimes(boolean cond){
    System.out.print("******** 2 !!!");
    if (cond) {System.out.println("PASS");}else{System.out.println("FAIL");};
    Assert.assertTrue(cond);

}

@Test(dataProvider = "provided data",dependsOnMethods = {"thisfailssometimes"})
public void three(boolean cond){
    System.out.println("******** 3");

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:23:37.553

我也可以看到这种行为，我本来希望三个运行一次并跳过一次。在这两种情况下都跳过第三种方法。您可能可以提交错误或等待 Cedric 回复线程。作为一种解决方法，尝试通过工厂的相同流程给出预期的行为..这是修改后的代码..

```
 @Factory(dataProvider="provided data")
    public simpleTests(boolean b){
        this.b = b; 
    }
    @DataProvider(name = "provided data")
    public static Object[][] data() throws Exception {
           Object[][] data = new Object[][] { 
                           {true},
                           {false}
                           };

                   return data;
        }

    @Test
    public void one(){
            System.out.println("******** 1");
    }
   @Test
   public void thisfailssometimes(){
       System.out.print("******** 2 !!!");
       if (b) {System.out.println("PASS");}else{System.out.println("FAIL");};
       Assert.assertTrue(b);

            }

   @Test(dependsOnMethods = {"thisfailssometimes"})
   public void three(){
        System.out.println("******** 3");
            } 
```

# list - 从 Lisp 中的列表中删除双元素

> ID：14756623
> 
> 赞同：1
> 
> 时间：2013-02-07T16:57:45.113
> 
> 标签：list, lisp, common-lisp, duplicate-removal

我必须从 lisp 的列表中删除所有双元素。这是一个例子：

```
(A B C D E A A B F G A) => (A B C D E F G) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T16:59:47.780

您正在寻找[remove-duplicates](http://clhs.lisp.se/Body/f_rm_dup.htm)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-06T00:18:02.250

我也是 lisp 的新手，但在我做作业时遇到了这个问题。有一个函数“delete-duplicates”用于从列表中删除重复项。因为，您只有一个列表：

```
(delete-duplicates '(A B C D E A A B F G A)) 
```

或者

```
(remove-duplicates '(A B C D E A A B F G A)) 
```

请查看此链接以获取更多详细信息：[http ://clhs.lisp.se/Body/f_rm_dup.htm#delete-duplicates](http://clhs.lisp.se/Body/f_rm_dup.htm#delete-duplicates)

# jquery - Jquery删除字符串但保持结构

> ID：14756626
> 
> 赞同：0
> 
> 时间：2013-02-07T16:58:02.190
> 
> 标签：jquery, replace, blogs

我正在背弃[之前的一篇文章](https://stackoverflow.com/questions/2950357/jquery-removing-character-from-string)，该文章专门讨论了从元素内部删除字符串。这样做的代码是：

```
 $this.text( $this.text().replace("text to strip out", "") ); 
```

我已经成功地删除了文本“类别：”

仅供参考：这是一个博客页面，其中包含动态添加的类别。在我去掉“类别：”之前的 HTML 结构：

```
<container>
   <div class="categories">
     "categories: "  //This is what I strip out with above code
     <a href = "...">Category Name</a> //This is a linked category name
   </div>
</container> 
```

问题是，当我删除“类别：”时，它也会删除并留下一个未链接的“类别名称”

jquery 运行后 html 如下所示：

```
 <container>
   <div class="categories">Category Name</div>
</container> 
```

我需要保持链接处于活动状态，因为我希望用户能够单击“类别名称”以保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:00:42.017

一种方法，不知道它是否是最好的方法，是将锚元素保存为 javascript 变量。然后，在您删除要删除的内容后，将锚重新注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:11:19.573

试试这个...

```
$("div.categories").each(function() {
    var $this = $(this);
    $this.html($this.html().replace("categories: ", ""));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:11:22.223

要删除 a`textNode`您需要使用`contents()`来检索它们，然后是 and 的组合`filter()`，`remove()`如下所示：

```
$('.categories')
    .contents()
    .filter(function() { return this.nodeType == 3; })
    .remove(); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/rSEXm/)

请注意，这将删除所有直接子文本节点。如果要按节点的文本进行过滤，请相应地修改`filter()`函数。

# google-apps-script - 将电话号码添加到没有电子邮件地址的联系人

> ID：14756635
> 
> 赞同：1
> 
> 时间：2013-02-07T16:58:12.033
> 
> 标签：google-apps-script

我想将几部手机从电子表格移动到联系人，但其中几部没有电子邮件地址。如果我使用*getContactsByName*它会返回一个我无法写入的数组。也许有一种方法可以使用*getContactbyId*？

这是我目前使用的脚本：

```
function updateContacts() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();  
  for (var i = 0; i < sheet.getLastRow()-1; i++) {
    var contactEmail = sheet.getRange(i+2, 3, 1, 1).getValue();
    var myContact = ContactsApp.getContact(contactEmail);
    var group = ContactsApp.getContactGroup("System Group: My Contacts");    

    if (myContact == null){
      group.addContact(ContactsApp.createContact(sheet.getRange(i+2, 1, 1, 1).getValue(), 
                                sheet.getRange(i+2, 1, 1, 1).getValue(), 
                                sheet.getRange(i+2, 3, 1, 1).getValue()));
      var contact = ContactsApp.getContactsByName(sheet.getRange(i+2, 1, 1, 1).getValue());
      contact[1].setPhone(sheet.getRange(i+2, 2, 1, 1).getValue());
    }}}​ 
```

电子表格的结构如下：姓名、电话、电子邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:58:32.793

您正在使用未定义的方法来添加电话号码。它`addPhone(label, number)`不是`setPhone(number)`

这是我使用的测试功能。添加电子邮件和号码都没有问题。

```
function myFunction() {
  var contacts = ContactsApp.getContacts();

  contacts.forEach(function(contact, i){
    Logger.log("contacts[" + i + "] =" + contact.getFullName());
  });
  contacts[14].addEmail("test", "delete@me.later");

  var contactsByName = ContactsApp.getContactsByName("Ada");

  contactsByName.forEach(function(contact, i){
    Logger.log("contactsByName[" + i + "] =" + contact.getFullName());
  });
  contactsByName[0].addPhone("test", 123456789);
} 
```

注意：当我使用`ContactsApp.getContacts();`返回数组中的前 13 个联系人时，它是空的。它们甚至没有显示在 gmail 中。我不确定为什么。但是记录您正在使用的数据可能是值得的。

# requirejs - RequireJS/AMD 和全局可用的值

> ID：14756640
> 
> 赞同：1
> 
> 时间：2013-02-07T16:58:18.777
> 
> 标签：requirejs, amd

我正在使用 RequireJS/AMD 来分解我的 JS 应用程序。我的模块之一是“环境”模块，它只做一个请求（异步）然后存储返回的数据。这个环境模块是我应用程序中几乎所有其他模块的依赖项。

我的问题是我需要立即获得此环境信息。有没有办法可以确保我的异步请求已经完成并且在环境模块返回之前我的变量设置正确？

**环境.js**

```
define(["./opui"], function(opui){

    var environment = {
            jsonpath: null,
            imgpath: null,
            platform: null
    }; 

    //request environment data asynchronously
    getEnvironment();

    //callback that sets environment data
    setEnvironment();

    return environment;

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:37:55.967

不必担心初始化顺序通常意味着设计有缺陷；这正是 RequireJS 的用途。

在需要此数据的每个模块中使用[文本插件†：](https://github.com/requirejs/text)`environment`

```
define(['dep1', 'dep2', 'text!./environment'],
  function (dep1, dep2, environmentJsonString) {
    var environment = JSON.parse(environmentJsonString);
    dep1.foo(environment.platform);
}); 
```

`./environment`以 JSON 格式返回数据的服务器端调用的 URL在哪里，例如：

```
{ "jsonpath": "...",
  "imgpath": "...",
  "platform": "..." } 
```

这使得在应用程序启动期间检索数据成为依赖项，因此 RequireJS 将负责等待异步 AJAX 调用`./environment`返回。

请记住，所有模块都将共享相同的可变实例。另外，不要忘记`inlineText: false`在`r.js`的构建配置中进行设置，以避免在优化过程中内联该 JSON 字符串。

†*有一个 JSON 插件可以处理 text->JSON 解析，但由于某种原因它对我不起作用。*

# qt - 如何在 Qt 中重置模型？

> ID：14756645
> 
> 赞同：11
> 
> 时间：2013-02-07T16:58:34.033
> 
> 标签：qt, model-view

我正在使用 Qt 模型/视图框架。当我重置模型中的数据时，我必须重置模型以让视图也更新。怎么做？我在 QAbstractItemModel 中发现了一个信号`modelReset(QPrivateSignal);`，这是解决它的方法吗？如何发出信号？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T17:10:44.913

您在重置数据之前调用`beginResetModel()`，然后`endResetModel()`在完成后调用。`endResetModel()`发出私人信号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:21:51.760

正如您[在此处](http://doc.qt.digia.com/4.6/qabstractitemmodel.html#beginResetModel)看到的，首选方法是在模型子类中使用围绕您的重置代码的`beginResetModel()`和函数。`endResetModel()`

这应该适当地处理发射信号。

一些 qabstractitemmodel 子类可能允许您使用`model.removeRows(0,model.rowCount())` （其他则需要您自己实现）

# javascript - Javascript - 类元素具有其他类元素的属性

> ID：14756646
> 
> 赞同：0
> 
> 时间：2013-02-07T16:58:35.807
> 
> 标签：javascript

下面是一个代码片段。我试图根据窗口的大小和位置来影响类属性*margin-bottom 。*我已经让它在所有高度，宽度等实例中工作......但由于某种原因，*margin-bottom*，所有类都采用我的javascript函数中最后一个的大小。我不确定这是否有意义？下面的代码：

```
//Javascript
var thisMB = null;
$("#Full").find(".t16").each(function () {
                thisMB = '1.25em';
            });
            $("#Full").find(".t8").each(function () {
                thisMB = '4.4175em';
            });

 $(this).css("margin-bottom", thisMB);

<!--html-->
             <div>      
                  <ul class="tlist">
                        <li class="theTeams t16">1 1upLeft upLeft upLeft </li>
                        <li class="theTeams t16">1 1upLeft upLeft upLeft </li>
                        <li class="theTeams t16">3 1 upLeft upLeft upLeft </li>
                        <li class="theTeams t16">4 1 upLeft upLeft upLeft </li>
                        <li class="theTeams t16">5 1 upLeft upLeft upLeft </li>
                        <li class="theTeams t16">6 1 upLeft upLeft upLeft </li>
                    </ul>
                </div>
                <div>
                    <ul class="tlist">
                        <li class="theTeams t8">1 upLeft upLeft upLeft </li>
                        <li class="theTeams t8">3 upLeft upLeft upLeft </li>
                        <li class="theTeams t8">5 upLeft upLeft upLeft </li>
                    </ul>
               </div> 
```

基本上，我的 LI 将采用后一个 javascript 函数，而不是为其找到的特定类实例。所以 .t16 的边距底部应该是（比如说）14，而 .t8 应该是 42 ......它们都是 42。如果我移动订单，它们都是 14。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:02:50.270

```
var thisMB = null;
$("#Full").find(".t16").each(function () {
    thisMB = '1.25em';   <--- this assigns the same variable over and over again
 });
$("#Full").find(".t8").each(function () {
      thisMB = '4.4175em'; <--- so does this
});

$(this).css("margin-bottom", thisMB);   <--- this sets the element to thisMB = the final value. 
```

您一遍又一遍地分配变量，但将其分配给循环外的“this”。如果要设置被选元素的值（`this`），它需要在`each().`循环内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:06:15.153

您正在设置一个变量两次，每次都使用不同的值。基本上你正在这样做：

```
var thisMB = null;
thisMB = '1.25em';
thisMB = '4.4175em'; 
```

如果您随后检查 thisMB 的值，您将得到最后一个值集：“4.4175em”。

我认为这就是你想要的：

```
$("#Full .t16").each(function () {
  $(this).css('margin-bottom', '1.25em');
});

$("#Full .t8").each(function () {
  $(this).css('margin-bottom', '4.4175em');
}); 
```

**更新**

短一点：

```
$("#Full .t16").css('margin-bottom', '1.25em');
$("#Full .t8").css('margin-bottom', '4.4175em'); 
```

# data-structures - 完全二叉树和平衡二叉树的区别

> ID：14756648
> 
> 赞同：30
> 
> 时间：2013-02-07T16:58:36.653
> 
> 标签：data-structures, binary-tree

**平衡二叉树**和**完全二叉树**有什么区别？**说每棵完全二叉树**都是**平衡树**
是真的吗？ 反过来呢？

 ***** * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-07T17:00:21.470

平衡**二叉树**是每个节点的两个子树的深度相差不超过 1 的二叉树。

**完全**二叉树是除最后一层外的所有层都被完全填满并且最后一层的所有叶子都在左侧的二叉树。

下面是平衡二叉树，但不是完全二叉树。每个完整的二叉树都是平衡的，但不是相反。

```
 1
     1     1
   1   1     1
 1 
```

正如暗示的那样，*在一棵完整的树中，水平差总是不超过 1，所以它总是平衡*的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2021-02-03T03:30:28.497

由于这发展成为关于完美、平衡、完整和完整的进一步问题 - 这里有一个答案也可以澄清这些问题。假设一棵二叉树，

1.  **平衡**：每个节点的左右子树的高度相差不超过 1。

2.  **Full**：除叶节点外的所有节点都有 2 个子节点

3.  **完成**：

    *   除了最后一层之前的所有节点都必须有 2 个子节点。
    *   最后一层的所有节点都尽量靠左。

### 概括：

*   完整的树：*必须*平衡；*可以*满
*   满树：*可以*平衡；*可以*完整
*   平衡树：*可以*完整；*可以*满

### 例子：

* * *

*   **完全和平衡**- 所有节点都有 0 或 2 个子节点`level 3 - level 2 <= 1`，, （**不完整**- 最后一级节点尽可能远离）

    ```
     1             --- LEVEL 0
         /    \
        1      1         --- LEVEL 1
       /\      /\
      1  1    1  1       --- LEVEL 2
      -  /\   -  -
        1  1             --- LEVEL 3
    x x -  - 
    ```

*   **完整、平衡和完整**- 所有节点都有 0 或 2 个子`3 - 2 <= 1`节点，最后一级节点尽可能靠左：

    ```
     1             --- LEVEL 0
         /    \
        1      1         --- LEVEL 1
       /\      /\
      1  1    1  1       --- LEVEL 2
     /\  -    -  -
    1  1                 --- LEVEL 3
    -  - 
    ```

*   **完整**- 所有节点都有 0 或 2 个子节点（**不平衡**- `3 - 1 > 1`，**不完整**- 级别 1 有一个节点有 0 个子节点）：

    ```
     1              --- LEVEL 0
         / \
        1   1            --- LEVEL 1
       / \  -
      1   1              --- LEVEL 2
     / \  - x x
    1   1                --- LEVEL 3
    -   - 
    ```

*   **完整且平衡**- 最后一级节点尽可能靠左，`3 - 3 <= 1`（**不完整**- 有一个 2 级节点有 1 个子节点）：

    ```
     1             --- LEVEL 0
         /    \
        1      1         --- LEVEL 1
       /\      /\
      1  1    1  1       --- LEVEL 2
     /\  /\  /\  /x
    1 1 1  11 1 1        --- LEVEL 3
    - - -  -- - - 
    ```

*   **平衡**- `3 - 3 <= 1`，（**未满**- 有一个有 1 个子节点的 2 级节点，**不完整**- 最后一级节点不在最左边）

    ```
     1             --- LEVEL 0
         /   \
        1     1          --- LEVEL 1
       /\     /\
      1  1   1  1        --- LEVEL 2
     /\ /\  /x  /\
    1 11  11   1  1      --- LEVEL 3
    - --  -- x -  - 
    ```

* * *

4.  **完美**：所有内部节点都有两个孩子，所有叶子都具有相同的深度。

以上例子都不是完美的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-30T06:05:27.303

**平衡树**：平衡树是二叉树的形式，其中每个节点的左子树高度和右子树高度之差最多为**k**，其中 k 将是平衡因子。如果这个平衡因子为 0，那么该树将被称为完全平衡树。

示例：
                          8
                    6 1
                3 9 1

这棵树是平衡因子为 1 的平衡树，因为每个节点的子树的高度差异为 0 或 1。

**完全二叉树**：如果除了叶子之外的每一层都被完全填满，则称一棵树是完整的。并且叶子节点上的任何新插入都将从左到右，这意味着左侧的叶子将首先被完全填充。

示例：8
                             6 1
                         3 5 4 1

现在这棵树是完整的二叉树，如果必须进行任何新的插入，那么它应该在左边的叶子下面，在这个例子中是 3。一旦 3 被左右孩子填充，那么 5 将成为新插入的下一个叶子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-17T16:34:29.653

当一棵高度为 h 的二叉树的所有叶子都在 h 层并且每个父节点正好有两个孩子时，就说树是**满的**

当除最后一层之外的所有层都包含尽可能多的节点时，树被认为是**完整的，并且最后一层的节点从左到紧填充。**（不完整，但完整）

当二叉树中的每个节点都有两个高度完全相同的子树时，这棵树被称为**完全平衡的**

完全平衡的树已满

如果节点的子树相差不超过一个，则树是**高度平衡**的或简单**平衡的******

# unrealscript - 如何将类作为参数传递给 UnrealScript 中的函数？

> ID：14756653
> 
> 赞同：0
> 
> 时间：2013-02-07T16:58:45.843
> 
> 标签：unrealscript

我想要做

```
result = TraceActors(class'QuadForcePawn', HitEnemy, hitLocation, HitNorm, weaponStart, m_oldWeaponStartLocation[iHand], vExtent); 
```

但我想用一个变量代替`class'QuadForcePawn'`零件。我一直无法弄清楚如何做到这一点。

这样我就可以有一个调用 的函数`TraceActors`，并且该函数接受一个参数告诉它`Actors`要查找哪种类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:16:22.450

从技术上讲，TraceActors 实际上是一个[迭代器函数](http://udn.epicgames.com/Three/UnrealScriptIterators.html)，旨在与`foreach`关键字一起使用，因此您实际上不会将结果分配给变量。

要回答您的问题，您要使用的是[类引用变量](http://udn.epicgames.com/Three/UnrealScriptVariables.html#Class%20Reference%20Variables)。示例函数可能如下所示（TraceActors 实际上需要更多参数，但为简洁起见，我将它们省略了。）：

```
function TraceFor (class<Actor> traceClass)
{
    local Actor A;

    foreach TraceActors(traceClass, A)
    {
        // do work here
    }
} 
```

类引用变量是用`class`关键字声明的，您可以选择使用`<>`语法来限制可以分配给它的类。`class<Actor>`声明一个类引用变量，该变量只能分配有 Actor 或 Actor 的子类。在上面的示例函数中，调用`TraceFor(class'Pawn')`会正常工作，但调用`TraceFor(class'Object')`会编译失败。

如果要返回 TraceActors 调用的结果，一种方法可能是构建结果数组并返回：

```
// Returns an array of Actors of the passed in type.
function TraceFor (class<Actor> traceClass, out array<Actor> results)
{
    local Actor A;

    foreach TraceActors(traceClass, A)
    {
        results.AddItem(A);
    }
} 
```

# php - Count Doctrine 的 iterate() 集合结果

> ID：14756654
> 
> 赞同：6
> 
> 时间：2013-02-07T16:58:45.390
> 
> 标签：php, doctrine, doctrine-orm

有一个 QueryBuilder 结果

```
$query = $em->createQuery("SELECT...."); 
```

通过 iterate() 方法获取它们

[http://doctrine-orm.readthedocs.org/en/2.0.x/reference/batch-processing.html](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/batch-processing.html)

```
$objects = $query->iterate(); 
```

我现在能够

```
foreach ($objects as $object) {
    $object = $object[0];
    //do something..
    $object->getObjectId();
    ...
} 
```

但...

```
//after the iterate() call, before to foreach
echo sizeof($objects); //or count($objects);
//always "1", even if i have 10000 foreach loops 
```

**为什么以及如何解决？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-09T16:37:06.863

`$query->iterate()`只会给你一个不可数的迭代器。考虑编写第二个查询`COUNT(result)`，或使用[分页器](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/pagination.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T17:07:04.640

也许它对你有[帮助](http://www.doctrine-project.org/blog/doctrine2-large-collections.html)

# c# - 使用 Linq Aggregate 或 ForEach 更新运行总计的属性

> ID：14756655
> 
> 赞同：1
> 
> 时间：2013-02-07T16:58:48.083
> 
> 标签：c#, linq, aggregate, cumulative-sum

我有一个具有整数属性的类。我有一个要在图表应用程序中使用的列表。我想将此属性显示为累积总数，同时保留所有其他类信息。

让我们称这个类为 ProgressMeasurement，属性是OutstandingItems。有什么方法可以使用聚合函数来完成这个吗？

例如：

```
progressMeasurementList.Aggregate((a, b) =>  b.OutstandingItems += a.OutstandingItems)); 
```

即我想将`b`OutstandingItems 值更新为当前的运行总计。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:21:22.330

Linq 用于*查询*，而不是*更新*。使用传统循环，更新通常更干净：

```
var runningTotal = 0;
foreach(var item in progressMeasurementList)
{
   runningTotal += item.OutstandingItems 
   item.OutstandingItems = runningTotal));   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:15:36.533

没有内置任何东西，但您可以创建自己的扩展方法：

```
public static IEnumerable<TAccum> Scan<T, TAccum>(this IEnumerable<T> seq, TAccum init, Func<TAccum, T, TAccum> op)
{
    TAccum current = init;
    foreach(T item in seq)
    {
        current = op(current, item);
        yield return current;
    }
} 
```

然后，您可以将一系列累积和计算为：

```
var runningTotals = progressMeasurementList.Scan((acc, b) =>  acc + b.OutstandingItems)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:02:16.013

那将是`.Sum()`方法：

`var sum = progressMeasurementList.Sum(prog => prog.OutstandingItems);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:18:44.380

我会在`foreach`. 不应使用 Linq 查询来更改源。

```
var runningTotal = progressMeasurementList.First().OutstandingItems;
foreach(var progressMeasurement in progressMeasurementList.Skip(1))
{
    runningTotal += progressMeasurement.OutstandingItems;
    progressMeasurement.OutstandingItems = runningTotal;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:19:59.530

也许迟到了，但我添加了这个的聚合变体

```
 int total = 0;
    t.Aggregate(total, (acc, current) =>
        {
            acc+= current.OutstandingItems;
            current.CumulativeOutstandingItems = acc;
            return acc;
        }); 
```

注意：我不知道您是否想用累积总和替换OutstandingItems。我将 sum 放在不同的属性中只是为了便于阅读。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T18:04:34.880

您可以尝试使用该`ForEach`方法，如下所示：

```
int runningTotal = 0;
progressMeasurementList.ForEach(item =>
                                    {
                                        runningTotal += item.OutstandingItems;
                                        item.OutstandingItems = runningTotal;
                                    }); 
```

# r - 使用 cforest/randomforest 预测进行并行预测（使用 doSNOW）

> ID：14756662
> 
> 赞同：2
> 
> 时间：2013-02-07T16:59:12.687
> 
> 标签：r, foreach, parallel-processing, random-forest, party

我试图通过拆分测试数据集（n = 35000）并让 R 在较小的块上运行来加快对测试数据集（n = 35000）的预测。该模型是用 生成的`party::cforest`。

`foreach`但是，在尝试使用with时，我无法让 R 计算即使是最小的部分`%dopar%`。

`predict(fit,newdata=a[1:100,])`我的预测函数对于和都需要大约 7 秒 `foreach(i=1:10) %do% {predict(fit,newdata=a[1:10,])}`。

但是当我尝试使用时`%dopar%`，R 似乎冻结了。不应该：

```
foreach(i=1:10, .packages=c('party')) %dopar% {predict(fit,newdata=a[1:10,])} 
```

更快？或者并行化本身是否会以某种方式减慢 R 速度？

[使用另一个函数进行测试运行（按照此处](http://blog.revolutionanalytics.com/2009/07/simple-scalable-parallel-computing-in-r.html?cid=6a010534b1db25970b015434d00615970c#comment-6a010534b1db25970b015434d00615970c)的建议重复计算 sqrt(3) ）已显示出显着的改进，因此`%dopar%`也可以正常工作。

使用 randomForest 进行预测的行为类似，不同之处在于，即使`%do%`对于 10x1:10 的预测，也比仅预测 1:100 需要更多的时间。对于 randomForest，我并不关心，因为无论如何预测所有 35k 数据集都不是问题。顺便提一句。只有我，还是 cforest 需要更多时间和内存来完成所有事情？只有在 randomForest 像魅力一样工作时遇到麻烦..

（在 Windows 7、x64、8GB RAM、4 核/8 线程上运行 - 在 doSNOW 并行化集群中使用 6 个节点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:34:56.943

您的示例的主要问题是 foreach 会自动将整个`a`数据框导出给每个工作人员。相反，请尝试以下操作：

```
library(itertools)
foreach(1:10, suba=isplitRows(a, chunkSize=10), .packages='party') %dopar% {
    predict(fit, newdata=suba)
} 
```

这`1:10`是出于测试目的，将循环限制为仅 10 次迭代，就像您在示例中所做的那样。

这仍然需要`fit`输出给所有的工人，而且可能会很大。但是由于任务比工作人员多得多，并且如果`predict`与发送测试数据的时间相比需要足够的时间，那么并行化预测可能是值得的。

# notepad++ - 在记事本中缩进预先存在的代码

> ID：14756668
> 
> 赞同：1
> 
> 时间：2013-02-07T16:59:26.720
> 
> 标签：notepad++

我正在寻找一种方法来获取某人发送给我的 HTML 代码并相应地缩进。看起来我收到了多个编辑器的代码，它的结构不正确或没有缩进让我很恼火。当我做谷歌[搜索](http://www.google.com/search?q=indent%20in%20notepadd%2b%2b&oq=indent%20in%20notepadd%2b%2b&sourceid=chrome&ie=UTF-8#hl=en&tbo=d&spell=1&q=indent%20pre%20existing%20code%20in%20notepad%2b%2b&sa=X&ei=BNwTUcvtJIS49QTs6oGgAQ&ved=0CCwQvwUoAA&bav=on.2,or.r_gc.r_pw.r_qf.&fp=5abf6276490b67b7&biw=931&bih=618)时，什么都没有弹出。我已经看到如何像[这样](https://stackoverflow.com/questions/412427/auto-indent-in-notepad)自动缩进，但我试图在编码后纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:49:03.303

有一个名为 HTMLTidy 的插件可以缩进 HTML。查看[这个问题](https://stackoverflow.com/questions/11591532/notepad-6-1-x-and-htmltidy)和[这个答案](https://stackoverflow.com/questions/809636/notepad-html-tidy/7935797#7935797)，了解如何让它在新版本的 Notepad++ 上运行。

# asp.net - .NET 图像调整器，允许纵横比和只有一个宽度或高度

> ID：14756674
> 
> 赞同：0
> 
> 时间：2013-02-07T16:59:36.033
> 
> 标签：asp.net, .net, image-processing, imagemagick

大家好，我在这里寻找一些模仿这个 PHP 类的 asp.net 代码

[PHP 想象](http://www.php.net/manual/en/imagick.examples-1.php)

我需要代码能够像这里那样做：

```
$image = new Imagick('image.jpg');

// If 0 is provided as a width or height parameter,
// aspect ratio is maintained
$image->thumbnailImage(100, 0);

echo $image; 
```

注意它说**如果 0 作为宽度或高度参数提供，则保持纵横比**

我目前找不到任何允许上述内容的 .net 代码。我已经看到很多允许指定宽度和高度但不仅仅是一个。这个 PHP 类最能模仿 Photoshop 重新调整大小。

因此，一个例子是：

```
$image = new Imagick('image.jpg'); //WHERE Width = 3216 & Height = 2064
$image->thumbnailImage(1024, 0); //WHERE Width = 1024    
echo $image; 
```

该图像的大小将变成

**宽度 = 1024**

**高度 = 657**

就像在 Photoshop 中一样。

![图片](../Images/46b6ff5ed04aa2b2387027ca6c622513.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:22:00.240

我为此目的编写了[ImageResizer](http://imageresizing.net)库，因为没有任何其他适用于 .NET 的服务器安全图像大小调整库。

为了获得最佳性能，请使用包含的 URL API 而不是创建自己的处理程序：

好的：

```
<img src="image.jpg?width=100" /> 
```

坏的：

```
<img src="myinsecurehandler.ashx?file=image.jpg&width=100" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:08:00.710

1.  为什么不尝试使用 IF 条件来检查 0 维护？
2.  我喜欢在 jscript/css 中做这样的事情，它更加量身定制，即使在生成图像时我必须通过 ID 挂钩。（您可以设置像 image[1] 这样的命名方案）
3.  在 .NET 中运行您的 php 类：http: [//www.infoq.com/articles/Phalanger](http://www.infoq.com/articles/Phalanger)。

# maven - 使用 Maven 和 Jax-RS，我将文件放在哪里？

> ID：14756676
> 
> 赞同：0
> 
> 时间：2013-02-07T16:59:38.287
> 
> 标签：maven, intellij-idea, jax-rs

我使用 Simple Web App Archetype 创建了一个 Maven 项目。然后我进去创建了一个 Jax-RS 模块。现在我有 2 个 index.jsp。我是否应该在没有原型的情况下创建项目，然后添加 Jax-RS 模块？

我还计划为项目添加一些持久性。也许是冬眠。

![在此处输入图像描述](../Images/0dc378e2dbc90cc0a2c63969abe4ccec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:52:49.330

您不需要`index.jsp`JAX-RS。每个 JAX-RS servlet（Jersey、RESTeasy 等）都提供了自己的`Servlet`，将 REST 请求分派到带`@Path`注释的资源中。您在 中配置 servlet `WEB-INF/web.xml`。

其余的在您的项目布局中看起来是正确的。

# wpf - 确定 ListViewItem 在 WPF ListView 中是完全可见还是仅部分可见

> ID：14756683
> 
> 赞同：1
> 
> 时间：2013-02-07T16:59:51.833
> 
> 标签：wpf, listview, listviewitem, adorner, adornerlayer

我有一个 WPF 列表视图。此 ListView 将包含 n 个项目。

当用户将某些东西拖到列表视图中时，我在 ListView 的 AdornerLayer 上显示一个水平条，以显示将插入该项目的索引。

我也在自动滚动列表视图。因为 ScrollViewer.CanContentScroll="False" ListViewItems 是部分可见的。

我遇到的问题是，当我结束的 ListViewItem 位于顶部且仅部分可见时，我正在绘制的指示条出现在 ListView 的边界之外（在我上面的例子中）。

绘制条的触发器是获取我当前悬停在上面的任何 ListViewItem，抓住它的上界值并画线。当 ListViewItem 尚未完全可见时，条形图绘制在 ListView 本身之上，显然看起来很奇怪。

摘要：试图确定给定的 ListViewItem 在 ListView 中是否仅部分可见。

在这种情况下，代码并不是那么相关，但如果你愿意，我可以发布一些。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:15:00.773

您可能可以使用`ScrollViewer.VerticalOffset`or`ScrollViewer.ViewPortHeight`和 listviewitem 相对于 listview 本身的位置的组合

```
itemPosition = ListViewItem.TransformToAncestor(ListView).Transform(new Point(0, 0)); 
```

要判断它是否完全可见，您只需要执行以下操作

```
itemPosition.Y + itemHeight - viewPortHeight 
```

那么如果该值在`itemHeight`or之间`-viewPortHeight`，那么它是可见的

或者，什么可能更清洁：

```
(-itemPosition.Y < itemHeight && itemPosition.Y < viewPortHeight) 
```

# selenium - Selenium IDE commnand assertTextPresent 不起作用

> ID：14756685
> 
> 赞同：2
> 
> 时间：2013-02-07T17:00:00.647
> 
> 标签：selenium, selenium-webdriver, selenium-ide

我正在尝试在 Selenium IDE (Firefox) 中使用命令“assertTextPresent”。我这样配置它：

```
Command: assertTextPresent
Target: <th align="center" abbr="Monday" scope="col" style="background-color:#EFEDF5;font-weight:normal;">Mon</th><th align="center" abbr="Tuesday" (truncated for brevity)
Value: (left empty) 
```

据我所知，Selenium 没有将我的“目标”与呈现页面的源匹配，因为其中包含 HTML 代码。所以它总是失败，即使它应该通过。我怎样才能使这个断言起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:12:43.487

`assertTextPresent`查找您指定在页面上某处、任何位置的值。您在目标中传递的值是 IDE 正在寻找的文本。它实际上是在寻找`<th>`显示在页面某处的“文本”的整个标签，我假设它没有显示。

使用该函数的正确方法是传递您在目标中查找的文本，例如“Mon”或您正在查找的任何内容。请记住，这是区分大小写的。由于此函数不关心它的外观，因此您无需指定实际目标。我发现在大多数情况下，这个函数通常没有足够的特异性来可靠。

```
<tr>
    <td>assertTextPresent</td>
    <td>Mon</td>
    <td></td>
</tr> 
```

我更喜欢使用`assertText`or`verifyText`因为它需要一个目标，这样您就可以更具体地在哪里查找文本。

```
<tr>
    <td>assertText</td>
    <td>css=th[abbr="Monday"]</td>
    <td>Mon</td>
</tr> 
```

我不完全确定该`abbr`属性是否是有效的选择器。有很多方法可以定位您的元素，我只是将其用作一个简单的示例，因为它是您的代码片段的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T07:21:09.960

如果您正在测试页面中存在的唯一文本，您可以使用

```
Command: assertTextPresent
Target: your search text 
```

在目标中，您输入要搜索的文本。

或者

如果您想检查某个位置的文本，您可以使用

```
Command: verifyText
Target: id,name,xpath of the position
value:  your search text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:20:04.630

根据我在这里看到的内容，您应该使用`assertElementPresent`而不是`assertTextPresent`因为您将一个元素指定为目标，而不仅仅是该`<th>`元素的文本。

如果您仍然想使用`assertTextPresent`，您只需将“Mon”作为您的目标。因为它的目标/参数就是它正在搜索的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T02:09:10.467

您可能需要 3 个部分进行 assertTextPresent 测试：

```
Command: assertTextPresent
Target: //th[@abbr="Monday"]
Value: Mon 
```

这将查看包含等于“星期一”的属性@abbr 的单元格，并查看内容（文本）是否设置为“星期一”。

要测试所有单元格，您将一个接一个地执行多个 assertTextPresent 命令来测试所有 7 天。

如果您想“提升一个级别”，您可以执行以下操作：

```
Command: assertTextPresent
Target: //tr
Value: <th align="center" abbr="Monday" scope="col" style="background-color:#EFEDF5;font-weight:normal;">Mon</th><th align="center" abbr="Tuesday" (truncated for brevity) 
```

通常最好尝试选择一个 HTML 元素，例如使用特定属性，例如 id="row_1" 或 name="first_row"。那么你的目标将是 //tr[@id="row_1"] 或 //tr[@name="first_row"]。

Target 是“DOM 搜索语法”，它告诉 Selenium IDE 在哪里可以找到您要查找的文本。值是要测试的文本。

# sql-server - 动态数据网站仅显示它插入数据库的行

> ID：14756688
> 
> 赞同：0
> 
> 时间：2013-02-07T17:00:10.897
> 
> 标签：sql-server, vb.net, linq, asp.net-dynamic-data

我对创建动态数据网站还很陌生——我在一年前创建了一个运行良好的网站，但现在我正在尝试第二个网站，但遇到了一个奇怪的问题。

我正在使用 VS2010、VB.net 并按照 MS 的演练使用 Linq to SQL 创建网站。事情似乎与一个主要例外有关。我已将它指向我域中的 SQL 服务器，但它不会显示数据库中不是通过网站创建的行。我通过 SSMS 手动输入的记录不会显示在表的 DD 列表中，但我通过网站插入的行会出现。

我已经清除了表格并刷新了列表视图，所有行都消失了。然后，如果我通过 SSMS 添加行，它们不会显示，但网站添加的会显示。这很重要，因为我将从我正在转换的旧（非 SQL）数据库中导入数据。

我真的不知道在哪里可以解决这个问题 - 有没有人有任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:36:38.827

我通过 ssms 输入的记录的外键值不正确，显然 DD 正在执行内连接而不是左外连接。我不知道这是一个错误还是一个功能。

# c++ - 在 GCC 和 Clang 下，使用 lambda 的简单 RAII 包装器的复制初始化意外失败

> ID：14756691
> 
> 赞同：4
> 
> 时间：2013-02-07T17:00:21.553
> 
> 标签：c++, function, c++11, lambda, initialization

我在创建一个简单的 RAII 包装器时遇到了一个意想不到的问题。

更不用说下面代码的逻辑不完整（复制构造函数和赋值运算符未删除等，这意味着是一个 SSCCE），让我印象深刻的是我的包装器的*复制初始化*与临时 lambda 导致编译错误，而*直接初始化*则没有。

这种行为可以在 GCC 4.7.2 和 Clang 3.2 上观察到，而 ICC 13.0.1 和 VC10 编译这两个版本都没有问题。

```
#include <iostream>
#include <functional>

using namespace std;

struct A
{
    template<typename F>
    A(F&& f) : _f(forward<F>(f)) { }

    ~A() { _f(); }

private:

    std::function<void()> _f;
};

int main()
{
    // A a = [] () { cout << "Hello" << endl; }; // ERROR!
    A a([] () { cout << "Hello" << endl; }); // OK
} 
```

**谁是对**的，错的有什么问题？这是 C++ 标准库的实现问题，还是编译器问题？

特别欢迎对 C++11 标准的引用。

**编辑：**

这是 Clang 3.2 产生的错误：

```
Compilation finished with errors:

In file included from source.cpp:2:
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/functional:1925:2: error: type 'A' does not provide a call operator
    (*_Base::_M_get_pointer(__functor))(
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/functional:2297:33: note: in instantiation of member function 'std::_Function_handler<void (), A>::_M_invoke' requested here
    _M_invoker = &_My_handler::_M_invoke;
                                   ^
source.cpp:9:16: note: in instantiation of function template specialization 'std::function<void ()>::function<A>' requested here
    A(F&& f) : _f(forward<F>(f)) { }
               ^
source.cpp:20:7: note: in instantiation of function template specialization 'A::A<A>' requested here
    A a = [] () { cout << "Hello" << endl; }; // ERROR!
      ^ 
```

产生 1 个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:05:51.737

错误消息（gcc 4.7.2）提供了合理的信息：

```
c++/4.7/functional: In instantiation of 'static void std::_Function_handler<void(_ArgTypes ...), _Functor>::_M_invoke(const std::_Any_data&, _ArgTypes ...) [with _Functor = A; _ArgTypes = {}]':
c++/4.7/functional:2298:6:   required from 'std::function<_Res(_ArgTypes ...)>::function(_Functor, typename std::enable_if<(! std::is_integral<_Functor>::value), std::function<_Res(_ArgTypes ...)>::_Useless>::type) [with _Functor = A; _Res = void; _ArgTypes = {}; typename std::enable_if<(! std::is_integral<_Functor>::value), std::function<_Res(_ArgTypes ...)>::_Useless>::type = std::function<void()>::_Useless]'
source.cpp:9:32:   required from 'A::A(F&&) [with F = A]'
source.cpp:22:44:   required from here
c++/4.7/functional:1926:2: error: no match for call to '(A) ()' 
```

问题是您的类没有可用于复制初始化的隐式移动构造函数。隐式定义的移动构造函数被删除，因为`A`有一个用户定义的析构函数（12.8p9b4）。

添加：

```
A(A &&) = default; 
```

请注意，由于选择了默认的移动构造函数，因此析构函数应检查它`_f`是否为非空；由于移动构造函数`std::function`不保证目标为空，您还应该自己执行该更改：

```
A(A &&a): _f() { std::swap(_f, a._f); }
~A() { if (_f) _f(); } 
```

回想一下（根据 8.5p17），复制初始化涉及创建一个 prvalue 临时，然后用于直接初始化目标对象。选择是在模板构造函数和隐式定义的复制构造函数之间；具有模板参数类型的模板构造函数`A`是首选，因为它比`A &&`绑定到纯右值`A`更好`const A &`。

另一种选择（可能更好）是禁用参数的模板构造`A`函数：

```
template<typename F, typename = typename std::enable_if<!std::is_same<F, A>::value>::type>
A(F&& f) : _f(forward<F>(f)) { } 
```

在这种情况下，将选择隐式定义的复制构造函数，因此析构函数不需要检查 ; 的状态`_f`。但是，如果编译器不执行复制省略，那么它 (and `_f`) 将被调用两次。

Copy-elision is allowed (12.8p31); the non-elided form must be *accessible* (12.8p32) but as far as I can tell (and by omission) the compiler is not required to check that it is *compilable*. So it is permissible for a compiler to either compile or refuse to compile the program; if it does compile, though, it must have performed copy elision.

# arrays - 如何在 parse.com 仪表板中添加数组？

> ID：14756700
> 
> 赞同：7
> 
> 时间：2013-02-07T17:00:30.633
> 
> 标签：arrays, dashboard, parse-platform

谁能告诉我尝试在列字段中添加新数组时如何格式化输入？

它只是没有接受我的输入，我在文档、网络和 stackoverflow 中都没有找到任何东西。

如果有人可以帮助我，我会很高兴。

打招呼

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T22:50:48.507

数组的格式为：

```
["A", "B", "C"] 
```

请注意，您确实需要双引号。单引号被默默地删除。

# visual-studio-2012 - Visual Studio 2012 缺少“工作区设置”选项卡

> ID：14756701
> 
> 赞同：0
> 
> 时间：2013-02-07T17:00:29.907
> 
> 标签：visual-studio-2012

在 Team 菜单、Team Project Collection Settings、Source Control 窗口中应该有两个选项卡，“File Types”和“Workspace Settings”。我们的一些开发人员没有“工作区设置”选项卡。什么决定了这个选项卡是否可用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:07:23.660

这是 TFS 2012 的一项功能，我认为可能存在导致 TFS 2010 实例上出现的错误。我猜你是否曾经连接到 TFS 2012 实例，它会出现。

在 TFS 2010 中更改值时，它不会做任何事情。您只会收到以下错误：

![在此处输入图像描述](../Images/8c9be5085576b8dbbed6e0bad6f21817.png)

# java - 使用 Regex 和 indexOf 拆分字符串

> ID：14756712
> 
> 赞同：3
> 
> 时间：2013-02-07T17:01:07.163
> 
> 标签：java, string, split, substring, indexof

我有一个简单的字符串 Ex。`1.0.0.2`我想拆分并只检索字符串的一部分：输出：`1.0.0`基本上我想删除第三个`.`包含后的所有文本。我尝试使用`split()`函数，计算`.`and 的出现次数，如果大于 2，则得到`indexOf()`第三点 and `substring()`。有没有更简单或更快的方法来实现这一目标？也许使用**正则表达式**？

编辑：我不知道会有多少点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:08:07.503

如果你不确定是否会有三个点——所以你不能使用`lastIndexOf()`——那么这里是一个基于正则表达式的解决方案：

```
final Matcher m = Pattern.compile("^[^.]*(?:[.][^.]*){0,2}").matcher(input);
m.find(); // guaranteed to be true for this regex
final String output = m.group(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:04:40.787

`substring`仅使用 和 来完成此操作既简单又快速`lastIndexOf`。我认为代码非常可读：

```
String str = "1.0.0.1";
String output = str.substring(0, str.lastIndexOf(".")); 
```

尽管您可以使用正则表达式实现相同的目的，但我不会打扰，它更冗长，更难理解（至少需要更长的时间），而且对于合理大小的`String`.

**编辑**

如果您不知道您`String`将拥有多少个点，您需要一种更复杂的方法，在这种情况下，正则表达式就可以了，+ruakh 的答案可以很好地解决问题。

如果您更喜欢可读性（当然，可读性取决于您对正则表达式的熟悉程度），您可以创建一个辅助方法来计算字符串中某个字符的出现次数，并使用它来决定是否应该砍掉它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:07:25.530

```
String input = "1.0.0.2";
String output = input.substring(0, input.lastIndexOf(".")); 
```

# flash - Flex：重置组合框的提示

> ID：14756713
> 
> 赞同：2
> 
> 时间：2013-02-07T17:01:08.270
> 
> 标签：flash, apache-flex, flex3, flash-builder

有一个`<mx:ComboBox>`组件`prompt = 'Please Select'`。用户选择一个选项，保存它，明天回来并想要撤消它。他会怎么做？因为提示选项现在消失了。
顺便提一下

> 我正在从数据库中填充 ComboBox 值，并且我的应用程序中有数千个组合框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:12:19.143

如果组合框在没有选择的情况下关闭，提示将自动重新出现。

如果已选择一个项目，只需执行以下操作：

```
myCombobox.selectedIndex = -1; 
```

删除选择和提示将重新出现

修改问题后编辑：

使用按钮清除选择：

```
<s:Button label="clear" click="myCombobox.selectedIndex=-1" /> 
```

或多次清除：

```
<s:Button label="clear" click="clearCombos()" />

function clearCombos():void
{
    myCombobox1.selectedIndex = -1;
    myCombobox2.selectedIndex = -1;
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:32:43.177

使用“值 = -1”（或类似）和文本 =“请选择”向组合框中添加一个额外条目。然后在检索值时对此进行测试。

如果组合框仍为-1，则弹出“您忘记了这个”并突出显示它或以某种方式使其明显......尤其是如果您有“数千个组合框”（确认！）

# sharepoint - 错误：Access 2013 创建一个表，该表是 Sharepoint 2007/2013 的链接表

> ID：14756718
> 
> 赞同：0
> 
> 时间：2013-02-07T17:01:24.920
> 
> 标签：sharepoint, linked-list

我正在查看 Access 2013，在尝试创建指向 Sharepoint 列表的链接表时，我不断收到错误消息：

> Access Services
> Access 无法连接到外部数据源，因为未安装 LocalDB 组件或 SQL Native Client 组件。

这就是错误的全部内容。

我是对 Sharepoint 拥有“完全控制”权限的管理员。我在 Sharepoint 2007 和 2013 上试过这个。

我希望它像这里一样工作：http: [//blogs.office.com/b/microsoft-access/archive/2012/08/30/link-to-sharepoint-lists-in-access.aspx](http://blogs.office.com/b/microsoft-access/archive/2012/08/30/link-to-sharepoint-lists-in-access.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T23:14:30.757

在执行上一篇文章中的安装步骤后，您必须重新启动 SharePoint Server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T15:43:25.957

对于有上述相同问题的任何人，请确保在 Sharepoint Server 上安装了以下组件：

1.  Microsoft SQL Server 2012 本地数据库 (SQLLocalDB.msi)
2.  Microsoft SQL Server 2012 数据层应用程序框架 (Dacframework.msi)
3.  Microsoft SQL Server 2012 本机客户端 (sqlncli.msi)
4.  Microsoft SQL Server 2012 Transact-SQL ScriptDom (SQLDOM.MSI)
5.  Microsoft SQL Server 2012 的 Microsoft System CLR 类型 (SQLSysClrTypes.msi)

# android - android中的记事本-使SimpleCursorAdapter崩溃

> ID：14756720
> 
> 赞同：1
> 
> 时间：2013-02-07T17:01:26.470
> 
> 标签：android, android-listview, android-cursoradapter

我想创建自己的记事本，类似于 Android 网站上的教程。当我尝试运行我的应用程序时，Eclipse 会打开新选项卡 - “activitythread.performlaunchactivity(activitythread$activityclientrecord intent) line: 2059”，并声明“Source not found. Edit source lookup Path...”。有我的代码：

```
package com.notatnik;

import android.annotation.SuppressLint;
import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class MainActivity extends ListActivity {

    private NotesDB mDB;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mDB = new NotesDB(this);
        mDB.open();
        fillData();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void saveNote(View view) {
        TextView textField = (TextView) findViewById(R.id.editText1);
        String note = textField.getText().toString();
        mDB.createNote(note);
    }

    @SuppressLint("NewApi")
    private void fillData() {
        Cursor cursor = mDB.fetchAllNotes();
        startManagingCursor(cursor);

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.item_list, cursor,
            new String[] {NotesDB.COLUMN_CONTENT}, new int[] {R.id.textView_content}, 0);
        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(adapter);
    } 
} 
```

日志猫：

```
 02-07 17:28:40.622: D/AndroidRuntime(2600): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
02-07 17:28:40.622: D/AndroidRuntime(2600): CheckJNI is ON
02-07 17:28:40.662: D/dalvikvm(2600): Trying to load lib libjavacore.so 0x0
02-07 17:28:40.672: D/dalvikvm(2600): Added shared lib libjavacore.so 0x0
02-07 17:28:40.702: D/dalvikvm(2600): Trying to load lib libnativehelper.so 0x0
02-07 17:28:40.702: D/dalvikvm(2600): Added shared lib libnativehelper.so 0x0
02-07 17:28:41.463: D/AndroidRuntime(2600): Calling main entry com.android.commands.pm.Pm
02-07 17:28:41.513: D/AndroidRuntime(2600): Shutting down VM
02-07 17:28:41.523: D/dalvikvm(2600): GC_CONCURRENT freed 101K, 78% free 466K/2048K, paused 1ms+2ms, total 14ms
02-07 17:28:41.523: D/dalvikvm(2600): Debugger has detached; object registry had 1 entries
02-07 17:28:42.152: D/AndroidRuntime(2613): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
02-07 17:28:42.152: D/AndroidRuntime(2613): CheckJNI is ON
02-07 17:28:42.203: D/dalvikvm(2613): Trying to load lib libjavacore.so 0x0
02-07 17:28:42.212: D/dalvikvm(2613): Added shared lib libjavacore.so 0x0
02-07 17:28:42.242: D/dalvikvm(2613): Trying to load lib libnativehelper.so 0x0
02-07 17:28:42.242: D/dalvikvm(2613): Added shared lib libnativehelper.so 0x0
02-07 17:28:43.113: D/AndroidRuntime(2613): Calling main entry com.android.commands.am.Am
02-07 17:28:43.153: I/ActivityManager(148): Force stopping package com.notatnik uid=10044
02-07 17:28:43.153: I/ActivityManager(148): Killing proc 2260:com.notatnik/u0a44: force stop
02-07 17:28:43.203: I/ActivityManager(148): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.notatnik/.MainActivity u=0} from pid 2613
02-07 17:28:43.334: D/dalvikvm(148): GC_FOR_ALLOC freed 260K, 9% free 11697K/12743K, paused 89ms, total 99ms
02-07 17:28:43.334: W/InputMethodManagerService(148): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@415cb158 attribute=null
02-07 17:28:43.422: D/AndroidRuntime(2613): Shutting down VM
02-07 17:28:43.422: D/dalvikvm(2632): Not late-enabling CheckJNI (already on)
02-07 17:28:43.442: D/dalvikvm(2613): GC_CONCURRENT freed 102K, 76% free 492K/2048K, paused 1ms+2ms, total 15ms
02-07 17:28:43.442: D/jdwp(2613): Got wake-up signal, bailing out of select
02-07 17:28:43.442: D/dalvikvm(2613): Debugger has detached; object registry had 1 entries
02-07 17:28:43.453: I/AndroidRuntime(2613): NOTE: attach of thread 'Binder_3' failed
02-07 17:28:43.472: I/ActivityManager(148): Start proc com.notatnik for activity com.notatnik/.MainActivity: pid=2632 uid=10044 gids={1028}
02-07 17:28:43.843: E/Trace(2632): error opening trace file: No such file or directory (2)
02-07 17:28:43.872: W/ActivityThread(2632): Application com.notatnik is waiting for the debugger on port 8100...
02-07 17:28:43.892: I/System.out(2632): Sending WAIT chunk
02-07 17:28:43.902: I/dalvikvm(2632): Debugger is active
02-07 17:28:44.092: I/System.out(2632): Debugger has connected
02-07 17:28:44.092: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:44.293: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:44.503: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:44.703: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:44.915: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:45.125: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:45.325: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:45.569: I/System.out(2632): waiting for debugger to settle...
02-07 17:28:45.785: I/System.out(2632): debugger has settled (1452)
02-07 17:28:53.385: W/ActivityManager(148): Launch timeout has expired, giving up wake lock!
02-07 17:28:53.814: W/ActivityManager(148): Activity idle timeout for ActivityRecord{413ede80 com.notatnik/.MainActivity}
02-07 17:29:00.092: D/dalvikvm(2632): Debugger has detached; object registry had 312 entries
02-07 17:29:00.092: D/AndroidRuntime(2632): Shutting down VM
02-07 17:29:00.102: W/dalvikvm(2632): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-07 17:29:00.152: E/AndroidRuntime(2632): FATAL EXCEPTION: main
02-07 17:29:00.152: E/AndroidRuntime(2632): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.notatnik/com.notatnik.MainActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.os.Looper.loop(Looper.java:137)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at java.lang.reflect.Method.invokeNative(Native Method)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at java.lang.reflect.Method.invoke(Method.java:511)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at dalvik.system.NativeStart.main(Native Method)
02-07 17:29:00.152: E/AndroidRuntime(2632): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.ListActivity.onContentChanged(ListActivity.java:243)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:259)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.Activity.setContentView(Activity.java:1867)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at com.notatnik.MainActivity.onCreate(MainActivity.java:20)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.Activity.performCreate(Activity.java:5008)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-07 17:29:00.152: E/AndroidRuntime(2632):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-07 17:29:00.152: E/AndroidRuntime(2632):     ... 11 more
02-07 17:29:00.232: W/ActivityManager(148):   Force finishing activity com.notatnik/.MainActivity
02-07 17:29:00.422: D/dalvikvm(148): GC_FOR_ALLOC freed 342K, 8% free 11758K/12743K, paused 100ms, total 115ms
02-07 17:29:00.986: W/ActivityManager(148): Activity pause timeout for ActivityRecord{413ede80 com.notatnik/.MainActivity}
02-07 17:29:01.263: W/EGL_emulation(279): eglSurfaceAttrib not implemented 
```

我还没有完成，但我认为这个简单的代码应该可以编译。我发现问题出在 fillData() 方法中的 SimpleCursorAdapter 上，但我不知道出了什么问题。我在乞求为 Android 编程。对不起，我的英语不好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:22:03.287

从您的 LogCat 中：

```
Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

这意味着在`res/layout/activity_main.xml`您的 ListView 中必须具有此属性：

```
<ListView
    android:id="@android:id/list"
    ... /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:15:41.900

解决了

游标必须包含一个名为 _id 的列，否则此类将不起作用。我更改了 NotesDB 类中的 fetchAllNotes() 方法：

```
public Cursor fetchAllNotes () {
        return mDB.query(TABLE_NAME, new String[] {COLUMN_CONTENT}, null, null, null, null, null);
    } 
```

到

```
public Cursor fetchAllNotes () {
            return mDB.query(TABLE_NAME, new String[] {_ID, COLUMN_CONTENT}, null, null, null, null, null);
        } 
```

作品。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:03:39.317

您应该自定义列表视图适配器。

# php - VBScript 转 PHP

> ID：14756725
> 
> 赞同：-1
> 
> 时间：2013-02-07T17:01:40.817
> 
> 标签：php

我想把下面的 VBScript 变成 PHP：

```
Dim RootDomain : RootDomain = Request.ServerVariables("server_name")
Dim paryDomain : paryDomain = Split(RootDomain,".")

IF uBound(paryDomain) = 1 THEN
  RootDomain = paryDomain(0) & "." & paryDomain(1)
ELSEIF uBound(paryDomain) = 2 THEN
  RootDomain = paryDomain(1) & "." & paryDomain(2)
END IF
IF RootDomain = "storeboard.com" THEN
  G_SYSTEMID = 1
ELSEIF RootDomain = "dcwn.org" THEN
  G_SYSTEMID = 2
END IF 
```

我做了以下几点：

```
$Domain = $_SERVER['SERVER_NAME'];
$paryDomain = explode(".",$Domain);
$Array = count($paryDomain)

if ($Array == "1")
{
    $RootDomain = $paryDomain[0].'.'.$paryDomain[1];
}    
elseif ($Array == "2")
{
    $RootDomain = $paryDomain[1].'.'.$paryDomain[2];
}

echo $RootDomain 
```

我是 PHP 的初学者，我收到以下错误：

```
PHP Parse error:  syntax error, unexpected T_IF in C:\inetpub\mydomain.com\testing\test_sql_server.php on line 53 
```

第 53 行是：

```
if ($Array == "1") 
```

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:03:04.113

忘记了`;`：

```
$Array = count($paryDomain);
                           ^---here 
```

一般来说，如果您在 php 中收到“意外的某些东西”错误，请始终查看指示错误行**之前的行。**那行可能没问题...实际错误发生得更早。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:03:26.580

简单的一个：你只是错过了一个分号：

```
$Array = count($paryDomain) 
```

应该

```
$Array = count($paryDomain); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:03:20.447

您在第 3 行和最后一行缺少分号。

# r - 递归标记data.frame中的重复项

> ID：14756729
> 
> 赞同：3
> 
> 时间：2013-02-07T17:01:53.657
> 
> 标签：r, duplicates, uniqueidentifier

考虑一个测试数据集，

`dat=data.frame(name=c('A','A','B','C','C','C'),val=c(1,1,2,2,3,2))`

```
name val
A   1
A   1
B   2
C   2
C   3
C   2 
```

获得此输出的最有效方法是什么

```
name val
A   1
A-1   1
B   2
C   2
C-1   3
C-2   2 
```

因此，只需使用自定义标识符标记重复项。我可以考虑使用通用标识符标记它们`paste(dat[which(duplicated(dat$name)),1],"-1",sep='')`，但这只会将“-1”放在所有重复的前面。我想如果该项目第三次出现，用“-2”标记它，依此类推。

干杯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T17:19:32.340

使用`make.unique`：

```
transform(dat,name=make.unique(as.character(name),sep="-"))
  name val
1    A   1
2  A-1   1
3    B   2
4    C   2
5  C-1   3
6  C-2   2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:08:42.537

```
library(plyr)

ddply( dat, .(name), function(d) {
    d$newname <- paste( d$name, cumsum(duplicated(d$name)), sep="-" )
    d
  }) 
```

结果：

```
 name val newname
1    A   1     A-0
2    A   1     A-1
3    B   2     B-0
4    C   2     C-0
5    C   3     C-1
6    C   2     C-2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T17:12:30.430

这不*完全*是你要求的，但你可以试试这个：

```
within(dat, {
  Name <- paste(name, as.numeric(ave(as.character(name), 
                                     name, FUN = seq_along)) - 1,
                sep = "-")
  rm(name)
})
#   val Name
# 1   1  A-0
# 2   1  A-1
# 3   2  B-0
# 4   2  C-0
# 5   3  C-1
# 6   2  C-2 
```

或者，稍作修改：

```
within(dat, {
  name <- as.character(name)
  Name <- as.numeric(ave(name, name, FUN = seq_along)) - 1
  Name <- ifelse(Name == 0, name, paste(name, Name, sep = "-"))
  rm(name)
})
#   val Name
# 1   1    A
# 2   1  A-1
# 3   2    B
# 4   2    C
# 5   3  C-1
# 6   2  C-2 
```

# algorithm - 16位哈佛机中的冒泡排序

> ID：14756735
> 
> 赞同：1
> 
> 时间：2013-02-07T17:02:21.370
> 
> 标签：algorithm, assembly

我目前正在做一个项目，该项目需要我在哈佛机器 16 位汇编代码中编写冒泡排序算法。我尝试在网上搜索它，但是大多数汇编代码片段都使用 CMP 和 MOV 运算符。

我有以下可用指令：ADD、SUB、AND、Copy、ADDI、SUBI、ANDI、LOADI、BZ、BEQ、BRA、SW、LW。

任何人都可以在正确的方向上轻推我吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:09:51.020

您始终可以实现等效于`CMP`using `SUB`（或者即使`ADD`不可`SUB`用）。

`MOV`总是可以由加载和存储构建。您还可以使用负载和`ADD`零初始化寄存器或内存位置来模拟它。

不要搜索。用伪代码编写算法，看看如何使用你得到的指令构建每个步骤。

# sqlite - 如何在 appfog 中使用 sqlite？

> ID：14756737
> 
> 赞同：1
> 
> 时间：2013-02-07T17:02:22.697
> 
> 标签：sqlite, flask, appfog

我在 appfog.com 上使用烧瓶来制作个人博客。今天我尝试使用 sqlite。我可以使用 sqlite 在本地运行应用程序，但是当我将应用程序更新到 AppFog 时，它似乎不起作用。我在 AppFog 的文档中找不到如何使用 sqlite。谁能告诉我？

谢谢...

对不起我的英语不好:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:31:09.063

不建议将 sqlite 用于 AppFog 上的生产应用程序，因为文件存储是短暂的。每次更新应用程序时，数据库都会被炸毁。您最好为您的应用程序创建和绑定 postgres、mysql 或 mongodb 数据库服务。您可以继续在本地使用 sqlite db，但您的生产应用程序将使用绑定服务。

请参阅以下的**绑定服务**部分：[https ://docs.appfog.com/languages/python/flask](https://docs.appfog.com/languages/python/flask)

# .net - TSQL / .net 事务处理 LinqToClasses DataClassesDataContext

> ID：14756744
> 
> 赞同：1
> 
> 时间：2013-02-07T17:02:42.970
> 
> 标签：.net, tsql, linq-to-sql, transactions

我正在使用 T/SQL 存储过程来确保如果数据进入数据库，则数据具有完整性。我使用存储过程的样板代码将存储过程包装在事务中。

```
CREATE PROCEDURE sp<SprocName,,> 
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

DECLARE @tranIsLocal bit, @errNo int

IF @@TRANCOUNT =0
BEGIN
    BEGIN TRANSACTION tr_sp<SprocName,,> 
    SET @tranIsLocal = 1
END

/* Do Stuff Here 

 update table1
      ...

 if @@Error<>0
 Begin
      set @errNo=1
      goto ErrorHandler
 end

select Results ...
 if @@Error<>0
 Begin
      set @errNo=1
      goto ErrorHandler
 end

if @tranIsLocal <>0
begin
    COMMIT TRANSACTION   tr_sp<SprocName,,> 
end 
return 0
ErrorHandler:
if @tranIsLocal <>0
begin 
        rollback transaction  tr_sp<SprocName,,> 
end
    return @errNo
END
GO 
```

我知道使用 Try Catch 可能会更好，但除非它确实有助于解决手头的问题，否则我不想解决这个问题。

特别是我需要更新两个表，我想确定一个表不能更新，而另一个不能。

我正在使用 LinqToClasses，因为我（从我的前任）继承的代码就是这样做的，毫无疑问，将类准备好编码而不是手动编码数据层接口会更快。

我假设 ExecuteMethodCall 将对数据库的调用包装在事务本身中。

所以由于存储过程在创建事务之前会检查是否有事务，并在调用回滚事务之前测试该事务是否由存储过程创建。

问题是如果我必须做些什么来确保事务将在.net 失败时回滚。

ExecuteMethodCall 会检查返回值并回滚事务吗？

如果不是，我可以检查返回值以及从 DataClassesDataContext 中带回结果集吗？

我可以通过在存储过程中调用 RAISEERROR 或 THROW 来使 ExecuteMethodCall 回滚事务吗？

理想情况下，是否有任何文档可以阐明 Microsoft 如何在 .net 方面处理与 ExecuteMethodCall 相关的事务？

# asp.net-mvc - 部分视图未在 IE 中更新

> ID：14756746
> 
> 赞同：1
> 
> 时间：2013-02-07T17:02:49.153
> 
> 标签：asp.net-mvc, internet-explorer, cascadingdropdown, unobtrusive-ajax

我有一个带有级联下拉列表的 Razor 视图。父列表启用 ajax 并使用 jquery.unobtrusive-ajax.js。子列表是部分视图：

```
@Ajax.DropDownListFor(model => model.ParentId, 
    (SelectList)ViewBag.ParentId, 
    "Unknown",
    new AjaxOptions
    {
        HttpMethod = "Get",
        Url = Url.Action("GetChildren"),
        UpdateTargetId = "ChildId",
        InsertionMode = InsertionMode.Replace
    })
...
@Html.Partial("ChildList") 
```

部分视图仅包含子列表的下拉列表：

```
@Html.DropDownList("ChildId", "Unknown") 
```

控制器方法 GetChildren 将列表数据加载到 ViewBag 项中并返回部分视图：

```
 [OutputCache(Duration = 0)]
    public ActionResult GetChildren(long? parentId) 
    {
        if (parentId.HasValue)
        {
            ViewBag.ChildId = ListHelper.GetChildList(parentId.Value, null);
        }
        else
        {
            ViewBag.ChildId= ListHelper.GetEmptyList();
        }
        return PartialView("ChildList");
    } 
```

当在父列表中选择一个项目时，子列表应该加载相关项目。这在 Firefox 和 Chrome 中按预期工作。但在 IE9 中，子列表只是空白。如果我查看 Fiddler 中的 Ajax 调用，我会看到部分视图内容已正确返回。

如何让 IE 正确更新子列表？

*编辑*

当在父列表中选择一个项目时，Fiddler 会记录这一点：

```
HTTP/1.1 200 OK
Cache-Control: public, max-age=0, s-maxage=0
Content-Type: text/html; charset=utf-8
Expires: Thu, 07 Feb 2013 17:11:29 GMT
Last-Modified: Thu, 07 Feb 2013 17:11:29 GMT
Vary: *
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Thu, 07 Feb 2013 17:11:29 GMT
Content-Length: 182

<select id="ChildId" name="ChildId"><option value="">Unknown</option>
<option value="350">Child 1a</option>
<option value="351">Child 1b</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:27:54.170

我建议您`@Html.Partial("ChildList")`使用 DIV 包装并将 UpdateTargetId 更改为该 DIV 的 ID。`InsertionMode.Replace`仅替换元素的内部 html。我想在您的情况下，选择标签的内容被替换为操作结果，如此有效，它看起来像这样：

```
<select id="ChildId" ...>
    <select id="ChildId" ...>
        <option>1</options>
        <option>2</options>
        <option>3</options>
    </select>
</select> 
```

如您所知，这是不正确的，并且 IE9 不允许这样做并吓坏了。

# perl - Perl：如何防止 SIGALRM 关闭管道？

> ID：14756747
> 
> 赞同：2
> 
> 时间：2013-02-07T17:02:49.477
> 
> 标签：perl, signals, alarm, filehandle

我的管道（文件句柄、套接字）中断（有时）。我可以使用以下代码重现它：

```
my $counter = 5;
alarm(1);

open(FH,"while(sleep 2); do date; done |") or die $!;
while (<FH>) { print; }
close(FH);

BEGIN {
    $SIG{ALRM} = sub { 
        print "alarm!\n"; 
        exit if --$counter == 0;
        alarm(1);
    };
} 
```

这将产生：

```
alarm!
alarm!
Thu Feb  7 11:46:29 EST 2013
alarm!
alarm!
alarm! 
```

如果我 strace 这个过程，我会看到生成的 shell 获得了一个 SIGPIPE。然而，Perl 进程愉快地继续。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:28:37.667

问题是`<FH>`由于系统调用中断而返回 false 。我不确定这是否是在 perl 中处理此问题的惯用方式（并且希望看到更好的答案），但以下似乎可行：

```
my $counter = 5;
alarm 1;

open my $fh, '-|', 'while(sleep 2); do date; done' or die $!;
loop:
while (<$fh>) { print; }
goto loop if $!{EINTR};
close $fh;

BEGIN {
    $SIG{ALRM} = sub { 
        print "alarm!\n"; 
        alarm 1;
        exit if --$counter <= 0;
    };
} 
```

# quartz.net - 如何使用自定义 jobDataMap 调用 TriggerJob？

> ID：14756751
> 
> 赞同：1
> 
> 时间：2013-02-07T17:02:52.683
> 
> 标签：quartz.net

我有一个 Quartz.NET 工作，我设置如下：

```
var jobKey = new JobKey("JobName", "JobGroup");
var triggerKey = new TriggerKey("JobName", "JobGroup");
var jobData = new JobDataMap();
jobData.Add("SomeKey", "OriginalValue");
var jobDetail = JobBuilder.Create<JobClass>()
                    .WithIdentity(jobKey)
                    .StoreDurably()
                    .UsingJobData(jobData)
                    .Build();
Scheduler.AddJob(jobDetail, true);
var triggerDetail = TriggerBuilder.Create()
                        .WithIdentity(triggerKey)
                        .StartNow()
                        .WithDailyTimeIntervalSchedule(x => x.OnEveryDay()
                            .StartingDailyAt(TimeOfDay.HourAndMinuteOfDay(04, 07))
                            .EndingDailyAt(TimeOfDay.HourAndMinuteOfDay(06, 07))
                            .WithMisfireHandlingInstructionFireAndProceed())
                        .ForJob(jobKey)
                        .Build();
Scheduler.ScheduleJob(triggerDetail); 
```

我正在尝试使用以下代码手动触发该作业：

```
var jobData = new JobDataMap();
jobData.Add("SomeKey", "SomeValue");
TaskScheduler.Scheduler.TriggerJob(new Quartz.JobKey("JobName", "JobGroup"), jobData); 
```

当我运行手动触发这段代码时，值

```
context.JobDetail.JobDataMap["SomeKey"] 
```

是

```
"OriginalValue" 
```

而不是

```
"SomeValue" 
```

正如我所料。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:29:33.647

触发器和作业都有jobData。

Line`TaskScheduler.Scheduler.TriggerJob(new Quartz.JobKey("JobName", "JobGroup"), jobData);` 将 jobData 分配给触发器。您可以在 context.Trigger.JobDataMap["SomeKey"] 中看到“SomeValue”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T15:56:34.653

使用引用类型有效：

```
//A simple class used here only for storing a string value:
public class SimpleDTO
{
    public string Value { get; set; }
}

void Work() {
    var dto = new SimpleDTO();
    dto.Value = "OriginalValue";
    JobDataMap data = new JobDataMap();
    data["Key"] = dto;

    TaskScheduler.Scheduler.TriggerJob(new Quartz.JobKey("JobName", "JobGroup"), jobData);

    //read modified new value:
    var resultDto = (SimpleDTO)data["Key"];
    Assert.AreEqual("NewValue", resultDto.Value);
}

public void Execute(IJobExecutionContext context)
{
    var simpleDTO = (SimpleDTO)context.MergedJobDataMap["SomeKey"];

    //set a new value:

    simpleDTO.Value = "NewValue";
} 
```

# wpf - 一个组合框过滤 WPF Datagrid 中的另一个组合框

> ID：14756752
> 
> 赞同：0
> 
> 时间：2013-02-07T17:02:58.757
> 
> 标签：wpf, xaml, mvvm, datagrid, combobox

我有一个数据网格，其中有两个组合框列。第一个组合框是 PersonnelTypes 列表。根据选择的 PersonnelType，第二个组合框应填写与所选 PersonnelType 匹配的资源列表

问题是，假设我有两行数据，如果我更改一行的 PersonnelType，数据网格将为每一行中的所有资源设置 itemsource。我只希望它过滤我所在的行，而不是所有行。

这是具有组合框的数据网格部分的 xaml：

```
 <DataGridTemplateColumn  Header="Personnel Type" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <ComboBox Name="cmbPersonnelTypes" FontWeight="Bold" ItemsSource="{Binding ViewModel.PersonnelTypes, RelativeSource={RelativeSource AncestorType=Window}}"  SelectedItem="{Binding PersonnelType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="ID" DisplayMemberPath="Description" SelectionChanged="cmbPersonnelTypes_SelectionChanged" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn  Header="Name" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <ComboBox Name="cmbPersonnelName" FontWeight="Bold" ItemsSource="{Binding ViewModel.ResourcesToChooseFrom, RelativeSource={RelativeSource AncestorType=Window},UpdateSourceTrigger=PropertyChanged}"   SelectedItem="{Binding Resource, Mode=TwoWay}" SelectedValuePath="Refno" DisplayMemberPath="Name" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn> 
```

这是整个数据网格的 xaml（以防万一您需要查看它）：

```
 <DataGrid AutoGenerateColumns="False" CanUserSortColumns="False" CanUserDeleteRows="True" IsReadOnly="True" Background="LightGray" CanUserAddRows="False" Margin="5" SelectedItem="{Binding SelectedLA_JobPersonnel}" ItemsSource="{Binding LA_Personnel}" Grid.ColumnSpan="4" MouseDoubleClick="DataGrid_MouseDoubleClick_1">
                <DataGrid.Resources>
                    <ViewModels:BindingProxy x:Key="proxy" Data="{Binding}" />
                </DataGrid.Resources>
                <DataGrid.Columns>
                    <DataGridTemplateColumn  Header="Personnel Type" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <ComboBox Name="cmbPersonnelTypes" FontWeight="Bold" ItemsSource="{Binding ViewModel.PersonnelTypes, RelativeSource={RelativeSource AncestorType=Window}}"  SelectedItem="{Binding PersonnelType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="ID" DisplayMemberPath="Description" SelectionChanged="cmbPersonnelTypes_SelectionChanged" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn  Header="Name" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <ComboBox Name="cmbPersonnelName" FontWeight="Bold" ItemsSource="{Binding ViewModel.ResourcesToChooseFrom, RelativeSource={RelativeSource AncestorType=Window},UpdateSourceTrigger=PropertyChanged}"   SelectedItem="{Binding Resource, Mode=TwoWay}" SelectedValuePath="Refno" DisplayMemberPath="Name" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>                            <DataGridTemplateColumn Header="Date Out"  Width="20*" >

                        <DataGridTemplateColumn.CellTemplate>

                            <DataTemplate>

                                <TextBlock Background="LightGray" FontWeight="Bold" Text="{Binding DateOut, Mode=TwoWay, Converter={StaticResource thisNullDateConverter}, StringFormat={}{0:MMM-dd-yyyy hh:ss tt}}">
                                </TextBlock>
                            </DataTemplate>

                        </DataGridTemplateColumn.CellTemplate>

                        <DataGridTemplateColumn.CellEditingTemplate>

                            <DataTemplate>
                                <Toolkit:DateTimePicker Background="LightGray" FontWeight="Bold" Value="{Binding Path=DateOut, Mode=TwoWay, Converter={StaticResource thisNullDateConverter}}" Format="Custom" FormatString="MMM dd yyyy hh:ss tt"></Toolkit:DateTimePicker>

                            </DataTemplate>

                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Date In"  Width="20*">

                        <DataGridTemplateColumn.CellTemplate>

                            <DataTemplate>

                                <TextBlock Background="LightGray" FontWeight="Bold" Text="{Binding DateIn, Mode=TwoWay, Converter={StaticResource thisNullDateConverter}, StringFormat={}{0:MMM-dd-yyyy hh:ss tt}}">
                                </TextBlock>
                            </DataTemplate>

                        </DataGridTemplateColumn.CellTemplate>

                        <DataGridTemplateColumn.CellEditingTemplate>

                            <DataTemplate>
                                <Toolkit:DateTimePicker Background="LightGray" FontWeight="Bold" Value="{Binding Path=DateIn, Mode=TwoWay, Converter={StaticResource thisNullDateConverter}}" Format="Custom" FormatString="MMM dd yyyy hh:ss tt"></Toolkit:DateTimePicker>

                            </DataTemplate>

                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>

            </DataGrid> 
```

这是 xaml (xaml.cs) 背后的代码：

```
 public JobEditorViewModel ViewModel
    {
        get { return viewModel; }
    }

private void cmbPersonnelTypes_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var combobox = sender as ComboBox;
        if (combobox != null)
        {
            var selectedPersonnelType = combobox.SelectedItem as PersonnelType;
            viewModel.SetResourcesToChooseFrom(selectedPersonnelType);
        }
    } 
```

这是视图模型中的代码：

```
public BindingList<PersonnelType> PersonnelTypes
{
    get; set;
}
public JobEditorViewModel(int jobid, string region, DataAccessDataContext db, ServiceUserControlViewModel serviceViewModel)
{

    PersonnelTypes = new BindingList<PersonnelType>(_db.PersonnelTypes.OrderBy(p => p.Head).ThenBy(p => p.Description).ToList());

}

private BindingList<Resource> _resourcesToChooseFrom;

public BindingList<Resource> ResourcesToChooseFrom
{
    get { return _resourcesToChooseFrom; }
    set
    {
        _resourcesToChooseFrom = value;
        NotifyPropertyChanged("ResourcesToChooseFrom");
    }
}

public void SetResourcesToChooseFrom(PersonnelType personnelType)
{
   ResourcesToChooseFrom =
        new BindingList<Resource>(_db.Resources.Where(r => r.Head == personnelType.Head && r.Refno > 2).OrderBy(r=>r.Name).ToList());
} 
```

如果您需要查看更多信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:55:18.320

好吧，在工作中的一位同事的帮助下，我们弄清楚了我需要做什么。多重绑定就是答案。首先，我们进行了修改，以便将两个组合框放在同一列中，方法是将它们都放在网格中并将网格放在一列中。所以现在两个组合框可以互相看到，因为它们在同一个 DataGridTemplateColumn 中。以前，我们无法让它们互相看到，因为它们在成为两个单独的 DataGridTemplateColumn 时失去了彼此的范围。

这是我们在 xaml 中所做的：

```
 <DataGridTemplateColumn  Header="Personnel Type-Name" Width="Auto" >
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Grid >
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="170"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <Border Grid.Column="0" BorderBrush="Black" BorderThickness="1">
                                                    <TextBlock Text="{Binding PersonnelType.Description}"/>
                                                </Border>
                                                <Border Grid.Column="1" BorderBrush="Black" BorderThickness="1">
                                                    <TextBlock  Text="{Binding Resource.Name}"/>
                                                </Border>

                                            </Grid>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>

                                    <DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <Grid >
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="170"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <ComboBox Name="cmbPersonnelTypes" Grid.Column="0" FontWeight="Bold" ItemsSource="{Binding ViewModel.PersonnelTypes, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding PersonnelType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="ID" DisplayMemberPath="Description" />
                                                <ComboBox Name="cmbPersonnelName" Grid.Column="1"  FontWeight="Bold" SelectedItem="{Binding Resource, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Refno" DisplayMemberPath="Name" >
                                                    <ComboBox.ItemsSource>
                                                        <MultiBinding Converter="{StaticResource FilteredPersonnelConverter}">
                                                            <Binding Path="ViewModel.AvailablePersonnel" RelativeSource="{RelativeSource AncestorType=Window}"/>
                                                            <Binding Path="SelectedItem" ElementName="cmbPersonnelTypes"/>
                                                            <Binding Path="ViewModel.SelectedGlobalResourceViewOption" RelativeSource="{RelativeSource AncestorType=Window}"/>
                                                        </MultiBinding>
                                                    </ComboBox.ItemsSource>
                                                </ComboBox>

                                            </Grid>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellEditingTemplate>

                                </DataGridTemplateColumn> 
```

您会注意到 MultiBinding 中有一个名为 FilteredPersonnelConverter 的 ValueConverter。这个值转换器为我做了所有的过滤。这是代码：

```
public class FilteredPersonnelListValueConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var allResources = values[0] as IList<Resource>;
        var personnelType = values[1] as PersonnelType;
        var selectedGlobalResourceView = values[2] as ResourceViewOption;
        if (personnelType == null)
            return allResources;
        if(selectedGlobalResourceView.ResourceViewTitle=="Regional")
            return allResources.Where(r => r.Head == personnelType.Head && r.Obsolete == false && r.Location.Region.RegionID.Trim()==SettingsManager.OpsMgrSettings.Region.Trim()).OrderBy(r => r.Name).ToList();
        if (selectedGlobalResourceView.ResourceViewTitle == "Local")
            return allResources.Where(r => r.Head == personnelType.Head && r.Obsolete == false && r.LocnID.Trim() == SettingsManager.OpsMgrSettings.LOCNCODE.Trim()).OrderBy(r => r.Name).ToList();

        return allResources.Where(r => r.Head == personnelType.Head &&r.Obsolete==false).OrderBy(r => r.Name).ToList();

    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

因此，如果其他人正在做这样的事情，请研究 Multibinding，它将改变您的生活

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:31:29.023

当用户更改视图中的 PersonelType 下拉列表时，ViewModel 应该过滤资源列表（它应该使用正确的信息更新第二个下拉框）。

实际上，您只需要设置视图模型以响应视图上的更改。这就是它归结为。

看这里：

```
public JobEditorViewModel(int jobid, string region, DataAccessDataContext db, ServiceUserControlViewModel serviceViewModel)
{

    PersonnelTypes = new BindingList<PersonnelType>(_db.PersonnelTypes.OrderBy(p => p.Head).ThenBy(p => p.Description).ToList());

} 
```

看起来您在构造函数中设置了人员类型，但您没有响应用户更改。您需要在视图模型的 PersonelType 绑定中执行此操作。

**编辑**

我现在看到您正在处理更改的选择。但实际上我认为这应该在视图模型本身中完成。特别是因为您实际上是从视图访问视图模型以进行更改。

**例子**

所以这是我的虚拟机：

```
class ViewModel : INotifyPropertyChanged
{
    DispatcherTimer timer = new DispatcherTimer();

    public ViewModel()
    {
        // Create my observable collection
        this.DateTimes = new ObservableCollection<DateTime>();

        // Every second add anothe ritem
        timer.Interval = TimeSpan.FromSeconds(1);
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        // This adds to the collection
        this.DateTimes.Add(DateTime.Now);
    }

    public ObservableCollection<DateTime> DateTimes { get; private set; }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

和我的观点：

```
<ListBox ItemsSource="{Binding DateTimes}"/> 
```

请注意，我不重建集合。我只是设置一次，然后根据需要更改它的大小。

# java - Java SE 和网络会话

> ID：14756753
> 
> 赞同：1
> 
> 时间：2013-02-07T17:02:59.920
> 
> 标签：java, session

我正在 Java SE 中实现 Web 解析应用程序，我需要使用 Web 会话。请帮助我，我如何接收、存储和发送会话 ID，以及如何使用它像登录用户一样浏览网页？我正在使用 HTTP 和 HTTPS、URL 类并通过 InputStreamReader 进行读取：

```
URL page = new URL("http://" + url);
BufferedReader in = new BufferedReader(new InputStreamReader(page.openStream())); 
```

我想在 Java SE 中实现它，而不是 Java EE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:08:27.553

这实际上取决于您要解析的网站类型。站点可以在 url 中甚至在网页中发回会话 id。Web 会话对象通常也驻留在服务器上。您需要查看这些站点，然后确定如何处理此问题...

# xcode - 使用 UISlider 动态改变 lineWidth？

> ID：14756756
> 
> 赞同：1
> 
> 时间：2013-02-07T17:03:04.043
> 
> 标签：xcode, uislider, mapkit

我已经从 Apple 提供的示例代码中将 CrumbPath.h & .m 和 CrumPathView.h & .m 导入到我的项目中。

它工作正常，直到我想控制 CrumbPath 的 lineWidth，在上一个问题中，我们解决了如何使用“Sliderchanged”中的值来填充“CGFloat lineWidth =”

链接在这里：[使用 UISlider 中的值来更改另一个变量？](https://stackoverflow.com/questions/14754190/use-value-from-uislider-to-change-another-variable)

现在我遇到了模拟器中根本没有显示线路的问题......

CrumbPathView.m

```
#import "CrumbPathView.h"

#import "CrumbPath.h"

#import "FirstViewController.h"

@interface CrumbPathView (FileInternal)
- (CGPathRef)newPathForPoints:(MKMapPoint *)points
                  pointCount:(NSUInteger)pointCount
                    clipRect:(MKMapRect)mapRect
                   zoomScale:(MKZoomScale)zoomScale;

@end

@implementation CrumbPathView

-(IBAction)sliderChanged:(UISlider *)sender
{

}

- (void)drawMapRect:(MKMapRect)mapRect
      zoomScale:(MKZoomScale)zoomScale
      inContext:(CGContextRef)context
{
CrumbPath *crumbs = (CrumbPath *)(self.overlay);
CGFloat lineWidth = self.sliderChanged.value;

// outset the map rect by the line width so that points just outside
// of the currently drawn rect are included in the generated path.
MKMapRect clipRect = MKMapRectInset(mapRect, -lineWidth, -lineWidth);

[crumbs lockForReading];
CGPathRef path = [self newPathForPoints:crumbs.points
                                pointCount:crumbs.pointCount
                                  clipRect:clipRect
                                 zoomScale:zoomScale];
[crumbs unlockForReading];

if (path != nil)
{
    CGContextAddPath(context, path);
    CGContextSetRGBStrokeColor(context, 0.0f, 0.0f, 1.0f, 0.5f);
    CGContextSetLineJoin(context, kCGLineJoinRound);
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, lineWidth);
    CGContextStrokePath(context);
    CGPathRelease(path);
}
}

@end

@implementation CrumbPathView (FileInternal)

static BOOL lineIntersectsRect(MKMapPoint p0, MKMapPoint p1, MKMapRect r)
{
double minX = MIN(p0.x, p1.x);
double minY = MIN(p0.y, p1.y);
double maxX = MAX(p0.x, p1.x);
double maxY = MAX(p0.y, p1.y);

MKMapRect r2 = MKMapRectMake(minX, minY, maxX - minX, maxY - minY);
return MKMapRectIntersectsRect(r, r2);
}

#define MIN_POINT_DELTA 5.0

- (CGPathRef)newPathForPoints:(MKMapPoint *)points
                  pointCount:(NSUInteger)pointCount
                    clipRect:(MKMapRect)mapRect
                   zoomScale:(MKZoomScale)zoomScale
{
// The fastest way to draw a path in an MKOverlayView is to simplify the
// geometry for the screen by eliding points that are too close together
// and to omit any line segments that do not intersect the clipping rect.  
// While it is possible to just add all the points and let CoreGraphics 
// handle clipping and flatness, it is much faster to do it yourself:
//
if (pointCount < 2)
    return NULL;

CGMutablePathRef path = NULL;

BOOL needsMove = YES;

#define POW2(a) ((a) * (a))

// Calculate the minimum distance between any two points by figuring out
// how many map points correspond to MIN_POINT_DELTA of screen points
// at the current zoomScale.
double minPointDelta = MIN_POINT_DELTA / zoomScale;
double c2 = POW2(minPointDelta);

MKMapPoint point, lastPoint = points[0];
NSUInteger i;
for (i = 1; i < pointCount - 1; i++)
{
    point = points[i];
    double a2b2 = POW2(point.x - lastPoint.x) + POW2(point.y - lastPoint.y);
    if (a2b2 >= c2) {
        if (lineIntersectsRect(point, lastPoint, mapRect))
        {
            if (!path) 
                path = CGPathCreateMutable();
            if (needsMove)
            {
                CGPoint lastCGPoint = [self pointForMapPoint:lastPoint];
                CGPathMoveToPoint(path, NULL, lastCGPoint.x, lastCGPoint.y);
            }
            CGPoint cgPoint = [self pointForMapPoint:point];
            CGPathAddLineToPoint(path, NULL, cgPoint.x, cgPoint.y);
        }
        else
        {
            // discontinuity, lift the pen
            needsMove = YES;
        }
        lastPoint = point;
    }
}

#undef POW2

// If the last line segment intersects the mapRect at all, add it unconditionally
point = points[pointCount - 1];
if (lineIntersectsRect(lastPoint, point, mapRect))
{
    if (!path)
        path = CGPathCreateMutable();
    if (needsMove)
    {
        CGPoint lastCGPoint = [self pointForMapPoint:lastPoint];
        CGPathMoveToPoint(path, NULL, lastCGPoint.x, lastCGPoint.y);
    }
    CGPoint cgPoint = [self pointForMapPoint:point];
    CGPathAddLineToPoint(path, NULL, cgPoint.x, cgPoint.y);
}

return path;
}

@end 
```

CrumbPathView.h

```
#import <MapKit/MapKit.h>
#import <UIKit/UIKit.h>

@interface CrumbPathView : MKOverlayView
{

}

@property (weak, nonatomic) IBOutlet UISlider *sliderChanged;

@end 
```

移动滑块时，输出控制台会记录更改，但视觉上没有任何变化。没有错误，但正如我提到的，CrumbPath 根本没有显示......好像 lineWidth 设置为“0”。

# java - 在 H2 上运行查询时未找到列“name_c”错误

> ID：14756757
> 
> 赞同：1
> 
> 时间：2013-02-07T17:03:04.753
> 
> 标签：java, h2, in-memory-database

我正在使用 H2 的内存实例进行单元测试，并且正在尝试运行以下查询：

```
SELECT name AS name_c FROM users ORDER BY lower(name_c) 
```

（真正的查询要复杂得多，但这个简单的查询具有相同的症状）

我收到以下异常：

```
org.h2.jdbc.JdbcSQLException: Column "NAME_C" not found; SQL statement:
SELECT name AS "name_c" FROM users ORDER BY lower(name_c) [42122-163]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.expression.ExpressionColumn.optimize(ExpressionColumn.java:138)
    at org.h2.expression.Function.optimize(Function.java:1705)
    at org.h2.command.dml.Select.prepare(Select.java:799)
    at org.h2.command.Parser.prepareCommand(Parser.java:218)
    at org.h2.engine.Session.prepareLocal(Session.java:415)
    at org.h2.engine.Session.prepareCommand(Session.java:364)
    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1121)
    at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:164)
    at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:152)
    at org.apache.commons.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
    at org.apache.commons.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
    at com.name.dal.Connection.executeQuery(Connection.java:462)
    at com.name.model.users.UserTest.testTest(UserTest.java:324)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.rules.RunRules.evaluate(RunRules.java:18)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有谁知道为什么？

我正在使用以下连接字符串创建数据库：

```
jdbc:h2:mem:db1;MODE=MYSQL;DB_CLOSE_DELAY=60;IGNORECASE=TRUE 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:02:46.117

列别名仅在按`order by`原样（单独）使用时才在子句中可用。这与其他数据库的行为相同（根据我的测试，PostgreSQL 和 Derby）。有一些数据库确实支持您想要的（例如 MySQL），但这不是 SQL 标准的一部分。例如：

```
create table test(id int primary key, name varchar(255));
insert into test values(1, 'hello');
insert into test values(2, 'world'); 
```

这适用于我测试的所有数据库：

```
select name as c_name from test order by c_name;
select name as c_name from test order by lower(name); 
```

有了这些数据，我对 PostgreSQL、Apache Derby 和 H2 的以下查询失败了。它适用于 MySQL：

```
select name as c_name from test order by lower(c_name); 
```

# ios - 适用于 iOS 和路线的 Google Maps SDK

> ID：14756762
> 
> 赞同：7
> 
> 时间：2013-02-07T17:03:23.110
> 
> 标签：ios, objective-c, ios7, google-maps-sdk-ios

我一直在阅读适用于 iOS 的 Google Maps SDK 的文档，但没有看到任何关于在地图上绘制路线的信息。

我知道折线可用，但我认为这不是最好的方法。

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T23:05:04.797

iOS SDK 尚不支持方向。与此同时，您可以使用[Directions API Web 服务](https://developers.google.com/maps/documentation/directions/)并使用 GMSPolyline 自己渲染路线。

您还应该提交[功能请求](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Maps%20SDK%20for%20iOS%20-%20Feature%20Request)以将其添加到 SDK。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T08:32:04.050

作为 Saxon Druce 的回答，您可以使用 Google Maps Directions 网络服务来查找路线并通过折线绘制它们。这一[集](http://www.youtube.com/watch?v=AdV7bCWuDYg)将向您展示如何实现它，您可以从这个[github 存储库](https://github.com/ManoMarks/demos/tree/master/DirectionsAPIAsync)下载示例代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T03:29:11.383

库中的某些内容不在文档中，因此如果您正在寻找功能，则值得下载 SDK 并查看标题。

但是在当前版本 1.0.2 中，我看不到任何路由信息 - 搜索路由或绘制它们（甚至查找地址）。目前，您唯一的选择可能是使用其他一些 Google API 来查找路线，然后正如 Lee 所说，使用折线来绘制它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-26T12:30:58.617

我有类似的问题，我需要使用相同的谷歌地图 ios sdk 在谷歌地图上绘制方向路径。我所做的是访问[Google Distance API](http://maps.googleapis.com/maps/api/directions/json?origin=ahmedabad&destination=mumbai)。

我使用以下代码从 API 中提取了 html_instructions 和 end_location。

我将这些变量定义为属性

```
@property NSMutableArray *detailedSteps;
@property (strong, nonatomic) IBOutlet GMSMapView *mapview; 
```

并使用以下代码提取 end_location 和 html_instructions

```
NSURL *url=[[NSURL alloc] initWithString:[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=ahmedabad&destination=%@",self.city]];
NSURLResponse *res;
NSError *err;
NSData *data=[NSURLConnection sendSynchronousRequest:[[NSURLRequest alloc] initWithURL:url] returningResponse:&res error:&err];
NSDictionary *dic=[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
NSArray *routes=dic[@"routes"];
 NSArray *legs=routes[0][@"legs"];
NSArray *steps=legs[0][@"steps"];
NSMutableArray *textsteps=[[NSMutableArray alloc] init];
NSMutableArray *latlong=[[NSMutableArray alloc]init];
for(int i=0; i< [steps count]; i++){
    NSString *html=steps[i][@"html_instructions"];
    [latlong addObject:steps[i][@"end_location"]];
    [textsteps addObject:html];
}
self.detailedSteps=textsteps;
[self showDirection:latlong]; 
```

这是我在地图上绘制多边形的方法 showDirection。在这里，我传递了 latlong 数组。这实际上是 end_location 数组。

```
-(void)showDirection:(NSMutableArray*) latlong{
GMSMutablePath *path = [GMSMutablePath path];
for(int i=0; i<[latlong count]; i++){
    double lat=[latlong[i][@"lat"] doubleValue];
    double lng=[latlong[i][@"lng"] doubleValue];
    [path addLatitude:lat longitude:lng];
}
NSLog(@"Direction path");
GMSPolyline *polyline = [GMSPolyline polylineWithPath:path];
polyline.strokeColor = [UIColor blueColor];
polyline.strokeWidth = 5.f;
polyline.map = self.mapview ;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T00:26:02.127

即使是 1.1.0 版也没有实现任何指示工具，所以我建议使用 URL 方案以获得最佳性能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-09T08:36:08.227

我认为现在可以使用**Google Maps iOS SDK**绘制路线/方向。
在此处关注官方视频教程：http: //talkminer.com/viewtalk.jsp?videoid=AdV7bCWuDYg&q=&row=4&
[N=5#.Ui2H1mSAZTE](http://talkminer.com/viewtalk.jsp?videoid=AdV7bCWuDYg&q=&row=4&N=5#.Ui2H1mSAZTE)

# mysql - 启用 MySQL 二进制日志

> ID：14756765
> 
> 赞同：6
> 
> 时间：2013-02-07T17:03:28.393
> 
> 标签：mysql, phpmyadmin

如何在 mySQL 中启用二进制日志。我努力了：

1) 在 phpmyadmin 上输入此 SQL 代码

```
SET GLOBAL log_bin ='ON' 
```

这给了我一条错误消息，表明 bin_log 是一个只读文件；

2) 将其插入 [mysqld] 下面的 my.ini 文件中

```
--log-bin= C:\mySqlbinlog 
```

这表明当我尝试访问网页时无法访问数据库。

知道如何通过 phpmyadmin 或在 my.ini 文件中启用二进制日志吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:44:23.473

只需将**log_bin**参数放在 mysqld 之后。请为您有大量空间的 binlog 提供路径，因为 binlog 会占用大量磁盘空间。

```
log_bin = "path where want to store bin files.extension" 
```

您还可以使用一些其他参数，如**max_binlog_size**、**max_binlog_cache_size**、 **sync_binlog**以获得良好的性能

更多这里是[链接]（[http://dev.mysql.com/doc/refman/5.5/en/replication-options-binary-log.html](http://dev.mysql.com/doc/refman/5.5/en/replication-options-binary-log.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:33:49.180

根据[文档](http://dev.mysql.com/doc/refman/5.5/en/replication-options-binary-log.html#option_mysqld_log-bin)，选项文件格式是`log-bin`，所以你应该把它放在你的 my.ini 中（在`[mysqld]`标题下）：

```
log-bin=C:\mySqlbinlog 
```

之后不要忘记重新启动 MySQL 服务器进程！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-23T20:52:48.543

我目前使用 wamp 和 MySQL 版本 5.6.17，所以你的里程可能会有所不同。

打开您的 my.ini 文件并滚动浏览它。您正在寻找该`[mysqld]`部分。添加`log-bin=C:\Your_Dir_Here`到该`[mysqld]`部分。重新启动 MySQL 服务。重启完成后，登录 MySQL。运行命令`SHOW BINARY LOGS;`

然后，您应该会看到如下输出：

```
+------------------+-----------+
| Log_name         | File_size |
+------------------+-----------+
| MySQL_Log.000001 |       120 |
+------------------+-----------+
1 row in set (0.00 sec) 
```

**注意** 我不确切知道它是如何`log-bin`工作的，但我会推荐一个绝对路径，这样你就知道你的日志文件将在哪里。此外，您的 MySQL 安装在服务重新启动之前不会读取该`my.ini`文件。

**进一步阅读** [http://dev.mysql.com/doc/refman/5.6/en/binary-log.html](http://dev.mysql.com/doc/refman/5.6/en/binary-log.html)

这个链接涵盖了很多关于二进制日志的内容。它实际上涵盖了太多，我什至无法掩饰。

如果我遗漏了某些内容或者我对某些内容含糊不清，请发表评论，我会尽力回复。

# c - 使用openCV在MAC上读/写avi视频

> ID：14756767
> 
> 赞同：1
> 
> 时间：2013-02-07T17:03:33.813
> 
> 标签：c, macos, video, opencv, grayscale

我正在尝试在 MAC 10.6.8 上使用 openCV 2.4.0 读取 avi 视频并重新写入，没有任何更改

我的视频是灰度的，frame_rate = 25 和 Codec = 827737670，这是 FFV1（我猜）

问题是....当我按原样读取和写入视频时....我看到大小和颜色有很多变化...在写入 3 或 4 次后，我可以看到视频开始变成（粉红色） 颜色 ！！！

我不确定是什么问题！

这是我给感兴趣的人的代码

提前感谢您的帮助：D

赛琳

注意：我的电脑上有 FFMPEG V 0.11（我不知道这是否重要）

```
{    

int main (int argc, char * const argv[]) {
    char name[50];

    if (argc==1)
    {
        printf("\nEnter the name of the video:");
        scanf("%s",name); 

    } else if (argc == 2)
        strcpy(name, argv[1]);

    else 
    {
        printf("To run this program you should enter the name of the program at least, or you can enter the name of the program then the file name");
        return 0; 
    }

    cvNamedWindow( "Read the video", CV_WINDOW_AUTOSIZE );

    // GET video
    CvCapture* capture = cvCreateFileCapture( name );
    if (!capture ) 
    {
        printf( "Unable to read input video." );
        return 0;
    }

    double fps = cvGetCaptureProperty( capture,CV_CAP_PROP_FPS);
     printf( "fps %f ",fps );
    int codec = cvGetCaptureProperty( capture,CV_CAP_PROP_FOURCC);
    printf( "codec %d ",codec );
    // Read frame
    IplImage* frame = cvQueryFrame( capture );
    // INIT the video writer
    CvVideoWriter *writer = cvCreateVideoWriter( "x7.avi", codec, fps, cvGetSize(frame),1);
    while(1) 
    {
        cvWriteFrame( writer, frame );
        cvShowImage( "Read the video", frame );
        // READ next frame
        frame = cvQueryFrame( capture );
        if( !frame ) 
            break;
        char c = cvWaitKey(33);
        if( c == 27 ) 
            break;
    }

    // CLEAN everything
    cvReleaseImage( &frame );
    cvReleaseCapture( &capture );
    cvReleaseVideoWriter( &writer );
    cvDestroyWindow( "Read the video" );    
    return 0;}

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:33:02.580

检查此[fourcc 代码列表](http://www.fourcc.org/codecs.php)，并搜索未压缩的代码，例如`HFYU`.

您可能还会发现这篇文章很有趣：[使用 OpenCV 进行真正无损视频录制](http://denislantsman.com/?p=111)。

**编辑：**

我有一个 Mac OS X 10.7.5 可供我使用，既然你给了我们测试视频，我决定分享我的发现。

我为测试目的编写了以下源代码：它加载您的视频文件并将其写入新文件*out.avi*，同时保留编解码器信息：

```
#include <cv.h>
#include <highgui.h>

#include <iostream>

int main(int argc, char* argv[])
{
    // Load input video
    cv::VideoCapture input_cap(argv[1]);
    if (!input_cap.isOpened())
    {
        std::cout << "!!! Input video could not be opened" << std::endl;
        return -1;
    }

    // Setup output video
    cv::VideoWriter output_cap("out.avi", 
                               input_cap.get(CV_CAP_PROP_FOURCC),
                               input_cap.get(CV_CAP_PROP_FPS),
                               cv::Size(input_cap.get(CV_CAP_PROP_FRAME_WIDTH), input_cap.get(CV_CAP_PROP_FRAME_HEIGHT)));                          
    if (!output_cap.isOpened())
    {
        std::cout << "!!! Output video could not be opened" << std::endl;
        return -1;
    }

    // Loop to read from input and write to output
    cv::Mat frame;
    while (true)
    {       
        if (!input_cap.read(frame))             
            break;

        output_cap.write(frame);
    }

    input_cap.release();
    output_cap.release();

    return 0;
} 
```

输出视频呈现与输入相同的特征：

*   编解码器：FFMpeg 视频 1 (FFV1)
*   分辨率：720x480
*   帧率：25
*   解码格式：Planar 4:2:0 YUV

玩的时候看起来还不错。

我正在使用 OpenCV 2.4.3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:09:09.860

我弄清楚了问题，，，，，以YUV240像素格式编写的原始视频（并且是灰色的）

openCV 默认读取 BGR 上的视频，所以每次我读取它时，openCV 都会将像素值转换为 BGR

经过几次读写后，错误开始变大（因为转换操作），为什么像素值会发生变化......我看到视频粉红色！

解决方案是，通过提供YUV240等多种格式的FFMPEG项目读写此类视频，在FFMPEG教程中有代码可以做到这一点

我希望这可以帮助面临类似问题的其他人

# svg - 动画 SVG 对象遵循与给定相同路径的绘图不同的路径

> ID：14756768
> 
> 赞同：1
> 
> 时间：2013-02-07T17:03:34.923
> 
> 标签：svg

我遇到了一个相当奇怪的情况，我似乎无法解释。我创建了一个带有单个动画圆和两条路径的 SVG 文件（见下文）。

动画圆被赋予了路径，黑色曲线被赋予了相同的路径。在大多数情况下，这些工作都按预期工作，圆圈沿着这条线，直到它到达曲线的最后一部分（在 Inkscape 中创建的路径）。

在最后一条曲线上，圆圈明显偏离路径，并沿着红色曲线（我从观察圆圈的位置画出）。我已经研究了一段时间，我已经把它传给了几个人，我们都空了！它似乎在 Chrome 和 Firefox 中显示相同的行为。

```
<?xml version='1.0' ?>
<svg  id="bg" width="640" height="480" viewBox="0 0 640 480"     xmlns="http://www.w3.org/2000/svg">
 <!-- 0.3120145,28.545527 -->
    <circle cx="0" cy="28" r="10" fill="red" >
        <animateMotion attributeName="transform" type="translate" path="M 0,0
        c 208.4152955,0 434.8417755,7.528088 526.1842855,11.292119     91.34251,3.764044 61.75268,101.629084 46.31451,116.685274 
            -15.43817,15.05615 -348.64533,0 -464.4316,0 -51.970376,0     -69.396244,-17.08125 -87.777293,15.80389 
        C -0.1965619,209.53694 501.31249,229.91057 504.89916,3.6862537"  begin="0s"     dur="10s" fill="freeze"/>
    </circle>
 <path d="M 0.3120145,28.545527 
        c 208.4152955,0 
            434.8417755,7.528088 
                526.1842855,11.292119 
            91.34251,3.764044 
            61.75268,101.629084 
            46.31451,116.685274 
            -15.43817,15.05615 
            -348.64533,0 
            -464.4316,0 
            -51.970376,0 
            -69.396244,-17.08125 
            -87.777293,15.80389 
        C -0.1965619,209.53694 
        501.31249,229.91057 
        504.89916,3.6862537"
        fill="none" stroke="black" stroke-width="1"
    />
    <path d="M 0.3120145,28.545527 
        c 208.4152955,0 
            434.8417755,7.528088 
            526.1842855,11.292119 
            91.34251,3.764044 
            61.75268,101.629084 
            46.31451,116.685274 
            -15.43817,15.05615 
            -348.64533,0 
            -464.4316,0 
            -51.970376,0 
            -69.396244,-17.08125 
            -87.777293,15.80389 
        C -0.1965619,250.53694 
        530.31249,245.91057 
        504.89916,10.6862537"
        fill="none" stroke="red" stroke-width="0.5"
    />
  <!--path class="SamplePath" d="M100,200 C100,100 250,100 250,200 S400,300 400,200" --    >

</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:19:42.630

By changing the start of the path to "M 0 0" you are modifying the path. Try with:

```
<svg  id="bg" width="640" height="480" viewBox="0 0 640 480"     xmlns="http://www.w3.org/2000/svg">

<circle cx="0" cy="28" r="10" fill="red" transform="translate(0, -30)">
    <animateMotion attributeName="transform" type="translate" path="M 0.3120145,28.545527 
    c 208.4152955,0 
        434.8417755,7.528088 
            526.1842855,11.292119 
        91.34251,3.764044 
        61.75268,101.629084 
        46.31451,116.685274 
        -15.43817,15.05615 
        -348.64533,0 
        -464.4316,0 
        -51.970376,0 
        -69.396244,-17.08125 
        -87.777293,15.80389 
    C 0,210 
    501,230 
    505,3.7"  begin="0s"     dur="3s" fill="freeze"/>
</circle>
<path d="M 0.3120145,28.545527 
    c 208.4152955,0 
        434.8417755,7.528088 
            526.1842855,11.292119 
        91.34251,3.764044 
        61.75268,101.629084 
        46.31451,116.685274 
        -15.43817,15.05615 
        -348.64533,0 
        -464.4316,0 
        -51.970376,0 
        -69.396244,-17.08125 
        -87.777293,15.80389 
    C 0,210 
    501,230 
    505,3.7"
    fill="none" stroke="black" stroke-width="1"/>
</svg> 
```

# regex - 正则表达式查找 CamelCase 字符串和破折号，替换为 lowercase_underscored

> ID：14756769
> 
> 赞同：2
> 
> 时间：2013-02-07T17:03:41.103
> 
> 标签：regex, phpstorm

在 PHPStorm 中，我需要查找/替换一些用于 CSS 类名和 DOM id 的混合大小写字符串。我无法更改属性，`onClick`并且图像名称需要保留。这是我所拥有的：

```
<div class="ThumbContainer" id="Source-Data4-Thumb">
<div class="ThumbTitleArea">
    <div class="DataTitleDiv"> GYR Performance <img src="images/someImage.png" onClick="someFunc()" /></div>
</div>
    <div class="dataDetailArea">
    <div class="DataThumbArea"> Data Source:Client<br>
                    Last refreshed:12/05/2013 <br>
                    Records:206<br>
        <br>
                        Used for the following reports<br>
                -    GYR Performance<br>
        </div>
</div>
</div> 
```

这是我需要的：

```
<div class="thumb_container" id="source_data4_thumb">
<div class="thumb_title_area">
    <div class="data_title_div"> GYR Performance <img src="images/someImage.png" onClick="someFunc()" /></div>
</div>
    <div class="data_detail_area">
    <div class="data_thumb_area"> Data Source:Client<br>
                      Last refreshed:12/05/2013 <br>
                      Records:206<br>
        <br>
                          Used for the following reports<br>
                 -    GYR Performance<br>
        </div>
</div>
</div> 
```

注意`dataDetailArea`以小写字母开头.. bleh。这将是一次查找/替换，因此不需要在 PHPStorm 中。它甚至可以在任何在线工具中，例如[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

我需要查找/替换的实际主干模板大约有 3100 行代码，否则我会在这里为您提供。

这是我到目前为止所拥有的。它似乎不匹配匹配`Camel-Case3-Foo`：

```
(class|id|data-[?!=])="\b([A-Za-z][a-z-]*){2,}\b" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:13:00.463

这个正则表达式应该找到应该放置下划线的位置：

```
((?<=\w)(?=[A-Z])|-) 
```

用它来替换以插入下划线，然后将字符串转换为小写似乎是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:34:08.187

我会搜索这样的东西：

```
"[a-z0-9_]*\([A-Z]\) 
```

引号，后面带有小写、数字或下划线字符。后面的任何东西都有一个大写字母。制作大写字母子表达式 1。

将子表达式 1 替换为下划线 + tolower() 函数的结果。

您需要对每一行多次应用这个，因为它每次只能找到一个大写字母。

# android - 何时将应用程序设置提交到 SharedPreferences（onStop 或 onDestroy）

> ID：14756770
> 
> 赞同：10
> 
> 时间：2013-02-07T17:03:41.180
> 
> 标签：android

我想知道，何时将我们的应用程序设置保存到 SharedPreferences 是合适的时间。我们应该在`onStop`或期间这样做`onDestroy`吗？我意识到这两种方法都有其优点和缺点。

## 停止

如果用户的意图不是退出应用程序，将应用程序设置保存到 SharedPreferences 似乎是多余的。他只需**按主页**（调用onStop）->**长按主页**->**通过再次选择应用程序重新启动应用程序**

## 销毁

用户可以通过**按主页**（调用onStop）->**长按主页**->**在应用程序上向左滑动来终止应用程序来终止应用***程序*。如果用户以这种方式退出应用程序，我意识到虽然应用程序被*杀死*，但没有被调用。因此，不会保存应用程序设置。******`onDestroy`******

 *******那么，在`onStop`或期间保存应用程序设置更好`onDestroy`吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T17:06:01.803

最好`commit()`在您进行更改后立即调用，或者在`onPause()`方法中调用。这可确保您的更改在几乎所有情况下都保存，除了导致您的应用程序崩溃的未捕获异常。

此外，您应该注意根本不会调用`onStop()`或`onDestroy()`保证不会调用，尤其是在 Android 内存不足的情况下。但是，`onPause()`几乎总是被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:08:28.183

我认为 Android 文档几乎解释了您应该何时提交或保留来自用户的任何数据：

> onPause() 是处理用户离开活动的地方。最重要的是，此时用户所做的任何更改都应提交（通常提交给持有数据的 ContentProvider）。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)*******

# python - PyCurl 的默认超时时间是多少

> ID：14756777
> 
> 赞同：4
> 
> 时间：2013-02-07T17:04:01.023
> 
> 标签：python, timeout, default, pycurl

好吧，我认为这个问题的标题是非常不言自明的，所以你可能不需要继续阅读，但它是这样的：

我使用[PyCurl](http://pycurl.sourceforge.net/)已经有一段时间了，我总是使用

```
curlConnector = pycurl.Curl()
curlConnector.setopt(pycurl.CONNECTTIMEOUT, 30) 
```

但我开始想知道默认超时是什么，或者如何找到它，到目前为止我还没有看到任何令人满意的答案。如果我不手动指定它，默认超时是多少？来自[插座](http://docs.python.org/2/library/socket.html)的东西是什么？（以防万一，我在 Ubuntu 12.04 和 python2.7 上工作）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T19:05:36.633

我下载了 PyCurl。在`doc/`tarball 的目录中，有几个 doc 文件。其中之一是`doc/curlobject.html`，它表示`setup`“对应于 libcurl 中的 curl_easy_setopt”。按照该链接，您可以访问[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)，在搜索“CONNECTTIMEOUT”时会显示：

```
CURLOPT_CONNECTTIMEOUT

Pass a long. It should contain the maximum time in seconds that you allow the connection to the server to take. 
This only limits the connection phase, once it has connected, this option is of no more use. 
Set to zero to switch to the default built-in connection timeout - 300 seconds. 
See also the CURLOPT_TIMEOUT option. 
```

所以，我会说默认超时是 300 秒。

# html - 样式标签的位置有什么区别（头部与身体）

> ID：14756778
> 
> 赞同：1
> 
> 时间：2013-02-07T17:04:03.240
> 
> 标签：html, css

样式标签所在的位置是否有任何差异（在速度/应用顺序方面）：

1) 头部 2) 开头的身体 3) 结尾的身体

更有趣的是，在运行时使用 javascript 动态添加样式标签（带有嵌入的 css 内容）。

# sql - 使用随机生成的数字创建临时表名

> ID：14756780
> 
> 赞同：3
> 
> 时间：2013-02-07T17:04:05.700
> 
> 标签：sql, sql-server, temp-tables, declare

到目前为止，我有这个代码：

```
declare @random int, @upper int, @lower int, @rndtb varchar(20)
set @lower = 1
set @upper = 999
select @random = ROUND(((@upper - @lower) * rand() + @lower),0)
select @rndtb = '##show'+cast(@random as varchar(20))+'' 
```

但这给了我

> 将 varchar 值“##show”转换为数据类型 int 时转换失败。

我想要实现的是每次执行查询时创建一个表##show+随机数。

例子 ：

```
##show01
##show78
##show43 
```

用@bluefeet 所说的进行了编辑，并找到了一种创建表格的方法

```
Declare @SQL VarChar(1000)

SELECT @SQL = 'Create Table ' + @rndtb + '('
SELECT @SQL = @SQL + 'ID int NOT NULL Primary Key, FieldName VarChar(10))'

Exec (@SQL) 
```

但是如何调用或插入此表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:05:48.850

由于要将参数添加`@random`到字符串，因此需要将其转换为 varchar，以便可以将其连接到字符串部分：

```
select @rndtb = '##show'+cast(@random as varchar(20))+'' 
```

您的完整代码将是：

```
declare @random int, @upper int, @lower int, @rndtb varchar(20)
set @lower = 1
set @upper = 999
select @random = ROUND(((@upper - @lower) * rand() + @lower),0)
select @rndtb = '##show'+cast(@random as varchar(20))+'' 
```

根据您的编辑，您将需要使用动态 sql 插入新表：

```
select @SQL = 'insert into '+@rndtb+'
        select *
        from yourtable'

exec (@sql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:08:03.743

用这个：

```
select @rndtb = '##show'+CONVERT(VARCHAR(20), @random, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:34:24.413

您需要动态 SQL

动态 SQL 的祸与福

[http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

# slony - 有没有办法限制 slony 日志传送文件的文件大小？

> ID：14756783
> 
> 赞同：1
> 
> 时间：2013-02-07T17:04:08.187
> 
> 标签：slony

我正在使用运行 Postgresql 8.1.3 和 Slony-I 复制系统（slon 版本 1.1.5）的 SuSE 机器（cat /etc/issue: SUSE Linux Enterprise Server 11 SP1 (i586)）。我们在这台服务器上的两个数据库之间有一个有效的复制设置，它正在生成要发送到我们负责维护的远程机器的日志传送文件。截至今天早上，我们遇到了这个问题。

一段时间以来，我们在这台机器上遇到了奇怪的内存问题——即使剩余大量可用内存，oom-killer 似乎也很惊人。这为我们当前的问题的发生奠定了基础 - 我们昨晚在系统上运行了大规模更新，同时关闭了复制。现在，就目前的情况而言，我们无法复制更改 - slony 正在尝试将所有更改编译到一个庞大的日志文件中，并且在运行大约半小时左右后，它遇到了 oom-killer 问题，该问题似乎重新启动了复制包。由于它一直在尝试重建同一个包，所以它永远不会到达任何地方。

我的第一个问题是：有没有办法限制 Slony 日志传送文件的大小，以便它写出不超过“X”字节（或 K，或 Meg 等），并且在超过该大小后关闭当前的日志传送文件并开始一个新的？在 oom-killer 以合理的规律性命中之前，我们已经能够达到大约 4 megs 的大小，所以如果我能把它限制在那里，我至少可以开始生成更小的文件，并希望最终能通过这个。

我想我的第二个问题是：有没有人有比我要问的更好的解决方案来解决这个问题？很有可能我在看问题时得到了隧道视野，而我真正需要的只是-a-解决方案，而不一定是-my-解决方案。

# python - 为什么在 Python 3 中未编译的、重复使用的正则表达式要慢得多？

> ID：14756790
> 
> 赞同：17
> 
> 时间：2013-02-07T17:04:42.677
> 
> 标签：python, regex, caching

在回答[这个问题](https://stackoverflow.com/q/14755882/20670)时（并阅读了类似问题的[答案](https://stackoverflow.com/a/452143/20670)），我认为我知道 Python 如何缓存正则表达式。

但后来我想我会测试它，比较两种情况：

1.  一个简单的正则表达式的单个编译，然后是该编译的正则表达式的 10 个应用程序。
2.  未编译的正则表达式的 10 个应用程序（我预计性能会稍差，因为正则表达式必须编译一次，然后缓存，然后在缓存中查找 9 次）。

然而，结果是惊人的（在 Python 3.3 中）：

```
>>> import timeit
>>> timeit.timeit(setup="import re", 
... stmt='r=re.compile(r"\w+")\nfor i in range(10):\n r.search("  jkdhf  ")')
18.547793477671938
>>> timeit.timeit(setup="import re", 
... stmt='for i in range(10):\n re.search(r"\w+","  jkdhf  ")')
106.47892003890324 
```

慢了 5.7 倍以上！在 Python 2.7 中，仍然增加了 2.5 倍，这也超出了我的预期。

正则表达式的缓存在 Python 2 和 3 之间是否发生了变化？[文档](http://docs.python.org/dev/library/re.html#re.compile)似乎没有暗示这一点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-07T17:16:59.423

代码*已*更改。

在 Python 2.7 中，缓存是一个简单的字典；如果其中存储了多个`_MAXCACHE`项目，则在存储新项目之前清除整个缓存。缓存查找只需要构建一个简单的键并测试字典，请参见[2.7 的实现`_compile()`](https://github.com/python/cpython/blob/53639dd55a0d5b3b7b4ef6ae839a98008f22e2d3/Lib/re.py#L230-L262)

在 Python 3.x 中，缓存已被[`@functools.lru_cache(maxsize=500, typed=True)`装饰器](http://docs.python.org/3/library/functools.html#functools.lru_cache)取代。这个装饰器做*了*更多的工作，包括一个线程锁、调整缓存 LRU 队列和维护缓存统计信息（可通过 访问`re._compile.cache_info()`）。请参阅 和 的3.3.0[实现`_compile()`](https://github.com/python/cpython/blob/e054f452bd9118def58c18aa295662c9845e1c89/Lib/re.py#L264-L274)[`functools.lru_cache()`](https://github.com/python/cpython/blob/e054f452bd9118def58c18aa295662c9845e1c89/Lib/functools.py#L174-L303)。

其他人也注意到了同样的减速，并在 Python bugtracker 中提交了[问题 16389](http://bugs.python.org/issue16389)。我希望 3.4 会再次快很多。要么`lru_cache`改进了实现，要么`re`模块将再次移动到自定义缓存。

更新：在[修订版 4b4dddd670d0 (hg) / 0f606a6 (git)](https://github.com/python/cpython/commit/0f606a636aabe2559525697d0df54ee347f947c0)中，缓存更改已恢复为 3.1 中的简单版本。Python 版本 3.2.4 和 3.3.1 包括该修订版。

从那时起，在 Python 3.7 中，模式缓存被更新为基于常规的[自定义 FIFO 缓存实现](https://github.com/python/cpython/blob/f6ab188323444fe0dd916ed3860cc5c8806caa16/Lib/re.py#L284-L311)`dict`（依赖于插入顺序，并且与 LRU 不同，在驱逐时不考虑缓存中已经存在的项目最近的使用情况）。

# arduino - 通过 AT 命令终止语音通话

> ID：14756791
> 
> 赞同：3
> 
> 时间：2013-02-07T17:04:43.843
> 
> 标签：arduino, gsm, at-command

我正在从事一个涉及 Arduino 和 TC35 GSM 模块的爱好项目，一切进展顺利，但我想知道是否有一个 AT 命令来终止语音呼叫（ATD + 电话号码；），因为我似乎在任何一个中都找不到我搜索过的文献。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:42:37.047

虽然“经典”命令`ATH`（无需为 ATH 提供数字参数）适用于断开呼叫，但请注意，`AT+CVHU=1`对于其他电话（TC35 似乎没有支持AT+CVHU）。

有一个`AT+CHUP`命令总是会挂断当前呼叫，与 ATH 行为配置无关。

[27.007](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)标准还定义了可用于断开呼叫的 AT+CHCCS（Hangup of current call）命令。也`AT+CHLD`可用于断开呼叫。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T17:07:10.583

我认为你的问题的答案是记忆中的 ATH0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:13:43.053

您正在寻找的命令是 ATH0（也是从我的记忆中挖掘出来的），但随后通过[官方文档确认](http://kurser.iha.dk/eit/mic1/MICDocs/tc35i_atc_0207.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-24T12:42:15.977

**ATH**命令仅**在呼叫被应答时才**结束呼叫。

**AT+CHUP命令****在应答与否时**结束呼叫

# iphone - 当按钮位于 UITableViewCell 上时，为什么 UIButton showsTouchWhenHighlighted 不起作用？

> ID：14756792
> 
> 赞同：2
> 
> 时间：2013-02-07T17:04:50.150
> 
> 标签：iphone, ios, uitableview, uibutton, touch

我把 a 放在 a`UIButton`上`UITableViewCell`并将其`showsTouchWhenHighlighted`属性设置为`YES`。单元格的选择样式为`UITableViewCellSelectionStyleNone`。我有一个选择器，当点击按钮并且工作正常时，它会被调用，因此按钮可以正常获取触摸事件。但是，按钮在触摸时不会显示高亮效果。

当我将此按钮放在 a 上`UIView`时，突出显示效果有效。

当按钮放在单元格上时，我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:53:18.830

您是将按钮添加到单元格还是 cell.contentView？contentView 属性的行为更像是一个常规的 UIView，这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T13:58:19.330

您需要在 Table View 上将 'delaysContentTouches' 设置为 NO

# git - Git push 无法推送到原点 - 没有这样的参考

> ID：14756796
> 
> 赞同：5
> 
> 时间：2013-02-07T17:05:01.620
> 
> 标签：git, git-flow, hotfix

我无法将使用`hotfix`创建的分支上的提交推`git-flow`送到远程存储库。

这是错误：

```
$ git push origin hotfix/MyHotfix
Counting objects:
... etc
To {my remote repo}
 ! [remote rejected] hotfix/MyHotfix -> hotfix/MyHotfix (no such ref)
error: failed to push some refs to {my remote repo} 
```

我`hotfix`用标准语法创建了：

```
git flow hotfix start MyHotfix 
```

并且这个分支已经存在于 上`origin`，我可以用`git branch -a`. 我还检查了分支是否仍然存在于远程服务器上，因为它在我运行`git remote show origin`.

有没有人遇到过这个问题`git`或者`git-flow`找到了解决方案？

注意 - 我尝试过的事情：

*   重新克隆远程仓库->同样的错误
*   删除本地分支->同样的错误
*   删除远程分支->我可以推送“新”分支，但是当我的同事尝试推送提交时，在本地仓库中会出现相同的错误（之后`git remote prune origin`）
*   强制推送->同样的错误
*   上游推送->同样的错误
*   检查 refs -> 我的提交父 id 与服务器匹配

更新：

`git ls-remote origin`并`git show-ref`为本地和远程修补程序分支显示不同的 refs，但这是因为我在本地有 1 个额外的提交，并且父提交的 ref 与 ref on 匹配`origin`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:02:32.317

看起来这实际上是服务器存储库的问题。在服务器上的裸仓库上运行这些步骤清除了错误：

```
git fsck --full
git prune
git gc 
```

注意：根据手册页`git prune`不需要，因为`git gc`调用它，但我正在尝试一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:21:36.023

考虑到[issue 92](https://github.com/nvie/gitflow/issues/92)，我不认为修补程序分支是要发布的。
这是一个仍在等待中的功能请求。

> 虽然`release`和`feature`分支都可以发布（`git flow release/feature publish`），但修补程序分支不能。

因此，推送本身可能已被阻止符合（已被拒绝）发布操作。

# javascript - 如果只有一个 div 有类，则事件

> ID：14756798
> 
> 赞同：0
> 
> 时间：2013-02-07T17:05:05.953
> 
> 标签：javascript, jquery, html

我有很多名为“.current”的类的 divlayers。取决于用户所做的一些删除类和一些会再次得到它。这很好用，但是如果只有一个 div 层具有“.current”类，我想要的是触发一个事件。我如何检测是否只有一个元素具有当前类？例如

```
if ($('#div4').hasClass('.current')) {
    alert("fire me something");
} 
```

诸如“是唯一的”之类的东西有类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T17:07:43.653

在您的事件回调中，只需检查具有`current`该类的 div 的数量：

```
if ($('#div4').hasClass('current') && $('div.current').length === 1) {
    ...do stuff...
} 
```

如果你只使用`current`on `div`s，那么你可以只使用`$('.current').length === 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:08:09.157

您应该能够使用 css 类作为选择器，然后获取长度：

```
if($(".current").length == 1 ) {
   alert('fire me something');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:08:32.370

请参阅[http://api.jquery.com/size/](http://api.jquery.com/size/)或[http://api.jquery.com/length/](http://api.jquery.com/length/)

```
$(".current").length
$(".current").size()   *deprecated as of v1.8 
```

要么给你计数。每当您调整类检查以查看计数并在其为 1 时触发动作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:08:54.217

我“认为”你可以这样做：

```
if($('.current').length == 1) { //DO } 
```

我相信选择器会返回一个元素数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:09:07.097

你有错误语法！您应该为您的情况添加一个“）”。并且不要使用 calss selecotr (".") 。这将起作用：

```
if($('#div4').hasClass('current')){
        alert("fire me something");
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T17:09:20.597

您可以通过使用长度来查看 .current 类的实例数量。例如

```
var mycount = $(".current").length;
alert(mycount); 
```

然后对结果做任何你喜欢的事情。

# java - JProgressBar 对话框

> ID：14756801
> 
> 赞同：1
> 
> 时间：2013-02-07T17:05:16.417
> 
> 标签：java, swing, progress-bar

我正在尝试创建一个弹出对话框进度条，最好是 Indeterminate 但这并不是太重要。我一直在浏览“Oracle 的 ProgressBar 教程”和 Google 搜索，但没有那么幸运地让它工作。我将我的代码粘贴到我的动作侦听器下面，并且不会弹出对话框。有什么建议么？提前致谢！

对不起，这是我在这个网站上的第一篇文章。但它的工作原理是，当我按下创建按钮时，它会从不同的服务器和目录中获取一些信息并为我创建一个文件。这就是新项目的内容。`JTextBox`功能是我创建的一个枚举，它使用创建按钮时的文本进行设置。问题是这个过程需要时间来处理，所以我想要一个进度条来显示它的处理

```
private class CreateButton implements ActionListener
{
    @Override
    public void actionPerformed(ActionEvent arg0) { 
        class Task extends SwingWorker<Void, Void>
        {
            @Override
            protected Void doInBackground()
            {                   
                //Set Variables
                for(Feature f : Feature.values())
                {
                    if(f.getComp() != null)
                    {
                        f.getVariable().setVariable(((JTextField) f.getComp()).getText());
                    }
                }

                new Project(jobs.getSelectedValue().split("-")[0].trim(), 
                            jobs.getSelectedValue().split("-")[1].trim(),
                            features);
                return null;
            }
        }

        ProgressMonitor pm = new ProgressMonitor(display, "Testing...", "", 0, 100);
        pm.setProgress(0);
        Task task = new Task();
        task.execute();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:32:16.820

我不确定您的[SSCCE](http://sscce.org)，所以我只是发布`JProgressBar`通常的工作方式。

了解[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)和[JProgressBar](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html)

在后台进程显示进度条。显示了它如何工作的简单示例。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;

public class MyProgressBarTest {
    private static final long serialVersionUID = 1L;

    private static JProgressBar progressBar;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            MyProgressBarTest obj = new MyProgressBarTest();
            obj.createGUI();
        }
    });
    }

    public void createGUI() {
        final JFrame frame = new JFrame();

        JPanel panel = new JPanel();
        final JButton button = new JButton("Progress");

        progressBar = new JProgressBar();

        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {

                MyCustomProgressBarDialog progressBarObj = new MyCustomProgressBarDialog(progressBar, frame);
                progressBarObj.createProgressUI();

                MyActionPerformer actionObj = new MyActionPerformer(progressBar, progressBarObj, button);
                actionObj.execute();

            }
        });

        panel.add(button);
        frame.add(panel);

        frame.setTitle("JProgressBar Example");
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.setLocationRelativeTo(null);
        frame.setSize(200, 300);
        frame.setVisible(true);
    }
}

class MyActionPerformer extends SwingWorker<String, Object> {

    JProgressBar fProgressBar;
    MyCustomProgressBarDialog progressDialog;
    JButton button;

    public MyActionPerformer(JProgressBar progressBar, MyCustomProgressBarDialog progressDialog, JButton button) {
        this.fProgressBar = progressBar;
        this.fProgressBar.setVisible(true);
        this.fProgressBar.setIndeterminate(true);
        this.button = button;
        this.progressDialog = progressDialog;

        this.button.setEnabled(false);
    }

    protected String doInBackground() throws Exception {

        calculateResult();
        return "Finished";
    }

    protected void done() {
        fProgressBar.setVisible(false);
        this.progressDialog.setVisible(false);
        this.button.setEnabled(true);
    }

    public void calculateResult() {
        for (int i = 0; i < 500000; i++) {
            System.out.println("Progress Bar: " + i);
        }
    }
}

class MyCustomProgressBarDialog extends JDialog {
    private static final long serialVersionUID = 1L;

    private static JProgressBar progressBar;
    private JFrame motherFrame;
    private JLabel label = new JLabel("loading.. ");
    private JButton button;

    public MyCustomProgressBarDialog(JProgressBar progressBar, JFrame frame) {

        this.progressBar = progressBar;
        this.motherFrame = frame;
        this.button = button;
    }

    public void createProgressUI() {
        add(label, BorderLayout.NORTH);
        add(progressBar, BorderLayout.CENTER);
        setSize(50, 40);
        setAlwaysOnTop(true);
        setLocationRelativeTo(motherFrame);
        setUndecorated(true);
        setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:12:06.000

这来自 ProgressMonitor 的 Oracle javadoc：

> 最初，没有 ProgressDialog。在第一个 millisToDecideToPopup 毫秒（默认为 500）之后，进度监视器将预测操作需要多长时间。如果它长于 millisToPopup（默认 2000，2 秒），则会弹出 ProgressDialog。

请注意，它不会在您创建后至少 1/2 秒后弹出。即使这样，它也只会在进程预计需要超过 2 秒时才会弹出。

这一切都基于您重复调用`setProgress(int)`以及在您给定的范围内值的进展之间的时间。

我怀疑导致对话框弹出的条件没有得到满足。或者，也许您的程序在这段时间过去之前就退出了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:30:49.020

您需要定义属性

```
ProgressMonitor pm; 
```

然后应该创建总进度大小

```
int totalProgress = Feature.values().size(); 
```

然后在循环中只是增加计数

```
int counter = 0;
for(Feature f : Feature.values())
{
  if (pm.isCanceled()) {
    pm.close();
    return null;
  }
  pm.setProgress(counter);
  pm.setNote("Task is " + counter*100/totalProgress + "% completed");
  counter++; 
```

调用进度监视器

```
pm = new ProgressMonitor(display, "Testing...", "", 0, totalProgress); 
```

假设大部分工作是在循环中完成的，如果其他部分（例如项目创建）需要时间，那么您可以`totalProgress`在功能完成后添加额外的百分比计数或重置监视器。

# tfs - visualstudio.com 的 tfs 找不到独家结帐设置

> ID：14756804
> 
> 赞同：0
> 
> 时间：2013-02-07T17:05:23.953
> 
> 标签：tfs

我不确定这是否是要问的地方，但我认为这里的人已经使用过它。

我们已经使用了几个星期，效果很好。我们遇到的唯一问题是找到您设置独家结帐的位置。

有谁知道这是否是 visualstudio.com tfs 的一部分？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:40:09.690

假设您安装了 Visual Studio 并安装了 Team Fooundation Client，（来自 VS2010 的屏幕截图）

选择团队 -> 团队项目设置 -> 源代码管理

![在此处输入图像描述](../Images/9432661007eea6b3c27a9366148c0b7c.png)

在出现的对话框中，取消选中“启用多个结帐”

![在此处输入图像描述](../Images/eb3d4aea0707132d16243926c87cceb7.png)

# jquery - 无法让 Coda Slider 工作

> ID：14756809
> 
> 赞同：0
> 
> 时间：2013-02-07T17:05:45.963
> 
> 标签：jquery, html, css, jquery-plugins, coda-slider

我一直在这2天了。我正在尝试使用[这个](http://kevinbatdorf.github.com/codaslider/)jQuery 插件设置一个简单的内容滑块。我想到的滑块只有 2 个面板（幻灯片），两者都应该有固定的高度和宽度。

我根据它的文档尝试过，一无所获。我下载了源代码并剖析了索引页面，删除了除滑块之外的所有其他 HTML，并处理了该结构以及所需的文件，但仍然无济于事，我现在完全感到沮丧。

下面是我现在的代码。

**HTML**

```
<html>
<head>
<title>Untitled Document</title>
<!--stylesheets-->
<link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/coda-slider.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/myStyles.css" />

<!--scripts-->
<script type="text/javascript" src="scripts/jquery.min.js"></script>
<script type="text/javascript" src="scripts/jquery-ui-1.10.0.custom.min.js"></script>
<script type="text/javascript" src="scripts/jquery.coda-slider-3.0.js"></script>

<script type="text/javascript">
$(function() {
    $('#main-slider').codaSlider({
      autoHeight: false,
      continuous:false,
      dynamicArrows: false,
      dynamicTabs: false
    });
    $('#showcase').codaSlider();
});

</script>
</head>
<body>

<div class="coda-slider"  id="main-slider"><!-- Main Slider -->
    <div>

          <div class="coda-slider"  id="showcase"><!-- Showcase Slider -->

                <div id="first"><!-- first panel -->
                 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at sollicitudin turpis. Fusce fermentum, odio vitae luctus mollis, tortor mauris condimentum leo, at interdum urna massa a orci. Class aptent taciti sociosqu ad litora torquent per conubiaCras vulputate libero ut lorem varius quis dignissim orci malesuada. Duis tempus feugiat libero at tempor. Integert felis ultrices et. Duis sit amet risus sed magna convallis mattis. Vestibulum congue, odio suscipit tempor vulputate, massa lectus dapibus massa, quis dictum mauris purus at velit.Pellentesque ligula erat, tincidunt ut ornare vitae, tincidunt porttitor eros. Cras consectetur tellus odio. 
                </div><!-- end of first panel -->

                <div id="second"><!-- second panel -->
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at sollicitudin turpis. Fusce fermentum, odio vitae luctus mollis, tortor mauris condimentum leo, at interdum urna massa a orci. Class aptent taciti sociosqu ad litora torquent per conubiaCras vulputate libero ut lorem varius quis dignissim orci malesuada. Duis tempus feugiat libero at tempor. Integert felis ultrices et. Duis sit amet risus sed magna convallis mattis. Vestibulum congue, odio suscipit tempor vulputate, massa lectus dapibus massa, quis dictum mauris purus at velit.Pellentesque ligula erat, tincidunt ut ornare vitae, tincidunt porttitor eros. Cras consectetur tellus odio. 
                </div><!-- end of second panel -->

          </div> <!-- End Showcase Slider -->

    </div>
</div><!-- End Main Slider -->

</body>
</html> 
```

**CSS**

```
body {
    background-color:#FC9;  
}

#main-slider {
    width:1000px;
    height:600px;
    background-color:#FFF;
    margin:80px auto;
}

]
#showcase {
    width:1000px;
    height:600px;
}

#first {
    width:1000px;
    height:600px;
    background-color:#CF6;
}

#second {
    width:1000px;
    height:600px;
    background-color:#F36;
} 
```

也许我只是忽略了一些东西。根据文档，它应该很容易。有人可以告诉我我在这里缺少什么吗？或者更好的是，如果不是太麻烦的话，可以举一个例子？我真的很感激！

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:14:42.117

我从未尝试过该插件，但您是否尝试过简单地更改

```
$(function() {
    $('#main-slider').codaSlider({
      autoHeight: false,
      continuous:false,
      dynamicArrows: false,
      dynamicTabs: false
    });
    $('#showcase').codaSlider();
}); 
```

进入

```
$(function() {
    $('#main-slider').codaSlider({
      autoHeight: false,
      continuous:false,
      dynamicArrows: false,
      dynamicTabs: false
    });
}); 
```

目前，您似乎正在尝试在滑块内创建一个滑块，但我从您的问题中感觉到这不是您的预期行为。

**加法：**忘了提也要改变这个：

```
<div class="coda-slider"  id="main-slider"><!-- Main Slider -->
    <div>

          <div class="coda-slider"  id="showcase"><!-- Showcase Slider -->

                <div id="first"><!-- first panel -->
                 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at sollicitudin turpis. Fusce fermentum, odio vitae luctus mollis, tortor mauris condimentum leo, at interdum urna massa a orci. Class aptent taciti sociosqu ad litora torquent per conubiaCras vulputate libero ut lorem varius quis dignissim orci malesuada. Duis tempus feugiat libero at tempor. Integert felis ultrices et. Duis sit amet risus sed magna convallis mattis. Vestibulum congue, odio suscipit tempor vulputate, massa lectus dapibus massa, quis dictum mauris purus at velit.Pellentesque ligula erat, tincidunt ut ornare vitae, tincidunt porttitor eros. Cras consectetur tellus odio. 
                </div><!-- end of first panel -->

                <div id="second"><!-- second panel -->
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at sollicitudin turpis. Fusce fermentum, odio vitae luctus mollis, tortor mauris condimentum leo, at interdum urna massa a orci. Class aptent taciti sociosqu ad litora torquent per conubiaCras vulputate libero ut lorem varius quis dignissim orci malesuada. Duis tempus feugiat libero at tempor. Integert felis ultrices et. Duis sit amet risus sed magna convallis mattis. Vestibulum congue, odio suscipit tempor vulputate, massa lectus dapibus massa, quis dictum mauris purus at velit.Pellentesque ligula erat, tincidunt ut ornare vitae, tincidunt porttitor eros. Cras consectetur tellus odio. 
                </div><!-- end of second panel -->

          </div> <!-- End Showcase Slider -->

    </div>
</div> 
```

进入

```
<div class="coda-slider"  id="main-slider"><!-- Main Slider -->
      <div id="first"><!-- first panel -->
           Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at sollicitudin turpis. Fusce fermentum, odio vitae luctus mollis, tortor mauris condimentum leo, at interdum urna massa a orci. Class aptent taciti sociosqu ad litora torquent per conubiaCras vulputate libero ut lorem varius quis dignissim orci malesuada. Duis tempus feugiat libero at tempor. Integert felis ultrices et. Duis sit amet risus sed magna convallis mattis. Vestibulum congue, odio suscipit tempor vulputate, massa lectus dapibus massa, quis dictum mauris purus at velit.Pellentesque ligula erat, tincidunt ut ornare vitae, tincidunt porttitor eros. Cras consectetur tellus odio. 
      </div><!-- end of first panel -->

      <div id="second"><!-- second panel -->
           Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at sollicitudin turpis. Fusce fermentum, odio vitae luctus mollis, tortor mauris condimentum leo, at interdum urna massa a orci. Class aptent taciti sociosqu ad litora torquent per conubiaCras vulputate libero ut lorem varius quis dignissim orci malesuada. Duis tempus feugiat libero at tempor. Integert felis ultrices et. Duis sit amet risus sed magna convallis mattis. Vestibulum congue, odio suscipit tempor vulputate, massa lectus dapibus massa, quis dictum mauris purus at velit.Pellentesque ligula erat, tincidunt ut ornare vitae, tincidunt porttitor eros. Cras consectetur tellus odio. 
      </div><!-- end of second panel -->

</div> 
```

# java - Java - 为什么将“null”分配给变量不能使其可用于 GC？（在此代码段中）

> ID：14756812
> 
> 赞同：3
> 
> 时间：2013-02-07T17:05:52.453
> 
> 标签：java, variables, null, garbage-collection

我正在阅读oracle提供的在线教程。其中一个练习有一个问题如下：

* * *

> 以下代码创建一个数组和一个字符串对象。代码执行后存在多少对这些对象的引用？任何一个对象都有资格进行垃圾收集吗？
> 
> ```
> ...
> String[] students = new String[10];
> String studentName = "Peter Smith";
> students[0] = studentName;
> studentName = null;
> ... 
> ```
> 
> 答案：有一个对学生数组的引用，并且该数组有一个对字符串 Peter Smith 的引用。两个对象都不符合垃圾回收条件。

（[http://docs.oracle.com/javase/tutorial/java/javaOO/QandE/objects-answers.html](http://docs.oracle.com/javase/tutorial/java/javaOO/QandE/objects-answers.html)）

* * *

当然最后一行意味着 studentName 有资格获得 GC 吗？真的很困惑，我认为这意味着我没有理解“null”的性质以及正确的对象引用，这就是我问的原因。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T17:07:26.620

在分配`null`to之前，`studentName`有两个对“Peter Smith”的引用（`studentName`和`students[0]`）。分配给 studentName后`null`，“Peter Smith”仍被`students[0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T12:55:04.427

实际上，哪些对象不能被垃圾收集？“Peter Smith”和 String[10] 数组。请注意，这些是对象本身，而不是对对象的引用！只存在一个引用就足以避免垃圾收集。

我使用了一个心理技巧，即在阅读代码时要冗长。当您的意思是“字符串对象”（字符串中的单词）或“字符串引用”（指向单词的变量）时，很容易说“字符串”（模糊），所以这个技巧避免了这种混淆。

用我的思维技巧重写伪代码，将所有内容标记为对象或引用我在脑海中的方式：

```
1 String[] OBJECT student REFERENCE = new String[10] OBJECT;
2 String OBJECT studentName REFERENCE = "Peter Smith" OBJECT;
3 students[0] REFERENCE = studentName REFERENCE;
4 studentName REFERENCE = null; 
```

在第 3 行中，String[0]_*引用*指向“Peter Smith”*对象。*现在很清楚，只有 studentName*引用*设置为 null，但“Peter Smith”*对象*继续存在，并且数组仍然指向它。因此，*对象*永远不会为空，只有一个引用为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T10:26:00.227

本页很好地解释了引用的基本 java 概念（以及它们本质上如何只是指针）

[http://javadude.com/articles/passbyvalue.htm](http://javadude.com/articles/passbyvalue.htm)

虽然不是关于这个问题，但它是直接相关的。对象在java中由指针（引用）引用。理解这一点应该会有很大帮助。

# c# - 当调用 get 参数时，Rhino 会嘲笑

> ID：14756813
> 
> 赞同：0
> 
> 时间：2013-02-07T17:05:56.123
> 
> 标签：c#, mocking, rhino-mocks

我有一个如下所示的存储库：

```
internal class Repository<T> : IRepository<T> where T : class
{
    public virtual ITable GetTable()
    {
        return _context.GetTable<T>();
    }

    public virtual void InsertOnSubmit(T entity)
    {
        GetTable().InsertOnSubmit(entity);
    }

    public virtual void SubmitChanges()
    {
        _context.SubmitChanges();
    }
} 
```

现在 System under Test 类如下所示：

```
public class CustomerHelper
{
    private readonly IRepository<Customer> _customerRepository;
    CustomerHelper(IRepository<Customer> customerRepository)
    {
        _customerRepository = customerRepository;
    }

    public void CreateCustomer(int createdBy, int customerId)
    {
        var customerToUpdate = _customerRepository.Get.Single(c => c.Id == customerId)

        customerToUpdate.CreatedBy =createdBy;
        customerToUpdate.CreateDate = DateTime.Now;

        _customerRepository.InsertOnSubmit(customerToUpdate);
        _customerRepository.SubmitChanges();
    }
} 
```

我对 CreateCustomer 方法的测试方法如下所示，使用 RhinoMocks。

```
[TestMethod]
public void CreateCustomer()
{
    // Arrange
    Customer customer = new Customer
    {
        Id = 1
    };
    IRepository<Customer> repository =  MockRepository.GenerateMock<IRepository<Customer>>();
    var customerList = new List<Customer> { customer }.AsQueryable();

    repository.Stub(n => n.Get).Return(nonLaborclassificationList);

    CustomerHelper helper = new Customer(repository);
    helper.CreateCustomer(1, customer.Id);

    // Now here I would liek to test whether CreatedBy, CreateDate fields on    cutomer are updated correctly. I've tried the below

    Customer customerToUpdate;

    repository.Stub(c => c.InsertOnSubmit(customer)).WhenCalled(c => { customerToUpdate = n.Arguments[0]; } );
    Assert.AreEqual(1, customerToUpdate.CreatedBy);
} 
```

上面的代码不起作用。我存根`InsertOnSubmit()`方法的地方，试图`customerToUpdate`从方法中获取实例`CreateCustomer()`。如何编写断言以确保`CreatedBy`正确`CreateDate`设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:20:34.853

您的代码中有两个问题：

1.  正如 Jeff Bridgman 在评论中所说，`nonLaborclassificationList`没有定义。我认为`customerList`应该返回。

2.  `InsertOnSubmit()`for在执行`repository`测试操作后被存根`helper.CreateCustomer(1, customer.Id)`。所以这个存根不起作用。
    存根应该在测试操作之前设置，因为*Arrange*在*Act*之前。

而且，当然，如果您想断言是否`CreatedDate`设置正确，则必须为此编写特定`Assert`的 :) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:05:42.863

一般的策略是这样的：

1.  存根存储库以返回您要更新的特定客户
2.  采取必要的行动，即`helper.CreateCustomer()`
3.  查看您最初存根的对象是否设置了正确的值

在这种情况下，您可能只需检查您创建的第一个 Customer 对象，该对象被存根到存储库中。您正在测试的实际代码使用相同的对象（相同的引用），因此您真的不需要从中获取对象的最后一段代码`InsertOnSubmit()`。但是，如果您仍然想这样做，您可以使用`AssertWasCalled`以下方式提供帮助：

```
repository.AssertWasCalled(
  x => x.InsertOnSubmit(Arg<Customer>.Matches(c => c.CreateBy)) 
```

对于调试，如果您可以使用调试器单步执行，还有一种`GetArgumentsForCallsMadeOn`方法很有用。

# batch-file - 写入另一个批处理文件的批处理文件

> ID：14756819
> 
> 赞同：-1
> 
> 时间：2013-02-07T17:06:09.757
> 
> 标签：batch-file

我要做的是编写一个批处理文件，当做出指定的答案时，它将转到另一个点并编写一个批处理文件，然后调用该批处理文件来运行。如果做出任何其他答案，它只是转到另一个点并遵循一系列是/否答案。

到目前为止，我已经制作了两个批处理文件。一个只是教我如何结合使用 set 和 if 命令。另一个是针对上述问题。

以下是批次的两个文本文件：

```
@echo off
echo What is your first and last name?
set /p answer
if /i {%answer%}=={Tyler Zieske} (call tyler.bat) 
```

第二个文件（tyler.bat）

```
@echo off
echo Are you from South Dakota?
set /p answer=Yes or No (Y/N)?
if /i {%answer%}=={y} (goto :yes)
if /i {%answer%}=={yes} (goto :yes)
goto :no
:yes
echo Your name must be Tyler Zieske
pause

:no
echo Are you a child?
set /p ans=Yes or No (Y/N)?
if /i {%ans%}=={y} (goto :tyler)
if /i {%ans%}=={yes} (goto :tyler)
goto :zieske
:tyler
echo Your name must be Tyler Zieske
pause

:zieske
echo You must not be Tyler Zieske
pause 
```

编辑：

如果我只是将文本从原始批处理文件复制到一个新的批处理文件中，而不是所有这些麻烦呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:54:44.533

你忘了问一个问题。

但我可以猜到，您的代码没有按预期工作。
您可以键入`Tyler Zieske`，但 goto 失败。

问题之一是这条线

```
 if /i {%answer%}=={Tyler Zieske} (goto :call
 ffff 
```

没有右括号。
而且您应该更改`{%answer}`为，`"%answer%"`因为您的变体无法正常工作。示例：如果答案的内容是，`abc`则扩展为

```
 if /i {Tyler}=={Tyler Zieske} (echo test) 
```

但这失败了，因为后面有一个空格`=={Tyler`，它被解释为命令而不是比较字符串的一部分。

带引号的空格被转义，因此仍然是比较字符串的一部分。

```
if /i "%answer%"=="Tyler Zieske" goto :myLabel 
```

# iphone - 通知中心缺少 iOS 应用程序

> ID：14756820
> 
> 赞同：14
> 
> 时间：2013-02-07T17:06:10.440
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

问题：应用程序没有出现在通知中心，安装完成后无法立即接收推送通知，应用程序通过 注册推送通知`registerForRemoteNotificationTypes:`。

细节：

*   该应用程序通常会在设备重新启动后出现在通知中心，之后一切正常。
*   有时应用程序会在安装和注册 APN 后立即显示在通知中心（我仍然无法确认这一点，但我想我偶然发现了这种情况）。
*   `registerForRemoteNotificationTypes`应用程序在每次用户登录和每次用户注销时调用该方法，分别使用位掩码 ( `UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound`) 和`UIRemoteNotificationTypeNone`.
*   `enabledRemoteNotificationTypes`返回正确的值。
*   最初我`unregisterForRemoteNotifications`在注销时使用了该方法，但`registerForRemoteNotificationTypes:UIRemoteNotificationTypeNone`由于怀疑者认为这可能导致问题，我将其更改为。
*   此问题发生在开发和临时构建中，无论应用程序是通过 xcode 还是 itunes 安装的。

任何想法和建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T03:19:06.577

这发生在我的一些设备上。（没有出现在通知中心，也没有收到推送。）

设法通过以下方式修复它：

*   删除应用
*   从设备中删除所有相关配置文件。设置应用程序 > 常规 > 配置文件，然后点击与您的应用程序相关的每个配置文件，然后点击删除。在不再存在该设置的 iOS 8/9 上，使用 XCode > Windows > 设备 > 选择设备 > 显示配置文件... > 然后删除配置文件
*   关闭手机，然后再打开。
*   给5分钟
*   重新安装您的应用程序，配置文件应该会自动安装。
*   启动应用程序并让它注册和填充。
*   再次测试推送通知

对我们来说，它并没有立即起作用，所以给它几分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:38:00.053

[从Apple的文档](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)中，分别在登录/注销时注册和注销应用程序可能存在问题：

> 应用程序应在每次启动时注册并为其提供者提供当前令牌。

并且不确定取消注册，他们没有在他们的编程指南中提到取消注册，也许应用程序永远不应该取消注册，服务器应该通过发送或不发送推送通知来处理这个问题，具体取决于用户是否登录。这就是我过去的做法，从未遇到过这个问题，所以也许这种方法也适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T04:15:27.127

好吧，我也有这个问题，我发现由于应用程序在之前的安装中卸载之前使用了 unregisterForRemoteNotifications。

And, in addition, if the application install again and login to register for the remote notifications, this problem will happen.

It happened also at the first install(installed after reset your iOS device). if you use the unregisterForRemoteNotifications before login, then register at the login operation, this problem will happen.

**As this problem happened, you need to restart the iOS device.**

For the unregisterForRemoteNotifications, we couldn't stop this problem, but we can reduce the probability of the occurrence of the problem, the method is:

**If the device token didn't delete from provider at the previous install, then use unregisterForRemoteNotifications at the current install before login; Otherwise, you should never use unregisterForRemoteNotifications.**

# magento - Magento - 具有许多属性的产品平面功能

> ID：14756822
> 
> 赞同：0
> 
> 时间：2013-02-07T17:06:16.247
> 
> 标签：magento, product, flat

因此，我们有一百多个可过滤属性，分为一百多个类别（每个类别大多 5-20 个）。平面表不能包含这么多键，因此无论如何都必须在产品列表和产品普通页面上查看 eav 表。

平板产品现在有用吗？我也可以将其关闭并节省可能的麻烦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:56:31.080

您的意思是，使用可过滤属性，您将它们用于目录和目录搜索中的分层导航？

如果您没有任何其他不需要所有属性（如畅销商品等）的列表。我不知道产品平面表在哪里可以帮助您。

# c# - 如何从 CLSID 中获取 Runtime Callable Wrapper 类的 System.Type？

> ID：14756823
> 
> 赞同：4
> 
> 时间：2013-02-07T17:06:16.793
> 
> 标签：c#, com, com-interop, rcw

**注意：**有关背景信息，请参阅此相关问题：[How to get LINQPad to Dump() System.__ComObject references？](https://stackoverflow.com/q/14716871/386205)

我*可以*使用[`IPersist.GetClassID()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688664%28v=vs.85%29.aspx).

[`Type.GetTypeFromCLSID()`](http://msdn.microsoft.com/en-us/library/980t1w1t%28v=vs.100%29.aspx)总是返回弱类型`System.__ComObject`，*而不是*强类型 RCW 类。

我需要获取[`System.Type`](http://msdn.microsoft.com/en-us/library/42892f65%28v=vs.100%29.aspx)强类型 RCW 类的 ，以便能够使用它来包装 COM 对象[`Marshal.CreateWrapperOfType()`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.createwrapperoftype%28v=vs.100%29.aspx)。

由于 COM 互操作的工作方式，这是可能的还是无法启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:32:23.577

好吧，这就是我最终作为概念证明而汇总的内容，实际上只是少数扩展方法。这依赖于 COM 对象实现`IPersist`并在当前加载的 PIA 中具有 RCW 类`AppDomain`。

```
internal static class ExtensionMethods
{
    internal static object ConvertToRCW(this object o)
    {
        var guid = o.GetCLSID();
        if (guid != Guid.Empty)
        {
            return Marshal.CreateWrapperOfType(o, o.GetTypeFromGuid(guid));
        }
        else
        {
            return o;
        }
    }

    internal static Guid GetCLSID(this object o)
    {
        Guid guid = Guid.Empty;
        var p = o as IPersist;
        if (p != null)
            p.GetClassID(out guid);
        return guid;
    }

    internal static Type GetTypeFromGuid(this object o, Guid guid)
    {
        var assemblies = AppDomain.CurrentDomain.GetAssemblies();
        foreach (var assembly in assemblies)
        {
            var types = assembly.GetLoadableTypes();
            foreach (var type in types)
            {
                if (type.GUID == guid)
                    return type;
            }
        }
        return o.GetType();
    }

    internal static IEnumerable<Type> GetLoadableTypes(this Assembly assembly)
    {
        try
        {
            return assembly.GetTypes();
        }
        catch (ReflectionTypeLoadException e)
        {
            return e.Types.Where(t => t != null);
        }
    }
} 
```

像这样使用：

```
var point = new ESRI.ArcGIS.Geometry.Point();
point.PutCoords(1, 1);
Console.WriteLine(point.GetType().FullName);
Console.WriteLine(point.Envelope.GetType().FullName);
Console.WriteLine(point.Envelope.ConvertToRCW().GetType().FullName); 
```

我得到以下输出：

```
ESRI.ArcGIS.Geometry.PointClass
System.__ComObject
ESRI.ArcGIS.Geometry.EnvelopeClass
```

这是预期的结果。现在让 LINQPad 玩得更好（我[原来的问题](https://stackoverflow.com/q/14716871/386205)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:44:08.783

`Type.GetTypeFromCLSID()`只返回一个动态 COM 包装器。

强类型 RCW 必须在 .NET 空间中定义。它必须是用[ComImportAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comimportattribute%28v=vs.100%29.aspx)修饰的类。.NET 不能自动创建这些类 ex-hihilo。它们是手动定义的（在 .NET 代码中）、PIA、tlbimp 或反射发射机制，例如所有 .NET 类型。COM CLSID 和 .NET 对应的类之间没有预设关系，因为可能有多个 .NET 类对应同一个 CLSID。

如果你有这些类型可用，你可以做的是扫描一组定义的命名空间并`Dictionary<Guid, Type>`从中构建一个。

# c++ - 在结构中保存一个整数数组。无法正确定义结构

> ID：14756826
> 
> 赞同：0
> 
> 时间：2013-02-07T17:06:28.447
> 
> 标签：c++, arrays, libharu

我想在我的结构中保存一个整数数组

```
struct HPDF_TableAttributes
{
    HPDF_REAL rows;
    HPDF_REAL cols;
    HPDF_REAL rowH;
    HPDF_REAL colW;
    HPDF_REAL tabX;
    HPDF_REAL tabY;
    HPDF_REAL tabH;
    HPDF_REAL tabW;
    HPDF_Font font;
    HPDF_REAL fontSize;
    int colRatios[];     /// HERE
}; 
```

似乎不管我怎么做，编译器希望我在这里初始化它？我必须这样做吗？我正在尝试按照以下方式做一些事情以供使用。

```
 HPDFTableAttributes oTACent;
    oTACent.rows = 3;   oTACent.cols = 3;
    oTACent.rowH = 20;  oTACent.colW = pageWidth-70/oTACent.cols;
    oTACent.tabH = oTACent.rows * oTACent.rowH;
    oTACent.tabW = oTACent.cols * oTACent.colW;
    oTACent.tabX = 35;  oTACent.tabY = pageHeight - oTACent.tabH - 45;
    oTACent.font = fontTimesBold; oTACent.fontSize = 20;
    oTACent.colRatios = [1, 1, 2];  /// HERE 
```

然后我将这些属性发送到我的函数，它使我成为一个表，并使用这个整数数组中的值与沿相同行的间隔列的比率。

```
void CReport::putTableOnPdf(HPDF_Page page, HPDFTableAttributes tabAtt, array_2d<CString> tabDat)
 {
     // Table Outline
     HPDF_Page_SetLineWidth (page, 1);
     HPDF_Page_Rectangle (page, tabAtt.tabX, tabAtt.tabY, tabAtt.tabW, tabAtt.tabH);
     // Table row lines
     HPDF_REAL rowsPut = 0;
     while(rowsPut < tabAtt.rows)
     {
         rowsPut++;
         HPDF_Page_MoveTo (page, tabAtt.tabX, tabAtt.tabY + rowsPut*tabAtt.rowH);
         HPDF_Page_LineTo (page, tabAtt.tabX + tabAtt.tabW, tabAtt.tabY + rowsPut*tabAtt.rowH);
     }
     // Table col lines
     /*int colRatioSum = 0;
     for(int i = 0; i < tabAtt.colRatios.length; i++)
         colRatioSum += tabAtt.colRatios[i];
     tabAtt.colW = tabAtt.colW / colRatioSum;*/ /// HERE
     HPDF_REAL colsPut = 0;
     while(colsPut < tabAtt.cols)
     {
         colsPut++;
         HPDF_Page_MoveTo (page, tabAtt.tabX + colsPut*tabAtt.colW, tabAtt.tabY);
         HPDF_Page_LineTo (page, tabAtt.tabX + colsPut*tabAtt.colW, tabAtt.tabY + tabAtt.tabH);
     }
     HPDF_Page_Stroke (page);
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:11:55.057

在 C++ 中，数组的大小是其类型的一部分。* 有一条特殊规则允许数组声明从初始化程序中推断出它的大小，因此您不必总是显式地编写类型。

在某些情况下，您还可以编写和使用*不完整*类型，但您不能对它们做任何需要完整类型的事情。

所以这里的问题是你正在编写一个不完整的类型并使用它做一些需要完整类型的事情（即声明该类型的对象）。添加初始化程序是声明数组大小并因此完成类型的一种方法，从而避免了错误。

如果您真正想说的是“最后一个字段是整数的集合”，那么您需要使用可以表示它的类型（同样，数组具有固定数量的元素）。在 C++ 中，最明显的解决方案是`std::vector<int>`. 使用`std::vector`您几乎可以完全编写伪代码：

```
oTACent.colRatios = {1, 1, 2}; 
```

您可能会看到但不应该写的另一种选择是使用指针。C++ 的定义使得您可以像使用数组一样使用指向数组元素的指针。由于指针类型不包括数组大小，因此相同的指针类型可以用于任何大小的数组。

^(* 一些编译器支持可变长度数组成员作为扩展，其中数组的大小是在初始化结构时确定的，但这不是标准 C++，它仍然需要在初始化时知道​​大小（而不是稍后分配，就像在您分配给数组的伪代码中一样）。还有另一个名为“灵活数组”的扩展，其中最后一个成员可以在没有大小的情况下声明，然后您手动为整个结构分配足够的内存，再加上您希望数组的大小。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:15:21.350

数组的大小必须在声明时知道，因为它是它的类型的一部分。因此，您应该将其更改为：

```
int colRatios[3]; 
```

此外，分配给数组的方式与您尝试的方式不同：

```
oTACent.colRatios = [1, 1, 2]; 
```

C++ 中没有这样的语法。如果您想轻松地分配这样的值，可以使用 C++11 和 std::vector：

```
std::vector<int> colRatios;
// ...
oTACent.colRatios = {1, 1, 2}; 
```

# excel - 如何根据A中单元格的值制作C列中的当前单元格

> ID：14756828
> 
> 赞同：1
> 
> 时间：2013-02-07T17:06:35.843
> 
> 标签：excel, vba, excel-formula, excel-2010, formula

这解释起来很混乱，所以如果我解释得不够好，请原谅。

在 A 列中有人名。在 C 列中是公式所在的位置。

```
if cell A2:A10 start with letter Q then c2:c10 will be = E2:E10

if cell A11:A20 start with letter B then c11:c20 will be = G2:G10 
```

**QData & Bdata 是随机列 Lenth**

我尝试编写 1 行公式，但没有用。

在c2中并向下拖动公式

```
=if(left(a2,1)="Q",O2,if(left(a2,1)="B",P2,"mORE IF COND")) 
```

![在此处输入图像描述](../Images/4076ae08ab5b857a79391519145a6ae4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:17:54.713

如果我正确理解了输入 - 你需要这样的东西：

```
=IF(LEFT(A2,1)="Q",INDIRECT("O"&ROW(A2)),IF(LEFT(A2,1)="B",INDIRECT("P"&ROW(A2)),A2)) 
```

如果 A 中的单元格既不匹配“Q”也不匹配“B” ，请添加而不是`A2`您喜欢的任何输出。

**已编辑**根据更改的要求进行更新：

```
=IF(LEFT(A2,1)="Q",INDIRECT("O"&ROW(A2)),IF(LEFT(A2,1)="B",INDIRECT("P"&(1+COUNTIF($A$2:A2,"Boy"))),A2)) 
```

示例文件：[https ://www.dropbox.com/s/izrjcvgix752klw/QueenBoyIF.xlsx](https://www.dropbox.com/s/izrjcvgix752klw/QueenBoyIF.xlsx)

# ios - 如何到达发件人的父视图？

> ID：14756830
> 
> 赞同：3
> 
> 时间：2013-02-07T17:06:39.773
> 
> 标签：ios, objective-c, cell

我在自定义单元格中有一个按钮。当点击按钮时，通过模态 segue 呈现一个视图。

所以，这是我的问题，在 prepareForSegue:sender: 我想拉出包含我按下的按钮（发件人）的单元格的 indexPath。如何获取该单元格的 indexPath？

我以为我可以做类似的事情：

```
UITableViewCell * cell = sender.parent 
```

显然它不是那样工作的。

请帮帮我。

**更新**感谢@rmaddy，我已经尝试`[[sender superview] superview]`并到达了按钮所在的单元格以及它的indexPath。谢谢你们的回答！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T17:10:32.993

假设`sender`是`UIVIew`某种类型的 a （例如 a `UIButton`），那么：

```
UIView *parentView = [(UIView *)sender superview]; 
```

如果您确定按钮的超级视图是表格单元格，那么您可以执行以下操作：

```
UITableViewCell *cell = (UITableViewCell *)[(UIView *)sender superview]; 
```

获得单元格后，请使用表格视图的`indexPathForCell:`方法。

请记住，如果您实际上将按钮添加到单元格`contentView`或单元格的其他子视图中，那么从按钮中获取单元格会有点棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:10:19.950

`superview`您可以使用该属性访问视图的超级视图，以便

```
sender.superview 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:12:17.887

只需添加 cellForRow... 方法

```
cellButton.tag = indexPath.row; 
```

并在按下此按钮或您有该按钮的参考时取回它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:14:04.907

试试这个

```
UIButton *btn = (UIButton*)sender;
UITableViewCell * cell = (UITableViewCell*)[btn superview];
NSIndexPath *indx = [myTable indexPathForCell:cell]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-25T18:30:14.177

单元格中添加了一个隐藏元素：`UITableViewCellScrollView`。在和 内容视图`UITableViewCellScrollView`之间添加。`UITableViewCell`第一个发送者超级视图将返回一个`UIView`与内容视图对应的对象。第二个 superview 将返回 an `UITableViewCellScrollView`，第三个 superview 将返回`UITableViewCell`。然后使用该`indexPathForCell`方法获取单元格的索引。

```
UITableViewCell *cellView = (UITableViewCell *)[[[sender superview] superview] superview];
NSIndexPath *indexPath = [self.tableView indexPathForCell:cellView]; 
```

# c# - ASP.Net MVC3 EF 4.1 模型代码第一父 ID 构造

> ID：14756831
> 
> 赞同：0
> 
> 时间：2013-02-07T17:06:50.207
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我有这些课程：

```
public class Event
{
  [Key]
  public int ID { get; set; }

  [Required]
  public string Name { get; set; }

  [Required]
  public DateTime Begin { get; set; }

  [Required]
  public DateTime End { get; set; }

  public string Description { get; set; }

  public virtual ICollection<EventRegistration> Registrations { get; set; }

  public virtual ICollection<EventComment> Comments { get; set; }
}

public class EventComment
{
    [Key]
    public int ID { get; set; }

    [Required]
    public int PersonID { get; set; }

    [Required]
    public int EventID { get; set; }

    [Required]
    public DateTime EntryDate { get; set; }

    [Required]
    public string Comment { get; set; }

    public int? ParentCommentID { get; set; }

    public virtual Event CommentEvent { get; set; }

    public virtual Person CommentPerson { get; set; }

    public virtual EventComment ParentComment { get; set; }

    public virtual ICollection<EventComment> ChildComments { get; set; }

} 
```

在上下文中，我有以下内容：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
 { 
     modelBuilder.Conventions.Remove<PluralizingTableNameConvention>(); 
     modelBuilder.Entity<EventComment>()
                 .HasMany(s => s.ChildComments)
                 .WithOptional()
                 .HasForeignKey(s => s.ParentCommentID);
 } 
```

EventComments 和子项被正确加载。但是每个事件都会加载具有该 EventID 的所有 EventComments。Event 类应该只加载没有 ParentID 的 EventComments。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:16:12.013

如果我理解正确，你正在做类似的事情

```
var event = (from e in ctx.Event.Include(p=>p.EventComment) select e); 
```

并且您不希望加载*所有*EventComments，只需要加载特定的 EventComments。

不幸的是，EF 没有提供过滤 .Include 的机制。

但是，您可以使用此处概述的投影：

[https://stackoverflow.com/a/5666403/141172](https://stackoverflow.com/a/5666403/141172)

# web - 没有按照 Microsoft 的说明显示发布 Web 向导

> ID：14756832
> 
> 赞同：5
> 
> 时间：2013-02-07T17:06:55.417
> 
> 标签：web, visual-studio-2012, publish

根据此[页面](http://msdn.microsoft.com/en-us/library/dd465337.aspx)，“右键单击项目并选择发布（或网站项目的发布网站）以打开发布 Web 向导”。然后出现的内容看起来与该页面上显示的内容完全不同，而是我得到了这个：![在此处输入图像描述](../Images/04a4987ccc0c70dea09cdaf80a0c8746.png) 它看起来与 MS 页面上描述的“发布 Web 向导”完全不同。我已经尝试了该页面上的许多选项，但没有一个会导致要求我导入主机的“发布配置文件”。

是否有其他方法可以访问发布 Web 向导，以便导入主机的“发布配置文件”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:48:24.743

尝试安装此更新：http: [//msdn.microsoft.com/library/jj161045](http://msdn.microsoft.com/library/jj161045)

我有同样的问题。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T18:23:11.250

AFAIK，发布 Web 向导（就像您提供的链接中显示的那样）仅适用于 Web 应用程序项目，不适用于网站项目，而您原始问题中的屏幕截图是 Visual Studio 中提供的用于发布的工具网站。[就我而言，我发现按照此处](https://www.youtube.com/watch?v=oAvBR2NPqmQ)给出的建议将网站项目转换为 Web 应用程序项目很有用，并在 LearnAsp4.com 网站上进行了详细解释。希望它可以帮助某人:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-05T03:23:49.130

我在 App_Data 下有一个现有的发布配置文件，它在 pubxml 中有一个无效的路径，删除它或修复路径为我修复了它。我通过转到“查看 > 其他 Windows > Web 发布活动”然后选择现有的或尝试从下拉列表中创建新的配置文件找到了这一点。然后，这给了我一条“构建 > 发布 Web 应用程序”没有的错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-25T16:12:16.850

嗨，从 Microsoft 网站下载 VS 2012 的升级 5 并安装可执行文件。然后 VS 2012 将显示发布向导，如 Web 应用程序所示。

# yii - 易。根据角色获取用户

> ID：14756833
> 
> 赞同：0
> 
> 时间：2013-02-07T17:06:56.087
> 
> 标签：yii, rbac

我正在使用本机`CDbAuthManager`在我的 web 应用程序中实现 RBAC。如何获取所有有权执行角色的用户？假设我有名为`updateprofile`. 我想获得分配给该角色的所有用户。我搜索了文档并找不到功能。

（我知道我可以遍历所有用户模型并循环执行`checkAccess()`，`foreach`但我更喜欢更好的解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T11:48:12.763

像这样的代码

```
class AuthAssginment extends CActiveRecord{.....
    public function getUsersBaseOnRole($role) {
         return Yii::app()->db->createCommand()
                    ->select('userid')
                    ->from($this->tableName())
                    ->where('itemname=:role', array(
                        ':role' => $role,))
                    ->queryAll() ;

}.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T00:46:07.370

我发现最简单的方法是创建一个映射到您的 auth_assignment 表的 AuthAssignment 模型。然后，您可以为其设置关系、范围等，并使用它进行查询以检索所有用户模型。auth_assignment 表并没有什么特别之处（因为它主要只是其中的角色）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T08:51:23.760

我认为其他答复不会给您完美的结果，因为角色可以是分层的，因此您不能使用直接查询或关系。我运作良好的解决方案是：

```
// list all users with 'userManagement' role
if($users = Users::model()->findAll()) {
    foreach($users as $id => $user) {
        if(!$user->checkAccess('userManagement')) {
            unset($users[$id]);
        }
    }
    $users = array_values($users); // to reset indices (optional)
} 
```

# sql - 从具有多个主键的表创建视图

> ID：14756835
> 
> 赞同：0
> 
> 时间：2013-02-07T17:06:56.640
> 
> 标签：sql, postgresql, create-view

我有一张这样的桌子：

```
Column          |         Type          | Modifiers

 username       | character varying(12) | not null

 electioncode   | integer               | not null

 votes          | integer               | default 0

PRIMARY KEY (username, electioncode) 
```

如果我使用此查询，我需要使用用户名、选举代码、最大（投票）创建一个视图，它可以正常工作但没有用户名：

**通过选举代码从表组中选择选举代码，最大（投票）；**

如果我添加用户名，它会要求我将其添加到组中，但如果我这样做，它会给我整个表格，而不仅仅是 username-electioncode-maxvotes

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:10:26.273

您想获得与此票数相关联的用户名吗？或者给定选举代码中的任何用户名？

如果是第一个：

```
SELECT
    DISTINCT ON ( electioncode )
    *
FROM table
ORDER BY electioncode, votes desc; 
```

如果另一个：

```
SELECT
    electioncode,
    min(username),
    max(votes)
FROM
    table
GROUP BY electioncode; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:11:16.473

您的用户名字段似乎是唯一的。每条记录都有不同的用户名（我假设），因此当您按用户名分组时，它将为您提供所有记录。您正在尝试做的事情是逻辑问题而不是语法问题。

一个建议：你想在一张纸上写下你想看到的输出，然后构造查询......如果你想要用户名、选举代码和最大（投票），那么想象一下你将如何显示两个用户名的数据 - user1 和 user 2 有选举代码 001 并分别投票 1？你会如何展示这个？

# javascript - HTML1121：不允许使用代码页 unicode，只允许代码页 utf-8

> ID：14756837
> 
> 赞同：0
> 
> 时间：2013-02-07T17:07:07.460
> 
> 标签：javascript, windows, html, windows-8, character-encoding

当我试图让我的 HTML5 应用程序在本机 Windows 8 应用程序中运行时，我在 Visual Studio 2012 中看到此错误：

*HTML1121：不允许代码页 unicode，只允许代码页 utf-8。*

显然这是一个字符编码问题，但我不熟悉 unicode 和 UTF-8 之间的区别。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:55:47.033

如果您要从 VS 外部将文件带入项目，请使用 VS 和“***将文件名另存为***”功能，然后从“***保存***”下拉菜单中选择“***使用编码保存”。***选择 UTF-8 编码。这通常会解决您遇到的问题。

 *应用程序包中包含的所有 JavaScript 文件（扩展名为 .js 的文件）都将转换为 JavaScript 引擎可以直接使用的字节码。这需要 UTF-8 编码，IIRC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T21:35:27.447

当微软说`Unicode`它们通常是指 UTF-16 时：

> ... UTF-16（宽字符）编码，这是 Unicode 最常见的编码，也是 Windows 操作系统上用于本机 Unicode 编码的一种。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd374081(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374081(v=vs.85).aspx)

designMode 标志最终迫使浏览器回退到 UTF-16，而 Windows 8 需要 UTF-8（迁移到 UTF-8 的决定是相对较新的）。您最好的选择是关闭 designMode 并重新设计页面

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T12:01:34.780

Unicode 是一种标准。它将字符分配给抽象代码点。但还有更多，大部分工作实际上是为这些代码点创建属性以及定义它们之间的关系。

例如，字符`A`(LATIN CAPITAL LETTER A) 分配给 code point `U+0041`。为此代码点定义的属性包括，例如，它的 General Category 是`Letter, Uppercase`，并且它是从左到右编写的。它与代码点有关系`U+0061`，即`U+0061`它的小写映射。这就是Unicode。

有用于将这些**抽象****代码****点**映射到计算机中的实际具体字节的 Unicode 转换格式。这就是指定编码、“代码页”或“字符集”时相关的内容。您应该使用 UTF-8。

此外，在某些 Microsoft 上下文中，“Unicode”实际上可以指代编码 UTF-16LE。*

# ssas - 来自平面表的 SSAS 多维数据集

> ID：14756846
> 
> 赞同：0
> 
> 时间：2013-02-07T17:07:40.427
> 
> 标签：ssas, cube, flat, denormalized

我想弄清楚是否可以快速构建一个 SSAS 多维数据集，以便仅从一张巨大而宽的表中进行原型设计，而无需执行任何 ETL 和自定义 SQL。甚至可能吗？

我们正在尝试做的是，我们有一堆针对不同主题领域的表格，这些表格被非规范化，并且付出了很多努力来创建和测试它们。我们现在需要一种快速访问这些数据并运行分析查询的方法，但在我们花时间进行 ETL/维度设计之前，我们想构建一个快速多维数据集。

请不要推荐 PowerPivot 或任何其他内存工具 - 这些表非常大，我们可以使用的 RAM 非常有限，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:26:53.800

是的，这是可能的。只需使用同一个表来创建维度和多维数据集（度量值组）。在生产中这样做并不理想，但对于原型制作应该没问题。

在这种情况下，我总是使用另一种替代方法，即在宽表之上创建 SQL 视图以模仿维度和事实（维度模型）。并在数据源视图中使用视图。如果您有时间可以花在创建视图上，这是最好的方法。因为在原型结束时，您知道模型和功能正在工作，并且您只需要在准备好在生产中实施时创建物理数据仓库和 ETL。

# excel - 将超出轴最大值的数据点绘制为最大值

> ID：14756849
> 
> 赞同：0
> 
> 时间：2013-02-07T17:07:45.247
> 
> 标签：excel, charts, plot, outliers, vba

我有一组自动生成的图表，我需要稍微调整一下。我的 Y 轴从 0 到 1000，但我有一些超出此范围的值。对于超过 1000 的值，我想在 1000 处绘制一个点，以提醒用户数据存在的事实。

一个期望的特性：如果可以根据单元格值（即大于 1000 的单元格值）更改单个数据点的格式，那就太棒了；这不是必需的，但它会使查看数据（近 100 个图表）变得更加容易。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:53:32.560

您可以在散点图上实现此效果，方法是在现有系列超过 1000 且其他地方有空白处添加一个值为 1000 的新数据系列。必须对每个轴的值超过您设置的最大值执行此操作。

例如，这是一个小型数据集，如果散点图上的最大 Y 值设置为 10，则需要额外的数据系列。

![新系列的数据](../Images/286230e67c7588d8e1e7b9595b8b07fd.png)

当您将新的 Y 系列添加到图表时，您需要指定添加的 Y 系列范围和原始 X 系列范围。如果您希望图例表明新数据点的含义，请提供描述性系列名称，

![将新系列添加到图表中](../Images/e811026712142e12816e88c12c38e5da.png)

这是图表的（略微）清理版本，其中设置了 Y 轴最大值和新数据点的图例条目。如果超过最大值的点在 X 轴上，您将经历类似的过程。

![新图表](../Images/7fd6bfc9fe0db52ec93973b3d2a35d6f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:01:50.657

如果您使用宏来构建图表，您介意先使用宏向数据中添加其他列吗？你可以添加两个额外的列，第一列有这个简单的代码来调整你的一些数据：

```
ActiveCell.FormulaR1C1 = "= IF(RC[-1]>999, 1000,RC[-1])"
....then fill down 
```

然后下一列有一个简单的数据点计数（稍后用于查找您正在修改的点）：

```
Dim i as integer
Dim rng As Range

Set rng = Range("Your Range")
For Each Cell In rng
i = i + 1
cell.value = i
Next 
```

现在像使用宏一样绘制图表，但现在您使用的是调整值列。并添加此格式化宏：

```
Dim rng As Range
Dim Point As String

Set rng = Range("c2:c9")
For Each Cell In rng

If Cell.Value > 999 Then
Point = Cell.Offset(0, 1).Value

ActiveSheet.ChartObjects("Your Chart").Activate
ActiveChart.SeriesCollection(1).Select
ActiveChart.SeriesCollection(1).Points(Point).Select
Selection.MarkerStyle = -4105
    With Selection
    .MarkerStyle = 2
    .MarkerSize = 25
    .MarkerColor = 'Your Color (could base this off of the degree that it is above 1k)
    End With
End If
Next 
```

这有点强化系统，但它会给你你需要的东西。

祝你好运。

-ZL

# java - Java：数组列表 >

> ID：14756868
> 
> 赞同：1
> 
> 时间：2013-02-07T17:08:30.080
> 
> 标签：java, arraylist, hashmap

有没有更好的方法在 Java 中执行以下操作，而不使用外部库。

我需要对 int（原始）的组/子（树状）结构进行建模。在 Json 中

```
[{1,1}, {1,2}, {2,1},{3,1}] 
```

我需要支持添加/删除元素（元素是一对 {group, child} ）而不重复。

我在想，保持一个数据结构。

```
ArrayList<HashMap<Integer,Integer>> 
```

加上。

遍历 ArrayList，对照要插入的值检查 HashMap 键和值，如果不存在则插入。

删除：

遍历 ArrayList，对照要删除的值检查 HashMap 键和值，如果存在则删除。

标准库是否有更好的数据结构/方法。

* * *

根据以下答案之一，我开设了这样的课程。请让我知道有什么要注意的。我期待（并将尝试）arraylist 将通过使用 KeyValue 类中的 equal 方法正确处理添加/删除。谢谢。

```
 static class KeyValue {
        int groupPos;
        int childPos;

        KeyValue(int groupPos, int childPos) {
            this.groupPos = groupPos;
            this.childPos = childPos;
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;

            KeyValue keyValue = (KeyValue) o;

            if (childPos != keyValue.childPos) return false;
            if (groupPos != keyValue.groupPos) return false;

            return true;
        }

        @Override
        public int hashCode() {
            int result = groupPos;
            result = 31 * result + childPos;
            return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:12:21.990

如果我了解您要做什么，这可能会更简单：

```
TreeMap<Integer,TreeSet<Integer>>
  or
HashMap<Integer,HashSet<Integer>> 
```

所以，而不是

```
[{1,1}, {1,2}, {2,1}, {3,1}] 
```

你会有

```
[{1, {1, 2}},
 {2, {1}},
 {3, {1}}] 
```

请注意，上述所有 4 个类都会自动处理消除重复项。

加上：

```
TreeMap<Integer, TreeSet<Integer>> map;
TreeSet<Integer> set = map.get(group);
if (set == null) // create it if it doesn't exist
{
  set = new TreeSet<Integer>();
  map.put(group, set);
}
set.add(child); 
```

去除：

```
TreeMap<Integer, TreeSet<Integer>> map;
TreeSet<Integer> set = map.get(group);
set.remove(child);
if (set.isEmpty()) // remove it if it is now empty
  map.remove(group); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:15:36.933

您可以编写一个具有名称的类，该类具有`KeyValue`两个属性来保存组和子项。将`KeyValue`对象添加到`ArrayList`. 对于 CRUD 操作，您可以在 KeyValue 对类中实现`equals`和。`compare`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:20:49.077

取而代之的是`HashMap`，使用一个带有两个将实现接口`Pair`的字段调用的类。然后实现/覆盖它的,和方法。然后使用 a或根据您的需要来持有它们。实施后，您也可以灵活地轻松排序。`{group,child}``Comparable``equals()``hashCode()``compareTo()``List<Pair>``Set<Pair>``compareTo()``Pairs`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:42:15.263

我是数据结构世界的新手，但我认为我们可以基于没有两个 Set 对象相似的假设来使用它

设置validSet=new HashSet(); // 这里使用泛型

HashSet 将为添加/删除/包含提供恒定的时间

```
SomeObject{
     Integer parent ;
     Integer child;
     //define equals method based on your requirement
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:56:26.383

按照你的问题，我认为你想展示这条线

```
[{1,1}, {1,2}, {2,1},{3,1}] 
```

作为

> Group 1-> 1 , 2 (来自前两对)
> Group 2-> 1(来自第三对)
> Group 3-> 1 (来自第四对)

最适合存储此层次结构的数据结构是：

```
Map<Integer,Set<Integer>> map = new HashMap<Integer,Set<Integer>>(); 
```

地图`key`部分存储组号的位置。地图的`value`一部分是存储`TreeSet`该组的孩子。
作为代码示例：

```
import java.util.HashMap;
import java.util.ListIterator;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;
class  TreeLike
{
    public static void main(String[] args) 
    {
        Map<Integer,Set<Integer>> map = new HashMap<Integer,Set<Integer>>();
        int groups[] = {1,2,3,4,5,6,7};
        //To add new group in map
        for (int i = 0 ; i < groups.length; i++)
        {
            Set<Integer> child = new TreeSet<Integer>();
            child.add(1);child.add(2);child.add(3);child.add(4);child.add(5);
            map.put(groups[i],child);
        }
        //To add new child(8) to a group (say group 1)
        Set<Integer> child = map.get(1);
        if (child != null)
        {
            child.add(8);
            map.put(1,child);
        }

        //To remove a child (say child 4) from group 3
        child = map.get(3);
        if (child != null)
        {
            child.remove(4);
            map.put(1,child);
        }
        //To Iterate through all trees
        Set<Map.Entry<Integer,Set<Integer>>> entrySet = map.entrySet();
        Iterator<Map.Entry<Integer,Set<Integer>>> iterator = entrySet.iterator();
        while (iterator.hasNext())
        {
            Map.Entry<Integer,Set<Integer>> entry = iterator.next();
            int group = entry.getKey();
            Set<Integer> children = entry.getValue();
            System.out.println("Group "+group+" children-->"+children);
        }
    }
} 
```

# php - PHP/CSS 邮件发送到 index.html#

> ID：14756871
> 
> 赞同：0
> 
> 时间：2013-02-07T17:08:36.480
> 
> 标签：php, javascript, html, ajax

我一直试图让它工作一段时间，我尝试了很多东西来尝试解决问题，但我可能只是让事情变得更糟。我遇到的问题是，当我提交联系表单时，它不会发送消息，它只是将我重定向到“index.html#”

我已经在下面发布了我的网站的代码。如果你们能看到我遗漏的任何东西，请告诉我怎么回事。

头部 HTML

```
<script src="js/jquery.validationEngine-en.js" type="text/javascript"></script>
    <script src="js/jquery.validationEngine.js" type="text/javascript"></script>

    <script>
    $(document).ready(function() {
    // SUCCESS AJAX CALL, replace "success: false," by:     success : function() { callSuccessFunction() }, 
        $("#form1").validationEngine({
            ajaxSubmit: true,
                ajaxSubmitFile: "ajaxSubmit.php",
                ajaxSubmitMessage: "Thank you, We will contact you soon !",
            success :  false,
            failure : function() {}
        })
    });
    </script> 
```

正文 HTML (index.html)

```
 <div id="contact">
            <h3>need more info?</h3>
            <form action="#" method="post">
                <fieldset>
                    <p>
                      <label for="name">Name:</label>
                  </p>
                    <p>
                      <input type="text" id="name" placeholder="Enter your full name" />

                      <label for="email">Email:</label>
                  </p>
                    <p>
                      <input type="email" id="email" placeholder="Enter your email address" />

                      <label for="message">Message:</label>
                  </p>
                    <p>
                      <textarea id="message" placeholder="Looking for a quote?"></textarea>

                      <input type="submit" value="Send message" />
                  </p>

                </fieldset>
        </form>
        <?php 
            $ToEmail = 'jordantrout0@gmail.com'; 
            $EmailSubject = 'Site contact form'; 
            $mailheader = "From: ".$_POST["email"]."\r\n"; 
            $mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
            $mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
            $MESSAGE_BODY = "Name: ".$_POST["name"].""; 
            $MESSAGE_BODY .= "Email: ".$_POST["email"].""; 
            $MESSAGE_BODY .= "Message: ".nl2br($_POST["message"]).""; 
            mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
        ?>
    </div> 
```

CSS (contact.css)

```
 body, div, h3, form, fieldset, input, textarea {
    margin: 0; padding: 0; border: 0; outline: none;
}

html {
    height: 100%;
}

#contact {
    float:right;
    width: 250px; margin: 60px auto; padding: 60px 30px;
    background: #9fad23; border: 1px solid #e1e1e1;
    -moz-box-shadow: 0px 0px 8px #444;
    -webkit-box-shadow: 0px 0px 8px #444;
    -webkit-border-top-left-radius: 25px;
    -webkit-border-bottom-left-radius: 25px;
    -moz-border-radius-topleft: 25px;
    -moz-border-radius-bottomleft: 25px;
    border-top-left-radius: 25px;
    border-bottom-left-radius: 25px;
}

h3 {
    font-size: 25px; color: #445668; text-transform: uppercase;
    text-align: center; margin: 0 0 25px 0;
}

label {
    float: left; clear: left; margin: 11px 20px 0 0; width: 95px;
 font-size: 12px; color: #445668; 
    text-transform: uppercase; 
}

input {
    width: 200px;
    height: 35px;
    background: #5E768D;
    background: -moz-linear-gradient(top, #546A7F 0%, #5E768D 20%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#546A7F), color-stop(20%,#5E768D)); /* webkit */
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-box-shadow: 0px 1px 0px #f2f2f2;
    -webkit-box-shadow: 0px 1px 0px #f2f2f2;
    font-family: sans-serif;
    font-size: 12px;
    color: #f2f2f2;
    text-transform: uppercase;
    margin-top: 0;
    margin-right: 0;
    margin-bottom: 20px;
    margin-left: 0;
    padding-top: 5px;
    padding-right: 20px;
    padding-bottom: 0px;
    padding-left: 20px;
}
    input::-webkit-input-placeholder  {
        color: #a1b2c3; 
    }
    input:-moz-placeholder {
        color: #a1b2c3; 
    }

textarea {
    width: 200px; height: 170px; padding: 12px 20px 0px 20px; margin: 0 0 20px 0; 
    background: #5E768D;
    background: -moz-linear-gradient(top, #546A7F 0%, #5E768D 20%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#546A7F), color-stop(20%,#5E768D)); /* webkit */
    border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px;
    -moz-box-shadow: 0px 1px 0px #f2f2f2;-webkit-box-shadow: 0px 1px 0px #f2f2f2;
    font-family: sans-serif; font-size: 12px; color: #f2f2f2; text-transform: uppercase; 
}
    textarea::-webkit-input-placeholder  {
        color: #a1b2c3;  
    }
    textarea:-moz-placeholder {
        color: #a1b2c3;
    }

input:focus, textarea:focus {
    background: #728eaa;
    background: -moz-linear-gradient(top, #668099 0%, #728eaa 20%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#668099), color-stop(20%,#728eaa)); /* webkit */
}

input[type=submit] {
    width: 150px; height: 40px; float:right; padding: 10px 15px; margin: 0 15px 0 0;
    -moz-box-shadow: 0px 0px 5px #999;-webkit-box-shadow: 0px 0px 5px #999;
    border: 1px solid #556f8c;
    background: -moz-linear-gradient(top, #718DA9 0%, #415D79 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#718DA9), color-stop(100%,#415D79)); /* webkit */
    cursor: pointer;
} 
```

AjaxSubmit.php

```
 <?php

$name = $_POST['name']; // contain name of person
$email = $_POST['email']; // Email address of sender 
$web = $_POST['web']; // Your website URL
$body = $_POST['text']; // Your message 
$receiver = "jordantrout0@gmail.com" ; // hardcorde your email address here - This is the email address that all your feedbacks will be sent to 
if (!empty($name) & !empty($email) && !empty($body)) {
    $body = "Name:{$name}\n\nWebsite :{$web}\n\nComments:{$body}";
    $send = mail($receiver, 'Contact Form Submission', $body, "From: {$email}");
    if ($send) {
        echo 'true'; //if everything is ok,always return true , else ajax submission won't work
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:57:51.217

当然它会提交给 index.html#，你告诉它：

```
<form action="#" method="post"> 
```

试试这个：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
```

# eclipse - SWT 浏览器使用 javascript 性能不佳（适用于 webkit 和 xulrunner）

> ID：14756875
> 
> 赞同：1
> 
> 时间：2013-02-07T17:08:43.310
> 
> 标签：eclipse, webkit, swt, xulrunner

使用带有 Web 浏览器（SWT 浏览器）的 RCP 应用程序的 Eclipse 模板，我在呈现此页面（使用 Javascript）时遇到了非常糟糕的性能：

[http://bl.ocks.org/d/4063663/](http://bl.ocks.org/d/4063663/)

```
// Instantiate a browser inside an Eclipse View.
Browser browser = new Browser( parent, SWT.WEBKIT ); // or MOZILLA.
browser.setURL( "http://bl.ocks.org/d/4063663/" ); 
```

我的配置是：

*   Eclipse 靛蓝（Eclipse 3.7，SWT 3.7），
*   Ubuntu 10.04 或 12.04，64 位

我已经尝试过***libwebkit-1.2***和***xulrunner-1.9.2***。两者都有一个非常滞后的响应，而使用 Firefox 或 Chromium 呈现的同一页面响应非常快。

***编辑：***还尝试使用 Eclipse 4.2 和 xulrunner-10。相同的行为。

您有任何提示（SWT 浏览器的限制、库版本）吗？

# php - 为什么我在使用 Symfony2 绑定请求时得到一个字符串？

> ID：14756877
> 
> 赞同：1
> 
> 时间：2013-02-07T17:08:54.400
> 
> 标签：php, forms, validation, symfony

我正在尝试更新一个对象：

```
public function editAction(Artist $artist)
    {

        if (!$artist) {
            throw $this->createNotFoundException('Unable to find Artist entity.');
        }

        // We create the form from the external re-usable form made in TestBundle/Form/artist.php
        $form = $this->createForm( new ArtistType, $artist);

        // We get the request type
        $request = $this->get('request');

        // If it is a POST request, the user validated the form
        if ($request->isMethod('POST')) {
          // We make the link Request <-> Form
          // Now, $request = Values entered by the user
          $form->bind($request);

          // We validate the values
          if ($form->isValid()) {
            // We save $artist in the DB
            $em = $this->getDoctrine()->getManager();
            $em->persist($artist);
            $em->flush();

            $this->get('session')->getFlashBag()->add('info', 'Artist edited successfully'); 

          // Everything is fine, we redirect the user
          return $this->redirect($this->generateUrl('ymtest_Artist'));
          }
        }

        // We pass the createView() form method to the viexw so that it can print the form if the user arrived on this page with a GET method (he didnt validate the form yet)
        return $this->render('YMTestBundle:Musician:edit.html.twig', array(
          'form' => $form->createView(),
          'artist' => $artist
        ));
    } 
```

但是当我验证表单时，我得到了一个例外：

> 对象或数组类型的预期参数，给定字符串

我的表格如下所示：

```
{# src/YM/TestBundle/Resources/views/Musician/add.html.twig #}

{% extends "YMTestBundle::layout.html.twig" %}

{% block bodyAdmin %}

<div class="container">
    <form action="{{ path('ymtest_EditArtist', {'id': artist.id}) }}" method="post" {{ form_enctype(form) }}>
        <div class="row">
            {% if form_errors(form)|length != 0 %}
                <div class="span12 alert alert-error" style="margin-left:0px">
                    {# Les erreurs générales du formulaire. #}
                    {{ form_errors(form) }}
                </div>
            {% endif %}
        </div>

        <div class="row">
            <div class="span10 BoxesW">
                <div>
                    {{ form_label(form.name, "Artist Name") }}
                    {{ form_errors(form.name) }}
                    {{ form_widget(form.name) }}
                </div>
                <div>
                    {{ form_label(form.biography, "Artist Biography") }}
                    {{ form_errors(form.biography) }}
                    {{ form_widget(form.biography, {'attr':{'class': 'span10' }, 'id': 'wysiwyg' }) }}
                </div>
                {{ form_rest(form) }}
                </br>
                <div>
                    <input type="submit" class="btn btn-primary" />
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %} 
```

而且路线是正确的，因为我在验证表格之前就拿到了表格。

谢谢你的帮助

更新：这是我的新控制器：

```
<?php

namespace YM\TestBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;
use Doctrine\ORM\EntityRepository;
use YM\TestBundle\Entity\Artist;
use YM\TestBundle\Form\ArtistType;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\ParamConverter;

class MusicianController extends Controller
{
    /**
     * @Route("/Artist/edit/{id}")
     * @ParamConverter("artist", class="YMTestBundle:Artist")
     */
    public function editAction(Artist $artist)
    {

        if (!$artist) {
            throw $this->createNotFoundException('Unable to find Artist entity.');
        }

        // We create the form from the external re-usable form made in TestBundle/Form/artist.php
        $form = $this->createForm( new ArtistType, $artist);

        // We get the request type
        $request = $this->get('request');

        // If it is a POST request, the user validated the form
        if ($request->isMethod('POST')) {
          // We make the link Request <-> Form
          // Now, $request = Values entered by the user
          $form->bind($request);

          // We validate the values
          if ($form->isValid()) {
            // We save $artist in the DB
            $em = $this->getDoctrine()->getManager();
            $em->persist($artist);
            $em->flush();

            $this->get('session')->getFlashBag()->add('info', 'Artist edited successfully'); 

          // Everything is fine, we redirect the user
          return $this->redirect($this->generateUrl('ymtest_Artist'));
          }
        }

        // We pass the createView() form method to the viexw so that it can print the form if the user arrived on this page with a GET method (he didnt validate the form yet)
        return $this->render('YMTestBundle:Musician:edit.html.twig', array(
          'form' => $form->createView(),
          'artist' => $artist
        ));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:31:23.683

**编辑**

我们在聊天中发现问题出在实体注释中。
`@Assert\Valid()`用于`string`变量。

~~你有这个`action="{{ path('ymtest_EditArtist', {'id': artist.id}) }}"`我想会生成一个类似的url `editArtist/1234`（所以传递一个字符串）。
然后你有这个`public function editAction(Artist $artist)`需要类型的对象`Artist`。~~

您应该将其更改为：

```
public function editAction($artistid)
{
    $em = $this->getDoctrine()->getManager();
    $artist= $em->getRepository('YourBundle:Artist')->find($artistid);

    if (!$artist) {
        throw $this->createNotFoundException('No artist found for id '.$artistid);
    }

    //Do whatever you want
} 
```

 ~~**Remark:** You don't need to call `$em->persist($artist);` when updating an object ([http://symfony.com/doc/current/book/doctrine.html#updating-an-object](http://symfony.com/doc/current/book/doctrine.html#updating-an-object)).~~

# jquery - jquery 上下文变量

> ID：14756878
> 
> 赞同：0
> 
> 时间：2013-02-07T17:08:59.820
> 
> 标签：jquery, dom

我想了解 jquery 如何处理上下文。我有这个代码：

```
var formHtml;

jQuery.get("form2.htm", function (data) {
    formHtml = data;
});

alert(formHtml); 
```

它的作用是从`form2.html`页面获取数据，我将 formHtml 变量设置为该数据，以便我可以在其他地方使用它，但是当我警告我未定义时。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:10:25.523

`ajax`是异步的，因此在调用完成之前执行警报

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:10:24.850

`jQuery.get()`是一个异步调用。jQuery.get() 使用[AJAX](http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications)从服务器端获取值。这意味着 javascript 语句的执行将在将请求发送到服务器后继续执行，而无需等待服务器的响应。

[AJAX](http://ajaxian.com/by/topic/ajax)代表`Asynchronous JavaScript and XML`.

当来自服务器的响应返回时，使用该方法注册的回调`post`方法被调用。

因此，当服务器请求返回时，该`alert`语句已经执行。由于您已经声明了全局变量`formHtml`并且没有对其进行初始化，因此它的值就是`undefined`您在警报中得到的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:10:42.100

`alert(formHtml);`将在之前执行`formHtml = data;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T17:13:20.790

正如**利什所说**->`Well for one, the get will take a moment to complete.`

您可以使用`.ajaxComplete()`：

```
$(document).ajaxComplete(function(){
   alert(formHtml);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T17:14:15.957

试试这个 ：

```
var formHtml;

jQuery.get("form2.htm", function (data) {
    formHtml = data;
    alert(formHtml);
}); 
```

如前所述，`jQuery.get`是一种异步方法。回调函数将在收到响应后执行。

```
jQuery.get("form2.htm", function (data) {
    formHtml = data;
    alert('response received!');
});
alert('request send!'); 
```

您将看到“请求发送！”，然后是“收到响应！”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T17:12:28.923

`form2.htm`是异步加载的。您`alert`在调用您传递给的回调之前运行，[`get`](http://api.jquery.com/jQuery.get/)因此`formHtml`尚未获得值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T17:12:36.157

`jQuery.get()`是异步操作，您的匿名将在完成 ajax 调用后调用，但在 ajax 请求期间，您的警报显示数据，因此显示未定义

# android - Android 项目的基于“Restlet”的服务器端的最佳部署解决方案

> ID：14756881
> 
> 赞同：0
> 
> 时间：2013-02-07T17:09:15.513
> 
> 标签：android, mysql, tomcat

我想请您就 android 应用程序服务器端的最佳免费/付费服务器解决方案发表意见。服务器是使用“Restlet”编写的。我需要支持 MySQL 后端的应用程序服务器（比如我本地机器上的“TomCat”和“MySql”）。我想免费在 GooglePlay 上上传应用程序，所以我买不起昂贵的东西。应用程序是语言学习者，交易主要是推动和汇集单词，所以我想我不需要巨大的带宽等等。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:20:34.783

Google App Engine 现在支持 MySQL，您可以使用 Java、Go 或 Python 编写后端。

我已经部署了使用 App Engine 作为后端的 Android 应用程序。即使有 30,000 名活跃用户，我每周也要支付 2.10 美元。

您也许可以挤进免费套餐，而无需支付任何费用。

# delphi - Indy10 + OpenSSL：发送电子邮件代码在 Windows 8 上停止工作

> ID：14756882
> 
> 赞同：3
> 
> 时间：2013-02-07T17:09:18.847
> 
> 标签：delphi, openssl, indy10

代码在 Windows 8 上停止运行。它在 Windows7、Windows XP 上运行良好...我找到了解决此问题的方法：在 Windows 兼容模式下启动应用程序：Windows XP (Service Pack 3) - 代码正常工作。如果 Windows 兼容模式为 Windows 7，则代码不起作用。我以管理员身份运行应用程序。已经尝试关闭防病毒和防火墙。我可以使用另一个 smtp 客户端（例如 .Net SmtpClient）发送具有相同参数的电子邮件。该问题在不同的 Windows 8 计算机（家庭、办公室）上重现。我创建了简单的测试应用程序。代码在 Delphi XE、Indy 10.5.7 上编写，OpenSSL 1.0.1.3 dll 放在 test.exe 文件夹中。

有任何想法吗？

代码：

```
SSLHandler.MaxLineAction := maException;
SSLHandler.SSLOptions.Method := sslvTLSv1;
SSLHandler.SSLOptions.Mode := sslmUnassigned;
SSLHandler.SSLOptions.VerifyMode := [];
SSLHandler.SSLOptions.VerifyDepth := 0;
SSLHandler.OnStatusInfo := IdSSLIOHandlerSocketOpenSSL1StatusInfo;

SMTP.IOHandler := SSLHandler;
SMTP.Host := 'smtp.gmail.com';
SMTP.Port := 587;
SMTP.UseTLS := utUseExplicitTLS;
SMTP.Username := FromAddress;
SMTP.Password := AuthPassword;

Email.From.Address := FromAddress;
Email.Recipients.EmailAddresses := ToAddress;
Email.Subject := Subject;
Email.Body.Text := Body;

SMTP.Connect;
SMTP.Send(Email);
SMTP.Disconnect; 
```

输出：

> SSL 状态：“之前/连接初始化”
> 
> SSL 状态：“之前/连接初始化”
> 
> SSL 状态：“SSLv3 写入客户端 hello A”
> 
> SSL 状态：“SSLv3 读取服务器你好 A”
> 
> EIdSocketError 与消息“套接字错误 #10060 连接超时。”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-19T20:30:27.930

它是 IdHTTP 的 ReadTimeout。默认情况下它为 -1，不适用于 Windows 8。将其设置为任何正值，如 15000 毫秒或 30000 将解决问题。

请注意，您需要以编程方式在 IdHTTP 对象上设置数值。不要尝试通过对象检查器设置绑定的 IoHandler，因为它不会以这种方式工作。

例子：

```
 IdHTTP1.ReadTimeout := 30000; 
```

一个告诉 Indy 在其套接字操作上使用无限超时。但是，当连接断开时，为了解决 Vista+ 上 OpenSSL 中的死锁，如果 ReadTimeout <= 0，TIdSSLIOHandlerSocketOpenSSL 会在较低的套接字层强制超时 30 秒。}

Bob Daneshfar 在[此论坛](https://forums.embarcadero.com/message.jspa?messageID=524771)上发布的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:43:47.847

最后我发现这是印地相关的问题。升级到 Indy 10.5.8 或 10.5.9 可解决此问题。

谢谢大家的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:16:36.183

由于您可以使用 .NET 类成功发送电子邮件`SmtpClient`，因此我建议您使用数据包嗅探器（例如 Wireshark）来查看`SmtpClient`的网络流量并将其与 Indy/OpenSSL 的网络流量进行比较，看看到底有什么区别。在 OpenSSL 的 TLSv1 握手期间发生了一些事情，而这并没有发生`SmtpClient`，所以去看看他们的握手实际上是什么样子的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T13:02:12.277

您确定您已将 OpenSSL 库与您的应用程序一起分发（例如“libeay32.dll”和“ssleay32.dll”）吗？

当您忘记这些时，您也会遇到超时，因为 OpenSSL 库的错误未正确传输到外部 IO 对象（如 TIdSMTP 或 TIdHTTP）。

要检查 Indy 的 OpenSLL 是否可以加载，我使用以下代码（当 SSL 不可用时会引发错误） - 使用单元“IdSSLOpenSSL”

```
TIdSSLContext.Create.Free; // Raises an error, when unable to load SSL lib and such 
```

您还可以插入 OpenSSL 标头单元“IdSSLOpenSSLHeader”并尝试手动加载库并检查它是否可以：

```
if not IdSSLOpenSSLHeaders.Load then ; // Raises no error, but return 'true' when it can load 
```

# excel - Excel 数据解决方案

> ID：14756884
> 
> 赞同：0
> 
> 时间：2013-02-07T17:09:22.310
> 
> 标签：excel, solution

这是我的 2 列：

```
| C      |   B    |
| 378    | 124.14 |
| 378    |   0.47 |
| 378    | 125.00 |
| Total  | 249.61 | 
```

我会在另一张表中链接总数据，但我找不到 excel 正确的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:19:03.260

从您复制和粘贴的内容中很难判断您的表格是什么样子。假设它看起来像这样：

```
 +---+-------+-------+
 |   |   B   |   C   |
 +---+-------+-------+
 | 1 | 378   | 124.14|
 +---+-------+-------+
 | 2 | 378   |   0.47|
 +---+-------+-------+
 | 3 | 378   | 125   |
 +---+-------+-------+
 + 4 + TOTAL + 249.6 +
 +---+-------+-------+ 
```

你的总地址是C4。调用此工作表`Sheet1`和文件`File1.xls`。

要从同一文件中的另一个工作表访问单元格 C4：`=Sheet1!C4`

要从另一个文件访问单元格 C4：`=[File1.xls]Sheet1!$C$4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:11:58.853

这可能过于简单，但您只需单击目标单元格，键入，`=`然后单击源工作表并单击总计。

# javascript - 如何重置滑动切换（）

> ID：14756894
> 
> 赞同：1
> 
> 时间：2013-02-07T17:10:00.630
> 
> 标签：javascript, jquery, css, responsive-design

我正在使用 twitter bootstrap 的响应式网站，在这种情况下，它采用页脚标题，当屏幕宽度为一定宽度时，它会打开`slideToggle()`，这工作正常，但问题是当我增加再次浏览器大小 我希望此功能不仅可以关闭，而且可以重新设置`display:block`。

我目前仍在学习 jQuery 和 JS，所以它可能是显而易见的。

我需要它工作，所以它不依赖点击来重置它......

这是整个代码，包括获取屏幕大小：

```
 var myWidth = 0, myHeight = 0;
    function getSize(){
            if( typeof( window.innerWidth ) == 'number' ) {
                //Non-IE
                myWidth = window.innerWidth;
                myHeight = window.innerHeight;
            } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
            //IE 6+ in 'standards compliant mode'
                myWidth = document.documentElement.clientWidth;
                myHeight = document.documentElement.clientHeight;
                }   
    }

    getSize(); // run first time
            $(window).resize(function(){
                getSize(); // do it on resize
            });

            $("#footer h3").click(function () {

                if (myWidth < 980) {
                $(this).toggleClass("active");
                $(this).parent().find("ul").slideToggle('medium');  
                }                   
            }); 
```

我在想`slideDown()`，但不知道如何让它自动发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:23:35.150

在检查屏幕宽度的代码中（也许您仍然可以发布它？）您可以执行以下操作：

```
if (myWidth < 980) {
    $(this).parent().find("ul").slideDown('medium');
} else {
    $(this).parent().find("ul").slideUp('medium');
} 
```

为了更好地控制幻灯片行为，最好使用单独的 slideDown 和 slideUp 方法而不是 slideToggle。在这种情况下，您肯定知道您的 ul 会向上/向下滑动，而不是仅仅切换。

[`stop()`](http://api.jquery.com/stop/)此外，如果窗口宽度在短时间内连续多次超过 980 阈值，您可能希望添加该方法以避免累积幻灯片动画：

```
if (myWidth < 980) {
    $(this).parent().find("ul").stop().slideDown('medium');
} else {
    $(this).parent().find("ul").stop().slideUp('medium');
} 
```

# silverstripe - Restful 服务器上的 getRequest 方法

> ID：14756896
> 
> 赞同：0
> 
> 时间：2013-02-07T17:10:06.597
> 
> 标签：silverstripe

我正在通过 ajax 调用访问 RestfulServer（网址：BaseHref + "api/v1/Post/" + postId + '/PostTracks' 以检索 DataObject 关系：

```
 public function PostTracks(){
    $controller = Controller::curr();
    $request = $controller->getRequest();
    $passkey = $request->getHeader('passkey');

    $tracks = $this->owner->Tracks();
    $set    = array();

    foreach($tracks as $track)
    {
            $set[] = array(
                    'm4aURL'    => $track->m4a()->URL,
                    'oggURL'    => $track->ogg()->URL,
                    'Title'     => $track->Title
            );
    }
    $this->outputJSON(200, $set);
} 
```

在该方法的顶部，我试图获取我通过 beforeSend 方法在我的 ajax 调用中发送的自定义标头的值。我已验证标头已在请求中发送到 RestfulServer 控制器，但在获取值时遇到问题。对于 $passkey 的值，我没有得到任何东西。

如何从 RestfulServer 控制器获取标头信息。我不明白为什么 getRequest 不起作用，因为 RestfulServer 从 Controller 扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:24:16.107

您可以使用`print_r($request->getHeaders())`查看附加到请求的所有标头。无论如何，我怀疑问题出在“密码”的大小写上。默认情况下，SilverStripe 将解析 CamelCaseFormat 中的标题名称 - 所以我怀疑标题将被称为`Passkey`or `PassKey`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:07:17.363

调试请求问题的一种好方法是使用 Debug::dump($request->getHeaders()) 或 Debug::log($request->getHeaders())。

后者会将日志文件写入站点，然后您可以通过“tail -f debug.log”跟踪您是否可以通过终端访问服务器，或者一次又一次地下载它们。

这样，当您无法直接访问 url 时，您就可以看到注销的内容。

# android - 在android上动态添加ListFragment

> ID：14756903
> 
> 赞同：1
> 
> 时间：2013-02-07T17:10:24.933
> 
> 标签：android, android-layout

我正在尝试制作一个android布局，其中我在屏幕左侧有一个包含菜单条目的ListFragment，然后是ListFragment右侧的一个区域，我可以根据左侧选择的条目以编程方式加载不同的片段。因此，我首先制作了一个 xml 布局文件，该文件具有水平线性布局，其中包含两个框架布局。我的想法是我可以将我的片段加载到框架布局中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="0dp"
    android:layout_height="match_parent">

    <FrameLayout 
        android:id="@+id/fragment_container_left"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:layout_weight="30"/>

    <FrameLayout 
        android:id="@+id/fragment_container_right"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:layout_weight="70"/>

</LinearLayout> 
```

然后在 onCreate 方法的 MainViewActivity 类中，我将一个列表片段添加到左侧容器，并将一个列表片段添加到右侧容器。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu_items);

    if(findViewById(R.id.fragment_container_left) != null) {
        if(savedInstanceState == null){
            MenuListFragment menuListFragment = new MenuListFragment();
            FragmentManager fm = getFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();
            ft.add(R.id.fragment_container_left, menuListFragment);
            ft.commit();
        }
    } 

    if(findViewById(R.id.fragment_container_right) != null) {
        if(savedInstanceState == null){
            MoveListFragment moveListFragment = new MoveListFragment();
            FragmentManager fm = getFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();
            ft.add(R.id.fragment_container_right, moveListFragment);
            ft.commit();
        }
    }
} 
```

那么 MenuListFragment 的 onCreate 方法是：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(ArrayAdapter.createFromResource(getActivity().getApplicationContext(),
            R.array.menu_items, R.layout.main_menu_item));
} 
```

然后 MoveListFragment 的 onCreate 方法是：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String[] items = { "move 1", "move 2", "move 3", "move 4" };
    setListAdapter(new ArrayAdapter<String>(getActivity(), R.layout.move_list_items, items));
} 
```

这是 main_menu_item xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="24sp"
    android:padding="6dp" 
    android:id="@+id/main_menu_item"/> 
```

和 move_list_items xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="24sp"
    android:padding="6dp" 
    android:id="@+id/move_list_item"/> 
```

当我运行此代码时，我没有收到任何类型的错误，但屏幕上只显示白色背景。我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:36:33.173

调用`findViewById(R.id.fragment_container_left)`将为您提供 FrameLayout，而不是片段，它显然永远不会为空。您应该使用以下命令检查相应的片段是否已经存在`findFragmentById`：

```
if(getFragmentManager().findFragmentById(R.id.fragment_container_left) == null) {
        MenuListFragment menuListFragment = new MenuListFragment();
        FragmentManager fm = getFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.add(R.id.fragment_container_left, menuListFragment);
        ft.commit();
} 
```

作为另一个提示，您可以使用列表片段将内容片段与列表片段链接`setTargetFragment`。如果重新创建片段，这将自动重新连接片段。

# google-chrome - Web Audio 节点连接到两个增益节点，连接到目的地，复制速度/音高

> ID：14756907
> 
> 赞同：3
> 
> 时间：2013-02-07T17:10:37.520
> 
> 标签：google-chrome, web-applications, html5-audio, web-audio-api

正如标题所说，如果我有一个发出声音的音频节点并将其连接到两个单独的 GainNodes，后者又连接到 Audio Context 目标，则声音以双倍速度/双倍音高播放（好像发送了一半样本到一个增益节点，一半样本到另一个，时间也减半）。

我在这里创建了一个方便的 jsfiddle [，](http://jsfiddle.net/w5V2f/4/)只需将您的声音文件拖到黑色矩形画布中并收听即可。

```
// audioContext: Web Audio context
// decoded: decoded audioBuffer
// gainNode1, gainNode2: gain nodes
var bSrc = audioContext.createBufferSource();
bSrc.connect (gainNode1);
bSrc.connect (gainNode2);
gainNode1.connect (audioContext.destination);
gainNode2.connect (audioContext.destination);
bSrc.buffer = decoded;
bSrc.loop = false;
// You'll hear two double-speed buffers playing at unison
bSrc.start(0); 
```

这是设计使然吗？我想要的是完全“复制”声音（将被发送到两条不同的路线，小提琴只是一个更大项目的概念验证）。

编辑：

*   我在 Chrome 版本 24.0.1312.56 / Ubuntu 12.10 上对此进行了测试，并且该行为存在。
*   Chrome 版本 24.0.1312.68 / Ubuntu 12.10 上也存在该行为
*   在 Chrome 版本 24.0.1312.57 / Mac OSX 上，音频 API 运行良好，并且不存在此行为。

这可能是仅限 Linux 的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:19:11.523

听起来像是 Linux 实现问题。它适用于我在 OS X 上的 Chrome 中。

# ios - git checkout master 命令给出文件将被覆盖的错误

> ID：14756916
> 
> 赞同：0
> 
> 时间：2013-02-07T17:11:03.230
> 
> 标签：ios, git

我刚刚尝试做 git checkout master 并收到此错误：

```
macoss-MacBook-Pro-10:Marketing owner12$ git checkout master
error: The following untracked working tree files would be overwritten by checkout:
    Marketing.xcodeproj/project.xcworkspace/xcuserdata/owner12.xcuserdatad/UserInterfaceState.xcuserstate
Please move or remove them before you can switch branches.
Aborting 
```

但我不确定如何处理这种情况。我不介意这个文件被 repo 中的内容覆盖。我在这里进行的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:13:41.467

如果您不关心该文件，请删除该文件，如果您认为将来需要它，请将其隐藏。或者干脆重命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:16:51.700

提交您想要保留的文件，然后执行 git clean 以删除您不想保留的额外文件。git ready 网站上的这篇[文章](http://gitready.com/beginner/2009/01/16/cleaning-up-untracked-files.html)描述得非常好。

如果您只想删除工作目录中的一两个文件，那么您可以先进行试运行，然后查看哪些文件将被清理使用：

```
git clean -n 
```

然后当你确定这样做时：

```
git clean -f 
```

如果您还想清理目录，则 git clean 有一个 -d 开关。您可以将它与其他开关一起使用，所以这是我通常使用的（然后在空运行后将 -n 更改为 -f）：

```
git clean -n -d 
```

然后在你的 git clean 之后，使用：

```
git status 
```

确保您没有未跟踪的文件或未提交的更改。最后切换到master：

```
git checkout master 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:17:35.990

您有未被跟踪的文件。任何一个

`rm untracked.file1 untracked.file2`

或者

`git add . && git commit -m "adding new previously untracked files that serve a purpose"`

如果您遇到权限问题：

`git add --ignore-errors .`

# c# - 请求重新验证并缓存图像

> ID：14756918
> 
> 赞同：1
> 
> 时间：2013-02-07T17:11:13.710
> 
> 标签：c#, wcf, web-services, captcha, recaptcha

我需要创建一个请求“recaptcha”并将其作为**位图**发送到 WCF 客户端的 WCF 应用程序。到目前为止，我发现的所有示例都是为了在 Web 浏览器中显示验证码而构建的，而我需要实际的验证码图像。

我需要这样做的原因是因为我需要在 ac# WinForms 应用程序中创建一个注册屏幕。以下是它的工作原理：

1.  用户通过 Windows 应用程序打开注册屏幕。
2.  应用程序从 WCF 服务器请求验证码。
3.  WCF 服务器生成并发送验证码。
4.  应用程序显示验证码并允许用户输入详细信息。
5.  应用程序通过 WCF 向服务器发送详细信息和验证码。
6.  服务器发送返回码（即：注册成功或失败。）

请注意，此时托管网站不是一个选项。只有一个 WCF 服务器和一个 WCF 客户端。我一直在尝试避免生成自己的验证码并改用重新验证码，但我还没有设法找到下载实际验证码图像的方法。欢迎任何替代解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:49:12.247

它实际上与此非常相似：

[https://stackoverflow.com/a/12154911/518923](https://stackoverflow.com/a/12154911/518923)

正如答案所示，使用[http://www.google.com/recaptcha/api/challenge?k=your_public_key](http://www.google.com/recaptcha/api/challenge?k=your_public_key)获取挑战，解析 ChallengeValue，然后您可以通过[http://www.google.com/获取图像recaptcha/api/image?c=challenge_value](http://www.google.com/recaptcha/api/image?c=challenge_value)

之后，您可以通过[http://www.google.com/recaptcha/api/verify](http://www.google.com/recaptcha/api/verify)验证挑战 确保检查有关该主题的文档[https://developers.google.com/recaptcha/docs/verify](https://developers.google.com/recaptcha/docs/verify)

从链接的帖子中无耻地复制，但我不相信;）

# javascript - 如何为 Safari 地址栏隐藏设置动画

> ID：14756919
> 
> 赞同：0
> 
> 时间：2013-02-07T17:11:15.113
> 
> 标签：javascript, iphone, mobile-safari

任务是在我的网站上隐藏 iPhone Safari 地址栏。我找到了以下代码来解决它：

```
function hideAddressBar() { 
    setTimeout(function() { window.scrollTop(0, 1); }, 0); 
}

window.addEventListener('load', hideAddressBar);
window.addEventListener('touchstart', hideAddressBar);
window.addEventListener('orientationchange', hideAddressBar); 
```

它工作正常，但看起来很丑。我尝试过 jQuery 动画，但它不起作用，因为 y 偏移量不足以制作动画 - 如果 bar 可见，则 y 偏移值为 0，否则它等于 1。

我对`slide`同步 Safari 地址栏显示和隐藏的动画很感兴趣。有什么建议么？

# eclipse - Eclipse RCP 应用程序无法启动

> ID：14756920
> 
> 赞同：0
> 
> 时间：2013-02-07T17:11:15.143
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在尝试学习 Eclipse RCP，并且正在按照教程尝试学习基础知识，但由于某种原因，我的应用程序无法启动！

我已经阅读了错误日志，但我无法确定它的正面或反面。谁能指出我正确的方向？这些是我得到的错误：

![在此处输入图像描述](../Images/c2e05b993a73f75e1bcf4c9a964de0f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:02:56.100

经过一番研究，我发现这是由于缺少一些插件，我找到了一个快速修复来填补缺少的插件。

右键单击您的产品配置文件 -> 运行方式 -> 运行配置...

在此菜单中，转到插件选项卡并选中复选框“在启动前自动验证插件”，然后单击“添加所需插件”按钮。

这添加了我缺少的所有必需插件:)

# java - 使用泛型实现抽象类中的通用方法

> ID：14756923
> 
> 赞同：6
> 
> 时间：2013-02-07T17:11:17.257
> 
> 标签：java, generics

假设我有这个层次结构：

```
public abstract class AbstractEntity implements Cloneable {
    ...
    public AbstractEntity clone() {
        Cloner cloner = new Cloner();
        AbstractEntity cloned = cloner.deepClone(this);
        return cloned;
    }
}

public class EntityA extends AbstractEntity {
    ...
} 
```

这很好用，我可以这样做：

```
EntityA e1 = new EntityA();
EntityA e2 = (EntityA) e1.clone(); 
```

但我必须进行手动类型转换。有没有办法使用 java 泛型来让**clone()**方法返回子类的实际类型？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T17:16:20.653

我能想到的最接近的是：

```
public abstract class AbstractEntity<T extends AbstractEntity<T>> 
    implements Cloneable {

    @SuppressWarnings("unchecked")
    public T clone() {
        Cloner cloner = new Cloner();
        T cloned = (T) cloner.deepClone(this);
        return cloned;
    }    
}

public class EntityA extends AbstractEntity<EntityA> { 
    ...
}

public class EntityB extends AbstractEntity<EntityB> { 
    ...
} 
```

这并不完全安全：你可以写：

```
public class EvilClass extends AbstractEntity<EntityA> { 
    ...
} 
```

...但是这对您是否重要取决于您的用例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:36:44.437

我认为不需要泛型。您可以在抽象类中声明一个 clone() 方法，并覆盖它以返回子类中的子类。

```
package inheritance;

public abstract class AbstractEntity {

    public abstract AbstractEntity clone();
}

package inheritance;

public class ClassA extends AbstractEntity {

    @Override
    public ClassA clone() { return null; }

}

package inheritance;

public class Driver {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ClassA a = new ClassA();
        ClassA b = a.clone();
        System.out.println("all done");
    }

} 
```

这不是你想做的吗？

# c# - WPF Chart Toolkit - 更改区域系列颜色的不透明度

> ID：14756941
> 
> 赞同：2
> 
> 时间：2013-02-07T17:12:13.943
> 
> 标签：c#, wpf, wpf-controls, wpftoolkit

我需要区域系列图表看起来像：![在此处输入图像描述](../Images/52d077152c8f830d192502b658b50599.png)

我成功地隐藏了两个轴并将颜色更改为渐变画笔。我仍然需要改变不透明度的帮助，所以绿色的将在橙色的“后面”。另外 - 如何更改图表上的小点？如何将背景更改为透明？如何隐藏图表标题？

现在它看起来像这样：

![在此处输入图像描述](../Images/23c406f924f95304d675b23c3479db90.png)

任何帮助将不胜感激！

这是我的 xaml 代码：

```
 <LinearGradientBrush x:Key="GreenGradientBrush" StartPoint="0.5,0" EndPoint="0.5,1">
        <LinearGradientBrush.GradientStops>
            <GradientStop Color="#77b31a" Offset="0.75"></GradientStop>
            <GradientStop Color="#85d805" Offset="0.45"></GradientStop>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="OrangeGradientBrush" StartPoint="0.5,0" EndPoint="0.5,1">
        <LinearGradientBrush.GradientStops>
        <GradientStop Color="#fff92900" Offset="0.75"></GradientStop>
            <GradientStop Color="#ffff6115" Offset="0.45"></GradientStop>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <Style x:Key="GreenAreaSeriesStyle" TargetType="Control">
        <Setter Property="Background" Value="{StaticResource GreenGradientBrush}" />
        <Setter Property="Opacity" Value="1"></Setter>
    </Style>
    <Style x:Key="OrangeAreaSeriesStyle" TargetType="Control">
        <Setter Property="Background" Value="{StaticResource OrangeGradientBrush}" />
        <Setter Property="Opacity" Value="1"></Setter>
    </Style>

    <datavis:ResourceDictionaryCollection x:Key="MyPalette">
        <ResourceDictionary>
            <Style x:Key="DataPointStyle" BasedOn="{StaticResource GreenAreaSeriesStyle}" TargetType="Control" >
            </Style>
        </ResourceDictionary>
        <ResourceDictionary>
            <Style x:Key="DataPointStyle" BasedOn="{StaticResource OrangeAreaSeriesStyle}" TargetType="Control" >
            </Style>
        </ResourceDictionary>
    </datavis:ResourceDictionaryCollection>

    <Style x:Key ="PerformanceChartMajorTickMarkStyle" TargetType="Line">
        <Setter Property="Visibility" Value="Collapsed" />
    </Style>

</Window.Resources>
 <charting:Chart Palette="{StaticResource MyPalette}" HorizontalAlignment="Left" Margin="39,38,0,0" Name="chart1" Title="Chart Title" VerticalAlignment="Top" Width="815" Height="598" OverridesDefaultStyle="False">            
        <charting:Chart.LegendStyle>
                <Style TargetType="datavis:Legend">
                    <Setter Property="Width" Value="0" />
                </Style>
        </charting:Chart.LegendStyle>

        <charting:AreaSeries Name="Green" DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding}"  IsSelectionEnabled="True" >
            <charting:AreaSeries.IndependentAxis>
                <charting:CategoryAxis Orientation="X" Visibility="Hidden"/>
            </charting:AreaSeries.IndependentAxis>
            <charting:AreaSeries.DependentRangeAxis>
                <charting:LinearAxis Orientation="Y" Visibility="Hidden"/>
            </charting:AreaSeries.DependentRangeAxis>

        </charting:AreaSeries>
        <charting:AreaSeries Name="Orange" DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding}"  IsSelectionEnabled="True">
            <charting:AreaSeries.IndependentAxis>
                <charting:CategoryAxis Orientation="X" Visibility="Hidden"/>
            </charting:AreaSeries.IndependentAxis>
            <charting:AreaSeries.DependentRangeAxis>
                <charting:LinearAxis Orientation="Y" Visibility="Hidden"/>
            </charting:AreaSeries.DependentRangeAxis>
        </charting:AreaSeries>
    </charting:Chart> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T14:38:47.237

我发布了一个类似的问题并得到了以下答案，这对我很有帮助。

```
<ch:Chart Margin="56,21,50,72" Title="MyChart" DataContext="{Binding ElementName=Window, Mode=OneWay}"  Style="{StaticResource controlStyle}" >

                <ch:AreaSeries Name="DefaultArea" ItemsSource="{Binding Path=Key}" IndependentValueBinding="{Binding Key}" DependentValueBinding="{Binding Value}" Opacity="1" Title="111111" >
                    <ch:AreaSeries.Style>
                        <Style TargetType="ch:AreaSeries">
                            <Setter Property="IsTabStop" Value="False"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ch:AreaSeries">
                                        <Canvas x:Name="PlotArea">
                                            <Path Data="{TemplateBinding Geometry}" StrokeThickness="3" Fill="Pink" Style="{TemplateBinding PathStyle}" Opacity="1" />
                                        </Canvas>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ch:AreaSeries.Style>
                </ch:AreaSeries>

                <ch:AreaSeries Name="PersonnelArea" ItemsSource="{Binding Path=Key}" IndependentValueBinding="{Binding Key}" DependentValueBinding="{Binding Value}" Opacity="1" >
                    <ch:AreaSeries.Style>
                        <Style TargetType="ch:AreaSeries">
                            <Setter Property="IsTabStop" Value="False"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ch:AreaSeries">
                                        <Canvas x:Name="PlotArea">
                                            <Path Data="{TemplateBinding Geometry}" StrokeThickness="3" Fill="Yellow" Style="{TemplateBinding PathStyle}" Opacity="1" />
                                        </Canvas>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ch:AreaSeries.Style>

                </ch:AreaSeries>  
            </ch:Chart> 
```

您还可以在 XAML 中将样式设置为 Ressource，然后在后面的代码中动态分配它。这是我的原始问题的答案： [WPF AreaSeries：如何更改背景不透明度？](https://stackoverflow.com/questions/16771936/wpf-areaseries-how-to-change-background-opacity)

# c#-4.0 - 向现有实现添加行为 - C#/设计模式

> ID：14756946
> 
> 赞同：0
> 
> 时间：2013-02-07T17:12:27.937
> 
> 标签：c#-4.0, design-patterns

我目前对服务和业务层的实现如下所示。

```
public class MyEntity { }

// Business layer
public interface IBusiness { IList<MyEntity> GetEntities(); }
public class MyBusinessOne : IBusiness
{
    public IList<MyEntity> GetEntities()
    {
        return new List<MyEntity>();
    }
}

//factory
public static class Factory
{
    public static T Create<T>() where T :  class
    {
        return new MyBusinessOne() as T; // returns instance based on T
    }
}

//Service layer
public class MyService
{
    public IList<MyEntity> GetEntities()
    {
        return Factory.Create<IBusiness>().GetEntities();
    }
} 
```

我们需要对当前的实施进行一些更改。原因是数据随着时间的推移而增长，服务和客户端无法处理数据量。我们需要对当前服务实施分页。我们还期望更多功能（例如当数据超过阈值时返回故障，应用过滤器等），因此需要更新设计。

以下是我的新提议。

```
public interface IBusiness
{
    IList<MyEntity> GetEntities();
}

public interface IBehavior
{
    IEnumerable<T> Apply<T>(IEnumerable<T> data);
}

public abstract class MyBusiness
{
    protected List<IBehavior> Behaviors = new List<IBehavior>();
    public void AddBehavior(IBehavior behavior)
    {
        Behaviors.Add(behavior);
    }
}

public class PaginationBehavior : IBehavior
{
    public int PageSize = 10;
    public int PageNumber = 2;
    public IEnumerable<T> Apply<T>(IEnumerable<T> data)
    {
        //apply behavior here
        return data
            .Skip(PageNumber * PageSize)
            .Take(PageSize);
    }
}

public class MyEntity { }

public class MyBusinessOne : MyBusiness, IBusiness
{
    public IList<MyEntity> GetEntities()
    {
        IEnumerable<MyEntity> result = new List<MyEntity>();
        this.Behaviors.ForEach(rs =>
        {
            result = rs.Apply<MyEntity>(result);
        });
        return result.ToList();
    }
}

public static class Factory
{
    public static T Create<T>(List<IBehavior> behaviors) where T : class
    {
        // returns instance based on T
        var instance = new MyBusinessOne();
        behaviors.ForEach(rs => instance.AddBehavior(rs));
        return instance as T;
    }
}

public class MyService
{
    public IList<MyEntity> GetEntities(int currentPage)
    {
        List<IBehavior> behaviors = new List<IBehavior>() { 
            new PaginationBehavior() { PageNumber = currentPage, }
        };
        return Factory.Create<IBusiness>(behaviors).GetEntities();
    }
} 
```

如果我的实现是正确的，或者我已经杀了它，请专家建议我。如果它纠正了它是什么设计模式 - 装饰者或访客。

我的服务也返回 JSON 字符串。如何使用此行为集合仅序列化选定的属性而不是整个实体。属性列表来自用户的请求。（一种列选择器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:19:16.433

看来我没有足够的分数来评论你的问题。所以，我会做一些假设，因为我不是 C# 专家。

假设 1：看起来您首先获取数据，然后使用行为对象应用分页。如果是这样，这是一个错误的方法。假设有 500 条记录，每次提取显示 50 条记录。您不是简单地从数据库中获取 50 条记录，而是 10 次获取 500 条记录，并且在此之上添加了一个昂贵的过滤器。DB 比 C# 或 Java 更有能力完成这项工作。

我不会将分页视为与服务相关的行为。它是表示层的行为。您的服务应该只担心“数据粒度”。看起来您的一位客户想要一次性获得所有数据，而其他客户可能想要该数据的子集。

选项1：在DAO层，有两种方法：一种用于分页，另一种用于常规获取。根据传入的参数决定调用哪个方法。

选项 2：在服务级别创建两个方法。一个用于一小部分数据，另一个用于整个数据集。既然你说 JSON，这应该是 Restful 服务。然后根据传入的 URL，正确调用正确的方法。如果您使用泽西岛，这应该很容易。

在服务中，可以通过简单地公开新方法或向现有方法/功能添加新参数来添加新行为（只需确保这些更改向后兼容）。我们真的不需要装饰器或访客模式。唯一的担忧是现有用户不应受到影响。

# c# - jpg 图像的“标签”和“作者”的 EXIF 标记和十六进制代码

> ID：14756952
> 
> 赞同：2
> 
> 时间：2013-02-07T17:12:37.833
> 
> 标签：c#, exif

我无法将您可以在图像属性中看到的“标签”和“作者”的实际 EXIF 标签关联起来。有人可以帮我看看它对应的是哪一个吗？

附言。我指的是[MSDN 上](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.propertyitem.id.aspx)的 EXIF 标签列表-

![图像属性](../Images/26c8a6f016094af01cfadb302492c84e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:34:04.270

这是我对属性的猜测：

作者 = [PropertyTagArtist](http://msdn.microsoft.com/en-us/library/ms534416.aspx#_gdiplus_constant_propertytagartist) ( `0x013B`)

> （以空字符结尾的字符串，指定创建图像的人的姓名。）

标签 = [PropertyTagExifUserComment](http://msdn.microsoft.com/en-us/library/ms534416%28v=vs.85%29.aspx#_gdiplus_constant_propertytagexifusercomment) ( `0x9286`)

> 评论标签。EXIF 用户用来在 PropertyTagImageDescription 中写关键字或评论图像的标签，没有 PropertyTagImageDescription 标签的字符代码限制。

我根据 OP 示例屏幕截图在 Windows 资源管理器中编辑了一个 jpeg，并通过[ExifTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)运行它。输出包含我为`Author`as `Artist`、`XP Author`和添加的值`Creator`。它列出了我为`Tags`、`XP Keywords`和`Subject`添加的值`Last Keyword XMP`。

![在此处输入图像描述](../Images/4c2f692e0dde5c03af757006daf3960d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-27T02:36:48.423

它是 0x9c9e，未在您引用的页面上列出。您可以通过向图像添加标签来找到它，然后运行 ​​exif 查看字段名称（“XP 关键字”），然后在文件上运行 exif -l 以列出所有字段，然后使用 grepping 查找字段名称.

# android - jQuery检测android后退按钮按下并采取行动

> ID：14756954
> 
> 赞同：1
> 
> 时间：2013-02-07T17:12:47.317
> 
> 标签：android, jquery, html, video, back

我在我的网页上使用了一个 html 视频，当视频全屏显示并按下后退按钮时，我注意到在 Android 手机上，它只是离开并清空视频播放器框架并显示暂停按钮。当用户按下手机上的后退按钮时，有没有办法隐藏空播放器或包含视频的 div？

我目前正在为视频标签使用事件 js，并添加了移动 jquery 包，希望按下后退按钮来执行此操作。

对此的任何帮助都会很棒，因为它在网络版本和 ipad/iphone 上都可以正常工作。

# android - jQuery .focus() 在安卓上不起作用

> ID：14756955
> 
> 赞同：3
> 
> 时间：2013-02-07T17:12:50.110
> 
> 标签：android, jquery, html, focus, responsive-design

我正在 Android 上开发一个移动网站，其中有一个选择列表作为菜单。

选择列表位于视图区域之外，我想通过单击 div 来使用浏览器上的选项切换弹出窗口。

我已经尝试了数百万种方法来打开视图以选择一个值，但没有一个是成功的......经过一些研究后，我在[stackoverflow](https://stackoverflow.com/questions/8858094/how-to-focus-an-input-field-on-android-browser-through-javascript-or-jquery/10243010#10243010)上读到 .focus() 函数在 android 设备上被禁用。

我知道这段代码适用于IOS：

```
$(document).ready(function(){
    $("#navigation").click(function(){
        $("#mobileMenu").focus();
    });
}); 
```

使用以下html：

```
<select id="mobileMenu">
    <option value="link1" onclick='openMobileMenuLink' >link one</option>
    <option value="link2" onclick='openMobileMenuLink' >link two</option>
    <option value="link3" onclick='openMobileMenuLink' >link three</option>
</select> 
```

有什么方法可以在不破坏代码的情况下打开 android 设备上的选项透视图（我正在 chrome 中测试）（在 IOS 上运行良好）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:49:45.687

我终于找到了解决方案：

当点击 div 时，会使用 js 生成点击事件。

```
<div onclick="generateSelectDropDown()"> 
```

上面的 div 调用以下函数：

```
window.generateSelectDropDown = function () { 
    var dropdown = document.getElementById('mobileMenu');
    showDropdown(dropdown);
};  

showDropdown = function (element) {
    var event;
    event = document.createEvent('MouseEvents');
    event.initMouseEvent('mousedown', true, true, window);
    element.dispatchEvent(event);
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T17:21:51.273

不确定这是否仍然适用于iOS，但它应该......

```
$(document).ready(function(){
    $("#navigation").click(function(){
        $("#mobileMenu").click();
    });
}); 
```

# c++ - C++ 编译器可以优化对同一指针的重复虚函数调用吗？

> ID：14756958
> 
> 赞同：16
> 
> 时间：2013-02-07T17:12:56.277
> 
> 标签：c++, performance, polymorphism, vtable

假设我有以下代码

```
void f(PolymorphicType *p)
{
    for (int i = 0; i < 1000; ++i)
    {
        p->virtualMethod(something);
    }
} 
```

编译器生成的代码会取消引用1 或 1000 次`p`的`vtable`条目吗？`virtualMethod`我正在使用微软的编译器。

**编辑**

这是为我正在查看的真实案例生成的程序集。 `line->addPoint()`是关注的虚方法。我没有组装经验，所以我慢慢复习...

```
; 369  :        for (int i = 0; i < numPts; ++i)

    test    ebx, ebx
    je  SHORT $LN1@RDS_SCANNE
    lea edi, DWORD PTR [ecx+32]
    npad    2
$LL3@RDS_SCANNE:

; 370  :        {
; 371  :            double *pts = pPoints[i].SystemXYZ;
; 372  :            line->addPoint(pts[0], pts[1], pts[2]);

    fld QWORD PTR [edi+8]
    mov eax, DWORD PTR [esi]
    mov edx, DWORD PTR [eax+16]
    sub esp, 24                 ; 00000018H
    fstp    QWORD PTR [esp+16]
    mov ecx, esi
    fld QWORD PTR [edi]
    fstp    QWORD PTR [esp+8]
    fld QWORD PTR [edi-8]
    fstp    QWORD PTR [esp]
    call    edx
    add edi, 96                 ; 00000060H
    dec ebx
    jne SHORT $LL3@RDS_SCANNE
$LN314@RDS_SCANNE:

; 365  :        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T17:50:12.080

一般来说，不，这是不可能的。该函数可以销毁`*this`并放置新的从该空间中的同一基础派生的其他一些对象。

编辑：更简单，功能可以改变`p`. 编译器不可能知道谁拥有 的地址`p`，除非它是相关优化单元的本地地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:04:21.097

一般来说不可能，但有一些特殊情况可以优化，尤其是在程序间分析中。VS2012全优化和全程序优化编译这个程序：

```
#include <iostream>

using namespace std;

namespace {
struct A {
  virtual void foo() { cout << "A::foo\n"; }
};

struct B : public A {
  virtual void foo() { cout << "B::foo\n"; }
};

void test(A& a) {
  for (int i = 0; i < 100; ++i)
    a.foo();
}
}

int main() {
  B b;
  test(b);
} 
```

至：

```
01251221  mov         esi,64h  
01251226  jmp         main+10h (01251230h)  
01251228  lea         esp,[esp]  
0125122F  nop  
01251230  mov         ecx,dword ptr ds:[1253044h]  
01251236  mov         edx,12531ACh  
0125123B  call        std::operator<<<std::char_traits<char> > (012516B0h)  
01251240  dec         esi  
01251241  jne         main+10h (01251230h) 
```

所以它有效地优化了循环：

```
for(int i = 0; i < 100; ++i)
  cout << "B::foo()\n"; 
```

# doctrine-orm - 禁用 symfony2 命令的输出

> ID：14756959
> 
> 赞同：0
> 
> 时间：2013-02-07T17:13:05.777
> 
> 标签：doctrine-orm, symfony-2.1

我正在编写一些单元测试，需要在单元测试中调用一些命令才能创建测试数据库。但是，当我调用该命令时，它会将通知转储到屏幕上。有没有办法关闭它？我试图执行 --quiet，但它不会抑制通知。

```
$this->runConsole("doctrine:mongodb:schema:create", array("-q"=> null,"--env" => "test")); 
```

……

```
protected function runConsole($command, Array $options = array())
{
    $options = array_merge($options, array('command' => $command));

    return $this->_application->run(new \Symfony\Component\Console\Input\ArrayInput($options));
} 
```

我收到的通知：

```
[2013-02-07 16:24:43] doctrine.INFO: MongoDB query: {"deleteIndexes":true,"db":"xxxxxx","collection":"xxxxxx} [] []
[2013-02-07 16:24:43] doctrine.INFO: MongoDB query: {"deleteIndexes":true,"db":"xxxxxx","collection":"xxxxxx"} [] []
[2013-02-07 16:24:43] doctrine.INFO: MongoDB query: {"deleteIndexes":true,"db":"xxxxxx","collection":"xxxxxx"} [] [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:04:04.453

我在 app/config 目录中添加了一个 config_test.yml 并添加了这些行（从我的 config_dev.yml 复制）：

```
monolog:
    handlers:
       main:
           type:  stream
           path:  "%kernel.logs_dir%/%kernel.environment%.log"
           level: debug
       firephp:
           type:  firephp
           level: info 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:15:53.920

用于`CommandTester`测试您的命令。你可以在这里读更多关于它的内容：

[http://symfony.com/doc/current/components/console/introduction.html#testing-commands](http://symfony.com/doc/current/components/console/introduction.html#testing-commands)

# entity-attribute-value - 是否可以在 PHP ActiveRecord 上设置 EAV 结构？

> ID：14756971
> 
> 赞同：1
> 
> 时间：2013-02-07T17:13:48.270
> 
> 标签：entity-attribute-value, phpactiverecord

在 PHP ActiveRecord 中链接 EAV 表结构中的表以便我可以检索实体及其所有属性/值的最佳方法是什么？

表结构类似于。

```
person (entity)
personAttributes (attributes)
personAttributeVarchar (attribute values)
personAttributeText (attribute values)
personAttributeInt (attribute values) 
```

我发现这个例子使用了带有 EAV 模式的 Ruby 活动记录。这可以使用php活动记录复制吗？

[https://github.com/kostyantyn/example_active_record_as_eav/tree/master/app/models](https://github.com/kostyantyn/example_active_record_as_eav/tree/master/app/models)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-08T04:47:10.227

是我闻到的Magento吗？我希望不是。如果是，那么 Magento 有自己的 EAV 映射方式，您不必重新发明它的方轮。它有适当的机制来做你想做的事情。

如果这是您可以控制的：您不希望按类型有单独的表。这是个坏主意。每个实体应该有一个 EAV 表，包含`entity`、`attribute`和`value`列。对于 99% 的用例，`attribute`并且`value`可以是`string`列（PDO 将所有列值返回为`string`）。如果你想去类型疯狂（3D EAV）你可以强制`attribute`作为一个枚举，或一个实体特定属性表的外键。

对于活动记录类，创建一个关联`$attributes`数组属性，并在`save()`执行原子修剪和应用期间（删除数组中不存在的所有值，插入或替换所有存在的值）。如果您选择了（更简单的）`string attribute`路线，请为您的班级`ArrayAccess`提供修改`$attributes`以增加流畅度。您还可以通过跟踪是否对`bool[] $attributeDiff`属性进行了修改来优化保存。

# magento - Magento 将皮肤和媒体文件夹移动到另一个 URL（子域）

> ID：14756972
> 
> 赞同：1
> 
> 时间：2013-02-07T17:13:55.977
> 
> 标签：magento, subdomain, media, skin

我们为我们的皮肤和媒体数据预订了一个自己的 url（域），我们使用 Magento 1.7.0.2（请注意：它不是子域。它是一个独立的域，只有一个 URL）

如果我们在 System / Configuration / Web 中写入 Base Media 和 Base Skin 文件夹的不同 URL，我们会遇到以下问题：

Magento 搜索 base 和 skin 文件夹，而不是 skin / default / theme - 它所在的位置。Magento 总是关注皮肤/基础。如果我在里面写下新的 URL，Magento 会很好地显示所有滑块图像和其他图像，因为这还不够。但不会显示产品图片。

有任何想法吗？

# kendo-ui - Kendo UI Grid - 如何绑定到子属性

> ID：14756973
> 
> 赞同：4
> 
> 时间：2013-02-07T17:13:57.143
> 
> 标签：kendo-ui, kendo-grid

如何在剑道网格的模型设置中将列/字段绑定到 json 的子属性（在 javascript 中）？例如，我希望网格包含列：FName、LName、Street 和 Address。基本上我想展平Web服务返回的层次结构。

**剑道设置**

```
fields: {
    FName: { type: "string" },
    LName: { type: "string"  },
    // How to map to child properties below?
    Street: { field: "Address.Street" },    // this is wrong             
    City: { field: "Address.City" }         // this is wrong
} 
```

**JSON**

```
{
   "FName": "William",
   "LName ": "Shakespeare",            
   "Address":
          {
          "Address": "123 Street Ln",
          "City": "Philadelphia"
          }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:58:33.407

你不要那样做。您需要创建一个扁平化数据图的“模型”类。您将能够在构建模型期间使用延迟加载。要么通过控制器将此模型发送到视图，要么将其附加到发送到视图的更大的视图模型（只是模型的模型而不是 MVVM）。然后将其绑定到网格。

但是，您会更乐意使用 Ajax 加载与 JSON 相同的模型，这是我认为您正在尝试做的事情。

模型

```
public class ContactModel
{
    public string FName { get; set; }
    public string LName { get; set; }
    public string Address { get; set; }
    public string City { get; set; }

    public ContactModel()
    {}
    public ContactModel(Contact contact) // IContact is better if you have Interfaces
    {
        FName = contact.FName;
        LName = contact.LName;
        Address = contact.Address.Address;
        City = contact.Address.City;
    }

    // Neat Linq trick to convert database query results directly to Model
    public static IList<ContactModel> FlattenToThis(IList<Contact> contacts)
    {
        return contacts.Select(contact => new ContactModel(contact)).ToList();
    }
} 
```

控制器

```
public JsonResult ReadContacts([DataSourceRequest]DataSourceRequest request)
{
    var contacts = _contactsDataProvider.Read(); // Your database call, etc.
    DataSourceResult result = ContactModel.FlattenToThis(contacts).ToDataSourceResult(request);
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

但我认为威尔永远不会去费城。;)

# c - 有效地将无符号转换为有符号

> ID：14756974
> 
> 赞同：0
> 
> 时间：2013-02-07T17:14:03.390
> 
> 标签：c, optimization, casting, c99

当我有一个要转换为有符号的无符号短时，我总是减去 32768。

这是最快的方法，还是有更快的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:27:26.743

如果该值介于 0 到`SHRT_MAX`（含）之间，则无需担心并且强制转换 ( `(short)`) 是可选的（除非您的编译器偏执或配置为偏执）。

如果该`unsigned short`值可以大于`SHRT_MAX`，则将其转换为的唯一合法方法`short`是：

```
#include <limits.h>

short ushort2short(unsigned short s)
{
  if (s <= SHRT_MAX)
    return s; // or return (short)s;
  s -= SHRT_MAX + 1; // now s is 0 ... SHRT_MAX
  return (short)s - SHRT_MAX - 1;
} 
```

当然，这依赖于签名短裤是 2 的补码`SHRT_MIN`= - `SHRT_MAX`- 1。

现代编译器会优化掉这个函数内部的所有废话，只生成代码来返回`s`。

**编辑**：用 gcc 4.6.2 编译了上面的`gcc -Wall ush2sh.c -O2 -S -o ush2sh.s`汇编代码：

```
 .file   "ush2sh.c"
        .text
        .p2align 2,,3
        .globl  _ushort2short
        .def    _ushort2short;  .scl    2;      .type   32;     .endef
_ushort2short:
LFB0:
        .cfi_startproc
        movl    4(%esp), %eax
        ret
        .cfi_endproc
LFE0: 
```

# asp.net - 是否可以添加逻辑来影响 RequiredFieldValidator 的行为方式？

> ID：14756976
> 
> 赞同：1
> 
> 时间：2013-02-07T17:14:05.203
> 
> 标签：asp.net, validation

我在 Jquery 创建日期选择器的页面上添加了文本框。问题是，文本框在回发后不保存该值。经过研究，我发现[以下解决方案](http://jqueryimplementations.blogspot.com/2013/01/aspnet-textbox-doesnot-retain-value-on.html)非常有效，即文本框在回发后保持其值。

```
<th>
   <asp:CustomValidator ID="customStartDate" runat="server" 
    ErrorMessage="Start Date" Display = "None" ControlToValidate = "txtStartDate"
    ValidationGroup ="HireGroup" ClientValidationFunction ="StartDate_Validate"/>
    Start Date: 
</th>
<td>
   <asp:TextBox ID="txtStartDate" runat="server" Width = "140" ReadOnly = "true"
   TabIndex = "5" CssClass = "datepicker" ></asp:TextBox>
   <asp:HiddenField ID="hfDatePicker" runat="server"/>
</td> 
```

这是Jquery代码

```
//Set datePicker
function SetUpDatePicker() {
 var $allDatepickers = $('.datepicker');
 $.each($allDatepickers, function () {
    $(this).datepicker({
        showOn: "button",
        buttonImage: "Images/calendar.gif",
        buttonImageOnly: true,
        minDate: 1,
        altField: '[id*="hfDatePicker"]'
    });

    var $hfDatePicker = $('[id*="hfDatePicker"]');
    var val = $($hfDatePicker).attr('Value');
    $(this).val(val);

    var len = $($hfDatePicker).attr('Value').length;
    if (len > 0) {
        $(this).datepicker("setDate", new Date($($hfDatePicker).attr("Value")));
    }
  });
} 
```

现在我有一个不同类型的问题。我无法将 RequiredFieldValidator 用于 HiddenField，因为我收到错误“**无法验证隐藏字段**”。

我正在尝试使用 CustomValidator，但问题是该控件仅在**ControlToValidate**不为空时才起作用。

我检查了RequiredFieldValidator 的所有属性，没有看到类似**ClientValidationFunction**属性的东西。

关于如何解决该问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:22:08.303

（根据@Richard77 的评论，我会将其作为实际答案。）

你有几个选择...

不要使用 a `<asp:Hidden>`，而是使用普通`<asp:TextBox>`但使用`style='display:none;`属性隐藏它。这将允许您根据`<asp:RequiredFieldValidator>`需要使用。

另一种方法是使用`<asp:CustomValidator>`并添加`ValidateEmptyText='true'`属性。即使 TextBox 为空，这也会强制验证器运行代码。

**更新**- 在考虑了这一点之后，我不会推荐以下内容，因为（我能想到的）不可能覆盖该函数的服务器端版本，因此会让您容易受到漏洞的影响。如果您纯粹出于视觉原因使用它，并且不需要在服务器上检查实际数据，那很好 - 但是，这是一种不寻常的情况。

最后一个选项（但不是我必须推荐的）是覆盖由 ASP.NET 生成的函数。这需要放置在您的页面上由 ASP.NET 生成的脚本链接之后的某个位置，例如...

```
function RequiredFieldValidatorEvaluateIsValid(val) {
  if(val.controltovalidate=="myValidatorId"){
    // your coding here
  } else {
    return (ValidatorTrim(ValidatorGetValue(val.controltovalidate)) != ValidatorTrim(val.initialvalue))
  }
} 
```

# asp.net - WebForms 中的 Async/Await - 在页面生命周期结束之前如何继续运行？

> ID：14756977
> 
> 赞同：5
> 
> 时间：2013-02-07T17:14:06.730
> 
> 标签：asp.net, webforms, async-await

我一直在 WebForms 中测试异步，这一次，我的问题不是关于如何做某事，而是关于已经工作的东西如何工作。这是我的测试代码：

```
protected override void OnPreRender(EventArgs e)
{
    Response.Write("OnPreRender<Br>");
}
protected override void OnPreRenderComplete(EventArgs e)
{
    Response.Write("OnPreRenderComplete<Br>");
}
protected async override void OnLoadComplete(EventArgs e)
{
    Response.Write("OnLoadComplete<br>");
    var t1 = Task.Factory.StartNew(() => {
        System.Threading.Thread.Sleep(2000);
        return 1;
    });

    //This actually does run:
    Response.Write((await t1).ToString());
} 
```

所以我的任务暂停了一会儿，然后写出结果。我的问题是 - 我不希望这会起作用，因为 OnLoadComplete 方法已经产生了控制权 - 我希望页面实际上完成渲染并在我的任务返回之前返回给客户端。

实际输出为：

```
OnLoadComplete
OnPreRender
1OnPreRenderComplete 
```

因此很明显，OnLoadComplete 方法产生了控制权，以便 OnPreRender 可以运行，然后控制权返回给 OnLoadComplete。我的预期结果是“1”永远不会打印，因为随后的事件会触发，并且页面的线程会被杀死，或者在发送响应后会发生任务后写入。我想，鉴于上述情况，即使我延迟 10 秒，结果也完全一样，这并不奇怪。

我假设 WebForm 引擎中有一些连接可确保在页面生命周期的下一阶段继续之前完成所有等待项。有谁知道这是怎么发生的？我害怕在需要在其他事件之前完成的方法中使用 async/await，因为担心继续为时已晚，但如果它是内部处理的，那我就不用担心了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T17:37:29.167

对于 ASP.NET，您应该只使用`async`.NET 4.5 上的方法。我会在最后解释为什么。

我有[一篇文章`SynchronizationContext`](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)有​​助于填补关于它如何在 ASP.NET 上工作的空白。首先，请注意 ASP.NET 很久以前就支持异步操作（.NET 2.0 IIRC）。您可以通过几种不同的方式注册异步操作，但对于此描述，我们将重点关注`SynchronizationContext.OperationStarted`.

ASP.NET 为每个请求创建一个`SynchronizationContext`，并且它知道在所有注册的操作都完成之前（通过调用`SynchronizationContext.OperationCompleted`）请求才完成。[基于事件的异步模式组件](http://msdn.microsoft.com/en-us/library/ms228969.aspx)（例如）将在它们启动和完成时自动`BackgroundWorker`通知。`SynchronizationContext`

同样，`async void`方法（新[的基于任务的异步模式](http://msdn.microsoft.com/en-us/library/hh873175.aspx)`SynchronizationContext`）将在它们开始和完成时自动通知。`OnLoadComplete`因此，当您作为方法重写时`async void`，编译器会为您插入代码，这些代码将`OperationStarted`在开始`OperationCompleted`时和完成时调用。

到目前为止一切顺利 - ASP.NET 现在知道要保持请求处于活动状态，直到该请求的所有异步操作都完成为止。即使没有线程处理请求也是如此。

现在需要注意的是：.NET 4.5 之前的 ASP.NET 将在*请求*级别处理此问题。在 ASP.NET 4.5 中，生命周期管道变得更加智能，因此它会延迟页面生命周期，直到异步操作完成。对于旧的 ASP.NET，“pre”处理程序将在管道中的该点*开始，但可能要到稍后才会完成。*新的 ASP.NET 将延迟页面执行的其余部分，以确保`async`处理程序在生命周期中继续之前完成。

此外，ASP.NET 4.5 将检测您是否使用了`async`不应该使用的处理程序，并将通知您错误。

# python-2.7 - python中的格式转换

> ID：14756978
> 
> 赞同：0
> 
> 时间：2013-02-07T17:14:06.880
> 
> 标签：python-2.7, formatting

我有如下数据

```
>P1;gi|467971|gb|AA3.1|

-MASLAALLPLLALLVLCRLDPAQA
QAEPGAGG-LQELALQ---KRGIVE
QCCTSICSLYQLEN---
*
>P1;gi|307072|gb|AAA59179.1|

-MALWMRLLPLLALLALWGPDPAAA
FPK-TR-EAPGAGS-LEGSLQ--KRE
QCCTSICSLYQLENYCN
*
>P1;gi|387059|gb|AAA31.1|

-MALVLALLALWNTNQAFVS-RHLC
FYIPK-DRREG-LQLQ---KRGIVD
QCCTGTCTRHQLQS---
* 
```

在 python 中，我如何将这些转换为如下所示的数据

-MASLAALLPLLALLVLCRLDPAQAQAEPGAGG-LQELALQ---KRGIVEQCCTSICSLYQLEN---,- MALWMRLLPLLALLALWGPDPAAAFPK-TR-EAPGAGS-LEGSLQ--KREQCCTSICSLYQLENYCN,-MALVLALLALWNTNQAFVS-RHLCFYIPK-DRREG-LQLQ---KRGIDQCCTGTCTRHQLQS---

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:45:31.877

考虑到 file1.txt 中的数据可用，那么您可以使用这段代码：

```
file_handle = open(r'C:\Users\kvivek\Desktop\file1.txt', 'r')
fileContent = file_handle.readlines()
file_handle.close()

output = ''
for line in fileContent:
    if ">P1;gi" in line:
        continue
    x = ''.join(line.strip())
    output = output + x

// replace all * with comma and then use strip function used to remove the last comma
finalOutput = output.replace("*",",").rstrip(',')
print finalOutput 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:28:55.330

`data`你的“字符串”在哪里？

```
>>> lines = data.replace('*', ',').splitlines()
>>> ''.join(line for line in lines if line and not line.startswith('>')).rstrip(',') 
```

> '-MASLAALLPLLALLVLCRLDPAQAQAEPGAGG-LQELALQ---KRGIVEQCCTSICSLYQLEN---,-MALWMRLLPLLALLALWGPDPAAAFPK-TR-EAPGAGS-LEGSLQ--KREQCCTSICSLYQLENYCN,-MALVLALLALWNTNQAFVS-RHLCFYIPK-DRREG-LQLQ---KRGIDQCCTGTCTRHQLQS---'

# three.js - 对象溢出剪裁三个JS

> ID：14756979
> 
> 赞同：5
> 
> 时间：2013-02-07T17:14:08.857
> 
> 标签：three.js, webgl

无论如何使用三个js来定义一个对象的剪辑区域？例如，我有一个包含子对象的父对象，我想根据视口剪辑子对象。

就像是...

```
// Create container and children
var container = new THREE.Object3D();
for(var i = 0; i < 100; i++) {
    var geometry = new THREE.PlaneGeometry(i, 0, 0);
    var material = new THREE.MeshBasicMaterial({color: 0x00ff00});
    var child = new THREE.Mesh(geometry, material);
    container.add(child);
}

// Create bounding box which is my viewport
var geom = new THREE.Geometry();
geom.vertices.push(new THREE.Vector3(0, 0, 0));
geom.vertices.push(new THREE.Vector3(10, 0, 0));
geom.vertices.push(new THREE.Vector3(10, 1, 0));
geom.vertices.push(new THREE.Vector3(0, 1, 0));
geom.computeBoundingBox();

// Magic property (THIS DOESNT EXIST)
container.clipRegion = geom.boundingBox; 
```

最后一部分不存在，但是有没有办法用三个 js 来实现呢？我可能想为父级中的子级设置动画，并且只显示边界框定义的可见区域。

***更新，添加了下图来描述我的问题。***

![剪辑区域](../Images/0cf71a07605aecacc003718c8378856a.png)

生成的红色区域是我想要使其可见的区域，同时掩盖了该区域之外的任何东西。所有其他内容都应该可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-10T10:54:31.923

我已经能够用另一个对象剪辑一个对象。

在这里查看结果

[小提琴](http://jsfiddle.net/LK84y/9/show/)

在这个小提琴中，你会看到一个立方体被一个球体夹住。由于这是一个演示，所以有些东西不是最终代码。

您在屏幕右侧有另一个摄像机视图，您可以从高处、静态点视图中看到场景。

此外，立方体中应该被剪裁的部分显示为绿色，而不是显示为绿色。在片段着色器中，您必须取消注释丢弃语句才能实现真正的剪辑。

```
if (shadowColor.r < 0.9) {
    gl_FragColor = vec4 (0.3, 0.9, 0.0, 1.0);
} else {
    gl_FragColor = vec4 (0.8, 0.8, 0.8, 1.0);
    // discard;
} 
```

它通过创建可以投射阴影的聚光灯来工作

```
clippingLight = new THREE.SpotLight (  0xafafaf, 0.97  );
clippingLight.position.set (100, 200, 1400);
clippingLight.castShadow = true;
scene.add (clippingLight); 
```

必须进行剪裁的对象投射阴影，而要剪裁的对象接收阴影。

然后，在动画中，我们将此灯光设置为相机位置

```
function animate() {
cameraControls.update();
clippingLight.position.x = camera.position.x;
clippingLight.position.y = camera.position.y;
clippingLight.position.z = camera.position.z;
requestAnimationFrame(animate);
} 
```

现在，必须在剪切对象中可见的部分是阴影处的部分。我们需要一个着色器来处理它。片段着色器代码取自three.js 库中的标准代码，只是稍作修改。

我是使用three.js 的新手，所以代码中可能有很多可以做得更好的东西。接受这个想法:-)

# python - 使用 Python 错误连接 MySQl：找不到函数“inet_pton”

> ID：14756980
> 
> 赞同：0
> 
> 时间：2013-02-07T17:14:12.033
> 
> 标签：python, mysql, sql, database

```
import mysql.connector

    cnx = mysql.connector.connect(user=user, password=password,host=host,database=database)
    cursor = cnx.cursor()
    add_employee = ("INSERT INTO tbl_gps "
    "(Locating, MainPower, Acc, PowerOff, Alarm,Speed,Direction,Latitude,Longitude,DateTime,IOState,OilState,MainID) "
    "VALUES (%s, %s, %s, %s, %s,% s, %s, %s, %s, %s, %s, %s, (SELECT MainID From tbl_device WHERE DeviceID = %s))")
    data_employee = {
                  'Locating': 1,
                  'MainPower': 1,
                  'Acc': 1,
                  'PowerOff': 1,
                  'Alarm': 0x80,
                  'Speed': 1,
                  'Direction': 300,
                  'Latitude': 10.00,
                  'Longtitude': -20.00,
                  'DateTime': '2013/2/8 01:00:00',
                  'IOState': 0,
                  'OilState': 0,
                  'MainID': 'NR09533'
                }
    cursor.execute(add_employee, data_employee)
    cnx.close() 
```

当我调试得到以下错误：

```
AttributeError: function 'inet_pton' not found 
```

我的代码有什么问题？请帮助修复它，非常感谢！
该连接器是从 Mysql 官方网站下载的，
我使用 Python 3.3
我在 google 中找到了这个，这是一个 Mysql Bug？因为我使用的是 Window XP。 [http://bugs.mysql.com/bug.php?id=68065](http://bugs.mysql.com/bug.php?id=68065)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:01:49.790

问题从[http://pypi.python.org/pypi/mysql-connector-python](http://pypi.python.org/pypi/mysql-connector-python)下载连接器后解决，mysql官网连接器无法使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:49:16.497

哦，这就是重点，我遇到了同样的问题。谢谢，它确实有效。似乎privous版本（1.0.7）还可以，而v1.0.8很糟糕。

附言。真正的下载链接是： [http ://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-1.0.7.zip](http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-1.0.7.zip)

安装教程在目录“doc”中。

# matlab - 计算特定频率范围的功率谱下面积

> ID：14756983
> 
> 赞同：1
> 
> 时间：2013-02-07T17:14:18.100
> 
> 标签：matlab, range, fft, frequency, spectrum

下面我介绍我的代码如何计算信号的功率谱：

```
Fs=100;
n = length(x) (in my example always n=160);

whann = window(@hann,n).';
x = whann.*x';

xdft = fft(x);
xdft = (2/length(x))*xdft(1:length(x)/2+1);
xdft = abs(xdft);
xdft=xdft.^2;
freq = 0:Fs/length(x):Fs/2; 
```

现在，我想计算功率谱下的面积，但仅适用于 4-6 Hz 的频率范围。矢量频率的前 32 个元素如下所示：

```
freq = [0,00    0,28    0,56    0,83    1,11    1,39    1,67    1,94    2,22    2,50    2,78    3,06    3,33    3,61    3,89    4,17    4,44    4,72    5,00    5,28    5,56    5,83    6,11    6,39    6,67    6,94    7,22    7,50    7,78    8,06    8,33] 
```

所以，我只能找到 4,17 Hz- 6,11 Hz 之间的区域。

您能否建议我，如何计算特定频率范围的频谱面积（如上所述，例如 4-6 Hz）？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:36:48.500

我将按如下方式进行：

```
idx = find(freq>=4 & freq<=6);

trapz(freq(idx),spectrum(idx)) 
```

如果我理解你的问题是正确的，上面所说的应该会引导你得到你想要估计的结果。

**编辑**

由于您没有 和 的频谱值`freq=4Hz`，因此`freq=6Hz`我建议插入如下值：

```
int_spec = exp(interp1(log(freq),log(spec),log(4:.1:6),'linear','extrap')) 
```

然后打电话

```
trapz(4:.1:6,int_spec) 
```

# python - 我可以在一个 python 正则表达式查询中使用多个搜索条件来返回一个元组吗？

> ID：14756984
> 
> 赞同：3
> 
> 时间：2013-02-07T17:14:21.463
> 
> 标签：python, regex, tuples

我有一个日志文件，当程序在不同的日子运行时，它会附加新的日志。每次迭代都会有一个新的产品版本和启动开关。我需要每次迭代中的`Product Version: [0-9-]*`and作为一个元组。`Launch Switch: \w*`

目前我正在这样做：

```
ver = re.findall(r'(?<=Product Version: )[0-9.]*', s)

launch = re.findall(r'(?<=Launch Switch: )\w*', s) 
```

然后稍后我将遍历`ver`并`launch`创建元组。它有效，但它并不漂亮，我确信有一种更 Pythonic 的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:32:47.880

您可以在正则表达式模式中使用多个捕获组；`re.findall`然后将它们作为元组返回。例如：

```
>>> data = "Product Version: 0.0.1 | Launch Switch: hello | Product Version: 2.3.4 | Launch Switch: world"
>>> re.findall("Product Version: ([0-9.]+).*?Launch Switch: (\w+)", data)
[('0.0.1', 'hello'), ('2.3.4', 'world')] 
```

从[文档](http://docs.python.org/2/library/re.html#re.findall)：[_`re.findall`](http://docs.python.org/2/library/re.html#re.findall)

> 返回字符串中模式的所有非重叠匹配，作为字符串列表。从左到右扫描字符串，并按找到的顺序返回匹配项。如果模式中存在一个或多个组，则返回组列表；**如果模式有多个组，这将是一个元组列表**。空匹配包含在结果中，除非它们触及另一个匹配的开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:24:15.597

你可以使用`zip`：

```
ver_launch_tuples = zip(re.findall(r'(?<=Product Version: )[0-9.]*', s),
                        re.findall(r'(?<=Launch Switch: )\w*', s)) 
```

这将创建一个 (ver,launch) 元组列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:58:11.760

我不确定这是多么“pythonic”，但它会从包含这些项目的字符串中获取您的元组：

```
import re
str = """Product Version: 23423
Launch Switch: foiwjefj"""
tuple([word for sublist in [[x for x in f if x != ''] for f in re.findall(
    r'Product Version: (\d+)|Launch Switch: (\w+)', str)] for word in sublist]) 
```

这当然做了一些假设：

1.  `Product Version`并且`Launch Swtich`总是按那个顺序来
2.  不为空
3.  每个字符串只有一个。

# java - 列表循环内的重复条目

> ID：14756985
> 
> 赞同：0
> 
> 时间：2013-02-07T17:14:23.923
> 
> 标签：java, list, arraylist

我正在使用以下代码，最后我在 calssEntries 列表中看到了最后一个重复的值，我的意思是，如果我调试它，我可以看到正确的数据，但在第二次迭代中，第一个数据条目的值被覆盖，我看到了第二个两次等等我在这里想念什么？

```
String memberName = null;
String memberValue = null;
List<String> memberList = new ArrayList<String>();
List<String> memberValueList = new ArrayList<String>();+ArrayList<ClassEntry> calssEntries = new ArrayList<ClassEntry>();

...
while (dataRow != null) {
    memberList.clear();
    memberValueList.clear();

    for (int i = 1; i < dataArray.length; i += 2) {         
        memberName = dataArray[i];
        memberList.add(memberName);
        memberValue = dataArray[i + 1];
        memberValueList.add(memberValue);
    }

    ClassEntry classEntry = new ClassEntry();
    classEntry.setClassName(className);
    classEntry.setMemberName(memberList);
    classEntry.setMemberValue(memberValueList);
    calssEntries.add(classEntry);

.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:21:05.877

尝试这个

```
for (int i = 1; i < dataArray.length; i += 2) {

  int j = i;

  memberName = dataArray[i];              
  memberList.add(memberName);                
  memberValue = dataArray[j + 1]; 
  memberValueList.add(memberValue);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:29:03.173

我认为问题在于您需要在 while 循环中创建 memberList 和 memberValueList 的新实例。就像是：

```
calssEntries = new ArrayList<ClassEntry>();

...
while (dataRow != null) {
List<String> memberList = new ArrayList<String>();
List<String> memberValueList = new ArrayList<String>();
...
... 
```

在您的代码中，calssEntries 的条目是指 memberList 和 memberValue 的相同（单个）实例。

# java - 如何将字符串和int添加到按钮的列表框中

> ID：14756993
> 
> 赞同：1
> 
> 时间：2013-02-07T17:14:46.630
> 
> 标签：java, vector, controller

我在列表框中添加 int qty 和 string getname 时遇到一些问题，显示的错误位于 jlist.add 中间的某处。任何帮助请谢谢！

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt)
{                                         
    int id = Integer.parseInt(jTextField1.getText());
    int qty = Integer.parseInt(jTextField2.getText());

    purchasecontroller.PurchaseProduct(id, qty);
    String getname = displaycontroller.SearchbyProductName(id);
    jLabel4.setText( "" + getname );
    jLabel3.setText("" + qty);
    jList1.add( "" + getname + "" qty );

    String getprice = displaycontroller.SearchbyProductPrice(id);
    int total = qty * Integer.parseInt (getprice);
    jLabel11.setText("" + total );
} 
```

jList1.add("" + getname + "" + 数量); 我无法添加这就是问题，添加是红色下划线！，它说找不到符号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:30:01.723

该方法`JList#add`继承自`Container`并且不允许您将列表元素添加到组件的模型中。您可以使用 a`DefaultListModel`并添加：

Java 1.6：

```
DefaultListModel listModel = new DefaultListModel();
JList list = new JList(listModel); 
```

或 Java 1.7：

```
DefaultListModel<String> listModel = new DefaultListModel<>();
JList<String> list = new JList<>(listModel); 
```

和：

```
listModel.addElement(getname + qty); 
```

# laravel - Laravel 如何处理来自浏览器的 PUT 请求？

> ID：14756994
> 
> 赞同：14
> 
> 时间：2013-02-07T17:14:48.067
> 
> 标签：laravel

我知道浏览器只支持`POST`和`GET`请求，而 Laravel`PUT`使用以下代码支持请求：

```
<?= Form::open('/path/', 'PUT'); ?>
    ... form stuff ...
<?= Form::close(); ?> 
```

这将产生以下 HTML

```
<form method="POST" action="http://example.com/home/" accept-charset="UTF-8">
    <input type="hidden" name="_method" value="PUT" />
    ... form stuff ...
</form> 
```

框架如何处理这个问题？它是否在决定将请求发送到哪个路由***之前***捕获`POST`请求？它是否使用 ajax 将实际值发送到框架？*`PUT`*

 ** * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-07T17:17:40.237

它插入一个隐藏字段，并且该字段提到它是一个 PUT 或 DELETE 请求

[见这里](http://laravel.com/docs/views/forms)：

```
echo Form::open('user/profile', 'PUT'); 
```

结果是：

```
<input type="hidden" name="_method" value="PUT"> 
```

然后它在`request.php`核心文件中路由时查找 _method（在代码中查找“欺骗”）——如果检测到它——将使用该值路由到正确的 restful 控制器。

它仍然使用“POST”来实现这一点。没有使用ajax。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-07T17:18:51.743

Laravel 使用 symfony Http Foundation 来检查这个 _method 变量并根据其内容将请求更改为 PUT 或 DELETE。是的，这发生在路由发生之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T19:49:49.600

PUT 通常指更新请求。

当您使用 laravel Blade 模板打开表单时，

```
{{ Form::open('/path/', 'PUT') }} 
```

它将在表单内创建一个隐藏字段，如下所示，

```
<input type="hidden" name="_method" value="PUT" /> 
```

为了让您在控制器中处理 PUT 请求，您需要创建一个带有 put 前缀的方法，

```
for example, putMethodName() 
```

所以如果你指定，

```
{{ Form::open('controller/methodName/', 'PUT') }} 
```

内部形式：打开。然后你需要创建一个控制器方法如下，

```
class Controller extends BaseController {
    public function putMethodName()
    {
        // put - usual update code logic goes here
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-19T22:59:38.347

您还可以在打开的表单中使用数组，如下所示：

```
{{ Form::open( array('route' => array('equipment.update', $item->id ),
'role' => 'form',
'method' => 'put')) }} 
```

只需将方法更改为您想要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-21T04:20:11.060

虽然答案较晚，但我认为对于发现此问题且无法使其 API 工作的任何其他人添加此内容很重要。

像这样使用 Laravel 的资源路由时：

```
Route::resource('myRoute','MyController'); 
```

它将期望 a`PUT`以调用该`update()`方法。为了使其正常工作（在表单提交之外），您需要确保将*ContentType*作为**x-www-form-urlencoded**传递。这是[表单的默认设置](http://www.w3.org/TR/html401/interact/forms.html)，但使用 cURL 或使用[Postman](http://www.getpostman.com/)等工具发出请求将无法正常工作，除非您设置此选项。*

# prestashop - 在 Prestashop 1.5 中限制某个国家/地区的类别

> ID：14756995
> 
> 赞同：1
> 
> 时间：2013-02-07T17:14:50.080
> 
> 标签：prestashop

我需要在 Prestashop 1.5 中将一个类别限制为一组国家/地区。此限制将阻止运输属于此类的产品；因此，用户仍然可以看到产品，但无法购买。

理想情况下，我想开发一个模块，在类别的编辑页面中插入国家列表（复选框样式，如模块 -> 支付页面 (AdminPayment)），但我无法这样做。

为什么我不能简单地将以下代码粘贴到 renderForm() 函数中？如果我这样做，只有描述是可见的......

```
array(
    'items' =>Country::getCountries(Context::getContext()->language->id),
    'title' => $this->l('Country restrictions'),
    'desc' => $this->l('Please mark the checkbox(es) for the country or countries for which you want to block the shipping.'),
    'name_id' => 'country',
    'identifier' => 'id_country',
    'icon' => 'world',
    ), 
```

**编辑：** 我设法让国家名单工作：

```
array(
    'type' => 'checkbox',
    'label' => $this->l('Restricted Countries').':',
    'class' => 'sel_country',
    'name' => 'restricted_countries',
    'values' => array(
        'query' => Country::getCountries(Context::getContext()->language->id),
        'id' => 'id_country',
            'name' => 'name'
    ),
    'desc' => $this->l('Mark all the countries you want to block the selling to. The restrictions will always be applied to every subcategory as well')
             ), 
```

现在，我可以通过检查是否在 postProcess 函数中提交了值“submitAddcategory”并在那里运行插入查询来保存这些值。同样，我也可以从数据库中加载被封锁国家的 ID，但是**如何**在国家列表中勾选相应的选择框？

我最初的“快速而肮脏”的想法是在 document.ready() 中使用 jQuery 选择器，但是代码会在其他所有内容之前插入，因此它不会工作，因为 jQuery 甚至还没有加载。

如何才能做到这一点？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:30:47.047

我在 renderForm() 函数结束之前使用以下代码解决了这个问题。*Pièce de* résistance 是 $this->fields_value，遗憾的是我不知道它的存在。

```
public function getRestrictedCountries($obj)
    {
        // Loading blacklisted countries
        $country = Db::getInstance(_PS_USE_SQL_SLAVE_)->executeS('
            SELECT DISTINCT id_country
            FROM `'._DB_PREFIX_.'category_country_restriction`
            WHERE id_category = ' . (int)Tools::getValue('id_category') . ';');

        $blacklisted_countries = array();

        if (is_array($country))
            foreach ($country as $cnt)
                $blacklisted_countries[] = $cnt['id_country'];

        // Global country list
        $c_todos = Country::getCountries(Context::getContext()->language->id);

        // Crossmatching everything
        foreach ($c_todos as $c)
            $this->fields_value['restricted_countries_'.$c['id_country']] = Tools::getValue('restricted_countries_'.$c['id_country'], (in_array($c['id_country'], $blacklisted_countries)));
    } 
```

PS：我正在阅读的表格基本上是“类别”和“国家”之间的关联表

# macos - 在 Automator 中将图像大小调整为特定的像素宽度和高度

> ID：14756996
> 
> 赞同：5
> 
> 时间：2013-02-07T17:14:55.477
> 
> 标签：macos, automator

我一直在寻找大约一个小时来尝试找到一种方法来做到这一点。

Automator 中是否有任何方法可以将图像调整为指定的宽度和高度，而不仅仅是最长的尺寸？我需要我的输出图像具有特定的像素宽度和高度，即使它不成比例。

我有 Photoshop，那么有没有办法让 Automator 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T08:14:49.190

使用标准 Automator 步骤无法满足您的需求。

无论如何，你可以使用[这个](https://gist.github.com/riccardomarotti/4737373)Python 脚本：

```
import sys
import CoreGraphics

RESIZE_WIDTH = 100
RESIZE_HEIGHT = 100

def resizeimage(source_image_file, target_image_file, target_width, target_height):
    source_image = CoreGraphics.CGImageImport(CoreGraphics.CGDataProviderCreateWithFilename(source_image_file))

    source_width = source_image.getWidth()
    source_height = source_image.getHeight()

    source_image_rect = CoreGraphics.CGRectMake(0, 0, source_width, source_height)
    new_image = source_image.createWithImageInRect(source_image_rect)

    colors_space = CoreGraphics.CGColorSpaceCreateDeviceRGB()
    colors = CoreGraphics.CGFloatArray(5)
    context = CoreGraphics.CGBitmapContextCreateWithColor(target_width, target_height, colors_space, colors)
    context.setInterpolationQuality(CoreGraphics.kCGInterpolationHigh)
    new_image_rect = CoreGraphics.CGRectMake(0, 0, target_width, target_height)
    context.drawImage(new_image_rect, new_image)
    context.writeToFile(target_image_file, CoreGraphics.kCGImageFormatJPEG)

def main(argv):
    for image_file_name in argv:
        resizeimage(image_file_name, image_file_name, RESIZE_WIDTH, RESIZE_HEIGHT)

if __name__ == "__main__":
    main(sys.argv[1:]) 
```

设置`RESIZE_WIDTH`并设置`RESIZE_HEIGHT`为您需要的任何值。

将其添加为一个`Run Shell Script`步骤：

![在此处输入图像描述](../Images/6c01823b53dd7b6835c0857645d4d95b.png)

并设置`Shell`为`/use/bin/python`和`Pass input`。`as arguments`

**编辑**：有一种更简单的方法（由[epatel](https://stackoverflow.com/users/842/epatel)建议）来实现这一点，使用`sips`.

`Run Shell Script`您可以使用以下命令创建一个步骤：

```
sips --resampleHeightWidth 100 100 "$@" 
```

注意：双引号需要将 $@ 括起来，否则会出错。

![在此处输入图像描述](../Images/a60c7ac3719792817ec7b0c4b7bf3d1a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-06T11:37:34.667

当然，使用“裁剪图像”操作并根据需要设置“裁剪前缩放”、“宽度”和“高度”选项。您可能还会发现“Pad Images”操作很有帮助。