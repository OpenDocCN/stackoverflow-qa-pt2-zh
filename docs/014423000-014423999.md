# StackOverflow 问答 14423000-14423999

# c# - 是否有一种快速、简单且免费的方法来自动生成 IComparable C# 类的实现？

> ID：14423007
> 
> 赞同：2
> 
> 时间：2013-01-20T08:54:38.100
> 
> 标签：c#, vsix, icomparer

我知道 Resharper 可以编码生成一个比较器实现（并且做得非常好），但我正在寻找一种**免费**的方法来做同样的事情。我有一个客户不太可能为每个开发人员投资 250 美元，但开发人员仍然希望能够在几秒钟内创建比较器，而不是几分钟（或更多，取决于对象的复杂性）。

我会寻找 VSIX 扩展或各种加载项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:07:38.627

![在此处输入图像描述](../Images/f87d61fa9c08a1b230be3a5935bce2d1.png) ![在此处输入图像描述](../Images/cb9769f782a409943c0b7763dfedb5a5.png)

我猜 Visual Studio (2008/2010) 有它自己的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:24:48.310

您可以利用 VS 的片段功能。您可以制作自己的自定义。[这是一个`IEquatable<T>`](http://madrat.net/coding/dotnet/snippets/equatable.vsi)。您可以轻松地为`IComparable<T>`. 只需确保将`.snippet`文件放在适当的位置即可。也许`~home\Visual Studio XXX\Code Snippets\Visual C#\My Code Snippets\`

# c++ - 想澄清一些 GSS-API kerberos 编程的一般概念

> ID：14423008
> 
> 赞同：0
> 
> 时间：2013-01-20T08:54:46.440
> 
> 标签：c++, kerberos, gssapi

我是 GSS-API 的新手。我在一个项目中，其目标是实现 KERBEROS。
我阅读了麻省理工学院的应用程序开发人员文档 - [http://web.mit.edu/kerberos/krb5-latest/doc/appdev/index.html](http://web.mit.edu/kerberos/krb5-latest/doc/appdev/index.html)链接。
并阅读 RFC-2744 GSS-API C BINDINGS。

我的问题是，
* **KERBEROS 协议**包括 -
AS-REQ、AS-REP、TGS_REQ、TGS-REP、AP-REQ、AP-REP
* **GSS-API**包括 -
凭证管理例程（例如 gss_acquire_cred）、上下文级别例程（例如 gss_init_sec_context）等

如何利用 GS​​S-API 例程来实现 kerberos？
因为，我没有看到 kerberos 中有任何 TICKET 生成例程、TIMESTAMP 嵌入例程等？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:47:47.870

好的，首先，gss-api 是（通用安全服务 api）。它被实现为 kerberos api 之上的一个层。请记住，gssapi 不需要使用 kerberos（它也可以很容易地使用其他一些身份验证协议）。

GSS-API 没有获取 TGT 的方法。这是由 kerberos api 完成的（您可以编写一些基于 krb5 api 的代码来获取 kerberos cred，然后转换为 gsscred）

上下文是由双方（身份验证发起者和接受者）维护的对象。它们通过使用 gss_init_sec_context（发起方侧调用）和 gss_accept_sec_context（接受方侧）进行更新。如果是 Kerberos，基本上就是使用 TGT、ST 等，然后最终建立信任并共享会话密钥的整个过程。

因此，回答您的问题 - 您不使用 GSS-API 来实现 Kerberos 功能。情况恰恰相反。

# android - 如何使用 Worklight 运行后台进程？

> ID：14423032
> 
> 赞同：2
> 
> 时间：2013-01-20T08:57:43.260
> 
> 标签：android, ibm-mobilefirst

您能否指导我在 Android 中使用 Worklight 时如何运行后台进程/服务？我查看了很多地方，但没有发现任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:32:24.507

我假设您询问的是当应用程序在后台时运行后台进程。问题是当应用程序在后台时，PhoneGap 中的 JavaScript 不会运行。要提供后台进程功能，您需要创建一个插件来管理后台进程。

[http://docs.phonegap.com/en/2.2.0/guide_plugin-development_index.md.html](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_index.md.html)

Worklight 曾经有一些关于创建要在 Worklight 应用程序中使用的 PhoneGap 插件的文档，但我似乎找不到它。

已经有一个现有的插件来帮助管理 Android 中的后台进程

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/BackgroundService](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BackgroundService)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:43:28.007

从技术上讲，听起来您描述的流程需要从 javascript 代码运行插件，并从插件内启动服务。这里的异步问题可能有点棘手——因为“从”插件到 js 的返回是异步的，而且本机代码中的线程本身（服务）也是异步的。那么同步运行您的本机代码还不够吗？（这将是与本机同步的“相对”，但与 js 是异步的“相对”）

安卓服务 - [http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:24:09.810

如果您谈论的是应用程序的 JavaScript 部分，您可以使用 setTimeout(function(){...}, 0); 分离线程。这是 JavaScript 必须提供的最接近后台线程的东西。当然，您可以研究 web worker，但这会使事情变得更复杂一些。

# java - Cxf Web 服务设计问题

> ID：14423034
> 
> 赞同：1
> 
> 时间：2013-01-20T08:57:54.777
> 
> 标签：java, spring, spring-security, cxf

我有一个设计问题：

我将使用一个例子来描述这个问题：

```
@WebService
public interface GlossaryWebService {
   @Secured("READ")
   public void foo();

   @Secured("READ")
   public void goo(); 
} 
```

执行：

```
@WebService
public class GlossaryWebServiceImpl implements GlossaryWebService{

   private GlossaryService glossaryService;

   @Override
   public void foo() {
      glossaryService.foo();
   }

   @Override
   public void goo() {
      glossaryService.goo();
   } 
} 
```

界面：

```
public interface GlossaryService {  
   public void foo();
   public void goo(); 
} 
```

执行：

```
public Class GlossaryServiceImpl extends GlossaryService{

   @Override
   public void foo() {
       // impl
   }

   @Override
   public void goo() {
       // impl
   }
} 
```

如您所见，我们已经 GlossaryWebServiceImpl 实现了 GlossaryWebService 和 GlossaryServiceImpl 实现了 GlossaryService！

问题是 GlossaryWebServiceImpl 充当外观（对于 GlossaryService），这会导致代码重复。GlossaryService 中的方法也需要在 GlossaryWebService 中，GlossaryServiceImpl 中的方法也需要在 GlossaryWebServiceImpl 中！

我可以通过让 GlossaryServiceImpl 来实现 GlossaryWebService 来保存 GlossaryWebServiceImpl 的创建，这样我们将只有 2 个 iterfaces 和一个实现！

但这也会产生问题，因为我希望`@Secured`仅在通过 Web 服务而不是在调用 GlossaryServiceImpl 上的方法时才执行注释（在 GlossaryWebService 上）！

如果有人有任何想法建议，那将非常有帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:58:29.327

由于 GlossaryWebServiceImpl 是访问 Web Service 服务时的入口点，因此我会将所有与 Web Service 相关的设置（角色、其他注释）放入其中，并将所有业务逻辑放入 GlossaryServiceImpl 中：

```
@WebService
public class GlossaryWebService{

   private GlossaryService glossaryService;

   @Secured("READ")
   public void foo() {
      glossaryService.foo();
   }

   @Secured("READ")
   public void goo() {
      glossaryService.goo();
   } 
} 
```

# java - 是否需要在 java 中初始化字符串...？

> ID：14423035
> 
> 赞同：4
> 
> 时间：2013-01-20T08:58:43.690
> 
> 标签：java

```
class TestMe{   
    public static void main (String args[]){
        String s3;  
        System.out.print(s3);
    }
} 
```

为什么编译器给出错误，引用对象的默认值为null，为什么它不是输出...？？

`error: variable s3 might not have been initialized`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T09:02:47.987

这是一个错误，因为 JLS 在[§14.4.2 中如此说明。局部变量声明的执行：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4.2)

> 如果声明符没有初始化表达式，那么对变量的每个引用都必须在执行对变量的赋值之前执行，否则**[根据 §16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)****的规则会发生编译时错误**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T08:59:59.627

局部变量在使用它们之前应该被初始化，局部变量在java中没有得到默认值，因此你`string s3`没有得到默认值 null 因为它是一个局部变量，因此编译器错误。

[来自](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4.2)JLS ：

> 如果声明符没有初始化表达式，那么每次对变量的引用都必须在执行对变量的赋值之前执行，否则根据第 16 节的规则会发生编译时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T09:03:49.767

默认值`null`仅适用于类的非`final` *字段*。

所有其他情况都需要在首次使用前进行初始化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T09:00:44.400

是的，这是必要的。

```
String s3;
s3 = "Something....";
System.out.print(s3); // prints "Something..." 
```

在使用局部变量之前，您必须对其进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T09:04:58.220

我对局部变量的了解是：
声明局部变量主要是为了做一些计算。所以程序员决定给变量赋值，它不应该采用默认值。如果程序员错误地没有初始化一个局部变量，那么它采用默认值，那么输出就会出错。所以局部变量会要求程序员在使用变量之前进行初始化以避免出错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T09:07:05.733

使用默认值的独特场景是相关变量是对象的字段或数组的组件甚至是本地的情况。实际上，数组总是用适当的默认值初始化它们的单元格。

因此，在您的情况下，您的变量不是来自一个字段（因为该方法是本地的）并且没有参与数组初始化。所以编译器逻辑上抱怨..

# python - Python：从文本文件中读取树状数据并存储在字典中

> ID：14423036
> 
> 赞同：0
> 
> 时间：2013-01-20T08:59:13.303
> 
> 标签：python, recursion, tree

我有一个文本文件，其中包含由空格分隔的树状数据，结构如下：'分支数''节点名称'...... 0（0 表示没有进一步的分支）例如：

```
1 A 3 B 2 C 0 
        D 0
    E 1 F 0
    G 2 H 0
      I 0 
```

相应的字典“树”应该是这样的：

```
tree = {'A': {'B': {'C': {},
                    'D': {}},
              'E': {'F': {}},
              'G': {'H': {},
                    'I': {}}}} 
```

我认为递归方式是正确的方法，但我无法使其工作。到目前为止，我有以下功能：

```
def constructNodes(branch):

    global nodes_temp

    if not branch:
        branch = deque(file.readline().strip().split())
    node1 = branch.popleft()
    nodes_temp.add(node1)
    nbBranches = int(branch.popleft())
    for i in xrange(nbBranches):
        constructNodes(branch)
    return nodes_temp 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:58:38.567

您不需要双端队列来遍历序列，您可以使用常规的 python 可迭代对象。这可以使事情更加简洁。

```
data = """
1 A 3 B 2 C 0 
        D 0
    E 1 F 0
    G 2 H 0
      I 0"""

def construct_nodes(data):
    return dict((next(data), construct_nodes(data))
                for _ in xrange(int(next(data))))

print construct_nodes(iter(data.split())) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T09:36:35.490

我认为这就是你想要的：

```
from collections import deque

data = deque('''\
1 A 3 B 2 C 0 
        D 0
    E 1 F 0
    G 2 H 0
      I 0'''.split())

def constructNodes():
    D = {}
    count = int(data.popleft())
    for _ in range(count):
        node = data.popleft()
        D[node] = constructNodes()
    return D
tree = constructNodes()
print(tree) 
```

输出：

```
{'A': {'B': {'C': {}, 'D': {}}, 'G': {'H': {}, 'I': {}}, 'E': {'F': {}}}} 
```

使用一些格式：

```
{'A': {'B': {'C': {},
             'D': {}},
       'G': {'H': {},
             'I': {}},
       'E': {'F': {}}}} 
```

# jquery - Fancybox iframe 编辑

> ID：14423045
> 
> 赞同：-2
> 
> 时间：2013-01-20T09:00:56.363
> 
> 标签：jquery, fancybox

我在我的网站上使用此脚本[https://stackoverflow.com/a/8855410/1055987](https://stackoverflow.com/a/8855410/1055987)，但我想编辑它，但我不知道如何。我想编写脚本从数据库中获取图像我不想写这样的东西，有可能吗？普通的fancybox只是添加了rel="group"，但是没有用。请问您有什么解决办法吗？

```
[
{href:'images/01.jpg', title: '01'},
{href:'images/02.jpg', title: '02'},
{href:'images/03.jpg', title: '03'}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:43:35.787

如果您已经通过 ajax 调用了您的图像集，那么它会返回例如

```
{href:'images/01.jpg', title: '01'},
{href:'images/02.jpg', title: '02'},
{href:'images/03.jpg', title: '03'} 
```

...并假设您有一系列缩略图，每个缩略图对应于 ajax 调用中的每个图像，例如

```
<div class="thumbs">
    <img src="images/01_thumb.jpg" alt="" />
    <img src="images/02_thumb.jpg" alt="" />
    <img src="images/03_thumb.jpg" alt="" />
</div> 
```

...**请注意**，我将缩略图包裹在`div`...中`class="thumbs"`，然后您需要捕捉单击的拇指（the `index`）并从相应的图像开始打开fancybox，这样您就可以做到

```
$('.thumbs img').click(function () {
    var startWith = $(".thumbs img").index(this)
    $.fancybox(myAjaxCall, {
        type: "image",
        index: startWith
    }); // fancybox
}); // click 
```

...**请注意**，我使用中的`index()`方法点击了拇指

```
var startWith = $(".thumbs img").index(this); 
```

...并使用 API 选项`index`告诉fancybox 使用什么图像来启动图库。

见**[JSFIDDLE](http://jsfiddle.net/HRs64/)**

# java - 使用 MRUnit 测试多个输出

> ID：14423054
> 
> 赞同：6
> 
> 时间：2013-01-20T09:02:37.300
> 
> 标签：java, hadoop, mapreduce, reducers, mrunit

有没有办法测试一个用于写入多个输出文件的reduce`MRUnit`类`MultipleOutputFormat`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T09:17:19.897

看起来[对 MRUnit Jira 的](https://issues.apache.org/jira/browse/MRUNIT-13)`MultipleOutputs`支持仍在进行中。

话虽如此，我发现有人实现了自己的驱动程序，将 MRUnit 子类化`MapReduceDriver`以使其在`MultipleOutputs` [这里](https://gist.github.com/1717820)工作，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-06T19:59:52.193

MRUnit 1.1.0 已于 2014 年 6 月发布（参见[http://mrunit.apache.org/](http://mrunit.apache.org/)）

此最新版本包括对`MultipleOutputs`（请参阅[https://issues.apache.org/jira/browse/MRUNIT-13](https://issues.apache.org/jira/browse/MRUNIT-13)）的支持

# asp.net-mvc - 为什么我们使用 ViewModel？

> ID：14423056
> 
> 赞同：26
> 
> 时间：2013-01-20T09:02:39.713
> 
> 标签：asp.net-mvc

我最近开始作为一名网络开发人员工作。我使用 ASP .NET MVC 4 和 NHibernate。

在我的工作场所，我们严格要求使用视图模型在控制器和视图之间来回传输数据。并且视图模型不应该包含模型的任何对象。我知道它是控制器和视图之间的一种层。

但是我发现即使我们可以直接将模型的对象发送到视图（在大多数情况下），编写视图模型类也是重复和多余的。

例如，如果我想显示订单，我可以在控制器的操作中执行此操作 -

```
return View(Repository.Get<Order>(id)); 
```

但相反，我必须编写一个视图模型，用获取的订单填充它，然后将其传递给视图。

所以，我的问题是，当我们可以按原样使用模型的对象时，编写视图模型的目的是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-20T09:13:52.447

对于较小的项目，您是对的。我听到你的论点并表示同情 - 然而，这是有充分理由的，繁重和重复的工作，尤其是在更大和更复杂的应用程序中：

*   在控制器的操作中执行所有处理是必不可少的。但是在您给出的示例中，该`Repository.Get`方法可能会返回一个延迟评估的`IQueryable`对象，这意味着在评估视图之前不会命中数据库。由于各种原因，这很糟糕。（一种解决方法是`.ToList`在控制器中时调用）。
*   “视图不应包含任何非呈现逻辑”和“您不应该信任视图”（因为视图可能是用户提供的）。通过提供模型对象（可能仍连接到活动的 DatabaseContext），视图可以对您的数据库进行恶意更改。
*   视图的数据显示并不总是与其模型的数据 1:1 映射，例如考虑用户详细信息页面：

    用户的 EF 模型对象表示其在数据库中的实体，因此它可能看起来像这样：`User { UserId, UserName, PasswordHash, PasswordSalt, EmailAddress, CreatedDate }`，而“用户详细信息”页面上的字段将是`User { UserId, UserName, Password, ConfirmYourPassword, EmailAddress }`，您看到区别了吗？因此，您*不能*使用 EF User 模型作为视图模型，您必须使用单独的类。

*   模型操作的危险：如果您让 ASP.NET MVC（或任何其他框架）将模型绑定到传入的 HTTP POST 请求然后（以上面的用户详细信息示例为例），用户可以通过伪造`UserId`属性值来重置任何人的密码. ASP.NET 将在绑定期间重写该值，除非您专门对其进行清理（这与制作单个 ViewModel 一样繁琐），否则此漏洞将仍然存在。

*   在多个开发人员在团队情况下工作的项目中*，一切都保持一致是很重要的*。某些页面使用定制的 ViewModel 而其他页面使用 EF 模型并不一致，因为团队没有共同的意识，事情必须记录在案并且通常是有意义的。出于同样的原因，单个开发人员无需在其源代码中放入过多的 XML 文档就可以侥幸逃脱，但在团队情况下，如果您不这样做，您将分崩离析。

在您的情况下，我将与您分享一个轻微的解决方法，但请注意先决条件：

*   您的意见可以完全信任
*   您的视图仅包含表示逻辑
*   您的应用程序主要是 CRUD
*   您的视图与每个 EF 实体模型 1:1 对应（即没有 JOIN）
*   您的视图只处理 POST 表单的单个简单模型，而不是复杂模型（即对象图）

...然后你可以这样做：

*   将所有单向、与表单无关的数据放入您的`ViewData`集合中，或者放入 MVC 4 中（如果您是铁杆的话`ViewBag`，甚至是通用数据）。`ViewData<T>`这对于存储 HTML 页面标题和与母版页共享数据很有用。
*   使用*完全评估和加载的*EF 模型作为`View<TModel>`模型。

但是请谨慎使用这种方法，因为它会引入不一致。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T09:24:58.493

好吧，我开始认为需要对每个问题采取务实的方法，而不是仅仅订阅那里的纯粹主义架构标准。您的应用程序可能需要在野外运行并由为大量客户端等服务的许多开发人员维护，这可能会指导或驱动您的架构。

*   当您想要分离 DomainModel (DataModel) 和其余代码之间的关注点时，ViewModel 是必不可少的。

模型、视图和控制器之间的依赖关系越少，就越容易在不破坏视图和控制器等接口合同的情况下对 DomainModel 进行更改。但再一次，它是务实的。我喜欢这种方法，因为代码重构是系统维护的重要组成部分——重构可能包括对模型属性的简单拼写错误——如果不分离依赖关系，更改可能会通过代码波及到合同级别；例如。

*   ViewModel 用于在您的 DomainModel 和您的 Views 之间转换数据

存储在 Informix 中的日期时间的简单示例必须转换为 .Net 日期时间。ViewModel 是进行这种翻译的理想场所，它不会强迫您将翻译代码放在各种不需要的地方。

[任何事物的] 良好设计的一个属性是能够替换或修改实现的一部分，而对系统的其余部分几乎没有影响。但这需要付出努力和时间来实现——您可以在*完美设计*和恰到好处的*设计之间找到实际的平衡*

但是，是的，使用某些模式还有许多其他充分的理由——但最重要的是：

**没有什么会强迫您使用 ViewModels... ASP.NET MVC 不会强迫您。听取你内心的实用主义者的建议。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T07:52:09.500

如果您使用与 ViewModel 相同的模型，则您的应用程序应该非常小且简单，并且应该只包含 CRUD 操作。但是，如果您正在与大型团队（有两个或更多开发人员）构建大型或企业应用程序，您应该具有依赖注入、服务、存储库、外观、工作单元、数据访问对象等概念。

为了简化模型和视图模型之间的映射需求，您可以使用 AutoMapper [https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

或使用 nuget Install-Package AutoMapper 安装

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-07T11:30:57.287

在我看来，对于执行大部分 CRUD 操作的复杂应用程序来说，在模型层之上再增加一层（ViewModel）是必不可少的，因为它具有以下优点：

1.  To establish loose coupling between Model and Controller. So that any DataModel related modifications will not be affected to Controller.
2.  If you've implemented your application's ViewModel layer correctly by providing maximum level of IOC(Inversion of Control) via DI(dependency Injection using Unity/other frameworks), etc., it will also help you to MOQ your ViewModels(dependencies) for testing only the controller's logic.

# vb.net - 如何检查操作系统是 32 位操作系统还是 64 位

> ID：14423057
> 
> 赞同：20
> 
> 时间：2013-01-20T09:02:46.483
> 
> 标签：vb.net

是否可以使用 vb.net 代码检查计算机是 32 位还是 64 位？我只想在消息中显示结果。

请指教。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-20T09:05:12.597

[`Environment.Is64BitOperatingSystem`](http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem.aspx)应该做得很好。

> 确定当前操作系统是否为 64 位操作系统。

假设 false 表示 32 位环境。

如果您想知道*进程*是否为 64 位（因为您可以在 64 位操作系统上运行 32 位进程），请使用[Environment.Is64BitProcess](http://msdn.microsoft.com/en-us/library/system.environment.is64bitprocess.aspx)：

> 确定当前进程是否为 64 位进程。

* * *

这两者都已在 .NET 4.0 中引入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:13:27.717

如果在 64 位 Windows 上的 32 位 .NET Framework 2.0 中运行，IntPtr.Size 将不会返回正确的值（它将返回 32 位）。

您必须首先检查是否在 64 位进程中运行（我认为在 .NET 中您可以通过检查 IntPtr.Size 来做到这一点），如果您在 32 位进程中运行，您仍然必须调用 Win API函数 IsWow64Process。如果返回 true，则您正在 64 位 Windows 上的 32 位进程中运行。

Microsoft 的 Raymond Chen： [如何以编程方式检测您是否在 64 位 Windows 上运行](http://blogs.msdn.com/oldnewthing/archive/2005/02/01/364563.aspx)

解决方案：

```
Private is64BitProcess As Boolean = (IntPtr.Size = 8)
Private is64BitOperatingSystem As Boolean = is64BitProcess OrElse InternalCheckIsWow64()

<DllImport("Kernel32.dll", SetLastError:=True, CallingConvention:=CallingConvention.Winapi)> _
    Public Shared Function IsWow64Process( _
    ByVal hProcess As Microsoft.Win32.SafeHandles.SafeHandleZeroOrMinusOneIsInvalid, _
    ByRef wow64Process As Boolean) As <MarshalAs(UnmanagedType.Bool)> Boolean

    End Function

Public Shared Function InternalCheckIsWow64() As Boolean
    If (Environment.OSVersion.Version.Major = 5 AndAlso Environment.OSVersion.Version.Minor >= 1) OrElse Environment.OSVersion.Version.Major >= 6 Then
        Using p As Process = Process.GetCurrentProcess()
            Dim retVal As Boolean
            If Not IsWow64Process(p.Handle, retVal) Then
                Return False
            End If
            Return retVal
        End Using
    Else
        Return False
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T03:20:26.267

我只是使用这段代码，它工作正常：

```
If System.Environment.Is64BitOperatingSystem = True Then
    MessageBox.Show("OS System : 64 Bit Operating System")
Else
    MessageBox.Show("OS System : 32 Bit Operating System")
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-14T13:49:26.413

```
If IntPtr.Size = 8 Then

    ' 64 bit machine

ElseIf IntPtr.Size = 4 Then

    ' 32 bit machine

End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-29T08:49:40.857

VB.NET：我想要的工作如下。在 x64 所有配置（调试、发布等）中定义自定义常量`Win64`，如下图所示，并按如下方式使用它：

```
If (Win64) Then

   '64 bit code
else
   ' 32 bit code here
End If 
```

[![在此处输入图像描述](../Images/6bca13cc2b3465b6e8546d223f7f2d19.png)](https://i.stack.imgur.com/HUJpt.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-03T17:25:59.227

```
Msgbox (Runtime.InteropServices.Marshal.SizeOf(GetType(IntPtr)) * 8) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-05-22T08:35:34.900

采用

```
If System.IO.Directory.Exists("C:\Program Files (x86)") Then
  MsgBox("64-Bit OS")
Else
  MsgBox("32-Bit OS")
End If 
```

它将适用于所有框架版本

# android - 如何在 30 秒后停止视频

> ID：14423059
> 
> 赞同：0
> 
> 时间：2013-01-20T09:03:03.790
> 
> 标签：android, timer, media-player

我想在我的应用程序中有一个视频，它有 30 秒的免费预览，但不是有两个单独的视频，一个是完整的，一个是 30 秒的部分，我怎么能在播放 30 秒后简单地停止视频

这是我用来播放音频或视频的代码块

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /** REMOVE TITLE **/
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.moveplay);
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);

    final VideoView audioView = (VideoView) findViewById(R.id.VideoView);
    final MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(audioView);

    Bundle extras = getIntent().getExtras();
    String pathfile = extras.getString("key");
    Log.v("key = ",pathfile);

    Uri audio = Uri.parse(pathfile);
    audioView.setMediaController(mediaController);
    audioView.setVideoURI(audio);
    audioView.start(); 
```

我的应用程序的另一部分确定是从 SD 卡播放还是流式传输，并且一切正常。

我只想设置一个标志，以便播放视频的前 30 秒或播放整个视频。

我知道当我点击屏幕时控制器会出现，并且我看到计数器我只需要在当前位置达到 30 时停止它，这样我就可以通过一个视频来节省资源

谢谢杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:13:36.937

步骤＃1：使用`postDelayed()`或其他东西来控制每一秒左右。

第 2 步：检查`getCurrentPosition()`它是否在您的 30 年代标记点附近。如果是这样，则停止视频视图。[此](https://stackoverflow.com/questions/7802645/in-android-how-to-get-the-progress-time-of-the-video-played-under-videoview)链接
中给出了确定播放视频进度的代码。

# ruby - 为什么单个空数组的并行分配会分配多个 nil？

> ID：14423066
> 
> 赞同：2
> 
> 时间：2013-01-20T09:03:51.277
> 
> 标签：ruby, parallel-assignment

我想将一个空数组分配给多个变量。这是我正在做的事情：

```
irb(main):015:0> a, b, c = []
=> []
irb(main):016:0> a
=> nil
irb(main):017:0> b
=> nil
irb(main):018:0> c
=> nil 
```

它给了我`nil`。我想知道为什么？但如果我这样做：

```
irb(main):019:0> a, b, c = [], [], []
=> [[], [], []]
irb(main):020:0> a
=> []
irb(main):021:0> b
=> []
irb(main):022:0> c
=> [] 
```

然后它按我的预期工作，但它比第一个长一点。第一个例子有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:22:10.160

我相信这个例子会帮助你理解这个问题：

```
[1] pry(main)> a, b, c = [1,2]
=> [1, 2]
[2] pry(main)> a
=> 1
[3] pry(main)> b
=> 2
[4] pry(main)> c
=> nil 
```

现在回到你的问题，你试图将一个空数组中的元素分配给变量，结果这三个变量都得到 nil 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:10:11.320

```
a = b = c = [] 
```

但请注意，所有变量都将被分配**相同**的数组
，因此：

```
a = b = []
b << 1
p b        # [1]
p a        # [1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T09:50:59.557

### 具有单个右值的并行赋值

如果赋值包含多个左值和一个右值，Ruby 会尝试将右值扩展为一个数组，就像您在右值上调用了 #to_a 一样。因此，您的示例的问题`a, b, c = []`在于它在语义上等同于：

```
a, b, c = nil.to_a 
```

这显然会将 nil 分配给第一个变量，而其他变量则未分配（这也是 nil）。相反，考虑一下：

```
a, b, c = 1
a
# => 1
b
# => nil
c
# => nil 
```

同样的原理也在起作用，但现在你可以看到第一个左值*确实*从右侧接收了一个赋值；当任务为零时，这并不明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T00:06:52.520

当您进行并行赋值时，Ruby 会解构数组：

```
a, b, c = [:foo, :bar, :baz]
a # => :foo
b # => :bar
c # => :baz 
```

如果你给它一个条目太少的数组，它会将剩余的值设置为`nil`：

```
a, b, c = [:foo, :bar]
a # => :foo
b # => :bar
c # => nil 
```

所以你的第一个例子只是这个的自然扩展——一个空数组肯定有太少的条目来分配任何变量！

# java-7 - java INSERT 查询不起作用（java.lang.NullPointerException）

> ID：14423070
> 
> 赞同：0
> 
> 时间：2013-01-20T09:04:47.370
> 
> 标签：java-7

当我运行此代码时，我得到一个空指针异常。

```
 try {
        String sql = "INSERT INTO viwa(name,tele,surname) VALUES(?,?,?)";
         pst = conn.prepareStatement(sql);

        pst.setString(1, jTextField_name.getText());
        pst.setString(2, jTextField_age.getText());
        pst.setString(3, jTextField_tele.getText());

        pst.execute();
        JOptionPane.showMessageDialog(null, "Saved");
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

****这是完整的代码****

> `导入java.sql.Connection；导入 java.sql.PreparedStatement；导入java.sql.ResultSet；导入 java.sql.Statement；导入 javax.swing.JOptionPane；
> 
> 公共类去扩展 javax.swing.JFrame {
> 
> ```
> Connection conn = null;
> ResultSet rs = null;   PreparedStatement pst = null;
> 
> public go() {
>     try {
>         initComponents();
>         connect.getMyConn();
> 
>     } catch (Exception e) {
>         e.printStackTrace();
>     }
> }
> 
> @SuppressWarnings("unchecked")
>  // <editor-fold defaultstate="collapsed" desc="Generated    Code">                          
> private void initComponents() {
> 
>     jLabel1 = new javax.swing.JLabel();
>     jLabel2 = new javax.swing.JLabel();
>     jLabel3 = new javax.swing.JLabel();
>     jTextField_Tele = new javax.swing.JTextField();
>     jTextField_Surname = new javax.swing.JTextField();
>     jTextField_Name = new javax.swing.JTextField();
>     jButton_search = new javax.swing.JButton();
>     jButton_Update = new javax.swing.JButton();
>     jButton_Delete = new javax.swing.JButton();
>     jButton_save = new javax.swing.JButton();
> 
>     setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
>     getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
> 
>     jLabel1.setText("Tele");
>     getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 140, -1, -1));
> 
>     jLabel2.setText("Surname");
>     getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 210, -1, -1));
> 
>     jLabel3.setText("Name");
>     getContentPane().add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 70, -1, -1));
> 
>     jTextField_Tele.addActionListener(new java.awt.event.ActionListener() {
>         public void actionPerformed(java.awt.event.ActionEvent evt) {
>             jTextField_TeleActionPerformed(evt);
>         }
>     });
>     getContentPane().add(jTextField_Tele, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 140, 170, -1));
>     getContentPane().add(jTextField_Surname, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 210, 170, -1));
>     getContentPane().add(jTextField_Name, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 70, 170, -1));
> 
>     jButton_search.setText("Search");
>     getContentPane().add(jButton_search, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 310, 120, -1));
> 
>     jButton_Update.setText("Update");
>     getContentPane().add(jButton_Update, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 310, 120, -1));
> 
>     jButton_Delete.setText("Delete");
>     getContentPane().add(jButton_Delete, new org.netbeans.lib.awtextra.AbsoluteConstraints(540, 310, 120, -1));
> 
>     jButton_save.setText("Save");
>     jButton_save.addActionListener(new java.awt.event.ActionListener() {
>         public void actionPerformed(java.awt.event.ActionEvent evt) {
>             jButton_saveActionPerformed(evt);
>         }
>     });
>     getContentPane().add(jButton_save, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 310, 120, -1));
> 
>     pack();
> }// </editor-fold>                        
> 
> private void jTextField_TeleActionPerformed(java.awt.event.ActionEvent evt) {      
> 
>     // TODO add your handling code here:
> }                                               
> 
> private void jButton_saveActionPerformed(java.awt.event.ActionEvent evt) {         
> 
>     try {
> 
>         String sql = "INSERT INTO viwa (name,tele,surname) VALUES(?,?,?)";
>        pst =  conn.prepareStatement(sql);
> 
>         pst.setString(1, jTextField_Name.getText());
>         pst.setString(2, jTextField_Tele.getText());
>         pst.setString(3, jTextField_Surname.getText());
> 
>         pst.execute();
> 
>         JOptionPane.showMessageDialog(this, "Saved");
>     } catch (Exception e) {
>         e.printStackTrace();
>     }
> 
> }      ` 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:13:22.630

使用您的 IDE，在此代码的开头放置一个断点，并逐步查看所有变量。您的变量之一具有意外`null`值。您的代码中没有其他明显的 NPE 原因。

# asp.net-mvc-4 - asp.net mvc 4：simplemembership - 未确认用户时 WebSecurity.Login 失败

> ID：14423094
> 
> 赞同：3
> 
> 时间：2013-01-20T09:07:53.330
> 
> 标签：asp.net-mvc-4, simplemembership

默认情况下，WebSecurity.Login 方法在未确认用户时返回 false。无论用户确认状态如何，如何使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:12:33.240

如果确认对您不重要，那么当您调用 CreateUserAndAccount() 或 CreateAccount() 时，请确保将 requireConfirmationToken 传递为 false。

这样，一旦创建了帐户，它就不需要确认，并且 Login() 应该使用正确的凭据。

编辑：确认的一般需求是确保如果用户忘记了密码，您可以与用户进行可靠的通信（如电子邮件地址）。如果没有确认，您将无法获得这种“已确认”的通信方式。您也可以尝试在 pages_Membership 数据库（IsConfirmed == 1）中翻转位，但我也不建议这样做。

# jquery - 如何将 jQuery 1.9.0 中的事件绑定到通过 Ajax 加载的元素？

> ID：14423095
> 
> 赞同：2
> 
> 时间：2013-01-20T09:08:23.220
> 
> 标签：jquery

我知道我们可以将“实时”方法用于[此处](https://stackoverflow.com/questions/2413797/how-do-you-make-jquery-bind-events-to-elements-loaded-via-ajax)所述的目的。但现在 jQuery 1.9.0 中删除了“live”方法。那么我应该如何为 Ajax 加载的元素绑定一些事件（例如，“click”）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T09:13:10.947

有`.on()`绑定事件：

# 用法：

```
$(document).on('click', '.loaded-via-ajax', function(){
    alert($(this).attr('id'));
}); 
```

这将提醒通过 ajax 加载的元素的 id。

您必须将事件委托给现有的父级，如下所示：

```
$('.classofdiv').on('click', '.loaded-via-ajax', function(){
    alert($(this).attr('id'));
}); 
```

这`.classofdiv`是一个从 ajax 函数加载内容的 div，当您单击`elem`带有类名的 div 时，`.loaded-via-ajax`这将获取事件并最终提醒其 id ( *`if that elem has an id`*)

# php - 使用 fwrite 和 file_put_contents 写入文本文件时出错

> ID：14423096
> 
> 赞同：-3
> 
> 时间：2013-01-20T09:08:27.143
> 
> 标签：php

我对使用 fwrite 和 file_put_contents 很陌生，并且我的 for 循环语句的每一行都出现错误：

```
Warning: file_put_contents() expects parameter 1 to be string, 
```

或者

```
Warning: fwrite(): 3 is not a valid stream resource in... 
```

这是代码：

> $databank = "data.txt"; $access = fopen($databank, 'w') 或 die("无法打开文件"); fclose($访问);

```
$row = "$ent1".' | '."$ent2".' | '."$perc1a".'% | '."$perc1a_frac".'% | '."$frac1a".' | '."$perc2a".'% | '."$perc2a_frac".'%  | '."$frac2a".' | +'."$a".' | '."$new_ent1".' | '."$perc1b".'% | '."$perc1b_frac".'% | '."$frac1b".' | '."$perc2b".'% | '."$perc2b_frac".'% | '."$frac2b".' \n';
            fwrite($access, $row);
            //file_put_contents($access,$row); 
```

我有预感它与字符串相关的问题。非常感谢任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:19:58.307

## #1。错误：

> 警告：file_put_contents() 期望参数 1 为字符串

在[文档](http://php.net/manual/en/function.file-put-contents.php)中，它说第一个参数是`string $filename`和解释：`Path to the file where to write the data.`.

使用示例：

```
$file = 'people.txt';
$current = "John Smith\n";
file_put_contents($file, $current); 
```

## #2。错误：

> 警告：fwrite(): 3 在...中不是有效的流资源

同样，在[文档](http://php.net/manual/en/function.fwrite.php)中它说第一个参数是`resource $handle`和 wxplanation ：`A file system pointer resource that is typically created using fopen().`.

使用示例：

```
$fp = fopen('data.txt', 'w');
fwrite($fp, '1');
fwrite($fp, '23');
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:25:03.767

使用[file_put_contents()](http://php.net/manual/en/function.file-put-contents.php)，您应该具有以下内容：

`$access`-- 应该是一个文件名，因为根据您的问题，您在循环中使用它，所以您应该使用`FILE_APPEND`它来附加新内容，例如：

```
$access = "some_filename.txt";
file_put_contents($access, $yourDataHere, FILE_APPEND | LOCK_EX);
//LOCK_EX prevents anyone else writing to the file at the same time 
```

**更好的是，阅读您要使用的功能的文档。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T09:19:33.830

在使用某些功能之前**阅读手册页**是非常好的做法。我自己总是遵循它，没有例外。

比如说，从一个[file_put_contents](http://php.net/file_put_contents)你可以学到两件事：

1.  `$access`应该是一个**文件名**。
2.  为了让它在一个循环中写很多行，必须使用特殊标志，否则文件将被最后一行不断覆盖

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T10:36:51.187

我实际上忽略了

```
fclose($access); 
```

我应该在 fwrite() 之后将它放在它之前。现在一切正常。

# asp.net - 员工轮班 ASP.NET 调度程序（工作日/时间）

> ID：14423098
> 
> 赞同：2
> 
> 时间：2013-01-20T09:08:41.423
> 
> 标签：asp.net, user-controls, webforms

我正在寻找如何在 ASP.NET WebForms 中实现这一点的控件，招聘是一个班次将创建有许多时期，我需要以表格格式显示班次的时期：

![虚拟时间表](../Images/33a7ac363fdd51dcf32d64e642f8fcb6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T09:31:19.753

一些选项：

*   这曾经是免费的，但现在是付费的：[http ://www.daypilot.org/demo/Calendar/WorkWeekView.aspx](http://www.daypilot.org/demo/Calendar/WorkWeekView.aspx)

    *   查看免费版本是否适合您[http://www.daypilot.org/daypilot-lite.html](http://www.daypilot.org/daypilot-lite.html)

.

*   另一个付费选项[http://demos.telerik.com/aspnet-ajax/scheduler/examples/timelineview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/scheduler/examples/timelineview/defaultcs.aspx)（点击蓝色日历标题右侧的“工作周”）

.

*   检查[http://forums.asp.net/t/1296364.aspx中的建议](http://forums.asp.net/t/1296364.aspx)

.

*   也许尝试一个纯 jQuery 插件，并使用您自己的客户端代码将其与 ASP.NET 网络表单集成。最受欢迎的是[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)（演示在[http://arshaw.com/js/fullcalendar-1.5.4/demos/theme.html](http://arshaw.com/js/fullcalendar-1.5.4/demos/theme.html)）

    *   如果您不喜欢默认行为，请尝试[https://code.google.com/p/fullcalendar/issues/detail?id=490](https://code.google.com/p/fullcalendar/issues/detail?id=490)和[https://code.google.com/p中提到的任何分叉/fullcalendar/issues/detail?id=490](https://code.google.com/p/fullcalendar/issues/detail?id=490)

.

*   [如果你沿着 jQuery 路径走下去，在http://blogs.digitss.com/javascript/jquery-or-non-jquery-calendar-schedulers/](http://blogs.digitss.com/javascript/jquery-or-non-jquery-calendar-schedulers/)和[http://www.web-delicious](http://www.web-delicious.com/4-best-javascript-jquery-event-calendar-planner-scheduler/)中列出了非常有趣的选项。 [com/4-best-javascript-jquery-event-calendar-planner-scheduler/](http://www.web-delicious.com/4-best-javascript-jquery-event-calendar-planner-scheduler/)

# mysql - mysql - 从表中的两个不同字段中加入选择数据

> ID：14423099
> 
> 赞同：0
> 
> 时间：2013-01-20T09:08:44.193
> 
> 标签：mysql, sql, database

我有两张桌子：

*   **朋友**表 ( `UserID`, `FriendID`) 和

*   **用户**表 ( `UserID`, `FirstName`, `LastName`)。

我正在尝试执行一个 SQL 查询来加入和拉取所有的记录，这些记录的`UserID`or `FriendID`inside friends 表等于用户的 ID，但从另一个中拉取`FirstName`and 。`LastName``UserID`

例如

朋友桌

```
UserID = 1 | FriendID = 2
UserID = 3 | FriendID = 1 
```

用户表

```
UserID = 1 | FirstName = "Bob"  | LastName = "Hope"

UserID = 2 | FirstName = "John" | LastName = "Doe"

UserID = 3 | FirstName = "Bill" | LastName = "Murray" 
```

如果我以 Bob( = 1) 的身份登录，试图通过检查1 是 a还是在 friends 表中来在一个查询`UserID`中提取我所有的朋友用户数据 ( `FirstName`and )。然后加入不是我的 ID 的相反字段的数据。`LastName``UserID``FriendID``UserID`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:14:43.740

# 如果我理解你的问题，那么这有效

```
-- set the id of the logged in user
set @logged_in = 1;

-- select all the fields from the user table
select users.* from users
-- joined the friends table on the `FriendID`
inner join friends on friends.FriendID = users.UserID
-- filtered by `UserID` on friends table matching logged in user
and friends.UserID = @logged_in -- logged in id
-- union-ed with the users table
union select * from users
-- filtered by the `UserID` being the logged in user
where users.UserID = @logged_in -- logged in id 
```

## @logged_in = 1 的结果：

```
UserID  FirstName   LastName
2       John        Doe
1       Bob         Hope 
```

## @logged_in = 2 的结果：

```
UserID  FirstName   LastName
2       John        Doe 
```

## 测试数据库创建代码：

```
--
-- Table structure for table `friends`
--

CREATE TABLE IF NOT EXISTS `friends` (
  `UserID` int(11) NOT NULL,
  `FriendID` int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `friends`
--

INSERT INTO `friends` (`UserID`, `FriendID`) VALUES
(1, 2),
(3, 1);

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE IF NOT EXISTS `users` (
  `UserID` int(11) NOT NULL,
  `FirstName` varchar(50) NOT NULL,
  `LastName` varchar(50) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`UserID`, `FirstName`, `LastName`) VALUES
(1, 'Bob', 'Hope'),
(2, 'John', 'Doe'),
(3, 'Bill', 'Murray'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:14:48.763

试试这个：

```
SELECT *
FROM users u
WHERE userid IN ( SELECT userid FROM friends WHERE friendid = 1
                  UNION ALL
                  SELECT friendid FROM firends WHERE userid = 1); 
```

这会给你：

```
| USERID | FIRSTNAME | LASTNAME |
---------------------------------
|      2 |      John |      Doe |
|      3 |      Bill |   Murray | 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2f4a9/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T09:16:08.307

```
Select b.uid as userid, a.firstname, a.lastname 
from user a
Inner join (select friendid as uid from friends where userid=:currentUser
Union select userid as uid from friends where friendid=:currentUser) b 
```

在电话上，因此可能需要语法调整。

优化器可能会根据您的真实数据建议不同的连接策略

# android - HttpGet 为某些手机返回错误 400 'Bad Request'

> ID：14423102
> 
> 赞同：1
> 
> 时间：2013-01-20T09:09:12.673
> 
> 标签：android

我有一个从我的应用程序网站获取 JSON 对象的类。不幸的是，我遇到了一个问题，某些手机收到错误 400 'Bad Request' 结果代码，而大多数手机都可以正常使用此代码。

谁知道这不适用于所有手机？

```
public class MyAppJSON {
    private String params;

    public MyAppJSON(String params) {
        this.params = params;
    }

    public JSONObject readJSON() {
        JSONObject result = null;
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://www.myapp.com/json.php?action=" + this.params);
        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
            }
            else {
                Log.e(MyAppJSON.class.toString(), "Failed to download file");
            }
            result = new JSONObject(builder.toString());
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch(Exception e) {
            e.printStackTrace();
        }

        return result;
    }
} 
```

# javascript - 是否可以限制仅在 2 个脚本文件之间共享全局变量？

> ID：14423103
> 
> 赞同：1
> 
> 时间：2013-01-20T09:09:22.267
> 
> 标签：javascript, jquery, uiwebview, android-webview

我正在开发一个需要 js 变量才能仅在 2 个或 3 个脚本之间共享的应用程序。现在我正在使用一个全局变量来共享。是否可以限制仅在 2 个脚本文件之间共享全局变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:47:19.883

不，这是不可能的。您可以改用命名空间。例如

```
var a={};
a.b={};
a.b.foo= 'something'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:12:35.843

我同意 Ravi，看看命名空间可能会给你更多的灵活性，看看这篇文章 Addy Osmani 它提供了嵌套命名空间的优秀概述

[http://addyosmani.com/blog/essential-js-namespacing/](http://addyosmani.com/blog/essential-js-namespacing/)

# html - CSS变换裁剪翻转图像

> ID：14423105
> 
> 赞同：4
> 
> 时间：2013-01-20T09:09:39.663
> 
> 标签：html, css

给定以下 HTML 元素及其样式，反射的左下角被修剪，这是不可取的。我尝试调整高度、溢出、边距、填充等，但没有任何东西可以显示整个图像。首先这里有什么问题？在不改变 HTML 结构的情况下我能做些什么吗？

```
//Elements

<div>
    <img id="someImage" src="some-img.png"/>
    <section class="reflection"></section>
<div>

//Styles

div {
    perspecive:600px;
    transform-style:perserve-3d;
}
div > img {
    transform:rotateY(-60deg);
}
div > .reflection{
    background:-moz-element(#someImage) no-repeat;
    transform:scaleY(-1);    
} 
```

仅适用于 Mozilla：http: [//jsfiddle.net/zorikii/RWfhc/](http://jsfiddle.net/zorikii/RWfhc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:23:39.197

如果有人感兴趣，它是一个非常简单的解决方案。-moz-element() 函数完全按照屏幕上显示的方式获取元素。

> element() CSS 函数定义从任意 HTML 元素生成的值。此图像是实时图像，这意味着如果 HTML 元素发生更改，使用结果值的 CSS 属性会自动更新。[-MDN](https://developer.mozilla.org/en-US/docs/CSS/element "-MDN") _

所以我所要做的就是在原始图像元素的顶部添加一些填充......

```
img{
    transform:rotateY(60deg);
    -webkit-transform:rotateY(60deg);
    padding-top:100px;
}
.reflection{
    background: -moz-element(#someImage) no-repeat;     
    height:400px;width:200px;
    -moz-transform: scaleY(-1);
    transform: scaleY(-1);
} 
```

[更新小提琴](http://jsfiddle.net/zorikii/RWfhc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:30:24.163

您需要设置转换“原点”，如下所示：

```
html{
    background:black;
}
div{
    perspective:600px;
    -webkit-perspective:600px;
    transform-style:preserve-3d;
    -webkit-transform-style:preserve-3d;

    /* sets origin slightly higher so it just off center */
    -webkit-transform-origin: 50% 40%;
}
img{
    transform:rotateY(60deg);
    -webkit-transform:rotateY(60deg);
}
.reflection{
    background: -moz-element(#someImage) bottom left no-repeat;     
    height:300px;width:200px;
    -moz-transform: scaleY(-1);
} 
```

# android - 暂停/恢复 http 连接下载

> ID：14423108
> 
> 赞同：7
> 
> 时间：2013-01-20T09:10:31.023
> 
> 标签：android, download-manager

我希望能够在 Android 中打开到给定文件的 http 连接并开始下载它。我还必须能够在某个时候暂停下载并稍后恢复。这在 Android 中是如何实现的？我不想重新开始下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:01:36.667

这样的下载器已在[此处](https://stackoverflow.com/a/6323043/1276636)发布：

```
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    if(ISSUE_DOWNLOAD_STATUS.intValue()==ECMConstant.ECM_DOWNLOADING){
        File file=new File(DESTINATION_PATH);
        if(file.exists()){
             downloaded = (int) file.length();
             connection.setRequestProperty("Range", "bytes="+(file.length())+"-");
        }
    }else{
        connection.setRequestProperty("Range", "bytes=" + downloaded + "-");
    }
    connection.setDoInput(true);
    connection.setDoOutput(true);
    progressBar.setMax(connection.getContentLength());
     in = new BufferedInputStream(connection.getInputStream());
     fos=(downloaded==0)? new FileOutputStream(DESTINATION_PATH): new FileOutputStream(DESTINATION_PATH,true);
     bout = new BufferedOutputStream(fos, 1024);
    byte[] data = new byte[1024];
    int x = 0;
    while ((x = in.read(data, 0, 1024)) >= 0) {
        bout.write(data, 0, x);
         downloaded += x;
         progressBar.setProgress(downloaded);
    } 
```

# java - 如何强制 Java FX 场景刷新？

> ID：14423109
> 
> 赞同：3
> 
> 时间：2013-01-20T09:10:42.397
> 
> 标签：java, animation, javafx

我有一个 Java FX 场景，带有一个开始按钮和几个代表地图图块的矩形。我还绘制了一个代表我的探索者的球体（它必须探索地图），但我在运行动画时遇到了困难。

在我的开始按钮的 OnMouseClicked 处理程序中，我启动了一个用于探索地图的算法，该算法改变了球体的位置和已访问的图块的颜色。问题是在算法运行时场景不会自行更新，所以我只能看到最终场景的样子（在算法停止运行之后）。如何强制更新场景，以便我可以按顺序查看所有颜色变化？

后期编辑：

```
import javafx.application.Application;
import javafx.event.Event;
import javafx.event.EventHandler;
import javafx.event.EventType;
import javafx.geometry.Insets;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.image.Image;
import javafx.scene.layout.HBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

public class Test extends Application {

private static final double boxOuterSize = 50;
private static final double boxInnerSize = 48;
private static final double boxCornerRadius = 20;

private Stage applicationStage;
private Scene applicationScene;

private static double   sceneWidth  = 1024;
private static double   sceneHeight = 800;
private static HBox     container = new HBox();
private static Group    root = new Group();
private Rectangle[] rectangles = new Rectangle[10];

@Override
public void start(Stage mainStage) throws Exception {

    applicationStage = mainStage;
    container.setSpacing(10);
    container.setPadding(new Insets(10, 10, 10, 10));

    try {
        applicationScene = new Scene(container, sceneWidth, sceneHeight);
        applicationScene.addEventHandler(EventType.ROOT,(EventHandler<? super Event>)this);
        applicationScene.setFill(Color.WHITE);

    } catch (Exception exception) {
        System.out.println ("exception : "+exception.getMessage());
    }

    applicationStage.setTitle("HurtLockerRobot - Tema 3 IA");
    applicationStage.getIcons().add(new Image("icon.png"));
    applicationStage.setScene(applicationScene);

    for(int i=0; i<10; i++) {
        Rectangle r = new Rectangle();
        r.setFill(Color.BLUE);
        r.setX(i * boxOuterSize);
        r.setY(0);
        r.setWidth(boxInnerSize);
        r.setHeight(boxInnerSize);
        r.setArcHeight(boxCornerRadius);
        r.setArcWidth(boxCornerRadius);
        r.setSmooth(true);
        rectangles[i] = r;
        root.getChildren().add(rectangles[i]);
    }

    container.getChildren().add(root);
    Button startButton = new Button("Start");
    startButton.setOnMouseClicked(new EventHandler<Event>() {
        @Override
        public void handle(Event arg0) {
            for(int i=0; i<10; i++) {
                rectangles[i].setFill(Color.RED);
                // TODO: some kind of scene refresh here
            }
        }
    });
    container.getChildren().add(startButton);

    applicationStage.show();
}

public static void main(String[] args) {
    launch(args);
}
} 
```

最初所有的矩形都是蓝色的。我想在这里获得的行为是看到矩形按顺序改变颜色。问题是我只能看到最终结果（所有矩形同时改变颜色）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-16T08:58:56.830

这是一个老问题，它引起了我的注意，因为这是 JavaFX 新手面临的一个非常普遍的问题。

OP 面临的问题是因为他一次更新所有矩形，无需等待。

OP 可以通过创建一个新线程来等待，在每次循环迭代时将线程置于睡眠状态估计几秒钟，然后使用`Platform.runLater`.

```
@Override
public void handle(Event arg0) {
  new Thread(() -> {
     for(int i=0; i<10; i++) {
       try {
          Thread.sleep(1000); // Wait for 1 sec before updating the color
       } catch (InterruptedException e) {
          e.printStackTrace();
       }
       int finalI = i;
       Platform.runLater(() -> rectangles[finalI].setFill(Color.RED));// Update on JavaFX Application Thread
   }
}).start(); 
```

上面的代码片段更像是一种传统的做事方式。如果我们想使用“JavaFX”的做事方式，我们可以通过使用`Animation`.

`x-seconds`下面是一个代码片段，它将在更改矩形颜色之前等待。它不需要任何额外的线程，因为等待是通过`PauseTransition`为每个矩形应用来处理的。

```
startButton.setOnMouseClicked(new EventHandler<Event>() {
    @Override
    public void handle(Event arg0) {
        for(int i=0; i<10; i++) {
            PauseTransition pauseTransition = new PauseTransition(Duration.seconds(i));
            int finalI = i;
            pauseTransition.setOnFinished(event -> rectangles[finalI].setFill(Color.RED));
            pauseTransition.play();
        }
    }
}); 
```

它为每个矩形创建一个 PauseTransition ，并根据它在数组中的索引，`rectangles`在更新颜色之前等待相同的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:40:05.153

这是因为：

```
exception : Test cannot be cast to javafx.event.EventHandler 
```

好吧，我不知道 Class cast 异常是如何出现的。

否则，要延迟，您可以使用`Thread.sleep()`.

**更新：**

使用[AnimationTimer](http://blog.netopyr.com/2012/06/14/using-the-javafx-animationtimer/)创建动画很好，你不需要刷新任何东西。

在这里，我做了一个简短的 EG 来使用`FillTransition`.

**代码：**

```
import javafx.animation.FillTransition;
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;
import javafx.util.Duration;

public class NewFXMain1 extends Application {
private static final double boxOuterSize = 50;
private static final double boxInnerSize = 48;
private static final double boxCornerRadius = 20;
private Rectangle rectangles = new Rectangle();

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) {
    primaryStage.setTitle("rect");

    Button btn = new Button();
    StackPane root = new StackPane();

    Rectangle r = new Rectangle();
    r.setFill(Color.BLUE);
    r.setX(2 * boxOuterSize);
    r.setY(0);
    r.setWidth(boxInnerSize);
    r.setHeight(boxInnerSize);
    r.setArcHeight(boxCornerRadius);
    r.setArcWidth(boxCornerRadius);
    r.setSmooth(true);
    r.localToScene(boxOuterSize, boxOuterSize);
    rectangles = r;

    root.getChildren().add(rectangles);

    btn.setText("display");
    btn.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {
           FillTransition ft = new FillTransition(Duration.millis(3000), rectangles, Color.RED, Color.BLUE);
           ft.setCycleCount(4);
           ft.setAutoReverse(true);
           ft.play();
        }
    });

    root.getChildren().add(btn);
    primaryStage.setScene(new Scene(root, 300, 250));
    primaryStage.show();
  }
} 
```

# ios - 应用内购买到期内容

> ID：14423112
> 
> 赞同：0
> 
> 时间：2013-01-20T09:11:33.690
> 
> 标签：ios, in-app-billing, storekit

我的应用程序目前允许用户购买非消耗品。我有一个不涉及开发人员服务器的内置产品交付模型。

我正在考虑添加更多内容，这些内容将在 1 年后到期。到期后，用户应该可以选择再次购买内容。我希望内容不自动更新。我的问题如下。

*   应用商店是否只允许杂志和新闻纸项目自动更新？我关注的内容更新后可能没有更新。我可以在 1 年后更新相同的内容吗？

*   我需要服务器来实现自动更新吗？我可以使用当前的内置产品交付模型来验证收据吗？

*   不续订订阅的主要缺点是什么？是不是说app store永远不会提供交易
    信息paymentQueueRestoreCompletedTransactionsFinished
    回调？

对此问题的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:03:46.123

1) 这取决于您是打算在 App Store 中还是在报亭中发布您的报纸或杂志。如果您希望它出现在报亭中，它需要具有自动续订订阅。如果您只想在常规 App Store 中列出它，您可以使用任何您想要的 IAP。

2）您不需要服务器（尽管文档似乎暗示了什么），您可以在应用程序内验证收据（我已经在几个报亭应用程序中完成了此操作）。您将收到作为 NSData 对象的收据，然后需要将其编码为 Base64 字符串并将其嵌入到 Apple 验证服务器的 HTTP 请求中。您可以在此处找到将 NSData 转换为 Base64 字符串的方法：[如何将 NSData 编码为 base64？(iPhone/iPad)](https://stackoverflow.com/questions/10584396/how-to-encode-nsdata-as-base64-iphone-ipad)

3) 是的，不续订订阅的缺点是您必须完成所有关于恢复、取消和使订阅过期的工作（您不能在 iTunes Connect 中为它们设置时间限制）。查看 In App Purchase 指南，了解有关您的应用程序对非续订订阅负责的更多详细信息（向下滚动到在 App Store 注册产品部分）：http: [//developer.apple.com/library/ios/#文档/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html)

# javascript - 如何在 OpenLayers 中相互独立地移动两个图层？

> ID：14423115
> 
> 赞同：4
> 
> 时间：2013-01-20T09:12:09.133
> 
> 标签：javascript, maps, gis, openlayers

是否可以在 OpenLayers 中创建两层（其中一层是半透明的）并独立移动它们？如果是这样，怎么做？
我想让用户选择要移动的层，或者如果不可能，通过我自己的 JavaScript 代码移动一层，而另一层由用户控制。

如果这很重要，两者都将是预渲染的像素图图层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:41:35.470

这是我想出的解决方案。它不漂亮，但它适用于我的目的。

更好的替代品非常受欢迎......

```
/**
* @requires OpenLayers/Layer/TMS.js
*/
MyLayer = OpenLayers.Class(OpenLayers.Layer.TMS, {
    latShift: 0.0,
    latShiftPx: 0,

    setMap: function(map) {
        OpenLayers.Layer.TMS.prototype.setMap.apply(this, arguments);
        map.events.register("moveend", this, this.mapMoveEvent)
    },
    // This is the function you will want to modify for your needs
    mapMoveEvent: function(event) {
        var resolution = this.map.getResolution();
        var center = this.map.getCenter();

        // This is some calculation I use, replace it whatever you like:
        var h = center.clone().transform(projmerc, proj4326);
        var elliptical = EllipticalMercator.fromLonLat(h.lon, h.lat);
        var myCenter = new OpenLayers.LonLat(elliptical.x, elliptical.y);

        this.latShift = myCenter.lat - center.lat;
        this.latShiftPx = Math.round(this.latShift/resolution);

        this.div.style.top = this.latShiftPx + "px";
    },
    moveTo: function(bounds, zoomChanged, dragging) {
        bounds = bounds.add(0, this.latShift);
        OpenLayers.Layer.TMS.prototype.moveTo.apply(this, [bounds, zoomChanged, dragging]);
    },
    // mostly copied and pasted from Grid.js ...
    moveGriddedTiles: function() {
        var buffer = this.buffer + 1;
        while(true) {
            var tlTile = this.grid[0][0];
            var tlViewPort = {
                x: tlTile.position.x +
                    this.map.layerContainerOriginPx.x,
                y: tlTile.position.y +
                    this.map.layerContainerOriginPx.y + this.latShiftPx // ... except this line
            };
            var ratio = this.getServerResolution() / this.map.getResolution();
            var tileSize = {
                w: Math.round(this.tileSize.w * ratio),
                h: Math.round(this.tileSize.h * ratio)
            };
            if (tlViewPort.x > -tileSize.w * (buffer - 1)) {
                this.shiftColumn(true, tileSize);
            } else if (tlViewPort.x < -tileSize.w * buffer) {
                this.shiftColumn(false, tileSize);
            } else if (tlViewPort.y > -tileSize.h * (buffer - 1)) {
                this.shiftRow(true, tileSize);
            } else if (tlViewPort.y < -tileSize.h * buffer) {
                this.shiftRow(false, tileSize);
            } else {
                break;
            }
        }
    },
    CLASS_NAME: "MyLayer"
}); 
```

请注意，这只适用于 OpenLayers 2.13 或更高版本

# android - 设置刷新率后 AdMob android CTR 下降

> ID：14423118
> 
> 赞同：2
> 
> 时间：2013-01-20T09:12:45.290
> 
> 标签：android, admob, ads

我对 Android 中的 AdMob 有两个问题：

**1）**我已经开始在我的应用程序中使用 AdMob 赚钱了几天，我的点击率非常好。但是昨天我注意到我设置了“使用客户端代码中设置的刷新率”但在我的应用程序中我没有设置任何刷新率，所以我在 AdMob 设置中更改了 60 秒自动刷新。昨天我有很多点击，今天我很少，但印象数更高。

与展示次数相比，点击次数更新可能会延迟？

**2)**如果我只想在我正在制作的其他应用程序中测试广告，我是否必须事先将包名称添加到 AdMob？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:19:54.743

1.  我不认为延迟有任何区别，您只会获得一些点击次数较多的日子，而其他人则很少，这仅取决于向用户展示哪些广告的运气。（5% 是非常高的点击率）

2.  为了测试新应用程序中的广告，我通常会创建一个新站点/应用程序，但您可以使用测试模式，如下所述 -[在发布前测试 admob 是否正常工作](https://stackoverflow.com/questions/8991254/testing-that-admob-working-before-publish)

# sql - 删除特定列中具有重复列数据的行

> ID：14423120
> 
> 赞同：3
> 
> 时间：2013-01-20T09:12:50.260
> 
> 标签：sql

我有一个表，我们将其称为 Table1，其中包含一堆垃圾数据，并且没有唯一标识符列。

我想从 Table1 中选择一些列并将数据传输到 Table2。但是，转移后，我需要从 Table2 中删除行，其中 3 列中有重复项。

假设我在 Table2 中有一行，其中`[FirstName]`, `[LastName]`, `[CompanyName]`, `[City]`,列`[State]`被转移。`[FirstName]`我只希望保留具有、`[LastName]`和的唯一组合的行`[CompanyName]`。增加混乱，`[LastName]`和/或`[CompanyName]`可能包含 NULL 值。我怎么能做到这一点？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:26:29.630

可以使用`distinct`关键字创建唯一条目。

```
select distinct 
       FirstName, 
       LastName, 
       CompanyName 
  from MyTable 
```

因此，如果您发出以下命令，您只会将不同的值添加到新表中

```
insert into newTable
(
       FirstName, 
       LastName, 
       CompanyName 
)
select distinct 
       FirstName, 
       LastName, 
       CompanyName 
  from MyTable
 where not exists (
   select 1 from newTable 
    where newTable.FirstName   = MyTable.FirstName
      and newTable.LastName    = MyTable.LastName
      and newTable.CompanyName = MyTable.CompanyName
  ) 
```

另一种向表添加不同的新值的好方法可以使用“合并”命令来完成。

```
merge newtable as target
using (select distinct 
              FirstName, 
              LastName, 
              CompanyName 
         from MyTable
       ) as source
   on target.FirstName   = target.FirstName
  and target.LastName    = target.LastName
  and target.CompanyName = target.CompanyName

when not matched by target then
  insert (FirstName, 
          LastName, 
          CompanyName)
  values (target.FirstName, 
          target.LastName, 
          target.CompanyName); 
```

该 `MERGE`命令为您提供了控制何时同步表的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T09:30:09.253

看这里的例子，可能这就是你想要的..[链接](http://sqlfiddle.com/#!2/3ff71/1/0)

```
insert into Table2(`firstname` , `lastname` , `companyname`)
select a.firstname,a.lastname,a.companyname 
from 
(select distinct(concat(firstname,',',lastname,',',companyname))
,firstname,lastname,companyname from Table1) a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T09:36:36.890

```
create table t2
as
select distinct FirstName,LastName,CompanyName,City,State from t1;

with the below query u 'll get to know we have duplicate entries or not.
select FirstName,LastName,CompanyName,count(*) from t2
group by FirstName,LastName,CompanyName
having Count(*) >1;

delete from t2 a where rowid not in (select min(rowid) from t2 b where a.column1=b.column1 
and .....); 
```

# node.js - Redis中保存聊天记录的结构类型是什么

> ID：14423125
> 
> 赞同：3
> 
> 时间：2013-01-20T09:13:38.543
> 
> 标签：node.js, express, redis

我正在编写聊天程序，我想做聊天历史，所以我需要存储一些值。首先是发布数据，例如：

```
 {chat_post_id,text,room_name} 
```

其中chat_postid 将自动递增，并且我从聊天中获得文本和roon_name。在收集了一些帖子后，我需要以某种方式将它们与编写它们的用户联系起来，所以我需要这样的东西：

```
 Thomas
   chat_postid_1,text,room_name
   chat_postid_2,text,room_name
   chat_postid_3,text,room_name
 Kris
   chat_postid_1,text,room_name
   chat_postid_2,text,room_name
   chat_postid_3,text,room_name 
```

我不确定是否可以使用 redis - 我是这个 nosql 数据库概念的新手。我想我应该以某种方式使用哈希，但不知道如何。

# paypal - 电子邮件 ID 的 PayPal 捐赠按钮

> ID：14423128
> 
> 赞同：0
> 
> 时间：2013-01-20T09:14:05.720
> 
> 标签：paypal, paypal-adaptive-payments

我想通过用户电子邮件 ID 获取具有默认金额值的贝宝按钮。所以它会自动使用在网站上注册的用户电子邮件 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:44:29.710

如果我理解正确，您只需要确保您使用的是 PayPal 的非托管按钮，以便您可以查看值并根据登录用户动态设置业务参数。

但是，这样做也有缺点，因为人们可以看到表单代码、复制它、调整它，并将虚假值提交到您的系统。您可以使用[IPN](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)来帮助捕捉虚假订单，但这可能会很麻烦。

如果您熟悉 Web 服务，我建议您使用[Express Checkout API 。](https://www.x.com/developers/paypal/development-and-integration-guides#ec)这是一种很好且安全的方式来满足您的需求。

# java - IKVM.NET 作为 OpenOffice 的 JRE

> ID：14423136
> 
> 赞同：2
> 
> 时间：2013-01-20T09:15:16.983
> 
> 标签：java, .net, mono, openoffice.org, ikvm

我正在编写一个应该与大型 .NET 库交互的 OpenOffice 扩展。正如[这里](https://stackoverflow.com/questions/14386369/calling-mono-assemblies-from-java)所建议的，一个合理的解决方案是使用 IKVM.NET 和用 Java 编写的扩展，它与 Mono 库交互。然而，问题是，如何将 IKVM.NET 作为 OpenOffice 的 JRE 引入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:18:23.060

我认为如果不重新编译 OpenOffice，这是不可能的。OpenOffice 有一个非常强大的 Java VM 检查。如果你想这样做，那么你需要：

*   将 ikvm.exe 重命名或复制为 java.exe。
*   使用 IKVM 的设置从 Java 7 的[此修复签入](http://cgit.freedesktop.org/libreoffice/core/commit/?id=549e54fb2f8113502743c443d6deadfe648dede1)中进行等值更改。供应商是“Jeroen Frijters”。当前的 ikvm 版本为 1.7.0。然后重建 OpenOffice 或 LibreOffice。
*   然后在菜单Tools - Options - OpenOffice.org - Java中输入IKVM bin父目录的路径

或者，您可以将 IKVM 的供应商更改为“Oracle Corporation”并重建它。

但我不知道这应该如何与单声道一起使用。

# servicestack - ServiceStack 验证和输入字段重新填充

> ID：14423138
> 
> 赞同：2
> 
> 时间：2013-01-20T09:15:59.700
> 
> 标签：servicestack

通过 ServiceStack 使用 FluentValidation 时，验证失败时检索先前表单值的技术是什么？

我需要这些数据，以便我可以重新填充通过验证的字段。就目前而言，如果用户输入错误的内容，表单上的所有内容都会消失，他们必须重新输入所有内容。

任何帮助将**不胜**感激。

谢谢你。

# python - 为什么实例没有属性？

> ID：14423143
> 
> 赞同：4
> 
> 时间：2013-01-20T09:16:20.097
> 
> 标签：python

```
class Test():    
       myVersion="1.0" 
t=Test()   
t.myVersion    
--> 1.0

Test.myVersion="2.0"  
Test.x={'myVersion':'1.0'}
Test.x  
--> {'myVersion': '1.0'}

t.x 
--> {'myVersion': '1.0'}

del t.x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: Test instance has no attribute 'x' 
```

为什么实例 t 没有属性`x`？
{'myVersion': '1.0'} 是不是归属地？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T09:51:01.007

在 Python 中，`class`和`instance`属性都可以从实例中访问。

参考[http://docs.python.org/2/reference/datamodel.html](http://docs.python.org/2/reference/datamodel.html)阐明了这是如何工作`Class instances`的-

> 类实例是通过调用类对象创建的（见上文）。类实例具有作为字典实现的命名空间，这是搜索属性引用的第一个位置。如果在那里找不到属性，并且实例的类具有该名称的属性，则使用类属性继续搜索。

`Test.__dict__`您可以分别使用和来查看您的类和实例的命名空间`t.__dict__`。

有趣的是，如果您通过从实例中引用来修改类属性，则类属性将不受影响。相反，带有更改的属性副本将添加到实例的命名空间。

例如，

```
>>> t = Test()  
>>> t.myVersion = "2.0"  
>>> Test.__dict__
{'__module__': '__main__', 'myversion': '1.0', '__doc__': None}
>>> t.__dict__
{'myVersion': '2.0'} 
```

`myVersion`属性现在存在于`Test`(class) 和`t`(instance) 的命名空间中，并且可以安全地从任何一个中删除，而无需引发`AttributeError`.

基本思想是，您尝试从对象中删除的变量应该存在于其命名空间中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T09:20:02.427

问题是变量没有附加到实例，它附加到**整个类。**要解决此问题，您必须将其物理连接（好吧，也许不是*物理*连接，但您明白我的意思）到实例。

```
class Test:
    def __init__(self):
        self.myVersion = '1.0' 
```

然后你可以删除它。

```
t = Test()
del t.myVersion  # no exception raised 
```

# javascript - document.getElementbyID 和循环

> ID：14423147
> 
> 赞同：-2
> 
> 时间：2013-01-20T09:16:55.143
> 
> 标签：javascript

```
<body> 
    <div id="page"> 
    <img id="slot0" class=slot src="crab.gif" width="120" height=80>
    <img id="slot1" class=slot src="sun.gif" width="120" height=80>
    <img id="slot2" class=slot src="sail.gif" width="120" height=80> 
```

下面我想用 y 代替 0, 1 & 2

```
var slotValues = new Array(3);
var slots = new Array ('0','1','2');

for (y=0;y<=slots.length;y++){

slotValues.push (document.getElementById("slot" + slots[y]));} 
```

但是 IE 说`document.getElementById("slot" + slots[y])`不是一个对象，虽然我认为它是，如果我更改`slot[ y]`为 0，它可以找到但它不是动态的。你能检查一下我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:24:11.220

> IE说它不是一个对象。但它是

宁愿相信了解 DOM 的人。

您的问题似乎是您的`for (y=0;y<=slots.length;y++)`-loop 迭代 0、1、2 和 3，因为`3 < slots.length`- 但您的数组只有 3 个项目并且`slots[3]`是`undefined`. 将循环更改为

```
for (var y=0; y<slots.length; y++) { 
```

# c# - 正确使用与 WPF 兼容的 DoEvents()

> ID：14423148
> 
> 赞同：2
> 
> 时间：2013-01-20T09:17:05.233
> 
> 标签：c#, wpf

从 VB6 开始，我很少在 C# 中使用 DoEvents() 方法。

我现在需要为相同的目的使用相同的功能

我注意到人们使用这个功能（[Application.DoEvents 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)）：

```
Application.DoEvents() 
```

但这适合 Windows 窗体。

现在我正在使用 WPF。

WPF中有类似的方法吗？

或者也许我不应该再使用这种方法了？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T09:19:07.823

> 或者也许我不应该再使用这种方法了？

这。

基本上，使用`Application.DoEvents()`几乎总是表明您有一个长时间运行的任务，*应该*在不同的线程上执行，回调需要 UI 访问的 UI 线程。

`Application.DoEvents()`基本上是人们在不想花时间正确做事时使用的一种技巧——至少在绝大多数情况下是这样。

有多种方法可以编写与 UI 交互的长期运行任务，具体取决于您使用的语言/框架的版本以及长期运行任务的组成。要考虑的选项：

*   显式创建一个新线程
*   显式使用线程池
*   使用`BackgroundWorker`
*   使用任务并行库 (TPL) - 需要 .NET 4+
*   使用异步 API，从 .NET 4.5 / C# 5 开始*要简单得多*

# linux-kernel - 内核内部的信号

> ID：14423149
> 
> 赞同：0
> 
> 时间：2013-01-20T09:17:13.723
> 
> 标签：linux-kernel, linux-device-driver

我正在尝试为通过串行接口连接的 GSM 调制解调器编写设备驱动程序。基本思想是在串行端口上发送命令并从调制解调器获得回复（如果命令成功，则回复 OK，否则回复 ERROR）。每次从调制解调器发送一个字符时，UART 都会产生一个中断，我制作了一个解析器，将调制解调器的每条消息放在一个列表中。为了配置调制解调器以发送或接收 SMS 消息，我必须向调制解调器发送一系列命令。因此，从我的 modem_config() 函数中，我必须发送一个命令等待响应（确定或错误），如果答复确定，则发送下一个命令，依此类推。如何在 modem_config() 函数中等待来自解析器的信号，该信号告诉调制解调器的回复可用？收到此信号后，modem_config() 函数将恢复执行并解释调制解调器的回复。

谢谢。

# arrays - 消息：未定义索引：子菜单

> ID：14423152
> 
> 赞同：-1
> 
> 时间：2013-01-20T09:18:01.420
> 
> 标签：arrays, indexing

嗨，我对 codeigniter 中的数组有一些问题，我如何将数组传递给视图，这是代码不起作用。

模型 ：

```
 public function get_all()
    {           

        $query = $this->db->get('category');
        $result = $query->result_array();                      
        foreach( $result as $key => $row )
        {

          $query = $this->db->get_where('categorysub',   array('categoryID'=>$row['categoryID']));

            $row['childmenus'] = $query->result_array();
            $result[$key] = $row;

        }            
        return $result;            
    } 
```

控制器 ：

```
$this->load->model(array('mcategory','mcategorysub'));
    $data['title']= 'Detail Kategori';
    $data[] = array(
            'nestedmenu' => $this->mcategory->get_all());

    $data['nestedmenu'] = array($data);
    $this->load->view($this->template, $data); 
```

看法 ：

```
 foreach($nestedmenu as $nestedmenu_type)
{

    echo "<h2>" . $nestedmenu_type['name'] . "</h2>";
    echo "<ul>";        
    foreach($nestedmenu_type['childmenus'] as $childmenu)
    {        
        echo "<li>" . $childmenu['name'] . "</li>";
    }        
    echo "</ul>";

} 
```

该程序应显示如下结果：

```
Menu 1
     menu 1a
     menu 1b
     menu 1c
Menu 2
     menu 2a
     menu 2b
...... 
```

但实际上导致这样的错误：

菜单 1

遇到 PHP 错误严重性：通知消息：未定义索引：子菜单文件名：admin/vcategory_read.php 行号：34

```
A PHP Error was encountered 
```

严重性：警告

消息：为 foreach() 提供的参数无效

文件名：admin/vcategory_read.php

行号：34

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:21:48.077

从它的外观来看。你`$query->result_array()`返回一个资源。不能用作 foreach 的输入。

# android - 希望水平滚动坚持列而不是整个页面（片段）

> ID：14423153
> 
> 赞同：2
> 
> 时间：2013-01-20T09:18:35.360
> 
> 标签：android, android-viewpager, horizontalscrollview

我想在一个活动中显示几列。如果列数超出了屏幕的实际大小，用户应该能够左右滑动以在这些列之间移动。这可以通过`ViewPager`或轻松完成`HorizontalScrollView`。

但是我希望用户在一个屏幕上看到每个相邻的列。

一张图片应该更好地解释我的意图： ![粘性滚动](../Images/bcf1b18708fe9c8ddd5ad580e6e0cb42.png)

（剪辑或粘贴..不知道我应该用什么词）

我是否能够制作`ViewPager`或`HorizontalScrollView`坚持使用列而不是整页（片段）？

`ViewPager`或者您是否知道任何实现/所需行为的开源项目`HorizontalScrollView`？

**编辑：**我发现类似的行为出现在 API Demos 应用程序的几个示例中！

# python - 从 Google Drive 下载图片

> ID：14423157
> 
> 赞同：2
> 
> 时间：2013-01-20T09:18:57.913
> 
> 标签：python, google-drive-api

我正在尝试使用 python api 从 Google Drive 下载一些图像文件。我使用的代码首先获取文件资源对象，然后找到 downloadUrl 并使用它来下载文件。问题是 gif 和 png 文件似乎没有下载 url。

```
service = self.user.profile.DriveService()
conditions = []
conditions.append("title='image.png')
conditions.append("trashed = false")
response = service.files().list(q=" and ".join(conditions)).execute()
f = response['items'][0]
url = f['downloadUrl']
# Now download the file from url
... 
```

这适用于下载文本和 html 文件。当我尝试下载图像文件时，它们具有 downloadUrl 属性。这是一个示例图像文件资源

```
u'alternateLink':  u'https://docs.google.com/document/d/1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk/edit',
u'appDataContents': False,
u'createdDate': u'2013-01-20T08:39:55.314Z',
u'editable': True,
u'embedLink': u'https://docs.google.com/document/d/1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk/preview',
u'etag': u'"Q0cVodxX8sh4vfxZTlOyWcmmc0k/MTM1ODY3MTE5NzY5Nw"',
u'exportLinks': {u'application/pdf': u'https://docs.google.com/feeds/download/documents/export/Export?   id=1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk&exportFormat=pdf',
                 u'application/rtf':     u'https://docs.google.com/feeds/download/documents/export/Export?id=1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk&exportFormat=rtf',
              u'application/vnd.oasis.opendocument.text': u'https://docs.google.com/feeds/download/documents/export/Export?id=1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk&exportFormat=odt',
              u'application/vnd.openxmlformats-officedocument.wordprocessingml.document': u'https://docs.google.com/feeds/download/documents/export/Export?id=1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk&exportFormat=docx',
              u'text/html': u'https://docs.google.com/feeds/download/documents/export/Export?id=1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk&exportFormat=html',
              u'text/plain': u'https://docs.google.com/feeds/download/documents/export/Export?id=1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk&exportFormat=txt'},
u'iconLink': u'https://ssl.gstatic.com/docs/doclist/images/icon_11_document_list.png',
u'id': u'1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk',
u'kind': u'drive#file',
u'labels': {...},
u'lastModifyingUserName': u'Max Ferguson',
u'lastViewedByMeDate': u'2013-01-20T08:39:57.697Z',
u'mimeType': u'application/vnd.google-apps.document',
u'modifiedByMeDate': u'2013-01-20T08:39:57.697Z',
u'modifiedDate': u'2013-01-20T08:39:57.697Z',
u'ownerNames': [u'Max Ferguson'],
u'parents': [{u'id': u'0BxiZtRrps_bKaXM1OXJtUXBkOTg',
           u'isRoot': False,
           u'kind': u'drive#parentReference',
           u'parentLink': u'https://www.googleapis.com/drive/v2/files/0BxiZtRrps_bKaXM1OXJtUXBkOTg',
           u'selfLink': u'https://www.googleapis.com/drive/v2/files/1S9amlqcwLl9FOYmHFhv_RK_NwPI47IWj8iGcIK9p8hk/parents/0BxiZtRrps_bKaXM1OXJtUXBkOTg'}], 
```

我不明白为什么没有downloadUrl。这可能是因为 mimetype 是 application/vnd.google-apps.document 但该文件绝对是图像。缩略图链接等指向图像。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:48:43.323

Google 原生格式的文档 (application/vnd.google-apps.XXX) 没有该`downloadUrl`属性，您可以使用该`exportLinks`集合以支持的格式之一下载它们：

[https://developers.google.com/drive/manage-downloads#downloading_google_documents](https://developers.google.com/drive/manage-downloads#downloading_google_documents)

# asp.net-mvc - 我的会员提供商 - 如何找到当前用户

> ID：14423168
> 
> 赞同：0
> 
> 时间：2013-01-20T09:20:04.023
> 
> 标签：asp.net-mvc

我将 ASP.NET、MVC 与我自己的数据库一起使用。我试图实现自己的会员提供程序，因为我想使用我的数据库表“用户”。

但现在我很困惑：我已经注册并且我有登录页面。但是在我登录之后，其他控制器和页面如何知道当前登录的用户 ID 是什么？

我在会员提供程序中实现的功能：

```
public class MyMembershipProvider : MembershipProvider
    {
    private ManagerdBEntities1 db = new ManagerdBEntities1();
        //
        // Properties from web.config, default all to False
        //
        private string _ApplicationName;

        private bool _EnablePasswordReset;
        private bool _EnablePasswordRetrieval = false;
        private bool _RequiresQuestionAndAnswer = false;
        private bool _RequiresUniqueEmail = true;
        private int _MaxInvalidPasswordAttempts;
        private int _PasswordAttemptWindow;
        private int _MinRequiredPasswordLength;
        private int _MinRequiredNonalphanumericCharacters;
        private string _PasswordStrengthRegularExpression;
        private MembershipPasswordFormat _PasswordFormat = MembershipPasswordFormat.Hashed;   

        private string GetConfigValue(string configValue, string defaultValue)
        public override void Initialize(string name, NameValueCollection config)
        public override string ApplicationName
        public override bool ChangePassword(string username, string oldPassword, string newPassword)
        public override bool ChangePasswordQuestionAndAnswer(string username,
                                                       string password,
                                                       string newPasswordQuestion,
                                                       string newPasswordAnswer)
        public override MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)

    public override MembershipUser GetUser(string username, bool userIsOnline)
    public override string GetUserNameByEmail(string email)
     public override string ResetPassword(string username, string answer)
    public override bool EnablePasswordReset
public override bool EnablePasswordRetrieval
public override int MaxInvalidPasswordAttempts
public override int MinRequiredNonAlphanumericCharacters
public override int MinRequiredPasswordLength
public override int PasswordAttemptWindow
public override MembershipPasswordFormat PasswordFormat
public override string PasswordStrengthRegularExpression
public override bool RequiresQuestionAndAnswer
public override bool RequiresUniqueEmail
public override bool ValidateUser(string username, string password) 
```

**我的用户模型：**

```
public partial class User
    {
            private ManagerdBEntities1 db = new ManagerdBEntities1();

        public MembershipUser CreateUser(string username, string password, string email)
        public static void SendEmailThroughGmail(string messageBody, string emailTo)
        public User FindUser(string username)
        public string GetUserNameWithEmail(string email)
        public MembershipUser GetUser(string username)
       private static string CreateSalt()
       public bool ValidateUser(string username, string password)
              private static string CreatePasswordHash(string pwd, string salt) 
```

**

*   这是用户字段：

**

```
 public int Id { get; set; }
        public string UserName { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
        public int PermissionsId { get; set; }
        public int MainGroupId { get; set; }
        public int MinorGroupId { get; set; }
        public string PasswordSalt { get; set; }
        public string Comments { get; set; }
           [DataType(DataType.Date)]
        public System.DateTime CreateDate { get; set; }
        public Nullable<System.DateTime> LastModifiedDate { get; set; }
        public System.DateTime LastLoginDate { get; set; }
        public string LastLoginIP { get; set; }
        public bool IsActivated { get; set; }
        public bool IslockedOut { get; set; }
        public System.DateTime LastLockedoutDate { get; set; }
        public string LastLockedOutReason { get; set; }
        public string NewPasswordKey { get; set; }
        public Nullable<System.DateTime> NewPasswordRequested { get; set; }
        public string NewEmail { get; set; }
        public string NewEmailKey { get; set; }
        public Nullable<System.DateTime> NewEmailRequested { get; set; }

        public virtual Permission Permission { get; set; }
        public virtual ICollection<Task> Tasks { get; set; }
        public virtual UserGroup UserGroup { get; set; }
        public virtual UserGroup UserGroup1 { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:30:42.303

您可以使用`Membership.GetUser()`获取当前登录的用户

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getuser.aspx)

# node.js - 如果 express.js 和 socket.io 中没有 cookie，则重定向

> ID：14423170
> 
> 赞同：0
> 
> 时间：2013-01-20T09:20:26.153
> 
> 标签：node.js, redirect, express, socket.io

我应该如何在我的应用程序中为未经授权的用户重定向或写一些东西

如果未定义 cookie 或 cookie 值为空，我想重定向页面

这是我的脚本，我指定了我认为应该添加的内容。

```
 var express = require('express'),
        app = express(),
        memcache = require("memcache"),
        http = require('http'),
        server = http.createServer(app),
        io = require('socket.io').listen(server),
        co = require("./cookie.js"),
        codein = require("node-codein");

    //check if user loggedin
    // routing
    app.get('/', function (req, res) {
      res.sendfile(__dirname + '/index.html');
    });

    io.configure(function (){
              io.set('authorization', function (data, accept) {
                    var cookieManager = new co.cookie(data.headers.cookie);

                    var client = new memcache.Client(11211, "localhost");
                    client.connect();

                    client.get("sessions/"+cookieManager.get("sec_session_id"), function(error, result){
                        if(result){
                            var session = JSON.parse(result);
                            user = JSON.parse(session.name);
                            user = user.username;
                        }

                  if (typeof result === 'undefined' || (!result)) {
//------------> here if no cookie redirect to noaccess.html or just write you have no access to this page
                    return accept('No cookie transmitted.', false);

                  } else {
//------------> here if there is cookie then let users to see index.html
                    data.sessionID = cookieManager.get("sec_session_id");
                    accept('cookie recieved', true);
                  } 

                io.on('connection', function(socket) {
                //console.log(socket.handshake.sessionID);
                });

            });
                });
        });

    server.listen(3000); 
```

我什么都试过了，但没有运气

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:24:05.440

Considering that you want to redirect the user, it would make more sense to check for the cookie within an app.get callback, because you now have access to the response object.

If you want to intercept every request, simply put a block like this in your code:

```
app.get("/*", function(req, res, next){

    if(req.cookies){ // or req.cookies['cookiename'] if you want a specific one
        res.render("index.html");
    }   

    else{
        res.render("noaccess.html");
    }
    //You can optionally put next() here, depending on your code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:12:11.247

在我的情况下，我认为如果授予访问权限，我需要发出，那么我们在服务器端有这个

```
io.on('connection', function(socket) {
            //console.log(socket.handshake.sessionID);
            socket.emit('access', 'access granted');
            });
    }); 
```

在客户端我们有这个表格

```
<html>
  <head>
    <title> Tying it all together demo</title>
    <script src='/socket.io/socket.io.js'></script>
    <script src='http://code.jquery.com/jquery-latest.js'></script>
    </head>
  <body>
    <p id="text">access denied</p>
    <script>
        var socket = io.connect('http://localhost:3000/');
        socket.on('access', function (data) {
            $("#text").html(data);
        });

    </script>
</body> 
```

然后如果我们有访问权限，我们会在服务器中发出访问功能，拒绝访问文本将更改为授予访问权限

# java - 将 ActiveMQ 配置为负载平衡和重新连接

> ID：14423173
> 
> 赞同：1
> 
> 时间：2013-01-20T09:20:43.743
> 
> 标签：java, jms, activemq

使用 Java 如何配置 ActiveMQ 以在断开连接时进行负载平衡和重新连接？

据我了解，这些配置应该在 ActiveMQConnectionFactory 对象上进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:44:51.247

为此，您将 ActiveMQConnectionFactory 的 brokerUrl 设置为[故障转移传输 URI](http://activemq.apache.org/failover-transport-reference.html)；

```
failover:(tcp://primary:61616,tcp://secondary:61616) 
```

如果您只有一个代理，那么以下内容就足够了，可以用于测试重新连接，但对于生产，您很可能需要多个代理；

```
failover:(tcp://primary:61616) 
```

无限重新连接尝试是默认设置，但如果您查看上面链接的文档，您可以调整很多选项。

# cordova - 需要帮助部署 Windows 8 PhoneGap 应用程序

> ID：14423174
> 
> 赞同：2
> 
> 时间：2013-01-20T09:21:00.290
> 
> 标签：cordova, windows-8, windows-store-apps

我使用 HTML、JS Blank App 模板开发了一个 Windows 8 应用程序。我已将 PhoneGap / Cordova JS 引用包含在项目中，如[http://docs.phonegap.com/en/2.3.0/guide_getting-started_windows-8_index.md.html上的 PhoneGap 文档中所述](http://docs.phonegap.com/en/2.3.0/guide_getting-started_windows-8_index.md.html)

我能够在本地环境中运行应用程序，但是我想使用 PhoneGap 构建来部署它。PhoneGap 文档不包含有关哪些文件需要捆绑为 zip 文件并上传到 PhoneGap 构建服务器的任何信息。

我需要帮助确定需要部署到 PhoneGap 构建的文件以及这些文件的格式 [例如 Zip 文件、zip 文件中的文件夹结构等]

注意 - 对于使用 Visual Studio 2010 开发的 Windows Phone 7 应用程序，IDE 本身会创建“www”文件夹以及所需的 JS 和 CSS 文件，我已成功将其部署到 PhoneGap 构建服务器并在不同设备上验证了应用程序。

我需要专门针对 Windows 8 应用程序的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:24:06.993

PhoneGap-Build 不支持为 Windows 8 构建，因此我假设您正在尝试使用 PhoneGap-Build 来移植您为 Windows 8 开发的 PhoneGap 应用程序。

Windows8 版本的 Apache Cordova 目前在幕后使用了一些额外的 WinRT.js 东西。您将需要删除这些引用。

```
<!-- WinJS references -->
<link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0/js/ui.js"></script> 
```

此外，Windows8 版本的 Apache Cordova 目前不使用 www 文件夹，因此在组合您的 zip 时，您可能需要创建它。

邮编结构应该是这样的：

```
MyApp.zip
+-www/
  +-cordova-2.x.0.js
  +-index.html
  +-[any other supporting files, images you use ] 
```

@Ely，是的，WinRT 确实与 PhoneGap 做所有相同的事情，但它是完全不可移植的。

# java - 休眠查询以在论坛问题中搜索内容

> ID：14423175
> 
> 赞同：0
> 
> 时间：2013-01-20T09:21:01.753
> 
> 标签：java, hibernate, detachedcriteria

我想搜索论坛中的内容，尤其是论坛问题

例如：

```
searchString = "Hibernate Session Configuration"; 
```

将在论坛问题中给出相应的详细信息

但是论坛内容中的所有单词都不需要连续，因此我将搜索字符串存储在`java.util.Set`包含每个单词的

```
String[] searchArray= searchString.toLowerCase().split(" ");
Set<String> searchSet = new HashSet<String>();

// searchSet contains words of searchString
for(String string : searchArray){
searchSet.add(string);
} 
```

我将休眠查询编写为，

```
DetachedCriteria detachedCriteria = DetachedCriteria.forClass(ForumQuestion.class);

for(String searchUnitString : searchSet)
{
detachedCriteria= detachedCriteria.add(Restrictions.disjunction().add(Restrictions.ilike("forumQuestion", "%"+searchUnitString+"%")));
}
return template.findByCriteria(detachedCriteria); 
```

但是这个查询不能正常工作..它只需要最后一个`Restrictions`忽略前一个`Restrictions`！

在这个例子中，它只考虑 '%Configuration%' 但我需要的是 '%Hibernate%' 或 '%Session%' 或 '%Configuratoin%' 一起

注意：如果我查询每个单词，那么数据库命中率会很高

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:57:00.067

你没有添加析取。您正在添加 N 个析取，每个析取只包含一个限制。代码应该是：

```
DetachedCriteria detachedCriteria = DetachedCriteria.forClass(ForumQuestion.class);
Disjunction disjunction = Restrictions.disjunction();
for (String searchUnitString : searchSet) {
     disjunction.add(Restrictions.ilike("forumQuestion", "%"+searchUnitString+"%"));
}
detachedCriteria.add(disjunction);
return template.findByCriteria(detachedCriteria); 
```

请注意，除非您在论坛中几乎没有问题，否则这些搜索会很慢。SQL 查询并不是处理全文搜索的最佳方式。对于这样的任务，我会查看 Lucene（Hibernate Search 使用，顺便说一句）。

# qt - 有没有办法在不使用中间 QAction 组的情况下访问 QAction::data() ？

> ID：14423176
> 
> 赞同：3
> 
> 时间：2013-01-20T09:21:03.830
> 
> 标签：qt, menu

在创建动态菜单时，我经常需要关联信号来响应特定的索引值（例如，与该菜单项关联的数据库行标识符）。为此，我似乎需要使用下面的代码，这感觉就像是 hack。

```
QActionGroup *oneOffgroup = new QActionGroup(menu);
QAction *action = new QAction(tr("New text form..."),menu);
action->setData( writingSystem.id() );
oneOffgroup->addAction(action);
connect( oneOffgroup, SIGNAL(triggered(QAction*)), this, SLOT(newTextForm(QAction*)) );
submenu->addAction(action); 
```

[这个答案](https://stackoverflow.com/questions/14389058/is-there-a-way-to-know-what-activated-qaction)建议使用 QMenu::triggered(QAction*) 信号。不过，这只是意味着我必须整理发送到该菜单的每个信号。（这在某些情况下是可以的，但不是在我目前正在研究的情况下。）

# mercurial - Mercurial存储库损坏修复说它不是一个mercurial存储库？

> ID：14423184
> 
> 赞同：1
> 
> 时间：2013-01-20T09:22:20.990
> 
> 标签：mercurial, tortoisehg, bitbucket

所以我设法破坏了我的善变回购。因此，我正在按照 wiki 上的[存储库损坏](http://mercurial.selenic.com/wiki/RepositoryCorruption)页面中的步骤进行修复。

当我运行转换命令时：

> hg convert --config convert.hg.ignoreerrors=True REPO REPOFIX

它给了我以下输出：

```
initializing destination REPOFIX repository  
REPO does not look like a CVS checkout  
REPO does not look like a Git repository  
REPO does not look like a Subversion repository  
REPO is not a local Mercurial repository  
REPO does not look like a darcs repository  
REPO does not look like a monotone repository  
REPO does not look like a GNU Arch repository  
REPO does not look like a Bazaar repository  
cannot find required "p4" tool 
```

为什么它会这么说？我该如何修复它？

它绝对是一个 mercurial 存储库，它托管在 Bitbucket 上，我正在使用 Tortoisehg 来管理它。

编辑：

我想也许我不能针对远程存储库执行此操作？那我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:29:58.490

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T13:01:44.113

有点晚了，但我遇到了同样的问题。错误是在项目文件夹中运行该命令。您必须在包含 .hg 文件的文件夹之外运行该命令。我找不到通过 TortoiseHg 控制台向上移动目录的方法，所以我使用了 Windows 终端。

# php - php - 基于使用 AJAX 的选择下拉菜单自动填充文本区域

> ID：14423185
> 
> 赞同：-1
> 
> 时间：2013-01-20T09:22:45.383
> 
> 标签：php, ajax

我有一个名为 customers_shipto 的表，其中包含列 (ID、shiptonick、address)

我需要使用与 AJAX 的特定记录相关的地址列中的数据自动填充文本区域“shipto”

我的选择看起来像这样

```
<select name="shiptonick" id="shiptonick">
    <option value="">Click Here to Change Ship To</option>
    <?
    $sql = "SELECT * FROM customers_shipto WHERE customer_id = '$customer_id' ORDER BY shiptonick ASC"; 
    $result = mysql_query($sql);
    while($row = mysql_fetch_array($result)) {
    ?>
    <option value="<?=$row['ID']?>"><?=$row['shiptonick']?></option>
    <? } ?>
</select> 
```

和 textare 看起来像这样

```
<textarea name="shipto" id="shipto" cols="30" rows="5"></textarea> 
```

我假设我会调用像 getaddress.php 这样的文件来将结果返回给 AJAX

```
$sql = "SELECT * FROM customers_shipto WHERE ID = '$ID'"; 
$result = mysql_query($sql);
while($row = mysql_fetch_array($result)) {
    echo $row['address'];
} 
```

更新：这是 AJAX 的一些示例代码，我认为它与我想要的很接近，但不是调用“提交”，而是需要为该特定选择调用“onChange”，以便它执行此代码。

```
 <script type"text/javascript">
            $(document).ready(function(){
            $("form#submit").submit(function() {
            // we want to store the values from the form input box, then send via ajax below
            var ID = $('#ID').attr('value');
            var shiptonick = $('#shiptonick').attr('value');
            $.ajax({
            type: "POST",
            url: "includes/getaddress.php?",
            data: "ID="+ ID+
                "&shiptonick="+ shiptonick,
            success: function(data){
                //Return address here and place in textarea njavascript code
            }
            });
            return false;
            });
            });
        </script> 
```

我很亲密吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:36:29.500

将select`onchange`与填充地址的 ajax 调用函数绑定到`textarea`

```
$("#shiptonick").change(function(){

    var id = $(this).val(); //the selected id from shiptonick

    $.ajax({
             type: 'POST',
             url: 'the php page that returns address based on id',
             data: {ID: id},
             success: function(data){
                 if(data != null)
                    $("#shipto").val(data);
             }
           });    

}); 
```

# mysql - 从单列中选择多个值

> ID：14423188
> 
> 赞同：2
> 
> 时间：2013-01-20T09:24:15.623
> 
> 标签：mysql, sql, select

我想从数据库表中的单个列中选择多个值，这些值等于多个值。我希望所有这些值都匹配，否则它不应该返回任何行。我不想使用“IN”，因为它等于“OR”。

以下是它应该做什么的基本模型，**但它需要是动态**的，因为我希望将它与 PDO 语句一起使用。如果数据库只包含 id 的 1 和 2，它应该会失败，即不返回任何行。

```
SELECT
id
FROM
reports
WHERE
id=1 AND id=2 AND id=3 
```

我的当前代码如下，错误地返回零行：

```
SELECT id,title
FROM reports
WHERE id IN (1,2)
GROUP BY title 
HAVING COUNT(DISTINCT id) = 2 
```

我目前的表结构如下： [http ://www.sqlfiddle.com/#!2/ce4aa/1](http://www.sqlfiddle.com/#!2/ce4aa/1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T09:25:38.647

您必须使用`HAVING COUNT(id) = 3`以确保所选行具有所有三个 id。就像是：

```
SELECT *
FROM reports
WHERE id = 1 OR id = 2 OR id = 3 -- Or id IN(1, 2, 3)
GROUP BY SomeOtherField
HAVING COUNT(DISTINCT id) = 3; 
```

**或者：**

```
SELECT *
FROM reports
WHERE SomeOtherField IN (SELECT SomeOtherField 
                         FROM reports
                         WHERE id = 1 or id = 2 -- Or id IN(1, 2, 3)
                         GROUP BY SomeOtherField
                         HAVING COUNT(DISTINCT id) = 3
                        ); 
```

**请注意：**您必须使用`GROUP BY SomeOtherField`其他`SomeOtherField`字段，`id`因为如果您`GROUP BY id`与您在一起，`HAVING COUNT(id)`您将不会获得任何记录，因为`COUNT(id)`将始终 = 1。

**编辑：**固定`WHERE`子句，`OR`'s 而不是`AND`'s。

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/18969/4)

# android - 如何在android中按日期范围或月份获取日历事件

> ID：14423189
> 
> 赞同：4
> 
> 时间：2013-01-20T09:24:18.943
> 
> 标签：android, android-calendar

我正在使用以下代码在我的应用程序中获取和加载日历事件。它运行良好。但现在我想获取指定日期范围的事件。我怎么才能得到它..

```
Cursor cursor = getContentResolver().query(
                Uri.parse("content://com.android.calendar/events"),
                new String[] { "_id", "title", "dtstart", "dtend" }, null,
                null, "dtstart ASC"); 
```

应该是
dtstart = "2013-01-01"
dtend = "2013-01-31"

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-11-11T09:15:47.620

```
String[] projection = new String[] { CalendarContract.Events.CALENDAR_ID, CalendarContract.Events.TITLE, CalendarContract.Events.DESCRIPTION, CalendarContract.Events.DTSTART, CalendarContract.Events.DTEND, CalendarContract.Events.ALL_DAY, CalendarContract.Events.EVENT_LOCATION };

// 0 = January, 1 = February, ...

Calendar startTime = Calendar.getInstance();
startTime.set(2014,00,01,00,00);

Calendar endTime= Calendar.getInstance();
endTime.set(2015,00,01,00,00);

// the range is all data from 2014

String selection = "(( " + CalendarContract.Events.DTSTART + " >= " + startTime.getTimeInMillis() + " ) AND ( " + CalendarContract.Events.DTSTART + " <= " + endTime.getTimeInMillis() + " ))";

Cursor cursor = this.getBaseContext().getContentResolver().query( CalendarContract.Events.CONTENT_URI, projection, selection, null, null );

// output the events 

if (cursor.moveToFirst()) {
    do {
        Toast.makeText( this.getApplicationContext(), "Title: " + cursor.getString(1) + " Start-Time: " + (new Date(cursor.getLong(3))).toString(), Toast.LENGTH_LONG ).show();
    } while ( cursor.moveToNext());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T05:49:24.690

这是我为检索事件而实施的：

```
if (Integer.parseInt(Build.VERSION.SDK) >= 8 || Integer.parseInt(Build.VERSION.SDK) <= 13 ) {

            uri = "content://com.android.calendar/events";
            CALENDAR_URI = Uri.parse(uri);

        } else if(Integer.parseInt(Build.VERSION.SDK) >= 14){

             CALENDAR_URI = CalendarContract.Events.CONTENT_URI;

        }
        else {

            uri = "content://calendar/events";
            CALENDAR_URI = Uri.parse(uri);

        }
Cursor cursors = context.getContentResolver().query(CALENDAR_URI, new String[]{ "_id", "title", "description", "dtstart", "dtend", "eventLocation" },
                null,null, null);

 cursors.moveToFirst();
                                    String[] CalNames = new String[cursors.getCount()];
                                    int[] CalIds = new int[cursors.getCount()];
                                    for (int i = 0; i < CalNames.length; i++) {
                                        CalIds[i] = cursors.getInt(0);
                                        CalNames[i] = "Event"+cursors.getInt(0)+": \nTitle: "+ cursors.getString(1)+"\nDescription: "+cursors.getString(2)+"\nStart Date: "+new Date(cursors.getLong(3))+"\nEnd Date : "+new Date(cursors.getLong(4))+"\nLocation : "+cursors.getString(5);   

                                        Date mDate = new Date(cursors.getLong(3));
                                        Date nDate = new Date(cursors.getLong(4));

                                        long mTime = mDate.getTime();
                                        long lTime = nDate.getTime();
                                        if(stTime <= mTime && enTime >= lTime){ 
 String eid = cursors.getString(0);

                                            int eID = Integer.parseInt(eid);

                                            String desc = cursors.getString(2);
                                            String title = cursors.getString(1); 
```

在这种情况下，您的 stTime 将是 yo dtstart，而 enTime 将是您的 dtend。

# android - 如何从另一项活动开始

> ID：14423193
> 
> 赞同：2
> 
> 时间：2013-01-20T09:24:47.150
> 
> 标签：android

我已经从主要运行了一项活动。我想如果按钮被按下，杀死这个用户界面并激活其他用户界面来做其他工作。主要;

```
 in onClick ( view temp)  

       switch( temp . getId () ) { 
            case R.id.button_validate:
                   // raise other vindow after killing current one 
```

我的另一个活动类名称是 renderman。我能怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:44:32.397

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId())
    {
        case R.id.button_validate:
            Intent i=new Intent(this,renderman.class);
            startActivity(i);
            break;
           //use multiple case(for multiple button) like this if you need
        case R.id.exit_button:
            finish();  //to kill current one
    }
} 
```

并在 AndroidManifest.xml 中添加这些行。

```
<activity 
    android:name=".renderman">
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:29:24.370

把这段代码：

```
startActivity(new Intent(this, renderman.class));
finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T09:26:18.677

你想开始活动的地方放代码`startActivity(new Intent(getApplicationContext(), Renderman.class))`

同样在您的清单中放置以下内容

```
 <activity 
        android:name=".Renderman"
        >
    </activity>
</application> 
```

您应该（但不必）将班级名称的第一个字母大写

如果您想从字面上“杀死”您的旧活动，请在使用上面的代码启动新活动后`finish()`

要停止您遇到的问题，请执行以下操作

```
@Override
public void onBackPressed(){
//nothing, because you do not want anything to happen when you press back
} 
```

# bash - 更新文本文件中的字段，shell bash

> ID：14423196
> 
> 赞同：2
> 
> 时间：2013-01-20T09:25:23.173
> 
> 标签：bash, shell

我有一个文本文件。

文本文件中的信息是

```
Book1:Author1:10.50:50:5
Book2:Author2:4.50:30:10 
```

第一个是书名，第二个是作者名，第三个是价格，第四个是数量，第五个是销量。

我试图更新价格，它适用于：

```
read -p $'New Price: ' newPrice
sed "s/${Title}:${Author}:[^:]\+/${Title}:${Author}:${newPrice}/g" BookDB.txt > tempBook.txt
mv -f tempBook.txt BookDB.txt
echo "Book price updated!" 
```

当我退出程序并添加代码以更新数量时，使用：

```
read -p $'New Quantity: ' newQty
sed "s/${Title}:${Author}:${Price}:[^:]\+/${Title}:${Author}:${Price}:${newQty}/g" BookDB.txt > tempBook.txt
mv -f tempBook.txt BookDB.txt
echo "Book quantity updated!" 
```

数量无法更新，因为我有点丢失了价格信息。如果我立即将一本新书添加到存储价格的程序中，我可以编辑数量，但对于其他书籍，无法编辑可用数量。

有人可以帮忙吗？我想知道我是否可以提取/存储这本书的价格价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:14:25.210

对于更新数量，您可以使用：

```
read -p $'New Quantity: ' newQty
sed -re "s/${Title}:${Author}:([^:]+):[^:]+/${Title}:${Author}:\1:${newQty}/g" BookDB.txt > tempBook.txt
mv -f tempBook.txt BookDB.txt
echo "Book quantity updated!" 
```

# android - 如何在 DefaultHttpClient 和 WebView 之间共享 cookie

> ID：14423204
> 
> 赞同：4
> 
> 时间：2013-01-20T09:26:09.953
> 
> 标签：android, cookies, webview

如何在`DefaultHttpClient`和之间共享 cookie `WebView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T15:11:44.930

用户解决了在 DefaultHttpClient 和 WebView 之间共享 Cookie。[这个解决方案对他有用](https://stackoverflow.com/questions/1652850/android-webview-cookie-problem/2349340#2349340)，所以他想在那里分享完整的代码。

LoginActivity.java，核心代码是doPost：

```
private int mNumber = 3;
public InputStream doPost(String url, HashMap<String, String> params,
        String headParam, ArrayList<String> keyValues) {

    DefaultHttpClient httpClient = null;
    InputStream inputStream = null;
    HttpResponse httpResponse = null;
    int statusCode = -1;

    httpClient = (DefaultHttpClient) NetworkManager.getHttpClient();
    HttpPost httpPost = new HttpPost(url);

    if (headParam != null) {
        httpPost.addHeader("Cookie", headParam);
    }

    if (params != null) {

        List<NameValuePair> httpRequestParams = new ArrayList<NameValuePair>();
        Iterator<Entry<String, String>> iter = params.entrySet().iterator();
        while (iter.hasNext()) {

            Map.Entry<String, String> entry = iter.next();
            String key = entry.getKey();
            String val = entry.getValue();
            if (val.equals("multi")) {

                for (String values : keyValues)
                    httpRequestParams.add(new BasicNameValuePair(key,
                            values));
            } else
                httpRequestParams.add(new BasicNameValuePair(key, val));
        }

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(httpRequestParams,
                    HTTP.UTF_8));
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
    }

    try {
        httpResponse = httpClient.execute(httpPost);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        httpPost.abort();
    } catch (IOException e) {
        e.printStackTrace();
        httpPost.abort();
        if (mNumber >= 1) {
            mNumber--;
            doPost(url, params, headParam, keyValues);
            return null;
        }
    }

    if (httpResponse != null) {
        statusCode = httpResponse.getStatusLine().getStatusCode();
        if (statusCode == HttpURLConnection.HTTP_OK) {
            try {
                inputStream = httpResponse.getEntity().getContent();
            } catch (IllegalStateException e) {
                e.printStackTrace();
                httpPost.abort();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else {
            if (mNumber >= 1) {
                mNumber--;
                doPost(url, params, headParam, keyValues);
            } else {
            }
        }
    } else {
        if (mNumber >= 1) {
            mNumber--;
            doPost(url, params, headParam, keyValues);
        }
    }

    Config.mCookies = httpClient.getCookieStore().getCookies();  //save cookies
    return inputStream;
} 
```

在 Config.java 中：

```
public static List<Cookie> mCookies = null; 
```

登录成功后，webview浏览：

```
List<Cookie> cookies = Config.mCookies;
    if (cookies != null && !cookies.isEmpty()) {

        CookieSyncManager.createInstance(mContext);
        CookieManager cookieManager = CookieManager.getInstance();
        for (Cookie cookie : cookies) {

            Cookie sessionInfo = cookie;
            String cookieString = sessionInfo.getName() + "="
                    + sessionInfo.getValue() + "; domain="
                    + sessionInfo.getDomain();
            cookieManager.setCookie("http://stackoverflow.com", cookieString);
            CookieSyncManager.getInstance().sync();
        }
    }
    mWebview.loadUrl(mLink);
    setCookie(url, string); 
```

url 需要主机，起初他只使用域（例如，`stackoverflow.com`），但它不起作用。它也必须包括主机（例如，`http://stackoverflow.com`）。

# javascript - 游戏中的人工智能

> ID：14423212
> 
> 赞同：-2
> 
> 时间：2013-01-20T09:27:02.580
> 
> 标签：javascript, artificial-intelligence, three.js, 2d-games

我正在用 THREE.js 制作赛车游戏。我想问一下，我怎样才能将人工智能放在敌人身上，以便他们可以搜索玩家并击中玩家。什么样的算法用于游戏中的人工智能以及以何种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:31:01.430

搜索是一个广泛的主题：看看 A* 是否符合您的要求。

[这里](http://www.briangrinstead.com/blog/astar-search-algorithm-in-javascript)有一个关于在 JavaScript 中实现它的详细页面

# qt - qt q3table eat sectionHandleDoubleClicked

> ID：14423213
> 
> 赞同：1
> 
> 时间：2013-01-20T09:27:06.317
> 
> 标签：qt

我正在使用 q3Table。我想通过双击标题的边缘将列宽扩展到最大项目宽度

在尝试连接到 h3Header::sectionHandleDoubleClicked 时

我在 Q3Table 代码中发现它覆盖了标题双击事件并且不发出信号。

```
class Q_COMPAT_EXPORT Q3TableHeader : public Q3Header
{
void mouseDoubleClickEvent(QMouseEvent *e);
...

void Q3TableHeader::mouseDoubleClickEvent(QMouseEvent *e)
{
    if (e->button() != LeftButton)
        return;
    if (isResizing) {
        int p = real_pos(e->pos(), orientation()) + offset();
        int section = sectionAt(p);
        if (section == -1)
            return;
        section--;
        if (p >= sectionPos(count() - 1) + sectionSize(count() - 1))
            ++section;
        while (sectionSize(section) == 0)
            section--;
        if (section < 0)
            return;
        int oldSize = sectionSize(section);
        if (orientation() == Horizontal) {
            table->adjustColumn(section);
            int newSize = sectionSize(section);
            if (oldSize != newSize)
                emit sizeChange(section, oldSize, newSize);
            for (int i = 0; i < table->numCols(); ++i) {
                if (table->isColumnSelected(i) && sectionSize(i) != 0)
                    table->adjustColumn(i);
            }
        } else {
            table->adjustRow(section);
            int newSize = sectionSize(section);
            if (oldSize != newSize)
                emit sizeChange(section, oldSize, newSize);
            for (int i = 0; i < table->numRows(); ++i) {
                if (table->isRowSelected(i)  && sectionSize(i) != 0)
                    table->adjustRow(i);
            }
        }
    }
} 
```

就像在原始的 q3Header 中一样，会发出一个信号。

```
void Q3Header::mouseDoubleClickEvent(QMouseEvent *e)

{

    int p = orient == Qt::Horizontal ? e->pos().x() : e->pos().y();

    p += offset();

    if(reverse())

        p = d->lastPos - p;

    int header = handleAt(p);

    if (header >= 0)

        emit sectionHandleDoubleClicked(header);

} 
```

如何获得与 sectionHandleDoubleClicked 相同的效果？

或者我怎样才能达到这个效果？

# c - 在c的开头添加节点

> ID：14423222
> 
> 赞同：1
> 
> 时间：2013-01-20T09:28:45.100
> 
> 标签：c, linked-list

这是我在开始时添加节点的代码。

```
void screate(ll *node)
{
  ll *newNode=(ll *)malloc(sizeof(ll));
  printf("Enter number :\t");
  scanf("%d",&newNode->data);
  if(newNode->data != NULL)
  {
    newNode->next=node;
    node= newNode;
    screate(node);
  }
  else
  {
    free(newNode);
    newNode=NULL;
  }
} 
```

即使我在[这里](http://www.algolist.net/Data_structures/Singly-linked_list/Insertion)找到了相同的代码，我也无法弄清楚为什么我得到错误的输出。

这是当前节点

**`56->78->77->NULL`**

但是，当我尝试在开始时添加新节点时，我仍然得到相同的输出，即**`56->78->77->NULL`**. 需要帮忙 ！！

**更新**

```
void show(ll *node){
while(node->next != NULL)
 {
  printf("%d->",node->data);
  node=node->next;
 }
printf("NULL");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T09:33:11.713

您分配给`node`which 只是函数的一个参数。由于它是按值传递的，因此不会更新调用函数持有的版本。

您需要传递一个指向它的指针（即`ll **node`）并将您的代码更改为分配给`*node`，并更改调用者以`&`在参数之前添加 a 以获取其地址。

```
void screate(ll **node)
{
  ll *newNode=malloc(sizeof(ll));
  printf("Enter number :\t");
  scanf("%d",&newNode->data);
  if(newNode->data != NULL)
  {
    newNode->next=*node;
    *node= newNode;
    screate(node);
  }
  else
  {
    free(newNode);
  }
} 
```

如果将指向某事物的指针传递给函数，它可以更改某事物，但不能更改指针本身。因此，自然的结论是使某物本身成为指针——即指向指针的指针。

原则上，您可以根据需要尽可能深地使用此指针链接，但实际上您通常只需要“指向事物的指针”之外的任何东西。

其他几点。尽量避免变量名`l`，`ll`因为小写 L 很容易与许多字体中的数字 1（和大写 I）混淆。此外，您再次使用递归调用`screate()`作为循环可能会更有效`while`。一些编译器会发现它是[尾递归](http://en.m.wikipedia.org/wiki/Tail_call)的，并且无论如何都会优化为循环，但我从不喜欢依赖这种东西，因为一开始就很清楚使用循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T09:31:08.310

> ```
> newNode->next=node;
> node = newNode; 
> ```

问题是`node = newNode`只更改本地副本，`node`这意味着调用者看不到更改。对于调用者来说，就好像您从未调用过该函数，`node`仍然指向它之前指向的任何位置。

您可能想通过 a`ll **node`并更改`*node`或其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T09:39:54.710

您应该将带有参数的签名更改为指向链表指针的指针

```
void screate(ll **node); 
```

而你的函数中对应的指针变化一定是这样的

```
newNode->next=*node;
*node= newNode;
screate(&node); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:21:35.490

我建议更改您的 screate 函数，使其返回一个`struct ll *`. 返回值将对应于您的新头节点。

`if(newNode->data != NULL)`不是从 scanf 检测输入故障的明智方法。事实上，那行代码是不明智的。NULL 被标识为空指针集的成员。newNode->data 是一个 int，而不是一个指针。将其与 0 进行比较会更有意义。[这里][1] 是标准化的 scanf 参考。仔细阅读并回答以下问题，你就会知道如何区分scanf的成功与失败：

```
int x, y;
int z = scanf("%d%d", &x, &y);
int c = getchar(); 
```

1.  如果我通过标准输入发送“abcd{enter}”，z 会是什么？
2.  如果我通过标准输入发送“abcd{enter}”，c 会是什么？
3.  如果我通过标准输入发送 EOF 信号，scanf 会返回什么？
4.  如果 z 成功读取并将值放入两个变量 x 和 y 中，z 将是哪个值？

# amazon-elasticache - PHP.INI & session.save_path & ElastiCache

> ID：14423223
> 
> 赞同：3
> 
> 时间：2013-01-20T09:29:10.583
> 
> 标签：amazon-elasticache

以下来自[http://php.net/manual/en/memcache.ini.php#ini.memcache.hash-strategy](http://php.net/manual/en/memcache.ini.php#ini.memcache.hash-strategy)

> session.save_path string 定义用于会话存储的服务器 url 的逗号分隔，例如“tcp://host1:11211, tcp://host2:11211”。

**问：** AWS ElastiCache 为您提供节点终端节点和配置终端节点（我认为这是 ElastiCache 集群的 DNS CNAME）。

如果我将配置端点值放入`session.save_path`，这是否意味着会话使用集群而不是特定节点，因此总是使用活动节点？

我了解如果重新启动/删除节点，则保存的数据将丢失，因此该节点上的会话将丢失。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T03:41:57.293

No, it does not work that way. You need to use the Amazon memcached client that has support for Auto Discovery.

[http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/AutoDiscovery.html](http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/AutoDiscovery.html)

# excel - Excel - 在列中搜索以查找文本是否匹配，然后添加相应的单元格

> ID：14423229
> 
> 赞同：0
> 
> 时间：2013-01-20T09:29:46.067
> 
> 标签：excel, formula, worksheet

我想将一个工作表中的值添加到另一个工作表。

第一个工作表（“2011 年 11 月”）仅包含名称和价格，但是名称是重复的，并且需要在第二个工作表（“销售”）中添加总和。

例如“2011 年 11 月”

```
 A           B
1   Name        Price
2   McDonalds   10
3   McDonalds   10
4   Burger King 20
5   Burger King 30
6   Wendys      5
7   iHop        20
8   iHop        15 
```

第二个工作表（“销售”）仅包含 2 列名称和价格。但是，名称已删除重复项。

例如“销售”

```
 A           B
1   Name        Price
2   McDonalds   
3   Burger King 
4   Wendys      
5   iHop 
```

我需要一个公式来将第一个工作表“2011 年 11 月”的总数加到第二个工作表“销售”的价格上。

我使用了这个公式 =IF(ISNUMBER(SEARCH(A2,Sales!A1:A8)),'November 2011'!D2,"") 但它只匹配单行的文本。

我想要的是一个这样做的公式：

“销售量”

```
 A           B
1   Name        Price
2   McDonalds   20
3   Burger King 50
4   Wendys      5
5   iHop        35 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:35:20.517

尝试使用`SUMIF`，它采用以下格式：

```
=SUMIF(<some_range>, <some_critiera>, <range_to_sum>) 
```

在您的情况下，您可以将此公式放在`B2`工作表上的单元格中`Sales`：

```
=SUMIF('November 2011'!$A$2:$A$8,A2,'Nov 2011'!$B$2:$B$8) 
```

或者通过合并整个范围使其更加灵活：

```
=SUMIF('Nov 2011'!A:A,A2,'Nov 2011'!B:B) 
```

# svn - 添加源路径时，部分 svnsync 在修订时失败

> ID：14423230
> 
> 赞同：4
> 
> 时间：2013-01-20T09:30:07.933
> 
> 标签：svn, svnsync

我正在尝试制作外部 svn 存储库的部分镜像。根据[http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.reposadmin.maint.replication.svnsync-partial](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.reposadmin.maint.replication.svnsync-partial)，这应该可以从 svn 1.5 开始。

我遵循了[http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.reposadmin.maint.replication.svnsync](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.reposadmin.maint.replication.svnsync)中描述的所有步骤，除了我没有使用“svnsync”用户. 相反，所有命令都以本地用户 'svn' 的身份执行，并且使用 file:// 协议访问本地存储库。

所以，这就是我所做的：

```
$ svnadmin create /var/svn/mirrors/foreign-mirror

$ cat > /var/svn/mirrors/foreign-mirror/hooks/pre-revprop-change <<EOF
#!/bin/sh
USER="$3"
if [ "$USER" = "svn" ]; then exit 0; fi
echo "Only the svn user may change revision properties" >&2
exit 1
EOF

$ chmod +x /var/svn/mirrors/foreign-mirror/hooks/pre-revprop-change

$ cat > /var/svn/mirrors/foreign-mirror/hooks/start-commit <<EOF
#!/bin/sh
USER="$2"
if [ "$USER" = "svn" ]; then exit 0; fi
echo "Only the svn user may commit new revisions" >&2
exit 1
EOF

$ chmod +x /var/svn/mirrors/foreign-mirror/hooks/start-commit

$ svnsync initialize \
file:///var/svn/mirrors/foreign-mirror \
https://svn.foreign.com/svn/Projects/X/Y \
--source-username #### --source-password ####

$ svnsync synchronize \
file:///var/svn/mirrors/foreign-mirror \
--non-interactive --source-username #### --source-password ####
Committed revision 1.
Copied properties for revision 1.
Committed revision 2.
Copied properties for revision 2.
...
Committed revision 80089.
Copied properties for revision 80089.
Committed revision 80090.
Copied properties for revision 80090.
svnsync: Path 'Projects' not present 
```

查看svn日志：

```
$ svn log https://svn.foreign.com/svn/Projects/X/Y -v -r80091
------------------------------------------------------------------------
r80091 | John.Doe | 2011-09-27 06:42:21 +0200 (Tue, 27 Sep 2011) | 1 line
Changed paths:
   A /Projects/X/Y 
```

如果我理解正确，重放提交 #80091 会失败，因为它找不到 /Projects。这让我很困惑。部分复制的目的不是跳过不存在的路径吗？

我在 ubuntu linux（目标存储库）上运行 svn 1.6.6 并且可以完全控制它。我无法控制源存储库，用户名和密码只能访问 /Projects/X/Y 及以下。无权访问 /Projects 或 /Projects/X。

有没有办法克服这个问题，也许是在特定的修订版开始复制？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:57:14.227

我对 svnsync 问题没有任何建议，但你正在尝试做

```
"I'm trying to make a partial mirror of an external svn repository.". 
```

你试过[svk](http://svk.bestpractical.com/view/InstallingSVK)吗？即使它是已停产的项目。它是制作颠覆存储库的部分镜像的非常好的工具。我偶尔用它来获取子项目的部分历史。假设您有以下颠覆目录结构。

```
树干
  主要项目
  助手工具
    重要工具作为子项目
分支机构
标签

```

svk 只能创建 /trunk/HelperTools/ImportantToolAsSubProject 的颠覆历史。如果这个目录只有 100 次提交。创建的 subversion 存储库将只有 100 个提交。

# android - 致命异常 Syntask #1

> ID：14423232
> 
> 赞同：0
> 
> 时间：2013-01-20T09:30:10.083
> 
> 标签：android

我正在尝试在我的 Adroid 应用程序中使用带有异步任务的进度对话框。但是当我运行我的应用程序时，这会导致致命异常。当我以另一种方法使用它时，它可以正常工作。但是当我用下面的方法使用它时，它导致了一个错误。我在其他问题中读到这是因为数组，但我不知道这是否属实。

这是我的活动代码：

```
private class TheTask extends AsyncTask<Void, Void, Void>{
  @Override
  protected void onPreExecute() {
    authProgressDialog = ProgressDialog.show(Front9Activity.this, "", "Authenticating...", true, false);
  }
  @Override
  protected Void doInBackground(Void... params) {
    loading();
    return null;
  }
  @Override
  protected void onPostExecute(Void result) {
    if(authProgressDialog.isShowing()) {
      authProgressDialog.dismiss();
    }
    return;
  }
}
public void loading(){
  mode = Integer.parseInt(gametype);
  check = Integer.parseInt(type);
  if(mode == 1) {
    name = name1;
    number = mobile1;
  } else if(mode == 2) {
    name = name2;
    number = mobile2;
  } else if(mode == 3) {
    name = name3;
    number = mobile3;
  } else {
    name = name4;
    number = mobile4;
  }
  if(check == 1){
    data = "Solo";
  } else if(check == 2) {
    data = "GroupScore";
  } else {
    data = "Tournament";
  }
  save = openOrCreateDatabase("clubscores", MODE_PRIVATE,null);
  Cursor c = save.rawQuery("Select *from Courses where VenueName = '"+ courses +"'", null);
  c.moveToFirst();
  ((TextView) findViewById(R.id.front9hole1)).setText(c.getString(c.getColumnIndex("Hole1")));
  ((TextView) findViewById(R.id.front9hole2)).setText(c.getString(c.getColumnIndex("Hole2")));
  ((TextView) findViewById(R.id.front9hole3)).setText(c.getString(c.getColumnIndex("Hole3")));
  ((TextView) findViewById(R.id.front9hole4)).setText(c.getString(c.getColumnIndex("Hole4")));
  ((TextView) findViewById(R.id.front9hole5)).setText(c.getString(c.getColumnIndex("Hole5")));
  ((TextView) findViewById(R.id.front9hole6)).setText(c.getString(c.getColumnIndex("Hole6")));
  ((TextView) findViewById(R.id.front9hole7)).setText(c.getString(c.getColumnIndex("Hole7")));
  ((TextView) findViewById(R.id.front9hole8)).setText(c.getString(c.getColumnIndex("Hole8")));
  ((TextView) findViewById(R.id.front9hole9)).setText(c.getString(c.getColumnIndex("Hole9")));
  ((TextView) findViewById(R.id.front9hole10)).setText(c.getString(c.getColumnIndex("Hole10")));
  ((TextView) findViewById(R.id.front9hole11)).setText(c.getString(c.getColumnIndex("Hole11")));
  ((TextView) findViewById(R.id.front9hole12)).setText(c.getString(c.getColumnIndex("Hole12")));
  ((TextView) findViewById(R.id.front9hole13)).setText(c.getString(c.getColumnIndex("Hole13")));
  ((TextView) findViewById(R.id.front9hole14)).setText(c.getString(c.getColumnIndex("Hole14")));
  ((TextView) findViewById(R.id.front9hole15)).setText(c.getString(c.getColumnIndex("Hole15")));
  ((TextView) findViewById(R.id.front9hole16)).setText(c.getString(c.getColumnIndex("Hole16")));
  ((TextView) findViewById(R.id.front9hole17)).setText(c.getString(c.getColumnIndex("Hole17")));
  ((TextView) findViewById(R.id.front9hole18)).setText(c.getString(c.getColumnIndex("Hole18")));
  p1 = Integer.parseInt(iden);
  Cursor c3 = save.rawQuery("Select *from " +data + " where Venue = '"+ courses +"'", null);
  c3.moveToFirst();
  int places = c3.getCount();
  if(places == 0){
  } else {
    if(p1 == 111){
      Cursor cc = save.rawQuery("Select *from " +data + " where Mobile = '"+ number +"'", null);
      cc.moveToFirst();
      count = cc.getCount();
      if(count == 0){
      } else {
        hole1 = cc.getString(cc.getColumnIndex("Hole1"));
        hole2 = cc.getString(cc.getColumnIndex("Hole2"));
        hole3 = cc.getString(cc.getColumnIndex("Hole3"));
        hole4 = cc.getString(cc.getColumnIndex("Hole4"));
        hole5 = cc.getString(cc.getColumnIndex("Hole5"));
        hole6 = cc.getString(cc.getColumnIndex("Hole6"));
        hole7 = cc.getString(cc.getColumnIndex("Hole7"));
        hole8 = cc.getString(cc.getColumnIndex("Hole8"));
        hole9 = cc.getString(cc.getColumnIndex("Hole9"));
        hole10 = cc.getString(cc.getColumnIndex("Hole10"));
        hole11 = cc.getString(cc.getColumnIndex("Hole11"));
        hole12 = cc.getString(cc.getColumnIndex("Hole12"));
        hole13 = cc.getString(cc.getColumnIndex("Hole13"));
        hole14 = cc.getString(cc.getColumnIndex("Hole14"));
        hole15 = cc.getString(cc.getColumnIndex("Hole15"));
        hole16 = cc.getString(cc.getColumnIndex("Hole16"));
        hole17 = cc.getString(cc.getColumnIndex("Hole17"));
        hole18 = cc.getString(cc.getColumnIndex("Hole18"));
      }
    } else if(p1 == 222) {
      Cursor cc = save.rawQuery("Select *from " +data + " where Mobile = '"+ number +"'", null);
      cc.moveToFirst();
      count = cc.getCount();
      if(count == 0){
      } else {
        hole1 = cc.getString(cc.getColumnIndex("Hole1"));
        hole2 = cc.getString(cc.getColumnIndex("Hole2"));
        hole3 = cc.getString(cc.getColumnIndex("Hole3"));
        hole4 = cc.getString(cc.getColumnIndex("Hole4"));
        hole5 = cc.getString(cc.getColumnIndex("Hole5"));
        hole6 = cc.getString(cc.getColumnIndex("Hole6"));
        hole7 = cc.getString(cc.getColumnIndex("Hole7"));
        hole8 = cc.getString(cc.getColumnIndex("Hole8"));
        hole9 = cc.getString(cc.getColumnIndex("Hole9"));
        hole10 = cc.getString(cc.getColumnIndex("Hole10"));
        hole11 = cc.getString(cc.getColumnIndex("Hole11"));
        hole12 = cc.getString(cc.getColumnIndex("Hole12"));
        hole13 = cc.getString(cc.getColumnIndex("Hole13"));
        hole14 = cc.getString(cc.getColumnIndex("Hole14"));
        hole15 = cc.getString(cc.getColumnIndex("Hole15"));
        hole16 = cc.getString(cc.getColumnIndex("Hole16"));
        hole17 = cc.getString(cc.getColumnIndex("Hole17"));
        hole18 = cc.getString(cc.getColumnIndex("Hole18"));
      }
    } else if(p1 == 333) {
      Cursor cc = save.rawQuery("Select *from " +data + " where Mobile = '"+ number +"'", null);
      cc.moveToFirst();
      count = cc.getCount();
      if(count == 0){
      }else{
        hole1 = cc.getString(cc.getColumnIndex("Hole1"));
        hole2 = cc.getString(cc.getColumnIndex("Hole2"));
        hole3 = cc.getString(cc.getColumnIndex("Hole3"));
        hole4 = cc.getString(cc.getColumnIndex("Hole4"));
        hole5 = cc.getString(cc.getColumnIndex("Hole5"));
        hole6 = cc.getString(cc.getColumnIndex("Hole6"));
        hole7 = cc.getString(cc.getColumnIndex("Hole7"));
        hole8 = cc.getString(cc.getColumnIndex("Hole8"));
        hole9 = cc.getString(cc.getColumnIndex("Hole9"));
        hole10 = cc.getString(cc.getColumnIndex("Hole10"));
        hole11 = cc.getString(cc.getColumnIndex("Hole11"));
        hole12 = cc.getString(cc.getColumnIndex("Hole12"));
        hole13 = cc.getString(cc.getColumnIndex("Hole13"));
        hole14 = cc.getString(cc.getColumnIndex("Hole14"));
        hole15 = cc.getString(cc.getColumnIndex("Hole15"));
        hole16 = cc.getString(cc.getColumnIndex("Hole16"));
        hole17 = cc.getString(cc.getColumnIndex("Hole17"));
        hole18 = cc.getString(cc.getColumnIndex("Hole18"));
      }
    } else if(p1 == 444) {
      Cursor cc =save.rawQuery("Select *from " +data + " where Mobile = '"+ number +"'", null);
      cc.moveToFirst();
      count = cc.getCount();
      if(count == 0){
      }else{
        hole1 = cc.getString(cc.getColumnIndex("Hole1"));
        hole2 = cc.getString(cc.getColumnIndex("Hole2"));
        hole3 = cc.getString(cc.getColumnIndex("Hole3"));
        hole4 = cc.getString(cc.getColumnIndex("Hole4"));
        hole5 = cc.getString(cc.getColumnIndex("Hole5"));
        hole6 = cc.getString(cc.getColumnIndex("Hole6"));
        hole7 = cc.getString(cc.getColumnIndex("Hole7"));
        hole8 = cc.getString(cc.getColumnIndex("Hole8"));
        hole9 = cc.getString(cc.getColumnIndex("Hole9"));
        hole10 = cc.getString(cc.getColumnIndex("Hole10"));
        hole11 = cc.getString(cc.getColumnIndex("Hole11"));
        hole12 = cc.getString(cc.getColumnIndex("Hole12"));
        hole13 = cc.getString(cc.getColumnIndex("Hole13"));
        hole14 = cc.getString(cc.getColumnIndex("Hole14"));
        hole15 = cc.getString(cc.getColumnIndex("Hole15"));
        hole16 = cc.getString(cc.getColumnIndex("Hole16"));
        hole17 = cc.getString(cc.getColumnIndex("Hole17"));
        hole18 = cc.getString(cc.getColumnIndex("Hole18"));
      }
    }
  }
  ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(
    this,
    R.layout.spinnerlayout,
    new String[] { hole1,"1", "2", "3", "4","5","6","7","8","9" });
    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(
      this,
      R.layout.spinnerlayout,
      new String[] { hole2,"1", "2", "3", "4","5","6","7","8","9" });
      adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter3 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole3,"1", "2", "3", "4","5","6","7","8","9" });
      adapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter4 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole4,"1", "2", "3", "4","5","6","7","8","9" });
      adapter4.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter5 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole5,"1", "2", "3", "4","5","6","7","8","9" });
      adapter5.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter6 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole6,"1", "2", "3", "4","5","6","7","8","9" });
      adapter6.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter7 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole7,"1", "2", "3", "4","5","6","7","8","9" });
      adapter7.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter8 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole8,"1", "2", "3", "4","5","6","7","8","9" });
      adapter8.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter9 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole9,"1", "2", "3", "4","5","6","7","8","9" });
      adapter9.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter10 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole10,"1", "2", "3", "4","5","6","7","8","9" });
      adapter10.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter11 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole11,"1", "2", "3", "4","5","6","7","8","9" });
      adapter11.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter12 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole12,"1", "2", "3", "4","5","6","7","8","9" });
      adapter12.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter13 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole13,"1", "2", "3", "4","5","6","7","8","9" });
      adapter13.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter14 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole14,"1", "2", "3", "4","5","6","7","8","9" });
      adapter14.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter15 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole15,"1", "2", "3", "4","5","6","7","8","9" });
      adapter15.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter16 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole16,"1", "2", "3", "4","5","6","7","8","9" });
      adapter16.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter17 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole17,"1", "2", "3", "4","5","6","7","8","9" });
      adapter17.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      ArrayAdapter<String> adapter18 = new ArrayAdapter<String>(
        this,
        R.layout.spinnerlayout,
        new String[] { hole18,"1", "2", "3", "4","5","6","7","8","9" });
      adapter18.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      Spinner spinner = (Spinner)this.findViewById(R.id.soloscorehole1front9);
      spinner.setAdapter(adapter1);
      ((Spinner) findViewById(R.id.soloscorehole2front9)).setAdapter(adapter2);
      ((Spinner) findViewById(R.id.soloscorehole3front9)).setAdapter(adapter3);
      ((Spinner) findViewById(R.id.soloscorehole4front9)).setAdapter(adapter4);
      ((Spinner) findViewById(R.id.soloscorehole5front9)).setAdapter(adapter5);
      ((Spinner) findViewById(R.id.soloscorehole6front9)).setAdapter(adapter6);
      ((Spinner) findViewById(R.id.soloscorehole7front9)).setAdapter(adapter7);
      ((Spinner) findViewById(R.id.soloscorehole8front9)).setAdapter(adapter8);
      ((Spinner) findViewById(R.id.soloscorehole9front9)).setAdapter(adapter9);
      ((Spinner) findViewById(R.id.soloscorehole10front9)).setAdapter(adapter10);
      ((Spinner) findViewById(R.id.soloscorehole11front9)).setAdapter(adapter11);
      ((Spinner) findViewById(R.id.soloscorehole12front9)).setAdapter(adapter12);
      ((Spinner) findViewById(R.id.soloscorehole13front9)).setAdapter(adapter13);
      ((Spinner) findViewById(R.id.soloscorehole14front9)).setAdapter(adapter14);
      ((Spinner) findViewById(R.id.soloscorehole15front9)).setAdapter(adapter15);
      ((Spinner) findViewById(R.id.soloscorehole16front9)).setAdapter(adapter16);
      ((Spinner) findViewById(R.id.soloscorehole17front9)).setAdapter(adapter17);
      ((Spinner) findViewById(R.id.soloscorehole18front9)).setAdapter(adapter18);
      ((Spinner) findViewById(R.id.soloscorehole2front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole3front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole4front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole5front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole6front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole7front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole8front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole9front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole10front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole11front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole12front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole13front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole14front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole15front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole16front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole17front9)).setEnabled(false);
      ((Spinner) findViewById(R.id.soloscorehole18front9)).setEnabled(false);
    } 
```

这就是 logcat 所说的：

> 01-20 17:16:54.742: E/AndroidRuntime(28665): 致命异常: AsyncTask #1
> 01-20 17:16:54.742: E/AndroidRuntime(28665): java.lang.RuntimeException: 执行 doInBackground 时出错()
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> android.os.AsyncTask$3.done(AsyncTask.java:299)
> 01-20 17:16:54.742: E/AndroidRuntime(28665):在
> java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> java.util.concurrent.FutureTask.setException(FutureTask.java: 124)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> java.util.concurrent.FutureTask.run(FutureTask.java:137)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): at
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
> 01-20 17:16:54.742: E/AndroidRuntime(28665) : 在
> java.lang.Thread.run(Thread.java:856)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 原因：
> android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图。
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4607)
> 01-20 17:16:54.742: E/AndroidRuntime(28665): 在
> android. view.ViewRootImpl.requestLayout(ViewRootImpl.java:835)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:33:48.303

你得到一个错误，因为你是`loading()`从后台线程调用的`doInBackground()`。在`loading()`中，您正在修改 UI 的各个方面。除了主 UI 线程之外的任何线程都不允许这样做，并且您会得到一个异常，因为您是从后台线程执行此操作的。

理想情况下，您应该将所有这些 UI 修改都`onPostExecute()`放在`runOnUiThread`.

# c++ - 最大X位数

> ID：14423251
> 
> 赞同：-1
> 
> 时间：2013-01-20T09:33:22.560
> 
> 标签：c++, numbers, max

我正在寻找一个关于当整数达到其数字的最大数时停止的条件的想法。

IE

2位数字的最大数量是99

5位数字的最大数量是99999

我得到了这个

```
while(x != ([10^number of digits] -1))
{
    x++;
}
cout << x; 
```

但实际上我正在处理字符串，这可能我有一个巨大的数字，并且这段代码在 9 位数字之后开始变得很长的执行时间。

有谁能给我一个好主意，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:40:03.767

使用起来会快一些

```
x = ([10^number of digits] -1); 
```

代替

```
while(x != ([10^number of digits] -1))
{
    x++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:41:44.793

怎么样：

```
done = false;
while(!done)
{
    x++;
    done = true;
    for (i=0 ; i<number_of_digits; i++)
       if x[i] != '9'
          done = false;
}
cout << x; 
```

# c# - C#按主机名正确连接服务器

> ID：14423252
> 
> 赞同：0
> 
> 时间：2013-01-20T09:33:28.787
> 
> 标签：c#, .net, network-programming

我试图连接到我构建的服务器应用程序。然而，令人讨厌的部分是服务器应用程序的主机具有动态 IP。所以，我搜索了一下，发现我可以使用`Dns.GetHostAddresses`. 但问题`Dns.GetHostAddresses`实际上是给出了所有目标机器的IP地址。最近我使用`Dns.GetHostAddresses("Server_Host_Name")[0]`了，它给了我第一个 IP 地址。

到目前为止，该方法已经奏效。但我想知道有没有更安全的方法呢？或者这个方法很好？

感谢您的任何回复和回答。

# sql-server-2008 - 家庭组设置上的 SQL Server Express 2008 R2

> ID：14423253
> 
> 赞同：0
> 
> 时间：2013-01-20T09:33:43.290
> 
> 标签：sql-server-2008

很遗憾我做了这么多年的开发人员，但从来没有做过网络设置。

我能否设置 SQL Server Express R2 并通过家庭组设置从一台 PC 连接到另一台 PC？如果是这样，怎么做？

# javascript - 在 ajax HTML 响应中查找 body 标签

> ID：14423257
> 
> 赞同：23
> 
> 时间：2013-01-20T09:34:22.120
> 
> 标签：javascript, jquery, ajax, document-body

我正在做一个 ajax 调用来获取内容并像这样附加这个内容：

```
$(function(){
    var site = $('input').val();
    $.get('file.php', { site:site }, function(data){
        mas = $(data).find('a');
        mas.map(function(elem, index) {
            divs = $(this).html();
            $('#result').append('' + divs + '');
        })
    }, 'html');
}); 
```

问题是当我改变`a`时`body`我什么也得不到（没有错误，只是没有 html）。我假设body是一个标签，就像'a'一样？我究竟做错了什么？

所以这对我有用：

```
 mas = $(data).find('a'); 
```

但这不会：

```
 mas = $(data).find('body'); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-02-02T15:44:31.690

我最终得到了这个简单的解决方案：

```
var body = data.substring(data.indexOf("<body>")+6,data.indexOf("</body>"));
$('body').html(body); 
```

也适用于**head**或任何其他**标签**。

（带有 xml 解析的解决方案会更好，但是对于无效的 XML 响应，您必须进行一些“字符串解析”。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T09:39:27.293

恐怕通过 jQuery 对象（即`$(data)`）解析返回的 HTML 以获取标记注定要失败。`body`

原因是返回`data`的是一个`string`（try `console.log(typeof(data))`）。现在，根据[jQuery 文档](http://api.jquery.com/jQuery/#jQuery2)，当从包含复杂 HTML 标记的字符串创建 jQuery 对象时，诸如此类的标签`body`可能会被剥离。发生这种情况是因为为了创建对象，HTML 标记实际上被插入到不允许此类附加标签的 DOM 中。

[文档中的](http://api.jquery.com/jQuery/#jQuery2)相关引用：

> 如果一个字符串作为参数传递给 $()，jQuery 会检查该字符串以查看它是否看起来像 HTML。
> 
> [...] 如果 HTML 比没有属性的单个标签更复杂，就像上面的例子一样，元素的实际创建由浏览器的 innerHTML 机制处理。在大多数情况下，jQuery 会创建一个新元素并将该元素的 innerHTML 属性设置为传入的 HTML 片段。当参数具有单个标记（带有可选的结束标记或快速关闭）时 - $( "< img / >" ) 或 $( "< img >" )、$( "< a >< /a >" ) 或 $( "< a >" ) — jQuery 使用原生 JavaScript createElement() 函数创建元素。
> 
> 在传递复杂的 HTML 时，某些浏览器可能无法生成完全复制所提供的 HTML 源的 DOM。如前所述，jQuery 使用浏览器的 .innerHTML 属性来解析传递的 HTML 并将其插入到当前文档中。在此过程中，一些浏览器会过滤掉某些元素，例如 <html>、<title> 或 <head> 元素. 这样一来，插入的元素可能不能代表传递的原始字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-20T10:00:53.310

我做了一些实验，并且已经确定了一定程度的原因，所以在等待我感兴趣的真正答案之前，这里有一个帮助理解问题的技巧

```
$.get('/',function(d){
    // replace the `HTML` tags with `NOTHTML` tags
    // and the `BODY` tags with `NOTBODY` tags
    d = d.replace(/(<\/?)html( .+?)?>/gi,'$1NOTHTML$2>',d)
    d = d.replace(/(<\/?)body( .+?)?>/gi,'$1NOTBODY$2>',d)
    // select the `notbody` tag and log for testing
    console.log($(d).find('notbody').html())
}) 
```

## 编辑：进一步的实验

如果您将内容加载到 iframe 中似乎是可能的，那么您可以通过一些 dom 对象层次结构访问框架内容......

```
// get a page using AJAX
$.get('/',function(d){

    // create a temporary `iframe`, make it hidden, and attach to the DOM
    var frame = $('<iframe id="frame" src="/" style="display: none;"></iframe>').appendTo('body')

    // check that the frame has loaded content
    $(frame).load(function(){

        // grab the HTML from the body, using the raw DOM node (frame[0])
        // and more specifically, it's `contentDocument` property
        var html = $('body',frame[0].contentDocument).html()

        // check the HTML
        console.log(html)

        // remove the temporary iframe
        $("#frame").remove()

    })
}) 
```

## 编辑：更多研究

似乎 contentDocument 是获取`window.document`iFrame 元素的符合标准的方式，但当然 IE 并不真正关心标准，所以这是如何以`window.document.body`跨平台方式获取对 iFrame 对象的引用.. .

```
var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
var iframeBody = iframeDoc.body;
// or for extra caution, to support even more obsolete browsers
// var iframeBody = iframeDoc.getElementsByTagName("body")[0] 
```

请参阅：[iframe 的 contentDocument](https://stackoverflow.com/q/6581803/665261)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-26T19:41:31.400

我想出了一些很棒的东西（我想！）

得到你的 html 作为字符串？

```
var results = //probably an ajax response 
```

这是一个 jquery 对象，它的工作方式与当前附加到 DOM 的元素完全相同：

```
var superConvenient = $($.parseXML(response)).children('html'); 
```

什么都不会被剥夺`superConvenient`！你可以做类似`superConvenient.find('body')`甚至

```
superConvenient.find('head > script'); 
```

`superConvenient`就像每个人都习惯的 jquery 元素一样工作！！！！

# 笔记

在这种情况下，字符串`results`需要是*有效的 XML*，因为它被提供给 JQuery 的`parseXML`方法。HTML 响应的一个共同特征可能是一个`<!DOCTYPE>`标签，它会在这个意义上使文档无效。`<!DOCTYPE>`在使用这种方法之前，可能需要剥离标签！还要注意`<!--[if IE 8]>...<![endif]-->`没有结束标签的标签等功能，例如：

```
<ul>
    <li>content...
    <li>content...
    <li>content...
</ul> 
```

...以及 HTML 的任何其他功能，这些功能将被浏览器宽松地解释，但会使 XML 解析器崩溃。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-11T12:00:36.763

对我有用的正则表达式解决方案：

```
var head = res.match(/<head.*?>.*?<\/head.*?>/s);
var body = res.match(/<body.*?>.*?<\/body.*?>/s); 
```

详解：[https ://regex101.com/r/kFkNeI/1](https://regex101.com/r/kFkNeI/1)

# salesforce - Rule__c ：managerules 不存在或不是操作编辑的有效覆盖。

> ID：14423258
> 
> 赞同：0
> 
> 时间：2013-01-20T09:34:30.710
> 
> 标签：salesforce, apex-code, visualforce

我在开发组织中有一个课程，代码是

类的名称是 ManageRules.cls

```
/**
* This class is used for creating and editing Rule
**/
public with sharing class ManageRules{
public Rule__c newrule {get;set;}
public String objType {get;set;}
public string SearchEvalRule {get;set;}
public string Descr {get;set;}
public List<SelectOption> objOptions {get;set;}
// public String descr {get;set;}
public boolean edit {get;set;}
String ruleId;

public ManageRules(Apexpages.StandardController stdcon){
ruleId = stdcon.getId();
newrule = new Rule__c();
objOptions = new List<SelectOption>();

edit=false;
/**
* Add standard Objects
*/
objOptions.add(new SelectOption('',''));
objOptions.add(new SelectOption('Account','Account'));
objOptions.add(new SelectOption('Contact','Contact'));
objOptions.add(new SelectOption('Opportunity','Opportunity'));
objOptions.add(new SelectOption('Case','Case'));
objOptions.add(new SelectOption('Lead','Lead'));
objOptions.add(new SelectOption('Campaign','Campaign'));
objOptions.add(new SelectOption('Quote','Quote'));
objOptions.add(new SelectOption('Product2','Product'));
//objOptions.add(new SelectOption('ForeCast','Forecast'));

Map<String, Schema.SObjectType> mapObj = Schema.getGlobalDescribe();
for(String objname:mapObj.keySet()){
Schema.SObjectType sobj = mapObj.get(objname);
Schema.DescribeSObjectResult descRes = sobj.getDescribe();
/**
* Add custom objects
*/
if(descRes.isCustom() && !descRes.isCustomSetting()){
String objLabel = descRes.getLabel();
objOptions.add(new SelectOption(objName,objLabel));
}
}

/* Edit Rule */
if(ruleId!=null){
edit=true;
newrule = [select name,object__c,Rule_Execution_Plan__c,Available__c,Evaluation_Rule__c,Description__c from rule__c where id=:ruleId];
if(newrule!=null){
objtype=newrule.object__c;
Descr =newrule.Description__c;
SearchEvalRule =newrule.Evaluation_Rule__c ;

}
}

}

Public List<SelectOption> getEvalRule() {

List<selectOption> options = new List<selectOption>();
options.add(new selectOption('', '- None -'));
Schema.DescribeFieldResult field = Rule__c.Evaluation_Rule__c.getDescribe();
for (Schema.Picklistentry picklistEntry : field.getPicklistValues())
{
options.add(new SelectOption(pickListEntry.getValue(),pickListEntry.getLabel()));
}
return options;
}
public PageReference saveRule(){
newrule.object__c = objtype;
newrule.Evaluation_Rule__c=SearchEvalRule;
newrule.Description__c= Descr;

try{
Database.upsert(newrule);
return(new PageReference('/'+newrule.id));
}
catch(Exception e){
ApexPages.Message msg = new ApexPages.Message(ApexPages.severity.Error,e.getDMLMessage(0));
ApexPages.addMessage(msg);
return null;
}

}

public PageReference saveAndNewRule(){
newrule.object__c = objtype;
newrule.Evaluation_Rule__c=SearchEvalRule;
newrule.Description__c= Descr;
edit=false;
try{
Database.upsert(newrule);
newrule = new Rule__c();
return(new PageReference('/apex/manageRules'));
}
catch(Exception e){
ApexPages.Message msg = new ApexPages.Message(ApexPages.severity.Error,e.getDMLMessage(0));
ApexPages.addMessage(msg);
return null;
}

}

} 
```

我创建了一个对象，它给了我错误

说明 资源路径位置类型 保存错误：Rule_c *：managerules 不存在或不是操作编辑的有效覆盖。Rule* _c.object /RuleCriteria/src/objects line 0 Force.com 保存问题

我收到此错误的 Rule__c 目标代码段是：

```
<actionOverrides>
<actionName>Edit</actionName>
<content>ManageRules</content>
<skipRecordTypeSelect>false</skipRecordTypeSelect>
<type>Visualforce</type>
</actionOverrides> 
```

我无法弄清楚为什么它向我显示这个错误它是一个现有项目所以我必须将它部署在我的开发组织上。在其他组织上它工作得很好。我首先保存这个类代码然后尝试保存这个对象代码并获取这个错误。任何人都可以请如何解决这个问题？

# python - 如何使用 PyQuery 获取表内多个标签的文本内容？

> ID：14423260
> 
> 赞同：2
> 
> 时间：2013-01-20T09:34:55.417
> 
> 标签：python, pyquery

如何从给定的书籍详细信息表字段中选择属性的文本字段，其中值在文本或文本字段中？

```
 <table cellspacing="0" class="fk-specs-type2">
        <tr>
            <th class="group-head" colspan="2">Book Details</th>
        </tr>
                                                                                    <tr>
                <td class="specs-key">Publisher</td>
                <td class="specs-value fk-data">HARPER COLLINS INDIA</td>
            </tr>
                                                                                    <tr>
                <td class="specs-key">ISBN-13</td>
                <td class="specs-value fk-data">9789350291924</td>
            </tr>

                </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:35:41.900

您可以使用以下代码片段来获取`Publisher`和`ISBN-13`数据：

```
from pyquery import PyQuery

html = """<table cellspacing="0" class="fk-specs-type2">
        <tr>
            <th class="group-head" colspan="2">Book Details</th>
        </tr>
                                                                                    <tr>
                <td class="specs-key">Publisher</td>
                <td class="specs-value fk-data">HARPER COLLINS INDIA</td>
            </tr>
                                                                                    <tr>
                <td class="specs-key">ISBN-13</td>
                <td class="specs-value fk-data">9789350291924</td>
            </tr>

                </table>
"""

doc = PyQuery(html)

for td in doc("table.fk-specs-type2").find("td.specs-key"):
    print td.text, td.getnext().text 
```

它应该打印以下两行

```
Publisher HARPER COLLINS INDIA
ISBN-13 9789350291924 
```

# php - Symfony 2 | 修改具有文件（图片）字段的对象时出现表单异常

> ID：14423265
> 
> 赞同：18
> 
> 时间：2013-01-20T09:35:50.200
> 
> 标签：php, file-upload, symfony, symfony-2.1

我正在使用 Symfony2。我有一个实体**Post**，它有一个标题和一个图片字段。

**我的问题：**当我创建一个帖子时一切都很好，我有我的图片等。但是当我想修改它时，我有一个上传文件的“图片”字段的问题，Symfony 想要一个文件类型并且它有一个字符串（上传文件的路径）：

```
The form's view data is expected to be an instance of class Symfony\Component\HttpFoundation\File\File, but is a(n) string. You can avoid this error by setting the "data_class" option to null or by adding a view transformer that transforms a(n) string to an instance of Symfony\Component\HttpFoundation\File\File. 
```

我真的被这个问题困住了，真的不知道如何解决它，任何帮助将不胜感激！非常感谢！

这是我的**PostType.php**（在 newAction() 和 modifiyAction() 中使用），可能会导致问题（*Form/PostType.php*）：

```
<?php
namespace MyBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\HttpFoundation\File\UploadedFile;

use MyBundle\Entity\Post;

class PostType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
        ->add('title')
        ->add('picture', 'file');//there is a problem here when I call the modifyAction() that calls the PostType file.
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'MyBundle\Entity\Post',
        );
    }

    public static function processImage(UploadedFile $uploaded_file, Post $post)
    {
        $path = 'pictures/blog/';
        //getClientOriginalName() => Returns the original file name.
        $uploaded_file_info = pathinfo($uploaded_file->getClientOriginalName());
        $file_name =
            "post_" .
            $post->getTitle() .
            "." .
            $uploaded_file_info['extension']
            ;

        $uploaded_file->move($path, $file_name);

        return $file_name;
    }

    public function getName()
    {
        return 'form_post';
    }
} 
```

这是我的**Post 实体**（*Entity/Post.php*）：

```
<?php

namespace MyBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

use Symfony\Component\Validator\Constraints as Assert;

/**
 * MyBundle\Entity\Post
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Post
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     * @Assert\Image(
     *      mimeTypesMessage = "Not valid.",
     *      maxSize = "5M",
     *      maxSizeMessage = "Too big."
     *      )
     */
    private $picture;

    /**
     * @var string $title
     *
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

   //getters and setters
   } 
```

这是我的**newAction()** ( *Controller/PostController.php* )***每个都可以很好地使用这个函数***：

```
public function newAction()
{
    $em = $this->getDoctrine()->getEntityManager();
    $post = new Post();
    $form = $this->createForm(new PostType, $post);
    $post->setPicture("");
    $form->setData($post);
    if ($this->getRequest()->getMethod() == 'POST') 
    {
        $form->bindRequest($this->getRequest(), $post);
        if ($form->isValid()) 
        {
            $uploaded_file = $form['picture']->getData();
            if ($uploaded_file) 
            {
                $picture = PostType::processImage($uploaded_file, $post);
                $post->setPicture('pictures/blog/' . $picture);
            }
            $em->persist($post);
            $em->flush();
            $this->get('session')->setFlash('succes', 'Post added.');

            return $this->redirect($this->generateUrl('MyBundle_post_show', array('id' => $post->getId())));
        }
    }

    return $this->render('MyBundle:Post:new.html.twig', array('form' => $form->createView()));
} 
```

这是我的**modifyAction()** ( *Controller/PostController.php* )：***这个函数有问题***

```
public function modifyAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();
    $post = $em->getRepository('MyBundle:Post')->find($id);
    $form = $this->createForm(new PostType, $post);//THIS LINE CAUSES THE EXCEPTION
    if ($this->getRequest()->getMethod() == 'POST') 
    {
        $form->bindRequest($this->getRequest(), $post);
        if ($form->isValid()) 
        {
            $uploaded_file = $form['picture']->getData();
            if ($uploaded_file) 
            {
                $picture = PostType::processImage($uploaded_file, $post);
                $post->setPicture('pictures/blog/' . $picture);
            }
            $em->persist($post);
            $em->flush();
            $this->get('session')->setFlash('succes', 'Modifications saved.');

            return $this->redirect($this->generateUrl('MyBundle_post_show', array('id' => $post->getId())));
        }
    }
    return $this->render('MyBundle:Post:modify.html.twig', array('form' => $form->createView(), 'post' => $post));
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-21T11:07:32.997

我解决了问题设置`data_class`如下`null`：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
    ->add('title')
    ->add('picture', 'file', array('data_class' => null)
    );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:55:02.900

我建议您阅读使用 Symfony 和 Doctrine 上传文件的文档[How to handle File Uploads with Doctrine以及对](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html/ "上传文件")[生命周期回调](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks)部分的强烈推荐

简而言之，您通常在表单中使用“文件”变量（请参阅文档），您可以通过选项放置不同的标签，然后在您的“图片”字段中，您只需存储文件的名称，因为当您需要src 文件你可以调用 getWebpath() 方法。

```
->add('file', 'file', array('label' => 'Post Picture' )
); 
```

调用你的树枝模板

```
<img src="{{ asset(entity.webPath) }}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:03:35.580

**请在您的PostType.php**中进行以下更改。

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
    ->add('title')
    ->add('picture', 'file', array(
            'data_class' => 'Symfony\Component\HttpFoundation\File\File',
            'property_path' => 'picture'
        )
    );
} 
```

# android - 获得实际接近度（无需等待 onSensorChanged）

> ID：14423266
> 
> 赞同：1
> 
> 时间：2013-01-20T09:35:56.293
> 
> 标签：android, listener, sensors, proximity

我想从接近传感器获得实际接近度，但默认行为是注册一个侦听器并等待值更改。我不想等待改变，但我想获得实际价值。那可能吗？

```
 mSensorManager = (SensorManager) context.getSystemService(Context.SENSOR_SERVICE);
    mProximity = mSensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);
    mSensorManager.registerListener(this, mProximity, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:25:00.833

无法在 Java 中获取 Sensor 的直接值（不知道本机代码）

您必须依靠 SensorChanged 实现从 Sensor 获取值。

# android - Android : 谷歌地图 api 版本 2

> ID：14423267
> 
> 赞同：5
> 
> 时间：2013-01-20T09:36:17.877
> 
> 标签：android, google-maps-api-2, google-maps-android-api-2

我按照步骤配置 Google Maps Android API v2[官方步骤](https://developers.google.com/maps/documentation/android/start)
我使用的是 Android 3.1 版本。我在运行项目时遇到错误。
**清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mapdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-feature
      android:glEsVersion="0x00020000"
      android:required="true"/>

    <permission
          android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
        <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.mapdemo.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="I paste my key as shown in picture"/>        
    </application>

</manifest> 
```

![API 密钥](../Images/c9f44563d664bfc507dc385db0a7db2d.png) **MainActivity.java**

```
package com.example.mapdemo;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**Activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

**日志猫**

```
01-20 15:00:18.325: E/dalvikvm(856): Could not find class 'com.google.android.gms.maps.model.LatLng', referenced from method com.google_map.MainActivity.<clinit>
01-20 15:00:18.395: E/dalvikvm(856): Could not find class 'com.google.android.gms.maps.MapFragment', referenced from method com.google_map.MainActivity.onCreate
01-20 15:00:18.565: E/AndroidRuntime(856): FATAL EXCEPTION: main
01-20 15:00:18.565: E/AndroidRuntime(856): java.lang.ExceptionInInitializerError
01-20 15:00:18.565: E/AndroidRuntime(856):  at java.lang.Class.newInstanceImpl(Native Method)
01-20 15:00:18.565: E/AndroidRuntime(856):  at java.lang.Class.newInstance(Class.java:1301)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1663)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.app.ActivityThread.access$1500(ActivityThread.java:122)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.os.Looper.loop(Looper.java:132)
01-20 15:00:18.565: E/AndroidRuntime(856):  at android.app.ActivityThread.main(ActivityThread.java:4025)
01-20 15:00:18.565: E/AndroidRuntime(856):  at java.lang.reflect.Method.invokeNative(Native Method)
01-20 15:00:18.565: E/AndroidRuntime(856):  at java.lang.reflect.Method.invoke(Method.java:491)
01-20 15:00:18.565: E/AndroidRuntime(856):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-20 15:00:18.565: E/AndroidRuntime(856):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-20 15:00:18.565: E/AndroidRuntime(856):  at dalvik.system.NativeStart.main(Native Method)
01-20 15:00:18.565: E/AndroidRuntime(856): Caused by: java.lang.NoClassDefFoundError: com.google.android.gms.maps.model.LatLng
01-20 15:00:18.565: E/AndroidRuntime(856):  at com.google_map.MainActivity.<clinit>(MainActivity.java:32)
01-20 15:00:18.565: E/AndroidRuntime(856):  ... 15 more 
```

我也想知道**谷歌地图 API v2的最低要求**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:27:10.370

[您应该尝试在本指南](https://stackoverflow.com/a/14386980/1821326)中导入 google play 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T17:59:09.740

首先安装 Google play 服务，如果您使用的是 Android 2.2，请使用此代码

```
public class MainActivity extends FragmentActivity {    
    @Override
     protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);    
        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction().add(android.R.id.content, fragment).commit();
    }    
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T19:57:23.960

我遇到了类似的问题，我通过以下方案步骤解决了该问题：

-1- 我下载了最新的 ADT（Windows 64 位版本 23.0.3）以安装 Google Play 服务 API。

[-2-问题仍然存在，在此链接](https://stackoverflow.com/questions/14371725/add-google-play-services-to-eclipse-project)中尝试了@user3469294 答案。

**ADT 64 位版本有问题，在使用`SupportMapFragment`（不断崩溃）、下载 32 位 ADT 并在其 SDK 上安装 google play services API 然后使用它的库时解决了我的问题**。

# servicestack - 使用 ServiceStack 的间歇性验证问题

> ID：14423271
> 
> 赞同：3
> 
> 时间：2013-01-20T09:36:45.060
> 
> 标签：servicestack

我正在使用 ServiceStack 来构建 API，同时，我正在使用允许 Razor 视图将 html 返回到浏览器的插件。

我已经正确设置和配置了验证。我知道这一点是因为我在相应的 Razor 视图上获得了验证消息，并且消息是准确的。但是，如果我完全修改 Razor 视图**（**并且“完全”是指添加换行符然后立即删除它这样简单的事情），我会收到一个 500 错误并伴有空白页。

其他时候，在简单地刷新页面以查看 Razor 视图样式的过程中，验证只是返回一个空白页面，其中包含相同的无用 500 错误。当然，如果我删除了验证，Razor 视图 100% 的时间渲染得很好。

我必须做什么才能让验证始终有效？我的代码直截了当，并且与我在文档中能够阅读的所有内容相匹配。也就是说，响应和请求都在同一个命名空间中，并且验证器被编码到请求中。

**这是请求 DTO**

```
namespace MyServer.DTO
{
    [Validator(typeof(SignUpValidator))]
    [Route("SignUp")]
    public class SignUp : IReturn<SignUpResponse>
    {
        public string UserName { get; set; }
        public string Email { get; set; }
        public string EmailConfirm { get; set; }
        public string Password { get; set; }
        public string PasswordConfirm { get; set; }
        public int UserId { get; set; }
    }
} 
```

**这是对应的验证器**

```
namespace MyServer.DTO
{
    public class SignUpValidator : AbstractValidator<SignUp>
    {
        public SignUpValidator()
        {
            RuleSet(ApplyTo.Post, () =>
                {
                    RuleFor(e => e.UserName).NotEmpty();
                    RuleFor(e => e.Email).NotEmpty();
                    RuleFor(e => e.EmailConfirm).NotEmpty();
                    RuleFor(e => e.Password).NotEmpty();
                    RuleFor(e => e.PasswordConfirm).NotEmpty();
                }
            );
        }
    }
} 
```

**这是回复**

```
namespace MyServer.DTO
{
    public class SignUpResponse
    {
        bool DidSucceed { get; set; }
        int NewUserId { get; set; }
        public ResponseStatus ResponseStatus { get; set; }
    }
} 
```

**最后，这是配置验证插件的代码**

```
 Plugins.Add(new ValidationFeature());
        Container.RegisterValidators(typeof(SignUpService).Assembly); 
```

正如你所看到的，一切都非常普通，而且由于某种原因，这种设置非常脆弱。对相应的 Razor 视图进行任何修改，我都会收到上述错误。然后我必须反复重新编译，直到它再次工作。

我还应该提到，如果我使用 REST 控制台（google chrome 扩展程序）来测试它，我会在发布到**完全相同的**URI 时得到以下结果：

*   Content-Type 设置为：*application/json* - 一切都按预期工作。400 响应正文中列出的错误。
*   Content-Type 设置为：*application/html* - 一直中断。500 响应正文中没有数据的响应。

一定有什么我错过了。

非常感谢您的宝贵时间，我将不胜感激。

再次感谢。

# asp.net-mvc - 在 DOM 元素上调用 preventDefault

> ID：14423273
> 
> 赞同：-2
> 
> 时间：2013-01-20T09:37:08.313
> 
> 标签：asp.net-mvc, jquery, preventdefault

我目前正在创建一个 MVC4 Web 应用程序，我似乎遇到了一个奇怪的问题。我创建了一个无序列表，其中包含一些列表项，以及它们各自的锚标记，我将能够在其中单击，这将返回各自的**/CONTROLLER/ACTION**视图。

```
 <div>
        <ul>
            <li>
                <a class="ajax" href="/Test/One"></a>
            </li>
            <li>
                <a class="ajax" href="/Test/Two"></a>
            </li>
            <li>
                <a class="ajax" href="/Test/Three"></a>
            </li>
            <li>
                <a class="ajax" href="/Test/Four"></a>
            </li>
        </ul>
   </div>

   <div id="body">
   </div> 
```

然后我创建了一些 jQuery，当您单击任一锚标记时调用它，寻找“ajax”类，如果您要单击锚标记，它将运行另一个名为 GetContent 的函数，传递**HREF**值锚标记，将用作 ajax 调用的路径。

```
$(document).ready(function () {
    $(".ajax").click(function () {
        var path = $(this).attr("href");
        GetContent(path);
    });
});

function GetContent(path) {

    $.ajax({
        url: path,
        type: 'POST',
        async: false,
        success: function (result) {
            $("#body").html(result);
        }
    });
} 
```

我听说过一个你可以调用的函数，我相信它叫做**preventDefault 。**我发现我不确定何时调用此 preventDefault 来覆盖锚标记的单击。

我确实尝试将它放在几个地方，但没有运气......我现在发现我可以点击任何锚标签，并且默认操作发生，它只是返回整个网站和新的查看已加载。但是，如果我在 google chrome 开发人员工具中打开控制台，并调用函数 GetContent，通过我期望的路径，它将调用该函数，返回 ajax，并更新我的网页。

如果有人能够指出我应该在哪里调用 preventDefault 函数，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:42:53.737

`preventDefault`是`event`对象的方法。您将`event`对象的引用作为点击事件处理程序的第一个参数......</p>

```
$(".ajax").click(function (event) {
    var path = $(this).attr("href");
    GetContent(path);
    event.preventDefault();
}); 
```

# sql - 过滤子查询结果

> ID：14423277
> 
> 赞同：0
> 
> 时间：2013-01-20T09:37:39.767
> 
> 标签：sql, oracle, subquery

我在过滤查询中的重复值时遇到问题。这是我的查询

```
SELECT  cid.IDS_NO,cid.SUB_TITLE,cid.E_SUB_NAME, (cid.SUB_TITLE || ' '|| cid.E_SUB_NAME),
(SELECT(INST_BLK_HSE || ' ' || (SELECT E_STREET_NAME FROM street_table where street_code = d.INST_ST_CODE)) 
FROM del d where d.IDS_NO = cid.IDS_NO and ROWNUM = 1), 
(SELECT INST_ST_LEVEL || '-' || INST_STUNIT FROM detail d where d.IDS_NO = cid.IDS_NO and rownum = 1),
('COUNTRY' ||' ' || pl_post),pl_post 
FROM SUBSCRIBER cid where pl_postal_district = 15 and rownum < 3001 
and hi_property_type IN ('CONDO','COMMERCIAL BUILDING'); 
```

这些是我遇到问题的部分：

```
(SELECT(INST_BLK_HSE || ' ' || (SELECT E_STREET_NAME FROM street_table where street_code = d.INST_ST_CODE)) 
FROM del d where d.IDS_NO = cid.IDS_NO and ROWNUM = 1), 
(SELECT INST_ST_LEVEL || '-' || INST_STUNIT FROM detail d where d.IDS_NO = cid.IDS_NO and rownum = 1); 
```

这些部分总是得到多条记录，我只想得到1条序列号最低的记录，所以这就是我所做的：

```
(SELECT(INST_BLK_HSE || ' ' || (SELECT E_STREET_NAME FROM street_table where street_code = d.INST_ST_CODE)) 
FROM del d where d.IDS_NO = cid.IDS_NO and ROWNUM = 1 ORDER BY d.SEQ_NO DESC), 
(SELECT INST_ST_LEVEL || '-' || INST_STUNIT FROM detail d where d.IDS_NO = cid.IDS_NO and rownum = 1 ORDER BY d.SEQ_NO DESC); 
```

但是我总是收到一个错误说缺少括号，但是当我删除订单时，它工作正常。我应该怎么做才能让我的查询正确运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:15:35.647

格式化您的查询以使其更易于阅读有很长的路要走。

但是你也有一个相当棘手的问题，因为你..

> 只想获得 1 条序列号最低的记录。

应该像这样工作：

```
SELECT s.ids_no
      ,s.sub_title
      ,s.e_sub_name
      ,(s.sub_title || ' '|| s.e_sub_name) AS title_sub_name
      ,d.some_col_name
      ,t.inst_name
      ,('COUNTRY' ||' ' || s.pl_post) AS country_post
      ,s.pl_post
FROM   subscriber s

LEFT   JOIN (
   SELECT d.ids_no
         ,(d.inst_blk_hse || ' ' || st.e_street_name) AS some_col_name
         ,ROW_NUMBER() OVER (PARTITION BY d.ids_no ORDER BY d.seq_no) AS rn
   FROM   del d
   LEFT   JOIN e_street_name st ON st.street_code = d.inst_st_code
   ) d ON d.ids_no = s.ids_no AND d.rn = 1

LEFT   JOIN (
   SELECT ids_no
         ,(inst_st_level || '-' || inst_stunit)  AS inst_name
         ,ROW_NUMBER() OVER (PARTITION BY d.ids_no ORDER BY d.seq_no) AS rn
   FROM   detail         
   ) t ON t.ids_no = s.ids_no AND t.rn = 1

WHERE  s.pl_postal_district = 15
AND    s.rownum < 3001 
AND    s.hi_property_type IN ('CONDO','COMMERCIAL BUILDING'); 
```

有关子查询如何在此相关问题下工作的更多详细信息：
[选择每个 GROUP BY 组中的第一行？](https://stackoverflow.com/questions/3800551/sql-select-first-row-in-each-group-by-group)

核心功能是`ROW_NUMBER()`获取序列号最低的记录。
我重写了您的相关子查询，因为它们通常在性能方面很糟糕。它们也很难阅读。
我使用`LEFT JOIN`，所以如果子查询不应该找到任何匹配的东西，你仍然会得到一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:55:36.997

子查询必须只返回一行。因此，您必须添加`rownum = 1`到子查询内的子查询中`FROM del d`。就像是：

```
SELECT  
  cid.IDS_NO,
  cid.SUB_TITLE,
  cid.E_SUB_NAME, 
  (cid.SUB_TITLE || ' '|| cid.E_SUB_NAME),
  (SELECT (INST_BLK_HSE || ' ' || (SELECT E_STREET_NAME 
                                   FROM street_table 
                                   where street_code = d.INST_ST_CODE
                                     and rownum = 1)) <<<<<<< here
   FROM del d 
   where d.IDS_NO = cid.IDS_NO 
     and ROWNUM = 1), 
  (SELECT INST_ST_LEVEL || '-' || INST_STUNIT 
   FROM detail d 
   where d.IDS_NO = cid.IDS_NO 
   and rownum = 1),
  ('COUNTRY' ||' ' || pl_post),
  pl_post 
FROM SUBSCRIBER cid 
where pl_postal_district = 15 
  and rownum < 3001 
  and hi_property_type IN ('CONDO','COMMERCIAL BUILDING'); 
```

或者，`JOIN`所有的表格都是这样的：

```
SELECT
  cid.IDS_NO,
  cid.SUB_TITLE,
  cid.E_SUB_NAME, 
  cid.SUB_TITLE || ' '|| cid.E_SUB_NAME,
  d.INST_BLK_HSE || ' ' || s.E_STREET_NAME, 
  d.INST_ST_LEVEL || '-' || d.INST_STUNIT 
  'COUNTRY' ||' ' || pl_post),
  pl_post 
FROM SUBSCRIBER cid 
INNER JOIN del          d ON d.IDS_NO      = cid.IDS_NO 
INNER JOIN detail      d2 ON d2.IDS_NO     = cid.IDS_NO 
INNER JOIN street_table s ON s.street_code = d.INST_ST_CODE
WHERE cid.pl_postal_district = 15 
  and cid.rownum < 3001 
  and cid.hi_property_type IN ('CONDO','COMMERCIAL BUILDING')
  and s.rownum = 1
  and d.rownum = 1
  and d2.rownum = 1; 
```

# ruby - 无法使用“打印”语句查看实际输出

> ID：14423280
> 
> 赞同：0
> 
> 时间：2013-01-20T09:37:44.053
> 
> 标签：ruby, selenium-webdriver

我正在运行代码以查看输出，但没有达到预期的效果：

***部分代码***

```
element=driver.find_element(:link, "Empid")
print element
element.click 
```

***输出***

```
D:\Ruby script>ruby filedownload.rb
#<Selenium::WebDriver::Element:0x2483f70>
D:\Ruby script> 
```

但我在这里预计`href`.Say的实际价值`https://www.example.com`。

***编辑***

```
element=driver.find_element(:link, "Suppliers")
print element.attr(:href)
element.click 
```

***输出：***

```
D:\Ruby script>ruby filedownload.rb
filedownload.rb:16:in `<main>': undefined method `attr' for #<Selenium::WebDrive
r::Element:0x25619a0> (NoMethodError)
D:\Ruby script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:40:47.650

您正在显示`Selenium`实例。

尝试这个：

`print element.attr(:href)`

=== 更新 ===

`Nokogiri`似乎与:)有点不同

尝试：

`print element.attribute(:href)`

# mysql - Ruby on Rails - 无法打开 mySQL 命令行

> ID：14423282
> 
> 赞同：1
> 
> 时间：2013-01-20T09:38:08.327
> 
> 标签：mysql, ruby-on-rails, command-line

我可以执行以下步骤打开 mySQL 命令行：

```
depot>mysql -u root
mysql>CREATE DATABASE depot_production DEFAULT CHARACTER SET utf8;
mysql>GRANT ALL PRIVILEGES ON depot_production.* TO 'gotqn' IDENTIFIED BY 'mypass';
mysql>EXIT; 
```

然后更改我的*config/database.yml*

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: depot_production
  pool: 5
  username: gotqn
  password: mypass
  host: localhost 
```

最后打字：

> gotqn:~/Aptana Projects/depot$mysql depot_production

给我：

> 错误 1045 (28000)：拒绝用户 'gotqn'@'localhost' 的访问（使用密码：否）

我认为我应该指定一个密码，但输入：

> gotqn:~/Aptana Projects/depot$mysql depot_production mypass

只是向我展示了一些变量信息。

我在用：

1.  导轨 3.2.8
2.  mysql Ver 14.14 Distrib 5.5.28，适用于使用 readline 6.2 的 debian-linux-gnu (x86_64)
3.  Ubuntu LTS 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:00:27.977

在mysql中创建用户为`@'localhost'`

```
 mysql>GRANT ALL PRIVILEGES ON depot_production.* TO 'gotqn'@'localhost' IDENTIFIED BY 'mypass'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:56:03.193

在 database.yml 中，使用用户名作为 root：

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: depot_production
  pool: 5
  username: root
  password: 
  host: localhost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:31:18.687

配置文件*config/database.yml*用于 Ruby，而不用于 mysql 命令行工具。对于命令行工具，使用正确的语法：

```
mysql --user=user_name --password=your_password db_name 
```

默认情况下，如果省略 --user=user_name，它将使用您当前的登录用户。

# c++ - 考虑非静态成员函数的运算符==重载

> ID：14423284
> 
> 赞同：4
> 
> 时间：2013-01-20T09:38:12.060
> 
> 标签：c++, operator-overloading

我已经定义了一个这样的类

```
using namespace std;
class foo {
public:
  typedef std::pair< int, int > index;
  bool operator == ( const index &l, const index &r )
  {
    return (l.first == r.first && l.second == r.second);
  }
  void bar()
  {
    index i1;
    i1.first = 10;
    i1.second = 20;
    index i2;
    i2.first = 10;
    i2.second = 200;
    if (i1 == i2)
       cout << "equal\n";
  }
}; 
```

但是我在 Windows 中收到此错误

```
error C2804: binary 'operator ==' has too many parameters 
```

和linux中的这个错误

```
operator==(const  std::pair<int, int>&, const std::pair<int, int>&)’ must take exactly one argument 
```

我发现这个主题[重载 operator== 抱怨“必须只采用一个参数”](https://stackoverflow.com/questions/11229074/overloading-operator-complaining-of-must-take-exactly-one-argument)，并且似乎是类中静态和非静态函数的问题。但是不知道怎么申请`this`

例如，这是不正确的

```
 bool operator == ( const index &r )
  {
    return (this->first == r.first && this->second == r.second);
  } 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T09:44:40.433

`operator==`可以通过两种方式实现：

*   作为成员函数：在这种情况下，函数接受一个参数并在左操作数上调用，该操作数作为`this`指针隐式传递给函数。
*   作为非成员函数，在这种情况下，该函数有两个参数，左操作数和右操作数。

由于您正在实现`operator==`for `std::pair`，因此您不能将其实现为成员函数（of `std::pair`）。您剩下的选项是非成员函数。

所以在类外实现它：

```
bool operator==(std::pair<int,int> const & l, std::pair<int,int> const & r)
{
    return (l.first == r.first && l.second == r.second);
} 
```

**但是，除非您想以不同的方式实现它，否则您实际上并不需要自己实现它。**标准库已经提供了一个[通用版本](http://en.cppreference.com/w/cpp/utility/pair/operator_cmp)，它按字典顺序比较该对中的值，就像我在上面所做的那样，即`operator==`比较with和with 。如果您需要对它们进行不同的比较，请提供您自己的特定定义（非模板版本）。`std::pair``first``first``second``second`

上面提到的几点是值得注意的，`operator==`当您需要它用于定义的类型时如何实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T09:45:47.123

您需要`operator==`退出 foo 类：

```
bool operator == ( const foo::index &l, const foo::index &r )
{
  return (l.first == r.second && l.second == r.second);
}

class foo {
public:
   typedef std::pair< int, int > index;
  void bar()
  {
    index i1;
    i1.first = 10;
    i1.second = 20;
    index i2;
    i2.first = 10;
    i2.second = 200;
    if (i1 == i2)
       cout << "equal\n";
  }
}; 
```

另请注意，`std::pair`已经超载`operator==`，请参阅：[链接](http://en.cppreference.com/w/cpp/utility/pair)，如果有必要，您可以重新考虑重新编写自己的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T09:45:02.103

您可以将该运算符移出类，这样您就可以使用 2 个操作数。实际上，此时将其保留在类中是没有意义的，因为您只是在比较成员变量而不是类本身。

`pair`事实上，如果已经定义了您编写的运算符，我不会感到惊讶。

编辑：是的，看起来[`pair`已经实现了这个](http://www.cplusplus.com/reference/utility/pair/)

> 如果两个对象中的第一个元素比较相等并且两个第二个元素也比较彼此相等，则两个对对象比较相等 - 它们都必须匹配。

ps 我想你的意思是

```
return (l.first == r.first && l.second == r.second);
                    ^^^^^^ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T09:40:56.120

如果`==`在类中重载运算符，它应该只接受一个参数，以便可以在当前对象和参数之间进行比较。

# c# - 验证凭据远程服务器

> ID：14423286
> 
> 赞同：0
> 
> 时间：2013-01-20T09:38:33.947
> 
> 标签：c#, windows, login

我正在尝试检查用户在 WPF 表单上输入的远程计算机的用户名/密码是否正确。

我有这些字符串：用户名、密码和 IP 地址。

我看到了一些关于“DirectoryEntry”的信息，但无法让它工作——即使密码不正确，用户也总是经过身份验证。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:00:36.503

有多种方法，但我之前的做法是这样的（使用 DirectoryEntry），它是这样的：

```
string ldapConnectionString = @"LDAP://[domain_server]/CN=Users,DC=[domain]"

using (var de = new DirectoryEntry(
    ldapConnectionString, "username", "password", 
    AuthenticationTypes.Secure))
{
    return de.NativeObject != null; // if not null -> user is valid
} 
```

编辑：此代码将执行的操作是针对活动目录验证用户名/密码的组合。我想我误解了你（如果你的意思是，看看用户是否可以连接到特定的服务器 - > 如在 HAS PERMISSION 中那样，我不太确定如何做到这一点，或者即使它是可能的）。

# c# - 在 C# 和 XAML 中更改活动选项卡的背景

> ID：14423287
> 
> 赞同：4
> 
> 时间：2013-01-20T09:38:36.900
> 
> 标签：c#, wpf, wpf-controls

好的，我到处搜索，在我遇到问题的每个链接中都用`xaml`代码解释了。

我想在 WPF 项目中更改活动选项卡的背景和前景（*不是其内容，而是您选择以使其处于活动状态的上部），***但我正在寻找 C# 代码。**下面的代码对我不起作用：

```
if (tabs[0].IsEnabled) tabs[0].Background = Brushes.Blue;

else tabs[0].Background = Brushes.Black; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T13:24:50.283

如果您使用 WPF，请在 XAML 中执行此操作。

您可以[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)到 TabControl 的属性`ItemsSource`。不仅仅是定义一个[Styletrigger](http://msdn.microsoft.com/en-us/library/ms743015.aspx)来改变背景

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T23:06:35.827

好的，感谢`Venson`我终于得到了它，以防万一有人想知道它是如何工作的：

```
<TabControl  ItemsSource="{Binding tabs}" Height="68" HorizontalAlignment="Left" Margin="156,23,0,0" Name="tabControl1" VerticalAlignment="Top" Width="268">
        <TabControl.ItemContainerStyle>
            <Style TargetType="TabItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabItem}">
                            <Grid>
                                <Border 
                                    Margin="0,0,-4,0" 
                                    Background="Black"
                                    BorderBrush="Blue" 
                                    BorderThickness="1,1,1,1" 
                                    CornerRadius="2,12,0,0" >
                                    <ContentPresenter x:Name="ContentSite"
                                      VerticalAlignment="Center"
                                      HorizontalAlignment="Center"
                                      ContentSource="Header"
                                      Margin="12,2,12,2"
                                      RecognizesAccessKey="True"/>
                                </Border>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="Foreground" Value="Blue"></Setter>
                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type TabItem}">
                                    <Grid>
                                        <Border 
                                            Margin="0,0,-4,0" 
                                            Background="Green"
                                            BorderBrush="Blue" 
                                            BorderThickness="1,1,1,1" 
                                            CornerRadius="2,12,0,0" >
                                            <ContentPresenter x:Name="ContentSite"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Center"
                                              ContentSource="Header"
                                              Margin="12,2,12,2"
                                              RecognizesAccessKey="True"/>
                                        </Border>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </TabControl.ItemContainerStyle>
    </TabControl> 
```

此代码位于and`<Grid>`的`<Window>`标签中`MainWindow.xaml`

```
public MainWindow()
    {
    testClass testObject = new testClass();

    testObject.tabs = new List<TabItem>();

    testObject.tabs.Add(new TabItem());
    testObject.tabs.Add(new TabItem());

    testObject.tabs[0].Header = "NO WAY";
    testObject.tabs[1].Header = "ON WAY";

    testObject.tabs[0].Content = "WHAT";
    testObject.tabs[1].Content = "HELL";

    InitializeComponent();

    this.DataContext = testObject ;
}
class testClass
{
    public List<TabItem> tabs { set; get; }
} 
```

这进入`MainWindow.xaml.cs`文件。

*请注意：颜色仅供测试，请勿因选择的对比度差而评判我！*

不过，我不知道是否可以不使用其他课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T09:47:03.677

```
foreach(var tab in tabs)
{
    tab.Background = tab.IsEnabled ? Brushes.Blue :Brushes.Black;
} 
```

但是您可以在活动选项卡更改时处理选项卡控件的状态，并设置停用和激活选项卡的背景。

# jsf - PrimeFaces：有没有办法在里面放一个超链接

> ID：14423288
> 
> 赞同：3
> 
> 时间：2013-01-20T09:38:51.013
> 
> 标签：jsf, jsf-2, primefaces, hyperlink

用户成功将商品添加到购物车后，我想显示一条消息，例如`Click here to continue shopping`并`Click here to view your cart`使用`<p:message>`or `<p:growl>`。

我尝试使用诸如 PrimeFaces 如何将超链接放入其中的关键字进行谷歌搜索，`<p:message>`但没有出现任何有意义的结果。因此，如果您能与我分享如何做到这一点，或者甚至可能的话，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T10:15:17.750

根据以下博客文章：[FacesMessage Enhancements](http://blog.primefaces.org/?p=1894)

您可以使用`escape="false"`

```
<p:message escape="false" />

context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
    "Sample warn message", "PrimeFaces is developed by 
    <strong>Chuck Norris!</strong>")); 
```

或者

```
context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
    "Sample warn message", "Some Link
    <a href='http://www.w3schools.com/'>Visit W3Schools</a>")); 
```

你也可以看看 BalusC 的这篇文章

[在 JSF 消息中使用 HTML](http://balusc.blogspot.com/2010/07/using-html-in-jsf-messages.html)

# android - 在 AsyncTask 中记录应用程序

> ID：14423293
> 
> 赞同：1
> 
> 时间：2013-01-20T09:40:04.637
> 
> 标签：android

我是 android 的新手，我正在尝试制作一个用于日志记录的小型应用程序。我在[这里找到了一个很好的教程](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)，但它对我不起作用，因为我必须在异步任务中完成它。我试图做一些修改，但没有任何效果:(。这是我的代码：

```
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;

import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

import android.widget.TextView;

import com.example.androidhive.library.DatabaseHandler;
import com.example.androidhive.library.UserFunctions;

public class LoginActivity extends Activity {
Button btnLogin;
Button btnLinkToRegister;
EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputEmail = (EditText) findViewById(R.id.loginEmail);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            new LogTask().execute();    
        }

    });

    // Link to Register Screen
    btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),RegisterActivity.class);
            startActivity(i);
            finish();
        }
    });
}

private class LogTask extends AsyncTask<String, String, String> {

    protected String doInBackground(String... args) {
        String email = inputEmail.getText().toString();
        String password = inputPassword.getText().toString();
        UserFunctions userFunction = new UserFunctions();
        Log.d("Button", "Login");
        JSONObject json = userFunction.loginUser(email, password);

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                loginErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS); 
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                }else{
                    // Error in login
                    return null;
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return "done";
    }

    protected void onPostExecute(String file_url) {

        if(file_url==null) {
              loginErrorMsg.setText("Incorrect username/password");
       } else if(file_url.equals("done")) {
              Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
              dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
              startActivity(dashboard);
              finish();
       }

    }

} 
```

}

我有这个错误：

```
01-20 10:10:01.005: I/dalvikvm(2285): threadid=3: reacting to signal 3
01-20 10:10:01.425: I/dalvikvm(2285): Wrote stack traces to '/data/anr/traces.txt'
01-20 10:10:01.505: I/dalvikvm(2285): threadid=3: reacting to signal 3
01-20 10:10:01.575: I/dalvikvm(2285): Wrote stack traces to '/data/anr/traces.txt'
01-20 10:10:02.325: I/dalvikvm(2285): threadid=3: reacting to signal 3
01-20 10:10:02.465: I/dalvikvm(2285): Wrote stack traces to '/data/anr/traces.txt'
01-20 10:10:02.499: D/gralloc_goldfish(2285): Emulator without GPU emulation detected.
01-20 10:10:02.985: I/dalvikvm(2285): threadid=3: reacting to signal 3
01-20 10:10:03.095: I/dalvikvm(2285): Wrote stack traces to '/data/anr/traces.txt'
01-20 10:10:24.085: D/Button(2285): Login
01-20 10:10:24.895: E/JSON(2285): {"tag":"login","success":1,"error":0,"uid":"50ee5c6c65dd38.71886880","user":{"name":"s","email":"s","created_at":"2013-01-10 07:15:08","updated_at":null}}
01-20 10:10:24.905: W/dalvikvm(2285): threadid=12: thread exiting with uncaught exception (group=0x409c01f8)
01-20 10:10:24.985: E/AndroidRuntime(2285): FATAL EXCEPTION: AsyncTask #1
01-20 10:10:24.985: E/AndroidRuntime(2285): java.lang.RuntimeException: An error occured while executing doInBackground()
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.lang.Thread.run(Thread.java:856)
01-20 10:10:24.985: E/AndroidRuntime(2285): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:722)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:771)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:4005)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.view.View.invalidate(View.java:8576)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.view.View.invalidate(View.java:8527)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.widget.TextView.checkForRelayout(TextView.java:6760)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.widget.TextView.setText(TextView.java:3306)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.widget.TextView.setText(TextView.java:3162)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.widget.TextView.setText(TextView.java:3137)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at com.example.androidhive.LoginActivity$ChartTask2.doInBackground(LoginActivity.java:95)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at com.example.androidhive.LoginActivity$ChartTask2.doInBackground(LoginActivity.java:1)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-20 10:10:24.985: E/AndroidRuntime(2285):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-20 10:10:24.985: E/AndroidRuntime(2285):     ... 5 more
01-20 10:10:25.495: W/IInputConnectionWrapper(2285): showStatusIcon on inactive InputConnection
01-20 10:10:28.095: I/Process(2285): Sending signal. PID: 2285 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:45:16.050

尝试将 UI 相关代码移动到`onPostExecute()`中，如下所示：

```
private class LogTask extends AsyncTask<String, String, String> {
    String email, password.

    protected void onPreExecute() {
        email = inputEmail.getText().toString();
        password = inputPassword.getText().toString();
    }
    protected String doInBackground(String... args) {
        UserFunctions userFunction = new UserFunctions();
        Log.d("Button", "Login");
        JSONObject json = userFunction.loginUser(email, password);

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {

                String res = json.getString(KEY_SUCCESS); 
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                }else{
                    // Error in login
                    return null;
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return "done;
    } 
```

然后在`onPostExecute()`

```
protected void onPostExecute(String file_url) {

       if(file_url==null) {
              loginErrorMsg.setText("Incorrect username/password");
       } else if)file_url.equals("done") {
              Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
              dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
              startActivity(dashboard);
              finish();
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-09T06:20:12.863

可以使用 Log.e，当从异步任务运行时，它将被输出到 LogCat 窗口

```
Log.e => Error Logs
Log.d => Debug logs
Log.w => Warning Logs, etc 
```

# heroku - Heroku push 给出无法读取的错误信息

> ID：14423294
> 
> 赞同：1
> 
> 时间：2013-01-20T09:40:20.530
> 
> 标签：heroku, github

我在推送到 Heroku 时遇到了一些问题。每当我尝试推送我的应用程序时，我都会收到错误消息`fatal: unable to read {sha1 value}`。

堆栈跟踪如下：

```
git push heroku master
Counting objects: 2066, done.
error: unable to find {sha1 value}
Delta compression using up to 4 threads.
Compressing objects: 100% (1954/1954), done.
fatal: unable to read {sha1 value} 
```

我在推送到 GitHub 时没有任何问题，所以我不知道我的 Heroku 应用程序中是否损坏了某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:19:37.620

检查`git fsck`返回的内容，看看是否可以直接在`.git/objects`heroku 服务器上复制丢失的 git 对象。
这将类似于“[由于缺少对象而导致 Git 损坏怎么办？](https://stackoverflow.com/a/4930967/6309) ”中采用的方法。

# asp.net - 输入按钮的 LostFocus 事件和 GetFocus 事件

> ID：14423300
> 
> 赞同：0
> 
> 时间：2013-01-20T09:41:00.077
> 
> 标签：asp.net, events, input, client-side

我们如何为输入按钮设置 LostFocus 事件和 GetFocus 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:50:58.280

在页面中的 Html 代码中，一些方法可用于输入文本框。onfocus() 和 onmouseover() 是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T09:51:13.083

您可以使用*jQuery*将模糊和焦点事件绑定到输入按钮：

```
$(document).ready(function(){

    $('#inputButtonId').blur(function(){
        alert('Lost Focus');
    });

    $('#inputButtonId').focus(function(){
        alert('Got Focus');
    });

}); 
```

# mysql - DECLARE CURSOR FOR 上的语法错误

> ID：14423310
> 
> 赞同：8
> 
> 时间：2013-01-20T09:43:04.600
> 
> 标签：mysql, stored-procedures

我不明白为什么我在下面的 sp 代码上出现语法错误。谁能帮我解决这个问题？

SQL 错误 (1064)：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的“DECLARE CUR1 CURSOR FOR SELECT pc.prospectus_courses_id FROM prereq_cou”附近使用正确的语法

```
DELIMITER $$
DROP PROCEDURE IF EXISTS get_prereqs3$$
CREATE PROCEDURE get_prereqs3(IN prosp_courses_id SMALLINT(5))
BEGIN
    DECLARE done  int DEFAULT FALSE;
    DECLARE required SMALLINT(5) default 0; 
    DECLARE to_search SMALLINT(5) default 0; 
    DROP TABLE IF EXISTS tmp_list;
    CREATE TABLE tmp_list(courses_id SMALLINT(5), courses_id_req SMALLINT(5)) ENGINE = MEMORY;
    DECLARE CUR1 CURSOR FOR SELECT pc.prospectus_courses_id 
            FROM prereq_courses     pc          
            JOIN prerequisites      pr on (pr.id = pc.prerequisites_id)
            JOIN prospectus_courses ps on (ps.id = pr.prospectus_courses_id)
            WHERE ps.id = to_search 
    MAIN_LOOP: LOOP 
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
        OPEN cur1;
        FETCH cur1 INTO required;

        IF done THEN
            CLOSE cur1;
            LEAVE main_loop;
        ELSE
            insert into tmp_list values (to_search, required);
            set to_search = required;
            iterate main_loop;
        END IF;
    END LOOP;
    select  c.course_code 
        from tmp_list           t
        join prospectus_courses pc on pc.id = t.courses_id_req
        join courses            c  on c.id  = pc.courses_id ;
    drop table tmp_list;
END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-20T09:59:20.093

声明必须在`BEGIN`块之后。在您的情况下，只需将`DECLARE cur1 CURSOR`and`DECLARE CONTINUE HANDLER..`两条线向上移动。

有时您希望稍后在代码中声明变量或游标，例如，仅在满足条件时。

`BEGIN .. END`在这种情况下，您可以再次用嵌套包装块。

[http://dev.mysql.com/doc/refman/5.5/en/begin-end.html](http://dev.mysql.com/doc/refman/5.5/en/begin-end.html)和 [http://dev.mysql.com/doc/refman/5.5/en/declare.html](http://dev.mysql.com/doc/refman/5.5/en/declare.html)

> `DECLARE`只能在`BEGIN ... END`复合语句中使用，并且必须位于其开头，在任何其他语句之前。

此外，您正在声明`CUR1`但使用`cur1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:52:58.733

不需要分号吗？

```
WHERE ps.id = to_search;
                       ^___________ 
```

# java - 我的数组和数组列表 java for android 有什么问题

> ID：14423311
> 
> 赞同：1
> 
> 时间：2013-01-20T09:43:12.913
> 
> 标签：java, android, arrays, class

我不知道出了什么问题，但是每次我想将字符串元素放入 1\. 我的类 koca android 中的类时都会给我错误。

请帮助我，因为我不知道该怎么做...

谢谢你的回答

```
 package com.klemenjezakon.koceSLO;

import java.util.ArrayList;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class KocaInter extends ListActivity {

    int n = 2;
    koca koce[] = new koca[n];
    ArrayList<String> kocee = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        inicjalizacijaKoc();

        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, kocee));
    }

    private void inicjalizacijaKoc() {
        // TODO Auto-generated method stub

            koce[0].ime = "Nekaj";
            kocee.add(koce[0].ime);
            koce[1].ime="Nekaj";
            kocee.add(koce[1].ime);

    }

    protected void onListItemClick(ListView lv, View v, int position, long id) {
        super.onListItemClick(lv, v, position, id);

        startActivity(new Intent("android.intent.action.KocaInter"));
    }

} 
```

和科卡课：

```
 package com.klemenjezakon.koceSLO;

public class koca {

    String ime,visina,odprtost,predel,drustvo,oskrbnik,telefon,gms,telefonPD,email,splet,naslov,kategorija,lezisca,jedilnica,cenik,opis,razgled,zanimivejseTure,prehodDoKoc,vzponiNaVrhove;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:49:26.843

该`koce[]`数组被初始化为一个用*s**填充的**空* `koca`数组。您首先需要创建一个对象，然后才能访问或修改其字段。 *`null`*`koca`**

 **```
 // Create an instance and store it in the array
        koce[0] = new koca();
        // Retrieve the instance and set a field
        koce[0].ime = "Nekaj";
        // Retrieve the field
        kocee.add(koce[0].ime); 
```

虽然我必须同意@KKD：首先获取一些调试信息并（尝试）先自己调试。你的代码应该已经抛出了一个`NullPointerException`你可以访问的地方，`koce[0].ime`因为`koce[0]`它仍然是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:54:02.677

您没有在 koce[] 数组中放置任何值，因此 koce[0] 返回 null 因此 koce[0].ime 出现异常**

# ubuntu - Medsphere.Widget 安装错误，（在 ubuntu 中）

> ID：14423315
> 
> 赞同：0
> 
> 时间：2013-01-20T09:44:03.383
> 
> 标签：ubuntu, mono, widget, gtk#

我的操作：Ubuntu 12.04

```
 Mono JIT compiler version 2.10.8.1

  GTK# 2.12.0.0 
```

我下载了“Medsphere.Widget”，当我完成这些步骤时，“安装”

我遇到了这些麻烦：

> 错误 CS1705：程序集**gdk-sharp，版本=2.12.0.0，Culture=neutral，PublicKeyToken=35e10195dab3c99f**引用`Mono.Cairo, Version=4.0.0.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756' which has higher version number than imported assembly`Mono.Cairo，版本=2.0.0.0，Culture=neutral，PublicKeyToken=0738eb9f132ed756' ./PixbufCellRenderer.cs(74,52) ：错误CS0121：以下方法或属性之间的调用不明确： `System.Math.Ceiling(decimal)' and`System.Math.Ceiling(double)' /usr/lib/mono/2.0/mscorlib.dll（与先前错误相关的符号位置）./PixbufCellRenderer。 cs(75,53): error CS0121: The call is ambiguous between the following methods or properties: `System.Math.Ceiling(decimal)' and`System.Math.Ceiling(double)' /usr/lib/mono/2.0/mscorlib.dll错误）编译失败：3 个错误，0 个警告：*** [Medsphere.Widgets.dll] 错误 1

我该怎么办？

# python - Django Queryset：在优化这组查询方面需要帮助

> ID：14423323
> 
> 赞同：3
> 
> 时间：2013-01-20T09:45:16.923
> 
> 标签：python, sql, django, django-views, django-queryset

我正在尝试从教育问题记录列表中筛选出一些常见的标签组合。

对于此示例，我只查看 2-tag 示例（tag-tag），我应该得到一个结果示例，例如：“point”+“curve”（65 个条目）“add”+“subtract”（40 个条目) ...

这是 SQL 语句中的预期结果：

```
SELECT a.tag, b.tag, count(*)
FROM examquestions.dbmanagement_tag as a
INNER JOIN examquestions.dbmanagement_tag as b on a.question_id_id = b.question_id_id
where a.tag != b.tag
group by a.tag, b.tag 
```

基本上，我们将带有常见问题的不同标签标识到一个列表中，并将它们分组在相同的匹配标签组合中。

我尝试使用 django 查询集进行类似的查询：

```
 twotaglist = [] #final set of results

    alphatags = tag.objects.all().values('tag', 'type').annotate().order_by('tag')
    betatags = tag.objects.all().values('tag', 'type').annotate().order_by('tag')
    startindex = 0 #startindex reduced by 1 to shorten betatag range each time the atag changes. this is to reduce the double count of comparison of similar matches of tags
    for atag in alphatags:
        for btag in betatags[startindex:]:
            if (atag['tag'] != btag['tag']):
                commonQns = [] #to check how many common qns
                atagQns = tag.objects.filter(tag=atag['tag'], question_id__in=qnlist).values('question_id').annotate()
                btagQns = tag.objects.filter(tag=btag['tag'], question_id__in=qnlist).values('question_id').annotate()
                for atagQ in atagQns:
                    for btagQ in btagQns:
                        if (atagQ['question_id'] == btagQ['question_id']):
                            commonQns.append(atagQ['question_id'])
                if (len(commonQns) > 0):
                    twotaglist.append({'atag': atag['tag'],
                                        'btag': btag['tag'],
                                        'count': len(commonQns)})
        startindex=startindex+1 
```

逻辑工作正常，但是由于我对这个平台很陌生，我不确定是否有更短的解决方法来提高效率。

目前，查询大约 5K X 5K 标签比较需要大约 45 秒 :(

插件：标签类

```
class tag(models.Model):
    id = models.IntegerField('id',primary_key=True,null=False)
    question_id = models.ForeignKey(question,null=False)
    tag = models.TextField('tag',null=True)
    type = models.CharField('type',max_length=1)

    def __str__(self):
        return str(self.tag) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:06:44.650

如果我正确理解了你的问题，我会让事情变得更简单，做这样的事情

```
relevant_tags = Tag.objects.filter(question_id__in=qnlist)
#Here relevant_tags has both a and b tags

unique_tags = set()
for tag_item in relevant_tags:
    unique_tags.add(tag_item.tag)

#unique_tags should have your A and B tags

a_tag = unique_tags.pop()
b_tag = unique_tags.pop() 

#Some logic to make sure what is A and what is B

a_tags = filter(lambda t : t.tag == a_tag, relevant_tags)
b_tags = filter(lambda t : t.tag == b_tag, relevant_tags)

#a_tags and b_tags contain A and B tags filtered from relevant_tags

same_question_tags = dict()

for q in qnlist:
  a_list = filter(lambda a: a.question_id == q.id, a_tags)
  b_list = filter(lambda a: a.question_id == q.id, b_tags)
  same_question_tags[q] = a_list+b_list 
```

这样做的好处是，您可以通过在循环中迭代返回的标签以获取所有唯一标签，然后进一步迭代以明智地将它们过滤掉，将其扩展到 N 个标签。

肯定还有更多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:49:21.310

不幸的是，除非涉及外键（或一对一），否则 django 不允许加入。您将不得不在代码中执行此操作。我找到了一种方法（完全未经测试），只需一个查询即可显着缩短执行时间。

```
from collections import Counter
from itertools import combinations

# Assuming Models
class Question(models.Model):
    ...

class Tag(models.Model):
    tag = models.CharField(..)
    question = models.ForeignKey(Question, related_name='tags')

c = Counter()
questions = Question.objects.all().prefetch_related('tags') # prefetch M2M
for q in questions:
    # sort them so 'point' + 'curve' == 'curve' + 'point'
    tags = sorted([tag.name for tag in q.tags.all()])
    c.update(combinations(tags,2)) # get all 2-pair combinations and update counter
c.most_common(5) # show the top 5 
```

上面的代码使用了[Counters](http://docs.python.org/2/library/collections.html#collections.Counter)、[itertools.combinations](http://docs.python.org/2/library/itertools.html#itertools.combinations)和[django prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)，它们应该涵盖了上面可能未知的大部分位。如果上面的代码不能完全工作，请查看这些资源，并进行相应的修改。

如果您没有在模型上使用 M2M 字段，您仍然可以通过使用[反向关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)`Question`来访问标签，就像它是 M2M 字段一样。请参阅我将反向关系从 更改为 的编辑。我已经进行了一些其他编辑，这些编辑应该适用于您定义模型的方式。`tag_set``tags`

如果您不指定`related_name='tags'`，那么只需更改`tags`过滤器和 prefetch_related to`tag_set`就可以了。

# r - 逻辑回归预测的置信区间

> ID：14423325
> 
> 赞同：72
> 
> 时间：2013-01-20T09:45:48.340
> 
> 标签：r, statistics, glm, confidence-interval

在 R 中，predict.lm 根据线性回归的结果计算预测，并提供计算这些预测的置信区间。根据手册，这些区间是基于拟合的误差方差，而不是基于系数的误差区间。

另一方面，基于逻辑和泊松回归（以及其他一些回归）计算预测的 predict.glm 没有置信区间的选项。我什至很难想象如何计算这样的置信区间来为泊松和逻辑回归提供有意义的见解。

是否存在为此类预测提供置信区间有意义的情况？如何解释它们？在这些情况下的假设是什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-20T12:15:07.413

通常的方法是在线性预测器的尺度上计算置信区间，其中事情会更正常（高斯），然后应用链接函数的逆函数将置信区间从线性预测器尺度映射到响应尺度。

为此，您需要两件事；

1.  调用`predict()`,`type = "link"`和
2.  `predict()`用调用`se.fit = TRUE`。

第一个生成线性预测器规模的预测，第二个返回预测的标准误差。在伪代码中

```
## foo <- mtcars[,c("mpg","vs")]; names(foo) <- c("x","y") ## Working example data
mod <- glm(y ~ x, data = foo, family = binomial)
preddata <- with(foo, data.frame(x = seq(min(x), max(x), length = 100)))
preds <- predict(mod, newdata = preddata, type = "link", se.fit = TRUE) 
```

`preds`然后是一个包含组件`fit`和的列表`se.fit`。

线性预测器的置信区间为

```
critval <- 1.96 ## approx 95% CI
upr <- preds$fit + (critval * preds$se.fit)
lwr <- preds$fit - (critval * preds$se.fit)
fit <- preds$fit 
```

`critval`根据需要从*t*或*z*（正态）分布中选择（我现在完全忘记了使用哪种类型的 GLM 以及属性是什么）以及所需的覆盖率。是给出 95% 覆盖率的`1.96`高斯分布的值：

```
> qnorm(0.975) ## 0.975 as this is upper tail, 2.5% also in lower tail
[1] 1.959964 
```

现在对于`fit`，我们需要将链接函数的逆函数应用于它们`upr`。`lwr`

```
fit2 <- mod$family$linkinv(fit)
upr2 <- mod$family$linkinv(upr)
lwr2 <- mod$family$linkinv(lwr) 
```

现在您可以绘制所有三个和数据。

```
preddata$lwr <- lwr2 
preddata$upr <- upr2 
ggplot(data=foo, mapping=aes(x=x,y=y)) + geom_point() +         
   stat_smooth(method="glm", method.args=list(family=binomial)) + 
   geom_line(data=preddata, mapping=aes(x=x, y=upr), col="red") + 
   geom_line(data=preddata, mapping=aes(x=x, y=lwr), col="red") 
```

[![在此处输入图像描述](../Images/b59d75599e3c8b37c65834c01396431d.png)](https://i.stack.imgur.com/3qbIf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-19T16:19:09.667

我偶然发现了 Liu WenSui 的[方法](https://statcompute.wordpress.com/2015/12/20/prediction-intervals-for-poisson-regression/)，该方法使用引导或模拟方法来解决泊松估计的问题。

作者的例子

```
pkgs <- c('doParallel', 'foreach')
lapply(pkgs, require, character.only = T)
registerDoParallel(cores = 4)

data(AutoCollision, package = "insuranceData")
df <- rbind(AutoCollision, AutoCollision)
mdl <- glm(Claim_Count ~ Age + Vehicle_Use, data = df, family = poisson(link = "log"))
new_fake <- df[1:5, 1:2]

boot_pi <- function(model, pdata, n, p) {
  odata <- model$data
  lp <- (1 - p) / 2
  up <- 1 - lp
  set.seed(2016)
  seeds <- round(runif(n, 1, 1000), 0)
  boot_y <- foreach(i = 1:n, .combine = rbind) %dopar% {
    set.seed(seeds[i])
    bdata <- odata[sample(seq(nrow(odata)), size = nrow(odata), replace = TRUE), ]
    bpred <- predict(update(model, data = bdata), type = "response", newdata = pdata)
    rpois(length(bpred), lambda = bpred)
  }
  boot_ci <- t(apply(boot_y, 2, quantile, c(lp, up)))
  return(data.frame(pred = predict(model, newdata = pdata, type = "response"), lower = boot_ci[, 1], upper = boot_ci[, 2]))
}

boot_pi(mdl, new_fake, 1000, 0.95)

sim_pi <- function(model, pdata, n, p) {
  odata <- model$data
  yhat <- predict(model, type = "response")
  lp <- (1 - p) / 2
  up <- 1 - lp
  set.seed(2016)
  seeds <- round(runif(n, 1, 1000), 0)
  sim_y <- foreach(i = 1:n, .combine = rbind) %dopar% {
    set.seed(seeds[i])
    sim_y <- rpois(length(yhat), lambda = yhat)
    sdata <- data.frame(y = sim_y, odata[names(model$x)])
    refit <- glm(y ~ ., data = sdata, family = poisson)
    bpred <- predict(refit, type = "response", newdata = pdata)
    rpois(length(bpred),lambda = bpred)
  }
  sim_ci <- t(apply(sim_y, 2, quantile, c(lp, up)))
  return(data.frame(pred = predict(model, newdata = pdata, type = "response"), lower = sim_ci[, 1], upper = sim_ci[, 2]))
}

sim_pi(mdl, new_fake, 1000, 0.95) 
```

# javascript - Javascript 对象不是函数

> ID：14423328
> 
> 赞同：1
> 
> 时间：2013-01-20T09:47:19.277
> 
> 标签：javascript, html

我收到以下错误，但找不到原因：

> TypeError：对象不是函数

这是我的html：

```
<td><input type="text" value="" id="cash_retained" name="cash_retained" onkeyup="net_cash()" size="25"></td>
<td><input type="text" value="" id="cash_change" name="cash_change" onkeyup="net_cash()" size="25"></td>
<td><input type="text" value="0" id="net_cash" name="net_cash"></td> 
```

这是我的js函数：

```
function net_cash() {
    var cash = 0;
    var retained = document.getElementById("cash_retained");
    var change = document.getElementById("cash_change");

    cash += parseInt(retained.value);
    cash += parseInt(change.value);

    if (isNaN(cash)) {
        document.getElementById("net_cash").value = "0";
    } else {
        document.getElementById("net_cash").value = cash;
    }
} 
```

我一生都看不到为什么这不起作用。我有其他类似的 js 函数发现它很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T09:51:30.837

这里的问题似乎是您有一个与您的函数同名的表单元素：

```
<td><input type="text" value="0" id="net_cash" name="net_cash"></td> 
```

所以当你调用`net_cash()`你的`onkeyup`事件时，它认为你指的是这个`input`DOM 对象而不是同名的函数。我建议为这两件事分别命名。

内联事件处理程序将封闭`<form>`元素作为其执行范围。每个具有`name`属性的表单控件都被视为该范围内的变量，这就是冲突的来源。

[这也是使用不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)而不是内联事件处理程序的另一个重要原因。如果这样做，您不必担心函数名称与元素名称冲突。有关使用内联事件处理程序的陷阱的更多信息，请参阅[onclick=“” vs 事件处理程序。](https://stackoverflow.com/a/21975639/218196)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T09:55:21.500

您的代码对我来说工作正常。在此处查看[演示](http://jsfiddle.net/EYCYN/)

所以请确保以下几点

1.  确保在调用函数之前包含脚本。
2.  此外，保持 ids/names 和函数名相同也不是一个好主意

    ```
    <td><input type="text" value="0" id="net_cash" name="net_cash"></td> 
    ```

    // 在此处更改 idand 名称

# c - Linux 设备驱动程序中的静态函数

> ID：14423333
> 
> 赞同：17
> 
> 时间：2013-01-20T09:47:54.777
> 
> 标签：c, static, linux-kernel, linux-device-driver, static-functions

为什么大多数设备驱动程序中的每个函数都是静态的？因为静态函数在文件范围之外是不可见的。那么，这些驱动函数是如何被用户空间应用程序调用的呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-20T09:52:02.043

请记住，在 C 中，一切都是地址。这意味着如果你有地址，你可以调用一个函数。内核有一个名为的宏`EXPORT_SYMBOL`就是这样做的。它导出函数的地址，以便可以调用驱动程序函数而不必放置头声明，因为这些函数有时在编译时是不知道的。在这种情况下，静态限定符只是为了确保它们仅通过此方法调用，而不是从可能包含该驱动程序代码的其他文件中调用（在某些情况下，包含驱动程序代码头并直接调用它们不是一个好主意） .

编辑：因为有人指出我没有涵盖用户空间。

驱动程序函数通常不直接通过用户空间调用（除了 SYSCALL 指令的 x86 实现，它有时会做一些小技巧来保存上下文切换）。所以这里的 static 关键字没有区别。它只会在内核空间上有所不同。正如@Cong Wang 所指出的，函数通常被放入函数指针的结构中，以便可以通过简单地让结构指向该结构（例如file_ops、调度程序、文件系统、网络代码等）来调用它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T02:54:04.277

因为这些静态函数不应该**直接**在模块之外使用。它们由模块中的其他函数调用，其中可以是 ioctl 的接口或任何回调。这就是为什么它们可以从用户空间调用，它们只是在调用路径中。

看一下网络虚拟模块：

dummy_dev_init() 显然是静态的：

```
static int dummy_dev_init(struct net_device *dev)
{
        dev->dstats = alloc_percpu(struct pcpu_dstats);
        if (!dev->dstats)
                return -ENOMEM;

        return 0;
} 
```

但它是注册此网络设备时调用的 ->ndo_init() 的回调。

```
static const struct net_device_ops dummy_netdev_ops = {
        .ndo_init               = dummy_dev_init,
        .ndo_uninit             = dummy_dev_uninit,
        .ndo_start_xmit         = dummy_xmit,
        .ndo_validate_addr      = eth_validate_addr,
        .ndo_set_rx_mode        = set_multicast_list,
        .ndo_set_mac_address    = eth_mac_addr,
        .ndo_get_stats64        = dummy_get_stats64,
        .ndo_change_carrier     = dummy_change_carrier,
}; 
```

显然没有人应该直接调用 dummy_dev_init() 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T03:35:56.173

内核有数千个模块，它们是（或曾经是）所有目标文件，通过类似于链接的过程动态加载 - 或者实际上是链接 - 到可执行文件中。你能想象如果他们都导出所有函数名会有多少名称冲突，除非`static`指定，否则默认 C 行为是这样吗？

用户空间应用程序不能直接调用驱动程序函数，但还有[其他](http://people.ee.ethz.ch/~arkeller/linux/kernel_user_space_howto.html)交互方式。

# ruby-on-rails-3 - 设计的 current_user 的可用性

> ID：14423335
> 
> 赞同：1
> 
> 时间：2013-01-20T09:49:17.467
> 
> 标签：ruby-on-rails-3, devise

devise的`current_user`方法在哪里可用？楷模？控制器？意见？帮手？

我有一个`Question`属于`User`. 那么，在保存新`Question`的同时，最好的存储方式是`user_id`什么`Question`？

`QuestionsController`截至目前

```
def create
 @question = Question.create(params[:question])
 @question.save
 render text: "Question created!"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:11:09.907

从您的代码中，并假设您有`has_many`关系，我会说为用户创建问题的最佳方法是这样的：

```
@question = current_user.questions.create(params[:question]) 
```

另外，`create`已经在打电话了`save`。如果你想手动调用它，你应该使用`current_user.questions.build`.

# php - PHP date("I") 表示未来或过去的日期

> ID：14423348
> 
> 赞同：7
> 
> 时间：2013-01-20T09:50:59.930
> 
> 标签：php, date

PHP`date("I")`返回 0 或 1，具体取决于当前日期是否为夏令时。但是，我需要这个确切的函数来为将来或过去的指定日期和时间返回 0 或 1。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T09:58:05.690

只需像这样传递未来日期的时间戳：

```
is_daylight_saving = date("I", future_timestamp); 
```

请参阅 PHP[`date()`](http://php.net/manual/en/function.date.php)文档

****** 编辑：******

要正确获取夏令时信息，您需要确保将默认语言环境设置为使用夏令时的国家/地区。[可以在此处](http://en.wikipedia.org/wiki/Daylight_saving_time_by_country)找到使用夏令时的国家/地区列表。

要更改默认时区，请[`date_default_timezone()`](http://php.net/manual/en/function.date-default-timezone-set.php)按如下方式使用：

```
date_default_timezone_set('Europe/Rome'); // Italy uses daylight saving
echo date("I", 1366456706); // will return 1

date_default_timezone_set('America/Argentina/Buenos_Aires'); // Argentina doesn't use daylight saving
echo date("I", 1366456706);  // will return 0 
```

# asp.net - 如何将gridview中的零标签绑定到sql server中的空值

> ID：14423352
> 
> 赞同：3
> 
> 时间：2013-01-20T09:51:33.323
> 
> 标签：asp.net, gridview

大家好，我的表中有一个整数值`null`，我想将它绑定到 gridview 标签，当值`0`是`null``nullable`

`<asp:Label ID="lbl" runat="server" Text='<%#(String.IsNullOrEmpty(Eval("call").ToString()) ? "NULL" : Eval("call"))%>'></asp:Label>`

我写的整数相同如下

`<%# string.IsNullOrEmpty(Eval("send2").ToString()) ? "0" : Convert.ToInt16(Eval("send2")).ToString() %>`

这没有用，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:19:20.043

要检查您通常使用的空变量`System.DBNull`，因此您的代码可以是：

```
Eval("send2")==System.DBNull ?  "0" : Convert.ToInt16(Eval("send2")).ToString() 
```

或替代：

```
Convert.IsDBNull(Eval("send2")) ? "0" : Convert.ToInt16(Eval("send2")).ToString() 
```

# sql - 查找每个帖子的总用户发帖 SQL QUERY

> ID：14423354
> 
> 赞同：2
> 
> 时间：2013-01-20T09:51:55.817
> 
> 标签：sql

我有一个包含以下两个表的数据库，成员，帖子我正在寻找一种方法来计算用户拥有多少帖子。

![在此处输入图像描述](../Images/18e2b8ef2f694c62a1b4411dc2c812c7.png)
（*来源：http: [//i.stack.imgur.com/FDv31.png](https://i.stack.imgur.com/FDv31.png)*）

我尝试了以下 SQL 命令的许多变体，但均未成功。而不是显示单个用户的帖子数，而是显示单行，其中所有帖子作为计数。

最后我想要这样的东西

![在此处输入图像描述](../Images/7cfacd1454f94b76f09870dd922c469b.png)
（*来源：http: [//i.stack.imgur.com/EbaEj.png](https://i.stack.imgur.com/EbaEj.png)*）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:15:25.343

可能是我在这里遗漏了一些东西，但这个查询似乎会给你你想要的结果：

```
SELECT member.ID,
       member.Name,
       (SELECT COUNT(*) FROM Posts WHERE member.ID = Posts.user_id) AS total
FROM   member; 
```

我在查询中留下了*评论*，因为对于计算的评论组，您希望在该列中返回什么评论并不明显。

[在此处](http://sqlfiddle.com/#!3/f00a8/3)查看 SQL Fiddle 演示。

**编辑**
对不起，误解了您的问题:-) 此查询将正确返回*所有*评论，以及发布评论的人以及该人发表的评论总数：

```
SELECT Posts.ID,
       member.Name,
       (SELECT COUNT(*) FROM Posts WHERE member.ID = Posts.user_id) AS total,
       Posts.comment
FROM   Posts
INNER JOIN member ON Posts.user_id = member.ID
GROUP BY Posts.ID, member.Name, member.ID, Posts.comment; 
```

[在此处](http://sqlfiddle.com/#!3/f00a8/9)查看更新的 SQL Fiddle 演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:56:05.867

您可以使用子查询来计算每个成员的帖子总数：

```
select  m.ID
,       m.Name
,       coalesce(grp.total, 0)
,       p.comment
from    member m
left join
        posts p
on      p.user_id = m.id
left join
        (
        select  user_id
        ,       count(*) as total
        from    posts
        group by
                user_id
        ) grp
on      grp.user_id = m.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T10:50:38.067

```
select 
   a.id
   , a.name
   , count(1) over (partition by b.user_id) as TotalCountPerUser
   , b.comment
from member a join post b 
on a.id = b.user_id 
```

# apache - htaccess - 重写它的博客标题

> ID：14423355
> 
> 赞同：0
> 
> 时间：2013-01-20T09:52:00.337
> 
> 标签：apache, .htaccess

我的 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^-([0-9]+) /simpleblog/index.php?post_id=$1 
```

这就是格式化链接的方式。

```
<a href = "index.php?post_id=<?php echo $post['posts_id']; ?>-<?php echo $post['title']; ?>"><?php echo $post['title'];?></a> 
```

现在链接是这样的：

```
http://localhost/simpleblog/index.php?post_id=15-First%20Post 
```

我希望链接是这样的：

```
http://localhost/simpleblog/post/First-Post 
```

我是使用 .htaccess 的新手。我不知道如何正确使用它。那么如何按照我想要的方式制作链接呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:13:39.450

事情不会按照您尝试实施的方式进行：

您想在网络浏览器中看到的 url 没有说明数字 id。当然可以在语法级别上将该 url 重写为您想要的任何内容。但是重写模块无法猜测具有该标题的帖子的数字 id 为 15。这不能凭空挑选。

因此，要么您必须接受一些数字 id 作为您发布的 url 的一部分，要么您必须实现一个能够通过字母数字标题引用帖子的例程。但是，考虑到帖子标题可能在此类字母数字参考中包含各种特殊字符等，很容易出错。这就是为什么大多数网站使用两者的组合：数字 id 和字母数字标题。标题被重写模块静默删除，而数字 id 是内部用于引用帖子的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:36:16.093

根据您对`15`示例中关于参数的问题的评论，我的结论是`post/First-Post`URL 段确实包含 3 个不同的参数，`par1`在`par3`此答案中调用。

如果这是正确的，你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} .*/([^/]+)/([^-]+)-([^/]+)/?  [NC]
RewriteRule .*  simpleblog/index.php?post_id=%1-%2_%3   [L] 
```

静默地图

`http://localhost/simpleblog/par1/par2-par3`（这是在浏览器栏中输入的 URL）

至

`http://localhost/simpleblog/index.php?post_id=par1-par2_par3`

在您的问题中，par2 和 par3 之间有一个空格 (%20)，它在重定向查询中被替换为`_`以避免出现问题。

如果您确实需要空间，请`index.php`使用如下代码进行转换：

```
<?php  
if (isset ($_GET['post_id']) ) {
$PostId = $_GET['post_id'] ; 
$PostId = str_replace('_',' ',$PostId);
echo $PostId . "<br /><br />";  // Test
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T10:27:44.263

您正在尝试创建 SEF（搜索引擎友好）网址，我认为最好的方法是在您的数据库上创建一个表：

```
sef_urls(original_url,sef_url) 
```

您存储原始 url (index.php?post_id=15-First%20Post) 和您想要的 sef url (post/First-Post) 的位置，然后在 .htaccess 中：

```
RewriteRule ^(.*)$ index.php [F,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

在您的 index.php 中，您查询您的数据库表以了解原始 url 是什么。例如，我写：

```
localhost/simpleblog/post/First-Post 
```

index.php 会：

```
$requested_url="..";
$result=mysql_query("SELECT original_url FROM sef_urls WHERE sef_url=$requested_url");
if($row=mysql_fetch_array($result)){//is this SEF url a known url?
   include($row['original_url'];
}else{
   //404 not found
} 
```

# javascript - 大量 Jquery 和 check/radio/select 样式元素 — 无样式内容的 Flash

> ID：14423359
> 
> 赞同：1
> 
> 时间：2013-01-20T09:52:26.753
> 
> 标签：javascript, jquery

我有一个包含很多 jQuery 元素（大型 jquery 文件）的页面，问题在于替换标准 HTML 元素（复选框、单选按钮和选择框/下拉列表）的样式元素在页面加载时显示标准外观几毫秒。

有什么办法可以让这些元素的交换显示得更快吗？

元素脚本使用 ready() 并放置在 head 中。最佳解决方案是如果更改的元素直接加载而不是标准元素（但我想这不起作用）。

我用来设置元素样式的插件是：

[jqtransform](http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/)

[选择](https://github.com/alpixel/Selectyze)

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:04:20.530

您可以`display: none`在页面加载时将标准元素设置为样式，并且只有`show()`在设置样式后才使用 JQuery。

**旁注：**[不再支持](https://github.com/jcamenisch/jqTransform)jqTransform作为插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T10:05:58.750

> 在页面加载时显示几毫秒的标准外观

您可以通过隐藏整个页面（通过`display:none`）来防止这种情况发生，直到元素被插件设置样式：

```
<head>
    …
    <style …&gt;
    <script src="plugins…" …&gt;
    <script>
    (function() {
        var hide = $('<style type="text/css">body { display: none; }</style>');
        $("head").append(hide);

        $(document).ready(function(){
             …
             // apply your plugins
             …
             hide.remove();
        });
    })();
</head> 
```

# python - 在 python 列表中找到最小的数字并打印位置

> ID：14423363
> 
> 赞同：10
> 
> 时间：2013-01-20T09:52:46.047
> 
> 标签：python, list

我有一个通过文件导入的整数列表

```
xy = [50, 2, 34, 6, 4, 3, 1, 5, 2] 
```

我知道[Python：找到最低整数](https://stackoverflow.com/questions/2622994/python-finding-lowest-integer)

但是，我想知道如何打印它的位置而不仅仅是找到最小的数字？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-20T09:53:52.520

只需使用以下`list.index`方法：

```
print xy.index(min(xy))
# 6 
```

但是，如果重复最小值，您将只能获得第一次出现的索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T10:07:52.730

```
indices = [i for i, x in enumerate(xy) if x == min(xy)]    # Indices of all min occurrences 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T08:27:04.933

以防万一有人希望使用 for 循环：

```
xy = [50, 2, 34, 6, 4, 3, 1, 5, 2] 
t=0
for i in range(len(xy)):
    if xy[i]<xy[t]:
        t=i
print t 
```

# java - Struts2 从位于会话中的对象填充表单 bean 值

> ID：14423365
> 
> 赞同：1
> 
> 时间：2013-01-20T09:53:07.530
> 
> 标签：java, struts2, javabeans, model-driven

我想更新我的数据库中的一个表，但在此之前我会向用户显示他的当前信息。现在我有了这个表单bean。

我的动作类中有一个名为的表单bean。

```
public void setProfileBean(UserProfile profileBean) {
    this.profileBean = profileBean;
}

public UserProfile getProfile() {
    return profileBean;
} 
```

我希望首先从会话范围内的另一个 bean 填充它的值。我将如何使用模型驱动的界面来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:44:31.707

正如@roman 所建议的那样，Struts2 ModelDriven 接口可以很好地解决这种情况，以获取有关如何使用它的一些代码帮助，您可以参考[此](https://stackoverflow.com/questions/14846185/nullpointerexception-error-when-using-modeldriven/14847897#14847897)链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T05:44:36.300

首先，为什么你需要使用模型驱动的接口，在你的情况下，你可以简单地使用动作支持在你的视图上渲染 bean。你必须这样：

1：首先，您应该在要更新之前填充视图，我的意思是，当您被重定向到要更新数据库的页面时，您应该在视图中填充数据。

2：您可以通过对操作进行一些更改来实现此目的：

**在你的行动中**

```
public void setProfileBean(UserProfile profileBean) {
    this.profileBean = profileBean;
}

public UserProfile getProfile() {
    return profileBean;
}

**i assume this is your target method**

public string execute()
{
UserProfile user=new UserProfile();

user.setProfileBean("whatever you want to set");
......
......

return SUCCESS;

} 
```

就是这样，这样做 struts2 将自动填充视图上的数据，确保您已定义如下属性：

```
<s:property value="UserProfile .xyz"> 
```

# qt - 除了使用项目角色之外，如何访问存储在 QML 中的 QAbstractListmodel 中的项目（通过委托）？

> ID：14423372
> 
> 赞同：5
> 
> 时间：2013-01-20T09:55:10.427
> 
> 标签：qt, qml

我只想使用 QML 显示列表中的元素，而不是使用项目角色。例如。我想调用一个方法 getName() 来返回要显示的项目的名称。

可能吗？我没有找到任何明确的参考。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T12:27:06.357

您可以使用一个特殊角色来返回整个项目，如下所示：

```
template<typename T>
class List : public QAbstractListModel
{
public:
  explicit List(const QString &itemRoleName, QObject *parent = 0)
    : QAbstractListModel(parent)
  {
    QHash<int, QByteArray> roles;
    roles[Qt::UserRole] = QByteArray(itemRoleName.toAscii());
    setRoleNames(roles);
  }

  void insert(int where, T *item) {
    Q_ASSERT(item);
    if (!item) return;
    // This is very important to prevent items to be garbage collected in JS!!!
    QDeclarativeEngine::setObjectOwnership(item, QDeclarativeEngine::CppOwnership);
    item->setParent(this);
    beginInsertRows(QModelIndex(), where, where);
    items_.insert(where, item);
    endInsertRows();
  }

public: // QAbstractItemModel
  int rowCount(const QModelIndex &parent = QModelIndex()) const {
    Q_UNUSED(parent);
    return items_.count();
  }

  QVariant data(const QModelIndex &index, int role = Qt::DisplayRole) const {
    if (index.row() < 0 || index.row() >= items_.count()) {
      return QVariant();
    }
    if (Qt::UserRole == role) {
      QObject *item = items_[index.row()];
      return QVariant::fromValue(item);
    }
    return QVariant();
  }

protected:
  QList<T*> items_;
}; 
```

不要忘记在所有插入方法中使用[QDeclarativeEngine::setObjectOwnership 。](http://qt-project.org/doc/qt-4.8/qdeclarativeengine.html#setObjectOwnership)否则，从 data 方法返回的所有对象都将在 QML 端被垃圾收集。

# openerp - 将 POS 订单导入 OpenERP 6.1 pos 后端

> ID：14423383
> 
> 赞同：0
> 
> 时间：2013-01-20T09:56:44.030
> 
> 标签：openerp

我正在尝试使用 OpenErp 的导入导出工具将订单从外部 Pos 系统导入 OpenErp 6.1 中的 Pos 后端。我使用导入兼容模型，所有订单都可以毫无问题地导入（订单、付款、日记帐、帐户，即已完成的订单。）

在 POS ORDERS 列表中，导入的订单状态为 NEW。对于导入的订单需要系统处理，并将订单状态更改为PAID，您可以手动删除订单付款，并为每个订单做MAke Payment。导入工具不会自动处理导入的订单。有没有办法批量处理进口的pos订单？这种情况有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:07:20.110

您可以创建一个脚本来将数据从一个数据库导入到另一个数据库。

```
import xmlrpclib
from osv import osv, fields

#To create connection to the database from where you want to import data
def connect_server(self, cr, uid, ids, context=None):
    sock_common = xmlrpclib.ServerProxy ('http://localhost:8070/xmlrpc/common', encoding="UTF-8")
    remote_uid = sock_common.login(database_name, user_name, password)
    sock = xmlrpclib.ServerProxy('http://localhost:8070/xmlrpc/object', encoding="UTF-8")
return (sock, remote_uid)

#Fetch data from another database
def get_data(cr, uid, ids, context=None):
    sock, remote_uid = self.connect_server(cr, uid, ids, context=context)
    pos_order_obj = self.pool.get('pos.order')
    pos_order_ids = sock.execute(db_name, remote_uid, password, pos_order_obj._name, 'search', [])
    for pos in in sock.execute(db_name, remote_uid, password, pos_order_obj._name, 'read', pos_order_ids, []):
        #fetch the data and create record in your current database.
        new_pos_val = {'name': pos['name'],}
        pos_order_obj.create(cr, uid, new_pos_val, context=context)
     return True 
```

希望它能解决你的问题。

# vbscript - VBScript SQL 选择查询说明和变量替换

> ID：14423385
> 
> 赞同：1
> 
> 时间：2013-01-20T09:56:51.403
> 
> 标签：vbscript, ado

我已多次阅读此条目（http://stackoverflow.com/questions/8513185/vbscript-to-correctly-re-format-a-delimited-text-file），但仍然不理解 .Execute 部分。

```
WScript.Echo oTDb.Execute(Replace("SELECT * FROM [@T]", "@T", sTbl1)) _
.GetString( adClipString, , "|", vbCrLf, "" ) 
```

我遇到问题的部分是 [@T] 和“@T”。

我知道是“@T”正在读取架构文件中的文件名，并且 [@T] 必须使用“@T”作为替代。我找不到的是在哪里提到/谈到了这一点。

我还有一些额外的问题： 1\. 如果文件名可以用变量替换，那么还有什么可以替代的？2\. 变量的维护规则是什么 是否必须以@符号开头 是否有保留字 如果必须以@符号开头 下一个字符是否必须是字母

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:37:54.637

因为我负责@Milton 的担忧/困惑：

VBScript 中没有变量插值/替换。当您用特殊符号标记替换时，其他语言（例如 Perl）会将变量甚至表达式结果拼接成字符串文字。VBScript 中没有这么有趣的字母。

SQL 方言允许参数化命令，其中要替换的部分用 ? 标记。和/或以 @ 等符号为前缀的名称。但是这里 ADO 从来没有看到 @T - VBScript 的 Replace() 函数在将结果字符串发送到 .Execute()**之前插入了表名。**

通过连接从部分（SQL 语句、.Run 或 .Exec 的命令行...）构建复杂的字符串很麻烦。最重要的缺点是您无法（证明）为所有那些“和&”读取字符串。

一个简单的解决方法是使用 Replace()，如

```
[sResult = ] Replace("SELECT * FROM [@T]", "@T", sTbl1) 
```

我使用 @ 只是为了让占位符脱颖而出。当您需要在模板上进行更多替换时，您必须堆叠/嵌套 Replace() 调用，因此值得考虑其他策略：

1.  编写一个函数，该函数采用模板字符串和替换字典将 Regexp.Replace() 应用于字符串
2.  使用 .NET 的 System.Text.StringBuilder 及其 .AppendFormat 以类似 sprintf 的样式进行切片

# emacs - 在哪里/如何存储文本，如果不是在 kill-ring/registers [elisp，emacs]

> ID：14423386
> 
> 赞同：1
> 
> 时间：2013-01-20T09:57:06.620
> 
> 标签：emacs, elisp

我希望能够在 2 个位置（中间的字符串）之间存储文本，但我不知道在哪里方便地存储它，可能只是在本地，甚至是全局（`let`或`setq`）。答案可能就在那里，但我找不到。

例子：

我想将文本存储在符号中以便向后搜索。假设从（点）到第一个空白字符的区域。

我以前这样做的方法是使用 (kill-ring-save)，但我知道这是一种不好的做法。

从（这里）`(message "hello")`（点）

我会对执行此操作的更好技术以及存储某个字符串的最佳方法感兴趣`(point)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:30:21.287

常规简洁的答案是只使用`let`. 与您似乎相信的相反，它不分配全局存储。事实上，它的作用恰恰相反。

```
(let ((myvalue "temporary string"))
  (message myvalue) )
=> "temporary string"

myvalue
=> Lisp error: (void-variable myvalue) 
```

您可以轻松地编写一个带有变量的函数，该变量的值仅在函数执行期间设置。`interactive`表格可以让您轻松获取点和标记的值。

```
(defun mysearch (point mark)
  (interactive "r")
  (let ((str (buffer-substring-no-properties point mark))
    (message "your search for %s can commence ..." str) ) ) 
```

一个常见的习惯用法是`save-excursion`将点移动到另一个地方，然后抓住原始位置和最终位置之间的区域，然后用它做一些事情。当您退出 时`save-excursion`，光标的位置（以及其他一些东西）将恢复到之前的位置。

```
(defun mysearch ()
  (interactive)
  (save-excursion
    (let ((here (point)) str)
      (forward-word -1)
      (setq str (buffer-substring-no-properties (point) here))
      (message "your search for %s can commence ..." str) ) ) ) 
```

也许您还想查看[http://ergoemacs.org/emacs/elisp_idioms.html](http://ergoemacs.org/emacs/elisp_idioms.html)

如果您需要在函数调用之间保留值，那么常见的做法是`defvar`使用@phils 建议的变量。几个具有共同前缀的变量听起来像是您应该为自己创建一个单独的模块。对于具有低命名空间占用的灵活解决方案，请创建您自己的解决方案`obarray`（并获得某种大师地位）。另请参阅[http://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Symbols.html#Definition%20of%20mapatoms](http://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Symbols.html#Definition%20of%20mapatoms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:03:26.510

如果您只需要一个临时本地范围，那么您肯定要使用`let`.

否则，您通常会定义一个变量（在命名它时请记住，elisp 没有名称空间，因此最佳实践是在给定库中为所有符号名称使用可靠唯一的前缀作为实际可行）。

```
(defvar SYMBOL &optional INITVALUE DOCSTRING) 
```

如果省略 INITVALUE 参数，则变量最初不会被绑定，但会确保您的变量在使用后将使用动态绑定。

然后你只是`setq`需要的变量。

**编辑：**
要获得两点之间的缓冲区内容，请使用

*   `(buffer-substring START END)`
*   `(buffer-substring-no-properties START END)`

取决于您是否希望保留文本属性。

# c# - 如何在我的列表框中获取接下来的 7 天并删除其他天？

> ID：14423400
> 
> 赞同：-1
> 
> 时间：2013-01-20T09:58:46.523
> 
> 标签：c#

到目前为止，我做到了，但它不起作用，而不是让我知道它删除所有列表项的具体日期，请帮忙

```
private void button1_Click_1(object sender, EventArgs e)
{
    List<RentalCar> listBox1snew = new List<RentalCar>();
    for (int i = 0; i < listBox1s.Count; i++)
    {
        if ((DateTime.Now.Day - listBox1s[i].WOF.Day) <= 7)
        {
            listBox1.Items.Insert(0, listBox1snew[i]);

        }
    }
    listBox1.DataSource = listBox1snew;//add car to listbox
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:05:46.843

```
listBox1.Items.Insert(0, listBox1snew[i]); 
```

这是没有意义的。`listBox1snew`是*空*的。我相信你的意思`listBox1s[i]`。

```
listBox1.DataSource = listBox1snew; 
```

这更没有意义。首先，您在其中插入项目，`listBox1.Items`然后覆盖`DataSource`，实际上忽略了`Items`. 另外，您没有`listBox1snew`以任何方式修改，所以它*仍然是空*的！

我*认为*你追求的是：

*   将元素从 复制`listBox1s`到`listBox1snew`。
*   设置`DataSource`为`listBox1snew`。

那看起来像：

```
private void button1_Click_1(object sender, EventArgs e)
{
    List<RentalCar> listBox1snew = new List<RentalCar>();
    for (int i = 0; i < listBox1s.Count; i++)
    {
        if (DateTime.Now.Subtract(listBox1s[i].WOF).Days <= 7)
        {
            // Copy from listBox1s to listBox1snew
            listBox1new.Add(listBox1s[i]);
        }
    }
    // Use listBox1new as new data source
    listBox1.DataSource = listBox1new;
} 
```

此外，您可以使用 LINQ 轻松表达此过滤器：

```
private void button1_Click_1(object sender, EventArgs e)
{
    listBox1.DataSource = listBox1s.Where(x => DateTime.Now.Subtract(x.WOF).Days <= 7).ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:02:49.880

首先，您检查日期的逻辑应该是：

```
DateTime.Now.Subtract(listBox1s[i].WOF).Days <= 7 
```

您将 ListBox 数据源设置为 listBox1snew，但您从未向 listBox1snew**添加**任何内容！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T10:04:50.707

您应该先减去两天，然后找到天差。

```
private void button1_Click_1(object sender, EventArgs e)
    {
        List<RentalCar> listBox1snew = new List<RentalCar>();
        for (int i = 0; i < listBox1s.Count; i++)
        {
            if ((DateTime.Now - listBox1s[i].WOF).Days <= 7)
            {
                listBox1snew .Items.Insert(0, listBox1s[i]);

            }
        }
        listBox1.DataSource = listBox1snew;//add car to listbox
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T10:04:13.183

```
DateTime.Now.AddDays(-7) <= listBox1s[i].WOF 
```

# ios - 如何在 Core Data 应用程序中拥有多个数据存储？

> ID：14423410
> 
> 赞同：0
> 
> 时间：2013-01-20T10:00:36.593
> 
> 标签：ios, core-data, stackmob

我的 iOS 应用程序使用 StackMob 作为后端，并且还在用户设备上的 Core Data 存储中维护数据。我想迁移到 StackMob 的较新的 iOS SDK，它使用内存中的核心数据存储。在这之间以及由于考虑的原因，我的设备模型与我在 StackMob 上的模型不同的事实之间，我得出的结论是我需要维护 2 个核心数据模型。

任何人都可以提供有关如何完成此操作的线索或将我引向明确的来源吗？我在 Apple 的文档中看到的内容让我相信这是可能的，但也让我对实际实施它感到困惑。

干杯和 TIA，佩德罗 :)

# android - how to get "Done" button in android keyboard?

> ID：14423411
> 
> 赞同：6
> 
> 时间：2013-01-20T10:00:49.223
> 
> 标签：android

I created many emulators but i did not get 'Done' button on emulator.any ideas to solve this problem? I have attached the screenshot [Emulator' Screenshot](http://thumbnails101.imagebam.com/23307/4eccae233062830.jpg)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T11:31:04.707

Just **add two lines** in **xml**:

```
android:imeOptions="actionDone"
android:singleLine="true" 
```

**Done**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T10:01:51.337

Try adding `android:imeOptions="actionDone"` to your EditText.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-13T09:23:16.650

android:singleLine="true" has been deprecated. Alternatively you could use this:

```
android:inputType="text"
android:maxLines="1" 
```

# ios - ARC , stringWithUTF8String 内存稳步增加 “Live Bytes”

> ID：14423414
> 
> 赞同：1
> 
> 时间：2013-01-20T10:01:01.800
> 
> 标签：ios, memory, automatic-ref-counting, memory-leaks

我使用**ARC**，每次我 **调用**下面的代码。我发现“Live Bytes”每次都会增加一点。这里肯定有内存泄漏。

```
char* example = (char *)sqlite3_column_text(compiledStatement, 1);                                

label.text = [NSString stringWithUTF8String:example]; 
```

但是如果我按照下面的方式进行操作，内存将永远保持在一个字节数上。但 label.text 内容不是我想要的确切单词，它像“ *&#(* &(*@#)#@$”一样损坏。

```
char* example = (char *)sqlite3_column_text(compiledStatement, 1);                                

label.text = [NSString stringWithFormat:@"%s",example]; 
```

![在此处输入图像描述](../Images/f10c7d6d7678f4448297da8b7afd90ea.png)

![在此处输入图像描述](../Images/5e32a850487f7a120c5e3c4dd08670b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T07:57:59.613

老问题，但仍然是实际的：

正如@jlegakis 已经指出的那样，这可能是一个“自动释放问题”。

我只是想提出一种不同的方法来摆脱自动释放的返回对象*类工厂方法*中自动释放的返回对象，例如`[NSFoo fooWith...]`：

相反，如果您使用该模式

```
NSFoo* foo = [[NSFoo alloc] initWith...] 
```

创建的对象不会自动释放。所以，如果你写：

```
char* example = (char *)sqlite3_column_text(compiledStatement, 1);
label.text = [[NSString alloc] initWithUTF8String:example]; 
```

“自动释放问题”应该消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T07:06:08.597

我遇到了完全相同的问题。原来是因为 stringWithUTF8String 在内部使用了自动释放，所以直到封闭的自动释放池块（在我的例子中是整个应用程序）结束时才释放内存。

作为一个实验，试试这个：

```
@autoreleasepool {
  char* example = (char *)sqlite3_column_text(compiledStatement, 1);                                
  label.text = [NSString stringWithUTF8String:example];
} 
```

你应该会看到活动字节停止增长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T14:49:23.397

尝试以这种方式读取字符串，看看是否发生任何变化。

```
char* example = (char *)sqlite3_column_text(compiledStatement, 1);                                

label.text = [NSString stringWithFormat:@"%@",example]; 
```

# python - Django Model CharField 空字符串开始保存为（''，）？

> ID：14423415
> 
> 赞同：1
> 
> 时间：2013-01-20T10:01:17.413
> 
> 标签：python, django, django-models

我正在尝试从 facebook 图形查询中保存数据，该查询以以下格式返回位置信息：

```
friend: {
    location: {
        id: "106078429431815",
        name: "London, United Kingdom"
    },
} 
```

或者如果用户没有设置该变量，或者它被设置为'null'，则位置键完全丢失。

模型中的位置字段定义为：

```
location = models.CharField(max_length=255, blank=True, null=True) 
```

我使用以下代码将数据存储在模型中，该代码既适用于创建记录的初始查询，也适用于更新，以防将来值发生变化：

```
friend = get_facebook_friend(friend_id=friend_id)
try:
    location_name = data['location'].get('name', '')
except:
    location_name = ''
if friend:
    friend.name = data['name']
    friend.location = location_name,
    friend.full_clean()
    friend.save()
else:
    friend = Friend(
        name=data['name'],
        location=location_name)
    friend.full_clean()
    friend.save() 
```

这对于第一个插入似乎工作得很好，它将数据库中 Location 列的值存储为：

```
- 'London, United Kingdom'
- ''
- NULL 
```

然而，在随后的更新中，这会将奇怪的结果存储在数据库表中，例如：

```
(u'London, United Kingdom',)
('',)
(None,) 
```

在存储来自 Facebook 查询的字符串的其他 CharFields 中未观察到相同的行为

我很困惑 D:，救命！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T10:08:00.500

由于尾随逗号：

```
friend.location = location_name, 
```

将**元组** `(location_name, )`（括号是可选的）分配给 `friend.location`

# c - 死锁 - 转移程序

> ID：14423418
> 
> 赞同：0
> 
> 时间：2013-01-20T10:02:14.263
> 
> 标签：c, concurrency

我想知道为什么这个程序会死锁

```
void transfer(int from, into to, double amount) {
     sem_t *sem_from, *sem_to;
     sem_from=get_sem(from); //function that obtains the semaphore from bank account argument
     sem_to=get_sem(to);
     sem_wait(sem_from);
     sem_wait(sem_to);
     withdraw(from, amount); 
     deposit(to, amount); 
     sem_post(sem_to);
     sem_post(sem_from);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:09:39.663

假设有两个函数实例同时运行。第一个是从账户 A 向账户 B 转移一些金额，而第二个是从账户 B 向账户 A 转移一些其他金额。如果第一个实例获得 A 的锁，同时第二个实例获得B的锁，发生死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:15:51.667

据我了解，如果一个函数的多个实例正在运行，那么如果任何函数（提款，存款）未能重置信号量，那么其他函数将停止工作，因为它们无法获取信号量。

如果功能保证完成，则可以避免死锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T10:27:21.100

我最初没有注意到每个帐户有一个 sem - AraK 值得接受的答案。

只是一个建议：如果*提款*和*存款*功能不昂贵，只需使用定义关键部分的唯一信号量来执行任何传输。在给定的时间只会发生一次转移。

```
sem_t *sem_tranfer; // to be created and initialized somewhere

void transfer(int from, into to, double amount) {
     sem_wait(sem_transfer);
     withdraw(from, amount); 
     deposit(to, amount); 
     sem_post(sem_transfer);
} 
```

# vb.net - VB.NET 插件架构

> ID：14423419
> 
> 赞同：0
> 
> 时间：2013-01-20T10:02:17.027
> 
> 标签：vb.net

您好，我正在使用 vb.net 中的接口类来制作插件架构。到目前为止，我还没有找到适合初学者的分步教程。但我已经做到了这一点：

**主应用**

```
Public Class PluginHandler

Interface IApplications
    Sub ChangeForms()
End Interface

Public Shared Sub GetDLLFromDir(ByVal TheDir)
    For Each dll As String In System.IO.Directory.GetFiles(TheDir, "*.dll")
        LoadPlugin(dll)
    Next
End Sub

Public Shared Sub LoadPlugin(ByVal ThePlugin)
    Dim Asm = Assembly.LoadFile(ThePlugin)
    Dim type As Type = Asm.GetType("TestPlugin.Class_TestPlugin")
    Dim method As MethodInfo = type.GetMethod("ChangeForms")
    method.Invoke(Nothing, Nothing)
End Sub

End Class 
```

**测试插件.vb**

```
Public Class Class_TestPlugin
Implements Plugin_Application.PluginHandler.IApplications

Sub ChangeForms() Implements Plugin_Application. _
PluginHandler.IApplications.ChangeForms

    Dim NewForm As New Form_Test
    NewForm.Show()

End Sub
End Class 
```

我的问题是它说要调用的方法-> 非静态方法需要一个目标。我在另一个论坛上看到可能找不到该方法。我发现它说方法名称和无效。但我不确定该怎么做。如果有人可以修改我的代码以使其工作或给我一些想法以使我的代码工作。谢谢 ：）

这是我的测试项目文件夹的链接：[链接](http://dl.dropbox.com/u/26523776/Projects.7z)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:05:59.223

您必须创建一个应该调用该方法的对象：

```
Dim ctor = type.GetConstructor({}) 'no parameters for constructor
Dim obj = ctor.Invoke({})
method.Invoke(obj, {}) 
```

# database - 应该从数据库中删除旧记录吗？

> ID：14423426
> 
> 赞同：0
> 
> 时间：2013-01-20T10:03:43.310
> 
> 标签：database, user-interface

每次加载站点仪表板中的某个表单时，我都会生成一个唯一 ID 并将其存储到数据库中，当提交表单时，我会将 ID 标记为“已使用”并且不允许提交已使用的表单。

问题：存储表单加载的日期/时间并删除两周前的唯一 ID 是否值得？

还是将这些数据永久保存在 MySQL 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:13:02.883

是否值得将表格的日期时间存储在数据库中取决于您的决定和您的业务需求，但是，您不应将任何数据存储在不再需要的在线数据库中。

如果您需要为历史报告目的保留此类数据，则创建一个离线/报告数据库并定期将数据从在线传输到“报告”数据库。

数据库中的数据量越少，RDBMS 检索/操作它的速度就越快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:16:49.963

我认为保存时间戳并清除旧的 dara 是一个好主意。

没有它，您的网站将无法扩展。事实上，它可以通过重复加载页面和将数据库磁盘填满来攻击，从而有效地杀死您的站点。

# python - 如何使用 django 编写 JSON 请求

> ID：14423427
> 
> 赞同：-3
> 
> 时间：2013-01-20T10:03:45.370
> 
> 标签：python, django

我想编写 google places api 之类的 web 服务来学习。我从 django python 开始，并搜索了如何编写 api 样式响应。我找到了 django-tastypie，但是这个框架寻找不同的东西，大多数例子都是为数据库交互提供的。我需要的是' xxx.yy/api/places?lat=A&lng=B ' URL，使用 json 格式响应 100m 中的位置。我是这个世界的新手，请提供示例和链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:29:04.367

我认为你应该学习 URL 和 Django python 脚本之间的联系访问[https://docs.djangoproject.com/en/1.4/intro/tutorial03/](https://docs.djangoproject.com/en/1.4/intro/tutorial03/)
关于你可以使用的 JSON 格式

```
return HttpResponse(json.dumps(response_data), mimetype="application/json") 
```

# jquery - jquery框动画变化

> ID：14423428
> 
> 赞同：0
> 
> 时间：2013-01-20T10:03:56.570
> 
> 标签：jquery, html, css, animation

我正在尝试制作一个盒子动画。它工作正常，但我想将绿框动画移到左边。对不起我的英语不好。

**代码**

```
 jQuery(document).ready(function() {

```
$(".iphone").mouseover(function(){  
     $('#appstore').stop().animate({width:'276px'},{queue:false, duration:600,})  
          });  

            $(".iphone").mouseout(function(){  
         $('#appstore').stop().animate({width:'128px'},{queue:false, duration:600,})  

          });  
              }); 

                $(".android").mouseover(function(){  
           $('#play').stop().animate({width:'276px'},{queue:false, duration:600,})  

              });  

            $(".android").mouseout(function(){  
       $('#play').stop().animate({width:'128px'},{queue:false, duration:600,})  
   }); 
```

[演示](http://jsfiddle.net/ggKrF/) 

谢谢 ;）

            回答 #1

赞同：1

时间：2013-01-20T10:16:45.147

您的 jQuery 是正确的，但是`issue is in the css`您有绝对定位的元素，并且您使用`margin-left`它，我只是将其更改`right:0;`为，宽度的动画来自`right to left.`

检查这个：http: [//jsfiddle.net/ggKrF/2/](http://jsfiddle.net/ggKrF/2/)

检查这个新小提琴：http: [//jsfiddle.net/ggKrF/5/](http://jsfiddle.net/ggKrF/5/)

```
#play {
background:#97C024 url(../images/android.png) center left no-repeat;
position:absolute;
height:128px;
z-index:10;
width:128px;
right:0; // <----margin-left replced with right:0;
} 
```

笔记：

我只是做了这个`right`职位`0`。您必须根据您的要求定位它。

            回答 #2

赞同：0

时间：2013-01-20T10:16:36.263

只需添加 margin left 属性：

像这儿：

```
$(".android #play").hover(function () {
     $(this).stop().css({
         'z-index': 10000
     }).animate({
         width: 276,
             'margin-left': -276 + 128,
     }, {
         queue: false,
         duration: 600,
     })
 },

 function () {
     $(this).stop().animate({
         width: 128,
             'margin-left': '0',
             'z-index': 0
     }, {
         queue: false,
         duration: 600,
     })
 }); 
```

另请注意，我将`mouseover`/替换`mouseout`为 one `hover`，并用于`$(this)`选择正确的元素...

[演示](http://jsfiddle.net/oceog/ggKrF/9/)

```

# android - ANDROID：在 HTTP 请求后启动活动时应用程序崩溃

> ID：14423433
> 
> 赞同：1
> 
> 时间：2013-01-20T10:04:31.267
> 
> 标签：android, android-activity, crash, httprequest

我有一个问题要快速解决:) 我有这段代码：

loginBtn.setOnClickListener(new View.OnClickListener() {

```
 @Override
        public void onClick(View v) {
            HttpRequest hr = new HttpRequest();
            String response = hr.LoginRequest(emailText.getText().toString(), pwdText.getText().toString());
            res.setText(response);
            res.setVisibility(0);

            if(response.equals("pr_code_0101")) {
                Login.this.startActivity(bcard_intent);
            }
        }
    }); 
```

startActivity 失败，我的应用程序崩溃，我遇到了问题：它是带有 LoginRequest 的 HttpRequest，它是我创建的自定义类，如果我删除这 2 行代码，活动就会开始......

Http的代码

```
public String LoginRequest(String email, String password)
{
    List<NameValuePair> nvp = new ArrayList<NameValuePair>(3);
    nvp.add(new BasicNameValuePair("email", email));
    nvp.add(new BasicNameValuePair("password", password));
    nvp.add(new BasicNameValuePair("hash_app", hash_code));

    return Set("******/loginrequest.php", nvp);
}

public String Set(String url,List<NameValuePair> list)
{
     StringBuilder builder = new StringBuilder();
     HttpClient client = new DefaultHttpClient();
     HttpPost httpPost = new HttpPost(url);

     try {
        httpPost.setEntity(new UrlEncodedFormEntity(list));
        HttpResponse response = client.execute(httpPost);

        HttpEntity entity = response.getEntity();
        InputStream content = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(content));
        String line;
        while ((line = reader.readLine()) != null)
        {
           builder.append(line);
        } 

        reader.close();
        content.close();

     }
     catch (ClientProtocolException e) {
         return e.toString();
     }
     catch (IOException e) {
         return e.toString();
    }

     return builder.toString();
} 
```

我该如何解决我的问题？？

这里是logcat：

```
 01-20 11:25:42.824: E/AndroidRuntime(274): java.lang.RuntimeException: Unable to start activity ComponentInfo{name.printernet.app/name.printernet.app.BCard}: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:18:58.547

在将您的 HTTP 请求放在首位之前，您需要使用连接管理器检查您是否与其中任何一个连接

无线上网

或者

移动数据检查这个第一次在清单文件中添加以下权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

然后在你的课堂上检查可用性

```
 ConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

//mobile
State mobile = conMan.getNetworkInfo(0).getState();

//wifi
State wifi = conMan.getNetworkInfo(1).getState(); 
```

然后像这样使用它：

```
if (mobile == NetworkInfo.State.CONNECTED || mobile == NetworkInfo.State.CONNECTING) {
    //mobile
} else if (wifi == NetworkInfo.State.CONNECTED || wifi == NetworkInfo.State.CONNECTING) {
    //wifi
} 
```

之后发送发送 HTTP 请求，因为 HTTP 请求有一个标准，它应该有一个像 wifi 或移动网络这样的驱动程序，用你的信息把他带到外面的世界希望这会对你有所帮助

# c# - C# Initializer list - 何时在类名后使用 () 运算符？

> ID：14423437
> 
> 赞同：5
> 
> 时间：2013-01-20T10:05:03.883
> 
> 标签：c#, initializer-list

有时在类名之后指定初始化列表而不使用 () 运算符：

```
Cat cat = new Cat { Age = 10, Name = "Fluffy" } 
```

其他时候在 () 运算符之后指定：

```
List<Cat> cats = new List<Cat>
    {
        new Cat(){ Name = "Sylvester", Age=8 }
    } 
```

我假设不同之处是因为这里 new Cat() 在列表中。但我仍然不明白为什么它应该不同。那么为什么会有差异，以及何时使用哪种语法呢？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T10:09:36.717

当您使用初始化列表时，您可以省略 ()，当使用无参数构造函数时。new Cat() 是否在列表中都没有关系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T10:09:44.920

您必须指定`()`当没有默认（无参数）构造函数时 - 当您必须提供参数时。

当类具有默认构造函数（或无参数构造函数）时，您始终可以`()`在使用初始值设定项时省略 。编译器为你做了魔法，你可以把事情想象成 - 编译器为你插入它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T10:24:05.220

您决定使用两者中的哪一个没有真正的区别。比较这两个`Cat`实例：

```
var catA = new Cat();   // traditional constructor
catA.Name = "Mittens";  // set property

var catB = new Cat { Name = "Not Mittens" }; // all in one initializer 
```

它们在功能上是相同的，只是一个快捷符号。第一种方式是传统方式，大多数*面向对象*(OO) 语言使用*构造函数*创建对象。C# 最近添加了这种创建对象和设置属性的新方法，以使代码更简洁。

即使您的类没有无参数构造函数 ( `new()`)，您仍然可以使用`{...}`初始化。

考虑一下：

```
var dogA = new Dog("Fido");
var dogA.Age = 12;

var dogB = new Dog("Not Fido") { Age = 7 }; 
```

即使在*构造*函数中需要参数，只要您提供它们，您仍然可以使用这种初始化方式。

# html - html ondragout 事件？

> ID：14423439
> 
> 赞同：16
> 
> 时间：2013-01-20T10:05:40.190
> 
> 标签：html, events

我有一个表格，其中包含用户拖入每个单元格的元素。

```
<td ondrop="dropIt(event);" ondragover="dragOver(event)" onMouseOver="this.bgColor='grey';" onMouseOut="this.bgColor='white';"></td> 
```

当用户将鼠标悬停在单元格上时，我希望它变为灰色。当鼠标退出单元格时，我希望它再次变白。

同样，当用户将元素拖到单元格上时，我希望它变成灰色。我遇到的问题是在用户移动到另一个单元格后再次将其变为白色。html中是否有某种`ondragout`事件？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-20T10:12:16.270

对不起这个愚蠢的问题！我刚刚找到了这个`ondragleave`活动。

谢谢

# bash - 为什么我的字母表有 40 个字母？或者为什么放弃 STDERR 并不总是一个好主意

> ID：14423442
> 
> 赞同：1
> 
> 时间：2013-01-20T10:05:53.787
> 
> 标签：bash

## `for ((i=000;i<040;i++));do ...`

从 0 到 39，有 40 个值！？... 打印从 `A`到`Z`???

```
for ((i=000;i<040;i++));do
    echo -e $(eval "printf "\\\\%04o" $((65+0$i)) ");
  done 2>/dev/null |
  xargs

A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
```

奇怪的！？

有**85 个**值，从 70 到 154：

```
for ((i=0070;i<0155;i++));do
    echo -e $(eval "printf "\\\\%04o" $((19+0$i)) ");
  done 2>/dev/null |
    xargs
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
```

想要完整的答案，解释缺失值。

:-p

# 我的完整答案

由于此问题已关闭，因此无法添加任何答案，因此**我的**解释是：

误解是由（ab）使用**`2>/dev/null`**!!

所以，简单地放弃它就可以了：

```
for ((i=0070;i<0155;i++));do
    echo -e $(eval "printf "\\\\%04o" $((19+0$i)) ");
  done |
    xargs
bash: 19+058: value too great for base (error token is "058")
bash: 19+059: value too great for base (error token is "059")
...
bash: 19+098: value too great for base (error token is "098")
bash: 19+099: value too great for base (error token is "099")
bash: 19+0108: value too great for base (error token is "0108")
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
```

事情变得更清楚了！

```
for ((i=0070;i<0155;i++));do
    echo -e $(eval "printf "\\\\%04o" $((19+0$i)) ")
  done 2> >(wc -l >&2) | xargs 
27
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
```

实际上有 27 个错误，值从... 56 到 108：

```
printf "%d\n" 0070 0155
56
109 
```

好的，它是**octal**，所以不是 85 个值，而是 53 个：

```
echo $(( 155 - 70 ))  $(( 0155 - 0070 ))  $(( 109 - 56 ))
85 53 53 
```

这会产生 53 个值和 27 个错误：

```
echo $((53-27))
26 
```

是的！

这是正确的字母数量（在*我的*字母表中）！

### 结论

问题可以改写为：

> ***滥用`/dev/null`**如何产生奇怪的行为*

所以在重定向 STDERR 时要小心，更喜欢使用如下命令：

```
command 2> >(grep -v "unwanted message" >&2) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T10:10:56.270

你有 31 个步骤，因为 040 是十进制 32 的[八进制](http://en.wikipedia.org/wiki/Octal)。

八进制是以 8 为底的数字系统。十进制以 10 为底，十六进制为 16。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T10:09:42.860

你只是使用[八进制](http://en.wikipedia.org/wiki/Octal)数字，因为您的数字以 0 为前缀。

所以它是基数 8，而不是基数 10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T10:10:29.760

你为什么不直接用下面的来打印字母表呢？

```
for letter in {A..Z} ; do
    echo $letter
done 
```

# android - GoogleMap 支持片段错误

> ID：14423445
> 
> 赞同：0
> 
> 时间：2013-01-20T10:06:09.597
> 
> 标签：android, android-fragments, google-maps-android-api-2, android-support-library

我有一个使用 GoogleMaps API 和 Fragments 支持库的项目。我已经在一项活动中有一张工作地图，所以我知道 API 和库都设置正确。我正在尝试在片段中添加地图作为新活动的一部分。

Activity 扩展了一个 android.support.v4.app.FragmentActivity，xml 文件包含：

```
<fragment
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="250dp"
            android:name="com.google.android.gms.maps.SupportMapFragment" /> 
```

但是当我运行时，我得到了错误：

```
01-20 11:58:31.535: ERROR/AndroidRuntime(5389): FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
    at android.app.Activity.setContentView(Activity.java:1835)
    at com.yedidyak.gpsalarm.AddAlarm.onCreate(AddAlarm.java:19)
    at android.app.Activity.performCreate(Activity.java:4465)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

我能找到的关于这个错误的所有信息都是关于没有正确安装 google-play-lib 作为 jar 和导入的模块，但我已经完成了 - 以及另一个活动中的工作地图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:47:34.743

您必须参考 google play services 库，而不是将 jar 和 map_attrs.xml（以及其他文件，如 strings.xml）添加到您的项目中。

如果你这样做了，你也可能不小心删除了 res/values/map_attrs.xml。

# java - 如何从 ScheduledExecutorService 中删除任务？

> ID：14423449
> 
> 赞同：73
> 
> 时间：2013-01-20T10:07:07.600
> 
> 标签：java, android, scheduledexecutorservice

我会`ScheduledExecutorService`定期执行一些不同的任务`scheduleAtFixedRate(Runnable, INIT_DELAY, ACTION_DELAY, TimeUnit.SECONDS);`

我也有一个不同`Runnable`的，我正在使用这个调度程序。当我想从调度程序中删除其中一项任务时，问题就开始了。

有没有办法做到这一点？

我是否使用一个调度程序来完成不同的任务？实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-20T10:26:33.480

只需取消返回的未来`scheduledAtFixedRate()`：

```
// Create the scheduler
ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(1);
// Create the task to execute
Runnable r = new Runnable() {
    @Override
    public void run() {
        System.out.println("Hello");
    }
};
// Schedule the task such that it will be executed every second
ScheduledFuture<?> scheduledFuture =
    scheduledExecutorService.scheduleAtFixedRate(r, 1L, 1L, TimeUnit.SECONDS);
// Wait 5 seconds
Thread.sleep(5000L);
// Cancel the task
scheduledFuture.cancel(false); 
```

另一件需要注意的事情是取消不会从调度程序中删除任务。它所确保的是该`isDone`方法始终返回`true`。如果您继续添加此类任务，这可能会导致内存泄漏。例如：如果您基于某些客户端活动或 UI 按钮单击启动任务，请重复 n 次并退出。如果该按钮被单击太多次，您最终可能会得到大量无法被垃圾收集的线程池，因为调度程序仍然有引用。

您可能希望`setRemoveOnCancelPolicy(true)`在`ScheduledThreadPoolExecutor`Java 7 及以后的可用类中使用。为了向后兼容，默认设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-20T22:20:26.847

如果您的`ScheduledExecutorService`实例扩展`ThreadPoolExecutor`（例如`ScheduledThreadPoolExecutor`），您可以使用`remove(Runnable)`（但请参阅其 javadoc 中的注释：“它可能无法删除在放入内部队列之前已转换为其他形式的任务。”）或`purge()`.

# python - 单击按钮时如何添加确认框，Python / html脚本

> ID：14423452
> 
> 赞同：0
> 
> 时间：2013-01-20T10:07:36.427
> 
> 标签：python, html, confirm

当我单击以下 python/html 脚本中的注销或重新启动按钮时，我需要添加一个确认框。这个脚本只是一个大脚本的总结，它对我来说很好用。请问有什么建议吗？

提前致谢。

```
#!/usr/bin/python

import cherrypy
import os.path
import struct
from auth import AuthController, require, member_of, name_is
import subprocess
import commands

class Server(object):
    led_logout=0 
    led_restart=0
    _cp_config = {
    'tools.sessions.on': True,
    'tools.auth.on': True
    }   
    auth = AuthController()      
    @cherrypy.expose
    @require()
    def index(self,logout='', restart=''):

    html = """
     <html>
      <head>
      </head>
          <body>
        <p>{htmlText} 
        <p>
        <a href="?logout=1"><img src="images/Logout.png"><a href="?restart=1"><img src="images/Restart.png"></a>
        </ul>
          </body>
     </html>    
           """
    myText = ''
    myText = "Hello"

    if logout:
        self.led_logout = int(logout)             
    if self.led_logout:
        print "Logout !!!!!"
        AuthController().logout('/?logout=0')

    if restart:
        self.led_restart = int(restart)
        #subprocess.call(['sudo shutdown -r now'], shell=True)
        myText = "The system is restarting"

    return html.format(htmlText=myText)
    index.exposed = True

#configuration
conf = {
    'global' : { 
        'server.socket_host': '0.0.0.0', #0.0.0.0 or specific IP
        'server.socket_port': 8085 #server port
    },

    '/images': { #images served as static files
        'tools.staticdir.on': True,
        'tools.staticdir.dir': os.path.abspath('/home/ubuntu/webserver/images')
    }
    }
cherrypy.quickstart(Server(), config=conf) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:57:04.230

好的，我得到了解决方案，我刚刚添加了

```
onclick="return confirm('Are you sure you want to logout?');" 
```

所以完整的行将是：

```
<a href="?logout=1" onclick="return confirm('Are you sure you want to logout?');"><img src="images/Logout.png"><a href="?restart=1" onclick="return confirm('Are you sure you want to restart?');" ><img src="images/Restart.png"></a> 
```

# c++ - (1<<32) 和 (1<) 之间的差异 任何人都可以帮助我理解以下行为。 1 #include <iostream>2 3 using namespace std; 4 5 main() 6 { 7 uint32_t i = 32; 8 问问题 问问题 2013-01-20T10:07:37.340 157 次 This question shows research effort; it is useful and clear -2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 任何人都可以帮助我理解以下行为。 1 #include <iostream>2 3 using namespace std; 4 5 main() 6 { 7 uint32_t i = 32; 8 9 // cout << "(1<<32): " << (1<<32) << endl; // - This leads to a compilation error. 10 cout << "(1<<32): " << (1<<i) 1="" 9="" 11="" 12="" 13="" <<="" endl;="" -="" this="" compiles="" and="" prints="" why?="" return="" 0;="" }="" 如果我取消注释上面的第="" 行="" 我会看到以下编译错误（这对我来说很有意义）="" bitwiseleftshift.c++:="" in="" function="" 'int="" main()':="" bitwiseleftshift.c++:9:="" warning:="" left="" shift="" count="">= width of type 但是第 10 行是我的问题所在。它编译成功并打印 (1<<32): 1 类似于循环位移。为什么会打印 1？我已经看到了i == 33，(1< <i)打印 1="" 2="" 4="" 5="" 7="" 32="" 2。="" 我确实搜索了论坛，但找不到相关问题。如果这是一个重复的问题="" -="" 请帮助我提供链接。="" 正如其他答案所指出的，如果移位量大于或等于移位数据的大小（或为负），则结果未定义。="" 但是，为了解释您所看到的行为="" 一些计算机体系结构（包括="" x86）将移位量视为要移位的数据大小的模数，因此移位="" 相当于根本不移位。换句话说，他们只是屏蔽了高位并使用低位。="" c++c="" 回答="" this="" answer="" is="" useful="" 这些转变是不合法的，但编译器只捕获第一个：="" 6.5.7="" 对每个操作数执行整数提升。结果的类型是提升的左操作数的类型。如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。="" 于="" 2013-01-20t10:11:46.777="" 2013-01-20t10:11:21.067="" 首先，这不是错误，而是警告。编译器在第二种情况下没有警告的原因是它可能不够聪明，无法从第一个赋值中推断出结果将是未定义的行为，而在第一种情况下，常量左移="" 位是“显然”是编译器捕获的问题。="" 2013-01-20t10:12:37.087="" 常量移位由前处理器在常量折叠期间评估，而第二个移位由大多数编译器推迟到运行时。这将解释编译器连续传递的不同响应。="" 使用静态分析可以确定两者确实具有相同的结果并且可以在编译期间检测到。="" 2013-01-20t10:29:35.090="" related="" wpf="" 如何在窗口标题中添加按钮？="" php="" 使用="" curl="" 获取过去的安全答案="" jquery="" sinatra="" 应用程序中的="" twitter="" 时间="" java="" file="" .write()="" 整数流="" c++="" 使用汇编器消息编译错误="" 模板构造函数没有匹配函数调用错误="" pseudocode="" 编程伪代码="" android="" 删除字符串上的="" .txt？="" javascript="" iphone="" 平板电脑的="" html="" 导航菜单="" 清除底层画布="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：14423453
> 
> 赞同：-2
> 
> 时间：
> 
> 标签：c++, c

任何人都可以帮助我理解以下行为。

```
 1    #include <iostream>
    2
    3    using namespace std;
    4
    5    main()
    6    {
    7        uint32_t i = 32;
    8
    9        // cout << "(1<<32): " << (1<<32) << endl; // - This leads to a compilation error.
    10       cout << "(1<<32): " << (1<<i) << endl; // - This compiles and prints 1 - Why?
    11
    12        return 0;
    13    } 
```

如果我取消注释上面的第 9 行 - 我会看到以下编译错误（这对我来说很有意义）

```
BitWiseLeftShift.c++: In function 'int main()':
BitWiseLeftShift.c++:9: warning: left shift count >= width of type 
```

但是第 10 行是我的问题所在。它编译成功并打印

```
(1<<32): 1 
```

类似于循环位移。为什么会打印 1？我已经看到了`i == 33`，`(1<<i)`打印 2。

我确实搜索了论坛，但找不到相关问题。如果这是一个重复的问题 - 请帮助我提供链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T10:11:46.777

这些转变是不合法的，但编译器只捕获第一个：

> 6.5.7
> 
> 对每个操作数执行整数提升。结果的类型是提升的左操作数的类型。如果右操作数的值为负数**或大于或等于提升的左操作数的宽度**，则行为未定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T10:11:21.067

正如其他答案所指出的，如果移位量大于或等于移位数据的大小（或为负），则结果未定义。

但是，为了解释您所看到的行为 -

一些计算机体系结构（包括 x86）将移位量视为要移位的数据大小的模数，因此移位 32 相当于根本不移位。换句话说，他们只是屏蔽了高位并使用低位。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T10:12:37.087

首先，这不是错误，而是警告。编译器在第二种情况下没有警告的原因是它可能不够聪明，无法从第一个赋值中推断出结果将是未定义的行为，而在第一种情况下，常量左移 32 位是“显然”是编译器捕获的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T10:29:35.090

常量移位由前处理器在常量折叠期间评估，而第二个移位由大多数编译器推迟到运行时。这将解释编译器连续传递的不同响应。

使用静态分析可以确定两者确实具有相同的结果并且可以在编译期间检测到。</i)打印></i)></iostream></iostream>

# ruby-on-rails - Rails查询]连接和包含之间的区别

> ID：14423454
> 
> 赞同：1
> 
> 时间：2013-01-20T10:07:38.527
> 
> 标签：ruby-on-rails, database, rails-activerecord

`@teachers = User.joins(:students).where("student_id IS NOT NULL")`

以上有效，以下无效。

`@teachers = User.includes(:students).where("student_id IS NOT NULL")`

据我了解，连接和包含都应该带来相同的结果和不同的性能。据此[，](http://guides.rubyonrails.org/active_record_querying.html)您使用`includes`加载Model调用的对象的关联记录，其中`joins`只需将两个表添加在一起。使用`includes`还可以防止`N+1 queries`.

第一个问题：为什么我的第二行代码不起作用？

第二个问题：任何人都应该`includes`在与上述类似的情况下使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:04:28.170

当您想要查询连接模型时，您可以使用连接。这是在您的表之间进行内部连接。

包含是当您希望将关联模型加载到最终结果时。
这允许您在任何结果上调用关联，而无需再次进行数据库查找。您不能查询通过包含加载的模型。如果你想查询它，你必须使用连接（你可以同时做！）

# jquery - 未捕获的类型错误：无法读取未定义的属性“localStorage”

> ID：14423455
> 
> 赞同：3
> 
> 时间：2013-01-20T10:07:43.603
> 
> 标签：jquery, backbone.js, local-storage, underscore.js

我在backbonejs应用程序中有以下内容：

```
////MODEL
var app={};
app.ledger=Backbone.Model.extend();

////COLLECTION
app.ledgerList=Backbone.Collection.extend({
model: app.ledger,
localStorage:new Store('ledgerstore')
 });

////INITIATING COLLECTION
app.ledgerlist=new app.ledgerList(); 
```

在我的一个观点中，我尝试在集合中创建一个新模型，如下所示：

```
newAttributes:function(){
    return{
        name:$("#ledgerName").val(),
        email: $("#ledgerEmail").val(),
        address: $("#ledgerAddress").val(),
        phone: $("#ledgerPhone").val()

     }},
saveLedger: function(){
    app.ledgerlist.create(this.newAttributes());

} 
```

我得到了`Uncaught TypeError: Cannot read property 'localStorage' of undefined`在线错误`app.ledgerlist.create(this.newAttributes());`

这一切都开始突然发生在不知从何而来。几分钟前它还在工作。我想这与本地存储有关。我清除了它，但还是一样。在 Firefox 控制台中说 d.collection 未定义。

请指导。

# c++ - 使用宏 log2 时没有 args 错误与 cimg？

> ID：14423458
> 
> 赞同：0
> 
> 时间：2013-01-20T10:08:13.090
> 
> 标签：c++, g++, header-files, cimg

所以我在这之后得到了自己的 g++ for windows [。](http://www.claremontmckenna.edu/pages/faculty/alee/g++/g++.html)

因为我想尝试 CImg，所以我从[这里下载了测试版。](http://sourceforge.net/projects/cimg/files/)

我只是将 cimg.h 复制到 g++ 的包含目录中，并且还放置了一些在编译时找不到的依赖项。

但是现在当我尝试编译像[本教程一样使用 cimg 的东西时。](http://cimg.sourceforge.net/reference/group__cimg__tutorial.html)

它给了我错误：

```
\Cimg.h:14485: macro 'log2' used without args 
```

第 14492 行也是如此。

这些行看起来像这样：

```
CImg<T>& log2() {
  cimg_for(*this,ptrd,T) *ptrd = (T)cimg::log2((double)*ptrd);
  return *this;
}

//! Compute the base-10 logarithm of each pixel value \newinstance.
CImg<Tfloat> get_log2() const {
  return CImg<Tfloat>(*this,false).log2();
} 
```

这实际上是我第一次使用 C++，所以显然我已经对所有头文件等的概念感到困惑，所以我可能在那里做错了什么。或者我也可能犯了一个愚蠢的初学者错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:04:01.547

因为在 CImg.h 之前包含一个头文件，它显然做了一个

```
#define log2 something 
```

您可以尝试更改包含的顺序，以便此标头在 #include "CImg.h" 之后执行 #define。看起来错误不是来自 CImg。

# php - CakePHP v2 上的 CakeDC 标签插件？

> ID：14423459
> 
> 赞同：1
> 
> 时间：2013-01-20T10:08:20.500
> 
> 标签：php, cakephp, cakephp-2.0

有没有人成功在 Cake v2.x 上安装 CakeDC 标签插件？

似乎整个 cake 命令行已经改变了很多（没有更多的迁移并且随着目录结构的变化，架构也被破坏了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:31:03.623

如果您指的是[这个 CakeDC](https://github.com/CakeDC/tags)插件，那么它已经被格式化为 cake 2.x。只需在您的插件目录中创建一个名为的文件夹`Tags`，然后将插件内容放在那里。然后`Config/bootstrap.php`在您的主应用程序中打开文件并添加到底部`CakePlugin::load('Tags');`

# android - 指南针的惯性

> ID：14423462
> 
> 赞同：0
> 
> 时间：2013-01-20T10:08:45.067
> 
> 标签：android, location, compass-geolocation

我正在使用 Google Maps API v2 开发应用程序。我已经构建了一个自定义位置源来为地图提供位置更新以及一些跟随用户的功能，所以当用户按下“关注”按钮时，Aggiorna[=update]BearingAuto 和 AggiornaPosAuto 变为 true：

```
@Override
public void OnBearingChanged(float bearing) {
    if (AggiornaBearingAuto)
    {
        mMap.moveCamera(CameraUpdateFactory.newCameraPosition(CameraPosition.builder(mMap.getCameraPosition()).bearing(bearing).build()));
    }
}

@Override
public void OnLocationChanged(Location location) {
    if (AggiornaPosAuto)
    {
        CameraPosition Att = mMap.getCameraPosition();
        mMap.moveCamera(CameraUpdateFactory.newCameraPosition(
                CameraPosition.builder().bearing(Att.bearing).
                target(new LatLng(location.getLatitude(), location.getLongitude()))
                .tilt(Att.tilt).zoom(Att.zoom).build()
                ));
    }
} 
```

并且这些函数根据我的班级提供的值更新 CameraPosition。

现在，在该类中，提供轴承更新的方法如下：

```
@Override
public void onSensorChanged( SensorEvent sensorEvent ) {

    float[] inR = new float[16];
    float[] I = new float[16];
    float[] orientVals = new float[3];

    double azimuth = 0;
    double pitch = 0;
    double roll = 0;
    // Gets the value of the sensor that has been changed
    switch (sensorEvent.sensor.getType()) {  
        case Sensor.TYPE_ACCELEROMETER:
            gravity = sensorEvent.values.clone();
            break;
        case Sensor.TYPE_MAGNETIC_FIELD:
            geomag = sensorEvent.values.clone();
            break;
    }

    // If gravity and geomag have values then find rotation matrix
    if (gravity != null && geomag != null) {

        // checks that the rotation matrix is found
        boolean success = SensorManager.getRotationMatrix(inR, I, gravity, geomag);
        if (success) {
            SensorManager.getOrientation(inR, orientVals);
            azimuth = Math.toDegrees(orientVals[0]);
            pitch = Math.toDegrees(orientVals[1]);
            roll = Math.toDegrees(orientVals[2]);
        }
    }

        //finally, call OnBeraingChange in Listener
    LocListener.OnBearingChanged((float) azimuth);
} 
```

好的。所以问题是：地图有时移动得非常快以至于让人讨厌，比如传感器连续提供-4、0、+4、0、+6、-5等。这使得无法处理此功能。谷歌地图如何让地图旋转如此顺畅且绝对稳定？他们实施了一种惯性，但如何？有人想实现这样的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:13:15.610

我有同样的问题，你必须实现一个低通滤波器，因为磁力计和加速度计的值更不稳定。或者你必须实现一个更类似于低通滤波器的东西看这个：[Android Compassorientation on unreliable (Low pass filter)](https://stackoverflow.com/questions/4699417/android-compass-orientation-on-unreliable-low-pass-filter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:24:26.077

我通过实施卡尔曼滤波器解决了这个问题。

# php - php删除文件夹并使用一个提交删除按钮从mysql数据库中删除一行

> ID：14423466
> 
> 赞同：3
> 
> 时间：2013-01-20T10:09:40.350
> 
> 标签：php, mysql, directory

```
 function remove_directory($directory) {
        if (is_dir($directory) === true) {
            $contents = scandir($directory);
            unset($contents[0], $contents[1]);

            foreach($contents as $object) {
                $current_object = $directory.'/'.$object;
                if (filetype($current_object) === 'dir') {
                    remove_directory($current_object);
                    } else {
                    unlink($current_object);    
                    }
                }
                rmdir($directory);
            }
        }

    function delete_row($filecode) {
        $filecode = mysql_real_escape_string($filecode);

        mysql_query("DELETE FROM `files` WHERE `code` = '$filecode'");

        }
          $query = mysql_query("SELECT `id`, `username`, `title`, LEFT(`description`, 90) as `description`, `code`, `type`, `size`, `date` FROM `files` WHERE `username` = '$userfile' ORDER BY id DESC LIMIT $start, $per_page");

        while ($query_row = mysql_fetch_assoc($query)) {
            $fileuser = $query_row['username'];
            $filetitle = $query_row['title'];
            $filecode = $query_row['code'];
            $filedesc = $query_row['description'];
            $filesize = $query_row['size'];
            $filedate = $query_row['date'];
            $filetype = $query_row['type'];

            if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['dir'])) {
            $dir = basename($_POST['dir']);
            if ($dir[0] != '.') 
            remove_directory("files/$dir"); //these function work good and delete only one folder when I click Delete button
            delete_row($filecode); //these function delete me all row in database in first page when I click in second page delete button too what the .... I am so angry i cant believe what is happend it's gone my database  

        }

        if (empty($filedesc) === false) {   
        echo '<div id="linkstyle"><strong><a href="http://localhost/edu/1111111111111/userdownload.php?code='. $filecode . ' ">' , $filetitle , '</a></strong></div> <div id="displayfiledesc">' , $filedesc , '...</div><div id="displayfiledate"> &#149; ' , formatBytes($filesize) , ' &#149; ' , $filedate , ' &#149; ' , $filetype , '</div>';?>

        <form action="" method="post">
            <input type="hidden" name="dir" value="<?= $filecode?>">
            <input type="submit" name="delete" id="bdelete" value="Delete"><br><br>
        </form>

        <?php
        } else { 
        echo '<div id="linkstyle"> <strong><a href="http://localhost/edu/1111111111111/userdownload.php?code='. $filecode . ' ">' , $filetitle , '</a></strong></div> <div id="displayfiledate"> &#149; ' , formatBytes($filesize) , ' &#149; ' , $filedate , ' &#149; ' , $filetype , '</div>';?>

        <form action="" method="post">
            <input type="hidden" name="dir" value="<?= $filecode?>">
            <input type="submit" name="delete" id="bdelete" value="Delete"><br><br>
        </form> 
```

我的问题太大了。当我单击删除按钮时，我希望它会从我的 mysql 数据库中删除一个文件夹和一行，但不，它是删除第一页中 mysql 数据库中的一个文件夹和所有行，我可以在其中看到删除按钮。我能理解的问题在哪里。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:15:36.327

您是`delete_row()`从一个循环中调用的，该循环遍历`SELECT ... FROM files WHERE username = '$userfile'`仅受`LIMIT`子句限制的结果集。

虽然`remove_directory()`也从该循环中重复调用，但始终使用相同的参数调用它：`'files/'.basename($_POST['dir'])`.

# nhibernate - 非常高流量的 Web 应用程序中的 Nhibernate 会话处理

> ID：14423470
> 
> 赞同：1
> 
> 时间：2013-01-20T10:09:58.840
> 
> 标签：nhibernate, session-management

我正在构建一个需要每分钟处理 1000 个请求的小型 Web 应用程序。
每个请求都需要向数据库写入一个简单的行。
我正在为阅读做二级缓存。
在这种情况下，我可以按请求进行会话吗？我应该重用会话吗？这种情况的最佳做法是什么？
它将用 C#、SQL SERVER 2008、ASP.NET 通用处理程序编写。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:19:35.333

每个请求的会话应该没问题，但是您肯定必须进行负载测试，因为无法预测您的设置是否可以处理负载，或者瓶颈是什么。

# jquery - jQuery 访问 JSON 元素

> ID：14423471
> 
> 赞同：1
> 
> 时间：2013-01-20T10:10:06.340
> 
> 标签：jquery, json

我有这个 JSON 字符串：

```
{"image":[
    {"img":"_files\/image\/images\/firstimage.jpg","alt":"firstimage alt text"},
    {"img":"secondimage.jpg","alt":"secondimage alt text"}
]} 
```

JSON 字符串是从文本区域中挑选出来的，然后存储在变量“内容”中

```
var content = $("textarea").val(); 
```

**我正在尝试访问元素：**

```
alert(content["image"][0]["img"]); 
```

**但我得到错误：**

> 类型错误：content.image 未定义。

最终我想通过更改和添加元素来操作 JSON 字符串。

我在这里做错了什么？

**更新**

$.parseJSON 完成了这项工作：

```
var content = $.parseJSON($("textarea").val()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T10:16:17.297

如果您从 textarea 中选择 JSON*字符串*，则必须先将其转换为 JavaScript 对象，然后才能使用它。使用，例如[`$.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)：

```
var content = $.parseJSON( $("textarea").val() ); 
```

[或者，大多数浏览器](http://caniuse.com/#feat=json)[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)中都有一个原生 JavaScript 函数来执行此操作：

```
var content = JSON.parse( $("textarea").val() ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T10:18:49.893

它不会直接解析为 JSON，而是您需要先做

```
var content = JSON.parse($("textarea").val()); 
```

这应该允许您使用一般的 JSON 操作

您的 JSON 检索示例可能是这样的

```
content.image[0]['alt'] 
```

# recursion - 计算在 Towers of hanoi Lisp 中移动的磁盘数量

> ID：14423472
> 
> 赞同：1
> 
> 时间：2013-01-20T10:10:24.077
> 
> 标签：recursion, lisp

我想计算diskc的移动次数。但相反，结果我得到了别的东西。

```
(setq x 0)

(defun towersOfHanoi (n from to help)
  (if (> n 0)
   ;progn evaluates multiple forms and returns the result from the last one.*/
   (progn
     (towersOfHanoi (- n 1) from help to)
     (format t "~d ----> ~d~%" from to)
     (towersOfHanoi (- n 1) help to from)
     (+ 1 x)
     )  

    ))

;(towersOfHanoi 3 'A 'B 'C) 
```

当我运行它时，我得到

```
(towersOfHanoi 3 'A 'B 'C)
A ----> B
A ----> C
B ----> C
A ----> B
C ----> A
C ----> B
A ----> B
1 
```

为什么它是 1 而不是 7，我猜每次递归调用都会将 x 的值重置为 0，但是，我怎样才能获得磁盘的移动次数。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T10:34:46.777

在 lisp`if`中最多需要三个参数；条件，条件为真时评估的形式，以及条件为假时评估的形式。

详情请参阅[http://www.lispworks.com/documentation/HyperSpec/Body/s_if.htm](http://www.lispworks.com/documentation/HyperSpec/Body/s_if.htm)。

为了评估一个分支中的多个表单，您可以使用`progn`它评估多个表单并返回最后一个表单的结果。

此外，`princ`期望只打印一个参数。为了一次打印几件东西，您可以使用`format`

在您的情况下（还要注意括号的位置）：

```
(defun towersOfHanoi (n from to help)
 (if (> n 0)
   (progn
     (towersOfHanoi (1- n) from to help)
     (format t "~d ----> ~d~%" from to)
     (towersOfHanoi (1- n) help to from)))) 
```

没有错误分支，您也可以使用`when`that 可以评估多个形式：

```
(defun towersOfHanoi (n from to help)
  (when (> n 0)
    (towersOfHanoi (1- n) from to help)
    (format t "~d ----> ~d~%" from to)
    (towersOfHanoi (1- n) help to from))) 
```

为了计算移动，您可以使用局部计数变量（用 引入`let`）和更新此变量的内部工作函数（用 引入`labels`）：

```
(defun towers-of-hanoi (n &optional (from 1) (to 2) (help 3))
  (let ((counter 0))                                          ; local variable
    (labels ((towers-of-hanoi-core (n from to help)           ; local function
               (when (> n 0)
                 (towers-of-hanoi-core (1- n) from to help)
                 (incf counter)                        
                 (format t "~d ----> ~d~%" from to)
                 (towers-of-hanoi-core (1- n) help to from))))
      (towers-of-hanoi-core n from to help))                  ; leave work to inner function
    (format t "Moves: ~d ~%" counter))) 
```

在这里，from、to 和 help 也是可选的，默认为 1、2 和 3。

再次：详细信息可在 Hyperspec 中找到：[http ://www.lispworks.com/documentation/HyperSpec/Front/](http://www.lispworks.com/documentation/HyperSpec/Front/)

# java - 使用 DBUnit 读取 Excel

> ID：14423474
> 
> 赞同：0
> 
> 时间：2013-01-20T10:10:30.370
> 
> 标签：java, dbunit

我收到要求在我们的系统中构建一个小模块来读取用户上传到系统的 Excel 电子表格。我做了一些研究，很多人使用 Apache POI 或 JExcel 来读取 excel 文件。两者似乎都是构建这个小模块的好 API。

开发团队通过读取记录在excel文件中的测试数据，构建了许多使用DBUnit执行数据库相关测试的单元测试。由于 DBUnit 已被证明是读取 excel 电子表格的好 API，因此我打算在我必须开发的小模块中使用 DBUnit，而不是 Apache POI。

但是，我从未发现有人将 DBUnit 用于单元测试以外的任何目的。在使用 Java 构建的系统中使用 DBUnit 读取 excel 电子表格是一种好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:41:19.953

不，DBUnit 对表进行操作，并将插入传递给它的任何内容。以这种方式操作将是一个巨大的安全漏洞。除非您信任您的用户可以直接访问数据库，否则这是一个糟糕的主意。

# javascript - 如何使用 javascript 将 HTML 表单的值发布到新的 HTML 页面

> ID：14423475
> 
> 赞同：4
> 
> 时间：2013-01-20T10:10:37.437
> 
> 标签：javascript, html

我在“page1.html”上有一个包含四个元素（textbox1、textbox2、listbox1、listbox2）的 HTML 表单。单击提交时，我希望将这些元素的值在表格中发布到新页面（page2.html）

第 2 页中的表格如下：

*   第一行：textbox1 的值
*   第二行第 1 列：textbox2 的值
*   第二行第 2 列：listbox1 的值
*   第三行：listbox2 的值

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:18:24.627

用平原`html`，`javascript`你可以这样做

page1.html

```
<input type="text" id="txt1" />
<input type="button" value="Submit" onclick="postData()" /> 
```

javascript

```
function postData(){
    var val = document.getElementById("txt1").value;

    var tbl = "<table><tr><td>"+val+"</td></tr></table>";

    var w = window.open("page2.html");

    w.document.write(tbl);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T10:21:43.523

在这里您可以使用`type = GET`和`action="page2.html"`

然后在`page2.html`，在pageload中使用下面的函数来提取URL参数

```
function getURLParameter(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
} 
```

****演示：****

**Page1.html**

```
<form type="GET" action="page2.html">
<input name="text" id="txt" />
</form> 
```

**Page2.html**

```
<script>
function getURLParameter(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
}
alert(getURLParameter("text"));
</script> 
```

# svn - 将非祖先分支集成到主干中

> ID：14423476
> 
> 赞同：1
> 
> 时间：2013-01-20T10:10:47.320
> 
> 标签：svn

设置 SVN 时，我们没有从主干创建分支，而是简单地在根结构中创建了一个新文件夹：

```
/branches/dev/  
/trunk 
```

并为此努力。当然，现在不可能将 dev 合并到主干中，因为 SVN 看不到分层连接。我正在尝试找到使其正确的最佳方法，以便我们拥有代码的开发分支与主干相关，并且我们将来可以进行正常的合并。

我发现了两种方法——其中一种只是将代码从 dev 复制到主干，提交主干，然后进行适当的分支检出。我对这种方法的问题是我们会丢失所有的修订历史，因为真正的开发分支会重新开始。

其他方法是使用 --ignore-hierarchy。这似乎迫使东西进入主干，我不确定这种方法的缺点。

基本上，当我们自己物理创建开发文件夹而不是分支主干时，从一开始就解决问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:20:36.177

为什么不能将该分支合并到主干中？

有不同的方法可以在 subversion（以及其他所有 rcs）中维护分支等。您直观地设置的是传统方式：您创建文件夹并复制分支/主干/标签之间的文件夹修订之间的差异。这行得通，因为 svn 层次结构中的节点只不过是一个文件夹。svn中没有什么特别的魔法。

Subversion 只不过是一个带有附加时间轴的文件系统。

因此，您所要做的就是将您提交给分支节点的更改（修订）合并到主干中：

```
svn merge -r <start>:<current> https://<server>/<repo>/<path>/branches/dev <trunk-checkout> 
```

（也就是说：如果您的分支最初包含主干的一些修订。但我认为它确实如此，因为您没有另外说。如果它完全独立于主干，那么为什么它被称为分支？而且：更重要的是：为什么你想把它合并到主干吗？）

* * *

2013-01-26 更新：

讨论表明，这种情况涉及一个空主干，从未填充也从未使用过，因此没有任何东西可以合并分支中的任何更改。取而代之的是，整个开发项目起源于一个*被称为*“分支”的东西，它实际上是这个项目的唯一“主干”。

所以解决方案看起来像这样：在这种情况下，只需将当前称为分支的内容移动为项目主干，并以新的（更合适的）名称继续开发。开发要么在新的结帐内完成，要么通过重新定位现有的结帐来完成。从现在开始，分支应该按照下面描述的方式使用。所以更正不合适的名称并调整当前情况，使其与项目的典型措辞相匹配：

*   主干是完成或巩固“主要”开发线的地方
*   主干是分支内部的发展被重新合并到的地方
*   可以通过在给定时间点分叉主干来创建多个分支
    *   在这些分支内部，复杂的开发可以与主干的其他更改一起实施，而不会干扰
    *   当那些更复杂的开发完成并且新功能或架构变得稳定（“准备好”）时，可以将来自分支的更改合并回主干

# c++ - 它是g ++中的错误吗？

> ID：14423483
> 
> 赞同：20
> 
> 时间：2013-01-20T10:11:50.767
> 
> 标签：c++, gcc

```
#include <stdint.h>
#include <iostream>

using namespace std;

uint32_t k[] = {0, 1, 17};

template <typename T>
bool f(T *data, int i) {
    return data[0] < (T)(1 << k[i]);
}

int main() {
    uint8_t v = 0;
    cout << f(&v, 2) << endl;
    cout << (0 < (uint8_t)(1 << 17)) << endl;
    return 0;
} 
```

```
g++ a.cpp && ./a.out
1
0 
```

为什么我会得到这些结果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-20T11:20:12.333

看起来 gcc 反转了转变并将其应用于另一侧，我想这是一个错误。

在 C（而不是 C++）中也会发生同样的事情，并且将 C 翻译成 asm 更容易阅读，所以我在这里使用 C；我还减少了测试用例（删除模板和 k 数组）。foo() 是原始的错误 f() 函数， foo1() 是 foo() 在 gcc 中的行为，但不应该， bar() 显示 foo() 除了读取的指针之外应该是什么样子。

我是 64 位的，但除了参数处理和查找 k 之外，32 位是相同的。

```
#include <stdint.h>
#include <stdio.h>

uint32_t k = 17;
char foo(uint8_t *data) {
    return *data < (uint8_t)(1<<k);
/*
with gcc -O3 -S: (gcc version 4.7.2 (Debian 4.7.2-5))
    movzbl  (%rdi), %eax
    movl    k(%rip), %ecx
    shrb    %cl, %al
    testb   %al, %al
    sete    %al
    ret
*/
}
char foo1(uint8_t *data) {
    return (((uint32_t)*data) >> k) < 1;
/*
    movzbl  (%rdi), %eax
    movl    k(%rip), %ecx
    shrl    %cl, %eax
    testl   %eax, %eax
    sete    %al
    ret
*/
}
char bar(uint8_t data) {
    return data < (uint8_t)(1<<k);
/*
    movl    k(%rip), %ecx
    movl    $1, %eax
    sall    %cl, %eax
    cmpb    %al, %dil
    setb    %al
    ret
*/
}

int main() {
    uint8_t v = 0;
    printf("All should be 0: %i %i %i\n", foo(&v), foo1(&v), bar(v));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-20T10:23:33.507

如果您的`int`长度为 16 位，则您将遇到未定义的行为，并且任一结果都是“OK”。

将 N 位整数向左或向右移动 N 个或更多位位置会导致未定义的行为。

由于这发生在 32 位整数上，因此这是编译器中的一个错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T14:24:21.667

**以下是更多数据点：**

基本上，它看起来像 gcc 优化（即使在 -O 标志关闭且 -g 开启时）：

```
 [variable] < (type-cast)(1 << [variable2]) 
```

至

```
 ((type-cast)[variable] >> [variable2]) == 0 
```

和

```
 [variable] >= (type-cast)(1 << [variable2]) 
```

至

```
 ((type-cast)[variable] >> [variable2]) != 0 
```

其中 [variable] 需要是数组访问。

我想这里的优点是它不必将文字 1 加载到寄存器中，这样可以节省 1 个寄存器。

所以这里是数据点：

*   将 1 更改为 > 1 会强制它实现正确的版本。
*   将任何变量更改为文字会强制它实现正确的版本
*   将 [variable] 更改为非数组访问会强制它实现正确的版本
*   [variable] > (type-cast)(1 << [variable2]) 实现了正确的版本。

我怀疑这一切都是为了保存一个寄存器。当 [variable] 是数组访问时，它还需要保留一个索引。有人可能认为这很聪明，直到它错了。

使用错误报告中的代码[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56051](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56051)

```
 #include <stdio.h>

    int main(void)
    {
        int a, s = 8;
        unsigned char data[1] = {0};

        a = data[0] < (unsigned char) (1 << s);
        printf("%d\n", a);

        return 0;
    } 
```

用 gcc -O2 -S 编译

```
 .globl main
            .type   main, @function
    main:
    leal    4(%esp), %ecx
    andl    $-16, %esp
    pushl   -4(%ecx)
    pushl   %ebp
    movl    %esp, %ebp
    pushl   %ecx
    subl    $8, %esp
    pushl   $1                ***** seems it already precomputed the result to be 1
    pushl   $.LC0
    pushl   $1
    call    __printf_chk
    xorl    %eax, %eax
    movl    -4(%ebp), %ecx
    leave
    leal    -4(%ecx), %esp
    ret 
```

只用 gcc -S 编译

```
 .globl main
            .type   main, @function
    main:
    leal    4(%esp), %ecx
    andl    $-16, %esp
    pushl   -4(%ecx)
    pushl   %ebp
    movl    %esp, %ebp
    pushl   %ebx
    pushl   %ecx
    subl    $16, %esp
    movl    $8, -12(%ebp)
    movb    $0, -17(%ebp)
    movb    -17(%ebp), %dl
    movl    -12(%ebp), %eax
    movb    %dl, %bl
    movb    %al, %cl
    shrb    %cl, %bl                      ****** (unsigned char)data[0] >> s => %bl
    movb    %bl, %al                              %bl => %al
    testb   %al, %al                              %al = 0?
    sete    %dl
    movl    $0, %eax
    movb    %dl, %al
    movl    %eax, -16(%ebp)
    movl    $.LC0, %eax
    subl    $8, %esp
    pushl   -16(%ebp)
    pushl   %eax
    call    printf
    addl    $16, %esp
    movl    $0, %eax
    leal    -8(%ebp), %esp
    addl    $0, %esp
    popl    %ecx
    popl    %ebx
    popl    %ebp
    leal    -4(%ecx), %esp
    ret 
```

我想下一步是挖掘 gcc 的源代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-20T12:48:42.030

I'm pretty sure we're talking undefined behaviour here - converting a "large" integer to a smaller, of a value that doesn't fit in the size of the new value, is undefined as far as I know. 131072 definitely doesn't fit in a uint_8\.

Although looking at the code generated, I'd say that it's probably not quite right, since it does "sete" rather than "setb"??? That does seem very suspicios to me.

If I turn the expression around:

```
return (T)(1<<k[i])  >  data[0]; 
```

then it uses a "seta" instruction, which is what I'd expect. I'll do a bit more digging - but something seems a bit wrong.

# cmd - 使用命令提示符以特定方式列出文件和文件夹

> ID：14423485
> 
> 赞同：0
> 
> 时间：2013-01-20T10:12:11.513
> 
> 标签：cmd

我需要使用命令提示符的目录中的文件和文件夹列表**（注意：没有子文件夹文件）**，格式为 ie。*文件名-大小-文件类型*。
我尝试使用`dir /A/S >AllFiles.txt`. 但是输出的格式需要编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:32:50.397

仅使用“dir”命令是不可能的。不过，Powershell 的 get-childitem 可以解决问题。

```
get-childitem -recurse | Select-Object basename, length, extension 
```

假设您从 cmd 运行，您可以将上面的 powershell 命令行包装为：

```
powershell -Command  "get-childitem -recurse | Select-Object basename, length, extension" 
```

要查看 Select-Object 子句的所有可用选项，您可以运行

```
get-childitem | get-member 
```

在电源外壳中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:32:09.013

我不确定您所说的文件类型是什么意思。我假设你的意思是文件扩展名。

没有一种简单的方法可以获取文件夹的总大小，因此我将文件夹列为`name - <dir>`.

在`-`文件和文件夹名称中有效。你可能会更好地替代`:`。

简单的 FOR 命令列出文件或文件夹，但不能同时列出两者。所以下面我使用了两个 FOR 命令。这样做的好处是它支持名称中的 unicode。

```
@echo off
(
  for %%F in (*) do echo %%F - %%~zF - %%~xF
  for /d %%F in (*) do echo %%F - ^<dir^>
)>AllFiles.txt 
```

您可以将 DIR /B 与 FOR /F 结合使用以一次性获取文件和文件夹，但它不支持名称中的 unicode。

```
@echo off
(
  for /f "eol=: delims=" %%F in ('dir /b') do (
    if exist "%%F\" (echo %%F - ^<dir^>) else (echo %%F - %%~zF - %%~xF)
  )
)>AllFiles.txt 
```

# android - 即使屏幕已解锁，如何启用 Android LED 通知灯

> ID：14423488
> 
> 赞同：0
> 
> 时间：2013-01-20T10:12:29.873
> 
> 标签：android

我正在开发一个 Android 警报应用程序，当警报响起时，我会在其中启用通知 LED。我发现它只有在屏幕背光关闭时才会亮起。是否可以一直启用通知 LED，无论屏幕处于何种状态。然后在警报停止时禁用它。

谢谢

# android - 如何围绕圆周旋转图像？

> ID：14423492
> 
> 赞同：1
> 
> 时间：2013-01-20T10:12:51.497
> 
> 标签：android, rotation, geometry, rotateanimation

我是新手，所以不要怪我。我正在尝试开发一个可以制作音乐的 android 应用程序。我正在尝试制作一个在以圆形形式显示的一堆按钮上旋转的条形图，并且当它播放每个按钮所代表的声音时。但是到目前为止，我设法通过设置代表圆心的 x 和 y 坐标来使图像围绕屏幕中间旋转，但是当我尝试输入公式时 (x + radius*sin(angle)), (y + radius*cos(angle))，它只是移动我想在那个点旋转的图像。所以基本上我试图围绕由按钮或坐标定义的圆圈而不是实际的圆圈图像来旋转图像。所以我需要围绕一个圆圈旋转一个图像或图像视图，而不仅仅是一个点。

我也添加了代码，所以你可以看看我做错了什么。

`ImageView bara = (ImageView) findViewById(R.id.floating_image);`

`layoutParams[9] = new RelativeLayout.LayoutParams`

`(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);`

```
 toop = Math.round(size.x/2);      // + 90*Math.sin(ANGLE)); 
        lefft = Math.round(size.y/2);    // + 90*Math.cos(ANGLE)); 
        top = (int) toop;
        left = (int) lefft;
        layoutParams[9].setMargins(top, left, 0, 0);
        bara.setLayoutParams(layoutParams[9]);
        RotateAnimation rAnim = new RotateAnimation(0.0f, 360.0f, Animation.RELATIVE_TO_SELF,  0 , Animation.RELATIVE_TO_SELF, 0);
        rAnim.setRepeatCount(Animation.INFINITE);
        rAnim.setInterpolator(new LinearInterpolator());
        rAnim.setDuration(8000);
        bara.startAnimation(rAnim); 
```

任何帮助将非常感激 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:53:42.730

x^2 + y^2 = r^2

参考： http: [//www.mathwarehouse.com/geometry/circle/equation-of-a-circle.php](http://www.mathwarehouse.com/geometry/circle/equation-of-a-circle.php)

对于您选择的 r 值（圆的半径），您应该围绕满足该方程的所有 (x,y) 为对象的中心设置动画。

我不是图形专家，所以请原谅我的回答过于简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T07:43:26.093

代码如下：

```
 private float mCalcX;//x-coord of object
    private float mCalcY;//y-coord of object
    private double mCenterX;//x-coord of center of circle
    private double mCenterY;//y-coord of center of circle
    private double mRadius;//circle radius
    private double mAngleRadians;//angle of your object to draw in RADs

    // whenever you draw the object, calculate the new X and Y coords
    mCalcX = (float) (mCenterX+(mRadius*Math.cos(mAngleRadians)));
    mCalcY = (float) (mCenterY+(mRadius*Math.sin(mAngleRadians)));

    public void setRadius(double r)
    {
        mRadius = r;
    }

    public void setStartingAngle(double radians)
    {
        mAngleRadians = radians;
    }

    public void setRotationSpeed(double radians)
    {
        mRotationSpeed = radians;
    }

    public void increaseRotationAngle()
    {
        mAngleRadians += mRotationSpeed;
    }

    public void decreaseRotationAngle()
    {
        mAngleRadians -= mRotationSpeed;
    } 
```

# android - Android Eclipse 工具包何时运行 lint？

> ID：14423498
> 
> 赞同：1
> 
> 时间：2013-01-20T10:13:14.917
> 
> 标签：android, lint

我刚刚完成了第一个Android 编程[入门应用程序，并注意到一些奇怪的行为：](http://developer.android.com/training/basics/firstapp/index.html)

当第二个活动生成时，它收到以下行：

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

在 onCreate 函数中。正如教程指出的那样，这一行至少需要 API 级别 11 和一个防护，并且应该像这样添加 @SuppressLint("NewApi") ：

```
@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_message);

    // Make sure we're running on Honeycomb or higher to use ActionBar APIs
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
} 
```

奇怪的是，忽略这个建议，只是点击运行，一开始效果很好，但是一旦我对代码进行了更改，它就不再工作了，而且我得到了错误。

那么 lint 何时真正处于活动状态？

# php - 如何在不同的时隙中获取数组

> ID：14423501
> 
> 赞同：1
> 
> 时间：2013-01-20T10:14:07.813
> 
> 标签：php, arrays, time, multidimensional-array

我有一个二维数组，如下所示：

```
array( array(), array(), array(), array(), array(), array() ); 
```

我必须在一天 8 小时的时间段中访问**0,1,2 个索引数组**，如果用户请求值与第一个 8 小时时间段中的数组值匹配，那么他将获得第 3 个索引数组，否则为第 0 个索引数组，如果相同的用户请求在接下来的第 8 小时时隙再次，然后他将获得第 4 个索引数组。如果有新请求与数组中的值不匹配，那么他们会得到预定的索引数组，即

*   从上午 12:00 到上午 8:00，他们得到 Array( 0 => array() )，

*   从上午 8:00 到下午 16:00，他们得到 Array(1 => array())，

*   从下午 16:00 到 23:59，他们得到 Array(2 => array())。

我已经使用 if else 条件实现了这一点，但使用了硬线时序条件：

```
$params = array(); //main array

$pn = $_REQUEST['pn'];
$ad = new time_slot();

$time = date("H");
if ( $pn == $ad->ad_filter( $params, 0 ) ) { //ad_filter extract value from array and match request user value
        if ( $time < 8 ) {
            echo $ad->ad_data( $params, 1 ); //ad_data throw an array from multi-dimensional array 
        } else {
            echo $ad->ad_data( $params, 3 );
        }
    } elseif ( $pn == $ad->ad_filter( $params, 1 ) ) {
        if ( $time > 8 && $time < 16 ) {
            echo $ad->ad_data( $params, 2 ); //after 8 hour
        } else {
            echo $ad->ad_data( $params, 4 );
        }
    } elseif ( $pn == $ad->ad_filter( $params, 2 ) ) {
        if ( $time > 16 && $time < 24 ) {
            echo $ad->ad_data( $params, 0 ); //after 16 hour
        } else {
            echo $ad->ad_data( $params, 5 );
        }
    } elseif ( !in_array($pn, $ad->ad_filter( $params ))) { //if request is new
        if ( $time < 8 ) {
            echo $ad->ad_data( $params, 0 );
        } elseif ( $time > 8 && $time < 16 ) {
            echo $ad->ad_data( $params, 1 );
        } elseif ( $time > 16 && $time < 24 ) {
            echo $ad->ad_data( $params, 2 );
        } else {
            echo $ad->ad_data( $params, 3 );
        }
    } 
```

但是，如果必须在两个槽中抛出数组，即在 12 小时槽中或如果在 4 小时槽中，那么我必须再次编码条件，这对我来说是可悲的。所以我为这个场景创建了一个函数包装器：

使用 sizeof 计算数组并​​在所有迭代中循环它：

```
function array_scheduling( $params = array() ) {

    for ($i=0; $i<sizeof($params)/2; $i++) {
      if ($pn == $ad->ad_filter($params, $i)) {
        if ($time < (24/(sizeof($params)/2))*($i+1)) {
            echo $ad->ad_data( $params, $i++ );
        } else {
            echo $ad->ad_data( $params, $i+=3 );
        }
        } elseif (!in_array($pn, $params)) {
        echo $ad->ad_data( $params, $i );
        }
    }
} 
```

这只是一次尝试，但它有点不起作用，因为如果用户请求值与最后一个数组元素值匹配，那么我必须抛出第一个数组。我可以使用`if/else`条件成功地做到这一点，但将来如果有更多插槽，那么我如何使用包含抽象定义的函数来实现它。

# json - Jax-RS API POST 和 GET 方法（RESTful 服务）

> ID：14423503
> 
> 赞同：1
> 
> 时间：2013-01-20T10:14:27.453
> 
> 标签：json, post, get, jax-rs, restful-architecture

![在此处输入图像描述](../Images/ff5ae3a3a15d0bad17ece66dea54d33d.png)

我有一个关于 JAX-RS 的项目（作业）。我正在使用 NetBeans、Jersey 和 Tomcat。例如在 post 方法中： `'{"user":{"username":"accavdar", "gender":"M", "birthDate":"06.11.1982"}}'` 当这样的请求到来时，我必须解析这个输入并将新用户添加到我的系统中。样本响应必须是：

```
{
    "meta": {
        "code": 200
    },
    "data": {
        "message": "You successfully created a user."
    }
} 
```

预期的错误可能是这样的：

```
{
    "meta": {
        "code": 101,
        "type": "FieldError",
        "errors": [
            {
                "fieldName": "fullname",
                "rejectedValue": null
            }
        ]
    }
} 
```

另一个问题是：使用 Get 方法，开发者可能想要列出系统中的所有用户。响应必须是这样的：

```
{
  "meta": {
    "code": 200
  },
  "data": [
    {
      "id": 1,
      "username": "sample",
      "fullname": "sample",
      "gender": "M",
      "birthDate": "12.02.1990"
    },
    {
      "id": 2,
      "username": "sample",
      "fullname": "sample",
      "gender": "M",
      "birthDate": "21.09.1940"
    }
  ]
} 
```

我想将用户保留在文本文件中，保留用户的方式没有限制。（您可以保留在数据库或内存中）但我不知道如何处理请求输入并生成这样的响应。我不想让你做我的功课，但是有人可以就我的问题给点建议吗？

注意：我们将只使用 JSON`"Content-Type: application/json" "Accept: application/json"`

编辑：#Bogdan，非常感谢您的回答。我搜索了您提供的网站。我想了解该输出是如何产生的？：

```
{
    "meta": {
        "code": 200
    },
    "data": {
        "message": "You successfully created a user."
    }
} 
```

或者

```
{
  "meta": {
    "code": 200
  },
  "data": {
    "id": 1,
    "username": "jack",
    "fullname": "jack",
    "gender": "M",
    "birthDate": "12.12.2012"
  }
} 
```

我有“元”和“用户”类。

```
@XmlRootElement(name="data")
public class User {

    @XmlElement
    public int id ;
    @XmlElement
    public String username;
    @XmlElement
    public String fullname;
    @XmlElement
    public String gender;
    @XmlElement
    public String birthDate;

    public User(){

    }

@XmlRootElement(name="meta")
public class Meta {

    @XmlElement
    int code=200;

    public Meta(){

    } 
```

我也有这个 jaxbcontextresolver 类

```
@Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext>{

    private JAXBContext context;
    private Class[] types = {User.class, Meta.class};

    public JAXBContextResolver() throws Exception {

        this.context = 
        new JSONJAXBContext(  JSONConfiguration.mapped().nonStrings("id").nonStrings("code").build(), types); 
    }

    @Override
    public JAXBContext getContext(Class<?> objectType) {
         for (Class type : types) {
             if (type == objectType) {
                 return context;
             }
         }

        return null;

    }

} 
```

但是如何创建这个响应结构，有什么帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:33:36.070

您的应用程序与用户一起工作。这是您的应用程序处理的资源，您的客户端与之交互以创建、更新、删除和获取（基本上是[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)）。

[但是用户是一种抽象资源，因此您的服务器和客户端通过使用此资源的表示来](http://en.wikipedia.org/wiki/Representational_state_transfer)相互交互。表示可以是 JSON 格式（如您的示例中）、XML 等。您的客户端指定它想要的表示类型，服务器指定它通过`Content-Type`. 请求/响应的正文与内容类型匹配。

这是一个 Java 应用程序，因此在您的应用程序代码中，用户表示为 Java 对象。您需要将请求/响应主体转换为带有 getter 和 setter 的对象。[您可以使用 JAXB 进行 XML 转换，使用 Jackson 之类的库可以转换 JSON](http://jersey.java.net/nonav/documentation/latest/json.html)。您当然可以手动完成并将字符串解析为对象并从对象输出字符串，但这会更有效。

客户端提交 JSON，转换后您将拥有可以处理的 Java 对象。您可以将它们保存在应用程序范围映射内的内存中，或者将它们写入文件或数据库中并再次更改它们的表示形式。

您的应用程序会将 URL 绑定到将请求表示转换为对象的特定操作，对对象执行操作，然后将它们返回以再次转换为客户端期望的表示。

以上只是基本的解释。如果您遵循一些[JAX-RS 教程](http://jersey.java.net/nonav/documentation/latest/index.html)（例如，快速搜索返回[REST with Java (JAX-RS) using Jersey - Tutorial](http://www.vogella.com/articles/REST/article.html) or [REST: CRUD with JAX-RS (Jersey)）](http://www.suryasuravarapu.com/2009/03/rest-crud-with-jax-rs-jersey.html) ，您的所有问题都可以得到解答。我相信有其他很多）。您的问题太开放了，所以当您遇到障碍时，只需深入了解并返回有关 stackoverflow 的特定问题。

**编辑：**您似乎对此有点挣扎，所以我将添加一个基本服务来帮助您入门，比如说用户列表。

到目前为止，您没有提及您的服务等级。这是重要的，例如：

```
package com.test;

import java.util.ArrayList;
import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/api")
public class Test {

    @GET
    @Path("/users")
    @Produces({ MediaType.APPLICATION_JSON })
    public UsersResponseWrapper getUsers() {
        List<User> users = new ArrayList<User>();

        User u1 = new User();
        u1.setId(1);
        u1.setFullname("Joe Doe");
        u1.setGender("M");
        u1.setUsername("joe.doe");
        u1.setBirthDate("1919-12-12");

        User u2 = new User();
        u2.setId(1);
        u2.setFullname("John Smith");
        u2.setGender("M");
        u2.setUsername("john.smith");
        u2.setBirthDate("1990-01-01");

        users.add(u1);
        users.add(u2);

        UsersResponseWrapper resp = new UsersResponseWrapper();
        resp.setMeta(new Meta(200));
        resp.setData(users);

        return resp;
    }
} 
```

然后你的用户和元类：

```
package com.test;

public class Meta {
    private int code;

    public Meta(int code) {
        this.code = code;
    }

    public Meta() {
        this.code = 200;
    }

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }
}

package com.test;

public class User {
    private int id;
    private String username;
    private String fullname;
    private String gender;
    private String birthDate;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getFullname() {
        return fullname;
    }

    public void setFullname(String fullname) {
        this.fullname = fullname;
    }

    public String getGender() {
        return gender;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }

    public String getBirthDate() {
        return birthDate;
    }

    public void setBirthDate(String birthDate) {
        this.birthDate = birthDate;
    }

} 
```

JAXB 提供者：

```
package com.test;

import java.util.ArrayList;

import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;
import javax.xml.bind.JAXBContext;

@Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext> {
    private JAXBContext context;
    private static Class<?>[] types = {UsersResponseWrapper.class, User.class, Meta.class, ArrayList.class};

    public JAXBContextResolver() throws Exception {
        this.context = JAXBContext.newInstance(types);
    }

    @Override
    public JAXBContext getContext(Class<?> objectType) {
         for (Class<?> type : types) {
             if (type == objectType) {
                 return context;
             }
         }
        return null;
    }
} 
```

来自 web.xml 的东西：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
      version="3.0">
 <servlet>
    <servlet-name>RestService</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.test</param-value>
    </init-param>
  </servlet>
  <servlet-mapping>
    <servlet-name>RestService</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

以及结果的包装器：

```
package com.test;

import java.util.List;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class UsersResponseWrapper {
    private Meta meta;
    private List<User> data;

    public Meta getMeta() {
        return meta;
    }

    public void setMeta(Meta meta) {
        this.meta = meta;
    }

    public List<User> getData() {
        return data;
    }

    public void setData(List<User> data) {
        this.data = data;
    }
} 
```

我认为这最后一堂课让你遇到困难，因为你的结果是由元内容和数据内容组成的。请记住，您需要返回对象（来自[Jersey 发行版](http://jersey.java.net/nonav/documentation/latest/chapter_deps.html)的默认 Jackson 映射器将处理它）并且碰巧您有一个复杂的对象。以上应返回此（不包括格式）：

```
{
    "data": [
        {
            "birthDate": "1919-12-12",
            "fullname": "Joe Doe",
            "gender": "M",
            "id": "1",
            "username": "joe.doe"
        },
        {
            "birthDate": "1990-01-01",
            "fullname": "John Smith",
            "gender": "M",
            "id": "1",
            "username": "john.smith"
        }
    ],
    "meta": {
        "code": "200"
    }
} 
```

这就是我可以添加的细节。**毕竟这是你的功课:)**。你做得很好，继续前进。

# javascript - 如何自定义或编辑 OpenLayers.js？

> ID：14423504
> 
> 赞同：1
> 
> 时间：2013-01-20T10:14:37.253
> 
> 标签：javascript, geometry, openlayers, kml

如何自定义或编辑 OpenLayers.js？如何修改由 Openlayers 创建的代码？

例如，我在代码中写了一个带有 id 的 div 标签：

```
<div id="map"></div> 
```

此外，我正在使用一个 kml 文件在我的地图中显示一些点。因此，这些代码由 Openlayers js 文件添加到我的 div 中：

```
<div id="map" class="olMap">
    <div id="OpenLayers.Map_2_OpenLayers_ViewPort" ...>
        <div id="OpenLayers.Layer.Vector_26" ...>
            <g id="OpenLayers.Layer.Vector_26_root" style="visibility: visible;" transform="">
                <g id="OpenLayers.Layer.Vector_26_vroot">
                    <circle id="OpenLayers.Geometry.Point_40" cx="457.56130690092687" cy="33.45180640075705" r="5" style="" fill="#669933" fill-opacity="0.8" stroke="#aaee77" stroke-opacity="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></circle>
                </g>
            </g>
        </div>
    </div>
</div> 
```

但是，我想修改这些代码。我想在每个圆圈标签之前添加一个链接标签。例如：

```
<a href="#" class="something">
    <circle ...></circle>
</a> 
```

我应该怎么办？

* * *

我使用 jquery 的 Wrap 函数来添加标签 a。但它不起作用。我使用此代码将标签添加到圆标签：

```
function warpToCircle() {
    $('circle').wrap('<a href="defualt.aspx" class="b1"/>');
} 
```

而且效果很好，reslt代码是：

```
<a href="Rod_Wells/Rod_Wells.aspx" class="b1">
    <circle ...>
    </circle>
</a> 
```

但是，加了a标签之后circle标签就消失了，不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:54:50.880

我认为这与您的问题有关：[https ://gis.stackexchange.com/questions/10595/clicking-on-a-polygon-opening-a-page-link](https://gis.stackexchange.com/questions/10595/clicking-on-a-polygon-opening-a-page-link)

特别注意未选择作为接受答案的答案。

# c# - 递归扫描根目录下的所有目录，只找到每个文件夹中最新的文件

> ID：14423509
> 
> 赞同：0
> 
> 时间：2013-01-20T10:15:29.307
> 
> 标签：c#

这就是我尝试的，但它只返回根目录下的顶级目录中的最新文件

```
if(Directory.Exists("YourPath"))
foreach (string _tempFiles in Directory.GetDirectories("YourPath")
                       .Select(directory => Directory.GetFiles(directory, "*.*", SearchOption.AllDirectories)
                       .OrderByDescending(File.GetLastWriteTime)
                       .FirstOrDefault())) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:35:03.200

这将返回每个目录（包括根目录）的所有最新文件：

```
var rootDirFile = Directory
    .EnumerateFiles(yourPath, "*.*", SearchOption.TopDirectoryOnly)
    .OrderByDescending(f => File.GetLastWriteTime(f))
    .Take(1);
var allNewestFilesOfEachFolder = Directory
    .EnumerateDirectories(yourParth, "*.*", SearchOption.AllDirectories)
    .Select(d => Directory.EnumerateFiles(d, "*.*")
        .OrderByDescending(f => File.GetLastWriteTime(f))
        .FirstOrDefault());
// put both together, the root-file first
allNewestFilesOfEachFolder = rootDirFile.Concat(allNewestFilesOfEachFolder); 
```

如果目录中没有文件，则文件为`null`，则文件数等于文件夹数。

请注意，Linq 不是正确的工具，`System.IO`因为错误处理很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:49:28.310

我写了一个基本的递归函数来处理这个：

```
// Dictionary: 
//   Key = The directory name.
//   Value = The most recently modified file for that directory.
public static Dictionary<string, string> GetNewestFiles(string directory)
{
  return GetNewestFiles(directory, null);
}

static Dictionary<string, string> GetNewestFiles(string directory, 
                                                 Dictionary<string, string> dictionary)
{
  if(dictionary == null)
    dictionary = new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase);

  try
  {
    var files = from file in Directory.GetFiles(directory)
                select new FileInfo(file);

    var latestFile = files.OrderByDescending(file => { return file.LastWriteTimeUtc; }).FirstOrDefault();

    if (latestFile != null)
      dictionary[latestFile.DirectoryName] = latestFile.FullName;
  }
  catch { }

  foreach (var subDirectory in Directory.GetDirectories(directory))
  {
    try
    {
      GetNewestFiles(subDirectory, dictionary);
    }
    catch { }
  }

  return dictionary;
} 
```

那么你可以这样称呼它：

`var fileDictionary = GetNewestFiles(@"C:\MyFolder");`

# ubuntu - 通过 HTK 进行强制对齐时出错

> ID：14423515
> 
> 赞同：1
> 
> 时间：2013-01-20T10:16:07.330
> 
> 标签：ubuntu, speech, htk

我将进行力对齐，并按照 HTK 书中的教程进行操作。

当我执行 Hvite 命令进行强制对齐时，

```
HVite -a -b sil -m -o SWT -I config/monophn.mlf -H am/hmm5/newMacros config/dgs.dict config/monophn.list mfc/0_1.mfc 
```

我收到以下错误：

```
ERROR [+8220] LatticeFromLabels: word sil not defined in dictionary
FATAL ERROR - Terminating program Hvite 
```

有人遇到过这种情况吗？

我正在使用 Ubuntu 10.0.4、HTK3.4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:51:42.290

正如消息所示，您需要将 sil 添加到字典中：

```
 sil sil 
```

`-b sil`或者，如果您不想在边界上保持沉默，则需要从命令行中删除。

# c# - 尝试使用 c# 反序列化 xml 有效负载时出现问题

> ID：14423523
> 
> 赞同：1
> 
> 时间：2013-01-20T10:17:12.510
> 
> 标签：c#, xml

我正在尝试反序列化来自 api 的 xml。我已经使用 xsd.exe 将 xsd 转换为 c# 类。我正在使用的课程如下：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute("OfficerSearch", Namespace="http://xmlgw.companieshouse.gov.uk/v1-0/schema", IsNullable=false)]
public partial class OfficerSearch {

    private string continuationKeyField;

    private string searchRowsField;

    private OfficerSearchItem[] officerSearchItemField;

    /// <remarks/>
    public string ContinuationKey {
        get {
            return this.continuationKeyField;
        }
        set {
            this.continuationKeyField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(DataType="integer")]
    public string SearchRows {
        get {
            return this.searchRowsField;
        }
        set {
            this.searchRowsField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("OfficerSearchItem")]
    public OfficerSearchItem[] OfficerSearchItem {
        get {
            return this.officerSearchItemField;
        }
        set {
            this.officerSearchItemField = value;
        }
    }
}
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute("OfficerSearchItem", Namespace="", IsNullable=false)]
public partial class OfficerSearchItem : OfficerSearchItemBase {

    private string personIDField;

    private SearchMatch searchMatchField;

    private bool searchMatchFieldSpecified;

    private OfficerSearchItemBase[] duplicateOfficersField;

    /// <remarks/>
    public string PersonID {
        get {
            return this.personIDField;
        }
        set {
            this.personIDField = value;
        }
    }

    /// <remarks/>
    public SearchMatch SearchMatch {
        get {
            return this.searchMatchField;
        }
        set {
            this.searchMatchField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlIgnoreAttribute()]
    public bool SearchMatchSpecified {
        get {
            return this.searchMatchFieldSpecified;
        }
        set {
            this.searchMatchFieldSpecified = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlArrayItemAttribute("DuplicateOfficerSearchItem", IsNullable=false)]
    public OfficerSearchItemBase[] DuplicateOfficers {
        get {
            return this.duplicateOfficersField;
        }
        set {
            this.duplicateOfficersField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlRootAttribute("DuplicateOfficerSearchItem", Namespace="", IsNullable=false)]
public partial class OfficerSearchItemBase {

    private string titleField;

    private string surnameField;

    private string forenameField;

    private System.DateTime dOBField;

    private string postTownField;

    private string postcodeField;

    private string countryOfResidenceField;

    /// <remarks/>
    public string Title {
        get {
            return this.titleField;
        }
        set {
            this.titleField = value;
        }
    }

    /// <remarks/>
    public string Surname {
        get {
            return this.surnameField;
        }
        set {
            this.surnameField = value;
        }
    }

    /// <remarks/>
    public string Forename {
        get {
            return this.forenameField;
        }
        set {
            this.forenameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(DataType="date")]
    public System.DateTime DOB {
        get {
            return this.dOBField;
        }
        set {
            this.dOBField = value;
        }
    }

    /// <remarks/>
    public string PostTown {
        get {
            return this.postTownField;
        }
        set {
            this.postTownField = value;
        }
    }

    /// <remarks/>
    public string Postcode {
        get {
            return this.postcodeField;
        }
        set {
            this.postcodeField = value;
        }
    }

    /// <remarks/>
    public string CountryOfResidence {
        get {
            return this.countryOfResidenceField;
        }
        set {
            this.countryOfResidenceField = value;
        }
    }
} 
```

除OfficerSearchItems 数组外，所有内容都反序列化。这些类对应的 xml 架构是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Companies House XML Gateway Schema -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:include schemaLocation="chbase-v2-3.xsd"/>
    <xs:element name="OfficerSearchRequest">
        <xs:annotation>
            <xs:documentation>Officer Search Request</xs:documentation>
        </xs:annotation>
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="Surname"/>
                <xs:element ref="Forename" minOccurs="0" maxOccurs="2"/>
                <xs:element ref="PostTown" minOccurs="0"/>
                <xs:element ref="OfficerType"/>
                <xs:element name="CountryOfResidence" type="xs:string" minOccurs="0">
                    <xs:annotation>
                        <xs:documentation>Normal country of residence for the officer</xs:documentation>
                    </xs:annotation>
                </xs:element>
                <xs:element ref="IncludeResignedInd" minOccurs="0"/>
                <xs:element ref="ContinuationKey" minOccurs="0"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="OfficerSearch">
        <xs:annotation>
            <xs:documentation>Officer Search Result</xs:documentation>
        </xs:annotation>
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="ContinuationKey" minOccurs="0"/>
                <xs:element ref="SearchRows"/>
                <xs:element ref="OfficerSearchItem" minOccurs="0" maxOccurs="unbounded"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

一些示例输出是：

```
 <OfficerSearch xmlns="http://xmlgw.companieshouse.gov.uk/v1-0/schema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlgw.companieshouse.gov.uk/v1-0/schema http://xmlgw.companieshouse.gov.uk/v1-0/schema/OfficerSearch-v2-3.xsd">
  <ContinuationKey>f80bf6eJyl0ttr1EAUB+C1bbrb6YqXqvF+rdqigSRLV8zbjoKttiqtYH0aJpmTJuhmYibB7qP+5f5mrLIUHwQDH8wl58yZk3j9Ne5xNhSZzApS7+URGT74ztlAyLpuZzVx1rP7RXlUkGntC25/VdQYvu2mKTVugdkA08q2+5VgWaWfaWb4Qq/XO8OG4dxj81V07JK9oRn3sRtjfRSGURwjVGQVEtvCBu4Y+xI7fKGntaxKMtu6M5Qk7/K8zKg5INlkRZLo+em2rNQXTKZlW4jJ/v7k00Z4nMaxTNNsU0TB38rZ1VK5k04Va8uRU7Ll9EVuhzH3l17rouLME11XKs7Wt7I0zEcUBXGksoDGRME4zWWg4mdjGW1R/FyNOFsRtTZtq79Vc9ki7vcnVVvoamYvbLrGHcc8V71dUqX5ulOpk8Ybd8MP9tt4NmWuG3IRttULf3L9LnEoTjrjIvzFlzsHP5LTvTzc23318Z9a+h+hm/ZXsDXCIiyBB8vQhwGsAINVGMJZOAfn4QJchDW4BJfhCvhwFa7BdbgBN+EW3IY7cBfuwX14AOvwEB7BY9iAJ/D0J6I2wvE=</ContinuationKey>
  <SearchRows>35</SearchRows>
  <OfficerSearchItem>
    <Title></Title>
    <Surname>SLATER</Surname>
    <Forename>DAVID STUART</Forename>
    <DOB>1966-09-15</DOB>
    <PostTown>MUCH WENLOCK</PostTown>
    <Postcode>TF13 </Postcode>
    <PersonID>CSeJxNkNFqgzAUhu/3FOK91aTVbZCmCG7gGAxa21uJ5lhDa3RJHPPt1+isvQn/+b6fcBKy+22uzg8oLVq5ddEqcB2QZcuFPG/dY/buvbjOjj6RCwy3k3WdNsz0miLiL4PlZuiAjnBKXKhKsgYQjaWpWzkQf0F3i+lHW8tF4Um1CuxEk/iUJs4hO8b7bCrNxtZ0r8Z8+Iyzt/3oZ2S1EeZqV1oiF/o7ldwuP0dyySEfcpFz+lVVogSVJsRfIOnYGezjw7IIqjUgDyNeehABeFFRMY/j54ihEPArXxN/bpMOlOybguIgCDYojBC+yX9GNDBV1tn0Y4+Dvlf8h2gv/AOdGJNe</PersonID>
    </OfficerSearchItem>
  <OfficerSearchItem>
    <Title></Title>
    <Surname>SLATER</Surname>
    <Forename>PETER THOMAS ANTHONY</Forename>
    <DOB>1960-01-29</DOB>
    <PostTown>PRESTON</PostTown>
    <Postcode>PR2 </Postcode>
    <PersonID>CSeJxNkF1PgzAUhu/9FYR7hMKGLum6kDjjjG7G4YVXpNDT0WwUbIuRfy+FMHbTPO9HetqDN3/VxfkFpUUt1y66D1wHZFEzIU9r9yt99h5dZ0Pu8Bm6/qRNow01rSYI+7OwvukaIIM5EhOKS1oBIok0ZS077M/WNQ3Ja13KOQrHqFZgFfnYpttPJ305vCdHJ9n3sP8ey1PD1nWrBj6+JX19yCfLxkaYi33ajEzon51k9hMT4nMGWZeJjJED56IAtXvC/mzihp7ALmFZ5AGPAHkhYoUHMYAX55x6LHyIKVpCuGIR9qc2bkDJtspJEKAVCqLFop85eVgDVUWZjpu7Ffpa8W/QXvgPvUeVog==</PersonID>
    </OfficerSearchItem>
</OfficerSearch> 
```

任何人都可以阐明正在发生的事情，并给我一些指示/解决方案吗？干杯肖恩。

# scala - 斯卡拉弹簧网络MVC

> ID：14423524
> 
> 赞同：3
> 
> 时间：2013-01-20T10:17:18.557
> 
> 标签：scala, spring-mvc

我有一个 scala 控制器：

```
@Controller
@RequestMapping(Array("/welcome"))
class HelloController{

  @RequestMapping{val method = Array(RequestMethod.GET)}
  def printWelcome(model: ModelMap) = {
    println("IN: printWelcome(..)")
    val greeting = new GreetingBean("Yo!", "Adam")
    model.addAttribute("message", greeting);
    "secure" // sends to the /jsf/secure.xhtml page
  }

  @RequestMapping{val value = Array("/greeting"), val method = Array(RequestMethod.GET)}
  def greeting(model: ModelMap) = {
    println("IN: greeting(..)")
    val greeting = new GreetingBean("Greetings", "Davies")
    model.addAttribute("greeting", greeting);
    "greeting"; // sends to the /jsf/greeting.xhtml page
  }
} 
```

当我打电话时`http://localhost:8080/jsf-spring-guice/welcome`，消息`IN: printWelcome(..)`显示在控制台中，并导航到正确的页面。

当我打电话时，`http://localhost:8080/jsf-spring-guice/welcome/greeting`我得到一个`404`错误。

我尝试以不同的方式在问候方法上指定@RequestMapping：

```
@RequestMapping{val value = Array("greeting"), val method = Array(RequestMethod.GET)}
@RequestMapping{val value = Array("/greeting")}
@RequestMapping(Array("/greeting"))
@RequestMapping(Array("/greeting"), Array(RequestMethod.GET)) 
```

并反编译生成的类，它总是看起来很好。但是我总是对欢迎感到满意，对 /welcome/greeting 总是 202

反编译的 Scala 类有这个：

```
@RequestMapping({"/welcome"}) 
```

和这个：

```
@RequestMapping(value={"/greeting"}, method={org.springframework.web.bind.annotation.RequestMethod.GET}) 
```

我看不出这不应该起作用的任何原因。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:06:24.780

**已解决** ...但在 Spring 文档中找不到答案。

情况是我在`web.xml`

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/welcome/*</url-pattern>
</servlet-mapping> 
```

这意味着映射 '@RequestMapping(Array("/welcome"))' 无效，任何请求`http://localhost:8080/jsf-spring-guice/welcome`都将由标记为 的方法处理`@RequestMapping{val method = Array(RequestMethod.GET)}`。一种默认`get`。

线索是当我进入`http://localhost:8080/jsf-spring-guice/welcome/welcome/greeting/`标记为的方法时`@RequestMapping{val value = Array("/greeting"), val method = Array(RequestMethod.GET)}`被调用。在这一点上，很明显，双重`welcome`意味着有些不对劲。

所以基本上，`url-pattern`它作为 URL 模式的前缀（我们都知道），但问题是具有简单 GET 方法的控制器将作为默认值。

**注意自我**不要使用具有相同请求映射的控制器`url-pattern`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:25:58.963

没有检查和编译，但是方法`@RequestMapping`的注解`printWelcome`也应该有指定的值，即使它是空的（“”）。

指定的值充当过滤器，这可能是问题的原因。

# geokit - 地理编码器成功了吗？

> ID：14423530
> 
> 赞同：2
> 
> 时间：2013-01-20T10:19:10.117
> 
> 标签：geokit, rails-geocoder

Geokit 具有有用的功能：

```
g = Geokit::Geocoders::GoogleGeocoder.geocode [address_1, address_2, city, zip_code, state, country].compact.join(', ')
if g.success == true
  ... 
```

`true`如果 Google 成功对给定地址进行地理编码，Geocoder gem 能否以某种方式返回？

# windows-8 - 空组上的语义缩放灾难性失败

> ID：14423536
> 
> 赞同：0
> 
> 时间：2013-01-20T10:19:47.640
> 
> 标签：windows-8, microsoft-metro

我正在使用带有网格视图和集合视图源的 SemanticZoom 控件。一切正常，直到我尝试选择（“跳转到”）一个空组 - 这会导致未处理的灾难性故障。

[http://social.msdn.microsoft.com/Forums/nb-NO/winappswithcsharp/thread/6535656e-3293-4e0d-93b5-453864b95601](http://social.msdn.microsoft.com/Forums/nb-NO/winappswithcsharp/thread/6535656e-3293-4e0d-93b5-453864b95601)

有谁知道是否有办法解决这个问题 - 如果可以的话，我想“允许”一个空组。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T20:33:40.370

好的，所以我遇到了这个问题并修复了它。我知道这是一个相当古老的线程，但我会回答它以防其他人遇到这个问题。这就是我的做法。

问题似乎是该组设置为`DestinationItem`需要在其中包含项目。在该组为空的情况下，这会造成问题。*当组位于其他填充组之间时**不会*出现此问题，因为它的长度为 0，因此无法定位。当它在末尾（或者可能是开头，没有尝试过）时，这会带来一个问题，因为当鼠标经过视图末尾时/*会针对列表中的最后一个*。*`GridView``ListView`*

 **那么，如何解决它：

您需要为`OnViewChangeStarted`. 在此处理程序中，您将可以访问`SemanticZoomViewChangedEventArgs`.

您需要做的第一件事是找出 Group 是否`targetted`为空。我在`Group`这里使用自定义类，但已将其转换为`IEnumerable`，只是因为我只需要知道其中有多少项目。`Linq`允许我找到`IEnumerable`.

```
using System.Linq;

private void Zoom_OnViewChangeStarted(object sender, SemanticZoomViewChangedEventArgs e)
{
    var group = e.DestinationItem.Item as IEnumerable;
    if (group != null && group.Count() == 0)
    {
        e.DestinationItem.Item = MyViewModel.Groups.Last(itemGroup => itemGroup.Count() > 0);
    }
} 
```

正如您将注意到的，下一步是将 设置为其中包含项目`DestinationItem.Item`的组。`Last`您可能还想处理其中包含项目的 First 组，但这也很容易做到。代替`MyViewModel`，插入您的`ViewModel`. 代替`Groups`，插入您的集合属性。

我希望这对编码有所帮助和快乐！**

# git - git reset - 忽略特定的未跟踪文件

> ID：14423538
> 
> 赞同：6
> 
> 时间：2013-01-20T10:19:58.267
> 
> 标签：git, version-control

通常，我执行`git reset --hard`以`git clean -f` 清除我的分支的修改和构建文件。此命令删除所有未跟踪的文件，这对我来说没问题，但是我想保留的文件很少，例如 .project 或 .settings （用于 eclipse）

这些文件不是存储库的一部分，并在 .gitignore 文件中声明。发出上述命令时有没有办法保留这些文件，或者我应该为此使用不同的命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T10:34:21.473

请注意，应该只删除 git 未知的文件，*而不是*忽略的文件。[`git clean`](http://git-scm.com/docs/git-clean) `-f`

 *只会`git clean -f -x`删除被忽略的文件。

（在所有情况下，a`git clean -n -...`更好，可以预览将要删除的内容）

`git reset`over的优点`git clean`主要是移动 HEAD 和重置*索引*以及工作树。
`git clean`只是关于工作树。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T10:23:15.517

[`git reset`](http://www.kernel.org/pub/software/scm/git/docs/git-reset.html)不会触及被忽略的文件。它主要与`HEAD`指针和索引一起使用。但[`git clean`](http://www.kernel.org/pub/software/scm/git/docs/git-clean.html)邪恶是：

> 从当前目录开始，通过递归删除不受版本控制的文件来清理工作树。

所以答案是：不要使用`git clean`.*

# sql - Google App Engine 自动更新内存缓存

> ID：14423539
> 
> 赞同：0
> 
> 时间：2013-01-20T10:20:06.813
> 
> 标签：sql, database, google-app-engine, memcached

所以这就是问题所在，我创建了一个数据库模型。当我创建模型 a = Model(args)，然后执行 a.put() 时，GAE 似乎会自动更新内存缓存，因为即使我没有访问数据库，所有数据似乎都是最新的。记录缓存中的元素数量也可以显示正确的元素数量。但我没有手动更新缓存。我该如何防止这种情况？干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T11:11:24.187

您可以设置策略功能：

> 自动缓存对大多数应用程序来说很方便，但可能您的应用程序不寻常，并且您想关闭部分或所有实体的自动缓存。您可以通过设置策略函数来控制缓存的行为。

[内存缓存策略](https://developers.google.com/appengine/docs/python/ndb/cache#policy_functions)

那是给新开发银行的。你没有说你使用的是什么语言/数据库，但我相信它们都是相似的。

# java - 为多人游戏获得良好的安全性

> ID：14423542
> 
> 赞同：1
> 
> 时间：2013-01-20T10:20:17.597
> 
> 标签：java, security, sockets

我用eclipse做了一个游戏。我有一个服务器程序和一个客户端程序。客户端使用套接字与服务器通信。如果客户端启动，它会将其用户名和密码发送到服务器。如果组合存在，则客户端可以与服务器通信。并且客户端不断的读取游戏中其他人的等级，不断的发送自己的等级。

我的问题：我怎样才能保护密码或者它已经安全了？客户端是否可以不只是制作自己的 java 程序并使用现有的用户名和密码与服务器通信，而不是发送例如他是 100 级以上的信息。如果是的话如何解决这个问题？我还需要确保其他任何东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T10:25:50.787

保持服务器程序中的敏感状态，并让客户端请求当前值。然后你在服务器上控制它。

如果某人拥有有效的凭据，那么他们就可以执行您的协议允许用户在其上下文中执行的任何操作。这是您必须从服务器程序控制的内容，以防止客户端的意外操作影响整体完整性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:04:20.303

如果是服务器驱动的多人游戏，您可以设计客户端应用程序以请求服务器发回服务器唯一可解密的关卡密钥和客户端可读的关卡编号或密钥。并且在下一个级别更改请求中，使客户端发送先前接收到的级别密钥（即当前）和任何其他所需的参数，以识别客户端的会话状态。

使用这种服务器唯一可解密的关卡密钥，客户端无法修改它并请求在游戏关卡中跳转。反过来，服务器会将下一级密钥和其他相关信息发送回客户端以继续。

虽然可能存在许多活动的客户端会话，但为了验证和验证它们，服务器上应该存在这样的服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T10:56:15.390

> ...我可以知道客户端程序是否是我制作的原始程序吗？

不，您不能……除非您控制安装和运行客户端程序的执行平台。

但是，如果您采用 Pekka 推荐的方法，那就没关系了。具体来说，如果重要状态和在该状态上执行的操作由服务器端处理，那么您可以以这样一种方式实现它，即用户是否入侵客户端并不重要。

但实际上，许多游戏的交互性取决于状态和 UI 之间的快速交互。除非您可以缓解这种情况，否则将状态放在另一个系统上会导致“滞后”问题。

# binding - 手动绑定不起作用

> ID：14423552
> 
> 赞同：2
> 
> 时间：2013-01-20T10:22:03.070
> 
> 标签：binding, ember.js

我对手动绑定有一个奇怪的行为：

```
Ember.bind(App, "value", "App.wife.value"); 
```

更新源时不更新绑定值：

```
App.wife.set('value', 2); // App.value isn't updated 
```

但是当绑定值更新时，源也会更新：

```
App.set('value', 4); // App.wife.value is updated 
```

[http://jsfiddle.net/wooandoo/ZN9Sg/1/](http://jsfiddle.net/wooandoo/ZN9Sg/1/)

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:44:49.410

Hum, it seems like Ember.bind() indeed does not work with global path.

Using `Ember.bind(App, 'value', 'wife.value')` seems to work. Perhaps there is a bug.

# android - 从服务访问共享首选项

> ID：14423553
> 
> 赞同：1
> 
> 时间：2013-01-20T10:22:18.003
> 
> 标签：android, sharedpreferences, android-service

我对android还很陌生。

我的应用程序中有一个活动。我使用共享偏好来存储与该活动相关的一些数据。现在，我如何从另一个服务类访问这些存储的数据？是否可以？

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T10:25:40.803

看到您已经在扩展 Context 的应用程序组件中，您可以简单地使用：

```
SharedPreferences prefs = this.getSharedPreferences("Pref name", Context.MODE_PRIVATE); 
```

确保你在 .in 或之​​后调用它`onCreate()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:30:59.900

看看这里[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

您只能在同一应用程序 ID 中访问 SharedPreferences。

如果你想从另一个应用程序的上下文中访问它，你可以将模式设置为世界可读（但在 API 17 中强烈不推荐和弃用）。

# sql - 如何从 3 个表中选择特定数据？[PostgreSQL 9.1]

> ID：14423556
> 
> 赞同：3
> 
> 时间：2013-01-20T10:22:59.963
> 
> 标签：sql, postgresql, select, join, postgresql-9.1

```
# select * from users ;
 user_id | login  |          email          | password | firstname | lastname 
---------+--------+-------------------------+----------+-----------+----------
       1 | katie  | katie.s@ymail.com       | secret   | Katie     | Secret
(1 row)

# select * from forum;
 forum_id | forum_name | group_id | forum_parent 
----------+------------+----------+--------------
         1|  1st forum |        1 |            -1
(1 row)

# select * from groups;
 group_id |      group_name       |                group_description                | group_founder 
----------+-----------------------+-------------------------------------------------+---------------
        1 | Java programming      | System.out.println("Hello world in Java!"); :)  |             1
(1 row) 
```

我的数据库中有这 3 个表。我想从中获得由用户创建的论坛`id = 1`。这该怎么做？（在表中`groups`，`id`创建此类组的用户被称为`group_founder`）。

我的意思是，通过上面的输出，您可以看到该用户`id = 1`创建了一个“Java 编程”组，然后在该组中创建了一个论坛，称为“第一个论坛”。请帮忙 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:27:06.403

试试这个

```
SELECT *
FROM forum f
JOIN groups g ON g.group_id = f.group_id
JOIN users u ON u.user_id = g.group_founder 
WHERE u.user_id = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T10:29:49.063

根据您的输入，查询可能是这样的

```
SELECT U.login,U.email,U.firstname
FROM users U JOIN groups G ON U.user_id = G.group_founder
             JOIN forum F ON G.group_id = F.group_id
WHERE U.user_id = 1 
```

[演示](http://sqlfiddle.com/#!6/dbd85/2)

# python - 关闭没有 socket.close() 的 UDP 套接字

> ID：14423563
> 
> 赞同：5
> 
> 时间：2013-01-20T10:24:35.110
> 
> 标签：python, sockets, shell, ubuntu

**有一个打开UDP套接字**的python程序

 **```
receiveSock = socket(AF_INET, SOCK_DGRAM)
receiveSock.bind(("", portReceive)) 
```

有时会发生程序失败或者我在运行时终止它并且它没有达到

```
receiveSock.close() 
```

所以下次我尝试运行这个程序时，我得到了

```
receiveSock.bind(("",portReceive))
  File "<string>", line 1, in bind
socket.error: [Errno 98] Address already in use 
```

如何使用 shell 命令（或任何其他有用的想法）关闭此套接字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T10:48:49.910

你有两个选择：

```
try:
   # your socket operations
finally:
   # close your socket 
```

或者，对于较新版本的 Python：

```
with open_the_socket() as the_socket:
   # do stuff with the_socket 
```

当[`with statement`](http://effbot.org/zone/python-with-statement.htm)块完成或程序退出时，将关闭套接字。**

# excel - Excel - 搜索列以查找文本是否匹配并计算字符串

> ID：14423565
> 
> 赞同：2
> 
> 时间：2013-01-20T10:24:51.773
> 
> 标签：excel, formula, worksheet

我想将一个工作表中的值添加到另一个工作表。

第一个工作表（“2011 年 11 月”）仅包含名称和状态，但是名称是重复的，并且需要在第二个工作表（“销售”）上添加一定百分比的字符串。

例如“2011 年 11 月”

```
 A           B
1   Name        Status
2   McDonalds   Completed
3   McDonalds   Won
4   Burger King Won
5   Burger King Won
6   Wendys      Completed
7   iHop        Completed
8   iHop        Completed 
```

第二个工作表（“销售”）包含 3 列名称、已完成和已赢。但是，名称已删除重复项。

例如“销售”

```
 A           B           C
1   Name        Completed   Won
2   McDonalds   
3   Burger King 
4   Wendys      
5   iHop 
```

我希望“销售”工作表看起来像这样：

```
 A           B           C
1   Name        Completed   Won
2   McDonalds   50%         50%
3   Burger King 0%          100%
4   Wendys      100%        0%
5   iHop        100%        0% 
```

只是想知道使用什么公式？它需要检查名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:46:02.730

我会使用一个[`countif`](http://office.microsoft.com/en-us/excel-help/countif-HP005209029.aspx)函数来查找销售数量并[`countifs`](http://office.microsoft.com/en-us/excel-help/countifs-function-HA010047494.aspx)查找获胜和完成的数量。

```
=COUNTIFS('November 2011'!$A:$A, A2, 'November 2011'!$B:$B, "won") 
  / COUNTIF('November 2011'!$A:$A,A2) 
```

如果格式化为**won** ，这将为您提供比率或百分比。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:54:09.300

另一种选择是使用带有 AVERAGE 函数的“数组公式”，即 B2 中的这个公式

`=AVERAGE(IF(November 2011'!$A$2:$A$1000=$A2,IF('November 2011'!$B$2:$B$1000=B$1,1,0)))`

用 CTRL+SHIFT+ENTER 确认并上下复制

# wpf - 如何在 VB.NET/WPF 应用程序中使用全局字典来保存来自不同窗口的数据？

> ID：14423568
> 
> 赞同：2
> 
> 时间：2013-01-20T10:25:32.910
> 
> 标签：wpf, vb.net, wpf-controls, vb.net-2010

我是 VB.NET 和 WPF 的新手。

我正在构建一个“问卷调查”应用程序。将按顺序向用户呈现不同的问题/任务（窗口）。在他们对每个问题/任务做出回应并按下“提交”按钮后，将打开一个包含新问题/任务的新窗口，而之前的窗口将关闭。在每个问题之后，当按下按钮时，我需要将数据存储到某个全局对象。回答完所有问题后，该对象的数据应写入输出文件。

我发现 Dictionary 将是在每个窗口之后存储结果的最佳选择。

我不确定如何、在哪里创建这个全局字典以及如何访问它。我应该使用视图模型吗？如果是，你能举个例子吗？或者，它应该只是一个具有共享属性的简单类吗？（像[这样](https://stackoverflow.com/questions/5657053/pass-data-between-wpf-windows)）

**编辑2：我尝试了许多在线推荐的不同方式**

全球模块：

```
Module GlobalModule
   Public Foo As String
End Module 
```

全局变量：

```
Public Class GlobalVariables
   Public Shared UserName As String = "Tim Johnson"
   Public Shared UserAge As Integer = 39
End Class 
```

全局属性：

```
Public Class Globals

Public Shared Property One As String
    Get
        Return TryCast(Application.Current.Properties("One"), String)
    End Get
    Set(ByVal value As String)
        Application.Current.Properties("One") = value
    End Set
End Property

Public Shared Property Two As Integer
    Get
        Return Convert.ToInt32(Application.Current.Properties("Two"))
    End Get
    Set(ByVal value As Integer)
        Application.Current.Properties("Two") = value
    End Set
End Property

End Class 
```

这是我将数据保存到第一个窗口中的全局变量/属性的地方。在关闭旧窗口并打开新窗口之前，我需要在此子例程中存储数据。我使用 MessageBox 只是为了测试。

```
Private Sub btnEnter_Click(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles btnEnter.Click

    Dim instructionWindow As InstructionsWindow

    instructionWindow = New InstructionsWindow()

    Application.Current.Properties("number") = textBoxValue.Text

    Globals.One = "2"
    Globals.Two = 3

    MessageBox.Show("GlobalVariables: UserName=" & GlobalVariables.UserName & " UserAge=" & GlobalVariables.UserAge)

    GlobalVariables.UserName = "Viktor"
    GlobalVariables.UserAge = 34

    GlobalModule.Foo = "Test Foo"

    'testing if it saved tha value
    'MessageBox.Show(Application.Current.Properties("number"))

    Application.Current.MainWindow.Close()

    instructionWindow.ShowDialog()

End Sub 
```

下一个子例程是我试图从第二个窗口中的全局属性/变量中检索值的地方，但消息框显示为空。还有可能是我以错误的方式分配值，或者没有以正确的方式读取它们（强制转换？）：

```
Private Sub FlowDocReader_Initialized(ByVal sender As Object, ByVal e As System.EventArgs) Handles FlowDocReader.Initialized

    ' Get a reference to the Application base class instance.
    Dim currentApplication As Application = Application.Current

    MessageBox.Show(currentApplication.Properties("number"))

    MessageBox.Show("One = " & Globals.One & " Two = " & Globals.Two)

    MessageBox.Show("GlobalVariables: UserName=" & GlobalVariables.UserName & " UserAge=" & GlobalVariables.UserAge)

    MessageBox.Show("GlobalModule.Foo = " & GlobalModule.Foo)

    Dim filename As String = My.Computer.FileSystem.CurrentDirectory & "\instructions.txt"

    Dim paragraph As Paragraph = New Paragraph()
    paragraph.Inlines.Add(System.IO.File.ReadAllText(filename))
    Dim document As FlowDocument = New FlowDocument(paragraph)
    FlowDocReader.Document = document

End Sub 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:26:45.543

您可以`Dictionary`为表单创建公共属性并将字典放入此属性或使用参数创建构造 `Dictionary`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:29:43.867

你已经有了这本词典，[请看](http://msdn.microsoft.com/en-us/library/system.windows.application.properties.aspx)`Application.Properties`
这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:57:05.777

首先，您可以在表单开头或模块中定义字典（列表列表）如下

```
 Dim dic As New Dictionary(Of String, List(Of String)) 
```

当用户在表单上完成问题时，将特定的表单编号和查询结果写入 dic 中的单个记录，然后再转到下一个表单（将此代码放入“下一步”按钮）：

```
 'Assume q1response=3, q2response=4,..., qpresponse="text", etc.
 Dim myValues As New List(Of String)
 myValues.Add(formname)
 myValues.Add(q1response)
 myValues.Add(q2response)
 .
 .
 myValues.Add(qpresponse)
 dic.Add(username, myValues) 
```

当用户完成后，字典中会有多条记录，每条记录都以他们的名字开头，然后是问题响应。您可以遍历多个字典记录，其中每条记录都用于使用以下内容的用户：

```
For Each DictionaryEntry In dic 'this loops through dic entries
  Dim str As List(Of String) = DictionaryEntry.Value
    'here you can do whatever you want with results while you read through dic records
    'username will be = str(0)
    'formname will be str(1)
    'q1 response on "formname" will be str(2)
    'q2 response on "formname" will be str(3)
    'q3 response on "formname" will be str(4)
    ...

Next 
```

诀窍是会有多个字典记录与一个用户的结果，其中记录一个可以有像“John Doe，page1，q1，q2，q3”这样的结果，记录2将是“John Doe，page2，q4，q5， q6。” 具体来说，上述循环中的“str”将是一个字符串数据数组，其中包含每个字典记录内的所有项目，即在str(0)、str(1)、str(2)、...您需要使用或移动、保存、分析等的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T00:50:45.603

您始终可以将我提供的所有代码放在一个类中（它将独立于任何形式），并且标注 sic 是此类中的一个子新，并在同一个类中自己的子中更新 .Add values 行）。然后将更新程序调暗为新的 MyNewClassName。使用 Call Updater.SubNameWithAddValues(q1,q2,...qp) 在每个继续按钮中调用 Updater。由于您使用特定的课程，因此您在程序中的哪个位置并不重要。我在代码中注意到的一件事是，您只能使用一次添加“密钥”或用户名的行，因此在最后一次查询后使用它 - 所以将它放在新类的 Sub Finished 中并调用为 Call Updater.Finished(用户名,q30,q31,last)

# java - 何时使用 Android AlarmManager？

> ID：14423573
> 
> 赞同：1
> 
> 时间：2013-01-20T10:25:47.557
> 
> 标签：java, android, android-alarms

我还没有时间深入研究 AlarmManager，以及它在低级别上是如何工作的。我担心这个 API 的效率、费用和任何替代方案。任何人都可以对此事有所了解。具体来说，将 AlarmManager 设置为每隔几秒（至少 2-3 秒）运行一次 IntentService 是否有效？还是使用服务更好，并创建一个具有循环并每隔几秒暂停的不同线程？或者还有其他替代方案吗？

如果有人能分享一些关于使用 AlarmManager 或 Service 或任何其他方法的电源和内存消耗比较的见解，那就太好了。

我使用 AlarmManager 每隔几秒调用一次 IntentService 来运行一段代码，检查目标文件夹中是否有新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:35:26.177

您不应该使用 AlarmManager 甚至 IntentService 检查目标文件夹中是否有新文件。Android 有[FileObserver](http://developer.android.com/reference/android/os/FileObserver.html)类可以在没有繁忙循环的情况下检查这一点。

```
FileObserver observer = new FileObserver("path/to/target", FileObserver.CREATE) {
    @Override
    public void onEvent(int event, String filename) {
        if (event == CREATE) {
            Log.i("Info", filename + " has been added to folder");
        }
    }
};
observer.startWatching(); 
```

# python - 通过字典中的键计算值

> ID：14423574
> 
> 赞同：0
> 
> 时间：2013-01-20T10:25:47.700
> 
> 标签：python, dictionary

我寻找可以（自动）在不使用元素列表的情况下计算 dict 中的值的东西

```
d = {}

d["x1"] = "1"
{'x1':'1'}

d["x1"] = "2"
{'x1':'2'}

d["x1"] = "3"
{'x1':'3'}

d["x2"] = "1"
{'x1':'3', 'x2':'1'} 
```

等等。。

我尝试使用它们创建一个列表

```
for x in list:
    d[x] = list.count(x) 
```

但是当我创建一个列表时，我收到一个内存错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:27:59.720

您确定要使用 a`dict`来执行此操作吗？似乎[Counter](http://docs.python.org/2/library/collections.html#collections.Counter)或[defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)更适合您的需要。

```
>>> d = collections.Counter()
>>> d['x1'] += 1
>>> d
Counter({'x1': 1})
>>> d['x1'] += 1
>>> d
Counter({'x1': 2})
>>> d['x2'] += 1
>>> d
Counter({'x1': 2, 'x2': 1}) 
```

您还可以将序列转换为计数器：

```
>>> collections.Counter(['x1', 'x1', 'x2'])
Counter({'x1': 2, 'x2': 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:32:04.343

使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
>>> d = defaultdict(int)
>>> d['foo'] += 1
>>> d['foo'] += 1
>>> d['bar'] += 1
>>> for i in d:
...   print i,d[i]
... 
foo 2
bar 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:09:23.587

您可以通过`dict`以下方式使用 -

```
d['x1'] = d.get('x1', 0) + 1 
```

in 的第二个参数`get`指定在第一个参数中提供的键未找到时要返回的对象。

将此应用于您的示例：

```
from pprint import pprint
d = {}
d['x1'] = d.get('x1', 0) + 1
d['x1'] = d.get('x1', 0) + 1
d['x1'] = d.get('x1', 0) + 1
d['x2'] = d.get('x2', 0) + 1
pprint(d)    # will print {'x1': 3, 'x2': 1} 
```

# android - Android - 插入 SD 卡唯一 ID

> ID：14423577
> 
> 赞同：2
> 
> 时间：2013-01-20T10:26:06.557
> 
> 标签：android, sd-card, android-sdcard

有什么方法可以确保用户在安装应用程序时在他的手机中拥有与他相同的 SD 卡？SD卡的唯一ID有什么东西吗？

谢谢

# php - 如何解析 curl URL、CSS 和图像？

> ID：14423580
> 
> 赞同：0
> 
> 时间：2013-01-20T10:26:40.290
> 
> 标签：php, curl, cross-domain

> **可能重复：**
> [如何以编程方式保存网页？](https://stackoverflow.com/questions/1732318/how-do-i-save-a-web-page-programatically)

我刚从 curl 开始，我已经设法拉出一个外部网站：

```
function get_data($url) {
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch,CURLOPT_USERAGENT, $userAgent);
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  curl_setopt($ch,CURLOPT_FOLLOWLOCATION,true);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}
$test = get_data("http://www.selfridges.com");
echo $test; 
```

但是不包括 CSS 和图像。我还需要检索 CSS 和图像，基本上是整个网站。有人可以发布一个简短的方法让我开始了解如何解析 CSS、图像和 URL 以让我继续前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:28:36.097

有比 PHP 更好的工具来做到这一点，例如。`wget`与`--page-requisites`参数。

但请注意，自动抓取通常违反网站的 TOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:32:31.237

PHP 有 HTML 解析器。有很多可用的，这里有一篇讨论这个的帖子：[你如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)

# jquery - Google Maps InfoBox 未按预期在 iOS 上触发事件

> ID：14423581
> 
> 赞同：1
> 
> 时间：2013-01-20T10:26:58.227
> 
> 标签：jquery, ios, google-maps, google-maps-api-3, mobile-safari

我正在使用信息框。我能够加载所有标记，在每个信息框中加载不同的内容，然后“正确”触发。然后从哪里开始问题：

1) 在桌面/iOS 上，我的 Toggle 事件在第二次点击后才起作用。基本上它会上下移动一个div。请参见下面的代码：

```
//Setting up the marker
 var marker = new google.maps.Marker({
                 map: map,
                 draggable: false,
                 position: latlng6,
                 visible: true
                });

                var boxText = document.createElement("div");
                boxText.class = "test";
                boxText.style.cssText = "height: 0px;";
                boxText.innerHTML =  "<div id='top'><p>SUSSAN</p><a href='#' class='info'>+ info</a>" 
                                    + "<h2></h2>"
                                    + "</div>" 
                                    + "<div id='promo'>"
                                    + "<div class='badge'>"
                                    + "<img src='hot@2x.png'>"
                                    + "</div>"
                                    + "<p>TODAY UP TO 70% OFF</p>"
                                    + "</div>";

                var myOption = {
                         content: boxText
                        ,disableAutoPan: false
                        ,maxWidth: 0
                        ,pixelOffset: new google.maps.Size(-128, -161)
                        ,zIndex: null
                        ,boxStyle: { 
                          background: "url('') no-repeat"
                          ,opacity: 1
                          ,width: "280px"
                          ,height: "0px"

                         }
                        ,closeBoxMargin: "36px 25px 0px 0px"
                        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
                        ,infoBoxClearance: new google.maps.Size(1, 1)
                        ,isHidden: false
                  ,zIndex: 999999
                        ,pane: "floatPane"
                        ,enableEventPropagation: false
                };

                var ib = new InfoBox(myOption);
                boxList.push(ib);

//ANIMATE MORE INFO  
         google.maps.event.addDomListener(boxList[i].content_,'click', function() {

             $("#promo").toggle( function(a) {
             $("#top").animate({top: 14}, 200)},
             function() {
             $("#top").animate({top: 50}, 200);;

          }); 
```

2）在iOS上，即使是第一个问题，当我第一次“点击”div“促销”时，信息框在桌面上消失了，它不会发生。如果我回来，再次打开信息框并点击 div “promo”，它就像桌面一样工作。我相信第二个问题与第一个问题有关。但不确定为什么它只发生在 iOS 上。=/感谢任何帮助。

查看实时示例[http://www.clickin.com.au/fashion/hottie4.html](http://www.clickin.com.au/fashion/hottie4.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:26:45.053

我无法告诉您有关 iOS 问题的任何信息，但关于第一个问题：

切换处理程序在第一次单击**后**附加，这就是第一次单击无法触发切换事件的原因。

您可以直接附加切换，而不是等待第一次点击（用以下代码替换 boxList[i].content_ 的当前点击处理程序）

```
$("#promo",boxList[i].content_)
                .toggle( 
                  function(a) {
                    $("#top").animate({top: 14}, 200);
                  },
                  function() {
                    $("#top").animate({top: 50}, 200);
              }); 
```

# meteor - 流星代理文件到浏览器

> ID：14423584
> 
> 赞同：2
> 
> 时间：2013-01-20T10:27:11.977
> 
> 标签：meteor

我在外部 URL 上有一个文件（只有运行该服务器的流星可以访问）

```
http://192.168.9.39/account_5.pdf 
```

我想在流星中提供这个，以便用户可以点击一个链接，例如`http://server.meteor.com/temp/account_5.pdf`

有没有办法我可以做到这一点？也许直接将其流式传输给用户或将文件下载到文件`/public/temp`夹以便提供服务？我该怎么做？

我愿意接受任何建议，即使它用完了节点模块或其他东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:01:48.680

您是在运行自己的 Meteor 服务器，还是真的想部署到 *.meteor.com？（你说“server.meteor.com”，所以我想知道）。

从节点您可以使用[http.get](http://nodejs.org/api/http.html#http_http_get_options_callback)检索远程文件，然后使用[fs.writeFile](http://nodejs.org/api/fs.html#fs_fs_writefile_filename_data_encoding_callback)将其保存到您的 temp/ 目录。

或者你可以像你建议的那样使用[http://www.catonmat.net/http-proxy-in-nodejs/](http://www.catonmat.net/http-proxy-in-nodejs/)

如果您正在运行自己的服务器，可能最简单的方法是将这段代码打包到一个小的 npm 模块中。Node 在`require`中暴露给 Meteor 代码`__meteor_bootstrap__.require`，因此要触发获取远程文件，您可以执行类似`__meteor_bootstrap__.require('my-npm-module').fetchFileToTemp(name)`.

对于流选项，`__meteor_bootstrap__.app`是 Meteor 的连接服务器，您可以将自己的请求处理程序附加到通过

```
__meteor_bootstrap__.app(function (req, res, next) { ... }); 
```

以通常的方式连接中间件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:24:58.963

如果您将 pdf 放入 /public 文件夹并进行部署，用户只需单击[http://server.meteor.com/account_5.pdf](http://server.meteor.com/account_5.pdf)即可访问 pdf。

这是你所期待的吗？希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:06:45.997

这有点骇人听闻，但是您可以创建一个路由（使用 Meteor Router）来响应`/temp/*`并在加载远程 URL 的那些页面中放置一个 iframe。它不会很优雅，但它会起作用！如果您需要快速完成此操作。

或者你可以做一个跨域 XHR 请求并以这种方式获取文件，这可能更像 Meteor-ish。但我得看那个。;-)

# php - 一页上有多个highcharts

> ID：14423588
> 
> 赞同：0
> 
> 时间：2013-01-20T10:27:34.557
> 
> 标签：php, mysql, ajax, highcharts, each

我希望使用 mysql 数据呈现多个图表，根据特定搜索，会有更多或更少的图表。我已经成功创建了一个图表，并且我的 php 文件很好地呼应了所需的 json 格式。

现在，我想要的是能够遍历一个数组并根据解析到 php 的数组 vales 绘制新的图表，从而提供不同的 json 数据来呈现。

顺便说一句，我的 javasript 非常有限，所以我的代码和想法如下：

```
<script type="text/javascript">
    $(function () {
        var chart;
        var venue = <?php echo json_encode($venue_name); ?>; /* parsed to php file */
        var distances = <?php echo json_encode($data); ?>; /* array to be looped over */
        $(document).ready(function() {

            var options = {
                    ....
                series: []
                    ....
             };

             //
            $.each(distances, function() {
               $.each(this, function(name, value) {
               // do some ajax magic here:... 
                GET 'myphpfile.php?venue='+venue+'&'+distances

                  function drawNewChart(){
                      $('#mainSite').append('<div id="container" style="float:left; display:inline"></div>');

                chart = new Highcharts.Chart(options); 
        });
    });        

    </script> 
```

我了解到的是，我无法循环包含已完成 php 和 jquery 的包含 php 文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:09:15.183

这将创建其他图表。每次你想创建新图表时，你必须像我一样给图表命名`chart2`

粘贴此波纹管，它将为您提供其他图表。

```
 <script type="text/javascript">
$(function () {
    var chart2;
    var venue2 = <?php echo json_encode($venue_name); ?>; /* <---use other variable here of $venue_name */
    var distances2 = <?php echo json_encode($data); ?>; /* <---use other variable of $data */
    $(document).ready(function() {

        var options = {
                ....
            series: []
                ....
         };

         //
        $.each(distances2, function() {
           $.each(this, function(name, value) {
           // do some ajax magic here:... 
            GET 'myphpfile.php?venue2='+venue2+'&'+distances2

              function drawNewChart(){
                  $('#mainSite').append('<div id="container" style="float:left; display:inline"></div>');

            chart2 = new Highcharts.Chart(options); 
    });
});        

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:32:24.363

您可以将图表推送到数组，而不是使用许多变量。

```
var charts = [];
charts.push(new Highcharts(options)); 
```

然后你可以避免使用索引等。

# spring-mvc - Spring mvc url问题

> ID：14423596
> 
> 赞同：1
> 
> 时间：2013-01-20T10:28:49.343
> 
> 标签：spring-mvc

我正在使用 Spring mvc，我遇到了这个问题：

我的控制器中的每个方法都返回一个 jsp 的名称，至于演示文稿 - 一切都很好。问题在于链接（hrefs）。窗口的链接不会改变，而相对链接会将我带到不想要的地方。

例如（不是真实的）：

我有一个可以通过以下方式访问的视图：`/test1/{id}` 以及我可以通过以下方式访问的更新视图`/test1/{id}/update`

post 方法保存并返回第一个视图（让您回到查看屏幕）。演示没问题，我可以看到更新的数据。但是窗口 url 没有改变，如果我再次尝试更新，我会被发送到这个位置： `/test1/{id}/update/update.`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:33:13.420

简短的回答：使用重定向！

你**必须**在做一些持久的事情时使用重定向。我猜您在发布到这些网址时正在修改数据。所以你绝对需要使用重定向。这解决了用户在进行更新后刷新页面时的问题。你有没有注意到浏览器关于重新发送数据的警告？

示例代码：

```
@RequestMapping("/test1/{id}/update")
public ModelAndView update(@PathVariable("id") String id){
    // make an update
    return new ModelAndView("redirect:/test1/" + id);
} 
```

这将向用户发送 301 或 302 HTTP 状态。并且浏览器将立即跟随重定向 url。请注意，您不应使用视图名称，而应使用 url。

# actionscript-3 - Actionscript 3.0 Perfect Collision Detection 注册点中心？

> ID：14423597
> 
> 赞同：1
> 
> 时间：2013-01-20T10:28:53.517
> 
> 标签：actionscript-3, collision-detection

嘿，我有碰撞检测问题我使用了网站[http://www.freeactionscript.com/2009/05/pixel-perfect-collision-detection/](http://www.freeactionscript.com/2009/05/pixel-perfect-collision-detection/)上的这个例子，但它只在你的对象的注册点在上面时才有效左角 如果注册点在中心，我应该在代码中进行哪些更改？

这是代码：

```
package
{
import flash.display.BitmapData;
import flash.display.DisplayObjectContainer;
import flash.geom.Matrix;
import flash.geom.Point;
import flash.geom.Rectangle;

public class CollisionTest 
{
// vars
private var _returnValue:Boolean;

private var _onePoint:Point;
private var _twoPoint:Point;

private var _oneRectangle:Rectangle;
private var _twoRectangle:Rectangle;

private var _oneClipBmpData:BitmapData;
private var _twoClipBmpData:BitmapData;

private var _oneOffset:Matrix;
private var _twoOffset:Matrix;

/**
 * Simple collision test. Use this for objects that are not rotated.
 * @param   clip1   Takes DisplayObjectContainer as argument. Can be a Sprite, MovieClip, etc.
 * @param   clip2   Takes DisplayObjectContainer as argument. Can be a Sprite, MovieClip, etc.
 * @return  Collision True/False
 */
public function simple(clip1:DisplayObjectContainer, clip2:DisplayObjectContainer):Boolean
{
    _returnValue = false;

    _oneRectangle = clip1.getBounds(clip1);
    _oneClipBmpData = new BitmapData(_oneRectangle.width, _oneRectangle.height, true, 0);
    _oneClipBmpData.draw(clip1);

    _twoRectangle = clip2.getBounds(clip2);
    _twoClipBmpData = new BitmapData(_twoRectangle.width, _twoRectangle.height, true, 0);
    _twoClipBmpData.draw(clip2);

    _onePoint = new Point(clip1.x, clip1.y)
    _twoPoint =  new Point(clip2.x, clip2.y)

    if (_oneClipBmpData.hitTest(_onePoint, 255, _twoClipBmpData, _twoPoint, 255))
    {
        _returnValue = true;
    }

    return _returnValue;
}

/**
 * Complex collision test. Use this for objects that are rotated, scaled, skewed, etc
 * @param   clip1   Takes DisplayObjectContainer as argument. Can be a Sprite, MovieClip, etc.
 * @param   clip2   Takes DisplayObjectContainer as argument. Can be a Sprite, MovieClip, etc.
 * @return  Collision True/False
 */
public function complex(clip1:DisplayObjectContainer, clip2:DisplayObjectContainer):Boolean
{
    _returnValue = false;

    _twoRectangle = clip1.getBounds(clip1);
    _oneOffset = clip1.transform.matrix;
    _oneOffset.tx = clip1.x - clip2.x;
    _oneOffset.ty = clip1.y - clip2.y;  

    _twoClipBmpData = new BitmapData(_twoRectangle.width, _twoRectangle.height, true, 0);
    _twoClipBmpData.draw(clip1, _oneOffset);        

    _oneRectangle = clip2.getBounds(clip2);
    _oneClipBmpData = new BitmapData(_oneRectangle.width, _oneRectangle.height, true, 0);

    _twoOffset = clip2.transform.matrix;
    _twoOffset.tx = clip2.x - clip2.x;
    _twoOffset.ty = clip2.y - clip2.y;  

    _oneClipBmpData.draw(clip2, _twoOffset);

    _onePoint = new Point(_oneRectangle.x, _oneRectangle.y);
    _twoPoint = new Point(_twoRectangle.x, _twoRectangle.y);

    if(_oneClipBmpData.hitTest(_onePoint, 255, _twoClipBmpData, _twoPoint, 255))
    {
        _returnValue = true;
    }

    _twoClipBmpData.dispose();
    _oneClipBmpData.dispose();

    return _returnValue;
}

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:56:43.450

好吧，让我们这样说：左上角离中心点有多远？

```
x += width  * .5;
y += height * .5; 
```

正确的？

因此，如果您在上面发布的代码只用左上角处理它（无论出于何种原因，我不知道为什么）为什么不强制它用中心点来处理它呢？

也许是这样的？

```
_onePoint = new Point(clip1.x + _clip.width * .5, clip1.y + _clip.height * .5);
_twoPoint =  new Point(clip2.x + _clip2.width * .5, clip2.y + _clip2.height * .5); 
```

# magento - 创建一个模块 helloworld magento

> ID：14423599
> 
> 赞同：1
> 
> 时间：2013-01-20T10:29:04.297
> 
> 标签：magento

我按照[http://alanstorm.com/magento_controller_hello_world](http://alanstorm.com/magento_controller_hello_world)中的教程进行操作， 但我不知道为什么链接 filipeferminiano.com/lojateste/helloworld 不起作用。这是我的 config.xml

```
<config>    
<modules>
    <ffdotcom_Helloworld>
        <version>0.1.0</version>
    </ffdotcom_Helloworld>
</modules> <frontend>
    <routers>
        <helloworld>
            <use>standard</use>
            <args>
                <module>ffdotcom_Helloworld</module>
                <frontName>helloworld</frontName>
            </args>
        </helloworld>
    </routers>  
</frontend> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:58:05.123

创建：app/code/local/Ffdotcom/Helloworld/etc/config.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <Ffdotcom_Helloworld>
        <version>1.0.0</version>
    </Ffdotcom_Helloworld>    
  </modules>
  <frontend>
    <routers>
        <helloworld>
            <use>standard</use>
            <args>
                <module>Ffdotcom_Helloworld</module>
                <frontName>helloworld</frontName>
            </args>
        </helloworld>
    </routers>  
  </frontend>
 </config> 
```

创建：app/code/local/Ffdotcom/Helloworld/controllers/IndexController.php

```
<?php
class Ffdotcom_Helloworld_IndexController extends Mage_Core_Controller_Front_Action
{

    public function indexAction(){
        echo 'hello world';
    }

} 
```

创建：app/etc/modules/Ffdotcom_Helloworld.xml

```
<?xml version="1.0"?>
<config>
   <modules>
       <Ffdotcom_Helloworld>
            <active>true</active>
            <codePool>local</codePool>
       </Ffdotcom_Helloworld>
   </modules>
</config> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:47:48.270

模块名称中的第一个“f”在xpath中*必须*大写。`frontend/routers/helloworld/args`

# netbeans - Netbeans 常用的代码片段

> ID：14423601
> 
> 赞同：5
> 
> 时间：2013-01-20T10:29:43.237
> 
> 标签：netbeans, netbeans-7

我需要这个：

```
{{ _('') }} 
```

很多时候，一遍又一遍地打字就累了。

是否有一个 netbeans 功能，我可以为此创建一个短代码？Si如果我按下一个组合键它会插入这个东西吗？

而且我不想使用复制和粘贴；）

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-20T10:34:31.053

有。如果你去`tools`--> `options`--> `Editor`--> `Code Templates`，你可以添加一个缩写和扩展文本来制作它。

例如，当我键入`syso`并点击 Tab 按钮时，它会变为`System.out.println("${cursor}");`，光标位于`${cursor}`。

# android - 如何使用 NumberPicker 创建对话框

> ID：14423611
> 
> 赞同：1
> 
> 时间：2013-01-20T10:31:23.437
> 
> 标签：android, dialog

> **可能重复：**
> [数字选择器对话框](https://stackoverflow.com/questions/11800589/number-picker-dialog)

我想创建一个对话框，就像谷歌在这里给出的第一个例子一样：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

这是一个选择数字的简单控件，但我无法弄清楚它是哪个小部件..

![第一个对话框](../Images/004877b689c40a2b0469b92dd942ec63.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:36:37.227

这通常通过内部带有[NumberPicker](http://developer.android.com/reference/android/app/AlertDialog.html)的 AlertDialog类来[实现](http://developer.android.com/reference/android/widget/NumberPicker.html)。

# network-programming - 通过“以太网”适配器进行蜂窝调制解调器数据会话？

> ID：14423612
> 
> 赞同：1
> 
> 时间：2013-01-20T10:31:32.953
> 
> 标签：network-programming, 3g, modem, gprs, umts

大多数 USB 蜂窝调制解调器呈现为包含（除其他外）调制解调器和网络适配器的复合设备。后者显示在网络连接中的“LAN 或高速 Internet”标题下（以及设备管理器中的网络适配器下）。

![在此处输入图像描述](../Images/4071b4b05121e3f266649c294cd161e0.png)

我知道如何使用[标准 AT 命令](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)在调制解调器接口上启动数据会话，但我正在寻找有关（以编程方式）使用网络适配器的信息或文档。

我的调制解调器是 ZTE MF626i 和 Sierra Wireless USB 301。我会很高兴看到这些调制解调器的一般性质或特定的文档。

编辑添加：我使用的是 Windows XP，所以没有移动宽带 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:03:07.250

假设您使用的是 Windows 7 或 8，您可以使用内置的 Windows 界面。使用 VID 和 PID 在 Windows 网络适配器中识别设备（通过检查 Windows 设备管理器中的网络适配器属性手动查找 VID 和 PID）。知道设备后，您可以通过编程方式获取 Windows 设备 ID。

然后使用 Windows Mobile Broadband API 和设备 ID 通过网络适配器进行数据连接。 [http://msdn.microsoft.com/de-de/library/windows/desktop/dd323269(v=vs.85).aspx](http://msdn.microsoft.com/de-de/library/windows/desktop/dd323269(v=vs.85).aspx)

# sqlite - 使用内存中的 sqlite DB 加速单元测试时避免 DB 依赖的建议

> ID：14423613
> 
> 赞同：2
> 
> 时间：2013-01-20T10:31:37.400
> 
> 标签：sqlite, unit-testing, pdo, phpunit, database-testing

我一直在使用`sqlite::memory:`单元测试：它很快，并且可以自动进行测试清理。但我担心我的测试可能会由于 SQL 服务器的假设而丢失错误。（这个特定的代码应该是 DB 中立的，但实际上它*必须*与 MySQL 一起工作。）

作为一个具体示例，我认为 sqlite 的日期字符串输入存储为字符串 (*)，因此它们以完全相同的格式返回给我。而在 MySQL 中，它们似乎被解析、规范化并以一致的格式返回。我更担心的是我没有意识到存在差异。

处理这个问题的最佳方法是什么？例如，也对 mysql 重复所有单元测试（慢 - 有没有办法制作内存中的 MySQL DB？）。只是针对一些关键领域进行mysql测试？依靠使用 MySQL 的功能测试（这是我目前的方法，但覆盖范围更广）。还有什么我没有想到的？

*：如果我给出“2012-12-25 09:12:34”，我会得到那个确切的字符串。如果我给出“2012-12-25 09:12:34 UTC”，我会返回那个确切的字符串（即这次的时区）。如果我给“2012-12-25 09:12:34 hello world”，我会返回“2012-12-25 09:12:34 hello world”:-(

* * *

在这种特殊情况下，我使用的是 PHP、PDO 和 PHPUnit。我追求与语言无关的策略，但值得注意的是，PDO 是一个非常薄的抽象，更多地与抽象连接字符串和低级 API 调用有关。它不会尝试抽象数据库之间的数据类型差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:48:52.007

如果你想测试 MySQL 特定的 SQL 细节，你只需要在 MySQL 上进行测试。

MySQL 有[`MEMORY`存储引擎](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)，但这与其他引擎并不完全兼容。您应该将数据库放在 RAM 磁盘 (tmpfs) 上。

SQLite 没有[日期/时间的专用数据类型](http://www.sqlite.org/datatype3.html#datetime)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:27:16.867

我们通常在我工作的地方做的是将测试拆分为：

*   单元测试：非常快，使用内存数据库（在我的例子中是[H2](http://h2database.com)）。

*   集成测试：速度较慢，使用“真实”数据库，以及额外的（运行时间较长的）测试

在开发过程中，我们只运行单元测试。自动化构建也运行集成测试（但如果您愿意，您可以自己运行它们）。

# php - 如何为默认控制器上的焦点页面设置 Laravel 3 路由？

> ID：14423614
> 
> 赞同：0
> 
> 时间：2013-01-20T10:31:42.533
> 
> 标签：php, redirect, seo, url-routing, laravel

将有几个引人注目的链接供客户关注，例如：

*   联系我们@domain.com/home/contact
*   关于服务@domain.com/home/service
*   定价@ domain.com/home/pricing
*   它是如何工作的@ domain.com/home/how_it_works

类似的东西。我想从 URL 中隐藏**家庭**控制器，以便客户只能看到*/contact/*，而不是*/home/contact/*。与*/pricing/*不是*/home/pricing/相同*

我知道我可以为每个特殊页面设置一个控制器或一个路由，但是除了我想从数据库中提取的内容之外，它们看起来是一样的，我宁愿让我的代码保持干燥。

我设置了以下路线：

```
Route::get('/about_us', 'home@about_us');
Route::get('/featured_locations', 'home@featured_locations'); 
```

哪个效果很好，但如果我在 URL 中与控制器的链接上有重复的内容，我担心 SEO 麻烦。（我不*打算*同时使用两者，但众所周知我会做一些更愚蠢的事情。）

所以然后制作了这样的路线：

```
Route::get('/about_us', 'home@about_us');
Route::get('/home/about_us', function() 
{ 
    return Redirect::to('/about_us', 301);
});

Route::get('/featured_locations', 'home@featured_locations');
Route::get('/home/featured_locations', function() 
{ 
    return Redirect::to('/featured_locations', 301);
}); 
```

现在我有一个重定向。感觉很愚蠢，但它似乎正在按照我想要的方式工作。如果我以较短的 URL 加载页面，它会加载我的内容。如果我尝试访问更长的 URL，我会被重定向。

大概只有8、9个特殊链接，所以我可以轻松管理路线，但我觉得必须有一个聪明的方法来做到这一点。

这甚至是 PHP 问题，还是 .htaccess / web.config 问题？

我用这个重定向方案创造了什么。聪明人是怎么做到的？我一直在寻找两个小时，但我找不到一个术语来描述我在做什么。

laravel 4 中是否有内置的东西可以处理这个问题？

**更新：**

这是我尝试实现其中一个答案的尝试。这**不起作用**，我不知道我做错了什么。

应用程序/routes.php

```
Route::controller('home');

Route::controller('Home_Controller', '/'); 
```

（如果您真的想查看一些损坏的代码，可以查看编辑历史记录）

现在*domain.com/AboutYou*和*domain.com/aboutUs*正在返回 404。但是*domain.com/home/AboutYou*和*domain.com/home/aboutUs*仍然按应有的方式返回。

**最终编辑**

我从[PongoCMS routes.php](https://github.com/redbaron76/PongoCMS-Laravel-cms-bundle/blob/master/routes.php)（基于 Laravel 3）复制了一个想法，我看到他们使用过滤器来获取任何 URI 段并尝试创建一个 CMS 页面。

[请参阅下面使用路由过滤器的答案](https://stackoverflow.com/a/14435311/24229)。这种新方式不需要我注册每条特殊路线（好），但确实放弃了对规范的重定向（坏）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:00:53.640

把它放在 routes.php 中：

```
Route::controller('HomeController', '/'); 
```

这告诉您 HomeController 路由到网站的根目录。然后，您可以从 HomeController 访问任何功能。只要确保在它前面加上正确的动词即可。请记住，laravel 遵循 PSR-0 和 PSR-1 标准，因此方法是驼峰式的。所以你会有类似的东西：

```
domain.com/aboutUs 
```

在 HomeController 中：

```
<?php

class HomeController extends BaseController 
{
    public function getAboutUs()
    {
        return View::make('home.aboutus');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:02:29.637

我使用 routes.php 和过滤器来做到这一点。我从漂亮的 PongoCMS 中复制了这个想法

[https://github.com/redbaron76/PongoCMS-Laravel-cms-bundle/blob/master/routes.php](https://github.com/redbaron76/PongoCMS-Laravel-cms-bundle/blob/master/routes.php)

**应用程序/routes.php**

```
// automatically route all the items in the home controller

Route::controller('home');

// this is my last route, so it is a catch all.  filter it

Route::get('(.*)', array('as' => 'layouts.locations', 'before' => 'checkWithHome', function() {}));

Route::filter('checkWithHome', function()
{
    // if the view isn't a route already, then see if it is a view on the 
    // home controller.  If not, then 404
    $response = Controller::call('home@' . URI::segment(1));
    if ( ! $response )
    {
        //didn't find it
        return Response::error('404');
    }
    else
    {
        return $response;
    }

}); 
```

~~我看到的主要问题是过滤器基本上两次加载所有成功的页面。我没有在文档中看到可以检测页面是否存在的方法。我可能会写一个库来做到这一点。~~

当然，在这个最终版本中，如果我确实找到了一些东西，我可以将它转储到页面上并停止处理路线。这样我只加载一次所有资源。

**应用程序/控制器/home.php**

```
public function get_aboutUs()
{
        $this->view_data['page_title'] = 'About Us';
        $this->view_data['page_content'] = 'About Us';

        $this->layout->nest('content', 'home.simplepage', $this->view_data);
}

public function get_featured_locations()
{
        $this->view_data['page_title'] = 'Featured Locations';
        $this->view_data['page_content'] = 'Featured properties shown here in a pretty row';

        $this->layout->nest('content', 'home.simplepage', $this->view_data);
}

public function get_AboutYou()
{
    //works when I return a view as use a layout
    return View::make('home.index');
} 
```

# image - 分离背景和前景

> ID：14423615
> 
> 赞同：1
> 
> 时间：2013-01-20T10:31:56.730
> 
> 标签：image, matlab, image-processing

我是 Matlab 和图像处理的新手。我正在努力在这样的图像中分离背景和前景

![护照图像蓝色背景](../Images/c270184e2d31d5d4755b24d66d7b6d89.png)

我有数百张这样的图片，在[这里](http://mmlab.ie.cuhk.edu.hk/facesketch.html)找到。通过反复试验，我发现了一个阈值（在 RGB 空间中）：红色层始终小于 150，而绿色和蓝色层在背景所在的位置大于 150。

所以如果我的 RGB 图像是`I`和我的`r`,`g`和`b`图层是

```
redMatrix = I(:,:,1);
greenMatrix = I(:,:,2);
blueMatrix = I(:,:,3); 
```

通过查找红色、绿色和蓝色值大于或小于 150 的坐标，我可以获得背景的坐标，例如

```
[r1 c1] = find(redMatrix < 150);
[r2 c2] = find(greenMatrix > 150);
[r3 c3] = find(blueMatrix > 150); 
```

现在我得到了数千个像素的坐标`r1,c1,r2,c2,r3 and c3`。

**我的问题：**

1.  如何找到共同值，例如红色小于 150 且绿色和蓝色大于 150 的像素坐标？我必须迭代 and 的每个坐标`r1`并`c1`检查它们是否出现在`r2 c2`并`r3 c3`检查它是否是一个共同点。但这将非常昂贵。 **这可以在没有循环的情况下实现**吗？

2.  如果不知何故我想出了像`[commonR commonC]`and`commonR`和`commonC`两者都是有序的共同点`5000 X 1`，那么要访问 Image 的这个背景像素`I`，我必须先访问`commonR`然后`commonC`再访问`I`图像

    `I(commonR(i,1),commonC(i,1))`

那也很贵。所以我的问题是这可以在没有循环的情况下完成。

任何帮助，将不胜感激。

**我得到了@Science_Fiction 答案的解决方案**

只是详细说明他/她的答案

我用了

```
mask = I(:,:,1) < 150 & I(:,:,2) > 150 & I(:,:,3) > 150; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T10:50:16.057

不需要循环。你可以这样做：

```
I = imread('image.jpg');
redMatrix = I(:,:,1);
greenMatrix = I(:,:,2);
blueMatrix = I(:,:,3);
J(:,:,1) = redMatrix < 150;
J(:,:,2) = greenMatrix > 150;
J(:,:,3) = blueMatrix > 150;
J = 255 * uint8(J);
imshow(J); 
```

![图片](../Images/51c46e1ec5ad85f2b81bf555135b94a2.png)

灰度图像也足以分离背景。

```
K = ((redMatrix < 150) + (greenMatrix > 150) + (blueMatrix > 150))/3;
imshow(K); 
```

![在此处输入图像描述](../Images/131ae78bf518b6426814a234351827a4.png)

## 编辑

我又看了看，也使用了您链接到的其他图像。考虑到背景颜色的差异，我认为从图像直方图导出阈值而不是硬编码会得到更好的结果。

有时，该算法有点过于严格，例如将部分衣服与背景一起擦除。但我认为超过 90% 的图像被很好地分离，这比你希望通过固定阈值实现的更强大。

```
close all;

path = 'C:\path\to\CUHK_training_cropped_photos\photos';
files = dir(path);
bins = 16;

for f = 3:numel(files)
    fprintf('%i/%i\n', f, numel(files));
    file = files(f);
    if isempty(strfind(file.name, 'jpg'))
        continue
    end

    I = imread([path filesep file.name]);

    % Take the histogram of the blue channel
    B = I(:,:,3);
    h = imhist(B, bins);
    h2 = h(bins/2:end);

    % Find the most common bin in the *upper half*
    % of the histogram 
    m = bins/2 + find(h2 == max(h2));

    % Set the threshold value somewhat below  
    % the value corresponding to that bin
    thr = m/bins - .25;
    BW = im2bw(B, thr);
    % Pad with ones to ensure background connectivity
    BW = padarray(BW, [1 1], 1);
    % Find connected regions in BW image
    CC = bwconncomp(BW);    
    L = labelmatrix(CC);
    % Crop back again
    L = L(2:end-1,2:end-1);

    % Set the largest region in the orignal image to white
    for c = 1:3
        channel = I(:,:,c);
        channel(L==1) = 255;
        I(:,:,c) = channel;
    end 

    % Show the results with a pause every 16 images    
    subplot(4,4,mod(f-3,16)+1);
    imshow(I);
    title(sprintf('Img %i, thr %.3f', f, thr));

    if mod(f-3,16)+1 == 16
        pause
        clf
    end    

end

pause
close all; 
```

**结果：**

![在此处输入图像描述](../Images/dad32d563e458d76117fb43931ed5ed2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T10:52:45.007

你的方法看起来很基本但很体面。因为对于这个特定的图像，背景主要由蓝色组成，所以你很粗糙，做：

```
mask = img(:,:,3) > 150; 
```

这会将那些在大于 150 的情况下评估为 true 的像素设置为 0，将 false 设置为 1。不过，您将拥有一张黑白图像。

```
imshow(mask); 
```

添加颜色

```
mask3d(:,:,1) = mask; 
mask3d(:,:,2) = mask; 
mask3d(:,:,3) = mask;

img(mask3d) = 255;
imshow(img); 
```

应该给你一张脸的彩色图像，背景是纯白色的。所有这些都需要一些试验和错误。

# android - 从另一个包开始活动

> ID：14423617
> 
> 赞同：7
> 
> 时间：2013-01-20T10:32:09.740
> 
> 标签：android, android-intent, android-activity, packages

我有这个清单：

```
<manifest ...
    package="com.my">

    <application ...>

        <activity ...
            android:name=".app.Run">
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <activity ...
    android:name=".app.Preferences"/>

    <activity ...
    android:name=".library.error.ErrorDialog"/>

    </application>

</manifest> 
```

如何`ErrorDialog`从活动开始`Run`活动？

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("com.my.library.error", "com.my.library.error.ErrorDialog"));
startActivity(intent); 
```

或者

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("library.error", "library.error.ErrorDialog"));
startActivity(intent); 
```

不工作

* * *

**MEA CULPA... MEA CULPA...**

我的`ErrorDialog`活动不公开。:D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T11:00:18.733

**1\. 与应用程序清单文件相关**

```
Manifest: 
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
  package="app.run"/> 
<activity android:name="app.run"/> 
<activity android:name="library.error.ErrorDialog"/>

package app.run  // Your Main Application Package Name

Activity:
Intent i = new Intent(); 
i.setClassName("app.run", "library.error.ErrorDialog"); //
startActivity(i); 
```

[设置类名（）](http://developer.android.com/reference/android/content/Intent.html#setClassName%28android.content.Context,%20java.lang.String%29)

* * *

**2\. 与应用程序清单文件无关**

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("packagename whos activity u want to launch","classname.java"));   
startActivity(intent); 
```

[设置组件名称（）](http://developer.android.com/reference/android/content/Intent.html#setComponent%28android.content.ComponentName%29)

***在你的情况下***

```
Intent intent=new Intent();
intent.setComponent(new ComponentName("library.error", "library.error.ErrorDialog")); 
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-12T10:37:16.643

创建两个不同的应用程序（包）之后。转到您的第一个应用程序的清单文件并按如下方式对其进行编辑：-

```
<activity
android:name="com.example.applicationfire.MainActivity"
android:label="@string/app_name" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<activity
android:name="com.example.application2.Second"
android:label="@string/app_name" >
</activity> 
```

这里只需声明要从第一个应用程序打开的第二个应用程序的活动。请注意，这里的“com.example.application2”是另一个应用程序的包名，“Second”是第二个包中的活动的名称。

您为另一个应用程序中的另一个活动启动的意图将是这样的——

```
btnStart.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View arg0) 
        {
            // TODO Auto-generated method stub
Intent intent = new Intent("android.intent.action.MAIN");
intent.setComponent(new   ComponentName("com.example.application2","com.example.application2.Second"));
startActivity(intent);
}       });} 
```

现在，这里传递给意图的第一个参数将是您的第二个应用程序的包名称，第二个参数将是要打开的活动的名称。而已。PS：运行第一个应用程序！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-25T11:59:15.980

我解决了 Intent 和 setClass 的问题

```
Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.setClassName("packagewheretheactivityyouwantcallis", "packagewheretheactivityyouwantcallis.ActivityYouWantCall");
            startActivity(intent); 
```

不要忘记将您正在编写的活动的清单放入您要调用的活动，如下所示：

```
<application 
....>
 <activity
        android:name="packagewheretheactivityyouwantcallis.ActivityYouWantCall">
    </activity> 
</application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T10:58:17.090

您可以使用以下代码：

```
Intent myIntent= new Intent(FirstActivity.this,SecondActivity.class); 
startActivity(myIntent); 
```

如果一个类在同一个包中或在另一个包中，这并没有什么不同。只要确保你导入了这个类。

我在清单中使用了这段代码：

```
<activity
    android:name="com.mycompany.mainapplication.package1.SecondActivity"
    android:label="Simple Math Questions" >
</activity> 
```

# facebook - 如何在不进行身份验证的情况下从图形 api 获取用户的好友列表？

> ID：14423625
> 
> 赞同：1
> 
> 时间：2013-01-20T10:33:24.220
> 
> 标签：facebook, facebook-graph-api

我可以在 facebook.com 中看到用户的朋友列表，但我无法通过图形 api 获得。我在“Graph API Explorer”中使用了这个 fql：

```
SELECT uid1 FROM friend WHERE uid2=100002756991450 
```

但它告诉我：

```
{
  "error": {
    "message": "Error validating access token: Session has expired at unix time 1358668800\. The current unix time is 1358677687.",
    "type": "OAuthException",
    "code": 190,
    "error_subcode": 463
  }
} 
```

如何在没有身份验证的情况下获取用户的好友列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T06:24:31.970

这不是由于身份验证，这是因为用户的会话已过期，因此生成新的访问令牌并使用它。你可能会得到这个错误。{ "error": { "message": "由于用户的隐私设置，无法查找 515977793 的所有好友。", "type": "NoIndexFunctionException", "code": 604 } }

如果用户有隐私。

# c# - 天蓝色共享访问签名创建

> ID：14423627
> 
> 赞同：0
> 
> 时间：2013-01-20T10:33:47.683
> 
> 标签：c#, azure, azure-blob-storage

我正在使用 c# 为新资源创建共享访问签名（用户应该具有在我的存储帐户上创建新资源的创建权限）。MS 文档已过时，我似乎无法使用我浏览过的不同博客文章使其正常工作。

现在我的代码看起来像这样：

```
public static string GetBlobSharedAccessSignitureUrl(CloudBlobContainer container,string nameOfBlobToCreateSaSfor)
        {
            var blob = container.GetBlockBlobReference(nameOfBlobToCreateSaSfor);
            var policy = new SharedAccessBlobPolicy
                             {
                                 SharedAccessExpiryTime = DateTime.Now.AddHours(1),
                                 Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Read
                             };

            container.GetSharedAccessSignature(policy);
            string sas = blob.GetSharedAccessSignature(policy);

            return blob.Uri.AbsoluteUri + sas;

        } 
```

并且返回的 url（对于我的本地机器）看起来像这样（似乎是正确的）

```
http://127.0.0.1:10000/devstoreaccount1/photos/photos_4.jpg?sv=2012-02-12&se=2013-01-20T10%3A13%3A17Z&sr=b&sp=rw&sig=xxx 
```

我启动了 Azure 存储模拟器，并通过提琴手尝试 POST 到这个 URL（也尝试了 PUT）

我收到错误（ 404 或 400 ，取决于我尝试过的此功能的不同代码）

我需要做其他事情吗？（在旧示例中​​，我看到他们事先在该位置创建了一个资源 - 我也尝试过，但也没有工作......）

Azure SDK 版本为 2.0，因此 2012 年 10 月之前的 MS 博客文章（和其他教程）已损坏（也根据 MS 开发博客[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows -azure-storage-client-library-2-0-break-changes-amp-migration-guide.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-breaking-changes-amp-migration-guide.aspx) )

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:01:27.020

如果您通过 Fiddler 或您的代码发布，请确保添加“x-ms-blob-type”请求标头并将其值设置为“BlockBlob”。看看它尝试上传文件的示例代码：

```
 FileInfo fInfo = new FileInfo(fileName);//fileName is the full path of the file.
                HttpWebRequest req = (HttpWebRequest)WebRequest.Create(blobSaSUrl);
                NameValueCollection requestHeaders = new NameValueCollection();
                requestHeaders.Add("x-ms-blob-type", "BlockBlob");
                req.Method = "PUT";
                req.Headers.Add(requestHeaders);
                req.ContentLength = fInfo.Length;
                byte[] fileContents = new byte[fInfo.Length];
                using (FileStream fs = fInfo.OpenRead())
                {
                    fs.Read(fileContents, 0, fileContents.Length);
                    using (Stream s = req.GetRequestStream())
                    {
                        s.Write(fileContents, 0, fileContents.Length);
                    }
                    using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
                    {
                    }
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-20T20:11:07.973

创建一个有效期为一小时的 SAS 令牌。

```
BlobSasBuilder sasBuilder = new BlobSasBuilder()
{
    BlobContainerName = containerName,
    BlobName = blobName,
    Resource = "b",
    StartsOn = DateTimeOffset.UtcNow,
    ExpiresOn = DateTimeOffset.UtcNow.AddHours(1)
}; 
```

指定 SAS 的读取权限。

```
sasBuilder.SetPermissions(BlobSasPermissions.Read); 
```

使用密钥获取 SAS 令牌。

```
string sasToken = sasBuilder.ToSasQueryParameters(key, accountName).ToString(); 
```

构造完整的 URI，包括 SAS 令牌。

```
UriBuilder fullUri = new UriBuilder()
{
    Scheme = "https",
    Host = string.Format("{0}.blob.core.windows.net", accountName),
    Path = string.Format("{0}/{1}", containerName, blobName),
    Query = sasToken
}; 
```

# mysql - sql 查询，其中域在订阅中，但不在块或命中中

> ID：14423629
> 
> 赞同：1
> 
> 时间：2013-01-20T10:34:11.303
> 
> 标签：mysql

```
SELECT * 
FROM domains
WHERE domains_id IN
      (
        SELECT domains_subscriptions_domain
        FROM domains_subscriptions
        WHERE domains_subscriptions_selmgec='$_SESSION[selmgec]'
      )
AND domains_id NOT IN
      (
        SELECT domains_block_domain
        FROM domains_block
        WHERE domains_block_selmgec='$_SESSION[selmgec]'
          AND domains_block_member='$_SESSION[member]'
      )
ORDER BY RAND() 
```

我想获取域中的所有域，这些域也在域订阅中，但它们不在域块中。这适用于上面的查询。但后来我希望能够添加

```
AND domains_id NOT IN
      (
         SELECT domains_hits_domain 
         FROM domains_hits
         WHERE domains_hits_selmgec='$_SESSION[selmgec]'
            AND domains_hits_member='$_SESSION[member]'
      ) 
```

这对查询，所以它也过滤掉域中的域是什么域，但它目前给了我所有域，因为我认为它只会过滤掉域块和域中的域，但我想要它要么是！

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:42:45.207

尝试这个：

```
SELECT * 
FROM domains
WHERE domains_id IN
      (
        SELECT domains_subscriptions_domain
        FROM domains_subscriptions
        WHERE domains_subscriptions_selmgec='$_SESSION[selmgec]'
      )
AND domains_id NOT IN
      (
        SELECT domains_block_domain
        FROM domains_block
        WHERE domains_block_selmgec='$_SESSION[selmgec]'
          AND domains_block_member='$_SESSION[member]'
        UNION ALL
        SELECT domains_hits_domain 
        FROM domains_hits
        WHERE domains_hits_selmgec='$_SESSION[selmgec]'
           AND domains_hits_member='$_SESSION[member]'
      )
ORDER BY RAND() 
```

或者

```
SELECT * 
FROM domains
WHERE domains_id IN
      (
        SELECT domains_subscriptions_domain
        FROM domains_subscriptions
        WHERE domains_subscriptions_selmgec='$_SESSION[selmgec]'
      )
AND NOT (
      domains_id IN
      (
        SELECT domains_block_domain
        FROM domains_block
        WHERE domains_block_selmgec='$_SESSION[selmgec]'
          AND domains_block_member='$_SESSION[member]'
      )
      OR
      domains_id IN
      ( 
        SELECT domains_hits_domain 
        FROM domains_hits
        WHERE domains_hits_selmgec='$_SESSION[selmgec]'
           AND domains_hits_member='$_SESSION[member]'
      )
    )
ORDER BY RAND() 
```

# jquery - jQuery捕获输入键并防止默认

> ID：14423633
> 
> 赞同：4
> 
> 时间：2013-01-20T10:34:40.720
> 
> 标签：jquery, tinymce, keypress, enter, preventdefault

在这里参考答案： [如何在文本上使用 TinyMCE 函数而不实际选择该文本？](https://stackoverflow.com/questions/13951093/how-to-use-tinymce-functions-on-text-without-actually-selecting-that-text)

我已经意识到

```
$('#TAID_ifr').contents().find('html').bind('keypress', function(e){return false;}); 
```

不适用于回车键。当用户点击“回车”时，就会形成一个换行符。但是对于所有其他键，代码按预期工作，即没有任何反应。进入需要特殊处理吗？我添加了下面的代码，但没有任何区别：

```
 var code = e.keyCode || e.which;
                if (code == 13) e.preventDefault(); 
```

怎么了？我不想在用户点击“输入”时插入新行，我不想发生任何事情。

## 编辑

这是否不起作用，因为在`enter`iframe 内按下了键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:06:32.477

是的，这是可能的。Tinymce 使用自己的事件管理。有一个名为[tinymce 的事件](http://www.tinymce.com/wiki.php/API3%3aevent.tinymce.Editor.onKeyDown)`onKeyDown`。使用[setup 配置参数](http://www.tinymce.com/wiki.php/Configuration%3asetup)，您可以使用此事件：

```
// Adds an observer to the onKeyDown event using tinyMCE.init
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onKeyDown.add(function(ed, event) {

          if (event.keyCode == 13)  {
              event.preventDefault();
              event.stopPropagation();
              return false;
          }
      });
   }
}); 
```

请注意，由于不同浏览器中的实现不同，此处使用了几个语句来停止代码的传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:20:43.873

请尝试以下代码：

```
$('#TAID_ifr').keypress(function(event){

    if (event.keyCode == 10 || event.keyCode == 13)  {
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T15:15:03.137

在 TinyMce 4.x 中，使用以下代码段，如此[处](https://www.tinymce.com/docs/advanced/events/)所述：

```
// Adds an observer to the onKeyDown event using tinyMCE.init
tinymce.init({
   ...
   setup : function(ed) {
      ed.on('KeyDown', function(event) {
          if (event.keyCode == 13)  {
              event.preventDefault();
              event.stopPropagation();
              return false;
          }
      });
   }
}); 
```

# c# - 计时器不显示月份

> ID：14423635
> 
> 赞同：1
> 
> 时间：2013-01-20T10:34:59.207
> 
> 标签：c#, winforms, timer

如标题。我写了一个简单的计时器，它可以设置时间和日期。时间很好，但日期不行。它显示一年零一天，但不显示月份。为什么 ？

我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication_timer
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            int h = DateTime.Now.Hour;
            int m = DateTime.Now.Minute;
            int s = DateTime.Now.Minute;

            int d = DateTime.Now.Day;
            int y = DateTime.Now.Year;
            int t = DateTime.Now.Month;

            label2.Text = DateTime.Now.ToString("dd/tt/yy");

            label1.Text = DateTime.Now.ToString("hh:mm:ss");

        }

        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Start();
        }

        private void label2_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

此代码的结果：

```
time eg : 11:34:23
date eg : 20--2013 
```

结果必须更改为：

```
time eg : 11:34:23
date eg : 20/01/2013 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:36:02.443

你应该使用`dd/MM/yy`not `dd/tt/yy`。

有关详细信息，请参阅[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

我还可以看到您有以下行：

`int s = DateTime.Now.Minute;`

我假设你的意思是：

`int s = DateTime.Now.Second;`

编辑：

事实上，我看不出有任何理由将日期/时间的任何部分保存在局部变量中，因为它们没有被使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:36:50.503

你的`DateTime`格式不对。试试`dd/MM/yy`这样的格式；

```
label2.Text = DateTime.Now.ToString("dd/MM/yy"); 
```

查看[**`Custom Date and Time Format Strings`**](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)更多日期和时间格式信息。

这是一个[`DEMO`](http://ideone.com/zL8pOH).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T10:36:37.293

```
label2.Text = DateTime.Now.ToString("dd/MM/yyyy"); 
```

# spring - 哪个 JAR 文件包含 JsonProcessingException 类？

> ID：14423638
> 
> 赞同：14
> 
> 时间：2013-01-20T10:35:19.237
> 
> 标签：spring, spring-mvc, jar, jackson

当我尝试将 Jackson 2.1.1 与以下 jar 文件（在 Spring 3.2.2 中）一起使用时，

*   杰克逊核心2.1.1.jar
*   杰克逊注释-2.1.1.jar
*   jackson-databind-2.1.1.jar

我得到以下异常。

> java.lang.ClassNotFoundException：org.codehaus.jackson.JsonProcessingException

所以我认为，该类`JsonProcessingException`包含在`jackson-core-asl-2.1.1.jar`文件中（虽然我不太确定）但我在[下载](http://wiki.fasterxml.com/JacksonDownload)中看不到这个文件。那么从哪里得到这个文件来解决这个异常呢？

* * *

[`jackson-all-1.9.8.jar`](http://jackson.codehaus.org/1.9.8/jackson-all-1.9.8.jar)包含必要的类，包括类`org.codehaus.jackson.JsonProcessingException`和 JSON 也可以正常工作，但我不确定这是否完全兼容，因为我正在使用 Jackson 2.1.1 中的类进行对象映射。因此我正在寻找该`jackson-core-asl-2.1.1.jar`文件，但我看不到这样的 JAR 文件。我只能[在这里](http://www.java2s.com/Code/Jar/j/Downloadjacksoncoreasljar.htm)`1.x.x`看到版本。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-20T11:36:14.547

在 2.1.2 版本中，该类被称为`com.fasterxml.jackson.core.JsonProcessingException`，它位于 jackson-core jar 中。Jackson[更改了 2.0 版的包装](http://wiki.fasterxml.com/JacksonRelease20#Changing_Java_packages)以及许多其他内容。

似乎您有一些针对较旧版本的 Jackson 编写的代码，并试图以旧名称加载该类。您将需要更新此代码，或使用旧版本的 Jackson。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T10:09:12.207

使用 jackson-all-1.9.9 jar 代替 jackson-core、jackson-annotations 和 jackson-databind 的更高版本（2.xx）。这是[链接](http://www.java2s.com/Code/Jar/j/Downloadjacksonall199jar.htm)。

# ruby-on-rails - ruby on rails 教程，创建页面

> ID：14423642
> 
> 赞同：0
> 
> 时间：2013-01-20T10:35:30.750
> 
> 标签：ruby-on-rails, ruby

伙计们，正在尝试在 Rails 上学习 ruby​​ ......按照教程，并在完成以下操作后

```
rails generate controller Pages home contact 
```

以下显示在日志/生产中

```
Started GET "/pages/home" for 24.18.129.38 at 2013-01-20 10:32:17 +0000
Processing by PagesController#home as HTML
Rendered pages/home.html.erb within layouts/application (0.0ms)
Completed 500 Internal Server Error in 2ms

ActionView::Template::Error (application.css isn't precompiled):
2: <html>
3: <head>
4:   <title>FirstApp</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head>
app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___2607526346352188026_23275800'

Started GET "/pages/contact" for 24.18.129.38 at 2013-01-20 10:32:21 +0000
Processing by PagesController#contact as HTML
Rendered pages/contact.html.erb within layouts/application (0.3ms)
Completed 500 Internal Server Error in 3ms

ActionView::Template::Error (application.css isn't precompiled):
2: <html>
3: <head>
4:   <title>FirstApp</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head>
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___2607526346352188026_23275800' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:44:48.997

```
# config/environments/production.rb
...
config.assets.compile = true
... 
```

# tsql - 每次完成后依次运行多个订阅

> ID：14423644
> 
> 赞同：0
> 
> 时间：2013-01-20T10:35:39.690
> 
> 标签：tsql, reporting-services

我正在尝试以编程方式一个接一个地运行一些 SSRS 订阅。这些报告都是长时间运行的，如果同时触发，则会始终失败。目前，我们在一天中分布着大约四种不同的订阅，以确保它们不会发生冲突。不幸的是，这会浪费很多时间。

我为此提供的解决方案是创建一个未计划在所有相关报告上运行的订阅，然后在每个完成运行后获得一个作业来触发每个订阅：

1.  一个作业触发第一个订阅
2.  使用 WAITFOR 命令给订阅运行几秒钟的时间。
3.  使用 WAITFOR 命令定期检查订阅是否正在运行（“待定”）
4.  当 WAITFOR 检查发现报告已发送时，作业触发下一次订阅，依此类推....

我知道触发订阅的代码：

```
exec [ReportServerWSS].dbo.AddEvent @EventType='SharedSchedule', @EventData='011e83ff-344a-416a-83cb-1a9281e4205b' 
```

我只需要知道如何在进行检查时使用 WAITFOR，然后对检查结果做出响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:09:12.693

根据您问题中的信息，我肯定会说您有一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)：您应该真正致力于查询和报告的性能和/或[锁定策略](https://dba.stackexchange.com/questions/29289/options-for-setting-nolock-hint-in-dataset-queries)。

话虽如此，如果您坚持通过连续运行报告来“解决”问题，我可能不会使用内置订阅，而是选择更自定义的解决方案，以便您拥有所需的控制权。创建您自己的应用程序、脚本或使用[SOAP API](http://msdn.microsoft.com/en-us/library/reportexecution2005%28v=sql.105%29.aspx)的任务，一次调用一个报表上的[Render](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render%28v=sql.105%29.aspx)方法，等待每个报表完成后再开始下一个报表。如果您还没有这样做，请将执行超时设置为足够高的值，以便您的报告能够顺利完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:05:43.833

好的 - 我已经想通了：

```
DECLARE @SubscriptionStatus AS nvarchar(260)

EXEC msdb.dbo.sp_start_job '4B7FA89E-0B56-4ED1-9A0F-37E5D03318CB' /*First long running    report*/
WAITFOR DELAY '00:00:30'

SET @SubscriptionStatus = (SELECT LastStatus FROM Subscriptions Where subscriptionid =    'E156FD91-E7F9-43EC-8B73-28622834EACB')

CheckSubscription1:
    IF @SubscriptionStatus = 'Pending'
    BEGIN
        PRINT 'The First long running Subscription is still running'
        WAITFOR DELAY '00:01:00'
        SET @SubscriptionStatus = (SELECT LastStatus FROM Subscriptions Where     subscriptionid = 'E156FD91-E7F9-43EC-8B73-28622834EACB')
    END

IF @SubscriptionStatus = 'Pending'
    GOTO CheckSubscription1

ELSE

EXEC msdb.dbo.sp_start_job '6D3300BC-ACA9-4EEE-A5F9-546635B585E0' /*Second long running    report*/
WAITFOR DELAY '00:00:30'

SET @SubscriptionStatus = (SELECT LastStatus FROM Subscriptions Where subscriptionid =        'AD54215A-5B7F-48B2-81B2-52C299875AD6')

CheckSubscription2:
    IF @SubscriptionStatus = 'Pending'
    BEGIN
        PRINT 'The second long running Subscription is still running'
        WAITFOR DELAY '00:01:00'
        SET @SubscriptionStatus = (SELECT LastStatus FROM Subscriptions Where     subscriptionid = 'AD54215A-5B7F-48B2-81B2-52C299875AD6')
    END

IF @SubscriptionStatus = 'Pending'
    GOTO CheckSubscription2

ELSE

EXEC msdb.dbo.sp_start_job '84FD876A-1945-405E-A344-6279E27DCD68' /*Third long running     report*/

WAITFOR DELAY '00:00:30'

SET @SubscriptionStatus = (SELECT LastStatus FROM Subscriptions Where subscriptionid =    '8F446935-5450-458F-9076-7AD9FC78D456')

CheckSubscription3:
    IF @SubscriptionStatus = 'Pending'
    BEGIN
        PRINT 'The third long running Subscription is still running'
        WAITFOR DELAY '00:01:00'
        SET @SubscriptionStatus = (SELECT LastStatus FROM Subscriptions Where    subscriptionid = '8F446935-5450-458F-9076-7AD9FC78D456')
    END

IF @SubscriptionStatus = 'Pending'
    GOTO CheckSubscription3

ELSE

PRINT 'All long running report run' 
```

谢谢，犹他州

# php - 排序后限制后的mongo排序 - 不工作

> ID：14423646
> 
> 赞同：7
> 
> 时间：2013-01-20T10:35:54.057
> 
> 标签：php, mongodb

我有一个集合，我使用 $query 从中获取特定类型的用户
然后我需要根据 user_id 升序对它们进行排序并将它们限制为 2000

从这些我需要最大 user_id，所以我按降序对它们进行排序并限制为 1。

但是第二个排序忘记了 2000 的限制，并从 find() 对整个光标进行排序。

任何解决方法？

```
$cursor = $collection   ->find($query)                // too many entries
            ->sort(array('user_id'=>1))   // go ascending
            ->limit(2000)                // got our limited qouta
            ->sort(array('user_id'=>-1)) // go descending to get max
            ->limit(1);          // the one with max(user_id) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T14:45:41.247

您不能先进行排序，然后再进行限制，然后再进行排序。Cursor 对象就是这样，它不会运行查询，直到您迭代到第一个结果，通过`getNext()`该结果可以手动运行或在`foreach`循环中运行，不仅如此，而且`sort`只是对象的一个​​属性，因此进行两种排序只会覆盖该属性.

实现您的目标的最佳方法是：

```
$doc = $collection->find($query)->sort(array('user_id' => 1))
       ->skip(1999)->limit(1)->getNext(); 
```

这将始终选择`user_id`组中最高的（在这种情况下出现在最后），这将给出与进​​行两种排序相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T11:52:05.693

使用skip()怎么样：

```
$cursor = $collection   ->find($query)  
        ->sort(array('user_id'=>1))   
        ->limit(2000)                
        ->skip(1999); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:11:56.570

sort-limit-sort-limit 方法背后的原因是什么？

你不能就这样吗

```
$cursor = $collection ->find($query)
            ->sort(array('user_id'=>-1))
            ->limit(1); 
```

**编辑：**此外，只有最后`sort`应用于光标的效果。（这一行出现在`pymongo`docs [here](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.sort)中，这是有道理的。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T08:29:32.200

我在[php5](/questions/tagged/php5 "显示标记为“php5”的问题")和[mongodb](/questions/tagged/mongodb "显示标记为“mongodb”的问题")最新版本中使用以下代码：

```
$doc = $collection->find($query)->sort(array('user_id' => 1))
    ->skip(1999)->limit(1)->getNext(); 
```

当我使用`->skip(1999)->limit(1)`后它停止工作`sort()`

光标`$doc`确实给了我价值。我试着把它分解成这样：

```
$doc = $collection->find($query)->sort(array('user_id' => 1))
$doc = $doc->skip(1999)->limit(1); 
```

那行得通。也许你应该在新版本中尝试一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T12:15:56.873

[Sammaye 的回答](https://stackoverflow.com/a/14425636/1045444)是正确的。

你仍然可以达到你想要的方式。您可以使用聚合框架，因为它在另一个阶段之后执行一个阶段，依此类推。

```
$doc = $collection->aggregate(array(
    array(
      '$match' => $query,
    ),
    array(
      '$sort' => array(
          'user_id'=> 1
      ),
    ),
    array(
      '$limit' => 2000
    ),
    array(
      '$sort' => array(
          'user_id'=> -1
      ),
    ),
    array(
      '$limit' => 1
    ),
)); 
```

# ffmpeg - ffmpeg：从 mp3 中删除封面图片/在没有封面的情况下转换为 ogg

> ID：14423647
> 
> 赞同：3
> 
> 时间：2013-01-20T10:35:53.900
> 
> 标签：ffmpeg

我有两个关于使用 ffmpeg 的问题：

1）如何从mp3中删除封面图片 2）如果mp3中有封面，如何说ffmpeg将其转换为没有图片的ogg

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:57:22.353

这位先生怎么样

```
ffmpeg -i a.mp3 -q 1 -map a a.ogg 
```

[**参考**](http://svnpenn.github.com/2012/ffmpeg-encode-mp3)

# git - .ssh 配置与亚马逊 ec2 和 git

> ID：14423652
> 
> 赞同：17
> 
> 时间：2013-01-20T10:36:41.600
> 
> 标签：git, amazon-ec2, config, public-key

我从亚马逊 ec2 服务器克隆 git 存储库时遇到了一个奇怪的问题。它在我的一台运行 ubuntu 12.04 的计算机上运行没有任何问题，而在另一台使用 12.10 的计算机上它给了我一个错误：

```
ssh: Could not resolve hostname ec2server: Name or service not known  
fatal: The remote end hung up unexpectedly 
```

就像它无法识别我的配置文件一样。我使用以下 git 命令克隆：

```
sudo git clone ec2server:/var/www/project.git 
```

或者

```
sudo git clone ec2xxx.compute-1.amazonaws.com:/var/www/project.git 
```

这两个配置文件在两台计算机上是相同的，在 ~./ssh 中，内容如下：

```
Host ec2server
   Hostname ec2XXX.compute-1.amazonaws.com
   User ubuntu
   IdentityFile ~/.ssh/mykey.pem 
```

如果我用实际地址替换 ec2server，我会收到以下错误：

```
Cloning into 'project'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-20T10:39:22.680

通常是权限问题。
您的`chmod`配置文件的父目录可能在两台计算机之间有所不同。
（而且我说的不仅仅是直接父目录`.ssh`，还包括*所有*父目录）

请参阅“ [Git SSH 身份验证](https://stackoverflow.com/questions/13425811/git-ssh-authentication/13428529#13428529)”，但也知道如果任何父目录对组或世界是可写的，则 ssh 将不起作用。

* * *

另请注意，您的第二个命令不正确，应该是：

```
git clone ubuntu@ec2xxx.compute-1.amazonaws.com/var/www/project.git 
```

**no ' `:`'**（a ' `:`' 表示使用`config`文件，具有类似`scp`- 的语法）

`~/.ssh/id_rsa`只有当你有并且`~/.ssh/id_rsa.pub`虽然它才能工作。
如果你有 mykey.pem，那么你*需要*一个`config`ssh 文件来知道你的公钥和私钥在哪里，这意味着只有这样才能工作：

```
git clone ec2server:/var/www/project.git 
```

* * *

另一个检查（在[这个线程](http://ubuntuforums.org/showthread.php?t=1100566)和这个[论坛](https://openshift.redhat.com/community/forums/openshift/ssh-connection-closed-by)之后）是检查是否存在任何 DNS/DHCP 问题（有点像“[在动态 DNS 后面使用 git](https://stackoverflow.com/a/5563791/6309) ”）。

```
Host ec2server
   Hostname 1xx.xxx.xxx.xxx # ip address of ec2XXX.compute-1.amazonaws.com
   User ubuntu
   IdentityFile ~/.ssh/mykey.pem 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T18:14:12.527

最近我不得不重新安装保存工作配置的系统，但我没有设法复制它，所以这与 linux 版本无关（很可能）。我设法做的是，我设法使用提到的原始脚本将存储库克隆到我的主目录中。在这里它正确地选择了名称，但是如果我导航到 /var/www，就像我之前所做的那样，它只会给我同样的错误：can ec2server not found ... 。所以我认为问题与权限+命令组合有关。如果有人能弄清楚如何使它起作用，我会将他的回答标记为正确答案，直到那时我将我的回答标记为正确答案，因为这是最接近正确的答案。

更新

我想出了问题所在：我必须更改 /var/www 文件夹的权限才能克隆到该目录。现在是 777（仅用于本地机器上的开发）。

# ms-access - 在 MS 访问中为外键设置默认值或设置为空

> ID：14423655
> 
> 赞同：2
> 
> 时间：2013-01-20T10:37:20.080
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我无法在 MS 访问中设置默认值或空值。例如，当我尝试删除父行时，受影响的子行的外键未设置为 NULL。我尝试在设计视图中将默认值设置为 NULL，但它似乎不起作用。

这是我的示例数据：
在人员表中：
`ID | Name`
`1 | Tom`
`2 | Tim`

在客户表中：
`ID | Name | processed_By`
`1 | cust1 | 2`

如果我要从员工表中删除 Tim，cust1 仍会在`processed_By`列中保留 2。但是，我希望它在从 staff_table 中删除 Tim 后执行以下操作。

`ID | Name | processed_By`
`1 | cust1 | NULL`

或者

`ID | Name | processed_By`
`1 | cust1 | 1`

希望你能帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:55:07.703

您可以在 MS Access 2010 中使用新的[数据宏轻松完成此操作](http://office.microsoft.com/en-ie/access-help/create-a-data-macro-HA010378170.aspx)

当表在 MS Access 之外使用时，数据宏甚至可以工作。注意关键字`Old`，应用于创建 After Delete 宏的 Staff 表。该行`/* delete`是评论，纯粹是为了说明。

![删除数据宏](../Images/db7e6f069bf484058312395d5d5ead62.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T16:54:26.580

我的印象是你在找`ON DELETE SET NULL`。自 Jet 4 (Access 2000) 以来，Access 就支持该关系功能。但是，Access 用户界面中没有设置`ON DELETE SET NULL`. 您必须通过 VBA 代码或在 SQL-92 模式下执行的 DDL 语句来执行此操作。

我在立即窗口中执行了一个 DDL 语句。注意`CurrentProject.Connection.Execute`是 ADO 方法，这意味着查询是以 SQL-92 模式执行的，而不是 Access 的默认 SQL-89 模式。

```
strSql = "ALTER TABLE Customer" & vbCrLf & _
    "ADD CONSTRAINT processed_By_FK" & vbCrLf & _
    "FOREIGN KEY (processed_By) REFERENCES staff(ID)" & vbCrLf & _
    "ON DELETE SET NULL"
CurrentProject.Connection.Execute strSql 
```

之后，我删除了*Tim*`staff`的记录。该删除导致*cust1*的值从 2 更改为 Null。*`Customer.processed_By`*

 **如果这种方法听起来很有趣，您可以从[Cascade to Null Relations](http://allenbrowne.com/ser-64.html)的 Allen Browne和这个 Stack Overflow 问题中找到更多信息：[MS Access set cascade-to-null constraint to existing table](https://stackoverflow.com/questions/10386763/ms-access-set-cascade-to-null-constraint-to-existing-table)。有几个“*陷阱*” `ON DELETE SET NULL`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:13:08.927

我不认为你能做到这一点。您可以自动删除无效的子行，但没有内置函数将其设置回 null。

如果你的设计真的需要这个，你只能通过 vba 来做到这一点，但这只能通过表单上的按钮来实现。当您直接在表中删除行时，我认为无法在访问中执行此操作。**

# jquery - 强制tinymce使用输入键输入换行符，而不是创建一个新段落

> ID：14423656
> 
> 赞同：2
> 
> 时间：2013-01-20T10:37:36.657
> 
> 标签：jquery, tinymce, keypress, line-breaks, paragraph

当用户在使用 TinyMCE 时按 Enter 键时，它不会添加新行，而是添加新段落。我可以更改此行为并强制它仅添加换行符`<br />`而不是新段落吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:45:09.390

哎呀，答案就[在这里](http://www.tinymce.com/wiki.php/Configuration:forced_root_block)：[https ://www.tinymce.com/docs/configure/content-filtering/#forced_root_block](https://www.tinymce.com/docs/configure/content-filtering/#forced_root_block)

```
tinyMCE.init({
    ...
    forced_root_block : 'p'
}); 
```

# c++ - 如何在两个函数中访问队列向量

> ID：14423658
> 
> 赞同：1
> 
> 时间：2013-01-20T10:37:55.473
> 
> 标签：c++, function, loops, queue

嗨，我有以下代码，它将在队列向量中找到最小大小的队列，并且`enqueue(push)`每次都会将最小大小的队列用于 int

```
std::vector<std::queue<int> > q
void enqueue(){
int min_index = 1;
std::size_t size = q.size();
for( i=2; i<size; i++) //accessing loop of queues
    if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is the shortest queue
 q[min_index].push(int)
} 
```

现在我的另一个范例是在另一个函数中执行 dequeue(pop) 操作（如下所示），bt 我需要访问在 enqueue() 函数中声明的所有队列向量。如何访问 enqueue() 函数中给出的队列循环？

```
void dequeue(){

//q.pop operation , access all the queues in the vector of queues

} 
```

会`q[i].pop(int)`; 访问 enqueue 函数中的所有队列并执行 pop 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:40:46.850

```
class MotherOfAllQueues{
    std::vector<std::queue<int> > q;
public:
    void enqueue(int);
    int dequeue();
}; 
```

Is there a problem with the obvious design?

# jquery - JQuery：手动单击复选框不会更改页面上的“已检查”属性

> ID：14423661
> 
> 赞同：1
> 
> 时间：2013-01-20T10:38:26.280
> 
> 标签：jquery, twitter-bootstrap

我遇到了一个相当奇怪的行为。我有两个页面（我们称它们为**页面 A**和**页面 B**），两个页面都包含以下 javascript 代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $('a > img.id-provider, #signup-button').click(function(e){
        if (!$('#chk-agree').attr('checked')) {
            alert('Please accept our terms and conditions before continuing');
        }
        else {
            alert('ok');
        }
        e.preventDefault();
    });
});
</script> 
```

该页面可在此处查看：http: [//jsfiddle.net/SrRAS/](http://jsfiddle.net/SrRAS/)

在页面 B 上，行为符合预期，即在单击注册按钮之前未选中复选框时会发出警告。

但是，在页面 A 上，始终会显示警告，即使已手动单击复选框以使其选中。

这是 FF 控制台输出（对于两个页面），当我试图了解发生了什么时：

```
>>> $('#chk-agree').attr('checked')
undefined
>>> $('input#chk-agree').attr('checked')
undefined 
```

最终，在页面 A 上，我决定以编程方式设置选中的属性（而不是像普通用户那样手动单击它）：

```
>>> $("input#chk-agree").click()
jQuery(input#chk-agree, input#chk-agree)
>>> $("input#chk-agree").attr('checked')
"checked" 
```

然后，当我单击**页面 A**上的注册按钮时，它按预期工作（显示“确定”消息）。但是，当我手动取消选中**页面 A**上的复选框时，它仍然继续显示“确定”消息。因此，似乎出于某种原因，在**页面 A**上，手动单击复选框不会切换“已选中”属性。

我有两个问题：

1.  为什么手动检查复选框不切换复选框“已选中”属性
2.  什么会导致代码在一页而不是另一页上按预期工作？

**[[编辑]]**

```
I have also tried the following check instead of the one shown in my snippet above:

if (!$(this).is(':checked')/*!$('#chk-agree').attr('checked')*/) {
   ...
}else {
   ...
} 
```

现在，至少两个页面的行为是一致的，当手动单击复选框时，似乎**没有一个页面（A 或 B）**承认 - 到底发生了什么？！

**[[编辑2]]**

无效页面的标记在这里：http: [//jsfiddle.net/SrRAS/](http://jsfiddle.net/SrRAS/)

我将非常有兴趣找出导致它在此页面上不起作用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:19:32.730

使用固定代码查看此版本的[JsFiddle](http://jsfiddle.net/SrRAS/16/)它包含两个更改。具有唯一 ID 的复选框和已检查元素的正确 jquery 代码

```
if ($('input#chk-agree').is(':checked')) {
        alert('ok');
    }
    else {
        alert('Please accept our terms and conditions before continuing');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:43:22.330

您的问题似乎是由重复的`chk-agree`ID 引起的。我想知道这是否可能是复制/粘贴错误：第一个`chk-agree`复选框用作“记住我”功能的一部分。

这种重复的结果是`$('input#chk-agree').attr('checked')`计算结果为`undefined`，这在 Javascript 中是错误的。

这里的解决方案是用不同的 ID 重命名两个复选框之一。例如，如果我将第一个复选框（jsFiddle 的第 70 行）重命名为`chk-remember-me`，则一切正常，我会收到“OK”消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:11:08.697

在没有看到您的标记的情况下，我仍然愿意打赌您必须在页面 A 和页面 B 之间存在一些小的差异。您是否尝试过备份文件，并将 A 中的标记替换为 B 中的标记？因为没有理智的理由为什么两个单独的 HTML 页面上的完全相同的代码会以不同的方式工作。

对我来说，这个标记：

```
<input type="checkbox" id="testbox"  value="check me"/> 
<input type="button" id="testbutton" value="click me" /> 
```

这个js：

```
$("#testbutton").click(function() {
    if ($("#testbox").attr("checked")) {
        alert("Checked");
    }
    else {
        alert("Not Checked");
    }
}); 
```

在我尝试过的每个浏览器中都可以正常工作。另外，您使用的是什么版本的 jQuery？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T11:12:09.540

试试这个：http: [//jsfiddle.net/Gsxfz/](http://jsfiddle.net/Gsxfz/)

```
 $('#signup-button').click(function (e) { <-- its an '<a>'
   if (!$('#chk-agree:checked').length) {// <--check for the length of checked checkboxes
     alert('Please accept our terms and conditions before continuing');
   } else {
     alert('ok');
   }
    e.preventDefault();
}); 
```

您可以查看小提琴[http://jsfiddle.net/Gsxfz/](http://jsfiddle.net/Gsxfz/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:11:00.240

只需进行以下更改

# 页面 A

```
 <input type="checkbox" id="chk-agree-pageA"> // checkbox ID

 <button type="submit" class="btn btn-success signup" id="pageA">Sign In</button> 
```

# B页

```
<input type="checkbox" id="chk-agree-pageB"> // checkbox ID

 <button type="submit" class="btn btn-success signup" id="pageB">Sign In</button> 
```

## 最后是脚本

```
$('button.signup').click(function(){
        var id = $(this).attr('id');
        if ($('input#chk-agree-'+id).is(':checked')) {
           alert('ok');
        }
        else {
            alert('Please accept our terms and conditions before continuing');

        }
    });    
}); 
```

检查这个小提琴[http://jsfiddle.net/SrRAS/25/](http://jsfiddle.net/SrRAS/25/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T22:08:17.433

```
// this will alert you that you have duplicate ids on the page

if($('input#chk-agree').size()>1) {
    alert('you have duplicate ids on this page');
}

// this will fix your problem in jsfiddle:

if (!$('input#chk-agree')[1].checked) {

    alert('Please accept our terms and conditions before continuing');
}
else {
        alert('ok');
}

// but removing the first duplicate id is the right fix :-) 
```

# c# - 程序中的空异常

> ID：14423663
> 
> 赞同：0
> 
> 时间：2013-01-20T10:38:40.453
> 
> 标签：c#

我有这样的程序

```
 class Program
    {
        static void Main(string[] args)
        {
            test objtest = new test();
            objtest.Name = "vikas";
            Test(objtest);
            //objtest = null; when I uncomment this line it shows me exception
            Console.WriteLine(objtest.Name);
            Console.ReadLine();
        }

        private static void Test(test objtest)
        {
            objtest.Name = "chetan";
            objtest = null;
        }
    }

    class test
    {
        private string _Name = string.Empty;
        public string Name
        {
            get
            {
                return _Name;
            }
            set
            {
                _Name = value;
            }
        }
    } 
```

输出：车坦

第二个程序：

```
 class Program
    {
        static void Main(string[] args)
        {
            test objtest = new test();
            objtest.Name = "vikas";
            Test(objtest);
            objtest = null;
            try
            {
                Console.WriteLine(objtest.Name);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.InnerException + " " + ex.Message);
            }

            Console.ReadLine();
        }

        private static void Test(test objtest)
        {
            objtest.Name = "chetan";
            objtest = null;
        }
    }

    class test
    {
        private string _Name = string.Empty;
        public string Name
        {
            get
            {
                return _Name;
            }
            set
            {
                _Name = value;
            }
        }
    } 
```

输出：

> 对象引用不设置对象实例

为什么？当我`objtest = null;`在 Test 中设置时，它会显示值，但是当我将 null 设置为相同时，它会显示错误。

*在@kmatyaszek 帖子之后添加：*

在第一个程序中

```
static void Main(string[] args)
        {
            test objtest = new test();
            objtest.Name = "vikas"; // **I am assigning this value**
            Test(objtest);
            //objtest = null; when I uncomment this line it shows me exception
            Console.WriteLine(objtest.Name);
            Console.ReadLine();
        }

        private static void Test(test objtest)
        {
            objtest.Name = "chetan";
            objtest = null;
        } 
```

为什么它显示“chetan”而不是“vikas”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:45:54.350

由按值传递的引用类型引起的经典混淆。

*我将在这里给出一个相当简短的答案；那些有兴趣了解更多和深入的人非常欢迎阅读由 Lee Richardson撰写的关于[C# 中的参数传递的](http://www.yoda.arachsys.com/csharp/parameters.html)Jon Skeet 文章和[类似的带有图表的文章。](http://rapidapplicationdevelopment.blogspot.co.il/2007/01/parameter-passing-in-c.html)*

简而言之，引用类型是任何非原始或结构的类型。因此，任何自定义类都是引用类型。

当将此类的实例传递给函数时，实际发生的是传递了*指向*该实例的指针。更准确地说，指针的副本正在传递，因为默认情况下参数是按值传递的。

当你有这条线时：

```
test objtest = new test(); 
```

`test`正在创建该类的新实例并在内存中分配地址。每次引用变量`objtest`时，都会使用该地址，例如：

```
objtest.Name = "vikas"; 
```

运行时引擎将转到创建实例时分配的地址，查找为属性*名称*保留的位置并将那里的内容更改为“vikas”。对于此实例，更改是即时且永久的。

当你有这样的函数签名时：

```
private static void Test(test objtest) 
```

“幕后”传递的实际参数是*内存中实例的地址*。每当您在函数内部引用参数`objtest`时，运行时引擎都会转到作为实际参数传递的地址。所以在函数中有这一行：

```
objtest.Name = "chetan"; 
```

和把它放在函数外完全一样：它会在传递的内存地址中寻找为属性*名称*保留的位置，并将那里的内容更改为“chetan”。再一次，这种变化对于那个例子来说是立即和永久的。对于这件事（更改属性），您是否正在使用`ref`并不重要，因为您正在处理引用类型。

**但是**，按值传递（例如，没有`ref`关键字）意味着正在复制内存地址，而函数只获取副本，非常类似于传递整数。对副本的任何更改都不会影响原始值。因此，当您*在函数*中有此行时：

```
objtest = null; 
```

您将副本更改为不指向任何内容，但是函数外部的变量仍然指向相同的地址并且不会为空。

如果您有这样的函数签名：

```
private static void Test(ref test objtest) 
```

那么这意味着地址本身是通过引用传递的，因此更改保存地址的变量也会导致它在函数之外被更改。

这几乎总结了它，我没有在这里带来任何新东西，只是用我认为更简单的解释来澄清事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:40:53.630

您在将参数传递给函数时遇到问题。

默认参数按值传递。

将参数重新分配到不同内存位置的尝试仅在方法内部起作用，`Test`并且不会影响`objtest`Main 方法中的原始变量。

因此，在两种情况下，当您`ref`在函数中添加参数时，`Test`行为将是相同的，因为方法内部发生的所有更改都会`Test`影响 Main 方法中的原始对象`objtest`。

带有 ref 参数的问题的第一个示例：

```
 class Program
    {
        static void Main(string[] args)
        {
            test objtest = new test();
            objtest.Name = "vikas";
            Test(ref objtest);
            //objtest = null; when I uncomment this line it shows me exception
            Console.WriteLine(objtest.Name);
            Console.ReadLine();
        }

        private static void Test(ref test objtest)
        {
            objtest.Name = "chetan";
            objtest = null;
        }
    }

    class test
    {
        private string _Name = string.Empty;
        public string Name
        {
            get
            {
                return _Name;
            }
            set
            {
                _Name = value;
            }
        }
    } 
```

在第二个示例中，首先将 null 设置为原始对象，然后您要读取属性名称，因此您将获得`NullReferenceException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:19:29.373

好吧，您正在使用一个值为 的对象`null`，这会导致异常。`null`引用类型的意思是“指向零”。当您尝试访问存储在地址零处的值时，您会得到一个`NullReferenceException`.

您在访问该属性之前设置`objtest`为，因此您试图访问存储在地址零处的对象的属性，这是没有意义的。`null``Name``Name`

# java - Hibernate 从数据库中获取列表

> ID：14423664
> 
> 赞同：13
> 
> 时间：2013-01-20T10:38:41.623
> 
> 标签：java, hibernate

在以下代码中，我试图获取包含数据库中所有产品的产品列表：

```
public List<Products> getAllProducts() throws Exception{
    try{
     List<Products> products ;
    org.hibernate.Transaction tx = session.beginTransaction();
    products = session.createSQLQuery("SELECT * FROM Products").list();
    if(products.size() > 0)
    {
        return products;
    }
    return null;  
    }
    catch(Exception e)
    {
        throw e;
    }
} 
```

但是抛出了这个异常：

```
[Ljava.lang.Object; cannot be cast to mediatek.Products 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-20T17:54:48.027

```
List<Products> list = session.createCriteria(Products.class).list(); 
```

这将为您提供数据库中产品表的所有记录

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T17:21:57.753

您的回答不仅增加了演员阵容，而且从 SQL 切换到 HQL。由于您的第二个查询是在 HQL 中，Hibernate 能够使用映射信息来知道要返回什么类。这是在 Hibernate 中做事的首选方式，但如果您出于某种原因必须使用 SQL，您可以通过以下方式实现相同的目标：

```
(List<Products>)session.createSQLQuery("SELECT * FROM Products").addEntity(Products.class).list(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-30T20:47:25.697

在 Hibernate 5 中，这些`session.createCriteria`方法已被弃用。您将需要[`CriteriaBuilder`](https://docs.jboss.org/hibernate/jpa/2.1/api/javax/persistence/criteria/CriteriaBuilder.html)从那里使用和查询来获取产品的通用列表，而不仅仅是`List`.

进口

```
import javax.persistence.criteria.CriteriaBuilder;
import javax.persistence.criteria.CriteriaQuery; 
```

代码

```
CriteriaBuilder builder = session.getCriteriaBuilder();
CriteriaQuery<Products> criteria = builder.createQuery(Products.class);
criteria.from(Products.class);
List<Products> products = session.createQuery(criteria).getResultList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T11:07:48.210

忘记键入转换查询。它现在正在工作。

```
List<Products> products  = (List<Products>) session.createQuery("from Products").list(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-14T04:52:29.700

如果您使用 sql 查询，则应在查询的最后添加此行以获得所需的列表：

```
.setResultTransformer(Transformers.aliasToBean(testDTO.class)).list(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-17T23:11:23.843

例如你有代码：

```
Session session = getSessionFactory().openSession();
Transaction transaction = null;
try {
SQLQuery sqlQuery = session.createSQLQuery("SELECT * FROM schema.yourtable WHERE param = :param");
            sqlQuery.setString("param", "someParam"); 
```

如果您的下一步是：

```
List list = sqlQuery.list(); 
```

您将收到带有行的列表。您可以在调试中看到您的 Entity.class 参数，但 cat 使用您的实体转换为 List：

```
List<Entity> list = (List<Entity>) sqlQuery.list(); 
```

> 在这一点上将出现 ClassCastException！

如果您需要收到带有实体的列表，则必须将实体类型添加到 sql 查询中：

```
List<Entity> list = (List<Entity>)sqlQuery.addEntity(Entity.class).list(); 
```

就这样。我希望有人会帮忙。

# windows-phone-8 - 如何将gif图片保存到相机胶卷或WP8中保存的图片？

> ID：14423665
> 
> 赞同：2
> 
> 时间：2013-01-20T10:39:07.310
> 
> 标签：windows-phone-8

我想将 gif 图片保存到相机胶卷或保存的图片中，但我还没有找到有效的方法来做到这一点。Microsoft.Xna.Framework.Media.MediaLibrary 可以保存 jpeg 文件，我尝试用这种方法保存 gif 文件，但它只用 jpeg fomat 保存第一帧。

我发现诺基亚 Cinemagraph 可以保存 GIF 文件，我可以在将保存的 gif 文件复制到另一个没有 npo 文件的文件夹时播放。我可以像带有 WP8 SDK 的 Cinemagraph 那样做吗？如果不能使用 C#，那么使用 Windows Phone 运行时或纯 C++ 也可以。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:29:32.193

据我所知，没有办法将 .gif 文件保存到相机胶卷中。但是，您可以先将 .gif 文件更改为 .jpg 格式，而不是保存 .gif 文件。

作为第一步，您必须将 .gif 文件转换为 WriteableBitmap。因为它可以保存任何 UIElement。

```
WriteableBitmap bitmap = new WriteableBitmap(".gif file",null); 
```

最后，我们可以使用以下步骤从`WriteableBitmap`

```
using (MemoryStream s = new MemoryStream())
{
     bitmap.SaveJpeg(s, (int)ContentPanel.Width, (int)ContentPanel.Height, 0, 100);
} 
```

可以使用以下方法将此流位保存到相机胶卷中。

```
lib.SavePictureToCameraRoll("A",s); 
```

# magento - 我如何使用 ORDER BY FIELD 对 magento 产品集合进行排序

> ID：14423666
> 
> 赞同：4
> 
> 时间：2013-01-20T10:39:10.627
> 
> 标签：magento

我有一个自定义产品属性，实际上具有三个可能的值“Frühjahr/Sommer”、“Herbst/Winter”、“”（空）。

我想按预定义的顺序按此值对产品集合进行排序，例如“Frühjahr/Sommer”、“Herbst/Winter”、“”或“Herbst/Winter”、“Frühjahr/Sommer”、“”

这是交替的。空值应该总是在最后，但可能会有更多的值出现，所以它必须是一个固定的预定义顺序。

我需要执行以下 MySQL ORDER BY FIELD (saison, "Frühjahr/Sommer", "Herbst/Winter", "")

问题是我不知道如何在 Magento 中执行这个命令。我知道“->setOrder”-方法，但我需要提交固定顺序而不是使用 DESC 或 ASC。

我在 stackoverflow 和 google 上搜索了很多，但到目前为止没有答案。

我希望你能帮帮我

谢谢

**[编辑回应 magalter 的回答]**

不幸的是它不起作用我之前尝试过：

```
$this->_collection->getSelect()->order(new Zend_Db_Expr("FIELD(season, 'Frühjahr/Sommer','Herbst/Winter','')")); 
```

结果是“处理您的请求时出错。

```
$this->_collection->getSelect(); 
```

返回：

```
SELECT `e`.*, `cat_index`.`position` AS `cat_index_position`, `price_index`.`price`, `price_index`.`tax_class_id`, `price_index`.`final_price`, IF(price_index.tier_price IS NOT NULL, LEAST(price_index.min_price, price_index.tier_price), price_index.min_price) AS `minimal_price`, `price_index`.`min_price`, `price_index`.`max_price`, `price_index`.`tier_price` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='124' INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0 ORDER BY FIELD(season, 'Frühjahr/Sommer','Herbst/Winter','') 
```

我在 phpMyAdmin 中执行了这个 sql 语句，并收到以下错误消息“'order clause' 中的未知列 'season'”

如果我按“季节” DESC 订购

```
$this->_collection->setOrder('season', 'DESC'); 
```

它工作......并生成以下sql语句

```
SELECT `e`.*, `cat_index`.`position` AS `cat_index_position`, `price_index`.`price`, `price_index`.`tax_class_id`, `price_index`.`final_price`, IF(price_index.tier_price IS NOT NULL, LEAST(price_index.min_price, price_index.tier_price), price_index.min_price) AS `minimal_price`, `price_index`.`min_price`, `price_index`.`max_price`, `price_index`.`tier_price`, IF(season_option_value_t2.value_id IS NULL, season_option_value_t1.value, season_option_value_t2.value) AS `season` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='124' INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0 LEFT JOIN `catalog_product_entity_int` AS `season_t1` ON e.entity_id=season_t1.entity_id AND season_t1.attribute_id='180' AND season_t1.store_id=0 LEFT JOIN `catalog_product_entity_int` AS `season_t2` ON e.entity_id=season_t2.entity_id AND season_t2.attribute_id='180' AND season_t2.store_id='1' LEFT JOIN `eav_attribute_option_value` AS `season_option_value_t1` ON season_option_value_t1.option_id=IF(season_t2.value_id > 0, season_t2.value, season_t1.value) AND season_option_value_t1.store_id=0 LEFT JOIN `eav_attribute_option_value` AS `season_option_value_t2` ON season_option_value_t2.option_id=IF(season_t2.value_id > 0, season_t2.value, season_t1.value) AND season_option_value_t2.store_id=1 ORDER BY `season` DESC 
```

但这是 DESC 的顺序，而不是我想要的预定义顺序，所以我不能使用它。

我需要的是上面的 SQL 语句

```
ORDER BY FIELD(season, 'Frühjahr/Sommer','Herbst/Winter','') 
```

反而

```
ORDER BY `season` DESC 
```

另一个想法？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T10:49:23.430

尝试使用 Zend_DB_Select 命令而不是 Magento 的 setOrder 方法

```
$colection->getSelect()->order(..) 
```

例子：

```
->order(array('line_items_per_product DESC',
                       'product_id')); 
```

有关更多示例，请参见 [http://framework.zend.com/manual/1.12/ru/zend.db.select.html#zend.db.select.building.order](http://framework.zend.com/manual/1.12/ru/zend.db.select.html#zend.db.select.building.order)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T17:09:07.063

最后，我找到了解决方案。也许另一个用户需要它，所以它是：

（可能不是最好的解决方案，但它有效）

我创建了一个新的 Modul 并扩展了 Mage_Catalog_Block_Product_List_Toolbar。然后我像这样覆盖“setCollection”-Method

```
public function setCollection($collection)
{
    $this->_collection = $collection;

    $this->_collection->setCurPage($this->getCurrentPage());

    // we need to set pagination only if passed value integer and more that 0
    $limit = (int)$this->getLimit();
    if ($limit) {
        $this->_collection->setPageSize($limit);
    }
    if ($this->getCurrentOrder()) {
        $mySource = $this->_collection->getEntity()->getAttribute('season');

        $mySource = $this->_collection->getEntity()->getAttribute('season')->getSource(); //Mage_Eav_Model_Entity_Attribute_Source_Table
        $collection = $this->_collection;
        $valueTable1    = 'season_t1';
        $valueTable2    = 'season_t2';

        $collection->getSelect()
            ->joinLeft(
                array($valueTable1 => $mySource->getAttribute()->getBackend()->getTable()),
                "e.entity_id={$valueTable1}.entity_id"
                . " AND {$valueTable1}.attribute_id='{$mySource->getAttribute()->getId()}'"
                . " AND {$valueTable1}.store_id=0",
                array()
            )
            ->joinLeft(
                array($valueTable2 => $mySource->getAttribute()->getBackend()->getTable()),
                "e.entity_id={$valueTable2}.entity_id"
                . " AND {$valueTable2}.attribute_id='{$mySource->getAttribute()->getId()}'"
                . " AND {$valueTable2}.store_id='{$collection->getStoreId()}'",
                array()
            );
        $valueExpr = $collection->getSelect()->getAdapter()
        ->getCheckSql("{$valueTable2}.value_id > 0", "{$valueTable2}.value", "{$valueTable1}.value");

        Mage::getResourceModel('eav/entity_attribute_option')
            ->addOptionValueToCollection($collection, $mySource->getAttribute(), $valueExpr);

        $sortBySeason = "FIELD(IF(season_option_value_t2.value_id IS NULL, season_option_value_t1.value, season_option_value_t2.value), ";

        $getSelectedSeason = Mage::getStoreConfig('sortproductsbyseason_options/general/current_season');

        if($getSelectedSeason == "herbst_winter"){
            $sortBySeason .= "'Frühjahr/Sommer', 'Herbst/Winter' ,''";
        }else{
            $sortBySeason .= "'Herbst/Winter', 'Frühjahr/Sommer' ,''";
        }
        $sortBySeason .= ") DESC";

        $this->_collection->getSelect()->order(new Zend_Db_Expr($sortBySeason));

        $this->_collection->setOrder($this->getCurrentOrder(), $this->getCurrentDirection());
    }

    return $this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:25:33.977

那这个呢？？

```
$collection = Mage::getModel('catalog/category')->load($categoryId)
    ->getProductCollection()
    ->addAttributeToSort('name', 'ASC'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-13T06:35:02.430

```
$products->addAttributeToSelect('*')->setOrder('cat_index_position','ASC');;        
$products->getSelect()->order(new \Zend_Db_Expr("CASE WHEN `cat_index_position` = '0' THEN 9999 ELSE `cat_index_position` END")); 
```

对我来说，这个答案有效， [https://magento.stackexchange.com/a/121234/71417](https://magento.stackexchange.com/a/121234/71417)

# jquery - 在 jQuery 中创建带有动作的函数

> ID：14423668
> 
> 赞同：0
> 
> 时间：2013-01-20T10:39:34.033
> 
> 标签：jquery, function, eval

我想创建功能：

```
$('#element').myFunct(function(){
    alert('1');
}); 
```

尝试这样的事情：

```
$.fn.outClick = function(fn){
    eval(fn);

    //OR

    $.globalEval(fn);
} 
```

可以使用这个解决方案：

```
$.fn.outClick = function(fn){
    $.globalEval('myFn='+fn);
    myFn();
} 
```

但这不是一个好的解决方案。

有什么正确的方法吗？

# java - 春天的ModelAndView

> ID：14423670
> 
> 赞同：1
> 
> 时间：2013-01-20T10:40:09.193
> 
> 标签：java, spring

在春天，当控制返回视图时，我已经看到它返回，

```
return new ModelAndView("contact", "command", new Contact()); 
```

但是我看到了一个示例，其中仅返回一个字符串名称，如下所示，

```
 @RequestMapping("/index")
    public String listContacts(Map<String, Object> map) {

        map.put("contact", new Contact());
        map.put("contactList", contactService.listContact());

        return "contact";
    } 
```

这也是有效的还是一个好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:28:23.763

控制器中的这种类型的请求映射以及将模型传递到视图页面是新 Spring MVC 最令人兴奋和有用的方面。像这样写请求映射方法是完全可以的。有趣的是`return new ModelAndView("contact", "command", new Contact());`，这种类型的return语句正在日益消失。

干杯和快乐的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:52:46.227

是的，返回一个字符串是有效的。它将被解释为视图名称（[ref](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html)）：

> 一个字符串值，它被解释为视图名称，模型通过命令对象和 ModelAttribute 注释的引用数据访问器方法隐式确定。

这是一个好习惯吗？

让我们说这是一个品味问题。（我的观点是这种*风格*需要更多关于Spring MVC 的*隐式行为*的知识，所以我不*喜欢*它，因为它使不了解所有这些*隐式行为*的人更难以理解代码，但它实际上只是个人的偏爱...）

# html - 仅使用 CSS 显示树列表的最佳方法（无图像或 JS，内部示例）

> ID：14423671
> 
> 赞同：16
> 
> 时间：2013-01-20T10:40:29.240
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-20T11:29:25.920

我能想到的最好的方法是一些（不幸的是令人遗憾）嵌套和使用生成的内容（所以它确实需要一个非常最新的浏览器，所以[IE < 8](http://www.quirksmode.org/css/contents.html#t15)看起来不会非常漂亮），但是，也就是说，鉴于 HTML：

```
ul {
  padding: 0;
  margin: 0;
  list-style-type: none;
  position: relative;
}
li {
  list-style-type: none;
  border-left: 2px solid #000;
  margin-left: 1em;
}
li div {
  padding-left: 1em;
  position: relative;
}
li div::before {
  content:'';
  position: absolute;
  top: 0;
  left: -2px;
  bottom: 50%;
  width: 0.75em;
  border: 2px solid #000;
  border-top: 0 none transparent;
  border-right: 0 none transparent;
}
ul > li:last-child {
  border-left: 2px solid transparent;
}
```

```
<ul>
  <li><div>Level 1</div></li>
  <li><div>Level 1</div>
    <ul>
      <li><div>Level 2</div></li>
      <li><div>Level 2</div>
        <ul>
          <li><div>Level 3</div></li>
          <li><div>Level 3</div></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><div>Level 1</div></li>
</ul>
```

我们得到这个：

[![链接到 JS Fiddle 演示。](../Images/158608afceb4da208b8c5dd4ef9e9a08.png)](http://jsfiddle.net/davidThomas/Ljnhc/1/)

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Ljnhc/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-12T05:57:33.093

这是大卫解决方案的一个分支，消除了对`<div>`每个额外的需求`<li>`：

```
ul {
  padding: 0;
  margin: 0;
  list-style-type: none;
  position: relative;
}
li {
  border-left: 2px solid #000;
  margin-left: 1em;
  padding-left: 1em;
  position: relative;
}
li li {
  margin-left: 0;
}
li::before {
  content:'┗';
  color: #000;
  position: absolute;
  top: -5px;
  left: -9px;
}
ul > li:last-child {
  border-left: 2px solid transparent;
}
```

```
<ul>
  <li>Level 1</li>
  <li>Level 1
    <ul>
      <li>Level 2</li>
      <li>Level 2
        <ul>
          <li>Level 3</li>
          <li>Level 3</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Level 1</li>
</ul>
```

[JS Bin 上的演示](http://jsbin.com/layewuf/edit?html,css,output)

# directx - Effects framework "ConstructGSWithSO" to plain HLSL and C++

> ID：14423673
> 
> 赞同：0
> 
> 时间：2013-01-20T10:40:32.030
> 
> 标签：directx, hlsl

How do I convert such technique (from nVidia InstancedTesselation sample) to plain HLSL + DirectX 11 C++ code?

```
float4 PreprocessedLoDVS( uint id : SV_InstanceID, uniform int method) : LODS
{
    float4 tessLevel;
    if (method == 1)    //Gregory
    {
        float3 positionControlPoints[20];
        //  8     9     10     11
        // 12   0\1     2/3    13
        // 14   4/5     6\7    15
        // 16    17     18     19
        LoadGregoryPositionControlPoints(id, positionControlPoints);
        tessLevel.x = evaluateEdgeLoD(positionControlPoints[16], positionControlPoints[14], positionControlPoints[12], positionControlPoints[8]);
        tessLevel.y = evaluateEdgeLoD(positionControlPoints[19], positionControlPoints[15], positionControlPoints[13], positionControlPoints[11]);
        tessLevel.z = evaluateEdgeLoD(positionControlPoints[16], positionControlPoints[17], positionControlPoints[18], positionControlPoints[19]);
        tessLevel.w = evaluateEdgeLoD(positionControlPoints[8], positionControlPoints[9], positionControlPoints[10], positionControlPoints[11]);
    }
    else if (method == 0) {  //Regular
        float3 positionControlPoints[16];
        //  0     1     2     3
        //  4     5     6     7    
        //  8     9     10    11
        //  12    13    14    15
        LoadRegularControlPoints(id, positionControlPoints);
        tessLevel.x = evaluateEdgeLoD(positionControlPoints[ 0], positionControlPoints[ 4], positionControlPoints[ 8], positionControlPoints[12]);
        tessLevel.y = evaluateEdgeLoD(positionControlPoints[ 3], positionControlPoints[ 7], positionControlPoints[11], positionControlPoints[15]);
        tessLevel.w = evaluateEdgeLoD(positionControlPoints[ 0], positionControlPoints[ 1], positionControlPoints[ 2], positionControlPoints[ 3]);
        tessLevel.z = evaluateEdgeLoD(positionControlPoints[12], positionControlPoints[13], positionControlPoints[14], positionControlPoints[15]);
    }
    else if (method == 2) {  //Bezier
        float3 positionControlPoints[16];
        //  0     1     2     3
        //  4     5     6     7    
        //  8     9     10    11
        //  12    13    14    15
        LoadBezierPositionControlPoints(id, positionControlPoints);
        tessLevel.x = evaluateEdgeLoD(positionControlPoints[ 0], positionControlPoints[ 4], positionControlPoints[ 8], positionControlPoints[12]);
        tessLevel.y = evaluateEdgeLoD(positionControlPoints[ 3], positionControlPoints[ 7], positionControlPoints[11], positionControlPoints[15]);
        tessLevel.z = evaluateEdgeLoD(positionControlPoints[12], positionControlPoints[13], positionControlPoints[14], positionControlPoints[15]);
        tessLevel.w = evaluateEdgeLoD(positionControlPoints[ 0], positionControlPoints[ 1], positionControlPoints[ 2], positionControlPoints[ 3]);
    }
    else if (method == 3) {  //Pm
        //          18  14  13   12                             
        //          19           8         
        //          20           7              
        //          0   1   2    6                 
        float3 positionControlPoints[24];
        LoadPmControlPoints(id, positionControlPoints);
        tessLevel.x = evaluateEdgeLoD(positionControlPoints[ 0], positionControlPoints[20], positionControlPoints[19], positionControlPoints[18]);
        tessLevel.y = evaluateEdgeLoD(positionControlPoints[ 6], positionControlPoints[ 7], positionControlPoints[ 8], positionControlPoints[12]);
        tessLevel.z = evaluateEdgeLoD(positionControlPoints[18], positionControlPoints[14], positionControlPoints[13], positionControlPoints[12]);
        tessLevel.w = evaluateEdgeLoD(positionControlPoints[ 0], positionControlPoints[ 1], positionControlPoints[ 2], positionControlPoints[ 6]);
    }
    else {
        tessLevel=float4(2,2,2,2);
    }
    return tessLevel;
}

technique10 LoDRegularTechnique
{
    pass P0
    {
        SetDepthStencilState( DisableDepthWrites, 0 );

        SetVertexShader( CompileShader( vs_4_0, PreprocessedLoDVS(0) ) );
        SetGeometryShader( ConstructGSWithSO( CompileShader( vs_4_0, PreprocessedLoDVS(0) ), "LODS.xyzw" ) );
        SetPixelShader( NULL );
    }
} 
```

`PreprocessedLoDVS` looks like usual vertex shader, except "LODS" signature, and what about geometry shader?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:17:22.903

这个[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205122%28v=vs.85%29.aspx)很好地解释了它，但基本上是为了总结。

使用 PreprocessedLoDVS 和 vs_4_0 作为配置文件将着色器编译为 blob

创建一个 Stream 输出布局，它是一个[D3D11_SO_DECLARATION_ENTRY](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476216%28v=vs.85%29.aspx)数组，它将是具有 4 个组件的 LODS 语义。

[使用CreateGeometryShaderWithStreamOut](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476510%28v=vs.85%29.aspx)创建顶点着色器

创建一个带有 D3D11_BIND_STREAM_OUTPUT 标志的缓冲区（与创建任何其他缓冲区一样，从该样本中您还需要着色器资源标志，因为您需要 SRV 绑定回作为缓冲区输入）。

将此缓冲区绑定到流输出（使用[SOSetTargets](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476484%28v=vs.85%29.aspx)）

将您的顶点着色器设置为管道并进行绘图调用。

# java - Change date format to Oracle Date Format

> ID：14423677
> 
> 赞同：2
> 
> 时间：2013-01-20T10:41:28.340
> 
> 标签：java, oracle10g

I am reading few data from a text file using java code,along with date in format (30-OCT-2012 12-22-44-991) and i want to store these details in Oracle Database but in the same format as used by oracle. I tried To_date but of no use, it gives error. Kindly help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:44:02.917

在 Java 中使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将您的 String 解析为`java.util.Date`. 然后使用 a`PreparedStatement`并[在其上设置日期](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setDate%28int,%20java.sql.Date%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:53:12.337

**编辑：** 您可以使用`PreparedStatement`Aleksander Blomskøld 已经建议的方法，并在[Using Oracle to_date function for date string with milliseconds](https://stackoverflow.com/questions/9180014/using-oracle-to-date-function-for-date-string-with-milliseconds)的帮助下：

```
final sql = "INSERT into IFT_VEHICLE_STATUS (LATITUDE, LONGITUDE, UPDATED_AT) " +
            "VALUES (?, ?, to_timestamp(?, 'DD.MM.YYYY HH24:MI:SS:SSFF3'))";
final PreparedStatement pstmt = con.prepareStatement(sql);
pstmt.setInt(1, 81000000);
pstmt.setInt(2, 162000000);
pstmt.setDate(3, oracleDate);

pstmt.execute(); 
```

**老：** 你想把 a 转换`java.util.Date`成 a`java.sql.Timestamp`吗？你可以这样做：

```
try {
    final Date javaUtilDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("2012-01-20 11:46:06");
    System.out.println("javaUtilDate = " + javaUtilDate);
    final Timestamp oracleDate = new Timestamp(javaUtilDate.getTime());
    System.out.println("oracleDate = " + oracleDate);
} catch (ParseException e) {
    e.printStackTrace();
} 
```

这将给出以下输出：

```
javaUtilDate = Fri Jan 20 11:46:06 CET 2012
oracleDate = 2012-01-20 11:46:06.0 
```

# c# - I want to recursively list the nodes in xml

> ID：14423681
> 
> 赞同：-1
> 
> 时间：2013-01-20T10:42:04.993
> 
> 标签：c#, .net, xml

I recursively want to display xml nodes. But unfortunately it doesn't work. The output is only the first element of the xml file. Why?

```
public string GetOutline(int indentLevel, XmlNode xnod)
{
        StringBuilder result = new StringBuilder();
        XmlNode xnodWorking;

        result = result.AppendLine(new string('-', indentLevel * 2) + xnod.Name);

        if (xnod.NodeType == XmlNodeType.Element)
        {
            if (xnod.HasChildNodes)
            {
                xnodWorking = xnod.FirstChild;
                while (xnodWorking != null)
                {
                    GetOutline(indentLevel + 1, xnodWorking);
                    xnodWorking = xnodWorking.NextSibling;

                }
            }

        }
        return result.ToString();
} 
```

Here the code calling the function. The XML file begins with `<Videos>` then `<Video>`... etc...

```
private void button2_Click(object sender, EventArgs e)
{
        SaveFileDialog fDialog = new SaveFileDialog();
        fDialog.Title = "Save XML File";
        fDialog.FileName = "drzewo.xml";
        fDialog.CheckFileExists = false;
        fDialog.InitialDirectory = @"C:\Users\Piotrek\Desktop";

        if (fDialog.ShowDialog() == DialogResult.OK)
        {
            using (var newXmlFile = File.Create(fDialog.FileName));
            {
                string xmlTree = fDialog.FileName.ToString();

                XmlDocument xdoc = new XmlDocument();
                xdoc.Load(XML);

                XmlNode xnodDE = xdoc.DocumentElement;

                textBox2.Text = GetOutline(0, xnodDE);

                //StringBuilder result = new StringBuilder();

                /*
                foreach (var childelement in xdoc.DescendantNodes().OfType<XElement>()
                    .Select(x => x.Name).Distinct()) 
                {
                   result.Append(childelement + Environment.NewLine );

                }
                textBox2.Text = result.ToString();
                */

                using (StreamWriter sw = File.AppendText(xmlTree))
                {
                    sw.Write(textBox2.Text);
                }
            }
} 
```

XML content :

```
<Videos>
  <Video>
    <Title>The Distinguished Gentleman</Title>
    <Director>Jonathan Lynn</Director>
    <Actors>
      <Actor>Eddie Murphy</Actor>
      <Actor>Lane Smith</Actor>
      <Actor>Sheryl Lee Ralph</Actor>
      <Actor>Joe Don Baker</Actor>
    </Actors>
    <Length>112 Minutes</Length>
    <Format>DVD</Format>
    <Rating>R</Rating>
  </Video>
  <Video>
    <Title>Her Alibi</Title>
    <Director>Bruce Beresford</Director>
    <Length>94 Mins</Length>
    <Format>DVD</Format>
    <Rating>PG-13</Rating>
  </Video>
</Videos> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:24:33.087

试试看

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Xml;
using System.Xml.Linq;

namespace testStackOverflow
{
class Program
{
    static void Main(string[] args)
    {

        //Load xml
        XDocument xdoc = XDocument.Load("test.xml");

        //Run query
        var lv1s = from lv1 in xdoc.Descendants("Video")
                   select new
                   {
                       title = lv1.Element("Title").Value
                   };

        //Loop through results
        foreach (var lv1 in lv1s)
        {
            Console.WriteLine(lv1.title);
        }

        Console.ReadLine();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:48:26.080

您需要使用 for each 或 while 指令逐行阅读所有文档

```
XmlReader reader = XmlReader.Create(your xml file);
        reader.MoveToContent();

        while (reader.Read())
        {
            // your code
        }

        reader.Close(); 
```

不是最好的方法，试着看看 linq to xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T10:56:06.777

您没有做任何事情来将递归调用的结果添加到您正在构建的字符串中。你需要这样做：

```
result.Append(GetOutline(indentLevel + 1, xnodWorking)); 
```

并且这个修改应该避免文本节点和同名节点：

```
public string GetOutline(int indentLevel, XmlNode xnod)
{
    StringBuilder result = new StringBuilder();
    XmlNode xnodWorking;

    result = result.AppendLine(new string('-', indentLevel * 2) + xnod.Name);

    if (xnod.HasChildNodes)
    {
        List<string> foundElements = new List<string>();
        xnodWorking = xnod.FirstChild;
        while (xnodWorking != null)
        {
            if(xnodworking.NodeType == XmlNodeType.Element && !foundElements.Contains(xnodworking.Name))
            {
                result.Append(GetOutline(indentLevel + 1, xnodWorking));
                foundElements.Add(xnodworking.Name);
            }
            xnodWorking = xnodWorking.NextSibling;
        }
    }

    return result.ToString();
} 
```

# ios - How to add a custom view just below nav bar in a tableview controller?

> ID：14423682
> 
> 赞同：0
> 
> 时间：2013-01-20T10:42:22.873
> 
> 标签：ios, objective-c

I'm trying to create an interface like this

![enter image description here](../Images/043659596b8b053ffcfe7fa38898d2bb.png)

Where I have a piece of torn paper with drop shadow that sits below the nav bar but above my tableview.

I use the following code in my tableview controller

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.view addSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed: @"ripped-paper"]]];
} 
```

This works fine except the ripper paper scrolls with the table view. I require it to stay fixed under the navbar.

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:20:49.763

在 iOS 6 中，您可以只使用`shadowImage`.[`UINavigationBar`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)

```
UIImage *image = [[image imageNamed:@"tornPaper"] resizableImageWithCapInsets:UIEdgeInsetsMake(/* Your insets here */)];
self.navigationItem.navigationBar.shadowImage = image; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:55:29.617

您可以尝试将图像添加到表视图控制器`self.view.superview`：

```
 [self.view.superview addSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed: @"ripped-paper"]]]; 
```

不过，您应该在 中执行此`viewDidAppear`操作（否则 self.view.superview 将不会设置）。

这可能还需要更改框架/中心，或多或少像这样：

```
 UIImageView* rippedView = [[UIImageView alloc] initWithImage:[UIImage imageNamed: @"ripped-paper"]];
  rippedView.center = <SET CENTER HERE>;
  [self.view.superview addSubview:rippedView]; 
```

但最终它将在很大程度上取决于您的视图层次结构。

编辑：

对于您的自动旋转问题，请尝试设置视图 autoresizingMaks

```
rippedView.autoresizingMaks = UIViewAutoresizingNone; 
```

看看情况是否有所改善。这样，图像视图不应在旋转时调整大小。（另外：你在轮换方法中做了什么吗？）

# java - How to Determine XML layout for Fragments in Tabs?

> ID：14423683
> 
> 赞同：1
> 
> 时间：2013-01-20T10:42:43.463
> 
> 标签：java, android, android-layout, android-fragments

Okay, So I just started Android development (I am average at VB.Net, so I understand basic code even if its not in VB). I've made a couple play around apps which used Text-To-Speech, Async Tasks and Reading/Writing files. However, I now wish to make a tabbed Android app.

I started the project in Eclipse Juno and filled in all the details. I then selected (For navigation) the `Tabs/Swipe` layout. I now have the default code for that layout type (Link to Tabs on developer.android.com - [http://developer.android.com/design/building-blocks/tabs.html](http://developer.android.com/design/building-blocks/tabs.html)).

I understand mostly what the default code is doing. The only problem I am having, is determining the individual layout of my `Tabs`. I wish to have 2 `Tabs`, 1 in which the user selects an option, and the other, in which an image is shown depending on the selection in `Tab 1`.

So the question is: How do I create a `.xml` file in `Layout` to determine what is shown on the `Fragment`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:28:15.907

如果您想在 XML 中执行此操作，答案很简单，不能仅使用 XML 完成，您必须创建一个实现**ActionBar.TabListener**的类。

比您可以覆盖可以交换内容的**onTabSelected**方法。
一个合适的解决方案是：
使用 LinearLayout 作为根容器，并为每个选项卡实现两个片段（在那里您可以设计单独的 XML 布局）。现在，您可以最初将一个片段添加到根容器并在 onTabSelected 方法中实现布局交换，您就完成了。

# mysql - 错误 1142：SELECT 和 LOCK TABLE 命令被拒绝

> ID：14423686
> 
> 赞同：0
> 
> 时间：2013-01-20T10:43:38.913
> 
> 标签：mysql, mysqldump, mysql-workbench, mysql-error-1142

我重新安装了运行 MySQL 的服务器。我使用 MySQL Workbench 创建了数据库的备份。现在我正在尝试通过相同的程序将转储导入数据库，但出现以下错误：

```
ERROR 1142 (42000) at line 656: SELECT,LOCK TABL command denied to user 'root'@'MIKKOS' for table 'events_waits_summary_by_thread_by_event_name' 
```

我认为 root 拥有完全的权限。我运行了以下内容，但在执行此操作后，上一个查询出现了相同的错误：

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION 
```

它在本地运行时也会出现（root@localhost）。

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-24T14:09:09.550

检查转储文件中包含哪些数据库 MySQL Workbench。我相信它默认转储所有内容，包括像`user`和`performance_schema`. 这些就是问题所在，您的授权表可能很好。

删除不需要的数据库，尤其是`performance_schema`MySQL 可能会毫无错误地导入转储文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T11:21:08.613

重新安装较新的 MySQL 服务器后，您需要修复内部表结构。为此，请尝试：

```
REPAIR TABLE `events_waits_summary_by_thread_by_event_name`; 
```

如果有的话，最好删除数据库并从完整的 mysql 数据库转储中恢复它。

# javascript - 使用 javascript 隐藏和显示多个 html 元素

> ID：14423688
> 
> 赞同：0
> 
> 时间：2013-01-20T10:43:44.193
> 
> 标签：javascript, html

我在这里有一些表格，并使用下面的这个**javascript**，我让它们在每次用户点击他们的**按钮时****隐藏和显示**。我想在这个脚本中添加的是，当有人点击一个表格的按钮来显示时，其他的都被隐藏了。知道我该怎么做吗？先感谢您！

 ****这是我的html代码：**

```
<table id="SC1_TH_" class="header_op"><tr><td>
<div id="SC1_BSH_" onClick="SC[1]();" class="hide_button">*</div>OPTION ONE
</td></tr></table>
<div id="SC1_BO_" style="display:dlock;">BLAH BLAH</div>

<table id="SC2_TH_" class="header_cl"><tr><td>
<div id="SC2_BSH_" onClick="SC[2]();" class="show_button">*</div>OPTION ONE
</td></tr></table>
<div id="SC2_BO_" style="display:none;">BLAH BLAH</div>

<table id="SC3_TH_" class="header_cl"><tr><td>
<div id="SC3_BSH_" onClick="SC[3]();" class="show_button">*</div>OPTION ONE
</td></tr></table>
<div id="SC3_BO_" style="display:none;">BLAH BLAH</div> 
```

**这是我的 JavaScript：**

```
<script type="text/javascript">

var SC = [];

for (var i = 1; i < 10; i++) {

SC[i] = (function(i){

return function(){

var SC_TH  = document.getElementById('SC'+i+'_TH_');
var SC_BSH = document.getElementById('SC'+i+'_BSH_');    
var SC_BO  = document.getElementById('SC'+i+'_BO_');

  if (SC_BO.style.display == 'block' || SC_BO.style.display == ''){
      SC_TH.className      = 'header_cl';
      SC_BSH.className     = 'show_button';
      SC_BO.style.display  = 'none';}
else {SC_TH.className      = 'header_op';
      SC_BSH.className     = 'hide_button';
      SC_BO.style.display  = 'block';}
     }})(i);}       
</script> 
```

* * *

编辑：换句话说，我需要说点什么，**如果**现在**单击**的这个按钮是**其他**所有要**隐藏的****东西**！

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:40:01.243

只需隐藏所有这些，然后显示应该打开的那个。此脚本不是最优雅的解决方案，但直接集成到您的编码风格中：

```
for (var i = 1; i < 10; i++) {
    SC[i] = (function(i){
        var SC_TH  = document.getElementById('SC'+i+'_TH_'),
            SC_BSH = document.getElementById('SC'+i+'_BSH_'),
            SC_BO  = document.getElementById('SC'+i+'_BO_');

        return function(action) {
            if (!action) action = SC_BO.style.display=="none" ? "show" : "hide";

            if (action == "show") { 
                for (var i=0; i<SC.length; i++)
                    SC[i]("hide");
                SC_TH.className      = 'header_op';
                SC_BSH.className     = 'hide_button';
                SC_BO.style.display  = '';
            } else {
                SC_TH.className      = 'header_cl';
                SC_BSH.className     = 'show_button';
                SC_BO.style.display  = 'none';
            }
        };
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:58:02.050

这是一个带有一些非常简单的 jQuery（推荐）代码的[工作示例。](http://jsfiddle.net/mUawu/1/)

HTML：

```
<table><tr><td>
<div class="toggle-button">*</div>OPTION ONE
</td></tr></table>
<div class="toggle">BLAH BLAH</div>

<table><tr><td>
<div class="toggle-button">*</div>OPTION ONE
</td></tr></table>
<div class="toggle">BLAH BLAH</div>

<table><tr><td>
<div class="toggle-button">*</div>OPTION ONE
</td></tr></table>
<div class="toggle">BLAH BLAH</div> 
```

JS：

```
$(function() {
    $('div.toggle').hide();
    $('.toggle-button').click(function(){
        $('div.toggle').hide();
        $(this).closest('table').next('div.toggle').show();
    });
}); 
```

正如@StephenByrne 提到的，我还强烈建议使用现有组件，例如[jQuery Accordian](http://jqueryui.com/accordion/)。它需要几分钟的时间来实现，并带有大量可供选择的主题，并且是完全可定制的。您可能会花费数小时或数天来编写自己的代码。除非它是一个学习练习，否则这只是浪费时间。无需重新发明轮子。

正如您所表示的对仅 js 的强烈推动，这是一个[有效的 js-only 解决方案](http://jsfiddle.net/mjfeF/1/)。

HTML：

```
<table id="SC1_TH_" class="header_op"><tr><td>
<div id="SC1_BSH_" onclick="toggle(this);" class="hide_button">*</div>OPTION ONE
</td></tr></table>
<div id="SC1_BO_" style="display:block;">BLAH BLAH</div>

<table id="SC2_TH_" class="header_cl"><tr><td>
<div id="SC2_BSH_" onclick="toggle(this);" class="show_button">*</div>OPTION ONE
</td></tr></table>
<div id="SC2_BO_" style="display:none;">BLAH BLAH</div>

<table id="SC3_TH_" class="header_cl"><tr><td>
<div id="SC3_BSH_" onclick="toggle(this);" class="show_button">*</div>OPTION ONE
</td></tr></table>
<div id="SC3_BO_" style="display:none;">BLAH BLAH</div> 
```

JS：

```
function toggle(src) {
    var id =  src.id;
    var index = id.substring(2, 3);

    var i = 1;
    var toggleItem = document.getElementById('SC' + i.toString() + '_BO_');

    while (toggleItem != null) {
        var bShow = index == i;
        var button = document.getElementById('SC' + i.toString() + '_BSH_');
        var table = document.getElementById('SC' + i.toString() + '_TH_');

        if (bShow) {
            toggleItem.style.display = 'block';
            toggleItem.className = 'setitemclassname';
            button.className = 'setbuttonclassname';
            table.className = 'settableclassname';
        }
        else {
            toggleItem.style.display = 'none';
            toggleItem.className = 'setitemclassname';
            button.className = 'setbuttonclassname';
            table.className = 'settableclassname';
        }
        toggleItem = document.getElementById('SC' + (++i).toString() + '_BO_');
    }
} 
```

当计算结果为时，在`while`循环内部，您知道您有要显示的项目。在那里添加额外的逻辑来更改你的类名。`index == i``true`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:39:27.197

A [cleaner solution](http://jsfiddle.net/mjfeF/8/) involves altering your HTML a bit as well - getting rid of the `onclick` and replacing it with a class (`toggleItem`) that will allow the javascript to identify the items to be toggled. I also make sure that all the buttons have the class `button` so they can be identified.

```
<table id="SC1_TH_" class="header">
  <tr>
    <td>
      <div id="SC1_BSH_" class="button">*</div>OPTION ONE</td>
  </tr>
</table>
<div id="SC1_BO_" class="toggleItem">BLAH BLAH</div>
<table id="SC2_TH_" class="header">
  <tr>
    <td>
      <div id="SC2_BSH_" class="button">*</div>OPTION ONE</td>
  </tr>
</table>
<div id="SC2_BO_" class="toggleItem">BLAH BLAH</div>
<table id="SC3_TH_" class="header">
  <tr>
    <td>
      <div id="SC3_BSH_" class="button">*</div>OPTION ONE</td>
  </tr>
</table>
<div id="SC3_BO_" class="toggleItem">BLAH BLAH</div> 
```

Then in the javascript:

```
var buttons = document.getElementsByClassName('button'),
  toggleItems = document.getElementsByClassName('toggleItem'),
  tables = document.getElementsByClassName('header');
for (var i = 0; i < buttons.length; i++) {
    buttons[i].onclick = getFunction(toggle, i);
}
// getFunction is needed for reasons to do with variable scope
function getFunction(f, p) {return function() {f(p)}}
function toggle(selected) {
    for (var i = 0; i < toggleItems.length; i++) {
        toggleItems[i].style.display = i == selected ? '' : 'none';
        tables[i].className = i == selected ? 'header open' : 'header closed';
        buttons[i].className = i == selected ? 'button show' : 'button hide';
    }
}
toggle(0);  // initially show only the first one 
```

(This does assume that the buttons and toggle items will be in the same order. If that is not the case you will have to revert to checking their IDs or find some other way to associate the items and buttons.)

(EDITED to include changing class of tables and buttons)******

# plugins - 嗨，我想为 Sublime Text 2 找到一个用于自动关闭 html 标签的插件

> ID：14423689
> 
> 赞同：7
> 
> 时间：2013-01-20T10:43:43.850
> 
> 标签：plugins, sublimetext2

我真正想要的自动关闭方法是当我输入

```
<tag> 
```

然后变成

```
<tag></tag> 
```

.

Sublime Text 2 的“标签”插件类似于 Dreamweaver 样式，而不是 Coda 1 样式。
是否有任何插件或方法，或者可以做到这一点的新文本编辑器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T10:49:27.477

它开箱即用，您只需不输入“<”或“>”。只需输入任何 HTML 标签名称（a、html、body、div、img...）并按“Tab”，它将自动完成，因此`div`在按“Tab”后将变为`<div></div>`

# java - SimpleDateFormat 不维护时区

> ID：14423696
> 
> 赞同：3
> 
> 时间：2013-01-20T10:44:56.160
> 
> 标签：java, datetime, simpledateformat

我有以下格式的日期对象：

**2013 年 1 月 20 日星期日 10:12:27 GMT+02:00**

上面的时间正确地出现在 microsoft Outlook 中：

**2013 年 1 月 20 日星期日 12:12 PM**（这是 GMT+2 >> 客户端时区的时间）

当尝试将日期对象格式化`SimpleDateFormat`为在 Outlook 中显示时，使用以下代码：

```
SimpleDateFormat sdf=new SimpleDateFormat(
    "EEE M/d/yyyy hh:mm a");
    String receivedDate = sdf.format(email.getDateTimeReceived()); 
```

格式化的结果是：

**2013 年 1 月 20 日星期日上午 10:12**

所以缺少时区差异的两个小时。

请告知如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T11:04:55.137

如果我理解正确，您想使用 GMT 时区格式化日期。

```
DateFormat dateFormat = new SimpleDateFormat("EEE M/d/yyyy hh:mm a");
dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
String formattedDate = dateFormat.format(date); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T11:03:46.787

你忘了告诉`SimpleDateFormat`包括时区信息。

这可以解决问题：

```
SimpleDateFormat sdf=new SimpleDateFormat(
    "EEE M/d/yyyy hh:mm a zzzZ yyyy"); 
```

注意最后的大写`Z`以显示时间差异

这将打印：

> 2013 年 1 月 20 日星期日 12:09 PM CET+0100 2013

如果你需要它是格林威治标准时间，你可以这样强制：

```
sdf.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

现在它将打印：

> 2013 年 1 月 20 日星期日上午 11:11 GMT+0000 2013

如果您不需要 AM/PM，只需删除`a`

# ios - NSMutableDictionary & 多线程访问

> ID：14423698
> 
> 赞同：0
> 
> 时间：2013-01-20T10:45:37.893
> 
> 标签：ios, objective-c

我有一个 NSMutableDictionary ，我添加到一些我异步接收的自定义 NSObjects 中。每次收到新数据时，我都会清除字典然后添加新对象。然后将数据推送到另一个类“UIView”以呈现字典中的内容。我一直在收到 SIGABRT 异常，据我所知，这意味着尝试访问的对象已被释放。我已经尝试过同步块，创建一个可变副本并获取所有值，但现在没有任何效果我的问题是如何实现同步

这是一个代码片段，

```
@interface MyAltViewController : UIViewController
{
   __block NSMutableDictionary *currentDataList;
    TestUIVIEW *myUIVIEW
}
@implementation MyAltViewController

......
- (void)viewDidLoad
{
   currentDataList = [[NSMutableDictionary alloc] initWithCapacity:10];
   [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(processDataMessag:)
                                         name:view_Data object:nil];
}
.....
-(void)processDataMessag:(NSNotification *) notification
{
  [currentDataList removeAllObjects];
  NSArray tmpAr= (NSArray*) [notification object]
  dispatch_async(dbQueue, ^(void)
  {
     /// Loop through the array and process the data then add to NSDictionary 

     [self pushtoMUViewLayer:currentDataList];
  });

}
.........
 -(void)pushtoMUViewLayer:(NSMutableDictionary *)ina
 {
     /// Even here if i try to access and object within 
     /// currentDataList and just a specific NSString i get the SIGABRT
    [myUIVIEW updateWithData:ina];
 }
 //////////////////////////////////////////////////
 @interface TestUIVIEW : UIView
 {
    NSMutableDictionary *mdata;
    UIImage *outputImage ;

 }
 @property (assign) NSMutableDictionary *mapdata;
 @property (retain) UIImage *outputImage ;

  @implementation TestUIVIEW
    .......
  -(void)updateWithData:(NSMutableDictionary *)data
  {
     mdata = [data retain]; // ??? not  sure how to set it correctly
      dispatch_async(dispatch_get_main_queue(), ^(void)
      { 
        [self CreateImage];
        [self setNeedsDisplay];
      });
  }
  -(void) CreateImage
  {
    NSString *key;
    for(key  in mapdata)
    {
        DataMessage *tmpData= (DataMessage*)[mapdata objectForKey:key];
        NSString *aID = [ tmpData alt] ;
        double aLat   = [ tmpData lat]  ;
        double aLong  = [ tmpData lon] ;
       /*
          Drawing code  I can Get aLat & A Long
          but it fails with SiABRT when trying to render 
          aID
       /*
    }
  }

  - (void)drawRect:(CGRect)rect
  {
    // Drawing code

   CGPoint imagePoint = CGPointMake(0, 0);

   [outputImage drawAtPoint:imagePoint];

} 
```

/// 如果同步不起作用。我可以使用 NSNotification 来查看我的 currentDataList // 到我的 currentDataList

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:45:14.153

在我访问 NSDictionary 的所有地方添加 @synchronised 块确实解决了这个问题。谢谢大家的意见

# wdk - Windows Driver Kit，“存储必须常驻”是什么意思？

> ID：14423699
> 
> 赞同：-1
> 
> 时间：2013-01-20T10:45:46.723
> 
> 标签：wdk

他们是指不可分页的内存还是什么？我找不到对*常驻*存储的任何参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:35:46.270

[这里](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551789%28v=vs.85%29.aspx)提到的常驻内存，这里[和](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544520%28v=vs.85%29.aspx)这里[只是](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554307%28v=vs.85%29.aspx)指当前没有分页的内存。例如，从 分配的`NonPagedPool`内存始终是常驻的，而从 分配的内存`PagedPool`可以是常驻的，但是您必须在使用它之前检查内存是否没有被分页（取决于上下文 IRQL 要求）。

# ios - 有没有办法查询 HTML5 应用程序缓存？

> ID：14423703
> 
> 赞同：4
> 
> 时间：2013-01-20T10:46:21.913
> 
> 标签：ios, html, application-cache, nsurlcache

有没有办法查询 HTML5 应用程序缓存的内容？

我正在编写一个使用大量缓存 Web 内容的 iOS 应用程序。在应用离线时加载给定页面之前，我想检查该页面是否存在于缓存中。如果没有，我会通知用户他们必须在线才能看到该内容；如果是这样，我会继续加载它。

现在，iOS 有自己的 URL 缓存系统，我最初只是假设我可以这样检查缓存的内容：

```
if ([[NSURLCache sharedURLCache] cachedResponseForRequest:myRequest] != nil) {
    // go ahead and load the page
}
else {
    // notify the user that the content isn't available
} 
```

傻我。似乎 iOS 的缓存和 HTML5 的缓存是不相关的： -cachedResponseForRequest: 对任何请求都返回 nil，即使我可以看到 URL 在 HTML5 应用程序缓存中（使用 Safari Web 调试器）。

**那么，有什么方法可以查询 HTML5 应用程序缓存的内容吗？**答案是使用 Objective-C 代码还是 Javascript 并不重要，因为我总是可以从 Objective-C 执行相关的 JS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:12:39.933

HTML5 AppCache 有两个属性，这意味着在正常操作中不需要这样做：

1.  AppCache 更新操作是原子的，要么更新整个缓存，要么不更新
2.  创建 AppCache 后，缓存中的所有文件都将从缓存中提供

最终结果是，对于任何给定版本的清单文件，其中列出的任何加载到浏览器中的文件都将与清单中列出的所有其他文件一致。您只需要检查[`window.applicationCache.status`](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#dom-appcache-status)并检查它是否不是`UNCACHED`.

还有另一种可能。[如果您按照Dive Into HTML5](http://diveintohtml5.info/offline.html#fallback)中的描述将文件“延迟添加”到 AppCache，那么您可能不确定哪些文件被缓存。在这种情况下，您可以采用一种方法来[检测在线状态](https://stackoverflow.com/a/9786599/8655)，我不会为您提供经过全面测试的解决方案，但这里是一般的想法：

1.  创建一个包含唯一标识符的网页，该标识符不可能正常出现在页面中。标识符可以在其他正常页面的隐藏内容中。
2.  将此页面设置为`FALLBACK`清单中的通用页面。
3.  使用 AJAX 请求页面。
4.  扫描唯一标识符的响应，如果找到它，那么您知道请求的页面不在 AppCache 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:56:35.063

是的，缓存存储在 Application.db 中。

# java - 预加载的基于文档的桌面应用程序

> ID：14423705
> 
> 赞同：0
> 
> 时间：2013-01-20T10:47:00.963
> 
> 标签：java, python, nosql

我想开发一个允许用户搜索 json 文件的桌面应用程序。这些文件（大约 50.000 个）是预定义的。它们应该随应用程序本身一起提供。

我的问题是，将这些文档与应用程序一起发送的最佳方式是什么，同时允许用户搜索包含某些值的文档，例如在 sql 术语中：显示文档中包含某些 json 值的所有文档，例如 %Example %。

我考虑过使用某种 NoSQL 解决方案，将文件预加载到数据库中并将其与应用程序捆绑在一起。我已经查看了一些解决方案，但我不确定哪一个最适合我的需求，或者它是否是最好的方法。

底线是，我不能让我的用户在他们的系统上安装数据库，这太复杂了。

我更喜欢适用于 java 或 python 的解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:51:51.213

[您可以使用嵌入式数据库](http://en.wikipedia.org/wiki/Embedded_database)、基于内存的数据库（如 hsql）或基于文件的数据库（如 sqlite）。

两者都不需要您的最终用户进行任何安装。您只需将库打包为应用程序安装包的一部分（当然还有引擎本身）。

如果您正在寻找 ak/v 商店，那么好的 ol'[`Berkeley DB`](http://en.wikipedia.org/wiki/Berkeley_DB)就足够了。如果您真的在寻找“嵌入式 NoSQL 解决方案”，请尝试[MooDB](http://www.dev-smart.com/archives/326)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:22:10.953

Mongo DB 有一个嵌入式版本：[https ://github.com/flapdoodle-oss/embedmongo.flapdoodle.de](https://github.com/flapdoodle-oss/embedmongo.flapdoodle.de)

我已经将它用于集成测试（模拟 Mongo 服务器）并且效果非常好！

每当我阅读文档和搜索时，我也会想到 Solr： http: [//lucene.apache.org/solr/](http://lucene.apache.org/solr/)

# php - PHP重用mysql结果集行

> ID：14423706
> 
> 赞同：0
> 
> 时间：2013-01-20T10:47:21.213
> 
> 标签：php, mysql

我想多次使用查询结果。

```
$result=mysql_query("Select field from tables;");

while($result_details = mysql_fetch_array($result))
  { echo $result_details[0]; //Returns 10 Rows..
} 
```

但是如果我再次使用**mysql_fetch_array($result)**它不会返回行。我不想多次执行相同的查询请让我知道如何多次使用查询的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-10T06:37:00.717

If you do not want to make multiple queries then simply unwind the pointer to the desired position.After you execute your code.You should call function to seek to initial (0) position:

```
$result=mysql_query("Select field from tables;");

    while($result_details = mysql_fetch_array($result))
      { echo $result_details[0]; //Returns 10 Rows..
    }
        mysqli_data_seek($result ,0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T10:50:31.520

您需要使用“倒带”结果指针：http: [//php.net/manual/en/function.mysql-data-seek.php](http://php.net/manual/en/function.mysql-data-seek.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T11:33:47.617

首先使用`while`循环获取所有记录：

```
$result=mysql_query("Select field from tables;");
while($result_details = mysql_fetch_array($result))
{
    $var[]=$result_details;
} 
```

然后使用`foreach`循环和单个变量`$var`在您使用查询的同一页面中的任何位置显示所有内容，或将查询放在 functions.php 文件中，并在任何地方包含和使用：

```
foreach ($var as $value) {
    $value['field'];
} 
```

# java - 我如何获得内部的值和覆盖的方法

> ID：14423708
> 
> 赞同：0
> 
> 时间：2013-01-20T10:48:01.707
> 
> 标签：java, methods

```
for (final Type type : category.getTypes()) {
    TableColumn<Item, Integer> col = new TableColumn<Item, Integer>(type.getName());

    col.setCellValueFactory(new Callback<CellDataFeatures<Item>,
            ObservableValue<Integer>>() {
        @Override
        public void call(CellDataFeatures<Item> item) {
            return item.getValue().getPrice(type);
        }
    });
    priceColumn.add(col);
} 
```

如何在调用方法中获取类型的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:57:02.177

看起来你必须编写另一个方法`void call(CellDataFeatures<Item> item, Type type)`。这样，您就可以在 for 循环中调用该方法。我不知道我是否完全理解你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:16:31.327

创建一个 setType() 并将类型保存为 for 循环中第一条语句的一部分。创建一个静态 getType 并访问 Callback 类中的类型。

```
// New Modifed code
Class Test
{
Type type = null;
public void setType(type)
{
this.type = type;
}

public static Type getType()
{
return type;
}

for (final Type type : category.getTypes()) {
    setType(type);
    TableColumn<Item, Integer> col = new TableColumn<Item, Integer>(type.getName());

    col.setCellValueFactory(new Callback<CellDataFeatures<Item>,
            ObservableValue<Integer>>() {
        @Override
        public void call(CellDataFeatures<Item> item) {
            return item.getValue().getPrice(Test.getType());
        }
    });
   priceColumn.add(col);
}
} 
```

# maven - 用于 Maven 构建测试的 Postgresql 数据库位置

> ID：14423711
> 
> 赞同：-1
> 
> 时间：2013-01-20T10:48:46.813
> 
> 标签：maven

我有大型 Maven 项目。所以我运行 mvn clean install。但是我在测试中遇到错误。sql连接异常。我有用于 Postgresql 的数据库的 sql 文件。我应该在本地主机上创建数据库（使用用户名和密码）吗？那么junit测试是如何运行的呢？他们需要在本地主机上带有数据库的服务器吗？这个用于连接数据库的 xml：

```
<bean id="c3p0DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="driverClass" value="org.postgresql.Driver" />
        <property name="jdbcUrl" value="jdbc:postgresql://localhost/lion" />
        <property name="user" value="osm" />
        <property name="password" value="101918" />
        <property name="maxPoolSize" value="100" />
        <property name="minPoolSize" value="5" />
        <property name="acquireIncrement" value="5" />
        <property name="idleConnectionTestPeriod" value="300" />
        <property name="maxStatements" value="0" />
        <property name="maxIdleTime" value="100" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:51:16.690

是的，显然你有一个连接到真实 PostgreSQL 数据库的 Spring 集成测试项目。其他开发人员很可能已经安装了这样的数据库，因此它适用于他们。不完美但有时是必要的。

话虽如此，您需要安装 PostgreSQL，创建`lion`数据库和所有需要的表。此外，数据库用户名和密码显然是硬编码在您的配置中（应该在这里发布吗？），因此您必须在 PostgreSQL 服务器中创建相同的用户或（更好）externalize`jdbcUrl`和.`username``password`

最后考虑合并[flyway](/questions/tagged/flyway "显示标记为“flyway”的问题")，如果您在空模式上启动应用程序，它将创建您的数据库表的出色小库。

# iphone - Core Data 对多关系获取数据

> ID：14423712
> 
> 赞同：0
> 
> 时间：2013-01-20T10:48:48.010
> 
> 标签：iphone, ios, core-data, nsfetchedresultscontroller

在我的代码中，我想创建带有列表部分的 tableView。我使用这样的方案：

![在此处输入图像描述](../Images/ddec2c4c9a50d710d5ac6ac8afbd55db.png)

我使用我以这种方式定义的 NSFetchResultController ：

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Item" inManagedObjectContext:coreDataController.masterManagedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:@"addedAt" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:20];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"itemIsChecked = 1"];

    [fetchRequest setPredicate:predicate];
    [fetchRequest setResultType:NSDictionaryResultType];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:coreDataController.masterManagedObjectContext sectionNameKeyPath:@"toList.listName"
                                               cacheName:nil];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

现在在 cellForRowAtIndexPath: 我想从我的 fetchResultController 中获取数据，所以我这样做：

```
Item *item = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

然后如果我想访问项目的字段之一（例如 itemText），它会崩溃：

```
NSLog(@"item itemtext = %@", item.itemText); 
```

有错误：

```
-[NSKnownKeysDictionary1 itemText]: unrecognized selector sent to instance 0x1215fd90 
```

我的代码做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:16:20.150

你已经设置

```
[fetchRequest setResultType:NSDictionaryResultType]; 
```

因此获取的结果控制器返回`NSDictionary`对象，而不是`Item`对象。所以你的元素

```
Item *item = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

是一个`NSDictionary`，不是一个`Item`。由于字典没有`itemText`方法，因此`item.itemText`崩溃。您可以使用从字典中检索值

```
NSDictionary *item = [self.fetchedResultsController objectAtIndexPath:indexPath];
NSLog(@"item itemtext = %@", [item objectForKey:@"itemText"]); 
```

但是，如果您没有特定理由将结果类型设置为`NSDictionaryResultType`，则应该删除该行。获取结果控制器的更改跟踪（即自动表视图更新）不适用于`resultType == NSDictionaryResultType`.

另请注意，如果您设置了 a `sectionNameKeyPath`，则必须添加具有相同键路径“toList.listName”的排序描述符，并将其用作获取请求的第一个排序描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:16:13.197

`unrecognized selector sent to instance`通常由于内存管理不善而发生。检查您是否尝试指向之前发布的对象。还要检查 xib 中的 IBOutlet 连接是否为 lable `itemText`。

# php - 如何检查我的字符串是否以 PHP 中的某个单词开头？

> ID：14423715
> 
> 赞同：-6
> 
> 时间：2013-01-20T10:48:49.747
> 
> 标签：php

我正在尝试做某种许可系统。

但是有不同种类的许可证。有个人、团队和管理员许可证。许可证看起来像

```
<License type>-<Randomly generated 50 characters string> 
```

前任：

```
Personal-imiY2cdnpL01EzbZWr2YWzukkJmC3K6BMQpZU2wgfsOehCruDr 
```

但是当涉及到许可证检查时，我想知道它是什么类型的许可证。所以我只想做一个检查`(if $lincense startsWith("Personal")`等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T10:55:21.763

作为替代[`substr()`](http://php.net/manual/en/function.substr.php)你也可以使用[`strpos()`](http://php.net/manual/en/function.strpos.php)

```
$str = 'Personal-imiY2cdnpL01EzbZWr2YWzukkJmC3K6BMQpZU2wgfsOehCruDr';
if (strpos($str, 'Personal') === 0) {
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:51:19.543

```
if (substr('Personal-imiY2cdnpL01EzbZWr2YWzukkJmC3K6BMQpZU2wgfsOehCruDr', 0, 8) == 'Personal') 
```

# spring - SpringMVC 表单验证与表单：选项

> ID：14423716
> 
> 赞同：1
> 
> 时间：2013-01-20T10:49:04.583
> 
> 标签：spring, spring-mvc, validation

我正在尝试在 Spring 中设置表单验证，因此我正在使用`javax.validation`注释。这工作得很好，它很好地得到了错误。

我的表单中有一个`form:options`字段从我的控制器获取预先计算的值，但是如果您提交错误的数据，这些预先计算的值会丢失。

表格如下所示：

```
<form:form method="post" action="../add" commandName="new-booking"
        modelAttribute="new-booking" class="form-vertical">
        <table>
            <tr>
                <td><form:label path="numberOfBikesBooked">Anzahl der Fahrräder</form:label><font
                    color='red'><form:errors path='numberOfBikesBooked' /></font></td>
            </tr>
            <tr>
                <td><form:select path="numberOfBikesBooked">
                        <form:options items="${possibleBikeValues}" />
                    </form:select></td>
            </tr>
            <tr>
                <td><form:label path="firstName">Vorname</form:label><font
                    color='red'><form:errors path='firstName' /></font></td>
            </tr>
            <tr>
                <td><form:input path="firstName" /></td>
            </tr>
            <tr>
                <td><form:label path="lastName">Nachname</form:label><font
                    color='red'><form:errors path='firstName' /></font></td>
            </tr>
            <tr>
                <td><form:input path="lastName" /></td>
            </tr>
            <tr>
                <td><form:label path="mailAddress">Email</form:label><font
                    color='red'><form:errors path='mailAddress' /></font></td>
            </tr>
            <tr>
                <td><form:input path="mailAddress" /></td>
            </tr>
            <tr>
                <td><input type='submit' value='Buchen!' class="btn" /></td>
            </tr>
        </table>
        <form:hidden path="Date" />
        <form:hidden path="cancelURI" />
    </form:form> 
```

像这样的控制器（`add`验证表单并`AvailableBikes`呈现表单）：

```
@RequestMapping(value = "/add", method = RequestMethod.POST)
public String addPerson(@ModelAttribute("new-booking") @Valid Booking booking,
        BindingResult result, Map<String, Object> model) {

    if(result.hasErrors()){
        return "booking";
    }

    logger.info(String.format("Adding a Booking with the following data: Name: %s %s Email: %s Date: %s", booking.getFirstName(), booking.getLastName(), booking.getMailAddress(), booking.getDate()));

    bookingService.addBooking(booking);

    model.put("booking", booking);

    return "success";
}

@RequestMapping(value = "/AvailableBikes", method = RequestMethod.POST)
public String getAvailableBikes(@ModelAttribute("date") StringDate parDate,
        Map<String, Object> model) {

    // Parse Date
    DateFormat dateFormat = new SimpleDateFormat("dd-MM-yy");
    Date inDate = Calendar.getInstance().getTime();
    try {
        inDate = dateFormat.parse(parDate.getDate());
    } catch (ParseException e) {
        logger.severe(e.getMessage());
        e.printStackTrace();
    }

    logger.info(String.format("Listing the available Bookings for the %s", inDate));

    int availableBookings = bookingService.getAvailableBookings(inDate);
    model.put("NumAvailableBikes", Integer.toString(availableBookings));

    // TODO: Fix this with the AvailableBikesRange
    List<Integer> allPossibleBikeValues = new ArrayList<Integer>();
    for (int i = 1; i <= 30; i++) {
        allPossibleBikeValues.add(i);
    }
    model.put("possibleBikeValues", allPossibleBikeValues);

    // Get ready for new booking
    Booking booking = new Booking();
    booking.setDate(inDate);
    // TODO: How to handle the Cancel?
    booking.setCancelURI("xyz");
    model.put("new-booking", booking);

    return "booking";
} 
```

这是模型（我认为这无关紧要）：

@Entity公开课预订{

```
@Id
@GeneratedValue
private Integer id;

@Column(name = "date", nullable = false)
@NotNull
private Date date;

@Column(name = "numberOfBikesBooked", nullable = false)
@Min(1)
@Max(100)
private int numberOfBikesBooked;

@Column(name = "mailAddress", nullable = false)
@Email
private String mailAddress;

@Column(name = "firstName", nullable = false)
@NotBlank
@Size(min=3, max=100)
private String firstName;

@Column(name = "lastName", nullable = false)
@NotBlank
@Size(min=3, max=100)
private String lastName;

@Column(name = "cancelURI", nullable = true)
private String cancelURI; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:54:53.177

的问题`firstName`是你有两个`form:input`:) 第二个必须是`mailAddress`.

预计算值的问题很简单：当您返回视图名称字符串时，控制器不会被调用。这个案例的模型是空的。有几种解决方案：您可以将预先计算提取到方法中并在需要的地方调用它。或者（我更喜欢这种方式）您可以设置[拦截器](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-interceptors)来填充 url 的模型：

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/context-relative-url.html" />
        <bean class="a.b.c.DropDownPopulator" />
    </mvc:interceptor>
</mvc:interceptors> 
```

和人口：

```
public class DropDownPopulator extends HandlerInterceptorAdapter {

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        Map<String, String> result = new LinkedHashMap<String, String>(/*map for dropdown*/);

        modelAndView.addObject("values", result);
    }
} 
```

# java - imageView android无法识别错误

> ID：14423724
> 
> 赞同：-1
> 
> 时间：2013-01-20T10:49:49.583
> 
> 标签：java, android, imageview

我想知道为什么 java 类中的图像视图会出现错误，比如`ImageView smtin;` And there's error。它不承认它像类...

我的项目代码是：

```
 package com.klemenjezakon.koceSLO;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ImageView;

ImageView slika;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        Intent i = getIntent();
        koca podatki=(koca)i.getSerializableExtra("koca");

        setContentView(R.layout.koca);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:56:43.237

你必须把你的班级。所以而不是：

```
ImageView slika;

public class MainActivity extends Activity { 
```

它必须是：

```
public class MainActivity extends Activity {

    ImageView slika; 
```

# c++ - 返回异步结果 - 同步情况的有效处理

> ID：14423728
> 
> 赞同：2
> 
> 时间：2013-01-20T10:50:18.703
> 
> 标签：c++, asynchronous, c++11, future

你可以有一个像这样的异步 API

```
std::future<int> GetAsync() 
```

在某些情况下，例如您已经缓存了结果并希望返回使用结果初始化的未来。当前标准（或提案）是否有办法实现这一目标，而无需重复创建额外的 std::promise 或进行额外的异步（延迟启动策略）？

**编辑**

还要考虑基于 GetAsync() 函数的某些本地状态计算结果的情况，并且如果选择使用 std::async 并延迟启动策略，则可能需要按值捕获该结果

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T11:49:34.113

我显然误解了一些东西，你为什么不能这样做：

```
std::future<int> GetAsync()
{
  if (/*already got result*/)
  {
    std::promise<int> p;
    p.set_value(/*result*/);
    return p.get_future();
  }  
  return std::async(/*whatever is needed*/);
} 
```

创建承诺有什么问题？如果您想从未来（异步返回对象）中获取结果，则需要异步提供者，a`promise`就是这样一种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:55:21.153

futures 和 promises 的特点是它们是为多线程使用而设计的。因此，如果您想返回一个未来对象，您需要通过`std::async`调用 a`std::packaged_task<>`或 a来创建它`std::promise<>`。如果是这样的话，@ronag 的回答很成功。

如果这不是一般情况，并且您只想将间接返回到您的值，则可以使用 a`std::function`进行直接计算，或围绕它的[缓存机制](http://crazycpp.wordpress.com/2012/09/13/simple-little-cashing-variable-or-property-trick/)[`Expected<T>`](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)，或者像期货一样处理错误的值；所以你不会支付线程通信费用。

# javascript - ckeditor如何将键盘快捷键应用于特定样式

> ID：14423734
> 
> 赞同：1
> 
> 时间：2013-01-20T10:50:40.373
> 
> 标签：javascript, ckeditor, wysiwyg, fckeditor

是否可以在 CkEditor 中从 Styles drom 中将键盘快捷键应用于特定样式？我搜索了他们的文档，但找不到适合我的案例的解决方案。

这是屏幕截图。

![在此处输入图像描述](../Images/ac391ab275f708b5b91974d913dc40be.png)

在这里，我希望能够从样式下拉列表中将键盘快捷键应用于黄色标记。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:23:39.440

[给你](http://jsfiddle.net/S3MY6/3/)。此示例显示如何将样式附加到`CTRL+SHIFT+1`击键。您可以将 switch 语句用于不同的击键，并以您想要的任何方式使用它们。

# c# - 如何修复视觉工作室警告

> ID：14423737
> 
> 赞同：2
> 
> 时间：2013-01-20T10:51:17.547
> 
> 标签：c#, database, winforms, visual-studio-2010, warnings

我在visual studio 2010 Ultimate中制作了一个应用程序我面临的问题是当我发布我的应用程序时它会产生一些警告，这就是

```
Warning 1   One of the following items 'Microsoft .NET Framework 4 (x86 and x64)
, .NET Framework 3.5 SP1' is required by 'SQL Server 2008 Express',
 but none were included.    WindowsFormsApplication1 
```

我知道当我看到我的应用程序运行良好时会遇到一些问题，但是与 sql server 相关的某些功能无法正常工作。我该如何解决这个警告？我已经浏览了 MSDN，但我没有得到解决方案，我已经卸载了 Visual Studio 并重新安装了它，但我面临同样的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-31T20:38:08.103

在 Visual Studio 中，转到项目..属性..发布。单击先决条件。如果您已安装客户端配置文件，则打开客户端配置文件并关闭未安装的客户端配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:03:10.567

从此[Microsoft® SQL Server® 2008 Express](http://www.microsoft.com/en-us/download/details.aspx?id=1695)页面；

## 指示

第 1 步：下载并安装[`Microsoft .Net Framework 3.5 SP1`](http://go.microsoft.com/fwlink/?LinkId=120550).

第 2 步：下载并安装[`Windows Installer 4.5`](http://go.microsoft.com/fwlink/?LinkID=123422).

第 3 步：单击本页后面的相应链接，下载 SQL Server 2008 Express。要立即开始安装，请单击`Run`。要稍后安装 SQL Server Express，请单击`Save`。

在使用 SQL Server 2008 Express 之前，您需要先下载 .NET Framework 3.5 SP1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:00:21.290

如果 .net-Framework 安装在所需的版本中，您必须检查客户的 PC。

[http://support.microsoft.com/kb/318785](http://support.microsoft.com/kb/318785)

可能缺少 Service Pack 1...

# asynchronous - 等待异步 thrift 请求完成

> ID：14423742
> 
> 赞同：2
> 
> 时间：2013-01-20T10:51:58.703
> 
> 标签：asynchronous, wait, thrift

我正在`thrift`从我的代码中调用多个异步调用。我想等待所有这些都完成，然后再继续我的下一个阶段。

```
for (...) {
  TNonblockingTransport transport = new TNonblockingSocket(host, port);
  TAsyncClientManager clientManager = new TAsyncClientManager();
  TProtocolFactory protocolFactory = new TBinaryProtocol.Factory();
  AsyncClient c = new AsyncClient(protocolFactory, clientManager, transport);
  c.function(params, callback);

}

// I would like to wait for all the calls to be complete here. 
```

我可以在回调中进行倒计时，例如等待/通知并完成此操作。但是`thrift`系统是否允许我等待异步函数调用，最好是超时？

`TAsyncClientManager`我在或 中没有看到任何内容`AsyncClient`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T10:47:45.153

鉴于不可能做到这一点，我使用了同步 api 客户端并使用 executors 和 launchAll 管理启动和等待。我将此作为我的答案，让人们有替代方案。

# drop-down-menu - select dropdown from options when options are in separate tags

> ID：14423744
> 
> 赞同：0
> 
> 时间：2013-01-20T10:52:07.127
> 
> 标签：drop-down-menu, webdriver, selenium-webdriver

我是使用 webdriver 的初学者，这是我正在使用的代码。我想单击一个下拉列表，然后再次单击为该下拉列表提供的值列表。请帮助我，我寻找其他线程，但它们是不同的。

```
<ul>
  <li class="size select required">
    <div id="dk_container_partNumber-55414" class="dk_container dk_theme_size dk_focus"
    tabindex="" style="display: block;">
      <a class="dk_toggle" style="width: 162px;">
        <div class="dk_options">
          <ul class="dk_options_inner">
            <li class="dk_option_current">
              <li class="">
                <a data-dk-dropdown-value="605930243">S</a>
              </li>
              <li class="">
                <a data-dk-dropdown-value="605930251">M</a>
              </li>
              <li class="">
                <a data-dk-dropdown-value="605930260">L</a>
              </li>
              <li class="">
                <a data-dk-dropdown-value="605930278">XL</a>
              </li>
              <li class="">
                <a data-dk-dropdown-value="605930286">XXL</a>
              </li>
          </ul>
        </div>
    </div>
    <select id="partNumber-55414" class="size-select" name="partNumber" style="display: none;">
      <option data-property="CAT_SELECTSIZE" selected="selected" value="">Select Size</option>
      <option value="605930243">S</option>
      <option value="605930251">M</option>
      <option value="605930260">L</option>
      <option value="605930278">XL</option>
      <option value="605930286">XXL</option>
    </select> 
```

我希望选择“S”，并且必须在下拉列表中看到相同的内容。我可以单击下拉菜单并使用以下代码查看选项列表：

```
driver.findElement(By.xpath("//(more xpath goes here)/ul/li[@class = 'size select required']/div/a/span")).click(); 
```

我尝试了以下代码来选择“S”，但徒劳无功：

```
Select SizeDropdown = new Select(driver.findElement(By.xpath("//(more xpath  here)/ul/li[@class = 'size select required']/select")));
//driver.findElement(By.xpath("(//(more xpath here)/ul/li[@class = 'size select required']/select)/option[2]")).click();
//Below line gets and clicks the first option of Select Size 'S'
//SizeDropdown.getFirstSelectedOption().click();
//SizeDropdown.selectByVisibleText("S");
//SizeDropdown.selectByIndex(1);
//SizeDropdown.selectByValue("S"); 
```

我分别尝试了每个命令（取消注释后），但看不到“S”作为下拉菜单的标签，就好像它是我选择的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:55:53.463

您是否尝试过简化您的 xpath？

我使用类似这样的方法从下拉列表中选择一个选项，*而无需*先单击以展开它：

```
Select select = new Select(driver.findElement(By.xpath("//select[@id='partNumber-55414']"));
select.selectByVisibleText("S"); 
```

# java - 图像隐写 Java

> ID：14423745
> 
> 赞同：-1
> 
> 时间：2013-01-20T10:52:09.840
> 
> 标签：java, image, bufferedimage, steganography

我正在尝试解码图像中编码的数据。编码工作正常，图像的数据大小也发生了变化，但由于某种原因，解码后的数据是一个空字符串。编码数据丢失或此代码有错误。

```
int temp,tempText=0,x=0,p=0;

    try
    {
        image= ImageIO.read(new File("C:\\Users\\Desktop\\Encoded.png"));

    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    for(int i=0;i<image.getWidth();i++)
    {
        for(int j=0;j<image.getHeight();j++)
        {
            pixels[i][j]=image.getRGB(i, j);
        }
    }

    for(int i=0;i<Width;i++)
    {
        for(int j=0;j<Height;j++)
        {
            temp=pixels[i][j];

            int change=0;   

            for(int k=0;k<4;k++) // 4 iterations for 4bytes of every pixel
            {
                if(k==0)
                {
                    change=1;
                }
                else
                    if(k==1)
                    {
                        change=256;
                    }
                    else
                        if(k==2)
                        {
                            change=65536;
                        }
                        else
                            if(k==3)
                            {
                                change = 16777216;
                            }

                tempText=tempText | (pixels[i][j] & change);

                p++;

                if(p==8) // because character is of 8bits
                {
                    myString.concat(String.valueOf(tempText));// Writing decoded data in string
                    p=0;
                    tempText=0;

                }
            }

        }

 // Writing in file

    try
    {
        file = new File("C:\\Users\\Desktop\\Retreive.txt");
        fw = new FileWriter(file);

        bw= new BufferedWriter(fw);

        bw.write(myString);
        bw.close();

    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    } 
```

如果我犯了任何错误或此代码缺少任何内容，请通知我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:09:42.797

`String.concat`不会更改您调用它的字符串，而是返回一个新字符串。所以如果你`myString = myString.concat(...)`改用，你可能会得到更好的结果。如果`tempText`包含字符代码，则可以将其转换为 char（因为`String.valueOf`返回 int 的字符串表示形式）：

```
// Writing decoded data in string
// myString = myString.concat(String.valueOf(tempText));
myString += (char) tempText; 
```

代替：

```
myString.concat(String.valueOf(tempText));// Writing decoded data in string 
```

# javascript - 使用 Javascript 动态呈现 Facebook like 按钮

> ID：14423746
> 
> 赞同：1
> 
> 时间：2013-01-20T10:52:11.907
> 
> 标签：javascript, facebook-like

我正在尝试添加一个类似 FB 的按钮，用于向 AJAX 驱动的搜索页面进行推荐。我已经在静态模板中成功实现了它，但是在单个页面上实现动态变化的喜欢似乎更复杂。有没有办法将`.fb-like`模板动态注入页面**并**让 facebook 渲染它以创建必要的 IFRAME？很明显 facebook 会加载它，但它可以用 JS 手动触发吗？

要嵌入的原始FB html：

```
 <div class="fb-like" data-href="http://mattat.org.il/ci/index.php/
    search/show_full/nsrecommendation/{{q}}" 
    data-send="true" data-layout="button_count" 
    data-width="450" data-show-faces="true" data-font="arial"></div> 
```

将`{{q}}`动态替换为当前的推荐 id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T11:13:22.123

关注FB [http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

你需要在ajax完成后执行

```
FB.XFBML.parse(); 
```

# vb.net - System.Windows.Forms.KeyPressEventArgs

> ID：14423748
> 
> 赞同：-1
> 
> 时间：2013-01-20T10:52:17.750
> 
> 标签：vb.net

我想将按钮单击事件发送到文本框 keypressevent。该怎么办？？

我的代码是

```
Private Sub TextBox1_KeyPress(ByVal sender As Object, _ 
       ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress

    MessageBox.Show "Hai"
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, _
       ByVal e As System.EventArgs) Handles Button1.Click

   TextBox1_KeyPress(Sender,e)

End Sub 
```

错误来自 e

*System.EventArgs 和 KeyPressEventArgs*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T10:58:38.707

我认为以这种方式直接调用事件处理程序总是一种不好的方法。

在我看来，您应该重构代码并从 KeyPress 事件中提取要从 Button_Click 调用的代码并直接调用它

```
Private Sub TextBox1_KeyPress(ByVal sender As Object, _ 
       ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress

    CommonCode()
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, _
       ByVal e As System.EventArgs) Handles Button1.Click

    CommonCode()
End Sub

Private Sub CommonCode()
    MessageBox.Show "Hai"
End Sub 
```

但是，您的错误在于`TextBox1_KeyPress`期望在 Button1_Click 中接收到的`KeyPressEventArgs`不是简单的事实。`EventArgs`你可以绕过这个创建一个新实例`KeyPressEventArgs`并将其传递给`TextBox1_KeyPress`，但是，正如我所说，这是一个不好的做法。甚至不要认为 Windows 或框架会以某种有意义的方式处理对并非源自其内部代码的事件的调用。

**编辑：**只是为了展示如何传递 KeyEventArgs 的实例。我再次不推荐这个。

```
Private Sub Button1_Click(ByVal sender As System.Object, _
       ByVal e As System.EventArgs) Handles Button1.Click

    Dim x = new KeyPressEventArgs("A"c)
    CommonCode(e, x)
End Sub

Private Sub CommonCode(ByVal sender As Object, ByVal e KeyPressEventArgs)

    MessageBox.Show "KeyPressed = " + e.KeyChar.ToString
End Sub 
```

# php - 将mysql数据存储在数组中

> ID：14423749
> 
> 赞同：-2
> 
> 时间：2013-01-20T10:52:42.693
> 
> 标签：php, mysql

我有个疑问。为什么我们不能将 mysql_fetch_row 的元素存储在一个数组中，然后在后面的代码中使用呢？

例如，这串代码给出了意外的等待时间错误。

```
$result=mysql_query($query) or die(mysql_error());
$n=mysql_num_rows($result);
$a=array();
$a[$i]=array();
for ($i=o; $i<$n; $i++)
{
    $r=mysql_fetch_row($result);
    $a[$i][0]=$r[0];
    $a[$i][1]=$r[1];
}
echo $a[0][1];
echo $a[0][0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:10:06.390

更好的方法是使用`mysql_fetch_assoc()`函数。

```
$result = mysql_query($query) or die(mysql_error());
$a = array();
if ($result !== false) {
    while ($row = mysql_fetch_assoc($result)) {
        $a[] = $row;
    }
}

var_dump($a); 
```

顺便说一句，`for`你有循环声明`o`而不是`0`!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:02:18.273

尝试改变这一点

```
 $r=mysql_fetch_row($result); 
```

至

```
 $r=mysql_fetch_num($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T10:58:07.850

也许您正在寻找[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)

# preg-replace - PHP 删除除撇号以外的所有非字母数字字符

> ID：14423754
> 
> 赞同：0
> 
> 时间：2013-01-20T10:53:05.003
> 
> 标签：preg-replace, str-replace, trim, alphanumeric, apostrophe

```
$keywords = explode("\n",$_POST['keywords']);

//Inserting into Database
foreach($keywords as $key => $keyword){
    $keyword = strtolower(trim($keyword));
    $keyword = preg_replace("/[^A-Za-z0-9' ]/", "", $keyword);
    $keyword = preg_replace("/\s+/", " ", $keyword);
    $insertkeywords = "INSERT IGNORE INTO kwdb (keyword) VALUES ('$keyword')";
        mysql_query($insertkeywords);
} 
```

当我在以下位置有撇号时，我一生都无法弄清楚为什么这段代码不会将关键字插入数据库：

```
"/[^A-Za-z0-9' ]/" 
```

但是当我删除它时：

```
"/[^A-Za-z0-9 ]/" 
```

此脚本将记录插入数据库。

**我想做什么？** 我在表单上有一个文本区域。对于新行上的每个关键字，我根据 \n 展开。我想从关键字中删除所有非字母和非数字字符，但不希望删除撇号。

我基本上希望所有关键字都是小写的，带有前导、尾随和额外的空格 - 2 个或更多空格被修剪为一个 - 以及除撇号之外的任何非字母和非数字字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:53:16.950

谢谢[三叶草](https://stackoverflow.com/users/1982115/clover)。没有你的帮助，我要花好几个小时才能弄清楚这个问题！我最终使用了[mysqli_real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)而不是[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)，因为 mysql_real_escape_string 说它从 PHP 5.5.0 开始已被弃用。结果，我不得不对其进行一些更改，但到目前为止，下面的代码似乎对我来说效果很好（以防其他人遇到此问题）。

```
$con = mysqli_connect("localhost","username","password");
if (!$con)
  {
  die('Could not connect: ' . mysqli_error());
  }
else
    {
echo "Connected Successfully!";
}
//select database
mysqli_select_db($con, "test");

$keywords = explode("\n",$_POST['keywords']);

//Inserting into Database
foreach($keywords as $key => $keyword){
    $keyword = preg_replace("/[^A-Za-z0-9' ]/", " ", $keyword);
    $keyword = preg_replace("/\s+/", " ", $keyword);
    $keyword = strtolower(trim($keyword));
    //$insertkeywords = "INSERT IGNORE INTO kwdb (keyword) VALUES ('$keyword')";
    $insertkeywords = "INSERT IGNORE INTO kwdb (keyword) VALUES ('".mysqli_real_escape_string($con, $keyword)."')";
        mysqli_query($con, $insertkeywords);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:56:39.753

您需要转义您的关键字： $insertkeywords = "INSERT IGNORE INTO kwdb (keyword) VALUES ('".mysql_real_escape_string($keyword)."')";

# java - 如何检查客户端程序是否是java中的原始程序

> ID：14423756
> 
> 赞同：0
> 
> 时间：2013-01-20T10:53:13.537
> 
> 标签：java, sockets

> **可能重复：**
> [为多人游戏获得良好的安全性](https://stackoverflow.com/questions/14423542/get-a-good-security-for-multiplayer-game)

我用服务器和客户端制作了一个程序，它们使用套接字相互通信。我在此博客上读到，您永远无法完全隐藏 jar 文件的源代码。所以客户不能只是复制我的源代码并稍微调整一下。例如，我的程序说 level += 1; 他可以做到+= 10级；那么我的服务器程序是否可以查看客户端程序是否是我制作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:58:01.203

您是对的。您的客户端 jar 可以被反编译和修改以将任何内容发送到您的服务器。
但我认为你没有抓住重点。您的服务器不知道访问它的客户端是谁（除非您使用客户端身份验证并且您仍然将安全部分委托给客户端程序的用户），因此您在与客户端交互时应始终进行防御性编程。例如，永远不要相信输入并始终验证它。在您的情况下，如果级别为 10，请验证它是否是可接受的输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:58:29.127

简单的解决方案：您可以覆盖客户端应用程序的类加载器并从 url/server 加载类。这样你的类文件就不需要在客户端了。

# selenium - 浏览器中的 Selenium WebDriverJS 获取用户窗口对象

> ID：14423764
> 
> 赞同：2
> 
> 时间：2013-01-20T10:54:54.987
> 
> 标签：selenium, webdriver, selenium-webdriver

我使用 Selenium IDE`this.browserbot.getUserWindow()`获取`window`对象，但我找不到使用[`WebDriverJs`](https://code.google.com/p/selenium/wiki/WebDriverJs).

使用[`WebDriverJs`](https://code.google.com/p/selenium/wiki/WebDriverJs)有没有办法获取`window`对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-16T03:40:57.757

不，不容易。

SeleniumIDE 在当前浏览器中工作，而 WebDriver 使用 JSON Wire Protocol 与潜在的远程浏览器通信。您的 WebDriver 代码未在目标浏览器中运行，因此窗口对象根本无法访问。（如果您的代码实际上在目标浏览器中运行，您可以通过正常方式从中获取窗口对象。）

[您可以尝试序列化窗口对象并通过 Wire 传输它： this answer 中](https://stackoverflow.com/a/26104227/3195526)有关于如何执行此操作的提示。这种努力几乎肯定是不值得的。

# android - 发现周围的所有蓝牙设备 UUID（iOS、Android）

> ID：14423766
> 
> 赞同：1
> 
> 时间：2013-01-20T10:55:11.270
> 
> 标签：android, ios, bluetooth, discovery

首先，如果问题与其他线程的某些主题接近，请原谅我。我搜索了以前的主题，但由于我不是程序员/技术人员，我不能确定他们是否准确地回答了我的问题。

事实上，我想知道是否有可能在 iOS 或 Android 上开发一个应用程序来扫描周围的蓝牙设备（特别是其他启用蓝牙的智能手机）并收集它们的所有 UUID。

*   是否需要约束（例如初步配对）？

*   只要启用蓝牙，其他设备是否可以锁定/关闭屏幕？经过一些基本测试，只是试图从我的 Windows Phone 中发现 iPhone 设备（从用户界面，而不是通过编程方式），我意识到 iPhone 一旦屏幕关闭，就会从 Windows Phone 列表中消失；尽管如此，即使它的屏幕关闭，它仍然可以在我的汽车（与之配对）中被识别。

*   是否有与蓝牙版本相关的限制？我在这个网站上读到 iOS 只发现蓝牙 4.0 设备。

总之，我需要一个可以在 iOS 和 Android 上运行的应用程序，它能够扫描所有其他启用了蓝牙的手机并收集它们的 UUID，而不管它们的当前状态如何（空闲、屏幕关闭、..）。

先感谢您。

最好的

# html - 链接到页面的特定部分

> ID：14423772
> 
> 赞同：4
> 
> 时间：2013-01-20T10:56:20.570
> 
> 标签：html, ios, wordpress, safari

我已经尝试了以下所有方法：

```
<a name="test"></a>
<a id="test"></a>
<h4 id="test">SOME TEXT</h4> 
```

然后像这样链接到它们：

```
<a href="pagename#test"> 
```

以上所有内容都适用于 Firefox、IE 和 Chrome，但没有一个适用于 Mac 上的 Safari 5.xx。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T11:11:20.890

`<a href="#test">Go to Test</a>`

. . .

`<div id="test">This is Test.</div>`

这应该有效。

编辑：另外，如果你想链接到不同页面中的特定 id，我认为你这样做，使用：

`<a href="somepage.html#test">Go to Test on some different page.</a>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:13:24.073

看起来您对锚的工作方式有误解，您需要使用该`href`属性。

```
<a name="test"></a>          <!-- not required -->
<a id="test"></a>            <!-- not required -->
<h4 id="test">SOME TEXT</h4> <!-- this is correct --> 
```

要链接到`<h4 id="test">`元素，请执行以下操作（如果目标位于同一页面上）：

```
<a href="#test">Go to Test</a> 
```

如果定位到不同的页面：

```
<a href="other_page.html#test"> 
```

# c# - 如何在集合中显示集合？

> ID：14423773
> 
> 赞同：0
> 
> 时间：2013-01-20T10:56:28.993
> 
> 标签：c#, wpf

我有以下课程：

```
public class Order
{
public string OrderName { get; set; }
public List<Parts> PartsList { get; set; }
}

public class Parts
{
public string PartName { get; set; }
public double PartQuantity { get; set; }
} 
```

在我的代码中，我创建了一个`Order`对象列表

```
List<Order> myOrders; 
```

我想以某种方式向用户显示所有这些，比如使用元素的堆栈面板，其中第一个是要显示的 TextBox，`OrderName`第二个是`Datagrid`显示部件列表？

老实说，我正在尝试许多不同的事情（我对使用哪种类型的控件没有要求），但我永远无法`PartsList`正确显示（要么我什么都没有，要么我得到“ `Collection`”向用户显示。

我们的目标是看到这样的东西：

```
Order1    Part1    7
          Part2    12
Order2    Part1    100
          Part2    1
          Part3    58 
```

或者无论如何，标题可以是任何东西，老实说，我对许多建议持开放态度。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:00:37.010

会`TreeView`工作吗？它看起来像这样：

```
- Order 1
  * Part A (100)
  * Part B (200)
+ Order 2
+ Order 3
- Order 4
  * Part C (300)
  * Part D (400)
  * Part E (500)
+ Order 5
... 
```

你可以这样做：

```
void AddOrderToTree(Order order)
{
  var orderNode = treeView.Nodes.Add(order);

  foreach(var part in order.Parts)
    orderNode.Nodes.Add(part);
} 
```

但是，是的，正如所指出的，我会使用这样的属性：

```
public class Part
{
  public virtual string Name { get; set; }
  public virtual double Quantity { get; set; }

  public override string ToString()
  {
    return string.Format("{0}: {1}", this.Name, this.Quantity.ToString());
  }
}

public class Order
{
  public virtual string Name { get; set; }
  public virtual List<Part> Parts { get; set; }

  public override string ToString()
  { 
    return this.Name;
  }
} 
```

# actionscript-3 - 如何在数据网格中添加日期字段

> ID：14423774
> 
> 赞同：0
> 
> 时间：2013-01-20T10:56:29.943
> 
> 标签：actionscript-3, apache-flex, flex3, flash-builder

我有一个具有可编辑属性的数据网格，并在列内显示日期信息。日期以字符串格式存储在数据提供者中。（这些日期来自带有 httpservice 的数据库）。但我想在我的数据网格列上添加一个 itemEditor。为此，我尝试

```
 <mx:DataGridColumn dataField="echElemDate"  headerText="MyHeaderDate" 
     headerStyleName="dgHeader" fontWeight="normal" 
      itemEditor="mx.controls.DateField" editorDataField="text"/> 
```

但是当我点击这个单元格时，会出现一个错误：

```
Type Coercion failed: cannot convert "29/07/2015" to Date 
```

所以你能帮我解决这个错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:40:34.510

使用 editorDataField="selectedDate"。因为当编辑结束时，它将 DateField[editorDataField] 转换为 data[dataField]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:26:08.343

@huang.xinghui 给了你有用的建议，这段代码你试过了吗？我复制了你的情况，这有帮助。

```
<mx:DataGridColumn dataField="echElemDate"  headerText="MyHeaderDate" 
                               headerStyleName="dgHeader" fontWeight="normal" 
                               itemEditor="mx.controls.DateField" editorDataField="selectedDate"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:17:27.347

尝试更改 headerText = DateString 并确保插入 mx:datagrid editable="true"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T11:28:31.647

如果在您的数据提供者中有带有可控制 AS 类的 AS 对象，最简单的方法是在您的类中添加一个 getter 和一个 setter，并使用[DateField](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/DateField.html#stringToDate%28%29)转换 String<>Date ，如下所示：

```
public function get echElemDateAsDate():Date {
    return DateField.stringToDate(this.echElemDate, "DD/MM/YYYY");
}

public function set echElemDateAsDate(value:Date) {
     this.echElemDate = DateField.dateToString(value, "DD/MM/YYYY");
} 
```

如果您无法控制班级，那么我认为您必须做一个自定义项目编辑器

# ios - 应用程序图标未出现在通过 [APP NAME] 的用户提要中

> ID：14423777
> 
> 赞同：3
> 
> 时间：2013-01-20T10:56:57.683
> 
> 标签：ios, facebook, feed

我正在使用我开发的 iOS 应用程序中的“我/照片”成功地将图像发布到用户的提要。它出现在提要上，也出现在下面的文本中：

赞 · 评论 · 分享 · 7 分钟前通过 [APP NAME] ·

[APP NAME] 是一个链接，它正确地指向应用程序的 Facebook 页面。一切都很好。

但是，“赞”之前有一个小图标，它似乎是默认图片图标，而不是我的应用程序的图标。（但请注意，它有一个链接，并正确地进入应用页面）。

如何将其更改为应用程序的图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:24:46.597

您可以控制在 Facebook 开发人员页面上的帖子消息（以及您的 Facebook 应用程序的其他方面）中显示的图标。

看看：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)

找到您的应用并选择`edit app`。在这里您可以输入显示名称、图标和许多其他内容。

# css - How can I remove space (margin) above HTML header?

> ID：14423781
> 
> 赞同：33
> 
> 时间：2013-01-20T10:57:10.300
> 
> 标签：css, html, margin, html-heading

I am creating a website.

I have written the HTML part and now I am writing the stylesheet. But there is always some space above my header. How can I remove it?

My HTML and CSS code is given below.

```
body{
  margin: 0px;
  padding: 0px;
}

header{
  margin: 0px;
  padding: 0px;
  height: 20em;
  background-color: #C0C0C0;
}
```

```
<header>
  <h1>OQ Online Judge</h1>
  <form action="<?php echo base_url();?>/index.php/base/si" method="post">
    <label for="email1">E-mail : </label><input type="text" name="email" id="email1">
    <label for="password1">Password : </label><input type="password" name="password" id="password1">
    <input type="submit" name="submit" value="Login">
  </form>
</header>
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-20T11:04:09.233

Try:

```
h1 {
    margin-top: 0;
} 
```

You're seeing the effects of [margin collapsing](http://reference.sitepoint.com/css/collapsingmargins).

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T11:08:45.663

Try margin-top:

```
<header style="margin-top: -20px;">
    ... 
```

Edit:

Now I found relative position probably a better choice:

```
<header style="position: relative; top: -20px;">
    ... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-20T11:10:02.713

It is good practice when you start creating website to reset all the margins and paddings. So I recommend on start just to simple do:

```
* { margin: 0, padding: 0 } 
```

This will make margins and paddings of all elements to be 0, and then you can style them as you wish, because each browser has a different default margin and padding of the elements.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-22T13:58:04.467

I solved the space issue by adding a border and removing is by setting a negative margin. Do not know what the underlying problem is though.

```
header {
  border-top: 1px solid gold !important;
  margin-top: -1px !important;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-20T17:40:01.240

To prevent unexpected margins and other browser-specific behavior in the future, I'd recommend to include [reset.css](http://meyerweb.com/eric/tools/css/reset/reset.css) in your stylesheets.

Be aware that you'll have to set the h[1..6] font size and weight to make headings look like headings again after that, and many other things.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-10T10:17:54.930

Just for completeness, changing `overflow` to `auto`/`hidden` should do the trick too.

```
body {
  margin: 0px;
  padding: 0px;
}

header {
  margin: 0px;
  padding: 0px;
  height: 20em;
  background-color: #C0C0C0;
  overflow: auto;
}
```

```
<header>
  <h1>OQ Online Judge</h1>

  <form action="<?php echo base_url();?>/index.php/base/si" method="post">
    <label for="email1">E-mail :</label>
    <input type="text" name="email" id="email1">
    <label for="password1">Password :</label>
    <input type="password" name="password" id="password1">
    <input type="submit" name="submit" value="Login">
  </form>
</header>
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-20T17:33:42.157

It is probably the `h1` tag causing the problem. Applying `margin: 0;` should fix the problem.

But you should use a CSS reset for every new project to eliminate browser consistencies and problems like yours. Probably the most famous one is Eric Meyer's: [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-03T16:00:16.797

This css allowed chrome and firefox to render all other elements on my page normally and remove the margin above my h1 tag. Also, as a page is resized em can work better than px.

```
h1 {
  margin-top: -.3em;
  margin-bottom: 0em;
} 
```

# java - Android 应用程序的 main() 函数的最佳等效项是什么？

> ID：14423782
> 
> 赞同：2
> 
> 时间：2013-01-20T10:57:26.327
> 
> 标签：java, android, process, main, lifecycle

我到处搜索了一种在 Android 应用程序中拥有相当于 main() 函数（是函数不是方法）的方式，但失败了......

通常我想做的是：

```
void main()
{
    // do some really nice initialisations stuff here

    // ... let the app does his life, I really don't care

    // do some final stuff here before leaving
} 
```

到目前为止，我看到的最接近的方法是使用 SplashScreen 并覆盖 OnCreate() 方法。问题是从我的角度来看这是不可接受的。为什么？因为 SplashScreen 只不过是一个标记为 LAUNCHER 的 Activity。

这使它出现在应用程序列表中，这是我在开发应用程序小部件时不想要的。此外，在应用程序销毁之前将我的代码放在哪里？在 onDestroy() 方法中？不，再一次，这不可靠。Android 可以决定在应用程序仍在运行时删除我的实例。

好吧，事实上，我的原则是我的应用程序的每个组件都在同一个进程中运行，因为我没有在 Manifest 中明确提到我不希望一个组件在自己的进程中运行。

对于应用程序小部件，我将初始化代码放在第一次调用 onUpdate() 方法上。我认为这是一个不错的选择。然后这个应用小部件（更准确地说是 AppWidgetProvider）负责按照自己的意愿启动任何活动。

所有应用程序的“数据库”都在一个单独的单例中定义，如下所示：

```
public class MyDataBase {

    public static MyDataBase getInstance() {
        if (instance_ == null)
            instance_ = new DataBase();
        return instance_;
    }

    public void load();
    public void save();

    static MyDataBase instance_ = null;

    public int myInt;
    public String myString;
    public Object myObject;
    etc..
} 
```

至少有了这个 Singleton，我敢肯定，它的生命周期与整个应用程序本身相同。

为了支持那个 AppWidgetProvider，我不得不花点心思。实际上，Android 可以决定删除它的实例，而其他一些活动仍然存在并且进程仍在运行。因此，例如，在 OnUpdate() 的第一次调用中系统地加载我的数据库是不必要的并且是多余的。我所做的是有一个静态布尔值，该值指示数据库是否已在此过程的生命周期内加载。因此，AppWidgetProvider 可以实例化大量时间，只要 Singleton DataBase 持续存在（如此过程），它就不会每次都重新加载 DataBase，明白吗？（是的，很难说清楚……）

关于应用程序的清理代码，我想覆盖我的 DataBase Singleton 的 finalize() 方法，但是，我真的不确定这是一个好主意，因为调用此方法的那一刻是完全不可预测的。我想如果你突然关闭你的Android，它会被调用，但是我不确定这里有什么，到目前为止，我还没有找到那个部分的解决方案。

欢迎任何评论或我目前所做的不那么棘手的事情。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T11:03:47.010

onResume() 是在启动您的应用程序之前总是会到达的函数，因此您可以将“主”代码放在 onCreate() 方法或 onResume() 中。

onPause() 总是在用户或操作系统销毁应用程序之前调用。

Android 文档中对生命周期有很好的解释：

[http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T14:46:54.527

对于初始化，您可以覆盖类的[`onCreate`](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29)方法`Application`：

> 在应用程序启动时调用，在创建任何活动、服务或接收器对象（不包括内容提供者）之前调用。实现应该尽可能快（例如使用状态的延迟初始化），因为在此函数中花费的时间直接影响启动进程中的第一个活动、服务或接收器的性能。如果您覆盖此方法，请务必调用 super.onCreate()

终止更难处理。您可能必须分别监控应用程序的每个组件。如果您的目标是 API 级别 14 或更高版本，您可以使用它[`Application.registerActivityLifecycleCallbacks`](http://developer.android.com/reference/android/app/Application.html#registerActivityLifecycleCallbacks%28android.app.Application.ActivityLifecycleCallbacks%29)来帮助解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:19:10.243

> 到目前为止，我看到的最接近的方法是使用 SplashScreen 并覆盖 OnCreate() 方法。问题是从我的角度来看这是不可接受的。为什么？因为 SplashScreen 只不过是一个标记为 LAUNCHER 的 Activity。

这是因为 Android 由多个活动组成，并且这些活动具有生命周期。所以每个活动都从 onCreate() 开始，然后在 onDestroy() 结束。 [http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

> 这使它出现在应用程序列表中，这是我在开发应用程序小部件时不想要的。此外，在应用程序销毁之前将我的代码放在哪里？在 onDestroy() 方法中？不，再一次，这不可靠。Android 可以决定在应用程序仍在运行时删除我的实例。

在用户按下主页按钮退出您的应用程序的场景中，您当前的活动更有可能调用 onPause() 方法（仅当活动没有其他进程要完成时）。但是，当用户强制通过结束进程关闭（终止）您的整个应用程序时。然后您不必担心调用任何方法或其他任何事情，因为 Android 本身会自动关闭与您的应用程序相关的任何内容。

> 为了支持那个 AppWidgetProvider，我不得不花点心思。实际上，Android 可以决定删除它的实例，而其他一些活动仍然存在并且进程仍在运行。因此，例如，在 OnUpdate() 的第一次调用中系统地加载我的数据库是不必要的并且是多余的。我所做的是有一个静态布尔值，该值指示数据库是否已在此过程的生命周期内加载。因此，AppWidgetProvider 可以实例化大量时间，只要 Singleton DataBase 持续存在（如此过程），它就不会每次都重新加载 DataBase，明白吗？（是的，很难说清楚……）

我认为您为单例数据库连接发布的示例还不错，但是有更好的方法可以干净、更有效地完成工作。例如[休眠框架连接池](http://www.java-samples.com/showtutorial.php?tutorialid=1309)

# android - 在android中自动更新电池电量

> ID：14423789
> 
> 赞同：2
> 
> 时间：2013-01-20T10:58:19.237
> 
> 标签：android

我正在使用此代码在我的应用程序中显示电池电量。它工作正常，但不会自动更新电池电量。

我应该怎么做才能自动更新电池电量。

```
 public class MainActivity extends Activity {

        private TextView txtBattery;

        private BroadcastReceiver mBatteryLevelReciver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

                context.unregisterReceiver(this);
                //int rawLevel = intent.getIntExtra("level", -1);
                int rawLevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
                //int scale = intent.getIntExtra("scale", -1);
                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
                int level = -1;
                if (rawLevel >= 0 && scale > 0) {
                    level = (rawLevel * 100) / scale;
                }
                txtBattery.setText("Battery3 Level Remaining  :" + level + "%");
            }

        };

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            txtBattery = (TextView) findViewById(R.id.batterymeter_txt);
            batteryLevel();

        }

        private void batteryLevel() {
            IntentFilter batteryLevelFliter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
            registerReceiver(mBatteryLevelReciver, batteryLevelFliter);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:15:28.750

将接收者变量移动为类属性，以便在接收到意图时将其保存在内存中：

```
public class Main extends Activity {

    private TextView txtBattery;

    private BroadcastReceiver mBatteryLevelReciver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {

            //int rawLevel = intent.getIntExtra("level", -1);
            int rawLevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            //int scale = intent.getIntExtra("scale", -1);
            int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
            int level = -1;
            if (rawLevel >= 0 && scale > 0) {
                level = (rawLevel * 100) / scale;
            }
            txtBattery.setText("Battery Level Remaining  :" + level + "%");
        }

    };

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        txtBattery = (TextView) findViewById(R.id.batterymeter_txt);
        batteryLevel();

    }

    private void batteryLevel() {
        IntentFilter batteryLevelFliter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        registerReceiver(batteryLevelReciver, batteryLevelFliter);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:08:49.880

你为什么`BroadcastReceiver`在你的`onReceive()`方法中注销你的？

```
context.unregisterReceiver(this); 
```

删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T08:41:43.437

试试这个代码..

```
public class AndroidBattery extends Activity {

private TextView batteryLevel, batteryVoltage, batteryTemperature,
batteryTechnology, batteryStatus, batteryHealth;

  /** Called when the activity is first created. */
   @Override
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   batteryLevel = (TextView)findViewById(R.id.batterylevel);
   batteryVoltage = (TextView)findViewById(R.id.batteryvoltage);
   batteryTemperature = (TextView)findViewById(R.id.batterytemperature);
   batteryTechnology = (TextView)findViewById(R.id.batterytechology);
   batteryStatus = (TextView)findViewById(R.id.batterystatus);
   batteryHealth = (TextView)findViewById(R.id.batteryhealth);

   this.registerReceiver(this.myBatteryReceiver,
     new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
 }

 private BroadcastReceiver myBatteryReceiver
 = new BroadcastReceiver(){

  @Override
  public void onReceive(Context arg0, Intent arg1) {
   // TODO Auto-generated method stub

  if (arg1.getAction().equals(Intent.ACTION_BATTERY_CHANGED)){
 batteryLevel.setText("Level: "
 + String.valueOf(arg1.getIntExtra("level", 0)) + "%");
 batteryVoltage.setText("Voltage: "
   + String.valueOf((float)arg1.getIntExtra("voltage", 0)/1000) + "V");
   batteryTemperature.setText("Temperature: "
  + String.valueOf((float)arg1.getIntExtra("temperature", 0)/10) + "c");
 batteryTechnology.setText("Technology: " + arg1.getStringExtra("technology"));

 int status = arg1.getIntExtra("status", BatteryManager.BATTERY_STATUS_UNKNOWN);
  String strStatus;
 if (status == BatteryManager.BATTERY_STATUS_CHARGING){
  strStatus = "Charging";
  } else if (status == BatteryManager.BATTERY_STATUS_DISCHARGING){
  strStatus = "Dis-charging";
  } else if (status == BatteryManager.BATTERY_STATUS_NOT_CHARGING){
strStatus = "Not charging";
  } else if (status == BatteryManager.BATTERY_STATUS_FULL){
  strStatus = "Full";
 } else {
strStatus = "Unknown";
  }
  batteryStatus.setText("Status: " + strStatus);

  int health = arg1.getIntExtra("health", BatteryManager.BATTERY_HEALTH_UNKNOWN);
  String strHealth;
  if (health == BatteryManager.BATTERY_HEALTH_GOOD){
  strHealth = "Good";
 } else if (health == BatteryManager.BATTERY_HEALTH_OVERHEAT){
  strHealth = "Over Heat";
  } else if (health == BatteryManager.BATTERY_HEALTH_DEAD){
  strHealth = "Dead";
  } else if (health == BatteryManager.BATTERY_HEALTH_OVER_VOLTAGE){
   strHealth = "Over Voltage";
  } else if (health == BatteryManager.BATTERY_HEALTH_UNSPECIFIED_FAILURE){
   strHealth = "Unspecified Failure";
 } else{
   strHealth = "Unknown";
  }
 batteryHealth.setText("Health: " + strHealth);

  }
 }

   };
} 
```

# assembly - FPU 用 fld 存储 nan

> ID：14423793
> 
> 赞同：0
> 
> 时间：2013-01-20T10:58:40.113
> 
> 标签：assembly, floating-point, x86, masm, fpu

我正在用汇编程序编写一个 DOS 程序：我正在尝试绘制 Mandelbrot 集。我现在正试图在汇编中翻译这段 C 代码：

```
double x0 = i * 3.2 / maxX - 2.1; //scaled x coordinate of pixel (-2.1, 1.1) 
```

我把它翻译成：

```
finit
fld     scaleX  ;contains 3.5, declared with
fimul   xCoord  ;the i coordinate
fidiv   maxX    ;maximum width (320)
fsub    offsetX ;result is scaleX * xCoord / maxX - offsetX
fstp    x0      ;store the result in x0 
```

不幸的是，第一个`fld`失败了。WD 调试器告诉我`fld`存储`nan`在`ST(0)`FPU 寄存器中。为什么？我究竟做错了什么？这是完整的程序： http: [//pastebin.com/KDrn5aLD](http://pastebin.com/KDrn5aLD)

```
.387
assume cs:cseg, ds:dseg

uint    TYPEDEF word
integer TYPEDEF word
float   TYPEDEF real4
double  TYPEDEF real8

largh   =       320     ;larghezza dello schermo
alt     =       200     ;altezza dello schermo

dseg    SEGMENT para public 'data'
maxX    integer 0
maxY    integer 0
xCoord  integer 0
yCoord  integer 0       
x0      double  0.0     ;coordinata x del pixel riscalata a (-2.1 - 1.1)
y0      double  0.0     ;coordinata y del pixel riscalata a (-2.1 - 1.1)
scaleX  double  3.2
scaleY  double  2.0     ;scala in X ed in Y delle coordinate
offsetX double  2.1
offsetY double  1.0

x       double  0.0
y       double  0.0     ;valori della serie in un determinato punto (xo, yo)
zeroConst       double  0.0     ;costante double 0.0

dseg    ENDS
cseg    SEGMENT
START:
        mov     maxX, largh
        mov     maxY, alt

        mov     xCoord, 0
forX:   cmp     xCoord, largh
        jae     finish

        ;mov    dl,69
        ;mov    ah,2
        ;int    21h     ;test loop forX

        mov     yCoord, 0
        cmp     yCoord, alt
        jae     nextX
forY:   cmp     yCoord, alt
        jnb     nextX

        ;forY code here
        finit
        fld     scaleX  ;coordinate X
        fimul   xCoord
        fidiv   maxX
        fsub    offsetX ;calcolo scala * coordinata / coordinataMax - offset
        fstp    x0

;       fld     scaleY  ;coordinate Y
;       fimul   yCoord
;       fidiv   maxY
;       fsub    offsetY ;calcolo scala * coordinata / coordinataMax - offset
;       fstp    y0
;       
;       fld     zeroConst
;       fst     x
;       fstp    y

        inc     yCoord
        jmp     forY

nextX:  inc     xCoord
        jmp     forX

finish: mov     dl, 70
        mov     ah, 2
        int     21h

        mov     ah, 4Ch ;DOS terminate opcode
        xor     al, al
        int     21h     ;DOS call       
cseg    ENDS
END     START 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:13:01.597

我看到的一个问题是您没有设置`ds`并`es`指向该`dseg`段。为 .EXE 程序而不是 DOS、汇编程序或链接程序执行此操作是您的责任。

像这样修改代码：

```
cseg    SEGMENT
START:
        mov     ax, dseg
        mov     ds, ax
        mov     es, ax
        mov     maxX, largh
        mov     maxY, alt
        ... 
```

此外，您没有任何堆栈段，这很糟糕，因为中断可能会覆盖您的代码或数据。

添加一个：

```
sseg segment stack 'stack'
  dw 2048 dup (?)
sseg ends 
```

# python - python中Haskell scanl的等价物

> ID：14423794
> 
> 赞同：18
> 
> 时间：2013-01-20T10:58:46.793
> 
> 标签：python, haskell, functional-programming

我想知道在 python 中是否有等效 Haskell 的内置函数，`scanl`就像.`reduce``foldl`

这样做的东西：

```
Prelude> scanl (+) 0 [1 ..10]
[0,1,3,6,10,15,21,28,36,45,55] 
```

问题不在于如何实现它，我已经有 2 个实现，如下所示（但是，如果您有更优雅的实现，请随时在此处展示）。

第一次实现：

```
 # Inefficient, uses reduce multiple times
 def scanl(f, base, l):
   ls = [l[0:i] for i in range(1, len(l) + 1)]
   return [base] + [reduce(f, x, base) for x in ls]

  print scanl(operator.add, 0, range(1, 11)) 
```

给出：

```
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45, 55] 
```

第二种实现：

```
 # Efficient, using an accumulator
 def scanl2(f, base, l):
   res = [base]
   acc = base
   for x in l:
     acc = f(acc, x)
     res += [acc]
   return res

 print scanl2(operator.add, 0, range(1, 11)) 
```

给出：

```
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45, 55] 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-20T11:03:25.007

如果它更优雅，您可以使用它：

```
def scanl(f, base, l):
    for x in l:
        base = f(base, x)
        yield base 
```

像这样使用它：

```
import operator
list(scanl(operator.add, 0, range(1,11))) 
```

Python 3.x 有[`itertools.accumulate(iterable, func= operator.add)`](http://docs.python.org/3/library/itertools.html#itertools.accumulate). 它的实现如下。该实现可能会给您一些想法：

```
def accumulate(iterable, func=operator.add):
    'Return running totals'
    # accumulate([1,2,3,4,5]) --> 1 3 6 10 15
    # accumulate([1,2,3,4,5], operator.mul) --> 1 2 6 24 120
    it = iter(iterable)
    total = next(it)
    yield total
    for element in it:
        total = func(total, element)
        yield total 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-28T15:02:25.647

开始`Python 3.8`，并引入[赋值表达式（PEP 572）](https://www.python.org/dev/peps/pep-0572/)（`:=`运算符），它提供了命名表达式结果的可能性，我们可以使用列表推导来复制*左扫描*操作：

```
acc = 0
scanned = [acc := acc + x for x in [1, 2, 3, 4, 5]]
# scanned = [1, 3, 6, 10, 15] 
```

* * *

或者以一般的方式，给定一个列表、一个归约函数和一个初始化的累加器：

```
items = [1, 2, 3, 4, 5]
f = lambda acc, x: acc + x
accumulator = 0 
```

我们可以`items`从左边扫描并减少它们`f`：

```
scanned = [accumulator := f(accumulator, x) for x in items]
# scanned = [1, 3, 6, 10, 15] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T06:31:46.937

我也有类似的需求。此版本使用 python 列表推导

```
def scanl(data):
    '''
    returns list of successive reduced values from the list (see haskell foldl)
    '''
    return [0] + [sum(data[:(k+1)]) for (k,v) in enumerate(data)]

>>> scanl(range(1,11)) 
```

给出：

```
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45, 55] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T00:53:26.260

像往常一样，Python 生态系统也充满了解决方案：

Toolz 有一个可以将用户提供的函数作为参数的累加器。我用 lambda 表达式对其进行了测试。

[https://github.com/pytoolz/toolz/blob/master/toolz/itertoolz.py](https://github.com/pytoolz/toolz/blob/master/toolz/itertoolz.py)

[https://pypi.python.org/pypi/toolz](https://pypi.python.org/pypi/toolz)

和 more_itertools 一样

[http://more-itertools.readthedocs.io/en/stable/api.html](http://more-itertools.readthedocs.io/en/stable/api.html)

我没有从 more-itertools 测试版本，但它也可以采用用户提供的功能。

# jquery - jQuery 无法让 .click 处理此代码

> ID：14423795
> 
> 赞同：1
> 
> 时间：2013-01-20T10:59:09.097
> 
> 标签：jquery, css, animation, click, ready

我有以下问题：

我希望动画在点击时开始而不是在就绪时开始......它在设置为 .ready 时有效，但在 .click 时没有

```
$('div.main').ready(function() {
  setTimeout("$('div#tl').css({'top' : '-175px', 'left' : '-175px'})", 100);
  setTimeout("$('div#t').css({'top' : '-175px'})", 300);
  setTimeout("$('div#tr').css({'top' : '-175px', 'left' : '325px'})", 500);
  setTimeout("$('div#r').css({'left' : '325px'})", 700);
  setTimeout("$('div#br').css({'top' : '325px', 'left' : '325px'})", 900);
  setTimeout("$('div#b').css({'top' : '325px'})", 1100);
  setTimeout("$('div#bl').css({'top' : '325px', 'left' : '-175px'})", 1300);
  setTimeout("$('div#l').css({'left' : '-175px'})", 1500);
}); 
```

这是HTML：

```
<div class="main">
    <div class="sub" id="tl"></div>
    <div class="sub" id="t"></div>
    <div class="sub" id="tr"></div>
    <div class="sub" id="r"></div>
    <div class="sub" id="br"></div>
    <div class="sub" id="b"></div>
    <div class="sub" id="bl"></div>
    <div class="sub" id="l"></div>
</div> 
```

这里是 CSS：

```
div.main {
  position: relative;
  z-index: 2;
  width: 300px;
  height: 300px;
  margin: 0px auto;
  top: 50%;
  margin-top: -150px;
  background-color: #eee;
}

div.sub {
  position: absolute;
  z-index: 1;
  top: 75px;
  left: 75px;
  width: 150px;
  height: 150px;
  background-color: rgba(0,0,0,0.5);
  -webkit-transition: all 0.3s ease-in-out;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:07:09.207

您应该将它们包含在文档就绪功能中。

```
$(document).ready(function() {
 $('div.main').click(function() {
  setTimeout("$('div#tl').css({'top' : '-175px', 'left' : '-175px'})", 100);
  setTimeout("$('div#t').css({'top' : '-175px'})", 300);
  setTimeout("$('div#tr').css({'top' : '-175px', 'left' : '325px'})", 500);
  setTimeout("$('div#r').css({'left' : '325px'})", 700);
  setTimeout("$('div#br').css({'top' : '325px', 'left' : '325px'})", 900);
  setTimeout("$('div#b').css({'top' : '325px'})", 1100);
  setTimeout("$('div#bl').css({'top' : '325px', 'left' : '-175px'})", 1300);
  setTimeout("$('div#l').css({'left' : '-175px'})", 1500);
});
    }); 
```

[工作演示](http://jsfiddle.net/fARb4/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:01:10.373

您只需将代码放入 dom 就绪函数中

```
$(function() {
 $('div.main').click(function() {
   setTimeout("$('div#tl').css({'top' : '-175px', 'left' : '-175px'})", 100);
   setTimeout("$('div#t').css({'top' : '-175px'})", 300);
   setTimeout("$('div#tr').css({'top' : '-175px', 'left' : '325px'})", 500);
   setTimeout("$('div#r').css({'left' : '325px'})", 700);
   setTimeout("$('div#br').css({'top' : '325px', 'left' : '325px'})", 900);
   setTimeout("$('div#b').css({'top' : '325px'})", 1100);
   setTimeout("$('div#bl').css({'top' : '325px', 'left' : '-175px'})", 1300);
   setTimeout("$('div#l').css({'left' : '-175px'})", 1500);
 });
}); 
```

问题是执行js时你的div不存在。当所有元素都准备好时，会调用 dom 就绪函数。

见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# ruby - 当我知道另一个值时，如何找到一个值？

> ID：14423803
> 
> 赞同：0
> 
> 时间：2013-01-20T11:00:40.523
> 
> 标签：ruby, selenium-webdriver

以下是网页内容的一部分：

```
<td><a href="/aems/example.com">TEST LTD</a></td>
<td>SFFFFGG, JHFUJ, Hawaii,</td>
<td>aaaa</td> 
```

如果我知道`aaaa`，无论如何我能找到价值`TEST LTD`吗？哪里`TEST LTD`可以是任何运行时值，`aaaa`我一直都知道。以上`<td>`部分内容之前或之后的网页中可以有更多`html`内容。

***编辑***

**代码**

```
require "rubygems"
require "selenium-webdriver"

driver = Selenium::WebDriver.for :firefox
driver.get "https://www.example.com"

element = driver.find_element :name => "username"
element.send_keys "######"
element = driver.find_element :name => "password"
element.send_keys "######"
element.submit
element = driver.find_element(:name, "btnHome")
element.click
element=driver.find_element(:link, "Suppliers")
#print element.attribute(:href)
element.click
element = driver.find_element :name => "search.locationIdentifier"
element.send_keys "H00371101"
element = driver.find_element :name => "btnSearch"
element.click

# all_table_data = driver.find_elements(:tag_name, "td")

 # all_table_data.each do |td|

   # puts td.text

 # end

 element2 = driver.find_elements(:xpath,"//td[text()='H00371101']/preceding-sibling::td[2]")

puts element2 
```

***错误已被删除，但未打印该值。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T09:22:33.843

这里

你可以试试这个 XPath

```
String xpath="//a[@href='/aems/example.com']/../following-sibling::td";

int td_size=driver.findElements(By.xpath(xpath)).size();

for(int i=1;i<=td_size;i++)
{
  System.out.println(driver.findElement(By.xpath("//a[@href='/aems/example.com']/../following-sibling::td["+i+"]")).getText());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:18:11.837

这可以通过使用 xpath 选择器来完成。您可以找到具有特定内容的元素，

```
 element1 = driver.findElement(By.xpath("//td[text()='aaaa']")) 
```

以及前面同级的特定内容，

```
 element2 = driver.findElement(By.xpath("//td[text()='aaaa']/preceding-sibling::td[2]")) 
```

现在您可以在 element2 上执行您想要的任何操作。

我想建议您将检查 xpath 与 firebug 和 xpath 检查器一起使用。

希望它会有所帮助。

# entity-framework - 实体框架代码优先 - 未找到映射和元数 据异常

> ID：14423808
> 
> 赞同：2
> 
> 时间：2013-01-20T11:02:09.040
> 
> 标签：entity-framework

将实体子类化并将子类实例添加到 Context 的 DbSet 集合会导致以下错误`Mapping and metadata information could not be found for EntityType 'Namespace_Name.SubClass_Entity_Name'`。

**细节：**

上下文类有一个属性 DbSet。
我们在不同的程序集中有几个实体，

1.  BaseClass（属于 Assembly1 的 BaseClass）
2.  DerivedClass : BaseClass (DerivedClass 属于 Assembly2)

在运行时，当我们将派生类的实例添加到 Context 时，我们会得到上述异常。

注意：当 DerivedClass 与 BaseClass 属于同一程序集时，不会发生此异常。

**问题：**
为什么我们有这个问题，只是因为子类属于一个单独的程序集？
为什么我们不为属于同一程序集的子类面对这个问题？

* * *

**更新：**

我找到了一个修复方法，就是重写 OnModelCreating 方法并注册 DerivedClass，如下所示`modelBuilder.Entity< DerivedClass>();`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-16T10:26:38.493

另一种解决方法：如果您使用 TPT 映射，您也必须注册您的派生类，但这样更有意义。

```
Map(m => 
{
  m.ToTable("BaseClassTableName")
}.Map<DerivedClass>(m =>
{
  m.ToTable("DerivedClassTableName")
} 
```

# php - 无法通过 GCM 发送消息

> ID：14423813
> 
> 赞同：0
> 
> 时间：2013-01-20T11:02:37.167
> 
> 标签：php, android, ajax, google-cloud-messaging

我正在使用 PHP 脚本通过 GCM 将消息推送到 android 设备上。我有一个 html 表单，它接受文本输入作为消息，然后将此消息推送到 android 设备。

现在，当我尝试使用两个单独的字段时 1\. 摘录 2\. 消息 我的 android 设备收到一条空消息。

我需要知道我哪里出错了。

这是我的 HTML 表单

```
 <form id="<?php echo $row["id"] ?>" name="" method="post" onsubmit="return sendPushNotification('<?php echo $row["id"] ?>')"> 
                        <label>User:</label> <span><?php echo $row["id"] ?></span> 
                        <div class="clear"></div> 
                        <div class="send_container"> 
                            <textarea rows="3" name="excerpt" cols="10" class="txt_excerpt" placeholder="Type excerpt here"></textarea>
                            <textarea rows="3" name="message" cols="25" class="txt_message" placeholder="Type message here"></textarea> 
                            <input type="hidden" name="regId" value="<?php echo $row["gcm_regid"] ?>"/> 
                            <input type="submit" class="send_btn" value="Send" onclick=""/> 
                        </div> 
                    </form> 
```

这是ajax脚本

```
<script type="text/javascript"> 
    $(document).ready(function(){ 

    }); 
    function sendPushNotification(id){ 
        var data = $('form#'+id).serialize(); 
        $('form#'+id).unbind('submit'); 
        $.ajax({ 
            url: "send_message.php", 
            type: 'GET', 
            data: data, 
            beforeSend: function() { 

            }, 
            success: function(data, textStatus, xhr) { 
                  $('.txt_message').val("");
                  $('.txt_excerpt').val("");    
            }, 
            error: function(xhr, textStatus, errorThrown) { 

            } 
        }); 
        return false; 
    } 
</script> 
```

这是 Send_message.php 代码

```
if (isset($_GET["regId"]) && isset($_GET["message"]) && isset($_GET["excerpt"])) { 
    $regId = $_GET["regId"]; 
    $message = $_GET["message"];
    $excerpt = $_GET["excerpt"];

    include_once './GCM.php'; 

    $gcm = new GCM(); 

    $registatoin_ids = array($regId); 
    $message = array("news" => $message, "exc" => $excerpt); 

    $result = $gcm->send_notification($registatoin_ids, $message); 

    echo $result; 
```

这是 GCM.php 代码

```
public function send_notification($registatoin_ids, $message, $excerpt) {
        // include config
        include_once './config.php';

        // Set POST variables
        $url = 'https://android.googleapis.com/gcm/send';

        $fields = array(
            'registration_ids' => $registatoin_ids,
            'data' => $message,

        );

        $headers = array(
            'Authorization: key=' . GOOGLE_API_KEY,
            'Content-Type: application/json'
        );
        // Open connection
        $ch = curl_init();

        // Set the url, number of POST vars, POST data
        curl_setopt($ch, CURLOPT_URL, $url);

        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        // Disabling SSL Certificate support temporarly
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

        // Execute post
        $result = curl_exec($ch);
        if ($result === FALSE) {
            die('Curl failed: ' . curl_error($ch));
        }

        // Close connection
        curl_close($ch);
        echo $result;
    } 
```

这是 android GCMIntentService 代码

```
@Override
protected void onMessage(Context context, Intent intent) { 
    Log.i(TAG, "Received message"); 
    String message = intent.getExtras().getString("news");
    String excerpt = intent.getExtras().getString("exc");
    Log.i("Received ->", excerpt+" "+message);
    if(message!=null)
    {
        displayMessage(context, message); 
    // notifies user 
        generateNotification(context, message); 
    }
} 
```

每当我从服务器推送消息时，我在设备上看到的只是一个空白通知。

# python - 跟踪读取的字节数

> ID：14423817
> 
> 赞同：0
> 
> 时间：2013-01-20T11:03:24.827
> 
> 标签：python, string, byte

我想为我的一个程序 IN PYTHON 实现一个命令行进度条，它逐行从文件中读取文本。

我可以通过以下两种方式之一实施进度量表：

1.  （行数/总行数）或
2.  （完成的字节数/总字节数）

我不在乎哪个，但`"number of lines"`似乎需要我遍历整个文档（可能非常大）才能获得`"total lines"`.

这似乎效率极低。我在思考，如果我获取文件的大小（更容易获得？）并跟踪已读取的字节数，它可能会成为一个很好的进度条指标。

我可以使用`os.path.getsize(file)`or`os.stat(file).st_size`来检索文件的大小，但我还没有找到一种方法来跟踪`readline()`. 我正在使用的文件应该用 ASCII 编码，甚至可能是 Unicode，所以......我应该只确定使用的编码，然后记录读取或使用的字符数或读取的每一行的`os.getsizeof()`某些函数吗？`len()`

我相信这里会有问题。有什么建议么？

（PS - 我不认为手动输入一次读取的字节数会起作用，因为我需要单独处理每一行；否则我需要在之后用“\n”将其拆分。 )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:24:50.680

```
bytesread = 0
while True:
  line = fh.readline()
  if line == '':
    break
  bytesread += len(line) 
```

或者，更短一点：

```
bytesread = 0
for line in fh:
  bytesread += len(line) 
```

使用`os.path.getsize()`(or `os.stat`) 是确定文件大小的有效方法。

# jquery - 点击链接，关闭div，用动画打开其他

> ID：14423819
> 
> 赞同：0
> 
> 时间：2013-01-20T11:03:39.000
> 
> 标签：jquery, show-hide

**现在的情况：** 4 个导航链接，点击它会打开带有动画的内容字段。

**问题：** 可以打开所有内容字段，而当时它应该是一个。

**解决方案？：** 点击导航链接时，关闭所有内容字段，只打开一个。

```
This is the script which works, (the overlay is useless): 
```

[单击此处获取 JSFiddle](http://jsfiddle.net/8y7Sr/126/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:17:21.480

```
$(function() {
    $('.activator').each(function(){
        $(this).click(function(){
            showHideAnimation(clickedObj);
        });
    });
}

function showHideAnimation(clickedObj)
{
    $('.activator').each(function(){
        if($(this).id == clickedObj.id) {
            $(this).fadeIn('fast',function(){
                $(this).animate({'bottom':'0px'},800);
            });
        } else {
            $(this).animate({'bottom':'-600px'},800,function(){
                $(this).fadeOut('fast');
            });
        }
    }
} 
```

如果它不能正常工作，请尝试这个，然后只用**这个替换****$(this)**

# python - Python：在树生长中通过构造函数调用进行子引用分配

> ID：14423822
> 
> 赞同：0
> 
> 时间：2013-01-20T11:03:57.577
> 
> 标签：python, reference, constructor, tree, init

这是一个相当具体的问题，但由于我无法弄清楚这里发生了什么，让我向您展示这个问题：

生长决策树，我有一个拆分节点的拆分函数，即将两个子节点附加到一个节点。出于某种原因，下面的代码将节点本身分配为子节点，这样 id(currentNode.children[0])==id(currentNode)：

```
def split(currentNode):
    if impure(currentNode.data):
        currentNode.attribute = getBestAttr(currentNode.attributes,currentNode.data);
        childrenAttributes = deepcopy(currentNode.attributes);
        childrenAttributes.remove(currentNode.attribute);
        childrenData = splitData(currentNode.data,currentNode.attribute);
        for i in range(2):            
            currentNode.children[i] = node(childrenData[i],childrenAttributes);
            split(currentNode.children[i]); 
```

关键部分可能在哪里：

```
for i in range(2):            
    currentNode.children[i] = node(childrenData[i],childrenAttributes);
    split(currentNode.children[i]); 
```

据我了解，构造函数调用应该返回对新创建的节点对象的引用，该引用与对父节点的引用决不能相同，因为它是一个新对象。

节点对象是：

```
class node:    
    data = None;
    attributes = None;    
    attribute = None;    
    children = [None,None];

    def __init__(self,data,attributes):
        self.data = data;
        self.attributes = attributes; 
```

由于我是 Python 中的 oop 新手，并且总体上对 oop 不是很有经验，所以我希望我在这方面有一些误解，但我不知道如何指定问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:25:31.843

嘿托拜厄斯，我是安佳娜。

问题是否与在节点类声明（或定义或其他任何内容）中将数据、属性、属性和子项定义为类级别属性的事实有关？这意味着当您创建一个新的 Node 对象时，Node.children 的值不会改变，并且对于任何实例化 Node 类的对象，例如 thisnode = Node()，thisnode.children 将与所有其他节点对象相同（ thisnode.children = Node.children)

**如果您希望每个节点对象都不同，那么您必须在init**方法中设置它（如 self.children）。

不知道这是否与它有关......让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:00:01.277

解决方案：Python OOP 与 Java OOP 不同！将类定义更改为：

```
class node:
def __init__(self,data,attributes):
    self.data = data;
    self.attributes = attributes;
    self.children = [None,None];
    self.attribute = None; 
```

# python - How does a python process know when to exit?

> ID：14423826
> 
> 赞同：4
> 
> 时间：2013-01-20T11:04:28.930
> 
> 标签：python

When you execute a python script, does the process/interpreter exit because it reads an EOF character from the script? [i.e. is that the exit signal?]

The follow up to this is how/when a python child process knows to exit, namely, when you start a child process by overriding the run() method, as here:

```
class Example(multiprocessing.Process):
    def __init__(self, task_queue, result_queue):
        multiprocessing.Process.__init__(self)
        self.task_queue = task_queue
        self.result_queue = result_queue

    def run(self):
        while True:
            next_task = self.task_queue.get()
            if next_task is None:
                print '%s: Exiting' % proc_name
                break
#more stuff...[assume there's some task_done stuff, etc]

if __name__ == '__main__':
    tasks = multiprocessing.JoinableQueue()
    results = multiprocessing.Queue()

    processes = [ Example(tasks, results)
                  for i in range(5) ]
    for i in processes:
        i.start()
#more stuff...like populating the queue, etc. 
```

Now, what I'm curious about is: Do the child processes automatically exit upon completion of the run() method? And if I kill the main thread during execution, will the child processes end immediately? Will they end if their run() calls can complete independently of the status of the parent process?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:20:30.590

Yes, each child process terminates automatically after completion of the `run` method, even though I think you should avoid subclassing `Process` and use the `target` argument instead.

Note that in linux the child process may remain in zombie state if you do not read the exit status:

```
>>> from multiprocessing import Process
>>> def target():
...     print("Something")
... 
>>> Process(target=target).start()
>>> Something

>>> 
```

If we look at the processes after this:

![enter image description here](../Images/e7fd69c66e0f8db6e9a76b5f91a8a0bb.png)

While if we read the exit status of the process (with `Process.exitcode`), this does not happen.

Each `Process` instance launches a new process in the background, how and when this subprocess is terminated is OS-dependant. Every OS provides some mean of communication between processes. Child processes are usually **not** terminated if you kill the "parent" process.

For example doing this:

```
>>> from multiprocessing import Process
>>> import time
>>> def target():
...     while True:
...             time.sleep(0.5)
... 
>>> L = [Process(target=target) for i in range(10)]
>>> for p in L: p.start()
... 
```

The main python process will have 10 children:

![enter image description here](../Images/600293001237affc83982c3746c0958d.png)

Now if we kill that process we obtain this:

![enter image description here](../Images/35814151d285645af9b1a40a9b266c0a.png) Note how the child processes where inherited by `init` and are still running.

But, as I said, this is OS specific. On some OSes killing the parent process will kill all child processes.

# algorithm - 无法弄清楚这种重复的复杂性

> ID：14423832
> 
> 赞同：4
> 
> 时间：2013-01-20T11:05:20.783
> 
> 标签：algorithm, recursion, complexity-theory, asymptotic-complexity, master-theorem

我对 Master Theorem 有点耳目一新，我试图找出一种算法的运行时间，该算法`n`通过递归解决 2 个大小子问题`n-1`并在恒定时间内组合解决方案来解决大小问题。
所以公式是：
`T(N) = 2T(N - 1) + O(1)`
但我不确定如何制定主定理的条件。我的意思是在这种情况下
我们没有主定理公式吗？ 如果是的话，因为很明显，因为我在哪里可以理解这一点？假设我到目前为止是对的？`T(N/b)``b``b=N/(N-1)`
`a > b^k``k=0``O(N^z)``z=log2``(N/N-1)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:18:56.270

啊，足够的提示。解决方案其实很简单。z 变换两边，对项进行分组，然后进行 z 逆变换得到解。

首先，将问题视为

```
 x[n] = a x[n-1] + c 
```

对两边应用 z 变换（关于 ROC 有一些技术性问题，但我们暂时忽略它）

```
 X(z) = (a X(z) / z) + (c z / (z-1)) 
```

求解 X(z) 得到

```
 X(z) = c z^2 / [(z - 1) * (z-a)] 
```

现在观察到这个公式可以重写为：

```
 X(z) = r z / (z-1) + s z / (z-a) 
```

其中 r = c/(1-a) 和 s = - ac / (1-a)

此外，观察到

```
 X(z) = P(z) + Q(z) 
```

其中 P(z) = rz / (z-1) = r / (1 - (1/z))，Q(z) = sz / (za) = s / (1 - a (1/z))

应用逆 z 变换得到：

```
 p[n] = r u[n] 
```

和

```
 q[n] = s exp(log(a)n) u[n] 
```

其中 log 表示自然对数，u[n] 是单位（Heaviside）阶跃函数（即，对于 n>=0，u[n]=1，对于 n<0，u[n]=0）。

最后，通过 z 变换的线性：

```
 x[n] = (r + s exp(log(a) n))u[n] 
```

其中 r 和 s 如上定义。

所以重新标记回到你原来的问题，

```
 T(n) = a T(n-1) + c 
```

然后

```
 T(n) = (c/(a-1))(-1+a exp(log(a) n))u[n] 
```

其中exp(x) = e^x，log(x)是x的自然对数，u[n]是单位阶跃函数。

这告诉你什么？

除非我犯了错误，否则 T 会随着 n 呈指数增长。在 a > 1 的合理假设下，这实际上是一个指数增长的函数。指数由 a（更具体地说，a 的自然对数）控制。

另一种简化，注意 exp(log(a) n) = exp(log(a))^n = a^n：

```
 T(n) = (c/(a-1))(-1+a^(n+1))u[n] 
```

所以 O(a^n) 在大 O 表示法中。

**现在这是简单的方法：**

把 T(0) = 1

```
 T(n) = a T(n-1) + c

    T(1) = a * T(0) + c = a + c
    T(2) = a * T(1) + c = a*a + a * c + c
    T(3) = a * T(2) + c = a*a*a + a * a * c + a * c + c
    .... 
```

请注意，这会创建一个模式。具体来说：

```
 T(n) = sum(a^j c^(n-j), j=0,...,n) 
```

把 c = 1 给

```
 T(n) = sum(a^j, j=0,...,n) 
```

这是几何级数，其计算结果为：

```
 T(n) = (1-a^(n+1))/(1-a)
         = (1/(1-a)) - (1/(1-a)) a^n
         = (1/(a-1))(-1 + a^(n+1)) 
```

对于 n>=0。

请注意，此公式与上面给出的 c=1 使用 z 变换方法相同。再次，O(a^n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:01:30.100

甚至不要考虑大师定理。只有当从一般形式 T(n) = aT(n/b) + f(n) 中得到 b > 1 时的 master 定理时，才能使用 Masther 定理。

相反，这样想。您有一个递归调用，它在每次递归调用时将输入的大小 n 减 1。并且在每次递归调用中，成本都是常数 O(1)。输入大小将递减，直到达到 1。然后将用于进行递归调用的所有成本相加。他们有几个人？n. 所以这需要 O(2^n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:44:31.313

看起来你不能用主定理来表述这个问题。

一个好的开始是绘制递归树来理解模式，然后用替换方法证明它。您还可以将公式扩展几次，然后查看它的结果。

另请参阅解决 2 个子问题的问题，而不是`a`： [Time bound for recursive algorithm with constant combination time](https://stackoverflow.com/questions/12306735/time-bound-for-recursive-algorithm-with-constant-combination-time)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T01:14:33.730

也许你可以这样想

什么时候

```
n = 1, T(1) = 1
n = 2, T(2) = 2
n = 3, T(3) = 4
n = 4, T(4) = 8
n = 5, T(5) = 16 
```

不难看出这是一个几何级数`1 + 2+ 4+ 8 + 16...`，其和就是第一项`(ratio^n - 1)/(ratio - 1)`。对于这个系列是

```
1 * (2^n - 1)/(2 - 1) = 2^n - 1. 
```

这里的主导词是`2^n`，因此函数属于`Theta(2^n)`。你可以通过做一个来验证它`lim(n->inf) [2^n / (2^n - 1)] = +ve constant.`

因此函数属于`Big Theta (2^n)`

# ruby-on-rails - Ruby on Rails 教程，不会加载页面/主页

> ID：14423834
> 
> 赞同：0
> 
> 时间：2013-01-20T11:05:36.257
> 
> 标签：ruby-on-rails, ruby

运行后：

```
rails generate controller Pages home contact 
```

并将以下内容添加到我的 Gemfile 中，然后重新运行捆绑安装，我仍然在日志中得到以下内容...

```
ActionView::Template::Error (Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:08:22.540

由于我正在运行乘客，我似乎需要在安装任何捆绑包后重新启动 Apache :)

谢谢！

# jquery - 当我完成我的 onclick 显示 div 时隐藏按钮

> ID：14423837
> 
> 赞同：2
> 
> 时间：2013-01-20T11:05:57.380
> 
> 标签：jquery, onclick, hide

我是 jquery 的绝对初学者。我正在使用谷歌学习，但我不知道如何解决这个问题。

我用一个按钮连续显示 div，但是当没有更多 div 可以显示时，我想隐藏显示按钮。

这是代码：

```
$('#show').on('click', function() {
    if (index + 1 > max) {
        // Here, I suppose, I need to hide the button
    } else {
        if (index < max - 1) {
            index++;
            $('.container > div:eq(' + index + ')').show();
        } 
```

在这里你可以看到这个例子

[http://jsfiddle.net/vcARq/](http://jsfiddle.net/vcARq/)

在此先感谢并对我的英语感到抱歉；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:12:03.187

基本上你需要在完整运行这样的功能时执行此操作

```
var index = -1;
var max = $('.container > div').length;
$('#show').on('click', function() {
        if (index < max - 1) {
            index++;
            $('.container > div:eq(' + index + ')').show();
        }
}, function () {
$(this).hide();
}); 
```

那应该对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:09:59.957

您可以通过检查每次单击按钮时是否显示最后一个 div 来做到这一点。因此，如果显示最后一个 div，它会隐藏按钮。这是代码：

```
 var index = -1;
var max = $('.container > div').length;
$('#show').on('click', function() {
    if (index + 1 > max) {
        // Do Nothing
    } else {
        if (index < max - 1) {
            index++;
            $('.container > div:eq(' + index + ')').show();
        }

    }
    if ($('div.hidden:last').css('display') != 'none'){
     $('#show').hide()   ;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:12:22.217

迭代索引后，检查`2`回调函数内部的减值`.show()`。这将导致预期的行为。原因`-2`是您的偏移量开始于`-1`而不是`0`.

```
var index = -1
var max = $('.container > div').length;
$('#show').on('click', function () {
    var $this = $(this);
    if (index < max) {
        index++;
        $('.container > div:eq(' + index + ')').show(0, function () {
            if (index > max - 2) {
                $this.hide();
            }
        });
    }
}); 
```

[小提琴。](http://jsfiddle.net/2svT9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T11:24:28.390

如果您是 jquery 的新手，我真的很感谢您的工作、勇敢和不错的尝试，您的代码几乎接近您想要的：

[这是JSFiddle](http://jsfiddle.net/vcARq/9/)

你需要这个代码：

```
var index = 0;
var max = $('.container > div').length;
$('#show').on('click', function() {
        if (index < max ) {

       $('.container > div:eq(' + index+')').show();
                index++;
             if (index >= max ) 
                 $(this).hide();
        }   
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T11:18:06.800

我遇到你的情况（点击最大次数）只需调用 .hide()。这是我的简单建议：

```
var index = -1;
var max = $('.container > div').length;
$('#show').on('click', function() {
    if (--max<=0) {          //condition
        $('#show').hide();   //hide button
    } 
    index++;
    $('.container > div:eq(' + index + ')').show();
}); 
```

[http://jsfiddle.net/vcARq/8/](http://jsfiddle.net/vcARq/8/)

# javascript - 从 div 获取 rel

> ID：14423841
> 
> 赞同：1
> 
> 时间：2013-01-20T11:06:49.833
> 
> 标签：javascript, jquery, html

这里给出下面的HTML

```
 <div class="navBulletsWrapper">
<div rel="0" class=""></div>
<div rel="1" class=""></div>
<div rel="2" class=""></div>
<div rel="3" class=""></div>
<div rel="4" class="active"></div>
<div rel="5" class=""></div>
<div rel="6" class=""></div>
<div rel="7" class=""></div>
</div> 
```

我想获得具有**类活动的 div 的 rel 值**

试过了

```
$('.navBulletsWrapper .active')[0].attr('rel') 
```

但失败，因为 div 没有 attr

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T11:07:56.783

`$('.navBulletsWrapper .active')[0]`会给你一个**DOM**对象，而不是一个 jquery 对象；因此，它不会像`attr`附加任何 jquery 函数。

```
$('.navBulletsWrapper .active').eq(0).attr('rel') 
```

应该管用。

如果您一次只有一个`.active`div，则不必使用`eq(0)`

```
$('.navBulletsWrapper .active').attr('rel') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:14:45.740

## [http://jsfiddle.net/4dTAG/](http://jsfiddle.net/4dTAG/)

仅使用 javascript 的方法如下：

```
var divs = document.getElementsByClassName("navBulletsWrapper")[0].getElementsByTagName("div");
for (i = 0; i < divs.length; i++) {
    if(divs[i].className=="active"){
        var rel = divs[i].attributes.rel.value;
        alert(rel);
        break;
    }
} 
```

使用您尝试过的方法的 jquery 方法 [http://jsfiddle.net/4dTAG/1/](http://jsfiddle.net/4dTAG/1/)

```
var rel = $('.navBulletsWrapper .active')[0].attributes.rel.value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T11:08:57.453

你不需要 [0] 因为只有一个 .active

```
$('.navBulletsWrapper .active').attr('rel'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T11:10:53.110

```
$('.navBulletsWrapper .active')[0] 
```

是一个html元素。

```
$('.navBulletsWrapper .active').eq(0) 
```

是一个具有该`attr()`功能的 jQuery 元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-03T09:40:24.767

本国的： `document.querySelector('.navBulletsWrapper .active').getAttribute('rel');`

jQuery： `$('.navBulletsWrapper .active').attr('rel');`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-09T08:02:12.447

`rel`根据文档，属性不能与 div 一起使用

[https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel)

最好使用`data-id="1"`类型属性

# ruby - div popup watir web-driver中的访问按钮

> ID：14423843
> 
> 赞同：1
> 
> 时间：2013-01-20T11:07:08.007
> 
> 标签：ruby, webdriver, watir

我正在尝试使用 watir web-driver 在弹出对话框中检索、修改和重新插入一些文本。一切都在顺利进行，直到我试图找到一种方法来单击此处所示的“保存图书信息”按钮：http: [//i.stack.imgur.com/pGdln.png](http://i.stack.imgur.com/pGdln.png)

但是我找不到按钮。要访问弹出框，我将所有具有正确名称的链接收集到一个数组中：

```
 @browser.imgs.each do |img| #The links are imgs
        if img.title.include?('Edit/Delete Book')
            @books << img
        end
    end 
```

从那里我可以访问链接`@books[index].click`。我可以通过以下方式访问和编辑 text_fields：

```
url = @browser.text_field(:name=>'url').value
... do stuff with url ..
@browser.text_field(:name=>'url').set url 
```

但是当我尝试找到“关闭”按钮时，我只得到主页上的按钮。经过多次头疼后，我设法找到了我想要使用的窗口的标题`@browser.div(:class=>'dijitDialogTitleBar').title`，它返回`"Edit Book"`。成功！不，我仍然不知道如何访问该弹出窗口上的按钮！

如果有人可以帮助我，我将不胜感激。这是我第一次使用 Watir，所以这可能是一个简单的答案......

如果需要更多信息，我很乐意提供。提前致谢。

**编辑** 这是按钮的html：

```
<span id="dijit_form_Button_2_label" 
class="dijitReset dijitInline dijitButtonText" 
dojoattachpoint="containerNode">Save Book Info</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:52:41.107

看起来您有一个跨度标签，其样式看起来像一个按钮。您需要访问它是一个跨度而不是一个按钮。

尝试：

```
@browser.span(:text => 'Save Book Info').click 
```

# html - HTML5 FileSystem API 列出目录中的文件 简单示例

> ID：14423844
> 
> 赞同：0
> 
> 时间：2013-01-20T11:07:09.190
> 
> 标签：html, api, filesystems, directory

谁能为我提供一个非常基本的示例，说明如何使用 HTML5 FileSystem API 列出位于本地目录中的文件？我希望能够使用“文件”类型的 HTML 输入元素来选择列出哪个目录的内容。我尝试使用下面链接中的示例，但它不起作用（屏幕为空白且未列出任何内容）。

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T16:41:54.200

只需为您的输入标签添加一些属性！

前任：

```
< input type="file" id="files" name="files[]" multiple webkitdirectory="" directory=""/ > 
```

然后就可以看到这个文件夹里面有什么内容了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:44:43.770

这个问题 - [Get metadata of local mp3 file using html5 filesystem api](https://stackoverflow.com/questions/14425007/get-metadata-of-local-mp3-file-using-html5-filesystem-api) - 有一个简单的例子，列出了指定目录中的所有文件。HTML5 Rocks 示例似乎只匹配/输出特定文件类型，这可能是您看到空结果的原因

# matlab - MATLAB：从安装了 64 位 MATLAB 的 64 位 Windows 编译 32 位共享库

> ID：14423846
> 
> 赞同：2
> 
> 时间：2013-01-20T11:07:12.483
> 
> 标签：matlab

我想在**64-Bit Matlab中编译一个****c++ 共享库**。但我需要**32 位**版本的库，因为我有 32 位视觉工作室！我怎样才能做到这一点？ 是否可以强制以 32 位模式编译库？ ****`deploytool`****

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:20:03.040

我相信您需要拥有 32 位版本的 MATLAB 才能创建 32 位库。您可以在 64 位操作系统上安装 32 位 MATLAB。如果您使用 MATLAB 许可证进行维护，您应该可以从 MathWorks 下载 32 位版本。****

# windows-phone-7 - Windows Phone MVVM：按钮命令可以执行和命令参数

> ID：14423847
> 
> 赞同：5
> 
> 时间：2013-01-20T11:07:24.183
> 
> 标签：windows-phone-7, mvvm, windows-phone-8, windows-phone

我想将 MVVM 模式实现到这样的注册页面：

该页面有用于用户名、电子邮件和密码的文本框。

我想使用**ICommand**和**DelegateCommand**模式将注册按钮绑定到命令。

问题是如果文本框为空，我希望按钮被禁用，如果它们有文本则启用。

我的**模型**是：

```
public class User
    {
        public string UserName { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
    } 
```

我的**视图模型**：

```
public class UserViewModel:INotifyPropertyChanged
    {
        private User user;
        public UserViewModel()
        {
            user = new User();
        }
#region Properties
.
.
.
#endregion
public ICommand RegisterCommand
        {
            get
            {
                return new DelegateCommand(Register,CanRegister);
            }
        }

        private void Register(object parameter)
        {
            //TODO call the web service
        }

        private bool CanRegister(object parameter)
        {
            return (!string.IsNullOrEmpty(UserName) && !string.IsNullOrEmpty(Password));
        }
} 
```

我的**DelegateCommand**实现：

```
public class DelegateCommand:ICommand
    {
        //Delegate to the action that the command executes
        private Action<object> _executeAction;
        //Delegate to the function that check if the command can be executed or not
        private Func<object, bool> _canExecute;

        public bool canExecuteCache;

        public DelegateCommand(Action<object> executeAction):this(executeAction,null)
        {

        }

        public DelegateCommand(Action<object> action, Func<object, bool> canExecute)
        {
            this._executeAction = action;
            this._canExecute = canExecute;
        }

        //interface method, called when CanExecuteChanged event handler is fired
        public bool CanExecute(object parameter)
        {
            //true by default (in case _canExecute is null)
            bool result = true;
            Func<object, bool> canExecuteHandler = this._canExecute;
            if (canExecuteHandler != null)
            {
                result = canExecuteHandler(parameter);
            }

            return result;
        }

        //Event handler that the controld subscribe to 
        public event EventHandler CanExecuteChanged;

        //interface method
        public void Execute(object parameter)
        {
            _executeAction(parameter);
        }

        //rause the CanExecuteChanged event handler manually
        public void RaiseCanExecuteChanged()
        {
            EventHandler handler = this.CanExecuteChanged;
            if (handler != null)
            {
                handler(this, EventArgs.Empty);
            }

        }

    } 
```

和我的**观点**：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <TextBlock Grid.Row="0" Text="Username:"/>
            <TextBox Grid.Row="1" Name="txtUserName" Text="{Binding UserName, Mode=TwoWay}" HorizontalAlignment="Stretch"/>
            <TextBlock Grid.Row="2" Text="Password:" HorizontalAlignment="Stretch" />
            <TextBox Grid.Row="3" Name="txtPassword" Text="{Binding Password, Mode=TwoWay}"/>
            <Button Grid.Row="4" Content="Register" Command="{Binding RegisterCommand }"   />
        </Grid> 
```

我想要实现的是禁用按钮，直到用户在每个**TextBox中输入信息**

如何才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T23:49:58.557

首先是一件事：`DelegateCommand`每次访问属性时都返回一个新的，这将限制您调用该`RaiseCanExecuteChanged()`方法的能力，因为您不会引用绑定的相同命令。

因此，将您的 ViewModel 更改为如下所示：

```
public class UserViewModel : INotifyPropertyChanged
{
   private User user;
   public UserViewModel()
   {
      user = new User();
      RegisterCommand = new DelegateCommand(Register,CanRegister);
   }

   public DelegateCommand RegisterCommand {get; private set;}

   private void Register(object parameter)
   {
      //TODO call the web service
   }

   private bool CanRegister(object parameter)
   {
      return (!string.IsNullOrEmpty(UserName) && 
              !string.IsNullOrEmpty(Password));
   }
} 
```

您可以在没有 PropertyChanged 调用的情况下拥有该`RegisterCommand`属性的原因`private set`，因为它将在绑定发生之前被实例化并且不需要更改。

假设属性`UserName`和`Password`触发`PropertyChanged`事件的形式，您可以在它们更改时调用该`RaiseCanExecuteChanged()`方法。`RegisterCommand`

例如。

```
private string _userName;
public string UserName
{
    get { return _userName; }
    set
    {
        if(_userName == value)
            return;

        _userName = value;
        RaisePropertyChanged("UserName");

        RegisterCommand.RaiseCanExecuteChanged();
    }
} 
```

这将强制 CanExecute 方法重新评估。

# c - 在 Open CV 中使用 HSV 值检测眼睛

> ID：14423854
> 
> 赞同：1
> 
> 时间：2013-01-20T11:08:40.187
> 
> 标签：c, opencv, eye-detection

我想检测一只眼睛，我有一些代码可以检测蓝色物体，所以如果我做出改变（我怎么能？）那么我就有可能检测到一只眼睛。由于下面的颜色有自己特定的范围值，所以如果我指定眼睛颜色 HSV 值，那么我可以用这种方法检测 EYE。

在下面的代码中，我将检测蓝色对象，请告诉我我在代码中做了哪些更改，以便我可以使用 Open CV 获得 EYE。

```
 IplImage* GetThresholdedImage(IplImage* img)
    {
    // Convert the image into an HSV image
    IplImage* imgHSV = cvCreateImage(cvGetSize(img), 8, 3);
    cvCvtColor(img, imgHSV, CV_BGR2HSV);

    IplImage* imgThreshed = cvCreateImage(cvGetSize(img), 8, 1);
      //For detecting BLUE color i have this HSV value, 
     cvInRangeS(imgHSV, cvScalar(112, 100, 100), cvScalar(124, 255, 255), imgThreshed);//this will not recognize the yellow color
     cvReleaseImage(&imgHSV);
      return imgThreshed;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:23:08.160

这种简单的方法可以使用一些阈值提取蓝色对象，但即使它可以使用不同的黑色进行调整？蓝色的？绿色？每个人都有不同的眼睛颜色。我没有看到一种非 hacky 方法适用于您使用这种基于 HSV 阈值的 blob 提取。这种方法适用于相同颜色的大块，即去除蓝色背景。

多看形状，每个人都有不同颜色的眼睛，但形状是圆形/椭圆形。用于检测圆的[Hough 变换](http://en.wikipedia.org/wiki/Hough_transform)有多种变体。

> ...霍夫变换已扩展到识别任意形状的位置，最常见的是圆形或椭圆形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:29:53.247

使用 Haar 分类器更容易​​进行眼睛检测。 [链接在这里](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html)

# c# - Visual Studio 编码的 ui 测试是否支持 dll 注入？

> ID：14423855
> 
> 赞同：0
> 
> 时间：2013-01-20T11:08:44.707
> 
> 标签：c#, coded-ui-tests, dll-injection

各种 ui 测试自动化框架似乎使用某种形式的 dll 注入，以允许测试代码检查（甚至修改）被测应用程序的属性，否则这些属性将不可见。这可以帮助测试与更复杂的非标准 UI 控件进行交互。

这受 Visual Studio 编码的 ui 测试支持吗？

# php - Codeigniter 路由问题在 url 中显示两个类名

> ID：14423858
> 
> 赞同：-1
> 
> 时间：2013-01-20T11:09:06.150
> 
> 标签：php, codeigniter

是否可以在 url 中显示两个类名？例如我有两个类：类别和画廊。

我想在 url 中显示为 ... `category/gallery/2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:24:48.700

嗯.. 据我所知，你不能有 2 个这样的课程。但是你可以做的是有一个名为“Category”的类，里面有一个名为“Gallery”的函数。在其中，您可以使用 uri 段获得值 2。

我附上了以下代码以供参考。

```
class category extends Controller {

    //php 5 constructor
    function __construct() {
        parent::Controller();
    }

    //php 4 constructor
    function category() {
        parent::Controller();
    }

    function gallery() {
        $galleryId = $this->uri->segment(3);
        if($galleryId==2){
            //<statements>
        }
    } 
```

}

category/gallery/2 将带您到 .

谢谢

# xml - 如何验证 xml 的语法/格式是否正确（？）

> ID：14423861
> 
> 赞同：2
> 
> 时间：2013-01-20T11:09:17.740
> 
> 标签：xml, powershell, powershell-3.0

假设我想在我的自定义工具箱模块中创建一个函数，该函数使用一些自定义 xml 文件来提供指令（使用`$xmlpath`参数传递）。如何确保输入使用正确的 xml 类型/语法/格式（正确的元素、根节点等）？我读过关于模式（xsd）和命名空间（不明白这一点）。

如果我使用模式文件：如何使用 ex.xml 验证 xml。测试 XML（PSCX cmdlet）？我是否在线存储 xsd 文件并在 xml 文档中指定它的路径？我是否将其存储在我的模块文件夹中并将其硬编码到脚本中？如果是这样，我如何指定模式路径？代码示例：

```
#Stored in ..\Modules\MyModule\Process-Config.psm1)
function Process-Config
{
    param($xmlpath)
    #Test that file is xml
    try{ $xml = [xml](Get-Content $xmlpath) } catch {}

    #Test that xml-file is valid against schema in Module-folder (Modules\MyModule\xmlschema.xsd)
    #Using Test-XML PSCX cmdlet
    Test-XML -Path $xmlpath -SchemaPath #Schemapath#

} 
```

编辑：我发现 $PSScriptRoot 提供了模块位置，所以我可以使用 $PSScriptRoot\Schemas\MySchema.xsd 作为路径。我认为它只适用于脚本，但似乎功能也适用。:-) 不过，我是否在 xml 中为这样的本地文件指定架构？如果是这样，我该如何指定这个本地路径，或者我应该也在线发布 xsd，以将其作为 xml 文件中的模式地址？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-07T13:51:53.393

如果您想要对 XML 文件进行基本测试（不验证 XML Schemata 或对外部模块的依赖），您可以使用[来自 Jonathan Medd 的函数 Test-XMLFile](http://www.jonathanmedd.net/2012/05/quick-and-easy-powershell-test-xmlfile.html)：

```
function Test-XMLFile {
    <#
        .SYNOPSIS
        Test the validity of an XML file
    #>
    [CmdletBinding()]
    param (
        [parameter(mandatory=$true)][ValidateNotNullorEmpty()][string]$xmlFilePath
    )

    # Check the file exists
    if (!(Test-Path -Path $xmlFilePath)){
        throw "$xmlFilePath is not valid. Please provide a valid path to the .xml fileh"
    }
    # Check for Load or Parse errors when loading the XML file
    $xml = New-Object System.Xml.XmlDocument
    try {
        $xml.Load((Get-ChildItem -Path $xmlFilePath).FullName)
        return $true
    }
    catch [System.Xml.XmlException] {
        Write-Verbose "$xmlFilePath : $($_.toString())"
        return $false
    }
} 
```

如果你想检查很多 XML 文件，你可以使用类似的东西

```
gci -recurse *.xml |% {
 $outcome = Test-XMLFile $_.FullName -Verbose
} 
```

它会告诉你哪个 XML 文件有什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:49:21.177

这未经测试，但基于我编写的一个实用程序，用于检查 XML 与它声明使用的模式。它的核心是创建一个[`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)配置为执行基于 XSD 的验证并允许加载引用的模式。

```
$readerSettings = New-Object 'System.Xml.XmlReaderSettings';
$readerSettings.ValidationFlags = [System.Xml.Schema.XmlSchemaValidationFlags]::ProcessInlineSchema -bor
                                  [System.Xml.Schema.XmlSchemaValidationFlags]::ProcessSchemaLocation -bor
                                  [System.Xml.Schema.XmlSchemaValidationFlags]::ReportValidationWarnings -bor
                                  [System.Xml.Schema.XmlSchemaValidationFlags]::ProcessIdentityConstraints;
$readerSettings.ValidationType = [System.Xml.ValidationType]::Schema;

$results = @()

$valHandler = [System.Xml.Schema.ValidationEventHandler]{
  # $_ is the second argument of type System.Xml.ValidationEventArgs
  $script:results += "{0}: {1}" -f $_.Severity, $_.Message;
}

$readerSettings.add_ValidationEventHandler($valHandler)

$reader = [System.Xml.XmlReader]::Create($xmlFileName, $readerSettings);

while ($reader.Read()) {
  # Do nothing...
}

$results;  # Return the array of validation errors and warnings. 
```

笔记：

*   在创建阅读器和处理 XML 时都会引发许多异常（例如，无效的 XML、找不到引用的模式）。
*   可用的控件比此处显示的要多得多，通过文档[`XmlReaderSettings`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.aspx)和[`ValidationEventArgs`](http://msdn.microsoft.com/en-us/library/system.xml.schema.validationeventargs.aspx)（开始）将是有益的。
*   为文件指定架构 (XSD) 的常用方法是使用包含 {namespace, XSD-schmea} 对列表的[`schemaLocation`](http://msdn.microsoft.com/en-us/library/ms256100.aspx)属性（来自命名空间）。`http://www.w3.org/2001/XMLSchema-instance`但是[`XmlReaderSettings.Schemas`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.schemas.aspx)也可以用于指定文档之外的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T03:01:53.657

指定 XSD 文件的文件路径，最好通过相对路径指定，除非 XSD 存储在您计划运行脚本的每台 PC 上的众所周知的路径中。对于相对路径，是的，使用 $PSScriptRoot 例如

```
$xsd = $PSScriptRoot\schema.xsd
Test-Xml -XmlPath $xmlPath -SchemaPath $xsd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T13:03:03.567

我不太确定您是要检查 XML 有效性作为程序的功能还是服务。

首先，在 XML 中有很多东西要学，我找到了一个我正在研究的资源：[周末学习 XML](http://asaha.com/ebook/jMjgwNTI-/Learn-XML-in-a-Weekend.pdf)。您可能会发现这很有帮助。您不必一口气了解其中的所有内容。

这是一个[在线服务](http://www.xmlvalidation.com/index.php)，它将检查 XML 文档的有效性。

如果您希望程序能够做到这一点，我认为您需要某种 xml lint，可能类似于：[xmlint](http://www.xmlsoft.org/xmllint.html)。

最后，如果您想编写一个使用类似于 API 的 xml lint 的程序，那么您应该指定您使用的编程语言。希望这会有帮助。干杯！

# c# - 时区不起作用视觉工作室

> ID：14423865
> 
> 赞同：-2
> 
> 时间：2013-01-20T11:10:00.657
> 
> 标签：c#, winforms, timezone

如标题。我想在我的计时器中添加一个时区。我试试这个：

```
int G = DateTime.Now.Kind; 
```

但它抛出一个错误。我如何在 winforms 中检查时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:26:43.593

您的代码不起作用，因为`DateTime.Now.Kind`返回 a`DateTimeKind`这是一个枚举，您必须将其显式转换为`int`：

```
int G = (int)DateTime.Now.Kind; 
```

或者：

```
DateTimeKind G = DateTime.Now.Kind; 
```

但正如其他人所说，它不会返回时区。你应该使用：

```
TimeZone timeZone = TimeZone.CurrentTimeZone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:17:46.363

实际上，`DateTime`不包含实时时区信息。

尝试使用[`TimeZone.CurrentTimeZone`](http://msdn.microsoft.com/en-us/library/system.timezone.currenttimezone.aspx)属性而不是。

> 获取当前计算机的时区。

这是一个[`DEMO`](http://ideone.com/tjsdw0).

另外，如果您真的对 .NET Framework 中的时区感兴趣，那么您真的应该阅读[`Coding Best Practices Using DateTime in the .NET Framework`](http://msdn.microsoft.com/en-us/library/ms973825.aspx)我认为哪篇文章很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:18:07.527

`DateTime.Kind`与时区无关。它是显示日期类型的枚举：`Local, UTC,Uncpecified`。

# python - 如何在 Python 中显示对象的属性？

> ID：14423868
> 
> 赞同：0
> 
> 时间：2013-01-20T11:10:19.690
> 
> 标签：python

有什么方法可以让我知道对象属性的值吗？例如，
`info = urllib2.urlopen('http://www.python.org/')`
我想知道 info 的所有属性值。也许我不知道信息的属性是什么。而 str() 或 list() 不能给我答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T11:26:30.447

要获取对象属性的所有名称，请使用`dir(obj)`. 要获取它们的值，请使用`getattr(obj, attr_name)`. 您可以像这样打印所有属性及其值：

```
for attr in dir(obj):
    print(attr, getattr(obj, attr)) 
```

如果您不需要内置属性，例如`__str__`etc，您可以简单地使用`obj.__dict__`，它返回对象属性及其值的字典。

```
for k in obj.__dict__:
    print(k, obj.__dict__[k]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:11:43.893

您可以使用`vars(info)`或`info.__dict__`。它将对象的命名空间作为attribute_name:value 格式的字典返回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T11:16:46.537

您可以使用 Python 的[dir()](http://docs.python.org/2/library/functions.html#dir)。dir(info) 将返回对象信息的所有有效属性。

```
info = urllib2.urlopen('http://www.python.org/')
print dir(info) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T11:16:39.320

您可以使用`dir()`：

```
dir(info) 
```

[目录（）人](http://docs.python.org/2/library/functions.html#dir)：

> 使用参数，尝试返回该对象的有效属性列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T11:48:28.373

所有使用 dir() 或查看**dict**的方法基本上都是不行的。

更好的检查

```
obj.__class__ 
```

和

```
obj.__class__.__bases__ 
```

为了了解对象到底是什么。

然后你应该检查模块的官方 API 文档。

方法和数据可能是私有的，一般不供公众使用，除非文档另有说明。

# android - 无法在设备上安装 .apk

> ID：14423869
> 
> 赞同：-2
> 
> 时间：2013-01-20T11:10:29.810
> 
> 标签：.apk, android, installation, apk

很长一段时间我都在我的设备上安装[.apk](/questions/tagged/.apk "显示标记为“.apk”的问题")没有问题！我尝试安装的每个应用程序的最后几天都会出现下一个问题！在控制台中，我看到消息正在安装 myapp.apk 3 分钟，之后我收到以下消息：

```
Failed to install myapp.apk on device 'My device' 
(null) 
Launch canceled! 
```

任何解决方案或可能的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:16:01.323

这似乎在使用 adb 时有时会发生。

adb 应该有一个超时时间来做出反应。如果您使用 AVD 图像执行此操作，只需重新启动它。如果您使用设备执行此操作，只需尝试重新启动它（重新启动，而不仅仅是将其关闭然后再次打开 - 由于较新的 Android 版本中的快速启动，这不会正确关闭所有应用程序）。每次遇到此问题时，我都可以正常工作。

# facebook - Facebook FQL 返回无效计数

> ID：14423879
> 
> 赞同：0
> 
> 时间：2013-01-20T11:11:37.930
> 
> 标签：facebook, facebook-fql

我正在使用 FQL 在我的页面上查找共享计数，如下所示：

[https://api.facebook.com/method/fql.query?format=json&query=SELECT%20url%2C%20normalized_url%2C%20share_count%2C%20like_count%2C%20comment_count%2C%20total_count%2C%20commentsbox_count%2C% 20click_count%20FROM%20link_stat%20WHERE%20url%20%3D%20](https://api.facebook.com/method/fql.query?format=json&query=SELECT%20url%2C%20normalized_url%2C%20share_count%2C%20like_count%2C%20comment_count%2C%20total_count%2C%20commentsbox_count%2C%20click_count%20FROM%20link_stat%20WHERE%20url%20%3D%20) 'http%3A%2F%2Fgoout.cz%2Fcs%2Fkoncerty%2Fpraha%2Fcharlie-slavik-band%2Frbvi%2F'

这个 URL 有我的内部统计数据被查看了几次，然而，它已被分享和评论超过 50 倍。

我的许多 URL 都发生了这种情况，我不知道出了什么问题。

你认为这些数字是真实的吗？他们代表什么？

# python - 登录后 Django Python 重定向

> ID：14423881
> 
> 赞同：0
> 
> 时间：2013-01-20T11:11:51.550
> 
> 标签：python, html, django, redirect, login

我知道这个问题已经以另一种方式得到了回答，但我仍然不知道如何在用户登录后重定向。我知道 Django 带有内置网站，但我需要一个自定义登录表单，看起来像这样（这是 HTML）：

```
{% if user.is_authenticated %}
    <!-- Authenticate account menu -->
{% else %}
    <h3>Login</h3>
    <form action="/app/login/" method="post" accept-charset="utf-8">
        <label for="username">Username</label>
        <input type="text" name="username" value="" id="username" />
        <label for="password">Password</label>
        <input type="password" name="password" value="" id="password" />
        <p><input type="submit" value="Login →"></p>
    </form>
{% endif %} 
```

我的 views.py 看起来像这样：

```
from django.http import HttpResponse
from django.shortcuts import render_to_response
from django.template import Context, loader
from django.contrib.auth import authenticate, login
from django.views.generic.simple import *

def index(request):
if request.method == 'POST':
        user = authenticate(username=request.POST['username'],                    password=request.POST['password'])
        if user is not None:
            if user.is_active:
                login(request, user)
                # success
            if request.POST['next']:
                return HttpResponseRedirect(request.POST['next'])
            else:
                return HttpResponseRedirect('/')
        else:
            # disabled account
            return direct_to_template(request, 'inactive_account.html')
    else:
        # invalid login
        return render_to_response("app/index.html")
return render_to_response("app/index.html") 
```

我并没有完全自己编写代码。我发现重定向发生在 html 文件中的某个位置：`<form action="/app/login/`. 但是 django 说它找不到网址。总而言之，我不得不说我是网络编程+django+python 的新手，并且对这个概念并不完全清楚。感谢帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:23:21.623

在`login(request, user)`您需要返回一些 http 响应之后，例如它是从 ome 模板呈现的页面。但是如果你想去其他页面，你可以返回`HttpResponseRedirect('/needed_url')`，你会得到一个指向 url 的请求。

您也可以`request.POST['referrer'])`根据需要指向上一页的 url。

[Django 文档 - HttpResponseRedirect](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect)

PS 另外我可以说点什么`<form action="/some/url/" ...`地址你会去管理你的表格数据。如果使用 Django，您的`urls.py`文件中应该有一条记录，例如`(r'^some/url/$', some_function)`，它将使用指定的函数处理您的请求。

# html - MVC 4 Razor 添加输入类型日期

> ID：14423888
> 
> 赞同：35
> 
> 时间：2013-01-20T11:12:15.297
> 
> 标签：html, razor, asp.net-mvc-4

我想知道如何插入`<input type="date"/>`我模型的日期时间属性。至于现在 Razor 使用`type="datetime"`. 我想利用 HTML5 的新输入类型。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-09-09T09:07:21.807

输入日期值格式需要按照[https://www.rfc-editor.org/rfc/rfc3339#section-5.6](https://www.rfc-editor.org/rfc/rfc3339#section-5.6) full-date 指定的日期。

所以我最终做了：

```
<input type="date" id="last-start-date" value="@string.Format("{0:yyyy-MM-dd}", Model.LastStartDate)" /> 
```

我确实尝试使用以下方法“正确”地进行操作：

```
[DataType(DataType.Date)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:yyyy-MM-dd}")]
public DateTime LastStartDate
{
    get { return lastStartDate; }
    set { lastStartDate = value; }
} 
```

和

```
@Html.TextBoxFor(model => model.LastStartDate, 
    new { type = "date" }) 
```

不幸的是，这似乎总是将输入的 value 属性设置为标准日期时间，所以我最终像上面一样直接应用了格式。

**编辑：**

根据 Jorn 的说法，如果你使用

```
@Html.EditorFor(model => model.LastStartDate) 
```

而不是 TextBoxFor 一切正常。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-21T15:17:06.877

我设法通过使用以下代码来做到这一点。

```
@Html.TextBoxFor(model => model.EndTime, new { type = "time" }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-04T08:55:05.863

```
 @Html.TextBoxFor(m => m.EntryDate, new{ type = "date" })

 or type = "time"

 it will display a calendar
 it will not work if you give @Html.EditorFor() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-04T09:56:19.070

如果您想使用 @Html.EditorFor() 您必须使用 jQuery ui 并使用 NuGet 包管理器将您的 Asp.net Mvc 更新到 5.2.6.0。

```
@Html.EditorFor(m => m.EntryDate, new { htmlAttributes = new { @class = "datepicker" } }) 
```

@section 脚本 {

```
@Scripts.Render("~/bundles/jqueryval") 
```

```
<script>

    $(document).ready(function(){

      $('.datepicker').datepicker();

     });

</script> 
```

}

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-04-14T09:29:47.420

您将通过标签 type="date" 获得它......然后它将呈现美丽的日历和所有......

```
@Html.TextBoxFor(model => model.EndTime, new { type = "date" }) 
```

# android - Android 与 Google App Engine Blobstore 服务的交互

> ID：14423890
> 
> 赞同：3
> 
> 时间：2013-01-20T11:12:18.393
> 
> 标签：android, google-app-engine, blobstore

我目前已经设置了我的 Android 应用程序的客户端（在 Android 上工作了几个月）。客户端的功能是允许用户单击照片并将一些文本信息附加到照片上。一旦用户点击了照片并添加了文本信息，他/她点击“完成”。

此信息需要发送到服务器。对于我的项目，使用 Google App Engine 是先决条件。因此，据我所知，存储图像的最佳方法是使用 Blobstore Service api。[https://developers.google.com/appengine/docs/java/blobstore/overview](https://developers.google.com/appengine/docs/java/blobstore/overview)

由于我是使用 Google App Engine 的新手，所以我对 Android 设备和 Blobstore 服务之间的交互不太了解。

我现在了解如何将 Blobstore 服务用于 Web 应用程序（Google App Engine 上的教程[http://www.rominirani.com/2009/12/18/episode-13-using-the-blobstore-java-api /](http://www.rominirani.com/2009/12/18/episode-13-using-the-blobstore-java-api/) ) 但我不明白它对于 Android 应用程序有什么不同。在将 Blobstore Api Service 与 Android 结合使用之间，我找不到太多文档。所以我想知道我在使用 Blobstore 服务从 Android 设备上传图像时做出的正确决定是否正确。有没有其他建议/更好的方法。

任何帮助将不胜感激，因为我的项目在过去几天一直处于停滞状态。非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T16:23:16.540

两步：

1.  在服务器端创建处理HTTP POST 请求的[blob 上传处理程序。](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)`multipart/form-data`

2.  在 Android 上创建一个[多部分 HTTP POST 请求](https://stackoverflow.com/questions/7632737/android-send-a-image-and-save-url/7632849#7632849)。

# c# - 许多缓存 或许多适配器

> ID：14423894
> 
> 赞同：0
> 
> 时间：2013-01-20T11:12:46.013
> 
> 标签：c#, asp.net, caching, enterprise-library

我有一个架构问题：

在我的应用程序中，我们有 4 个数据模型。

我们希望将它们中的每一个都保存在缓存中。

问题是哪种方式更好：

一个。创建许多`ICache<T>` with`set<T>`和`get<T>`

湾。创建许多 `ICacheAdaptor<T>`. 适配器负责强制转换`object to different types` ，并且只有一个缓存`object set`与`get(object)`

我想我不需要`web.config`为每个缓存设置不同的设置。

你有什么建议？

# python - 读取输入反斜杠

> ID：14423896
> 
> 赞同：0
> 
> 时间：2013-01-20T11:12:59.067
> 
> 标签：python, backslash

`binary = "\000\021\"\252\273\314"`. 这是我的输入，我的函数接受这个输入并像这样打印出来：

```
def do_print(string):
    print string

do_print(binary) 
```

但是这个函数会打印出乱码。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:22:11.703

也许你正在寻找`repr`字符串？

```
def do_print(string):
    print(repr(string))

binary = "\000\021\"\252\273\314"
do_print(binary) 
```

产量

```
'\x00\x11"\xaa\xbb\xcc' 
```

# primefaces - ace:chart piechart 如何在图表中添加标题

> ID：14423901
> 
> 赞同：1
> 
> 时间：2013-01-20T11:14:19.657
> 
> 标签：primefaces, jqplot, icefaces-3

我正在使用icefaces 3.2。我想知道如何为 ace:chart piechart 添加标题，并且该标题应显示在图表区域内。

# c# - 在项目中运行非默认 XAML 窗口的最快和最简单的方法是什么

> ID：14423906
> 
> 赞同：0
> 
> 时间：2013-01-20T11:14:55.430
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我已将一个项目添加到我的 VS10 主项目解决方案中。

这个新项目包含一个测试窗口，但我无法运行它，因为主项目默认具有不同的 xaml 窗口。

是否有一种简单的方法来运行特定的 XAML 窗口，而不需要将其作为单元测试或更改项目属性？

我知道这可能不是正确的方法，但我想要一个快速的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:26:13.007

最快和最简单的方法是更改`StartupUri`​​ .`App.xaml`

```
<Application x:Class="WPFDefaultWindow.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="Test.xaml">
    <Application.Resources>

    </Application.Resources>
</Application> 
```

# javascript - 如何强制.change jquery 事件而不用户更改文本框中的文本？

> ID：14423908
> 
> 赞同：2
> 
> 时间：2013-01-20T11:15:09.380
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui

我的 asp.net MVC 视图中有几个文本框，当用户单击它们时会显示一个弹出窗口。弹出窗口还有一个文本框，用户在 jquery 弹出窗口中输入一个值并单击确定，所选值显示在单击的文本框中。我在此文本框上使用 textbox.change 事件，但它不会被触发，因为仅当我手动单击文本框时才会触发该事件。

```
 $(document).ready(function () {

            jQuery("#NumberCalledTo").click(function () {
                displayAlertMessage($(this).val());
            });

 $("#dial-prefix").dialog({
        autoOpen: false,
        modal: true,
        width: 470,
        resizeable: true,
        buttons: {
            "OK": function () {
                var selectedDialPrefixValue = $("#dialprefixPopup").val();
                var selectedPhoneValue = $("#PhoneNumber").val();

                // remove + and space from dialprefix selected on popup
                selectedDialPrefixwithoutPlus = selectedDialPrefixValue.replace(selectedDialPrefixValue.substring(0, 1), " ");
                selectedDialPrefixwithoutPlus = $.trim(selectedDialPrefixwithoutPlus);

                // number must be 10 or 11 digits long
                if (selectedDialPrefixwithoutPlus == "44" && selectedPhoneValue.substring(0, 1) == "0" && selectedPhoneValue.length < 11) {
                    //displayAlertMessage("Invalid number. Must must have 10 digits.");
                    $("#div-uk-error-message").dialog("open");
                    return;
                }
                else if (selectedDialPrefixwithoutPlus == "44" && selectedPhoneValue.length < 10) {
                    //displayAlertMessage("Invalid number. Must must have 9 digits.");
                    $("#div-uk-error-message").dialog("open");
                    return;
                }

                // remove 0 from phone number
                if (selectedPhoneValue.substring(0, 1) == "0") {
                    selectedPhoneValue = selectedPhoneValue.replace(selectedPhoneValue.substring(0, 1), "");
                }

                if (selectedPhoneValue != '') {
                    var selectedDialPrefix = $("#SelecteddialprefixId").val();
                    var selectedPhone = $("#SelectedPhoneId").val();
                    $("#" + selectedDialPrefix).val(selectedDialPrefixValue);
                    $("#" + selectedPhone).val(selectedPhoneValue);                   
                }
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });

}); 
```

$("#dial-prefix").dialog 在文本框点击时打开。我无法向 OK 按钮功能添加任何代码，因为此弹出窗口正在不同的页面和不同的文本框中使用。

请提出解决方案

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-20T11:16:58.143

我没有看到更改方法，因此很难破译有问题的元素，但如果你想触发一个事件，你可以这样做......

```
$('element').trigger('change'); 
```

这将触发`change event`，如果有的`handlers are bound to the event`话，它们将触发。

# facebook - Facebook 喜欢框边框颜色

> ID：14423920
> 
> 赞同：10
> 
> 时间：2013-01-20T11:17:13.073
> 
> 标签：facebook, colors, border

我对边框颜色有一些问题。我已经设置了#ffffff。但不工作。问题出在哪里？Facebook对此做出一些改变？

[http://www.raego.cz/](http://www.raego.cz/) - 平均，较低的like-box。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T14:53:03.833

是的，facebook 做了一些改变，点赞框的颜色也不再适合我了。在这一点上等待比我们了解更多的人！

编辑：这已得到修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T20:37:38.350

这是一个很好的临时解决方案。这个对我有用。

[http://www.zolton.org/2011/04/how-to-hide-facebooks-like-box-border/](http://www.zolton.org/2011/04/how-to-hide-facebooks-like-box-border/)

我只是像这样内联CSS：

```
<div style="width:200px;height: 260px;overflow: hidden;position: relative;">
<div style="margin: -2px 0 0 -2px;">
<!-- Your FB plugin -->
</div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-01T15:08:22.193

Facebook 刚刚添加了一个新参数，因此不要使用`border_color`并将其颜色设置为您的网站背景颜色，您应该使用：

```
show_border=false 
```

这就是你可以删除边框的方式..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-17T02:42:21.593

转到[https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)再次制作您的 fb like 框，这次取消选中**Show Border**或将此**data-show-border="false"**添加到您现有的fb 像盒子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-10T18:37:58.100

将 data-show-border="false" 添加到 fb-like-box div。

将以下内容添加到您的 CSS 中。

```
.fb-like-box { border:solid 1px #444444; } 
```

您还可以调整高度、宽度、背景、阴影、边框半径等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T10:53:10.550

找到了解决方案。您必须以大写设置颜色十六进制代码：

*   #ffffff 不起作用
*   #FFFFFF 工作正常

它看起来真的很傻，但如果修复 Facebook Like Box 上的边框颜色问题！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T09:54:23.440

它确实有效（至少现在），但井号需要进行 URL 编码。…… `&border_color=%23FFFFFF`_

# javascript - Chrome 扩展模式对话框或其他通知用户的解决方案？

> ID：14423923
> 
> 赞同：8
> 
> 时间：2013-01-20T11:17:27.137
> 
> 标签：javascript, google-chrome, google-chrome-extension

因此，我创建了一个 chrome 扩展，单击时会打开一个弹出窗口，供用户将当前选项卡保存为屏幕截图。

截屏：

![在此处输入图像描述](../Images/7deae49dcd4f0f0403ca3e6d644079cf.png)

问题是，当*我转到其他选项卡并返回打开扩展窗口的选项卡时*，该窗口不再存在（尽管它仍然执行屏幕截图创建）。因为这个无法知道扩展程序是否真的创建了屏幕截图，甚至桌面通知在这种情况下也没有显示，因为在切换到其他选项卡并返回后窗口变得不可见。

无论如何制作此弹出模式或其他一些解决方案，以便用户即使转到其他选项卡并返回使用扩展名的选项卡也能够知道已创建屏幕截图？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-20T17:43:32.540

如果您正在寻找一些模态窗口代码，您可以将其作为参考并根据您的要求进行自定义。

# 输出

[点击查看大图](https://i.stack.imgur.com/q2vj7.png)

![在此处输入图像描述](../Images/ae86499428730f1f3298353f25c60b07.png)

这个想法是全神贯注于模态对话框的处理文本模拟。

# 示范

### 清单.json

通过带有`gif`图像的内容脚本添加了一个简单的模式窗口。

```
{
    "name": "Add Model Window",
    "description": "http://stackoverflow.com/questions/14423923/chrome-extension-modal-dialog-or-other-solution-to-notify-users",
    "version": "1",
    "manifest_version": 2,
    "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "modal.js"
            ]
        }
    ],
    "web_accessible_resources": [
        "spinner_progress.gif"
    ]
} 
```

### modal.js

## 要形成的目标 HTML

这个想法是在页面上粘贴一个`<iframe>`并为自定义文本添加一个装饰面板。

```
<div style="position: absolute; left: 0px; top: 0px; background-color: rgb(255, 255, 255); opacity: 0.5; z-index: 2000; height: 1083px; width: 100%;">
    <iframe style="width: 100%; height: 100%;"></iframe>
</div>
<div style="position: absolute; width: 350px; border: 1px solid rgb(51, 102, 153); padding: 10px; background-color: rgb(255, 255, 255); z-index: 2001; overflow: auto; text-align: center; top: 149px; left: 497px;">
    <div>
        <div style="text-align:center"><span><strong>Processing...  Please Wait.</strong></span>

            <br>
            <br>
            <img src="/img/spinner_progress.gif">
        </div>
    </div>
</div> 
```

## 使用基本 DOM 操作的 HTML 代码。

```
wrapperDiv = document.createElement("div");
wrapperDiv.setAttribute("style","position: absolute; left: 0px; top: 0px; background-color: rgb(255, 255, 255); opacity: 0.5; z-index: 2000; height: 1083px; width: 100%;");

iframeElement = document.createElement("iframe");
iframeElement.setAttribute("style","width: 100%; height: 100%;");

wrapperDiv.appendChild(iframeElement);

modalDialogParentDiv = document.createElement("div");
modalDialogParentDiv.setAttribute("style","position: absolute; width: 350px; border: 1px solid rgb(51, 102, 153); padding: 10px; background-color: rgb(255, 255, 255); z-index: 2001; overflow: auto; text-align: center; top: 149px; left: 497px;");

modalDialogSiblingDiv = document.createElement("div");

modalDialogTextDiv = document.createElement("div"); 
modalDialogTextDiv.setAttribute("style" , "text-align:center");

modalDialogTextSpan = document.createElement("span"); 
modalDialogText = document.createElement("strong"); 
modalDialogText.innerHTML = "Processing...  Please Wait.";

breakElement = document.createElement("br"); 
imageElement = document.createElement("img"); 
imageElement.src = chrome.extension.getURL("spinner_progress.gif");

modalDialogTextSpan.appendChild(modalDialogText);
modalDialogTextDiv.appendChild(modalDialogTextSpan);
modalDialogTextDiv.appendChild(breakElement);
modalDialogTextDiv.appendChild(breakElement);
modalDialogTextDiv.appendChild(imageElement);

modalDialogSiblingDiv.appendChild(modalDialogTextDiv);
modalDialogParentDiv.appendChild(modalDialogSiblingDiv);

document.body.appendChild(wrapperDiv);
document.body.appendChild(modalDialogParentDiv); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T15:13:12.693

当您在弹出区域之外单击时，Chrome 中的弹出窗口会按设计关闭（嗯，不仅是由于[问题](http://code.google.com/p/chromium/issues/detail?id=163851)- 但它是 OT）。没有办法让它保持打开状态。

替代方法可能是：

*   通过桌面通知通知用户
*   使用成功消息打开另一个选项卡（一旦扩展完成其工作）
*   显示警报
*   在屏幕截图页面上显示模式。
*   [实验信息栏](http://developer.chrome.com/extensions/experimental.infobars.html)

当然可能还有其他方法，但我想这些是最有用的。

# c - C中的外部类型定义

> ID：14423925
> 
> 赞同：2
> 
> 时间：2013-01-20T11:17:34.040
> 
> 标签：c, include, typedef

我有 4 个文件：

啊：

```
typedef struct {
    int a;
} A; 
```

:

```
#include "a.h"
typedef struct {
    A a;
    int b;
} B; 
```

通道：

```
#include "a.h"
typedef struct {
    A a;
    double c;
} C; 
```

直流：

```
#include "b.h"
#include "c.h"
//Here I want to use types A, B and C 
```

int 和 double 只是示例，我遇到的真正问题要复杂得多。
关键是应该可以通过简单的转换将类型 B 和 C 转换为 A。
我要解决的问题是它说 A 类型被多次包含，这是可以理解的，因为 dc 包含 bh 包含 ah，但 ah 也包含在 ch
中 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T11:21:52.170

啊

```
#ifndef A_H_INCLUDED
#define A_H_INCLUDED
typedef struct {
    int a;
} A;
#endif 
```

bh

```
#ifndef B_H_INCLUDED
#define B_H_INCLUDED
#include "a.h"
typedef struct {
    A a;
    int b;
} B;
#endif 
```

ch

```
#ifndef C_H_INCLUDED
#define C_H_INCLUDED
#include "a.h"
typedef struct {
    A a;
    double c;
} C;
#endif 
```

直流

```
#include "a.h" // if you're going to use type A specifically do #include the proper file
#include "b.h"
#include "c.h"
//Here I want to use types A, B and C 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T11:21:15.093

使用包括警卫，如下所示：

```
#ifndef A_INCLUDED
#define A_INCLUDED
typedef struct {
  int a;
} A;
#endif 
```

在每个 .h 文件中，每个文件都有唯一的保护名称

# ruby-on-rails - @page.title：SystemStackError（堆栈级别太深）

> ID：14423926
> 
> 赞同：0
> 
> 时间：2013-01-20T11:17:42.693
> 
> 标签：ruby-on-rails

我在创建新页面时遇到问题。

页面模型：

**1.9.2-p180** :002 > 页

```
 => Page(id: integer, meta_keywords: text, meta_description: text, title: string, header: string, url: string, teaser: text, content: text, publicated_at: date, created_at: datetime, updated_at: datetime, parent_id: integer, lft: integer, rgt: integer) 
```

并得到这个按摩： **> Page.new**

```
SystemStackError: stack level too deep
    from /home/raz/.rvm/gems/ruby-1.9.2-p180@travel/gems/globalize3- .3.0/lib/globalize.rb:60 
```

在导轨控制台中。

在**PRY**我得到了这个：

```
[3] pry(main)> @page=Page.new
=> #<Page:0x5c86630>
[4] pry(main)> @page.id
=> nil
[5] pry(main)> @page.title
SystemStackError: stack level too deep
from /home/raz/.rvm/gems/ruby-1.9.2-p180@travel/gems/pry-0.9.11.3/lib/pry/pry_instance.rb:327
[6] pry(main)> @page.content
SystemStackError: stack level too deep
from /home/raz/.rvm/gems/ruby-1.9.2-p180@travel/gems/pry-0.9.11.3/lib/pry/pry_instance.rb:327 
```

页面.rb：

```
class Page < ActiveRecord::Base
  translates :meta_keywords, :meta_description, :title, :header, :teaser, :content
  acts_as_nested_set

  has_one :gallery
  has_one :hotel_numbers_data
  has_one :tour_prices_data
  ... differnt def...
end 
```

**pages_controller**中的新方法：

```
def new
@page = Page.new
if params[:parent_id]      
  @page.parent_id = params[:parent_id]
  binding.pry     
end
respond_to do |format|
  binding.pry
  format.html { render :layout => "admin" }
  format.xml  { render :xml => @page }
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:45:33.677

我只需要在页面模型中实现翻译表或注释：翻译：meta_keywords，：meta_description，：title，：header，：teaser，：content

# java - 从文本文件填充 JCombobox

> ID：14423931
> 
> 赞同：0
> 
> 时间：2013-01-20T11:18:13.300
> 
> 标签：java, swing, netbeans, file-io, jcombobox

我已经看到了一个较旧的问题，答案是下面的代码，但是如果我使用 netbeans，我已经设计了我的组合框。所以我认为（正如你想象的那样，我在 Java 和 netbeans 方面还很新！）应该更改代码的最后一行，我应该在哪里插入这段代码？

```
BufferedReader input = new BufferedReader(new FileReader(filePath));
List<String> strings = new ArrayList<String>();
try {
    String line = null;
    while (( line = input.readLine()) != null){
        strings.add(line);
    }
}

catch (FileNotFoundException e) {
    System.err.println("Error, file " + filePath + " didn't exist.");
}
finally {
    input.close();
}

String[] lineArray = strings.toArray(new String[]{});

JComboBox comboBox = new JComboBox(lineArray); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T11:32:16.267

1.这些代码行没用

```
List<String> strings = new ArrayList<String>();
String[] lineArray = strings.toArray(new String[]{});
JComboBox comboBox = new JComboBox(lineArray); 
```

[2.直接在DefaultComboBoxModel](https://stackoverflow.com/a/7388965/714968)中添加一个New Item ，Items也可以排序

3.在 Swing 中读取Concurency 可能存在[EDT 问题](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，使用[SwingWorker 从文件加载项目](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:46:17.417

`setModel`您可以通过调用其方法来更改现有 JComboBox 的项目。

对于它的价值，您可能会发现[Files.readAllLines](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)方法更易于使用：

```
try {
    final List<String> lines = Files.readAllLines(Paths.get(filePath),
        Charset.defaultCharset());

    EventQueue.invokeLater(new Runnable() {
        public void run() {
            comboBox.setModel(
                new DefaultComboBoxModel<String>(
                    lines.toArray(new String[0])));
        }
    });
} catch (IOException e) {
    e.printStackTrace();
} 
```

# c# - WP7 - 将 MessageHeader 添加到 WCF Soap 服务调用

> ID：14423937
> 
> 赞同：0
> 
> 时间：2013-01-20T11:18:45.840
> 
> 标签：c#, wcf, windows-phone-7, soap

过去两天我一直在尝试配置我的 WP7 应用程序以将消息头发送到我的 WCF Soap 服务。我只是想在每次通话时发送一串信息。

网上有很多指南，但我似乎无法将它们拼凑起来以完成我想要完成的事情，并且可以在一些帮助下真正做到。

那么 - 有人可以帮助我以最简单的方式将消息检查器添加到我的服务并从我的应用程序中附加标题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:26:01.317

对于 WP7 - 没有“简单”的方法可以做到这一点。WCF 中的大多数扩展点在 WP7 平台中不存在，因此您有几个替代方案。

最简单的方法是使用`OperationContext`添加传出消息头。这相当简单（见下文），但您需要为您调用的每个操作执行此操作：

```
var client = new ServiceReference1.MyServiceClient();
client.OperationCompleted += ...;
using (new OperationContextScope(client.InnerChannel))
{
    OperationContext.Current.OutgoingMessageHeaders.Add(
        MessageHeader.CreateHeader(
            "headerName", "http://header.namespace", "the value"));
    client.OperationAsync(param1, param2);
} 
```

如果在所有操作中这样做太多，另一种方法是创建一个包装客户端的类，并为所有操作执行此操作。仍然有很多代码，但至少会集中在一个点上，而不是分散在整个应用程序中。

最后一种选择（我现在记得）是使用消息检查器。它们不是平台的一部分，但根据您的情况，我已经实现了对检查器/格式化程序的一种支持，如[http://blogs.msdn.com/b/carlosfigueira/archive/2011/上的博客文章所示06/21/wcf-extensibility-extensibility-in-windows-phone-and-silverlight-3.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/21/wcf-extensibility-extensibility-in-windows-phone-and-silverlight-3.aspx)。对于简单的场景，它应该可以正常工作。

# ruby-on-rails-3.1 - ssh：连接到主机 heroku.com 端口 22：错误的文件号致命：远程主机意外挂断

> ID：14423938
> 
> 赞同：0
> 
> 时间：2013-01-20T11:18:50.730
> 
> 标签：ruby-on-rails-3.1

我在 Git Bash $ git push heroku master 上运行了以下命令

但它反而返回了这个错误

ssh：连接到主机 heroku.com 端口 22：错误的文件号致命：远程主机意外挂断。

我已经在堆栈上搜索了这个答案，但还没有解决方案。我迷路了请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:50:28.707

此处发布了相同的问题：[Heroku push via HTTPS](https://stackoverflow.com/questions/9428997/heroku-push-via-https)

最可能。您的端口 22 (ssh) 被防火墙阻止。据我所知，ssh 是将内容推送到 Heroku 的唯一方法（没有 http，没有 https）。

# drop-down-menu - 使用 Visual Basic 在 MS EXCEL 上基于数据透视表的下拉列表

> ID：14423943
> 
> 赞同：0
> 
> 时间：2013-01-20T11:19:29.727
> 
> 标签：drop-down-menu, excel, range, pivot, vba

我正在使用 Microsoft Excel 和 VBA。我需要一个下拉验证列表，该列表取决于在前一个单元格中所做的选择以及来自 4 个后续选择的选择。下拉列表基于命名范围，但这些范围是由数据透视表生成的。由于数据透视表的内容可能会发生变化，因此命名范围不再匹配。

有没有办法自动定义数据透视表中范围的命名？

对于故障报告系统，我有一个可能的故障模式和原因的数据库。对于每个报告的故障，需要选择相应的故障模式和原因。该数据库将包含数百种可能的故障模式和原因，因此仅显示属于所选系统的那些故障模式和原因会很有帮助。

我想当我显示示例文件时会更容易：www.maasgeesteranus.nl/files/Example Excel 输入 SDM 代码和 failmodes.xlsm

数据透视表包含手动输入的命名范围，但这应该是通过宏例程，或者应该可以在选择工作表中列的验证定义中调用这些数据透视表范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:30:01.473

假设您当前的下拉框在其中，并且它由名为`Sheet(1)`的范围填充，并且当前您只有项目 upto ，所以 5 个项目，`"A2:A10"``rangeA``"A6"`

```
Dim LastRow as Long
Dim StartRow as Long

'--assume that your named range first row has no titles
StartRow = Sheets(1).Range("rangeA").Row '-- 2
LastRow = Sheets(1).Cells(Sheets(1).Rows.Count, _ 
          Sheets(1).Range("rangeA").Column).End(xlUp).Row '-- 6

If StartRow <> 1 then
StartRow = StartRow - 1
Lastrow = LastRow - StartRow
End if

ComboBox1.List = Sheets(1).Range("rangeA").Resize(LastRow).Value 
```

# c# - 将字符串作为包含斜杠的 uri 参数传递或为空

> ID：14423944
> 
> 赞同：2
> 
> 时间：2013-01-20T11:19:40.150
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

我在使用 ASP.NET Web API 路由时遇到问题。具体来说，我想在 Uri 中传递一个空的或包含斜杠的字符串参数。但不幸的是，这破坏了路由。

我已经设置了正确的路由，如果我有一个普通的字符串，例如“fubar”，它匹配得很好。我试图传递编码的字符串 url，但这不起作用。显然问题是一些 http sys 层已经在解码字符串，这意味着没有`"fu%2fbar"`到达，但是`"fo/bar"`- 这导致了另一条路线。

另外，当我传递一个空字符串时， uri is `"api//..."`，两者`/`被合并，段被丢弃。

解决`/`内部问题的一种方法是对 Uri 进行双重编码并在我的方法中对其进行解码。但这似乎是一个非常非常糟糕的选择，所以我正在寻找其他方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:37:20.713

对于斜线，您可以准备特殊路线

```
 "{controller}/{action}/{param1}/{param2}/{param3}"
            "{controller}/{action}/{param1}/{param2}"
            "{controller}/{action}/{param1}"

    public ActionResult Index(string param1, string param2, string param3)
    {
        string param = string.Concat(param1, param2, param3); 
```

这样，fu 和 bar 是两个参数。

对空字符串没有任何解决方案。我会在客户端应用程序中用空格字符或其他表示“空”但不是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:27:32.080

我建议：

1.  将请求类型更改为 POST 并将字符串放入请求的正文中

2.  或添加一个拦截器（DelegatingHandler），它将获取请求并重写 url 中的参数，例如通过替换无效字符

# serialization - 序列化格式名称

> ID：14423946
> 
> 赞同：1
> 
> 时间：2013-01-20T11:19:51.020
> 
> 标签：serialization, byte

我编写了一种非常简单的序列化格式，它首先将无符号整数转换为大端形式的字节，然后在它们前面加上一个字节，指定数字占用的字节数。例如。`3 = 01 03`, `268 = 02 01 0C`. 因此整数的范围是`0`到`2^255 - 1`。

我使用它通过在字符串前面加上其长度的编码来序列化字符串，然后我可以很容易地序列化任意结构，例如字符串列表是元素数量的编码，然后是每个字符串的编码.

它在 PHP 中：[https](https://gist.github.com/4577886) ://gist.github.com/4577886 。

我的问题是：你怎么称呼这种序列化方法？它经常使用吗？有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:06:56.253

这是一种类型-长度-值，没有类型。这就是它的问题所在。你怎么知道接下来的 4 个字节是 int 还是 string 或 4 字节数组？

# c# - 如何创建一个完全不可见的按钮？

> ID：14423947
> 
> 赞同：3
> 
> 时间：2013-01-20T11:20:02.693
> 
> 标签：c#, wpf, xaml, visual-studio-2012

我正在尝试创建一个完全不可见的 WPF 按钮，但仍然有一个 onclick 或 click 事件，而不使用 MouseDown 之类的东西并检查 keyeventargs 等。

我尝试将按钮的可见性设置为折叠或隐藏，这也使按钮无法点击，因此对我的目的毫无用处。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T11:28:54.590

试试这个 ：

```
<Button Opacity="0" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:22:52.960

只需制作一个按钮并设置

```
 button.Visibility = Visibility.Hidden; 
```

或者

```
 button.Visibility = Visibility.Collapsed; 
```

# html - 当没有与 HTML5 的互联网连接时，我可以在同一网络上的客户端之间发送数据吗？

> ID：14423948
> 
> 赞同：0
> 
> 时间：2013-01-20T11:20:05.063
> 
> 标签：html, mobile, offline

我想构建一个使用 HTML5 和 ASP.NET 的餐厅自动化 Web 应用程序。此外，移动客户端（android、iPhone 等）将使用该应用程序的一小部分。

餐厅有一个主要客户和一些移动客户（接收客户的订单）。他们在同一个网络上，将在浏览器上运行我的网络应用程序。我会知道他们的本地IP地址。离线时，我的应用程序可以工作，因为它使用了 html5 的离线属性。

如果没有互联网连接，移动客户端可以将数据发送到主客户端吗？当连接可用时没有问题，但是当离线移动设备必须将数据发送到主设备时。上线后，我可以与服务器同步数据。我不想编写在主客户端上运行并从移动客户端接收的小型 exe。

如果我通过了这个问题，我可以为客户制作 android、iOS、win 应用程序。

有没有办法做到这一点？

# javascript - 带有 mapping.fromJS 和模板的 Knockoutjs

> ID：14423952
> 
> 赞同：2
> 
> 时间：2013-01-20T11:20:31.037
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin

我的模型中的每个条目都更新了一个表格，并且在删除和添加到数组时触发了两个事件。hideElement 调用 jquery "fadeOut" 和 showElement 调用 jquery "fadeIn" 函数来创建漂亮的淡出/淡入效果。

```
<tbody  data-bind='template: { foreach: entries,
     beforeRemove: hideElement,
     afterAdd: showElement }'> 
```

我的模型是这样的：

```
var Model = function() {
self.entries = ko.mapping.fromJS([]);
this.getData = function() {
$.ajax({
    url: "/test",
    type: "GET",
    success: function(response) {
        ko.mapping.fromJS(response, self.entries);
...

this.showElement = function(elem) { 
    if(elem.nodeName == "TR") {
         $(elem).fadeIn(500);
    }
};

this.hideElement = function(elem) { 
    if(elem.nodeName == "TR") {
       $(elem).fadeOut(500);
    };
};
... 
```

问题是，每次`ko.mapping.fromJS(response, self.entries)`在 ajax 响应中调用时，即使条目完全相同，淘汰似乎也在删除/添加条目。因此，调用了 showElement/hideElement 并且我的表中的元素“闪烁”，因为它们在每个 ajax 调用中被删除/添加。

是这样的还是我用错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:17:42.163

您需要在映射插件中使用 key 选项，以便插件知道哪些项目是相同的

[http://jsfiddle.net/yWwfz/](http://jsfiddle.net/yWwfz/)

```
var mapping =  {
    items: {
        key: function(item) { return item.id; }
    }
};
ko.mapping.fromJS(data, mapping, this); 
```

# php - PHP $_SESSION 和 Backbone.js 会话模型

> ID：14423955
> 
> 赞同：0
> 
> 时间：2013-01-20T11:20:55.037
> 
> 标签：php, session, backbone.js

我想知道如何使用我的 php 会话客户端使用backbone.js ......我有一个想法：

创建一个“会话主干模型”作为 php $_SESSION 的“克隆”，这是一个嵌套模型，其中包含客户端所需的所有 $_SESSION 数据。

但是我担心安全性：使用 model.fetch 我可以保持会话模型免受黑客攻击吗？你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:41:21.117

Backbone 不知道任何会话。但就像在您的页面上运行的任何 javascript 一样，它可以很好地从您的 PHP 服务器访问会话 cookie（解码 document.cookie 或类似内容）。

至于将调用保护回您的服务器，确保它们仅来自您的应用程序，这更具挑战性。如果您主要担心“外部”黑客攻击（来自运行应用程序的其他机器的请求），您可以使用会话 cookie 包含客户端 IP 地址的方案，并且您的 PHP 服务器会验证所有请求都带有正确的会话 cookie（请求 IP 地址与随附的 cookie 中编码的地址匹配）。

至于 document.cookie 上的文档，这个链接应该是一个很好的起点：

[document.cookie 究竟是如何工作的？](https://stackoverflow.com/questions/6791944/how-exactly-does-document-cookie-work)

# python - Tkinter - 将文本插入画布窗口

> ID：14423959
> 
> 赞同：6
> 
> 时间：2013-01-20T11:21:16.133
> 
> 标签：python, text, tkinter, tkinter-canvas

我有一个 Tkinter 画布，其中填充了使用`create_text`和`create_window`方法创建的文本和画布窗口或小部件。我放置在画布上的小部件是文本小部件，我想在它们被创建和放置后插入文本。如果可能的话，我不知道该怎么做。我意识到您可以在创建后使用 编辑它们`canvas.itemconfig(tagOrId, cnf)`，但不能以这种方式插入文本。有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-20T15:53:21.280

首先，让我们弄清楚术语：您不是在创建小部件，而是在创建画布项目。Tkinter 文本小部件和画布文本项之间存在很大差异。

有两种方法可以设置画布文本项的文本。可以使用[itemconfigure](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemconfig-method)设置`text`属性，也可以使用画布的[insert](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.insert-method)方法在文本项中插入文本。

在以下示例中，文本项将显示字符串“这是新文本”：

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        canvas = tk.Canvas(self, width=800, height=500)
        canvas.pack(side="top", fill="both", expand=True)
        canvas_id = canvas.create_text(10, 10, anchor="nw")

        canvas.itemconfig(canvas_id, text="this is the text")
        canvas.insert(canvas_id, 12, "new ")

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

# android - 有没有办法捕获/禁用“编辑文本，输入模式”消息

> ID：14423962
> 
> 赞同：1
> 
> 时间：2013-01-20T11:21:51.547
> 
> 标签：android, input, android-edittext

我的屏幕上有一个edittext 控件。
当我进入它时，我有两个问题。
1.）光标没有出现在我点击的地方。
2.）如果我将手指放在屏幕上，我会收到“编辑文本 --- 输入法”的提示

这个问题是关于第二个问题。
我不想向用户提出这个问题......有没有办法不向用户提出这个问题？我认为，如果用户想要更改他们的输入法，他们应该去设置。

* * *

附件...可能还有另一个文本编辑控件吗？

# css - css3背景径向圆渐变

> ID：14423964
> 
> 赞同：2
> 
> 时间：2013-01-20T11:21:52.580
> 
> 标签：css

我在下面有这段代码，它创建了一个背景径向圆渐变。

它在除 IE 之外的所有浏览器上运行良好（即使在 IE9 上也无法运行）

我应该向 css 添加什么才能使其在 IE9 和 IE8 上也能正常工作？

[http://jsfiddle.net/bhBtw/](http://jsfiddle.net/bhBtw/)

编码：

```
<!DOCTYPE html>
<html>
    <head>
    <title></title>
    <style type="text/css" media="screen">
        html { 
            background-color: #eee;
            height:768px;
        }
        div {
            width: 96%;
            height: 800px;
            padding: 10px;
            margin:0 auto;
        }

        div.circle {
            background-image: radial-gradient(center center, circle cover, #352e24, #1a160d);
            background-image: -o-radial-gradient(center center, circle cover, #352e24, #1a160d);
            background-image: -ms-radial-gradient(center center, circle cover, #352e24, #1a160d);
            background-image: -moz-radial-gradient(center center, circle cover, #352e24, #1a160d);
            background-image: -webkit-radial-gradient(center center, circle cover, #352e24, #1a160d);
        }
    </style>
</head>
    <body>
        <div class="circle"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T12:25:37.690

1.  IE 9 及以下不支持 CSS 渐变。所以它不应该在 IE 9 和更早版本中工作。
2.  [不需要`-ms-linear-gradient`线](http://www.impressivewebs.com/dropping-ms-vendor-prefixes-ie10/)。在 IE10 中支持不带前缀的渐变[，在 IE9 和更早版本中根本不支持](http://caniuse.com/#feat=css-gradients)渐变。
3.  **您应该始终将无前缀版本放在最后。**如果您不将无前缀版本放在最后，即使支持无前缀语法的浏览器仍将使用带前缀的语法。
4.  [新的渐变语法使用`farthest-corner`而不是`cover`](https://developer.mozilla.org/en-US/docs/CSS/radial-gradient). 这是默认值，所以你可以忽略它。
5.  `center`是位置的默认值（因此您也可以将其省略）。

* * *

IE9 及以上版本应该怎么做？不多。后备：

*   线性[IE 过滤器梯度](http://msdn.microsoft.com/en-us/library/ms532997%28VS.85,loband%29.aspx) ***或***
*   具有该渐变的背景图像***或***
*   只是一种纯色（在这种情况下我会选择这个选项，因为您在这里使用的两种颜色彼此没有太大区别，而且大多数人甚至无法在不仔细观察的情况下判断那里有渐变）

* * *

因此该代码应变为：

```
background: #352e24; /* ultimate fallback, always put this, just in case */

/* if you choose the IE filter linear gradient fallback */
filter: progid:DXImageTransform.Microsoft.gradient(
             startColorstr=#352e24, endColorstr=#1a160d);

/* if you choose to use the image fallback */
background: url(gradient.png);

/* Chrome, Safari */
background: -webkit-radial-gradient(circle, #352e24, #1a160d);

/* Firefox 15 and older, Firefox for Android */
background: -moz-radial-gradient(circle, #352e24, #1a160d);

/* Opera 11.6 (older only supported linear), Opera 12.0, Opera Mobile 12.0 */
background: -o-radial-gradient(circle, #352e24, #1a160d);

/* standard syntax, IE10, Firefox 16+, Opera 12.1+ */
background: radial-gradient(circle, #352e24, #1a160d); 
```

# html - 如何使用 Css 选择代码区域

> ID：14423965
> 
> 赞同：0
> 
> 时间：2013-01-20T11:21:52.887
> 
> 标签：html, css, navigation, navbar

我似乎无法弄清楚如何让这个 css 脚本只选择标题的 4 个链接。它使我网页上的所有链接都变成绿色。我该怎么做呢？我试过了`1.ul{ css here}`，`1.a:link,1.a:visited; etc. And then on`我添加了class='1'`，但它仍然使所有链接都与标题链接相同。

```
<style>
ul
{
list-style-type:none;
margin:0;
padding:0;
overflow:hidden;
}
li
{
float:left;
}
a.a:link,a.a:visited
{
display:block;
width:120px;
font-weight:bold;
color:#FFFFFF;
background-color:#98bf21;
text-align:center;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}
a.a:hover,a:active
{
background-color:#7A991A;
}

</style>
</head>

<body>
<ul class"a">
<li><a class='a' href="#home">Home</a></li>
<li><a class='a' href="#news">News</a></li>
<li><a class='a' href="#contact">Contact</a></li>
<li><a class='a' href="#about">About</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T11:24:35.067

我不确定它是否仍然如此，但每当我尝试在课程中使用数字时，除非先有一个字母，否则它永远不会起作用。无论哪种方式，数字都不是很语义化。在创建 id 和 class 属性时，您应该尝试描述元素包含的内容。

我会这样做：

```
<ul id="main-menu">
    <li><a href="#home">Home</a></li>
    <li><a href="#news">News</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><a href="#about">About</a></li>
</ul> 
```

然后像这样设置CSS：

```
#main-menu a { color: green; } 
```

正如 Mattias 指出的那样，`#main-menu`每次定位到`#main-menu`列表中的锚点时都需要指定。

```
#main-menu a:link, 
#main-menu a:visited {
    color: green;
} 
```

这相当于：

```
#main-menu a:link { color: green; }
#main-menu a:visited { color: green; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:37:39.983

我改变了你的CSS如下：

```
<style>
ul
{
list-style-type:none;
margin:0;
padding:0;
overflow:hidden;
}
li
{
float:left;
}
a:link
{
display:block;
width:120px;
font-weight:bold;
color:#FFFFFF;
background-color:red; 
text-align:center;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}

a:visited
{
display:block;
width:120px;
font-weight:bold;
color:#FFFFFF;
background-color:blue; 
text-align:center;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}

a:hover
{
background-color:#7A991A;
}

a:active
{
background-color:purple;  
}
</style> 
```

它似乎工作。

基本上，我将不同链接状态的规则分开，因此您可以为每个状态使用不同的颜色。查看此页面右侧窗格中的规则： [W3Schools](http://www.w3schools.com/css/tryit.asp?filename=trycss_link)

告诉我是否有帮助

# objective-c - 更新表字段objective-c

> ID：14423969
> 
> 赞同：0
> 
> 时间：2013-01-20T11:22:03.710
> 
> 标签：objective-c

文件数据.m

```
-(void)update:(NSMutableDictionary *)materia {

  if (sqlite3_open([pathDB UTF8String], &database) == SQLITE_OK) {
        // query per l'inserimento di una nuova materia
        NSString *query = [NSString stringWithFormat:@"UPDATE libretto SET Nome='%@',Voto='%@',CFU='%@' WHERE CFU='6'",[materia objectForKey:@"Nome" ],[materia objectForKey:@"Voto"],[materia objectForKey:@"CFU"]];

        const char *sql = [query UTF8String];

        sqlite3_stmt *insert_statement;
        // eseguiamo la query
        if(sqlite3_prepare_v2(database, sql, -1, &insert_statement, NULL) == SQLITE_OK) {
            if(sqlite3_step(insert_statement) == SQLITE_DONE) {
                // ricarichiamo la lista
                [self caricaValori];
            }

        }
        // chiudiamo il db
        sqlite3_finalize(insert_statement);
    }
    sqlite3_close(database);

} 
```

文件 viewcontroller.m

我在file.m中添加

```
-(IBAction)update:(id)sender {

    _nome=[[Data alloc]init];

    _cell=[[MasterViewController alloc]init];

        if(_cell.indexpath2.row==0 ) {

     if([fieldNome.text isEqualToString:_nome.nome]){

    // creiamo un dizionario con i valori
    NSMutableDictionary *materia = [[NSMutableDictionary alloc] initWithObjectsAndKeys:fieldNome.text, @"Nome", fieldCFU.text, @"CFU",fieldVoto.text,@"Voto", nil];

    //inseriamolo nel db
    [dataList update:materia];

    // torniamo alla lista
    [self.navigationController popViewControllerAnimated:YES];

     }
    }

} 
```

我只更新表的第一个字段的问题。

如果我在表中添加更多名称，我不会在任何字段中升级

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:36:17.010

您已将查询的`CFU`in`WHERE`子句硬编码为“6”。

几个建议：

1.  不要在查询中嵌入参数值。缺少正确的转义会导致某些值出现奇怪的错误，并允许 SQL 注入攻击。改用`sqlite3_bind_*`函数。

2.  不要直接使用 sqlite，除非你真的知道你为什么要这样做。CoreData 更适合 99% 的典型应用程序。

# python - 通过了解 OpenCV 中的单应性计算视频中的物体高度

> ID：14423970
> 
> 赞同：1
> 
> 时间：2013-01-20T11:22:04.473
> 
> 标签：python, opencv, computer-vision, augmented-reality, homography

我正在尝试测量在我使用 OpenCV 和 Python 开发的跟踪应用程序中检测到的对象的高度。我已经计算了单应矩阵，所以我知道每个对象在现实世界中的位置以及它在视频帧上的表观高度。我不知道的是相机的真实世界位置。我已经看到可以从单应性计算相机姿势矩阵，但我不知道该怎么做。

视频是从头部水平录制的，对象主要是人。单应性将相机像素转换为地面。

可以通过将最左边和最右边的坐标转换为真实世界坐标并测量它们之间的距离来测量对象的宽度。如何计算高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T14:22:58.897

然后您需要计算消失点和交叉比率使用。你可以在这里找到更多：http: [//courses.cs.washington.edu/courses/cse590ss/01wi/notes/projective.ppt](http://courses.cs.washington.edu/courses/cse590ss/01wi/notes/projective.ppt)

# python - 显示大弹出菜单的正确方法是什么？

> ID：14423971
> 
> 赞同：5
> 
> 时间：2013-01-20T11:22:09.703
> 
> 标签：python, gtk, gtk3, pygobject

一张图画一千个字……：

![在此处输入图像描述](../Images/94e879983bc58481923a5ee6be369564.png)

在我的 Python 2.7 应用程序中，我有一个按钮，单击该按钮会弹出一个菜单。

在某些情况下，此列表大于屏幕大小。

*   在 Ubuntu 12.04（使用 Gtk 3.4.2）中这没问题，因为您会看到滚动箭头（如图片右侧所示）。

*   在 Ubuntu 12.10/13.04 和 Fedora 17（使用 Gtk 3.6）中，我得到了相同的菜单，但没有滚动箭头，并且您无法使用鼠标向上或向下滚动。

奇怪的是，如果我再次单击该按钮 - 滚动箭头会再次出现。

所以它看起来像某种大小分配问题 - 它不是在第一个弹出窗口中计算的，而是在随后的弹出窗口中计算的

### *因此我的问题*

较新的 GTK 库显然发生了一些变化——现在显示大弹出菜单以确保显示滚动箭头的正确方法是什么？

任何提示我应该如何解决不同 GTK 版本之间的这种明显差异，以便我可以获得一致的“第一次点击时显示箭头”？

下面是一个演示此问题的简单 python 测试程序。

我无法使用 GTKParasite 来诊断此问题，因为一旦您单击 GtkParasite 本身的“检查”按钮，弹出窗口就会消失。

```
# -*- 模式：python；编码：utf-8；制表符宽度：4；缩进制表模式：无；-*-

#!/usr/bin/env python

从 gi.repository 导入 Gtk

def popupclick(self, *args):
    popup.popup（无，无，无，无，0，
            Gtk.get_current_event_time())

窗口 = Gtk.Window()
window.connect('delete_event', Gtk.main_quit)
window.set_default_size(200,200)

first_item = 无
弹出 = Gtk.Menu()

对于范围内的我（100）：
    标签 = '项目 %d' % i
    如果不是 first_item：
        new_menu_item = Gtk.RadioMenuItem(label=label)
        first_item = new_menu_item
    别的：
        new_menu_item = Gtk.RadioMenuItem.new_with_label_from_widget(
            组=第一项，标签=标签）

    new_menu_item.show()
    popup.append(new_menu_item)

按钮 = Gtk.Button()
button.connect('点击', popupclick)
主机箱 = Gtk.Box()
mainbox.pack_start（按钮，真，真，0）
滚动条 = Gtk.ScrolledWindow()
scroller.add_with_viewport(mainbox)
window.add（滚动条）

window.show_all()

gtk.main()

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:05:50.553

我浏览了一些文档，而不是使用`popup.append(new_menu_item)`你可以使用`popup.attach(new_menu_item, left, right, top, bottom)`将菜单项放在网格中而不是一条长线。

但是，您似乎最好打开一个带有可滚动列表的窗口！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:58:04.703

使用[GtkComboBoxText](http://developer.gnome.org/gtk3/stable/GtkComboBoxText.html)。但正如 ptomato 所说，这种表示方式不适合包含大量值的列表。要么减少要显示的值的数量，要么使用[GtkTreeView](http://developer.gnome.org/gtk3/stable/GtkTreeView.html)，它将有一个滚动条并且不需要初始点击来显示值。

# java - 如何关闭spring ApplicationContext？

> ID：14423980
> 
> 赞同：87
> 
> 时间：2013-01-20T11:23:16.987
> 
> 标签：java, spring

在我的应用程序完成后，我想关闭 spring 上下文。
相关代码有`ApplicationContext`参考，但我找不到`close`方法。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-01-20T11:27:07.157

向下转换你[`ApplicationContext`](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html)的[`ConfigurableApplicationContext`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/context/ConfigurableApplicationContext.html)定义[`close()`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/context/ConfigurableApplicationContext.html#close())方法：

```
((ConfigurableApplicationContext)appCtx).close(); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-26T12:42:54.160

您需要向 JVM 注册一个关闭挂钩，如下所示：

```
((AbstractApplicationContext)appCtx).registerShutdownHook(); 
```

有关更多信息，请参阅：[Spring 手册：3.6.1.6 在非 Web 应用程序中优雅地关闭 Spring IoC 容器](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-shutdown)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-05-23T12:42:17.443

如果您像下面这样初始化上下文

```
ApplicationContext context = new ClassPathXmlApplicationContext(beansXML); 
```

像这样干净的上下文

```
((ClassPathXmlApplicationContext) context).close(); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-13T19:06:22.667

**如果 Java SE 7 及更高版本**，不要关闭，请使用 try-with-resources 确保每个资源在语句结束时关闭。

```
try(final AbstractApplicationContext applicationContext = new ClassPathXmlApplicationContext(new String[]{"classpath*:META-INF/spring/*.xml" }))
{
     //write your code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-09T13:04:06.763

关闭`ApplicationContext`对象的步骤

1.  键入将`ApplicationContext`对象转换为`ConfigurableApplicationContext`对象。
2.  然后调用关闭对象。

例子：

```
 ApplicationContext context = new ClassPathXmlApplicationContext("mybeans.xml");

((ConfigurableApplicationContext)context ).close(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-25T06:28:35.960

```
public static void main(String[] args) {
    ApplicationContext context=new ClassPathXmlApplicationContext("SpringCnf.xml");
    Resturant rstro1=(Resturant)context.getBean("resturantBean");
    rstro1.setWelcome("hello user");
    rstro1.welcomeNote();
    ((ClassPathXmlApplicationContext) context).close(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-08T13:29:07.293

甚至更简单的方法是使用`ApplicationContextinterface`.

```
 AbstractApplicationContext context = new ClassPathXmlApplicationContext("spring.xml");

context.close(); 
```

# java - Android WebView：仅显示网站的一部分

> ID：14423981
> 
> 赞同：22
> 
> 时间：2013-01-20T11:23:18.407
> 
> 标签：java, android, android-webview

我想知道是否可以在 WebView 中仅显示网站的某些部分。例如，我有一个带有以下 html 的网站：

```
<html>
 <body>
<div id="1">ID 1</id>
<div id="2">ID 2</id>
<div id="3">ID 3</id>
</body>
</html> 
```

是否可以仅在 WebView 中显示，例如 id="3" 的 div 的内容？我的代码是 WebWiew：

```
WebViewClient WebClient = new WebViewClient(){
        public boolean shouldOverrideUrlLoading(WebView view, String url){
          view.loadUrl(url);
          return true;
        }
    };

    WebView myWebView = (WebView) findViewById(R.id.webView1);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.getSettings().setBuiltInZoomControls(true);
    myWebView.getSettings().setBuiltInZoomControls(true);
    myWebView.setWebViewClient(WebClient);
    myWebView.loadUrl("https://www.example.com"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T13:09:16.763

您可以通过扩展 WebViewClient 并注入一些将呈现您的网页的 javascript 来做到这一点

```
public class MyWebClient extends WebViewClient {

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    view.loadUrl(url);
    return true;
}

@Override
public void onPageFinished(WebView view, String url) {
    view.loadUrl("javascript:your javascript");
}
}
.........
final MyWebClient myWebViewClient = new MyWebClient();
mWebView.setWebViewClient(myWebViewClient); 
```

对于隐藏元素使用`view.loadUrl("javascript:document.getElementById(id).style.display = 'none';)`

更多信息[在 Android Webview 中，我可以修改网页的 DOM 吗？](https://stackoverflow.com/questions/2219074/in-android-webview-am-i-able-to-modify-a-webpages-dom)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-21T08:30:57.377

这里要了解的最基本的事情是我们在 web html 文件中引用的元素是**class**还是**id**。如果它是一个**id**则`getElementById`可以完美运行。如果它是一个类，那么`getElementsByClassName`是必需的。

以下是我正在使用的示例。

```
myWebView.loadUrl
      ("javascript:(function() { " +
           "document.getElementsByClassName('header_wrapper')[0].style.display='none'; " +
           "document.getElementsByClassName('footer-contact')[0].style.display='none'; "+
           "document.getElementsByClassName('navbar-header')[0].style.display='none'; "+
           "document.getElementsByClassName('footer-social')[0].style.display='none'; "+
           "document.getElementById('footer_bottom').style.display='none'; "+
           "document.getElementById('footer_content').style.display='none'; "+
           "document.getElementById('core_mobile_menu').style.display='none'; "+
           "document.getElementById('catapult-cookie-bar').style.display='none'; "+
       "}
      )()"); 
```

# zend-framework2 - zf2 ModuleManager 配置合并 - 删除密钥

> ID：14423983
> 
> 赞同：4
> 
> 时间：2013-01-20T11:23:22.120
> 
> 标签：zend-framework2

我不确定这是否可能，但是...

zf2 ModuleManager 将按顺序合并模块的所有配置数组，然后合并任何用户定义的配置数组。因此，如果与您`$config1`合并，则`$config2`得到`$merged`.

```
$config1 = [
   'key1' => 1,
   'key2' => 2,
   'key3' => 3
]

$config2 = [
    'key1' => 'different',
    'key4' => 4
]

$merged = [
    'key1' => 'different',
    'key2' => 2
    'key3' => 3
    'key4' => 4
] 
```

这很好，适用于大多数情况。但是，如果我想删除密钥怎么办？如果我`$config1`有如上，并想在`$merged`下面创建这个替代，那么应该是什么值`$config2`（注意`key2`被删除）？

```
$merged = [
    'key1' => 'different',
    'key3' => 3
    'key4' => 4
] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-30T05:22:56.660

这现在在 zf2 master 中得到修复。可能在 zf2 2.3 中。请参阅这个很棒的教程以了解它是如何完成的（请参阅 MERGE_CONFIG 事件）

[https://github.com/weierophinney/zf2-documentation/blob/71aac39e9ae78eaca3739458c5a2ccf15f4cdb2c/docs/languages/en/tutorials/config.advanced.rst](https://github.com/weierophinney/zf2-documentation/blob/71aac39e9ae78eaca3739458c5a2ccf15f4cdb2c/docs/languages/en/tutorials/config.advanced.rst)

顺便说一句，在编写本教程时，它还只是一个 PR，还没有出现在官方文档中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:02:31.083

让任何 module.php 用于目的（您可以根据需要使其具体化）。

试试下面的代码

```
pulbic function init(){

$events = StaticEventManager::getInstance();

$events->attach('Zend\Mvc\Controller\AbstractActionController', 'dispatch', array(
    $this,
    'removeMyKey'
    ), 110);
}
public function removeMyKey($mvcEvent){
    $sl = $mvcEvent->getTarget()->getServiceLocator();
    $config = $sl->get('Config');
    unset($config['key2']);
    $sl->set('Config',$config);
    return $sl;
} 
```

希望这有助于删除密钥。根据需要进行更改。

# sql - Sql：确定从开始日期和结束日期拆分为 2 个表的事件的活动期间

> ID：14423985
> 
> 赞同：0
> 
> 时间：2013-01-20T11:23:53.957
> 
> 标签：sql

Sql 问题：从开始日期和结束日期开始确定一个事件的活动期间拆分为 2 个表

这是我需要制作的临时报告。我获得了 2 个与事件 (csv) 有关的提取文件。我打算将这些提取插入单个 sql 表 #temp_events。

文件 1：

```
event, start date
Core training, 01Jan2011
Certification reviews, 23Feb2011
Core training, 15May2011
Abc Event, 24Nov2011 
```

文件 2：

```
event, end date
Core training, 05Jan2011
Certification reviews, 24Feb2011
Core training, 18May2011
Abc Event, 30Nov2011 
```

我想插入一个#temp_events，其中一个条目将定义一个事件的活动期。请注意，没有 FK，因为这是手头的主要问题……关联数据的唯一方法是通过事件名称，但是可能会多次出现事件。无法计算事件的结束时间，因为没有定义事件持续时间的数据。不幸的是，这些是我需要处理的限制，因为提取提供者已经规定了这些限制。

任何人都可以为我需要编码的逻辑提供建议，以便即使没有自然键/id/FK，我也可以可靠地将文件 1 中的事件链接到文件 2？我可能会遇到任何明显的漏洞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:58:41.320

你去：

```
CREATE TABLE eventstart
        ( event VARCHAR NOT NULL
        , zdate date
        );
INSERT INTO eventstart(event,zdate) VALUES
 ( 'Core training' , '2011-01-01' )
,( 'Certification reviews' , '2011-02-23' )
,( 'Core training' , '2011-05-15' )
,( 'Abc Event' , '2011-11-24' )
        ;

CREATE TABLE eventend
        ( event VARCHAR NOT NULL
        , zdate date
        );
INSERT INTO eventend(event,zdate) VALUES
 ('Core training' , '2011-01-05' )
,('Certification reviews' , '2011-02-24' )
,('Core training' , '2011-05-18' )
,('Abc Event' , '2011-11-30' )
        ;

WITH    s AS (
        SELECT ss.event, ss.zdate
        , ROW_NUMBER() OVER( PARTITION BY ss.event ORDER BY ss.zdate) AS zrnk
        FROM eventstart ss
        )
        ,e AS (
        SELECT ee.event, ee.zdate
        , ROW_NUMBER() OVER( PARTITION BY ee.event ORDER BY ee.zdate) AS zrnk
        FROM eventend ee
        )
SELECT s.event
       , s.zdate AS sdate
       , e.zdate AS edate
FROM s
LEFT JOIN e ON e.event = s.event AND s.zrnk = e.zrnk
WHERE s.zdate <= COALESCE(e.zdate , s.zdate) -- safety valve ;-)
        ; 
```

注意：以上查询非常粗鲁。它依赖于 OP 给出的边界条件，即**每个 start record 都会有一个匹配的 end-record**。如果没有：YMMV

结果：

```
CREATE TABLE
INSERT 0 4
CREATE TABLE
INSERT 0 4
         event         |   sdate    |   edate    
-----------------------+------------+------------
 Abc Event             | 2011-11-24 | 2011-11-30
 Certification reviews | 2011-02-23 | 2011-02-24
 Core training         | 2011-01-01 | 2011-01-05
 Core training         | 2011-05-15 | 2011-05-18
(4 rows) 
```

# php - 如何使用应用程序发布到我自己的 Facebook 页面？

> ID：14423986
> 
> 赞同：0
> 
> 时间：2013-01-20T11:23:57.983
> 
> 标签：php, facebook, facebook-graph-api

> **可能重复：**
> [Facebook Graph Api - 以管理员身份发布到粉丝页面](https://stackoverflow.com/questions/3627684/facebook-graph-api-posting-to-fan-page-as-an-admin)

我写了下面的代码：

```
$pageId = 'xxx';
$appId = 'xxx';
$secret = 'xxx';
$facebook = new Facebook(array(
    'appId' => $appId,
    'secret' => $secret,
    'cookie' => false
));

$access_token = $facebook->getAccessToken();

$facebook->api("/{$pageId}/feed", "post", array(
    'message' => "First message",
    'name' => "Name for first",
    'access_token' => $access_token
)); 
```

但出现以下异常：（#200）用户尚未授权应用程序执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:44:37.370

您是否检查过用户是否已登录？很简单，但我在您的代码中看不到它。

您可以首先检查 $facebook->getUser() 是否为 null，如果 null 重定向到 $facebook->getLoginUrl(array('req_perms' => 'user_status'); 并确保添加您可能需要的其他权限。

[这个问题](https://stackoverflow.com/questions/6971768/facebook-graph-api-getaccesstoken-not-working)非常相似，通读一些答案 - 应该有一个适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:30:02.437

您的代码中需要 *publish_stream* 权限。有可能：

```
$my_url = "http://apps.facebook.com/siegiusarena"; 
```

// 获取用户 ID $user = $facebook->getUser();

如果（$用户）{

```
 $message=$application_name." game on facebook. Check it out: http://apps.facebook.com/siegiusarena";
$link = "http://apps.facebook.com/siegiusarena";
$attachment = array('message'=>$message, 'link'=>$link, 'picture'=>'http://www.developas.com/fb/siegiusarena/siegiusarena_256x256.jpg');
$facebook->api("me/feed", 'post', $attachment); 
```

}else{ $code = $_REQUEST["code"];

```
 if(empty($code)) {
                     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
                     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
   . $appid . "&redirect_uri=" . urlencode($my_url) . "&state="
   . $_SESSION['state'] . "&scope=email,publish_stream";

                    echo("<script> top.location.href='" . $dialog_url . "'</script>"); 
```

} }

# javascript - 如何自动将用户数据发送到 mongo DB

> ID：14423994
> 
> 赞同：0
> 
> 时间：2013-01-20T11:24:58.870
> 
> 标签：javascript, node.js, mongodb, express, mongoose

每次用户连接到应用程序时，我使用 socket.io 来广播地理定位（lat、lng）并在地图上设置新的标记图标。如果日本的用户连接，socket.io 会将他的位置发送给我，他也会收到我的位置。问题是我不希望用户接收距离很远的用户的位置（并将我的位置发送给），但只能在预定义的半径内（例如：20 公里）。

mongo DB 中的空间搜索似乎适合识别位于同一区域的用户并将其分配给 groupId。相同 groupId 的用户将被分配一个他们将收听的公共 socket.io 频道。

为了实现我的梦想，我实际上是在尝试使用 mongoose 将用户信息推送到 Mongo DB 中。问题是猫鼬在服务器中运行，而数据在客户端。

我已经定义了一个 schema.js 来构建数据库，但是我对如何设置将客户端数据与 mongoose 链接的路由有点迷茫？我知道 mongoose 和客户端都必须返回适当的 JSON 对象才能进行通信，并且数据可以使用`model.save()`. 很抱歉这个幼稚的问题，但在这一点上的帮助将不胜感激。谢谢你。

**编辑 ：**

我终于使用 socket.io 将用户数据传递给具有`send2DB`功能的服务器，但我遇到了这个错误：

```
Object { _id: 50fc08aebb97d3201d000001,
coords; [],
date: Sun Jan 20 2013 16:18:34 GMT+0100 (Paris, Madrid) } has no methode 'push'` 
```

这似乎是数组的问题，`coords`但我不明白为什么它也返回日期！这是代码：

**应用程序.js：**

```
 // generate unique user id
    var userId = Math.random().toString(16).substring(2,15);

    // code here
    onLocationfound = function(e){
        userMarker.setLatLng(e.latlng);
        map.setView(userMarker.getLatLng(),map.getZoom()); 
        latitude = (e.latlng[0]||( Math.round(e.latlng.lat*1000)/1000));
        longitude = (e.latlng[1]||( Math.round(e.latlng.lng*1000)/1000));

    // send data to database (executed once)
    sentData = {id: userId, coords: [{lat: latitude, lng: longitude}]}
    socket.emit('send2DB', sentData); 
```

**服务器.js：**

```
mongoose.connect('mongodb://localhost/test');

var mongoose = require('mongoose')
    , Schema = mongoose.Schema
    , ObjectId = Schema.ObjectId;

// create schema
var userInformation = new Schema({
    username: { type: String, required: true, trim: true },
    email: { type: String, required: true, trim: true },
    role: { type: String, required: true, trim: true },
    date: {type: Date, default: Date.now},
    userId: String,
    longitude: Number,
    latitude: Number,
    coords: [Number, Number]
});

// export retrieve my model

var MyModel = mongoose.model('ModelName', userInformation);
var instance = new MyModel();

// code here

io.sockets.on('connection', function (socket) {

// code here

// Store user data to DB then query spatial info //
socket.on('send2DB', function (data) {

    console.log('Position is', data);
    instance.push(
        {userId: 'data.id'},
        {latitude: 'data.lat'}
        );
    instance.save(function (err) {
      if (!err) console.log('Success!')
      else console.log('Error');
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:59:23.560

我认为您通常走在正确的道路上。以下是几个容易注意到的问题：

1.  方法从何`push`而来？（您没有任何数组）
2.  当从客户端接收到新数据时，您不想在 MyModel 的新实例上设置属性吗？
3.  我认为您会在套接字检索 send2DB 数据时创建一个新的 MyModel 。然后，只需设置属性。
4.  另外，您不想制作`userId`带引号的字符串`'data.id'`，对吗？你不只是想要价值`userId: data.id`吗？（因为您可能想要来自套接字`data`对象的值）

基础知识可以在 mongoose[文档](http://mongoosejs.com/docs/index.html)中找到。.

```
socket.on('send2DB', function(data) {
    var instance = new MyModel({userId: data.id, latitude: data.lat});
    instance.save(function(err, instance) { /* callback */ });
}); 
```

最终，您可能希望为您的 API 函数添加一些安全性等，而不仅仅是相信 User.id 是有效的和位置。

# iphone - authenticateWithCompletionHandler：已弃用：在 iOS 6.0 中首次弃用

> ID：14423995
> 
> 赞同：7
> 
> 时间：2013-01-20T11:25:07.280
> 
> 标签：iphone, ios, game-center

我正在开发使用 Game Center 的游戏，我收到下一个警告；

**... 'authenticateWithCompletionHandler:' 已弃用：首先在 iOS 6.0 中弃用**

好的，我搜索并发现有用于验证本地用户的新代码，所以我替换了

旧代码：

```
- (void)authenticateLocalUser {

    if (!gameCenterAvailable) return;

    NSLog(@"Authenticating local user...");
    if ([GKLocalPlayer localPlayer].authenticated == NO) {
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];
    } else {
        NSLog(@"Already authenticated!");
    }
} 
```

与新的：

```
- (void)authenticateLocalUser {

    if (!gameCenterAvailable) return;

    NSLog(@"Authenticating local user...");

    if ([GKLocalPlayer localPlayer].authenticated == NO) {

        GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
        [localPlayer setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error) {
        //[localPlayer authenticateWithCompletionHandler:^(NSError *error) { OLD CODE!
            if(localPlayer.isAuthenticated) {
                //do some stuff
            }else {
                // not logged in   
            }
        })]; 
    } else {
        NSLog(@"Already authenticated!");   
    }   
} 
```

一切都很好，除了一件事。如果用户未登录，则没有 Game Center 登录表单。使用旧代码，如果用户未登录，它会显示 Game Center 登录表单。

有没有我必须输入的额外代码或其他东西？

额外信息：-横向模式-部署目标：6.0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T08:14:45.323

是的，您必须使用 iOS6 手动呈现登录表单，这让您可以更好地控制何时呈现屏幕。试试这个

```
localPlayer.authenticateHandler = ^(UIViewController *viewController,NSError *error) {
if (localPlayer.authenticated) { 
//already authenticated
} else if(viewController) {
[self presentViewController:viewController];//present the login form
} else {
//problem with authentication,probably bc the user doesn't use Game Center
} 
}; 
```

# c# - 最后 LINQ to XML 递归查看元素

> ID：14423996
> 
> 赞同：0
> 
> 时间：2013-01-20T11:25:24.817
> 
> 标签：c#, .net, linq-to-xml

我已经写了：

```
 public string GetOutline(int indentLevel, XElement element)
        {
        StringBuilder result = new StringBuilder();

        result = result.AppendLine(new string('-', indentLevel * 2) + element.Name);

        foreach (var childElement in element.Elements())
        {
            result.Append(GetOutline(indentLevel + 3, childElement));
        }

        return result.ToString();
    } 
```

在 xml 文件上运行此递归方法的结果显示：

```
 Videos
    ------Video
    ------------Title
    ------------Director
    ------------Actors
    ------------------Actor
    ------------------Actor
    ------------------Actor
    ------------------Actor
    ------------Length
    ------------Format
    ------------Rating
    ------Video
    ------------Title
    ------------Director
    ------------Length
    ------------Format
    ------------Rating
enter code here 
```

但我希望输出如下所示：

```
 Videos
    ------Video
    ------------Title
    ------------Director
    ------------Actors
    ------------------Actor
    ------------Length
    ------------Format
    ------------Rating 
```

如何编辑代码？从昨天开始真的很挣扎......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:36:01.083

按名称使用 linq 分组：

```
foreach (var childElement in element.Elements().GroupBy(childElement => childElement.Name))
{
    result.Append(GetOutline(indentLevel + 3, childElement.First()));
} 
```

代替：

```
foreach (var childElement in element.Elements())
{
    result.Append(GetOutline(indentLevel + 3, childElement.First()));
} 
```

* * *

这种方法的唯一问题是使用`First`. 如果您有，例如在您的 XML 文件中：

```
<actors>
    <actor>
        <property/>
    </actor>
    <actor>
        <differentProperty/>
        <differentProperty2/>
    </actor>
</actors> 
```

通过分组，`First`结果将是：

```
actors
----actor
--------property 
```

在这种情况下，您希望结果如何显示？

```
actors
----actor
--------property
--------differentProperty
--------differentProperty2 
```

或者

```
actors
----actor
--------property
----actor
--------differentProperty
--------differentProperty2 
```

或者这种情况不会出现？

### 更新：

鉴于您的评论，解决方案将是：

```
public static string GetOutline(int indentLevel, XElement element)
{
    return GetGroupOutline(indentLevel, new[] {element});
}

/// <summary>
/// Returns the outline of the elements that constitute a group.
/// </summary>
/// <param name="indentLevel">Indent level.</param>
/// <param name="elements">Elements of a group (all the element of the collection must have the same <c>Name</c>)</param>
/// <returns>Outline of the group.</returns>
private static string GetGroupOutline(int indentLevel, IEnumerable<XElement> elements)
{
    StringBuilder result = new StringBuilder();

    // Adds the group name in the outline
    result = result.AppendLine(new string('-', indentLevel * 6) + elements.First().Name);

    foreach (var childGroup in from element in elements  // Gets each element in the group "elements"
                               from childElement in element.Elements()  // Gets their children
                               group childElement by childElement.Name into childGroup  // Groups the children of all elements by their name to a new group called "childGroup"
                               select childGroup)
        result.Append(GetGroupOutline(indentLevel + 1, childGroup));  // Shows the outline of the group called "groupChild"

    return result.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:25:07.063

您需要首先构建具有所有唯一元素的 xml 树：

```
private XElement GetUniqueElementsOf(XDocument xdoc)
{
    XElement result = new XElement(xdoc.Root.Name);
    AddUniqueChildren(result, xdoc.Root);
    return result;
}

public void AddUniqueChildren(XElement dest, XElement source)
{
    foreach (XElement sourceChild in source.Elements())
    {
        var destChild = dest.Elements()
                            .SingleOrDefault(x => x.Name == sourceChild.Name);

        if (destChild == null)
        {
            destChild = new XElement(sourceChild.Name);
            dest.Add(destChild);
        }

        AddUniqueChilds(destChild, sourceChild);
    }
} 
```

第二种方法将通过递归遍历 xml 将所有唯一的子元素添加到每个节点。此时您需要做的就是输出结果：

```
 var result = GetOutline(0, GetUniqueElementsOf(XDocument.Load(path_to_xml))); 
```

Outline 方法应该很简单，没有分组（因为我们已经只有​​ xml 的唯一元素）：

```
public string GetOutline(int indentLevel, XElement element)
{
    StringBuilder result = new StringBuilder();

    result = result.AppendLine(new string('-', indentLevel * 2) + element.Name);

    foreach (var childElement in element.Elements())            
        result.Append(GetOutline(indentLevel + 3, childElement));            

    return result.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T21:49:29.633

```
internal static class ExtensionMethods
{
    public static List<XElement> Find(this XElement _objXElement, string _strFindXName)
    {
        List<XElement> _lsXElementsFound = new List<XElement>();
        try
        {
            List<XElement> _lsXElementsBundle = new List<XElement>();
            RecursiveSearch(_objXElement, _strFindXName, ref _lsXElementsBundle);
            if (_lsXElementsBundle != null && _lsXElementsBundle.Count > 0)
            {
                foreach (XElement _objCurrentXElement in _lsXElementsBundle)
                {
                    if (_objCurrentXElement != null)
                    {
                        if (!string.IsNullOrEmpty(_objCurrentXElement.Value))
                        {
                            _lsXElementsFound.Add(_objCurrentXElement);
                        }
                        else
                        {
                            _objCurrentXElement.Value = string.Empty;
                            _lsXElementsFound.Add(_objCurrentXElement);
                        }
                    }
                }
            }
        }
        catch (Exception _objException)
        {
            _lsXElementsFound = new List<XElement>();
            string _strDescription = NLOG.Utility.FormatEvent(MethodBase.GetCurrentMethod()
                , _objException.Message);
            NLOG.Log.Error(_strDescription);
        }
        return _lsXElementsFound;
    }

    #region "SUPPORT"

    private static void RecursiveSearch(XElement _objXElement, string _strFindXName
        , ref List<XElement> _lsOfXElementsFound)
    {
        try
        {
            if (_objXElement != null && !string.IsNullOrEmpty(_strFindXName)
                && _lsOfXElementsFound != null)
            {
                if (_objXElement.Name == _strFindXName)
                {
                    _lsOfXElementsFound.Add(_objXElement);
                }
                else
                {
                    foreach (XElement _objCurrentXElement in _objXElement.Elements())
                    {
                        RecursiveSearch(_objCurrentXElement, _strFindXName, ref _lsOfXElementsFound);
                    }
                }
            }
        }
        catch (Exception _objException)
        {
            string _strDescription = NLOG.Utility.FormatEvent(MethodBase.GetCurrentMethod()
                , _objException.Message);
            NLOG.Log.Error(_strDescription);
        }
    }

    #endregion
} 
```