# StackOverflow 问答 12656000-12656999

# jquery - 将 html 元素与使用 .get 加载的文件进行比较

> ID：12656004
> 
> 赞同：0
> 
> 时间：2012-09-29T19:59:02.430
> 
> 标签：jquery

我有一个 div，我想从服务器上的文件中重复更新其内容，使用`setInterval`. 我只想在内容发生更改时实际更新内容，所以我尝试了以下操作：

```
$.get('online.txt', function(result){
  if ($('#update').html() != result) {
    $('#update').html(result);
    updatecount++;
    $('#logcount').html(updatecount);
  }
}); 
```

但是，代码不断更新，表明我的比较操作失败。我确定我在做一些愚蠢的事情，但这对我来说并不明显。谢谢！

# .net - 使用响应式扩展的并行缓存

> ID：12656012
> 
> 赞同：1
> 
> 时间：2012-09-29T19:59:48.667
> 
> 标签：.net, caching, parallel-processing, system.reactive, async-await

我正在寻找建立一个并行缓存。要求是需要一次触发*n个数据收集器。*这些数据收集器中的每一个都将到达边界层（称为服务层）并检索数据。但是，由于这是在同一个请求 (WCF) 中，如果 2 个数据收集器需要在服务层调用相同的方法，我不希望第二个请求等待第一个请求完成。

这需要对构建数据收集器的开发人员透明地构建（使用 Unity Interception 插入此缓存方面）。

这是流程的样子。反应式扩展是否适合这种设计？我过去没有与 Rx 合作过，并且不想在开发 10 天后碰壁。否则，async、await 和 events 的组合也可能在这里很好地发挥作用。

编辑：我使用 Rx 实现了这个 - 在多线程上下文中运行良好。有趣的是尝试 add 而不是 tryGet。（这是一个 Unity 拦截 CallHandler）

```
 /// <summary>
    /// Intercepts the calls and tries to retrieve from the cache
    /// </summary>
    class CacheCallHandler : ICallHandler
    {

        [Dependency]
        public ICache RequestCache { get; set; }

        public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
        {
            IMethodReturn mesg = null;

            string cacheKey = CacheKeyGenerator.GetCacheKey(input);

            //create the task to retrieve the data
            var task = new Task<IMethodReturn>(() =>
            {
                return getNext()(input, getNext);
            });

            //make it observable
            var observableItem = task.ToObservable();

            //try to add it to the cache
            //we need to do this in the order of Add and then try to get, otherwise multiple thread might enter the same area
            if (RequestCache.TryAdd(cacheKey, observableItem))
            {
                //if the add succeeed, it means that we are responsible to starting this task
                task.Start();
            }
            else
            {
                if ( RequestCache.TryGetValue(cacheKey, out observableItem) )
                {
                    //do nothing, the observable item is already updated with the requried reference
                }
                else
                {
                    throw new CacheHandlerException("Could not add to cache AND could not retrieve from cache either. Something's wrong", input);
                }
            }

            //observe the return 
            if ( observableItem != null )
                mesg = observableItem.FirstOrDefault();

            if (mesg == null)
                throw new CacheHandlerException("Not return value found. this should not happen", input);

            return mesg;
        }

        /// <summary>
        /// Should always be the first to execute on the boundary
        /// </summary>
        public int Order
        {
            get { return 1; }
            set { ; }
        }
    } 
```

![在此处输入图像描述](../Images/ff882397616796a5a3b9a237c39f5b65.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T01:03:02.877

[https://github.com/reactiveui/ReactiveUI/blob/master/ReactiveUI/ObservableAsyncMRUCache.cs](https://github.com/reactiveui/ReactiveUI/blob/master/ReactiveUI/ObservableAsyncMRUCache.cs)已经基本上完全符合您的要求，特别是对相同内容的两个请求被“去抖动”。从评论：

```
/// ObservableAsyncMRUCache implements memoization for asynchronous or
/// expensive to compute methods. This memoization is an MRU-based cache
/// with a fixed limit for the number of items in the cache.     
///
/// This class guarantees that only one calculation for any given key is
/// in-flight at a time, subsequent requests will wait for the first one and
/// return its results (for example, an empty web image cache that receives
/// two concurrent requests for "Foo.jpg" will only issue one WebRequest -
/// this does not mean that a request for "Bar.jpg" will wait on "Foo.jpg").
///
/// Concurrency is also limited by the maxConcurrent parameter - when too
/// many in-flight operations are in progress, further operations will be
/// queued until a slot is available. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:34:59.870

是的，Rx 非常适合这个。

我建议您考虑实现以下字典来支持您的密钥缓存：

```
Dictionary<K, AsyncSubject<V>> 
```

您的异步获取数据部分只需要订阅主题即可使用结果填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T01:19:47.263

我会倾向于一个`async`解决方案，特别是使用[`AsyncLazy<T>`（来自我的博客）](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)：

```
public sealed class MyCache<TKey, TValue>
{
  private readonly ConcurrentDictionary<TKey, AsyncLazy<TValue>> dictionary =
      new ConcurrentDictionary<TKey, AsyncLazy<TValue>>();

  private readonly Func<TKey, Task<TValue>> LookupAsync;

  public MyCache(Func<TKey, Task<TValue>> lookupAsync)
  {
    LookupAsync = lookupAsync;
  }

  public AsyncLazy<TValue> Get(TKey key)
  {
    return dictionary.GetOrAdd(key,
        key => new AsyncLazy<TValue>(() => lookupAsync(key)));
  }
} 
```

这是一个非常简单的“缓存”，因为它没有过期时间。它可以这样使用：

```
MyCache<string, MyResource> cache = new MyCache<string, MyResource>(async key =>
{
  MyResource ret = await DataLayer.GetResourceAsync(key);
  ...
  return ret;
});
MyResource resource = await cache.Get("key"); 
```

在多线程情况下，`GetOrAdd`可能会创建一个额外的`AsyncLazy<TValue>`，但它永远不会被`await`编辑，因此`lookupAsync`每个 只会被调用一次`TKey`。另请注意，`lookupAsync`始终从线程池中调用。

PS 如果你去`async`，你可能会发现我的[`async`WCF 帖子](http://nitoprograms.blogspot.com/2012/08/async-wcf-today-and-tomorrow.html)很有帮助。

# javascript - 使用 Python/Flask 遍历 HTML 模板中的 URL 列表

> ID：12656016
> 
> 赞同：3
> 
> 时间：2012-09-29T20:00:44.733
> 
> 标签：javascript, python, html, flask

这似乎是一个非常基本的问题，但我无法弄清楚。我将 URL 列表传递到 HTML 页面中，并尝试在 href 标记中打印每个 URL。我正在使用 Flask 运行测试服务器，并且可以确认变量是否正确传递（我可以打印出整个列表或其中的元素）。

我的应用路线：

```
import doaudit # separate Py script that gets these urls

@app.route('/audit', methods = ['GET'])
def audit():
    return render_template('audit.html', listOfUrls = doaudit.listOfUrls) 
```

我的模板：

```
<html>
    <head>
        <title>Data Audit</title>   
</head>
<body>

        {% for url in listOfUrls %}        
        <script language="JavaScript">
            document.write( "<a href=\"" + url + "\">linktext</a>" );
        </script>
        {% endfor %}

    </body>
</html> 
```

我尝试了以下变化：

```
document.write( "<a href=\"" + '{{ listOfUrls[i] }}' + "\">linktext</a>" ); 
```

并遍历所有 i 但这也不起作用。

列表的长度可能会有所不同，因此我需要一个迭代解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T20:06:45.850

这就是你想要的：

```
{% for url in listOfUrls %}        
    <script language="JavaScript">
        document.write( "<a href=\"" + {{ url|tojson|safe }} + "\">linktext</a>" );
    </script>
{% endfor %} 
```

该`{{ url }}`部分告诉 Jinja2（模板引擎）这`url`实际上是您在`for url in blabla`. 没有它，它会按原样打印。您可以在浏览器中查看源代码时看到它。这意味着它将被解释为一个 JS 变量，`undefined`相当于一个空字符串，然后您会看到。

**编辑：**添加`tojson|safe`调用，以确保它不会破坏 JS 代码。你可以这样做：`<a href=\"{{ url }}\">linktext</a>`。但随后 a`"`会破坏您的 html/js 代码。

**编辑 2：**过滤器的`tojson`作用是使其适合放入 JS 代码中。并且`safe`过滤器告诉渲染引擎它不应将其视为任何文本（应将其转义以在 HTML 中正确显示），而应将其视为安全文本（无论是否为 HTML）。

# c# - 从 YUY 更改为 MJPG 格式

> ID：12656020
> 
> 赞同：0
> 
> 时间：2012-09-29T20:01:26.653
> 
> 标签：c#, video, directshow, directshow.net, mjpeg

我有一个能够同时运行 YUY 和 MJPG 颜色空间的网络摄像头。此相机默认为 YUY，我需要在 DirectShow 图形中更改或添加什么才能以编程方式在 MJPG 中启动相机？我的代码与典型的图形设置非常相似，类似于 DirectShow.Net 示例目录中的 DxSnap 示例。关于这一点的文档很少，我见过的唯一示例是显示捕获引脚属性页面并通过该 UI 更改它，但是我的技术需要以编程方式实现。任何帮助、指导或建议将不胜感激。谢谢

这是我的图形构造：

```
/// <summary> build the capture graph for grabber. </summary>
    private void SetupGraph(DsDevice dev, int iFrameRate, int iWidth, int iHeight)
    {
        int hr;

        ISampleGrabber sampGrabber = null;

        ICaptureGraphBuilder2 capGraph = null;

        // Get the graphbuilder object
        m_graphBuilder = (IFilterGraph2)new FilterGraph();
        m_mediaCtrl = m_graphBuilder as IMediaControl;
        try
        {
            // Get the ICaptureGraphBuilder2
            capGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();

            // Get the SampleGrabber interface
            sampGrabber = (ISampleGrabber)new SampleGrabber();

            // Start building the graph
            hr = capGraph.SetFiltergraph(m_graphBuilder);
            DsError.ThrowExceptionForHR(hr);

            // Add the video device
            hr = m_graphBuilder.AddSourceFilterForMoniker(dev.Mon, null, "Video input", out capFilter);
            DsError.ThrowExceptionForHR(hr);

            IBaseFilter baseGrabFlt = (IBaseFilter)sampGrabber;
            ConfigureSampleGrabber(sampGrabber);

            // Add the frame grabber to the graph
            hr = m_graphBuilder.AddFilter(baseGrabFlt, "Ds.NET Grabber");
            DsError.ThrowExceptionForHR(hr);

            // Get list of video compressors on the system
            DsDevice[] videoCompressors = DsDevice.GetDevicesOfCat(FilterCategory.VideoCompressorCategory);

            IBaseFilter videoCompressorFilter = null;
            string videoCompressor = "MJPEG Compressor";
            foreach (DsDevice compressor in videoCompressors)
            {
                if (compressor.Name == videoCompressor)
                {
                    object obj = null;
                    Guid bfGuid = typeof(IBaseFilter).GUID;
                    compressor.Mon.BindToObject(null, null, ref bfGuid, out obj);
                    videoCompressorFilter = obj as IBaseFilter;
                    break; // Found the compressor - stop looking for it
                }

            }

            if (videoCompressorFilter != null)
            {
                hr = m_graphBuilder.AddFilter(videoCompressorFilter, videoCompressor);
                DsError.ThrowExceptionForHR(hr);
            }

            // If any of the default config items are set
            if (iFrameRate + iHeight + iWidth > 0)
            {
                SetConfigParms(capGraph, capFilter, iFrameRate, iWidth, iHeight);
            }

            hr = capGraph.RenderStream(PinCategory.Capture, MediaType.Video, capFilter, null, baseGrabFlt);
            DsError.ThrowExceptionForHR(hr);

            SaveSizeInfo(sampGrabber);

        }
        finally
        {

            if (sampGrabber != null)
            {
                Marshal.ReleaseComObject(sampGrabber);
                sampGrabber = null;
            }
            if (capGraph != null)
            {
                Marshal.ReleaseComObject(capGraph);
                capGraph = null;
            }
        }
    }

    private void SaveSizeInfo(ISampleGrabber sampGrabber)
    {
        int hr;

        // Get the media type from the SampleGrabber
        AMMediaType media = new AMMediaType();
        hr = sampGrabber.GetConnectedMediaType(media);
        DsError.ThrowExceptionForHR(hr);

        if ((media.formatType != FormatType.VideoInfo) || (media.formatPtr == IntPtr.Zero))
        {
            throw new NotSupportedException("Unknown ISampleGrabber Media Format");
        }

        // Grab the size info
        VideoInfoHeader videoInfoHeader = (VideoInfoHeader)Marshal.PtrToStructure(media.formatPtr, typeof(VideoInfoHeader));
        m_videoWidth = videoInfoHeader.BmiHeader.Width;
        m_videoHeight = videoInfoHeader.BmiHeader.Height;
        m_stride = m_videoWidth * (videoInfoHeader.BmiHeader.BitCount / 8);

        DsUtils.FreeAMMediaType(media);
        media = null;
    }
    private void ConfigureSampleGrabber(ISampleGrabber sampGrabber)
    {
        AMMediaType media;
        int hr;

        // Set the media type to Video/RBG24
        media = new AMMediaType();
        media.majorType = MediaType.Video;
        media.subType = MediaSubType.MJPG;
        media.formatType = FormatType.VideoInfo;
        hr = sampGrabber.SetMediaType(media);
        DsError.ThrowExceptionForHR(hr);

        DsUtils.FreeAMMediaType(media);
        media = null;

        // Configure the samplegrabber
        hr = sampGrabber.SetCallback(this, 1);
        DsError.ThrowExceptionForHR(hr);
    } 
```

帧回调函数：

```
 void OnFrameDone()
    {
        try
        {
            int w = Width;
            int h = Height;
            if (((w < 32) || (h < 32)))
            {                   
                return;
            }

            int stride = w * 3;

            lock (this)
            {
                GCHandle handle = GCHandle.Alloc(savedArray, GCHandleType.Pinned);
                int scan0 = (int)handle.AddrOfPinnedObject();
                scan0 += (h - 1) * stride;
                Bitmap b = new Bitmap(w, h, -stride, PixelFormat.Format24bppRgb, (IntPtr)scan0);

                //switch (FrameDirection)
                //{
                //    case VideoDir.Portrait:
                //        b.RotateFlip(RotateFlipType.Rotate90FlipNone);
                //        break;

                //    case VideoDir.Landscape:
                //        b.RotateFlip(RotateFlipType.Rotate180FlipNone);
                //        b.RotateFlip(RotateFlipType.Rotate180FlipNone);
                //        break;

                //}

                if(FrameCaptureComplete != null)
                    FrameCaptureComplete(b);

                handle.Free();
            }

        }
        catch (Exception ex)
        {
            string error = ex.Message;
        }

        return;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:04:36.390

除非相机以非标准方式执行此操作，否则它应该`IAMStreamConfig`在其输出引脚上公开接口，您可以通过在 SetFormat 方法中提供感兴趣的媒体类型来选择格式。完成后，继续构建图表并将引脚连接到下游。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:33:44.247

在所有这些反复试验中，我的研究得出的结论是，我的努力并非完全失败的尝试。Microsoft MJPEG Decompressor 无法在 3MP 以上的分辨率下工作，我试图以 5MP 运行图表。使用能够运行 5MP 的第 3 方 MJPEG 压缩器解决了我遇到的所有问题。

谢谢罗曼的帮助。

# android - 如何在Android中全局锁定屏幕方向？

> ID：12656032
> 
> 赞同：2
> 
> 时间：2012-09-29T20:02:36.487
> 
> 标签：android, android-layout, android-service

我正在开发一个将手机连接到不旋转屏幕的程序。我找到了一种注入触摸和按键事件的方法。我遇到的唯一问题是让它留在风景中。我发现我可以在设置中设置 USER_ROTATION 和 ACCELEROMETER_ROTATION。但是，如果程序请求进入纵向模式，它会卡住并且永远不会旋转出来。假设用户具有 root 访问权限，我如何在全局范围内强制所有内容都以横向方式进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:17:44.703

您可以强制仅使用清单在景观上设置活动

```
<activity android:screenOrientation="landscape" android:configChanges="orientation|keyboardHidden" android:name="...."> 
```

这应该可以工作，您可能还需要覆盖显示/隐藏硬件键盘时可能发生的任何方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:08:25.233

我在这个项目的源代码中找到了答案。[http://code.google.com/p/perapp](http://code.google.com/p/perapp)可以通过读取系统日志和创建允许显示在其他所有内容之上的系统级对话框来完成。您可以将它们隐藏起来并让它们强制屏幕变为横向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T20:14:33.233

我不确定您如何实现这一点，但请记住操作系统的某些部分不应该旋转，或者不能旋转（即您的主屏幕永远不会旋转）。您可能不得不求助于拍摄屏幕显示的图像，然后将其旋转 90 度，然后将其显示在目标屏幕上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T22:25:55.607

我认为您使用的 ROM 必须具有此选项，在某些三星设备中，有锁定屏幕方向的选项（但它的操作系统选项）。

# javascript - 在文档的不同页面之间传递数据

> ID：12656034
> 
> 赞同：1
> 
> 时间：2012-09-29T20:02:48.203
> 
> 标签：javascript, jquery, events

我有一个通过`.load()`另一个页面的 div 加载的页面，例如：

```
$(".page_div").load("otherpage.aspx .wrapper"); 
```

我想`otherpage.aspx`通知父页面发生的事件，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:08:33.333

[查看查询字符串](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)！如果您想将信息从一个页面传递到下一个页面，通常最好的方法是将信息附加到您传递的 URL 中。

从技术上讲，您也可以使用 cookie 或会话，但这些涉及信息的创建而不是信息的“说”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:17:09.583

我认为这里有一个混淆。不能说您是在进行 ajax 调用还是进行页面转换。

*   使用查询字符串进行页面转换。
*   如果您正在进行信息已可用的 ajax 调用，请在服务器调用返回后将调用的回调函数中使用它。

根据我在 api 页面上阅读的内容，可以使用 jQuery.load 进行 ajax 调用。

[http://api.jquery.com/load/](http://api.jquery.com/load/)

**编辑：**

我不熟悉网络套接字，但是可以像这样实现类似的东西。

从第 2 页开始，您在事件发生时更新数据库条目

从第一页开始，您通过 ajax 轮询数据库中的更改。

当用户从不同的选项卡发送新电子邮件并且您的电子邮件发送列表会自动更新时，您会注意到 Gmail 中的类似行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:21:18.457

当您通过 jQuery.load() 加载页面时，它可以包含一个脚本元素。该脚本元素中的任何 JavaScript 都将在页面加载后执行，并且因为它位于父文档中，所以它可以完全访问父 JavaScript。这意味着它可以调用父文档创建的 JavaScript 方法。我会在父文档中创建一个类似 loadCallback() 的方法，然后使用 JavaScript loadCallback({some: data}) 添加一个脚本元素，这会将数据从加载的页面传递到父页面。这是 vanilla JavaScript，因此您可以传递数据、函数等任何内容。

# python - 如何修复与不应该匹配的日期正则表达式

> ID：12656035
> 
> 赞同：0
> 
> 时间：2012-09-29T20:02:48.880
> 
> 标签：python, regex, date

我正在尝试扫描一些文档以查找分类问题的日期。在阅读了这里和其他一些地方之后，我构建了以下正则表达式

```
months='['+'|'.join(calendar.month_abbr[1:])+'|'+'|'.join(calendar.month_name[1:])+']'
techPart='+\\.*\\s*\\d{1,2}[,]?[\\s*][1|2]\\d{3}'
dateExpr=months+techPart 
```

我正在这个字符串上测试它

```
newString='Mar. 31, 2011 Dec. 31, 2010 bananas Mar. 31, 2011 too much malarky September 1, 1992 redundant Dec. 31, 2010  September 29, 1999  March 12 2004 ddfd  March.    13 2019 ddfd  Mac.    13 2019 ddfd' 
```

当我像这样运行它时

```
for date in re.findall(dateExpr,newString):
print date 
```

我明白了

```
Mar. 31, 2011
Dec. 31, 2010
Mar. 31, 2011
September 1, 1992
Dec. 31, 2010
September 29, 1999
March 12 2004
March.    13 2019
Mac.    13 2019    #here is my problem 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T20:11:50.140

在您的`months`正则表达式中，您使用方括号，给出类似`[Jan|Feb|Mar|...]`. 那是错的。方括号用于字符类并匹配括号中的任何字符*之一*，因此这将匹配`J`or `a`or `n`or `|`or`F`等​​。相反，您想使用括号：

```
months='(?:'+'|'.join(calendar.month_abbr[1:])+'|'+'|'.join(calendar.month_name[1:])+')' 
```

您需要`?:`因为`findall`只返回捕获的组，所以我们需要将此组标记为非捕获。

您稍后在您的正则表达式中遇到同样的问题`[1|2]`。你想要`(?:1|2)`，或者只是`[12]`。

# html - 如何获得 http POST 响应

> ID：12656038
> 
> 赞同：0
> 
> 时间：2012-09-29T20:03:11.690
> 
> 标签：html, jquery

我正在寻找一种在不使用库的情况下从 HTTP POST 获取响应的方法。我在 w3schools.com 上使用 jQuery 的 $.post 方法找到了这个[示例，您可以在其中传入一个函数来处理响应。](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_post)我已经尝试查看 jQuery 的源代码来弄清楚它是如何处理它的，但我还没有得到任何结果。

我的 POST 响应将是一个 json 对象，我将对其进行解析并显示在页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:19:58.107

对不起，我没想到。您可以使用本机 javascript ajax 控件。看这里：[http ://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

下面列出了一些示例，向您展示如何提交表单数据；我不确定状态更改时是否触发了事件。你必须在他们的例子中挖掘一点。

# jsp - 在 Maven 项目中默认禁用 EL

> ID：12656039
> 
> 赞同：2
> 
> 时间：2012-09-29T20:03:15.073
> 
> 标签：jsp, maven, jstl, el

我使用 Apache Maven 3 创建了一个 Eclipse Web 项目。我遇到了表达式语言的问题。默认情况下禁用它，我尝试通过 web.xml 启用它是徒劳的。

```
<jsp-config>
    <jsp-property-group>
    <url-pattern>*.jsp</url-pattern>
    <el-enabled>true</el-enabled>
    <scripting-enabled>true</scripting-enabled>
    </jsp-property-group>
</jsp-config> 
```

我能够使它们工作的唯一方法是在 JSP 页面顶部使用这个 scriptlet。

```
<%@ page isELIgnored="false" %> 
```

我的项目的POM如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>learn.filter</groupId>
  <artifactId>LearnFilters</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>LearnFilters Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
    <groupId>jstl</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>

  </dependencies>
  <build>
    <finalName>LearnFilters</finalName>
    <plugins>
        <plugin>
          <groupId>org.apache.tomcat.maven</groupId>
          <artifactId>tomcat6-maven-plugin</artifactId>
          <version>2.0</version>
          <configuration>
            <port>8080</port>
            <path>/LearningFilters</path>
                <warFile>${project.basedir}/target/${project.build.finalName}.war</warFile>
          </configuration>
        </plugin>
        <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
    </plugins>
  </build>
</project> 
```

有什么方法可以通过 web.xml 或默认启用它们？此外，这种构建会创建两个 web.xmls ！！！这真的很令人困惑。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:46:09.623

你的 web.xml 版本是什么？`isELIngnored`在 2.4 AFAIK 中默认为 false。所以使用 2.5 或 3.0 命名空间，一切都会好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-17T16:07:18.293

我觉得标签是问题。

你所拥有的是

```
<jsp-config>
    <jsp-property-group>
    <url-pattern>*.jsp</url-pattern>
    <el-enabled>true</el-enabled>
    <scripting-enabled>true</scripting-enabled>
    </jsp-property-group>
</jsp-config> 
```

我认为它应该是“el-ignored”而不是“el-enabled”。它一直对我有用。这告诉 web 容器如果遇到任何 jsps 中的表达式语言，它不应该忽略它。

```
<jsp-config>
        <jsp-property-group>
            <url-pattern>*.jsp</url-pattern>
            <el-ignored>
                false
            </el-ignored>
        </jsp-property-group>
    </jsp-config> 
```

这是 web.xml 的等价物

```
<%@ page isELIgnored="false" %> 
```

# twitter-bootstrap - 引导下拉菜单隐藏在“主页”下

> ID：12656041
> 
> 赞同：4
> 
> 时间：2012-09-29T20:03:25.627
> 
> 标签：twitter-bootstrap

我在显示引导程序 .dropwdown 类时遇到问题。它从一开始就有效，但一段时间后停止显示。我在整个网站中使用固定容器作为“主页”。现在看起来像这样：http: [//imgur.com/NIfje](http://imgur.com/NIfje)单击按钮时看起来像这样，正如您在出现的小箭头上看到的那样。

我已经确认下拉菜单正常工作并且 .js 文件没有任何问题。这是我使用的正文和标题：

```
<body>
 <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <span class="brand">doost</span>
      <div class="nav-collapse collapse">
        <ul class="nav">
            <li><a href="<?php echo $logout; ?>">Logout</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">browse <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="<?php echo $random; ?>">random</a></li>
           </ul>
          </li>
         </ul>
     </div><!--/.nav-collapse -->
    </div>
  </div>
</div>
<div class="container"> 
```

我已尝试重置/删除可能导致此问题的所有内容，但无法修复它。这包括用默认的替换 bootstrap.js/bootstrap.css。主页由一个固定的容器组成，该容器从页眉开始，到页脚结束，正如我所说的，包含在每个页面中。我在这个容器中有几个嵌套的 div 标签组成了网站。

我还尝试在 bootstrap.css 中增加 .dropdown 的 z-index，但什么也没发生。

我使用默认 bootstrap.js/bootstrap.css 包括一个 homecook.js/homecook.css

告诉我是否需要提供其他任何东西让您能够帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:21:01.253

`nav-collapse collapse`我可以通过在带有类的 div 上放置一个正的 z-index 值来解决这个问题。在我的情况下，任何大于`0`这个技巧的价值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:57:56.207

我也有这个问题。但是当我尝试你的代码时没有问题。您是否包含了所有必要的插件，例如**bootstrap-dropdown.js**？

# ldap - LDAP 搜索查询以获取一个特定条目

> ID：12656043
> 
> 赞同：2
> 
> 时间：2012-09-29T20:03:34.747
> 
> 标签：ldap

我面前有[RFC 4515 ，它提供了](http://www.rfc-editor.org/rfc/rfc4515.txt)**LDAP**搜索过滤器的字符串表示。我还研究了[UnboundId SDK for Java的 API，但是当我希望我的查询](https://www.unboundid.com/products/ldapsdk/)**最多获取一个**LDAP 条目时，我不清楚使用什么最佳习惯用法。我曾考虑在**LDAP**查询中使用该条目的**DN作为***基础*，但是过滤实际上没有任何意义，我必须使用人为设计的无意义过滤器，对于已经在搜索**基地**。即在协议中似乎没有*alwaysTrue*过滤器可以使用。

 ****** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:07:27.520

如果识别名已知，则使用识别名作为基础对象，使用`SearchScope.BASE`，使用`(&)`（或`objectClass=*`）过滤器并提供客户端所需的属性列表。例如：

```
// exception handling not shown
final LDAPConnection conn = new LDAPConnection(host,port);
// some broken servers do not understand the legal filter '(&)', if
// your directory is broken in this way, use 'objectClass=*' and
// an equality filter can be created like:
// Filter filter = Filter.createEqualityFilter("objectClass","*");
final SearchRequest req = new SearchRequest(dn,SearchScope.Sub,"(&)",SearchRequest.ALL_USER_ATTRIBUTES);
final SearchResult result = conn.search(req);
final List<SearchResultEntry> entries = result.getSearchEntries();
conn.close(); 
```

这将返回条目的所有用户属性。同样的事情可以通过以下方式完成：

```
// exception handling not shown
final LDAPConnection conn = new LDAPConnection(host,port);
final SearchResultEntry entry = conn.getEntry(dn);
conn.close(); 
```

如果识别名已知，则第二种方法最为简洁。`getEntry(String dn,String attributes ...)`如果客户希望指定要返回的属性列表，还有一种方法。如果 DN 未知，则客户端必须搜索该条目，并且在`SearchResultEntry`返回至少一个条目的每个搜索请求中都会返回可分辨名称。

至于在多个条目与过滤器匹配时最多获取一个条目，LDAP 客户端必须提供足够紧密的搜索范围和过滤器以将结果缩小到所需的一个条目。这就是过滤器和范围的用途。*****

# php - 如何在没有 PDO 的情况下使 Drupal 工作

> ID：12656045
> 
> 赞同：0
> 
> 时间：2012-09-29T20:04:05.020
> 
> 标签：php, mysql, drupal, pdo

在不使用 PDO 的情况下，如何让 Drupal 在 MySQL 数据库上工作？

我有一个 MySQL 数据库和 PHP 5.3，但是 PDO 被永久禁用（我无法更改它）。是否有我可以与 Drupal 一起使用的扩展或模块，因此它不需要 PDO？

提前致谢。

Ps 我是 Drupal 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:11:38.910

[在这里](http://drupal.org/requirements)您可以找到 Drupal 的要求。

他们说 ：

> Drupal 7：带有 PDO 的 MySQL 5.0.15 或更高版本，带有 PDO 的 PostgreSQL 8.3 或更高版本，SQLite 3.3.7 或更高版本

因此，如果您使用 MySQL，除了使用 PDO，您别无选择。

您可以[在此处](http://drupal.org/requirements/pdo)查看安装它的所有方法。

# ios - iOS - 在代码中创建多个手势识别器的问题

> ID：12656051
> 
> 赞同：0
> 
> 时间：2012-09-29T20:04:30.527
> 
> 标签：ios, selector, uigesturerecognizer

我正在尝试将一些视图添加到屏幕中，并且我希望它们能够被用户移动到屏幕中的任何其他位置（使用平移手势）。

我已经通过代码创建了视图及其内容，它工作正常，但手势识别器无法调用操作方法。当我触摸任何视图时（每当我尝试触发其中一个识别器时）我收到此错误并且应用程序崩溃：

`-[UIView panThisNote:]: unrecognized selector sent to instance 0x1b0500`

这是创建视图并分配所需值的代码：

```
for (int i = 1; i <= self.NOP; i++)
{
    UIView *stateView = [[UIView alloc] initWithFrame:CGRectMake((arc4random()%700)-100 , (20 * 91) + 378 + ((arc4random()%600)+200), 325 , 188)];
    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 325, 188)];
    imgView.image = [UIImage imageNamed:[NSString stringWithFormat:@"L7_stickyNote_%d.png",arc4random()%4]];
    int randomSign = ( arc4random()%2 == 0 ? 1 : -1 );
    CGAffineTransform transform = CGAffineTransformMakeRotation( randomSign * M_PI/((arc4random()%35)+2) );
    stateView.transform = transform;
    [stateView addGestureRecognizer:[[UIPanGestureRecognizer alloc] initWithTarget:stateView action:@selector(panThisNote:)]];
    UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 20, 283, 146)];
    textView.text = [self.finalStates objectAtIndex:i-1];
    textView.userInteractionEnabled = NO ;
    textView.backgroundColor = [UIColor clearColor];
    textView.textAlignment = UITextAlignmentCenter;
    textView.font = [UIFont fontWithName:@"Noteworthy" size:14];
    [stateView addSubview:imgView];
    [stateView addSubview:textView];
    [self.BGPaper addSubview:stateView];
} 
```

我不确定，但我想我知道为什么会发生这种情况（我认为这是因为在循环中使用相同名称创建的对象的内存分配）但我不知道应该如何添加 GestureRecognizers 并解决这个问题。

如果有人可以纠正我，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:13:53.307

您的手势识别器正在定位`stateView`，这是一个`UIView`，因此显然没有实现 panThisNote:。你需要重新考虑你在做什么。

# jquery - 如何仅隐藏字段值

> ID：12656054
> 
> 赞同：-1
> 
> 时间：2012-09-29T20:05:07.790
> 
> 标签：jquery, jquery-mobile, field

嗨，有什么办法不只显示以下字段的值？

我想使用该字段的值。我只想不显示它。

```
items.push('<tr><td style="border: 0px;"><input type="number" name="' + row.flatno + '" id="' + row.flatno + '" flat="' + row.flatdescription + '" building="' + row.buildingcode + '" class="field" value="' + row.previousmetric + '" valuep="' + row.previousmetric + '"/></td></tr>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:11:20.793

按字段，我假设您的意思是输入。

使输入元素隐藏，即`<input type="hidden" id="input">`. 要使用它，请给它一个 id，然后通过使用 javascript 方法中的代码来使用该值：`$("#input").val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:16:03.823

您可以使用`<input type="hidden" id="hid1" value="100" />`

这不会在屏幕上看到，但您可以访问存储在其中的值

# c++ - float fmodf(float_x, float_y) 函数，math.h，c++

> ID：12656057
> 
> 赞同：2
> 
> 时间：2012-09-29T20:05:45.683
> 
> 标签：c++, floating-point, modulus, math.h, fmodf

你好，我希望有人能帮我解决这个问题。

我正在使用 math.h 中的 float fmodf(float_x, float_y) 函数。

我可以用它正确编码，但我只是想知道有没有人知道确切代码的功能，所以我可以更好地理解它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T20:08:29.223

确切的代码取决于您的数学库（可能包含在与您的 C 库相同的包中）。如果您想查看一种实现，可以查看 glibc 实现。这是在 glibc 中使用的函数（来自 sysdeps/ieee754/flt-32/e_fmodf.c）。

```
float
__ieee754_fmodf (float x, float y)
{
    int32_t n,hx,hy,hz,ix,iy,sx,i;

    GET_FLOAT_WORD(hx,x);
    GET_FLOAT_WORD(hy,y);
    sx = hx&0x80000000;     /* sign of x */
    hx ^=sx;        /* |x| */
    hy &= 0x7fffffff;   /* |y| */

    /* purge off exception values */
    if(hy==0||(hx>=0x7f800000)||        /* y=0,or x not finite */
       (hy>0x7f800000))         /* or y is NaN */
        return (x*y)/(x*y);
    if(hx<hy) return x;         /* |x|<|y| return x */
    if(hx==hy)
        return Zero[(u_int32_t)sx>>31]; /* |x|=|y| return x*0*/

    /* determine ix = ilogb(x) */
    if(hx<0x00800000) { /* subnormal x */
        for (ix = -126,i=(hx<<8); i>0; i<<=1) ix -=1;
    } else ix = (hx>>23)-127;

    /* determine iy = ilogb(y) */
    if(hy<0x00800000) { /* subnormal y */
        for (iy = -126,i=(hy<<8); i>=0; i<<=1) iy -=1;
    } else iy = (hy>>23)-127;

    /* set up {hx,lx}, {hy,ly} and align y to x */
    if(ix >= -126)
        hx = 0x00800000|(0x007fffff&hx);
    else {      /* subnormal x, shift x to normal */
        n = -126-ix;
        hx = hx<<n;
    }
    if(iy >= -126)
        hy = 0x00800000|(0x007fffff&hy);
    else {      /* subnormal y, shift y to normal */
        n = -126-iy;
        hy = hy<<n;
    }

    /* fix point fmod */
    n = ix - iy;
    while(n--) {
        hz=hx-hy;
        if(hz<0){hx = hx+hx;}
        else {
        if(hz==0)       /* return sign(x)*0 */
            return Zero[(u_int32_t)sx>>31];
        hx = hz+hz;
        }
    }
    hz=hx-hy;
    if(hz>=0) {hx=hz;}

    /* convert back to floating value and restore the sign */
    if(hx==0)           /* return sign(x)*0 */
        return Zero[(u_int32_t)sx>>31];
    while(hx<0x00800000) {      /* normalize x */
        hx = hx+hx;
        iy -= 1;
    }
    if(iy>= -126) {     /* normalize output */
        hx = ((hx-0x00800000)|((iy+127)<<23));
        SET_FLOAT_WORD(x,hx|sx);
    } else {        /* subnormal output */
        n = -126 - iy;
        hx >>= n;
        SET_FLOAT_WORD(x,hx|sx);
        x *= one;       /* create necessary signal */
    }
    return x;       /* exact output */
} 
```

# ios - iOS：维护通信失败状态并更新到所有其他类

> ID：12656060
> 
> 赞同：0
> 
> 时间：2012-09-29T20:06:23.863
> 
> 标签：ios

我正在开发一个聊天应用程序，其中有多个视图控制器类。我还有一个通用类，在服务器和客户端之间进行通信。这个通信类永远不知道它访问了哪个视图控制器，因为所有视图控制器都出于不同的原因访问了它。在这种情况下，我需要在通信类发生此类错误时立即向所有视图控制器更新“连接失败”、“互联网故障”、“数据失败”、“聊天通信失败”等状态. 我正在考虑通过在单例类中设置标志并在其他任何地方访问它（或）具有协议（比单例非常安全）并在通信类中设置状态标志来解决，

有人可以告诉我我是否正在以正确的角度思考实施并可以通过这些方法实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:16:13.823

看一下通知，它们旨在像这样一般分发到多个实例。请参阅`NSNotificationCenter`.

正如您似乎误解的那样，通知不仅仅针对硬件事件。它们是一种用于分发信息的通用广播机制，就像委托是一种允许单个对象管理另一个对象行为的通用机制一样。

换句话说，您的通信处理程序应该发布状态更改通知，并且您的其他控制器应该都注册以接收该通知，并且可以响应但适合他们。

发布示例；当你的文件完成加载时放这个：

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"PDLAssetManagerAssetFileLoaded" object:self]; 
```

并且在加载完成时需要更新自身的每个控制器中，放置：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadComplete:) name:@"PDLAssetManagerAssetFileLoaded" object:nil]; 
```

where`loadComplete:`是将通知作为参数的方法，并执行您需要它执行的任何操作。您可以使用我在这里忽略的 userInfo 字典传递额外的数据。 **热点提示**：将通知名称字符串设为常量；为了简洁起见，我跳过了这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:24:40.317

作为 NSNotificationCenter 的替代方案，您可以使用它；

1-为您的通信类实现一个委托。

2-在请求的情况发生时实现回调（等连接失败）

3-将您的应用程序委托设置为您的通信类的委托

4- 当回调发生时，从您的应用程序委托中查看您所在的视图控制器，然后采取行动。

# python - 学习 IMAP 编程的好资源

> ID：12656062
> 
> 赞同：2
> 
> 时间：2012-09-29T20:06:42.867
> 
> 标签：python, email, imap

我正在寻找有关如何从 python 与 IMAP 服务器交互的综合教程。然而，唯一的东西似乎是[RFC 定义](https://www.rfc-editor.org/rfc/rfc3501#section-6.4.4)本身。

是否有任何好的文本或视频教程来说明 IMAP 协议？诸如什么是数据模型之类的问题？电子邮件可以具有哪些属性？什么样的操作是有效的？等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:44:41.197

正如 Pedro 的评论所说，您几乎肯定会想要使用 imaplib。以下是 Doug Hellmann 对该库的使用做出的 2 项出色而广泛的贡献：

[http://www.doughellmann.com/PyMOTW/imaplib/index.html#module-imaplib](http://www.doughellmann.com/PyMOTW/imaplib/index.html#module-imaplib)

和

[http://doughellmann.com/2007/10/01/working-with-imap-and-icalendar.html](http://doughellmann.com/2007/10/01/working-with-imap-and-icalendar.html)

第二个更多关于 icalendar 的东西，但它涵盖了第一个没有的 imap 基础。

麦克风

# php - 如何用非静态方法覆盖静态方法？

> ID：12656064
> 
> 赞同：0
> 
> 时间：2012-09-29T20:06:51.683
> 
> 标签：php, class

如何用非静态方法覆盖静态方法？

# 代码

```
class Env {
    static protected $vars = [
    ];

    static public function get_env_var($var){
        return self::$vars[$var];
    }

    static public function set_env_var($var, $value){
        self::$vars[$var] = $value;
    }
}

class Test extends Env {
    private $env_vars = [];

    public function __construct(){
        $this->env_vars = self::$vars;
    }

    public function get_env_var($var){
        return $this->env_vars[$var];
    }

    public function set_env_var($var, $value){
        $this->env_vars[$var] = $value;
    }
}

$Test = new Test(); 
```

# 错误

```
Cannot make static method Env::get_env_var() non static in class Test in 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-25T10:41:51.093

最初的问题是如何将静态方法覆盖为非静态方法。您的答案不是问题的答案，因为 child 仍然是静态的。

您不能用非静态方法覆盖静态方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:09:36.003

你不能。

如果您像`static`以前一样定义它们，那么您有正当理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T20:10:46.863

```
public static function get_env_var($var) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-16T20:36:02.223

```
class Parent
{
    public static function start()
    {
        echo 'Parent::start';
    }
}

class Child extends Parent
{
    public static function start()
    {
        parent::start();
        echo 'Child::start';
    }
} 
```

# c# - PHP => 膨胀来自 C# SharpZipLib 的 GZipped 字符串？

> ID：12656069
> 
> 赞同：4
> 
> 时间：2012-09-29T20:07:51.060
> 
> 标签：c#, php, windows-phone-7, sharpziplib

我有一个 C# 应用程序，我使用 SharpZipLib 对一个很长的字符串进行放气，然后将数据以放气字节 [] 的 Base64 字符串发送到 PHP 服务。

出于某种原因，当尝试在 PHP 端对其进行 Inflate 时，它​​返回一个错误：'gzinflate: data error'。

如何在 PHP 中对压缩后的字符串进行膨胀？

这是 C# 代码：

```
 byte[] sIn = System.Text.UTF8Encoding.UTF8.GetBytes(data);

    MemoryStream rawDataStream = new MemoryStream();
    GZipOutputStream gzipOut = new GZipOutputStream(rawDataStream);
    gzipOut.IsStreamOwner = false;

    gzipOut.Write(sIn, 0, sIn.Length);
    gzipOut.Close();

    byte[] compressed = rawDataStream.ToArray();

    // data sent to the php service
    string b64 = Convert.ToBase64String(compressed); 
```

PHP代码：

```
 $inflated = base64_decode($_POST['data']);

    // crash here
    $inflated = gzinflate($inflated); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:20:22.040

不能真正说出为什么它会失败，`GZipOutStream`尽管我猜它正在做其他事情，然后只是纯`deflate`压缩。我将您的代码更改为使用[DeflateStream](http://msdn.microsoft.com/en-us/library/0y917bht%28v=vs.80%29.aspx)，`System.IO.Compression`然后它就像一个魅力。

```
byte[] sIn = UTF8Encoding.UTF8.GetBytes("testing some shit");

MemoryStream rawDataStream = new MemoryStream();
DeflateStream gzipOut = new DeflateStream(rawDataStream, CompressionMode.Compress);

gzipOut.Write(sIn, 0, sIn.Length);
gzipOut.Close();

byte[] compressed = rawDataStream.ToArray();

// data sent to the php service
string b64 = Convert.ToBase64String(compressed); 
```

## 编辑

由于问题是关于对 Windows Phone 项目使用压缩，我也尝试使用`DeflateStream`SharpCompress[并且](http://sharpcompress.codeplex.com/)它工作得很好，你只需要更改你正在使用的命名空间，类是相同的。

# android - SQLiteConstraintException

> ID：12656076
> 
> 赞同：1
> 
> 时间：2012-09-29T20:08:36.440
> 
> 标签：android, sqlite, exception

这是我的表创建命令：

```
private static final String PINGPONG_CREATE = "create table " + TABLE_PINGPONG + "(" + COLUMN_ID_PINGPONG + " integer primary key autoincrement, " + COLUMN_CNAME +
            " text not null, " + COLUMN_DATE + " text not null, " + " text not null, " + COLUMN_LEAD + " numeric, " + COLUMN_PLACE + " text not null, " 
            + COLUMN_SET_ONE1 + " numeric, " + COLUMN_SET_ONE2 + " numeric, " + COLUMN_SET_TWO1 + " numeric, " + COLUMN_SET_TWO2 + " numeric, " + COLUMN_SET_THREE1
             + " numeric, " + COLUMN_SET_THREE2 + " numeric, " + COLUMN_SET_FOUR1 + " numeric, " + COLUMN_SET_FOUR2 + " numeric, " + COLUMN_SET_FIVE1  + " numeric, " 
            + COLUMN_SET_FIVE2 + " numeric, " + COLUMN_SET_SIX1 + " numeric, " + COLUMN_SET_SIX2 + " numeric, " + COLUMN_SET_SEVEN1 + " numeric, " + COLUMN_SET_SEVEN2
             + " numeric, " + COLUMN_RESULT1 + " numeric, " + COLUMN_RESULT2 + " numeric);"; 
```

这是我在数据库中输入“PingPongeEntry”的方法

```
public void createPingPongEntry(int lead, String challengeName, String date, String place, int set11, int set12, int set21, int set22,
            int set31, int set32, int set41, int set42, int set51, int set52, int set61, int set62, int set71, int set72, int tot1, int tot2){
        ContentValues values = new ContentValues();
        values.put(CustomSQLiteHelper.COLUMN_LEAD, lead);
        values.put(CustomSQLiteHelper.COLUMN_CNAME, challengeName);
        values.put(CustomSQLiteHelper.COLUMN_DATE, date);
        values.put(CustomSQLiteHelper.COLUMN_PLACE, place);
        values.put(CustomSQLiteHelper.COLUMN_SET_ONE1, set11);
        values.put(CustomSQLiteHelper.COLUMN_SET_ONE2, set12);
        values.put(CustomSQLiteHelper.COLUMN_SET_TWO1, set21);
        values.put(CustomSQLiteHelper.COLUMN_SET_TWO2, set22);
        values.put(CustomSQLiteHelper.COLUMN_SET_THREE1, set31);
        values.put(CustomSQLiteHelper.COLUMN_SET_THREE2, set32);
        values.put(CustomSQLiteHelper.COLUMN_SET_FOUR1, set41);
        values.put(CustomSQLiteHelper.COLUMN_SET_FOUR2, set42);
        values.put(CustomSQLiteHelper.COLUMN_SET_FIVE1, set51);
        values.put(CustomSQLiteHelper.COLUMN_SET_FIVE2, set52);
        values.put(CustomSQLiteHelper.COLUMN_SET_SIX1, set61);
        values.put(CustomSQLiteHelper.COLUMN_SET_SIX2, set62);
        values.put(CustomSQLiteHelper.COLUMN_SET_SEVEN1, set71);
        values.put(CustomSQLiteHelper.COLUMN_SET_SEVEN2, set72);
        values.put(CustomSQLiteHelper.COLUMN_RESULT1, tot1);
        values.put(CustomSQLiteHelper.COLUMN_RESULT2, tot2);

        long insertID = database.insert(CustomSQLiteHelper.TABLE_PINGPONG, null, values);

        Cursor cursor = database.query(CustomSQLiteHelper.TABLE_PINGPONG, allColumns3, CustomSQLiteHelper.COLUMN_ID_RUNNING + " = " + insertID, null, null, null, null);
        cursor.moveToFirst();
        cursor.close();
    } 
```

这就是 allColums3-String[]

```
private String[] allColumns3 = {CustomSQLiteHelper.COLUMN_ID_PINGPONG, CustomSQLiteHelper.COLUMN_CNAME, CustomSQLiteHelper.COLUMN_DATE, CustomSQLiteHelper.COLUMN_PLACE, CustomSQLiteHelper.COLUMN_LEAD,
                                    CustomSQLiteHelper.COLUMN_SET_ONE1,
                                    CustomSQLiteHelper.COLUMN_SET_ONE2, CustomSQLiteHelper.COLUMN_SET_TWO1, CustomSQLiteHelper.COLUMN_SET_TWO2, CustomSQLiteHelper.COLUMN_SET_THREE1, CustomSQLiteHelper.COLUMN_SET_THREE2,
                                    CustomSQLiteHelper.COLUMN_SET_FOUR1, CustomSQLiteHelper.COLUMN_SET_FOUR2, CustomSQLiteHelper.COLUMN_SET_FIVE1, CustomSQLiteHelper.COLUMN_SET_FIVE2, CustomSQLiteHelper.COLUMN_SET_SIX1,
                                    CustomSQLiteHelper.COLUMN_SET_SIX2, CustomSQLiteHelper.COLUMN_SET_SEVEN1, CustomSQLiteHelper.COLUMN_SET_SEVEN2, CustomSQLiteHelper.COLUMN_RESULT1, CustomSQLiteHelper.COLUMN_RESULT2}; 
```

现在在线`long insertID = database.insert(CustomSQLiteHelper.TABLE_PINGPONG, null, values);`我得到了 SQLiteConstraintException，我不知道为什么。它说：

```
09-29 19:55:13.151: E/Database(1609): Error inserting set51=0 set52=0 set41=3 set61=0 lead=0 set72=0 set71=0 set62=0 date=29-09-2012 result1=4 result2=0 name=pingpong set32=1 set31=3 set42=1 place=hier set22=1 set21=3 set12=1 set11=3 
```

（我在这里也很困惑，为什么没有插入值的顺序）

我在这里阅读了一些关于这个主题的问题，但是所有的建议都遵循：主键是自动递增的，而且此时我试图插入记录，数据库是空的。

我有 2 种插入方法，`FootBallEntrys`并`Games`以此类比，一切正常。那么为什么它不在这里创建一个唯一的 uid 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:19:41.573

如果你得到一个 ConstraintException，你就违反了表中的一些约束。您拥有的唯一规则是“主键”，它在后台创建“唯一”约束。确保您没有尝试在“COLUMN_ID_PINGPONG”列中插入已经存在的值。

# javascript - JavaScript 中可调用对象的构造函数

> ID：12656079
> 
> 赞同：12
> 
> 时间：2012-09-29T20:08:46.207
> 
> 标签：javascript, constructor, callable

如何在 JavaScript 中为可调用对象创建构造函数？

我尝试了各种方法，例如以下方法。那里的示例只是实际对象的缩短示例。

```
function CallablePoint(x, y) {
    function point() {
        // Complex calculations at this point
        return point
    }
    point.x = x
    point.y = y
    return point
} 
```

这首先有效，但它创建的对象不是 的实例`CallablePoint`，因此它不会复制属性`CallablePoint.prototype`并说`false`on `instanceof CallablePoint`。是否可以为可调用对象创建工作构造函数？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-14T14:59:14.117

事实证明这实际上是可能的。当函数被创建时，无论是使用`function`语法还是`Function`构造函数，它都会获得内部`[[Call]]`属性。它不是函数本身的属性，而是任何函数在构造时获得的属性。

虽然这仅意味着任何 with`[[Call]]`只能`Function`在它被构造时才存在（嗯，有一个例外——`Function.prototype`它本身不继承自`Function`），但这并不意味着它以后不能成为其他东西，同时保留`[[Call]]`属性。好吧，前提是您的浏览器不是 IE < 11。

允许改变魔法的东西`__proto__`来自 ES6，已经在许多浏览器中实现。`__proto__`是一个包含当前原型的神奇属性。通过更改它，我可以创建从非`Function`.

```
function CallablePoint(x, y) {
    function point() {
        // Complex calculations at this point
        return point
    }
    point.__proto__ = CallablePoint.prototype
    point.x = x
    point.y = y
    return point
}
// CallablePoint should inherit from Function, just so you could use
// various function methods. This is not a requirement, but it's
// useful.
CallablePoint.prototype = Object.create(Function.prototype) 
```

首先，构造函数`CallablePoint`make a `Function`(只`Function`允许 s 以`[[Call]]`属性开头。接下来，我更改了它的原型，所以它会继承`CallablePoint`。此时我有一个不继承自的函数`Function`（有点令人困惑）。

在我为 s 定义了构造函数之后`CallablePoint`，我将原型设置`CallablePoint`为`Function`，所以我`CallablePoint`继承了`Function`。

这样，`CallablePoint`实例具有原型链：`CallablePoint -> Function -> Object`，同时仍然可以调用。此外，由于该对象是可调用的，因此根据规范，它`typeof`等于`'function'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:04:35.587

假设您追求`__call__`Python 中可用的功能并且通常被称为“可调用对象”，我将写下我的答案。“可调用对象”在 JavaScript 上下文中听起来很陌生。

我已经尝试了几个 JavaScript 引擎，但是我尝试过的引擎都不允许你调用对象，即使你继承自`Function`. 例如：

```
function Callable(x) {
...     "use strict";
...     this.__proto__ = Function.prototype;
...     this.toString = function() { return x; };
... }
undefined
> var c = new Callable(42);
var c = new Callable(42);
undefined
> c;
c;
{ toString: [function] }
> c(42);
c(42);
TypeError: Property 'c' of object #<Object> is not a function
    at repl:1:1
    at REPLServer.eval (repl.js:80:21)
    at repl.js:190:20
    at REPLServer.eval (repl.js:87:5)
    at Interface.<anonymous> (repl.js:182:12)
    at Interface.emit (events.js:67:17)
    at Interface._onLine (readline.js:162:10)
    at Interface._line (readline.js:426:8)
    at Interface._ttyWrite (readline.js:603:14)
    at ReadStream.<anonymous> (readline.js:82:12)
> c instanceof Function;
c instanceof Function;
true
c.apply(null, [43]);
TypeError: Function.prototype.apply was called on 43, which is a object and not a function
    at Function.APPLY_PREPARE (native)
    at repl:1:3
    at REPLServer.eval (repl.js:80:21)
    at repl.js:190:20
    at REPLServer.eval (repl.js:87:5)
    at Interface.<anonymous> (repl.js:182:12)
    at Interface.emit (events.js:67:17)
    at Interface._onLine (readline.js:162:10)
    at Interface._line (readline.js:426:8)
    at Interface._ttyWrite (readline.js:603:14)
> 
```

这是 V8 (Node.js)。即你可能有一个对象，它正式从函数继承，但它是不可调用的，我找不到一种方法来说服运行时它可以被调用。我在 Mozilla 的 JavaScrip 实现中也有类似的结果，所以我认为它必须是通用的。

然而，自定义类型在 JavaScript 中的作用微乎其微，所以我认为无论如何你都不会错过它。但是，正如您已经发现的那样，您可以在函数上创建属性，就像在对象上一样。所以，你可以做到，只是用一种不太方便的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:40:43.410

我不确定您是否知道`CallablePoint`如果您使用`new`关键字，您的对象将只是一个实例。通过将其命名为“可调用”，您让我认为您*不想*使用`new`. 无论如何，有一种方法可以强制返回一个实例（感谢提示，[Resig](http://ejohn.org/blog/simple-class-instantiation/)）：

```
function CallablePoint(x, y) {
    if (this instanceof CallablePoint) {
        // Your "constructor" code goes here.
        // And don't return from here.
    } else {
        return new CallablePoint(x, y);
    }
} 
```

`CallablePoint`不管它是如何被调用的，这将返回一个实例：

```
var obj1 = CallablePoint(1,2);
console.log(obj1 instanceof CallablePoint); // true

var obj2 = new CallablePoint(1,2);
console.log(obj2 instanceof CallablePoint); // true 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T20:13:54.227

如果您希望`CallablePoint()`构造函数返回 CallablePoint 类型的对象，那么您可以执行以下操作，其中 CallablePoint 对象包含一个点作为对象的属性，但仍然是 CallablePoint 对象：

```
function CallablePoint(x, y) {
    this.point = {};
    this.point.x = x
    this.point.y = y
} 
```

或者，如果您真正想做的是创建一个返回 CallablePoint 对象的函数，那么您可以创建一个因子函数：

```
function CallablePoint(x, y) {
    this.point = {};
    this.point.x = x
    this.point.y = y
}

function makeCallablePoint(x, y) {
   return new CallablePoint(x,y);
} 
```

# c++ - 重载 = 运算符悖论

> ID：12656080
> 
> 赞同：0
> 
> 时间：2012-09-29T20:08:49.000
> 
> 标签：c++, operator-overloading

所以说我有

```
Class Person{
private:
    Person* _friends[10];
public:
//All methods listed below. Except for the main one, that is.
}
Person::Person()
{
    for(int i=0; i < 10; i++)
        _friends[10] = 0;
}
Person* Person::getFriends()
{
    return _friends;
}
void Person::addFriend(Person* buddy) //Assume it's fully functional.
{
    //code for adding a friend.
}
void Person::operator=(Person& p)
{
    for(int i = 0; i < 10; i++)
        _friends[i] = p.getFriends()[i];
}

int main()
{
    int user1size = 10;
    int user2size = 30;
    Person* user1 = new Person[10];
    Person* user2 = new Person[10];

    //assume these 4 next lines will be repeated with different values a few more times, in more intricate ways, by the magic of for/while loops.
    user1[0] = new Person();
    user2[9] = new Person();
    user1[0].addFriend(user[9]);
    user1[9].addFriend(user[0]); 

    for(int i = 0; i < user1size; i++)
    {
        user2[i] = user1[i]; //Here is where the paradox starts.
    }

    delete [] user1;
return 0;
} 
```

那么好吧，我的问题是它在哪里停止？我的意思是，我的意图是只复制对 _friends 数组中的 Person 对象的引用，但我知道这可能几乎不可能，所以解决方案也是继续“复制”这些 Person 对象，而这些对象也有朋友列表，这些朋友也有朋友等等。我知道它必须在某个地方停止，但我真的不希望它一直通过，更不用说我不希望某些 Person 对象被过度复制或陷入无限循环。那么如何解决这个悖论呢？

PS：如果我的代码有很多错误或者很糟糕，请理解。我在旅途中做到了，我打算用它来让你们都了解总体思路。

PS2：我不能使用除 之外的任何其他库`<ostream>`，是的，这对我来说很糟糕。

PS3：任何你可以提供给我阅读的网站/文章都会让我很高兴！事先谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:24:08.393

好吧，首先，您可能想要做的只是照原样复制指针。

为什么？因为如果人“A”有一个朋友“F”，而人“B”也有朋友“F”，那么他们可能会引用同一个人“F”对象。如果您按照您的建议进行深度复制，并将 A 复制到 A2 并将 B 复制到 B2，您将总共拥有三个不同的人“F”对象 - 原始对象，从 A 和 B 引用，副本从A2，以及从 B2 引用的另一个副本。

当然，这可能是您想要的；我不知道。但在很多情况下并非如此。

整个指针设置都可以正常工作，尽管您必须小心内存管理：您很容易得到指向不再存在的人的指针

如果您确实想要进行深度复制（“深度复制”是复制引用对象的副本），您必须自己找到循环，例如通过跟踪您已经复制的对象。我现在不会尝试绘制这样的东西，因为它可能会变得有些复杂，而且我认为您实际上并不想深度复制您的“人”对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:38:37.150

没有悖论，因为您没有进行深度复制。查看此声明：

```
Person* _friends[10]; 
```

这表示 _friends 是一个指向对象的**指针**数组。在这个数组`Person`中正确复制**不会**调用数组中的每一个。`operator=()`**`operator=()``Person`**

 **但是，以下函数将无法编译：

```
Person* Person::getFriends()
{
    return _friends;
} 
```

返回类型和_friends的类型不匹配。这就是为什么发布可以编译并准确重现您遇到的问题的代码很重要的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T20:30:46.477

IIUC，您想知道如何处理对象图的副本，并且您想在图中保持它们的连接。假设 Joe 有一个朋友 Bill，Bill 有一个朋友 Joe，并且您复制 Joe（让我们将副本命名为 Joe'），您希望 Joe' 也有一个朋友，他（反射性地）将 Joe' 作为朋友。这个问题通常在编写编译器时出现。

真正做到这一点的最简单方法是永远不要做任何副本。让对象驻留在它们的内存位置，一直使用指向它们的引用/指针并破坏性地修改它们。

但是，有时需要复制对象，可能会修改图形（在编译器场景中，这可能意味着例如内联函数）。在这种情况下，您可以使用简单的图遍历算法 DFS，大致如下：

```
// o will be the object to copy
// m will be a map (old object -> new object)
copy(object* o, map& m) {
  if(m.contains(o))
    return m[o];
  object* n = allocate new object;
  m[o] = n; // set the map beforehand, in case we have some back edges from this subtree
  n.subobject = copy(o.subobject, m); // for each subobject, or relation. In your case, friend
  return n;
} 
```

如果您只想将某个对象移动到新位置，则可以遍历整个图形并覆盖指针。如果您的图表中也有后边（即不仅是“朋友”，还有“我是朋友的人”），这会容易得多。尽管如此，最好的选择还是避免它。这意味着不要创建`Person`可能会增长的 s 数组并生成 s 数组`Person*`，以便 real`Person`仍然保留在相同的内存位置。**

# html - 100% 宽度弄乱了填充

> ID：12656082
> 
> 赞同：0
> 
> 时间：2012-09-29T20:09:11.733
> 
> 标签：html, css, padding

在`.SalesPanel`课堂上，我将其设置为 100% 宽度。我注意到它与我在`content`id 中设置的右侧的填充重叠。

请参阅：http: [//jsfiddle.net/CBAE7/9/](http://jsfiddle.net/CBAE7/9/)并查看右侧填充并将其与左侧填充进行比较。

是什么原因造成的以及如何解决？

此外，即使使用 100% 宽度，我也期待 1 行上有 3 个 div .. 如何解决？

**HTML：**

```
<div id='content'>
  <div class='SalesPanel'> One </div>
  <div class='SalesPanel'> Two </div>
  <div class='SalesPanel'> Three </div>
</div>​ 
```

**CSS：**

```
#content {
  width: 700px;
  padding: 8px;
  overflow: hidden;
  background-color: white;
  border: 1px solid #C8CCD5;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
}

.SalesPanel {
  border:1px solid #dddddd;
  height:30px;
  float:left;
  width: 100%
}
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:16:44.353

更改[`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)属性：

```
.SalesPanel {
  /* your stuff */
  -moz-box-sizing: border-box;
       box-sizing: border-box;
} 
```

`box-sizing`现代浏览器的初始值为`content-box`. 这意味着这`width: 100%`只会影响内容，不计算填充和边框（您的情况）。通过将此属性更改为`box-sizing`您将其放入容器中。内容的实际宽度将为[`calc(100% - 2px)`](https://developer.mozilla.org/en-US/docs/CSS/calc).

它是 CSS 3 属性，受 IE 8+ 和所有其他现代浏览器支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:18:35.883

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/CBAE7/11/)**。

```
#content {
  width: 700px;
  padding: 8px;
  background-color: white;
  border: 1px solid #C8CCD5;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
}
.SalesPanel {
  border:1px solid #dddddd;
  height:30px;
  width: 33%;
  display:inline-block;
  margin:0;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:12:48.287

此外，当您使用其中的 3 个静态时，33% 的宽度也不会受到伤害。

```
.SalesPanel {
  border:1px solid #dddddd;
  height:30px;
  float:left;
  width: 33%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T22:29:15.490

**试试这个代码：**

```
.SalesPanel {
    border:1px solid #dddddd;
    height:30px;
    float:left;
    width: 33%;
    display:inline-block;
} 
```

# php - PHP部分相同的命名空间冲突

> ID：12656088
> 
> 赞同：1
> 
> 时间：2012-09-29T20:09:35.853
> 
> 标签：php, namespaces

我有几个 PHP 类是这样定义的：

**模块1模型.php**

```
namespace App\Modules\module1\models;

class module1Model
{
    //... methods etc.
} 
```

**模块2模型.php**

```
namespace App\Modules\module2\models;

class module2Model
{
    //... methods etc.
} 
```

在其他一些类中，我想使用这些名称空间。所以我在页面顶部放置了以下几行：

**someClass.php**

```
namespace App\Modules\someClass\controllers;

use App\Modules\module1\models; // Works
use App\Modules\module2\models; // Fails

use Core\Logger\TextLogger; // Works

class somceClass
{
    //... methods etc.
} 
```

所以在`someClass`我试图`use`同时`module1`和`module2`模型。从技术上讲，它们不在同一个命名空间中。只是部分。但是为什么它会给我一个错误呢..?

什么是解决这个问题的好方法？我知道我可以将其添加到第二行：

```
use App\Modules\module2\models as module2; // Now works 
```

但我真的不喜欢这样做，因为我在所有其他课程中都没有这样做（使用`as`关键字）。这感觉太不协调了。

有没有其他方法可以使这项工作..？还是我真的被迫`as`在我的所有声明中使用关键字`use`...？:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:55:44.357

我猜你想使用模型类，而不是它们的整个命名空间。如果是这样，那么以下只是有效的：

```
use App\Modules\module1\models\module1Model;
use App\Modules\module2\models\module2Model; 
```

例子：

```
namespace App\Modules\module1\models {
    class module1Model
    {
        //... methods etc.
    }
}

namespace App\Modules\module2\models {
    class module2Model
    {
        //... methods etc.
    }
}
namespace App\Modules\someClass\controllers {

use App\Modules\module1\models\module1Model;
use App\Modules\module2\models\module2Model;

use Core\Logger\TextLogger;

    class somceClass
    {
        //... methods etc.
    }
} 
```

# android - 尝试在 Restlet 中获取序列化对象时出现 NullPointerException

> ID：12656091
> 
> 赞同：0
> 
> 时间：2012-09-29T20:10:01.390
> 
> 标签：android, object, serialization, nullpointerexception, restlet

我正在 Glassfish 服务器内开发一个 restlet 服务器，它将接收来自 Android 客户端的请求。

基于[Hello World 应用程序](http://www.restlet.org/documentation/2.0/firstSteps)和[对象序列化教程](http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/303-restlet/version/11)

这是一些代码：

* * *

服务器端

我的用户.java

```
package com.server.common;

import java.io.Serializable;

public class MyUser implements Serializable {

private static final long serialVersionUID = 1L;
private String username;

public MyUser() {}

public MyUser(String username) {
    super();
    this.username = username;
}

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}
} 
```

用户资源.java

```
package com.server.common;

import org.restlet.resource.Get;

public interface UserResource {
@Get
public MyUser getUser();
} 
```

用户服务器资源.java

```
package com.server;

import org.restlet.resource.Get;
import org.restlet.resource.ServerResource;
import com.server.common.MyUser;
import com.server.common.UserResource;

public class UserServerResource extends ServerResource implements UserResource {

@Get
public MyUser getUser() {
    MyUser u = new MyUser("Nickname from server");
    return u;
}
} 
```

* * *

客户端

*   包内相同的 UserResource.java 和 MyUser.java`com.client.common`

*   MainActivity.java 提取

    ```
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ClientResource cr = new ClientResource(
            "http://MYSERVERIP:8080/FamilyWeb/username");
    resource = cr.wrap(UserResource.class);

    try {
        MyUser u = resource.getUser();
        Log.w("success",u.toString());
    } catch (Exception e) {
        e.printStackTrace();
    } 
    ```

* * *

日志猫

```
09-29 22:31:52.650: W/System.err(1409): java.lang.NullPointerException
09-29 22:31:52.650: W/System.err(1409):     at com.dimunoz.family.tablet.MainActivity.onCreate(MainActivity.java:33)
09-29 22:31:52.650: W/System.err(1409):     at android.app.Activity.performCreate(Activity.java:4465)
09-29 22:31:52.650: W/System.err(1409):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-29 22:31:52.660: W/System.err(1409):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-29 22:31:52.660: W/System.err(1409):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-29 22:31:52.660: W/System.err(1409):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-29 22:31:52.660: W/System.err(1409):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-29 22:31:52.660: W/System.err(1409):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-29 22:31:52.660: W/System.err(1409):     at android.os.Looper.loop(Looper.java:137)
09-29 22:31:52.660: W/System.err(1409):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-29 22:31:52.660: W/System.err(1409):     at java.lang.reflect.Method.invokeNative(Native Method)
09-29 22:31:52.660: W/System.err(1409):     at java.lang.reflect.Method.invoke(Method.java:511)
09-29 22:31:52.660: W/System.err(1409):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-29 22:31:52.660: W/System.err(1409):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-29 22:31:52.660: W/System.err(1409):     at dalvik.system.NativeStart.main(Native Method) 
```

如果我更改 getUser() 方法以返回 String 对象并进行相应更改，我的 Android 客户端会收到响应，但如果我运行上面显示的代码，我会收到 NullPointerException。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:06:20.420

问题是服务器和客户端的公共文件包的名称不同，所以解决方法是重命名它们为相同的名称。

在[Restlet 邮件列表](http://restlet.tigris.org/ds/viewForumSummary.do?dsForumId=4447)中，一位版主 Thierry Boileau 回答了我为什么他们应该有相同的名字：

> 服务器和客户端部分之间的公共类（例如被序列化/反序列化的 bean 对象的类）必须位于相同的包中。原因是序列化/反序列化过程利用了约定，特别是关于 bean 类的完整路径的约定在 JSON 表示中被引用。所有其他类（例如 ClientResource）、带注释的接口都可以位于客户端/服务器项目之间的不同包中。

# python - Python：有什么方法可以监控 Windows 中的拖放事件？

> ID：12656094
> 
> 赞同：2
> 
> 时间：2012-09-29T20:10:46.337
> 
> 标签：python, winapi

我正在用 Python 设计一个软件。我想要一种方法来监视 Windows 操作系统中从一个 Windows 资源管理器到另一个 Windows 资源管理器的拖放（文件/文件夹）事件，并获得删除的文件路径列表作为回报，然后自动运行一些功能。
**实际上我想用我自己的python脚本方法覆盖Windows os拖放事件方法的默认操作方法**
这可能在Python中吗？

# pascal - 如何从 Free Pascal IDE 将代码粘贴到任何地方？

> ID：12656095
> 
> 赞同：1
> 
> 时间：2012-09-29T20:10:47.207
> 
> 标签：pascal, freepascal

我正在开发 Free Pascal IDE。当我想分享我的 Pascal 代码时，我遇到了问题。我无法粘贴复制到任何地方的代码。有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:28:20.317

您可以使用[Pastie](http://pastie.org/)或[Pastebin](http://pastebin.com/)或[gist](https://gist.github.com/)。这是第一个想到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T11:08:17.373

那么使用另一个 IDE 呢？我刚刚开始使用名为 Geany 的文本编辑器/IDE 多语言，它比免费的 pascal 好得多。试一试，也许您必须先配置它，但是当您完成所有设置后，它是一个强大的工具，您可以添加主题或修改颜色/文本类型/等。

# c++ - 在对象中使用数组

> ID：12656096
> 
> 赞同：-4
> 
> 时间：2012-09-29T20:10:51.263
> 
> 标签：c++, arrays

我正在使用用户输入来确定我的数组的大小。该数组将被另一个对象使用。此外，这将是循环的，因此用户可能会更改数组大小。最好的方法是什么？而且由于数组是由对象使用的，是在构造函数中传递数组还是传递大小并在类中创建数组更好？我在想某种新的删除数组组合？我在这里不正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:12:51.310

对于通用的、类似动态数组的需求，最好的选择可能是`std::vector`类。只需在需要的地方创建它，我会在课堂上说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:13:50.910

std::vector 是标准模板库提供的可调整大小的数组。为拿到它，为实现它，

```
#include <vector> 
```

互联网上有很多关于如何使用矢量的资料，例如[http://www.cplusplus.com/reference/stl/vector/](http://www.cplusplus.com/reference/stl/vector/)。如果没有更多信息，一个好的开始是在容器内部使用 std::vector。

# c++ - C++ vs Python 服务器端性能

> ID：12656098
> 
> 赞同：3
> 
> 时间：2012-09-29T20:11:12.637
> 
> 标签：c++, python, performance, cpu-speed

我必须开发一个必须建立大量连接才能接收和发送小文件的服务器。问题是 C++ 的性能提升是否值得花时间开发代码，或者是否更好地使用 Python 并不时调试代码以加快速度。也许是一个有点抽象的问题，没有给出一些联系，但我真的不知道。至少 10,000 个连接/分钟以更新客户端状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T20:15:29.163

有了这么多的连接，您的服务器将受到 I/O 限制。C 和 C++ 等语言与 Python 和（例如）Ruby 等语言之间经常被引用的速度差异在于解释器和装箱开销会减慢计算速度，而不是 I/O 领域。

use 不仅可以很好地合理利用并发性（通过进程和线程，GIL 在 I/O 期间释放，因此对于 I/O 绑定的程序来说并不重要），还有大量的异步服务器。此外，Web 服务器通常具有`mod_wsgi`比 C 和 C++ 更好的 Python 集成（例如，对于 Apache）。这使您免于编写自己的服务器循环、套接字管理等，而这些您可能不会像主要服务器那样做。这是假设我们谈论的是 Web 服务，而不是 Apache 等无法开箱即用的更神秘的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:14:12.823

我预计服务器时间将由 I/O 网络、磁盘等主导。你想证明 Python 程序的 CPU 消耗是有问题的*，并且*你已经掌握了所有低悬的 CPU水果之前考虑改变。

# mysql - 在查询期间失去与 MySQL 服务器的连接。当其他查询正常工作时

> ID：12656100
> 
> 赞同：1
> 
> 时间：2012-09-29T20:11:25.403
> 
> 标签：mysql, database-connection, freeze

每次运行以下查询时，服务器都会冻结，取消查询后，我会收到以下错误消息：

`[Err] 2013 - Lost connection to MySQL server during query`

我的查询：

```
UPDATE products.products
SET state = 'BOUGHT'
WHERE
    id IN (
        SELECT
            s.aid
        FROM
            log.log
        LEFT JOIN shop.shop s ON (s.id = log.who)
        WHERE
            product_id = 171054
        AND action = 'BUY'
        GROUP BY
            log.`who`
        HAVING
            COUNT(log.who) > 2
    ); 
```

有人可以帮我吗？其他查询和两台服务器每秒生成数百个查询并且它们没有冻结，除此查询外一切都运行顺利。

# performance - 在 InsertControl 过程之前捕获消息

> ID：12656104
> 
> 赞同：0
> 
> 时间：2012-09-29T20:12:14.197
> 
> 标签：performance, delphi

我尝试在运行时创建大量 TWinControl (100 000)。它去得很快。但是，如果我将类型更改为 TCustomControl（它具有有用的属性 Canvas），它会变得非常慢。原因是，TCustomControl 的构造函数也创建了 TControlCanvas，它显着减慢了进程。我的想法是创建 TWinControl 的后代，当它被插入表单时，它只会创建 TControlCanvas。（这个巨大的数字不是隐式插入的）

是否可以在插入后代之前（或之后）捕获事件？

感谢您的想法

# c++ - C++静态对象类函数

> ID：12656107
> 
> 赞同：0
> 
> 时间：2012-09-29T20:12:39.190
> 
> 标签：c++, class, object, static

一些代码：请参阅下面的 myClass 类。它有一个构造函数和一个公共递归函数 find。请看代码：

```
#include <iostream>
using namespace std;

class myClass{
    public:

    myClass() {
        //do stuff
    }

    int find(int i) {
        static int j = 10;

        if (i > 15)
            return i;

        j = j + 1;
        return i * find(j + 1);
    }
};

int main() 
{

    myClass mC1 ,mC2;

    cout<< " 1.... return value = "<< mC1.find(10);
    cout<< " \n 2... return value = "<< mC2.find(10);

    return 1;
} 
```

输出：

```
1.... return value = 5241600 
2.... return value = 170 
```

上面的程序有一个类 myclass 有一个函数 find .. “find” 函数有一个 variabe 。这是静态的，因为我想要一个递归函数。问题是静态变量具有程序的生命并绑定到类。

但是我希望静态是*对象*特定的而不是*类*范围。我希望这两个函数调用都返回相同的值。

简而言之，如何在类函数中创建一个静态变量，使其成为每个对象而不是整个类......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:27:32.210

你需要一个成员变量吗？

希望以下代码有所帮助。

最好的问候山姆

```
class myClass{
  public 
  myClass() {
   m_j = 10;
  }

  private:
   int m_j; // private member variable for find algorithm; 

  int find(int i) {
    if(i>15)
      return i;
    m_j= m_j+1;
    return i * find(m_j+1);

   } 
```

};

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:29:45.813

如果您想要每个对象变量，则需要使其成为相应对象的成员。无法在函数内声明特定于对象的变量。无论如何，您使用 use`static`成员的方式都可以更改为非静态，即，您将获得必要的上下文：使函数非静态并根据需要将数据存储在对象中。

也就是说，仅仅因为函数是递归的并不意味着它需要任何类型的`static`上下文。通常，所有必要的上下文都作为参数传递给递归函数，在这种情况下，系统会将必要的状态保留在堆栈上。由于堆栈的大小相对有限，因此您要确保在具有深度调用堆栈的递归函数中不需要太多上下文。

由于您可能不想要求用户传递一些内部上下文，`find()`因此接口中的函数可能只是委托给提供必要上下文的递归函数。例如：

```
int find(int j, int i) {
    if (15 < i) {
        return i;
    }
    ++j;
    return i * find(j, j + 1);
}
int find(int value) {
    return find(10, value);
} 
```

（我不确定我是否得到了正确的逻辑，因为我不太明白该函数的用途......）。

# ruby - 在 Arch Linux 上使用 RVM 单用户模式安装 ruby 时出错

> ID：12656110
> 
> 赞同：1
> 
> 时间：2012-09-29T20:13:17.893
> 
> 标签：ruby, rvm

我刚刚通过推荐的安装脚本以单用户模式在 ArchLinux x64 上安装了 RVM

`curl -L https://get.rvm.io | bash -s stable`

我还安装了中列出的所有要求`rvm requirements`

但是，我在实际安装任何版本的 ruby​​ 时都遇到了麻烦。并得到以下错误：

```
arch:~ % rvm install 1.9.3
No binary rubies available for: ///ruby-1.9.3-p194.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Fetching yaml-0.1.4.tar.gz to /home/christopher/.rvm/archives
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100  460k  100  460k    0     0   702k      0 --:--:-- --:--:-- --:--:--  767k
Extracting yaml-0.1.4.tar.gz to /home/christopher/.rvm/src
Prepare yaml in /home/christopher/.rvm/src/yaml-0.1.4.
Configuring yaml in /home/christopher/.rvm/src/yaml-0.1.4.
Error running ' ./configure --prefix=/home/christopher/.rvm/usr ', please read /home/christopher/.rvm/log/ruby-1.9.3-p194/yaml/configure.log
Compiling yaml in /home/christopher/.rvm/src/yaml-0.1.4.
Error running 'make', please read /home/christopher/.rvm/log/ruby-1.9.3-p194/yaml/make.log

Please note that it's required to reinstall all rubies:

    rvm reinstall all --force

Installing Ruby from source to: /home/christopher/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
ruby-1.9.3-p194 - #extracting ruby-1.9.3-p194 to /home/christopher/.rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #extracted to /home/christopher/.rvm/src/ruby-1.9.3-p194
Skipping configure step, 'configure' does not exist, did autoreconf not run successfully?
ruby-1.9.3-p194 - #compiling
Error running 'make', please read /home/christopher/.rvm/log/ruby-1.9.3-p194/make.log
There has been an error while running make. Halting the installation. 
```

日志文件如下：

```
arch:~ % cat ~/.rvm/log/ruby-1.9.3-p194/yaml/configure.log 
__rvm_log_command:32: permission denied: 
arch:~ % cat ~/.rvm/log/ruby-1.9.3-p194/yaml/make.log     
make: *** No targets specified and no makefile found.  Stop.
arch:~ % cat ~/.rvm/log/ruby-1.9.3-p194/make.log     
make: *** No targets specified and no makefile found.  Stop. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:08:49.030

我在两台运行 Mac OS 10.6.8 的机器上遇到了同样的问题。

我能够通过手动 cd-ing 进入目录并运行 ./configure 来解决 yaml 问题。例如：

```
$ cd /home/christopher/.rvm/src/yaml-0.1.4
$ ./configure --prefix=/home/christopher/.rvm/usr 
```

在运行“rvm install 1.9.3”几次之后，它选择了我所做的配置，并且不再为 yaml 问题而困扰我。

我还能够 cd 进入 ruby​​ 目录并配置和制作它。例如：

```
$ /home/christopher/.rvm/src/ruby-1.9.3-p194
$ ./configure
$ make
$ make install 
```

...但是，这并没有导致 rvm 接收它。我猜我错过了一些必要的命令行选项和标志。

但是考虑到我能够做到的那样，在我看来，这似乎是一个 rvm 错误。

# spring - 另一个控制器方法中的 Spring 预处理请求

> ID：12656111
> 
> 赞同：0
> 
> 时间：2012-09-29T20:13:30.677
> 
> 标签：spring, validation, spring-mvc, modelandview

在我的一个控制器中，我有：

```
@RequestMapping(value = "search", method = RequestMethod.GET)
public ModelAndView searchUsers(HttpSession session, HttpServletRequest request) {
    UiUserSearchCriteria userSearchCriteria = (UiUserSearchCriteria) session
            .getAttribute("UsersController_userSearchCriteria");

    if (null == userSearchCriteria) {
        userSearchCriteria= defaultUserSearchCriteria;
    }

    // Here be dragons
    return searchUsers(userSearchCriteria, new BeanPropertyBindingResult(userSearchCriteria,
            "userSearchCriteria"), session, request);
}

@RequestMapping(value = "search", method = RequestMethod.POST)
public ModelAndView searchUsers(
        @ModelAttribute("userSearchCriteria") UiUserSearchCriteria userSearchCriteria,
        BindingResult bindingResult, HttpSession session, HttpServletRequest request) {

    userSearchCriteriaValidator.validate(userSearchCriteria, bindingResult);
    if (bindingResult.hasErrors()) {
        // Here be dragons
        return new ModelAndView("searchUsers");
    }

    ModelAndView result = new ModelAndView("redirect:listUsers");
    PagedListHolder<UiUser> userList = new PagedListHolder<UiUser>(
            usersService.searchUsers(userSearchCriteria));

    userList.setPageSize(10);
    userList.setSort(defaultSort);
    userList.resort();
    session.setAttribute("UsersController_userList", userList);
    session.setAttribute("UsersController_userSearchCriteria", userSearchCriteria);

    return result;
} 
```

逻辑很简单：当用户导航到搜索页面时，我实际上使用默认条件执行搜索并返回一个列表（这是需求变化的结果，呵呵）。

我偶然在这段代码中发现了一个问题。当默认搜索条件无效时，行为是：导航到搜索 -> 使用无效条件填充搜索条件 -> 调用另一个方法（第二个，使用 POST）-> 执行验证 ->`errors`不为空，因此返回`searchUsers`视图。但`BindingResult bindingResult`实际上是合成的，来自之前的方法 ( `new BeanPropertyBindingResult(userSearchCriteria, "userSearchCriteria")`)。所以我得到了一个错误`No binding result is bound to session`（我同意这一点）。

我不能在 GET 方法中使用`@ModelAttribute`和`BindingResult`参数（由 Spring 绑定）对来与它们一起调用 POST。

那么什么是最好的解决方案呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:50:00.690

我认为您可以`new BeanPropertyBindingResult(userSearchCriteria, "userSearchCriteria")`通过这种方式简单地将您的与适当的 Spring 模型属性名称相关联：

```
 BindingResult bindingResult = new BeanPropertyBindingResult(userSearchCriteria, "userSearchCriteria")

model.addAttribute(BindingResult.MODEL_KEY_PREFIX + "userSearchCriteria", bindingResult); 
```

这是绑定特定模型属性的验证结果的默认 Spring MVC 行为，应该可以帮助您避免`No binding result..`错误

# grep - 在一个 grep 调用中组合多个 grep

> ID：12656112
> 
> 赞同：1
> 
> 时间：2012-09-29T20:13:45.263
> 
> 标签：grep

我有一个脚本，我必须在其中检查一个进程是否按其名称运行，并且我正在使用`ps`and来执行它`grep`。问题是我必须对许多事情进行 grep 以避免发现误报。

到目前为止，我有一个`grep`如下所示的链：

`ps -ef | grep -i $process_name | grep -i perl | grep -v do_all | grep -v grep`

四个`grep`s。其中三个是为了避免误报。

我想知道是否有办法避免这种“管道链”并使用单个`grep`来达到相同的结果。

尽管你们中的一些人可能会回答说有更简洁的方法可以找出进程是否存在，但我希望同样能够回答这个问题，只是为了更好地理解`grep`命令的用法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:00:14.380

没有真正的理由避免将它们链接起来，是吗？

如果你真的想要，你可以将它们与 | 在 egrep 中：

```
ps -ef | egrep -i "$process_name|perl" |  egrep -v 'do_all|grep' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:04:27.470

这是一种使用方法`GNU awk`：

```
ps -ef | awk -v process="$process_name" 'BEGIN { IGNORECASE=1 } $0 ~ process && /perl/ && !/do_all/' 
```

# android - 我无法在 android 的另一个类中设置文本（）

> ID：12656116
> 
> 赞同：0
> 
> 时间：2012-09-29T20:14:04.430
> 
> 标签：android, class, settext

我有一个`TextView`id `android:id="@+id/yazi"`，我有一个内置的按钮`android:OnClick="gonderB"`

我可以编译这段代码：

```
package com.seri.bir;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {
     Bilmez b;
     TextView t;
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        b = new Bilmez();
        t = (TextView) findViewById(R.id.yazi);
    }
    public void gonderB (View v,TextView t,Bilmez b){
        String s = " ..."+this;
        b.yaziYaz(v,s,t);
    }    
}

class Bilmez {
    public void yaziYaz(View v,String s,TextView t){
        t.setText(s);
    }
} 
```

但是我有一个错误。我可以`setText`在另一个班级吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:57:54.120

您可以覆盖活动的 onClick。避免在 xml 文件中使用 android:OnClick="gonderB" 行。我认为最好实现 onClickListener 并将其附加到代码中的查看对象。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener {
Bilmez b;
TextView t;
Button bt;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b = new Bilmez();
    t = (TextView) findViewById(R.id.yazi);
    Button bt = (Button) findViewById(R.id.btn);
    bt.setOnClickListener(this);
}

@Override
public void onClick(View clickedView) {
    switch (clickedView.getId()) {
    case R.id.btn:
        String s = "...." + this;
        b.changeText(t,s);
        break;
    }}  //end of main class    } 
```

在 changeText 方法中，您更改 TextView 的文本。如果您愿意，可以将此方法放在另一个类中。

```
class Bilmez {
            public void changeText(TextView t, String s){
                    t.setText(s);
            }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:21:01.440

也许您遇到的是需要在 UI 线程上运行该函数？

```
public void yaziYaz(View v,final String s,final TextView t) {
   runOnUiThread(new Runnable() {
      public void run() {
         t.setText(s);
      }
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T20:42:39.587

我认为你应该这样做：

```
public void gonderB (new View v,TextView t,Bilmez b){
    String s = " ..."+this;
    b.yaziYaz(v,s,t);
} 
```

# java - 海岸线分形比例

> ID：12656119
> 
> 赞同：1
> 
> 时间：2012-09-29T20:14:16.947
> 
> 标签：java, fractals

我正在一个一个宽的窗口上制作海岸线分形，我想制作下图所示的第一个，但是，我无法弄清楚使用哪个 x 和 y 坐标来使角度形成 90 度并且仍然适合屏幕，我不需要任何代码，我只想知道如何确定要使用的 x 和 y 坐标。谢谢！

![海岸线分形](../Images/14be42244976548087b414868acfd952.png)

点数：
第 1 点：(0,0.5)
第 2 点：(0.25,0.75)
第 3 点：(0.75,0)
第 4 点：(1,0.5)

我的工作（虽然有时混乱且难以辨认）：![在此处输入图像描述](../Images/3c5ed5780849ab56b915ea7ccde7dd9f.png)

* * *

从图中可以看出，第一个点和最后一个点的 y 值都是 0.5。由于观察窗是一个，因此您将其分成 4 个部分，每个部分的长度为 0.25。根据图像，如果在 y=0.5 处绘制水平线形成的三角形是等腰三角形。因此，您求解：sin(45)=x/0.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:39:57.430

似乎您想将抽象坐标系映射到屏幕上。

假设您的端点（在任意坐标中）是 (0, 0) 和 (1, 0)。那么在这个系统中，最左边的数字的点数将是 (0, 0), (1/4, sqrt(2)/4), (1/2, 0), (3/4, -sqrt(2) )/4) 和 (1, 0)。

其他图表是通过某种方法计算的。听起来您的问题是集中在将其安装到屏幕上，所以我将继续。将其安装到屏幕上的方法是相同的。

从那里，你有一个屏幕坐标系。每个点都转换到屏幕上。假设您有一个 1000 x 1000 的屏幕，屏幕坐标 (0, 0) 在左上角。如果要占据整个屏幕，则可以执行以下操作：

*   翻转 y 坐标（+y 在屏幕上向下）
*   确定任意坐标的 x 和 y 的完整范围（x 为 1，y 为 sqrt(2)/2）
*   将 x 值乘以 1000，将 y 值乘以 2000 / sqrt(2) 以扩展到屏幕。
*   从 y 值中减去 500 以使图像在 y 方向居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:29:26.680

重新`"x and y coordinates are doubles in between 0 and 1"`，

然后，您需要从模型（构成分形的点集）和视图（GUI 显示）转换。模型将从 0 变为 1，视图将从 0 变为图形窗口的宽度。将模型乘以某个比例因子的简单线性变换将起作用。

# c++ - 如何使用返回值整理 c++ 错误处理？（解除分配）

> ID：12656124
> 
> 赞同：2
> 
> 时间：2012-09-29T20:15:24.947
> 
> 标签：c++, exception, error-handling, return-value

我将在一个巨大的项目中使用库，其中异常用于错误处理。该库使用返回码进行错误处理，这意味着所有函数都将返回一个常量，定义函数是否成功或发生任何错误。

如果库函数失败，我的函数经常不得不中止。有什么比下面代码片段中给出的示例实现更好的方法来处理这些错误？

我的问题的一个主要问题是在每次评估返回代码后释放先前分配的内存。这是容易出错且麻烦的。我希望找到一些指导方针来防止每次调用库函数时释放...

```
void examplefunc()
{
  T* pT = new T();
  U* pU = new U();
  Q myQ;
  int iRes = CONST_SUCCESS;

  if ((iRes = myQ.func1())!= CONST_SUCCESS)
  {
    delete pU;
    delete pT;
    throw translateException(iRes);  // providing exc      
  }
  if ((iRes = mQ.func2())!= CONST_SUCCESS)
  {
    delete pU;
    delete pT;
    throw translateException(iRes);  // providing exc 
  }

  delete pU;
  delete pT;
  return;
} 
```

感谢您的所有建议。有什么我可以遵循的指导方针吗？

最好的问候山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:24:08.160

使用智能指针。例如，而不是：

```
T* pT = new T(); 
```

你可能会使用 C++11 的`unique_ptr`：

```
std::unique_ptr<T> pT = make_unique<T>(); 
```

只要包装对象超出范围，unique_ptr 就会自动销毁内部指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:19:36.970

您应该为第 3 方代码创建某种包装器。最佳做法是永远不要直接使用第 3 方代码，因为如果它发生更改，您将被迫执行许多更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T20:21:46.687

为什么不创建智能指针（在 C++98 或`pT`C ++11 中），在检测到错误时抛出错误并让智能指针在销毁时完成它们的工作（这也将在异常时发生）。`pU``std::auto_ptr``std::unique_ptr`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T00:33:56.843

作为参考（如果您以前没有看过它），这里是使用智能指针的 C++11 版本。它相当于您的代码，除了：

*   在抛出`pT`的情况下它不会泄漏`new U()`
*   同样，如果有其他东西抛出（`Q`等的构造函数） ，它也不会泄漏
*   它在删除然后销毁`myQ` *之前*销毁，而您的代码先删除这些然后销毁。`pU``pT``myQ`

通常破坏的顺序无关紧要，但如果它确实重要，则需要注意这一点。如果您需要以相反的创建顺序以外的任何方式销毁您的对象，那么它们的生命周期不能简单地通过它们的范围来控制。

```
void examplefunc()
{
    std::unique_ptr<T> pT(new T());
    std::unique_ptr<U> pU(new U());
    Q myQ;
    int iRes;

    if ((iRes = myQ.func1())!= CONST_SUCCESS)
    {
        throw translateException(iRes);  // providing exc
    }
    if ((iRes = mQ.func2())!= CONST_SUCCESS)
    {
        throw translateException(iRes);  // providing exc 
    }
    return;
} 
```

我当然假设`T`and`U`对象不能简单地放在堆栈上——你没有说明为什么不这样做，但你问的事实表明这是有原因的！

在新旧代码之间混合原始指针和智能指针时，这段代码根本不会引起任何问题——这个函数以前负责释放它分配的内容，现在仍然如此。如果您需要将指向`T`or`U`对象的指针传递给一些采用原始指针的预先存在的代码：

*   没有所有权，然后通过`pT.get()`
*   拥有所有权（如果此函数并不总是负责删除，因为有时它会将指针传递或返回给具有该责任的其他人），然后传递`pT.release()`.

然后，您可以根据需要在更多现有代码中使用智能指针。

最后，可以用 C++03 编写上面的代码`std::auto_ptr`，但是你必须非常小心`auto_ptr`，它很容易出错。`unique_ptr`是“更安全”但不能在 C++03 中完全实现。`boost::scoped_ptr`如果您不需要`release()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T10:38:08.280

在堆栈上而不是在堆上构造 T 和 U。然后它们会自动解构。只要有可能，您就应该这样做。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-29T20:17:55.117

如果您不想一遍又一遍地重复相同的内容，请编写一个执行以下操作的函数：

```
void throwErrorAndCleanup(T* pT, U* pU, int iRes)
{
    delete pU;
    delete pT;
    throw translateException(iRes);
} 
```

另一种方法是使用 goto。使用 goto 是一个颇受争议的话题，但是对于像这样的错误清理，它通常是有意义的（特别是你可能会发现随着函数的进行需要清理更多的东西，所以你可以创建更多的跳转目标来清理额外的东西和然后落入较早的清理中）。

```
void examplefunc()
{
  T* pT = new T();
  U* pU = new U();
  Q myQ;
  int iRes = CONST_SUCCESS;

  if ((iRes = myQ.func1())!= CONST_SUCCESS)
  {
    goto error;
  }
  if ((iRes = mQ.func2())!= CONST_SUCCESS)
  {
    goto error;
  }

  delete pU;
  delete pT;
  return;

  error:
  delete pU;
  delete pT;
  throw translateException(iRes);  // providing exc 
} 
```

# android - Android 应用程序 - 长时间加载

> ID：12656126
> 
> 赞同：0
> 
> 时间：2012-09-29T20:15:27.317
> 
> 标签：android, garbage-collection, loading

我开发了这个应用程序，一切正常，但加载需要 4-5 秒，我不知道为什么，因为没有要加载的图像或互联网内容，只是 logcat 传播了大约 500 条关于垃圾收集器的消息。你能告诉我我做错了什么吗？这是一些代码：

```
 public class HNappActivity extends SherlockFragmentActivity implements 
 HeadlinesFragment.OnHeadlineSelectedListener, CABNavLis{

  HeadlinesFragment hnHeadlinesFragment;
  int hnCatIndex = 0;
  int hnArtIndex = 0;
  Categories hnCurrentCat;
  public String[] Rubriky = null;
  int count;

  @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      requestWindowFeature(Window.FEATURE_NO_TITLE);
      getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

      setContentView(R.layout.activity_hnapp);

      Rubriky = ((HNapp) this.getApplication()).getRubriky();
      count=((HNapp) this.getApplication()).getCount();

      hnHeadlinesFragment = (HeadlinesFragment) getSupportFragmentManager().findFragmentById(
              R.id.headlines);
      hnHeadlinesFragment.setOnHeadlineSelectedListener(this);

      hnCatIndex = savedInstanceState == null ? 0 : savedInstanceState.getInt("catIndex", 0);

      hnHeadlinesFragment.setSelectable(true);
      restoreSelection(savedInstanceState);
  }

  void restoreSelection(Bundle savedInstanceState) {
         if (savedInstanceState != null) {
             setNewsCategory(savedInstanceState.getInt("catIndex", 0));
                 int artIndex = savedInstanceState.getInt("artIndex", 0);
                 hnHeadlinesFragment.setSelection(artIndex);
                 OnHeadlineSelected(artIndex);
        }
    } 
```

活动_hnapp.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:orientation="vertical"
     android:layout_width="match_parent"
     android:layout_height="match_parent">    
    <fragment
     android:id="@+id/headlines"
     android:name="sk.ecopress.hn.android.HeadlinesFragment"
     android:layout_width="match_parent"
     android:layout_height="0dp"
     android:layout_weight="1.03" />
   <RelativeLayout
     android:id="@+id/relative_layout1"
     android:layout_width="match_parent"
     android:layout_height="40dp"
     android:orientation="horizontal" >

   <Button
       android:id="@+id/titulka"
       android:layout_width="40dp"
       android:layout_height="40dp"
       android:padding="0dp"
       android:layout_alignParentLeft="true"
       android:text="@string/titulka" />

   <Button
       android:id="@+id/sekcie"
       android:layout_width="40dp"
       android:layout_height="40dp"
       android:layout_toRightOf="@id/titulka"
       android:text="@string/sekcie"
       android:padding="0dp" />

   <Button
       android:id="@+id/bookmarks"
       android:layout_width="40dp"
       android:layout_height="40dp"
       android:layout_toRightOf="@id/sekcie"
       android:text="@string/bookmarks"
       android:padding="0dp" />

   <Button
       android:id="@+id/info"
       android:layout_width="40dp"
       android:layout_height="40dp"
       android:padding="0dp"
       android:layout_alignParentRight="true"
       android:onClick="info"
       android:text="@string/info" />

   <Button
       android:id="@+id/nastavenia"
       android:layout_width="40dp"
       android:layout_height="40dp"
       android:padding="0dp"
       android:layout_toLeftOf="@id/info"
       android:onClick="settings"
       android:text="@string/nastavenia" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:23:01.790

如果垃圾收集工作很努力，那是因为您正在创建大量垃圾:)。在调试中逐行运行，看看哪一行卡住了。从您发布的代码来看，它不是生成此垃圾的 android sdk 代码。我的赌注是：

> Rubriky = ((HNapp) this.getApplication()).getRubriky();

它有什么作用？访问本地文件还是什么？

# google-apps-script - 如何在 Google Apps 脚本中使用 ACL 将网站共享给其他用户？

> ID：12656128
> 
> 赞同：0
> 
> 时间：2012-09-29T20:15:33.027
> 
> 标签：google-apps-script, google-apps

我是管理员用户。我想与其他用户共享网站，即使是在我的域之外使用谷歌应用程序脚本。我尝试使用 ACL 并使用以下代码：

```
function shareSite(){

  var base = 'https://sites.google.com/feeds/';
  var fetchArgs = googleOAuth_('google', base);
  fetchArgs.method = 'POST'
  var rawXml = "<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'>"
      +"<category scheme='http://schemas.google.com/g/2005#kind' "
      +"term='http://schemas.google.com/acl/2007#accessRule'/>"
      +"<gAcl:role value='owner'/>"
      +"<gAcl:scope type='user' value='newOwnerEmail'/>"
      +"</entry>";

  fetchArgs.payload = rawXml;
  fetchArgs.contentType = 'application/atom+xml';
  var url=base+'/acl/site/<domain-name>/<site-name>'
  var content = UrlFetchApp.fetch(url, fetchArgs).getContentText(); 
  Logger.log(content)
}

//Google oAuth
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
   oAuthConfig.setConsumerKey("");
  oAuthConfig.setConsumerSecret("");
  return {oAuthServiceName:name, oAuthUseToken:"always",
  Host: 'sites.google.com',
  Authorization: 'OAuth',
  oauth_version:"1.0",
  oauth_nonce:"",
  oauth_timestamp:"",
  oauth_consumer_key:"",
  oauth_token:"",
  oauth_signature_method:"HMAC-SHA1", 
  oauth_signature:""};
} 
```

我试过这段代码，它给出 400（错误请求），有时给出 404（未找到站点）。预期的服务器响应将是 201。如果有人知道它的解决方案和另一种方法，请与我分享。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:10:35.920

我建议使用内置的 SitesApp 服务来修改 ACL。`Site.addCollaborator()`应该做你想做的。

[https://developers.google.com/apps-script/class_site#addCollaborator](https://developers.google.com/apps-script/class_site#addCollaborator)

# javascript - 如何在three.js中渲染点的二维形状

> ID：12656138
> 
> 赞同：3
> 
> 时间：2012-09-29T20:16:35.600
> 
> 标签：javascript, 3d, three.js, shape

如何在three.js中渲染点的二维形状？我没有找到任何工作几何......我只需要制作位于同一平面上的点的多边形。

形状不适合，因为它只支持 2D 坐标，我需要使用 3D 点...

我正在使用以下代码在 X、Y 平面内创建形状

```
 var squareShape = new THREE.Shape();
 squareShape.moveTo( 0,0 );
 squareShape.lineTo( 0, 50 );
 squareShape.lineTo( 20, 80 );
 squareShape.lineTo( 50, 50 );
 squareShape.lineTo( 0, 0 ); 
```

如何在工作中制作 3D 世界？有什么解决办法吗？像：

```
squareShape.moveTo( 0,0,0 );
squareShape.lineTo( 0, 50, 50 ); 
```

ETC

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T22:58:26.620

您可以从 3D 点创建多边形，如下所示：

```
// geometry
var geometry = new THREE.Geometry();
geometry.vertices.push( new THREE.Vector3( 0, 5, 0 ) );
geometry.vertices.push( new THREE.Vector3( 5, -5, -2 ) );
geometry.vertices.push( new THREE.Vector3( -5, -5, 2 ) );
geometry.vertices.push( new THREE.Vector3( 0, 5, 0 ) ); // close the loop

// material
var material = new THREE.LineBasicMaterial( { color: 0xffffff, linewidth: 1 } );

// line
var line = new THREE.Line( geometry, material );
scene.add( line ); 
```

三.js r.69

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T01:17:42.297

从 r51 开始，出现了一种新型几何形状，`THREE.ShapeGeometry`它是在一个平面上构建的二维形状。可以在此处找到其使用示例：http: [//mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html)

您可以使用`THREE.Shape`来构造 2d 形状，然后调用`shape.makeGeometry()`将其转换为`THREE.ShapeGeometry`. 这是一个制作圆圈的伪代码示例：

```
var circle = new THREE.Shape();
var radius = 6;

for (var i = 0; i < 16; i++) {
  var pct = (i + 1) / 16;
  var theta = pct * Math.PI * 2.0;
  var x = radius * Math.cos(theta);
  var y = radius * Math.sin(theta);
  if (i == 0) {
    circle.moveTo(x, y);
  } else {
    circle.lineTo(x, y);
  }
}

var geometry = circle.makeGeometry();
var material = new THREE.MeshBasicMaterial({ color: 0xff0000 });
var mesh = new THREE.Mesh(geometry, material); 
```

`mesh`has `position`, `rotation`, and which 可以帮助您在`scale`三维空间中定位对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T22:59:14.650

您需要使用形状的顶点（提取后）创建几何体，并使用三角剖分来制作面。

代码应如下所示：

```
var geometry = new THREE.Geometry();
var shapePoints = shape.extractPoints();
var faces = THREE.Shape.Utils.triangulateShape(shapePoints.shape, shapePoints.holes);
for (var i = 0; i < shapePoints.shape.length; i++) {
    geometry.vertices.push(new THREE.Vector3(shapePoints.shape[i].x, 0, shapePoints.shape[i].y));
}
for (var i = 0; i < faces.length ; i++) {
    var a = faces[i][2] , b = faces[i][1] , c = faces[i][0] ;
    var v1 = shapePoints.shape[a], v2 = shapePoints.shape[b], v3 = shapePoints.shape[c];

    geometry.faces.push( new THREE.Face3(a, b, c) );    
    geometry.faceVertexUvs[0].push(
        [ new THREE.UV(v1.x ,v1.y ), new THREE.UV(v2.x, v2.y), new THREE.UV(v3.x, v3.y)]);
}
geometry.computeCentroids();
geometry.computeFaceNormals(); 
```

# php - 将页面上 div 中的列表项数导出到另一个页面

> ID：12656145
> 
> 赞同：0
> 
> 时间：2012-09-29T20:18:27.847
> 
> 标签：php, html, html-lists, return

我正在寻找一种使用 PHP 执行以下操作的方法。

文件夹 /section/ 中有多个页面。红色.html、蓝色.html、绿色.html。并且在服务器的根目录下有一个 index.html 页面。

在这些页面中的每一个上，都有一个 id 为“list”的 div，其中包含一个带有列表项的 ul。如何在 /section/ 中的每个页面上检索此 div 中列表项的数量，并返回 index.html 页面上每个页面的数量。

为了更好地说明它：

每一页的结构：

```
<div id="list">
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</div>

    red.html (33 list items within #list)
    blue.html (20 list items within #list)
    green.html (15 list items within #list)

    index.html:

    **Stats:**
    Red: <php here fetching the number from red.html>
    Blue: <php here fetching the number from blue.html>
    Green: <php here fetching the number from green.html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:34:26.923

您可以在索引中执行以下操作，但必须使用 PHP，因此您需要将其重命名为 index.php。

```
$sections = new DirectoryIterator('/path/to/sections');
$stats = array();

foreach($sections as $file) {
  if(!$file->isDot() && $file->isFile()) {
     $name = $file->getName();
     $path = $file->getPathname();
     $key =  str_replace('.html', '', $name);

     // load the html
     $dom = new DOMDocument();
     $dom->loadHTML($path);

     // get the LI of the list via xpath query
     $xpath = new DOMXPath($dom);
     $elements = $xpath->query("//ul[@id='list']/li");

     // assign the stat
     $stats[$key] = $elements->length;

     // free up some memory
     unset($elements, $xpath, $dom);
  }
} 
```

之后，您只需要迭代`$stats`并输出您的计数。所以像：

```
<dl>
<?php foreach($stats as $label => $count): ?>
  <dt><?php echo $label ?></dt>
  <dd><?php echo $count ?></dd>
<?php endforeach ?>
</dl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:25:59.237

好吧，你有一些选择。`.html`建议我们谈论的是静态 html 文件，所以让我们来处理它。

1.）因为它都是静态的，所以您需要打开这些文件并解析它们（手动或可能使用一些 3rd 方库，如果存在的话）。然后你只需输出结果。

2.) 将静态 html 文件转换为 php，将 html 列表转换为数组。在您的红色、蓝色和绿色文件中，您需要枚举这些数组并简单地输出它们以获得相同的效果。但是，在您的 index.php 中，您需要做的就是包含这些文件并直接从这些可用的数组中获取信息。我相信您知道如何获取数组的元素数量，对吧？

编辑：

根据评论中的要求，我将尝试向您展示一个示例。可能这里最简单的方法是使用第二个选项。而不是使用静态类型的 html 列表，而是创建 php 变量 - 数组 - 包含您的项目。如果您需要显示这些项目，只需循环此集合并根据需要回显。如果您需要获取数组中的元素数量，只需使用 php 函数`count(...)`

显示项目示例：

红色.php

```
$someArray = array("one", "two", "three");

foreach ($someArray as $i -> $value)
{
    echo '<li>'.$value'.<li>';
} 
```

索引.php

```
include_once 'red.php';

echo 'Count of elements in red.php: '.count($someArray); 
```

或者类似的东西，希望你明白。

# ios - 如何在 ios 中使用大精灵制作动画？

> ID：12656149
> 
> 赞同：0
> 
> 时间：2012-09-29T20:19:09.423
> 
> 标签：ios, animation, video

我必须在 iOS 中制作动画信息图。它由大约 140 张图像组成，全部为 900x700 大。最好的方法是什么？我尝试了带有单独图像的 CALayer，还有一个精灵表。但是加载时间太长了，而且播放很糟糕。我也有视频文件中的动画，但它需要添加到设置帧中的视图中，而不是全屏播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:25:02.547

[尝试使用MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)播放动画视频。您可以在带有自定义框架的视图中播放它。您也可以参考示例代码的链接。

# ruby-on-rails-3 - 是否有任何用于存储用户通知的宝石？

> ID：12656158
> 
> 赞同：0
> 
> 时间：2012-09-29T20:20:10.860
> 
> 标签：ruby-on-rails-3, gem, mongoid

我假设这是一个常见的需求，但因为通知这个术语被使用得太多，我想我很难找到它。我试图找到一个类似于活动提要的 gem，但它不是公共提要，它只处理用户通知。我还需要它能够记录用户何时查看通知，以便我可以判断用户是否有新通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:11:04.483

有[Streama](https://github.com/christospappas/streama)，它可能对你有用。否则我认为自己构建它不会过于复杂。

# algorithm - Knuth-Morris-Pratt 和 Boyer-Moore 搜索算法之间的主要区别是什么？

> ID：12656160
> 
> 赞同：56
> 
> 时间：2012-09-29T20:20:15.877
> 
> 标签：algorithm, theory, string-search

**Knuth-Morris-Pratt**搜索算法和**Boyer-Moore**搜索算法之间的主要区别是什么？

我知道**KMP**在 X 中搜索 Y，试图在 Y 中定义一个模式，并将该模式​​保存在一个向量中。我也知道**BM**更适合小词，比如 DNA (ACTG)。

它们在工作方式上的主要区别是什么？哪个更快？哪一个对计算机不那么贪婪？在哪些情况下？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-29T20:27:51.093

粗略的解释

**Boyer-Moore 的**方法是尝试匹配模式的最后一个字符而不是第一个字符，并假设如果末尾不匹配，则无需尝试在开头匹配。这允许“大跳跃”，因此当您搜索的模式和文本类似于“自然文本”（即英语）时，**BM效果更好**

**Knuth-Morris-Pratt**通过以下观察在主要“文本字符串”S 中搜索“单词”W 的出现：当发生不匹配时，单词本身包含足够的信息来确定下一个匹配的开始位置，从而绕过 re - 检查以前匹配的字符。（来源：[维基](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)）

这意味着**KMP**更适合 DNA (ACTG) 等小型集

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-29T20:30:39.020

[Moore 的 UTexas 网页](http://www.cs.utexas.edu/~moore/best-ideas/)逐步介绍了这两种算法（他还提供了各种技术资源）：

*   [克努特-莫里斯-普拉特](http://www.cs.utexas.edu/~moore/best-ideas/string-searching/kpm-example.html)
*   [博耶-摩尔](http://www.cs.utexas.edu/~moore/best-ideas/string-searching/fstrpos-example.html)

据该男子本人介绍，

> 经典的 Boyer-Moore 算法存在这样一个现象，即它在处理 DNA 等小字母时往往效率不高。跳跃距离趋于随着模式长度停止增长，因为子串频繁地重新出现。通过记住更多已经匹配的内容，可以在文本中获得更大的跳过。人们甚至可以安排“完美记忆”，从而最多查看每个字符一次，而 Boyer-Moore 算法虽然是线性的，但可能会多次检查文本中的字符。其他人在文献中探索了这种记住更多的想法。它需要非常大的表或状态机。

[然而，对 BM](http://www.cs.utexas.edu/~moore/publications/sustik-moore.pdf)进行了一些修改，使得小字母搜索变得可行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-14T09:05:47.680

Boyer-Moore 技术从右到左匹配字符，适用于长模式。knuth moris pratt 从左到右匹配字符，在短模式上快速工作。

# php - 数组到 mysql 列语法

> ID：12656161
> 
> 赞同：2
> 
> 时间：2012-09-29T20:20:19.730
> 
> 标签：php, sql, arrays, multidimensional-array

我有一个多维关联数组，我运行并获取一个特定值，然后回显出来。

```
foreach ($multi_array as $entry) {

   echo $entry['tag_id'];

} 
```

它呼应`12`。我可以使用什么函数将其转换为...

```
`1`,`2` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:24:28.697

你正在寻找内[爆](http://php.net/manual/en/function.implode.php)函数，试试这个：

```
$result = '`' . implode('`,`', $multi_array) . '`'; 
```

# css - SASS 插值错误

> ID：12656165
> 
> 赞同：0
> 
> 时间：2012-09-29T20:20:46.277
> 
> 标签：css, sass, shopify, templating

我正在将 Shopify 主题的 CSS 转换为 SASS。我正在使用 SASS 插值标签`#{}`来处理我的 CSS 中嵌入的 shopify 模板代码。

我遇到了一个错误，尽管这让我很困惑。SCSS如下...

`background-image: #{'{% if settings.use-background-image %}'} url( #{ '{{ "background-image.png" | asset_url }}' } ) #{'{% endif %}'};`

我的错误是......

`error style.scss (Line 83: Invalid CSS after "...{'{% endif %}'}": expected string, was ";")`

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:30:52.657

你可以这样做：

```
.test {
    $test: '{% if settings.use-background-image %} url({{ "background-image.png" | asset_url }}) {% endif %}';
    background-image: unquote($test);
} 
```

生成这个：

```
.test {
  background-image: {% if settings.use-background-image %} url({{ "background-image.png" | asset_url }}) {% endif %};
} 
```

# c# - Windows 8 - 如何更改动态磁贴背景图像？

> ID：12656172
> 
> 赞同：2
> 
> 时间：2012-09-29T20:21:56.803
> 
> 标签：c#, windows-8, windows-runtime, live-tile, windows-store-apps

如何将我的 Windows 8 应用程序中的动态磁贴的背景图像更改为本地图像？我正在使用的模板的 XML 是：

```
<tile>
  <visual>
    <binding template="TileWideImageAndText01">
      <image id="1" src="image1.png" alt="alt text"/>
      <text id="1">Text Field 1</text>
    </binding>  
  </visual>
</tile> 
```

对于文本，我使用

```
 XmlDocument xmltile= Windows.UI.Notifications.TileUpdateManager.GetTemplateContent(Windows.UI.Notifications.TileTemplateType.TileWideImageAndText01);

        xmltile.GetElementsByTagName("text")[0].AppendChild(xmltile.CreateTextNode("73°F, Mostly Cloudy"));

        TileNotification tileupdate = new Windows.UI.Notifications.TileNotification(xmltile);

        Windows.UI.Notifications.TileUpdateManager.CreateTileUpdaterForApplication().Update(tileupdate); 
```

但是图像呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T20:33:45.483

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868253%28v=win.10%29.aspx#supply_an_image_for_your_notification)：

> 以下代码使用应用程序包中的本地图像。此类图像包含在您的 Visual Studio 解决方案文件中，并打包为您的应用程序的一部分。使用“ms-appx:///”前缀访问这些图像。作为最佳实践，我们还为可​​访问性目的（例如屏幕阅读器）分配可选的替代文本。

```
XmlNodeList tileImageAttributes = tileXml.GetElementsByTagName("image");
((XmlElement)tileImageAttributes[0]).SetAttribute("src", "ms-appx:///images/redWide.png");
((XmlElement)tileImageAttributes[0]).SetAttribute("alt", "red graphic"); 
```

# c# - 防止 MailItem.Reply 在 Outlook 2010 中打开检查器窗口？

> ID：12656173
> 
> 赞同：2
> 
> 时间：2012-09-29T20:22:06.627
> 
> 标签：c#, outlook-addin, outlook-2010

我正在为 Outlook 构建一个共享插件。

在代码内部，我正在使用`MailItem.Reply()`方法创建回复电子邮件并稍后将其丢弃。我正在使用它来获取来自 Exchange 服务器的电子邮件的发件人电子邮件地址。

它在 Outlook 2007 上运行良好。但对于 Outlook 2010，回复方法似乎打开了邮件编辑器窗口。

我在Windows 7上。

有什么方法可以抑制该窗口或根据 Outlook 版本编写单独的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:00:46.300

如果您打算丢弃消息 - 不要一开始就创建它（*除非您打算发送消息，否则**不要使用`Reply()`*）。您可以使用[`Recipient`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.recipient.aspx)该类以最少的资源利用率来解析 Exchange 用户的电子邮件地址。

```
string senderEmail = string.Empty;
Outlook.Recipient recipient = mailItem.Application.Session.CreateRecipient(mailItem.SenderEmailAddress);
if (recipient != null && recipient.Resolve() && recipient.AddressEntry != null) 
{
    Outlook.ExchangeUser exUser = recipient.AddressEntry.GetExchangeUser();
    if (exUser != null && !string.IsNullOrEmpty(exUser.PrimarySmtpAddress))
       senderEmail = exUser.PrimarySmtpAddress;
} 
```

# javascript - 在 AJAX 调用后使用 DOM

> ID：12656174
> 
> 赞同：1
> 
> 时间：2012-09-29T20:22:42.710
> 
> 标签：javascript, jquery

我有这个功能：

```
$('body').on('click', '.kategorija_izbor ul a, .mali_oglas a[role=pretraga]', function(e){
        var mgl_wrapper = $('.mali_oglasi_wrapper'),
        mgl = $(".mali_oglasi"), 
        mgl_space =  $(this).attr('href').replace(/\s+/g, '-').toLowerCase();
        link = mgl_space + ' .mali_oglasi';         
        mgl.animate({'opacity' : 0}, 400, function(){
            mgl_wrapper.load(link, function(){
                mgl.animate({'opacity' : 1}, 400);
            });
        });
        e.preventDefault(); 
    }); 
```

它正在工作，但我想知道是否有另一种方法可以做到这一点。在我看来，这种方式既费时又资源效率低下。每次单击页面时，脚本都会通过 DOM 并搜索特定元素。有没有办法存储**.kategorija_izbor ul a**和 .mali_oglas a[role=pretraga] （它们是通过加载函数加载的）？

**编辑我**

**.kategorija_izbor ul a**和 .mali_oglas a[role=pretraga] 是**mgl_wrapper *( $('.mali_oglasi_wrapper')) 的**子级，每次点击时都会动态创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:26:42.080

如果元素只被加载到`mgl`中，只需限制`click`处理程序的范围，这样 jQuery 就不必搜索整个`body`：

```
var $mgl_wrapper = $('.mali_oglasi_wrapper');
var $mgl = $('.mali_oglasi');

$mgl.on('click', '.kategorija_izbor ul a, .mali_oglas a[role=pretraga]', function(e) {
    var mgl_space =  this.href.replace(/\s+/g, '-').toLowerCase();

    $mgl.animate({'opacity' : 0}, 400, function() {
        $mgl_wrapper.load(mgl_space + ' .mali_oglasi', function() {
            $mgl.animate({'opacity' : 1}, 400);
        });
    });

    e.preventDefault(); 
}); 
```

# java - 在 Spinner 小部件中设置所选项目

> ID：12656177
> 
> 赞同：0
> 
> 时间：2012-09-29T20:22:50.027
> 
> 标签：java, android, android-widget, android-spinner

在我的 Android 应用程序中，我有一个`Activity`带有`Spinner`小部件。我在以下代码中创建了它`onCreate()`：

```
 this.playerPositionSpinner = (Spinner) this.findViewById(R.id.player_position_text);
    ArrayAdapter<CharSequence> positionsAdapter = ArrayAdapter.createFromResource(this, R.array.positions, android.R.layout.simple_spinner_item);
    positionsAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    this.playerPositionSpinner.setAdapter(positionsAdapter); 
```

稍后我想根据我知道是 Spinner 列表中的有效项目的字符串设置所选项目？所有`Spinner.setSelection()`方法都采用`int`位置参数。如何获取 a`String`在`Spinner`s 下拉列表中的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:29:15.853

（您现在已经发布了一些代码！是的！这大大简化了我的示例。）
我建议[`Spinner#setSelection()`](http://developer.android.com/reference/android/widget/AbsSpinner.html#setSelection%28int%29)在调用后使用`setAdapter()`：

```
playerPositionSpinner.setSelection(positionsAdapter.getPosition("Watermelon")); 
```

显然，您可以用`"Watermelon"`与您的应用相关的内容替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:31:28.137

使用您的微调器 setSelection 方法： http: [//developer.android.com/reference/android/widget/AbsSpinner.html#setSelection](http://developer.android.com/reference/android/widget/AbsSpinner.html#setSelection(int) (int , boolean)

您需要将项目位置的整数值传递给它。要获得价值，请使用您的适配器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-29T20:30:40.543

您需要`playerPositionSpinner.setSelection(position)`在创建和设置 Spinner 后调用`ArrayAdapter`

# objective-c - 如何在没有 IB 的代码中将自定义导航栏保持在屏幕底部

> ID：12656180
> 
> 赞同：0
> 
> 时间：2012-09-29T20:23:02.577
> 
> 标签：objective-c, ios, xcode, resize

我有一个自定义导航栏，当它针对 iphone 5 展开时，我想将其固定在屏幕底部。我只知道如何在 IB 中正确执行此操作，并且从开发人员那里继承了代码，

我试过了：

```
ICNavbarView *navBarView = [[ICNavbarView alloc] init];
navBarView.delegate = self;
CGRect navBarFrame = navBarView.frame;
navBarFrame.origin.y = self.view.frame.size.height - navBarFrame.size.height;
navBarView.frame = navBarFrame;
[self.view addSubview:navBarView];

////////resize/metrics of Navbar////////
[navBarView setAutoresizingMask:(UIViewAutoresizingFlexibleBottomMargin |     UIViewAutoresizingFlexibleWidth)]; 
```

导航栏不会让步！我是否错过了一种在不调整大小的情况下随屏幕向下移动导航栏的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:47:23.923

改变这个：

```
[navBarView setAutoresizingMask:(UIViewAutoresizingFlexibleBottomMargin |     UIViewAutoresizingFlexibleWidth)]; 
```

到：

```
[navBarView setAutoresizingMask:(UIViewAutoresizingFlexibleTopMargin |     UIViewAutoresizingFlexibleWidth)]; 
```

# mysqli - mysqli 命令使用 '

> ID：12656183
> 
> 赞同：0
> 
> 时间：2012-09-29T20:23:23.387
> 
> 标签：mysqli

我一直在学习一个教程来更好地理解 php 的 oop，但是遇到了一个绊脚石，我不确定这是一个 oop 的事情还是我在做事的过程中没有遇到过的事情，我很漂亮新的并试图快速学习很多东西。我想在继续之前知道发生了什么。

下面是代码，除了为什么在 users_username 下我需要'和另一个'，在选择 users_email? 起初我认为这是一种分离它们的方法，因此作为测试我删除了它们并返回错误：**尝试获取非对象的属性**。所以我猜测通过删除它们我会以某种方式停止将名称创建为对象？还是我离题了。

```
"SELECT CONCAT(users_username,
                        ',
                        ',
                        users_email)
                        AS name,
          DATE_FORMAT(users_joined, '%M %d, %Y') AS dr
          FROM users
          ORDER BY users_joined
          ASC";

    $r = $mySqli->query($q);//run the query

    $num = $r->num_rows;//assign the number of rows

    if($num > 0){//if there are members in the database

        echo '<p>There are currently ' . $num . ' members registered.</p>' . "\n";

        while($row = $r->fetch_object()){

            echo $row->name . ' ' . $row->dr . "<br/>";

        }
    } 
```

抱歉，如果这个问题以前被问过很多次，但我不知道如何搜索这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:41:05.627

CONCAT(users_username, ',',users_email) 所做的是将 users_username 附加一个逗号，然后附加 users_email。因此，如果 users_username 是 bob 并且 users_email 是 bob@example.com 将返回“bob,bob@example.com”。

如果您删除单引号，那么它只是 CONCAT(users_username,,,users_email) 并且 PHP 可能不喜欢逗号之间没有任何内容。在这种情况下，查询可能会失败并为 $row 返回 NULL。因此，当您执行 $row->name 时，它​​会尝试获取 $row 的 name 属性，但由于 $row 为 NULL 它没有任何属性。

# x86 - 带有 SSSE3 标志的 ROS（机器人操作系统）

> ID：12656188
> 
> 赞同：2
> 
> 时间：2012-09-29T20:24:06.327
> 
> 标签：x86, simd, sse2, ros, sse3

我最近开始使用 ROS，但遇到了一个问题。我需要使用一些需要 SSE2、SSE3 和 SSSE3 CPU 扩展的类。

我试图编辑我的 ROS 包的 manifest.xml 文件，例如

```
<package>
  <description brief="topological_map_v1">
    topological_map_v1
  </description>
  <author>me</author>
  <license>BSD</license>
  <review status="unreviewed" notes=""/>
  <url>http://ros.org/wiki/topological_map_v1</url>

  <depend package="opencv2"/>
  <depend package="sensor_msgs"/>
  <depend package="rospy"/>
  <depend package="roscpp"/>

  <export>
     <cpp cflags="-msse2 -msse3 -mssse3 -I/ThirdParty/brisk -I/ThirdParty/brisk/agast"/>
     <intel_cpp cflags="-msse2 -msse3 -mssse3"/>
  </export>
</package> 
```

但它没有用！

该代码在“非 ROS 项目”中运行良好，但不知何故，编译器似乎忽略了 cflags。

我正在使用支持芯片扩展的 LinuxMint (ubuntu 12.04)。

我需要把旗帜放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:43:02.310

`cflags`需要在 CMakeLists.txt 文件中添加，如：

```
rosbuild_add_executable(ImgProcEngineNode src/ros_src/rosImgProcEngine.cpp)
rosbuild_add_compile_flags(ImgProcEngineNode "-c -O3 -fmessage-length=0 -march=native -msse2 -msse3 -mssse3 -I/home/me/topological_map/topological_map_v1/src/ThirdParty/brisk -I/home/me/topological_map/topological_map_v1/src/ThirdParty/brisk/agast") 
```

# android - 短信广播优先级

> ID：12656192
> 
> 赞同：0
> 
> 时间：2012-09-29T20:24:27.527
> 
> 标签：android, sms, broadcast

在我的应用程序中，我使用广播接收器拦截 SMS，android:priority:100，优先级设置为 100，使用应用程序“Go SMS”时一切正常，Go SMS 在其他应用程序之前拦截 SMS 消息，它是与播放优先级、包名、安装日期有关？,

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:47:49.963

> Go SMS 在其他应用程序之前拦截 SMS 消息，它与广播优先级有关

它与`android:priority`的`<intent-filter>`相关`BroadcastReceiver`。最后我检查了一下，Go SMS 将其设置为可能的最高值。

# android - 我如何在地图中找到一个位置以供我的应用程序使用？

> ID：12656197
> 
> 赞同：0
> 
> 时间：2012-09-29T20:24:37.287
> 
> 标签：android, google-maps, gps, position

* * *

## 我应该如何在地图中定位一个位置？

好的，所以我想在公园里找到我的大门位置，并在距离大门位置约 50 米时自动呼叫大门，我想我可以从谷歌地图中确定大门的位置开始-地图或全球定位系统，但我真的不知道如何

我试图查看一些 google maps api 的示例，但由于某种原因我无法使其工作。无论如何，这最终应该是一个应用程序..我希望你们中的一些人能以某种方式帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:33:35.753

这是您需要的基本信息，您可以从中获取纬度和经度，然后通过向意图发送“geo:lat,lon”来开始一个新活动，这会打开您的谷歌地图应用程序。这是您可以找到当前位置的一种方式。您应该在 android 开发者网站上阅读有关 LocationListener 等的更多信息。

```
public class GetLocation extends Activity {
LocationManager lm;
LocationListener ll;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.show_location);

    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    ll = new MyLocationListener();

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);

        try {

            double latitude = getLatitude();
            double longitude = getLongitude();
                Uri uri = Uri.parse("geo:"+latitude+","+longitude);

                startActivity(new Intent(Intent.ACTION_VIEW, uri));

                finish();

        } catch(Exception e) {
            System.out.println("ERROR: "+e);
        }

    }

}

@Override
protected void onStop() {
    super.onStop();

    lm.removeUpdates(ll);
}

public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location loc){
        loc.getLatitude();
        loc.getLongitude();     

    }

    public void onProviderDisabled(String provider) 
    {
    }

    public void onProviderEnabled(String provider)
    {
    }

    public void onStatusChanged(String provider, int status, Bundle extras)
    {
    }
} 
```

}

# ios - 如何使我的网络应用程序与 iPhone 5 兼容？

> ID：12656200
> 
> 赞同：13
> 
> 时间：2012-09-29T20:24:48.163
> 
> 标签：ios, web-applications, safari, iphone

我有一个优化为带有 iOS Safari 的网络应用程序的网站，因此添加到主屏幕会在单独的 Web 视图中打开应用程序。但是，它总是以 3.5" 字母盒模式打开，而不是拉伸以填满屏幕。我知道使用原生应用程序，您只需添加 iPhone 5 大小的启动图像。我该如何为网络应用程序执行此操作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-01T15:02:28.383

我在[这篇文章](http://taylor.fausak.me/2012/09/20/iphone-5-web-app-startup-image/)`width=device-width`中发现，所需要做的就是从视口元标记中删除。该博客讨论了指定启动图像，但这似乎是可选的。

**编辑：**答案的原始来源是[Max Firtman](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)。他表示这也可能是一个错误（见评论），但目前，这个解决方案有效。

# ruby-on-rails-3 - Rails declarative_authorization project_admin 角色

> ID：12656201
> 
> 赞同：0
> 
> 时间：2012-09-29T20:25:00.197
> 
> 标签：ruby-on-rails-3, declarative-authorization

我正在尝试使用[declarative_authorization](https://github.com/stffn/declarative_authorization) gem 创建项目管理员和项目协作者角色。

我有一个名为“合作者”的表，它将用户保存到项目映射中。

楷模：

项目

```
has_many :collaborators  
has_many :users, :through => :collaborators 
```

用户

```
has_many :collaborators
has_many :projects, :through => :collaborators 
```

合作者

```
belongs_to :user
belongs_to :project 
```

我需要一些关于为 project_admin 和 project_collaborator 角色定义 dsl 的指导。我想出了以下几点：

```
authorization do
  role :guest do
    has_permission_on :users, :to => [:read]
  end

  role :project_admin do
    has_permission_on :projects, :to => :manage do
      if_attribute :project_admin => true
    end
  end

  role :admin do
    has_permission_on :users, :to => [:delete]
  end
end

privileges do
  privilege :manage do
    includes :create, :read, :update, :delete
  end
end 
```

感谢任何建议/帮助。
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:52:42.287

我更喜欢这样的东西，这样每个用户都可以成为项目管理员：

项目

```
has_many :collaborators  
has_many :users, :through => :collaborators 
belongs_to :admin, :table_name => 'users' # Maybe has_many? 
```

授权规则.rb

```
authorization do
  role :guest do
    has_permission_on :users, :to => [:read]
  end

  role :user do
    has_permission_on :projects, :to => :create
    has_permission_on :projects, :to => :manage do
      if_attribute :admin => is { user }
    end
    has_permission_on :projects, :to => :read do
      if_attribute :collaborators => contains { user }
    end
    has_permission_on :files, :to => :manage do
      if_permitted_to :read, :project
    end
  end
end

privileges do
  privilege :manage do
    includes :create, :read, :update, :delete
  end
  privilege :read, :includes => [:index, :show]
  privilege :create, :includes => :new
  privilege :update, :includes => :edit
  privilege :delete, :includes => :destroy
end 
```

# java - 如何使用java仅在连接值之间添加空格

> ID：12656203
> 
> 赞同：3
> 
> 时间：2012-09-29T20:25:03.450
> 
> 标签：java, string, string-formatting

我有一个字符串，它应该返回多个字符串的串联，例如“bob”“bill”“steve”。最终结果应该看起来像“bob bill steve”。如何在使用 Java 的最后一个单词之前或之后添加空格而不添加空格？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T20:35:00.350

使用[番石榴库](http://code.google.com/p/guava-libraries/)：

```
String[] names = {"bill", "bob", "steve" };
String fullString = Joiner.on(" ").join(names); 
```

在 Java 8 中：

```
String fullString = String.join(" ", names) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:37:35.157

这就是我正在做的方式

```
public static boolean isEmpty(String string) {
    return string == null || string.trim().length() == 0;
}

public static String concatenate(final String separator, final String... parameters) {

    StringBuilder result = new StringBuilder("");

    for (String param : parameters) {
        if (!isEmpty(param)) {
            if (result.length() > 0) {
                result.append(separator);
            }
            result.append(param);
        }
    }

    return result.toString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T20:28:18.177

听起来您正在遍历要连接的字符串，例如：

```
StringBuilder sb = new StringBuilder();
for (String str : strings)
    sb.append(str).append(" ");  
result = sb.toString(); 
```

最后你会得到一个空格。如果是这样，您可以使用该`String.trim`方法摆脱多余的空间：

```
result = result.trim(); 
```

[`trim`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim%28%29)删除所有前导和尾随空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T20:32:00.707

我建议使用[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)，以防您遍历字符串数组。像这样的东西：

```
StringBuilder buffer = new StringBuilder();

//Assuming you have a string array;

int length = stringArray.length;

for(int index = 0; index < length; index++){
    if(index > 0)
        buffer.append(" ");
    buffer.append(stringArray[index]);
}

return buffer.toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T20:34:10.060

因为在循环中使用“+”不是最好的主意，你也可以尝试：

```
 String foo [] = {"asd", "bbb", "ccc"};
    StringBuilder sb = new StringBuilder();
    for (String string : foo) {
        sb.append(string).append(" ");
    }
    String result = sb.toString().trim(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T21:11:00.977

啊是的......我的最爱之一......你正在寻找一个`Separator`. 这是一个。它带有一些示例`static`实用程序方法来演示其使用。还有很多用法。

```
public class Separator {
  private final String sepString;
  private final String firstString;
  boolean first = true;

  // Use for url params ("?","&").
  public Separator(final String first, final String sep) {
    this.sepString = sep;
    this.firstString = first;
  }

  // Use for commas etc.
  public Separator(final String sep) {
    this("", sep);
  }

  public String sep() {
    // Return empty string first and then the separator on every subsequent invocation.
    if (first) {
      first = false;
      return firstString;
    }
    return sepString;
  }

  public void reset() {
    first = true;
  }

  @Override
  public String toString() {
    return first ? "(" + sepString + ")" : sepString;
  }

  // Utilities.
  public StringBuilder addAll(final StringBuilder buf, final Iterable<?> values) {
    if (null == values) {
      return buf;
    }
    for (final Object v : values) {
      buf.append(sep()).append(v);
    }
    return buf;
  }

  public StringBuilder addAll(final StringBuilder buf, final Iterator<?> values) {
    if (null == values) {
      return buf;
    }
    while ( values.hasNext() ) {
      buf.append(sep()).append(values.next());
    }
    return buf;
  }

  public StringBuilder addAll(final StringBuilder buf, final Object... values) {
    if (null == values) {
      return buf;
    }
    for (final Object v : values) {
      buf.append(sep()).append(v);
    }
    return buf;
  }

  public StringBuilder addAll(final StringBuilder buf, final int... values) {
    if (null == values) {
      return buf;
    }
    for (final int v : values) {
      buf.append(sep()).append(v);
    }
    return buf;
  }

  public static String separate ( String separator, int [] ints ) {
    return new Separator(separator).addAll(new StringBuilder(), ints).toString();
  }

  public static String separate ( String separator, long [] longs ) {
    return new Separator(separator).addAll(new StringBuilder(), longs).toString();
  }

  public static String separate ( String separator, Object [] objs ) {
    return new Separator(separator).addAll(new StringBuilder(), objs).toString();
  }

  public static String separate ( String separator, Set them ) {
    return new Separator(separator).addAll(new StringBuilder(), them).toString();
  }

  public static String separate ( String separator, Iterator<?> i ) {
    return new Separator(separator).addAll(new StringBuilder(), i).toString();
  }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T20:31:39.317

您可以使用 a`StringBuilder`来构建您的字符串，如下所示：

```
StringBuilder sb = new StringBuilder();
sb.append("bill").append(" ");
//and so on.. 
```

如果您的值在列表或数组中，则可以使用`for`循环来构建字符串。就像是：

```
foreach(String s: strings){
    sb.append(s).append(" ");
}
sb.toString.trim(); 
```

# iphone - 在 iphone 中添加超过 1 个视频播放器

> ID：12656204
> 
> 赞同：0
> 
> 时间：2012-09-29T20:25:08.567
> 
> 标签：iphone, ios, video-streaming

有没有办法在一个视图中添加多个视频播放器？我从服务器获取 .m4v 列表，并且必须在单页中显示那么多视频。

如果我一次播放 1 个视频并不重要，但我想要的任何视频都必须在那里播放。

所以视频被放置在另一个之下。

我曾尝试使用 mpmoviecontroller，但它的缺点是它在整个应用程序中只能有一个实例所以如果我尝试在一个视图中分配 2 个播放器，那么第一个播放器不起作用，只有一个播放器工作..

是否有任何合法的替代方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:40:45.260

MPMoviePlayerController 将允许多个实例，但在任何给定时间只有其中一个可以播放他们的电影。请检查链接：http: [//developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/MPMoviePlayerController/MPMoviePlayerController.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/MPMoviePlayerController/MPMoviePlayerController.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:04:34.863

我使用`AVPlayer`类（它也在`MPMoviePlayerController`后台使用）成功地播放了来自多个来源的多个视频。

使用它的过程比 更复杂`MPMoviePlayerController`，但我想说如果你想在你的播放器中进行一些自定义行为，它绝对值得一看。[官方编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)是一个好的开始。

# postgresql - postgresql 提取函数源码

> ID：12656205
> 
> 赞同：1
> 
> 时间：2012-09-29T20:25:30.573
> 
> 标签：postgresql, metadata, pgadmin, psql

需要使用 SQL 提取 PostgreSQL 函数的来源。

我看到其中一个函数出现了这种奇怪的行为，所有其他函数（大约 200+）都可以正常工作。

当我运行以下语句时，它可以工作：

```
select prosrc  from pg_proc where proname= 'accounts_count'; 
```

但是，当我运行以下命令时，它返回一个空字符串：

```
select  routine_definition
from    information_schema.routines
where   specific_name = 'accounts_count_66243' 
```

PostgreSQL 版本 8.3。我尝试过同时使用 pgAdmin III 和 psql。

不是一个表演停止者，但知道为什么会这样会很有用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:40:14.520

如果您查看 information_schema.routines 的定义，则可以找到以下过滤器：

```
FROM pg_namespace n, pg_proc p, pg_language l, pg_type t, pg_namespace nt
 WHERE n.oid = p.pronamespace AND p.prolang = l.oid AND p.prorettype = t.oid 
   AND t.typnamespace = nt.oid AND (pg_has_role(p.proowner, 'USAGE'::text) 
    OR has_function_privilege(p.oid, 'EXECUTE'::text)); 
```

所以我的理论：

*   相关功能的权利和所有权存在一些问题（可能） - 尝试使用不同的帐户来验证该理论（最好是 postgres）

# perl - Perl 模块，从 DBI 继承，“无法调用方法 'prepare'”错误

> ID：12656212
> 
> 赞同：-2
> 
> 时间：2012-09-29T20:26:41.357
> 
> 标签：perl, perl-module, dbi

> **可能重复：**
> [Perl + POO 和“不能调用方法”prepare“](https://stackoverflow.com/questions/12650738/perl-poo-and-cant-call-method-prepare)

我学会了便便，我开始玩 perl，创建了这个模块，但是当我调用 segudno 方法时，我跳过了以下错误“在连接中使用未初始化的值 $database (.) ...”，然后是“无法调用方法” '准备' mm 我不太明白，有什么建议吗？

```
#!/usr/bin/perl

use warnings;
use strict;
use DBI;
use DBD::mysql;

package MysqlTest;

sub new{
    my $class = shift;
    my $query={};
    bless($query, $class);
}
sub conexion{
    my $self=shift;
    my($database, $hostname, $user, $pwd)=@_;
    $self->{"host"}=$hostname;
    $self->{"database"}=$database;
    $self->{"user"}=$user;
    $self->{"pass"}=$pwd;
    our $connect = DBI->connect("DBI:mysql:database=$database;host=$hostname;", $user, $pwd) or die $DBI::errstr;
    my $mysqlopen = 1;
return;
}
sub consulta{
    my $self=shift;
    if (!my $mysqlopen) { &conexion(); }
    my $id = "SELECT * FROM save_bookmarks WHERE id='123'";
    our $result = my $connect->prepare($id);
    $result->execute();
    my @resultado = $result->fetchrow_array();
    print "@resultado\n";
    return;
}
sub datos{
    my $self=shift;
    print "::DATOS DE ACCESO::\n";
    while ((my $key, my $value)=each(%$self)){
        print "$key => $value\n";
    }
}
1; 
```

在其他文件中调用 msg 并创建了反对。

```
#!/usr/bin/perl
use MysqlTest;
use warnings;
use strict;

my $mysqltest = MysqlTest->new();
$mysqltest->conexion("bookmarks", "localhost", "root", "pass");
$mysqltest->consulta(); 
```

控制台中的此输出。

```
Use of uninitialized value $database in concatenation (.) or string at MysqlTest.pm line 23.
Use of uninitialized value $hostname in concatenation (.) or string at MysqlTest.pm line 23.
Can't call method "prepare" on an undefined value at MysqlTest.pm line 31. 
```

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:39:12.597

您的代码包括这一行：

```
if (!my $mysqlopen) { &conexion(); } 
```

你打电话给你的`conexion`潜艇没有参数。然而，这个 sub 需要几个参数，包括你不提供的祝福对象。你可能想解决这个问题。`$database`并且`$hostname`在论点中也是预期的。

您对 to 的调用`conexion`将*始终*被执行，因为`my $var`创建了一个新变量并将其初始化为`undef`— 并且否定`undef`是一个真值。

然后你有这个声明：

```
our $result = my $connect->prepare($id); 
```

`my`创建一个`$connect`您尝试在其上调用方法的新变量`prepare`。这不起作用，因为创建的变量不是受祝福的引用，而是简单`undef`的 .

### Perl 中的作用域

`my`这是一个关于Perl 中的词法作用域如何工作的详细示例

```
# $var doesn't exist

sub foo {
   # $var doesn't exist
   my $var;
   # $var exists
   bar();
   # $var exists
}

# $var doesn't exist

sub bar {
   # $var doesn't exist
   return;
}

# $var doesn't exist 
```

您在 中定义一个`my`变量，然后`mysqlopen`在`conexion`中重新定义它`consulta`。但是，它不是同一个变量，因为这些变量位于不同的范围内。

相反，您可能会在传递的对象中添加字段`mysqlopen`，`connect`因为这是对象数据。然后，您可以像使用`host`or`database`字段一样使用此信息。

另外，不要在`conexion`没有对象的情况下调用该方法。对象通常使用`new`.

* * *

### 编辑

我很难同时调试你的代码*和*解析你的英语，所以这里是你的代码，删除了最严重的错误。但是，我没有使用 DBI 的经验，所以它可能无法直接工作：

```
sub conexion{
   my $self=shift;
   die "I need args!" unless @_;
   my($database, $hostname, $user, $pwd)=@_;
   $self->{host}     = $hostname;
   $self->{database} = $database;
   $self->{user}     = $user;
   $self->{pass}     = $pwd;
   $self->{connect}  = DBI->connect(
      "DBI:mysql:database=$database;host=$hostname;",
       $user,
       $pwd,
   ) or die $DBI::errstr;
   $self->{mysqlopen}= 1;
   return;
}

sub consulta{
   my $self = shift;
   if (not $self->{mysqlopen}) {
      die "This object wants to be conexioned before you consulta anything";
      # you could also do
      #    $self->conexion(DEFAULT_VALUES);
      # but then you would really *have* to provide defaults!
   }
   my $id = "SELECT * FROM save_bookmarks WHERE id='123'";
   my $result = $self->{connect}->prepare($id);
   $result->execute();
   my @resultado = $result->fetchrow_array();
   print "@resultado\n";
   return;
} 
```

# firebreath - 获取浏览器窗口内可见区域的大小

> ID：12656214
> 
> 赞同：1
> 
> 时间：2012-09-29T20:26:55.820
> 
> 标签：firebreath

这是问题的延续（http://goo.gl/a61CG）。

我正在尝试检索包含插件的 DOM 窗口或文档的可见大小（不确定哪个术语是正确的）。我一直在研究 Firebreath 的参考资料，但我找不到答案。

例如在 onWindowAttached 我这样做：

```
m_host->htmlLog("Attaching window.");

FB::DOM::ElementPtr element_ptr(m_host->getDOMElement());
if( element_ptr )
{
    int Width  = element_ptr->getWidth();
    int Height = element_ptr->getHeight();

    std::stringstream ss;
    ss << "width: " << Width << "; height: " << Height << std::endl;
    m_host->htmlLog(ss.str());
}

FB::DOM::ElementPtr parent_element_ptr = element_ptr->getParentNode();
if( parent_element_ptr )
{
    int Width  = parent_element_ptr->getWidth();
    int Height = parent_element_ptr->getHeight();

    std::stringstream ss;
    ss << "parent props: width: " << Width << "; height: " << Height << std::endl;
    m_host->htmlLog(ss.str());
}

m_host->htmlLog("Finished attaching window."); 
```

Google Chrome ( v.23 ) 现在给我这个：

```
Attaching window.
width: 300; height: 300

Finished attaching window. 
```

300x300 像素是指命令浏览器加载插件的 hmtl 对象的大小。

那么，检索包含插件的浏览器窗口的可见区域的方法是什么？

我在 Windows 7 和 Visual Studio 2010 上使用了最新的 firebreath trunk 版本。

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:04:42.870

基本上，您应该寻找的实际上并不是如何专门使用*firebreath*执行此操作，而是如何使用 javascript 执行此操作。然后，您只需使用 DOM 元素/窗口/文档抽象来做同样的事情。

许多人没有意识到最好的浏览器插件开发人员也非常了解 javascript。

查看[屏幕宽度与可见部分](https://stackoverflow.com/questions/4987309/screen-width-vs-visible-portion)

现在，您需要确保在所有浏览器上进行测试；某些属性 IE 不会通过 IDispatch 公开（这是 FireBreath 默认使用的），在这种情况下，可能需要将自定义处理程序添加到 DOM 抽象中；如果是这种情况，请在 IRC 上与我交谈 ( [http://npapi.com/chat](http://npapi.com/chat) )，我会为您提供帮助。

# php - 套接字“无法连接 101”错误。如何解决这个问题？

> ID：12656215
> 
> 赞同：0
> 
> 时间：2012-09-29T20:27:09.927
> 
> 标签：php, sockets

我只想要一个非常简单的客户端来连接并从我知道它运行良好的 TCP 服务器读取数据。

这是我的一段代码：

```
if(!($sock = socket_create(AF_INET, SOCK_STREAM, 0)))
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);

    die("Couldn't create socket: [$errorcode] $errormsg \n");
}

echo "Socket created \n";

if(!socket_connect($sock , 'my.ip.goes.here' , port))
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);

    die("Could not connect: [$errorcode] $errormsg \n");
}

echo "Connection established \n"; 
```

我的套接字创建得很好，但连接时出错：“无法连接：[110] 连接超时”

编辑：可能是我的主机有问题吗？如果是这样，我可以尝试在那里找到问题。

编辑：我的主机看起来不错，它确实允许使用套接字。还有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:36:04.020

现在无法测试它，但可能是因为您没有指定协议。在这种情况下，

```
socket_create(AF_INET, SOCK_STREAM, SOL_TCP); 
```

会成功的...

# image - 使用 Applescript 在 Powerpoint 中最大化调整图像大小

> ID：12656216
> 
> 赞同：1
> 
> 时间：2012-09-29T20:27:11.950
> 
> 标签：image, resize, applescript, powerpoint

我在我的 macbook 上使用 MS Powerpoint 2008。我已经使用提供的 Automator 操作将一堆图像（大约 100 个）添加到一个新的 PPTX 文件中。图像居中，但并未完全最大化。边缘周围大约有 0.5-1 英寸的空间可供使用。我更喜欢垂直或水平最大化图像，或者以适合图像的方式最大化。

知道如何添加代码来确定图像（形状）是否会更好地最大化到幻灯片高度（7.5 英寸 x 72 像素/英寸）或宽度（10 英寸或 720 像素）？

到目前为止，这是我的代码：

```
tell application "Microsoft PowerPoint"
    activate
    set thePres to active presentation
    set slideCount to count slides of thePres
        repeat with a from 1 to slideCount
        set theShape to first shape of slide a of thePres
        set height of theShape to (7.5 * 70)
        set leftPos to (slide width of page setup of thePres) - (width of theShape)
        set left position of theShape to (leftPos / 2)
        set top of theShape to 0
    end repeat
end tell 
```

这是我在实施建议后更新的代码。在图像宽于高但与幻灯片中 7.5 x 10 的比例不同的情况下，我必须添加一条线来检查调整大小后高度没有超过幻灯片高度：

```
tell application "Microsoft PowerPoint"
    activate
    set thePres to active presentation
    set slideCount to count slides of thePres
    repeat with a from 1 to slideCount
        set theShape to first shape of slide a of thePres
        if height of theShape is greater than width of theShape then
            set height of theShape to (7.5 * 72)
        else
            set width of theShape to (10 * 72)
        end if
        if height of theShape is greater than 540 then
            set height of theShape to 540
        end if
        set leftPos to (slide width of page setup of thePres) - (width of theShape)
        set left position of theShape to (leftPos / 2)
        set top of theShape to 0
    end repeat
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:54:27.100

首先，为什么“将 theShape 的高度设置为 (7.5 * 70)”？

默认幻灯片高度为 7.5 * 72（7.5 英寸 * 每英寸 72 点）

假设图像已经添加到幻灯片中，您需要查看图像的宽度除以高度。如果结果为 1 或更小，则图像是方形或高于宽度，因此您需要将其垂直居中。如果它> 1，则将其水平居中。

# html - 呈现无缓存的最佳方式是什么？

> ID：12656217
> 
> 赞同：2
> 
> 时间：2012-09-29T20:27:22.953
> 
> 标签：html, no-cache

> **可能重复：**
> [使用 <meta> 标签关闭所有浏览器中的缓存？](https://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers)

我只是好奇，因为一个 html 标签对无缓存很有效。

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

或者

```
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:35:32.547

用户代理不需要支持元数据机制：

[http://www.w3.org/TR/html401/struct/global.html#h-7.4.4.1](http://www.w3.org/TR/html401/struct/global.html#h-7.4.4.1)

使用一个或两个应该不会导致问题，但是通过 HTTP 发送 NO-CACHE 指令可能会更有效。

# python - python二十一点游戏，每次循环生成新值

> ID：12656219
> 
> 赞同：1
> 
> 时间：2012-09-29T20:27:33.687
> 
> 标签：python, if-statement, python-2.7

```
def deck():
    cards = range(1, 12)
    return choice(cards)

def player():
    card1 = deck()
    card2 = deck()
    hand = card1 + card2
    print card1, card2
    while hand < 21:
        choice = raw_input("Would you like to hit or stand?: ")
        print choice
        if choice == "hit":
            hand2 = hand + deck()
            print hand2     
        elif choice == "stand": 
                return hand 
```

大家好，

我正在尝试用 python 制作一个简单的二十一点游戏。我已经走到这一步了，我似乎被困住了。当我尝试弹奏时，它会询问我是否要击打或站立哪个好；但是，我的问题是它似乎每次都在生成新的卡值。这意味着如果我击中而不是站立，它将返回原始值而不是三张牌的新值。

正如您可以告诉我的那样，我是编程新手，因此感谢您提供任何帮助，我想尽可能多地使用我自己的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:30:41.233

如果我正确理解了您的问题，那么您的问题可能 `hand2 = hand + deck()`在您内部`if`。您正在将总和分配给新值，该值甚至没有在任何地方使用..您需要更新相同的`hand`. 所以将上面的语句替换为： -

```
hand = hand + deck() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:30:51.683

```
if choice == "hit":
      hand2 = hand + deck()
      print hand2 
```

“命中”块修改`hand2`而不是`hand`.

```
if choice == "hit":
      hand += deck()
      print hand 
```

# c - scanf 验证用户输入

> ID：12656220
> 
> 赞同：0
> 
> 时间：2012-09-29T20:27:36.697
> 
> 标签：c, pointers, scanf

我需要用 pure 编写一个程序`C`。我希望用用户输入的浮点数填充一个数组，此时我的函数如下所示：

```
int fillWithCustom(float *array, int size) {
    float customNumber;
    for (i = 0; i < size; i++)
        for (j = 0; j < size; j++) {            
            printf("\n Enter [%d][%d] element: ", i , j);
            scanf("%f", &customNumber);
            *(array+i*size+j) = customNumber;
        }
    return 1;
} 
```

但是当我输入错误的数字或字符时，迭代会继续结束......（例如，我输入“a”作为第一个元素，然后两个循环都在没有 scanf 的情况下进行迭代，并且数组用`0`'s 填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:04:14.417

不要`scanf()`用于用户输入。它被编写用于格式化数据。用户输入和格式化数据就像白天和黑夜一样不同。

使用`fgets()`和`strtod()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:30:14.987

检查scanf的返回值。从 scanf 的手册页：

```
RETURN VALUE
   These functions return the number of input items  successfully  matched
   and assigned, which can be fewer than provided for, or even zero in the
   event of an early matching failure.

   The value EOF is returned if the end of input is reached before  either
   the  first  successful conversion or a matching failure occurs.  EOF is
   also returned if a read error occurs, in which case the error indicator
   for  the  stream  (see ferror(3)) is set, and errno is set indicate the
   error. 
```

要继续读取数据直到获得一些数据，请执行以下操作：

```
while(scanf("%f", &customNumber) == 0); 
```

如果您想在用户输入错误数据时失败，请执行以下操作：

```
if(scanf("%f", &customNumber) == 0)
    break; 
```

# facebook - 从 Flickr、Facebook、Instagram 和 iPhoto 中查找丢失的照片

> ID：12656224
> 
> 赞同：4
> 
> 时间：2012-09-29T20:27:49.770
> 
> 标签：facebook, image, flickr, photos, iphoto

我有将近 6 年的照片分布在以下服务中：Flickr、Facebook、Instagram 并存储在 iPhoto 中。

以编程方式找出这些服务中缺少哪些照片的最佳方法是什么？

我的一些想法：

*   使用图像缩略图的 MD5？
*   比较日期/时间时间戳？

我正在寻找一种方法来生成存在于一个服务上但不存在于另一个服务上的 URL / 文件名列表。

我对用于解决方案的语言并不挑剔，它在 OS X 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:57:35.950

使用图像缩略图的 MD5 不一定会起作用，因为不同的服务会以不同的方式裁剪图像。他们还以不同的方式压缩图像，因此您将无法使用较大样本的 md5 运行。

不幸的是，像 facebook 这样的服务也会删除所有的 EXIF 数据。

这是一种可能的解决方案：

我敢打赌，您可以将图像分成 2x2 块并获得每个网格单元的平均颜色。每张图片有四个分数。要判断相似性，您只需对图像之间的差异进行平方和即可。

这基本上只是将图像的 RGB 平均值取 4 次。这样做 4 次有助于解释轮换。

对于更简单、更快、更健壮的分析，我还建议使用 TinEye API。

如果您想自己编写相似度计算算法，请在此处寻找想法：

[图像指纹来比较许多图像的相似性](https://stackoverflow.com/questions/596262/image-fingerprint-to-compare-similarity-of-many-images)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:34:47.083

我假设您已经知道如何通过每个服务的各种 API 获取照片，并且问题的难点在于比较照片。查看关于 SO 的以下答案，了解如何做到这一点：

*   [图像比较快速算法](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm)
*   [近重复图像检测](https://stackoverflow.com/questions/1034900/near-duplicate-image-detection)

如果您不介意为网络服务付费，可以试试[Tineye 的 Match Engine](http://services.tineye.com/MatchEngine)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:50:47.403

我认为维护你的照片的本地集中数据库应该是你工作的起点。因此，如果您还没有这样的数据库（或者它不是最新的），您应该继续并从您的所有帐户中下载每条信息。

这个任务应该不会太难。有几种官方/非官方方法和工具可以从这些社交网络下载整个帐户。

1.  Facebook 直接为您提供一个[方便的 zip 文件](http://www.facebook.com/help/?page=116481065103985)，其中包含您的所有图像、墙贴等，只需转到`account settings`然后选择`download a copy`您的数据。
2.  Flickr 有一个很好的工具叫做[Bulkr](http://clipyourphotos.com/bulkr)来下载你所有的照片。
3.  Instagram 似乎没有提供完成此任务的官方工具，但您可以在[Instagram Downloader](http://howto.cnet.com/8301-11310_39-57487154-285/download-all-instagram-photos-from-any-user-or-your-own/)和[Instaport](http://thenextweb.com/apps/2011/07/01/instaport-download-your-entire-instagram-archive-for-backup-or-upload/)之间进行选择。
4.  iPhoto 应该已经同步。

既然您的所有照片都在您的 PC 上，您就必须弄清楚哪些是相同的、相似的等等。我认为[这个问题](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm)应该为这个问题提供解决方案。

个人投[这个方法](https://stackoverflow.com/a/8072544/1396334)，希望[pHash](http://phash.org/download/)可以编译下`OS X`。如果**pHash**编译并工作，您可以执行第一次传递`MD5`，`SHA1`或任何其他方式来识别*完全匹配*。如果没有这样的匹配，您可以运行**pHash**来查看两个图像的*接近程度。*

我可以（有足够的时间）`bash`在 Linux 下编写所有内容。我想这也`Mac OS X`可以在 .

当您发现给定服务中缺少哪些照片时，您最终可以将它们推送到该服务。但我想这里又开始了另一个问题:)

# angularjs - AngularJS 和一个失败的 templateUrl

> ID：12656226
> 
> 赞同：2
> 
> 时间：2012-09-29T20:27:54.793
> 
> 标签：angularjs

当模板Url 分配给指向控制器的路由时导致 404 错误或 500 错误时，有谁知道如何在 AngularJS 中捕获错误？当发生故障时，我在控制台中看到了问题，但我似乎无法指示 angularJS 优雅地处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T08:37:40.247

John Lindquist 提供了这个示例（[1] 中的 js），它使用总体 AppCtrl 来监听 $routeChangeError [2]。我认为这会因为加载 templateUrl 的错误而触发，但我还没有测试过。通过 [3]。

[1] [https://github.com/johnlindquist/angular-resolve/blob/master/client/js/app.js#L51](https://github.com/johnlindquist/angular-resolve/blob/master/client/js/app.js#L51)

[2] [http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$route

[3] [https://groups.google.com/forum/?fromgroups=#!topic/angular/KUIVbdlGGbE](https://groups.google.com/forum/?fromgroups=#!topic/angular/KUIVbdlGGbE)

# c# - 调试时使用 WorkflowInvoker 发生疯狂的内存泄漏

> ID：12656231
> 
> 赞同：1
> 
> 时间：2012-09-29T20:28:34.357
> 
> 标签：c#, .net, .net-4.0, memory-leaks, workflow-foundation-4

**编辑：**看来我的问题患有 TL;DR 综合症。因此，您可以选择观看我发现的演示该问题的视频，而不是阅读问题：[http](http://www.youtube.com/watch?v=xD0mRWJazis) ://www.youtube.com/watch?v=xD0mRWJazis 。视频中未显示：仅在附加调试器时发生。

* * *

我有一个使用`WorkflowInvoker`Windows Workflow Foundation 4.0 的应用程序。似乎当 Visual Studio 2010 调试器附加到进程时，每次我调用`WorkflowInvoker.Invoke(...)`进程大小都会增长大约 440 KB，直到进程增长到几 GB 并且我的计算机内存不足导致应用程序冻结和调试器崩溃（我的应用程序只需要一分钟左右即可到达那里）。**未附加调试器时，不会发生内存泄漏。**

![Visual Studio 2010 状态栏显示](../Images/b3df08f716b90c31eaff5e859364e30d.png)

如上面的屏幕截图所示，每次调用工作流时，Visual Studio 的状态栏都会显示*Loading symbols for Workflow...*即使它执行相同的工作流。我猜这与内存泄漏有关。我尝试通过转到*工具*>*选项*>*调试*>*符号*并在*自动加载符号*下禁用符号加载，我选择了*仅指定的模块*并确保没有指定模块。这没有帮助，进程大小仍然稳定增长，Visual Studio 仍然加载工作流符号。

以下是重现该问题的最少代码。在使用和不使用调试器运行任务管理器时查看它（小心，调试时它会很快耗尽内存！）：

```
var workflow = new WorkflowInvoker(new Sequence());

while (true)
    workflow.Invoke();   ////  Memory leak!  //// 
```

下面包括一个更扩展的控制台程序，它在显示内存消耗的同时演示了该问题。它每秒只运行大约 100 个空工作流。尝试在不调试 ( `Ctrl`+ `F5`) 的情况下运行它，并将其与在调试时运行 ( `F5`) 进行比较。您会立即看到不同之处。如果您不想运行示例，我将结果作为屏幕截图包含在下面。

```
using System;
using System.Activities;
using System.Activities.Statements;
using System.Diagnostics;
using System.Threading;

class Program
{
    static Timer Timer = new Timer(PrintMemory, null, 1000, 1000);
    static double PreviousSize;

    static void Main(string[] args)
    {
        Console.WriteLine("Debugger {0} attached.",
            Debugger.IsAttached ? "IS" : "is NOT");

        var workflow = new WorkflowInvoker(new Sequence());

        while (true)
        {
            workflow.Invoke();   ////  Memory leak!  ////
            Thread.Sleep(10);
        }
    }

    static void PrintMemory(object o)
    {
        double newSize = Process.GetCurrentProcess().PrivateMemorySize64 / 1048576d;
        Console.WriteLine("Grew by {0,5:F2} MB (total {1,7:F2} MB)",
            newSize - PreviousSize, newSize);
        PreviousSize = newSize;
    }
} 
```

这是程序在不带调试和带调试的情况下运行 30 秒：

![包含的示例应用程序运行 30 秒，左侧没有调试器，显示稳定的 33 MB 内存占用，右侧有调试器显示内存占用以每秒 43 MB 的速度增长，仅 30 秒后达到 1.6 GB。](../Images/5e15f32b94f7da7ad375d12b84baea33.png)

如您所见，内存每秒增长约 43 MB。我必须能够在调试器下运行我的应用程序。有什么建议么？

**编辑：**我在[这里](https://connect.microsoft.com/VisualStudio/feedback/details/765683)为这个问题打开了一个连接错误。

**编辑：**嗯，这是一个半身像。显然 Connect 仅适用于最新和最伟大的。VS2012 整整十分钟前已经 RTMed，但 connect 不再接受 VS2010 的任何反馈。我的下一站：[WF4 论坛上的帖子](http://social.msdn.microsoft.com/Forums/pl-PL/wfprerelease/thread/ec1f1851-44b4-4566-9e90-60643c0e950d)。手指交叉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:06:39.180

正如 Tim Lovell-Smith 在[我发布的 MSDN 论坛问题](http://social.msdn.microsoft.com/Forums/pl-PL/wfprerelease/thread/ec1f1851-44b4-4566-9e90-60643c0e950d)中正确指出的那样，这是 .NET 4.0 中的一个已知错误，已在 .NET 4.5 中修复。幸运的是，只需[安装 .NET 4.5](http://www.microsoft.com/en-us/download/details.aspx?id=30653)也可以解决 Visual Studio 2010 的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:37:05.223

对我来说听起来像是一个[Heisenbug](http://en.wikipedia.org/wiki/Heisenbug)，并不奇怪，因为@dbam987 已经指出垃圾收集器在调试时的工作方式与正常构建不同。

如果您想了解您的应用程序的内存行为，您应该测试的唯一方法是使用**未**在附加调试器的情况下运行的**发布**版本。就此而言，甚至不要在没有调试的情况下从 VS2012 启动它，从资源管理器中启动它。

 **鉴于您指出没有调试器就没有内存泄漏，我会说您没有什么可担心的。因此，当您开始寻找一个时，这只会变成一个[Heisenbug 。](http://en.wikipedia.org/wiki/Heisenbug)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:22:36.793

尝试使用**WorkflowApplication**组件而不是**WorkflowInvoker**启动您的工作流。**它的设置与使用WorkflowInvoker**非常相似。

```
using System;
using System.Activities.Statements;
using System.Threading;

public class Program
{
    public static void Main(string[] args)
    {
        // Setup the sample workflow.
        var workflow = new Sequence
            {
                Activities =
                    {
                        new WriteLine { Text = "Hello World!" },
                        new Delay { Duration = TimeSpan.FromSeconds(3) },
                        new WriteLine { Text = "Done!" }
                    }
            };

        // Setup the workflow host.
        var syncWorkflowEvent = new AutoResetEvent(false);
        var workflowApp = new WorkflowApplication(workflow);
        workflowApp.Completed = eventArgs => syncWorkflowEvent.Set();
        workflowApp.Run();
        syncWorkflowEvent.WaitOne();
    }
} 
```**

# javascript - 字符串 (x,y) 到对象 {x, y}

> ID：12656232
> 
> 赞同：1
> 
> 时间：2012-09-29T20:28:42.593
> 
> 标签：javascript, regex

将 PostgreSQL 点转换为`"(5.035,1)"`to格式的最有效方法是`{x: 5.035, y: 1}`什么？

我用 PHP 写的函数看起来像

```
function pointToArray($point) {
    if ( strlen($point) == 0 ) return null;

    $xy = explode(",", substr($point, 1, strlen($point)-2));

    return array(
        "x" => $xy[0], 
        "y" => $xy[1]
    );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:55:29.487

您可以在 Javascript 中使用与在 PHP 中相同的方法：

```
function pointToObject(point) {
  if(!point.length) return null;
  var split = point.slice(1, -1).split(",");
  return {
    x: +split[0],
    y: +split[1]
  };
} 
```

我刚刚做的一个简单的基准测试能够在 1.53 秒内执行这个函数 200 万次。

而且，为了更好的衡量，这是一个从 NullUserException 无耻地窃取的正则表达式解决方案，在大多数浏览器上[速度略快](http://jsperf.com/point-conversion/8)

```
function conv(s) { 
   var rx = /\(([^,]+),\s*([^)]+)\)/g; 
   var m = rx.exec(s); 
   return (!m ? null : { x: +m[1], y: +m[2]}); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:02:35.297

假设问题中的那个*点*`ST_X`意味着可以使用和提取数字的地理点`ST_Y`。然后可以使用 Postgres 的字符串连接（如果使用当前版本，则使用其 JSON 函数）重新组合这些值。

在 SQL 中进行转换可能比使用 JavaScript 的 PHP 更快、更可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T21:20:23.860

这避免了为拆分创建字符串数组的开销：

```
function pointToObject(point) {
   var i = point.indexOf(",");
   if(i==-1) return null;
   return {
     x: point.substr(1, i-1),
     y: point.substr(i+1, point.length-i-2)
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T20:49:33.297

这很短，但很讨厌，利用了`(x, y)`有点像参数列表的事实：

```
function c(x, y) {
    return {x:x, y:y};
};

p = "(5.035, 1)";
a = eval("c" + p); 
```

# windows - 如何为 RawInput HID 设备获取人类可读的名称？

> ID：12656236
> 
> 赞同：10
> 
> 时间：2012-09-29T20:29:31.097
> 
> 标签：windows, device, hid

我正在将应用程序从 DirectInput 切换到 RawInput 以进行游戏手柄处理，并且我想为每个游戏手柄提供人类可读的描述。理想的情况是出现在设备管理器中的设备文本，但 USB 产品描述也可以。任何方法都应该在没有管理员许可的情况下工作。

到目前为止，我发现了一[组线索](http://www.retroremakes.com/remaketalk/index.php?p=/discussion/1025/getting-the-human-readable-name-of-a-hid-/p1)：注册表中似乎有一个文本字段，其下`HKLM\SYSTEM\CurrentControlSet\Control\MediaProperties\PrivateProperties\Joystick\OEM`与 DirectInput 提供的名称相同。这并不完美 - 我有一个在设备管理器中以英文显示的游戏手柄，但在注册表中列为氀。

有没有办法从提供的 HANDLE`WM_INPUT`到设备管理器描述？[`HidD_GetProductString`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff539681%28v=vs.85%29.aspx)看起来很有希望，但我不知道如何从 RawInput 句柄中获取 Hid 顶级集合句柄。

编辑：我有一个设备实例路径（例如`\\?\HID#VID_1267&PID_A001#8&1d630df6&0&0000#{4d1e55b2-f16f-11cf-88cb-001111000030}`，这可能足以从 SetupAPI 中提取我需要的信息。有没有人知道如何在给定实例路径的情况下到达此路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T22:18:04.957

我一直有类似的问题，并相信我找到了一个潜在的解决方案。

看来您必须`CreateFile`使用 RawInput 提供的名称`GetRawInputDeviceInfo`作为`RIDI_DEVICENAME`参数`uiCommand`的参数进行调用。这将为您提供可以调用的设备的句柄`HidD_GetProductString`。

```
wchar_t DeviceName[126];
HANDLE HIDHandle = CreateFile(RawInputDeviceName, GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, NULL, NULL);
if(HIDHandle)
{
    BOOLEAN Result = HidD_GetProductString(HIDHandle, DeviceName, sizeof(wchar_t) * 126);
    CloseHandle(HIDHandle);
} 
```

但是，似乎`HidD_GetProductString`在我系统上连接的大多数设备上都失败了，并且似乎只在我的 USB 键盘和网络摄像头上成功了。我的 USB 鼠标没有成功。我还没有发现为什么会这样，但也许我的进步会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T17:17:46.203

您可以获得顶级集合的句柄，如下所述：[https ://msdn.microsoft.com/en-us/library/windows/hardware/ff538731%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/hardware/ff538731%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-12T15:48:55.633

对于 HID 设备，您可以使用`HidD_GetProductString`，但键盘和鼠标不能通过 Windows 上的 HID API 使用，并作为单独的设备类型公开：[GUID_DEVINTERFACE_KEYBOARD](https://docs.microsoft.com/windows-hardware/drivers/install/guid-devinterface-keyboard) / [GUID_DEVINTERFACE_MOUSE](https://docs.microsoft.com/windows-hardware/drivers/install/guid-devinterface-mouse)（出于安全原因，用户模式应用程序无法直接读取它们）。

您可以从设备接口符号链接获取他们的设备信息，如下所示：

*   使用`CM_Get_Device_Interface_Property`或`SetupDiGetDeviceInterfaceProperty`with`DEVPKEY_Device_InstanceId`获取设备实例 ID（一个设备可以有多个接口）。

*   获得设备实例 ID 后，您可以使用`CM_Get_DevNode_Property`或`SetupDiGetDeviceProperty`with`DEVPKEY_NAME`来获取设备的本地化友好名称（显示在设备管理器中）。

[这是我的测试仓库](https://github.com/DJm00n/RawInputDemo/blob/6e3eeba3517a587a2efa30a676cee950fb043e9a/RawInputLib/RawInputDevice.cpp#L54-L109)`CM_*`中通过API的示例代码：

```
bool FillDeviceInfo(const std::wstring& deviceInterfaceName)
{
    // you need to provide deviceInterfaceName
    // example from my system: `\\?\HID#VID_203A&PID_FFFC&MI_01#7&2de99099&0&0000#{378de44c-56ef-11d1-bc8c-00a0c91405dd}`

    DEVPROPTYPE propertyType;
    ULONG propertySize = 0;
    CONFIGRET cr = ::CM_Get_Device_Interface_PropertyW(deviceInterfaceName.c_str(), &DEVPKEY_Device_InstanceId, &propertyType, nullptr, &propertySize, 0);

    if (cr != CR_BUFFER_SMALL)
        return false;

    std::wstring deviceId;
    deviceId.resize(propertySize);
    cr = ::CM_Get_Device_Interface_PropertyW(deviceInterfaceName.c_str(), &DEVPKEY_Device_InstanceId, &propertyType, (PBYTE)deviceId.data(), &propertySize, 0);

    if (cr != CR_SUCCESS)
        return false;

    // here is deviceId will contain device instance id
    // example from my system: `HID\VID_203A&PID_FFFC&MI_01\7&2de99099&0&0000`

    DEVINST devInst;
    cr = ::CM_Locate_DevNodeW(&devInst, (DEVINSTID_W)deviceId.c_str(), CM_LOCATE_DEVNODE_NORMAL);

    if (cr != CR_SUCCESS)
        return false;

    propertySize = 0;
    cr = ::CM_Get_DevNode_PropertyW(devInst, &DEVPKEY_NAME, &propertyType, nullptr, &propertySize, 0);

    if (cr != CR_BUFFER_SMALL)
        return false;

    std::wstring friendlyString;
    friendlyString.resize(propertySize);
    cr = ::CM_Get_DevNode_PropertyW(devInst, &DEVPKEY_NAME, &propertyType, (PBYTE)friendlyString.data(), &propertySize, 0);

    // here is friendlyString will contain localized device friendly name

    propertySize = 0;
    cr = ::CM_Get_DevNode_PropertyW(devInst, &DEVPKEY_Device_Manufacturer, &propertyType, nullptr, &propertySize, 0);

    if (cr != CR_BUFFER_SMALL)
        return false;

    std::wstring manufacturer;
    manufacturer.resize(propertySize);
    cr = ::CM_Get_DevNode_PropertyW(devInst, &DEVPKEY_Device_Manufacturer, &propertyType, (PBYTE)manufacturer.data(), &propertySize, 0);

    // here is manufacturer will contain localized device "manufacturer-identifier"

    return true;
} 
```

更新：原来`HidD_GetProductString`和家人正在为 HID 键盘和鼠标工作。您只需以只读方式打开其设备接口（路径）。例如，请参阅[https://github.com/DJm00n/RawInputDemo/blob/master/RawInputLib/RawInputDevice.cpp#L77-L86](https://github.com/DJm00n/RawInputDemo/blob/master/RawInputLib/RawInputDevice.cpp#L77-L86)。

# php - 打印时如何确保页脚始终位于最后一页的底部？

> ID：12656237
> 
> 赞同：1
> 
> 时间：2012-09-29T20:29:43.733
> 
> 标签：php, javascript, html, css

我是网页设计的新手，我已经搜索了答案并尝试了几乎所有我能找到但无法得到我想要的东西。好的，我知道在浏览器中将页脚粘贴到页面底部有很多解决方案。但我的问题不是关于页脚在浏览器中的外观，而是在打印输出中。我的布局是这样的：

```
<html>
<body>
  <div id="content">
     <table>
       more divs... more content...
     </table>
      <table>
        more divs... more content...
     </table>
     ....
  </div>
  <footer>
     <table>
      ....
     </table>
  </footer>
</body>
</html> 
```

请注意我的内容是动态的，根据用户输入可以是长的也可以是短的。在浏览器中我没有任何问题，页脚位于内容的底部。但在打印输出中，我希望此页脚位于最后一页的底部（并且我希望它主要仅在 IE 浏览器中工作。IE 7、8 和 9）。因此，如果内容很长，并且打印了 3 页，页脚应该只出现在最后一页的底部。请告诉我如何才能完成这项工作？当内容很长时，大多数在线解决方案（如粘页脚）在打印输出中不起作用......它们会粘在打印输出中的内容底部，正如您在打印预览中看到的那样。我将非常感谢任何帮助。简单的 css 解决方案更好，但如果没有其他解决方案，我准备尝试 js、PHP 以及即使我是初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:04:41.400

好的，已经有一段时间了，但答案可能会对某人有所帮助。就像我在问题中所说的那样，我必须使其仅在 IE 中工作。. 它适用于 IE7 8 和 9。我相信也适用于 chrome。

```
<html>
<head>
<style type="text/css">
@media print
{

body, html{
    height:100%;
    padding:0;
}
#wrapper{
    position:relative;
    min-height:100%;
}
#lines{
    padding-bottom:40px;
}
#footer{
    position: absolute; 
    bottom: 20px; 
    left: 4px; 
    right: 4px;
}
}

</style>
</head>
<body>

<div id="wrapper">
<div id="header"></div>
<div id="lines">

 //main content here

</div>

<div id="footer">
//Footer content
</div>
</div>

</body>
</html> 
```

就我而言，我有一个很长的 php 文件，它每次都会动态更改内容，所以我不确定这个解决方案是否总是有效。所以我用我的主要内容创建了一个 body.php，用页脚内容创建了一个 footer.php。然后以上述解决方案的格式创建另一个 php，并将 body.php 包含在“lines”div 中，将 footer.php 包含在“footer”div 中。效果很好。您必须将填充调整为“lines div”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:45:33.060

如果页面较长，页脚将自动打印在最后一页。如果要自定义打印，可以使用特殊的 css 文件。

```
<link rel="stylesheet" type="text/css" href="print.css" media="print" /> 
```

这将仅用于打印，您可以像使用普通 css 文件一样使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:13:54.410

您可以使用样式来实现此目的。请注意，`html5`并非所有浏览器都支持这些元素。所以附加`ids/classes`元素并为其分配自定义样式。

```
<!DOCTYPE html> 
<html> 
  <head> 
    <title>Testing</title> 
    <style type="text/css" media="print">
      html, body { margin: 0; padding: 0; }
      body { height: 11in;  width: 8.5in; }
      #footer { position: absolute; bottom: 0; }
    </style> 
  </head> 
  <body>
    <div id="content">
        <table>
          more divs... more content...
        </table>
        <table>
          more divs... more content...
        </table>
        ....
    </div>    
    <div id="footer"> 
      This will always print at the bottom
    </div> 
  </body> 
</html> 
```

注意我只为印刷媒体添加了样式：

```
<style type="text/css" media="print">
      html, body { margin: 0; padding: 0; }
      body { height: 11in;  width: 8.5in; }
      #footer { position: absolute; bottom: 0; }
</style> 
```

# c++ - 默认模板参数的“重新定义”

> ID：12656239
> 
> 赞同：8
> 
> 时间：2012-09-29T20:29:46.163
> 
> 标签：c++, visual-studio, templates, default-parameters

对于以下代码，我对 Visual C++ 2010 有一个奇怪的编译警告：

```
#include <iostream>

class test
{
    public:
        template<class obj>
        class inner
        {
        private:
            // Line 11:
            template<int index, bool unused = true> struct AttributeName;

        private:
            template<bool b>
            struct AttributeName<0,b>
            {
                static inline const char* get()
                {
                    return "prop";
                }
            };

        public:
            typedef AttributeName<0> propname;
        };
        typedef inner<test> description;
};

int main()
{
    test t;
    std::cout << test::description::propname::get(); // Line 32
    return 0;
} 
```

警告：

```
file.cpp(11) : warning C4348: 'test::inner<obj>::AttributeName' : redefinition of default parameter : parameter 2 (with [ obj=test ])
file.cpp(11) : see declaration of 'test::inner<obj>::AttributeName' (with [ obj=test ])
file.cpp(32) : see reference to class template instantiation 'test::inner<obj>' being compiled (with [ obj=test ]) 
```

我不明白的是`AttributeName`“重新定义”与定义在同一行......听起来像一个错误

我注意到制作`inner`非模板类会删除警告。但是，这不是一个选项，因为实际代码比这个测试用例更复杂，需要模板化。

此外，如果警告被视为错误，则此代码将无法编译...

[它在 GCC 上编译时没有警告](http://ideone.com/CbJ5S)。

为什么 msvc 会输出这样的警告并且有解决方法吗？

**编辑**

以下修改：

```
template<int index, bool unused = true> struct AttributeName {}; 
```

似乎消除了警告。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T21:09:51.913

这主要是一个猜测，因为这似乎解决了（？）它：

```
template<int index, bool unused = true> struct AttributeName;
template<int index, bool unused> struct AttributeName
{
}; 
```

我的猜测是，前向声明既被视为声明又被视为“定义”，因为它看不到其他任何内容，因此它抱怨默认值被“重新定义”，即使它是同一行。可能是无意的，尽管 2012 年表现相同。

# jquery - Jquery：如何跳过第一个元素时间

> ID：12656249
> 
> 赞同：1
> 
> 时间：2012-09-29T20:30:55.400
> 
> 标签：jquery, loops, element, repeat, skip

在这个代码片段中，我想减少（跳过）第一个元素的时间，因为它需要很长时间才能出现在屏幕上（10000），这可能吗？！

```
$(document).ready(
    function()
    {
        var i = 0;
        setInterval(
        function() {
             $('.handler').html(i + "<br />");
             i = (++i) % 3;
        }
        , 10000);
    }
); 
```

这段代码的结果：

```
screen empty
1
2
3
1
2
3
and so on ... 
```

感谢@aTo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:33:45.513

将您的代码放在一个函数中，在页面加载时运行该函数，然后使用间隔每十秒运行一次该函数：

```
$(function() {
    var i = 0;

    go();
    setInterval(go, 10000);

    function go() {
       $('.handler').html(i + "<br />");
       i = (++i) % 3;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:34:06.190

最简单的做法是先声明计时器函数，然后在启动之前只调用一次`setInterval`：

```
var i = 0;
function timer() {
     $('.handler').html(i + "<br />");
     i = (i + 1) % 3;
}

timer();
setInterval(timer, 10000); 
```

# php - Zend_Test、身份和cookies

> ID：12656250
> 
> 赞同：1
> 
> 时间：2012-09-29T20:31:07.273
> 
> 标签：php, zend-framework, phpunit, zend-test

我有 ZF1 站点，我正在使用 phpunit 对其进行测试。
我想从一个测试（登录）存储cookie并将其传递给其他测试（发布消息等）。

或者有什么方法可以设置身份？

此方法不起作用：

```
class IntegrationalTest extends ControllerTestCase {

    protected $identity;

    public function test1()
    {
        // some code here
        $this->assertTrue(Zend_Auth::getInstance()->hasIdentity()); // GOOD
        $this->identity = Zend_Auth::getInstance()->getIdentity();
    }

    public function test2() {
        Zend_Auth::getInstance()->getStorage()->write($this->identity);
        $this->assertTrue(Zend_Auth::getInstance()->hasIdentity()); // FAILED!
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:37:10.463

这样做与单元测试的想法相冲突。测试是孤立的。您不会在它们之间传递任何状态。使用[固定装置](http://www.phpunit.de/manual/3.2/en/fixtures.html)来设置环境。如果您测试模型，请不要使用 ControllerTestCase。请改用 PHPUnit_Framework_TestCase。

# javascript - 带有 3 个分隔文件的 Javascript 继承

> ID：12656253
> 
> 赞同：2
> 
> 时间：2012-09-29T20:31:23.650
> 
> 标签：javascript, html, inheritance

您好我有 3 个 javascript 文件：Game.js、Player.js、Drawable.js。现在在 Game.js 中，我想创建一个对象 _player，它是 Drawable，然后是 Player。这意味着 _player 是一个播放器对象，它是一个扩展 Drawable 的类。

**可绘制的.js**

```
function Drawable(x, y, src)
{
  this.x = x;
  this.y = y;
  this.img = new Image();
  this.img.src = src;
  this.width = this.img.width;
  this.height = this.img.height;

  this.draw = function(canvas) 
  {   
    canvas.drawImage(this.img,this.x, this.y);
  }

  this.midpoint = function() 
  {
    return {
      x: this.x + this.width/2,
      y: this.y + this.height/2};
    }

  }
} 
```

**播放器.js**

```
function Player()
{
  this.moveLeft = function()
  {
    this.x -= 3;
  }

  this.moveRight = function()
  {
    this.x += 3;
  }

  this.moveUp = function() 
  {
    this.y -= 3;
  }

  this.moveDown = function()
  {
    this.y += 3;
  }
} 
```

**游戏.js**

```
var _player;

 _player = new Player();

 _player.draw(...);
 _player.moveLeft();
 ...
 ... 
```

这就是我想做的。我试图把 Player.prototype = new Drawable; 但它不起作用。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:40:39.193

如果您希望播放器对象的行为可以调用

```
player.draw(...);
player.moveLeft(...); 
```

那么`draw`and`moveLeft`函数需要作为属性存储在每个玩家对象（yikes）中或玩家对象原型链的某个位置。

这对您的实际代码提出了一条评论：这些函数应该在原型中，而不是实际对象中。

所以，要回答你的实际问题......

*   您应该做的第一件事是将方法放在原型中。

*   然后你需要让玩家原型的原型成为所有可绘制对象的原型。

这可能听起来令人困惑，但这里是金钱线：

```
Player.prototype = Object.create(Drawable.prototype); 
```

在使用. *_* `new Player`:)

**附录**

[*现场演示*](http://jsfiddle.net/wtdM3/)——它还向您展示了如何执行“构造函数”，以便您可以构建具有初始 x 和 y 的播放器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:42:57.537

Coffeescript 是一种具有基于类的对象模型的语言，该对象模型是在 javascript 的原型对象模型之上建模的。在他们的页面上，您可以看到一个示例，当它被编译为 javascript 时，[extends 关键字在 coffeescript 中的工作方式。](http://coffeescript.org/#classes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T20:49:09.553

这可能不是你的考虑因素。也许这不是您曾经考虑过的东西，但是为什么不制作一个`Drawable`组件，通过依赖注入在构建期间或之后不久将其提供给玩家。

```
var Drawable = function () { ... };
var Player = function () { ... };

var player = new Player(new Drawable(), new Controlable(), new Physical()); 
```

# grails - 创建 groovy 类

> ID：12656265
> 
> 赞同：2
> 
> 时间：2012-09-29T20:32:33.807
> 
> 标签：grails, groovy

我正在尝试学习如何创建简单的 groovy 类，它们不是域类。我想在我的软件中创建一组类（及其对象），但无意保存到数据库中。具体来说，我有一个关于如何创建一个具有作为第二类列表的属性的类的问题。像这样：

```
class oParent{
    def fName
    def lName
    def listOfChildren
}
class oChild{
    def propertyOne
    def propertyTwo
} 
```

所以，通过这个例子，我可以像这样创建每个对象：

```
def p = new oParent();
def cOne = new oChild();
def cTwo = new oChild();

p.fName ="SomeName"
p.lName ="some Last Name"

cOne.propertyOne = "a"
cOne.propertyTwo = "b"

cTwo.propertyOne = "c"
cTwo.propertyTwo = "d" 
```

那么，如何将每个子对象（cOne 和 cTwo）添加到父对象 p）。添加后，我将如何遍历父类的子类属性，例如，打印所有子类的所有 propertyTwo 属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T08:52:43.790

这是您的代码的注释版本，其中包含一些更改建议：

```
// 1) Class names start with a Capital Letter
class Parent {

  // 2) If you know the type of something, use it rather than def
  String fName
  String lName

  // 3) better name and type
  List<Child> children = []

  // 4) A utility method for adding a child (as it is a standard operation)
  void addChild( Child c ) {
    children << c
  }

  // 5) A helper method so we can do `parent << child` as a shortcut
  Parent leftShift( Child c ) {
    addChild( c )
    this
  }

  // 6) Nice String representation of the object
  String toString() {
    "$fName, $lName $children"
  }
}

// See 1)
class Child{

  // See 2)
  String propertyOne
  String propertyTwo

  // See 6)
  String toString() {
    "($propertyOne $propertyTwo)"
  }
}

// Create the object and set its props in a single statement
Parent p = new Parent( fName: 'SomeName', lName:'some Last Name' )

// Same for the child objects
Child cOne = new Child( propertyOne: 'a', propertyTwo: 'b' )
Child cTwo = new Child( propertyOne: 'c', propertyTwo: 'd' )

// Add cOne and cTwo to p using the leftShift helper in (5) above
p << cOne << cTwo

// prints "SomeName, some Last Name [(a b), (c d)]"
println p 
```

然后，您可以这样做：

```
println p.children.propertyTwo // prints "[b, d]" 
```

或这个：

```
p.children.propertyTwo.each { println it } // prints b and d on separate lines 
```

或者，确实是这样：

```
p.children.each { println it.propertyTwo } // As above 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:05:51.223

好吧，事实证明这很简单，除非我做错了。我是这样做的：

```
class oParent{
   def fName
   def lName
   def listOfChildren = []
}

class oChild{
   def propertyOne
   def propertyTwo
}

def p = new oParent();
def cOne = new oChild();
def cTwo = new oChild();

p.fName ="SomeName"
p.lName ="some Last Name"

cOne.propertyOne = "a"
cOne.propertyTwo = "b"

cTwo.propertyOne = "c"
cTwo.propertyTwo = "d"

p.listOfChildren.add(cOne)
p.listOfChildren.add(cTwo) 
```

我可以这样迭代：

```
p.listOfChildren.each{ foo->
    log.debug(foo.propertyOne)
} 
```

# javascript - jqueryui小部件的重载方法

> ID：12656266
> 
> 赞同：0
> 
> 时间：2012-09-29T20:32:39.997
> 
> 标签：javascript, jquery, jquery-ui

我对 jquery/jqueryui 还很陌生，但我进步很快。我有很多重复的代码，一定有办法重构。

因此，例如，我定义了一大堆自动完成小部件，如下所示：

```
 $( "#workOrderSearchCustomer" )
    .autocomplete({
       source: function( request, response ) {
          $.getJSON( "/autocomplete/customers", {
             term: acExtractLast( request.term )
          }, response )
       },
       search: function() {
          // custom minLength
          var term = acExtractLast( this.value );
          if ( term.length < 2 ) {
             return false;
          }
       },
       focus: function() {
          // prevent value inserted on focus
          return false;
       },
       select: function( event, ui ) {
          var terms = acSplit( this.value );
          // remove the current input
          terms.pop();
          // add the selected item
          terms.push( ui.item.value );
          // add placeholder to get the comma-and-space at the end
          terms.push( "" );
          this.value = terms.join( ", " );

          // update the search
          searchAndReloadWorkorderTabs();
          return false;
       }
 }); 
```

除了更改回调函数和自动完成内容的位置外，它们都使用相同的代码。在这种情况下，从小部件到小部件的变化只是“/autocomplete/customers”和 searchAndReloadWorkorderTabs()

我希望能够做类似的事情：

```
 $( "#workOrderSearchCustomer" )
    .autocomplete( initAutoComplete( 
       "autocomplete/customers", 
       searchAndReloadWorkorderTabs
    )); 
```

并且让这个填充所有的方法只改变改变的两件事，所以我不必拥有所有这些重复的代码。解决这个问题的标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:12:48.467

您可以引入一个负责构造配置对象的函数。它与您的代码基本相同，但从函数的闭包中获取参数。调用将如您的问题中所示。

```
function initAutoComplete(endpointURI, callbackFunction){
   return {
       source: function( request, response ) {
          $.getJSON( endpointURI, {
             term: acExtractLast( request.term )
          }, response )
       },
       search: function() {
          // custom minLength
          var term = acExtractLast( this.value );
          if ( term.length < 2 ) {
             return false;
          }
       },
       focus: function() {
          // prevent value inserted on focus
          return false;
       },
       select: function( event, ui ) {
          var terms = acSplit( this.value );
          // remove the current input
          terms.pop();
          // add the selected item
          terms.push( ui.item.value );
          // add placeholder to get the comma-and-space at the end
          terms.push( "" );
          this.value = terms.join( ", " );

          // update the search
          callbackFunction();
          return false;
       }
    }
} 
```

# graphics - 延迟着色中的全屏正方形有名称吗？

> ID：12656267
> 
> 赞同：2
> 
> 时间：2012-09-29T20:32:44.477
> 
> 标签：graphics, 3d, terminology

在延迟着色中，使用第二个渲染通道，绘​​制覆盖整个屏幕的正方形。这个广场有常用的名字吗？我想写一些关于延迟着色的东西，并且经常称它为“正方形”，感觉很尴尬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:31:46.683

**全屏四边形**

这就是我通常所说的方式，它似乎是关于后处理的文章中最常用的术语。从技术上讲，您也可以将其称为全屏矩形。

*Square*不正确，因为渲染图像的纵横比可能是 != 1。

# android - 适用于 Android 的替代 Mytrack

> ID：12656275
> 
> 赞同：-1
> 
> 时间：2012-09-29T20:33:40.723
> 
> 标签：android

我想创建一个应用程序来记录我的慢跑/步行路线，类似于我的轨道应用程序 (http://www.google.com/mobile/mytracks/)。我想记录位置，在谷歌地图中显示并与其他用户交流。我需要从某事开始，比如一个计划。我应该如何开始？或者至少有人可以建议我需要使用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:41:15.377

以下是您需要学习如何做的一些事情：

*   从您的设备 GPS 获取当前位置
*   将多个位置存储到一条路径中，过滤掉噪声并将点数减少到合理的数量
*   在 Google 地图视图上绘制一个多边形来代表您的路线
*   用于接收您帐户下的曲目并将其存储在数据库中的 Web 服务
*   Web 服务的登录系统（这本身可能是一个完整的帖子）
*   一种在 Web 服务上选择“朋友”的方法，以便您可以与其他选定的用户进行交互
*   与网站上的谷歌地图集成以显示其他人的路线

这只是我的想法，我相信当你在脑海中澄清你的想法时，你会发现更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T20:49:34.400

GPS定位：

```
LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 5.0f, this);

@Override
public void onLocationChanged(Location location) {
    if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        GeoPoint myCurPos = new GeoPoint((int) (lat * 1000000), (int) (lng * 1000000));
    }
} 
```

停止更新：

```
lm.removeUpdates(this); 
```

使用`MapView`和`ItemizedOverlay<OverlayItem>`用于谷歌地图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T20:49:38.480

首先，您应该确定应用程序的功能。我认为您的应用程序必须具有：

*   一条形成一条线的路线
*   加速和减速时刻（您可以计算两点之间的距离并比较下一个和最后一个计算）
*   大按钮（疲倦的人手不稳）

这些是我的第一个意见。

# php - 从电话号码中删除括号并使用 preg_replace 添加破折号

> ID：12656277
> 
> 赞同：0
> 
> 时间：2012-09-29T20:33:43.327
> 
> 标签：php, preg-replace

我是 PHP 新手，所以，如果这是一个简单的问题，请原谅我，但我真的不知道如何使用`preg_replace`从我的电话号码中的区号中去除括号并在区号之间添加破折号和前 3 位数字。

现在我所有的电话号码都以这种格式分别存储在每个人数组（在索引文件中）中：`(800) 111-1111`.

我想让它们像这样打印出来：`800-111-1111`我想让这一切都发生在`setphoneNumber`我的`Person`课堂上。

代码如下所示：

```
$this-> phoneNumber = $phoneNumber;  
$pattern = ('/\D+/');
$replacement = '';
if(is_string($phoneNumber)) {
    return preg_replace($pattern, $replacement, $this -> phoneNumber);
} else {
    user_error("Error: Person's phone number must be a string");
} 
```

我对它所做的任何修改要么在偏移错误处给我一个不匹配的括号，要么给我一个无结尾分隔符错误（当我设置为时发生`$pattern`）`(')'`；

任何帮助将不胜感激。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:02:25.023

如果初始格式始终相同，我不会费心为替换或模式定义变量

尝试这个：

```
preg_replace(array("(",") "),"", $this->phoneNumber); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:40:23.300

这样的事情怎么样，布赖恩？

```
$pattern = array('/\(/', '/\) /');
$replacement = array('', '-');
if(is_string($phoneNumber)) {
return preg_replace($pattern, $replacement, $this -> phoneNumber);
} 
```

它并没有考虑到人们使用句点代替连字符（如 800.111.1111）......但它也不需要更多的时间来让它发挥作用。您只想删除所有多余的部分，然后确保将第一个句点（在区号和下一个数字块之间）替换为空格而不是连字符，就像对剩余句点所做的那样。

**更新：**

我没有对此进行过广泛的测试，但这应该适用于您所追求的，以及适应使用十进制电话号码格式（即 800.111.1111）的人。

```
$pattern = array('/ /','/[(](.*)[)](.*)(-)(.*)/','/(.*)(\.)(.*)(\.)(.*)/');
$replacement = array('','$1-$2-$4','$1-$3-$5');
if(is_string($phoneNumber)) {
return preg_replace($pattern, $replacement, $this -> phoneNumber);
} 
```

# sql - 如何使用 AND 和 OR 运算符进行查询？

> ID：12656289
> 
> 赞同：0
> 
> 时间：2012-09-29T20:34:40.490
> 
> 标签：sql

我有以下查询：

```
"SELECT COUNT(*) FROM Persons WHERE {1}='A' AND {2}!='A' AND {3}!='A'" 
```

我有以下任务：从表 Person 中获取所有条目，其中 {1} 是 A 并且 {2} 或 {3} 不是“A”，即 ABC、ABA 等。现在我只能得到 ABC、ABB、等等，而不是ABA。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:38:05.453

使用括号为逻辑运算符提供优先级

```
"SELECT COUNT(*) FROM Persons WHERE {1}='A' AND  ({2}!='A' OR {3}!='A')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:55:57.833

逻辑简化，将 {2} 和 {3} 一起比较？

```
SELECT COUNT(*)
FROM Persons
WHERE {1}='A' AND {2}+{3} != 'AA' 
```

没有括号，您可以查看[Operator Precedence](http://msdn.microsoft.com/en-us/library/ms190276.aspx)

```
SELECT COUNT(*)
FROM Persons
WHERE {1}='A' AND {2}!='A'
   OR {1}='A' AND {3}!='A' 
```

# delphi - 我怎样才能重复一首歌？

> ID：12656296
> 
> 赞同：3
> 
> 时间：2012-09-29T20:35:37.740
> 
> 标签：delphi, delphi-7

我有一个名为 MediaPlayer1 的 TMediaPlayer，然后打开一个文件（一首歌曲）播放它。现在我的问题是我需要重复这首歌直到程序停止。

这个想法是表单激活，然后重复指定的歌曲，直到表单关闭。

```
MediaPlayer1.Filename := 'filename'; 
```

然后它打开它

```
MediaPlayer1.Open; 
```

然后它播放它

```
MediaPlayer1.Play; 
```

所以现在这首歌正在播放，但是当它结束时，我希望它再次播放（重复），然后再播放一次，直到表单关闭。

我尝试了大卫赫弗南所说的，但它不起作用，我想我做错了什么，有人可以纠正我。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, MPlayer, StdCtrls;

type
  TForm1 = class(TForm)
    MediaPlayer1: TMediaPlayer;
    Label1: TLabel;
    procedure FormActivate(Sender: TObject);
    procedure MediaPlayer1Notify(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormActivate(Sender: TObject);
begin
 mediaplayer1.FileName:='E:\it project\mario.mid';
 mediaplayer1.Open;
 mediaplayer1.AutoRewind:=true;
 mediaplayer1.Play;
 mediaplayer1.Notify:=true;
end;

procedure TForm1.MediaPlayer1Notify(Sender: TObject);
begin
  if MediaPlayer1.NotifyValue=nvSuccessful then begin
    MediaPlayer1.Play;  
    MediaPlayer1.Notify := True;
  end;
end;
end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T21:41:47.243

您必须自己组织自动重复。

`OnNotify`为媒体播放器创建一个事件。这会在歌曲完成时触发。

```
procedure TForm1.MediaPlayer1Notify(Sender: TObject);
begin
  if MediaPlayer1.NotifyValue=nvSuccessful then begin
    //restart the song
    MediaPlayer1.Play;  
    MediaPlayer1.Notify := True;//ensures we are notified when song completes
  end;
end; 
```

开始歌曲的代码需要如下所示：

```
MediaPlayer1.AutoRewind := True;//for obvious reasons
MediaPlayer1.Play;
MediaPlayer1.Notify := True;//ensures we are notified when song completes 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T20:40:33.293

只需使用 TMediaPlayer：[http ://docwiki.embarcadero.com/CodeExamples/en/MediaPlayer_%28Delphi%29](http://docwiki.embarcadero.com/CodeExamples/en/MediaPlayer_%28Delphi%29)

# iphone - iOS JSONKit objectWithData 返回 null

> ID：12656297
> 
> 赞同：0
> 
> 时间：2012-09-29T20:35:39.680
> 
> 标签：iphone, objective-c, ios, json, jsonkit

我`JSONKit`用来解析 JSON 字符串，由于某种原因，当尝试将 JSON 字符串分配给`NSDictionary`它时返回 null

```
 JSONDecoder *jsonDecoder = [[JSONDecoder alloc] initWithParseOptions:JKParseOptionNone];        
NSData *jsonData = [NSData dataWithBytes:[jsonString UTF8String] length:[jsonString length]];
NSDictionary *tempDict = [jsonDecoder objectWithData:jsonData]; 
```

`jsonString`保存内容， tempDict 等于`NULL`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:48:49.507

如果您想支持 4.x，请不要使用 `NSJSONSerialization`. 它仅在 5.0 中可用。

相反，您只需要`JSONKit`像这样使用：

```
 NSDictionary *tempDict = [jsonString objectFromJSONString]; 
```

您无需将 JSON 字符串转换为 NSData 即可对其进行序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T05:22:04.910

我不确定，但您需要检查您的 json 是否是有效的 json，为此您可以使用[http://jsonlint.com/](http://jsonlint.com/)。由于 json 无效，我有时会遇到类似的问题。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T20:44:09.040

为什么要使用 jsonKit？iOS 有一个非常好的 JSONSerialization 类......你可以这样使用它：

```
NSData *returnData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError *jsonParsingError = nil;

NSDictionary *returnDictionary = [NSJSONSerialization JSONObjectWithData:returnData options:0 error:&jsonParsingError];

if (!jsonParsingError) {

    //Do your stuff here

} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T20:44:00.050

使用 NSJSONSerialization 怎么样？

```
NSData *data = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary * tempDict = [NSJSONSerialization JSONObjectWithData:data options:0 error:&jsonError]; 
```

# php - 带树枝的缓存块

> ID：12656301
> 
> 赞同：5
> 
> 时间：2012-09-29T20:36:03.053
> 
> 标签：php, caching, twig, phptal

我已经从 Phptal 切换到 Twig：更好的体验。但是，在 phptal 中，我做了“tal:cache”来缓存一些代码块......使用 Twig，我该如何实现呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-10T19:23:19.860

您可以使用此扩展在树枝中缓存块：

[https://github.com/asm89/twig-cache-extension](https://github.com/asm89/twig-cache-extension)

它允许您根据 TTL、更改的缓存键等来缓存模板的块。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T14:16:49.150

在 twig 中，某些块没有显式缓存。

但是，当不在调试模式下时，twig 会缓存从模板创建的中间代码。

见这里：
[http ://symfony.com/doc/current/book/templating.html#twig-template-caching](http://symfony.com/doc/current/book/templating.html#twig-template-caching)

这是在 symfony 上下文中，但我想这也可以独立工作。
然后，您可以在实例化 Twig_Environment 时使用以下内容指定它：

```
'cache'       => 'cache/templates', // the place to cache to
'auto_reload' => true //reload template when changes are detected 
```

见这里：
[http ://twig.sensiolabs.org/doc/api.html#environment-options](http://twig.sensiolabs.org/doc/api.html#environment-options)

# .htaccess - 使用受密码保护的子文件夹重写 URL（在 joomla 站点中）

> ID：12656308
> 
> 赞同：0
> 
> 时间：2012-09-29T20:37:29.443
> 
> 标签：.htaccess, joomla2.5, password-protection, .htpasswd

我设置了一个 Joomla 2.5 站点，并打开了 SEO，并“激活”了 .htaccess 文件。

现在的问题是我有一个文件夹，它是一个特殊的管理站点，其中设置了一些其他设置和很多其他东西，如果 url 重写为 joomla 开启，这个文件夹我无法密码保护（使用 htaccess 和 htpasswd） .

现在，当我尝试访问子文件夹时：

如果打开 url 重写，则找不到获取页面。如果是，我会弹出密码。如果打开 url 重写并且子文件夹中的 htaccess 文件被删除，我可以访问子文件夹（但当然没有密码弹出窗口）

那么这有可能吗？或者我是否需要求助于 Sessions 来对这个管理员进行自定义登录，这是我试图避免的。

joomla htaccess 如下所示（我已删除所有注释行）

```
Options +FollowSymLinks

RewriteEngine On

RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule .* index.php [F]
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteCond %{REQUEST_URI} !^/index\.php
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

我在子文件夹中的 htaccess 和 htpasswd 文件看起来像标准密码保护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:43:47.373

如果你只是想双重保护后端，你可以试试 Akeeba AdminTools。甚至免费版本也具有使用 .htaccess 对管理员站点进行密码保护的功能。我对其中的密码保护部分没有太多经验，但它非常适合我使用它的用途。

请参阅：[https ://www.akeebabackup.com/products/admin-tools.html](https://www.akeebabackup.com/products/admin-tools.html)

如果您尝试使用密码保护另一个文件夹，请确保添加到 .htaccess 的规则位于顶部。另外，您在 .htaccess 中添加了什么来尝试对文件夹进行密码保护？

# php - php 或 ajax 中的复杂计算

> ID：12656312
> 
> 赞同：-7
> 
> 时间：2012-09-29T20:38:25.733
> 
> 标签：php, ajax

是否可以在 php 或 ajax 中进行复杂的公式计算？

具体来说，计算一个数的根 12 还是提升第 n 次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:43:08.943

试试 php [GMP 函数](http://www.php.net/manual/en/ref.gmp.php)。这些函数允许您使用任意长度的整数。

# c# - updatepanel.update 问题

> ID：12656314
> 
> 赞同：0
> 
> 时间：2012-09-29T20:38:34.453
> 
> 标签：c#, asp.net, updatepanel

我有两个嵌套的更新面板，我从源代码更新面板，但没有任何效果。代码如下

```
<div style="display:block; clear: left;" runat="server" id="DivLike">
    <asp:UpdatePanel ID="UpdatePanelLike" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <div style="position: relative;">
                <div style="position: absolute; top: 0px; left: 0px;">
                    <asp:LinkButton ID="LinkButtonLike" runat="server" CommandName='<%#Eval("Like_Command") %>'
                    Font-Size="XX-Small" OnCommand="LinkButton2_Command" Text='<%#Eval("Like_Command")%>'></asp:LinkButton>
                </div>
                <div class="popupstyle" style="position:absolute; top:0px; left:0px; display:none;"
                id="DivChapters" runat="server">
                    <asp:UpdatePanel ID="UpdatePanelLinkActivity" runat="server" UpdateMode="Conditional">
                        <ContentTemplate>
                            <div>Select Chapter:
                                <asp:DropDownList ID="DropDownListChapters" runat="server"
                                AutoPostBack="true" OnSelectedIndexChanged="DropDownListChapters_SelectedIndexChanged"></asp:DropDownList>
                            </div>
                            <div>Select Topic:
                                <asp:DropDownList ID="DropDownListTopics" runat="server"></asp:DropDownList>
                            </div>
                            <div>
                                <asp:LinkButton ID="LinkButtonAddLink" runat="server" OnCommand="LinkButtonAddLink_Command"
                                Text="Add" CssClass="UtilityClass"></asp:LinkButton>
                            </div>
                            <asp:UpdateProgress ID="UpdateProgressLinkActivity" runat="server" AssociatedUpdatePanelID="UpdatePanelLinkActivity"
                            DynamicLayout="True">
                                <ProgressTemplate>
                                    <div style=" position:absolute; top:50%; left:50%; background-color:white;"
                                    id="divLoading">
                                        <img src="Images/loading25.gif" alt="Loading..." style="" />
                                    </div>
                                </ProgressTemplate>
                            </asp:UpdateProgress>
                        </ContentTemplate>
                        <Triggers>
                            <asp:AsyncPostBackTrigger ControlID="LinkButtonAddLink" EventName="Command"
                            />
                        </Triggers>
                    </asp:UpdatePanel>
                </div>
            </div>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="LinkButtonLike" EventName="Command"
            />
        </Triggers>
    </asp:UpdatePanel>
</div> 
```

下面的代码后面更新了面板，但没有更新任何面板。虽然当我用调试器分析它时，每一件事都被完美地分配了。

```
 protected void DropDownListChapters_SelectedIndexChanged(object sender, EventArgs e )
 {
    DropDownList DDL = (DropDownList)sender;
    DropDownListTopics.DataSource = ChapterDataAccess.GetUserTopics(Convert.ToInt32(DDL.SelectedItem.Value), new Guid(Membership.GetUser().ProviderUserKey.ToString()));
    DropDownListTopics.DataTextField = "Name";
    DropDownListTopics.DataValueField = "Id";
    DropDownListTopics.DataBind();
    ListItem item=new ListItem ("topics","value" );
    DropDownListTopics.Items.Add(item);
    UpdatePanel thepanel= (UpdatePanel)DDL.Parent.Parent;
    UpdatePanel theparentpanel=(UpdatePanel)DDL.Parent.Parent.Parent.Parent.Parent ;
    theparentpanel.Update();
    thepanel.Update();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:00:30.663

我认为您没有正确访问更新面板..

当 UpdatePanels 没有包含在另一个 Content Placeholders 中时，我认为您可以直接访问 Update Panels 而不是使用父级来查找它。

简单地

```
UpdatePanelLinkActivity.Update();
UpdatePanelLike.Update() ; 
```

应该做..

# c++ - C ++ cin 没有行

> ID：12656316
> 
> 赞同：1
> 
> 时间：2012-09-29T20:38:43.470
> 
> 标签：c++, cin

我有一个程序，我在其中指定要使用 cin 读取的文件，所以我运行程序 ./prog < file.txt，但在下面的代码中，cin 没有抓取任何东西。有人可以解释为什么代码执行后行是空的吗？

```
 void Building::build(){
    char mode;
    cin >> mode >> sizeFloors >> numFloors;

    if(mode == 'M')
        readMap(sizeFloors, numFloors);

} 
```

^^ 这执行得很好

```
void Building::readMap(int floorSize, int numFloors){

    string line;
    int curFloor(numFloors - 1);

    while( curFloor >= 0 ){
        cin >> line;

        if(line.empty()){
            cout << "Error: input file too short" << endl;
            exit(1);
        }
    } 
```

^^ 这里 line.empty() 返回 true

这是输入文件

```
M
4
1
WWWW
WWWW
WWWW
WWWW 
```

所以很明显行不应该返回空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:52:07.193

当混合格式化输入（即使用`operator>>()`）和未格式化输入（例如`std::getline()`）时，您需要确保您处于您感兴趣的位置。格式化输入运算符在满足其格式时停止读取。例如，读取一个字符只读取一个字符。任何后续字符，例如换行符，都留在输入中。`std::getline()`在收到的第一个换行符处停止阅读。我想，在您输入菜单选择后，您点击换行符，这就是`std::getline()`停止的地方（如果菜单选择单独位于文件中，则相同）。

在格式化和未格式化 I/O 之间切换的典型方法是跳过所有前导空格：

```
std::getline(std::cin >> std::ws, line); 
```

或者，您可以忽略包括第一个换行符在内的所有内容：

```
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
```

使用哪种方法显然取决于您的数据内容。例如，如果您想阅读前导命名空间很重要的代码，则跳到第一个非空白不是一个屡获殊荣的想法。但是，在许多情况下使用`std::ws`效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:52:22.883

这可能会帮助你...

```
// reading a text file
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
  string line;
  ifstream myfile ("example.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline (myfile,line);
      cout << line << endl;
    }
    myfile.close();
  }

  else cout << "Unable to open file"; 

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-29T20:44:34.127

`>>`运算符在读取 a 时将`std::string`空格作为字符串分隔符，请参见[此处](http://www.cplusplus.com/reference/string/operator%3E%3E/)。

您可能想改用[getline](http://www.cplusplus.com/reference/string/getline/)。

并且您可能（例如在 Linux 上）使用所有警告和调试信息（例如 with ）编译您的代码，`g++ -Wall -g`然后使用调试器（例如`gdb`）来找出正在发生的事情。

我建议`line.clear()`在循环内。

我也发现写作`int curFloor(numFloors - 1);`的可读性不如`int curFloor = numFloors - 1;`

# azure-table-storage - 如何测量 Azure 表实体组事务的有效负载大小？

> ID：12656317
> 
> 赞同：1
> 
> 时间：2012-09-29T20:38:59.897
> 
> 标签：azure-table-storage, entity-group-transactions

根据 MSDN (http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)，

*   事务最多可以包含 100 个实体，其总有效负载大小可能不超过 4 MB。

问题）在发送 group-transaction 请求之前，我们如何测量负载大小以保证大小不超过 4MB？

提前致谢！

# javascript - Chrome 扩展鼠标滚轮事件

> ID：12656318
> 
> 赞同：0
> 
> 时间：2012-09-29T20:39:00.650
> 
> 标签：javascript, google-chrome-extension

我如何在 javascript 中处理鼠标滚轮事件，这是 chrome 扩展的一部分。

```
// MAIN
if (document.addEventListener) {
    document.addEventListener("mousewheel", wheelHandler, false);
} else {
}
// END MAIN

function wheelHandler(e) {
    alert("activated");
} 
```

新的激活警报发生了，这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:32:54.213

Chrome 扩展需要一个 manifest.json 文件，其中包含扩展的内容设置。在此文件中，您可以识别使用扩展名运行的内容脚本。

举个例子（这里的前 3 个字段是必需的）：

```
{
    "name": "",
    "version": "",
    "manifest_version": 2,
    "content_scripts":
    [{
        "matches": ["url patterns here...."]
        "js": ["jquery-1.8.3.js", "main.js"],
        "run_at": "document_idle"
    ]}, 
    .....
    .....
    "permissions":
    [
        "some permissions...."
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T14:45:57.250

+1 @Chef Pharaoh。使用他的答案，您可以通过添加具有以下内容的 manifest.json 文件使您的脚本在所有站点上运行：

```
{
  "manifest_version": 2,

  "name": "Detect wheel event",
  "description": "This extension alerts on wheel event.",
  "version": "1.0",

  "content_scripts": [
    {
      "matches": ["*://*/*"],
      "js": ["main.js"]
    }
  ]
} 
```

# ruby-on-rails - 部署 Rails 应用程序 SQLite3::CantOpenException 后：

> ID：12656319
> 
> 赞同：0
> 
> 时间：2012-09-29T20:39:09.680
> 
> 标签：ruby-on-rails, sqlite, deployment

我尝试部署一个 Rails 应用程序。我使用带有 sqlite3 数据库的 apache。通过乘客和 capistrano 的配置运行良好。

但是当我启动服务器并尝试修改数据库时，出现以下错误： `SQLite3::CantOpenException: unable to open database file`

我已经 chmod 777 了`production.sqlite3`. 我`production.sqlite3`输入`foofoo/foo/shared`并配置了`database.yml`：

```
production:
adapter: sqlite3
database: /foofoo/foo/shared/production.sqlite3
pool: 5
timeout: 5000 
```

（PS 轨道 3.2.3，红宝石 1.9.3，sqlite 3.7.9）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T22:01:02.567

这是因为 nginx 创建 www-data 用户，并且该用户没有读取 sqlite3 文件和您的应用程序的权限...

您需要运行以下命令：

1.  `sudo chown -R www-data:www-data rails_project/`
2.  `sudo chmod -R 777 rails_project/`

# ruby-on-rails - 安装rvm的麻烦

> ID：12656324
> 
> 赞同：1
> 
> 时间：2012-09-29T20:40:16.327
> 
> 标签：ruby-on-rails, ruby, rvm

所以我正在尝试安装 RVM，但我认为我的 mac 计算机上的 Xcode 存在冲突。我曾经运行`rvm install ruby-1.9.2-p320` ，这是我的错误提供的编译器

```
'/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`. 
```

然后我阅读了一个写的解决方案`rvm get head`并且它成功了，但是当我再次运行 rvm install ruby​​-1.9.2-p320 时，我得到了这个错误。

```
No binary rubies available for: ///ruby-1.9.2-p320.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
The provided compiler '/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`.
'rvm_codesign_identity' is not set, please set it in ~/.rvmrc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:31:03.100

`rvm install 1.9.2 --with-gcc=clang`按照此处答案中的说明尝试[https://stackoverflow.com/a/8032980/429758](https://stackoverflow.com/a/8032980/429758)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:37:07.017

```
'/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`. 
```

看：

```
, please read `rvm requirements`. 
```

使用：$ rvm 要求

并安装你需要的东西。对于 Ruby 或 JRuby ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:11:43.110

安装这个包（Mountain Lion）适合我。 [https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)

# assembly - 有什么东西可以防止汇编中的堆栈溢出吗？

> ID：12656332
> 
> 赞同：4
> 
> 时间：2012-09-29T20:41:09.790
> 
> 标签：assembly, x86, stack, theory

在汇编语言编程中，是什么（如果有的话）阻止堆栈增长，直到它破坏数据或指令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T21:30:34.290

只有通常由操作系统完成的 CPU/MMU 配置才能防止或拦截堆栈溢出和内存损坏或尝试在没有必要权限的情况下访问某些内容。

您可以阅读 Intel/AMD 的 x86 CPU 手册中有关内存管理的章节以了解更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T22:46:59.987

您可以直接在接受的堆栈下限下方使用[金丝雀，并不断检查金丝雀的值。](http://en.wikipedia.org/wiki/Buffer_overflow_protection#Canaries)

在内核代码（环 0）中，您还可以通过设置调试寄存器之一的值来设置[硬件断点](http://ftp.utcluj.ro/pub/users/nedevschi/PMP/protected86/protgemode/translate_cdebugreg.html)`dr0`, `dr1`,`dr2`和`dr3`断点地址的线性地址，直接低于接受的堆栈下限，然后设置正确的标志位`dr7`寄存器，并报告或尝试修复断点处理程序代码中的情况。请参阅[硬件断点权威指南](http://www.docstoc.com/docs/31445884/HardWare-BreakPoints-The-Definitive-Guide)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T21:41:29.397

> 什么（如果有的话）阻止堆栈增长和破坏数据或指令？

你！在汇编中编码时绝对没有手牵手。您必须确保所有值都适合它们的缓冲区，所有指针索引都在界限内。您在堆栈上保留空间，确保任何适合该缓冲区的空间。在使用 Assembly 时，您负责编程的各个方面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T22:04:26.240

堆栈溢出的 99.99% 原因是程序错误或糟糕的程序设计。

现在我们有两个基本但不属于本主题的问题：

> 1）如何防止装配中的错误？
> 
> 2）如何做好程序设计？

# r - R中回归模型的残差但没有拟合值

> ID：12656335
> 
> 赞同：2
> 
> 时间：2012-09-28T07:37:21.310
> 
> 标签：r, regression

我做了一个简单的回归分析，并想根据拟合值绘制残差以查看它们的行为。之后我想检查残差是否是正态分布的。所以我做了：

```
summary(lm(Gesamt~PopTotal+HDI))

residuen<-summary(lm(Gesamt~PopTotal+HDI))$residuals
    fitted<-summary(lm(Gesamt~PopTotal+HDI))$fitted.values
plot(fitted,residuen) 
```

问题是，

```
summary(lm(Gesamt~PopTotal+HDI))$fitted.values 
```

结果是，这`NULL`是否意味着没有拟合值？我想这是由于一些缺失值，但我不知道。R如何计算残差而不是拟合值？

我的数据集可以在这里找到：[http ://www.sendspace.com/file/8e27d0](http://www.sendspace.com/file/8e27d0)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T07:52:20.230

1.  `data=olympiadaten`您可以通过添加到您的代码使您的问题更可重现
2.  `summary.lm()`，泛型`summary()`在其参数为 class 时调用的方法`lm`，没有`$fitted.values`，但`lm()`有。尝试更改`summary(lm(Gesamt~PopTotal+HDI))$fitted.values`为 `lm(Gesamt~PopTotal+HDI, data=olympiadaten)$fitted.values`
3.  通常，您可以通过以下方式检查对象在 R 中的组成`str()`

# c++ - 便携式网格引擎平台

> ID：12656337
> 
> 赞同：2
> 
> 时间：2012-09-29T20:41:49.410
> 
> 标签：c++, c, distributed-computing, grid-computing

我正在寻找一个可以轻松嵌入到应用程序中的分布式计算平台。

我调查了 MPI（以及它的一些实现），但据我所见，它涉及为每个任务创建一个可执行文件，并使用`mpirun`. 我不排除它，我只是希望它嵌入到应用程序中，而不是作为外部可执行文件（如果可能的话）。

SO用户，您知道这样的框架（最好是开源的）吗？另外，为了让我下定决心，一些使用示例会很好。

如果可能的话，我对跨平台解决方案感兴趣，因为 LAN 中要部署解决方案的站点是异构的。

任何建议，尤其是代码示例都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:04:30.337

除了 MPI，我还想到了四个系统：AMQP、[ZeroMQ](http://www.zeromq.org/)、[Cilk](http://supertech.csail.mit.edu/cilk/)和 Actors。

AMQP 使用消息传递在系统之间进行通信，使用中央消息代理来处理/分发消息。一些实现保证正确地传递给接收者，但速度较慢（类似于 TCP）。一些实现是一劳永逸，不允许有保证的交付，但速度更快（类似于 UDP）。注意 AMQP 是一种协议，而不是一种实现——流行的实现包括[ActiveMQ](http://activemq.apache.org/)和[RabbitMQ](http://www.rabbitmq.com/)。

[ZeroMQ](http://www.zeromq.org/)有点类似于 AMQP 减去中央消息代理。我相信它基本上是 Actors 风格，它更加程序化，允许您以端到端的方式设计您的系统。它是分散的（没有中央消息代理），基准测试似乎表明它比 AMQP 实现快得多。

[我对Cilk](http://supertech.csail.mit.edu/cilk/)没有太多经验，除了它是 MIT 的一个很好支持的项目，旨在与 C/C++ 一起工作。

Actor 是一种抽象，可以帮助本地/分布式并发，由 Erlang 和最近的[Akka](http://akka.io/)项目（Scala、Java）推广。我知道的 C++ 兼容版本是 Theron、Actor-CPP 和 libcppa，但我不确定其中哪些支持远程 Actor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:05:17.063

我认为[Hazelcast](http://www.hazelcast.com/)就是那种东西。嵌入式分布式计算。但它是在 java 中，而不是在 C 中。但是你可以从 Java 中调用 C。

# c++ - 具有相同 IP 地址的两台计算机 - 使用套接字的聊天应用程序

> ID：12656339
> 
> 赞同：1
> 
> 时间：2012-09-29T20:42:05.577
> 
> 标签：c++, networking, client-server, chat

在家里，我有调制解调器、路由器、台式机和笔记本电脑。

我的调制解调器连接到我的路由器。桌面通过电线连接到我的路由器。笔记本电脑无线连接到家庭网络/路由器。

当我访问这个网站时：[http](http://whatismyipaddress.com/) ://whatismyipaddress.com/ ，我的台式机和笔记本电脑的 IP 地址是相同的。如何确定唯一 IP？

我问的原因是因为我有兴趣开发一个旨在通过 Internet 工作的简单 C++ 服务器-客户端聊天应用程序。在写这篇文章时，我相信客户端的代码需要有关于服务器的信息（IP 地址和端口号）。我想在桌面机器上运行服务器，并让任何运行客户端代码的机器能够连接到它。

谢谢你的帮助。另外，如果您有兴趣，我正在按照此 c++ 聊天应用程序教程执行此操作：[http ://www.youtube.com/watch?v=-Rk8LPtVpY0](http://www.youtube.com/watch?v=-Rk8LPtVpY0)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T20:44:56.507

这是因为 whatismyipaddress.com 只是获取您的外部地址。您的路由器隐藏了您的内部地址。如果你想得到你的内部IP地址，你必须在你的计算机上查找IP地址（如果是windows去网络和共享中心，点击“本地连接”，然后是详细信息）。

如果您想让您的桌面可用于网络（如您所说的“服务器”），您将不得不将路由器上的端口转发到桌面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T20:50:15.677

该网站正在报告调制解调器的 IP 地址。这是互联网上其他人认为您的地址。与您从路由器获得的 192.168.xx 地址相反，该地址仅对您的内部网络（连接到路由器的任何设备）有用。

要确定您的唯一 IP 地址，您可以做两件事：

登录路由器并查找状态选项卡，此选项卡通常会报告所有连接的设备。

或者更简单，如果您在 Windows 上运行“cmd”并输入“ipconfig /all”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T20:51:59.717

由于我们没有足够的 IP4 IP 来让网络上的每台设备都有一个唯一的 IP，所以有一种叫做伪装的东西。这允许路由器在一个“真实”IP 地址下屏蔽本地网络的传出流量。当您的路由器连接到互联网时，该地址会提供给您。

通常，您的本地网络位于为本地网络保留的地址范围内，例如`192.168.*.*`

这当然会使两台机器之间的直接联网变得有点棘手。您的路由器基本上知道哪些本地机器是连接的来源，因此它可以将响应引导回正确的机器。

如果您需要对双方完全透明的连接，则必须创建到本地计算机的端口转发 - 以便它对 Internet 可见。

一些网站可以向您显示您的外部 IP，但最简单的方法是登录路由器并在那里查看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T20:53:45.730

从家庭网络外部看到的每台设备的 IP 地址都是相同的。这是路由器的工作之一（抽象出哪个特定设备负责哪个数据包），这个概念有助于使互联网具有可扩展性。

在 wikipedia 上阅读有关[子网的更多信息。](http://en.wikipedia.org/wiki/Subnetwork)

在编写应用程序之前学习网络基础知识也是一个好主意。查看

*   [https://stackoverflow.com/questions/2955381/good-book-for-learning-networking-basics-as-it-applies-to-programming](https://stackoverflow.com/questions/2955381/good-book-for-learning-networking-basics-as-it-applies-to-programming)
*   [如何理解网络协议？](https://stackoverflow.com/questions/5352397/how-to-understand-network-protocols)

# oop - 我怎样才能使依赖注入的代码易于使用和测试？

> ID：12656340
> 
> 赞同：2
> 
> 时间：2012-09-29T20:42:16.773
> 
> 标签：oop, design-patterns, language-agnostic, dependency-injection

我开始使用 PHP，所以如果我做错了什么，请原谅我的代码。
让我们看看我对“保险”对象的这种方法，它可以让我返回所有说过保险的客户：

```
public function getBeneficiarios() {
        $petitionsVariables = array(
            PeticionDeCoberturaColumns::COBERTURA_ID => $this->getId()
        );
        $petitions = (new PeticionDeCoberturaDAO())->getByValues($petitionesVariables);
        $clientes = array();
        foreach ($petitions as $petition) {
            $clientes[] = $petition->getClient();
        }
        return $clientes;
    } 
```

所述代码显然不是非常可测试的，因为它与特定的 DAO 耦合。为了正确测试它，我需要模拟 DAO 并注入模拟。

做到这一点的依赖注入方式是

```
public function getBeneficiarios($dao) {
        $petitionsVariables = array(
            PeticionDeCoberturaColumns::COBERTURA_ID => $this->getId()
        );
        $petitions = $dao->getByValues($petitionesVariables);
        $clientes = array();
        foreach ($petitions as $petition) {
            $clientes[] = $petition->getClient();
        }
        return $clientes;
    } 
```

我可以在保险对象构造函数中注入 DAO，但我不喜欢仅仅因为它需要在单个方法上使用而传递无关 DAO 的想法。

每次我想使用 getBeneficiarios 方法时，我都需要先创建 DAO，这听起来非常非常不直观。未来的编码人员不必为此烦恼。

我怎样才能既舒适地使用代码，又舒适地测试代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:15:21.323

在我看来，您的问题不是您的课程的可测试性，而是您的应用程序的设计。

在真正的 DDD 中，你的类不应该依赖于 DAO，甚至不应该知道它的存在。你可以称之为持久性无知。保险对象应该注意的唯一事项是各方（客户、保险公司）和其他业务概念，例如法律条款。

封装最重要的一点是，你的类的消费者不需要知道它在其他方面的内部工作原理就可以成功地使用它。让保险依赖于静态 DAO 对象会破坏封装，因为它的消费者需要知道静态 DAO 必须存在于某个地方，否则会发生异常。

DAO 是一个实现细节。您的域对象不应该依赖或知道它，***它***应该依赖于您的域对象。IoC 是一种确保更基本事物的手段，例如关注点分离和封装。如果您的设计违反了这些，那么任何 IoC 都无法解决它。作为一个起点，我会从 DDD 的角度来看看我的设计。看看下面的问题：[DDD 中的数据访问层设计](https://stackoverflow.com/questions/7365309/data-access-layer-design-in-ddd)

让我知道这是否有帮助。

# javascript - JavaScript 继承：“模板方法”模式和覆盖函数

> ID：12656348
> 
> 赞同：0
> 
> 时间：2012-09-29T20:43:03.947
> 
> 标签：javascript, inheritance

# 看看这个截图：

有一个带有*transformMap* *()*方法的转换器。此方法调用变换器的另外两个方法：*transformMapHead()*和*transformMapBody()*

## 变压器

```
var transformator =
{
    transformMap: function(tree) {
        return transformator.transformMapHead(tree)
              +transformator.transformMapBody(tree.body[0].body) +"}\n";
    },  

    transformMapHead: function(tree) { 
        return "to be done"; 
    },

    transformMapBody: function(tree) { 
        // completly implemented
    },  
    ...
}; 
```

好的，到目前为止还不错。*transformMapBody()* - 方法已完全实现，而transformMapHead *()* - 方法没有，这将在子对象中完成。

现在，让我们看一个更具体的转换器。这里我只想实现*transformMapHead()*方法。

但是，当我实施

## 混凝土转换器

```
var concreteTransformator = Object.beget(transformator);                            

concreteTransformator.transformMapHead = function(tree)
{
    // my business logic
    console.log("i am the new business logic");
}; 
```

它不能正常工作。不是从*concreteTransformator对象运行**transformMapHead()*方法，而是执行第一个*transformator*对象的方法并打印出“待完成”。

 **我可以通过将*transformMap()* - 方法从transformer-object 复制到*concreteTransformer* -object 来避免这种情况：

```
concreteTransformator.transformMap =  function(tree) {
    return concreteTransformator.transformMapHead(tree)
          +concreteTransformator.transformMapBody(tree.body[0].body) +"}\n";
}; 
```

然后，一切都运行良好，但这不是要走的路吗？！

最后，来自 Douglas Crockford 的 beget-helper-function：

```
if (typeof Object.beget !== 'function') {
Object.beget = function(o) {
    var F = function() {};
    F.prototype = o;
    return new F();
}; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:45:06.577

问题是您在`transformMap`( `transformator`) 中引用了一个特定变量，其中包含对原始对象的引用。要了解其中的含义，请考虑如果您这样做会发生什么：

```
var foo = transformator;
transformator = null;
foo.transformMap(); 
```

您会收到一个错误，因为`transformator`is `null`now 因此不再具有属性`transformMapHead`。

* * *

您应该`this`改用：

```
return this.transformMapHead(tree)
       +this.transformMapBody(tree.body[0].body) +"}\n"; 
```

引用当前对象。

[了解更多关于`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this).**

# php - 在 PHP 中将长十六进制代码转换为短十六进制代码

> ID：12656355
> 
> 赞同：1
> 
> 时间：2012-09-29T20:44:23.103
> 
> 标签：php, css

使用 PHP 将 css 十六进制代码转换为较短的对应代码的最佳方法是什么？只需编写一个 css 压缩脚本，尽管它可能对文件大小有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:54:27.957

在这种情况下，您希望从一种格式（#RRGGBB，每个通道具有 8 位颜色信息）转换为*明显不同*的格式（#RGB，每个通道只有 4 位颜色信息）。这只能在两个十六进制数字相同的情况下完成。

您可以尝试一些简单直接的方法，如下所示：

```
function compress_css_colour($original) {
    if (   $original[1] == $original[2]
        && $original[3] == $original[4]
        && $original[5] == $original[6]) {
        return "#" . $original[1] . $original[3] . $original[5];
    } else return $original;
}

echo compress_css_colour("#aabbcc");
// prints "#abc" 
```

肯定有更优雅的解决方案，尽管这个解决方案适用于一般情况。您还需要增加一些鲁棒性 - 如果原始 CSS 颜色格式不正确，或者它是#RRGGBBAA 形式怎么办？

# jquery - 将类从另一个 div 中的内容应用到 div

> ID：12656359
> 
> 赞同：0
> 
> 时间：2012-09-29T20:44:36.343
> 
> 标签：jquery, add

我目前正在使用一个脚本（正在工作），我可以根据另一个 div 的类将某个类应用于 div。我更喜欢使用 content:contains() 来确定另一个 div 的类，但是当我使用它时，它会同时从每个`if`语句中应用每个类。我使用的代码如下。

```
// Set Olympic
            if($(".reg-status.olympic span").hasClass("open")) {
                $(".reg-status-view.olympic").addClass("open");
            }
            if($(".reg-status.olympic span").hasClass("waiting")) {
                $(".reg-status-view.olympic").addClass("waiting");
            }
            if($(".reg-status.olympic span").hasClass("closed")) {
                $(".reg-status-view.olympic").addClass("closed");
            }

            // Set Long Course
            if($(".reg-status.long-course span").hasClass("open")) {
                $(".reg-status-view.long-course").addClass("open");
            }
            if($(".reg-status.long-course span").hasClass("waiting")) {
                $(".reg-status-view.long-course").addClass("waiting");
            }
            if($(".reg-status.long-course span").hasClass("closed")) {
                $(".reg-status-view.long-course").addClass("closed");
            } 
```

问题 1：有没有一种更简洁的方法来做我目前正在尝试的事情
问题 2：我如何`.addClass`从包含初始 div 的内容中，与初始 div 上的类相对应。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:00:05.127

首先，将搜索放入一个引用变量中，以防止重新搜索 dom。其次，如果源div只包含“open”、“close”、“waiting”类，可以将class属性复制到目标div。

```
var olySrcDiv = $(".reg-status.olympic span");
var olyTgtDiv = $(".reg-status-view.olympic");
olyTgtDiv.attr("class",olyTgtDiv.attr("class") + " " + olySrcDiv.attr("class"));

var lngSrcDiv = $(".reg-status.long-course span");
var lngTgtDiv = $(".reg-status-view.long-course");
lngTgtDiv.attr("class",lngTgtDiv.attr("class") + " " + lngSrcDiv.attr("class")); 
```

# python - 从网页获取 disqus_identifier

> ID：12656360
> 
> 赞同：0
> 
> 时间：2012-09-29T20:44:47.147
> 
> 标签：python, beautifulsoup, disqus

我可以从带有 disqus 框的网页获取 disqus_identifier。在页面上：[http](http://help.disqus.com/customer/portal/articles/472099-what-is-a-disqus-identifier-) : //help.disqus.com/customer/portal/articles/472099-what-is-a-disqus-identifier-您可以使用 disqus 发表评论。我想编写脚本（也许 beautifulsoup 会很有用），它将获取页面 url 作为参数并返回此页面上讨论的 disqus_identifier。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:44:42.750

如果您阅读他们的文档，thread_id 和 disqus_identifier 不是一回事。但要获得 disqus 标识符，我将从以下内容开始：

```
def get_disqus(soup):
    for script in soup.find_all('script',{'type':'text/javascript'}):
        if 'disqusIidentifier' in script.get_text():
            print script.attrs
            print script.get_text()

url= 'http://lifeandcode.tumblr.com/post/35377038799/talking-to-strangers-a-linked-ballot-how-news'

get_disqus(url) 
```

这为您提供了实际包含单词“disqus_identifier”的 javascript 行——对我来说，这揭示了该值是可选的事实。如果你能更具体一点，很高兴扩展它。

# ios - IOS UI 设计（颜色和按钮图像）。在写作期间或之后？

> ID：12656363
> 
> 赞同：2
> 
> 时间：2012-09-29T20:45:03.207
> 
> 标签：ios, user-interface, skinning

您可以通过在图形编辑器中设计整个屏幕并将它们覆盖到您的应用程序屏幕上来“剥皮”iOS 应用程序，还是必须将图像、颜色等单独应用于每个 UI 元素？（我知道如果你想稍后移动东西，第一种方法会很痛苦）。

# c++ - C++ 联合初始化

> ID：12656367
> 
> 赞同：2
> 
> 时间：2012-09-29T20:45:33.253
> 
> 标签：c++, initialization

我有代码：

```
class Vector4
{

public:
    union
    {
        float x,y,z,w;
        float v[4];
    };

    Vector4(float _x, float _y, float _z, float _w)
    : x(_x), y(_y), z(_z), w(_w)
    {
        std::cout << "Vector4 constructor: " << this->x << "; " << this->y << "; " << this->z << "; " << this->w << std::endl;
    }
}; 
```

我记得在 VC 7.1 中一切都很好，但在 VC 2010 中我收到了警告：

> 警告 C4608：“Vector4::y”已由初始化列表中的另一个联合成员“Vector4::::Vector4::x”初始化

当我写：

```
Vector4 vec(1.0f, 0.0f, 0.0f, 0.0f); 
```

我在控制台中看到：

> Vector4构造函数：0；0; 0; 0

请告诉我，发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T20:47:28.677

您`x,y,z,w`将所有内容相互联合：所有四个浮点数共享相同的内存空间，因为联合的每个元素都从相同的内存地址开始。

相反，您希望将所有向量元素放在一个结构中，如下所示：

```
union {
    struct { float x, y, z, w; };
    float v[4];
}; 
```

# asp.net - 从 ASP.Net 应用程序授予对 SQL Server 数据库的访问权限

> ID：12656368
> 
> 赞同：1
> 
> 时间：2012-09-29T20:45:59.800
> 
> 标签：asp.net, sql-server, login

我已经为 .NET Web 应用程序设置了一个登录页面，但是当我尝试在我的数据库中记录其中一个用户时，我收到了这个错误。

> *无法打开登录请求的数据库“SampleLaundrySystem”。登录失败。用户登录失败*

在做了一些研究后，我发现我运行了这个查询，试图让自己访问服务器

```
EXEC sp_grantlogin 'MyMachineName\ASPNET' /* Give the ASPNET account access to DB*/ 
EXEC sp_grantdbaccess 'MyMachineName\ASPNET' /* Give the ASPNET account full privileges to DB*/ 
EXEC sp_addrolemember 'db_owner', 'MyMachineName\ASPNET' 
```

上述方法仍然无效，我收到一条错误消息，提示找不到“MyMachineName”。

我需要有关如何对此进行排序或指出我做错了什么的帮助。请在我的连接字符串下面找到：

```
<add name="SampleName" 
     connectionString="Server=localhost\SqlExpress;Database=SampleLaundrySystem;Integrated Security=True"
     providerName="System.Data.SqlClient" /> 
```

提前感谢您所做的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:03:48.980

改变集成安全=SSPI

请点击此链接： http: [//www.connectionstrings.com/](http://www.connectionstrings.com/)

# javascript - 使用钛合金时如何将 rightNavButton 添加到 iOS 应用程序？

> ID：12656370
> 
> 赞同：2
> 
> 时间：2012-09-29T20:46:18.787
> 
> 标签：javascript, ios, titanium, titanium-mobile, appcelerator-mobile

我正在尝试为窗口创建一个 rightNavButton。

我认为的代码如下所示：

```
<Alloy>
  <Window title="TabName" id="myWindow">
    <Label>Text</Label>
    <Button id="topRight">Foo</Button>
  </Window>
</Alloy> 
```

我试图想出一种方法来将窗口的 rightNavButton 设置为某些东西，并认为在控制器中设置属性将是可行的方法。我可以在右上角获得一个按钮，但它也将始终存在于窗口中。

```
$.myWindow.rightNavButton = $.topRight; 
```

我曾考虑为按钮创建一个单独的视图并以某种方式要求它，但我不知道该怎么做。我什至不确定这是否是正确的做法。

任何帮助，将不胜感激！

* * *

编辑：

我现在有一个解决方法。

```
$.myWindow.rightNavButton = Ti.UI.createButton({title: 'topRight'}); 
```

控制器中的代码有效，但它似乎破坏了使用合金的全部意义。现在该按钮将不再存在于 XML 文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T02:50:24.293

在这里看看我的项目[https://github.com/aaronksaunders/alloy_fugitive](https://github.com/aaronksaunders/alloy_fugitive)

我将按钮添加到 view.xml，然后将其设置在控制器中

```
$.fugitiveWindow.setRightNavButton($.add); 
```

在 view.xml

```
<Alloy>
    <Tab id="fugitiveTab" title="Fugitives">
        <Window id="fugitiveWindow"  title="Fugitives" class='container'>
            <TableView id="table"/>
            <!-- hidden and used later -->
            <Button id="add" title="Add" top="-50dp"></Button>
        </Window>
    </Tab>
</Alloy> 
```

# c# - 从 WCFService 启动控制台应用程序

> ID：12656373
> 
> 赞同：2
> 
> 时间：2012-09-29T20:47:20.390
> 
> 标签：c#

我有一个`Console`项目和一个`WCFService`项目的解决方案。
在`WCF`我添加了对`Console`.

如何运行控制台Process System.Diagnostics;`?`from the service?
Do I need to create a new``using`

在`WCF`我有以下方法，这是我要运行控制台的地方：

```
public String WelComeMessage(String name) {                      
    Process myConsole = new Process(); ///<<<maybe not required?
    //<want run the console here
    return String.Format("{0}, Welcome to http://blah.com", name);
} 
```

所以在VS中它现在看起来像这样：

![在此处输入图像描述](../Images/d46fa65299e58471039a748bcc1f7b75.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:29:22.210

如果您真正需要做的就是使用控制台应用程序中的类，那么您可以直接使用该类而不是将其作为控制台应用程序运行，例如

```
Program.Main(args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:50:24.913

你可以做`Process.Start("consoleapp.exe")`，但你在做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:27:46.253

如果您想从控制台应用程序中读取结果，这样的事情会很有帮助：

```
 /// <summary>
    /// Starts and returns result from console application. Execution is done without window.
    /// </summary>
    /// <param name="exePath">Full path to console exe file</param>
    /// <param name="arguments">console exe parameters</param>
    /// <returns></returns>
    static string ReadConsoleResult(string exePath, string arguments)
    {
        System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo(exePath, arguments);
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true;
        startInfo.CreateNoWindow = true;
        Process p = Process.Start(startInfo);
        string output = p.StandardOutput.ReadToEnd();
        p.WaitForExit();
        return output;
    } 
```

# javascript - Mongoose.js 通过一个 connect() 调用创建到 MongoDB 的多个连接

> ID：12656375
> 
> 赞同：18
> 
> 时间：2012-09-29T20:47:24.010
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我正在 Node.js Express 应用程序中通过 Mongoose 与 MongoDB 建立单一连接：

```
var express = require('express');
var mongoose = require('mongoose');
mongoose.connect('localhost', 'test'); 
```

然后我定义模式，然后是模型，最后是从数据库中提取所有用户的控制器：

```
app.get('/users', function (req, res) {
  return User.find(function (err, users) {
    if (!err) {
      return res.send(users);
    }
  });
}); 
```

这些数据库连接在应用程序启动期间打开，并在 node.js 应用程序期间保持打开状态。

困扰我的是为什么我打开了 5 个连接？一旦我关闭 node.js 应用程序，所有 5 个连接都将关闭。 ![在此处输入图像描述](../Images/940eeab7a48e5d56500f1b503eb1458d.png)

**相关说明**：对于 REST API 服务器，最好始终打开 MongoDB 连接。还是根据每个用户请求手动打开/关闭连接更好？d

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-29T20:54:30.743

这是因为 Mongoose 使用了一个由 5 个连接组成的池（默认情况下），这些连接在整个应用程序中共享。为了获得最佳性能，最好让它们保持打开状态。

您可以通过 options 参数将默认行为更改为`mongoose.connect`. 例如：

```
mongoose.connect('localhost', 'test', { server: { poolSize: 3 }}); // Use 3 connections 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-20T09:32:30.223

添加此 if 语句以仅在 mongoose 断开连接时检查，尝试连接它

```
if (Mongoose.connection.readyState === 0)
       mongoose.connect('localhost', 'test'); 
```

readyState 包含以下类型：

```
0: disconnected
1: connected
2: connecting
3: disconnecting 
```

# android - 如何更改列表视图中的字体文本视图？

> ID：12656378
> 
> 赞同：0
> 
> 时间：2012-09-29T20:47:35.423
> 
> 标签：android, listview, fonts, textview, typeface

我正在尝试通过字体更改字体。请看[这个](http://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/)。

我想更改 .ttf 字体文件中的“货币”（文本视图）字体。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:51:07.350

创建一个字体，然后将其应用于您的edittext，如下所示：-

```
Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "font.ttf");   
editText.setTypeface(tf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:00:48.513

```
<TextView
    ...
    android:typeface="sans"
/> 
```

# sql - SQL 更新触发器条件

> ID：12656379
> 
> 赞同：1
> 
> 时间：2012-09-29T20:47:38.223
> 
> 标签：sql, sql-server, triggers

我正在研究 sql 中的触发器。我正在尝试执行更新触发器，但是我希望它仅在满足特定条件时才起作用。

例如，假设我有一个表 X 和两列 A、B。我希望仅当 A 小于 B 时才能更新 A 或 B 以更新新值。

所以我正在做这样的触发器

```
create trigger utrigger
on X
for update as
if (update(A) OR update(B))
begin

 if (A>B)
 RAISERROR (N' Incorrect %s %d.', -- Message text.
       10, -- Severity,
       1, -- State,
       N'number', -- First argument.
       5); -- Second argument. 
```

结尾

但是我认为我做错了。这有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:53:51.250

您需要使用 INSERTED 虚拟表。

```
create trigger utrigger
on X
for update as
if (update(A) OR update(B))
begin
 if exists (SELECT *   -- this subquery breaches the condition
            FROM INSERTED
            WHERE A>=B)    -- might need some isnull if nulls are not allowed
 RAISERROR (N' Incorrect %s %d.', -- Message text.
       10, -- Severity,
       1, -- State,
       N'number', -- First argument.
       5); -- Second argument.
end 
```

# html - JQuery 滑动/切换效果崩溃

> ID：12656383
> 
> 赞同：0
> 
> 时间：2012-09-29T20:48:25.810
> 
> 标签：html, rows, slidetoggle, cells, effect

我已经完成了以下 HTML 1row-table，它具有使用 jQuery 制作的滑动/切换效果。单击左侧的紫色单元格（单元格#1）可以显示隐藏的内容。

[http://jsfiddle.net/jrick/6r5de/2/](http://jsfiddle.net/jrick/6r5de/2/)

我需要解决的问题：

*   点击后黄色单元格神秘消失，如何避免？

*   然后我想在下面添加更多行，效果与第一行相同。我自己试过，但是当滑下隐藏的黄色单元格时，紫色的单元格一个重叠，行对齐被打乱了。这就是它发生的情况：

[http://jsfiddle.net/jrick/uv68r/5/](http://jsfiddle.net/jrick/uv68r/5/)

但它在展开状态下应该或多或少像这样：

```
 -----------------------------------------
   | Cell #1| hidden content                 |
    --------| This content should be visible | 
            | hidden content                 | 
            | hidden content                 | 
    ----------------------------------------- 
   | Cell #2| hidden content                 |
    --------| This content should be visible | 
            | hidden content                 | 
            | hidden content                 | 
             -------------------------------- 
```

# symfony - Symfony2：使用 FOSUserBundle 时如何在控制器内获取用户对象？

> ID：12656388
> 
> 赞同：37
> 
> 时间：2012-09-29T20:49:21.093
> 
> 标签：symfony, fosuserbundle

我正在使用 FOSUserBundle 对我的用户进行身份验证。

我试图让控制器内的用户对象注册一次旅行，我应该在保存之前将用户对象添加到此旅行。

我没有找到如何做到这一点，因为我在 symfony doc 中找到它的下一个方法：

```
$user = $this->container->get('security.context')->getToken()->getUser(); 
```

将用户名呈现为字符串，但我需要整个对象。

目前，我使用这种方法，但它不能正常工作。

```
$username = $this->container->get('security.context')->getToken()->getUser();
$em = $this->container->get('doctrine')->getEntityManager();
$user = $em->getRepository('SiteUtilisateurBundle:Utilisateur')->find($username); 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-06T01:00:17.557

我认为[拉蒙](https://stackoverflow.com/users/588852/ramon-kleiss)是对的。您已经拥有用户对象。

同样在 Symfony > 2.1.x 你可以使用

```
$this->getUser(); 
```

控制器内部。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-30T18:34:31.693

该`getUser`方法的文档表明：

> 要么返回一个实现 __toString() 的对象，要么返回一个原始字符串。

如果我们查看[这里](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/User.php)`FOS\UserBundle\Model\User`的类（FOSUserBundle 使用的基本用户类），我们可以看到它确实有一个方法：`__toString`

```
public function __toString()
{
    return (string) $this->getUsername();
} 
```

我认为您实际上得到了该`User`对象，但因为它实现了一种`__toString`方法，它可以直接在模板中呈现。

在 Twig 中，您可以使用：

```
{{ dump(user) }} 
```

看看你有什么样的对象。但是您实际上使用的是对象，而不是字符串。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-08T21:10:15.550

解决方案：

```
$userManager = $this->container->get('fos_user.user_manager');
$user = $userManager->findUserByUsername($this->container->get('security.context')
                    ->getToken()
                    ->getUser()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-09T23:58:58.100

在 FOSUser 1.3 中，您不能直接`$this->getUser`在 SecurityController 中调用。

你必须打电话`$this->container->get('security.context')->getToken()->getUser();`

这足以访问用户对象。无需致电`$user = $em->getRepository('SiteUtilisateurBundle:Utilisateur')->find($username);`

此外，您的`find`方法会自动隐式地将初始 $username 对象转换为字符串，因为它不等待对象作为参数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-05T13:07:52.723

我遇到了同样的问题，要解决它，请在您的使用部分添加 FOS 类，即：

```
use FOS\UserBundle\FOSUserEvents;
use FOS\UserBundle\Event\GetResponseUserEvent;
use FOS\UserBundle\Model\UserInterface; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-29T07:42:03.377

在 symfony >= 3.2 中，[文档](https://symfony.com/doc/3.4/security.html)指出：

> [在控制器中获取当前用户的另一种方法是使用UserInterface](http://api.symfony.com/3.4/Symfony/Component/Security/Core/User/UserInterface/UserInterface.html)对控制器参数进行类型提示（如果登录是可选的，则默认为 null）：
> 
> ```
> use Symfony\Component\Security\Core\User\UserInterface\UserInterface;
> 
> public function indexAction(UserInterface $user = null)
> {
>     // $user is null when not logged-in or anon.
> } 
> ```
> 
> 这仅推荐给没有从[Symfony 基本控制器](https://symfony.com/doc/3.4/controller.html#the-base-controller-class-services)扩展并且也不使用[ControllerTrait](http://api.symfony.com/3.4/Symfony/Bundle/FrameworkBundle/Controller/ControllerTrait.html)的有经验的开发人员 。否则，建议继续使用 getUser() 快捷方式。

这是关于它[的博客文章](https://symfony.com/blog/new-in-symfony-3-2-user-value-resolver-for-controllers)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-30T05:57:45.950

对于 FOSUser ^1.3，您可以从扩展 BaseController 的控制器内部获取当前用户，如下所示：

```
$user = $this->container->get('security.token_storage')->getToken()->getUser(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-20T14:02:46.537

```
public function indexAction()
{
    /* @var $user \FOS\UserBundle\Model\UserInterface */
    if ($user = $this->getUser())
    {
        echo '<pre>';
        print_r($user);
        print_r($user->getRoles()); // method usage example

        exit;

        return $this->redirectToRoute('dashboard');
    }

    return $this->redirectToRoute('login');
} 
```

# maven-2 - 我可以使用 Maven2 instal:install-file 命令将多个文件安装到一个工件中吗

> ID：12656389
> 
> 赞同：2
> 
> 时间：2012-09-29T20:49:25.303
> 
> 标签：maven-2, maven-install-plugin

我正在使用 JOGL2 和我最喜欢的 IDE Eclipse 开发应用程序，我也想为此目的使用 Maven2。不幸的是，JOGL2 还没有神器。另外，我计划将其部署为可运行的 jar 文件。

所以我想在本地安装 JOGL 工件：所以我将使用 install:install-file 命令。

但我想组合几个罐子来制作几个工件，即：

*   gelgen-rt.jar 和 jogl.all.jar 作为一个名为 jogl.core 的单个工件
*   gelgen-rt-natives-linux-i586.jar 和 jogl.all-natives-linux-i586.jar 作为一个名为 jogl-natives-linux-i586 的 jar
*   等等

可能吗 ？（官方文档没有提到这样做的可能性或不可能性）。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:01:26.267

像往常一样安装所有文件，例如`file:jar:version`. `pom`比创建带有打包和使用的pom`gluegen-rt.jar`以及其中`jogl.all.jar`的依赖项（它们必须已经安装）。之后在项目中使用新的 pom 作为依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:02:14.243

maven 对此没有支持。您必须解压缩这些 JAR 文件并将它们重新打包在一起。

maven*确实*支持将 JAR 与依赖项合并 (http://stackoverflow.com/questions/574594) - 它是按照我上面提到的方式完成的。但是您问的是合并两个任意 JAR，这在 Maven 中是不可能的。

# xcode - iOS Simulator 3.0 附带并支持 iOS 4.2.1 的最后一个（如果有的话）Xcode 是什么？

> ID：12656390
> 
> 赞同：0
> 
> 时间：2012-09-29T20:49:32.450
> 
> 标签：xcode, ios-simulator, ipod-touch

我目前有一个 iPod Touch 2G 型号 MC，运行 iOS 4.2.1，AFAIK 无法降级，但我需要构建一个 iOS 3.0 应用程序

因此，同时拥有兼容 iOS 4.2.1 的 SDK 和 iOS Simulator 3.0 的 Xcode 也会有所帮助

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:44:37.623

[iPhone SDK 3.2 Final with Xcode 3.2.2](http://developer.apple.com/ios/download.action?path=/iphone/iphone_sdk_3.2__final/xcode_3.2.2_and_iphone_sdk_3.2_final.dmg) for Snow Leopard (10.6.0) 内置 iOS Simulator 3.0

[可以安装Xcode 3.2.6 和 iOS SDK 4.3 GM Seed](http://developer.apple.com/devcenter/download.action?path=/ios/ios_sdk_4.3_gm_seed/xcode_3.2.6_and_ios_sdk_4.3_gm_seed.dmg) for Snow Leopard (10.6.6)，然后使用以前的 DMG 可以使用以下软件包安装 iOS Simulator 3.0：

"/Volumes/iPhone SDK/Packages/iPhoneSDK3_0.pkg" "/Volumes/iPhone SDK/Packages/iPhoneSimulatorSDK3_0.pkg"

# spss - 如何在SPSS中的一个散点图中为具有不同趋势的不同线应用拟合线，包括线性和三次？

> ID：12656394
> 
> 赞同：3
> 
> 时间：2012-07-30T04:24:05.340
> 
> 标签：spss, curve-fitting

我有一个包含三种治疗的散点图，并且想为每种治疗应用最佳拟合线。SPSS中是否有任何方法可以在一种处理中应用拟合线而不会在一个数字上影响其他处理。任何意见是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:59:26.337

这是我在[NABBLE SPSS 列表上发布的逐字记录 - 服务](http://spssx-discussion.1045642.n5.nabble.com/different-fit-lines-for-different-groups-td5714524.html#a5714525)于同义问题：

> 这是我能想到的最佳解决方案。简而言之，它创建了两个分组变量，然后将一个组映射到一个 100% 透明的元素。然后它在 GPL 中只有两个元素调用（在此示例中，一个用于线性，一个用于二次）。
> 
> 当然，最灵活的解决方案是实际拟合每个组的模型并将预测值作为新变量放入数据集中，但这并没有太糟糕（传说甚至没有那么糟糕） .

```
**********************************************.
set seed = 10.
input program.
loop #i = 1 to 100.
if #i <= 50 group = 0.
if #i > 50 group = 1.
end case.
end loop.
end file.
end input program.
dataset name sim.
execute.

compute x = RV.NORM(0,1).
if group = 0 outcome =  x + RV.NORM(0,0.1).
if group = 1 outcome =  x**2 + RV.NORM(0,0.1).

compute group_square = (group = 1).
compute group_linear = (group = 0).
formats all (F1.0).
exe.

DATASET ACTIVATE sim.
* Chart Builder.
GGRAPH
  /GRAPHDATASET NAME="graphdataset" VARIABLES=x outcome group_square group_linear group
    MISSING=LISTWISE REPORTMISSING=NO
  /GRAPHSPEC SOURCE=INLINE.
BEGIN GPL
  SOURCE: s=userSource(id("graphdataset"))
  DATA: x=col(source(s), name("x"))
  DATA: outcome=col(source(s), name("outcome"))
  DATA: group=col(source(s), name("group"), unit.category())
  DATA: group_square=col(source(s), name("group_square"), unit.category())
  DATA: group_linear=col(source(s), name("group_linear"), unit.category())
  GUIDE: axis(dim(1), label("x"))
  GUIDE: axis(dim(2), label("outcome"))
  GUIDE: legend(aesthetic(aesthetic.transparency), null())     
  SCALE: cat(aesthetic(aesthetic.transparency), map(("0", transparency."1.0"), ("1", transparency."0.0")))
  ELEMENT: point(position(x*outcome), color.exterior(group))
  ELEMENT: line(position(smooth.linear(x*outcome)), transparency.interior(group_linear), color.interior(group))
  ELEMENT: line(position(smooth.quadratic(x*outcome)), transparency.interior(group_square), color.interior(group))
END GPL.
**********************************************. 
```

[![具有不同拟合线的曲线](../Images/4aa4b823738276b800f6668db3bc901d.png)](https://i.stack.imgur.com/6cHcu.png)
[（来源：[nabble.com](http://spssx-discussion.1045642.n5.nabble.com/file/n5714525/mapping_aethetics1.png)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:19:45.363

首先，当您创建散点图时，请确保您说“x with y by z”，其中 z 是定义组的变量，每个组将获得自己的拟合线。图形编辑器窗口中有一个按钮，用于应用多条拟合线。它就在单拟合线按钮旁边。您也可以使用菜单。我不知道用语法创建这些行的方法，除非在具有“交互式图形”功能的旧版本中。

获得拟合线后，您可以单击，稍等片刻，然后再次单击以仅选择一条，然后您可以使用属性对话框将其更改为二次、三次或黄土线。

# networking - ip 连接到代理其他 ip 443 只是询问

> ID：12656398
> 
> 赞同：-1
> 
> 时间：2012-09-29T20:50:05.770
> 
> 标签：networking, proxy, ip, port

有没有人可以告诉我这是什么意思。我刚刚设置了我的 squid 代理，但还没有使用它们，我正在扫描我的服务器上的奇怪行为并发现了这个。

我知道它转到我的代理端口 5128，但是为什么意大利的某个人要在端口 443 上连接到美国……我不明白，请帮我解决这个问题。

1348949815.573 1172 70.38.31.174 TCP_MISS/200 5128 连接 205.188.27.208:443 - DIRECT/205.188.27.208 -

1348949819.961 21000 70.38.31.174 TCP_MISS/503 0 连接 205.188.95.208:443 - DIRECT/205.188.95.208 -

1348949824.243 920 70.38.31.174 TCP_MISS/200 5128 连接 205.188.27.208:443 - DIRECT/205.188.27.208 -

1348949826.461 21000 70.38.31.174 TCP_MISS/503 0 连接 205.188.95.208:443 - DIRECT/205.188.95.208 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:10:01.403

这很可能是受恶意软件感染的 PC 探测开放代理，以便它可以隐藏在代理和垃圾邮件聊天室后面。远程客户端无法知道您刚刚安装了 Web 代理，因此它会随机探测它们。它尝试连接的 IP 地址的域名包含字符串“icq”和“aol”。

# vim - Vim 中的语法高亮冲突（使用关键字时）

> ID：12656403
> 
> 赞同：4
> 
> 时间：2012-09-29T20:50:49.867
> 
> 标签：vim, macvim, vim-syntax-highlighting

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:57:58.997

In this case matches come handy:

```
let s:kwreg='\v<%(PMID|OTHER|OTHER2)>'
let s:kwsyn='Todo'
augroup MyKeywords
    autocmd!
    autocmd WinEnter * if !exists('w:my_keyword_mnr') | 
                     \    let w:my_keyword_mnr=matchadd(s:kwsyn, s:kwreg) |
                     \ endif
augroup END
let s:curtab=tabpagenr()
for s:tab in range(1, tabpagenr('$'))
    execute 'tabnext' s:tab
    let s:curwin=winnr()
    for s:win in range(1, winnr('$'))
        execute s:win.'wincmd w'
        let w:my_keyword_mnr=matchadd(s:kwsyn, s:kwreg)
    endfor
    execute s:curwin.'wincmd w'
endfor
execute 'tabnext' s:curtab
unlet s:curtab s:curwin s:tab s:win 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T10:58:05.690

If you want that highlighted everywhere (as a kind of "overlay"), use `matchadd()`, as shown by ZyX's answer.

If this is a syntax extension for one / a couple of filetypes (e.g. only Java and Python files), put your `:syntax` definition into `~/.vim/after/syntax/<filetype>.vim`. You have to study the original syntax a bit, and possibly add `containedin=<groupNames>` clauses, so that your items properly integrate.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T21:28:56.737

You could use something like this:

```
syntax match pmidTODO /TODO\|PMID/
hi link pmidTODO Todo
hi Todo guibg=yellow guifg=black 
```

~~This should work even when `Todo` is redefined by Vim syntax files.~~

**Edit:** As ZyX pointed out, this does not survive syntax changes.

# flash - Flash 套接字未定义属性但已定义？

> ID：12656416
> 
> 赞同：0
> 
> 时间：2012-09-29T20:52:38.657
> 
> 标签：flash, sockets

您好，我正在尝试在 Flash 中打开套接字。所以我遵循了一个教程，但出现了错误：

```
package com.game.game
{
    import flash.net.socket;
    import flash.events.*;
    public dynamic class game
    {
        var mysocket:Socket = new Socket();

        Security.allowDomain("*");

        mysocket.addEventListener(Event.CONNECT, onConnect);
        mysocket.addEventListener(Event.CLOSE, onClose);
        mysocket.addEventListener(IOErrorEvent.IO_ERROR, onError);
        mysocket.addEventListener(ProgressEvent.SOCKET_DATA, onResponse);
        mysocket.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecError);

        mysocket.connect("hejp.co.uk", 80);
    }

} 
```

我收到了这些错误：

```
1120: Access of undefined property mysocket.
1120: Access of undefined property onConnect.
1120: Access of undefined property mysocket.
1120: Access of undefined property onClose.
1120: Access of undefined property mysocket.
1120: Access of undefined property onError.
1120: Access of undefined property mysocket.
1120: Access of undefined property onResponse.
1120: Access of undefined property mysocket.
1120: Access of undefined property onSecError.
1120: Access of undefined property mysocket.
The class 'com.game.game.game' must subclass 'flash.display.MovieClip' since it is linked to a library symbol of that type. 
```

我必须进口一些东西吗？？？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:25:06.540

看起来您有正确的套接字代码，但它需要在方法内部。如果您将实例化套接字的代码放在构造函数方法中，那么您将在实例化类时连接到套接字。或者，您可以将套接字代码放在可以从类外部调用的不同公共方法中。

您可能还需要通过在声明中声明公共或私有来声明类属性和方法的范围。

您还需要声明每个侦听器函数，否则套接字将没有要连接的函数。

```
package com.game.game
{
    import flash.net.socket;
    import flash.events.*;
    public dynamic class game
    {
        //public class variables
        public var mysocket:Socket;

        //constructor
        public function game() {
            mysocket = new Socket();

            Security.allowDomain("*");

            mysocket.addEventListener(Event.CONNECT, onConnect);
            mysocket.addEventListener(Event.CLOSE, onClose);
            mysocket.addEventListener(IOErrorEvent.IO_ERROR, onError);
            mysocket.addEventListener(ProgressEvent.SOCKET_DATA, onResponse);
            mysocket.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecError);

            mysocket.connect("hejp.co.uk", 80);
        }

        //private listener methods
        private function onConnect(evt:Event):void {
            //connect method code
        }

        private function onClose(evt:Event):void {
            //close method code
        }

        private function onError(evt:IOErrorEvent):void {
            //error method code
        }

        private function onResponse(evt:ProgressEvent):void {
            //response method code
        }

        private function onSecError(evt:SecurityErrorEvent):void {
            //security error method code
        }
    }

} 
```

# delphi - 将setter添加到后代类中的属性

> ID：12656417
> 
> 赞同：5
> 
> 时间：2012-09-29T20:53:18.890
> 
> 标签：delphi, inheritance, properties, setter

我有两个 Delphi 课程。父类声明一个字符串字段 FSSN 和匹配的属性 SSN，访问器直接读取和写入该字段。在我的子类中，我想重新声明属性 SSN 以使用子类中的设置器（如果可能，在将 SSN 写入字段之前对其进行转换）。

属性 SSN 将由父类的方法设置，但是（如果实例是子类的实例）我希望调用*子*设置器。但是，当我运行代码时，我从不输入子设置器，并且该字段似乎是直接使用父级中的属性声明设置的。

这可以做到吗？

（我意识到我可以通过在父类中引入 setter 过程并在子类中覆盖来实现这一点；如果可能的话，我宁愿不打扰父类）。

到目前为止，这是我所拥有的（当然，在一个大大简化的版本中）：

```
TCustomPerson = class(TObject)
  protected
    FSSN: String;
  public
    procedure LoadFromXML(ANode: IXMLNode);
    property SSN: String read FSSN write FSSN;

TMyPerson = class(TCustomPerson)
  protected
    procedure SetSSN(ASSN: String);
  public
    property SSN: String read FSSN write SetSSN; // <=== Setter introduced.

 procedure TCustomPerson.LoadFromXML(ANode: IXMLNode);
 var ThisSSN: String;
 begin
    //extract SSN from XML into ThisSSN
    SSN := ThisSSN;                             // Expect to invoke SetSSN.
 end

procedure TMyPerson.SetSSN(ASSN: String);
begin
    FSSN := ValidateSSN(ASSN);                  // <== Breakpoint here never reached.
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T21:17:20.207

不; 那是不可能的。

子类可以访问父类，但是父类不知道子类，并且父类中没有任何可以使用多态性进行路由的声明为虚拟的东西。

在重写方法的情况下，有一个 VMT 可用于路由到正确的子类，但无法虚拟化没有设置器的直接属性分配。您需要在父级中声明为虚拟的设置器，然后后代上的覆盖设置器将起作用。没有办法虚拟化直接的变量赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T03:04:12.100

我有一个使用 RTTI 的解决方法。您只需发布 SSN 属性。

```
 procedure TCustomPerson.LoadFromXML(ANode: IXMLNode);
 var ThisSSN: String;
 begin
    //extract SSN from XML into ThisSSN
    SetStrProp(Self,'SSN',ThisSSN);
 end 
```

# mysql - 子查询内的 MySQL 限制产生错误

> ID：12656418
> 
> 赞同：2
> 
> 时间：2012-09-29T20:53:20.220
> 
> 标签：mysql

我收到：

`[Err] 1235 - This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'`

在执行以下查询时：

```
UPDATE account.account
SET STATUS = 'BLOCK'
WHERE
    id IN (
        SELECT
            p.account_id
        FROM
            log.log
        LEFT JOIN player.player p ON (p.id = log.who)
        WHERE
            vnum = 71054
        AND how = 'BUY'
        GROUP BY
            log.`who`
        HAVING
            COUNT(log.who) > 2
        LIMIT 10
    ); 
```

是否有可能重写此查询以便 MySQL 可以执行它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T20:56:09.267

解决方案是加入子查询而不是使用`IN()`. `INNER JOIN`只会`account`从有限的子查询中返回匹配 id 的行。然后可以在`UPDATE`没有`WHERE`子句的情况下进行。

```
Update 
  account.account AS account
  INNER JOIN (
        SELECT
            p.account_id
        FROM
            log.log
            LEFT JOIN player.player p ON (p.id = log.who)
        WHERE
            vnum = 71054
            AND how = 'BUY'
        GROUP BY log.`who`
        HAVING COUNT(log.who) > 2
        LIMIT 10 
   ) subq ON account.id = subq.id
SET STATUS='BLOCK' 
```

要验证将被修改的行，请使用`SELECT`第一个：

```
SELECT
  account.*
FROM 
  account.account
  INNER JOIN (
            SELECT
                p.account_id
            FROM
                log.log
                LEFT JOIN player.player p ON (p.id = log.who)
            WHERE
                vnum = 71054
                AND how = 'BUY'
            GROUP BY log.`who`
            HAVING COUNT(log.who) > 2
            LIMIT 10 
       ) subq ON account.id = subq.id 
```

# php - jQuery $.post 回调函数（数据）未定义

> ID：12656426
> 
> 赞同：2
> 
> 时间：2012-09-29T20:54:47.367
> 
> 标签：php, jquery, post, callback

我使用 jQuery 将表单提交到服务器上的 php 文件。一切正常......（php文件获取正确的post变量，创建数据库条目等）但在响应中，有时“数据”会变得古怪。

```
$('#form_submit').click( function() {
    $.post("path/to/script.php", $('#form').serialize(), function(data) {
        if ( data.status == 1 ) {
            alert('awesome sauce');
        } else {
            alert('crap');
        }
    }, "json");
}); 
```

php 脚本返回（成功时）

```
$response['status'] = 1;
$response['message'] = 'worked';
echo json_encode($response);
exit(); 
```

我得到了很多废话，而且没有足够的美味酱汁。

有谁知道为什么有时“data.status”是未定义的，有时不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:07:34.727

像这样试试>

```
$('#form_submit').click( function() {
$.post("path/to/script.php", $('#form').serialize(), function(data) {
var obj = jQuery.parseJSON(data);
    if ( obj.status == 1 ) {
        alert('awesome sauce');
    } else {
        alert('crap');
    }
});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:05:35.773

*exit()*在输出缓冲方面的表现如何？它是否刷新输出缓冲区？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:04:29.523

试试这个：

```
$('#form_submit').click( function() {
    $.post("path/to/script.php", $('#form').serialize())
     .success(function(){
        alert('awesome sauce');
     }).error(function(){
        alert('crap');
     });
}); 
```

# macos - 在mac中计算目录及其子目录的特定文件类型的数量

> ID：12656427
> 
> 赞同：38
> 
> 时间：2012-09-29T20:55:18.123
> 
> 标签：macos, unix, terminal

我使用`ls -l *.filetype | wc -l`但它只能在当前目录中找到文件。
我怎样才能计算其子目录中具有特定扩展名的所有文件？
非常感谢。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-29T20:59:42.277

您可以使用`find`以下命令执行此操作：

```
find . -name "*.filetype" | wc -l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-11T12:55:11.903

以下复合命令虽然有些冗长，但可以保证准确计数，因为它可以正确[处理包含换行符的文件名](https://mywiki.wooledge.org/BashFAQ/020)：

```
total=0; while read -rd ''; do ((total++)); done < <(find . -name "*.filetype" -print0) && echo "$total" 
```

**注意：**在运行上述复合命令之前：

1.  首先，[`cd`](https://ss64.com/osx/cd.html)到您要计算所有具有特定扩展名的文件的目录。
2.  酌情更改`filetype`零件，例如`txt`

* * *

**演示：**

为了进一步说明为什么管道[`find`](https://ss64.com/osx/find.html)to的结果[`wc -l`](https://ss64.com/osx/wc.html)可能会产生不正确的结果：

1.  运行以下复合命令以快速创建一些测试文件：

    ```
    mkdir -p ~/Desktop/test/{1..2} && touch ~/Desktop/test/{1..2}/a-file.txt && touch ~/Desktop/test/{1..2}/$'b\n-file.txt' 
    ```

    *这会在您的“桌面”*上生成以下目录结构：

    ```
    test
    ├── 1
    │   ├── a-file.txt
    │   └── b\n-file.txt
    └── 2
        ├── a-file.txt
        └── b\n-file.txt 
    ```

    [**注意：**它总共包含四个`.txt`文件。其中两个具有多行文件名，即`b\n-file.txt`].

    [在较新版本的 macOS 上，命名的文件`b\n-file.txt`将显示`b?-file.txt`在*"Finder"*中，即问号表示多行文件名中的换行符]

2.  然后运行以下命令将结果通过管道`find`传输到`wc -l`：

    ```
    find ~/Desktop/test -name "*.txt" | wc -l 
    ```

    它***错误地***报告/打印：

    > `6`

3.  然后运行以下建议的复合命令：

    ```
    total=0; while read -rd ''; do ((total++)); done < <(find ~/Desktop/test -name "*.txt" -print0) && echo "$total" 
    ```

    它***正确***报告/打印：

    > `4`

# php - 在 php 中使用未定义的变量或数组偏移量作为参数

> ID：12656428
> 
> 赞同：0
> 
> 时间：2012-09-29T20:55:20.237
> 
> 标签：php, arrays

我有一个静态方法，如果它不存在则返回或创建一个对象。我想找到一种优雅的方式来处理将 ID 参数传递给对象。

这里的逻辑是，如果传递了一个 ID，则使用该 ID 创建对象。如果不是，则使用默认 ID 创建它。

我所拥有的是：

```
class App {
    private $game_obj;

    public static function get_game ($arguments) {
    if (!isset($this->game_obj))
            $this->game_obj = new Game ($arguments[0]);

    return $this->game_obj;
    }
}

class Game {
    private $gameID;

    public function __construct ($id=1) {
        $this=>gameID = $id;
        /* other code */
    }
} 
```

当我打电话时，`App::get_game(5)`我得到了我期望的结果。一个 gameID 为 5 的 Game 对象。

当我打电话时，`App::get_game()`我*没有*得到我期望的结果，这将是一个 gameID 为 1 的 Game 对象。相反，我在`App::get_game ()`.

我更新`App::get_game()`如下，但似乎特别不雅。我更愿意在类定义中定义默认 ID。

```
class App {
    private $game_obj;

    public static function get_game ($arguments) {
    if (!isset($this->game_obj)) {
            $default_id = 1; // I don't like having this here
            $id = isset ($arguments[0] ? $arguments[0] : $default_id;
            $this->game_obj = new Game ($id);
        }

    return $this->game_obj;
    }
} 
```

有没有更简单/更好/更优雅的方式来处理这个问题？理想情况下，将我的默认 ID 声明保留在 Game 类本身中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:06:22.473

你试过了吗

```
public static function get_game ($arguments=null) {
if($arguments==null) //etc.. 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:08:47.737

你可以测试：

```
if(is_object($my_object)) {

    } 
```

# wordpress - WordPress 网站上的 htaccess

> ID：12656435
> 
> 赞同：0
> 
> 时间：2012-09-29T20:56:59.720
> 
> 标签：wordpress, .htaccess, redirect

我一直在努力解决 wordpress 网站上的 htaccess 问题，过去我从 stackoverflow 获得了很多信息，我认为这是最好的提问地点。如果我没有正确发布，请提前道歉，这是我的第一次。

这是我的设置的细节（我无法显示或允许访问该站点，因为我已同意某种 NDA）

1.  有2个站点。第一个是根站点“/”，第二个是“/mythoughts/”，如网络管理员中所示。
2.  “/mythoughts/”站点是旧的自定义博客的替代品，该博客在 url 中使用变量（自定义）
3.  我使用的主题是二十个和根（显然根不做整洁的 url 重写，因为它在网络设置上）

问题是这样的。

首先“index.php 正在从 url 中删除（这不是问题，但我认为当我尝试进行其他重写时可能会导致问题。）

其次，旧网站在 2 个实例的 url 中有变量。

第一个例子是这个

```
www.thesite.com/mythoughts/index.php?year=2010&month=9 
```

我需要重写为

```
www.thesite.com/mythoughts/2010/9 
```

首先 index.php 被自动删除

我尝试了很多不同的东西，比如

```
RewriteRule ^mythoughts/index.php?year=(.*)&month=(.*)$ mythoughts/$1/$2 [R=301,L] 
```

不工作

第二个例子是这个

```
www.thesite.com/mythoughts/index.php?thought=101 
```

应该重写为

```
www.thesite.com/mythoughts/title-of-the-post 
```

我有一个脚本可以将 url 变量与帖子的标题匹配（并替换删除非法字符），但重写不起作用。

这是我目前拥有的htaccess（一个裸wordpress）

```
# BEGIN WordPress
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
    RewriteRule . index.php [L]

</IfModule>

#END WordPress 
```

如果有人能帮助我在整个 htaccess 事情（过去几周我一直在努力解决的问题）上为我指明正确的方向，我将非常感激。

提前感谢男孩和女孩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:08:21.373

在第一种情况下，您有：

```
RewriteRule ^mythoughts/index.php?year=(.*)&month=(.*)$ mythoughts/$1/$2 [R=301,L] 
```

但是您无法匹配重写规则中的查询字符串。此外，由于您有一个将其重写回来的规则，您只需创建一个重定向循环。您需要匹配实际请求而不是 URI。

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /mythoughts/index\.php\?year=([^&]*)&month=([^&\ ]*)
RewriteRule ^ mythoughts/%1/%2 [R=301,L] 
```

至于：

> 我有一个脚本可以将 url 变量与帖子的标题匹配（并替换删除非法字符），但重写不起作用。

我在您的 htaccess 中看不到任何脚本，也许您包含规则或脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T21:10:23.030

继续我的搜索后，即使我在堆栈上发布了问题（伟大的）溢出

这就是我的结果。

在第一个使用双 url 字符串的情况下，答案是

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /mythoughts/index\.php\?year=([0-9\-]+)&month=([0-9\-]+)\ HTTP/ [NC]
RewriteRule ^index\.php$ http://site.co.uk/mythoughts/%1/%2? [R=301,L] 
```

所以最初的网址是

```
www.site.co.uk/mythoughts/index.php?year=2010&month=12 
```

重写结果是

```
www.site.co.uk/mythoughts/2010/12/ 
```

完美的 ！！！！

在第二种情况下，首先回答乔恩斯的问题。

该脚本是用 php 编写的，它从 url 变量的 id 中扫描旧的数据库连接字符串，例如下面 url 中的变量

```
www.site.co.uk/mythoughts/index.php?though=21 
```

这篇文章或数据库条目有一个标题，并且在 wordpress 中，该标题用于永久链接

所以它会是

```
www.site.co.uk/mythoughts/sublime-and-powerful-outcomes 
```

该脚本将 id 作为重写的第一个条件，并将 id 放在它的位置。第二部分取帖子的标题，并用删除的破折号和特殊字符交换空格。

这会产生新的网址。

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /mythoughts/index\.php\?thought=21
\ HTTP/ [NC]
RewriteRule ^index\.php$ http://site.co.uk/mythoughts/sublime-and-powerful-outcomes? [R=301,L] 
```

感谢 Jon 花时间回答这个问题。

希望这可以帮助某人

# wordpress - Wordpress login_redirect 过滤器被忽略并且没有效果

> ID：12656436
> 
> 赞同：3
> 
> 时间：2012-09-29T20:57:20.277
> 
> 标签：wordpress, filter

我试图在用户登录时将具有特定元标记的用户发送到特殊页面。我知道 $current_user 全局可能不可用，但过滤器将用户作为参数传递，所以我想我是什么做应该工作：

```
//special login redirect for employers
function employer_login_redirect($redirect_url, $request_url, $user) {
    $user;
    $is_employer = get_user_meta($user->ID, 'is_employer', true);
    var_dump($is_employer);
    if ($is_employer) {
        return get_bloginfo('url') . "/candidate-ranks/";
    } else {
        return $redirect_url;
    }
}
add_filter( 'login_redirect', 'employer_login_redirect', 90, 3 ); //late priority just in case other plugins are interfering 
```

我错过了什么吗？我什至无法显示 var_dumpt，这让我认为回调函数甚至没有被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:41:42.457

它看起来不错，但我认为您应该使用`site_url()`，因为`get_bloginfo('url')`返回 home_url 而不是 site_url。这可能是个问题。

```
function employer_login_redirect($redirect_url, $request_url, $user) {
    $is_employer = get_user_meta($user->ID, 'is_employer', true);
    if ($is_employer) {
        return site_url() . "/candidate-ranks/";
    } else {
        return $redirect_url;
    }
}
add_filter( 'login_redirect', 'employer_login_redirect', 90, 3 ); 
```

# jquery - 抓取一个 div 的 bg-color 并使用 jquery 应用到另一个

> ID：12656438
> 
> 赞同：0
> 
> 时间：2012-09-29T20:57:28.137
> 
> 标签：jquery, css, html, background-color

如何动态获取具有特定 ID 的 div 的 bgcolor 并将该 bgcolor 应用于前一个 div？可以使用jquery吗？我想抓住 #s4-ribbonrow 的 bgcolor 并使用 jquery 将该背景应用到以前的 DIV“maincontainer”......有人能给我一些想法..

[![](../Images/bcfcbadf69605db5a1034ad38e48d162.png)](https://i.stack.imgur.com/hoi4V.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:00:39.267

这很简单：

```
$('.maincontainer').css('background-color',$('#s4-ribbonrow').css('background-color')); 
```

我们在这里所做的只是使用 css() 指定 .maincontainer 的背景颜色，使用在 #s4-ribbonrow 中找到的背景颜色值

# php - 来自 3 个表的内部连接

> ID：12656439
> 
> 赞同：0
> 
> 时间：2012-09-29T20:57:33.753
> 
> 标签：php, mysql

我有 3 张桌子：

```
tb_wrapper              tb_doc                 tb_aut
=====================   ====================   =======================
|id|web|title|source|   |id| web | content |   |id|web|aut  | linkAut|
=====================   ====================   =======================  
|1 | A |  AA | AAA  |   |1 | A   |  AAAA   |   |1 | A | B   | C      |
=====================   ====================   |2 | A | D   | E      |
                                               ======================= 
```

我想从具有相同的 3 个表中获取所有记录数据`web`。

这是我的代码：

```
$query = mysql_query("
                     SELECT 
                        tb_wrapper.web,
                        tb_wrapper.title,
                        tb_wrapper.source,
                        tb_doc.web,
                        tb_doc.content,
                        tb_aut.web,
                        tb_aut.aut,
                        tb_aut.linkAut
                     FROM
                        tb_doc
                     INNER JOIN tb_wrapper ON tb_doc.web = tb_wrapper.web 
                        AND
                     INNER JOIN tb_aut ON tb_doc.web = tb_aut.web 
 "); 
```

错误问题： `Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in D:\AppServ\www\sukses\indexsummary.php on line 87`。

**编辑**

然后我想把它们全部打印出来：

```
while ($row = mysql_fetch_array($query)) {
    $source  = $row['source'];
    $title   = $row['title'];
    $content = $row['content'];
    $aut  = $row['aut'];
    $linkAut   = $row['linkAut'];
echo '<h2><a href='.$source.'> '.$title.' </a></h2>';
echo '<p><a href='.$aut_url.'> '.$aut.'  </a></p>';
} 
```

结果，它们被打印了两次。AA B 和 AA D。如何使它们成为 AA BD ？

请帮我。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:01:02.130

```
$query = mysql_query("
                     SELECT 
                        tb_wrapper.web,
                        tb_wrapper.title,
                        tb_wrapper.source,
                        tb_doc.web,
                        tb_doc.content,
                        tb_aut.web,
                        tb_aut.aut,
                        tb_aut.linkAut
                     FROM
                        tb_doc
                     INNER JOIN tb_wrapper ON tb_doc.web = tb_wrapper.web
                     INNER JOIN tb_aut ON tb_doc.web = tb_aut.web 
```

您需要删除内部连接之间的 AND，这是无效的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:54:48.990

您可能需要阅读更多关于 JOINS 如何在 SQL 中工作的信息。您似乎想从多行收集结果，但这通常不是它的工作方式。

如果您要加入每个表中的非唯一列，您应该期望获得具有重复值的行的重复结果。

我可能没有正确解释，所以下面更详细。以下是您的表格作为参考：

```
tb_wrapper              tb_doc                 tb_aut
=====================   ====================   =======================
|id|web|title|source|   |id| web | content |   |id|web|aut  | linkAut|
=====================   ====================   =======================  
|1 | A |  AA | AAA  |   |1 | A   |  AAAA   |   |1 | A | B   | C      |
=====================   ====================   |2 | A | D   | E      |
                                               ======================= 
```

您的查询（没有其他人建议的 AND）加入每个表的“网络”列。

如果您只查看前 2 个表，它们只有 1 行，“web”是 A。如果您只加入这些表，您将得到 1 行结果：

```
==================================
|web|title|source| web | content |
==================================
| A |  AA | AAA  | A   |  AAAA   |
================================== 
```

但是您的第三个表有 2 行具有相同的“网络”值。连接前 2 个表的 1 行结果可以连接到第三个表的两行。这会产生以下结果：

```
=====================================================
|web|title|source| web | content |web|aut  | linkAut|
=====================================================  
| A |  AA | AAA  | A   |  AAAA   | A | B   | C      |
| A |  AA | AAA  | A   |  AAAA   | A | D   | E      |
===================================================== 
```

然后，您的 PHP 循环遍历结果并从每行打印 2 列（'title' 和 'aut'），结果是：

```
AA  B
AA  D 
```

这正是它应该如何工作的。如果您想获得 'AA B D' 作为结果，通过行进行简单的迭代是不够的。

要查看值唯一时它如何变化，请将所有行加入“id”列。由于每一行的“id”在您的样本中都是唯一的，因此您的结果中只会得到 1 行。

如果您尝试获取从不同行返回的值（例如显示一次标题和内容，然后显示“aut”值列表），则需要使用 2 个不同的查询或在`while`循环中添加一些额外的逻辑。

# sublimetext2 - Sublime Text 2 自动完成弹出窗口无法正常工作

> ID：12656448
> 
> 赞同：25
> 
> 时间：2012-09-29T20:59:07.177
> 
> 标签：sublimetext2, sublimetext3, sublimetext

我在整个包控制中安装的 jQuery Snippet 遇到问题。安装后，我没有弹出带有 jQ​​uery 代码提示和 intalisance 的弹出窗口。看这个视频：
[http ://code.tutsplus.com/courses/perfect-workflow-in-sublime-text-2/lessons/adding-snippets-through-package-control](http://code.tutsplus.com/courses/perfect-workflow-in-sublime-text-2/lessons/adding-snippets-through-package-control)

在 0:50 键入后，`.`他弹出了带有代码提示的弹出窗口——我没有这个。我必须输入`.`，然后按下`Tab`以显示带有片段的弹出窗口......
是的，我在 JavaScript 文件中，我有默认设置。

之后`.`他还获得了所有 jQuery 函数，如`add`or `addClass`。`Ctrl`即使我按+ ，我也没有这个`Space`。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-07T04:41:53.320

如果您点击 CTRL-SPACE，您将获得您刚刚输入的可用完成的下拉列表。

[http://www.sublimetext.com/docs/2/tab_completion.html](http://www.sublimetext.com/docs/2/tab_completion.html)

如果您希望在键入时显示自动完成下拉菜单，请将此行添加到您的 User Preferences.sublime-settings 文件中：

```
{
  "auto_complete_selector": "source, text"
} 
```

那应该做你正在寻找的:-)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-06T21:38:06.980

考虑将用户设置更改为以下内容：

```
{
  // By default, auto complete will commit the current completion on enter.
  // This setting can be used to make it complete on tab instead.
  // Completing on tab is generally a superior option, as it removes
  // ambiguity between committing the completion and inserting a newline.
  "auto_complete_commit_on_tab": true,

  // Controls if auto complete is shown when snippet fields are active.
  // Only relevant if auto_complete_commit_on_tab is true.
  "auto_complete_with_fields": true,

  // As Richard Jordan suggested, this item
  // controls what scopes auto complete will be triggered in
  "auto_complete_selector": "source, text"
} 
```

> 在 Mac 上按 + 或在Windows上按+打开您的*用户设置*`Cmd``,``Ctrl``,`

如果你想完全掌握 Sublime Text 2，我推荐这门课程：[Sublime Text 中的完美工作流](https://tutsplus.com/course/improve-workflow-in-sublime-text-2/)。当我第一次发布这个答案时，它曾经是免费的。无论如何，我仍然推荐它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-09T18:22:36.050

您使用的是哪个操作系统？我猜是Windows。

这里的问题似乎是可用插件中的 jQuery 片段具有以**$**或 a`<tabTrigger>`开头的属性**。**，这会导致麻烦。

 ****尝试以下操作：找到包含这些片段的 jQuery 包（在*Preferences -> Browse Packages*下）并打开无法正常工作的片段的 .sublime-snippet 文件。您在帖子中命名的那个将在文件*event-on.sublime-snippet*中定义。

找到线

```
<tabTrigger>.on</tabTrigger> 
```

并删除**.** 如下

```
<tabTrigger>on</tabTrigger> 
```

保存并返回到您的 .js 文件。现在看看当你输入*o*时片段是否出现。这对我有用。

我想这是 Windows 的 Sublime Text 2 中的一个错误（也许是 Linux？），因为正如我们在您链接的视频课程中看到的那样，它显然在 OS X 上运行良好。

[在 GitHub 上针对此特定包创建了](https://github.com/aaronpowell/sublime-jquery-snippets/issues/6#issuecomment-17679682)一个问题，我现在评论了此信息。我想让这个工作的唯一方法是让片段不以特殊字符开头。

我还在[Userecho 上为 Sublime Text 提交了一个错误](http://sublimetext.userecho.com/topic/173733-/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-18T15:59:31.010

视频的创建者正在使用[SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)。您在 00:50 看到的不是 Sublime Text 2 的自动完成弹出窗口，而是 SublimeCodeIntel 的导入自动完成弹出窗口：

> 导入自动完成 - 实时显示可用模块/符号的自动完成。

有关更多信息，请参阅[Github 页面](https://github.com/Kronuz/SublimeCodeIntel)。****

# javascript - 使用 java 脚本调用刷新页面

> ID：12656449
> 
> 赞同：0
> 
> 时间：2012-09-29T20:59:09.413
> 
> 标签：javascript, iphone, objective-c, webview

我有一些 webView 和一个 viewController，它们`webView`通过调用具有不同值的 java 脚本来设置小页面和显示页面。

我正在使用下一个代码来调用并显示结果：

```
 NSString * js = [NSString myScript:@"%@('%@');",@"showPageById", idNumber];
 [self.webView stringByEvaluatingJavaScriptFromString:js];
        [self.viewController.view addSubview:self.webView]; 
```

每次我发送`idNUmber`我应该得到不同的页面，但问题是在我发送一次到 java 脚本后，`idNumber`我正在显示新页面，但是在用 new 再次调用它之后，`idNUmber`我总是得到相同的**上一页**！如果我重新开始，那么也只显示第一个。

我试过`reload`了，但它不起作用......

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:43:36.147

好的，我制作了一个简单的视图控制器，它像您尝试做的那样手动将 UIWebView 添加到自身。它也是一个私有的 UIWebView。我创建了一个简单的按钮，它将一个传递`alert()`给 UIWebView 并且它每次都有效，所以这里是整个代码，所以你可以看到发生了什么。

**.h 文件**

```
#import <UIKit/UIKit.h>

@interface SOFViewController : UIViewController
// This is linked as action thru nib.
- (IBAction)hitMe:(UIButton *)sender;

@end 
```

**.m 文件**

这里请注意我第一次调用 javascript 到 webView 中的位置`ViewDidAppear`，其他前面的函数在第一次在模拟器中启动时会导致不良行为。我正在使用 Xcode 4.3

```
#import "SOFViewController.h"

@interface SOFViewController ()
{
    int idNumber;
    UIWebView *webViewMain;
}

@end

@implementation SOFViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    webViewMain = [[UIWebView alloc] initWithFrame:CGRectMake(50.0, 50.0, 50.0, 50.0)];
    [self.view addSubview:webViewMain];
}
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    idNumber = idNumber + 1;
    NSString * js = [NSString stringWithFormat:@"alert('%d');",idNumber];

    [webViewMain stringByEvaluatingJavaScriptFromString:js];
}
- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)hitMe:(UIButton *)sender {
    idNumber = idNumber + 1;
    NSString * js = [NSString stringWithFormat:@"alert('%d');",idNumber];
    [webViewMain stringByEvaluatingJavaScriptFromString:js];
}
@end 
```

希望这有一些帮助。

# hibernate - hibernate 显示查询执行时间

> ID：12656452
> 
> 赞同：30
> 
> 时间：2012-09-29T20:59:42.133
> 
> 标签：hibernate

我正在寻找 setup hibernate 或 log4j 来告诉我，在 hibernate 中执行多长时间的查询，由 hql 调用。

直到现在我还没有发现任何有趣的东西。

也许你们中的一些人可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-08-13T08:33:14.810

有一种简单的方法（内置`hibernate`）来实现它。它由[HHH-3659](https://hibernate.atlassian.net/browse/HHH-3659)在`3.5.4`和`3.6.0.Beta1`.

为此，请使用：

*   登录包：`org.hibernate.stat`至少在`DEBUG`和
*   设置休眠属性：`hibernate.generate_statistics=true`

之后`SQL`将记录所有 s，包括获取的行数和查询执行所用的时间。

此外，如果有兴趣，它会提供有关查询的统计信息。要让它们通过 暴露`JMX`并查看它们`JConsole`，您可以使用`Hibernate JConsole plugin`，可在：[http ://hibernate-jcons.sourceforge.net/](http://hibernate-jcons.sourceforge.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T21:10:39.750

要将查询及其执行时间记录到日志文件中，您可以尝试使用[Craftsman Spy JDBC 驱动程序](http://zer0.free.fr/craftsman/spy.php)，它做的事情完全相同，并且[与 Spring 具有简单的集成](http://java.dzone.com/articles/logging-spring-jdbc-and)。

另一种方法是使用[Spring Insight](http://www.springsource.org/insight)，它显示 JDBC/Hibernate 调用和更多细节。

相关链接：

*   [如何安装 Spring Insight](http://vard-lokkur.blogspot.com/2010/10/web-application-profiling-spring.html)
*   [如何设置过滤器](http://static.springsource.com/projects/tc-server/2.5/devedition/htmlsingle/devedition.html#using-filtering-trace-details)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T04:28:42.800

如果您需要自定义解决方案，则可以使用 AOP 并在执行本机查询时围绕休眠会话类添加环绕建议。

# java - 将对象向量转换为字符串数组

> ID：12656454
> 
> 赞同：0
> 
> 时间：2012-09-29T21:00:06.987
> 
> 标签：java

我正在尝试转换其中`Vector`的`Objects`一个`toString()`使用方法

`(String[]) mObjectVector.toArray(new String[mObjectVector.size()])`

或者

`(String[]) mObjectVector.toArray(new Object[mObjectVector.size()])`

但是，它给了我以下错误：

`java.lang.ArrayStoreException: source[0] of type .../myObjectType; cannot be stored in destination array of type [Ljava/lang/String;`

和

`java.lang.ClassCastException: [Ljava.lang.Object;`

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:06:12.417

您不能将对象转换为该对象`toString`方法的返回类型。`Vector`您必须通过在调用时迭代对象来构建一个新数组`toString`。

```
String[] stringArray = new String[mObjectVector.size()];
for (int i=0; i < mObjectVector.size(); i++) {
   stringArray[i] = mObjectVector.get(i).toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:02:34.340

我想你不能在这里做 toArray 因为你的向量有自定义对象。

您需要手动循环向量并在对象上调用 toString() 并将其设置为字符串数组。

# ubuntu - 在 Ubuntu 上安装 STAC

> ID：12656461
> 
> 赞同：3
> 
> 时间：2012-09-29T21:01:44.727
> 
> 标签：ubuntu, build, installation, ocaml

我正在尝试安装 STAC 来执行污点分析。我已经安装了 STAC 的必备组件，即 frama-c。[然后我从http://code.google.com/p/tanalysis/](http://code.google.com/p/tanalysis/)签出 svn

当我从 tanalysis 目录中运行 make 时。它遇到了几个问题，很难为 Cil 包含库。

```
 Unbound Cil 
```

我通过添加来修复路径

```
 -I /usr/local/share/frama-c/lib -I /usr/local/lib/ocaml/3.12.1/cil/ 
```

但是当我再次运行make时，它给出了一个错误

```
b/ocaml/3.12.1/cil/ -I /usr/lib/frama-c/ -c ptranal.ml
File "ptranal.ml", line 135, characters 36-43:
Error: This expression has type Cil_types.lhost * Cil_types.offset
   but an expression was expected of type
     Cil.lval = Cil.lhost * Cil.offset
make: *** [ptranal] Error 2 
```

请帮助我构建 STAC 并进行污点分析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:11:49.550

看起来像 STAC 的 Makefile 中的一个错误。

```
CFLAGS=-I $(FRAMAC_SHARE)/lib -c 
```

应替换为（未测试）

```
FRAMAC_LIBDIR:=$(shell frama-c -print-lib-path)
CFLAGS=-I $(FRAMAC_LIBDIR) -c 
```

FRAMAC_LIBDIR 绝对没有理由应该是 FRAMAC_SHARE 的子目录。

# design-patterns - 如何实现专门的事件处理程序？

> ID：12656464
> 
> 赞同：1
> 
> 时间：2012-09-29T21:02:17.643
> 
> 标签：design-patterns, event-handling, application-design

我正在为状态机表示编写一个图表编辑器应用程序。我有两个在画布和图表上操作的交互工具。第一个称为“编辑工具”，负责创建新的图表元素，例如节点和边。第二个称为“移动工具”，作用于图表布局，id est，它移动节点并更新边缘。这是简化的解释，但我不需要给你更多细节来问我的问题。

**我想知道处理事件并将它们分布在工具中的最有效和最有组织的方式是什么**

我知道我可以简单地拦截他们调用的事件并根据所选工具、当前状态和目标对象进行一些处理，但是这样代码会扩展到一个巨大的`if (...) else if (...)`块、上下文标志等；并且变得非常难以维护。

这种情况有没有常见的代码模式？你能举一些例子吗？我可以查看哪些开源项目以了解更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:22:31.627

我不完全确定你的问题是否正确。通过阅读问题，您似乎正在寻找*观察者*设计模式。但是，您对自己问题的回答并不真正符合这种解释......

如果您希望在每次更改状态机时更新您的 UI，那么您可能希望查看[Wikipedia](http://en.wikipedia.org/wiki/Observer_pattern "观察者模式 - 维基百科，免费的百科全书")、[CodeProject](http://www.codeproject.com/Articles/47948/The-Observer-Design-Pattern "观察者设计模式 - CodeProject")上的观察者模式，或者只是 google 一下。它是最常见的设计模式之一，如果您不了解它，您绝对应该花几分钟来熟悉它。

作为如何将此模式应用于您的域的示例，假设您希望您的 LayoutManager 在用户使用编辑工具添加或删除节点/边时重新绘制图表。您不想直接从编辑工具中调用 LayoutManager，因为这会强烈地[耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)这两个组件。因此，您可以按如下方式指定观察者接口（我在这里使用 C++，因为我不知道您的应用程序是用什么语言编写的）：

```
class StateMachineModelObserver
{
public:
   virtual void nodeChanged(Node* n)=0;
   virtual void edgeChanged(Edge* e)=0;
}; 
```

让任何想要通知状态机模型更改的主体从该类继承并实现其功能。例如：

```
class MyStateMachineLayoutManager : public StateMachineModelObserver
{
public:
   void foo() {} // these are 
   void bar() {} other functions of the layout manager

   virtual void nodeChanged(Node* n)
   {
      redraw();
   }

   virtual void edgeChanged(Edge* e)
   {
      redraw();
   }
}; 
```

现在，您需要您的状态机模型提供允许订阅和取消订阅通知的功能，并且您需要发送通知。

```
class MyStateMachineModel
{
public:
   Node* addNode()
   {
      Node* n=new Node();
      insertNodeIntoModel();
      notify(n);
      return n;
   }

   void subscribe(StateMachineModelObserver* o)
   {
      m_mutex.lock();
      m_observers.insert(o);
      m_mutex.unlock();
   }

   void unsubscribe(StateMachineModelObserver* o)
   {
      m_mutex.lock();
      m_observers.insert(o);
      m_mutex.unlock();
   }

private:
   void notify(Node* n)
   {
      m_mutex.lock();
      for_each(m_observers.begin(), m_observers.end(),
         [](StateMachineModelObserver* o)
         {
            o->nodeChanged(n);
         }
      );
      m_mutex.unlock();
   }

   std::set<StateMachineModelObserver*> m_observers;
   std::mutex m_mutex;
}; 
```

现在您所要做的就是将 LayoutManager 订阅到状态机模型，并且每次模型更改（这里：正在添加一个节点）时，它都会自动收到通知。您可以为不同的通知设置不同的观察者接口，也可以为不同类型的通知设置一个具有不同功能的观察者接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:37:19.843

我刚刚发现了一篇很好的文章，描述了可以使用状态机操作的 GUI 设计：http: [//lassala.net/2008/02/05/state-machines-and-gui-interaction-part-i /](http://lassala.net/2008/02/05/state-machines-and-gui-interaction-part-i/)

# visual-studio - 在 Visual Studio 中为项目创建目标 OBJ 文件夹

> ID：12656475
> 
> 赞同：8
> 
> 时间：2012-09-29T21:03:40.827
> 
> 标签：visual-studio, msbuild, compilation

是否可以像创建 BIN 文件夹一样创建目标 OBJ 文件路径？您可以在项目的属性中设置输出路径。示例路径为：Bin\Debug\Windows Phone 7\ Bin\Debug\NETMF\ Bin\Debug....\

这里的一个用例是，如果我有多个针对不同平台的项目。在编译时，OBJ 文件是共享的，而不是像 bin 文件夹那样分开。编译时，您遇到了同时利用 OBJ 文件夹并引发错误的竞争条件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T21:20:37.490

这里我们讨论的是 MSBUILD，您可以选择`BaseIntermediaryOutputPath`在项目中进行设置。如果您使用 XML 编辑器打开项目（我假设为 .csproj），您将看到不同调试/发布配置组合的配置块。

所以像这样（分别为每个配置选项编辑）：

```
<PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>{A35097D8-80BC-4FA5-BECD-FF045C5566EC}</ProjectGuid>
    <OutputType>WinExe</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>WorkApplication</RootNamespace>
    <AssemblyName>WorkApplication</AssemblyName>
    <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
    <ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
    <BaseIntermediateOutputPath>E:\OBJ-TEST</BaseIntermediateOutputPath>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup> 
```

# foursquare - 托管场地的用户类型

> ID：12656478
> 
> 赞同：0
> 
> 时间：2012-09-29T21:04:17.737
> 
> 标签：foursquare

对于管理场所的 Foursquare 用户，是否存在从用户详细信息调用返回的预期用户类型？对哪些类型的用户可以管理场地有限制吗？

“chain”类型的用户显然管理着一堆场地，但“page”、“venuePage”或普通用户也可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:00:30.667

可以管理场地的用户没有特定的类型，所有不是“venuePages”的用户都可以管理场地。

# java - Mockito：方法的返回值取决于调用的其他方法

> ID：12656479
> 
> 赞同：8
> 
> 时间：2012-09-29T21:04:21.910
> 
> 标签：java, junit, mockito

在我的单元测试中，我需要模拟一个接口，该接口在不同的方法中具有`nextItem()`和`isEmpty()`方法：

```
public interface MyQueue {
    Item nextItem();
    boolean isEmpty();
    //other methods
    ...
} 
```

我对模拟的要求是`isEmpty()`最初应该返回 false，但在`nextItem()`调用之后`isEmpty()`应该返回 true。因此，我正在用一个项目模拟一个队列。

1.  用 mockito 实现这种模拟的最简单方法是什么？
2.  我可以实现附加要求：调用`nextItem()`第二次、第三次等会导致特定类型的异常吗？

PS我不想为测试提供我的接口的完整实现，因为其中有其他方法，导致代码难以理解和冗长。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T21:56:03.780

您可以使用 thenAnswer() 来实现这一点，Mockito 文档认为这是一个有争议的功能：

另一个有争议的功能最初并未包含在 Mockito 中。我们建议仅使用带有 toReturn() 或 toThrow() 的简单存根。这两个应该足以测试/试驾任何干净简单的代码。

下面是答案：

```
private boolean called = false;

when(mock.nextItem()).thenAnswer(new Answer() {
 Object answer(InvocationOnMock invocation) {   
     called = true;       
     return item;
 }
when(mock.isEmpty()).thenAnswer(new Answer() {
 Object answer(InvocationOnMock invocation) {          
     return called;
 }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T21:18:58.797

这是一个简单的例子：

```
//given
MyQueue mock = mock(MyQueue.class);

given(mock.isEmpty()).willReturn(false, true);
given(mock.nextItem()).willReturn(someItem);

//when
mock.isEmpty();   //yields false
mock.nextItem();  //yields someItem
mock.isEmpty();   //yields true

//then
InOrder inOrder = inOrder(mock);
inOrder.verify(mock).isEmpty();
inOrder.verify(mock).nextItem();
inOrder.verify(mock).isEmpty(); 
```

`willReturn(false, true)`表示：*在第一次调用和**第二次**返回`false``true`*。`InOrder`对象用于验证调用顺序。更改顺序或删除`nextItem()`呼叫，测试将失败。

或者，您可以使用以下语法：

```
given(mock.isEmpty()).
        willReturn(false).
        willReturn(true).
        willThrow(SpecialException.class); 
```

如果需要更强大的 mocking 语义，可以引入重炮——自定义应答回调：

```
given(mock.isEmpty()).willAnswer(new Answer<Boolean>() {
    private int counter = 0;
    @Override
    public Boolean answer(InvocationOnMock invocation) throws Throwable {
        switch(++counter) {
            case 1: return false;
            case 2: return true;
            default: throw new SpecialException();
        }
    }
}); 
```

但这很容易导致无法维护的测试代码，谨慎使用。

最后，您可以通过仅模拟选定的方法来[窥探您的真实对象](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#13)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T21:58:41.370

您可以提供一些自定义 Answer 实现，其中一个依赖于另一个：

```
public class NextItemAnswer implements Answer<Item> {
   private int invocationCount = 0;
   private Item item;
   public NextItemAnswer(Item item) {
       this.item = item;
   }

   public Item answer(InvocationOnMock invocation) throws Throwable {
       invocationCount++;
       return item;
   }

   public int getInvocationCount() {
       return invocationCount;
   }
}

public class IsEmptyAnswer implements Answer<Boolean> {
   private NextItemAnswer nextItemAnswer;
   public IsEmptyAnswer(NextItemAnswer nextItemAnswer) {
       this.nextItemAnswer = nextItemAnswer;
   }
   public Boolean answer(InvocationOnMock invocation) throws Throwable {
       return nextItemAnswer.getInvocationCount() >= 0;
   }
} 
```

然后使用它：

```
NextItemAnswer nextItemAnswer = new NextItemAnswer(item);
IsEmptyAnswer isEmptyAnswer = new IsEmptyAnswer(nextItemAnswer);

when(mock.isEmpty()).thenAnswer(isEmptyAnswer);
when(mock.nextItem()).thenAnswer(nextItemAnswer); 
```

您可能会进行调整，因为我尚未测试此代码，但该方法应该是您所需要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T12:46:10.057

我确实意识到您明确写过您不想提供 MyQueue 的完整实现，但老实说，这将是我要做的第一件事。

事实上，为了使测试更容易测试，我经常提供相当复杂的接口/对象的“模拟”实现。我不是唯一一个这样认为的人：例如，Spring Framework 提供了许多复杂对象的模拟版本（MockHttpServletRequest、MockHttpServletResponse 等）。

在这种情况下，我会避免弄乱我的测试，并在单独的包中甚至在生产代码中提供此类。

A MockQueue 将使您的测试比此处给出的其他（但正确的）响应更具可读性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T21:24:42.873

[您可以使用mockito 文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#10)中描述的技术告诉 mockito 在对同一模拟方法的连续调用时以不同方式回答。

```
when(mock.isEmpty())
  .thenReturn(false)
  .thenReturn(true); 
```

将使`isEmpty()`调用仅在第一次调用时返回 true，并且

```
when(mock.nextItem())
  .thenReturn(item)
  .thenThrow(new NextOnEmptyQueueException()) 
```

将`nextItem()`在第一次调用时返回一些东西，并在以后的调用中抛出异常。

我不知道是否有可能使其中一种方法的结果取决于对另一种方法的调用顺序。如果确实有可能，我敢肯定它要复杂得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-21T14:01:01.533

你可以创建一个实用方法，然后在任何你想要的地方使用它。

```
public static boolean mockHasInvocation(Object mock, String methodName, Object... args) {
    return mockingDetails(mock).getInvocations().stream()
            .anyMatch(o -> o.getMethod().getName().equals(methodName) && Arrays.equals(o.getArguments(), args));
} 
```

简单用法：

```
if(mockHasInvocation(mockObject, "methodName", "argument1", "argument2")){doSomething();} 
```

在这种情况下，您不需要任何额外的变量，它更像是“Mockito 风格”。

# javascript - 链接到本地 内容

> ID：12656481
> 
> 赞同：0
> 
> 时间：2012-09-29T21:04:43.320
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

有人可以告诉我如何使保存在数据文件夹中的图像成为 Mozilla Add-on Builder 中的图标。

我试过：

```
data = require('self').data
contentUrl : data.url(filename) 
```

我做错什么了？

**更新**

当图像为*.png*类型但为*.ico*类型时，它运行良好。我真的不知道在后台发生了什么。

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:43:06.197

`;`我认为在行尾省略's 也是为了阴谋。

我发现当文件不是 16x16 .ico 文件时，加载项会非常缓慢并且鼠标光标会消失。也许这只是 Linux 的事情，或者我的设置特有的其他东西。

# java - 如何从 Java 中的 MySql 获取时间？

> ID：12656486
> 
> 赞同：4
> 
> 时间：2012-09-29T21:05:31.980
> 
> 标签：java, mysql, time

我的表中有一个包含时间数据类型的列。我需要打印它的价值。这是我正在使用的代码：

```
Statement st = conn.createStatement();
ResultSet rs = st.executeQuery("SELECT * FROM student");
System.out.print("\t\t"+rs.getTime("Total Time")); 
```

输出是 00:00:00，但我的数据库中的实际值是 24:00:00。我怎样才能获得正确的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:13:42.060

[`rs.next()`](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#next%28%29)使用前调用`getTime()`以将光标向前移动到*第一*行：

```
Statement st = conn.createStatement();
ResultSet rs = st.executeQuery("SELECT * FROM student");
if (rs.next()) {
  System.out.print("\t\t"+rs.getTime("Total Time"));
} 
```

从文档中：

> `ResultSet`游标**最初**位于第一**行之前**；第一次调用该方法`next` **使第一行成为当前行**；第二次调用使第二行成为当前行，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:14:11.687

你在打印之前缺少**rs.next() 。**

**要打印 24:00：** rs.getTime 将返回格式为 Time 的对象`"HH:mm"` `(00:00 to 23:00)`。如果您想`(01:00-24:00)`使用如下方法格式化时间`simpledateformat("kk:mm").format()`。

```
Statement st = conn.createStatement();
ResultSet rs = st.executeQuery("SELECT * FROM student");
while(rs.next()) { // if resutset not empty
    System.out.println(new   SimpleDateFormat("kk:mm:ss").format(rs.getTime("time").getTime())); // 
```

}

检查[ResultSet API](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)以获取更多信息 :)

# css - 调整大小时的 CSS 布局问题

> ID：12656488
> 
> 赞同：0
> 
> 时间：2012-09-29T21:06:00.530
> 
> 标签：css, wordpress

我在 wordpress 中有一个布局，当我调整浏览器的大小时，所有内容都放错了位置。

我有一个背景图片，在 body 标签中，

解决此问题的最佳方法是什么？

[http://www.arcperformance.com/snackerz/](http://www.arcperformance.com/snackerz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:24:01.713

你要做的第一件事是修复你的 html 错误：[[Invalid] Markup Validation of arcperformance.comsnackerz - W3C Markup Validator](http://validator.w3.org/check?uri=http%3A//www.arcperformance.com/snackerz/&doctype=Inline&ss=1&group=0&user-agent=W3C_Validator/1.654)。在验证报告中向下滚动以查看行号和源代码。

# php - 捕捉不受约束的重复模式

> ID：12656502
> 
> 赞同：0
> 
> 时间：2012-09-29T21:08:08.050
> 
> 标签：php

我希望能够查看字符串并找到所有出现的模式。如果您知道要发生多少次模式，这很容易用 preg_match 完成，但是当不知道出现次数时，我想不出一种方法来让它工作。

下面是一个已知事件集的有效查询示例：

```
$pattern = '/\[VAR:(.*)\].*\[VAR:(.*)\].*\[VAR:(.*)\].*\[VAR:(.*)\]/';
$string = "[VAR:one] once apon a time [VAR:two]. And then there was the time that [VAR:three] went to [VAR:four]";
preg_match ( $pattern , $string, $matches );

print_r ( $matches ); 
```

这将返回您期望的结果：

```
[0] => [VAR:one] once apon a time [VAR:two]. And then there was the time that [VAR:three] went to [VAR:four]
[1] => one
[2] => two
[3] => three
[4] => four 
```

我已经尝试了**preg_match**和**preg_match_all**的不成功变体（使用和不使用 PREG_OFFSET_CAPTURE 参数）：

```
$pattern = '/\[VAR:(.*)\]/'; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:29:33.303

它适用于以下模式和`preg_match_all`

```
$pattern = "/\[VAR:(.*?)\]/"; 
```

有关修改后的示例，请参见[http://ideone.com/lGsHl](http://ideone.com/lGsHl)。

`?`之后`.*`使它不贪婪。

# css - 成功的 Compass/Sass 安装是什么样的？

> ID：12656503
> 
> 赞同：0
> 
> 时间：2012-09-29T21:08:14.023
> 
> 标签：css, sass, compass-sass

长期潜伏者，第一次海报。

我正在从 LESS 迁移到 Sass，并且还想在一些项目中开始使用 Compass。我正在使用 CodeKit 来观察和启动新的基于 Compass 的项目，但我也从命令行尝试过，结果相同。我的问题归结为：

使用“compass create [project-name]”创建一个新的 compass 项目会构建 Compass 项目的基本结构，以及一个 config.rb 文件和三个 .scss 文件（screen.scss、print.scss 和 ie.scss ）。

但是为什么项目没有预先填充最新的核心 Compass .scss 文件、帮助程序等？期望核心 Compass 文件的有效负载（例如：[http](http://compass-style.org/reference/compass/) ://compass-style.org/reference/compass/ ）出现在我的项目中，我错了吗？

如果我深入说 /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1... ，我可以找到它们，但这些是全球性的，适用于所有项目，不适用于在每个项目的基础上进行定制。

我觉得我缺少一个带有一组默认变量的 .scss 文件的入门工具包。或者我在使用 Compass 启动新项目的方式上走错了路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:00:33.520

指南针是项目的环境。它不需要在您的项目目录中。您可以随时更新它。您可以将 compass watch 或 sass 与 compass 一起用作 lib。您所需要的只是您的项目和指南针配置。这比在所有项目中都有更好的方法，特别是如果您在项目中有控制版本。以我的方式，我只编写最少的 deps 文件，仅此而已。

入门工具包默认在 sass 文件夹中创建。所以你不会错过任何东西。但是有一个干净的文件。例如，您应该按照自己的意愿做所有其他事情，或者尝试来自 github 的骨架。

# php - 如何从 MySQL 向表中输入数据？

> ID：12656508
> 
> 赞同：1
> 
> 时间：2012-09-29T21:09:00.187
> 
> 标签：php, html, mysql, pagination, html-table

我创建了一个页面，该页面应该从我的数据库中提取所有域并将它们显示在表格中。分页设置为每页显示 1002 个域，表格应为 3 列。

当我不确定该怎么做时，您可以看到“Row Test1”和“Row Test1” - 它们正确显示在页面上。但是，我该如何做到这一点，而不是显示这些，它实际上会显示我数据库中的域。

如果有人可以发布代码的固定部分的示例，将不胜感激，我觉得我一直在尝试很多事情，而且有点令人困惑。

这是整个代码：

```
<?php include("header.html"); ?>

<center>
<?php
    /*
        Place code to connect to your DB here.
    */
    include('database.php');    // include your code to connect to DB.

    $tbl_name="list";       //your table name
    // How many adjacent pages should be shown on each side?
    $adjacents = 3;

    /* 
       First get total number of rows in data table. 
       If you have a WHERE clause in your query, make sure you mirror it here.
    */
    $query = "SELECT COUNT(*) as num FROM $tbl_name";
    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages[num];

    /* Setup vars for query. */
    $targetpage = "index.php";  //your file name  (the name of this file)
    $limit = 1002;                              //how many items to show per page
    $page = $_GET['page'];
    if($page) 
        $start = ($page - 1) * $limit;          //first item to display on this page
    else
        $start = 0;                             //if no page var is given, set start to 0

    /* Get data. */
    $sql = "SELECT website FROM $tbl_name LIMIT $start, $limit";
    $result = mysql_query($sql);

    /* Setup page vars for display. */
    if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination2\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\">&lt; previous</a>";
        else
            $pagination.= "<span class=\"disabled\">&lt; previous</span>";  

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">next &gt;</a>";
        else
            $pagination.= "<span class=\"disabled\">next &gt;</span>";
        $pagination.= "</div>\n";       
    }
?>

    <?php
$i = 0;
echo '<table><tr>'; 
        while($row = mysql_fetch_array($result))
{
    $i ++;
    if ($i<=2)
    {
      echo '<td>
         <div>Row Test1</div>
       </td>'; 
    }

    else
    {       
      echo '</tr><tr>';
      echo '<td><div>Row Test2</div></td>'; 
      $i = 0;
   }
}  
echo '</tr></table>';
    ?>

<?=$pagination?>
</center>

<?php include("footer.html"); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:21:56.647

我有点不确定为什么你需要在你的 while 语句中分割你的行打印。只要语句评估为真，while 语句将打印出所有结果，无论是 1、20 还是无。

```
<?php
    $i = 0;
    echo '<table><tr>';
    while($row = mysql_fetch_array($result)) {
        $i ++;
        echo '<td><div>'.$row[databasecolumnnamethatcontainsurlgoeshere].'</div></td>';
    }  
    echo '</tr></table>';
?> 
```

# xml - 如何定义 XSD 元素有多个子元素，所有子元素都很简单，只有属性？

> ID：12656509
> 
> 赞同：1
> 
> 时间：2012-09-29T21:09:04.943
> 
> 标签：xml, xsd

我正在尝试定义我的 XSD 的一部分，其中以下 XML 将是有效的：

```
<machine>
    <timing offset="3s" period="20s"/>

    <!-- <machine> actually has many child elements, all of them are like <timing>
         and only have attributes -->
</machine> 
```

这是我到目前为止所拥有的：

```
<xs:element name="machine">
    <xs:complexType>
        <xs:all>
            <!-- Definition for the <timing> child element. -->
            <xs:element name="timing" type="timing_type"/>
            <xs:complexType name="timing_type">
                <xs:attribute name="offset" type="xs:string"/>
                <xs:attribute name="period" type="xs:string"/>
            </xs:complexType>

            <!-- Definitions for the other <machine> child elements... -->
        </xs:all>
    </xd:complexType>
</xs:element> 
```

在读取的行上`<xs:complexType name="timing_type">`，我收到以下错误消息：

> 解析组件“timing_type”时出错。检测到“timing_type”位于命名空间“http://www.w3.org/2001/XMLSchema”中，但该命名空间中的组件无法从架构文档“file:////mySchema.xsd”中引用。如果这是不正确的命名空间，则可能需要更改“timing_type”的前缀。如果这是正确的命名空间，则应将适当的“import”标记添加到“file:////mySchema.xsd”。

有什么想法我在这里做错了吗？我如何定义一大堆孩子，`<machine>`因为它们都很简单，没有孩子，只有属性？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:06:57.320

由于您似乎正在学习 XSD，因此构建更完整的 XML 示例可能更容易，然后使用一些工具从所有这些示例 XML 生成 XSD。从生成的 XSD 中，您可以学到很多东西，并且它应该使您更容易逐步更改它以更好地适应您的目标。

错误是您不能将命名类型嵌套在除 an`xs:schema`或 an之外的任何内容下`xs:redefine`。

因此，如果您如下所示，您的剪断将是正确的：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="machine">
        <xs:complexType>
            <xs:all>
                <!-- Definition for the <timing> child element. -->
                <xs:element name="timing" type="timing_type"/>
                <!-- Definitions for the other <machine> child elements... -->
            </xs:all>
        </xs:complexType>
    </xs:element>
    <xs:complexType name="timing_type">
        <xs:attribute name="offset" type="xs:string"/>
        <xs:attribute name="period" type="xs:string"/>
    </xs:complexType>
</xs:schema> 
```

您可能遇到的问题与使用 of`xs:all`代替`xs:sequence`or相关`xs:choice`。在 XSD 1.0 中，这是非常挑剔的，因为元素`xs:all`的出现次数不能超过一次。`timing`

下面的 XSD 是由工具生成的。它使用一个**序列**合成器（而不是**all**），这将允许我添加的变化（maxOccurs="unbounded"）

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="machine">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="timing" maxOccurs="unbounded">
          <xsd:complexType>
            <xsd:attribute name="offset" type="xsd:string" use="required" />
            <xsd:attribute name="period" type="xsd:string" use="required" />
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

如果您将另一种类型的元素添加到混合中（如您所建议的那样），并且您希望允许任意数量的此类元素，以任何顺序单独出现不止一次，那么下面的模型将起作用。这里要注意的是`xsd:choice maxOccurs="unbounded"`

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="machine">
    <xsd:complexType>
      <xsd:choice maxOccurs="unbounded">
        <xsd:element name="timing">
          <xsd:complexType>
            <xsd:attribute name="offset" type="xsd:string" use="required" />
            <xsd:attribute name="period" type="xsd:string" use="required" />
          </xsd:complexType>
        </xsd:element>
        <xsd:element name="cycle">
          <xsd:complexType>
            <xsd:attribute name="duration" type="xsd:positiveInteger" use="required" />
            <xsd:attribute name="period" type="xsd:positiveInteger" use="required" />
          </xsd:complexType>
        </xsd:element>          
      </xsd:choice>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

# c# - 将 CheckedListBox 绑定到设置

> ID：12656510
> 
> 赞同：2
> 
> 时间：2012-09-29T21:09:09.297
> 
> 标签：c#, wpf, c#-4.0

我正在尝试在 WPF 中构建 CheckedListBox 并将其绑定到用户设置，以便仅构建一次，然后使用 XAML 自动更新设置`ListBox ItemsSource="{Binding Source={x:Static local:Settings.Default}, Path=Customers, Mode=TwoWay}`

我可以看到复选框，但它们没有显示客户名称，也没有在设置中保留它们的值。有谁能够发现为什么？

我想我可能需要从设置转换为当前的客户 ObservableCollection 但无法使其正常工作？

客户 = Properties.Settings.Default.Customers.Cast；

**测试设置.xaml**

```
<Window x:Class="WpfApplication1.TestSettings"
        xmlns:local="clr-namespace:WpfApplication1.Properties"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TestSettings" Height="300" Width="300">
    <Grid>
    <ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" ItemsSource="{Binding Source={x:Static local:Settings.Default}, Path=Customers, Mode=TwoWay}" Margin="12,22,12,79">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <CheckBox IsChecked="{Binding IsChecked}" Content="{Binding Path=Item.CustomerName}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
    </Grid>
</Window> 
```

**测试设置.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for TestSettings.xaml
    /// </summary>
    public partial class TestSettings : Window
    {

        public ObservableCollection<CheckedListItem<Customer>> Customers { get; set; }

        public class Customer
        {
            public string CustomerName { get; set; }
        }

        public TestSettings()
        {
            InitializeComponent();

            if (Properties.Settings.Default.Customers == null)
            {
                Properties.Settings.Default.Customers = new ObservableCollection<Customer> 
                { 
                        new Customer() { CustomerName = "Kelly Smith" },
                        new Customer() { CustomerName = "Joe Brown" },
                        new Customer() { CustomerName = "Herb Dean" }

                    //Customers.Add(new CheckedListItem<Customer>(new Customer(){CustomerName="Kelly Smith"}));
                    //Customers.Add(new CheckedListItem<Customer>(new Customer(){CustomerName="Joe Brown"}));
                    //Customers.Add(new CheckedListItem<Customer>(new Customer(){CustomerName="Herb Dean"}));

                };
                Properties.Settings.Default.Save();
            }
            else
            {
               // Customers = (ObservableCollection<Customer>)Properties.Settings.Default.Customers;
            }
        }

        public class CheckedListItem<T> : INotifyPropertyChanged
        {
            public event PropertyChangedEventHandler PropertyChanged;

            private bool isChecked;
            private T item;

            public CheckedListItem()
            { }

            public CheckedListItem(T item, bool isChecked = false)
            {
                this.item = item;
                this.isChecked = isChecked;
            }

            public T Item
            {
                get { return item; }
                set
                {
                    item = value;
                    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("Item"));
                }
            }

            public bool IsChecked
            {
                get { return isChecked; }
                set
                {
                    isChecked = value;
                    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("IsChecked"));
                }
            }
        }

        private void Window_Closing(object sender, CancelEventArgs e)
        {
            Properties.Settings.Default.Save();
        }
    }
} 
```

**设置.Designer.cs**

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Collections.ObjectModel;
namespace WpfApplication1.Properties
{

    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "10.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase
    {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default
        {
            get
            {
                return defaultInstance;
            }

        }

        [global::System.Configuration.UserScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        public ObservableCollection<WpfApplication1.TestSettings.Customer> Customers
        {
            get
            {
                return ((ObservableCollection<WpfApplication1.TestSettings.Customer>)(this["Customers"]));
            }
            set
            {
                this["Customers"] = value;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:13:38.757

好的 - 已排序。

有两个主要问题

1/ 我只添加了 CustomerName 而不是 CheckListItem 所以

`ObservableCollection<Customer>` 应该`ObservableCollection<CheckedListItem<Customer>>`

2/ 再次添加客户。

`new Customer() { CustomerName = "Kelly Smith" }`应该`new CheckedListItem<Customer>(new Customer() { CustomerName = "Kelly Smith" })`

所以完整的工作代码是

**设置.Designer.cs**

```
using System.Collections.ObjectModel;
namespace WpfApplication1.Properties {

    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "10.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default {
            get {
                return defaultInstance;
            }
        }

        [global::System.Configuration.UserScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        public ObservableCollection<WpfApplication1.TestSettings.CheckedListItem<WpfApplication1.TestSettings.Customer>> Customers
        {
            get
            {
                return ((ObservableCollection<WpfApplication1.TestSettings.CheckedListItem<WpfApplication1.TestSettings.Customer>>)(this["Customers"]));
            }
            set
            {
                this["Customers"] = value;
            }
        }
    }
} 
```

**测试设置.xaml**

```
<Window x:Class="WpfApplication1.TestSettings"
        xmlns:local="clr-namespace:WpfApplication1.Properties"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TestSettings" Height="300" Width="300" Closing="Window_Closing">
    <Grid>
        <ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" ItemsSource="{Binding Source={x:Static local:Settings.Default}, Path=Customers, Mode=TwoWay}" Margin="12,22,12,79">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <CheckBox IsChecked="{Binding IsChecked}" Content="{Binding Path=Item.CustomerName}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

**测试设置.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for TestSettings.xaml
    /// </summary>
    public partial class TestSettings : Window
    {

        public ObservableCollection<CheckedListItem<Customer>> Customers
        {
            get;
            set;
        }

        public class Customer
        {
            public string CustomerName { get; set; }
        }

        public TestSettings()
        {
            InitializeComponent();

            if (Properties.Settings.Default.Customers == null)
            {
                Properties.Settings.Default.Customers = new ObservableCollection<CheckedListItem<Customer>>
                { 
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "Kelly Smith" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "Joe Brown" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "Herb Dean" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg4" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg5" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg6" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg7" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg8" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg9" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg10" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg11" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg12" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg13" }),
                        new CheckedListItem<Customer>(new Customer() { CustomerName = "fg14" })

                };
                Properties.Settings.Default.Save();

            }
            else
            {
                //var a = Properties.Settings.Default.Customers;
                //Customers = ObservableCollection<CheckedListItem<>>;

            }
        }

        public class CheckedListItem<T> : INotifyPropertyChanged
        {
            public event PropertyChangedEventHandler PropertyChanged;

            private bool isChecked;
            private T item;

            public CheckedListItem()
            { }

            public CheckedListItem(T item, bool isChecked = false)
            {
                this.item = item;
                this.isChecked = isChecked;
            }

            public T Item
            {
                get { return item; }
                set
                {
                    item = value;
                    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("Item"));
                }
            }

            public bool IsChecked
            {
                get { return isChecked; }
                set
                {
                    isChecked = value;
                    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("IsChecked"));
                }
            }
        }

        private void Window_Closing(object sender, CancelEventArgs e)
        {
            Properties.Settings.Default.Save();
        }
    }
} 
```

编辑：看起来这确实有效，但由于`Settings.Designer.cs`已经修改，设置不会在单独的运行时之间持续存在，因为泛型类型不能存储在设置中。而不是更改 Settings.Designer.cs，我最终创建了 XML 字符串，该字符串作为字符串保存在设置中，然后从 XML 构建 ObservableCollection>，反之亦然。

# visual-studio-2010 - VS2010中的C代码编译问题

> ID：12656511
> 
> 赞同：1
> 
> 时间：2012-09-29T21:09:13.367
> 
> 标签：visual-studio-2010

我正在尝试使用 cl.exe（64 位命令行）在 VS2010 Professional 中编译 C 程序。在 VS2010 或 VS2008 中出现奇怪的错误。相同的代码在 GNU gcc 中编译和运行没有问题（Cygwin）。有任何想法吗？在我理解这里的问题之前，无法进一步了解真实的东西。谢谢！

文件名：testC.c

> cl.exe testC.c

```
#include<stdio.h>
#include <stdlib.h>

typedef double Td;

int main(int argc, char *argv[])
  {
      FILE *fp;
      if ( (fp=fopen("junk_out.txt","w")) == NULL ){
                printf("Cannot open file.\n");
                exit(1);
      }
      fprintf(fp,"%f \n",3.1420);
      fclose(fp);
      Td x=3.14;
      Td *a;
      a = &x;
      printf("%f \n",a);
      printf("%f \n",x);
      printf("%f \n",*a);

      return 0;
   } 
```

这是输出：

```
 testC.c(18): error C2275: 'Td' : illegal use of this type as an expression
      testC.c(5) : see declaration of 'Td'
      testC.c(18): error C2146: syntax error : missing ';' before identifier 'x'
      testC.c(18): error C2065: 'x' : undeclared identifier
      testC.c(18): warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
      testC.c(19): error C2275: 'Td' : illegal use of this type as an expression
      testC.c(5) : see declaration of 'Td'
      testC.c(19): error C2065: 'a' : undeclared identifier
      testC.c(21): error C2065: 'a' : undeclared identifier
      testC.c(21): error C2065: 'x' : undeclared identifier
      testC.c(21): warning C4047: '=' : 'int' differs in levels of indirection from 'int *'
      testC.c(22): error C2065: 'a' : undeclared identifier
      testC.c(23): error C2065: 'x' : undeclared identifier
      testC.c(24): error C2065: 'a' : undeclared identifier
      testC.c(24): error C2100: illegal indirection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:16:12.733

如果您使用 VS2010 中的 C 编译器编译代码，则必须在函数顶部定义每个变量。

```
#include <stdio.h>
#include <stdlib.h>

typedef double Td;

int main(int argc, char *argv[])
{
    FILE *fp;
    Td x;
    Td *a;
    if ( (fp=fopen("junk_out.txt","w")) == NULL )
    {
            printf("Cannot open file.\n");
            exit(1);
    }
    fprintf(fp,"%f \n",3.1420);
    fclose(fp);
    x=3.14;
    a = &x;
    printf("%f \n",a);
    printf("%f \n",x);
    printf("%f \n",*a);

    return 0;
} 
```

在 C++ 中，您可以在任何地方定义。

# javascript - 只有第一个按钮对点击事件做出反应

> ID：12656514
> 
> 赞同：0
> 
> 时间：2012-09-29T21:09:52.747
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个像这样附加到 btn-group 的 jquery 函数：

```
<div class="row">
    <!-- Vote button row -->
    <div class="span8" id="votenumbers">
        <div class="btn-group">
            <button class="btn" id="votebutton" data-votevalue="1">1</button>
            <button class="btn" id="votebutton" data-votevalue="2">2</button>
            <button class="btn" id="votebutton" data-votevalue="3">3</button>
            <button class="btn" id="votebutton" data-votevalue="4">4</button>
            <button class="btn" id="votebutton" data-votevalue="5">5</button>
            <button class="btn" id="votebutton" data-votevalue="6">6</button>
            <button class="btn" id="votebutton" data-votevalue="7">7</button>
            <button class="btn" id="votebutton" data-votevalue="8">8</button>
            <button class="btn" id="votebutton" data-votevalue="9">9</button>
            <button class="btn" id="votebutton" data-votevalue="10">10</button>
        </div>
    </div>
</div>

<!-- Vote button row ends --> 
```

这是用于为每个按钮分配功能的 javascript。

```
$('#votebutton').each(function(){
    $(this).click(function(){
        var votevalue = $(this).data('votevalue');
        var filename = $('.mainimage').data('filename');
        var category = $('.mainimage').data('category');
            $.ajax({
                type: 'POST',
                url: '?category=' + category,
                data: {
                    "votevalue" : votevalue,
                    "filename" : filename
                },
                success: function(data){
                    $('body').html(data);
                }
        }); // end ajax
    }); // end click
}); // end each 
```

现在我的问题是只有第一个按钮对点击事件做出反应。另一个没有。不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:14:02.153

您为所有按钮分配了相同的 'id' 属性值。id 属性在整个 HTML 页面中应该是唯一的。您使用的选择器`$('#votebutton')`id 选择器返回单个元素。这就是为什么单击处理程序仅针对您的一个按钮执行的原因。您应该为每个按钮分配不同的 id 值，或者根本没有 id。

您可以完全摆脱按钮上的 id 属性并使用类选择器来查找按钮：

```
$('#votenumbers .btn').each(function() { $(this).click(...) ... }); 
```

# java - Jackson2 在服务器上运行时创建错误的日期格式

> ID：12656515
> 
> 赞同：2
> 
> 时间：2012-09-29T21:09:54.837
> 
> 标签：java, jackson

在 Tomcat6 或 Tomcat7 或 WAS7 上运行时，以下代码始终将内部`java.util.Date`属性打印为 yyyy-MM-DD 格式而不是毫秒格式。

```
ObjectMapper om = new ObjectMapper();
System.out.println(om.writeValueAsString(myObject)); 
```

独立运行时，上面的代码会打印出正确的毫秒格式。

服务器有什么可以干扰的吗？我在这里使用 Jackson 2.0.6 和 Spring 3.1.2。

**结果：** 我发现问题是我的 Date 对象正在获取 java.sql.Date。如果您使用 java.sql.Date，我猜您不会得到时间戳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:13:58.247

Jackson 序列化配置可能在许多地方被踩到，包括 spring 和/或 hibernate，如下所述： [Where do I specify Jackson SerializationConfig.Feature settings in Spring 3.1](https://stackoverflow.com/questions/9576907/where-do-i-specify-jackson-serializationconfig-feature-settings-in-spring-3-1)

可能有更正确的解决方案来阻止 Spring/Hibernate 做他们正在做的事情，但如果由我决定，我会做以下事情：

```
ObjectMapper om = new ObjectMapper();
om.setDateFormat(null);
System.out.println(om.writeValueAsString(myObject)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T07:15:23.627

> 结果：我发现问题是我的 Date 对象正在获取 java.sql.Date。如果您使用 java.sql.Date，我猜您不会得到时间戳。

对于 java.sql.Date，Jackson 没有使用属性 WRITE_DATES_AS_TIMESTAMPS 或 setDateFormat 中的格式。为了使它成为可能，需要为 ObjectMapper 提供特殊的 Serializer。

像这样的东西：

```
import java.io.IOException;
import java.text.DateFormat;

import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.databind.SerializerProvider;
import com.fasterxml.jackson.databind.ser.std.StdSerializer;

public class SqlDateSerializer extends StdSerializer<java.sql.Date> {

    private static final long serialVersionUID = 1L;

    public SqlDateSerializer() {
        super(java.sql.Date.class, true);
    }

    private ThreadLocal<DateFormat> DATE_FORMAT 
        = ThreadLocal.withInitial(() 
           -> new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX"));

    @Override
    public void serialize(java.sql.Date value, JsonGenerator gen, SerializerProvider provider) throws IOException {

        String formatted = DATE_FORMAT.get().format(value);
        gen.writeString(formatted);
    }
} 
```

用法：

```
SimpleModule simpleModule = new SimpleModule();
simpleModule.addSerializer(java.sql.Date.class, new SqlDateSerializer());

ObjectMapper om = new ObjectMapper();
om.registerModule(simpleModule); 
```

# php - 从数组集合中获取对象

> ID：12656520
> 
> 赞同：0
> 
> 时间：2012-09-29T21:10:55.633
> 
> 标签：php, symfony, doctrine-orm

我在按 ID 从对象的数组集合中获取对象时遇到问题。

以下是我的代码：

```
protected $_rootLocation;

public function __construct(Location $rootLocation)
{
    $this->_rootLocation= $rootLocation;

    var_dump($this->_rootLocation);
}

public function getLocationById($id)
{
    $value = null;
    foreach($this->_rootLocationas $root)
      {
            if ($id == $root->getId())
            {
                $value = $root;
                break;
            }
       }

    return $value;
} 
```

然后函数返回“NULL”所以它不起作用......

**编辑**

我喜欢这样：

```
 $manager = new LocationManager($rootLocation);

    echo "<pre>";
    var_dump($manager->getLocationById('291'));
    echo "</pre>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:17:34.840

您的函数返回 null 因为找不到对象！

它取决于`myClasse`对象的实现，它必须实现`iterator`接口并且`getId()`方法必须在每次迭代时返回一个有效的 Id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:33:12.043

想象一下，数组中的所有对象都没有您要查找的 ID。你的函数只会返回`null`。例如一个空数组。

可以看到，返回`null`并不代表函数不起作用。它完美地工作并且做了你指定的事情，只是不存在这样的对象。

然后由您决定如果发生这种情况该怎么做。正如您在问题中没有告诉的那样，除了为您提供一些选择之外，没有什么要补充的：

*   您可以检查函数是否返回`null`，然后将其视为“未找到”的情况。

    ```
    $result = $collection->getObjectById($id);
    if (null === $result) {
        # object not found
    } else {
        # object found
    } 
    ```

*   如果只应为现有对象调用函数，则可以在函数内抛出异常：

    ```
    public function getObjectById($id) {

        foreach ($this->_rootObject as $root) {
            if ($id == $root->getId()) {
                return $root;
            }
        }

        throw new InvalidArgumentException(sprintf('Not a valid ID: %d', $id));
    } 
    ```

或者最后：

*   提供附加功能以首先检查现有 ID：

    ```
    private function findById($id) {

        foreach ($this->_rootObject as $object) {
            if ($id == $object->getId()) {
                return $object;
            }
        }
        return null;
    }

    public function hasObjectById($id) {

        return null !== $this->findById($id);
    }

    public function getObjectById($id) {

        if (null !== $root = $this->findById($id)) {
            return $root;
        }

        throw new InvalidArgumentException(sprintf('Not a valid ID: %d', $id));
    } 
    ```

此外，您可能有兴趣为自己创建一个名为封装您的需求的类，因此您不需要在“我管理根集合对象”对象中实现它，这不仅仅是间接的。这基本上是你自己的集合类。一个例子：

```
interface Identifiable {
    public function getId();
}

/**
 * Example Object Class
 */
class MyObject implements Identifiable {
    private $id;

    public function __construct($id) {
        $this->id = (int) $id;
    }

    public function getId() {
        return $this->id;
    }
}

/**
 * Example Collection
 */
class IdentifiableCollection implements Countable, IteratorAggregate
{
    private $objects;

    public function attach(Identifiable $object) {
        $id = $object->getId();
        $this->objects[$id] = $object;
    }

    public function count() {
        return count($this->objects);
    }

    public function has($id) {
        return isset($this->objects[$id]);
    }

    public function getById($id) {
        if ($this->has($id)) {
            return $this->objects[$id];
        }
        throw new InvalidArgumentException(sprintf("No object is identifiable for %d", $id));
    }

    public function getIterator() {
        return new ArrayIterator($this->objects);
    }
}

// create the collection
$collection = new IdentifiableCollection();

// fill the collection with some objects (ID 1 - 20)
foreach(range(1, 20) as $id) {
    $collection->attach(new MyObject($id));
}

// test if an id exists and return object
$id = 2;
var_dump($collection->has($id), $collection->getById($id));

// iterate over the collection
foreach ($collection as $object) {
    var_dump($object);
} 
```

此集合类仅提供附加对象，而不是删除它们，但您可以根据需要对其进行扩展。如果您想重用现有功能，`ArrayObject`也可以从现有类扩展。`SplObjectStorage`在一个有点相关的问题的另一个答案中给出了一个例子：

*   [PHP中类内的对象数组](https://stackoverflow.com/a/7813679/367456)

# ruby-on-rails - Ubuntu Nginx、Rails 和 Thin

> ID：12656524
> 
> 赞同：1
> 
> 时间：2012-09-29T21:11:33.467
> 
> 标签：ruby-on-rails, ruby, proxy, nginx, thin

我按照这篇[文章](http://www.rackspace.com/knowledge_center/article/ubuntu-hardy-nginx-rails-and-thin)有一个 Ubuntu Nginx、Rails 和 Thin 服务器，但是当我访问主页时，我得到`500 Internal Server Error`了以下错误日志：

```
2012/09/29 18:43:14 [alert] 15917#0: *1013 socket() failed (24: Too many open files) while connecting to upstream, client: 50.57.229.222, server: 50.57.229.222, request: "GET / HTTP/1.0", upstream: "http://50.57.229.222:80/", host: "50.57.229.222" 
```

知道这里发生了什么吗？

/etc/nginx/sites-enabled/gitwatcher.com 在这里：

```
upstream gitwatcher {
    server 127.0.0.1:3000;
    server 127.0.0.1:3001;
    server 127.0.0.1:3002;
}
server {
    listen   80;
    server_name  50.57.229.222;

    access_log /var/www/gitwatcher/log/access.log;
    error_log  /var/www/gitwatcher/log/error.log;
    root       /var/www/gitwatcher;
    index      index.html;

    location / {
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header  Host $http_host;
        proxy_redirect    off;
        try_files /system/maintenance.html $uri $uri/index.html $uri.html @ruby;
    }

    location @ruby {
        proxy_pass http://50.57.229.222;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:09:09.177

我认为您的 nginx 配置中有一个循环。这部分说要监听端口 80：

```
server {
    listen   80;
    server_name  50.57.229.222;
    [...] 
```

但是稍后，您说将请求转发到相同的端口和 IP 地址：

```
location @ruby {
    proxy_pass http://50.57.229.222;
} 
```

所以 Nginx 决定将请求转发给自己。然后它决定将新请求转发给它自己。以此类推，直到您使用了所有内核的文件描述符。

最有可能的是，您的瘦服务器在不同的端口上运行。您需要在配置的后半部分的 URL 中使用该端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:15:43.647

谢谢各位大佬解答

无论如何，这是通过以下文章解决的错误 nginx conf：http: [//articles.slicehost.com/2009/3/13/ubuntu-intrepid-nginx-rails-and-thin](http://articles.slicehost.com/2009/3/13/ubuntu-intrepid-nginx-rails-and-thin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:29:58.550

这里的提示在错误消息中：

```
1013 socket() failed (24: Too many open files) while connecting to upstream 
```

这可能意味着您遇到了 ulimit 问题（这在低流量级别时很奇怪，但很有可能，这取决于应用程序正在做什么）。

`ulimit -n`通常会向您显示您对打开文件句柄的限制。我认为这在 OS X 上相当低，在许多 Linux 风格的系统上通常是 1024。您可以在具有（或类似）的 Linux 机器上临时增加它`ulimit -n 8192`，但这不会在会话之间持续存在。

要永久解决它，您需要增加 ulimit。谷歌“too many open files ulimit”和你的操作系统以获取更多信息；每个操作系统的过程略有不同。

## 类似 Redhat 的系统

编辑`/etc/security/limits.conf`. 在底部，添加如下内容：

```
* 8192 8192 
```

这将为所有用户同时设置 8192 个打开文件句柄的软和硬 ulimit。您需要重新启动才能使其生效，但您可以发出`ulimit -n 8192`立即为该会话的该用户应用该限制。

## 操作系统

有关如何在 OS X 平台上增加文件限制的详细说明， 请参阅[此答案。](https://apple.stackexchange.com/questions/33715/too-many-open-files)

# c# - 在 DataTable 中查找一行

> ID：12656526
> 
> 赞同：5
> 
> 时间：2012-09-29T21:11:35.960
> 
> 标签：c#, winforms

我在 DataSet 中有一个表，我想使用唯一键在此表中搜索一行。

我的问题是：有没有什么方法可以让我在不使用循环的情况下找到这一行？

这是我使用 forech 循环编写的代码：

```
foreach (var myRow in myClass.ds.Tables["Editeur"].AsEnumerable())
{
     if (newKeyWordAEditeurName == myRow[1] as String)
         id_Editeur_Editeur = (int)myRow[0];
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T21:16:29.243

当然。您有一个 DataTable 的 Select 方法。从您的 DataSet 中获取表，并使用 Select 来获取它。

```
void Demo(DataSet ds)
{
    DataTable dt = ds.Tables[0]; // refer to your table of interest within the DataSet

    dt.Select("Field = 1"); // replace with your criteria as appropriate
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-16T17:47:57.580

要查找特定行，您可能需要按可以唯一标识每一行的键进行搜索。
但是如果你想找到一组行，那么你想使用过滤器。

键可以同时包含不同类型的对象。所以可以过滤！

下面是一个具体的例子，它涵盖了使用 key 方法或 filter 方法分别作为 locateOneRow() 和 locateRows() 进行搜索。

```
using System.Data;
namespace namespace_A {
  public static class cData    {
     public static DataTable srchTBL = new DataTable(tableName: "AnyTable");
     public static DataColumn[] theColumns = {
     new DataColumn("IDnum", typeof(int))
     , new DataColumn("IDString", typeof(string))
     , new DataColumn("DataString", typeof(string))
     };
     public static void DataInit(){
        if (srchTBL.Columns.Count == 0) {
           srchTBL.Columns.AddRange(theColumns);
           srchTBL.PrimaryKey = new DataColumn[2] { srchTBL.Columns["IDnum"], srchTBL.Columns["IDstring"] };
        //Data
           srchTBL.Rows.Add(0, "me", "Homemaker");
           srchTBL.Rows.Add(1, "me2", "Breadwinner2");
           srchTBL.Rows.Add(1, "you", "Breadwinner1");
           srchTBL.Rows.Add(2, "kid", "Learner");
        }
     }//DataInit
     public static DataRow locateOneRow(){
        DataInit();
        object[] keyVals = new object[] {0, "me" };
        return srchTBL.Rows.Find(keyVals);
     }//locateOneRow - Result: the "Homemaker" row
     public static DataRow[] locateRows(){ //no Primary key needed
        DataInit();
        return srchTBL.Select("IDnum = 1 OR IDstring = 'me'");
     }//locateRows - Result: the row with "Homermaker" & the row with "Breadwinner2"  
   }//class
   class Program    {
      static void Main(string[] args)       {
      try
      {
          DataRow row1 =cData.locateOneRow();
          DataRow[] rows = cData.locateRows();
      }catch(Exception ex){

      }
    } // Main
  } // Program
} 
```

# jquery - 以下用于加载的 Javascript

> ID：12656527
> 
> 赞同：0
> 
> 时间：2012-09-29T21:11:41.580
> 
> 标签：jquery

```
//Taken from jQl:
var jQl = {
    "q": [],
    "unq": function() {
        for (var i = 0; i < jQl.q.length; i++)
        jQl.q[i]();
        jQl.q = [];
    },
    "ready": function(f, t) {
        if (typeof f == 'function') {
            if (typeof t != undefined && t == true) {
                jQl.q.unshift(f);
            } else {
                jQl.q.push(f);
            }
        }
        // return jQl in order to support jQuery(document).ready()
        return jQl;
    },

    "bId": null,
    "boot": function(callback) {
        if (typeof window.jQuery == 'undefined' || typeof window.jQuery.fn == 'undefined') {
            if (!jQl.bId) {
                jQl.bId = setInterval(function() {
                    jQl.boot(callback)
                }, 25);
            }
            return;
        }
        if (jQl.bId) {
            clearInterval(jQl.bId);
        }
        jQl.bId = 0;
        // OK, jQuery is loaded,
        // we can load additional jQuery dependents modules
        //jQl.unqjQdep();
        // then unqueue all inline calls
        // (when document is ready)
        $(jQl.unq());

        // call the callback if provided
        if (typeof callback == 'function') callback();
    }
}​ 
```

jQuery Loader 是一个用于 jquery 和 jquery 插件的异步非阻塞加载器。Loader 的好处是可以同时加载 jQuery 和依赖的插件，而不影响页面上的渲染。

1.  jQl，jQuery loader，`q`代表`queue`，最初`q`是一个空数组`[]`。`unq`代表`unqueue`，它循环通过 jQuery 队列和出队来下载。

2.  当它准备好时，如果`f`是一个函数，jQuery queue `unshift`s. *不知道有什么`unshift`作用？*与`push`jQuery Loader 队列相对。

3.  *我不是很清楚`bID`吗？*在`setInterval`函数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T14:23:58.447

> 我不知道 unshift 是做什么的？

`unshift`是一种数组方法。例如：

```
[1,2,3,4].unshift() 
```

返回 4

> 我对投标的事情不太清楚？

```
`bID` is the boot ID, a variable initially set to `null`, then set to `0` when jQuery loads 
```

# django - Django - Admin 中的 ForeignKey 字段初始值定义

> ID：12656529
> 
> 赞同：4
> 
> 时间：2012-09-29T21:11:52.647
> 
> 标签：django, django-models, django-forms, django-admin, django-modeladmin

我有一个`Person`模型，它`ForeignKey`本身有一个字段，称为`mother`. 当用户进入“添加”管理表单时，我想为 定义一个初始值`mother`，以防有`GET('mother')`参数，或者将其留空，以防没有参数。

我实际上有2个问题：

1.  如何访问里面的*请求*`ModelAdmin`？
2.  如何定义`ForeignKey`字段的初始值？

在模型.py 中：

```
class Person(models.Model):
    name=models.CharField()
    mother=models.ForeignKey('self') 
```

在 admin.py 中：

```
class  PersonAdminForm(forms.ModelForm):
    class Meta:
        model = Person

class PersonAdmin(admin.ModelAdmin):
    mother = request.GET.get('mother','') #don`t know how to access request

    if mother != '':
        form = PersonAdminForm
        form.initial={'mother':Person.objects.get(id=mother)} 
```

好吧，这行不通。即使我只尝试定义一个硬编码的初始值，它也不起作用。

我究竟做错了什么？

PS.：当然，我可能问错了问题，所以我感谢任何解决问题的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T02:51:58.617

我的解决方案：

```
class PersonAdmin(admin.ModelAdmin):
    form = PersonAdminForm
    # ...
    def get_form(self, request, obj=None, *args, **kwargs):
        form = super(PersonAdmin, self).get_form(request, *args, **kwargs)
        # Initial values
        form.base_fields['mother'].initial = None
        if obj and obj.mother:
            form.base_fields['mother'].initial = obj.mother
        return form 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:40:08.577

哦，它恰好比我想象的要容易得多。

如果您将带有字段名称的 GET 参数作为键传递给 Django 的添加表单，则 GET 参数值将被设置为该字段的初始值。

就我而言，我只需要重定向到

localhost/admin/my_app/person/add/?&mother=<id>

不需要操纵管理员或任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:42:05.230

尝试覆盖 ModelAdmin 上的 get_form() 方法：

```
 class PersonAdmin(admin.ModelAdmin):
        form = PersonAdminForm

        def get_form(self, request, *args, **kwargs):
            form = super(PersonAdmin, self).get_form(request, *args, **kwargs)
            mother = request.GET.get('mother', None)
            if mother:
                form.initial = {'mother': Person.objects.get(id=mother)}
            return form 
```

# html - 仅以 html 5 提供网站？

> ID：12656530
> 
> 赞同：1
> 
> 时间：2012-09-29T21:11:55.227
> 
> 标签：html

我正在设计一个必须访问新旧浏览器的网站。考虑到这一点，我应该用 HTML5 编程吗？目前该网站只有 html 5。问题是：**在我的情况下使用 HTML5 是否愚蠢，我应该使用“开关”（这甚至可能）来重定向旧浏览器吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:16:02.560

问题是，您打算使用 html5 的哪些方面？

如果您的网站主要是静态 html 和 javascript，没有音频，也没有嵌入视频，那么我会说它使用 HTML4。

如果您没有在 html5 中使用任何标签，请不要着急，不

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:29:10.750

如果您想接触更广泛的受众，我还不一定会跳入 HTML 5。它仍然没有得到广泛或一致的支持，不足以依赖它。但是，如果您想试一试，可以使用多种资源。

[我什么时候可以使用...](http://caniuse.com/)应该是一个很大的帮助。它相当清楚地显示了哪些浏览器支持 HTML 5 的哪些功能。进一步研究您计划使用的每个标签可能会很好。了解主要浏览器是如何实现标签的，以及是否有任何可能成为普通用户障碍的怪癖或准系统实现。

我听说[Modernizr](http://modernizr.com/)被列为利用 HTML 5 元素同时保持对旧浏览器的向后支持的一种方式。请注意，我无法亲自证明它的性能如何，以前从未使用过它。

# eclipse - 在 Mountain Lion 上的 Eclipse 3.7 中安装 AppEngine 插件时出现问题

> ID：12656533
> 
> 赞同：0
> 
> 时间：2012-09-29T21:12:10.327
> 
> 标签：eclipse, google-app-engine, eclipse-indigo

我一直在尝试为 eclipse 3.7 Indigo 安装 Appengine 插件，但我收到一条错误消息：

```
Cannot complete the install because one or more required items could not be found.
    Software being installed: Google Web Toolkit SDK 2.4.0 2.4.0.v201208080120-rel-r37             (com.google.gwt.eclipse.sdkbundle.e37.feature.feature.group 2.4.0.v201208080120-rel-r37)
Missing requirement: Google Plugin for Eclipse 3.7 3.1.0.v201208080120-rel-r37 (com.google.gdt.eclipse.suite.e37.feature.feature.group 3.1.0.v201208080120-rel-r37) requires 'org.eclipse.wst.sse.ui 0.0.0' but it could not be found
Cannot satisfy dependency:
    From: Google Web Toolkit SDK 2.4.0 2.4.0.v201208080120-rel-r37 (com.google.gwt.eclipse.sdkbundle.e37.feature.feature.group 2.4.0.v201208080120-rel-r37)
    To: com.google.gdt.eclipse.suite.e37.feature.feature.group 3.1.0 
```

重现问题的步骤： 转到“帮助”菜单选择“安装新软件”进入“使用：”框：http: [//dl.google.com/eclipse/plugin/3.7](http://dl.google.com/eclipse/plugin/3.7) 点击“添加”选择软件包，点击下一个。然后它返回该错误。

我已经阅读了一堆已解决的 stackoverflow 问题，但似乎没有一个对我有用。如果有任何帮助，我在 Mac OS X 10.8 Mountain Lion 上。我很久以前在我的笔记本电脑（10.6 Snow Leopard）上安装了 Appengine 插件，没有任何问题。是否有什么我做错了或一个已知的错误阻止我安装这个 Eclipse 插件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:29:10.037

关闭。在windows中运行它，frieking工作。

# c - 装配中的阶乘函数

> ID：12656541
> 
> 赞同：0
> 
> 时间：2012-09-29T21:13:58.887
> 
> 标签：c, assembly

所以我试图在汇编程序中创建一个阶乘函数

在 c 中：

```
 #include<stdio.h>

int fat (int n) 
{
      if (n==0) return 1;
      else return n*fat(n-1);
}

    int main (void){

    printf("%d\n", fat(4));
       return 0;

    } 
```

在装配中：

```
.text

.global    fat
fat:push    %ebp   
    mov    %esp, %ebp
    movl    $1,%eax
    movl    4(%ebp),%edx

LOOP:cmp    $0,%edx
    je FIM
    sub    $1,%edx
    push    %edx
    call    fat
    imul    %edx,%eax

FIM:mov    %ebp, %esp
    pop    %ebp
    ret 
```

我不断收到分段错误错误，我不知道为什么......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:21:20.240

此行中的偏移量可能是错误的：

```
movl    4(%ebp),%edx 
```

堆栈已经具有先前的值`%ebp`和返回地址，因此您的偏移量必须大于 4。

我建议使用调试器单步调试汇编代码，并确保所有寄存器值都与您期望的完全一致。`%edx`除非您也保存和恢复它的值，否则您还将在调用之间遇到寄存器问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:39:58.327

```
fat:push    %ebp   
    mov    %esp, %ebp
    movl    $1,%eax
    movl    4(%ebp),%edx /* Must be 8(%ebp) because of the return address! */

LOOP:cmp    $0,%edx
    je FIM
    sub    $1,%edx
    push    %edx
    call    fat /* The call to fat() just trashed edx, oops. Gotta save/restore it! */
    imul    %edx,%eax /* The result will be in edx, but you need to return it in eax! */
    /* Why isn't "push %edx" compensated here with "pop" or "addl $4,%esp"??? */
FIM:mov    %ebp, %esp
    pop    %ebp
    ret 
```

重写你的 C 函数，汇编风格，可能会有所帮助：

```
int fat (int n) 
{
    int eax, edx, savedEdx;

    eax = 1;
    edx = n; /* n = %8(%ebp) */
    if (edx == 0)
      goto done;

    savedEdx = edx; /* can do this with pushl %edx */
    --edx;
    eax = fat(edx); /* pushl %edx; call fat; addl $4, %esp or popl %edx */
    edx = savedEdx; /* popl %edx */

    eax *= edx; /* can do this with imul %edx */

done:
    return eax;
} 
```

# css - 跨度在歌剧中没有正确显示

> ID：12656544
> 
> 赞同：0
> 
> 时间：2012-09-29T21:14:14.527
> 
> 标签：css, opera

跨度 .cursor 和 .cursorinner 没有显示在歌剧中，我可以设置一个特定于歌剧的 css 属性吗？我的 CSS 无效还是歌剧错误？

我刚刚用不同的浏览器测试了这个，适用于

```
ie 7-9
chrome
safari
firefox 
```

在歌剧中不起作用

小提琴在这里：http: [//jsfiddle.net/etj6z/1/](http://jsfiddle.net/etj6z/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:33:11.630

这不起作用，因为您依赖 2 个内联元素来定义块尺寸。在光标范围内添加`display: inline-block;`（或`display: block;`）使元素显示在 Opera 中。闪烁还有一个额外的问题，这是由于相同的问题。你可能会更好地使用`show()`，`hide()`但否则你也应该`display: [inline-]block;`在 js 中使用。

# java - 更新坐标时图像消失，JPanel

> ID：12656547
> 
> 赞同：1
> 
> 时间：2012-09-29T21:15:17.963
> 
> 标签：java, swing, user-interface, arraylist, coordinates

呸。我发现了这个错误。当然，这简单得离谱。MovingPanelItem 下的覆盖更新需要写成如下：

```
@Override
public void update( int x, int y )
{
    xCoord = xCoord + getxStep();
    yCoord = yCoord + getyStep();
} 
```

完全披露：这是家庭作业。

问题：在每个 Key listener 事件中，屏幕应该更新并且移动的对象应该移动。目前，虽然对象最初出现，但如果我按下规定的键，它们就会消失。

此外，所有 PanelItem 都存储在 ArrayList 中（在另一个类中）。所有不是 MovingPanelItem 子类的对象在 KeyEvent 时仍保留在屏幕上。

我知道我留下了很多想象空间，所以如果需要更多细节，请告诉我。

超类：

```
public class PanelItem
{
    private Image img;
    protected int xCoord;
    protected int yCoord;
    protected int width;
    protected int height;

    //constructor
    public SceneItem( String path, int x, int y, int w int h )
    {
         xCoord = x;
         yCoord = y;
         setImage( path, w, h );
    }

    public void SetImage( String path, int w, int h )
    {
        width = w;
        height = h;
        img = ImageIO.read(new File(path));
    }

    //to be Overriden
    public void update( int width, int height )
    {

    }

} 
```

子类：

```
public class MovingPanelItem extends PanelItem
{
    private int xStep, yStep;

    // x & y correspond to the coordinate plane
    // w & h correspond to image width and height
    // xs & ys correspond to unique randomized 'steps' in the for the x and y values

    public MovingSceneItem(String path, int x, int y, int w, int h, int xs, int ys)
    {
        super( path, x, y, w, h);
        setxStep(xs);
        setyStep(ys);
        update( x, y );
    }

    @Override
    public void update( int x, int y )
    {
        this.xCoord = x + getxStep();
        this.yCoord = y + getyStep();
    }
} 
```

（回应鳗鱼）面板/窗口本身包含在以下类中：

```
public class Panel extends JPanel {
    protected ArrayList<PanelItem> panelItems;
    private JLabel statusLabel;
    private long randomSeed;
    private Random random;

    public Panel(JLabel sl) {
        panelItems = new ArrayList<PanelItem>();
        statusLabel = sl;
        random = new Random();
        randomSeed = 100;
    }

    private void addPanel() {
        addPanelItems(10, "Mouse");
    }

    private void addPanelItems(int num, String type) {
        Dimension dim = getSize();
        dim.setSize(dim.getWidth() - 30, dim.getHeight() - 30);

        synchronized (panelItems) {
            for (int i = 0; i < num; i++) {
                int x = random.nextInt(dim.width);
                int y = random.nextInt(dim.height);

                if (type.equals("Person")) {
                    int xs = random.nextInt(21) - 10;
                    int ys = random.nextInt(21) - 10;
                    panelItems.add(new Mouse(x, y, xs, ys));
                 }
             }
             repaint();
         }
    // causes every item to get updated.
    public void updatePanel() {
        Dimension dim = getSize();
        synchronized (panelItems) {
            for (PanelItem pi : panelItems) {
                pi.update(dim.width, dim.height);
            }
        }
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        synchronized (panelItems) {
            for (PanelItem pi : panelItems) {
                pi.draw(g);
            }
        }
    }
} 
```

测试类中的 KeyListener 类：

```
private class MyKeyListener extends KeyAdapter
{
    @Override public void keyTyped(KeyEvent e)
    {
        if(e.getKeyChar() == 'f') {
            panel.updatePanel();
            panel.repaint();
        }

        // other key events include reseting the panel &
        // creating a new panel, both of which are working.
    }
} 
```

在上面的代码中，我被允许更改的唯一代码（以及我编写的唯一代码）是子类 MovingPanel 项。

# c++ - 为什么编译器需要尾随返回类型？

> ID：12656548
> 
> 赞同：5
> 
> 时间：2012-09-29T21:15:43.950
> 
> 标签：c++, visual-c++, for-loop, c++11

我正在使用一个适配器来使用基于范围的 for 循环进行反向迭代。（我不知道用于此目的的升压适配器（“适配器”）。如果它是我已经下载的免费轮子，我坚信不要重新发明轮子。）

令我困惑的是为什么 VC++ 2012 不高兴，除非我在下面的代码中使用尾随返回类型：

```
#include <string>
#include <iostream>

template<class Fwd>
struct Reverser {
    const Fwd &fwd;
    Reverser<Fwd>(const Fwd &fwd_): fwd(fwd_) {}
    auto begin() -> decltype(fwd.rbegin()) const { return fwd.rbegin(); } 
    auto end() ->   decltype(fwd.rend())   const { return fwd.rend(); } 
};

template<class Fwd>
Reverser<Fwd> reverse(const Fwd &fwd) { return Reverser<Fwd>(fwd); }

int main() {
    using namespace std;
    const string str = ".dlrow olleH";
    for(char c: reverse(str)) cout << c;
    cout << endl;
} 
```

当我尝试以下操作时，我得到了错误，“错误 C2100：非法间接”和“错误 C2228：'.rbegin' 的左侧必须有类/结构/联合”。我错过了什么？

```
template<class Fwd>
struct Reverser {
    const Fwd &fwd;
    Reverser<Fwd>(const Fwd &fwd_): fwd(fwd_) {}
    decltype(fwd.rbegin()) begin() const { return fwd.rbegin(); } 
    decltype(fwd.rend())   end() const { return fwd.rend(); } 
}; 
```

更新：根据关于“this”指针的讨论，我尝试了另一种方法。看妈，不是这个！它编译得很好。我确实相信，无论对错，VC++ 都没有意识到这一点。

```
template<class Fwd>
struct Reverser {
    const Fwd &fwd;
    Reverser<Fwd>(const Fwd &fwd_): fwd(fwd_) {}
    decltype(((const Fwd*)0)->rbegin()) begin() const { return fwd.rbegin(); } 
    decltype(((const Fwd*)0)->rend())   end()   const { return fwd.rend(); } 

}; 
```

更新 2：提交给 MS：[https ://connect.microsoft.com/VisualStudio/feedback/details/765455/vc-2012-compiler-refuses-decltype-return-spec-for-member-function](https://connect.microsoft.com/VisualStudio/feedback/details/765455/vc-2012-compiler-refuses-decltype-return-spec-for-member-function)

更新 3：这个问题自 VC++ 2015 起已修复。谢谢，微软人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T21:48:08.453

来自 OP 的注意事项：*VC++ 有问题。VC++ 2015 正确接受代码。*

我最初的回答是，标准中不允许 VC++ 拒绝的代码实际上是错误的：正如 Johannes Schaub 指出的那样是允许的：在 5.1 [expr.prim.general] 第 12 段中，它描述了一个*id-expression*表示非可以使用静态数据成员或非静态成员函数。特别是，最后一个项目符号指出：

> 如果该 id-expression 表示非静态数据成员并且它出现在未计算的操作数中。

中的表达式`decltype(expr)`是一个未计算的操作数。此外，9.3.1 [class.mfct.non-static] 第 3 段解释了`this`隐式添加到表达式的情况：

> 当不属于类成员访问语法 (5.2.5) 并且不用于形成指向成员 (5.3.1) 的指针的 id 表达式 (5.1) 用于类 X 的成员中时，可以使用 (5.1.1)，如果名称查找 (3.4) 将 id 表达式中的名称解析为某个类 C 的非静态非类型成员，并且如果 id 表达式可能被评估或 C 是X 或 X 的基类，使用 (*this) (9.3.2) 作为 . 操作员。

所讨论的上下文不是“可能评估的”，也没有涉及任何依据。因此，`this`没有添加，也不必在范围内。综合起来，这意味着声明

```
decltype(fwd.rbegin()) begin() const; 
```

应该是合法的。似乎使用

```
decltype(static_cast<Reverser<Fwd> const*>(0)->fwd.rbegin()) begin() const; 
```

在编译器未正确实现的情况下是一种解决方法。

# web-crawler - 如何抓取网页？

> ID：12656549
> 
> 赞同：2
> 
> 时间：2012-09-29T21:15:49.680
> 
> 标签：web-crawler

我是网络爬虫的初学者。我正在尝试抓取一个页面，例如这个页面： [http ://shopping.yahoo.com/search;_ylt=AkzLiLhD9_ulIJy.SYSw9T0bFt0A?p=video&did=0](http://shopping.yahoo.com/search;_ylt=AkzLiLhD9_ulIJy.SYsw9T0bFt0A?p=video&did=0)

我需要提取搜索结果，例如：Amazon.com 或 antonline.com。任何人都可以帮我命名一些可以帮助我实现这一目标的技术、工具和软件吗？

**编辑：我必须使用 Java。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:29:52.143

基本上，这个想法是在浏览器开发工具（Chrome 或 Firebug）中检查页面。尝试找到特殊的 ID 或课程。在您的页面上，这是`<ul class='hproducts'>`有一个`<li class='hproduct'>`使用它的列表！

然后您拨打电话并获得响应并解析它。（Google for DOM、SAX、XPath...）这在语言和库之间有很大不同。例如，在 Java 上，我们有 JSoup 库，它可以获取 html（在这种情况下与 xml 有点不同，呵呵）并以方便的方式解析它。

或者更好的谷歌搜索他们的 API ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:35:17.160

从 URL 读入文件。这将是所有标记。

应用正则表达式以使用页面中的模式提取数据。

检查标记并梳理数据中的模式，然后编写正则表达式来提取数据。我在这里假设您需要每个项目的标题和价格。因此，例如，我在您的示例文件中看到所有标题都包含在 中`<li class ='hproduct'>`，并且所有价格都包含在 中`<p class='price'>`。编写一个正则表达式，按该顺序查找这些 div 的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T21:33:36.510

**Selenium WebDriver**可以做到：

[http://seleniumhq.org/projects/webdriver/](http://seleniumhq.org/projects/webdriver/)

一年前我曾经用它来提取红宝石，但它仍然适用于 Java。

也看看**Watir** : (http://watir.com)

文章中的一个示例：（使用 Ruby）

[http://www.layeredthoughts.com/automation/how-to-write-your-first-ruby-web-bot-in-watir-scraping-weather-com](http://www.layeredthoughts.com/automation/how-to-write-your-first-ruby-web-bot-in-watir-scraping-weather-com)

您还可以查找**HTMLUnit**库。

下面是一个带有 HTMLUnit 的示例，用于抓取（提取）网页的 html 元素：

[http://htmlunit.sourceforge.net/gettingStarted.html](http://htmlunit.sourceforge.net/gettingStarted.html)

# javascript - JavaScript 中的文件扩展名验证

> ID：12656550
> 
> 赞同：1
> 
> 时间：2012-09-29T21:15:52.677
> 
> 标签：javascript, file, validation

我正在尝试在 javascript 中验证文件扩展名。当我像这样在 if 语句中只使用一个参数时

```
 if(ext!='png' ){
                bodyAppend("err","Incorrect file type");
                bodyAppend("br","");
        } 
```

代码有效。但是如果我添加这样的 or 语句

```
 if(ext!='png' || ext!='jpg'){
                bodyAppend("err","Incorrect file type");
                bodyAppend("br","");
        } 
```

该代码不起作用，并且始终返回 true。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T21:18:26.090

你需要使用`&&`，而不是`||`

逻辑问题：

```
ext!='png' || ext!='jpg' 
```

是只要扩展名是这些选项之一（“png”或“jpg”），它就不是另一个，所以相反的比较总是正确的。如果是“png”，则不是“jpg”。如果是“jpg”，则不是“png”。

我在使用 SQL 查询时经常遇到这个问题。当你写出一个有很多比较的条件时，试着大声说出来。如果扩展名不是“png”并且扩展名不是“jpg”，则抛出错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:22:43.463

@anpgall 的回答是正确的，但是如果您最终需要检查大量扩展，则此代码可能更易于维护。

```
// At the top of your function
var imageExts = ['png', 'jpg', 'gif'];

// later
// Perhaps setting ext to lower case.
if (imageExts.indexOf(ext)  === -1) {
  bodyAppend("err","Incorrect file type");
} 
```

如果你需要针对旧版本的 IE，你可以包含这个 polyfill

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T21:22:36.347

我的猜测是你需要 && (and)，而不是 || （或者）。

使用 &&，仅当扩展名不等于它们两者时才为假。

使用 ||，例如 ext === 'png' 为真，因为另一个条件将返回真（因此整个条件为真），因为它是 !== 到 'jpg'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T13:56:39.837

我建议使用 jQuery 验证 JavaScript 中的文件扩展名的这种方式：

**HTML**

```
<input id="file" type="file" class="findDocumentGeneral"> 
```

**Javascript/Jquery**

```
var extension = $('.findDocumentGeneral').val().split('.').pop().toLowerCase();
if (~$.inArray(extension, ['jpg', 'jpeg', 'gif', 'png', 'pdf', 'docx'])) {
    alert(extension); // to see if it works correctly
} else {
    alert("Incorrect file type.");
} 
```

它可读且运行良好。

# scala - scala演员之间的循环消息

> ID：12656553
> 
> 赞同：0
> 
> 时间：2012-09-29T21:16:22.503
> 
> 标签：scala, actor

我正在尝试将消息（例如“msg”）从一个演员转发到随机选择的另一个演员。

除非随机选择的演员再次是较早的演员之一，否则它工作得很好。当这种情况发生时，Scala 会无限期地等待。我希望程序传递消息而不管它是否已经接收（即，演员之间的消息无限循环）

```
Actor A ---- msg ---> Actor B
Actor B ---- msg ---> Actor C
Actor C ---- msg ---> Actor A 
```

在此之后，程序不会退出，也不会继续传递消息。你能指出我错在哪里吗？

```
class MyActor extends Actor {
def act() {
react{
case str : String =>
// Picking a random actor
val randNo : Int = Random.nextInt(5)
actorArray(randNo) ! str
}
}
} 
```

谢谢，女士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T21:24:21.417

你需要在你的`react`调用周围放置一个循环，让演员做出不止一次的反应。

```
class MyActor extends Actor {
  def act() {
    loop {
      react {
        // ...
      }
    }
  }
} 
```

请参阅[有关 Scala 演员的简短教程](http://www.scala-lang.org/node/242)。

# c++ - 双链表头节点不断返回第一个值为 0

> ID：12656555
> 
> 赞同：1
> 
> 时间：2012-09-29T21:16:39.533
> 
> 标签：c++

我将在前言中说这是我的第一个问题。我目前正在获得信息安全硕士学位，本学期我必须学习 C++ 编程。所以这是与作业有关的。我不是在找你来回答我的作业，但我遇到了一个特殊的情况。我已经创建了使用双向链表的程序，并且一切正常。但是，当我让用户创建一个值列表时，第一个节点一直返回 0。我试图找到一些关于此的阅读，但我找不到对它的任何引用。我的问题是头节点（第一个节点）总是为零吗？还是我做错了什么。

```
case: 'C':
 cout<<"Please enter a list:"<<endl;
  while(n!=-999){
     myList.insert(n);
     cin>> n;}
  break; 
```

我现在输入：12321、1234、64564、346346。结果为 0、12321、1234、64564、346346。这是应该发生的事情还是我做错了什么？另外，由于这是我的第一篇文章，请随时批评或教我如何对关键字进行颜色编码。

无论如何，这是一个家庭作业，所以我只是在寻找指导和建设性的批评。

谢谢大家

所以我无法弄清楚这个论坛上的评论部分，所以我将编辑原始帖子第一部分是构造函数代码：

```
template <class Type>
 doublyLinkedList<Type>::doublyLinkedList()
  {
    first= NULL;
    last = NULL;
    count = 0;
      } 
```

然后是我的插入功能：

```
template <class Type>
void doublyLinkedList<Type>::insert(const Type& insertItem)
 {
nodeType<Type> *current;      //pointer to traverse the list
nodeType<Type> *trailCurrent; //pointer just before current
nodeType<Type> *newNode;      //pointer to create a node
bool found;

newNode = new nodeType<Type>; //create the node
newNode->info = insertItem;  //store the new item in the node
newNode->next = NULL;
newNode->back = NULL;

if(first == NULL) //if the list is empty, newNode is 
                  //the only node
{
   first = newNode;
   last = newNode;
   count++;
}
else
{
    found = false;
    current = first;

    while (current != NULL && !found) //search the list
        if (current->info >= insertItem)
            found = true;
        else
        {
            trailCurrent = current;
            current = current->next;
        }

    if (current == first) //insert newNode before first
    {
        first->back = newNode;
        newNode->next = first;
        first = newNode;
        count++;
    }
    else
    {
          //insert newNode between trailCurrent and current
        if (current != NULL)
        {
            trailCurrent->next = newNode;
            newNode->back = trailCurrent;
            newNode->next = current;
            current->back = newNode;
        }
        else
        {
            trailCurrent->next = newNode;
            newNode->back = trailCurrent;
            last = newNode;
        }

        count++;
      }//end else
   }//end else
}//end 
```

然后我也有一个初始化函数：

```
template <class Type>
 void doublyLinkedList<Type>::initializeList()
 {
  destroy();
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T21:19:02.153

您先插入，然后读取输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:36:35.473

仅根据您的代码内容，我相信 maniek 有正确的答案，所以如果/当您找到相同的答案时，请给他投票，而不是这个答案。这是为了让克雷格了解如何重新排序他的循环，以便它读取、测试、在需要时中断，否则插入。

```
while (cin >> n && n != 999)
    myList.insert(n); 
```

大约有十几种编码方式，包括 for 循环、do-while 循环等，但这应该能让你运行。同样，如果它解决了您的问题，*请*考虑对 maniek 的答案进行投票，并*请*在其上标记绿色复选标记（以及 StackOverflow 上提供您正在寻找的答案的任何其他答案）。

# django - 将数据添加到数据库（中间模型）

> ID：12656561
> 
> 赞同：1
> 
> 时间：2012-09-29T21:17:23.447
> 
> 标签：django, django-orm

如果我有中间模型，如何将汽车 ( `Car`) 添加到车库 ( )？`Garage`我无法理解这。

```
class Car(models.Model):
    name = models.CharField(max_length=50)
    price = models.DecimalField()    

class GarageCar(models.Model):
    car = models.ForeignKey('Car')
    quantity = models.IntegerField()

class Garage(models.Model):
    name = models.CharField("Garage_Name", max_length=30)
    cars = models.ManyToManyField('GarageCar', blank=True, null=True)
    owner = models.ForeignKey(User, related_name='owner_garage', verbose_name='Owner Garage') 
```

意见

```
def add_car(request, car_id): 
```

* * *

如果我有两个模型（Car 和 Garage with field cars = models.ManyToManyField('Car') 我会创建这样的东西：

```
def add_car(request, car_id):
    if request.user.is_authenticated():
        user = request.user
        car = Car.objects.get(id = car_id)
        e = car.garage_set.create(name='example_name', owner=user)

    return render_to_response('add.html') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:06:52.873

首先，您需要对模型进行一些更改：

1.  中间模型`GarageCar`需要具有`Car`和的外键`Garage`。
2.  定义多对多字段时，使用`through`参数指定中间表。

更改您的模型如下：

```
 class GarageCar(models.Model):
    car = models.ForeignKey('Car')
    garage = models.ForeignKey('garage')
    quantity = models.IntegerField()

class Garage(models.Model):
    name = models.CharField("Garage_Name", max_length=30)
    cars = models.ManyToManyField('Car', through='GarageCar') 
```

然后，您可以通过以下方式将汽车添加到车库：

```
GarageCar.objects.create(car=car,
                         garage=garage,
                         quantity=1,
                         ) 
```

[有关更多信息，请参阅有关多对多关系的额外字段](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)的文档。

# python - 蟒蛇无限循环

> ID：12656563
> 
> 赞同：3
> 
> 时间：2012-09-29T21:17:52.640
> 
> 标签：python, python-2.7, while-loop

我正在用 python 制作游戏，但遇到了创建无限的问题。我是编程新手，我不知道如何解决它。任何帮助都会很棒。

```
money = 100
opp = dealer()
me = player()

while money > 0:
if me > opp:
    money = money * 1.5
    print "Winner, winner, chicken dinner! You have $%d!" % money
elif opp > me:
    money = money * 0.75
    print "Dealer wins with %d. You have $%d reamaining." % (opp, money)
elif me == 21:
    money = money * 1.5
    print "Blackjack! You have $%d!" % money 
```

该代码完全按照我的要求执行（即打印该行）。我怎样才能让它打印一次，然后重新启动并处理新卡。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T21:20:50.060

将读取`dealer`和`player`手的代码移动到循环的开头：

```
while money > 0:
  opp = dealer()
  me = player()
  if me > opp:
    money = money * 1.5
    print "Winner, winner, chicken dinner! You have $%d!" % money
  elif opp > me:
    money = money * 0.75
    print "Dealer wins with %d. You have $%d reamaining." % (opp, money)
  elif me == 21:
    money = money * 1.5
    print "Blackjack! You have $%d!" % money 
```

# java - 搜索文件夹树并查找特定文件类型的递归方法

> ID：12656569
> 
> 赞同：3
> 
> 时间：2012-09-29T21:18:58.597
> 
> 标签：java, recursion, directory, subdirectory

所以我正在编写一个代码来定位蛋白质数据库中的某些信息。我知道递归文件夹搜索是找到这些文件的最佳方法，但我对这种语言非常陌生，并且被告知用 Java 编写（我通常使用 C++）

所以这就是说，我会用什么方法：

第一：找到桌面上的文件夹
第二：打开每个文件夹及其子文件夹
第三：找到以“.dat”类型结尾的文件（因为这些是唯一存储蛋白质信息的文件

感谢您提供的所有帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T21:23:17.453

1.  [java.io.File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)是*“文件和目录路径名的抽象表示”*
2.  [File.listFiles](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)提供目录中包含的所有文件的列表（如果`File`对象表示目录）
3.  [File.listFiles(FileFilter)](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)使您能够根据需要过滤文件列表

那么，有了这些信息...

您将指定一个路径位置，例如...

```
File parent = new File("C:/path/to/where/you/want"); 
```

您可以检查该`File`目录是否为...

```
if (parent.isDirectory()) {
    // Take action of the directory
} 
```

您可以通过...列出目录的内容

```
File[] children = parent.listFiles();
// This will return null if the path does not exist it is not a directory... 
```

您可以以类似的方式过滤列表...

```
File[] children = parent.listFiles(new FileFilter() {
        public boolean accept(File file) {
            return file.isDirectory() || file.getName().toLowerCase().endsWith(".dat");
        }
    });
// This will return all the files that are directories or whose file name ends
// with ".dat" (*.dat) 
```

其他有用的方法包括（但不限于）

*   [`File.exists`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29)测试文件是否确实存在
*   [`File.isFile`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#isFile%28%29), 基本上不是说`!File.isDirectory()`
*   [`File.getName()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getName()), 返回文件名，不包括它的路径
*   [`File.getPath()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getPath())返回文件的路径和名称。这可能是相对的，所以要小心，查看[`File.getAbsolutePath`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getAbsolutePath())并[`File.getCanonicalPath`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath())解决这个问题。
*   [`File.getParentFile`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getParentFile())这使您可以访问父文件夹

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-29T21:29:25.980

像这样的东西可以解决问题：

```
public static void searchForDatFiles(File root, List<File> datOnly) {
    if(root == null || datOnly == null) return; //just for safety   
    if(root.isDirectory()) {
        for(File file : root.listFiles()) {
            searchForDatFiles(file, datOnly);
        }
    } else if(root.isFile() && root.getName().endsWith(".dat")) {
        datOnly.add(root);
    }
} 
```

此方法返回后，`List<File>`传递给它的将填充您目录的 .dat 文件和所有子目录（如果我没记错的话）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T21:31:30.597

您应该看看 Java `File`API。特别是，您应该查看[listFiles 方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28java.io.FilenameFilter%29)并编写`FileFilter`选择目录，当然还有您感兴趣的文件。

将返回所有符合您的条件的文件的方法（假设您实现了`FileFilter`）是这样的：

```
List<File> searchForFile(File rootDirectory, FileFilter filter){
    List<File> results = new ArrayList<File>();
    for(File currentItem : rootDirectory.listFiles(filter){
      if(currentItem.isDirectory()){
          results.addAll(searchForFile(currentItem), filter)
      }
      else{
          results.add(currentItem);
      }
    }
    return results;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T21:24:34.397

使用递归折叠搜索并使用函数 endsWith() 来查找 .bat 文件，然后您可以使用任何字符串函数来查找您需要的信息。

# c# - 指向未访问 set 关键字的属性的构造函数

> ID：12656571
> 
> 赞同：2
> 
> 时间：2012-09-29T21:19:20.860
> 
> 标签：c#, class, properties, set, keyword

我只是在学习 C# 并尝试练习使用类而不是在 Main 中编写所有内容，因此我正在尝试编写一个刽子手的控制台游戏。

我正在用这一行初始化猜测的字母：

```
Guess guess = new Guess(Console.ReadLine()); 
```

它指向 Guess.cs 文件中的这个构造函数：

```
public Guess(string guessString)
    {
        CurrentGuess = Convert.ToChar(guessString);
    } 
```

CurrentGuess 指的是这个属性：

```
private char currentGuess

public char CurrentGuess
    {
        get
        {
            return currentGuess;
        }

        set
        {
            foreach (char letter in guessList)
            {
                if (letter == value)
                {
                    GuessedAlready = true;
                    break;
                }
            }

            if (GuessedAlready == false)
            {
                value = currentGuess;
                guessesMade++;
                guessList[guessesMade-1] = value;

            }
        }
    } 
```

当我运行程序并输入一个 char 值时，它没有设置为 currentGuess。此外，Visual Studio 告诉我 currentGuess 永远不会被分配，并保持它的当前值（它是空白的）。

为什么 set 关键字不起作用？我一遍又一遍地遵循 currentGuess 的路径，但我看不到它，所以我假设这是我还不知道的原因。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:23:24.897

你必须在你的 setter 中交换这个 assingment

```
value = currentGuess; 
```

进入

```
currentGuess = value; 
```

在 set 方法中，值是传入参数。在您的情况下，您希望将该值存储在本地类变量 curtentGuess 中；

# javascript - 从 d3.json() 返回数组

> ID：12656580
> 
> 赞同：14
> 
> 时间：2012-09-29T21:21:17.940
> 
> 标签：javascript, d3.js

作为一个 JQUERY/d3-noob，我似乎无法弄清楚如何使这项工作：

```
 supdog = d3.json(dataPath, function(jsondata){
    return jsondata;
  })
  console.log(supdog); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-29T21:40:55.340

除了您的问题描述非常简洁这一事实之外，问题似乎是您对返回什么的假设。

函数 d3.json() 是一个直接返回的异步函数（我假设具有未定义的值）。只有从后端接收到数据时，才会调用你传递给它的回调函数。显然这里的上下文是不同的，你的回调的返回值不会自动成为 d3.json 的返回值（因为这个已经返回了“long”）。

你想要做的可能是这样的：

```
 var jsondata;
    d3.json(dataPath, function(dataFromServer) {
      jsondata = dataFromServer;
    }
    console.log(jsondata); 
```

**更新1：** 显然，上面的例子仍然不完全正确。在 d3.json() 返回后直接调用 console.log()。因此，服务器可能尚未完全发送回复。因此，您只能在回调返回时访问数据。固定示例：

```
 var jsondata;

    function doSomethingWithData() {
      console.log(jsondata);
    }

    d3.json(dataPath, function(dataFromServer) {
      jsondata = dataFromServer;
      doSomethingWithData();
    }) 
```

对于（有点愚蠢，但是）工作示例，请参见：http: [//jsfiddle.net/GhpBt/10/](http://jsfiddle.net/GhpBt/10/)

**更新 2：** 上面的示例演示了代码的执行顺序，但对于最漂亮的代码并不值得付出代价。我自己不会使用这个“全局”变量并将上面的示例简化为：

```
 function doSomethingWithData(jsondata) {
      console.log(jsondata);
    }

    d3.json(dataPath, doSomethingWithData); 
```

请注意 doSomethingWithData 是如何直接传递给 d3.json 的，而不是在匿名内部函数中单独调用它。

**注意：**这不是 d3.js 的特殊问题。基本上，所有异步的 javascript 函数都可能以类似的方式运行。如果他们返回一些东西，它不会是传递的回调的返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-08T15:11:06.860

如果您从当前的 d3 版本开始，解决方案将不再有效。新解决方案 -> [d3.json() 回调中的代码未执行](https://stackoverflow.com/questions/49768165/code-within-d3-json-callback-is-not-executed)

那么应该是...

```
d3.json("filename.json")
  .then(function(data){
    console.log(data);
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T07:20:55.750

我知道这是一个非常古老的帖子，但我最近遇到了类似的问题，并找到了以下解决方案，可能值得分享：

在我的例子中，JSON 文件的语法被破坏了。默认情况下，在这种情况下，浏览器中不会弹出任何错误，除非您使用错误处理增强了@BertjanBroeksema 建议的功能。像这样的东西：

```
function doSomethingWithData(error, jsondata) {
  console.log("error:", error)
  console.log(jsondata);
} 
```

这样您就可以查看 JSON 文件的处理是否有问题。

# c# - LINQ 查询以查找列表中的项目是否包含在另一个列表中

> ID：12656582
> 
> 赞同：70
> 
> 时间：2012-09-29T21:21:32.340
> 
> 标签：c#, linq

我有以下代码：

```
List<string> test1 = new List<string> { "@bob.com", "@tom.com" };
List<string> test2 = new List<string> { "joe@bob.com", "test@sam.com" }; 
```

我需要删除 test2 中拥有@bob.com 或@tom.com 的任何人。

我试过的是这样的：

```
bool bContained1 = test1.Contains(test2);
bool bContained2 = test2.Contains(test1); 
```

`bContained1 = false`但是`bContained2 = true`。我不希望遍历每个列表，而是使用 Linq 查询来检索数据。bContained1 与我在下面创建的 Linq 查询的条件相同：

```
List<string> test3 = test1.Where(w => !test2.Contains(w)).ToList(); 
```

**上面的查询适用于完全匹配但不是部分匹配。**

我查看了其他查询，但我可以找到与 Linq 的密切比较。您可以指出我的任何想法或任何地方都会有很大帮助。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-09-29T21:34:13.050

```
var test2NotInTest1 = test2.Where(t2 => test1.Count(t1 => t2.Contains(t1))==0); 
```

根据 Tim 的建议，更快的版本：

```
var test2NotInTest1 = test2.Where(t2 => !test1.Any(t1 => t2.Contains(t1))); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-08-03T08:12:27.887

```
bool doesL1ContainsL2 = l1.Intersect(l2).Count() == l2.Count; 
```

L1 和 L2 都是`List<T>`

一个简单的解释是：如果两个迭代的结果交集的长度与较小列表的长度相同（此处为 L2），则所有元素必须在较大列表中（此处为 L1）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-29T21:39:25.560

```
var output = emails.Where(e => domains.All(d => !e.EndsWith(d))); 
```

或者，如果您愿意：

```
var output = emails.Where(e => !domains.Any(d => e.EndsWith(d))); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-29T21:32:22.467

这里不需要像这样使用 Linq，因为已经有一个扩展方法可以为您执行此操作。

`Enumerable.Except<TSource>`

[http://msdn.microsoft.com/en-us/library/bb336390.aspx](http://msdn.microsoft.com/en-us/library/bb336390.aspx)

您只需要创建自己的比较器即可根据需要进行比较。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-29T21:37:03.200

像这样的东西：

```
List<string> test1 = new List<string> { "@bob.com", "@tom.com" };
List<string> test2 = new List<string> { "joe@bob.com", "test@sam.com" };

var res = test2.Where(f => test1.Count(z => f.Contains(z)) == 0) 
```

现场示例：[这里](http://rextester.com/HMJNV39527)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-29T21:40:12.080

```
List<string> test1 = new List<string> { "@bob.com", "@tom.com" };
List<string> test2 = new List<string> { "joe@bob.com", "test@sam.com", "bets@tom.com" };

var result = (from t2 in test2
              where test1.Any(t => t2.Contains(t)) == false
              select t2); 
```

如果查询表单是您想要使用的，那么它是清晰易读的，并且或多或少是“高性能”的。

我的意思是你想要做的是一个 O(N*M) 算法，也就是说，你必须遍历 N 个项目并将它们与 M 个值进行比较。您想要的是只遍历第一个列表一次，并根据需要与另一个列表进行多次比较（最坏的情况是电子邮件有效，因为它必须与每个黑名单域进行比较）。

`from t2 in test`我们将电子邮件列表循环一次。

`test1.Any(t => t2.Contains(t)) == false`我们与黑名单进行比较，当我们找到一个匹配项时返回（因此，如果不需要，则不与整个列表进行比较）

`select t2`保留那些干净的。

所以这就是我会使用的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T21:34:19.967

尝试以下操作：

```
List<string> test1 = new List<string> { "@bob.com", "@tom.com" };
List<string> test2 = new List<string> { "joe@bob.com", "test@sam.com" };
var output = from goodEmails in test2
            where !(from email in test2
                from domain in test1
                where email.EndsWith(domain)
                select email).Contains(goodEmails)
            select goodEmails; 
```

这适用于提供的测试集（并且看起来正确）。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-01-04T15:54:14.853

I think this would be easiest one:

```
test1.ForEach(str => test2.RemoveAll(x=>x.Contains(str))); 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2016-02-28T15:52:24.017

```
List<string> l = new List<string> { "@bob.com", "@tom.com" };
List<string> l2 = new List<string> { "joe@bob.com", "test@bob.com" };
List<string> myboblist= (l2.Where (i=>i.Contains("bob")).ToList<string>());
foreach (var bob in myboblist)
    Console.WriteLine(bob.ToString()); 
```

# php - 如何转发通过 PHP 和 IMAP 下载的电子邮件？

> ID：12656583
> 
> 赞同：5
> 
> 时间：2012-09-29T21:21:52.313
> 
> 标签：php, email, imap, forwarding

我正在编写一个脚本来阅读电子邮件并将其分发到不同的电子邮件地址，具体取决于收件人地址。所有电子邮件都发送到一个地址，但我似乎不知道如何转发电子邮件，或创建新电子邮件并包含所有相关的邮件正文。

现在我正在使用 IMAP 下载电子邮件并使用 imap_fetchbody 获取电子邮件内容；

```
$email_body = imap_fetchbody($imapconnex, $msgnumber, 1); 
```

`=`某些电子邮件正文无法正确显示，而其他电子邮件正文则包含末尾带有符号的短行，从而导致内容无法正确显示。此外，我看到随机`A0`打印在我的电子邮件正文中。

我的计划是使用 PHP 的 mail() 函数将电子邮件发送到我希望它去的地方，并将发件人地址更改为真正的发件人地址。这可以满足我的需要，但我似乎无法弄清楚如何检索正确的正文、格式化并发送它。

这是我用来发送电子邮件的代码：

```
$header = imap_fetch_overview($imapconnex, $search[$i]);
$email_subject = $header[0]->subject;
$email_head = imap_fetchbody($imapconnex, $search[$i], 0); 
$email_body = imap_fetchbody($imapconnex, $search[$i], 1); 
mail("me@mydomain.com", $email_subject, $email_body, $email_head); 
```

标头似乎可以正常转发，但消息的主体仍显示为`=`和`A0`符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-10T06:51:17.703

马克

很好的答案并提供了一个简单的解决方案。它还可以处理带有一些细微更改的纯文本。

```
$mtype = array('text', 'multipart', 'message', 'application', 'audio', 
               'image', 'video', 'model', 'other');
$mailstructure = imap_fetchstructure($mbox, $msgno, FT_UID); //
$type = $mailstructure->type;
if ($type == 1 && $mailstructure->ifparameters == 1) {
    $parameters = $mailstructure->parameters;
    $attribute = $parameters[0]->attribute;
    $value = $parameters[0]->value;
    echo $attribute . "//" . $value . "<br />";
}
# prepare the mail
$to="";
$subject="";
//   line below (may) not (be) needed
//   $body="\r\nThis is a multipart message in MIME format.\r\n";
$body = imap_body($inbox, $uid, FT_UID);
$headers ="From:" . $from . "\r\n";
$headers .="Date: " . date("r") . "\r\n";
$headers .="MIME-Version: 1.0\r\n";
$headers .="Content-Type: " . $mtype[$mailstructure->type] . '/'
         . strtolower($mailstructure->subtype) . ";\r\n";
if ($type == 1) { // multipart
    $headers .= "\t boundary=\"" . $value . "\""."\r\n";
}
$sendmail = imap_mail($to, $subject, $body, $headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T19:58:34.037

今天，大多数消息都是多部分的。我使用它及其作品。

```
$mailstructure = imap_fetchstructure($inbox, $uid, FT_UID); //
$type = $mailstructure->type;
if ($type == 1 && $mailstructure->ifparameters == 1) {
    $subtype = strtolower($mailstructure->subtype);
    echo "SubType is" . $subtype . "<br />";
    $parameters = $mailstructure->parameters;
    $attribute = $parameters[0]->attribute;
    $value = $parameters[0]->value;
    echo $attribute . "//" . $value . "<br />";
    # prepare the mail
$to="";
$subject="";
    $body="\r\nThis is a multipart message in MIME format.\r\n";
    $body.=imap_body($inbox, $uid, FT_UID);
    $headers ="From:" . $from . "\r\n";
    $headers .="Date: " . date("r") . "\r\n";
    $headers .="MIME-Version: 1.0\r\n";
    $headers .="Content-Type: multipart/" . $subtype . ";
        \t boundary=\"" . $value . "\""."\r\n";
   $sendmail = imap_mail($to, $subject, $body, $headers); 
```

}

# jquery-mobile - 从外部 Rel 加载 Jquery Mobile Page 或在多页文件中完成刷新

> ID：12656585
> 
> 赞同：0
> 
> 时间：2012-09-29T21:21:56.853
> 
> 标签：jquery-mobile, pageload

我试图找到放置事件的位置，该事件只能在我的多页 jquery 移动页面的第一页加载或完整的浏览器刷新时触发。我不希望我在多页文档中的页面之间移动来触发该事件。

我发现以下技术可行。

```
 $('[data-role=page]').live('pagebeforecreate', function(event) {
            var $et = $(event.target);
            if($et.attr('id')=='query'){
                //Do event
            }
        }); 
```

有没有更好的办法？

谢谢您的帮助！

德文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:06:13.530

您可能需要稍微调整一下：

在 pageinit 中设置一个标志并在第一次加载时重置。不是最干净的方式，但在你的情况下可能必须这样做..

```
$(document).bind('pageinit',function(){
   firstpageloaded = false;
});

$('[data-role=page]').on('pagebeforecreate', function(event) {
  if ( false == firstpageloaded ){
     firstpageloaded = true;
     //Do Event
  }
}); 
```

此外，`live`正在被弃用，`on`应该使用..

# java - 在我的合并排序中出现堆栈溢出错误

> ID：12656587
> 
> 赞同：2
> 
> 时间：2012-09-29T21:22:23.267
> 
> 标签：java, algorithm

我在合并排序中遇到堆栈溢出错误。还不知道为什么。

```
//BAD CODE BAD CODE
public static void main(String[] args) {
    int[] S = {3,4,6,2,5,3,7};
    mergesort(S, 1, 5);
    System.out.println(S);
}   

public static void mergesort(int[] S, int left, int right){
    if (right <= 1) { return; }
    int mid = (right + left) / 2;
    mergesort (S, left, mid);
    mergesort (S, mid+1, right);
    merge(S, left, mid, right); 
}

public static void merge(int[] S, int left, int mid, int right){
    int i, j;
    int[] aux = new int[S.length];

    for (i = mid+1; i > left; i--) {aux[i-1] = S[i-1];}
    for (j = mid; j < right; j++) {aux[right+mid-j] = S[j+1];}
    for (int k = left; k <= right; k++){
        if (aux[j] < aux[i]) {
            S[k] = aux[j--]; 
        } else{
            S[k] = aux[i++];
        }
    }
}
//END OF BAD CODE 
```

## 更新

感谢您的所有快速回复，我得到了它的工作并提出了一些建议的更改。复制粘贴，试试看：

```
//GOOD CODE
package longest_sequence_proj;
import java.util.*;

public class MergeTest {

/**
 * @param args
 */
public static void main(String[] args) {
    int[] S = {3,4,6,2,5,3,7};

    mergesort(S, 0, 6);

    System.out.println(Arrays.toString(S));

}

public static void mergesort(int[] S, int left, int right){
    if (right <= left) { return; }
    int mid = (right + left) / 2;
    mergesort (S, left, mid);
    mergesort (S, mid+1, right);
    merge(S, left, mid, right);

    }

public static void merge(int[] S, int left, int mid, int right){
    int i, j;
    int[] aux = new int[S.length];

    for (i = mid+1; i > left; i--) {aux[i-1] = S[i-1];}
    for (j = mid; j < right; j++) {aux[right+mid-j] = S[j+1];}
    for (int k = left; k <= right; k++){
        if (aux[j] < aux[i]) {
            S[k] = aux[j--]; 
        } else{
            S[k] = aux[i++];
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:29:20.887

您的停止条款是错误的：

```
 if (right <= 1) { return; } 
```

*当使用的部分数组的大小*小于 1时，您实际上想要停止，因此您可能正在寻找：

```
if (right - left <= 1) { return; } 
```

* * *

作为旁注：

```
System.out.println(S); 
```

我想这不是你想要的（它不打印数组，而是对象的标识符......）
为了打印数组使用：

```
System.out.println(Arrays.toString(S)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:31:42.980

好吧，考虑一下：

```
int mid = (right + left) / 2;
...
mergesort (S, mid+1, right); 
```

从left=1和right=5开始，mid变成3，所以递归调用是left=4和right=5。这会产生 mid=9/2，我猜在 java 中是 4，​​所以我们得到了 left=5 和 right=5 的另一个递归，这导致 mid=5 和 left=6 和 right=5 的递归等等。“对”永远不会变小……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:28:50.253

你的右支`mergesort`电话永远不会结束。

你的停止条件是`right <= 1`- 但在你的调用树的右分支上`right`永远不会`1`。

你应该为你的递归设置一个更好的结束条件——这实际上会在某个时候结束。

# ruby-on-rails-3 - 生产中的 SQLite3::NotADatabaseException（文件已加密或不是数据库）（Engineyard）

> ID：12656588
> 
> 赞同：0
> 
> 时间：2012-09-29T21:22:25.397
> 
> 标签：ruby-on-rails-3, sqlite, amazon-ec2, sqlite3-ruby, engineyard

我正在尝试解析 rails 3 中的 sqlite3 数据库（使用 sqlite3-ruby gem）。要解析的数据库来自文件上传。这是我的控制器代码：

```
 require 'fileutils'
  require 'sqlite3'

  tmp = params[:file_upload][:my_file]
  file = params[:file_upload][:my_file].tempfile
  filename = params[:file_upload][:my_file].original_filename

  file = File.join("public", params[:file_upload][:my_file].original_filename)
  FileUtils.cp tmp.path, filename

  db = SQLite3::Database.new(filename) 
```

所以它在本地运行得很好，但在生产中（使用EngineYard）却不行。我收到以下错误：

```
 SQLite3::NotADatabaseException (file is encrypted or is not a database) 
```

我不懂为什么。任何帮助将不胜感激，因为我真的不知道如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T20:16:19.410

根据您自己的问题[Sqlite 3.7 on amazon ec2 with Engine Yard](https://stackoverflow.com/questions/12659794/sqlite-3-7-on-amazon-ec2-with-engine-yard) 似乎:) Engine Yard 为您提供了 sqlite 3.6，这意味着上面的@schlenk 给出了正确的答案：错误消息通常表明数据库文件是使用 WAL 模式创建的，这需要 mysql 3.7，Engine Yard 尚未提供。

# android - 保存应用程序状态的问题？

> ID：12656589
> 
> 赞同：0
> 
> 时间：2012-09-29T21:22:29.240
> 
> 标签：android, android-layout, android-intent, android-widget

所以我很确定我知道我的问题是什么，但我不知道如何解决它或解决它......我正在为一个班级制作这个游戏，现在我正在尝试保存状态当用户单击后退按钮或退出应用程序时。但是当我点击后退按钮时，一切都会重置到你第一次开始的时候..？

这是我的课：

```
public class PlayScreen extends Activity {

Spinner spinnerMonsters;
Button btnBattle;
TextView textViewBattleResults;
TextView textViewLevelGained;
TextView textViewXPValue;
TextView textViewXpNextLevel;
TextView textViewLevelValue;
TextView textViewGoldValue;
TextView textview5;
TextView textViewStrRace;
TextView textViewStrClass;
TextView textViewStrAlliance;

private int xp = 0;
private int level = 1;
private int gold = 0;
private int hp = 10;
private int mp = 10;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.play_screen);

    TextView textview5 = (TextView) findViewById(R.id.textView5);
    TextView textViewStrRace = (TextView) findViewById(R.id.textViewStrRace);
    TextView textViewStrClass = (TextView) findViewById(R.id.TextViewStrClass);
    TextView textViewStrAlliance = (TextView) findViewById(R.id.textViewStrAlliance);

    String Name = getIntent().getStringExtra("strName");
    textview5.setText(Name);
    textview5.setTextColor(Color.CYAN);

    String Race = getIntent().getStringExtra("strRace");
    textViewStrRace.setText(Race);

    String Class = getIntent().getStringExtra("strClass");
    textViewStrClass.setText(Class);

    String Alliance = getIntent().getStringExtra("strAlliance");
    textViewStrAlliance.setText(Alliance);

    Button btnInventory = (Button) findViewById(R.id.button1);
    btnInventory.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(v.getContext(), Inventory.class);
            startActivityForResult(intent, 0);

        }
    });

    Button btnEquipment = (Button) findViewById(R.id.button2);
    btnEquipment.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(v.getContext(), Equipment.class);
            startActivityForResult(intent, 0);

        }
    });

    Button btnStats = (Button) findViewById(R.id.button3);
    btnStats.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(v.getContext(), Statistics.class);
            startActivityForResult(intent, 0);

        }
    });

    Button btnShop = (Button) findViewById(R.id.Button01);
    btnShop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(v.getContext(), Shop.class);
            startActivityForResult(intent, 0);

        }
    });

    Button btnCrafting = (Button) findViewById(R.id.button4);
    btnCrafting.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(v.getContext(), Crafting.class);
            startActivityForResult(intent, 0);

        }
    });

    Button btnClassTraining = (Button) findViewById(R.id.button5);
    btnClassTraining.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(v.getContext(), ClassTraining.class);
            startActivityForResult(intent, 0);

        }
    });

    Button btnBattle = (Button) findViewById(R.id.btnBattle);
    btnBattle.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method
            // -----------------------------------------------------------------------------------------------------------------------------
            Spinner spinnerMonsters = (Spinner) findViewById(R.id.spinnerMonsters);
            final Button btnBattle = (Button) findViewById(R.id.btnBattle);
            final TextView textViewBattleResults = (TextView) findViewById(R.id.textViewBattleResults);
            TextView textViewXPValue = (TextView) findViewById(R.id.textViewXPValue);
            TextView textViewXpNextLevel = (TextView) findViewById(R.id.textViewXpNextLevel);
            final TextView textViewLevelGained = (TextView) findViewById(R.id.textViewLevelGained);
            TextView textViewLevelValue = (TextView) findViewById(R.id.textViewLevelValue);
            TextView textViewGoldValue = (TextView) findViewById(R.id.textViewGoldValue);
            final TextView textViewXPResults = (TextView) findViewById(R.id.textViewXPResults);
            final TextView textViewGoldResults = (TextView) findViewById(R.id.textViewGoldResults);
            final TextView textViewLootResults = (TextView) findViewById(R.id.textViewLootResults);
            TextView textViewHP = (TextView) findViewById(R.id.textViewHP);
            TextView textViewMP = (TextView) findViewById(R.id.textViewMP);
            final TextView textViewTimer = (TextView) findViewById(R.id.textView10);
            int XP = Integer.parseInt(textViewXPValue.getText().toString());
            int XPNEXT = Integer.parseInt(textViewXpNextLevel.getText()
                    .toString());
            // -----------------------------------------------------------------------------------------------------------------------------

            // ---------------------
            // XPValue <= XPLimit |
            // ---------------------

            if (textViewXPValue.getText().toString()
                    .equals(textViewXpNextLevel.getText().toString())) {
                int newLimit = Integer.parseInt(textViewXpNextLevel
                        .getText().toString()) + 100;
                textViewXpNextLevel.setText(newLimit + "");
                textViewLevelValue.setText(String.valueOf(level));
                textViewHP.setText(String.valueOf(hp));
                textViewMP.setText(String.valueOf(mp));
                textViewLevelGained.setVisibility(View.VISIBLE);
                textViewLevelGained.setText("You have gained a level!");
                xp = 0;
                level = level + 1;
                hp = hp + 10;
                mp = mp + 10;
            } else if (XP >= XPNEXT) {
                int newLimit = Integer.parseInt(textViewXpNextLevel
                        .getText().toString()) + 100;
                textViewXpNextLevel.setText(newLimit + "");
                textViewLevelValue.setText(String.valueOf(level));
                textViewHP.setText(String.valueOf(hp));
                textViewMP.setText(String.valueOf(mp));
                textViewLevelGained.setVisibility(View.VISIBLE);
                textViewLevelGained.setText("You have gained a level!");
                xp = 0;
                level = level + 1;
                hp = hp + 10;
                mp = mp + 10;
            }

            if (level == 51) {
                textViewXPValue.setText(textViewXpNextLevel.getText()
                        .toString());
                textViewBattleResults.setText("Thanks for playing!");
                level = level + 0;
                hp = hp + 0;
                mp = mp + 0;
                xp = xp + 0;
            }

            // -----------------------------------------------------------------------------------------------------------------------------

            // ----------------------------
            // Count Down Timer Activity |
            // ----------------------------

            new CountDownTimer(1000, 1000) {

                public void onTick(long millisUntilFinished) {
                    textViewTimer.setText("" + millisUntilFinished / 1000);
                    textViewXPResults.setVisibility(View.VISIBLE);
                    textViewGoldResults.setVisibility(View.VISIBLE);
                    textViewLootResults.setVisibility(View.VISIBLE);
                }

                public void onFinish() {
                    textViewTimer.setVisibility(View.INVISIBLE);
                    textViewBattleResults.setVisibility(View.INVISIBLE);
                    textViewXPResults.setText("XP: ");
                    textViewGoldResults.setText("Gold: ");
                    textViewLootResults.setText("Loot: ");
                    btnBattle.setVisibility(View.VISIBLE);
                    textViewLevelGained.setVisibility(View.INVISIBLE);

                }
            }.start();

            textViewTimer.setVisibility(View.VISIBLE);
            btnBattle.setVisibility(View.INVISIBLE);

            // -----------------------------------------------------------------------------------------------------------------------------

            // --------------------
            // Monster sequences |
            // --------------------

            // Training Dummy
            if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(0) Training Dummy")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                } else {
                    textViewBattleResults
                            .setText("You have killed Training Dummy!");
                    xp = xp + 100;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewXPResults.setText("XP: +10");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Cockroach
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(2) Cockroach")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                } else if (level >= 2) {
                    textViewBattleResults
                            .setText("You have killed a Cockroach!");
                    xp = xp + 27;
                    gold = gold + 3;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +27");
                    textViewGoldResults.setText("Gold: +3");
                    textViewLootResults.setText("Loot: none");

                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Cockroach!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Diseased Rat
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(3) Diseased Rat")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level >= 3) {
                    textViewBattleResults
                            .setText("You have killed a Diseased Rat!");
                    xp = xp + 36;
                    gold = gold + 5;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +36");
                    textViewGoldResults.setText("Gold: +5");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Diseased Rat!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Black Widdow
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(5) Black Widdow")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level >= 5) {
                    textViewBattleResults
                            .setText("You have killed a Black Widdow!");
                    xp = xp + 45;
                    gold = gold + 7;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +45");
                    textViewGoldResults.setText("Gold: +7");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Black Widdow!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Goblin
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(7) Goblin")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level >= 7) {
                    textViewBattleResults
                            .setText("You have killed a Goblin!");
                    xp = xp + 51;
                    gold = gold + 11;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +51");
                    textViewGoldResults.setText("Gold: +11");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Goblin!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Undead Troll
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(9) Undead Troll")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level >= 9) {
                    textViewBattleResults
                            .setText("You have killed an Undead Troll!");
                    xp = xp + 63;
                    gold = gold + 19;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +63");
                    textViewGoldResults.setText("Gold: +19");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by an Undead Troll!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Giant
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(13) Giant")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level > 13) {
                    textViewBattleResults
                            .setText("You have killed a Giant!");
                    xp = xp + 72;
                    gold = gold + 28;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +72");
                    textViewGoldResults.setText("Gold: +28");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have defeated killed by a Giant!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Young Blue Drake
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(17) Young Blue Drake")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level > 17) {
                    textViewBattleResults
                            .setText("You have killed a Young Blue Drake!");
                    xp = xp + 88;
                    gold = gold + 42;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +88");
                    textViewGoldResults.setText("Gold: +42");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Young Blue Drake!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Hobgoblin
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(21) Hobgoblin")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level > 21) {
                    textViewBattleResults
                            .setText("You have killed a Hobgoblin!");
                    xp = xp + 94;
                    gold = gold + 51;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +94");
                    textViewGoldResults.setText("Gold: +51");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Hobgoblin!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Skeletion
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(23) Skeleton")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level > 23) {
                    textViewBattleResults
                            .setText("You have killed a Skeleton!");
                    xp = xp + 101;
                    gold = gold + 60;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +101");
                    textViewGoldResults.setText("Gold: +60");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Skeleton!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Thief Master
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(26) Thief Master")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level > 26) {
                    textViewBattleResults
                            .setText("You have killed a Thief Master!");
                    xp = xp + 117;
                    gold = gold + 74;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +117");
                    textViewGoldResults.setText("Gold: +74");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Thief Master!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }// Homunculus
            else if (spinnerMonsters.getSelectedItem().toString()
                    .equals("(30) Homunculus")) {
                textViewBattleResults.setVisibility(View.VISIBLE);
                if (level == 51) {
                    xp = xp + 0;
                }
                if (level > 30) {
                    textViewBattleResults
                            .setText("You have killed a Homunculus!");
                    xp = xp + 121;
                    gold = gold + 82;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: +121");
                    textViewGoldResults.setText("Gold: +82");
                    textViewLootResults.setText("Loot: none");
                } else {
                    textViewBattleResults
                            .setText("You have been defeated by a Homunculus!");
                    xp = xp + 0;
                    gold = gold + 0;
                    textViewXPValue.setText(String.valueOf(xp));
                    textViewGoldValue.setText(String.valueOf(gold));
                    textViewXPResults.setText("XP: 0");
                    textViewGoldResults.setText("Gold: 0");
                    textViewLootResults.setText("Loot: none");
                }
            }

        }
    }); /* Ends the button onClickListener */
}
} 
```

现在我很确定问题出在我把所有私人 int 放在哪里，当你第一次开始玩时，它们都等于 0 或其他任何值。我好失落...

我删除了我的 onPause 和 onResume 事件，因为它们只是不工作，这是我尝试之前的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:29:17.483

您的所有变量在运行时都有状态。如果您关闭您的应用程序每个分配的内存并且变量中存储的值也会丢失。例如，您必须将这些内容保存在 SQLite 数据库或设备上的 xml 文件中，您可以从中获取值。

阅读有关 android 存储的本教程可能会有所帮助： [存储选项](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:04:38.353

您可以将应用程序的值保存在 onPause() 中，例如：

```
Editor editor = getSharedPreferences("myStatusFile", MODE_PRIVATE).edit();
editor.clear();
editor.putString("string1", string1);
editor.putInteger("integer1", integer1);
editor.commit(); 
```

并在 onResume() 中恢复它们：

```
SharedPreferences preferences = getSharedPreferences("myStatusFile", MODE_PRIVATE);
string1 = preferences.getString("string1",  null);
integer1 = preferences.getString("integer1",  0); 
```

祝你好运

# ruby-on-rails-3.2 - Mysql2::Error 139: DB:FIXTURES:LOAD for LARGE TEXT FIELDS 使插入过程崩溃并且经常损坏夹具

> ID：12656591
> 
> 赞同：0
> 
> 时间：2012-09-29T21:22:42.637
> 
> 标签：ruby-on-rails-3.2

**问题**

**为大型文本字段加载夹具会使夹具处理过程崩溃，甚至经常损坏夹具 (.yml) 文件。**

**环境**

红宝石 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin10.8.0]；导轨 3.2.6；OSX 10.6.8；**Web砖块**；**和 MySQL** — 8 Gb RAM

**背景**

1：我们的项目展示了大量的文章，经常超过5-10,000字。

2：分配给记录的转义内容（即使是中等数量的）会使夹具进程崩溃。

3：rake db:fixtures:load 将在主题 .yml 文件上崩溃，并出现以下错误/警告：**无法确定响应正文的内容长度。设置响应的内容长度或设置 Response#chunked = true**。

4：即使我们将这些材料分解为 1,000 字或更少的中等大小的文本字段，**db:fixtures:load 仍然会在主题 .yml 文件上崩溃。**

5：  **文件经常被崩溃损坏。**例如，我可以使用空字段分配从头开始重建夹具；我可以一次添加和处理 (db:fixtures:load) 一个字段，**直到达到明显的处理量限制，**当这最终使夹具加载过程崩溃时，有时会在文件的最初几个字符中报告错误字符; **即使我删除了最后一个字段分配，该文件也将不再运行。**

6：实验已经确定，夹具可以分配给***单个记录*****的 yml 有大约 50k 的限制。***我有许多 yml 文件成功分配*给多个记录*，但没有一个成功分配超过 50k * 给单个记录。这种体验在数十张桌子上是统一的。*

 *6.1：例如，建议此类阈值的主体文件**仅创建一条记录：**

6.1.1：  **如果我将空字段内容分配给所有文本字段**，rake db:fixtures:load会**成功**创建一个没有其文本字段的记录。

6.1.2：但是，如果我增加插入**单个记录**的大小 (k) ，逐个字段，**一旦我越过 50k 阈值（大约），进程就会崩溃并出现以下错误：**

> 耙中止！Mysql2::Error: 从存储引擎得到错误 139: INSERT INTO`[table_name]`

6.1.3：  **但增加 MySQL 缓冲区大小并没有解决问题。我有完全相同的限制。**

6.1.3.1：这是我在 my.cnf 中的 MySQL 缓冲区大小：

```
[mysqld]
key_buffer_size = 256M
max_allowed_packet = 1M
table_open_cache = 256
sort_buffer_size = 1M
read_buffer_size = 1M
read_rnd_buffer_size = 4M
myisam_sort_buffer_size = 64M
thread_cache_size = 8
query_cache_size= 16M 
```

6.1.4：  **我还在 webrick/httpresponse.rb 的*所有*实例中将 chunked 设置为 true，如下所示：**

```
def initialize(config)
  @config = config
  @logger = config[:Logger]
  @header = Hash.new
  @status = HTTPStatus::RC_OK
  @reason_phrase = nil
  @http_version = HTTPVersion::convert(@config[:HTTPVersion])
  @body = ''
  @keep_alive = true
  @cookies = []
  @request_method = nil
  @request_uri = nil
  @request_http_version = @http_version  # temporary
  @chunked = true # @chunked = false
  @filename = nil
  @sent_size = 0
end 
```

这些尝试都没有对这个问题产生任何影响。

7：  **因此我推断阈值适用于分配给单个记录的k，因为我有许多超过1M的yml文件。**

**相关问题？**

8：  **我看到其他问题报告同样的“设置响应的内容长度”警告/错误。**然而，我阅读的实例报告了在 WebBrick 中查看页面时发生的错误。在我们的情况下根本不是这种情况（尽管我们现在使用的是 WebBrick）。**我们在使用 Mongrel 时遇到了同样的问题；**但我没有看到任何证据表明我们的问题与本地 Ruby Web 服务器完全相关。

9:  **[204_304_keep_alive.patch](https://bugs.ruby-lang.org/attachments/2300/204_304_keep_alive.patch)：我还看到人们正在通过应用 204_304_keep_alive.patch 来修复这个由 Web 服务器进程引起的错误。**但是，特别是当我们没有在网络服务器进程中遇到错误情况时，这个补丁可能与我们的问题相关，也可能不相关。

10：我在几个 OSX 系统和早期的 Ruby 1.8/Rails 2 上遇到了同样的问题。

**问题**

其他人**必须**将 50k 分配给带有固定装置的单个记录。

**有谁知道我们必须在 Ruby/Rails/OSX/MySQL 环境中配置或更改什么来克服这个非常麻烦的负担？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:27:14.310

**MySQL 仅限于 10 个文本字段**

**征服这个有一条曲线：**

我的实验解决问题的逻辑过程**首先**将一个大文本字段拆分为 14 个较小的文本字段。

***因此，如果*我在增加缓冲区大小之前没有将原始文本字段拆分为 14 个单独的文本字段，那么增加我们的 MySQL 缓冲区大小*将*解决我们的固定/插入问题。***我假设 14 个中等大小的文本字段不会对缓冲区大小增加的测试产生排他性影响，**[但今天下午我发现了一个 MySQL 错误报告，指出（对于遇到类似问题的实现）MySQL 最多支持 10 个文本字段.](http://bugs.mysql.com/bug.php?id=10035) *碰巧*当我添加了 14 个文本字段中的第 11 个时，我*也*超过了 50k 阈值。***

 ***编写清晰的错误处理程序的更多理由......超过 10 个文本字段限制**也会*产生与缓冲区空间不足*相同的错误！***

无论如何，我希望这种经历能够引导其他人绕过这两种情况。我有很多时间来修复我们的配置。

无论如何，经验法则是：

1.  **遵守 MySQL 的 10 个文本字段限制。**
2.  **在 /etc/my.cnf 中部署足够的缓冲区大小。**

有了备用 RAM，我正在运行“ **my-large.cnf** ”以满足我们项目的需要。**

# php - 格式化动态日期时间

> ID：12656602
> 
> 赞同：0
> 
> 时间：2012-09-29T21:24:29.577
> 
> 标签：php, mysql, datetime

如果有人问过这个问题，我深表歉意，我刚刚过滤了本网站和其他网站上关于格式化动态日期时间的大约 40 个问题，并且只看到了`date()`等问题的答案。问题是我正在尝试格式化注册日期和上次登录日期对于当前格式如下的基于成员的系统：`2012-09-29 10:21:40`to`Sep 2012`但由于这是动态数据，我不确定如何执行此操作。这些信息是从数据库中提取出来的，只是为了澄清：

```
 $sql = mysql_query("SELECT * FROM members WHERE id='$id'");

    while($row = mysql_fetch_array($sql)){
        $username = $row['username']; // Ignore
        $sign_up = $row["sign_up"];
        $last_login = $row["last_login"];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:30:04.590

正如[`date()`](http://php.net/manual/en/function.date.php)医生所说：

```
date('M Y', strtotime($row["sign_up"])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:30:14.857

如果我理解正确，您希望将 DATETIME 格式转换为在 PHP 中显示为`Sep 2012`. 您可能还希望在 PHP 手册中查看[date](http://www.php.net/date)和[strtotime 。](http://www.php.net/strtotime)

```
$sql = mysql_query("SELECT * FROM members WHERE id='$id'");

while($row = mysql_fetch_array($sql)){
    $username = $row['username']; // Ignore
    $sign_up = $row["sign_up"];
    $last_login = $row["last_login"];
    $convert = strtotime($sign_up);
    $convert = date('M Y',$convert);
    echo $convert . '<br />'; // this should be in the format Sep 2012
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T21:30:32.313

如果您想在 PHP 中执行此操作，您必须自己从 mysql 重新格式化日期时间：

```
$sign_up = date('M Y', strtototime($row["sign_up"]));    
$last_login = date('M Y', strtototime($row["last_login"])); 
```

# css - CSS框架比较

> ID：12656605
> 
> 赞同：-1
> 
> 时间：2012-09-29T21:24:36.337
> 
> 标签：css, twitter-bootstrap, zurb-foundation, skeleton-css-boilerplate

我正在评估一个 css 框架的 twitter bootstrap、foundation 和骨架。我正在设计一个支持桌面和移动设备的网站，包括 iPad 和其他平板电脑。每个框架的优缺点是什么？我在 SO 和 google 上发现了其他一些类似的问题，但它们似乎都是一种片面的观点。另外，由于新版本的 bootstrap 刚刚推出，我发现的大部分内容都与旧版本的 bootstrap 进行比较。

此外，我不想将其仅限于我命名的 3 个框架。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-29T21:28:56.900

这是不可能回答的。您将必须找出您有什么要求以及这些框架是否符合要求。还有另一个著名的框架 Yahoo 用户界面。但是，你必须知道你需要什么。Twitter Bootstrap 目前被广泛使用，并被认为在许多现代浏览器和机器上运行良好，包括各种移动设备。

# javascript - 用于解析关键字和标签的搜索字段的正则表达式 ([])

> ID：12656608
> 
> 赞同：1
> 
> 时间：2012-09-29T21:25:10.660
> 
> 标签：javascript, regex, search

我正在尝试实现类似于 Stackoverflow 的搜索输入（在 node.js/javascript 中）。

*   解析由括号分隔的标签
*   解析由空格分隔的关键字

但是，我根本不懂正则表达式。我什至不知道正则表达式是否可行。

例如：

```
search field [search][search-query] [search-string]
// keywords: ['search', 'field']
// tags: ['search', 'search-query', 'search-string'] 
```

不幸的是，我发现很难在这方面搜索任何帮助，因为搜索`regex search tags`返回 HTML 问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:51:55.123

认为你需要这样的东西：

```
/(?:\[([^\]]*)\]|([^\s]+))/g 
```

您可以重复应用它（例如使用 Javascript exec 方法），然后从第一个和第二个捕获组中提取值以分别捕获标签和关键字。

在这里尝试一下：

[http://refiddle.com/85o](http://refiddle.com/85o)

解释：

最外面的 () 括号包含一个匹配标签（由方括号 [] 括起来）或关键字（不被方括号括起来）的选项。?: 位从捕获组中排除此选择位，因为我们需要明确知道匹配的表达式是标签还是关键字，因此需要为每个单独的捕获组。

下一位 [([^]]*)] 匹配一个标签：开始和结束方括号需要用反斜杠转义以使其成为文字。方括号内的位包含在普通括号 () 中，以捕获第一个捕获组中的文本。[^...] 位匹配除插入符号后列出的内容之外的任何内容 - 因此在这种情况下，除了右方括号之外的任何内容。使用 * 贪婪地重复此操作。

该| 分隔选择，然后我们有一个关键字的匹配表达式：([^\s]+)。同样，这在括号中以使结果出现在捕获组中。这次我们匹配除了空格之外的任何东西一次或多次。

最后 /g 是全局修饰符，以便匹配所有匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:53:13.413

以下代码从字符串中检索标签作为数组：

```
var tags= "search field [search][search-query] [search-string]".match(/\[(.*?)\]/g);
// tags= ["search", "search-query", "search-string"] 
```

# ios - iOS - 随机数生成中的未知错误？

> ID：12656609
> 
> 赞同：0
> 
> 时间：2012-09-29T21:25:23.733
> 
> 标签：ios, arc4random

我正在尝试将一些对象放在屏幕上的随机位置。

我使用 arc4random() 生成一个新的随机数。

但似乎该功能无法正常工作，这是代码和跟踪结果：

```
Code :

UIView *stateView = [[UIView alloc] initWithFrame:CGRectMake( (arc4random()%700)-100 , (20 * 91) + 378 + ((arc4random()%600)+200), 325 , 188)];

NSLog(@"Note %d : X = %f , Y = %f",i,stateView.frame.origin.x,stateView.frame.origin.y);

**********************

NSLog Output :

Note 5 : X = 4294967040.000000 , Y = 2552.000000 
```

这是一个错误还是我对生成器做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:32:18.613

根据 的[文档`arc4random()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/arc4random.3.html)，返回类型是`u_int32_t`，这是一个无符号类型。在表达式中

```
(arc4random()%700)-100 
```

计算，包括减法，是使用*无符号*算术完成的。你得到无符号算术溢出。要解决此问题，请在进行减法之前强制转换为有符号整数类型：

```
((int) (arc4random() % 700)) - 100 
```

其结果将是从 -100 到 599 的整数。

# dependency-injection - 使用 IoC 编写工作流

> ID：12656610
> 
> 赞同：2
> 
> 时间：2012-09-29T21:26:06.763
> 
> 标签：dependency-injection, workflow, inversion-of-control, mef, workflow-foundation

我正在构建一个 WPF 应用程序，它使用 IoC 容器进行依赖注入（在我的例子中是 MEF）。该应用程序包含几个我们正在建模为 WF 工作流的详细流程。但是，一些（不是全部）活动依赖于由 IoC 容器管理的服务和其他组件。我看到了一些可能的方法来实现这一点，但它们似乎都没有遵循最佳实践。他们是：

1.  在每个活动的构造函数或 Execute 方法中使用服务定位器来定位和设置依赖关系。就个人而言，我不喜欢服务定位器，因为我认为它们违反了 DI 的租户之一，其中代码不知道在何处或如何创建依赖项。它还降低了活动的可测试性（或者至少在测试过程中增加了几个步骤）。我在 StackOverflow 和 CodePlex 上看到了一些使用 WF 服务扩展的示例，它们的工作方式基本相同。我没有使用 WF 服务，所以这不是一个选项。
2.  导出每个活动并让工作流导入它们。这将确保容器在我们需要它们之前满足所有依赖项，但这意味着我们不会在 XAML 中构建工作流。
3.  导出工作流并让它导入活动所需的依赖项。然后我必须将依赖项设置为要使用的活动的参数。这不仅会在工作流中产生大量开销代码，而且现在意味着工作流需要了解所有活动的依赖关系。如果活动更改、添加或删除，我现在必须对工作流进行更改以适应对依赖项的任何更改。
4.  采用与#3 相同的方法，除了不导出工作流，而是导出一个控制类，导入所有依赖项并将它们设置为工作流本身的输入参数。每个活动都会拉取它需要的依赖项。这与 #3 有所有相同的问题，需要维护更多代码。

**所以，我的问题是，我应该采取什么方法？**（即你采取了什么方法？）

我还假设上面的列表并不全面，希望有人能提出更好的选择，如果存在的话。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:08:14.830

方法二似乎是最合适的。您可能会在 xaml 中使用一些活动声明，稍后将用于导入真实的活动声明。

编辑：

```
<wf:Workflow.Activities></activities:PassThrough UserId="mstewart"></wf:Workflow.Activities> 
```

然后你可以在这些行中有一些东西

```
interface IActivityInfo
{
  IActivity ImportActivity();
}
interface IActivity<TActivityInfo> where TActivityInfo : IActivityInfo
{
  IActivityInfo Info { get; }
}

class PassThrough : IActivityInfo
{   
  public IActivity ImportActivity(){ return ServiceLocator.Current.GetInstance<IActivity<PassThrough>>(); }
}

[Export(typeof(IActivity<PassThrough>))]
class PassThroughActivity : IActivity<PassThrough>
{
} 
```

这种方法可以让您轻松地将 xaml 设计过程与基础活动分开。

# python - openerp 向导正在调用基本 res.partner 表单而不是我的

> ID：12656611
> 
> 赞同：1
> 
> 时间：2012-09-29T21:26:13.737
> 
> 标签：python, crm, openerp, erp

嗨，我继承了 CRM 模块。我继承了客户模型并将 redirect_partner_form 覆盖为

```
from osv import fields, osv
from IPython.Debugger import Tracer; debug_here = Tracer()
class worldcable_customer(osv.osv):
   _name = "res.partner"
   _description = "worldcable customer"
   _inherit =  "res.partner"
   _columns = {
    'id': fields.integer('ID', readonly=True),
    'connection_info': fields.one2many('worldcable.connection.info', 'partner_id', 'Connection Info'),
    }

    def redirect_partner_form(self, cr, uid, partner_id, context=None):
        debug_here()
        search_view = self.pool.get('ir.model.data').get_object_reference(cr, uid, 'worldcable2',   'view_worldcable_customer_form')
    value = {
        'domain': "[]",
        'view_type': 'form',
        'view_mode': 'form,tree',
        'res_model': 'res.partner',
        'res_id': int(partner_id),
        'view_id': False,
        'context': context,
        'type': 'ir.actions.act_window',
        'search_view_id': search_view and search_view[1] or False
    }
    debug_here()
    return value
    worldcable_customer() 
```

并在向导中调用它，

```
from osv import osv, fields
from tools.translate import _
class crm_lead2partner(osv.osv_memory):
""" Converts lead to partner """
_name = 'worldcable.crm.connection2partner'
_description = 'Connection to Partner'

_columns = {
    'action': fields.selection([('exist', 'Link to an existing partner'), \
                                ('create', 'Create a new partner')], \
                                'Action', required=True),
    'partner_id': fields.many2one('res.partner', 'Partner'),
}
def view_init(self, cr, uid, fields, context=None):
    """
    This function checks for precondition before wizard executes
    """
    if context is None:
        context = {}
    model = context.get('active_model')
    model = self.pool.get(model)
    rec_ids = context and context.get('active_ids', [])
    for this in model.browse(cr, uid, rec_ids, context=context):
        if this.partner_id:
            raise osv.except_osv(_('Warning !'),
                    _('A partner is already defined.'))

def _select_partner(self, cr, uid, context=None):
    if context is None:
        context = {}
    lead = self.pool.get('crm.lead')
    partner = self.pool.get('res.partner')
    lead_ids = list(context and context.get('active_ids', []) or [])
    if not len(lead_ids):
        return False
    this = lead.browse(cr, uid, lead_ids[0], context=context)
    # Find partner address matches the email_from of the lead
    res = lead.message_partner_by_email(cr, uid, this.email_from, context=context)
    partner_id = res.get('partner_id', False)      
    # Find partner name that matches the name of the lead
    if not partner_id and this.partner_name:
        partner_ids = partner.search(cr, uid, [('name', '=', this.partner_name)], context=context)
        if partner_ids and len(partner_ids):
           partner_id = partner_ids[0]
    return partner_id

def default_get(self, cr, uid, fields, context=None):
    """
    This function gets default values
    """
    res = super(crm_lead2partner, self).default_get(cr, uid, fields, context=context)        
    partner_id = self._select_partner(cr, uid, context=context)

    if 'partner_id' in fields:
        res.update({'partner_id': partner_id})
    if 'action' in fields:
        res.update({'action': partner_id and 'exist' or 'create'})

    return res

def open_create_partner(self, cr, uid, ids, context=None):
    """
    This function Opens form of create partner.
    """
    view_obj = self.pool.get('ir.ui.view')
    view_id = view_obj.search(cr, uid, [('model', '=', self._name), \
                                 ('name', '=', self._name+'.view')])
    return {
        'view_mode': 'form',
        'view_type': 'form',
        'view_id': view_id or False,
        'res_model': self._name,
        'context': context,
        'type': 'ir.actions.act_window',
        'target': 'new',
    }

def _create_partner(self, cr, uid, ids, context=None):
    """
    This function Creates partner based on action.
    """
    if context is None:
        context = {}
    lead = self.pool.get('crm.lead')
    lead_ids = context and context.get('active_ids') or []
    data = self.browse(cr, uid, ids, context=context)[0]
    partner_id = data.partner_id and data.partner_id.id or False
    return lead.convert_partner(cr, uid, lead_ids, data.action, partner_id, context=context)

def make_partner(self, cr, uid, ids, context=None):
    """
    This function Makes partner based on action.
    """
    # Only called from Form view, so only meant to convert  one Lead. 
    lead_id = context and context.get('active_id') or False
    partner_ids_map = self._create_partner(cr, uid, ids, context=context)
    return self.pool.get('res.partner').redirect_partner_form(cr, uid, partner_ids_map.get(lead_id,  False), context=context)

crm_lead2partner() 
```

但它从 Base res.partner 调用原始形式。我已经从 db 检查了 search_view_id，我的视图的 id 相同。但我不知道有什么错误。但令人惊讶的是，当我看到对客户端的响应时，它就像正在返回 connection_info 表，这意味着它正在调用我的视图。但我不知道为什么它从基地显示 res.partner 表格。

```
DEBUG_RPC_ANSWER:rpc.result:{'domain': '[]', 'view_type': 'form', 'res_model': 'res.partner',   'view_id': False, 'views': [(False, 'tree'), (57L, 'form')], 'search_view_id': 710, 'view_mode': 'form,tree', 'res_id': 57, 'context': {'lang': u'en_US', 'tz': False, 'active_model': 'crm.lead', 'section_id': False, 'search_default_current': 1, 'active_ids': [35L], 'active_id': 35L}, 'type': 'ir.actions.act_window'} 
```

我注意到其中有地址错误

```
ERROR:tools.expr_eval:{'address': address}
Traceback (most recent call last):
File "/home/noaman/projects/openerp/repository-openerp/Sid/client/bin/tools/__init__.py", line 52,  in   expr_eval
temp = eval(string, context)
File "<string>", line 1, in <module>
NameError: name 'address' is not defined 
```

我的客户 xml 如下

```
<openerp>
<data>
<record model="ir.ui.view" id="view_worldcable_customer_form">
        <field name="name">worldcable.partner.form</field>
        <field name="model">res.partner</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Worldcable Customers" col='1'>
                <group col="6" colspan="4">
                    <group colspan="5" col="6">
                        <field name="name" select="1"/>
                        <field name="ref" groups="base.group_extended"/>
                        <field domain="[('domain', '=', 'partner')]" name="title" size="0"  groups="base.group_extended"/>
                        <field name="lang"/>
                    </group>
                    <group colspan="1" col="2">
                        <field name="customer" select="1" readonly="1"/>
                         <!--                            <field name="employee"/>-->
                    </group>
                </group>
                <notebook colspan="4">
                    <page string="Connection Info">
                     <field colspan="4" mode="form,tree" name="connection_info" nolabel="1" select="1" height="260">
                        <form string="Connection Info">
                            <group colspan="4" col="4">
                                <field name="mac_address"/>
                                <field name="telephone_no"/>
                                <field name="tv_provider"/>
                                <field name="internet_provider"/>
                                <field name="phone_provider"/>
                                <field name="circuit_id"/>                                    
                                <field name="iigo_number"/>
                                <field name="dsl_no"/>
                                <field name="exchange"/>
                                <field name="service_type"/>   
                            </group>
                        </form>
                        <tree string="Connection Info">
                            <field name="mac_address"/>
                            <field name="circuit_id"/>
                            <field name="iigo_number"/>
                            <field name="dsl_no"/>
                            <field name="exchange"/>
                            <field name="tv_provider"/>
                            <field name="phone_provider"/>
                            <field name="internet_provider"/>
                        </tree>                            
                     </field>
                    </page>
                    <page string="General">
                        <field colspan="4" mode="form,tree" name="address" nolabel="1" select="1" height="260">
                            <form string="Partner Contacts">
                                <group colspan="4" col="6">
                                    <field domain="[('domain', '=', 'contact')]" name="title" size="0"/>
                                    <field name="first_name" colspan="2" string="First Name"/>
                                    <field name="middle_name" colspan="1" string="Middle Name"/>
                                    <field name="last_name" colspan="1" string="Last Name"/>   
                                </group>
                                <newline/>
                                <group colspan="2" col="4">

                                    <separator string="Postal Address" colspan="4" col="4" />
                                    <field name="type" string="Type" colspan="2"/>
                                    <field name="floor" colspan="2"/>
                                    <field name="zip"/>
                                    <field name="street" colspan="4"/>
                                    <field name="street2" colspan="4"/>
                                    <field name= "apartment" colspan="2"/>
                                    <field name="city"/>
                                    <field name="state_id"/>
                                    <field name="country_id" completion="1"/>
                                </group>
                                <group colspan="2" col="2">
                                    <separator string="Communication" colspan="2" col="2" />
                                    <field name="phone"/>
                                    <field name="mobile"/>
                                    <field name ="other_no"/>
                                    <field name="fax"/>
                                    <field name="email" widget="email"/>
                                </group>
                            </form>
                            <tree string="Partner Contacts">
                                <field name="name"/>
                                <field name="zip"/>
                                <field name="city"/>
                                <field name="country_id"/>
                                <field name="phone"/>
                                <field name="email"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Sales &amp; Purchases">
                        <separator string="General Information" colspan="4"/>
                        <field name="user_id"/>
                        <field name="active" groups="base.group_extended"/>
                        <field name="website" widget="url"/>
                        <field name="date"/>
                        <field name="parent_id" groups="base.group_extended"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                        <newline/>
                    </page>
                    <page string="History" groups="base.group_extended" invisible="True">
                    </page>
                    <page string="Notes">
                        <field colspan="4" name="comment" nolabel="1"/>
                    </page>

                </notebook>
            </form>
        </field>
  </record>
  <record id="act_my_worldcable_customer_form" model="ir.actions.act_window">
        <field name="name">Worldcable Customer</field>
        <field name="res_model">res.partner</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,calendar,form</field>
        <field name="context">{'search_default_current':1}</field>
        <field name="help">Worldcable Customer Search</field>
        <field name="view_id" ref="view_worldcable_customer_form"/>
  </record>
  <menuitem id="menu_myview_worldcable_customer" parent="base.myview_menu" name="Customers" icon="terp-partner" action="act_my_worldcable_customer_form" groups="base.group_extended,base.group_sale_salesman" sequence="2"/>
 </data>
 </openerp> 
```

有人可以帮我吗，我怎么称呼我的表格而不是基本表格。我已经尝试了所有方法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:30:56.653

操作定义中的`search_view_id`字段用于指定**`search`**要使用的**`form`**视图，而不是顾名思义的视图。如果您想使用特定的表单视图，您应该使用该`view_id`字段（用于指定要打开的主视图，通常是 a`form`或`tree`one）。顺便说一句，OpenERP 操作定义中的所有视图选择字段都可以通过指定一个字段来覆盖：可以使用默认视图的`views`有序对列表。这是框架自动添加到常规操作上的计算字段，但可以手动添加到 Python 方法返回的自定义操作中。`(view_id, view_mode)``view_id``False`

以下是您可以在 Python 方法中执行此操作的方法：

```
# assuming partner_id, context, form_view_id are defined here
return {
    'type': 'ir.actions.act_window',
    'view_type': 'form',
    'view_mode': 'form,tree',
    'res_model': 'res.partner',
    'res_id': int(partner_id),
    'context': context,
    'view_id': form_view_id, 

    # optionally, you could refine by specifying the 'views' explicitly
    'views': [(form_view_id, 'form'),  # open my form view first,
              (False, 'tree')]         # then default tree view
} 
```

你会在官方插件的源码中找到很多类似的例子，搜索代码返回`'views'`或`'view_id'`。

现在有一些与您正在尝试做的事情相关的附带问题，除了解决您当前的问题之外，您可能还想回答这些问题。

1.  在 OpenERP 中修改现有视图的最简单方法是继承它。乍一看，您似乎只是在尝试在合作伙伴表单视图上创建一个新选项卡“连接信息”。简单地创建一个挂钩到`<notebook>`父视图元素的继承视图并在其中添加一个额外的元素是微不足道的（而且简单得多） `<page>`。如果您不想在所有情况下都显示选项卡，您可以使用特殊`attrs`属性向页面添加可见性修饰符。
    因此问题是：你为什么不在这里使用这种技术呢？

2.  当您不想继承现有视图时（因为新视图完全不同），第二个最简单的方法是创建一个相同类型的新视图并赋予它更高的优先级（较低的`priority`字段值）。这将在需要此视图类型的任何地方自动替换默认视图。唯一不起作用的情况是打开视图的操作请求特定的 view_id。
    看来你可以在这里做，所以第二个问题是：为什么不在这里使用其他技术呢？

# php - PHP PDO 用户名可用性检查器

> ID：12656617
> 
> 赞同：1
> 
> 时间：2012-09-29T21:28:35.787
> 
> 标签：php, mysql, pdo

我正在构建一个使用 JQuery 的验证器插件来验证表单的注册页面。对于用户名，我使用了[远程](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)方法。所以这是我的 jquery+html 代码：[fiddle](http://jsfiddle.net/psYHk/4/)

这是Available.php：

```
<?php 
    $usr = $_POST['username'];
    $link = new PDO('mysql:host=***;dbname=***;charset=UTF-8','***','***');
    $usr_check = $link->prepare("SELECT * FROM Conference WHERE Username = :usr");
    $usr_check->bindParam(':usr', $usr);
    $usr_check->execute();
    if($usr_check->rowCount()>0)
        echo false;
    else
        echo true;
?> 
```

所以我在我的数据库中有一个测试帐户，用户名是：user。当我尝试使用相同的用户名提交我的表单时，它没有显示“用户名被采用”的错误，这意味着 php 不正确。有什么想法我哪里出错了吗？谢谢

编辑：在 chrome 的检查器打开的情况下运行网站。输入用户名后，它会尝试获取 Available.php，但它显示“500 内部服务器错误”。这是它的样子： ![500 错误](../Images/d9c4f78603917e34a56183095192ffa2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:46:06.580

好吧，和你聊了一会儿，我们发现如下：

1- $_POST 应该是 $_GET，因为您使用的是来自 jQuery.validate 的远程方法。

2-您的代码在 $link 而不是 $usr_check 上调用 bindParam()，这在您的问题中是正确的。

另一件事，您的代码还需要打印出真假字符串。用引号括起来。

# ruby-on-rails - rails 设计为用户模型创建一个 CRUD 接口

> ID：12656618
> 
> 赞同：1
> 
> 时间：2012-09-29T21:28:45.037
> 
> 标签：ruby-on-rails, model, devise, controller, password-encryption

我有一个用户模型，我在 admin 命名空间中使用一些控制器代码和表单创建了 CRUD 界面。用户模型最初有用户名电子邮件密码字段。

然后我设置设计以使用相同的用户模型。问题是设计加密密码并将它们放在 encrypted_pa​​ssword 字段中，所以我创建的密码和 CRUD 接口现在没用了。我希望管理员对用户表具有 CRUD 能力，同时我想设计使用它。

可能的解决方案是 1) 调用设计控制器的方法，该方法将添加一个用户来处理我的控制器内的加密密码，我不知道这是否可行并且是一个不错的方法。

2）自己加密密码并将它们存储在同一个字段设计中，我试图弄清楚设计如何加密密码我发现了一些帖子，但没有一个有效。我什至尝试添加自定义加密方法，它也不起作用。

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:36:41.563

我通过将电子邮件、密码和用户名分配给新的用户对象来保存用户记录，但问题是只有这些属性设计将记录保存到用户模型，但它没有加密密码，它在身份验证模型中使用的 encrypted_pa​​ssword 字段为空.

我将我的问题告诉了[https://twitter.com/coder_hsps](https://twitter.com/coder_hsps)，他建议为我的控制器中的 password_confirmation 属性分配相同的密码，并且它有效

谢谢

# javascript - 当屏幕的某个部分发生变化时触发 jquery/javascript？

> ID：12656629
> 
> 赞同：0
> 
> 时间：2012-09-29T21:29:31.717
> 
> 标签：javascript, jquery

我想检测网页的特定部分何时发生变化并在发生时刷新页面。这可能吗？例如，假设在页面的左上角有一个大约 50 x 50 像素的绿色绝对定位元素 - 我希望页面在变为红色时刷新。

基本上我正在尝试构建的是一个网站的覆盖，它将检测何时弹出通知并自动刷新页面。如果有其他方法比我想出的更好，请我对任何事情持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:31:46.200

您可以使用它来检查每一秒：

```
function hasChanged(hasItChanged)
{
 //your code, eg

 if(hasItChanged) alert("yep");
 else alert("nope");

}

function check(){
  if($("element").css("background-color") == "rgb(255, 0, 0)")
    hasChanged(true);

  else
    hasChanged(false);
}

setInterval(check, 1000); //check every second (1000 miliseconds) 
```

只需将`if($("element").css("background-color") == "rgb(255, 0, 0)")`行更改为您发现更改的一些 CSS（并且显然将 更改为`$("element")`您想要的选择器）。

*编辑：*我发现你必须使用 RGB 才能工作，就颜色而言。但是你总是可以`$("element").css("background-color")`在浏览器的控制台中输入内容，看看它给了你什么。也许您需要一个 or 声明来支持跨浏览器，尽管我认为至少在现代浏览器中这不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:37:14.830

你可以使用：

```
$(element).on('DOMAttrModified', function() {
    //code
}); 
```

不确定这是否是标准的。

# python - 使用二维数组迭代调用多变量函数

> ID：12656631
> 
> 赞同：0
> 
> 时间：2012-09-29T21:29:37.197
> 
> 标签：python, performance, numpy, iteration

有没有更有效的方法来调用这样的函数：

```
def func(x,y):
    # do something here 
```

当传递的参数是这样的数组时？

```
X = np.random.rand(5)
Y = np.random.rand(5,25) 
```

我以这种形式使用列表理解：

```
res = np.array([[func(x,y) for x in X] for y in Y]) 
```

但想知道我是否可以在 numpy 中找到一些更快的方法，以避免发生“幕后”循环。

# mysql - 将大量数据上传到 MySQL 服务器

> ID：12656643
> 
> 赞同：0
> 
> 时间：2012-09-29T21:30:33.603
> 
> 标签：mysql, optimization

我必须将大约 1600 万条记录上传到不允许 LOAD DATA 功能的共享网络空间上的 MySQL 5.1 服务器。该表是一个 Innodb 表。我还没有分配任何键。

因此，我使用 Python 脚本将我的 CSV 文件（大小为 2.5 GB）转换为带有单独 INSERT 语句的 SQL 文件。我已经启动了SQL文件，这个过程非常慢，感觉每分钟处理1000-1500行！

与此同时，我阅读了有关批量插入的信息，但没有找到任何可靠的来源来说明一个插入语句可以有多少条记录。你知道吗？

没有密钥并稍后添加它们是否有优势？

围绕所有插入的事务是否有助于加快进程？事实上，此时只有一个连接（我的）与数据库一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:43:39.630

如果您使用`insert ... values ...`语法插入运行单个请求的多行，则查询大小受[max_allowed_pa​​cket](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_allowed_packet)值而不是行数的限制。

关于键：在任何数据操作之前定义键是一个好习惯。实际上，当您构建模型时，您*必须*考虑键、关系、索引等。

最好在插入数据之前定义索引。`CREATE INDEX`在庞大的数据集上工作相当缓慢。但是推迟索引创建并不是一个巨大的缺点。

为了使您的插入更快，请尝试打开[自动提交](http://dev.mysql.com/doc/refman/5.0/en/commit.html)模式并且不要在您的表上运行并发请求。

# ruby-on-rails - 参数键的Rails测试

> ID：12656644
> 
> 赞同：0
> 
> 时间：2012-09-29T21:30:44.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, params

我正在尝试解决一个问题，我需要编写以下内容并测试是否通过了 params 键：

```
if params.has_key? :transfer_date(1i)
    params[:call].parse_time_select! :transfer_date
  end 
```

我可以测试一个参数键，比如 :transfer，但是我的时间解析 gem 传递的参数通过了 transfer_date(1i)、transfer_date(2i) 等。

如何使用正确的语法编写上述语句，以便测试 transfer_date(1i) 参数键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:58:24.037

您可以引用符号的内容：

```
if params.has_key? :'transfer_date(1i)' 
```

或者，如果`params`保证是通常的`ActiveSupport::HashWithIndifferentAccess`，你可以只检查一个字符串键：

```
if params.has_key? 'transfer_date(1i)' 
```

# jquery - 按下箭头键时更改图像

> ID：12656645
> 
> 赞同：0
> 
> 时间：2012-09-29T21:30:51.453
> 
> 标签：jquery, image, keyboard, switch-statement

我只使用 JavaScript 和一般编程，大约一个月了，遇到了一个我无法找到解决方案的问题。所以我在这里。我创建了一个图库，您可以在其中单击小图像以在新的“窗口”中放大它们（它只是放置在页面其余部分顶部的 div），以便更好地查看图片。

这是棘手的部分。我希望能够在按箭头键时更改图像。例如，如果我按下键盘上的右箭头键，我希望隐藏旧图片并让第二张图片淡入。

这是按下箭头键时的代码：

```
function onKeyPress(e)
{
    if (e.keyCode == 37) {
        lastImage.hide();
        indexNum--;
        $("#zoomImage img").attr('src', picSrc[indexNum]).fadeIn();
    }

    if (e.keyCode == 39) {
        lastImage.hide();
        indexNum++;
        $("#zoomImage img").attr('src', picSrc[indexNum]).fadeIn();
    }
} 
```

这是变量的代码：

```
lastImage = $(#zoomImage img");  //The last picture shown)

var picSrc = ["img1.png", "img2.png", "img3.png"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:39:18.497

该代码对我来说似乎是正确的，请交叉检查天气该函数在按键时被调用，并且该变量可以通过使用警报方法进行调试在内部访问。

# c++ - Qt 中的自定义事件

> ID：12656646
> 
> 赞同：3
> 
> 时间：2012-09-29T21:30:59.237
> 
> 标签：c++, qt, events

我正在 Qt Creator 中尝试自定义事件。我目前正在另一个站点上检查此示例代码：

```
bool MyClass::event(QEvent* e)
{
    if (e && e->type() == MyCustomEventType) {
       MyCustomEvent* ce = dynamic_cast<MyCustomEventType*>(e);
       return handleCustomEvent(ce);
    }
    // very important: still handle all the other Qt events!
    return QObject::event(e);
} 
```

条件语句检查传递的事件是否是自定义事件，然后在事件发生时执行它希望发生的代码。我不明白的是`return handleCustomEvent(e)`（这个函数应该做什么，应该在哪里声明？）以及做什么`return QObject::event(e)`。从我在 Qt 文档中读到的内容来看，这个函数唯一做的就是返回事件的函数（这是 handleCustomEvent 吗？）是否被“识别和处理”。这应该处理循环中的所有其他事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:40:12.647

`handleCustomEvent()`是您需要在类`MyClass`中实现的方法，它将处理您的*自定义事件* `MyCustomEventType`。

如果不是您的自定义事件，`return QObject::event(e);`则将调用最后一行来处理其他事件类型。

因此，您的代码片段中的方法`bool MyClass::event(QEvent* e)`就像一个路由代码，用于决定将事件发送到何处进行处理，而不是实际处理事件。

一旦确定它`'e'`是类型`MyCustomEventType`- 它调用`handleCustomEvent()`将包含您的代码来处理此事件类型。
如果不是 - 最后一行调用`QObject::event()`来处理它。这将处理所有其他剩余类型的事件。
所以，*不*，您不必担心处理其他事件，除非您愿意。

* * *

因此，您将声明`handleCustomEvent()`并`MyClass`实现它。
就像是：

```
class MyClass {
       ...
       ...
      public:
         bool handleCustomEvent(MyCustomEventType* e);
       ...
       ...
}; 
```

在实现中，您可能拥有所需的逻辑 - 实际为您的自定义事件类型进行处理`MyCustomEventType`。

# css - Rails 教程 - 不包含 CSS 和图像

> ID：12656647
> 
> 赞同：1
> 
> 时间：2012-09-29T21:31:01.817
> 
> 标签：css, ruby-on-rails, railstutorial.org

我是 Ruby on Rails 的新手，并且正在关注 Michael Hartl 的 Rails 教程。

根据这本书，我已经下载了一套 CSS 并将其放在 /public/stylesheets/ 文件夹中。另外，我在 public/images 文件夹中放置了一个 logo.png 文件。当我从浏览器请求页面时，不会显示徽标，而是显示 Alt 文本。另外，我认为 CSS 也没有链接。

我似乎完全按照书上说的做了。不确定是什么问题。

Rails 3.2.8，ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]

这是布局 application.html.erb 页面：

```
<!DOCTYPE html>
<html>
<head>
<title><%= title %></title>
<%= csrf_meta_tag %>
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
<%= stylesheet_link_tag 'blueprint/print', :media => 'print' %>

<!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->

<%= stylesheet_link_tag 'custom', :media => 'screen' %>

</head>
<body>

<div class="container">
    <header>
        <%= image_tag("logo.png", :alt=>"Sample App", :class => "round") %>
        <nav class="round">
            <ul>
                <li><%= link_to "Home", '#' %></li>
                <li><%= link_to "Help", '#' %></li>
                <li><%= link_to "Sign in", '#' %></li>
            </ul>

        </nav>
    </header>

    <section class="round">
        <%= yield %>
    </section>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:25:39.353

Rails 3.X 在 中包含样式表，在 中`app/assets/stylesheets`包含图像`app/assets/images`。

另一个建议也很好......使用最新版本的教程并查看 rvm。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:18:46.610

你为什么要关注旧版的教程？他的网站上有稍新的版本。你一定要检查一下。

你在使用 Rails 3 吗？如果你是，那么现在放置样式表的正确位置就是 assets。你可以在 app/assets/stylesheets 中找到它们。

# objective-c - UICollectionView 使用 performBatchUpdates 执行更新

> ID：12656648
> 
> 赞同：33
> 
> 时间：2012-09-29T21:31:02.110
> 
> 标签：objective-c, ios, xcode, ipad, uicollectionview

我有一个`UICollectionView`我正在尝试动态/使用动画将项目插入其中。所以我有一些功能可以异步下载图像并希望批量插入项目。

获得数据后，我想执行以下操作：

```
[self.collectionView performBatchUpdates:^{
    for (UIImage *image in images) {
        [self.collectionView insertItemsAtIndexPaths:****]
    }
} completion:nil]; 
```

现在代替`***`，我应该传递一个 数组`NSIndexPaths`，它应该指向要插入的新项目的位置。我很困惑，因为在提供位置后，我如何提供应该在该位置显示的实际图像？

谢谢

* * *

**更新：**

`resultsSize`包含数据源数组的大小，`self.results`在从 处的数据添加新数据之前`newImages`。

```
[self.collectionView performBatchUpdates:^{

    int resultsSize = [self.results count];
    [self.results addObjectsFromArray:newImages];
    NSMutableArray *arrayWithIndexPaths = [NSMutableArray array];

    for (int i = resultsSize; i < resultsSize + newImages.count; i++)
          [arrayWithIndexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];

          [self.collectionView insertItemsAtIndexPaths:arrayWithIndexPaths];

} completion:nil]; 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-29T21:48:52.197

请参阅“ [iOS 集合视图编程指南”中的](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/Introduction/Introduction.html)[插入、删除和移动部分和项目](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/CreatingCellsandViews/CreatingCellsandViews.html#//apple_ref/doc/uid/TP40012334-CH7-SW7)：

> 要插入、删除或移动单个部分或项目，您必须执行以下步骤：
> 
> 1.  更新数据源对象中的数据。
> 2.  调用集合视图的适当方法来插入或删除部分或项目。
> 
> 在通知集合视图任何更改之前更新数据源至关重要。集合视图方法假定您的数据源包含当前正确的数据。如果没有，collection view 可能会从您的数据源接收到错误的项目集，或者请求不存在的项目并使您的应用程序崩溃。

因此，在您的情况下，您必须先将图像添加到集合视图数据源，然后再调用`insertItemsAtIndexPaths`. 然后，集合视图将要求数据源委托函数为插入的项目提供视图。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-05T12:45:16.413

我刚刚用 Swift 实现了它。所以我想分享我的实现。首先初始化一个 NSBlockOperations 数组：

```
 var blockOperations: [NSBlockOperation] = [] 
```

在控制器将更改，重新初始化数组：

```
func controllerWillChangeContent(controller: NSFetchedResultsController) {
    blockOperations.removeAll(keepCapacity: false)
} 
```

在确实更改对象方​​法中：

```
 func controller(controller: NSFetchedResultsController, didChangeObject anObject: AnyObject, atIndexPath indexPath: NSIndexPath?, forChangeType type: NSFetchedResultsChangeType, newIndexPath: NSIndexPath?) {

    if type == NSFetchedResultsChangeType.Insert {
        println("Insert Object: \(newIndexPath)")

        blockOperations.append(
            NSBlockOperation(block: { [weak self] in
                if let this = self {
                    this.collectionView!.insertItemsAtIndexPaths([newIndexPath!])
                }
            })
        )
    }
    else if type == NSFetchedResultsChangeType.Update {
        println("Update Object: \(indexPath)")
        blockOperations.append(
            NSBlockOperation(block: { [weak self] in
                if let this = self {
                    this.collectionView!.reloadItemsAtIndexPaths([indexPath!])
                }
            })
        )
    }
    else if type == NSFetchedResultsChangeType.Move {
        println("Move Object: \(indexPath)")

        blockOperations.append(
            NSBlockOperation(block: { [weak self] in
                if let this = self {
                    this.collectionView!.moveItemAtIndexPath(indexPath!, toIndexPath: newIndexPath!)
                }
            })
        )
    }
    else if type == NSFetchedResultsChangeType.Delete {
        println("Delete Object: \(indexPath)")

        blockOperations.append(
            NSBlockOperation(block: { [weak self] in
                if let this = self {
                    this.collectionView!.deleteItemsAtIndexPaths([indexPath!])
                }
            })
        )
    }
} 
```

在确实更改部分方法中：

```
func controller(controller: NSFetchedResultsController, didChangeSection sectionInfo: NSFetchedResultsSectionInfo, atIndex sectionIndex: Int, forChangeType type: NSFetchedResultsChangeType) {

    if type == NSFetchedResultsChangeType.Insert {
        println("Insert Section: \(sectionIndex)")

        blockOperations.append(
            NSBlockOperation(block: { [weak self] in
                if let this = self {
                    this.collectionView!.insertSections(NSIndexSet(index: sectionIndex))
                }
            })
        )
    }
    else if type == NSFetchedResultsChangeType.Update {
        println("Update Section: \(sectionIndex)")
        blockOperations.append(
            NSBlockOperation(block: { [weak self] in
                if let this = self {
                    this.collectionView!.reloadSections(NSIndexSet(index: sectionIndex))
                }
            })
        )
    }
    else if type == NSFetchedResultsChangeType.Delete {
        println("Delete Section: \(sectionIndex)")

        blockOperations.append(
            NSBlockOperation(block: { [weak self] in
                if let this = self {
                    this.collectionView!.deleteSections(NSIndexSet(index: sectionIndex))
                }
            })
        )
    }
} 
```

最后，在 did 控制器中确实更改了内容方法：

```
func controllerDidChangeContent(controller: NSFetchedResultsController) {        
    collectionView!.performBatchUpdates({ () -> Void in
        for operation: NSBlockOperation in self.blockOperations {
            operation.start()
        }
    }, completion: { (finished) -> Void in
        self.blockOperations.removeAll(keepCapacity: false)
    })
} 
```

我个人也在 deinit 方法中添加了一些代码，以便在 ViewController 即将被释放时取消操作：

```
deinit {
    // Cancel all block operations when VC deallocates
    for operation: NSBlockOperation in blockOperations {
        operation.cancel()
    }

    blockOperations.removeAll(keepCapacity: false)
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-10T11:05:43.400

从索引中删除项目时我遇到了类似的问题，这是我认为我们在使用`performBatchUpdates:`方法时需要做的事情。

1# 首先调用 deleteItemAtIndexPath 从集合视图中删除项目。

2# 从数组中删除元素。

3# 通过重新加载数据来更新集合视图。

```
[self.collectionView performBatchUpdates:^{
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:sender.tag inSection:0];
            [self.collectionView deleteItemsAtIndexPaths:[NSArray arrayWithObject:indexPath]];
            [self.addNewDocumentArray removeObjectAtIndex:sender.tag];
        } completion:^(BOOL finished) {
            [self.collectionView reloadData];
        }]; 
```

这有助于我消除所有崩溃和断言失败。

# ios - iOS - 如何遍历网站目录中的文件列表

> ID：12656650
> 
> 赞同：1
> 
> 时间：2012-09-29T21:31:26.260
> 
> 标签：ios, nsurl, nsurlrequest

在 iOS 上，我正在寻找正确的方法来返回目录中文件列表的 URL。

```
/images
    1.jpg
    2.jpg
    3.jpg
    ... 
```

我知道目录的 URL，并且知道目录中的所有文件都是 jpeg 类型的。我不清楚如何正确格式化 NSURLRequest 以返回图像目录中的文件列表。返回列表后，我将遍历它以返回单个图像。

# python - 为什么我收到错误 SyntaxError：此代码的语法无效

> ID：12656652
> 
> 赞同：1
> 
> 时间：2012-09-29T21:31:34.087
> 
> 标签：python, python-2.7, scipy

这是 python 中的代码，它计算`f (x) =∑ ((-1)*x)/(x*x+n*n)`
n 从 1 到无穷大......正确到 0.0001，范围为 1 < x < 100，步长为 0.1。
但是我遇到了一个语法错误，因为我是 python 编程的新手......

```
 from scipy import *
    from matplotlib.pyplot import *
    x=arange(0.1,100,0.1)
    f=zeros(len(x))
    s=-1
    for n in range (1,10000):
        t=s*x/(x*x+n*n)
        f +=t
        s =-s
        if max(abs(t))< 1e-4
            break
    for xx in c_[x,f]:
        print "%f    %f" % (xx[0],xx[1]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T21:33:30.100

你需要在`:`之后添加`if max(abs(t))< 1e-4`

# c++ - 为什么允许在“for-loop”中声明变量的“constructor-way”但在“if-statement”中不允许？

> ID：12656655
> 
> 赞同：15
> 
> 时间：2012-09-29T21:32:15.957
> 
> 标签：c++, if-statement, for-loop, language-lawyer

> **可能重复：**
> [为什么不能用参数构造条件中定义的变量？](https://stackoverflow.com/questions/8332285/why-cant-variables-defined-in-a-conditional-be-constructed-with-arguments)

考虑这个简单的例子：

```
/*1*/ int main() {
/*2*/   for (int i(7); i;){break;} 
/*3*/   if (int i(7)) {}
/*4*/ } 
```

为什么第 2 行编译得很好，而第 3 行给出了错误？这对我来说有点奇怪，为什么 if 语句在这方面比 for 循环更糟糕？

如果这是特定于编译器的 - 我使用[gcc-4.5.1](http://ideone.com/RkJuE)进行了测试：

> prog.cpp：在函数'int main（）'中：prog.cpp：3：7：错误：'int'之前的预期主表达式 prog.cpp：3：7：错误：'int'之前的预期'）'

我被这个[问题启发了](https://stackoverflow.com/questions/12655284/defining-a-variable-in-the-condition-part-of-an-if-statement)

[更新]

我知道这编译得很好：

```
/*1*/ int main() {
/*2*/   for (int i = 7; i;){break;} 
/*3*/   if (int i = 7) {}
/*4*/ } 
```

[更新2]

这似乎是纯粹的学术问题 - 但这对于`std::unique_ptr<>`无法复制的类型可能非常重要：

```
#include <memory>
int main() {
  if (std::unique_ptr<int> i = new (std::nothrow) int(7)) {
  }
  if (std::unique_ptr<int> i(new (std::nothrow) int(7))) {
  }
} 
```

这两种都不允许。不确定新的 C++11 语法`{}`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T21:41:16.080

C++ 标准没有提供基本原理，但我怀疑使用构造函数符号可能会导致一些不一致。例如，由于语句中不允许函数声明`if`，因此最令人头疼的解析实际上意味着它的意图。例如：

```
int f();        // function declaration (simple form or the most vexing parse)
if (int f()) {  // illegal in C++ but, when allowed, would be a zero-initialized int
} 
```

在 C++ 2011 中，您可以使用大括号初始化：

```
if (int x{f()}) {
    ...
} 
```

不幸的是，大括号初始化并不总是与使用构造函数表示法相同（我认为它被称为*直接初始化*）。

关于更新：您可以使用以下之一：

```
if (std::unique_ptr<int> p = std::unique_ptr<int>(new int(1))) { ... }
if (auto p = std::unique_ptr<int>(new int(2))) { ... }
if (std::unique_ptr<int>{new int(3)}) { ... } 
```

似乎有很多选择:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T22:14:27.453

就语法而言，原因很简单。

语句的第一个元素`for`是*语句*。语句可以创建变量以及初始化它们。条件`if`是*条件*。规范确实定义了一个条件可以创建一个变量，但只能通过`=`初始化。

很高兴该规范甚至*允许*您在其中创建变量`if`。它必须有特殊的语法才能允许（“条件”与“表达式”不同），这可能是从 C 继承的东西。

话虽如此，C++11 确实将条件定义为能够使用*花括号初始化列表*（规范说“初始化程序列表”）来初始化声明。所以*应该*是合法的。但是由于 VS2012 还不支持初始化列表...

# java - getGraphics() 阻止我的游戏开始

> ID：12656661
> 
> 赞同：1
> 
> 时间：2012-09-29T21:33:06.740
> 
> 标签：java, double-buffering

我正在学习双缓冲，我从老师那里得到的书告诉我要写我写的东西。但是当 java 试图从图像中获取图形对象时，它会崩溃。

框架 = 图像
引擎 = 图形

**错误**

```
Exception in thread "main" java.lang.NullPointerException
at Engine.<init>(Engine.java:30)
at Game.<init>(Game.java:35)
at Game.main(Game.java:22) 
```

![图 1](../Images/f173dd750ab96e040b699b23f9fc7298.png)

![图 2](../Images/1c99ddf6dc86eaaed068845536ee8450.png)

**游戏.java**

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.*;
import javax.swing.*;
import java.util.*;
import java.util.Timer;

public class Game implements ActionListener {

private static Game hosmos2;
private JFrame frmMain;
private AntiCheat holyanticheat;
private Dimension screen;
private Engine holyengine;
private int sx, sy;
private Timer timCheat;

public static void main(String[] args) throws FileNotFoundException, InterruptedException {

    hosmos2 = new Game();
}

private Game() throws FileNotFoundException, InterruptedException {

    frmMain = new JFrame("Hosmos 2");
    frmMain.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frmMain.setSize(1366, 768);
    screen = Toolkit.getDefaultToolkit().getScreenSize();
    sx = (int) ((screen.getWidth() - frmMain.getWidth()) / 2);
    sy = (int) ((screen.getHeight() - frmMain.getHeight()) / 2);
    frmMain.setLocation(sx, sy);
    holyanticheat = new AntiCheat();
    holyengine = new Engine();
    timCheat = new Timer();
    frmMain.setVisible(true);
    timCheat.schedule(holyanticheat, 500);
    Thread.sleep(1000);
    timCheat.cancel();
}

public void actionPerformed(ActionEvent e) {

}

} 
```

**引擎.java**

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.*;
import javax.swing.*;
import java.util.*;

public class Engine extends JPanel {

private boolean countdown, quality;
private Font text, text2;
private Graphics engine;
private Image frame;
private ImageIcon background, button1, button21, button22, button3, button4, button51, button52, header;
private int weedbackground, fps, fps2;
public Rectangle box1, box2, box3, box4, box5;

public static void main(String[] args) {

}

public Engine() {

    this.setBackground(Color.black);
    frame = createImage(getSize().width, getSize().height);
    text = new Font("Microsoft Sans Serif", Font.BOLD, 24);
    text2 = new Font("Microsoft Sans Serif", Font.BOLD, 8);
    engine = frame.getGraphics(); // Error
    background = new ImageIcon("textures/background.png");
    //background = background.GetThumbnailImage(source.ClientSize.Width, source.ClientSize.Height, null, IntPtr.Zero);
    button1 = new ImageIcon("textures/button 1.png");
    button21 = new ImageIcon("textures/button 2-1.png");
    button22 = new ImageIcon("textures/button 2-2.png");
    button3 = new ImageIcon("textures/button 3.png");
    button4 = new ImageIcon("textures/button 4.png");
    button51 = new ImageIcon("textures/button 5-1.png");
    button52 = new ImageIcon("textures/button 5-2.png");
    header = new ImageIcon("textures/header.png");
    box1 = new Rectangle(20, 20, 87, 37);
    box2 = new Rectangle(20, 60, 96, 37);
    box3 = new Rectangle(20, 103, 182, 43);
    box4 = new Rectangle(20, 146, 83, 43);
    box5 = new Rectangle(20, 189, 206, 43);
}

public Rectangle GetBox1() {

    return box1;
}

public Rectangle GetBox2() {

    return box2;
}

public Rectangle GetBox3() {

    return box3;
}

public Rectangle GetBox4() {

    return box4;
}

public Rectangle GetBox5() {

    return box5;
}

public void FPS()
{
    fps2 = fps;
    fps = 0;
}

public void Quality(boolean quality2)
{
    quality = quality2;
}

public void Render(boolean music, boolean effect, int time, int spawned, int points, int cracktime, int crackend, int shieldtime, int shieldend, int weedtime, int weedend, ImageIcon malcolm, int malcolmX, int malcolmY, int item, ImageIcon crack, int crackX, int crackY, ImageIcon nuke, int nukeX, int nukeY, ImageIcon shield, int shieldX, int shieldY, ImageIcon skull, int skullX, int skullY, ImageIcon trollface, int trollfaceX, int trollfaceY, ImageIcon weed, int weedX, int weedY, LinkedList<Hosmin> hosmins) {

    engine = frame.getGraphics();
    super.paintComponent(engine);
    if (effect == false) {

        if (quality == false) {

            background.paintIcon(this, engine, 0, 0);
        }
        else {

            this.setBackground(Color.black);
        }
    }
    else {

        if (weedbackground == 1) {

            this.setBackground(Color.green);
            weedbackground++;
        }
        else if (weedbackground == 2) {

            this.setBackground(Color.yellow);
            weedbackground++;
        }
        else if (weedbackground == 3) {

            this.setBackground(Color.red);
            weedbackground = 1;
        }
    }
    header.paintIcon(this, engine, 547, 10);
    button1.paintIcon(this, engine, 20, 20);
    if (music == false) {

        button21.paintIcon(this, engine, 20, 60);
    }
    else {

        button22.paintIcon(this, engine, 20, 60);
    }
    button3.paintIcon(this, engine, 20, 103);
    button4.paintIcon(this, engine, 20, 146);
    if (quality == false) {

        button51.paintIcon(this, engine, 20, 189);
    }
    else {

        button52.paintIcon(this, engine, 20, 189);
    }
    engine.setFont(text2);
    engine.setColor(Color.green);
    engine.drawString("FPS: " + fps2, 1293, 9);
    engine.setFont(text);
    engine.setColor(Color.red);
    engine.drawString("Time: " + time, 1178, 22);
    engine.drawString("Hosmins: " + spawned, 1124, 59);
    engine.drawString("Points: " + points, 1160, 96);
    engine.setFont(text2);
    engine.setColor(Color.green);
    engine.drawString("Developer: HolyDuFF", 1229, 708);
    malcolm.paintIcon(this, engine, malcolmX, malcolmY);
    if (countdown == true) {

        if (crackend - cracktime == 0) {

            countdown = false;
        }
        else if (cracktime >= 0) {

            engine.setFont(text);
            engine.setColor(Color.red);
            crackend = crackend - cracktime;
            if (crackend != 10) {

                engine.drawString("" + crackend, malcolmX + 17, malcolmY - 40);
            }
            else {

                engine.drawString("" + crackend, malcolmX + 7, malcolmY - 40);
            }
        }
        else if (shieldtime >= 0) {

            engine.setFont(text);
            engine.setColor(Color.red);
            shieldend = shieldend - shieldtime;
            if (shieldend != 10) {

                engine.drawString("" + shieldend, malcolmX + 17, malcolmY - 40);
            }
            else {

                engine.drawString("" + shieldend, malcolmX + 7, malcolmY - 40);
            }
        }
        else if (weedtime >= 0) {

            engine.setFont(text);
            engine.setColor(Color.blue);
            weedend = weedend - weedtime;
            if (weedend != 10) {

                engine.drawString("" + weedend, malcolmX + 17, malcolmY - 40);
            }
            else {

                engine.drawString("" + weedend, malcolmX + 7, malcolmY - 40);
            }
        }
    }
    for (int i = 0; i < hosmins.size(); i++) {

        Hosmin temp = hosmins.get(i);
        temp.Draw().paintIcon(this, engine, temp.GetX(), temp.GetY());
    }
    if (item == 1) {

        crack.paintIcon(this, engine, crackX, crackY);
    }
    else if (item == 2) {

        nuke.paintIcon(this, engine, nukeX, nukeY);
    }
    else if (item == 3) {

        shield.paintIcon(this, engine, shieldX, shieldY);
    }
    else if (item == 4) {

        skull.paintIcon(this, engine, skullX, skullY);
    }
    else if (item == 5) {

        trollface.paintIcon(this, engine, trollfaceX, trollfaceY);
    }
    else if (item == 6) {

        weed.paintIcon(this, engine, weedX, weedY);
    }
    engine.dispose();
    repaint();
    fps++;
}

public void paintComponent(Graphics g) {

    super.paintComponent(g);
    g.drawImage(frame, 0, 0, this);
}

public void SetBackground(int background2) {

    weedbackground = background2;
}

public void SetCountdown(boolean countdown2) {

    countdown = countdown2;
}

public void SetBox2(int mode) {

    if (mode == 1) {

        box2.width = 96;
        box2.height = 37;
    }
    else {

        box2.width = 76;
        box2.height = 43;
    }
}

public void SetBox5(int mode) {

    if (mode == 1) {

        box5.width = 206;
    }
    else {

        box5.width = 213;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:56:36.190

您正在调用`getGraphics()`一个 null Image 变量。如果您查看组件的 API，`createImage()`您会明白为什么会这样：

> 返回可用于双缓冲的离屏可绘制图像。**如果组件不可显示，则返回值可能为 null**。如果 GraphicsEnvironment.isHeadless() 返回 true，这将始终发生。

引擎尚未在其构造函数中显示。在显示此 JPanel 之前，必须首先通过调用`pack()`或`setVisible(true)`在顶级窗口上呈现 GUI。

# javascript - 使用 javascript 访问 iframe 的字段

> ID：12656663
> 
> 赞同：1
> 
> 时间：2012-09-29T21:33:25.060
> 
> 标签：javascript, forms, iframe, dom

我读到以下内容应该可以使用 javascript 访问 iframe 的内容：

```
document.getElementById("iframe_name").contentDocument 
```

或者

```
document.getElementyById("iframe_name").contentWindow.document 
```

但是，这些方法都不适合我。我尝试访问的 iframe 是我创建的 Google 表单。这是我为我的网站创建的注册表单。我想对用户输入的某些字段进行一些计算，然后在 iframe 之后显示它。使用 javascript 访问这些字段是我能想到的最好方法。为什么我无法访问它？有没有更好的方法来实现我的目标？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:18:48.867

您无法从您的服务器访问像 google.com 这样的外部页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:41:56.140

我不知道你想做什么，但也许这会对你有所帮助..

我用它来重新加载框架

```
document.getElementById('graphFrame').contentDocument.location.reload(true); 
```

可以看到 location 属性与 iframe 相关。

接下来，我正在像这样更改 iframe 中的 div。

```
top.frames["graphFrame"].document.getElementById('right_example'); 
```

所以 top.frames 是页框的数组。然后我正在搜索他的 ID 为“right_example”的 dom 元素，然后你可以用它做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:40:26.080

你所拥有的是正确的。这是一个更完整的序列，应该可以跨浏览器工作：

```
var ifr=document.getElementById("iframe_name");
var doc=ifr.contentWindow||ifr.contentDocument;
if (doc.document) doc=doc.document; 
```

更新：正如另一个答案中所说，这不适用于跨域（例如，如果您尝试从 mydomain.com 访问 google.com）。

# jar - 如何在没有终端（保持打开状态）的情况下运行 .bat 文件？

> ID：12656666
> 
> 赞同：4
> 
> 时间：2012-09-29T21:33:31.473
> 
> 标签：jar, batch-file, cmd

我想用 .bat 运行一个 jar 文件（jar 文件似乎不想自己打开，但现在这是一个不同的问题）但是由于 java 文件运行了很长时间，命令提示符保持打开状态（当 .bat/.jar 仍在运行时）

我不想要这个。

我在某处读到您可以使用 .cmd 文件和命令：

```
cmd /c bat.bat
exit 
```

在没有命令提示符的情况下运行 bat 文件。但这对我不起作用。当我单击 .cmd 程序时，它只会打开一个命令提示符并在循环中一遍又一遍地打印“cmd /c bat.bat exit”。

我做错了什么，我的 .cmd 命令错了吗？有没有另一种方法来运行 .bat 而不打开命令提示符？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T21:38:12.913

从[这里](https://superuser.com/questions/140047/how-to-run-a-batch-file-without-launching-a-command-window)：

> 将以下内容另存为 wscript，例如，将“testing.bat”替换为批处理文件的名称后的 hidecmd.vbs。
> 
> ```
> Set oShell = CreateObject ("Wscript.Shell") 
> Dim strArgs
> strArgs = "cmd /c testing.bat"
> oShell.Run strArgs, 0, false 
> ```
> 
> 参考在这里 [http://msdn.microsoft.com/en-us/library/d5fk67ky.aspx](http://msdn.microsoft.com/en-us/library/d5fk67ky.aspx)

# java - listView.setAdapter 不起作用

> ID：12656668
> 
> 赞同：3
> 
> 时间：2012-09-29T21:33:47.957
> 
> 标签：java, android, eclipse

我有一个名为quotesList 的列表视图，我正在尝试使用适配器将信息放入其中。这是我的代码：

```
ListView listView = (ListView) findViewById(R.id.quotesList);
String[]values={"Android","iOS","Windows Phone","Other Stuff"};
ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, android.R.id.text1,values);
listView.setAdapter(adapter); 
```

Eclipse 显示的唯一错误是在*listView.setAdapter( **adapter** )*行中。粗体代表红色波浪线的位置。

```
Syntax error on token "adapter", VariableDeclaratorId expected after this token 
```

*listView*之后的时间段也给出了错误，但我很确定它只是与另一个错误有关，因为它是一个语法错误。令牌上的语法错误，错误的构造提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:40:44.000

尝试清理您的项目。你的代码是正确的。如果您使用 eclipse 作为 Android 开发 IDE，请选择 Project -> Clean in。这应该解决这个问题。

编辑：对我来说，这段代码在我的 Eclipse IDE 中工作：

```
 public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ListView listView = (ListView) findViewById(R.id.quotesList);
        String[]values={"Android","iOS","Windows Phone","Other Stuff"};
        ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, android.R.id.text1,values);
        listView.setAdapter(adapter);
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:49:45.903

从您的 ArrayAdapter 初始化中删除第三个参数，即 `ArrayAdapter<String> ad = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,values);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T10:03:20.470

我遇到了同样的问题。对我来说，原因是在 onCreate() 方法之外声明 ListView。

# php - 从 MySQL 添加结果？

> ID：12656677
> 
> 赞同：0
> 
> 时间：2012-09-29T21:35:07.720
> 
> 标签：php, mysql, count

不太确定该标题的描述性如何，但这就是我想要做的。我今天编写了一个 URL 缩短器脚本，它工作正常，我只想在它的底部添加一些统计信息，说明有多少链接以及有多少点击。现在，每次用户单击其中一个链接时，它都会 +1 数据库中的列，然后它会重定向用户。我想查询它并将每一行中的所有这些数字加在一起。我尝试了一个我并不感到惊讶的while循环没有工作：

```
while($rows = mysql_fetch_assoc($check_count)){
    $clicks = $rows['clicks'];
    $clicks = $clicks+$clicks;
} 
```

如果您不明白，请询问，如果您明白，任何回复都意味着很多！

# java - Android 未捕获的异常

> ID：12656680
> 
> 赞同：1
> 
> 时间：2012-09-29T21:35:35.560
> 
> 标签：java, android, xml, exception

```
09-30 02:32:31.474: D/ddm-heap(214): Got feature list request
09-30 02:32:31.634: D/AndroidRuntime(214): Shutting down VM
09-30 02:32:31.634: W/dalvikvm(214): threadid=3: thread exiting with uncaught exception   (group=0x4001b188)
09-30 02:32:31.634: E/AndroidRuntime(214): Uncaught handler: thread main exiting due to uncaught exception
09-30 02:32:31.654: E/AndroidRuntime(214): java.lang.RuntimeException: Unable to instantiate  activity ComponentInfo{com.mjcet.mjcet/com.mjcet.mjcet.MJCET}: java.lang.ClassNotFoundException: com.mjcet.mjcet.MJCET in loader dalvik.system.PathClassLoader@44e8c820
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.os.Looper.loop(Looper.java:123)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.app.ActivityThread.main(ActivityThread.java:4363)
09-30 02:32:31.654: E/AndroidRuntime(214):  at java.lang.reflect.Method.invokeNative(Native Method)
09-30 02:32:31.654: E/AndroidRuntime(214):  at java.lang.reflect.Method.invoke(Method.java:521)
09-30 02:32:31.654: E/AndroidRuntime(214):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-30 02:32:31.654: E/AndroidRuntime(214):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-30 02:32:31.654: E/AndroidRuntime(214):  at dalvik.system.NativeStart.main(Native Method)
09-30 02:32:31.654: E/AndroidRuntime(214): Caused by: java.lang.ClassNotFoundException: com.mjcet.mjcet.MJCET in loader dalvik.system.PathClassLoader@44e8c820
09-30 02:32:31.654: E/AndroidRuntime(214):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
09-30 02:32:31.654: E/AndroidRuntime(214):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
09-30 02:32:31.654: E/AndroidRuntime(214):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
09-30 02:32:31.654: E/AndroidRuntime(214):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
09-30 02:32:31.654: E/AndroidRuntime(214):  ... 11 more
09-30 02:32:31.684: I/dalvikvm(214): threadid=7: reacting to signal 3
09-30 02:32:31.684: E/dalvikvm(214): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

以上是我对以下活动LOGINACTIVITY.java的调试输出

```
package com.agrim.mjcet;
import com.agrim.mjcet.R;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
//import android.widget.TextView;
import android.widget.Button;
import android.widget.EditText;
import android.view.View.OnClickListener;

public class LoginActivity extends Activity {
EditText txtUserName;
EditText txtPassword;
Button btnLogin;
    Button btnCancel;
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   // setting default screen to login.xml

    setContentView(R.layout.main);
    txtUserName=(EditText)this.findViewById(R.id.txtUname);
    txtPassword=(EditText)this.findViewById(R.id.txtPwd);
    btnLogin=(Button)this.findViewById(R.id.btnLogin);
    btnLogin=(Button)this.findViewById(R.id.btnLogin);
    btnLogin.setOnClickListener(new OnClickListener()
    {

        public void onClick(View v) {
            // Switching to Register screen
            if((txtUserName.getText().toString()).equals(txtPassword.getText().toString()))
            {
                Intent myIntent = new Intent(getApplicationContext(),SampleActivity.class);
                startActivityForResult(myIntent, 0); 
            }
                                     }
    }
    );
}
    } 
```

示例活动.java

```
package com.agrim.mjcet;
import com.agrim.mjcet.R;
import android.app.Activity;
import android.os.Bundle;  
import android.view.View;
import android.widget.TextView;

public class SampleActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set View to register.xml
    setContentView(R.layout.lol);

    TextView HomeScreen = (TextView) findViewById(R.id.back);

    HomeScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
                            // Closing registration screen
            // Switching to Login Screen/closing register screen
            finish();

        }
    });
} 
```

}

这是我的 2 个布局

主文件

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:stretchColumns="1">
<TableRow>
<TextView 
android:text="@string/user_name" 
android:textColor="#347235"
android:id="@+id/TextView01" 
android:layout_width="wrap_content" 
android:layout_marginLeft="25dip"
android:layout_height="wrap_content">
</TextView>

<EditText 
android:text="" 
android:inputType="text"    
android:id="@+id/txtUname" 
android:layout_weight="0.75"
android:layout_width="wrap_content" 
android:layout_marginRight="10dip"
android:layout_marginBottom="5dip"
android:background="#FFFFFF"
android:layout_height="wrap_content">
</EditText>
</TableRow>

<TableRow>
<TextView 
android:text="@string/password" 
android:textColor="#347235"
android:id="@+id/TextView02" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:layout_marginLeft="25dip">
</TextView>

<EditText 
android:text="" 
android:inputType="textPassword"
android:id="@+id/txtPwd" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:layout_marginRight="10dip"
android:layout_weight="1"
android:background="#FFFFFF"
android:gravity="center">
</EditText>
</TableRow>

<TableRow>

<Button
android:id="@+id/btnLogin"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#FFFFFF"
android:layout_marginTop="25dip"
android:layout_marginLeft="50dip"
android:onClick="onClickMyButton"
android:text="@string/login" />

<Button
android:id="@+id/btnCancel"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#FFFFFF"
android:layout_marginTop="25dip"
android:layout_marginLeft="100dip"
android:layout_marginRight="50dip"
android:text="@string/cancel" />

</TableRow>

<FrameLayout
android:layout_width="wrap_content"
android:layout_height="match_parent" >

<ImageView
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:scaleType="centerInside"
android:src="@drawable/logo_invert" 
android:contentDescription="@drawable/logo_invert"/>

</FrameLayout>

</TableLayout> 
```

最后是 LOL.xml

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:background="#000000"
    android:layout_height="fill_parent" >
    <ImageView 
        android:layout_width="fill_parent"
        android:id="@+id/back"
        android:layout_height="match_parent"
        android:scaleType="centerInside"
        android:src="@drawable/lol"
        android:contentDescription="@drawable/lol">
    </ImageView>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="138dp"
        android:orientation="vertical"
        android:gravity="bottom" >

         <TextView
             android:id="@+id/TextView02"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignParentBottom="true"
             android:layout_centerHorizontal="true"
             android:text="@string/coming_soon"
             android:textColor="#347235" />

    </RelativeLayout>

</FrameLayout> 
```

这是我的 Android Manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mjcet.mjcet"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission
    android:name="android.permission.INTERNET"></uses-permission>
<uses-sdk android:minSdkVersion="7" 
      android:targetSdkVersion="15"
      android:maxSdkVersion="16" />  
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    >

    <activity
        android:name="MJCET"
        android:label="welcome to MJCET" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 <activity android:name=".SampleActivity"></activity>
</application>

</manifest> 
```

我在初始化时强制关闭.. 是的，这是我的第一个 android 应用程序 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:40:52.253

您需要在 AndroidManifest.xml 中添加 SampleActivity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:40:01.037

看起来您的 AndroidManifest.xml 正在声明一个不存在的活动 (MJECT)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:41:40.930

也许还有其他错误，但我首先发现的是，`View`带有 id`back`的`ImageView`. 您尝试访问并将其转换为`TextView`. 这肯定会导致`ClassCastException`.

# jquery - jQuery - 将计时器设置为运行一次然后执行一个函数

> ID：12656681
> 
> 赞同：5
> 
> 时间：2012-09-29T21:36:03.970
> 
> 标签：jquery, timer

所以我有另一个插件需要一秒钟才能加载，因为它必须获取一些信息，所以我计划让它在大约 3 秒的计时器上运行，在 3 秒内它会显示类似“加载统计信息”的内容然后向下滑动统计信息，判断它们加载时间为 3 秒或更短，这是我当前的代码，但它不断重复[http://jsfiddle.net/7tkGY/](http://jsfiddle.net/7tkGY/)

谢谢 =) - 死灵

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T21:41:07.797

```
window.setTimeout(func,3000); 
```

setInterval 是一个重复函数。如果你想结束一个 setinterval 你必须这样做

```
var interval = window.setInterval(func,3000);
 clearInterval(interval); 
```

setTimeout(func,time) 只运行一次函数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T21:37:23.617

您可以使用 setTimeout：

```
window.setTimeout(yourfunction, 2000); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T21:37:35.123

将其更改为：

```
window.setTimeout(yourfunction, 2000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T21:54:51.293

setInterval 每 2000 毫秒执行一次函数，这不是您想要的。

请注意，插件可能需要 2 秒才能加载到您的电脑上，但如果连接速度较慢，则可能需要更长的时间并导致您的代码中断。

Jquery 的 $(function(){})会在所有 DOM 对象准备好**后**执行，因此您实际上不需要猜测插件加载需要多长时间。

你可以试试：

```
function yourfunction() {
     alert('test');
}

$(function (){
    window.setTimeout(yourfunction, 2000);//use yourfunction(); instead without timeout

}) 
```

# css - 如何使用 CSS 访问字体的抗锯齿方法

> ID：12656685
> 
> 赞同：1
> 
> 时间：2012-09-29T21:36:30.960
> 
> 标签：css, fonts, font-face, antialiasing

我在很多不同的网站上都遇到过这个问题。您的字体具有不同的抗锯齿选项，设计师在网络上文本的不同部分使用具有不同抗锯齿选项的相同字体。因此，某些元素之间存在差异。

在这种情况下，我有锋利、清脆、强壮和光滑的感觉。我使用了字体生成器来获取通过@font-face 访问它的代码。即便如此，如果重要的话，我也有原始的 .otf。有没有办法访问它？

我上传了我的意思的图片和我的实际代码：

![在此处输入图像描述](../Images/889c4ad2f50c963ce5cf531111051659.png)

```
@font-face {
    font-family: 'light';
    src: url('../_fnt/light/gothamrnd-light.eot');
    src: url('../_fnt/light/gothamrnd-light.eot?#iefix') format('embedded-opentype'),
             url('../_fnt/light/gothamrnd-light.woff') format('woff'),
             url('../_fnt/light/gothamrnd-light.ttf') format('truetype'),
             url('../_fnt/light/gothamrnd-light.svg#../_fnt/light/gothamrnd-light') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:57:01.330

不，没有办法以这种方式控制文本的呈现。这些是 Photoshop 特定的设置，因为它有自己的渲染引擎，它们甚至不适用于其他程序。

实际上，不同的浏览器会以不同的方式呈现文本，甚至不同计算机上的相同浏览器也会根据系统设置的不同呈现不同的文本。

如果您使页面看起来与一个浏览器中的设计完全一样，那么它在另一个浏览器中看起来会大不相同。您通常应该在不同的浏览器中对其进行测试，并尝试使其看起来尽可能接近大多数浏览器的设计，并确保它与任何浏览器的设计都不太远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:16:22.877

只有 Mac OS X 上的 WebKit 浏览器能够识别与字体平滑相关的 CSS 属性，即`-webkit-font-smoothing`. 即使在那里，也不清楚发生了什么，因为他们似乎正在删除`antialiazed`价值，请参阅[webkit-font-smoothing：chrome 和 safari 中突然出现不同的结果](https://stackoverflow.com/questions/12646592/webkit-font-smoothing-suddenly-different-results-in-chrome-and-safari)

因此，出于实际目的，将字体平滑视为作者无法控制的，并在不同的平滑选项下测试您的字体，以检查结果是否至少可以接受。

# jquery - 如何重定向托管在与其他用户不同的域中的 iframe，而不是从所有者不同的域中调用

> ID：12656703
> 
> 赞同：0
> 
> 时间：2012-09-29T21:38:38.733
> 
> 标签：jquery, html, redirect

我们有一个计划使用 iframe 的 html 页面，但我们不希望其他人将我们的页面用作 iframe。但是我们托管我们的页面，该页面将在不同的域中使用 iframe。

我怎样才能以这种方式限制只有我们的域在 iframe 中获取该页面，而其他域不能？

我正在为此寻找一些 javascript 或 jquery 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:40:24.117

检查`window.parent.location`您的域名，如果它不存在重定向浏览器，例如：

```
if(window.parent.location.indexOf("myDomain") == 0)
     good;
else
     window.parent.location = "http://myDomain"; 
```

# ruby-on-rails - 在 RSpec 中的 after(:each) 中获取额外信息

> ID：12656707
> 
> 赞同：1
> 
> 时间：2012-09-29T21:39:20.057
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec

我正在使用 RSpec，我想在完成后获得每个测试的结果（通过与否）、类名、测试名称（或描述）**和错误消息**（如果存在）。

所以这是一个非常简单的代码

```
 describe MyClass do

    after :each do
      #how do I know a test passed, its name, class name and error message?
    end

    it "should be true" do 
        5.should be 5
    end

    it "should be false" do 
        5.should be 6
    end

   end 
```

你的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:59:09.997

您可以从格式化程序获得额外的信息，但由于`after`钩子是潜在的故障点，它们本身不会暴露故障信息。

请参阅[https://www.relishapp.com/rspec/rspec-core/v/2-11/docs/formatters/custom-formatters](https://www.relishapp.com/rspec/rspec-core/v/2-11/docs/formatters/custom-formatters)和[https://github.com/rspec/rspec-core/blob/master/lib /rspec/core/formatters/base_formatter.rb](https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/formatters/base_formatter.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:06:53.510

有一些用于测试输出的格式化程序可以向您显示哪些测试通过/失败/待定，听起来您对名为`documentation`.

为了使此格式化程序可用于所有 rspec 文件，请创建一个名为`.rspec`内容的文件：

```
--color  # I just like this one for more easily read output
--formatter documentation 
```

这意味着当您像上面那样运行测试套件时，您将看到：

```
MyClass
  should be true
  should be false (Failed - 1)

  # Individual output for each error would show up down here 
```

参考：[https ://www.relishapp.com/rspec/rspec-core/v/2-11/docs/formatters/custom-formatters](https://www.relishapp.com/rspec/rspec-core/v/2-11/docs/formatters/custom-formatters)

# oracle - 在Oracle中确定字符串值的数据类型

> ID：12656710
> 
> 赞同：0
> 
> 时间：2012-09-29T21:39:38.603
> 
> 标签：oracle, types, type-conversion

好的......这就是我所拥有的。有一个 Oracle 数据库表，其中有一列是一种`VARCHAR`数据类型。此列称为“值”，包含代表不同事物的不同值的字符串。所以有些记录在这个列中有一个数字，其他的有科学记数法，其他的日期，其他的实际字符等，但它们都将作为字符串存储在这个“值”列中。

我需要编写一个可以查询该表并确定“值”列中的字符串表示什么数据类型的视图。我知道我可以执行 PL/SQL 来执行此操作，但我无权创建存储过程，并且这需要在视图中 - 出于其他原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:05:20.727

我认为您需要有一个额外的列来描述存储在`Value`列中的值

```
 Value       VARCHAR2,
 ValueType   VARCHAR2  -- e.g. Age, Name, Money 
```

在您看来，然后您使用 CASE 语句来确定

```
 CASE 
    WHEN ValueType = 'Age' THEN 'integer'
    WHEN ValueType = 'Name' THEN 'string'
    WHEN ValueType = 'Money' THEN 'decimal'
 END As ColumnValueType 
```

您还可以使用正则表达式

# mysql - 删除自动增量字段

> ID：12656712
> 
> 赞同：0
> 
> 时间：2012-09-29T21:39:54.143
> 
> 标签：mysql, auto-increment, built-in

1.  如果可以解决标题中的问题，请指导。我在任何地方都没有找到它。
2.  如果有可能（删除自动增量字段而不在表中命名它，请指导。
3.  我可以从`extra`字段中读取它`information_schema.columns`并获得它的名称，然后很容易从特定表中删除该列。但我正在寻找更好的解决方案。
4.  有没有比我的观点更好/更快的解决方案#3

问题（如果还不清楚:)

是否有任何查询/功能可以从数据库中删除所有自动增量列？或者至少有一种方法可以在不知道该列名称的情况下从特定表中删除自动增量列？

我在想这是因为一个表中只能有 0 或 1 个自增列，所以 mysql 可能有一些内置的扩展函数来处理这种类型的字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:51:42.280

没有这样的内置函数。您的第 3 点是在 MySQL 中执行此操作的不错选择。您还可以解析`desc mytable`输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:53:08.703

虽然没有内置机制来执行此操作，但您可以编写一个脚本来读取`information_schema`并生成所有必要的`alter table`命令。

# c++ - mex 编译给出“没有依赖于模板参数的参数”错误

> ID：12656715
> 
> 赞同：0
> 
> 时间：2012-09-29T21:40:05.263
> 
> 标签：c++, matlab, mex

我正在尝试在 Ubuntu 下使用 MATLAB编译一个[mex 库。](http://people.csail.mit.edu/celiu/OpticalFlow/)*即使*我尝试使用 -fpermissive 进行编译，我也会遇到以下错误（即`mex -v CXXFLAGS='$CFLAGS -fpermissive' Coarse2FineTwoFrames.cpp GaussianPyramid.cpp OpticalFlow.cpp`，我必须做什么？库代码有问题吗？

```
 In file included from Image.h:11:0,
                     from Coarse2FineTwoFrames.cpp:3:
    Stochastic.h:11:13: warning: extra tokens at end of #ifndef directive [enabled by default]
    In file included from OpticalFlow.h:4:0,
                     from Coarse2FineTwoFrames.cpp:4:
    NoiseModel.h:6:0: warning: "PI" redefined [enabled by default]
    Stochastic.h:16:0: note: this is the location of the previous definition
    In file included from Image.h:6:0,
                     from Coarse2FineTwoFrames.cpp:3:
    ImageProcessing.h: In static member function ‘static void ImageProcessing::BilinearInterpolate(const T1*, int, int, int, double, double, T2*)’:
    ImageProcessing.h:133:23: warning: there are no arguments to ‘__min’ that depend on a template parameter, so a declaration of ‘__min’ must be available [-fpermissive]
    ImageProcessing.h:134:23: warning: there are no arguments to ‘__min’ that depend on a template parameter, so a declaration of ‘__min’ must be available [-fpermissive]
    ImageProcessing.h: In static member function ‘static T1 ImageProcessing::BilinearInterpolate(const T1*, int, int, double, double)’:
    ImageProcessing.h:155:23: warning: there are no arguments to ‘__min’ that depend on a template parameter, so a declaration of ‘__min’ must be available [-fpermissive]
    ImageProcessing.h:156:23: warning: there are no arguments to ‘__min’ that depend on a template parameter, so a declaration of ‘__min’ must be available [-fpermissive]
    ImageProcessing.h: In static member function ‘static void ImageProcessing::BilinearInterpolate_transpose(const T1*, int, int, int, double, double, T2*)’:
    ImageProcessing.h:182:23: warning: there are no arguments to ‘__min’ that depend on a template parameter, so a declaration of ‘__min’ must be available [-fpermissive]
    ImageProcessing.h:183:23: warning: there are no arguments to ‘__min’ that depend on a template parameter, so a declaration of ‘__min’ must be available [-fpermissive]
    In file included from Image.h:11:0,
                     from Coarse2FineTwoFrames.cpp:3:
    Stochastic.h: In static member function ‘static void CStochastic::GaussianFiltering(T1*, T2*, int, int, int, double)’:
    Stochastic.h:402:32: warning: there are no arguments to ‘__min’ that depend on a template parameter, so a declaration of ‘__min’ must be available [-fpermissive]
    In file included from Coarse2FineTwoFrames.cpp:3:0:
    Image.h: In member function ‘virtual bool Image<T>::loadImage(std::ifstream&)’:
    Image.h:846:26: warning: there are no arguments to ‘strcmpi’ that depend on a template parameter, so a declaration of ‘strcmpi’ must be available [-fpermissive]
    Image.h:848:26: warning: there are no arguments to ‘strcmpi’ that depend on a template parameter, so a declaration of ‘strcmpi’ must be available [-fpermissive]
    Image.h:850:34: warning: there are no arguments to ‘strcmpi’ that depend on a template parameter, so a declaration of ‘strcmpi’ must be available [-fpermissive]
    Image.h: In member function ‘void Image<T>::imfilter_hv(Image<T1>&, const Image<double>&, const Image<double>&) const’:
    Image.h:1328:54: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:1329:54: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h: In member function ‘void Image<T>::imfilter_hv_transpose(Image<T1>&, const Image<double>&, const Image<double>&) const’:
    Image.h:1417:54: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:1418:54: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h: In member function ‘void Image<T>::warpImageBicubic(Image<T>&, const Image<T1>&, const Image<T1>&, const Image<T1>&, const Image<T2>&, const Image<T2>&) const’:
    Image.h:2277:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2278:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2279:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2280:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h: In member function ‘void Image<T>::warpImageBicubic(Image<T>&, const Image<T1>&, const Image<T2>&, const Image<T2>&) const’:
    Image.h:2339:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2340:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2341:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2342:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h: In member function ‘void Image<T>::warpImageBicubicCoeff(Image<T1>&) const’:
    Image.h:2439:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2440:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2441:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2442:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h: In member function ‘void Image<T>::warpImageBicubicRef(const Image<T>&, Image<T>&, const Image<T1>&, const Image<T1>&, const Image<T1>&, const Image<T2>&, const Image<T2>&) const’:
    Image.h:2536:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2537:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2538:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2539:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h: In member function ‘void Image<T>::warpImageBicubicRef(const Image<T>&, Image<T>&, const Image<T1>&, const Image<T2>&, const Image<T2>&) const’:
    Image.h:2606:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2607:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2608:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h:2609:25: warning: there are no arguments to ‘__max’ that depend on a template parameter, so a declaration of ‘__max’ must be available [-fpermissive]
    Image.h: In member function ‘bool Image<T>::loadImage(std::ifstream&) [with T = double, std::ifstream = std::basic_ifstream<char>]’:
    Coarse2FineTwoFrames.cpp:102:1:   instantiated from here
    Image.h:846:2: error: ‘strcmpi’ was not declared in this scope
    Image.h:848:2: error: ‘strcmpi’ was not declared in this scope
    Image.h:850:2: error: ‘strcmpi’ was not declared in this scope
    In file included from Image.h:6:0,
                     from Coarse2FineTwoFrames.cpp:3:
    ImageProcessing.h: In static member function ‘static void ImageProcessing::BilinearInterpolate(const T1*, int, int, int, double, double, T2*) [with T1 = double, T2 = double]’:
    ImageProcessing.h:218:4:   instantiated from ‘static void ImageProcessing::ResizeImage(const T1*, T2*, int, int, int, double) [with T1 = double, T2 = double]’
    Image.h:719:2:   instantiated from ‘bool Image<T>::imresize(double) [with T = double]’
    Coarse2FineTwoFrames.cpp:102:1:   instantiated from here
    ImageProcessing.h:133:2: error: ‘__min’ was not declared in this scope
    ImageProcessing.h:133:2: error: ‘__max’ was not declared in this scope
    In file included from Image.h:6:0,
                     from Coarse2FineTwoFrames.cpp:3:
    ImageProcessing.h: In static member function ‘static T ImageProcessing::EnforceRange(const T&, const int&) [with T = int]’:
    ImageProcessing.h:139:4:   instantiated from ‘static void ImageProcessing::BilinearInterpolate(const T1*, int, int, int, double, double, T2*) [with T1 = double, T2 = double]’
    ImageProcessing.h:218:4:   instantiated from ‘static void ImageProcessing::ResizeImage(const T1*, T2*, int, int, int, double) [with T1 = double, T2 = double]’
    Image.h:719:2:   instantiated from ‘bool Image<T>::imresize(double) [with T = double]’
    Coarse2FineTwoFrames.cpp:102:1:   instantiated from here
    ImageProcessing.h:23:98: error: ‘__max’ was not declared in this scope
    ImageProcessing.h:23:98: error: ‘__min’ was not declared in this scope

        mex: compile of ' "Coarse2FineTwoFrames.cpp"' failed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:35:18.330

看起来您正在尝试为 matlab 构建 OpticalFlow 包。我遇到了同样的错误，并通过在 project.h 中设置编译标志 _LINUX_MAC 来解决它。通过使用而不是“math.h”解决了另一个编译错误。

干杯，

艾坦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:45:25.147

根据你的错误信息。`strcmpi`没有定义。

从一个非常快速的谷歌搜索中，您可以看到它是在`string.h`.

所以尝试`#include <string.h>`在开头添加`image.h`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-23T10:30:56.343

对于 abs 错误，我在 OpticalFlow.cpp 中使用“#include <cmath>”

# html - 调整网页上的浮动元素

> ID：12656720
> 
> 赞同：1
> 
> 时间：2012-09-29T21:40:25.997
> 
> 标签：html, css, css-float, html-lists

我正在尝试实现以下结果：

```
 Email               Password
                                              [Email box]         [Password Box] [Log In]
                                              []keep me logged in Forgot Password? 
```

我已经成功地实现了前两行（电子邮件... [登录]），但无法塑造最后一行。这是代码。

```
<ul>
<li>
<label for="mail">Email: </label><br>
<input type="email" name="mail" /><br>
<input type="checkbox" name="stayLoggedIn" />
    <small>Keep me signed in</small>
</li>
<li>
<label for="paswrd">Password: </label><br>
<input type="password" name="paswrd" /><br>
<small>Forgot  Password?</small>
</li>
<li><button type="button" name="login">Log In</button></li><br><p> </p>
</ul> 
```

CSS 代码如下。

```
header ul {float: right;}
    header ul li {
        display: inline-block;
        color: #FFEBCD;
        font-family: "Maiandra GD";
    }
header small {float: right;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:46:09.933

您将需要使用两个 div 的左侧浮动，右侧的第二个浮动来执行此操作

看一个[例子](http://jsfiddle.net/5dygq/)

```
<div class="left_div">
   <label for="mail">Email: </label><br>
   <input type="email" name="mail" /><br>
   <input type="checkbox" name="stayLoggedIn" />
    <small>Keep me signed in</small>
</div>
<div class="right_div">
  <label for="paswrd">Password: </label><br>
  <input type="password" name="paswrd" /><br>
  <small>Forgot  Password?</small>
</div> 
```

CSS 代码

```
.left_div {
   float: left;
   width: 300px;    
 }

.right_div {
   float: right;
   width: 300px;    
 } 
```

# python - 有没有办法用 Python 操作图标文件？

> ID：12656722
> 
> 赞同：1
> 
> 时间：2012-09-29T21:40:34.630
> 
> 标签：python, windows-xp, icons, python-2.5

好的，所以我有带有 Windows XP 的 Python 2.5。我想创建一个程序来创建和/或操作图标 (.ico) 文件。有没有可以做到这一点的模块？谢谢。

编辑：

我需要将图像保存回 .ico 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:42:22.677

试试[Python Image Library](http://www.pythonware.com/products/pil/)或简称 PIL。另外，看看这个 PIL 插件，它可以在 Windows 上正确处理图像：[http ://code.google.com/p/casadebender/wiki/Win32IconImagePlugin](http://code.google.com/p/casadebender/wiki/Win32IconImagePlugin)

还有这个：[pythonMagick](http://www.imagemagick.org/download/python/)

# ios - startUpdatingLocation +“应用程序注册位置更新”停止工作

> ID：12656727
> 
> 赞同：1
> 
> 时间：2012-09-29T21:40:56.683
> 
> 标签：ios

我有一个应用程序，即使在后台也需要持续更新 GPS。我调用了 startUpdatingLocation 并设置了“应用程序注册位置更新”，我得到了大约 15 分钟的修复，然后应用程序停止获取更新。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-17T11:58:24.473

您是否尝试设置：

myLocationManager.pausesLocationUpdatesAutomatically = 否；

此属性的默认值为 YES。这对我有帮助，我遇到了同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:53:55.900

我想我想通了。在 iOS6 上，为了节省电量，您将停止获取位置更新，因为您没有移动。

发生这种情况时会触发 locationManagerDidPauseLocationUpdates。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:01:14.763

您是否设置了 locationManager 的委托？建议[在这里](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/comment-page-1/#comment-18277)。

另外：也许它在 15 分钟后会下降到较低的准确度，并且只通知你大的变化。去开车，或者在模拟器中设置遥远的位置，然后看看你是否得到更新。

# javascript - 在元素的实例上附加函数

> ID：12656729
> 
> 赞同：15
> 
> 时间：2012-09-29T21:41:06.270
> 
> 标签：javascript, html, dom

我们可以修改一个 DOM 元素并添加到它的原型中。例如，如果我们只想在画布上添加一些东西，我们会这样做：

```
HTMLCanvasElement.prototype.doSomething = function(arg) { ... }; 
```

然后我们可以在画布元素上执行此操作：

```
var canvas = document.getElementById('canvasId');
canvas.doSomething(...); 
```

是否可以在不修改 HTMLCanvasElement 原型的情况下向此画布实例添加/附加函数。我只想要一个调用 doSomething(...) 的画布来访问其他方法，而不是 DOM 中的所有画布元素。我怎样才能做到这一点？

我在 doSomething 函数中尝试了以下操作：

```
this.prototype.foobar = function() {...} 
```

但是，原型在这里是未定义的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T21:59:15.283

Shusl 帮我想出了正确的答案。这比我想象的要容易。在我的 doSomething(args) 函数中，我没有尝试修改对象原型，而是直接附加了该函数。这是完整的源代码：

```
HTMLCanvasElement.prototype.doSomething = function(args) {
    this.foobar = function(args) { ... };
}

var canvas = document.getElementById('canvasId');
canvas.doSomething(...);
canvas.foobar(...); 
```

现在， foobar 只能被调用 doSomething 的画布实例访问。同时，我不需要有关该实例的任何信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T21:43:42.073

在这种情况下，您可以直接将 a 附加`method`到您的画布对象

```
var canvas = document.getElementById('canvasId');
canvas.doSomething= function() {...}; ///doSomething will only be available to this particular canvas.
canvas.doSomething(...); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-29T21:48:36.640

使用 jQuery，您可以使用该`data`属性。

```
//setting the function
$('element').data('doSomething', function(arg) { ... });
//calling the function
$('element').data('doSomething')(arg); 
```

**[JSFiddle](http://jsfiddle.net/FgapU/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-21T05:12:58.597

`Object.defineProperty(element, 'doSomething', {value:function(arg){ ... }} );`

其中“ **element** ”是要添加属性的元素，“ **doSomething** ”是名称，第三个参数是属性自身的对象。在你的情况下，一个函数。

例如：

```
var mycanvas = document.createElement("canvas");

Object.defineProperty(mycanvas, 'doSomething', {
  value: function(x){console.log(x); },
  configurable: true 
});

mycanvas.doSomething('my message');
//prints 'my message' to the console.
```

'configurable' 属性指定您是否希望在创建后能够再次更改 'doSomething' 属性。查看[MDN 详细信息](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)以获取更多信息和示例。

# c# - 如何获取指定进程的dll列表并循环查看某个函数是否存在

> ID：12656737
> 
> 赞同：2
> 
> 时间：2012-09-29T21:41:47.743
> 
> 标签：c#

如何获取正在运行的进程（例如游戏启动器）的模块列表，然后遍历列表并获取模块（dll）的句柄以检查某个功能是否存在。

提前致谢，

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686849(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686849(v=vs.85).aspx) http://msdn.microsoft.com/en-us/library/windows/desktop/ ms683212(v=vs.85).aspx

但那些是用于 c++ 的，我无法找到一些用于 c# 的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T22:07:32.190

获取正在运行的进程列表：

```
Process[] processes = Process.GetProcesses(); 
```

然后，您可以循环遍历`processes`数组以查找您的目标进程。

然后你可以打电话

```
ProcessModuleCollection modules = targetProcess.Modules; 
```

掌握所有模块。

然后您可以遍历该集合并找到每个模块的文件名或句柄。请注意，句柄（`HMODULE`Win32 术语中的）由[`BaseAddress`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processmodule.baseaddress.aspx)属性给出。

查找有关导出函数的信息有点困难。该信息不能通过 .net 类轻松获得，即使在原始 Win32 中也很棘手，因为您的代码是在进程外执行的。您不能对`HMODULE`来自另一个进程的操作做任何事情。

检查函数是否存在的方法是使用 dbghelp 库来解析实际模块文件的 PE 数据。我在网上找不到任何代码来做到这一点，所以我制作了我的[另一个 Stack Overflow 答案的](https://stackoverflow.com/questions/9576118/how-to-check-a-dll-if-a-function-exists#9578730)翻译。请注意，我使用了来自[pinvoke.net](http://pinvoke.net)的一些声明。我希望这有帮助！

```
using System;
using System.Text;
using System.Runtime.InteropServices;
using Microsoft.Win32.SafeHandles;
using System.ComponentModel;

internal static class NativeMethods
{
    [Flags]
    public enum EFileAccess : uint
    {
        //
        // Standard Section
        //

        AccessSystemSecurity = 0x1000000,   // AccessSystemAcl access type
        MaximumAllowed = 0x2000000,     // MaximumAllowed access type

        Delete = 0x10000,
        ReadControl = 0x20000,
        WriteDAC = 0x40000,
        WriteOwner = 0x80000,
        Synchronize = 0x100000,

        StandardRightsRequired = 0xF0000,
        StandardRightsRead = ReadControl,
        StandardRightsWrite = ReadControl,
        StandardRightsExecute = ReadControl,
        StandardRightsAll = 0x1F0000,
        SpecificRightsAll = 0xFFFF,

        FILE_READ_DATA = 0x0001,        // file & pipe
        FILE_LIST_DIRECTORY = 0x0001,       // directory
        FILE_WRITE_DATA = 0x0002,       // file & pipe
        FILE_ADD_FILE = 0x0002,         // directory
        FILE_APPEND_DATA = 0x0004,      // file
        FILE_ADD_SUBDIRECTORY = 0x0004,     // directory
        FILE_CREATE_PIPE_INSTANCE = 0x0004, // named pipe
        FILE_READ_EA = 0x0008,          // file & directory
        FILE_WRITE_EA = 0x0010,         // file & directory
        FILE_EXECUTE = 0x0020,          // file
        FILE_TRAVERSE = 0x0020,         // directory
        FILE_DELETE_CHILD = 0x0040,     // directory
        FILE_READ_ATTRIBUTES = 0x0080,      // all
        FILE_WRITE_ATTRIBUTES = 0x0100,     // all

        //
        // Generic Section
        //

        GenericRead = 0x80000000,
        GenericWrite = 0x40000000,
        GenericExecute = 0x20000000,
        GenericAll = 0x10000000,

        SPECIFIC_RIGHTS_ALL = 0x00FFFF,
        FILE_ALL_ACCESS =
        StandardRightsRequired |
        Synchronize |
        0x1FF,

        FILE_GENERIC_READ =
        StandardRightsRead |
        FILE_READ_DATA |
        FILE_READ_ATTRIBUTES |
        FILE_READ_EA |
        Synchronize,

        FILE_GENERIC_WRITE =
        StandardRightsWrite |
        FILE_WRITE_DATA |
        FILE_WRITE_ATTRIBUTES |
        FILE_WRITE_EA |
        FILE_APPEND_DATA |
        Synchronize,

        FILE_GENERIC_EXECUTE =
        StandardRightsExecute |
          FILE_READ_ATTRIBUTES |
          FILE_EXECUTE |
          Synchronize
    }

    [Flags]
    public enum EFileShare : uint
    {
        /// <summary>
        /// 
        /// </summary>
        None = 0x00000000,
        /// <summary>
        /// Enables subsequent open operations on an object to request read access. 
        /// Otherwise, other processes cannot open the object if they request read access. 
        /// If this flag is not specified, but the object has been opened for read access, the function fails.
        /// </summary>
        Read = 0x00000001,
        /// <summary>
        /// Enables subsequent open operations on an object to request write access. 
        /// Otherwise, other processes cannot open the object if they request write access. 
        /// If this flag is not specified, but the object has been opened for write access, the function fails.
        /// </summary>
        Write = 0x00000002,
        /// <summary>
        /// Enables subsequent open operations on an object to request delete access. 
        /// Otherwise, other processes cannot open the object if they request delete access.
        /// If this flag is not specified, but the object has been opened for delete access, the function fails.
        /// </summary>
        Delete = 0x00000004
    }

    public enum ECreationDisposition : uint
    {
        /// <summary>
        /// Creates a new file. The function fails if a specified file exists.
        /// </summary>
        New = 1,
        /// <summary>
        /// Creates a new file, always. 
        /// If a file exists, the function overwrites the file, clears the existing attributes, combines the specified file attributes, 
        /// and flags with FILE_ATTRIBUTE_ARCHIVE, but does not set the security descriptor that the SECURITY_ATTRIBUTES structure specifies.
        /// </summary>
        CreateAlways = 2,
        /// <summary>
        /// Opens a file. The function fails if the file does not exist. 
        /// </summary>
        OpenExisting = 3,
        /// <summary>
        /// Opens a file, always. 
        /// If a file does not exist, the function creates a file as if dwCreationDisposition is CREATE_NEW.
        /// </summary>
        OpenAlways = 4,
        /// <summary>
        /// Opens a file and truncates it so that its size is 0 (zero) bytes. The function fails if the file does not exist.
        /// The calling process must open the file with the GENERIC_WRITE access right. 
        /// </summary>
        TruncateExisting = 5
    }

    [Flags]
    public enum EFileAttributes : uint
    {
        Readonly = 0x00000001,
        Hidden = 0x00000002,
        System = 0x00000004,
        Directory = 0x00000010,
        Archive = 0x00000020,
        Device = 0x00000040,
        Normal = 0x00000080,
        Temporary = 0x00000100,
        SparseFile = 0x00000200,
        ReparsePoint = 0x00000400,
        Compressed = 0x00000800,
        Offline = 0x00001000,
        NotContentIndexed = 0x00002000,
        Encrypted = 0x00004000,
        Write_Through = 0x80000000,
        Overlapped = 0x40000000,
        NoBuffering = 0x20000000,
        RandomAccess = 0x10000000,
        SequentialScan = 0x08000000,
        DeleteOnClose = 0x04000000,
        BackupSemantics = 0x02000000,
        PosixSemantics = 0x01000000,
        OpenReparsePoint = 0x00200000,
        OpenNoRecall = 0x00100000,
        FirstPipeInstance = 0x00080000
    }

    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    public static extern SafeFileHandle CreateFile(
        string lpFileName,
        EFileAccess dwDesiredAccess,
        EFileShare dwShareMode,
        IntPtr lpSecurityAttributes,
        ECreationDisposition dwCreationDisposition,
        EFileAttributes dwFlagsAndAttributes,
        IntPtr hTemplateFile
    );

    [Flags]
    public enum FileMapProtection : uint
    {
        PageReadonly = 0x02,
        PageReadWrite = 0x04,
        PageWriteCopy = 0x08,
        PageExecuteRead = 0x20,
        PageExecuteReadWrite = 0x40,
        SectionCommit = 0x8000000,
        SectionImage = 0x1000000,
        SectionNoCache = 0x10000000,
        SectionReserve = 0x4000000,
    }

    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    public static extern SafeFileHandle CreateFileMapping(
        SafeFileHandle hFile,
        IntPtr lpFileMappingAttributes,
        FileMapProtection flProtect,
        uint dwMaximumSizeHigh,
        uint dwMaximumSizeLow,
        string lpName
    );

    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    public static extern SafeFileHandle CreateFileMapping(
        SafeFileHandle hFile,
        IntPtr lpFileMappingAttributes,
        FileMapProtection flProtect,
        uint dwMaximumSizeHigh,
        uint dwMaximumSizeLow,
        IntPtr lpName
    );

    [Flags]
    public enum FileMapAccess : uint
    {
        FileMapCopy = 0x0001,
        FileMapWrite = 0x0002,
        FileMapRead = 0x0004,
        FileMapAllAccess = 0x001f,
        FileMapExecute = 0x0020,
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern IntPtr MapViewOfFile(
        SafeFileHandle hFileMappingObject,
        FileMapAccess dwDesiredAccess,
        UInt32 dwFileOffsetHigh,
        UInt32 dwFileOffsetLow,
        UIntPtr dwNumberOfBytesToMap
    );

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool UnmapViewOfFile(IntPtr lpBaseAddress);

    [StructLayout(LayoutKind.Sequential)]
    public struct IMAGE_FILE_HEADER
    {
        public UInt16 Machine;
        public UInt16 NumberOfSections;
        public UInt32 TimeDateStamp;
        public UInt32 PointerToSymbolTable;
        public UInt32 NumberOfSymbols;
        public UInt16 SizeOfOptionalHeader;
        public UInt16 Characteristics;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct IMAGE_DATA_DIRECTORY
    {
        public UInt32 VirtualAddress;
        public UInt32 Size;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct IMAGE_OPTIONAL_HEADER
    {
        public UInt16 Magic;
        public Byte MajorLinkerVersion;
        public Byte MinorLinkerVersion;
        public UInt32 SizeOfCode;
        public UInt32 SizeOfInitializedData;
        public UInt32 SizeOfUninitializedData;
        public UInt32 AddressOfEntryPoint;
        public UInt32 BaseOfCode;
        public UInt32 BaseOfData;
        public UInt32 ImageBase;
        public UInt32 SectionAlignment;
        public UInt32 FileAlignment;
        public UInt16 MajorOperatingSystemVersion;
        public UInt16 MinorOperatingSystemVersion;
        public UInt16 MajorImageVersion;
        public UInt16 MinorImageVersion;
        public UInt16 MajorSubsystemVersion;
        public UInt16 MinorSubsystemVersion;
        public UInt32 Win32VersionValue;
        public UInt32 SizeOfImage;
        public UInt32 SizeOfHeaders;
        public UInt32 CheckSum;
        public UInt16 Subsystem;
        public UInt16 DllCharacteristics;
        public UInt32 SizeOfStackReserve;
        public UInt32 SizeOfStackCommit;
        public UInt32 SizeOfHeapReserve;
        public UInt32 SizeOfHeapCommit;
        public UInt32 LoaderFlags;
        public UInt32 NumberOfRvaAndSizes;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 16)]
        public IMAGE_DATA_DIRECTORY[] DataDirectory;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct IMAGE_NT_HEADERS
    {
        public UInt32 Signature;
        public IMAGE_FILE_HEADER FileHeader;
        public IMAGE_OPTIONAL_HEADER OptionalHeader;
    }

    [DllImport("dbghelp.dll", SetLastError = true)]
    public static extern IntPtr ImageNtHeader(
        IntPtr ImageBase
    );

    [StructLayout(LayoutKind.Sequential)]
    public struct IMAGE_EXPORT_DIRECTORY
    {
        public UInt32 Characteristics;
        public UInt32 TimeDateStamp;
        public UInt16 MajorVersion;
        public UInt16 MinorVersion;
        public UInt32 Name;
        public UInt32 Base;
        public UInt32 NumberOfFunctions;
        public UInt32 NumberOfNames;
        public UInt32 AddressOfFunctions;     // RVA from base of image
        public UInt32 AddressOfNames;     // RVA from base of image
        public UInt32 AddressOfNameOrdinals;  // RVA from base of image
    }

    [DllImport("dbghelp.dll", SetLastError = true)]
    public static extern IntPtr ImageRvaToVa(
        IntPtr NtHeaders,
        IntPtr Base,
        UInt32 Rva,
        IntPtr LastRvaSection
    );
}

namespace ConsoleApplication1
{
    class Program
    {
        private static string[] GetExports(string ModuleFileName)
        {
            SafeFileHandle FileHandle = NativeMethods.CreateFile(
                ModuleFileName,
                NativeMethods.EFileAccess.GenericRead,
                NativeMethods.EFileShare.Read,
                IntPtr.Zero,
                NativeMethods.ECreationDisposition.OpenExisting,
                NativeMethods.EFileAttributes.Normal,
                IntPtr.Zero
            );
            if (FileHandle.IsInvalid)
                throw new Win32Exception();

            try
            {
                SafeFileHandle ImageHandle = NativeMethods.CreateFileMapping(
                    FileHandle,
                    IntPtr.Zero,
                    NativeMethods.FileMapProtection.PageReadonly,
                    0,
                    0,
                    IntPtr.Zero
                );
                if (ImageHandle.IsInvalid)
                    throw new Win32Exception();

                try
                {
                    IntPtr ImagePointer = NativeMethods.MapViewOfFile(
                        ImageHandle,
                        NativeMethods.FileMapAccess.FileMapRead,
                        0,
                        0,
                        UIntPtr.Zero
                    );
                    if (ImagePointer == IntPtr.Zero)
                        throw new Win32Exception();

                    try
                    {
                        IntPtr HeaderPointer = NativeMethods.ImageNtHeader(ImagePointer);
                        if (HeaderPointer == IntPtr.Zero)
                            throw new Win32Exception();

                        NativeMethods.IMAGE_NT_HEADERS Header = (NativeMethods.IMAGE_NT_HEADERS)Marshal.PtrToStructure(
                            HeaderPointer,
                            typeof(NativeMethods.IMAGE_NT_HEADERS)
                        );
                        if (Header.Signature != 0x00004550)// "PE\0\0" as a DWORD
                            throw new Exception(ModuleFileName + " is not a valid PE file");

                        IntPtr ExportTablePointer = NativeMethods.ImageRvaToVa(
                            HeaderPointer,
                            ImagePointer,
                            Header.OptionalHeader.DataDirectory[0].VirtualAddress,
                            IntPtr.Zero
                        );
                        if (ExportTablePointer == IntPtr.Zero)
                            throw new Win32Exception();
                        NativeMethods.IMAGE_EXPORT_DIRECTORY ExportTable = (NativeMethods.IMAGE_EXPORT_DIRECTORY)Marshal.PtrToStructure(
                            ExportTablePointer,
                            typeof(NativeMethods.IMAGE_EXPORT_DIRECTORY)
                        );

                        IntPtr NamesPointer = NativeMethods.ImageRvaToVa(
                            HeaderPointer,
                            ImagePointer,
                            ExportTable.AddressOfNames,
                            IntPtr.Zero
                        );
                        if (NamesPointer == IntPtr.Zero)
                            throw new Win32Exception();

                        NamesPointer = NativeMethods.ImageRvaToVa(
                            HeaderPointer,
                            ImagePointer,
                            (UInt32)Marshal.ReadInt32(NamesPointer),
                            IntPtr.Zero
                        );
                        if (NamesPointer == IntPtr.Zero)
                            throw new Win32Exception();

                        string[] exports = new string[ExportTable.NumberOfNames];
                        for (int i = 0; i < exports.Length; i++)
                        {
                            exports[i] = Marshal.PtrToStringAnsi(NamesPointer);
                            NamesPointer += exports[i].Length + 1;
                        }

                        return exports;
                    }
                    finally
                    {
                        if (!NativeMethods.UnmapViewOfFile(ImagePointer))
                            throw new Win32Exception();
                    }
                }
                finally
                {
                    ImageHandle.Close();
                }
            }
            finally
            {
                FileHandle.Close();
            }
        }

        static void Main(string[] args)
        {
            foreach (string s in GetExports(@"C:\Windows\System32\kernel32.dll"))
            {
                Console.WriteLine(s);
            }
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:53:37.783

您需要使用 P/Invoke 来访问 C++ 函数。我建议您查看[如何使用 P/Invoke](http://msdn.microsoft.com/en-us/library/aa446536.aspx)和[http://www.pinvoke.net/](http://www.pinvoke.net/)（有很多标准 dll 的资源），因为 P/Invoke 的主题在这里涉及的内容有点多。

这是一个如何使用 DbgHelp dll 从加载的模块中获取符号的示例。`dummy3.dll`是我用 C++ 创建的虚拟 dll，.net dll 没有任何符号。如果我理解正确，那是因为它们只包含一大块字节码。如果您要枚举所有已加载的模块，您可能希望`SymEnumerateModules64`像[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679319%28v=vs.85%29.aspx)描述的那样使用：

```
using System;
using System.Collections;
using System.Linq;
using System.Text;

using System.Diagnostics;
using System.Runtime.InteropServices;

namespace dummy
{
    class Program
    {
        static bool EnumSymProc(ref DbgHelp.SYMBOL_INFO pSymInfo,
            UInt32 SymbolSize,
            IntPtr UserContext)
        {
            Console.WriteLine(pSymInfo.Address + " " + SymbolSize + " " + pSymInfo.Name);
            return true;
        }

        static void Main(string[] args)
        {
            Process process = Process.GetCurrentProcess();
            ulong BaseOfDll;
            string Mask = "*";
            bool status;

            status = DbgHelp.SymInitialize(process.Handle, null, false);
            if (status == false)
            {
                return;
            }

            BaseOfDll = DbgHelp.SymLoadModuleEx(process.Handle,
                                        IntPtr.Zero,
                                        "dummy3.dll",
                                        null,
                                        IntPtr.Zero,
                                        0,
                                        IntPtr.Zero,
                                        0);

            if (BaseOfDll == 0)
            {
                DbgHelp.SymCleanup(process.Handle);
                return;
            }

            if (DbgHelp.SymEnumSymbols(process.Handle,     // Process handle from SymInitialize.
                                BaseOfDll,   // Base address of module.
                                Mask,        // Name of symbols to match.
                                new DbgHelp.SymEnumSymbolsProc(EnumSymProc), // Symbol handler procedure.
                                IntPtr.Zero))       // User context.
            {
                // SymEnumSymbols succeeded
            }
            else
            {
                // SymEnumSymbols failed
                Console.WriteLine("SymEnumSymbols failed: " + Marshal.GetLastWin32Error());
            }

            DbgHelp.SymCleanup(process.Handle);
        }
    }

    public static class DbgHelp
    {
        [Flags]
        public enum SymOpt : uint
        {
            CASE_INSENSITIVE = 0x00000001,
            UNDNAME = 0x00000002,
            DEFERRED_LOADS = 0x00000004,
            NO_CPP = 0x00000008,
            LOAD_LINES = 0x00000010,
            OMAP_FIND_NEAREST = 0x00000020,
            LOAD_ANYTHING = 0x00000040,
            IGNORE_CVREC = 0x00000080,
            NO_UNQUALIFIED_LOADS = 0x00000100,
            FAIL_CRITICAL_ERRORS = 0x00000200,
            EXACT_SYMBOLS = 0x00000400,
            ALLOW_ABSOLUTE_SYMBOLS = 0x00000800,
            IGNORE_NT_SYMPATH = 0x00001000,
            INCLUDE_32BIT_MODULES = 0x00002000,
            PUBLICS_ONLY = 0x00004000,
            NO_PUBLICS = 0x00008000,
            AUTO_PUBLICS = 0x00010000,
            NO_IMAGE_SEARCH = 0x00020000,
            SECURE = 0x00040000,
            SYMOPT_DEBUG = 0x80000000
        };

        [Flags]
        public enum SymFlag : uint
        {
            VALUEPRESENT = 0x00000001,
            REGISTER = 0x00000008,
            REGREL = 0x00000010,
            FRAMEREL = 0x00000020,
            PARAMETER = 0x00000040,
            LOCAL = 0x00000080,
            CONSTANT = 0x00000100,
            EXPORT = 0x00000200,
            FORWARDER = 0x00000400,
            FUNCTION = 0x00000800,
            VIRTUAL = 0x00001000,
            THUNK = 0x00002000,
            TLSREL = 0x00004000,
        }

        [Flags]
        public enum SymTagEnum : uint
        {
            Null,
            Exe,
            Compiland,
            CompilandDetails,
            CompilandEnv,
            Function,
            Block,
            Data,
            Annotation,
            Label,
            PublicSymbol,
            UDT,
            Enum,
            FunctionType,
            PointerType,
            ArrayType,
            BaseType,
            Typedef,
            BaseClass,
            Friend,
            FunctionArgType,
            FuncDebugStart,
            FuncDebugEnd,
            UsingNamespace,
            VTableShape,
            VTable,
            Custom,
            Thunk,
            CustomType,
            ManagedType,
            Dimension
        };

        [Flags]
        public enum SymType : uint
        {
            SymNone,
            SymCoff,
            SymCv,
            SymPdb,
            SymExport,
            SymDeferred,
            SymSym,
            SymDia,
            SymVirtual,
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct SYMBOL_INFO
        {
            public uint SizeOfStruct;
            public uint TypeIndex;
            public ulong Reserved1;
            public ulong Reserved2;
            public uint Reserved3;
            public uint Size;
            public ulong ModBase;
            public SymFlag Flags;
            public ulong Value;
            public ulong Address;
            public uint Register;
            public uint Scope;
            public SymTagEnum Tag;
            public int NameLen;
            public int MaxNameLen;

            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 1024)]
            public string Name;
        };

        [StructLayout(LayoutKind.Sequential)]
        public struct MODLOAD_DATA
        {
            UInt32 ssize;
            UInt32 ssig;
            object data;
            UInt32 size;
            UInt32 flags;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct _IMAGEHLP_LINE64
        {
            public uint SizeOfStruct;
            public uint Key;
            public uint LineNumber;
            public IntPtr FileName;
            public ulong Address;
        };

        [StructLayout(LayoutKind.Sequential)]
        public struct IMAGEHLP_MODULE64
        {
            public uint SizeOfStruct;
            public ulong BaseOfImage;
            public uint ImageSize;
            public uint TimeDateStamp;
            public uint CheckSum;
            public uint NumSyms;
            public SymType SymType;
            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
            public string ModuleName;
            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
            public string ImageName;
            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
            public string LoadedImageName;
            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
            public string LoadedPdbName;
            public uint CVSig;
            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 780)]
            public string CVData;
            public uint PdbSig;
            public Guid PdbSig70;
            public uint PdbAge;
            public bool PdbUnmatched;
            public bool DbgUnmatched;
            public bool LineNumbers;
            public bool GlobalSymbols;
            public bool TypeInfo;
            public bool SourceIndexed;
            public bool Publics;
        }

        public delegate bool SymEnumSymbolsProc(ref SYMBOL_INFO pSymInfo, uint SymbolSize, IntPtr UserContext);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymInitialize(IntPtr hProcess, string UserSearchPath, bool fInvadeProcess);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern uint SymSetOptions(SymOpt SymOptions);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern ulong SymLoadModule64(IntPtr hProcess, IntPtr hFile,
           string ImageName, string ModuleName,
           ulong BaseOfDll, uint SizeOfDll);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern ulong SymLoadModuleEx(IntPtr hProcess, IntPtr hFile,
            string ImageName, string ModuleName, IntPtr BaseOfDll,
            UInt32 DllSize, ref MODLOAD_DATA Data, UInt32 Flags);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern ulong SymLoadModuleEx(IntPtr hProcess, IntPtr hFile,
            string ImageName, string ModuleName, IntPtr BaseOfDll,
            UInt32 DllSize, IntPtr Data, UInt32 Flags);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymGetModuleInfo64(IntPtr hProcess, ulong dwAddress, ref IMAGEHLP_MODULE64 ModuleInfo);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymEnumSymbols(IntPtr hProcess, ulong BaseOfDll, string Mask, SymEnumSymbolsProc EnumSymbolsCallback, IntPtr UserContext);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymGetLineFromAddr64(IntPtr hProcess,
           ulong dwAddr, ref uint pdwDisplacement, ref _IMAGEHLP_LINE64 Line);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymFromAddr(IntPtr hProcess,
           ulong dwAddr, ref ulong pdwDisplacement, ref SYMBOL_INFO symbolInfo);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymEnumSymbolsForAddr(IntPtr hProcess,
           ulong Address, SymEnumSymbolsProc EnumSymbolsCallback, IntPtr UserContext);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymUnloadModule64(IntPtr hProcess, ulong BaseOfDll);

        [DllImport("dbghelp.dll", SetLastError = true)]
        public static extern bool SymCleanup(IntPtr hProcess);
    }
} 
```

# python - ValueError 安装 python/django 项目

> ID：12656739
> 
> 赞同：0
> 
> 时间：2012-09-29T21:41:58.403
> 
> 标签：python, django

我正在从 github (https://github.com/sunlightlabs/publicmarkup) 安装一个 python 项目，我收到以下错误消息：

```
File "/usr/local/lib/python2.7/dist-packages/django/core/servers/basehttp.py", line 283, in run
    self.result = application(self.environ, self.start_response)

  File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/handlers.py", line 68, in __call__
    return self.application(environ, start_response)

  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 273, in __call__
    response = self.get_response(request)

  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 169, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())

  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 214, in handle_uncaught_exception
    if resolver.urlconf_module is None:

  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py", line 274, in _get_urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)

  File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)

  File "/home/mbenchoufi/git/publicmarkup/../publicmarkup/urls.py", line 5, in <module>
    add_to_builtins('mediasync/templatetags/media')

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 1016, in add_to_builtins
    builtins.append(import_library(module))

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 951, in import_library
    app_path, taglib = taglib_module.rsplit('.',1)

ValueError: need more than 1 value to unpack 
```

我是python的新手，这个错误信息是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:47:59.760

`add_to_builtins`调用不正确，`publicmarkup/urls.py`应该*是*：

```
add_to_builtins('mediasync.templatetags.media') 
```

Python 包是点分隔的，作者使用了路径。

稍后，Django 框架尝试加载模块，并在最后一个点失败后拆分姓氏，因为原始调用中没有点。

看起来您尝试加载的项目从根本上被破坏了。它可能还会有其他错误。

# php - 有效的区分大小写的正则表达式

> ID：12656743
> 
> 赞同：0
> 
> 时间：2012-09-29T21:42:05.500
> 
> 标签：php, regex, case-sensitive

`/[u=|&l=|&dl=|&f=]/i`我试图通过很多可能的解决方案（等等）将此正则表达式更改为区分大小写，但我没有让它按我想要的方式工作。

`u=`, `&l=`, `&dl=`, 和`&f=`取自`profile-photos.php?u=edgren&dl=`。例如，我使用此正则表达式仅获取用户名`edgren`并识别其他 GET（l、dl 和 f）；

`Looking at <a href="'.url('user/'.$profile).'">'.properize($profile).'</a> '.(isset($_GET['l']) ? 'likes' : (isset($_GET['dl']) ? 'dislikes' : 'favorites'))`它使用 URL 打印“正在查看 edgrens 不喜欢” `profile-photos.php?u=edgren&dl=`。

如果 GET 是 &dl= 这是错误的，我现在拥有的正则表达式会打印`egren`（[例如 regexpal.com 上的示例）。](http://regexpal.com/?flags=g&regex=%28%5Bu%3D%7C%26l%3D%7C%26dl%3D%7C%26f%3D%5D%2B%29&input=u%3Dedgren%26dl%3D)我想打印整个用户名而不是它的一半，可以这么说。

我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:08:23.893

您将交替与字符类混淆了。如果要匹配多个字符串之一，请使用圆括号：`(u=|&l=|&dl=|&f=)`. 方括号用于字符类（其含义是“匹配**一个**字符，如果它是这些方括号之间指定的字符之一”）。

还`i`使正则表达式明确区分大小写**。**

# iis-7.5 - 尝试启动 WebMatrix 时出现 IIS 错误

> ID：12656744
> 
> 赞同：5
> 
> 时间：2012-09-29T21:42:06.807
> 
> 标签：iis-7.5, webmatrix

当我尝试启动 WebMatrix 时，我收到一条警告说“IIS Express 无法初始化。请确保它已正确安装和配置。”

我已经卸载并重新安装了 IIS Express 和 WebMatrix，但这种行为没有改变。我在网上找到的建议是假设拥有 HKEY_CLASSES_ROOT\Microsoft.IIS.VersionManager 注册表项，并将所有子对象权限替换为该注册表项中的权限。这似乎没有帮助。

在事件查看器中，每当 iisexpresstray.exe 或 webmatrix.exe 尝试启动时，我都可以看到 .net 运行时异常：

> *   系统
>     
>     
>     *   提供者 [名称] .NET 运行时
>     *   EventID 1026 [限定符] 0 级别 2 任务 0 关键字 0x80000000000000
>     *   TimeCreated [ SystemTime] 2012-09-29T21:28:02.000000000Z EventRecordID 162768 通道应用程序安全
> *   EventData 应用程序：iisexpresstray.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.ArgumentNullException >堆栈：在 Microsoft.Web.VersionManager.IisExpressVersion.Dispose(Boolean) 在 Microsoft.Web.VersionManager.IisVersion.Finalize() 的 System.Runtime.InteropServices.Marshal.FinalReleaseComObject(System.Object)

对于诊断和解决此问题的任何帮助，我将不胜感激。WebMatrix 对我即将提出的一个项目来说几乎是必不可少的。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T13:39:34.223

出于某种原因，安装 IIS 8 Express 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T23:49:34.253

只是想指出我也有这个问题。根据之前的建议，我下载了 IIS 8 Express。它没有安装，但给了我一个修复的机会（所以我假设 WebMatrix 安装了它）。我选择了修复按钮并重新启动了 WebMatrix。我不再收到上述错误。

# c++ - 链表的循环遍历

> ID：12656745
> 
> 赞同：0
> 
> 时间：2012-09-29T21:42:11.960
> 
> 标签：c++, data-structures, linked-list

因此，我的一项功能遇到了一些麻烦。程序（用 C++ 编写）玩游戏，有很多玩家坐在桌旁。每次调用我的 play 函数时，它都应该向控制台显示游戏中的玩家。每次调用它都应该按顺序显示玩家。在它击中最后一个玩家后，它将从列表/表格的开头重新开始。无效的 CircleList::play()

```
LinkedListOfPlayersNode *p=(*pFront).pNext;
if (p->pData!=NULL)
{
    cout<<p->pData->getName()+" takes a turn\n";

    pLastPlayer = pLastPlayer->pNext;
}
else
{
    cout<<"There are no players. Please ADD a player.\n";
}

} 
```

所以假设我们添加了 A、B 和 C。当你使用 PLAY 命令时，C 应该转弯，然后是 B，然后是 A。现在使用上面的代码，它会显示 C Takes a Turn，但是，它在那之后立即崩溃。那么我的代码有什么问题？有没有更好的方法来写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:01:06.977

我很确定您希望遍历看起来像这样：

```
LinkedListOfPlayersNode *p = pNextPlayer ? pNextPlayer : pFront;

if (p && p->pData) // not sure why pData is also dynamic. look into that.
{
    cout<<p->pData->getName()+" takes a turn\n";
    pNextPlayer = p->pNext;
}
else
{
    cout<<"There are no players. Please ADD a player.\n";
} 
```

每次轮到一名球员时，他们都会接受，下一名球员是该球员的下一个指针。当牌桌上的最后一个玩家轮到时，p->pNext 将为空，并且下一次调用将重置为列表的头部。

至少那是我*认为*你想要得到的地方。将`pNextPlayer`其设置为`pFront`或`NULL`; 没什么区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:47:16.623

您在 C++ 中，使用 std::list 比编写自己的实现更好。

有些事情困扰着我：为什么你用“p = (*pFront).pNext”开始循环，而不是直接用“p = pFront”开始循环？

您如何将节点添加到列表中？您应该在“C 转弯”之前回显“A 转弯”。

如果您确实要添加到列表的前面（并且您的列表是双向链接的），您应该调用 pPrevious 而不是 pNext。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T21:55:36.333

假设您最初`pnext = NULL`在创建节点时定义。

所以根据你的代码；

```
if (p->pData!=NULL)
{
    cout<<p->pData->getName()+" takes a turn\n";
    pLastPlayer = pLastPlayer->pNext;
}
else
{
    cout<<"There are no players. Please ADD a player.\n";
} 
```

根据我的假设有两种情况： 1.`p`并且`pLastPlayer`是相同的......所以在列表结束之后。`p`将等于`NULL`，您的代码将在尝试取消引用时崩溃`p->pData`。2.`p`并且`pLastPlayer`是不同的......所以在列表`pLastPlayer`结束后，代码将崩溃，`pLastPlayer = pLastPlayer -> pNext();`因为您可能正在取消引用垃圾或`NULL`值；

您需要在某个时候检查 NULL 指针，无论是 in`p -> pData != NULL`还是`pLastPlayer = pLastPlayer -> pNext();`

# java - 使用java从servlet获取标签的值

> ID：12656747
> 
> 赞同：0
> 
> 时间：2012-09-29T21:42:20.520
> 
> 标签：java, servlets

我想知道如何从 Java 中的请求 servlet 中获取标签的值。`getParameter(nameOfLabel)`对这个有用吗？或者它只适用于输入？无论如何，我想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:34:36.943

您可以使用标签创建一个隐藏`input`的：`value`

```
<input type="hidden" value="labelValue" name="labelName" /> 
```

然后用`getParameter("labelName")`它来获取它的值。

# android - SQL 表未找到异常

> ID：12656751
> 
> 赞同：-2
> 
> 时间：2012-09-29T21:43:13.553
> 
> 标签：android, sqlite, runtime-error

我已经创建了一个表及其字段，但我得到错误，不存在这样的行，如果我将它们注释掉，那么它没有检测到表也显示不存在这样的表。这是代码：

```
package com.example.ifest;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHandler extends SQLiteOpenHelper{

private static final String DB_NAME = "event_db";
private static final int DB_VERSION = 1;
private static final String TABLE_NAME = "_table";
private static final String EVENT_NAME = "_name" ;
private static final String EVENT_ID = "_no" ;
private static final String EVENT_TYPE = "_type" ;

public DBHandler(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + EVENT_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " 
                + EVENT_NAME + " TEXT NOT NULL, " + EVENT_TYPE + " TEXT NOT NULL);" );
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    onCreate(db);        
} 
```

我的其他活动的代码是：

`public class ProfileView extends ListActivity{`

 ````
String e,e1;
static int p = 0;
Spinner spn ;
Button b1,b2;
EditText et;
String str1;
ArrayList<String> list = new ArrayList<String>();
ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 
    list.add("Create");
    openDB();
    p++;

    adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,list);
    setListAdapter(adapter);      
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    if(position == 0){
        final Dialog build = new Dialog(ProfileView.this);
        build.setTitle("String Name and Details");
        build.setContentView(R.layout.activity_dialog);
        build.show();
        spn = (Spinner)build.findViewById(R.id.spinner1_Dialog);
        et = (EditText) build.findViewById(R.id.editText1_Dialog);
        b2 = (Button) build.findViewById(R.id.button1_Dialog);
        b2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                build.dismiss();
                list.add(et.getText().toString());
                addDB(et.getText().toString(),spn.getLastVisiblePosition());
                adapter.notifyDataSetChanged();
                setListAdapter(adapter);
            }
        });
    }
}

protected void addDB(String name,int id) {
    DBHandler handle = new DBHandler(this);
    SQLiteDatabase db = handle.getWritableDatabase();
    ContentValues cv = new ContentValues();
    cv.put("_name",name);
    if(id == 0)
        cv.put("type","WIFI");
    else if(id == 1)
        cv.put("type","BLUETOOTH");
    else if(id == 2)
        cv.put("type","MEDIA");
    db.insert("_table", null , cv);
    db.close();
}

private void openDB() {
    if(p != 0){ 
        DBHandler handle = new DBHandler(this);
        SQLiteDatabase db = handle.getReadableDatabase();

        Cursor c = db.rawQuery("SELECT * FROM "+ "event_db",null);
        c.moveToFirst();
        while(c.moveToNext()){
            list.add(c.getString(1));
            Log.d("cursor", c.getString(1));
        }
    }
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflate = getMenuInflater();
    inflate.inflate(R.menu.string_main,menu);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater mi = getMenuInflater();
    mi.inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch(item.getItemId()){
    case R.id.item1:
        final Dialog build = new Dialog(ProfileView.this);
        build.setTitle("String Name and Details");
        build.setContentView(R.layout.activity_dialog);
        build.show();
        spn = (Spinner)build.findViewById(R.id.spinner1_Dialog);
        et = (EditText) build.findViewById(R.id.editText1_Dialog);
        b2 = (Button) build.findViewById(R.id.button1_Dialog);
        b2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                build.dismiss();
                list.add(et.getText().toString());
                addDB(et.getText().toString(),spn.getLastVisiblePosition());
                adapter.notifyDataSetChanged();
                setListAdapter(adapter);
            }
        });
        break;

    case R.id.item2:
        break;

    case R.id.item3:
        Intent i = new Intent("com.example.ifest.ABOUTUS");
        startActivity(i);
        break;

    case R.id.item4:
        finish();
        break;
    }
    return true;
} 
```` 

`}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:58:53.670

您正在查询作为**数据库**`event_db`名称的表，而不是您的**表**

 ****```
Cursor c = db.rawQuery("SELECT * FROM "+ "event_db",null); 
```

你应该查询`_table`表

```
Cursor c = db.rawQuery("SELECT * FROM "+ "_table",null); 
```

顺便说一句，如果你命名你的数据库`db`（我怀疑你需要多个数据库）和你的表`_event`（你可以有很多表，你应该根据它们的角色而不是仅仅命名它们`_table`）会更清楚

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T22:00:44.060

您在 contentvalue 上使用“type”，但您的列名为：“_type”。****

# javascript - 地图图像未正确显示

> ID：12656752
> 
> 赞同：0
> 
> 时间：2012-09-29T21:43:18.963
> 
> 标签：javascript, api, google-maps, google-maps-api-3

我正在使用 Google API 在我的网站中显示地图，但显示不正确。

Api 链接：[https ://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

这是我调用google api的代码。

```
var latlng = new google.maps.LatLng(latitude, longitude);
var mapOptions = {
       zoom: 6,
       center: latlng,
       mapTypeId: google.maps.MapTypeId.ROADMAP,
       zoomControl: true,
       mapTypeControl: true,
       mapMaker:true
     };
var mapInstance = new google.maps.Map(document.getElementById("map"), mapOptions);
var marker = new google.maps.Marker({
      map:mapInstance,
      draggable:true,
      animation: google.maps.Animation.DROP,
      position: latlng
}); 
```

看到一条垂直的白线来了。如何删除那条线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:12:07.420

例如，确保你有一个完整的 DOCTYPE

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

将 body 和 html 标签都设置为 100% 高度

```
<style> 
html, body

{ height: 100%; width: 100%; margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px; overflow: hidden; }
</style> 
```

出于好奇……这会在所有浏览器中显示还是仅在 IE 上显示。你能检查火狐吗？

# java - java中的升序和降序数字顺序

> ID：12656753
> 
> 赞同：7
> 
> 时间：2012-09-29T21:43:27.763
> 
> 标签：java

我在java中做一个升序和降序编号，这是我的代码：

```
System.out.print("Enter How Many Inputs: ");
int num1 = Integer.parseInt(in.readLine());
int arr[] = new int[num1];

for (int i = 0; i<num1; i++) {
    System.out.print("Enter Value #" + (i + 1) + ":");
    arr[i] =Integer.parseInt(in.readLine());
}

System.out.print("Numbers in Ascending Order:" );

for(int i = 0; i < arr.length; i++) {
    Arrays.sort(arr);
    System.out.print( " " +arr[i]);
}

System.out.println(" ");
System.out.print("Numbers in Descending Order: " ); 
```

目前，代码生成以下内容：

```
Enter How Many Inputs: 5
Enter Value #1:3
Enter Value #2:5
Enter Value #3:6
Enter Value #4:11
Enter Value #5:2
Numbers in Ascending Order: 2 3 5 6 11 
Numbers in Descending Order: 
```

因此，该`Arrays.sort(arr)`调用似乎有效-但我正在寻找一种类似的简单方法来提供降序排序，但在文档中找不到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T21:53:28.940

我想到了三种可能的解决方案：

*1.颠倒顺序：*

```
//convert the arr to list first
Collections.reverse(listWithNumbers);
System.out.print("Numbers in Descending Order: " + listWithNumbers); 
```

*2\. 向后迭代并打印：*

```
Arrays.sort(arr);
System.out.print("Numbers in Descending Order: " );
for(int i = arr.length - 1; i >= 0; i--){
  System.out.print( " " +arr[i]);
} 
```

*3\. 使用“相反”比较器对其进行排序：*

```
Arrays.sort(arr, new Comparator<Integer>(){
   int compare(Integer i1, Integer i2) {
      return i2 - i1;
   }
});
// or Collections.reverseOrder(), could be used instead
System.out.print("Numbers in Descending Order: " );
for(int i = 0; i < arr.length; i++){
  System.out.print( " " +arr[i]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-23T07:32:43.157

```
public static void main(String[] args) {
          Scanner input =new Scanner(System.in);
          System.out.print("enter how many:");
         int num =input.nextInt();
    int[] arr= new int [num];
    for(int b=0;b<arr.length;b++){
   System.out.print("enter no." + (b+1) +"=");
   arr[b]=input.nextInt();
    }

    for (int i=0; i<arr.length;i++) {
        for (int k=i;k<arr.length;k++) {

        if(arr[i] > arr[k]) {

        int temp=arr[k];
        arr[k]=arr[i];
        arr[i]=temp;
        }
            }

    }
    System.out.println("******************\n output\t accending order");

    for (int i : arr){
        System.out.println(i);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:29:05.720

你可以让两个函数一个用于升序，另一个用于降序接下来的两个函数在将数组转换为列表后工作

```
public List<Integer> sortDescending(List<Integer> arr){
    Comparator<Integer> c = Collections.reverseOrder();
    Collections.sort(arr,c);
    return arr;
  } 
```

下一个功能

```
public List<Integer> sortAscending(List<Integer> arr){   
    Collections.sort(arr);
    return arr;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T21:54:01.200

您为什么要使用`array`和烦恼第一个问题是通缉号码的数量？

首选`ArrayList`与相应比较器关联的一个：

```
List numbers = new Arraylist();
//add read numbers (int (with autoboxing if jdk>=5) or Integer directly) into it

//Initialize the associated comparator reversing order. (since Integer implements Comparable)
Comparator comparator = Collections.reverseOrder();

//Sort the list
Collections.sort(numbers,comparator); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-22T11:56:36.750

```
int arr[] = { 12, 13, 54, 16, 25, 8, 78 };

for (int i = 0; i < arr.length; i++) {
    Arrays.sort(arr);
    System.out.println(arr[i]);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-14T04:19:07.600

```
package pack2;

import java.util.Scanner;

public class group {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner data= new Scanner(System.in);
    int value[]= new int[5];
    int temp=0,i=0,j=0;
    System.out.println("Enter 5 element of array");
    for(i=0;i<5;i++)
    value[i]=data.nextInt();
     for(i=0;i<5;i++)
     {
     for(j=i;j<5;j++)
     {
      if(value[i]>value[j])
      {
       temp=value[i];
       value[i]=value[j];
       value[j]=temp;
      }
     }

     }
      System.out.println("Increasing Order:");
      for(i=0;i<5;i++)
           System.out.println(""+value[i]); 
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T21:46:20.083

像以前一样对数组进行排序，但以相反的顺序打印元素，使用倒数而不是递增的循环。

此外，将排序移出循环 - 当您只需要对数组进行一次排序时，您当前正在一遍又一遍地对数组进行排序。

```
 Arrays.sort(arr);
                for(int i = 0; i < arr.length; i++){
                    //Arrays.sort(arr); // not here
                    System.out.print( " " +arr[i]);
                }
                for(int i = arr.length-1; i >= 0; i--){
                    //Arrays.sort(arr); // not here
                    System.out.print( " " +arr[i]);
                } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-29T21:46:26.707

只需按升序对数组进行排序并向后打印即可。

```
Arrays.sort(arr);
for(int i = arr.length-1; i >= 0 ; i--) {
    //print arr[i]
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-29T21:46:37.143

您可以先对数组进行排序，然后在两个方向上循环两次：

```
Arrays.sort(arr); 
System.out.print("Numbers in Ascending Order:" ); 
for(int i = 0; i < arr.length; i++){ 
  System.out.print( " " + arr[i]); 
} 
System.out.print("Numbers in Descending Order: " ); 
for(int i = arr.length - 1; i >= 0; i--){ 
  System.out.print( " " + arr[i]); 
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-29T21:48:04.663

```
Arrays.sort(arr, Collections.reverseOrder());
for(int i = 0; i < arr.length; i++){
    System.out.print( " " +arr[i]);
} 
```

并移出`Arrays.sort()`那个 for 循环..您在每次迭代中对相同的数组进行排序..

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-29T21:53:03.277

您可以采用升序数组并以相反的顺序输出，因此将第二个 for 语句替换为：

```
for(int i = arr.length - 1; i >= 0; i--) {
    ...
} 
```

如果类路径上有 Apache 的 commons-lang，它有一个可以使用的方法 ArrayUtils.reverse(int[])。

顺便说一句，您可能不想在 for 循环的每个循环中对其进行排序。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-26T10:04:40.600

使用反向 for 循环以降序打印，

```
for (int i = ar.length - 1; i >= 0; i--) {
    Arrays.sort(ar);
    System.out.println(ar[i]);
} 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2017-11-29T18:05:41.690

我以这种方式完成了它（我是java新手（也在编程中））

```
import java.util.Scanner; 
```

公共类 SortingNumbers {

```
public static void main(String[] args) {
    Scanner scan1=new Scanner(System.in);
    System.out.print("How many numbers you want to sort: ");
    int a=scan1.nextInt();

    int i,j,k=0; // i and j is used in various loops.
    int num[]=new int[a];
    int great[]= new int[a];    //This array elements will be used to store "the number of being greater."  

    Scanner scan2=new Scanner(System.in);
    System.out.println("Enter the numbers: ");

    for(i=0;i<a;i++)    
        num[i] = scan2.nextInt();

    for (i=0;i<a;i++) {
        for(j=0;j<a;j++) {
            if(num[i]>num[j])   //first time when executes this line, i=0 and j=0 and then i=0;j=1 and so on. each time it finishes second for loop the value of num[i] changes.
                k++;} 
    great[i]=k++;  //At the end of each for loop (second one) k++ contains the total of how many times a number is greater than the others.
    k=0;}  // And then, again k is forced to 0, so that it can collect (the total of how many times a number is greater) for another number.

    System.out.print("Ascending Order: ");
    for(i=0;i<a;i++)
        for(j=0;j<a;j++)
            if(great[j]==i) System.out.print(num[j]+","); //there is a fixed value for each great[j] that is, from 0 upto number of elements(input numbers).
    System.out.print("Discending Order: ");
    for(i=0;i<=a;i++)
        for(j=0;j<a;j++)
            if(great[j]==a-i) System.out.print(+num[j]+",");
} 
```

}

# lisp - 在 Scheme 中返回副作用的约定是什么？

> ID：12656762
> 
> 赞同：1
> 
> 时间：2012-09-29T21:44:26.457
> 
> 标签：lisp, scheme, sicp

我正在浏览麻省理工学院*计算机程序的结构和解释*视频讲座系列，我有一个关于从函数返回副作用的快速问题。

在[视频 3A](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-001-structure-and-interpretation-of-computer-programs-spring-2005/video-lectures/3a-henderson-escher-example/)中，教授写了一个`for-each`与此类似的快速方程式：

```
(define (for-each p l)
   (if (null? l)
      "done"
      (p (car l)
         (for-each p (cdr l))))) 
```

是否有从 Scheme 中的函数返回副作用的特定约定，或者是`"done"`任意选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:47:45.623

这并不是真正的*副作用*，而是每个 Scheme 函数都必须返回一些东西。字符串`"done"`是东西。通常，当您打电话时，`for-each`您可能会执行以下操作：

```
(for-each (lambda (x) (display x)) lst) 
```

并忽略 的返回值`for-each`。作者可以很容易地选择从基本情况返回的任何其他值。

# c# - MVC3 razor 无需注册即可创建用户

> ID：12656763
> 
> 赞同：0
> 
> 时间：2012-09-29T21:44:28.420
> 
> 标签：c#, visual-studio-2010, razor

我有一个 MVC3 剃须刀页面，它使用登录视图并注册有效（并写入我创建的数据库）。但是我想在不使用注册功能的情况下创建用户。有没有办法使用 Visual Studio 2010 做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:52:58.520

要以编程方式创建用户（这是我认为您所要求的），请使用您的[会员资格](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)提供程序。

```
Membership.CreateUser(... params) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:47:18.783

如果您的意思是，Visual Studio 是否提供了允许您执行此操作的用户界面？答案是……也许吧。

如果您使用的是标准 SqlMembershipProvider，那么可以。有一种叫做网站管理员工具的东西，您可以使用它来创建用户、角色等。

[http://en.wikipedia.org/wiki/ASP.NET_Web_Site_Administration_Tool](http://en.wikipedia.org/wiki/ASP.NET_Web_Site_Administration_Tool)

但是，请注意，如果您不使用标准的 SqlMembershipProvider，它可能无法正常工作。Visual Studio 2012 提供的默认项目模板就是这种情况，它使用 SimpleMembership 而不是 SqlMembership。

如果您的意思是是否有一个 API 可以让您创建用户……请考虑一下。您的网站如何注册用户？看代码。这是相同的API。

# markdown - 我添加了一个降价文件，但我不想发布它

> ID：12656765
> 
> 赞同：2
> 
> 时间：2012-09-29T21:45:08.383
> 
> 标签：markdown, octopress

我曾经`rake new_post["title"]`在 _post 目录中生成一个新的降价文件，但我不想在完成之前发布这篇文章。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T01:29:23.360

添加`published: false`到降价文件顶部的元数据。

一些旧版本的 Octopress 仍会以预览模式显示帖子。但是当您生成和部署站点时，`published: false`将不会发布带有的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:33:35.950

`rake new_post`不会发布页面。下面给出的是相同的源代码。

```
# usage rake new_post[my-new-post] or rake new_post['my new post'] or rake new_post (defaults to "new-post")
desc "Begin a new post in #{source_dir}/#{posts_dir}"
task :new_post, :title do |t, args|
  raise "### You haven't set anything up yet. First run `rake install` to set up an Octopress theme." unless File.directory?(source_dir)
  mkdir_p "#{source_dir}/#{posts_dir}"
  args.with_defaults(:title => 'new-post')
  title = args.title
  filename = "#{source_dir}/#{posts_dir}/#{Time.now.strftime('%Y-%m-%d')}-#{title.to_url}.#{new_post_ext}"
  if File.exist?(filename)
    abort("rake aborted!") if ask("#{filename} already exists. Do you want to overwrite?", ['y', 'n']) == 'n'
  end
  puts "Creating new post: #{filename}"
  open(filename, 'w') do |post|
    post.puts "---"
    post.puts "layout: post"
    post.puts "title: \"#{title.gsub(/&/,'&amp;')}\""
    post.puts "date: #{Time.now.strftime('%Y-%m-%d %H:%M')}"
    post.puts "comments: true"
    post.puts "categories: "
    post.puts "---"
  end
end 
```

对文件进行更改后，您可以调用`rake generate`(Generates posts and pages into the public directory) 。

# android - 使用 phonegap 播放流直播 url aac+ 流

> ID：12656768
> 
> 赞同：-2
> 
> 时间：2012-09-29T21:45:28.620
> 
> 标签：android, cordova, phonegap-plugins, aac, shoutcast

嗨，有人知道如何使用 acc+ 广播 URL 流式传输音频吗？我试过这段代码：

**http://pastebin.ca/2228987**

但没有运气，我知道有类似 npr-android-app 或 tunein 的东西使用类似的媒体代理，但可以集成像那些应用程序这样的代理但使用 phonegap？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:33:26.650

我开始在 eclipse 中使用本机编码，我实现了我的目标。

# c# - 如何将控件渲染到图像？

> ID：12656769
> 
> 赞同：4
> 
> 时间：2012-09-29T21:45:37.357
> 
> 标签：c#, windows-8, windows-runtime, bitmapimage, windows-store-apps

我想将网格渲染为图像，以便在我的 Windows 8 Metro Style App 中的动态磁贴上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:04:47.727

现在没有办法从控件渲染图像。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/752372e6-7208-4d92-924c-97177182a69f](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/752372e6-7208-4d92-924c-97177182a69f)

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T00:03:32.050

由于 WinRT 中缺少 WriteableBitmap.Render()，因此您的选项是 WriteableBitmapEx (CodePlex)，或者如果您需要字体 - Direct2D（感谢 SharpDX，您可以从 C# 中使用它）。

# php - php 仅在受 shibboleth 保护的目录中不被解释

> ID：12656780
> 
> 赞同：0
> 
> 时间：2012-09-29T21:46:46.667
> 
> 标签：php, apache, ssl, shibboleth

我到处寻找答案，但没有成功。

我在我的 OSX Web 服务器上安装了 PHP。当我访问 myserver.com/test.php 时，一切正常。

但是，我有一个由 mod_shib 和 shibd 保护的子目录，名为 /shibboleth/

当我将完全相同的 test.php 文件放入 /shibboleth/ 时，它会返回给浏览器而不是解释。我弄乱了 AddType 和 AddHandler 的一百万种组合；我已经检查过我正在使用

这是我的 httpd.conf 文件的相关部分：

```
<VirtualHost *:443>
SSLEngine on
SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
ServerName jeesty.homeip.net
DocumentRoot "/Library/WebServer/Safe"
DirectoryIndex index.html index.php
DefaultType text/plain
AddType application/x-httpd-php .php
AddHandler application/x-httpd-php .php
<Directory "/Library/WebServer/Safe/">
DirectoryIndex index.html index.php
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
php_admin_flag engine on
</Directory>
<Location /shibboleth/>
SetHandler shib
AuthType shibboleth
ShibRequestSetting requireSession 1
Require valid-user
php_admin_flag engine on
</Location>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:55:55.067

如果目录是字面上`/shibboleth`的 ，那么它在 的文档根目录之外`/Library/WebServer`，因此不会继承在`httpd.conf`.

# geolocation - 用户拒绝一次后如何再次请求用户使用地理定位的权限？

> ID：12656782
> 
> 赞同：4
> 
> 时间：2012-09-29T21:47:06.023
> 
> 标签：geolocation, windows-8, winjs

在 Windows 8 中，javascript Metro 应用程序中，如果用户拒绝使用 Geolocation 的权限，则该权限始终被拒绝。

也许用户在第一次使用应用程序时拒绝使用地理定位，但后来可能愿意允许使用地理定位，因为建立了信任。但我找不到如何再次请求许可。

即使在 Win8 Geolocation 示例中，一旦权限被拒绝，它就会一直被拒绝，并且无法再次请求权限。

是否可以再次向用户请求权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:19:47.593

您始终可以通过浮出控件或消息对话框提示用户，只是无法启动地理位置查询并导致核心功能问题触发。用户很快就会了解到，这些功能可以在您的应用程序中进行配置。权限弹出，您甚至可以将他们指向那里以更改他们的答案。

换句话说，我认为平台正在避免用户说“你让我一个人呆着吗？！我不想打扰我的隐私！”的场景。如果开发人员对他的工作流程很小心，那么我怀疑很难避免用户说“嘿！我想让这个应用程序更智能地了解我的位置，但我不知道如何启用它。 " 主观的我知道，但你可以看到它是如何有利于用户的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:15:32.057

你可以做一个 Toast 通知，但就像 Jeremy 说的，如果你讨厌它，你可能会把用户赶走。

# hadoop - 使用哪个 hadoop 版本？

> ID：12656784
> 
> 赞同：8
> 
> 时间：2012-09-29T21:47:35.517
> 
> 标签：hadoop

hadoop in action 和权威指南，都是从 mapred 类建立的。大多数这些类在 0.20.2 中已被弃用。新类的签名不同。谁能告诉我所做的各种更改。例如，partitioner 类已被弃用。新的减速器将如何提供其功能。0.20.2 中发生的概念变化

我应该用什么？在 hadoop wiki 上，我看到下载 1.0.X - 当前稳定版本，1.0 版本 1.1.X - 当前 beta 版本，1.1 版本 2.XX - 当前 alpha 版本 0.23.X - 类似于 2.XX 但缺少 NN HA。0.22.X - 不包括安全性 0.20.203.X - 旧版稳定版 0.20.X - 旧版

这是否意味着 mapred 类已被弃用并被重新引入。我应该使用哪个 hadoop 版本？0.20.2 还是 1.0.x ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:44:11.583

> 请查看这个，它解释了 Hadoop 开发的版本控制：http: [//www.cloudera.com/blog/2012/04/apache-hadoop-versions-looking-ahead-3/](http://www.cloudera.com/blog/2012/04/apache-hadoop-versions-looking-ahead-3/)
> 
> 因此，您可以了解为什么它具有相当复杂的版本。
> 
> p/s：我的系统使用 v1.0.3 :)

那是愚人节的帖子。:)

但任何人都可以同意这些版本充其量是误导性的。

# cuda - ArrayFire 与原始 CUDA 编程？

> ID：12656787
> 
> 赞同：17
> 
> 时间：2012-09-29T21:47:57.123
> 
> 标签：cuda, gpu, arrayfire

我对 GPU 编程很陌生，但由于我有一项计算密集型任务，我转向 GPU 以获得可能的性能提升。

我尝试用[ArrayFire 免费](http://accelereyes.com/arrayfire)版重写我的程序。它确实比我启用多线程的 CPU 例程快，但没有达到我预期的程度（即 < 100% 加速），并且返回的结果不太正确（与 CPU 例程相比，误差 < 1%，假设CPU 例程的结果是正确的）。

我的任务主要是对大型矩阵（300MB-500MB 大小）进行元素方式的 float-32 数学运算，很少有 if-thens/switch-cases 等。我猜性能瓶颈可能是 CPU 和 GPU 内存之间的带宽，因为有大量数据读取等。我测试的 GPU 是 GeForce 580GTX，具有 3GB 显存。

如果我编写原始 CUDA 代码（使用 CUBLAS 等和平均优化）而不是使用 ArrayFire 来完成我的任务，是否还有很大的优化空间？我阅读了一些 NVIDIA 优化指南；似乎有一些内存访问技巧可以加快数据访问速度并减少银行冲突。ArrayFire 是否自动使用这些通用技巧？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-29T23:06:16.380

谢谢你的帖子。很高兴听到初步结果正在加速。我在 ArrayFire 工作，可以在这里回答您的问题。

首先，任何人都需要代码来帮助具体化。你能分享你写的代码吗？

其次，您应该按照以下方式考虑 CUDA 和 ArrayFire：CUDA 是一种对 GPU 进行编程的方法，它使您能够编写任何您想要的 GPU 代码。但是，幼稚的 CUDA 代码（通常比 CPU 慢）和专家级的、耗时的、手动优化的 CUDA 代码之间存在巨大差异。ArrayFire（以及其他一些 GPU 库，如 CUBLAS）已经投入了许多人年的优化，并且通常会提供比大多数普通人有时间自己实现的更好的结果。但是，人们使用 ArrayFire（或其他库）的程度也存在差异。在使用 ArrayFire 库调用时可以而且应该调整一些变量以获得最佳性能。如果您发布代码，我们可以帮助在这里分享其中的一些。

第三，ArrayFire 在依赖 BLAS 的函数中使用了 CUBLAS，所以直接使用 CUBLAS 不太可能有太大区别。

第四，是的，ArrayFire 使用了 NVIDIA CUDA 编程指南中提供的所有优化（例如更快的数据传输和减少内存库冲突，就像你提到的那样）。这就是 ArrayFire 开发的大部分重点，优化这些事情。

最后，您注意到的数据差异可能是由于 CPU 与 GPU 计算的性质所致。由于它们是不同的设备，您经常会看到略有不同的结果。并不是 CPU 比 GPU 提供更好的结果，而是它们都以稍微不同的方式以有限的精度工作。如果您使用单精度而不是双精度，您可能会考虑这一点。发布代码也可以让我们帮助解决这个问题。

发布代码后，很高兴扩展我的答案。

# web-crawler - 是否可以解析雅虎购物网站

> ID：12656791
> 
> 赞同：0
> 
> 时间：2012-09-29T21:48:19.687
> 
> 标签：web-crawler

我对爬行专家的问题。你能指导我解析（抓取）雅虎购物的方法吗？我需要搜索结果（假设我输入了一个关键词）。如果不能使用雅虎，那么任何提供特定购物网站的网站。

# php - 在 MySQL 查询中不返回 URL 字符串

> ID：12656796
> 
> 赞同：0
> 
> 时间：2012-09-29T21:49:36.470
> 
> 标签：php, mysql, .htaccess, codeigniter

我尝试在我的 MySQL 数据库中查询一系列行，但只要值是 URL，它就不会显示。

```
([Handle] => air-gap-parts 
 [productID] => 0000000018 
 [active] => 1 
 [tag] => 0 
 [ImageSrc] =>) 
```

ImageSrc 应该产生一个图片的 URL，但每次它什么都不返回。我正在使用 CodeIgniter，我想知道它是否与我的 .htaccess 文件有关？

.htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 

<Files "index.php">
  AcceptPathInfo On
</Files> 
```

CodeIgniter 模型查询：

```
function get_product_pics($handle)<br />
{
  $this->db->where('handle', $handle);
  $query = $this->db->get('products_test_db');
  return $query->result();
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:13:46.260

我数据库中的条目一直为 NULL。下一次，检查我实际在哪个数据库中工作。

# gwt - GWT - v3 谷歌地图信息窗口内的按钮

> ID：12656800
> 
> 赞同：1
> 
> 时间：2012-09-29T21:50:26.623
> 
> 标签：gwt, google-maps-api-3, gwt2, infowindow

我试图弄清楚如何在谷歌地图信息窗口中传播组件的事件。我创建锚点或按钮，并希望处理其中任何一个上的点击事件。

我在[这里](https://stackoverflow.com/questions/11528637/google-maps-api-v3-buttons-and-textboxes-inside-infowindow) 和 [这里找到了描述的解决方案](http://www.mail-archive.com/google-web-toolkit@googlegroups.com/msg82149.html)

但它们都使用谷歌地图包装器进行 gwt。我想避免那些图书馆。

问题：

您知道如何将这些事件从信息窗口传播到包装谷歌地图的 GWT 面板吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:45:12.447

A. 浏览器事件一直冒泡到 DOM 树的顶部。您可以将单击处理程序附加到作为地图 InfoWindow 和小部件的父级的小部件。然后，当用户单击您的按钮时，您需要检查事件源以确保它来自您的按钮。

```
public void onClick(final ClickEvent event) {    
    Element e = Element.as(event.getNativeEvent().getEventTarget());
    // check if e is your button
} 
```

B. 您可以创建一个常规 GWT 按钮，将 ClickHandler 附加到它。不要将它放在 InfoWindow 内：使用绝对定位和更高的 z-index 将其放在上面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T07:01:24.407

基于此处找到的代码：http: [//gwt-maps3.googlecode.com/svn/trunk/src/com/googlecode/maps3/client/](http://gwt-maps3.googlecode.com/svn/trunk/src/com/googlecode/maps3/client/)

我创建了这个类，它解决了不使用外部库的问题（你必须只从给定的链接中获取 InfoWindowJSO 源）然后将 InnerHtml 作为字符串传递给 setContent ...你只需传递 Widget 元素。

```
import com.google.gwt.core.client.JavaScriptObject;
import com.google.gwt.dom.client.Element;
import com.google.gwt.user.client.ui.ComplexPanel;
import com.google.gwt.user.client.ui.Widget;

public class InfoWindow
{
        static class FakePanel extends ComplexPanel
        {
                public FakePanel(Widget w)
                {
                        w.removeFromParent();
                        getChildren().add(w);
                        adopt(w);
                }

                @Override
                public boolean isAttached()
                {
                        return true;
                }

                public void detachWidget()
                {
                        this.remove(0);
                }
        }

        /** */
        InfoWindowJSO jso;

        /** If we have a widget, this will exist so we can detach later */
        FakePanel widgetAttacher;

        /** Keep track of this so we can get it again later */
        Widget widgetContent;

        /** */
        public InfoWindow()
        {
                this.jso = InfoWindowJSO.newInstance();
        }

        /** */
        public InfoWindow(InfoWindowOptions opts)
        {
                this.jso = InfoWindowJSO.newInstance(opts);
        }

        /** Detaches the handler and closes */
        public void close()
        {
                this.detachWidget();
                this.jso.close();
        }

        /** Detaches the content widget, if it exists */
        private void detachWidget()
        {
                if (this.widgetAttacher != null)
                {
                        this.widgetAttacher.detachWidget();
                        this.widgetAttacher = null;
                }
        }

        /** */
        public void open(JavaScriptObject map)
        {
                this.jso.open(map);
        }

        public void open(JavaScriptObject map, JavaScriptObject marker)
        {
                this.jso.open(map, marker);
        }

        /** */
        public void setOptions(InfoWindowOptions value)
        {
                this.jso.setOptions(value);
        }

        /** */
        public void setContent(String value)
        {
                this.widgetContent = null;
                this.detachWidget();
                this.jso.setContent(value);
        }

        /** */
        public void setContent(Element value)
        {
                this.widgetContent = null;
                this.detachWidget();
                this.jso.setContent(value);
        }

        /** */
        public void setContent(Widget value)
        {
                this.widgetContent = value;
                this.detachWidget();
                this.jso.setContent(value.getElement());

                if (this.widgetAttacher == null)
                {
                        // Add a hook for the close button click
                        this.jso.addListener("closeclick", new Runnable() {
                                @Override
                                public void run()
                                {
                                        detachWidget();
                                }
                        });
                        this.widgetAttacher = new FakePanel(value);
                }
                else if (this.widgetAttacher.getWidget(0) != value)
                {
                        this.widgetAttacher.detachWidget();
                        this.widgetAttacher = new FakePanel(value);
                }
        }

        /** @return the widget, if a widget was set */
        public Widget getContentWidget()
        {
                return this.widgetContent;
        }

        /** */
        public JavaScriptObject getPosition()
        {
                return this.jso.getPosition();
        }

        /** */
        public void setPosition(JavaScriptObject value)
        {
                this.jso.setPosition(value);
        }

        /** */
        public int getZIndex()
        {
                return this.jso.getZIndex();
        }

        /** */
        public void setZIndex(int value)
        {
                this.jso.setZIndex(value);
        }

        /** */
        public void addListener(String whichEvent, Runnable handler)
        {
                this.jso.addListener(whichEvent, handler);
        }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-07T10:44:46.660

我使用静态值 nextAnchorId 为每个 InfoWindow 唯一地生成 ID，并且当 InfoWindow 准备好时（通常当您调用 infoWindow.open(map); 时），我通过元素 ID 获取锚点并将我的单击处理程序添加到它。这就是 Manolo 正在做的事情，但是这个实现不需要 gwtquery，这意味着我可以在超级开发模式下运行我的代码。

```
private static int nextAnchorId = 1;

public InfoWindow makeInfo() {
    InfoWindowOptions infoWindowOptions = InfoWindowOptions.create();
    FlowPanel infoContentWidget = new FlowPanel();
    final String theAnchorId_str = "theAnchor" + nextAnchorId;
    HTML theAnchor = new HTML("<a id=\"" + theAnchorId_str + "\">Click me!</a>");
    infoContentWidget.add(theAnchor);
    infoWindowOptions.setContent(infoContentWidget.getElement());
    InfoWindow infoWindow = InfoWindow.create(infoWindowOptions);

    infoWindow.addDomReadyListenerOnce(new InfoWindow.DomReadyHandler() {
        @Override
        public void handle() {
            com.google.gwt.user.client.Element muffinButton = (com.google.gwt.user.client.Element) Document.get().getElementById(theAnchorId_str);
            DOM.sinkEvents(muffinButton, Event.ONCLICK);
            DOM.setEventListener(muffinButton, new EventListener() {
                @Override
                public void onBrowserEvent(Event event) {
                  Window.alert("You clicked on the anchor!");
                  // This is where your click handling for the link goes.
                }
            });
        }
    });

    nextAnchorId++;
    return infoWindow
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T07:23:34.000

一个非常简单的解决方案是使用 gwtquery：

确定地图中要添加点击处理程序的锚点并为其定义一个 css 选择器（例如 id=my_link）

使用 gquery 找到它并添加事件。

```
$('#my_link').click(new Function() {
   public boolean f(Event e) {
     [...]
     return false; //false means stop propagation and prevent default
   }
}); 
```

请注意，gwtquery 不是 jquery 的包装器，而是其 api 的完整 gwt 实现，因此将其包含在您的项目中不会使其过载，并且编译器只会拾取您使用的东西。

# parsing - 从 Mysql Magento 导出产品

> ID：12656801
> 
> 赞同：1
> 
> 时间：2012-09-29T21:50:28.123
> 
> 标签：parsing, magento, csv, export, product

Magento DB 有一些问题，我无法匹配我的自定义产品导出文件的属性。

我需要帮助来获取属性，我只用这个标题完成了这个脚本但是 attribute_set、可见性和 size_cloth 返回的是数字而不是名称。也许这可以通过匹配功能来解决。

我需要获得更多属性，例如：category_ids，我无法获得这个...颜色、size_shoes、size_etc。

请检查我的脚本。

```
'store', '_website', 'attribute_set', 'type', 'sku', 'name', 'description', 'short_description', 'visibility', 'has_option', 'price', 'special_price', 'size_cloth', 'link', 'image'

<?php

    //Setup Connection information
    $dbhost = 'localhost';
    $dbuser = 'user';
    $dbpass = 'pass';

    //Connect to the database
    $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die('Error connecting to mysql');

    //Point to specific DB
    $dbname = 'database_name';
    mysql_select_db($dbname);

    //Create the Query to get the products
    $sql = "SELECT DISTINCT P.attribute_set_id, P.type_id, P.sku, P.has_options, V.value AS Name, T1.value AS ProdDesc, T2.value AS ShortDesc,
    T5.value AS visibility, D.value AS Price, S.value AS Special_Price, SIZE_CLOTH.value AS size_cloth, CONCAT('http://www.website.com/', V1.value) AS Link, 
    CASE
        WHEN V2.Value IS NULL
            THEN NULL
        ELSE CONCAT('http://www.website.com/media/catalog/product', V2.value)
    END AS Image
    FROM  catalog_product_entity AS P INNER JOIN

    catalog_product_entity_varchar AS V  ON P.entity_id = V.entity_id  AND V.attribute_id  = 60  LEFT JOIN
    catalog_product_entity_varchar AS V1 ON P.entity_id = V1.entity_id AND V1.attribute_id = 87  LEFT JOIN
    catalog_product_entity_varchar AS V2 ON P.entity_id = V2.entity_id AND V2.attribute_id = 74  LEFT JOIN
    catalog_product_entity_text    AS T1 ON P.entity_id = T1.entity_id AND T1.attribute_id = 61  LEFT JOIN
    catalog_product_entity_text    AS T2 ON P.entity_id = T2.entity_id AND T2.attribute_id = 62  LEFT JOIN
    catalog_product_entity_int    AS T5 ON P.entity_id = T5.entity_id AND T5.attribute_id = 91 LEFT JOIN
    catalog_product_entity_decimal AS D  ON P.entity_id = D.entity_id  AND D.attribute_id  = 64 LEFT JOIN
    catalog_product_entity_int AS SIZE_CLOTH  ON P.entity_id = SIZE_CLOTH.entity_id  AND SIZE_CLOTH.attribute_id  = 122 LEFT JOIN
    catalog_product_entity_decimal AS S  ON P.entity_id = S.entity_id  AND S.attribute_id  = 65";

    //Run the query
    $query = mysql_query($sql);
    //But after this i will prepare the csv file for export.
    $file = fopen('products_export.csv', 'w');
    // Custom header for csv file
    $header = array('store', '_website', 'attribute_set', 'type', 'sku', 'name', 'description', 'short_description', 'visibility', 'has_option', 'price', 'special_price', 'size_cloth', 'link', 'image');
    // this will arrange all data by comma 
    fputcsv($file, $header, ',', '"');    
    //Loop through and print each products info
    while($row = mysql_fetch_array($query))
        { 
        $item = array();
            $value1 = ("admin");
            $value2 = ("base");
            $value3 = ($row['attribute_set_id']);
            $value4 = ($row['type_id']);
            $value5 = ($row['sku']);
            $value6 = ($row['Name']);
            $value7 = ($row['ProdDesc']);
            $value8 = ($row['ShortDesc']);
            $value9 = ($row['visibility']);
            $value10 = ($row['has_options']);
            $value11 = ($row['Price']);
            $value111 = ($row['Special_Price']);
            $value112 = ($row['size_cloth']);
            $value12 = ($row['Link']);
            //$value13 = ($row['Image']);
            $item[] = $value1;
            $item[] = $value2;
            $item[] = $value3;
            $item[] = $value4;
            $item[] = $value5;
            $item[] = $value6;
            $item[] = $value7;
            $item[] = $value8;
            $item[] = $value9;
            $item[] = $value10;
            $item[] = $value11;
            $item[] = $value111;
            $item[] = $value112;
            $item[] = $value12;

            // put all data in csv file
            fputcsv($file, $item, ',', '"');    
        }
        {
            // close csv file and finish.
        fclose($file);
   }
?> 
```

我认为最好的解决方案是数据。例子：

```
if ( $value112 == need to array the list of numbers, 1, 2, 3, 4, 5) {
    echo "S, M, L, XL";
} else {
    echo " ";
} 
```

但我不知道如何将它插入到我的数组项中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:04:26.677

直接与 Magento 的数据库交互不是我的第一选择。实际有效的替代方案：

1.  使用 Magento 导入/导出模块

2.  使用 Magento 数据流导入/导出

3.  使用 Magento 的产品集合生成导出文件 [http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections)

# c# - document.getelementbyid 在循环/if 内不起作用

> ID：12656802
> 
> 赞同：0
> 
> 时间：2012-09-29T21:50:32.717
> 
> 标签：c#, browser

我的问题很简单，但我无法弄清楚为什么它在 if/loop 中不起作用。这里有些例子：

工作一：

```
private void button1_Click(object sender, EventArgs e)
{
    webBrowser1.Document.GetElementById("login").SetAttribute("value", "something");
    webBrowser1.Document.GetElementById("password").SetAttribute("value", "something");
} 
```

非工作一：

```
if (webBrowser1.IsBusy == false)
{
    webBrowser1.Document.GetElementById("login").SetAttribute("value", "something");
    webBrowser1.Document.GetElementById("password").SetAttribute("value", "something");
} 
```

无论“if”语句是什么，它都不起作用。还尝试使用“for”，也尝试将其从“for”循环中取出，我仍然收到此错误：“对象引用未设置为对象的实例。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:02:31.903

由于信息有限，我在这里猜测一下。

我认为您正在尝试在设置`Url`属性后立即修改页面。该网页尚未加载，因此您获得的控件尚不可用。

尝试将代码添加`DocumentCompleted`到`WebBrowser`. 此事件将在文档完全加载后立即触发，然后元素将可用。

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
  var loginControl = webBrowser1.Document.GetElementById("login");
  var passwordControl = webBrowser1.Document.GetElementById("password");

  if (loginControl != null)
    loginControl.SetAttribute("value", "something");

  if (passwordControl != null)
    passwordControl.SetAttribute("value", "something");
} 
```

更多：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)

**更新**

你的假设`IsBusy`并不完全正确。`false`它在没有加载任何内容时开始。settings`Url`属性不会立即将其设置为`true`.

对于您要求的替代方案，您可以使用在加载完成时`ReadyState`具有值的属性。`WebBrowserReadyState.Complete`您可以使用以下示例。虽然我个人不喜欢它，因为当页面由于某种原因无法加载时存在无限循环的风险。如果可能，我建议使用，`DocumentCompleted`并且我修改了该示例以正确处理非登录页面。

```
while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
{
  Thread.Sleep(0);
  Application.DoEvents();
} 
```

# c# - System.Text.Encoding.Default 和密码加密

> ID：12656804
> 
> 赞同：1
> 
> 时间：2012-09-29T21:50:49.837
> 
> 标签：c#, .net, encryption, mono

不幸的是，我有一些代码可以做到这一点：

```
 byte[] plainText = System.Text.Encoding.ASCII.GetBytes(ClearText);
            var btcipherText = enc.Encrypt(plainText, btkey);
            System.Text.Encoding en = System.Text.Encoding.Default;
            return en.GetString(btcipherText); 
```

然后将其作为用户密码保存到数据库中。

在单声道中，在 Ubuntu 12.04 上`System.Text.Encoding.Default`是 System.Text.Encoding.UTF8，而在 Windows 7 上，它似乎是`System.Text.SBCSCodePageEncoding`.

密码加密/解密代码不应该使用`System.Text.Encoding.Default`，但这是继承代码。查看`System.Text.Encoding`并广泛搜索我的问题后，我无法确定如何使用标准编码解码此字符串，在这种情况下，在缺少原始编码的 Mono/Linux 堆栈上。

我也奇怪地找不到太多关于`System.Text.SBCSCodePageEncoding`

当我尝试解密使用此编码存储的字符串时，我得到通常的“错误数据”和“无效块大小”加密异常。

任何信息或建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:50:36.433

在另一个答案的基础上，假设您知道使用哪些有限的编码集将 byte[] 转换为字符串，构建一个实用程序（或将其构建到应用程序中，以便在使用密码时升级密码）读取和将密码解码回有效的 byte[]，然后将 byte[] 作为 Base64 存储在数据库中。

我看到您还考虑对密码进行哈希处理，在这种情况下以及几乎任何其他情况下，如果您处理实际上不代表文本的字节 []，您需要将其存储/显示为字符，那么 base64 始终是一个不错的选择。

如果您决定对密码进行哈希处理，请确保使用 HMAC 样式的哈希系统，而不仅仅是普通密码 + salt，或者更好地为 .net 获取 bcrypt 实现。

[http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and-mono.ashx](http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and-mono.ashx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:26:51.033

在这种情况下，我将制作一个应用程序来解密数据库中的所有密码，使用 UTF8 编码对其进行加密并更新数据库。然后把原来的代码改成UTF8。

# php - 用于 Google Checkout 服务器到服务器通信的 Amazon Checkout 等效项

> ID：12656805
> 
> 赞同：2
> 
> 时间：2012-09-29T21:50:55.947
> 
> 标签：php, curl, amazon, google-checkout, amazon-fps

Googlecheckout 允许您 CURL 客户订单，他们返回一个 URL，然后您将用户发送到该 URL，因此他们看不到您发送的数据，因此他们无法修改它。

我看到有对带有 CURL 的 Amazon Checkout 的轮询请求，但是在 Amazon Checkout 或 Amazon FPS（灵活支付系统）中是否存在相同的功能？

Google 代码：[https](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API#api_details) ://developers.google.com/checkout/developer/Google_Checkout_HTML_API#api_details https://developers.google.com/checkout/developer/Google_Checkout_HTML_API#integration_overview // CURL 示例，从这里向下滚动一点。

```
_type=checkout-shopping-cart
&shopping-cart.items.item-1.item-name=Peanut%20Butter
&shopping-cart.items.item-2.item-name=Strawberry%20Jelly
&shopping-cart.items.item-1.item-description=Made%20from%20peanuts
&shopping-cart.items.item-2.item-description=Made%20from%20strawberries 
```

因此请求看起来像这样。

```
curl -d '_type=checkout-shopping-cart&shopping-cart.items.item-1.item-name=Peanut%20Butter&shopping-cart.items.item-2.item-name=Strawberry%20Jelly&shopping-cart.items.item-1.item-description=Made%20from%20peanuts&shopping-cart.items.item-2.item-description=Made%20from%20strawberries'
https://P_MERCHANT_ID:P_MERCHANT_KEY@checkout.google.com/api/checkout/v2/requestForm/Merchant/P_MERCHANT_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:11:32.723

可悲的是，亚马逊缺乏文档，或者至少很难找到。您可以尝试在[https://aws.amazon.com/support/上询问他们](https://aws.amazon.com/support/)

# facebook - 无法从 Facebook 应用程序中访问 WordPress wp-login.php

> ID：12656806
> 
> 赞同：0
> 
> 时间：2012-09-29T21:51:18.983
> 
> 标签：facebook, wordpress

我删除了 WordPress 并重新开始，甚至在 Facebook 上创建了另一个新应用程序，但问题仍然存在。

我已经设置了一个指向我的 WordPress 网站的 Facebook 应用程序。该网站的所有部分都可以正常工作，除了我无法单击注册或登录按钮。如果我从 Facebook 外部登录并刷新 Facebook 应用程序/页面，那么我会显示为已登录并且可以做我想做的事情，包括注销。

请问有什么想法吗？不幸的是，大多数谷歌搜索都认为我在谈论第三方 Facebook 连接插件，但我不是。

有问题的页面在[这里](http://apps.facebook.com/costaclassifiedsns/)，它只是在查看[www.costablancaclassifieds.com](http://www.costablancaclassifieds.com)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:23:37.970

您也可以在不修改任何核心代码的情况下执行此操作。只需将这两行放在您的functions.php中

```
remove_action( 'login_init', 'send_frame_options_header',     10, 0 ); // main site
remove_action( 'admin_init', 'send_frame_options_header', 10, 0 ); // admin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:15:12.323

*非常*感谢你，迈克。我不知道这是因为 iFrames。由于您所写的内容，我能够更改我正在搜索的内容，然后找到了一个现在可行的解决方案，尽管可能不是那么理想。（也许你也可以测试一下？）我在 Wordpress 代码库中修改了几行：

1.  打开`wp-includes/default-filters.php`
2.  寻找`"frame"`
3.  你会得到两行：

    ```
    add_action( 'login_init', 'send_frame_options_header', 10, 0 );
    add_action( 'admin_init', 'send_frame_options_header', 10, 0 ); 
    ```

4.  注释掉这些行，保存并清除缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:41:31.413

据我所知 Brad，这似乎不是 FB 问题，而更像是 WP cookie 问题。我尝试使用 iframe 构建您的网站，它对您遇到的问题的反应类似。环顾了一下，发现其他人也有类似的问题；问题是当您通过 iframe 向另一个域提供 WP 站点时，无法正确设置 cookie。

这是我发现的一个论坛主题： [http ://wordpress.org/support/topic/running-wordpress-in-an-iframe-cross-domains](http://wordpress.org/support/topic/running-wordpress-in-an-iframe-cross-domains)

这不是好消息，但希望它可以帮助您找到解决方案或至少获得某种程度的关闭。我会尝试为您的情况想一个创造性的解决方案。

# c# - 如何检索 openfiledialog 打开路径？C＃

> ID：12656812
> 
> 赞同：0
> 
> 时间：2012-09-29T21:52:21.390
> 
> 标签：c#, path, io, openfiledialog

我的应用程序中有一个 openfiledialog。我没有设置初始目录，用户可以导航到打开文件并将其导入应用程序（例如从 C:\ 测试位置导入 excel 文件）。下一次，当用户想要打开另一个文件时，系统（默认情况下，因为没有设置初始目录）会记住之前的位置，openfiledialog 在那个目录中打开（C:\Test）。有没有办法检索 openfiledialog 打开的路径？如果我不能很好地解释我的问题，我很抱歉，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:33:55.400

注册表很难处理，我建议您改用[应用程序属性](http://msdn.microsoft.com/en-us/library/system.windows.application.properties.aspx)。

# php - simplexml_load_string()：输入不是正确的 UTF-8，表示编码！字节：0xC2 0x20 0x5D 0x5D

> ID：12656814
> 
> 赞同：-1
> 
> 时间：2012-09-29T21:52:29.923
> 
> 标签：php, xml-parsing

这是我的代码片段：

```
$feed=file_get_contents($feed);
$feed=simplexml_load_string($feed); 
```

我在[这里](https://stackoverflow.com/questions/2507608/error-input-is-not-proper-utf-8-indicate-encoding-using-phps-simplexml-lo)尝试了所有解决方案，但没有任何效果。它实际上适用于一个提要，而不适用于另一个。如果使用另一种解决方案，则另一种解决方案有效，但旧的解决方案失败。请帮我解决这个问题。这很烦人。我需要一个通用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:00:33.740

尝试这个：

```
 $feed=file_get_contents($feed);
 $feed=str_replace(chr(hexdec('20')),' ', $feed);
 $feed=str_replace(chr(hexdec('5D')), ']', $feed);
 $feed=simplexml_load_string($feed); 
```

实际上，错误中的每个 hex(0x) 条目对应于一个符号，使用 str_replace 替换字符，然后尝试 simplexml_load_string。使用此[链接](http://www.ascii.cl/)进行转换。我很惊讶在这个论坛的其他地方没有看到这种简单的方法。希望这会有所帮助你。

# python - 自动附加每个段落？

> ID：12656816
> 
> 赞同：0
> 
> 时间：2012-09-29T21:52:41.217
> 
> 标签：python, xml, beautifulsoup

我是一名初学者程序员，希望能在这个可能微不足道的问题上得到一些帮助：我有一个包含以下结构的 .xml 文件：

```
<norm builddate="20120625150106" doknr="BJNR000020963BJNE000401308">
    <metadaten>
        <jurabk>BUrlG</jurabk>
        <enbez>§ 3</enbez>
        <titel format="parat">sometitle</titel>
    </metadaten>
    <textdaten>
        <text format="XML">
            <Content>
                <P>(1) sometext</P>
                <P>(2) anothertext</P>
            </Content>
        </text>
        <fussnoten/>
    </textdaten>
</norm> 
```

现在我想用标签“enbez”+“P”（somenumber）+“jurabk”的字符串内容附加每个“P”内容，例如：§ 3 (1) BUrlG。然后我应用一些格式使其成为§ 3 Abs。1 个建筑物。

对于特定的“enbez”和特定的“P”标签，我已经设法获得了一个工作示例代码。但我希望能够为整个文档自动执行此过程，但无法正确编写迭代器以获取每个“enbez”中的每个“P”标签并将附加函数应用于正确的段落。另外，我写的每一步都尽可能地笨拙，如果有更好的方法，我将不胜感激任何建议！

示例代码：

```
import string
import re
from urllib import urlopen
from bs4 import BeautifulSoup

xmlfile = urlopen('burlg.xml').read()
soup = BeautifulSoup(xmlfile)

# Find a specific enbez; the norm parent always contains only one
enbez = soup.findAll("enbez")
enbezspecial = enbez[3]

#find the norm parent
norm = enbezspecial.find_parent("norm")

#find all p's belonging to the norm parent
p = norm.findAll("p")
pspecial = p[1]

#Get the number, remove the brackets and add a whitespace
regex = re.compile('\(\d\)')
result = regex.match(pspecial.string)
resultstring = result.group()
resultstring1 = resultstring.replace("(","")
resultstring2 = resultstring1.replace(")","")
resultstring3 = " " + resultstring2

#find the shorttitle; is the same for the whole document
jurabk = soup.find("jurabk")

#add some output formatting
enbezprint = enbezspecial.text
paraprint = " Abs."+resultstring3
jurabkprint = " "+jurabk.text
appendix = "["+enbezprint+paraprint+jurabkprint+"]"

p[1].append(appendix)
print p[1] 
```

# symfony - symfony2：如何检查表单是否是新的？

> ID：12656817
> 
> 赞同：3
> 
> 时间：2012-09-29T21:52:48.530
> 
> 标签：symfony, twig

我想检查我的模板中的表单是否是新的，例如 symfony 1.4 中的 $form->isNew() ，但我没有找到解决方案。

目前，我正在使用这种技术：

```
{% null != entity.getId %} 
```

它有效，但是还有其他更干净的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-10-13T15:26:48.947

我用这个：

```
{% if form.vars.submitted == false %}DO WHATEVER HERE{% endif %} 
```

此处有关表单函数和变量的更多信息： [https ://symfony.com/doc/current/reference/forms/twig_reference.html](https://symfony.com/doc/current/reference/forms/twig_reference.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T22:13:03.817

Symfony2 形式与模型的耦合比 symfony1 形式少。Symfony2 中的表单不能是“新的”或“旧的”。持久化的是实体，而不是形式。表单的工作是将提交的数据放到模型对象中。

请记住，模型类不必是学说实体（实际上可以是任何类的对象）。由您来定义对象是否为新对象（持久或不持久）的含义。同样，它不是一种持久化的形式。

顺便说一句，您可以像这样检查 id：

```
{% if entity.id %}{% endif %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-20T21:56:37.320

现在更好的解决方案（SF3）将是：

```
{% if form.vars.data.id %}{% endif %} 
```

# java - getCharacterOffset() 返回不正确的值

> ID：12656824
> 
> 赞同：2
> 
> 时间：2012-09-29T21:53:32.907
> 
> 标签：java, stax

我正在使用 StAX 解析 XML 文件，并想知道每个标签的开始和结束位置。为此，我正在尝试使用`getLocation().getCharacterOffset()`，但它会为除第一个之外的每个标签返回不正确的值。

```
XMLInputFactory factory = XMLInputFactory.newInstance();
XMLEventReader reader = factory.createXMLEventReader(
        new StringReader("<root>txt1<tag>txt2</tag></root>"));

XMLEvent e;
e = reader.nextEvent(); // START_DOCUMENT
System.out.println(e);
System.out.println(e.getLocation());
e = reader.nextEvent(); // START_ELEMENT "root"
System.out.println(e);
System.out.println(e.getLocation());
e = reader.nextEvent(); // CHARACTERS "txt1"
System.out.println(e);
System.out.println(e.getLocation());
e = reader.nextEvent(); // START_ELEMENT "tag"
System.out.println(e);
System.out.println(e.getLocation()); 
```

上面的代码打印了这个：

```
<?xml version="null" encoding='null' standalone='no'?>
Line number = 1
Column number = 1
System Id = null
Public Id = null
Location Uri= null
CharacterOffset = 0

<root>
Line number = 1
Column number = 7
System Id = null
Public Id = null
Location Uri= null
CharacterOffset = 6

txt1
Line number = 1
Column number = 12
System Id = null
Public Id = null
Location Uri= null
CharacterOffset = 11

<tag>
Line number = 1
Column number = 16
System Id = null
Public Id = null
Location Uri= null
CharacterOffset = 15 
```

之后`<root>`是`CharacterOffset`正确的`6`，但之后`txt1`是`11`我期望看到`10`的。它究竟返回了什么偏移量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:21:00.210

这可能是 Sun/Oracle 的 StAX 实现的错误/功能。使用 Woodstox，您会得到`0, 0, 6, 10`，这似乎是正确的。[从http://wiki.fasterxml.com/WoodstoxHome](http://wiki.fasterxml.com/WoodstoxHome)下载 Woodstox，并将 JAR（woodstox-core + stax2-api）添加到您的类路径中。然后， `XMLInputFactory`将自动选择 Woodstox 实现。

# graph - 带约束的有向无环加权图的遍历

> ID：12656828
> 
> 赞同：0
> 
> 时间：2012-09-29T21:54:01.170
> 
> 标签：graph, directed-acyclic-graphs, graph-traversal

我有一个要遍历的有向无环加权图。

有效解决方案路径的约束是：

1.  考虑到第二个约束，路径中遍历的所有边的权重之和必须是图中可能的最高值。
2.  在所选路线中必须访问过恰好 N 个顶点（包括开始和结束顶点）。

通常，该图将具有大量顶点和边，因此尝试所有可能性不是一种选择，并且需要相当有效的算法。

为这个问题寻找一些指针或合适的算法。我知道使用 Dijkstra 算法很容易满足第一个条件，但我不确定如何结合第二个条件，甚至不知道从哪里开始寻找。

如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:41:53.457

我不确定您是否对图中*任何*长度为**N**的路径感兴趣，或者只是对两个特定顶点之间的路径感兴趣；我怀疑后者，但你没有在你的问题中提到这个限制。

如果是前者，解决方案应该是一个简单的类似 Dijkstra 的算法，您可以通过它们的*潜在路径值*对所有边缘进行排序，该路径值从边缘权重开始，并通过已构建的相邻路径进行调整。在每次迭代中，获取具有最佳潜在路径值的节点并将其添加到相邻路径中。当您获得长度为 N 的路径（或在两侧截断的更长）时停止。还有一些其他的技术细节，尤其是。wrt。创建长路径，但我不会详细说明，因为我怀疑这不是您感兴趣的。:-)

如果您有固定的源和接收器，我认为不涉及深层魔法 - 只需运行一个基本的 Dijkstra，其中路径将与添加到队列中的每个顶点相关联，但不要将路径长度 >= N 的顶点插入队列并且不要将 sink 插入到队列中，除非它的路径长度为 N。

# java - Java：如何使用 ArrayList 在寄存器中使用计数器

> ID：12656830
> 
> 赞同：1
> 
> 时间：2012-09-29T21:54:02.597
> 
> 标签：java, arraylist

我希望 ID 是 1,2,3,4 每个新名称，即

ID - 姓名 - 年龄

1 - 保罗 - 60

2 - 里吉斯 - 25

3 - 安娜 - 20

自动识别

```
static void register(ArrayList mylist) {
        int i = 1;
        Scanner in = new Scanner(System.in);
        Peoples p = new Peoples();
//        System.out.print("ID: ");
//        p.ID = in.nextInt();
        p.ID = i;
        i++;
        in.nextLine();
        System.out.print("Name: ");
        p.name = in.nextLine();
        System.out.print("Age: ");
        p.age = in.nextInt();
        mylist.add(p);
    }

public class Peoples {
    public int ID;
    public String name;
    public int age;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T21:58:57.907

我会稍微修改一下这个`Peoples`类（顺便说一句。使用单数作为类名是一个好习惯）。

```
public class Person {
    private static int lastId;
    private int id;
    private String name;
    private int age;

    public Person() {
      id = Person.lastId++;
    }

    public void setName(String name) {
      this.name = name;
    }

    public void setAge(int age) {
      this.age = age;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:55:39.053

你需要`i = 1`在方法之外声明你的变量。因为你不希望它在每次方法调用时都被初始化为相同的值。

```
static int i = 1;
static void register(ArrayList mylist) {

        Scanner in = new Scanner(System.in);
        Peoples p = new Peoples();
        p.ID = i++;   // You can do increment + assignment on the same line.
     // i++;  // No need to increment in separate line
        in.nextLine();
        System.out.print("Name: ");
        p.name = in.nextLine();
        System.out.print("Age: ");
        p.age = in.nextInt();
        mylist.add(p);
    } 
```

# c# - jquery POST数据在aspx页面中

> ID：12656833
> 
> 赞同：0
> 
> 时间：2012-09-29T21:54:29.343
> 
> 标签：c#, jquery, request.querystring, request.form

我使用以下代码将数据发布到我的 aspx 文件：

```
 $.ajax({
            type: 'POST',
            url: "Ajax_Text.aspx?rand=" + myRand
                                        + "&id=" + $(".articleID").attr('title')
                                        + "&text=" + $("#text").val(),
            cache: false,
            beforeSend: function () {

            },
            success: function (data) {
                alert(data); 
            }
        }); 
```

为什么我使用以下代码捕获文本值

```
 string text = "";

            if (!String.IsNullOrEmpty(Request.QueryString["text"]))
            {
                text = Request.QueryString["text"].ToString();
            }
            else
            {
                text = "";
            } 
```

而不是这段代码：

```
string text = "";

            if (!String.IsNullOrEmpty(Request.Form["text"]))
            {
                text = Request.Form["text"].ToString();
            }
            else
            {
                text = "";
            } 
```

这是为什么？当我使用 jquery 发布数据时，我希望 Request.Form 能够正常工作！有任何想法吗？

我怀疑问题是我在 url 参数中有输入。也许我应该把它放到一个数据参数中，但这意味着它将成为一个 json 请求！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:09:43.663

POST 数据不会在查询字符串中发送，而是添加到请求正文中。试试这个代码：

```
$.ajax({
        type: 'POST',
        url: "Ajax_Text.aspx",
        data: {'rand': myRand, 'id': $(".articleID").attr('title'), 'text': $("#text").val()},
        cache: false,
        beforeSend: function () {

        },
        success: function (data) {
            alert(data); 
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:09:25.313

您将数据 ( `text`) 作为查询字符串（作为 URL 的一部分）“发布”，因此您必须使用`Request.QueryString`.

# php - 如何在 TWIG 函数中获取当前模板名称

> ID：12656835
> 
> 赞同：4
> 
> 时间：2012-09-29T21:54:36.247
> 
> 标签：php, symfony, twig

假设我创建了一个自定义 twig 函数：templateName。

```
$twig = new Twig_Environment($loader);
$twig->addFunction('templateName', new Twig_Function_Function('twig_template_name', array('needs_environment' => true))); 
```

有没有办法在 php.ini 中获取当前模板的名称。我想象这样的事情：

```
function twig_template_name(Twig_Environment $env, $values = null) {
  return $env->getCurrentTemplateName();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T12:19:57.833

对于每个需要回答最初问题的人，我找到了 twig 本身在 Twig_Error 类中使用的解决方案。

```
protected function guessTemplateInfo()
{
    $template = null;
    foreach (debug_backtrace() as $trace) {
        if (isset($trace['object']) && $trace['object'] instanceof Twig_Template && 'Twig_Template' !== get_class($trace['object'])) {
            $template = $trace['object'];
        }
    }

    // update template filename
    if (null !== $template && null === $this->filename) {
        $this->filename = $template->getTemplateName();
    }

    /* ... */ 
```

最好的祝福！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-20T09:13:23.057

Mario A 提出的解决方案对我不起作用，但使用 debug_backtrace() 是一个好主意，稍作修改使其适用于最近的 Twig 版本：

```
 private function getTwigTemplateName()
{
    foreach (debug_backtrace() as $trace) {
        if (isset($trace['object']) 
             && (strpos($trace['class'], 'TwigTemplate') !== false) 
             && 'Twig_Template' !== get_class($trace['object'])
        ) {
            return $trace['object']->getTemplateName() . "({$trace['line']})";
        }
    }
    return '';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T18:18:45.090

```
$twig = new Twig_Environment($loader);
$twig->addFunction(new Twig_SimpleFunction('twig_template_name', function() use ($twig) {

  $caller_template_name = $twig->getCompiler()->getFilename();

  echo "This function was called from {$caller_template_name}";

})); 
```

**更新：**正如[Leto](https://stackoverflow.com/users/894097/leto)所提到的，此方法不适用于缓存（编译）模板。但是，如果您使用共享内存缓存（APC、Memcache）而不是 Twig 的缓存，或者在运行在不具有高流量的环境中的应用程序中运行此功能（想想用于员工或应用程序分支的后端应用程序）仅用于收集有关应用程序代码库的信息）您可以通过禁用 Twig 的缓存（例如）使其工作`$twig = new Twig_Environment($loader, array('cache' => false));`。在禁用 Twig 的缓存并使用此方法之前，请务必仔细检查您的用例，看看您是否可以使用不同的方法解决该问题。

# c# - Visual C# 和 .NET 4.0 中的循环方法

> ID：12656837
> 
> 赞同：0
> 
> 时间：2012-09-29T21:54:46.583
> 
> 标签：c#, .net, winforms

我使用 C# 和 .NET 4.0 创建了一个新的 Windows 窗体应用程序，并且我有一个必须每 60 秒自动调用一次的函数。我的问题是我不知道在哪里调用这个函数。.NET 表单似乎没有内置的更新事件。

我将如何让这个函数每 60 秒调用一次？对不起，如果这是一个初学者的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:03:41.000

您可以设置一个计时器以每 16 毫秒（即 1/60 秒）调用一次回调。

**@spender 提到的重要一点：如果您需要*非常*精确的计时，例如*精确*每 1/60 秒的精度，您将不会对此解决方案感到满意。Windows 本身并不能很好地在这种情况下进行高分辨率计时。向@spender 提出建议以供提及。**

这是一个示例类，粗略地描述了它在普通香草类中的外观，因此您需要将其调整为您的表单：

您可能还想在后台线程上调用它，但如果您是 WinForms 的新手，我们将从小块开始。让我们先试试计时器，然后从那里开始。

```
class Demo{

   System.Timers.Timer myTimer;

   void InitializeTimer(){
      myTimer = new Timer(16); // elaps every 1/60 sec , appx 16 ms.
      myTimer.ElapsedEventHandler+=new ElapsedEventHandler(myTimerEventHandler); //define a handler
      myTimer.Enabled=true; //enable the timer.
   }

   void myTimerEventHandler(object sender, ElapsedEventArgs e){
     // do your thing here
   }
} 
```

**编辑：后台线程创建和基于调用的 GUI 更新的额外演示代码**

正如我在下面的评论中所指出的，这并没有我想要的那么完美，但我认为它说明了要点。它定义了一个 BackgroundWorker 线程来将线程调用移动到后台；线程回调检查是否需要调用 Invoke，并通过委托调用直接回调自身，以允许在“if (InvokeRequired)”语句的“else”块中更新自定义表单。简而言之，一个后台线程启动，并启动一个定时器；当计时器到时，它调用后台线程上的更新程序，它检查是否必须调用 Invoke，如果是，则通过调用方法执行线程上下文切换回 GUI 线程，然后执行图形用户界面更新。将您的自定义更新代码放在那个“其他”块中。我希望这有帮助！！！

```
public partial class Form1 : Form
{
    delegate void FormUpdateDelegate(object sender, ElapsedEventArgs e);
    public BackgroundWorker backgroundThread; 
    System.Timers.Timer foo;
    Random colorgen = new Random();
    public Form1()
    {
        InitializeComponent();

        backgroundThread = new BackgroundWorker();
        backgroundThread.DoWork+=new DoWorkEventHandler(backgroundThread_DoWork);
        backgroundThread.RunWorkerAsync();
    }

    public void formUpdater(object sender, ElapsedEventArgs e)
    {
        if (InvokeRequired)
        {
            FormUpdateDelegate d = new FormUpdateDelegate(formUpdater);
            Invoke(d, new object[] { sender, e });
        }
        else
        {
            // Do your form update here
            this.label1.ForeColor = Color.FromArgb(colorgen.Next());
        }
    }

    public void backgroundThread_DoWork(object sender, DoWorkEventArgs e)
    {
        foo = new System.Timers.Timer(16);
        foo.Elapsed += new ElapsedEventHandler(formUpdater);
        foo.Start();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:09:54.837

我只是在控制台应用程序中设置它，它每秒运行良好：

```
 var timer = new System.Timers.Timer(1000);

        timer.Enabled = true;
        timer.Elapsed += new ElapsedEventHandler(delegate(object sender, ElapsedEventArgs eventArgs)
                                                         {
                                                             Console.WriteLine("Elapsed");
                                                         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:10:37.947

当您至少需要`20`每秒精确次时，寄希望于系统计时器是一种不好的做法。

我建议使用像这样的循环

```
Timespan timePerFrame = Timespan.FromMilliseconds(16);

while (_isRunning)
{
    Stopwatch timer = Stopwatch.StartNew()

    // Action.

    while (timer.ElapsedMilliseconds < timePerFrame) { /* Nothing? */ }
} 
```

如果您的系统支持高精度秒表，这将为您提供完整的精度。（[`.IsHighResolution`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.ishighresolution.aspx)场）。

# ftpwebrequest - c# ftp 只写

> ID：12656840
> 
> 赞同：1
> 
> 时间：2012-09-29T21:55:03.467
> 
> 标签：ftpwebrequest, writeonly

当我尝试连接到“只写”ftp 时，以下代码将引发异常

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftp://...);

request.Credentials = new NetworkCredential("username", "password");

request.Method = WebRequestMethods.Ftp.UploadFile;

Stream ftpstream = request.GetRequestStream(); 
```

GetRequestStream() 抛出“权限被拒绝”异常，因为框架实现 FTP 命令如下： - open - user - pwd

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:05:07.533

看看[这个](http://social.msdn.microsoft.com/Forums/en-AU/netfxnetcom/thread/44dd4bd4-2404-4dcd-99ad-bcdb013a9d71)线程。

此外，为了避免幕后的 PWD，您可以使用 .Net FTP 客户端，例如[edtFtpNet](http://www.enterprisedt.com/products/edtftpnet/)，如下所示：

```
 var ftp = new FTPClient();
        ftp.BytesTransferred += new BytesTransferredHandler((o, e) => { Console.WriteLine("Remote Path: " + e.RemotePath + ", Remote File: " + e.RemoteFile + ", Bytes transfered: " + e.ByteCount); });
        ftp.TransferStartedEx += new TransferHandler((o, e) => { Console.WriteLine("FTP Transfer started!"); });
        ftp.TransferCompleteEx += new TransferHandler((o, e) => { Console.WriteLine("FTP Transfer completed!"); });

        try
        {
            ftp.RemoteHost = FTP_HOST;
            ftp.ConnectMode = FTPConnectMode.ACTIVE;
            ftp.Timeout = 120000;
            ftp.Connect();
            ftp.Login(FTP_USER, FTP_PWD);
            ftp.TransferType = FTPTransferType.BINARY;
            ftp.Put(GetBytes("file contents go here!"), Guid.NewGuid().ToString() + ".txt");
        }
        catch (Exception e)
        {
            Console.WriteLine("Error:" + e.ToString());
        }
        finally
        {
            ftp.Quit();
            Console.WriteLine("FTP Quit!");
        } 
```

# php - 在这种情况下替代滑线？

> ID：12656842
> 
> 赞同：0
> 
> 时间：2012-09-29T21:55:22.057
> 
> 标签：php

我有以下信息可以动态显示：

产品 XYZ

非常好

很好

很酷

那些非常好，非常好，非常酷是给定产品的优势，文字，描述优势，通常以项目符号的形式显示。

我想将它们存储在一个名为优点的单独表中是没有意义的，因为尽管显示它永远不会用于其他任何东西，而且我将其填充为过于矫枉过正。

所以我正在考虑在这个产品表上创建一个 varchar255 字段，并允许像这样插入值：

很好;很好;很酷

在自由格式的文本输入字段上。

然后将它们拆分为 php 数组。

我的问题是：有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:23:48.803

我想到了这些解决方案：

*   如果您想通过它的优势查找产品并且您拥有少于 64 个优势，那么您的数据库中的索引应该在属性上，并且您应该使用[SET](http://dev.mysql.com/doc/refman/5.0/en/set.html)数据类型，而且它可以节省使用的空间。

*   如果您不需要索引并且优点可能是任何模糊的描述，那么我认为您的方法可以。

*   如果这些组合是有限的，您可以使用所有这些组合创建额外的表，并将组合 id 插入到您的产品表中。很难插入（检查组合是否已经在表中，最终插入新组合并将其 id 写入产品表），但易于阅读。

*   在我工作的一家公司中，我们还使用了表格中的优势 1、优势 2 ...优势 N 列。它不是 2NF，但如果您希望用户直接输入这些值（正如您在评论中指出的那样），您可以在表单和[KISS中创建优势 1、优势 2 ...优势N 输入字段](http://en.wikipedia.org/wiki/KISS_principle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:20:07.843

如果您的文本`very nice, very good, very cool`是`Constant`并且它们没有因产品而异，我会使用如下内容：

```
// text from database, '-' means nothing
$a = 'NGC-------';

if ($a[0] == 'N')
    echo 'Very Nice';

if ($a[1] == 'G')
    echo 'Very Good';

// and so on ... 
```

顺便说一句，它将在您的数据库上节省大量空间，仅此而已。:)

# mysql - mysql，强制主键在两个表中是唯一的

> ID：12656843
> 
> 赞同：0
> 
> 时间：2012-09-29T21:55:25.947
> 
> 标签：mysql, primary-key

我有两个带有主键的 mysql 表（记录 'id' 字段）。这些表由 perl 应用程序使用。我想构建一个散列（在 perl 中），其中包括两个表中的记录，它们的 id 键控。当然，这不起作用，因为表之间的 id 不是唯一的。

无论如何要在mysql中的两个表中保持主要的唯一性？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:43:48.450

用作 Perl哈希`tablename . id`中的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:59:27.970

哈希 id1|id2 或您要使用的任何分隔符。那是它总是独一无二的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:02:14.957

可能存在性能或其他缺点，但请考虑使用 UUID 作为主键。

# android - 在 Android 中根据 Facebook 连接状态显示不同的布局

> ID：12656849
> 
> 赞同：0
> 
> 时间：2012-09-29T21:56:16.493
> 
> 标签：android, facebook, layout, login

我正在构建一个 Android 应用程序，我希望用户通过他们的 Facebook 详细信息进行连接。根据我的设计，当应用程序第一次启动时，我想显示一个带有 LOGIN facebook 按钮的布局。在用户第一次执行登录后，我不想再次显示此布局/活动 - 当应用程序重新启动时，

我想显示另一个（主）屏幕，而不是登录屏幕。

我应该如何实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:08:33.547

您需要跟踪用户是否已登录。完成此操作的最简单方法可能是使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，尽管有很多不同的方法可以完成此操作。

一些*伪代码*可能最能说明如何做到这一点：

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    if (!SharedPreferences.getBoolean("isLoggedIn")){
        // 1\. User is not logged in, show login layout
        setContentView(R.layout.login);

        //  2\. Let user login to Facebook

        //  3\. If login successful: 
        SharedPreferences.putBoolean("isLoggedIn", true);
        Intent intent = new Intent(this, HomeActivity.class);
        startHomeActivity();

        // 4\. ..else, show error message.
    } else {
        // isLoggedIn was true, so user is logged in. Start HomeActivity
        startHomeActivity()
    }
}

public void startHomeActivity(){
    Intent intent = new Intent(this, HomeActivity.class);
    startActivity(intent);
} 
```

# mysql - 在 SQL 中存储/查询特定树结构的任何更好的方法？

> ID：12656854
> 
> 赞同：0
> 
> 时间：2012-09-29T21:57:09.770
> 
> 标签：mysql, sql, tree, indexing

![在此处输入图像描述](../Images/082ee838d00ab1d3219b9b2849e66d06.png)

我们得到了这个数据模型。知道有限的树深度，我们当前的表与模型是 1:1 的，外键指向父节点。`Channel`到`Station`,`Measurement`到`Channel`和`Station`. 90% 的查询是：

```
select value from measurements where
fk_station=X and fk_channel=Y and timestamp>=A and timestamp<=B
order by timestamp asc 
```

其余 10% 与其他带时间戳的表类似，只是由于缺少`fk_channel`.

**我们面临的问题：**表中有数亿个唯一`[station,channel,timestamp]`行`Measurement`并且还在增长。时间戳索引已经非常大，排序子句非常慢，以至于我们不得不开始按*Station Id*拆分它；所以我们有表`Measurement_<Station Id>`，`Station`外键被省略了。它有很大帮助，但仍有一些表有数千万行。在负载高峰期，我们每分钟大约有 80000 个查询，并且这些更大的表上的查询明显更懒惰。我们仍然从一个 MySQL/ISAM 实例运行，没有任何花哨的优化技巧。文件系统上大约 150GB。

1.  是否有任何显着不同/更好的方式来存储这种数据模型？
2.  对于当前的结构，我们在这种大小/负载下遇到这种性能问题是否正常？机器是今天的平均硬件，没有嵌入式原子也没有8+核心野兽
3.  拆分`Measurement`表是正确的做法吗？我们不是 SQL 专家，但查询和所需的索引看起来如此明显，以至于我们甚至没有考虑“优化”它。拆分有很大帮助，但其他东西也可能
4.  有没有其他加速索引的方法？我们必须一遍又一遍地执行相同的索引，获得相同结果的子集，这有点愚蠢。我们永远不会使用任何其他索引，甚至不会更改为`desc`. 这是非常专业的设备。如果索引以某种方式是“本机顺序”会很好:-)
5.  是否有助于分发/分片拆分的`Measurement`表？正如我所说，有些表仍然很大，问题*感觉*是关于索引大小的分布无济于事，所以也许只是降低查询负载......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:06:20.967

在 mysql 等关系数据库中考虑的简单规则：

1.  获取太多数据永远不会很快。汇总一下就可以了。- 您的示例查询没有汇总任何内容。让我想知道您是否在应用程序中处理和汇总这些**价值**。提示：使用列存储引擎进行聚合，例如。infinidb，它也支持查询执行的并行性，innodb 不支持。
2.  对大量数据进行排序永远不会很快 - 问问自己，如果查询返回 10 万条记录，那么您的处理工作/前端网格等会消耗多少？网络用户可以在屏幕上消耗 100K 数据吗？不是真的，然后限制它。此外，按自动增量 ID 而不是时间戳排序。关系数据库引擎不适合对大量数据进行排序，您很快就会遇到天花板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:07:06.000

是否有可能将测量数据拆分到多个表中可以减小大小？如果 90% 的查询是过去 24 小时的时间戳，那么您可能需要微调该数据，并将其余的存储在单独的表甚至数据库中。我相信Measurement应该有一个FK只到Channel，它的ID只有PK，还有一个FK到Station。

# wordpress - 运行从 Github repo 获得的 Wordpress 代码

> ID：12656855
> 
> 赞同：0
> 
> 时间：2012-09-29T21:57:17.377
> 
> 标签：wordpress, github

我正在与一位朋友在 Wordpress 博客上合作工作，他的代码位于 Github 存储库上，并托管在 Amazon EC2 上。

我以前从未使用过 Wordpress，所以这个问题对专家来说可能听起来很愚蠢......

问题：如何预览我对博客的更改？一旦我对代码进行了更改（在我从 Github 克隆了 repo 之后）我应该在本地运行什么，以便我可以看到博客，就像我通过我的 Wordpress 帐户在线完成更改一样？

在我启动并运行之前，我无法开始任何事情，任何帮助将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:33:08.360

除非您更改 Wordpress 博客的代码，否则您只会更改可能与博客位于同一 EC2 实例上的数据库内容。如果您想在本地查看相同的内容，则必须在本地计算机上设置相同的博客并在本地添加相同的帖子。

但是 iirc 您可以在 Wordpress 中预览博客文章，因此您无需在本地测试它们。只是不要发布你的帖子。

# objective-c - Xcode iOS：从 NSDictionary 检索值并将其显示在 UITextView

> ID：12656857
> 
> 赞同：0
> 
> 时间：2012-09-29T21:57:44.927
> 
> 标签：objective-c, ios, xcode, uitextview, nsdictionary

我想将获得的 json 数据显示为：

```
NSDictionary *detail = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&e]; 
```

并希望在 UITextView(contact) 中显示它：

```
self.contact.text = [NSString stringWithFormat:@"%@",[detail valueForKey:@"Contact"]; 
```

但是，我得到如下输出：

```
("Washington St, SD, CA") 
```

详情如下：

```
(
    {
    Contact = "Washington St, SD, CA";
    Id = 1;
    Name = BJs;
 }
) 
```

我明白，因为它返回一个数组，但是如何在没有圆括号的字符串中显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:02:01.290

对于字典访问，理想情况下您应该使用`objectForKey:`，而不是`valueForKey:`（这与键值编码有关）。

我不知道您的原始 JSON 是什么样子，但如果是这样的话：

```
{"Contact": "Washinton St, SD, CA", ...} 
```

那么这应该可以正常工作。如果不是（即它实际上是 JSON 中的数组），您可能想要提取第一个元素（使用`[... objectAtIndex:0]`，或连接元素，或其他取决于您的应用程序）。

# objective-c - CALayer 不显示

> ID：12656861
> 
> 赞同：3
> 
> 时间：2012-09-29T21:58:18.113
> 
> 标签：objective-c, ios, core-animation

所以这是我第一次尝试使用 CALayer。构建成功并且没有报告错误，所以我认为我必须做一些明显错误的事情。但是该图层根本不显示。

```
- (void)viewDidLoad
{

    // Get Reliant Magenta in amazingly verbose manner
    CGColorSpaceRef rgbaColorSpace      = CGColorSpaceCreateDeviceRGB();
    CGFloat reliantMagentaValues[4]     = {(208/255),(27/255),(124/255),0.3f};
    CGColorRef reliantMagenta           = CGColorCreate(rgbaColorSpace, reliantMagentaValues);

    CALayer *reliantCanvasLayer         = [CALayer layer];

    reliantCanvasLayer.backgroundColor  = reliantMagenta;
    reliantCanvasLayer.frame            = CGRectMake(0, 0, 640, 960);

    [super viewDidLoad];

    [[[self view] layer] addSublayer:reliantCanvasLayer];

    CGColorRelease(reliantMagenta);

} 
```

我得到的不是一整页洋红色，而是灰色的空白视图。我怎么把这么简单的事情搞砸了？

* * *

更新

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    // Get Reliant Magenta in amazingly verbose manner
    CGColorSpaceRef rgbaColorSpace      = CGColorSpaceCreateDeviceRGB();
    CGFloat reliantMagentaValues[4]     = {(208/255),(27/255),(124/255),0.3f};
    CGColorRef reliantMagenta           = CGColorCreate(rgbaColorSpace, reliantMagentaValues);

    [[self view] layer].backgroundColor   = reliantMagenta;

    CGColorRelease(reliantMagenta);

} 
```

同样的问题，但视图现在是黑色的，并且不显示故事板中添加的元素

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T04:31:06.560

一个问题（可能是唯一的问题）是您正在使用所有零组件创建颜色。当您说`208/255`时，编译器使用整数执行除法并丢弃余数，因此`208/255`为 0。您需要用浮点除法：`208.0f / 255.0f`。

`UIColor`使用 a而不是自己设置 the`CGColorSpace`和 the也容易得多`CGColor`。试试这个：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIColor *reliantMagenta = [UIColor colorWithRed:208.0f / 255.0f
        green:27.0f / 255.0f blue:124.0f / 255.0f alpha:0.3f];

    CALayer *magentaLayer = [CALayer layer];
    magentaLayer.frame = CGRectMake(0, 0, 640, 960);
    magentaLayer.backgroundColor = reliantMagenta.CGColor;

    [self.view.layer addSublayer:magentaLayer];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:06:29.683

您正在添加一个图层作为其自身的子图层。`[self layer]`返回视图的**现有**层。如果要创建单独的图层，则必须手动进行。视图系统中可能有一些东西可以防止循环引用迭代失控。

作为参考，您应该养成`[super viewDidLoad]`在做任何其他事情之前先打电话的习惯。创建 a 的更简单方法`CGColor`是创建 a`UIColor`并获取其`CGColor`属性。

# php - 将列动态添加到列列表

> ID：12656864
> 
> 赞同：2
> 
> 时间：2012-09-29T21:58:34.340
> 
> 标签：php, doctrine-orm

我已经使用查询生成器构建了一个正确的工作查询。

但是现在，有一个条件，一个方法（负责动态地将一些表添加到查询中）必须向查询中添加一个列。

我尝试了以下方法（它要复杂得多，但几乎相同）：

```
$querybuilder->select('EntityA.Property')
             ->from ('EntityA');

// here is happening some awesome stuff... ;-)
// Now i have to add the Table, and The column

$querybuilder->innerJoin('EntityB'); // this is working
$querybuilder->add('select', 'EntityB.Property'); // overwrites my columnlist
// $querybuilder->select('EntityB.Property'); // also overwrites my columnlist 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:12:16.027

为什么你不只是像这样单独组装选择子句：

```
$fields = array();

$fields[] = "EntityA.Property"

// code here, and finally, you decide you need EntityB
$fields[] = "EntityB.Property"
$querybuilder->innerJoin('EntityB');

// done with building the query, assign select
$querybuilder->select($fields); 
```

# php - PHP Codeigniter uploads failing silently, no error log, no errors, nothing

> ID：12656866
> 
> 赞同：0
> 
> 时间：2012-09-29T21:58:50.933
> 
> 标签：php, codeigniter, upload

I've almost taken this exactly as is from the CI docs, made some minor alterations to suit my needs but overall nothing significant. The folder I am attempting to upload to exists and has `777` set to its permissions.

The controller:

```
 if($this->input->post('uploads'))
    {
        $config['upload_path'] = realpath(APPPATH.'../images');
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = 0;
        $config['max_width']  = 0;
        $config['max_height']  = 0;
        $config['remove_spaces'] = true;

        $this->load->library('upload', $config);

        if (!$this->upload->do_upload())
        {
            $data['errors'] = $this->upload->display_errors();
        }
        else
        {
            $data['upload_data'] = $this->upload->data();
        }
    } 
```

The View:

```
<?php
if(isset($errors))
{
    $this->genfunc->debugArray($errors);
}
if(isset($upload_data))
{
     $this->genfunc->debugArray($upload_data, 'php');
}
?>

<div id="gallery">
    <?php if (isset($images) && count($images)):
        foreach($images as $image): ?>
        <div class="thumb">
            <a href="<?php echo $image['url']; ?>">
                <img src="<?php echo $image['thumb_url']; ?>" />
            </a>                
        </div>
    <?php endforeach; else: ?>
        <div id="blank_gallery">Please Upload an Image</div>
    <?php endif; ?>
</div>

<div id="upload">
    <?php
    echo form_open_multipart('upload');
    echo form_upload('userfile');
    echo form_submit('uploads', 'Upload');
    echo form_close();
    ?>      
</div> 
```

The view is loaded as well, everything currently gets sent back to the same page, which is expected. But having taken from the CI example in the Docs, and going over everything I see no reason why this shouldnt be working. Hoping someone can shed some light on it, maybe I am missing something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:22:01.003

Apparently after all this futzin around. I changed

$this->load->library('upload', $config);

to

$this->load->library('upload'); $this->upload->initialize($upload_config);

While I was at it I changed my `$config` to `$upload_config` and that solved it. Not sure which was the conflict either using `$config` or just something flawed in the loading mechanism when the second param is passed. Either way. Uploads work now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:24:59.533

make sure you enable the debugging flag in the config file. Was facing the same issue and that got it solved. Also the directory in which the error log should be created in case of errors.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-29T22:16:56.837

Would initially try:

1.  Create an uploads directory off of your root site directory with 777 permissions
2.  update $config['upload_path'] = './uploads/';

# java - 非静态变量 c 不能从静态上下文中引用，非静态变量 a 不能从静态上下文中引用

> ID：12656872
> 
> 赞同：-1
> 
> 时间：2012-09-29T21:59:14.520
> 
> 标签：java, static, non-static

> **可能重复：**
> [不能从静态上下文（java）引用非静态变量](https://stackoverflow.com/questions/2559527/non-static-variable-cannot-be-referenced-from-a-static-context-java)

我试图创建同一个类的多个对象（在本例中为汽车），然后我试图检查是否创建了 c1（对象的名称）（知道它是），然后检查是否 c2（其他同一类的对象）被创建（知道它不是）。我创建了汽车类：包parkingLot；

```
/**
 *
 * @author HASLima
 */
public class Car {

String brand;
String plates;
int mileage;

public String getMarca() {
    return brand;
}

public void setMarca(String brand) {
    this.brand = brand;
}

public String getMatricula() {
    return plates;
}

public void setMatricula(String plates) {
    this.plates = plates;
}

public int getKilometros() {
    return mileage;
}

public void setKilometros(int mileage) {
    this.mileage = mileage;
}

} 
```

然后创建类 Park: /* * 要更改此模板，请选择 Tools | 模板 * 并在编辑器中打开模板。*/ 打包parkingLot;

```
/**
 *
 * @author HASLima
 */
public class Park {
    int nrOfCars;
    int space;
    Car[] c;
    int a = 0;

    public Park (int nrOfPlaces){
        space = nrOfPlaces;
        nrOfCars = 0;

     }
    public static void main(String[] args) {
        Park park1 = new Park(5);
        c[a] = new Car();
    }
} 
```

这就是问题所在，

c[a] = 新车（）；

返回此错误：

非静态变量 c 不能从静态上下文中引用，非静态变量 a 不能从静态上下文中引用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:00:34.347

该数组`Car[] c`被定义为 Park 的对象变量，因此您必须使用`park1.c[a]`而不是尝试调用引用`c[a]`

变量`a`也是 Park 的对象，您不能从`main`. 它应该`park1.a`或更好地用吸气剂包装变量`park1.getA()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:08:54.003

除非您在其实例上调用它们，否则无法在静态方法中访问非静态变量。在您的情况下，因为 c[] 是一个非静态的实例变量，并且您在静态方法中访问它，您应该像这样在 park instanc 上访问它：

```
Park park1 = new Park(5);
 park1.c[park1.a] = new Car(); 
```

# php - 将 in_array() 与数组中的键和值一起使用？

> ID：12656876
> 
> 赞同：0
> 
> 时间：2012-09-29T21:59:26.720
> 
> 标签：php, arrays

假设我有一个数组

```
$array = array(
            'username' => "username",
            'location' => "location",
            'other' => "other"); 
```

该数组可以保存许多用户的数据，因此每个“用户名”、“位置”和“其他”字段可能有不同的值。如何使用 in_array() 或其他函数来确定数组中是否已经存在特定用户名？因为如果用户有一个像“nyc”这样的用户名和一个“nyc”的位置，我会怎么做

```
in_array("nyc", $array); 
```

究竟应该如何处理这样的事情？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:06:04.517

为了实现我认为你想要的东西，你可以创建一个具有相同键的关联数组的数组。

```
<?php
// This syntax will work only on PHP 5.4
$a=[["name"=>"john","age"=>25],["name"=>"philip","age"=>110]];
print_r(array_filter($a, function($item) {return $item["name"] === "john"; }));
?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [name] => john
            [age] => 25
        )

) 
```

如果你只是想知道一个叫 John 的人是否在列表中，你可以在返回的数组上使用 sizeof/count。

这将允许您拥有任意数量的重复项，并且您不需要指定任何键。查看函数：array_filter、array_reduce、array_map。有了所有这些，您就可以像上面的示例一样使用闭包来处理您的列表。

您也可以拥有对象，而不是在数组中使用关联数组。对象更重，需要初始化和其他东西，所以将它们用于微小的静态（硬编码）列表是很奇怪的。但是当您的数据结构增长并且您希望确保每个列表项都具有特定属性时，它们可能会派上用场（类的构造函数可以确保所有内容都已初始化）。但好在 filter、reduce 和 map 仍然可以工作。然后，“$item”将成为您的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:02:33.647

```
 $users = array( 'user_id' => array('username' => "username",
                                    'location' => "location",
                                    'other' => "other"); 
```

user_id 是他们的 NUMBER 个 user_id

所以你然后打电话给 $users['####']['username'];

IE：

```
 $users = array( '1' => array('username' => 'Jim',
                              'location' => 'Florida',
                               'other' => "other"),
                 '2' => array('username' => 'Jane',
                              'location' => 'Maryland',
                               'other' => "Grapes")); 
```

然后使用 array_keys() 搜索他们的 user_id

# jquery - jquery选择的插件背景图用firefox看不到

> ID：12656878
> 
> 赞同：0
> 
> 时间：2012-09-29T21:59:42.630
> 
> 标签：jquery, firefox, jquery-chosen

通常选择的插件在大多数浏览器甚至旧版 ie 上都可以正常工作。

但是今天我注意到最后一个firefox版本有插件问题。

下拉菜单的图像消失了：

![在此处输入图像描述](../Images/b16cc3b927998c05395ce3f3afc13e12.png)

从官方网站可以看到同样的问题

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:27:45.220

伙计，该插件在所有浏览器的最新版本（包括 firefox chrome ie）上显示我的电脑上的下拉菜单图像。

# jquery - 带有动画的 jQuery UI Slider 设置值

> ID：12656880
> 
> 赞同：2
> 
> 时间：2012-09-29T22:00:11.243
> 
> 标签：jquery, jquery-ui, slider, jquery-ui-slider

我正在使用 jQueryUI Slider 插件从一组值中选择一个值。

假设我有一个有 5 个值的滑块。我想达到类似这样的效果：http: [//jqueryui.com/demos/slider/#hotelrooms](http://jqueryui.com/demos/slider/#hotelrooms)，但我希望滑块手柄在值之间平滑移动，如果手柄在两个值之间下降，它应该捕捉到最近

我想出了一个解决方法，但它似乎有问题。[这是一个小提琴](http://jsfiddle.net/6Tw9U/10/)。我将最小值设置为 1，最大值设置为 500，以在拖动时获得平滑的滑动效果，然后在停止事件时检查该值是否等于 100（只是现在，为了简单起见），如果不是，请设置将滑块的值设置为 100。一切正常，但即使我将动画值设置为 500，也没有很好的平滑滑动效果。

有没有办法通过这种解决方法完成它？还是我应该尝试别的？随意使用和更改我的 jsfiddle。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:24:55.187

# 更新

这是一个使用 steps 和 setTimeout 使数字变化平滑的新[小提琴。](http://jsfiddle.net/6Tw9U/22/)根据您的实际步骤，您必须调整 setTimeout 速度和 smoothDigitIncrease() 中增加数字的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:05:53.953

而不是直接分配新值以增量方式进行，例如

当前值 =1

要设置的值 = 5

从 1 到 5 循环，而不是直接设置每个 100 或 400 毫秒的延迟

# sharepoint-2010 - 没有为消息 Nservicebus 2.6 和 SharePoint 指定目标

> ID：12656885
> 
> 赞同：1
> 
> 时间：2012-09-29T22:00:54.833
> 
> 标签：sharepoint-2010, nservicebus

所以我试图从 SharePoint webpart 向端点发送一条简单的消息。现在，我将总线设置在 webpart 中使用的简单静态类中。该类被调用并且总线似乎正在工作，但是当我尝试发送消息时，我得到：

没有为消息 SharePointMessages.CreateProject 指定目标。无法发送消息。检查配置文件中的 UnicastBusConfig 部分并确保消息类型存在 MessageEndpointMapping。

该类如下所示：

```
 public static class Infrastructure
{
    public static IBus Bus { get; private set; }
    static Infrastructure()
    {
        var mappings = new MessageEndpointMappingCollection();
        mappings.Add(new MessageEndpointMapping()
                        {
                            Messages = "SharePointMessages.CreateProject",
                            Endpoint = "SharePointProxy"
                        });

        Configure config = Configure.WithWeb();
        config
            .Log4Net()
            .DefaultBuilder()
            .XmlSerializer()
            .MsmqTransport()
            .IsTransactional(true)
            .UnicastBus()
            .Configurer.ConfigureComponent<UnicastBusConfig>(ComponentCallModelEnum.None)
            .ConfigureProperty(x => x.MessageEndpointMappings, mappings);

            Bus = config.CreateBus().Start();

    }

} 
```

SharePointMessages.CreateProject 类实现 IMessage 并具有两个属性。如果队列不存在，则会正确创建队列。所以看起来一切正常，但由于某种原因，映射不存在。谁能看到我做错了什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:48:06.803

您必须使用自定义配置源 - [http://docs.particular.net/nservicebus/messaging/message-owner](http://docs.particular.net/nservicebus/messaging/message-owner)

# php - 表格中的右上角单元格未显示

> ID：12656886
> 
> 赞同：1
> 
> 时间：2012-09-29T22:00:59.870
> 
> 标签：php, html, mysql, database, html-table

在 Stack Overflow 的几个人的帮助下，我几乎完美地完善了我的网页。

我有一个从数据库中提取信息的 PHP 表。但是，由于某种原因，它将右上角的单元格留空。有 3 列和大约 200 行，唯一显示空白的单元格是右上角。

如果有人可以发布要更改的示例代码，那就太好了。我敢肯定这很简单，我很可能只是盯着它太久了！

表格代码靠近底部：

```
<?php include("header.html"); ?>

<center>
<?php
    /*
        Place code to connect to your DB here.
    */
    include('database.php');    // include your code to connect to DB.

    $tbl_name="list";       //your table name
    // How many adjacent pages should be shown on each side?
    $adjacents = 3;

    /* 
       First get total number of rows in data table. 
       If you have a WHERE clause in your query, make sure you mirror it here.
    */
    $query = "SELECT COUNT(*) as num FROM $tbl_name";
    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages[num];

    /* Setup vars for query. */
    $targetpage = "index.php";  //your file name  (the name of this file)
    $limit = 1001;                              //how many items to show per page
    $page = $_GET['page'];
    if($page) 
        $start = ($page - 1) * $limit;          //first item to display on this page
    else
        $start = 0;                             //if no page var is given, set start to 0

    /* Get data. */
    $sql = "SELECT website FROM $tbl_name LIMIT $start, $limit";
    $result = mysql_query($sql);

    /* Setup page vars for display. */
    if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination2\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\">&lt; previous</a>";
        else
            $pagination.= "<span class=\"disabled\">&lt; previous</span>";  

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">next &gt;</a>";
        else
            $pagination.= "<span class=\"disabled\">next &gt;</span>";
        $pagination.= "</div>\n";       
    }
?>

    <?php
$i = 0;
echo '<table style="table-layout:fixed; width:1050px;"><tr>'; 
        while($row = mysql_fetch_array($result))
{
    $i ++;
    if ($i<=2)
    {
      echo '<td style="word-wrap: break-word;">
         <div><a href="http://www.test.com/check.php?site='.$row[website].'">'.$row[website].'</a></div>
       </td>'; 
    }

    else
    {       
      echo '</tr><tr>';
      echo '<td style="word-wrap: break-word;"><div><a href="http://www.test.com/check.php?site='.$row[website].'">'.$row[website].'</a></div></td>'; 
      $i = 0;
   }
}  
echo '</tr></table>';
    ?>

<?=$pagination?>
</center>

<?php include("footer.html"); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:16:19.707

尝试移动

```
$i ++; 
```

在循环结束之前的整个条件之后：

```
 else
        {       
          echo '</tr><tr>';
          echo '<td style="word-wrap: break-word;"><div><a href="http://www.test.com/check.php?site='.$row[website].'">'.$row[website].'</a></div></td>'; 
          $i = 0;
       }
       $i++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:34:05.683

这个while循环的逻辑是

设置标志（$test）

第一次执行 while loop $test = 0 和 xxxx。

在循环结束时

$test 设置为 1

下一次和后续时间循环 yyyy 被执行

```
$test = 0;
 echo '<table style="table-layout:fixed; width:1050px;"><tr>'; 
    while($row = mysql_fetch_array($result))
    {

    if ($test==0){
      xxxx;
    }else{
    yyyy,
    }
   $test =1;
 } 
```

# php - PHP获取远程文件mime-type

> ID：12656889
> 
> 赞同：10
> 
> 时间：2012-09-29T22:01:21.803
> 
> 标签：php, mime-types

嘿，检查远程文件 mime 类型的最快方法是什么...我正在考虑从第一个字节中读取一些，甚至更多...我花了几个小时思考如何使事情变得正确，但我没有任何想法...我必须检查远程文件是否为 mp3，但它必须是 fastcheck...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T22:07:56.120

PHP curl_getinfo()

```
<?php
    # the request
    $ch = curl_init('http://www.google.com');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_exec($ch);

    # get the content type
    echo curl_getinfo($ch, CURLINFO_CONTENT_TYPE);

    # output
    // text/html; charset=ISO-8859-1
?> 
```

输出

```
HTTP/1.1 301 Moved Permanently
Location: http://www.google.com/
Content-Type: text/html; charset=UTF-8
Date: Fri, 09 Apr 2010 20:35:12 GMT
Expires: Sun, 09 May 2010 20:35:12 GMT
Cache-Control: public, max-age=2592000
Server: gws
Content-Length: 219 
```

为了实际确认文件是否包含实际的 MP3 数据或任何其他媒体格式，我使用[getID3()](http://www.getid3.org/demo/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T22:04:00.327

发出 HEAD 请求。查看服务器声称它是什么 Content-Type。

[这个 stackoverflow 问题](https://stackoverflow.com/questions/1378915/header-only-retrieval-in-php-via-curl)讨论了通过 PHP 访问 HTTP 标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-02T00:40:30.797

仅检查`Content-Type`您信任的远程服务器时：

*   远程服务器可能是恶意的并故意提供错误的 Content-Type
*   Content-Type 是使用文件扩展名生成的，因此恶意用户可以使用授权扩展名存储错误的文件类型以绕过您的安全性

更安全的方法是将文件下载到临时文件夹中，然后[`mime_content_type`](https://www.php.net/manual/en/function.mime-content-type.php)使用`magic.mime`.

此技术仅使用*幻数*，仅读取文件的第一个字节（标题），可以绕过。

最安全的方法是使用一个库来验证给定文件对于它应该是的所需类型是否有效。

# mysql - 选择唯一字段，但不确定 DISTINCT 或 GROUP BY 是否会按我的需要执行

> ID：12656896
> 
> 赞同：0
> 
> 时间：2012-09-29T22:02:14.457
> 
> 标签：mysql, sql

我正在使用 MySQL 5.5.8 版。

可以说我有这样的表，条目，结构：

```
entry_id int PK
member_id FK 
```

每个成员可以有多个条目。我想随机获取其中的 10 个，但我需要以一种允许被选中的几率随着成员拥有的条目数量而增加的方式获取它们。我知道我可以这样做：

```
SELECT member_id
FROM entries
GROUP BY member_id
ORDER BY RAND()
LIMIT 10 
```

但我不确定这是否会达到我想要的效果。MySQL 会将记录分组然后选择 10 吗？如果是这样，那么每个成员都有相同的机会被选中，这不是我想要的。我进行了一些测试和搜索，但无法得出明确的答案。有谁知道这是否会做我想做的事，还是我必须以不同的方式做事？任何帮助，将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:25:42.410

`LIMIT 10`将在（在这种情况下）随机顺序中选择 10 条记录。这确实是在分组之后。

也许你可以`ORDER BY RAND() / count(*)`。这样，对于有更多问题的用户来说，这个数字可能会更小，因此他们更有可能进入前 10 名。

[编辑]

顺便说一句，似乎随着时间的推移（随着数据的增长）`ORDER BY RAND()`变得更慢。有几种方法可以解决这个问题。Mediawiki（维基百科背后的软件）有一个有趣的方法：它为每个页面生成一个随机数，因此当您选择“随机页面”时，它会生成一个介于 0 和 1 之间的随机数并选择最接近该数字的页面：

```
WHERE number > {randomNumber} ORDER BY number LIMIT 1` 
```

这样就不必为每个查询生成该临时表。如果数据增长，您将需要定期重新生成数字，并且必须确保均匀生成数字。这很容易：对于新记录，您只需生成一个随机数。定期更新整个列表：查询所有记录。然后，为该顺序中的每条记录分配一个介于 0 和 1 之间的数字，但以递增的数字递增`1 / recordCount`。这样，记录是均匀分布的，每条记录的查找变化都是相同的。

你也可以用那个方法。从长远来看，这将使您的查询更快，并且您可以使分布更智能：1）您可以使用“totalEntryCount”而不是使用“memberCount”。`1 / 'memberCount'`2）您可以使用 ，而不是增加`entryCountForMember / totalEntryCount`。这样一来，拥有更多条目的成员之前的差距会更大，因此他们匹配随机数的机会也会更大。例如，您的成员可能如下所示：

```
name  entries   number  delta
bob        10     0.1    0.10
john        1     0.11   0.01
jim         5     0.16   0.05
fred       84     1      0.84 
```

当然，增量不会保存，但它会显示添加的数字。在 Mediawiki 示例中，此增量对于每个页面都是相同的，但在您的情况下，它可能取决于条目数。现在你看，bob 和 john 之间只有很小的差距，所以你在 0 和 bob 之间选择一个随机数的机会是在 bob 和 john 之间选择一个随机数的十倍。所以，挑选鲍勃的机会是挑选约翰的十倍。

您将需要一个（cron）作业来定期重新分配数字，因为您不想在每次修改时都这样做，但是对于您正在处理的数据类型，它不必是实时的，如果您有很多成员和许多条目，它会使您的查询更快。

# c# - 泛型类型作为泛型类型参数

> ID：12656901
> 
> 赞同：0
> 
> 时间：2012-09-29T22:02:30.387
> 
> 标签：c#, c#-4.0, generics

```
// EF (Model) project
class EntityBase { } // base class for all types
class Person : EntityBase // specific implementation for type Person

// ViewModel project
class EditableViewModel<T> where T : EntityBase // base class for all viewmodel types
class PersonViewModel : EditableViewModel<Person>
class CollectionViewModel<T> where T : EditableViewModel<EntityBase> // base class that handles CRUD operation on EditableViewModel<T> collections

// everything up to this point work. I am unable to create specific instance of CollectionViewModel<>
class AllPersonsViewModel : CollectionViewModel<PersonViewModel> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:07:20.083

您来自，`CollectionViewModel<PersonViewModel>`但您被限制`T`为`EditableViewModel<EntityBase>`. `PersonViewModel`是一个`EditableViewModel<Person>`，但它不是一个`EditableViewModel<EntityBase>`。这两种类型是无关的。

为什么它们不相关？示例：如果 B 与 A 的赋值兼容，则`List<B>`与 的赋值不兼容`List<A>`。

如果您想了解有关这项研究的更多信息，请参阅 C# 中的协变和逆变主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:37:29.090

您可以这样实现：

```
class CollectionViewModel<TEntity, TViewModel>
    where TViewModel : EditableViewModel<TEntity>
    where TEntity : EntityBase

class AllPersonsViewModel : CollectionViewModel<Person, PersonViewModel> 
```

正如 usr 的回答所暗示的那样，如果将类型限制为接口而不是抽象基类，您将获得更大的灵活性；如果接口是协变或逆变的，则尤其如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T22:58:16.950

如果您愿意使用接口而不是类，则可以轻松地进行协变。以下代码编译良好：

```
class EntityBase { }
class Person : EntityBase {}

interface EditableViewModel<out T> where T : EntityBase {} // Must be an interface. "out" marks T as a covariant parameter
class PersonViewModel : EditableViewModel<Person> {}
class CollectionViewModel<T> where T : EditableViewModel<EntityBase> { }

class AllPersonsViewModel : CollectionViewModel<PersonViewModel> { } 
```

# java - 非静态对象中的 JTable

> ID：12656903
> 
> 赞同：0
> 
> 时间：2012-09-29T22:03:11.380
> 
> 标签：java, swing, jtable

我创建了一个显示项目列表的 GUI 类。当用户选择一个项目时，它会弹出一个显示 JTable 的新窗口，该窗口应该提供该项目的详细信息（两列：左侧的参数，右侧的值）。这种（有点）一直有效，直到我决定让表类中的所有方法和变量都不是静态的，以防用户想要同时打开多个表窗口。

然后它停止工作。表不会显示。所有代码都执行了，但是表是空的，即使我使用了它的模型的 add 方法。

（另外，我很欣赏有关 GUI 更好想法的评论，主要是因为其中一个字段称为“描述”并且可能很长。我正在为自己编写应用程序，所以功能是第一要务）

编辑：这里有一些代码，不要犹豫，问我更多。（我一开始没有复制它，因为我认为它很简单）

JTable 类，从第 82 行开始——所有其余部分都是自动生成的。

```
public void main(ArrayList<String> l, ArrayList<String> d) {
    labels = l;
    data = d;
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(PopupTable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(PopupTable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(PopupTable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(PopupTable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new PopupTable().setVisible(true);
            model.addColumn("Description");
            model.addColumn("Value");
            for (int i = 0; i < data.size(); i++) {
                Object[] r = {labels.get(i), data.get(i)};
                System.out.println(labels.get(i) + data.get(i));
                model.addRow(r);
            }
            Object[] asd = {"Name", "Skelet"};
            model.addRow(asd);
        }
    });
}

public static void asd() {
    System.out.println("Bazinga!");
}
private ArrayList<String> labels;
private ArrayList<String> data;
private DefaultTableModel model = new DefaultTableModel();
;
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JTable table;
// End of variables declaration                   
} 
```

另一个类通过发送两个列表来调用这个“main”方法，一个用于字段数据，另一个用于每个数据的描述（第一个将发送“2000”，第二个将发送“Experience”）。正如我所说，如果变量和方法是静态的，那么一切正常。如果不是，则一切正常，除了没有显示的表。

这是来自外部类的代码，我用它来创建 Table 类：

```
new PopupTable().main(list1, list2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:32:24.257

我刚刚注意到 run() 方法有：

```
new PopupTable().setVisible(true); 
```

所以我删除了它，然后像这样运行这个类：

```
PopupTable pt = new PopupTable();
pt.main(MagiciaFileManipulator.getMetadata(), itemList.get(0));
pt.setVisible(true); 
```

现在一切正常！我不敢相信它是如此简单，我以为我查看了所有内容并错误地认为这是 JTables 和静态/非静态的基本问题。

# objective-c - UICollectionView 没有出现

> ID：12656910
> 
> 赞同：5
> 
> 时间：2012-09-29T22:04:18.323
> 
> 标签：objective-c, ios, xcode, ipad, uicollectionview

我正在尝试在扩展的视图控制器中以`UICollectionView` **编程**`UIViewController`方式进行设置。出于某种原因，我的收藏视图根本没有出现。下面是我所拥有的。

为什么不出现？我将它连接到委托和数据源，并将其作为子视图添加到`self.view`. 我的代码中缺少什么？

**在我的`.h`文件中：**

```
@interface MainViewController : UIViewController
{
    @private
    UICollectionView *_collectionView;
    NSMutableArray *_results; // data source array
}
@end 
```

**在我的`.m`文件中：**

```
@interface MainViewController () <UICollectionViewDataSource, UICollectionViewDelegateFlowLayout>
@property (nonatomic, retain) UICollectionView *collectionView;
@property (nonatomic, retain) NSMutableArray *results;
@end

@implementation MainViewController

@synthesize collectionView = _collectionView;
@synthesize results = _results;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // some init stuff - nothing to do with collection view.
    }

    return self;
}

- (void)loadView
{
    self.results = [NSMutableArray array];
    UIImage *image1 = [UIImage imageNamed:@"img1.jpg"];
    UIImage *image2 = [UIImage imageNamed:@"img2.jpg"];
    [self.results addObject:image1];
    [self.results addObject:image2];

    self.collectionView.dataSource = self;
    self.collectionView.delegate = self;

    UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];

    UICollectionView *collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) collectionViewLayout:flowLayout];
    self.collectionView = collectionView;

    [self.view addSubview:self.collectionView];

    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"Cell"];
    [self.collectionView reloadData];

}

- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
{
    return [self.results count];
}

- (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView
{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    cell.backgroundColor = [UIColor colorWithPatternImage:[self.results objectAtIndex:indexPath.row]];
    return cell;
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    UIImage *image = [self.results objectAtIndex:indexPath.row];    
    return CGSizeMake(image.size.width, image.size.height);
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
    return UIEdgeInsetsMake(50, 20, 50, 20);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:19:33.943

除非我将 loadView 方法更改为 viewDidLoad，否则我在尝试运行您的代码时遇到错误——根据您不应该直接调用 loadView 的文档。为了让数据源和委托方法运行，我将设置委托和数据源的行移到了你设置 self.collectionView = collectionView 的下方

```
 self.collectionView = collectionView;
    self.collectionView.dataSource = self;
    self.collectionView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:19:01.677

你的`numberOfSectionsInCollectionView:`回报`0`。对于具有一个部分的集合视图，您应该返回`1`或不实现此方法。

我也看不到你在哪里 alloc/init `self.collectionView`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:34:38.317

我最终继承了 UICollectionViewController 而不是`UIViewController`将 init 方法更改为：

`- (id)initWithCollectionViewLayout:(UICollectionViewLayout *)layout`

它奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-15T15:12:26.167

您只需要将您的 CollectionView 委托和数据源绑定到 StoryBoard 中的 ViewController。[在此处输入图像描述](http://i.stack.imgur.com/EAJ6t.png)

# java - 使用迷宫求解器进行递归

> ID：12656913
> 
> 赞同：0
> 
> 时间：2012-09-29T22:04:45.080
> 
> 标签：java, recursion, stack-overflow, maze

该项目是使用递归和树在Java中编写一个迷宫求解器（我使用的是我自己的链表，不完全确定它是否是一棵树，但我不介意）。

讲师从不解释任何东西，所以我把所有的知识都放在网上。我的递归方法有问题，我不确定该怎么做，因为我找不到与我的项目相关的示例

在我的链表中，我有指向右侧、左侧、底部和顶部节点的链接。例如，如果您的右侧有一堵墙，则链接将为空。我在链表`wallRight`,`wallLeft`中也有布尔值`wallBottom`，`wallTop`看看右边是否有墙。因此，如果右侧有一堵墙，“右”链接将为空且`wallRight`为真。

我还使用图像标签，所以如果我降落在一个地方，就会显示图像。我做了一个方法，如果我在位置 1，它会显示标签 1，所以在递归方法中我使用`int pos`来知道要显示哪个标签。

现在我的递归方法遇到了麻烦。我已经尝试了两种方法，但都不起作用。这是他们两个：

```
public boolean move(Maze rigting,int pos) // Righting = direction
{
   if(rigting.goal == true)
       return true; //BASE CASE - tests if it is on the goal node

   else if(rigting.wallR != true) //checks if there is a wall on the right
   {
       pos += 1;
       move(rigting.right, pos); //moves right

       showLabel(pos);
       return true;
   }

   else if(rigting.wallD != true) //checks if there is a wall below
   {
       pos += 10;
       move(rigting.down, pos); //moves down

       showLabel(pos);
       return true;
   }

   else if(rigting.wallL != true) //checks if there is a wall on the left
   {
       pos -= 1;
       move(rigting.left, pos); //moves left

       showLabel(pos);
       return true;
   }

   else if(rigting.wallU != true) //checks if there is a wall above
   {
       pos -= 10;
       move(rigting.up, pos); //moves up

       showLabel(pos);
       return true;
   }

   return false; //I know this return is incorrect, but it won't run without one
 } 
```

* * *

```
public boolean move(Maze rigting,int pos) //Righting = direction
{
    if(rigting.goal == true)
        return true;

    return (rigting.wallR != true) ? move(rigting.right, pos += 1) : false ||
    (rigting.wallD != true) ? move(rigting.down, pos += 10) : false ||
    (rigting.wallL != true) ? move(rigting.left, pos -= 1) : false ||
    (rigting.wallU != true) ? move(rigting.up, pos -= 10) : false;
} 
```

这两个都给出了stackoverflow异常......
我认为我的错误是，如果右边有一堵墙，那么链接 Right 是`null`. 如果我能以某种方式使它没有任何链接`null`，那么我就不需要布尔值`wallRight`等，但我不知道如何实现它。

如果你能把我送到正确的方向，我将不胜感激！我只需要在 10 月 10 日提交项目，所以如果我做错了，我不介意重新开始！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:36:36.967

由于这是你的作业，我不会在这里给你一个解决方案，而是一些提示。

1.  您的第一个解决方案不考虑后续调用的结果`move()`，因此递归仅在您达到目标（意外）时结束。
2.  在您的第二个解决方案中，您考虑了结果，但没有为您在循环中移动的情况做好准备。您需要标记您已经访问过的节点并在那里中断（返回值为 false）。

对于递归，最好从中断条件开始（就像您所做的那样），然后实现一个简单的案例（例如，总是正确）。管理简单案例后，您可以添加其他人（分支）

# c# - 如何在实体框架代码优先方法中映射自身的递归关系

> ID：12656914
> 
> 赞同：10
> 
> 时间：2012-09-29T22:04:53.363
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4

我想要创建的只是基本的递归类别。如果设置为 null，则类别为根，如果`RootCategory_Id`设置为某个 id，则属于其他类别。我在`Seed()`测试方法中添加了具有两个子类别的类别，但它不起作用。（我后来检查了数据库，有插入）

### 类别型号

```
public class Category
{
    public int ID { get; set; }
    public Category RootCategory { get; set; } // This one works good, it also creates "RootCategory_Id" in database on "update-database"

    public ICollection<Category> ChildCategories { get; set; } // This is always null, how to map it correctly?

    public string Name { get; set; }
} 
```

### 种子法

```
protected override void Seed(Test.Infrastructure.TestDataContext context)
{
    context.Categories.Add(new Category() {
        Name = "First Category", ChildCategories = new List<Category>() {
            new Category(){
                Name = "Second Category"
            },
            new Category(){
                Name = "Third Category"
            }
        }
    });

    context.SaveChanges();
} 
```

### 这就是我测试它不起作用的方式

```
public ActionResult Test()
{
    // After checking DB my root is 4, and two categories that have RootCategory_Id set to 4
    var c = _db.Categories.Where(x => x.ID == 4).Single();
    return Content(c.ChildCategories.FirstOrDefault().Name); // Always returns null, even c.ChildCategories.Count() returns 'null'
} 
```

### 我想要实现的图片

*这是使用 linq-to-sql 从数据库优先方法生成的*
![在此处输入图像描述](../Images/c99b917732ce50469b6e5e1088604874.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-29T18:57:29.540

我真的不想在这里使用 necro-thread，但我一直在寻找如何解决这个确切问题的方法。

这是我的解决方案；它有点冗长，但它允许使用更具可扩展性的 Code First 编程方法。它还引入了策略模式以允许 SoC，同时尽可能保持 POCO。

## 第 1 步：创建实体原语和接口。

**实体接口：**

```
/// <summary>
///     Represents an entity used with Entity Framework Code First.
/// </summary>
public interface IEntity
{
    /// <summary>
    ///     Gets or sets the identifier.
    /// </summary>
    /// <value>
    ///     The identifier.
    /// </value>
    int Id { get; set; }
} 
```

**IRecursiveEntity 接口：**

```
/// <summary>
///     Represents a recursively hierarchical Entity.
/// </summary>
/// <typeparam name="TEntity"></typeparam>
public interface IRecursiveEntity <TEntity> where TEntity : IEntity
{
    /// <summary>
    ///     Gets or sets the parent item.
    /// </summary>
    /// <value>
    ///     The parent item.
    /// </value>
    TEntity Parent { get; set; }

    /// <summary>
    ///     Gets or sets the child items.
    /// </summary>
    /// <value>
    ///     The child items.
    /// </value>
    ICollection<TEntity> Children { get; set; }
} 
```

**实体抽象类：**

```
/// <summary>
///     Acts as a base class for all entities used with Entity Framework Code First.
/// </summary>
public abstract class Entity : IEntity
{
    /// <summary>
    ///     Gets or sets the identifier.
    /// </summary>
    /// <value>
    ///     The identifier.
    /// </value>
    public int Id { get; set; }
} 
```

**RecursiveEntity 抽象类：**

```
/// <summary>
///     Acts as a base class for all recursively hierarchical entities.
/// </summary>
/// <typeparam name="TEntity">The type of the entity.</typeparam>
public abstract class RecursiveEntity<TEntity> : Entity, IRecursiveEntity<TEntity> 
    where TEntity : RecursiveEntity<TEntity>
{
    #region Implementation of IRecursive<TEntity>

    /// <summary>
    ///     Gets or sets the parent item.
    /// </summary>
    /// <value>
    ///     The parent item.
    /// </value>
    public virtual TEntity Parent { get; set; }

    /// <summary>
    ///     Gets or sets the child items.
    /// </summary>
    /// <value>
    ///     The child items.
    /// </value>
    public virtual ICollection<TEntity> Children { get; set; }

    #endregion
} 
```

**注意：**有些人建议对这篇关于这门课的帖子进行编辑。该类只需要接受`RecursiveEntity<TEntity>`作为约束，而不是`IEntity`使其被约束为仅处理递归实体。这有助于缓解类型不匹配异常。如果`IEntity`改为使用，则需要添加一些异常处理来应对不匹配的基本类型。

Using`IEntity`将给出完全有效的代码，但它不会在所有情况下都按预期工作。使用可用的最高根并不总是最佳实践，在这种情况下，我们需要将继承树限制在比该根级别更远的位置。我希望这是有道理的。这是我一开始玩的东西，但是在填充数据库时我遇到了很大的问题；特别是在实体框架迁移期间，您没有细粒度的调试控制。

在测试期间，它似乎也不能很好地与`IRecursiveEntity<TEntity>`任何一个一起玩。我可能很快就会回到这个问题，因为我正在刷新一个使用它的旧项目，但是这里写的方式是完全有效的并且可以工作，我记得调整它直到它按预期工作。我认为代码优雅和继承层次结构之间存在权衡，其中使用更高级别的类意味着在`IEntity`and之间转换大量属性`IRecursiveEntity<IEntity>`，这反过来又会降低性能并且看起来很难看。

## 第 2 步：派生 RecursiveEntity。

我使用了原始问题中的示例...

**类别具体类：**

```
public class Category : RecursiveEntity<Category>
{
    /// <summary>
    ///     Gets or sets the name of the category.
    /// </summary>
    /// <value>
    ///     The name of the category.
    /// </value>
    public string Name { get; set; }
} 
```

除了非派生属性之外，我已经从类中删除了所有内容。其`Category`所有其他属性都来自其自关联的`RecursiveEntity`类的泛型继承。

## 第 3 步：扩展方法（可选）。

为了使整个事情更易于管理，我添加了一些扩展方法来轻松地将新子项添加到任何父项。我发现，困难在于您需要设置一对多关系的两端，而仅仅将孩子添加到列表中并不能让您按照预期的方式处理它们。这是一个简单的修复程序，从长远来看可以节省大量时间。

**RecursiveEntityEx 静态类：**

```
/// <summary>
///     Adds functionality to all entities derived from the RecursiveEntity base class.
/// </summary>
public static class RecursiveEntityEx
{
    /// <summary>
    ///     Adds a new child Entity to a parent Entity.
    /// </summary>
    /// <typeparam name="TEntity">The type of recursive entity to associate with.</typeparam>
    /// <param name="parent">The parent.</param>
    /// <param name="child">The child.</param>
    /// <returns>The parent Entity.</returns>
    public static TEntity AddChild<TEntity>(this TEntity parent, TEntity child)
        where TEntity : RecursiveEntity<TEntity>
    {
        child.Parent = parent;
        if (parent.Children == null)
            parent.Children = new HashSet<TEntity>();
        parent.Children.Add(child);
        return parent;
    }

    /// <summary>
    ///     Adds child Entities to a parent Entity.
    /// </summary>
    /// <typeparam name="TEntity">The type of recursive entity to associate with.</typeparam>
    /// <param name="parent">The parent.</param>
    /// <param name="children">The children.</param>
    /// <returns>The parent Entity.</returns>
    public static TEntity AddChildren<TEntity>(this TEntity parent, IEnumerable<TEntity> children)
        where TEntity : RecursiveEntity<TEntity>
    {
        children.ToList().ForEach(c => parent.AddChild(c));
        return parent;
    }
} 
```

一旦你把所有这些都准备好了，你就可以这样播种了：

**种子法**

```
/// <summary>
///     Seeds the specified context.
/// </summary>
/// <param name="context">The context.</param>
protected override void Seed(Test.Infrastructure.TestDataContext context)
{
    // Generate the root element.
    var root = new Category { Name = "First Category" };

    // Add a set of children to the root element.
    root.AddChildren(new HashSet<Category>
    {
        new Category { Name = "Second Category" },
        new Category { Name = "Third Category" }
    });

    // Add a single child to the root element.
    root.AddChild(new Category { Name = "Fourth Category" });

    // Add the root element to the context. Child elements will be saved as well.
    context.Categories.AddOrUpdate(cat => cat.Name, root);

    // Run the generic seeding method.
    base.Seed(context);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:09:04.187

延迟加载是打开还是关闭？

您可能需要像这样在查询中包含子关系

```
_db.Categories.Include("ChildCategories").FirstOrDefault(x => x.ID == 4) 
```

# ruby-on-rails - Rails 3：找不到没有 ID 的用户

> ID：12656915
> 
> 赞同：0
> 
> 时间：2012-09-29T22:05:13.947
> 
> 标签：ruby-on-rails

嗨，我目前正在处理我的第一个 Rails 项目（照片上传网站），并且在创建属于用户的新相册的表单上遇到错误。我正在尝试使用回形针宝石。它给了我错误：

```
ActiveRecord::RecordNotFound in AlbumsController#create

Couldn't find User without an ID 
```

我猜它与我的创建操作中的实例变量有关，但我看不出有什么问题。任何指导都会有所帮助。这是我的文件：

_form.html.erb

```
<%= form_for (@album), :remote => true, :html => { :id => "uploadform", :multipart => true } do |f| %>
<div>
    <%= f.label :name %>
    <%= f.text_field :name %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <%= f.fields_for :avatar do |avatar_form| %>
    <%= avatar_form.label :avatar, "Upload" %>
    <%= avatar_form.file_field :avatar, :multiple => true %>
    <% end %>

    <%=f.submit %>
</div>
<% end %> 
```

Albums_controller 创建动作：

```
def create
  @users = User.all
  @user = User.find(params[:user_id])
  @album = @user.albums.build(params[:album])
  if @album.save
    flash[:success] = "Album created!"
  end 
end 
```

配置/路由

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums 
end

resources :albums do
  resources :pictures
end 
```

专辑型号

```
class Album < ActiveRecord::Base
  attr_accessible :avatar, :name, :description
  has_and_belongs_to_many :users

  has_attached_file :avatar
end 
```

如果您需要查看任何其他文件，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:12:41.483

由于这是一张新专辑，因此`user_id`我最初认为的专辑哈希中没有。我添加了一个新方法，将用户 ID 合并到哈希中。

```
def create
  @users = User.all
  @album = Album.new(params[:album].merge!(:user_id => current_user))
  if @album.save
    flash[:success] = "Album created!"
  end 
end 
```

如果您不想在 Album 模型中包含 user_id `attr_accessible`，您可以单独分配它。

```
def create
  @users = User.all
  @album = Album.new(params[:album])
  @album.user_id = current_user.id
  if @album.save
    flash[:success] = "Album created!"
  end 
end 
```

# iphone - 如何在 Cocos2d iPhone 中使用 Sprite Sheet？

> ID：12656918
> 
> 赞同：0
> 
> 时间：2012-09-29T22:05:39.230
> 
> 标签：iphone, animation, cocos2d-iphone, sprite-sheet

我有一个艺术家发送给我的精灵表 PNG。在 sprite sheet 内，有 4 个 sprite，每个 32x32，它们制作动画。我希望能够在屏幕上显示一个 CCSprite，它会通过动画。我已经尝试了各种各样的东西，但说实话，我真的不明白 Sprite Sheets 的概念。我在网上看到了各种需要财产清单之类的东西。我从我的艺术家那里得到的只是一个简单的 PNG。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:21:23.997

我也遇到了这个问题，这是我想出的解决方案，不需要 plist 也不需要 Zwoptex，但这假设每个帧都是 32x32 并且以 32 个间隔完美对齐。

```
@interface GameLevelLayer() 
{
    CCSpriteBatchNode *trexSheet;
    int aniCount;
    NSTimer *autoWalker;

}
@end 
```

在你的 init 或任何地方添加 spritesheet

```
trexSheet = [CCSpriteBatchNode batchNodeWithFile:@"dinosss.png"];
[self addChild:trexSheet];
aniCount=1; 
```

使用 NSTimer 停止和启动动画

```
-(void)stopWalker{
        aniCount =1;
//set to start frame
    [self.player setDisplayFrame:
[CCSpriteFrame frameWithTexture:trexSheet.texture rect:
CGRectMake(0,0,32,32)]];

    if (autoWalker){   
    [autoWalker invalidate];
    autoWalker = nil;
    }

} 
```

并开始...

```
-(void)startWalker{

if (!autoWalker){ 
   [self walkimate];
    //Change the timeInterval to adjust animation speed
    autoWalker = [NSTimer scheduledTimerWithTimeInterval:0.15
                                             target:self
                                           selector:@selector(walkimate)
                                           userInfo:nil
                                            repeats:YES];
} 
} 
```

循环函数

```
-(void)walkimate{
    ///loop through animation
if (aniCount>4) {
    ///set to 0 because we add one at the end before the next call
    aniCount =0;
}

//this finds the 32x32 pa
[self.player setDisplayFrame:
[CCSpriteFrame frameWithTexture:trexSheet.texture rect:
CGRectMake(32*i,0,32,32)];

aniCount++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:07:15.537

您可以使用 Zwoptex 工具将 spriteSheet 与 cocos2D plist 一起导出。它的免费工具且易于使用。

# javascript - 什么是 WebGLActiveInfo 函数？

> ID：12656926
> 
> 赞同：1
> 
> 时间：2012-09-29T22:06:29.830
> 
> 标签：javascript, google-chrome, webgl

在 Chrome 中，打开你的 JavaScript 控制台，你会发现`WebGLActiveInfo`它是一个全局变量。我已经尝试寻找有关此功能的文档，但没有任何结果。

天真地调用它会产生一个`TypeError: Illegal constructor`，这令人沮丧，因为它是一个黑匣子：

```
function WebGLActiveInfo() { [native code] } 
```

这个函数有什么作用？我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:29:24.477

它不是一个函数，它是一个原生对象的名称。与`WebGLRenderingContext`、`WebGLTexture`、`Blob`或相同`XMLHTTPRequest`。键入其中任何一个，您将获得相同的函数签名。

`WebGLActiveInfo`对象从`gl.getActiveUniform`和返回`gl.getActiveAttrib`

# asp.net-mvc-3 - 强类型 Razor 视图作为电子邮件模板引擎

> ID：12656927
> 
> 赞同：1
> 
> 时间：2012-09-29T22:06:38.027
> 
> 标签：asp.net-mvc-3, razor, mocking, asp.net-mvc-4

我知道有几个类似的问题可以解决这个话题，但我对答案不满意。

我想要的是充分利用 Razor View 引擎，它可以将*强类型视图与布局页面和部分视图一起*使用。我想在我的视图顶部声明模型并传入该模型。很简单！没有动态模型需要在将它们传递到视图之前显式构建。**编辑：**我想在 Web 应用程序*之外*，在可以构造电子邮件正文的类库中执行此操作。这里真正的问题是使用不是 Web 应用程序的 Razor 视图引擎。

这背后的想法是，如果我有一个`User`包含 20 个属性的对象，并且我的第一个版本的欢迎电子邮件仅使用名称，但稍后我想编辑模板以使用他们的`City`,`State`或`Email`地址，那么我希望能够无需添加代码并重新编译和重新部署即可更新 Razor 视图。

我看到**[RazorEngine](http://razorengine.codeplex.com)**，我喜欢这个想法和简单性，但一切都是动态类型。我的问题是我将从数据库中提取数据作为模型。由于必须将事物推入动态类型，我无法在视图上获得所有属性。

我还看到**[了 MvcMailer](https://github.com/smsohan/MvcMailer)**，它在理论上也很好，但它也存在同样的问题，即传递到视图中的所有数据模型都是动态的并且不是强类型的。

我已经开始构建我自己的版本，这将需要几个 Web 命名空间，例如 System.Web.Mvc、System.Web.Razor 和 System.Web.WebPages - 我可以接受。问题是缺少 HttpContext 和 ControllerContext 和 RouteData .... 我正在尝试模拟/存根。我目前正在尝试研究 DisplayModes 并弄清楚如何在真实的 Web 环境之外模拟这些。

有没有更好的办法？如果您要建议前面提到的两个框架之一，请注意我的问题并让我知道是否有解决方法。

**编辑 2：**在使用了 RazorEngine 之后，强类型模型并不一定像我想象的那么严重。我现在只希望能够使用布局页面和部分视图。我可以用被替换的字符串占位符来解决这个问题，但可能不是很有效而且不是很灵活。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T06:32:09.593

假设您试图从控制器的操作方法中实现这一点，这里有一个简单的方法来做到这一点。

此方法将为您提供强类型视图的输出：

```
public static string RenderViewToString(this Controller controller, string viewName, object model)
{
    controller.ViewData.Model = model;
    try
    {
        using (StringWriter sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindView(controller.ControllerContext, viewName, null);
            ViewContext viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
            viewResult.View.Render(viewContext, sw);
            viewResult.ViewEngine.ReleaseView(controller.ControllerContext, viewResult.View);

            return sw.ToString();
        }
    }
    catch(Exception ex)
    {
        return ex.ToString();
    }
} 
```

然后从控制器方法中，您需要做的就是使用视图和模型的名称调用此方法。

```
public ActionResult Mail()
{
    // whatever you use to get your User object
    var model = new User();

    var output = this.RenderViewToString("~/Views/User/Email.cshtml", model)
} 
```

这将允许您模拟强类型视图的呈现，包括其关联的布局，并将输出收集为字符串，然后您可以使用该字符串通过电子邮件发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:59:49.460

试用[Actionmailer.net：https://bitbucket.org/swaj/actionmailer.net/wiki/Home](https://bitbucket.org/swaj/actionmailer.net/wiki/Home)

我一直在非常成功地使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:54:22.487

答案是传入的对象是否是动态的似乎并不重要。我可以传递我的强类型对象，它会按原样被接受，而无需使其成为动态对象或重建动态对象。

我的初步测试表明这应该没问题并且运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:59:48.337

查看[RazorMachine](https://github.com/jlamfers/RazorMachine/wiki/Examples)。它类似于 RazorEngine，但适用于布局。

# image-processing - 读取 TIFF 文件

> ID：12656938
> 
> 赞同：0
> 
> 时间：2012-09-29T22:07:31.937
> 
> 标签：image-processing, tiff

我需要读取和解释包含 TIFF 图像的二进制文件。我知道存在这样做的读者，但我想走艰难的路。我找到了 TIFF 格式描述，需要以小块的形式解析二进制文件。假设我能够在内存中读取完整的二进制文件。这意味着我有一个包含一长串字节的变量。我通过格式定义知道不同组的 n 个字节的含义。

如何定义不同长度的字符变量（有时为 2，有时为 3，有时为 4 等），以使变量地址指向图像变量数组中的正确位置？

换句话说，假设我的图像被加载到包含文件所有字节的数组 Image 中。我想将前 2 个字节加载到长度为 2 个字节的字符串中，这样我就可以将地址指针链接到 Image 数组中的第一个位置，并自动将前 2 个字节与第一个字符串相关联。第二个 4 字节字符串将具有另一种含义，因此我将第二个 4 字节字符串的地址指向 Image 数组的第三个位置。

这在 C++ 中可行吗？我记得这是我很久以前分析的模拟代码中 Fortran 77 中动态内存分配的一种正常工作方式。

提前感谢您的提示！

问候，

斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:40:54.110

C++ 语言很容易处理来自字节数组的 TIFF 文件。您的想法基本上是正确的，但是存在一些问题。C 字符串以零结尾，出现在 TIFF 文件中的字符串不一定以零结尾，因为它们的长度是明确指定的。创建一个专用的数据结构来保存特定于 TIFF 的数据字段，然后将二进制数据解析到该结构中确实更简单。如果您的机器具有相反的字节序，您的方法将立即遇到摩托罗拉/英特尔字节问题。

# java - 标题大小写中的格式名称 Java 帮助好吗？

> ID：12656941
> 
> 赞同：-1
> 
> 时间：2012-09-29T22:07:56.427
> 
> 标签：java, string, title-case

所以我必须编写一个java代码来：

*   输入名称
*   标题大小写中的格式名称
*   输入第二个名字
*   标题大小写中的格式名称
*   按字母顺序显示它们

我知道 Java Character 类具有方法 isLowerCase()、isUpperCase、toLowerCase() 和 toUpperCase()，您可以使用它们逐个字符地查看字符串。如果第一个字符是小写，则将其转换为大写，对于随后的每个字符，如果该字符是大写，则将其转换为小写。

问题是我如何检查每封信？它应该包含什么样的变量和字符串？你能帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T22:19:08.040

在处理字符串操作时，您应该使用`StringBuilder`.. 这样，您最终会创建较少数量的对象..

```
StringBuilder s1 = new StringBuilder("rohit");
StringBuilder s2 = new StringBuilder("jain");

s1.replace(0, s1.length(), s1.toString().toLowerCase());
s2.replace(0, s2.length(), s2.toString().toLowerCase());            

s1.setCharAt(0, Character.toTitleCase(s1.charAt(0)));
s2.setCharAt(0, Character.toTitleCase(s2.charAt(0)));

if (s1.toString().compareTo(s2.toString()) >= 0) {
    System.out.println(s2 + " " + s1);

} else {
    System.out.println(s1 + " " + s2);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T22:15:00.650

您可以将第一个字符转换为大写，然后将字符串的其余部分小写：

```
String name = "jOhN";
name = name.substring(0, 1).toUpperCase() + name.substring(1).toLowerCase(); 
System.out.println(name); // John 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T22:29:47.400

对于仅使用 String 类遍历字符串，遍历字符串中的每个字符。

```
String s = "tester";
int size = s.length(); // length() is the number of characters in the string
for( int i = 0; i < size;  i++) {
    // s.charAt(i) gets the character at the ith code point.
} 
```

[这个问题](https://stackoverflow.com/questions/6952363/java-replace-a-character-at-a-specific-index-in-a-string)回答了如何“改变”一个字符串——你不能。StringBuilder 类提供了方便的方法来编辑特定索引处的字符。

看起来您想确保所有名称都正确大写，例如： "martin ye" -> "Martin Ye" ，在这种情况下，您需要遍历字符串输入以确保字符串的第一个字符和字符空格大写后。

对于按字母顺序排列列表，我建议将所有输入的名称存储到 ArrayList 或其他一些 Collections 对象，创建一个实现 Comparator 的 Comparator，并将其传递给 Collections.sort() ... 请参阅Comparable vs Comparator 上的[这个问题。](https://stackoverflow.com/questions/2266827/when-to-use-comparable-vs-comparator)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-29T23:07:58.633

这应该解决它

```
List<String> nameList = new ArrayList<String>();
    nameList.add(titleCase("john smith"));
    nameList.add(titleCase("tom cruise"));
    nameList.add(titleCase("johnsmith"));
    Collections.sort(nameList);
    for (String name : nameList) {
        System.out.println("name=" + name);
    }

public static String titleCase(String realName) {
    String space = " ";
    String[] names = realName.split(space);
    StringBuilder b = new StringBuilder();
    for (String name : names) {
        if (name == null || name.isEmpty()) {
            b.append(space);
            continue;
        }
        b.append(name.substring(0, 1).toUpperCase())
                .append(name.substring(1).toLowerCase())
                .append(space);
    }
    return b.toString();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T22:15:27.393

`String`有一个[`toCharArray`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray%28%29)返回新分配`char[]`的字符的方法。请记住，虽然`String`s 是[不可变](http://www.javapractices.com/topic/TopicAction.do?Id=29)的，但可以重新分配数组的元素。

同样，`String` [有一个构造函数](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28char%5B%5D%29)，它接受一个`char[]`表示新创建的字符的`String`。

所以结合这些，你有一种方法可以从 a`String`到 a `char[]`，修改`char[]`，然后回到新的`String`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-29T22:43:20.803

这可以通过多种方式实现，其中大部分将归结为需求的细节。

但基本前提是一样的。 `String`是不可变的（其内容无法更改），因此您需要提取 的字符`String`，将第一个字符转换为大写并`String`从`char`数组中重新构造一个新字符。

正如已经指出的，这是相对简单的。

您可能需要做的另一件事是一次处理多个名称（名字、姓氏）。同样，这相对简单。困难的部分是当您可能需要在多个条件下拆分字符串时，您将需要使用正则表达式。

这是一个非常简单的例子。

```
String name = "this is a test";
String[] parts = name.split(" ");
StringBuilder sb = new StringBuilder(64);
for (String part : parts) {
    char[] chars = part.toLowerCase().toCharArray();
    chars[0] = Character.toUpperCase(chars[0]);

    sb.append(new String(chars)).append(" ");
}

name = sb.toString().trim();
System.out.println(name); 
```

# jquery - 如何将多个类似的事件处理程序浓缩为一个？

> ID：12656945
> 
> 赞同：2
> 
> 时间：2012-09-29T22:08:23.027
> 
> 标签：jquery, html

我正在使用以下 jQuery 代码使用户能够对每个帖子投赞成票或反对票：

```
$('#link0 a').click(function(){
    var href=$(this).attr('href');
    var querystring=href.slice(href.indexOf('?')+1);
    $.post('rate.php', querystring, function(data){
        var newHTML;
        newHTML = data;
        $('#link0').html(data);
    });
    return false; // stop the link
});

$('#link1 a').click(function(){
    var href=$(this).attr('href');
    var querystring=href.slice(href.indexOf('?')+1);
    $.post('rate.php', querystring, function(data){
        var newHTML;
        newHTML = data;
        $('#link1').html(data);
    });
    return false; // stop the link
});

$('#link2 a').click(function(){
    var href=$(this).attr('href');
    var querystring=href.slice(href.indexOf('?')+1);
    $.post('rate.php', querystring, function(data){
        var newHTML;
        newHTML = data;
        $('#link2').html(data);
    });
    return false; // stop the link
});

$('#link3 a').click(function(){
    var href=$(this).attr('href');
    var querystring=href.slice(href.indexOf('?')+1);
    $.post('rate.php', querystring, function(data){
        var newHTML;
        newHTML = data;
        $('#link3').html(data);
    });
    return false; // stop the link
}); 
```

如您所见，上面的代码非常重复。它们之间的唯一区别是链接号选择器（`#link0`、`#link1`、`#link2`、`#link3`等）。如何压缩此代码？

编辑：对不起，我忘了提到我的 html 代码是这样的：

```
<span id="link0">
Ratings: 
1 <a href="http://blah/rate.php?id=1&ip=2&rating=u">THUMBSUP</a>, 
0 <a href="http://blah/rate.php?id=1&ip=2&rating=d">THUMBSDOWN</a>
</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:12:05.507

```
$('#link0, #link1, #link2').each(function(){
    var that = $(this);
    that.find('a').click(function(){
            var href=$(this).attr('href');
            var querystring=href.slice(href.indexOf('?')+1);
            $.post('rate.php', querystring, function(data){
                    var newHTML;
                    newHTML = data;
                    that.html(data);
            });
        return false; // stop the link
    });
}); 
```

但你真的应该使用类结构而不是大量的唯一标识符：

```
$('.links').find('a').click(function(){
        var href = $(this).attr('href');
        var querystring = href.slice(href.indexOf('?')+1);
        $.post('rate.php', querystring, function(data){
                var newHTML;
                newHTML = data;
                $(this).closest('.links').html(data);
        });
    return false; // stop the link
}); 
```

* * *

（如果我在写这个）

```
$('.links').on('click','a',function(e){
        e.preventDefault();
        var queryString = this.href.slice(this.href.indexOf('?')+1);
        $.post('rate.php', querystring, function(data){
             $(this).parent().html(data);
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:11:10.873

给他们所有相同的类，如 class="linkx" 并使用

`$(".linkx")`代替`$("#linka")`

更新：代码很可能低于1

```
 $('.link a').click(function(){
 var href=$(this).attr('href');
 var querystring=href.slice(href.indexOf('?')+1);   
 var athis = this
 $.post('rate.php', querystring, function(data){
 var newHTML;
 newHTML = data;
 $(athis).parent(".link").html(data); 
 });
 return false; // stop the link
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T22:16:19.480

假设`#link`div 是其`<a>`s 的直接父级：

```
$('[id^="link"] a').click(function(){

    var href = $(this).attr('href');
    var querystring=href.slice(href.indexOf('?')+1);

    var self = this;

    $.post('rate.php', querystring, function(data){

        var newHTML;
        newHTML = data;
        $(self).parent().html(data);

    });

    return false; // stop the link

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T22:11:49.813

假设`#link0 .. #link4`是最接近每个锚点的 div：

```
$('#link0 a, #link1 a, #link2 a, #link3 a').click(function(){
    var href=$(this).attr('href');
    var querystring=href.slice(href.indexOf('?')+1);
    var clicked = this;
    $.post('rate.php', querystring, function(data){
        var newHTML;
        newHTML = data;
        $(clicked).closest('div').html(data);
    });
    return false; // stop the link
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T22:16:08.757

试试这个：

```
$('#link0, #link1, #link2, #link3').on("click", "a", function(e){
    e.stopPropagation();
    var href=$(this).attr('href');
    var querystring=href.slice(href.indexOf('?')+1);
    $.post('rate.php', querystring, function(data){
        var newHTML;
        newHTML = data;
        $(this).closest('[id^="link"]').html(data);
    });
}); 
```

# java - 使用 int[][] a = new int[0][N] 清除 Java 中的二维数组长度

> ID：12656947
> 
> 赞同：1
> 
> 时间：2012-09-29T22:08:52.173
> 
> 标签：java, arrays, width, 2d

有人可以向我解释为什么这不起作用：

```
int[][] array = new int[0][5];
int n = array[0].length; 
```

虽然这确实有效：

```
int[][] array = new int[5][5];
int n = array[0].length; 
```

当我遇到这个问题时，我正在做一些单元测试来查找 NxN 数组的宽度和高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T22:11:15.820

您正在制作一个大小为零的数组，该数组将容纳一个大小为 5 的数组

```
int[][] array = new int[0][5]; 
```

您必须至少给出 1 的维度

```
int[][] array = new int[1][5]; 
```

基本上变成一维数组

```
int[] array = new int[5]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:13:59.540

`int[][] a = new int[x][y]`是创建`x`大小数组的循环的简写`y`：

```
int[][] a = new int[x][];
for (int i = 0; i < x; i++)
  a[i] = new int[y]; 
```

何时`x`为零则无关紧要，因为从未创建过任何`y`大小的数组。`y`事实上，在一般情况下，数组没有理由`x`需要相同大小，甚至存在，因为 a 的任何元素都可能只是数组`null`而不是`int`数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:14:07.370

```
int[][] a = new int[0][5]; 
```

您正在尝试制作零大小的数组，请记住在 2D 数组中`first []`表示`size`.`array`

例子：

```
int[][] a = new int[2][4];    
a = {(1,2,3,4}, {5,6,7,8}}
System.out.println(a.length);// would return `2` 
```

# php - PHP 提交重定向

> ID：12656956
> 
> 赞同：0
> 
> 时间：2012-09-29T22:10:33.647
> 
> 标签：php, forms, redirect, login, submit

我正在做一个带有提交按钮的表单，但提交按钮只会将您带到同一页面，我希望它重定向到特定页面。这将如何完成？

```
<body><form action="login.php" method="POST" >
<table>
<tr>
<td>Username: </td><td><input type="text" name="username" /></td>
</tr>
<tr>
<td>Password: </td><td><input type="password" name="password" /></td>
</tr>

</table>
<input type="submit" value="Log In"/> &nbsp;  &nbsp; &nbsp; &nbsp;<input type="button"   value="Register" onClick="location.href='register.php'" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:12:51.160

```
<?php header('Location: WHATEVER.php'); ?> 
```

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

这已经被否决了两次，被投了三次......所以......让我们想想这里的人。如果您登录，则需要转到 login.php 将数据提交给 PHP，然后让 PHP 将数据发送到所需的页面，而不是 HTML，否则您永远不会登录。

```
if($successful_login){
   header('Location: WHATEVER.php');
} else {
   // Then send them back to login.php because their login failed.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:16:57.187

```
<form action="DESIRED_PAGE.PHP" method="POST" > 
```

您必须将表单的操作属性定位到您希望它发送表单的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:14:30.840

我在谷歌浏览器上试过你的代码，我被重定向到 login.php 没有任何问题。如果这是您的全部代码，那么您缺少一个结束`</form>`标记，这可能是使用不同浏览器时出现不当行为的原因。

还要验证 login.php 没有将客户端发送回您发布的页面。

# objective-c - 如何在没有自动布局错误的情况下将 UIButtons 旋转 90 度？

> ID：12656961
> 
> 赞同：4
> 
> 时间：2012-09-29T22:11:25.267
> 
> 标签：objective-c, xcode, button, rotation, ios6

我在一个插座集合数组中有一些 UIButtons，我希望使用以下代码进行旋转：

```
for(UIButton *button1 in b90){
    button1.transform = CGAffineTransformMakeRotation( ( 90 * M_PI ) / 180 );
} 
```

不幸的是，它不起作用。如果我给它一个可以旋转 180 或 360 度的值，例如 pi 或 2 pi 等（基本上意味着按钮将在同一个地方），它确实有效，但是如果我给它任何其他值，它将使按钮留在倾斜的方向我收到此错误：

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“自动布局不支持具有边缘布局约束的交叉旋转边界变换，例如右、左、上、下。有问题的观点是：>'

框架和变换部分是不言自明的。我认为它只是说它根本不希望按钮倾斜。我可以通过取消选中 xib 文件中的“使用自动布局”按钮来避免该问题，但这会使旋转的按钮看起来像素化。如果您在运行时旋转 iDevice，然后出于某种原因将其旋转回来，则未像素化，但这不是我想要的。

关于如何朗读按钮而不禁用“使用自动布局”选项的任何想法？

非常感谢所有帮助，我总是检查最佳答案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:11:55.373

我正在使用相同的语句，它对我有用：

```
#define DEGREES_TO_RADIANS(d) (d * M_PI / 180)
btn.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(-90)); 
```

我认为您使用的是 IOS 6.0 代码，其中使用旧 xcode 启用了自动布局。

你能提供更多关于它的细节吗？

谢谢

# mysql - 我无法在 mysql 中删除外键

> ID：12656967
> 
> 赞同：7
> 
> 时间：2012-09-29T22:12:33.417
> 
> 标签：mysql, sql

我正在尝试在 php admin (mysql) 中删除一个外键，所以我在下面执行此代码：

```
`ALTER TABLE Image_Question DROP INDEX FK_QuestionSession` 
```

问题是我收到了这个错误：

```
#1553 - Cannot drop index 'FK_QuestionSession': needed in a foreign key constraint 
```

QuestionId 的外键从 Image_Question 表链接到 Question 表中的 QuestionId。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-29T22:17:13.647

先删除外键约束，再删除索引。否则你总是会出错。

```
alter table Image_Question drop foreign key key_name_here 
```

# macos - Valgrind 的安装将权限更改为 usr/local/include/

> ID：12656969
> 
> 赞同：0
> 
> 时间：2012-09-29T22:12:44.960
> 
> 标签：macos, gcc, valgrind

我试图在 Mac OS X 10.8 上安装 valgrind。

完成安装后，任何尝试运行 gcc 都会出现以下错误。

错误：/usr/local/include/stdio.h

当然，我可以更改 usr/local/include 上的权限，但我很好奇其他人是否遇到过这个问题以及如何纠正？

谢谢

# javascript - KoGrid：访问 selectedItemCount

> ID：12656971
> 
> 赞同：1
> 
> 时间：2012-09-29T22:12:53.640
> 
> 标签：javascript, knockout.js, kogrid

我正在尝试创建与 KoGrid 的 selectedItemCount 的绑定（类似于他们在 kgFooter 中的操作方式）。但是，当我尝试：

```
<input type="button" value="View" data-bind="enable: selectedItemCount > 0"></input> 
```

我收到关于“selectedItemCount 未定义；”的参考错误。我应该如何绑定到这个变量？我也试过 selectedItems.length 但这也是未定义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:15:57.477

您可以查看如何在[jsfiddle上使用它的示例](http://jsfiddle.net/PrkR8/)

基本上，您应该使用两个额外的绑定属性：

对于多选：

```
<div id="sandBox" class="example" style="height: 300px; width: 600px;" 
     data-bind="koGrid: { data: myObsArray, selectedItems: selected }">
</div> 
```

或者如果您只允许选择一项：

```
<div id="sandBox" class="example" style="height: 300px; width: 600px;" 
     data-bind="koGrid: { data: myObsArray, selectedItem: selected }">
</div> 
```

所以在第一种情况下你必须声明财产`viewModel.selected = ko.observableArray([])`，在第二种情况下`viewModel.selected = ko.observable()`

[还要在github](https://github.com/ericmbarnard/KoGrid/wiki/Configuration)上检查这个只读的 koGrid 绑定配置

# excel - 在 Excel 中使用 vlookup

> ID：12656974
> 
> 赞同：0
> 
> 时间：2012-09-29T22:13:23.933
> 
> 标签：excel, excel-formula

我有一个具有以下值的 excel 工作表选项卡

```
Class Date
A    07/07/2000
B    08/07/2012
C    09/10/2011 
```

我有第二个选项卡，其中包含以下值

```
Class Student Date
A    1
A    2
B    3
B    1
C    1 
```

我想将 sheet1 中的日期添加到 sheet2。我知道我可以使用`VLOOKUP`，但不知道怎么用！`:-(`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:19:03.737

假设第一张工作表是 Sheet1，A 列中有 Class，B 列中有 Date，然后在第二张工作表的 C2 中尝试这个公式

`=VLOOKUP(A2,Sheet1!A$2:B$10,2,0)`

将其复制到 C6

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:21:41.343

在 Sheet2, C2: 中`=VLOOKUP(A2,Sheet1!A:B,2,FALSE)`并向下复制

# microsoft-metro - 调试器无法识别等待方法的返回值的变量

> ID：12656978
> 
> 赞同：3
> 
> 时间：2012-09-29T22:13:47.800
> 
> 标签：microsoft-metro, visual-studio-2012, .net-4.5, async-await, portable-class-library

我在针对 .NET 4.5 和 Windows Store Apps 的可移植类库中有这个非常简单的代码：

```
HttpResponseMessage response = await _httpClient.PostAsync(uri, content);
response.EnsureSuccessStatusCode(); 
```

当我在第二行放置断点并运行我的应用程序时，断点被正确命中，但我无法调查调试器中的响应，因为它报告：

> 当前上下文中不存在名称“响应”

我不确定它有多少相关性，但我还必须在调试器的设置中禁用*“仅我的代码”*调试器设置，以便能够调试与执行应用程序放置在同一解决方案中的可移植类库。

是 async-await 方法、可移植类库、目标应用程序（尤其是 Windows Store App）还是这些工具的组合的一些限制？或者它是一个调试器错误？任何解决方法都会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T13:33:54.717

我不确定更新的 Visual Studio 更新是否仍然会发生这种情况（我不再拥有该代码库），但在我的情况下，问题可能是将 Async-Await 调试与代码合同相结合。不使用代码合同时我还没有看到问题。

# composer-php - 用 Composer 解决依赖地狱

> ID：12656982
> 
> 赞同：10
> 
> 时间：2012-09-29T22:14:20.557
> 
> 标签：composer-php

这就是场景。

您的 composer.json 中有包 A 和包 B（您的应用程序依赖于这两个包）。

包 A 和 B 都依赖于包 C，但版本不同。假设 A 依赖于 C v2.1，而 B 依赖于 C v2.2。

你会得到版本冲突。

A、B 和 C 都是第三方软件包。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T08:39:02.730

这是一个技巧，但可能会让你继续前进。

您可以覆盖“A”、“B”和“C”包的存储库，并使“A”和“B”依赖于相同版本的“C”（实际上，覆盖“A”的存储库可能就足够了”和“B”）。

只要“A”和“B”都可以使用最新版本的“C”（因此维护者可能没有更新软件包版本），这应该可以工作。如果是这种情况，我还会考虑向具有旧版本依赖项的项目发送拉取请求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-14T16:49:33.627

我们在这个邮件列表中讨论它：http: [//news.php.net/php.internals/72594](http://news.php.net/php.internals/72594)

“无冲突”技术必须在 PHP 中实现，这不是作曲家的错