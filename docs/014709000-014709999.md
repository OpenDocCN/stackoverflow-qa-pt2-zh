# StackOverflow 问答 14709000-14709999

# cross-domain - WebGL 本地纹理和跨域

> ID：14709001
> 
> 赞同：0
> 
> 时间：2013-02-05T13:46:16.197
> 
> 标签：cross-domain, three.js, webgl

我写了一个 webgl 程序，它在本地服务器上运行良好，现在，我想在本地运行它。但是我遇到了错误，经过一些研究，我发现这是加载纹理时的跨域问题。

```
function loadTexture( path ) {
    var texture = new THREE.Texture( texture_placeholder );
    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: true} );

    var image = new Image();
    image.onload = function () {

        texture.needsUpdate = true;
        material.map.image = this;

       render();
   };
   texture.deallocate();
   renderer3D.deallocateTexture( texture );

   return material;
 } 
```

我尝试了几种解决方案：

github.com/mrdoob/three.js/issues/1305

github.com/mrdoob/three.js/issues/944

gist.github.com/ekeneijeoma/1186920

github.com/mrdoob/three.js/wiki/How-to-run-things-locally（1.Change security for local files in a browser (access page as file:///example)）

我确切地说我在 Firefox 上没有问题，它可以在没有任何改变的情况下工作。适用于 Chrome 的唯一解决方案是使用 --allow-file-access-from-files 启动它。在 IE 上，我不知道如何解决它，我在浏览器安全选项中启用了“跨域访问数据源”和“跨不同域导航子框架”（[http://msdn.microsoft.com/fr -fr/library/ee797612(v=cs.20).aspx](http://msdn.microsoft.com/fr-fr/library/ee797612(v=cs.20).aspx)）但没有。我使用 IEWebGL，我注意到在[http://iewebgl.com/](http://iewebgl.com/)的“IEWebGL v1.0 Released”部分，写着“- Secure (no local content loading, no cross-domain textures)”。因此，由于 IEWebGL，它可能无法在 IE 上解决！？

那么 IE 的解决方案是什么，如果有的话？有没有办法通过更改代码来解决问题，而不用启动本地服务器或带有特殊选项的 Chrome？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:40:53.270

这个问题至少已经被问及回答了 6 次，甚至在 three.js wiki 中也得到了回答。

简而言之，您需要运行本地服务器。打开终端/shell/命令提示符并输入

```
cd <path/to/files>
python -m SimpleHTTPServer 
```

然后在您的浏览器中转到

```
http://localhost:8000 
```

为什么这不是一个选择？这很简单，它解决了问题。它也不会让您的浏览器被拥有。

这里有[几个你可以使用的简单服务器](https://stackoverflow.com/questions/12905426/what-is-a-faster-alternative-to-pythons-http-server-or-simplehttpserver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:35:40.053

感谢您的回答。

事实上，它已经被询问并解决了，我看到了解决方案，它在本地服务器上运行良好，我完全同意安全性。

我问这个是因为，首先，它在 Firefox 和 Safari 上没有任何服务器，在谷歌上也可以使用 --allow...，所以如果在 IE 上可行，那就太好了。其次，因为我想要一个非常简单的程序，它可以快速运行，而无需为服务器安装 python 或其他东西，...

事实上，它适用于离线应用程序（我知道这对于基于 Web 的应用程序来说很奇怪，但这不是我的选择 :)）。无论如何，它适用于 Firefox、Chrome 和 Safari，所以对 IE 来说太糟糕了。

谢谢！

# java - 如何在 JPQL 中按 SUM() 排序

> ID：14709002
> 
> 赞同：2
> 
> 时间：2013-02-05T13:46:20.717
> 
> 标签：java, oracle, jpa, sql-order-by, jpql

嗨，我想在 JPQL 中使用“order by”。我试过的代码是

```
em.createQuery("SELECT o.productCode,SUM(o.quantity) FROM OrderDetailsEntity o GROUP BY o.productCode ORDER BY SUM(o.quantity)") 
```

我努力了

```
em.createQuery("SELECT o.productCode,SUM(o.quantity) AS quant FROM OrderDetailsEntity o GROUP BY o.productCode ORDER BY quant") 
```

等待答案:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:10:34.097

JPA 1.0 中的 JPQL 非常严格。您使用的是什么提供商？

试试 EclipseLink 2.4。

# service-broker - 如何重播服务代理消息：毒消息处理

> ID：14709005
> 
> 赞同：0
> 
> 时间：2013-02-05T13:46:38.237
> 
> 标签：service-broker

我正在使用 SQL Server Service Broker 2012。如果在处理 Service Broker 消息时出现任何错误，我将捕获 ServiceBrokerError 表中的消息。现在如何重新处理更新的服务代理消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T04:04:16.967

以下链接帮助我解决了我实际的毒药消息处理问题。正如 Serg 所建议的那样

[http://msdn.microsoft.com/en-us/library/ms171592.aspx](http://msdn.microsoft.com/en-us/library/ms171592.aspx)，

[http://www.mssqltips.com/sqlservertip/2309/sql-server-service-broker-poison-message-handling/](http://www.mssqltips.com/sqlservertip/2309/sql-server-service-broker-poison-message-handling/)

谢谢，

拉维

# jquery - 如何防止 aoColumnDefs 应用于 DataTables 中的页眉和页脚？

> ID：14709009
> 
> 赞同：0
> 
> 时间：2013-02-05T13:46:43.560
> 
> 标签：jquery, datatables

这是我将类名应用到表格单元格的代码的一部分。

```
"aoColumnDefs" : [{
    "sClass" : "email",
    "aTargets" : [0]
}] 
```

然而，它也适用于`tfoot`和`thead` `th`s。我怎样才能使它只适用于`tbody` `th`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:51:16.117

只需使用标准 css 语法即可仅获取正文

```
td.email {color: green;} 
```

# sql - BCP 实用程序 - 查询挂起，创建 txt 文件但没有任何反应（无数据）

> ID：14709012
> 
> 赞同：0
> 
> 时间：2013-02-05T13:46:52.637
> 
> 标签：sql, tsql, bcp

无论出于何种原因，当我进入使用 BCP 实用程序从查询中生成包含数据的 txt 文件的步骤时，它会挂在文件创建上。那么如果我尝试在数据库中查询这些表，它真的不会让我这样做。

有谁知道为什么会这样？查询其实很简单：

```
SET @cmdQueryout = 'bcp "SELECT X FROM Database.dbo.Details WHERE DetailsId = (SELECT MAX(DetailsId) FROM Database.dbo.Details WHERE CommitDateTime IS NOT NULL AND LEFT(PolicyNumber, 3) != ''NYD'') ORDER BY X, Y, Z" queryout "' + @detailFilePath + '" -c -T'

EXEC master..xp_cmdshell @cmdQueryout 
```

我可以看到它创建了第一个文件，但其中没有数据并且它停在那里。

我可以打开文件，但如果我尝试删除，它不会让我，因为 BCP 正在使用该文件。

查询的运行时间不应超过几秒钟，那么为什么会这样停止呢？

编辑 - 如果我在另一个查询窗口中单独运行它，它可以工作。

但如果它在 SQL 作业和事务中，它就不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:58:35.147

发现了问题。

当我需要指定用户名和密码时，我使用的是受信任的连接。

```
-Uusername -Ppassword 
```

代替`-T.`

# smtp - PHP 邮件从本地主机发送到服务器

> ID：14709013
> 
> 赞同：4
> 
> 时间：2013-02-05T13:47:07.297
> 
> 标签：smtp, gmail, php

例如，我想从 localhost 向 gmail 服务器发送一封电子邮件（anydomain@gmail.com）。

**代码示例是：**

```
<?php 
$to = "thisizraheel@gmail.com";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";

if (mail($to, $subject, $body)) {
    echo("<p>Message successfully sent!</p>");
} else {
    echo("<p>Message delivery failed...</p>");
}
?> 
```

我还将 php.ini 中的 smtp 设置更改为

```
SMTP = mail.gmail.com   
smtp_port = 25 
```

但是，它仍然不起作用，函数 mail() 不起作用。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:22:57.660

您可以在 python 中运行这段代码，这将允许您在 localhost 中设置服务器。php.ini 中无需更改任何内容。（在 php.ini 中 smtp 应该是 localhost，端口应该是 25。默认设置）。希望这可以帮助。:)

```
import smtpd
import smtplib
import asyncore
class SMTPServer(smtpd.SMTPServer):

    def __init__(*args, **kwargs):
        print "Running smtp server on port 25"
        smtpd.SMTPServer.__init__(*args, **kwargs)

    def process_message(*args, **kwargs):
        to = args[3][0]
        msg = args[4]
        gmail_user = 'yourgmailhere'
        gmail_pwd = 'yourgmailpassword'
        smtpserver = smtplib.SMTP("smtp.gmail.com",587)
        smtpserver.ehlo()
        smtpserver.starttls()
        smtpserver.ehlo
        smtpserver.login(gmail_user, gmail_pwd)
        smtpserver.sendmail(gmail_user, to, msg)
        print 'sent to '+to
        pass

if __name__ == "__main__":
    smtp_server = SMTPServer(('localhost', 25), None)
    try:
        asyncore.loop()
    except KeyboardInterrupt:
        smtp_server.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:55:42.687

尝试将 SMTP 服务器与 gmail 一起使用。

```
ini_set("SMTP","ssl://smtp.gmail.com");
ini_set("smtp_port","465"); 
```

**好读**

[使用 gmail 从本地主机发送电子邮件](https://stackoverflow.com/questions/4982821/send-email-from-localhost-with-gmailwindows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:02:16.250

Colin Morelli 是正确的，因为您需要进行身份验证（登录）才能使用 gmail 的 smtp 服务器。以下是工作代码。参考。[从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

```
<?php

       require_once "Mail.php";

        $from = "<from.gmail.com>";
        $to = "<to.yahoo.com>";
        $subject = "Hi!";
        $body = "Hi,\n\nHow are you?";

        $host = "ssl://smtp.gmail.com";
        $port = "465";
        $username = "myaccount@gmail.com";  //<> give errors
        $password = "password";

        $headers = array ('From' => $from,
          'To' => $to,
          'Subject' => $subject);
        $smtp = Mail::factory('smtp',
          array ('host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username,
            'password' => $password));

        $mail = $smtp->send($to, $headers, $body);

        if (PEAR::isError($mail)) {
          echo("<p>" . $mail->getMessage() . "</p>");
         } else {
          echo("<p>Message successfully sent!</p>");
         }

    ?>  <!-- end of php tag--> 
```

PS你不能这样做：

```
<?php
// The message
$message = "Line 1\r\nLine 2\r\nLine 3";

// In case any of our lines are larger than 70 characters, we should use wordwrap()
$message = wordwrap($message, 70, "\r\n");

// Send
mail('caffeinated@example.com', 'My Subject', $message);
?> 
```

参考。 [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

**编辑：**

如果你想使用一个简单的类，你可以在不制作服务器模块的情况下放入 FTP，只需使用 PHPMailer：

```
require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

$body             = file_get_contents('contents.html');
$body             = eregi_replace("[\]",'',$body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "mail.yourdomain.com"; // SMTP server
$mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "tls";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 587;                   // set the SMTP port for the GMAIL server
$mail->Username   = "yourusername@gmail.com";  // GMAIL username
$mail->Password   = "yourpassword";            // GMAIL password

$mail->SetFrom('name@yourdomain.com', 'First Last');

$mail->AddReplyTo("name@yourdomain.com","First Last");

$mail->Subject    = "PHPMailer Test Subject via smtp (Gmail), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$address = "whoto@otherdomain.com";
$mail->AddAddress($address, "John Doe");

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

参考。[http://phpmailer.worxware.com/index.php?pg=examplebgmail](http://phpmailer.worxware.com/index.php?pg=examplebgmail)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:03:25.887

php.ini 中的 SMTP 设置仅适用于 Windows 主机。

如果您没有运行 Windows 系统，您应该使用适当的类来实现 SMPT 功能或相应地配置您的本地 sendmail/MTA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T15:01:18.850

好的，我看到了不久前我遇到的问题

您需要一个邮件服务器 pop3 服务器或 smtp 这需要一个静态 ip 和名为服务器的域，即 localhost 不起作用

这样做设置 CURL 我的卷曲功能相应调整

```
 function CurlMail($The_mail, $The_FamKey, $The_Service ,$The_Client)
{

        //create array of data to be posted

        $post_data['email'] = $The_mail;
        $post_data['FamilyKey'] = $The_FamKey;
        $post_data['Service'] = $The_Service;
        $post_data['Client'] = $The_Client;

        //traverse array and prepare data for posting (key1=value1)
        foreach ( $post_data as $key => $value) 
                {
                    $post_items[] = $key . '=' . $value;
                }
        //create the final string to be posted using implode()
        $post_string = implode ('&', $post_items);
        //create cURL connection
        $curl_connection =  curl_init('http://foo.com/mail.php');
        //set options
        curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
        curl_setopt($curl_connection, CURLOPT_USERAGENT,  "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
        curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 0);
        //set data to be posted
        curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);
        //perform our request
        $result = curl_exec($curl_connection);
        //show information regarding the request
        print_r(curl_getinfo($curl_connection));
        echo curl_errno($curl_connection) . '-' .curl_error($curl_connection);
        //close the connection
        curl_close($curl_connection);
    } 
```

然后在设置了 SMTP 的 Live 服务器上，请参阅 php.ini 了解这些详细信息 MAIL.PHP

```
ini_set('SMTP', "127.0.0.1");
ini_set('smtp_port', "25");

 $to = "abc@gmail.com";
 $subject = "Test mail";
 $message = "Hello! This is a simple email message.";
 $from = "jono@bay.org";
 $headers = "From:" . $from;
 mail($to,$subject,$message,$headers);
 echo "Mail Sent."; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T13:58:52.957

100% 工作，我也在我的网站上使用过这个

```
<?php
$con=mysql_connect("mysql12","","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
$db=mysql_select_db("data",$con);
if(!$db)
{
die( 'Could not select database'.mysql_error() );
}

$to=$_POST['to'];
$subject=$_POST['subject'];
$body=$_POST['tarea'];

$query="select fname from table where email='$to'";
$fetch=mysql_query($query);

while ($rows=mysql_fetch_array($fetch)) 
{
 $name=$rows['fname'];

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "To:" .$name. "\r\n";
$headers .= 'From: <abcd@gmail.com>' . "\r\n";
mail($to, $subject, $body, $headers);
} 
```

# javascript - 如何将 JSF 托管 bean 属性传递给 JavaScript 函数？

> ID：14709014
> 
> 赞同：15
> 
> 时间：2013-02-05T13:47:09.560
> 
> 标签：javascript, jsf, parameter-passing

我想知道如何将 JSF 托管 bean 属性传递给 JavaScript 函数。

像这样的东西：

```
<script>
  function actualizaMenu(key){
    #{linkedMenu.setKey(key)}
  }
</script> 
```

```
<ul>
  <ui:repeat value="#{moduleList.modulos}" var="entity">
    <li>
      <a onclick="actualizaMenu(#{entity.key})">#{entity.nombre}</a>
    </li>
  </ui:repeat>
</ul> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-05T13:56:06.617

这并不完全是 JSF 变量的“传递”。这只是打印 JSF 变量，就好像它们是 JavaScript 变量/值一样。要知道，JSF 和 JS 根本不同步运行。JSF 在网络服务器中运行并生成 HTML/CSS/JS 代码，一旦到达那里，这些代码又在网络浏览器中运行。

您的具体问题很可能是因为您编写 JSF 代码的方式会生成无效的 JS 语法。验证这一点的简单方法是检查 JSF 生成的 HTML 输出，您可以通过右键单击找到该输出，在浏览器中*查看源代码*，并检查您是否在浏览器中的 JS 控制台中没有看到任何语法错误报告，您可以在 Chrome/IE9+/Firefox23+ 中按 F12 查找。

想象一下，`#{entity.key}`这里

```
<a onclick="actualizaMenu(#{entity.key})">#{entity.nombre}</a> 
```

打印一个 Java 字符串变量`"foo"`，然后生成的 HTML 看起来像

```
<a onclick="actualizaMenu(foo)">some name</a> 
```

但是，你看，它代表一个名为的 JavaScript**变量**`foo`，而不是一个 JS 字符串值！所以如果你真的想最终成为

```
<a onclick="actualizaMenu('foo')">some name</a> 
```

那么您应该指示 JSF 准确生成该 HTML：

```
<a onclick="actualizaMenu('#{entity.key}')">#{entity.nombre}</a> 
```

不过要注意 JSF 变量中的特殊字符。您可以为此使用[OmniFaces`of:escapeJS()`功能](http://showcase.omnifaces.org/functions/Strings)。

* * *

**与具体问题无关**，具体实现`actualizaMenu()`毫无意义。您似乎正在尝试设置 bean 属性。您不应该为此使用 JS，而是使用 a `<h:commandLink>`。

```
<h:commandLink value="#{entity.nombre}" action="#{linkedMenu.setKey(entity.key)}" /> 
```

如有必要，嵌套 a`<f:ajax>`以使其异步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:17:56.400

我建议使用 jQuery 的事件绑定和元素上的 data 属性来获得相同的结果（假设您使用 jQuery）：

```
<script>
  function actualizaMenu(key){
    /* Logic here ... */
  }

  $(document).ready(function(){
    $('.menuItem').click(function(){
      var key = $(this).data('key');
      actualizaMenu(key);
    );
  });
</script> 
```

...

```
<ul>
  <ui:repeat value="#{moduleList.modulos}" var="entity">
    <li>
      <a data-key="#{entity.key}" class="menuItem">#{entity.nombre}</a>
    </li>
  </ui:repeat>
</ul> 
```

而且，正如在其他地方指出的那样，除非`#{linkedMenu.setKey(key)}`实际上返回了一段 javascript（这不太可能，而且即使它确实会很糟糕），您还需要修复该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T20:41:17.763

我知道这个问题很老，但对于那些仍在寻找的人来说，还有一个选择。

如果您使用的是 primefaces，请尝试一下。 [请求上下文](http://www.primefaces.org/showcase/ui/requestContext.jsf)

# sql - POWERBUILDER 11.1 数据库配置文件包含 SNC SQL Native 客户端

> ID：14709018
> 
> 赞同：1
> 
> 时间：2013-02-05T13:47:16.003
> 
> 标签：sql, profile, powerbuilder

我的工作站上安装了 POWERBUILDER 11.1，但是在“数据库配置文件”窗口中看不到 SNC SQL Native 客户端。我已经多次重新安装 IDE，但没有成功安装 SNC SQL Native Client。我的操作系统是 Windows XP 32 位。

如何解决此问题，以便可以连接到我的 SQL 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:22:23.037

您的计算机上是否安装了 SQL Server Native Client 运行时？这是访问 SQL Server 所需的 Microsoft 包。您可以在此处获取 SQL Server 2008 版本：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=16978) 16978（向下滚动直到找到 sqlncli.msi）。它需要安装在将访问 SQL Server 的所有客户端计算机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:02:31.563

我认为您无法使用 PB 11.1 连接到 SQL Server 2008，但我不确定。也许你可以，但我不记得是否可以使用 2008 版的所有新功能。我确信您可以连接到 SQL Server 2005，因为我每天都在这样做，但是您必须首先安装 SQL SNC 驱动程序作为 slapout 回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:19:16.327

听起来您需要进行完整安装或自定义安装并选择 SNC。我不记得 SNC 是否是默认安装的一部分，但听起来不是。

祝你好运，

特里。

# winforms - 如何计算 CheckedListBox 所需的大小？

> ID：14709022
> 
> 赞同：1
> 
> 时间：2013-02-05T13:47:21.797
> 
> 标签：winforms

我编写了一些代码来使用 mListBox.ItemHeight 和 mListBox.CreateGraphics().MeasureString(...) 自动将 CheckedListBox 缩放到其内容。字符串测量的输出有点可疑，但真正让我困惑的是要为边框等添加多少。

我尝试了 SystemInformation.Border3DSize (= 2) 以及 ClientSize 和 Size (= 4) 之间的差异。但是将 mListBox.ItemHeight * mListBox.Items.Count + 4 作为高度会使其太小一个像素并出现滚动条。

对于宽度，它根本不起作用，因为它没有考虑我似乎无法找到来源的复选框的大小。

我应该如何确定控件的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:36:59.163

在这种情况下，通常更容易设置 ClientSize 而不是整个 Size。关于 ItemHeight 需要注意的一件事是它不包括项目的边距。使用默认设置的 CheckedListBox，我的 ItemHeight 为 13。但 ItemRectangle 属性的高度为 15。

所以这就是我所做的。我在 CheckedListBox 中添加了 9 个项目（第一个项目比其他项目长），保持设计者设置的控件的默认大小。然后在表单的构造函数中，我将 ClientSize 设置为：

```
this.checkedListBox1.ClientSize = new Size(TextRenderer.MeasureText(checkedListBox1.Items[0].ToString(), checkedListBox1.Font).Width + 20, checkedListBox1.GetItemRectangle(0).Height * checkedListBox1.Items.Count); 
```

请注意，我使用 TextRenderer.MeasureText 来测量文本。它通常会为您提供比 Graphics.MeasureString 更好的值。默认情况下，TextRenderer 在其测量中包含一些填充。我还包括一个 20 像素的填充来说明复选框。无论如何，使用 TextRenderer.MeasureText，宽度为 20 像素的填充，高度为 ItemRectangle * Items.Count，这给了我一个 CheckedListBox，它的大小与其内容一样，没有 ScrollBars。

编辑：如果项目宽度不同，设置宽度可能会变得复杂，因为您需要根据最长的项目设置宽度。在这种情况下，您需要测量每个项目并跟踪哪个项目最长。

编辑 2：好的，所以我在 CheckedListBox 源代码中进行了挖掘。他们使用默认大小 13 加上 3 像素填充作为复选框的宽度和高度。*但是*，如果启用了 VisualStyles，它们会调用`CheckBoxRenderer.GetGlyphSize`以获取要使用的尺寸，因为它考虑了 DPI 设置。大多数机器设置为 96 DPI，因此该方法仍将返回 (13,13) 的大小。因此，当您测量项目的文本时，您还可以将 Graphics 对象和 CheckBoxState 枚举传递给`CheckBoxRenderer.GetGlyphSize`以获取大小。我用于`System.Windows.Forms.VisualStyles.CheckBoxState.CheckedNormal`状态，但我不确定状态是否重要。我也试过`CheckBoxState.MixedDisabled`了，它返回了相同的大小，（13,13）。

总而言之，您可以使用`CheckBoxRenderer`来获取复选框的大小，但您可能仍需要使用一些填充。这减少了硬编码幻数以说明复选框的需要。由于复选框已绘制并且不是实际控件，因此无法像控件大小一样确定其大小。

这是 CheckedListBox 源的链接。看着它不会有什么坏处。具体看`protected override void OnDrawItem`方法。

[CheckedListBox 源](http://reflector.webtropy.com/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/whidbey/netfxsp/ndp/fx/src/WinForms/Managed/System/WinForms/CheckedListBox@cs/2/CheckedListBox@cs)

# moq - AutoFixture：模拟方法不返回冻结的实例

> ID：14709025
> 
> 赞同：6
> 
> 时间：2013-02-05T13:47:25.027
> 
> 标签：moq, autofixture

我正在尝试编写这个简单的测试：

```
var fixture = new Fixture().Customize(new AutoMoqCustomization());

var postProcessingAction = fixture.Freeze<Mock<IPostProcessingAction>>();
var postProcessor = fixture.Freeze<PostProcessor>();

postProcessor.Process("", "");

postProcessingAction.Verify(action => action.Do()); 
```

`Verify`检查失败。
postProcessor.Process 的代码是

```
public void Process(string resultFilePath, string jobId)
{
    IPostProcessingAction postProcessingAction =
        postProcessingActionReader
            .CreatePostProcessingActionFromJobResultXml(resultFilePath);

    postProcessingAction.Do();
} 
```

`postProcessingActionReader`是通过构造函数初始化的接口字段。

我期待测试通过，但它失败了，结果证明`IPostProessingAction`从`CreatePostProcessingActionFromJobResultXml`方法返回的实例与从`fixture.Freeze<>`.

我的期望是，在冻结这个 Mock 对象后，它将`IPostProcessingAction`在所需的每个地方注入接口的底层模拟，并使所有返回的模拟方法返回`IPostProcessingAction`相同的对象。

我对模拟方法的返回值的期望不正确吗？有没有办法改变这种行为，以便模拟方法返回相同的冻结实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:26:54.803

您需要`Freeze`该`IPostProcessingActionReader`组件。

以下测试将通过：

```
[Fact]
public void Test()
{
    var fixture = new Fixture()
        .Customize(new AutoMoqCustomization());

    var postProcessingActionMock = new Mock<IPostProcessingAction>();

    var postProcessingActionReaderMock = fixture
        .Freeze<Mock<IPostProcessingActionReader>>();

    postProcessingActionReaderMock
        .Setup(x => x.CreatePostProcessingActionFromJobResultXml(
            It.IsAny<string>()))
        .Returns(postProcessingActionMock.Object);

    var postProcessor = fixture.CreateAnonymous<PostProcessor>();
    postProcessor.Process("", "");

    postProcessingActionMock.Verify(action => action.Do());
} 
```

假设类型定义为：

```
public interface IPostProcessingAction
{
    void Do();
}

public class PostProcessor
{
    private readonly IPostProcessingActionReader actionReader;

    public PostProcessor(IPostProcessingActionReader actionReader)
    {
        if (actionReader == null)
            throw new ArgumentNullException("actionReader");

        this.actionReader = actionReader;
    }

    public void Process(string resultFilePath, string jobId)
    {
        IPostProcessingAction postProcessingAction = this.actionReader
            .CreatePostProcessingActionFromJobResultXml(resultFilePath);

        postProcessingAction.Do();
    }
}

public interface IPostProcessingActionReader
{
    IPostProcessingAction CreatePostProcessingActionFromJobResultXml(
        string resultFilePath);
} 
```

* * *

如果您通过xUnit.net[扩展以](http://nuget.org/packages/AutoFixture.Xunit/)[声明](http://blog.ploeh.dk/2010/10/08/AutoDataTheoriesWithAutoFixture.aspx)方式使用 AutoFixture，则可以进一步简化测试：

```
[Theory, AutoMoqData]
public void Test(
    [Frozen]Mock<IPostProcessingActionReader> readerMock,
    Mock<IPostProcessingAction> postProcessingActionMock,
    PostProcessor postProcessor)
{
    readerMock
        .Setup(x => x.CreatePostProcessingActionFromJobResultXml(
            It.IsAny<string>()))
        .Returns(postProcessingActionMock.Object);

    postProcessor.Process("", "");

    postProcessingActionMock.Verify(action => action.Do());
} 
```

`AutoMoqDataAttribute`定义为：

```
internal class AutoMoqDataAttribute : AutoDataAttribute
{
    internal AutoMoqDataAttribute()
        : base(new Fixture().Customize(new AutoMoqCustomization()))
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-21T18:06:34.953

从 3.20.0 开始，您可以使用`AutoConfiguredMoqCustomization`. 这将自动配置所有模拟，以便其成员的返回值由 AutoFixture 生成。

换句话说，它会自动配置你`postProcessingActionReader`返回 freeze `postProcessingAction`。

只需更改此：

```
var fixture = new Fixture().Customize(new AutoMoqCustomization()); 
```

对此：

```
var fixture = new Fixture().Customize(new AutoConfiguredMoqCustomization()); 
```

# jquery - jquery animate 函数执行一次

> ID：14709033
> 
> 赞同：1
> 
> 时间：2013-02-05T13:47:47.893
> 
> 标签：jquery, jquery-ui

嗨，我有一个在服务器按钮单击时执行的函数（我在单击事件中调用的函数）这个函数有简单的代码我显示了一个默认隐藏的 div，我更改了 div 位置但是当我执行它时，它运行正常但当我第二次点击它不起作用。这是什么问题

```
jQuery(document).ready(function ($) {
    jQuery("#BtnInsert").click(function () {

        jQuery('.alarm').show(400).animate({ left: '285' }, 600).animate({ top: '410px' }, 600).delay(3000).animate({ top: '475px' }, 600).hide(400).animate({ left: '400px' });
    });

}); 
```

# php - 我应该根据 2013 年 2 月的重大变更更改 facebook 登录代码吗？

> ID：14709035
> 
> 赞同：-1
> 
> 时间：2013-02-05T12:20:38.383
> 
> 标签：php, facebook, codeigniter

在我的网站中，我使用 facebook 实现了登录。但 Facebook 在[2013 年 2 月的重大变更](https://developers.facebook.com/roadmap/#february-2013)中宣布，他们将改变一些功能。

根据这个我应该更改我的登录代码，还是身份验证不受这些更改的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:41:37.480

在 2013 年 2 月的重大更改列表中，没有直接提及身份验证机制，但我建议您按如下方式测试您的应用程序：在应用程序高级设置中，将重大更改设置为“启用”。然后测试您的应用程序功能。如果发现问题，您可以在解决任何问题时撤消该设置。

# php - 无法识别的字段：user_name，同时使用 ZF2 查询 Via Doctrine

> ID：14709039
> 
> 赞同：3
> 
> 时间：2013-02-05T13:48:06.067
> 
> 标签：php, doctrine, zend-framework2

当我尝试像这样查询它时，这是我的代码片段

```
 if ($request->isPost()) {
        $form->setData($request->getPost());
        if ($form->isValid()) {

            //check authentication...
            $this->getAuthService()->getAdapter()
                    ->setIdentity($request->getPost('username'))
                    ->setCredential($request->getPost('password'));

            $username = $request->getPost('username');
            $password = $request->getPost('password');
            $result = $this->getAuthService()->authenticate();

            $criteria = array("user_name" => $username,);
           $results= $this->getEntityManager()->getRepository('Subject\Entity\User')->findBy($criteria);
           print_r($results);
           exit; 
```

我收到以下错误

> 无法识别的字段：user_name

这些是我的包括

> 使用 Doctrine\ORM\EntityManager，Album\Entity\Album；

编辑：这是我的 Subject\Entity\User 文件

```
 <?php

namespace Subject\Entity;

use Doctrine\ORM\Mapping as ORM;
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\Factory as InputFactory;
use Zend\InputFilter\InputFilterAwareInterface;
use Zend\InputFilter\InputFilterInterface;

/**
 * @ORM\Entity

* @ORM\Table(name="users")

* @property string $username

* @property string $password

* @property int $id

 */
class User implements InputFilterAwareInterface {

protected $_username;
protected $_password;

 /**
 * @ORM\OneToMany(targetEntity="Subject\Entity\Subject", mappedBy="user")
 * @var Collection
 */
private $subjects;

/** @ORM\Id() @ORM\Column(type="integer") @ORM\GeneratedValue(strategy="AUTO") @var int */
protected $_id;

public function __get($property) {

    return $this->$property;
}

public function __set($property, $value) {

    $this->$property = $value;
}

//Getters and setters

/** @return Collection */
public function getSubjects() {
    return $this->subjects;
}

/** @param Comment $comment */
public function addSubject(Subject $subjects) {
    $this->subjects->add($subjects);
    $subjects->setUser($this);
}

 public function __construct($subjects) {
    //Initializing collection. Doctrine recognizes Collections, not arrays!
    $this->subjects = new ArrayCollection();

}
public function getArrayCopy() {

    return get_object_vars($this);
}

public function populate($data = array()) {

    $this->_id = $data['id'];

    $this->_username = $data['username'];

    $this->_password = $data['password'];
}

public function setInputFilter(InputFilterInterface $inputFilter) {

    throw new \Exception("Not used");
}

public function getInputFilter() {

    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();
        $factory = new InputFactory();
        $inputFilter->add($factory->createInput(array(
                    'name' => 'id',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));
        $inputFilter->add($factory->createInput(array(
                    'name' => 'username',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 100,
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'password',
                    'required' => true,
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 100,
                            ),
                        ),
                    ),
                )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
}

//put your code here
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T15:04:10.190

您正在查询错误的字段。`_username`该字段在您的实体类中命名。还要检查您的注释，`_username`并且`_password`似乎没有任何注释，因此它们不会被创建为数据库字段。

如果您正确设置实体并且所有字段都在数据库中，您只需要查询您的`_username`属性：

```
 if ($request->isPost()) {
     $form->setData($request->getPost());
     $repo = $this->getEntityManager()->getRepository('Subject\Entity\User');
     if ($form->isValid()) {
         // snip ...
         $criteria = array("_username" => $username,);
         $results= $repo->findBy($criteria);
         print_r($results);
         exit;
    }
} 
```

您的用户实体应类似于：

```
class User implements InputFilterAwareInterface {
    /**
     * @ORM\Column(name="username", type="string", length=64, unique=true)
     */
    protected $_username;
    /**
     * @ORM\Column(name="password", type="string", length=64)
     */
    protected $_password;

    // snip ...
} 
```

您可以查看[PSR-2](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md)标准。现在不鼓励方法名和变量名中使用下划线。

# android - 获取画布：在设置布局背景时使用回收的位图

> ID：14709040
> 
> 赞同：0
> 
> 时间：2013-02-05T13:48:05.643
> 
> 标签：android, memory-management, recycle

我需要根据某些事件为布局设置不同的背景。这导致**OOM 异常**。我添加了代码来解决这个问题，但这现在导致回收位图问题。

这是代码：

```
 if (change_bg != 0) {
            //Garbage collect the current BG.
            BitmapDrawable bg = ((BitmapDrawable)llayout.getBackground()); 
            llayout.setBackgroundResource(0);
            if (bg != null) {
                bg.getBitmap().recycle();
                bg = null;
            }
            System.gc();

            llayout.setBackgroundResource(change_bg);
            llayout.invalidate();
        } 
```

这不是第一次发生，而是在随机发生一些 4-5 事件后发生。

如果我不调用`bg.getBitmap().recycle`，就会遇到OOM异常。

谁能指出错误或建议在同一视图中设置布局背景的正确方法？

笔记：

1.  我删除了 ;ayout 中的 android:background="@drawable/bg_initial" 但它没有效果。

2.  该应用程序正在使用具有背景图像的布局的其他视图，并且这些视图没有出现问题。

从表面上看，这似乎不是内存问题，而是在同一视图中设置不同背景时的问题。我可以实现不同的切换背景图像，但这似乎有点过头了。如果有人提供一个简单而真实的解决方案，我会很高兴。

编辑 ：

我在 OnDestroy() 中添加了背景位图垃圾收集代码，这似乎解决了问题.. 至少我现在无法重新创建问题。

但我想知道对此的解释是什么。我没有将布局或图像保存在静态变量中，因此我不确定它是否保存在内存中。我想知道发生了什么事。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:08:27.733

这可能是因为`imageView`引用了图像，并且在设置新的背景图像之前，您正在回收以前的图像（仍然由 引用`imageView`），因此引发了异常。

尝试以下操作：

1.  获取以前的背景`BitmapDrawable bg = ((BitmapDrawable)llayout.getBackground());`
2.  现在设置新背景
3.  垃圾收集以前的背景。

请参阅我的答案以解决 OOME，它可能会对您有所帮助。[位图大小超出Vm预算错误android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

# java - 摇摆/蜡染的奇怪行为

> ID：14709042
> 
> 赞同：2
> 
> 时间：2013-02-05T13:48:09.360
> 
> 标签：java, swing, batik

我正在编写一个绘图应用程序，它使用蜡染框架的 JSVGCanvas 类。我的应用程序的内容窗格是一个 JLayeredPane，其中包含多个堆叠在一起的 JPanel。其中一个面板包含您可以在其上绘制的 JSVGCanvas。

但是，当我在屏幕上绘制内容时，有时会出现一些奇怪的屏幕碎片，如下图所示（黑线是用鼠标绘制的）：

[图纸截图 http://cip.uni-trier.de/~schaefer/batikbug.jpg](http://cip.uni-trier.de/~schaefer/batikbug.jpg)

我不确定这是蜡染还是摇摆的问题，因为当我将鼠标悬停在具有自定义 ImageIcon 的红色 JButton 上时会发生类似的错误。在下图中，您可以看到其他按钮似乎出现在红色按钮的背景中。

[按钮截图​​ http://cip.uni-trier.de/~schaefer/swingbug.png](http://cip.uni-trier.de/~schaefer/swingbug.png)

有谁知道为什么会发生这种情况或我该如何解决？

**编辑：**

在 mouseDragged-function 中，我正在执行以下操作：

```
//newNode was calculated before
Node updateNode = findNodeById(id); //find some node 
if(updateNode == null)
{   
    svgComponent.getSvgCanvas().getSVGDocument().adoptNode(newNode);
    svgComponent.getSvgCanvas().getSVGDocument().getDocumentElement().appendChild(newNode);
}
else
{       
    svgComponent.getSvgCanvas().getSVGDocument().adoptNode(newNode);                 
    svgComponent.getSvgCanvas().getSVGDocument().getDocumentElement().replaceChild(newNode, updateNode);
};
window.contentpane.repaint(); //window is the main JFrame, the contentpane is a JLayeredPane 
```

svgComponent 是一个包含 JSVGCanvas 的 JComponent。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:20:15.740

问题是，我在组件上使用了 setOpaque(true)。将其设置为 false 已经解决了它。

# sql - 如何在同一列中选择多个值

> ID：14709055
> 
> 赞同：-2
> 
> 时间：2013-02-05T13:48:53.240
> 
> 标签：sql, postgresql

这是表结构和示例数据

表数据链路接口

```
nodeid | ifindex | nodeparentid | parentifindex
100000 | 3 | 100004 | 11
100001 | 3 | 100007 | 100
100002 | 5 | 100009 | 66 
```

表节点

```
nodeid | nodesysname
100000 | ant
100001 |bird
100002 | cat
100004 | dog
100007 | egg
100009 | fish 
```

表 snmp 接口

```
nodeid |  snmpifiname | snmpphysaddr | snmpifdescr | snmpifindex
100000 | 1/1/1 | 00:AA | AAA | 3
100001 | 1/1/2 | 00:BB | BBB | 3
100002 | 1/1/3 | 00:CC | CCC | 5
100004 | 2/1/1 | 00:DD | DDD | 11
100007 | 2/1/2 | 00:EE | EEE | 100
100009 | 2/1/3 | 00:FF | FFF | 66 
```

表ip接口

```
nodeid | ipaddr
100000 | 192.168.0.1 |3
100001 | 192.168.0.2 | 3
100002 | 192.168.0.3 |5
100004 | 192.168.0.4 |11
100007 | 192.168.0.5 |100
100009 | 192.168.0.6 |66 
```

我想得到的是

```
nodeid | ifindex | nodeparentid | parentifindex     
to 

|srcnodesysname |srcsnmpifname | srcsnmpphyaddr | srcipaddr| srcsnmpifdescr |destnodesysname |destsnmpifname | destsnmpphyaddr | destipaddr| destsnmpifdescr |

(Ex.)
100000 | 3 | 100004 | 11    
to
ant | 1/1/1 | 00:AA | 192.168.0.1 | AAA | dog | 2/1/1 | 00:DD | 192.168.0.4 | DDD 
```

如何编写 sql 语句进行查询以获得这样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:56:19.510

我假设您的意思是要从节点返回结果并在同一查询中包含父节点？如果是这样，只需使用`JOIN`：

```
SELECT n.nodesysname, s.snmpifiname, s.snmpphysaddr, i.ipaddr, s.snmpifdescr ,
   n2.nodesysname parentnodesysname, s2.snmpifiname parentsnmpifiname, s2.snmpphysaddr parentsnmpphysaddr, i2.ipaddr parentpaddr, s2.snmpifdescr parentsnmpifdescr
FROM Node n
  JOIN datalinkinterface d ON n.nodeid = d.nodeid
  JOIN snmpinterface s ON n.nodeid = s.nodeid
  JOIN ipinterface i ON n.nodeid = i.nodeid
  LEFT JOIN node n2 ON d.nodeparentid = n2.nodeid
  LEFT JOIN snmpinterface s ON n2.nodeid = s2.nodeid
  LEFT JOIN ipinterface i ON n2.nodeid = i2.nodeid 
```

`LEFT JOIN`如果没有父级，我习惯于获取父级结果。

祝你好运。

# mysql - MySQL order by (str to int)

> ID：14709058
> 
> 赞同：11
> 
> 时间：2013-02-05T13:48:58.573
> 
> 标签：mysql, sql-order-by

```
SELECT `01` FROM perf WHERE year = '2013' order by CAST(`01` AS INT) LIMIT 3 
```

第 01 列的数值为 varchar。我需要将“01”的前 3 位订购为整数。为什么这个查询不起作用？

像这样的表；

```
+----------------------+
| name | 01 | 02 | year|
+----------------------+
|name1 | 90 |*** |2013 |
+----------------------+
|name2 | 93 | 55 |2013 |
+----------------------+
|name3 |*** | 78 |2013 |
+----------------------+ 
```

查询应按 01 排序（忽略***）并给出名称和值。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-05T13:52:11.190

MySQL 不允许您使用`CAST('01' AS INT)`. 相反，它期望 a `SIGNED`or `UNSIGNED`。

```
SELECT `01` FROM perf WHERE year = '2013' order by CAST(`01` AS SIGNED) LIMIT 3 
```

查看[MySQL 文档以`CAST()`](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)获取完整的详细信息。

```
mysql> SELECT CAST('01' AS SIGNED);
+----------------------+
| CAST('01' AS SIGNED) |
+----------------------+
|                    1 |
+----------------------+
1 row in set (0.00 sec) 
```

要强制最后对非数字字符串进行排序，您需要在其中应用 a`CASE`来为`ORDER BY`它们分配一个高得离谱的值。条件应该测试 in 的值`01`不等于`0`，*并且*当转换为 a`SIGNED`时结果不是`0`，因为非数字字符串将转换为零。

如果不满足这些条件，则假定字符串是非数字的，并在 中给出 999999999 的值`ORDER BY`，这会将它们推到末尾。他们随后由 订购`name`。

```
SELECT * FROM perf 
WHERE year = '2013'
ORDER BY
  CASE WHEN (`01` <> '0' AND CAST(`01` AS SIGNED) <> 0) THEN CAST(`01` AS SIGNED) ELSE 999999999 END,
  name
LIMIT 3 
```

[http://sqlfiddle.com/#!2/846e2/6](http://sqlfiddle.com/#!2/846e2/6)

要使这些排序降序，请使用一个荒谬的低值（负）而不是一个高值

```
 CASE WHEN (`01` <> '0' AND CAST(`01` AS SIGNED) <> 0) THEN CAST(`01` AS SIGNED) ELSE -999999999 END DESC, 
```

# jquery - :contains 或 .contains 都不工作

> ID：14709059
> 
> 赞同：-1
> 
> 时间：2013-02-05T13:49:13.223
> 
> 标签：jquery, contains

我正在尝试获取选择的值。

该选择具有由 CMS 生成的长计算 ID，因此我需要使用 *= 来获取具有包含“mySelect”的 ID 的选择。

如果这个选择的值是单词'Select'（这意味着你没有选择一个选项），那么做一些事情。如果在其他选择中选择了其他选项，我还需要在其他地方重复此操作，这只是一个示例。这是我的代码...

```
var selectValue = $('select[id*="mySelect"]').val();  
console.log(selectValue)  
if ((selectValue + ':contains("Select")')) 
    {
    $alert('select chosen');
}
else {
    $alert('other chosen');
} 
```

这一切都包含在一个在文档就绪时调用的函数中，并且在更改选择时也是如此。

例如，当我在选择中选择一个选项时，控制台日志将 selectValue 显示为“1”，但仅显示选择的警报。

我也尝试过这种方式，它确实有效，但仅在 Firefox 中有效。在所有其他浏览器中，我收到控制台错误“对象不支持属性或方法“包含”。

```
var selectValue = $('select[id*="mySelect"]').val();  
if (selectValue.contains('Select')) 
    {
    $alert('select chosen');
}
else {
    $alert('other chosen');
} 
```

请问有什么建议吗？我需要使用一些包含的方法来处理很多事情，这只是一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:09:57.070

检查一个字符串是否包含另一个字符串的标准方法是`indexOf`：

```
if ( selectValue.indexOf( 'Search' ) > !== -1 ) { 
```

ECMAScript 6`.contains()`方法使这个检查更简单（并且更具可读性），但到目前为止它只在 Firefox 中实现：

# sql-server-2008-r2 - 使用 sql server 将数据写入文本文件

> ID：14709062
> 
> 赞同：1
> 
> 时间：2013-02-05T13:49:14.257
> 
> 标签：sql-server-2008-r2

我想将数据从表传输到文本文件。我正在尝试使用 bcp 实用程序和 xp_cmdshell。但导出不成功。

如果我在下面执行查询它的工作正常。

```
EXEC xp_cmdshell 'bcp "SELECT CONTRACT_NUMBER,BODY,SYNOPSIS,2,0 FROM AMPWEBAPP_TEST_DB..TM_DONOT_PUBLISH_TEXT_GRAPHIC_COMMENTS WHERE SYNOPSIS IS NOT NULL AND BODY IS NOT NULL" queryout "C:\bcptest.txt" -c -T -S' 
```

但我想在 where 条件下附加一个值。以下是我的查询，它不起作用。

```
DECLARE @ACC VARCHAR(MAX)
SET @ACC='12121'

EXEC xp_cmdshell 'bcp "SELECT CONTRACT_NUMBER,BODY,SYNOPSIS,2,0 FROM AMPWEBAPP_TEST_DB..TM_DONOT_PUBLISH_TEXT_GRAPHIC_COMMENTS WHERE SYNOPSIS IS NOT NULL AND BODY IS NOT NULL AND ACCOUNT_NUMBER='+@ACC+'" queryout "C:\bcptest.txt" -c -T -S' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:03:50.090

我猜 ACCOUNT_NUMBER`varchar`在这种情况下是一个字段，你应该`12121`使用配额，因为它是一个`varchar`常量，所以：

```
EXEC xp_cmdshell 'bcp "SELECT CONTRACT_NUMBER,BODY,SYNOPSIS,2,0 FROM AMPWEBAPP_TEST_DB..TM_DONOT_PUBLISH_TEXT_GRAPHIC_COMMENTS WHERE SYNOPSIS IS NOT NULL AND BODY IS NOT NULL AND ACCOUNT_NUMBER='''+@ACC+'''" queryout "C:\bcptest.txt" -c -T -S' 
```

# c# - 文本框/输入文本中的 HTML 标记

> ID：14709065
> 
> 赞同：1
> 
> 时间：2013-02-05T13:49:29.357
> 
> 标签：c#, javascript, jquery, asp.net

当我在我的 TextBoxes 中输入一些 html 标签，如`< b>`or `< test>`（“<”之后没有空格）时，当我提交表单时，我遇到了问题：

> Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。

服务器返回的状态码是：500

由于安全问题，我不想将“ValidateRequest”设置为 false。

我想在“<”之后制作某种javascript函数插入一个空格，这可以工作......我猜。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:56:34.537

您可以在发回之前使用 javascript 转义您的输入。

查看现有答案：

*   [使用 jQuery 转义 HTML 字符串](https://stackoverflow.com/questions/24816/escaping-html-strings-with-jquery)
*   [使用 jQuery 转义 HTML](https://stackoverflow.com/questions/6020714/escape-html-using-jquery)
*   [将 HTML 标签转义为 HTML 实体的最快方法？](https://stackoverflow.com/questions/5499078/fastest-method-to-escape-html-tags-as-html-entities)

在 c# 端用于[`HttpUtility.HtmlDecode(string)`](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)解码您的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:16:15.950

您可以使用 JavaScript (jQuery) 转义/取消转义您的 html 内容，如下所示：

```
<script>
    function htmlEncode(value) {
        return $('<div/>').text(value).html();
    }

    function htmlDecode(value) {
        return $('<div/>').html(value).text();
    }
</script> 
```

# android - 当我旋转设备（Android）时，适配器变量接收 null？

> ID：14709067
> 
> 赞同：1
> 
> 时间：2013-02-05T13:49:34.300
> 
> 标签：android, rotation, save, instance, adapter

在下面的代码中（为清楚起见而缩短），当我旋转设备时，适配器变量接收空值，而 gridView 变量接收空值。

旋转设备屏幕后，谁能帮我保留适配器和gridView？

感谢。

（抱歉英语不好）

```
 public class FlickrXmlFragment extends Fragment {

    private GridView gridView;
    private FlickrGridViewAdapter adapter;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        //...
        View view = darkInflater.inflate(R.layout.fragment_flickr_xml,
                container, false);
        //...
        gridView = (GridView) view.findViewById(R.id.flickr_gridView);

        return view;
    }

    class FlickrPhotoSearchThread extends
            AsyncTask<String, Void, List<FlickrImagem>> {

        @Override
        protected void onPreExecute() { //... process...    }

        @Override
        protected List<FlickrImagem> doInBackground(String... params) { //process... }

        @Override
        protected void onPostExecute(List<FlickrImagem> result) {
            //...
            adapter = new FlickrGridViewAdapter(getActivity(), 0, result);
            gridView.setAdapter(adapter);
            adapter.notifyDataSetChanged();
            //...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T13:53:12.960

处理您的活动的方向更改。

请参考：http: [//developer.android.com/guide/topics/manifest/activity-element.html#config](http://developer.android.com/guide/topics/manifest/activity-element.html#config)

像这样声明你的活动：

```
<activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:label="@string/app_name"> 
```

# visual-studio-2010 - Microsoft Visual C++ 2010 Win Forms 应用程序中的 System.ArgumentNullException

> ID：14709070
> 
> 赞同：0
> 
> 时间：2013-02-05T13:49:44.907
> 
> 标签：visual-studio-2010, visual-c++

正在开发用于从串行端口接收数据并处理它的应用程序 Microsoft Visual C++ 2010 Win Forms Application !!!

为了接收数据，我通过提供输入缓冲区使用读取方法。但是在读取数据时，得到 System.ArgumentNullException (Buffer cannot be null) 异常。部分代码如下。任何人都可以帮助为什么要处理这个异常。

```
this->sp1->Open();

array<wchar_t>^ buf2;

this->sp1->Read(buf2,1,1024);

this->sp1->Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:00:38.577

您的缓冲区没有初始大小。尝试：

```
array<wchar_t>^ buffer = gcnew array<wchar_t>(1024); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:01:59.720

`buf2`未初始化，因此为空。

```
array<wchar_t>^ buf2 = gcnew array<wchar_t>(1024); 
```

# android - 以编程方式清除地图缓存

> ID：14709071
> 
> 赞同：3
> 
> 时间：2013-02-05T13:49:49.533
> 
> 标签：android, google-maps-android-api-2

我在使用 Android Google Maps API v2 创建的 SupportMapFragment 中启用了缓存。我希望能够以编程方式清除应用程序本身中程序的缓存，这是对我的要求。我正在使用 crony_cd[在此处](https://stackoverflow.com/questions/8787335/clearing-android-cache)描述的 trimCache() 方法执行此操作。

但是，当我执行此方法时，它似乎只删除了一小部分缓存，大概是我自己的应用程序正在创建的缓存文件，而不是由 Google Maps API 创建的缓存文件。是否可以擦除 Maps API 生成的缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:29:46.680

据我所知没有。缓存由 Google 的地图库按项目控制。这意味着使用地图为每个应用程序缓存切片。当您决定使用 Google 地图库时，您还必须忍受这一点，尝试删除这些文件或使用反射进行某些操作只会在未来更新 Google 服务时破坏您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:36:54.220

这对我来说也是一样的：我的缓存包含新文件，其中一个文件的大小为 2.2M（它可以达到 20-30M。）...这些文件仅在我打开地图活动时出现。

所以我猜这是缓存映射。但在我看来，由于大小，它不是一个链接......

我暂时不知道如何管理这个缓存。我认为这不是我们的工作...

# javascript - 检测 div 移动并以特定间隔运行函数 jQuery

> ID：14709074
> 
> 赞同：0
> 
> 时间：2013-02-05T13:50:00.137
> 
> 标签：javascript, jquery, html, css

在我的网站上，我有一个 div (.wrapper)，它在鼠标滚轮滚动时绝对移动坐标，或者用户使用他的箭头键/空格键等。

在某些点上，比如说当 div.wrapper 还剩 -1000 像素时，我希望一个函数发生。

无论如何我可以在不使用间隔的情况下检查这个吗？

```
setInterval(function(){
    if($('.wrapper').css('left') <= 100 + 'px'){
        alert('foo');   
    } else {
        alert ('bar');  
    };
}, 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:51:39.213

没有事件可以检测 CSS 属性的变化。执行此操作的常用方法是在更新`left`属性后显式调用处理程序。

您可以将更改值的代码移动到单独的函数中：

```
function setLeft(left){
    $('.wrapper').css('left', left);
    if($('.wrapper').css('left') <= 100 + 'px'){
        alert('foo');   
    } else {
        alert ('bar');  
    };
} 
```

如果您愿意，您可以在`setLeft`函数内部触发并将检查代码放入事件处理程序中。

另一件事是为`.css`触发事件创建一个包装函数：

```
var originalCssFunction = $.prototype.css;
$.prototype.css = function(){
    originalCssFunction.apply(this, arguments);
    // Check conditions and trigger event
} 
```

# sql - 将日期转换为 varchar

> ID：14709075
> 
> 赞同：1
> 
> 时间：2013-02-05T13:50:02.643
> 
> 标签：sql, postgresql

是否可以将其转换为 varchar 结果..

```
select date_trunc('week', '2013-02-01'::date); 
```

我将把它用于具有 varchar 数据类型的“Where”子句

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T13:55:20.313

`to_char`为了能够控制 varchar 结果的格式，我将使用：

```
select to_char(date_trunc('week', '2013-02-01'::date), 'yyyy-mm-dd'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:53:53.710

你不能把它转换成TEXT吗？

```
select date_trunc('week', '2013-02-01'::date)::text; 
```

# extjs4.1 - Ext.application 配置模型、存储、控制器数组

> ID：14709076
> 
> 赞同：0
> 
> 时间：2013-02-05T13:50:02.893
> 
> 标签：extjs4.1

我想看看你们如何处理这件事。在我们的 Ext.application 文件中，我们的模型、存储和控制器配置数组定义了所有模型，存储在我们应用程序的控制器中。唯一的问题是我们有这么多，以至于在这个文件中继续定义每一个真的很不守规矩，它只会变得臃肿。

有没有人对如何处理这样的问题有任何建议。我们虽然只是制作一个 javascript 文件来定义我们的数组。然后只需在配置对象中包含每个数组，如下所示：

```
Ext.application({
   models : MyApp.util.getModelsArray(),
   controllers: MyApp.util.getControllersArray(),
   stores: MyApp.util.getStoresArray()
}) 
```

有没有更好的方法，或者上面提出的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:50:23.767

我假设您知道您不必*将*所有模型和商店都包含为应用程序配置；作为配置提供给控制器的模型和存储（和视图）将由控制器加载（当控制器由应用程序加载或动态加载时）。事实上，`Ext.app.application`继承自`Ext.app.controller`. 因此，当您在应用程序中定义控制器时，它们的存储和模型也会被加载。

考虑到封装性、可重用性和正确的面向对象思维，您应该真正定义控制器中的存储、模型和视图；并且在您的应用程序中仅包含您的应用程序方法所需的模型和存储。

那么，你有多少个控制器？如果您真的有“这么多”，您可能只想考虑只包括必要的控制器（即，当您的应用程序加载时立即需要的控制器）并让所有其他控制器按需加载。[您可以在这个 SO answer](https://stackoverflow.com/questions/13712707/adding-controller-dynamically-into-app-js-controllers-ext-js-4/13712869#13712869)中看到它是如何完成的。

# iphone - StartUpdatingLocation 与重大变化的位置服务

> ID：14709082
> 
> 赞同：4
> 
> 时间：2013-02-05T13:50:33.550
> 
> 标签：iphone, ios, geolocation, location, cllocationmanager

我遇到了有关重大更改位置服务的问题。

Apple 文档说：“无论您使用标准定位服务还是重大变化定位服务来获取定位事件，您接收这些事件的方式都是相同的。”

但是在“重大变化的位置服务”的情况下，我无法获得在“标准位置服务”的情况下得到的任何回调如果有人有任何意见，请告诉我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T13:58:44.673

`startUpdatingLocation`第一次调用时更新位置，然后当距离过滤器值超过时更新位置。

但是`startMonitoringSignificantLocationChanges`当位置发生重大变化时。

详情请查看[**CLLocationManager**](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)。

> **开始更新位置**
> 
> 开始生成报告用户当前位置的更新。
> 
> `- (void)startUpdatingLocation Discussion`
> 
> 此方法立即返回。调用此方法会导致位置管理器获取初始位置修复（可能需要几秒钟）并通过调用其 locationManager:didUpdateLocations: 方法通知您的委托。（在 iOS 5 和更早的版本中，位置管理器调用 locationManager:didUpdateToLocation:fromLocation: 方法。）之后，接收器主要在超过 distanceFilter 属性中的值时生成更新事件。不过，可能会在其他情况下提供更新。例如，如果硬件收集到更准确的位置读数，接收器可能会发送另一个通知。
> 
> 连续多次调用此方法不会自动生成新事件。但是，在这两者之间调用 stopUpdatingLocation 确实会在您下次调用此方法时发送一个新的初始事件。
> 
> 如果您启动此服务并且您的应用程序被挂起，系统将停止传递事件，直到您的应用程序再次开始运行（无论是在前台还是在后台）。如果您的应用程序终止，则新位置事件的传递将完全停止。因此，如果您的应用程序需要在后台接收位置事件，它必须在其 Info.plist 文件中包含 UIBackgroundModes 键（带有位置值）。
> 
> 除了实现 locationManager:didUpdateLocations: 方法的委托对象外，它还应该实现 locationManager:didFailWithError: 方法以响应潜在错误。

* * *

> **startMonitoringSignificantLocationChanges**
> 
> 根据重大的位置变化开始生成更新。
> 
> `- (void)startMonitoringSignificantLocationChanges Discussion`
> 
> 此方法以异步方式启动位置事件的传递，并在您调用它后立即返回。位置事件被传递到您的委托的 locationManager:didUpdateLocations: 方法。要传递的第一个事件通常是最近缓存的位置事件（如果有），但在某些情况下可能是较新的事件。获取当前位置修复可能需要几秒钟的时间，因此请务必检查委托方法中位置事件的时间戳。
> 
> 在返回当前位置定位后，接收器仅在检测到用户位置发生重大变化时才生成更新事件。例如，当设备与不同的蜂窝塔相关联时，它可能会生成一个新事件。它不依赖 distanceFilter 属性中的值来生成事件。连续多次调用此方法不会自动生成新事件。但是，在这两者之间调用 stopMonitoringSignificantLocationChanges 确实会在您下次调用此方法时发送一个新的初始事件。
> 
> 如果您启动此服务并且您的应用程序随后终止，则系统会在新事件到达时自动将应用程序重新启动到后台。在这种情况下，传递给应用程序委托的 locationManager:didUpdateLocations: 方法的选项字典包含键 UIApplicationLaunchOptionsLocationKey 以指示您的应用程序是由于位置事件而启动的。重新启动后，您仍然必须配置位置管理器对象并调用此方法以继续接收位置事件。当您重新启动位置服务时，当前事件会立即传递给您的委托。此外，即使在您启动位置服务之前，您的位置管理器对象的位置属性也会填充最新的位置对象。
> 
> 除了实现 locationManager:didUpdateLocations: 方法的委托对象外，它还应该实现 locationManager:didFailWithError: 方法以响应潜在错误。
> 
> **注意**：一旦设备从之前的通知移动 500 米或更远，应用程序就会收到通知。它不应期望通知的频率超过每五分钟一次。如果设备能够从网络检索数据，则位置管理器更有可能及时传递通知。

# javascript - 类中的JQuery onclick链接

> ID：14709083
> 
> 赞同：2
> 
> 时间：2013-02-05T13:50:51.477
> 
> 标签：javascript, jquery, click

嗨，我在标签内有一个链接，`<ul>`我正在尝试获取类`<a>`内所有标签的点击事件`pagination`。这是代码

```
<ul class='pagination'>
<li class='details'>Page 1 of 2</li>
<li><a class='current'>1</a></li>
<li><a href='?page=2'>2</a></li>
<li><a href='?page=2'>Next</a></li>
<li><a href='?page=2'>Last</a></li>
</ul> 
```

我尝试的是：

```
<script>
$(document).ready(function() {
     $("a.pagination").click(function(){alert("something..")})
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:51:58.730

您使用的选择器将`a`与 class 联系在一起，像这样`pagination`使用[后代选择器，](http://api.jquery.com/descendant-selector/)

**[现场演示](http://jsfiddle.net/QttKr/)**

```
$(".pagination a").click(function(){alert("something..")}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:53:15.010

排除“.current”...

```
$(".pagination a[href]").click(function(){ alert("something..")}) }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T13:54:02.887

您正在选择`a.pagination`哪个是错误的。

尝试：

```
$(document).ready(function(){ $("ul.pagination a").click(function(){alert("something..")}) }); 
```

# c# - RegFlushKey 方法的 RAPI 版本？

> ID：14709094
> 
> 赞同：0
> 
> 时间：2013-02-05T13:51:24.240
> 
> 标签：c#, windows-ce, activesync, rapi

我搜索了很多，找不到有用的东西。我正在编写一个在台式机上运行的配置实用程序并修改连接的 WINCE 6.0 设备的注册表设置。它是使用 RAPI/RAPI2 在台式 PC 上安装 activesync 来实现的。重新启动后，设备上不再存在更改的注册表设置。谷歌搜索指导使用“RegFlushKey”方法。但我发现无法从 RAPI 使用此功能。请提出一些方法来使注册表设置在重新启动后保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:07:33.653

RegFlushKey没有特定的[RAPI 函数](http://msdn.microsoft.com/en-us/library/aa921197.aspx)。最好的办法是创建一个包含您自己的 CeRegFlushKey 调用的 RAPI DLL，将其下推（CeCreateFile 和 CeWriteFile 对此非常有效）并调用[CeRapiInvoke](http://msdn.microsoft.com/en-us/library/aa917422.aspx)。或者，只需编写一个调用的应用程序，将其下推并使用 CeCreateProcess 执行它。

# java - 无法让机器人类右键单击

> ID：14709096
> 
> 赞同：8
> 
> 时间：2013-02-05T13:51:29.330
> 
> 标签：java, robot

我试图让机器人类右键单击屏幕上的图像，以便我可以保存它。问题是我似乎无法让机器人成功模拟右键单击。这是我正在做的一些示例代码。

似乎 BUTTON2_DOWN_MASK 是滚轮的掩码。每当我执行此代码时，它首先会定期单击该位置，但随后会弹出滚轮超快速移动圆圈并告诉我现在可以以光速滚动，但我想要右键单击..

代码：

```
// This is the function I use to simulate a full click at location x,y on the screen
// Rob is my Robot
public void click(int x, int y, int mask)
{
    rob.mouseMove(x, y);
    sleepy(1000);
    rob.mousePress(mask);
    rob.mouseRelease(mask);
}

// This is the few lines of code that call this function
// sleepy just calls the Thread.sleep function.

sleepy(1000); // Wait one second
click(705, 390, InputEvent.BUTTON1_DOWN_MASK);
sleepy(1000);
click(705, 390, InputEvent.BUTTON2_DOWN_MASK);
sleepy(1000); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T13:58:33.040

用于`InputEvent.BUTTON3_DOWN_MASK`右键单击。BUTTON2 是您正确注意到的鼠标滚轮，左键单击是 BUTTON1。

看这个[例子](http://www.java2s.com/Tutorial/Java/0260__Swing-Event/InputEventBUTTON3MASKforrightmousebutton.htm)。

# android - 通过 android push 推送音频文件/流

> ID：14709098
> 
> 赞同：0
> 
> 时间：2013-02-05T13:51:38.590
> 
> 标签：android, push

我需要找到一种方法来按下我的应用程序上的按钮，它会在连接的手机上播放音频文件（通过电话连接）。我希望消息自动打开并立即在已连接用户的手机上播放。有什么建议么？

# php - 如何在url中写入参数？

> ID：14709104
> 
> 赞同：1
> 
> 时间：2013-02-05T13:51:56.467
> 
> 标签：php, url, parameters, seo

关于搜索引擎优化，我想知道在 url 中写入参数的最佳做法是什么。我应该放置参数名称吗？id 值对搜索引擎有负面影响吗？

以下是一些想到的选项：

1.  `/project/pid/171/name/my_funny_name`
2.  `/project/171/my_funny_name`
3.  `/project/my_funny_name`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:57:18.597

好的规则是参数越少越好。如果您需要数字 id，第二个选项非常好，如果您强制`my_funny_name`部分是唯一的，您可能只依赖它作为 id。但是请记住，如果您更改名称，则 url 将被破坏。

还要记住避免对相同内容使用双重名称，例如`/project/171/my_funny_name`和`/project/171/my_old_name`。尝试使用`<link rel="canonical" href="http://example.com/project/171/my_funny_name">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:59:19.087

在 url 中，您需要`AT MINIMUM`人们将搜索以查找相关页面的关键字。在您的情况下，id 不应产生负面影响。

[谷歌搜索引擎优化](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35291)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:59:38.047

在您的 url 中有一个 id 值不会产生负面影响，但您绝对应该在您的 id 之前或之后添加单词以进行 SEO。我个人喜欢的是尝试在 url 中有一个“逻辑”结构，以 id 开头，如下所示：

```
/123_my-category/456_my-great-stuff 
```

关于下划线，你应该使用“-”，因为它被认为是单词分隔符，而 _ 更多的是为了便于理解，但这就像将单词相互绑定一样。

# dart - 在自定义文件夹中添加包链接

> ID：14709106
> 
> 赞同：3
> 
> 时间：2013-02-05T13:52:00.290
> 
> 标签：dart, dart-pub, rikulo

我在 Dart 项目中创建了一个文件夹（名为*webapp ），我在其中放置了一些服务器端类。*当我运行`pub install`（或`pub update`）导入我在项目中使用的库时，依赖项已正确下载，并且在一些默认文件夹中创建了指向该文件夹的一些链接（例如：*web*、*out* ecc ）。

有一种方法可以自动生成指向我的*webapp*（或任何自定义文件夹）文件夹中的包文件夹的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:06:16.997

我认为不可能在非标准目录中`pub`生成`packages`。

在[pub install 文档](http://pub.dartlang.org/doc/pub-install.html)中，您可以阅读[链接`packages`目录](http://pub.dartlang.org/doc/pub-install.html#linked-packages-directories)部分：

> 它假定您的包是根据[包布局指南](http://pub.dartlang.org/doc/package-layout.html)进行布局的，并在、和以及它们的子目录中创建一个链接`packages`目录。`bin/``test/``example/`

# orchardcms - Orchard CMS 解决方案资源管理器中的 Spec 文件夹是什么？

> ID：14709108
> 
> 赞同：-1
> 
> 时间：2013-02-05T13:52:05.330
> 
> 标签：orchardcms, specifications, orchardcms-1.6

我是 Orchard CMS 的新手，我想知道这个 CMS 的结构代码。你知道 Orchard CMS 解决方案资源管理器中的 Spec 文件夹吗？那是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:24:54.997

它是使用 Specflow 构建的测试。

请参阅 Orchard 的[源代码组织](http://docs.orchardproject.net/Documentation/Source-code-organization)页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:40:01.840

我了解这些是基于[specflow](http://www.specflow.org/specflownew/)创建的[BDD](http://en.wikipedia.org/wiki/Behavior-driven_development)的文档。谢谢大家。

# javascript - 用javascript检测ie10 Metro地址栏的存在

> ID：14709118
> 
> 赞同：1
> 
> 时间：2013-02-05T13:53:16.780
> 
> 标签：javascript, internet-explorer

我有一个网站，在固定到屏幕底部的 div 中有一些号召性用语按钮。

我们目前正在使用绝对定位如下的 div

```
<div id="buttonBar">footer code</div>
<style>#buttonBar{ bottom: 0; width: 100%;  position: fixed; }</style> 
```

这在所有浏览器中都运行良好，除了地铁（现代）模式下的 IE10。

单击链接时，地址栏显示并覆盖按钮栏，然后消失

除了重新设计页面布局之外，我希望按钮栏在显示时位于地址栏的正上方。

有谁知道使用 javaScript 检测地址栏是否可见的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:35:31.833

您可以尝试将页脚移动到位置栏上方，直到位置栏折叠，然后将页脚放回原处。这是一个潜在的解决方案：

1\. 如果用户可能在支持 IE10 触控的浏览器上，将页脚向上移动 50 像素（或其他）

```
if (!!window.navigator.msPointerEnabled) { // sniff for IE10 + touch
    $("#buttonBar").css("transform", "translateY(-50px)");
} 
```

2\. 监听与浏览器的第一次交互，然后用位置栏折叠页脚。

```
$("body").on("MSGestureStart MSInertiaStart MSGestureTap MSPointerDown", function () {
  $("body").off("MSGestureStart MSInertiaStart MSGestureTap MSPointerDown");
  $("#buttonBar").css("transform","translateY(0)");
}); 
```

* * *

此解决方案并非 100% 可靠，显然有一些交互会折叠位置栏但不会触发事件。我正在研究一个更好的解决方案，一旦找到就会更新，但我想我会分享这个来让事情顺利进行。

# javascript - 从视频库中删除视频导航闪烁

> ID：14709124
> 
> 赞同：1
> 
> 时间：2013-02-05T13:53:28.893
> 
> 标签：javascript, html, css, gallery

我只是建立一个视频库

这是视频库的链接

```
http://www.braddockinfotech.com/demo/dvnonline/vod1/ 
```

两个问题::

1）在使用向上和向下箭头键浏览图库时，会出现视频跳转或闪烁。如何删除它

2）画廊中第一个和最后一个视频之前和之后的额外空间不相等。

这是html代码

```
 <body onkeydown="HandleKeyDown(event);">
    <table cellpadding="0px" cellspacing="0px" border="0px" class="sitewidth">
        <tr>
            <td align="left" valign="top" style="width:800px;">
                <div id='divVideoPlayer'></div>
            </td>
            <td align="center" style="width:140px;">
                <div id="divPlaylistContainer">
                    <div id="playlistNavPrev">
                        <a id="imgNavPrev" onclick="MoveToDirection('Up');"><span class="arrow">&nbsp;</span>
                        </a>
                    </div>
                    <div id="divPlaylist">
                        <!--playlist-->
                        <div id="spanSlider" style='top:0px; position:relative;'>
                            <ul id="ulSlider">
                                <?php $index=1 ; $firstVideoUrl='' ; $firstImageUrl='' ; $videoDetails=G
                                etVideoDetails(); echo "<script> var siteUrl = '".$siteUrl.
                                "' </script>"; while ($row=m ysql_fetch_array($videoDetails)) { echo
                                "<script>video[".$index. "]='";echo $row[3]. "';</script>"; echo "<script>image[".$index.
                                "]='";echo $row[2]. "';</script>"; //echo "<script>title[".$index. "]='";echo
                                $row[1]. "';</script>"; echo "<script>title[".$index. "]='";echo str_replace(
                                "'", "\'",$row[1]). "';</script>"; // 0 - id , 1 - Title , 2- ImageUrl, 3
                                - VideoUrl //echo $row[0].$row[1].$row[2].$row[3]. "<br/>"; //echo
                                "<li id='liButton_".$index. "'><a  onclick=\"ShowVideo( '".$index."');\
                                "><img id='ImageButton_".$index. "' title='".$row[1]. "' alt='".$row[1]. "' src=".$siteUrl.
                                "timthumb/timthumb.php?src=".$row[2]. "&amp;h=54&amp;w=109&amp;zc=1&amp;a=c></a></li>"; $index++;
                                } ?>
                            </ul>
                        </div>
                    </div>
                    <div id="playlistNavNxt">
                        <a id="imgNavNext" onclick="MoveToDirection('Down');"><span class="arrow">&nbsp;</span>
                        </a>
                    </div>
                </div>
            </td>
    </table>
</body> 
```

这是javascript代码..

```
 var video = new Array();
 var image = new Array();
 var title = new Array();
 var noOfImagesCanShow = 6;
 var selected = 1;
 var slideNo = 1;

 String.prototype.trim = function () {
     return this.replace(/^\s+|\s+$/g, "");
 };

 function SetPlayList() {
     var listHtml = '';
     var lastIndex = slideNo * noOfImagesCanShow;
     var firstIndex = (slideNo * noOfImagesCanShow) - (noOfImagesCanShow - 1);
     var rowNo = 1;
     for (var i = firstIndex; i <= lastIndex; i++) {
         if (firstIndex >= 1 && lastIndex < title.length) {
             listHtml += "<li id='liButton_" + rowNo + "'><a  onclick=\"ShowVideo('" + i + "');\"><img id='ImageButton_" + i + "' title=\"" + title[i] + "\" alt='" + title[i] + "' src=" + siteUrl + "timthumb/timthumb.php?src=" + image[(i)] + "&amp;h=54&amp;w=109&amp;zc=1&amp;a=c></a></li>";
             rowNo++;
         }
     }
     document.getElementById('ulSlider').innerHTML = listHtml;
     document.getElementById('liButton_1').tabIndex = 2;
     document.getElementById('liButton_1').focus();
 }

 function ShowVideo(videoIndex) {
     var streamToBeUsed = "";
     var provideType = "";
     if (video[videoIndex].trim().substring(0, 7) == "http://") {
         streamToBeUsed = '';
         provideType = "http";
     } else {
         streamToBeUsed = "rtmp://cp87191.edgefcs.net/ondemand/";
         provideType = "rtmp";
     }
     var autostart = "true";

     if (jwplayer("divVideoPlayer") != null) {
         jwplayer("divVideoPlayer").stop();
     }

     jwplayer("divVideoPlayer").setup({
         file: streamToBeUsed + video[videoIndex].trim(),
         image: image[videoIndex],
         icons: "true",
         autostart: autostart,
         screencolor: "black",
         'width': '800',
         'height': '510',
         streamer: streamToBeUsed,
         provider: provideType,
         events: {
             onBeforePlay: function () {
                 document.getElementById('liButton_' + videoIndex).tabIndex = '2';
                 document.getElementById('liButton_' + videoIndex).focus();
             }
         }
     });
     // clearing all style
     var totalImages = noOfImagesCanShow;
     for (var i = 1; i <= totalImages; i++) {
         var imageId = (((slideNo * noOfImagesCanShow) - (noOfImagesCanShow)) + i).toString();
         if (document.getElementById('liButton_' + i) != null && document.getElementById('ImageButton_' + imageId) != null) {
             document.getElementById('liButton_' + i).className = 'inactiveli';
             document.getElementById('ImageButton_' + imageId).className = 'inactive';
         }
     }
     document.getElementById('liButton_' + videoIndex).className = 'activeli';
     document.getElementById('ImageButton_' + (((slideNo - 1) * noOfImagesCanShow) + parseInt(videoIndex)).toString()).className = 'active';

     SetButtonStatus(((slideNo - 1) * noOfImagesCanShow) + parseInt(videoIndex));

     document.getElementById('liButton_' + videoIndex).tabIndex = '2';
     document.getElementById('liButton_' + videoIndex).focus();
     document.getElementById('divVideoPlayer').tabIndex = '-1';

 }

 function SetButtonStatus(imageIndex) {
     if (imageIndex <= noOfImagesCanShow) {
         document.getElementById('imgNavPrev').className = 'disable_up';
         document.getElementById('imgNavPrev').tabIndex = '-1';
         document.getElementById('imgNavNext').tabIndex = '3';
     } else {
         document.getElementById('imgNavPrev').className = 'enable_up';
         document.getElementById('imgNavPrev').tabIndex = '1';
     }

     if (imageIndex > (image.length - noOfImagesCanShow)) {
         document.getElementById('imgNavNext').className = 'disable_down';
         document.getElementById('imgNavNext').tabIndex = '-1';
         document.getElementById('imgNavPrev').tabIndex = '1';
     } else {
         document.getElementById('imgNavNext').className = 'enable_down';
         document.getElementById('imgNavNext').tabIndex = '3';
     }
 }

 function MoveToDirection(direction) {
     if (direction == 'Down') {
         if (document.getElementById('imgNavNext').className != 'disable_down') {
             slideNo++;
             SetButtonStatus(slideNo * noOfImagesCanShow);
             SetPlayList();
             var topEle = document.getElementById('liButton_1');
             var nextSelImgId = topEle.getElementsByTagName("img")[0].getAttribute("id");
             document.getElementById(nextSelImgId).className = 'active';
         }
     } else if (direction == 'Up') {
         if (document.getElementById('imgNavPrev').className != 'disable_up') {
             slideNo--;
             SetButtonStatus(slideNo * noOfImagesCanShow);
             SetPlayList();

             var topEle = document.getElementById('liButton_6');
             var nextSelImgId = topEle.getElementsByTagName("img")[0].getAttribute("id");
             document.getElementById(nextSelImgId).className = 'active';

             console.log('Setting active element ' + nextSelImgId);

             document.getElementById('liButton_6').focus();
             console.log('active element ' + document.activeElement.id);
         }
     }
 }

 function HandleKeyDown(ev) {
     if (document.activeElement != null) {
         var element = document.activeElement;

         if (ev.keyCode == 13) {
             /*User Pressed Enter, Handle If required*/
             if (element.id == "imgNavNext" && element.className != "disable_down") {
                 MoveToDirection('Down');
             } else if (element.id == "imgNavPrev" && element.className != "disable_up") {
                 MoveToDirection('Up');
             } else if (element.id.indexOf("liButton_") > -1) {
                 var nameSections = element.id.split('_');

                 ShowVideo(nameSections[1]);
             }
         } else if (ev.keyCode == 40) {
             /*User Pressed Down*/
             console.log('Pressed Down');
             console.log('Element Id is ' + element.id);
             if (element.id.indexOf("liButton_") > -1) {
                 console.log('Entered liButton_ Checking....');
                 var nameSections = element.id.split('_');

                 var imgName = element.getElementsByTagName("img")[0].getAttribute("id");
                 var imgSection = imgName.split('_');
                 var nextImgToFocus = (parseInt(imgSection[1])) + 1;

                 var nextIndexToFocus = (parseInt(nameSections[1])) + 1;
                 if (document.getElementById("liButton_" + nextIndexToFocus) != null) {
                     document.getElementById("liButton_" + nextIndexToFocus).tabIndex = element.tabIndex;
                     element.tabIndex = "-1";

                     document.getElementById("ImageButton_" + nextImgToFocus).className = 'active';
                     document.getElementById("ImageButton_" + (nextImgToFocus - 1)).className = 'inactive';

                     document.getElementById("liButton_" + nextIndexToFocus).focus();
                 } else //need to focus in navNext
                 {
                     if (document.getElementById('imgNavNext').className != 'disable_down') {
                         console.log("Enetred need to focus navNext");
                         var topEle = document.getElementById('liButton_6');
                         var nextSelImgId = topEle.getElementsByTagName("img")[0].getAttribute("id");
                         document.getElementById(nextSelImgId).className = 'inactive';
                         document.getElementById('imgNavNext').focus();
                     }
                 }

             } else {
                 if (element.id.indexOf("imgNavPrev") > -1) {

                     document.getElementById("liButton_1").focus();
                 }
             }
         } else if (ev.keyCode == 38) {
             /*User Pressed Up Up*/
             if (element.id.indexOf("liButton_") > -1) {
                 console.log('Up pressed ' + element.id);
                 var nameSections = element.id.split('_');

                 var imgName = element.getElementsByTagName("img")[0].getAttribute("id");
                 var imgSection = imgName.split('_');
                 var nextImgToFocus = (parseInt(imgSection[1])) - 1;

                 var nextIndexToFocus = (parseInt(nameSections[1])) - 1;
                 if (document.getElementById("liButton_" + nextIndexToFocus) != null) {
                     document.getElementById("liButton_" + nextIndexToFocus).tabIndex = element.tabIndex;
                     element.tabIndex = "-1";

                     document.getElementById("ImageButton_" + nextImgToFocus).className = 'active';
                     document.getElementById("ImageButton_" + (nextImgToFocus + 1)).className = 'inactive';

                     document.getElementById("liButton_" + nextIndexToFocus).focus();
                 } else //need to focus in navPrev
                 {
                     if (document.getElementById('imgNavPrev').className != 'disable_up') {
                         var topEle = document.getElementById('liButton_1');
                         var nextSelImgId = topEle.getElementsByTagName("img")[0].getAttribute("id");
                         document.getElementById(nextSelImgId).className = 'inactive';

                         document.getElementById('imgNavPrev').focus();
                     }
                 }
             } else /* To handle up button from imgNavNext */
             {
                 if (element.id.indexOf("imgNavNext") > -1) {

                     document.getElementById("liButton_6").focus();
                 }
             }
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:07:00.003

我相信，图像闪烁的原因是因为直到单击按钮才加载它们。

```
for (var i = firstIndex; i <= lastIndex; i++) {
         if (firstIndex >= 1 && lastIndex < title.length) {
             listHtml += "<li id='liButton_" + rowNo + "'><a  onclick=\"ShowVideo('" + i + "');\"><img id='ImageButton_" + i + "' title=\"" + title[i] + "\" alt='" + title[i] + "' src=" + siteUrl + "timthumb/timthumb.php?src=" + image[(i)] + "&amp;h=54&amp;w=109&amp;zc=1&amp;a=c></a></li>";
             rowNo++;
         }
     } 
```

当视图向上或向下滚动时，列表会重新生成，并加载图像。

如果您预加载图像，您可以防止闪烁。

您可以通过一次预加载所有图像或在显示“正在加载（请稍候）图形”的同时加载图像来做到这一点。请参阅此[http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)

# java - 代码重构，但是怎么做？

> ID：14709126
> 
> 赞同：-4
> 
> 时间：2013-02-05T13:53:29.747
> 
> 标签：java, wav, javasound, steganography

我正在从 .wav 文件中读取数据，然后将其转换为二进制格式。然后我编写这些二进制文件并创建一个新的 .wav 文件。我希望在获得 .wav 文件的二进制格式后，我应该对其 LSB 进行少量修改，然后从这些修改的位写入文件。

我应该如何实现这个？我没有任何办法。请帮助我，因为我想通过音频文件进行速记。

```
import java.io.File;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;

    public class FiletoArrayofBytes

    {

        public static void main( String[] args )
        {
            FileInputStream fileInputStream=null;
            FileOutputStream fop = null;

            File file = new File("C:\\file.wav");

            byte[] bFile = new byte[(int) file.length()];

            try {
                File fileo = new File("c:/newfile.wav");
        fop = new FileOutputStream(fileo);
            // if file doesnt exists, then create it
                if (!fileo.exists()) {
                    fileo.createNewFile();
                }
                //convert file into array of bytes
            fileInputStream = new FileInputStream(file);
            fileInputStream.read(bFile);
            fileInputStream.close();

            for (int i = 0; i < bFile.length; i++) {
                System.out.println(Integer.toBinaryString(0x100 + (bFile[i])).substring(1));
                  //String  a =(Integer.toBinaryString(0x100 + (bFile[i])).substring(1));
                  int a=bFile[i];
                  fop.write(a);
                  System.out.println("\t i am a: " +a);
                }
                fop.flush();
                fop.close();
            System.out.println("Done");

            }catch(Exception e){
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:11:38.003

WAV 文件至少有一个[header](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)。您不能只是逐字节地读取/修改/写入它。

我会使用某种 Java-WAV 库。比如这个：[Java File IO](http://www.labbookpages.co.uk/audio/javaWavFiles.html)

`WavFile`课真的很好用。他们确实有很好的读/修改/写示例。

使用它您可以实现 LSB [（...google 帮我找到了这个链接...）](http://www.coderanch.com/t/488834//java/DataOutputStream-WAVE-steganography)。

# android - 如何更正 Android Activity 的布局元素相互堆叠？

> ID：14709127
> 
> 赞同：0
> 
> 时间：2013-02-05T13:53:34.137
> 
> 标签：android, xml, android-layout

我的应用程序活动的布局有问题。

最重要的元素（文本视图、编辑文本框）混杂在一起。
尽管 XML Layout 的代码看起来不错（类似设计的代码正在被另一个活动使用并且工作正常），但元素之间存在某种重叠。

这是一个屏幕截图（注意顶部附近元素的重叠）：

![在此处输入图像描述](../Images/3ab0a279f9ddc314eb50d049c1e3a40b.png)

我的 XML 布局的代码：（供参考）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/my_main_border"
        android:fillViewport="true" >

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:context=".Ques1" >

            <TextView
                android:id="@+id/textView_outlet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="4dp"
                android:layout_marginTop="26dp"
                android:text="@string/name_outlet"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_outlet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignBaseline="@id/textView_outlet"
                android:layout_toRightOf="@id/textView_outlet"
                android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,&apos;1234567890 "
                android:ems="10"
                android:inputType="textPersonName"
                android:textSize="12sp" />

            <View
                android:id="@+id/view1"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_outlet"
                android:background="@android:color/darker_gray"
                android:paddingBottom="10dp"
                android:paddingTop="10dp" />

            <TextView
                android:id="@+id/textView1_owner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view1"
                android:text="@string/name_owner"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_owner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/textView1_owner"
                android:layout_toRightOf="@id/textView1_owner"
                android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.&apos; "
                android:ems="10"
                android:inputType="textPersonName"
                android:textSize="12sp" />

            <View
                android:id="@+id/view2"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_owner"
                android:background="@android:color/darker_gray"
                android:paddingBottom="10dp"
                android:paddingTop="10dp" />

            <TextView
                android:id="@+id/textView1_phonenos"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view2"
                android:text="@string/phone_nos"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_phonenos"
                android:layout_width="45dp"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/textView1_phonenos"
                android:digits="0123456789"
                android:ems="3"
                android:inputType="phone"
                android:maxLength="3"
                android:textSize="12sp" />

            <EditText
                android:id="@+id/editText1_phonenos2"
                android:layout_width="50dp"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/editText1_phonenos"
                android:digits="0123456789"
                android:ems="3"
                android:inputType="phone"
                android:maxLength="4"
                android:textSize="12sp" />

            <EditText
                android:id="@+id/editText1_phonenos3"
                android:layout_width="60dp"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/editText1_phonenos2"
                android:digits="0123456789"
                android:ems="3"
                android:inputType="phone"
                android:maxLength="5"
                android:textSize="12sp" />

            <EditText
                android:id="@+id/editText1_phonenos4"
                android:layout_width="60dp"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/editText1_phonenos3"
                android:digits="0123456789"
                android:ems="3"
                android:inputType="phone"
                android:maxLength="5"
                android:textSize="12sp" />

            <View
                android:id="@+id/view3"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_phonenos4"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_state"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view3"
                android:text="@string/name_state"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_state"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/textView1_state"
                android:layout_toRightOf="@id/textView1_state"
                android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.&apos; "
                android:ems="10"
                android:inputType="textPersonName"
                android:textSize="12sp" />

            <View
                android:id="@+id/view4"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_state"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_city"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view4"
                android:text="@string/name_city"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_city"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/textView1_city"
                android:layout_toRightOf="@id/textView1_city"
                android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ. "
                android:ems="10"
                android:inputType="textPersonName"
                android:textSize="12sp" />

            <View
                android:id="@+id/view5"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_city"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_market"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view5"
                android:text="@string/market"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_market"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/textView1_market"
                android:layout_toRightOf="@id/textView1_market"
                android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,&apos;1234567890 "
                android:ems="10"
                android:inputType="textPersonName"
                android:textSize="12sp" />

            <View
                android:id="@+id/view6"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_market"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_gps"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view6"
                android:text="@string/gps_coord"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_gps"
                android:layout_width="wrap_content"
                android:layout_height="40dp"
                android:layout_alignBaseline="@id/textView1_gps"
                android:layout_toRightOf="@id/textView1_gps"
                android:clickable="false"
                android:cursorVisible="false"
                android:ems="10"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:inputType="textPersonName"
                android:textSize="12sp" />

            <View
                android:id="@+id/view7"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_gps"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_outlet_pic"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view7"
                android:text="@string/pic_outlet"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <Button
                android:id="@+id/Button01_outletpic"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/textView1_outlet_pic"
                android:drawableLeft="@drawable/select_pic"
                android:text="@string/selectPic_btn"
                android:textSize="10sp" />

            <View
                android:id="@+id/view8"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/Button01_outletpic"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_quad"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view8"
                android:text="@string/quad_code"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1_quad"
                android:layout_width="wrap_content"
                android:layout_height="40dp"
                android:layout_alignBaseline="@id/textView1_quad"
                android:layout_toRightOf="@id/textView1_quad"
                android:clickable="false"
                android:cursorVisible="false"
                android:ems="10"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:inputType="textPersonName"
                android:textSize="12sp" />

            <View
                android:id="@+id/view9"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/editText1_quad"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_own_veh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view9"
                android:text="@string/own_veh"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <RadioGroup
                android:id="@+id/radioGroup1_own_veh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/textView1_own_veh"
                android:layout_centerHorizontal="true"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/radio0"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="false"
                    android:text="@string/radio0_yes"
                    android:textSize="13sp" />

                <RadioButton
                    android:id="@+id/radio1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@id/radio0"
                    android:text="@string/radio1_no"
                    android:textSize="13sp" />
            </RadioGroup>

            <View
                android:id="@+id/view10"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/radioGroup1_own_veh"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_own_sales_team"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view10"
                android:text="@string/own_sales_team"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <RadioGroup
                android:id="@+id/radioGroup1_own_salesT"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/textView1_own_sales_team"
                android:layout_centerHorizontal="true"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/radio011"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="false"
                    android:text="@string/radio011_yes"
                    android:textSize="13sp" />

                <RadioButton
                    android:id="@+id/radio022"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@id/radio011"
                    android:text="@string/radio022_no"
                    android:textSize="13sp" />
            </RadioGroup>

            <View
                android:id="@+id/view11"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/radioGroup1_own_salesT"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_own_goods_collect"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view11"
                android:text="@string/own_goods_collect"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <RadioGroup
                android:id="@+id/radioGroup1_own_goods_coll"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/textView1_own_goods_collect"
                android:layout_centerHorizontal="true"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/radio033"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="false"
                    android:text="@string/radio033_yes"
                    android:textSize="13sp" />

                <RadioButton
                    android:id="@+id/radio044"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@id/radio033"
                    android:text="@string/radio044_no"
                    android:textSize="13sp" />
            </RadioGroup>

            <View
                android:id="@+id/view12"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/radioGroup1_own_goods_coll"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_monthly_vOl"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view12"
                android:text="@string/monthly_vOl"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <CheckBox
                android:id="@+id/cbCat1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/textView1_monthly_vOl"
                android:layout_marginLeft="50dp"
                android:text="@string/cat1"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/cbCat1"
                android:layout_marginLeft="55dp"
                android:layout_toRightOf="@id/cbCat1"
                android:text="@string/cat2"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/cbCat1"
                android:layout_marginLeft="50dp"
                android:text="@string/cat3"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/cbCat3"
                android:layout_marginLeft="9dp"
                android:layout_toRightOf="@id/cbCat3"
                android:text="@string/cat4"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/cbCat3"
                android:layout_marginLeft="50dp"
                android:text="@string/cat5"
                android:textSize="13sp" />

            <View
                android:id="@+id/view13"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/cbCat5"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <TextView
                android:id="@+id/textView1_monthly_vAl"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/view13"
                android:text="@string/monthly_vAl"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <CheckBox
                android:id="@+id/cbCat11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/textView1_monthly_vAl"
                android:layout_marginLeft="50dp"
                android:text="@string/cat11"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat22"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/cbCat11"
                android:layout_marginLeft="8dp"
                android:layout_toRightOf="@id/cbCat11"
                android:text="@string/cat22"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat33"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/cbCat11"
                android:layout_marginLeft="50dp"
                android:text="@string/cat33"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat44"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@id/cbCat33"
                android:layout_marginLeft="9dp"
                android:layout_toRightOf="@id/cbCat33"
                android:text="@string/cat44"
                android:textSize="13sp" />

            <CheckBox
                android:id="@+id/cbCat55"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/cbCat33"
                android:layout_marginLeft="50dp"
                android:text="@string/cat55"
                android:textSize="13sp" />

            <View
                android:id="@+id/view14"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/cbCat55"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <View
                android:id="@+id/viewMenuBarP1"
                android:layout_width="wrap_content"
                android:layout_height="2dp"
                android:layout_below="@id/view14"
                android:background="@android:color/darker_gray"
                android:paddingBottom="2dp"
                android:paddingTop="2dp" />

            <Button
                android:id="@+id/btnNxtPage2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/viewMenuBarP1"
                android:layout_centerInParent="true"
                android:gravity="center"
                android:text="@string/btnNextPage2" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

任何建议都是可观的..
在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:55:53.553

不要`toRightOf`只定义 but `toLeftOf`，`above`并且`below`在需要时也定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:16:25.400

试试这个代码：

```
 <RelativeLayout 
   xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:app="http://schemas.android.com/tools"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >
   <ScrollView
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/scrollView1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:background="#FFFFFF"
       android:fillViewport="true" >
            <RelativeLayout
               xmlns:android="http://schemas.android.com/apk/res/android"
               xmlns:app="http://schemas.android.com/tools"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:layout_alignParentLeft="true"
               android:layout_alignParentTop="true"
               app:context=".Ques1" >
            <TextView
            android:id="@+id/textView_outlet"
         android:layout_width="wrap_content"
            android:layout_height="wrap_content"
           android:layout_alignParentLeft="true"
          android:layout_alignParentTop="true"
          android:text="name_outlet"
     android:textAppearance="?android:attr/textAppearanceMedium" />
           <EditText
                 android:id="@+id/editText1_outlet"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_alignBaseline="@id/textView_outlet"                                                                         
                 android:layout_alignParentRight="true"
                 android:layout_toRightOf="@id/textView_outlet"
                 android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,&apos;1234567890 "
                  android:ems="10"
                android:inputType="textPersonName"
                  android:textSize="12sp" />

    <View
     android:id="@+id/view1"
     android:layout_width="wrap_content"
     android:layout_height="2dp"
     android:layout_below="@id/editText1_outlet"
     android:background="@android:color/darker_gray"
     android:paddingBottom="10dp"
     android:paddingTop="10dp" />

     <TextView
      android:id="@+id/textView1_owner"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_below="@id/view1"
      android:text="name_owner"
      android:textAppearance="?android:attr/textAppearanceMedium" />

       <EditText
      android:id="@+id/editText1_owner"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignBaseline="@id/textView1_owner"
      android:layout_alignParentRight="true"
      android:layout_toRightOf="@id/textView1_owner"
      android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.&apos; "
      android:ems="10"
      android:inputType="textPersonName"
      android:textSize="12sp" />

  <View
     android:id="@+id/view2"
     android:layout_width="wrap_content"
     android:layout_height="2dp"
   android:layout_below="@+id/textView1_owner"
   android:layout_marginTop="10dp"
   android:background="@android:color/darker_gray"
    android:paddingBottom="10dp"
    android:paddingTop="10dp" />

    <View
    android:id="@+id/view3"
     android:layout_width="wrap_content"
     android:layout_height="2dp"
      android:layout_below="@+id/editText1_phonenos4"
     android:background="@android:color/darker_gray"
     android:paddingBottom="2dp"
   android:paddingTop="2dp" />

  <TextView
   android:id="@+id/textView1_state"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_below="@+id/view3"
   android:text="name_state"
   android:textAppearance="?android:attr/textAppearanceMedium" />

 <EditText
   android:id="@+id/editText1_state"
   android:layout_width="wrap_content"                          
   android:layout_height="wrap_content"
   android:layout_alignBaseline="@+id/textView1_state"
   android:layout_alignParentRight="true"
   android:layout_toRightOf="@+id/textView1_state"
   android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.&apos; "
   android:ems="10"
   android:inputType="textPersonName"
   android:textSize="12sp" />

    <View
       android:id="@+id/view4"                                                                                                                                      
      android:layout_width="wrap_content"                                                                                                                                    
      android:layout_height="2dp"                                                                                                                                      
      android:layout_alignParentLeft="true"                                                                                                                                      
      android:layout_below="@+id/textView1_state"                                                                                                                                      
      android:layout_marginTop="10dp"                                                                                                                                      
       android:background="@android:color/darker_gray"                                                                                                                                     
      android:paddingBottom="10dp"                                                                                                                                     
      android:paddingTop="10dp" />
     <TextView
     android:id="@+id/textView1_phonenos"                                                                                                                                   
      android:layout_width="wrap_content"                                                                                                                                
       android:layout_height="wrap_content"                                                                                                                                      
       android:layout_alignParentLeft="true"
       android:layout_below="@+id/view2"                                                                                                                                                                                                                                                                         
       android:text="phone_nos"                                                                                                                                     
       android:textAppearance="?android:attr/textAppearanceMedium" />                                                                                                                                     

   <EditText
     android:id="@+id/editText1_phonenos"                                                                                                                                   
     android:layout_width="45dp"                                                                                                                                       
     android:layout_height="wrap_content"                                                                                                                                       
     android:layout_alignBaseline="@+id/textView1_phonenos"                                                                                                                                       
     android:layout_alignBottom="@+id/textView1_phonenos"                                                                                                                                       
     android:layout_marginLeft="14dp"                                                                                                                                       
     android:layout_toRightOf="@+id/textView1_phonenos"                                                                                                                                       
     android:digits="0123456789"                                                                                                                                     
     android:ems="3"                                                                                                                                       
    android:inputType="phone"                                                                                                                                        
     android:maxLength="3"                                                                                                                                       
     android:textSize="12sp" />                                                                                                                                       
   <EditText                                                                                                                                            
     android:id="@+id/editText1_phonenos2"
     android:layout_width="45dp"                                                                              
      android:layout_height="wrap_content"                                                                                                                                       
      android:layout_alignBaseline="@+id/editText1_phonenos"                                                                                                                                     
      android:layout_alignBottom="@+id/editText1_phonenos"                                                                                                                                      
       android:layout_toRightOf="@+id/editText1_phonenos"                                                                                                                                     
       android:ems="3"                                                                                                                                     
      android:inputType="phone"                                                                                                                                     
       android:maxLength="5"                                                                                                                                     
       android:textSize="12sp" />                                                                                                                                     
          <EditText                                                                                                                                   
          android:id="@+id/editText1_phonenos3"
           android:layout_width="50dp"                                                                                                                             
         android:layout_height="wrap_content"                                                                                                                                   
           android:layout_alignTop="@+id/textView1_phonenos"                                                                                                                                 
           android:layout_toRightOf="@+id/editText1_phonenos2"                                                                                                                                 
              android:digits="0123456789"                                                                                                                               
            android:ems="3"                                                                                                                                 
            android:inputType="phone"                                                                                                                               
            android:maxLength="5"     
       android:textSize="12sp" />

    <EditText                                                                             
    android:id="@+id/editText1_phonenos4                                       
    android:layout_width="60dp"                                                                                                                                        
    android:layout_height="wrap_content"                                                                                                                                        
    android:layout_alignBaseline="@+id/editText1_phonenos3"                                                                                                                                        
    android:layout_alignBottom="@+id/editText1_phonenos3"                                                                                                                                        
    android:layout_toRightOf="@+id/editText1_phonenos3"                                                                                                                                        
    android:digits="0123456789"                                                                                                                                        
    android:ems="3"
    android:inputType="phone"
    android:maxLength="5"
   android:textSize="12sp" />
    <TextView
     android:id="@+id/textView1_city"
     android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:layout_below="@id/view4"
    android:text="name_city"
    android:textAppearance="?android:attr/textAppearanceMedium" />
    <EditText                                                                                                                                    
     android:id="@+id/editText1_city"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignBaseline="@+id/textView1_city"
     android:layout_alignParentRight="true"
     android:layout_toRightOf="@+id/textView1_city"
     android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ. "
     android:ems="10"
     android:inputType="textPersonName"
     android:textSize="12sp" />
  <View
  android:id="@+id/view5"
android:layout_width="wrap_content"
android:layout_height="2dp"
android:layout_below="@+id/textView1_city"
android:layout_marginTop="10dp"
android:background="@android:color/darker_gray"
android:paddingBottom="2dp"
android:paddingTop="2dp" />
    <TextView
android:id="@+id/textView1_market"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/view5"
android:text="market"
android:textAppearance="?android:attr/textAppearanceMedium" />
<EditText
android:id="@+id/editText1_market"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/textView1_market"
android:layout_alignParentRight="true"
android:layout_toRightOf="@+id/textView1_market"
android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,&apos;1234567890 "
android:ems="10"
android:inputType="textPersonName"
android:textSize="12sp" />
<View
android:id="@+id/view6"
android:layout_width="wrap_content"
android:layout_height="2dp"
android:layout_below="@+id/textView1_market"
android:layout_marginTop="10dp"
android:background="@android:color/darker_gray"
android:paddingBottom="2dp"
android:paddingTop="2dp" />
<TextView
android:id="@+id/textView1_gps"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/view6"
android:text="gps_coord"
android:textAppearance="?android:attr/textAppearanceMedium" />

 <EditText                                                                                                                                         
android:id="@+id/editText1_gps"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/textView1_gps"
android:layout_alignParentRight="true"
android:layout_toRightOf="@+id/textView1_gps"
android:clickable="false"
android:cursorVisible="false"
android:ems="10"
android:focusable="false"
android:focusableInTouchMode="false"
android:inputType="textPersonName"
android:textSize="12sp" />
<View
android:id="@+id/view7"
android:layout_width="wrap_content"
android:layout_height="2dp"
android:layout_below="@+id/textView1_gps"
android:layout_marginTop="10dp"
android:background="@android:color/darker_gray"
android:paddingBottom="2dp"
android:paddingTop="2dp" />
<TextView                                                                                                                                            
android:id="@+id/textView1_outlet_pic"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@id/view7"
android:text="pic_outlet"
android:textAppearance="?android:attr/textAppearanceMedium" />
<View
android:id="@+id/view8"
android:layout_width="wrap_content"
android:layout_height="2dp"
android:layout_below="@+id/textView1_outlet_pic"
android:layout_marginTop="10dp"
android:background="@android:color/darker_gray"
android:paddingBottom="2dp"
android:paddingTop="2dp" />
<TextView
android:id="@+id/textView1_quad"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@id/view8"
android:text="quad_code"
android:textAppearance="?android:attr/textAppearanceMedium" />
<Button                                                                                                                                          
android:id="@+id/Button01_outletpic"
android:layout_width="wrap_content"
android:layout_height="30dp"
android:layout_alignTop="@+id/textView1_outlet_pic"
android:layout_toRightOf="@+id/textView1_state"
android:drawableLeft="@drawable/select_pic"
android:text="selectPic_btn"
android:textSize="10sp" />
<EditText
android:id="@+id/editText1_quad"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignBaseline="@+id/textView1_quad"
android:layout_alignParentRight="true"
android:layout_toRightOf="@+id/textView1_quad"                                                                                                                                               
android:clickable="false"
android:cursorVisible="false"
android:ems="10"
android:focusable="false"
android:focusableInTouchMode="false"
android:inputType="textPersonName"
android:textSize="12sp" />
<View                                                                                                                                      
android:id="@+id/view9"
android:layout_width="wrap_content"
android:layout_height="2dp"
android:layout_alignParentLeft="true"
android:layout_below="@+id/textView1_quad"
android:layout_marginTop="10dp"
android:background="@android:color/darker_gray"
android:paddingBottom="2dp"/>
                                                                                                                                       android:paddingTop="2dp" 
        <TextView
            android:id="@+id/textView1_own_veh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/view9"
            android:text="own_veh"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <RadioGroup
            android:id="@+id/radioGroup1_own_veh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1_own_veh"
            android:layout_centerHorizontal="true"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/radio0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="false"
                android:text="radio0_yes"
                android:textSize="13sp" />

            <RadioButton
                android:id="@+id/radio1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/radio0"
                android:text="radio1_no"
                android:textSize="13sp" />
        </RadioGroup>

        <View
            android:id="@+id/view10"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_below="@+id/radioGroup1_own_veh"
            android:background="@android:color/darker_gray"
            android:paddingBottom="2dp"
            android:paddingTop="2dp" />

        <TextView
            android:id="@+id/textView1_own_sales_team"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/view10"
            android:text="own_sales_team"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <RadioGroup
            android:id="@+id/radioGroup1_own_salesT"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1_own_sales_team"
            android:layout_centerHorizontal="true"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/radio011"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="false"
                android:text="radio011_yes"
                android:textSize="13sp" />

            <RadioButton
                android:id="@+id/radio022"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/radio011"
                android:text="radio022_no"
                android:textSize="13sp" />
        </RadioGroup>

        <View
            android:id="@+id/view11"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_below="@+id/radioGroup1_own_salesT"
            android:background="@android:color/darker_gray"
            android:paddingBottom="2dp"
            android:paddingTop="2dp" />
        <TextView
            android:id="@+id/textView1_own_goods_collect"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/view11"
            android:text="own_goods_collect"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <RadioGroup
            android:id="@+id/radioGroup1_own_goods_coll"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1_own_goods_collect"
            android:layout_centerHorizontal="true"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/radio033"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="false"
                android:text="radio033_yes"
                android:textSize="13sp" />

            <RadioButton
                android:id="@+id/radio044"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/radio033"
                android:text="radio044_no"
                android:textSize="13sp" />
        </RadioGroup>

        <View
            android:id="@+id/view12"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_below="@+id/radioGroup1_own_goods_coll"
            android:background="@android:color/darker_gray"
            android:paddingBottom="2dp"
            android:paddingTop="2dp" />
         <TextView
            android:id="@+id/textView1_monthly_vOl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/view12"
            android:text="@string/monthly_vOl"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/cbCat1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/textView1_monthly_vOl"
            android:layout_marginLeft="50dp"
            android:text="@string/cat1"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/cbCat1"
            android:layout_marginLeft="55dp"
            android:layout_toRightOf="@id/cbCat1"
            android:text="@string/cat2"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/cbCat1"
            android:layout_marginLeft="50dp"
            android:text="@string/cat3"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/cbCat3"
            android:layout_marginLeft="9dp"
            android:layout_toRightOf="@id/cbCat3"
            android:text="@string/cat4"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/cbCat3"
            android:layout_marginLeft="50dp"
            android:text="@string/cat5"
            android:textSize="13sp" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:45:55.863

使用 android:layout_alignBaseline="@id/textView_outlet" 而不是 android:layout_alignBaseline="@+id/textView_outlet"

@+id 是创建一个新的 id 而@id 是在 id 已经创建时使用。

如果问题仍然存在，请随时提出任何疑问

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T09:55:28.963

代码继续在这里：

```
 <View
            android:id="@+id/view13"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_below="@id/cbCat5"
            android:background="@android:color/darker_gray"
            android:paddingBottom="2dp"
            android:paddingTop="2dp" />

        <TextView
            android:id="@+id/textView1_monthly_vAl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/view13"
            android:text="@string/monthly_vAl"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/cbCat11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/textView1_monthly_vAl"
            android:layout_marginLeft="50dp"
            android:text="@string/cat11"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat22"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/cbCat11"
            android:layout_marginLeft="8dp"
            android:layout_toRightOf="@id/cbCat11"
            android:text="@string/cat22"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat33"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/cbCat11"
            android:layout_marginLeft="50dp"
            android:text="@string/cat33"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat44"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/cbCat33"
            android:layout_marginLeft="9dp"
            android:layout_toRightOf="@id/cbCat33"
            android:text="@string/cat44"
            android:textSize="13sp" />

        <CheckBox
            android:id="@+id/cbCat55"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/cbCat33"
            android:layout_marginLeft="50dp"
            android:text="@string/cat55"
            android:textSize="13sp" />

        <View
            android:id="@+id/view14"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_below="@id/cbCat55"
            android:background="@android:color/darker_gray"
            android:paddingBottom="2dp"
            android:paddingTop="2dp" />

        <View
            android:id="@+id/viewMenuBarP1"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_below="@id/view14"
            android:background="@android:color/darker_gray"
            android:paddingBottom="2dp"
            android:paddingTop="2dp" />

        <Button
            android:id="@+id/btnNxtPage2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/viewMenuBarP1"
            android:layout_centerInParent="true"
            android:gravity="center"
            android:text="@string/btnNextPage2" />            
        </RelativeLayout>                
       </ScrollView>   
      </RelativeLayout> 
```

# c# - 实体框架联合和投影失败

> ID：14709128
> 
> 赞同：0
> 
> 时间：2013-02-05T13:53:41.903
> 
> 标签：c#, entity-framework

这是一个多方面的问题，所以请多多包涵！我有两个疑问：

```
var dynamicResult = Repository.Select<Table1>()
                        .Where(b => b.InactivatedD == null)
                        .Select(b => b.Table2);

var staticResult = Repository.Select<Table2>()
                       .Where(b => b.column == "CONSTANT");

return dynamicResult.Union(staticResult).ToList(); 
```

这工作正常。现在，我向 Table2 类添加了一个附加属性，并指示 EF 忽略我的配置中的字段，如下所示：

```
Ignore(e => NewColumn); 
```

这也很有效，因为我可以正确设置字段而 EF 不会抛出异常。现在我不知道是否有一种简单的方法可以做我想做的事。在我的第一个查询中，Table1 有一个列，我想用它来补充 Table2 上的这个新列，但我不知道有什么简单的方法可以做到这一点。我唯一能想到的是：

```
var dynamicResult = Repository.Select<Table1>()
                        .Where(b => b.InactivatedD == null)
                        .Select(b => new Table2 { Column1 = b.Table2.Column1, NewColumn = b.SomeColumn ... <additional initialization> }); 
```

这有点混乱，初始化会变得很长，因为这个实体有大约 15 列我需要水合。当然，我可以只在我的属性中遍历 Table2 和 Table1 之间的关联，而不是尝试在上面的查询中设置它，但这似乎是额外的工作和一个需要维护的查询。此外，当使用上述方法时，我的联合不再起作用。如果我的查询如下所示：

```
var dynamicResult = Repository.Select<Table1>()
                        .Where(b => b.InactivatedD == null)
                        .Select(b => new Table2 { Column1 = b.Table2.Column1, NewColumn = b.SomeColumn })

var staticResult = Repository.Select<Table2>()
                       .Where(b => b.column == "CONSTANT")
                       .Select(b => new Table2 { Column1 = b.Table2.Column1, NewColumn = b.SomeColumn })

return dynamicResult.Union(staticResult).ToList(); 
```

我得到一个例外，实体或复杂类型（表 2）不能由实体框架查询构造，这让我不知所措。在我告诉 EF 忽略 NewColumn 之前，我明白为什么会出现这个错误，但现在我不确定为什么会弹出这个错误。

总而言之：有没有比我上面提出的更好的方法来补充我的新列，任何人都可以确定为什么我无法在查询中合并使用 new 创建的实体？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:31:16.617

无论您处理哪些属性，都不允许在 EF 查询中创建实体类型。原因是 EF 无法跟踪此类实体，因为它本身并没有实现它们。

您应该定义一个类似于 的类型`Table2`，包括两个查询中该类型的新列和项目。您将能够合并查询。

# vbscript - QTP Link 对象不支持 Exist 属性

> ID：14709133
> 
> 赞同：1
> 
> 时间：2013-02-05T13:53:53.920
> 
> 标签：vbscript, qtp

我对 QTP 11 有一个奇怪的问题。以下代码到目前为止工作，但突然停止工作并抛出 Object does not support this property or method.: 'objPage.Link' for the line with 'if link exists'

```
Set objBrowser = Browser("creationtime:=" & Desktop.ChildObjects(oDesc).Count - 1 & "")
Set objPage = objBrowser.Page("title:=.*")
If objPage.Link("class:=menu_link_tab_.*", "html id:=.*DesktopTab").Exist(3) Then
   msgbox "ok"
End If 
```

谁能告诉我什么是错的和/或如何做对？

编辑：我解决了这个问题，但仍然不知道发生了什么。我只是从 QTP 脚本中剪切这部分并将其粘贴到记事本中，然后将其从记事本复制到 QTP。一切正常。我没有改变任何东西......欢迎任何关于到底发生了什么的想法。

另一个编辑：问题随机再次出现。在没有任何更改的情况下，我可以运行测试 10 次，让它随机失败，并显示“对象不支持此属性或方法”消息

我有一个 startBrowser 函数，我在其中设置了 objPage 和 objBrowser ：

```
Function startBrowser(vURL)
   Dim oDesc
   Set IE = CreateObject("InternetExplorer.Application")

   IE.Visible = True
   IE.Navigate vURL
   Window("hwnd:=" & IE.HWND).Maximize
   Set oDesc = Description.Create
   oDesc( "micclass" ).Value = "Browser"
   If Desktop.ChildObjects(oDesc).Count > 0 Then
       Set objBrowser = Browser("creationtime:=" & Desktop.ChildObjects(oDesc).Count - 1 & "")
   End If
   Set objPage = objBrowser.Page("title:=.*")
End Function 
```

我添加了很多带有 GetROProperty 的 msgbox 来验证对象是否正常。他们似乎是。

现在我单击链接的功能如下所示：

```
Function clickMainMenuLink(vIdentifier)
   Set objLink = objPage.Link("class:=menu_link_tab_.*", "html id:=.*" & vIdentifier, "index:=0")
   If objLink.Exist(timeOut) Then
       objLink.Click
       Else
       reporter.ReportEvent micFail, "Click the " & vIdentifier & " menu link", "Cannot find the " & vIdentifier & " menu link"
       ExitTestIteration
   End If
End Function 
```

所以目前我的测试只是打开浏览器并在我尝试调试事物时单击一个链接，但它仍然失败或随机通过。运行错误指示带有“设置 objLink”的行。进一步调试的任何想法？如果重要的话，我在 QTP11 和 IE8 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:04:21.440

从您的错误*不支持此属性或方法：`objPage.Link`*看来问题不`.Exist`在于行的一部分而是`.Link`部分（您可以通过将行分成两行来验证这一点，看看哪个失败

```
set objLink = objPage.Link("class:=menu_link_tab_.*", "html id:=.*DesktopTab")
If objLink.Exist(3) Then 
```

从您的评论来看，您似乎是`objPage`在与使用它的位置不同的位置创建的，我建议确保对象可以正常到达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:43:42.200

谢谢莫蒂，你的推理是对的。问题出在 objPage 部分。尽管我可以在函数 QTP 中读取 objPage 的每个属性，但有时只是没有将此 objPage 视为 Page 对象。我想这与没有明确声明类型有关，但这只是一个猜测。作为一个肮脏的解决方法，我现在在每个函数中设置了 objBrowser 和 objPage 并且它可以 100% 工作。

# ruby-on-rails - 使用带有静态角色列表的 CanCan

> ID：14709135
> 
> 赞同：0
> 
> 时间：2013-02-05T13:53:58.420
> 
> 标签：ruby-on-rails, gem, cas

我希望在不使用数据库的情况下在我的 rails 应用程序上设置基于角色的简单访问，我们使用 CAS 来处理身份验证，以便可以从 CAS 变量中捕获用户名。

我的想法是将用户名映射到哈希中的特定角色（在 application.rb 中，请参阅下面的想法），然后使用该角色来确定内容是否可见。

```
ROLES = { 
        'admin' => [ 'username1', 'username2'],
        'standard_user' => ['username3']
        } 
```

有人建议我查看 CanCan gem，但这似乎想从我不想设置的用户模型中获取角色信息，主要是因为我们打算将角色信息作为附近的另一个 CAS 变量传递未来。

所以我想知道是否有人知道这个计划是否可行，并可能为我指出任何可能对我有帮助的代码片段的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:01:12.030

即使使用这种设置，您也应该能够使用 cancan。如果您有一个存储用户模型`username`并且能力围绕该模型旋转，请尝试以下操作`ability.rb`

```
# user.rb
ROLES = {
  admin: %w[username1 username2],
  standard_user: %w[username3]
}

# ability.rb
user ||= User.new # username is blank

if User::ROLES[:admin].include?(user.username)
  can :manage, :all

elsif User::ROLES[:standard_user].include?(user.username)
  cannot :manage, Invoices

else
  ...
end 
```

# algorithm - 对快速多极方法实施的建议？

> ID：14709141
> 
> 赞同：7
> 
> 时间：2013-02-05T13:54:08.037
> 
> 标签：algorithm, reference, physics, fastmm

我有兴趣实施[快速多极方法](http://en.wikipedia.org/wiki/Fast_multipole_method)来有效地模拟排斥粒子系统。

我找到了大量讨论 FMM 的参考资料，但对于想要完全理解该算法的非数学家来说，似乎没有一个非常容易理解。

您能否推荐一个清晰地解释该过程背后的数学原理并包含示例正确实现的伪代码的基础参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:21:54.280

我绝不是 FMM 方面的专家，但是这个[java 实现和介绍](http://www.umiacs.umd.edu/~ramani/fmm/)是迄今为止我找到的最好的资源，可以仔细而缓慢地解释它。该论文擅长在使用术语之前对其进行定义，并且代码至少可以用作参考点。数学仍然很快变得毛茸茸，但它就是这样:)

[紧随其后的是对快速多极方法](http://math.berkeley.edu/~strain/221.F12/pfmm.pdf)的简单介绍。它没有解释有效的 FMM 实现的实际细节，但它很好地介绍了基本思想。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T09:11:44.577

我喜欢[FMM 的短期课程](http://math.nyu.edu/faculty/greengar/shortcourse_fmm.pdf)。在一维中从FMM开始，而不是在二维中使用复变量理论来进行FMM。还有使用球谐函数理论的疯狂 3D 版本，我想这对于非数学家来说可能非常困难。但是如果你只需要二维的 FMM，你应该没问题。

不幸的是，那里没有给出伪代码。

但是你真的需要 FMM 的准确性吗？你可能对[Barnes-Hut 的算法没问题](http://en.wikipedia.org/wiki/Barnes%E2%80%93Hut_simulation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-24T14:42:44.580

在遇到与您类似的问题后，我最终编写了一个完整记录的 Python 快速多极方法实现，[pybbfmm](https://andyljones.com/pybbfmm)。我还写了一个简短的、[不含数学的教程](https://andyljones.com/posts/multipole-methods.html)，介绍了该方法的工作原理。总之，我认为它们比我能找到的任何其他演示文稿都更易于访问。

（元：虽然这实际上是一个链接帖子，但 OP 明确要求提供一个链接。我已经添加了我认为最后一个链接中缺少的内容 - 库的名称 - 但我不确定如何提供这个除了作为名称和链接之外的答案。当然，它不会比接受的答案感觉更多的链接帖子。如果这个也被删除，我会放弃）

# c# - 通过 Java 将 Speex/Flac 文件发布到 Google Voice Search API

> ID：14709142
> 
> 赞同：0
> 
> 时间：2013-02-05T13:54:07.690
> 
> 标签：c#, java, http-post, voice-recognition

我正在尝试构建一个连接到 Google Voice Search API 的 Java 应用程序。我开发了一个 C# 程序，它运行良好。

C＃：

```
try
{
   FileStream FS_Audiofile = new FileStream("temp.flac", FileMode.Open, FileAccess.Read);
   BinaryReader BR_Audiofile = new BinaryReader(FS_Audiofile);
   byte[] BA_AudioFile = BR_Audiofile.ReadBytes((Int32)FS_Audiofile.Length);
   FS_Audiofile.Close();
   BR_Audiofile.Close();

   HttpWebRequest _HWR_SpeechToText = null;

   _HWR_SpeechToText = (HttpWebRequest)WebRequest.Create("http://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=de-DE&maxresults=1&pfilter=0");

   _HWR_SpeechToText.Method = "POST";
   _HWR_SpeechToText.ContentType = "audio/x-flac; rate=44100";
   _HWR_SpeechToText.ContentLength = BA_AudioFile.Length;
   _HWR_SpeechToText.GetRequestStream().Write(BA_AudioFile, 0, BA_AudioFile.Length);

   HttpWebResponse HWR_Response = (HttpWebResponse)_HWR_SpeechToText.GetResponse();
   if (HWR_Response.StatusCode == HttpStatusCode.OK)
   {
      StreamReader SR_Response = new StreamReader(HWR_Response.GetResponseStream());
   }

}
catch (Exception e)
{

} 
```

这里是代码 Java，它不起作用：

```
RandomAccessFile accessFile = new RandomAccessFile("temp.flac", "r");
byte[] bs = new byte[(int)accessFile.length()];
accessFile.read(bs);

        try
        {
            HttpURLConnection httpURLConnection = null;
            URL url = new URL("http", "www.google.com", "/speech-api/v1/recognize?xjerr=1&client=chromium&lang=de-DE&maxresults=1&pfilter=0");
            httpURLConnection = (HttpURLConnection)url.openConnection();

            int contentLength = bs.length;

            httpURLConnection.setDoOutput(true);
            httpURLConnection.setDoInput(true);
            httpURLConnection.setInstanceFollowRedirects(false); 
            httpURLConnection.setUseCaches (false);

            httpURLConnection.setRequestMethod("POST");
            httpURLConnection.setRequestProperty("Content-Type", "audio/x-flac; rate=44100");
            httpURLConnection.setRequestProperty("Content-Length", Integer.toString(contentLength));

            DataOutputStream dataOutputStream = new DataOutputStream(httpURLConnection.getOutputStream());
            dataOutputStream.write(bs);
            dataOutputStream.flush();

            Scanner scanner = new Scanner(httpURLConnection.getInputStream()).useDelimiter("\\A");
            System.out.println(scanner.toString());

        }
        catch ( Exception e)
        {
           System.out.println(e.toString());
        } 
```

我收到异常“java.io.IOException：写入服务器时出错”。

有谁看到，我在做什么类型的错误？提前感谢您的帮助。

Thx 和问候 Linoge

# php - 设置不安全属性失败

> ID：14709145
> 
> 赞同：6
> 
> 时间：2013-02-05T13:54:10.453
> 
> 标签：php, yii

嗨，我在插入和更新操作时日志中有警告字符串

```
2013/02/05 16:43:57 [warning] [application] Failed to set unsafe attribute "logo" of "Model". 
```

模型规则

```
public function rules()
{
    return array(
        array('typeId, cityId, new', 'numerical', 'integerOnly'=>true),
        array('title, url', 'length', 'max'=>255),
        array('content, created, deleted', 'safe'),

        array('url', 'url', 'on'=>'insert, update'),

        array('typeId, cityId, title', 'required', 'on'=>'insert, update'),

        array('logo', 'file', 'types'=>'jpg, jpeg, gif, png', 'maxSize'=>100*1024, 'allowEmpty'=>true, 'tooLarge'=>'{attribute} is too large to be uploaded. Maximum size is 100kB.'),

        array('id, typeId, cityId, title, content, new, url, logo', 'safe', 'on'=>'search'),
    );
} 
```

我不明白为什么我会穿这个。我有 logo 字段的规则，并且有 allowEmpty 选项

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T14:02:49.593

[CFileValidator](http://www.yiiframework.com/doc/api/1.1/CFileValidator)默认情况下是不安全的，来自[文档](http://www.yiiframework.com/doc/api/1.1/CFileValidator#safe-detail)：

> 安全属性（自 v1.1.12 起可用） public boolean $safe;
> 
> 与此验证器一起列出的属性是否应该被认为对于大规模分配是安全的。对于此验证器，它默认为 false。

所以将 safe 属性设置为 true

```
array('logo', 'file', 'types'=>'jpg, jpeg, gif, png','safe'=>true, 'maxSize'=>100*1024, 'allowEmpty'=>true, 'tooLarge'=>'{attribute} is too large to be uploaded. Maximum size is 100kB.'), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T14:01:30.730

您必须将[`safe`](http://www.yiiframework.com/doc/api/1.1/CFileValidator#safe-detail)属性设置[`CFileValidator`](http://www.yiiframework.com/doc/api/1.1/CFileValidator)为 true

```
array('logo', 'file', 'types'=>'jpg, jpeg, gif, png','safe'=>true, 'maxSize'=>100*1024, 'allowEmpty'=>true, 'tooLarge'=>'{attribute} is too large to be uploaded. Maximum size is 100kB.'), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-18T16:30:17.773

**在 Yii2**

由于没有为文件上传正确设置表单“enctype”，可能导致您收到此错误。

```
Failed to set unsafe attribute 'id' in 
```

启用表单 multipart/form-data

```
// Form
$form = ActiveForm::begin(['options'=>['enctype'=>'multipart/form-data']]); 
```

# php - PHP 和 mysql 在 linux 中与 apache tomcat 6 的集成

> ID：14709154
> 
> 赞同：0
> 
> 时间：2013-02-05T13:54:42.450
> 
> 标签：php, linux, tomcat6

我在我的应用程序中使用 apache tomcat 6。我想为在 Linux 上的 apache tomcat 6 中执行 PHP 文件提供支持。我不想在我的机器上单独安装 PHP，而是提供 PHP 模块（.so 文件）作为 apache/modules 的一部分。由于 tomcat 6 没有 httpd.conf 文件，我无法通过 httpd.conf 文件中的以下指令加载 PHP 模块-

LoadModule php5_module 模块/libphp5.so

谁能帮我在 linux 上的 tomcat 6 中加载 php 模块？如果需要在 linux 上提供此支持，还请让我知道是否需要其他一些配置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:08:28.480

刚刚拍摄： [http ://wiki.apache.org/tomcat/UsingPhp](http://wiki.apache.org/tomcat/UsingPhp)

或者，在我看来更好的解决方案： [https ://stackoverflow.com/a/779255/1408096](https://stackoverflow.com/a/779255/1408096)

有帮助吗？

# xcode - IAP 不适用于 Real iPad

> ID：14709155
> 
> 赞同：0
> 
> 时间：2013-02-05T13:54:44.300
> 
> 标签：xcode, cocoa-touch, ios5, in-app-purchase

当我在模拟器中运行以下代码时，它可以成功获取 IAP 信息，但是当它在真正的 IPAD 上运行时，“计数”总是 = 零......有什么想法有什么问题吗？谢谢。

```
// Store Kit returns a response from an SKProductsRequest.
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

// Populate the removeAdsButton button with the received product info.
SKProduct *validProduct = nil;
int count = [response.products count];
if (count>0) {
    validProduct = [response.products objectAtIndex:0];
}
if (!validProduct) {
    [removeAdsButton setTitle:@"No Products Available" forState:UIControlStateNormal];
    removeAdsButton.enabled = NO;
    return;
}

NSString *buttonText = [[NSString alloc] initWithFormat:@"%@ - Buy $%@", validProduct.localizedTitle, validProduct.price];
[removeAdsButton setTitle:buttonText forState:UIControlStateNormal];
removeAdsButton.enabled = YES;
[buttonText release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:59:28.663

我发现如果设备是JB，它将无法工作..

# oledb - PostgreSQL 函数能否作为链接服务器与 SQL Server 2000 通信

> ID：14709161
> 
> 赞同：0
> 
> 时间：2013-02-05T13:54:56.460
> 
> 标签：oledb, remote-server, postgresql-9.2, heterogeneous-services

情况：逐渐将大量旧版 SQL Server 应用程序迁移到 PostgreSQL。问题：PostgreSQL 函数可以对 SQL Server 2000 数据库执行查询吗？ 有什么可以与PostgreSQL中的*[OpenQuery](http://msdn.microsoft.com/en-us/library/b805e976-f025-4be1-bcb0-3a57b0c57717)*相媲美的吗？或者像 Oracle 的[异构服务](http://www.csee.umbc.edu/portal/help/oracle8/server.815/a67784/hs_ch6.htm)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:54:29.660

您可以在 PostgreSQL 实例之间进行 DBLink。有一个项目可以对 MSSQL 调用[dblink-tds](http://pgfoundry.org/projects/dblink-tds/)执行此操作。我从未使用过它，所以我不能说它的效果如何。而且它看起来很旧，所以我怀疑它可能不再受支持。

但是，请记住，使用 PostgreSQL，您可以选择使用的语言。如果您需要访问其他非 postgresql 存储中的数据，您可以使用其中一种“非托管”语言。例如，plpythonu 或者您可以随时用 C 编写函数并访问您需要/想要的任何信息。

# jquery - 动态传入 HTML 内容时无法访问选择器

> ID：14709162
> 
> 赞同：0
> 
> 时间：2013-02-05T13:54:56.877
> 
> 标签：jquery

我在页面上有一些按钮，它们会在被点击时做出响应。我现在使用 jQuery 将这个 HTML 内容（包含这些按钮）传递到一个空的 div 中。

```
$('#main').html($('#sectionC').html()) 
```

`#main`是空的 div 并且`#sectionC`是包含这些按钮的 div。好的？一切正常显示。来自的所有按钮`#sectionC`都有一个 类`.btn`，但是当我动态传递此内容时，以下脚本不起作用。

```
$('.btn').click( function() {
  $(this).toggleClass('btn-active')
}) 
```

`$('.btn').click`单击这些按钮之一时根本不会被调用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:56:27.730

使用 jQuery [on()](http://api.jquery.com/on/)在动态添加的元素上绑定事件。

```
$('#main').on('click', '.btn', function() {
  $(this).toggleClass('btn-active')
}) 
```

# android - 如何在格式更改中保留媒体播放器对象

> ID：14709166
> 
> 赞同：1
> 
> 时间：2013-02-05T13:55:07.570
> 
> 标签：android, android-layout

当方向从纵向模式变为横向模式时，我想保存媒体播放器对象。据我所知，当您更改方向时，您的活动会重新创建，这就是为什么我的旧媒体播放器对象被破坏的原因。我尝试了 onretainNonConfigureInstance 方法，但它对我不起作用。

我希望横向视图中的旧媒体播放器对象显示 felixpalmer android-visualizer。要显示可视化器，您需要将媒体播放器对象与可视化器视图链接。有没有其他方法可以将旧媒体播放器对象传递给横向视图，反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:00:47.697

试试这个，

在您的 .it 中添加此代码`manifest.xml`将清除您的问题

```
 android:configChanges="keyboardHidden|orientation" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:31:46.207

也许您可以将媒体播放器对象保存在活动内的静态变量中，以便在方向更改时保留它。

即使我从未使用过*Android Visualizer*组件，但检查其[`VisualizerView`](https://github.com/felixpalmer/android-visualizer/blob/master/src/com/pheelicks/visualizer/VisualizerView.java)类的源代码，我发现它使用了 Android 的[`Visualizer`](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)类。

正如您在该方法的文档中看到的那样，在启用[`setCaptureSize`](http://developer.android.com/reference/android/media/audiofx/Visualizer.html#setCaptureSize%28int%29)时无法调用它。`Visualizer`

这就是我会尝试为您的使用模式做的事情：

**选项1**

当屏幕方向改变时调用该类的`release()`方法，[`VisualizerView`](https://github.com/felixpalmer/android-visualizer/blob/master/src/com/pheelicks/visualizer/VisualizerView.java)因为这也会调用[`release()`](http://developer.android.com/reference/android/media/audiofx/Visualizer.html#release%28%29)Android 对象的方法，从而释放所有资源并允许您通过调用该对象`Visualizer`来创建一个新资源以再次链接您的媒体播放器。`link()`[`VisualizerView`](https://github.com/felixpalmer/android-visualizer/blob/master/src/com/pheelicks/visualizer/VisualizerView.java)

**选项 2**

看看[这个](https://stackoverflow.com/questions/9222219/android-media-audiofx-visualizer-throwing-exception-every-other-time)问题及其[答案](https://stackoverflow.com/a/9279496/1429331)。您可以尝试修改类的源代码，并在创建新实例之后和调用之前立即[`VisualizerView`](https://github.com/felixpalmer/android-visualizer/blob/master/src/com/pheelicks/visualizer/VisualizerView.java)插入方法中。`mVisualizer.setEnabled(false)``link()``Visualizer``setCaptureSize`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:37:38.927

一种方法是实现`OnRetainNonRetainNonConfigurationInstance()`并返回您的`MediaPlayer`. 然后，在`onCreate()`or期间`onStart()`，调用`getLastNonConfigurationInstance()`并将其结果转换为您的 MediaPlayer 变量。

但是，此方法已弃用，根据当前文档，您应该将逻辑块封装在 a 中`Fragment`并使用 method `mFragment.setRetainInstance(true)`，这样片段就不会与其父活动一起重新创建。

第三种选择是使用 a`Service`来封装`MediaPlayer`. 它不会与活动一起重新创建，它不会停止播放，因为它独立于当前活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T18:04:20.903

您可以将承载媒体播放器的片段的 retainInstance 属性设置为 true。您需要做的就是将以下行添加到片段的 onCreate 方法中： setRetainInstance(true);

# ember.js - 如何使用 ember.js 访问嵌套索引路由中的父模型？

> ID：14709171
> 
> 赞同：38
> 
> 时间：2013-02-05T13:55:22.923
> 
> 标签：ember.js

我有以下路线结构

```
App.Router.map(function(match) {
    this.route("days", { path: "/" });
    this.resource("day", { path: "/:day_id" }, function() {
        this.resource("appointment", { path: "/appointment" }, function() {
            this.route("edit", { path: "/edit" });
        });
    });
}); 
```

当我在 AppointmentIndexRoute 中时，我正在寻找一种使用日（父）模型中的某个元日创建新模型的方法，但是因为日模型还不知道这个约会，所以我不确定如何关联它们直到创建约会/并触发提交。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-05T14:03:53.583

从`AppointmentIndexRoute`' 模型挂钩中，您可以使用 modelFor('day') 访问父模型。例如：

```
App.AppointmentIndexRoute = Ember.Route.extend({
  model: function(params) {
    day = this.modelFor("day");
    ...
  }
}); 
```

另一个示例在这里：[emberjs 1.0.0pre4 如何将上下文对象传递给资源“...索引”路由？](https://stackoverflow.com/questions/14609757/emberjs-1-0-0pre4-how-do-you-pass-a-context-object-to-a-resource-index-rout/14610816#14610816)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T12:15:32.027

如果我不使用 ember 数据怎么办？如何在类似的路线中获取父 ID

```
 this.resource('workspace',function () {
    this.resource('workflow', {path: '/:workspace_id/workflow'}, function () {
      this.route('show', {path: '/:workflow_id'});
    });
  }); 
```

此代码将不起作用：

```
App.WorkflowShowRoute = Em.Route.extend({
  model: function(params) {
      var ws  = this.modelFor('workspace');  //ws is undefined
      return this.store.find('workflow', params.id, ws.id);
  }
}); 
```

编辑：我找到了一种解决方法，它并不理想，但完全按照我想要的方式工作。

```
 this.resource('workspace',function () {
    this.route('new');
    this.route('show', {path: '/:workspace_id'});
    //workflow routes
    this.resource('workflow', {path: '/'}, function () {
      this.route('new', {path:'/:workspace_id/workflow/new'});
      this.route('show', {path: '/:workspace_id/workflow/:workflow_id'});
    });
  }); 
```

在我的工作流程路线中，我可以按照我对 params 属性的期望访问 workspace_id ：

```
App.WorkflowShowRoute = Em.Route.extend({
  model: function(params) {
      return this.store.find('workflow', params.workflow_id, params.workspace_id);
  }
}); 
```

最后，这是我在 workspace.show 路由助手中的链接：

```
{{#each workflow in workflows}}
  <li>
    {{#link-to 'workflow.show' this.id workflow.id}}{{workflow.name}}{{/link-to}}
  </li>
{{/each}} 
```

# javascript - 引导 DatePicker 以允许通过键入进行编辑

> ID：14709173
> 
> 赞同：4
> 
> 时间：2013-02-05T13:55:34.043
> 
> 标签：javascript, twitter-bootstrap, knockout.js, coffeescript

在我当前的项目中，我使用 Bootstrap 日期选择器来允许用户选择日期。

有一个请求允许人们在 datePicker 输入中键入日期，而不必手动单击小部件中的日期。

当前，当用户手动编辑日期字符串时，日期选择器将突出显示正确的日期，但不会更新分配给它的变量。（作为说明，我正在使用 Knockout.js 并使用 observable 来存储日期）

我的想法是，这只会触发 changeDate 函数，但不会。

有没有人尝试过实现这一目标并让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:19:26.520

这是一个[有效的 jsfiddle](http://jsfiddle.net/angelyordanov/PJHxD/)和and绑定的[要点](https://gist.github.com/angelyordanov/4730076)，它们独立地绑定到一个可观察对象并相应地更新它。`datePicker``dateValue`

```
<div class="input-append date">
    <input type="text" data-bind="dateValue: date" />
    <span class="add-on datepicker-button" data-bind="datePicker: { date: date }">
        <i class="icon-calendar"></i>
    </span>
</div> 
```

绑定是用一个`BindingHandlerFactory`包装器编写的，它
1\. 为每个绑定的元素创建一个处理程序对象并将其存储`$.data()`在元素上。
2.调用handler的`initialize(element, context)`一次。3.每次绑定上下文改变时
调用处理程序的方法。`contextChanged(context)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T22:37:53.007

为什么不使用 KO 的非读/写选项。

就像是

```
function yourModel(){
var self = this;
self.theDateUserManuallyWillEnter = ko.computed({
read: function () {
    if (self.theDateUserManuallyWillEnter != undefined)
        return self.theDateUserManuallyWillEnter ;
    else
        return $('#theDateUserManuallyWillEnteredTextBox').val(); //Jquery      
                                 identifier of text box
},
write: function (value) {
    self.theDateUserManuallyWillEnter = value;
},
owner: this
});
} 
```

# ruby-on-rails - Rails IMAP：获取发件人的姓名

> ID：14709174
> 
> 赞同：2
> 
> 时间：2013-02-05T13:55:39.407
> 
> 标签：ruby-on-rails, imap

如何在 Rails 中通过 获取电子邮件发件人的姓名（不是电子邮件地址）`Net::IMAP`？

这是我在 Rails 中用来获取发件人电子邮件的代码：

```
imap = Net::IMAP.new('imap.gmail.com', 993, usessl = true, certs = nil, verify = false)
imap.login(USERNAME, PASSWORD)
imap.select('Inbox')

imap.search(["ALL"]).each do |message_id|
  emails = imap.fetch(message_id,'RFC822')[0].attr['RFC822']
  mail = Mail.read_from_string emails
  @email = Email.create(:sender => mail.from[0], :name => 'NAME_HERE')
end

imap.disconnect 
```

正确获取电子邮件地址，`mail.from[0]`但如何获取发件人姓名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:45:18.050

当前的解决方案是使用`mail[:from].display_names.first`.

您将在 旁边添加以下内容`:sender => mail.from[0]`：

`:name => mail[:from].display_names.first`

# ios - 将十六进制字符串的一段转换为双精度

> ID：14709177
> 
> 赞同：0
> 
> 时间：2013-02-05T13:55:50.970
> 
> 标签：ios, objective-c, hex, double, strtol

我有一个将数据作为十六进制值返回的设备，例如`00 00 00 56 00 00 01 00`. 我把它放到一个 NSString 中。我只对将第 3 段和第 4 段转换为双段感兴趣。即只有`00 56`。

在[http://www.binaryhexconverter.com/hex-to-decimal-converter](http://www.binaryhexconverter.com/hex-to-decimal-converter)等网站上，它可以工作并返回我想要的值。

当我尝试使用 NSScanner 时，它不喜欢它只是十六进制代码的一部分。

```
NSScanner *scanner = [[NSScanner alloc] initWithString:numberAsHex];

double value = 0.0;

BOOL result = [scanner scanHexDouble:&value];

NSLog(@"Value %@", [NSNumber numberWithDouble:value]);
NSLog(@"Result %c", result); 
```

我也尝试过使用`strtol()`，但没有运气。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:09:03.380

NSScanner 的那个字符串应该是这样的。这是一个示例代码（它有效。）

```
NSScanner *scanner = [[NSScanner alloc] initWithString:@"0x0056"];
double value = 0;
BOOL result = [scanner scanHexDouble:&value];

NSLog(@"Value %@", [NSNumber numberWithDouble:value]);
NSLog(@"Result %c", result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:21:04.777

```
NSString *numberAsHex = @"00 00 00 56 00 00 01 00";
numberAsHex = [numberAsHex stringByReplacingOccurrencesOfString:@" " withString:@""];
numberAsHex = [NSString stringWithFormat:@"%@%@",@"0x",numberAsHex];
NSScanner *scanner = [[NSScanner alloc] initWithString:numberAsHex];
double value = 0.0;
BOOL result = [scanner scanHexDouble:&value];
NSLog(@"Value %@", [NSNumber numberWithDouble:value]);
NSLog(@"Result %d", result); 
```

# sql-server-2005 - 以表格格式分组

> ID：14709183
> 
> 赞同：1
> 
> 时间：2013-02-05T13:56:11.223
> 
> 标签：sql-server-2005, group-by, pivot

我正在运行如下所示的选择语句来提取特定时期的 Item Wise Sales 报告

```
SELECT prod_description as Product,
    sum(prod_amount) as Total_sales,
    date 
from cash_bill  
group by date,prod_description 
```

我得到如下垂直格式的输出：

```
项目名称 销售日期
苹果 35 12-12-2012
橙色 10 12-12-2012
苹果 20 13-12-2012
橙色 12 13-12-2012
香蕉 10 13-12-2012
苹果 50 14-12-2012
橙色 40 14-12-2012
香蕉 20 14-12-2012

```

但我希望以表格格式输出如下所示：

```
项目名称 12-12-2012 13-12-2012 14-12-2012
苹果 35 20 50
橙色 10 12 40
香蕉 0 10 20

```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:52:10.730

这种类型的数据转换是[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 从 SQL Server 2005 开始，有一个函数可以为您执行这种类型的数据轮换。

如果您提前知道日期值，则可以对这些值进行硬编码：

```
select product,
  isnull([12-12-2012], 0) [12-12-2012], 
  isnull([12-13-2012], 0) [12-13-2012], 
  isnull([12-14-2012], 0) [12-14-2012]
from
(
  select 
    prod_description as Product,
    prod_amount,
    convert(char(10), date, 110) date
  from cash_bill  
) src
pivot
(
  sum(prod_amount)
  for date in ([12-12-2012], [12-13-2012], [12-14-2012])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0eae5/5)

如果日期在运行时之前是未知的，或者您希望结果灵活，那么您可以使用动态 SQL 来透视数据。动态版本获取您想要作为列的日期列表，然后使用这些值创建一个 sql 字符串，以便您可以进行透视：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(convert(char(10), date, 110)) 
                    from cash_bill
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT distinct ', IsNull(' + QUOTENAME(convert(char(10), date, 110))+', 0) as '+QUOTENAME(convert(char(10), date, 110))
                    from cash_bill
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT product,' + @colsNull + ' from 
             (
                select 
                  prod_description as Product,
                  prod_amount,
                  convert(char(10), date, 110) date
                from cash_bill  
            ) x
            pivot 
            (
                sum(prod_amount)
                for date in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/0eae5/6)。

两者都给出结果：

```
| PRODUCT | 12-12-2012 | 12-13-2012 | 12-14-2012 |
--------------------------------------------------
|   Apple |         35 |         20 |         50 |
|  banana |          0 |         10 |         20 |
|  Orange |         10 |         12 |         40 | 
```

# ios - Titanium ImageView 动画宽度和高度

> ID：14709185
> 
> 赞同：1
> 
> 时间：2013-02-05T13:56:21.767
> 
> 标签：ios, animation, imageview, titanium

我尝试像这样在 Titanium 中创建一个 ImageView：

```
var animationView = Titanium.UI.createImageView
(
    {
        images:animationImages,
        duration:50,
        repeatCount:0,
        width: '90dp',
        height: '270dp'
    }
); 
```

在 android 上，它按预期获得了它的大小，但在 IOS 上，它根本没有被缩放。有什么，我做错了吗？或者我应该通过手动创建ImageViews然后用它们来逐帧进行`setInterval`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:00:00.483

这实际上不是一个一致的解决方案，它应该是一个评论，但由于我没有足够的代表，我必须把它写成答案。

对于初学者，我会尝试给它一个 top 和 left 属性。其次，这些图像是从远程 URL 检索到的吗？远程 URL 仅在 Android 中受支持。如果是这种情况，您可以按照您在问题中所说的那样做一个解决方法。

最后，'dp' 仅适用于 android，因此它在 iOS 中根本无法缩放，它只会删除 'dp' 并将数字用作“点”，在非视网膜屏幕上它将是相同的数字像素和在视网膜显示器上它将是双倍的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:20:09.347

我最终决定创建自己的动画类，如下所示：

```
function Animation(data)
{
    var width = data.hasOwnProperty("width") ? data.width : Ti.UI.SIZE;
    var height = data.hasOwnProperty("height") ? data.height: Ti.UI.SIZE;
    var duration = data.hasOwnProperty("duration") ? data.duration : 50;
    var imageFiles = data.hasOwnProperty("images") ? data.images : [];

    var images = [];

    var container = Ti.UI.createView
    (
        {
            width:width,
            height: height
        }
    );

    for(var i=0; i<imageFiles.length; i++)
    {
        var image = Ti.UI.createImageView
        (
            {
                image:imageFiles[i],
                width:width,
                height:height
            }
        );

        if(i!=0)
            image.setVisible(false);

        container.add(image);
        images.push(image);
    }

    container.activeImage = 0;
    container.intervalId = null;

    container.setActiveImage = function(index)
    {
        if(container.intervalId == null)
            container.activeImage = index;
    }

    container.start = function()
    {
        var callback = function()
        {
            for(var i=0; i<images.length; i++)
            {
                if(i == container.activeImage)
                    images[i].setVisible(true);
                else
                    images[i].setVisible(false);
            }

            container.activeImage = (container.activeImage + 1) % images.length;
        }

        container.intervalId = setInterval ( callback, duration );
    }

    container.stop = function()
    {
        clearInterval(container.intervalId);
        container.intervalId = null;
    }

    return container;
}

module.exports = Animation; 
```

你可以像这样使用它：

```
var Animation = require('...path to your animation file');
var myAnimation = new Animation
(
    {
        width:'100dp',
        height:'100dp',
        duration:50, //duration while one frame is showing
        images:['one.png', 'two.png'...], //full paths
    }
);

//start:
myAnimation.start();

//stop
myAnimation.stop(); 
```

# git - 在 DEC VAX 上用于 OpenBSD 的 Git？

> ID：14709187
> 
> 赞同：0
> 
> 时间：2013-02-05T13:56:23.103
> 
> 标签：git, compilation, bsd, openbsd, vax

我正在尝试为在 DEC VaxStation 4000 Model 90 上运行的 OpenBSD v5.2 找到 Git 的二进制安装？我的特定机器有惊人的 32 兆内存，但运行 GCC 版本 2.9.5 和 Perl 5 版本 12，所以我怀疑我可能可以运行 Git。

有人知道 VAX 架构的 Git 二进制文件（任何版本）还是我应该尝试从源代码编译？OpenBSD 软件包存储库中没有 Git 二进制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T21:49:35.293

不要自己从源代码编译它，而是尝试使用端口树。现成的二进制包不可用并不意味着从端口编译不起作用，只是没有人制作和发布它。

但是事先与例如 Miod 交谈，也许他们已经尝试过但失败了。许多现代软件将不再使用 GCC 2.95 甚至 3.4.6 构建 ☹</p>

# c# - 调用数据库时进度 条不更新

> ID：14709189
> 
> 赞同：-2
> 
> 时间：2013-02-05T13:56:27.640
> 
> 标签：c#, .net, wpf

我的进度条有问题，因为它在加载数据之前没有显示。

我不确定我的代码是对还是错。请帮助解决这个问题及其让我头疼的问题。任何建议都会对我非常有帮助plzzz ..

```
progressBar1.Minimum = 0;
progressBar1.Maximum = short.MaxValue;
progressBar1.Value = 0;

double value = 0;

UpdateProgressBarDelegate updatePbDelegate = new UpdateProgressBarDelegate(progressBar1.SetValue);

foreach (CDType ctp in dgAttributes.ItemsSource)
{
    if (ctp.IsSelected == true)
    {
        //Mouse.OverrideCursor = Cursors.Wait;
        var CDTypeID = ctp.TYPE_ID;

        label3.Content = "Loading.." + CDTypeID;

        SqlCommand sqlCommand = new SqlCommand(conn.ConnectionString);
        sqlCommand.CommandType = CommandType.StoredProcedure;
        sqlCommand.CommandText = "LOAD_DATA_SOURCE_SAVE";

        sqlCommand.Parameters.AddWithValue("CDTYPE_ID", CDTypeID);

        sqlConnection.Open();
        sqlCommand.Connection = sqlConnection;

        do
        {
            value += 1;
            Dispatcher.Invoke(updatePbDelegate,
                              System.Windows.Threading.DispatcherPriority.Background,
                              new object[] { ProgressBar.ValueProperty, value });                                          
            //i'm not sure whether its correct way or not to give below line here..? I mean execute non query...since it was looping all the time untill its reaches Maximum value
            //sqlCommand.ExecuteNonQuery();
        }
        while (progressBar1.Value != progressBar1.Maximum);

        sqlConnection.Close();
        //label3.Content = "Sucessfully Loaded..!";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:08:13.763

只要您无法确定需要多长时间，您可能希望使用样式设置为不确定的进度条。

```
<ProgressBar IsIndeterminate="True" /> 
```

如果您使用 UI 线程加载数据，进度条可能不会更新，因为线程很忙。请参阅[这篇文章](http://social.msdn.microsoft.com/Forums/en/wpf/thread/2479bb5f-c8cd-4ec0-97db-7a15c8c2eeea)，了解如何使用后台工作人员加载数据来解决此问题。你也可以在 StackOverflow 上搜索；背景工作者有很多问题。

如果数据库分批传回数据，您可能能够跟踪其途中的批次数量并使用具有实际值的进度条。

# haskell - 如何阅读运算符。功能类型

> ID：14709192
> 
> 赞同：0
> 
> 时间：2013-02-05T13:56:31.483
> 
> 标签：haskell

```
(.) :: (b -> c) -> (a -> b) -> a -> c
f . g = \x -> f(g x) 
```

我不太明白如何阅读函数类型。

*   `(b -> c)`是一个函数接受一个参数 b，返回 c，我假设这是函数 f
*   `(a -> b)`是一个函数接受一个参数a，返回b，我假设这是函数g

不确定 c in (b -> **c** ) 和 a in ( **a** -> b) 与**a** -> **c有何关系**

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:59:06.400

多加括号可能会更好，

```
(.) :: (b -> c) -> (a -> b) -> (a -> c) 
```

并阅读：

`(.)`接受两个参数，

*   一个函数 ( `f`) 类型`b -> c`
*   一个函数 ( `g`) 类型`a -> b`

并返回一个函数 ( `f . g`) 类型`a -> c`。

结果函数的参数类型`a`是 的`(.)`第二个参数 (的参数类型`g`，它首先应用于 的参数`f . g`)，组合的结果类型是`(.)`的第一个参数 (的结果类型`f`，即然后应用于`g`参数的应用结果）。

# java - Uri：我需要 //content://media/ 但获取 file://mnt/sdcard/

> ID：14709194
> 
> 赞同：1
> 
> 时间：2013-02-05T13:56:37.030
> 
> 标签：java, android, upload, youtube

我的目标是从我的应用程序将特定的视频文件上传到 youtube。

这是我的方法中的一些代码：

```
 File videoToPlayFile = new File(mSharedPreferences.getString("output_file", ""));

            Intent intent = new Intent();  

    intent.setDataAndType(Uri.fromFile(videoToPlayFile), "video/*");
    Intent intent2 = YouTubeIntents.createUploadIntent(this,intent.getData());
    startActivity(intent2); 
```

我收到来自 intent.getData 的 Uri 路径需要以 content://media 开头的错误，但是当我使用 Logs 时，它总是显示为类似 file://mnt/sdcard/blablabla.mp4 的路径

# ruby-on-rails - Rails 企业友好吗？ActiveRecord 看起来很自私

> ID：14709196
> 
> 赞同：-1
> 
> 时间：2013-02-05T13:56:57.403
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, sequel

从今年夏天开始，我一直在学习 Rails，并用它编写了一些成功的独立应用程序，并且已经真正了解 Rails 的几乎所有内容。

然而，我目前的项目正在编写 Rails 作为数据库的前端，该数据库将用于其他事物（Web 服务、数据仓库、其他应用程序连接）——我意识到 ActiveRecord 以及大部分围绕开发的 Rails当谈到这种方法时，AR 似乎是非常单一的。

注意：我不是指传统数据库，即。我们必须插入的一个，但被设计为“回到过去”..

Rails 似乎认为它是并且应该是唯一使用这些数据的应用程序。当涉及到复合主键（这是你不能调整的东西，比如表命名和列命名）时，我越来越注意到它。

虽然我知道有一个复合键 gem，但我觉得我正在开发一个依赖于这个单个 gem 工作的整个 MVC 应用程序。我担心我会遇到越来越多这样的事情。我已经研究过替代的 ORM，但似乎许多宝石都依赖于 ActiveRecord。

我想我对 ActiveRecord 的这种明显自私的角度感到有些惊讶和难过。

有人对 Rails 如何与企业级数据库一起工作有任何反馈或成功吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:05:32.107

Rails 主要是作为一个“自以为是”的 Web 开发框架而构建的。

它的开箱即用是全栈 Web 应用程序，其中整个系统都是按照“Rails 方式”构建的，这是 Rails 提交者为保持系统简单而做出的许多决定的结果标准。当您遵守约定时，需要做出的配置决策的数量非常少。

这些约定包括以某种方式设置数据库。主键是自动增量并命名为“id”，外键是“foreigntable_id”。ActiveRecord 是内置的，并且几乎总是假定使用（即使没有使用）。

这并不意味着偏离标准堆栈是行不通的。Sequel 和 DataMapper 工作得很好。您可以（几乎）为您的表格列命名任何您想要的名称。如果你的应用程序可以做它应该做的事情；这是最重要的。

是的，因为您使用了 Datamapper，所以现在您的应用程序依赖于 Datamapper。这怎么是坏事？

了解因为 ActiveRecord 是*默认设置*，许多其他 gem 建立在 ActiveRecord 上来做他们的事情，所以它们可能无法与 Datamapper 一起使用。这不是 Datamapper（或 Rails）的错。

这里真正的问题是“Rails，即使您使用替代的 ORM 或复合键 gem，是否仍然比 X 更合适和更高效？”

我认为它是。那么我必须在每节课`self.table_name=`中设置什么？`self.primary_key=`那么，如果我不得不放弃一些只适用于 ActiveRecord 的 gem 怎么办？那么如果你必须考虑数据库触发器和视图呢？我处理所有这些事情，与我曾经使用过的所有其他东西相比，使用 Rails 仍然是一种乐趣。

# java - Shift + 单击多行选择

> ID：14709199
> 
> 赞同：0
> 
> 时间：2013-02-05T13:57:08.030
> 
> 标签：java, jsf, icefaces

我正在使用 icefaces 3.x 问题是当我第一次使用 shift+click 选择任何行时出现错误。ice:rowselector 标签的 value 属性给了我错误，这个标签放在第一列

```
<ice:rowSelector 
     value="#{instantInvoiceDetails.highlighted}"  
     enhancedMultiple="true"    
     selectionListener="#{instantInvoice.selectListener}"   
     toggleOnInput="false"    
     preStyleOnSelection="true">
</ice:rowSelector> 
```

当我第一次使用 shift+click 选择任何行时，错误如下

```
javax.faces.el.PropertyNotFoundException: javax.el.PropertyNotFoundException: //D:/Error Correction/WorkSpace/InstantInvoicing/WebContent/InstantInvoicing.xhtml @169,279 value="#{instantInvoiceDetails.highlighted}": Target Unreachable, identifier 'instantInvoiceDetails' resolved to null
at javax.faces.component.ValueBindingValueExpressionAdapter.setValue(ValueBindingValueExpressionAdapter.java:150)
at com.icesoft.faces.component.ext.RowSelector.setValue(RowSelector.java:101)
at com.icesoft.faces.component.ext.RowSelector.processDecodes(RowSelector.java:431)
at com.icesoft.faces.component.ext.HtmlDataTable.processKids(HtmlDataTable.java:337)
at com.icesoft.faces.component.ext.HtmlDataTable.iterate(HtmlDataTable.java:278)
at org.icefaces.impl.component.UISeriesBase.processDecodes(UISeriesBase.java:520)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1043)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1043)
at org.icefaces.ace.component.panel.Panel.processDecodes(Panel.java:123)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1043)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1043)
at javax.faces.component.UIForm.processDecodes(UIForm.java:212)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1043)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1043)
at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:922)
at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:74)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused by: javax.el.PropertyNotFoundException: //D:/Error Correction/WorkSpace/InstantInvoicing/WebContent/InstantInvoicing.xhtml @169,279 value="#{instantInvoiceDetails.highlighted}": Target Unreachable, identifier 'instantInvoiceDetails' resolved to null
at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:130)
at javax.faces.component.ValueBindingValueExpressionAdapter.setValue(ValueBindingValueExpressionAdapter.java:148)
... 34 more 
```

以下是 InstantInvoiceDetails.java 的代码片段

```
 private boolean highlighted=false;

        public boolean isHighlighted() {
        return highlighted;
    }

    public void setHighlighted(boolean highlighted) {

        this.highlighted = highlighted;
     } 
```

InstantInvoice.java 的代码片段

```
 public void selectListener(RowSelectorEvent event) {

            if (sumOfHighRows == null || sumOfHighRows.equals("")) {
                setSumOfHighRows("0");
            }
            //System.out.println(" Enhanced multiple ?"+row.isEnhancedMultiple());
            commentstatus=true;
            System.out.println("size is "+getHighlightedInvoices().size());
            setSumOfHighRows("0");
            getHighlightedInvoices().clear();

            int sumOfH = Integer.parseInt(getSumOfHighRows());
            System.out.println("--1-sumOfH--"+sumOfH);
            for (InstantInvoiceDetails nwIid : invoices) {
                if (nwIid.isHighlighted()) {
                    commentstatus=false;
                    sumOfH += Integer.parseInt(nwIid.getNetChrgAmt());
                    System.out.println("--2-sumOfH--"+sumOfH);
                    getHighlightedInvoices().add(nwIid);
                    System.out.println(getHighlightedInvoices().size());
                    if(getHighlightedInvoices().size()==0)
                    {
                        commentstatus=true;
                    }
                    setSumOfHighRows(Integer.toString(sumOfH));                
                }             

            }
        }

    } 
```

# c++ - 更改 ld-linux 位置

> ID：14709202
> 
> 赞同：4
> 
> 时间：2013-02-05T13:57:15.940
> 
> 标签：c++, linux, gcc, shared-libraries, ld

我发现要加载库，首先打开一个可执行文件`/lib/ld-linux-x86-64.so.2`。所有关于加载共享库的功能（在许多路径中搜索，使用 rpath 等）只有在`ld-linux`加载后才能工作，因为它`ld-linux`实现了这些功能。

在我看来，`ld-linux.so`位置在可执行文件中是硬编码的（调用`strings`我的可执行文件强化了这一理论）。我的问题是，在我的 linux 发行版中，编译器 (g++) 将`ld-linux`位置设置为`/lib/ld-linux-x86-64.so.2`. 在 Ubuntu（更流行）上，它位于`/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2`.

我想知道是否可以让我的可执行文件查找`ld-linux.so`at `/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2`（它也作为符号链接存在于我的发行版中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T14:06:48.613

尝试添加`-Wl,--dynamic-linker=/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2`到您的`LDFLAGS`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-23T09:31:54.030

patchelf 可用于更改 ld-linux 解释器的路径。

# jquery - Ajax 用于替换具有溢出的内容 div:auto 最终添加了额外的滚动条

> ID：14709206
> 
> 赞同：0
> 
> 时间：2013-02-05T13:57:18.653
> 
> 标签：jquery, ajax, overflow, scrollbars

我使用 jquery ajax 方法加载不同的内容 div，我的内容 div（每次单击链接时都会被替换的 div）有溢出：自动 CSS，但是当我加载页面时，它会向我添加另一个滚动条内容 div 像这样...

![css 溢出：自动与 ajax](../Images/a0a7ddddccbf044aec768fefb900d479.png)

当每个页面真的应该看起来像这样时......

![在此处输入图像描述](../Images/f9f130bb9371c08381bb2314aae11c01.png)

这是我的js...

```
$(document).ready(function() {

    var hash = window.location.hash.substr(1);
    var href = $('#links li a').each(function(){
        var href = $(this).attr('href');
        if(hash==href.substr(0,href.length-4)){
            var toLoad = hash+'.html #cont';
            $('#cont').load(toLoad)
        }
    });

    $('#links li a').click(function(){

        var toLoad = $(this).attr('href')+' #cont';
        $('#cont').hide('fast',loadContent);
        $('#load').remove();
        $('#wrap').append('<span id="load">LOADING...</span>');
        $('#load').fadeIn('normal');
        window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4);
        function loadContent() {
            $('#cont').load(toLoad,'',showNewContent())
        }
        function showNewContent() {
            $('#cont').show('fast',hideLoader('fast'));
        }
        function hideLoader() {
            $('#load').fadeOut('normal');
        }
        return false;

    });
}); 
```

这是我的内容 div 的 CSS ...

```
#cont {
    overflow:auto ;
    margin:0 auto ;
    width:736px ;
    height:341px ;
    padding: 0 0 0 6px ;
} 
```

谁能想到额外滚动条的原因，或者谁能想到解决方法？

我正在使用 PHP 包含文件来加载我的内容...

```
<!DOCTYPE html>
<html>
    <head>
        <title>I.C.T - St. Patrick's Academy, Lisburn</title>
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <script type="text/javascript" src="assets/js/jq.js"></script>
        <script type="text/javascript" src="assets/js/js.js"></script>
    </head>

    <body>
        <div id="wrap">
                <?php include("includes/head.php"); ?>
            <div id="screen">
                <div id="pad">
                </div>

                <?php include("includes/home.php"); ?>

            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:29:03.630

让它工作，决定使用内容包装器并在其上设置溢出：自动，不需要更改 javascript 上的任何内容 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:57:24.577

如果没有看到完整的 HTML，包括通过 PHP 添加的内容，很难确定地回答这个问题。

根据您的代码，您似乎正在复制`#cont`容器本身。因为它有`overflow: auto`它会不断添加更多嵌套滚动条。

当您使用`.load()`选择器时，它会获取所选元素及其内容。请参阅[jQuery 加载页面片段](http://api.jquery.com/load/#loading-page-fragments)。

为了解决这个问题，我建议在你的主 HTML 上使用一个不同的容器，它只是作为加载内容的容器，没有任何样式。然后修改您的 JS 代码以加载到该代码中。

```
function loadContent() {
    $('#content-wrapper').load(toLoad, '', showNewContent());
} 
```

[jsfiddle - 不良行为](http://jsfiddle.net/gRshj/2/)（仅例如不良行为）

[jsfiddle - 固定行为](http://jsfiddle.net/Yqdhw/4/)

# python - App Engine 是否支持客户端证书

> ID：14709211
> 
> 赞同：4
> 
> 时间：2013-02-05T13:57:42.023
> 
> 标签：python, google-app-engine, pysimplesoap

我正在开发一个谷歌应用引擎应用程序，我需要使用 SOAP 连接到网络服务。我正在使用 pysimplesoap（使用[此处](http://code.google.com/p/pysimplesoap/issues/detail?id=45)找到的代码进行修补）来解析 xml，并使用客户端证书触发请求。当我在本地环境中的简单单元测试中执行此操作时，它可以工作，并且我从 web 服务中得到了正确的响应。但是，当我在应用程序引擎中运行完全相同的代码时，我得到了这个：

```
 File "/Users/me/Documents/workspace/blixem/model/communicate/communication_channel.py", line 60, in generate_soap_message_pysimplesoap
    response = client.SendDocument('LA.XML', 'TESTCASE', 'data')
  File "/Users/me/Documents/workspace/blixem/lib/pysimplesoap/client.py", line 152, in <lambda>
    return lambda *args, **kwargs: self.wsdl_call(attr,*args,**kwargs)
  File "/Users/me/Documents/workspace/blixem/lib/pysimplesoap/client.py", line 320, in wsdl_call
    response = self.call(method, *params)
  File "/Users/me/Documents/workspace/blixem/lib/pysimplesoap/client.py", line 215, in call
    self.xml_response = self.send(method, self.xml_request)
  File "/Users/me/Documents/workspace/blixem/lib/pysimplesoap/client.py", line 241, in send
    location,"POST", body=xml, headers=headers )
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/httplib2/httplib2/__init__.py", line 1457, in request
    self.disable_ssl_certificate_validation)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/httplib2/httplib2/__init__.py", line 1143, in __init__
    strict, timeout, proxy_info, ca_certs, disable_ssl_certificate_validation)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/httplib2/httplib2/__init__.py", line 1092, in __init__
    raise NotSupportedOnThisPlatform()
NotSupportedOnThisPlatform 
```

我做了一些阅读，发现 urlfetch 服务还不支持客户端证书。现在还是这样吗？如果是这样，是否有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:01:56.070

GAE 目前不支持客户端证书。您可以通过 HTTPS 使用 URLFetch 服务。但是您不能使用客户端证书。您应该尝试[受信任的测试程序](https://developers.google.com/appengine/docs/features#Trusted_Tester_Features)中当前可用的[出站套接字支持功能](https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dF9QR3pnQ2pNa0dqalViSTZoenVkcHc6MQ#gid=0)。它可能会将您正在寻找的功能列入白名单。我[之前问过 GAE/J 的类似问题](https://stackoverflow.com/a/13766613/1769636)。

如果你真的需要它，要么使用出站套接字功能，要么在[EC2](http://aws.amazon.com/ec2/)中运行代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-05T08:20:37.407

为了扩展[BooTooMany 的答案](https://stackoverflow.com/a/49392617/384617)，只要底层代码使用[套接字，现在就可以使用优秀的](https://cloud.google.com/appengine/docs/standard/python/sockets/)[`requests`库](http://python-requests.org)来做到这一点。请按照以下步骤使用它：

1.  套接字[仅适用于付费应用程序](https://cloud.google.com/appengine/docs/standard/python/sockets/)。确保您的应用已启用结算功能。
2.  安装`requests`到您的`lib/`目录中。我目前正在使用 v2.21.0。确保**不要**`requests`使用 提供的 AppEngine 适配器进行猴子补丁`requests-toolbelt`，尽管[文档](https://cloud.google.com/appengine/docs/standard/python/issue-requests)建议这样做。这代替了套接字，它可`requests`用于`urlfetch`免费应用程序，但目前不支持客户端证书。
3.  在您的`app.yaml`中，启用 SSL 库：

```
libraries:
- name: ssl
  version: latest 
```

4.  在您的`app.yaml`中，为开发服务器启用套接字：

```
env_variables:
  GAE_USE_SOCKETS_HTTPLIB: 'yes' 
```

现在您已准备好使用客户端证书发出请求：

```
import requests

def make_request(url):
    cert = ('cert_file.pem', 'key_file.pem')
    server_cert_file = 'server_cert_file.pem'
    return requests.get(url=url, cert=cert, verify=server_cert_file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-20T19:26:03.317

GAE 现在支持 Python SSL - 请参阅[https://cloud.google.com/appengine/docs/standard/python/sockets/ssl_support](https://cloud.google.com/appengine/docs/standard/python/sockets/ssl_support)

所以现在可以使用客户端证书。从那个网页：

```
 # Example of a dynamic key and cert.
  datastore_record_k = ndb.Key('Employee', 'asalieri', 'Address', 1)
  datastore_record = datastore_record_k.get()
  key_str = datastore_record.key_str
  cert_str = datastore_record.cert
  ssl_server = ssl.wrap_socket(server_sock,
                              server_side=False,
                              keyfile=StringIO.StringIO(key_str),
                              certfile=StringIO.StringIO(cert_str),
                              cert_reqs=ssl.CERT_REQUIRED,
                              ssl_version=ssl.PROTOCOL_SSLv23,
                              ca_certs=CERTIFICATE_FILE) 
```

# php - S3签名的url无法通过表单提交

> ID：14709214
> 
> 赞同：0
> 
> 时间：2013-02-05T13:57:47.383
> 
> 标签：php, forms, amazon-s3, content-type

我有一个生成签名 Amazon S3 URL 的 PHP 函数，如下所示：

```
 if(!function_exists('el_crypto_hmacSHA1')){
    /**
    * Calculate the HMAC SHA1 hash of a string.
    *
    * @param string $key The key to hash against
    * @param string $data The data to hash
    * @param int $blocksize Optional blocksize
    * @return string HMAC SHA1
    */
    function el_crypto_hmacSHA1($key, $data, $blocksize = 64) {
        if (strlen($key) > $blocksize) $key = pack('H*', sha1($key));
        $key = str_pad($key, $blocksize, chr(0x00));
        $ipad = str_repeat(chr(0x36), $blocksize);
        $opad = str_repeat(chr(0x5c), $blocksize);
        $hmac = pack( 'H*', sha1(
        ($key ^ $opad) . pack( 'H*', sha1(
          ($key ^ $ipad) . $data
        ))
      ));
        return base64_encode($hmac);
    }
  }

  if(!function_exists('el_s3_getTemporaryLink')){
    /**
    * Create temporary URLs to your protected Amazon S3 files.
    *
    * @param string $accessKey Your Amazon S3 access key
    * @param string $secretKey Your Amazon S3 secret key
    * @param string $bucket The bucket (bucket.s3.amazonaws.com)
    * @param string $path The target file path
    * @param int $expires In minutes
    * @return string Temporary Amazon S3 URL
    * @see http://awsdocs.s3.amazonaws.com/S3/20060301/s3-dg-20060301.pdf
    */

    function el_s3_getTemporaryLink($accessKey, $secretKey, $bucket, $path, $expires = 5) {
      // Calculate expiry time
      $expires = time() + intval(floatval($expires) * 60);
      // Fix the path; encode and sanitize
      $path = str_replace('%2F', '/', rawurlencode($path = ltrim($path, '/')));
      // Path for signature starts with the bucket
      $signpath = '/'. $bucket .'/'. $path;
      // S3 friendly string to sign
      $signsz = implode("\n", $pieces = array('GET', null, null, $expires, $signpath));
      // Calculate the hash
      $signature = el_crypto_hmacSHA1($secretKey, $signsz);
      // Glue the URL ...
      $url = sprintf('https://%s/%s', $bucket, $path);
      // ... to the query string ...
      $qs = http_build_query($pieces = array(
        'AWSAccessKeyId' => $accessKey,
        'Expires' => $expires,
        'Signature' => $signature,
      ));
      // ... and return the URL!
      return $url.'?'.$qs;
    }

    } 
```

我有一个带有表单按钮的页面，用于下载 zip 文件：

```
<?php
// Grab the file url
$file_url = get_post_meta($post->ID, 'file_url', true);
// Grab just the filename with extension
$file_name = basename($file_url); 

// AWS details                  
$accessKey = "AKIAJJLX2F7GUDTQ23AA";
$secretKey = "<REMOVED>";
$bucket_name = "media.themixtapesite.com";

// Create new S3 Expiry URL
$download_url = el_s3_getTemporaryLink($accessKey, $secretKey, $bucket_name, $file_name);

if (is_user_logged_in()) { ?>
<div class="download_button_div">
<?php echo '<form action="'.$download_url.'" class="download_button_div">'; ?>
<!--Download counter-->
<input type="hidden" name="download_counter" value="<?php (int)$download_count = get_post_meta($post->ID, 'download_counter', true);
$download_count++;
update_post_meta($post->ID, 'download_counter', $download_count); ?>">
<button type='submit' class='download_button'>Download</button>
</form> 
```

如您所见，我只是将表单操作设置为我要下载的文件的 URL。这工作正常。它会生成一个签名的、过期的 S3 URL 并下载文件。

在另一个页面上，我使用相同的功能，但形式略有不同，这是下载单个 mp3 文件：

```
<?php
// Grab the file url
$file_url = $mp3s;
// Grab just the filename with extension
$file_name = basename($file_url); 

// AWS details                  
$accessKey = "AKIAJJLX2F7GUDTQ23AA";
$secretKey = "<REMOVED>";
$bucket_name = "mixtape2.s3.amazonaws.com";

// Create new S3 Expiry URL
$download_url = el_s3_getTemporaryLink($accessKey, $secretKey, $bucket_name, $file_name);
?>

<!--Download individual MP3 file direct from player-->

<span style="right:27px; position:absolute;">
<form action="download_file.php" method="post" name="downloadform">
<input name="file_name" value="<?php echo basename($mp3s); ?>" type="hidden">
<input name="real_file" value="<?php echo $download_url; ?>" type="hidden">
<input type="image" src="download.jpg" border="0" width="17" alt="Download the MP3" />
</form> 
```

正如您在此表单上看到的，我使用 POST 将表单提交到另一个名为“download_file.php”的文件进行处理。“download_file.php”只是一个强制下载 mp3 文件而不是在浏览器中打开它的文件：

```
<?php
if(isset($_POST['file_name'])){
$player_file = $_POST['file_name'];
header('Content-type: audio/mpeg3');
header('Content-Disposition: attachment; filename="themixtapesite_'.$player_file.'"');
readfile($_POST['real_file']);
exit();
}
?> 
```

我遇到的问题是，在第二页（我提交到“download_file.php”的地方），生成的 URL 不起作用。如果我提交表单，它只会下载一个 0kb 的文件。如果我查看源代码，然后将链接复制并粘贴到浏览器中，我会收到一条 S3 错误消息，告诉我签名不匹配。

我不明白为什么我的第一页有效，但我的第二页却没有。URL 都是使用相同的函数生成的？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:14:13.680

感谢@orique 发现我错误地输入了我的存储桶名称。愚蠢的错误......编码盲！

# vim - 在 Vim 中，如何拆分编辑服务器上的文件？

> ID：14709218
> 
> 赞同：2
> 
> 时间：2013-02-05T13:58:01.553
> 
> 标签：vim, split

使用 vim 我可以：

```
gvim --servername things --remote-silent \temp\foo1.txt 
```

如果我没有具有该服务器名的 GVim，它将创建一个新的。如果我然后执行此命令：

```
gvim --servername things --remote-silent \temp\foo2.txt 
```

然后我将进行编辑`foo2.txt`。

我想要的是能够拆分编辑。基本上，我希望能够多次执行命令，因为我想在每个新文件的新缓冲区中将几个不同的文件发送到同一个窗口 - 我已经安装了 Visual Studio 以便能够在其中启动当前文件一个 GVim 实例，但它每次都会启动一个新实例，我希望它继续向同一个实例提供文件。

从[这些文档](http://wiki.arl.wustl.edu/~fredk/Courses/Docs/vim/remote.html)中，它说我可以做到`--remote-silent [+{cmd}] {file}`，所以我尝试添加`"+split"`，但最终打开了另外两个缓冲区。

```
gvim --servername things --remote-silent "+split \temp\foo2.txt" \temp\foo2.txt 
```

我需要使用什么命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:24:55.600

有趣的是，有`--remote-silent`and `--remote-tab-silent`，但没有`--remote-split-silent`。

你必须以`:split`Vim 命令的形式发送：

```
gvim --servername things --remote-send "<C-\><C-n>:split \temp\foo2.txt<CR>" 
```

由于 Vim 将字符解释为已键入，因此您需要包含*特殊键*，例如`<CR>`结束命令。`<C-\><C-n>`是从任何当前模式进入正常模式的 Vim 命令。

# jquery - 我正在尝试在 jquery Grid 中制作 jQuery 简单颜色选择器

> ID：14709223
> 
> 赞同：1
> 
> 时间：2013-02-05T13:58:31.937
> 
> 标签：jquery, color-picker, jqgrid

HTML 标记

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link rel="stylesheet" type="text/css" media="screen" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.11/themes/redmond/jquery-ui.css" />
    <link href="Css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.11/themes/redmond/jquery-ui.css" />
    <link rel="Stylesheet" type="text/css" href="css/jpicker-1.1.6.min.css" />
    <link rel="Stylesheet" type="text/css" href="css/jPicker.css" />
    <link href="Css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
    <script src="JqueryScriptDownloads/jquery-1.4.2.js" type="text/javascript"></script>
    <script src="Scripts/grid.locale-en.js" type="text/javascript"></script>
    <script src="Scripts/grid.locale-en.js" type="text/javascript"></script>
    <script src="Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="Scripts/grid.locale-en.js" type="text/javascript"></script>
    <script src="Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=euc-jp" />
    <script src="JqueryScriptDownloads/jquery.simple-color.min.js" type="text/javascript"></script>
    <script src="JqueryScriptDownloads/SimpleColor.js" type="text/javascript"></script>
    <script src="Scripts/ReshimaMo.js" type="text/javascript"></script>
</head>`
<br/>

    <body>
    <form id="form1" runat="server">
    <uc1:TopControl ID="TopControl" runat="server" />
    <div id="UGPReshimaMo">
    </div>
    <table id="UGReshimaMo">
    </table>
    <input type="button" />
    </form>
</body>
</html> 
```

JavaScript

```
$(document).ready(function () {

    $("#UGReshimaMo").jqGrid({
        url: 'Handler.ashx', 
        datatype: 'json',
        height: 250,

        colNames: ['צבע', 'רשומה', 'מפלגה', 'אות'],
        colModel: [
             { name: 'semel', width: 200, sortable: true, formatter: getPicker },
                { name: 'LongShem', width: 200, sortable: true },
                { name: 'Shem', width: 100, sortable: true },
                { name: 'Ot', width: 50, sortable: true },
            ],
        rowNum: 100,
        //postData: { spName: 'sp_get_hashala_for_kore', koreId: $("#koreId").value },
        postData: {
            spName: 'MakeRshimatHarshimot'
        },
        rowList: [10, 20, 30],
        pager: '#UGPReshimaMo',
        sortname: 'ot',
        viewrecords: true,
        sortorder: 'asc',
        caption: 'רשימת הרשימות',
        spName: '',
        koreId: ''
    });

    $("#UGReshimaMo").jqGrid('navGrid', '#UGPReshimaMo', { edit: false, add: false, del: false });
    function getPicker() {
        return "<span class='simple_color'/>";
   };
}); 
```

`

当我尝试使用拾色器制作网格时它不起作用，但是当我尝试自己做拾色器时它可以工作。有什么问题以及如何解决这个问题？

PS：颜色选择器来自[http://recursive-design.com/projects/jquery-simple-color/](http://recursive-design.com/projects/jquery-simple-color/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:12:51.477

尝试

```
function getPicker() {
    return "<span class='simple_color'></span>";
}; 
```

但正如我所见，您提供的链接与输入标签一起使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:57:44.800

我找到了我的问题的答案。

我刚刚将此代码添加到`jqGrid`实例中：

```
loadComplete: function () {
    $('.simple_color').simpleColor();
} 
```

这是完整的网格代码：

```
$("#UGReshimaMo").jqGrid({
    url: 'Handler.ashx',
    datatype: 'json',
    height: 250,

    colNames: ['צבע', 'רשומה', 'מפלגה', 'אות'],
    colModel: [
         { name: 'semel', width: 500, sortable: true, formatter: getPicker },
            { name: 'LongShem', width: 200, sortable: true },
            { name: 'Shem', width: 100, sortable: true },
            { name: 'Ot', width: 50, sortable: true },
        ],
    rowNum: 100,
    //postData: { spName: 'sp_get_hashala_for_kore', koreId: $("#koreId").value },
    postData: {
        spName: 'MakeRshimatHarshimot'
    },
    rowList: [10, 20, 30],
    pager: '#UGPReshimaMo',
    sortname: 'ot',
    viewrecords: true,
    sortorder: 'asc',
    caption: 'רשימת הרשימות',
    spName: '',
    koreId: '',
    loadComplete: function () {
        $('.simple_color').simpleColor();
    }
}); 
```

# java - 是否可以将 CDI 与 VRaptor 一起使用？

> ID：14709229
> 
> 赞同：2
> 
> 时间：2013-02-05T13:58:57.133
> 
> 标签：java, cdi, vraptor

是否可以使用 CDI 作为 VRaptor 框架的依赖注入容器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:03:20.633

显然不是。但 VRaptor 4 会支持。
更多信息：[http ://www.slideshare.net/caelumdev/vraptor-cdiideias](http://www.slideshare.net/caelumdev/vraptor-cdiideias)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:50:10.983

是的，现在有可能。您可以使用 vraptor-plugin-cdi。

[https://github.com/garcia-jj/vraptor-plugin-cdi](https://github.com/garcia-jj/vraptor-plugin-cdi)

# angularjs - AngularJS - 从指令更新基于服务的模型

> ID：14709230
> 
> 赞同：1
> 
> 时间：2013-02-05T13:59:01.677
> 
> 标签：angularjs

我认为我的 AngularJS 应用程序的设计存在缺陷。

我有一项服务，其中包含我的模型项之一以及与添加/删除它们相关的方法。该服务被注入到我的核心应用程序和指令中。我的问题是从指令中删除模型中的项目。我这样做是因为指令物理上代表了每个模型项。变化正在发生，但它并没有推回暴露模型的核心应用程序。我意识到这是因为我没有告诉它更新，但我的问题是我真的不明白如何更新。在调用服务后添加`$apply`指令会导致应用程序已经在进行中的错误，所以感觉这是错误的方法。

我已将模型放入服务中，因为我只想要整个应用程序的此数据的单个实例。

任何人都可以提出更好的方法来实现这一目标吗？将模型存储在服务中是个好主意吗？

服务：

```
angular.module("App").service("widgetService", function () {
    this.widgets = [];

    this.removeWidget = function() {
         <!-- remove item from this.widgets -->
    }

    this.getWidgets = function() {
        return this.widgets;
    }

    this.setWidgets = function(widgets) {
        this.widgets = widgets;
    )
} 
```

核心应用：

```
App.controller("CoreAppController", function($scope, $http, widgetService) {
    $scope.widgets = widgetService.getWidgets();
} 
```

HTML：

```
<widget data-ng-repeat="widget in widgets" /> 
```

指示：

```
myKSS.MyKSSApp.directive("widget", function($compile) {
    return {
        restrict: "E",
        replace: true,
        templateUrl: "partials/Widget.html",
        scope: {
        },
        controller: function($scope, $element, $attrs, widgetService) {
            $scope.removeWidget = function() {
                widgetService.removeWidget();
            };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:39:23.627

我注意到一件事：您不应该更改`widgets`服务变量的值 - 否则您无法跟踪添加/删除（我的意思`this.setWidgets`是应该删除服务方法）

其他一切都应该工作（有一些其他的小改动）：[http ://plnkr.co/edit/fQMwfI5d7nikjhXTXSC6?p=preview](http://plnkr.co/edit/fQMwfI5d7nikjhXTXSC6?p=preview)

# c++ - 如何在 C++ 中使用/创建 unique_lock？

> ID：14709233
> 
> 赞同：45
> 
> 时间：2013-02-05T13:59:07.790
> 
> 标签：c++, c++11, locking

请，有人可以解释如何在 C++ 中使用和创建一个 unique_lock 吗？它既应该用于对监视器的任何过程进行互斥，也应该用于对条件变量执行 wait() ......我从文档中不明白我应该如何创建它。是否需要互斥锁？这是一个伪代码：

```
/* compile with g++, flags -std=c++0x -lpthread */

#include <condition_variable>
#include <mutex>
#include <thread>
#include <iostream>
#include <string.h>
#include <unistd.h>

class monitorTh {

private:

    std::mutex m;
    std::condition_variable waitP;
    std::condition_variable waitC;
    char element[32];
    std::unique_lock::unique_lock l;

public:
    void produce(char* elemProd) {
        l.lock();
        if (/*already_present_element*/) {
            waitP.wait(l);
        }
        else {/*produce element*/}
        l.unlock();
    }

    void consume() {
        /*something specular*/
    }
};

int main(int argc, char* argv[]) {

    monitorTh* monitor = new monitorTh();
    char prodotto[32] = "oggetto";

    std::thread producer([&]() {
        monitor->produce(prodotto);
    });

    std::thread consumer([&]() {
        monitor->consume();
    });

    producer.join();
    consumer.join();
} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-05T14:06:35.597

`std::unique_lock`使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)模式。

当你想锁定一个互斥体时，你创建一个类型的局部变量，`std::unique_lock`将互斥体作为参数传递。当 unique_lock 被构造时，它将锁定互斥锁，并且它被破坏它将解锁互斥锁。更重要的是：如果抛出异常，**将**`std::unique_lock`调用析构函数，因此互斥锁将被解锁。

 **例子：

```
#include<mutex>
int some_shared_var=0;

int func() {
    int a = 3;
    { //Critical section
        std::unique_lock<std::mutex> lock(my_mutex);
        some_shared_var += a;
    } //End of critical section
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-14T08:15:49.083

使用条件变量的更详细的示例代码：

```
#include<mutex>
std::mutex(mu); //Global variable or place within class
std::condition_variable condition; //A signal that can be used to communicate between functions

auto MyFunction()->void
{
  std::unique_lock<mutex> lock(mu);
  //Do Stuff
  lock.unlock(); //Unlock the mutex
  condition.notify_one(); //Notify MyOtherFunction that this is done
}

auto MyOtherFunction()->void
{
   std::unique_lock<mutex> lock(mu);
   condition.wait(lock) //Wait for MyFunction to finish, a lambda can be passed also to protects against spurious wake up e.g (lock,[](){return *some condition*})
   lock.unlock();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-05T15:56:34.490

`std::unique_lock<std::mutex>`持有一个单独`std::mutex`对象的锁。您可以通过在构造函数中传递锁定对象与互斥锁相关联。除非您另外指定，否则互斥锁将立即被锁定。如果锁对象在销毁时持有锁，则析构函数将释放锁。通常，该`std::unique_lock<std::mutex>`对象将因此是一个局部变量，在您希望获取锁的位置声明。

在您的情况下，该`produce()`函数可以这样编写：

```
void produce(char* elemProd) {
    std::unique_lock<std::mutex> lk(m); // lock the mutex
    while (/*already_present_element*/) { // condition variable waits may wake spuriously
        waitP.wait(lk);
    }
    {/*produce element*/}
    // lk releases the lock when it is destroyed
} 
```

请注意，我已将 替换为`if`a`while`以解决通话中的虚假唤醒问题`wait()`。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-02-05T14:01:20.417

在这种情况下，我认为您需要做的就是：

```
m.lock();
// Critical section code
m.unlock(); 
```**

# ios - 部分卷曲模态停止/开始动作

> ID：14709240
> 
> 赞同：0
> 
> 时间：2013-02-05T13:59:20.630
> 
> 标签：ios, objective-c, cocoa-touch

使用部分卷曲时如何停止和开始动作？我在当前的视图控制器中尝试了这些功能`viewWillDisappear`，`viewWillAppear`但是当我切换到 settingsViewController 并返回时，它们似乎没有被调用。

我也在我的`first VC`

```
 TwistmAppDelegate *AppDelegate = [[UIApplication sharedApplication] delegate];
    AppDelegate.timer = [NSTimer scheduledTimerWithTimeInterval:30.0
                                     target:self
                                   selector:@selector(resetSpin:)
                                   userInfo:nil
                                    repeats:YES]; 
```

这在我的`second VC`：

```
TwistmAppDelegate *AppDelegate = [[UIApplication sharedApplication] delegate];
[AppDelegate.timer invalidate]; 
```

但这似乎也不起作用。

# c# - 查看进程是否已完成运行

> ID：14709241
> 
> 赞同：1
> 
> 时间：2013-02-05T13:59:24.753
> 
> 标签：c#, batch-file, process, client-server, wmi

我有一个从客户端接收命令并运行它们的服务器。这些命令使用一个特定的批处理脚本，它接收参数并运行。该脚本使用这些参数调用外部控制台应用程序。参数还可以指示脚本在后台运行控制台应用程序的多个实例。因此，结果可能是一个打开的，在后台`CMD`运行 3 个实例。`app.exe`

我想知道这些过程中的每一个何时`app.exe`完成（并获得每个人的特定命令行及其参数），并将其发送给客户端。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:11:03.243

您是否考虑过从后台工作人员调用此脚本？

您的后台工作人员将执行如下操作：

```
static void ExecuteCommand(string command)
{
    int exitCode;
    ProcessStartInfo processInfo;
    Process process;

    processInfo = new ProcessStartInfo("cmd.exe", "/c " + command);
    processInfo.CreateNoWindow = true;
    processInfo.UseShellExecute = false;
    // *** Redirect the output ***
    processInfo.RedirectStandardError = true;
    processInfo.RedirectStandardOutput = true;

    process = Process.Start(processInfo);
    process.WaitForExit();

    // *** Read the streams ***
    string output = process.StandardOutput.ReadToEnd();
    string error = process.StandardError.ReadToEnd();

    exitCode = process.ExitCode;

    Console.WriteLine("output>>" + (String.IsNullOrEmpty(output) ? "(none)" : output));
    Console.WriteLine("error>>" + (String.IsNullOrEmpty(error) ? "(none)" : error));
    Console.WriteLine("ExitCode: " + exitCode.ToString(), "ExecuteCommand");
    process.Close();
}

static void Main()
{
    ExecuteCommand("echo testing");
} 
```

这样，您可以通过检查 BackgroundWorker.IsBusy 状态来测试该过程是否已完成。您甚至可以在流程完成时更新用户。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:12:11.383

您的问题不是很清楚，但我假设您要监视由另一个进程启动的进程。换句话说，`Process.Start()`对它们使用没有意义。

您可以使用[`Process.GetProcessByName()`](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)根据应用程序名称获取正在运行的进程列表。

当你拥有它时，你可以使用[该`Exited`事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)来找出进程何时退出（你还必须设置`EnableRaisingEvents`）。例如：

```
var processes = Process.GetProcessesByName(processName);
foreach (var process in processes)
{
    Console.WriteLine("{0} running.", process);
    process.Exited += (sender, e) => Console.WriteLine("{0} exited.", sender);
    process.EnableRaisingEvents = true;
} 
```

请注意，存在竞争条件：如果进程在调用之后`GetProcessesByName()`但在您设置事件处理程序之前退出，则`Exited`可能不会引发事件。

另一个问题是如何确定应用程序何时启动。我不知道有什么可以让您监控新启动的进程，所以我认为您将不得不反复调用`GetProcessesByName()`，直到您得到您期望的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:06:22.847

如果您使用 Process.Start 启动您的流程，它应该返回一个 Process 对象，您可以使用它来跟踪生命周期，并且使用 HasExited 和 ExitTime 属性您可以确定它是否结束以及何时完成。

# python - 使用装饰器添加返回带有属性的内部函数

> ID：14709244
> 
> 赞同：3
> 
> 时间：2013-02-05T13:59:47.917
> 
> 标签：python, python-decorators

在尝试保存对象时，我有大量作为测试运行的函数，因此我创建了一种方法来更方便地将这些方法注册为对象的约束（测试）。

我对在我的解决方案中使用装饰器感到困惑。我打算做什么：

*   创建一个装饰器，将属性添加到对象中的方法
*   装饰我想要标记为约束的方法。
*   循环我的对象上的所有方法并调用以执行所有具有标志的方法

使用装饰器不起作用，但我自己添加标志可以。

这是代码：

```
from functools import wrap

def constraint(func):
    @wraps(func)
    def inner(*args, **kwargs):
        func._is_constraint = True  # Here after returning the function I add a flag
        return func(*args, **kwargs)
    return inner

class Record(object):
    param1 = 100  # some defaults
    param2 = 20

    @constraint  # This dont works
    def check_test1(self):
        if param1 < 0:
            return 'No value less than zero'

    # This works fine
    def check_test2(self):
        if param2 < 0:
            return 'No value less than zero'
    check_test2._is_constraint = True

    def a_random_method(self):
        print 'some random thing' 
```

所以我正在尝试：

```
>>> rec = Record()
>>> rec.param1 = -100
>>> rec.param2 = -100
>>> for prop in dir(rec):
...     if hasattr(getattr(rec, prop), '_is_constraint'):
...         constraint = getattr(rec, prop)
...             print prop, constraint()
...    
'check_param2: No value less than zero'
>>> 
```

看到 check_param1 没有被执行。

那么，我怎样才能使用装饰器让它工作呢？有可能吗？

我正在尝试在这种特殊情况下使用[https://gist.github.com/mariocesar/4684561](https://gist.github.com/mariocesar/4684561)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:11:52.457

好吧，我看到的第一件事是，您想将参数添加到装饰器中的函数对象，而不是闭包；当从装饰范围调用函数时会调用闭包，因此在闭包中对其进行标记是事后进行的：

```
def constraint(func):
    func._is_constraint = True
    @wraps(func)
    def inner(*args, **kwargs):
        return func(*args, **kwargs)
    return inner 
```

此外，如果您所做的只是在闭包中直接调用 func 而不添加任何功能，只需对其进行标记，那么闭包就完全是多余的：

```
 def constraint(func):
    func._is_constraint = True
    return func 
```

在这种情况下，不同的模式可能会更好地为您服务：

```
class ConstraintsType(type):

    def __new__(cls, name, bases, attrs):

        attrs['constraint_names'] = []
        for attr in attrs:
            if attr.startswith('constraint_'):
                attrs['constraint_names'].append(attr)
        return super(ConstraintsType, cls).__new__(cls, name, bases, attrs)

class Constraints(object):

    __metaclass__ = ConstraintsType

    @property
    def constraints(self):

        for name in self.constraint_names:
            yield getattr(self, name)

class Record(Constraints):

    def __init__(self, params=(100, 20)):

        self.params = params

    def constraint_greater_than_0(self, value):

        return value > 0

   def run(self):

       for index, value in enumerate(self.params):
           for func in self.constraints:
               if not func(value):
                   print 'param %d (%s) did not satisfy constraint %s' % (index, value, func.__name__)

Record().run()
for value_set in ((-100, -100), (0, 0), (-1,1), (1,-1)):
    Record(value_set).run() 
```

# java - 如何设计自动完成功能的服务端数据结构？

> ID：14709249
> 
> 赞同：1
> 
> 时间：2013-02-05T14:00:09.130
> 
> 标签：java, algorithm, data-structures, string-matching, trie

我有数百万个搜索引擎查询，如下所示：

```
Stack Overflow
Java Video Tutorials
Cars
C++ vs Java 
```

现在我想实现一个自动完成功能可以满足这些需求：

```
1\. Type in 'so',       Prompt ['Stack Overflow','...','...']
2\. Type in 'overflow', Prompt ['Stack Overflow','...']
3\. Type in 'jvt',      Prompt ['Java Video Tutorials','...']
... 
```

这是我的解决方案：

1）。提取查询的缩写，例如 Stack Overflow -> SO；

2）。将查询拆分为后缀词，例如 Stack Overflow -> 'Overflow' + 'Stack Overflow'；

3）。现在我们得到“堆栈溢出”的三个序列：

```
'SO','Overflow','Stack Overflow' 
```

4）。最后，我将这三个序列索引到一个 TrieTree 中，并在每个序列的最后一个节点中表示它们的原始查询（或查询 id）：

```
'o' --> 'Stack Overflow'
'w' --> 'Stack Overflow'
'w' --> 'Stack Overflow' 
```

但我认为这太复杂了，有没有人有更好的解决方案？非常感谢 ！

# asp.net - 使用“结构”对 Web 服务中的 Web 方法进行分组？

> ID：14709250
> 
> 赞同：0
> 
> 时间：2013-02-05T14:00:13.083
> 
> 标签：asp.net, web-services, c#-4.0, asmx, webmethod

**定义：** 未能在结构或类中对函数进行分组，但我无法在浏览器上列出它们。并获取 WSDL，因为无法在浏览器上查看 Web 方法。

* **.asmx 文件如下所示：**

```
public class myProfile : System.Web.Services.WebService
{
        public struct AddressFunctions
        {           
           //[WebMethod] here
        }
        public struct MembershipFunctions
        {      
           //[WebMethod] here     
        }
} 
```

**目标：** 我的方法是，以以下方式访问函数：myProfile.AddressFunctions.methodName(); 会工作。

有没有办法解决这个问题？或者为了可读性和易用性，你们如何实现在 Web 服务中对 Web 方法进行分组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:10:09.393

通过使用结构声明，您可以有效地将这些方法从“myProfile”类中删除。将它们包装成一个区域，如下所示：

```
public class myProfile : System.Web.Services.WebService
{
    #region ----- Address functions --------------------------------

       //[WebMethod] here

    #endregion

    #region ----- Membership functions -----------------------------

       //[WebMethod] here     

    #endregion
} 
```

如果你需要在协议层面进行分离，你应该引入更多的 Web 服务类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:11:12.927

您只能按服务中的顺序对方法进行“分组”。

顺便说一句，我们知道 ASMX 是一项遗留技术，不应该用于新开发吗？您应该改用 WCF。

另外，当您说“可读性”时，您是什么意思？谁会读它？

# c - 我的代码 C 有什么问题（读入文件）-wc Unix 命令程序

> ID：14709251
> 
> 赞同：0
> 
> 时间：2013-02-05T14:00:13.110
> 
> 标签：c, file-io, c-strings

基本上我应该制作一个复制 Unix -wc 命令的程序。标志 -l、-w、-c 和 -L 应该分别显示行数、单词数、字符数和行内字符数。

我在阅读文本文件时遇到问题（第一次在 C 中进行）。我使用 GDB 并发现我的问题在于读取文件。一段时间后，无论出于何种原因，它都会读取空字符。

请假设我的代码一切正常，除了读取文件。

这是我的代码：

```
void readInFile(char** argv, int arg, int addFlags, int argc)
{
   FILE *myFile;
   char c;
   int wordCount = 0, lineCount = 1, longestLine, characterAmount = 0;
   int charactersInLine = 0;

   myFile = fopen(argv[arg], "r");
   if(!myFile)
   {
      printf("%s not found!", argv[arg]);
      exit(EXIT_FAILURE);
   }

   while(c != EOF)
   {
      c = fgetc(myFile);
      putchar(c);
      characterAmount++;
      charactersInLine++;

      if(c == ' ')
         wordCount++;
      if(c == '\n')
      {
      if(charactersInLine > longestLine)
         longestLine = charactersInLine;
      charactersInLine = 0;
      lineCount++;
      wordCount++;
   }
} 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:02:42.840

这正在成为最常见的问题之一，呵呵。

你错过了`fgetc()`return `int`，而不是`char`。这是因为`EOF`不是有效字符，所以需要更大的类型。例如，请参阅[本文档](http://linux.die.net/man/3/fgetc)。

您还在第一次分配它`c` *之前*进行了测试，这基本上使您的代码依赖于未初始化变量中发生的任何事情。这是个问题。

此外，您可能应该在计数`EOF` *之前进行测试。*

此外，在代码中使用幻数被认为是一个坏主意。

这：

```
if(c == 32) 
```

可以写成：

```
if(c == ' ') 
```

还有这个：

```
if(c == 10) 
```

可：

```
if(c == '\n') 
```

在我看来，这两个都更清楚。

# c++ - 将对象传递给 var arg 函数

> ID：14709252
> 
> 赞同：2
> 
> 时间：2013-02-05T14:00:15.833
> 
> 标签：c++, mfc, cstring

变量争论函数如何将对象带到结构/类？例如 ：

```
CString a_csName;
CString a_csAge(_T("20"));
a_csName.Format(_T("My Age is : %s"),a_csAge); 
```

这是一个采用此对象`CString::Format`的 printf 风格的变量论证函数。`CString`这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:18:41.630

来自：http: [//msdn.microsoft.com/en-us/library/aa300688%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa300688%28v=vs.60%29.aspx)

> *   您可以自由地将 CString 对象替换为 const char* 和 LPCTSTR 函数参数。

可能`CString`是一个没有 vtable 的类，并且只有一个 type 的属性`char*`。这意味着，`sizeof(CString) == sizeof(const char*)`如果您将 a 重新解释`CString`为 a，`const char*`您将得到一个 working `const char*`。

编译器不应接受将结构传递给函数的可变参数部分。但是如果我没记错的话，在 GCC 中，当您将结构作为可变参数传递时，它的内存被复制（即不使用复制构造函数）并发出警告。我猜 MSVC 在那里做同样的事情，然后，该`Format`方法只是假设给定的数据是`const char*`.

让我给你一个替代的例子。假设您有一个没有 vtable 的类，其中只有成员是 int。如果将它传递给可变参数，编译器将复制此对象的内容，这只是一个 int。在函数实现中，您（不知何故）知道您收到了一个`int`. 然后你查询参数要求一个`int`. 由于在内存级别，您的课程与 a 没有什么不同`int`，因此一切都会“正常”。该函数将访问`int`类的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T06:04:22.873

在通过 MFC 代码进行一些研究和调试后发现以下内容，希望它可以帮助那些面临着名的静态代码分析器错误“将 struct 'CStringT' 传递给省略号”的人，这实际上也是我怀疑的根源。

[http://www.gimpel.com/html/bugs/bug437.htm](http://www.gimpel.com/html/bugs/bug437.htm)

格式函数是一个可变参数函数，取决于第一个参数中存在的格式说明符。第一个参数始终是 char *。

它解析格式说明符(%s,%d,%i…) 并根据找到的格式说明符的索引读取 var_arg 数组，如果指定了 %s，则直接转换为 char * 或 int 。

因此，如果指定了 CString 并且相应的格式说明符是 %s，则在 CString 对象上进行对 char * 的直接强制转换尝试。

```
CString a_csName;
CString a_csAge(_T("20"));
a_csName.Format(_T("My Age is : %s"),a_csAge);
wcout<<a_csName; 
```

会打印我的年龄是 20

```
CString a_csName;
CString a_csAge(_T("20"));
a_csName.Format(_T("My Age is : %d"),a_csAge);
wcout<<a_csName; 
```

将打印我的年龄是 052134

所以这背后没有智慧。只是直接演员。因此，我们传递了一个 POD 或用户定义的数据结构，它没有任何区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-17T22:17:25.930

我最近不得不清除这个 Lint 错误并偶然发现了这个线程。

尽管这是对正在发生的强制转换的有趣调查，但避免 Lint 警告的最简单方法是使用 CString 方法传递 CString 指针而不是 CString 结构，`Get.String()`如下所示

```
a_csName.Format(_T("My Age is : %d"), a_csAge.GetString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-18T09:23:22.020

让我开始以不同的方式回答这个问题。

```
struct Value
{
   int nValue;
   float fOtherValue;
};

int main()
{
    Value theValue;
    theValue.nValue = 220;
    theValue.fOtherValue = 3.14f;

    printf("Value: %d", theValue);
} 
```

此代码将打印`220`没有任何问题。但是如果你在 之后传递第二个参数`theValue`，它不会：

```
printf("Values: %d, %f", theValue, theValue.fOtherValue); 
```

由于第一个变量参数`theValue`不符合`%d`参数指定的大小。因此，`3.14`不会（可能不会）显示。让我们不要谈论如何`printf`在堆栈上推送参数，`va_start`以及类似的事情是如何工作的。

同样，当我们这样设计一个`String`类时：

```
struct String
{
    char* pData;

public:
    String()
    {
        pData = new char[40];
        strcpy_s(pData, 40, "Sample");
    }
}; 
```

并以这种方式使用它：

```
String str;
printf("%s", str); 
```

它肯定会奏效。

但是参数和调用堆栈损坏呢？如果类的大小（如`Value`）大于`Value`格式（ ）指定的数据大小（ 4 ）怎么办`%d`。那么，在这种情况下，设计的类需要确保给定类的大小与`printf`函数使用的参数大小相同。

我不会提及它的细节，而是`CString`使用 internal class `CStringData`。后一个类保存字符串、长度、引用计数等。`CString`（实际上`CSimpleStringT`）使用这个类，但只保存`char`/的指针`wchar_t`，由`CStringData`.

很大程度上，`CString`是作为`String`提到的类实现的（就数据`sizeof`而言）。

# jquery - 提交表单时重新加载谷歌地图

> ID：14709255
> 
> 赞同：0
> 
> 时间：2013-02-05T14:00:26.133
> 
> 标签：jquery, google-maps

我创建了一个谷歌地图，它从 JSON 文件加载标记并在页面首次加载时绘制它们。这部分功能可以正常工作。但是，我的页面还包含一个表单，我想在提交表单以更新地图时再次触发 getJSON 请求。这是我无法工作的地方。谁能看到我做错了什么？

```
<!doctype html>

<html lang="en">
    <head>
        <script src="http://maps.google.com/maps/api/js?sensor=false"></script> 
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script src="jquery.ui.map.js"></script>
        <script>
            // convert form parameters sent using getJSON method to JSON
            $.fn.serializeObject = function() {
                var o = {};
                var a = this.serializeArray();
                $.each(a, function() {
                    if (o[this.name]) {
                        if (!o[this.name].push) {
                            o[this.name] = [o[this.name]];
                        }
                        o[this.name].push(this.value || '');
                    } else {
                        o[this.name] = this.value || '';
                    }
                });
                return o;
            };          

            $(function() {
                // method to initialise map
                function initialise() {
                    $('#map_canvas').gmap({
                        'disableDefaultUI':true, 'callback': function() {
                            var self = this;
                            $.getJSON( 'http://localhost:8888/googlemaps/demo.json', 
                                $('#filter').serializeObject(),
                                function(data) { 
                                    $.each( data.markers, function(i, marker) {
                                        self.addMarker({ 'position': new google.maps.LatLng(marker.latitude, marker.longitude), 'bounds':true } ).click(function() {
                                            self.openInfoWindow({ 'content': marker.content }, this);
                                        });
                                    });
                                }
                            );
                        }
                    });
                }

                // initial map on page load
                initialise();

                // reinitialise map on form submit
                $('#filter').submit(function(e) {
                    initialise();
                    e.preventDefault();
                });          
            });
        </script>   
    </head>

    <body>
        <form id="filter">
            <select name="foo" id="foo">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>

            <select name="bar" id="bar">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>

            <input type="submit">
        </form>

        <div id="map_canvas" style="height:400px; width:100%;"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:09:16.960

`destroy`在再次初始化之前调用地图的- 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:35:01.400

“ [AJAX”哲学](http://econym.org.uk/gmap/basic11.htm)（来自 Mike Williams 的 v2 教程）将离开地图（不要重新初始化它），只需更改显示的数据（标记）。

将地图创建与标记分开，在页面加载时初始化地图并为原始数据调用 .getJSON。在表单提交（或按钮单击）时，删除所有标记并再次调用 .getJSON，从表单中传递适当的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:49:36.380

感谢 Linuxios。那行得通。修改后的代码供参考：

```
$('#filter').submit(function(e) {
  $('#map_canvas').gmap('destroy');
  initialise();
  e.preventDefault();
}); 
```

我还将当前时间附加到 getJSON URL 以防止缓存。

```
$.getJSON( 'http://localhost:8888/googlemaps/demo.json?' + new Date().getTime() 
```

# vb.net - 从文本 VB.NET 导入代码

> ID：14709263
> 
> 赞同：3
> 
> 时间：2013-02-05T14:00:51.403
> 
> 标签：vb.net, text

是否可以将文本作为代码导入，然后将其添加到 vb.net 的子目录中？如果我有一个充满代码的 .txt 文件，我可以通过编程方式（通过按钮）导入它吗？

我需要的是让 vb.net 接受该脚本（txt 文件），并使用它来声明变量并制作函数/子程序——这就是我所需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:33:17.640

您可以使用 CodeDom 对象来做这种事情。CodeDom 对象允许您在运行时动态生成程序集。例如，如果你制作一个接口

```
Public Interface IScript
    Property Variable1 As String
    Sub DoWork()
End Interface 
```

然后，您创建一个方法，如下所示：

```
Imports Microsoft.VisualBasic
Imports System.CodeDom.Compiler

' ...

Public Function GenerateScript(code As String) As IScript
    Using provider As New VBCodeProvider()
        Dim parameters As New CompilerParameters()
        parameters.GenerateInMemory = True
        parameters.ReferencedAssemblies.Add(Assembly.GetExecutingAssembly().Location)
        Dim interfaceNamespace As String = GetType(IScript).Namespace
        Dim codeArray() As String = New String() {"Imports " & interfaceNamespace & Environment.NewLine & code}
        Dim results As CompilerResults = provider.CompileAssemblyFromSource(parameters, codeArray)
        If results.Errors.HasErrors Then
            Throw New Exception("Failed to compile script")
        Else
            Return CType(results.CompiledAssembly.CreateInstance("Script"), IScript)
        End If
    End Using
End Function 
```

现在，您可以这样称呼它：

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim builder As New StringBuilder()
    builder.AppendLine("Public Class Script")
    builder.AppendLine("    Implements IScript")
    builder.AppendLine("    Public Property Variable1 As String Implements IScript.Variable1")
    builder.AppendLine("    Public Sub DoWork() Implements IScript.DoWork")
    builder.AppendLine("        Variable1 = ""Hello World""")
    builder.AppendLine("    End Sub")
    builder.AppendLine("End Class")
    Dim script As IScript = GenerateScript(builder.ToString())
    script.DoWork()
    MessageBox.Show(script.Variable1) ' Displays "Hello World"
End Sub 
```

显然，您可以从文本文件中加载代码，而不是在字符串生成器中构建代码，如下所示：

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim script As IScript = GenerateScript(File.ReadAllText("C:\script.txt")
    script.DoWork()
    MessageBox.Show(script.Variable1) ' Displays "Hello World"
End Sub 
```

# javascript - Javascript 错误 - 无法在未定义上运行 .split

> ID：14709271
> 
> 赞同：0
> 
> 时间：2013-02-05T14:01:04.190
> 
> 标签：javascript, split

我想这真的很简单，但我似乎无法实现它。我有这个片段...

```
var choice = location.href.split("?")[1].split("=")[1]; 
```

它工作正常，直到“选择”为空，然后它抛出以下错误....

```
TypeError: location.href.split(...)[1] is undefined 
```

我知道这是因为您不能对未定义的变量调用 split，我认为我的解决方案是存储变量，然后在已满时拆分它，如果未定义则忽略它。

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:12:50.040

这样做不是很酷，但如果您希望查询字符串中*只有一个*参数，您可以这样做：

```
var choice = (location.href.split("?")[1] || '').split("=")[1]; 
```

你会得到`choice`好像`undedfined`它没有在查询字符串中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:02:28.360

没有足够的信息，但是第一个拆分的 1 索引的属性 href 未定义，或者最后一个拆分的第二项未定义。

您可以将拆分分成几个语句。

```
var choice;
var firstSplit = location.href;

if (firstSplit) {
    var secondSplit = firstSplit.split("?");
}
if (secondSplit[1]) {
    choice = secondSplit[1].split("=");
} 
```

然后，您可以使用从上次拆分返回的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:10:46.380

如果您尝试拆分可能有也可能没有查询字符串的 URL，您会看到此异常。您应该在尝试操作之前检查查询字符串是否存在：

```
var choice;
var outerSplit = window.location.href.split('?');
var innerSplit;
if (outerSplit.length > 1) {
    innerSplit = outerSplit.split('=');
    if (innerSplit.length > 1) {
        choice = innerSplit[1];
    }
} 
```

如果您发现自己经常执行这种类型的查询字符串操作，您可能想要投资一个可重用的函数，比如[这个问题](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)中的那个。

# java - Java小程序加载失败时如何显示消息？

> ID：14709273
> 
> 赞同：4
> 
> 时间：2013-02-05T14:01:10.503
> 
> 标签：java, php, javascript, html, applet

我有一个 Java 小程序，它需要 Java 版本。至少 7.0.0。

是否有可能检查小程序是否无法加载并向用户显示他需要更新其 Java 软件的消息？

我尝试使用一些背景，但它仅在根本没有 Java 时显示，否则显示带有`ClassNotFoundException`. 这是我的 HTML 示例，其中包括我的小程序。

```
 <div style="background-image: url('img/appletbg.png'); width: 790px; height: 900px;">
        <applet code="MyPackage/MainClass.class" 
                       archive="applet/MyJar.jar" width="790" height="900">
        </applet>
  </div> 
```

我知道，我可以通过 JS 找出安装的 Java 版本，但它是客户端，我更愿意在没有任何客户端交互的情况下显示一些消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:43:25.160

好的，我已经弄清楚了如何做到这一点，使用 AndrewThompson 的建议，使用 JS 不需要任何交互。

这是我的代码的结果，从这个网站得出： http: [//docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/ensuringJRE.html](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/ensuringJRE.html)

```
<script type="text/javascript" src="http://java.com/js/deployJava.js"></script>
<script type="text/javascript">
    if (deployJava.versionCheck("1.7.0_0+") == false) {                   
        userInput = confirm(
                "You need the latest Java(TM) Runtime Environment. " +
                "Would you like to update now?");        
        if (userInput == true) {  
            window.location = "http://java.com/en/download/testjava.jsp";
        }
    }
    else
    {
        // This are just the sample parameters for now!
        var attributes = {id:"applet", name:"TheApplet", code:"TheApplet"}; 
        var parameters = {jnlp_href: "http://localhost/TheApplet.jnlp"};

        deployJava.runApplet(attributes, parameters, "1.7.0_0");
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:08:54.213

也许这还不够，但目前我认为您可以使用标签 apple 的[alt 属性](http://www.w3schools.com/tags/tag_applet.asp)：

```
<applet code="MyPackage/MainClass.class" archive="applet/MyJar.jar" width="790" height="900" alt="alternative text">
</applet> 
```

在文档中阅读更多内容，您可能会使用[onerror](http://www.w3schools.com/tags/ref_eventattributes.asp)事件，但我从未使用过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:22:09.510

试试这个 ：

```
 <SCRIPT LANGUAGE="JavaScript">
            error= errr;  
        function loadApplet() {
         if (!document.applets[0].isActive)

            alert(" Applet could not be loaded");
            }

        function errr() {
         alert("Applet could not be loaded");

         }
        } 
```

在正文 onload 事件中添加 loadApplet 方法

# facebook - 自定义 facebook 发送对话框

> ID：14709276
> 
> 赞同：2
> 
> 时间：2013-02-05T14:01:18.817
> 
> 标签：facebook, dialog, message, send, friend

我需要向我的 facebook 朋友发送消息，其中应包括：
- 图片
- url
- 我的自定义消息
，我需要知道这条消息是发给谁的。

功能类似于 Spotify.com（在朋友之间分享歌曲）

请告知如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T00:16:15.907

您可以使用 Facebook 发送对话框 ( [https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/) ) 发送消息，但您不会收到朋友 ID。

# solr - 运行 solrindexer 时出错

> ID：14709278
> 
> 赞同：0
> 
> 时间：2013-02-05T14:01:21.370
> 
> 标签：solr, nutch

现在我使用 3.6.1 和 nutch 1.5，它运行良好......我抓取我的网站并将数据索引到 solr 并使用 solr 搜索，但两周前它开始不起作用......当我使用 ./nutch 抓取网址时-solr `http://localhost:8080/solr/`-depth 5 -topN 100 命令可以工作，但是当我使用 ./nutch crawl urls -solr `http://localhost:8080/solr/`-depth 5 -topN 100000 时，它会抛出异常，在我的日志文件中我发现了这个..

```
2013-02-05 17:04:20,697 INFO  solr.SolrWriter - Indexing 250 documents
2013-02-05 17:04:20,697 INFO  solr.SolrWriter - Deleting 0 documents
2013-02-05 17:04:21,275 WARN  mapred.LocalJobRunner - job_local_0029
org.apache.solr.common.SolrException: Internal Server Error

Internal Server Error

request: `http://localhost:8080/solr/update?wt=javabin&version=2`
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:430)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
    at org.apache.nutch.indexer.solr.SolrWriter.write(SolrWriter.java:124)
    at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:55)
    at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:44)
    at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.write(ReduceTask.java:457)
    at org.apache.hadoop.mapred.ReduceTask$3.collect(ReduceTask.java:497)
    at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:195)
    at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:51)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
2013-02-05 17:04:21,883 ERROR solr.SolrIndexer - java.io.IOException: Job failed!
2013-02-05 17:04:21,887 INFO  solr.SolrDeleteDuplicates - SolrDeleteDuplicates: starting at 2013-02-05 17:04:21
2013-02-05 17:04:21,887 INFO  solr.SolrDeleteDuplicates - SolrDeleteDuplicates: Solr url: `http://localhost:8080/solr/` 
```

两周前它运作良好......有人遇到过类似的问题吗？

嗨，我刚刚完成爬网并遇到了同样的异常，但是当我查看我的 log/hadoop.log 文件时，我发现了这个..

```
 2013-02-06 22:02:14,111 INFO  solr.SolrWriter - Indexing 250 documents
2013-02-06 22:02:14,111 INFO  solr.SolrWriter - Deleting 0 documents
2013-02-06 22:02:14,902 WARN  mapred.LocalJobRunner - job_local_0019
org.apache.solr.common.SolrException: Bad Request

Bad Request

request: `http://localhost:8080/solr/update?wt=javabin&version=2`
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:430)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
    at org.apache.nutch.indexer.solr.SolrWriter.write(SolrWriter.java:124)
    at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:55)
    at org.apache.nutch.indexer.IndexerOutputFormat$1.write(IndexerOutputFormat.java:44)
    at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.write(ReduceTask.java:457)
    at org.apache.hadoop.mapred.ReduceTask$3.collect(ReduceTask.java:497)
    at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:304)
    at org.apache.nutch.indexer.IndexerMapReduce.reduce(IndexerMapReduce.java:53)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
2013-02-06 22:02:15,027 ERROR solr.SolrIndexer - java.io.IOException: Job failed!
2013-02-06 22:02:15,032 INFO  solr.SolrDeleteDuplicates - SolrDeleteDuplicates: starting at 2013-02-06 22:02:15
2013-02-06 22:02:15,032 INFO  solr.SolrDeleteDuplicates - SolrDeleteDuplicates: Solr url: `http://localhost:8080/solr/`
2013-02-06 22:02:21,281 WARN  mapred.FileOutputCommitter - Output path is null in cleanup
2013-02-06 22:02:22,263 INFO  solr.SolrDeleteDuplicates - SolrDeleteDuplicates: finished at 2013-02-06 22:02:22, elapsed: 00:00:07
2013-02-06 22:02:22,263 INFO  crawl.Crawl - crawl finished: crawl-20130206205733 
```

我希望它有助于理解这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:53:13.093

根据您显示的日志，我认为答案将在 Solr 方面。您应该在那里有一个异常跟踪，它将告诉您哪个组件停止了处理。如果它在两周前工作，要么发生了一些变化（jar 版本？），要么你有一个特定的文档有问题。

如果问题发生在单个文档（尝试几个不同的文档）上，那么您可能需要更改一些环境（jar、属性等）。如果它没有发生在一个文档子集上，而是发生在另一个文档子集上，则特定文档可能存在问题（例如错误编码）。

同样，Solr 端堆栈跟踪将是首先要检查的内容。

# java - 如何使用 SVNKit 和 Java / Groovy 从远程 SVN 存储库获取修订号？

> ID：14709279
> 
> 赞同：1
> 
> 时间：2013-02-05T14:01:22.663
> 
> 标签：java, svn, groovy, svnkit

我认为我的问题的基本答案在这里： [grails add svn revision to app.version](https://stackoverflow.com/questions/5263995/grails-add-svn-revision-to-app-version)

但事实证明，“baseDir”必须是一个物理文件位置，而不是一个 url——至少看起来是这样。

谁能指导我使用不需要用户 ID/pswd 的远程存储库的示例？

我通过发出'svn info *url* '来完成这项工作，但这对我来说似乎有点脆弱。昨天晚上我花了大约两个小时搜索和尝试，但没有成功。我不禁感到该解决方案可能与链接中的示例非常接近。

问候，约翰

# javascript - 通过单击表单按钮将代码添加到 .js 文件

> ID：14709286
> 
> 赞同：0
> 
> 时间：2013-02-05T14:01:35.933
> 
> 标签：javascript, html

我希望我的表单添加此代码，替换为用户每次按下提交按钮时填写的表单中提供的信息。

```
{
    flag = false;

    username = new Array("alex364981");
    password = new Array("Codylewis");
    page = "admin/admin242f1221r2fd2fd12r" + ".html";

    if (form.username.value == username[0] && form.password.value == password[0])

    {
        self.location.href = page;
        flag = true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:07:27.510

在我看来，您正在尝试使用 JavaScript（即客户端代码）实现一个简单的身份验证系统。这不是一个好主意。

这里的一个大问题是，正如其他评论者所指出的那样，您无法从客户端写入服务器上的 .js 文件。您需要在服务器端做一些事情才能做到这一点。

但是这个计划有两个非常大的安全缺陷：首先，有效的用户名和密码以纯文本形式提供给用户。查看源代码，那里有您的用户名和密码。其次，身份验证仅放在对安全页面的重定向上。如果您知道页面的 URL（也可以通过简单地查看源来获得），您可以直接进入页面并避免首先进行身份验证。

提供具有任何形式安全性的身份验证机制的唯一方法是使用服务器端语言，如 PHP、Python、Ruby 或 ASP.NET（或[服务器端 JavaScript](http://nodejs.org)，但这是另一回事）。**您无法通过简单的客户端 JavaScript 实现合理的身份验证机制。**

# javascript - 在网络冒险游戏中滚动文本以进行叙述

> ID：14709288
> 
> 赞同：0
> 
> 时间：2013-02-05T14:01:42.857
> 
> 标签：javascript, jquery, css, text, scroll

我似乎无法得到我想要的确切效果。基本上我希望文本从文本区域的底部向上滚动，然后一旦文本条目的底部滚动到视图停止滚动。文本条目可能比文本字段长，所以我希望用户能够根据需要滚动文本。

我玩过 marquee 和 JavaScript，但没有得到想要的效果。我宁愿远离第三方插件，为自己学习这个，部分原因是我不必担心未来的支持。

那么任何人都可以给我一些关于如何设置它的指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:00:39.367

您可以为 div 设置动画..

```
var c = $("#container");
    var SPEED = 10000;
    var thediv = $("#mydiv");
    thediv.show()
    thediv.animate({
        top: c.height() - thediv.height() - 10},
        SPEED, 
        function () {
            thediv.css("height", c.height());
            thediv.css("top", 0);        
            var objDiv = document.getElementById("mydiv");
            objDiv.scrollTop = objDiv.scrollHeight;
    }); 
```

你会想弄乱一些格式......这是一个小提琴 [http://jsfiddle.net/kmd97/DmkMZ/](http://jsfiddle.net/kmd97/DmkMZ/)

# jsf - 在 JSF 中绘制 DAG 图

> ID：14709289
> 
> 赞同：1
> 
> 时间：2013-02-05T14:01:54.883
> 
> 标签：jsf, graph

我需要在 JSF 页面中绘制一个 DAG 图（即具有节点和有向边的图）。谁能建议我一个图书馆来做这个？我更喜欢 JAVA 库，因为图形是从数据库数据动态生成的，所以我将实现一个 Bean 来设计图形并在 JSF 页面中显示它。

注意我使用 Primefaces，以供注意

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:15:36.480

您可以为 jsf 检查此 primefaces 组件：[Primefaces MindMap Component](http://www.primefaces.org/showcase/ui/mindmap.jsf)

或者查看开源 jgrapht。[示例在这里](http://jgrapht.sourceforge.net/visualizations.html)

或者我强烈建议检查这个 javascript 库以生成您自己的图表：[rapgael js library](http://raphaeljs.com/)

您可以使用它们生成有向无环图。祝你好运！

# asp.net - aspNetCompatibilityEnabled 和非 HTTP 绑定

> ID：14709292
> 
> 赞同：0
> 
> 时间：2013-02-05T14:01:56.657
> 
> 标签：asp.net, wcf, compatibility

我们在 IIS 中托管 WCF 服务，使用 netTcpbinding、webHttpBinding 和 wsHttpBinding。

> **当我将aspNetCompatibilityEnabled**设置为 true时，对非 HTTP 绑定有什么影响 ？

我们需要为*IHttpModule*中的自定义基本身份验证实现启用 ASP.NET 兼容性。

在[MSDN](http://msdn.microsoft.com/en-us/library/ms731336.aspx) ist 的文档中，非 HTTP 绑定不起作用：

> “aspNetCompatibilityEnabled：当此属性设置为**true** ...禁止通过非 HTTP 协议进行通信”。

但是当我在项目中启用兼容模式时，net.tcp 似乎工作正常。
**是否可以启用*aspNetCompatibilityEnabled*并支持*net.tcp*或*msmq*绑定？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:24:28.613

您确定实际启用了 aspNetCompatibilityEnabled 设置吗？
你在检查正确的 web.config 吗？

可能是您的 net.tcp 服务可能在不同的项目中等。尝试访问您的 http Web 服务中的 HttpContext 以确保 aspNetCompatibilityEnabled 设置确实有效。

# php - 使用 jQuery 单击时，默认文本必须在 textarea 中消失

> ID：14709301
> 
> 赞同：0
> 
> 时间：2013-02-05T14:02:38.173
> 
> 标签：php, javascript, jquery, html

这是我第一次使用 jQuery，我在理解如何在我的网站上实现它时遇到了一些困难，尽管我正在尝试完成它相对简单的任务。

我的目标是修改我网站上现有的 textarea，使其显示默认消息，当客户单击 textarea 以输入他的信息时，该消息会消失。最初我只是想使用 html 占位符属性，但由于某种原因它不起作用..（我使用的是 IE 8）。所以现在我正在尝试使用向我建议的这个 jQuery 代码。

这是代码：

```
 <textarea style="background: #F6E3CE; overflow:auto;" rows="3" cols="70" name="sComments" id="sComments" 
                        <script type="text/javascript"><?php
                        $("input#text").focus(function(){
                            if( $(this).val() == "default message" )
                            {
                                $(this).val("");
                            }
                        }).blur(function(){
                            if( $(this).val() == "" )
                            {
                                $(this).val("default message");
                            }
                        }); ?>
                        </script>
                        onchange="commentsChanged(this,<?php echo $pKey;?>);"><?php echo str_replace('\r\n', "\n", rtrim($variable1[0][aComments]));?></textarea> 
```

如果我理解正确，我在代码开头引用了 jQuery 文件，如下所示：

```
<script language="JavaScript" src="../js/jquery-1.6.4.js"></script> 
```

在这次最新尝试中，网站的这一部分甚至无法打开。在做了一些研究之后，我仍然不确定我做错了什么。

谢谢你。

编辑：下面的两个答案都很好，效果很好。Tenhouse 更“合适”，因为它分离了逻辑和格式，但 Chandrakant 对内联 JavaScript 的使用同样有效，实际上是我在我的网站上使用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:07:41.423

首先，您将`PHP`代码与`JavaScript`不起作用的代码混合在一起，因为它们没有直接关系。

其次，您必须将您`focus / blur -listeners`的`document ready`函数放入函数中（这意味着它会在加载文档时加载）。

第三，我强烈建议阅读一些关于 jQuery 的基础知识——你可以从这个开始：http://docs.jquery.com/Tutorials: [Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)

编辑：由于您似乎对所有事情都非常困惑，因此这里有一个完整的示例：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                var defaultMessage = "default message";
                $("#myTextArea").focus(function(){
                    if( $(this).val() == defaultMessage){
                        $(this).val("");
                    }
                }).blur(function(){
                    if( $(this).val() == "" ){
                        $(this).val(defaultMessage);
                    }
                }).val(defaultMessage);
            });
        </script>
    </head>
    <body>
        <textarea id="myTextArea"></textarea>
    </body>
</html> 
```

在上面的示例中，您还可以看到我使用更新的 jQuery 版本 - 直接来自他们的服务器。

查看 Chandrakant 的另一个答案：

我不同意将 JavaScript 部分直接放入元素中。这不是一个好习惯，因为您应该始终尝试拆分逻辑和格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:05:33.467

无需为此使用 jQuery，如果您仍然对使用 jQuery 感兴趣，请使用以下逻辑

```
 <input type="text" value="your text" onfocus="if (this.value == 'your text') {this.value = '';}" onblur="if (this.value == '') {this.value = 'your text';}"> 
```

# javascript - JavaScript 不加载分页结果

> ID：14709304
> 
> 赞同：0
> 
> 时间：2013-02-05T14:02:51.870
> 
> 标签：javascript, jquery, html

我正在使用 tablesorter 对表格中的结果进行分页。我还在其中一列上有一个工具提示，以显示它被批准的时间。表中的前 10 个结果（默认加载）将正确显示工具提示。如果我切换到下一页，悬停将显示默认浏览器标题工具提示，而不是由 JS 触发的提示。我相信这是因为 JS 的加载方式，而不是最初被分页隐藏的内容。这是我调用工具提示的方式：

```
$(document).ready(function () {
                     if ($("[rel=tooltip]").length) {
                     $("[rel=tooltip]").tooltip();
                     }
                   }); 
```

只是为了显示链接：

```
//This link displays my fancy tooltip correctly//
<a href="#" style="color:#000;" rel="tooltip" title="Monday January 28th 2013 12:11 PM">

//This link does not//
<a href="#" style="color:#000;" rel="tooltip" title="Monday January 28th 2013 01:25 PM"> 
```

就像我说的那样，两行之间的唯一区别是，一是在页面加载时加载，另一行是通过更改页面上可见的行数或转到下一页（顺便说一下是 JS，实际上并没有改变页面位置）。这些行是从 MySQL 生成的，而前十个工作，之后没有工作。我的结论正确吗？我会错过别的东西吗？感谢您的任何建议！

编辑：我要补充一点，导致我的困惑，分页器实际上并没有隐藏 html 源中的行。它只是不在浏览器窗口中显示它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:50:35.083

您的 tooltip() 似乎正在处理结果列表中的第一个条目。

```
$("[rel=tooltip]") 
```

这总是返回一个列表，如果只找到一个，它只是“很好”任何功能都可以正常工作。

为了让它工作，试着循环每一个

```
$(function(){
    $("[rel=tooltip]").each(function(){
        $(this).tooltip();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:51:31.827

我的假设是，您正在通过 AJAX 加载页面。在这种情况下，您必须重新调用 AJAX 调用成功时的工具提示定义。您可以按如下方式执行此操作，

```
function initTooltip(){
if ($("[rel=tooltip]").length) {
                     $("[rel=tooltip]").tooltip();
                     }
}

$(document).ready(function () {
                     initTooltip();
                   });

$.ajax({
 /* some code */
 success: function(){
initTooltip();
}}); 
```

注意：这不是完整的代码。这将给出如何处理您的问题的想法。

# html - 有没有办法逐步完成 HTML 渲染？

> ID：14709306
> 
> 赞同：0
> 
> 时间：2013-02-05T14:02:54.167
> 
> 标签：html, visual-studio-2010

我正在使用 Visual Studio 2010 Premium 开发一个 ASP.NET MVC 应用程序，当我运行该应用程序时，我希望能够在 HTML 渲染发生时单步执行。

示例：如果页面上有 3 个文本框，在第一个文本框呈现后，我希望能够暂停浏览器，检查 HTML，继续 HTML 呈现，在第二个文本框呈现后暂停，检查HTML，然后完成渲染第三个文本框和页面的其余部分。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:05:31.880

那是不可能的。HTML 在服务器端生成并一起发送到客户端。除非您有任何 javascript 创建的元素，否则您看不到在客户端上呈现的页面。

# javascript - 在ajax之后加载外部javascript

> ID：14709310
> 
> 赞同：2
> 
> 时间：2013-02-05T14:03:11.243
> 
> 标签：javascript, jquery, ajax, jquery-mobile

所以我使用 ajax 并尝试加载外部 javaScript，我只想知道我是否做得对。到目前为止我所拥有的是这个

```
 <script>
     $(document)live('pageInit, function(event){
       $.getScript("9829_edge.js") 
       $.getScript("9829_edgeActions.js")  
         });

        </script> 
```

这真的是我第一次尝试通过 javascript 加载脚本，所以我只想知道我是否做对了，以及这是否是加载多个文件的正确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:04:24.997

您在直播之前错过了点，也缺少 pageInit 的右引号并用分号终止每个语句。

```
$(document).live('pageInit', function(event){
      $.getScript("9829_edge.js");
      $.getScript("9829_edgeActions.js");
}); 
```

jQuery [live](http://api.jquery.com/live/)已被弃用，因此请改用 on。

```
$(document).on('pageInit', function(event){
      $.getScript("9829_edge.js");
      $.getScript("9829_edgeActions.js");
}); 
```

# c# - 在 DataGrid、Silverlight 导航应用程序中选择整行

> ID：14709318
> 
> 赞同：2
> 
> 时间：2013-02-05T14:03:28.203
> 
> 标签：c#, xaml, datagrid

这可能是一个愚蠢的问题，但我无法在任何地方找到答案。

我试图使当用户单击数据网格中的某一行时，将选择整行。

在 WPF 中，我只需将选择模式设置为 FullRowSelect，但在我当前的项目中，数据网格没有此选项。我现在仅有的 2 个选项是 SelectionMode：Single 或 Extended。

目前我的 XAML 代码如下所示：

```
<sdk:DataGrid x:Name="ShowKlant" Grid.Column="0" AutoGenerateColumns="False"        CanUserReorderColumns="False" IsReadOnly="True" SelectionChanged="ShowKlant_SelectionChanged" AlternatingRowBackground="#FF4568C7" RowBackground="#AA73A4D4">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn Header="Klant ID" Binding="{Binding KlantID}"/>
        <sdk:DataGridTextColumn Header="Voornaam" Binding="{Binding Voornaam}"/>
        <sdk:DataGridTextColumn Header="Achternaam" Binding="{Binding Achternaam}"/>
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

The reason i want to do this is that when the entire row is selected i can hopefully use code similar to this to get the value from the first cell.

```
idklant = Convert.ToInt32(ShowKlant.SelectedRows[0].Cells[0].Value); 
```

在搜索中使用我的错误报告后，由于这个问题找到了解决方案。

解决方案链接： [如何读取 Datagrid 选定行的第一个单元格中的值？](https://stackoverflow.com/questions/4843578/how-to-read-the-value-in-the-first-cell-in-a-selected-row-of-a-datagrid)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T07:29:56.263

您是否尝试过设置数据网格的选择模式？

```
<DataGrid x:Name="test" SelectionMode="Single" > 
```

# excel - 一个单元格中的条目可以更改 Excel 中整列的小数位吗？

> ID：14709321
> 
> 赞同：0
> 
> 时间：2013-02-05T14:03:49.893
> 
> 标签：excel

我制作了一个计算器，用于向游泳池添加化学品。您输入说 15,000 加仑并询问 2 ppm 需要多少氯。它给出了以盎司和磅为单位的答案，精确到小数点后 2 位。但是当加仑很小，如 350 加仑时，小数点后 2 位是不够的。这是否可以自动化，以便当输入的加仑数小于 1,000 时，它会在一列中显示 3 或 4 位小数？或者当它超过 1,000 加仑时，它显示 2 个小数位？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:35:17.940

假设输入，请尝试以下公式（替换`A1/55555`为您的实际输入参考 - 在您的示例中为 15,000 加仑）：`=ROUND(A1/55555,IF(A1>1000,2,4))`

因此，如果输入（即 A1）符合您的要求 - 结果将四舍五入到确定的小数位数。希望对您有所帮助）

样本结果：

```
Input   Result
800     0,0144
1500    0,03 
```

# c - C有字符串类型吗？

> ID：14709323
> 
> 赞同：53
> 
> 时间：2013-02-05T14:03:57.163
> 
> 标签：c, string, char, printf, strcpy

我最近开始使用 C 语言进行编程，来自 Java 和 Python。现在，在我的书中，我注意到要制作一个“Hello World”程序，语法是这样的：

```
char message[10]
strcpy(message, "Hello, world!")
printf("%s\n", message); 
```

现在，这个例子使用了一个 char 数组，我想知道 - 字符串发生了什么？为什么我不能简单地使用其中之一？也许有不同的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-05T14:20:46.797

C 没有也从来没有原生字符串类型。按照惯例，该语言使用`char`以空字符终止的数组，即带有`'\0'`. 该语言的标准库中的函数和宏提供了对以空字符结尾的字符数组的支持，例如，[strlen](http://pubs.opengroup.org/onlinepubs/009695399/functions/strlen.html)迭代一个数组，`char`直到它遇到一个`'\0'`字符，而[strcpy](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcpy.html)从源字符串复制，直到它遇到一个`'\0'`.

在 C 中使用以 null 结尾的字符串反映了这样一个事实，即 C 只比汇编语言更高级一点。[当时PDP-10 和 PDP-11 的汇编语言](http://en.wikipedia.org/wiki/Null-terminated_string#History)已经直接支持零终止字符串。

值得注意的是，C 字符串的这种特性会导致很多令人讨厌的缓冲区溢出错误，包括严重的安全漏洞。例如，如果您忘记对作为源参数传递给 的字符串进行空终止`strcpy`，则该函数将继续从源字符串末尾之后的内存中复制顺序字节，直到它碰巧遇到一个`0`，可能会覆盖任何有价值的信息都跟随着目标字符串在内存中的位置。

在您的代码示例中，字符串文字“Hello, world!” 将被编译成一个 14 字节长的数组`char`。前 13 个字节将包含字母、逗号、空格和感叹号，最后一个字节将包含`'\0'`由编译器自动添加的空终止符。如果您要访问数组的最后一个元素，您会发现它等于`0`. 例如：

```
const char foo[] = "Hello, world!";
assert(foo[12] == '!');
assert(foo[13] == '\0'); 
```

但是，在您的示例中，`message`只有 10 个字节长。`strcpy`将把包括空终止符在内的所有 14 个字节写入内存，从`message`. 前 10 个字节将被写入堆栈上分配的内存`message`，其余 4 个字节将简单地写入堆栈的末尾。在这种情况下，将这四个额外字节写入堆栈的后果很难预测（在这个简单的示例中，它可能不会造成任何伤害），但在实际代码中，它通常会导致数据损坏或内存访问违规错误。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-05T14:06:36.170

中没有`string`类型`C`。您必须使用 char 数组。

顺便说一句，您的代码将不起作用，因为数组的大小应该允许整个数组适合加上一个额外的零终止字符。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-05T14:27:18.200

用你提到的语言注意它：

爪哇：

```
String str = new String("Hello"); 
```

Python：

```
str = "Hello" 
```

Java和Python都有“字符串”的概念，C没有“字符串”的概念。C 具有可以“只读”或可操作的字符数组。

C：

```
char * str = "Hello";  // the string "Hello\0" is pointed to by the character pointer
                       // str. This "string" can not be modified (read only) 
```

或者

```
char str[] = "Hello";  // the characters: 'H''e''l''l''o''\0' have been copied to the 
                       // array str. You can change them via: str[x] = 't' 
```

字符数组是一系列连续字符，末尾有一个唯一的标记字符（通常是 NULL 终止符`'\0'`）。请注意，在上述情况下，哨兵字符会自动为您附加。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-05T14:06:49.760

在 C 中，字符串只是一个字符数组，以空字节结尾。因此`char*`，当您阅读 C 代码时，a 通常发音为“字符串”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-05T14:06:04.530

C 不支持一流的字符串类型。

C++ 有 std::string

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T14:10:49.640

C 没有像 Java 那样自己的 String 数据类型。

只有我们可以使用字符数组或字符指针在 C 中声明 String 数据类型 例如：

```
 char message[10]; 
 or 
 char *message; 
```

但是您至少需要声明：

```
 char message[14]; 
```

复制“你好，世界！” 进入消息变量。

*   13：“你好，世界！”的长度
*   1 : 用于标识字符串结尾的 '\0' 空字符

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-05T14:17:44.760

首先，你不需要做所有这些。特别是，这`strcpy`是多余的 - 您不需要将字符串复制到`printf`它。您`message`可以使用该字符串来定义。

其次，您没有为“Hello, World!”留出足够的空间。字符串（`message`需要至少 14 个字符，允许空终止符多出一个）。

至于为什么，这是历史。在汇编程序中，没有字符串，只有字节、单词等。Pascal 有字符串，但静态类型存在问题，因此 -`string[20]`与`string[40]`. 即使在早期，也有一些语言可以避免这个问题，但这会导致间接和动态分配开销，这在当时更多是一个效率问题。

C 只是选择避免开销并保持非常低的水平。字符串是字符数组。数组与指向第一项的指针密切相关。当数组类型“衰减”为指针类型时，缓冲区大小信息会从静态类型中丢失，因此您不会遇到旧的 Pascal 字符串问题。

在 C++ 中，有一个`std::string`类可以避免很多这些问题 - 并且具有动态分配开销，但现在我们通常不关心这一点。无论如何，`std::string`它是一个库类——下面有 C 风格的字符数组处理。

# android - MediaRecorder 启动失败 -2147483648 在 2.3 上工作但在 4.0 上没有

> ID：14709329
> 
> 赞同：2
> 
> 时间：2013-02-05T14:04:09.970
> 
> 标签：android, service, android-mediarecorder

```
audiofile = File.createTempFile(file_name, ""+audio_format, sampleDir);
String path=Environment.getExternalStorageDirectory().getAbsolutePath();

audioSource = MediaRecorder.AudioSource.MIC;

recorder=new MediaRecorder();
recorder.setAudioSource(audioSource);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP); 
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
recorder.setOutputFile(audiofile.getAbsolutePath()); 

//recorder.prepare(); 
//recorder.start();
//Handle IOException

  recorder.prepare();

  recorder.start();
  Log.d("TAG", "recording started"); 
```

该代码在 android2.3 上完美运行，但在 4.0 上无法运行它在 recorder.start() 上给出错误，我对此完全空白任何与之相关的建议都将被接受，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T11:39:37.000

> 试试这个也许会有所帮助

```
private MediaRecorder mRecorder = null;
 private static final String LOG_TAG = "MediaAudioCapture";
 ImageButton button_audio_button = (ImageButton) findViewById(R.id.audio_button);
  button_audio_button.setOnClickListener(new OnClickListener() {
  public void onClick(View record_button) {
  ImageButton audio_button = (ImageButton) record_button;
  if (!started_note_recording) {
    if (!started_recording) {
      startRecording();
      audio_button.setImageResource(R.drawable.audio_red);
     } else {
     stopRecording();
     audio_button.setImageResource(R.drawable.audio);
     }
    }
  }
 });
private void startRecording() {
mRecorder = new MediaRecorder();
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mRecorder.setOutputFile(output.getAbsolutePath());
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
ImageButton button_audio_button = (ImageButton)findViewById(R.id.audio_button);
button_audio_button.setImageResource(R.drawable.audio);
 }
}
});
 try {
  mRecorder.prepare();
 } catch (IOException e) {
 Log.e(LOG_TAG, "prepare() failed");
}
mRecorder.start();
stopWatch.start();
} 
```

# ruby-on-rails - Gem::installerror: 'json' 本机 gem 需要安装构建工具。请更新我们的 PATH 以包含构建工具

> ID：14709334
> 
> 赞同：2
> 
> 时间：2013-02-05T14:04:21.600
> 
> 标签：ruby-on-rails, ruby, json

我使用 Railsinstaller 安装 Rails，但仍然收到此错误消息。基于关于此的其他问题，Railsinstaller 似乎应该包含 devkit 并且这个问题不应该发生。

我做错了什么？

顺便说一句，这是我将 gemfile 更改为在生产环境下包含“pg”（当然，将 sqlite 置于开发和测试环境中）然后尝试运行 bundle install -- without production 的时候。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:30:12.180

如果您使用的是 Windows，则可以在 Rubyinstaller 文档中找到有关安装 DevKit 的详细说明：

[https://github.com/oneclick/rubyinstaller/wiki/development-kit](https://github.com/oneclick/rubyinstaller/wiki/development-kit)

遵循这些说明后，本机扩展将能够构建。

**UPD**：但奇怪的是，Railsinstaller for Windows 似乎已经包含 DevKit，根据其网站。可能您只需要执行该指令中的第 4 步即可确保设置了 PATH。

如果我弄错了并且您使用的是 Mac，那么[这个答案](https://stackoverflow.com/a/12229945/693538)应该对您有所帮助。

如果你在 Linux 上，你应该只`build-essential`从你的包管理器安装。

# javascript - 在应用程序内运行 JS 代码的 Win8 Live Tile 的本地推送通知

> ID：14709338
> 
> 赞同：3
> 
> 时间：2013-02-05T14:04:31.967
> 
> 标签：javascript, windows, windows-8, winjs, live-tile

我正在尝试向我的应用程序的磁贴发送更新。这在应用程序运行时工作正常。例如，当用户单击按钮时，我可以轻松地向磁贴发送磁贴更新通知。

我无法解决的是当应用程序不工作时如何更新磁贴。我为此找到的唯一选择是使用`REST`on轮询（或推送）远程网络服务器`HTTP`。这对我来说并不理想，我无法相信这是更新磁贴的唯一方法。

理想的情况是指定一个本地 JS 文件，该文件以任何给定的时间间隔运行，比如按照 Tile 指南运行 15 分钟。

如前所述，我始终使用 JavaScript，而不是 C#。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:42:09.190

你有几个选择。您可以为您的应用程序实现一个可以更新磁贴的后台任务。有关开始使用的信息，请参阅[背景快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/hh977045.aspx)。 [GenerationApp 第 21 天](http://aka.ms/30Days)还提供了有关处理后台任务的更多信息。

另一种选择是使用推送通知。您可以阅读[推送通知的概述，](http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx)还可以查看[Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)，以轻松在云中配置通知。

# actionscript-3 - 欧芹消息处理程序不起作用

> ID：14709339
> 
> 赞同：0
> 
> 时间：2013-02-05T14:04:34.877
> 
> 标签：actionscript-3, apache-flex, event-handling, parsley

我正在使用 Flex 的 Parsley 框架创建一个示例 MVC。我有一个滑块控件 (mx:HSlider)，它将事件分派给模型以在滑块更改时执行某些操作。为此，我创建了一个自定义事件，并使用欧芹选择器来处理事件。这是代码

```
//Event
        class MyEvent extends Event
        {
        public static const MSG="msg";
    //constructor, clone method and two fields
        }

//View
    <fx:Metadata>
    [Event name="msg" type="pack1.MyEvent"]
    [ManagedEvents("msg")]
    </fx:Metadata>

    <fx:Declaration>
    <parsley:Configure/>
    </fx:Declaration>

    public function onSliderChange(event:SliderEvent):void
    {
    dispatchEvent(new MyEvent(MyEvent.MSG,event.thumbIndex,event.value);
    }

//Model
    [MessageHandler(selector="msg")]
    public function doSomething(event:MyEvent)
    {
    //code
    } 
```

现在，事件已成功发送，但未调用消息处理程序。这里有什么问题？谁能让我知道是什么问题？任何形式的帮助将不胜感激。提前致谢。

注意：我的上下文正在初始化，我的模型也正在注入。但这些事件向我展示了一些奇怪的行为。它只是没有被分派到处理程序所在的模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:31:49.837

试试这个：

```
[MessageHandler(selector="msg")] 
```

你错过了一个右括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:07:04.263

在视图类中，Parsley 不会自动“管理”视图。视图通常不会添加到 Parsley 上下文中（除非您专门将它们添加到上下文中）。因为视图可以来来去去，所以您不希望 Parsley 默认管理它们，就像使用控制器、动态命令、模型等一样。

要让 Parsley 管理视图并因此认识到它需要调用您的消息处理程序，您需要将 Parsley`<Configure />`标记添加到视图中。这使得视图分派了一个类型为“configureView”的事件。在此标签存在之前，您将在视图添加到舞台时手动调度此事件。

在你的视图中做这样的事情：

```
<fx:Declarations>
    <parsley:Configure />
</fx:Declarations> 
```

（在 Flex 3 应用程序中，您只需将`<Configure />`标签添加到视图中，也就是说，您不会将其放在声明标签中。您可以在[Parsley 文档](http://www.spicefactory.org/parsley/docs/2.1/manual/view.php)中阅读有关它的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:27:35.447

我认为在某些配置或带有欧芹事件的正常事件中存在错误，但在我的代码中，我从类中调度了多个事件，我将它们写为

```
[ManagedEvents("a","b","c")] 
```

但是在阅读了欧芹的文档后，我观察到它应该是

```
[ManagedEvents("a,b,c")] 
```

它解决了我的问题。感谢您的回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-28T18:27:39.583

您必须将视图添加到上下文中。这是唯一缺失的部分。

# execution - 为什么当我对主例程使用不同的编程语言时，执行时间会发生变化？

> ID：14709341
> 
> 赞同：0
> 
> 时间：2013-02-05T14:04:39.620
> 
> 标签：execution, ada

我正在使用物理建模。本例中的模型是用 C 编写的。当我调用模型时，我通常是从 Ada 中调用的。但是，我也尝试用 C 语言编写它，我注意到当我使用 Ada 时，模型的执行时间比使用 C 语言要多大约 30%！

有人可以解释为什么会这样吗？为什么艾达需要更长的时间。我想指出，Ada 中调用模型的主例程除了调用模型并将数据移动到大约 100 个元素的输入数组之外什么都不做。此外，模型本身的计算量很大，因此 30% 的差异非常显着。

在这两种情况下也使用相同的编译标志。当主例程用不同的语言编写时，是否应该期望有所不同。如果是这样，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:38:21.227

鉴于我们目前掌握的信息，任何答案都是猜测；但这里有一个猜测：

在某些操作系统（尤其是 Debian 和目前的衍生系统）上，Gnat 的默认安装是与默认 gcc 本身不同的 gcc 版本（gcc-4.6）。或者，如果您下载了[Gnat Libre Edition 2012](http://libre.adacore.com)，它将在您系统自己的 gcc 旁边安装自己的 gcc 版本。

在任何一种情况下，构建组合的 Ada/C 程序（例如使用 Gnatmake）可能使用了与纯 C 构建不同的 C 编译器版本；在这种情况下，速度差异很可能完全取决于不同的 C 编译器版本！

要测试这个假设，您可以 (a) 准确找出您正在使用的编译器版本 - 并在问题中命名它们！- 并且 (b) 强制纯 C 版本使用相同的编译器版本构建（例如使用 CC=gcc-4.6 标志） - 如果这是问题所在，速度差异将消失。

我的解决方案 - 这很重要 - 是从源代码构建一个新的 gcc（我目前正在使用 4.7.2），使用 --enable-languages=ada,c,c++

但是可能还有其他解决方案 - 例如，您可能需要不同的编译标志来选择相同的实际行为；不同 C 编译器版本的文档应该提供一些线索。

或者稍等片刻升级；Debian 计划将他们的 Gnat 版本重新与 gcc 的其余部分同步。有一个关键的 Ada/C 应用程序通过不兼容（具有讽刺意味的是，在其 C 部分和较新的 GCC 版本之间！）阻碍了这一过程，但该应用程序现已更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T14:54:31.190

没有一些例子，我不能说为什么。最可能的解释是代码的翻译更像是音译——因此很可能围绕 C 的低级特性进行了优化，其中包括别名倾向。

数组不应该被复制，因为 Ada 编译器足够聪明，可以在后台通过引用传递。一件可能但不应该让你慢下来的事情是 C 和 Ada 之间的接口。

* * *

*当主例程用不同的语言编写时，是否应该期望有所不同。如果是这样，为什么？*

这在很大程度上取决于例程的编写方式——如果编写它是为了利用依赖于实现的特性，那么即使在原始语言中也不能 [保证] 做同样的事情......所以我们不能，在最一般的情况，假设我们应该期望例程的时间在另一种语言中是相同的。

因此，只有在不依赖于任何实现的特质时，您的问题才有意义。

# c# - MVC 验证消息国际化

> ID：14709342
> 
> 赞同：5
> 
> 时间：2013-02-05T14:04:43.337
> 
> 标签：c#, validation, asp.net-mvc-4, internationalization

例如，我希望这个默认的 ASP.NET MVC 4 验证消息：`The value 'qsdqsdqs' is not valid for Montant`以法语显示。

我找到了这个包[http://nuget.org/packages/Microsoft.AspNet.Mvc.fr/](http://nuget.org/packages/Microsoft.AspNet.Mvc.fr/)并安装了它，但我如何让它工作？

我添加`<globalization culture="fr-FR" uiCulture="auto:fr" />`到 web.config 并引用了 dll，但消息仍然是英文的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T14:24:18.247

首先，您应该将消息保存在资源文件中，如下所示：

```
Resources/ErrorMessages.resx // default messages
Resources/ErrorMessages.fr.resx // for french 
```

在服务器端，这很容易，您可以通过向模型添加属性来实现。这样做：

```
[Required(ErrorMessageResourceType = typeof(Resources.ErrorMessages), ErrorMessageResourceName = "FieldRequired")] 
```

其中**“FieldRequired”**是**Resources.ErrorMessages中的字段之一**

棘手的部分是当您希望客户端验证也能正常工作时。比您必须创建自己的属性类来**扩展****属性**之一并**实现 IClientValidatable**。

你是这样的：

```
public class CustomRequiredAttribute : RequiredAttribute, IClientValidatable
    {
        public override string FormatErrorMessage(string name)
        {
            return String.Format(ErrorMessages.FieldRequired, name);
        } 

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            var rule = new ModelClientValidationRequiredRule(String.Format(ErrorMessages.FieldRequired, metadata.DisplayName));
            return new[] { rule };
        }
    } 
```

从现在开始，您在模型中使用 CustomRequired 而不是 Required。您也不必每次都指定消息。

**编辑**

现在我看到了您对 SynerCoder 答案的评论——您不想自己翻译消息。好吧，我认为这不是正确的方法。即使您找到可以为您翻译标准消息的内容，它也不会翻译任何自定义消息，因此您最终可能会混合使用两种方法。这通常会导致你不知道如何咬的魔法错误。我强烈建议您自己进行翻译（这没什么大不了的——大约 20 个左右？）。好处将是一个没有意外错误的灵活解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T16:38:53.823

实际使用 ResX Manager。Visual Studio 菜单工具 -> 扩展和更新 -> 在在线工具中搜索“resx”。

借助它的助手，我的所有字符串都可以像“Res.SomeTranslatedString”一样访问。现在感谢以上所有人，让我们翻译一个布尔属性的注册视图模型消息，以检查用户是否接受了条款和条件。使用上述工具，我已将字符串放入`Res.YouMustAcceptTermsAndConditions`. 然后我们修改viewmodel代码：

曾是：

```
public class RegisterViewModel
{
    [Required]
    [Range(typeof(bool), "true", "true", ErrorMessage = "You must accept terms and conditions.")]
    [Display(Name = "Agree to terms.")]
    public bool AgreeTerms { get; set; } 
```

成为：

```
public class RegisterViewModel
{
    [Required]
    [Range(typeof(bool), "true", "true", ErrorMessageResourceType = typeof(Res), ErrorMessageResourceName = "YouMustAcceptTermsAndConditions")]
    [Display(Name = "Agree to terms.")]
    public bool AgreeTerms { get; set; } 
```

现在您看到我们的 [Display] 仍未翻译。解决方案在这里：[https ://stackoverflow.com/a/3877154/7149454](https://stackoverflow.com/a/3877154/7149454)

# python - 我们可以像在 php 中那样生成 python 网页吗？

> ID：14709346
> 
> 赞同：3
> 
> 时间：2013-02-05T14:05:00.493
> 
> 标签：python, web

***我们可以用 python 语言编写（或者可能存在这样的 web 框架），我们可以像 PHP 语言一样编写 Python 和 html 标签。***

我们能不能有这样的python文件结构：

**some_python_file.py：**

```
<html>
<head>
     <title>Lol</title>
<head>
<body>
    My PyWeb Slang
</body>
</html>

<!-- this part should be python -->
<?py
    from Eternity import Kiss

    love = Kiss.Forever()
    print "%s" % love
?> 
```

对不起，我用大写字母写：**消歧：**

您可以看到，该模板在每一行中使用 {% goodies %} 或 <%= goodies %>

```
{% extends "layout.html" %}
{% block body %}
  <ul>
  {% for user in users %}
    <li><a href="{{ user.url }}">{{ user.username }}</a></li>
  {% endfor %}
  </ul>
{% endblock %} 
```

**但在 PHP 中：**

```
<div>Good Morning, Sun!</div>
<?php

     echo "Happy!";
     echo "Hi, WaterLand!";

?> 
```

**如果 Python 可以这样做，它应该是这样的：**

```
<div>Good Morning, Sun!</div>

<?py

     print "%s" % "Happy!"
     print "%s" % "Hi, WaterLand!";

?> 
```

有想法，还是我需要更明确？

谢谢你。:)

**嗯，如果是这样：**

我们可以用 mod_python 编写类似的东西（从下面扩展**[morphyn]**示例）：

```
<html>
<%
    greet = 'Hello Wee!'
    answer = 'Hello Bee!'
%>
<h1><%= greet %></h1>
<h2><%= answer %></h2>
</html> 
```

在那里你可以看到超过 2'u 行进入 <% ... %> 我们可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:06:56.767

这并不完全是您所要求的，但正确的方法是使用模板引擎。看看[Jinja2](http://jinja.pocoo.org/docs/)。[Django](https://docs.djangoproject.com/en/1.4/topics/templates/)还提供了自己的模板引擎。

**更新：**

默认情况下，Python 不能嵌入到 HTML 页面中。然而，至少有一种方法可以做到这一点。`mod_python`，Apache2 的一个模块，提供了您想要的[PSP](http://www.modpython.org/live/mod_python-3.1.2b/doc-html/pyapi-psp.html)（Python 服务器页面）功能。

```
<html>
<%
    greet = 'Hello'
%>
<h1><%= greet %></h1>
</html> 
```

请记住，混合逻辑和表示通常不是一个好主意。正如我原来的答案所述，正确的方法仍然是使用模板引擎。你可能有很好的理由去做你想做的事，但很可能没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:18:47.473

[web.py](http://webpy.org/)的工作方式与您想要的方式相似，但有点倒退。您使用 URL 来调用类，并且类可以呈现可以传递参数的模板，以便在模板呈现到 html 页面时填充内容。我认为它比[Django](https://www.djangoproject.com/)更易于使用，但如果你有很多内容一直在变化，它可能是要走的路。以下是来自 web.py 网站的代码示例，它显示了它是多么简单。

```
import web

urls = (
    '/(.*)', 'hello'
)
app = web.application(urls, globals())

class hello:        
    def GET(self, name):
        if not name: 
            name = 'World'
        return 'Hello, ' + name + '!'

if __name__ == "__main__":
    app.run() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:20:34.123

**是的：**我们可以使用**PSP**（Python 服务器页面）**[用户：morphyn 答案]**

[Paul Osman：mod_python 简介](http://goo.gl/CZ7YS)

**文章示例：**

```
<%
    a = [1,2,3,4,5,6]
    for number in a:
%>
This is a number: <%=number %> <br />
<%
    # this terminates the iteration
%>
<h1>Hello</h1> 
```

# asp.net - 使用导航属性？

> ID：14709347
> 
> 赞同：0
> 
> 时间：2013-02-05T14:05:03.940
> 
> 标签：asp.net, entity-framework, foreign-keys

我正在尝试设置外键

```
protected void AdresDetailsView_ItemInserting(object sender,     DetailsViewInsertEventArgs e)
{
    var Id = Convert.ToInt32(CustomerDropDownList.SelectedValue);
    e.Values["Customer_Id"] = Id;
} 
```

这不起作用，因为我的实体 (Adres) 没有属性 Customer_Id。
Customer_Id 是数据库中的列名，我应该使用作为导航属性的 Customer 属性。
但我不知道该怎么做。

我正在使用 EF 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:39:00.477

最简单的方法是修改导航属性以使用外键属性。这将使您的班级同时拥有 a`Customer`和`CustomerId`/ `Customer_Id`/whatever you want 的属性，它们保持同步。然后，您可以按照您现在尝试的方式更新客户 ID。但是，您没有指定您使用的 EF 版本，并且旧版本不支持外键属性。

如果外键属性不是一个选项，您需要确保具有 ID 的客户`Id`存在于您的上下文中。这将类似于`var customer = context.Customers.SingleOrDefault(c => c.Id == Id);`您可以将`Customer`属性设置为该特定客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:33:23.957

你在使用代码优先吗？如果是这样，我建议您创建自己的外键属性并使用[Fluent API](http://msdn.microsoft.com/en-us/library/ff664363%28v=PandP.50%29.aspx)来建立您的约束和关系。

# mysql - MySQL 查询使用 LIKE 和通配符来匹配除空字符串之外的任何内容

> ID：14709349
> 
> 赞同：1
> 
> 时间：2013-02-05T14:05:06.443
> 
> 标签：mysql, sql

我有一个名为 images 的表，其中有一个字段 image_filename。我注意到一些已存储的图像在文件扩展名后有字符，并且无法正确加载。所以说文件名是 image.jpg 这很好，可以忽略，但是如果文件名是 image.jpg%3fhf43h408 那么我需要删除这个图像。到目前为止，这是我的查询，试图选择所有在扩展名之后有东西的图像：

```
SELECT `images`.* FROM images
WHERE `images`.`image_filename` LIKE '%.jpg\%' 
```

即使扩展后没有任何内容，这也会返回所有图像。如何让查询仅返回扩展后有内容的图像。为了增加额外的混乱，扩展后的东西似乎总是以百分号开头，因此为什么我试图在我的查询中将其转义为文字百分号而不是通配符。我也尝试了以下方法：

```
SELECT `images`.* FROM images
WHERE `images`.`image_filename` LIKE '%.jpg\%' escape '\' 
```

但这不起作用，它只是说我有一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:42:05.247

要将反斜杠标识为转义字符，您需要使用双反斜杠来表示单个反斜杠。

您还需要一个通配符 % 来匹配字符串的其余部分。

要识别包含文字的行`'.jpg%'`，您可以使用以下命令：

```
LIKE '%.jpg\%%' ESCAPE '\\' 
```

识别不以文字结尾的列值`'.jpg'`

```
NOT LIKE '%.jpg' 
```

或者

```
NOT REGEXP '\.jpg$' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:09:01.377

返回所有`image_filename`不完全结束的行`.jpg`

```
SELECT `images`.* 
FROM images
WHERE `images`.`image_filename` NOT LIKE '%.jpg' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:09:24.813

通配符应该匹配一个字符，`_`所以试试`LIKE '%.jpg_%'`。
它应该匹配`.jpg + 1 char + anything`

这是参考：**[`LIKE`operator](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)**。

# database - 与外部/第三方呼叫的一致性

> ID：14709350
> 
> 赞同：0
> 
> 时间：2013-02-05T14:05:07.967
> 
> 标签：database, rest, twitter, architecture

我面临以下问题。我们需要调用 Twitter API 来发送状态更新，然后我们必须将记录写入本地数据库，记录此 Twitter 更新发生。

我的问题是，如果 Twitter 或数据库调用失败，我们如何确保数据一致性？如果我们更新 Twitter 并且数据库调用失败，我们将没有 Twitter 调用的本地记录，如果 Twitter 调用失败但数据库调用成功，我们将有一个错误的本地记录。

我了解显而易见的第一步，例如仅在 Twitter 调用成功时才更新数据库，反之亦然，但这只能解决一半的问题。

我想这是一个常见问题，但我尝试搜索相关信息但运气不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:13:39.290

斯蒂芬，

在任何情况下，您都会有一个 SPOF（单点故障）——这将是您的应用程序。但是，为了降低失败的风险，您可以将数据转储到队列中（任何类型的；甚至网络服务器上的 /tmpfs 就足够了），并重复尝试将其写入 DB 直到可用。

如果对 Twitter API 的调用失败，您显然可以将失败尝试的记录放到数据库中。

# ios - 我可以从另一个模态视图显示模态视图吗

> ID：14709351
> 
> 赞同：0
> 
> 时间：2013-02-05T14:05:13.037
> 
> 标签：ios, modalviewcontroller

我正在使用最新的 SDK 开发一个 iOS 应用程序。

这个应用程序有一个`UITabBarController`，`UIViewController`我想从其中一个显示`viewController1`为模态视图。

从`viewController1`和想显示`viewController2`。

我的问题是：我可以将`UIViewController`另一个模态视图显示为模态视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:09:24.620

是的，您可以....使用此代码....

将此代码放在 FirstViewController 中。

```
ViewController2 *ViewController2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];

    [self presentModalViewController:ViewController2 animated:YES]; 
```

# ios - iAd 和 Admob 集成国家/地区已添加到 App Store

> ID：14709352
> 
> 赞同：0
> 
> 时间：2013-02-05T14:05:19.660
> 
> 标签：ios, xcode, admob, iad

我正在创建一个请求 iAd 的应用程序，并在未收到 iAd 的情况下使用 Admob。

我有免费和付费版本，并使用预处理器宏来区分这些版本。

有两种可能的情况：

1.  国家/地区支持 iAds 和 Admob（使用 iAds 代码并在未收到 iAd 的情况下恢复为 Admob）
2.  国家/地区仅支持 Admob（仅使用 Admob 代码）

我了解如何处理这些情况（使用预处理器宏）。但是，如果将当前不受 iAds 支持的国家/地区添加到受支持的国家/地区列表中，是否有任何简单的方法可以让他们继续使用 iAds？

我通过阅读 Apple 文档了解到，他们不希望开发人员为不支持 iAd 的国家/地区请求 iAd。

我的计划是创建 2 个免费版本（上述每个场景 1 个）。但是，我不确定如何将一个国家从情景 2 转移到情景 1。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:58:28.853

[您是否考虑过使用AdMob 中介](http://support.google.com/admob/answer/2413211?hl=en&)等广告中介解决方案？您将获得以下好处：

1.  您不必在自己的代码中编写中介回退逻辑。
2.  服务器端流量分配 - 将流量从一个网络转移到另一个网络很简单，而无需重新发布您的应用程序。
3.  国家一级的定位。不需要两个免费版本。只需将您的广告投放管理设置为仅投放 AdMob 的默认分配，并设置国家/地区级定位（这将覆盖默认定位）以首先投放 iAd，然后在 iAd 失败时投放 AdMob。

# jquery - 简单的剑道网格实现

> ID：14709358
> 
> 赞同：0
> 
> 时间：2013-02-05T14:05:43.597
> 
> 标签：jquery, asp.net-mvc, kendo-grid

我正在尝试使用 HtmlHelper 扩展来实现 Kendo Grid

我的控制器类是“Store”，视图是“viewStores”，我正在尝试使用方法“StoreRead”绑定数据。我正在使用 Visual Studio 2012、.net 4.5 和 mvc 4 和剃须刀......

这是我的代码..

```
 public ActionResult viewStores()
{
   //return View(GetStores());
    return View();
}

public ActionResult StoreRead([DataSourceRequest] DataSourceRequest request)
 {
    return Json(GetStores().ToDataSourceResult(request));
 }

private static IEnumerable<Store> GetStores()
{
    var db_store = new AppContext();

    return db_store.Stores.Select(store => new Store
    {
        storeID = store.storeID,
        address = store.address,
        postcode = store.postcode,
        city = store.city,
        Country = store.Country
    });

} 
```

看法

```
@model KendoAspNetBundles.Models.Store

<h2>viewStores</h2>

@(Html.Kendo().Grid<KendoAspNetBundles.Models.Store>()
  .Name("Grid")
  .Columns(columns =>
{
columns.Bound(s => s.storeID);
columns.Bound(s => s.address);
columns.Bound(s => s.postcode);
columns.Bound(s => s.city);
columns.Bound(s => s.Country);
})
 .DataSource(dataSource => dataSource
   .Ajax() 
   .Read(read => read.Action("StoreRead", "Store")) 
 )
.Pageable()
 ) 
```

模型

```
 public class Store
 {
   public int storeID { get; set; }
   public string address { get; set; }
   public string postcode { get; set; }
   public string city { get; set; }
   public string Country { get; set; }
  } 
```

# javascript - 验证表单上的多个字段

> ID：14709359
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:05:45.603
> 
> 标签：javascript, jquery

我试图弄清楚如何做到这一点，以便如果第一个字段有数据，那么接下来的 2 个字段也需要有数据。是否有一种简单的方法可以对所有行执行此操作？每个字段都有一个唯一的行 ID，它们都必须是唯一的吗？

![字段](../Images/54c8abc69a7cf72600f36a580f478b6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:16:04.940

```
$(".class-for-trade-in").each(function() {
    if($(this).val() != "") {
        var input_2 = $(this).parents("td").next().find("input");
        var input_3 = $(this).parents("td").next().next().find("input");
        // Validate the two inputs
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:11:06.847

是的，所有字段都必须具有唯一的 ID。但是...您可以使用类而不是 id。只需对列中的每个元素使用相同的类。然后，您可以根据特定行内元素的类名使用 jquery 进行验证。如果您将一些代码粘贴到 jsfiddle 或类似服务上，我们可以帮助您进行编码

# linux - Linux 在同一个 CSV 文件中将一列拆分为两个不同的列

> ID：14709360
> 
> 赞同：3
> 
> 时间：2013-02-05T14:05:46.013
> 
> 标签：linux, bash, shell, sed, awk

嗨，我有一个包含以下条目的 csv 文件

```
11
22
13
,,
aa
bb
cc
,,
ww
kk
ll
,, 
```

请向我建议一个 linux 命令或脚本，它可以将此 colomun 拆分为同一文件中的 3 列，如下所示

```
11  aa  ww
22  bb  kk
13  cc  ll 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:20:08.793

你可以用`awk`.

创建一个名为 的文件`script.awk`，其内容如下：

```
BEGIN {
   line = 0; #Initialize at zero
}
/,,/ { #every time we hit the delimiter
   line = 0; #reset line to zero 
}
!/,,/{ #otherwise
   a[line] = a[line]" "$0; # Add the new input line to the output line
   line++; # increase the counter by one 
}
END {
   for (i in a )
      print a[i] # print the output
} 
```

像这样运行文件：

```
awk -f test.awk < datafile 
```

输出：

```
$ cat datafile
11
22
13
,,
aa
bb
cc
,,
ww
kk
ll
,,
$ awk -f script.awk < datafile 
 11 aa ww
 22 bb kk
 13 cc ll 
```

或者，如果您只想要一个**单线**，请执行以下操作：

```
awk 'BEGIN{line=0;}/,,/{line=0;}!/,,/{a[line++]=a[line]" "$0;}END{for (i in a ) print a[i]}' datafile 
```

**编辑：**

这将在字段之间添加逗号：

```
awk 'BEGIN{line=0;}/,,/{line=0;}!/,,/{a[line++]=a[line]?a[line]","$0:$0;}END{for (i in a ) print a[i]}' datafile
                                                              # ^ This is the part that I changed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:24:46.557

这是一个很好的疯狂的 shell 管道，它实际上做了 OP 想要的：！

```
#% cat t
11
22
13
,,
aa
bb
cc
,,
ww
kk
ll
,, 
```

然后

```
#% pr -t -3 -l 4 -s' ' t | sed '$d'
11 aa ww
22 bb kk
13 cc ll 
```

我敢肯定有更好的命令而不诉诸代码。

**编辑**感谢@user000001 提醒我的错误，让我重新审视我的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:02:16.473

这可能对您有用：

```
pr -tT3 -s\  file | sed \$d 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T02:25:05.623

用 awk

```
awk 'BEGIN {RS=",,\n"; FS="[\n]"}{ }{a=a$1" ";b=b$2" ";c=c$3" ";} END{print a"\n"b"\n"c}' temp.txt 
```

输出

```
11 aa ww
22 bb kk
13 cc ll 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T14:31:22.297

```
perl -lne 'if(/,,/){$.=0}$a{$.}=$a{$.}." ".$_ if($.!=0);END{foreach (sort keys %a){print $a{$_}}}' 
```

测试如下：

```
> cat temp
11
22
13
,,
aa
bb
cc
,,
ww
kk
ll
,,
> perl -lne 'if(/,,/){$.=0}$a{$.}=$a{$.}." ".$_ if($.!=0);END{foreach (sort keys %a){print $a{$_}}}' temp
 11 aa ww
 22 bb kk
 13 cc ll
> 
```

# jquery - jQuery Validate 插件不适用于 rules('add') 方法

> ID：14709361
> 
> 赞同：1
> 
> 时间：2013-02-05T14:05:47.043
> 
> 标签：jquery, jquery-validate

我有一个问题...我正在为 sobipro 开发一个 joomla 自定义搜索模块，它可以在特定类别中搜索，但不能在其子类别中搜索。出于这个原因，我需要验证表单并将“sid_list1”选择列表类设置为“必需”。我正在尝试使用 JQuery Validate Plugin，但它对我不起作用。我就是这样设置他的，你知道吗？

```
<script text= type='text/javascript'> 
$("#XTspSearchForm132").validate(
{
    rules:
    {
        $('.sid_list1').each(function() {
    $(this).rules('add', {
        required: true,
        messages: {
            required:  "your custom message"
        }
    });
});
</script>

<form action="/index.php" method="post"
      id="XTspSearchForm132" >
    <div class="XTsearchhome">

<div class="XTSPSearch">
  <div></div>
  <div class="spspacer" style="clear:both;"></div>
  <div id="XTSPSearchForm">
    <div class="XTSPSearchCell1">
      <div class="XTSPSearchLabel">
        <strong>Search for: </strong>
      </div>
      <div class="XTSPSearchField"><input type="text" name="sp_search_for" size="20" value="visibile"  onblur="if (this.value=='') this.value='search...';" onfocus="if (this.value=='search...') this.value='';" class="XTSPSearchBox inputboxhome" id="XTSPSearchBox132" maxlength="20"/> </div>
    </div>
    <div class="XTSPSearchCell2">
      <div class="XTSPSearchField"><input type="submit" id="XTtop_button" name="search" value="Search" class="buttonhome" onclick="this.form.sp_search_for.focus();extSearchHelper132.extractFormValues();"/> </div>
    </div>

    <div class="XTSPSearchCell3">
      <div class="XTSPSearchLabel">
        <strong>Find entries that have: </strong>
      </div>
      <div class="XTSPSearchField"><span>
<!-- RadioButton 'spsearchphrase' Output -->
<input type="radio" name="spsearchphrase" id="XTspsearchphrase_all" value="all" checked="checked" />
<label for="XTspsearchphrase_all">All words</label>
<!-- RadioButton 'spsearchphrase' End -->
</span><span>
<!-- RadioButton 'spsearchphrase' Output -->
<input type="radio" name="spsearchphrase" id="XTspsearchphrase_any" value="any" />
<label for="XTspsearchphrase_any">Any words</label>
<!-- RadioButton 'spsearchphrase' End -->
</span><span>
<!-- RadioButton 'spsearchphrase' Output -->
<input type="radio" name="spsearchphrase" id="XTspsearchphrase_exact" value="exact" />
<label for="XTspsearchphrase_exact">Exact Phrase</label>
<!-- RadioButton 'spsearchphrase' End -->
</span> </div>
    </div>
    <div class="spspacer" style="clear:both; margin-bottom: 10px;"></div>
    <div class="spspacer" style="clear:both; min-height: 2px;"></div>
    <div id="XTSPExtSearch"><div class="XTSPSearchCell4"><div class="XTSPSearchLabel"><strong>Categories:</strong></div><div class="XTSPSearchField"><select class='sid_list1' name='to_sid_list_1321' id='extparent_1321' style='margin-top:4px;'><option style="" value="" selected="selected">- Seleziona categoria -</option><option style="" value="spc55" class="spc63" >Africa del Sud</option><option style="" value="spc56" class="spc63" >Nord America e Caraibi</option><option style="" value="spc57" class="spc63" >America Centrale</option><option style="" value="spc58" class="spc63" >Sud America</option><option style="" value="spc59" class="spc63" >Isole del Pacifico</option><option style="" value="spc60" class="spc63" >Oceano Indiano</option><option style="" value="spc61" class="spc63" >Penisola Arabica</option></select><select class='sid_list2' name='to_sid_list_1322' id='extparent_1322' style='margin-top:4px;'><option style="" value="" selected="selected">- Seleziona categoria -</option><option style="" value="spc62" class="spc55" >Botswana</option><option style="" value="spc64" class="spc55" >Mauritius e Seychelles</option><option style="" value="spc65" class="spc55" >Mozambico</option><option style="" value="spc66" class="spc55" >Namibia</option><option style="" value="spc67" class="spc55" >Zimbabwe e Zambia</option><option style="" value="spc68" class="spc55" >Sudafrica</option><option style="" value="spc69" class="spc56" >Anguilla</option><option style="" value="spc70" class="spc56" >Antigua e Barbados</option><option style="" value="spc71" class="spc56" >Aruba</option><option style="" value="spc72" class="spc56" >Bahamas</option><option style="" value="spc73" class="spc56" >Bermuda</option><option style="" value="spc74" class="spc56" >Giamaica</option><option style="" value="spc75" class="spc56" >Rep Dominicana</option><option style="" value="spc76" class="spc56" >St Lucia</option><option style="" value="spc77" class="spc56" >St Martin</option><option style="" value="spc78" class="spc56" >Turks and Caicos</option><option style="" value="spc79" class="spc56" >US &amp; British Virgin Islands</option><option style="" value="spc80" class="spc56" >Canada</option><option style="" value="spc81" class="spc56" >Canouan Island</option><option style="" value="spc82" class="spc56" >Stati Uniti</option><option style="" value="spc83" class="spc57" >Belize</option><option style="" value="spc84" class="spc57" >Costa Rica</option><option style="" value="spc85" class="spc57" >Guatemala</option><option style="" value="spc86" class="spc57" >Messico</option><option style="" value="spc87" class="spc57" >Panama</option><option style="" value="spc88" class="spc58" >Equador</option><option style="" value="spc89" class="spc58" >Perù</option><option style="" value="spc90" class="spc59" >Hawaii</option><option style="" value="spc91" class="spc59" >Polinesia Francese</option><option style="" value="spc92" class="spc60" >Seishelles</option><option style="" value="spc93" class="spc60" >Mauritius</option><option style="" value="spc94" class="spc61" >Dubai</option><option style="" value="spc95" class="spc61" >Oman</option></select></div></div><div class="spspacer" style="clear:both; margin-bottom: 10px;"></div>
      <div class="XTSPSearchCell5">
        <div class="XTSPSearchLabel">
          <strong>Prodotto: </strong>
        </div>
        <div class="XTSPSearchField"><select id="XTfield_prodotto" name="field_prodotto" id="XTfield_prodotto" class="XTSPSearchSelect" >
    <option value=""> --- Select Prodotto  --- </option>
    <option value="prodotto_option_12">Noleggio auto</option>
    <option value="prodotto_option_11">Escursioni</option>
    <option value="prodotto_option_10">Soggiorni Mare</option>
    <option value="prodotto_option_9">Tour in Auto</option>
    <option value="prodotto_option_8">Tour di Gruppo</option>
    <option value="prodotto_option_7">Minitour</option>
    <option value="prodotto_option_6">Noleggio moto</option>
    <option value="prodotto_option_5">Noleggio camper</option>
</select> </div>
      </div>
      <div class="spspacer" style="clear:both; margin-bottom: 10px;"></div>
      <div class="XTSPSearchCell6">
        <div class="XTSPSearchLabel">
          <strong>Paese: </strong>
        </div>
        <div class="XTSPSearchField"><select id="XTfield_paese" name="field_paese" id="XTfield_paese" class="XTSPSearchSelect" >
    <option value=""> --- Select Paese  --- </option>
    <optgroup label="Africa del Sud">
        <option value="paese_option_7">Botswana</option>
        <option value="paese_option_10">Mauritius e Seychelles</option>
        <option value="paese_option_9">Mozambico</option>
        <option value="paese_option_11">Nambia</option>
        <option value="paese_option_12">Sudafrica</option>
        <option value="paese_option_8">Zimbawe e Zambia</option>
    </optgroup>
    <optgroup label="America Centrale">
        <option value="paese_option_18">Belize</option>
        <option value="paese_option_17">Costarica</option>
        <option value="paese_option_16">Guatemala</option>
        <option value="paese_option_15">Messico</option>
        <option value="paese_option_14">Panama</option>
    </optgroup>
    <optgroup label="Nord America e Caraibi">
        <option value="paese_option_37">Anguilla</option>
        <option value="paese_option_36">Antigua e Barbados</option>
        <option value="paese_option_35">Aruba</option>
        <option value="paese_option_34">Bahamas</option>
        <option value="paese_option_33">Bermuda</option>
        <option value="paese_option_26">Canada</option>
        <option value="paese_option_25">Canouan Island</option>
        <option value="paese_option_32">Giamaica</option>
        <option value="paese_option_31">Rep Dominicana</option>
        <option value="paese_option_30">St Lucia</option>
        <option value="paese_option_29">St Martin</option>
        <option value="paese_option_24">Stati Uniti</option>
        <option value="paese_option_28">Turks and Caicos</option>
        <option value="paese_option_27">US &amp; British Virgin Islands</option>
    </optgroup>
    <optgroup label="Oceano Indiano">
        <option value="paese_option_178">Seishelles</option>
        <option value="paese_option_177">Mauritius</option>
    </optgroup>
    <optgroup label="Pacific Islands">
        <option value="paese_option_149">Hawaii</option>
        <option value="paese_option_148">Polinesia Francese</option>
    </optgroup>
    <optgroup label="Penisola Arabica">
        <option value="paese_option_182">Dubai</option>
        <option value="paese_option_181">Oman</option>
    </optgroup>
    <optgroup label="Sud America">
        <option value="paese_option_146">Equador</option>
        <option value="paese_option_145">Perù</option>
    </optgroup>
</select> </div>
      </div>
      <div class="spspacer" style="clear:both; margin-bottom: 10px;"></div>
      <div class="XTSPSearchCell7">
        <div class="XTSPSearchLabel">
          <strong>Stile di Viaggio: </strong>
        </div>
        <div class="XTSPSearchField"><select id="XTfield_temi" name="field_temi" id="XTfield_temi" class="temi SPSearchSelect">
    <option value=""> --- Select Stile di Viaggio  --- </option>
    <option value="stile_option_13">Luna di Miele</option>
    <option value="stile_option_12">Avventure</option>
    <option value="stile_option_11">Natura e Animali</option>
    <option value="stile_option_10">Deserto</option>
    <option value="stile_option_9">Cultura e Antiche Civiltà</option>
    <option value="stile_option_8">Spiaggia Mare e Relax</option>
    <option value="stile_option_7">Sott'Acqua</option>
    <option value="stile_option_6">On the Road</option>
    <option value="stile_option_5">Shopping nelle Grandi Città</option>
    <option value="stile_option_4">Mai più Soli</option>
    <option value="stile_option_3">Spa e Benessere</option>
    <option value="stile_option_2">Famiglie</option>
</select> </div>
      </div>
      <div class="spspacer" style="clear:both; margin-bottom: 10px;"></div>
      <div class="XTSPSearchCell8">
        <div class="XTSPSearchLabel">
          <strong>Cerca nelle offerte: </strong>
        </div>
        <div class="XTSPSearchField"><div id="XTfield_offerte">
<div ><span>
<!-- CheckBox 'field_offerte[]' Output -->
<input type="checkbox" name="field_offerte[]" id="XTfield_offerte_field_offerte_option_1" value="field_offerte_option_1" class="XTSPSearchChbx" />
<label for="XTfield_offerte_field_offerte_option_1">Sì</label>
<!-- CheckBox 'field_offerte[]' End -->
</span></div></div><div class="spspacer" style="clear:both;"></div> </div>
      </div>
      <div class="spspacer" style="clear:both; margin-bottom: 10px;"></div>
    </div>
  </div>
  <div class="spspacer" style="clear:both;"></div>
  <div class="XTSPListing">
    <div class="XTSPEntriesListContainer"></div>
    <div class="spspacer" style="clear:both;"></div>
    <div class="spspacer" style="clear:both;"></div>
  </div>
</div>
<div>

<input type="hidden" id="XTSP_sid" name="sid" value="54"/>
<input type="hidden" id="XTSP_task" name="task" value="search.search"/>
<input type="hidden" id="XTSP_option" name="option" value="com_sobipro"/>

            <input type="hidden" id="sid_list132" name="sid_list" value=""/>
                    <input type="hidden" id="XTSP_Itemid" name="Itemid" value="101"/>
    </div></div>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:04:18.817

您不能将[`rules('add')`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)方法*放在*. [`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)只有在特殊情况下，您才允许在`.validate({rules:{...}})`... 这不是其中之一。

`rules('add')`是一个完全独立的方法，因此独立于`.validate()`. 这就是拥有单独方法的全部意义所在。您用于`.validate()`初始化表单，然后您可以使用其他方法进一步操作插件。

像这样做...

```
$(document).ready(function () {

    // initialize the plugin with .validate()
    $("#XTspSearchForm132").validate({
        // other rules and options
    });

    // use rules() method to add rules by class name
    $('.sid_list1').each(function () {
        $(this).rules('add', {
            required: true,
            messages: {
                required: "your custom message"
            }
        });
    });

}); 
```

**工作演示：http: [//jsfiddle.net/RtFKc/](http://jsfiddle.net/RtFKc/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-11T08:39:48.810

在我的情况下`$(this).rules('add', ...)`，通过调用它来解决和工作正常 inside `$(document).ready(...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-07T19:18:12.770

要让验证器按照假设的方式运行，您尝试验证的元素需要将属性名称设置为一个值（我猜在表单中是唯一的）。

如果我们查看您尝试验证的表单的消息和规则，您会注意到插件使用相关元素的名称作为属性的键。

我们可以通过以下行获取设置

```
$.data($("#my-form")[0], "validator").settings 
```

如果您注意到消息或规则中的条目以“”（空字符串）作为键，那么您知道您尝试验证的某些元素缺少名称属性。

[![在此处输入图像描述](../Images/a140448f4fd5ff8aef73eda46988ae2a.png)](https://i.stack.imgur.com/J7JeC.png)

由于规则或消息的键是空的，它将应用于该表单内的几乎每个输入，并且插件将显示奇怪的行为。

# android - 权限拒绝：读取 com.android.providers.contacts.CallLogProvider

> ID：14709362
> 
> 赞同：2
> 
> 时间：2013-02-05T14:05:49.707
> 
> 标签：android, exception, permissions

我在特定手机和运营商上遇到此异常：Verizon 上的三星 Galaxy S3。我已经在 Sprint 的 Evo 和 AT&T 的 Galaxy Nexus 中进行了测试，但都没有给我这个错误。我想知道电话运营商是否对现在需要额外特殊权限的操作系统进行了任何修改。我从一位拥有 Galaxy S3 的客户那里远程记录了以下堆栈跟踪：

堆栈跟踪：

```
 Permission Denial: reading com.android.providers.contacts.CallLogProvider 
uri content://call_log/calls from pid=23104, uid=10233 
requires android.permission.READ_CALL_LOG, or grantUriPermission()
java.lang.SecurityException: Permission Denial: reading 
com.android.providers.contacts.CallLogProvider 
uri content://call_log/calls from pid=23104, uid=10233 
requires android.permission.READ_CALL_LOG, or grantUriPermission()  
at android.os.Parcel.readException(Parcel.java:1430)  at 
android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:188)  at 
android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:140)  at 
android.content.ContentProviderProxy.query(ContentProviderNative.java:423)  at 
android.content.ContentResolver.query(ContentResolver.java:375)  at 
android.content.ContentResolver.query(ContentResolver.java:318) 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="xyz"
    android:installLocation="auto"
    android:versionCode="1"
    android:versionName="1" >

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.DISABLE_KEYGUARD" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_MMS" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
    <uses-permission android:name="android.permission.RECEIVE_WAP_PUSH" />
    <uses-permission android:name="android.permission.RESTART_PACKAGES" />
    <uses-permission android:name="android.permission.READ_CALL_LOG" />    
    <uses-permission android:name="android.permission.WRITE_CALL_LOG" />
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="9">
    </uses-sdk> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:21:42.420

> 允许应用程序读取用户的通话记录。
> 
> > 注意：如果您的应用使用 READ_CONTACTS 权限并且您的 minSdkVersion 和 targetSdkVersion 值都设置为 15 或更低，则系统会隐式授予您的应用此权限。如果您不需要此权限，请确保您的 targetSdkVersion 为 16 或更高版本。
> 
> 常量值：“android.permission.READ_CALL_LOG”

根据您的清单：
`<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="9"></uses-sdk>`

也许您应该尝试删除`READ_CONTACTS`权限，或设置`targetSdkVersion="9"`

来源：[Manifest.permissions #READ_CALL_LOG](http://developer.android.com/reference/android/Manifest.permission.html#READ_CALL_LOG)

# android - 在 Android 的 GridView 中访问单个项目

> ID：14709363
> 
> 赞同：0
> 
> 时间：2013-02-05T14:05:51.233
> 
> 标签：android, gridview, android-view, android-gridview

我在访问 gridview 中的单个项目时遇到问题。我有图像的网格视图。在长按单个项目时，我正在使用多模式侦听器激活 CAB 菜单。在听众内部，我能够做到

```
gridView.setVisibility(View.GONE); 
```

但我无法做到这一点，它给出了 NULL 指针异常

```
gridView.getChildAt(position).setVisibility(View.GONE); 
```

我也试过这个：

```
ViewGroup gridChild = (ViewGroup) gridView.getChildAt(1);
int childSize = gridChild.getChildCount();
for(int k = 0; k < childSize; k++) {
 if( gridChild.getChildAt(k) instanceof ImageView ) {
      gridChild.getChildAt(k).setVisibility(View.GONE);
 }
} 
```

我该如何克服呢？

更新：

在我的 Adapter getView() 方法中：

```
 imageview.setOnTouchListener(new OnTouchListener(){
@Override
public boolean onTouch(View v, MotionEvent event) {
    overlay.setVisibility(View.VISIBLE);
    imageview.setBackgroundColor(Color.parseColor("#f9a49c"));
    return false;
}}); 
```

我在这里要做的是，我只想在点击时更改背景颜色。但是当前视图中最后一个元素的颜色正在改变。而且在新闻发布后也不会留下来。它只是在按下后熄灭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:54:40.833

在适配器的`getView()`方法中，您应该将视图设置为可见或不可见，具体取决于支持适配器的数据的状态。

您不应该假设每个项目都有一个独特的视图，适配器通常会重用滚动时离开屏幕的项目的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:44:11.853

您可以尝试通知适配器

```
if( gridChild.getChildAt(k) instanceof ImageView ) {

gridChild.getChildAt(k).setVisibility(View.GONE);

notifyDataSetChanged();
} 
```

# asp.net - 特定要求的应用程序 - ASP.NET MVC 4、EF 5、Database First、Web API

> ID：14709367
> 
> 赞同：3
> 
> 时间：2013-02-05T14:06:05.220
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api, entity-framework-5

我做了一些深入的谷歌搜索，但显然不够深入。我正在任何具有以下规范的代码存储库中寻找示例应用程序。任何可以为我指明正确方向的人的疯狂道具，因为我通常不会发现自己在寻找蛇和/或独角兽。

*   .NET 4.5
*   英孚 5
*   数据库优先
*   Web API 集成
*   其他要求 - 至少 3 个应用层，DI

再次感谢任何拥有或知道这个小曲子在哪里的人。

( ;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:22:23.387

我目前正在尝试提出类似的设置，这是我可以推荐的：

1.  回到 asp.net 并查看所涉及的各种原则（ASP .NET API、EF 等），看看如何设计一个 mashup。到目前为止，这似乎对我有用。
2.  我刚遇到[这个。](http://jaydata.org/blog/prepare-an-asp.net-web-api-project-with-ef-database)他们似乎实现了您可能正在努力解决的问题。

快乐编码。

# jsp - jsp 页面中的 Ajax 无法在 Internet Explorer 9 上运行

> ID：14709368
> 
> 赞同：1
> 
> 时间：2013-02-05T14:06:08.807
> 
> 标签：jsp, jquery

我正在开发基于 Web 的应用程序，我正在使用 JSP 创建一个应用程序，使用 ajax 从 Mysql 数据库获取数据。该代码在其他浏览器上运行良好，但在 Internet Explorer-9 上运行不正常。
我如何在 Internet Explorer 上顺利运行它。请在这方面帮助我。代码如下：

```
function getwords2(val)
  {document.getElementById("getcharter1").style.display ='block';
   if (val=="")
  {document.getElementById("getcharter1").innerHTML="";
  return;
}if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }xmlhttp.onreadystatechange=function()
  {  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {       document.getElementById("getcharter1").innerHTML=xmlhttp.responseText;
  }  }xmlhttp.open("GET","getvalue.jsp?ch="+document.FM.val.value+"&w1=2",true);
xmlhttp.send();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:14:14.537

按`F12`然后按`Alt`+ `7`。

如果这有效，您应该添加一个元标记以降级到 quirks-mode ie7

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:10:39.703

你真的需要给我们更多的细节，而不是“它不能正常工作”。也就是说，如果您在使用 IE9 时遇到 AJAX 问题，那几乎肯定是与**HTTPS**相关的。

[https://www.parse.com/questions/internet-explorer-and-the-javascript-sdk](https://www.parse.com/questions/internet-explorer-and-the-javascript-sdk)

# ruby - 客户端-服务器和 NO-IP（红宝石）

> ID：14709374
> 
> 赞同：0
> 
> 时间：2013-02-05T14:06:22.780
> 
> 标签：ruby, sockets, client-server

我正在尝试通过[no-ip连接一个简单的 Ruby 客户端-服务器（](http://www.noip.com/)*套接字*）

**代码**：> **服务器**

```
 #!/usr/bin/ruby
 require 'socket'

 puts "Server run..."
 server = TCPServer.new('',5000)
 while (session = server.accept)
   Thread.start do
       session.puts "ok"
       session.close
   end  
 end 
```

**代码**：> **客户端**

```
#!/usr/bin/env ruby
require 'socket'

clientSession = TCPSocket.new( "xxx.xxx.xxx.xxx.", 5000)
while !(clientSession.closed?) && (serverMessage = clientSession.gets)
  if serverMessage =~/ok/
    puts "connect"
  end
end 
```

**连接**：

[连接图像](http://www.subirimagenes.com/otros-connections-8281306.html)

***图表说明***

> **PC1**：运行在 5000 端口的 Ruby 服务器
> 
> **PC2**：Ruby 客户端正在运行
> 
> **ROUTER**：映射以将连接重定向到 PC1（*服务器*）端口 5000
> 
> **NO-IP**：配置为将连接重定向到我的公共 IP（*路由器*）端口 5000
> 
> **VPN**：来自瑞典的 IP，用于模拟来自*WAN的连接*
> 
> *两台电脑都在*本地网络上*

**第一次测试**（*绿色箭头*）//没有*IP的**客户端服务器*

 **使用我的公共 IP 和端口 5000 配置客户端*

```
TCPSocket.new( "xxx.xxx.xxx.xxx.", 5000) 
```

> **PC2**运行客户端**=>**连接到**VPN** **=>**连接到**ROUTER** **=>**重定向到**PC1**（*服务器*）**=>** **PC1**响应“ *ok* ” **=>** *采用相同的方式返回* **=>**穿上**PC2** “ *connect* ”#***工作***

**第二次测试**（*蓝色箭头*）//在没有*客户端*的情况下从浏览器测试*no-ip*

 **假设这是我的无 IP 地址：test.no-ip.org*

> **PC2**从**浏览器**打开*test.no-ip.org* **=>**连接到**VPN** **=>**连接到**NO-IP** **=>**连接到**ROUTER** **=>**重定向到**PC1**（*服务器*）**=>** **PC1**响应“ *ok* ” **=>***采用相同的方式back* **=>在***浏览器*上输入“ok”并将*test.no-ip-org*更改为*xxx.xxx.xxx.xxx.:5000* # ***work***

 *********第三次测试**（*红色箭头*）//*没有IP的*客户*端服务器*

 **使用 no-ip 配置客户端*

```
TCPSocket.new ("test.no-ip.org", 80) 
```

> **PC2**运行*客户端*.....没有任何反应...#***不起作用***

* * *

有任何想法吗？

谢谢。**********

# android - 扩展文件实现

> ID：14709377
> 
> 赞同：1
> 
> 时间：2013-02-05T14:06:26.047
> 
> 标签：android, project, apk-expansion-files

自从我尝试在我的应用程序中实现扩展文件以来已经有两个星期了。该应用程序只需要恢复一些图像，当我尝试在本地执行时我有点卡住了。
我可以使用这种代码访问我的 .zip 的路径：

```
String path = Environment.getExternalStorageDirectory() + "/expansionfile.zip" 
```

我也可以用下面的代码解压它：

```
Decompress d = new Decompress(zipFilename, unzipLocation);
d.unzip();` 
```

但是我无法在不解压缩文件的情况下访问我的数据（解压缩所有图像需要大约 30 秒）。此外，我不能再在我的代码中将图像用作可绘制对象，例如 (R.Drawable.x)，这非常麻烦，因为在导出图像之前，我像这样使用它们在 ImageView 中显示它们：

```
public static int[] images = {R.drawable.1, R.drawable.2 }; 
```

如果我把别的东西作为一个整数，它就行不通了。
是否有一些关于扩展文件或其他我可以依赖的示例项目？（我尝试阅读 Android 开发者指南，但它让我更加困惑）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:53:44.983

好的，解决方案是我只需要使用这个： `Drawable.createFromStream(expansionFile.getInputStream("image1.png"), "src")`

# hibernate - Hibernate 在 Session.createQuery 上使 jvm 崩溃

> ID：14709381
> 
> 赞同：0
> 
> 时间：2013-02-05T14:06:36.897
> 
> 标签：hibernate, crash, jvm

好吧，这让我难住了。我有一个在 websphere 上运行的 RAD 中的 webapp 项目，它使用对包含所有模型代码（包括我的休眠逻辑）的 lib 项目的项目引用。lib 目录的 Junit 测试工作正常。webapp 项目中的 junit 测试，但在 J2EE 容器之外运行正常。然而，一旦我们在 J2EE 容器中运行，同样的代码会使 JVM 崩溃。

请注意，并非所有代码都这样做。更新工作正常。然而，一个石英进程在 session.createQuery 上终止，并且一个 Web 服务调用在 createQuery 上终止。当我说“死”时，我的意思是整个 JVM 关闭并将以下转储信息喷入控制台：

```
Unhandled exception
Type=Unhandled trap vmState=0x00040000
J9Generic_Signal_Number=00000040 ExceptionCode=c00000fd ExceptionAddress=003A065D ContextFlags=0001007f
Handler1=0037A0C0 Handler2=003DC000
EDI=0037F178 ESI=26EDEB30 EAX=26EDEC00 EBX=00006030
ECX=33594900 EDX=33594900
EIP=003A065D ESP=2DB63000 EBP=002B2828 EFLAGS=00010206
GS=002B FS=0053 ES=002B DS=002B
Module=C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\jre\bin\j9vm24.dll
Module_base_address=00370000 Offset_in_DLL=0003065d
Target=2_40_20110216_075791 (Windows 7 6.1 build 7601 Service Pack 1)
CPU=x86 (4 logical CPUs) (0x1f890f000 RAM)
----------- Stack Backtrace ----------- 
```

查询似乎是正确的（正如我所说，它们在 j2ee 容器之外工作）。如果有帮助，这里是其中之一：

```
Query sql = s.createQuery("from Type t where t.typeCode=? and t.applicationCode=? "); 
```

我们以前从未见过这种情况，也没有得到很多 Goggle 的牵引力。我们在 Windows 7、RAD 8、WAS 7.0.0.17、Hibernate 4.1.9、DB2 XA 数据源上，我认为这并不重要，但我们已经将 org.springframework.orm.hibernate4.HibernateTransactionManager 配置为我们的事务经理。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:30:16.113

解决。这是交易 - 这只会在调试模式下发生。在运行模式下，我们实际上在 antlr 类上得到了 NoClassDefError。我们未能将 antler 移动到 web-inf/lib 中，但它位于 lib 项目的依赖项中，这就是 Junit 运行的原因。一旦复制过这个问题就消失了。我猜 antlr 是 Hibernate 的依赖项。

这里最大的谜团是为什么调试器会融化 JVM，而不是给出一个可以让我们有机会解决问题的异常，但我们已经解决了问题。

# unix - 如何从 unix 中的巨大文本文件中获取一些特定的行？

> ID：14709384
> 
> 赞同：19
> 
> 时间：2013-02-05T14:06:49.113
> 
> 标签：unix

我使用基于分隔文本文件的导入系统。使用的文件有时可能几乎 2 Gb 大，我必须检查该文件中的一些行。所以我想知道如何输出（在另一个文件上，或者只是在屏幕上）特定值的行？例如，行号 1010123、1002451、994123 等，与源文件中的完全相同吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-05T14:11:17.707

要打印 line `N`，请使用：

```
sed 'Nq;d' file 
```

要打印多行（假设它们按升序排列），例如 994123、1002451、1010123：

```
sed '994123p;1002451p;1010123q;d' file 
```

最后`q`一行之后的数字告诉`sed`当它到达第 1010123 行时退出，而不是通过循环遍历我们不感兴趣的剩余行来浪费时间。这就是为什么它对大文件有效的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T14:11:10.963

您可以使用许多 Unix 工具来做到这一点，例如`awk`：

```
# print first 5 lines with awk
awk 'NR>=1&&NR<=5{print}NR>=6{exit}' file

# print selection of lines 
awk 'NR==994123||NR==1002451||NR==1010123{print}NR>1010123{exit}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:16:32.883

在蟒蛇中：

```
readThisFile = open('YOURFILE')
outputFile = open('OUTPUT', w)

for actualline, linetext in enumerate(readThisFile):
    if actualline == WANTEDLINE
        outputFile.write(linetext)
    else:
        pass 
```

如果需要，您可以修改该脚本以使用参数（如 getline.py 1234）

# ravendb - 第一次 RavenDB 2.0 备份：无法加载文件或程序集 Raven.Abstractions

> ID：14709386
> 
> 赞同：3
> 
> 时间：2013-02-05T14:06:50.353
> 
> 标签：ravendb

自从升级到 RavenDB 2.0 以来，我第一次运行我的 RavenDB 备份批处理文件。

**这是命令：**

> C:>"C:\Program Files (x86)\RavenDB\RavenDB-Build-2230\Backup\Raven.Backup.exe" --url `http://localhost:8080`--dest="c:\temp\RavenBackup"

**这是错误：**

> System.IO.FileNotFoundException：无法加载文件或程序集“Raven.Abstractions，Version=2.0.0.0，Culture=neutral，PublicKeyToken=37f41c7f99471593”或其依赖项之一。该系统找不到指定的文件。

我检查了 RavenDB.net，备份过程看起来与之前的 RavenDB 2.0 相同。我错过了什么？我可以开始在 RavenDB 文件夹结构中移动程序集，但我认为这不是一个好主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:28:22.793

您需要在 Raven.Backup.exe 文件旁边有 Raven.Abstractions.dll。

# java - 等待() 和 NotifyAll()

> ID：14709396
> 
> 赞同：1
> 
> 时间：2013-02-05T14:07:20.883
> 
> 标签：java, multithreading

```
class SimpleConsumer extends Threads {
        public SyncQueue q;
        SimpleConsumer(SyncQueue q) { this.q = q; }
        public void run () { doit(); }
        public synchronized void doit() {
            while(true){
                try{
                    while(q.isEmpty()) { wait(); }
                    System.out.println((String)q.Dequeue());
                } 
                catch (Exception e) { System.out.println("Got exception:" +e); }
            }
        }    
    } 
```

而且我有另一个类将项目添加到同一个对象 SyncQueue 并执行 notifyAll();

```
class SimpleProducer extends Threads {
public SyncQueue q;
SimpleProducer(SyncQueue q) { this.q = q; }
public void run() { doit(); }
public synchronized void doit() {
    while(true){
        try{
            sleep(1000);
            q.Enqueue("Item");
            notifyAll();
            } catch(Exception e) { System.out.println("Got exception:" +e); }
        }
    }
}
} 
```

如果我从不同的类方法执行 notifyAll()，SimpleConsumer 会唤醒吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:11:57.500

您正在等待并通知 2 个不同的对象 - 因此它们不会互相交谈。您需要使用一个公共对象并在该公共对象上调用`wait`和`notifyAll`方法。

例如：

```
class SimpleConsumer extends Threads {
    private final SyncQueue q;

    SimpleConsumer(SyncQueue q) {
        this.q = q;
    }

    public void doit() {
        while(true){
            try{
                synchronized(q) {
                    while(q.isEmpty()) { q.wait(); }
                    System.out.println((String)q.Dequeue());
                }
            } 
            catch (Exception e) { System.out.println("Got exception:" +e); }
        }
    }    
} 
```

笔记：

*   我已将`q`其设为私有和最终以确保引用不会在外部更改。
*   同步块的监视器现在队列本身而不是`this`.

# javascript - 带有 node.js 管道接收器的 ZeroMQ 会在一段时间后停止接收消息

> ID：14709398
> 
> 赞同：9
> 
> 时间：2013-02-05T14:07:24.003
> 
> 标签：javascript, node.js, zeromq, pipeline

我一直在尝试设置呼吸机/工作人员/接收器模式以抓取页面，但我从未通过测试阶段。我的设置的一个特殊之处是水槽与呼吸机处于相同的过程中。所有节点都使用 ipc:// 传输。目前只交换测试消息。呼吸机发送任务，工作人员接收并等待，然后向接收器发送确认。

**症状**：一段时间后（通常少于 5 分钟），接收器停止接收确认消息，即使呼吸机继续发送任务并且工作人员继续接收它们并发送确认消息。

我知道发送了确认，因为如果我重新启动接收器，它会在启动时获取所有丢失的消息。

我认为 ZeroMQ 处理自动重新连接。

*呼吸机/水槽*

```
var push = zmq.socket('push');
var sink = zmq.socket('pull');
var pi = 0;
setInterval(function() {
    push.send(['ping', pi++], zmq.ZMQ_SNDMORE);
    push.send('end');
}, 2000);
push.bind('ipc://crawl.ipc');
sink.bind('ipc://crawl-sink.ipc');
sink.on('message', function() {
    var args = [].slice.apply(arguments).map(function(e) {return e.toString()});
    console.log('got message', args.join(' '));
}); 
```

*worker.js*

```
var pull = zmq.socket('pull');
var sink = zmq.socket('push');
sink.connect(opt.sink);
pull.connect(opt.push);

pull.on('message', function() {
    var args = [].slice.apply(arguments).map(function(e) {return e.toString()});
    console.log('got job ', args.join(' '));
    setTimeout(function() {
        console.log('job done ', args.join(' '));
        sink.send(['job done', args.join(' ')]);
    }, Math.random() * 5 * 1000);
}); 
```

**编辑**我尝试将接收器移动到另一个进程，它似乎工作。但是，我真的希望它生活在同一个进程中，并且在每个进程处理多个 zmq 套接字时，我观察到了类似的行为，而不管使用的模式如何

**编辑**我正在使用这个模块[https://github.com/JustinTulloss/zeromq.node](https://github.com/JustinTulloss/zeromq.node)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:16:11.353

我不一定期望这个答案会被接受，但我将其放在这里以供参考。有一个非常忠实*的仅节点*模块，称为[Axon](https://github.com/visionmedia/axon)，它的灵感来自 ZeroMQ。

*   Axon 没有编译依赖，并重新创建与 ZeroMQ 相同的套接字类型。
*   Axon 还基于 pub/sub 套接字类型来创建网络事件发射器。
*   最后，ZMQ 的 req/rep 套接字不适用于 Node.js，因为 ZMQ 期望回复同步发生。作为原生节点，Axon 库可以正确处理 req/rep 模式。

**注意：** ZMQ 和 Axon 不可互操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T20:46:53.343

不确定您使用的是基本 AMQP 客户端，还是使用它的包，我在使用 RabbitMQ 时遇到了类似的问题。实际进程仍在运行（setInterval 有效）

我正在通过主进程中的 cluster.fork 运行我的服务/工作人员......主进程中有监听器在退出时重新启动工作人员/服务......在我的工作人员内部，我有一个每 X 秒运行一次的 setInterval ，如果在那段时间没有完成任何工作，我有我的工作进程.exit（主进程侦听器将启动一个新的分叉）。这对我来说是足够的弹性。通过让几个工作人员运行（侦听队列），工作仍然可以完成。

正如另一位建议的那样，我一直在考虑切换到 Axon，因为我与 MQ 的所有接口目前都通过 Node.js 进行。我的其他系统通过 NodeJS 驱动的 API 服务进行交互。就此而言，通过 API 服务公开您可能需要的内容可能不会太难。

# doctrine-orm - 使用连接表将 SQL 转换为 DQL (Doctrine2)

> ID：14709399
> 
> 赞同：1
> 
> 时间：2013-02-05T14:07:31.220
> 
> 标签：doctrine-orm, dql, jointable

*存在类似的问题，但我发现没有提到静默连接表问题。*

我有一个带有连接的简单 SQL 查询，但由于这个连接表，无法将其转换为 DQL。有两个实体，**Shop 和 Client**，由 ManyToMany 关联链接。

Doctrine2 默默地做了一个连接表：`shop_client`.

现在，如果我想获得**不属于给定商店的所有客户，**我很简单：

```
SELECT c.name FROM `client` AS c
JOIN `shop_client` AS sc
    ON sc.client_id = c.id
    AND sc.shop_id != :shop_id 
```

这很简单，真的很容易，但我想不出 DQL 版本。

我尝试使用“EXISTS”、“NOT IN”、“SIZE”，但永远无法得到有效的 DQL 查询。

**编辑：**我的商店实体有一个`clients`字段，但客户实体没有`shops`字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:15:50.697

```
SELECT
    c
FROM
    Client c
WHERE
    c.id IN (
        SELECT
            c2.id
        FROM
            Shop s2
        JOIN
            s2.clients c2
        WHERE
            s2.id != :shopId
    ) 
```

此外，请考虑在没有实体定义的情况下构建此类查询就像在黑暗中射击。下次将问题与问题一起发布。

# java - Android java.lang.NullPointer。错误的路径 Eclipse Juno - JDK7？

> ID：14709405
> 
> 赞同：0
> 
> 时间：2013-02-05T14:07:48.503
> 
> 标签：java, android, eclipse, path

无法在 Eclipse 中运行我的小 Android 代码，我收到以下错误消息：

E/AndroidRuntime(275)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.mytest.threedee/com.mytest.threedee.MainActivity}： **java.lang.NullPointerException**

还有哪些信息可能会有所帮助？我猜我的代码无关紧要，因为 Eclipse 甚至无法开始执行它。我确实 import java.lang.math.* 为什么说它是“空指针”？编辑器不会将我的数学函数标记为任何错误。我想这是 Eclipse 的一些模糊路径问题。

Project/properties/Order and Export 仅列出： - 2Dto3D/src（2Dto3D 是我的项目名称） - 2Dto3D/gen - Android 4.2 - Android Dependencies

那里可能还有更多东西吗？

在源选项卡下，它显示“本机库位置：（无）”。听起来很糟糕，不是吗？

我有： Windows 7、64 位 已经为移动开发人员下载了 java JDK 7、64 位 Eclipse Juno 版本 1 尝试在虚拟设备 API 8 上运行我的代码

**还有我的代码（测试计算的开始）：（** 对不起，导入块不会进入代码格式这里）

包 com.mytest.threedee；

导入 com.mytest.threedee.R；导入android.app.Activity；导入android.os.Bundle；导入 android.view.Menu；导入 android.widget.TextView；导入静态 java.lang.Math.*；

公共类 MainActivity 扩展 Activity {

```
static final double pixPerRad = 4850;
static final double center2Dhor = 276.6;
static final double center2Dver = 293.7;
static final double short2D = 426.3;
static final double long2D = 2719.3;
static final double tilt2D = -0.2557;

double minor, major, MSC, CSL; // angles
double CM, MS, ML, CL; // distances
double gQJ, gVQ, gQL, gHL, gVL, gMLV, gCLQ; // temporary guessing variables
double[] gCQ, gmajor; // guessing variables whose guess values will be stored

String[] gmajor_Text;
String[] gCQ_Text;

TextView text1 = null;
TextView text2 = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text1 = (TextView)findViewById(R.id.textView1);
    text2 = (TextView)findViewById(R.id.textView2);

    minor = short2D/pixPerRad;
    major = long2D/pixPerRad;

    MS = 1/asin(minor); 
    ML = MS; 
    CM = sqrt(MS*MS - 1);
    CL = MS - ML;

    // Guessing triangle VQJ:

    for (int i=0; i<2; i++)
    {       
    gCQ[i] = i/3; // First two guesses

    // Side QJ:

    gQJ = sqrt(1 - gCQ[i]*gCQ[i]);

    // Side VQ:

    gQL = sqrt(CL*CL + gCQ[i]*gCQ[i]);
    gCLQ = asin(gCQ[i]/gQL);
    gMLV = gCLQ;
    gHL = ML*cos(gMLV); 
    gVL = 2*gHL;
    gVQ = gVL - gQL;

    // major angle resulting from guess:

    gmajor[i] = 2 * atan(gQJ/gVQ);

    gmajor_Text[i] = String.valueOf(gmajor);
    gCQ_Text[i] = String.valueOf(gCQ);

    }//END for i
    text1.setText(gmajor_Text[0]);
    text2.setText(gCQ_Text[1]);

}//END onCreate

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}//END MainActivity

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:29:17.453

你还没有初始化你的数组

```
double[] gCQ;
// later, you use it as is
gCQ[i] = i/3; 
```

您应该在`onCreate()`内部或外部初始化

```
gCQ = new double[size]; 
```

同样适用于你`double[]`和`String[]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:24:55.970

不确定您的崩溃是否是由于您拥有 1.7，但我认为 Android SDK 仅支持 Jdk 1.6。

不确定这是否有效，但这里有一个类似内容的链接： [Android SDK 可以与 JDK 1.7 一起使用吗？](https://stackoverflow.com/questions/8578441/can-the-android-sdk-work-with-jdk-1-7)

# php - 在拥挤的网站中存储页面点击的更好方法

> ID：14709411
> 
> 赞同：3
> 
> 时间：2013-02-05T14:08:09.900
> 
> 标签：php

我的网站流量太多，我想添加一个点击计数器。有什么更好的存储方法？我有 2 个选项
1- 创建数据库并将命中存储在
。2-创建本地 txt 文件并将命中存储在。
服务器已经超载，那么什么会更好地避免对服务器造成更大的压力？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:09:38.467

为避免服务器上的进一步负载，请使用[Google Analytics](http://www.google.com/analytics/)和[Statcounter](http://statcounter.com)等外部服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T14:11:45.753

如果您不想使用外部服务，最好的选择是 NoSQL 数据库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T14:16:22.667

替代 PHP 缓存 (APC) 将是一种选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T14:10:42.443

我**不会**使用文件。

如果服务器已经处于高负载状态，如果添加额外的并发文件（读/写）访问，情况会变得更糟

我确认@Antonys 的回答。它将统计工作委托给客户端而不是服务器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-05T14:12:45.210

这也是您的另一个选择 [https://www.kissmetrics.com/](https://www.kissmetrics.com/)

# css - JavaFX 2.2 - 在 ListCell 中隐藏 progressIndicator 的百分比

> ID：14709414
> 
> 赞同：5
> 
> 时间：2013-02-05T14:08:23.730
> 
> 标签：css, javafx-2

我有一个 ListCell，在其中显示 ProgressIndicator 下载文件的进度信息。

我的问题是删除指标下方显示的百分比信息。[如此处](https://forums.oracle.com/forums/thread.jspa?threadID=2331635)所述，我在我的 css 中包含了如下规则：

```
.customProgressIndicator .percentage{
    visibility: hidden;
    -fx-text-background-color: red;
} 
```

这`-fx-text-background-color: red`部分只是为了确保我们的 css 应用于节点。

问题是，我打了一个电话`indicator.setProgress(progress)`，百分比变得可见（红色），当我将光标悬停在指示器上时，它又变得不可见。最后，“完成”文本在调用时在底部变为可见`indicator.setProgress(1.0)`，并且在悬停后再次变为不可见。

它可能与`ListView`因为; 悬停并使其变得不可见后，如果我从 中删除一个项目`List`并导致`updateItem`on `ListCell`，它再次变得可见。

我尝试了一种解决方法：

```
 Text text = (Text)indicator.lookup(".percentage");
    if ( text != null )
    {
        text.setText("");
    } 
```

但`text`有时为空，有时不是**。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T14:53:05.733

笔记：

1）我阅读了您链接的帖子，并且 OP 含蓄地确认该帖子`visibility: hidden;`为他/她工作。但是我测试了相同的代码，但它不起作用。可能是因为版本不同。我不知道。

2)`-fx-text-background-color`不是 CSS 属性。它是 caspian.css 中的预定义颜色。所以改变它你隐含地改变百分比标签的颜色，定义为默认值

```
.progress-indicator .percentage {
    -fx-font-size: 0.916667em; /* 11pt - 1 less than the default font */
    -fx-fill: -fx-text-background-color;
} 
```

caspian.css 的。（注意`-fx-text-background-color`以上）

3）最后可以通过

```
.customProgressIndicator .percentage {
    -fx-fill: null;
} 
```

PS 我没有在列表视图中测试进度指示器。

# android - bin文件夹中的apk文件和Eclipse中通过Export选项创建的apk文件有什么区别？

> ID：14709417
> 
> 赞同：4
> 
> 时间：2013-02-05T14:08:29.987
> 
> 标签：android, eclipse, apk, bin, eclipse-adt

bin文件夹中的apk文件和Eclipse中通过Export选项创建的apk文件有什么区别？

出于调试目的，我可以直接使用bin文件夹中的文件吗？还是建议始终“导出” apk 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:12:39.110

文件夹中的Apk`bin`使用用于调试的虚拟密钥（调试密钥）进行签名。使用导出工具，您可以指定自己的唯一密钥（受密码保护）来识别您的应用程序。因此，对于测试和调试，您可以直接使用`bin`文件夹中的那个。但是，对于发布，您必须使用自己的密钥（通过导出工具）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T14:17:10.093

当您使用该工具导出时，它会执行额外的步骤来打包您的 APK。这包括运行 Proguard、Zipalign 和使用您自己的密钥签署您的应用程序。

这些优化步骤都没有对bin目录下的APK执行，但是如果你不关心这个，你可以使用那个进行测试。

您需要使用自己的私钥对您的应用程序进行签名，以便将其发布到 Play 市场 - 并确保永远不会丢失密钥，因为您每次发布时都需要使用相同的密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:13:01.667

bin 文件夹中的一个是 APK 的未签名版本。此 APK 无法发布到 Play 商店，因为它需要 APK 进行自签名。

当您从 Eclipse 导出 APK 时，您应该选择签名版本，它将引导您完成创建/签名 APK 以进行发布的必要步骤

# ios - 添加多个 NSDecimalNumber

> ID：14709419
> 
> 赞同：1
> 
> 时间：2013-02-05T14:08:33.567
> 
> 标签：ios, nsdecimalnumber

这样做的最佳做法是什么：

我有一个 NSDecimalNumbers 数组，我需要将它们加在一起。

我打算设置一个基数，然后循环并将每个后续数字添加到基数......有点像这样：

```
 NSDecimalNumber* baseNumber = [[NSDecimalNumber alloc] initWithString:[NSString stringWithFormat:@"%f", 0.0]];

    for(int i=0; i<itemsToAdd.count; i++) {
        NSDecimalNumber* thisNumber = [itemsToAdd objectAtIndex:i];
        [baseNumber decimalNumberByAdding:thisNumber];
    }

NSLog(@"%@", baseNumber); 
```

但我一直得到 0 的总数。我认为 baseNumber 会增加。明显不是。:D 这是我正在使用的一批数字之一，它们总计为 81649.64。

```
2013-02-05 08:58:50.833 EUS Calculator[37430:c07] 4905.6
2013-02-05 08:58:50.834 EUS Calculator[37430:c07] 13850.88
2013-02-05 08:58:50.834 EUS Calculator[37430:c07] 43246.08
2013-02-05 08:58:50.835 EUS Calculator[37430:c07] 19944.96
2013-02-05 08:58:50.835 EUS Calculator[37430:c07] 412.8
2013-02-05 08:58:50.835 EUS Calculator[37430:c07] 289.92
2013-02-05 08:58:50.836 EUS Calculator[37430:c07] 0 
```

如何添加一批 NSDecimalNumbers？我最终会将这些转换为货币字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:12:33.127

`NSDecimalNumber`是一个不可变的类。也就是说，一旦构建，实例就不会改变。该消息`decimalNumberByAdding:`返回一个新号码。因此，您每次都需要记录新实例。以下代码应该可以工作。

```
NSDecimalNumber* baseNumber = [NSDecimalNumber zero];

for (int i = 0; i < itemsToAdd.count; i++)
{
    baseNumber = [baseNumber decimalNumberByAdding:[itemsToAdd objectAtIndex:i]];
}

NSLog(@"%@", baseNumber); 
```

请记住，`retain`如果`baseNumber`您不使用 ARC 并希望它在下一个自动释放池排水管之外徘徊。

# javascript - 由于 getWidthOrHeight 函数，jQuery 无响应脚本

> ID：14709420
> 
> 赞同：2
> 
> 时间：2013-02-05T14:08:34.463
> 
> 标签：javascript, jquery

在过去的几周里，我和我的用户收到了以下消息。仅在 Firefox 中发生。

> 警告：无响应的脚本
> 
> 此页面上的脚本可能正忙，或者它可能已停止响应。您现在可以停止 >script，在调试器中打开脚本，或者让脚本继续运行。
> 
> 脚本：[http ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js:6803](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js:6803)

我尝试用 1.7.2 替换 jQuery 1.7.1，但没有帮助。仍然收到消息。该行引用了一个名为 getWidthOrHeight 的函数。在调试时，我无法找到代码的任何问题。

```
function getWidthOrHeight( elem, name, extra ) {

// Start with offset property
var val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
    i = name === "width" ? 1 : 0,
    len = 4;

if ( val > 0 ) {
    if ( extra !== "border" ) {
        for ( ; i < len; i += 2 ) {

            if ( !extra ) {    //This is the problematic line causing the unresponsive error. 

                val -= parseFloat( jQuery.css( elem, "padding" + cssExpand[ i ] ) ) || 0;
            }
            if ( extra === "margin" ) {
                val += parseFloat( jQuery.css( elem, extra + cssExpand[ i ] ) ) || 0;
            } else {
                val -= parseFloat( jQuery.css( elem, "border" + cssExpand[ i ] + "Width" ) ) || 0;
            }
        }
    }

    return val + "px";
} 
```

此外，这个问题开始时没有对调用 jQuery 的代码进行任何更改。

当我用 jQuery 1.7.1 尝试它时，我在第 6778 行得到了错误，这与上面提到的相同。

该错误通常出现在重新启动后加载时第一次运行浏览器时。

这可能是由于 Firefox 的问题造成的吗？我该如何解决这个问题？谢谢！

找到了 Mozilla 的这篇文章，但没有解决。[http://support.mozilla.org/en-US/kb/warning-unresponsive-script](http://support.mozilla.org/en-US/kb/warning-unresponsive-script)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-11-09T09:19:55.500

在我们的一个网站上也遇到了类似的问题。您可以使用[w3.org](http://validator.w3.org/)上的脚本验证器来查看如何修复这些错误......真的帮了我很多。

# ruby - 使用 Pony 和 Sinatra 发送邮件

> ID：14709421
> 
> 赞同：1
> 
> 时间：2013-02-05T14:08:39.283
> 
> 标签：ruby, forms, email, sinatra, pony

我正在尝试使用 sinatra 中的 Pony Gem 从联系表单（内置 HTML）发送电子邮件，我已按照文档进行操作，但必须缺少某些内容。

这是小马配置

```
 get '/contact' do
  erb :contact, :layout => :layout
 end

 post '/contact' do
 require 'pony'
 Pony.mail({
:from => params[:name],
    :to => 'myemailaddress',
    :subject => params[:name] + "has contacted you via the Website",
    :body => params[:comment],
    :via => :smtp,
    :via_options => {
     :address              => 'smtp.gmail.com',
     :port                 => '587',
     :enable_starttls_auto => true,
     :user_name            => 'myemailaddress',
     :password             => 'mypassword',
     :authentication       => :plain, 
     :domain               => "localhost.localdomain" 
     }
    })
    redirect '/success' 
   end

   get('/success') do
@notification = "Thanks for your email. I'll be in touch soon."
erb :index, :layout => :layout
   end 
```

所以点击提交后，联系页面会重新呈现，没有任何消息

这是我的提交按钮

```
 <button type="submit" class="btn" value="send">Submit</button> 
```

我在某处错过了触发器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:12:29.747

你确定你有表单设置来做`post`吗？如果它似乎正在刷新页面，则`form`标签可能未正确设置。提交的按钮也应该是`input`type 的标签`submit`。HTML 需要看起来像这样：

```
<form action="/contact" method="post">
   <!-- your form elements go here -->

   <input type="submit" value="Sign in">
</form> 
```

# jsf - JSF 立即跳锚

> ID：14709422
> 
> 赞同：1
> 
> 时间：2013-02-05T14:08:42.827
> 
> 标签：jsf, navigation, scroll, anchor

单击 JSF commandLink 时，新页面的滚动位置将为 0 - 这很好。

我注意到我的一个 jsf 页面有一个奇怪的行为 - 但它的 acuallty 很难解释：单击链接以导航“某处”通常会冻结页面，当收到新的响应时，你会结束另一个页面和滚动位置被重置。这可以。

在那种特殊情况下，一旦单击命令链接，“当前”视图就会立即滚动到顶部，然后转发到所需的导航结果。

就像点击一个简单的链接，它的锚点设置在顶部。`<a href='#'>`

这可能是什么原因？感觉很奇怪，如果页面在您单击链接的第二秒向上滚动。

所有页面在数据表中对命令链接的使用基本相同。没有其他页面遇到该问题。控制器是不同的 - 但由于向上滚动是在几毫秒内完成的，我不认为这是服务器端问题。

我注意到 jsf 将 附加`#`到所有生成的链接中。

所以，当我点击链接时，我可以看到 url`.../page.xhtml#`瞬间变为 （瞬间，页面向上滚动），然后像 re-jsft`.../page.xhtml?cid=4`

编辑：对于我的所有页面，链接如下所示：

```
<a href="#" onclick="mojarra.jsfcljs(document.getElementById('openTaskTable:0:j_idt64'),{'openTaskTable:0:j_idt64:j_idt65':'openTaskTable:0:j_idt64:j_idt65'},'');return false">SVA</a> 
```

然而，在那个页面上`return false;`，最后缺少...然后使链接表现得像一个锚...

`<h:commandLink>`编辑2：使用-使页面向上滚动的链接生成按预期工作的链接，这些链接是`<p:commandLink>`s（Primefaces）。实际上，更换它可以解决问题，但仍然想知道 primefaces 链接有什么不同。

编辑3：示例

按预期工作：

```
<h:form style="display:inline;">
    <h:commandLink
         action="#{processManagementController.unpinProcess(process)}">
   <h:graphicImage
    style="display:inline-block; height:16px; width:16px;"
    value="/resources/img/pinned.png"
    title="Click to unpin this process" />
</h:commandLink>
 </h:form> 
```

导致立即滚动：

```
<h:form style="display:inline;">
    <p:commandLink ajax="false"
         action="#{processManagementController.unpinProcess(process)}">
   <h:graphicImage
    style="display:inline-block; height:16px; width:16px;"
    value="/resources/img/pinned.png"
    title="Click to unpin this process" />
</p:commandLink>
 </h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:34:12.090

它不是因为 滚动到顶部`href="#"`，而是因为同步回发（这会导致页面完全重新加载！）。你的“edit3”中的两个例子对我来说仍然滚动到顶部。

嵌套`<f:ajax>`在`<h:commandLink>`, 或设置`ajax="true"`以`<p:commandLink>`使其成为异步回发，从而使它们按预期行事。

# date - 如何使用joda time实现sql日期格式并计算年份

> ID：14709423
> 
> 赞同：0
> 
> 时间：2013-02-05T14:08:47.583
> 
> 标签：date, jodatime

我有一个 mysql 数据库，日期使用 yyyy-MM-dd 的 sql 格式存储在其中

如何使用它来计算在 joda 时间内使用 yearsBetween() 的人的年龄，然后将其转换为 int。

请帮助，代码将非常有用:)

好的，我将发布导致问题的代码

```
 String dob = "1965-02-03";

    DateTime today = new DateTime(DateTime.now().toLocalDate().toString());
    DateTime start = new DateTime(dob);

    System.out.println(today);
    System.out.println(dob);

    Years y= Years.yearsBetween(start, today);

     System.out.println(y); 
```

为什么 y 返回 P485 的值而不是正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:05:21.470

您的 SysOut 课程*年份*缺少“ *getYears()* ”。

代码应该是这样的：

```
 final String dob = "1965-02-03";

    final DateTime today = LocalTime.now().toDateTimeToday();
    final DateTime start = DateTime.parse(dob);

    System.out.println(today);
    System.out.println(dob);

    final Years y = Years.yearsBetween(start, today);

    System.out.println(y.getYears()); 
```

# c# - 从视图 Mvc 3 生成 pdf

> ID：14709424
> 
> 赞同：1
> 
> 时间：2013-02-05T14:08:50.863
> 
> 标签：c#, asp.net-mvc-3, itext

今天我收到了一个任务，从视图中生成一个 pdf ......因为我是编程的初学者......有人会帮助我完成这个任务......传递一些提示......从哪里开始研究。Pos'm 很难完成这项任务。[我尝试在此链接http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3](http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3)中使用示例，   但它总是在这部分代码中引发错误

```
public byte[] Render(string htmlText, string pageTitle)
{
    byte[] renderedBuffer;

    using (var outputMemoryStream = new MemoryStream())
    {
        using (var pdfDocument = new Document(PageSize.A4, HorizontalMargin, HorizontalMargin, VerticalMargin, VerticalMargin))
        {
            PdfWriter pdfWriter = PdfWriter.GetInstance(pdfDocument, outputMemoryStream);
            pdfWriter.CloseStream = false;
            pdfWriter.PageEvent = new PrintHeaderFooter { Title = pageTitle };
            pdfDocument.Open();
            using (var htmlViewReader = new StringReader(htmlText))
            {
                using (var htmlWorker = new HTMLWorker(pdfDocument))
                {
                    htmlWorker.Parse(htmlViewReader);// erro here 
                }
            }
        }

        renderedBuffer = new byte[outputMemoryStream.Position];
        outputMemoryStream.Position = 0;
        outputMemoryStream.Read(renderedBuffer, 0, renderedBuffer.Length);
    }

    return renderedBuffer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-31T15:59:32.760

它本身并不能回答您的问题，但我们主要使用[NReco.PDF](https://www.nrecosite.com/pdf_generator_net.aspx)

从 HTML 内容生成 PDF 的代码示例如下：

```
var htmlContent = String.Format("<body>Hello world: {0}</body>", 
    DateTime.Now);
var htmlToPdf = new NReco.PdfGenerator.HtmlToPdfConverter();  
var pdfBytes = htmlToPdf.GeneratePdf(htmlContent); 
```

所以这个例子中唯一缺少的就是将 MVC 控制器的输出作为 HTML。

# objective-c - 通过 UITableView 单元格绘制线条

> ID：14709425
> 
> 赞同：1
> 
> 时间：2013-02-05T14:08:54.047
> 
> 标签：objective-c, ios5, ios6

**是否可以通过UITableView**中的某些单元格绘制一条不同宽度的线？
像这样：
![表视图](../Images/a5bdd90d75e86e176460f6a5b9aca25b.png)
我正在使用 Xcode 4.6，目标是 iOS5+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:02:57.857

关于它如何工作的粗略想法。当可重用单元格内容发生变化时，您需要管理红线。

```
CGSize size = [cell.textLabel.text sizeWithFont:cell.textLabel.font];
CGFloat y = cell.contentView.frame.size.height / 2;

UIView *line = [[UIView alloc] initWithFrame:CGRectMake(5,y,size.width, 3)];
line.backgroundColor = [UIColor redColor];
[cell.textLabel addSubview:line]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:13:45.593

在 tableViewCell 上方制作一些线条（如图像等）

像 [cell.contentView addSubView:$LINE_IMAGE_VIEW]

你可以像这样得到标签的宽度

```
CGFloat width = cell.titleLabel.frame.size.width 
```

然后将该宽度分配给自定义线条图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T07:56:21.857

这将贯穿整个细胞。如果您需要它看起来像已完成的任务：

```
CGSize size = cell.contentView.frame.size; // you'll draw the line in whole cell.

        UIView *line = [[UIView alloc] initWithFrame:CGRectMake(15,size.height / 2,size.width - 30, 1)];
        line.backgroundColor = [UIColor grayColor]; // set your preferred color
        [cell addSubview:line]; 
```

您可以在 CGRectMake 中指定其他值而不是 15 - 它被 X 偏移。在这种情况下，您最好将宽度减小两倍（在我的情况下为 15*2 = 30），以使其看起来不错。

# .net - 如何在我自己的项目中使用 ServiceStack Funq

> ID：14709430
> 
> 赞同：12
> 
> 时间：2013-02-05T14:09:05.300
> 
> 标签：.net, servicestack, funq

在工作中，我们在 ServiceStack 中进行了几个新的 Web 服务项目，并在其中一些中利用了 Funq。我目前正在开发一个单独的项目，该项目将使用上述 Web 服务，并且想知道是否有办法让我在我的项目中使用 ServiceStack 的 Funq 来解决我的依赖关系，以便使用或多或少相同的模式。开发我们的网络服务。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:38:21.097

ServiceStack 包括一个增强版本的 Funq（例如，支持 AutoWiring），它是自包含在核心中的`ServiceStack.dll`。

不幸的是，此时`ServiceStack.dll`它包含在[ServiceStack NuGet 包](http://nuget.org/packages/ServiceStack)中，该包引入了其他 ServiceStack 服务器依赖项。您可以从 src 或从 NuGet 包中挑选您需要的 dll 来构建它，即：

*   服务栈.dll
*   ServiceStack.Common.dll
*   ServiceStack.Interfaces.dll
*   ServiceStack.Text.dll

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T03:14:34.870

我处于类似的位置，想在非 webby 项目中使用大量的 ServiceStack 工具。我同意…… Funq 的文档略有不足

我一直在旧版 WinForms 应用程序中使用它，试图避免更改原始项目（太多），并将新表单添加到新项目中。
我在我的大多数项目中添加了对大多数 ServiceStack 库的引用（手动是因为我在 .Net 3.5 中这样做）

这是winforms`Program.cs`文件中的代码；请注意，这`FunqContainer`是一个公共静态属性 - 我仍然不确定，但它可以让整个项目访问 FunqContainer

```
using System;
using System.Threading;
using System.Windows.Forms;

using Funq;
using MyApp.Utilities;

static class Program
    {
        public static Funq.Container FunqContainer { get; set; }

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            FunqContainer = new Container();
            FunqContainer.Init(); 

            etc...
        }
    } 
```

`FunqContainer.Init()`是我单独项目中的一个扩展方法——你猜对了——初始化 Funq

```
using System.Configuration; // Don't forget to ref System.Configuration.dll
using Funq;     
using ServiceStack.OrmLite;
using ServiceStack.OrmLite.SqlServer;

namespace MyApp.Utilities
{
    public static class FunqExtensions
    {
        public static void Init(this Container container)
        {
            //-------------------------------------------------------
            // NB - I don't particularly like AutoWiring the public properties. 
            // Usually I want private stuff in the constructor)
            //-------------------------------------------------------
            var sqlServerConnectionString = ConfigurationManager.ConnectionStrings["HowdyCS"];
            container.Register<IDbConnectionFactory>(
                c => new OrmLiteConnectionFactory(
                    sqlServerConnectionString, 
                    SqlServerOrmLiteDialectProvider.Instance));

            container.Register<SomeForm>(
                c => new SomeForm(
                    c.Resolve<IDbConnectionFactory>()
                )
            ).ReusedWithin(ReuseScope.None);

        }
    }
} 
```

我喜欢在注册中使用 lamda - 它推迟对象的构建直到它们得到解决，而不是在注册时。
默认情况下，容器将解析的对象存储为单例，但如果您有一些需要在每次使用时进行初始化（即用户控件或 winforms），则使用`.ReusedWithin(ReuseScope.None)`扩展。

我需要我的地方`SomeForm`（即点击按钮或其他）

```
...
private void btnOpenSomeForm_Click(object sender, EventArgs e)
{
    var myForm = Program.FunqContainer.Resolve<SomeForm>();
    myForm.Show();
} 
```

检查[http://blogs.clariusconsulting.net/kzu/mab-containermodel-funq-a-transparent-container/](http://blogs.clariusconsulting.net/kzu/mab-containermodel-funq-a-transparent-container/)了解更多信息

[顺便说一句，当您通过http://converter.telerik.com/](http://converter.telerik.com/)放置它时，这也适用于 VB.net

# c# - 仅在设置为可见时才显示错误 div？

> ID：14709432
> 
> 赞同：0
> 
> 时间：2013-02-05T14:09:12.670
> 
> 标签：c#, asp.net

我有一些代码可以在条件下显示警报：

```
protected void btnSave_Click(object sender, EventArgs e)
{
    foreach (GridViewRow gvr in gvGroups.Rows)
    {
        CheckBox cbAdmin = (CheckBox)gvr.FindControl("cbAdmin");
        CheckBox cbRemove = (CheckBox)gvr.FindControl("cbRemove");
        Label lblID = (Label)gvr.FindControl("lblID");
        int id;
        bool idValid = int.TryParse(lblID.Text,out id);
        bool isReadOnly = !cbAdmin.Checked;

        if (idValid)
        {
            Group g = SecurityManager.GetGroup(id);

            if (g.IsReadOnly != isReadOnly)
            {
                bool updateSuccess = SecurityManager.ChangeGroupPermissions(id, isReadOnly);

                var master = Master as KezberProjectManager;
                if (master != null)
                {
                    master.ShowErrorAlert("Sample Error");
                }
            }

            if (cbRemove.Checked)
            {
                bool removeEmpSuccess = SecurityManager.RemoveEmployeesFromGroup(id);
                bool removeSuccess = SecurityManager.RemoveGroup(id);
            }
        }
    }

    BindGrid();

} 
```

这调用：

```
 public void ShowErrorAlert(string message)
        {
            error_alert.Visible = true;
            lblError.Text = message;
        } 
```

当母版页加载时：

```
 if (!IsPostBack)
        {
            success_alert.Visible = false;
            error_alert.Visible = false;
        } 
```

唯一的问题是，一旦显示警报，即使我下次不要求显示它，它仍然存在。我需要它的方式是，对 ShowErrorAlert 的 1 次调用应该只显示一次，之后，如果我单击保存按钮但没有进行任何更改，则不会调用 show 方法并且它不应该显示。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:16:55.603

如果您只想在一次回发时显示警报，请在将and`if (!IsPostBack)`的可见性设置为 false 之前删除。`success_alert``error_alert`

`Page_Load`之前调用*过，* `btnSave_Click`所以你想先将它们设置为`Visible = false;`，然后，如果`ShowErrorAlert()`被调用，它会将其更改为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:19:19.403

显示警报后，代码中没有选项可以隐藏它，因为您仅在 !IsPostback 上隐藏它所以您可以默认在按钮单击事件的开头隐藏警报，并仅在条件为真时显示它..

# c - 组合两个 C 字符串但未分配返回指针？

> ID：14709433
> 
> 赞同：0
> 
> 时间：2013-02-05T14:09:13.093
> 
> 标签：c

> **可能重复：**
> [从 C 中的函数返回字符串](https://stackoverflow.com/questions/9378998/returning-a-string-from-a-function-in-c)

所以我试图组合a和b的cstring数组的元素0并将指针返回给调用者。在函数 returnStr 内部已设置，但是当我从调用函数分配返回值时，该值现在不是应有的值。

```
char* combineCstr(char **a, char **b)
{
    char *returnStr;
    char str[20];
    strcpy(str, a[0]);
    strcat(str, "+");
    strcat(str, b[0]);

    returnStr= str;
    return returnStr;
} 
```

我非常困惑，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:10:51.400

您正在返回一个本地数组 ( `str`)。当您的函数退出时，该内存将被回收，因此这不是有效代码。您应该已经收到编译器警告。

如果您不能相信任一输入都有用于结果的空间，则必须使用 eg 分配新内存`malloc()`并将字符串连接到该内存中。它不会受到您的功能退出的影响。

# android - Android：使用媒体播放器播放本地视频

> ID：14709447
> 
> 赞同：8
> 
> 时间：2013-02-05T14:09:47.677
> 
> 标签：android, video, media-player

我正在尝试播放我保存在项目中的视频。我已经下载[了这个](http://camendesign.co.uk/code/video_for_everybody/test.html) （一个 .mp4 测试视频），然后在我的项目中创建了一个名为 vid 的文件夹，位于项目的根目录。然后我使用了这段代码：

```
public void PlayLocalVideo(View view)
    {
    VideoView video=(VideoView) findViewById(R.id.video1);
    MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(video);
    video.setMediaController(mediaController);
    video.setKeepScreenOn(true);
    video.setVideoPath("android.resource://uk.co.SplashActivity/vid/big_buck_bunny.mp4");
    video.start();
    video.requestFocus();
} 
```

我的 xml 看起来像这样：

```
<VideoView
    android:id="@+id/video1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

PlayLocalVideo 是我在按钮的 onclick 事件上使用的一种方法。但是当我按下播放时没有任何反应:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T15:38:18.123

只需将文件粘贴到**res/raw/big_buck_bunny.mp4**而不是 vid 文件夹并将 videoPath 更改为：

```
video.setVideoPath("android.resource://" + getPackageName() + "/" + R.raw.big_buck_bunny); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:49:15.293

问题可能出在 Android OS 缺陷，它不允许您正常访问超过 1Mb 大小[的文件 从 assets 文件夹加载大于 1M 的文件](https://stackoverflow.com/questions/2860157/load-files-bigger-than-1m-from-assets-folder)

您可能需要将视频文件拆分为 1Mb 大小的部分。然后将这些部分合并到sdcard上的一个文件中并播放。

例如，我已经`big_buck_bunny.mp4`分成 5 个部分`big_buck_bunny.mp4.part0`，`big_buck_bunny.mp4.part1`依此类推。要合并它们，您可以使用此方法

```
private void copyVideoFromAssets(String inFilePrefix, String outFileName) throws IOException {
    // Get list of files in assets and sort them
    final String[] assetsFiles = getAssets().list("");
    Arrays.sort(assetsFiles);

    // Open the empty file as the output stream
    final OutputStream output = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024 * 128];

    for (String file: assetsFiles) {
        if (file.startsWith(inFilePrefix)) {
            // Open part of file stored in assets as the input stream
            final InputStream input = getAssets().open(file);

            // Transfer bytes from the input file to the output file
            int length = input.read(buffer);
            while (length > 0) {
                output.write(buffer, 0, length);
                length = input.read(buffer);
            }
            input.close();
        }
    }

    // Close the streams
    output.flush();
    output.close();
}

public void PlayLocalVideo(View view)
    try {
        copyVideoFromAssets("big_buck_bunny.mp4.part", "/mnt/sdcard/big_buck_bunny.mp4");
    } catch (IOException e) {
        e.printStackTrace();
    }

    VideoView video=(VideoView) findViewById(R.id.video);
    MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(video);
    video.setMediaController(mediaController);
    video.setKeepScreenOn(true);
    video.setVideoPath("/mnt/sdcard/big_buck_bunny.mp4");
    video.start();
    video.requestFocus();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T11:03:58.513

试试这个代码......

第一次在 res 目录中将文件夹名称设为 raw，将您的视频复制到该文件夹​​中并尝试此代码...

```
 video1=(VideoView)findViewById(R.id.myvideoview);
    video1.setVideoURI(Uri.parse("android.resource://" +getPackageName()+ "/"+R.raw.YOUR_VIDEO_FILE_NAME));
    video1.setMediaController(new MediaController(this));
    video1.requestFocus();
    video1.start(); 
```

# c# - 如何在列表中显示对象的位置

> ID：14709453
> 
> 赞同：0
> 
> 时间：2013-02-05T14:10:12.390
> 
> 标签：c#, list, collections

我有一个完整的对象列表，我想显示每个对象“坐\位置”的位置：
例如：
objecta-name-0
objectb-name-1
objectc-name-2
objectc-name-3
objectc-name-4 - - 等等...

这样做的最好方法是什么？谢谢 ：）

```
public List <Custome> custome = new List <Custome>();

   public override void Display(Custome c)
    {
     /////
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:12:37.190

```
public override int Display(Custome c)
{
    return custome.IndexOf(c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:12:20.700

不确定我是否完全理解，但您可以使用[`Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)带有索引表达式的重载：

```
var newList = custome.Select((c, i)=>new {Custome=c, Index = i});
foreach(var item in newList)
{
    Console.WriteLine("{0} - {1}",item.Custome.Name, item.Index);
} 
```

或者，如果您只想找到一件物品的位置，请使用

```
public override void Display(Custome c)
{
    int index = custome.IndexOf(c);
    Console.WriteLine("{0} - {1}",c.Name, index);
} 
```

# c# - 为什么输出文本框不显示我的函数给出的返回值？

> ID：14709457
> 
> 赞同：0
> 
> 时间：2013-02-05T14:10:30.173
> 
> 标签：c#

我打算在文本框中显示结果。我的代码是这样的：

```
private void run_Click(object sender, EventArgs e)
{
    GeneticAlgorithm MyGeneticAlgorithm = new GeneticAlgorithm();
    GeneticAlgorithm.GAoutput ShowResult = MyGeneticAlgorithm.GA();

    string output;

    output = ShowResult;

    this.Output.Text = output;
}

class GeneticAlgorithm
{
    public void reset()
    {
        MessageBox.Show("fine");
    }
    public void Initial()
    {
        MessageBox.Show("Good");
    }
    public class GAoutput
    {
        public string Generation;
    }
    public GAoutput GA()
    {
        GAoutput OneGeneration = new GAoutput();
        OneGeneration.Generation = "bad";
        return OneGeneration;
    }
} 
```

运行后，它给我的结果是：WindowsFormsApplication1.GeneticAlgorithm+GAoutput

任何人都可以帮助我吗？太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:12:21.570

您的`ShowResult`变量不是字符串，因此当您将其分配给一个时，.NET 将其隐式转换为字符串。由于没有`ToString()`方法，因此它为您提供了通用类型定义字符串（“WindowsFormsApplication1.GeneticAlgorithm+GAoutput”）。

看起来您想要输出`Generation`字段，它*是*一个字符串，所以只需更改：

```
output = ShowResult; 
```

至

```
output = ShowResult.Generation; 
```

它应该开始工作。

此外，如果您不打算做很多其他事情来获得一个新的`Generation`，您可以真正缩短该代码，一直到：

```
this.Output.Text = (new GeneticAlgorithm()).GA().Generation; 
```

您可能还想考虑保留一个本地实例，`GeneticAlgorithm`这样您就不必继续创建新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:12:32.070

您必须决定为这些类的实例返回什么字符串。

然后重写每个这些类的[ToString()](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)方法以返回适当的字符串。

# html - 在 iframe 中显示网站的各个部分

> ID：14709459
> 
> 赞同：0
> 
> 时间：2013-02-05T14:10:41.077
> 
> 标签：html, iframe, resize

正如我的标题所说，我想在 iframe 中显示网站的一部分。这是我想放入 iframe 的网站： [GPA Calculator](http://srm.mnganesh.com/)

我想显示除页脚和顶部的 GPA 计算器标题之外的所有内容。我想把剩下的内容单独放在我的网站上。在输入卷号时，我希望学生能够看到他们的成绩和 GPA。这是样本卷号：1021140050

我只是尝试将此代码放入 iframe，调整其大小，但我不知道如何显示其中的一部分。我用谷歌搜索了很多教程，但找不到任何适合我目的的东西。如果有人可以提供一些提示，那就太好了，我可以尝试构建一些东西。

```
<iframe src="http://srm.mnganesh.com/" height="500px" width="800px" frameborder="0"></iframe> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:35:03.993

另一种解决方案可能是将自定义 css 加载到 iFrame 中。然后使用这个 css，您可以“隐藏”（`display:none`）您不想从页面中看到的元素。

为此，请查看[此问题+答案](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)。

*正如链接的问题所指出的，这仅适用于同一域*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T14:30:30.993

我认为在这种情况下最好的解决方案是使用 jquery：

```
$('#contentDiv').load('http://srm.mnganesh.com/ #divId'); 
```

其中#divId 是您要在页面上加载的 div 的 id。此解决方案的好处是您可以准确放置要加载的页面部分。而不是你放在页面上的 iframe

```
<div id="contentDiv"> 
```

包含您的数据。

# javascript - jQuery添加类不起作用

> ID：14709461
> 
> 赞同：2
> 
> 时间：2013-02-05T14:10:42.513
> 
> 标签：javascript, jquery

当我单击具有“右箭头”或“左箭头”类的 div 时，我想向对象添加一个类。在[http://jsfiddle.net/](http://jsfiddle.net/)上它是否完美运行。但在我的网站上它不起作用:(

谁能帮我？

jQuery：

```
var currentPage = 0;
var lastPage = ($(".post-preview > div").length)-1;
currentPage = $('.post-preview > div.show').attr('id');

$('.news > .right').stop().click(function() {
    if (currentPage == lastPage) {
            $('.post-preview > div#' + lastPage).hide();
            $('.post-preview > div#' + lastPage).removeClass('show');

        $('.post-preview > div#0').fadeIn(300);
        $('.post-preview > div#0').addClass('show');
        currentPage = 0;
    } else {
        $('.post-preview > div#'+currentPage).hide();
        $('.post-preview > div#'+currentPage).removeClass('show');
        currentPage++;
        var nextPage = currentPage;
        currentPage--;
        $('.post-preview > div#'+nextPage).fadeIn(300);
        $('.post-preview > div#'+nextPage).addClass('show');
        currentPage = nextPage;
    }
 });

 $('.news > .left').stop().click(function() {
     if (currentPage == 0) {
        $('.post-preview > div#0').hide();
        $('.post-preview > div#0').removeClass('show');

        $('.post-preview > div#' + lastPage).fadeIn(300);
        $('.post-preview > div#' + lastPage).addClass('show');
        currentPage = lastPage;
    } else {
        $('.post-preview > div#'+currentPage).hide();
        $('.rpost-preview > div#'+currentPage).removeClass('show');
        currentPage--;
        var nextPage = currentPage;
        currentPage++;
        $('.post-preview > div#'+nextPage).fadeIn(300);
        $('.post-preview > div#'+nextPage).addClass('show');
        currentPage = nextPage;
    }
}); 
```

显示类的 CSS：

```
.news > .post-preview > div.show    { display: inline-block !important; } 
```

我的 HTML 代码：

```
<div class="news">
<div class="arrow left"></div>
    <div class="post-preview">
        <div id="0" class='show'></div>
        <div id="1"></div>
        <div id="2"></div>

    </div>
<div class="arrow right"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:19:45.550

您正在尝试访问在执行时可能不存在的元素。这就是为什么它不起作用。

您需要将代码包装在一个`$(function() { /* put code here */ } );`块中。

它在[jsfiddle](http://jsfiddle.net/)上运行的原因是该站点为您提供方便。

****编辑****

在 JavaScript 中，将代码包含在它自己的上下文中是一种很好的（如果不是最好的）做法。看看 jQuery、jQuery UI 和许多 JavaScript 小部件和库。例如 ：

```
(function($) {    // receive $ as parameter; a jQuery instance

    /* place code here

})(jQuery);   // invoke the function above with this instance of jQuery 
```

这样做的原因是

1.  如果您需要使用不同版本的 jQuery，或者正在使用覆盖`$`变量的库，则上述函数*不会*受到更改的影响
2.  声明的每个变量（即。`var x = "foo";`）在函数之外都将*不可*用，因此您可以确定您没有污染窗口（全局）命名空间，并且在需要时具有正确的值。（如果您需要访问函数之外的某些内容，请公开一个全局对象（例如`window.someVar = localVar;`：）

但是，上述函数将在浏览器加载时执行，并且可能*在*任何 DOM 元素插入 DOM 树之前执行。对于设置事件侦听器等的脚本来说，这可能是一个问题。因此，如果您需要*仅*在 DOM 元素完全加载并准备好使用时执行该函数，请将您的代码包含在 jQuery onload 回调中：

```
jQuery(function() {

    /* place code here */

}); 
```

甚至

```
(function($) {
    // executed right now

    $(function() {
        // executed only when the DOM is ready

        /* place code here */

    });

})(jQuery); 
```

****更新****

在进一步阅读您的代码后，我只能看到（如评论）一些奇怪的东西。

1.  您的 ID 是数字。[从](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)HTML[规范](http://www.w3.org/TR/html4/struct/global.html#h-7.5.2)，

    > ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

    因此，您应该使用 id 前缀...或根据元素索引进行选择

2.  您可以链接查询而不是一直重新解析它们。

**例如**

```
jQuery(function() {

var firstPage = $(".post-preview > div:first").index(); // index of the first page
var lastPage = $(".post-preview > div:last").index(); // index of the last page
var currentPage = $('.post-preview > div.show').index() || firstPage;  // default to 0

$('.news > .right').stop().click(function() {
    if (currentPage == lastPage) {
        currentPage = $('.post-preview > div:eq(' + lastPage + ')')
           .hide()
           .removeClass('show')
           .siblings('div:first')  // first DIV
           .fadeIn(300)
           .addClass('show')
           .index();  // should be 0... but we never know
    } else {
        // note : will receive the next element index
        currentPage = $('.post-preview > div:eq(' + currentPage + ')')
           .hide()
           .removeClass('show')
           .next('div')             // get next DIV element
           .fadeIn(300)
           .addClass('show')
           .index();
    }
 });

 $('.news > .left').stop().click(function() {
     if (currentPage == firstPage) {
        currentPage = $('.post-preview > div:eq(' + currentPage + ')')
           .hide()
           .removeClass('show')
           .siblings('div:last')  // last DIV
           .fadeIn(300)
           .addClass('show')
           .index();
    } else {
        currentPage = $('.post-preview > div:eq(' + currentPage + ')')
           .hide()
           .removeClass('show')
           .prev('div')
           .fadeIn(300)
           .addClass('show')
           .index();
    }
});

}); 
```

还有你的 HTML（不再需要 ID）

```
<div class="news">
<div class="arrow left"></div>
    <div class="post-preview">
        <div class='show'>Preview 1</div>
        <div>Preview 2</div>
        <div>Preview 3</div>
    </div>
</div>
</div> 
```

# android - 按下主页按钮

> ID：14709462
> 
> 赞同：2
> 
> 时间：2013-02-05T14:10:45.427
> 
> 标签：android

当我在 Android 中按下主页按钮时会发生什么？因为当我按下主页按钮后再次打开它时，它有一系列错误。我需要知道它以找出导致错误的点。

更新：当按下主页按钮时，应用程序进入后台并被`onPause()`调用并保存 UI 的状态，但它不保存应用程序的状态，如变量、自定义视图。正如 Oren 解释的那样，您必须手动保存它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:13:18.493

当您按下主页按钮时，您的应用程序/活动会进入后台，当您再次打开它时，它会从原来的位置恢复，直到它被操作系统杀死/关闭。

[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)会给你一个清晰的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:13:58.400

技术上？任何事情都可能发生，从`onPause`被调用到设备终止应用程序以释放内存，再到用户关闭并重新启动设备。您的应用程序应该处理所有这些可能性。

进一步阅读：[android活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)

# tfs - 使用托管 TFS 将变更集编号转换为版本信息

> ID：14709464
> 
> 赞同：8
> 
> 时间：2013-02-05T14:10:48.870
> 
> 标签：tfs, msbuild, visual-studio-2012, tfsbuild, azure-devops

我们使用的是 Team Foundation Service，而不是本地 TFS。我们的解决方案是在 Visual Studio 2012 上创建的。我现在的问题是我们希望所有程序集都具有相同的版本号（这部分已经通过使用链接到所有项目的 CommonAssemblyInfo.cs 来解决）。我现在面临的问题是我们需要在程序集版本的最后一位数字的 tfs 变更集编号（例如 1.0.0.4711，其中 4711 是变更集编号）。我找到了几个例子，但没有一个对我有用。是的，我特别在stackoverflow上搜索了很多。

我也不得不承认我从来没有研究过 MSBuild 脚本......

任何人都可以给我一个关于如何做到这一点的提示吗？例如，是否可以在 Team Foundation Service（不是本地 TFS）上使用 MSBuild 扩展包，如果，如何做到这一点？

和往常一样，时间是我最大的敌人……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:15:28.927

请注意，从 2010 年开始，Tfs 使用 Windows 工作流来构建包，工作流调用 msbuild 仅用于编译项目 - 虽然它可以通过这种方式传递变更集来 msbuild 其相当多的跃点。以下处理您的问题，但是所需的链接解决方案更复杂： [程序集版本是否可以随每个 TFS 2010 构建自动更新？](https://stackoverflow.com/questions/3252643/can-assembly-version-been-automatically-updated-with-each-tfs-2010-build)

这是关于自定义构建活动的最佳系列教程之一，我相信作者也在堆栈上，特别是关于版本控制 [http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team- Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx](http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx)

简而言之，您需要在编译源文件之前运行自定义活动，找到所有 CommonAssemblyInfo.cs 文件，将此列表提供给您的自定义活动，它会使用完整版本号的传递值或仅更改集和可选签入来修改内部的值更改（可能不会，因为那时您的更改集将不同步）。

您还可以查看[https://tfsbuildextensions.codeplex.com/](https://tfsbuildextensions.codeplex.com/)活动集，其中有 TfsVersion 活动，至少它会提供示例。

对此的功能需求应该可以通过团队资源管理器和源代码控制获得 - 自定义活动程序集和构建模板通常位于团队项目根目录中的文件夹中 - 此文件夹的位置是为构建控制器定义的，您可以通过团队资源管理器构建来更改它部分。

变更集可从值 BuildDetail.SourceGetVersion 获得，不确定这是否已在 2012 年修复/更改，但是在 2010 年有关于此值的 2 个问题

1.  它不尊重默认构建模板中的 GetVersion 覆盖 - 如果使用覆盖，您将需要手动更新
2.  运行最新版本（无覆盖）时，它将从 tfs 获取最后一个变更集编号 - 根据您的分支，这可能与构建分支的“最后一个”变更集不同。您将不得不忍受这一点，为每个构建提供覆盖或实施检查分支历史记录以获取最后一个变更集值并再次覆盖它的活动。

应该注意的是，GetVersion 应该能够接受任何 sourcespec 版本 - 变更集、日期、标签等。我还没有充分利用这一点来为您提供更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T17:41:06.453

Colin Dembovsky 写了一篇[关于使用 TFS 2013 构建定义中的新预构建脚本设置进行版本嵌入的精彩概述](http://www.colinsalmcorner.com/post/matching-binary-version-to-build-number-version-in-tfs-2013-builds)。

**Changeset 编号可以在环境变量TF_BUILD_SOURCEGETVERSION**的预构建过程中轻松访问。我能够使用这个基于 Dembovsky 上述工作的脚本将 Changeset 值嵌入到我们的二进制文件中。（我使用的是 Perl，而不是 powershell，所以你可能不想看到它 ;-)

这种方法不需要对构建工作流程进行任何更改，这对我来说是一个巨大的胜利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:47:40.850

我使用了[Wintellect 的解决方案](http://www.wintellect.com/cs/blogs/jrobbins/archive/2009/11/09/tfs-2010-build-number-and-assembly-file-versions-completely-in-sync-with-only-msbuild-4-0.aspx)——仅限 MSBuild，不需要 TFS 魔法。我还添加到自动生成的 CSharp 文件中：
`[assembly:AssemblyInformationalVersion(&quot;$(BuildNumber)&quot;)]`
所以我得到了 TFS 内部版本号。

# ruby-on-rails-3 - form_for 更新方法

> ID：14709468
> 
> 赞同：0
> 
> 时间：2013-02-05T14:10:58.983
> 
> 标签：ruby-on-rails-3, form-for

在一个页面上，我列出了任务。我想为该任务添加一个表格作为完成该任务的更新。我有以下代码作为form_for：

```
<%= form_for :event, :action => :update, :id => event.id do |f| %>
  <%= f.check_box :complete %>
  <%= f.submit 'Complete %>
<% end %> 
```

使用此代码，我希望它使用 url 中的 id 编辑事件并完成事件。它的作用是创建一个新事件。有任何想法吗？

事件控制器：

```
 class EventsController < ApplicationController
  layout 'events', :except => 'edit'
  # GET /events
  # GET /events.json
  def index
    @events = Event.order("events.initials ASC, events.priroty ASC")
    @archived = CompleteEvent.order("complete_events.created_at ASC")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @events }
    end
  end

  # GET /events/1
  # GET /events/1.json
  def show
    @event = Event.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @event }
    end
  end

  # GET /events/new
  # GET /events/new.json
  def new
    @event = Event.new
    @users = ['BG', 'BD', 'MB', 'AF', 'RA', 'JM']
    @name = ['Brad Garrison', 'Brian Davis', 'Matt Broach', 'Alan McFarland', 'Russell Anderson', 'Jason Milam']

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @event }
    end
  end

  # GET /events/1/edit
  def edit
    @event = Event.find(params[:id])
    @users = ['BG', 'BD', 'MB', 'AF', 'RA', 'JM']
    @name = ['Brad Garrison', 'Brian Davis', 'Matt Broach', 'Alan McFarland', 'Russell Anderson', 'Jason Milam']

  end

  # POST /events
  # POST /events.json
  def create
    @event = Event.new(params[:event])

    respond_to do |format|
      if @event.save
        user = @event.name 
        Notifier.task_created(user).deliver
        format.html { redirect_to @event, notice: 'Event was successfully created.' }
        format.json { render json: @event, status: :created, location: @event }
      else
        format.html { render action: "new" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /events/1
  # PUT /events/1.json
  def update
    @event = Event.find(params[:id])
    @save = @event.update_attributes(params[:event])
      @complete = CompleteEvent.new(:initials => @event.initials, :name => @event.name, :event_name => @event.event_name, :complete => @event.complete, :event_description => @event.event_description, :comment => @event.comment)

    respond_to do |format|
      if @event.update_attributes(params[:event])
        if @event.complete == true
          user = @event.name
          @save
              @complete
              @complete.save
              @event.destroy
          format.html { redirect_to :controller => :events, :action => :index}
          format.json { head :no_content }
            elsif @event.complete == false          
          Notifier.task_updated(user).deliver
          format.html { redirect_to :controller => :events, :action => :index}
          format.json { head :no_content }
            end
      end
    end
  end

  # DELETE /events/1
  # DELETE /events/1.json
  def destroy
    @event = Event.find(params[:id])
    @event.destroy

    respond_to do |format|
      format.html { redirect_to events_url }
      format.json { head :no_content }
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:59:49.973

我缺少的是我的表单处于循环状态。因此，当我调用 form_for @event 时，它在该循环之外看不到。我让函数接受事件变量。

```
<% @events.each do |event| %>
  ......
  ......
  <% form_for event do |f| %>
     .....
  <% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:28:00.440

在edit.html.erb（或在edit.html.erb中呈现的部分）使用：

```
<%= form_for @event do |f| %> 
```

通常不需要指定动作，因为它是从 URI 路径推断出来的，而且 Rails 知道模型对象的 id 是 @event.id。

# matlab - 获取上下文菜单调用者的句柄

> ID：14709472
> 
> 赞同：2
> 
> 时间：2013-02-05T14:11:08.547
> 
> 标签：matlab, callback, contextmenu

在matlab中，如果我有一个带有句柄的上下文菜单，`cxmenu_Options`它链接到不同的三个`uicontrol`对象。

**在上下文菜单回调函数内部：**

**代码演示：**

```
function demoOnContextMenus
hFigure = figure;
hControl = uicontrol(                ...
    'Parent' , hFigure            , ...
    'Style'  , 'Edit'             , ...
    'Position' , [200 200 180 40] , ...
    'Tag'    , 'IamControl'       , ...
    'String' , 'UI-Control');

hCxMenu = uicontextmenu(            ...
    'Tag'    , 'IamMenu'       , ...
    'Callback',@CxMenuCallback);

set(hControl,'UIContextMenu',hCxMenu);

    function CxMenuCallback(objectHandle,eventData)
        tag = get(gcbo,'tag');
        helpdlg(tag);
    end
end 
```

如何获取从中`uicontrol`调用上下文菜单的句柄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:51:42.103

有两种方法可以访问句柄：

`gco`返回当前选定对象的句柄。从而`tag = get(gco,'tag')`将返回`IamControl`。

或者，您可以将句柄直接传递给回调（以防层次结构变得更加复杂，因为`gco`只会为您提供最终链的顶级句柄）：

```
handleToPass = hControl;

hCxMenu = uicontextmenu(            ...
    'Tag'    , 'IamMenu'       , ...
    'Callback',@(oh,evt)CxMenuCallback(oh,evt,handleToPass));

set(hControl,'UIContextMenu',hCxMenu);

    function CxMenuCallback(objectHandle,eventData,handleOfCaller)
        tag = get(handleOfCaller,'tag');
        helpdlg(tag);
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T11:34:43.093

使用 Matlab 的指导环境，我找到了另一种确定调用者的方法。

命令 gco（获取当前对象）只是完成了这项工作。

在我的例子中，上下文菜单提供了打开在 Windows 资源管理器中的“编辑文本”对象中指定的路径的选项。

```
function open_in_browser_Callback(hObject, eventdata, handles)

cur_obj=gco;

cur_path=get(cur_obj,'String')
if(~isempty(cur_path))
    winopen(cur_path);
end 
```

使用此解决方案，我能够为两个“编辑文本”对象使用相同的上下文菜单。

# java - 打包为 EAR 时是否可以在 WAR 中观察 CDI 事件

> ID：14709475
> 
> 赞同：7
> 
> 时间：2013-02-05T14:11:13.540
> 
> 标签：java, jakarta-ee, war, cdi, ear

我有一个 Enterprise Application Archive (EAR)，其中包含多个后端模块 (EJB) 以及一些 Web 模块 (WAR)。

事件在后端模块之一内被触发：

```
@Inject private Event<MyEvent> myEvent;
...
public void fireEvent() {
  myEvent.fire(new MyEvent());
}
... 
```

它可以在任何其他后端模块中观察到，代码如下：

```
public void listener(@Observes MyEvent myEvent) {
..
} 
```

但我无法检索 WAR 中的事件。这是因为类加载器可见性（来自 WAR 的类对 EJB 不可见）还是应该由 CDI 处理？

如果 CDI 不能用于应用程序范围的事件，还有哪些替代方案？

*   管理系统
*   番石榴事件总线
*   ...

有什么适用于 CDI 的吗？也许是一些将事件连接到 WAR 的 CDI 扩展？

- - - - - - 编辑：

如果它在同一个 WAR 中触发，我可以观察到该事件。我也尝试使用@Stateless bean 作为事件侦听器，但没有成功。

包装是这样的：

*   耳朵
    *   WAR（应在此处观察事件）
    *   战争
    *   EJB（事件在这里被触发）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T09:48:01.770

经过一些更多的研究，它似乎是预期的行为，因为 WAR 类对 EJB 不可见。

多想一下，这是一件好事——在集群环境中，CDI 事件只会被运行在与触发事件的 EJB 模块相同的节点上的 WAR 接收。但是为了可靠地更新用户视图，我们需要在每个实例上接收它。

在这种情况下，JMS 或其他消息传递系统显然是要走的路。还有一个 CDI 扩展可用于 CDI <-> JMS 桥接：[Seam3 JMS](http://docs.jboss.org/seam/3/jms/latest/reference/en-US/html_single/)

# c# - 确定应该在 C# MVC 4 路由映射中拆分 Url 的位置

> ID：14709478
> 
> 赞同：0
> 
> 时间：2013-02-05T14:11:22.683
> 
> 标签：c#, asp.net-mvc-4, routing

我正在映射这条路线：

```
routes.MapRoute(
    "VotePage",
    "{category}/{medicine}/{id}-{condition}",
    new { controller = "Reactions", action = "Test" } 
); 
```

但是，当我在最后一个斜杠之后有这样的 url 时：“/8438-this-is-a-test-condition”
参数设置如下：
id = 8438-this-is-a-test
condition = condition

而正确的结果应该是：
id = 8438
条件 = this-is-a-test-condition

如何拆分/分隔第一个破折号上的网址？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:50:41.963

不能接受这种方式吗？

```
"{category}/{medicine}/{id}/{condition}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:18:12.790

如果我理解正确，这应该有效

```
String foo = "/8438-this-is-a-test-condition";

if(foo.StartsWith("/")
{
    foo = foo.Split('/')[1];
} 
```

编辑：....不，我没有正确理解你。抱歉，我下次会仔细阅读。

我不确定如何实现您的要求。我会试探性地去寻找和替换魔法，虽然不漂亮，但它确实有效....

# ios - 对于“看起来”像属性的方法，@property 和 getter/setter 有什么区别？

> ID：14709479
> 
> 赞同：0
> 
> 时间：2013-02-05T14:11:25.640
> 
> 标签：ios, properties, setter, getter

我了解关键差异/过程。属性为类变量创建 getter 和 setter。它还（现在）将它与带有`_`前缀的私有变量合成。

伟大的。

现在，我想要一些方法来充当属性。所以我有一个`UIView`有`UILabel`子视图的子类。

我想创建这两种方法`- (NSString *)text`，`setText:(NSString *)text`以便设置和获取 UILabel 的文本。

显然，这就像一个属性（你可以做`[myCustomElement text]`and `[myCustomElement setText:@"whatever"]`）所以我*觉得*我应该定义一个属性，但是如果有的话，它有什么用处？

我的 getter 和 setter 看起来像这样：

```
- (NSString *)text {
    return self.textLabel.text;
}

- (void)setText:(NSString *)text {
    self.textLabel.text = text;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:24:11.253

你可以这样做，但我不鼓励你这样做。拥有看起来像标准访问器方法（getter 和 setter）但真正更新 UI 控件的方法只会成为未来混乱的根源。当方法执行不符合常规做法的功能时，这只会破坏代码的可读性。再加上你已经有你的财产`textLabel`，所以这些方法不会给你买太多。

顺便说一句，标准的自动生成的访问器方法提供了其他有用的功能（根据您在定义属性时指定的限定符进行必要的内存管理，在您可能需要此类功能的某个未来日期启用[键值观察](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)，等），所以除非您精通这些概念，否则我不会用您自己的方法替换它们。

如果您正在做与标准访问器方法不同的东西，我建议使用将来不太可能成为混淆来源的方法名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:23:48.073

text 已经是*yourCustomElement*属性*textLabel的一个属性（称为**text*）（这就是您使用点符号*yourCustomElement.textLabel.text*访问它的原因）

 ***在这个例子中，文本属性的 getter/setter 应该/只能在 textLabel 类中

这两种方法只是设置/获取属性的便捷方法（很好，但它们不是 getter/setter，不应该看它们）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:24:44.217

我认为对于您的具体示例，不定义属性很好。

属性（据我所知）提供了方便的速记，以确保在引擎盖下正确保留/释放（适当时）。

[http://useyourloaf.com/blog/2011/02/08/understanding-your-objective-c-self.html](http://useyourloaf.com/blog/2011/02/08/understanding-your-objective-c-self.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T14:29:05.900

> 如果有的话，这有什么用？

有很多**用途**：

**1)**你可以使用属性来做一些计算，更新对象的状态，或者一些类似缓存的东西。

**2)**你听说过Cocoa 中的键值**编码 (KVC)**和**键值观察 (KVO)吗？**它们取决于属性。检查：[KVC 编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)和[KVO 编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i)。

**3）**使用属性，您可以在访问器中放置一些内存管理代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T14:22:34.597

如果您将其声明为属性并覆盖 getter/setter，那么您可以使用点表示法来更改或检索值。

前任：

```
myCustomElement.text = @"whatever"; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-05T14:21:35.893

长话短说：@synthesis 生成 getter 和 setter。因此，使用综合可以节省您的打字时间。

但是，您的代码与您的代码不同，`@synthesis textLabel`因为您的代码只允许更改标签文本。@synthesis 将允许更改所有属性。

这里有一些关于@synthesis / getters / setters 的有用信息

[http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)***

# sql - 如何根据 SSIS 中的用户变量值在数据流中使用 if..else

> ID：14709481
> 
> 赞同：6
> 
> 时间：2013-02-05T14:11:27.800
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我有一个相当简单的 SSIS 包，其中包含许多`Data Flow`任务，每个任务都有多个表的数据流，如下所示：![在此处输入图像描述](../Images/1a497c69434b4c0f20e63a204796a5e0.png)

我希望能够基于我使用`Script Task`控制流操作的一些用户定义的变量值来执行这些数据流中的每一个。比如，如果一个变量（比如 BESTELLDRUCK）的值为`true`，那么我想执行这个表的数据流（源转换目标任务），否则我想跳过这个表并继续到另一个表（例如 AKT_FEHLER）在相同的数据流任务中。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T14:28:46.143

您**不能**在`Data Flow Task`. `Control Flow`但是，您可以在选项卡上启用或禁用数据流任务。

这是在“控制流”选项卡上执行此操作的一种可能方法：

如果可能，将源 --> 目标转换移动到单个数据流任务。如下图所示。

![控制流](../Images/80479533abe5ffc7e5cd765980843a3b.png)

假设您已经为每个流创建了变量，以根据某些条件启用或禁用数据流任务。对于这个例子，我硬编码了一些值。

![变量](../Images/b95d8fd4073a1a6c93e2afa532eac8a8.png)

根据变量动态启用或禁用数据流任务。单击数据流任务并按**F4**查看`Properties`。在属性上，单击属性旁边的**省略号**`Expressions`按钮。您将看到属性表达式编辑器。

选择`Property`Disable 并使用**Ellipsis**按钮输入表达式**`!@[User::Enable_BESTELLDRUCK]`**注意感叹号，因为变量声明为*Enable*但只有`Disable`属性可用，您需要执行相反的操作。

![属性表达式编辑器](../Images/dcfdcf5f2e03d8c1bc9717d5739478b6.png)

使用适当的变量对其他数据流任务重复该过程。运行包，您会注意到第二个数据流任务没有执行，因为变量`Enable_AKT_FEHLER`设置为 value `False`。

希望有帮助。

![执行](../Images/184a0a64088073cbe829610dc561368c.png)

### 参考：

要在 ForEach Loop 容器中加载具有相同架构的多个表，请查看以下 SO 答案。它将数据从 MS Access 传输到 SQL Server。希望这能给你一个想法。

**[如何以编程方式获取 SSIS 包中的 MS Access 表列表？](https://stackoverflow.com/questions/6298806/how-do-i-programmatically-get-the-list-of-ms-access-tables-within-an-ssis-packag/6301687#6301687)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:07:51.153

我想这里有足够的指针可以让 Agent 007 解决这个问题。我想补充几点一般性意见。

1.  动态启用/禁用任务不是一个好习惯。禁用任务的更好方法是在优先约束中使用表达式。一个这样的参考：[http ://www.sqlis.com/sqlis/post/Disabling-tasks-Through-Expressions.aspx](http://www.sqlis.com/sqlis/post/Disabling-tasks-Through-Expressions.aspx)

2.  正如建议的那样，将每个 STD（源-转换-目标）转换为自己的 DFT。更好地使用父子模式。这将有助于测试未来添加的更多 DFT。

# php - 在 PHP 中使用 fetch 和 while 在分组行中选择结果

> ID：14709484
> 
> 赞同：0
> 
> 时间：2013-02-05T14:11:39.683
> 
> 标签：php, sql

在下面的代码中，我发送了一个请求，我使用 PDO 提取将结果放入一个表中。但是当我们有一个包含 2 个元素的“数据元素”时，它会在表中创建 2 行，每个“元素”对应 1 行。例子：

```
****************************************
**Data Element Name** | data 1
****************************************
**Elements**          | element 1
****************************************

****************************************
**Data Element Name** | data 1
****************************************
**Elements**          | element 2
****************************************
and what I want is:
****************************************
**Data Element Name** | data 1
****************************************
**Elements**          |element 1
                      |element 2
**************************************** 
```

谢谢！

```
<?php
if ($select=="Data Element Name"){
 $result="SELECT    
      D1.Data_Element_Name dataElementName,
      D2.Data_Element_Name element
     FROM 
      data_element_name D1
      LEFT JOIN packagedelement ON packagedelement.id=COALESCE(D1.base_Attribute, D1.base_Class)
      LEFT JOIN ownedattribute ON ownedattribute.FK_packagedElement=packagedelement.PrimaryKey
      LEFT JOIN data_element_name D2 ON D2.base_Attribute=ownedattribute.id
          WHERE 
      D1.Data_Element_Name LIKE '%$search%' ";

     try {
    $req =$pdo->query($result);
} catch(PDOException $ex) {
    echo "An Error occured!"; //user friendly message
    some_logging_function($ex->getMessage());
}
    echo 'Data Elements including the keyword: " '.$search.' " ';
    echo '<table id="table1" style="margin-left:10px; width:700px;">';
    //Loop to stock results on an array
    $i=0;
    while($data = $req->fetch())
    { 
    $array[$i]=$data['dataElementName'];
    $element[$i]=$data['element'];
    echo '<tr>
        <td>
                <a href="" onclick="var source = ($(\'#arrow'.$i.'\').attr(\'src\') === \'img/arrowInactive.jpg\') ? \'img/arrowActive.jpg\' : \'img/arrowInactive.jpg\'; $(\'#arrow'.$i.'\').attr(\'src\', source); $(\'#hiddenDiv'.$i.'\').toggle(); return false;">
          <img id="arrow'.$i.'" src="img/arrowInactive.jpg" alt="arrowInactive" />' .json_encode($array[$i]). 
        '</a>
        </td>
               </tr>
          <tr id="hiddenDiv'.$i.'" style="padding-left:20px;display:none">
        <td>
          <table>    
            <tbody>
              <tr>
                <td class="LeftCell">Elements</td>
                <td id="elements">'.json_encode($element[$i]).'</td>
              </tr>
            </tbody>
          </table>
        </td>
          </tr>';
    $i=$i+1;
}
echo '</table>';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:27:43.617

你有两个选择。

首先，当您遍历结果时，观察主键并构建第二维（将行存储在临时数组中）直到键更改。当它发生时，您将处理一个逻辑行并将其存储在该临时数组中。像这样的东西：

```
$last_id = null;
$result = array();
while (($row = fetch())) {
   if ($row['id'] != $last_id) {
       // do something with $result
       $result = array();
       $last_id = $row['id'];
   }
   $result[] = $row;
} 
```

第二种选择是一次执行两个查询并同时从这两个查询中检索数据。第一个查询按没有左连接的主键分组，第二个是从以前的左连接表中选择。两个查询必须以相同的方式排序。您从第一个查询中获取一行，然后从第二个查询中获取具有相同主键的所有查询。与归并排序的工作方式相同。当你有很大的结果时它会有所帮助，但通常你可以坚持第一个变体。

# c# - Google Groups Migration C# API 不工作

> ID：14709495
> 
> 赞同：0
> 
> 时间：2013-02-05T14:12:12.147
> 
> 标签：c#, api, google-apps, google-email-migration, google-groups-migration

我正在尝试使用 C# Google Groups Migration API，但运气不佳。

我有以下代码：

```
public static void Main(string[] args)
{
    var body =
    @"Received: by 10.143.160.15 with HTTP; Mon, 16 Jul 2007 10:12:26 -0700 (PDT)
    Message-ID: NNNN@mail.samplegroup.com
    Date: Mon, 16 Jul 2007 10:12:26 -0700
    From: ""xxx""
    To: ""xxx""
    Subject: SUBJECT
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ISO-8859-1; format=flowed
    Content-Transfer-Encoding: 7bit
    Content-Disposition: inline
    Delivered-To: xxx
    This is the body of the migrated email message.";

    var bytes = ASCIIEncoding.ASCII.GetBytes(body);

    var messageStream = new MemoryStream(bytes);

    var auth = new OAuth2LeggedAuthenticator("xxx.com", "xxx", "xxx", "xxx");
    var service = new GroupsmigrationService(auth);
    service.Key = "xxx";

    var request = service.Archive.Insert("xxx", messageStream, "message/rfc822");
    request.Upload();
} 
```

...但这会导致`Invalid Credentials`异常。

我还尝试了以下方法：

```
public static class Program
{
    public static void Main(string[] args)
    {
        var body =
            @"Received: by 10.143.160.15 with HTTP; Mon, 16 Jul 2007 10:12:26 -0700 (PDT)
            Message-ID: NNNN@mail.samplegroup.com
            Date: Mon, 16 Jul 2007 10:12:26 -0700
            From: ""xxx""
            To: ""xxx""
            Subject: SUBJECT
            MIME-Version: 1.0
            Content-Type: text/plain; charset=ISO-8859-1; format=flowed
            Content-Transfer-Encoding: 7bit
            Content-Disposition: inline
            Delivered-To: xxx
            This is the body of the migrated email message.";

        var bytes = ASCIIEncoding.ASCII.GetBytes(body);

        var messageStream = new MemoryStream(bytes);

        // Register the authenticator.
        var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
        provider.ClientIdentifier = "xxx";
        provider.ClientSecret = "xxx";
        var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);

        // Create the service.
        var service = new GroupsmigrationService(auth);

        service.Key = "xxx";
        var request = service.Archive.Insert("xxx", messageStream, "message/rfc822");
        request.Upload();

        Console.ReadKey();
    }

    private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
    {
        // Get the auth URL:
        // IAuthorizationState state = new AuthorizationState(new[] { TasksService.Scopes.Tasks.GetStringValue() });
        IAuthorizationState state = new AuthorizationState(new[] { "https://www.googleapis.com/auth/apps.groups.migration" });

        state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
        Uri authUri = arg.RequestUserAuthorization(state);

        // Request authorization from the user (by opening a browser window):
        Process.Start(authUri.ToString());
        Console.Write("  Authorization Code: ");
        string authCode = Console.ReadLine();
        Console.WriteLine();

        // Retrieve the access token by using the authorization code:
        return arg.ProcessUserAuthorization(authCode, state);
    }
} 
```

...但这失败了：`Backend Error`。内部异常是：

> 远程服务器返回错误：(503) 服务器不可用。

理想情况下，我更喜欢使用 2 Legged Authenticator 方法，因为它不需要手动干预复制和粘贴身份验证密钥，但现在让任何东西工作将是一个加号。

任何帮助感激不尽！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T10:30:50.060

我有同样的问题，并要求谷歌的支持团队。

结果，我们发现此问题重现，因为示例中的“Message-ID”标头格式无效。

此错字已于[2013 年 8 月 12 日更正。](https://developers.google.com/admin-sdk/groups-migration/v1/limits)

请尝试将 Message-ID 从 NNNN@mail.samplegroup.com 更改为 <NNNN@mail.samplegroup.com>。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:18:00.430

503 错误通常表明您正在达到 API 配额

[https://developers.google.com/google-apps/groups-migration/v1/limits](https://developers.google.com/google-apps/groups-migration/v1/limits)

您会等待 24 小时后再尝试重新运行吗？配额会根据日常基础重新设置。

此外，您应该使用 google-email-migration 标记与迁移相关的问题，并使用 google-groups-migration 标记组迁移

# jquery - jquery mobile，仍然是菜单

> ID：14709496
> 
> 赞同：0
> 
> 时间：2013-02-05T14:12:14.720
> 
> 标签：jquery, ajax, mobile, menu, navigation

目前正在使用 jquery mobile 导致过渡看起来不错。我在标题上设计了一个菜单，可以导航到不同的页面（菜单样式会根据它所在的页面而改变）我希望我的菜单保持静止，所以只有内容页面会改变和很好地过渡而不重置整个页面页。我知道如何使用基本的 ajax 更改内容，但它不会像 jquery mobile api 提供的那样对其进行动画处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:18:48.497

我认为这不会开箱即用——因为每个页面都有自己的标题。您可以编写一些 javascript，将菜单加载到特定事件（即 pageshow）的标题中。至于动画——根据您正在测试的浏览器，您可能看不到它们。就测试而言，Safari 是一个相当不错的模拟器。

但同样，在我看来，在所有页面中保持菜单“静态”的主要问题不是一个可行的选择。

这可能会有所帮助：

[jQuery Mobile 静态标题](https://stackoverflow.com/questions/8231660/jquery-mobile-static-headers)

# django - 成功登录后如何向 Django 的响应上下文添加内容？

> ID：14709501
> 
> 赞同：2
> 
> 时间：2013-02-05T14:12:26.123
> 
> 标签：django, authentication

我有一个 Django 项目，其中我目前有一个标准登录视图的包装器：

```
from django.contrib.auth import views as auth_views
from myapp.forms import LoginForm

def login(request, *args, **kwargs):
    """Wrapper for auth.login."""
    kwargs['template_name'] = 'login.html'
    kwargs['authentication_form'] = LoginForm
    auth_view_response = auth_views.login(request, *args, **kwargs)
    return auth_view_response 
```

这一切都很好，但我想在下一页的响应上下文中添加一些内容，前提是登录成功。我不确定如何：

1.  检查用户是否在`auth_views.login()`被调用后成功登录，或者
2.  添加一个将在下一页的上下文中显示的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:44:22.953

通常，我在发布我的 SO 问题后不久就想出了一个答案。

我不需要对登录视图做任何事情。相反，我使用`user_logged_in`信号：

```
from django.contrib.auth.signals import user_logged_in

def post_login_actions(sender, user, request, **kwargs):
        request.session['just_logged_in'] = True

user_logged_in.connect(post_login_actions, dispatch_uid="user_logged_in") 
```

（我把它放在我的末尾`myapp/models/userprofile.py`。）

然后我有一个`myapp/context_processors.py`这样的：

```
from django.conf import settings

def membership_context(request):
    context = {
        'just_logged_in': request.session.get('just_logged_in', False),
    }
    # Now we've used any True setting for this, set it to False subsequent requests:
    request.session['just_logged_in'] = False
    return context 
```

当然，将其包含在我的设置中`TEMPLATE_CONTEXT_PROCESSORS`：

```
from django.conf.global_settings import TEMPLATE_CONTEXT_PROCESSORS
TEMPLATE_CONTEXT_PROCESSORS += (
    'myapp.context_processors.membership_context',
) 
```

现在，每个模板`just_logged_in`在其上下文中都有一个值，通常为 False，但在用户登录后的第一个页面视图中将为 True。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:27:43.383

谈到第一个问题：

> 在调用 auth_views.login() 后检查用户是否成功登录，或者

在视图函数中检查`request.user.is_authenticated()`

说到第二个问题，您可以在用户会话中添加变量，然后在下一页检查它：

```
#in the view mentioned above    
if request.user.is_authenticated():
    request.session['some_key'] = "some_var"

#in the view, that represents the next page
foo = request.session.get('some_key',None)
#now you can add foo to template context 
```

# c# - 基于asp.net中的下拉列表选择更新图像

> ID：14709502
> 
> 赞同：0
> 
> 时间：2013-02-05T14:12:27.950
> 
> 标签：c#, asp.net

我有一个下拉列表定义为

```
<asp:DropDownList ID="ddl1" runat="server"    OnSelectedIndexChanged="ddl1_SelectedIndexChanged" style="width: 107px">
        <asp:ListItem Selected="True" Text="Select a value" Value="select">Select a value</asp:ListItem>
        <asp:ListItem Value="p1">Image 1</asp:ListItem>
        <asp:ListItem Value="p2">Image 2</asp:ListItem>
        <asp:ListItem Value="p3">Image 3</asp:ListItem>
</asp:DropDownList>
<div id="img">
  <asp:Image ID="image1" runat="server"  Width="100"/>
</div> 
```

在更改选择时，事件在代码隐藏中定义为

```
protected void ddl1_SelectedIndexChanged(object sender, EventArgs e)
{
    string i = ddl1.SelectedValue;
    switch (i)
    {
        case "p1":
            image1.ImageUrl = "img/p1.jpg";
            break;
        case "p2":
            image1.ImageUrl = "img/p2.jpg";
            break;
        case "p3":
            image1.ImageUrl = "img/p3.jpg";
            break;
        default "select":
            image1.ImageUrl = "";
            break;
    }
} 
```

但是，这似乎并没有选择图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:22:11.037

~~`.SelectedValue`仅在列表被数据绑定时使用！所以这就是为什么没有选择图像。~~. 查看 MSDN 证明我错了[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)

将其更改为：

```
string i = ddl1.SelectedItem.Value; 
```

它会工作:)。

# javascript - 可排序 div 内的滚动条

> ID：14709503
> 
> 赞同：2
> 
> 时间：2013-02-05T14:12:28.653
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我正在使用可排序的 jQuery。可排序的 div 内部是具有垂直滚动条的 div。如果我单击垂直滚动条，将触发可排序但看不到 unclick 事件。然后我需要右键单击以删除可排序的 div。我怎样才能传播取消点击，甚至使滚动条不会触发可排序的拖动？

```
$('#sortHolder').sortable(); 
```

示例[http://jsfiddle.net/L2hWv/](http://jsfiddle.net/L2hWv/)

[这里](https://stackoverflow.com/questions/14460086/jqueryui-sortable-failed-with-scrolling)有类似的问题，但我的可排序对象中有一个滚动 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:46:05.027

我遇到了 div 内的 flash 对象的问题。您可以尝试使用拖动手柄。文档：[http ://api.jqueryui.com/sortable/#option-handle](http://api.jqueryui.com/sortable/#option-handle)

# java - 使用正则表达式匹配重复序列

> ID：14709505
> 
> 赞同：0
> 
> 时间：2013-02-05T14:12:31.867
> 
> 标签：java, regex

我正在尝试将 TCL 键控列表转换为 Java `HashMap`，并且需要使用正则表达式来分解文本片段。我正在使用的文本示例是：

```
{ID {{NAME X } {HUB 0 } {NUM 14226188 }}} {SRCID {{NAME XY } {HUB 0 } {NUM 14226136 }}} {类型数据}

```

这里有三个不同的组 ID、SRCID 和 TYPE。我曾尝试使用正则表达式`{.*?}`，但前两组被分解了。如果我只使用`{.*}`整个字符串作为一个单元匹配，而不是三个。关于我接下来应该尝试什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:59:28.360

这是带有正则表达式的示例代码，可以满足您的要求：

```
public class RegexTester {
public static void main(String[] args) throws Exception {
    String data = "{ID {{NAME X } {HUB 0   } {NUM 14226188  }}} {SRCID {{NAME XY } {HUB 0   } {NUM 14226136  }}} {TYPE DATA }";

    Pattern pattern = Pattern.compile("(\\{\\bID.+\\})\\s*(\\{SRCID.+\\})\\s*(\\{TYPE DATA.+\\})");
    Matcher matcher = pattern.matcher(data);

    while (matcher.find()) {

        System.out.println(matcher.group(1)); // Group - ID
        System.out.println(matcher.group(2)); // Group - SRCID
        System.out.println(matcher.group(3)); // Group - TYPE DATA
    }
} 
```

输出 ：

{ID {{NAME X } {HUB 0 } {NUM 14226188 }}}
{SRCID {{NAME XY } {HUB 0 } {NUM 14226136 }}}
{类型数据}

希望这可以帮助。

# iphone - JSON 零值问题

> ID：14709513
> 
> 赞同：0
> 
> 时间：2013-02-05T14:12:48.623
> 
> 标签：iphone, json

我正在使用 JSON 网络服务。首先，我将值保存在服务器上，然后获取相同的值。当我点击 API 或 url 时，我在插入值期间留空的字段显示 0 值。它正在获取显示在控制台中的数组，但未显示在标签、按钮等上。它正在杀死错误`[NSDecimalNumber length]`。我想知道这里出了什么问题，以及那些在插入过程中留空的标签返回了什么。以及如何检测标签具有零值或空值。以及如何处理它们。

我在这里发布 JSON

```
{
   "messageshow":[
      {
         "message_id":"502",
         "message":"http://flut.psites.info/api/messages/voice/1360100571.caff",
         "message_pic":"",
         "uid":"44",
         "created":"14 second ago",
         "username":"pari",
         "first_name":"pp",
         "last_name":"pp",
         "profile_pic":"http://flut.p-sites.info/api/uploads/13599968121.jpg",
         "tag_user":{
            "tags":[
               {
                  "message":"false"
               }
            ]
         },
         "boos_list":{
            "booslist":[
               {
                  "message":"false"
               }
            ]
         },
         "aplouds_list":{
            "aploudslist":[
               {
                  "message":"false"
               }
            ]
         },
         "total_comments":0,
         "total_boos":0,
         "total_applouds":0
      },
      {
         "message_id":"501",
         "message":"http://flut.psites.info/api/messages/voice/1360100045.caff",
         "message_pic":"",
         "uid":"44",
         "created":"9 minutes ago",
         "username":"pari",
         "first_name":"pp",
         "last_name":"pp",
         "profile_pic":"http://flut.psites.info/api/uploads/13599968121.jpg",
         "tag_user":{
            "tags":[
               {
                  "message":"false"
               }
            ]
         },
         "boos_list":{
            "booslist":[
               {
                  "message":"false"
               }
            ]
         },
         "aplouds_list":{
            "aploudslist":[
               {
                  "message":"false"
               }
            ]
         },
         "total_comments":0,
         "total_boos":0,
         "total_applouds":0
      },
      {
         "message_id":"500",
         "message":"http://flut.p.info/api/messages/voice/1360099970.caff",
         "message_pic":"",
         "uid":"44",
         "created":"10 minutes ago",
         "username":"pari",
         "first_name":"pp",
         "last_name":"pp",
         "profile_pic":"http://flutpsites.info/api/uploads/13599968121.jpg",
         "tag_user":{
            "tags":[
               {
                  "message":"false"
               }
            ]
         },
         "boos_list":{
            "booslist":[
               {
                  "message":"false"
               }
            ]
         },
         "aplouds_list":{
            "aploudslist":[
               {
                  "message":"false"
               }
            ]
         },
         "total_comments":0,
         "total_boos":0,
         "total_applouds":0
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:34:17.863

First: What are you using to parse the received JSON data? `NSJSONSerialization`, `JSONKit`, ...?

Second: I guess that you try to call `-length` on a value from the parsed JSON data. But because that value is empty (0) it get's parsed into a `NSNumber` instead of a string. `NSNumber` doesn't implement a `-length` method and your app crashes.

You should return null or an empty string in your JSON for empty string values and not just `0`.

P.S.: Don't use `NSDecimalNumber`, but `NSNumber` instead. `NSDecimalNumber` is meant for performing calculations and not to wrap integers.

# android - 如何在python脚本中导入android

> ID：14709525
> 
> 赞同：1
> 
> 时间：2013-02-05T14:13:15.030
> 
> 标签：android, python

当我尝试`import android`在我的 python 脚本中，我得到一个错误`No Module`，等等。请让我知道如何解决这个问题。我正在使用 Eclipse IDE 编写 Python 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:25:04.170

当您安装 Python 解释器时，您会获得许多示例程序或脚本，包括传统的“Hello World”代码。代码如下所示：

```
import android

droid = android.Android()

droid.makeToast('Hello, Android!') 
```

![](../Images/a415f430c10c77fcd44551b4ee3cc0b5.png)

呼叫将`makeToast`在弹出对话框中显示文本。虽然您可以在手机屏幕上输入几行文字，

您当然不会以这种方式进行任何认真的编码和调试。幸运的是，您可以使用 WiFi 或 USB 连接到手机，这样您就可以在桌面上编写代码并在手机上执行它。这确实需要安装 SDK 并使用 /tools 目录中的 Android 调试桥 (adb) 实用程序。

要启用此功能，您可以使用 adb 工具将虚拟 IP 端口转发到设备上的 IP 端口。这需要以下命令：

```
$ adb forward tcp:9999 tcp:4321

$ export AP_PORT=9999 
```

第一个命令将本地端口 9999 转发到设备上的端口 4321，而第二个命令定义稍后将使用的环境变量。现在您所要做的就是在您的台式机上运行 Python，导入 android.py 文件，然后您就可以开始运行了。

手机上提供的一项不错的功能是 API 浏览器。这个方便的工具会弹出所有可用 API 调用的列表以及所需的参数。如果您触摸并按住所需的功能，它甚至会将代码插入到编辑窗口中。使用 API 浏览器可以让您了解可以使用此脚本工具执行的各种操作。

![()](../Images/62de7f3be9cff9f385b32c576f8f07a7.png)

只需几行 Python 代码，就可以轻松自动更改多个电话设置。一种常见的用例是，当您回到家并想将手机设置为 WiFi 模式时，将屏幕亮度一直调高并关闭屏幕保护程序，关闭 GPS 和蓝牙并设置铃声。这是实现这一目标的代码：

```
# This script will turn on the charging profile

#

import android
droid = android.Android()

ï¿½

droid.setRingerVolume(0)

droid.setScreenBrightness(255)

droid.setScreenTimeout(9999)

droid.toggleWifiState(True)

droid.toggleBluetoothState(True) 
```

SL4A 为您的 Android 手机带来 Python 和多种其他语言的强大功能。能够通过一次操作更改多个电话设置是值得的。有一种非常快速的方法可以让您的脚本轻松地从您的 Android 屏幕启动。只需触摸并按住其中一个屏幕上的空白区域。然后选择“添加文件夹”并选择“脚本”文件夹。现在您所要做的就是触摸屏幕上的文件夹，然后 DockProfile.py 和您的充电配置文件都已设置完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-07T15:32:54.807

`android`据我所知，您无法安装该模块。它仅存在于 android 平板电脑或手机上。因此，如果您在 Android 设备上运行代码，则不会引发错误。但是在 PC 上运行它确实会引发错误。

我建议使用以下代码来防止错误：

```
import android
from kivy.utils import platform

if(platform == 'android'):
    droid = android.Android()

# etc. 
```

# c# - 如何从 XElement 中删除 XComments？

> ID：14709526
> 
> 赞同：7
> 
> 时间：2013-02-05T14:13:15.843
> 
> 标签：c#, linq-to-xml

我希望在将其发送给客户端之前从 XElement 中删除我的所有 XComment。

由于某种原因它不起作用并且 removeMe.Count()=0

有什么想法吗？

```
{

   // ...

   myXml = XElement.Load(myPath);
   var removeMe=myXml.Descendants().Where(x => x.NodeType == XmlNodeType.Comment);
   removeMe.Count();        // this is 0 , (not what i was expected)
   removeMe.Remove();

   //...

   string myResponseStr = myXml.ToString(SaveOptions.None);
   context.Response.ContentType = "text/plain";
   context.Response.Write(myResponseStr);
 } 
```

xml文件可以是这样的

```
 <user>   
    <name> Elen </name>

    <userSettings>
       <color> blue  </color>                <!-- the theme color of the page -->
       <layout>  horizontal  </layout>      <!-- layout choise -->

       <!-- more settings -->

     </userSettings>

 </user> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T14:22:40.787

您需要使用[`DescendantNodes`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.descendantnodes.aspx)而不是`Descendants`.

`Descendants`返回`XElement`实例，因此它基本上只返回 XML 的标签。
`DescendantNodes`返回`XNode`实例，其中包括注释。

```
doc.DescendantNodes().Where(x => x.NodeType == XmlNodeType.Comment).Remove(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T14:48:29.410

我也会使用，但是使用ie就足够了，`DescendantNodes`而不是调用。`Where``OfType<XComment>()``doc.DescendantNodes().OfType<XComment>().Remove()`

# c# - 静态委托数组中的实例方法

> ID：14709529
> 
> 赞同：0
> 
> 时间：2013-02-05T14:13:22.877
> 
> 标签：c#, delegates

我有一个很大的静态委托数组，对于类的所有实例都是相同的。我想将*实例方法*的引用放在数组中，即*打开实例委托*。编译器给我一个错误。我怎么做？

* * *

示例代码：

```
public class Interpreter
{
    // >7 instance fields that almost all methods need.

    private static readonly Handler[] Handlers = new Handler[]
    {
        HandleNop,          // Error: No overload for `HandleNop` matches delegate 'Handler'
        HandleBreak,
        HandleLdArg0,
        // ... 252 more
    };

    private delegate void Handler(Interpreter @this, object instruction);

    protected virtual void HandleNop(object instruction)
    {
        // Handle the instruction and produce a result.
        // Uses the 7 instance fields.
    }

    protected virtual void HandleBreak(object instruction) {}
    protected virtual void HandleLdArg0(object instruction) {}
    // ... 252 more
} 
```

* * *

我考虑过的一些想法：将所有实例字段作为参数提供，但这很快就会变得笨拙。为每个实例初始化处理程序列表，但这会极大地损害性能（我需要这个类的许多实例）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:13:22.877

根据[Jon Skeet](https://stackoverflow.com/a/7036455/146622)对另一个问题的回答，以下方法将起作用：

```
public class Interpreter
{
    private static readonly Handler[] Handlers = new Handler[]
    {
        (@this, i) => @this.HandleNop(i),
        (@this, i) => @this.HandleBreak(i),
        (@this, i) => @this.HandleLdArg0(i),
        // ... 252 more
    };

    private delegate void Handler(Interpreter @this, object instruction);

    protected virtual void HandleNop(object instruction) {}
    protected virtual void HandleBreak(object instruction) {}
    protected virtual void HandleLdArg0(object instruction) {}
} 
```

C# 中的直接支持会更好。也许还有另一种不涉及间接和额外输入的方法？

# python - 当这些字符串可以存在于其他地方时，Python 用于从两个指定字符串之间的文件中读取信息

> ID：14709534
> 
> 赞同：0
> 
> 时间：2013-02-05T14:13:37.657
> 
> 标签：python

我有一个文本文件，其中包含某些设备的信息。我想提取一些特定设备的信息。我想知道要提取哪些信息的方法是找到特定字符串时。

输入文本文件：

```
Table of Contents:
DeviceA ...... Page..
DeviceA2 ..... Page..
DeviceB ...... page..
DeviceB2...... Page..
Device1 ...... Page..
Device2 ...... Page..
DeviceC ...... Page..

Blah
Blah

[DeviceA, DeviceA2] Parameter Values:
Width = 1u
length = 2u etc...
Other Information

blah

[Device1] Parameter Values:
Width = 5u
length = 5u etc..
Other Information

blah

[DeviceB, DeviceB2] Parameter Values:
Width = 11u
length = 22u etc..
Other Information

blah

[Device2] Parameter Values:
Width = 5u
length = 5u etc..
Other Information

DeviceA, A2 description
Device1,2 description etc 
```

我有一个要提取信息的设备名称列表。在这种情况下，我有一个包含 [DeviceA, DeviceA2, DeviceB] 的列表，我想以粗体显示输出（所以当设备名称出现时，然后是**Other Information**。设备名称稍后可能会再次出现在文本文件。

So when device name DeviceA or DeviceA2 is chosen: the output should be (device name can be ignored, only the information between device name and **Other Information** is desired:

```
[DeviceA, DeviceA2] Parameter Values:
Width = 1u
length = 2u etc...
Other Information 
```

当设备B：

```
[DeviceB, DeviceB2] Parameter Values:
Width = 1u
length = 2u etc..
Other Information 
```

我尝试拆分整个文件时**我尝试在出现其他信息**然后通过解析设备名称按设备名称拆分。但这总是会导致一些问题。有什么建议么？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:36:27.140

这是非常令人困惑的英语，但是如果您只想要某些设备的“参数值：”之后和“其他信息”之前的文本，那么您需要的方法字符串具有子字符串和索引。

使用 index 找到您想要的设备的索引，然后再次使用 index（将您想要的设备的索引作为第二个参数）找到以下“参数值：”，然后再次找到“其他信息”然后只需子串。

类似于以下内容：

```
marker0 = myfile.index("DeviceA")
marker1 = myfile.index("Parameter Values:",marker0)
startpoint = marker1+len("Parameter Values:")
endpoint = myfile.index("Other Information", startpoint)
print("Relevant Information is: "+ myfile.substring(startpoint,endpoint) 
```

当然，您需要将其粘贴到一个函数中以便为每个设备执行此操作，并且您还需要越过文件开头声明的初始设备，但如果您了解上述工作原理，那应该很容易。

# html - 将列表样式图像与文本按比例对齐

> ID：14709538
> 
> 赞同：13
> 
> 时间：2013-02-05T14:13:49.623
> 
> 标签：html, list, css

所以我有

```
<ul>
  <li>Hello</li>
</ul> 
```

和

```
li {
    list-style-image: url(../img/bullet.png); /* 13x13 px */
    /* line-height: 13px; */
    /* vertical-align: middle; */
    padding-left: 5px;
} 
```

看起来像

![在此处输入图像描述](../Images/c54888bcb81b8dfe132aaed0a5b88c17.png)

如您所见，文本和图像元素`<li>`没有垂直对齐（图像高于文本），我尝试对其应用 line-height 和 vertical-align （注释掉的代码），但它甚至没有。有没有办法实现良好的对齐？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-05T14:28:00.517

填充只会影响元素内部的任何内容 - 在您的情况下是文本。

唯一可用的位置调整属性是[list-style-position](https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-position)，但唯一允许的值是`inherit`,`inside`或`outside`。最常见的做法是使用：

```
list-style: none; 
```

然后应用所需的图像作为`<li>`背景

```
li {
    /** the image will be vertically aligned in the center **/
    background: url(../img/bullet.png) left center no-repeat; 

    /** move the text to the right **/
    padding-left: 20px; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T12:45:24.510

你可以有

```
<li><span style="top:-5px; position:relative;">Text shifted 5px upper</span></li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:24:30.400

可以为 li-tag 定义 img-tag 或 background: url(..) 而不是“list-style-image”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:19:05.567

当每个列表项只有一行时，您可以`padding-bottom`向`li`元素添加一些

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-19T23:39:57.057

我还需要在背景属性中添加“无重复”

# java - 正则表达式，不包括非数字

> ID：14709539
> 
> 赞同：0
> 
> 时间：2013-02-05T14:13:52.377
> 
> 标签：java, regex

在我的程序中，我从控制台读取输入并确定它是否是数字。`Numbers can be any decimal +-`. 例如，不允许有 123.18p18，因为其中有一个非数字，与 -123.18p18 相同。这样做的坏方法（我目前正在做的）是检查它是否是双重并捕获异常，但由于我只是解析一个字符串，我认为正则表达式在这里使用要好得多。这是我使用它（正则表达式）的第一天，它似乎是一种外来语言。

我想出了`".*\\D+.*"`但只处理正数。

编辑：整数也是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:20:10.777

您正在寻找：

```
"^[+-]?\\d+([.]\\d+)?$" 
```

开头可选加号或减号，后跟至少一位数字。在字符串的结尾之前，可以选择有一个点，后跟至少一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:41:46.840

要解决您最初的问题，您可以使用[java.util.Scanner](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)类。它提供了测试下一个输入是否为整数、双精度等，甚至测试下一个输入是否符合给定正则表达式的方法。

```
import java.util.Scanner;
//...
Scanner s = new Scanner(System.in);

while ( s.hasNext() ) {
    if ( s.hasNextInt() ) {
        int i = s.readInt();
        // Some work.
    } else if ( s.hasNextDouble() ) {
        double d = s.nextDouble();
        // Some work.
    } else if ( s.hasNext(regex) ) {
        String t = s.next(regex);
        // Some work.
    }
    // etc.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:18:09.173

以下正则表达式可能对您有用；

它定义了一个以 + 或 - 开头的模式，后跟零个或多个数字，如果有小数点，那么它必须跟至少一个数字

```
"^[+-]?\\d+(?:\\.?\\d+)$" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:24:34.650

尝试`double doubleInstance = Double.parseDouble(string);`并继续...

# c++ - 输入流到向量 - 向量迭代器不可解引用

> ID：14709541
> 
> 赞同：3
> 
> 时间：2013-02-05T14:13:58.447
> 
> 标签：c++, boost, vector, stream

首先，我是 C++ 的新手，来自 Java。我想做一件简单的事情：使用 URDL-libs 从 Web 加载图片并将其保存到 char-vector。加载图像工作正常，我可以将其保存到磁盘，但是当我尝试将其加载到字符向量中时，我**在运行时**收到此错误：

```
Expression: vector iterator not dereferencable 
```

这是我的代码：

```
urdl::istream inputStream( url );
if( inputStream )
{
    inputStream >> std::noskipws;
    istream_iterator<char> inputStreamIterator( inputStream ), inputStreamEnd;
    string dateiname = "test.png";
    vector<char> imageVector;

    ofstream outputStream( dateiname, ios_base::binary );
    ostream_iterator<char> outputStreamIterator(outputStream);
    copy( inputStreamIterator, inputStreamEnd,  imageVector.begin());
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T14:21:23.990

你`std::vector<char>`没有容量，你不能`std::copy`直接使用。相反，您应该使用`std::back_insert_iterator`它将调用`push_back()`您的`std::vector`. 构建这样一个迭代器的最简单方法是使用`std::back_inserter`模板函数。

```
std::copy(inputStreamIterator, inputStreamEnd,
    std::back_inserter(imageVector)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T14:43:00.817

`std::copy`您可以通过使用输入迭代器初始化向量来完全避免调用：

```
std::vector<char> imageVector(
    std::istream_iterator<char>(inputStream), 
    std::istream_iterator<char>()); 
```

或者

```
std::vector<char> imageVector(
    std::istreambuf_iterator<char>(inputStream),
    std::istreambuf_iterator<char>()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:21:19.727

而不是`imageVector.begin()`你应该使用`back_insert_iterator`

# iphone - 如何根据 HTML 文本动态改变 webview 的高度

> ID：14709542
> 
> 赞同：0
> 
> 时间：2013-02-05T14:14:08.977
> 
> 标签：iphone, uitableview, uiwebview

我想增加 webview 的大小，根据 Html 文本行，但是我的 web view 大小没有正确，最初我在固定框架中显示内容，后来当用户选择行时，我需要根据 html 文本扩展单元格，请帮我解决这个问题，我使用的代码是

```
enter code here  NSLog(@"web view and selected ==== %d ---%d",webView.tag,selectedRow);
//CGFloat webViewHeight = 0.0f;
if (webView.subviews.count > 0) {
    UIView *scrollerView = [webView.subviews objectAtIndex:0];
    if (scrollerView.subviews.count > 0) {
        UIView *webDocView = scrollerView.subviews.lastObject;
        if ([webDocView isKindOfClass:[NSClassFromString(@"UIWebDocumentView") class]])
            webViewHeight = webDocView.frame.size.height;

        NSLog(@"web view height is %d",webViewHeight);
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:29:49.303

要获得实际的 HTML 文档高度，您应该执行以下操作：

```
NSUInteger height = [[webView stringByEvaluatingJavaScriptFromString:@"getDocHeight()"] intValue]; 
```

哪里`getDocHeight`是：

```
function getDocHeight() {
  return Math.max(
    Math.max(document.body.scrollHeight, document.documentElement.scrollHeight),
    Math.max(document.body.offsetHeight, document.documentElement.offsetHeight),
    Math.max(document.body.clientHeight, document.documentElement.clientHeight)
  );
} 
```

为此，您必须等待 HTML 文档完全呈现（即，您的委托已收到`webViewDidFinishLoad:`）。

PS：如果您想快速检查，您也可以简单地尝试：

```
 NSUInteger height = [[webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight"] intValue]; 
```

这也应该可以，但是上面的版本更便携。

# extjs - ExtJS MVC 中的奇怪故障

> ID：14709543
> 
> 赞同：1
> 
> 时间：2013-02-05T14:14:21.367
> 
> 标签：extjs, extjs4, extjs4.1

使用 ExtJS v4.1 MVC，我有一个包含以下代码的应用程序类：

```
Ext.application({
name: 'SHOP',
appFolder: 'shop',
     ... 
```

我的主视口有以下代码和项目：

```
requires: ['SHOP.view.CategoryKey'],
requires: ['SHOP.view.ProductLister'],
     ...

            layout: {
            type: 'border',
            padding: 3
        },
        items: [{
            region: 'west',
            title: 'TEST1',
            xtype: 'CategoryKey'
        },{
            region: 'center',
            title: 'TEST2',
            border: false
        }] 
```

请注意，我的视口*没有*使用 ProductLister 对象（但请耐心等待）。

为了完整起见，下面是 ProductLister 的代码。请注意，这只是一些旨在将视图放入我的应用程序的基本内容。

```
Ext.define('SHOP.view.ProductLister', {
extend: 'Ext.view.View',
alias: 'widget.productimages',
title: 'List Test'
}); 
```

我看到了两件非常奇怪的事情。首先，当我按上面显示的顺序放置 requires 语句时，当我尝试显示页面时出现以下故障（使用调试运行）：

> 类型错误：名称未定义

但是如果我更改 requires 语句的*顺序*，使其如下所示：

```
 requires: ['SHOP.view.ProductLister'],
requires: ['SHOP.view.CategoryKey'], 
```

错误消失了！

我看到的第二件奇怪的事情是，当我实际更改项目列表以便中心有我的 ProductLister 时：

```
 layout: {
            type: 'border',
            padding: 3
        },
        items: [{
            region: 'west',
            title: 'TEST1',
            xtype: 'CategoryKey'
        },{
            region: 'center',
            xtype: 'productimages'
        }] 
```

我遇到了同样的失败：

> 类型错误：名称未定义

我还监视了文件的加载，并注意到在所有情况下 ProductLister.js 文件都不会加载！

其他一些事实：

1.  MVC 应用程序具有标准的目录集，只有根是“shop”（因此应用程序中的 appFolder 属性）。CategoryKey 和 ProductLister 类都在视图子文件夹中。

2.  我确实有一个列出两个视图类的控制器（我最终想在控制器中将它们之间的事件处理放在一起）：

    ```
    config: {
    stores: ['Categories'],
    views: ['CategoryKey','ProductLister']
    }, 
    ```

理论上，在 requires 语句和控制器中的配置之间，我的两个视图都应该被加载。但由于某种原因，ExtJS 加载器似乎正在加载 CategoryKey.js 文件而不是 ProductLister.js 文件。

此外，我会假设 requires 语句的顺序无关紧要，但是当我不使用 ProductLister 对象时，它显然会起作用。

我要么在 MVC 机制中发现了一个奇怪的错误，要么我错过了一些东西。我希望我错过了什么。

有谁知道这里发生了什么？更重要的是，我该怎么做才能使这段代码工作？？？我是否在某处遗漏了声明？如果有，在哪里？

有人请指教...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:01:56.430

最奇怪的是你声明了`requires`两次属性，覆盖了第一次：

```
var o = { a:[1], a:[2] };
o.a.join(' ') === '1 2' // false
o.a.join(' ') === '2' // true 
```

试试这个：

```
requires: ['SHOP.view.ProductLister', 'SHOP.view.CategoryKey'] 
```

# yii - Yii：在 CGridview 中包含 JS/Ajax 函数的最佳性能有益方式

> ID：14709549
> 
> 赞同：1
> 
> 时间：2013-02-05T14:14:34.087
> 
> 标签：yii, yii-extensions

Yii新手在这里我不止一次尝试找出一种在我的CGRIDVIEW中以一种简单干净的方式包含Ajax / JS函数的方法，代码基本上是

```
'click'=> "function (){
    $.fn.yiiGridView.update('news-grid', {
    type:'POST',
    url:$(this).attr('href'),
    success:function(data) {
        $('#AjFlash').html(data).fadeIn().animate({
            opacity: 1.0
        }, 3000).fadeOut('slow');

        $.fn.yiiGridView.update('news-grid');
    }
})
return false; 
```

}"

在您看来，包含此内容的最干净、最有利于性能的方式是什么？感谢您的时间 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:37:03.113

我不知道，但我认为没有必要强制网格在一次操作中更新两次，我也不喜欢这样包含我的 javascript。根据我的需要，有几种方法，为了这个答案，我将向您展示最简单的方法：

在单独的文件中创建一个全局对象：

```
//app.js
var App = {
  updateSomething: function () {
    $.post(
      $(this).attr('href'),
      success:function(data) {
        $('#AjFlash').html(data).fadeIn().animate({
          opacity: 1.0
        }, 3000).fadeOut('slow');
        $.fn.yiiGridView.update('news-grid');
      }
    );
    return false;
  }
}; 
```

您可以通过调用[CCLientScript::registerScriptFile从控制器中包含该文件](http://www.yiiframework.com/doc/api/1.1/CClientScript#registerScriptFile-detail)

```
Yii::app()->clientScript->registerScriptFile(Yii::app()->baseUrl."js/app.js"); 
```

在你的网格上：

```
'click'=> "js:App.updateSomething", 
```

有很多更好的方法，但对于想要有某种组织的 js 初学者来说，这更简单。

# python - 如何使用正则表达式删除python中的逗号、括号？

> ID：14709557
> 
> 赞同：1
> 
> 时间：2013-02-05T14:15:05.780
> 
> 标签：python, regex

这些是我的文本文件（例如：abc.doc）的内容：

```
{'data': [{'name': 'abc'},{'name': 'xyz'}]} 
```

在python中打开文件后；如何删除所有括号、引号和逗号。最终输出应该是：

```
data:
name:abc
name:xyz 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:17:49.890

用于[`ast.literal_eval()`](http://docs.python.org/2/library/ast.html#ast.literal_eval)将其转换为 python 结构，然后打印值：

```
with open(r'd:\output1.doc', 'r') as inputfile:
    inputstring = inputfile.read()

data = ast.literal_eval(inputstring)
for key, sublist in data.items():
    print '{}:'.format(key)
    for subdict in sublist:
        for key, value in subdict.items():
            print('{}:{}'.format(key, value)) 
```

对于您的示例，结果为：

```
>>> inputstring = "{'data': [{'name': 'abc'},{'name': 'xyz'}]}"
>>> import ast
>>> data = ast.literal_eval(inputstring)
>>> for key, sublist in data.items():
...     print '{}:'.format(key)
...     for subdict in sublist:
...         for key, value in subdict.items():
...             print '{}:{}'.format(key, value)
... 
data:
name:abc
name:xyz 
```

*但是*：如果您是从 Facebook API 获得的，那么您转录的格式不正确。Facebook API 为您提供 JSON 数据，它使用*双引号 ( `"`) 代替*：

```
{"data": [{"name": "abc"},{"name": "xyz"}]} 
```

在这种情况下，您应该使用 Python 附带的[`json`库](http://docs.python.org/2/library/json.html)：

```
import json

data = json.loads(inputstring)
# process the same way as above. 
```

如果您有文件名，则可以使用以下命令要求库直接从文件中读取：

```
data = json.load(filename)  # note, no `s` after `load`. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:22:45.823

在我看来你有[json](http://www.json.org)，可以使用[pyjson](http://docs.python.org/2/library/json.html)轻松解析：

```
import json
obj=json.loads(u'''{'data': [{'name': 'abc'},{'name': 'xyz'}]}''') 
```

鲍勃现在是你叔叔了，尼特？

# c# - 重构返回匹配值的 linq-to-sql 方法

> ID：14709559
> 
> 赞同：2
> 
> 时间：2013-02-05T14:15:11.163
> 
> 标签：c#, linq, linq-to-sql, refactoring

我有一个简单的 linq-to-sql 语句，它将 a`string[]`中的值与表中的值匹配并返回匹配的表值。

`_table`是类型`System.Data.Linq.Table<TEntity>`

```
public IEnumerable<ZipCode> match(IEnumerable<string> values) {
    HashSet<string> valueSet = new HashSet<string>(values);
    return _table.Where(x => valueSet.Contains(x.zipcode);
} 
```

我怎样才能重构它，以便我可以将要使用的字段传递到`Contains()`?

我失败的尝试：

```
public IEnumerable<ZipCode> match<T>(IEnumerable<T> values, 
        Expression<Func<ZipCode, T>> field) {
    HashSet<T> valueSet = new HashSet<T>(values);
    return _table.Where(x => valueSet.Contains(field(x)));
} 
```

这会产生错误：

> 方法“System.Object DynamicInvoke(System.Object[])”不支持 SQL 转换。

我的想法是，我可以使用表达式树为字段提供字段，`Contains()`但对如何或是否是使用表达式的正确方法感到困惑。可能有一个更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:12:28.687

我能够使用以下内容（在 .NET 4.5 中，但我相信它可以在早期版本中使用）

```
static IEnumerable<TTable> Match<TTable, TField>(IQueryable<TTable> table, IEnumerable<TField> values, Expression<Func<TTable, TField>> fieldSelector)
{
    var valuesConstant = Expression.Constant(values.Distinct());

    var callContains = Expression.Call(typeof(Enumerable), "Contains", new[] { typeof(TField) }, new Expression[] { valuesConstant, fieldSelector.Body });

    var whereExpression = Expression.Lambda<Func<TTable, bool>>(callContains, (fieldSelector.Body as MemberExpression).Expression as ParameterExpression);

    return table.Where(whereExpression);
} 
```

您应该能够删除我使用的表参数并使用您拥有的成员变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:53:28.027

而不是`Expression<Func<ZipCode, T>> field`使用`Func<ZipCode, T> field`：

```
public IEnumerable<ZipCode> match<T>(IEnumerable<T> values, Func<ZipCode, T> field)
{
    HashSet<T> valueSet = new HashSet<T>(values);
    return _table.Where(x => valueSet.Contains(field(x)));
} 
```

# express - 在 Jade 中，为什么我有时可以按原样使用变量，而有时必须将它们括在 #{......} 中？

> ID：14709560
> 
> 赞同：2
> 
> 时间：2013-02-05T14:15:17.013
> 
> 标签：express, pug

看下面的代码

```
 for story in book 
            if story.title.length < 140
                - var storyTitle = story.title;
            else
                - var storyTitle = story.title.substring(0, 140) + '...';

            .tiles
                a(href= 'http://' + story.link)
                    img(src=story.thumbnail, width='150', height='150')
                p Title: #{storyTitle}
                p Date: #{story.time}
                p Author: #{story.authorName} 
```

这对我有用。然而让我感到困惑的是，有时我可以使用story.attribute，而在某些地方我必须使用#{story.attribute}。

例如。如果我使用这条线

```
p Title: storyTitle 
```

没有小胡子，它只是在浏览器中打印字符串“Title:storyTitle”。

另一个例子，如果我使用`img(src=#{story.thumbnail}, width='150', height='150')`，它不起作用，我在我的浏览器中得到一个 html 字符串 (%20%20...something...)。

那么什么给了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T21:33:50.043

简单地说

> 在等号`(=)`和内部代码块之后没有花括号。其他任何地方都使用`#{}`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T17:52:25.507

区别在于标签的内容和属性。在属性中，您可以使用不带大括号的变量，例如

```
img(src=story.thumbnail 
```

因为您不能只将文本放在属性值中，所以它必须是一个字符串：

```
img(src="/images/story.jpg") 
```

你不能只做

```
img(src=/images/story.jpg) 
```

但是在标签的内容中，您必须使用哈希+大括号`#{}`，以便 Jade 知道哪些位是变量，哪些位只是文本。

如果你想在标签属性中使用哈希+大括号，你可以这样做：

```
img(src="#{story.thumbnail}") 
```

# css - 我可以在 CSS 中继承类作为包装层吗

> ID：14709564
> 
> 赞同：1
> 
> 时间：2013-02-05T14:15:27.120
> 
> 标签：css, html, twitter-bootstrap

就像在编程语言中一样！是否可以在 CSS 中执行如下所示的类似操作？

```
<style type="text/css">
   .classA { properties 1,2,3... }

   .classB { properties a, b, c... }

   .classAB { inherit- classA, classB }
</style> 
```

在使用 Bootstrap 时，我经常不得不使用很多`div`'s，这让我感到困惑，甚至弄乱了我的代码。所以，我决定知道是否有如上所示的任何功能..

现在，当我申请时`<p class="classAB"></p>`，它应该继承 classA 和 classB 功能！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:18:11.073

不，不在“香草”CSS 中。

使用具有此功能（以及更多功能）并编译为 CSS 的 LESS 或 SASS。请参阅[http://sass-lang.com/](http://sass-lang.com/)或[http://lesscss.org/](http://lesscss.org/)

当然，你可以使用

```
.classA { properties 1,2,3 }
.classB { properties a,b,c }

<div class='classA classB'>...</div> 
```

这不是真正的继承，但可能会做你想做的事。

# xna - 多次应用相同的效果？

> ID：14709573
> 
> 赞同：1
> 
> 时间：2013-02-05T14:16:05.043
> 
> 标签：xna, shader

我遇到了一个我无法解决的问题。我必须在多次使用相同的效果时绘制纹理。我正在尝试实现这样的目标：

```
spriteBatch.Begin(); 

// Use the effect multiple times with a different parameter:
lightEffect.Parameters["parameter"].SetValue(value1);
lightEffect.CurrentTechnique.Passes[0].Apply();      
lightEffect.Parameters["parameter"].SetValue(value2);
lightEffect.CurrentTechnique.Passes[0].Apply();                                        

spriteBatch.Draw(texture, new Vector2(0, 0), Color.White);

spriteBatch.End(); 
```

仅使用第二个效果。这就是为什么我决定每次使用效果多次重绘 RenderTarget 到自身，但这也失败了，因为`"The render target must not be set on the device when it is used as a texture"`.

```
graphicsDevice.SetRenderTarget(tempRenderTarget);

spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend);
spriteBatch.Draw(texture, new Vector2(0,0), Color.White);
spriteBatch.End();           

foreach (Value value in values)
{
    spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend);            

    lightEffect.Parameters["paramter"].SetValue(value);
    lightEffect.CurrentTechnique.Passes[0].Apply();                    

    spriteBatch.Draw(tempRenderTarget, new Vector2(0, 0), Color.White);

    spriteBatch.End();  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:26:39.713

您必须使用两个交替的渲染目标：

```
RenderTarget input;
RenderTarget output;

for (int i = 0; i < numberOfPasses; i++)
{
    // Bind the target that is currently the output
    graphicsDevice.SetRenderTarget(output);

    // Use the current input target as texture in your effect
    // ...

    // Swap input and output
    RenderTarget temp = input;
    input = output;
    output = temp;
} 
```

# c++ - 哪个会更好：unique_ptr 到 2D 数组或 unique_ptrs 的 2D 数组？

> ID：14709575
> 
> 赞同：1
> 
> 时间：2013-02-05T14:16:12.260
> 
> 标签：c++, arrays, unique-ptr

我目前正在制作我的一个旧项目的内存安全。

在这个项目中，我有一个 2D 数组，其中填充了指向我自己的类实例的指针`Block`。

声明如下：

```
Block* gemGrid[xMax][yMax]; 
```

然后像这样填充：

```
for(int i = 0; i<8; i++)
{
    for(int j = 0; j<8; j++)
    {
        //do stuff here
        gemGrid[i][j] = new Block(i,j, gridOffset);
    }
} 
```

这工作正常。

我有创建一个二维数组`unique_ptr<Block>`而不是`Block*`.

我决定这样声明：

```
unique_ptr<Block> gemGrid[xMax][yMax]; 
```

并像这样填充：

```
for(int i = 0; i<8; i++)
{
    for(int j = 0; j<8; j++)
    {
        gemGrid[i][j].reset( new Block(i,j, gridOffset));
    }
} 
```

然而，当我尝试这个时，编译器决定完全忽略第二个 for 循环（'j' 递增部分），并且只创建一个一维数组。

这让我问，二维数组`C++`有问题吗？`unique_ptrs`我是否应该坚持使用指向`Block`s 的 2D 指针数组，并`unique_ptr`确保该数组超出范围时被杀死？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:40:14.253

C++ 对 . 的二维数组没有任何异议`unique_ptr`。

你提供的两种选择对我来说似乎不是真正的选择。如果您有一个`unique_ptr`的二维数组`Block*`，并且您分配了using`xMax * yMax`的实例并将指向它们的指针存储在您的数组中，那么谁或什么将释放这些实例？当然不是。所以“我应该这样做”的答案几乎肯定是“不”，因为你会有内存泄漏。`Block``new``Block``unique_ptr`

分配 2-D 实例布局的最“明显”方式`Block`是定义 2-D 数组`Block`（使用内置数组或`std::array`如果可用）。如果您可以识别出任何不适合您的内容，那么有人可以为您的旧代码建议一种替代方法以避免内存泄漏。

[回应上述评论] 完成`Block gemGrid[xMax][yMax];`后，如果需要，您可以获得指向您的 Block 对象之一的指针，如下所示：`&gemGrid[i][j]`. 需要指针与内存分配完全无关。指针*是*允许您访问它分配的对象的方法`new`，但是您可以获取指向对象的指针，而不管它是如何分配的。

# javascript - 水平滑动手势和垂直页面滚动

> ID：14709577
> 
> 赞同：6
> 
> 时间：2013-02-05T14:16:15.057
> 
> 标签：javascript, jquery, bxslider

我正在构建一个移动站点，并且我有一个图像幻灯片放映，允许水平滑动图像。我正在使用的 javascript 库是 bxslider。但是，如果触摸幻灯片并想要向上/向下滚动页面，则幻灯片会阻止垂直滚动，因此必须触摸站点的另一部分。

有人可以告诉我如何保持垂直滚动启用（即不允许幻灯片阻止正常滚动？）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T05:44:15.890

试试这个， 把库中的`onTouchMove` fn 改成这个`bxslider`

```
 var onTouchMove = function (e) {
        if (slider.settings.mode != 'fade') {
            var orig = e.originalEvent;
            var value = 0;
            // if horizontal, drag along x axis
            if (slider.settings.mode == 'horizontal')
            {   
                var hchange = orig.changedTouches[0].pageX - slider.touch.start.x;
                var vchange = orig.changedTouches[0].pageY - slider.touch.start.y;

                if(Math.abs(hchange)>20 && Math.abs(hchange)>Math.abs(vchange))
                {   
                    value = slider.touch.originalPos.left + hchange;
                    setPositionProperty(value, 'reset', 0);
                    e.preventDefault();
                }
                // if vertical, drag along y axis
            } else{
                e.preventDefault();
                var change = orig.changedTouches[0].pageY - slider.touch.start.y;
                value = slider.touch.originalPos.top + change;
                setPositionProperty(value, 'reset', 0);
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T18:43:40.427

如果您转到 bxslider 网站的选项页面，请搜索 preventDefaultSwipeX 和 preventDefaultSwipeY

这些就是你要找的。

# java - 如何防止用户删除 JVM 正在使用的文件

> ID：14709579
> 
> 赞同：5
> 
> 时间：2013-02-05T14:16:15.543
> 
> 标签：java, unix, jvm, rm

我有一段 JAVA 代码，它读取一些文件并将它们加载到内存中一段时间​​。文件句柄在读取后保留。我的问题是我想限制用户使用“DEL”键或 rm 命令删除这些文件。

我可以通过保留文件句柄在 Windows 上实现相同的目的，而在 Unix rm 上不遵守文件的锁定。我什至尝试过`Filechannel.lock()`，但它也没有帮助。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T14:19:44.207

只要您打开句柄，他们就可以从目录中删除文件，但不能删除文件。即，在您关闭文件或进程终止之前，不会删除该文件。

> 我什至尝试过 Filechaanel.lock() 但它也没有帮助。

那是因为它是目录，而不是正在更改的文件。例如，如果他们对文件有写访问权，但对目录没有写访问权，他们就不能删除它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T14:21:27.043

您还可以查看可用于锁定文件的[chattr 。](http://en.wikipedia.org/wiki/Chattr)

```
chattr +i filename 
```

应该使文件不可删除。然后，您可以通过...使其再次可删除

```
chattr -i filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:24:38.083

对此没有纯 Java 解决方案。事实上，我认为根本没有一种解决方案不会产生潜在的不良后果。根本问题是 UNIX / LINUX 没有办法在文件上临时设置强制锁定。（用于锁定文件的 Linux 系统调用是`flock`，但flock 式锁定是任意的。不打扰`flock`文件的应用程序不会受到文件上其他应用程序锁定的影响。）

您可以做的最好的事情是使用`chattr +i`在文件上设置“不可变”属性。不幸的是，这还有其他影响：

*   无法写入或链接到不可变文件。

*   如果您的应用程序在没有取消设置属性的情况下崩溃，则用户会留下一个他/她神秘地无法更改或删除的文件。即使使用 sudo 或 su 也不行。

# python - 多个数据文件的循环图 - Python

> ID：14709584
> 
> 赞同：0
> 
> 时间：2013-02-05T14:16:27.970
> 
> 标签：python, matplotlib

我想编写一个程序，从 100 个文本文件中创建 100 个蒙版图。IE`for fnum in range(1,100,1):`

文本文件编号为 xydata1.txt、xydata2.txt ... 直到 xydata100.txt。

这在 Python 中是如何做到最好的？

下面是我的绘图程序，其中（文件编号 fnum）= 1,2,3...100。

```
 fn = 'xydata'+fnum+'.txt'
    y = loadtxt(fn,unpack=True,usecols=[0])
    x = loadtxt(fn,unpack=True,usecols=[1])

    n = ma.masked_where(gradient(y) < 0, y)
    p = ma.masked_where(gradient(y) > 0, y)

    pylab.plot(x,n,'r',x,p,'g')

    pylab.savefig('data'+fnum+'.png')
    pylab.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:19:25.790

假设 Python 2.7

```
from glob import glob
from pylab import *

for fname in glob("xydata*.txt"):
    x, y = loadtxt(fname, unpack=True, usecols=[1, 0])
    mask_inf = gradient(y) < 0
    mask_sup = gradient(y) >= 0

    plot(x[mask_inf], y[mask_inf], 'r')
    plot(x[mask_sup], y[mask_sup], 'g')

    legend(("grad(y) < 0", "grad(y) >= 0"))
    title(fname)

    savefig(fname.replace("xydata", "data").replace(".txt", ".svg"))
    clf() 
```

您也可以使用掩码数组。但它们的唯一优点是避免分配新内存。如果您的地块足够小，则不需要它们。

顺便说一句，没有“最佳答案”。

# odp.net - System.Data.OracleClient 和 ODP.Net 11g 在 .net 2.0 网站中一起使用的问题

> ID：14709587
> 
> 赞同：1
> 
> 时间：2013-02-05T14:16:32.303
> 
> 标签：odp.net, system.data.oracleclient

在我们基于 .net framework 2.0 的应用程序中，我们使用 System.Data.Oracleclient 现在迁移到 ODP.Net，项目量太大，因此我们无法一次性完成整个迁移，结果应用程序是截至目前，使用 2 个提供商 System.Data.Oracleclient 和 ODP.Net。

现在我们正在更改我们的操作系统，从 Windows xp 32 位到 Windows 7 64 位。在这样做的同时，我们观察到以下情况，

1) 使用 System.Data.Oracleclient 和 ODP.Net 10g 64 位（Oracle.DataAccess.dll 版本 2.102.2.20）在 < 1 秒内执行查询。并且在 Oracle SQL Developer v1.5 上执行相同的查询不到 1 秒。

2）但是，使用带有 ODP.Net 11g 64 位（Oracle.DataAccess.dll 版本 2.112.3.0）的 System.Data.OracleClient 执行相同的查询需要 2-3 分钟。

我们在第 2 点发现性能显着下降），我们必须在 Windows 7 64 位操作系统上使用带有 ODP.Net 11g 64 位（Oracle.DataAccess.dll 版本 2.112.3.0）的 System.Data.OracleClient，但我们无法忍受这种性能如第 2 点所述的退化，我们无法将所有使用 System.Data.OracleClient 的代码快速转换为 ODP.Net。

那么任何人都可以帮助我们，为什么我们会看到第 2 点中提到的如此显着的性能下降，以及我们如何解决这个问题。

问候桑吉布·哈乔杜里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:09:01.510

将以下内容添加到您的配置中会将 odp.net 跟踪信息发送到日志文件：

```
 <oracle.dataaccess.client>
    <settings>
      <add name="TraceFileName" value="c:\temp\odpnet-tests.trc"/>
      <add name="TraceLevel" value="63"/>
    </settings>
  </oracle.dataaccess.client> 
```

如果您能及时找到较大的时间间隔，这可能只会有帮助。很有可能行实际上正在进入，只是速度较慢。

**尝试将“enlist=false”添加到您的连接字符串**。我不认为这是一个解决方案，因为它有效地禁用了分布式事务，但它应该可以帮助您隔离问题。[您可以从oracle forumns 帖子](https://forums.oracle.com/forums/thread.jspa?threadID=2284204)中获得更多信息：

> 从 ODP 的角度来看，我们真正能指出的是，当在底层 OCI 连接上设置 OCI_ATR_EXTERNAL_NAME 和 OCI_ATR_INTERNAL_NAME 时会发生这种行为（启用 distrib tx 支持时会发生这种情况）。

我猜您没有看到的是 odp.net 调用和 sql 开发人员调用之间的执行计划实际上是不同的（这意味着实际的性能损失实际上发生在服务器上）。让您的 dba 跟踪连接并从 odp.net 调用和直接来自 SQL Developer 的调用（或使用 enlist=false 参数）获取执行计划。

如果您确认不同的执行计划，或者如果您想在黑暗中先发制人，请**更新相关表的统计信息**。在我的例子中，这纠正了这个问题，表明执行计划的生成并没有真正遵循针对不同类型连接的不同规则，但是当可能涉及分布式事务时，成本分析稍微悲观一些。强制执行计划的查询提示也是一种选择，但仅作为最后的手段。

最后，可能是网络问题。如果您的 odp.net 安装使用的是新的 oracle 主目录（除非您进行了一些安装后配置，否则我会期望它），那么 tnsnames.ora 可能会有所不同。主机名可能不是完全限定的，从而造成解析服务器的更多延迟。在这种情况下，我只希望第一次尝试（而不是后续尝试）会很慢，所以我认为这不是问题，但我认为应该提到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:00:03.390

请参考此[链接](https://forums.oracle.com/forums/message.jspa?messageID=10838881)，或者将 ODP.Net 64 位组件替换为 ODP.Net 32​​ 位，因为我们使用的是 asp.net，所以我们可以轻松地配置我们的应用程序以使用 Windows 7 (x64) 版本中的 32 位组件运行。

# java - 使用 DocumentListener 替换

> ID：14709589
> 
> 赞同：0
> 
> 时间：2013-02-05T14:16:42.077
> 
> 标签：java, replace, documentlistener

我有两个文本区域。当我在第一个 textarea 中输入内容时，它会显示在带有 documentlistener 的第二个文本区域中。我想用 replace 用不同的词替换某些词（比如翻译）。

我的 DocumentListener 看起来像这样：

```
DocumentListener documentListener = new DocumentListener() {

    public void changedUpdate(DocumentEvent documentEvent) {
        printIt(documentEvent);
    }
    public void insertUpdate(DocumentEvent documentEvent) {
        printIt(documentEvent);
    }
    public void removeUpdate(DocumentEvent documentEvent) {
        printIt(documentEvent);
    }
    private void printIt(DocumentEvent documentEvent) {
        DocumentEvent.EventType type = documentEvent.getType();
        String typeString = null;
        if (type.equals(DocumentEvent.EventType.CHANGE)) {
        }  
        else if (type.equals(DocumentEvent.EventType.INSERT)) {
            String hello = area1.getText();
        hello.replace("hei", "hello");
        area2.setText(hello);
        }
        else if (type.equals(DocumentEvent.EventType.REMOVE)) {
            String hello = area1.getText();
        area2.setText(hello);
        }
    }
}; 
```

但这不起作用。我以为 hello.replace 会将在 area1 中输入的单词 hei 替换为 hello，然后会显示在 area2 中。但是，它并没有改变这个词。那么我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:24:39.033

字符串是不可变的；他们不能改变。所以：

```
你好。替换（“嘿”，“你好”）；

```

应该：

```
hello = hello.replace("hei", "hello");

```

Replace 方法必须返回一个包含您所做更改的新字符串，因为它无法修改原始字符串。

# delphi - 自定义 PropertyEditors - 他们似乎从未出现

> ID：14709590
> 
> 赞同：3
> 
> 时间：2013-02-05T14:16:42.463
> 
> 标签：delphi, custom-controls, delphi-xe, custom-component

**信息**

我似乎完全不知道应该如何管理我的组件包和安装自定义属性编辑器。过去一周左右我一直在查看示例和教程，显然我做错了什么，因为我的属性编辑器从未出现在对象检查器中，我需要逐步说明来尝试解决这种挫败感。

**组件包**

我目前有一个包，它`designtime and runtime`在选项中设置为。添加到这个包中的是我的组件的单元（即，MyButton、MyListBox 等） - 此外，我还有一个包含该`RegisterComponents`过程的单元。我现在可以构建和安装它，将我的组件添加到一个新项目并运行它们而不会出现任何问题。

**添加自定义 PropertyEditor**

现在我想从上面的包中为我的组件引入一个属性编辑器，这让我变得棘手和困惑。

例如 TMyButton 是一个带有我自己的绘制方法的自定义按钮，它已经发布了允许更改按钮外观的属性 - 此外还有一个发布列表允许选择预设外观设置，例如：

`TMyButtonStyle = (bsStyle1, bsStyle2, bsStyle3)`

我想删除预设样式列表，而是向对象检查器添加一个名为“PresetStyles”的属性。此属性将属于 paDialog，我想显示一个表单，我可以在其中直观地看到不同的按钮样式 - 一种比从简单列表中选择预设样式的更加图形化的方式。

**我需要哪些包**

如果我理解，您需要拆分`designtime`包和`runtime`包吗？

这是否意味着我需要两个寄存器单元，一个用于组件，一个用于属性编辑器？

我不完全确定如何管理这个，正如我所说的，我当前的包是`designtime and runtime`，我不确定我应该将它分成什么包类型。如果我为属性编辑器制作了一个新的设计时包，而`runtime`只制作了另一个包，我会丢失安装按钮。即使现在写这篇文章也让我感到困惑。

**安装属性编辑器**

我尝试过的其中一篇文章来自此页面： http: [//www.delphisources.ru/pages/faq/master-delphi-7/content/LiB0097.html](http://www.delphisources.ru/pages/faq/master-delphi-7/content/LiB0097.html)

我唯一改变的是添加我自己的对话框表单，并从以下位置更改注册代码：

`RegisterPropertyEditor(TypeInfo(string), TMdSoundButton, 'SoundUp', TSoundProperty);`

至

`RegisterPropertyEditor(TypeInfo(string), TMyButton, 'PresetStyles', TSoundProperty);`

我知道它仍然说 TSoundProperty，我只是让它保持这样，直到我可以让它工作然后我会更改类名。

**结论**

在实际组件和设计端（即 PropertyEditors）之间拆分/管理包的正确方法是什么？

PropertyEditor 从未出现在对象检查器中的 TMyButton 上，我觉得这一定与未正确配置包有关。

我真的很感谢这里的某种帮助，甚至是指向一个非常好的教程指南的链接或我所做的任何事情似乎都不起作用，即使使用很多示例也不适合我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T17:18:22.807

> 我目前有一个包，它在选项中设置为设计时和运行时。

要实现自定义属性/组件编辑器，您**必须**将代码分成两个包 - 一个`runtime only`包仅包含组件本身的实现代码，另一个`designtime only`包仅包含组件注册和自定义编辑器的实现代码。设计时包需要`designide`在其`Requires`列表中指定运行时包和包。运行时包被编译成可执行文件。designtime 包是 IDE 用来让您的组件出现在 Component Palette 和 Form Designer 中并与它们交互的东西。

> 这是否意味着我需要两个寄存器单元，一个用于组件，一个用于属性编辑器？

不，运行时包应该根本没有注册。这属于设计时包。您可以在设计时包中拥有一个`Register()`注册所有内容的函数。

> 如果我为属性编辑器创建一个新的设计时包，并且只创建另一个包运行时，我会丢失安装按钮。

您不能将运行时包安装到 IDE 中，只能安装设计时包。

> 我尝试过的其中一篇文章来自此页面： http: [//www.delphisources.ru/pages/faq/master-delphi-7/content/LiB0097.html](http://www.delphisources.ru/pages/faq/master-delphi-7/content/LiB0097.html)
> 
> 我唯一改变的是添加我自己的对话框表单，并从以下位置更改注册代码：
> 
> RegisterPropertyEditor(TypeInfo(string), TMdSoundButton, 'SoundUp', TSoundProperty);
> 
> 至
> 
> RegisterPropertyEditor(TypeInfo(string), TMyButton, 'PresetStyles', TSoundProperty);

你的`TMyButton`组件是否真的定义了`PresetStyles`一个类型的属性`String`？您不能为不存在的属性定义属性编辑器。

在不确切知道您的`PresetStyles`属性是如何在组件本身中实现的以及它代表什么的情况下，为属性调用弹出对话框可能没有多大意义`String`（可能除了文件名之类的东西）。根据您的描述，实现**组件编辑器**而不是**属性编辑器**可能更有意义，并保留您现有的`TMyButtonStyle`单独使用 IDE 的枚举属性的默认编辑器。要调用您的弹出对话框，组件编辑器将允许用户右键单击组件本身并从弹出菜单中选择“编辑”（或您决定命名的任何其他字符串值），或者只需双击组件，在表单设计器中。然后，您可以根据需要显示和编辑组件，并在对话框关闭时将任何更改分配给组件。

> PropertyEditor 从未出现在对象检查器中的 TMyButton 上，我觉得这一定与未正确配置包有关。

很难确定，因为您还没有显示任何实际代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T15:01:26.823

> 如果我理解，您需要拆分设计时包和运行时包吗？
> 
> 这是否意味着我需要两个寄存器单元，一个用于组件，一个用于属性编辑器？

不会。一个注册单元同时注册组件和属性编辑器就足够了，只要在运行时不使用该注册单元（通常不使用）。这也适用于包含属性编辑器的单元。防止`DesignEditors.pas`在运行时使用，然后就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T15:02:04.703

**组件包**

今天可以为两者准备一个包裹。过去，如果应用程序与运行时包一起分发以减小总大小，则将它们拆分是有意义的。到目前为止，我喜欢将它们分开以分离实现和设计接口。

**我需要哪些包**

如果您有两个包，则必须在设计时包的“要求”中引用运行时包。因此，您只需注册设计时包。运行时包是隐式加载到 IDE 中的。在您使用一个包裹的情况下，您必须注册它。

**安装属性编辑器**

第一个参数有问题。它必须是属性的类型信息。

```
RegisterPropertyEditor(TypeInfo(TMyButtonStyle), TMdSoundButton, 'PresetStyles', TSoundProperty); 
```

TSoundProperty 应该是 TEnumProperty 的 descand。

**结论**

继续一个包裹。该属性应与更改的代码一起出现。如果不是，请检查该属性是否不是只读的。

# iphone - 实时捕获特定的 CALayer（和子视图）到视频文件（或数据）

> ID：14709593
> 
> 赞同：1
> 
> 时间：2013-02-05T14:17:09.670
> 
> 标签：iphone, ios5, uiimageview, calayer, cgimage

我有一个 UIView（带有它的 CALayer），它有`UIImageView`一个子视图。UIImageView 是动画的 ( `imageView.animationImages`)。

我想将当前播放的动画捕捉到一个视频文件，或者视频数据（以后要转换成视频文件），但不是捕捉屏幕上的所有元素，比如按钮和其他UI，而只是一个特定的UIView（不是为了宣传视频，而是作为应用程序功能的一部分）。

我尝试实现[ScreenCaptureView](http://aroth.no-ip.org:82/wordpress/archives/673)，但是虽然它确实让我可以将特定内容*实时*`UIView`捕获到视频文件中，但它不会捕获 Animated ，它只显示第一帧......*`UIImageView`*

 *我考虑过使用 CALayer `renderInContext:`，然后以某种方式将`CGImage`（当前帧）附加到视频数据，然后从数据制作视频文件（或者可能直接附加到视频文件）。

我有点卡在附加部分......我真的不知道如何处理当前帧的渲染数据。

有没有人有任何提示或建议？

任何帮助都感激不尽 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:10:06.343

我对它进行了更改`ScreenCaptureView.m`，现在它捕获了`UIImageView`动画：

```
[self.layer renderInContext:context]; 
```

**变成：**

```
[self.layer.presentationLayer renderInContext:context]; 
```

尽管在设备（iPhone 4）上性能实际上很差......*

# android - 使用 facebook-android-sdk Feed 对话框发帖不起作用

> ID：14709604
> 
> 赞同：1
> 
> 时间：2013-02-05T14:17:49.367
> 
> 标签：android, facebook, facebook-android-sdk

我正在使用 Android 的分享按钮将我的应用程序中的某些内容分享到其他几个应用程序（Facebook、Twitter、Dropbox、Gmail 等）。对于 Facebook 分享，我完全使用了这里描述的方法：http: [//www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/](http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/)

一切正常，但这不是我想要的。通过使用`facebook.request("me/feed", parameters, "POST")`，您只需将某些内容直接发布到用户的墙上，而无需要求确认。我想先显示一个 Feed 对话框，然后再将其发布到 Facebook 上。为此，我将包含此内容的代码替换为以下内容：

```
facebook.dialog(ShareOnFacebook.this , "feed", parameters, new DialogListener() {
               @Override
               public void onComplete(Bundle values) {}

               @Override
               public void onFacebookError(FacebookError error) {}

               @Override
               public void onError(DialogError e) {}

               @Override
               public void onCancel() {}
          }); 
```

不幸的是，这不起作用。当我按下 Facebook 分享按钮时，它会打开 Facebook，登录后它会返回到我的应用程序，而不会发布任何内容，也不会出现错误。在我按下 Facebook 按钮之前，我的 Facebook 墙上发布了一些内容，我的应用程序中出现了一个 Toast，上面写着“消息已发布到您的 Facebook 墙上！” 显示。

另外，我尝试将其替换为以下内容：

```
WebDialog feedDialog = (
    new WebDialog.FeedDialogBuilder(ShareOnFacebook.this,
        Session.getActiveSession(),
        parameters))
    .setOnCompleteListener(null)
    .build();
feedDialog.show(); 
```

但又什么也没发生。我已经读过（从 Facebook SDK 的官方网站（例如[site1](http://developers.facebook.com/docs/reference/dialogs/feed/)）），这些是使用 Feed Dialog 在 Facebook 上发布内容的方法，但对我的没有任何作用。我曾尝试使用 Facebook SDK 3.0 和之前的版本，但没有任何结果。造成这种情况的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:54:57.433

尝试这个

```
 context.runOnUiThread(new Runnable()
    {
        @Override
        public void run() 
        {
            WebDialog feedDialog = new WebDialog.FeedDialogBuilder(context, Session.getActiveSession(), postParameter).build();
            feedDialog.show();
        }
    }); 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T20:46:49.867

您是否按照[此文档](https://developers.facebook.com/docs/android/getting-started)设置了 App_id？

资源/值中的 Stings.xml 示例

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <string name="app_id">APP_ID</string>
</resources> 
```

AndroidManifest.xml 示例

```
<application >
  <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/>
</application> 
```

# image - 未定义的参数（图像处理）

> ID：14709608
> 
> 赞同：1
> 
> 时间：2013-02-05T14:18:05.150
> 
> 标签：image, matlab, image-processing, arguments, double

我在这里遇到了一个小问题。在下面的代码中是一个有两个参数的函数，当我尝试执行我得到这个错误的函数时

```
 Undefined function or method  for input
arguments of type 'double' (X,CX) as shown in (1). 
```

函数编码如下

```
[CX,sse]= (vgg_kmiter(X, CX)) ....(1) 
```

有人能指出这段代码的问题在哪里吗？

请注意，x 是列中的输入点，它是整数，而 CX 是聚类中心，也是整数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:51:40.703

`[CX,sse]= (vgg_kmiter(X, CX)) ....(1)`

不是有效的代码行。

`[CX,sse]= (vgg_kmiter(X, CX));`

很好，虽然不需要外括号。

`[CX,sse]= (vgg_kmiter(X, CX)) %....(1)`

也很好 -`%`标志之后的所有内容都被视为评论

# recursion - 从虚拟存储库下载目录和子目录

> ID：14709614
> 
> 赞同：0
> 
> 时间：2013-02-05T14:18:12.743
> 
> 标签：recursion, download, directory, repository

想知道是否有办法下载根文件夹以及一堆子文件夹（以及这些文件夹的子文件夹）以及所有文件并将它们保存在各自的文件夹中。

我尝试了一些 firefox 插件，例如 flashgot 和 download-them-all，但它们除了存储库中的文件之外还获取实际的 Web 文件，但前提是它们是可见的。例如，如果我不折叠所有文件夹并公开存储库中的文件，插件将不会检测到它们。

我只会折叠所有文件夹并公开文件，但这些插件无法识别文件夹......它们只是作为“文件夹名”.html 下载......并且所有文件都混合在一个文件夹中。

我也尝试过 visualWget 并允许递归下载，但同样，这只会抓取实际的网站文件，而不是存储库中的文件。

如果有人可以提供帮助，将不胜感激。我一直在手动复制它们，但实际上有数千个文件和文件夹，所以我正在寻找一个更快的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:23:46.140

作为客户端，您只能下载可访问的内容。您要么需要知道文件列表，要么需要爬取链接页面，这就是 Firefox 插件所做的。

如果不访问 http 之外的服务器，则无法获取服务器上的文件列表（除非服务器具有 webdav 或公开其他一些 api）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:01:56.393

我最终让它工作。我在终端中使用了以下命令。

scp -r username@hostaddress:/file/path/to/directory /path/to/my/computer/directory

-r 用于递归，因此它会下载所有文件和目录以及子目录

如果您尝试这样做，请务必从本地终端运行此命令。我犯了从 SSH 连接到服务器的错误（没有负面影响只是令人沮丧）

# mysql - 错误代码：1648。条件项“MESSAGE_TEXT”的数据太长

> ID：14709616
> 
> 赞同：5
> 
> 时间：2013-02-05T14:18:18.110
> 
> 标签：mysql, triggers, compiler-errors, mysql-workbench

这是我的触发器，我已经声明了**msg varchar(255)**并且**我尝试将其从 255 更改为 550** ，但它并没有停止向我发送该错误代码：

***错误代码：1648。条件项“MESSAGE_TEXT*”的数据太长**

**msg 变量在触发器中声明**；触发器是 2 个触发器的合并（我正在使用 MySQL，我不能在一个表上对相同的操作时间和事件使用多个触发器）**，这是正文：**

```
-- --------------------------------------------------------------------------------------------------
CREATE TRIGGER BEFORE_INSERT_ON_SENTIERO__HA__TAPPA
BEFORE INSERT ON SENTIERO__HA__TAPPA
FOR EACH ROW 
BEGIN

/* TRIGGER controlla_MaxCARDINALITA_INSERT */

-- variables for controlla_MaxCARDINALITA_INSERT
DECLARE max_cardinalita INTEGER;
DECLARE msg varchar(255);

-- variables for controlla_corrispondenzaTappaFineInizio_INSERT
DECLARE temp_tappaOLD INTEGER;
DECLARE temp_posizione_tappaOLD INTEGER;
DECLARE temp_inizio_tappaNEW VARCHAR(45);
DECLARE temp_fine_tappaOLD VARCHAR(45);

SELECT COUNT(*) into max_cardinalita
FROM SENTIERO__HA__TAPPA
WHERE IDsentiero=NEW.IDsentiero;

IF max_cardinalita>=10 THEN

        set msg = 'INSERT: Il sentiero ha già il massimo numero di tappe consentito ';
        signal sqlstate '45000' set message_text = msg;

END IF;

/* TRIGGER controlla_corrispondenzaTappaFineInizio_INSERT */

IF EXISTS ( SELECT IDsentiero, IDtappa
            FROM SENTIERO__HA__TAPPA as sht
            WHERE NEW.IDsentiero=sht.IDsentiero and NEW.IDtappa=sht.IDtappa) THEN

            set msg = 'INSERT: La tappa inserita è già presente nel sentiero; non è possibile inserirla 2 volte ';
            signal sqlstate '45000' set message_text = msg;

END IF;

SELECT IDtappa into temp_tappaOLD
FROM SENTIERO__HA__TAPPA as sht1
WHERE NEW.IDsentiero=sht1.IDsentiero and posizione_tappa>=ALL ( SELECT posizione_tappa
                                                                FROM SENTIERO__HA__TAPPA as sht2
                                                                WHERE NEW.IDsentiero=sht2.IDsentiero );

SELECT posizione_tappa into temp_posizione_tappaOLD
FROM SENTIERO__HA__TAPPA as sht
WHERE NEW.IDsentiero=sht.IDsentiero and temp_tappaOLD=sht.IDtappa;

IF NEW.posizione_tappa<>temp_posizione_tappaOLD THEN

        set msg = 'INSERT: La posizione della tappa inserita deve essere consecutiva alla posizione dell ultima tappa di quel sentiero: le tappe devono essere consecutive ';
        signal sqlstate '45000' set message_text = msg;

END IF;

SELECT inizio into temp_inizio_tappaNEW
FROM TAPPA
WHERE NEW.IDtappa=TAPPA.IDtappa;

SELECT fine into temp_fine_tappaOLD
FROM TAPPA
WHERE temp_tappaOLD=TAPPA.IDtappa;

IF temp_inizio_tappaNEW<>temp_fine_tappaOLD THEN

        set msg = 'INSERT: La fine della tappa precedente non corrisponde con l inizio di questa tappa: le tappe devono essere consecutive ';
        signal sqlstate '45000' set message_text = msg;

END IF;

END$$
-- -------------------------------------------------------------------------------------------------- 
```

**编辑 ：：**

```
DECLARE msg varchar(5);
set msg = concat('I');
signal sqlstate '45000' set message_text = msg; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-28T09:52:29.173

`MESSAGE_TEXT`是，在 MySQL 中，`VARCHAR(128)`. 您尝试在此处分配的某些消息比这更长。

我想不能简单地重新定义 MESSAGE_TEXT 所以你必须想出一条更短的消息。请参阅 [https://dev.mysql.com/doc/refman/5.5/en/signal.html#signal-condition-information-items](https://dev.mysql.com/doc/refman/5.5/en/signal.html#signal-condition-information-items)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-27T20:21:36.710

我认为您无法修改条件项的定义（请参阅[this](https://dev.mysql.com/doc/refman/8.0/en/signal.html)）。的定义`MESSAGE_TEXT`是`VARCHAR(128)`；我试图改变这一点，但不能。

但是，您可以使用 MariaDB（像 MySQL 一样工作）。在 MariaDB 中，条件项`MESSAGE_TEXT`具有定义`VARCHAR(512)`。所以，你不能改变它，但它现在可以包含更多。[这](https://mariadb.com/kb/en/diagnostics-area/)仅适用于 10.3.6 及更高版本的 MariaDB。

# javascript - 如何使用 javascript 获取所选单选按钮的标签

> ID：14709617
> 
> 赞同：4
> 
> 时间：2013-02-05T14:18:19.463
> 
> 标签：javascript, text, radio-button

我有以下 HTML

```
<div class="form-radios" id="edit-submitted-lunchset-lunch"><div class="form-item form-type-radio form-item-submitted-lunchset-lunch">
<input type="radio" class="form-radio" value="1" name="submitted[lunchset][lunch]" id="edit-submitted-lunchset-lunch-1">  <label for="edit-submitted-lunchset-lunch-1" class="option">12:00 </label>

</div>
<div class="form-item form-type-radio form-item-submitted-lunchset-lunch">
<input type="radio" class="form-radio" value="2" name="submitted[lunchset][lunch]" id="edit-submitted-lunchset-lunch-2">  <label for="edit-submitted-lunchset-lunch-2" class="option">12:30 </label>

</div>
<div class="form-item form-type-radio form-item-submitted-lunchset-lunch">
<input type="radio" class="form-radio" value="3" name="submitted[lunchset][lunch]" id="edit-submitted-lunchset-lunch-3">  <label for="edit-submitted-lunchset-lunch-3" class="option">13:00 </label>

</div>
<div class="form-item form-type-radio form-item-submitted-lunchset-lunch">
<input type="radio" class="form-radio" value="4" name="submitted[lunchset][lunch]" id="edit-submitted-lunchset-lunch-4">  <label for="edit-submitted-lunchset-lunch-4" class="option">13:30 </label>

</div>
<div class="form-item form-type-radio form-item-submitted-lunchset-lunch">
<input type="radio" class="form-radio" value="5" name="submitted[lunchset][lunch]" id="edit-submitted-lunchset-lunch-5">  <label for="edit-submitted-lunchset-lunch-5" class="option">14:00 </label>

</div>
<div class="form-item form-type-radio form-item-submitted-lunchset-lunch">
<input type="radio" class="form-radio" checked="checked" value="6" name="submitted[lunchset][lunch]" id="edit-submitted-lunchset-lunch-6">  <label for="edit-submitted-lunchset-lunch-6" class="option">14:30 </label>

</div>
</div> 
```

我正在尝试使用以下 javascript 检索与单选按钮关联的标签而不是值，但变量“chosentime”仍然是“未分配”。我通过在 alert(radios[i].innerhtml); 中输入一些警报来检查我的代码。抛出未分配

```
var radios = document.getElementsByName('submitted[lunchset][lunch]');
for (var i = 0, length = radios.length; i < length; i++) {
    if (radios[i].checked) {
        alert(i);
        alert(radios[i].value);
        alert(radios[i].innerhtml);
        chosentime = radios[i].innerhtml;
    }
}
window.alert(chosentime);
} 
```

将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:33:39.293

您必须单独访问相应的标签，因为它位于单独的标签中。因为标签的`for`属性等于它的选项`id`，你可以很容易地得到标签：

```
for(var i=0; i<radios.length; i++) {
    var selector = 'label[for=' + radios[i].id + ']';
    var label = document.querySelector(selector);
    var text = label.innerHTML;
    // do stuff
} 
```

也看看[这个小提琴](http://jsfiddle.net/KpUVW/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T14:22:58.417

单选按钮没有innerhtml。您需要定位标签。如果它总是直接在单选按钮之后，请尝试类似`radios[i].nextSibling.innerhtml`.

# ssh-keys - 如何从 Windows 命令提示符生成公钥

> ID：14709618
> 
> 赞同：37
> 
> 时间：2013-02-05T14:18:20.590
> 
> 标签：ssh-keys

我需要生成公钥才能在 ssh 中设置。如何从 Windows 命令提示符执行此操作？我尝试使用来自 c:\ 的 ssh-keygen -t rsa 但收到一条消息 ssh-keygen 无法识别为内部或外部命令、可运行程序或批处理文件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-05T14:20:31.773

ssh-keygen 不是 Windows 可执行文件。
例如，您可以使用 PuttyGen ( [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html) ) 创建密钥

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-12T01:32:01.677

只需下载并安装适用于 Windows 的 openSSH。它是开源的，它使您的 cmd ssh 准备就绪。如果您需要，快速谷歌搜索将为您提供如何安装它的教程。

安装后，如果您想放在服务器上，您可以继续生成您的公钥。您可以通过运行生成它：

```
ssh-keygen -t rsa 
```

之后你可以直接按回车键，它会自动为密钥分配一个名称（例如：id_rsa.pub）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-25T09:05:16.417

如果您已`git-bash`安装（随 Git、Github for Windows 或 Visual Studio 2015 提供），则其中包括 Windows 版本的`ssh-keygen`.

[https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/](https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-05T14:20:35.017

嗯，什么？ssh 不像在大多数 *nix 案例中那样内置于 Windows 中。

您可能希望首先使用 Putty。并且： http: [//kb.siteground.com/how_to_generate_an_ssh_key_on_windows_using_putty/](http://kb.siteground.com/how_to_generate_an_ssh_key_on_windows_using_putty/)

# c# - 如何使异步函数（如 OpenStreamForWriteAsync）同步？

> ID：14709619
> 
> 赞同：2
> 
> 时间：2013-02-05T14:18:21.497
> 
> 标签：c#, multithreading, asynchronous, synchronization, task-parallel-library

我正在开发一个 Windows Phone 8 应用程序。我必须将视频保存到相机胶卷文件夹中。

要获取相机胶卷文件夹的文件流，我使用以下[功能](http://msdn.microsoft.com/en-us/library/hh582147.aspx)：

```
[CLSCompliantAttribute(false)]
public static Task<Stream> OpenStreamForWriteAsync(
    this IStorageFile windowsRuntimeFile
) 
```

例如：

```
Stream videoStream = await file.OpenStreamForWriteAsync(); 
```

其中文件是[StorageFile](http://msdn.microsoft.com/en-us/library/hh582147.aspx)。

由于要求，我想删除此等待并使功能同步。

编辑：
PS：我在不同的线程上执行这个函数，我希望那个线程是同步的。我想在创建后写入该文件流。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T14:19:34.270

只需访问`Result`：

```
Stream videoStream = file.OpenStreamForWriteAsync().Result; 
```

这将阻塞，直到任务完成执行。
请注意，如果在 UI 线程上执行该代码，这可能会导致程序死锁。
请参阅[此博客文章](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)以获取更多信息。

# windows-phone-8 - 我们可以在不使用 windows phone 8 应用程序中的 smscomposertask 类的情况下发送短信吗？

> ID：14709628
> 
> 赞同：1
> 
> 时间：2013-02-05T14:19:05.550
> 
> 标签：windows-phone-8

我已经搜索过了，但我无法找到它，请告诉我解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:23:29.877

简短回答：否
详细回答：目前没有其他 API 用于发送 SMS 消息，而不是 Windows Phone 7 或 8 中的 SmsComposeTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:30:29.950

我已经在“Windows Phone 培训会议”（对不起我的英语）和 Windows Phone 7.1 和 + 中使用 microsoft MVP 搜索此信息，这是不可能的。

您可以使用[SmsComposeTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394005%28v=vs.105%29.aspx)，但您知道...

你也可以通过API发送短信，但不是Native...例如：[clockworksms](http://www.clockworksms.com/) ...

# ruby-on-rails - 为什么会有一个。而不是 / 在我的 ROR 中的 URL 路径中

> ID：14709632
> 
> 赞同：0
> 
> 时间：2013-02-05T14:19:21.590
> 
> 标签：ruby-on-rails, ruby

我已经安装了 Devise（称为成员）并设置了一些自定义路由，以便我可以吐出所有成员并允许他们拥有自己的页面（/memebers/ 和 /members/:id/）

但是，在我的成员索引视图文件中，当传递路由 members_path(member_id) 时，它输出的是 members.1 而不是 members/1

下面的代码：索引视图：

```
<% @members.each do |member| %>
<tr>
<td><%= link_to member.name, members_path(member.id) %></td>
<td><%= member.email %></td>
<td><%= member.id %></td>
<td><%= member.admin %></td>
</tr>
<% end %> 
```

路线：

```
devise_for :members
match 'members/' => 'members#index'
match 'members/:id' => 'members#show' 
```

成员控制器：

```
class MembersController < ApplicationController

  def index
    @members = Member.all
    respond_to do |format|
     format.html # show.html.erb
     format.json { render json: @student } 
   end 
  end

  def show
    @member = Member.find(params[:id])
  end

end 
```

耙路线：

```
members        /members(.:format)               members#index
               /members/:id(.:format)           members#show 
```

有什么帮助吗？干杯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:34:24.867

不得不添加

```
, as: :show_member 
```

所以在我的路由文件中，我必须为此定义一个路径

```
match 'members/:id/' => 'members#show', as: :show_member 
```

并将其添加到索引视图文件中：

```
show_member_path(member) 
```

并且耙路线现在是：

```
members GET    /members(.:format)               members#index
show_member GET    /members/:id(.:format)           members#show 
```

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:14:45.227

这不是您正在寻找的辅助方法。`members_path`创建一条路径`members#index`并将`format`其作为唯一参数。

链接到的助手`members#show`是`member_path`. 虽然，它不是由以下自动创建的`match`：

```
# config/routes.rb
resources :members, only: [:index, :show]
# Remove `only` to get the remaining restful routes

# and in your view:
<%= link_to member.name, member_path(member.id) %> 
```

您也可以只传入成员本身并`link_to`自动调用`to_param`，默认返回`id`：

```
<%= link_to member.name, member_path(member) %> 
```

或者，您可以直接传入您的成员而无需路径助手：

```
<%= link_to member.name, member %> 
```

在这里阅读更多：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# sql - SQL 更新命令和表锁定

> ID：14709634
> 
> 赞同：1
> 
> 时间：2013-02-05T14:19:21.850
> 
> 标签：sql, vb.net, sql-server-2008-r2

我有一个 SQL 表和 VB.NET 应用程序。应用程序将 sql 表加载到数据表，然后通过获取一些网站开始将数据更新到记录，平均需要 1.4 秒才能用新数据填充数据表行。

现在我想知道是否可以使用 sql update 命令更新 sql 表中的单个记录并在每次更新记录时运行它，这意味着每 1.4 秒对单个记录运行更新命令

问题是其他应用程序同时使用该表，其中一个写入同一个表但其他列，在此过程中该表是否会被其他应用程序锁定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:27:23.600

您需要找出为什么更新一条记录需要 1.4 秒。可能是因为 VB.NET 需要做一些处理（虽然它是`fetching some websites`）。例如，执行必要的计算可能需要 1.3 秒（客户端时间），更新一条记录可能需要 0.1 秒（服务器时间）。在这种情况下，您可以批量执行更新，以最大限度地减少数据库访问时间。

表会被锁定，但只会锁定很短的时间，因此您通常无需担心这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:28:10.883

默认情况下，SQL 不会锁定表，但您可能应该在更新表时锁定表，以防止这些应用程序进行更改时数据损坏。是的，性能会受到一点影响，但比因为它搞砸了而不得不重建它要好。这是对锁定的一个很好的解释

[http://www.developerfusion.com/article/84509/managing-database-locks-in-sql-server/](http://www.developerfusion.com/article/84509/managing-database-locks-in-sql-server/)

如果其他应用程序只是在您更新时查询表，那么应该不会有任何影响，但是如果他们在更新过程中查询它，它们可能会得到一些奇怪的结果。锁定主要是关于2个人同时修改同一记录的风险。

# python - 为什么使用 Python 3 进入 Tkinter 的画布小部件很慢？

> ID：14709636
> 
> 赞同：0
> 
> 时间：2013-02-05T14:19:25.567
> 
> 标签：python, performance, canvas, tkinter, conways-game-of-life

我刚开始在 Python(3.2) 中使用 Tkinter 模块，所以我决定用这个模块重写我的旧程序（我使用 curses 模块）。该程序是一个[生命游戏](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)模拟器。我实现的算法在没有用户界面的情况下运行得如此之快。这是我的程序（这是一个快速的实验，我从未使用过画布小部件）：

```
#!/usr/bin/python3

import gol
import Tkinter as tk

class Application(tk.Frame):
    def __init__(self):
        self.root = tk.Tk() 
        self.root.wm_title('Canvas Experiments')
        tk.Frame.__init__(self, self.root)

        self.draw_widgets()

        self.world = gol.World(30, 30)
        self.world.cells[25][26] = True
        self.world.cells[26][26] = True
        self.world.cells[27][26] = True
        self.world.cells[25][27] = True
        self.world.cells[26][28] = True

    def draw_widgets(self):
        self.canvas = tk.Canvas(
            width = 300,
            height = 300,
            bg = '#FFF')
        self.canvas.grid(row = 0)

        self.b_next = tk.Button(
            text = 'Next',
            command = self.play)
        self.b_next.grid(row = 1)

        self.grid()

    def play(self):    
        def draw(x, y, alive): 
            if alive:   
                self.canvas.create_rectangle(x*10, y*10, x*10+9, y*10+9, fill='#F00')
            else:       
                self.canvas.create_rectangle(x*10, y*10, x*10+9, y*10+9, fill='#FFF')

        for y in range(self.world.width):
            for x in range(self.world.height):
                draw(x, y, self.world.cells[x][y])      

        self.world.evolve()

app = Application()
app.mainloop() 
```

我没有报告 gol，但问题不在该模块中。问题是程序很慢，我认为我不能很好地使用画布。

编辑：这是 gol 模块，但我认为这不是问题......

```
#!/usr/bin/python3

class World:
    def __init__(self, width, height):
        self.width, self.height = width, height
        self.cells = [[False for row in range(self.height)] for column in range(self.width)]

    def neighbours(self, x, y): 
        counter = 0
        for i in range(-1, 2):
            for j in range(-1, 2):
                if ((0 <= x + i < self.width) and (0 <= y + j < self.height) and not (i == 0 and j == 0)): 
                    if self.cells[x + i][y + j]:
                        counter += 1            
        return counter        

    def evolve(self):
        cells_tmp = [[False for row in range(self.height)] for column in range(self.width)]
        for x in range(self.width):
            for y in range(self.height):
                if self.cells[x][y]:
                    if self.neighbours(x, y) == 2 or self.neighbours(x, y) == 3:
                        cells_tmp[x][y] = True  
                else:           
                    if self.neighbours(x, y) == 3:
                        cells_tmp[x][y] = True  
        self.cells = cells_tmp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:09:18.617

这是您个人资料的一部分：

```
ncalls  tottime  percall  cumtime  percall filename:lineno(function) 
125112    1.499    0.000    1.499    0.000 {method 'call' of 'tkapp' objects} 
125100    1.118    0.000    6.006    0.000 /usr/lib/python3.2/tkinter/__init__.py:2190(_create)
125109    0.942    0.000    1.749    0.000 /usr/lib/python3.2/tkinter/__init__.py:69(_cnfmerge)
125106    0.906    0.000    3.065    0.000 /usr/lib/python3.2/tkinter/__init__.py:1059(_options)
125599    0.851    0.000    0.851    0.000 main.py:10(neighbours)
500433    0.688    0.000    0.688    0.000 {built-in method isinstance}
125100    0.460    0.000    6.787    0.000 main.py:64(draw)
250210    0.341    0.000    0.341    0.000 {method 'update' of 'dict' objects}
125100    0.321    0.000    6.327    0.000 /usr/lib/python3.2/tkinter/__init__.py:2219(create_rectangle)
250205    0.319    0.000    0.319    0.000 {built-in method _flatten}
   139    0.255    0.002    8.093    0.058 main.py:63(play)
   139    0.181    0.001    1.051    0.008 main.py:19(evolve)
125109    0.134    0.000    0.134    0.000 {method 'items' of 'dict' objects}
125108    0.107    0.000    0.107    0.000 {built-in method callable}
     1    0.056    0.056    0.056    0.056 {built-in method create} 
```

让我们在这里提取您感兴趣的内容：

```
cumtime   filename:lineno(function) 
0.851    main.py:10(neighbours)
6.787    main.py:64(draw)
8.093    main.py:63(play)
1.051    main.py:19(evolve) 
```

你大部分时间都花在了`draw`，包含在`play`Application 类的方法中。

这些行：

```
ncalls  tottime  percall  cumtime  percall filename:lineno(function) 
125100    1.118    0.000    6.006    0.000 /usr/lib/python3.2/tkinter/__init__.py:2190(_create)
125106    0.906    0.000    3.065    0.000 /usr/lib/python3.2/tkinter/__init__.py:1059(_options) 
```

表明您实际上是在花费时间来创建矩形。

因此，如果您想获得更好的性能，请停止实例化。只需更新它们！`draw`顺便说一句，如果您使用矩阵而不是双循环，您将获得更少的调用。`draw`很慢（6.787 cum. seconds），但请记住，您在这些循环中也浪费了近 1.5 秒。

顺便说一句，去掉这些双循环也可以大大提高`evolve`in 。`gol.py`我认为您也可以对算法进行一些改进。

**编辑**：

哦，该`gol`模块有助于解决“问题”的十分之一:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:17:51.697

我的猜测是，这是因为每次重绘棋盘时都会创建一个包含 900 个对象的新网格。众所周知，当您创建数以万计的对象时，画布会出现性能问题。由于您在每次迭代中绘制 900 个对象，因此很快就会添加很多对象。

我的建议是重构您的代码以绘制一次 30x30 正方形的网格，然后在每次迭代中您只需要更改每个网格元素的颜色。这应该足以让您非常快速地循环几代人。

# javascript - 用另一个输入字段值更新隐藏的输入字段值？

> ID：14709637
> 
> 赞同：8
> 
> 时间：2013-02-05T14:19:27.983
> 
> 标签：javascript, html

我正在尝试使用 javascript 用另一个可见的输入字段更新一个隐藏的输入字段...

但我的代码由于某种原因不起作用！

这是我的 JavaScript：

```
<script language="javascript">
    function process1() {
        document.getElementById("sum_total").value = (document.getElementById("my-item-price").value);
    }
</script> 
```

这是我的表单代码：

```
<form><input name="A1" type="text" class="A1" id="A1"/></form>

<form><input type="hidden" id="A2" name="A2" value="process1() "/></form> 
```

**更新**

```
<script language="javascript"> 
    function process1() { 
        document.getElementById("sum_total").value = (document.getElementById("my-item-price").value); 
    } 
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:25:51.060

你的代码很糟糕。你没有`id`s 你在 javascript 中寻找。

尝试这个：

```
 <script language="javascript">
 function process1(showed) {
    document.getElementById("A2").value = showed.value;
}
</script>

<form><input name="A1" type="text" class="A1" onChange="process1(this)"/></form>

<form><input type="hidden" id="A2" name="A2" value="5" /></form> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T14:35:06.223

我认为最可靠的是使用 onKeyUp 而不是 onChange 或鼠标事件（onBlur 等）。以下内容会在输入每个字符时更新隐藏字段（我有未隐藏的 A2，因此您可以看到发生了什么）。

```
<html>
<head>
<script language="javascript">
function process1() {
    document.getElementById("A2").value = (document.getElementById("A1").value);
    }

</script>
</head>
<body>
<form><input name="A1" type="text" class="A1" id="A1" onKeyUp="process1()" /></form>
<form><input id="A2" name="A2" value="" /></form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:24:33.800

试试这个：[**现场演示**](http://jsfiddle.net/ZuUj5/)

**HTML**

```
<form><input name="A1" type="text" class="A1" id="A1"/></form>

<form><input type="hidden" id="A2" name="A2" value=""/></form>

<button onClick="process1();">Update</button> 
```

**JS**

```
function process1() { 
    document.getElementById("A2").value = document.getElementById("A1").value; 

    alert(document.getElementById("A2").value);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T14:31:10.187

您应该绑定一个事件来更新值。例如 onkeyupevent `document.getElementById("A1").onkeyup=function() { document.getElementById("A2").value = this.value };`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T14:26:44.840

我将值更改为空白，并为输入提供了一个 onmouseout（如果需要，可以使用其他类型）来执行函数并交换值。

```
<script language="javascript">
function process1() {
document.getElementById("A2").value = document.getElementById("A1").value;
}

</script>
</head>

<body>

And This Is My form code:

<form><input name="A1" type="text" class="A1" id="A1"/></form>

<form><input type="text" id="A2" name="A2" value="" onmouseout="process1()" /></form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T14:27:26.937

```
<script language="javascript">
function process1() {
    document.getElementById("A1").value = (document.getElementById("A2").value);
}
</script>
And This Is My form code:
<form><input name="A1" type="text" class="A1" id="A1"/></form>

<form><input type="hidden" id="A2" name="A2" value="process1() "/></form>
<div onClick="process1()">doit</div> 
```

确实有效

# org-mode - 在 Perl 中作为 org-babel 代码块的结果有一个表

> ID：14709640
> 
> 赞同：1
> 
> 时间：2013-02-05T14:19:41.930
> 
> 标签：org-mode, org-babel

我有一个非常简单的例子来说明这个问题。考虑以下 Perl 中的代码块，位于 org-mode 文件中：

```
#+begin_src perl :results table
return qw(1 2 3);
#+end_src 
```

它产生以下结果：

```
#+results:
| 1\n2\n3\n | 
```

这并不完全令人满意，因为我期待一个完整的组织表。

例如，在 Python 中，以下代码：

```
#+begin_src python :results table
return (1, 2, 3)
#+end_src 
```

产生这个结果：

```
#+results:
| 1 | 2 | 3 | 
```

所以这显然适用于 Python，但不适用于 Perl。难道我做错了什么？这是一个已知的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:18:58.907

因为今天早上我觉得有点自虐，所以我决定再次尝试破解一点 lisp。我制作了一个适用于您的示例的小修复程序，但我不能保证它会适用于更复杂的修复程序。所以它来了：

org-babel 为每种语言定义了一个包装器。perl 没有产生 babel 检测为列表的东西，所以我修改了它。为了不将所有内容格式化为表格，我必须检查结果是否可打印为表格：

```
(setq org-babel-perl-wrapper-method
  "
sub main {
%s
}
@r = main;
open(o, \">%s\");
if ($#r > 0) {
print o \"(\",join(\", \",@r), \")\",\"\\n\"
} else {
print o join(\"\\n\", @r), \"\\n\"
}") 
```

如果您愿意，您可以进一步修改它以满足您的需要。

接下来是`perl-evaluate`babel 中的方法不会通过进一步格式化来运行输出，所以我修改了评估方法，从`python-evaluate`代码中获取新部分：

```
(defun org-babel-perl-table-or-string (results)
  "Convert RESULTS into an appropriate elisp value.
If the results look like a list or tuple, then convert them into an
Emacs-lisp table, otherwise return the results as a string."
  (org-babel-script-escape results))

(defun org-babel-perl-evaluate (session body &optional result-type)
  "Pass BODY to the Perl process in SESSION.
If RESULT-TYPE equals 'output then return a list of the outputs
of the statements in BODY, if RESULT-TYPE equals 'value then
return the value of the last statement in BODY, as elisp."
  (when session (error "Sessions are not supported for Perl."))

    ((lambda (raw)
     (if (or (member "code" result-params)
         (member "pp" result-params)
         (and (member "output" result-params)
          (not (member "table" result-params))))
     raw
       (org-babel-perl-table-or-string (org-babel-trim raw))))

     (case result-type
       (output (org-babel-eval org-babel-perl-command body))

       (value (let ((tmp-file (org-babel-temp-file "perl-")))
        (org-babel-eval
         org-babel-perl-command
         (format org-babel-perl-wrapper-method body
             (org-babel-process-file-name tmp-file 'noquote)))
        (org-babel-eval-read-file tmp-file)))))) 
```

新部分是空行之间的`org-babel-perl-table-or-string`部分（最后加上 1 个右括号）。`org-babel-perl-evaluate`

所以现在它所做的就是让 perl 打印列表，类似于 python 打印它们的方式，并将打印的结果通过 org-babel 的格式化程序。

* * *

现在到结果：

一个列表：

```
#+begin_src perl :results value
return qw(1 2 3);
#+end_src

#+results:
| 1 | 2 | 3 | 
```

一个标量：

```
#+begin_src perl :results value
return "Hello test 123";
#+end_src

#+results:
: Hello test 123 
```

* * *

您可以使用此代码的方式：

1.  将其置于划痕中并`M-x eval-buffer`进行测试
2.  将其放在 org-document 开头的 elsip src 块中
3.  加载 babel 后将其放在 .emacs 中
4.  修改 lisp/org 文件夹中的 ob-perl.el（可能需要重新编译 org-mode 之后）

* * *

我没有比我给你的输出示例做更多的测试，所以如果它对其他示例行为不端，请随时抱怨。

# android - Android facebook SDK 身份验证不起作用

> ID：14709644
> 
> 赞同：2
> 
> 时间：2013-02-05T14:19:59.090
> 
> 标签：android, facebook-android-sdk

我正在使用最新的 android SDK。对话框已打开，但在输入凭据后对话框正在关闭并且状态不会改变。

```
private StatusCallback statusCallback = new StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) // call just one time and state is "opening"
            authWithToken("facebook", session.getAccessToken());
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(new View(this));

    //setVisible(false);

    Settings.addLoggingBehavior(LoggingBehavior.CACHE);
    Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);
    //Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_RAW_RESPONSES);
    //Settings.addLoggingBehavior(LoggingBehavior.REQUESTS);

    Session session = Session.getActiveSession();

    if (session == null) {
        session = new Session.Builder(this).build();
        Session.setActiveSession(session);
    }

    if (!session.isOpened()) {
        Session.OpenRequest openRequest = new Session.OpenRequest(this);
        openRequest.setPermissions(permissions);
        openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
        openRequest.setCallback(statusCallback);
        session.openForPublish(openRequest); //here dialog is opened, user is able to enter credentials 
    }

    if (session != null && session.isOpened()) {
        if (!hasEmailPermission()) {
            NewPermissionsRequest request = new NewPermissionsRequest(this, permissions);
            request.setCallback(statusCallback);
            request.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);

            session.requestNewReadPermissions(request);
        }
    }

    if (session != null && session.isOpened())
        authWithToken("facebook", session.getAccessToken());
}

private boolean hasEmailPermission() {
    Session session = Session.getActiveSession();
    return session != null && session.getPermissions().containsAll(permissions);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    //never call this method 
    super.onActivityResult(requestCode, resultCode, data);

    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
} 
```

我通过 facebook 官方“入门”文档完成了所有工作

[Android Facebook SDK3.0，会话状态OPENING](https://stackoverflow.com/questions/13885521/android-facebook-sdk3-0-session-state-opening)

不起作用，因为 Facebook 身份验证对话框从不调用 onActivityResult()

未安装 Facebook 应用程序。

**更新：**

我检查了。`session.openForPublish(openRequest);`关闭我的活动并打开 Facebook 对话框。但为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T13:29:47.170

使用 UiLifeCycleHelper 类来更改会话的状态。

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash_screen);
        uiHelper = new UiLifecycleHelper(this, callback);
        uiHelper.onCreate(savedInstanceState);
} 
```

# postgresql - VPS 上的 OpenERP，以及将 Postgresql 重定向到本地机器

> ID：14709645
> 
> 赞同：1
> 
> 时间：2013-02-05T14:19:58.840
> 
> 标签：postgresql, ssh, openerp, vps, pgadmin

请，任何帮助将不胜感激，我在**VPS中安装了一个****OpenERP**及其所有组件（**Postgres**、**Web 服务器**、**服务器**）。

 **我想通过 pgAdmin3 从我的本地机器使用这个 PostgreSQL。我仍然无法这样做。

**我通过修改Postgresql 中的配置文件**和其他一些人告诉我通过**Putty 使用 SSH Tunilling**来阅读有关此问题的一些答案，但是当我通过 PGADMIN3 进行连接时，**我无法成功连接**

所以，如果有人可以详细告诉我我必须做什么，才能成功实现这一点，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:47:55.603

首先你需要问自己一堆问题。这个问题的答案并不是那么简单，这就是为什么它没有得到回答。这些涉及在您设置数据库以通过 Internet 访问时发生的风险管理问题。您真的想从阅读 PostgreSQL 文档的管理和身份验证部分开始。您可能想做一个 SSH 隧道或只需要 SSL。

如果您要这样做，我个人会将 PostgreSQL 配置为需要 SSL。在 pg_hba.conf 中为将连接到它的主机设置一个 hostssl 类型的条目。设置防火墙规则以允许来自该主机的连接。理想情况下设置一个客户端证书，但不太确定如何让 OpenERP 使用它。

然后配置 OpenERP。我不知道您正在运行哪个版本，但[这些文档](http://doc.openerp.com/v6.1/developer/01_getting_started.html#configuration-files-link)可能会让您入门。**

# enums - 将可为空的枚举映射到 null 时，AutoMapper 抛出 NullReferenceException

> ID：14709648
> 
> 赞同：2
> 
> 时间：2013-02-05T14:20:09.630
> 
> 标签：enums, automapper, nullable, nullreferenceexception, automapper-2

我似乎无法弄清楚为什么 AutoMapper 会为此映射抛出异常：

```
public class MyDestinationType
{
    public MyCustomEnum? PropName { get; set; }
}

public enum MyCustomEnum
{
    Val1,
    Val2
}

Mapper.CreateMap<MySourceType, MyDestinationType>()
    .ForMember(d => d.PropName, o => o.ResolveUsing(s => 
    {
        if (s.Val1) return MyCustomEnum.Val1;
        else if (s.Val2) return MyCustomEnum.Val2;
        return null;
    }))
; 
```

仅当`MyCustomEnum? PropName`属性映射到空值时才会发生异常。这是我进行映射的方式：

```
var source = MethodToGetSourceObject();
var destination = Mapper.Map<MyDestinationType>(source); 
```

抛出的异常是一个 AutoMapperMappingException，它包装了另外两个 AutoMapperMappingExceptions。第 4 个也是最后一个 InnerException 是 NullReferenceException。堆栈跟踪看起来像这样：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   AutoMapper.Mappers.EnumMapper.Map(ResolutionContext context, IMappingEngineRunner mapper) +198
   AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +447

[AutoMapperMappingException: Trying to map System.Object to System.Nullable`1[[MyProject.MyCustomEnum, MyProject, Version=2.0.4784.16259, Culture=neutral, PublicKeyToken=null]].
Using mapping configuration for MyProject.MySourceType to MyProject.MyDestinationType
Destination property: PropName
Exception of type 'AutoMapper.AutoMapperMappingException' was thrown.]
   AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +519
   AutoMapper.Mappers.PropertyMapMappingStrategy.MapPropertyValue(ResolutionContext context, IMappingEngineRunner mapper, Object mappedObject, PropertyMap propertyMap) +592

[AutoMapperMappingException: Trying to map System.Object to System.Nullable`1[[MyProject.MyCustomEnum, MyProject, Version=2.0.4784.16259, Culture=neutral, PublicKeyToken=null]].
Using mapping configuration for MyProject.MySourceType to MyProject.MyDestinationType
Destination property: PropName
Exception of type 'AutoMapper.AutoMapperMappingException' was thrown.]
   AutoMapper.Mappers.PropertyMapMappingStrategy.MapPropertyValue(ResolutionContext context, IMappingEngineRunner mapper, Object mappedObject, PropertyMap propertyMap) +689
   AutoMapper.Mappers.PropertyMapMappingStrategy.Map(ResolutionContext context, IMappingEngineRunner mapper) +275
   AutoMapper.Mappers.TypeMapMapper.Map(ResolutionContext context, IMappingEngineRunner mapper) +273
   AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +447

[AutoMapperMappingException: Trying to map MyProject.MySourceType to MyProject.MyDestinationType.
Using mapping configuration for MyProject.MySourceType to MyProject.MyDestinationType
Exception of type 'AutoMapper.AutoMapperMappingException' was thrown.]
   AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +519
   AutoMapper.MappingEngine.Map(Object source, Type sourceType, Type destinationType, Action`1 opts) +192
   AutoMapper.MappingEngine.Map(Object source, Type sourceType, Type destinationType) +196
   AutoMapper.MappingEngine.Map(Object source) +169
   AutoMapper.Mapper.Map(Object source) +107
   [Here is where my code calls Mapper.Map<MyDestinationType>(source)] 
```

同样，该异常仅在解决方案具有时才会发生`PropName == null`（例如，如果两者都`s.Val1`为`s.Val2`假）。当映射将解析为具有某些非空值的枚举时，不会发生异常。

**这是 AutoMapper 中的另一个错误吗？**

# hibernate - 非 Web 应用程序中的 Hibernate 事务划分

> ID：14709655
> 
> 赞同：0
> 
> 时间：2013-02-05T14:20:22.617
> 
> 标签：hibernate, jdbc, transactions

我是 Hibernate 的新手，我有一些关于事务分界的问题（我已经在 Stack Overflow、Hibernate 文档中进行了搜索，但我还没有找到答案）。

*   首先，我使用 Maven Hibernate Tools Plugin 生成 Hibernate Beans 和 DAOS。
*   在生成过程之后，我将我的数据库访问 jar 包含到我的 Java 项目中。

简单查询工作正常，但是当我执行具有多个连接的复杂查询时，不会获取集合（延迟获取）并且当我尝试调用相应的

get 方法来检索数据，我得到一个惰性初始化异常，因为我的会话上下文是：线程并且会话已通过事务提交关闭。

我需要会话寿命更长，以便使用 get 方法显式获取集合。

我的休眠配置文件是：

```
<hibernate-configuration>
    <session-factory>
     <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
     <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
     <property   name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
     <property name="current_session_context_class">thread</property>
     <property name="hibernate.connection.url">jdbc:mysql://localhost:3306 /mydatabase</property>
      <property name="hibernate.connection.username">user</property>
      <property name="hibernate.connection.password">1234</property>
      <property name="hibernate.format_sql">true</property>
      <property name="hibernate.use_sql_comments">true</property>
    </session-factory> 
```

在这种情况下，是否有必要使用 JTA 事务（我不使用 Web 服务器），或者是否可以在不显式初始化惰性集合的情况下实现不附加到事务范围（JDBC）的更长会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:31:53.790

我修改了休眠工具代码模板（ftl 文件）以生成自定义 DAO 和 Bean。

使用 Maven Hibernate 工具插件，我生成了我的数据库访问层。

将分离的对象重新附加到新的 Hibernate 会话的方法添加到 Hibenate Beans 是否合理？就像是：

s.getCurrentSession().beginTransaction();

r.lock(p, LockMode.NONE);

一旦通过 getter 方法检索到数据，事务将被提交，会话将被关闭。使用这种策略，我认为可以避免延迟初始化问题。

虽然我不确定在多线程或多进程情况下是否会有任何问题。

谢谢你。

# sqlite - SQLite 查询日期等于今天

> ID：14709661
> 
> 赞同：10
> 
> 时间：2013-02-05T14:20:36.063
> 
> 标签：sqlite, date, time

如何使查询仅从数据库中检索时间等于“今天”的记录。我尽可能长时间地存储我的日期。

**例如：** DateColumn（我的列的名称）和我的表的名称是 MyTable

1360054701278（格林威治标准时间 2013 年 2 月 5 日星期二上午 8:58:21） 1359795295000（格林威治标准时间 2013 年 2 月 2 日星期六上午 8:54:55）

那么我应该如何对该示例进行查询以检索第一条记录（因为它是等于今天的日期）？

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T14:59:36.133

很抱歉没有看到，您的问题是在您的列中保存的额外毫秒。

解决方案是通过除法删除它们;-)

```
SELECT * FROM MyTable WHERE date(datetime(DateColumn / 1000 , 'unixepoch')) = date('now') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:30:29.913

使用范围进行最快查询。您想避免转换为比较。

```
SELECT *
FROM   My Table
WHERE  DateColumn BETWEEN JulianDay('now') AND JulianDay('now','+1 day','-0.001 second') 
```

注意：我刚刚意识到您的日期没有存储为 SQLite 原生支持的 Julian Dates。这个概念仍然是相同的，但您需要使用自己的转换函数来存储日期的任何格式。

# ios - 更新到 xCode 4.6 后 AVAudioPlayer 崩溃

> ID：14709671
> 
> 赞同：0
> 
> 时间：2013-02-05T14:20:50.087
> 
> 标签：ios, objective-c, xcode, avaudioplayer

更新到 xCode 4.6 后，我的音频播放器崩溃且没有错误日志。我无法记录错误，因为它在播放时崩溃。我在调试器上没有收到任何消息，只有一个线程/断点。有人有什么想法吗？

```
NSError *error;
NSString *stringPath1 = [[NSBundle mainBundle] pathForResource:@"beep" ofType:@"mp3"];
NSURL *url1 = [NSURL fileURLWithPath:stringPath1];
playerForRecording = [[AVAudioPlayer alloc] initWithContentsOfURL:url1 error:&error];
[playerForRecording setDelegate:self];
[playerForRecording play]; 
```

[http://i1107.photobucket.com/albums/h385/snksnk1/stack%20overflow/ScreenShot2013-02-05at54421PM_zps72842a8f.png](http://i1107.photobucket.com/albums/h385/snksnk1/stack%20overflow/ScreenShot2013-02-05at54421PM_zps72842a8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:05:36.313

我正在使用相同的编译器，这对我有用：

```
NSError *error;
NSString *stringPath1 = [[NSBundle mainBundle] pathForResource:@"beep" ofType:@"mp3"];
NSURL *url1 = [NSURL fileURLWithPath:stringPath1];
NSAssert(url1, @"URL is valid.");
self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:url1 error:&error];
if(!self.player)
{
    NSLog(@"Error creating player: %@", error);
}
[self.player play]; 
```

当然，在 .h 中，有以下几行：

```
#import <AVFoundation/AVFoundation.h>
@interface myProgramViewController : UIViewController<AVAudioPlayerDelegate> 
```

...

```
@property (nonatomic, strong) AVAudioPlayer* player; 
```

在.m中，对应的：

```
@synthesize player = mPlayer; 
```

希望这可以帮助。

# c# - 如何在 C# 中创建此表达式树（动态 lambda）？

> ID：14709672
> 
> 赞同：0
> 
> 时间：2013-02-05T14:20:50.663
> 
> 标签：c#, linq, dynamic-linq

我正在尝试创建一个表示以下内容的表达式树（动态 linq）：有我的自定义类和集合。

```
List<Contract> sel = contractList.Where(s => s.account.Age > 3 && s.productList.Any(a => a.ProductType == "abc")).ToList(); 
```

这是我的课程：

```
public class Account
{
    public int Age { get; set; }
    public decimal Balance { get; set; }

    public Account(int Age, decimal Balance)
    {
        this.Age = Age;
        this.Balance = Balance;
    }
}

public class Product
{
    public string ProductType { get; set; }

    public Product(string ProductType)
    {
        this.ProductType = ProductType;
    }
}

public class Contract
{
    public int ID { get; set; }
    public Account account { get; set; }
    public List<Product> productList { get; set; }
    public Contract(int ID, Account account, Product product, List<Product> productList)
    {
        this.ID = ID;
        this.account = account;
        this.productList = productList;
    }
}

public List<Contract> contractList; 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:13:39.340

您是否正在尝试将您的表达式树合并到一个委托中？如果是这样，这里有一个例子：

```
public static bool IsOlderThanThreeAndHasAbcProductType(Contract contract)
{
    if (contract.account.Age > 3
        && contract.productList.Any(a => a.ProductType == "abc"))
    {
        return true;
    }
    return false;
}

List<Contract> sel = contractList.Where(IsOlderThanThreeAndHasAbcProductType).ToList(); 
```

希望这可以帮助！

# c# - 并发处理所需的设计思想

> ID：14709674
> 
> 赞同：4
> 
> 时间：2013-02-05T14:20:57.340
> 
> 标签：c#, .net, concurrency

我有一系列需要处理的计算——计算和它们运行的​​顺序都是由用户在 UI 上定义的。

如果他们只是一个接一个地跑，那也不会太难。但是，有些计算需要同时处理，并且所有计算必须具有随时单独暂停的能力。我还需要能够随时重新安排订单或添加要处理的新计算。所以无论我做什么都必须足够灵活来处理这个问题。

在 UI 上，想象一个用户控件的列表框（如果您愿意，可以是一个队列）——每个用户控件显示计算的名称和一个暂停按钮。我可以在处理过程中随时将计算添加到此列表中。

**做这个的最好方式是什么？**

我应该在自己的线程中运行每个计算吗？如果是这样，我应该如何存储正在运行的进程列表？我如何将队列传递给计算处理器？我将如何确保每次队列更改（新排序或新计算）时计算处理器都会意识到这一点？

我最初的想法是：

*   `CalcProcessor class`
*   `CalcCalculation class`

在`CalcProcessor`有 2`Lists`个`CalcCalculations`。一个是 UI 上显示的“队列”（可能是指向它的指针？或其他确保实时更新的方式），另一个是当前正在运行的计算列表。

不知何故，我需要`CalcCalculation`在自己的线程中运行以处理计算，并能够处理任何暂停事件。所以我需要一些方法将在 UI 中按下的暂停按钮的信息传输到`CalcProcessor`对象，然后传输到正确的`CalcCalculation`.

**编辑回应大卫霍普：**

感谢您的回复。

1.  是的，有 n 个计算，但由于能够添加更多计算以在 UI 上进行处理，这可能随时更改。

2.  无论如何，他们不需要共享数据。应用程序中将有一个设置来指定应该同时运行多少个（即，在任何给定时间为 10 个，例如队列中的前 10 个 - 当 1 完成时，队列中的下一个计算将开始处理）。

3.  计算将涉及从某个数据源（可能是数据库或文件）获取数据，然后对其进行分析并对该数据执行一些计算。当我说计算需要暂停时，我并不是说暂停线程......我只是说（例如，因为我还没有编写应用程序的这一部分）如果它正在逐行读取数据库并在完成处理当前行时暂停一些实时计算......并在 UI 上未单击暂停按钮时继续 - 如果我能得到，这可以通过像 while(notPaused) 循环这样原始的东西来完成暂停信息从 UI 进入线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:56:32.063

这里有几个问题：

## 如何同步 UI 和模型？

我想你把这个弄反了。您的模型不应该有指向您在 UI 中显示的队列的“指针”。相反，队列应该在您的模型中，并且您应该使用数据绑定以及`INotifyPropertyChange`在`ObservableCollection`UI 上显示队列。（至少在 WPF 中是这样的。）

这样，您可以直接从模型中操作队列，它会自动显示在 UI 上。

## 如何开始和监控计算？

我认为`Task`s 非常适合这个。您可以开始`Task`使用`Task.Factory.StartNew()`. 由于您的 s 似乎`Task`需要很长时间才能执行，因此您可以考虑使用[`TaskCreationOptions.LongRunning`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions.aspx). 您还可以使用`Task`来了解计算何时完成（或者是否因异常而失败）。

## 如何暂停正在运行的计算？

你可以使用[`ManualReserEventSlim`](http://msdn.microsoft.com/en-us/library/system.threading.manualreseteventslim.aspx)它。通常，它会被设置，但如果你想暂停 running `Task`，你会这样做`Reset()`。计算将需要定期调用`Wait()`该事件。如果不与该线程上的计算合作，就不可能合理地暂停正在运行的线程。

如果您使用的是 C# 5.0，更好的方法是使用类似[`PauseToken`](http://blogs.msdn.com/b/pfxteam/archive/2013/01/13/cooperatively-pausing-async-methods.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:37:25.407

对于队列，您可以使用堆数据结构（优先队列）。这将有助于确定您的任务的优先级。此外，您应该使用线程池进行有效计算。并尝试将您的任务分成小部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:35:38.453

我建议您没有将问题分解得足够远，这就是您感到沮丧的原因。

你需要从小处着手，从那里开始。您提到，但没有定义您的实际要求，但它们似乎是......

1.  需要能够运行？N？计算
2.  有些需要同时运行（这是否意味着它们共享数据，如果是，您将如何共享数据）
3.  必须能够暂停计算（不要使用 Thread.Suspend，因为它可能会使线程处于不稳定状态，如果您正在共享数据尤其糟糕），因此您需要在每次计算中建立暂停点。还需要考虑如何将暂停/取消暂停传达给计算

至于方法，有几个需要考虑...

线程是一个显而易见的选择，但也需要小心照料（启动、暂停、停止等...）

您也可以使用 BackGroundWorker 或可能的 Parallel.ForEach

BackGroundWorker 包含用于取消工作人员并提供进度的框架（这可能很有用）。

我的建议是使用 BackGroundWorker，可能将其子类化以添加您需要的暂停/恢复功能。确定您将如何管理数据共享（至少使用锁定来防止同时访问）。

您可能会发现 BackGroundWorker 过于严格，需要使用 Threads，但我通常能够避免它。

如果您发布更明确的要求，或者您尝试过但没有成功的示例，我将很乐意提供更多帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:31:19.943

在 Framework 4.5 中，这里的答案是 Async API，它消除了管理线程的需要。有关详细信息，请查看[async/await](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)关键字。

从更广泛的角度来看，“CalcProcessor”类是一个好主意，但我认为 Task 对象足以替换您的“Calculation”类。处理器可以简单地拥有一个可枚举的任务。如果需要，处理器可以公开管理队列的方法，以及返回有关其状态的信息。当您的应用程序最终达到必须有结果的状态时，您可以使用 AwaitAll 方法阻塞 CalcProcessor 的线程，直到所有任务完成。

如果没有关于此处实际目标的更多信息，很难给出更好的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T14:31:20.163

您可以使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)在 UI 上显示结果并将更改顺序返回到处理器。[状态](http://en.wikipedia.org/wiki/State_pattern)和[命令](http://en.wikipedia.org/wiki/Command_pattern)模式将帮助您开始、暂停、取消计算。这些模式以设计方式很好地回答了您的问题。并发仍然是一个问题，它们没有解决多线程问题，但它们为管理线程开辟了一条更容易的道路。

# powershell - 使用 Exchange Powershell 进行选择性 ItemCount

> ID：14709678
> 
> 赞同：0
> 
> 时间：2013-02-05T14:21:05.870
> 
> 标签：powershell, exchange-server

我知道使用 Get-MailboxStatistics 对 ItemCount 和大小等进行求和非常容易，但是谁能告诉我如何有选择地做到这一点？

所以这里的一个例子是我想使用电子邮件项目属性（字段）来选择性地计数。想象一个场景，我说“好的，这个人邮箱中设置了“跟进标志”的项目计数是多少，或者具有“重要性”标志的邮件项目的计数是多少。

本质上，我想我正在尝试制作等效于搜索文件夹的服务器端脚本，因此我可以在 Outlook 中使用这些字段来创建基于电子邮件字段的搜索文件夹，我希望能够“ count”作为 cmdlet 的一部分。

那有意义吗？可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:44:34.840

Exchange 管理 cmdlet 中没有任何内容可以深入邮箱项目。我认为您最好的选择是 EWS 托管 API。

我将从这里开始：

[http://gsexdev.blogspot.com/#!/2012/01/ews-managed-api-and-powershell-how-to.html](http://gsexdev.blogspot.com/#!/2012/01/ews-managed-api-and-powershell-how-to.html)

# actionscript-3 - 从 .as 文件添加到 ActionScript 3 中的舞台

> ID：14709682
> 
> 赞同：0
> 
> 时间：2013-02-05T14:21:21.380
> 
> 标签：actionscript-3, sprite, stage, addchild, displayobject

注意：是的，我知道以前有人问过类似的问题。但是，在遵循此类问题的答案后，我仍然陷入困境，无法找到解决问题的方法。

我遇到了一个问题，需要将 DisplayObjects 添加到 Flash 阶段。由于我必须显示几个不同类的元素，我决定创建一个类作为 .as 文件和`addChild`名为“Displayer”的函数之间的中介，如下所示：

```
package
{
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.display.Stage;

    public class Displayer extends Sprite //I read somewhere that DisplayObject
//as an extension can't be used for this, so Sprite will have to do.
    {
        private var _stage:Stage;

        function Displayer()
        {
            _stage = new Stage;
        }

        public function displayElement(displayable:DisplayObject)
        {
            _stage.addChild(displayable);
        }
    }
} 
```

我编译它，出现了一个我不明白的问题：错误 #2012：无法实例化 Stage 类。显然，此代码中的某些内容要么丢失，要么不合适，但由于它非常简单，我看不出问题出在哪里。我确信这不是很复杂，我可能只是需要一个局外人的观点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:46:18.333

Stage 对象不可全局访问。您需要通过 DisplayObject 实例的 stage 属性来访问它。

请参阅以下文档。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html)

```
package
{
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.display.Stage;

    public class Displayer extends Sprite
    {
        var isAddedToStage:Boolean;

        public function Displayer()
        {
            if(stage) init();
            else      addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event=null):void
        {
           removeEventListener(Event.ADDED_TO_STAGE, init);
           isAddedToStage = true;
        }

        public function displayElement(displayable:DisplayObject):void
        {
            if(isAddedToStage)
              this.stage.addChild(displayable);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:20:23.073

`Stage`正如错误所说，您没有实例化该类。就像您无法实例化`DisplayObject`该类一样（这就是您必须扩展的原因`Sprite`）。

基本上，您有两种选择：

`DisplayObjectContainer`1）您从一个实例添加孩子。

```
var displayerInstance:Displayer = new Displayer();
this.addChild( displayerInstance ); 
```

您将从已添加到全局舞台的 DisplayObjectContainer 对象运行它。每个项目中只有一个stage，即使你嵌入了SWF，SWF的stage属性实际上是顶级应用程序的stage属性。因此，如果您将此`Displayer`实例嵌套在一个嵌套在主应用程序中创建的另一个类中的类中，则必须在每个这些类中运行“addChild”`Displayer`才能显示。

2）你作弊。完全不建议这样**做**。基本上，您在实例化`Displayer`类时传入对象的阶段对象。

```
var displayerInstance:Displayer = new Displayer( this.stage );
public function Displayer( stage:Stage ) {
    this.stage = stage;

    if ( this.stage ) {
        this.stage.addChild( this );
    }
} 
```

这是一种非常适合将单例添加到舞台的方法（除非没有单例的构造函数）。我在圣诞节前创建了一个分析器，它是一个 Singleton（后来发现 Scout，该死的），它使用这种方法在适当的时候向舞台添加东西。

同样，不建议在这种情况下使用第二种选择，但这是可能的。

顺便说一句，除非有明确的理由（例如弹出窗口），否则您*永远不*应该直接向 中添加内容。`Stage`您应该遵循显示列表方法，其中 DisplayObjectContainer 添加另一个 DisplayObject 或 DisplayObject 容器作为子容器，依此类推，以使它们都连接到 TopLevelApplication。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:25:47.330

好的，我认为实例化舞台类是行不通的，因为 as3 文档说：“舞台对象不可全局访问。您需要通过 DisplayObject 实例的舞台属性访问它。”

相反，您应该将对 Stage 对象的引用传递给您的 Displayer 类，并且您可以通过显示对象实例获取对舞台对象的引用，正如文档所说的那样。

所以构造函数现在可能看起来像：

```
function Displayer( stage:Stage )
{
    _stage = stage;
} 
```

假设实例化您的 Displayer 的对象是舞台的子级，您可以通过以下方式实例化 Displayer

```
displayer = new Displayer( stage ); 
```

如果您使用这种方法，则不需要 Displayer 类扩展任何内容或添加到舞台（顺便说一句，在 bitmapdata.com 的方法中这是必需的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-19T09:36:13.040

总是有一个简单的解决方案。如果您需要将子元素添加到班级的舞台中，您可以将舞台作为对象传递到班级中并将子元素添加到其中，我这样做是为了将图像添加到我的像这样的舞台。

```
package {
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.net.URLRequest;
    import flash.display.Bitmap;

    public class ImageLoader extends Sprite{

        private var stageObj:Object; //create local variable to refarance stage

        public function loadeimage(StageObject:Object, Url:String){ //StageObject will bring the stage refarance into the class

            var reQuest:URLRequest = new URLRequest(Url);
            loader.load(reQuest);

            stageObj=StageObject; //make local refarance for stage inside the class

            var image:Bitmap;
            image=Bitmap(loader.content);

            image.x = 100;
            image.y = 100;

            stageObj.addChild(image); // add whatever object into stage refarance and this means the real stage..

        }
    }

} 
```

只有带注释的东西很重要，您可以将此文件保存为 ImageLoader.as 并导入并像这样使用它。

```
import ImageLoader;

var IL:ImageLoader = new ImageLoader();
IL.loadeimage(this,"img.jpg"); 
```

就这么简单。我认为这就是您要搜索的内容...祝您好运。（您可以通过 this 或 this.stage 的任何容器或 parant 容器，您的孩子将成为其中的一部分并不重要。

# ms-access - 主窗体/表中子窗体创建的记录的存储ID

> ID：14709683
> 
> 赞同：1
> 
> 时间：2013-02-05T14:21:22.147
> 
> 标签：ms-access, ms-access-2003

![关系](../Images/d857436cfc5de44782454f00c0fb16e8.png)

![形式](../Images/2acc144782f5f545d52c02ebc553fd6e.png)

表度量包含许多链接到包含多个问题的表的外部 id。该表单将包含每个链接表的许多子表单，为了清楚起见，我目前仅显示链接表“nbas_test”。

当在子表单中输入信息时，会创建一条新记录，如何将子表单生成的新记录的 ID 存储在主表中。

即在这种情况下，我如何将 nbas_test.nbas_ID 存储在 measure.nbas_ID 中。

目前我可以通过在 NBAS_test 中包含参与者 ID 和时间点 _id 并在表单上包含另一个组合框来选择适当的 NBAS 记录并绑定 nbas_ID 来做到这一点，但这似乎有点笨拙，除非我强迫我的最终用户这样做，否则他们可能会这样做忘记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:23:00.777

根据您的要求，您应该能够使用子表单的 After Insert 或 After Update* 事件来更新父表单上的绑定控件。

```
 Me.Parent.txtSubID = Me.txtnbas_ID 
```

* * *

`*`After Update 事件也在插入记录后运行，因此您不需要这两个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:16:39.517

连接两个领域！

在子窗体上 -> 属性 (F4) -> “数据”选项卡 -> “链接子字段”和“链接主字段”

# delphi - 如何使用 Delphi XE3 在 SQLite 中插入 Blob

> ID：14709685
> 
> 赞同：2
> 
> 时间：2013-02-05T14:21:24.827
> 
> 标签：delphi, sqlite, delphi-xe3

我尝试使用 Delphi XE3 插入 SQLite 中的 blob 字段。

我一直在像这样使用 TDBXCommand 和 TSQLConnection 。但没有插入 blob 字段，即使我无法从查询中获得任何结果

```
procedure TDBXCommandHelper.Init(const AQry: String);
begin
  Parameters.ClearParameters;
  Close;
  Prepare;
  Text := AQry;
end;

procedure dmDB.InsertPicture;
const
  QRY = 'INSERT INTO Memo(Picture) VALUES(?)';
var
  LTransaction: TDBXTransaction;
  LBlob: TDBXParameter;
  LStream: TFileStream;
begin
  LTransaction := FDBCon.BeginTransaction;
  LStream := TFileStream.Create('d:\sample.bmp', fmOpenRead);
  LBlob := TDBXParameter.Create;
  try
    try
      FDBXCmd := FDBCon.DBXConnection.CreateCommand;
      FDBXCmd.CommandType := TDBXCommandTypes.DbxSQL;
      FDBXCmd.Init(QRY);

      LBlob.DataType := TDBXDataTypes.BlobType;
      LBlob.SubType := TDBXSubDataTypes.BinarySubType;
      LBlob.Value.SetStream(LStream, False);
      FDBXCmd.Parameters.AddParameter(LBlob);
      FDBXCmd.ExecuteUpdate;
    except
      on E: Exception do
        FDBCon.RollbackFreeAndNil(LTransaction);
    end;
    FDBCon.CommitFreeAndNil(LTransaction);
  finally
    FreeAndNil(LStream);
    FreeAndNil(LBlob);
  end;
end; 
```

使用 TSQLConnection 但我无法得到任何结果

```
procedure TInsertThread.NoteInsertExcute;
const
  QRY = 'INSERT INTO Memo(Picture) VALUES(:Picture)';
var
  LTransaction: TDBXTransaction;
  LParams: TParams;
  LStream: TMemoryStream;
begin
  LTransaction := FDBCon.BeginTransaction;
  LParams := TParams.Create(nil);
  LStream := TMemoryStream.Create;
  LStream.LoadFromFile(FValues.Values[NAME_PICTURE]);
  try
    LParams.CreateParam(ftBlob, 'Picture', ptInput);
    LParams.ParamByName('Picture').LoadFromStream(LStream, ftBlob);
    FDBCon.Execute(QRY, LParams);
    FDBCon.CommitFreeAndNil(LTransaction);
  finally
    FreeAndNil(LStream);
    FreeAndNil(LParams);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-21T08:38:58.467

这很简单，例如：

```
var
  ms: TMemoryStream;  
  sq: TSQLQuery;  
begin  
  ms := TMemoryStream.Create;
  ms.LoadFromFile('C:\Pictures\l.jpg');
  if ms <> nil then
   begin
     sq := TSQLQuery.Create(nil);
     sq.SQLConnection := con1;
     sq.SQL.Text := 'update db1 set picture= :photo ;';
     sq.Params.ParseSQL(sq.SQL.Text, true);
     sq.Params.ParamByName('photo').LoadFromStream(ms, ftBlob);
     sq.ExecSQL();
   end; 
```

.
其中 con1 是一个 TSQLConnection。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:50:56.787

您可以尝试以下方法：

```
function GetFileAsBytesValue(AFileName: TFileName): TArray<Byte>;
var
  Len: Integer;
  LStream: TMemoryStream;
begin
  LStream := TMemoryStream.Create;
  try
    LStream.LoadFromFile(AFileName);
    Len := LStream.Size;

    SetLength(Result, Len);
    Move(LStream.Memory^, Result[0], Len);
  finally
    LStream.Free;
  end;
end;

procedure dmDB.InsertPicture;
const
  QRY = 'INSERT INTO Memo(Picture) VALUES(?)';
var
  LTransaction: TDBXTransaction;
  LDBXCmd: TSQLQuery;
  LParam: TParam;
begin
  LTransaction := FDBCon.BeginTransaction;
  LDBXCmd := TSQLQuery.Create(FDBCon);
  try
    try
      LDBXCmd.SQLConnection := FDBCon;
      LDBXCmd.SQL.Text := QRY;
      LParam := LDBXCmd.Params.CreateParam(ftBlob, 'Picture', ptInput);
      LParam.AsBlob := GetFileAsBytesValue('d:\sample.bmp');
      LDBXCmd.ExecSQL;
    except
      on E: Exception do
        FDBCon.RollbackFreeAndNil(LTransaction);
    end;
    FDBCon.CommitFreeAndNil(LTransaction);
  finally
    LDBXCmd.Free;
  end;
end; 
```

# jsf-2 - 如何使用 在

> ID：14709688
> 
> 赞同：1
> 
> 时间：2013-02-05T14:21:26.983
> 
> 标签：jsf-2, richfaces, tabpanel

我正在开发我的第一个 JSF2 + Richfaces 应用程序，现在我遇到了这个问题。

我有以下丰富的：tabPanel 动态添加和删除选项卡。

```
<h:form>
  <rich:tabPanel id="tabsPanel" switchType="ajax" activeItem="#{tabsBean.activeTab}" >
     <c:forEach var="tab" items="#{tabsBean.tabs}" styleClass="myRightPanel">
        <rich:tab  name="#{tab.name}" styleClass="myTab" >
            <h:form id="#{tab.name}" >
            <ui:include src="#{tab.pathDaIncludere}" />
        </h:form>
    </rich:tab>
   </c:forEach> 
  </rich:tabPanel>
</h:form> 
```

但要运行，我必须`<h:form>`在每个周围添加一个，`<rich:tab>`否则选项卡中的操作将不起作用。

`<h:form>`每个选项卡中的插入是否正确？

# sql - 在多个表中搜索唯一 ID

> ID：14709689
> 
> 赞同：0
> 
> 时间：2013-02-05T14:21:31.053
> 
> 标签：sql

我有一个场景，我需要在多个表中搜索唯一 id 并根据它存在的位置分配一个级别。

```
Table Hierarchy

        TableA
                TableB
                         TableC 
```

表 B 保存表 A 的主键，表 C 保存表 B 的主键

我需要有一个以Id 作为参数并在此表层次结构和返回级别中搜索该ID 的函数，即如果它存在于TableA 中，级别应该是一个。如果它存在于 TableB 中，级别应该是 2，如果它在 TableC 中，那么级别应该是 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:25:19.837

这是一种方法：

```
SELECT CASE WHEN EXISTS(SELECT 1 FROM TableC WHERE id = @id) THEN '3'
            WHEN EXISTS(SELECT 1 FROM TableB WHERE id = @id) THEN '2'
            WHEN EXISTS(SELECT 1 FROM TableA WHERE id = @id) THEN 'One'
       END AS "Level" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:23:53.360

您需要一个如下所示的查询：

```
SELECT 1 FROM TableA WHERE id = {0}
UNION ALL
SELECT 2 FROM TableB WHERE id = {0}
UNION ALL
SELECT 3 FROM TableC WHERE id = {0} 
```

与“WHEN”语句相比，它的优势在于 a）我不喜欢 WHEN 语句，以及 b）如果一个键存在于多个表中，这将为每个表返回一条记录，让您有机会围绕处理该问题构建程序逻辑案子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:25:35.370

`CASE`假设您要返回最高级别，3 是 TableC 的最高级别，那么使用以下语句应该可以使用以下内容：

```
SELECT 
   CASE 
     WHEN C.Id IS NOT NULL THEN 3 
     WHEN B.Id IS NOT NULL THEN 2
     WHEN A.Id IS NOT NULL THEN 1
   END as Level 
FROM (SELECT @Id as Id) H
   LEFT JOIN TableA A ON H.Id = A.Id
   LEFT JOIN TableB B ON H.Id = B.Id
   LEFT JOIN TableC C ON H.Id = C.Id 
```

其中@Id 是您要搜索的值的Id，例如SELECT 1 as Id。

祝你好运。

# ember.js - ember-pre4 动作助手不再传递浏览器事件？

> ID：14709694
> 
> 赞同：3
> 
> 时间：2013-02-05T14:21:51.883
> 
> 标签：ember.js

嗨，我的模板中有以下代码：

```
<div {{action "play" this target="view"}}>{{title}}</div> 
```

在我看来，以下代码：

```
MB3.PlaylistView = Ember.View.extend({
  play: function(event) {
  }
}); 
```

传递给 play 函数的参数 event 现在是播放列表模型（在上面显示的动作助手中作为“this”传递）

在 Ember-pre2 中，传递给操作处理程序的参数接收具有诸如`currentTarget`等属性的浏览器事件以及模型所在的属性上下文。

如何访问本机事件的参数，如`currentTarget`ember-pre4 中的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:26:57.980

关于这张票也有很多讨论：

[https://github.com/emberjs/ember.js/issues/1684](https://github.com/emberjs/ember.js/issues/1684)

推荐的解决方案是创建一个自定义视图，然后定义一个点击处理程序。单击处理程序将作为第一个参数传递事件。

```
MB3.PlayButtonView = Em.View.extend({
  click: function(event){
  ... click handler
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:05:28.460

这是有意的，但有一个改进问题，请参阅[https://github.com/emberjs/ember.js/issues/1986](https://github.com/emberjs/ember.js/issues/1986)

# java - 接口没有构造函数，那怎么继承呢？

> ID：14709696
> 
> 赞同：1
> 
> 时间：2013-02-05T14:21:52.940
> 
> 标签：java, inheritance, constructor, interface

据我所知，子类构造函数使用`super();`. 但是既然接口没有任何构造函数，那么继承怎么可能发生呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:23:46.023

> 但是由于接口没有任何构造函数，继承如何发生？

很简单，一个接口不能有任何实例字段，所以没有什么可以构造的。您不能将代码放在接口中（无论如何都到 Java 7），所以没有什么需要调用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:23:19.770

接口是一个契约，定义了实现必须提供哪些方法。类不继承接口而是实现它。

从[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html)：

> 这种类型没有实现，但其他不相关的类可以通过为其抽象方法提供实现来实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:24:19.883

接口不是继承的——而是实现的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T14:23:42.070

接口（也称为服务契约）是实现的，而不是构造的。它们定义了一个类提供的一组方法（服务），因此客户端知道他对实现类的期望，而不管实现接口的实际类型如何。构造函数与给定类型的这个特定实例相关，实现接口。

```
IYourObject yourObject = new YourObject(); 
```

另一方面，接口继承也是通过扩展来实现的。它将一个接口的方法“添加”到另一个接口，并允许在“层次结构”中的不同接口之间切换对象的接口类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-26T18:28:38.680

接口不包含构造函数，原因如下：

*   接口的数据成员已经初始化。
*   不允许定义的特殊定义方法的构造函数以及接口数据成员是静态的。

# ruby-on-rails - 如何向现有属性添加索引和重新索引？

> ID：14709698
> 
> 赞同：3
> 
> 时间：2013-02-05T14:21:56.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, indexing

我正在通过代码获取记录，就像这些

```
@community = Community.find_by_community_name(params[:community_name])
@user = User.find_by_username(params[:username]) 
```

我想让它加载更快，所以我想像这样为它们添加索引。
如果我这样做`rake db:migrate`，它是否也会重新索引到现有记录？
或者只是从现在开始创建的记录？
像这样添加索引是否提高了加载速度？

```
class AddIndexToCommunity < ActiveRecord::Migration
  def self.up
    add_index :communities, [:community_name, :title, :body], :name=>:communities_idx
  end

  def self.down
    remove_index :communities, [:community_name, :title, :body], :name=>:communities_idx
  end
end

class AddIndexToUser < ActiveRecord::Migration
  def self.up
    add_index :users, [:username, :nickname, :body], :name=>:users_idx
  end

  def self.down
    remove_index :users, [:username, :nickname, :body], :name=>:users_idx
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:33:29.377

`rake db:migrate`将执行数据库迁移并立即应用索引。您应该仅将索引应用于您在搜索中使用的列。请记住，indeces 会增加操作的时间`insert`损失`update`。如果您按它们加载记录`names`，则仅将索引添加到`names`：

```
class AddIndexToCommunity < ActiveRecord::Migration
  def self.up
    add_index :communities, :community_name
  end

  def self.down
    remove_index :communities, :community_name
  end
end

class AddIndexToUser < ActiveRecord::Migration
  def self.up
    add_index :users, :username
  end

  def self.down
    remove_index :users, :username
  end
end 
```

# python - 根据条件导入/导出

> ID：14709699
> 
> 赞同：0
> 
> 时间：2013-02-05T14:21:57.307
> 
> 标签：python

想象一个`settings.py`：

```
if condition:
  A_SETTING = True
else:
  A_SETTING = False 
```

我怎样才能有另一个文件只是导入它并根据条件获取设置：

```
import settings

use_setting_somehow(settings.A_SETTING) 
```

**更新：**请忽略这个。我的功能有误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:26:21.430

检索依赖于特定条件的值可能应该是一个 getter，而不仅仅是一个设置变量。

```
def get_setting(setting):
    if condition:
        return 1
    else:
        return 'A'

import settings
settings.get_setting('BLARP') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:39:44.813

这应该有效：

**设置.py**：

```
if 1 == 1:
    TESTVAR = True
else:
    # Note that you need a else, because if your
    # logic fails in the statements above, you'll have no variable..
    TESTVAR = False 
```

在**test.py**中：

```
import settings
print settings.TESTVAR 
```

# java - 编译时未闭合的字符串文字错误，因为它包含 HTML 的双引号和前置标记

> ID：14709700
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:22:00.690
> 
> 标签：java, string

在我的程序中，有一个包含双引号和小于和大于符号的字符串。这是一个示例字符串：

```
String s2="div class=\"codeblock\"><pre name=\"code\" class=\"java\" "; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:31:13.507

转义“\”就是答案。或者，由于 xml 中需要大量转义（html 也可以被视为 xml），所以最好有一个单独的文件并从文件中读取字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T06:52:18.557

谢谢大家，我终于找到了解决方案，我从html文件中复制了双引号，所以出现了问题。当我更改java文件中的双引号时，它编译成功。

# java - HATEOAS 和 API 的动态发现

> ID：14709702
> 
> 赞同：2
> 
> 时间：2013-02-05T14:22:04.140
> 
> 标签：java, rest, restful-url, restful-architecture, hateoas

HATEOAS 原则“客户端仅通过服务器在超媒体内动态识别的动作进行状态转换”

现在我对动态这个词有疑问，尽管我猜它是那里最重要的一个词。

如果我在 API 中将我的参数之一从说可选更改为强制，我**必须**修复我的客户端，否则请求将失败。

简而言之，HATEOAS 所做的只是给予服务器端开发人员极大的自由来随意更改 API，代价是所有客户端都使用他/她的 API。

我这样说是对的，还是我错过了诸如版本控制之类的东西，或者可能是服务器必须采用的 JSON 以外的其他媒体类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:02:09.917

每当您将 API 中的参数从可选更改为强制时，*都会*破坏该 API 的使用者。它是一个遵循 HATEOAS 原则的 REST API 不会以任何方式改变这一点。相反，如果您希望保持兼容性，则应避免进行此类更改；确保客户端针对旧 API 编写的任何调用或发送的消息将继续按预期运行。

另一方面，最好不要让客户端期望返回的元素集总是相同的。如果服务器选择提供附加信息，他们应该能够忽略服务器提供的附加信息。同样，这只是很好的 API 设计。

HATEOAS 不是问题。过分严格的 API 期望是问题所在。HATEOAS 只是问题解决方案的*一部分*（因为它可能使客户不必了解大量关于服务的状态模型，即使它不一定使它直截了当）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:41:54.940

Donal Fellows 有一个很好的答案，但同一枚硬币还有另一面。HATEOAS 原则对消息的格式没有任何规定（REST 的其他部分有）；相反，它本质上意味着客户端不应该尝试知道在带外对哪个 URI 进行操作。相反，服务器应该通过超链接（或构建超链接的表单/模板）告诉客户端哪些 URI 是感兴趣的。这个怎么运作：

1.  客户端从状态 0 开始。
2.  客户端请求一个众所周知的资源。
3.  服务器的响应将客户端移动到新状态*N*。根据响应代码和有效负载，此时可能有多种状态可实现。
4.  响应包括链接（或表单/模板），它们*在 band*中告诉客户端一组潜在的下一个状态。
5.  客户端通过在 URI 上发出方法来选择可能的下一个状态之一。

重复 3 到 5 到状态*N+1*及以后，直到满足客户端的应用程序需求。

*以这种方式，服务器可以自由地更改将客户端从状态N*移动到状态*N+1*的 URI，而不会破坏客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-04T21:52:02.213

在我看来，您误解了引用的原则。您的问题表明您考虑资源并且可以“动态”定义它们。就像在应用程序运行时添加到某些资源类型的强制属性一样。这*不是*原则所说的，这在其他答案中得到了正确指出。引用的原则说，**超媒体内的动作应该是动态识别的**。

可用于给定资源的操作可能会随时间改变（例如，因为同时有人添加/删除了关系），并且可能有不同的操作可用于相同的资源但针对不同的用户（例如，因为用户具有不同的授权级别）。HATEOAS 的想法是，客户不应该对在任何给定时间对某些资源可用的操作有任何假设。**客户端应在每次读取该资源时识别可用的操作**。

编辑：以下段落可能是错误的。请参阅评论以进行讨论。

另一方面，客户可能对资源中可用的数据有期望。就像一个`book`资源必须有一个`title`，并且它*可能*有指向该书作者的链接。没有办法避免这些假设引入的耦合，但服务提供者和客户都应该使用向后兼容和版本控制技术来处理它。

# r - R中的randomForest：是否有可能计算案例置信区间？

> ID：14709711
> 
> 赞同：5
> 
> 时间：2013-02-05T14:22:43.210
> 
> 标签：r, random-forest, confidence-interval

R 包*randomForest*报告森林中每**棵树**的均方误差。但是，我需要对数据中每个**案例**的置信度进行衡量。由于*randomForest*通过平均单个树的预测来计算个案预测，我想它也应该可以计算个案标准误差，从而计算置信区间。这可以使用输出的 randomForest 对象来完成（如果是这样：如何？）还是我必须深入研究源代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T15:26:02.533

无需深入研究源代码。您只需要阅读文档。`?predict.randomForest`声明其论点之一被称为`predict.all`：

> **predict.all** 是否应该保留所有树的预测？

因此，将其设置为`TRUE`将为每个案例、每棵树保留一个预测，然后您可以使用它来计算每个案例的标准误差。

我最近了解到 Stefan Wager、Trevor Hastie 和 Brad Efron 的[这篇](http://arxiv.org/pdf/1311.4555.pdf)论文，该论文更严格地研究了随机森林（和其他袋装预测器）生成的预测的标准误差的概念。

# json - 如何在 Go 中解析这个 JSON 字符串？

> ID：14709713
> 
> 赞同：2
> 
> 时间：2013-02-05T14:22:46.043
> 
> 标签：json, go

有问题的 JSON 字符串如下所示：

```
{
"development":{
    "connector":[
         {"id":"connector-server-1", "host":"127.0.0.1", "port":4050, "wsPort":3050},
         {"id":"connector-server-2", "host":"127.0.0.1", "port":4051, "wsPort":3051},
         {"id":"connector-server-3", "host":"127.0.0.1", "port":4052, "wsPort":3052}
     ],
    "chat":[
         {"id":"chat-server-1", "host":"127.0.0.1", "port":6050},
         {"id":"chat-server-2", "host":"127.0.0.1", "port":6051},
         {"id":"chat-server-3", "host":"127.0.0.1", "port":6052}
    ],
    "gate":[
     {"id": "gate-server-1", "host": "127.0.0.1", "wsPort": 3014}
]
},
"production":{
   "connector":[
         {"id":"connector-server-1", "host":"127.0.0.1", "port":4050, "wsPort":3050},
         {"id":"connector-server-2", "host":"127.0.0.1", "port":4051, "wsPort":3051},
         {"id":"connector-server-3", "host":"127.0.0.1", "port":4052, "wsPort":3052}
     ],
    "chat":[
         {"id":"chat-server-1", "host":"127.0.0.1", "port":6050},
         {"id":"chat-server-2", "host":"127.0.0.1", "port":6051},
         {"id":"chat-server-3", "host":"127.0.0.1", "port":6052}
    ],
    "gate":[
     {"id": "gate-server-1", "host": "127.0.0.1", "wsPort": 3014}
]
}
} 
```

我想用这样的代码解析它：

```
package config

import(
    "sync"
    "io/ioutil"
    "encoding/json"
    "errors"
    "log"
)

type Service struct {
    Id string `json:"id"`
    Host string `json:"host"`
    Port uint `json:"port"`
    QueryPort uint `json:"queryPort"`
    WsPort uint `json:"wsPort"`
    ServiceType string 
}

type Config struct {
    Services []Service
    Master Service
    Mutex sync.RWMutex
}

func LoadServers(filepath, env string) (*Config, error) {
    // 读取文件
    content, err := ioutil.ReadFile(filepath)
    if err != nil {
        return nil, err
    }

    configs := make(map[string]map[string][]Service, 0)
    err = json.Unmarshal(content, configs)
    if err != nil {
        return nil, err
    }
} 
```

我希望我的代码将此 JSON 字符串解析为`map[string]map[string][]Service`.

但它显示错误：

```
json: Unmarshal(non-pointer map[string]map[string][]config.Service) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T15:05:04.273

传递`configs`to的地址`json.Unmarshal`。例如，

```
configs := make(map[string]map[string][]Service, 0)
err = json.Unmarshal(content, &configs)
if err != nil {
    return nil, err
}
fmt.Println(configs) 
```

输出：

```
map[production:map[connector:[{connector-server-1 127.0.0.1 4050 0 3050 } {connector-server-2 127.0.0.1 4051 0 3051 } {connector-server-3 127.0.0.1 4052 0 3052 }] gate:[{gate-server-1 127.0.0.1 0 0 3014 }] chat:[{chat-server-1 127.0.0.1 6050 0 0 } {chat-server-2 127.0.0.1 6051 0 0 } {chat-server-3 127.0.0.1 6052 0 0 }]] development:map[chat:[{chat-server-1 127.0.0.1 6050 0 0 } {chat-server-2 127.0.0.1 6051 0 0 } {chat-server-3 127.0.0.1 6052 0 0 }] gate:[{gate-server-1 127.0.0.1 0 0 3014 }] connector:[{connector-server-1 127.0.0.1 4050 0 3050 } {connector-server-2 127.0.0.1 4051 0 3051 } {connector-server-3 127.0.0.1 4052 0 3052 }]]]
&{[] {  0 0 0 } {{0 0} 0 0 0 0}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:40:31.707

以@peterSO 的回答为基础，如果您想要一些花哨的东西，该`encoding/json`包具有`Decoder`类型，它允许您直接从 解码 JSON `io.Reader`，这是一个`os.File`满足的接口。

这将允许您使用`os`包，而不是`io/ioutil`，这可以为您节省导入（视为`ioutil`已经导入`os`。）

```
package main

import (
    "fmt"
    "encoding/json"
    "os"
)

func main() {
    pathToFile := "jsondata.txt"

    file, err := os.OpenFile(pathToFile, os.O_RDONLY, 0644)
    if err != nil {
        fmt.Println(err)
        os.Exit(1)
    }

    configs := make(map[string]map[string][]Service, 0)
    err = json.NewDecoder(file).Decode(&configs)
    if err != nil {
        fmt.Println(err)
        os.Exit(1)
    }
} 
```

这样，您可以直接从文件或数据流中解码 JSON。如果您正在做一些简单的事情并想避免这种事情，这可能是不必要的，但仍然需要注意一些事情。

祝你好运！

# python - 判断一个数是否为素数

> ID：14709717
> 
> 赞同：0
> 
> 时间：2013-02-05T14:22:51.210
> 
> 标签：python, python-2.7, nested-loops, primality-test

我知道它已经讨论过很多次了；我读过它，但不知怎的，我无法得到它。我想编写一个程序来确定输入的数字是否为素数。

我在 Internet 某处找到的实现之一：

```
from math import *

def main():
    n = abs(input("Enter a number: "))
    i = 2
    msg = 'is a prime number.'
    while i <= sqrt(n):
        if n % i == 0:
            msg = 'is not a prime number.'
        i = i + 1
    print n, msg

main() 
```

这里有几个问题：

*   在上面，什么是`i`，为什么它的起始值为`2`？
*   在这个程序中做什么`i = i + 1`？
*   解释器如何知道何时打印`'is a prime number.'`，即使它不在正文循环中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:38:15.250

素数是只能被 1 和自身整除的数。它使用的方法是尝试将您的候选编号除以`n`从 2 到自身的所有其他数字；但是，如果任何数字`i`是您的数字的除数，`n`那么也是如此，`n / i`并且其中至少一个小于或等于`sqrt(n)`因此我们只需要测试到`sqrt(n)`包容性。在实践中，我们只需要测试实际上是素数的除数，但由于我们手头没有素数列表，我们将测试每个素数。

> 上面`i`是什么？为什么它有一个 2 的起始值？

`i`是`n`我们正在测试的潜在因素。它以 2 开头，因为我们不在乎 1 是否除`n`（而且很简单），因为素数定义允许/期望。

> 在这个具体的例子中，i = i + 1 语句是什么？在程序中看不到它的使用。

它在由;`i`定义的循环结束时增加值。`while i <= sqrt(n)`这意味着我们提前`i`测试 的下一个候选除数`n`。

> 最后，python 是如何知道何时打印 'is a prime number' 的。虽然它在身体循环之外？

我们初始化`msg`为“是素数”，如果我们找到任何除数，那么我们在循环内将其更改为“不是素数”。如果循环没有找到除数，或者循环从未运行，我们将使用我们设置的初始值，即“是质数”。顺便说一句`break`，当你找到一个除数时，你可以脱离循环；在那之后进行测试是没有意义的。

另外一方面，您可能希望`sqrt(n)`在 while 之外计算并存储而不是在变量中使用`while`- 您可能会为每次迭代重新计算平方根，这相对昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:09:46.627

我在两边添加了注释来解释每一行的作用：

```
from math import * # imports everything from the math module

def main():
    n = abs(input("Enter a number: ")) # gets input from the user
    i = 2 # starts off at 2 because all input is divisble by 1
    msg = 'is a prime number.' # the message is initially set
    while i <= sqrt(n):
        if n % i == 0: # if 'i' divides evenly into n
            msg = 'is not a prime number.' # only set if it isn't a prime
        i = i + 1 # increases 'i' by 1 so it can check every value up to the square-root of 'n' (to see if it divides evenly)
    print n, msg

main() 
```

程序必须检查每个值`i`（直到 的平方根`n`），以便检查每个可能的因素。

这是一种粗质检查器，对于非素数的大数效率低下：如果输入是一个类似的数字`1234567890`，它将遍历每个数字直到该数字的平方根，即`35147`（向上取整） . 使用`return`语句会中断循环，因此您检查的第一个数字`2`，它被声明为非质数，因为它可以被 整除`2`。通过使用`return`，它将停止该功能，并为您节省 35,146 次计算。这不是一个庞大的数字（至少对于计算机而言），但它仍然更节省内存并且花费更少的时间。

```
def isPrime(n):
    '''Checks if 'n' is prime.'''
    from math import sqrt
    if n == 0 or n == 1:
        return False
    else:
        for check in range(2, int(sqrt(n))+1):
            if n % check == 0: return False
    return True 
```

# wordpress - Tax_Query 不适用于 WP_Query

> ID：14709719
> 
> 赞同：3
> 
> 时间：2013-02-05T14:22:52.687
> 
> 标签：wordpress, wordpress-theming

我一直在努力让 tax_query 在我的 WP_Query 中工作。代码如下：

```
$nextSundayTalkArgs = array(  
        'post_type' => 'talk',  
    'posts_per_page' => 1,  
    'tax_query' => array(  
        array(  
            'taxonomy' => 'talk-type',  
            'field' => 'slug',  
            'terms' => 'sunday-talk'  
        )  
    )  
);  
$nextSundayTalkQuery = new WP_Query( $nextSundayTalkArgs ); 
```

肯定有帖子类型为“talk”的帖子 - 如果我删除 tax_query 部分，正确的帖子会显示得很好。有 5 个带有正确分类术语“星期日谈话”的谈话（如果我尝试使用 ID 而不是 slug，它也不起作用）。

奇怪的是，如果我将帖子类型更改为“帖子”并将分类法更改为“类别”，并省略“字段”和“术语”部分，它会返回我唯一没有任何术语的帖子。

在我发疯之前，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T09:46:40.987

最终在 Wordpress Stackexchange 的帮助下找到了答案。仍然不是 100% 确定我做错了什么，但似乎是我的函数布局和我在`index.php`.

对于遇到此问题并感兴趣的任何人：

[https://wordpress.stackexchange.com/questions/84607/custom-taxonomy-and-tax-query](https://wordpress.stackexchange.com/questions/84607/custom-taxonomy-and-tax-query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:27:17.050

我不确定你的答案，但我会首先尝试找出你的代码产生的数据库查询。

[https://wordpress.stackexchange.com/questions/4809/how-to-display-sql-query-that-ran-in-query](https://wordpress.stackexchange.com/questions/4809/how-to-display-sql-query-that-ran-in-query)

这是调试查询的各种方法的链接。当您看到它的作用时，它有很大帮助，可以在 phpmyadmin 等上运行它。

# python - 如何在网络上读取档案的大小

> ID：14709722
> 
> 赞同：0
> 
> 时间：2013-02-05T14:22:58.867
> 
> 标签：python

我想使用 python（urllib 或 urllib2）从网站下载文件下载时我想显示下载的百分比。

```
#!usr/bin/env python
#-*- coding: latin1 -*-

import urllib

url = 'http://ww1.microchip.com/downloads/en/DeviceDoc/pk2cmdv1-20Linux2-6.tar.gz'
urllib.urlretrieve(url, "pickit.tar.gz") 
```

我怎么能实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:39:39.757

以下代码应该可以工作：

```
def download(url, local_file):
    def progress(blocks_read, block_size, total_size):
        percent = min(int(blocks_read * block_size * 100 / total_size), 100)
        sys.stdout.write("\rdownloading {}: {:2}%".format(local_file, percent))
        if percent == 100:
            sys.stdout.write('\n')
        sys.stdout.flush()

    urllib.urlretrieve(url, local_file, reporthook=progress)

# call download function
download("http://ww1.microchip.com/downloads/en/DeviceDoc/pk2cmdv1-20Linux2-6.tar.gz",
         "pickit.tar.gz") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:31:56.403

这个[答案](https://stackoverflow.com/questions/2028517/python-urllib2-progress-hook)有一个很好的片段。

简而言之：

1.  获取内容长度标头
2.  读取一大块数据
3.  计算百分比
4.  重复 2 和 3 直到完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:30:00.477

改用“ *urllib2.urlopen(..)* ”并读取标题，它将包含您要查找的数据（内容长度）！

一个很好的例子：[Python: Get HTTP headers from urllib2.urlopen call?](https://stackoverflow.com/questions/843392/python-get-http-headers-from-urllib-call)

# xml - JAXB 解组和嵌入式 XSD

> ID：14709724
> 
> 赞同：2
> 
> 时间：2013-02-05T14:23:04.457
> 
> 标签：xml, xsd, jaxb, unmarshalling

我有一个嵌入 XSD 的 XML，所以它类似于：

```
<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="Table">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="elem1" type="xs:string" minOccurs="0" />
                <xs:element name="elem2" type="xs:string" minOccurs="0" />
                <xs:element name="elem3" type="xs:string" minOccurs="0" />
                <xs:element name="elem4" type="xs:string" minOccurs="0" />
                <xs:element name="elem5" type="xs:string" minOccurs="0" />
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <Table>
    <elem1>random1</elem1>
    <elem2/>
    <elem3>random3</elem3>
    <elem4>random4</elem4>
    <elem5>random5</elem5>
  </Table>
</NewDataSet> 
```

我目前正在使用嵌入式 XSD 的克隆作为 Schema ：

```
<xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
  <xs:complexType>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element name="Table">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="elem1" type="xs:string" minOccurs="0" />
            <xs:element name="elem2" type="xs:string" minOccurs="0" />
            <xs:element name="elem3" type="xs:string" minOccurs="0" />
            <xs:element name="elem4" type="xs:string" minOccurs="0" />
            <xs:element name="elem5" type="xs:string" minOccurs="0" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
</xs:element> 
```

但问题是，当我想解组条目 XML 时，我收到以下错误消息：

> 意外元素（uri：“ [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) ”，本地：“schema”）。预期元素是 <{}Table>

我试图在我的 XSD 上添加标签，但没有成功，由于命名空间（我猜？），仍然出现错误。
任何帮助和解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:32:27.163

`StreamFilter`您可以在 an 上利用 StAX ，`XMLStreamReader`以便与 XML 模式对应的元素不会报告为事件。然后你可以从`XMLStreamReader`with JAXB 中解组。

*   [JAXB 过滤解析](https://stackoverflow.com/questions/5949265/jaxb-filtered-parsing/5950542#5950542)

# java - Eclipse 中不可调试的线程（断点无效）

> ID：14709725
> 
> 赞同：1
> 
> 时间：2013-02-05T14:23:04.653
> 
> 标签：java, eclipse, debugging, breakpoints

我在“Low Memory Detector”线程上有一个处理程序，尽管 Eclipse 允许我在处理程序的代码中设置断点，但它会在不暂停线程的情况下运行带有断点标记的行。（其他线程中的断点正常工作。）这是预期的行为吗？在这种情况下是否有帮助调试的技巧？

（此线程用于来自 MXMemoryBean 的通知。）

# eclipse - Eclipse：为上/下/左/右键设置热键

> ID：14709728
> 
> 赞同：3
> 
> 时间：2013-02-05T14:23:10.440
> 
> 标签：eclipse, hotkeys

我非常喜欢上/下/左/右的emacs热键：`Control + N, Control + P, Control + B, Control + F`分别。所以，我想把它带到 Eclipse，但不是所有的 emacs 热键。（因为在 Eclipse 中，有一个使用 emacs 热键的选项）。

在 Eclipse 中，我进入 : `[Windows]\[Preferences]\[Key]`。但是，我不知道要更改哪个类别。请告诉我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T12:01:07.557

以下是类别：

*   上：排队
*   下：线下
*   右：下一列
*   左：上一列

确保检查“时间”字段的“编辑文本”选项，并清除任何可能的冲突（例如，默认情况下，“Ctrl + F”用于查找文本）。

# windows-phone-8 - 在 Windows Phone 上保留大量数据的最佳方法是什么？

> ID：14709729
> 
> 赞同：2
> 
> 时间：2013-02-05T14:23:14.737
> 
> 标签：windows-phone-8, data-storage

我在 Windows Phone 上制作应用程序，我需要在我的应用程序中保留照片。它们大约为 1-1,5 GB，但在应用程序启动时我无法下载它。我想让它们内置在项目中，但我不知道最好的方法是什么。我读到我无法在 Windows Phone 上将数据写入 SD 卡。而且我正在使用本地数据库来保存可以下载的其他数据，但也有空间限制。我还可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:44:23.993

只需将这些文件存储在`MyImages`项目的子文件夹（例如 ）中，并为它们分配一个`Content`构建操作（在文件的属性中设置）。它们可以在运行时通过`new BitmapImage(new Uri("/MyImages/img1.jpg", UriKind.Relative));`

是的，他们不会去存储卡，因为应用程序不能安装在那里。所以要小心设备内存限制。

# php - 如何管理专用服务器

> ID：14709730
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:23:16.400
> 
> 标签：php, mysql, apache, rhel, dedicated-server

我有一个`httpd`已经安装的 RHEL 服务器。但它不支持 PHP，所以我按照书中给出的说明安装了 apachectl、PHP 和 MySql。现在服务器可以处理 PHP，并在 PHP 脚本中运行 mysql 函数。

我的问题是每次系统重新启动时我都必须发出以下命令：

```
service httpd stop
/usr/local/apache/bin/apachectl start 
```

任何人都可以帮助我，以便 php 和 mysql 也可以使用`httpd`吗？即， **不**停止`httpd`服务。这样当我不在现场时，即使是我的同事也`service httpd start`只能发出启动 php 和 mysql 的问题。

PS。我是windows用户，所以我是linux新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:28:41.837

听起来您设法安装了两个 Apache，这是错误的。

正确的方法是直接运行`yum install php`，它会自动配置 Apache 来处理 PHP 文件。

要解决此问题，只需删除 Apache 的“新”安装（不是旧的），然后通过`yum`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:51:30.307

你真的应该使用 yum 在你的 RHEL 上安装/更新软件包。删除您已安装的所有内容并重新开始。这是我通常为 LAMP 环境安装的 yum 包，但您可能会排除一些：

```
yum install httpd
yum install memcached
yum install mysql mysql-devel mysql-server
yum install php php-devel php-gd php-mbstring php-dom php-mysqlnd php-pdo php-pecl-apc php-pecl-memcache 
```

这两行将设置 Apache 和 MySQL 在服务器重新启动时自动启动。

```
chkconfig httpd on
chkconfig mysqld on 
```

# virtualization - VMM 是否在主机上使用虚拟内存？

> ID：14709738
> 
> 赞同：1
> 
> 时间：2013-02-05T14:23:35.433
> 
> 标签：virtualization, virtual-machine, virtual-memory, tlb, mmu

我试图了解过去如何使用影子页表执行虚拟化。我读过的[文章](http://www.anandtech.com/show/2480/10)都在谈论从客户虚拟内存到主机物理内存的转换。我了解影子页面表如何消除访客虚拟到访客物理转换的需要。我的问题是，Host Virtual to Host Physical 步骤发生了什么。（HVA-> HPA）。

引用文章中的虚拟机管理器是否根本不使用主机中的虚拟内存？是否假定它们可以直接访问主机系统的物理内存？甚至可能吗？我认为 TLB 缓存转换是由 MMU 在硬件中实现的，并且每条指令的地址都由 MMU 本身从虚拟地址转换为物理地址。但是话又说回来，我不确定内核代码如何与 TLB 一起工作？内核指令不通过TLB吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T19:39:01.877

我不确定我是否准确地理解了您的观点，我正在尽力回答您的问题。

不需要 HVA->HPA，因为客人想要的是 HPA 而不是 HVA。这意味着 HVA 对于访问其客户内存区域的客户来说是无用的。

因此，您预期的传输流程可能在不考虑影子页表的情况下可能是：

`GVA -> GPA -> HVA -> HPA`

但是由于大多数虚拟机管理程序都是在内核模式下运行的，谁知道主机和客户的内存是如何分配的，所以它可以直接将 GPA 映射到 HPA 并消除对 HVA 的需要：

`GVA -> GPA -> HPA`

这个客户记忆翻译流程与 hyperviosr 的用户空间无关，其流程是`HVA -> HPA`.

不确定以上是否回答了您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T03:02:55.577

答案可以是**yes**或**no**。如果是，管理程序将客户 RAM 映射到主机上的虚拟内存，因此主机可以将其换入和换出主机 RAM。如果不是，管理程序将客户 RAM 映射到主机上的锁定物理内存。

[VirtualBox](https://www.virtualbox.org/)属于**no**组。VirtualBox 在主机内核中运行一个设备驱动程序，并使用该驱动程序为客户 RAM 分配锁定内存。客户 RAM 的每一页都驻留在固定的主机物理地址，因此主机永远无法换出该页。因此，客户 RAM 必须小于主机 RAM。VirtualBox 的手册说要[为主机预留至少 256 MB 到 512 MB 的空间](https://www.virtualbox.org/manual/ch01.html#gui-createvm)。

MMU 只能将虚拟地址映射到物理地址。在 VirtualBox 中，来宾有一个模拟的 MMU 来将来宾虚拟地址映射到来宾物理地址。VirtualBox 有自己的客户物理地址到主机物理地址的映射，并使用主机 MMU 将客户虚拟地址映射到主机物理地址。由于内存锁定，主机物理地址永远不会变得无效。

[Mac-on-Linux](http://r.duckduckgo.com/l/?kh=-1&uddg=http%3A%2F%2Fmac-on-linux.sourceforge.net%2F)属于**yes**组。我曾经用它在主机 PowerPC Linux 中运行来宾 Mac OS 9。我为 Mac OS 9 提供了 256 MB 的 RAM，但我真正的 Linux 机器只有 64 MB 的 RAM。这是因为 MOL通过用户进程中[的普通`mmap()`调用将客户 RAM 映射到主机虚拟内存中。](http://sourceforge.net/p/mac-on-linux/code/171/tree/trunk/src/main/memory.c#l125)然后 MOL 使用 Linux 内核模块来控制主机 MMU。

但是主机 MMU 只能映射到主机物理地址，不能映射到虚拟地址。来宾有一个模拟的 MMU，它将来宾虚拟映射到来宾物理。MOL[添加了一个基地址](http://sourceforge.net/p/mac-on-linux/code/171/tree/trunk/src/main/memory.c#l220)来将客户物理转换为虚拟主机。MOL 的内核模块[使用主机映射](http://sourceforge.net/p/mac-on-linux/code/171/tree/trunk/src/kmod/Linux/fault.c#l54)将主机虚拟转换为主机物理，然后使用主机 MMU 将客户虚拟映射到主机物理。

如果 Linux 换出客户 RAM 的一页，那么主机物理地址将变得无效，客户系统可能会覆盖其他人的内存并导致主机崩溃。必须有某种方式通知 MOL Linux 已换出该页面。MOL 通过修补名为or[的内部 Linux 内核函数](http://sourceforge.net/p/mac-on-linux/code/171/tree/trunk/src/kmod/actions.c#l385)解决了这个问题。`flush_map_page``flush_map_pages`

[KVM](http://www.linux-kvm.org/page/Main_Page)也属于**yes**组。Linux 添加了一个称为[内存管理通知](http://lwn.net/Articles/266320/)程序的内核特性来支持 KVM。当 QEMU 使用 KVM 进行虚拟化时，它会[在主机虚拟内存中分配客户 RAM](http://www.linux-kvm.org/page/Memory)。当主机换出页面时，MMU 通知器会通知 KVM。

# ant - 哪里可以插入“if”任务？

> ID：14709739
> 
> 赞同：0
> 
> 时间：2013-02-05T14:23:36.150
> 
> 标签：ant, if-statement, task, ant-contrib

我可以看到，“如果”任务可以在“目标”根目录或任何需要执行某些操作的地方使用。但是当我指定一些参数时我可以使用它吗？例如有 ant-javafx 任务 fx:deploy，我们可以在其中声明类路径：

```
<fx:deploy ...>
    <fx:resources>
        <fx:fileset dir="..." ...>
        <fx:fileset dir="..." ...>
    </fx:resources>
</fx:deploy> 
```

问题是我可以在那个用例中使用“if”吗？例子：

```
<fx:deploy ...>
    <fx:resources>
        <if>
          <available file="${lib.dir}" type="dir" />
          <then><fx:fileset dir="${lib.dir}" ...></then>
        </if>
        <fx:fileset dir="..." ...>
    </fx:resources>
</fx:deploy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:24:21.437

好的，你从哪里得到你的`<if>`任务？

这些来自[Ant-Contrib](http://ant-contrib.sourceforge.net/)吗？如果是这样，这些是任务，而不是可以在任务中使用的子实体。

但是，可以在语句中定义***资源***`<if>`：

```
<if>
   <avaliable file="${lib.dir}" type="dir"/>
   <then>
       <fileset dir="${lib.dir}" id="lib.fileset">
           <includes name="..."/>
       </fileset>
    </then>
    <else>
        <fileset dir="${foo.dir}" id="lib.fileset">
            <include name="..."/>
        </fileset>
    </else>
</fi> 
```

现在您将拥有一个 id 的文件集，`lib.fileset`它可能是两个不同定义之一。然后，您可以将其用作子实体的一部分：

```
<jar destfile="${jar.name}">
    <fileset refid="lib.dir"/>
</jar> 
```

我说可能***是***因为我从未尝试过，但我真的不明白为什么它不会。我从未使用过 JavaFX 任务，所以我不想举一个例子，但文档确实说[`<fx:resources>`](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference002.htm#CIADIIEI)可以使用参考 ID。

# web - 阻止 Google（和其他搜索引擎）抓取域

> ID：14709747
> 
> 赞同：0
> 
> 时间：2013-02-05T14:23:46.803
> 
> 标签：web, dns, seo, search-engine

我们想为某些目的打开一个新域（称为 PR）。问题是我们希望域指向我们目前拥有的同一个网站。

我们根本不希望这个新域出现在搜索引擎（特别是 Google）上。

我们排除的选项：

*   无法使用 Robots.txt - 它在两个域上的工作方式相同，这不是我们想要的。
*   [`rel=canonical`](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)不会阻止 - 仅建议将类似页面编入索引[。](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)原始页面可能最终被编入索引。

有没有办法处理这个？

**编辑**

关于`.htaccess`建议：我们在 IIS7 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:26:28.033

`rel=canonical`不是*建议*。它准确地告诉谷歌要使用哪个页面。

话虽如此，当您不想索引域中的页面时，您可以使用[`x-robots-tag-阻止这些页面被索引：](http://googleblog.blogspot.com/2007/07/robots-exclusion-protocol-now-with-even.html)

> 只需将任何受支持的 META 标记添加到用于提供文件的 HTTP 标头中的新 X-Robots-Tag 指令。
> 
> 不要将此文档包含在 Google 搜索结果中：

`X-Robots-Tag: noindex`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:41:17.780

我会通过说站点根目录的相关域上的 .htaccess 文件来阻止。

```
BrowserMatchNoCase SpammerRobot bad_bot
Order Deny,Allow
Deny from env=bad_bot 
```

您必须指定主要搜索引擎使用的不同机器人。或者您可以允许所有已知的网络浏览器并将它们列入白名单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:27:11.973

您是否尝试过[在 Google 网站管理员工具中设置您的首选域？](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139066&topic=2371375&ctx=topic#1)

这种方法的缺点是它不适用于其他搜索引擎。

# wix - 配置 WiX 项目以安装多个版本，但删除相同的次要版本

> ID：14709749
> 
> 赞同：4
> 
> 时间：2013-02-05T14:23:48.700
> 
> 标签：wix, wix3

我需要配置我的 WiX 项目，以便能够安装产品的多个次要版本。IE：我可以安装 1.0、1.1 和 1.3。如果我尝试安装 1.2，它将工作，但如果我尝试使用 1.1，它将在继续之前卸载以前的 1.1 安装。

到目前为止，这就是我的`Upgrade`标签中的内容：

```
<Upgrade Id="$(var.UpgradeCode)">
    <UpgradeVersion Minimum="$(var.MajorMinorVersion)" IncludeMinimum="yes" 
        Maximum="$(var.VersionNumber)" IncludeMaximum="no" Property="OLDERMINORFOUND"/>
</Upgrade> 
```

`UpgradeCode`是在我的 wxi 文件中定义的 guid，`MajorMinorVersion`与 相同`VersionNumber`，但构建为 0（版本为 1.1.12 时为 1.1.0）。

我猜我有两种可能：

我制作另一个`UpgradeVersion`标签或更新当前标签以在下一个次要版本中具有最大值，并将其从搜索中排除：

```
<UpgradeVersion Minimum="$(var.MajorMinorVersion)" IncludeMinimum="yes" 
        Maximum="$(var.NextMinorVersion)" IncludeMaximum="no"/> 
```

使用自定义操作以`NextMinorVersion`某种方式设置。也许改用属性。

或者，每次次要版本更改时手动更改 UpgradeCode。还是 guid 的前几个字符代表版本，其余字符是唯一的？虽然我怀疑这是个好主意...

所以基本上，实现这一目标的最佳方法是什么，希望所有版本都只有一个设置项目？

**编辑**

我已经查看了`MajorUpgrade`标签，但我认为我不能将它配置为同时具有许多次要版本。对此表示赞赏。

我还研究了一个预处理器扩展，它可以使用函数来操纵版本号，所以我可以这样做：

```
<Upgrade Id="$(var.UpgradeCode)">
    <UpgradeVersion Property="OLDERMINORFOUND"
        Minimum="$(var.MajorMinorVersion)" IncludeMinimum="yes" 
        Maximum="$(myprefix.NextMinor($(var.VersionNumber)))" IncludeMaximum="no"/>
</Upgrade> 
```

有关详细信息，请参阅我的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:42:03.940

所以我根据 WiX 手册（[第 1](http://wix.sourceforge.net/manual-wix3/extension_development_simple_example.htm)部分和[第 2 部分](http://wix.sourceforge.net/manual-wix3/extension_development_preprocessor.htm)）编写了一个扩展。

我做了一个预处理器扩展，它采用版本号字符串（例如：1.2.3.4）并通过解析和拆分字符串来操作版本。

所以现在我可以在我的 .wxs 文件中写这个：

```
<Upgrade Id="$(var.UpgradeCode)">
    <UpgradeVersion Property="SAMEMINORFOUND" OnlyDetect="no"
        Minimum="$(var.MajorMinorVersion).0" IncludeMinimum="yes" 
        Maximum="$(version.NextMinor($(var.VersionNumber)))" IncludeMaximum="no" />
    <UpgradeVersion Property="OLDERVERSIONFOUND" OnlyDetect="yes"
        Maximum="$(var.MajorMinorVersion).0" IncludeMaximum="no"/>
    <UpgradeVersion Property="NEWERVERSIONFOUND" OnlyDetect="yes"
        Minimum="$(version.NextMinor($(var.VersionNumber)))" IncludeMinimum="yes"/>
</Upgrade>

<InstallExecuteSequence>
    <RemoveExistingProducts After="InstallValidate"/>
</InstallExecuteSequence> 
```

`version.NextMinor`对我的预处理器扩展的调用在哪里。

所以我的安装程序只会检测产品的安装，除非次要版本匹配，它将被卸载。

# c++ - 当分配给 const& 时，C++ 临时的生命周期扩展到词法

> ID：14709750
> 
> 赞同：2
> 
> 时间：2013-02-05T14:23:49.227
> 
> 标签：c++, scope, lifetime

我最近很惊讶地发现 C++ 中的一个临时变量被提升为具有完整的词法范围：

```
class Foo {
public:
    Foo() {
        std::cout << "A";
    }
    ~Foo() {
        std::cout << "B";
    }
};

int main(void)
{
    // Prints "ACB", showing the temporary being promoted to having lexical scope.
    const Foo& f = Foo();
    std::cout << "C";
    return 0;
} 
```

除了将临时分配给引用的可疑行为之外，这实际上工作得很好（在 VS2010 和 G++ v4.1 中测试）。输出是`ACB`，清楚地表明临时对象已被提升为具有词法范围，并且仅在函数末尾被破坏（在`B`之后打印`C`）。

* * *

其他临时变量的行为不是这样：

```
int main(void)
{
    // Prints "ACBD", showing that the temporary is destroyed before the next sequence point.
    const int f = ((Foo(), std::cout << "C"), 5);
    std::cout << "D";
    return 0;
} 
```

根据我的代码注释，它会打印`ACBD`，表明临时变量一直保留到整个表达式完成评估（为什么`C`在之前打印`B`），但仍然在下一个序列点之前被销毁（为什么`B`在之前打印`D`）。（这种行为是我认为 C++ 中所有临时变量的工作方式。我对之前的行为感到非常惊讶。）

**有人可以解释一下何时将临时提升为具有这样的词法范围是合法的吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:27:51.100

绑定到*常量*左值引用或右值引用（自 C++11 起）的临时对象的生命周期延长至该引用的生命周期。在第二种情况下，赋值左侧没有引用，而是一个值，因此临时的生命周期不会延长。

请参阅 C++ 11 标准的 12.2/4 和 12.2/5：

> 在两种情况下，临时对象在与完整表达式结束时不同的点被销毁。第一个上下文是调用默认构造函数来初始化数组元素时 [...]
> 
> 第二个上下文是**引用绑定到一个临时的**. 引用绑定到的临时对象或引用绑定到的子对象的完整对象的临时对象在引用的生命周期内持续存在，*除了*：[...]

*“例外”*之后的情况不适用于本案。

# perl - 编写最常用的 util rutines 的 perl 模块。你坐在宝石功能上吗？

> ID：14709761
> 
> 赞同：-2
> 
> 时间：2013-02-05T14:24:34.327
> 
> 标签：perl, cpan

**问题：**

我在许多不同的脚本中使用了很多 CPAN 模块和硬编码的 perl 函数（其中很多是重复的），并且我想通过提取所有通用代码来使我的代码库 DRY（不要重复自己） （甚至可能通过一些重构），将自己的代码和 cpan 代码都放入一个公共模块中，并在我的脚本中使用它，这样当发生更改时，我只需要在一个地方更改代码（它们确实如此）。

所以我想问一下你是否正在使用你在 perl 职业生涯中实现的一些功能，这些功能你会永久放入这样一个通用模块中，以便在编写新脚本时，你只需要编写特定于核心功能的代码脚本，并为其余代码使用公共模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:11:30.257

不要重构 CPAN 模块。将这些视为神秘盒子。如果使用多个 cpan 模块做或多或少相同的工作存在问题，请标准化一个。

我有一堆放在`Local`命名空间中的本地 Perl 模块。例如，`Local::WinAD`访问和操作我们的活动目录。`Local`CPAN 永远不会使用此命名空间。它作为项目存储在我们的版本控制系统中，可以在任何系统上检出和安装。您可以使用[`use lib`](http://perldoc.perl.org/lib.html)编译指示。

如果你做模块，把它们做好。用`@EXPORT_OK`而不用`@EXPORT`。（或者，更好的是，使它们成为面向对象的模块）。使用[POD](http://perldoc.perl.org/perlpod.html)文档并通过[Test::Simple](http://perldoc.perl.org/Test/Simple.html)和[Test::More](http://perldoc.perl.org/Test/More.html)模块进行广泛的单元测试。

假装您会将它们提交给 CPAN。

而且，还要非常仔细地搜索 CPAN，以确保您没有重复已经完成的工作。毕竟，您想练习 DRY，其中包括不重做 CPAN 已经为您完成的工作。

# php - javascript中的php json数组数据

> ID：14709767
> 
> 赞同：0
> 
> 时间：2013-02-05T14:24:44.003
> 
> 标签：php, javascript, jquery, arrays, json

我是 PHP 新手，我有以下场景；在 PHP 方面，我有一个文件 get_folders.php

```
<?php
$arr = array();
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator('/var       z/www/scripts')) as $filename)
{

 array_push($arr,$filename);
}
print (json_encode($arr));
?> 
```

在 html 方面我有

```
<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<head>
<script type="text/javascript" src="jquery.js"></script>          
<script type="text/javascript">   

function myFunction()
{
    $.getJSON("get_folders.php", function(data){

   alert("Data Loaded: " + data);

    $('#thetable');
   var html = '';
   for(var i = 0; i < 10 ; i++)
        html += '<tr><td>' + data;
   $('#thetable').append(html);
  });                                      

  }                  
 </script>                                                               
 </head>     
 <button onclick="myFunction()">Try it</button>
 <div>
 <table id="thetable">
 <th>Header 1</th>
 </tr>
 <tr>
 <td></td>
 </tr>
 </table>
 </div> 
```

.......我可以在php端打印数组，一切都很好。但我唯一得到警报的是

加载的数据：[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object对象],[对象对象],[对象对象]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:36:42.083

首先，Javascript`alert()`功能非常基础；它只能处理字符串输入。如果你给它一个对象或一个数组，它会窒息。你给了它对象，所以它以最好的方式向你展示了这个事实。

如果您真的想查看`data`变量包含的内容，我建议使用浏览器的调试工具而不是`alert()`. 所有现代浏览器都有一个`console.log()`功能，可以将调试数据输出到调试控制台而不是警告框。这将为您提供更多有用的信息。按 F12 在任何浏览器中获取调试面板。

但我的猜测是你不打算输出一系列`SPLFileInfo`对象。看起来您可能打算发送一组文件名。

您用于循环的迭代器会生成一个`SPLFileInfo`对象，而不仅仅是文件名。

要仅获取文件名，您将使用该`getFilename()`方法，如下所示：

```
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator('/var/www/scripts')) as $fileinfo)
{
    array_push($arr,$fileinfo->getFilename());
} 
```

现在这将生成一个文件名数组，我认为这是您想要的。

# android - android，NDK，将日志写入文件

> ID：14709773
> 
> 赞同：3
> 
> 时间：2013-02-05T14:24:56.827
> 
> 标签：android, logging, android-ndk

我的代码 (.c) 中有这几行：

```
#define LOGI(x...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG,x)
#define LOGE(x...) __android_log_print(ANDROID_LOG_ERROR, LOG_TAG,x) 
```

我使用它们在 LogCat 中输出，如何修改这些行以将消息写入文件，或者如何在我的代码中从 LogCat 获取某些消息？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T16:35:03.330

如果这是出于调试目的，我使用这个宏：

```
#define WRITE_LOG(s, ...) do { \
FILE *f = fopen("/data/local/tmp/log.txt", "a+"); \
  fprintf(f, s, __VA_ARGS__); \
  fflush(f); \
  fclose(f); \
} while (0) 
```

它具有完全独立于 Android SDK/NDK 的优势，它允许调试本机代码而无需修改所有构建系统并包含以链接 logcat 函数。

不过有个小警告：我养成了`touch /data/local/tmp/log.txt`在启动程序之前使用 adb-shell 创建文件的习惯，因为在大多数情况下，系统会阻止您创建新文件。顺便说一句，位置 /data/local/tmp/ 具有即使没有 root 权限也可以访问的优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T02:48:15.263

如果您的最终目标只是“记录”某些 logcat 输出，我强烈建议您在手机/设备上安装 Catlog 应用程序（如果您正在测试的话）并使用 Catlog 提供的“记录”功能。Catlog 允许您根据标签和搜索关键字查看和过滤 logcat 输出，结果输出可以保存到文件或作为附件通过电子邮件发送。如果您在 SDK 附带的模拟器上进行测试，只需保存 Eclipse 的 Logcat 窗口的输出即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:34:07.013

您可以使用 vfprintf() 函数将变量参数列表写入文件。

这可能比从 Android 日志系统重新捕获您自己的日志消息并将其写入文件更干净，除非您还需要包含 Java 代码生成的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T21:24:47.633

如果您在应用程序下，则可以使用 /data/data//

如此干燥的实验室：

```
FILE f = fopen("/data/data/<application name>/<file name>", 'w');
fprintf(f, "my message\n");
fclose(f); 
```

应该管用。

# android - 在 Android 上关闭插页式 DFP 广告时，应用程序崩溃

> ID：14709775
> 
> 赞同：0
> 
> 时间：2013-02-05T14:25:05.400
> 
> 标签：android, android-activity, admob, google-dfp, interstitial

我的 Android 应用中有一个简单的插页式 DFP（DoubleClick for Publishers）广告。当我触摸十字以返回应用程序时，应用程序会自行关闭。

代码没问题，因为它可以在另一个应用程序中使用。有人有想法吗？

这是清单中的代码：

```
<activity 
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize"/> 
```

在我想要酒吧的活动中：

```
...extends Activity implements OnTouchListener, OnClickListener, OnErrorListener, AdListener, OnCompletionListener... 
```

和酒吧代码：

```
private DfpInterstitialAd interstitial;
interstitial = new DfpInterstitialAd(this, "THE_PUB_CODE");
AdRequest adRequest = new AdRequest();
interstitial.loadAd(adRequest);
interstitial.setAdListener(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:37:23.487

我找到了解决方案

**onUserLeaveHint** ()方法中有**finish** ()

# maven - Jenkins 上的 Ant 脚本：资源不存在

> ID：14709777
> 
> 赞同：0
> 
> 时间：2013-02-05T14:25:17.333
> 
> 标签：maven, ant, jenkins

我有一个 maven 项目，其结构大致如下：

```
sourceProject
- src
- distribution
- pom.xml 
```

pom.xml 正在构建项目并将源代码复制到分发中，包括依赖项等。源项目提交到我们的存储库，包括空的分发文件夹。

在下游，我有一个 ant build.xml，它将分发文件夹复制到目标文件夹并构建一个 zip。相关命令为：

```
<copy todir="${buildDirectory}/features/project/root/sourceProject">
 <fileset dir="${basedir}/../sourceProject/distribution" />
</copy> 
```

在我的本地机器上，一切都按预期工作。但是，一旦我将其提交到我们的存储库，相应的 Jenkins 作业就会失败，并出现以下异常：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.6:run (default) on project myProject: An Ant BuildException has occured: The following error occurred while executing this line:
/home/jenkins/mySubProject/build.xml:48: /home/jenkins/sourceProject/distribution does not exist. 
```

我假设，我需要在我的 sourceProject pom.xml 中指定分发，但是到目前为止我的尝试失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:41:40.560

好吧，其实很简单。错误在相对路径中。Jenkins 上的工作并没有复制我们存储库的结构。来自不同作业的控制台输出的一些细节有助于理解 jenkins 服务器上的相对路径。

# c# - 如何确保从 NetworkStream 读取所有数据

> ID：14709781
> 
> 赞同：2
> 
> 时间：2013-02-05T14:25:24.883
> 
> 标签：c#, tcp, networkstream

当 DataAvailable 为 false 时，确定从 NetworkStream 中读取所有数据吗？

还是数据的发送者必须先发送数据的长度。我必须阅读，直到我阅读了发送者指定的字节数？

样品：

```
private Byte[] ReadStream(NetworkStream ns)
{
    var bl = new List<Byte>();
    var receivedBytes = new Byte[128];
    while (ns.DataAvailable)
    {
            var bytesRead = ns.Read(receivedBytes, 0, receivedBytes.Length);
            if (bytesRead == receivedBytes.Length)
                bl.AddRange(receivedBytes);
            else
                bl.AddRange(receivedBytes.Take(bytesRead));
    }
    return bl.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T14:29:40.357

`DataAvailable`只是告诉您在本地缓冲和可用的内容。就可能到达的情况而言，这*完全没有任何意义。*最常见的用途`DataAvailable`是在同步读取和异步读取之间做出决定。

如果您希望入站流在发送后*关闭*，那么您可以继续使用`Read`直到获得非肯定结果，这告诉您它已经结束。如果他们正在发送多个帧，或者只是没有关闭 - 那么是的：您需要某种方法来检测帧的结束（=逻辑消息）。这*可以*通过长度前缀和计数，但也可以通过标记值。例如，在基于文本的协议中，`\n`或者`\r`经常被解释为“消息结束”。

所以：这完全取决于您的协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:32:21.890

最简单的方法是有一个开始/结束字符，所以消息是：

```
string message = "Hello";
string messageToSend = (char)2 + message + (char)3; 
```

# javascript - 如何继续调用 getjson 直到它没有空响应？

> ID：14709783
> 
> 赞同：0
> 
> 时间：2013-02-05T14:25:34.710
> 
> 标签：javascript, ajax, getjson

大家好，我接到了一个 getjson 电话，想知道如何检查它的响应（siteContents），如果它是空的或者它没有所需的字符串（例如查找 seasonEpisode=）然后再次调用 getjson。我们可以调用 getjson 本身吗从里面？我的目标是从getjson得到正确的回应。希望你们帮助我。谢谢

```
$.getJSON('http://www.mysite.com/doit.php?value=55?', function(data){
    //$('#output').html(data.contents);

 var siteContents = data.contents; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:36:12.723

尝试这个：

```
var handler = function(data){
   //$('#output').html(data.contents);
   var siteContents = data.contents; 
   if (!siteContents) { 
       $.getJSON('http:/...', handler);
       return;
   }
   // handle siteContents
}

$.getJSON('http://...', handler); 
```

* * *

编辑：如果 siteContents 为空，上述内容会通过重复尝试向服务器发送垃圾邮件 - 创建无限循环和高负载。我建议两个改进：

1) 计算您制作了多少个重复的空 siteContents 循环。在某个失败阈值（例如 20 次尝试）之后，使用错误消息（如果适用）取消循环。

2) 进行迭代，`setTimeout(function() { $.getJSON(...) }, delay)` 其中延迟为几毫秒以在重试之间等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:42:32.163

听起来更好的问题是为什么您的服务器在第一次尝试时没有返回“正确”响应？或者正如 NuclearGhost 指出的那样，为什么它会为同一个请求返回不同的响应？

但是要完成你所要求的需要递归。因为响应是异步的，您不能只在循环中执行此操作。但是，如果您命名一个函数，您可以在成功处理程序中调用该函数，如下所示：

```
function getJSONRecursive(maxRetries, count) {
    if(!count) count = 1;
    if (count > maxRetries) {
        alert('Giving up after '+count+' retries.');
        return;
    }
    $.getJSON('http://www.mysite.com/doit.php?', function(data) {
        if(!data || !data.contents || data.contents.indexOf('seasonEpisode') == -1) {
            getJSONRecursive(++count, maxRetries);
        } else  {
            $('#output').html(data.contents);
        }
    })
} 
```

然后像这样调用它：

```
getJSONRecursive(5); 
```

我不建议没有计数，否则如果正确的响应永远不会返回，您将溢出堆栈。如果您要避免的情况是服务器超时或过载问题，那么我建议将递归调用置于超时状态，如下所示：

```
if(!data || !data.contents || data.contents.indexOf('seasonEpisode') == -1) {
    setTimeout(function() { getJSONRecursive(++count, maxRetries)}, 5000);
    // etc. 
```

这会在两次调用之间额外等待 5 秒，但额外的时间将有助于确保您的服务器不会受到猛烈攻击，并且您的 getjson 调用不会很快耗尽自己。

# html - 如何创建双链接？

> ID：14709785
> 
> 赞同：1
> 
> 时间：2013-02-05T14:25:36.597
> 
> 标签：html

如果用户单击该链接，那么我想在新选项卡中打开一个页面，然后跳转到`#section`父站点。没有JS怎么可能？

这不起作用： `html <a href="http://google.com" target="_blank"><a href="#section">link</a></a>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:27:34.517

AFAIK，您必须使用 JavaScript 通过同一个锚点请求多个 URL。

```
<a href="#section" id="doubleLink">Some Text</a> 
```

使用 JavaScript，您将能够监视 onclick 事件以打开新窗口，如下所示：

```
document.getElementById("doubleLink").onclick = function() {
    window.open("http://www.someothersite.com/");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:28:11.850

只需添加`#section`到地址。

```
<a href="http://target_site#section"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:37:22.787

我认为您需要使用javascript，但不多：

`document.getElementById('myLinkId').addEventListener('click', function() {window.location = '#section'}, false);`

编辑：据我所知，没有javascript就无法完成。没有打开新标签的双链接会发生什么？

我意识到您可能还需要它在较旧的 IE 中工作。

```
var doubleLink = document.getElementById('myLinkId');

if (window.addEventListener) {
doubleLink.addEventListener('click', function() {window.location = '#section'}, false);
} else {
doubleLink.attachEvent('onclick', function() {window.location = '#section'});
} 
```

# javascript - 使用jQuery获取div中每个图像的来源

> ID：14709797
> 
> 赞同：1
> 
> 时间：2013-02-05T14:26:04.577
> 
> 标签：javascript, jquery, html

我正在尝试做一个看似简单的循环，但我一直遇到问题。

我正在尝试遍历特定的 div（以 ID 为目标），并返回其中两个图像的源。这是我的 HTML：

```
<div id="container">
   <div class="row selected" id="one"><img src="onei.png"><img src="twoi.png"></div>
   <div class="row" id="two"><img src="onei1.png"><img src="twoi2.png"></div>
 </div> 
```

这是我的循环：

```
function loop() {
    alert()
    $('#container row.selected img').each(function() {
        alert($(this).attr('src'))
    });
} 
```

我似乎无法找出为什么这不起作用。这不应该循环遍历我的目标 div 中的每个图像并提醒源吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T14:28:01.587

也许像

```
function loop() {
    alert()
    $('#container .row.selected img').each(function() {
        alert($(this).attr('src'))
    });
} 
```

你忘了`.`开`row`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:28:00.093

也许你错过了重点：

```
'#container .row.selected img' 
```

# node.js - 在 Express.js 中 res.send() 后退出

> ID：14709802
> 
> 赞同：57
> 
> 时间：2013-02-05T14:26:22.837
> 
> 标签：node.js, express

我有一个相当简单的 Express.js 应用程序，它带有一个登录组件，如果登录失败，我想提前退出。我看到有迹象表明该应用程序没有这样做，并且我还没有找到明确的答案来表明调用是否会`res.send()`停止任何进一步的处理。这是我现在的代码：

```
client.login( username, password, function( auth, client ) {
  if( !auth ) {
    res.send( 401 );
  }

  // DO OTHER STUFF IF AUTH IS SUCCESSFUL
} 
```

如果我正确阅读了源代码，它*应该*结束请求（中止进一步处理），但我是节点新手，所以我还没有准备好相信我认为我正在阅读的内容。归根结底，我想我主要是从更可靠的来源中寻找明确的答案，而不是我自己对不熟悉的源代码的解释。如果`send()`不中止处理，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-10-11T07:15:57.917

当然 express 不能神奇地让你的 javascript 函数停止从其他地方执行。

我不喜欢 next([error]) 解决方案，因为我认为错误应该只用于您通常不期望的情况（例如无法访问的数据库或其他情况）。在这种情况下，一个简单的错误密码就会导致错误。对普通控制流不使用异常/错误是一种常见的约定。

因此，我建议在 res.send 调用之后放置一个 return 语句，以使您的函数停止进一步执行。

```
client.login( username, password, function( auth, client ) {
  if( !auth ) {
    res.send( 401 );
    return;
  }

  // DO OTHER STUFF REALLY ONLY IF AUTH IS SUCCESSFUL
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-05T15:36:17.403

如果你使用 express 作为你的框架，你应该调用 next() 来代替。

express 中的每个处理程序都接收 3 个参数（基本 http 为 unlinke 2），它们是`req`,`res`和`next`

`next`是一个函数，当不带参数调用时将触发中间件链中的下一个处理程序。

如果`next`使用参数调用，则无论该参数的类型如何，该参数都将被解释为错误。

它的签名是`next([error])`. 当 next 被错误调用时，它不会调用中间件链中的下一个处理程序，而是调用错误处理程序。您应该在该错误处理程序中处理 401 响应代码。有关Express 中的错误处理的更多信息，请参阅[此内容](http://expressjs.com/guide/error-handling.html)

编辑：正如**@Baptiste Costa**评论的那样，简单地调用`next()`不会**停止**当前的执行，但它会调用下一个中间件。最好使用它`return next()`来防止 Node 进一步抛出错误（例如`can't set headers after they are sent`- 错误）。这包括上述常见的错误抛出建议：

```
return next(new Error([error])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-09T18:13:08.313

对于您的具体情况，您只需添加“else”语句：

```
client.login( username, password, function( auth, client ) {
    if( !auth ) {
        res.send( 401 );
    }else {
       // DO OTHER STUFF IF AUTH IS SUCCESSFUL
    }
} 
```

或者，一般来说，您可以使用“return”：

```
return res.send( 401 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-21T17:54:26.937

只需执行类似的操作即可停止进一步执行。

```
function (request, response, next) {
    var path = request.body.path;

    if(path === undefined){
        response.status(HttpStatus.BAD_REQUEST);
        response.send('path is required!');
    }

    next(response)
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-08T23:11:20.737

在这些情况下，我倾向于使用 try...catch bloc。

```
client.login( username, password, function( auth, client ) { 

 try{
   if(error1){
    throw {status : 401 , message : 'error1'}
   }
   if(error2){
    throw {status : 500 , message : 'error2'}
   }
 }catch(error){
   res.status(error.status).json(error.message);
 }

} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-07-20T17:07:51.423

您只需要返回即可结束流程：

```
return  res.send( 401 ); 
```

这将发回 401 响应，并且不会在流程中继续前进。

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2013-12-03T14:07:20.087

为什么没有人建议使用“else”块？

```
if(!auth){
    // Auth fail code
    res.send 'Fail'
} else {
    // Auth pass code
    res.send 'Pass'
} 
```

'next' 在为“app.use(function(req, res, next));”创建自己的中间件时使用。如果你设置了类似“app.get(route, function(req, res));”的路由 那么函数中的代码就是您可以在其中使用您指定的代码而无需使用“下一步”的地方。

# java - Java DTO 设计 - 公共成员

> ID：14709805
> 
> 赞同：0
> 
> 时间：2013-02-05T14:26:29.327
> 
> 标签：java, json, serialization, dto, getter-setter

我正在设计一个将序列化为 JSON 的 DTO。序列化框架一直抱怨我的 DTO 的所有成员都应该是公共的，并且 DTO 应该有公共的无参数 CTOR。

我想知道您认为这两种方法中哪一种更好，以及为什么：

1) 没有 getter/setter

```
public MyClass {
    public int someField;
    public String someOtherField;
} 
```

2）所有的getter/setter

```
public MyClass {
    private int someField;
    private String someOtherField;

    public int getSomeField() {
        return someField;
    }

    public String getSomeOtherField() {
        return someOtherField;
    }

    public void setSomeField(int someField) {
        this.someField = someField;
    }

    public void setSomeOtherField(String someOtherField) {
        this.someOtherField = someOtherField;
    }
} 
```

# javascript - 计算将使用 Javascript window.print 打印的页数

> ID：14709806
> 
> 赞同：6
> 
> 时间：2013-02-05T14:26:36.837
> 
> 标签：javascript

我的客户要求是显示使用 js 的 window.print 方法进行自定义页面打印。主要问题是

动态填充内容时，如何检查正在创建多少个字母大小的页面？

如果内容在页面末尾被截断，它可能会自动将内容转移到下一页。现在是否可以根据填充的条目数动态填充数据时检查内容是否会在页面末尾截断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-20T05:01:17.813

Unfortunately you can't calculate the number of pages that are going to be printed, but you can force content to a new page using page breaks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T05:13:51.627

浏览器不提供此类数据，即使它们内部有可用的信息。

以防万一：在[Sciter](http://www.terrainformatica.com/sciter/main.whtm)中，我发明了特殊类型的框架 -`<frame type=pager src=...>`以显示打印预览。这种类型的框架会生成分页事件，包括页数。

[![帧类型=寻呼机](../Images/237a32bc66eda4dc536829c5f155538d.png)](https://i.stack.imgur.com/bEYWh.png)

# c# - 在保存之前修改 Outlook 中的复制/粘贴项目 (C#)

> ID：14709810
> 
> 赞同：1
> 
> 时间：2013-02-05T14:26:56.440
> 
> 标签：c#, .net, plugins, outlook, copy

我最近为一个将用户的 Outlook 数据库与第三方应用程序同步的客户端编写了一个 Outlook 插件（用于 Outlook 2010）。这工作正常。但是，客户想要做的一件事是利用标准的复制/粘贴功能在 Outlook 中复制记录。问题是我为任何已发送到第三方系统的 Outlook 记录定义了一个 UserProperty（它存储了来自第三方系统的内部 ID）。当客户端执行复制/粘贴时，此 UserProperty 也会被复制（这很糟糕，因为它会创建多个具有相同第三方 ID 的记录）。我想知道是否有某种方法可以通过代码检测正在发生复制/粘贴并在保存之前对记录进行修改（删除此 UserProperty）。因为他们可能会在任务、约会、

根据以下建议，我尝试利用 BeforeItemPaste，如下所示：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e) {
    Globals.ThisAddIn.Application.ActiveExplorer().BeforeItemPaste += new Outlook.ExplorerEvents_10_BeforeItemPasteEventHandler(Item_BeforeItemPaste);
}

private void Item_BeforeItemPaste(ref System.Object ClipboardContent,
    Microsoft.Office.Interop.Outlook.MAPIFolder Target, ref bool Cancel) {
    System.Windows.Forms.MessageBox.Show("Trying to paste");
} 
```

该消息在我第一次进行复制/粘贴时出现，然后再也不会出现。我尝试利用 Application.Explorers，理论上它可以让我访问 Outlook 中的所有资源管理器，但这并没有让我访问我正在寻找的单个资源管理器（约会、任务、联系人）（其中只有一个元素） 'array' 当我调试它时）。此外，我尝试通过调用 MAPIFolder.GetExplorer 来访问那些特定的资源管理器项目，但这总是返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:47:12.390

尝试使用 Explorer.BeforeItemPaste 事件。

# javascript - 在 beforeunload 期间提交，也许谁知道另一种方法解决方案

> ID：14709811
> 
> 赞同：1
> 
> 时间：2013-02-05T14:27:01.777
> 
> 标签：javascript, jquery, submit, onbeforeunload, confirm

在 stackoverflow.com 上查看了许多类似的问题（也在其他资源上），但没有找到答案。所以我简化和概括了问题。这似乎是显而易见的解决方案：

```
$(document).ready(function() {
    var a = 3;
    var b = 5;

    // no message when pressed submit button
    $('form').submit(function() {
        $(window).off('beforeunload');
    });

    // confirm of the need to save
    $(window).on('beforeunload', function(e) {
        if (a != b)
            if (confirm('You changed data. Save?')) {
                $('form').submit();
                // alert('Your data is saved. (With alert submit() work only in FireFox!?)');
            }
    });
}); 
```

但不提交作品。如果你使用 alert()，它只在 FireFox 中有效。我想更正（可能没有延迟）跨浏览器解决方案。**也许谁从根本上**知道另一种方法解决方案。

PS 关于第一部分中描述的一些原创性 beforeunload：[https](https://stackoverflow.com/a/6065085/1356425) ://stackoverflow.com/a/6065085/1356425 ，但这不是解决方案明显的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:55:53.387

我为相应的浏览器使用了同步 AJAX (JAX) 请求并为事件 onUnload 或 onBeforeUnload 运行一次处理程序。该解决方案具有单一且几乎跨浏览器的行为。

示例（[在 jsfiddle 上](http://jsfiddle.net/Apostle/styPU/)）：

```
$(document).ready(function() {

    var form = $('form');
    var textareas = $('textarea');

    function array_compare(a_0, a_1) {
        if(a_0.length != a_1.length)
            return false;

        for(i = 0; i < a_0.length; i++)
            if(a_0[i] != a_1[i])
                return false;

        return true;
    }

    var flag = false; // flag to control the execution of the unloadHandler() once
    var a_open = []; // array with data before unload

    $('textarea').each(function(index) {
        a_open.push($(this).val());
    });

    function unloadHandler() {
        if (flag)
            return;

        var a_close = []; // array with data during unload
        $('textarea').each(function(index) {
            a_close.push($(this).val());
        });

        if (!array_compare(a_open, a_close)) {
            if (confirm('You changed the data, but not saved them. Save?')) {
                $.ajax({
                    type: 'POST',
                    url: '/echo/json/',
                    async: false,
                    data: form.serialize()/* {
                        json: JSON.stringify({
                            text: 'My test text.'
                        }),
                        delay: 3
                    } */,
                    success: function(data) {
                        if (data) {
                            console.log(data);
                            alert('All data is saved!');
                        }
                    }
                });
            }
        }

        flag = true;
    }

    // For FireFox, Chrome
    $(window).on('beforeunload', function () {
        unloadHandler();
    });

    // For Opera, Konqueror
    $(window).unload(function() {
        unloadHandler();
    });

    // Without message when pressed submit button
    $('form').submit(function() {
        $(window).off('beforeunload');
        $(window).off('unload');
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:53:13.520

Chrome 和 Firefox 在 onbeforeunload-event 之后阻止提交。你必须使用

```
$(window).on('beforeunload', function(e) {
        if (a != b)
            return 'You\'ve changed the data. Leave page anyway?';
        }                
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-20T15:18:23.093

提交卸载数据的最佳方式是将其存储在本地存储中，并在下次请求同一来源下的任何其他页面时发送。

```
 function sendBeacon(data) {

    data?dataArr.push(data):'';

    for (var i = 0, len = dataArr.length; i < len; i++) {
        $.getScript(dataArr[i], (function (index) {
            dataArr.splice(index, 1) //Updata dataArray on data submission
        }(i)))
    }
}

$(window).on('beforeunload', function () {
    localStorage.setItem('dataArr', JSON.stringify(dataArr));
})

var dataArr = JSON.parse(localStorage.getItem('dataArr'));

if (!dataArr) {
    dataArr = []; // Create Empty Array
} else {
    sendBeacon(dataArr); //Submit stored data
} 
```

# java - 将数组转换为多维数组 - Java

> ID：14709813
> 
> 赞同：0
> 
> 时间：2013-02-05T14:27:03.040
> 
> 标签：java, arrays, loops, for-loop, multidimensional-array

有没有办法将三个单维数组转换为多维数组。例如，我有三个数组（文本、转发、地理）如何合并它们，使其显示为：-

我要合并的数组类似于 text = 'hello, 'hello'。转推 = '2,5' 和地理 = '19912, 929293'。

并且应该导致：-

```
combined = 
[hello, 2, 19912
hello, 5, 929293] 
```

等等......所有的数组都是相同的大小。我知道我应该以某种方式循环 while 循环，但不太确定如何实现它。

感谢任何回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:30:56.313

```
int count = ...;

String [] text = new String [count];
int [] retweets = new int [count];
int [] geo = new int [count];

// Fill arrays with data here

Object [] combined = new Object [count * 3];

for (int i = 0, j = 0; i < count; i++)
{
    combined [j++] = text [i];
    combined [j++] = retweets [i];
    combined [j++] = geo [i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:46:26.020

```
String[] text =...;
int[] retweets =...;
int[] geo =...;

int len = text.length;

List<List<Object>> items = new ArrayList<>();
for (int i = 0; i < len; i++) {
   List<Object> item = new ArrayList<>();
   item.add(text[i]);
   item.add(retweets[i]);
   item.add(geo[i]);
   items.add(item);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:31:36.947

```
public static void main(String[] args) {

    String[] array1 = { "hello1", "A2", "X19912" };
    String[] array2 = { "hello2", "B2", "Y19912" };
    String[] array3 = { "hello3", "C2", "Z19912" };
    String[] copyArrays = new String[array1.length + array2.length
            + array3.length];
    System.arraycopy(array1, 0, copyArrays, 0, array1.length);
    System.arraycopy(array2, 0, copyArrays, array1.length, array2.length);
    System.arraycopy(array3, 0, copyArrays, array1.length + array2.length,
            array3.length);

    String[][] array = new String[3][3];
    int index = 0;
    for (int i = 0; i < array.length; i++)
        for (int j = 0; j < array[i].length; j++) {
            array[i][j] = copyArrays[index++];
        }

    for (int i = 0; i < array.length; i++) {
        for (int j = 0; j < array[i].length; j++) {

            System.out.print(array[i][j] + "  ");
        }
        System.out.println();
    }
} 
```

输出：

```
hello1  A2  X19912  
hello2  B2  Y19912  
hello3  C2  Z19912 
```

此代码将首先将给定的数组复制到一个新数组中。然后它将使用 for loop 将 copyArrays 的所有元素插入到二维数组中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-18T03:20:03.523

“toTableFormTheArrays”的一个聪明方法是：

```
public static String[][] to2DArray(String[]... yourArrays){
    return yourArrays;
}

then the code is:
String[] text =  {"hello", "hello"};
String[] retweets = {2, 5};
String[] geo = {19912, 929293};

String[][] yourTableForm2DArray = to2DArray(text, retweets, geo); 
```

注意：可以更改类型，to2darray 对其他 D 的多次调用，也许。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-02T02:40:36.460

```
String[] text =  {"hello", "hello"};
int[] retweets = {2, 5};
int[] geo = {19912, 929293};

//create table of strings for each array
Object[][] combined = new Object[text.length][3];

//load information into table, converting all information into Strings
for(int row = 0; row<text.length; row++){
    combined[row][0] = text[row];
    combined[row][1] = retweets[row];
    combined[row][2] = geo[row];
} 
```

这将创建一个应该如下所示的多维数组：

`[[hello, 2, 19912], [hello, 5, 929293 ]]`

# jquery - 两个不同的 jquery.js 文件在同一个 html 文件中

> ID：14709823
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:27:33.223
> 
> 标签：jquery, html, web

我正在尝试在我的网站中添加一个使用 jQuery v1.8.3 的 Wowslider 的照片滑块，该滑块有一个基于 jQuery 的导航菜单，但我不知道确切的版本（这是我获取源文件的[教程）](http://net.tutsplus.com/tutorials/javascript-ajax/create-a-cool-animated-navigation-with-css-and-jquery/)

当注释掉两个 jquery.js 文件之一时，另一个工作正常。但是，一起出现了问题，我无法让 Wowoslider 中的滑块和动画菜单一起正常工作。

我的 HTML 中的代码就是这些。问题来自 js/jquery.js（未知版本）和 engine1/jquery.js（1.8.3 版本）

```
<script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-bp.js"></script>
    <script type="text/javascript" src="js/navigation.js"></script>
    <script type="text/javascript" src="date_time.js"></script>
    <!-- Start WOWSlider.com HEAD section -->
    <link rel="stylesheet" type="text/css" href="engine1/style.css" />
    <script type="text/javascript" src="engine1/jquery.js"></script>
    <!-- End WOWSlider.com HEAD section -->
</head> 
```

**我试试这个[我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)**

解决方案似乎很简单，但我无法理解

然后，而不是`$('#selector').function();`，你会做`jQuery_1_3_2('#selector').function();`or `jQuery_1_1_3('#selector').function();`。

我在我的 html 中更改包含脚本代码，如下所示：

```
<!-- load jQuery 1.2.3 -->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">
    var jQuery_1_2_3 = $.noConflict(true);
    </script>
            <!-- ...other code... -->
    <!-- load jQuery 1.8.3 -->
    <script type="text/javascript" src="engine1/jquery.js"></script>
    <script type="text/javascript">
    var jQuery_1_8_2 = $.noConflict(true);
    </script> 
```

然后我尝试更改使用 jQuery 1.2.3 的 2 个 .js 文件的代码，所以我`$`用这个替换所有字符`jQuery_1_2_3`

排序示例默认为

> (function($) { $.extend($.fx.step,{ backgroundPosition: function(fx) { if (fx.state === 0 && typeof fx.end == 'string') { var start = $. curCSS(fx.elem,'backgroundPosition');

我改为：

`(function(jQuery_1_2_3) { jQuery_1_2_3.extend(jQuery_1_2_3.fx.step,{ backgroundPosition: function(fx) { if (fx.state === 0 && typeof fx.end == 'string') { var start = jQuery_1_2_3.curCSS(fx.elem,'backgroundPosition');`

我想我理解错了..钢铁不工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:43:44.420

在这里，我想出了一个由我自己测试的解决方案。我检查了您的菜单教程并下载了源代码，然后我在同一页面中使用了 Wow Slider，但我的方式是：

// 在头顶添加以下代码

```
<!-- Navigation Menu-->
<link rel="stylesheet" href="css/main.css" type="text/css" />   
<script type="text/javascript" src="js/jquery.js" ></script>
<script type="text/javascript" src="js/jquery-bp.js" ></script>
<script type="text/javascript" src="js/navigation.js" ></script>
<!-- End Navigation --> 
```

// 并在页面底部添加 Wow Slider 脚本

```
<!-- Start WOWSlider.com HEAD section -->
<link rel="stylesheet" type="text/css" href="engine1/style.css" />
<script type="text/javascript" src="engine1/jquery.js"></script>
<!-- End WOWSlider.com HEAD section -->

<script type="text/javascript" src="engine1/wowslider.js"></script>
<script type="text/javascript" src="engine1/script.js"></script>
<!-- End WOWSlider.com BODY section --> 
```

现在在“navigation.js”中做一些改变

1）写里面的所有函数

```
(function($) {
  $(function() {
  // all navigation function put here

  });
})(jQuery);
// other code using $ as an alias to the other library 
```

代替

```
$(document).ready(function(){

}); 
```

我在此链接上为您上传了我的代码。请[下载](https://www.box.com/s/fhhunnlwgex35exwhzwr)并让我知道它是否适合您.. 对我来说，它适用于 Chrome 和 Firefox。

# php - PHP 5.4 代码更新 - 从 foreach 和 objects 数组中的空值警告创建默认对象

> ID：14709826
> 
> 赞同：6
> 
> 时间：2013-02-05T14:27:36.787
> 
> 标签：php, warnings, strict

我有以下代码：

```
foreach($foo as $n=>$ia) {
    foreach($ia as $i=>$v) {
    $bar[$i]->$n = $v; //here I have 'Creating default object...' warning
    }
} 
```

如果我添加：

```
$bar[$i] = new stdClass;
$bar[$i]->$n = $v; 
```

要解决这个问题。然后数组'bar'中的对象中的值不设置。例如，我有数组：

```
 $foo = array(
 "somefield" => array("value1", "value2", "value3"),
 "anotherfield" => array("value1", "value2", "value3")
 ); 
```

在输出我应该得到：

```
$bar[0]->somefield = value1
$bar[1]->anotherfield = value2 
```

但在实践中我得到：

```
$bar[0]->somefield = null //(not set)
$bar[1]->anotherfield = null //too 
```

我应该如何更新代码以使其正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T14:35:53.800

**问题：**

您的代码的问题是，如果您使用第一次尝试，

```
$bar[$i]->$n = $v; 
```

`->`如果您在不存在的数组索引上使用运算符，将创建一个默认的空对象。（无效的）。您会收到警告，因为这是一种不好的编码习惯。

第二次尝试

```
$bar[$i] = new stdClass;
$bar[$i]->$n = $v; 
```

当您覆盖`$bar[$i]`每个循环时，它将简单地失败。

顺便说一句，即使使用 PHP5.3，上面的代码也不起作用

* * *

**解决方案：**

我更喜欢以下代码示例，因为：

*   它可以在没有警告的情况下工作:)
*   它不使用您问题中的内联初始化功能。`$bar`我认为明确声明为空`array()`并使用以下方法创建对象是一种很好的编码习惯： `new StdClass()`。
*   它使用描述性变量名称有助于理解代码在做什么。

*代码：*

```
<?php

$foo = array(
  "somefield" => array("value1", "value2", "value3"),
  "anotherfield" => array("value1", "value2", "value3")
);

// create the $bar explicitely
$bar = array();

// use '{ }' to enclose foreach loops. Use descriptive var names
foreach($foo as $key => $values) {
    foreach($values as $index => $value) {
        // if the object has not already created in previous loop
        // then create it. Note, that you overwrote the object with a 
        // new one each loop. Therefore it only contained 'anotherfield'
        if(!isset($bar[$index])) {
            $bar[$index] = new StdClass();
        }
        $bar[$index]->$key = $value;
    }
}

var_dump($bar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:32:34.383

尝试

```
$bar = array();
foreach($foo as $n=>$ia)
   foreach($ia as $i=>$v)
      $bar[] = (object) array($n => $v); 
```

这应该给你：

```
$bar[0]->somefield = value1
$bar[1]->somefield = value2
$bar[2]->somefield = value3
$bar[3]->anotherfield = value1
$bar[4]->anotherfield = value2
$bar[5]->anotherfield = value3 
```

# cygwin - Cygwin - 导出与 SET

> ID：14709827
> 
> 赞同：0
> 
> 时间：2013-02-05T14:27:42.430
> 
> 标签：cygwin, cygpath

我写了一个小 bash 脚本来在 Cygwin 中切换 JAVA 版本：http: [//pjsdev.blogspot.de/2013/02/cygwin-switching-java-version.html](http://pjsdev.blogspot.de/2013/02/cygwin-switching-java-version.html)

如您所见，我正在使用“导出”来设置 ENV 和 PATH。这在 Cygwin shell 下运行的命令行工具中运行良好。但是如何强制设置 Win7 高级系统设置中的变量呢？在批处理脚本中 SET 将是要使用的命令，但是 Cygwin 中是否有任何可能调用 SET 或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:41:36.630

查看[如何从 Cygwin 程序调用 Windows API](https://stackoverflow.com/questions/9981499/how-do-i-call-the-win32-api-from-a-cygwin-program)，因为您必须调用 Windows 才能更改 Windows 程序的环境。

# ruby-on-rails - 出现在多个页面上的 RoR 侧内容

> ID：14709832
> 
> 赞同：0
> 
> 时间：2013-02-05T14:27:52.710
> 
> 标签：ruby-on-rails, partial-views

如果您的页面上有一个包含数据库信息的边表，并且您希望它出现在您的 RoR 应用程序的多个页面上。这应该怎么做？假设您在一个名为 LeftTableView 或类似的视图中输出这些数据。

现在，在“/products/”视图中，您想要显示此数据，并且您还希望在“/products/12”和“/friends/”等上显示它​​。

您如何渲染这个“部分”视图并仅使用原始控制器绑定数据库数据？或者......从每个控制器再次收集数据是否“更好”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:45:27.837

假设，如果您想在数据库导航中显示“类别”，请保留在 application_controller.rb

```
def navcategory
    @navcategories = Category.all
end 
```

在 products_controller.rb 和 friends_controller.rb 上，您只需使用 before_filter 调用 navcategory

```
before_filter :navcategory 
```

和布局

```
<% @navcategories.each do |category| %> 
....
....
....
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:40:58.610

你应该设置你的布局。尝试以下（无CSS）

```
# application layout
<body>
  <div id='sidebar'>
    ... common content here
  </div>
  <div id='main'>
    <%= yield %>
  </div>
</body> 
```

# c# - WCF 覆盖基于角色的安全检查

> ID：14709840
> 
> 赞同：0
> 
> 时间：2013-02-05T14:28:07.390
> 
> 标签：c#, asp.net, wcf, security

我有一个在 VS2010 中运行的 ASP.NET 应用程序。要从客户端访问 wcf 服务，需要具有适当的角色。我需要在这些角色不可用的机器上测试应用程序。

是否可以在不修改源代码的情况下禁用 web.config 中所有服务的 PrincipalPermission 检查或以任何其他方式？或者有没有办法在某处提供“AppRole”角色作为配置参数？

```
[PrincipalPermission(SecurityAction.Demand, Role = "AppRole")]
public string GetFoo()
{
    // return ..
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:47:05.120

我不认为你可以禁用检查，但你需要做的就是设置`Thread.CurrentPrincipal`一个`IPrincipal`具有所需角色的角色。

一种方法是`RoleProvider`在测试机器上的应用程序配置文件中使用适当的角色配置一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:48:03.793

您可以在运行时安装具有所需角色的通用主体。角色可以来自配置文件。

使用 IAuthorizationPolicy 您可以安装通用主体。看到这个[SO：How to declaratively implement custom IAuthorizationPolicy in WCF?](https://stackoverflow.com/questions/1322682/how-to-declaratively-implement-custom-iauthorizationpolicy-in-wcf)

更多信息：

[msdn：IAuthorizationPolicy 接口](http://msdn.microsoft.com/en-us/library/system.identitymodel.policy.iauthorizationpolicy.aspx)

[自定义主体和 WCF](http://leastprivilege.com/2007/08/08/custom-principals-and-wcf/)

# java - 使用 maven 和 jenkins，如何测试程序员做了一些测试用例？

> ID：14709847
> 
> 赞同：5
> 
> 时间：2013-02-05T14:28:35.577
> 
> 标签：java, maven, jenkins

我正在处理许多项目，我们正在使用 Java、Springs、Maven 和 Jenkins 进行 CI，但我遇到了一些程序员没有向项目添加真正的 junit 测试用例的问题。我希望 maven 和 jenkins 在部署到服务器之前运行测试。一些程序员做了一个空白测试，所以它开始和停止并通过测试。

有人可以告诉我如何自动执行此检查，以便 maven 和 jenkins 可以查看测试是否输出了一些输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T23:51:38.383

除了查看代码之外，我还没有找到任何好的解决方案来解决这个问题。

代码覆盖率无法检测[到我见过的最糟糕的单元测试](http://javaadventure.blogspot.ie/2011/05/worst-unit-tests-i-ever-saw.html)

查看测试的数量，那里也失败了。查看测试名称，您敢打赌它失败了。

如果您有像“Kevin”这样编写类似测试的开发人员，那么您只能通过代码审查来捕获这些测试。

“凯文”如何击败检查的总结：

*   编写一个名为`smokes`. 在这个测试中，您使用不同的参数组合调用被测类的每个方法，每个调用都包含在`try { ... } catch (Throwable t) {/* ignore */}`. 这为您提供了很好的覆盖范围，并且测试永远不会失败

*   编写一堆空的测试，名称听起来像是您想出了花哨的测试场景，`widgetsTurnRedWhenFlangeIsOff`例如`widgetsCounterrotateIfFangeGreaterThan50`. 这些都是空测试，因此永远不会失败，并且检查 CI 系统的经理会看到许多详细的测试用例。

代码审查是抓住“凯文”的唯一方法。

希望您的开发人员没有那么糟糕

## 更新

今天早上我洗了个澡。有一种自动分析可以捕获“Kevin”，不幸的是它仍然可以被欺骗，所以虽然它不是解决人们编写糟糕测试的解决方案，但它确实让编写糟糕的测试变得更加困难。

[突变测试](http://jester.sourceforge.net/)

这是一个旧项目，不适用于最近的代码，我不建议您使用它。但我建议它暗示一种可以阻止“凯文”的自动分析

如果我要实现这个，我会写一个“JestingClassLoader”，它使用例如ASM，一次用一点“玩笑”重写字节码。然后在使用此类加载器加载时针对您的类运行测试套件。如果测试没有失败，你就在“凯文”的土地上。问题是您需要针对代码中的每个分支点运行所有测试。不过，您可以使用自动覆盖分析和测试时间分析来加快速度。换句话说，您知道每个测试执行的代码路径，因此当您针对某个特定路径“开玩笑”时，您只运行到达该路径的测试，然后从最快的测试开始。如果这些测试都没有失败，那么您就发现了测试覆盖率的弱点。

所以如果有人要“现代化” Jester，你就有办法找到“Kevin”。

但这不会阻止人们编写糟糕的测试。因为您可以通过编写测试来验证代码的行为与当前行为、错误和所有行为相同，从而通过该检查。哎呀，甚至有公司销售会“为您编写测试”的软件。我不会通过从这里链接到他们来为他们提供 Google 页面排名，但我的观点是，如果他们掌握了此类软件，您将进行大量测试，这些测试会直接包裹您的代码库并且不会发现任何错误（因为一旦您更改任何内容，“生成的”测试就会失败，因此现在进行更改需要争论更改本身以及更改破坏的所有单元测试的更改，从而增加进行更改的业务成本，即使该更改正在修复一个*真正的*错误）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T00:45:03.280

我会推荐使用[Sonar](http://www.sonarsource.org/)，它有一个非常有用的[构建断路器](http://docs.codehaus.org/display/SONAR/Build+Breaker+Plugin)插件。

在 Sonar[质量配置文件](http://docs.codehaus.org/display/SONAR/Quality+Profiles)中，您可以针对任何[指标](http://docs.codehaus.org/display/SONAR/Metrics)组合设置警报，因此，例如，您可以要求您的 java 项目应该具有

*   “单元测试”> 1
*   “覆盖率”> 20

强制开发人员至少进行 1 个单元测试，覆盖至少 20% 的代码库。（相当低质量的酒吧，但我想这就是你的意思！）

设置额外的服务器可能看起来像是额外的工作，但是当您有多个 Maven 项目时，该解决方案可以扩展。Sonar的[Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/Sonar+plugin)就是您需要配置的所有内容。Jacoco 是默认的代码覆盖工具，Sonar 还会自动运行其他工具，如 Checkstyle、PMD 和 Findbugs。

最后，斯蒂芬关于代码审查是完全正确的。Sonar 有一些基本但有用的代码审查功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:02:09.143

您需要添加一个代码覆盖插件，例如 JaCoCo、EMMA、Cobertura 等。然后，您需要在插件的配置中定义您希望拥有的代码覆盖率（基本上是“测试覆盖的代码”），以使构建通过。如果它低于该数字，您可能会导致构建失败。而且，如果构建失败，Jenkins（或任何你的 CI）将不会部署。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T09:55:12.733

正如其他人指出的那样，如果您的程序员已经在欺骗编码实践，那么使用更好的覆盖工具将无法解决您的问题。他们也可能被骗。

您需要与您的团队坐下来，就专业精神和软件工程应该是什么进行诚实的交谈。

根据我的经验，代码审查很棒，但需要在提交代码之前进行。但要在人们“作弊”的项目中发挥作用，你至少需要有一个你可以信任的审阅者。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-13T13:50:40.370

[http://pitest.org/](http://pitest.org/)是所谓的“突变测试”的一个很好的解决方案：

> 错误（或突变）会自动植入您的代码中，然后运行您的测试。如果您的测试失败，则突变被杀死，如果您的测试通过，则突变存活。
> 
> 您的测试质量可以通过被杀死的突变百分比来衡量。

好消息是您可以轻松地将它与 maven、jenkins 和 ... [SonarQube](http://www.sonarqube.org/)结合使用！

# c# - c#中另一个类的引用方法

> ID：14709848
> 
> 赞同：1
> 
> 时间：2013-02-05T14:28:40.573
> 
> 标签：c#, unit-testing, request, public

所以我有一个类，我创建一个包含所有必要信息（地址、电话、电子邮件等）的客户每一次。

这是我需要引用的类的示例：

```
public class Start_Customer
{
    public CreateRequest _request;
    public CreateResponse _response;

    string fax = "(866) 345-3453";
    string website = "www.testersRus.com";
    bool Manage = true;
    int PartnerID = 0;
    string FirstName = "";
    string LastName = "";
    string Email = "";

    public void CreateClient()
    {
        _request = new CreateRequest();
        _request.CommandComment = "";
    }

    public void Test()
    {
        //create a new web service client
        var sw = new SoapCreateStart();

        _response = sw.Customers_Start(new AppHeader(), _request) as CustomerResponse;

        Console.WriteLine(_response.ToString());
    } 
```

现在，在我的新课程中，我正在尝试使用该课程的参考并结识新客户，然后检查是否制作了某些事情，例如传真号码是否正确，公司是否正确等等。

关于如何在不使方法静态的情况下以正确的方式引用它的任何想法？

到目前为止，我在想我会说：

```
Start_Customer create = Start_Customer();
create = CreateClient(); 
```

这让我可以使用该方法，但我不断收到 null 错误。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:21:39.473

能够弄清楚。我不得不通过说来引用每种方法：

```
create.Create(); 
```

例如，感谢您的帮助！

# whois - Whois apnic 问题

> ID：14709852
> 
> 赞同：0
> 
> 时间：2013-02-05T14:28:49.170
> 
> 标签：whois

使用以下代码进行 whois 查询：

```
public static string LookUp(string ip, string whoisServer){
    string buff = string.Empty;
    string strDomain = ip + "\r\n";
    byte[] arrDomain = Encoding.ASCII.GetBytes(strDomain);
    using (TcpClient tcp = new TcpClient(whoisServer, 43)) {
       using (Stream tcpStream = tcp.GetStream) {
          using (StreamReader objSR = new StreamReader(tcpStream, Encoding.ASCII)) {
            tcpStream.Write(arrDomain, 0, strDomain.Length);
            buff = objSR.ReadToEnd;
          }
       }
    }
    return buff;
   } 
```

工作正常（成熟，arin，lacnic，afrinic），除了 whois.apnic.net。使用 Wireshark，我注意到 apnic 不断发送相同的响应以增加间隔。

有人知道为什么吗 ？

此外，为什么分配给 apnic (103.31.186.82) 的 IP 地址会指向具有位于拉脱维亚的“ISP”的罗马尼亚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T19:26:35.257

您以 \r\n 顺序喂食的地方：

```
string strDomain = ip + "\r\n"; 
```

尝试只喂食 \n:

```
string strDomain = ip + "\n"; 
```

或者只是一个 \r:

```
string strDomain = ip + "\r"; 
```

一些 whois 服务器只响应行尾和/或回车而不是通常的配对，它通常取决于服务器上运行的操作系统。

在不同平台上处理文本文件时几乎相同，Windows机器通常倾向于使用双行结尾，Linux / Unix变体......变化:-)

## 此外

原因有很多，但很可能是 ISP 的总部/总部位于拉脱维亚，而您用来提供地理信息的查询工具所使用的记录中的地址是总部地址，而物理 IP 链接实际上在您期望的地理区域。

# list - 如何在 jsp 页面中使用函数来更改 div 标签中的值？

> ID：14709855
> 
> 赞同：0
> 
> 时间：2013-02-05T14:29:12.167
> 
> 标签：list, jsp, html, onclicklistener

我有一个网站，使用函数打印列表并`<%= %>`打印它。I then want to change the value in a separate `<div>`when an item in the list is selected.

这是创建字符串的函数：

```
public String createInfoString(String s){

                       JavaBeans.CatalogueBean c = new JavaBeans.CatalogueBean(); 
                       JavaBeans.ProductBean pb[] = c.getProducts(); 

                       int posit = Integer.parseInt(s); 
                       String tempStr =
                       "<img src='Images" + pb[posit].getImageExtention() + "'            width='400' height='300'></img> </BR></BR>"+                                               
                       "Model: " + pb[posit].getName()+ "</BR></BR>" +
                       "Description: " + pb[posit].getDescription() + "</BR></BR>"+
                       "Number in stock: " + pb[posit].getNumAvailable() + "</BR></BR>";

                       return tempStr;

                       } 
```

该列表的代码如下：

```
<ul  onclick="createInfoString(event.srcElement.id)">
                                      <li>
                    <div class="Folder">Accessories</div>
                                      </li>
                                            <%= createSideList()%>
                                </ul> 
```

单击一个项目时，我需要生成一个字符串（这是由 完成的`createInfoString`），然后我需要将该字符串推入 a `<DIV>`，谁能告诉我如何做到这一点？

使用 JavaScript 我会使用
`document.getElementbyID("DisplayInfo").innerHTML = tempStr`.
但这不适用于`jsp`.

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:46:34.893

JSP 在服务器端执行。如果您需要在单击某项时执行某项操作，则必须在客户端使用 JavaScript 完成。

所以你基本上有两种可能：

1.  将所有这些 HTML 块嵌入页面中的隐藏 div 中。单击 UL 时，使用 Javascript 提取相应隐藏 div 的内部 HTML 并将其复制到该`DisplayInfo`div。
2.  单击 UL 时，向您的 webapp 发送 AJAX 请求，使您的 webapp 返回相应的 HTML 块，并在 AJAX 响应处理程序中，将接收到的内容设置为`DisplayInfo`div 的内容。

# ios - CGContextDrawPath：无效的上下文 0x0

> ID：14709864
> 
> 赞同：1
> 
> 时间：2013-02-05T14:29:35.700
> 
> 标签：ios, xcode, cgcontext, cgcontextdrawimage

我有这段代码，我认为这是这里的问题：

```
CGContextRef context =  CGBitmapContextCreate(nil,
                                              routeView.frame.size.width,
                                              routeView.frame.size.height,
                                              8,
                                              4 * routeView.frame.size.width,
                                              CGColorSpaceCreateDeviceRGB(),
                                              kCGImageAlphaPremultipliedLast);

CGContextSetStrokeColorWithColor(context, lineColor.CGColor);
CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
CGContextSetLineWidth(context, 1.0); 
```

来自：[https ://github.com/kadirpekel/MapWithRoutes/tree/master/Classes](https://github.com/kadirpekel/MapWithRoutes/tree/master/Classes)

这实际上是在对该项目进行任何更改，然后我尝试将某些内容导入我的代码并且不起作用，我收到此错误：

```
Feb  5 14:16:17 alejandro.upes.itccanarias.org GPSTestMap[2878] <Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
Feb  5 14:16:17 alejandro.upes.itccanarias.org GPSTestMap[2878] <Error>: CGContextSetRGBFillColor: invalid context 0x0
Feb  5 14:16:17 alejandro.upes.itccanarias.org GPSTestMap[2878] <Error>: CGContextSetLineWidth: invalid context 0x0
Feb  5 14:16:17 alejandro.upes.itccanarias.org GPSTestMap[2878] <Error>: CGContextDrawPath: invalid context 0x0
Feb  5 14:16:17 alejandro.upes.itccanarias.org GPSTestMap[2878] <Error>: CGBitmapContextCreateImage: invalid context 0x0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-28T13:45:30.827

答案是@Sohaib 评论：

`Make sure your routeView is initialized properly and CGBitmapContextCreate function doesn't return nil`– Sohaib 2013 年 2 月 5 日在 14:32

# java - 设置 Android Development Env 需要在 Mac 上重新安装 Java，为什么？

> ID：14709866
> 
> 赞同：2
> 
> 时间：2013-02-05T14:29:39.253
> 
> 标签：java, android, eclipse, installation, eclipse-adt

我正在运行 OS X 10.8 Mountain Lion 的 Macbook Air 上设置 Android 开发环境。

我已经通过从 oracle 网站下载安装了 JDK for mac。然后我运行`java -version`显示**java版本“1.7.0_13”**

然后我从[http://developer.android.com/sdk/index.html下载](http://developer.android.com/sdk/index.html)**了 MAC 的 ADT 包**

然后我运行了eclipse，它显示了一个安装对话框来安装java。它说

```
To open “Eclipse,” you need a Java SE 6 runtime. Would you like to install one now? 
```

当我已经安装了java时，为什么它要求java？

Java 也包含在我的路径中。什么地方出了错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:36:24.160

*   JDK - Java 开发工具包
*   JRE - Java 运行时环境
*   Java SE - Java 标准版

SE 定义了一组能力和功能；有更复杂的版本（企业版 - EE）和更简单的版本（移动版 - ME - 用于移动环境）。

JDK 包括开发 Java 应用程序所需的编译器和其他工具；JRE 没有。因此，要运行其他人提供的 Java 应用程序，您需要 JRE；要开发 Java 应用程序，您需要 JDK。

所以它不是重新安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T16:41:06.740

我相信 Eclipse for Mac 坏了。即使我刚刚安装了 Java7，我也遇到了同样的问题。我以前在我的 PC 上使用过带有 Java7 的 Eclipse ADT。

# php - 在动态情况下将按钮分配给相应的图像

> ID：14709868
> 
> 赞同：0
> 
> 时间：2013-02-05T14:29:44.437
> 
> 标签：php, javascript, html, css, file

我有一个包含 1000 个或更多文件的文件夹。我可以在我的浏览器上显示文件的缩略图（使用 opendir、readdir 和 is_dir）。我还为每个图像分配了一个按钮。我现在需要的是，例如，第 500 个图像在单击第 500 个按钮后被删除。因此，源文件夹中不再有该图像可用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:32:42.477

你检查过PHP的[删除功能吗？](http://php.net/manual/es/function.delete.php)

有一个如何使用它的简单示例：

```
<?php

while(!$file = readdir($pathToImagesFolder)){
  if(file_exists($pathToImagesFolder.$file)){
    delete($pathToImagesFolder.$file);
  }
}

?> 
```

你的按钮应该调用一个动作（或一个文件，`deleteImage.php`对于这个例子），它只为所需的图像执行代码。（通常通过按钮值属性作为参数传递给函数）

```
<form action="deleteImage.php" id="doNotMatchForm" method="post">
    <input name="submit" class="button" type="submit" value="nameOfImage500th.jpg">
</form> 
```

# java - java.lang.NoClassDefFoundError: java/util/Objects 异常

> ID：14709870
> 
> 赞同：0
> 
> 时间：2013-02-05T14:29:49.463
> 
> 标签：java, noclassdeffounderror

我知道 java.util.Objects 类可以从 JDK 7 开始使用。但是这个异常很奇怪，似乎来自 Java 内部的调用会导致异常——但它不是同一个虚拟机吗？！更“糟糕”的是，Tomcat 被配置为使用 JRE7 运行

```
05.Feb 00:01:00.485 <rker-5> ERROR [  org.quartz.simpl.SimpleThreadPool] - Error while executing the Runnable: 
java.lang.NoClassDefFoundError: java/util/Objects
    at java.lang.StackTraceElement.equals(Unknown Source) ~[na:1.7.0]
    at ch.qos.logback.classic.spi.ThrowableProxyUtil.findNumberOfCommonFrames(ThrowableProxyUtil.java:64) ~[logback-classic-0.9.28.jar:na] 
```

你能理解这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:56:52.047

好吧，我想我知道了... Java Updater 已在前一天更新到 Update 13。异常发生在下一次 cron 作业运行时。你怎么看？

# namespaces - XML 命名空间中的分隔符 - 命名空间的相对导入

> ID：14709872
> 
> 赞同：1
> 
> 时间：2013-02-05T14:29:54.953
> 
> 标签：namespaces, xsd, relative-import

我有一个关于 XML 命名空间的概念性问题：如果我在文件夹层次结构中有两个不同的 xsd 文件：

```
fileA.xsd
folder/
    fileB.xsd 
```

在这两个文件中，我通过 targetNamespace 属性定义了一个单独的命名空间：

在 fileA.xsd 那将是

```
targetNamespace="http://www.anurlofmine.com/myproject/A" 
```

在 fileB.xsd 中，这将是：

```
targetNamespace="http://www.anurlofmine.com/myproject/folder/B" 
```

我可以使用 th eurl 中的路径进行相对导入吗？

我可以例如使用

```
<xs:schema xmlns:relativeA="../A"> 
```

在文件 B.xsd 中？

我并不真正关心这样做的方法，我知道有各种方法可以指定模式定义的位置，我只关心 url 中路径的含义。

据我所知，url 只是一个字符串，用于唯一标识 xsd 文件中的类型（除了为定义文件指定一个*可能*看起来的位置 - 不能保证）。我对么 ？

希望我的问题不会太奇怪而无法回答:)

提前非常感谢米莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:52:29.827

XSD 模式文档中导入和包含元素的 schemaLocation 属性中的模式位置提示被指定为 xs:anyURI 类型，这意味着是的，它可以是相对引用。

所以在你的fileB.xsd中，你可以有一个形式的导入语句

```
<xs:import namespace="http://www.anurlofmine.com/myproject/A"
           schemaLocation="../fileA.xsd"/> 
```

`xmlns:relativeA`另一方面，命名空间声明的值（例如在您的示例中）应该是绝对 URI，而不是相对 URI。许多程序实际上并不检查命名空间名称作为 URI 的合法性，因此使用“../A”作为命名空间名称不一定会引发错误。但是定义 XML 技术堆栈的基本 W3C 规范指定使用相对 URI 作为命名空间名称的文档的信息集是未定义的。

在任何情况下，向 xs:schema 元素添加名称空间声明都不会产生导入该名称空间或引用可能位于指定位置的任何模式文档的效果。

# c++ - 类声明之外的方法定义

> ID：14709873
> 
> 赞同：1
> 
> 时间：2013-02-05T14:29:56.497
> 
> 标签：c++, class, declaration, definition

请问我怎样才能用类声明之外的参数编写构造函数的定义？

```
class A{
 public:
  A(int x);
  ~A();
}

A::A(int x) { ... }
A::~A(){...}

class B : public A
{
 public:
  B(int x):A(x){ this work fine}
  ~B(){}

} 
```

这行不通

```
class B : public A
{
 public:
  B(int x):A(x); // error here
  ~B();

}

B::B(int x):A(x){ this not work };
B::~B(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:46:10.463

这个问题似乎收集了异常数量的不正确答案（尽管有些看起来可能是疏忽的结果，而不是误解）。

情况很简单。在类定义中，您可以有成员函数声明或成员函数定义。在类定义之外，您只能有一个函数定义（在这种情况下，在类定义中，您必须只声明该函数，而不是定义它）。这意味着更正后的代码如下所示：

```
class B : public A {  // This is the class definition.
public:
    B(int x);    // declare member functions here.
    ~B();
};

// define member functions here.
//
B::B(int x) : A(x) { /* body */ }
B::~B() { /* body */ }      // a declaration like `B::~B();` is not allowed here. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T14:32:18.210

> `B(int x):A(x); // error here`

您删除了方法的主体，但忘记删除[*成员初始化列表*](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)：

```
B(int x); // No error 
```

此外，您需要在类定义的最后一个右大括号之后放置分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:32:27.740

您将声明与实现混合在一起。它应该是：

```
class B : public A
{
 public:
  B(int x);
  ~B();    
}

B::B(int x):A(x){ /*this works */ };
B::~B() {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:32:38.307

这是你的代码：

```
class B : public A
{
 public:
  B(int x):A(x); // error here
  ~B();

} 
```

当您执行类似`~B();`声明*析*构函数的存在时，但由于您最终到达那里（注意“;”），您没有定义它。构造函数也是如此，在您标记您的行中，您调用了超级构造函数，这是一个*定义*，但您没有提供方法体，这仅在*声明*中是预期的。

要解决您的问题，只需将声明保留为`B(int x);`，而不指定 B 如何与 A 关联，稍后将在定义中指定。

调用超级构造函数是生成代码的一部分，调用者不需要知道这一点，这就是为什么你可以声明一个构造函数而不定义它如何构造它的超类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T14:33:08.793

尝试

```
class B : public A
{
 public:
  B(int x);
  ~B();
};

B::B(int x):A(x){ }
B::~B() {} 
```

# java - 我们可以说下面的代码是死锁的例子吗

> ID：14709876
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:30:09.633
> 
> 标签：java, multithreading

我曾尝试使用以下代码，这似乎是一个死锁场景

```
public class MyThread {

    public static void main(String[] args) {
        try {
            Thread.currentThread().join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
} 
```

但我怀疑情况并非如此。这不是僵局。我的理解是`Main`线程正在等待自己的完成。我已经深入研究了它，但是 join 中的等待方法是本机的，我无法获得更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:36:39.213

来自维基百科

“僵局是指两个或多个相互竞争的动作都在等待对方完成的情况，因此永远都不会。”

在这种情况下，您正在等待线程完成，而该线程正在等待任务完成。虽然您只有一个线程，但恕我直言，仍然存在死锁。

仅供参考，看看您是否可以在此代码中发现死锁。

```
public class Main {
    static String HI = "Hello World";

    static {
        Thread t = new Thread() {
            @Override
            public void run() {
                System.out.println(HI);
            }
        };
        t.start();
        try {
            t.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public static void main(String... args) {
    }
} 
```

顺便说一句，如果你做`HI`最后它不会死锁。;)

# ruby-on-rails - 使用特定版本的 ruby gems 和特定版本的 rails 是否有/有什么要求

> ID：14709880
> 
> 赞同：2
> 
> 时间：2013-02-05T14:30:19.303
> 
> 标签：ruby-on-rails

特别是，我有一个 rails 2.3.4 应用程序，我正在尝试升级到 2.3.16 以获取一些安全修复程序。当我在rails升级后运行'script/about'时，我得到

```
/usr/lib/ruby/gems/1.8/gems/rails-2.3.16/lib/rails/gem_dependency.rb:81:in
`add_load_paths': undefined method `requirement' for #
<Rails::GemDependency:0x7f408a59d040> (NoMethodError)
from /usr/lib/ruby/gems/1.8/gems/rails-2.3.16/lib/initializer.rb:301:in
`add_gem_load_paths' 
```

我看到'def 要求'实际上已经从 rails 2.3.4 和 2.3.16 之间的 gem_dependency 中“消失”了。

谷歌搜索并没有给我直接的打击，但一些点击暗示对 ruby​​gems 存在某种依赖。我的应用程序运行的 ruby​​gems 是 1.3.4。我真正想了解的是，rails 核心团队是否记录了特定 rails 到 ruby​​gems 发布依赖项的矩阵。

# azure - Azure 辅助角色数据波动

> ID：14709881
> 
> 赞同：1
> 
> 时间：2013-02-05T14:30:24.060
> 
> 标签：azure

我想创建一个在内存中保存大量易失性数据的应用程序。当主机关闭或维护时，只需要保留一小部分数据。中断应该很少见，大部分时间都需要访问内存中的数据，但很少有服务的重新安排是可以忍受的。

如果我一直在为服务器开发，我会创建一个 WindowsService，它会在机器启动时可靠地运行，并且我会在 OnStop() 方法中保留一小部分数据。

我正在考虑将整个事情转移到云端。问题是，从这个角度来看，工作者角色是否类似于 Windows 服务？它是在大部分时间运行但很少发生中断，还是不时回收/重新启动或在空闲时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:17:43.280

与 Windows 服务一样，Worker 角色用于处理后台任务。但是，您需要记住的一件事是，您的工人角色可能随时下降。这可能是因为硬件故障或软件更新。因此，您不能总是认为这是高度可用的。这就是 Windows Azure 建议部署应用程序的多个实例的原因。

您可以做的是让您的工作角色的多个实例运行，并且所有实例都共享一个公共缓存，您将在其中放置易失性数据。请查看 Windows Azure Caching ( [http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx) )，您可以在其中将 VM（即实例）的一些内存用于缓存目的，或者有一个专用于缓存的完整 VM。这样，您就可以在工作角色之外的某个地方拥有易失性数据，从而使其可用于所有实例。

# ruby-on-rails - 有什么技术可以只运行处于活动状态的 ajax 吗？

> ID：14709882
> 
> 赞同：0
> 
> 时间：2013-02-05T14:30:26.437
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

每 10 秒，它调用这个 ajax 来重新加载收到的邮件数。
有时，我一次在超过 5 个选项卡上打开我的应用程序。
显然每个选项卡都试图调用这个 ajax，所以我的电脑变得如此热:(

我只想在处于活动状态的选项卡中运行这个 ajax。因此，除非选项卡处于活动状态，否则其余 4 个选项卡不应调用 ajax。

我怎样才能实现这个条件呢？

**refresh_mail_count.js**

```
jQuery(document).ready(function () {
    refreshMail();
});

function refreshMail() {
  $.ajax({
    url: "/messages/refresh_mail",
    type: "GET",
    dataType: "script",
  });
} 
```

**refresh_mail.js.erb**

```
$('#message_count').html("<%= j(render(:partial => 'layouts/message_received_count', :object => @message_count)) %>");
setTimeout(refreshMail,10000); 
```

# mahout - Mahout 推荐返回空集

> ID：14709887
> 
> 赞同：0
> 
> 时间：2013-02-05T14:30:42.803
> 
> 标签：mahout

我正在尝试使用下面的代码使用示例数据“intro.csv”运行 KnnItemBasedRecommender，但是结果我得到了空集。

```
public static void main(String[] args) throws Exception {

        DataModel model = NeuvidisData.convertToDataModel();

        //RecommenderEvaluator evaluator = new AverageAbsoluteDifferenceRecommenderEvaluator();

        RecommenderBuilder recommenderBuilder = new RecommenderBuilder() {
            @Override
            public Recommender buildRecommender(DataModel model) {
                ItemSimilarity similarity = new LogLikelihoodSimilarity(model);
                Optimizer optimizer = new ConjugateGradientOptimizer();
                return new KnnItemBasedRecommender(model, similarity, optimizer, 2);
            }
        };

        Recommender rec = recommenderBuilder.buildRecommender(model);
        List<RecommendedItem>  rcList  = rec.recommend(1, 2);

        for(RecommendedItem item:rcList)
        {
            System.out.println("item:");
            System.out.println(item);
        }
    } 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:01:50.300

大概是因为您的数据太小或太稀疏，无法使用此算法为用户 1 提供建议。没有数据很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T04:54:52.723

以下代码对我有用。

```
 ItemSimilarity similarity = new PearsonCorrelationSimilarity(dataModel);
                Optimizer optimizer =  new ConjugateGradientOptimizer();
                Recommender recommender = new KnnItemBasedRecommender(dataModel, similarity, optimizer, 5); 
```

使用 PearsonCorrelationSimilarity 而不是 LogLikelihoodSimilarity。

此解决方案可能适用于特定的数据集。因此，此解决方案基于您的数据集。

# javascript - 在 CSS3 中创建这个形状作为下拉 div

> ID：14709891
> 
> 赞同：2
> 
> 时间：2013-02-05T14:30:59.137
> 
> 标签：javascript, html, css

我正在尝试创建如下所示的内容：

![落下](../Images/d8f71ffc89a3bb9691f12fcc8b1ace86.png)

问题是我认为最好将其保留在一个 div 中，因为下拉菜单有一个内部阴影和阴影。

在此先感谢，如果您需要有关该问题的更多详细信息，请告诉我。

这是我到目前为止所拥有的：

## CSS

```
.rectangle {
    background: #1f8dda;
    background-image: -moz-linear-gradient(270deg, #1f8dda 0%, #114dbc 100%);
    background-image: -webkit-linear-gradient(270deg, #1f8dda 0%, #114dbc 100%);
    background-image: -o-linear-gradient(270deg, #1f8dda 0%, #114dbc 100%);
    background-image: linear-gradient(180deg, #1f8dda 0%, #114dbc 100%);
    -moz-box-shadow: 0px 0px 2px 0px #000000;
    -webkit-box-shadow: 0px 0px 2px 0px #000000;
    -o-box-shadow: 0px 0px 2px 0px #000000;
    box-shadow: 0px 0px 2px 0px #000000;
    border-radius: 0px;
    margin: 0px;
    width: 145px;
    height: 138px;
} 
```

我还为此创建了一个小提琴：http: [//jsfiddle.net/yHy5n/](http://jsfiddle.net/yHy5n/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:33:43.370

除了你的菜单结构看起来很奇怪之外，这里有一个我为你做的快速草图作为起点：**[演示](http://jsfiddle.net/Fzy6U/1/)**
它并不是一个完整的解决方案，而是一个你可以使用的想法。

给定下面的标记，基本思想是分别对主列表 ( `h2`) 和子列表的列表元素进行样式设置，并使渐变具有平滑过渡。

```
<ul class="nav">
    <li>HOME</li>
    <li class="active"><h2>DUNGEONS PIECES</h2>
    <ul class="subnav">
        <li>Floor<span class="count">123</span></li>
        <li>Walls<span class="count">54</span></li>
        <li>Sets<span class="count">7</span></li>
    </ul>
    </li>
</ul> 
```

CSS：

```
.active {
    background: #1f8dda;
    /* ... */
}
.active h2{
    background-image: linear-gradient(180deg, #1f8dda 34%, #228fdd 100%);
    /* ...                                                    /\ */
}            /*            gradient transition   --------------- */
.active ul { /*                                  \/              */
    background-image: linear-gradient(180deg, #228fdd 34%, #114dbc 100%);
    /* ... */
} 
```

此外，您的大部分兼容性 css 也不再需要 - 看看：

[渐变](http://caniuse.com/#search=gradient)
[框阴影](http://caniuse.com/#search=box-shadow)

# javascript - 使用带有 .attr() 的 JS 变量

> ID：14709894
> 
> 赞同：1
> 
> 时间：2013-02-05T14:31:10.930
> 
> 标签：javascript, jquery, variables, attr

这应该很简单 - 我想在 .attr() 元素中使用 javascript 变量“foo”，如下所示：

```
$("#readreplytxt_" + msgid).attr("onClick", "readofferclose(foo)"); 
```

我试过这个：

```
$("#readreplytxt_" + msgid).attr("onClick", "readofferclose("+ foo")"); 
```

然而没有喜悦。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:32:56.390

如果您已经在使用脚本来分配点击，为什么不使用[**click()**](http://api.jquery.com/click/)方法来绑定事件，类似以下：

```
$("#readreplytxt_" + msgid).click(function(){
    readofferclose(foo);
}); 
```

它也会使您的 javascript 变得美观[**且不引人注目**](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:33:33.520

请注意，您缺少“+”号。

```
$("#readreplytxt_" + msgid).attr("onClick", "readofferclose("+ foo + ")"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:34:01.707

而是附加一个事件处理程序：

```
$("#readreplytxt_" + msgid).click(function (event) {
    event.preventDefault(); // prevent the default click action
    readofferclose(foo);
}); 
```

# jsp - 当用户在java中关闭浏览器时删除文件

> ID：14709899
> 
> 赞同：0
> 
> 时间：2013-02-05T14:31:22.147
> 
> 标签：jsp, spring-mvc, browser

当浏览器在客户端关闭时，我想从服务器中删除文件。

我需要保存一个 XML 文件，单击提交按钮后，将使用相同的 XML 重新加载相同的页面。要重新加载相同的页面 JSP 需要以前保存的文件。但是我需要在不需要时删除该文件，是否可以在浏览器关闭时删除该文件，因为我不应该使用会话，如何查找用户何时关闭浏览器。我正在使用 Spring MVC 框架。

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:43:34.170

您可以使用 Ajax 来实现这一点：

```
1:Check if user wants to exit the window 
2: if yes then make Synchronous ajax call to a file that contains code to delete a file 
```

例子 ：-

```
 $(window).unload( function () {

    $.ajax({
       url: "page_which_contains_file_deletion_code.jsp",
       success: function(data){
         alert("File Deleted Successfully");
       },
     async: false
     }); 
}); 
```

# mysql - GROUP BY 查询 - 为什么这么慢

> ID：14709902
> 
> 赞同：1
> 
> 时间：2013-02-05T14:31:28.450
> 
> 标签：mysql, group-by

我正在尝试在一个大表（超过 800 万行）上生成一个组查询。但是，我可以减少按日期对所有数据进行分组的需要。我有一个视图可以捕获我需要的日期，这限制了查询但也好不到哪里去。最后我需要加入另一个表来获取一个字段。

我正在显示查询、主表上的创建以及下面的查询说明。

主要查询：

```
SELECT  pgi_raw_data.wsp_channel,
        'IOM' AS wsp,
        pgi_raw_data.dated,
        pgi_accounts.`master`,
        pgi_raw_data.event_id,
        pgi_raw_data.breed,
        Sum(pgi_raw_data.handle),
        Sum(pgi_raw_data.payout),
        Sum(pgi_raw_data.rebate),
        Sum(pgi_raw_data.profit)
FROM    pgi_raw_data
        INNER JOIN summary_max
                ON pgi_raw_data.wsp_channel = summary_max.wsp_channel
                        AND pgi_raw_data.dated > summary_max.race_date
        INNER JOIN pgi_accounts
                ON pgi_raw_data.account = pgi_accounts.account
GROUP   BY pgi_raw_data.event_id
ORDER   BY NULL 
```

创建表：

```
 CREATE TABLE `pgi_raw_data` (
  `event_id` char(25) NOT NULL DEFAULT '',
  `wsp_channel` varchar(5) NOT NULL,
  `dated` date NOT NULL,
  `time` time DEFAULT NULL,
  `program` varchar(5) NOT NULL,
  `track` varchar(25) NOT NULL,
  `raceno` tinyint(2) NOT NULL,
  `detail` varchar(30) DEFAULT NULL,
  `ticket` varchar(20) NOT NULL DEFAULT '',
  `breed` varchar(12) NOT NULL,
  `pool` varchar(10) NOT NULL,
  `gross` decimal(11,2) NOT NULL,
  `refunds` decimal(11,2) NOT NULL,
  `handle` decimal(11,2) NOT NULL,
  `payout` decimal(11,4) NOT NULL,
  `rebate` decimal(11,4) NOT NULL,
  `profit` decimal(11,4) NOT NULL,
  `account` mediumint(10) NOT NULL,
  PRIMARY KEY (`event_id`,`ticket`),
  KEY `idx_account` (`account`),
  KEY `idx_wspchannel` (`wsp_channel`,`dated`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

这是我对 summary_max 的看法：

```
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW 
 `summary_max` AS select `pgi_summary_tbl`.`wsp_channel` AS 
 `wsp_channel`,max(`pgi_summary_tbl`.`race_date`) AS `race_date` 
from `pgi_summary_tbl` group by `pgi_summary_tbl`.`wsp 
```

还有评估的查询：

```
1   PRIMARY <derived2>  ALL                 6   Using temporary

1   PRIMARY pgi_raw_data    ref idx_account,idx_wspchannel  idx_wspchannel  
7   summary_max.wsp_channel 470690  Using where

1   PRIMARY pgi_accounts    ref PRIMARY PRIMARY 3   gf3data_momutech.pgi_raw_data.account   29  Using index

2   DERIVED pgi_summary_tbl ALL                 42282   Using temporary; Using filesort 
```

任何有关索引的帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:55:19.757

第一件事是确保你有索引`pgi_summary_table(wsp_channel, race_date)`并且`pgi_accounts(account).` 对于这个查询，你不需要原始数据中这些列的索引。

MySQL 倾向于使用索引，即使它们不是最有效的路径。我将首先查看没有连接的“完整”查询的性能：

```
SELECT  pgi_raw_data.wsp_channel,
        'IOM' AS wsp,
        pgi_raw_data.dated,
        -- pgi_accounts.`master`,
        pgi_raw_data.event_id,
        pgi_raw_data.breed,
        Sum(pgi_raw_data.handle),
        Sum(pgi_raw_data.payout),
        Sum(pgi_raw_data.rebate),
        Sum(pgi_raw_data.profit)
FROM    pgi_raw_data
GROUP   BY pgi_raw_data.event_id 
```

如果这具有更好的性能，您可能会遇到索引对您不利的情况。具体问题称为“抖动”。当表格太小而无法放入内存时，就会发生这种情况。通常，处理此类表格的最快方法是阅读整个表格。通过索引访问表会导致对大多数行进行额外的 I/O 操作。

如果这可行，那么在聚合之后进行连接。此外，考虑获得更多内存，以便整个表适合内存。

其次，如果您必须处理这种类型的数据，那么按日期对表进行分区可能被证明是一个非常有用的选项。这将允许您显着减少读取大表的开销。您必须确保可以以相同的方式阅读汇总表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:40:19.987

您至少需要这些字段的索引：

```
pgi_raw_data.wsp_channel,
pgi_raw_data.dated,  
pgi_raw_data.account
pgi_raw_data.event_id,
summary_max.wsp_channel, 
summary_max.race_date, 
pgi_accounts.account 
```

一般（并非总是）规则是任何你正在排序、分组、过滤或加入的东西都应该有一个索引。

还：`pgi_summary_tbl.wsp`

另外，为什么`order by null`？

# delphi - 创建 Scale-to-fit MDI 应用程序 - 从哪里开始？

> ID：14709903
> 
> 赞同：1
> 
> 时间：2013-02-05T14:31:30.083
> 
> 标签：delphi, delphi-xe2, mdi

这更像是一个“从哪里开始”的问题，而不是一个“我该如何修复我弄坏的东西”的问题。

我的公司有一个旧的 Delphi 7 MDI 应用程序，我们正在移植到 Delphi XE2，我的经理让我研究可以使应用程序重新调整大小以适应不同显示器分辨率的方法（目前强制为 1024*768 - 是的，它已经很旧了）。

虽然我有一个想法，将每个组件及其尺寸和布局坐标放在每个基本分辨率的数组中，然后将这些值乘以比率差来实现这个“缩放以适应”问题，我想知道是否这是实现我们所寻求的最有效的方法吗？

MDI 应用程序及其子应用程序只需要转到有边框的全屏，然后最小化，将不会处理部分调整大小的屏幕。

无论如何，希望有人遇到类似的“问题”，并且可以为我指出正确的方向，以获取探索“缩放以适应”MDI 应用程序的各种技术的文章/示例。

谢谢！

# image - GRAILS - 图像损坏或截断

> ID：14709904
> 
> 赞同：0
> 
> 时间：2013-02-05T14:31:32.313
> 
> 标签：image, hibernate, grails, blob, truncated

当我尝试显示存储在我的数据库中的图像时，我在 FF 控制台上收到此错误“图像损坏或截断”。我正在使用 Grails 和 Hibernate。我只想在我的 gsp 页面中显示用户的个人资料图片。

我的域类 User 有一个属性 photo 定义为 byte[]

```
public class User {

private String userId;
private byte[] photo;
.
.
. 
```

user.hbm.xml 映射为：

```
< property name="photo" type="binary" column="PHOTO" not-null="false" /> 
```

此列是 DB 上的 BLOB。

我的普惠制：

```
< div id="user-view-thumbnail-container">
    <fieldset>
      <legend>Photo Upload</legend>
      <g:form action="uploadPhoto" method="post" enctype="multipart/form-data">
        <label for="photo">Photo</label>
        <input type="file" name="photo" id="photo" />
        <input type="submit" class="buttons" value="Upload" />
      </g:form>
    </fieldset>
  <g:if test="${user.photo}">
    <img alt="User Photo"  src="${createLink(controller:'profile', action:'profile_image', id:user.userId)}" />
  </g:if>
</div> 
```

配置文件控制器：

```
def uploadPhoto = {       
    def user = userService.getUser(authenticateService.principal()) 
    def f = request.getFile('photo')

    user.setPhoto(f.getBytes())

    if (!user.save()) {
        //doesn´t matter now
        return;
    }

    redirect(action: 'index', model:[user: user])
}

def profile_image = {
    def user = userService.getUser(params.id)

    if (!user) {
        response.sendError(404)
        return;
    }
    response.setContentType(user.photo.contentType())//'image/png', 'image/jpeg', 'image/gif'
    response.setContentLength(user.photo.size())
    OutputStream out = response.getOutputStream();
    out.write(user.photo);
    out.close();
} 
```

仅供参考：图片已正确保存在数据库中，我可以看到它，但我无法在我的 gsp 上显示它。

任何的想法？

非常感谢各位，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:32:59.100

在映射中使用 blob 类型:)。

# java - Android 应用程序未运行（模拟器未从 Eclipse 启动）

> ID：14709908
> 
> 赞同：0
> 
> 时间：2013-02-05T14:31:41.520
> 
> 标签：java, android, eclipse

我正在学习如何从文档中制作 android 应用程序，我下载并解压缩了 ant 包

我打开`eclipse`并按照教程进行操作，但是当我单击 eclipse 工具栏中的运行按钮时，什么也没有发生（没有弹出窗口，avd 也没有启动）。

正如教程所说，我已经制作了一个`AVD`（通过同一工具栏中的 avd 管理器图标）。

我还使用 android 4.2 启动了 AVD。

我在 Ubuntu 12.04 32 位，如果这很重要的话。

请帮我运行我的应用程序，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:48:41.127

您是否尝试过在 AVD 启动并在后台运行时运行应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:56:22.357

构建应用程序以支持与模拟器的版本匹配的 Android 版本。IE。如果模拟器配置为支持 2.3.3，并且您的应用程序是针对 4.0 API 构建的，则可能会发生这种情况。

直接运行您的应用程序（将 Eclipse 排除在外）。您可以从命令行发出以下命令（这是一个很好的测试）。

```
adb install yourApkName.apk 
```

# symfony - 从关联的 Doctrine 实体中获取值

> ID：14709912
> 
> 赞同：1
> 
> 时间：2013-02-05T14:32:02.970
> 
> 标签：symfony, doctrine, event-listener

我在实体“顾问”和“状态”之间有多对多关联，其定义如下：

```
@ORM\ManyToMany(targetEntity="Status", inversedBy="consultant")
  @ORM\JoinTable(name="consultant_status",
  joinColumns={
  @ORM\JoinColumn(name="consultant_id", referencedColumnName="id")
  },
  inverseJoinColumns={
  @ORM\JoinColumn(name="status_id", referencedColumnName="id")
 }
) 
```

当我尝试（在 Doctrine postUpdate 事件中）通过以下方式从 Status 中获取 id 时：

```
...
$entity = $args->getEntity();
if($entity instanceof Consultant){
 $status_id= $entity->getStatu()->getId();
}
... 
```

我得到：

> 调用未定义的方法 Doctrine\ORM\PersistentCollection::::getId()

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:42:03.283

由于顾问和状态处于多对多关系中，`getStatus()`将返回一个`Collection`对象，其中包含与此顾问相关的所有状态。

要遍历所有状态，只需使用 foreach

```
foreach($entity->getStatu() as $statut) {
                        ^^^
                        //you might have a typo here
    $statut->getId();
    //other stuff
} 
```

# meta-tags - - 它有什么作用？

> ID：14709919
> 
> 赞同：0
> 
> 时间：2013-02-05T14:32:25.470
> 
> 标签：meta-tags, autosize

我在一个网站上找到了这个元标记，但我无法弄清楚它到底是做什么的。在谷歌也找不到任何东西。

`<meta name="autosize" content="off" />`

自动尺寸？哪个自动调整大小（移动设备？），我为什么要它`off`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T22:51:47.183

好像是IE6的残余。几年前，我在自己的页面中使用了许多其他反 IE6 标签。最近发现 HTML5 不会验证它。不记得它的用途，但在我通过谷歌搜索找到的示例中发现了以下评论（原始拼写错误，不是我的）：

```
Kill Propietary Image Auto-resize in XP/IE6 
```

维基百科条目中有一些关于 IE6 的内容似乎很合适。我要拉它，并建议其他人也这样做是安全的。

# c# - 如何在 C# 中的 XML XDocument XElement 中切换属性

> ID：14709922
> 
> 赞同：1
> 
> 时间：2013-02-05T14:32:31.767
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我知道，这个主题有很多帖子，但是由于我在帖子中阅读了两天但没有任何效果，所以我决定在这里问。我有一个像这样的 XML (Level01.xml) 文件

```
<map version="1.0">
 <tileset>
  <image source="....>
 </tileset>
 <layer name="background">
     <data encoding="csv">
     3,3,3,3,3,3,3,
     3,3,3,3,3,3,3,
     3,3,3,3,3,3,3,
     3,3,3,3,3,3,3
     </data>
 </layer>
 <layer name="walls">
     <data encoding="csv">
     182,182,182,182,182,8,8,
     182,8,182,8,8,8,8,
     182,182,182,182,182,8,8,
     182,8,182,8,8,8,8,
     </data>
 </layer>
</map> 
```

它是具有不同图层的（平铺）地图，我想在 XNA 中绘制它。因此，我想将每一层的数据读入 a`string[]` 这是我尝试过的，但它不适用于第二个`string[] walldata`，我非常绝望，因为我不明白为什么

```
public class LevelXmlReader
{
    public string[] backgroundData;
    public string[] wallData;

    LevelXmlReader()
    {
        XDocument doc = XDocument.Load(@"Level/Level01.xml");
        foreach (XElement layer in doc.Element("map").Descendants("layer"))
        {

            var lay = doc.Element("map").Element("layer");
            var layName = lay.Attribute("name").Value;
            switch (layName)
            {
                case "background":
                    {
                        backgroundData = lay.Element("data").Value.Split(',');
                    }
                    break;
                case "walls":
                    {
                        wallData = lay.Element("data").Value.Split(',');
                    }
                    break;
            }

        }

    }

} 
```

当我尝试绘制`wallData`时，总是出现 ExceptionError "Object reference not set to an instance of an object."

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:39:51.787

在你的循环内你要声明

```
var lay = doc.Element("map").Element("layer"); 
```

这是不必要的，因为您已经拥有单独的层。您需要完全删除该行并使用`layer`foreach 循环中的变量。循环的内部现在应该是这样的

```
foreach (XElement layer in doc.Element("map").Descendants("layer"))
{
    switch (layer.Attribute("name").Value)
    {
        case "background":       
            backgroundData = layer.Element("data").Value.Split(','); 
            break;

        case "walls":
            wallData = layer.Element("data").Value.Split(',');
            break;
    }
} 
```

在您的代码中，您总是两次抓取同一层，而不是单步执行它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:39:03.687

您正在使用 a`foreach`来迭代所有`layer`标签。但是在循环内部，您没有使用它们。相反，您总是通过`doc.Element("map").Element("layer")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:39:05.013

代替

```
var lay = doc.Element("map").Element("layer"); 
```

和

```
var lay = layer; 
```

您忽略了循环变量，而仅使用第一个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T14:39:22.223

尝试这个

```
public class LevelXmlReader
{
    public string[] backgroundData;
    public string[] wallData;

    LevelXmlReader()
    {
        XDocument doc = XDocument.Load(@"Level/Level01.xml");
        foreach (XElement layer in doc.Element("map").Descendants("layer"))
        {
            var layName = layer.Attribute("name").Value;
            switch (layName)
            {
                case "background":
                    backgroundData = layer.Element("data").Value.Split(',');
                    break;

                case "walls":
                    wallData = layer.Element("data").Value.Split(',');
                    break;
            }
        }
    }
} 
```

# c# - 使用 SetMaxThreads 时如何避免 OutOfMemoryException

> ID：14709941
> 
> 赞同：0
> 
> 时间：2013-02-05T14:33:36.080
> 
> 标签：c#, multithreading

我需要多次调用一个方法（十万），因此我使用线程。但是当循环有 100 次我的方法循环时，它会启动 OutOfMemoryException。我尝试添加 SetMaxThreads 以仅同时运行 50 个线程但不起作用（因为我不知道该怎么做）。提前致谢。

```
ThreadPool.SetMaxThreads(50, 50);
for (int i = 0; i < tablePersons.Rows.Count; i++)
{
    Thread t = new Thread(RegisterPerson);
    t.Start(tablePersons.Rows[i]);
}

static void RegisterPerson(object paramObject)
{
   DataRow person = (DataRow)paramObject;
   Call a service...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:35:59.953

1）您将线程池线程与用户创建的线程混淆了。

这将创建一个新线程（不是线程池线程）：

```
Thread t = new Thread(RegisterPerson); 
```

看到线程池最多有 50 个线程：

```
ThreadPool.SetMaxThreads(50, 50); 
```

对您的循环没有影响，您尝试为每一行创建一个用户线程。

> 进入线程池有多种方式：
> 
> *   通过任务并行库（来自 Framework 4.0）
> *   通过调用 ThreadPool.QueueUserWorkItem
> *   通过异步委托
> *   通过 BackgroundWorker

2）您不应该创建那么多用户线程。

我建议阅读：Joe Albahari 的优秀[C# 线程](http://www.albahari.com/threading/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:38:02.737

与其手动创建那么多单独的线程，您应该使用 Parallel.ForEach()，并让它为您处理线程创建。它们不会同时运行，但您不会遇到内存问题。

# python - 类返回两个不同的对象

> ID：14709953
> 
> 赞同：0
> 
> 时间：2013-02-05T14:34:42.393
> 
> 标签：python, django

我正在尝试在下面的代码中应用单例设计模式

```
class SMSMgr( object ):
    _instance = None
    def __init__(self):
            self._allsp = []
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(SMSMgr, cls).__new__(
                                cls, *args, **kwargs)
        return cls._instance

    def loadsettings(self):
        get_all_sp = ServiceProvider.objects.filter(status = False)
        for obj in get_all_sp:
            cla = obj.class_Name
            a=globals()[str(obj.class_Name)](obj.userName,obj.password,obj.sendingurl)
            self._allsp.append(a)
            #print self._allsp
    def send(self):
        print "+++++++++++++++++++== Global send "

if __name__ == "__main__":

    b = SMSMgr()
    b.loadsettings()
    print b._allsp
    print "b end -------------------"
    c = SMSMgr()
    c.loadsettings()
    print c._allsp
    print "c end -------------------" 
```

根据单例 b 对象应与 c 对象相同。但是当我运行上面的代码时，我得到了不同的对象`b`，`c` 请建议我如何以单身人士的身份做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:39:10.627

你的单例模式看起来应该对我有用。是否有可能因为`__init__`两次都被调用，所以当您创建一个新实例时，`self._allsp`会被重置，从而看起来您有一个新实例？

您可以通过放置以下内容来检查它们是否实际上是同一个实例：

```
print b is c 
```

在脚本的末尾。`True`（如果它们相同，它将打印）

我能想到的最简单的修复方法是创建`_allsp`一个类属性并将其从`__init__`. 例如

```
class SMSMgr( object ):
    _instance = None
    _allsp = []
    def __init__(self):
        pass 
```

* * *

这是一些经过测试的代码，它按照我上面描述的那样创建了一个单例：

```
class SMSMgr( object ):
    _instance = None
    _allsp = []
    def __init__(self):
        pass

    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(SMSMgr, cls).__new__(
                                cls, *args, **kwargs)
        return cls._instance

    def foo(self,arg):
        self._allsp.append(arg)

    def bar(self):
        print self._allsp

a = SMSMgr()
a.foo(1)
b = SMSMgr()
b.foo(2)
a.bar()
b.bar()
print a is b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:41:29.163

我很确定这里的问题是您的 没有哨兵`__init__`，因此即使每个实例化返回相同的对象，`__init__`每次也会重新运行。你可以尝试这样的事情：

```
def __init__(self):
    if not hasattr(self, '_allsp'):
        self._allsp = [] 
```

尽管对于更强大的解决方案，您可能需要更多类似的东西：

```
def __init__(self):
    if not hasattr(self.__class__, 'inited'):
        self._allsp = []
        self.__class__.inited = True 
```

请注意，除非您将 init 功能包装在某种锁中，否则这不是线程安全的。

正如@mgilson 在他的回答中所回避的那样，如果您尝试在 Python 中创建单例，您可能应该只使用类属性而不是实例属性，并查看将类完全分开是否有意义开始，或将其折叠到其他一些非单例类中。还有一种模式，即[borg 模式](http://code.activestate.com/recipes/66531/)，当 singetons 和 Python 在同一段中被提及时，它经常被提及。

# linq-to-entities - 实体框架一对多单向连接

> ID：14709957
> 
> 赞同：1
> 
> 时间：2013-02-05T14:34:56.843
> 
> 标签：linq-to-entities, ef-code-first, entity-framework-5, foreign-key-relationship

我有这两张表：

```
CREATE TABLE [MIS].[Logging](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [MachineName] [nvarchar](255) NULL,
    [LogSource] [nvarchar](255) NOT NULL,
    [LogSourceVersion] [nvarchar](255) NULL,
    [LogLevel] [nvarchar](255) NOT NULL,
    [LogMessage] [nvarchar](max) NOT NULL,
    [LogDetailLocation] [nvarchar](255) NULL,
    [LogTime] [datetime] NOT NULL,
 CONSTRAINT [PK_Logging] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
))

CREATE TABLE [MIS].[LoggingLevels](
    [LoggingLevelName] [nvarchar](255) NOT NULL,
    [LoggingLevelValue] [int] NULL,
 CONSTRAINT [PK_LoggingLevels] PRIMARY KEY CLUSTERED 
(
    [LoggingLevelName] ASC
)) 
```

而这两个表类：

```
public class Logging
{
    public int Id { get; set; }
    public string MachineName { get; set; }
    public string LogSource { get; set; }
    public string LogSourceVersion { get; set; }
public string LogDetailLocation { get; set; }
public DateTime LogTime { get; set; }
    public string LogMessage { get; set; }

//public string LogLevel { get; set; }
public LoggingLevel Level { get; set; }
}

public class LoggingLevel
{
    public int LoggingLevelValue { get; set; }
    public string LoggingLevelName { get; set; }
} 
```

我的问题是使用 fluent API 定义关系，您可以看到从 Logging 到 LoggingLevel 的外键，但我不希望 LoggingLevel 类上的相应日志集合。我尝试了以下几种组合，包括`.WithRequiredDependant`and `.WithRequiredPrincipal`：

```
 modelBuilder.Entity<Logging>()
                .HasRequired(l => l.Level)
                .WithOptional()
                .Map(l => l.MapKey("LoggingLevelName")); 
```

这永远不会使连接正确，这是来自 LoggingLevel 表的数据，以及来自日志记录表的一些示例行。

```
LoggingLevelName LoggingLevelValue
---------------- -----------------
ALL              -2147483648
DEBUG            30000
INFO             40000
WARN             60000
ERROR            70000
FATAL            110000
OFF              2147483647

id          MachineName LogSource LogSourceVersion LogLevel   LogMessage LogDetailLocation LogTime
----------- ----------- --------- ---------------- ---------- ---------- ----------------- -----------------------
115170694   redacted    redacted  17               INFO       redacted   redacted          2013-01-29 04:00:02.420
115170695   redacted    redacted  (null)           INFO       redacted   redacted          2013-01-29 04:00:03.587
115170696   redacted    redacted  (null)           INFO       redacted   redacted          2013-01-29 04:01:01.357
115170697   redacted    redacted  NULL             INFO       redacted   redacted          2013-01-29 04:01:01.357
115170698   redacted    redacted  10               INFO       redacted   redacted          2013-01-29 04:01:01.933
115170699   redacted    redacted  17               INFO       redacted   redacted          2013-01-29 04:01:33.320
115170700   redacted    redacted  (null)           INFO       redacted   redacted          2013-01-29 04:02:29.990
115170701   redacted    redacted  (null)           INFO       redacted   redacted          2013-01-29 04:02:30.000
115170702   redacted    redacted  (null)           INFO       redacted   redacted          2013-01-29 04:02:30.040
115170703   redacted    redacted  (null)           INFO       redacted   redacted          2013-01-29 04:02:30.243 
```

这是我正在尝试运行的示例 linq 查询：

```
 var results = (from log in db.Loggings
                   where log.Level.LoggingLevelValue >= 60000
                         && log.LogTime >= filterDate
                   orderby log.LogTime descending
                   select log);
    return results.ToList(); 
```

* * *

通过使用更新结果：

```
 modelBuilder.Entity<Logging>()
                .HasRequired(l => l.Level).WithMany(); 
```

这是运行我的查询时生成的 SQL：

```
exec sp_executesql N'SELECT 
[Project1].[Id] AS [Id], 
[Project1].[MachineName] AS [MachineName], 
[Project1].[LogSource] AS [LogSource], 
[Project1].[LogSourceVersion] AS [LogSourceVersion], 
[Project1].[LogDetailLocation] AS [LogDetailLocation], 
[Project1].[LogTime] AS [LogTime], 
[Project1].[LogMessage] AS [LogMessage], 
[Project1].**[Level_LoggingLevelName]** AS [Level_LoggingLevelName]
FROM ( SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[MachineName] AS [MachineName], 
    [Extent1].[LogSource] AS [LogSource], 
    [Extent1].[LogSourceVersion] AS [LogSourceVersion], 
    [Extent1].[LogDetailLocation] AS [LogDetailLocation], 
    [Extent1].[LogTime] AS [LogTime], 
    [Extent1].[LogMessage] AS [LogMessage], 
    [Extent1].**[Level_LoggingLevelName]** AS [Level_LoggingLevelName]
    FROM  [MIS].[Logging] AS [Extent1]
    INNER JOIN [MIS].[LoggingLevels] AS [Extent2] ON [Extent1].[Level_LoggingLevelName] = [Extent2].[LoggingLevelName]
    WHERE ([Extent2].[LoggingLevelValue] >= @p__linq__0) AND ( CAST( [Extent1].[LogTime] AS datetime2) >= @p__linq__1)
)  AS [Project1]
ORDER BY [Project1].[LogTime] DESC',N'@p__linq__0 int,@p__linq__1 datetime2(7)',@p__linq__0=60000,@p__linq__1='2013-02-04 00:00:00' 
```

我在查询中将 ** 放在错误的字段周围，但粗体在代码部分中不起作用。

这是我完整的 fluent API 配置：

```
 modelBuilder.Entity<Logging>().ToTable("Logging", "MIS");
    modelBuilder.Entity<Logging>().HasKey(l => l.Id);

    modelBuilder.Entity<LoggingLevel>().ToTable("LoggingLevels", "MIS");
    modelBuilder.Entity<LoggingLevel>().HasKey(ll => ll.LoggingLevelName);

    modelBuilder.Entity<ProblemResolution>().ToTable("ProblemResolutions", "MIS");
    modelBuilder.Entity<ProblemResolution>().HasKey(r => r.Id);

    modelBuilder.Entity<Logging>()
                .HasRequired(l => l.Level).WithMany(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:50:38.163

好吧，你想创建一个一对多的关系，对吧？

一个`LoggingLevel`可以有很多`Logging`，一个`Logging`必须有一个`LoggingLevel`。

您配置关系的方式将使 EF 以一对一的方式创建它。

要使其正确地成为一对多，您必须调用`WithMany`而不是`WithOptional`：

```
HasRequired(l => l.Level).WithMany().Map(p => p.MapKey("LogLevel")) 
```

由于用作外键的列在数据库中称为LogLevel，因此必须通过方法告诉EF ，并以正确的列名`Map`调用方法。`MapKey`

否则，它会按照约定生成列名。它使用导航属性名称和目标类型的键属性名称，并附加值。

在您的情况下，这会导致`Level_LoggingLevelName`，这是不正确的。所以你必须手动映射列名。

# variables - 将php变量注入lessphp 0.3.8

> ID：14709962
> 
> 赞同：0
> 
> 时间：2013-02-05T14:35:09.523
> 
> 标签：variables, lessphp

我正在尝试使用 lessphp 文档中描述的方法将一些 php 变量注入到我的 less css 中。我可以：

```
$lc = new lessc;
$lc->setVariables(array("stylesheetURI" => "foo/bar")); 
```

这最终让我可以做到：

```
background-image: url("@{stylesheetURI}/img/logo.jpg"); 
```

结果是：

```
background-image: url("foo/bar/img/logo.jpg"); 
```

这一切都很完美，就像一个魅力......

但是，我更愿意将完整的 URL 添加到我的图像路径中。所以我在做：

```
$lc = new lessc;
$lc->setVariables(array("stylesheetURI" => "http://mydomain.com/foo/bar")); 
```

但这会导致：

```
background-image: url("http/img/logo.jpg"); 
```

这显然是错误的。有没有其他人看到这个问题？我已经在lessc.inc.php 类中进行了挖掘，但它有点像野兽，我还没有设法找到问题所在。我认为它与结肠有关 - 有人知道如何逃脱吗？我尝试了反斜杠，但这不起作用。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:53:45.160

我试试

```
$less = new lessc;
$less->setVariables(array(
    'rdir'=> '"/resources/default"'
));
echo $less->compileFile($lessFileName); 
```

我有更少的文件

```
img{
    background-image: url(@{rdir}/img.jpg);
} 
```

在输出中我有：

```
img {
  background-image: url(/resources/default/img.jpg);
} 
```

当我尝试

```
$less->setVariables(array(
    'rdir'=> '"http://example.com/resources/default"'
)); 
```

我明白了

```
img {
  background-image: url(http://example.com/resources/default/img.jpg);
} 
```

lessphp v0.3.9 你可以尝试添加带引号的字符串变量 '" [http://example.com/](http://example.com/) "'

# javascript - Javascript 查看 HTML 切换

> ID：14709964
> 
> 赞同：4
> 
> 时间：2013-02-05T14:35:18.463
> 
> 标签：javascript, jquery

我正在开发一个所见即所得的编辑器，因为我发现的大多数编辑器都不像我希望的那样工作。

我已经完成了大部分工作，“粗体、斜体、前景色、背景色等”，但我现在遇到的问题是制作**视图代码**按钮。

我想要发生的是当用户点击他们看到代码的按钮时，如果他们再次点击它，它会切换回 html。

我努力了

```
$('#wysiwyg').text($('#wysiwyg').html()); 
```

它完全符合我的要求，但它没有保留换行符，因此所有`<p>`标签将在一行中一起运行。有没有人有更好的解决方案来保持换行符，所以`<p>`如果你查看了html，如果有类似的换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:49:10.233

您可以`white-space:pre`在切换到**查看代码**模式时添加一个。那应该可以正常工作：http: [//jsfiddle.net/rNPJA/](http://jsfiddle.net/rNPJA/)

显示如何在两者之间切换的解决方案代码

```
if ($(this).data('wysiwyg-action') == "changeview") 
  if ($('#wysiwyg').css('white-space') != "pre")
    $('#wysiwyg').text($('#wysihtml-content').html()).css({ 'white-space':'pre' })
  else
    $('#wysiwyg').html($('#wysihtml-content').text()).css({ 'white-space':'normal' }) 
```

# c# - 在 c sharp 中向许多用户发送邮件

> ID：14709968
> 
> 赞同：0
> 
> 时间：2013-02-05T14:35:26.223
> 
> 标签：c#, visual-studio-2010, email, sendmail

我在 vs 2010 中使用 c#，我创建了一个类和方法来通过 smtp 发送邮件，我需要向许多用户发送相同的邮件，我制作了一个列表，其中包含一个查询以在我的数据库中选择所有邮件而不是写它们在我的代码中，但我收到此错误消息**“尝试访问您的访问权限不允许的套接字”**，并且我无法向许多用户发送电子邮件，这是我的代码：

在“发送按钮”

```
private void enviar()
{
    System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage();
    Enviar_Mail envi_mail = new Enviar_Mail();
    List<string> en_mail = envi_mail.SqlSelectMails();
    foreach (string mail_bci in en_mail)
    {
        msg.To.Add(mail_bci);
    }

    msg.From = new MailAddress("soporte.web@ipsos.com", "AaBb1234",
    System.Text.Encoding.UTF8);

    msg.Subject = "prueba mails aviso y acusete bci";
    msg.SubjectEncoding = System.Text.Encoding.UTF8;
    msg.Body = "saludos";
    msg.BodyEncoding = System.Text.Encoding.Unicode;
    msg.IsBodyHtml = true;
    SmtpClient client = new SmtpClient();
    client.Credentials = new System.Net.NetworkCredential("soporte.web", "AaBb1234");
    client.Port = 25;
    client.Host = "smtp0.chile.latam.ipsos";
    client.EnableSsl = false;
    try
    {
        client.Send(msg);
    }
    catch (System.Net.Mail.SmtpException ex)
    {
        Console.WriteLine(ex.Message);
        Console.ReadLine();
    }
} 
```

在我的课上：

```
public List<string> SqlSelectMails()
{
    List<string> dir_mails = new List<string>();
    string stSql = "select mail_usuario from mail_usuario";
    Bd mibd = new Bd();
    SqlDataReader sdr = mibd.sqlExecute(stSql);
    while (sdr.Read())
    {
        dir_mails.Add(sdr["mail_usuario"].ToString());
    }
    return dir_mails;
} 
```

提前致谢。

# php - PHP 两行从文件中读取并放入变量

> ID：14709969
> 
> 赞同：0
> 
> 时间：2013-02-05T14:35:29.340
> 
> 标签：php, lines

我现在有以下语法的 PCB 文件：

```
PAD EL 81 81 23 AL NP "" 1124 3836 0 0 0
PAD EL 81 81 23 AL NP "" 1524 3836 0 0 0
PAD EL 81 81 23 AL NP "" 1524 3684 0 0 0
PAD EL 81 81 23 AL NP "" 1924 3684 0 0 0
PAD EL 81 81 23 AL NP "" 3324 3838 0 0 0
PAD EL 81 81 23 AL NP "" 3724 3838 0 0 0 
```

现在我需要将数字转换为变量，我需要得到：

```
X1=1124   Y1=3836
X2=1524   Y2=3836
X3=1524   Y3=3684
X4=1924   Y4=3684 
```

这样我就可以使用 $IsResistorVeritcal=X4-X3=400 或 $IsResistorHorizo​​ntal=X2-X1=400 获得组件的距离。

我的PHP知识不是很好，所以我需要你的帮助。

谢谢。

这是使用每个奇数或烤箱数提取 x 坐标的代码......进展不大:)

```
/* Open File */
$fp = fopen($fileName, "r");

/* Read File */
while (!feof($fp))
{
    /* read one line */
    $line = fgets($fp);

    /* if is pad */
    if (strpos($line,'PAD') !== false)
    {
        $ps = explode('" ', $line);

        $points = array();

        foreach($ps as $point){
            $exploded =  explode(" ", $point);
            $points["x".$i] = $exploded[0];
            $points["y".$i] = $exploded[1];
            $i++;
        }

        $i=$i-1;
        if ($i % 2 == 0)
        {
            echo 'x'.$i.' = '.$points["x".$i].'<br/>';
        } else {
            echo 'x'.$i.' = '.$points["x".$i].'<br/>';
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:43:14.503

也许你应该从[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)和[explode](http://php.net/manual/en/function.explode.php)开始。

这样您就可以读取文件，然后将内容拆分为一个数组（新行和空格）。

例如

```
$sContent = file_get_contents($sFile);
$aContent = explode("\n\r", $sContent); //or just "\n"
print_r($aContent); 
```

# python - 从 Django 中的 FilteredSelectMultiple 小部件中获取所选值

> ID：14709973
> 
> 赞同：1
> 
> 时间：2013-02-05T14:35:35.673
> 
> 标签：python, django, forms, widget, admin

在 Django admin 中，有谁知道保存表单时如何从 FilteredSelectMultiple 小部件中获取所选值？

```
class ControllerForm(forms.ModelForm):
terminal = forms.ModelMultipleChoiceField(queryset=[])

    def __init__(self, *args, **kwargs):
        super(ControllerForm, self).__init__(*args, **kwargs)
        self.fields['terminal'].widget = widgets.FilteredSelectMultiple('terminals', False)
        self.fields['terminal'].help_text = "Select the terminals which are to be added to the group."
        self.fields['terminal'].required = False
        self.fields['terminal'].label = "Select terminal(s)"
        self.fields['terminal'].choices = [(t.id, str(t)) for t in Terminal.objects.filter(associated=False)]
    class Meta:
        model = Controller
class ControllerAdmin(admin.ModelAdmin):
    """
    Controller admin form customization.
    """
    list_display = ('name', 'group',)

    form = ControllerForm

admin.site.register(Controller, ControllerAdmin) 
```

编辑：我想我可以访问 save_model 方法中的值。（[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:03:10.347

我已经找到了解决方案。使用 ModelAdmin 中可用的 save_model 方法，可以访问 form.cleaned_data 字典中的选定对象。

```
def save_model(self, request, obj, form, change):

    for terminal in form.cleaned_data['terminal']:
        ...

    obj.save() 
```

结帐[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)和[https://docs.djangoproject.com/en/dev/topics/forms/ ?from=olddocs](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs) 有关此方法的更多详细信息。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:44:07.033

表格.py

```
class SampleWidget(forms.Form):
    date=forms.CharField(widget=AdminDateWidget,max_length=100)
    users = forms.ModelMultipleChoiceField(queryset=User.objects.all(),widget=FilteredSelectMultiple(("Users"), False)) 
```

我的寺庙.html

```
<form action="." method="POST">
{{ form.as_p }}
{{ form.media }}
{% csrf_token %}
<p><input type="submit" value="Submit"></p>
</form> 
```

如果您有这样的模板和表单设置，小部件应该毫无问题地发布正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:45:37.720

参考这个：

这只是使用filteredselectmultiplte 小部件的示例

[http://jayapal-d.blogspot.com/2009/08/reuse-django-admin-filteredselectmultip.html](http://jayapal-d.blogspot.com/2009/08/reuse-django-admin-filteredselectmultip.html)

# mysql - 将文本和组合框中的 Windows 表单数据插入 mysql 数据库

> ID：14709975
> 
> 赞同：0
> 
> 时间：2013-02-05T14:35:41.930
> 
> 标签：mysql, vb.net, winforms

我正在开发一个允许用户通过表单添加公司的应用程序。ia 在 INSERT 查询中努力将数据插入 MySQL 数据库。查询是合理的，因为它在直接应用时会起作用，但是应用程序不会提交......这是我下面的代码......

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

           sqlconnection.Close()

Dim com As New MySqlCommand("INSERT INTO companies VALUES(company_id, '" & TextBox1.Text & "', '" & RichTextBox1.Text & "', '" & TextBox4.Text & "', '" & TextBox5.Text & "', '" & ComboBox6.Text & "', '" & TextBox2.Text & "', '" & TextBox7.Text & "', '" & TextBox3.Text & "', '" & ComboBox2.Text & "', '" & RichTextBox3.Text & "', '" & ComboBox5.Text & "', '" & RichTextBox2.Text & "', '" & ComboBox7.Text & "', '" & ComboBox1.Text & "', '" & ComboBox4.Text & "';", con)

        con.Open()

        com.ExecuteNonQuery()

        con.Close()

        MsgBox("committed") 
```

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T14:43:40.257

这就是你不使用参数化查询所得到的。
可能在您的一个或多个文本框或丰富文本框中，撇号会导致您的字符串连接混淆所有内容。
假设 TextBox1 包含`'Acme's Inc.'`. 现在您的字符串查询文本变为

```
INSERT INTO companies VALUES (company_id, 'Acme's Inc.', 
                                               ^ 
```

看到盲目的字符串连接导致的语法错误了吗？

我无法在此处完全替换您的代码，因为有太多名称无法描述的控件。但是你应该写这样的东西

```
Dim cmdText = "INSERT INTO companies VALUES (@companyID, @param1, @param2, ....etc")
Dim com as New MySqlCommand(cmdText, con)
com.Parameters.AddWithValue("@companyID", company_id)
com.Parameters.AddWithValue("@param1", textbox1.Text)
.... 'and so on'
con.Open()
com.ExecuteNonQuery() 
```

除了引用问题，正确表示底层数据库系统的日期和十进制数字还有另一个大问题。[SQL 注入](https://stackoverflow.com/questions/14709975/inserting-windows-form-data-from-text-and-combo-boxes-into-mysql-database/14710146#14710146)（这只是一个指导性链接，因为 SQL 注入是一个非常大的话题）

所以最后

**切勿使用字符串连接来构建 SQL 查询。**

# nhibernate - 如何设置 NHibernate 事务的超时

> ID：14709978
> 
> 赞同：6
> 
> 时间：2013-02-05T14:35:51.197
> 
> 标签：nhibernate, transactions, fluent-nhibernate

我需要在单个事务中完成大量数据库处理，包括使用 NHibernate 进行的一些处理。

为了让一切都在同一个事务中工作，我使用 NHibernate 的 Session 来启动它，并为其中的其他工作征集命令。

一切顺利，直到我提交。那时我得到一个事务超时。

如何将 NHibernate 事务超时值设置得足够高？

我们使用 FluentNHibernate。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:29:54.770

经过一些试验和很多错误，我发现了这个：

NHibernate 似乎采用了“TransactionManager.DefaultTimeout”值。

它可以通过设置

```
 <system.transactions>
     <defaultSettings timeout="01:00:00" />
 </system.transactions> 
```

在应用程序/网络配置中

如果将其设置为高于 TransactionManager.MaximumTimeout 的值，则事务超时将默认为该值。如果您需要更长的时间，您可以通过更新 .Net 框架版本的“machine.config”来延长该时间：

```
<system.transactions>
    <machineSettings maxTimeout="01:00:00" />
</system.transactions> 
```

# rest - .NET Web API。使用用户名和密码对客户端进行身份验证，而不使用基本身份验证

> ID：14709979
> 
> 赞同：1
> 
> 时间：2013-02-05T14:35:51.133
> 
> 标签：rest, asp.net-web-api, restful-authentication

我需要你的帮助。

我使用 .NET Web API 开发了一些 REST 服务。

这些服务必须使用用户名和密码对客户端进行身份验证。

我在 Internet 上找到的解决方案是“基本身份验证”。

最大的问题是我不能使用 SSL 来保护通信。我没有HTTPS。

使用没有 SSL 的基本身份验证不是一个好的解决方案。

我无法在 Internet 上搜索找到可以使用用户名和密码通过 http 对客户端进行身份验证的解决方案。

请问你能帮我吗？

总结一下，我需要使用用户名和密码在 Web.API 中对用户进行身份验证。我不能使用 SSL。我的通讯是在 HTTP 上。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:37:42.240

您可以使用 ASP.NET 成员资格提供程序：

[http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:54:15.560

基本上 - 你不能那样做。

当然，有些方案不会通过线路以明文形式传输凭据 - 但它*不仅*与凭据有关。所有的数据都以明文形式通过网络传输，您没有服务器的身份验证、没有机密性、没有完整性保护、没有重放保护等……</p>

如果您不关心所有这些功能 - 为什么要使用（安全）身份验证呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T14:05:42.433

没有 SSL，基本不安全，但由于中间人攻击，摘要也不安全。我建议您使用一些基于公钥/私钥的方法，例如 HMAC 或像保罗所说的使用哈希 + 盐进行加密。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:43:24.793

我知道的用户名+密码身份验证的唯一其他常见方法是[摘要访问身份验证](http://en.wikipedia.org/wiki/Digest_access_authentication)。[这里](http://lbadri.wordpress.com/2012/08/10/digest-authentication-with-asp-net-web-api-part-1/)有一个博客展示了 WebApi 的示例。

这将在没有 SSL 的情况下为您提供**一些保护，因为它使用哈希；**但是，在完全阅读和理解这种方法的**所有**[缺点](https://stackoverflow.com/questions/599048/http-digest-authentication-versus-ssl)之前，我不会真正提倡它。

# nginx - nginx子目录下的redmine

> ID：14709982
> 
> 赞同：0
> 
> 时间：2013-02-05T14:36:00.823
> 
> 标签：nginx, redmine, thin

我的虚拟主机配置：[http://pastebin.com/ZyXUmQtx](http://pastebin.com/ZyXUmQtx)（本次安装只有一个域）

在过去的两天里，我一直在绞尽脑汁和谷歌寻找解决方案，但似乎无法找到一个可行的解决方案。

我的设置（来自上述配置）：

*   IP.Board 3.4 安装在 %root_domain%/forums/
*   IP.Content 2.3 安装在 %root_domain/forums/ （`index.php`在顶层具有外部访问权限）
*   Redmine 2.2.2 安装在`/usr/share/redmine`（这是有效的，因为 Thin 正在运行并且两个日志文件中都没有错误）
*   陈旧的 phpMyAdmin 配置`/usr/share/phpmyadmin/`也不能正确加载 html/css。
*   符号链接`/usr/share/redmine/public`到`/srv/www/tiberian-genesis.net/public_html/redmine`

**我正在尝试让 redmine 设置在 下运行`%root_domain%/redmine/`**，但我不断从我的 IP.Content 安装中获得 404 页面。

访问它会将我带到网址：（`/redmine/login?back_url=http://redmine_thin_servers/redmine/`现在注意到它，它似乎不喜欢我的上游......）

如果有人请求精简配置文件：

```
---
pid: /var/run/thin/redmine.pid
group: tgmod
prefix: /redmine
timeout: 30
log: /var/log/thin/redmine.log
max_conns: 1024
require: []

max_persistent_conns: 512
environment: production
user: tgmod
servers: 1
daemonize: true
chdir: /usr/share/redmine
socket: /var/run/thin/redmine.sock 
```

我在这里没有想法。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:13:32.333

我刚刚结束了在子域上设置它。我想尝试在子目录上代理它，但我的主网站一直在干扰规则。

# .net - 是否可以跳出当前的 TransactionScope 并插入数据

> ID：14709987
> 
> 赞同：0
> 
> 时间：2013-02-05T14:36:19.310
> 
> 标签：.net, database, transactions, transactionscope

考虑以下：

```
using (var outerScope = new TransactionScope())
{
    InsertDataInTableOne();
    InsertDataInTableTwo();
    InsertDataInTableThree();
    outerScope.Complete();
} 
```

现在我想必须在事务`InsertDataInTableOne`之外运行。`outerScope`这是一个简化的表示，因为`TransactionScope`创建了几个调用链，所以我不能只是把调用放在创建`InsertDataInTableOne`之外。`TransactionScope`

我也知道这可能不是一个好的做法，我们正在努力解决问题。但我们现在需要这个快速修复。

```
using (var outerScope = new TransactionScope())
{
    using (var innerScope = new TransactionScope(TransactionScopeOption.RequiresNew))
    {
        InsertDataInTableOne();
        innerScope.Complete();
    }
    InsertDataInTableTwo();
    InsertDataInTableThree();
    outerScope.Complete();
} 
```

那没有用。我什至尝试先创建一个`TransactionScope`with `Suppress`，然后再创建一个`RequiresNew`.

那么是否可以立即在数据库中插入数据，有效地忽略您在数据库中的事实`TransactionScope`？

连接是在这些方法之外建立的（实际上是在进入被调用的服务时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:31:01.297

不确定这是否会帮助任何人，但你永远不知道。问题在于定制的公司框架。我相信，这种实现使得嵌套事务变得困难。我们现在通过移除外部事务（向上几层）并在我们的块中创建两个单独的事务来修复它：

```
using (var scopeOne = new TransactionScope())
{
    InsertDataInTableOne();
    scopeOne.Complete();
}

using (var scopeTwo = new TransactionScope())
{
    InsertDataInTableTwo();
    InsertDataInTableThree();
    scopeTwo.Complete();
} 
```

同样，这是一个非常特定于我们代码的解决方案。使用`RequiresNew`通常应该可以解决问题。所以如果它不起作用，也许先看看你自己的代码；）

我不是全能公司框架的忠实粉丝的另一个原因。

# java - 处理来自 CXF FaultOutInterceptor 的 XML 和 JSON 响应

> ID：14709995
> 
> 赞同：1
> 
> 时间：2013-02-05T14:36:42.087
> 
> 标签：java, cxf, handler, jax-rs, interceptor

正如我所注意到的，在我的 中，如果我在 say ( )`CXF JaxRS service`中抛出异常并且不提供任何默认值，则将负责构建应返回的响应。`READ phase``IN interceptor``FaultOutInterceptor``XMLFaultOutInterceptor``(which is always an XML)`

现在，我希望能够以请求服务的格式返回响应：JSON 或 XML 或其他。

我在网上找到了这样的东西：

```
public class JsonFaultOutHandlerInterceptor extends JAXRSOutInterceptor
{
    public JsonFaultOutHandlerInterceptor() {
        getBefore().add(LoggingOutInterceptor.class.getName());
    }

    @Override
    public void handleMessage(Message message) {
        ...
        message.getInterceptorChain().abort();
    }
} 
```

我已经在 中配置了它`outInterceptor`，我应该有条件地中止（如果请求类型是`application/Json`）还是不中止（如果请求类型是`application/xml`）拦截器链？（我不确定请求类型信息是否已经可用。此外，不知何故，中止链似乎不太正确）

如果响应达到`JAXRS filters`，使用`ExceptionMapper<T>`我会很好地处理响应。但是当出现异常时`INinterceptor`，我有点失落。

什么是能够定义 a 的好方法`FaultOutInterceptor`？