# StackOverflow 问答 13714000-13714999

# javascript - 在 Chrome 扩展程序中加载包含 Javascript 的页面而不显示该页面

> ID：13714002
> 
> 赞同：0
> 
> 时间：2012-12-04T23:45:45.737
> 
> 标签：javascript, google-chrome-extension, screen-scraping, offscreentabs

我正在构建一个 Chrome 扩展程序，它需要查看 Google 网上论坛主题搜索的结果（页面 URL 是[https://groups.google.com/forum/?fromgroups=#!searchin/opencomments-site-discussions/subject](https://groups.google.com/forum/?fromgroups=#!searchin/opencomments-site-discussions/subject) :{some topic} 我可以通过查找某个类名来判断是否存在匹配项）。不幸的是，它正在寻找的字段直到页面的 Javascript 运行后才被创建，所以我不能简单地查看来自页面的原始 HTML

```
try {
  var request = new XMLHttpRequest();
  request.open("GET", url, false);
  request.send(null);
} catch (e) {
  ....
}
if (request.status == 200) {
  var rawText = request.responseText;
  ...
} 
```

有谁知道是否可以在不显示页面的情况下加载整个页面，包括执行 Javascript？在这个问题上一直在拉我的头发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:04:55.460

看看[`offscreenTabs`API](http://developer.chrome.com/extensions/experimental.offscreenTabs.html)（目前是实验性的）。
使用 创建选项卡后[`chrome.experimental.offscreenTabs.create`](http://developer.chrome.com/extensions/experimental.offscreenTabs.html#method-create)，您可以使用`chrome.tabs.sendMessage`或`chrome.tabs.executeScript`做任何您想做的事情。

如果您需要灵感，请查看[此完整演示](https://stackoverflow.com/questions/11606135/how-to-produce-an-image-by-chrome-experimental-offscreentabs-todataurl-correctly/11632292#11632292)。

根据规范，只能在真实选项卡中创建离屏选项卡（否则，您将收到“Experimental.offscreenTabs.create 期间出错：未找到当前选项卡”）。在我的[另一个演示](https://stackoverflow.com/questions/11606135/how-to-produce-an-image-by-chrome-experimental-offscreentabs-todataurl-correctly/11632292#11632292)中，我为此使用了一个选项页面。如果您不想使用这样的页面，请使用 创建一个新选项卡`chrome.tabs.create`，做任何您想做的事情，然后使用`window.close()`关闭选项卡。

因此，您毕竟将打开一个（隐藏的）选项卡（尽管页面本身不可见）。**使用当前的 API，没有其他方法可以在不打开选项卡的情况下呈现隐藏选项卡（除非您想在后台页面的 iframe 中呈现页面......）**。如果您不介意实际的选项卡显示在选项卡栏中，请使用`chrome.tabs.create({active:false, url:'...'})`. 如果保持标签对用户真正不可见很重要，请继续以下演示：

## 使用 offscreenTabs API 进行演示

在此示例中，我将显示一个包含不可见选项卡标题的警报。我可以立即从内容脚本中显示此警报，但是，我将把数据传递到后台页面，以演示该功能：

后台脚本（`background.js`）：

```
 chrome.extension.onMessage.addListener(function(message, sender, sendResponse) {
     var tab = sender.tab;
     if (tab && tab.index === -1) { // <-- Detect offscreen tab
         if (message.method == 'title') {
             // Close helper tab:
             chrome.extension.sendMessage({method: 'finishedTab', id: tab.id});
             alert('Got title from ' + tab.url + ' :\n' + message.result);
         }
     }
 });

 chrome.browserAction.onClicked.addListener(function() {
     chrome.tabs.create({
        active: false,
        url: chrome.extension.getURL('launcher.html')
     });
 }); 
```

内容脚本（`contentscript.js`）：

```
chrome.extension.sendMessage({
    method: 'title',
    result: document.title
}); 
```

`launcher.html`包含`<script src="launcher.js"></script>`. `launcher.js`：

```
var offscreenTabId;
// Close the tab when the stuff is done
chrome.extension.onMessage.addListener(function(message) {
    if (message.method == 'finishedTab' && message.id === offscreenTabId) {
        window.close();
    }
});
// Create invisible tab
var createProperties = {url: "https://stackoverflow.com/"};
chrome.experimental.offscreenTabs.create(createProperties, function(offscreenTab) {
    offscreenTabId = offscreenTab.id;
}); 
```

清单文件：

```
{
    "name": "Get information from DOM in an invisible tab",
    "description": "See https://stackoverflow.com/q/13714002",
    "version": "1",
    "manifest_version": 2,
    "permissions": ["experimental", "<all_urls>"],
    "background": {"scripts": ["background.js"] },
    "content_scripts": [{
        "js": ["contentscript.js"],
        "matches": ["<all_urls>"]
    }],
    "browser_action": {}
} 
```

# c# - 将 int 转换为 6 个字符的字母数字字符串的算法

> ID：13714006
> 
> 赞同：1
> 
> 时间：2012-12-04T23:46:04.083
> 
> 标签：c#, algorithm, int

我有一个 ID 字段，当添加新记录时会自动递增 1。我不想按原样使用数字 ID，而是将其转换为由 0-9A-Z（无小写字母）组成的 6 个字符串，格式如下：

```
A00000 
```

数字应该从 0-9 递增，然后是 AZ。

**例子**

例如，如果我要对数字进行编码`7`，它应该返回：

```
A00007 
```

如果我编码`13`它应该返回的数字：

```
A0000D 
```

如果我编码`36`它应该返回的数字：

```
A00010 
```

希望这是有道理的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:00:12.453

建议：整数值加上 604661760。那是 的以 10 为底的值`A00000`，解释为以 36 为底的数字 ( = 10 * 36 ^ 5 )。

然后将结果编码为 base 36。

根据您的数据范围，您可能希望在添加 604661760 之前将其提升`int`为 a 。`long`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:52:38.110

您在这里所拥有的是从以 10 为底的数字到以 36 为底的数字的转换。这是一个从基数 10 转换为基数 K 的算法。修改它以满足您的需要：

[http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Data/toBaseK.html](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Data/toBaseK.html)

# javascript - 用于查找图像的 javascript

> ID：13714013
> 
> 赞同：0
> 
> 时间：2012-12-04T23:46:34.457
> 
> 标签：javascript, jquery

我正在尝试使用以下内容在页面上查找图像：

```
var Images = jQuery('img[src$=".jpg"], img[src$=".jpeg"]'); 
```

[但是，它找不到像http://s1.reutersmedia.net/resources/r/?m=02&d=20121204&t=2&i=681048372&w=460&fh=&fw=&ll=&pl=&r=](http://s1.reutersmedia.net/resources/r/?m=02&d=20121204&t=2&i=681048372&w=460&fh=&fw=&ll=&pl=&r=CBRE8AM1T7A00)这样没有 jpg 扩展名的东西[世邦魏理仕8AM1T7A00](http://s1.reutersmedia.net/resources/r/?m=02&d=20121204&t=2&i=681048372&w=460&fh=&fw=&ll=&pl=&r=CBRE8AM1T7A00)

我怎么能找到这样的图像..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T23:53:28.690

如果您不想仅过滤 .jpg 图像，那么只需查找图像元素就足够了：

```
var $images = $('img'); 
```

或者，如果您只想要带有来源的图像，那么：

```
var $images = $('img[src]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:54:11.593

尝试

```
var $images = $('img[src]'); 
```

选择所有具有来源的图像..

# jquery - 它一直显示 NaN

> ID：13714016
> 
> 赞同：1
> 
> 时间：2012-12-04T23:46:47.710
> 
> 标签：jquery, html

我正在使用以下 HTML 代码来显示表格：

```
<form id="Marks" action="/u0877654/Mobile/individualmarks.php" method="post">   

<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>

<tr class="questiontd">
<td class="questionnumtd q<?php echo$questionId?>_qnum" name="numQuestion" rowspan="1">1 <input type="hidden" name="q1_ans_org" class="q1_ans_org" value="5"><input type="hidden" name="q1_ans" class="q1_ans" value="5"></td>
<td class="answermarkstd">
<input class="individualMarks q1_mark"  q_group="1" name="answerMarks[]" class="individualtext" type="text" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
<td class="noofmarkstd q1_ans_text"  q_group="1" rowspan="1"><strong>5</strong></td>
</tr>

<tr class="questiontd">
<td class="questionnumtd q<?php echo$questionId?>_qnum" name="numQuestion" rowspan="1">2 <input type="hidden" name="q2_ans_org" class="q2_ans_org" value="5"><input type="hidden" name="q2_ans" class="q2_ans" value="5"></td>
<td class="answermarkstd">
<input class="individualMarks q2_mark"  q_group="1" name="answerMarks[]" class="individualtext" type="text" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
<td class="noofmarkstd q2_ans_text"  q_group="1" rowspan="1"><strong>5</strong></td>
</tr>
</tbody>
</table>

<p><input id="submitBtn" name="submitMarks" type="submit" value="Submit Marks" /></p>

</form> 
```

下面是表格的样子：

```
Question No.     Marks Per Answer          Marks Remaining
    1            (value=5 text input)         0
    2            (blank text input)           5 
```

现在我已经使用 jquery 为上面的表创建了验证。如果一行包含除 0 以外的任何数字（更高或更低），那么它将显示一条警报，说明：

**大于 0：**

```
You have errors on Question Number: 
Your Total Marks Remaining does not equal 0 

• You Have NaN Marks Remaining 
```

**小于 0：**

```
You have errors on Question Number: 
Your Total Marks Remaining does not equal 0 

• You Need To Remove NaN Marks 
```

另一个验证是，如果用户在“Marks Per Answer”列下将文本输入留空，则它应该在下面显示此消息：

```
You have errors on Question Number: 

• You have not entered in a value for all the Indivdiaul Marks textbox 
```

如您所见，我有两个问题。首先它不显示问题编号包含错误的编号，它应该显示包含错误的第一个问题的问题编号。

另一个问题是它一直显示 NaN。它应该显示需要删除多少标记才能使其变为 0 或添加多少标记才能使其变为 0。

上面的两个问题怎么解决？

这是我的 jQuery 代码：

```
function validation() {

    var alertValidation = "";
    var _qid = "";
    var _msg = "";

    $("[class*='q']").each(function (i) {
        var questions = parseInt($("[class*=q" + i + "_qnum]").text());
        var marks = parseInt($("[class*=q" + i + "_ans_text]").text());
        var txtinput = $("[class*=q" + i + "_mark]").val();
        _qid = questions;
        _msg = "You have errors on Question Number: " + _qid + "\n";

        if (txtinput == '' || txtinput == null) {
            alertValidation += "\n\u2022 You have not entered in a value for all the Indivdiaul Marks textbox\n";
        } else if (marks < '0') {

            alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) + " Marks";
        } else if (marks > '0') {

            alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks + " Marks Remaining";
        }

        if (alertValidation != "") {
            return false; //Stop the each loop 
        }

    });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:20:45.800

这样做时您正在比较字符串`$("[class*=q" + i + "_mark]").text() < '0'`，因此请尝试使用 !=（不等于）运算符与 <（小于）运算符。例子：

```
 $("[class*='q'").each(function (i) {
            var marks = parseInt($("[class*=q" + i + "_mark]").text());
            _qid = $(".q" + i + "_ans_org").text();
            _msg = "You have errors on Question Number: " + _qid + "\n";

            if (!this.value) {
                alertValidation += "\n\u2022 You have not entered in a value for all the Indivdiaul Marks textbox\n";
            }

            if ($("[class*=q" + i + "_mark]").text() != '0') {
                alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) + " Marks";
            } else {
                alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks + " Marks Remaining";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }    
        }); 
```

否则使用你的变量：

```
 $("[class*='q'").each(function (i) {
            var marks = parseInt($("[class*=q" + i + "_mark]").text());
            _qid = $(".q" + i + "_ans_org").text();
            _msg = "You have errors on Question Number: " + _qid + "\n";

            if (!this.value) {
                alertValidation += "\n\u2022 You have not entered in a value for all the Indivdiaul Marks textbox\n";
            }

            if (marks < 0) {
                alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) + " Marks";
            } else if (marks > 0) {
                alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks + " Marks Remaining";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }    
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:27:50.747

您需要使用 .val() 从输入中检索值：

```
_qid = $(".q" + i + "_ans_org").val();
_msg = "You have errors on Question Number: " + _qid + "\n"; 
```

**编辑：**您使用的是什么选择器？类选择器前面只是一个点：

```
var marks = parseInt($(".q" + i + "_ans_text").text()); 
```

# java - Spring + GWT 或 Spring 与 GWT

> ID：13714018
> 
> 赞同：22
> 
> 时间：2012-12-04T23:46:50.667
> 
> 标签：java, spring, gwt, requestfactory

# 背景

我正在使用 GWT、Java 和 EclipseLink 开发 Web 应用程序。这些选择中的每一个都是我为实现这个程序所做的选择。GWT 是唯一的选择，它与 Spring 之类的东西相比，它究竟是什么并没有明确的把握。现在，我使用 GWT 小部件来实现客户端，并使用 GWT RequestFactory 来实现来自 EclipseLink 的实体的服务器-客户端通信。

# 意见

所以我认为 GWT 主要是一个小部件库，具有用于服务器-客户端通信的简单框架。这与我看待 Spring 的方式非常相似，Spring 是一个小部件库，具有用于控制服务器-客户端通信的更高级和复杂的框架——它可能不像 GWT 那样方便地实现 AJAX。

因此，考虑到这些，我将 GWT 视为理解并最终使用 Spring 的垫脚石。然而，再次谷歌搜索这个主题，我遇到了几个主题，比如这个[和](https://stackoverflow.com/questions/1340216/gwt-and-spring-mvc-is-it-worth-it)那个似乎违背了 Spring 是什么以及这对 GWT 意味着什么的原始概念[。](https://stackoverflow.com/questions/4771479/gwt-spring-mvc-restful-web-services)

# 问题

1.  对 GWT 和 Spring 的看法是否存在误解？如果是这样，一些简短的指导点将不胜感激！
2.  Spring 框架中 GWT 小部件的对应部分是什么？
3.  Spring 框架中 GWT RequestFactory 的对应部分是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-05T09:03:30.927

这实际上取决于您计划如何`GWT`在应用程序中使用。

`GWT`最适合用于单主机页面 Web 应用程序。
这意味着所有的流同步和业务逻辑都是在客户端使用`GWT`.
这是`GWT`真正闪耀的地方（有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/8455435/jquery-vs-google-closure-va-gwt-pros-cons-for-large-web-application-developmen/8458169#8458169)）。

然而，如果你沿着这条路走下去，你最终会得到两个截然不同的应用程序。例如，您将拥有一个`GWT`使用 Spring 开发的前端和一个后端。您的后端（Spring 或您使用的任何东西）只会充当“数据存储”，为您提供要在 GWT 前端显示的数据。因此，您可能不会使用任何`Spring MVC's`功能。

当然，您也可以使用`Spring MVC`和使用 GWT，仅将 web 2.0ish 功能添加到您的站点，但对于这种用例，我建议您宁愿使用 jQuery、Closure 或其他 javascript 框架。

对于您的问题：

> 对 GWT 和 Spring 的看法是否存在误解？如果是这样，一些简短的指导点将不胜感激！

如果您`GWT`按预期使用（单个主机页面 Web 应用程序），那么您将不会使用 Spring 的 MVC 部分。您仍然可以使用**授权**、**身份验证**、**ORM**和 Spring 框架的许多其他组件，但是 GWT 处理所有视图。
Spring 或多或少只是作为 GWT 前端应用程序的数据存储。这就像拥有两个不同且独立的应用程序，它们通过通信协议（`RequestFactory`、、、`REST`等`RPC`）连接。

> Spring 框架中 GWT 小部件的对应部分是什么？

Spring Framework 中没有与 GWT 小部件真正对应的部分（可能对某些 JSF 进行了扩展）。Spring 是关于服务器端的，所以那里的所有视图都是在服务器端创建的。而 GWT 是关于客户端的。

> Spring 框架中 GWT RequestFactory 的对应部分是什么

`RequestFactory`**是前端应用程序 ( GWT** ) 和后端应用程序 ( **Spring** )之间的通信协议。当您使用时，`Spring MVC`您不需要任何通信协议，因为视图是在您已经拥有数据的服务器端生成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:05:49.433

GWT 不是一个小部件库，而是一个完整的框架，用于生成在客户端而不是服务器端运行的完整 Web 应用程序。基本区别在于 Spring（MVC 模式）以服务器为中心，因此它连接到 ddbb，执行业务逻辑并生成要发送给客户端的视图，因为 GWT（MVP 模式）在浏览器中运行呈现器，从而生成视图，它只是连接到服务器以获取结果或对象（远程方法）。

说，根据您的 GWT 应用程序，您可能需要或多或少的服务器端逻辑，以及 ddbb、spring 等其他元素。

关于何时选择 GWT 或任何其他框架的决定取决于您是否需要在浏览器中运行的丰富（类似桌面）应用程序。

从逻辑上讲，您可以将 GWT 和 spring 混合在任何复杂程度，但合乎逻辑的方式是让 spring 负责数据模型及其业务逻辑，而 GWT 完成其余的工作。

学习这种组合的最好方法是探索一个使用[Spring-roo](http://www.springsource.org/spring-roo)生成的小项目。它可以为 maven、spring、gwt、mvp 和 rf 创建一个完整的项目。只需安装 roo 1.2.2 并在 roo 控制台中运行这组命令：

```
project --topLevelPackage com.project.contacts
persistence setup --provider ECLIPSELINK --database HYPERSONIC_PERSISTENT
database properties set --key database.url --value jdbc:hsqldb:/var/tmp/contacts.db
entity jpa --class com.project.contacts.domain.Contact --testAutomatically
field string name --notNull --sizeMin 1 --sizeMax 30 --class ~.domain.Contact
field string surname --notNull --sizeMin 1 --sizeMax 30 --class ~.domain.Contact
field string phone --notNull --sizeMin 1 --sizeMax 15 --class ~.domain.Contact
web gwt setup
web gwt all --proxyPackage ~.client.proxy --requestPackage ~.client.request
quit 
```

然后执行

```
mvn gwt:run 
```

我看到的 roo 的主要问题是，当您修改模型时，它使用“aspectj”来更新托管分类，但是一旦设置了项目，您就可以使用 eclipse 删除 roo 依赖项和 aspectj 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T15:10:24.223

为您的后端查看 Objectify。方式更简单。

# excel - 如何在 Excel 中编辑图表的图例条目？

> ID：13714019
> 
> 赞同：13
> 
> 时间：2012-12-04T23:46:50.270
> 
> 标签：excel, charts

如下图，我画了三条线。图例条目系列 1、2、3 由 Excel 自动创建。我想将这些条目编辑为，例如第 1、2、3 行。但我没有找到这样做的方法。

![在此处输入图像描述](../Images/11e3b1b56e1d68ce4b75bd816d6b5eb5.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T23:56:49.827

数据系列名称由列标题定义。将名称添加到您希望用作每个数据系列标题的列标题中，选择所有数据（包括标题），然后重新生成图表。然后，标题中的名称应显示为每个系列的图例中的名称。

![列标题成为图表图例中的数据系列标题](../Images/93ee6715b5d9d260fcc460c4439f4a08.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-20T11:15:54.847

有 3 种方法可以做到这一点：

## 1.直接定义系列名称

`Right-click`在图表上，然后单击`Select Data`然后直接编辑系列名称，如下所示。

[![在此处输入图像描述](../Images/05b2daecdf9a3a4f0a68103c19adbb86.png)](https://i.stack.imgur.com/Q6AwK.png)

您可以直接指定值，例如，也可以`Series 1`指定范围，例如`=A2`

[![在此处输入图像描述](../Images/6d13b84a656e1d6aefa7658ee4032fad.png)](https://i.stack.imgur.com/N9cAq.png)

## 2.创建一个预先定义系列和轴标签的图表

只需选择您的数据范围（与我指定的格式相似）并创建一个简单的条形图。标签应自动定义。 [![在此处输入图像描述](../Images/e0d6e59144ce6a38f1d587f4f34ed937.png)](https://i.stack.imgur.com/wajo7.png)

## 3.使用VBA定义图例（系列名称）

同样，您可以使用 VBA 动态定义系列名称。下面是一个简单的例子：

```
ActiveChart.ChartArea.Select
ActiveChart.FullSeriesCollection(1).Name = "=""Hello""" 
```

这将重新定义第**一个**系列名称。只需将索引从更改`(1)`为 eg`(2)`等即可更改以下系列名称。上面的VBA是做什么的？它将系列名称设置`Hello`为`"=""Hello"""`转换为`="Hello"`（`"`必须由前面的 转义`"`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-20T11:04:27.910

左键单击图表。«数据透视表字段列表»将出现在右侧。在数据透视表字段列表（Σ 值）的右下角，您可以看到图例的名称。左键单击图例名称。左键单击«值字段设置»。顶部有«Source Name»。你不能改变它。下面是«自定义名称»。根据需要更改自定义名称。现在图表上的图例名称具有您提供的新名称。

# java - 从顶点着色器传递到片段着色器

> ID：13714022
> 
> 赞同：0
> 
> 时间：2012-12-04T23:47:11.877
> 
> 标签：java, opengl, fragment-shader, vertex-shader

我正在尝试将一些向量从顶点着色器发送到片段着色器：例如：

```
vec3 N = (view*model*vNormal).xyz 
```

当试图在片段着色器中达到它时：

```
Link errorERROR: Input of fragment shader 'N' not written by vertex shader 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:51:43.667

要在着色器阶段之间传递值，您必须使用所谓的*变量*；关键字是`varying`or`out`和`in`- 在 GLSL 1.20 到 1.40 之间有一个关键字更改，但基本要点是您需要特殊的类型限定符。有关详细信息，请参阅 [http://www.opengl.org/wiki/GLSL_Type_Qualifiers#Shader_stage_inputs_and_outputs](http://www.opengl.org/wiki/GLSL_Type_Qualifiers#Shader_stage_inputs_and_outputs)。

# matlab - 将矩阵格式化为带有适当空行的 txt 文件

> ID：13714025
> 
> 赞同：1
> 
> 时间：2012-12-04T23:47:19.663
> 
> 标签：matlab, matrix

我正在使用三角测量程序，我需要绘制数据点及其三角测量（从另一个程序获得）。所以我有我的 delauany 边缘矩阵**newgrid1_eDT**（e 表示边缘列表）作为（第一列是行号）：

```
1         0 0   9
2         0 1   9
3         0 1   9
4         0 1   8
5         0 1   8
         [...]
11716     5 6   8
11717     1 2   4
11718     0 2   4 
```

我们的想法是让它像这样 newgrid1_ASCIIeDT：

```
1         0 0   9
2         0 1   9
3
4         0 1   9
5         0 1   8
6
7         0 1   8
         [...]
11715     5 6   8
11716
11717     1 2   4
11718     0 2   4 
```

基本上，每 2 行代表一个 3d 坐标对（每对点代表一条线）。

我编写了以下内容，试图从**newgrid1_eDT连续复制两行（索引 i），****然后将空行复制到******newgrid1_ASCIIeDT*****（*****索引***j），从而循环遍历 empy 矩阵**newgrid1_ASCIIeDT*逐渐****填充它。**我在接收矩阵newgrid1*** **_ASCIIeDT***中分配了 11718+ 11718/3 =15624 行*；我们从**newgrid1__eDT 转移**的每个点一个，每 2 行后加上一个空的 mrow（在第 3、6、9 行，...，依此类推）：***

 ***```
newgrid1__ASCIIeDT=zeros(15624,3);
[m,l]=size(newgrid1__ASCIIeDT) ;
j=0;
i=1;
for  j = 1:3:15624
i   
newgrid1__ASCIIeDT(j,:)=newgrid1__eDT(i,:);
newgrid1__ASCIIeDT(j+1,:)=newgrid1__eDT(i+1,:);
newgrid1__ASCIIeDT(j+2,:)=blank;
i=i+1
end 
```

出于某种原因，我相信这应该可以解决问题，但不知何故我得到了奇怪的结果。还有其他（更简单的方法）可以做到这一点，还是我在重新发明轮子？

理想情况下，我会用 C 语言编写这个（所有其他事情都在发生），但我现在只需要一个快速修复，并且不能通过 11k 行来引入空白行。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:31:29.767

简单的答案是把`i = i+2;`

但实际上，我认为你应该这样做

```
newgrid1__ASCIIeDT(1:3:end,:)=newgrid1__eDT(1:2:end,:);
newgrid1__ASCIIeDT(2:3:end,:)=newgrid1__eDT(2:2:end,:); 
```

为此，`newgrid1__ASCIIeDT`必须将其初始化为适当的大小。请注意，每两行 3 行`newgrid1__EDT`。***

# jquery - Jquery：$(document).click 在 Firefox 中不起作用

> ID：13714031
> 
> 赞同：0
> 
> 时间：2012-12-04T23:47:47.187
> 
> 标签：jquery, firefox, document

我确实有关于 $(document).click 的问题。

我目前正在处理的页面顶部有一个用户栏。右上角是一个框，其中包含当前登录用户的用户名。单击它会打开一个包含注销、我的个人资料等的对话框。基本上是一些链接，就像 Facebook 一样。

您可以通过再次单击该框或单击文档 ($(document).click) 来关闭此弹出窗口。

它在 Chrome 上运行良好，但 Firefox 存在一些问题。Firefox 将框本身解释为“文档”，并在我单击框后立即关闭。这很愚蠢，因为我确实有链接，但我无法点击它们，因为 FF 正在关闭点击框。

知道如何找到解决方法吗？

编辑：一些代码

$(文档).ready(函数() {

```
/*
***** user options popup *****
*/

$("#userputrigger").click(function() {
    if ($("#userpopup").length > 0)
    {
        $("#userpopup").remove();
        $(".arrop").attr("src","/img/arrowd.png");
        $('#userputrigger').attr("title", "Show options");
        $(".pass").toggleClass("act");
    }
    else
    {
        $(".ui").append('<div id="userpopup"><div class="options"><table cellpadding="0" cellspacing="0"><tr><td class="icon"><img src="img/user.png" width="16" height="16" alt="My profile" /></td><td><a href="#">My profile</a></td></tr><tr><td class="icon"><img src="img/settings.png" width="16" height="16" alt="Settings" /></td><td><a href="#">Settings</a></td></tr><tr><td class="icon"><img src="img/calendar.png" width="16" height="16" alt="Watchlist" /></td><td><a href="#">Watchlist</a></td></tr><tr><td class="icon"><img src="img/prizeicon.png" width="16" height="16" alt="My contests" /></td><td><a href="#">My contests</a></td></tr><tr><td class="icon"><img src="img/music.png" width="16" height="16" alt="My beats" /></td><td><a href="#">My beats</a></td></tr><tr><td class="icon"><img src="img/coins.png" width="16" height="16" alt="Balance" /></td><td><a href="#">Balance</a></td></tr><tr class="last"><td class="icon"><img src="img/logout.png" width="16" height="16" alt="Logout" /></td><td><form action="" method="post"><input type="submit" value="Logout" /><input type="hidden" name="logout" value="1" /></form></td></tr></table></div></div>');
        $(".pass").toggleClass("act");
        $(".arrop").attr("src","/img/arrowuact.png");
        $('#userputrigger').attr("title", "Hide options");
    }
    return false;
});

$('#userpopup').click(function(e) {
    e.stopPropagation();
});

$(document).click(function() {
    if ($('#userpopup').is(':visible'))
    {
        $(".arrop").attr("src","/img/arrowd.png");
        $("#userpopup").remove();
        $(".pass").toggleClass("act");
        $('#userputrigger').attr("title", "Show options");
    }
}); 
```

});

它实际上适用于链接，但不适用于提交按钮“注销”。它只是在 Firefox 上关闭。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:52:43.193

假设您单击带有“设置”类的 div。以下将阻止文档点击传播。

```
$('.settings').click(function(e) {
   e.stopPropagation();

   ...your stuff here...
}); 
```

# c# - 在 Windows Server 2003 上读取事件日志

> ID：13714034
> 
> 赞同：1
> 
> 时间：2012-12-04T23:48:09.447
> 
> 标签：c#, windows-server-2003, event-log

我编写了一个程序来读取事件日志，它在 Windows Server 2008 上运行良好，但是当我在 Windows Server 2003 上运行它时，它会抛出异常“此平台不支持操作”。我知道这是由 EventLogReader 类引起的。所以我的问题是，我的程序如何读取 Windows Server 2003 上的事件日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:57:09.213

您需要创建[EventLog 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog%28v=vs.100%29.aspx)的实例，然后遍历[EventLog.Entries 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entries%28v=vs.100%29.aspx)中的集合。

# iphone - 复制 iPhone 的照片应用程序

> ID：13714038
> 
> 赞同：0
> 
> 时间：2012-12-04T23:48:53.537
> 
> 标签：iphone, ios, image, uiscrollview

我正在寻找复制 iPhone Photo 的应用程序行为，它在缩小图片时会为图片添加信箱，但在放大时，条形不再存在。我需要什么视图布局（和数学）来实现这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:08:46.770

这个[MWPhotoBrowser github 项目](https://github.com/mwaterfall/MWPhotoBrowser)可能是你最好的选择。我们也想做同样的事情，但它确实是一项相当大的工作，所以我们改用它。节省了很多时间。

# javascript - 使用 navigator.notification.confirm 传递两个参数？

> ID：13714040
> 
> 赞同：10
> 
> 时间：2012-12-04T23:49:11.170
> 
> 标签：javascript, cordova, cordova-2.0.0

我正在尝试使用 Phonegap 通知在我的 Phonegap 应用程序中显示错误消息，然后允许用户通过电子邮件发送错误消息。唯一的问题是我无法将错误消息传递给回调函数，从而导致电子邮件无用。

我现在的代码如下所示：

```
function displayError(errormsg) {
    navigator.notification.confirm(
                                   errormsg,
                                   onConfirm,
                                   'Error',
                                   'Submit, Cancel'
                                   );
}
function onConfirm(buttonIndex){
    if (buttonIndex === 1){
        alert(errormsg);
    }

} 
```

哪个被调用`displayError("Test")`，哪个会产生错误内容`Test`。然后我想传递`errormsg`给`onConfirm`，但我不知道该怎么做，或者是否可能。

我正在考虑的一个可能的解决方案是：

```
function displayError(errormsg) {
    test = errormsg
    navigator.notification.confirm(
                                   errormsg,
                                   onConfirm,
                                   'Error',
                                   'Submit, Cancel'
                                   );
}
function onConfirm(buttonIndex){
    if (buttonIndex === 1){
        alert(test);
    }

} 
```

但这不会改变`errormsg`是否显示新错误。我确认了这一点，因为在模拟器设置中，我的应用程序抛出了两个错误。第一个在使用该方法时工作正常，传递`test`，但随后的第二个错误使用原始变量，而不是最近的变量。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-04T23:51:25.483

```
function displayError(errormsg) {
    navigator.notification.confirm(
        errormsg,
        function(buttonIndex){
            onConfirm(buttonIndex, errormsg);
        },
        'Error',
        'Submit, Cancel'
        );
}
function onConfirm(buttonIndex, errormsg){
    if (buttonIndex === 1){
        alert(errormsg);
    }

} 
```

将它包装在匿名函数中怎么样？这样，您可以传递任意数量的参数，同时保持范围。

# java - Google AppEngine 字符串转文本

> ID：13714041
> 
> 赞同：3
> 
> 时间：2012-12-04T23:49:12.743
> 
> 标签：java, google-app-engine

我有一个实体字段，它已经作为字符串保存在数据存储中。appengine 中的字符串限制为最多 500 个字符。

如何将其更改为 Text 并使所有旧值仍然可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:53:52.840

我推荐以下方法，尤其是在代码处于生产状态时：

*   在您的实体中引入一个新的文本字段。
*   编写一个简单的迁移代码来遍历每个实体，然后从 String 属性中读取现有值并将其放入新的 Text 属性中。
*   修改当前代码以仅从新的 Text 属性写入和读取。

上述方法将帮助您逐步明智地做事，并且在出现问题的最坏情况下，至少您拥有旧属性和旧值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:41:36.753

对于这样的任务，我使用了一个带有 action 参数的 servlet 来执行数据库操作。在您的情况下，更新实体类，遍历实体并相应地设置您的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T00:26:39.740

您必须使用 db.TextProperty，但不能索引此属性。

要使用它：

```
class Example(db.Model):
    ....
    content = db.TextProperty()

content_text = db.Text(example.content) 

or

example.content = db.Text(content_text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-30T09:08:30.313

只需将该字段作为文本获取。它会起作用的。无需将现有值迁移到新字段！

# css - 对于标准模式，IE 是否需要条件 CSS？

> ID：13714047
> 
> 赞同：1
> 
> 时间：2012-12-04T23:50:00.290
> 
> 标签：css, doctype, quirks-mode

如果 HTML 页面有正确的 doctype，IE 还需要条件 CSS 吗？

今天听说，如果添加了doctype并且页面以Standard模式呈现，那么许多针对Quirks模式页面的IE特定修复就不再需要了。这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:56:53.517

IE 不需要特殊的样式表。在某些浏览器中存在一些错误和差异，但通常最好绕过它们而不是编写特定于浏览器的样式。

使用在所有浏览器中运行相同的更强大的解决方案使得代码更有可能继续在未来的浏览器中运行。

即使您需要专门为 IE 添加修复程序，也可以在不会对其他浏览器造成问题的情况下完成某些修复。例如添加`display:inline`浮动元素，或在元素上设置特定大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:59:37.733

虽然包含 doctype 声明肯定会有所帮助，但 Internet Explorer 在版本 9 之前并以逐渐增加的方式回溯到版本，其行为与符合标准的浏览器不同，除非在大多数情况下，如果没有 Internet Explorer 特定的修复程序，您将很难摆脱基本情况。

关键是 doctype 声明对 IE 有很长的路要走，但不是全部，您需要做出权衡。我不确定 doctype 究竟修复了哪些问题，我相信这是很多问题。无论如何，我个人都包含一个有效的文档类型。

# java - Access-Control-Allow-Origin 和 Servlet 作为代理

> ID：13714049
> 
> 赞同：0
> 
> 时间：2012-12-04T23:50:10.227
> 
> 标签：java, javascript, servlets, proxy, access-control

我有一个充当代理的 servlet。它需要外部资源并为显示 iframe 内部的客户端（浏览器）提供服务。

如何克服 Access-Control-Allow-Origin 的问题？

实际上，某些外部资源会打开与原始服务器的其他连接，但由于此问题而被拒绝。

资源是从我无法控制的另一台服务器加载的，但是一旦资源存储在我的 servlet 中，我就可以对其进行更改。

我尝试插入：

```
<script> document.domain=" +ORIGINAL_DOMAIN+ "</ script> 
```

但我得到一个

```
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:34:01.850

如果您通过`file://`URI 方案在本地文件上使用它，则不能设置 cookie。将它放在本地服务器上，以便您可以使用`http://localhost`. 您还可以使用`--allow-file-access-from-file`命令开关启动 chrome，从而摆脱这种保护安全性

# java - 如何使用斜线从字符串中提取整数？

> ID：13714050
> 
> 赞同：0
> 
> 时间：2012-12-04T23:50:12.583
> 
> 标签：java, string, extract

```
String value = "30/90"
// Extracting 30 to a and 90 to b 
int a = 30;
int b = 90 
```

如上例所示，如何提取“30”和“90”。所以斜线将指示“a”和“b”的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T23:51:36.310

**[使用String#Split("/"):](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)**分割字符串`/`作为分隔符：

```
 String value = "30/90";
            int a = Integer.parseint(value.split("/")[0]);
            int b= Integer.parseInt(value.split("/")[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:52:21.107

试试这个：用`/`s 分割字符串并将生成的字符串解析为整数。

```
public class Main
{
    public static void main (String[] args)
    {
        String value = "30/90";
        // Extracting 30 to a and 90 to b 
        String[] values = value.split("/");
        int a = Integer.parseInt(values[0]);
        int b = Integer.parseInt(values[1]);
        System.out.println(a + " " + b);
    }
} 
```

# php - 推荐的 PHP 内容模板语言？

> ID：13714051
> 
> 赞同：1
> 
> 时间：2012-12-04T23:50:18.847
> 
> 标签：php, templates, content-management-system, smarty

我正在开发一个 cms/购物车。

我想为设计师创建一种方式来更新产品页面、结帐、自定义页面、电子邮件、自定义内容小部件等的视图。

我希望这包括简单的编程结构，例如循环、if 测试、格式化等。

目前这些部分要么不能包含编程，要么我正在使用 php 的 eval() 函数来处理内容。eval() 适合开发，但我不想让客户完全访问 php，因为这会带来安全风险。

我正在考虑使用 Smarty，但我想将内容保存在数据库中而不是文件中，而且 smarty 似乎无法做到这一点。另外，我正在寻找比 smarty 更轻的东西，因为我只需要非常简单的功能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:27:33.843

正如 SmasherHell 在评论中提到的，Twig 是一个不错的选择；Symfony 使用它，从个人经验来看，它是一个非常高效和强大的引擎，语法相当简单。[http://twig.sensiolabs.org/](http://twig.sensiolabs.org/)

# php - 使用更改和自动递增 ID 复制数据库中的多行

> ID：13714053
> 
> 赞同：2
> 
> 时间：2012-12-04T23:50:35.860
> 
> 标签：php, mysql, codeigniter-2

简而言之，我需要做的是：

1.  在表中重复 X 行
2.  更改几个字段
3.  保持自动递增 ID 的顺序。

这就是我到目前为止所做的。

```
$this->db->query("CREATE TEMPORARY TABLE tmpTbl AS SELECT * FROM orders_products WHERE op_order_id = $id");
$temp = $this->getAll('tmpTbl');

## grab the highest id in the orders_products table so we can begin auto_inc after that
$this->db->select_max("op_id");
$max = $this->getAll('orders_products');
## set the id to a counter for the loop
$counter = $max[0]->op_id;

## loop through the results editing fields as needed
foreach ( $temp as $t ) :
  $counter++;
  $this->db->query("UPDATE tmpTbl SET op_id = $counter, op_order_id = $orderId WHERE op_order_id = $id");
endforeach;
$temp = $this->getAll('tmpTbl');

## insert the new duplications into the orders_products table
$this->db->query("INSERT INTO orders_products SELECT * FROM tmpTbl");

## drop the temp table so it is fresh and clean for the next duplication
$this->db->query("DROP TEMPORARY TABLE tmpTbl"); 
```

当我运行它时，我会到达这条线

```
$this->db->query("INSERT INTO orders_products SELECT * FROM tmpTbl"); 
```

它向我抛出了这个错误

```
Duplicate entry '54' for key 'PRIMARY

INSERT INTO orders_products SELECT * FROM tmpTbl 
```

我首先创建计数器的原因是为了解决这个问题。然而，我很遗憾地错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:17:22.303

在您的情况下，我会做的是删除 ID col。来自 SELECT 以便 INSERT 将自动生成 ID。

```
INSERT INTO orders_products (column2,column3,etc)
    SELECT column2, column3, etc FROM tmpTbl 
```

# android - 使用自定义数组适配器显示数据的问题

> ID：13714055
> 
> 赞同：0
> 
> 时间：2012-12-04T23:50:56.877
> 
> 标签：android, arrays, listview, adapter, custom-adapter

我正在尝试创建一个基本的列表视图应用程序。我让它在默认的系统阵列适配器上运行良好。然后我尝试修改它以允许我使用自定义适配器。不幸的是我遇到了一个问题。

当我运行应用程序时，我没有遇到运行时错误，而是出现黑屏，应该显示列表，这让我认为它可能正在显示列表，但由于某种原因适配器没有找到数据....

无论如何，下面是我的列表活动：

```
 package com.example.waitronproto2;

    import java.util.ArrayList;
    import java.util.List;

    import android.app.ListActivity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;
    import android.widget.Toast;

    public class AppetizersActivity extends ListActivity{

            //Instance Variables
            //Array to hold menu appetizers - In future this will be pulled from web server
            private List<MenuItem> appetizers;
            private MenuItemArrayAdapter appetizersAdapter;

            @Override
            public void onCreate(Bundle savedInstanceState){
                super.onCreate(savedInstanceState);
                //Garbage collection
                System.gc();
                setContentView(R.layout.appetizers_list);

                fillList();

                //Create custom array adapter - links list with source of data, an array.
                appetizersAdapter = new MenuItemArrayAdapter(this, appetizers);

                //Set the newly created adapter as the lists adapter.
                this.setListAdapter(appetizersAdapter); 
            }

            @Override
            protected void onListItemClick(ListView l, View v, int position, long id){
                //Toast for testing
                Toast.makeText(this.getApplicationContext(), l.getItemAtPosition(position) + " Clicked!", Toast.LENGTH_LONG).show();        

                //store clicked item in String variable
                String choice = l.getItemAtPosition(position).toString();

                //add to an array that is being passed from Activity to Activity
            }

            //fill the list with  menu items
            private void fillList(){
                appetizers = new ArrayList<MenuItem>();
                appetizers.add(new MenuItem("Appetizer 1", "Appetizer", 8.95));
                appetizers.add(new MenuItem("Appetizer 2", "Appetizer", 9.95));
                appetizers.add(new MenuItem("Appetizer 3", "Appetizer", 12.95));
                appetizers.add(new MenuItem("Appetizer 4", "Appetizer", 4.95));
                appetizers.add(new MenuItem("Appetizer 5", "Appetizer", 5.95));
                appetizers.add(new MenuItem("Appetizer 6", "Appetizer", 7.95));
                appetizers.add(new MenuItem("Appetizer 7", "Appetizer", 5.95));
                appetizers.add(new MenuItem("Appetizer 8", "Appetizer", 12.95));
                appetizers.add(new MenuItem("Appetizer 9", "Appetizer", 10.95));

            }
    } 
```

这是我的适配器类：

```
 package com.example.waitronproto2;

import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

//Default array adapter for menu items
public class MenuItemArrayAdapter extends ArrayAdapter<MenuItem> {

    private List<MenuItem> menuItems;

    //Constructor
    public MenuItemArrayAdapter(Context context, List<MenuItem> menuItems) {
        super(context, R.layout.menuitem_row);
        this.menuItems = menuItems;
    }

    //get views
    public View getView(final int position, View convertView, ViewGroup parent){
        View v = convertView;

        if(v == null){
            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.menuitem_row, null);
        }

        //assign values to view
        MenuItem item = this.menuItems.get(position);

        TextView nameView = (TextView) v.findViewById(R.id.item_name);
        TextView priceView = (TextView) v.findViewById(R.id.item_price);

        nameView.setText(item.getName());
        priceView.setText(String.valueOf(item.getPrice()));

        return v;

    }

} 
```

有什么想法我可能会出错吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:56:39.820

通过扩展 ArrayAdapter 但在您的自定义适配器中使用本地列表，您会使事情变得有些混乱。ArrayAdapter 不知道该列表有任何数据，因为*它* `getCount()`引用了一个*空*列表。

改用这个超级构造函数：

```
//Constructor
public MenuItemArrayAdapter(Context context, List<MenuItem> menuItems) {
    super(context, R.layout.menuitem_row, menuItems);
    //  Pass the ArrayAdapter your list   ^^^^^^^^^
} 
```

并且不要保留`menuItems`自己，否则您的代码会随着时间的推移变得过于复杂。您需要`getItem(position)`在当前使用的地方使用`this.menuItems.get(position)`.

* * *

**或者**，您可以覆盖`getCount()`、`getItem()`和`getItemId()`指向您的`menuItems`列表。但是如果你这样做，你还不如直接扩展 BaseAdapter，因为你已经剥夺了 ArrayAdapter 的好处。

# apache - CodeIgniter 使用 .htaccess 移除 index.php

> ID：13714057
> 
> 赞同：0
> 
> 时间：2012-12-04T23:51:06.030
> 
> 标签：apache, codeigniter

我已经为此工作了一个小时，所以我想我不妨问问。

我正在尝试从我的 CodeIgniter 应用程序的 URL 中删除 index.php 并且无法执行此操作。

该应用程序在我办公室的专用服务器上运行，我通过 url 访问该应用程序`http://smr_local`

这是我的基本虚拟主机块

```
<VirtualHost 192.168.1.90:80> 
    ServerAdmin admin@server.com
    DocumentRoot "/var/www/smr.dev/app"
    ServerName smr_local
    ErrorLog "/etc/httpd/logs/error_log"
    CustomLog "/etc/httpd/logs/access_log" common
    <Directory /var/www/smr.dev/app>
        Order allow,deny
        Allow from all
        AllowOverride All
    </Directory>
    <IfModule mod_rewrite.c>
        RewriteEngine on
    </IfModule>
</VirtualHost> 
```

这是我的 .htaccess 文件

```
RewriteEngine on
RewriteBase /
# Hide the application and system directories by redirecting the request to index.php
RewriteRule ^(application|system|\.svn) index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [QSA,L] 
```

还有我的配置文件

```
$config['base_url']    = "http://smr_local/";
$config['index_page'] = '';
$config['uri_protocol'] = 'REQUEST_URI'; 
```

现在，当我尝试访问我的基本 url`http://smr_local/user/courses`时，我的 apache 错误日志中出现错误，我得到了这个。

```
File does not exist: /var/www/smr.dev/app/user 
```

我真的不知道下一步该尝试什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:14:44.193

你检查过官方[用户指南](http://ellislab.com/codeigniter/user-guide/general/urls.html)吗？

```
example.com/index.php/news/article/my_article 
```

您可以使用带有一些简单规则的 .htaccess 文件轻松删除此文件。以下是此类文件的示例，使用“否定”方法重定向除指定项目之外的所有内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

在上面的示例中，除 index.php、images 和 robots.txt 之外的任何 HTTP 请求都被视为对 index.php 文件的请求。

* * *

我以前一直在使用 Codeigniter，这就是我让它工作的方式：

这是我的`.htaccess`（假设您有默认文件夹结构）：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # Removes access to the system folder by users.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    # Prevents user access to the application folder
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    # Checks to see if the user is attempting to access a valid file,
    # such as an image or css document, if this isn't true it sends the
    # request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule> 
```

这是相关的部分`config.php`：

```
$config['base_url'] = '';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO';
$config['url_suffix'] = ''; 
```

* * *

如果这没有帮助，您的问题可能在 Apache 配置中。

然后提供您`httpd.conf`和任何其他相关配置，而不仅仅是`virtual-hosts`.

# c# - 支付成功后如何从paypal取回信息？

> ID：13714063
> 
> 赞同：2
> 
> 时间：2012-12-04T23:51:23.627
> 
> 标签：c#, asp.net, asp.net-mvc, paypal

我有一个带有订阅 paypal 按钮的 asp.net MVC4 操作：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" id="payPalForm">
                <input type="hidden" name="item_number" value="@item.Id">
                <input type="hidden" name="item_name" value="@item.Name">
                <input type="hidden" name="src" value="1">@*Recurring until user cancels*@
                <input type="hidden" name="cmd" value="_xclick">
                <input type="hidden" name="p3" value="1"> @*Billing cycle amount*@
                <input type="hidden" name="t3" value="M"> @*billing cycle period - Month*@
                <input type="hidden" name="no_note" value="1">
                <input type="hidden" name="business" value="dude@dude.com">@*Hiva's paypal account*@
                <input type="hidden" name="currency_code" value="USD">
                <input type="hidden" name="return" value="@returnUrl">
                <input type="hidden" name="amount" id="amount" value="@item.Price">
                <input type="submit" name="Submit" value="Subscribe">
            </form> 
```

在返回 URL 中，它触发了一个操作，我希望能够在其中查看表单详细信息以及付款是否通过，以及所有这些好东西。这就是我所拥有的：

```
 public ActionResult PaymentConfirm(FormCollection form)
    {
        //if successful, blah blah
        var user = User.Identity.Name;
        //Merchant merch = ctx.Merchants.Single(x => x.User.UserName == user);
        //merch.Plan = plan;

        return RedirectToAction("Index", "Merchant");
    } 
```

我怎样才能得到这些数据！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:02:07.080

正如评论所提到的，解决方案是 IPN。基本上，IPN 是您在商家帐户中设置的 URL，位于销售工具下。

1.  您会想要创建指向您的操作的 url。（要在本地进行，您需要进行端口转发以使您的站点公开可用）

2.  IPN 包含您需要的所有信息。每当付款时都会调用它，并且它还带有付款状态，无论是成功还是失败。

这是您可以参考的代码示例的链接。

[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

更新：有关 IPN 如何在幕后工作的详细信息，请参考以下链接

[https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-info-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-info-outside)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T04:54:50.293

如果您使用[PayPal REST API](https://github.com/paypal/rest-api-sdk-dotnet)，那么您可以这样做：

```
 // You create the ProcessPayment() method
        string jsonResponse = ProcessPayment(model);

        var jss = new JavaScriptSerializer();
        Payment payment = jss.Deserialize<Payment>(jsonResponse); 

        APIContext apiContext = Configuration.GetAPIContext();
        Payment originalPayment = Payment.Get(apiContext, payment.id); 
```

# c# - RemoveAt 索引 c#

> ID：13714066
> 
> 赞同：-4
> 
> 时间：2012-12-04T23:51:31.100
> 
> 标签：c#, list

我有一个项目正在努力解决如何从列表中删除的问题。

我要删除的列表项是用户从列表框中选择的索引中的任何项。

该项目有一个名为 Pickcuplist 的列表类和 2 个 GUI，一个用于主表单，一个用于拾取表单。拾取表单是删除按钮所在的位置，但是带有所选索引的列表框位于主表单上。

我找到了 List.RemoveAt 但是我似乎无法让它工作。

物品被添加到列表中，例如从取件表单中添加，例如：

```
txtCustName.Text = thePickup.name;
txtCustAddress.Text = thePickup.address;
txtArrival.Text = thePickup.arrival.ToString();
txtDaddress.Text = thePickup.Daddress;
txtDeliveryName.Text = thePickup.Dname;
LblType.Text = thePickup.type; 
```

这是主表单添加的代码

```
 /*
            * This method creates a new pickup object, allows the user to
            * enter details and adds it to the List
            *  
            */

        Pickupform.pickup = new Pickups();
        //New Visit- note added to the pickupform object

        Pickupform.ShowDialog();
        //Show the pickupForm. ShowDialog ensures that the form has the exclusive focus until it is closed.

        if (Pickupform.pickup != null)
        //if null then the "cancel" button was pressed
        {
            Pickups newpic = Pickupform.pickup;
            //Get the Pickup object from the form

            thePickup.addPickups(newpic);
            //Add the visit to the list
        }
        updateList();
        //Update the list object to reflect the Pickups in the list 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:07:08.500

转到代表`Form`具有删除按钮的类。

查找附加`Click`到此按钮事件的事件处理程序。

如果您可以从此类访问pickupList，请`RemoveAt`从那里调用。

如果您无权访问它，请找到将列表传递给其他表单的方法。例如，如果带有 Delete 按钮的表单是从另一个表单创建的，那么您可以将列表作为构造函数参数传递，并将其保存在带有 Delete 按钮的表单的字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:03:51.623

看看这个链接（http://www.dotnetperls.com/removeat）

它的症结在于这一点：

```
var list = new List<string>();
list.Add("dot");
list.Add("net");
list.Add("perls");

list.RemoveAt(1); <-- See, you pass in an integer 
```

因此，在您的情况下，您将有一个事件或触发删除的东西，此时您需要找到要删除的项目的索引并调用该方法。如果您对此感到苦恼，您真的应该考虑做一些教程，这是非常基础的。

# python - Kivy 日期选择器小部件

> ID：13714074
> 
> 赞同：8
> 
> 时间：2012-12-04T23:52:17.130
> 
> 标签：python, kivy

[已解决] 请参阅下面的应用程序接受的答案和运行 kivy DatePicker 小部件的源代码。

我一直在学习 Kivy，并决定制作一个日期选择器小部件作为学习练习。

```
import kivy
kivy.require('1.4.0')    
from kivy.uix.gridlayout import GridLayout
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.app import App

from datetime import date, timedelta

class DatePicker(BoxLayout):

    def __init__(self, **kwargs):
        super(DatePicker, self).__init__(**kwargs)
        self.date = date.today()
        self.orientation = "vertical"

        self.header = BoxLayout(orientation = 'horizontal', 
                                size_hint = (1, 0.2))
        self.body = GridLayout(cols = 7)
        self.add_widget(self.header)
        self.add_widget(self.body)

        self.populate_body()
        self.populate_header()

    def populate_header(self):
        self.header.clear_widgets()
        self.previous_month = Button(text = "<")
        self.next_month = Button(text = ">")
        self.current_month = Label(text = repr(self.date), 
                                   size_hint = (2, 1))

        self.header.add_widget(self.previous_month)
        self.header.add_widget(self.current_month)
        self.header.add_widget(self.next_month)

    def populate_body(self):
        self.body.clear_widgets()
        date_cursor = date(self.date.year, self.date.month, 1)
        while date_cursor.month == self.date.month:
            self.date_label = Label(text = str(date_cursor.day))
            self.body.add_widget(self.date_label)
            date_cursor += timedelta(days = 1)

# Not yet implimented ###
#    def set_date(self, day):
#        self.date = date(self.date.year, self.date.month, day)
#        self.populate_body()
#        self.populate_header()
#
#    def move_next_month(self):
#        if self.date.month == 12:
#            self.date = date(self.date.year + 1, 1, self.date.day)
#        else:
#            self.date = date(self.date.year, self.date.month + 1, self.date.day)
#    def move_previous_month(self):
#        if self.date.month == 1:
#            self.date = date(self.date.year - 1, 12, self.date.day)
#        else:
#            self.date = date(self.date.year, self.date.month -1, self.date.day)
#        self.populate_header()
#        self.populate_body()

class MyApp(App):

    def build(self):
        return DatePicker()

if __name__ == '__main__':
    MyApp().run() 
```

我遇到了障碍，不知道如何继续。我想添加一种方法，以便在单击 date_labels 时，它们将 self.date 设置为具有该日期部分的日期对象。

我试过添加

```
self.date_label.bind(on_touch_down = self.set_date(date_cursor.day)) 
```

但只有最大递归错误。

# 解决方案：

```
import kivy

kivy.require('1.4.0')

from kivy.uix.gridlayout import GridLayout
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.button import Button

from kivy.app import App

from datetime import date, timedelta

from functools import partial

class DatePicker(BoxLayout):

    def __init__(self, *args, **kwargs):
        super(DatePicker, self).__init__(**kwargs)
        self.date = date.today()
        self.orientation = "vertical"
        self.month_names = ('January',
                            'February', 
                            'March', 
                            'April', 
                            'May', 
                            'June', 
                            'July', 
                            'August', 
                            'September', 
                            'October',
                            'November',
                            'December')
        if kwargs.has_key("month_names"):
            self.month_names = kwargs['month_names']
        self.header = BoxLayout(orientation = 'horizontal', 
                                size_hint = (1, 0.2))
        self.body = GridLayout(cols = 7)
        self.add_widget(self.header)
        self.add_widget(self.body)

        self.populate_body()
        self.populate_header()

    def populate_header(self, *args, **kwargs):
        self.header.clear_widgets()
        previous_month = Button(text = "<")
        previous_month.bind(on_press=partial(self.move_previous_month))
        next_month = Button(text = ">", on_press = self.move_next_month)
        next_month.bind(on_press=partial(self.move_next_month))
        month_year_text = self.month_names[self.date.month -1] + ' ' + str(self.date.year)
        current_month = Label(text=month_year_text, size_hint = (2, 1))

        self.header.add_widget(previous_month)
        self.header.add_widget(current_month)
        self.header.add_widget(next_month)

    def populate_body(self, *args, **kwargs):
        self.body.clear_widgets()
        date_cursor = date(self.date.year, self.date.month, 1)
        for filler in range(date_cursor.isoweekday()-1):
            self.body.add_widget(Label(text=""))
        while date_cursor.month == self.date.month:
            date_label = Button(text = str(date_cursor.day))
            date_label.bind(on_press=partial(self.set_date, 
                                                  day=date_cursor.day))
            if self.date.day == date_cursor.day:
                date_label.background_normal, date_label.background_down = date_label.background_down, date_label.background_normal
            self.body.add_widget(date_label)
            date_cursor += timedelta(days = 1)

    def set_date(self, *args, **kwargs):
        self.date = date(self.date.year, self.date.month, kwargs['day'])
        self.populate_body()
        self.populate_header()

    def move_next_month(self, *args, **kwargs):
        if self.date.month == 12:
            self.date = date(self.date.year + 1, 1, self.date.day)
        else:
            self.date = date(self.date.year, self.date.month + 1, self.date.day)
        self.populate_header()
        self.populate_body()

    def move_previous_month(self, *args, **kwargs):
        if self.date.month == 1:
            self.date = date(self.date.year - 1, 12, self.date.day)
        else:
            self.date = date(self.date.year, self.date.month -1, self.date.day)
        self.populate_header()
        self.populate_body()

class MyApp(App):

    def build(self):
        return DatePicker()

if __name__ == '__main__':
    MyApp().run() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:00:12.240

你在绑定中犯了一个小错误，你*调用*了方法而不是*传递*它（因此，你传递了`self.set_date(date_cursor.day)`, 但也调用了`self.set_date`调用的结果`self.populate_body`，所以你进入了无限递归，只被 python 递归限制停止。

你想要做的是绑定方法，但`date_cursor.day`作为第一个参数，对于这个`partial`函数， from`functools`是完美的。

`self.date_label.bind(on_touch_down=partial(self.set_date, date_cursor.day))`

创建一个新函数，就像 self.set_date 一样，但将 date_cursor.day 作为第一个参数预加载。

编辑：另外，当事件绑定调用您的部分函数时，它将接收其他参数，因此`**args`在您使用 ass 回调的函数/方法中添加参数末尾是一个好习惯（此处`set_date`）。

# angularjs - AngularJS 和 Jasmine 的模拟问题

> ID：13714076
> 
> 赞同：2
> 
> 时间：2012-12-04T23:52:23.400
> 
> 标签：angularjs, jasmine

尝试开始在 angularjs 中进行测试（基于[this](http://jsfiddle.net/brendanowen/5Afbm/1/)），但似乎无法让模拟正常工作。这是我的茉莉花文件：

```
describe 'FlightsController', ->
  beforeEach module 'surf-air'

  beforeEach inject ($rootScope, $controller) ->
    scope = $rootScope.$new()
    FlightsController = $controller('FlightsController', {scope: scope})

  it 'should work', -> expect(true).toBe(true) 
```

这是Testacular吐回的内容：

```
Chrome 23.0 FlightsController should work FAILED
    Error: Unknown provider: $scopeProvider <- $scope
        at Error (<anonymous>)
        at /Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:28:395
        at Object.c [as get] (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:26:180)
        at /Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:28:476
        at c (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:26:180)
        at d (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:26:314)
        at Object.instantiate (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:27:455)
        at /Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:50:239
        at null.<anonymous> (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/test/unit/controllers.js:9:34)
        at Object.d [as invoke] (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/src/js/angular.min.js:27:325)
    Error: Declaration Location
        at window.jasmine.window.inject.angular.mock.inject (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/test/lib/js/angular-mocks.js:1717:25)
        at null.<anonymous> (/Users/chriskun/forge-workspace/surf-air-pilot-mobile/test/unit/controllers.js:6:16)
        at /Users/chriskun/forge-workspace/surf-air-pilot-mobile/test/unit/controllers.js:4:3
        at /Users/chriskun/forge-workspace/surf-air-pilot-mobile/test/unit/controllers.js:18:4
Chrome 23.0: Executed 1 of 1 (1 FAILED) (0.221 secs / 0.04 secs) 
```

这是由以下原因引起的：

```
$controller('FlightsController', {scope: scope}) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:07:16.980

更改此行

```
FlightsController = $controller('FlightsController', {scope: scope}) 
```

到以下

```
FlightsController = $controller('FlightsController', {$scope: scope}) 
```

我已将示例 jsfiddle 更新为 CoffeeScript：http: [//jsfiddle.net/jaimem/5Afbm/2/](http://jsfiddle.net/jaimem/5Afbm/2/)

# jsf - javax.el.PropertyNotWritableException: value="": Set 操作的非法语法

> ID：13714081
> 
> 赞同：1
> 
> 时间：2012-12-04T23:53:05.010
> 
> 标签：jsf, el

我有这个表格：

```
<h:form>
    <h:outputLabel value="Entrez un id du compte a supprimer" for="id"/>
    <h:inputText id="id" value=""/>
    <h:commandButton id="supprimer" value="Supprimer" action="#{compteBancaireMBean.supprimer}"/>  
</h:form> 
```

而这个动作方法：

```
public String supprimer() {  
    gestionnaireDeCompteBancaire.supprimer(comptebancaire.getId());  
    return "CompteList";  
} 
```

当我提交表单时，我收到以下异常：

```
javax.el.PropertyNotWritableException: /Supprimer.xhtml @14,44 value="": Illegal Syntax for Set Operation 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:45:05.590

`value=""`对 JSF el 解析器没有任何意义，它无法理解这一点。您实际上需要在那里提供一个静态值，例如在`value="Some Text"`或将其绑定到您的支持 bean 中的一个变量，因为`value="#{compteBancaireMBean.myVariable}"`其中`myVariable`对应于您的支持 bean 中的一个实际变量`compteBancaireMBean`。这个变量必须遵循 javabean 约定，即你必须有

```
 private Integer myVariable;  //I use Integer here just as an example, you can use any core java type

   public void setMyVariable(Integer myVariable){
    this.myVariable = myVariable 
   }

   public Integer getMyVariable(){
   return this.myVariable
   } 
```

# ruby-on-rails - 使用 NginX 服务器将 Rails 应用程序部署到 VPS。编译问题

> ID：13714083
> 
> 赞同：0
> 
> 时间：2012-12-04T23:53:07.683
> 
> 标签：ruby-on-rails, compilation

我成功地将我的 rails 应用程序部署到我的 VPS，但是当我尝试从浏览器查看我的服务器时，我收到 500 错误（“我们很抱歉，但出了点问题”）。该应用程序在本地运行良好，所以我认为问题不在于我的代码，而在于其他地方。

这是来自 /current/log/production.log 的日志

```
ActionView::Template::Error (jquery.js isn't precompiled):
    4:   <title>Songhomme</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= javascript_include_tag 'jquery' %>
8:   <%= csrf_meta_tags %>
9: </head>
10: <body>
  app/views/layouts/application.html.erb:7:in `_app_views_layouts_application_html_erb___2525571063257357898_28769560' 
```

我还收到以下错误：

```
ActionView::Template::Error (/home/deployer/apps/songhomme/releases/20121204091428/app/views/posts/_posts.erb:27: syntax error, unexpected ',', expecting ')'
...ppend= ( link_to (t.name + " ", '/tags/' + t.id.to_s) );@out... 
```

该代码在本地运行良好，所以我不确定代码的第二部分有什么问题。对于代码的第一部分，`rake assets:precompile`在我推送到我的仓库之前运行是否可以解决问题？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:10:43.987

尝试在清单文件 application.js 中声明您的 js 包含，而不是通过 javascript_include_tag。由于 Rails 版本 3，这是正确的方法。所以，在你的 application.js 中：

```
//= require jquery
//= require jquery_ujs 
```

# c++ - 我怎样才能通过引用弹出一些东西？

> ID：13714097
> 
> 赞同：1
> 
> 时间：2012-12-04T23:55:16.307
> 
> 标签：c++, stack

我正在做一个程序来检查平衡的括号和括号等。我创建了一个 char 来存储信息，当我按下 char 时它可以工作，但它不允许我弹出。有谁知道我能做什么？我们的教授给了我们头文件，所以我不能在 pop/push 函数中将它从 int 更改为 char。但我很好奇我能做些什么来完成这项工作？

```
void push(int);
void pop(int &);

char ch,i;
IntStack x(50);
int count = 0;

while (fin>>ch)
{
if (ch == '[' || ch=='{' || ch=='(')
{
      x.push(ch);    //this works
  count++;
}

if (ch==']' || ch=='}' || ch==')')
{
  x.pop(ch);    //this brings an error, i also tried x.pop(ch&) and didnt work too
  count--;
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T23:57:25.923

您不能将 char 绑定到对 int 的非常量引用。将 ch 的类型更改为 int 就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:05:45.277

将表示 ch 的整数传递给 pop，然后根据从整数传回的结果设置 ch。

```
int PopVar;
Pop(PopVar);
ch = PopVar; 
```

# android - 是否可以从 Google Maps Android API v2 中的 UiSettings 自定义定位 UI 元素？

> ID：13714100
> 
> 赞同：2
> 
> 时间：2012-12-04T23:55:37.303
> 
> 标签：android, api, maps, google-maps-android-api-2

您能否定位 Google Maps Android API v2、UiSettings 中可用的位置按钮或指南针按钮等 UI 元素？现在，默认情况下，它们都出现在相同的位置。

# c# - 带有动态添加行jquery的htmltable c#

> ID：13714102
> 
> 赞同：0
> 
> 时间：2012-12-04T23:56:16.057
> 
> 标签：c#, jquery, html-table

加载 DOM 后是否可以在 C# 中动态添加元素。下面是我的例子。

这个想法是通过用户干预动态添加行，然后用户提交表单，C# 代码隐藏将遍历每个新添加的行。

但是，无论添加多少行，C# 都只会计算 1 行。

这是 HTML / Jquery / C#

**HTML**

在将新行添加到表之前。

```
<table id="tblRecordedBags" runat="server" class="tblBags">
    <tr>
        <th>Amount</th><th>Drop Bag Number</th><th>Edit</th><th>Remove</th>
    </tr>
</table>
<input type='text' class='txtBagNum' id='txtBagNum'> 
```

**jQuery**

用于添加新行。

```
$('.addBag').on('click', function(){
  $(".tblBags").append(
            '<tr class="bag"><td class="bag">'
                + $(".total").val() + '</td><td class="bagID">'
                + $(".txtBagNum").val() + '</td>'
                + "</tr>'
}); 
```

C# 代码隐藏

快速调试写入

```
System.Diagnostics.Debug.Write(tblRecordedBags.Rows.Count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:01:02.353

发生这种情况是因为您正在从服务器端的服务器端**访问** 它`no knowledge of any changes to the DOM.`

新行被添加到浏览器中，但默认页面保持不变，它位于 .aspx 文件中，并且这些文件最初没有被修改。

要获得正确的输出，您实际上可以在 C# 中添加行，然后尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:05:21.547

我认为 ASP.NET 没有为 javascript 做好准备。

一种简单的方法是使用更新面板通过服务器端添加每一行。

另一种方法是在提交之前尝试从隐藏字段中的行加载所有数据（例如使用 JSON 编码）

# javascript - 使用 SHA256 和 .NET/Node.js 对密码进行哈希处理

> ID：13714103
> 
> 赞同：19
> 
> 时间：2012-12-04T23:56:17.213
> 
> 标签：javascript, .net, node.js, hash, sha2

我将用户密码的 SHA256 哈希值存储在由 .NET 生成的数据库中，我需要能够使用 Node.js 检查它们。唯一的问题是 .NET 和 Node.js 为相同的密码创建了不同的哈希值。

```
Password: ThisPassword 
```

## 。网：

```
var ue = new UnicodeEncoding();  
var byteSourceText = ue.GetBytes("ThisPassword");  
var byteHash = new System.Security.Cryptography.SHA256Managed().ComputeHash(byteSourceText);  
return Convert.ToBase64String(byteHash);

//Tlwxyd7HIQhXkN6DrWJtmB9Ag2fz84P/QgMtbi9XS6Q= 
```

## Node.js（使用加密）：

```
var crypto = require('crypto');
return crypto.createHash('sha256').update('ThisPassword').digest('base64')

//d7I986+YD1zS6Wz2XAcDv2K8yw3xIVUp7u/OZiDzhSY= 
```

我找到[了这个](https://stackoverflow.com/questions/10559203/sha-256-hashes-different-between-c-sharp-and-javascript)，但无法弄清楚如何实施他的解决方案。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-05T00:16:14.350

编辑：您在 C# 中使用 UTF-16，您必须在两种语言中使用相同的编码：

节点.js：

```
var crypto = require("crypto");
var sha256 = crypto.createHash("sha256");
sha256.update("ThisPassword", "utf8");//utf8 here
var result = sha256.digest("base64");
console.log(result); //d7I986+YD1zS6Wz2XAcDv2K8yw3xIVUp7u/OZiDzhSY= 
```

C＃：

```
SHA256 sha256 = SHA256Managed.Create(); //utf8 here as well
byte[] bytes = sha256.ComputeHash(Encoding.UTF8.GetBytes("ThisPassword"));
string result = Convert.ToBase64String(bytes);
Console.WriteLine(result); //d7I986+YD1zS6Wz2XAcDv2K8yw3xIVUp7u/OZiDzhSY= 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:07:29.890

如果您使用来自 System.Web.Security 的 .NET Framework 的内置 SqlMembershipProvider 类，则哈希在生成时包含盐值和密码材料。简单地在你的 node.js 中单独对密码进行散列将永远不会产生与数据库中的散列相同的结果。

请参阅[Microsoft ASP.NET 2.0 Providers: Introduction](http://msdn.microsoft.com/en-us/library/aa478948.aspx)以获取提供程序的 .NET 源代码链接，您可以通过该链接了解如何应用 salt 值。

如果您需要更多帮助，则需要包含您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T11:48:32.483

我创建了节点 pbkdf2 模块（来源[https://github.com/fundon/pbkdf2](https://github.com/fundon/pbkdf2)）

所需节点 >= 0.11.11

```
var pbkdf2 = require('pbkdf2');
var p = 'password';
var s = pbkdf2.generateSaltSync(32);
var pwd = pbkdf2.hashSync(p, s, 1, 20, 'sha256');
var bool = pbkdf2.compareSync(pwd, p, s, 1, 20, 'sha256'); 
```

# html - HTML 5 拖放

> ID：13714106
> 
> 赞同：2
> 
> 时间：2012-12-04T23:56:38.183
> 
> 标签：html, drag-and-drop

我想用一些菜单制作一个侧边栏，菜单应该可以拖放！

这是代码：

```
 <div class="sidebar"  ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="about" draggable="true"  ondragstart="drag(event)" id="about">
                    <div class="top"><p>about us</p></div>
                    <p class="about"></p>
                </div>
                <div class="contact" draggable="true"  ondragstart="drag(event)" id="contact">
                    <div class="top"><p>contact us</p></div>
                    <form class="contact" action="script/mail.php" method="post" target="ifrm">
                     //Some INPUT
                    </form>
                    <div class="clear"></div>
                </div>
            </div> 
```

拖放现在运行良好，但也可以将“关于我们”和“联系我们”拖放到彼此或表单输入中，我想禁用它！我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:49:06.987

了解[事件冒泡](https://stackoverflow.com/q/4616694/8655)，然后签`event.target`入您的`drop()`和`allowDrop()`函数。

# sql - 从现有表中填充多对多表

> ID：13714114
> 
> 赞同：2
> 
> 时间：2012-12-04T23:57:19.273
> 
> 标签：sql, database, many-to-many

我有两个现有的表，其中填充了数据

表 A --tableA_id --contentA

表 B --tableB_id --contentB

现在，我想创建一个多对多关系表

表 A_B --tableA_id --tableB_id

问题是如何编写一个 sql 脚本（我是 sql 新手）使用表 A 和表 B 中的现有数据填充表 A_B。非常感谢，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:04:16.973

如果要填充表 A_B，则必须这样做：

```
INSERT INTO A_B (tableA_id, tableB_id)
SELECT A.ID, B.ID FROM A CROSS JOIN B 
```

CROSS JOIN 将表 A 中的每一行与表 B 中的每一行相关联。

如果要将表 A 中的某些行与表 B 中的某些行相关联，则需要更具体，并执行以下操作：

```
INSERT INTO A_B (tableA_id, tableB_id)
SELECT A.ID, B.ID FROM A INNER JOIN B
ON A.some_field = B.some_other_field 
```

# regex - 如何在 AWK 中的两个表达式之间获取一个单词？

> ID：13714117
> 
> 赞同：1
> 
> 时间：2012-12-04T23:57:27.860
> 
> 标签：regex, text, awk

我想使用 AWK 从这样的 html 中获取名称：

```
span class="full-name" span class="given-name" John /span span class="family-name" Doe /span  /span 
```

所以我想从中提取`John`和提取`Doe`，通过切割`... "given-name"`直到之后的部分`/span`以及姓氏。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:50:27.687

我不确定您关于`<`和`>`符号的问题发生了什么。据我了解，您的 html 如下所示：

```
<span class="full-name"><span class="given-name">John</span><span class="family-name">Doe</span></span> 
```

您可以`GNU grep`像这样使用来获取所需的标签：

```
grep -oP '(?<=-name">)[^<]*' file 
```

结果：

```
John
Doe 
```

# javascript - 尝试重新加载框架时不安全的 JavaScript 尝试

> ID：13714118
> 
> 赞同：2
> 
> 时间：2012-12-04T23:57:38.877
> 
> 标签：javascript, frame, reload

这很烦人。我正在努力做到这一点，以便当我按 F5 时，框架会重新加载。我已经知道了，如果焦点在主页（而不是 iframe）上，它就可以工作。但是，当我尝试实施类似的解决方案，甚至尝试与 iframe 进行通信时，我会收到“不安全的 JavaScript 尝试访问框架”。更具体地说，确切的错误是：

> 不安全的 JavaScript 尝试从 URL [http://spow.tk/projects/Explorer/02/的框架访问具有 URL](http://spow.tk/projects/Explorer/02/) [http://www.spow.tk/projects/test](http://www.spow.tk/projects/test)的框架。域、协议和端口必须匹配。

请帮忙，因为这真的很痛苦。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:16:47.110

这两个站点位于不同的域上。由于 Javascript 的安全限制，您不能跨域编写脚本。查看[Wikipedia](http://en.wikipedia.org/wiki/Same_origin_policy)或[Mozilla](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)了解更多信息（引用 Mozilla 以防止链接失效）：

> 同源策略防止从一个源加载的文档或脚本从另一个源获取或设置文档的属性。该政策可以追溯到 Netscape Navigator 2.0。
> 
> 如果两个页面的协议、端口（如果指定）和主机相同，则 Mozilla 认为两个页面具有相同的来源。下表给出了与 URL [http://store.company.com/dir/page.html](http://store.company.com/dir/page.html)的来源比较示例：

```
URL                                                 Outcome   Reason
http://store.company.com/dir2/other.html            Success  
http://store.company.com/dir/inner/another.html Success  
https://store.company.com/secure.html           Failure   Different protocol
http://store.company.com:81/dir/etc.html            Failure   Different port
http://news.company.com/dir/other.html          Failure   Different host 
```

> 同源规则有一个例外。脚本可以将 document.domain 的值设置为当前域的后缀。如果这样做，则较短的域将用于后续的来源检查。例如，假设[http://store.company.com/dir/other.html](http://store.company.com/dir/other.html)文档中的脚本执行以下语句：
> 
> document.domain = "company.com"; 该语句执行后，页面将通过[http://company.com/dir/page.html](http://company.com/dir/page.html)的来源检查。但是，同理，company.com 无法将 document.domain 设置为 othercompany.com。
> 
> 端口号由浏览器单独保存。对 setter 的任何调用，包括 document.domain = document.domain 都会导致端口号被 null 覆盖。因此，仅在第一个设置 document.domain = "company.com" 无法使 company.com:8080 与 company.com 对话。它必须在两者中设置，以便端口号都为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:20:21.460

`spow.tk`并且`www.spow.tk`被认为是不同的域。

但是，您可以做的一件事是强制您的网站使用其中一种，以免再次出现此问题。例如，如果您使用的是 Apache，您可以修改您的`.htaccess`以将所有请求重定向`spow.tk`到`www.spow.tk` （或者如果您喜欢的话）`www.spow.tk`。`spow.tk`即使您的用户或代码引用了一个域，请求也会被重定向到您指定的域。

# java - 在单独的类中有一个 ActionListener 使用原始类中 JTextfield 的数据

> ID：13714119
> 
> 赞同：3
> 
> 时间：2012-12-04T23:57:44.827
> 
> 标签：java, swing, awt, actionlistener, jtextfield

我正在尝试学习 Swing 和 JFrame，因此我正在创建一个非常简单的程序，它会询问您的姓名，然后显示一个框，告诉您输入的内容。我正在尝试使用与第一个类不同的类来充当 ActionListener 并显示输入的名称。但是它对我不起作用。我尝试在第二个类中创建一个构造函数，将实例变量设置为 JTextfield 中采用的值，但它没有像我预期的那样显示。请看一看;

![提示画面](../Images/2afa6030072ef50bea85c7c906208162.png)

![我想让它说](../Images/bf66dab5a4d405a9cb23732843497421.png)

这是我的代码（我已经正确导入了所有库，但为了空间而省略了）

这是主要课程...

```
public class NamePrompt extends JFrame{

    private static final long serialVersionUID = 1L;

    String name;

    public NamePrompt(){

        setLayout(new BorderLayout());

        JLabel enterYourName = new JLabel("Enter Your Name Here:");
        JTextField textBoxToEnterName = new JTextField(21);
        JPanel panelTop = new JPanel();
        panelTop.add(enterYourName);
        panelTop.add(textBoxToEnterName);

        JButton submit = new JButton("Submit");
        submit.addActionListener(new SubmitButton(textBoxToEnterName.getText()));
        JPanel panelBottom = new JPanel();
        panelBottom.add(submit);

        //Add panelTop to JFrame
        add(panelTop, BorderLayout.NORTH);
        add(panelBottom, BorderLayout.SOUTH);

        //JFrame set-up
        setTitle("Name Prompt Program");
        //setSize(300, 150);
        pack();
        setLocationRelativeTo(null);

    }

public static void main(String[] args) {
    NamePrompt promptForName = new NamePrompt();
    promptForName.setVisible(true); 
} 
```

}

这是 ActionListener 类：

```
public class SubmitButton implements ActionListener {

    String nameInput;

    public SubmitButton(String textfield){
        nameInput = textfield;
    }

    @Override
    public void actionPerformed(ActionEvent submitClicked) {
        Component frame = new JFrame();
        JOptionPane.showMessageDialog(frame , "You've Submitted the name " + nameInput );
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:08:00.327

您在创建类 时将一个空值传递给类，并且一旦文本更改，它就永远不会更新，`String`因此不会显示任何内容。`ActionListener``SubmitButton``JTextField` `textBoxToEnterName`

您可以`textBoxToEnterName` `JTextField`在需要时传递 以访问该值：

```
class SubmitButtonListener implements ActionListener {

    private JTextField textfield;

    public SubmitButtonListener(JTextField textfield) {
        this.textfield = textfield;
    }

    @Override
    public void actionPerformed(ActionEvent submitClicked) {
        Component frame = new JFrame();
        JOptionPane.showMessageDialog(frame, "You've Submitted the name "
                + textfield.getText());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:28:00.427

我认为您应该将 SubmitButton 类作为 NamePrompt 类的内部类。这样您就可以使用文本字段的变量，而不必将其传递给新类，这可能会使事情复杂化。

```
class SubmitButton implements ActionListener {

//     Do not need this
   // public SubmitButton(String textfield){
     //   nameInput = textfield;
   // }

@Override
public void actionPerformed(ActionEvent submitClicked) {
    Component frame = new JFrame();
    JOptionPane.showMessageDialog(frame , "You've Submitted the name " + textBoxToEnterName.getText());
} 
```

但请务必在构造函数之外定义变量，以便内部类可以使用它：

```
public class NamePrompt extends JFrame{

private static final long serialVersionUID = 1L;

JLabel enterYourName;
JextField textBoxToEnterName;
JPanel panelTop;
JButton submit; 
JPanel panelBottom;

String name;

public NamePrompt(){ ..... (set up the variables here) 
```

最后的课程看起来像：

```
 public class NamePrompt extends JFrame{

        private static final long serialVersionUID = 1L;

        String name;
        JLabel enterYourName;
        JTextField textBoxToEnterName;
        JPanel panelTop;
        JButton submit;
        JPanel panelBottom;

        public NamePrompt(){

            setLayout(new BorderLayout());

            enterYourName = new JLabel("Enter Your Name Here:");
            textBoxToEnterName = new JTextField(21);
            panelTop = new JPanel();
            panelTop.add(enterYourName);
            panelTop.add(textBoxToEnterName);

            submit = new JButton("Submit");
            submit.addActionListener(new SubmitButton(textBoxToEnterName.getText()));
            panelBottom = new JPanel();
            panelBottom.add(submit);

            //Add panelTop to JFrame
            add(panelTop, BorderLayout.NORTH);
            add(panelBottom, BorderLayout.SOUTH);

            //JFrame set-up
            setTitle("Name Prompt Program");
            //setSize(300, 150);
            pack();
            setLocationRelativeTo(null);
    }

    class SubmitButton implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent submitClicked) {
            Component frame = new JFrame();
            JOptionPane.showMessageDialog(frame , "You've Submitted the name " + textBoxToEnterName.getText());
        }
    }

    public static void main(String[] args) {
        NamePrompt promptForName = new NamePrompt();
        promptForName.setVisible(true); 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T00:08:39.327

有问题：

```
submit.addActionListener(new SubmitButton(textBoxToEnterName.getText())) 
```

对于您传递字符串而不是文本字段的侦听器，将其更改为接受文本字段:)

并且在

```
public void actionPerformed(ActionEvent submitClicked) {
        Component frame = new JFrame();
        JOptionPane.showMessageDialog(frame , "You've Submitted the name " + nameInput );
    } 
```

询问文本字段的当前值

# android - 葫芦测试设置，ANDROID_HOME 路径

> ID：13714122
> 
> 赞同：0
> 
> 时间：2012-12-04T23:58:28.633
> 
> 标签：android, testing

我正在尝试使用葫芦和 android 进行测试。所以它只是一个启动和安装的葫芦。当我在运行时尝试执行第一个测试时出现问题：

```
calabash-android run myAPP.apk 
```

我得到回应：

```
`raise_if_android_home_not_set': Please set the ANDROID_HOME environment variable (RuntimeError) 
```

如何设置 ANDROID_HOME？我在哪里设置 ANDROID_HOME？根据你的经验，你推荐葫芦吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T08:28:54.423

在 calabash-android 运行命令之前：从终端运行：export ANDROID_HOME=/Applications/adt-bundle-mac-x86_64/sdk

您是否将路径替换为 sdk 的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:08:55.000

编辑您的 ~/.profile 文件并添加以下行：export ANDROID_HOME=PATH_TO_WHERE_SDK_INSTALLED

其中 PATH_TO_WHERE_SDK_INSTALLED 替换为 android sdk 的实际路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T02:11:02.423

```
export PATH=$PATH:/opt/ActiveTcl-8.5/bin 
```

重新启动 shell 以使更改生效或获取它，即：

```
source .bashrc 
```

有关设置 Calabash 的更多信息，请参阅我的博客：whitneytaylorimura.wordpress.com

# php - 可选表单 - 如何删除“此页面已使用数据...”消息？

> ID：13714123
> 
> 赞同：0
> 
> 时间：2012-12-04T23:58:36.073
> 
> 标签：php, html, forms, header

> **可能重复：**
> [我对 PHP Post/Redirect/Get 感到困惑](https://stackoverflow.com/questions/7681755/i-am-confused-about-php-post-redirect-get)

我在页面上有一个表单，所以当我重新加载页面时，我收到“此页面已使用数据，您确定要刷新”消息。

我查看了 HTTP-303 响应代码，它消除了消息（我在 Chrome 顺便说一句），直到我提交一次表单，然后它又开始骚扰我。

基本上，我有一个可选的“联系我”表单，如果页面被刷新，它不应该抛出提示。我不认为/明白为什么我需要一个单独的页面来提交这样的简短表格。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:23:18.627

**最终解决方案：如何防止表单重新提交，在同一页面上**

1.  你应该有`action="something"`标签。在 HTML5 中是必需的
2.  检查是否提交了表单。如果你不这样做，并且有一个`header('Location: ...')`它会像一个无限循环（废话）。所以像`if (isset($_POST['some_submit_btn'])) {`
3.  你处理逻辑吗
4.  做`header('Location: same_page')`（例如：）`header('Location: ' . $_SERVER['PHP_SELF'])`和`exit`

即使在提交表单之后，您的页面现在也可以定期刷新。重定向清除 POST 请求或其他任何内容。

其他人指出 Ajax 是一种更简单的解决方案。我已经接受它作为答案，但如果有人想这样做，我把它作为参考。

**注意**：如果要在两个页面之间传递数据/刷新，则必须通过会话或 cookie 传递（我更喜欢会话）。我认为没有“干净”的解决方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:12:17.440

您最好的选择是使用[Ajax](http://www.w3schools.com/ajax/default.asp)。这样你就不需要重新加载。我通常将它与[JQuery](http://www.w3schools.com/jquery/default.asp)一起使用。
所以你最终会得到类似的东西：

```
function send_message(vMessage,vWho) {
    $.ajax({
        url:"messageSender.php",
        data:{message:vMessage,from:vWho},
        type:"POST",
        success:function(result) {
            // DO SOMETHING HERE, LIKE AN ALERT
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T00:02:36.273

保存表单数据后，您需要重定向。它可以在同一页面上完成，这不是问题，您只需要发出 GET 请求而不是 POST。

# ruby-on-rails - Git push origin master 致命错误：railstutorial/first_app.git 的权限被拒绝

> ID：13714124
> 
> 赞同：1
> 
> 时间：2012-12-04T23:58:43.937
> 
> 标签：ruby-on-rails, git, railstutorial.org

我正在尝试使用 Michael Hartl 的 rails 教程（first_app）来 git push origin master，但我遇到了这个问题：

```
[first_app]$git push origin master
ERROR: Permission to railstutorial/first_app.git denied to tomkim
fatal: The remote end hung up unexpectedly 
```

我重新输入了 SSH 密钥，但不是这样。我以前从来没有遇到过这个问题，但现在我遇到了。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T01:53:33.220

你需要添加你自己的repo作为远程（当然你需要先`first_app`在Github上创建一个repo）：

```
$ git remote rm origin
$ git remote add origin git@github.com:tomkim/first_app.git
$ git push -u origin master 
```

是你`tomkim`的 github 帐户名，对吗？如果没有，请将其更改为您的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:27:08.893

我能够弄清楚这一点。我注意到原点显示“ `railstutorial/first_app.git`”，它应该是`tomkim310/first_app.git`。开始的问题是按照 Hartl 的教程进行操作，我只是在他说的时候打字。简单地做一个新的“ `git remote add origin git@github.com:tomkim310/first_app.git`”并不能解决问题。

我通过输入验证了这一点：`git remote -v`which give `origin git@github.com:railstutorial/first_app.git`. 要更改它，我键入：`git config remote.origin.url git@github.com:tomkim310/first_app.git`。

然后，这成功了`git push origin master`。

# android - 无法在 Kindle Fire 上启用我的键盘

> ID：13714125
> 
> 赞同：0
> 
> 时间：2012-12-04T23:58:45.347
> 
> 标签：android, kindle, ime, kindle-fire

我开发了一个键盘应用程序，它在 Kindle Fire 上表现出奇怪的行为。具体来说，我无法启用它。

安装应用程序后，我转到设置/语言和键盘/键盘。然后我单击复选框以启用我的键盘，然后单击警告上的确定。这是它变得奇怪的时候：然后我单击“默认”将其设为默认值，但它不在可用键盘列表中。当我关闭对话框时，我刚刚选中（启用它）的复选框未选中！

我正在使用 Kindle Fire 模拟器，但我收到了来自使用 Kindle 设备的用户的相同错误报告。我的应用在非 Kindle Android 设备上运行良好。任何帮助深表感谢。

在此先感谢，巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:19:43.850

Kindle Fire 中的键盘选择菜单被[禁用](http://www.amazon.com/forum/kindle?_encoding=UTF8&cdForum=Fx1D7SY3BVSESG&cdThread=TxW7NVSIV8VQ18)。

# javascript - Chrome 扩展程序：如何显示查找栏并为其提供文本？

> ID：13714127
> 
> 赞同：7
> 
> 时间：2012-12-04T23:58:53.123
> 
> 标签：javascript, google-chrome-extension

我正在制作一个扩展程序，将当前活动网页中的选定文本存储到本地存储中，然后当用户在我的扩展程序弹出窗口中单击此选定文本时，扩展程序将触发 chrome.tabs.create 并打开选定文本所在的网站选择。这些功能有效，但我不知道如何在新标签打开时触发“查找”功能。我希望新创建的选项卡高度选择我的扩展存储的文本。我认为有两种方法可以做到这一点......

1.  以某种方式触发浏览器默认具有的“查找”功能。带有“Ctrl+F”或“Command+F”的触发器并在其中插入选定的文本

2.  通过突出显示选定的文本来编辑新创建页面的 HTML。

```
new_source = { "url" : tab[0].url, "title" : tab[0].title, "quote" : selectedQuote, "id" : idSource};
sources.push(new_source);
localStorage["sources"] = JSON.stringify(sources); 
```

这就是我存储信息的方式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T01:29:40.703

您无法触发 Chrome 的本机查找对话框，但您可以调用[`window.find()`](https://developer.mozilla.org/en-US/docs/DOM/window.find). 本机对话框之间的主要区别`find()`是

1.  `find()`仅突出显示页面中的一个匹配项，而本机对话框突出显示所有匹配项。准确地说，`find()`将首先突出显示最接近文档顶部的匹配项，重复调用会将其移到页面下方。

2.  `find()`将以默认的蓝色突出显示所选文本，而 Chrome 的查找对话框以橙色突出显示其匹配项。然而，这可以通过修改伪类的`background`CSS 属性来模仿。`::selection`

根据您的用例，这可能就足够了。

但是，如果您想在页面上突出显示*特定*的引用，并且需要考虑该引用的可能重复项，那么这有点棘手，我不确定它是否可以完美地完成。您需要使用 获取所选文本的精确位置[`window.getSelection()`](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)，找到一种方法来识别其`startNode`和`endNode`跨页面重新加载（如果它们有 id，这很容易，但如果没有，您将不得不求助于黑客），然后当页面重新打开时，使用[`Selection.addRange()`](https://developer.mozilla.org/en-US/docs/DOM/Selection/addRange)来恢复它。

# c# - .NET 框架代码在哪里调用来绘制窗口（本机 C++）？

> ID：13714129
> 
> 赞同：0
> 
> 时间：2012-12-04T23:59:11.630
> 
> 标签：c#, .net, winapi, mfc, user32

如果我使用 System.Windows.Forms.MessageBox 类的 show 函数来绘制消息框，则会弹出一个窗口。我想知道绘制这个窗口的实际代码在哪里？它在一些 Win32 API 或 user32.dll 等中吗？通过反射器我无法看到 Show 方法的定义。

另外，.NET 是 win32 api 的包装器吗？我知道，当我们编译 .net 代码时，它会生成 IL，在运行时将其转换为 CPU 特定指令，然后我们的 CPU 会执行这些指令。但我感觉 Windows 操作系统中有一些通用代码负责绘制窗口（或从文本文件读取等）。所有这些语言，如 C++、F#、C#、Java 等，最终都会从框架内调用该代码。但问题是我如何才能找到它并验证它？

例如：在 MFC 或 Win32 中，无论我们调用哪个函数在屏幕上绘制窗口，MessageBox.Show 也调用相同的函数，但它是从我们抽象出来的？

另一方面，我们可以在两种语言之间进行交互。

所以我在这里有点困惑。这些天我也在通过 C# 阅读 CLR，所以我的大脑处于超级兴奋状态:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:12:54.423

我认为你走在正确的轨道上。无论是语言还是框架，最底层都是操作系统，所以一切都到此结束，最终：系统调用。

例如，要在 Windows 中打开文件[`CreateFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)，无论您使用的是 C `fopen`、C++ `ifstream`、C#`System.IO.*`还是 Java ，系统调用都是`java.io.*`。

关于您对 System.Windows.Forms 的问题，它们使用通常的 Win32 窗口，因此这些窗口由`HWND`值标识，在 CLR 中表示为`IntPtr`.

关于显示窗口的功能，您的问题有点误导，因为涉及多个功能，并且 Win32 API 中有多个层。

例如要创建一个窗口，`CreateWindowEx()`如果隐藏调用，则调用 , 以显示它，并且当窗口过程（您必须编写的回调）接收到消息`ShowWindow()`时，将处理绘制本身。`WM_PAINT`但是为了接收消息，您必须编写一个消息泵 ( `GetMessagte() / DispatchMessage()`)。

但是要创建一个简单`MessageBox()`的函数，已经有一个函数可以为您完成所有这些工作：[`MessageBox()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)，`System.Windows.Forms.MessageBox`该类是一个直接包装器。

那么现在，问题是什么？啊，是的，我们可以`System.Windows.Forms`和Win32互操作吗？**是的！**

# regex - Perl正则表达式替换？

> ID：13714131
> 
> 赞同：1
> 
> 时间：2012-12-04T23:59:25.187
> 
> 标签：regex, perl

我正在检查是否可以替换这样的包含：

```
#include <pathFoo/whatever.H> 
```

和：

```
#include "whatever.H" 
```

为此，我将使用 -i 开关，但要检查我是否正确执行此操作，我只是使用不带 -i 的 -p 开关。我有以下命令：

```
perl -p -e 's/<pathFoo\/\(.*\)>/"$1"' thefile 
```

但这不是很有效，我不确定哪一部分是关闭的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:02:52.893

你不想逃避括号，即：

```
perl -p -e 's/<pathFoo\/(.*)>/"$1"/' thefile 
```

应该为你工作。

还要注意结尾`/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:05:44.770

```
perl -i~ -pe's!<pathFoo/(.*)>!"$1"!' file 
```

以下更安全：

```
perl -i~ -pe's!#include\s+\K<pathFoo/(.*)>!"$1"!' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T00:18:40.447

自 TIMTOWTDI 以来，这里有一个双重替换。或者更确切地说是替代和音译：

```
perl -pe 's|^#include\s+<\KpathFoo/|| && tr/<>/""/' 
```

因此，只需先删除该`pathFoo/`部分，如果成功，然后将`<>`字符音译为引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T00:09:38.110

我认为这会让你到达那里：

```
perl -pi -e 's{#include[ ]+<.+?/([^/]+)>}{#include "$1"}g' file 
```

# apache - Maven 快照“生命周期”

> ID：13714136
> 
> 赞同：2
> 
> 时间：2012-12-05T00:00:04.487
> 
> 标签：apache, maven, snapshot

这是我目前对 Maven 如何处理依赖项的理解。

当一个依赖项在 Maven 上积极工作时，会将“-SNAPSHOT”附加到版本的末尾。例如）1.1.1-快照。这些快照被上传到专门负责快照的远程存储库。同一个远程存储库有一个包的已发布版本部分。现在，当项目更新了依赖项时，Maven 会将包的最新版本拉入本地存储库。仅 SNAPSHOTS 会根据快照上的时间戳进行更新。如果 Maven 拉下一个发布版本（例如：1.1.0），它将永远不会寻找具有当前版本的另一个包。

现在我的问题是：

*   我的理解有什么缺陷？我错过了一个概念性的作品吗？
*   当包从 SNAPSHOT 移动到发布版本时，如何更新 pom.xml 以反映包的发布版本？这是手动过程吗？
*   最后，如果发布了一个包，我们将使用上面的示例，发布 1.1.1。是创建了 1.1.2-SNAPSHOT 还是创建了 1.2.0-SNAPSHOT，这是将在 poms 中更新的版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:13:28.107

快照目前处于开发版本中，可能不稳定。

我们是仍然使用 svn 的老式公司：

1.  开发在主干中进行，pom 文件中的版本是快照（我们依赖于一些具有固定版本的开源库，我们会在新版本发生时立即更新它们，我们有信心切换）
2.  一旦我们要发布，我们就会分支主干并将 pom 中的版本更改为对应的固定版本（一些公司可以用后缀 -rc 标记它们）
3.  发布（使用 -rc 的公司会将 pom 中的版本更改为固定版本）

请查看发布 maven 插件以跳过手动版本更改。

我希望这能回答你的一些问题。

关于版本控制答案 - 这取决于。请在此处阅读更多信息：

[http://en.wikipedia.org/wiki/Software_versioning](http://en.wikipedia.org/wiki/Software_versioning)

[最佳实践：软件版本控制](https://stackoverflow.com/questions/2864448/best-practice-software-versioning)

# multithreading - 异步http监听器c#

> ID：13714139
> 
> 赞同：1
> 
> 时间：2012-12-05T00:00:19.183
> 
> 标签：multithreading, http, asynchronous, listener

我正在用 C# 开发一个小型 SMS 服务器，并希望创建一个异步侦听器来处理发送到 SMS 对象（用户名、消息等）的请求。我想将异步侦听器创建为类库。这是代码：

```
using System;
using System.Net;
using System.Threading;

namespace AListener
{
    public class CAListener
    {
        public CAListener()
        {
            Thread listener = new Thread(new ParameterizedThreadStart(RequestListener));
            listener.Start(new string[] { "http://*:11600/" });
        }

        private ManualResetEvent stopListener = new ManualResetEvent(false);
        private object lockListener = new object();
        private bool newRequest = false;

        public void StopListener()
        {
            stopListener.Set();
        }

        public void RequestListener(object parameter)
        {
            string[] prefixes = parameter as string[];

            HttpListener listener = new HttpListener();

            foreach (string prefix in prefixes)
            {
                listener.Prefixes.Add(prefix);
            }

            listener.Start();

            IAsyncResult result = listener.BeginGetContext(new AsyncCallback(ListenerCallback), listener);

            while (!stopListener.WaitOne(10))
            {
                lock (lockListener)
                {
                    if (newRequest)
                    {
                        result = listener.BeginGetContext(new AsyncCallback(ListenerCallback), listener);

                        newRequest = false;
                    }
                }

                result.AsyncWaitHandle.WaitOne(10);
            }

            listener.Close();
        }

        public void ListenerCallback(IAsyncResult result)
        {
            HttpListener listener = (HttpListener)result.AsyncState;

            // Call EndGetContext to complete the asynchronous operation.
            HttpListenerContext context = listener.EndGetContext(result);

            HttpListenerRequest request = context.Request;

            // Obtain a response object.
            HttpListenerResponse response = context.Response;

            // Construct a response. 
            string responseString = "<HTML><BODY> Hello world!</BODY></HTML>";
            byte[] buffer = System.Text.Encoding.UTF8.GetBytes(responseString);

            // Get a response stream and write the response to it.
            response.ContentLength64 = buffer.Length;

            System.IO.Stream output = response.OutputStream;

            output.Write(buffer, 0, buffer.Length);

            // You must close the output stream.
            output.Close();

            lock (lockListener)
            {
                newRequest = true;
            }
        }
    }
} 
```

我有一个 UI 表单，我在其中获取 AListener 对象，这里的一切都很好。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using AListener;

namespace ZNSMS
{
    public partial class ZNSMSServer : Form
    {
        public ZNSMSServer()
        {
            InitializeComponent();
        }

        CAListener ca = null;

        private void button1_Click(object sender, EventArgs e)
        {
            ca.StopListener();
        }

        private void ZNSMSServer_Load(object sender, EventArgs e)
        {
            ca = new CAListener();
        }
    }
} 
```

但是当我按下 Button 时（我只想停止监听器） - 出于某种原因会`listener.Stop()`杀死我的主 UI Form `ZNSMSServer`。当我评论`listener.Stop()`它正在工作时，但我认为这不是正确的方法，我无法理解为什么调用`listener.Stop()`会影响（在这种情况下关闭？）调用对象 - 在这种情况下`ZNSMSServer`。

如果有人以前处理过此类问题，我将不胜感激。提前致谢。

# actionscript-3 - Flash AS3 外墙碰撞检测

> ID：13714141
> 
> 赞同：1
> 
> 时间：2012-12-05T00:00:33.980
> 
> 标签：actionscript-3, flash

我是新来的，需要一点帮助。基本上我正在设计一个类似吃豆人的游戏，它必须基于柳树中的风，所以它是鼹鼠人！

无论如何，我已经完成了它的基础，我已经制作了我的 2d 痣，让他移动，让他对按钮按下等做出反应，现在试图让墙壁工作，从外墙开始。

我在边缘周围制作了 4 个矩形，将它们合并为一个形状，并将其称为“外墙”。我一直在使用 hitTestObject 来尝试让它工作，但没有成功。

我做了一个测试，使它与 moleman.xIncrement = -5 一起工作，这使他立即向后移动而不接触任何墙壁。我很好奇这是否是因为他在墙内，并且将 4 个外墙分类为一个正方形，并且因为他已经在理论上的正方形内，所以将他移出？我不确定。有代码！！

动作层 - 框架 1：

```
import flash.events.KeyboardEvent;

var moleman = this.addChild(new Moleman_mc());

moleman.x = 100;
moleman.y = 200;
moleman.width = 24;
moleman.height = 24;

moleman.xIncrement = 5;
moleman.yIncrement = 0;

stage.addEventListener(KeyboardEvent.KEY_DOWN, doKeyDown);

function doKeyDown (e:KeyboardEvent):void
{
    switch(e.keyCode)
    {
        case Keyboard.UP:
        moleman.xIncrement = 0;
        moleman.yIncrement = -5;
        moleman.rotation = -90;
        break;

        case Keyboard.DOWN:
        moleman.xIncrement = 0;
        moleman.yIncrement = 5;
        moleman.rotation = 90;
        break; 

        case Keyboard.LEFT:
        moleman.xIncrement = -5;
        moleman.yIncrement = 0;
        moleman.rotation = 180;
        break;

        case Keyboard.RIGHT:
        moleman.xIncrement = 5;
        moleman.yIncrement = 0;
        moleman.rotation = 0;
        break;
    }
} 
```

动作层 - 框架 2：

```
import flash.events.Event;

var collectCounter:int = 0;

moleman.x += moleman.xIncrement;
moleman.y += moleman.yIncrement;

if(moleman.hitTestObject(collect))
{
    collectCounter ++;
    collect.visible = false;
}

moleman.addEventListener(Event.ENTER_FRAME, wallHit);

function wallHit(event:Event):void
{
    if(moleman.hitTestObject(outerWalls))
    {
        moleman.stop();
    }
} 
```

动作层 - 第 3 帧：

```
gotoAndPlay(2); 
```

此外，我无法让收集（例如收藏品）工作，计划是这样每次你收集一个“收集”项目时，一个消失，你添加一个到 collectCounter 但所有其他保持可见。目前，如果您收集一个“收集”物品，moleman 会停下来并留在原地，而另一个moleman 会出现并继续，这不是很有用。对此的任何帮助也将不胜感激，不知道从那里得到它。

非常感谢任何帮助，我是新来的，但希望它能顺利进行:)

非常感谢所有帮助。约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:34:22.240

在您检测碰撞的情况下，您应该使用 hitTestPoint 方法而不是 hitTestObject。hitTestPoint 方法具有签名：

```
public function hitTestPoint(x:Number, y:Number, shapeFlag:Boolean = false):Boolean 
```

因此，当 shapeFlag 设置为 true 时，可以检测与点（您的英雄）和迷宫形状（或任何其他任意形状）的碰撞。这种方法非常强大，因为计算的是与真实形状的交集，而不是它的边界框。修改后的 wallHit 方法可能如下所示：

```
moleman.addEventListener(Event.ENTER_FRAME, wallHit);
function wallHit(event:Event):void
{

    if(outerWalls.hitTestPoint(moleman.x, moleman.y, true))
    {
      // collision
      moleman.x += -moleman.xIncrement;
      moleman.y += -moleman.yIncrement;
      moleman.xIncrement=0;
      moleman.yIncrement=0;
    }

    moleman.x += moleman.xIncrement;
    moleman.y += moleman.yIncrement;

if(moleman.hitTestObject(collect))
{
    collectCounter ++;
    collect.visible = false;
}

} 
```

您也可以删除第 3 帧和“gotoAndPlay(2);” 调用，因为最好将控制英雄位置的代码放入 ENTER_FRAME 处理程序。

# php - 什么 mediawiki 需要钩子来编写插件，该插件将在里面添加 html

> ID：13714143
> 
> 赞同：0
> 
> 时间：2012-12-05T00:00:40.380
> 
> 标签：php, mediawiki

这个问题**只针对对 MediaWiki 插件编程有一定经验的人**。

我想**用 use plugin 和 html 在页面顶部放置一些标题**。我需要将**一些 html 代码作为`<body>`打开**后的第一个标签，但不知道我应该使用哪个钩子或方法来实现目标 - Mediawiki 有太多钩子可供选择，请建议一个。

[http://www.mediawiki.org/wiki/Manual:Hooks](http://www.mediawiki.org/wiki/Manual:Hooks)

插件运行后的结果应该是这样的：

```
<< Custom header>>
-----
<< Unchanged Mediawiki page >> 
```

你能帮忙解决这个小问题吗？

一种可能的解决方案是注入一些 JavaScript 来创建 HTML，但它是人为的，它不适用于 Google Search Bot。

我认为许多人想在他们的 MediaWiki 上添加一些东西，但又不编写和维护另一个皮肤或分支 Mediawiki，它今天得到支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:41:04.170

但是，如果您认为 hooks 是您想要的，我会选择[ParserBeforeTidy](http://www.mediawiki.org/wiki/Manual%3aHooks/ParserBeforeTidy)。钩子列表很长，但分为几个部分，“页面渲染”是您要检查的部分。Parser(Before/After)Tidy 在完全生成的页面上被调用，因此它们提供了最高程度的定制（尽管这可能是不受欢迎的）。

# ruby-on-rails-3 - Actionmailer BCC 不工作

> ID：13714144
> 
> 赞同：3
> 
> 时间：2012-12-05T00:00:49.957
> 
> 标签：ruby-on-rails-3, email, actionmailer

BCC 在 Rails 3 中不起作用吗？我的 TO 和 cc 工作得很好，但 BCC 不起作用。我看到其他人也有类似的问题，所以我想知道是否有人解决了它。我正在使用 actionmailer (3.2.6)。这是我的代码：

mail(:to => email_to, :from => email_from, :bcc => ["example@gmail.com"], :subject => @subject)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:02:01.680

[http://api.rubyonrails.org/classes/ActionMailer/Base.html](http://api.rubyonrails.org/classes/ActionMailer/Base.html)

你做对了。您确定您在密件抄送中使用的地址与您的收件人不同吗？

# windows - 无法在网络驱动器上克隆 GIT 存储库

> ID：13714151
> 
> 赞同：8
> 
> 时间：2012-12-05T00:02:05.263
> 
> 标签：windows, git, version-control, tortoisegit, git-clone

使用 Windows 7，我们在网络驱动器上设置了一个裸 GIT 存储库，以便多个用户可以从中拉/推。我能够在我的本地和多个其他网络驱动器上创建一个新的工作存储库。但是，当我尝试在同一个网络驱动器（不同的文件夹）上克隆一个新的工作存储库时，它会失败。

使用 TortoiseGIT，在我右键单击并选择“GIT Clone”后，将所有必要的路径放入我的裸仓库（新的工作仓库已经填写）并点击确定，我收到以下错误：

```
Cloning into 'R:\path\to\new\repo'... done. 
error: refs/remotes/origin/master does not point to a valid object! 
error: Trying to write ref refs/heads/master with nonexistent object 5d2164db2c61efc7a5598f6ff75ed3fbbb12456e 
fatal: Cannot update the ref 'HEAD'. 
fatal: The remote end hung up unexpectedly git did not exit cleanly (exit code 128) 
```

它无法创建回购。但是，它确实构建了新文件夹和“.git”子文件夹结构。

这不是 ar/w 权限问题，因为我可以 r/w 任何其他文件，但似乎无法创建这个新克隆的 repo。我的同事也不能。即使我到了网络驱动器上的另一个文件夹，我仍然无法成功克隆 repo。令人惊讶的是，如果我只是复制/粘贴我在另一个位置创建的存储库，然后手动执行“拉”，它会成功运行并更新。

关于下一步尝试什么的任何想法？显然我已经用谷歌搜索了“退出代码 128”和“无法更新 ref 'HEAD'”，但找不到解决我的问题的方法。这可能是我们忽略的非常简单的事情，但我们才刚刚开始使用 GIT，这确实让我们头疼......

**更新：**我刚刚注意到，当我从 GIT 手动拉到我的“副本”时，它正在快速前进。也许这提供了一些额外的线索？

```
From R:/path/to/repo
* branch            master     -> FETCH_HEAD
Updating 5d2164d..d75bdb7
Fast-forward
Files.py |    3 +++
1 file changed, 3 insertions(+)
Success 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T00:57:39.400

Git 可能正在尝试使用在网络驱动器上失败的硬链接做一些聪明的事情。尝试使用`git clone --no-hardlinks /r/path/to/my/repo`或`git clone file:///r/path/to/my/repo`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-05T17:49:28.047

请通过 msysgit 中的命令行执行此操作

```
git clone /r/path/to/my/repo /r/some/other/path 
```

此外，我建议从命令行使用 git，因为它是一个旨在从命令行使用的工具。对于遇到的任何问题，您将能够更快地找到更多帮助。

# php - 长度为 8 和字母数字的密码验证正则表达式

> ID：13714154
> 
> 赞同：-2
> 
> 时间：2012-12-05T00:02:14.733
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式匹配混合大小写的单词](https://stackoverflow.com/questions/13410634/regex-to-match-mixed-case-words)

您好，我正在为 CIS 班级开展班级项目。我需要帮助编写一个可以检查密码的正则表达式。密码要求为8位字符，1个大写字母和1个小写字母，至少1个数字。谢谢您的帮助。示例：密码 1

这是我到目前为止所拥有的 `[a-zA-Z0-9]{8}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:25:34.520

这应该做你需要的：

```
$password = "Pasword1";
$pattern = '/^(?=.*\d)(?=.*[A-Z]).{8,}$/';
if(preg_match($pattern, $password))
{
    echo "Good password!";
}
else
{
    echo "Bad password";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:51:03.127

`(?=(regex))`为了做到这一点，您需要进行积极的前瞻。如果您需要正好 8 个字符，并且除了需要 1 个数字、大写和小写字母之外，您还可以使用任何类型的字符，那么您可以使用以下命令：

```
$pattern = '/^(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z]).{8}$/'; 
```

如果您需要 8 个或更多字符而不是简单地修改为：

```
$pattern = '/^(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z]).{8,}$/'; 
```

# tcl - TCL 命令 - 字符串修剪

> ID：13714155
> 
> 赞同：3
> 
> 时间：2012-12-05T00:02:16.367
> 
> 标签：tcl

我正在使用命令“string trimright”来修剪我的字符串，但我发现这个命令修剪的内容超出了要求。

我的表达式是“ **dssss.dcsss** ” 如果我使用字符串修剪命令修剪最后几个字符“.dcsss”，它会修剪整个字符串。我该如何处理？

命令：

```
 set a [string trimright "dcssss.dcsss" ".dcsss"]
     puts $a 
```

预期输出：

```
 dcsss 
```

实际输出

```
 "" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T00:13:10.870

该`string trimright`命令将其（可选）最后一个参数视为一*组*要删除的字符（因此与它`.dcsss`相同`sdc.`），就像`string trim`和`string trimleft`做一样；确实，`string trim`就像同时使用`string trimright`和`string trimleft`连续使用一样。这使它不适合您尝试做的事情；要删除存在的后缀，您可以使用多种技术：

```
# It looks like we're stripping a filename extension...
puts [file rootname "dcssss.dcsss"] 
```

```
# Can use a regular expression if we're careful...
puts [regsub {\.dcsss$} "dcssss.dcsss" {}] 
```

```
# Do everything by hand...
set str "dcssss.dcsss"
if {[string match "*.dcsss" $str]} {
    set str [string range $str 0 end-6]
}
puts $str 
```

如果您正在做的确实是文件名操作，就像看起来一样，请使用这些选项中的第一个。该`file`命令有一些非常有用的命令，用于以跨平台方式处理文件名。

# sql - 为 APEX 饼图放置和未放置的返校学生

> ID：13714157
> 
> 赞同：1
> 
> 时间：2012-12-05T00:02:37.117
> 
> 标签：sql, oracle, oracle-apex

我正在尝试为 APEX 饼图编写查询，该饼图显示有多少学生被安排实习，而哪些学生没有。

有`students`一个主键为`record_number`的表和一个外键指向 的应用程序表`record_number`。应用程序表有一个`status_id`字段是 value `3`，`4`或者`7`如果学生被安排在实习，任何其他值意味着他们没有被安排实习。

到目前为止，这是我的查询，它成功地显示了那些被安排实习的人：

```
SELECT NULL AS link, 'Placed' AS label, COUNT(*) AS value
FROM tbl_students students
JOIN tbl_applications applications USING (record_number)
WHERE applications.status_id IN (3, 4, 7) 
```

这成功返回一行，显示有多少学生被安排实习，但是我需要它再返回一行，显示没有实习的学生数量，同时仍然只有这三个字段`link`（`label`和`value`） .

举个例子，如果我在数据库中有 10 个学生，其中 4 个在实习，查询应该返回以下行：

```
link    |    label    |    value
---------------------------------
(null)  | Placed      | 4
(null)  | Unplaced    | 6 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:17:23.923

下面假设每个 tbl_students 在 tbl_applications 中只有一条记录：

```
SELECT NULL AS link,
       CASE WHEN applications.status_id IN (3,4,7)
            THEN 'Placed' ELSE 'Unplaced'
       END AS label,
       COUNT(*) AS value
FROM tbl_students students
JOIN tbl_applications applications USING (record_number)
GROUP BY CASE WHEN applications.status_id IN (3,4,7)
              THEN 'Placed' ELSE 'Unplaced'
         END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:30:30.417

像这样使用 sql union

SELECT NULL AS 链接，'Placed' AS 标签，COUNT(*) AS value FROM tbl_students students JOIN tbl_applications applications USING (record_number) WHERE applications.status_id IN (3, 4, 7)

联盟

选择 NULL AS 链接，“未放置”AS 标签，COUNT(*) AS 值 FROM tbl_students 学生加入 tbl_applications 应用程序使用（记录编号）WHERE applications.status_id 不在（3、4、7）

# python - 在 Python 中使用套接字进行 Tor 连接

> ID：13714161
> 
> 赞同：2
> 
> 时间：2012-12-05T00:03:12.417
> 
> 标签：python

我正在尝试编写一个脚本，在其中通过 Python 中的 Tor 建立连接。我目前可以连接到 Tor 并请求一个新的 ip NEWNYM，但我似乎无法发送数据。永远不会收到数据。

Tor 永远不会与结果地址建立连接。

没有建立任何联系......我已经尝试了大约 5 天的很多事情。我将不胜感激任何人都可以提供的帮助

*干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:04:52.357

我强烈推荐[SocksiPy](http://socksipy.sourceforge.net "袜子皮")。它非常易于使用，一旦你建立了连接，它就像一个普通的 TCP 套接字一样工作。以下是他们 SourceForge 页面的简短示例：

```
>>> import socks
>>> s = socks.socksocket()
>>> s.setproxy(socks.PROXY_TYPE_SOCKS5,"socks.example.com")
>>> s.connect(("www.example.com",80))
>>> 
```

我已经在几个大型项目中使用它，没有任何问题。如果您经常需要直接与 SOCKS5 服务器交互（即使那样，它也可能能够满足您的需求），它可能并不是您想要的，但在绝大多数情况下，SocksiPy 不仅仅是充足的。

# javascript - 阻止 iframe 页面重定向

> ID：13714162
> 
> 赞同：0
> 
> 时间：2012-12-05T00:03:15.193
> 
> 标签：javascript, html, iframe

[http://kenzshop.com/lightbox/](http://kenzshop.com/lightbox/)

用户在输入字段中输入 url，然后单击“转到”按钮。页面应该只在 iframe 中查看。但是当输入像 espn.com 这样的 URL 时，点击按钮，页面会立即显示，然后整个页面 (kenzshop.com/lightbox) 将重定向到 espn.com。

此外，当我在 iframe 中尝试 yahoo.com 时，什么也没有发生。这里有什么错误编码吗？或者只是这些网站中的某些内容不允许在 iframe 中查看？

另外，不确定是否可以在同一个线程中询问这个问题，但是有没有一种方法可以让用户单击键盘上的 Enter 按钮，从而产生与单击“转到”按钮相同的效果？

```
<script type="text/javascript">
<!--//
function urlink(iframe,src){
document.getElementById(iframe).src = src;
}
//-->
</script> 
```

</头>

```
<div style="background-image: url('https://s3.amazonaws.com/cloud-host.mobi/preview- iphone4g.png'); width: 327px; height: 730px; padding: 135px 28px 0px 33px; background-repeat: no-repeat;">

<form>
<div style="position:relative; top:9px; left:2px;"><input style="float:left;"type="text" size="40" value="http://" name="url">
<input type="button" onclick="urlink('I1',this.form.url.value)" value="Go To"></div>
</form>

<iframe id="I1" src="" style="height: 489px; width: 327px;" frameborder="0" marginwidth="0" scrolling="yes" width="320" height="240"></iframe> 

</div> 
```

谢谢！！肯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:08:16.477

`espn.com`可能有一些 JavaScript 可以让自己脱离 iframe。恐怕你在那里无能为力。不过，大多数网站都没有这个。

对于回车按钮，使用`<form>`带有 action 参数的标签。把它包在你的`<input>`盒子上。有关示例，请参见[http://www.w3schools.com/tags/tag_form.asp](http://www.w3schools.com/tags/tag_form.asp)。

# c++ - 2 C++ typedef 相互引用 - 迭代器

> ID：13714163
> 
> 赞同：2
> 
> 时间：2012-12-05T00:03:20.643
> 
> 标签：c++

C++

我想创建两种类型的地图，每一种都返回一个迭代器。我已将我的代码缩减为以下代码，这会导致语法错误，因为在 AddressMap 的声明中遇到 CacheList 时未定义。有没有办法做到这一点？

```
typedef map<void*,CacheList::iterator> AddressMap;
typedef map<void*,AddressMap::iterator> CacheList; 
```

# java - 如何为 Integer.class 编写匹配器

> ID：13714164
> 
> 赞同：1
> 
> 时间：2012-12-05T00:03:25.480
> 
> 标签：java, junit, mockito

我正在尝试编写一个单元测试，但我似乎无法弄清楚如何为 Integer.class 编写一个 Mockito 匹配器。

我正在尝试测试以下方法：

```
public List<Integer> getAllParticipatingChallengesByTeamId(int teamId) {
        List<Integer> challengeIds = new ArrayList<Integer>();
        MapSqlParameterSource args = new MapSqlParameterSource();

        args.addValue("teamId", teamId);
        try {
            challengeIds = jdbcTemplate.queryForList(SQL_STRING, args, Integer.class);
        } catch (Exception e) {
            challengeIds = null;
        }

        return challengeIds;
    } 
```

通过使用像这样的匹配器将我的模拟 jdbcTemplate 存根以返回一个值：

```
 when(mockJdbc.queryForList(anyString(), any(SqlParameterSource.class), any(Integer.class)).thenReturn(integerList); 
```

但当然，它匹配任何整数，而不是任何类！我尝试了 Class.class 等，但我似乎无法在网上或通过我自己的方式弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:14:52.377

使用`eq(Integer.class)`which 是 Mockito 中的相等匹配器

# restkit - RestKit 0.2 — 错误域=org.restkit.RestKit.ErrorDomain 代码=1001

> ID：13714167
> 
> 赞同：2
> 
> 时间：2012-12-05T00:03:49.867
> 
> 标签：restkit

我刚刚更新到 RestKit 0.20，我正用头撞我的桌面，试图弄清楚为什么我的 Album 对象无法映射。响应对象没有 keyPath——但之前将其设置为 @"" 有效。

这是返回的数据片段：

```
[
  {
    id: "337",
    title: "Hockey",
    description: "",
    location: "",
    date_created: "1353424563",
    date_modified: "1353424563",
    featured_image: "album_default.png",
    featured_thumb_link: "http://test1.keepsayk.com//images/album_default.jpg",
    featured_main_link: "http://test1.keepsayk.com/img/album_default.png",
    feat_img_type: "image",
    public: "0",
    default_album: "",
    owner_fname: "Mike",
    owner_lname: "Rose",
    owner_id: "102",
    recent_media: false,
    last_media_added_date: false,
    tags: [ ],
    circles: [],
    media: [ ],
    image_count: 0,
    video_count: 0,
    text_count: 0,
    audio_count: 0,
    comments: [ ],
    scrapbook: [ ]
  },
  {
    id: "336",
    title: "Bull",
    description: "",
    location: "",
    date_created: "1353420585",
    date_modified: "1353420585",
    featured_image: "album_default.png",
    featured_thumb_link: "http://test1.keepsayk.com//images/album_default.jpg",
    featured_main_link: "http://test1.keepsayk.com/img/album_default.png",
    feat_img_type: "image",
    public: "0",
    default_album: "",
    owner_fname: "Mike",
    owner_lname: "Rose",
    owner_id: "102",
    recent_media: false,
    last_media_added_date: false,
    tags: [ ],
    circles: [],
    media: [ ],
    image_count: 0,
    video_count: 0,
    text_count: 0,
    audio_count: 0,
    comments: [ ],
    scrapbook: [ ]
  },
  ...
] 
```

这是我在 App Delegate 中的代码：

```
// restkit object manager
    _objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://test1.keepsayk.com"]];
    [AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

// restkit object store
    _objectManager.managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:[self managedObjectModel]];
    [_objectManager.managedObjectStore createPersistentStoreCoordinator];
    [_objectManager.managedObjectStore createManagedObjectContexts];

// setup album object
RKEntityMapping *albumEntityMapping = [RKEntityMapping mappingForEntityForName:@"KeepsaykAlbum" inManagedObjectStore:_objectManager.managedObjectStore];
    albumEntityMapping.identificationAttributes = @[@"identifier"];
    [albumEntityMapping addAttributeMappingsFromDictionary:@{ @"id" : @"identifier", @"title" : @"keepsaykTitle", @"description" : @"keepsaykDescription", @"date_created" : @"dateCreated", @"date_modified" : @"dateModified", @"featured_thumb_link" : @"featuredImageThumbLink", @"featured_main_link" : @"featuredImageLink", @"public" : @"isPublic", @"default_album" : @"isDefaultAlbum", @"owner_fname" : @"ownerFirstName", @"owner_lname" : @"ownerLastName", @"owner_id" : @"ownerIdentifier", @"last_media_added_date" : @"dateMediaModified", @"image_count" : @"imageCount", @"video_count" : @"videoCount", @"text_count" : @"textCount", @"audio_count" : @"audioCount", @"scrapbook" : @"scrapbookLayouts" }];

    [_objectManager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:albumEntityMapping pathPattern:@"albums/display/:userID/:apiKey" keyPath:@"" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]]; 
```

我在另一个类中调用 get 方法——在日志中跟踪资源路径：

```
- (void)loadObjectsFromResourcePath:(NSString *)resourcePath;
{
    NSLog(@"resource path: %@", resourcePath);

    [RKObjectManager.sharedManager getObjectsAtPath:resourcePath parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        NSLog(@"mapping result: %@", [mappingResult array]);
        [self stopLoading];
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"error: %@", error);
        [self stopLoading];
    }];
} 
```

这是我的错误日志：

```
 2012-12-04 17:48:47.437 Keepsayk Alpha[9036:907] I restkit:RKLog.m:34 RestKit logging initialized...
    2012-12-04 17:48:47.703 Keepsayk Alpha[9036:907] I restkit.support:RKMIMETypeSerialization.m:115 JSON Serialization class 'RKNSJSONSerialization' detected: Registering for MIME Type 'application/json
2012-12-04 17:48:47.696 Keepsayk Alpha[9036:907] resource path: albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba
    2012-12-04 17:48:47.708 Keepsayk Alpha[9036:1603] I restkit.network:RKHTTPRequestOperation.m:141 GET 'http://test1.keepsayk.com/albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba'
    2012-12-04 17:48:47.711 Keepsayk Alpha[9036:907] error (null), (null)
    2012-12-04 17:48:48.995 Keepsayk Alpha[9036:372f] I restkit.network:RKHTTPRequestOperation.m:158 GET 'http://test1.keepsayk.com/albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba' (200)
    2012-12-04 17:48:49.011 Keepsayk Alpha[9036:907] error: Error Domain=org.restkit.RestKit.ErrorDomain Code=1001 "Unable to find any mappings for the given content" UserInfo=0x1d5b7e40 {DetailedErrors=(
    ), NSLocalizedDescription=Unable to find any mappings for the givn content, keyPath=null} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:54:19.480

将 keyPath 设置为 nil 而不是 @""

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:33:34.400

我的资源路径中缺少初始的“/”。

```
[_objectManager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:albumEntityMapping pathPattern:@"/albums/display/:userID/:apiKey" keyPath:@"" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T04:29:45.980

如果有人仍然收到此错误，请检查您的“/”，以便在组合 baseURL 和您的路径时，您不会以“www.mybase.com//blah/blah.json”结尾。此外，如果您更新到最新的 Restkit 代码，截至 2012 年 12 月 8 日，您应该得到一个小修复。Blake 添加了代码以在运行时使用比 1001 更好的描述性进行警告。

# sql-server-2008 - 我期待返回类型为 char，但得到 int

> ID：13714169
> 
> 赞同：0
> 
> 时间：2012-12-05T00:03:52.747
> 
> 标签：sql-server-2008, sql-server-2008-r2

谁能告诉我为什么这会返回一个int类型？

```
ALTER PROCEDURE [dbo].[spTableExists] @TableName char(40), @Exists char(5) OUTPUT  
AS

IF object_id(@TableName) is not null
    select @Exists = 'true'
ELSE
    select @Exists = 'false' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:12:40.217

我认为这是因为@Exists 参数数据类型是“char(5)”。

当数据具有固定长度时，必须使用 Char。

尝试这个：

```
CREATE PROCEDURE [dbo].[spTableExists] @TableName varchar(40), @Exists varchar(5) OUTPUT  
AS

SET @Exists = 'false'
IF object_id(@TableName) is not null
    IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(@TableName) AND type in (N'U'))
    BEGIN
    SET @Exists = 'true'
    END
ELSE
    SET @Exists = 'false'

SELECT @Exists 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:58:27.483

缺少一个`set nocount on`语句，它返回一个行数。因为它不返回任何其他结果，所以它只是做一个赋值，这就是你得到的全部。

# c# - 将 DER 文件加载到 BouncyCastle 私钥中

> ID：13714173
> 
> 赞同：0
> 
> 时间：2012-12-05T00:04:13.463
> 
> 标签：c#, bouncycastle

我正在尝试读取 ECC DER 私钥文件以在 c# 中创建 BouncyCastle 私钥。

```
//Load File
byte[] derKeyBytes = File.ReadAllBytes(@"C:\test.der");
AsymmetricKeyParameter privateKey = PrivateKeyFactory.CreateKey(derKeyBytes); 
```

我收到以下错误。

```
wrong version for private key info 
```

# android - 为什么没有 sqlite 错误代码

> ID：13714175
> 
> 赞同：0
> 
> 时间：2012-12-05T00:04:18.043
> 
> 标签：android, sqlite

为什么我没有收到 SQLite 失败的错误代码？我正在尝试创建一个数据库并获取以下堆栈跟踪（嗯，跟踪的顶部）：

```
E/SqliteDatabaseCpp(11974): sqlite3_open_v2
("/mnt/sdcard/myapp/mydatabase.db", &handle, 6, NULL) failed
E/SQLiteDatabase(11974): Failed to open the database. closing it.
E/SQLiteDatabase(11974): android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
E/SQLiteDatabase(11974):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method) 
```

我的代码在模拟器中工作，在 Nexus 7 上工作，但在另一台设备上失败

```
 public SQLiteDatabase openOrCreateDatabase (String name, int mode,
                                              SQLiteDatabase.CursorFactory factory,
                                              DatabaseErrorHandler errorHandler)
  {
    File f = getDatabasePath (name);
    System.out.println ("opening db: " + f.getPath());
    return super.openOrCreateDatabase (f.getPath(), mode, factory, errorHandler);
  } 
```

这是第二次尝试的完整日志。它与第一个有点不同，但仍然没有错误代码。

```
W/dalvikvm( 3314): threadid=1: thread exiting with uncaught exception (group=0x40a801f8)
E/AndroidRuntime( 3314): FATAL EXCEPTION: main
E/AndroidRuntime( 3314): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp.myapp/com.myapp.myapp.main.MainActivity}: android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
E/AndroidRuntime( 3314):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
E/AndroidRuntime( 3314):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/AndroidRuntime( 3314):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime( 3314):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/AndroidRuntime( 3314):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 3314):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 3314):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime( 3314):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 3314):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 3314):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:812)
E/AndroidRuntime( 3314):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:579)
E/AndroidRuntime( 3314):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 3314): Caused by: android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
E/AndroidRuntime( 3314):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
E/AndroidRuntime( 3314):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1013)
E/AndroidRuntime( 3314):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
E/AndroidRuntime( 3314):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
E/AndroidRuntime( 3314):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:782)
E/AndroidRuntime( 3314):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
E/AndroidRuntime( 3314):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
E/AndroidRuntime( 3314):    at com.myapp.myapp.dbaccess.DatabaseContext.openOrCreateDatabase(DbHelper.java:63)
E/AndroidRuntime( 3314):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
E/AndroidRuntime( 3314):    at com.myapp.myapp.dbaccess.DbHelper.getDb(DbHelper.java:184)
E/AndroidRuntime( 3314):    at com.myapp.myapp.dbaccess.DbHelper.getZRoot(DbHelper.java:650)
E/AndroidRuntime( 3314):    at com.myapp.myapp.dbaccess.ZNodeCache.getRequiredNodes(ZNodeCache.java:37)
E/AndroidRuntime( 3314):    at com.myapp.myapp.dbaccess.ZNodeCache.<init>(ZNodeCache.java:22)
E/AndroidRuntime( 3314):    at com.myapp.myapp.main.MainActivity.onCreate(MainActivity.java:81)
E/AndroidRuntime( 3314):    at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime( 3314):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/AndroidRuntime( 3314):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
E/AndroidRuntime( 3314):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:25:58.310

好吧，这很愚蠢。如果您已连接设备并选择“USB 存储”连接，则 SD 卡将无法访问。故事的寓意：如果您的应用程序访问 sdcard，请不要启用“USB 存储”。

尽管如此，Android 应该会发出一个错误代码——我会提交一个错误。

# jsf - JSF / Java EE 表单与编程身份验证

> ID：13714177
> 
> 赞同：1
> 
> 时间：2012-12-05T00:04:24.200
> 
> 标签：jsf, jakarta-ee, authentication

我一直在试验这个问题的实质（[JSF / Java EE login without required a protected resource](https://stackoverflow.com/questions/13605277/jsf-java-ee-login-without-requiring-a-protected-resource)）。

如果我使用 BASIC 身份验证设置示例应用程序，其中包含一个公共页面 (/public.xhtml) 和一个受保护页面 (/protected/private.xhtml)，并且我有一个从第一页到第二页的链接（如图所示下面），一切正常。

```
<h:commandButton value="Go Private" action="/protected/private?faces-redirect=true" /> 
```

但是，如果我删除`login-config`并将上面的按钮替换为：

```
<h:commandButton value="Go Private" action="#{mybean.login}" /> 
```

...和 ​​#{mybean.login} 看起来像这样...

```
public String login() {
    HttpServletRequest request = ...
    try {
        request.login("known username", "known password");
    } catch (Exception e) {
        // handle unknown credentials
    }
    return "/protected/private?faces-redirect=true";
} 
```

在这种情况下，登录成功（不例外`request.login()`），但浏览器显示“禁止资源”页面。

任何人都可以阐明这两种情况之间的区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:17:28.030

`HttpServletRequest#login()`编程登录仅适用于基于身份验证的`FORM`配置。删除`<login-config>`将使其默认为`BASIC`，因此`login()`永远不会工作。基本上在会话中`login()`设置用户，但是`BASIC`身份验证基本上检查`Authenticate`HTTP 请求标头，而不是会话。

把它放`<login-config>`回去，`FORM`如果你想使用`login()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-12T09:19:07.730

在哪儿：

```
<h:commandButton value="Go Private" action="#{mybean.login}" /> 
```

它应该是：

```
<h:commandButton value="Go Private" action="#{mybean.login()}" /> 
```

如果你想使用登录方法。

但也许你的 mybean 也有

```
String private login;
public String getLogin(){ return this.login ;} 
```

并且您已经为 var 加载了所需的响应。

# java - JPA (EclipseLink) 在没有 Cascade.PERSIST 的情况下保持一对多关系

> ID：13714178
> 
> 赞同：2
> 
> 时间：2012-12-05T00:04:42.143
> 
> 标签：java, jpa, eclipselink

我有两个实体。运动的：

```
@Entity
public class Sports implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column(name = "SPORT_NAME")
    private String name;
...
} 
```

和运动设施：

```
@Entity
public class SportFacility implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column(name = "SPORTFAC_NAME")
    private String name;
    @OneToMany
    private List<Sports> sports;

....
} 
```

然后我在 Sports 表中创建了一些运动，例如：

```
--id-----name-----
- 0  - Football  -   
- 1  - Basketball-
- 2  - Golf      -
------------------ 
```

我需要用一些运动来创建运动设施。让我们参加所有运动

```
 List<Sports> listSports = sb.getAllSports(); //JPQL: SELECT s FROM Sports s

        SportFacility sportFacility = new SportFacility("Stadium", listSports);

        em.getTransaction().begin();            
        em.persist(sportFacility);            
        em.getTransaction().commit(); 
```

错误：

```
java.lang.IllegalStateException: During synchronization a new object was found through a relationship that was not marked cascade PERSIST: database.entities.sports[ id=0 ]. 
```

我不想使用 Cascade.ALL 或 PERSIST，因为表中的运动很少，而且我总是不需要用相同的运动创建新记录...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:46:20.950

有什么作用，

```
sb.getAllSports(); 
```

做？它使用相同的 EntityManager，还是使用不同的？

```
database.entities.sports[ id=0 ] 
```

该错误似乎表明您的一项运动的 id 为 0，这似乎很奇怪？你坚持运动正确吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:54:57.037

异常与以下事实有关：当您尝试持久化 SportFacility 时，您检索到的 Sports 集合不再位于持久化上下文中 - 默认情况下，持久化上下文是事务范围的（在事务开始时创建并在事务结束时销毁） - 和 EL不知道如何处理它无法控制的对象。

移动

```
em.getTransaction().begin(); 
```

到开始。

# rss - 我在哪里可以找到关于 RSS 提要阅读器市场份额的统计数据？

> ID：13714187
> 
> 赞同：0
> 
> 时间：2012-12-05T00:05:50.187
> 
> 标签：rss, rss-reader, usage-statistics

我在互联网上搜索过，找不到关于 RSS 提要阅读器市场份额的最新（相关）统计数据。

最近有没有关于不同 RSS 提要阅读器的市场份额百分比的研究？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:51:27.347

我找不到统计信息，所以我不得不依赖更多的定性来源：

生活黑客：

[http://lifehacker.com/5886059/the-best-news-reader-application-for-linux](http://lifehacker.com/5886059/the-best-news-reader-application-for-linux)

安卓质量指数：

[http://android.qualityindex.com/charts/19000/top-5-news-aggregator-apps-on-android](http://android.qualityindex.com/charts/19000/top-5-news-aggregator-apps-on-android)

《金融时报》推荐这些应用程序：

翻板

谷歌潮流

现场看台

版本

齐特

脉冲

（2012 年 1 月 20 日个人技术 - CHRIS NUTTALL）

这些是去年发布的，所以相当相关。

如果我有时间，我会自己监控使用统计数据，以获取更多经验信息。

# iphone - 带有情节提要的 UITableViewController 子类

> ID：13714188
> 
> 赞同：0
> 
> 时间：2012-12-05T00:05:53.713
> 
> 标签：iphone, ios, uitableview, storyboard, subclass

我有一个 UITableViewController 子类，我想将它与故事板结合使用以设置自定义背景视图。我的子类像这样覆盖 init 方法：

```
-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.tableView.backgroundColor = [UIColor clearColor];
        self.tableView.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:iPhone568ImageNamed(@"background.png")]];
    }
    return self;
} 
```

现在，当我尝试实例化一个新的 tableview 控制器（这是接口定义）时：

```
@interface AVSelectTableViewController : AVCustomTableViewController 
```

对 self.tableView 的任何调用都会导致 init 方法崩溃。故事板中的所有内容看起来都已连接（表数据源和委托指向 AVSelectTableViewController 父级）。

阅读文档，似乎 tableView 属性设置不正确（它只是返回由控制器管理的 tableview）；但是我不确定如何访问它。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:26:48.387

使用 awakeFromNib 代替 initWithCoder

# ruby-on-rails - 将数据集导出为 CSV 不返回完整数据集

> ID：13714189
> 
> 赞同：1
> 
> 时间：2012-12-05T00:06:07.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, csv

我目前正在开发一个大型测量应用程序，该应用程序目前正在 Heroku（Cedar、4 个网络测功机、Crane PostgreSQL 数据库）上生产。由于时间限制，我有一个调查模型，通过 attr_accessible 公开问题。我希望导出天数结果，通常是 5000 多行数据，大约 45 列。

当我导出当天的调查（`Survey.where("created_at >= ?", Time.now.beginning_of_day)`）时，使用[this](http://railscasts.com/episodes/362-exporting-csv-and-excel)和[this](http://pro.benjaminste.in/post/437368566/huge-csv-data-exports-in-rails)的组合，它会提示下载，下载，但是当我打开它时，我只有大约 2/3 的数据。有时它会在一行中途中断。

似乎我遇到了某种内存问题，或者将所有内容正确发送到 Excel/CSV 的问题。我确信这是因为数据大小，但我无法控制，我只是想找出问题所在。关于如何尝试解决此问题的任何想法？这是相当虚弱的。

这是处理 CSV/Excel 写入的调查模型中的代码：

```
 def self.to_csv(options = {})
    CSV.generate do |csv|
      csv << column_names
      all.find_each do |survey|
        csv << survey.attributes.values_at(*column_names)
      end
    end
  end 
```

目前在控制器上，我将所有内容格式化为 index.xls.erb。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:01:10.507

我解决了这个问题！经过一番摸索，我从使用 HTML 格式的视图/xls 文件切换到只做一个准系统 CSV ，在视图中格式化，如this [answer](https://stackoverflow.com/a/222698/886084)中所引用。这非常有效。感谢大家的故障排除思路！

# php - 使用 PHP 的 Postgresql INSERT INTO 不起作用

> ID：13714191
> 
> 赞同：1
> 
> 时间：2012-12-05T00:06:07.593
> 
> 标签：php, sql, postgresql

这里有什么问题？我得到了用户表很好。我已确保列名 uid 存在。但是当我尝试从查询中获取 uid 时，什么也没有回来。这很好，因为桌子是空的。但是，我的 INSERT INTO 命令不起作用，因为在 INSERT INTO 之后，我仍然没有返回 uid。使用 Postgres 9.1.5。谢谢！

```
$query = "SELECT * FROM information_schema.tables WHERE table_name = 'usertable';";
$result = pg_query($dbconn, $query);

if (pg_num_rows($result)) 
{
    echo "Table exists<br>";
    checkForUserRow();
}
else
{
   echo "Error on query, attempting to create table<br>";
   $sql = "CREATE TABLE usertable (uid integer PRIMARY KEY, sign varchar(255));";
   pg_query($dbconn, $sql) or die(pg_errormessage());

   $result = pg_query($dbconn,$query);
   if (pg_num_rows($result)) {
       echo "Table created<br>";
       checkForUserRow();
   }
}

pg_close($conn);

function checkForUserRow()
{
    $query = "SELECT uid FROM usertable WHERE uid = '123'";
    $result = pg_query($dbconn, $query);

if(pg_num_rows($result)) 
{
    echo "User DB row exists<br>";
}
else
{
    echo "User row does not exist - attempt to add user to table<br/>";

    $sql = "INSERT INTO usertable (uid) VALUES('123')";
    pg_query($dbconn, $sql);

    $result = pg_query($dbconn, $query);
    if (pg_num_rows($result)) 
    {
        echo "User successfully added!<br/>";
        }
    else
    {
        echo "User not added :(";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:14:16.117

在您的函数内部，您需要获取全局`$dbconn`：

```
function checkForUserRow()
{
    global $dbconn;
    // everything else
} 
```

这是因为当您`pg_query($dbconn, $query);`在函数内部执行操作时，它使用的是不存在的本地版本的 $dbconn。

如果您愿意，也可以选择传入 $dbconn 作为参数：

```
function checkForUserRow($dbconn)
{
    // global $dbconn; // Don't need this anymore.
    // everything else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:13:29.987

如果你从一个空表开始，那么：

```
if (pg_num_rows($result)) 
```

将始终评估为假。这意味着您将始终尝试创建一个新表（由于表存在触发`die(pg_errormessage());`.

这意味着`checkForUserRow()`永远不会被调用。

即使它被调用，`$dbconn`也不存在于您的`checkForUserRow()`函数范围内，这意味着您的任何查询都不会在此函数中起作用。

您对错误消息的初步调试和审查将向您展示您的执行路径如何无法正常工作。

还有这行代码：

```
pg_close($conn); 
```

指的是数据库连接的不同变量名，然后在其他地方使用。

# json - knockout.js n 级绑定导航

> ID：13714196
> 
> 赞同：0
> 
> 时间：2012-12-05T00:06:58.517
> 
> 标签：json, binding, collections, knockout.js

我有这个json结构进入knockout.js：

```
JSON
    {}
        Id=1
        Barcode=1234...
        DiscountLevel=40
        ProductCollection
            Id=1
            Name=Cool product one...
            Products
                {}
                    Id=1
                    Manufacturer=Cool Manufacturing...
                    ProductName=Foo
                    MSRP=19.99
                {}
                    Id=2
                    Manufacturer=Cool Manufacturing...
                    ProductName=Blah
                    MSRP=9.99
                {}
                    Id=3
                    Manufacturer=Cool Manufacturing...
                    ProductName=Boo
                    MSRP=99.99 
```

第一级和第二级 (ProductCollection().Name) 绑定工作得很好——数据正在流入。

我试图弄清楚如何从 root.ProductCollection 节点获取产品表。

这是我当前的绑定语法（尽管我尝试了许多变体 - 包括注释样式语法）：

```
<table>
    <tbody data-bind="foreach: {data: offer().ProductCollection().Products, as: 'Product'}">

        <tr>
            <td data-bind="text: Product.ProductName"></td>
        </tr>

    </tbody>
</table> 
```

如果您已经解决了这个问题并愿意提供您的智慧，我将不胜感激！

# java - Java多线程使用同步不是线程安全的

> ID：13714198
> 
> 赞同：4
> 
> 时间：2012-12-05T00:07:07.040
> 
> 标签：java, multithreading, runnable

一个简单的带同步的多线程测试。我想如果它是“同步的”，其他线程会等待。我错过了什么？

```
public class MultithreadingCounter implements Runnable {

    static int count = 0;

    public static void main(String[] args) {
        int numThreads = 4;
        Thread[] threads = new Thread[numThreads];

        for (int i = 0; i < numThreads; i++)
            threads[i] = new Thread(new MultithreadingCounter(), i + "");

        for (int i = 0; i < numThreads; i++)
            threads[i].start();

        for (int i = 0; i < numThreads; i++)
            try {
                threads[i].join();
            } catch (Exception e) {
                e.printStackTrace();
            }
    }           

    @Override
    public void run() {
        increment();
    }

    public synchronized void increment(){
            System.out.print(Thread.currentThread().getName() + ": " + count + "\t");
            count++; // if I put this first or increment it directly in the print line, it works fine.
    }
} 
```

我认为这会显示如下内容：

```
0: 1    2: 0    1: 2    3: 3 
```

但它的实际输出：

```
0: 0    2: 0    1: 0    3: 3 
```

和其他类似的变化。它应该不按顺序显示每个增量（即 0,1,2,3）...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T00:12:19.687

您的`synchronized`关键字在实例方法上。没有两个线程可以同时执行*您的线程对象之一的*此方法。但是，这不是您的代码所做的。每个线程在自己的实例上执行该方法。同步并没有按照您的意图进行。如果它是一种`static`方法，它会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:15:47.510

你的`increment`方法应该是`static`：

```
public static synchronized void increment() { 
```

现在，每个对象都在该单独的实例上同步，但由于`count`是静态变量，您应该在`Class`对象本身上同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:01:33.213

当在方法之前使用同步关键字时，它确保该方法一次只能由一个线程执行，仅针对该对象。它不能确保其他对象的线程安全。

# python - 将 Flask 应用程序部署到 Heroku

> ID：13714205
> 
> 赞同：22
> 
> 时间：2012-12-05T00:07:54.867
> 
> 标签：python, heroku, flask

我正在尝试在 Heroku 上使用 Flask 开发我的第一个“大型”应用程序，我正在尝试将这里的基本教程：[https](https://devcenter.heroku.com/articles/python) ://devcenter.heroku.com/articles/python与此处的说明相结合：[http:// flask.pocoo.org/docs/patterns/packages/#larger-applications](http://flask.pocoo.org/docs/patterns/packages/#larger-applications)。它在本地与“工头启动”一起工作，但是当我推送到 Heroku 时，我收到一个错误，指出正在使用错误的端口：

> 使用命令`python run.py` 2012-12-04T23:45:18+00:00 app[web.1] 启动进程：* 在 `http://127.0.0.1:5000/`2012-12-04T23:45:18+00:00 app[web.1] 上运行：* 重新启动reloader 2012-12-04T23:45:23+00:00 heroku[web.1]: Error R11 (Bad bind) -> 绑定到端口 5000 的进程，应该是 33507（参见环境变量 PORT）

我对这一切都很陌生，但看起来它正试图在 Heroku 上“本地”运行。我尝试了各种组合，但无法让它发挥作用。我现在非常简单的代码是（该应用程序称为“pml”）：

目录：/pml

档案：

```
web: python run.py 
```

运行.py：

```
from pml import app
app.run(debug=True) 
```

目录：/pml/pml/

__init__.py

```
from flask import Flask
app = Flask(__name__)

import pml.views 
```

视图.py

```
from pml import app

@app.route('/')
def index():
    return 'Hello World!' 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-05T00:25:11.303

我没有使用 Heroku，但对我来说，他们似乎为 Flask 保留了一个端口，特别是 33507。看起来它会尝试使用一个环境变量，我不确定如何在 Heroku 中设置它。好消息是你可以告诉 Flask 使用哪个端口。

试试这个：

```
app.run(debug=True, port=33507) 
```

看起来像将 PORT 添加到 heroku 中的 env 是这样完成的：

```
heroku config:add PORT=33507 
```

您**应该**只需要执行其中一项。我会尝试第一个，因为对我来说，这是解决问题的直接方法。

**编辑**
阅读您帖子中的文章后，我知道问题出在哪里。

```
port = int(os.environ.get('PORT', 5000)) 
```

那行说，`PORT`如果设置了，则从环境中获取值，否则使用 5000。我不确定如果这是他们的文档中的内容，他们为什么不允许它从 5000 运行，但我会尝试这个更改：

```
port = int(os.environ.get('PORT', 33507)) 
```

# java - 获取字符串并将其放入数组 Java

> ID：13714208
> 
> 赞同：0
> 
> 时间：2012-12-05T00:08:15.240
> 
> 标签：java

我正在制作一个 java 程序，它将通过生成所有可能的排列并检查是否有匹配来使用“蛮力”。示例：如果 G1 = “0-1 0-2 1-2 1-3 2-3”且 G2 = “1-3 2-0 0-3 1-2 1-0”，则排列 0123 → 2310 不匹配，但 0123 → 2013 匹配。

我需要创建一个图形类，将图形表示为二维布尔数组，并具有成员函数来检查 2 个顶点是否为边并打印图形。构造函数应该使用上面的字符串来表示一个边列表。

我需要知道如何以这种格式获取字符串并将其放入数组中。

总的来说，我想知道这两个图是否同构。

下面的代码是排列生成器。

```
// Generator of all permutations of: 0,1,2,...,n-1

public class PermutationGenerator
{
// private data

private int[] perm;
private boolean first;

// constructor

public PermutationGenerator (int n)
{
    perm = new int [n];
    first = true;
}

public int[] next ()
{
    int n = perm.length;

    // starting permutation: 0 1 2 3 ... n-1

    if (first)
    {
        first = false;
        for (int i = 0 ; i < n ; i++)
            perm [i] = i;
        return perm;
    }

    // construct the next permutation
    // find largest k so that perm[k] < perm[k+1]; if none, finish

    int i, j, k, l;

    for (k = n - 2 ; k >= 0 && perm [k] >= perm [k + 1] ; k--)
        ;
    if (k < 0)
        return null; // no more

    // find largest l so that perm[k] < perm[l]

    for (l = n - 1 ; l >= 0 && perm [k] >= perm [l] ; l--)
        ;

    // swap perm[k] and perm[l]

    swap (perm, k, l);

    // reverse perm[k+1]...perm[n-1]

    for (i = k + 1, j = n - 1 ; i < j ; i++, j--)
        swap (perm, i, j);

    return perm;
}

// swap a[i] and a[j]

private static void swap (int a[], int i, int j)
{
    int temp = a [i];
    a [i] = a [j];
    a [j] = temp;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:21:52.180

我认为有一种更简单的方法可以确定两个图（由字符串`g1`和表示`g2`）是否相同 - 怎么样：

```
new HashSet<String>(Arrays.asList(g1.split(" "))).equals(
                                new HashSet<String>(Arrays.asList(g2.split(" "))) 
```

（如果我遗漏了什么，请告诉我）

如果您仍然想解析字符串并使用它来填充布尔邻接矩阵，您可以这样做：

*   在空格上拆分邻接列表字符串以形成一个数组，称之为`arr`.
*   循环`arr`，拆分每个元素`"-"`以形成一个新数组，调用它`x`（将为 的每个元素生成一个这样的数组`arr`，因为您正在循环它）。
*   设置`matrix[i][j]`为`true`，其中`i`和`j`是`x`（分别）解析为整数的第一个和第二个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:23:21.260

使用 String.split() 在空间上拆分字符串，得到字符串数组 {0-1,0-2,1-2,1-3,2-3}。

遍历这些并在 - 上拆分以提取每个数字，然后您可以将其放入数组中。解析示例字符串的效率不是很高但很简单。

# wordpress - WordPress中单个类别的存档页面

> ID：13714212
> 
> 赞同：1
> 
> 时间：2012-12-05T00:08:20.657
> 
> 标签：wordpress, categories, archive

我的网站上有两类帖子，我想使用该`archives.php`页面。

我已经将它用于参考。

我现在想将它用于新闻类别的帖子，但我为参考所做的自定义并没有真正起作用。有没有办法可以将一个存档页面分成两页，或者有第二`archives.php`页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:36:48.030

该法典**非常有用**。那说：

[http://codex.wordpress.org/Category_Templates](http://codex.wordpress.org/Category_Templates)

> 在类别的情况下，层次结构相当简单。例如，假设有问题的类别的 slug 是新闻，类别 ID 是 6。模板层次结构指定 WordPress 将使用它从以下列表中在当前主题目录中找到的第一个模板文件：
> 
> 1.  category-slug.php（注：2.9 版可用）
> 2.  类别-ID.php
> 3.  类别.php
> 4.  存档.php
> 5.  索引.php
> 
> 也就是说，如果您没有 category-slug.php（比如说 category-news.php），WordPress 将检查 category-ID.php（如 category-6.php），依此类推。

# c++ - C 和 C++ 编译器的问题

> ID：13714214
> 
> 赞同：2
> 
> 时间：2012-12-05T00:08:30.543
> 
> 标签：c++, c, visual-studio-2008, visual-c++

我在尝试将 32 位产品转换为 64 位产品时遇到问题。我使用的是 Visual Studio 2008，代码是 C 和 C++。我希望任何人查看以下两行代码，一行来自 C 源文件，另一行来自 C++ 源文件。这两个文件都包含在 DLL 中。我还包括对两行代码的反汇编。

**ewxlcom.c**

```
memcpy(pCM->pSecAccInfo->spUserID,userSecurityInfo.spUserID,
     sizeof(UserID));
000000000EF33BB9  mov         r8d,80h 
000000000EF33BBF  mov         rdx,qword ptr [rsp+828h] 
000000000EF33BC7  mov         rcx,qword ptr [rsp+1F8h] 
000000000EF33BCF  mov         rcx,qword ptr [rcx+0BDEh] 
000000000EF33BD6  call        memcpy (0EF40352h) 
```

**tcputil.cpp**

```
memcpy(serv_temp+INIT_MSG_USERID_OFFSET, pCM->pSecAccInfo->spUserID, INIT_MSG_USERID_LEN);
000000000EF3B8E6  lea         rcx,[rsp+67h] 
000000000EF3B8EB  mov         r8d,80h 
000000000EF3B8F1  mov         rdx,qword ptr [rsp+3B0h] 
000000000EF3B8F9  mov         rdx,qword ptr [rdx+0CBEh] 
000000000EF3B900  call        memcpy (0EF40352h) 
```

如您所见，第一行将一些字节复制到 指向的内存中`pCM->pSecAccInfo->spUserID`。第二行将这些相同的字节复制到内存中的另一个位置。ASM 将`memcpy`字节从寄存器指向的内存复制到寄存器`rdx`指向的内存`rcx`。因此，在第一行中，一个值被移入了 register `rcx`。这一点我已经验证指向`pCM`。然后将 指向的值`rcx + 0BDEh`复制到`rcx`. 并且`memcpy`被称为。这行得通。

但稍后在第二行将一个值加载到 register `rdx`。我已经验证这也指向与`pCM`第一行相同的内容。`pCM`然后它加载驻留在从( `rdx`)偏移的内存中的指针`0CBEh`。该内存全为零，因此`memcpy`崩溃。

问题是为什么编译器会为同一个源变量生成不同的代码。我认为这是一个对齐问题。这是C文件和C++文件之间的区别吗？VS 是否对 C 和 C++ 使用相同的编译器？还有什么我应该看的吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:55:10.280

如果您要链接 C 和 C++ 代码，您可能需要注意结构中的不同填充特性。也许创建一个临时函数来打印结构的每个成员的偏移量，并将相同的代码从 C 源文件（您编写它的位置）复制到 C++ 源文件。函数的两个副本可以保持不变，因为 C++ 的副本会被破坏，但我会在每个副本的顶部添加一个 printf() 来说明它是哪个版本。然后在崩溃前从某个地方调用每个，以便您可以比较偏移量。如果它们不同，则需要查看编译器标志来解决该问题。或者...也许您需要添加这样的行...

```
#ifdef __cplusplus
extern "C" {
#endif
 .
 .    ...your struct definitions & variables go here...
 .
#ifdef __cplusplus
}
#endif 
```

...围绕您的结构定义，以使 C++ 端具有与项目的 C 端相同的填充行为。

# c# - SimpleInjector 可以在运行时为泛型类型注册一个初始化器吗？

> ID：13714215
> 
> 赞同：4
> 
> 时间：2012-12-05T00:08:32.023
> 
> 标签：c#, dependency-injection, inversion-of-control, simple-injector

我可以在运行时使用 SimpleInjector 为泛型类型注册初始化程序吗？（见下面最后一行代码）

```
public class BootStrapper
{
    Type baseTypeGeneric = typeof(Sample<>);
    public void BootStrap(Container container)
    {
        var types =
            from type in Assembly.GetExecutingAssembly().GetTypes()
            where type.Namespace == "NS.xyz" 
            select type;

        foreach (Type type in types)
        {
            Type baseType = baseTypeGeneric.MakeGenericType(type);

            if (type.BaseType == baseType)
            {
                container.Register(type);
            }

            //how do I get this line to work?
            container.RegisterInitializer<Sample<[type]>>(
                x => container.InjectProperties(x));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:11:43.293

解决方案实际上相当简单：在`Sample<T>`. 这允许您只为所有示例类型注册一个委托：

```
public interface ISample { }

public abstract class Sample<T> : ISample { }

public void Bootstrapper(Container container)
{
    container.RegisterInitializer<ISample>(
        instance => container.InjectProperties(instance));
} 
```

由于`RegisterInitializer`将适用于所有实现的类型`ISample`，您只需要一个注册。

但老实说，您应该非常小心地应用属性注入，因为这会导致难以验证的容器配置。在将依赖项注入构造函数时，容器会在缺少依赖项时抛出异常。另一方面，使用属性注入，会简单地跳过缺少的依赖项，并且不会引发异常。出于这个原因，[InjectProperties 方法](https://simpleinjector.readthedocs.org/en/latest/injectproperties-is-deprecated.html)在 v2.6 中已被弃用。请检查您的策略。也许你应该重新考虑。如果您有疑问并希望对您的设计提供一些反馈；在 Stackoverflow 上发布一个新问题。

# kindle - 减少 Kindle/e-ink 网页内容的闪烁？

> ID：13714223
> 
> 赞同：3
> 
> 时间：2012-12-05T00:09:20.683
> 
> 标签：kindle

是否存在编写将在 Kindle Paperwhite 或其他基于电子墨水的设备上查看的 Web 应用程序的指南？我特别在寻找更新图像时减少闪烁的技术。

# asterisk - Asterisk AMI：确定通道是否持有

> ID：13714225
> 
> 赞同：1
> 
> 时间：2012-12-05T00:09:32.620
> 
> 标签：asterisk, asteriskami

我试图找出一种方法来可靠地检测通道是否通过 AMI 保持。我有两个问题：

1.  在 Asterisk 1.8 上，当频道被保持时，我会收到 MusicOnHold 事件。这是一个可靠的事件吗？可以以不发送此事件的方式配置 Asterisk 吗？

2.  早期版本的 Asterisk (1.6.0) 不会为 MusicOnHold 发送事件。事实上，当我保持通话时，我得到的只是一个 ExtensionStatus 事件。是否有另一个我可以启用的事件或我可以发送的命令来确定频道是否处于暂停状态？

我知道这些是旧版本的 Asterisk，但我们的客户仍在使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:44:56.390

是的，如果您的 AMI 应用程序是真实的，那么事件就是真实的。

不知道早期版本。除了您可以使用 NewExten 事件通过拨号计划检测 moh。当然，这不会从端点检测到 moh。

请注意，有些手机不做 MOH，而只是发出 moh 的声音。对于此类手机，您无法检测到 MOh 状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:13:35.033

我的 sip.conf 中缺少“callevents=yes”。即使在旧版本的 Asterisk 上，我现在也能正确获得保持事件。

# mysql - 如何修复此语法以使其正常工作？

> ID：13714226
> 
> 赞同：0
> 
> 时间：2012-12-05T00:09:35.230
> 
> 标签：mysql, sql, foreign-keys, create-table

我一直在尝试在表上创建外键来引用价格表，这是我到目前为止的语法，它会产生错误，

```
CREATE TABLE shirts(
        shirt_id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
        shirt_name VARCHAR(100) NOT NULL,
        shirt_type VARCHAR(10) NOT NULL,
        shirt_size VARCHAR(20) NOT NULL,
        qp_price NUMERIC(6,2) FOREIGN KEY REFERENCES price_list.price ON price_list.price_id=shirts.qp_price NOT NULL,
        o_price NUMERIC(6,2) FOREIGN KEY REFERENCES price_list.price ON price_list.price_id=shirts.o_price NOT NULL,
        clr_options VARCHAR(30) NULL,
        qty NUMERIC(5,0) NULL
    )ENGINE=INNODB 
```

“价格表”有3列，分别是price_id、price_cat和price。我想要衬衫表中的 qp_price 和 o_price 列做的是根据我在衬衫表上这些列中输入的数字显示 price_list 表的价格列。例如，

如果我做

```
INSERT INTO shirts(shirt_name,shirt_type,shirt_size,qp_price,o_price)VALUES
        ('Crewneck Tee','Men','S','1','2'),
        ('Crewneck Tee','Men','M','1','2'),
        ('Crewneck Tee','Men','L','1','2'),
        ('Crewneck Tee','Men','1X','1','2'),
        ('Crewneck Tee','Men','2X','3','4'),
        ('Crewneck Tee','Men','3X','5','6'),
        ('Crewneck Tee','Men','4X','7','8'),
        ('Crewneck Tee','Men','5X','9','10') 
```

SL 圆领 T 恤将在价格列的第一行和第二行显示价格，因为它链接到 price_list 表上的 price_id 列......我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:22:13.053

CREATE TABLE statmenet FOREIGN KEY REFERENCES 子句中的 ON 不是连接，它旨在指定行为，例如 ON UPDATE CASCADE ON DELETE RESTRICT。

[另外，我在14.6.4.4](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)找到了关于 MySQL 5.1 的评论。[外键约束](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)：

> 确保您分别在表 1 和表 2 中索引了表 1 和表 2 的引用列。如果不这样做，将标记错误“#1005 - 无法创建表 'prospect' (errno:105)”。（索引是一种很好的做法，因为它可以避免全表扫描！）一旦处理好并且引用的列具有相同的数据类型，您就可以成功地创建所需的表，其中包含任意数量的 FK。

```
CREATE TABLE shirts(
    shirt_id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    shirt_name VARCHAR(100) NOT NULL,
    shirt_type VARCHAR(10) NOT NULL,
    shirt_size VARCHAR(20) NOT NULL,
    qp_price NUMERIC(6,2) NOT NULL, 
    o_price NUMERIC(6,2) NOT NULL, 
    clr_options VARCHAR(30) NULL,
    qty NUMERIC(5,0) NULL
    INDEX (qp_price),
    INDEX (o_price),
    FOREIGN KEY (qp_price) REFERENCES price_list(price_id),
    FOREIGN KEY (o_price) REFERENCES price_list(price_id),
)ENGINE=INNODB 
```

仅供参考，当您碰巧没有特定的数据库环境时， [http ://www.dpriver.com/pp/sqlformat.htm 非常有用。](http://www.dpriver.com/pp/sqlformat.htm)

# java - YUV图像处理

> ID：13714232
> 
> 赞同：0
> 
> 时间：2012-12-05T00:10:12.143
> 
> 标签：java, android, image

我正在开发一个 android 应用程序，对于从相机传递的每个 YUV 图像，它会从中随机选择 10 个像素并检查它们是红色还是蓝色。我知道如何对 RGB 图像执行此操作，但不适用于 YUV 格式。由于运行时间限制，我无法将其逐个像素转换为 RGB 图像。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T04:08:06.547

我假设您正在使用 Camera API 的预览回调，您可以在其中为每一帧获取一个 byte[] 数据数组。

首先，您需要选择要使用的 YUV 格式。需要支持NV21，Android 3.0以后需要YV12。其他格式均不保证可用。所以NV21是最安全的选择，也是默认的。

这两种格式都是 YUV 4:2:0 格式；颜色信息在两个维度上都进行了 2 倍的二次采样，并且图像数据的布局与标准的交错 RGB 格式有很大的不同。[FourCC.org 的 NV21 描述](http://fourcc.org/yuv.php#NV21)作为一个来源，具有您想要的布局信息 - 首先是 Y 平面，然后是交错的 UV 数据。但是由于这两个颜色平面只有 Y 平面大小的 1/4，因此您必须决定如何对它们进行上采样 - 最简单的是最近邻。因此，如果您想要大小为 (w, h) 的图像中的像素 (x,y)，则最近邻方法是：

```
 Y = image[ y * w + x];
U = image[ w * h + floor(y/2) * (w/2) + floor(x/2) + 1]
V = image[ w * h + floor(y/2) * (w/2) + floor(x/2) + 0] 
```

也可以对色度通道使用更复杂的上采样（双线性、三次等），但适合的方式取决于应用程序。

一旦你有了 YUV 像素，你就需要解释它。如果您更习惯在 RGB 中操作，您可以使用[Wikipedia](http://en.wikipedia.org/wiki/YCbCr#JPEG_conversion)上的这些 JPEG 转换公式来获取 RGB 值。

或者，您可以只使用 V (Cr) 的较大正值来表示红色，尤其是在 U (Cb) 较小的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:49:44.927

来自 Reuben Scratton 在 [Converting YUV->RGB(Image processing)->YUV during onPreviewFrame in android 中的回答？](https://stackoverflow.com/questions/9325861/converting-yuv-rgbimage-processing-yuv-during-onpreviewframe-in-android)

您可以使相机预览使用 RGB 格式而不是 YUV。

尝试这个：

[Camera.Parameters.setPreviewFormat(ImageFormat.RGB_565);](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPreviewFormat%28int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:19:51.587

YUV 只是另一种色彩空间。您可以在 YUV 空间中定义红色，就像在 RGB 空间中一样。一个简单的[计算器](http://www.mikekohn.net/file_formats/yuv_rgb_converter.php)建议 RGB 值 255,0,0（红色）在 YUV 空间中应该显示为 76,84,255，所以只需寻找接近的值。

# java - 在netbeans中一次运行多个java主类

> ID：13714233
> 
> 赞同：1
> 
> 时间：2012-12-05T00:10:21.253
> 
> 标签：java, class, netbeans, main, run-configuration

我有几个具有不同论点的主要课程。我还成功地将参数添加到每个类。

但问题是：我每次都必须手动启动每个类（例如单击运行文件）。

有没有一种解决方案，我可以在 netbeans 中一键启动所有课程？并且类也应该遵循特定的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T20:01:17.153

1.  在 NetBeans 中打开一个具有特定名称的新项目（文件 -> 新项目并完成演练）。

2.  您可以通过转到 File -> New File -> 并完成演练，在一个项目下创建任意数量的新类。此时，您不应在这些类中包含 main 方法。不要每次都打开一个新项目。

3.  创建另一个文件（通过文件 -> 新文件等）。这次在这个新类中包含 main 方法的代码。在 main 方法中，您可以通过创建这些类的实例来调用任意数量的类。只要所有这些类都包含在同一个文件夹中，即在同一个项目下，这些类将按照您在 main 方法下调用它们的顺序执行。

看起来您正在编写 java 程序，就像在过程语言中一样。在某种程度上，java 类就像过程语言的子程序。通过创建该类的实例来调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T11:14:14.493

您可以尝试通过不同的运行配置运行多个主类。

见[http://wiki.netbeans.org/FaqTwoMainClassesWithArguments](http://wiki.netbeans.org/FaqTwoMainClassesWithArguments)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T00:04:57.830

通过属性将一个类设置为主类并运行，您可以使用以下代码：

```
ClassName variableName = new ClassName();
variableName.setVisible(true); 
```

ex-假设我的类名是 Dog 并且我使用 frame 作为变量名

```
Dog frame  = new Dog();
frame.setVisible(true);*emphasized text* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T00:46:53.173

也许分别打电话给每个班级？例如：

`FirstClass.java`

`SecondClass.java`

`ThirdClass.java`

在 FirstClass 中，您可以调用 SecondClass 来弹出窗口，只需加上一个`setVisible(true)`if 这就是您想要它做的所有事情。然后在SecondClass 中调用ThirdClass 以同样的方式弹出。

我不确定这是否是您想要的，因为没有代码可以关闭，而只是一些让您思考的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-13T22:34:47.570

根据评论和问题，我知道您想在您的 IDE（netbeans）中同时运行约 5 个不同的 java 程序，并且启动顺序必须按特定顺序排列。我假设这些程序一旦运行就不需要 CLI 输入。

我不知道实现您目标的 netbeans 方式，尽管在 Eclipse 中启动组可以满足您的要求。

除了 IDE，我们无论如何都可以通过编程方式实现这个目标。Java 中的 main() 方法只是一个静态方法，所以如果您的所有主要方法都在一个项目中，那么您可以创建一个 LaunchSequence 类或其他东西并执行以下操作：

```
public static void main(String[] args)
{
    Thread t1 = new Thread()
    {
        @Override
        public void run()
        {
            ServerOneClass.main(whateverArgsItNeeds);
        }
    };
    t1.start();
    Thread t2 = new Thread()
    {
        @Override
        public void run()
        {
            ClientOneClass.main(whateverArgsItNeeds);
        }
    };
    t2.start();
    //and so on. 
    //The order is enforced by the order you call start(), not the order in which you declare the threads
} 
```

如果您在不同的项目中有这些东西的代码，那么您可以创建一个新项目并将它们添加为依赖项。

如果您确实需要所有程序的用户输入，您可能会受益于查看[从另一个 java 程序运行 java 程序](https://stackoverflow.com/questions/15218892/running-a-java-program-from-another-java-program)

# symfony - 当与实体管理器多次合并时，Symfony/Doctrine 实体会导致脏实体关联

> ID：13714242
> 
> 赞同：9
> 
> 时间：2012-12-05T00:11:25.810
> 
> 标签：symfony, serialization, doctrine-orm

我正在使用 Symfony2 和 Doctrine

我有一个学说实体，它被序列化/反序列化为会话并在多个屏幕中使用。这个实体有许多一对多的关联。

学说实体有以下一对多，例如：

```
class Article {

...

    /**
     * @ORM\OneToMany(targetEntity="image", mappedBy="article", cascade=  {"merge","detach","persist"})
     */
    protected $images;

    public function __construct()
    {
        $this->images = new ArrayCollection();
    }

    .....
} 
```

文章实体的保存和检索如下：

```
 public function saveArticle($article)
    {
        $articleSerialized = serialize($article);
        $this->session->set('currentArticle',$articleSerialized);
    }

    public function getArticle()
    {
        $articleSerialized = $this->session->get('currentArticle');
        $article = unserialize($articleSerialized);
        $article = $this->em->merge($article);

        return $article;
    } 
```

我可以多次在会话中保存和加载实体，然后将其合并回实体管理器并保存。仅当它是一个新实体时。

但是，一旦我从数据库加载实体然后将其保存到会话中，我就会遇到问题。

我从其他帖子中知道，在您对保存的实体进行反序列化后，您必须运行 $em->merge($entity);

我能够合并实体，添加一个新的子实体（一对多），然后保存：

```
$article = $this->getArticle(); //Declared above, gets article from session

$image = new Image();
$image->setFilename('image.jpeg');
$article->addImage($image);

$this->saveArticle($article); //Declared above, returns the article to session 
```

但是，在第一次合并和图像添加之后，我无法再添加任何子实体。如果我尝试添加第二张图片，它会返回以下错误：

```
A managed+dirty entity <<namespace of entity>>
image@0000000067078d7400000000221d7e02 can not 
be scheduled for insertion. 
```

所以总而言之，我可以对实体进行任意数量的更改并将其保存到会话中，但是如果我在添加子实体时多次运行 $em->merge，则新的子实体将被标记为脏。

有谁知道为什么一个实体会被标记为脏？我是否需要重置实体本身，如果需要，我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T23:18:00.497

知道了。

对于将来可能遇到此问题的任何人：

您不能合并具有未持久子实体的实体。它们被标记为脏。

IE

您的文章中可能已经保存了两张图片到 DB。

```
ARTICLE (ID 1) -> IMAGE (ID 1)
               -> IMAGE (ID 2) 
```

如果您将文章序列化保存到会话，然后反序列化并合并它。没关系。

如果您添加新图像，然后将其序列化到会话中，您将遇到问题。这是因为您无法合并未持久化的实体。

```
ARTICLE (ID 1) -> IMAGE (ID 1)
               -> IMAGE (ID 2)
               -> IMAGE (NOT YET PERSISTED) 
```

我必须做的是：

在我对文章进行反序列化后，我删除了未持久化的图像并将它们存储在一个临时数组中（我检查了 ID）。然后我合并文章并重新添加未持久化的图像。

```
 $article = unserialize($this->session->get('currentArticle'));

        $tempImageList = array();

        foreach($article->getImages() as $image)
        {
            if(!$image->getId()) //If image is new, move it to a temporary array
            {
                $tempImageList[] = $image;
                $article->removeImage($image);
            }
        }

        $plug = $this->em->merge($article); //It is now safe to merge the entity

        foreach($tempImageList as $image)
        {
            $article->addImage($image); //Add the image back into the newly merged plug
        }

        return $article; 
```

然后，如果需要，我可以添加更多图像，并重复该过程，直到我最终将文章保存回 DB。

如果您需要进行多页面创建过程或通过 AJAX 添加图像，这很容易知道。

# c - 分配和序列点：这怎么模棱两可？

> ID：13714246
> 
> 赞同：3
> 
> 时间：2012-12-05T00:11:40.040
> 
> 标签：c, compiler-construction, sequence-points

考虑 C 代码`a = a = a`。没有用于赋值的序列点，因此此代码在编译有关`a`.

这里可能有什么价值`a`？似乎`a`不可能改变价值观。这里实际上是否存在未定义的行为，或者编译器只是懒惰？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:55:46.250

序列点违规的未定义行为规则不会对“值无法更改”的情况进行例外处理。没有人关心价值是否改变。重要的是，当您对变量进行任何类型的*写*访问时，您正在*修改*该变量。即使您正在为变量分配一个它已经拥有的值，您仍然在执行该变量的修改。如果多个修改没有被序列点分隔，则行为是未定义的。

人们可能会争辩说，这种“非修改性修改”不应该引起任何问题。但是语言规范本身并不关心这些细节。同样，在语言术语中，每次您将某些内容写入变量时，您都在修改它。

此外，您在问题中使用“模棱两可”一词似乎意味着您认为该行为是*未指定*的。即如“变量的结果值是（或不是）模棱两可的”。但是，在序列点违规中，语言规范并不局限于声明结果*未指定*。它走得更远，并声明了行为*undefined*。这意味着这些规则背后的基本原理不仅仅考虑某些变量的不可预测的最终值。例如，在一些虚构的硬件平台上，非序列化修改可能会导致编译器生成无效代码，或者类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:14:17.833

这实际上是未定义的行为。`a`可以有任何价值。“我想不出任何可以破坏的方法”与“它保证可以工作”不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T00:26:11.287

实际上是整个程序在执行该语句后具有“未定义的行为”。这不仅仅是关于`a`- 程序可以做*任何事情*，包括进入无限循环、打印垃圾输出或崩溃。

“未定义的行为”实际上只是意味着 C 标准不再对程序的功能施加任何限制。这不会阻止您推理特定编译器在看到该代码时可能会如何表现，但它仍然不是有效的 C 程序，这就是编译器警告您的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T00:15:08.203

```
int a = 42;
a = a = a; 
```

是未定义的行为。

编写序列点规则是为了简化编译器制造商的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T01:04:50.747

C 标准没有规定“如果行为不明确，则行为未定义”。有争议的 C 1999 中的实际规则说：“在前一个序列点和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。此外，应仅读取先验值以确定要存储的值。”</p>

您的代码违反了这条规则：它修改了`a`. （3.1 3 的注释说“修改”包括存储的新值与以前的值相同的情况。）

就是这样。您是否可以为这段代码找出一个明确的解释并不重要。重要的是它违反了规则。因为它违反了规则，所以行为是未定义的。

在 C 2011 中，该规则以更技术性的方式表述。6.5 2 说“如果标量对象的副作用相对于同一标量对象的不同副作用或使用相同标量对象的值的值计算是未排序的，则行为未定义。如果一个表达式的子表达式有多个允许的排序，则如果在任何排序中出现这种未排序的副作用，则行为是未定义的。” 当赋值运算符在对象中存储一个值时，这实际上是一个*副作用*。（主要影响是它评估存储的值。）因此，C 2011 中的这条规则与 C 1999 规则大致相同：您可能不会对同一个对象有两个副作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-16T14:31:50.543

您很可能最终得到所需的行为。当某人写作时`a=a=a`，他可能希望`a`保持不变，而当他写作时，`a=a=b`他可能希望在语句结束时`a`更改为`b`。

然而，有一些硬件和软件的组合确实打破了这一假设。例如，考虑具有显式并行指令流的硬件。然后可以将双重赋值编译为两条指令，试图将数据同时存储在同一个寄存器中。此外，硬件设计人员还可以假设指令对这样做是不允许的，并且可以在这些情况下使用无关值（并简化硬件）。

然后，您实际上可能会遇到`a=a=a`实际更改 的值`a`并`a=a=b`最终`a`不等于 的情况`b`。

# r - 使用表 R 选择/排序值

> ID：13714247
> 
> 赞同：2
> 
> 时间：2012-12-05T00:11:43.703
> 
> 标签：r

我正在使用以下数据集在**R中进行代谢组学研究。**

```
first Name      Area    Sample Similarity

120   Pentanone 699468  PO4:1   954

120   Pentanone 153744  PO2:1   981

126   Methylamine 83528 PO4:1   887

126   Unknown     32741 PO2:1   645

126   Sulfurous 43634   PO1:1   800 
```

我希望能够在第一列中选​​择具有相同值（例如 120）的行中具有相同名称的化合物（例如戊酮）。从这个选择中，我想复制与最高相似性对应的行信息并在表中创建新列。在这种情况下，以下信息：

```
120 Pentanone   153744  PO2:1   981 
```

我知道“向我发送代码帖子”并不是很受欢迎，我将非常感谢一些有关如何开始的线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:44:47.287

您可以使用 plyr 包：

我复制了您的数据（尝试使用 dput(dat) 下次）

```
dat <- read.table(text ='first Name      Area    Sample Similarity
120   Pentanone 699468  PO4:1   954
120   Pentanone 153744  PO2:1   981
126   Methylamine 83528 PO4:1   887
126   Unknown     32741 PO2:1   645
126   Sulfurous 43634   PO1:1   800',header=TRUE) 
```

1.  我将我的 data.frame 拆分为 (first & Name)
2.  我将函数应用于每组行
3.  我在一个新的 data.frame 中聚合

    ```
    library(plyr)   
    ddply(dat,.(first,Name),function(x) x[x$Similarity==max(x$Similarity),])

    first        Name   Area Sample Similarity
    1   120   Pentanone 153744  PO2:1        981
    2   126 Methylamine  83528  PO4:1        887
    3   126   Sulfurous  43634  PO1:1        800
    4   126     Unknown  32741  PO2:1        645 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:26:37.037

有很多选择。您已经有一个使用`plyr`;的示例 这里还有两个。

Base R 方法，使用`aggregate`and `merge`：

```
merge(dat, aggregate(Similarity ~ first + Name, dat, max))
#   first        Name Similarity   Area Sample
# 1   120   Pentanone        981 153744  PO2:1
# 2   126 Methylamine        887  83528  PO4:1
# 3   126   Sulfurous        800  43634  PO1:1
# 4   126     Unknown        645  32741  PO2:1 
```

一种`sqldf`方法：

```
library(sqldf)
sqldf("select *, max(Similarity) `Similarity` from dat group by first, Name")
#   first        Name Similarity   Area Sample
# 1   120   Pentanone        981 153744  PO2:1
# 2   126 Methylamine        887  83528  PO4:1
# 3   126   Sulfurous        800  43634  PO1:1
# 4   126     Unknown        645  32741  PO2:1 
```

# ubuntu-10.04 - Konsole 执行脚本

> ID：13714249
> 
> 赞同：0
> 
> 时间：2012-12-05T00:11:50.887
> 
> 标签：ubuntu-10.04, konsole

```
konsole --noclose -e --rcfile /filepathtomyscript 
```

我尝试执行上述命令，因为我希望 konsole 可以执行带有参数的命令列表，例如

```
lftp
open...
login
put.... 
```

但是，我不断收到错误。请你帮助我好吗？非常感谢。到目前为止，我发现的所有示例都只执行一个命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:24:28.167

试试这个

```
konsole --noclose -e /bin/bash /path/to/my/script 
```

[Konsole 手册页](http://manpages.ubuntu.com/manpages/hardy/man1/konsole.1.html)

> -e [参数]
> 
> ```
>  Execute ’command’ instead of shell.  It  also  sets  the  window
>           title  and  icon  name  to  be the basename of the program being
>           executed if neither -T nor -n are given  on  the  command  line.
>           This must be the last option on the command line. 
> ```

# asp.net-mvc - MVC 控制器中的单一职责原则。需要批评

> ID：13714250
> 
> 赞同：3
> 
> 时间：2012-12-05T00:11:53.580
> 
> 标签：asp.net-mvc, asp.net-mvc-3, design-patterns, attributes, single-responsibility-principle

在我的 MVC4 应用程序中，根据您是否登录（在我的情况下为 FormsAuthentication），有些操作需要表现不同。

例如，我有一个具有“RenderAccountAndProfile”方法的 AccountController。如果注销，相应的局部视图会显示登录提示和按钮。如果用户已登录，则会显示用户的个人资料链接以及注销按钮。

到目前为止，我在项目中采用的方法是简单地使用 if 语句......

```
 if (HttpContext.User.Identity.IsAuthenticated)
        {
            ...
        }
        else
        {
            ...
        } 
```

但是，我刚刚创建了一种我认为是这种方法的相当优雅的替代方案。

我创建了一个名为 AnonymousUsersOnly 的新属性，它非常简单：

```
public class AnonymousUsersOnlyAttribute : System.Web.Mvc.ActionMethodSelectorAttribute
{
    public override bool IsValidForRequest(System.Web.Mvc.ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)
    {
        return !controllerContext.HttpContext.User.Identity.IsAuthenticated;
    }
} 
```

我的 AccountController 类装饰有 Authorize 属性。这使我能够拥有以下代码：

```
[Authorize]
public class AccountController : Controller
{
    [AllowAnonymous]
    [AnonymousUsersOnly]
    [ActionName("RenderAccountAndProfile")]
    public ActionResult RenderAccountAndProfile_Anonymous()
    {
        // create a "logged out" view model
        return Content("**NOT LOGGED IN** - LOG IN HERE");
    }

    [ActionName("RenderAccountAndProfile")]
    public ActionResult RenderAccountAndProfile_Authorized()
    {
        // create a "logged in" view model
        return Content("**LOGGED IN** - LOG OUT");
    }
} 
```

我非常喜欢这种方法，因为我的操作方法符合[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。每种方法现在只处理登录情况或注销情况。我不再需要任何“if”语句来引导流量。

这也应该使单元测试更容易，因为每个方法现在只关注一个结果，而不是两个。我们可以编写单元测试来分别测试每个结果，调用不同的方法。

显然，我不能有两个具有相同签名的方法，所以这就是我必须使用 ActionName 属性的原因。

我会很感激你在这里的批评。你认为这是一个优雅的解决方案吗？这种方法的优缺点是什么？这会带来哪些安全隐患/风险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:33:39.587

您在这里遇到的问题是策略模式问题。而且您已经实现了一个（非标准）策略模式，并且实现得非常巧妙。我担心它太聪明了。这种聪明才智使得代码在做的事情对于外行来说不那么明显。

顺便说一句，我宁愿不打扰。我经常将控制器编写为域对象/服务上的非常薄的适配器。因此，我愿意采取务实的态度来完善控制器。在轻微的设计问题和明显的代码之间做出决定时，总是选择明显的代码。

如果你有更厚的控制器，或者有其他原因需要在这里真正关心这个问题，你可能会考虑一个更传统的策略模式，也许有一个抽象工厂的帮助，它提供了基于身份验证状态的不同策略实现。这符合您的设计目标，并且其他程序员会更加熟悉（如果他们知道设计模式）。

话虽如此，我认为保留您的聪明解决方案不会对任何事情造成太大伤害。我很想改名；拒绝对我来说似乎是一个奇怪的动词。也许`AnonymousUsersOnly`，这对未来的程序员来说会更具交流性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T03:06:25.033

我最好选择（伪代码）：

```
PartialView UserProfile() { ... }

PartialView Login() { ... } 
```

并认为：

```
if (User.IsAuthenticated) {
    @Html.Action("UserProfile")
} else {
    @Html.Action("Login")
} 
```

它也可以是 DisplayTemplate、helper 或任何你喜欢的东西，所以你最终会使用

```
@Html.DisplayFor(m=> User) 
```

# html - storyboard_with_task

> ID：13714252
> 
> 赞同：1
> 
> 时间：2012-12-05T00:12:12.917
> 
> 标签：html, rally

![在此处输入图像描述](../Images/fce94119c0427b5324277be45fd27e6c.png)在故事板中。如何查看每个用户故事下的所有任务，每个任务旁边都有一个复选框？

像敏捷的东西？

# r - 数组中值的平均值

> ID：13714257
> 
> 赞同：4
> 
> 时间：2012-12-05T00:12:41.867
> 
> 标签：r, sequence, moving-average

我有一个数组，想要构建一个循环，该循环从数组的第一个值开始平均每个第二个值，在第一轮之后，循环应该从数组的第二个值开始。

例如：

```
3,6,18,10,2 
```

结果应该是：

```
7.666,8,10

   for 7.6666= (3+18+2)/3 
   for 8= (6+10)/2
   for 10=(18+2)/2 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T00:18:17.593

你在寻找这样的东西吗？

```
x <- c(3,6,18,10,2)

n <- length(x)
sapply(seq_len(n-2), function(X) {
    mean(x[seq(X, n, by=2)])
})
# [1]  7.666667  8.000000 10.000000 
```

* * *

然后是更有趣的事情，以*获得*@mnel 的支持；）

```
n <- length(x)
m <- matrix(0, n, n-2)
ii <- row(m) - col(m)
m[ii >= 0 & !ii %% 2] <- 1
colSums(x * m)/colSums(m)
# [1]  7.666667  8.000000 10.000000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T02:30:18.710

另一个给恋人的：

```
rev(filter(rev(x), 0:1, "r") / filter(rep(1, length(x)), 0:1, "r"))
# [1]  7.666667  8.000000 10.000000 10.000000  2.000000 
```

# android - Android MenuItem 获取 showAsAction 的方法

> ID：13714259
> 
> 赞同：9
> 
> 时间：2012-12-05T00:12:46.963
> 
> 标签：android, menuitem

我正在寻找对**mentuItem.setShowAsAction()**的补充方法，即**menuItem.getShowAsAction()**，因为似乎没有。

[http://developer.android.com/reference/android/view/MenuItem.html](http://developer.android.com/reference/android/view/MenuItem.html)

因为我需要在将它们设置为 MenuItem.SHOW_AS_ACTION_NEVER 之前记录当前状态，所以当设备的方向变回横向时，我可以将菜单项返回到它们的旧状态。

我需要这样做，因为 Honeycomb 没有提供新行来显示 ICS 中的选项卡。所以在蜂窝中没有足够的空间给标签。

在 Java 或 Android 中是否有另一种通用的获取属性方法来在 XML 中查找 menuitem 中属性 showAsAction 的设置。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-23T01:34:08.407

您可以使用此方法，从另一个答案中所说的内容：

```
@SuppressLint("RestrictedApi")
private int getShowAsActionFlag(MenuItem item) {
    MenuItemImpl itemImpl = ((MenuItemImpl) item);
    if (itemImpl.requiresActionButton()) return MenuItemImpl.SHOW_AS_ACTION_ALWAYS;
    else if (itemImpl.requestsActionButton()) return MenuItemImpl.SHOW_AS_ACTION_IF_ROOM;
    else if (itemImpl.showsTextAsAction()) return MenuItemImpl.SHOW_AS_ACTION_WITH_TEXT;
    else return MenuItemImpl.SHOW_AS_ACTION_NEVER;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-15T16:51:28.293

我发现下面的类有这个方法**isActionButton()**

> **android.support.v7.internal.view.menu.MenuItemImpl**

请注意，**MenuItem**是一个接口，而不是从中创建假定的 menuitem 对象实例的类。

如果您使用的是 android.support.v7 兼容包，只需将 menuitem 对象转换为**MenuItemImpl**。

它是这样完成的：

```
((MenuItemImpl)item).isActionButton() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-13T18:45:10.263

如果有人愿意，这是一个扩展

```
val MenuItem.showAsActionFlag: Int
    @SuppressLint("RestrictedApi")
    get() {
        this as MenuItemImpl
        return when {
            requiresActionButton() -> MenuItemImpl.SHOW_AS_ACTION_ALWAYS
            requestsActionButton() -> MenuItemImpl.SHOW_AS_ACTION_IF_ROOM
            showsTextAsAction() -> MenuItemImpl.SHOW_AS_ACTION_WITH_TEXT
            else -> MenuItemImpl.SHOW_AS_ACTION_NEVER
        }
    } 
```

你可以像这样使用它

```
if (item.showAsActionFlag == SHOW_AS_ACTION_ALWAYS) 
```

# php - 如果我以注册用户的身份登录我的网站，为什么在设置会话规则后无法访问其他页面？

> ID：13714265
> 
> 赞同：0
> 
> 时间：2012-12-05T00:13:15.910
> 
> 标签：php, session-variables

我现在正在做一个项目，如果我以用户身份登录，我将无法访问我自己的个人资料页面 - 我在每个页面的顶部设置了 thisi 规则：

```
 if(!isset($_SESSION['loggedin']))
header("location:http://localhost/ci/web-project-jb.php/start");// If an unregistered user tries to manually navigate to any of my webpages they will be brought to 'start' page. 
```

起始页有

```
 <$_SESSION['username'] = null;?> 
```

只是为了确保会话已被销毁

我在我的注销功能中设置了它将破坏会话：

```
function logout()
{
$this->session->sess_destroy();
redirect ('start');
} 
```

我有一个 session_start(); 在我登录后在我的主页上（在我的登录页面上也有）但是由于我已经将上面的 if 语句放在我不能再以注册用户身份登录 - 为什么会发生这种情况？我什至在登录页面调用了 session_start。再次感谢你的帮助

# php - PHP 5.4 中的线程安全是一个真正的问题吗？

> ID：13714267
> 
> 赞同：4
> 
> 时间：2012-12-05T00:13:25.653
> 
> 标签：php, thread-safety

是否有可能，在我的 PHP 5.4.0 应用程序（IIS、FastCGI、非线程安全）中，两个人通过在完全相同的时间运行相同的代码来更新数据库中的同一个表并无意中弄乱了彼此的数据？

我问的原因是因为我偶尔会看到无法解释的数据故障，在最近的案例中，我发现另一个客户在完全相同的时间更新了同一张表。

我的问题的第二部分是，如果这确实发生了，我该如何预防？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:16:29.437

如果您在每个请求中执行多个 SQL 语句而不使用事务，那么很有可能。SQL 语句是原子的，就像事务包装的语句序列一样，因此不会发生“故障”。

此外，如果您在 SQL 以外的任何地方（例如平面文件）的不同请求之间共享状态，至少可以说显然线程安全会受到损害。

第二部分：使用事务:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:54:47.113

由于非线程安全的 PHP，他们不能“弄乱彼此的数据”，不，除非您正在准备/编写 Apache 设置（例如使用`SetLocale`），或者您已经对其进行了编程以同时更新共享信息（例如平面文件，正如阿玛丹所说）。

MySQL、读取GET参数等大部分正常进程不会受到影响。

因此，除非您的问题与语言环境有关，否则它将是您的代码，而不是线程设置。

如果它使用 SetLocale，那么事务或其他方法不会有任何区别。其他任何你都可以编程的东西。

* * *

如果您没有为并发操作编程，您可能会弄乱数据 - 这可能发生在线程安全和非线程安全的情况下。请记住，即使在“线程安全”中，您也可以以不同的速度和顺序处理并发线程。

这是一个危险的例子：

*   语句 a) 读取表以获取下一个更新值
*   语句 b) 使用以前的值写入表
*   语句 c) 为下一个用户更新“下一次更新”表。

这些语句可以由运行所有的“用户 1”处理，然后是“用户 2”（理想情况，以及您如何编程）。但同样如此，“用户 1”运行“a”和“b”，然后是“用户 2”运行所有，然后“用户 1”运行“c”——在这种情况下，“用户 2”将覆盖“用户 1” “写道。

（重复一遍，这与 PHP 中的“非线程安全”无关。）

如何解决后一个问题：

1.  [交易](http://dev.mysql.com/doc/refman/5.0/en/commit.html)可能对您有所帮助；除非您使用“WITH CONSISTENT SNAPSHOT”选项，否则它们实际上不会对上面的示例有所帮助，因为它们所做的只是延迟提交，并且您在语句“a”中过早地读取了该值。
2.  [表锁](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)允许您阻止用户读取或写入表，因此在上面的示例中，首先锁定“更新”表，运行事务然后释放锁。这会迫使第二个用户等到“用户 1”完成该批次后才能读取该号码。
3.  使用 mySQL 的功能，包括“AUTO INCREMENT”主键，或“INSERT INTO... ON DUPLICATE KEY”或“REPLACE”等代码。

The third option is the best, if you can. Table locks can get messy and transactions my not fix your issues.

# php - 从 id 列表批量更新值列表

> ID：13714269
> 
> 赞同：4
> 
> 时间：2012-12-05T00:13:29.743
> 
> 标签：php, mysql, bulkinsert

作为 Oracle 用户，我经常遇到这个问题，我在玩 MySql。

是以下情况：

*   id 列表 (1, 2, 3, ..., n)
*   值列表 ('val1', 'val2', 'val3', ..., 'valn') [这些值显然与这些完全不同]
*   前 2 个列表按顺序传递。这意味着首先传递的值对应于首先传递的id。

目标是更新所有具有相应`value`的表：val1 应该更新 id 1，val2 应该更新 id 2 等等......仅在一个查询中。`value``id`

简单的解决方案是更新 n 次：

```
UPDATE `value` SET `value`='val1' WHERE id = 1;
UPDATE `value` SET `value`='val2' WHERE id = 2;
UPDATE `value` SET `value`='val3' WHERE id = 3;
...
UPDATE `value` SET `value`='valn' WHERE id = n; 
```

但我很想批量更新这一切。

sqlfiddle 玩了一下：[http ://sqlfiddle.com/#!2/d02e8](http://sqlfiddle.com/#!2/d02e8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:31:03.683

这是使用*一个*查询执行此操作的一种方法。它不会是格式最漂亮的查询，但它只是一个。

```
<?php

$id_list = implode(',', $ids);
$whens = implode(
    "\n    ",
    array_map(
        function ($id, $value) {
            return "WHEN {$id} THEN {$value}";
        },
        $ids,
        $values
    )
);

$sql = "
    UPDATE value
    SET value = CASE id
    {$whens}
    END
    WHERE id IN ({$id_list})
";
?> 
```

请参阅我修改后[的 SQLFiddle](http://sqlfiddle.com/#!2/50f55/1)。

# ruby-on-rails-3 - 通过回形针上传图像时出现编码错误

> ID：13714272
> 
> 赞同：1
> 
> 时间：2012-12-05T00:14:10.437
> 
> 标签：ruby-on-rails-3, file-upload, encoding

我正在尝试将图像上传到回形针并将其保存到 s3。但是，我在控制台中收到以下错误

```
！！处理请求时出现意外错误：UTF-8 中的字节序列无效
```

StackOverflow 上有一些关于如何解决这个问题的回应，尽管大多数人都指出原始解决方案是对 Rack 的更新。但是，我使用的是 Ruby 1.9.3 和 Rails 3.1.3，并且相信我没有 Rack（我没有将它作为 Gem 安装，应该吗？？）。

我一直在尝试的文件名相当简单，所以我假设问题出在实际文件中，但我不确定如何调试错误来自哪个上传变量。Rails 没有将这些错误中的任何一个放在日志文件中，所以我似乎无法获得更多详细信息。

我的控制器相当简单，就像回形针 github 文档中的示例一样

```
定义创建
   wine_photo = WinePhoto.create(params[:wine_photo])

   返回渲染：json => wine_photo

  结尾

```

虽然最初我用的是更常见的

```
  wine_photo - WinePhoto.new(params[:wine_photo])
  如果 wine_photo.save
     返回渲染：json => wine_photo
  别的
     返回渲染：json => wine_photo.errors
  结尾

```

我的模型（我怀疑这很有帮助）是

```
类 WinePhoto 真实
    validates_with AttachmentPresenceValidator, :attributes => :photo

    属于：葡萄酒
    属于_to：用户

    def photo_url
        照片.url
    结尾
结尾

```

基于stackoverflow上的这个响应，[Ruby Invalid Byte Sequence in UTF-8](https://stackoverflow.com/questions/9607554/ruby-invalid-byte-sequence-in-utf-8)，我在我的控制器中尝试了以下内容

```
定义创建
   wine_photo = WinePhoto.new(params[:wine_photo])
   wine_photo.photo = IO.read(wine_photo.photo).force_encoding("ISO-8859-1").encode("utf-8", 替换：nil)
 ...

```

但仍然有错误。

有关如何解决此编码问题的任何建议？有没有办法确认错误来自正在上传的文件？

我的上传代码（ajax）是

```
保存照片：函数（）{
        var file = document.getElementById('file_api').files[0];
        控制台.log（文件）；
    var xhr = new XMLHttpRequest();
        if (xhr.upload && file.type == "image/jpeg" ) {

            // 创建进度条
            var o = document.getElementById("progress");
            var progress = o.appendChild(document.createElement("p"));
            progress.appendChild(document.createTextNode("上传" + file.name));

            // 进度条
            xhr.upload.addEventListener("进度", function(e) {
                var pc = parseInt(100 - (e.loaded / e.total * 100));
                progress.style.backgroundPosition = pc + "% 0";
            }， 错误的）;

            //文件接收/失败
            xhr.onreadystatechange = 函数（e）{
                如果（xhr.readyState == 4）{
                    progress.className = (xhr.status == 200 ? "成功" : "失败");
                }
            };

            // 开始上传
            xhr.open("POST", document.getElementById("add_photo").action, true);
            xhr.setRequestHeader("X_FILENAME", file.name);
            xhr.send(文件);
            }
        }

```

和参数`file`是

```
文件 {webkitRelativePath: "", lastModifiedDate: Thu Nov 10 2011 09:40:39 GMT+1100 (AUS Eastern Summer Time), name: "WP_000012.jpg", type: "image/jpeg", size: 1344450}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:33:51.817

在搞砸了两天之后，事实证明问题出在我的 ajax 上传中，rails 根本没有获取文件字段。

我按照这篇博客文章让 ajax 上传工作， [https://github.com/newbamboo/example-ajax-upload/blob/master/public/index.html](https://github.com/newbamboo/example-ajax-upload/blob/master/public/index.html)

并将我的输入文件中的名称更改为

```
<输入类型=“文件”名称=“葡萄酒照片[照片]”>
```

名字之前在哪里`photo`。

html表单现在也有

```
<input name="utf8" type="hidden" value="✓"> 

```

# javascript - 如何在 Safari 中调试嵌入式 JavaScript

> ID：13714276
> 
> 赞同：4
> 
> 时间：2012-12-05T00:14:15.510
> 
> 标签：javascript, debugging, safari

编辑：根据@dmi3y 的建议，更新标题以将“内联”更改为“嵌入”以更好地反映问题的性质。

在 Chrome 中，我通常通过在我的 JS 文件中设置断点来调试 JS，但如果存在内联 JS（即不在单独的 .js 文件中的 JS，而是在在`<script>`标签中）。在我的一生中，我无法在 Safari 中找到相同的功能。它存在吗，还是我不走运？

抱歉，如果这个问题已经被问过......我检查了搜索，只发现了这个（有点，但不是真的）相关问题：[How to debug lazily-loaded javascripts in Safari debugger](https://stackoverflow.com/questions/4840117/how-to-debug-lazily-loaded-javascripts-in-safari-debugger)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:22:41.717

您可以这样做（至少在 Windows 的 5.1.7 版本中），只需转到`Scripts`选项卡并选择类似于`http://yoursite.com/`它显示类似图片的内容`Elements`，但您显然可以在那里调试嵌入式 JS。

PS：顺便说一下术语，我通常会考虑`inline`类似的脚本

```
<a ... onclick="myfunction();" /> 
```

或者

```
<a ... href="javascript:myfunction();" /> 
```

这些东西可能用于`bookmarklets`或小型电话。

代码到`script`我用来调用的标签中`embedded`

如果调试器实际上可以使用内联脚本工作，它会感兴趣吗？

# javascript - 如何在可点击的图像上提交带有按钮的表单？

> ID：13714281
> 
> 赞同：-1
> 
> 时间：2012-12-05T00:14:48.530
> 
> 标签：javascript, html, css, ruby-on-rails

我有一张图片，当您单击它时，您会转到 www.google.com（例如）。在这样的图像上方，我放置了一个提交表单的输入。当我单击按钮时，它会执行 2 个操作：

1.  提交表格
2.  访问 www.google.com

有人知道原因吗？

我的意图是，当您单击按钮时，唯一完成的操作是第一个（提交表单）并留在同一页面，当您单击图像时，它会转到 www.google.com

有人知道当我单击按钮时我怎么能得到它，唯一发生的事情就是提交表单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:47:11.597

如果您使用的是 JQuery，就可以这样做：

```
$('#id-clickable-image').click(function(event){
    //This line will prevent the normal behavior of the click
    event.preventDefault
    //Code to submit the form... you just fill it
    var field1 = $('#input-id-1').val()
    .
    .
    .
}); 
```

您可以查看 JQuery 文档：[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:28:16.440

为什么不为回发设置一个隐藏变量，并在表单提交后检查该变量是否设置为某个值。如果已设置，则在您使用该代码执行任何操作后重定向到谷歌。

# c - 一堆纸牌和战争游戏

> ID：13714284
> 
> 赞同：0
> 
> 时间：2012-12-05T00:15:10.690
> 
> 标签：c, stack

所以我正在制作一款名为 War 的纸牌游戏，规则如下：

1.  玩家 1 和玩家 2 分别排列称为 q1 和 q2 的牌。两个队列都不是空的。玩家也有空的战斗堆栈 s1 和 s2。
2.  每个玩家从他们队列的前面取出一张牌并将其放在他们的堆栈顶部
3.  如果牌面值相等，就会发生战争。
4.  每个玩家将 3 张额外的牌从他们的队列中移到他们的堆叠中，并再次检查他们最上面的牌的面值。这可能会发生几次。再次转到 3。
5.  如果卡片没有相等的值，则战斗已经结束并且可以确定a。

我必须编写的函数称为 start_battle.c，我想出的逻辑如下`queue_front`，`queue_empty`和`stack_top`函数已经编写完毕。所以我的伪代码如下：

```
function start_battle(q1, q2, s1, s2, logfile)

warc=0
move front card of q1 to the top of s1
move front card of q2 to the top of s2
while (top cards of s1 and s2 have equal value
       and both q1 and q2 are not empty)           
  for i=1 to 3
    if q1 is not empty
      move front card of q1 to the top of s1
    endif
  done
  for i=1 to 3
    if q2 is not empty
      move front card of q2 to the top of s2
    endif
  done
done
return warc 
```

我的代码如下：

```
#include "libcardlist.h"
int start_battle(queue *q1, queue *q2, stack *s1, stack *s2, FILE *logfile){    
    int warc =0;
    int i;
    stack_push(s1, queue_front(q1));
    stack_push(s2, queue_front(q2));
    card c1 = stack_top(s1);
    card c2 = stack_top(s2);
    while (c1.face==c2.face&&  queue_empty(q1)==0 && queue_empty(q2)==0) {        
        warc++;        
        for (i=0; i<3; i++) {
            if(queue_empty(q1)==0){
                stack_push(s1, queue_front(q1));
            }
        }
        for (i=0; i<3; i++) {
            if (queue_empty(q2)==0){
              stack_push(s2, queue_front(q2));
            }    
        }       
   }
   return warc;
} 
```

哦和

```
typedef struct {
  int face;         /* 2-14 */
  char suit;            /* C H S D */
} card; 
```

当我测试它时，我的代码卡在了while循环中，有人可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:01:32.080

我`queue_pop()`在您的算法中添加了适当的位置。将卡片从队列复制到堆栈（通过推送）后，您需要将其从堆中移除。实际上，这应该是游戏主要玩法的一部分，而不是介绍（它是一样的，但你最终会弄明白的），并且你需要将*两*叠牌移动到适当的队列中一次宣布特定回合的获胜者。

无论如何，把你的流行音乐放在那里。

```
int start_battle(queue *q1, queue *q2, stack *s1, stack *s2, FILE *logfile){    
    int warc =0;
    int i;
    stack_push(s1, queue_front(q1));
    queue_pop(q1); // no longer in this queue.
    stack_push(s2, queue_front(q2));
    queue_pop(q2); // no longer in this queue.
    card c1 = stack_top(s1);
    card c2 = stack_top(s2);
    while (c1.face==c2.face && queue_empty(q1)==0 && queue_empty(q2)==0) {        
        warc++;        
        for (i=0; i<3; i++) {
            if(queue_empty(q1)==0){
                stack_push(s1, queue_front(q1));
                queue_pop(q1);
            }
        }
        for (i=0; i<3; i++) {
            if (queue_empty(q2)==0){
                stack_push(s2, queue_front(q2));
                queue_pop(q2);
            }    
        }       
   }

   return warc;
} 
```

# ruby - 显示哪些堆栈帧来自我的源代码（不是来自 gem）

> ID：13714286
> 
> 赞同：0
> 
> 时间：2012-12-05T00:15:23.373
> 
> 标签：ruby, rake, rubymine, colorize

我希望能够查看堆栈跟踪并一眼看出哪些帧来自我的源代码。特别是当我从命令行运行 Rake 任务时。

RubyMine 在其控制台窗口中突出显示来自我的源代码的那些堆栈帧。我喜欢那个！这就是我想要的。

我可以使用 Colorize gem 或类似的东西来进行着色。困难的部分是

*   确定哪些帧来自我自己的源代码，以及
*   连接到 Rake 或 Ruby 解释器以执行着色。

建议？

# winapi - 如何为 SetWindowsHookEx() 设置 ACL？

> ID：13714289
> 
> 赞同：1
> 
> 时间：2012-12-05T00:15:42.347
> 
> 标签：winapi

可以对 Windows XP 中的所有键盘/鼠标事件设置挂钩：

```
 SetWindowsHookEx(WH_JOURNALRECORD, (HOOKPROC)JournalLogProc, GetModuleHandle(NULL), 0); 
```

...但在 Windows 7 中，SetWindowsHookEx 返回 5（拒绝访问）。

如何设置功能需要的权限/ACL？即使我以“管理员身份”运行程序，我也会遇到相同的“拒绝访问”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:02:34.840

挂钩不是安全对象，因此您不能为它们设置 ACL。您在 Win7 中收到错误的原因是因为在 Vista 中引入的 UAC 改变了一般如何使用日志挂钩的规则。

日志挂钩只能由提升的进程设置，并且该进程必须通过使用设置的 UAC 清单绕过[用户界面特权隔离 (UIPI)](http://msdn.microsoft.com/en-us/library/bb625963.aspx)`uiAccess=True`。请注意，设置`uiAccess=True`还有其他影响，因此请确保您了解它的实际作用（有关详细信息，请参阅[Windows 完整性机制设计](http://msdn.microsoft.com/en-us/library/bb625963.aspx)）。仅仅以管理员身份运行应用程序是不够的。

唯一的其他解决方法是手动更改计算机的安全策略以完全禁用 UAC，或减少 UAC 设置中的某些安全限制。

# c# - 如何在动态对象上动态调用方法？

> ID：13714295
> 
> 赞同：18
> 
> 时间：2012-12-05T00:16:14.173
> 
> 标签：c#, .net, dynamic-language-runtime

当我想在 C# 中的任何对象上动态调用静态定义的（“在编译时确定”而不是“类级成员”的意义上的“静态”）方法时，我可以使用反射来获取该方法的句柄并调用它：

```
typeof(Foo).GetMethod("Bar").Invoke(foo, new object[] { /* params */ }); 
```

`DynamicObject`但是，通过从响应（未定义的）实例方法调用继承而使对象动态化`TryInvokeMember`，并且由于显而易见的原因，类响应的动态方法不会通过反射暴露。这意味着我无法获得应该由 . 响应的方法的方法句柄`TryInvokeMember`。

具有讽刺意味的是，在我看来，您不能`dynamic`像在非对象上调用已定义方法那样容易地动态调用对象上的动态方法`dynamic`。

我考虑过`TryInvokeMember`直接调用，但第一个参数必须是`InvokeMemberBinder`一个抽象类的实例。我觉得如果我必须实现一个类来调用动态对象上的动态方法，我一定是做错了什么。

我如何`dynamic`通过名称调用对象上的方法，知道目标类*没有*实现它并且应该使用它来响应它`TryInvokeMember`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T16:09:06.490

我有一个开源（Apache 许可）框架 Dynamitey（在 nuget 中可用），它封装了动态绑定器代码，这包括自动缓存调用站点。它也为每种类型的活页夹（getters、setters、events、indexers、operators、conversions）提供了方便的方法，但特别是你需要[InvokeMember](https://github.com/ekonbenefits/dynamitey/wiki/UsageReallyLateBinding#dynamic-dynamicinvokegetobject-target-string_or_invokemembername-name)。

在调用类的静态定义（在编译时）成员时，动态绑定代码实际上比反射（摊销）运行得更快。

```
Dynamic.InvokeMember(foo,"Bar",arg...); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T02:42:20.210

一种方法是模仿 C# 编译器为动态对象上的方法调用输出的内容。`[EditorBrowsable(EditorBrowsableState.Never)]`这需要使用在命名空间中标记的一堆类型`Microsoft.CSharp.RuntimeBinder`，因此它们在 Intellisense 中将不可见。不用说，这似乎不是一个受支持的方案，所以使用它需要您自担风险！

`Bar`此代码在派生自的类的实例上调用不带任何参数的动态方法`DynamicObject`：

```
dynamic dynamicObject = new DerivedFromDynamicObject();
var callSiteBinder = Binder.InvokeMember(CSharpBinderFlags.None, "Bar", Enumerable.Empty<Type>(), typeof(Program),
    new[] { CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null) });
var callSite = CallSite<Action<CallSite, object>>.Create(callSiteBinder);
callSite.Target(callSite, dynamicObject); 
```

[这篇](http://www.amazedsaint.com/2010/03/c-40-dynamic-keyword-for-dummies-under.html)博文和[这篇](http://geekswithblogs.net/simonc/archive/2012/07/20/inside-the-dlr---callsites.aspx)博文有更多关于呼叫站点和活页夹的血腥细节。

# android - 导航视图后，视图事件多次触发

> ID：13714296
> 
> 赞同：1
> 
> 时间：2012-12-05T00:16:23.323
> 
> 标签：android, actionscript-3, apache-flex, mobile, air

我制作了一个基本的 Air/Flex 应用程序，它有一个 Home View 和一个 2nd View 并附加了 mxml 事件来激活和停用它们。从主视图有一个按钮可以推动第二个视图。如果我从主视图暂停并重新打开该应用程序，则停用和激活事件会分别触发一次。然后，如果我转到第二个视图并执行相同的操作，则主视图中的激活/停用事件与第二个视图中的事件一起触发。当我返回主视图并重复测试时，会触发 3 组激活/停用事件（2 组来自家，1 组来自 2nd）并且这种情况一直持续下去。为什么会发生这种情况，我该如何预防？我在这里做错了吗？

我已经在 Android 2.3 设备和桌面测试仪上的 Air 3.3-3.5 中对此进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:13:33.920

似乎您以某种方式使用 Event.ACTIVATE 事件而不是 FlexEvent.VIEW_ACTIVATE

当您的应用程序从 os 获得焦点时，将调度 ACTIVATE 事件。它是一个广播事件——每个事件调度程序都会触发它。因此，您的所有视图都会发送它。

视图被回收，因此，当您第二次打开主视图时，似乎有一个您实际在屏幕上看到的新副本和一个在屏幕外等待垃圾收集的旧副本，仍在接收事件。所以，这就是为什么你在主视图中有两个事件。

您可以阅读[http://corlan.org/2011/01/12/understanding-flex-mobile-views-and-viewnavigator/](http://corlan.org/2011/01/12/understanding-flex-mobile-views-and-viewnavigator/)以获取有关视图生命周期的更多详细信息。

# c++ - 具有极其简单的类的未解析的外部符号（VS2010）

> ID：13714301
> 
> 赞同：1
> 
> 时间：2012-12-05T00:16:58.340
> 
> 标签：c++, visual-studio-2010, linker-errors, unresolved-external, lnk2019

我坚信这是一个非常基本的事情，每个活着的人都完全能够执行，但不知何故它不适合我。通过 Google 找到的常见问题解答和许多其他主题/问题并没有为我解决这个问题。

情况如下： 我有一个 Visual Studio 2010 项目。此项目位于 Visual Studio 2010 解决方案中。该项目有以下文件：

添加.h：

```
class Adder {
public:
    static int add(int i1, int i2);
}; 
```

添加.cpp：

```
class Adder {
public:
    static int add(int i1, int i2) {
        return i1 + i2;
    }
}; 
```

主.cpp：

```
#include "add.h"

int main() {
    Adder::add(5, 6);
    return 0;
} 
```

在尝试运行对我来说看起来相当基本的代码时，我收到以下链接器错误：

```
main.obj : error LNK2019: unresolved external symbol "public: static int __cdecl Adder::add(int,int)" (?add@Adder@@SAHHH@Z) referenced in function _main 
```

据我所知，这意味着链接器找不到 Adder::add() 的实现。但是，这些文件位于完全相同的项目中，生成的 .obj 文件位于完全相同的文件夹中，并且我读过的关于类和头文件主题的每一个教程都告诉我这应该可以工作。

到目前为止，我已经尝试了以下潜在的解决方案：

*   将项目自己的文件夹添加到附加的 include/dependencies/sources/whatevers
*   向各种事物添加外部标识符
*   使用单独的命名空间
*   其他各种小调整，希望它们能奏效

所以我想我的问题归结为：如何让链接器注意到 add.cpp 文件？感谢您提供任何帮助，我现在已经花了几个小时没有成功，而这对我来说似乎是一件非常基本的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:19:06.497

以下定义了一个全新的类

```
//add.cpp:
class Adder {
public:
    static int add(int i1, int i2) {
        return i1 + i2;
    }
}; 
```

与标题中的不同，仅适用于该翻译单元（“add.cpp”）。

它应该包含的是：

```
//add.cpp
#include "add.h"
int Adder::add(int i1, int i2) {
    return i1 + i2;
} 
```

这实现了从 header 类中定义的方法`add.h`。

# kernel - 是否可以从软件调用硬件中断？

> ID：13714302
> 
> 赞同：0
> 
> 时间：2012-12-04T20:26:47.437
> 
> 标签：kernel, interrupt

在 C 中，系统调用是用`asm("int $0x80")`. `request_irq`是否可以直接从软件调用注册的 IRQ ？如何？

PS：apic->send_IPI_self 看起来很有希望。还没有测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:43:22.953

从用户软件，我会说不。也许如果您是您正在谈论的软件处于内核模式，我会说很有可能调用中断处理器。

# git - 为什么即使我强制推送较旧的提交，heroku 仍认为我的仓库是最新的？

> ID：13714305
> 
> 赞同：0
> 
> 时间：2012-12-05T00:17:21.090
> 
> 标签：git, heroku

如果我强制推送比 head 更早的提交，它会起作用。如果我然后尝试推头，我被告知一切都是最新的。为什么？这是一般的 git 问题，还是 heroku 独有的问题？第二个命令实际上是

```
# 这工作，正如预期的那样
git push heroku 开发：master
...

# 那么，这不起作用，正如预期的那样
git push heroku 开发：master
一切都是最新的

# 然后，推送一个较旧的提交，正如预期的那样
git push heroku a1b2c3d4:master
...

# 那么，这失败了。为什么？！:-(
git push heroku 开发：master
一切都是最新的

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:53:53.030

您是否曾经将旧提交推送到 Heroku？我认为您没有，因为 Heroku 可能会确定提交 id 是否已收到版本。这个假设可以通过以下步骤来验证：

```
1\. git push heroku develop:master => our starting point
2\. Change and commit => Rev A
3\. Change and commit => Rev B
4\. git push heroku develop:master => Rev B known to Heroku
5\. Change and commit => Rev C
6\. git push heroku develop:master => Rev C known to Heroku
7\. git push heroku Rev A:master => this should work as unknown to Heroku
8\. git push heroku Rev B:master => this should not work as known to Heroku
9\. git push heroku develop:master => we know this doesn't work 
```

[无论如何，您可以使用https://devcenter.heroku.com/articles/releases#listing-release-history](https://devcenter.heroku.com/articles/releases#listing-release-history) 和 [https://devcenter.heroku.com/articles/releases#rollback](https://devcenter.heroku.com/articles/releases#rollback)来回滚动

# javascript - 奇怪的javascript对象初始化？

> ID：13714308
> 
> 赞同：4
> 
> 时间：2012-12-05T00:17:30.700
> 
> 标签：javascript, variables, object, initialization

我最近在一个 WebGL 教程中遇到了这个变量初始化：

```
var mouse = { x: 0, y: 0 }, INTERSECTED; 
```

我从未见过这种格式。我知道它正在创建一个具有 x 和 y 属性的对象，但是 INTERSECTED 与变量/对象有什么关系？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T00:19:13.620

该行只是简单地声明两个变量（`mouse`和`INTERSECTED`），并初始化`mouse`为`{ x: 0, y: 0}`。

`INTERSECTED`不一定与 相关`mouse`，尽管清晰的代码只应在高度相关的情况下将多个变量一起声明（即便如此，许多人更喜欢在单独的行上声明每个变量）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T00:19:33.897

`INTERSECTED`不相关`mouse`。这只是初始化两个变量的一种方式。我猜它`INTERSECTED`在那里，所以它被视为局部变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T00:23:04.580

我可能弄错了，但我认为它就像

```
var A=3,B; 
```

定义值为 3 的 A 和未初始化的 B。INTERSECTED 只是另一个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T00:40:53.383

只需加上我的 2 美分：通常的约定是将它们写在两个单独的行上，这当然可以避免任何混淆：

```
var mouse = { x: 0, y: 0 },
    INTERSECTED; 
```

（另请注意，约定是有一个四个空格缩进很好地对齐变量）

# svn - 使用 TortoiseSVN 删除修订

> ID：13714310
> 
> 赞同：22
> 
> 时间：2012-12-05T00:18:07.370
> 
> 标签：svn, version-control, tortoisesvn

[我使用TortoiseSVN](http://en.wikipedia.org/wiki/TortoiseSVN)对我的 SVN 服务器进行了一些错误的代码更改。

现在头部修订版是 155，但我想删除最后 2 个修订版，以便头部修订版是 153。换句话说，我想“撤消”我的最后两个提交。

如何使用 TortoiseSVN 做到这一点？TortoiseSVN 菜单中是否存在选项，还是我需要使用命令行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T00:26:32.347

如果您打开 SVN 日志，则可以右键单击修订并使用选项*Revert to this revision*或*Revert changes from this revision*。这两个选项都将更新您的工作副本（然后您可以提交）。

TortoiseSVN 中没有*删除*修订的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T00:33:31.027

作为更新的工作副本的根目录，您应该使用以下命令：

```
svn merge -rHEAD:153 . 
```

这将“撤消”您对修订版 153 的所有更改，以便您的修订版 156 看起来像修订版 153。

不要忘记事后提交！

您可以在 TortoiseSvn 中执行相同的操作：打开“*显示日志*”界面，选择修订版 153，右键单击它并选择“*从该修订版还原更改*”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T00:32:38.447

不幸的是，使用 TortoiseSVN（或任何其他 SVN 客户端）没有办法真正删除修订，因为它完全从历史中消失了。更改 SVN 存储库的历史记录是困难的，并且需要在服务器上进行操作 - 请参阅这个问题：[为什么不删除 Subversion 的基本功能？](https://stackoverflow.com/questions/2426056/why-isnt-obliterate-an-essential-feature-of-subversion)

但是，您可以通过进行新的签入将其更改回“撤消”签入。这通常使用一种称为“反向合并”的技术来完成。参见例如[撤回意外签入](https://stackoverflow.com/questions/747713/subversion-retract-accidental-checkin)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T12:35:01.830

我使用了从[Tortoise 网站](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-howto-rollback.html)获取的这些说明。

**但重要的是在 之后单击 COMMIT**。直到我意识到这一点，我才变得疯狂。

如果您需要进行较旧的修订，则您的头部修订请执行以下操作：

1.  选择需要还原更改的文件或文件夹。如果要还原所有更改，这应该是顶级文件夹。

2.  选择 TortoiseSVN → 显示日志以显示修订列表。您可能需要使用 Show All 或 Next 100 来显示您感兴趣的修订。

3.  右键单击选定的修订，然后选择上下文菜单 → 恢复到此修订。这将放弃选定修订后的所有更改。

4.  **做出承诺。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T00:28:58.487

从命令行：

恢复对文件的更改：

```
svn merge -r <newBadRev>:<oldRevToMergeBackTo> <filename> 
```

例如：

```
svn merge -r 155:153 myfile.cpp 
```

# windows-phone-7 - 在 Windows Phone 虚拟键盘中显示十进制数字

> ID：13714317
> 
> 赞同：1
> 
> 时间：2012-12-05T00:19:13.963
> 
> 标签：windows-phone-7

我在 Windows Phone 应用程序的主页上放置了一个 TextBox。一旦我点击它，操作系统就会显示一个虚拟键盘。一旦键盘出现，有没有办法显示十进制数字？此操作相当于点击键盘左下角的 &123。TextBox 应该只接受数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:39:47.380

在您的 XAML 代码中，更改输入范围。例如：

```
<TextBox x:Name="expense" Margin="0,61,252,16" Text="Expense">
            <TextBox.InputScope>
                <InputScope>
                    <InputScopeName NameValue="Digits" />
                </InputScope>
            </TextBox.InputScope>
</TextBox> 
```

# visual-studio-2012 - IValueConverter 无法在 VS2012-Blend 中为 win 8 工作

> ID：13714318
> 
> 赞同：1
> 
> 时间：2012-12-05T00:19:17.457
> 
> 标签：visual-studio-2012, expression-blend, windows-phone-8

我正在使用 VS 2012 和 Blend for windows 8。当我在我的 Windows Phone 和 Silverlight 应用程序中使用转换器时，我会单击新转换并从列表中选择我的转换器。现在我已经升级到 VS 2012 和 Blend for windows 8，我的自定义转换都没有出现。谁知道如何找到转换器？

```
 class Class1 : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:46:15.277

'从来没有按照您在评论中发布的方式完成它（您是否引用了您的转换器命名空间？），但是这是有效的。在 .xaml 之上添加对转换器命名空间的引用：

```
xmlns:converters="clr-namespace:Appname.Views.Converters" 
```

然后声明转换器：

```
<phone:PhoneApplicationPage.Resources>
    <converters:SavedTrackColorConverter x:Key="SavedTrackColorConverter" />
</phone:PhoneApplicationPage.Resources> 
```

然后在需要的地方使用转换器：

```
<TextBlock Foreground="{Binding ListboxStringSavedTunes, Converter={StaticResource SavedTrackColorConverter}}" Text="{Binding ListboxStringSavedTunes}"/> 
```

# asp.net-mvc-4 - 带有 Id 和索引操作的 MVC4 路由

> ID：13714320
> 
> 赞同：3
> 
> 时间：2012-12-05T00:19:19.263
> 
> 标签：asp.net-mvc-4, routes

我正在尝试完成以下操作并收到 #2 的“找不到资源”错误。假设是因为路由配置不正确。

所需网址：

1) domain.com/客户

2) domain.com/Customer/1 ***不工作**

3) domain.com/Customer/All

```
public ActionResult Index(int? id)
{
    var viewModel = new CustomerViewModel();

    if (!id.HasValue)
        id = 1; // ToDo: Current Logged In Customer Id

    viewModel.Load(id.Value);

    return View(viewModel);
}
public ActionResult All()
{
    return View(CustomerModel.All());
} 
```

我的路线配置具有默认路线设置，我尝试添加额外的路线无济于事。

```
routes.MapRoute(
    name: "Customer",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Customer", action = "Index", id = UrlParameter.Optional }
); 
```

我已经排除了建立新路线的尝试，因为它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T00:36:50.983

您的路线将正常化为**domain.com/Customer/Index/1**。当您有路由的后续部分时，您不能仅仅因为它的值将是默认值就消除较早的组件。在这种情况下，它正在寻找一个它找不到的名为“1”的*动作。*

**编辑**：

如果您想要的路由是**domain.com/Customer/ID**，那么您可以将这样的路由添加到您的路由表中：

```
routes.MapRoute(
    name: "CustomerAll",
    url: "Customer/All",
    defaults: new { controller = "Customer", action = "All" }
);
routes.MapRoute(
    name: "CustomerByID",
    url: "Customer/{id}",
    defaults: new { controller = "Customer", action = "Index" }
); 
```

这些更具体的路线应该在您的默认路线之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:36:53.380

尝试在默认路由之前添加此路由

```
routes.MapRoute(
    name: "Customer",
    url: "Customers/{id}",
    defaults: new { controller = "Customer", action = "Index", id = UrlParameter.Optional }
); 
```

**并注意网址以客户而不是客户开头。**

并且您想要的 URL 将是 :`domain.com/Customers/1`而不是`domain.com/Customer/1`

# cuda - 将设备内存访问与主机线程同步

> ID：13714324
> 
> 赞同：4
> 
> 时间：2012-12-05T00:19:58.627
> 
> 标签：cuda, gpu, synchronize

CUDA 内核是否可以在没有任何主机端调用（例如 of ）的情况下将写入同步到设备映射内存`cudaDeviceSynchronize`？当我运行以下程序时，内核似乎并没有在终止之前等待对设备映射内存的写入完成，因为在内核启动后立即检查页面锁定的主机内存不会显示对内存的任何修改（除非插入延迟或`cudaDeviceSynchronize`取消注释调用）：

```
#include <stdio.h>
#include <cuda.h>

__global__ void func(int *a, int N) {
    int idx = threadIdx.x;

    if (idx < N) {
        a[idx] *= -1;
        __threadfence_system();
    }
}

int main(void) {
    int *a, *a_gpu;
    const int N = 8;
    size_t size = N*sizeof(int);

    cudaSetDeviceFlags(cudaDeviceMapHost);
    cudaHostAlloc((void **) &a, size, cudaHostAllocMapped);
    cudaHostGetDevicePointer((void **) &a_gpu, (void *) a, 0);

    for (int i = 0; i < N; i++) {
        a[i] = i;
    }
    for (int i = 0; i < N; i++) {
        printf("%i ", a[i]);
    }
    printf("\n");

    func<<<1, N>>>(a_gpu, N);
    // cudaDeviceSynchronize();

    for (int i = 0; i < N; i++) {
        printf("%i ", a[i]);
    }
    printf("\n");

    cudaFreeHost(a);
} 
```

我在 Linux 上使用 CUDA 4.2.9 为 sm_20 编译上述内容，并在 Fermi GPU (S2050) 上运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T01:40:06.293

在任何内核活动发生之前，内核启动将立即返回到主机代码。内核执行以这种方式与主机执行异步并且*不会阻塞*主机执行。因此，您必须稍等片刻或使用屏障（如 cudaDeviceSynchronize()）来查看内核的结果也就不足为奇了。

[如此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)所述：

> 为了方便主机和设备之间的并发执行，一些函数调用是异步的：*在设备完成请求的任务之前，控制权返回给主机线程*。这些都是：
> 
> *   内核启动；
> *   两个地址之间的内存复制到同一个设备内存；
> *   从主机到设备的内存复制 64 KB 或更少的内存块；
> *   由以 Async 为后缀的函数执行的内存拷贝；
> *   内存设置函数调用。

当然，这都是故意的，以便您可以同时使用 GPU 和 CPU。如果您不想要这种行为，您已经发现的一个简单解决方案是插入一个屏障。如果您的内核正在生成您将立即复制回主机的数据，那么您不需要单独的屏障。内核之后的 cudaMemcpy 调用将等到内核完成后再开始它的复制操作。

我想回答你的问题，你希望内核启动是同步的，甚至不需要使用屏障（你为什么要这样做？添加 cudaDeviceSynchronize() 调用有问题吗？）可以这样做：

> “程序员可以通过将 CUDA_LAUNCH_BLOCKING 环境变量设置为 1 来全局禁用系统上运行的所有 CUDA 应用程序的异步内核启动。此功能仅用于调试目的，绝不能用作使生产软件可靠运行的一种方式。”

如果你想要这种`synchronous`行为，最好只使用障碍（或依赖于另一个后续的 cuda 调用，如 cudaMemcpy）。如果您使用上述方法并依赖它，那么一旦其他人尝试在未设置环境变量的情况下运行它，您的代码就会中断。所以这真的不是一个好主意。

# c - 在 C 中强制转换指向 int 的指针

> ID：13714327
> 
> 赞同：2
> 
> 时间：2012-12-05T00:20:41.057
> 
> 标签：c, arrays, pointers, reference, casting

我有这个数组“r->phy_addr”定义如下：

```
int array [r->numpgs];
r->phy_addr= &array[0]; 
```

现在我想将数组的元素零传递给一个以“int”作为参数的函数：

```
add(int x){}; 
```

如果我喜欢这个

```
add(r->phy_addr[0]); 
```

然后出现“无法将指针作为 int 传递”的错误

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:47:37.727

如果编译器抱怨`r->phy_addr[0]`beng 指针，则`r->phy_addr`必须具有指针到指针类型（`int **`很可能）。在这种情况下，您的问题甚至更早开始。这个

```
r->phy_addr = &array[0]; 
```

已经无效，因为您正在`int *`为`int **`对象赋值。编译器应该已经告诉你了。

换句话说，您的呼叫`add`不是问题。忘记调用`add`. 现在看那个电话还为时过早。您还有其他问题需要在此之前解决。

是什么`r->phy_addr`？它应该有`int **`类型吗？如果是这样，您为什么要按上面所示分配它？您为什么忽略由该无效分配触发的编译器诊断消息？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T01:56:04.200

试试 `add(*(r->phy_addr[0]));` 应该可以

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T00:42:28.110

我怀疑 r->phy_addr 有`int **`类型。所以`r->phy_addr[0]`获取`int *`类型，然后编译器警告您参数应该是`int`类型，而不是`int *`类型。

将类型更改`r->phy_addr`为`int *`。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T00:24:26.423

怎么样：

```
add(*(r->phy_addr[0])); 
```

? 因为，**显然**，`r->phy_addr[0]`是一个指针。

# java - Java 中的非泛型集合 - 有什么用处？

> ID：13714331
> 
> 赞同：18
> 
> 时间：2012-12-05T00:21:17.420
> 
> 标签：java, generics, collections

有没有在 Java 中使用非泛型集合而不是泛型更好的情况（或者它们仍然存在只是为了向后兼容）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T00:26:16.857

绝对不。如果您无法在声明时推断类型，请使用 a`?`作为类型说明符 - 这就是它的用途。（在某些情况下 using`?`会限制您调用某些方法，例如`List.add()`. 在这种情况下，您可以找到更具限制性的类型说明符；`Object`通常有效）。

仍然支持非泛型用法，因为从技术上讲，*不*使用它并没有错；您最终会编写更多的铸造说明，并使自己面临更高的`ClassCastException`'s 风险，但就规范而言，它在技术上是合法的。

总的来说，没有任何情况（我能想到）避免使用泛型“比”使用它们更好。在最坏的情况下（当您必须使用`?`或`Object`在声明时），这两种方法是相等的。

# c# - 强制循环包含异步任务以保持顺序

> ID：13714333
> 
> 赞同：0
> 
> 时间：2012-12-05T00:21:35.350
> 
> 标签：c#, loops, asynchronous, printing, backgroundworker

有些东西告诉我这可能是一个愚蠢的问题，实际上我从错误的方向解决了我的问题，但是这里有。

我有一些代码循环遍历文件夹中的所有文档 - 每个文件夹中这些文档的字母顺序很重要，这种重要性也反映在文档的打印顺序中。这是一个简化版本：

```
var wordApp = new Microsoft.Office.Interop.Word.Application();

foreach (var file in Directory.EnumerateFiles(folder))
      {
          fileCounter++;

          // Print file, referencing a previously instantiated word application object
          wordApp.Documents.Open(...)
          wordApp.PrintOut(...)
          wordApp.ActiveDocument.Close(...)
      } 
```

看起来（我可能错了）PrintOut 代码是异步的，并且应用程序有时会遇到文档打印乱序的情况。这已得到确认，因为如果我单步执行或拨打足够长的`Sleep()`电话，则所有文件的顺序都是正确的。

我应该如何防止下一个打印任务在前一个打印任务完成之前开始？

我最初认为我可以使用 a `lock(someObject){}`，直到我记得它们仅用于防止多个线程访问同一代码块。这都在同一个线程上。

我可以在`Microsoft.Office.Interop.Word.Application`对象 上连接一些事件`DocumentOpen`：`DocumentBeforeClose`和 `DocumentBeforePrint`

我刚刚认为这实际上可能是打印队列无法准确区分在同一秒内添加的大量文档的问题。这不可能是问题，不是吗？

*附带说明一下，此循环位于从`BackgroundWorker`对象的 DoWork 事件调用的代码中。我正在使用它来防止 UI 阻塞并反馈进程的进度。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:01:03.753

您的事件处理方法似乎不错。您可以向事件添加一个处理程序，而不是使用循环，`DocumentBeforeClose`在其中您将获取下一个要打印的文件，将其发送到 Word，然后继续。像这样的东西：

```
List<...> m_files = Directory.EnumerateFiles(folder);
wordApp.DocumentBeforeClose += ProcessNextDocument;

...

void ProcessNextDocument(...)
{
    File file = null;
    lock(m_files)
    {
        if (m_files.Count > 0)
        {
            file = m_files[m_files.Count - 1];
            m_files.RemoveAt(m_files.Count - 1);
        }
        else
        {
            // Done!
        }
    }

    if (file != null)
    {
        PrintDocument(file);
    }
}

void PrintDocument(File file)
{
    wordApp.Document.Open(...);
    wordApp.Document.PrintOut(...);
    wordApp.ActiveDocument.Close(...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:50:03.967

# .net - 以 .Net 4.5 为目标，但 Glimpse 报告 .Net 4.0

> ID：13714339
> 
> 赞同：1
> 
> 时间：2012-12-05T00:21:56.243
> 
> 标签：.net, .net-4.5, asp.net-4.5, glimpse

我有一个面向 .Net Framework 4.5 的 ASP.NET Web 应用程序。然而，Glimpse 在其应用程序的统计数据中报告了 .Net 4.0。这是正常的吗？我知道 4.5 是 4.0 的就地替代品。是这个原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:25:43.437

CLR 版本仍报告为 4.0 版。只要您在 Visual Studio 中定位 4.5 版，您就会得到正确的结果。即使 CLR 版本仍报告为 4.0

# mysql - MySQL存储过程语法痛苦

> ID：13714347
> 
> 赞同：0
> 
> 时间：2012-12-05T00:23:05.673
> 
> 标签：mysql, stored-procedures

我正在尝试创建一个简单的存储过程，该过程允许我进行批量插入，但是我遇到了语法问题并且无法弄清楚哪里出了问题，尽管将我的过程语法与现有示例进行了比较，这似乎是正确的。

```
CREATE PROCEDURE populateUserTable()
 BEGIN
  DECLARE counter int(10);
  SET counter = 1;
 WHILE counter < 101 DO
  INSERT INTO user(userid) values(counter);
  SET counter = counter + 1
 END WHILE;
END 
```

运行时，MYSQL 状态： **您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法**

并突出显示这个人：

**CREATE PROCEDURE populateUserTable( ) BEGIN DECLARE counter INT( 10 ) ;**

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:29:34.727

你用过吗

```
DELIMITER $$ 
```

在开始时？

尝试

```
DELIMITER $$
CREATE PROCEDURE populateUserTable()
 BEGIN
   DECLARE counter int(10);
   SET counter = 1;
   WHILE counter < 101 DO
      INSERT INTO user(userid) values(counter);
      SET counter = counter + 1
   END WHILE;
END $$
DELIMITER ; 
```

# pdf - PDF 库 API

> ID：13714349
> 
> 赞同：1
> 
> 时间：2012-12-05T00:23:35.120
> 
> 标签：pdf, google-drive-api, scribd

我需要构建一个小型 PDF 库来显示许多目录，用户将能够查看文档并浏览页面，但他将无法以任何方式下载或共享文档，以某种方式像 Google Books 一样工作（[这里是一个例子](http://books.google.com.mx/books?id=UXneuOIvhEAC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false)）。

我想到了诸如 Google Drive API 或某种 Scribd API 之类的东西，但我不知道其中一个是否可以工作，我想知道这些应用程序是否有更多选项，或者前面提到的会做工作。

编辑：忘了提，这一切都是在网络浏览器中完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:51:29.057

原则上，您只需要能够将 PDF 文件中的页面呈现为图像。然后你的应用程序（你没有提到你想在哪里构建它）负责显示图像、滚动、从一个页面移动到另一个页面等......

如果这是正确的，那么有多个可能的库可以做到这一点： - ImageMagick 可以将 PDF 转换为图像 (http://www.imagemagick.org) - GhostScript 具有 PDF 扩展，可以将 PostScript 或 PDF 转换为图像和其他格式 ( http://www.ghostscript.com) - 我敢肯定还有很多很多...

还有一些商业工具，例如来自 Adob​​e（通过 DataLogics 获得许可，[http:](http://www.datalogics.com) //www.datalogics.com ）和 callas 软件（http://www.callassoftware.com -*我隶属于这家公司*） )

# c# - 数据库更改时更新datagridview

> ID：13714354
> 
> 赞同：0
> 
> 时间：2012-12-05T00:24:03.350
> 
> 标签：c#, .net, winforms

我有 2 台计算机：服务器和客户端，两者都有相同的 winform 应用程序，相同的数据库。

我希望能够在数据库更改时更新 datagridview

所以我每 4 秒更新一次代码更新，刷新 datagridview 数据源。

数据源更改时很少出现问题

首先，如果在数据网格中选择了一行（dataGridView_RowHeaderMouseClick），它将失去焦点。

如果我向下滚动datagridview，滚动条会跳到开头。

关于如何正确操作的任何想法？

谢谢

巴罗兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:20:21.110

您不想在没有任何条件的情况下每 4 秒刷新一次 DataSource。正如你所说，有几个功能问题会受此影响（例如失去对一行的关注，虽然可以通过每次关注一行时存储行句柄来解决，但不应该是你需要的东西要做），没有提到如果您正在加载的表很大，则会由于不断重新加载而导致性能问题。

您应该在每次 DataSource 更改时触发刷新，或者按照 Anthbs 的说法，将数据与网格的 DataSource 进行比较，并且仅在它们不同时才刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:51:42.493

这是减少刷新问题的几个想法。

*   为了减少发生这种情况的机会，您可以将新数据与网格中的数据进行比较，仅在数据发生更改时才刷新。

*   您可以在刷新网格之前存储选定的索引，并在刷新后将其设置回来。

# python - 使用 Numpy 获取矩阵中数组的平均值

> ID：13714357
> 
> 赞同：2
> 
> 时间：2012-12-05T00:24:46.903
> 
> 标签：python, numpy, list-comprehension

```
columnFour = [data[0::, 1] == 1, data[0::, 4]] 
```

数据是一个表格，其中 1 是我要选择的变量（它等于 1），而 4 是我试图绘制到一维数组中的变量。

4列中的一些值是空白（''），我从python得到的错误如下：

```
Traceback (most recent call last):
File "<filename>", line 62, in <module>
  print np.mean(age, dtype=float);
File "D:\Python27\lib\site-packages\numpy\core\fromnumeric.py", line 2373, in mean
  return _wrapit(a, 'mean', axis, dtype, out)
File "D:\Python27\lib\site-packages\numpy\core\fromnumeric.py", line 37, in _wrapit
  result = getattr(asarray(obj),method)(*args, **kwds)
File "D:\Python27\lib\site-packages\numpy\core\numeric.py", line 235, in asarray
  return array(a, dtype, copy=False, order=order)
ValueError: cannot set an array element with a sequence 
```

如何选择第 4 列中的所有非空数字，或选择包括那些空值在内的所有数字？我宁愿全选，但任何一个都可以。我试图得出第 4 列中数据的平均值以重新插入空值，但在不同的第 1 列值中对它们进行平均。

例如，第 4 列中的所有数字`column 1 == 1`将被平均，然后`column 1 == 1`将重新插入该平均值的空值。

编辑：我使用 for 循环来浏览数据。

对于数据中的 x：如果 x[1] == '1' 和 x[4]：first.append(np.float(x[4]))
如果 x[1] == '2' 和 x[4] : second.append(np.float(x[4])) 如果 x[1] == '3' 和 x[4]:third.append(np.float(x[4]))

结果是三个数组具有我正在寻找的不同值，然后可以对其进行平均并放回数据中的孔中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:30:24.413

我想你想要这样的东西：

```
mask = data[:, 1] == 1
average = np.mean(data[mask, 4]) 
```

您提供的代码中没有列表理解，您只需创建一个包含两个元素的列表，第一个`data[:, 1] == 1`和第二个`data[:, 4]`。

# sql - 预期语句结束错误

> ID：13714358
> 
> 赞同：1
> 
> 时间：2012-12-05T00:24:48.670
> 
> 标签：sql, select, vbscript

我有这个在 3rd 方应用程序中运行的 VB 脚本，并抛出“预期语句结束”错误。这是有问题的代码。选择语句在 SQL 服务器管理器工作室中运行良好。

谢谢。

```
Dim SecurityDB
Set SecurityDB = CreateObject("ADODB.Connection")
Conn = "DRIVER={SQL Server};SERVER=ustcca015s6\Continuum;DATABASE=continuumdb;UID=Andy8796;PWD=xxxx1234;"
SecurityDB.Open Conn
Set EmployeeRS = SecurityDB.Execute "Select count(*) from dbo.personnel where state=1 and lastname not like 'lapt%' and lastname is not NULL and valuelo in (Select ObjectIdLo from area where uiname like 'usmm%' and uiname not like '%gate%') and valuelo <> 1111497912;"
Result = EmployeeRS.GetRows
EmployeeRS.Close
SecurityDB.Close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:49:09.930

@RichardTheKiwi 两周前在评论部分发布了答案，但遗憾的是没有将其作为答案添加到 ... 答案部分。好的，Point Pimp[ette] 今晚回来了，所以这些问题显示为离“解决”更近了一步！

执行后不需要括号吗？

```
Set EmployeeRS = SecurityDB.Execute("Select count(*) from dbo.personnel where state=1 and lastname not like 'lapt%' and lastname is not NULL and valuelo in (Select ObjectIdLo from area where uiname like 'usmm%' and uiname not like '%gate%') and valuelo <> 1111497912;") 
```

# c# - 一次将密码部分锁定到一个入口

> ID：13714360
> 
> 赞同：1
> 
> 时间：2012-12-05T00:25:01.260
> 
> 标签：c#, multithreading, synchronization, locking

我试图限制对单个对象的访问，因此一次只有一个线程使用它，此外，我想防止同一个线程两次访问受限制的代码。

我尝试了 Lock 方法，我发现它并没有锁定锁定她的线程，而只是锁定其他线程..

如下：

```
public sealed class Singleton
{
    private static readonly Singleton instance    = new Singleton();

    static Singleton()
    {
    }

    private Singleton()
    {
    }

    public static Singleton Instance
    { 
        get
        {
            return instance;
        }
    }
}

public class SomeWorker
{
    private readonly Timer _doWorkTimer = new Timer(20);

    public SomeWorker()
    {
        InitiateTimer();
    }

    private void InitiateTimer()
    { 
        _doWorkTimer .Elapsed += DoWorkElapse;
        _doWorkTimer .Enabled = true;
    }

    private void DoWorkElapse(object source, ElapsedEventArgs e)
    { 
        DoSomeWork();
    }

    private void DoSomeWork()
    {
        // I know that lock on string is wrong!
        // Its just for the example only I
        // Its just to make sure all the program is use the same lock..
        lock ("ConnectionLock")
        { 
             Console.WriteLine("Lock");

             var inst = Singletone.Instance;

             // Do Some Work on "inst" ...

             Console.WriteLine("Unlock");
        }
    }
} 
```

例如，控制台中的结果是：

. . .

锁

开锁

**锁**

**锁**

开锁

. . .

可以看到，2条Lock评论一个接一个显示

所以这意味着计时器线程访问了两次“DoSomeWork（）”。

任何人都知道如何使这个锁工作？

其他同步方法可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:30:57.383

您没有正确锁定（最重要的是，您正在锁定一根绳子，这是一个很大的禁忌）。为了节省时间，请阅读Jon Skeet 的[这篇](http://csharpindepth.com/Articles/General/Singleton.aspx)文章，并实现其中一种模式，以免让自己头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:41:45.257

在您的代码中，您有

```
public static Singletone Instance()
{
    if (_instance == null)
    {
        lock (_instance)
        {
            if (_instance == null)
            {
                _instance = new Singletone ();
            }
        }
    }
    return _instance;;
} 
```

想想看。`if (_instance == null)`你做`lock (_instance)`。所以你锁定使用`null`. 这一点都不好。

在 MSDN [lock Statement (C# Reference)](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)中给出的如何使用示例`lock`是：

```
class Account
{
    decimal balance;
    private Object thisLock = new Object();

    public void Withdraw(decimal amount)
    {
        lock (thisLock)
        {
            if (amount > balance)
            {
                throw new Exception("Insufficient funds");
            }
            balance -= amount;
        }
    }
} 
```

我想您应该遵循它并有一个单独的对象将其用作锁。

* * *

其次，[线程同步](http://msdn.microsoft.com/en-us/library/ms173179%28v=vs.80%29.aspx)原语用于分离不同线程对共享资源的访问。如果你需要从一个线程中分离访问，你只需要使用标志。像这样的东西：

```
bool isBusy = false;
public static void Foo()
{
    if (!isBusy)
    {
        isBusy = true;
        try
        {            
            //do the job
        }
        finally
        {
            isBusy = false;
        }
    }
} 
```

在这里你应该明白你只是跳过了“locked-by-flag”代码。相反，如果你想让线程等待自己，特别是在多线程应用程序中，我想它看起来应该重新设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:45:41.667

在 .NET 中实现单例的最简单方法是：

```
public class Singleton : IDisposable
{
    private readonly static Singleton _instance = new Singleton();
    private readonly static object lockObject = new object();

    static Singleton()
    {
    }

    private Singleton()
    {
        InitiateConnection();
    }

    public static Singleton Instance
    {
        get { return _instance; }
    }

    /// <summary>
    /// Method that accesses the DB.
    /// </summary>
    public void DoWork()
    {
        lock (lockObject)
        {
            //Do Db work here. Only one thread can execute these commands at a time.                
        }
    }        

    ~Singleton()
    {
        //Close the connection to DB.

        //You don't want to make your singleton class implement IDisposable because
        //you don't want to allow a call to Singleton.Instance.Dispose().
    }
} 
```

阅读Bryan 在他的回答中建议的关于[.NET](http://csharpindepth.com/Articles/General/Singleton.aspx)中的单例模式实现的优秀文章。上面的实现是基于文章中描述的第四个版本。CLR 保证静态字段的构造是线程安全的，因此您不需要在那里锁定。但是，如果您的对象具有可以更改的状态（字段），您将需要锁定。

请注意，有一个`private readonly object`用于确保互斥的`DoWork`方法。这样一个线程可以`DoWork`一次调用。还要注意，同一个线程不可能同时调用这个方法两次，因为一个线程是按顺序执行指令的。可以从单个线程调用此方法两次的唯一方法是，如果`DoWork`您在内部调用另一个最终调用`DoWork`. 我看不出这样做的意义，如果这样做，请注意避免堆栈溢出。您可以遵循 Konstantin 的建议并使用标志，但恕我直言，您应该重新设计`DoWork`以只做一件事并避免此类情况。

# c++ - 链接器错误：未定义的引用

> ID：13714364
> 
> 赞同：0
> 
> 时间：2012-12-05T00:25:12.820
> 
> 标签：c++, linker, linker-errors, undefined-reference, dev-c++

我不断收到以下信息：

[链接器错误] 对 `ComponentClass::POSIZIONENULLA' ld 的未定义引用返回 1 退出状态 [构建错误] [main.exe] 错误 1

有人可以帮我解决这个问题。这是我的代码：

组件类.h

```
#ifndef _ComponentClass_H
#define _ComponentClass_H

template< class T>
class ComponentClass
{
        public:

               typedef ComponentClass* posizione;
               static const posizione POSIZIONENULLA;
               ComponentClass();
};

template< class T>
ComponentClass<T>::ComponentClass()
{
const posizione POSIZIONENULLA=(ComponentClass*)-1;
}
#endif 
```

项目类.h

```
#ifndef _ProjectClass_H
#define _ProjectClass_H

#include "ComponentClass.h"

template<class T>
class ProjectClass
{
  public:
        typedef typename ComponentClass<T>::posizione posizione;

         ProjectClass();
         posizione dummyFunction();

         private:
          posizione dummyposition;

};

          template<class T>
          ProjectClass<T>::ProjectClass()
          {

           dummyposition=   (posizione)ComponentClass<T>::POSIZIONENULLA;                  
          }

          template<class T>
          typename ProjectClass<T>::posizione ProjectClass<T>::dummyFunction()
          {
           posizione tempPosition;
           tempPosition=(posizione)ComponentClass<T>::POSIZIONENULLA;
           return tempPosition;
          } 
#endif 
```

主文件

```
#include <cstdlib>
#include <iostream>
#include <string>

#include "ProjectClass.h"

using std::cout;
using std::endl;
using std::string;

int main(int argc, char *argv[])
{  
ProjectClass<int> pc;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:22:11.657

这段代码实际上并没有做任何有用的事情：

```
template< class T>
ComponentClass<T>::ComponentClass()
{
    const posizione POSIZIONENULLA=(ComponentClass*)-1;
} 
```

它只是在构造函数中声明一个局部变量，初始化它然后不使用它。它对你的`static const posizione POSIZIONENULLA`.

我想你的意思是：

```
template< class T>
const typename ComponentClass<T>::posizione ComponentClass<T>::POSIZIONENULLA=(ComponentClass*)-1; 
```

那应该可以解决您的链接错误。附带说明一下`-1`，正如其他人在上面的评论中指出的那样，将其用作“特殊”指针值并不是一个好主意

# java - UnsatisfiedLinkError 使用 JNI for Native C Package libfprint

> ID：13714380
> 
> 赞同：3
> 
> 时间：2012-12-05T00:27:17.010
> 
> 标签：java, java-native-interface

我正在尝试在我最后一年的项目中使用一个名为[libfprint](http://www.freedesktop.org/wiki/Software/fprint/libfprint)的包。这是一个开源指纹读取器 SDK。我正在用 Java 做我的项目，所以我需要移植 libfprint 功能。

好运击中了我，结果有人已经这样做了。名为[jlibfprint](http://code.google.com/p/jlibfprint/)的包是 libfprint 的 JNI 包装器。

所以我按照 jlibfprint 和 libfprint 中的说明进行设置。libfprint 或多或少可以正常工作。至于jlibfprint，当我尝试运行我得到的示例程序时，

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no JlibFprint_jni in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at JlibFprint.<clinit>(JlibFprint.java:28)
    at SampleRun.main(SampleRun.java:30) 
```

> JlibFprint.(JlibFprint.java:28)

指的是

```
 static {
    System.loadLibrary("JlibFprint_jni");
 } 
```

所以现在我正在查看项目属性并进入“本地库位置”字段，并将其指向包含**一个名为 libJlibFprint_jni.so 的单个文件**的目录。

现在当我运行程序时，我得到的错误是，

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: JlibFprint.enroll_finger()LJlibFprint$fp_print_data;
    at JlibFprint.enroll_finger(Native Method)
    at SampleRun.main(SampleRun.java:36)
Enroll the first finger... 
```

这是示例 Java 文件

SampleRun.java

```
public class SampleRun {
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        JlibFprint jlibfprint = new JlibFprint();
        JlibFprint.fp_print_data pd1, pd2;
        int matchValue;
        try
        {
            System.out.println("Enroll the first finger...");
            pd1 = jlibfprint.enroll_finger();
            System.out.println("Compare the previous acquisition with the next one...");
            pd2 = jlibfprint.enroll_finger();
            matchValue = JlibFprint.img_compare_print_data(pd1, pd2);

            System.out.println(matchValue);
            if (matchValue > JlibFprint.BOZORTH_THRESHOLD)
            {
                System.out.println("[OK] The two fingerprints are compatible!");
            }
            else
            {
                System.out.println("[FAIL] The two fingerprints are not compatible!");
            }
        }
        catch (JlibFprint.EnrollException e)
        {
            System.err.format("Enroll Exception [%d]\n", e.enroll_exception);
            e.printStackTrace();
        }
    }
} 
```

我正在使用带有 Eclipse Juno 的 Ubuntu 11.10。

任何在这方面有一点知识的人都会有很大的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T14:40:38.550

我知道这有点晚了。但是，如果您将 eclipse 用于您的 java 项目，请转到`Run Configurations`然后转到`Arguments`选项卡。

在`VM arguments`添加以下行：

```
-Djava.library.path="${workspace_loc}/PROJECT_NAME/DIRECTORY_NAME_CONTAINIG_LIBRARY:${env_var:PATH}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:31:53.233

刚刚在[这里](http://blog.andrewbeacock.com/2007/10/how-to-add-shared-libraries-to-linuxs.html)找到了解决方案。我确信这对某些人来说是显而易见的，但 JNI 对我来说是全新的。解决方案是：

> “在 /etc/ld.so.conf.d/ 中创建一个名为 .conf 的新文件
> 
> 编辑文件并在共享库（*.so 文件）的每个目录中添加一行，它看起来像：
> 
> /usr/lib/APPLICATION/lib 重新加载系统范围的库路径列表：sudo ldconfig"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:41:40.253

我只想抛出一些与 JNI 相关的答案，请随意投反对票。

[Android Java JNI和C Char数组无法识别值](https://stackoverflow.com/questions/7137945/android-java-jni-and-c-char-array-cant-recognize-the-value/13722381#13722381)

通话需要看起来像

```
JNIEXPORT <return type> JNICALL Java_<your_package_name>_<classname>_<methodname>(JNIEnv *env, jobject obj, ...) 
```

所以让我们试试看一个例子

```
package com.rtrk.demo;
public class PELib 
{

     public native int play(String file, String file2, blahblah); 
 /* ... */ 
} 
```

这应该看起来像

```
JNIEXPORT jint JNICALL Java_com_rtrk_demo_PELib_play(JNIEnv *env, jobject obj, jstring main_video, jstring prev_video, jint main_x, jint main_y, jint main_width, jint main_height, jint prev_x, jint prev_y, jint prev_width, jint prev_height) 
```

这是 UnsatisfiedLinkErrors 的主要原因 :)

# ruby - Ruby 输出不一致

> ID：13714381
> 
> 赞同：0
> 
> 时间：2012-12-05T00:27:18.773
> 
> 标签：ruby

我的`Ruby`代码得到了一些奇怪的输出。这是代码：

```
 mDate = schedule['date']
            sTime = schedule['startTime']
            eTime = schedule['endTime']

            puts "Original Start Time: #{sTime}"
            puts "Original End Time: #{eTime}"
            puts "Original Date: #{mDate}"

            sDate = mDate
            eDate = mDate

            puts "sDate: #{sDate}"
            puts "eDate: #{eDate}"

            @startTime = sDate.concat("T" + sTime + "Z")
            @endTime = eDate.concat("T#{eTime}Z")
            @date = schedule['date']

            puts "Start Time: #{@startTime}"
            puts "End Time: #{@endTime}"
            puts "Date: #{@date}"

            puts "Original Start Time: #{sTime}"
            puts "Original End Time: #{eTime}"
            puts "Original Date: #{mDate}" 
```

这是输出：

```
Original Start Time: 15:00:00
Original End Time: 15:00:00
Original Date: 2012-12-05
sDate: 2012-12-05
eDate: 2012-12-05
Start Time: 2012-12-05T15:00:00ZT15:00:00Z
End Time: 2012-12-05T15:00:00ZT15:00:00Z
Date: 2012-12-05T15:00:00ZT15:00:00Z
Original Start Time: 15:00:00
Original End Time: 15:00:00
Original Date: 2012-12-05T15:00:00ZT15:00:00Z 
```

任何人都可以阐明为什么 1\. 值正在改变 2\. 为什么 concat 将值添加两次 3\. wtf 我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:30:48.970

```
sDate = mDate.clone
eDate = mDate.clone 
```

否则它们最终都会成为*同一个对象*。

另外，请解释一下这个问题，而不仅仅是转储代码和输出。在您的问题结束时，我将“我在这里做错了”读为“我在这里做错了”。

# c# - 检测 Excel 事件单元格格式更改

> ID：13714384
> 
> 赞同：1
> 
> 时间：2012-12-05T00:27:34.117
> 
> 标签：c#, excel-2010, excel-addins

我正在使用 Visual Studio 2010 在 C# 中创建一个 Excel 加载项，并尝试检测单元格的格式何时更改。我可以使用检测单元格内容何时更改

```
Excel.DocEvents_ChangeEventHandler(myListener); 
```

但是当我将单元格中的文本加粗或在单元格周围放置边框时，该事件似乎没有触发。

# java - 在 Java 中将对象添加到 BST

> ID：13714395
> 
> 赞同：1
> 
> 时间：2012-12-05T00:29:23.780
> 
> 标签：java, binary-search-tree

我需要一些有关二叉搜索树的帮助。我清楚地知道如何将整数添加到二叉搜索树，但是如何将整个对象添加到像那里的二叉搜索树？[http://postimage.org/image/6y0hor0gh/](http://postimage.org/image/6y0hor0gh/)

假设我想使用 AGE 一个键值，那么在创建节点时如何比较对象与对象呢？为了将整数添加到二叉搜索树，我使用了

```
//Tree.java

public class Tree 
{   
    // The root node of the tree
    // initialised here to null
    private TreeNode root; 

    private TreeNode insert(TreeNode tree, int d)
    {
        if(tree == null) return new TreeNode(d);
        else if   (d < tree.data) tree.left  = insert(tree.left, d);
           else if(d > tree.data) tree.right = insert(tree.right,d);
       // ignore duplicate items
       return tree;
    } // end private TreeNode insert(TreeNode tree, int d)

    public void insert(int d)
    {   root = insert(root,d);  }

---------------------------------------------
//TreeNode.java

class TreeNode 
{
    protected TreeNode left;   // left node
    protected int data;        // data item
    protected TreeNode right;  // right node

   // Constructor
   TreeNode(int d) 
    {
        data = d; left = right = null;
    }
} // end of class TreeNode 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:38:48.060

看看树图。您想要做的是使您的对象具有可比性并调用 compareTo 方法，或者为您的对象创建一个 Comparator 并使用它来对您的树进行排序。

所以而不是

```
else if   (d < tree.data) tree.left  = insert(tree.left, d);
       else if(d > tree.data) tree.right = insert(tree.right,d); 
```

你将会拥有

```
else if (d.compareTo(tree.data) < 0 ){
    tree.left  = insert(tree.left, d);
} else if (d.compareTo(tree.data) > 0){
    tree.right = insert(tree.right,d);
}
// what happens when they are the same ???? 
```

# java - 每次算法迭代更新对象的最佳模式

> ID：13714399
> 
> 赞同：1
> 
> 时间：2012-12-05T00:29:38.163
> 
> 标签：java, design-patterns

我有一个算法可以改变每一代对象的状态，这取决于对列表进行的一些半随机修改。我做了一个简化更清楚，所以假设我有两个类：

```
public class Archive{

...

}

public class Operation{

...

} 
```

在另一个类中`Algorithm`，方法迭代，对 a 进行一些调整`List<Operation>`（类似于遗传算法的交叉和突变）。该列表与其他相关对象一起用于更新`Archive`对象，对对象进行大量计算和修改`Archive`。

在我的代码的当前版本中，我有一个`ArchiveUpdate`具有内部`Archive`对象的类和一个接收更新中使用的所有对象以更改存档的方法。我认为这种方式有点模糊，我想不出另一种更好的方法，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:35:51.383

很难完全掌握......但据我了解，您需要一种模式，如果“受监控”状态发生变化，您可以收到通知。如果是这种情况，您应该查看[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，它提供了一种监视状态更改的简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:33:32.643

您是否考虑过制作`Archive`不可变的方法并提供`Archive`基于现有存档返回新实例的方法？也就是说，类似：

```
public class Archive {
  private final String field;
  public Archive(String field) { this.field = field; }

  public Archive changeField(String newField) { return new Archive(newField); }
} 
```

如果您的对象都是不可变的，那么推断它们的状态会容易得多，并且您不需要`ArchiveUpdate`类。但是，如果没有更多关于这些类是如何被使用的例子，我不能提出太多其他建议。

# ruby-on-rails - 如何使用 RoR 和 dojo 构建项目以构建 dojo AMD 模块

> ID：13714400
> 
> 赞同：0
> 
> 时间：2012-12-05T00:29:51.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dojo

我正在处理的一个问题是如何构建一个也用于创建 dojo AMD 模块的 RoR 项目。RoR 具有强大的文件结构“要求”，dojo 的所有教程/文档都有自己的“要求”，两者似乎并不吻合。

有没有人建立一个项目来完成这个，你是如何管理目录结构的。一个明确的关注点是在开发过程中，dojo 模块和小部件如何存在于资产管道中。我不想在一个项目中开发 dojo 模块，然后转移到另一个项目来使用这些模块。能够同时开发 RoR 项目和 dojo 效率更高。

我目前正在使用 dojo-rails gem，但我并没有以任何方式致力于它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:02:19.783

与 Dojo 一起工作是一种乐趣。在我的项目中，我在 vendor/assets/javascripts 中复制了 Dojo 的组件（我有文件夹 dojo、dojox 和 dijit）。在我的 appilcation.html.haml 中：

```
 = stylesheet_link_tag "application"
          = csrf_meta_tags
          / More ideas for your <head> here: h5bp.com/d/head-Tips
          /
            All JavaScript at the bottom, except this Modernizr build incl. Respond.js
            Respond is a polyfill for min/max-width media queries. Modernizr enables HTML5 elements & feature detects;
            for optimal performance, create your own custom Modernizr build: www.modernizr.com/download/
          = javascript_include_tag "modernizr"
          = javascript_include_tag "dojo/dojo", :'data-dojo-config' => %Q(baseUrl: '/assets/dojo/', modulePaths: {modules: '/assets/modules', widgets: '/assets/widgets', parseOnLoad: true})
%body 
```

它工作正常，非常棒。

编辑：研究如何将 Dojo 与资产管道一起使用对我来说很有趣。我发现了一篇[有趣的帖子](https://stackoverflow.com/questions/12391840/dojo-rails-3-2-8-coffeescript?rq=1)，关于将 Dojo 的来源包含在正确的位置 - app/assets/javascript 。

# ravendb - RavenDB 索引创建不正确

> ID：13714401
> 
> 赞同：2
> 
> 时间：2012-12-05T00:29:58.070
> 
> 标签：ravendb

我在 RavenDB 中有一个看起来像这样的文档：

```
{
    "ItemId": 1,
    "Title": "Villa
} 
```

使用以下元数据：

```
Raven-Clr-Type: MyNamespace.Item, MyNamespace
Raven-Entity-Name: Doelkaarten 
```

所以我用类型 MyNamespace.Item 进行序列化，但给它我自己的 Raven-Entity-Name，所以它有自己的集合。

在我的代码中，我定义了一个索引：

```
public class DoelkaartenIndex : AbstractIndexCreationTask<Item>
{
    public DoelkaartenIndex()
    {
        // MetadataFor(doc)["Raven-Entity-Name"].ToString() == "Doelkaarten"
        Map = items => from item in items
                       where MetadataFor(item)["Raven-Entity-Name"].ToString() == "Doelkaarten"
                       select new {Id = item.ItemId, Name = item.Title};
    }
} 
```

在索引中，它在“地图”字段中被翻译为：

```
docs.Items
.Where(item => item["@metadata"]["Raven-Entity-Name"].ToString() == "Doelkaarten")
.Select(item => new {Id = item.ItemId, Name = item.Title}) 
```

对索引的查询永远不会给出结果。

如果将 Maps 字段手动更改为下面的代码，则它可以工作...

```
from doc in docs
where doc["@metadata"]["Raven-Entity-Name"] == "Doelkaarten"
select new { Id = doc.ItemId, Name=doc.Title }; 
```

如何在代码中定义给出所需结果的索引？

使用的 RavenDB：RavenHQ，构建 #961

更新：

我正在做的事情如下：我想将 SharePoint 用作 CMS，并将 RavenDB 用作 SharePoint 列表数据的仅现成复制。我创建了一个从 SharePoint 列表同步到 RavenDB 的工具。我有一个从 SharePoint 列表项创建并序列化到 RavenDB 的通用类型 Item。所以我所有的文档都是 Item 类型的。但是它们来自具有不同属性的不同列表，所以我希望能够区分。您建议区分其他属性，这将非常有效。但随后我会在一个大的 Items 集合中看到所有列表中的所有列表项......你认为解决这个问题的最佳方法是什么？还是只是忍受它？我想使用索引来创建从项目中的所有数据到我需要的实际数据的投影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:58:29.457

您不能以这种方式轻松更改集合的名称。服务器端将使用 Raven-Entity-Name 元数据，但客户端将通过在文档存储中注册的约定来确定集合名称。默认约定是使用实体的类型名称。

您可以通过分配一个新函数来提供您自己的自定义约定`DocumentStore.Conventions.FindTypeTagName`- 但为每个实体执行此操作可能会很麻烦。您可以创建一个自定义属性以应用于您的实体，然后编写函数来查找和理解该属性。

真正最简单的方法就是调用您的实体`Doelkaarten`而不是`Item`.

关于为什么索引的变化有效 - 这不是因为 linq 语法的切换。这是因为你说`from doc in docs`而不是`from doc in docs.Items`。您可能已经完成`from doc in docs.Doelkaartens`而不是使用 where 子句。它们是等价的。有关更多示例，请参阅[文档中的此页面。](http://ravendb.net/docs/theory/ravendb-collections?version=1.0)

# sql - 计算与不同 ID SQL 连接的列中的结果

> ID：13714407
> 
> 赞同：1
> 
> 时间：2012-12-05T00:30:29.567
> 
> 标签：sql

我已经做了很多工作来得到我的结果，现在我被卡住了。我很难在网上找到这样的案例。

我有一张基本上像这样的桌子：

```
Name   |  Results
John   |  Win
John   |  Loss
John   |  Tie
Jim    |  Win
Jim    |  Win 
```

这个表是从不同的游戏中衍生出来的，所以每一行本质上代表了一个游戏的玩家结果，每场游戏应该有两行，因为每场游戏有 2 个玩家。

无论如何，我想得到一些这样的结果，并且我已经尝试了各种奇怪的计数，但我很难获得一个具有正确计数的独特名称。这是我想要的：

```
NAME   | games_won   |  games_lost   |  games_tied
John   |      1      |       1       |       1
Jim    |      2      |       0       |       0 
```

附带说明一下，这是我为获取第一个表而想出的令人难以置信的凌乱 SQL 语句，但我目前还拥有它，它还提供了这样的游戏 ID：

```
name  |  game_id  | result 
```

如果您想开怀大笑，请仅在此处阅读，我 99% 确信有一种更简单的方法可以做到这一点，但请记住，我在这里的问题不是关于如何改进我在下面写的内容，这只是关于如何处理结果：

```
SELECT name, game_id,
    case
        when p1_score>p2_score then 'win'
        when p1_score<p2_score then 'loss'
        else 'tie'
    end as result
from player 
Inner JOIN game on player.player_id = game.p1_id

union select * from (SELECT name, game_id,
    case
        when p1_score>p2_score then 'win'
        when p1_score<p2_score then 'loss'
        else 'tie'
    end as result
from player 
Inner JOIN game on player.player_id = game.p2_id) as ta 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:49:17.980

```
SELECT p.name,
    sum(case when p.player_id = g.p1_id and g.p1_score>g.p2_score
         or p.player_id = g.p2_id and g.p1_score<g.p2_score then 1 else 0 end) games_won,
    sum(case when p.player_id = g.p1_id and g.p1_score<g.p2_score
         or p.player_id = g.p2_id and g.p1_score>g.p2_score then 1 else 0 end) games_lost,
    sum(case when g.p1_score=g.p2_score then 1 else 0 end) games_tied
from player p
inner JOIN game g on p.player_id in (g.p1_id, g.p2_id)
group by p.name 
```

# jquery - 内联列表菜单无法正常工作

> ID：13714412
> 
> 赞同：0
> 
> 时间：2012-12-05T00:30:48.737
> 
> 标签：jquery, asp.net, html, css

我有这个 JQ 下拉菜单，我正试图让它正常运行。这可能是一个 html css 问题。我玩了几个小时试图让它正常工作，并得出结论我做得不对。我想学习正确的方法，而不是让它发挥作用。菜单滑动切换会导致间距变得混乱，并且标题会弹跳以为扩展菜单腾出空间。当我设置高度和空间以腾出空间时，没有滑动切换的标题将位于底部。

可见允许我为管理员显示/隐藏

到目前为止我有

```
<nav>
   <ul>
      <li style="display: inline;"><a href="Loggedin/Search.aspx" class="NavTitle ntAlter">Home</a>
      </li>
      <li style="display: inline;"><a href="Support.aspx" class="NavTitle ntAlter">Support</a>
      </li>
      <li runat="server" id="NavTitle1_wrap" visible="false" class="NavTitle" style="display: inline-block;">
         <span id="NavTitle1"> Items </span>
         <ul style="list-style-type: none;">
            <li><a style="display: none;" class="subMenu1">Add</a></li>
            <li><a style="display: none;" class="subMenu1">Approve</a></li>
            <li><a style="display: none;" class="subMenu1">Update</a></li>
            <li><a style="display: none;" class="subMenu1">Delete</a></li>
         </ul>
      </li>
      <li runat="server" id="NavTitle2_wrap" visible="false" class="NavTitle" style="display: inline-block;">
         <span id="NavTitle2"> Contacts</span>
         <ul style="list-style-type: none;">
            <li><a style="display: none;" class="subMenu2">Add</a></li>
            <li><a style="display: none;" class="subMenu2">Approve</a></li>
            <li><a style="display: none;" class="subMenu2">Update</a></li>
            <li><a style="display: none;" class="subMenu2">Delete</a></li>
         </ul>
      </li>
   </ul>
</nav> 
```

这个脚本

```
<script type="text/javascript">
    $('#NavTitle1').hover(function () {
        $('.subMenu1').stop(true, true).slideToggle('medium');
    });

    $('#NavTitle2').hover(function () {
        $('.subMenu2').stop(true, true).slideToggle('medium');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:01:04.030

我建议阅读有关导航的嵌套列表。关于这个主题有很多文章。我引用[了 A List Apart: Suckerfish Dropdowns](http://www.alistapart.com/articles/dropdowns)。

这是一个工作示例：http: [//jsfiddle.net/pHqKC/](http://jsfiddle.net/pHqKC/)

```
<nav>
   <ul>
      <li><a href="Loggedin/Search.aspx" class="NavTitle ntAlter">Home</a>
      </li>
      <li><a href="Support.aspx" class="NavTitle ntAlter">Support</a>
      </li>
      <li runat="server" id="NavTitle1_wrap" visible="false" class="NavTitle">
         <span id="NavTitle1" class="menu"> Items 
             <ul class="submenu" style="list-style-type: none;">
                <li><a>Add</a></li>
                <li><a>Approve</a></li>
                <li><a>Update</a></li>
                <li><a>Delete</a></li>
             </ul>
         </span>
      </li>
      <li runat="server" id="NavTitle2_wrap" visible="false" class="NavTitle" style="display: inline-block;">
         <span id="NavTitle2" class="menu"> Contacts
             <ul class="submenu" style="list-style-type: none;">
                <li><a>Add</a></li>
                <li><a>Approve</a></li>
                <li><a>Update</a></li>
                <li><a>Delete</a></li>
             </ul>
         </span>
      </li>
   </ul>
</nav>​ 
```

JavaScript：

```
$(document).ready(function() {
    $('.menu').hover(
        function() {
            $(this).find('.submenu').show();
        },
        function() {
            $(this).find('.submenu').hide();
        }
    );
});​ 
```

请参阅工作链接上的 CSS。我不确定这是否能解决您的问题，但我建议您从简单的开始逐步提高。在弄清楚基础知识之前，不要担心花哨的幻灯片。

# google-apps-script - 不替换 e.parameter

> ID：13714416
> 
> 赞同：0
> 
> 时间：2012-12-05T00:30:59.553
> 
> 标签：google-apps-script

我创建了这个脚本，以便能够在网格填充信息后发送电子邮件。在发送电子邮件之前，会出现另一个显示，警告用户只有在信息正确的情况下才能继续。最后，脚本会向我发送一封电子邮件，其中包含用户输入的信息。问题就在这里，当我收到电子邮件时，脚本应该替换的字段显示为未定义并且没有信息。关于这里有什么问题的任何想法？谢谢！

```
function runmyapp() {
 var doc = SpreadsheetApp.getActiveSpreadsheet();
var app = UiApp.createApplication().setTitle('Title 1');
  var grid = app.createGrid(4, 5);
  grid.setWidget(0, 0, app.createLabel('Time '));
  grid.setWidget(0, 1, app.createTextBox().setName('Time'));
  grid.setWidget(1, 0, app.createLabel('Minutes'));
  grid.setWidget(1, 1, app.createTextBox().setName('Minutes'));
  grid.setWidget(2, 0, app.createLabel('Enter Name'));
  grid.setWidget(2, 1, app.createTextBox().setName('Name'));
  grid.setWidget(3, 0, app.createLabel('Email'));
  grid.setWidget(3, 1, app.createTextBox().setName('email'));
  var panel = app.createVerticalPanel();
  panel.add(grid);

  var button = app.createButton('Submit').setId("button");
  var handler2 = app.createServerHandler('dis');
  handler2.addCallbackElement(grid);
  button.addClickHandler(handler2); 
  var handler = app.createServerHandler('disc');
  handler.addCallbackElement(grid);
  button.addClickHandler(handler);   

  // Add the button to the panel and the panel to the application, then display the                              application app
    panel.add(button);
    app.add(panel);
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.show(app);
  }

function dis(e){
 var app = UiApp.getActiveApplication();
   app.getElementById("button").setText("Request is in process, please     wait!").setEnabled(false);
   return app;
   }; 

function disc(e){
   var app = UiApp.getActiveApplication();
   var html1 = app.add(app.createHTML("<p><p>Hello Expert,</p>"+
"<p>By clicking OK you agree that your information is correct</p>");
    var button = app.createButton('Ok').setId("button");
    app.add(button);
    var handler2 = app.createServerHandler('gsnot');
    button.addClickHandler(handler2); 
    var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.show(app);
  return app;}

  function gsnot(e) {
    var advancedArgs = {bcc:e.parameter.email};
    var emailSubject = "Subject";
    var address ="albdominguez25@gmail.com";

    var emailTemplate     =SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A1").getValue(    ) ; 
    emailTemplate = emailTemplate.replace("TIME", e.parameter.Times).replace("MIN",     e.parameter.Minutes).replace("EXP", e.parameter.Name);   

    MailApp.sendEmail(address, emailSubject, emailTemplate, advancedArgs);

    Browser.msgBox("Your Email has been sent!");

    var app = UiApp.getActiveApplication();
    app.close();
    // The following line is REQUIRED for the widget to actually close.
    var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.show(app);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:45:19.797

要在您的设备上显示小部件值，`e.parameter`您需要将其（或父面板）添加为`callback element`处理程序上的 a。像这样：

```
function runmyapp() {
  //...
  var grid = app.createGrid(4, 5).setId('grid');
  //...
}

function disc(e){
  //...
  var grid = app.getElementById('grid');
  var handler2 = app.createServerHandler('gsnot').addCallbackElement(grid);
  //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:49:58.673

**请保留 Henrique 的最佳答案**。您可以尝试`disc(e)`像这样更改您的功能：

```
function disc(e){
   var app = UiApp.getActiveApplication();
   var html1 = app.add(app.createHTML("<p><p>Hello Expert,</p>"+
"<p>By clicking OK you agree that your information is correct</p>"));
    var grid = app.getElementById('grid')
    var button = app.createButton('Ok').setId("button");
    app.add(button);
    var handler3 = app.createServerHandler('gsnot');// use a different name to avoid confusion
    handler3.addCallbackElement(grid);
    button.addClickHandler(handler3); 
  return app;} 
```

而且，您的代码在这一行中还有一个错字：

```
emailTemplate = emailTemplate.replace("TIME", e.parameter.Times).replace("MIN",     e.parameter.Minutes).replace("EXP", e.parameter.Name); 
```

`Time`原名末尾没有's'！;)

最后一点，如果我不会打电话给你`show(app)`，`disc`那么 UI 会在确认时保持数据验证......（但这是一个选择问题 ;-)

# java - 直接从 Clojure Repl 浏览 java.* 文档

> ID：13714419
> 
> 赞同：4
> 
> 时间：2012-12-05T00:31:15.150
> 
> 标签：java, clojure

我知道 (doc ...)

我知道（用户/clojuredocs ...）

我是一个贪婪的混蛋，想知道我是否可以查看java。*.* .* 来自我的 repl 的文档 [而不是谷歌搜索“java7 java.awt.Rectangle”] 一直都是。

谢谢！nx,

## 编辑：

因为我不是 scrooge mcduck，而且是节日，所以我也愿意接受完全在 CLI 中运行而无需使用浏览器的答案（取消 w3m、lynx、链接的资格）——但是一个纯粹的 CLI 解决方案可以不使用 clojure repl 也是可以接受的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T00:42:53.723

您可以使用“clojure.java.javadoc”从您的 repl 开始浏览文档：

```
(use 'clojure.java.javadoc)
(javadoc java.awt.Rectangle) 
```

它使用 javadoc 打开“默认”浏览器（您可以将 w3m 或任何 cli 浏览器定义为默认浏览器）。

# java - Xperia 光传感器 [Xperia PRO]

> ID：13714424
> 
> 赞同：1
> 
> 时间：2012-12-05T00:31:36.553
> 
> 标签：java, android, sensors, light

```
public class MainActivity extends Activity implements SensorEventListener {
    final String tag = "myLogs";
    SensorManager sm = null;
    Sensor lightSensor;
    float lightQuantity;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        sm = (SensorManager) getSystemService(SENSOR_SERVICE);
        lightSensor = sm.getDefaultSensor(Sensor.TYPE_LIGHT);

        if(lightSensor == null)
            Log.d(tag, "no sensor:(");
        else
            Log.d(tag, "GOT IT!");

    }

    @Override
    protected void onResume() {
        super.onResume();
        sm.registerListener((SensorEventListener)this, lightSensor, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    protected void onStop() {
        sm.unregisterListener((SensorEventListener)this);
        super.onStop();
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        Log.d(tag,"onAccuracyChanged: " + sensor.getType() + ", accuracy: " + accuracy);

    }

    public void onSensorChanged(SensorEvent event) {
        lightQuantity = event.values[0];
        Log.d(tag,"onSensorChanged: " + event.sensor.getType() + ", result: " + lightQuantity);

    }
} 
```

我无法使用此代码获取光传感器统计信息。“无传感器：（”消息始终。getSensorList（）方法也不显示光传感器。我的设备：Xperia PRO（mk16i）。SE光传感器测试效果很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:06:47.787

问题是 Xperia 没有通过驱动程序以标准 Android 方式实现传感器。只有一个专有的实现可以通过读取内核变量来使用，如下所述。[（C）](http://forum.xda-developers.com/showpost.php?p=35046208&postcount=2)

# html - 创建带有居中徽标的 CSS 标题，以及从透明 PNG 的右侧/左侧延伸出来的线条

> ID：13714432
> 
> 赞同：2
> 
> 时间：2012-12-05T00:32:42.347
> 
> 标签：html, css, web

我一直在尝试创造这种外观：

![在此处输入图像描述](../Images/2547cd546df6df9cf953edfbf66da3e4.png)

我认为一个聪明的方法是创建一个无序列表，让左/右的条使用 100% 的宽度，而不是徽标所占用的宽度。

显然，我在这方面失败了。

有问题的网站是实时的，你可以在这里访问它（查看我到目前为止创建的代码）：[http ://amydemosphotography.smugmug.com/galleries](http://amydemosphotography.smugmug.com/galleries)

我无法使条形图和徽标占据相同的垂直空间，并且我无法解决如何使它们随着浏览器窗口增大/缩小同时允许徽标始终保持 1) 的问题保持居中，并且 2）总是在左/右有填充（所以线条永远不会接触/穿过它）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:54:52.510

这是我的做法：

```
<h1><img src="http://cdn.smugmug.com/photos/2254208423_RS5b5Z6-O.png" alt="Logo"></h1> 
```

--

```
body {
    padding-top: 3em;
}
h1 {
    color: #333;
    display: table;
}
h1:after,
h1:before {
    background-image: -webkit-linear-gradient(transparent 40%, #87a 40%, #87a 60%, transparent 60%);
    background-image:    -moz-linear-gradient(transparent 40%, #87a 40%, #87a 60%, transparent 60%);
    background-image:     -ms-linear-gradient(transparent 40%, #87a 40%, #87a 60%, transparent 60%);
    background-image:      -o-linear-gradient(transparent 40%, #87a 40%, #87a 60%, transparent 60%);
    background-image:         linear-gradient(transparent 40%, #87a 40%, #87a 60%, transparent 60%);
    content: '';
    display: table-cell;
    width: 50%;
/* Everything below allows us to have a little bit of space between the title and the decoration */
    -webkit-background-clip: padding;
       -moz-background-clip: padding;
            background-clip: padding;
}
h1:after {
    border-left: 1.5em solid transparent;
}
h1:before {
    border-right: 1.5em solid transparent;
}
​ 
```

这是一个活生生的例子：http: [//jsfiddle.net/joshnh/XjXYE/](http://jsfiddle.net/joshnh/XjXYE/)

# c++ - 使用模板、异或和指向内存的指针进行非常残酷的交换

> ID：13714433
> 
> 赞同：6
> 
> 时间：2012-12-05T00:32:47.250
> 
> 标签：c++, templates, memory, swap, xor

使用这种交换实现的最大威胁是什么？除了线程安全和糟糕的优化。什么时候失败（反例）？

```
template<typename T>
void swapViaMemory(T& left, T& right) {
    if(&left == &right) { return ; }

    unsigned int tSize = sizeof(T);
    unsigned char* lPtr = reinterpret_cast<unsigned char*>(&left);
    unsigned char* rPtr = reinterpret_cast<unsigned char*>(&right);

    for(unsigned int i = 0; i < tSize; ++i) {
        *(lPtr + i) ^= *(rPtr + i);
        *(rPtr + i) ^= *(lPtr + i);
        *(lPtr + i) ^= *(rPtr + i);
    }
} 
```

抱歉语法错误和拼写错误（=

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:37:40.883

如果 T 不是可简单复制的类型，它会调用未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T00:35:04.300

它无法传达意图。

这是代码的主要目的。

```
template<typename T>
   typename std::enable_if<std::is_pod<T>, void>::type 
   swapViaMemory(T& left, T& right) 
{
    using std::swap;

    swap(left, right);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T00:40:37.213

如果`T`包含一个成员，该成员是指向其另一个成员的指针或引用，这将失败（假设意图是指针/引用成员始终指向/引用属于该实例的数据成员）。

```
struct foo
{
  foo() : i(), ref_i(i), ptr_i(&i) {}
  int i;
  int& ref_i;
  int *ptr_i;
}; 
```

如果两个`foo`对象，比如说`f1`&`f2`在交换后使用`swapViaMemory`, 交换，`f1.ref_i`并且`f1.ptr_i`将引用 / 指向，`f2.i`反之亦然。此外，在引用成员的情况下，这会调用未定义的行为，因为重新定位引用是非法的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T00:39:08.927

说：

```
struct B{ 
   virtual ~B() {}
};
struct X : B
{
   int x;
   ~X() { std::cout << x; }
};
struct Y : B
{

};

//...
X x = X(); 
Y y;
swapViaMemory<B>(x,y); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T00:35:44.987

如果 left 和 right 的演员表指向同一个地址，除了被严重混淆之外，它还会失败。

由于`a^a = 0`（这是您用于此“技巧”的内容）

如果`left == right`（并假设它是一个 1 字节的实体，包含`'a'` Then 您将执行以下操作：

```
a^a = 0
0^a = a
a^a = 0 
```

# linux - libfaac 施加比特率限制？

> ID：13714435
> 
> 赞同：4
> 
> 时间：2012-12-05T00:32:49.537
> 
> 标签：linux, encoding, aac, bitrate, libfaac

我正在尝试在 Ubuntu 12.04 Linux 上编码一些音频。我需要使用 libfaac（使用 1.28 版）进行编码，并且我想以非常低的比特率进行编码 - 包括传输流开销在内的总开销必须低于 64kbps。输入音频为：PCM，48kHz，2 声道，s16，1536 kb/s

使用 faac 命令行工具，我得到下面的输出，对 5 分钟的音频进行了编码——因此有足够的时间让比特率达到平均水平。我不能让它低于 64kbps，或者高于 165kbps。我尝试设置其他一些参数，但无济于事。当我设置比特率 > 64 时，它工作正常。查看 libfaac 代码，我看不到任何地方施加了这些限制。

```
$ ./faac -b 40 -w -o /tmp/yellow-audio-40k.mp4 /tmp/yellow-audio.wav
Freeware Advanced Audio Coder
FAAC 1.28

Average bitrate: 64 kbps
Quantization quality: 100
Bandwidth: 5442 Hz
Object type: Low Complexity(MPEG-4) + M/S
Container format: MPEG-4 File Format (MP4)
Encoding /tmp/yellow-audio.wav to /tmp/yellow-audio-40k.mp4
frame | bitrate | elapsed/estim | play/CPU | ETA
14063/14063 (100%)| 64.2 | 10.7/10.7 | 27.91x | 0.0 
```

```
$ mediainfo /tmp/yellow-audio-40k.mp4
General
Complete name : /tmp/yellow-audio-40k.mp4
Format : MPEG-4
Format profile : Base Media / Version 2
Codec ID : mp42
File size : 2.35 MiB
Duration : 5mn 0s
Overall bit rate mode : Variable
Overall bit rate : 65.7 Kbps
Encoded date : UTC 2012-12-05 00:03:38
Tagged date : UTC 2012-12-05 00:03:49
Writing application : FAAC 1.28

Audio
ID : 1
Format : AAC
Format/Info : Advanced Audio Codec
Format profile : LC
Codec ID : 40
Duration : 5mn 0s
Bit rate mode : Variable
Bit rate : 64.2 Kbps
Maximum bit rate : 73.7 Kbps
Channel(s) : 2 channels
Channel positions : Front: L R
Sampling rate : 48.0 KHz
Compression mode : Lossy
Stream size : 2.30 MiB (98%)
Language : English
Encoded date : UTC 2012-12-05 00:03:38
Tagged date : UTC 2012-12-05 00:03:49 
```

# compilation - C++ 中的 Hello World 说“没什么可做的”

> ID：13714436
> 
> 赞同：3
> 
> 时间：2012-12-04T23:19:24.683
> 
> 标签：compilation, c++

我没有 C++ 经验并想学习。我有 XCode，但 IDE 让我感到困惑，而且对于我目前的水平来说似乎太先进了。

我从这个[http://www.cplusplus.com/doc/tutorial/program_structure/开始](http://www.cplusplus.com/doc/tutorial/program_structure/)

```
// my first program in C++

#include <iostream>
using namespace std;

int main ()
{
  cout << "Hello World!";
  return 0;
} 
```

我使用 C++ 格式将它输入到 SublimeText2 中，然后将文件保存在

```
Ryan>Desktop>ApplicationDevelopment>Sandbox as helloworld.cpp 
```

我安装了 XCode，发现[如何在 Unix 控制台/Mac 终端中运行 C/C++？](https://stackoverflow.com/questions/221185/how-to-run-c-c-in-a-unix-console-mac-terminal)

我去了终端，导航到它所在的目录并尝试：

```
make helloworld.cpp 
```

它返回：

```
make: Nothing to be done for 'helloworld.cpp' 
```

更新，希望下面的格式是清楚的

> $g++
> 
> i686-apple-darwin10-g++-4.2.1：没有输入文件
> 
> $ g++ helloworld.cpp -o 输出名.bin
> 
> $（没有返回）
> 
> $ g++ helloworld.cpp helloApp ./helloApp
> 
> i686-apple-darwin10-g++-4.2.1：helloApp：没有这样的文件或目录
> 
> i686-apple-darwin10-g++-4.2.1: ./helloApp: 没有这样的文件或目录
> 
> $ g++ helloworld.cpp -o helloApp ./helloApp
> 
> ld：在 ./helloApp 中，无法与主可执行文件链接
> 
> collect2: ld 返回 1 个退出状态

# php - 如何从 POST 中获取价值

> ID：13714443
> 
> 赞同：0
> 
> 时间：2012-12-05T00:33:30.023
> 
> 标签：php

在过去的四个小时里，这段代码一直让我感到困惑。它正在按主 ID 删除一行照片。

我有`var_dump($selectedPhoto)`，它是正确的 ID，一个数字。每次按删除照片时，我的代码都会运行，到达该`mysqli_stmt_store_result`部分并射出`$txtMessage`，**但数据库不会更新。**

这真的很奇怪，因为我使用了完全相同的代码，在另一个页面上有不同的变量，它工作得很好。

看看这个，你能看出任何错误吗？或者有更好的方法来编写删除语句。

```
if (isset($_POST['btnDeletePhoto']))
{
    $selectedPhoto = $_SESSION['selectedPhoto'];
    $deleteString = "DELETE FROM Photos WHERE PhotoID = ?";
    $preparedDeleteStmt = mysqli_prepare($link, $deleteString);
    mysqli_stmt_bind_param($preparedDeleteStmt, 'i', $selectedPhoto);
    if (!mysqli_stmt_execute($preparedDeleteStmt))
    {
        mysqli_close($link);
        die("The system is not available, try again later");
    }
    if(mysqli_stmt_store_result($preparedDeleteStmt))
    {
        $txtMessage = "Delete successfull";
    } 
```

添加：`$selectedPhoto`是一个选择的值，下拉列表值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:40:42.220

如果照片来自选择的值，它不会存储在会话变量中，因此您可能需要更改：

```
$selectedPhoto = $_SESSION['selectedPhoto']; 
```

到：

```
$selectedPhoto = $_POST['selectedPhoto']; 
```

除此之外，您需要为所有数据库操作添加错误处理。

# node.js - Node.js、angular.js 和 MongoDB 入门、建模关系和其他提升技巧

> ID：13714445
> 
> 赞同：11
> 
> 时间：2012-12-05T00:33:33.367
> 
> 标签：node.js, mongodb, express, angularjs

我来自 Java 和关系世界，并试图让我的脚湿透。我正在开发的应用程序是一个约会调度系统，在后端使用 node.js 和 MOngo，客户端在 angular.js 中。

我试图理解几个可能是我的 Java 偏见残余的关键概念。任何有关指向相关片段的帮助，教程表示赞赏。

1) 我将如何管理 Mongo/Node 中的预约、客户和服务代表之间的关系？是否创建了约会对象并在约会中存储了用户 ID 的引用？用户是否需要参考约会列表？

2) 用户 authn/authz，由于节点被用作 RESTful 服务提供者，我如何创建基于角色的控制？例如，当用户注册为服务代表时，他应该被批准。有没有可以提供帮助的模块？

3) 任何提供用户注册等报告的通用模块？

4) 人们如何管理客户端 MVC 的权限？

非常感谢任何指针。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T01:27:28.970

在同时拥有服务器端组件和客户端组件的情况下开发应用程序会使事情变得比只有服务器端框架更复杂一些。

*   当使用像 AngularJS 这样的客户端框架时，所有模板都是在客户端编译的，而不是在服务器端编译的。这与传统的服务器端渲染有很大的不同。这意味着，您将发送 JSON，而不是将呈现的 HTML 发送到客户端。您的服务器本质上将成为一个带有安全位置的 RESTful API。

*   我对 AngularJS 不是很熟悉，对 Ember 更熟悉，但你基本上会创建一个安静的服务：[https](https://gist.github.com/2432692) ://gist.github.com/2432692 。这将在 RESTful 接口上与服务器通信。

*   在服务器上，使用 nodejs，您将使用像 Mongoose 或类似的 ORM。您可以创建关系、文档等。请注意，您必须在服务器和客户端上复制模型。

*   MongoDB 使用 bson，一种序列化 JSON 字符串/对象的二进制编码。因为 nodejs 是使用 V8 JavaScript 引擎构建的，所以 JSON 是一种自然的对象类型，因此使用 MongoDB 非常简单。

*   NodeJS 上的 HTTP 服务器：NodeJS 为 http 服务器提供了基础实现。数量不多，但您可以响应和处理请求。没有会话、cookie、auth 支持，因此您可以使用`connect`构建在传统 http 服务器之上的版本，也可以使用构建在节点提供`connect`的普通服务器和普通服务器之上的 ExpressJS。`http`ExpressJS 非常容易上手，并且可以很好地与 RESTful 后端配合使用。

这很简单。如果你使用 AMD、CommonJS、Browserify 等，获取 ExpressJS，创建一个新应用程序，设置所有客户端的东西（angularJS）和模块系统......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T01:10:58.090

我不熟悉 node.js，但是对于 mongodb 设计，您必须在“子文档”与“链接文档”之间进行选择。

**1**

你可以看看[如何在猫鼬中构建多对多关系？](https://stackoverflow.com/questions/13592801/how-to-structure-many-to-many-relationships-in-mongoose/13595155#13595155).

想法是在有意义的地方检索完整的文档。例如，您可能有以下架构。

```
{ customer : { name: xxx },
  appointments: [ {date: xx, type : xxx .., servicerep: xxx}, {date: xx, type : xxx .., servicerep: xxx} ]
} 
```

即使信息可能重复，对于查询，您只需点击一个文档/子文档。

**4**

即使它可能是客户端，也不意味着服务器不应该验证。客户端可以尽可能地验证，但服务器仍然应该验证。抱歉，我没有什么要补充的了。

# java - Java indexOf 返回 -1

> ID：13714446
> 
> 赞同：1
> 
> 时间：2012-12-05T00:33:37.143
> 
> 标签：java

所以我正在从文件中读取一行，如下所示：

```
Snowman:286:355:10 
```

这是我编写的用于分离数据并将其放入数组的代码的第一部分。

```
 for (int i = 0 ; i<manyItems; i++)
                {
                    a = 0;

                    temp = scan.nextLine();
                    System.out.println(temp);

                    b = temp.indexOf(':');
                    System.out.println(b);

                    items[i] = temp.substring(a,b);
                    System.out.println(items[i]);
                    System.out.println(temp);

                    a = b;

                    System.out.println(temp);

                    b = temp.indexOf(a+1,':');
                    System.out.println(b);

                    rawX[i] = temp.substring(a+1,b);
                    System.out.println(rawX[i]);

                } 
```

它将“雪人”分开并将其放入数组中，但是，当我尝试找到第二个冒号时，indexOf() 一直返回-1。有谁知道为什么它没有找到第二个冒号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T00:38:20.240

您可以保存所有代码并使用[String#split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)拆分行：

```
String[] parts = temp.split(":"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T00:38:36.303

我认为你的论点倒退了：

```
b = temp.indexOf(a+1,':'); 
```

应该...

```
b = temp.indexOf(':', a+1); 
```

来自[docs.oracle.com](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28int,%20int%29)：

> ```
> public int indexOf(int ch,
>                int fromIndex) 
> ```

第一个参数是`ch`aracter，第二个参数是`fromIndex`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T00:38:59.530

因为您交换了 indexOf 调用的参数。它期望字符，然后索引开始查看。请记住，字符是整数，您正在寻找从“：”的 int 值开始的 char 7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T01:09:32.357

类下有一个方法`String`可以为你处理这项工作。`Split(regEx pattern)`是您可能想要使用的。以下代码将完成您尝试执行的工作：

```
 String input = "Snowman:286:355:10";

    String tokens [] = input.split(":");

    for (int i = 0; i < tokens.length; i++)
        System.out.println(tokens[i]); 
```

# java - java多维数组表示法

> ID：13714448
> 
> 赞同：0
> 
> 时间：2012-12-05T00:33:54.730
> 
> 标签：java, arrays, syntax

要创建一个长度为 5 的 int 数组，我们使用以下语法：

```
 int[] x = new int[5] 
```

要创建一个二维数组，一个 int 数组的数组，我们说：

```
 int[][] x = new int[5][]; 
```

这将创建一个长度为 5 的数组，该数组可以保存 int[] 对象。

对于第二种情况，为什么语法不是 this: ？

```
int[][] x = new int[][5] 
```

毕竟，5 定义了我们可以拥有多少个 int 数组。不是我们要放入 x 的 int 数组的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:38:21.670

声明的数组带来是第一个维度，因此声明引用的数组大小对分配实际数组没有任何作用。这将类似于编码：

```
int[] a = new int[]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:54:33.977

*查找索引与**构造*索引不同会很奇怪。因此，如果您有`int[][] x= new int[][5]`，那么您将使用 查找元素`x[0..4][foo]`，这比替代方案更令人困惑。

# mysql - 即使使用 COLLATE utf8_general_ci，mysql 也不区分大小写的问题

> ID：13714451
> 
> 赞同：1
> 
> 时间：2012-12-05T00:34:26.250
> 
> 标签：mysql, case, collation

假设我有一个字段 col2 并且值为 caSEINseNSTiVe。在下面运行此查询不会给我 col2=CD。我试过 LIKE 和 LIKE BINARY。

```
SELECT col1,
CASE 
  WHEN col2 = 'CASEINSENSITIVE' THEN 'CD'
  ELSE col2
END 
FROM Table COLLATE utf8_general_ci 
```

该表具有 utf8_bin 的排序规则设置。我无法更改设置。创建报告时我需要切换到 utf8_general_ci，同时保持 utf8_bin 为默认值。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T11:38:00.510

像这样使用 UPPER 或 LOWER 函数：

```
SELECT col1,
CASE 
  WHEN UPPER(col2) = 'CASEINSENSITIVE' THEN 'CD'
  WHEN UPPER(col2) = 'ANYUPPERTEXT' THEN 'UP'
  WHEN LOWER(col2) = 'somelowertext' THEN 'LW'
  WHEN UPPER(col2) = UPPER('anytext that will also be UPPERed') THEN '??'
  ELSE col2
END 
FROM Table 
```

# android-wifi - setWifiEnabled() 抛出 java.lang.SecurityException 以获得 WRITE_SETTINGS 权限

> ID：13714452
> 
> 赞同：1
> 
> 时间：2012-12-05T00:34:27.670
> 
> 标签：android-wifi

为什么 setWifiEnabled() 会为 WRITE_SETTINGS 权限抛出 setWifiEnabled（下面的堆栈跟踪）？

```
java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=25173, uid=10148 requires android.permission.WRITE_SETTINGS
at android.os.Parcel.readException(Parcel.java:1332)
at android.os.Parcel.readException(Parcel.java:1286)
at android.net.wifi.IWifiManager$Stub$Proxy.setWifiEnabled(IWifiManager.java:1156)
at android.net.wifi.WifiManager.setWifiEnabled(WifiManager.java:971) 
```

Android 文档中未提及此权限。是否应将 WRITE_SETTINGS 权限添加到清单中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:41:16.027

是的，setWifiEnabled() 会将数据写入 Android 设置数据库，因此它需要 WRTITE_SETTINGS 权限。

# python - 以像素为单位指定和保存精确大小的图形

> ID：13714454
> 
> 赞同：203
> 
> 时间：2012-12-05T00:34:49.690
> 
> 标签：python, matplotlib, scipy

假设我有一个大小为 3841 x 7195 像素的图像。我想将图形的内容保存到磁盘，从而生成我指定的**精确大小的图像（以像素为单位）。**

没有轴，没有标题。只是图像。我个人并不关心 DPI，因为我只想以**像素**为单位指定图像在屏幕中的大小。

我已经阅读了[其他](https://stackoverflow.com/search?q=figure%20size%20matplotlib) [线程](https://stackoverflow.com/questions/8775622/exact-figure-size-in-matplotlib-with-title-axis-labels)，它们似乎都转换为英寸，然后以英寸为单位指定图形的尺寸并以某种方式调整 dpi。我想避免处理像素到英寸转换可能导致的精度损失。

我尝试过：

```
w = 7195
h = 3841
fig = plt.figure(frameon=False)
fig.set_size_inches(w,h)
ax = plt.Axes(fig, [0., 0., 1., 1.])
ax.set_axis_off()
fig.add_axes(ax)
ax.imshow(im_np, aspect='normal')
fig.savefig(some_path, dpi=1) 
```

没有运气（Python抱怨宽度和高度都必须低于32768（？））

从我所看到的一切来看，`matplotlib`需要在`inches`和中指定图形大小`dpi`，但我只对图形在磁盘中**的像素感兴趣。**我怎样才能做到这一点？

澄清一下：我正在寻找一种方法来做到这一点`matplotlib`，而不是使用其他图像保存库。

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-12-05T01:04:51.907

Matplotlib 不直接使用像素，而是使用物理尺寸和 DPI。如果要显示具有一定像素大小的图形，则需要知道显示器的 DPI。例如，[此链接](http://www.infobyip.com/detectmonitordpi.php)将为您检测到。

如果您有一个 3841x7195 像素的图像，那么您的显示器不太可能会那么大，因此您将无法显示该尺寸的图形（如果您要求尺寸，matplotlib 要求该图形适合屏幕太大会缩小到屏幕尺寸）。假设您想要一个 800x800 像素的图像，仅作为示例。以下是如何在我的显示器 ( `my_dpi=96`) 中显示 800x800 像素的图像：

```
plt.figure(figsize=(800/my_dpi, 800/my_dpi), dpi=my_dpi) 
```

因此，您基本上只需将尺寸（以英寸为单位）除以 DPI。

如果要保存特定大小的图形，那就另当别论了。屏幕 DPI 不再那么重要（除非您要求的图形不适合屏幕）。使用 800x800 像素图形的相同示例，我们可以使用`dpi`关键字 of将其保存为不同的分辨率`savefig`。要将其保存为与屏幕相同的分辨率，只需使用相同的 dpi：

```
plt.savefig('my_fig.png', dpi=my_dpi) 
```

要将其保存为 8000x8000 像素的图像，请使用 10 倍大的 dpi：

```
plt.savefig('my_fig.png', dpi=my_dpi * 10) 
```

请注意，并非所有后端都支持 DPI 的设置。这里使用 PNG 后端，但 pdf 和 ps 后端会以不同的方式实现大小。此外，更改 DPI 和大小也会影响字体大小等内容。较大的 DPI 将保持相同的字体和元素的相对大小，但如果您想为较大的图形使用较小的字体，则需要增加物理大小而不是 DPI。

回到您的示例，如果您想保存 3841 x 7195 像素的图像，您可以执行以下操作：

```
plt.figure(figsize=(3.841, 7.195), dpi=100)
( your code ...)
plt.savefig('myfig.png', dpi=1000) 
```

请注意，我使用了 100 的数字 dpi 以适应大多数屏幕，但保存`dpi=1000`为达到所需的分辨率。在我的系统中，这会生成一个 3840x7190 像素的 png - 保存的 DPI 似乎总是比所选值小 0.02 像素/英寸，这将对大图像尺寸产生（小）影响。[这里](https://stackoverflow.com/questions/8775622/exact-figure-size-in-matplotlib-with-title-axis-labels)有更多的讨论。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-05T01:26:23.507

这对我有用，根据您的代码，生成一个 93Mb 的 png 图像，带有颜色噪声和所需的尺寸：

```
import matplotlib.pyplot as plt
import numpy

w = 7195
h = 3841

im_np = numpy.random.rand(h, w)

fig = plt.figure(frameon=False)
fig.set_size_inches(w,h)
ax = plt.Axes(fig, [0., 0., 1., 1.])
ax.set_axis_off()
fig.add_axes(ax)
ax.imshow(im_np, aspect='normal')
fig.savefig('figure.png', dpi=1) 
```

我在 Linux Mint 13 中使用 Python 2.7 库的最新 PIP 版本。

希望有帮助！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-07-25T18:03:08.440

OP 希望保留 1:1 像素数据。作为一名处理科学图像的天文学家，我不能允许对图像数据进行任何插值，因为它会引入未知和不可预测的噪声或错误。例如，这是通过 pyplot.savefig() 保存的 480x480 图像的片段： [matplotlib 重新采样为大约 2x2 的像素的详细信息，但请注意 1x2 像素的列](https://i.stack.imgur.com/ZB4yP.png)

您可以看到大多数像素只是简单地翻了一番（因此 1x1 像素变为 2x2），但某些列和行变为每像素 1x2 或 2x1，这意味着原始科学数据已被更改。

正如 Alka 所暗示的， plt.imsave() 将实现 OP 的要求。假设您将图像数据存储在图像数组 im 中，那么可以执行类似的操作

```
plt.imsave(fname='my_image.png', arr=im, cmap='gray_r', format='png') 
```

在此示例中，文件名具有“png”扩展名（但据我所知，您仍然必须使用 format='png' 指定格式），图像数组是 arr，我们选择了倒置灰度“gray_r”作为颜色图。我通常添加 vmin 和 vmax 来指定动态范围，但这些是可选的。

最终结果是一个与 im 数组具有完全相同像素尺寸的 png 文件。

注意：OP 没有指定轴等，这正是该解决方案所做的。如果想添加轴、刻度等。我首选的方法是在单独的图上执行此操作，使用 transparent=True （PNG 或 PDF）保存，然后将后者覆盖在图像上。这可以保证您保持原始像素完好无损。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-07-20T08:58:28.323

根据 tiago 接受的响应，这是一个小型通用函数，可将 numpy 数组导出到与数组具有相同分辨率的图像：

```
import matplotlib.pyplot as plt
import numpy as np

def export_figure_matplotlib(arr, f_name, dpi=200, resize_fact=1, plt_show=False):
    """
    Export array as figure in original resolution
    :param arr: array of image to save in original resolution
    :param f_name: name of file where to save figure
    :param resize_fact: resize facter wrt shape of arr, in (0, np.infty)
    :param dpi: dpi of your screen
    :param plt_show: show plot or not
    """
    fig = plt.figure(frameon=False)
    fig.set_size_inches(arr.shape[1]/dpi, arr.shape[0]/dpi)
    ax = plt.Axes(fig, [0., 0., 1., 1.])
    ax.set_axis_off()
    fig.add_axes(ax)
    ax.imshow(arr)
    plt.savefig(f_name, dpi=(dpi * resize_fact))
    if plt_show:
        plt.show()
    else:
        plt.close() 
```

之前tiago的回复说，需要先找到屏幕DPI，例如：[http ://dpi.lv](http://dpi.lv)

例如，我`resize_fact`在函数中添加了一个附加参数，您可以将图像导出为原始分辨率的 50% (0.5)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-11-01T12:52:27.290

**不同方法的比较**

这是我尝试过的一些方法的快速比较，图片显示了所提供的内容。

**未尝试设置图像尺寸的基线示例**

只是有一个比较点：

基础.py

```
#!/usr/bin/env python3

import sys

import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

fig, ax = plt.subplots()
print('fig.dpi = {}'.format(fig.dpi))
print('fig.get_size_inches() = ' + str(fig.get_size_inches())
t = np.arange(-10., 10., 1.)
plt.plot(t, t, '.')
plt.plot(t, t**2, '.')
ax.text(0., 60., 'Hello', fontdict=dict(size=25))
plt.savefig('base.png', format='png') 
```

跑：

```
./base.py
identify base.png 
```

输出：

```
fig.dpi = 100.0
fig.get_size_inches() = [6.4 4.8]
base.png PNG 640x480 640x480+0+0 8-bit sRGB 13064B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/4e879aa3073163eb953895fc98ea6022.png)](https://i.stack.imgur.com/jtD8D.png)

**到目前为止我最好的方法：`plt.savefig(dpi=h/fig.get_size_inches()[1]`仅高度控制**

我认为这是我大部分时间都会采用的方法，因为它简单且可扩展：

get_size.py

```
#!/usr/bin/env python3

import sys

import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

height = int(sys.argv[1])
fig, ax = plt.subplots()
t = np.arange(-10., 10., 1.)
plt.plot(t, t, '.')
plt.plot(t, t**2, '.')
ax.text(0., 60., 'Hello', fontdict=dict(size=25))
plt.savefig(
    'get_size.png',
    format='png',
    dpi=height/fig.get_size_inches()[1]
) 
```

跑：

```
./get_size.py 431 
```

输出：

```
get_size.png PNG 574x431 574x431+0+0 8-bit sRGB 10058B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/ce77cbddddd9209a7c07256cb15f84e4.png)](https://i.stack.imgur.com/KdCdo.png)

和

```
./get_size.py 1293 
```

输出：

```
main.png PNG 1724x1293 1724x1293+0+0 8-bit sRGB 46709B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/adece0fc3d742bcc23f28cadd5868917.png)](https://i.stack.imgur.com/sitTs.png)

我倾向于只设置高度，因为我通常最关心图像将在我的文本中间占据多少垂直空间。

**`plt.savefig(bbox_inches='tight'`更改图像大小**

总觉得图片周围留白太多，倾向于补充`bbox_inches='tight'`： [Removing white space around a saved image in matplotlib](https://stackoverflow.com/questions/11837979/removing-white-space-around-a-saved-image-in-matplotlib)

但是，这可以通过裁剪图像来实现，并且您不会获得所需的尺寸。

相反，在同一个问题中提出的另一种方法似乎效果很好：

```
plt.tight_layout(pad=1)
plt.savefig(... 
```

这给出了高度等于 431 的确切期望高度：

[![在此处输入图像描述](../Images/690bc0164977cd0dc3c8e0233c3fb94b.png)](https://i.stack.imgur.com/tX75f.png)

**固定高度、`set_aspect`自动调整宽度和小边距**

Ermmm，`set_aspect`又把事情搞砸了，防止`plt.tight_layout`实际删除边距......

提问：[如何在 Matplotlib 中获得固定的像素高度、固定的数据 x/y 纵横比并自动移除移除水平空白边距？](https://stackoverflow.com/questions/64642855/how-to-obtain-a-fixed-height-in-pixels-fixed-data-x-y-aspect-ratio-and-automati)

**`plt.savefig(dpi=h/fig.get_size_inches()[1]`+ 宽度控制**

如果您真的需要除高度之外的特定宽度，这似乎可以正常工作：

宽度.py

```
#!/usr/bin/env python3

import sys

import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

h = int(sys.argv[1])
w = int(sys.argv[2])
fig, ax = plt.subplots()
wi, hi = fig.get_size_inches()
fig.set_size_inches(hi*(w/h), hi)
t = np.arange(-10., 10., 1.)
plt.plot(t, t, '.')
plt.plot(t, t**2, '.')
ax.text(0., 60., 'Hello', fontdict=dict(size=25))
plt.savefig(
    'width.png',
    format='png',
    dpi=h/hi
) 
```

跑：

```
./width.py 431 869 
```

输出：

```
width.png PNG 869x431 869x431+0+0 8-bit sRGB 10965B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/c5078511777c4938db0f250c5e48064c.png)](https://i.stack.imgur.com/udybG.png)

对于小宽度：

```
./width.py 431 869 
```

输出：

```
width.png PNG 211x431 211x431+0+0 8-bit sRGB 6949B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/8efa10fced1db1ebc5852042bb50a5fe.png)](https://i.stack.imgur.com/Xbq1g.png)

所以看起来字体的缩放是正确的，我们只是在非常小的宽度上遇到了一些麻烦，标签被切断了，例如`100`左上角的。

我设法解决了那些[在 matplotlib 中删除已保存图像周围的空白](https://stackoverflow.com/questions/11837979/removing-white-space-around-a-saved-image-in-matplotlib/57498238#57498238)

```
plt.tight_layout(pad=1) 
```

这使：

```
width.png PNG 211x431 211x431+0+0 8-bit sRGB 7134B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/611d24185ed92000e5a01c842990c4b3.png)](https://i.stack.imgur.com/D3Adb.png)

从这里，我们也看到它`tight_layout`去除了图像顶部的很多空白空间，所以我通常总是使用它。

**固定魔法基础高度、`dpi`开启`fig.set_size_inches`和`plt.savefig(dpi=`缩放**

我相信这相当于提到的方法：[https ://stackoverflow.com/a/13714720/895245](https://stackoverflow.com/a/13714720/895245)

魔法.py

```
#!/usr/bin/env python3

import sys

import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

magic_height = 300
w = int(sys.argv[1])
h = int(sys.argv[2])
dpi = 80
fig, ax = plt.subplots(dpi=dpi)
fig.set_size_inches(magic_height*w/(h*dpi), magic_height/dpi)
t = np.arange(-10., 10., 1.)
plt.plot(t, t, '.')
plt.plot(t, t**2, '.')
ax.text(0., 60., 'Hello', fontdict=dict(size=25))
plt.savefig(
    'magic.png',
    format='png',
    dpi=h/magic_height*dpi,
) 
```

跑：

```
./magic.py 431 231 
```

输出：

```
magic.png PNG 431x231 431x231+0+0 8-bit sRGB 7923B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/a9ae3a632916c2776751bd1008b6e861.png)](https://i.stack.imgur.com/cnTUV.png)

并查看它是否可以很好地扩展：

```
./magic.py 1291 693 
```

输出：

```
magic.png PNG 1291x693 1291x693+0+0 8-bit sRGB 25013B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/cf802e7aafaddcd1241aab5e5ba621e1.png)](https://i.stack.imgur.com/I5xN6.png)

所以我们看到这种方法也很有效。我遇到的唯一问题是您必须设置该`magic_height`参数或等效参数。

**固定 DPI +`set_size_inches`**

这种方法给出了一个稍微错误的像素大小，并且很难无缝地缩放所有内容。

set_size_inches.py

```
#!/usr/bin/env python3

import sys

import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

w = int(sys.argv[1])
h = int(sys.argv[2])
fig, ax = plt.subplots()
fig.set_size_inches(w/fig.dpi, h/fig.dpi)
t = np.arange(-10., 10., 1.)
plt.plot(t, t, '.')
plt.plot(t, t**2, '.')
ax.text(
    0,
    60.,
    'Hello',
    # Keep font size fixed independently of DPI.
    # https://stackoverflow.com/questions/39395616/matplotlib-change-figsize-but-keep-fontsize-constant
    fontdict=dict(size=10*h/fig.dpi),
)
plt.savefig(
    'set_size_inches.png',
    format='png',
) 
```

跑：

```
./set_size_inches.py 431 231 
```

输出：

```
set_size_inches.png PNG 430x231 430x231+0+0 8-bit sRGB 8078B 0.000u 0:00.000 
```

所以高度略微偏离，图像：

[![在此处输入图像描述](../Images/2a17b13a73cbcc3eb2435b37f73a0217.png)](https://i.stack.imgur.com/2rC6e.png)

如果我把它放大 3 倍，像素大小也是正确的：

```
./set_size_inches.py 1291 693 
```

输出：

```
set_size_inches.png PNG 1291x693 1291x693+0+0 8-bit sRGB 19798B 0.000u 0:00.000 
```

[![在此处输入图像描述](../Images/7df35ff98d0fba2975d800925e1350e8.png)](https://i.stack.imgur.com/dWsRG.png)

然而，我们从中了解到，要使这种方法很好地扩展，您需要使每个 DPI 相关设置与以英寸为单位的大小成比例。

在前面的示例中，我们只使“Hello”文本成比例，它的高度确实保持在我们预期的 60 到 80 之间。但是我们没有这样做的所有东西看起来都很小，包括：

*   轴的线宽
*   刻度标签
*   点标记

**SVG**

我找不到如何为 SVG 图像设置它，我的方法只适用于 PNG，例如：

get_size_svg.py

```
#!/usr/bin/env python3

import sys

import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

height = int(sys.argv[1])
fig, ax = plt.subplots()
t = np.arange(-10., 10., 1.)
plt.plot(t, t, '.')
plt.plot(t, t**2, '.')
ax.text(0., 60., 'Hello', fontdict=dict(size=25))
plt.savefig(
    'get_size_svg.svg',
    format='svg',
    dpi=height/fig.get_size_inches()[1]
) 
```

跑：

```
./get_size_svg.py 431 
```

生成的输出包含：

```
<svg height="345.6pt" version="1.1" viewBox="0 0 460.8 345.6" width="460.8pt" 
```

并识别 说：

```
get_size_svg.svg SVG 614x461 614x461+0+0 8-bit sRGB 17094B 0.000u 0:00.000 
```

如果我在 Chromium 86 中打开它，浏览器调试工具鼠标图像悬停确认高度为 460.79。

但当然，由于 SVG 是一种矢量格式，理论上一切都应该按比例缩放，因此您可以转换为任何固定大小的格式而不会损失分辨率，例如：

```
inkscape -h 431 get_size_svg.svg -b FFF -e get_size_svg.png 
```

给出准确的高度：

TODO 重新生成图像，不知何故搞砸了上传。

我在这里使用 Inkscape 而不是 Imagemagick `convert`，因为您还需要`-density`使用 ImageMagick 来获得清晰的 SVG 大小调整：

*   [https://superuser.com/questions/598849/imagemagick-convert-how-to-produce-sharp-resized-png-files-from-svg-files/1602059#1602059](https://superuser.com/questions/598849/imagemagick-convert-how-to-produce-sharp-resized-png-files-from-svg-files/1602059#1602059)
*   [如何使用 ImageMagick 将 SVG 转换为 PNG？](https://stackoverflow.com/questions/9853325/how-to-convert-a-svg-to-a-png-with-imagemagick)

`<img height=""`HTML 上的设置也应该适用于浏览器。

在 matplotlib==3.2.2 上测试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-09-16T12:33:32.100

我有同样的问题。我使用 PIL Image 加载图像并转换为 numpy 数组，然后使用 matplotlib 修补一个矩形。这是一个 jpg 图像，所以我无法从 PIL img.info['dpi'] 获取 dpi，因此接受的解决方案对我不起作用。但是经过一些修补后，我想出了将图形保存为与原始大小相同的方法。

我在这里添加以下解决方案，认为它将帮助与我有相同问题的人。

```
import matplotlib.pyplot as plt
from PIL import Image
import numpy as np

img = Image.open('my_image.jpg') #loading the image
image = np.array(img) #converting it to ndarray
dpi = plt.rcParams['figure.dpi'] #get the default dpi value
fig_size = (img.size[0]/dpi, img.size[1]/dpi) #saving the figure size
fig, ax = plt.subplots(1, figsize=fig_size) #applying figure size
#do whatver you want to do with the figure
fig.tight_layout() #just to be sure
fig.savefig('my_updated_image.jpg') #saving the image 
```

这以与原始图像相同的分辨率保存了图像。

如果您不使用 jupyter 笔记本。您可以通过以下方式获取 dpi。

```
figure = plt.figure()
dpi = figure.dpi 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-27T19:16:08.103

此解决方案适用于 matplotlib 版本 3.0.1、3.0.3 和 3.2.1。

```
def save_inp_as_output(_img, c_name, dpi=100):
    h, w, _ = _img.shape
    fig, axes = plt.subplots(figsize=(h/dpi, w/dpi))
    fig.subplots_adjust(top=1.0, bottom=0, right=1.0, left=0, hspace=0, wspace=0) 
    axes.imshow(_img)
    axes.axis('off')
    plt.savefig(c_name, dpi=dpi, format='jpeg') 
```

因为 subplots_adjust 设置使轴填充图形，所以您不想指定 bbox_inches='tight'，因为在这种情况下它实际上会创建空白填充。当您也有超过 1 个子图时，此解决方案也有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-28T15:17:31.533

为什么每个人都继续使用 matplotlib？
如果你的图像是一个形状为 (3841, 7195, 3) 的 numpy 数组，它的数据类型是 numpy.uint8 并且 rgb 值范围从 0 到 255，你可以简单地将这个数组保存为图像而不使用 matplotlib：

```
from PIL import Image
im = Image.fromarray(A)
im.save("your_file.jpeg") 
```

我从另一篇文章中找到了这段[代码](https://stackoverflow.com/questions/902761/saving-a-numpy-array-as-an-image)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-04-30T21:35:30.203

plt.imsave 为我工作。您可以在此处找到文档：[https ://matplotlib.org/3.2.1/api/_as_gen/matplotlib.pyplot.imsave.html](https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.pyplot.imsave.html)

```
#file_path = directory address where the image will be stored along with file name and extension
#array = variable where the image is stored. I think for the original post this variable is im_np
plt.imsave(file_path, array) 
```

# c# - PowerPoint 打印页数

> ID：13714458
> 
> 赞同：2
> 
> 时间：2012-12-05T00:35:40.237
> 
> 标签：c#, printing, count, powerpoint

我正在尝试获取使用 PowerPoint Interop 打印整个文档时预期打印的页数（范围不适用）。

**更具体地说，我正在寻求获得打印预览指示的页数**（*因为这考虑了所有格式选项*）。

例如：我有一个 48 张幻灯片文档，但打印时会生成 56 张图像。

我目前正在调用不带参数的 Printout() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:57:51.143

据我所知，没有办法直接获得您寻求的那个号码。打印由驱动程序处理，因此 vba 可能不知道它。

一个麻烦的解决方案可能是临时生成一个 xps 文件并计算其页数。虽然不完全优雅。另一种方法是根据每张幻灯片确定每张幻灯片的页数 - 在每张幻灯片上放置一个指示器作为幻灯片的属性 - 然后在第二步中通过在幻灯片上递增来计算它们。你可能会觉得这很有趣： http: [//officeone.mvps.org/vba/ppt_tags.html](http://officeone.mvps.org/vba/ppt_tags.html)

# c# - 从 SQL Server 读取 - 需要从 CSV 读取

> ID：13714463
> 
> 赞同：2
> 
> 时间：2012-12-05T00:36:34.817
> 
> 标签：c#, sql, datatable

目前，我从 SQL serve r(2008) 数据库中获取数据。目前的方法是使用一个DataTable，然后将其传递并使用。

```
 if (parameters != null)
    {
        SqlDataAdapter _dataAdapter = new SqlDataAdapter(SqlQuery, CreateFORSConnection());
        foreach (var param in parameters)
        {
            _dataAdapter.SelectCommand.Parameters.AddWithValue(param.Name, param.Value);
        }
        DataTable ExtractedData = new DataTable(TableName);
        _dataAdapter.Fill(ExtractedData);
        return ExtractedData;
    }
    return null; 
```

但是现在，用户说我们也可以从txt文件中获取数据，这些txt文件的结构与SQL Server中的表相同。所以，如果我有一个名为“客户”的表，那么我有一个包含客户的 csv 文件。具有相同的列结构。CSV 中的第一行是列名，与我的表匹配。

是否可以将 txt 文件读入数据表，然后以某种方式在该数据表上运行 SELECT？*我的大部分*查询都是单表查询：

```
SELECT * FROM Table WHERE Code = 111 
```

但是，有一种情况是我进行了联接。这可能有点棘手，但我可以制定一个计划。如果我可以先将 txt 文件放入数据表中，我可以使用它。

使用上面的代码，我可以不将连接字符串更改为从 CSV 而不是 SQL Server 读取吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:49:26.947

首先，您需要将 CSV 数据读入 DataTable。那里有许多 CSV 解析器，但由于您更喜欢使用 ADO.NET，因此您可以使用 OleDB 客户端。请参阅以下文章。

[http://www.switchonthecode.com/tutorials/csharp-tutorial-using-the-built-in-oledb-csv-parser](http://www.switchonthecode.com/tutorials/csharp-tutorial-using-the-built-in-oledb-csv-parser)

加入有点困难，因为两组数据都位于不同的地方。但是您可以做的是获取两个 DataTables（每个来源一个），然后使用 Linq 加入它们。

[C#中DataTables的内连接](https://stackoverflow.com/questions/665754/inner-join-of-datatables-in-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:47:21.357

您可以将文本文件读入一个`List<string>`（如果每个文件只有 1 列），然后使用 LINQ 查询列表。例如：

```
var result = from entry in myList
    where entry == "111"
    select entry; 
```

当然，这个例子有点没用，因为你得到的只是你正在搜索的同一个字符串。但是如果文件中有多个列，并且它们与您的列匹配`DataTable`，为什么不将文件读入数据表，然后使用 LINQ 查询表呢？

这是一个关于如何使用 LINQ 查询 DataTable 的简单教程：http: [//blogs.msdn.com/b/adonet/archive/2007/01/26/querying-datasets-introduction-to-linq-to-dataset .aspx](http://blogs.msdn.com/b/adonet/archive/2007/01/26/querying-datasets-introduction-to-linq-to-dataset.aspx)

# php - 为什么我的 pdo like search 找不到第二个？

> ID：13714469
> 
> 赞同：0
> 
> 时间：2012-12-05T00:37:08.557
> 
> 标签：php, pdo

我正在根据名称的文本输入搜索用户名，如下所示：

```
 // find users
    $users = explode(',', $_POST['to']);

    $user_id_list = array();

    print_r($users);

    foreach ($users as $user)
    {
        $db->sqlquery("SELECT `user_id` FROM `users` WHERE `username` LIKE ?", array("%$user%"));
        $user_id = $db->fetch();
        $user_id_list[] = $user_id['user_id'];
    }

    print_r($user_id_list); 
```

但它似乎只找到第一个而不是第二个？难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:01:00.883

[`PDOStatement::fetch`](http://php.net/manual/en/pdostatement.fetch.php)只返回结果数据的下一行。您可以遍历`$db->fetchAll()`或使用`while (($row = $db->fetch()) !== false)`来访问所有返回的行。

# c# - 如何在自定义配置部分的根目录中拥有 2 种不同类型的集合？

> ID：13714472
> 
> 赞同：1
> 
> 时间：2012-12-05T00:37:26.297
> 
> 标签：c#, .net, configuration, web-config, app-config

我创建了我的第一个自定义配置部分，一切顺利。然后我去延长它，它横着走。我遇到并且找不到很多示例的问题是，在我的部分中，我想要有 2 种不同类型的集合。两个集合中的元素完全不同，但每个集合中的元素相同。当我收到错误时，我无法让配置部分返回正确的集合。我可以作弊并创建 2 个部分，但这似乎不是实现这一点的正确方法。

好的一些代码

```
<configSections>
  <section name="MyFileSection" type="My.ConfigManager.MyFileListConfiguration, MyConfigManager" />
</configSections>
<MyFileSection>
  <MyDirectoryRootCollection>
    <add rootName="MyDataLocation"   rootLocation="\\MyServer\MyDirectory"/>
    <add rootName="YourDataLocation" rootLocation="\\YourServer\YourDirectory"/>
  </MyDirectoryRootCollection>
  <MyFileListCollection>
    <add keyName="MyFile1"   copyType="File" sourceFileName="TestFile1" />
    <add keyName="MyFile2"   copyType="FTP"  sourceFileName="TestFile2" />
    <add keyName="MyFile3"   copyType="File" sourceFileName="TestFile3" />
  </MyFileListCollection>
</MyFileSection> 
```

所以在 MyFileSection 中，我有 2 个集合... MyDirectoryRootCollection 和 MyFileListCollection。我认为一个 Config 类会让我像这样得到其中的 2 个。

```
namespace My.ConfigManager
{
    public class MyFileListConfiguration : ConfigurationSection
    {
        private static string sMyFileListCollectionConst      = "MyFileListCollection";
        private static string sMyDirectoryRootCollectionConst = "MyDirectoryRootCollection";

        [ConfigurationProperty("MyFileListCollection", IsDefaultCollection = false)]
        [ConfigurationCollection(typeof(MyFileListConfigEleCollection), AddItemName = "MyFileListCollection")]
        public MyFileListConfigEleCollection MyFileListCollection
        {
            get { return ((MyFileListConfigEleCollection)(base["MyFileListCollection"])); }
        }

        [ConfigurationProperty("MyDirectoryRootCollection", IsDefaultCollection = false)]
        [ConfigurationCollection(typeof(MyDirectoryRootConfigEleCollection), AddItemName = "MyFileListCollection")]
        public MyFileListConfiguration MyDirectoryRoot
        {
            get { return ((MyFileListConfiguration)(base["MyDirectoryRootCollection"])); }
        }

    } 
```

我尝试通过此调用获取配置部分

```
MyFileListConfiguration fileListSection = (MyFileListConfiguration)ConfigurationManager.GetSection("MyFileSection"); 
```

但我得到这个错误 -

> System.Configuration.ConfigurationErrorsException 未处理
> Message="配置属性 'MyDirectoryRootCollection' 可能不是从 ConfigurationSection 派生的。"

有没有人知道我做错了什么，是否有可能在一个部分中有 2 个完全不同的集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:35:07.820

这应该适合你。

**用法：**

```
MyFileListConfiguration myConfig = (MyFileListConfiguration)ConfigurationManager.GetSection("MyFileSection");

myConfig.Files[0] or myConfig.Files["MyFile1"] => .KeyName / .CopyType / .SourceFileName
        //  myConfig.Directories[0] or myConfig.Directories["MyDataLocation"] => .RootName / .RootLocation

public class MyFileListConfiguration : ConfigurationSection
{
    [ConfigurationProperty("MyFileListCollection", IsDefaultCollection = false)]
    public MyFileListCollection Files
    {
        get { return ((MyFileListCollection)(base["MyFileListCollection"])); }
    }

    [ConfigurationProperty("MyDirectoryRootCollection", IsDefaultCollection = false)]
    public MyDirCollection Directories
    {
        get { return ((MyDirCollection)(base["MyDirectoryRootCollection"])); }
    }
}

[ConfigurationCollection(typeof(MyFileElement))]
public class MyFileListCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new MyFileElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((MyFileElement)(element)).KeyName;
    }

    /// <summary>
    /// Access the collection by index
    /// </summary>
    /// <param name="index"></param>
    /// <returns></returns>
    public MyFileElement this[int index]
    {
        get { return (MyFileElement)BaseGet(index); }
    }

    /// <summary>
    /// Access the collection by key name
    /// </summary>
    /// <param name="key"></param>
    /// <returns></returns>
    public new MyFileElement this[string key]
    {
        get { return (MyFileElement)BaseGet(key); }
    }
}

[ConfigurationCollection(typeof(MyDirElement))]
public class MyDirCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new MyDirElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((MyDirElement)(element)).RootName;
    }

    /// <summary>
    /// Access the collection by index
    /// </summary>
    /// <param name="index"></param>
    /// <returns></returns>
    public MyDirElement this[int index]
    {
        get { return (MyDirElement)BaseGet(index); }
    }

    /// <summary>
    /// Access the collection by key name
    /// </summary>
    /// <param name="key"></param>
    /// <returns></returns>
    public new MyDirElement this[string key]
    {
        get { return (MyDirElement)BaseGet(key); }
    }
}

public class MyFileElement : ConfigurationElement
{
    [ConfigurationProperty("keyName", DefaultValue = "", IsKey = true, IsRequired = true)]
    public string KeyName
    {
        get { return ((string)(base["keyName"])); }
        set { base["keyName"] = value; }
    }

    [ConfigurationProperty("copyType", DefaultValue = "")]
    public string CopyType
    {
        get { return ((string)(base["copyType"])); }
        set { base["copyType"] = value; }
    }

    [ConfigurationProperty("sourceFileName", DefaultValue = "")]
    public string SourceFileName
    {
        get { return ((string)(base["sourceFileName"])); }
        set { base["sourceFileName"] = value; }
    }
}

public class MyDirElement : ConfigurationElement
{
    [ConfigurationProperty("rootName", DefaultValue = "", IsKey = true, IsRequired = true)]
    public string RootName
    {
        get { return ((string)(base["rootName"])); }
        set { base["rootName"] = value; }
    }

    [ConfigurationProperty("rootLocation", DefaultValue = "")]
    public string RootLocation
    {
        get { return ((string)(base["rootLocation"])); }
        set { base["rootLocation"] = value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:31:36.040

MyDirectoryRoot 属性的类型应该是 MyDirectoryRootConfigEleCollection 而不是 MyFileListConfiguration。请注意，添加元素名称应为“添加”以匹配您的示例[http://msdn.microsoft.com/en-us/library/system.configuration.configurationcollectionattribute.configurationcollectionattribute.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationcollectionattribute.configurationcollectionattribute.aspx)

# c - 在 C 中使用 Xlib/X11 事件处理滞后

> ID：13714475
> 
> 赞同：2
> 
> 时间：2012-12-05T00:37:51.717
> 
> 标签：c, events, x11, xlib

C的初学者在这里。

我正在尝试使用 X11/Xlib 在 C 中构建一个库，这样我就可以将它仅用于小项目，并且在尝试处理事件以从用户那里获取输入（按钮按下和按键）时遇到了问题。它可以正常工作一段时间，然后随着时间的推移开始显着滞后。

现在我所拥有的是我的程序检查是否有事件等待，如果有，则检索它。

我认为我现在的问题是事件被存储在内存中并且它使程序陷入困境。但这只是一个总的猜测。

任何帮助将不胜感激。谢谢你。

编辑：忘记代码（我知道我忘记了一些东西）

有问题的两个功能是：

```
int event_waiting()
{
    XEvent event;

    if(XCheckMaskEvent(dspy,-1,&event)) {
        if(event.type==KeyPress) {
            XPutBackEvent(dspy,&event);
            return 1;
        } else if (event.type==ButtonPress) {
            XPutBackEvent(dspy,&event);
            return 1;
        }
    } /* <<=== added missing close-curly here */
    return 0;
}

char wait()
{
    XEvent event;
    XNextEvent(dspy,&event);
    if(event.type==KeyPress) {
        saved_x = event.xkey.x;
        saved_y = event.xkey.y;
        return XLookupKeysym(&event.xkey,0);
    } else if(event.type==ButtonPress) {
        saved_x = event.xkey.x;
        saved_y = event.xkey.y;
        return event.xbutton.button;
    }
} 
```

然后他们像这样被主要调用，

```
if (event_waiting()){
  char c = wait();
  //Switch case goes here
} 
```

编辑 2：更新的代码

```
XEvent event;
if(XCheckMaskEvent(display,-1,&event)) 
{
    if(event.type==KeyPress) {
        XPutBackEvent(display,&event);
        return 1;
    } else if (event.type==ButtonPress) {
        XPutBackEvent(display,&event);
        return 1;
    }
}
XFlush(display);
return 0; 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:11:11.600

延迟会随着时间的推移而变得更糟，这意味着您的事件队列中有许多未触及的事件，这会减慢`XCheckMaskEvent()`.

尝试使用 指定事件，如果没有您感兴趣`XSelectInput(... ButtonPressMask | KeyPressMask)`的事件，请尝试使用刷新事件队列：`XFlush()`

```
 if(event.type==KeyPress) {
        XPutBackEvent(dspy,&event);
        return 1;
    } else if (event.type==ButtonPress) {
        XPutBackEvent(dspy,&event);
        return 1;
    } else {
        XFlush(dspy); // this
    } 
```

# xcode - 如何使 Xcode 以二进制形式编译包含的本地 JSON 文件？

> ID：13714476
> 
> 赞同：0
> 
> 时间：2012-12-05T00:38:05.753
> 
> 标签：xcode, json, binary, nsjsonserialization

我有一些与应用程序捆绑在一起的本地 JSON 文件。当 Xcode 构建产品并查看有效负载目录时，我可以看到纯文本的 JSON。

有没有办法让 Xcode 以二进制形式编译文件，然后仍然能够用 NSJSONSerialization 解析它？

我像这样加载 JSON 文件：

```
NSData *data = [[NSData alloc] initWithContentsOfFile:path]; 
```

然后将数据转换为 JSON 对象：

```
id json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

那么 Xcode 可以在将 JSON 文本文件添加到应用程序包之前将其转换为二进制形式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:48:11.817

我认为你真正需要的是加密你的数据。具体来说，您需要加密您的 json 文件，保存并将其添加到您的 xcode 项目中，然后在您的应用程序中打开、解密和使用它。在这里：[iPhone 上 NSString 的 AES 加密，](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)您可以找到有关如何执行此操作的讨论。

# android - SQLite 数据库不删除记录

> ID：13714477
> 
> 赞同：0
> 
> 时间：2012-12-05T00:38:08.923
> 
> 标签：android, android-listview, android-sqlite, android-listfragment, delete-row

在我的 ListFragment 中，我使用 swipe-to-dismiss 模式来删除列表视图中的对象。但是，当我滑动删除它们时，它们又回来了。我确保将其从数据库中删除。我究竟做错了什么？我能做些什么来改变呢？

这是我的列表片段

```
/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 * {@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

SQLiteDatabase db;
DbHelper dbHelper;

private static String courseName;
ArrayList<String> courseItems;
ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dbHelper = new DbHelper(getActivity());
    db = dbHelper.getWritableDatabase();
    courseItems = new ArrayList<String>();
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new ArrayAdapter<String>(getActivity(), layout, courseItems);
    // TODO: replace with a real list adapter.
    setListAdapter(adapter);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
    // The problem starts here
    SwipeDismissListViewTouchListener touchListener = new SwipeDismissListViewTouchListener(
            getListView(),
            new SwipeDismissListViewTouchListener.OnDismissCallback() {
                public void onDismiss(ListView listView,
                        int[] reverseSortedPositions) {
                    for (int position : reverseSortedPositions) {
                        removeCourse(position);
                        adapter.notifyDataSetChanged();
                    }
                }
            });
    getListView().setOnTouchListener(touchListener);
    getListView().setOnScrollListener(touchListener.makeScrollListener());
    adapter.notifyDataSetChanged();
}

@Override
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
}

public void addCourse() {
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToLast();
    courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
    courseItems.add(courseName);
    c.close();
    adapter.notifyDataSetChanged();
}

public void removeCourse(int position) {
    String[] projection = { DbHelper.C_ID, DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToPosition(position);
    db.delete(DbHelper.TABLE_NAME, DbHelper.C_ID + "=" + position,
            null);
    c.close();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

谢谢你！任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:00:16.390

你期待发生什么？您的 listview 由 arraylist 支持，并且您的 remove 方法不会对其进行任何更改。您也已从数组列表中删除该项目

# android - Android 地图 API 需要 openGL es 2

> ID：13714484
> 
> 赞同：36
> 
> 时间：2012-12-05T00:38:47.257
> 
> 标签：android, google-maps-android-api-2

**Maps v2 文档指出：**

> 由于 Google Maps Android API 版本 2 需要 OpenGL ES 版本 2，因此您必须在 AndroidManifest.xml中添加一个`<uses-feature>`元素作为该元素的子 元素：`manifest`
> 
> ```
> <uses-feature   
>    android:glEsVersion="0x00020000"  
>    android:required="true"/>` 
> ```
> 
> 这会将要求通知外部服务。特别是，它会阻止 Google Play 商店在不支持 OpenGL ES 版本 2 的设备上显示您的应用程序。

事实上，`exception`如果这不在清单中，它会抛出一个。我不想在商店中过滤我的应用程序，我计划继续将旧地图用于旧设备，并且仅在存在所需功能时才显示新地图，在运行时而不是在安装之前检测到。

那么我该怎么做呢？它必须是类似 multiple`APKs`的东西`manifests`吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-05T17:42:31.723

**最终更新**

截至 2013 年 12 月 20 日，[Android 仪表板](http://developer.android.com/about/dashboards/index.html)显示大约 100% 的设备现在支持 OpenGL 2.0+，因此这个答案不再相关。您可能只需要在清单中使用 OpenGL ES 2.0+。

**更新**

从 Google Play 服务 SDK 插件的第 7 版开始，此问题已得到修复。在运行时使用`<uses-feature android:glEsVersion="0x00020000" android:required="false"/>`和[检测 OpenGL ES 2.0](https://stackoverflow.com/a/15215529/115145)是安全的。

**原始答案**

Google Maps Android API v2 似乎需要明确`<uses-feature android:glEsVersion="0x00020000" android:required="true/>`声明，`AndroidManifest.xml`因此无法在不排除所有 OpenGL ES 1.x 设备的情况下部署 Google Maps Android API v2 服务。在撰写本文时，[Google 的 Android Dashboard](http://developer.android.com/about/dashboards/index.html#OpenGL)显示，在 1.1 和 2.0 设备中，90.8% 的设备支持 2.0。

在特定设备（摩托罗拉 XOOM）上，此代码导致`supportsEs2 = true`：

```
// Check if the system supports OpenGL ES 2.0.
final ActivityManager activityManager = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
final ConfigurationInfo configurationInfo = activityManager.getDeviceConfigurationInfo();
final boolean supportsEs2 = configurationInfo.reqGlEsVersion >= 0x20000; 
```

但是，当清单中没有`<uses-feature>`声明时，MapFragment 会抛出 RuntimeException：

```
 Caused by: java.lang.RuntimeException: Google Maps Android API only supports OpenGL ES 2.0 andabove. Please add <uses-feature android:glEsVersion="0x00020000" android:required="true" /> into AndroidManifest.xml
    at maps.y.ae.a(Unknown Source)
    at maps.y.bu.a(Unknown Source)
    at maps.y.p.onCreateView(Unknown Source)
    at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
    at android.os.Binder.transact(Binder.java:297)
    at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment$a.onCreateView(Unknown Source)
    at com.google.android.gms.internal.c$4.a(Unknown Source)
    at com.google.android.gms.internal.c.a(Unknown Source)
    at com.google.android.gms.internal.c.onCreateView(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source)
    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:884)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
    ... 22 more 
```

希望地图库的更新能够消除此限制，以便我们可以部署单个 APK 并使用运行时 API 来确定是加载新的 Google Maps v2 体验还是回退到另一个兼容的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:27:13.700

[如问题 #4699](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4699#c4)中所述，此问题已修复，并将与 Maps Android API 的下一版本一起发布

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T11:31:18.687

我遇到了同样的问题，环顾四周，模拟器的大多数建议解决方法都对我不起作用。然后我发现一个帖子建议使用[Genymotion](http://www.genymotion.com/)模拟器。此模拟器支持 OpenGL ES 版本 2。它也比标准模拟器快得多。

# c - 包含结构数组的编译错误；令牌

> ID：13714485
> 
> 赞同：0
> 
> 时间：2012-12-05T00:38:52.717
> 
> 标签：c, struct

我想创建一个结构数组：

```
typedef struct
{
   int id;
   int department;
}employee;

int main(int argc, char *argv[])
{
 int i;
 employee job[3];   ////////////////error
 for (i=0;i<3;i++)
 {
    //do something
 }  
return 0;
} 
```

问题是当我想编译时出现以下错误：

';' 之前的语法错误 标记并指向我标记的行

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:47:55.370

根据以下记录，该代码独立存在，很好：

```
pax> cat qq.c
typedef struct {
   int id;
   int department;
} employee;

int main (int argc, char *argv[]) {
    int i;
    employee job[3];   ////////////////error
    for (i=0;i<3;i++) {
        //do something
    }  
   return 0;
}
pax> gcc -o qq qq.c
pax> 
```

. 您可能需要检查的一些事项是：

*   有什么`#define`类似`employee`or的东西`job`吗？
*   你确定`employee`这两个地方的拼写一样吗？
*   你确定你拥有所有你声称拥有的分号吗？
*   您的代码中是否有任何“有趣”的字符（那些看起来不可见但仍将您的输入流填充到编译器的字符）？

A good first start would be to comment out the errant line and see if you get the error on the following line. That should narrow it down to either that line (no error) or a previous line (still have error).

You can see the entire file in hex mode (looking for funny characters) if you do something like:

```
od -xcb myfile.c 
```

(under Linux - Windows I'm not sure though, if you have `gvim`, you can convert it to hex with a menu item).

# bison - Bison报错解读

> ID：13714488
> 
> 赞同：3
> 
> 时间：2012-12-05T00:39:17.970
> 
> 标签：bison

我收到运行时消息：语法错误，意外变量，期待 ':' 或 '\n' 我想这是由于我的野牛源错误，但这是怎么回事？在我的 lex 源中，我有

```
'mod'       return MOD;
[-+()=/*\n:]    { return *yytext; } 
```

但是虽然 a=55/4 运行良好，但 a=55mod4 退出并显示之前编写的错误报告。感谢转发任何约会。这是我的完整野牛文件：

```
%{
    #include <stdio.h>
    void yyerror(char *);
    int yylex(void);
    #include "y.tab.h"
    #include "bas.h"

    #define YYDEBUG 1
    #define YYERROR_VERBOSE 1
    #define YYTOKEN_TABLE 1
%}
%debug
%error-verbose
%token INTEGER VARIABLE PRINT
%left '+' '-'
%left '*' '/'
%left MOD
%%
program:
    program statement ':'       {
                        if (stackptr>0)
                            {
                            printf("stack underflow !\n");
                            }
                        else if (stackptr<0)
                            {
                            printf("stack overflow !\n");
                            }
                        }
    |
        program statement '\n'      {
                        if (stackptr>0)
                            {
                            printf("stack underflow !\n");
                            }
                        else if (stackptr<0)
                            {
                            printf("stack overflow !\n");
                            }
                        else    {
            /* send basictoken[] array to micro*/
                            printf("OK.\n");
                            debugprint();
                            }
                        resetbuffer();
                    stackptr=0;                     
                        }
        | /* NULL */
        ;
statement:
        expression
        | VARIABLE '=' expression       {
                        put_token(avr_tovar);
                        put_token($1);
                        stackptr--;
                        }
        | PRINT expression      {
                        put_token(avr_tos);
                        stackptr--;
                        }
        ;
expression:
    INTEGER             {
                    put_token(avr_const);
                    put_token(yylval);
                    stackptr++;
                        }
        | VARIABLE              {
                        put_token(avr_fromvar);
                        put_token(yyval);
                        stackptr++;
                            }
        | expression '+' expression     {
                        put_token(avr_add);                     
                        stackptr--;
                            }
        | expression '-' expression     {
                        put_token(avr_sub);                     
                        stackptr--;
                        }
        | expression '*' expression     {
                        put_token(avr_mul);                     
                        stackptr--;
                        }
        | expression '/' expression     {
                        put_token(avr_div);                     
                        stackptr--;
                        }
        | expression MOD expression     {
                        put_token(avr_mod);                     
                        stackptr--;
                        }
        | '(' expression ')'
        ;
%%
void yyerror(char *s)
{
    fprintf(stderr, "%s\n", s);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:26:43.607

我的猜测是您的`lex`文件也有如下规则：

```
[[:digit:]]+             INTEGER
[[:alpha:]][[:alnum:]]*  VARIABLE 
```

在这种情况下，`MOD4`将被作为 VARIABLE 而不是`MOD`因为`lex`总是选择最长的匹配。

如果您不想`MOD`在输入后添加空格，则必须更聪明地指定`VARIABLE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:47:50.087

Flex/lex 不支持单引号来表示字符串，它为此使用双引号。所以你的扫描仪实际上是在等你进入`a=55'mod'4`。要么删除单引号，要么使用双引号。

另外，不要`yylval`在解析器的操作中使用，使用`$1`等等。我不知道您的代码是否有效，但如果有效，那纯粹是运气：`yylval`是关于前瞻，它不需要与最后一个简化符号相同。

# php - JSON字符串到PHP数组NULL

> ID：13714489
> 
> 赞同：0
> 
> 时间：2012-12-05T00:39:34.130
> 
> 标签：php, multidimensional-array, json

这是我的代码：

```
 var_dump(json_decode($data['event']->options['meals']['options'][0]['option'], true));
    echo '<br />';echo '<br />';
    var_dump($data['event']->options['meals']['options'][0]['option']);
    echo '<br />';echo '<br />';
    var_dump(json_decode('[{"name":"Petit Tenderloin","description":"Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. "},{"name":"Chicken Piccatta","description":"In lemon caper sauce, served with a timbal of wild rice and vegetables. "}]', true)); 
```

这是我的输出：

```
NULL

string(279) "[{"name":"Petit Tenderloin","description":"Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. "},{"name":"Chicken Piccatta","description":"In lemon caper sauce, served with a timbal of wild rice and vegetables. "}]"

array(2) { [0]=> array(2) { ["name"]=> string(16) "Petit Tenderloin" ["description"]=> string(115) "Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. " } [1]=> array(2) { ["name"]=> string(16) "Chicken Piccatta" ["description"]=> string(72) "In lemon caper sauce, served with a timbal of wild rice and vegetables. " } } 
```

为什么当我输入一个字符串文字时，我得到了正确的数组，但是当我传入一个变量时，我得到了 NULL？我觉得我错过了一些超级简单的东西......

**编辑：找到原因** 看起来变量有一个换行符，自然不会出现在 HTML 中。看起来新行 char 打破了 json_decode ...

除了删除新行之外，任何人都知道解决这个问题的方法吗？（如果可以的话，我宁愿把它们留在里面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:52:12.600

确保数组在`var_dump`其内容所在的第一行有数据。我无法重现您的错误。

我的代码：

```
<?php

$data['event']->options['meals']['options'][0]['option'] = '[{"name":"Petit Tenderloin","description":"Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. "},{"name":"Chicken Piccatta","description":"In lemon caper sauce, served with a timbal of wild rice and vegetables. "}]';

var_dump(json_decode($data['event']->options['meals']['options'][0]['option'], true));
echo '<br />';echo '<br />';
var_dump($data['event']->options['meals']['options'][0]['option']);
echo '<br />';echo '<br />';
var_dump(json_decode('[{"name":"Petit Tenderloin","description":"Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. "},{"name":"Chicken Piccatta","description":"In lemon caper sauce, served with a timbal of wild rice and vegetables. "}]', true)); 
```

?>

这是它为我产生的输出：

```
array(2) {
  [0] =>
  array(2) {
    'name' =>
    string(16) "Petit Tenderloin"
    'description' =>
    string(115) "Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. "
  }
  [1] =>
  array(2) {
    'name' =>
    string(16) "Chicken Piccatta"
    'description' =>
    string(72) "In lemon caper sauce, served with a timbal of wild rice and vegetables. "
  }
}
<br /><br />
string(278) "[{"name":"Petit Tenderloin","description":"Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. "},{"name":"Chicken Piccatta","description":"In lemon caper sauce, served with a timbal of wild rice and vegetables. "}]"
<br /><br />
array(2) {
  [0] =>
  array(2) {
    'name' =>
    string(16) "Petit Tenderloin"
    'description' =>
    string(115) "Wrapped in Apple Wood Bacon, borsoun whipped mashed potatoes, roasted baby vegetable, with sun dried cherry sauce. "
  }
  [1] =>
  array(2) {
    'name' =>
    string(16) "Chicken Piccatta"
    'description' =>
    string(72) "In lemon caper sauce, served with a timbal of wild rice and vegetables. "
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:40:32.717

未转义的换行符将破坏 json_decode，因为这不是有效的 JSON。

[上一个关于在 JSON 中转义换行符的问题](https://stackoverflow.com/questions/395379/problem-when-retrieving-text-in-json-format-containing-line-breaks-with-jquery)。

在那里查看 eyeliidlessness 的答案以保持换行符。简短的版本是您需要转义它们，例如：

```
$text = str_replace("\n", "\\n", $text); 
```

或者，您可能希望将换行符替换为`<br>`, insetad 以转义它们以在浏览器中呈现。

你有[GIGO](http://en.wikipedia.org/wiki/Garbage_in,_garbage_out)。不确定您是否正在控制输入，但如果是，那么您应该在前端使用[json_encode](http://us2.php.net/manual/en/function.json-encode.php)对其进行转义，这将自动转义（并因此保留）换行符。

# javascript - 在 mediawiki 中实现可过滤表脚本？

> ID：13714490
> 
> 赞同：-1
> 
> 时间：2012-12-05T00:39:36.383
> 
> 标签：javascript, css, mediawiki, jquery-ui-sortable

这个人设法将一个脚本（从这里[http://www.javascripttoolbox.com/lib/table/documentation.php](http://www.javascripttoolbox.com/lib/table/documentation.php)）集成到他们的 mediawiki 中。

见： http://offene-naturfuehrer.de/web/Kategorie: [Filtertabbellen](http://offene-naturfuehrer.de/web/Kategorie%3aFiltertabellen)

我不明白他们是怎么做到的！

创建可过滤表的原始脚本链接到该页面。但是我不知道他们是如何使用它的，因为他们没有在标题中调用它..

我真的很想在我的 mediawiki 网站中使用这样的可过滤表。我该怎么办？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:04:41.197

[他们在MediaWiki:Common.js 文件](http://offene-naturfuehrer.de/web/MediaWiki%3aCommon.js)中添加了一些代码行（搜索`Table Filter/Sort`，远在下面），从那里他们在[MediaWiki:SortTableFilter.js](http://offene-naturfuehrer.de/web/MediaWiki%3aSortTableFilter.js)加载脚本。您看不到它在 DOM 中加载，因为它们使用了 ，然后通过 ajax 和 s加载它。`jQuery.getScript``eval`

# html - ol li 中的浮动跨度在 Firefox 中显示正确，但在 Chrome 中不正确

> ID：13714491
> 
> 赞同：2
> 
> 时间：2012-12-05T00:39:42.900
> 
> 标签：html, css, css-float

我正在尝试显示一个项目列表，每个项目都有两个并排且均匀分布的跨度。

HTML 如下所示：

```
<ol id="peerTimes">
   <li id="142_177_85_207__60212">
      <span class="ip">142.177.85.207</span>
      <span class="dateTime time">Tuesday, December 04, 2012 8:34:21 PM</span>
   </li>
   <li id="127_0_0_1__52375">
      <span class="ip">127.0.0.1</span>
      <span class="dateTime time">Tuesday, December 04, 2012 8:34:09 PM</span>
   </li>
</ol> 
```

CSS看起来像这样：

```
.ip {
    float: left;
    width: 170px; 
}
.dateTime {
    width: auto;  
} 
```

在 Firefox 中，这看起来像我想要的那样： ![在此处输入图像描述](../Images/dbd998c9163e36c605589c0f9c7dc7a4.png)

但在 Chrome 中，无论我如何处理它，列表项编号总是被推到浮动跨度之后： ![在此处输入图像描述](../Images/67e77e42ba68fb9f82c54ebd2797d0de.png)

是否有跨浏览器友好的方式来实现这种布局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T00:43:51.197

只需将您的 CSS 更改为：

```
.ip {
    display: inline-block;
    width: 170px; 
} 
```

# c# - 如何使用 FiddlerCore 捕获数据？

> ID：13714499
> 
> 赞同：5
> 
> 时间：2012-12-05T00:40:17.767
> 
> 标签：c#, get, browser, fiddler, fiddlercore

我正在用 c# 开发一个程序，它允许我捕获 WebBrowser1 发出的请求。

我的问题是“请求数据”总是空的。我不明白我必须把“webBrowser1.Navigate”命令放在哪里。

现在我的代码如下。

```
private void button3_Click(object sender, EventArgs e)
{
    webBrowser1.ScriptErrorsSuppressed = true;
    WebProxy myProxy = new WebProxy();
    Uri newUri = new Uri("http://localhost:8888");
    myProxy.Address = newUri;

    Fiddler.FiddlerApplication.Startup(8888, false, false);

    List<Fiddler.Session> oAllSessions = new List<Fiddler.Session>();

    webBrowser1.Navigate("http://www.youtube.com/");
    while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
    {
        System.Windows.Forms.Application.DoEvents();
    }

    Fiddler.FiddlerApplication.BeforeRequest += delegate(Fiddler.Session oS)
    {
        Monitor.Enter(oAllSessions);
        oAllSessions.Add(oS);
        Monitor.Exit(oAllSessions);
    };

    var message = string.Join(Environment.NewLine, oAllSessions);
    MessageBox.Show(message);

    Fiddler.FiddlerApplication.Shutdown();

} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:24:49.607

您指的是什么“请求数据”？

这里的核心问题是您使用错误参数调用Startup，这**表明****Fiddler**根本不会成为任何进程的代理，因此除非您直接向该代理实例发送 HTTP 请求，否则您将永远看不到任何数据.

 **如果您的目标是从该应用获取流量并且仅从该应用获取流量，请致电

`URLMonInterop.SetProxyInProcess("127.0.0.1:8888", "<-loopback>");`

在您启动代理实例之后。这会将当前进程的 WinINET 代理设置设置为指向您已启动的 FiddlerCore 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:24:21.927

我在猜，但我认为您需要重新安排代码，以便在发出请求*之前设置提琴手：*

```
Fiddler.FiddlerApplication.BeforeRequest += delegate(Fiddler.Session oS)
{
    Monitor.Enter(oAllSessions);
    oAllSessions.Add(oS);
    Monitor.Exit(oAllSessions);
};

webBrowser1.Navigate("http://www.youtube.com/");
while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
{
    System.Windows.Forms.Application.DoEvents();
} 
```**

# java - 这是java泛型，这怎么可能工作？

> ID：13714500
> 
> 赞同：2
> 
> 时间：2012-12-05T00:40:27.553
> 
> 标签：java, generics

我正在查看“WordCount”，Hadoop 的 hello world 示例，它包含以下方法：

```
public static class Reduce extends Reducer<Text, IntWritable, Text, IntWritable> {
   public void reduce(Text key, Iterable<IntWritable> values, Context context) 
     throws IOException, InterruptedException {
       int sum = 0;
       for (IntWritable val : values) {
           sum += val.get();
       }
       context.write(key, new IntWritable(sum));
    }
} 
```

我一定是误解了我正在阅读的内容。我将这个称为 Reduce 的泛型类阅读，它扩展了基类 Reducer，并带有一些泛型类型。来自 C# 的签名是不允许的，因为有两个 Text 实例，编译器不知道如何适当地映射参数。

有人可以解释这种不熟悉的语法吗？

编辑：这是泛型的一个示例，但是，在这种形式中，要使用的实际类型已在声明中设置。Reduce 类不是泛型的，但 Reducer 是泛型的，并且我们设置了参数 A、B、C 和 D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:43:18.933

与将参数传递给两个方法参数的方式相同，您可以将两个类型参数替换为单个类型参数。例如，如果`Reducer`声明为`class Reducer<A, B, C, D>`，`Reducer<Text, IntWritable, Text, IntWritable>`则为有效类型。

但是，如果类型参数有不同的约束，例如，不同的`super`和`extends`约束，您可能无法对两个类型参数使用相同的类型实参。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:44:03.270

`Reducer`显然键入为`<A, B, C, D>`. 仅仅因为 A 和 C 碰巧由相同的类型提供并不意味着不可能（据我所知，应该在 C# 中工作）。

编辑：澄清 - 你可以有一个具有多个相同类型参数的方法：`public void foo(String a, String b)`. 人们不会说这是模棱两可的。泛型类型是类的参数，可以以类似的方式使用。想一想`Map<String, String>`——你可能有一个字符串，它代表一个 ID，指向另一个字符串作为用户名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T00:44:40.530

两个`Text`s 指的是*不同*的类型参数。例如，如果`Reducer`有声明

```
public class Reducer<A, B, C, D> { 
```

然后在 中`Reducer<Text, IntWritable, Text, IntWritable>`，第一个`Text`引用类型参数`A`，第二个引用`C`- 所以编译器可以区分它们。

# javascript - ZeroClipboard/zlip 在 iframe 中导致不安全的 Javascript 警告

> ID：13714501
> 
> 赞同：2
> 
> 时间：2012-12-05T00:40:29.120
> 
> 标签：javascript, cross-domain, zeroclipboard

我正在使用 zClip： http: [//www.steamdev.com/zclip/](http://www.steamdev.com/zclip/) （并尝试了 ZeroClipboard 也有相同的结果）

当我在 iframe 中使用它时，我收到了这个 javascript 错误/警告：

```
Unsafe JavaScript attempt to access frame with URL file://localhost/Users/me/Desktop/test.html from frame with URL http://localhost:3000/a. The frame requesting access has a protocol of 'http', the frame being accessed has a protocol of 'file'. Protocols must match. 
```

file://localhost/Users/me/Desktop/test.html 是我设置的本地文件，其中包含一个 iframe，它加载我的小部件。复制按钮位于小部件中。

尽管出现错误，复制功能似乎工作得很好，所以我不确定它为什么在那里并且想清理它。

这是我在小部件中的咖啡/javascript：

```
 btn = $('#'+id)
  btn.zclip
    path: '/flash/ZeroClipboard.swf',
    copy: btn.data('copy') 
```

这只是标准的东西。当我评论该`btn.zlip`块时，错误消失了，所以它似乎是那条线。

我假设 zeroclip javascript 中有一些东西在 iframe 之外冒泡到父级，但我找不到任何东西。想知道是否有其他人解决了这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:04:26.280

每当 Flash 对象嵌入到跨域 iframe 中时，都会抛出跨域异常。

例如，查看这个嵌入了 iFrame 的 jsfiddle：http: [//jsfiddle.net/bkCdB/](http://jsfiddle.net/bkCdB/)

```
<object width="420" height="315"><param name="movie" value="http://www.youtube.com/v/6V_DsL1x1uY?version=3&amp;hl=en_US"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/6V_DsL1x1uY?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object> 
```

# javascript - iScroll4 - 单击并拖动 (HREF)

> ID：13714503
> 
> 赞同：1
> 
> 时间：2012-12-05T00:40:34.820
> 
> 标签：javascript, ajax, iscroll4, iscroll

我的代码有问题，用iscroll4创建了一个轮播，但是图像有缩放并单击拖动fancybox事件发生，有什么方法可以在拖动时禁用链接？

```
<script type="text/javascript">
    var myScroll;

    function loaded() {
        myScroll = new iScroll('wrapper', {
            snap: true,
            momentum: false,
            hScrollbar: false,
            onScrollEnd: function () {
                document.querySelector('#indicator > li.active').className = '';
                document.querySelector('#indicator > li:nth-child(' + (this.currPageX+1) + ')').className = 'active';
            }
         });

    }

    document.addEventListener('DOMContentLoaded', loaded, false);
</script> 
```

# mysql - WORDNET：Mysql 和子类别

> ID：13714506
> 
> 赞同：2
> 
> 时间：2012-12-05T00:40:46.847
> 
> 标签：mysql, wordnet

我有一个单词列表。我希望能够自动从 wordnet 中检索每个单词的子类别数。你会怎么做？

我也在寻找 wordnet 的 mysql 版本，但在任何地方都找不到。你知道在哪里可以找到吗？

最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:41:16.270

看看[这个 WordNetSQL 构建器](http://wnsqlbuilder.sourceforge.net/)。如果您点击下载链接，您应该能够构建它。

关于子类别，您将使用 Wordnet 的下**位词**- 给定一个概念，它会为您提供更具体的概念。“汽车”的下义词是“掀背车”、“紧凑型”等。看看[这部分 NLTK 书。](http://nltk.org/book/ch02.html#fig-wn-hierarchy)

# security - 传递 Kerberos (TGT) 票证授予票证。双跳实施安全吗？

> ID：13714513
> 
> 赞同：0
> 
> 时间：2012-12-05T00:41:45.443
> 
> 标签：security, wcf-security, kerberos

为什么可以在机器之间（甚至跨网络）传递 Kerberos TGT？这不是在传递一个私钥（这在安全世界中是非常不受欢迎的）？

到目前为止，我读过的唯一保护是它有一定的有效时间。

请回答为什么通过 TGT 是可以的，而通过私钥是不行的。请假设我理解所有内容都将通过 SSL/TLS 传输，并且这些敏感数据在静止时被加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:16:04.737

除非我遗漏了什么，否则客户端不会传递 TGT：TGT 是客户端在通过身份验证服务 (AS) 进行身份验证后收到的内容。

当客户端想要连接到远程服务器/服务时，它会将其 TGT（作为更大请求的一部分）发送给 Ticket-Granting Service (TGS)，然后由 TGS 交回远程服务器/服务能够使用的票证用自己的 TGT 解密。

因此，除非您在客户端和 TGS 之间讨论，否则我不相信 TGT 在客户端和服务器之间传递。

这是一些文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa378170%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378170%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:16:39.840

传递 TGT 就像通过 SSL/TLS 通道传递 sessionId，而不是通过开放网络传递私钥:)。它是安全的。TGT 内容是加密的，并且只能由有意接收者读取。

# castle-windsor - 如何将拦截器应用于目录中的程序集列表？

> ID：13714516
> 
> 赞同：1
> 
> 时间：2012-12-05T00:41:59.750
> 
> 标签：castle-windsor, ioc-container, castle, castle-dynamicproxy

例如，Mark Seemann 对这个[问题的回答是这样的：](https://stackoverflow.com/questions/5900680/how-do-i-use-windsorinstaller-across-multiple-assemblies-for-registration)`container.Register(AllTypes.FromAssemblyInDirectory(new AssemblyFilter(folderPath)));`

这将注册给定目录中的所有程序集，包括我不感兴趣的第 3 方程序集。

我只想在一个目录中注册一个程序集列表，我不知道该怎么做的第二部分是将我的拦截器应用于该列表中的程序集。

所以我问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:33:14.593

我不确定这是否可行，但我在想这样的事情：

```
foreach (var referencedAssembly in referencedAssemblies)
            {
                base.BootStrapContainer.Register(
                    Classes.FromAssemblyNamed(referencedAssembly)
                           .IncludeNonPublicTypes()
                           .Pick()
                           .Configure(component => component.Interceptors<TracingAspect>()));

            }
```

# php - PHP删除表单已将变量传递给每个（）警告

> ID：13714517
> 
> 赞同：1
> 
> 时间：2012-12-05T00:42:05.857
> 
> 标签：php

我不是最擅长 php 编码，只是学习它。但我想知道为什么我不断将变量传递给 each() 不是数组或对象警告。我知道有一个类似的线程我曾用于此代码，但该帖子没有解决，所以我希望它可能是错误是它指出的第 46 行 -

> while(list($key,$val) = each($_POST['checkbox'])) {

整个代码是

```
<?php
$host = 'localhost'; // Host name
$username = 'root'; // Mysql username
$password = ''; // Mysql password
$db_name = 'forms'; // Database name
$tbl_name = 'members'; // Table name

// Connect to server and select databse.
mysql_connect($host, $username, $password) or die('cannot connect');
mysql_select_db($db_name) or die('cannot select DB');

$sql = 'SELECT * FROM `'.$tbl_name.'`';
$result = mysql_query($sql);?>
<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
    <td>
        <form name="form1" method="post" action="">
        <table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
        <tr>
            <td bgcolor="#FFFFFF">&nbsp;</td>
            <td colspan="4" bgcolor="#FFFFFF"><strong>Delete multiple rows in mysql</strong> </td>
        </tr>
        <tr>
            <td align="center" bgcolor="#FFFFFF">#</td>
            <td align="center" bgcolor="#FFFFFF"><strong>Id</strong></td>
            <td align="center" bgcolor="#FFFFFF"><strong>Name</strong></td>
            <td align="center" bgcolor="#FFFFFF"><strong>Lastname</strong></td>
        </tr>
        <?php while ($rows = mysql_fetch_array($result)): ?>
        <tr>
            <td align="center" bgcolor="#FFFFFF"><input name="need_delete[<? echo $rows['id']; ?>]" type="checkbox" id="checkbox[<? echo $rows['id']; ?>]" value="<? echo $rows['id']; ?>"></td>
            <td bgcolor="#FFFFFF"><? echo $rows['Member ID']; ?></td>
            <td bgcolor="#FFFFFF"><? echo htmlspecialchars($rows['firstname']); ?></td>
            <td bgcolor="#FFFFFF"><? echo htmlspecialchars($rows['lastname']); ?></td>
        </tr>
        <?php endwhile; ?>
        <tr>
            <td colspan="5" align="center" bgcolor="#FFFFFF"><input name="delete" type="submit" id="delete" value="Delete"></td>
        </tr>
        <?php
            // Check if delete button active, start this
            if ($_POST['delete']) {
                $i = 0;
                while(list($key,$val) = each($_POST['checkbox'])) {
                $sql = "DELETE FROM $tbl_name WHERE id= '$val'";
                mysql_query($sql);
                $i += mysql_affected_rows();
                }
                if($i > 0){
                echo '<meta http-equiv="refresh" content="0;URL=delete_member3.php">';
            }
            }
            mysql_close();
        ?>
</table>
        </form>
    </td>
</tr> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:51:58.123

首先，您没有名为“checkbox”的表单元素，因此 $_POST['checkbox'] 将为空（它应该引发未定义的索引错误）。其次，在处理表单时，一个 html 复选框将返回一个布尔值（真/假）。

另外，我认为您不了解each() 的用法。它返回一个包含当前数组元素的键和值的数组，然后前进数组指针。所以在一个数组中，如果你有：

```
$a = array('foo' => 'bar', 'dog' => 'cat');
$b = each($a);
var_dump($b); 
```

$b 现在包含一个这样的数组：

```
array( 0 => 'foo', 'key' => 'foo', 1 => 'bar', 'value' => 'bar' ) 
```

下次你在 $a 上使用 each() 时，它会使用 dog/cat 键/值对返回类似的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:55:30.477

在复选框前插入一个同名的隐藏字段：

```
PHP Code:
<input type='hidden' name='x' value='0'>
<input type='checkbox' name='x' value='1'> 
```

因此，您的脚本会收到“x=0”或“x=1”。

**另一种方式**

最好检查 NULL。尝试执行以下操作：

```
PHP Code:
<?php
    foreach($_POST as $key => $value)
    {
        echo ($value !== NULL) $key . ' = ' . $value . '<br />' : '';
    }
?> 
```

# css - CSS空白级联不正确？

> ID：13714520
> 
> 赞同：2
> 
> 时间：2012-12-05T00:42:36.653
> 
> 标签：css, google-chrome, whitespace

我有以下基本结构：

```
<table>
  <tr>
    <td>
      <div id="root">
        <div>Lots of text here</div>
        <div>Lots more test here</div>
      </div>
    </td>
    <td>I should always be visible</td>
  </tr>
</table> 
```

这个CSS：

```
#root {
    white-space: nowrap;
    overflow: hidden;
}
#root>div {
    white-space: normal;
    display: inline-block;
    width: 100%;
} 
```

这个想法是每个孩子`<div>`都是一个可以通过水平滚动显示的“页面”。

然而，尽管元素确实并排出现，但其中的文本似乎仍然受到 的影响`nowrap`，尽管`normal`应该影响它们（并且根据检查员的说法，正在影响它们）。

我已经在 IE9（`white-space`正常工作）和 Chrome 23（`white-space`仍然`nowrap`）中进行了测试。

是否有解决方法，或者 Chrome 中是否存在（严重）错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:07:06.060

看起来它在[这里的小提琴](http://jsfiddle.net/VTKGC/3/)中工作正常。

我的小提琴包含您的示例，其中包含一些 lorem ipsum 来填写：

html:

```
<div id="root">
    <div>Lots of text here</div>
    <div>Even more text here... well, in the fiddle it's the exact same text...</div>
</div> 
```

CSS：

```
#root {
    white-space: nowrap;
}

#root > div {
    white-space: normal;
    display: inline-block;
    width: 100%;
} 
```

正如您在下面的屏幕截图中看到的那样，空白已正确设置为`normal`.

![截屏！](../Images/be83934382a90645d9a9906f13fceccc.png)

# php - 如何从可配置产品中获取简单产品列表

> ID：13714526
> 
> 赞同：1
> 
> 时间：2012-12-05T00:43:25.393
> 
> 标签：php, magento

我有以下代码

```
$id = 19654;
$prod = Mage::getModel('catalog/product')->getCollection()->addAttributeToSelect('*');
$prod->addAttributeToFilter('entity_id',array('in'=> array($id)));
$prod->load(); 
```

使用以下代码

```
foreach($prod as $_prod)
{
     var_dump($_prod->getData());
} 
```

我可以查看几乎所有与我正在查看的可配置产品相​​关的数据，我所缺少的至少是与之关联的简单产品的 entity_id 列表

就数据库而言，我知道简单和可配置产品之间的链接在catalog_product_relation、catalog_product_super_link 和/或catalog_product_link 中，因为我使用的是集合，所以不能只使用INNER JOIN

我正在从我的 magento 安装根目录中的 test.php 页面运行此代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:59:35.937

尝试

```
$_product = Mage::getModel('catalog/product')->load($productId);

if($_product->getTypeId() == "configurable"){
    $AssociatedProduct = $_product->getTypeInstance()->getUsedProducts(); 
} 
```

或者

```
if($_product->getTypeId() == "configurable"){
    $conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_product);
    $col = $conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions();
    foreach($col as $simple_product){
       var_dump($simple_product->getId());
    }
} 
```

请参阅[http://www.magentocommerce.com/boards/viewthread/41874/](http://www.magentocommerce.com/boards/viewthread/41874/)

# c# - 在没有 imdb 的情况下获取电影数据

> ID：13714528
> 
> 赞同：2
> 
> 时间：2012-12-05T00:43:45.283
> 
> 标签：c#, imdb

我正在做一个小程序（使用 C#），我可以在其中获取电影详细信息。我的第一选择是使用 imdb。但显然 imdb 已经更改了他们的网站，因此我发现所有 Web Scraping 示例或 api 都不再有效。所以我的问题是：有没有我可以使用的替代电影数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T00:45:32.463

[Movie DB](http://www.themoviedb.org/)是开源的，并且有一个您可以使用的[api 。](http://api.themoviedb.org)

# bash - 当我回显它时，bash 中较大的双引号字符串中的“[table.20121128]”评估为“1”

> ID：13714532
> 
> 赞同：0
> 
> 时间：2012-12-05T00:44:11.507
> 
> 标签：bash, shell

这是我编写的 bash 脚本中的查询字符串。

"SELECT day,xxx,yyy,zzz,if(count>$threshold,keyword,'_other') 作为关键字，sum(count) 作为搜索 FROM (SELECT LEFT(FORMAT_UTC_USEC(UTC_USEC_TO_DAY(timestamp*1000000)),10) 作为day, xxx, yyy, zzz, REGEXP_EXTRACT(actiondata,'wvq=([^&] *)') 作为关键字，COUNT(* ) 作为计数 **来自 [table.$dir_prefix]** WHERE product='myproduct' AND LEFT(FORMAT_UTC_USEC(timestamp *1000000),10) = '$1' AND REGEXP_MATCH(actiondata,'wvq=') GROUP BY day,xxx, yyy,zzz,keyword ) GROUP BY day,xxx,yyy,zzz,keyword

ORDER BY 搜索 DESC；"

* * *

当我回显这个字符串时，输出是：

"SELECT day,xxx,yyy,zzz,if(count>50,keyword,'_other') 作为关键字，sum(count) 作为搜索 FROM (SELECT LEFT(FORMAT_UTC_USEC(UTC_USEC_TO_DAY(timestamp*1000000)),10) 作为天, xxx, yyy, zzz, REGEXP_EXTRACT(actiondata,'wvq=([^&] *)') 作为关键字，COUNT(* ) 作为计数 **从 1** WHERE product='myproduct' AND LEFT(FORMAT_UTC_USEC(timestamp*1000000),10) = '2012-11-28' AND REGEXP_MATCH(actiondata,'wvq=') GROUP BY day,xxx, yyy,zzz,keyword ) GROUP BY day,xxx,yyy,zzz,keyword

ORDER BY 搜索 DESC；"

* * *

隔离字符串并回显“[table.$dir_prefix]”输出预期的字符串 [table.20121128]。谁能解释为什么在较大的字符串中将其评估为“1”？

转义方括号 (\[table.$dir_prefix\]) 并不能解决问题。

**更多细节：** $dir_prefix 和 $threshold 分别设置为**20121128**和**50**。
字符串设置如下：

```
to_echo=\
"SELECT day,xxx,yyy,zzz,if(count>$threshold,keyword,'_other') as keyword, sum(count) as searches FROM (SELECT LEFT(FORMAT_UTC_USEC(UTC_USEC_TO_DAY(timestamp*1000000)),10) as day, xxx, yyy, zzz, REGEXP_EXTRACT(actiondata,'wvq=([^&])') as keyword, COUNT() as count FROM [table.$dir_prefix] WHERE product='myproduct' AND LEFT(FORMAT_UTC_USEC(timestamp*1000000),10) = '$1' AND REGEXP_MATCH(actiondata,'wvq=') GROUP BY day,xxx, yyy,zzz,keyword ) GROUP BY day,xxx,yyy,zzz, keyword

ORDER BY searches DESC;" 
```

* * *

**更新 2**

该脚本仅在此特定服务器（运行 Ubuntu）上存在问题。我的另一台服务器（运行 Redhat）没有问题并输出预期的内容。它必须与配置相关。我可以解决它，但我*真的*只想知道这背后的原因。

这是确切的脚本：

```
#!/bin/bash

dir_prefix=`date --date "$1" +%Y%m%d`;
threshold=$2;

query="SELECT day,xxx,yyy,zzz,if(count>$threshold,keyword,'_other') as keyword, sum(count) as searches FROM (SELECT LEFT(FORMAT_UTC_USEC(UTC_USEC_TO_DAY(timestamp*1000000)),10) as day, xxx, yyy, zzz, REGEXP_EXTRACT(actiondata,'wvq=([^&])') as keyword, COUNT() as count FROM [table.$dir_prefix] WHERE product='myproduct' AND LEFT(FORMAT_UTC_USEC(timestamp*1000000),10) = '$1' AND REGEXP_MATCH(actiondata,'wvq=') GROUP BY day,xxx, yyy,zzz,keyword ) GROUP BY day,xxx,yyy,zzz, keyword

ORDER BY searches DESC;"

echo $query; 
```

**解决方案：更多信息**

这是一篇很好的文章，详细介绍了在您不想要的情况下防止出现 globbing。我选择了 set -f 选项。

[http://blog.edwards-research.com/2011/05/preventing-globbing/](http://blog.edwards-research.com/2011/05/preventing-globbing/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:20:03.477

您有一个`1`在当前目录中命名的文件，并且它正在被全局化。

```
$ touch 1
$ echo [foo.123]
1
$ echo [foo.234]
[foo.234] 
```

# javascript - Javascript和css减去一个像素

> ID：13714533
> 
> 赞同：1
> 
> 时间：2012-12-05T00:44:20.197
> 
> 标签：javascript, css

基本上我试图通过这个循环：

```
var x = this.div.offsetLeft;
this.div.style.left = (x+this.pixelx)+"px"; 
```

其中 this.pixelx 取值为 1 和 -1。

当它的值为 1 时，它运行顺利，没有任何问题，但是当它的值为 -1 时，“this.div”移动了大约 5 次然后停止移动。

关于可能发生的事情有什么想法吗？谢谢。

编辑：

这是带有代码示例的 jsFiddle。您应该使用键盘上的左右箭头移动球：http: [//jsfiddle.net/KmrbV/1/](http://jsfiddle.net/KmrbV/1/)

编辑：

看来问题只发生在我的电脑上。我在 chrome 版本 23.0.1271.64 上运行它，我的操作系统是 ubuntu 12.04。钥匙不是问题。事实上，它只发生在-1。如果我使用-2，它也可以正常工作。

# svn - 从 svn 中的分支创建一个分支

> ID：13714534
> 
> 赞同：0
> 
> 时间：2012-12-05T00:44:22.587
> 
> 标签：svn, branch

我想从某个分支创建一个分支。但是，有一个子目录的版本较旧，我需要从另一个分支获取该子目录的最新版本。我们仍将继续在这两个分支以及我们打算创建的新分支上工作。我想知道解决这个问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:16:13.893

1.  从分支 ( `svn co ...`) URL-URL创建分支
2.  将另一个分支的“一个子目录”合并到在 p.1 分支上创建（在它的 WC 中）并提交

或者

1.  切换（WC）到必须是主父级的分支，更新
2.  cd 到“一个具有较旧版本的子目录”，将其重新定位到“另一个分支的子目录”，更新
3.  `svn co ...`从 WC ( ) WC-URL创建分支

# c# - 可以从android广播但不能从C#广播

> ID：13714542
> 
> 赞同：0
> 
> 时间：2012-12-05T00:45:31.657
> 
> 标签：c#, android, udp, ip, broadcast

我的 android 上有一个应用程序，如果我打开 wifi 并连接到我家的无线路由器，它可以通过 UDP `DatagramSocket`ala广播`mSck.send(new DatagramPacket(lBuf, 5, InetAddress.getByName("255.255.255.255"), 13000))`，我可以在我的桌面上的 wireshark 上看到它。

`new IPEndPoint(IPAddress.Parse("255.255.255.255"), 13000)`但是，如果我带着我的笔记本电脑并通过 C# 进行广播`UdpClient`（通过 wifi 连接到同一个路由器），什么也没有出现。

如果我将它`UdpClient`的广播地址更改为`IPAddress.Parse("192.168.2.255")`，它工作正常。我试过改变`UdpClient.EnableBroadcast`和所有其他财产都没有运气。知道这里会发生什么吗？

# java - 取消选中框

> ID：13714544
> 
> 赞同：1
> 
> 时间：2012-12-05T00:45:36.023
> 
> 标签：java, html, jsp, checkbox, forms

我有一个带有“复选框”的表格：

```
 out.print("<table><tr>");
  String box_user = null;
  out.print("<td>");
  box_user = "<input name = 'check' value=r" + id + " type='checkbox'>";
  out.print(box_user);
  out.print("</td>");
  out.print("</tr></table>"); 
```

我通过以下方式获得了所有复选框：

```
String[] str;
str = request.getParameterValues("check"); 
```

现在，我想得到所有未选中的框。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:16:36.673

> ..获取所有未选中的框..

你把复选框放在那里，所以你必须知道它们是什么。要找出哪些未选中，请迭代所有复选框的集合，如果未选中，则将它们添加到第二个集合中。

# java - 循环、重置和提高数字

> ID：13714548
> 
> 赞同：-3
> 
> 时间：2012-12-05T00:46:15.413
> 
> 标签：java

在java中，有没有办法在每次一个数字大于另一个数字时循环，然后将第一个数字重置为0，并将第二个数字提高一个设定值，然后一旦第一个数字高于2号？

```
int number1 = 6517253;
int number2 = 7195629; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:57:59.473

```
while (number1 <= number2)
{
    number1 = number1 + setNumber;
}
number1 = 0; 
```

如果这就是你的意思。你的问题对我来说有点令人困惑，但这将循环并通过 setNumber 变量值递增 number2，直到 number1 大于 number2。然后它将 number1 重置为 0。如果您正在寻找其他东西，请告诉我。这不是我真正阅读问题的方式，但我阅读问题的方式没有意义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:16:51.117

我会使用以下代码...

```
int number1 = 6517253;
int number2 = 7195629;
int setValue = 12345; // Whatever the "set value" needs to be
boolean continueLooping = true;

while (continueLooping) {
    for (int i = number1; i <= number2; i++)
        doSomething();
    number1 = 0;
    number2 += setValue;
    if (<some-condition>)
        continueLooping = false;
} 
```

# java - Java字符串在非字母字符上拆分

> ID：13714549
> 
> 赞同：10
> 
> 时间：2012-12-05T00:46:43.317
> 
> 标签：java, regex, string, split

我想沿非字母字符将字符串拆分为字符串数组。例如：

```
"Here is an ex@mple" => "Here", "is", "an" "ex", "mple" 
```

我尝试将[String.split(String regex)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)方法与正则表达式一起使用`"(?![\\p{Alpha}])"`。但是，这会将字符串拆分为

```
"Here", "_is", "_an", "_ex", "@ample" 
```

（那些下划线是为了强调有一个空格）。我猜这是因为`?!`正则表达式运算符是“零宽度”，实际上是拆分并删除输入字符串中非字母字符之前的零宽度字符。

如何在拆分字符串时删除实际的非字母字符？是否有非零宽度否定运算符？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T01:05:09.337

你可以试试**`\P{Alpha}+`**：

```
"Here is an ex@mple".split("\\P{Alpha}+") 
```

```
[“这里”、“是”、“一个”、“前”、“mple”]

```

`\P{Alpha}`匹配任何非字母字符（与`\p{Alpha}`匹配任何字母字符相反）。`+`表示我们应该拆分任何连续的此类字符的字符串。例如：

```
"a!@#$%^&*b".split("\\P{Alpha}+") 
```

```
[“a”，“b”]

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-29T13:14:40.080

这里已经有几个答案，但没有一个能很好地处理国际化问题。即使可以从 OP 示例中假设它是关于“英文”字母的，但对于通过搜索来到这里的访问者来说可能并非如此......

...因此，值得一提的是，Java 支持[Unicode Technical Standard #18 *"Unicode Regular Expressions"*](http://www.unicode.org/reports/tr18/)。是不是很令人印象深刻？很明显，这是对用于处理国际字符的经典（以拉丁语为中心或以英语为中心的）正则表达式的扩展。

例如，[Java 支持全套二进制属性](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#ubpc)来检查字符是否属于 Unicode 代码点字符类之一。特别是[\p{IsAlphabetic}](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#unicode)字符类将匹配与任何 Unicode 支持的语言中的字母相对应的任何字母字符。

不清楚 ？这是一个例子：

```
 Pattern p = Pattern.compile("\\p{IsAlphabetic}+");
    //                           ^^^^^^^^^^^^^^^^^
    //                         any alphabetic character
    //                    (in any Unicode-supported language)

    Matcher m = p.matcher("L'élève あゆみ travaille _bien_");
    while(m.find()) {
        System.out.println(">" + m.group());
    } 
```

或者使用 split 来打破*非*字母字符的大部分等效：

```
 for (String s : "L'élève あゆみ travaille bien".split("\\P{IsAlphabetic}+"))
        System.out.println(">" + s); 
```

在这两种情况下，输出都会正确标记单词，同时考虑到法语重音字符和日语平假名字符——就像使用任何支持 Unicode 的语言（包括[补充的多语言平面](https://en.wikipedia.org/wiki/Plane_%28Unicode%29#Supplementary_Multilingual_Plane)）拼写的单词一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:24:22.830

不会

```
"Here is an ex@mple".split("\\S\\w+") 
```

工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-29T15:19:29.657

除了其他答案之外，您还可以遍历字符串中的字符，测试它们的 ASCII 值是否在小写和大写字母的范围内，如果不是，则执行您想要的“拆分”行为。

`char[] chars = str.toCharArray();` 可能有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T05:24:45.000

在拆分函数中使用方括号[]，我们可以做到这一点，

语法：字符串 strArray = text.split("[^a-zA-Z0-9]");

例如： --> for text : "Ready, stable, go!";

字符串数组将是，strArray = [Ready,steady,go];

例如：--> for text：“你是最棒的！！！！！！！！！！！！CodeFighter ever！”；

字符串数组将是，strArray = [You,are,the,best,CodeFighter,ever];

# vb.net - 如何在 vb.net 中将通配符添加到 URL

> ID：13714552
> 
> 赞同：1
> 
> 时间：2012-12-05T00:46:51.917
> 
> 标签：vb.net

我是 VB.NET 的新手，我正在尝试将通配符 (*) 替换为任何字符串。像这样的东西：

```
 If WebBrowser1.Url.ToString = "http://google.com/*" Then

        'Insert action here'

    End If 
```

不幸的是，通配符不起作用。我想要它，这样 URL 就可以是任何东西，只要它以[http://google.com/](http://google.com/)开头 有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:48:44.147

尝试这样做：

```
If WebBrowser1.Url.ToString.StartsWith("http://google.com/") Then

    'Insert action here'

End If 
```

# c# - WPF GridView - 动态绑定自定义类

> ID：13714558
> 
> 赞同：1
> 
> 时间：2012-12-05T00:47:13.847
> 
> 标签：c#, wpf, xaml, data-binding

我想将 Player 类的列表（代表美式足球运动员的统计数据）绑定到 GridView。我代表这些玩家的方式（在模型级别，所以我可以在模型视图中更改它）给我带来了很多麻烦。

```
class Player
{
    public string Name { get; set; }
    public List<Statistic> Statistics { get; set; }
}

class Statistic
{
    public string ShortName { get; set; }
    public double Value { get; set; }
    public StatisticCategory Category { get; set; }
}

enum StatisticCategory
{
    Offense,
    Defense
} 
```

我想将这些玩家的列表绑定到可以按列排序的视图。对于列，我想做以下事情：获取组合框的值，将其转换为 StatisticCategory 对象，然后选择所有玩家的同一类别中的所有统计信息（当然每个只有一次）。绑定到这些列的数据应该是统计数据的值（如果玩家有给定的统计数据），否则字符“-”或类似的东西，表示缺少数据。

我使用在线教程考虑了很多选项，但似乎没有一个涵盖这种绑定，我什至不确定这是否可能。

也许我应该考虑我的数据的其他表示形式，如果您对此有任何建议，也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:50:51.290

您可以使用作为 ListView 或其他 XAML 控件的一部分公开的[DataTemplate 。](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.datatype.aspx)

```
<DataTemplate xmlns:mylib="clr-namespace:MyLib.Players" DataType="{x:Type mylib:Player}">
    <!-- template -->
</DataTemplate> 
```

此模板也可以列为共享资源，因此可以从许多地方访问。

# php - 如何在 Symfony 2 中有效地使用学说分页？

> ID：13714559
> 
> 赞同：5
> 
> 时间：2012-12-05T00:47:16.727
> 
> 标签：php, symfony, doctrine-orm, pagination, symfony-2.1

我想在 Symfony 中使用 Doctrine ORM 和分页方法。KnpPaginatorBundle 看起来简单易用。我还使用 Doctrine 存储库，因为查询可以很容易地重用和测试。

这个捆绑包像我发现的其他捆绑包一样工作。它需要查询生成器作为参数。有没有比给每个存储库函数提供分页器作为参数（或 null）更好的方法？我不想对每个查询结果进行分页，所以我认为所描述的解决方案不是最好的，我正在寻找建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T21:43:15.637

我知道这样做的两个捆绑包：

*   [https://github.com/KnpLabs/KnpPaginatorBundle](https://github.com/KnpLabs/KnpPaginatorBundle)
*   [https://github.com/whiteoctober/WhiteOctoberPagerfantaBundle](https://github.com/whiteoctober/WhiteOctoberPagerfantaBundle)

两者都可以分页 ORM/Query 或 ORM/QueryBuilder（等等）。

# java - Java - 通过 TCP 发送字符串或段落

> ID：13714565
> 
> 赞同：2
> 
> 时间：2012-12-05T00:48:03.997
> 
> 标签：java, string, socket.io

我是 Java 新手，正在学习如何通过 Socket() 类发送消息。

我正试图围绕两个简单的聊天程序之间如何发送和接收字符串。我在网上找到了很多关于 TCP/UDP 聊天客户端和聊天服务器的示例。

但我仍然对缓冲数据和字符串感到困惑。

在我的代码中，我添加了 3 个字段（field1、field2、area）和一个带有事件侦听器的提交按钮。下面是部分代码，展示了我如何附加监听器和它实例化的类。

```
......more code above this

button.addActionListener(new ActionListener(){
   public void actionPerformed(ActionEvent e){
     new SendRequest();
   }
});

public class SendRequest{

  SendRequest(){

   try{

      String dip = field1.getText(); // ip address
      String port = field2.getText(); // port num
      int pnum = Integer.parseInt(port);
      String mess = area.getText(); // large text box
      Socket skt = new Socket(dip, pnum);

      /* kinda not sure about this part, with strings */

   }
   catch(IOException io){
      System.out.println("error? " + io.getMessage());
   }
  }
} 
```

我在网上看到了很多例子，现在我有点困惑。

实例化 new Socket() 后，发送多行文本的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:16:28.940

在“有点不确定部分”中，使用套接字中的 OutputStream 创建一个 PrintWriter，然后在文本区域中的“mess”字符串上调用 PrintWriter 的 print 方法来打印消息。

这会将消息字符串放在输出流缓冲区中，但在您调用 PrintWriters 刷新方法之前不会发送。

最后关闭 PrintWriter。

文本应该多行发送，因为当您按下 Enter 时，textareas 字符串将包含“\r\n”。

例如。

```
PrintWriter output = new PrintWriter(skt.getOutputStream());
output.print(mess);
output.flush();
output.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T01:14:08.693

一旦连接了套接字并获得了它的输出流（通过`socket.getOutputStream()`），写入套接字与写入任何输出流（例如文件）并没有什么不同。您应该以与将其写入文件的方式完全相同的方式编写多行文本。

如何发送多行文本——似乎最好的方法是`ObjectOutputStream`在套接字的输出流之上构造一个并使用它。例如：

```
Socket socket = new Socket(...);
OutputStream os = socket.getOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(os); 
```

然后写你的对象（一个字符串，一个字符串数组，或者一个`List`，或者诸如此类）：

```
oos.writeObject(mess); 
```

只要 的类`mess`是`Serializable`（并且 if`mess`是对象的集合，并且这些对象也是`Serializable`），这将起作用。您可以使用`ObjectInputStream`和从另一端读取对象`readObject`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T01:15:54.787

有多种写入数据的方法。例如，我喜欢序列化一个类并通过 ObjectOutputStream 发送该类的一个实例。但由于您只发送一个字符串，因此 BufferedWriter 可能更容易处理。

代码：

```
BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(skt.getOutputStream(),"UTF-8")); //optional encoding
writer.write(mess+"\r\n"); 
```

没有比这更令人困惑的是，“\r\n”是为了更容易处理接收端的最后一行。

# javascript - 用于具有旧的非 RESTful 后端的移动应用程序的 JavaScript MV* 框架

> ID：13714573
> 
> 赞同：0
> 
> 时间：2012-12-05T00:48:35.200
> 
> 标签：javascript, model-view-controller, design-patterns, backbone.js

我刚刚加入了一个团队，该团队正在为具有旧的非 RESTful PHP 后端的网站创建移动网络应用程序（非本地）。目前，该应用程序非常基础，一切都使用 jQuery 和 DOM 操作完成，但我们开始到处都有意大利面条式代码。

该应用程序用于搜索、查看和更新​​大型文章数据库。存在用户登录和设置等典型功能。

我们想使用一个不会妨碍我们的轻量级框架重写我们所拥有的东西，并允许我们在不修改旧后端的情况下轻松地与它进行通信（我们现在使用`jQuery.ajax()`）。

最受欢迎的选择似乎是 Backbone.js，但默认情况下它需要一个 RESTful 后端。我在文档中读到我们可以通过覆盖该`sync()`函数来解决它。这是要走的路吗？

我知道那里还有[很多其他框架](http://addyosmani.github.com/todomvc/)。在这种情况下，它们中的任何一个更适合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:12:40.953

> 最受欢迎的选择似乎是 Backbone.js，但默认情况下它需要一个 RESTful 后端。我在文档中读到我们可以通过覆盖 sync() 函数来解决它。这是要走的路吗？

重写并不难`Backbone.sync()`，您可以编写自己的包装器来使用您可以通过 AJAX 与之通信的任何样式 API。所以我会说是的，这是一个不错的方法。

# html - 仅在检测到移动设备时添加 href="tel:"

> ID：13714576
> 
> 赞同：2
> 
> 时间：2012-12-05T00:49:00.597
> 
> 标签：html, css, smartphone

我目前在我的网站上列出了一个电话号码，它当前链接到“tel:myphonenumber”......除非该网站加载到手机上，否则我如何删除这个href？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T05:20:31.010

这已在此处得到解答 [如何使 <a href> 仅在移动设备上处于活动状态？](https://stackoverflow.com/questions/13409089/how-can-i-make-an-a-href-only-active-on-mobile-devices)

您应该使用微数据。因为手机会识别，不会影响正常的网络浏览器。

```
<div class="vcard">
    <div class="tel">
        12345555555
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-03T13:15:36.520

***HTML***

```
 <td><a href="tel:888888">888888</a></td> 
```

***CSS***

@media screen and (min-width: 1224px) { a[href*="tel:"] { pointer-events: none; } }

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-05T01:21:35.930

不幸的是，没有办法做到这一点。

* * *

# pdf - 如何在 PDF 中嵌入 UTF-8 字体？

> ID：13714577
> 
> 赞同：1
> 
> 时间：2012-12-05T00:49:05.260
> 
> 标签：pdf, utf-8, fonts, pdf-generation

为了避免添加字体的不必要部分，我们定义

```
/FirstChar 32
/LastChar 126 
```

用于在 PDF 文档中嵌入字体。但是，这不适用于`UTF-8`字体，因为我们可能使用不属于系列的字符（整个 UTF-8 中的随机字符）。另一方面，无法嵌入整个 UTF-8 字体，因为它对于 PDF 文档来说太大了（当然也没用）。

如何选择性地嵌入带有几个字符的字体？我的问题是关于 PDF 代码（如何编写）？

**可能的方法：**

*手册：*借助 FontForge 之类的程序，我们可以捕获带有选定字符的自定义字体，但是***如何在 PDF 文档中指向自定义字符呢？***PDF 只要求`FirstChar`和`LastChar`。

*自动（首选）：*将整个 UTF-8 字体嵌入到 PDF 文档中，然后优化 pdf 文档（使用 pdftk 等工具）以删除不必要的字符。***有这样的工具吗？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:26:13.110

在 PDF 文件中定义 FirstChar 和 LastChar 根本不会影响实际的字体数据。为了在字体中嵌入少于整个范围的字符，您需要“子集”实际字体数据。也就是说，找到每个字形的描述，存储每个所需的描述，然后生成一个适当的框架来包含字形描述，这取决于字体类型。

一般来说，没有“UTF-8”字体这样的东西。字体包含一系列关于如何绘制多个字形的说明，以及一种从字符代码索引以找到正确字形描述的方法。对于 PostScript 字体，这由 Encoding 给出，对于 CIDFonts，它由 CMap 给出，对于 TrueType 字体，它由嵌入在字体中的 CMAP 子表给出。

因此，为了实现您的目标，您需要非常彻底地了解您打算使用的字体格式（PostScript type 1、type 2、CIDFont 或 TrueType），能够确定您需要哪些字形描述，从字体中提取这些字形，然后构建一个只包含那些所需的字形描述的新字体。

这将是很多工作。正如@mkl 所说，您可能会更好地描述您的预期工作流程，我们会尝试更好地建议您如何实现它。例如，bot Adob​​e Acrobat Distiller 和 Ghostscript 的 pdfwrite 设备将在将 PostScript 转换为 PDF 时子集字体。

# c# - TIBCO EMS 重试逻辑

> ID：13714579
> 
> 赞同：0
> 
> 时间：2012-12-05T00:49:09.293
> 
> 标签：c#, tibco, tibco-ems, ems

我们有一台运行我们的 c# windows 服务的应用程序服务器和一台运行 TIBCO EMS 的服务器。两台服务器将在一周内的不同时间重新启动。

当应用程序服务器首先重新上线时，我们喜欢 c#windwos 服务不断尝试连接到 EMS 服务器，直到 EMS 服务器重新上线。（我有重试逻辑适用于这种情况）

当 EMS 服务器在应用程序服务器运行时脱机时（例如，c# 中的 EMS 客户端正在侦听队列中的传入消息），这种情况下执行重试逻辑的最佳方法是什么？会立即抛出异常吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:52:59.713

如何获得连接关闭的通知？我看到连接对象有异常列表器和异常处理程序。但是如果我在它们都运行时关闭网卡，我无法在 c# 中捕获它们中的任何一个。

它们之间有什么区别？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:05:49.987

如果您`Windows Service`只是为了连接，`TIBCO EMS`那么您可以添加一个依赖项。然后，每当`TIBCO EMS`服务停止/重新启动时，您`Windows Service`将分别停止/重新启动。缺点是当你开始时`TIBCO EMS`，你`Windows Service`不会自动开始（我不确定你是否可以将两个服务配对在一起来克服这个问题）。

否则，您可以将 .NET 中的计时器类之一（例如[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)）添加到处理与 TIBCO EMS 的连接的类中。然后在连接关闭时启动计时器并在连接打开后停止它。定时器可以在指定的时间间隔后尝试连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T15:57:20.327

您应该尝试将以下 KB 中的属性添加到您的 tibemsd.conf 并检查。

[https://support.tibco.com/s/article/Tibco-KnowledgeArticle-Article-33918](https://support.tibco.com/s/article/Tibco-KnowledgeArticle-Article-33918)

例如：

```
client_heartbeat_server=10
client_timeout_server_connection=35
server_heartbeat_client=10
server_timeout_client_connection=35 
```

# multithreading - 实体框架，对所有应用程序线程使用一个连接

> ID：13714585
> 
> 赞同：0
> 
> 时间：2012-12-05T00:49:44.403
> 
> 标签：multithreading, c#-4.0, entity-framework-4

我是 Entity FrameWork 的新手，我有程序可以通过多个线程保存/更新到不同的表。

起初，我为每个操作打开了与数据库的新连接

```
var db = new AppDBEntities() 
```

AppDBEntities 继承自 ObjectContext

直到我得到“连接太多”异常，我意识到我达到了 151 个连接。

我可以增加 MySql DB 中的 max_connection 属性，但这当然不是正确的解决方案......

所以我试图让应用程序对所有线程使用**一个**连接，我在管理这个过程中几乎没有迷失..

任何想法如何在使用或不使用同步对象的情况下跨所有线程使用**一个**数据库连接（Maby Entity Framework 已经有自己的解决方案来解决这个问题..）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:04:24.053

为什么不将您的 AppDBEntities 调用放在 using 语句中，这将为您关闭连接。

```
using(var db = new AppDBEntities()){
// your code goes here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:29:04.567

在启动线程的类中将其定义为静态。但是你必须考虑线程安全。只有 1 个线程可以同时访问一个对象，因此通常意味着在读/写之前锁定它。我不知道在 DbContext 的情况下。

# php - 在 PHP 中从 MySQL 绘制时间戳

> ID：13714592
> 
> 赞同：0
> 
> 时间：2012-12-05T00:50:17.280
> 
> 标签：php, mysql

我正在使用 PHP 和 MySQL 创建一个分析跟踪脚本。

目前，我正在使用“时间戳”类型字段在表中记录对 MySQL 的网站访问。

有没有办法绘制这些时间戳以显示一定时间内的流量？或者，我是否首先需要创建另一个表来保存设定的日期或时间或我正在绘制的任何时间段的实际计数？

我只是想做一个简单的折线图

[http://manhattansound.com/images/graph.png](http://manhattansound.com/images/graph.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:56:39.737

有大量的 javascript 库可以进行绘图。哎呀，您甚至可以直接在 PHP 中制作图表。另一方面，数据......这取决于你。您可以从开始时间和结束时间中选择时间戳，这就是您的选择。在那段时间的访问量。如果您要查找的只是给定时间段内的点击量（记录），我认为不需要单独的表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:01:45.563

[http://jpgraph.net/](http://jpgraph.net/)似乎相当流行，并且相对容易使用。谷歌也有一个[可视化库](https://developers.google.com/chart/)。您应该能够使用单个 SQL 语句创建一个包含要在图表中显示的信息的数组 - 到目前为止您尝试过什么？

# node.js - Node.js 在服务器和客户端之间同步音频流？

> ID：13714593
> 
> 赞同：10
> 
> 时间：2012-12-05T00:50:21.520
> 
> 标签：node.js, audio, streaming, real-time

我正在尝试构建一个 Web 应用程序，它将在浏览器**中流式传输音频**（没有任何插件），能够让其他用户加入 www.mysite.com，并且音频将从主机的当前音频位置（也就是服务器和客户端之间的同步音频播放）。

我需要做什么来实现这样的东西？我现在正在做一个 Node.js/Express 项目，但我还没有接触过 Stream 或 Buffer API。那是我需要使用的吗？WebRTC 呢？在这里适用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T12:43:04.203

前段时间我一直在考虑类似用途的 WebRTC。它是在服务器端节点应用程序中创建 WebRTC 对等点的解决方案之一。我从来没有做过这样的事情，但检查一下这个问题：

[使用 node.js 作为 WebRTC 对等点？](https://stackoverflow.com/questions/17227143/use-node-js-as-a-webrtc-peer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T20:16:24.237

你应该看看[binaryjs](http://binaryjs.com/)

根据他们的描述：

> BinaryJS 是一个轻量级框架，它利用 websockets 在浏览器 javascript 和 Node.js 之间双向发送、流式传输和管道二进制数据。

# c - strange realloc behavior odd/even netbeans

> ID：13714594
> 
> 赞同：1
> 
> 时间：2012-12-05T00:50:25.250
> 
> 标签：c, netbeans, realloc

I have a prime number generator, which generates `unsigned int count` prime numbers and stores them in a dynamically allocated array declared globally `numList globalPrimes` numList is just `typedef unsigned int *numList`. If the value of count is 0, it is ignored and it calculates prime numbers until the value of the previously calulated prime number surpasses `unsigned int until` which is ignored unless count is 0.

```
numList getPrimes(unsigned int count, unsigned int until)
{
    unsigned int i, j;
    unsigned int p = 0;
    char b=1;
    if(globalPrimes==NULL)
    {
        b=0;
        globalPrimes = calloc(count>0? count:until, sizeof(int));
        if(globalPrimes==NULL)
        return NULL;
    }
    globalPrimes[0]=2;   //set first 2 prime #'s in list
    globalPrimes[1]=3;
    for(i=2, p=5; count!=0? (i<count):(globalPrimes[i-1]<=until); p+=2)  //iterate until it finds every prime number. Increments p by 2 starting from the third prime
    {
        if(globalPrimes[i]!=0)  //if the current prime was preordained (a value was set already) skip to the next prime
        {
            p=globalPrimes[i++];
            continue;
        }
        else if(globalPrimes[i]==0)  //if it is 0, allocate the extra memory and find next prime
        {
            if(b)
                globalPrimes=(numList)realloc((void *)globalPrimes, sizeof(int)*((count==0)? (until):(count+1)));
            b=0;
        }

        for(j=0; (p%globalPrimes[j]) && globalPrimes[j]*globalPrimes[j]<p; j++);  //loop through all previous primes until past half of p
        if(p%globalPrimes[j])   //if the prime is still not divisible by the previous prime
            globalPrimes[i++]=p;   // save as the next prime
    }
    globalPrimes[i]=0;
    globalPrimes=(numList)realloc((void *)globalPrimes, (i+(i%2)+1)*sizeof(int));
    return globalPrimes;
} 
```

During some tests, I found a weird error. On the penultimate line with `realloc` netBeans (gcc compiler) gives me a "signal" which I assume are like runtime exceptions. The dialogue box reads that the error is SIGABRT, and it aborts the program while not in debugging mode. I have found that this error only occurs when count is an odd number. Even when I modify realloc's arguments so that it always passes even numbers, there is still an error. But when I modify count to only be even at the beginning of the function, it works fine. I can't figure out why this strange details cause this strange behavior.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:37:38.880

The line

```
globalPrimes[i]=0; 
```

just before your last `realloc()` is corrupting memory - it's a write that's just past the end of the array you've allocated.

I think you want to allocate the array like so:

```
globalPrimes = calloc(count>0? (count + 1):until, sizeof(int)); 
```

So far I've only looked at the case where the function is called with a non-zero `count`; I'm honestly not sure what problems there might be if the function is called with `count == 0` and `until` being some target prime.

# javascript - onClick 不会触发，chrome/safari

> ID：13714597
> 
> 赞同：1
> 
> 时间：2012-12-05T00:50:30.730
> 
> 标签：javascript, html, ipad, safari, onclick

这个小提琴不是完整的代码集。但是，这是我遇到问题的孤立代码。

这适用于所有版本的 IE，但不适用于 Safari/Chrome。具体来说，我试图让它在 IPAD 上工作。选择按钮将按下，该功能不会做任何事情，并且基本上会卡在那里......有人有什么建议吗？

[http://jsfiddle.net/Eh9QC/](http://jsfiddle.net/Eh9QC/)

```
function selectStatements(f)
            {
            var selectedArray = new Array();
            var selObj = document.getElementById('statementGroups');
            var i = 1;
            var count = 0;
            for (i=0; i<selObj.options.length; i++)
                {
                 if ( (selObj.options[i].selected) && count<20 )
                   {
                     selectedArray[count] = selObj.options[i].value;
                     count ++;
                   }
                }
            f.chosenStatements.value = selectedArray;
            document.glStatementForm.glaction.value = "updateChosenList";
            document.glStatementForm.action="glstsend.shtml";
            document.glStatementForm.method="POST";
            document.glStatementForm.submit();
            }
   </script>​​​ 
```

HTML：

```
 #IF EXPR = (clientState == "setList")                   -->
    <div id="openBox2">
                 <tr>
                     <td VALIGN="top"><B>Statements:</B>
                     <td VALIGN="top">
                     <SELECT NAME="statementGroups" SIZE=10 MULTIPLE>                                               <!--
                               #SET NAME = ldx VALUE = 0                                                         --><!--
                               #WHILE EXPR=(ldx < disp_list_count)                                               -->
                                      <OPTION VALUE= "(*disp_dropdown_value[ldx]*)">(*disp_dropdown_text[ldx]*)     <!--
                                      #SET NAME = ldx VALUE = ldx + 1                                            --><!--
                              #ENDWHILE                                                                          -->
                     </SELECT>

                 <tr>
                     <td> <BR />
                     <td> <INPUT TYPE=BUTTON VALUE="Select" STYLE="font:8pt Arial" ONCLICK="selectStatements(this.form);">
                                                                         <!--
              #ENDIF                                                  -->

             </table>
    </div>
   ​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:33:39.587

首先，你有

```
var selObj = document.getElementById('statementGroups'); 
```

可能指的是 HTML 中的这个元素

```
<SELECT NAME="statementGroups" SIZE=10 MULTIPLE> 
```

但是这个元素没有分配任何 id。为了确信浏览器会找到你需要的

```
<select name="statementGroups" id="statementGroups" size="10" 
multiple="multiple"> 
```

第二，

```
document.glStatementForm... 
```

大概是指具有 id 或名称“glStatementForm”的表单。但这不是引用它的常用方式，除非您以某种方式故意将其添加到文档命名空间中。我不确定访问表单字段最符合跨浏览器的方式是什么，但可能类似于：

```
var glsForm = document.getElementById('glStatementForm'),
glsForm.elements['action'].value = "updateChosenList";
glsForm.action = "glstsend.shtml";
glsForm.method = "POST";
glsForm.submit(); 
```

并确保在 HTML 中设置了 glStatementForm 的 id 属性。

# c# - 自动定位嵌套的用户控件

> ID：13714599
> 
> 赞同：0
> 
> 时间：2012-12-05T00:50:49.070
> 
> 标签：c#, winforms, docking

我想自动调整一些生成的控件。我创建了两种`TextBox`类型和两种`CustomControl`类型，它们是`UserControl`. 每个`CustomControl`都有一个`Label`显示我称之为标题的字符串。我只能看到两个文本框之一。我只能看到两个标题之一。如何显示表单中的所有控件？我不喜欢自己管理控制位置。而是坚持`Dock`设置。

```
 public partial class SomeForm : Form
{
    public SomeForm()
    {
        InitializeComponent();
        LoadControls();//I can only see the first control caption and textBox2
        //how can I display both textboxes and both captions?
    }

    private void LoadControls()
    {
        TextBox textBox = GenerateTextBox("First textbox");
        TextBox textBox2 = GenerateTextBox("Second textbox");

        CustomControl control = new CustomControl(labelCaption: "First control caption");
        CustomControl control2 = new CustomControl(labelCaption: "second control caption");            

        //add the textboxes to the usercontrols
        control.Controls.Add(textBox);
        control2.Controls.Add(textBox2);            

        //this displays only 1 control (incorrect)
        flowLayoutPanel1.Controls.Add(control);
        flowLayoutPanel1.Controls.Add(control2);
        flowLayoutPanel1.SetFlowBreak(control, true);
        flowLayoutPanel1.SetFlowBreak(control2, true);

        //this displays both controls (correct)
        //flowLayoutPanel1.Controls.Add(textBox);
        //flowLayoutPanel1.Controls.Add(textBox2);
        //flowLayoutPanel1.SetFlowBreak(textBox, true);
        //flowLayoutPanel1.SetFlowBreak(textBox2, true);
    }

    private static TextBox GenerateTextBox(string text)
    {
        TextBox textBox = new TextBox();
        textBox.Text = text;
        textBox.Dock = DockStyle.Top;
        return textBox;
    }
} 
```

自定义控件：

```
 public CustomControl(string labelCaption)
    {
        InitializeComponent();
        Label label = new Label();
        label.Text = "Rtb..." + labelCaption;
        //label.Dock = DockStyle.Top;
        //contentPanel.Controls.Add(label);//disabled for now
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:55:44.820

问题是您使用 DockStyle.Top 进行的初始化：

```
 CustomControl control = new CustomControl(labelCaption: "First control caption");
        control.Dock = DockStyle.Top;        
        CustomControl control2 = new CustomControl(labelCaption: "second control caption");            
        control2.Dock = DockStyle.Top; 
```

他们会以这种方式相互叠加。不要使用 DockStyle，而是使用定位属性：

```
 control.Top = 0;
       control2.Top = control.Height; 
```

这应该可以让你到达你需要去的地方。

了解如何做好这件事的一个好方法是查看设计器生成的代码。在设计器中手工完成，然后查看生成的代码，它将帮助您概括将来如何自己在代码中进行定位。

**根据您的评论进行**编辑：****

 **您可以使用[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)并在每个之后设置 FlowBreak：

```
flowLayoutPanel.Controls.Add(control);
flowLayoutPanel.Controls.Add(control2);
flowLayoutPanel.SetFlowBreak(control, true);
flowLayoutPanel.SetFlowBreak(control2, true); 
```**

# objective-c - Xcode 给出错误的 CFBundleShortVersionString

> ID：13714601
> 
> 赞同：0
> 
> 时间：2012-12-05T00:51:00.507
> 
> 标签：objective-c, xcode4, version

我在 Xcode 中有一个项目，从一开始就将版本号 (`CFBundleShortVersionString`和`CFBundleVersion`) 都设置为`1.0`in 。`Projectname-Info.plist`我从来没有改变过它们。但是，当我打电话时：

```
NSLog(@"Version: %@", [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"]); 
```

输出是：

```
Version: 5.0 
```

如果我用`CFBundleVersion`. 这个值是怎么设置的？如果它不在`Projectname-Info.plist`，它可能在哪里？我怎样才能改变这个？

# javascript - Javascript改变css

> ID：13714604
> 
> 赞同：0
> 
> 时间：2012-12-05T00:51:04.007
> 
> 标签：javascript, html, css, accordion

我将如何创建一个脚本来检查 div 是否设置为 display:none 以外的任何其他值。

我在手风琴上有一个图像，但是当我单击一个手风琴元素时，我想将图像隐藏在顶部。

所以说我的内容是一个名为“accord_content”的类的形式，我显示的图像是“image_over”。我可以创建一个脚本来检查是否显示了accord_content，如果显示了则隐藏“image_over”？

```
if ('.accord_content.display !== 'none') {
        image_over.display = 'none')
        } 
```

只是一个快速的尝试，不擅长 javascript，所以对如何完成这个感到困惑

谢谢

新更新 - 这是显示我要检查的 html 的摘录

```
<h3 class="title">Making the shortlist</h3>
        <div class="accord_content">
        <div class="content_left">

<p>CONTENT</p>

<p>CONTENT>
    </div> 
```

现在这是使用 jquery 手风琴 ui，所以当页面打开时，类accord_content 是 display:none，

当点击 h3 时，它会变为 display:block。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:42:59.643

使用 jQuery，您可以执行以下操作：

**Javascript**

```
if ($('.accord_content').css('display') !== 'none') {
    $('.image_over').hide();
} 
```

**[演示](http://jsfiddle.net/Yn39r/1/)**

这将通过以下方式工作。如果有任何`.accord_content`可见，则所有内容`.image_over`都将被隐藏。

或者在本机 javascript 中，您可以这样做：

**Javascript**

```
if (document.querySelector('.accord_content').style.display !== 'none') {
    document.querySelector('.image_over').style.display = 'none';
} 
```

**[演示](http://jsfiddle.net/Yn39r/)**

这将获得第一个实例`.accord_content`并隐藏第一个`.image_over`. `display: none`如果设置`.accord_content`为内联`style`属性而不是 css，则此检查将仅返回 false 。

你真的应该在你的问题中发布一些相关的 html。还描述了这是如何工作的。如果您发布一个模糊的问题，您将得到一个模糊的答案。花时间发布一个好的问题，人们会花时间发布一个好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:54:20.293

```
if (element.style.display !== 'none') {} 
```

# c# - 使用 itextsharp 检索页面上所有单词的各自坐标

> ID：13714605
> 
> 赞同：4
> 
> 时间：2012-12-05T00:51:06.207
> 
> 标签：c#, itextsharp

我的目标是检索页面上所有单词的各自坐标，我所做的是

```
PdfReader reader = new PdfReader("cde.pdf");
TextWithPositionExtractionStategy S = new TextWithPositionExtractionStategy();
PdfTextExtractor.GetTextFromPage(reader,1,S);

Vector curBaseline = renderInfo.GetDescentLine().GetStartPoint();
Vector topRight = renderInfo.GetAscentLine().GetEndPoint();

iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(curBaseline[Vector.I1], curBaseline[Vector.I2], topRight[Vector.I1], topRight[Vector.I2]);
string x1 = curBaseline[Vector.I1].ToString();
string x2 = curBaseline[Vector.I2].ToString();
string x3 = topRight[Vector.I1].ToString();
string x4 = topRight[Vector.I2].ToString(); 
```

但是，我得到的是一个字符串的坐标，它包含一行的所有单词，而不是一个单词。例如pdf的内容是“我是女孩”，我得到的是“我是一个女孩”的坐标女孩”，但不是“i”“am”“a”“girl”的坐标。如何修改代码以便获得单词坐标。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T09:29:51.640

（我主要使用 Java 库 iText，而不是 .Net 库 iTextSharp；因此，请忽略这里的一些 Java 主义，一切都应该易于翻译。）

`RenderListener`要使用 iText(Sharp) 提取页面的内容，您可以使用解析器包中的类在对您选择的 a 进行一些预处理后将其提供给它。

在您只对文本感兴趣的上下文中，您最常使用 a`TextExtractionStrategy`派生`RenderListener`并添加一个方法`getResultantText`来从页面中检索聚合文本。

由于 iText 中文本解析的最初意图是实现此用例，因此大多数现有`RenderListener`示例都是`TextExtractionStrategy`实现，并且仅使文本可用。

因此，您将不得不实施您自己的`RenderListener`，您似乎已经相信了`TextWithPositionExtractionStategy`。

就像既有 a `SimpleTextExtractionStrategy`（通过对页面内容运算符的结构进行一些假设来实现）和 a `LocationTextExtractionStrategy`（没有相同的假设但稍微复杂一些），您可能希望从一个实现开始假设。

因此，就像在 的情况下一样`SimpleTextExtractionStrategy`，您在第一个简单的实现中期望转发给您的侦听器的文本呈现事件逐行到达，并且从左到右在同一行上。这样一来，一旦您发现水平间隙或标点，您就知道您当前的单词已经完成并且您可以对其进行处理。

与文本提取策略相比，您不需要`StringBuffer`成员来收集结果，而是需要一些“带有位置的单词”结构的列表。此外，您需要一些成员变量来保存`TextRenderInfo`您已经为此页面收集但最终无法处理的事件（您可以在几个单独的事件中检索一个单词）。

一旦你（即你的`renderText`方法）被调用一个新`TextRenderInfo`对象，你应该像这样操作（伪代码）：

```
if (unprocessedTextRenderInfos not empty)
{
    if (isNewLine // Check this like the simple text extraction strategy checks for hardReturn
     || isGapFromPrevious) // Check this like the simple text extraction strategy checks whether to insert a space
    {
        process(unprocessedTextRenderInfos);
        unprocessedTextRenderInfos.clear();
    }
}

split new TextRenderInfo using its getCharacterRenderInfos() method;
while (characterRenderInfos contain word end)
{
    add characterRenderInfos up to excluding the white space/punctuation to unprocessedTextRenderInfos;
    process(unprocessedTextRenderInfos);
    unprocessedTextRenderInfos.clear();
    remove used render infos from characterRenderInfos;
}
add remaining characterRenderInfos to unprocessedTextRenderInfos; 
```

在`process(unprocessedTextRenderInfos)`你从 unprocessedTextRenderInfos 中提取你需要的信息；您将单个文本内容连接到一个单词并获取所需的坐标；如果您只想要起始坐标，您可以从第一个未处理的 TextRenderInfos 中获取这些坐标。如果您需要更多数据，您还可以使用来自其他 TextRenderInfo 的数据。使用这些数据，您可以填写“带有位置的单词”结构并将其添加到您的结果列表中。

页面处理完成后，您必须再次调用 process(unprocessedTextRenderInfos) 和 unprocessedTextRenderInfos.clear(); 或者，您可以在`endTextBlock`方法中执行此操作。

完成此操作后，您可能会觉得已经准备好实现稍微复杂一点的变体，它对页面内容结构没有相同的假设。;)

# php - 使用 Date() 计算三个工作日前？

> ID：13714607
> 
> 赞同：5
> 
> 时间：2012-12-05T00:51:20.653
> 
> 标签：php

我希望获得三个工作日前的 PHP 日期。

我找到了许多通过各种文本方法获取日期的示例，但我找到的最接近的是[这个](https://stackoverflow.com/questions/12855585/how-to-check-if-a-date-is-three-days-before-today)，但它返回三个日期（不是一个日期，三天前），并且需要一个 get_holidays 函数，该函数的代码不是假如。

如何编写 PHP 代码以在今天前三个工作日返回？

这有效，但不考虑周/周末：

```
date('Y-m-d', strtotime('-3 days')); // returns 2012-12-01 
```

这不起作用，但这是我想看到的：

```
date('Y-m-d', strtotime('four week days ago')); 
```

事实上，上面的返回 '1969-12-31'。就像这样：`strtotime('-4 week days')`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T00:55:47.910

你可以一直往回走，直到你得到你想要的。我不确定这是最有效的方法，但它可以完成工作：

```
$count = 0
$day = strtotime('-1 day');
while ($count < 3 || date('N', $day) > 5) {
   $count++;
   $day = strtotime('-1 day', $day);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:07:36.897

最终答案：

对于像我这样的新手来说，这是使用 Explosion Pills 答案的工作代码：

```
function working_days_ago($days) {
    $count = 0;
    $day = strtotime('-1 day');
    while ($count < $days || date('N', $day) > 5) {
       $count++;
       $day = strtotime('-1 day', $day);
    }
    return date('Y-m-d', $day);
}

$three_days_ago = working_days_ago('3'); 
```

奇迹般有效 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T10:50:48.800

我从上述函数中得到了一些意想不到的结果，所以我写了这个。参数是天数、向前 (1) 或向后 (0) 以及日期。如果没有提供日期，将使用今天的日期：

```
// returned $date Y/m/d
function work_days_from_date($days, $forward, $date=NULL) 
{
    if(!$date)
    {
        $date = date('Y-m-d'); // if no date given, use todays date
    }

    while ($days != 0) 
    {
        $forward == 1 ? $day = strtotime($date.' +1 day') : $day = strtotime($date.' -1 day');
        $date = date('Y-m-d',$day);
        if( date('N', strtotime($date)) <= 5) // if it's a weekday
        {
          $days--;
        }
    }
    return $date;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-20T15:25:19.513

从今天起 3 天前：

```
$date = new DateTime();
$date->sub(new DateInterval('P3D'));
echo $date->format('Y-m-d') . "\n"; 
```

从特定日期起 3 天前：

```
$date = new DateTime('2000-01-20');
$date->sub(new DateInterval('P3D'));
echo $date->format('Y-m-d') . "\n"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-08-14T11:41:06.957

获取函数后的第二天↓</p>

```
function working_days($days){
            $day = strtotime(date('Y-m-d'));
            for ($x=0;$x<$days;$x++) {
                $day = strtotime('+1 day', $day);
                if (date('N', $day) > 6) {
                    $x = $x - 1;
                }
            }
            return date('Y-m-d',$day);
        }
       print_r( working_days(25));
    } 
```

# android - 差异剪辑未按预期工作

> ID：13714609
> 
> 赞同：1
> 
> 时间：2012-12-05T00:51:30.857
> 
> 标签：android, graphics

我正在尝试使用圆形倒置剪裁绘制蒙版位图。预期的效果应该看起来像太阳光线从圆的边缘向一个方向发光。掩蔽工作得很好，但剪掉内圈是行不通的。有什么我想念的吗？

这是 ImageView 的 onDraw 方法，带有一个额外的掩码位图。在 eclipse ADT 工具中预览视图时，使用此代码几乎可以正常工作（Xfermode 除外，它在预览中不受支持），但在设备上会忽略剪辑。

```
@Override
protected void onDraw(Canvas canvas) {

    if (originalBounds == null) {
        originalBounds = new Rect();
        getDrawingRect(originalBounds);

        maskDrawable.setBounds(originalBounds);
        maskBitmap = drawableToBitmap(maskDrawable, getWidth(),
                getHeight(), Config.ARGB_8888);
        bitmap = drawableToBitmap(getDrawable(), getWidth(), getHeight(),
                Config.ARGB_8888);

    }

    if (clipPath == null && clipPathRadius != 0) {
        clipPath = new Path();
        clipPath.addCircle(originalBounds.exactCenterX(),
                originalBounds.exactCenterY(), clipPathRadius,
                Path.Direction.CCW);

    }

    canvas.saveLayer(originalBounds.left, originalBounds.top,
            originalBounds.right, originalBounds.bottom, null,
            Canvas.MATRIX_SAVE_FLAG | Canvas.HAS_ALPHA_LAYER_SAVE_FLAG
                    | Canvas.FULL_COLOR_LAYER_SAVE_FLAG
                    | Canvas.CLIP_SAVE_FLAG
                    | Canvas.CLIP_TO_LAYER_SAVE_FLAG);

    if (clipPath != null) {
        canvas.clipPath(clipPath, Op.DIFFERENCE);
    }

    paint.setXfermode(null);
    canvas.drawBitmap(bitmap, null, originalBounds, paint);

    paint.setXfermode(xfermode);
    canvas.saveLayer(originalBounds.left, originalBounds.top,
            originalBounds.right, originalBounds.bottom, paint,
            Canvas.MATRIX_SAVE_FLAG | Canvas.HAS_ALPHA_LAYER_SAVE_FLAG
                    | Canvas.FULL_COLOR_LAYER_SAVE_FLAG
                    | Canvas.CLIP_SAVE_FLAG
                    | Canvas.CLIP_TO_LAYER_SAVE_FLAG);

    paint.setXfermode(null);
    canvas.rotate(maskRotation, originalBounds.exactCenterX(),
            originalBounds.exactCenterY());
    if (clipPath != null) {
        canvas.clipPath(clipPath, Op.DIFFERENCE);
    }
    canvas.drawBitmap(maskBitmap, null, originalBounds, paint);
    canvas.rotate(0, originalBounds.exactCenterX(),
            originalBounds.exactCenterY());
    canvas.restore();
    canvas.restore();

} 
```

这是预览显示的内容，可以清楚地看到中间的圆圈被剪掉了，但这在设备上并没有发生：

![在此处输入图像描述](../Images/bb9cfae835f081fd51e01fa9c2e37ccc.png)

# jsf-2 - 为什么？- completeMethod="#{testBean.itemList}"：找不到方法

> ID：13714611
> 
> 赞同：3
> 
> 时间：2012-12-05T00:51:53.210
> 
> 标签：jsf-2, autocomplete, primefaces

我需要您的集体专业知识... *（感谢您为我提供的任何指导！！）*

***问题：*** 我的 PrimeFaces“ ***p:autocomplete ”标签在“*** ***completeMethod*** ”属性上生成“ ***Method not found*** ”错误……但是，这个方法显然存在于“ ***TestBean*** ”支持 bean 中！

 *****问题：*** 错误的原因是什么？
*（FWIW：使用这个标签似乎是一个相当直观的任务......起初。--但是，我显然从根本上误解了一些东西......我只是不知道是什么）。*

***这是错误消息...***

```
WARNING: /index.xhtml @17,215 completeMethod="#{testBean.itemList}": Method not found: aaa.bbb.ccc.war.TestBean@13a494d.itemList(java.lang.String)
javax.el.MethodNotFoundException: /index.xhtml @17,215 completeMethod="#{testBean.itemList}": Method not found: aaa.bbb.ccc.war.TestBean@13a494d.itemList(java.lang.String)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:109)
    at org.primefaces.component.autocomplete.AutoComplete.broadcast(AutoComplete.java:358) 
```

**这是包含 p:autocomplete 标记的 facelet 页面...**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:util="http://java.sun.com/jsf/composite/util"      
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">      
    <f:view contentType="text/html">
        <h:head>
            <title>testprimeac</title>
            <meta charset="utf-8" />
        </h:head>
        <h:body>
            <h:form id="form1">
                <p:autoComplete id="abc"  dropdown="true" value="#{testBean.item}" completeMethod="#{testBean.itemList}" var="item" itemLabel="#{item.itemLabel}" itemValue="#{item.itemValue}" forceSelection="true"></p:autoComplete>
            </h:form>
        </h:body>
    </f:view>
</html> 
```

**这是包含有问题的方法的“TestBean”支持bean *（或者我认为）* ......**

```
package aaa.bbb.ccc.war;

import java.io.IOException;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.logging.Level;
import javax.faces.context.FacesContext;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component("testBean")
@Scope("request")
public class TestBean implements Serializable
{
    public TestBean()
    {
    }

    private static final Map<String, String> listBoxEntryMap;
    static
    {
        Map<String, String> m = new LinkedHashMap<String, String>();
        m.put("aaavalue", "aaalabel");
        m.put("bbbvalue", "aablabel");
        m.put("cccvalue", "abblabel");
        m.put("dddvalue", "bbblabel");
        m.put("eeevalue", "bbclabel");
        m.put("fffvalue", "bcclabel");
        m.put("gggvalue", "ccclabel");
        m.put("hhhvalue", "ccalabel");
        m.put("iiivalue", "caalabel");
        m.put("jjjvalue", "aaclabel");
        m.put("kkkvalue", "acclabel");
        m.put("lllvalue", "bbalabel");
        m.put("mmmvalue", "baalabel");

        listBoxEntryMap = Collections.unmodifiableMap(m);
    }

    private Item item;
    public Item getItem()
    {
        return this.item;
    }

    public void setItem(Item i)
    {
        this.item = i;
    }    

    private static List<Item> itemList = new ArrayList<Item>();
    public void setItemList(List<Item> data) throws IOException
    {
        itemList = (null==data?new ArrayList<Item>():data);
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("itemList",itemList);   
    }
    public static List<Item> getItemList()
    {
        if (null==itemList)
        {
            try
            {
                if (FacesContext.getCurrentInstance().getExternalContext().getSessionMap().containsKey("itemList"))
                {
                    itemList = (List<Item>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("itemList");            
                }

                if (null == itemList || itemList.isEmpty())
                {
                    itemList = getListOfItems();
                    FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("itemList",itemList);            
                }

                return itemList; //(list);
            }
            catch (Exception ex)
            {
                java.util.logging.Logger.getLogger(TestBean.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        return itemList;
    }

    public static List<Item> getItemList(String s)
    {
        itemList = getItemList();
        List<Item> suggestions = new ArrayList<Item>();

        for (Item i : itemList)
        {
            if (i.getItemLabel().startsWith(s))
            {
                suggestions.add(i);
            }
        }

        return suggestions;
    }    

    public static List<Item> getListOfItems()
    {
        List<Item> list = null;
        try
        {
            Map<String, String> map = listBoxEntryMap;
            Iterator iter = map.keySet().iterator();

            list = new ArrayList<Item>();

            while (iter.hasNext())
            {
                String key = (String) iter.next();
                String val = (String) map.get(key);
                list.add(new Item(key,val));
            }
        }
        catch (Exception e)
        {
            System.out.println("Exception during query call..." + e.getMessage());
            e.printStackTrace();
        }

        return (null==list?new ArrayList<Item>():list);
    }
} 
```

**这是与自动完成一起使用的“项目”pojo 类 *（值和标签都是字符串，我认为这意味着不需要“转换器”类）**

```
package aaa.bbb.ccc.war;

public class Item
{
    public Item()
    {
    }
    public Item(String l, String v)
    {
        this.itemLabel = (null == l ? "" : l);
        this.itemValue = (null == v ? "" : v);
    }
    private String itemLabel = "";
    private String itemValue = "";
    @Override
    public String toString()
    {
        return (null == this.itemValue ? "" : this.itemValue);
    }
    public String getString()
    {
        return (null == this.itemValue ? "" : this.itemValue);
    }
    public String getItemLabel()
    {
        return (null == this.itemLabel ? "" : this.itemLabel);
    }
    public void setItemLabel(String s)
    {
        this.itemLabel = s;
    }
    public String getItemValue()
    {
        return (null == this.itemValue ? "" : this.itemValue);
    }
    public void setItemValue(String s)
    {
        this.itemValue = s;
    }
} 
```

**FWIW - 这是构建 pom.xml，用于查看使用的依赖项/版本...**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>aaa.bbb.ccc</groupId>
    <artifactId>testprimeac-war</artifactId>
    <packaging>war</packaging>
    <version>1</version>
    <name>testprimeac-war</name>
    <url>http://maven.apache.org</url>
    <properties>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <jsf-version>2.1.11</jsf-version>
    </properties>    
    <dependencies>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>                
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.11</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.11</version>
        </dependency>
        <dependency>
            <groupId>javax.el</groupId>
            <artifactId>el-api</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>el-impl</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>        
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.2</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
            </plugin>
        </plugins>
        <finalName>testprimeac-${project.version}</finalName>       
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:23:10.893

completeMethod 必须计算为 MethodExpression。

参见 vdl[文档](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/autoComplete.html)

因此，将其更改为 itemList() 而不是 getter。

更多信息：

*   [https://community.jboss.org/wiki/ExpressionLanguageFAQ](https://community.jboss.org/wiki/ExpressionLanguageFAQ)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-27T13:22:57.167

试试这个

```
private static List<Item> itemList;
 public TestBean(){
    itemList = new ArrayList<Item>();
 } 
```**

# database - 我应该在哪里保存半临时数据库？

> ID：13714613
> 
> 赞同：2
> 
> 时间：2012-12-05T00:51:58.497
> 
> 标签：database, delphi, directory, temporary

我有一个应用程序，我想将一些原始文件保存在客户端计算机上的文件夹结构中。此 EXE 是完全独立的，可能从 CD 运行，或者从只读位置运行。因此，我无法将数据保存在 EXE 位置。我想基本上“询问”Windows 我应该将文件保存在哪里，或者将它们保存在正确的位置。

我应该将这些数据永久保存在客户端计算机上的什么位置，但又应该保存在应用程序通常存储其数据的位置？由于此应用程序没有安装程序，因此我不知道某些程序数据文件夹的权限将如何发挥作用。我需要一个为我的应用程序生成公共路径的示例。在同一台机器上运行的任何应用程序实例都应该知道在这个专用位置查找此数据。

PS - 我的意思是半临时数据库，因为该数据库预计会在很长一段时间内保持完整，但是有可能它可能会被删除以进行清理，在这种情况下它会自动创建一个新数据库。数据本身可以被视为某种缓存。

编辑

就 windows 用户会话而言，这旨在成为任何 windows 会话的全局位置，并且此应用程序实际上是一个将在会话 0 中运行的服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T01:20:06.820

请参阅[MSDN CSIDL 列表](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)并使用[SHGetFolderPath() 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)。

将 CSIDL CSIDL_COMMON_APPDATA 映射到物理目录。

来自 MSDN：

> 包含所有用户的应用程序数据的文件系统目录。典型路径是 C:\Documents and Settings\All Users\Application Data。此文件夹用于存储非用户特定的应用程序数据。例如，应用程序可以在 CSIDL_COMMON_APPDATA 文件夹中存储拼写检查字典、剪贴画数据库或日志文件。此信息不会漫游，任何使用计算机的人都可以使用。

在此目录下，创建一个以供应商（您的公司）命名的目录，并在该目录下为您的应用程序创建一个目录。然后把你的数据库放在那里。

**注意：**不要使用 CSIDL_COMMON_DOCUMENTS/FOLDERID_PublicDocuments。这适用于可以在不同应用程序之间共享的类似文档的文件。对于专有数据，如数据库，使用 CSIDL_COMMON_APPDATA 。此外，CSIDL_COMMON_DOCUMENTS 中的文件可能会被操作系统“漫游”——对于临时数据库，您**绝对不希望这样做。**

**注意：**对于 Vista 及以上版本，请使用[SHGetKnownFolderPath()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)，但对于 XP 或跨版本，请使用 SHGetFolderPath()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T13:30:34.967

由于您在谈论临时数据，因此最明显的路径是 windows 临时目录：

```
function GetTempDirectory: String;
var
  TempFolder: array[0..MAX_PATH] of Char;
begin
  GetTempPathW(MAX_PATH, @TempFolder);
  Result := TempFolder;
end; 
```

只要应用程序处于活动状态，请确保您的文件保持打开状态，以便用户在决定清理临时目录时无法删除您的文件。

# java - 执行外部 .class 文件？

> ID：13714617
> 
> 赞同：1
> 
> 时间：2012-12-05T00:52:51.133
> 
> 标签：java, reflection, external, execute

所以，我有一个`.class`文件，以及它的绝对路径，我需要知道你将如何`.class`从 Java 内部执行该文件。如果我也能从中得到一个`Class`对象，那就太好了。

我知道 中的`loadClass`方法`ClassLoader`，但它需要文件的“二进制名称”。我不确定是否可以获得外部`.class`文件的二进制名称，但如果可以的话，那将非常有用！但是，如果没有，还有其他方法可以执行或获取外部`.class`文件的实例吗？

```
/*For those of us who work better with examples..
Let's say I have a .class file located at C:/Users/USER/Desktop. So..*/

String absolutePath = "C:/Users/USER/Desktop/FILE.class";

/*Now, having that, how would I get an instance of that class, or,
at least, execute it?*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:55:01.520

诀窍是访问 ClassLoader 的 defineClass 方法。假设您想动态加载实现已知接口的随机类文件（如果您不知道接口，您将使用反射 api 来查找和调用方法）。

```
package com.example.fileclassloader;

public interface Dynamo {
    public Integer beDynamic(String s);
} 
```

某处是实现该接口的编译类。它可能看起来像：

```
public class Sample implements com.example.fileclassloader.Dynamo {

  public Integer beDynamic(String s) {
    System.out.println(String.format("The value is: %s", s));
    return s.length();
  }
} 
```

现在要使用它，我们需要扩展一个类加载器，以便我们可以访问 defineClass 方法。这将只接受文件名，加载字节并创建实例：

```
package com.example.fileclassloader;

import java.io.File;
import java.io.IOException;
import java.security.SecureClassLoader;

public class MyDynamoClassLoader extends SecureClassLoader {

       public Object createObjectFromFile(String fileName) throws 
                InstantiationException, IOException, IllegalAccessException {

            File file = new File(fileName);
            byte[] classBytes =     
            org.apache.commons.io.FileUtils.readFileToByteArray(file);
            Class<?> clazz = defineClass(null, classBytes, 0, classBytes.length);
            return clazz.newInstance();
        }
} 
```

现在我们需要使用动态加载的类实例。我们将它转​​换为我们期望它符合的接口，并像使用该接口的任何其他实例一样使用它：

```
package com.example.fileclassloader;

import java.io.FileNotFoundException;
import java.io.IOException;

public class App {

    public static void main() throws FileNotFoundException, IOException, 
                           InstantiationException, IllegalAccessException {

        String fname = "target/classes/com/example/fileclassloader/Sample.class";

        MyDynamoClassLoader loader = new MyDynamoClassLoader();
        Dynamo dynamo = (Dynamo) loader.createObjectFromFile(fname);
        Integer i = dynamo.beDynamic("Testing");

        System.out.println(String.format("Dynamo (%s) returned %d", fname, i));

    }

} 
```

为了更好地衡量，这里是构建它的 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>fileclassloader</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.4</version>
        </dependency>
    </dependencies>
</project> 
```

# javascript - 如何访问动态创建的对象

> ID：13714618
> 
> 赞同：2
> 
> 时间：2012-12-05T00:52:55.390
> 
> 标签：javascript, jquery

我正在动态创建一个对象。我想知道如何访问它？其中一些对象需要通过单击以外的其他方式隐藏（以编程方式，按钮单击、链接等）。所以我不认为我可以使用.on。我将如何访问这些以隐藏它们？

```
$(document).ready(function() {
$('body').append('<div id="testdiv">Test DIV</div>');

}); 

$('#testdiv').hide(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:56:30.093

你颠倒你的逻辑。而不是`.append()`，您应该使用`.appendTo()`

```
var myRef = $("<div id=\"testdiv\">Test DIV</div>").appendTo( document.body ); 
```

这样，您可以保留对新创建的*DOM 节点*/ *jQuery 对象*的引用。

```
myRef.hide(); 
```

* * *

将缓存的引用存储到变量中*总是更好，这样您就可以从纯**ECMA 土地*访问节点，可以这么说。*重新查询*DOM 节点的需要只是效率低得多。

^(需要注意的一点：由`var`do 声明的变量只有自己的*函数范围*。这意味着如果您想从*准备好的处理程序*的“外部”访问该引用，则需要在父上下文中声明该变量。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T00:56:27.857

您已经拥有的应该可以工作，除非您需要`$('#testdiv').hide();`在准备好的文档中移动（因此您不会在创建元素之前调用它）。

另一个答案是一种更清洁的方式，以及我会这样做的方式。

# django - Django ModelForm 给了我一个没有意义的验证错误

> ID：13714622
> 
> 赞同：0
> 
> 时间：2012-12-05T00:53:00.413
> 
> 标签：django, modelform, django-forms

我有一个基于图片的 ModelForm。

```
class Picture(models.Model):
    name = models.CharField(max_length=100)
    pub_date = models.DateTimeField('date published')
    tags = models.ManyToManyField('Tag', blank=True)
    content = models.ImageField(upload_to='instaton')

    def __unicode__(self):
        return self.name

class PictureForm(forms.ModelForm):
    class Meta:
        model = Picture
        exclude = ('pub_date','tags') 
```

当然，这就是模型和 ModelForm。

```
def submit(request):
    if request.method == 'POST': # if the form has been submitted
        form = PictureForm(request.POST)
        if form.is_valid():
            return HttpResponseRedirect('/django/instaton')
    else:
        form = PictureForm() # blank form
    return render_to_response('instaton/submit.html', {'form': form}, context_instance=RequestContext(request)) 
```

这就是视图（由 urls.py 正确链接到）

现在，当表单提交时，我什么都不做。我只是检查以确保它是有效的。如果是，我转发到应用程序的主页。

```
<form action="/django/instaton/submit/" method="post"> {% csrf_token %}
{{ form.as_p }}
<input type="submit" value"Submit" />
</form> 
```

还有我的模板（在正确的位置）。

当我尝试实际填写表单并验证它时，即使我这样做正确，它也会将我发送回表单并在名称和内容之间显示“此字段是必需的”。我认为它指的是内容，但我不确定。

我的问题是什么？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:08:45.650

您需要在表单中包含文件

```
form = PictureForm(request.POST, request.FILES) 
```

# ios - 如何添加多个按钮 iOS > 4？

> ID：13714623
> 
> 赞同：1
> 
> 时间：2012-12-05T00:53:02.977
> 
> 标签：ios, uinavigationbar, uibarbuttonitem

如何在 iOS > 4 的导航栏中添加多个按钮？

对于 iOS > 5，我知道有这方面的属性，但 iOS 4 如何也支持它？

已经搜索了一个解决方案，并且有一篇文章建议使用分段控件，但我希望我的 2 个按钮看起来是分开的。

我能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:28:52.483

您可以使用一些自定义按钮并在导航栏上添加，因为`[navigationBar addSubview:customButton];`您不能以`UIBarButtonItem`这种方式添加，因为它不是`UIView`，可能您需要仅使用一个段或自定义的 segmentControl `UIButton`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:10:51.640

由于评论中的 AnkurArya 链接消失了，我在这里发布我的解决方案：

```
 self.firstButton = 
      [[[UIButton alloc] initWithFrame:CGRectMake(0, 6, 36, 32)] autorelease];
  self.secondButton = 
      [[[UIButton alloc] initWithFrame:CGRectMake(38, 6, 36, 32)] autorelease];

  UIView *rightView = 
      [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 75, 44)] autorelease];
  rightView.backgroundColor = [UIColor clearColor];
  [rightView addSubview:firstButton_];
  [rightView addSubview:secondButton_];
  self.navigationItem.rightBarButtonItem = 
      [[[UIBarButtonItem alloc] initWithCustomView:rightView] autorelease]; 
```

# mysql - mysql案例多变量

> ID：13714624
> 
> 赞同：0
> 
> 时间：2012-12-05T00:53:07.033
> 
> 标签：mysql, if-statement, case

我需要指示查询（在底部）返回基于以下内容转换为命名结果的 QUARTER 值：03 = 1st、06 = 2nd、09 = 3rd 和 12 = 4th。所以，我在运行查询时要寻找的是“QUARTER”列返回“1st”而不是“03”。谢谢...

查询结果

```
Year    Quarter  Quarterly_yield
2012      03         8.41
2012      06         -0.71
2012      09         0.03
2012      12         3.43 
```

查询

```
select    RIGHT(A.F_ANOTRIMESTRE, 2) Quarter,
          LEFT(A.F_ANOTRIMESTRE, 4) Year,
          ROUND(A.POR_RENTABILIDAD, 2) Quarterly_yield
from      dr_rent_carteras_trimestres A

Order by A.F_ANOTRIMESTRE asc 
```

*注意：标题为“F_ANOTRIMESTRE”的第一个字段包含 YEARQUARTER 值，因此我使用 RIGHT 仅选择 Quarter 值。

# jquery - tablesorter：按 unix 秒排序，但按特定日期格式显示

> ID：13714625
> 
> 赞同：1
> 
> 时间：2012-12-05T00:53:27.660
> 
> 标签：jquery, tablesorter

我从 Pubmed 网站拉到我的网页上的日期不一致。日期可能看起来像 2012 年 7 月、2012 年 7 月 15 日、2012 年 7 月 15-26 日或 2012 年。我可以在 PHP 中将它们转换为 UNIX 秒数，并使排序变得容易，但显然对我们人类不友好。基本上我的 HTML 看起来像：

```
<td>1341126000</td>
<td>1338534000</td>
<td>1322726400</td>
<td>1314860400</td> 
```

ETC...

有没有办法使用 Tablesorter 按 unix 秒（数字）排序，并以某种方式将这些 UNIX 秒转换为干净的数据格式，例如 mm/YYYY 或 YYYY-mm？

或者，有没有办法编写一个友好的 Tablesorter 解析器，可以对日期格式字符串进行排序，例如：

```
2012 Dec
2012 Mar
2011 Aug
2009 July
2009 Jan 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:44:45.170

我解决了我自己的问题。我能够使用 Tablesorter 叉子，这是类固醇上的 Tablesorter！！！！它的 github 页面有我需要的*完美示例。*

[http://mottie.github.com/tablesorter/docs/example-parsers-advanced.html](http://mottie.github.com/tablesorter/docs/example-parsers-advanced.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:00:14.550

如果您使用此表排序器：

[https://github.com/briancray/taboosorter](https://github.com/briancray/taboosorter)

然后你可以使用：`<td data-sortval="seconds_since_epoch">display_time</td>`。

如果存在，它将自动默认按 data-sortval 中的事物排序。

# ios - MKMapView 响应触摸，即使它位于注释后面

> ID：13714627
> 
> 赞同：0
> 
> 时间：2012-12-05T00:54:15.117
> 
> 标签：ios, mapkit

我有一个占据大部分屏幕的自定义注释视图。在里面我有一个 UITableView 和一些标签。

UITableView 正确处理单元格选择。但是，如果我双击 UITableView 或自定义注释视图上的任何位置，地图将会缩放。

首先，我很想了解这是如何发生的。其次，如何阻止它发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:48:24.873

我想我已经想通了。正在发生的事情是 MKMapView 附加了手势识别器。

我通过继承 MKMapView 并实现 shouldReceiveTouch 解决了部分问题。双击仍然可以通过注释视图，但这不是问题。真正的可用性问题是单击。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    UIView * v = touch.view;
    while( v ){
    if( [v isKindOfClass:[SPAnnotationView class]] ){
        SPAnnotationView * aV = (SPAnnotationView *)v;
        if( [aV isExtendedAnnotation]){
            return NO;
        }
    }
        v = v.superview;
    }

    return [super gestureRecognizer:gestureRecognizer shouldReceiveTouch:touch];

   } 
```

# jquery - 如何解析 url 以使用 jQuery 触发点击功能？

> ID：13714633
> 
> 赞同：0
> 
> 时间：2012-12-05T00:54:48.953
> 
> 标签：jquery, parsing, tabs

例如，当浏览器地址栏中的 url 为 时[`http://fiddle.jshell.net/ynts/s5S6U/show/light/#header2-tab3-p2`](http://fiddle.jshell.net/ynts/s5S6U/show/light/#header2-tab3-p2)，应执行以下操作：

1.  点击`a href="#header2"`元素
2.  点击`a href="#tab3"`元素
3.  点击`a href="#p2"`元素

* * *

***我需要什么？***

我以前[的问题](https://stackoverflow.com/questions/13485337/how-to-modify-jquery-tabs-script-to-work-with-nested-tabs)已作为克隆关闭。但是，我仍然需要有关此嵌套选项卡问题的帮助。我认为我找到了一种通过 url 解析技巧来解决这个问题的方法。

我有这个代码：

```
<ul class='headers'>
    <li><a href='#header1'>→ header 1</a></li>
    <li><a href='#header2'>→ header 2</a></li>
    <li><a href='#header3'>→ header 3</a></li>
</ul>
<div id='header1'>
    Hi, this is header1.<hr>
</div>
<div id='header2'>
    This is the header2.<hr>
    <ul class='tabs'>
        <li><a href='#tab1'>header2 → tab1</a></li>
        <li><a href='#tab2'>header2 → tab2</a></li>
        <li><a href='#tab3'>header2 → tab3</a></li>
    </ul>
    <div id='tab1'>
        This is tab1.<hr>
    </div>
    <div id='tab2'>
        This is tab2.<hr>
    </div>
    <div id='tab3'>
        This is tab3.<hr>
        <ul class='ps'>
            <li><a href='#p1'>header2 → tab2 → p1</a></li>
            <li><a href='#p2'>header2 → tab2 → p2</a></li>
        </ul>
        <div id='p1'>
            This is p1.<hr>
        </div>
        <div id='p2'>
            This is p2.<hr>
        </div>
    </div>
</div>
<div id='header3'>
    And this is header3.<hr>
</div>

<div class="helpers">
    <p id="header1-tab1"></p>
    <p id="header1-tab2"></p>
    <p id="header1-tab3"></p>    
    <p id="header2-tab3-p1"></p>
    <p id="header2-tab3-p2"></p>
</div> 
```

* * *

```
$.fn.myTabs = function() {

    return this.each(function() {

        // For each set of tabs, we want to keep track of
        // which tab is active and it's associated content
        var $active, $content, $links = $(this).find('a');

        // If the location.hash matches one of the links, use that as the active tab.
        // If no match is found, use the first link as the initial active tab.
        $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
        $active.parent('li').addClass('active');
        $content = $($active.attr('href'));

        // Hide the remaining content
        $links.not($active).each(function () {
                $($(this).attr('href')).hide();
        });

        // Bind the click event handler
        $(this).on('click', 'a', function(e){
                // Make the old tab inactive.
                $active.parent('li').removeClass('active');
                $content.hide();

                // Update the variables with the new link and content
                $active = $(this);
                $content = $($(this).attr('href'));

                // Make the tab active.
                $active.parent('li').addClass('active');
                $content.show();

                // Prevent the anchor's default click action
                e.preventDefault();
        });
    });

};

$('.headers, .tabs, .ps').myTabs();
​ 
```

* * *

**带有此代码和一些样式的 jsfiddle：[jsfiddle.net/ynts/s5S6U](http://jsfiddle.net/ynts/s5S6U/)。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:02:12.677

鉴于：

```
<a class="blah" href="/#header2-tab3-p2">Click me</a> 
```

...做：

```
$('a.blah').click(function(){
    // Grab href, shave first two chars off, split on "-", operate on each
    var hrefs = $(this).attr('href').substr(2).split('-');
    $(hrefs).each(function(){
        $('a[href="#' + $(this) + '"]').trigger('click');
    });
}); 
```

那应该工作

# php - mySQL Like $query - 使用 GET 变量作为 %LIKE% 值

> ID：13714638
> 
> 赞同：0
> 
> 时间：2012-12-05T00:55:21.260
> 
> 标签：php, mysql, sql-like

我正在使用一个 mySQL 查询，它目前只在其中查找一个值；

```
 "SELECT * FROM $usertable WHERE tabID LIKE '%spotlight%'"; 
```

它位于 index.php 上，效果很好，但是我希望搜索值“spotlight”不要被硬编码，但它是从 URL 实现的

所以当我去

```
index.php?type=spotlight 
```

生病得到聚光灯。当我去

```
index.php?type=lamps 
```

我会买灯

**我有玩家在玩这个**，我相信我一直在努力做这样的事情......

```
$product_type = $_GET['type'];

       //*    and then lower down where the query sits *\\

"SELECT * FROM $usertable WHERE tabID LIKE '%$product_type%'"; 
```

但它真的不喜欢这样，并显示了 $usertable 的所有值

任何帮助将不胜感激

问候

亨利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:29:36.623

```
"SELECT * FROM $usertable WHERE tabID LIKE '$type'"; 
```

删除 % 虽然更改了搜索条件，但必须完全包含，但成功了。

# c++ - 静态整数

> ID：13714641
> 
> 赞同：1
> 
> 时间：2012-12-05T00:55:42.527
> 
> 标签：c++, static, scope

我想知道静态是如何工作的。这是一个例子：

```
void count()
{
    static int x = 1;
    cout << "Static: " << x << endl;
    x++;

    return;
}

int main()
{
    //Static variable test
    cout << endl;
    count();
    count();
} 
```

该程序给出“1 和 2”的输出。但是我想知道第二次调用函数“count”时，为什么不执行“static int x = 1”行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T00:57:23.377

这是语言规则；变量的初始化`static`只执行一次。

请注意，这不同于

```
static int x;
x = 1; 
```

这将`x`在每次调用中重置为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T01:03:47.420

静态局部变量有点像全局变量，只是编译器只允许一个函数访问它。所有静态分配的对象（内置或用户定义的类型），包括结构/类的静态成员变量，在调用您的 main() 函数之前由系统初始化一次。您可以通过创建一个类的全局（或静态文件范围）实例，并在类构造函数中做一些有趣的事情来利用这个特性（或者如果您不知道发生了什么，可以得到一些奇怪的行为）。该代码将在 main() 启动之前运行。

但是....你必须小心这样做。没有强制这些初始化对象的顺序的标准方法，所以如果一个依赖于另一个已经初始化的对象，那么当您更改编译器或编译器选项或添加/删除时，有一天“工作正常”可能会开始“工作不正常”源文件等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T00:56:49.167

这就是规则所说的。您可以认为该`static`行仅在第一次调用该函数时执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T00:57:24.170

这是。否则你根本无法读取 的值`x`。但是，它不会设置`x`if 它已被创建的值。

# c++ - 这个代码线程安全吗？如果不是，它何时以及如何出错？

> ID：13714642
> 
> 赞同：3
> 
> 时间：2012-12-05T00:55:41.950
> 
> 标签：c++, multithreading

好的，所以我被告知此代码不是线程安全的。

```
#include <iostream>
#include <thread>

static int sum[5];

static int get_sum()
{
    int x=0;
    for (int j=0;j<5;++j)
        x += sum[j];
    return x;
}

static void f1(int x){
    sum[x] = 1;
    std::cout << "f" <<x << ": " << sum[x] << " : " << get_sum() << std::endl;
}

int main()  {

    for (int j=0;j<5;++j)
        sum[j] = 0;

    std::thread t0(f1, 0);
    std::thread t1(f1, 1);
    std::thread t2(f1, 2);
    std::thread t3(f1, 3);
    std::thread t4(f1, 4);

    while (get_sum() != 5)  ;

    t0.join();
    t1.join();
    t2.join();
    t3.join();
    t4.join();

    std::cout << "final: " << get_sum() << std::endl;
} 
```

有人可以向我解释为什么该程序可能无法完成吗？我知道 get_sum 的运行值将是不确定的，并且 cout 的输出将随机交错，但这与程序完成无关。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T00:58:28.210

一个值可能无法在一个线程中访问，而可能在另一个线程中被修改。这就是规则。

我们可以推测特定平台上可能出现的特定问题。但通常这并没有什么帮助，因为它让人们认为，如果他们能够解决他们认为可能出错的所有可能方式，那么他们的代码就可以了。但事实并非如此——事情可能而且确实会以您当时无法想到的方式出错。请不要开始这样想。这种推理导致的失败列表很长，不需要再找了。

这是它可能失败的一种方式：编译器可能会在循环`get_sum`之前内联并将所有值复制到寄存器中`while`，从而导致循环永远重复。这是一种合法的优化，因为编译器可以看到您的代码可以在循环期间的任何时间读取任何这些值`while`，因此在该循环期间不允许其他线程修改它们。

现在，如果您阅读此问题和答案，您会发现很多人无法想到这样的代码可能会出错。但这没关系，他们不必这样做。之所以存在这些规则，是因为很难，甚至不可能考虑代码可能出错的所有可能方式。所以不要让你的代码的正确性依赖于你拥有这种超人的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:03:06.860

该程序格式错误，因为它具有未定义的行为，因为在访问每个单独的数组元素时存在数据竞争，每个数组元素都可以同时访问`f1`并且`getsum`没有任何同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:02:08.923

这是不安全的。因为多个线程正在访问全局总和。get_sum() 可能在其他线程写入相对位置之前或之后读取 sum[x] 不确定。

为了多线程安全，共享资源应该被锁保护，比如互斥锁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T20:59:27.690

数组总和有问题

# templates - xslt 条件增量

> ID：13714647
> 
> 赞同：2
> 
> 时间：2012-12-05T00:55:49.017
> 
> 标签：templates, xslt, sorting, conditional, increment

我在某些条件下增加计数器时遇到问题。

输入：

```
<Users>
  <User>
    <id>1</id>
    <username>jack</username>
  </User>
  <User>
    <id>2</id>
    <username>bob</username>
  </User>
  <User>
    <id>3</id>
    <username>bob</username>
  </User>
  <User>
    <id>4</id>
    <username>jack</username>
  </User>
</Users> 
```

想要的输出：

```
<Users>
  <User>
    <id>1</id>
    <username>jack01</username>
  </User>
  <User>
    <id>2</id>
    <username>bob01</username>
  </User>
  <User>
    <id>3</id>
    <username>bob02</username>
  </User>
  <User>
    <id>4</id>
    <username>jack02</username>
  </User>
</Users> 
```

为了完成这个，可以使用以下算法：

*   按用户名排序输入
*   对于每个用户
    *   当以前的用户名等于当前用户名时
        *   递增计数器和
        *   将用户名设置为 '$username$counter'
    *   除此以外
        *   将计数器设置为 1
*   （再次按 id 排序 - 没有必要）

所以我尝试将其转换为 XSLT：

```
 <xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="Users">
    <Users>
    <xsl:apply-templates select="create_user">
      <xsl:sort select="User/username"/>
    </xsl:apply-templates>
    </Users>
  </xsl:template>

  <xsl:template match="create_user">
    <id><xsl:value-of select="id"/></id>
    <xsl:choose>
      <xsl:when test="username=(preceding-sibling::User[1]//username)">
        <xsl:variable name="count">
          <xsl:number format="01"/>
        </xsl:variable>
        <username><xsl:value-of select="concat(username, $count)"/></username>
      </xsl:when>
      <xsl:otherwise>
        <xsl:variable name="count">
          <xsl:number value="1" format="01"/>
        </xsl:variable>
        <username><xsl:value-of select="concat(username, $count)"/></username>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

但是，通过执行此操作，我得到以下错误：

*   用户名不排序
*   计数器不增加
    *   相反，当条件匹配时，计数器将是当前节点位置。
    *   对于我们的示例，id = 3 的节点的用户名 = bob03
*   标签丢失

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T04:33:57.170

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="username/text()">
  <xsl:value-of select="."/>
  <xsl:value-of select=
  "format-number(count(../../preceding-sibling::*[username=current()])+1,
                '00')
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Users>
    <User>
        <id>1</id>
        <username>jack</username>
    </User>
    <User>
        <id>2</id>
        <username>bob</username>
    </User>
    <User>
        <id>3</id>
        <username>bob</username>
    </User>
    <User>
        <id>4</id>
        <username>jack</username>
    </User>
</Users> 
```

**产生想要的正确结果**：

```
<Users>
   <User>
      <id>1</id>
      <username>jack01</username>
   </User>
   <User>
      <id>2</id>
      <username>bob01</username>
   </User>
   <User>
      <id>3</id>
      <username>bob02</username>
   </User>
   <User>
      <id>4</id>
      <username>jack02</username>
   </User>
</Users> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:44:23.077

“增加计数器”不是您在函数式编程语言中所做的。您需要将所需的输出描述为输入的函数（正如 Dimitre 所做的那样），而不是描述用于计算输出的过程或过程。

# android - 使用 MyApplication 类在 SQLiteDatabase 上使用 MySQLiteHelper 中的方法

> ID：13714648
> 
> 赞同：1
> 
> 时间：2012-12-05T00:56:06.473
> 
> 标签：android, sql

因此，我试图从 MySQLiteHelper 类访问我的自定义函数，该活动从 MyApplication 中提取应用程序范围的数据库，但 Eclipse 说我的方法无法被 SQLiteDatabase 类识别（这就是 db ）。如何转移我的方法以便在我的数据库中使用它们？

```
 public class MyApplication extends Application {

        private static SQLiteDatabase db = null;

        @Override
        public void onCreate() {
            super.onCreate();
        MySQLiteHelper SQLiteHelper = new MySQLiteHelper( this );
        db = SQLiteHelper.getWritableDatabase();
        }

        public static SQLiteDatabase getDB() {
            return db;
        }
    } 
```

这是活动：

```
 public class MainActivity extends Activity {
        MyApplication app;
        private SQLiteDatabase db;
        int sessionNo;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity);
            app = (MyApplication) getApplication();
            db = MyApplication.getDB();
    // it's complaining about the following line because getLastSession is in my MySQLiteHelper class:
            sessionNo = db.getLastSession() + 1; 
        } 
```

MySQLiteHelper 类的功能：

```
 public class MySQLiteHelper extends SQLiteOpenHelper {

            public static final String TABLE_RECORDS = "records";
        public static final String COLUMN_ID = "_id";
        public static final String COLUMN_SESSION = "session";
        public static final String COLUMN_ROUNDNO = "roundno";
        public static final String COLUMN_ARROWS = "arrows";
        public static final String COLUMN_ROUNDSUM = "roundsum";
        public static final String COLUMN_ROUNDAVE = "average";

        private static final String DATABASE_NAME = "records.db";
        private static final int DATABASE_VERSION = 1;

        // Database creation sql statement
        private static final String DATABASE_CREATE = "create table "
                + TABLE_RECORDS + "(" + COLUMN_ID
                + " integer primary key autoincrement, " + COLUMN_SESSION
                + " integer, " + COLUMN_ROUNDNO + " integer, " + COLUMN_ARROWS
                + " integer, " + COLUMN_ROUNDSUM + " integer, " + COLUMN_ROUNDAVE
                + " double " + ");";

        public MySQLiteHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            database.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(MySQLiteHelper.class.getName(),
                    "Upgrading database from version " + oldVersion + " to "
                            + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_RECORDS);
            onCreate(db);
        }

        public void addRecord(Record record) {
            SQLiteDatabase db = this.getWritableDatabase();

            ContentValues values = new ContentValues();
            values.put(COLUMN_SESSION, record.getSession()); // Contact Name
            values.put(COLUMN_ROUNDNO, record.getRoundno()); // Contact Phone Number
            values.put(COLUMN_ARROWS, record.getArrows()); // Contact Phone Number
            values.put(COLUMN_ROUNDSUM, record.getRoundsum());
            values.put(COLUMN_ROUNDAVE, record.getAverage());

            // Inserting Row
            db.insert(TABLE_RECORDS, null, values);
            db.close(); // Closing database connection
        }

        public ArrayList<Record> getAllRecords() {
            ArrayList<Record> recordList = new ArrayList<Record>();
            // Select All Query
            String selectQuery = "SELECT  * FROM " + TABLE_RECORDS;

            SQLiteDatabase db = this.getWritableDatabase();
            Cursor cursor = db.rawQuery(selectQuery, null);

            // looping through all rows and adding to list
            if (cursor.moveToFirst()) {
                do {
                    Record record = new Record();
                    record.setSession(cursor.getInt(1));
                    record.setRoundno(cursor.getInt(2));
                    record.setArrows(cursor.getInt(3));
                    record.setRoundsum(cursor.getInt(4));
                    record.setAverage(cursor.getDouble(5));

                    recordList.add(record);
                } while (cursor.moveToNext());
            }
            cursor.close();

            return recordList;
        }

        public int getLastSession() {
            SQLiteDatabase db = this.getReadableDatabase();
            String countQuery = "SELECT  * FROM " + TABLE_RECORDS;
            Cursor cursor = db.rawQuery(countQuery, null);
            if (cursor != null) {
                cursor.moveToLast();
                return cursor.getInt(1);
            } else {
                return 0;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:07:31.080

```
 private SQLiteDatabase db;
    sessionNo = db.getLastSession() + 1; 
```

[SQLiteDatabase 类](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)中没有 getLastSession() 方法。
这就是您看到错误的原因。
在您进行编辑和评论之后，这是一种干净的方法。
**解决方案：**

```
public class DatabaseHelper {

            public static final String TABLE_RECORDS = "records";
        public static final String COLUMN_ID = "_id";
        public static final String COLUMN_SESSION = "session";
        public static final String COLUMN_ROUNDNO = "roundno";
        public static final String COLUMN_ARROWS = "arrows";
        public static final String COLUMN_ROUNDSUM = "roundsum";
        public static final String COLUMN_ROUNDAVE = "average";

        private static final String DATABASE_NAME = "records.db";
        private static final int DATABASE_VERSION = 1;

        // Database creation sql statement
        private static final String DATABASE_CREATE = "create table "
                + TABLE_RECORDS + "(" + COLUMN_ID
                + " integer primary key autoincrement, " + COLUMN_SESSION
                + " integer, " + COLUMN_ROUNDNO + " integer, " + COLUMN_ARROWS
                + " integer, " + COLUMN_ROUNDSUM + " integer, " + COLUMN_ROUNDAVE
                + " double " + ");";

    private DbHelper helper;
    private SQLiteDatabase database;
    private final Context context;

    private class DbHelper extends SQLiteOpenHelper{
        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            database.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(MySQLiteHelper.class.getName(),
                    "Upgrading database from version " + oldVersion + " to "
                            + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_RECORDS);
            onCreate(db);
        }       
    }

    // constructor
    public DatabaseHelper(Context c){
        context = c;
    }

    // open
    public DatabaseHelper openDB(){
        helper = new DbHelper(context);
        database = helper.getWritableDatabase();
        return this;
    }

    // close
    public void closeDB(){
        helper.close();
    }

    //
        public void addRecord(Record record) {

            ContentValues values = new ContentValues();
            values.put(COLUMN_SESSION, record.getSession()); // Contact Name
            values.put(COLUMN_ROUNDNO, record.getRoundno()); // Contact Phone Number
            values.put(COLUMN_ARROWS, record.getArrows()); // Contact Phone Number
            values.put(COLUMN_ROUNDSUM, record.getRoundsum());
            values.put(COLUMN_ROUNDAVE, record.getAverage());

            // Inserting Row
            database.insert(TABLE_RECORDS, null, values);
            //database.close();  Use closeDB() instead // Closing database connection
        }

        public ArrayList<Record> getAllRecords() {
            ArrayList<Record> recordList = new ArrayList<Record>();
            // Select All Query
            String selectQuery = "SELECT  * FROM " + TABLE_RECORDS;

            Cursor cursor = database.rawQuery(selectQuery, null);

            // looping through all rows and adding to list
            if (cursor.moveToFirst()) {
                do {
                    Record record = new Record();
                    record.setSession(cursor.getInt(1));
                    record.setRoundno(cursor.getInt(2));
                    record.setArrows(cursor.getInt(3));
                    record.setRoundsum(cursor.getInt(4));
                    record.setAverage(cursor.getDouble(5));

                    recordList.add(record);
                } while (cursor.moveToNext());
            }
            cursor.close();

            return recordList;
        }

        public int getLastSession() {
            String countQuery = "SELECT  * FROM " + TABLE_RECORDS;
            Cursor cursor = database.rawQuery(countQuery, null);
            if (cursor != null) {
                cursor.moveToLast();
                return cursor.getInt(1);
            } else {
                return 0;
            }
        }
} 
```

如何在活动中访问；

```
 DatabaseHelper entry = new DatabaseHelper(this);
        entry.openDB();
                sessionNo = entry.getLastSession() + 1;
                 entry.closeDB(); 
```

# svn - 如何从 SVN 中的多个开发人员分支合并后创建主干（Tortoise SVN）

> ID：13714649
> 
> 赞同：1
> 
> 时间：2012-12-05T00:56:17.567
> 
> 标签：svn, merge, tortoisesvn

我的团队是 SVN 的新手，我认为我们犯了一个错误，每个开发人员都创建了自己的分支并开始向自己的分支添加代码。现在，我需要将所有分支合并到一个树干中。有没有安全的方法来做到这一点？我一直在努力，但是当分支中有文件时，我不断收到“树冲突”错误，而不是在树干中。大多数文件都会被添加，除了一些会产生错误的文件。

树干最初是空的，我试图一次合并一个分支。

我们使用的是 Tortoise SVN 1.7.9。

这是我们目前的结构。

```
projectFoo

    - branches
        - dev1
            - proj1

        - dev2
            - proj1

        - dev3
            etc...

    - trunk
        - <empty> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:14:34.310

你会玩得很开心，因为每个人都在自己的分支中工作，而分支之间没有任何关系。这不是编程意义上的*合并*。真正的合并意味着您将*分支“A”*从*分支“B”*中拆分出来，因此这两个分支具有共同的祖先修订版，并且您现在正在从“A”合并到“B”或从“B”合并到“A”。

没有简单的方法可以完成您需要做的事情。如果幸运的话，所有开发人员都在编写单独的代码，因此合并只是意味着将分支合并在一起，并且您不会有真正的冲突。如果开发人员正在处理同一个文件，但在不同的分支中，你就有麻烦了。

`--ignore-ancestors`由于没有祖先，因此在合并时需要使用该参数。这是我唯一能说的。但是，一旦克服了这种痛苦，您就可以决定使用更标准的方式来处理分支和合并。有两种范式实际上很好用。（还有其他几个，但它们基本上是有毒的）：

*   **不稳定的树干**：我个人的最爱。每个人都在树干上工作。这是上帝设计 Subversion 工作的方式。*只有在必要*时才进行分支。*必要时*的定义有点模糊。基本上，您在需要时进行分支，因为您不希望开发人员闲置。

*   **流开发**：在流开发中，您有一个*集成流*（通常是*主干*），开发人员创建 _development 流（又名分支）来完成他们的工作。开发流可能是开发人员的个人工作区、敏捷任务、Jira 问题、功能。您基本上从主干创建一个分支，完成工作，*变基*（也就是从主干合并到开发~~分~~ *支流*）和 _deliver（也就是从开发流合并回主干）。

如您所见，在**Unstable trunk**中，一切都非常简单，因为分支很少。而且由于每个人都在主干上工作，因此他们与每个人的交流都更好，而且他们的开发工作也更小。*与持续集成*结合使用时效果很好。

你什么时候在不稳定的主干中分支？通常，当您开始完成一个修订版时，开发人员开始着手处理当前修订版，然后是下一个修订版。假设每个人都在开发 1.2 版。每个人都在树干上工作。当您到达一些开发人员完成 1.2 的工作并希望在 1.3 版本上工作，并且在 1.2 版本上仍有一些清理工作要做时，您从主干分支一个 1.2 版本分支。

开发 1.3 版的开发人员继续在主干上工作。开发 1.2 版本的开发人员在 1.2 分支上工作。当 1.2 i 准备好发布时，1.2 发布从 1.2 分支完成并标记在 1.2 分支上。如果需要补丁/修补程序版本 1.2.1，它也在 1.2 分支上完成。

如果在 1.2 分支上发现问题，并且在主干上的 1.3 版本上也存在问题，您可以轻松地将 1.2 上的特定更改合并回主干，因为 1.2 分支来自主干。

流开发受到敏捷人群的青睐，因为它允许您选择要包含在*集成分支*（又名主干）中的内容。很多时候，直到 sprint 几乎完成，软件才会交付到主干。喜欢这种方法的人喜欢它，因为它提供了*灵活性*，但我不喜欢它，因为这种方法不能很好地工作持续集成。另外，您通常要在发布前几天才能有一个像样的构建。

# angularjs - 为什么我的函数不发送 POST

> ID：13714650
> 
> 赞同：4
> 
> 时间：2012-12-05T00:56:19.260
> 
> 标签：angularjs

这是参考损坏代码的[小提琴。](http://jsfiddle.net/FN8Yg/15/)当我尝试它时，它应该发送到的服务器没有响应，这让我相信它没有从我的应用程序接收任何流量。问题明显吗？如果不是，我可以使用哪些故障排除方法来调查问题？

stackoverflow 希望我包含我的内联代码，所以就在这里。

`index.html`

```
<div ng-controller="DataEntryCtrl">
      <form ng-repeat="entryField in entryFields">
            <input type="text"
                   ng-model="entryField.fieldData"  
                   placeholder="{{entryField.pHolder}}">
      </form>

      <input type="button" ng-click="sendJSON()" value="Object To JSON" />
      <hr/>
       {{res}}
     <ul>
       <li>ID: {{entryFields.id.fieldData}}</li>
       <li>description: {{entryFields.description.fieldData}}</li>
       <li>date: {{entryFields.date.fieldData}}</li>
    </ul>            

</div> 
```

`controller.js`

```
'use strict';
/* Controllers */
var app = angular.module('Hubbub-FrontEnd', ['ngResource']);

app.controller('DataEntryCtrl', function($scope,$resource) {
   $scope.entryFields = {
     id:           {pHolder:'ID goes here',fieldData:""},
     description:  {pHolder:'Description goes here',fieldData:""},
     date:         {pHolder:'Drop Dead Date goes here',fieldData:""}
   };

   $scope.showJSON = function() {
       $scope.json = angular.toJson($scope.entryFields);
   };
   $scope.sendJSON = function() {
       $scope.entry = angular.toJson($scope.entryFields);
       $scope.res = $resource('http://10.64.16.6:3000/Create',
         {create:{method:'POST'}},{params:$scope.entry});
       };

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:51:41.570

目前，每次用户单击按钮时，您都在创建相同的资源。

您可以做的是在控制器中的某处创建服务

```
var Res = $resource('http://10.64.16.6:3000/res/:id', {id: '@id'}); 
```

然后，当用户单击按钮时，创建资源的新实例并将您要发送的数据传递给它

```
$scope.sendJSON = function() {
    $scope.entry = angular.toJson($scope.entryFields);
    var r = new Res();
    r.$save({params: $scope.entry});    
}; 
```

该方法`$save`继承自`ngResource`并执行`POST`请求。这是一个 jsfiddle [http://jsfiddle.net/jaimem/FN8Yg/19/](http://jsfiddle.net/jaimem/FN8Yg/19/)

在开发人员工具中，请求方法将被列为`OPTIONS`因为它来自 jsfiddle。请求参数将是这些方面的东西

```
params:{"id":{"pHolder":"ID goes here","fieldData":"sdf"},"description":{"pHolder":"Description goes here","fieldData":"sdf"},"date":{"pHolder":"Drop Dead Date goes here","fieldData":"sdf"}} 
```

[您可以在此处](http://docs.angularjs.org/api/ngResource.%24resource)阅读更多 $resource

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:20:31.720

这个问题可能也很有用，[AngularJS 对跨域资源执行 OPTIONS HTTP 请求](https://stackoverflow.com/questions/12111936/angularjs-performs-an-options-http-request-for-a-cross-origin-resource)。您可能需要设置一些标头以允许跨源支持。

除此之外，我认为您在创建资源时可能还会破坏参数：-

```
$scope.res = $resource('http://10.64.16.6:3000/Create',
     {create:{method:'POST'}},{params:$scope.entry}); 
```

尝试：

```
$scope.res = $resource('http://10.64.16.6:3000/Create', null,
     {create:{method:'POST', params: $scope.entry}});
$scope.res.create(); 
```

是的，您可以提前创建资源，这样您就不会在每次单击按钮时都重新创建它。

# google-app-engine - 在 cmd 行上输入 dev_appserver.py 只会打开文件。不运行它

> ID：13714651
> 
> 赞同：1
> 
> 时间：2012-12-05T00:56:26.283
> 
> 标签：google-app-engine

在 windows cmd 行上，我输入以下内容：“dev_appserver.py”myapp

但是，dev_appserver.py 文件只是作为 word 文档打开。

你能让我知道为什么我无法运行它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:23:02.683

您已经设法将 .py 与 Microsoft Word 关联起来。这是 Windows 的事情，根本不是 App Engine 的事情。

要运行 dev_appserver.py，请尝试

```
python dev_appserver.py 
```

它假设您的 PATH 中有 python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T02:52:36.413

你应该在 archlinux 的终端运行下一个命令：

```
python2 /usr/bin/dev_appserver.py --clear_datastore yes app-id 
```

# android - SQL - 使用子查询的结果

> ID：13714659
> 
> 赞同：1
> 
> 时间：2012-12-05T00:57:20.487
> 
> 标签：android, sql, json, sqlite

我的 SQLLite 数据库中有两个表。我正在努力找回可以用输入的成分制成的饮料。

我正在尝试制定此查询以获得我想要的。

# **餐桌饮品**

列

> 饮料ID | 标题 | 成分| 方向 | 成分号

示例行看起来像

> 1 | 蓝爸爸 | 1 根碎蓝冰棒、8 盎司酷爱饮料、4 盎司伏特加 | 方向 | 3

# **餐桌配料**

列

> 饮料ID | 成分

示例行看起来像

> 1 | 蓝色冰棒

# 我现在的查询

这是我想要返回的部分伪代码（在我得到这个之后，我会动态地输入要查询的术语）。

我想返回所有输入量等于或大于饮料成分数的饮料，并且这些输入的成分与饮料中所需的所有成分匹配。

```
SELECT drinks.title, drinks.ingredients, drinks.directions
FROM drinks, (SELECT count(ingredients._id) as ingredientNumber FROM ingredients
WHERE ingredients.ingredient LIKE '%rum%'
GROUP BY ingredients._id) as foundIngredients
WHERE drinks.ingredientsNum = foundIngredients.ingredientNumber; 
```

## 任何人都可以帮助我获得最适合的查询，甚至给我一些关于重组我的数据库模型的提示吗？我刚刚从一个 80k 行的长 JSON 文件创建了这个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:10:59.000

您的架构有点奇怪，因为通常您实际上可能会使用 3 个表来真正规范化此数据结构（饮料、配料、drink_ingredients 或类似的）。但是，由于您正在进行文本搜索，并且您已经在饮料表中获得了所有成分名称，因此您可以简单地在饮料表中查询：

```
SELECT title, ingredients, directions
FROM drinks
WHERE ingredients LIKE '%rum%'
AND ingredients LIKE '%vodka%'
... // add more ingredients as needed 
```

确保您在成分字段上有一个索引。请注意，如果您想退回所有带有朗姆酒和/或伏特加的饮料，您可以更改为`AND`。`OR`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:18:10.123

反映澄清问题的查询：

```
SELECT drinks.title, drinks.ingredients, drinks.directions
FROM drinks
WHERE drinks.ingredientsNum = (
    SELECT count(*)
    FROM ingredients
    WHERE (
        ingredients.ingredient LIKE '%rum%'
        OR ingredients.ingredient LIKE '%coke%'
        OR ingredients.ingredient LIKE '%vodka%'
        -- the same goes for each ingredient
    )
    AND ingredients.drink_id = drinks.drink_id
) 
```

同样，如果您允许饮料含有*除所有指定之外*的额外成分：

```
SELECT drinks.title, drinks.ingredients, drinks.directions
FROM drinks
WHERE drinks.ingredientsNum >= [number of input ingredients]
AND [number of input ingredients] <= (
    SELECT count(*)
    FROM ingredients
    WHERE (
        ingredients.ingredient LIKE '%rum%'
        OR ingredients.ingredient LIKE '%coke%'
        OR ingredients.ingredient LIKE '%vodka%'
        -- the same goes for each ingredient
    )
    AND ingredients.drink_id = drinks.drink_id
) 
```

# java - 在 java 中实现我自己的 Map API，如何抛出 IllegalArgumentException？

> ID：13714668
> 
> 赞同：2
> 
> 时间：2012-12-05T00:58:07.200
> 
> 标签：java, api, class, map

我正在实现 Map 的 java 中的自定义类。根据地图 api，我需要为 put(k,v) 和 putAll(map) 方法抛出 IllegalArgumentException。

如果我有类似的东西，我相信我会抛出这个异常：

```
MyMapClass<Integer, Integer> map = new MyMapClass<Integer, Integer>; 
```

然后我打电话

```
map.put ("hello",5). 
```

我是否正确，这是应该导致异常的情况？

如果是这样，我可以就如何测试这个问题获得一些指导吗？我不确定如何找出 put 方法中的对象 k 和 v 的类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:08:06.810

如果尝试在编译器期望整数的地方使用字符串，那将是编译时错误。一般情况下，您*不需要*抛出 IllegalArgumentException，如果您有一些未强制执行的特殊规则，这只是接口允许您的地图执行的一个选项。

如果您对内容没有特殊限制，则没有理由抛出异常。你会注意到`java.util.HashMap`实际上并没有抛出它！

例如，如果您有一个只接受正整数作为键的类：

```
public class MyMapKeyedOnPositiveInts<V> implements Map<Integer, V> {

    public V put (Integer key, V value) {
        if (key < 0) throw new IllegalArgumentException();
        //do put
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T01:13:43.790

根据 Java API for [Map](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html) interface Java 5 (to current) 你通过一个 IllegalArgumentException;

> 如果此键或值的某些方面阻止它存储在此映射中

您提供的示例不是 Map API 需要的，这是因为泛型。在 Java 5+ 中，Java 将确保它是您在上面指定的编译时错误，因此您可以放心，您不需要在`put`and`putAll`方法中检查正确的类型。

那么，`Map`JavaDoc 中的上述声明对您意味着什么？好吧，这实际上取决于您在实现`Map`接口时所做的工作。Java 中的许多实现`Map`都不会抛出异常（`HashMap`, `TreeMap`,`ConcurrentHashMap`等）。

# url - 如何在控制器的操作方法中向路由添加参数

> ID：13714669
> 
> 赞同：0
> 
> 时间：2012-12-05T00:58:25.930
> 
> 标签：url, parameters, action

在控制器操作方法中，我有一个变量`$message`，如何将消息传递给重定向 url。

```
$message = 11;

if(!$success){
    return $this->redirect()->toRoute('myroute'); // how can I add $message paramter here??
   //I change it to  return $this->redirect()->toRoute('myroute',array(message=>$message)); it seams that it does't work 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:20:17.203

答案是使用`toUrl()` 方法

```
return this->redirect()->toUrl(this->url('someRoute').'?messsage='.$message) 
```

# validation - 如何仅在创建对象时应用 Play 2 唯一性验证？

> ID：13714673
> 
> 赞同：4
> 
> 时间：2012-12-05T00:58:32.673
> 
> 标签：validation, scala, web, playframework-2.0

如何仅在创建对象时应用 Play 2 唯一性验证？我可以添加一个自定义`verifying`子句，但是在编辑（而不是创建）现有对象时它会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:43:39.170

如果您没有对版本和创建执行相同的验证检查，也许这意味着您不应该`Form`对两者使用相同的对象？实际上，只有少数特殊情况可以`Form`在现实世界的程序中使用相同的对象进行创建和编辑。

另一方面，如果您不想复制一些对创建和编辑都通用的验证逻辑，您可以在两个`Form`对象中重用映射片段：

```
val commonMapping = "common" -> tuple(
    "foo" -> number,
    "bar" -> nonEmptyText
)
val creationForm = Form(tuple(
    commonMapping,
    "baz" -> date
) verifying (/* creation specific constraint */))
val editionForm = Form(tuple(
    commonMapping,
    "bah" -> boolean
)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:36:26.180

我正在我的控制器中执行此解决方法，因为我不知道更好的解决方案：

可以想象，isNew 值检查您的创建情况，在我的情况下，天气一个 seq - 或在创建的情况下为 0 - 通过 url 传递

方法 userExists(userName: String): Boolean 会检查唯一性。

```
val boundForm = userForm.bindFromRequest()

if(!boundForm.hasErrors) {
  val user = boundForm.get // save as form has no errors
  if(isNew && userExists(user.getUsername)) {
    boundForm = boundForm.copy(value = None, errors = Seq(FormError("", "user exists, choose another name")))
  }
}

boundForm.fold(...,...) 
```

# java - Gson - 关于版本控制的问题

> ID：13714676
> 
> 赞同：3
> 
> 时间：2012-12-05T00:59:02.923
> 
> 标签：java, json, serialization, gson

我正在查看 Gson 用户指南的[版本支持部分](https://sites.google.com/site/gson/gson-user-guide#TOC-Versioning-Support)。

问题 1：它说您可以在类、字段和（在将来的版本中）方法上使用 @Since 注释。我了解对象字段的序列化，但是序列化*类*和*方法*是什么意思？

问题2：它说当你创建你的Gson对象时，你可以指定一个版本，然后任何带有@Since注释的字段和一个大于那个版本号的字段都将被忽略。这到底是什么意思？我知道，当 Json 包含正在反序列化的 Java 类中不存在的额外字段时，这些字段将被忽略。那么为什么你需要使用 @Since 注释呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-21T13:07:21.207

对于问题 2：@Since 主要帮助您进行序列化。版本号更大的字段将被忽略，因此您为当前较新类的先前版本编写 JSON。

@Since 对去现实化也有影响，在我看来不是那么有用。使用 @Since 进行反现实化将忽略 JSON 中存在的一些字段以及类中存在的一些字段，如果使用的版本号少于这些字段。在我看来这没什么用，因为您在新课程中阅读新版本的 JSON 就像在新课程中阅读旧版本的 JSON 一样。

JSON 示例：

```
{
    oldField: "value1",
    newField: "value2"
} 
```

Java类：

```
class MyClass {
    @Since(0.0)
    public String oldField;
    @Since(1.0)
    public String newField;
} 
```

爪哇测试：

```
public static void main(String[] args) {
    Gson gson = new GsonBuilder().setVersion(0.0).create();
    MyClass myClass = gson.fromJson("{oldField: \"value1\", newerField: \"value2\"}", MyClass.class);

    System.out.println("read as version 0.0:");
    System.out.println(myClass.oldField);
    System.out.println(myClass.newField);

    Gson gson2 = new GsonBuilder().create();
    MyClass myClass2 =  gson2.fromJson("{oldField: \"value1\", newField: \"value2\"}", MyClass.class);

    System.out.println("read without version specified:");
    System.out.println(myClass2.oldField);
    System.out.println(myClass2.newField);
} 
```

结果显示如果 @Since 更小，newField 是如何被忽略的：

```
read as version 0.0
value1
null

read without version specified
value1
value2 
```

# c++ - OpenGL - QT：鼠标移动事件效果未显示

> ID：13714678
> 
> 赞同：0
> 
> 时间：2012-12-05T00:59:08.523
> 
> 标签：c++, qt, opengl, glsl

我正在使用 opengl-tutorial.org 学习，我也在使用 QT，当我移动鼠标时，MVP 矩阵会更新，效果很好。但在我按下 Alt 键之前，屏幕不会显示更改。我不知道为什么，是QT还是OpenGL的问题？

**InitGL 函数：**

```
programId = this->createPorgram(":/glsl/VertexShader.glsl",":/glsl/FragmentShader.glsl");
if(programId==-1){
    emit blewUpApplication();
    return;
}

glClearColor(0.0,0.0,0.0,1.0);
glEnable(GL_CULL_FACE);
glEnable(GL_MULTISAMPLE); // Enables multisampling for a better look
//glEnable(GL_BLEND); // Enable textures with alpha channel and alpha channels colors
glEnable(GL_TEXTURE_2D);
glEnable(GL_ALPHA_TEST);
glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LESS);
// Bla bla bla, the rest does not matters. 
```

**PaintGL 功能：**

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clears the screen and paint the bg with the color specified on glClearColor

float currT = float(tmr.elapsed() / 1000.0f);
if((currT-lastTime)>=1.0f){
    lastTime+=1.0f;
}
deltaTime = (float)(currT-lastTime);

glm::mat4 Project = this->getMatrixProjection();
glm::mat4 View = this->getMatrixView();
glm::mat4 Model = glm::mat4(1.0f);
glm::mat4 MVP = Project * View * Model;

glUseProgram(programId);

GLuint MatrixId = glGetUniformLocation(programId,"MVP");
glUniformMatrix4fv(MatrixId,1,GL_FALSE,glm::value_ptr(MVP));

glActiveTexture(cursor_texture);
glBindTexture(GL_TEXTURE_2D,cursor_texture);

glUniform1i(glGetUniformLocation(programId,"textura"),cursor_texture);
// Draw or triangles

glEnableVertexAttribArray(0);
glEnableVertexAttribArray(1);   

glBindBuffer(GL_ARRAY_BUFFER,trianglebuffer[0]);
glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,0,(void*)0);

glBindBuffer(GL_ARRAY_BUFFER,trianglebuffer[1]);
glVertexAttribPointer(1,2,GL_FLOAT,GL_FALSE,0,(void*)0);

glDrawArrays(GL_TRIANGLES,0,12*3);

glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);

glUseProgram(0); 
```

**鼠标移动功能：**

```
mousepos[0] = evt->x();
    mousepos[1] = evt->y();
    horzAn += mouseSpeed * deltaTime * float(this->width()/2 - mousepos[0]);
    vertAn += mouseSpeed * deltaTime * float(this->height()/2 - mousepos[1]);

    CmDirect = glm::vec3(cos(horzAn) * sin(vertAn), sin(vertAn), cos(horzAn) * cos(vertAn));
    glm::vec3 RgtVc = glm::vec3(sin(horzAn - 3.14f/2.0f),0,cos(horzAn - 3.14f/2.0f));
    UpVc = glm::cross(RgtVc,CmDirect);

    Proj = glm::perspective(Zoom,4.0f/3.0f,0.1f,100.0f);
    Vw = glm::lookAt(PosCm,PosCm+CmDirect,UpVc);
    this->cursor().setPos(suppose_x,suppose_y); 
```

**着色器：**

```
// Fragment
#version 330 core
out vec3 color;
in vec2 thcoord;
in vec2 UV;
uniform sampler2D d_textura;
void main(){
color = texture(d_textura,thcoord).rgb;
}
// Vertex
#version 330 core
layout(location = 0) in vec3 vertexPosition_modelspace;
layout(location = 1) in vec2 tcoord;
out vec2 thcoord;
uniform mat4 MVP;
void main(){
vec4 v = vec4(vertexPosition_modelspace,1);
thcoord=tcoord;
gl_Position = MVP * v;
} 
```

我知道矩阵运算运行良好，因为当我按下 alt 键时效果会发生变化（只发生一次）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:00:15.317

您应该将更新请求添加到 mouseMoveEvent 处理程序的末尾，以便 Qt 知道该小部件需要重新绘制。update() 或 repaint() 应该可以解决问题。

# php - 我应该使用序列化来存储可用性时间吗？

> ID：13714679
> 
> 赞同：3
> 
> 时间：2012-12-05T00:59:10.100
> 
> 标签：php, mysql

我有一个网站要求用户输入他们可以上课的日期和时间。例如，教授可以输入星期一下午 1:00 到下午 2:00 和星期二下午 2:00 到下午 4:00。

目前，我正在使用序列化将数据存储在名为“可用性”的列中的 MySQL 表中。我取 Monday+1300+1400 和 Tuesday+1400+1500 并将这两个序列化。然后我使用 explode() 提取星期一、1300、1400 等。

我觉得应该有更好的方法来做到这一点。每次学生想要查看教师可用性时，我都需要提取此信息，我认为当前的方法对此无效。

你能告诉我一个更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:04:29.967

您当前的解决方案不允许您根据数据库本身的可用性进行搜索。您需要获取序列化数据，反序列化然后检查它，这将非常昂贵。

你应该做的是建立一个看起来有点像这样的表：

`User_id | Day | Start_Time | End_Time`

现在，如果具有 user_id 的用户在周一下午 2 点到 3 点和周五下午 4 点到 5 点有空，则在此表中添加两个条目

```
1  |  Mon  |  1400  |  1500
1  |  Fri  |  1600  |  1700 
```

您现在可以轻松地在数据库本身上进行搜索、过滤、排序等。

# facebook - 可嵌入的 Javascript 小部件可用于使用相同 Facebook 应用程序的任何域

> ID：13714681
> 
> 赞同：0
> 
> 时间：2012-12-05T00:59:27.620
> 
> 标签：facebook, ruby-on-rails-3, embed

我的应用程序在 Ruby on Rails 中，我正在关注这样的教程：http: [//8raystech.com/2011/11/28/how-to-create-embeddable-widgets-with-rails](http://8raystech.com/2011/11/28/how-to-create-embeddable-widgets-with-rails)

我想为其添加 Facebook 身份验证。最终用户将被明确表示他们在不同的网站上使用（我的应用程序），因此授予我的应用程序权限是最终用户理解的合理步骤。

这可能与 facebook redirect_url 限制有关吗？我到处搜索了一个例子，但找不到任何东西！

我的想法是它可能必须是一个 iframe。但理想情况下，我只想有一个自包含的按钮，单击该按钮时，会在模式中显示有关如何与之交互的详细信息：1）提供身份（通过电子邮件/facebook）2）输入短信3）单击注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:31:58.943

框架！这就是它们的用途，检查 disqus、所有社交媒体按钮（facebook、twitter、google+）等。

大多数这些社交插件都使用一个 javascript 文件（主要是一个加载器），它会做两件事：
1- 加载包含对象的 iframe。
2-管理 iframe 和您的网站之间的跨域通信。

Alex Sexton 在这里对 3rd 方应用程序进行了很好的介绍：http: [//alexsexton.com/blog/2012/08/third-party-javascript-in-the-third-person/](http://alexsexton.com/blog/2012/08/third-party-javascript-in-the-third-person/)（他的博客也有很多相关的内容）

Bocoup 在这里发表了一篇博文：[http ://weblog.bocoup.com/third-party-javascript-development-future/](http://weblog.bocoup.com/third-party-javascript-development-future/)

否则，还有一些 Disqus 开发者的书即将推出： http: [//thirdpartyjs.com/](http://thirdpartyjs.com/)

这是我最喜欢的3个。但是如果你用谷歌搜索，还有更多`Third party javascript`。

# installation - 无法使用基本 Silex 记录器

> ID：13714687
> 
> 赞同：0
> 
> 时间：2012-12-05T01:00:33.613
> 
> 标签：installation, silex, monolog

我有这个简单的代码：

```
<?php

require_once __DIR__.'/../vendor/autoload.php';

$app = new Silex\Application();
$app->get('/hello', function() { return 'Hello!'; });
//$app->register(new Silex\Provider\MonologServiceProvider(), array(
//    'monolog.logfile' => __DIR__.'/development.log',
//));
$app->run();
?> 
```

有用。如果我尝试注册 Monolog 服务（删除 3 个开头的 '//' 注释关键字），则***不再有效***：

```
$app->register(new Silex\Provider\MonologServiceProvider(), array(
    'monolog.logfile' => __DIR__.'/development.log',
)); 
```

我尝试通过 fat zip 和 composer 进行安装，但结果相同。我没有想法？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:53:22.713

通过广泛跟踪简单代码解决了问题。服务器似乎无法写入 Web 目录。

`chmod 777 ./web` # 解决它

这让我想到了这些最​​后的问题：

1.  在安全的生产环境中，Web 目录的权限和所有权应该是什么？

    ***来自[Maerlyn 的](https://stackoverflow.com/users/308825/maerlyn)*** 日志应包含在与 web apis 目录不同的目录中。

2.  当日志服务不工作，或者没有注册日志服务时，错误记录在哪里，我们肯定需要开发人员注意？是否有任何后备低级别服务？

    ***从[Maerlyn](https://stackoverflow.com/users/308825/maerlyn)*** 查看您的 Web 服务器日志以查找这些类型的错误。

# python - 在 1 行生成随机和打印列表

> ID：13714689
> 
> 赞同：1
> 
> 时间：2012-12-05T01:00:53.127
> 
> 标签：python, list, random, integer, range

对于作业，我正在尝试编写一个名为 Exam 的函数，它接受一个参数 n，其中 n>2。该函数应该创建一个包含 n 个随机整数的列表 (list1)，`range(1,5)`并在一行上打印 list1 的所有元素。

到目前为止，我所拥有的是：

```
def Exam(n):
    import random
    random.randrange(1,5) 
```

我不确定如何将输入限制为 n>2，甚至不知道这意味着什么。如果有人可以提供帮助或提示，将不胜感激！

**更新代码：**

```
def Test(n):
    import random
    random.randrange(1,5)
    list1*[]
    if n>2:
        for i in range (n):
            list1.append(random.randrange(1.5)) 
```

这似乎在正确的道路上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:04:34.743

```
def list_n(n):
    if n < 2:
       return False
    list = []
    for x in range(n):
       list.append(random.randrange(1,5))
    return list 
```

使用列表理解：

```
def list_n(n):
    if n < 2:
       return False
    return [random.randrange(1,5) for x in range(n)] 
```

# javascript - 使用静态方法扩展类

> ID：13714698
> 
> 赞同：2
> 
> 时间：2012-12-05T01:01:52.133
> 
> 标签：javascript, typescript

假设你有一个`date_ext.js`with 函数：

```
Date.prototype.getMyBlaDate = function() {
  return // bla bla
};

Date.minutesBetween = function (date1, date2) {
  return // obladi-oblada
} 
```

您不想将整个文件转换为打字稿，但您仍然可以使用其中的方法。让我们为打字稿创建一个定义

```
interface Date{
  getMyBlaDate():BlaBlaType;
  minutesBetween(date1:Date, date2:Date):ObladiType; 
} 
```

它适用于原型方法，但不适用于静态方法。你如何定义静态方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:19:44.070

从`lib.d.ts`看起来你会使用：

```
declare var Date: {
    minutesBetween(date1:Date, date2:Date):ObladiType;
} 
```

**更新**

看起来目前不支持；见[http://typescript.codeplex.com/discussions/403971](http://typescript.codeplex.com/discussions/403971)

# php - 在不刷新页面的情况下设置输入字段的值

> ID：13714699
> 
> 赞同：0
> 
> 时间：2012-12-05T01:01:59.133
> 
> 标签：php, javascript, jquery

我正在尝试使用 AJAX 自动完成用户文本。现在，当用户键入时，我让 AJAX 将自动完成功能所需的结果返回到“建议”div。但是，我要完成的是从输入字段（“prod-name”）出来的下拉菜单，其中包含建议作为选项，用户可以简单地单击他们喜欢的建议并将其设置为输入的“值”（类似谷歌如何在您键入时提供搜索建议，但简化版本）。

到目前为止我的标记：

```
<script type="text/javascript">
    function search(searchword) {
      $('#suggestion').load('invoice-get-data.php?searchword=' + searchword);
    }
</script>
</head>
<body>

<div class="prod-name">
    <input onKeyPress="search(this.value)" type="text" id="prod-name"/>
    <div id="suggestion"></div>
</div>
</body> 
```

到目前为止我的 AJAX 代码（invoice-get-data.php 代码片段）

```
$searchword = $_GET['searchword'];

    $results = mysql_query("SELECT * FROM products WHERE prod_name LIKE '".$searchword."%'") or die(mysql_error());

    while($row = mysql_fetch_array($results)){
        echo $row['prod-name'] . '<br>';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:16:33.160

jquery ui 为这种自动完成提供了一个小部件：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)。

javascript方面将是：

```
<script>
$(function() {
    $( "#prod-name" ).autocomplete({
        source: "invoice-get-data.php",
        minLength: 2,
        select: function( event, ui ) {
            alert("Product #" + ui.item.id + " selected");
            return true;
        }
    }
    });
});
</script> 
```

PHP方面将是：

```
$searchword = $_GET['term'];

$results = mysql_query("SELECT * FROM products WHERE prod_name LIKE '".$searchword."%'") or die(mysql_error());

$data = array();
while($row = mysql_fetch_array($results)){
    $data[]     = array(
        "id"        => $row['id'],
        "value"     => $row['prod-name'],
        "label"     => $row['prod-name']
    );
}   

echo json_encode($data); 
```

# css - HTML 中心将 div 与另一个 div 向左对齐

> ID：13714709
> 
> 赞同：1
> 
> 时间：2012-12-05T01:03:45.973
> 
> 标签：css, html, web-deployment

只需使用 CSS，我就可以轻松地将页面中的 1 个 div 居中对齐，

```
margin: auto; 
```

这很好用，但是当我想保持这个 div 中心对齐时，我遇到了问题，但还有另一个 div 在左边。

这就是我想要的[http://jsfiddle.net/E25JV/20/](http://jsfiddle.net/E25JV/20/)但将 2 个 div 排列在一起。（我只是在 div 中使用文本来保持简单，但实际上有一个画布和一堆其他东西）。

我试过向左浮动一个 div 但我得到[http://jsfiddle.net/E25JV/21/](http://jsfiddle.net/E25JV/21/)。如您所见，它们并没有完全对齐，并且应该在中心的 1 个 div 已经移到了右侧。

如何让 2 个 div 与 1 个 div 在中心和 1 个在左侧对齐。

编辑：

为了简单起见，我给出的示例只是 2 个带有文本的 div。我实际上拥有的是 div 的 1 内的画布 -> [http://jsfiddle.net/E25JV/38/](http://jsfiddle.net/E25JV/38/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:06:29.110

[http://jsfiddle.net/E25JV/73/](http://jsfiddle.net/E25JV/73/)

```
#left {
    font-size: 14;    
}
#center {
    text-align: center;
    margin-top: -20px;
}
#canvas {
    margin: auto;
    display: block;
    background: black;
} 
```

​</p>

​</p>

# php - 内容不会更新 PHP 和 SQL

> ID：13714715
> 
> 赞同：0
> 
> 时间：2012-12-05T01:04:37.863
> 
> 标签：php, sql, database

我一直在从事小型网站管理员工作，但遇到了一个奇怪的问题。我能够从数据库中提取内容，但似乎无法让它更新并将其插入数据库。如果有人可以查看此代码并了解内容不会更新的原因，我将不胜感激。这是页面代码。我肯定错过了什么。

```
 <?php include("../inc/approve-admin.php"); ?>
<?php include("../inc/connect.php"); ?>

<?php
$result = mysql_query("SELECT * FROM inventory ORDER BY id");
?>
<?     while ($row = mysql_fetch_assoc($result)) {
                                    $id = $row['id'];
                                    $information = $row['information'];
                                    $link = $row['link'];
                                    $title = $row['title'];
                                   } 

    ?>

<!DOCTYPE HTML>
<?php
$description = "Fashion Franchise";
$keywords = "Fashion Franchise";
$body = "home";
require ("../inc/header.php");
?>

<script src="../js/jquery.validate.js" type="text/javascript"></script>
<!-- for styling the form -->
<script src="../js/cmxforms.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#addResource").validate();
});
</script>

<script type="text/javascript" src="../js/tiny_mce/tiny_mce.js" ></script>
<script type="text/javascript">
tinyMCE.init({
        mode : "textareas"
});
</script>

    <body id="<?php echo htmlentities("$body") ?>">

    <div class="container_12">
    <!-- Nav -->
    <?php include("../inc/nav-admin.php"); ?>
    <!-- / Nav -->

    <div class="grid_12">&nbsp;</div>
    <div class="grid_12">&nbsp;</div>

    <!-- Adimn List -->
    <?php include("../inc/admin-list.php"); ?>
    <!-- / Adimn List -->

    <div class="grid_7" id="white" style="min-height:400px;">

    <p style="text-align:center;padding-top:20px;">
    <?                  

    if(isset($_POST['title'])) {
        $information = $_POST['information'];
        $link = $_POST['link'];
        $title = $_POST['title'];

        $query = mysql_query("UPDATE inventory SET
            title = '$title',
            information = '$information', 
            link = '$link'
            WHERE id = $id LIMIT 1 ;");

        if($query) {
            $message = $title . " has been updated";
        }else{
            $message = "an error occurred while updating this entry";

        }
    }   
?>  
    </p>

    <? if(isset($_POST['title'])) { ?>
            <div id="content_holder">
              <p style="text-align:center;padding-top:20px;">
              <strong><? echo $message; ?></strong><br/>
              <span class="error"><? if($error_message) { echo $error_message; } ?></span>
              Select a category on the left to continue editing</p>
            <!-- end content_holder -->
            </div>
       <? }else{ ?>

     <form action="inventory.php?id=<?=$id?>" enctype="multipart/form-data"  name="addResource" id="addResource" method="post" class="cmxform">

    <table cellpadding="10px;" cellspacing="5" width="100%" align="left" valign="top">
    <tr><td colspan="2"><h1>Edit Inventory Resources</h1></td></tr>

    <tr>
    <td width="50%">
    <span class="formTitle">General Information</span><br/>
    <label>*Title</label><br/>
    <input id="title" name="title" class="required" value="<?=$title?>"/>
    </td>
    <td width="50%"><br/>
    <label>*Dropbox Link</label><br/>
    <input id="link" name="link" class="required" value="<?=$link?>"/>
    </td>
    </tr>

    <tr>
    <td colspan="2">
    <hr/>
    </td>   
    </tr>

    <tr><td colspan="2">
    <textarea style="width: 510px; height: 400px; font-size: 12px;" id="information" name="information"><?=$information?></textarea>
    </td></tr>

        <tr>
    <td colspan="2">
    <hr/>
    </td>   
    </tr>

    <tr align="right"><td colspan="2">
    <input type="submit" value="Update Inventory Resources" class="submit" />&nbsp;&nbsp;&nbsp;&nbsp;<a href="index.php" class="cancel">Cancel</a><br/><br/>
    </td></tr>
         </form>

        </table>

    </div>

<?php include("../inc/footer.php"); ?>

    <!-- / Container_12 -->
    </div>

    </body>
</html>
  <?php

    mysql_close();
    ?>

<? } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:40:23.197

The problem is a quote mark in your text:

> 's standard dummy text ever since the 1500s, when an unknown printer took a galle

Fastest solution is to escape everything before inserting into the table:

```
 $information_to_insert = mysql_real_escape_string($_POST['information']);
    $link_to_insert = mysql_real_escape_string($_POST['link']);
    $title_to_insert = mysql_real_escape_string($_POST['title']);
    $id = (int)$id;   // Cast this as an integer to also make it safe

    $query = mysql_query("UPDATE inventory SET
        title = '$title_to_insert',
        information = '$information_to_insert', 
        link = '$link_to_insert'
        WHERE id = $id LIMIT 1 ;"); 
```

Then, later where you display, you also need to make safe for display:

```
 $information_to_display = htmlentities($_POST['information']);
    $link_to_display = htmlentities($_POST['link']);
    $title_to_display = htmlentities($_POST['title']); 
```

BUT - check out PDO Prepared statements as advised in comments. Start now before you're forced to change all your code over in a few years.

# jquery - 为什么可拖动的最终不在鼠标下？

> ID：13714721
> 
> 赞同：1
> 
> 时间：2012-12-05T01:04:55.360
> 
> 标签：jquery, drag-and-drop, dock

可拖动对象不会在鼠标下方取消停靠，而是一直到容器的左侧边缘。为什么？

1.  转到 jsfiddle 示例[jsfiddle](http://jsfiddle.net/Trober/URudt/23/)

    `Some fake code here, too long to publish inline` ​</p>

2.  将可拖动对象拖到容器的北侧。它将通过蓝色虚线和“捕捉北方！”指示。将停靠在北侧的集装箱上方的消息。当它发生时，放下它。

3.  现在将停靠的面板拖离北侧。

问题：可拖动对象不会在鼠标下方取消对齐，而是与左侧保持齐平。

你能让它在鼠标下拖动的地方解开吗？

# java - 用 File.separator 替换所有“/”

> ID：13714722
> 
> 赞同：17
> 
> 时间：2012-12-05T01:04:58.583
> 
> 标签：java, regex, separator

在 Java 中，当我这样做时：

```
 "a/b/c/d".replaceAll("/", "@"); 
```

我回来

```
 a@b@c@d 
```

但是当我这样做时：

```
 "a/b/c/d".replaceAll("/", File.separator); 
```

它抛出一个 StringIndexOutOfBoundsException，我不知道为什么。我试着查了一下，但它不是很有帮助。谁能帮我吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-05T01:23:41.753

它在[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)中说：

> 请注意，替换字符串中的反斜杠 (\) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；见`Matcher.replaceAll`。

并且，在`Matcher.replaceAll`：

> 请注意，替换字符串中的反斜杠 (\) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同。如上所述，美元符号可以被视为对捕获的子序列的引用，并且**反斜杠用于转义替换字符串中的文字字符。**

您需要做的是转义替换字符串中的任何转义字符，例如[`Matcher.quoteReplacement()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#quoteReplacement%28java.lang.String%29)：

```
import java.io.File;
import java.util.regex.Matcher;

class Test {
    public static void main(String[] args) {
        String s = "a/b/c/d";
        String sep = "\\"; // File.separator;
        s = s.replaceAll("/", Matcher.quoteReplacement(sep));
        System.out.println(s);
    }
} 
```

请注意，我使用的是文字`\\`in`sep`而不是`File.separator`直接使用，因为我的分隔符是 UNIX 分隔符 - 你应该能够只使用：

```
s = s.replaceAll("/", Matcher.quoteReplacement(File.separator)); 
```

这输出：

```
a\b\c\d 
```

正如预期的那样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T01:12:04.670

试试这个

```
 String str = "a/b/c/d";
    str = str.replace("/", File.separator); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-05T01:13:32.687

`File.separator`在`\`Windows 上，即；它是一个转义的反斜杠。但是，在替换字符串中，它意味着[完全不同](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#replaceAll%28java.lang.String%29)的东西。所以你必须对它进行两次转义，一次用于 Java，一次用于替换字符串。

这应该有效：

```
"a/b/c/d".replaceAll("/", Matcher.quoteReplacement(File.separator)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-14T08:26:48.687

尝试`str.replace('/', File.separatorChar)`

# r - 如何在 R 中绘制“放大”效果

> ID：13714724
> 
> 赞同：28
> 
> 时间：2012-12-05T01:05:06.033
> 
> 标签：r

![在此处输入图像描述](../Images/d2c107337c30e2fa8b40da8edee3bd9f.png)

如上图，可以想象上面是参数空间图，例如正态分布的均值和方差，下面是对应的密度图。这样做有什么提示吗？谢谢~

**更新**：作为增强功能，我可以为此构建一个交互式版本吗？比如说，每当我将鼠标悬停在一个点上时，R 都会在下面显示相应的图。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T16:52:28.267

这是一个交互式版本，您可以单击一个点，然后出现相应的密度图。主要用于`?identify`和@Tyler 建议的那样`?zoomInPlot`。

关于它如何工作的更多细节：一开始`rxlim`就`rylim`定义了围绕所选点的矩形的大小，因此可能需要更改 factor `/20`。多次点击的可能性很重要：`identify()`仅在“最近”图中检测点击，即

```
par(mfrow = c(1,2))
plot(1:10) # 1
plot(1:10) # 2
identifyPch(1:10) 
```

仅在情节 #2 中检测点击（此处`identifyPch()`来自`?identify`）。对于这个问题`par(mfg=c(1, 1))`被使用：

> 制造
> 
> 一个 c(i, j) 形式的数值向量，其中 i 和 j 指示接下来要绘制图形数组中的哪个图形（如果设置）或正在绘制（如果查询）。数组必须已经由 mfcol 或 mfrow 设置。

![在此处输入图像描述](../Images/6268dd311af3a5687bc7331e2d365bd9.png)

```
zoom <- function (x, y, xlim, ylim, xd, yd) 
{
  rxlim <- x + c(-1, 1) * (diff(range(xd))/20)
  rylim <- y + c(-1, 1) * (diff(range(yd))/20)
  par(mfrow = c(1, 2))
  plot(xd, yd, xlab = "mean", ylab = "sd")
  xext <- yext <- rxext <- ryext <- 0
  if (par("xaxs") == "r") {
    xext <- diff(xlim) * 0.04
    rxext <- diff(rxlim) * 0.04
  }
  if (par("yaxs") == "r") {
    yext <- diff(ylim) * 0.04
    ryext <- diff(rylim) * 0.04
  }
  rect(rxlim[1] - rxext, rylim[1] - ryext, rxlim[2] + rxext, 
       rylim[2] + ryext)
  xylim <- par("usr")
  xypin <- par("pin")
  rxi0 <- xypin[1] * (xylim[2] - (rxlim[1] - rxext))/diff(xylim[1:2])
  rxi1 <- xypin[1] * (xylim[2] - (rxlim[2] + rxext))/diff(xylim[1:2])
  y01i <- xypin[2] * (xylim[4] - (rylim[2] + ryext))/diff(xylim[3:4])
  y02i <- xypin[2] * ((rylim[1] - ryext) - xylim[3])/diff(xylim[3:4])
  mu <- x
  curve(dnorm(x, mean = mu, sd = y), from = -4 * y + mu, to = 4 * y + mu, 
        xlab = paste("mean:", round(mu, 2), ", sd: ", round(y, 2)), ylab = "")
  xypin <- par("pin")
  par(xpd = NA)
  xylim <- par("usr")
  xymai <- par("mai")
  x0 <- xylim[1] - diff(xylim[1:2]) * (xymai[2] + xymai[4] + 
                                         rxi0)/xypin[1]
  x1 <- xylim[1] - diff(xylim[1:2]) * (xymai[2] + xymai[4] + 
                                         rxi1)/xypin[1]
  y01 <- xylim[4] - diff(xylim[3:4]) * y01i/xypin[2]
  y02 <- xylim[3] + diff(xylim[3:4]) * y02i/xypin[2]
  par(xpd = TRUE)
  xend <- xylim[1] - diff(xylim[1:2]) * xymai[2]/(2 * xypin[1])
  xprop0 <- (xylim[1] - xend)/(xylim[1] - x0)
  xprop1 <- (xylim[2] - xend)/(xylim[2] - x1)
  par(xpd = NA)
  segments(c(x0, x0, x1, x1), 
           c(y01, y02, y01, y02), 
           c(xend, xend, xend, xend), 
           c(xylim[4] - (xylim[4] - y01) * xprop0, 
             xylim[3] + (y02 - xylim[3]) * xprop0, 
             xylim[4] - (xylim[4] - y01) * xprop1, 
             xylim[3] + (y02 - xylim[3]) * xprop1))
  par(mfg = c(1, 1))
  plot(xd, yd, xlab = "mean", ylab = "sd")
}

ident <- function(x, y, ...)
{
  ans <- identify(x, y, n = 1, plot = FALSE, ...)
  if(length(ans)) {
    zoom(x[ans], y[ans], range(x), range(y), x, y)
    points(x[ans], y[ans], pch = 19)
    ident(x, y)
  }
}

x <- rnorm(10)
y <- rnorm(10, mean = 5)
par(mfrow = c(1, 2))
plot(x, y, xlab = "mean", ylab = "sd")
ident(x, y) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T04:13:48.410

iplots 包与此非常接近，尽管从技术上讲没有“缩放”。iplots 具有使用 Java GUI 实现的交互式链接图。您可以在一个图上选择点，相同的点在其他图中突出显示。 [包的网站在这里](http://www.rosuda.org/iPlots/)。

```
library(iplots)
data(Cars93)
iplot(Cars93$Horsepower, Cars93$MPG.city)
ihist(Cars93$Horsepower) 
```

在这里，我在左侧散点图中选择了一些点，将它们变为红色，并且它们也在右侧直方图中突出显示（直方图最接近密度图）。

![在此处输入图像描述](../Images/19078a6cfc3f568ee2ff8e1f9eb65390.png)

# php - 在 MySQL PDO 中使用带有 % 的 LIKE 时，未返回大写的行

> ID：13714726
> 
> 赞同：3
> 
> 时间：2012-12-05T01:05:10.230
> 
> 标签：php, mysql, pdo

好吧，假设我正在搜索“PersonName”，然后输入“person”，它没有找到该人，但“Person”找到了，有没有办法告诉它寻找与我的输入相似的任何内容？

我正在做这样的搜索：

```
$db->sqlquery("
SELECT `user_id` 
FROM `users`
WHERE `username`LIKE ?", array("%$user%")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T01:10:46.090

这取决于字段的排序规则。

如果排序规则以 _cs 结尾，则区分大小写，如果以 _ci 结尾，则不区分大小写。

更改字段的属性和索引/搜索将随之而来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:35:54.330

可能想在您的查询中尝试 ILIKE 而不是 LIKE ？

# google-app-engine - 从数据存储区过渡到 Google Cloud SQL

> ID：13714728
> 
> 赞同：1
> 
> 时间：2012-12-05T01:05:22.157
> 
> 标签：google-app-engine, google-cloud-datastore, google-cloud-sql

我在 Google App Engine 上有一个相当大的数据库，我正在使用当前的 Datastore 以及 Blobstore 来存储照片。我只是对过渡到 Google Cloud SQL 的优势和困难感到好奇。

谷歌表示它的读写速度更快，但没有说明它的成本比较。还有一个更具可扩展性吗？现在 HRD 上的一切都运行良好，但我想知道在过渡到 GC SQL 的道路上是否值得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:40:38.477

您可能会从 Google I/O 信息中找到此演示文稿： [SQL 与 NoSQL：后端之战](http://www.youtube.com/watch?v=rRoy6I4gKWU)。剧透：Datastore 更具可扩展性，但 Cloud SQL 更适合不需要可扩展性的应用程序。

# c# - 简单的字符串扩展方法导致编译器错误

> ID：13714729
> 
> 赞同：1
> 
> 时间：2012-12-05T01:05:33.247
> 
> 标签：c#, asp.net-mvc, extension-methods

我在一个简单的 MVC4 应用程序中名为 Helpers 的文件夹中有以下类：

```
namespace MyFirstMVC4.Helpers
{
    public static class Sample
    {

        public static int WordCount(this string str)
        {
            return str.Split(new char[] { ' ', '.', '?' },
                StringSplitOptions.RemoveEmptyEntries).Length;
        }
    }
} 
```

然后我在控制器中有以下代码：

```
using MyFirstMVC4.Helpers;
int x = "1 2 3 4".WordCount(); 
```

编译器抛出一个错误，指出名称空间“MyFirstMVC4”中不存在名称“Helpers”。

如果我删除了 using MyFirstMVC4.Helpers 语句，编译器会抛出一个错误，指出字符串没有 WordCount 的定义

**复制的 Sample 类与我的 ASP.NET MVC 4 Web 应用程序中的完全相同，在控制台应用程序中运行良好**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:11:12.287

扩展方法必须声明命名空间。

假设你的“Sample”类在“Foo.Bar”命名空间中，你需要去

```
using Foo.Bar; 
```

这是我正在使用的字数扩展：

```
namespace Core.BaseLibrary.Extensions
{
    public static class StringExtensions
    {
        /// <summary>
        /// Returns a count of words in the passed string.
        /// </summary>
        /// <param name="stringToCount">The string to count.</param>
        /// <returns>An integer containing the number of words in the string</returns>
        public static int WordCount(this string stringToCount)
        {
            return Regex.Matches(stringToCount, @"[\S]+").Count;
        }
    }
} 
```

这是我使用它的方式：

```
using Core.BaseLibrary.Extensions;
int wordCount = value.ToString().WordCount(); 
```

但

```
int wc = "1 2 3 4 5".WordCount(); 
```

也有效。

所以换句话说，看起来你在语法上做的一切都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:52:11.093

谢谢你们的帮助。两个警告：一，我重新启动了 Visual Studio 2012，但这并没有解决我的问题。第二，这个错误再次发生在我身上，另一个类在语法上是正确的并且之前编译得很好。该错误似乎与将以前编译的类移动到 Visual Studio 2012 中的新目录有关。

解决方法是删除类文件，然后将类再次添加到您的解决方案中。这将修复编译器错误。

# iphone - xcode ios：datareload不重新加载行数

> ID：13714732
> 
> 赞同：0
> 
> 时间：2012-12-05T01:05:39.987
> 
> 标签：iphone, objective-c, ios, xcode

我有一个表格视图中的书籍列表。然后我创建了一个“删除”和“添加”功能。

问题是，当我添加或删除数据时，我使用 [self.tableView reloadData]; 重新加载表数据。

现在的问题是，如果我修复了行，那么数据会重新加载而没有错误，但是如果行号发生了变化，那么我会给出一个错误。检查后，我注意到没有更新的是行号计数。知道我该怎么做吗？我在 numberOfRowsInSectionn 和 cellForRowAtIndexPath 中使用 [arrayOfNames count] 更新我的行号。cellForRowAtIndexPath 上的行号更新，但 numberOfRowsInSectionn 未使用新的行数更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:22:59.747

您不能在不修改数据源的情况下调用 reloadData。如果您的数据源是一个数组，则必须将其替换为另一个不包含用户刚刚删除的元素的数组。否则，您将在 numberOfRowsInSection 中返回错误的数字，并且您的应用程序将崩溃。

# android - Sherlock ActionItems 无响应已修复

> ID：13714736
> 
> 赞同：0
> 
> 时间：2012-12-05T01:06:08.653
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试在单击 SherlockActionBar 上的操作项时加载新意图。我的代码如下：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.nav_plan) {
            return true;
        } else if (item.getItemId() == R.id.nav_my_plans) {
            Intent MyPlansIntent = new Intent(this, MyPlans.class);
            startActivity(MyPlansIntent);
            return true;
        } else if (item.getItemId() == R.id.nav_invites) {
            Intent InvitesIntent = new Intent(this, Invites.class);
            startActivity(InvitesIntent);
            return true;
        } else {
            return super.onOptionsItemSelected(item);
        }
    }   

    public boolean onCreateOptionsMenu(Menu paramMenu) {
        getSupportMenuInflater().inflate(R.menu.main_nav, paramMenu);
        return true;
    } 
```

这些是我的进口：

```
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.app.R;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText; 
```

但是，点击没有响应。难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:26:54.067

试试这个方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) { 
    getSupportMenuInflater().inflate(R.menu.main_nav, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent i;
    switch (item.getItemId()) {

    case R.id.nav_plan:
        return true;

    case R.id.nav_my_plans:
        i = new Intent(YOUR_ACTIVITY_CLASS_NAME.this, MyPlans.class);
        startActivity(i);
        return true;

    case R.id.nav_invites:
        i = new Intent(YOUR_ACTIVITY_CLASS_NAME.this, Invites.class);
        startActivity(i);
        return true;
     }
    return super.onOptionsItemSelected(item);
} 
```

# jquery - jquery表行搜索问题

> ID：13714737
> 
> 赞同：0
> 
> 时间：2012-12-05T01:06:12.717
> 
> 标签：jquery

我正在动态创建一个表并将其解析为一个表。显示表格后，我希望用户能够对所有行进行实时搜索。我在让它正常工作方面遇到问题。

包含的源代码 - 跳到下一个代码部分，查看与表行的实时搜索特别相关的 js。

```
 <html>
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Pairings</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
        <script src="http://www.parsecdn.com/js/parse-1.1.12.min.js"></script>

        <script id="openDay" type="text/template">
<input type="text" id="search" placeholder="Type to search">

                <table data-role="table" id="pairingsTable" data-mode="columntoggle" class="ui-responsive table-stroke">
                        <thead>
                                <th data-priority="2">Grp</th>
                                <th>Pro / Am</th>
                                <th data-priority="1">Thr</th>
                                <th data-priority="3">Fri</th>
                                <th data-priority="4">Sat</th>
                        </thead>
                        <tbody>
        </script>

        <script id="closeDay" type="text/template">
                        </tbody>
                </table>
        </script>

        <script id="pairing" type="text/template">
                <tr>
                        <td><%= this.model.get("GroupID") %></td>
                        <td style="padding:6px;"><%= this.model.get("Professional1") %> and <%= this.model.get("Amateur1") %><br>
                        <%= this.model.get("Professional2") %> and <%= this.model.get("Amateur2") %></td>
                        <td><%= this.model.get("ThursdayCourse") %><br>
                        <%= this.model.get("ThursdayTeeTime") %> <%= this.model.get("TenthTee1") %></td>
                        <td><%= this.model.get("FridayCourse") %><br>
                        <%= this.model.get("FridayTeeTime") %> <%= this.model.get("TenthTee2") %></td>
                        <td><%= this.model.get("SaturdayCourse") %><br>
                        <%= this.model.get("SaturdayTeeTime") %> <%= this.model.get("TenthTee3") %></td>
                </tr>
        </script>
        <script>
        $(function(){

                Parse.$ = jQuery;
                // Connect to Parse

                Parse.initialize("soyC2zYsel97QtRsNhhNUxLoBgKe6kxnX0WxUBYT", "mZL82WFBjR2UUwJrwIu5WYLoRr0FzjPlHiTrD8zj");

                var Pairing = Parse.Object.extend("golfTourney");

                var Pairings = Parse.Collection.extend({
                        model: Pairing
                });

                var PairingView = Parse.View.extend({
                        template:  _.template($("#pairing").html()),

                        initialize: function(){
                                _.bindAll(this, 'render');
                        },

                        render: function(){
                                return this.template(this.model);
                        }
                });

                var AppView = Parse.View.extend({
                        el: $("div"),
                        openTemplate: _.template($("#openDay").html()),
                        closeTemplate: _.template($("#closeDay").html()),

                        initialize: function() {
                                _.bindAll(this, 'render');
                                var self = this;

                                this.collection = new Pairings;
                                this.collection.query = new Parse.Query(Pairing);
                                this.collection.query.ascending("GroupID");
                        this.collection.fetch();

                        this.collection.bind('reset', function(){
                                self.render();
                        });
                        },
                        render: function(collection) {
                                var self = this, html = this.openTemplate();

                                console.log(this.collection);

                                this.collection.sortBy(function(m){
                                        return m.get("GroupID");
                                })

                                this.collection.forEach(function(m){
                                        var pairing = new PairingView({model: m});
                                        html += pairing.render();
                                });

                                html += this.closeTemplate();
                                this.$el.append(html);
                        }
                });

                var appview = new AppView();
        }); 
```

这是有问题的js....

```
 $('#pairingsTable').load(function(){

                var $rows = $('#pairingsTable tr');
                $('#search').keyup(function() {
                        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

                        $rows.show().filter(function() {
                                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                                return !~text.indexOf(val);
                        }).hide();
                });
        });
        </script>

</head>
<body>

        <div>

        </div>

</body>
</html> 
```

我在这里想念什么？由于我的内容是动态生成的，我不能使用这种方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:12:53.607

问题确实是 DOM 是在页面加载后创建的。因此，一旦呈现视图，您就需要以某种方式绑定到`keyup`事件。`#search`有几种方法可以做到这一点，但这里有一种方法：

```
$(function(){
    Parse.$ = jQuery;
    // Connect to Parse

    Parse.initialize("soyC2zYsel97QtRsNhhNUxLoBgKe6kxnX0WxUBYT", "mZL82WFBjR2UUwJrwIu5WYLoRr0FzjPlHiTrD8zj");

    var Pairing = Parse.Object.extend("golfTourney");

    var Pairings = Parse.Collection.extend({
        model: Pairing
    });

    var PairingView = Parse.View.extend({
        template:  _.template($("#pairing").html()),

        initialize: function(){
            _.bindAll(this, 'render');
        },

        render: function(){
            return this.template(this.model);
        }
    });

    var AppView = Parse.View.extend({
        el: $("div"),
        openTemplate: _.template($("#openDay").html()),
        closeTemplate: _.template($("#closeDay").html()),

        initialize: function() {
            _.bindAll(this, 'render');
            var self = this;

            this.collection = new Pairings;
            this.collection.query = new Parse.Query(Pairing);
            this.collection.query.ascending("GroupID");
            this.collection.fetch();

            this.collection.bind('reset', function(){
                    self.render();
            });
        },

        render: function(collection) {
            var self = this, html = this.openTemplate();

            this.collection.sortBy(function(m){
                return m.get("GroupID");
            })

            this.collection.forEach(function(m){
                var pairing = new PairingView({model: m});
                html += pairing.render();
            });

            html += this.closeTemplate();
            this.$el.append(html);
            $(document).trigger('list-rendered');        
        }
    });

    var appview = new AppView();
});

$(document).on('list-rendered', function() {
    var $rows = $('#pairingsTable tr');
    $('#search').on('keyup', function() {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

        $rows.show().filter(function() {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return !~text.indexOf(val);
        }).hide();
    });
});​ 
```

现在我们正在触发一个自定义事件，该事件`list-rendered`在 render 方法的末尾使用`$(document).trigger('list-rendered');`. 该事件被监听并与底部的代码绑定。

工作jsfiddle：http: [//jsfiddle.net/QZYwq/](http://jsfiddle.net/QZYwq/)

# grails - 带有 Grails 的 Geoscript 工具提供 SAX 冲突

> ID：13714738
> 
> 赞同：0
> 
> 时间：2012-12-05T01:06:27.717
> 
> 标签：grails, groovy

我有一个 Geoscript 库，可以读取上传的 shapefile，然后将其转换为 WKT。这在我将库上传到 lib 目录时有效，但是当我从 Maven 中将其拉入时，我会遇到 sax 冲突。有谁知道解决方案？

这是错误

| 错误执行脚本时出错清理：加载程序约束冲突：解决覆盖方法“org.apache.tools.ant.helper.ProjectHelper2$RootHandler.setDocumentLocator(Lorg/xml/sax/Locator;)V”时类加载器（org/ 的实例当前类 org/apache/tools/ant/helper/ProjectHelper2$RootHandler 的 codehaus/groovy/grails/cli/support/GrailsRootLoader) 及其超类加载器 ( 的实例 ) 具有类型为 andler.setDocumentLocator 的不同 Class 对象(Lorg/xml/sax/Locator;)V 在签名中使用（注意：堆栈跟踪已被过滤。使用 --verbose 查看整个跟踪。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:24:38.500

这表现为 Grails 错误，即 GRAILS-9331。您应该能够排除有问题的库，但 Grails 忽略了这一点。尚不可用的 Grails 修复程序实际上似乎无法解决此问题，它只是在加载类时忽略 org.xml。这是一个间接修复，似乎仍然错误加载了 xml-apis 库。理想的解决方法是：

```
 compile ('org.geoscript:geoscript-groovy:1.0-SNAPSHOT') {
           excludes "xml-apis","xml-apis-ext","xercesImpl","xalan"
       } 
```

Grails 错误阻止了它的工作。我将排除列表和依赖项加载到 Gradle 中，并为 1.0-SNAPSHOT 生成了依赖项列表。此白名单可用于代替 'org.geoscript:geoscript-groovy:1.0-SNAPSHOT'

```
 compile("bouncycastle:bcmail-jdk14:138",
            "bouncycastle:bcprov-jdk14:138",
            "bouncycastle:bctsp-jdk14:138",
            "com.googlecode.json-simple:json-simple:1.1",
            "com.h2database:h2:1.1.119",
            "com.lowagie:itext:2.1.7",
            "com.miglayout:miglayout:3.7",
            "com.vividsolutions:jts:1.12",
            "commons-collections:commons-collections:3.2.1",
            "commons-dbcp:commons-dbcp:1.3",
            "commons-io:commons-io:2.0.1",
            "commons-jxpath:commons-jxpath:1.3",
            "commons-logging:commons-logging:1.1.1",
            "commons-pool:commons-pool:1.5.4",
            "hsqldb:hsqldb:1.8.0.10",
            "it.geosolutions.imageio-ext:imageio-ext-tiff:1.1.5",
            "it.geosolutions.imageio-ext:imageio-ext-utilities:1.1.5",
            "java3d:vecmath:1.3.2",
            "javax.media:jai_codec:1.1.3",
            "javax.media:jai_core:1.1.3",
            "javax.media:jai_imageio:1.1",
            "jdom:jdom:1.0",
            "jfree:eastwood:1.1.1-20090908",
            "jfree:jcommon:1.0.13",
            "jfree:jfreechart:1.0.10",
            "jgridshift:jgridshift:1.0",
            "junit:junit:4.5",
            "mysql:mysql-connector-java:5.1.17",
            "net.java.dev.jsr-275:jsr-275:1.0-beta-2",
            "net.sf.opencsv:opencsv:2.0",
            "net.sourceforge.hatbox:hatbox:1.0.b7"
    ) {
        transitive = false
    }
    compile("org.apache.avalon.framework:avalon-framework-api:4.3.1",
            "org.apache.avalon.framework:avalon-framework-impl:4.3.1",
            "org.apache.xmlgraphics:batik-anim:1.7",
            "org.apache.xmlgraphics:batik-awt-util:1.7",
            "org.apache.xmlgraphics:batik-bridge:1.7",
            "org.apache.xmlgraphics:batik-css:1.7",
            "org.apache.xmlgraphics:batik-dom:1.7",
            "org.apache.xmlgraphics:batik-ext:1.7",
            "org.apache.xmlgraphics:batik-gvt:1.7",
            "org.apache.xmlgraphics:batik-js:1.7",
            "org.apache.xmlgraphics:batik-parser:1.7",
            "org.apache.xmlgraphics:batik-script:1.7",
            "org.apache.xmlgraphics:batik-svg-dom:1.7",
            "org.apache.xmlgraphics:batik-svggen:1.7",
            "org.apache.xmlgraphics:batik-transcoder:1.7",
            "org.apache.xmlgraphics:batik-util:1.7",
            "org.apache.xmlgraphics:batik-xml:1.7",
            "org.apache.xmlgraphics:fop:0.94",
            "org.apache.xmlgraphics:xmlgraphics-commons:1.2",
            "org.bouncycastle:bcmail-jdk14:1.38",
            "org.bouncycastle:bcprov-jdk14:1.38",
            "org.bouncycastle:bctsp-jdk14:1.38",
            "org.eclipse.emf:common:2.6.0",
            "org.eclipse.emf:ecore:2.6.1",
            "org.eclipse.xsd:xsd:2.6.0",
            "org.geoscript:geocss_2.9.1:0.7.4",
            "org.geoscript:geoscript-groovy:1.0-SNAPSHOT",
            "org.geotools.jdbc:gt-jdbc-h2:8.4",
            "org.geotools.jdbc:gt-jdbc-mysql:8.4",
            "org.geotools.jdbc:gt-jdbc-postgis:8.4",
            "org.geotools.jdbc:gt-jdbc-spatialite:8.4"
    ) {
        transitive = false
    }
    compile("org.geotools.ogc:net.opengis.fes:8.4",
            "org.geotools.ogc:net.opengis.ows:8.4",
            "org.geotools.ogc:net.opengis.wfs:8.4",
            "org.geotools.ogc:org.w3.xlink:8.4",
            "org.geotools.xsd:gt-xsd-core:8.4",
            "org.geotools.xsd:gt-xsd-fes:8.4",
            "org.geotools.xsd:gt-xsd-filter:8.4",
            "org.geotools.xsd:gt-xsd-gml2:8.4",
            "org.geotools.xsd:gt-xsd-gml3:8.4",
            "org.geotools.xsd:gt-xsd-ows:8.4",
            "org.geotools.xsd:gt-xsd-wfs:8.4",
            "org.geotools:gt-api:8.4",
            "org.geotools:gt-brewer:8.4",
            "org.geotools:gt-charts:8.4",
            "org.geotools:gt-coverage:8.4",
            "org.geotools:gt-cql:8.4",
            "org.geotools:gt-data:8.4",
            "org.geotools:gt-epsg-hsql:8.4",
            "org.geotools:gt-geojson:8.4",
            "org.geotools:gt-graph:8.4",
            "org.geotools:gt-grid:8.4",
            "org.geotools:gt-jdbc:8.4",
            "org.geotools:gt-main:8.4",
            "org.geotools:gt-metadata:8.4",
            "org.geotools:gt-opengis:8.4",
            "org.geotools:gt-process-feature:8.4",
            "org.geotools:gt-process-geometry:8.4",
            "org.geotools:gt-process:8.4",
            "org.geotools:gt-property:8.4",
            "org.geotools:gt-referencing:8.4",
            "org.geotools:gt-render:8.4"
    ) {
        transitive = false
    }
    compile("org.geotools:gt-shapefile:8.4",
            "org.geotools:gt-svg:8.4",
            "org.geotools:gt-swing:8.4",
            "org.jaitools:jt-utils:1.3.0",
            "org.jaitools:jt-zonalstats:1.3.0",
            "org.json:json:20090211",
            "org.opengeo:geodb:0.7-RC2",
            "org.scala-lang:scala-library:2.9.1",
            "picocontainer:picocontainer:1.2",
            "postgresql:postgresql:8.4-701.jdbc3"
    ) {
        transitive = false
    } 
```

非常冗长，但会在 Grails 2.1.0 中正确运行

# syntax-highlighting - 语法突出显示不适用于 reStructuredText

> ID：13714742
> 
> 赞同：0
> 
> 时间：2012-12-05T01:06:40.907
> 
> 标签：syntax-highlighting, restructuredtext, pandoc

我正在使用[这个指令](http://docutils.sourceforge.net/docs/ref/rst/directives.html#code)，但生成的 html 只是省略了我的代码。例如，如果我使用：

```
.. code:: python

 def my_function():
     "just a test"
     print 8/2 
```

生成的 html 不包含任何代码块。

我的机器上安装了[Pygments](http://pygments.org/)。另外，我正在使用[Pandoc](http://johnmacfarlane.net/pandoc/)生成 html 文件。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:16:49.323

pandoc 的开发版本了解语言规范，`.. code::`并将根据您的输入生成突出显示的代码。此功能将在下一个版本中提供。

# tfs - 在构建过程中自动更新 nuspec 文件

> ID：13714745
> 
> 赞同：8
> 
> 时间：2012-12-05T01:07:02.100
> 
> 标签：tfs, nuget, build-automation, nuget-package, nuspec

我已经能够使用[NuGetter](http://nugetter.codeplex.com/)创建构建定义以自动化 NuGet 包创建过程并将包上传到 NuGet 存储库。

但是，我想进一步自动化这个过程。以下是我希望在构建过程中自动化的步骤列表：

*   构建过程应该能够构建 nuspec 文件，而不是我手动创建此文件并将其保存在源代码控制存储库中，以便构建过程获取它。
*   构建过程应该能够替换 nuspec 字段。

我真正希望能够自动化的 nuspec 字段是：

**作者** 我希望构建过程将 nuspec 文件中的此字段替换为签入代码的人的姓名。

**releaseNotes** 我希望构建过程用签入注释替换 nuspec 文件中的此字段。

有没有人能够做到这一点？如果是这样，您是如何实现自动化的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:25:01.393

这可能会有所帮助。

我创建了一个自动化流程来发布开源项目的更新。

[https://github.com/DefinitelyTyped/NugetAutomation](https://github.com/DefinitelyTyped/NugetAutomation)

您可能感兴趣的一些事情。

*   我们如何使用 powershell 复制“模板”nuspec 并注入我们需要的字段。（您可以使用它来类似地替换“作者，releaseNotes”字段）
*   ping公共nuget服务器获取当前版本并增加版本。

它需要一些 Powershell 知识，但我希望它能给你一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:38:38.200

这篇文章在这里[如何避免使用 nuget pack 时生成 xml 文档](https://stackoverflow.com/questions/13547853/how-to-avoid-xml-document-generation-when-using-nuget-pack)有一些想法

```
<XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/licenseUrl" Value="http://someurl" />          
<XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/projectUrl" Value="http://someurl" />          
<XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/iconUrl" Value="http://somenice.png" />            
<XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/tags" Value="My.Assembly" />           
<XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/releaseNotes" Value="Review readme.txt for details." /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T09:05:18.760

您可以添加一个新的构建后事件，该事件触发一个脚本，该脚本从“packages.config”文件中获取版本并将它们写回 nuspec 文件。

```
C:\WINDOWS\system32\windowspowershell\v1.0\powershell.exe -ExecutionPolicy Unrestricted -Command .'$(ProjectDir)..\PathToScirptLocation\NuspecAutoUpdate.ps1' -NuspecPath '$(ProjectDir)API.nuspec' -PackagesConfigPath '$(ProjectDir)packages.config' 
```

我将脚本和构建后事件上传到我的 GIT 以供任何需要它的人使用。

[https://github.com/avrum/NuspecAutoUpdate](https://github.com/avrum/NuspecAutoUpdate)

# javascript - Dojo StackedColumn 工具提示

> ID：13714746
> 
> 赞同：3
> 
> 时间：2012-12-05T01:07:05.163
> 
> 标签：javascript, dojo, tooltip, dojox.charting

当我在 dojo 中创建 StackedColumns 图表时，默认工具提示会显示累积值。我想展示个人价值（或可能两者兼而有之）。

根据我的经验，当我有一个系列的第一个值：2，另一个系列的第一个值：5 时，当悬停在第二个系列上时，工具提示会显示 7。我希望它仍然显示 5（或者可能是“值：5，累积值：7”）。

我发现以下问答非常有用。Phillipes jsFiddle 示例适用于 StackedArea，但我无法让它在 StackedColumns 上工作。 [Dojo StackedAreas 图表不接受对象作为值](https://stackoverflow.com/questions/9366221/dojo-stackedareas-chart-doesnt-accept-objects-as-values)

感谢任何帮助。

这是我的代码：

```
require(["dojox/charting/Chart", "dojox/charting/axis2d/Default",  "dojox/charting/plot2d/StackedColumns", "dojox/charting/action2d/Tooltip", "dojox/charting/action2d/Highlight",   "dojox/charting/action2d/Magnify", "dojox/charting/widget/SelectableLegend", "dojo/ready"],
  function(Chart, Default, StackedColumns, Tooltip, Highlight, Magnify, SelectableLegend, ready){
    ready(function(){
      var chart1 = new dojox.charting.Chart("chart1");
      chart1.addPlot("default",{type: "StackedColumns", gap: 2});
      chart1.addAxis("x");
      chart1.addAxis("y", {vertical: true, includeZero: true});    
      chart1.addSeries("A", [2,3,5,7,2,4,6], {plot: "default", fill: "blue", stroke: {color: "blue"}});
      chart1.addSeries("C", [5,4,2,7,5,3,1], {plot: "default", fill: "green", stroke: {color: "green"}});

      var tooltip = new Tooltip( chart1, "default", {
        text : function(point) {
          console.debug(point);
          return "This is " + point.y;        
        }              
      }); 

      chart1.render();
      var clusteredColumnsLegend = new SelectableLegend({chart: chart1}, "chart1Legend");   

    });
  }); 
```

我创建了一个新的 jsFiddle @ [http://jsfiddle.net/Tony_D/CqNhB/5/](http://jsfiddle.net/Tony_D/CqNhB/5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:12:14.510

这可能被认为是一个错误，也就是说很容易解决方法，只需通过以下方式更改您的工具提示功能：

```
var tooltip = new Tooltip( chart1, "default", {        
  text : function(point) {
    console.debug(point);
    return "This is " + point.run.data[point.index];        
  }   
}); 
```

# android - android - UnknownHostException 在一段时间后，而 android 手机上没有任何操作

> ID：13714752
> 
> 赞同：0
> 
> 时间：2012-12-05T01:07:50.190
> 
> 标签：android, unknown-host

我使用“HttpClient”和“URLConnection”从服务器获取`json`数据，并且在应用程序启动时工作正常。问题是，当我在没有任何操作的情况下离开手机大约 20 分钟后，我启动了应用程序，它给了我“UnknownHostException” `logcat`，并且没有验证数据响应。这一次，通知栏的wifi图标显示无线连接质量很好。

所以我关闭了应用程序，然后重新启动了很多次，就可以了。

我用谷歌搜索了很多以知道如何解决这个问题，但失败了。我真的很困惑。我得到了这个 - [http://www.net.princeton.edu/android/android-stops-renewing-lease-keeps-using-IP-address-11236.html](http://www.net.princeton.edu/android/android-stops-renewing-lease-keeps-using-IP-address-11236.html)，我不确定它是否由这个错误触发.

我尝试了互联网上的许多方法 - 例如“关闭并打开 wifi 代码”都不起作用。我只是想知道这是否是某些手机或android系统上的错误，或者我的代码有问题，任何建议都值得赞赏。

**2012.12.10 更新**

我尝试在每次 2 秒后再次调用它，总共 5 次等待手机从睡眠中唤醒，它在我的手机上工作正常。

```
// all these codes are running on a worker thread (not main thread)
int timeout = 5;

if (json == null) {
  do {
     Thread.sleep (2000);
     // call it agina...
     if (json != null) {
        break;
     }
  } while (--timeout >= 0);

}

if (json == null) {
    // do something if it's not working at last
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:13:54.713

解决此问题的最佳方法是使用 WakeLock。它使您的应用程序保留在设备上，这样您就不会遇到此类问题，请使用此 android 清单文件：

`<uses-permission android:name="android.permission.WAKE_LOCK"/>`

# python - 用“精简”列表替换列表列表，同时保持顺序

> ID：13714755
> 
> 赞同：22
> 
> 时间：2012-12-05T01:08:03.050
> 
> 标签：python, algorithm, python-2.x, nested-lists, itertools

我有一个列表，如我附加的代码中所示。如果有任何共同值，我想链接每个子列表。然后我想用一个精简的列表列表替换列表列表。**示例：** 如果我有`[[1,2,3],[3,4]]`我想要的列表`[1,2,3,4]`。如果我有`[[4,3],[1,2,3]]`我想要`[4,3,1,2]`的。如果我有`[[1,2,3],[a,b],[3,4],[b,c]]`我想要的`[[1,2,3,4],[a,b,c]]`，或者`[[a,b,c],[1,2,3,4]]`我不在乎哪一个。

我快到了...

我的问题是当我有`[[1,2,3],[10,5],[3,8,5]]`我想要的情况`[1,2,3,10,5,8]`但使用我当前的代码时`[1,2,3,8,10,5]`

这是我的代码：

```
import itertools

a = [1,2,3]
b = [3,4]
i = [21,22]
c = [88,7,8]
e = [5,4]
d = [3, 50]
f = [8,9]
g=  [9,10]
h = [20,21]

lst = [a,b,c,i,e,d,f,g,h,a,c,i]*1000  
#I have a lot of list but not very many different lists

def any_overlap(a, b):
  sb = set(b)
  return any(itertools.imap(sb.__contains__, a))

def find_uniq(lst):
    ''' return the uniq parts of lst'''
    seen = set()
    seen_add = seen.add
    return [ x for x in lst if x not in seen and not seen_add(x)]

def overlap_inlist(o_lst, lstoflst):
    '''
    Search for overlap, using "any_overlap", of a list( o_lst) in a list of lists (lstoflst).
    If there is overlap add the uniq part of the found list to the search list, and keep 
    track of where that list was found 
    '''
    used_lst =[ ]
    n_lst =[ ]
    for lst_num, each_lst in enumerate(lstoflst):
        if any_overlap(o_lst,each_lst):
            n_lst.extend(each_lst)
            used_lst.append(lst_num)
    n_lst= find_uniq(n_lst)
    return  n_lst, used_lst

def comb_list(lst):
    '''
    For each list in a list of list find all the overlaps using 'ovelap_inlist'.
    Update the list each time to delete the found lists. Return the final combined list. 
    '''
    for updated_lst in lst:
        n_lst, used_lst = overlap_inlist(updated_lst,lst)
        lst[:] = [x for i,x in enumerate(lst) if i not in used_lst]
        lst.insert(0,n_lst)
    return lst
comb_lst = comb_list(lst)
print comb_lst 
```

该脚本的输出是：

```
[[88, 7, 8, 9, 10], [1, 2, 3, 4, 50, 5], [21, 22, 20]] 
```

我想要它，所以密钥按原始顺序排列，例如：

```
[[88, 7, 8, 9, 10], [1, 2, 3, 4, 5, 50,], [21, 22, 20]] 
```

5 和 50 在新的lst[2]**中切换**

我对python有点陌生。我将不胜感激任何问题的解决方案或对我当前代码的评论。我不是计算机科学家，我想可能有某种算法可以快速做到这一点（也许来自集合论？）。如果有这样的算法，请指出我正确的方向。

我可能会让这种方式变得更加复杂......谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T03:04:34.760

这是一种蛮力方法（可能更容易理解）：

```
from itertools import chain

def condense(*lists):
    # remember original positions
    positions = {}
    for pos, item in enumerate(chain(*lists)):
        if item not in positions:
            positions[item] = pos

    # condense disregarding order
    sets = condense_sets(map(set, lists))

    # restore order
    result = [sorted(s, key=positions.get) for s in sets]
    return result if len(result) != 1 else result[0]

def condense_sets(sets):
    result = []
    for candidate in sets:
        for current in result:
            if candidate & current:   # found overlap
                current |= candidate  # combine (merge sets)

                # new items from candidate may create an overlap
                # between current set and the remaining result sets
                result = condense_sets(result) # merge such sets
                break
        else:  # no common elements found (or result is empty)
            result.append(candidate)
    return result 
```

### 例子

```
>>> condense([1,2,3], [10,5], [3,8,5])
[1, 2, 3, 10, 5, 8]
>>> a = [1,2,3]
>>> b = [3,4]
>>> i = [21,22]
>>> c = [88,7,8]
>>> e = [5,4]
>>> d = [3, 50]
>>> f = [8,9]
>>> g=  [9,10]
>>> h = [20,21]
>>> condense(*[a,b,c,i,e,d,f,g,h,a,c,i]*1000)
[[1, 2, 3, 4, 5, 50], [88, 7, 8, 9, 10], [21, 22, 20]]
>>> condense([1], [2, 3, 2])
[[1], [2, 3]] 
```

## 性能比较

`condense_*()`功能来自这个问题的答案。`lst_OP`来自问题的输入列表（不同大小）， -来自[@Blckknght 答案](https://stackoverflow.com/a/13716804/4279)`lst_BK`的测试列表（不同大小）。查看[源代码](https://gist.github.com/4babbce1179d77272b68/e4d5e174b09a3298766178f252d2c17c5f0619fb#file_measure_performance_condense_lists.py)。

测量表明，基于“不相交集”和“无向图的连接组件”概念的解决方案在两种类型的输入上表现相似。

```
name                       time ratio comment
condense_hynekcer     5.79 msec  1.00 lst_OP
condense_hynekcer2     7.4 msec  1.28 lst_OP
condense_pillmuncher2 11.5 msec  1.99 lst_OP
condense_blckknght    16.8 msec  2.91 lst_OP
condense_jfs            26 msec  4.49 lst_OP
condense_BK           30.5 msec  5.28 lst_OP
condense_blckknght2   30.9 msec  5.34 lst_OP
condense_blckknght3   32.5 msec  5.62 lst_OP

name                       time  ratio comment
condense_blckknght     964 usec   1.00 lst_BK
condense_blckknght2   1.41 msec   1.47 lst_BK
condense_blckknght3   1.46 msec   1.51 lst_BK
condense_hynekcer2    1.95 msec   2.03 lst_BK
condense_pillmuncher2  2.1 msec   2.18 lst_BK
condense_hynekcer     2.12 msec   2.20 lst_BK
condense_BK           3.39 msec   3.52 lst_BK
condense_jfs           544 msec 563.66 lst_BK

name                       time ratio comment
condense_hynekcer     6.86 msec  1.00 lst_rnd
condense_jfs          16.8 msec  2.44 lst_rnd
condense_blckknght    28.6 msec  4.16 lst_rnd
condense_blckknght2   56.1 msec  8.18 lst_rnd
condense_blckknght3   56.3 msec  8.21 lst_rnd
condense_BK           70.2 msec 10.23 lst_rnd
condense_pillmuncher2  324 msec 47.22 lst_rnd
condense_hynekcer2     334 msec 48.61 lst_rnd 
```

重现结果[克隆要点](https://gist.github.com/4babbce1179d77272b68)并运行[`measure-performance-condense-lists.py`](https://gist.github.com/4babbce1179d77272b68#file_measure_performance_condense_lists.py)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T05:21:44.683

这是我的方法。它使用“不相交集”的概念来首先识别哪些子列表相互重叠，然后将它们连接在一起，消除重复。

```
from collections import OrderedDict
def disjoint_set_find(djs, node): # disjoint set find, with path compression
    if node not in djs: # base case, node is a root of a set
        return node
    djs[node] = disjoint_set_find(djs, djs[node]) # recurse, caching results
    return djs[node]

def disjoint_set_union(djs, first, second):
    first = disjoint_set_find(djs, first)   # find root of first set
    second = disjoint_set_find(djs, second) # and of second set
    if first < second: # make smaller root the root of the new combined set
        djs[second] = first
    elif second < first:
        djs[first] = second
    # deliberately ignore the case where first == second (same set)

def condenseBK(*master_list):
    values = OrderedDict() # maps values to the first sublist containing them
    overlaps = {}  # maps sublist indexes to each other to form a disjoint set
    for i, sublist  in enumerate(master_list):
        for v in sublist:
            if v not in values: # no overlap, so just store value
                values[v] = i
            else: # overlap detected, do a disjoint set union
                disjoint_set_union(overlaps, values[v], i)
    output = [] # results
    output_map = {} # map from original indexes to output indexes
    for v, i, in values.items(): # iterate over values in order
        root = disjoint_set_find(overlaps, i)
        if root not in output_map:
            output_map[i] = len(output)
            output.append([]) # create new output sublists as necessary
        output[output_map[root]].append(v)
    return output 
```

样本输出：

```
>>> a = [1,2,3]
>>> b = [3,4]
>>> c = [88,7,8]
>>> d = [3, 50]
>>> e = [5,4]
>>> f = [8,9]
>>> g = [9,10]
>>> h = [20,21]
>>> i = [21,22]
>>> lst = [a,b,c,i,e,d,f,g,h,a,c,i]*1000
>>> condenseBK(*lst)
[[1, 2, 3, 4, 5, 50], [88, 7, 8, 9, 10], [21, 22, 20]] 
```

算法说明：

根据要求，这里解释了我的代码是如何工作的。

前两个函数实现了[不相交集](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)`find`的和`union`操作。数据结构是用字典映射节点到它们的父节点来实现的。任何不是字典键的节点都是集合的。该操作返回包含给定 的集合的根节点。为了提高性能，我实现了“路径压缩”，它减少了随着时间的推移所需的递归步骤的数量。该操作组合了包含其参数的集合和。`root``find``node``union``first``second`

主要`condense`功能有两个部分。首先，它设置了几个数据结构，然后使用它们来构建输出。

`values`是一个 OrderedDictionary，它从每个值映射到包含它的第一个子列表的索引。每个值添加的顺序用于以正确的顺序生成输出。

`overlaps`是用于不相交集的字典。它的节点是重叠子列表的整数索引。

第一个循环填充了这两个数据结构。它们循环遍历子列表及其内容。如果一个值以前没有出现过，它就会被添加到`values`字典中。如果已经看到，则当前子列表与包含该值的先前子列表重叠。

为了解决重叠，代码对包含两个子列表的不相交集进行并集。

输出内置在`output`列表中。因为输出子列表可能比输入中的少，所以我们需要一个额外的字典来映射旧索引（来自输入）到适用于输出列表的新索引。

为了填满输出列表，我们迭代了这些值，由于使用了 OrderedDict 类，这些值按照它们添加的顺序发生。使用不相交集，它可以正确组合重叠列表。

当有很多不立即重叠的列表要处理时，该算法具有非常好的性能。例如，这组 200 个三元素列表最终全部重叠，但您只是在处理前 100 个之后才开始看到重叠出现：

```
lst2 = [list(range(4*i,   4*(i+1)-1)) for i in range(100)] + \
       [list(range(4*i+2, 4*(i+1)+1)) for i in range(100)] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T02:28:42.703

我**确信**有一种更清洁的方法可以做到这一点，但我从一条特定的道路开始，并做了我必须做的事情以使其工作而无需任何重构。

```
lookup = {}
out = []
index = 0
for grp in lst:
    keys = [lookup.get(num, None) for num in grp]
    keys = [key for key in keys if key is not None]
    if len(keys):
        if len(set(keys)) != 1:
            for num in grp:
                out[keys[0]].append(num)
            seen = set()
            keys = [key for key in keys if key not in seen and not seen.add(key)]
            for key in keys[1:]:
                out[keys[0]].extend(out[key])
                del out[key]
            seen = set()
            out[keys[0]] = [item for item in out[keys[0]] if item not in seen and not seen.add(item)]
        else:
            for num in grp:
                lookup[num] = keys[0]
            out[keys[0]].extend(grp)
            seen = set()
            out[keys[0]] = [item for item in out[keys[0]] if item not in seen and not seen.add(item)]
    else:
        out.append(grp)
        for num in grp:
            lookup[num] = index
        index += 1

print out 
```

感谢@Steven 提供了该集合的列表缩减技术。

**输出**

```
[[1, 2, 3, 4, 5, 50], [88, 7, 8, 9, 10], [21, 22, 20]] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-06T02:52:53.360

您的问题本质上是一个图论问题，即连接组件的问题，对每个组件的元素顺序有附加要求。

在您的程序中，所有列表的集合形成一个无向图，其中每个列表都是图中的一个节点。如果两个列表有共同的元素，我们就说它们是直接连接的；如果存在第三个列表，它们直接或间接地连接，我们就说它们是间接连接的。给定例如三个列表 [a, b], [b, c] 和 [c, d]，那么 [a, b] 和 [b, c] 直接连接，以及 [b, c] 和 [c, d]，但是 [a, b] 和 [c, d] 是间接连接的，因为虽然它们不共享公共元素，但它们都使用相同的列表 [b, c] 共享元素。

如果组中的所有节点都连接（直接或间接）并且图中没有其他节点连接到组中的任何节点，则一组节点是一个连接组件。

有一个相当简单的线性时间算法，可以在无向图中生成所有连通分量。使用它，我们可以定义一个函数来生成所有压缩不相交列表的列表，同时保持其元素的顺序：

```
from itertools import imap, combinations_with_replacement
from collections import defaultdict

def connected_components(edges):
    neighbors = defaultdict(set)
    for a, b in edges:
        neighbors[a].add(b)
        neighbors[b].add(a)
    seen = set()
    def component(node, neighbors=neighbors, seen=seen, see=seen.add):
        unseen = set([node])
        next_unseen = unseen.pop
        while unseen:
            node = next_unseen()
            see(node)
            unseen |= neighbors[node] - seen
            yield node
    for node in neighbors:
        if node not in seen:
            yield component(node)

def condense(lists):
    tuples = combinations_with_replacement(enumerate(imap(tuple, lists)), 2)
    overlapping = ((a, b) for a, b in tuples
                          if not set(a[1]).isdisjoint(b[1]))
    seen = set()
    see = seen.add
    for component in connected_components(overlapping):
        yield [item for each in sorted(component)
                    for item in each[1]
                    if not (item in seen or see(item))]

print list(condense([[1, 2, 3], [10, 5], [3, 8, 5], [9]]))
print list(condense([[1, 2, 3], [5, 6], [3, 4], [6, 7]])) 
```

结果：

```
[[1, 2, 3, 10, 5, 8], [9]]
[[5, 6, 7], [1, 2, 3, 4]] 
```

的时间复杂度`condense()`是二次的，因为每个列表都必须针对每个其他列表进行测试，以确定它们是否具有共同元素。因此，性能很糟糕。我们能以某种方式改进它吗？是的。

如果两个列表有共同的元素，则它们直接相连。我们可以扭转这种关系：如果两个元素属于同一个列表，则它们是直接连接的，如果存在（直接或间接）连接到它们两者的第三个元素，则它们是间接连接的。例如，给定两个列表 [a, b] 和 [b, c]，则 a 和 b 直接连接，b 和 c 也是如此，因此 a 和 c 是间接连接的。如果我们也采用 JFSebastians 存储每个元素第一次出现的位置的想法，我们可以这样实现它：

```
def condense(lists):
    neighbors = defaultdict(set)
    positions = {}
    position = 0
    for each in lists:
        for item in each:
            neighbors[item].update(each)
            if item not in positions:
                positions[item] = position
                position += 1
    seen = set()
    def component(node, neighbors=neighbors, seen=seen, see=seen.add):
        unseen = set([node])
        next_unseen = unseen.pop
        while unseen:
            node = next_unseen()
            see(node)
            unseen |= neighbors[node] - seen
            yield node
    for node in neighbors:
        if node not in seen:
            yield sorted(component(node), key=positions.get) 
```

它仍然使用连接组件算法，但这次我们将元素视为连接，而不是列表。结果和以前一样，但由于时间复杂度现在是线性的，它运行得更快。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-15T21:29:17.023

我试图编写一个**快速且易读的解决方案**。如果我知道的话，它永远不会比其他解决方案慢很多，但有时可能会快得多，因为它针对更长的子列表或作为任何现有组子集的许多子列表进行了额外优化。（这是由“我有很多列表但不是很多不同的列表”问题的文本所激发的。）该代码仅对可能比原始数据少得多的压缩数据使用较少的内存。例如，它可以与从实时过程中收集数据的生成器一起工作。复杂度的估计是 O(n log n)。我认为没有使用排序的算法可以具有线性复杂性。

```
def condense(lists):
    groups = {}         # items divided into groups {id(the_set): the_set,...}
    members = {}        # mapping from item to group
    positions = {}      # mapping from item to sequential ordering
    iposition = 0       # counter for positions
    for sublist in lists:
        if not sublist or members.get(sublist[0], set()).issuperset(sublist):
            continue    # speed-up condition if all is from one group
        common = set([x for x in sublist if x in members])
        if common:      # any common group can be a destination for merge
            dst_group = members[common.pop()]
            common = common - dst_group   # are more groups common for sublist?
            while common:
                grp = members[common.pop()]
                if len(grp) > len(dst_group):   # merge shorter into longer grp
                    grp, dst_group = dst_group, grp
                dst_group.update(grp)
                for item in grp:
                    members[item] = dst_group
                del groups[id(grp)]
                common = common - dst_group
        else:           # or create a new group if nothing common
            dst_group = set()
            groups[id(dst_group)] = dst_group
        newitems = []
        for item in sublist:    # merge also new items
            if item not in positions:
                positions[item] = iposition
                iposition += 1
                newitems.append(item)
                members[item] = dst_group
        dst_group.update(newitems)
    return [sorted(x, key=positions.get) for x in groups.values()] 
```

对于超过大约 8 个项目的子列表，它比 pillmuncher2 更快，因为它可以一起处理更多项目。对于具有许多相似子列表或作为任何现有组的子集的许多子列表的列表也非常快。对于 lst_OP，它比 pillmuncher2 快 25%，但对于 lst_BK，慢 15%。

具有长子列表的测试数据示例是`[list(range(30)) + [-i] for i in range(100)]`.

我故意写了“common = common - dst_group”而不是使用集合运算符`-=`或“set.difference_update”，因为如果右侧的集合比左侧的集合大得多，则就地更新无效。

* * *

**修改了 Pillmuncher 的解决方案**，以便于阅读。由于用 list.append 替换了生成器，因此修改比原来的要慢一些。可能是最易读的快速解决方案。

```
# Modified pillmuncher's solution
from collections import defaultdict

def condense(lists):
    neighbors = defaultdict(set)  # mapping from items to sublists
    positions = {}                # mapping from items to sequential ordering
    position = 0
    for each in lists:
        for item in each:
            neighbors[item].update(each)
            if item not in positions:
                positions[item] = position
                position += 1
    seen = set()
    see = seen.add
    for node in neighbors:
        if node not in seen:
            unseen = set([node])      # this is a "todo" set
            next_unseen = unseen.pop  # method alias, not called now
            group = []                # collects the output
            while unseen:
                node = next_unseen()
                see(node)
                unseen |= neighbors[node] - seen
                group.append(node)
            yield sorted(group, key=positions.get) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-19T13:39:28.410

```
class List(list): pass

rv = dict()

def condense_step():
    """find and merge one overlapping pair in rv"""
    for i, iv in rv.items():
        for j, jv in rv.items():
            if i != j and i.intersection(j):
                m = i.union(j)
                del rv[i]
                del rv[j]
                rv.setdefault(m, [])
                rv[m] += iv
                rv[m] += jv
                return True

def unique(l):
    """flatten list-of-lists excluding duplicates"""
    seen = set()
    for i in sum(l, []):
        if i not in seen:
            seen.add(i)
            yield i

def condense(inp):
    rv.clear()
    inp = map(List, inp)

    for i in range(len(inp)):
        inp[i].order = i
        rv.setdefault(frozenset(inp[i]), [])
        rv[frozenset(inp[i])].append(inp[i])

    while condense_step():
        pass

    for v in rv.values():
        v.sort(key=lambda x: x.order)

    return [list(unique(i)) for i in rv.values()] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-05T04:41:55.377

此解决方案仅使用有序字典。如果希望原始副本保持不变，则需要
**deepcopy() 。**

```
from collections import OrderedDict
from copy import deepcopy

def treat(passed_list):
    L = deepcopy(passed_list)

    dic = OrderedDict()
    for subl in L:
        for x in subl:
            if x not in dic:
                dic[x] =  subl
    print 'dic at start'
    print '\n'.join('%-3s : %s' % (a,dic[a])
                    for a in dic) + '\n'

    for sublist in L:
        short = []
        short.extend(el for el in sublist
                     if el not in short)
        seen  = []
        for k,val in dic.iteritems():
            if val is sublist:
                break
            if k in short:
                if val not in seen:
                    seen.append(val)

        sumseen = []
        for elseen in seen:
            for y in elseen:
                sumseen.append(y)
                dic[y] = sumseen

        if seen:
            for el in sublist:
                if el not in sumseen:
                    sumseen.append(el)
                    dic[el] = sumseen

        sublist[:] = short

    cumul = []
    cumul.extend(lu for lu in dic.itervalues()
                 if lu not in cumul)
    return cumul

plus = [[1,2,3,2,1],[10,5,5,5,10],
        [8,5,3,3,5],[45,50,12,45,40,12]]

lst = [[1,2,3], [10,5], [3,8,5]]

for one_list in (plus,lst):
    print 'one_list before == %r\n' % one_list
    print 'treat(one_list) == %r\n' % treat(one_list)
    print 'one_list after  == %r\n' % one_list
    print '====================================' 
```

结果

```
one_list before == [[1, 2, 3, 2, 1], [10, 5, 5, 5, 10], [8, 5, 3, 3, 5], [45, 50, 12, 45, 40, 12]]

dic at start
1   : [1, 2, 3, 2, 1]
2   : [1, 2, 3, 2, 1]
3   : [1, 2, 3, 2, 1]
10  : [10, 5, 5, 5, 10]
5   : [10, 5, 5, 5, 10]
8   : [8, 5, 3, 3, 5]
45  : [45, 50, 12, 45, 40, 12]
50  : [45, 50, 12, 45, 40, 12]
12  : [45, 50, 12, 45, 40, 12]
40  : [45, 50, 12, 45, 40, 12]

treat(one_list) == [[1, 2, 3, 10, 5, 8], [45, 50, 12, 40]]

one_list after  == [[1, 2, 3, 2, 1], [10, 5, 5, 5, 10], [8, 5, 3, 3, 5], [45, 50, 12, 45, 40, 12]]

====================================
one_list before == [[1, 2, 3], [10, 5], [3, 8, 5]]

dic at start
1   : [1, 2, 3]
2   : [1, 2, 3]
3   : [1, 2, 3]
10  : [10, 5]
5   : [10, 5]
8   : [3, 8, 5]

treat(one_list) == [[1, 2, 3, 10, 5, 8]]

one_list after  == [[1, 2, 3], [10, 5], [3, 8, 5]]

==================================== 
```

该解决方案有一个不便之处：它比 JF Sebastian 的解决方案慢 2 到 3 倍。

# performance - 如何提高 Web 服务的响应时间

> ID：13714756
> 
> 赞同：0
> 
> 时间：2012-12-05T01:08:02.253
> 
> 标签：performance, load-balancing

我们已经建立了一个网络服务来提供地图瓦片，如基于 asp.net 的谷歌地图。

并且客户端要求1000个并发请求的响应时间必须小于1秒。

现在我们使用加载器平衡硬件，我们使用 iis 将服务部署到 4 个服务器，然后我们使用加载器平衡硬件将请求分发到不同的服务器。

但是有人建议我们不应该使用加载器平衡，因为浏览器请求限制。

据说对于给定的域，浏览器可以同时发送的请求数是有限的（可能是10个或更多）。

所以我们应该直接向不同的瓦片服务器发出我们的客户端应用程序请求。

现在，我很困惑，哪个是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:20:47.890

> 据说对于给定的域，浏览器可以同时发送的请求数是有限的（可能10个或更多）

1.  这只是真实的。大多数浏览器不会向同一个域发出多个请求。但是，没有设定的标准或定义的限制，并且通常是可配置的。
2.  您如何知道您的所有用户将通过浏览器访问您的服务
3.  如果你有 1000 个并发用户会发生什么？

使用负载均衡器

# jquery - 试图绑定 jquery(document).click 事件

> ID：13714761
> 
> 赞同：0
> 
> 时间：2012-12-05T01:08:29.517
> 
> 标签：jquery, asp.net, ajax

我试图在发送请求时在 asp.net ajax BeginrequestHandler 和 EndRequestHandler 事件中绑定 $(document).click 事件，应该调用 unbind 以便单击事件不起作用。当调用 endRequestHandler 时，应该再次执行绑定。

```
function BeginRequestHandler(sender, args)
     {
       $(document).unbind("click");
       $("#divUtility > :first-child").css({
        'position':'absolute', 
        'left':'0px', 
        'right':'0px', 
        'width':'250px', 
        'height':'70px', 
        'background-color':'#EfEfEF'
       });
     }

   function EndRequestHandler(sender, args)
   {
      $(document).bind("click",function(e){
       if($(e.target).hasClass("UtilityClass"))
       { 
       }
       else
       {
         $('.popupstyle').hide();
       }
      });
   } 
```

其余的工作正常。但是，取消绑定不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:17:29.257

第一个任务是放一些

```
console.debug("your message") 
```

在你的功能中

```
function BeginRequestHandler(sender, args) 
```

为了检查回调是否真的被调用。

其次，您应该在单击时使用命名空间，以避免删除单击事件（甚至不是您的）上的所有事件处理程序。添加你的事件处理程序

```
$(document).bind("click.myNameSpace", function(mouseEvent) {
    // your code here
}); 
```

并删除您的事件处理程序

```
$(document).unbind("click.myNameSpace"); 
```

# android - 将 InputMethodService 子类添加到清单

> ID：13714767
> 
> 赞同：4
> 
> 时间：2012-12-05T01:09:14.847
> 
> 标签：android

如果我创建一个 InputMethodService，我的应用程序是否默认使用它？还是我需要去设置指向它？我创建了一个名为 MultiInputMethodService 的 InputMethodService 子类，这样即使连接了硬键盘，我也可以显示软键盘。除了继承 InputMethodService 并将服务添加到清单中之外，我还缺少什么，如下所示？

多输入方法服务：

```
package com.mydomain;

import android.inputmethodservice.InputMethodService;
import android.util.Log;

public class MultiInputMethodService extends InputMethodService {

        @Override
        public boolean onEvaluateInputViewShown () {
            Log.i("onEvaluateInputViewShow","onEvaluateInputViewShown");
             return true;
        }   
} 
```

清单文件（在服务中添加了元数据标签，因此删除没有区别）：

```
<application android:label="@string/app_name" >
    <service android:name="MultiInputMethodService"
            android:permission="android.permission.BIND_INPUT_METHOD">
        <intent-filter>
            <action android:name="android.view.InputMethod" />
        </intent-filter>
    </service>
 .... 
```

# php - 使用字符串作为数组名称和索引获取数组值

> ID：13714771
> 
> 赞同：1
> 
> 时间：2012-12-05T01:09:39.573
> 
> 标签：php

我正在尝试通过字符串将数组中的特定索引发送到一些 php 代码来描述我需要组合的数据。我遇到的问题是 SESSION 在函数 Str_To_Array 中似乎不可用。我在这里缺少关于范围的什么？另外，如果有人可以推荐更好的方法，我将不胜感激。PS我添加了包含以防包含该功能导致任何异常。

```
function Str_To_Array($str) {

    $d = explode(':',$str) ;

    print_r($d[0]) ;

    $t = $d[0] ;

    $n = $$t ;

    if( !isset( $d[1] ) ) { return $n ; }

    $n = $n[$d[1]] ;

    return $n ;
}

include(DIR_ROOT . "php_function/Str_To_Array.php") ;

$test = '_SESSION' ;
$ARRANGE = Str_To_Array($test) ;<----this says _SESSION is undefined
print_r($ARRANGE) ;
$ARRANGE = $$test ;<----this works
print_r($ARRANGE) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:13:27.257

看起来是PHP的问题，只是尝试了下面的代码，在函数中，`${'_SESSION'}`工作和`$$t`不工作。这只发生`$_SESSION`在其他超级全局等但不会`$_POST`发生`$_GET`。

```
<?php
session_start();

function foo() {
  $t = '_SESSION';
  $a = $$t;             // not work
  $b = ${'_SESSION'};   // works
  var_dump($a, $b);
}

foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:36:17.033

很难遵循这里的目的，但是这应该有效

```
function getVar($str)
{
    $vars = get_defined_vars();
    $d = explode(':',$str) ;
    if (isset($vars[$d[0]]) || array_key_exists($vars[$d[0]])) {
        if (!empty($d[1]) && (isset($vars[$d[0]][$d[1]]) || array_key_exists($vars[$d[0]][$d[1]]))
            return $vars[$d[0]][$d[1]];
        return $vars[$d[0]];
    }
    return null;
} 
```

# joomla - Joomla 1.5：$this->countModules 为 Jumi 模块返回 1，即使为空

> ID：13714772
> 
> 赞同：0
> 
> 时间：2012-12-05T01:09:45.370
> 
> 标签：joomla, joomla1.5, joomla-extensions, jumi

在 Joomla 1.5 的网站上工作！通常在测试 Joomla 中的模块位置是否为空时！我会做这样的事情：

```
<?php if ($this->countModules('position')): ?>
    BEFORE
    <jdoc:include type="modules" name="position" style="xhtml" />
    AFTER
<?php endif; ?> 
```

但就我而言，我有一个引用外部代码源的[jumi 模块](http://2glux.com/projects/jumi)。 ![引用外部代码源的 jumi 模块](../Images/904f79b92148c840e1fe6a0ce4f41d34.png)

在某些情况下，它会是空白的，在这种情况下，我也不希望 BEFORE 和 AFTER 位显示。但是每当我尝试运行上面的代码时，会显示之前和之后的部分，因为 $this->countModules() 返回 1 而不是 0。

我将模块的“如果为空则隐藏”设置为“是”，但这似乎没有帮助。 ![如果为空则隐藏](../Images/3f98d4d6cbcf0bdd69604b2a7f74db9c.png)

我什至尝试设置 return false; 在外部源代码上，但这似乎也无济于事。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:15:31.483

`Hide if empty`无法隐藏，`BEFORE and AFTER`因为它处于计数条件。`BEFORE and AFTER` 并且只有在没有为该位置启用模块时才会隐藏。因此，要隐藏这些内容，您必须将此内容放入模块中。并检查 if 为空的条件。如果不清楚，请告诉我。

# firefox - 开发利用 gBrowser 全局变量的 firefox 扩展

> ID：13714781
> 
> 赞同：0
> 
> 时间：2012-12-05T01:11:06.627
> 
> 标签：firefox, firefox-addon, xul

> **可能重复：**
> [就地开发一个Firefox扩展（不是首先通过编码到xpi）？](https://stackoverflow.com/questions/13304571/develop-a-firefox-extension-in-place-not-via-encoding-to-xpi-first)

我想知道是否可以测试和开发一个使用 gBrowser 全局变量的 Firefox 扩展，而无需将扩展编译为 .xpi 并将其加载到 Firefox 中。现在，为了编写使用 gBrowser 的代码，我必须将所有 xul/js 文件编译成 .xpi 文件。然后我必须将此文件加载到 Firefox 中，重新启动并测试。是否有其他方法可以使调试更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:02:13.300

查看我的工具栏教程的[动态开发](http://www.borngeek.com/firefox/toolbar-tutorial/chapter-4/)章节。它解释了如何实现一个动态开发环境，让您不必每次都打包扩展（这真的很痛苦）。您可能需要先阅读[创建框架](http://www.borngeek.com/firefox/toolbar-tutorial/chapter-2/)一章，因为它为一些动态开发设置奠定了基础。

# bash - grep 在 bash 脚本中不起作用

> ID：13714785
> 
> 赞同：0
> 
> 时间：2012-12-05T01:11:11.403
> 
> 标签：bash, if-statement, grep

我是新手，所以这似乎是一个愚蠢的问题，但我就是无法让这段代码正常工作。看起来 grep 正在寻找变量名而不是它的值。感谢任何帮助。

```
 if [ "$file" == "osi_OpenInterest" ]
    then
        count=`cat timestamps.txt | grep "${file}" | grep "${currdate}" | grep "07:" | grep "AM" | wc -l`
        if [ $count -eq 0 ];
        then
           echo "$file not found" | mail -s "RetrieverB Missing File" "$email"
        fi
    fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:36:09.397

`currdate`是`12-04-12`。您的文件包含不同格式的日期`12-04-2012`，因此不匹配。

# php - 使用 PHP 从锚链接中提取图像 href 值

> ID：13714787
> 
> 赞同：1
> 
> 时间：2012-12-05T01:11:11.450
> 
> 标签：php, html-parsing

我希望使用 PHP 从锚链接中提取图像 href 值。见下图：

开始：

```
<a href="http://someimagelink.com/image34.jpg">image34.jpg</a> 
```

目标：

```
http://someimagelink.com/image34.jpg 
```

更具体地说，我如何去掉它`<a href="`，`">image34.jpg</a>`以便它适用于给定的任何图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:20:14.647

你也可以像这样使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)：

```
$html = file_get_html('http://www.google.com/');

// Find all images 
foreach($html->find('img') as $element) 
    echo $element->src . '<br>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T01:14:15.427

您应该查看 PHP 的 DOM 解析器： http: [//php.net/manual/en/domdocument.loadhtml.php](http://php.net/manual/en/domdocument.loadhtml.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:30:39.023

做这样的事情怎么办？我不确定这是否是一个好的解决方案......想法？

```
$html = "<a href='http://www.imagelink.com/images33.jpg'>images33.jpg</a>";
preg_match_all('/href=[\'"]?([^\s\>\'"]*)[\'"\>]/', $html, $matches);
$hrefs = ($matches[1] ? $matches[1] : false);
$url = implode('',$hrefs);
echo "<a href='$url'><img src='$url' width='100'></a>" ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T01:31:55.747

您可以使用 PHP DOMDocument 来获得所需的内容。代码看起来像这样：

```
$dom_doc = DOMDocument::loadHTML($html_string);
$a_tag_node_list = $dom_doc->getElementsByTagName('a');
foreach($a_tag_node_list as $a_tag_node) {
    echo $a_tag_node->attributes->getNamedItem("href")->nodeValue;
} 
```

# c# - 在 Windows 窗体中制作 WPF 渐变

> ID：13714789
> 
> 赞同：2
> 
> 时间：2012-12-05T01:11:27.740
> 
> 标签：c#, wpf, winforms, gradient

我正在做一个应用程序，我有 WPF 表单和 winforms。我在 WPF 中制作了一个很酷的背景渐变，但我也需要在我的 Windows 窗体中使用它。我尝试使用此代码，但它不起作用。它以 Windows 形式绘制渐变，但与 WPF 不同。

这是 WPF 的代码：

```
<Grid.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFFCFEFF" Offset="0" />
            <GradientStop Color="#FFA6BAD0" Offset="1" />
            <GradientStop Color="#FFE4EFF7" Offset="0.317" />
            <GradientStop Color="#FFC8D4E3" Offset="0.585" />
            <GradientStop Color="#FFB1C6D7" Offset="0.797" />
            <GradientStop Color="#FFF7FBFD" Offset="0.146" />
            <GradientStop Color="#FFD9E4EE" Offset="0.439" />
        </LinearGradientBrush>
    </Grid.Background> 
```

这里是我的 Winform 代码（颜色相同）：

```
public void Form_Background(object sender, PaintEventArgs e)
    {
        Color c1 = Color.FromArgb(255, 252, 254, 255);
        Color c2 = Color.FromArgb(255, 247, 251, 253);
        Color c3 = Color.FromArgb(255, 228, 239, 247);
        Color c4 = Color.FromArgb(255, 217, 228, 238);
        Color c5 = Color.FromArgb(255, 200, 212, 217);
        Color c6 = Color.FromArgb(255, 177, 198, 215);
        Color c7 = Color.FromArgb(255, 166, 186, 208);

        LinearGradientBrush br = new LinearGradientBrush(this.ClientRectangle, Color.Black, Color.Black, 0, false);
        ColorBlend cb = new ColorBlend();
        cb.Positions = new[] { 0, (float)0.146, (float)0.317, (float)0.439, (float)0.585, (float)0.797 , 1};
        cb.Colors = new[] { c1, c2, c3, c4, c5, c6, c7 };
        br.InterpolationColors = cb;

        // rotate
        br.RotateTransform(90);

        // paint
        e.Graphics.FillRectangle(br, this.ClientRectangle);
    } 
```

希望你们能帮助我，我需要快速解决这个问题，我不想使用图像背景或在我的 winforms 中放置 WPF 控件..

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:48:22.513

我不确定这是否会完全正确，因为您没有包含不同之处的屏幕截图，但我会尝试一下：

```
public void Form_Background(object sender, PaintEventArgs e)
    {
        Color c1 = Color.FromArgb(255, 252, 254, 255);
        Color c2 = Color.FromArgb(255, 247, 251, 253);
        Color c3 = Color.FromArgb(255, 228, 239, 247);
        Color c4 = Color.FromArgb(255, 217, 228, 238);
        Color c5 = Color.FromArgb(255, 200, 212, 217);
        Color c6 = Color.FromArgb(255, 177, 198, 215);
        Color c7 = Color.FromArgb(255, 166, 186, 208);

        // Changed: c1 / c7 as start colors, and at 90 degrees.  Removed later transform.
        LinearGradientBrush br = new LinearGradientBrush(this.ClientRectangle, c1, c7, 90, true);
        ColorBlend cb = new ColorBlend();
        cb.Positions = new[] { 0, (float)0.146, (float)0.317, (float)0.439, (float)0.585, (float)0.797, 1 };
        cb.Colors = new[] { c1, c2, c3, c4, c5, c6, c7 };
        br.InterpolationColors = cb;

        // removed rotate call

        // paint
        e.Graphics.FillRectangle(br, this.ClientRectangle);
    } 
```

这看起来是正确的，将 XAML 设计器与我的 WinForms 输出（左侧 XAML 设计器，右侧运行 WinForms 应用程序）进行比较： ![渐变](../Images/f4fa14cb9b3114f9040f1658d9953d3f.png)

# python - 如何将此代码从 python 循环重写为 numpy 向量（用于性能）？

> ID：13714790
> 
> 赞同：2
> 
> 时间：2012-12-05T01:11:46.100
> 
> 标签：python, performance, algorithm, numpy, vectorization

我有这个代码：

```
for j in xrange (j_start, self.max_j):
   for i in xrange (0, self.max_i):
      new_i = round (i + ((j - j_start) * discriminant))
      if new_i >= self.max_i:
         continue 
      self.grid[new_i, j] = standard[i] 
```

我想通过丢弃缓慢的原生 python 循环来加速它。有可能改用 numpy 向量运算，它们真的很快。怎么做？

```
j_start, self.max_j, self.max_i, discriminant 
```

整数、整数、整数、浮点数（常量）。

```
self.grid 
```

二维 numpy 数组（self.max_i x self.max_j）。

```
standard 
```

一维 numpy 数组（self.max_i）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:02:29.217

这是一个完整的解决方案，也许会有所帮助。

```
jrange = np.arange(self.max_j - j_start)
joffset = np.round(jrange * discriminant).astype(int)
i = np.arange(self.max_i)

for j in jrange:
    new_i = i + joffset[j]
    in_range = new_i < self.max_i
    self.grid[new_i[in_range], j+j_start] = standard[i[in_range]] 
```

可能可以对两个循环进行矢量化，但我认为这会很棘手。

我没有对此进行测试，但我相信它计算的结果与您的代码相同。

# sql-server - 查找多组日期之间的最小和最大日期

> ID：13714793
> 
> 赞同：1
> 
> 时间：2012-12-05T01:12:25.397
> 
> 标签：sql-server, date-range

鉴于以下一组数据，我试图确定如何选择组合日期范围的开始和结束日期，当它们相互交叉时。

例如，对于 PartNum 115678，我希望我的最终结果集显示日期范围`2012/01/01 - 2012/01/19`（第 1 行、第 2 行和第 4 行合并，因为日期范围相交）和`2012/02/01 - 2012/03/28`（第 3 行，因为这些与之前找到的范围不相交）。

对于 PartNum 213275，我想选择该部分的唯一行，`2012/12/01 - 2013/01/01`.

![示例数据](../Images/8e208c8d27f6151ecf70ab4a5abf3b07.png)

编辑：我目前正在使用以下 SQL 语句，但它并没有完全满足我的需要。

```
with DistinctRanges as (
    select distinct
        ha1.PartNum "PartNum",
        ha1.StartDt "StartDt",
        ha2.EndDt "EndDt"
    from dbo.HoldsAll ha1
    inner join dbo.HoldsAll ha2 
        on ha1.PartNum = ha2.PartNum
    where 
        ha1.StartDt <= ha2.EndDt 
        and ha2.StartDt <= ha1.EndDt
)
select 
    PartNum, 
    StartDt, 
    EndDt
from DistinctRanges 
```

以下是编辑中显示的查询结果：

![内联查询的结果](../Images/142ed8c2144bedeaf66b229252a98ae1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T03:07:06.633

你最好有一个持久的日历表，但如果你不这样做，下面的 CTE 将临时创建它。该`TOP(36000)`部分足以从`'20100101'`同一行的枢轴 ( ) 为您提供 10 年的日期。

[SQL小提琴](http://sqlfiddle.com/#!3/5d5b0/1)

**MS SQL Server 2008 架构设置**：

```
create table data (
    partnum int,
    startdt datetime,
    enddt datetime,
    age int
);
insert data select 
12345, '20120101', '20120116', 15 union all select
12345, '20120115', '20120116', 1 union all select
12345, '20120201', '20120328', 56 union all select
12345, '20120113', '20120119', 6 union all select
88872, '20120201', '20130113', 43; 
```

**查询 1**：

```
with Calendar(thedate) as (
    select TOP(36600) dateadd(d,row_number() over (order by 1/0),'20100101')
      from sys.columns a
cross join sys.columns b
cross join sys.columns c
), tmp as (
   select partnum, thedate,
          grouper = datediff(d, dense_rank() over (partition by partnum order by thedate), thedate)
     from Calendar c
     join data d on d.startdt <= c.thedate and c.thedate <= d.enddt
)
select partnum, min(thedate) startdt, max(thedate) enddt
  from tmp
 group by partnum, grouper
 order by partnum, startdt 
```

**[结果](http://sqlfiddle.com/#!3/5d5b0/1/0)**：

```
| PARTNUM |                         STARTDT |                          ENDDT |
------------------------------------------------------------------------------
|   12345 |  January, 01 2012 00:00:00+0000 | January, 19 2012 00:00:00+0000 |
|   12345 | February, 01 2012 00:00:00+0000 |   March, 28 2012 00:00:00+0000 |
|   88872 | February, 01 2012 00:00:00+0000 | January, 13 2013 00:00:00+0000 | 
```

# openid - DotNetOpenAuth：OpenID 提供程序返回略有不同的声明标识符

> ID：13714797
> 
> 赞同：0
> 
> 时间：2012-12-05T01:13:08.113
> 
> 标签：openid, dotnetopenauth

我正处于修改 DotNetOpenAuth 附带的 OpenID 提供程序 MVC 示例的最后阶段。

我在依赖方收到以下错误“ *OpenID 提供程序为发现信息不匹配的标识符发出了断言*”。

RP 以以下格式获取声明的标识符：

> > [http://www.sampleOpenIDProvider.com/user/justpartofthecrowd](http://www.sampleOpenIDProvider.com/user/justpartofthecrowd)

但它是从 OP 回来的：

> > [http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd](http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd)

对于使用过 DotNetOpenAuth OpenID 提供程序 MVC 示例的任何人，主要区别在于我使用的是 MVC 4 和 Razor 视图...

以防万一这对任何人都有帮助，这里是最后一点的日志：

```
HTTP GET http://www.sampleOpenIDProvider.com/user/justpartofthecrowd
http://www.sampleOpenIDProvider.com/user/justpartofthecrowd
HTTP GET http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd
http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd
ENTER controller SGAccount, action Login
EXIT  controller SGAccount, action Login - time spent 1
X-XRDS-Location found in HTML Http-Equiv tag.  Preparing to pull XRDS from http://www.sampleOpenIDProvider.com/Home/xrds
HTTP GET http://www.sampleOpenIDProvider.com/Home/xrds
http://www.sampleOpenIDProvider.com/Home/xrds
HTTP GET http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fHome%2fxrds
http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fHome%2fxrds
ENTER controller SGAccount, action Login
EXIT  controller SGAccount, action Login - time spent 1
Total services discovered in XRDS: 0
[]
Total services discovered in HTML: 2
[{   ClaimedIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderLocalIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderEndpoint: http://www.sampleOpenIDProvider.com/OpenId/Provider   OpenID version: 2.0   Service Type URIs:    http://specs.openid.net/auth/2.0/signon  }, {   ClaimedIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderLocalIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderEndpoint: http://www.sampleOpenIDProvider.com/OpenId/Provider   OpenID version: 1.1   Service Type URIs:    http://openid.net/signon/1.1  },]
Protocol error: The OpenID Provider issued an assertion for an Identifier whose discovery information did not match.    Assertion endpoint info:   ClaimedIdentifier: http://www.sampleOpenIDProvider.com/user/justpartofthecrowd  ProviderLocalIdentifier: http://www.sampleOpenIDProvider.com/user/justpartofthecrowd  ProviderEndpoint: http://www.sampleOpenIDProvider.com/OpenId/Provider  OpenID version: 2.0  Service Type URIs:  Discovered endpoint info:  [{   ClaimedIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderLocalIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderEndpoint: http://www.sampleOpenIDProvider.com/OpenId/Provider   OpenID version: 2.0   Service Type URIs:    http://specs.openid.net/auth/2.0/signon  }, {   ClaimedIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderLocalIdentifier: http://www.sampleOpenIDProvider.com/SGAccount/Login?ReturnUrl=%2fuser%2fjustpartofthecrowd   ProviderEndpoint: http://www.sampleOpenIDProvider.com/OpenId/Provider   OpenID version: 1.1   Service Type URIs:    http://openid.net/signon/1.1  },]     at DotNetOpenAuth.Messaging.ErrorUtilities.VerifyProtocol(Boolean condition, String unformattedMessage, Object[] args)     at DotNetOpenAuth.OpenId.RelyingParty.PositiveAuthenticationResponse.VerifyDiscoveryMatchesAssertion(OpenIdRelyingParty relyingParty)     at DotNetOpenAuth.OpenId.RelyingParty.PositiveAuthenticationResponse..ctor(PositiveAssertionResponse response, OpenIdRelyingParty relyingParty)     at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.GetResponse(HttpRequestBase httpRequestInfo)     at OpenIdRelyingPartyMvc.Controllers.UserController.Authenticate(String returnUrl)     at lambda_method(Closure , ControllerBase , Object[] )     at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)     at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)     at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()     at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)     at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)     at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)     at System.Web.Mvc.Controller.ExecuteCore()     at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)     at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()     at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()     at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()     at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()     at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)     at System.Web.HttpApplication.PipelineStepManager.ResumeSteps(Exception error)     at System.Web.HttpApplication.BeginProcessRequestNotification(HttpContext context, AsyncCallback cb)     at System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context)     at System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr rootedObjectsPointer, IntPtr nativeRequestContext, IntPtr moduleData, Int32 flags)     at System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(IntPtr rootedObjectsPointer, IntPtr nativeRequestContext, IntPtr moduleData, Int32 flags)     at System.Web.Hosting.UnsafeIISMethods.MgdIndicateCompletion(IntPtr pHandler, RequestNotificationStatus& notificationStatus)     at System.Web.Hosting.UnsafeIISMethods.MgdIndicateCompletion(I 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:16:32.087

在我看来，您的`http://www.sampleOpenIDProvider.com/user/justpartofthecrowd`URL 正在重定向到登录页面（未通过身份验证时）。你不能这样配置它。声明的标识符 URL 必须可供匿名客户端公开访问。

# jquery - 如何创建生物信息 Descipton 阅读更多跳转链接 (WP)

> ID：13714799
> 
> 赞同：0
> 
> 时间：2012-12-05T01:13:10.747
> 
> 标签：jquery

当字符超过 320 个字符时，如何创建生物信息描述 阅读更多（点击在同一页阅读全文）。

[以下是我在此页面](http://webresepi.com/author/shahrul/)上的生物信息描述。

```
<p><?php echo $curauth->description; ?></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:25:00.903

这是一个工作示例：http: [//jsfiddle.net/S8Cxr/](http://jsfiddle.net/S8Cxr/)

HTML：

```
<p id="bio">I am a sahm (stay at home mom) mom of 8, passionately interested in...well..my interests! I am restoring a 100 year old farm house, homeschooling the six kids still at home, raising Nigerian Dwarf Dairy goats, and trying to change our lives and those around us by the decisions and choices we make daily. I love reading, spinning fiber, sewing, cooking, writing, painting, crafting, antiquing...and just about anything shiny can grab my interest for a bit..Well maybe I am not that bad.</p>​ 
```

JavaScript：

```
$(document).ready(function() {
    var bio = $('#bio');
    var text = bio.text();

    if (text.length > 320) {
        bio.html(text.slice(0, 320) + '<span class="more">... (<a class="expand" href="#">more</a>)</span><span class="hidden">' + text.slice(320) + '</span>');

        $('.expand').on('click', function(event) {
            $(event.target)
                .closest('p')
                .find('.hidden')
                    .removeClass('hidden')
                    .end()            
                .find('.more')
                    .remove();
        });
    }    
});​ 
```

# hadoop - 使用 java.lang.NoClassDefFoundError 在 AWS EMR 上运行 Pig UDF：org/apache/pig/LoadFunc

> ID：13714800
> 
> 赞同：0
> 
> 时间：2012-12-05T01:13:13.573
> 
> 标签：hadoop, amazon-web-services, apache-pig, amazon-emr

我正在开发一个应用程序，它尝试读取存储在 S3 bucks 中的日志文件并使用 Elastic MapReduce 对其进行解析。当前日志文件具有以下格式

```
------------------------------- 
COLOR=Black 
Date=1349719200 
PID=23898 
Program=Java 
EOE 
------------------------------- 
COLOR=White 
Date=1349719234 
PID=23828 
Program=Python 
EOE 
```

所以我尝试将文件加载到我的 Pig 脚本中，但内置的 Pig Loader 似乎无法加载我的数据，所以我必须创建自己的 UDF。由于我对 Pig 和 Hadoop 还很陌生，因此我想在编写自己的脚本之前先尝试其他人编写的脚本，以了解 UDF 的工作原理。我从这里找到了一个[http://pig.apache.org/docs/r0.10.0/udf.html](http://pig.apache.org/docs/r0.10.0/udf.html)，有一个 SimpleTextLoader。为了编译这个 SimpleTextLoader，我必须添加一些导入，如

```
import java.io.IOException; 
import java.util.ArrayList;
import org.apache.hadoop.io.Text; 
import org.apache.hadoop.mapreduce.Job; 
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat; 
import org.apache.hadoop.mapreduce.InputFormat; 
import org.apache.hadoop.mapreduce.RecordReader; 
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat; 
import org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigSplit; 
import org.apache.pig.backend.executionengine.ExecException; 
import org.apache.pig.data.Tuple; 
import org.apache.pig.data.TupleFactory;
import org.apache.pig.data.DataByteArray; 
import org.apache.pig.PigException; 
import org.apache.pig.LoadFunc; 
```

然后，我发现我需要编译这个文件。我必须下载 svn 和 pig running

```
sudo apt-get install subversion 
svn co http://svn.apache.org/repos/asf/pig/trunk 
ant 
```

现在我有一个 pig.jar 文件，然后我尝试编译这个文件。

```
javac -cp ./trunk/pig.jar SimpleTextLoader.java 
jar -cf SimpleTextLoader.jar SimpleTextLoader.class 
```

它编译成功，我在 Pig 中输入 grunt，在 grunt 中我尝试加载文件，使用

```
grunt> register file:/home/hadoop/myudfs.jar
grunt> raw = LOAD 's3://mys3bucket/samplelogs/applog.log' USING myudfs.SimpleTextLoader('=') AS (key:chararray, value:chararray); 

2012-12-05 00:08:26,737 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2998: Unhandled internal error. org/apache/pig/LoadFunc Details at logfile: /home/hadoop/pig_1354666051892.log 
```

在 pig_1354666051892.log 里面，它有

```
Pig Stack Trace
---------------
ERROR 2998: Unhandled internal error. org/apache/pig/LoadFunc

java.lang.NoClassDefFoundError: org/apache/pig/LoadFunc 
```

我还尝试使用来自[http://wiki.apache.org/pig/UDFManual](http://wiki.apache.org/pig/UDFManual)的另一个 UDF (UPPER.java) ，但尝试使用 UPPER 方法仍然会出现相同的错误。你能帮帮我吗，这里有什么问题吗？非常感谢！

更新：我确实在 /home/hadoop/lib/pig/pig.jar 尝试了 EMR 内置 Pig.jar，并遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:24:45.407

将UDF jar 放在/home/hadoop/lib/pig 目录下或将pig-*-amzn.jar 文件复制到/home/hadoop/lib 即可。

您可能会使用引导操作来执行其中任何一项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T11:57:28.140

大多数 Hadoop 生态系统工具（例如 pig 和 hive）都在 $HADOOP_HOME/conf/hadoop-env.sh 中查找环境变量。

我能够通过将 pig-0.13.0-h1.jar（它包含 UDF 所需的所有类）添加到 HADOOP_CLASSPATH 来解决此问题：

```
export HADOOP_CLASSPATH=/home/hadoop/pig-0.13.0/pig-0.13.0-h1.jar:$HADOOP_CLASSPATH 
```

pig-0.13.0-h1.jar 在 Pig 主目录中可用。

# css - 表格布局：固定使用文本溢出：椭圆和第二个文本显示

> ID：13714802
> 
> 赞同：2
> 
> 时间：2012-12-05T01:13:20.580
> 
> 标签：css, tablelayout

我对 css 很陌生，我已经花了几个小时寻找解决这个问题的方法。我在可调整大小的容器中有一个固定的布局表。我有一个调整大小的列，它有 2 个文本，第一个应该做一个 text-overflow:ellipse 而第二个应该总是显示（如果可能的话）。要求是不显示表格单元格中的所有文本（如果不合适），但显示最后 5 个字母。我想我把 2 个跨度放在一个 td 中，并给第二个跨度一个宽度，但宽度被忽略了。当我试图浮动元素时（我只能向左浮动，因为向右浮动会将最后 5 个字母放在一个带有少量文本的长列的末尾，这是不行的），向左，但是第一个 div 没有得到更小，因此不应用 text-overflow:ellipse。

例如，当 td 很短时我需要：

```
|Hello budd...ight?| 
```

和

```
|Hello buddy ho...ight?| 
```

但是当 td 很长时：

```
|Hello buddy how is it going tonight?                       | 
```

这似乎是一个相当普遍的要求，那么我该如何实现呢？我不想要任何 javascript，我很确定它可以通过 css 解决，也许还有一些额外的 div ......

我的html：

```
<table style="table-layout:fixed">
<colgroup>
    <col/>
    <col width="200px"/>
</colgroup>
<tr>
    <td>
        <span class="first">Hello buddy how is it going ton</span>
        <span class="second">ight?</span>
    </td>
    <td></td>
</tr>
</table> 
```

我的CSS：

```
table
{
     width: 90%;
     margin: 10px;   
}

tr
{
    height: 100px;
}
td
{
    width: 50%;   
    border: 1px solid blue;
    padding: 5px;
    height: 100px;
    vertical-align: top;
    position: relative;
    while-space:nowrap;
}

span.first {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  border: 1px solid red;   

}
span.second
{
    border: 1px solid green;
} 
```

任何想法如何实现这一目标？非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:00:56.860

看起来我[能够得到一些工作](https://jsfiddle.net/hUQNh/)......这是更改后的 CSS：

```
span.first {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
/* --- everything below this line is new --- */
    float: left;
    padding-right: 5ex;
    max-width: 100%;
    display: inline-block;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}
span.second
{
    width: 4ex;
    margin-left: -5ex;
    display: inline-block;
}​ 
```

兼容： 我没有测试过 Opera 或 IE<9 （虽然我可以保证 IE7 不会运行它，因为 MDN 声明[IE 引入](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing)[了 IE8](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing)）[![铬合金](../Images/1af70b2336a976f773dc2e727be06e90.png)](https://i.stack.imgur.com/PxGFj.gif) [![火狐](../Images/42610c90a168d8c7380cabec6d94450e.png)](https://i.stack.imgur.com/HXAzi.gif) [![IE9](../Images/c429381837c1e60190ad73c6fd60e736.png)](https://i.stack.imgur.com/1O3Be.gif)
[`box-sizing`](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing)

* * *

解释：

### 。第一的

`float: left;`让两个跨度在与 结合使用时使用同一行`display: inline-block;`
`padding-right: 5ex;`为最后五个字符腾出空间（适用于 MOST 字体）
`max-width: 100%;`让第一个跨度增长到（但不超过）`TD`
`display: inline-block;`所需使用的宽度`max-width`有效地
`box-sizing: border-box;`将填充放在内容区域内 ( `max-width`)使用前缀，因为 Firefox 还不支持非前缀变体。

### 。第二

`width: 4ex;``5ex`因为如果您使用下面的内容
`margin-left: -5ex;`，它会变得很麻烦`.second``.first`

**注意：**您可以更改`ex`值以满足您的需要，但请确保两者
*`margin-left`*`== -(`*`padding-right`*`)`
*`width`*`<=`*`padding-right`*`- 0.5`

# class - 如何使用类来捕获 Log4net 中的错误？

> ID：13714805
> 
> 赞同：0
> 
> 时间：2012-12-05T01:13:37.643
> 
> 标签：class, log4net

我使用 Log4net 来捕获错误。我想创建类并使用它来捕获错误。我不想通过 TRY CATCH 捕获错误。我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:44:38.607

Log4Net 应该用于日志记录设施。它可以用于记录异常。
但它不能用于捕获异常。

如果要记录需要使用的异常，`try catch`则可以通过 Log4Net 记录捕获的异常。

# lucene - 扩展任意 Lucene 查询

> ID：13714811
> 
> 赞同：0
> 
> 时间：2012-12-05T01:14:35.113
> 
> 标签：lucene

我正在使用 Lucene 3.6.1。我收到来自用户的查询。此查询可能包含`+`或`-`运算符，也可能包含短语。在某些情况下，我想通过添加一些我计算的额外术语来扩展查询。这些条款是可选的。但是，必须遵守用户指定的任何必需的包含/排除约束。

我最初的策略是创建一个`BooleanQuery`，向其中添加一个包含已解析用户查询的子句，然后添加包含我的扩展术语的更多子句。扩展项将全部添加为`Occur.SHOULD`。我的问题是如何约束用户的查询。我可以想象三种可能性：

1.  用户的查询不包含运算符，这意味着我可以将其作为`Occur.SHOULD`子句包含在内。

2.  用户的查询包含一个`+`运算符，因此我需要将其作为`Occur.MUST`子句包含在内。

3.  用户的查询包含一个`-`运算符，但也包含其他术语：我是否仍将其作为`Occur.MUST`子句包含在内？

这三个选择中隐含的问题是我如何判断哪个条件是合适的？我想我可以重写查询并测试`BooleanQuery`实例，但这似乎很脆弱。

我想也可以尝试从用户的输入和我的扩展术语中创建单个字符串的策略，如下所示：

```
(fld1:userterm1 userterm2 -fld2:userterm3 +userterm4)^10 (fld1:expterm1)^8 (fld2:expterm2)^7 ... 
```

这是最好的方法吗？还是有一些优雅的编程解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:59:45.277

好的，不确定这个答案会有多大用处，但似乎无法在这里给出一个硬性和快速的答案，所以我将列出几个想到的可能性：

首先，一个问题：

将查询修改为如下所示：

```
(userquery) (other) (stuff) 
```

我在您显示的规则中添加 + 是有道理的，但是“-”禁止的术语将很难正确遵守，因为`(query -prohibition) (other)`将允许与其他存在禁止的匹配，并且`+(query -prohibition) (other)`需要匹配“查询” .

我认为真正做到这一点的唯一方法是将禁止的术语也传播到您自动添加的术语中，或者将其提取到父查询层，更像`(query -prohibition)`--> `(query) (other) -(prohibition)`。

并且随着用户输入任意复杂的查询，这可能不是一个好策略。

* * *

如果您想通过修改查询字符串来解决它，那么您可能应该在查询末尾添加任何术语。仅此而已。

我不相信

```
(fld1:userterm1 userterm2 -fld2:userterm3 +userterm4)^10 (fld1:expterm1)^8 (fld2:expterm2)^7 ... 
```

令人满意，因为 userterm4 仅在其子查询中是必需的，但仅在 expterm1 上的匹配仍然是可以接受的。但是，像这样的查询：

```
fld1:userterm1 userterm2 -fld2:userterm3 +userterm4 (fld1:expterm1)^.8 (fld2:expterm2)^.7 ... 
```

我认为，应该满足您的需求，并让您不必担心查询解析器的内部结构。 **我认为这是最好的方法。**

* * *

我还可以在结构如下的查询中看到逻辑

```
+(parsed userquery) (other stuff) 
```

实际上，始终要求用户查询匹配。从某种意义上说，Lucene 隐含地这样做了，因为它不会返回与任何术语不匹配的结果，即使查询中不存在必填字段。然后，这将使用您添加的术语来影响评分，而不是返回更大的文档集。这并不能完全解决您的要求，但可能值得考虑。

* * *

如果尽管存在上述应用它们的问题，但您仍想检测“+”和“-”运算符，我认为可以合理地假设 StandardQueryParser 将为您需要检查的任何查询返回基本级别的 BooleanQuery这些操作数。例如，您可能不得不担心 DisjunctionMaxQueries，以及当您使用运算符进行简单查询时会发生什么，例如：

```
+myterm 
```

我不知道 QueryParser 是否会简单地返回一个 TermQuery，从而失去加号（因为如果没有另一个术语存在，它将是多余的）。像这样的担忧让我犹豫以这种方式解决它。

同样，尝试从查询字符串中检测这些值必须对事物的解析方式做出假设，并且可能会变得复杂。

总结一下，我认为最好的选择是：在进行任何解析之前将术语添加到原始查询字符串的末尾，或者将用户查询视为原子，并在添加到布尔值时定义独立于其内容的适当布尔子句子句用您需要包含的任何其他查询来包装它。

# iframe - ie 即使 iframe 关闭也不释放内存

> ID：13714812
> 
> 赞同：1
> 
> 时间：2012-12-05T01:14:39.783
> 
> 标签：iframe

我在一个网页中有 15 个 iframe。

```
<iframe id="iframe0" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe1" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe2" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe3" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe4" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe5" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe6" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe7" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe8" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe9" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe10" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe11" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe12" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe13" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe>
<iframe id="iframe14" style="left: 1px; visibility: visible; width: 100%; position: absolute; top: 23px; border: 1px solid #8db1e3;" frameborder="0" scrolling="auto"></iframe> 
```

这些 iframe 中的每一个都在 .NET 中调用一些具有大量 gridview 的网页。我正在使用 ASP.NET 开发这些页面。我的问题从这里开始。

我知道 iexplorer.exe 正在成长，因为我在这些页面中加载了大量数据。有时会达到 400MB。但问题是，即使我关闭 iframe，这意味着......我制作了其中一个 iframe src = about:blank 并使其 display = none; 但是 iexplorer.exe 的内存大小并没有下降。它不会释放内存。怎样才能让记忆恢复正常？实际上，我已经在 IE8 中进行了测试。但 IE9 似乎正在释放内存。我不知道。

**编辑：** 我将 iframe 关闭为 velow

```
document.all['iframe' + menuOrder[currentTab]].src = "about:blank";
document.all['iframe'+menuOrder[currentTab]].style.visibility="hidden"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:13:56.393

将可见性设置为隐藏不会“关闭” iframe。即使您看不到它，它仍然在消耗资源。如果将 iframe 正在使用的页面更改为空白页面，您可能会降低内存使用量。

# ruby - Windows 快捷方式或批处理文件在 ruby 目录中打开命令提示符，并带有预填充的字符串

> ID：13714816
> 
> 赞同：1
> 
> 时间：2012-12-05T01:15:44.163
> 
> 标签：ruby, batch-file, cmd, compass-geolocation

我刚刚开始在 Windows 上的 Ruby 中使用 Compass。为了监视目录的变化，我需要在 Ruby 目录中运行 cmd.exe，然后使用命令“compass watch C:\path\to\project”。

我希望创建一个快捷方式，将在 D:\ruby\bin\ （Ruby 目录）中打开 cmd.exe 并使用预填充的字符串，我可以简单地完成，然后按 Enter 键执行。例如：

```
C:\ruby\bin>compass watch D:\path\to\_ 
```

...然后我只需键入项目文件夹名称并按 Enter。

*   我可以创建一个在 C:\ruby\bin\ 中运行 cmd.exe 的快捷方式，但我必须键入其余部分。

*   我可以创建一个批处理文件，在其默认位置运行 cmd.exe，然后将目录更改为 C:\ruby\bin，然后执行`compass watch C:\path\to\project`

*   我**不**知道如何预先填写上面的命令，让 cmd.exe 等待我输入相关的项目目录，然后再手动按 enter 执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T09:02:38.373

这是一个非常简单的单行...

1.  打开记事本或其他文本编辑器
2.  将目录 (cd) 更改为您的 Ruby 目录
3.  执行“指南针手表”

    cd C:\ruby\bin 罗盘手表

4.  转到另存为

5.  将“保存类型”更改为“所有文件”
6.  另存为 compass.bat
7.  运行文件（双击）开始轮询更改

来源[http://omnitech-support.blogspot.co.uk/2013/04/how-to-create-batch-files-for-windows-8.html](http://omnitech-support.blogspot.co.uk/2013/04/how-to-create-batch-files-for-windows-8.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T10:46:15.107

1.  在您希望能够运行它的任何地方创建一个新的快捷方式。
2.  对于命令行，输入`cmd /K compass watch`.
3.  随心所欲地调用它（我建议“指南针手表”）并保存它。
4.  右键单击它并选择属性。
5.  将“Start In”更改为 config.rb 所在的文件夹。
6.  您还可以将“运行”选项设置为最小化。
7.  保存对快捷方式的更改。
8.  运行快捷方式以设置 Compass 监视 config.rb 中定义的文件夹中相关文件的更改。

# c# - 登录前如何在图片框中显示验证码图像？(HTTPWebRequest)

> ID：13714817
> 
> 赞同：0
> 
> 时间：2012-12-05T01:15:47.567
> 
> 标签：c#, cookies, httpwebrequest, captcha, picturebox

请看下面的代码：

```
 getData = "";
    txtLog.Text += "req 5";
    txtLog.Text += "\r\n----------------------------------------------------------\r\n";
    txtLog.Text += "getData = " + getData;
    txtLog.Text += "\r\n----------------------------------------------------------\r\n";

    HttpWebRequest req5 = (HttpWebRequest)WebRequest.Create(link);
    req5.Method = "GET";
    req5.Accept = "image/png,image/*;q=0.8,*/*;q=0.5";
    req5.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0";
    req5.ContentType = "text/html; charset=utf-8";
    //req5.Headers.Add("Accept-Encoding", "gzip, deflate");
    req5.Referer = location_from_req_2;
    req5.KeepAlive = true;
    //req5.AllowAutoRedirect = false;
    req5.Timeout = TimeOut;

    req5.Proxy = proxy;

    cookieJar = new CookieContainer();
    req5.CookieContainer = cookieJar;

    res = (HttpWebResponse)req5.GetResponse();
    txtLog.Text += ((HttpWebResponse)res).StatusDescription;
    txtLog.Text += "\r\n----------------------------------------------------------\r\n";

    //string[] cookies = res.Headers.GetValues("Set-Cookie");
    //string[] cookies_ = cookies;

    if (res.Cookies != null && res.Cookies.Count > 0)
    {
        cookieJar.Add(res.Cookies);
    }
    foreach (Cookie cookie in res.Cookies)
    {
        cookieJar.Add(new Cookie(cookie.Name.Trim(), cookie.Value.Trim(), "/", cookie.Domain));
    }
    if (!string.IsNullOrEmpty(res.Headers["Set-Cookie"]))
    {
        ArrayList al = ConvertCookieHeaderToArrayList(res.Headers["Set-Cookie"]);
        CookieCollection cc = ConvertCookieArraysToCookieCollection(al, "empty.com");
        cookieJar.Add(cc);
    }
    for (int i = 0; i < cookieJar.GetCookies(req5.RequestUri).Count; i++)
    {
        Cookie cookie = cookieJar.GetCookies(req5.RequestUri)[i];
        txtLog.Text += "#" + (i + 1).ToString() + "; name: " + cookie.Name.ToString() + "; value: " + cookie.Value.ToString() + "; path: " + cookie.Path.ToString() + "; domain: " + cookie.Domain.ToString() + "; version: " + cookie.Version.ToString();
        txtLog.Text += "\r\n++++++++++++++++++\r\n";
    }
    txtLog.Text += "cookieJar Count: " + cookieJar.Count.ToString() + "; req 5: " + req5.RequestUri;
    txtLog.Text += "\r\n----------------------------------------------------------\r\n";

    //string location_from_req_5 = res.Headers["Location"];

    Stream = res.GetResponseStream();
    reader = new StreamReader(Stream);
    reader_str = reader.ReadToEnd();
    txtLog.Text += reader_str;
    txtLog.Text += "\r\n----------------------------------------------------------\r\n";

    var image = Image.FromStream(Stream);
    imgCaptcha.Image = image;

    reader.Close();
    Stream.Close();
    res.Close(); 
```

我正在使用 Visual Studio 2010 (.net 4) 和一个 Windows 窗体应用程序。
我想在我的图片框中显示目标网站的验证码图像！
我现在 CookieContainer 是我代码的重要组成部分，我认为它有效。
这些代码之后的 reader_str 字符串是这样的：

```
"����\0JFIF\0\0`\0`\0\0��\0C\0\a\a\a\a\a\a\b\t\v\t\b\b\n\b\a\a\n\r\n\n\v\f\f\f\f\a\t\r\f\v\f\f\f��\0C\f\b\a\b\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f��\0\b\00\0�\"\0��\0\0\0\0\0\0\0\0\0\0\0\a\b\t\n\v��\0�\0\0\0}\0!1AQa\a\"q2���\b#B��R��$3br�\t\n%&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz���������������������������������������������������������������������������\0\0\0\0\0\0\0\0\a\b\t\n\v��\0�\0\a\0w\0!1AQ\aaq\"2�\bB����\t#3R�br�\n$4�%�&amp;'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz��������������������������������������������������������������������������\0\f\0\0?\0����z��੿�\0��6�|i�5MZٮ��#es<�Ȥ��c��r\b�������9��~)y����6�N#����Ig?�#�\a��a2,~&ҍ&��e��#9U�vl�I��$�࿟���������ĳ���ƥ��`����c�\0��5O�&lt;���s�����,�����\t<M*0p�X6m�R\b���W�G��j�T����᧯�C��[��ފ���������g�w��fWN������%�y�\n\f��{u=�����\0��\v������!ռ!�spmm��t��&���!q1f�l'�y��\fu9(�s7} �ޝ�[�j�^��TW�|\0���~�:����#Ŗ:���6�CM�)l����K�N�*�ܣq\\d��קוV��˒�Z}��i��\n(��QE\0Q\\w��\0�&gt;��>k�9�o�x���ss<���rF]�\0w&�)u�;����c\a�&gt;|��\0�u��6VwQE]���d���%p\a\\W��dx�t\\�ܒ����\b�H�I3�.�����\n��k_C$��\"���Y|i1F��J����^���F�i����~=��<�\n�G��-}�]k�i�w�zF��4p6�wʫ�\f`涫�غpu$�e��A�\nM��E�~����������U�?���i��<\t���qx����E��+x�9S��/�\\��q_n�c>?�oW�\0�zk�?�O�k⟇֖��Z�����������%ěv�-�0'�]X��P�F�f�{k5v�'d�����Ŧ�C������\0ি���\0���\a����x���:�x���nƊ�Q$�o춬�\t%�Y�_`�g���A���&gt; �������&amp;���y��fז�̫\"�++ಲ�#�\"��VU��+5̮�㪺�u��ٗ�z���?���U:ť���:���-u�y���+�G�uV�q_[��K�8ʺ0ea�EpJ�ĬU�(����TwQZ�2�a��'Ӛ\0��˳�Ƌ�^���X���Sʎ�6}è�9ȭJm5�_����<E���*���GHV[9�\v4�h�p �c�[>�g�G�C����/���V��\0Q[tU��q�rv�qY_�_�ٴ~�_�Uϊz5���ӵ����3��ݠ���S'�_�-?��z�����o��--�H�;{�\rj2*��,�����d�_u��;�f�Ž*E���~O�9���;�?g?��������G���\0\b�2���K�tY\t>��f�;?��/�{�?�T_ؗ�&gt;\"0��_�b����ݦX����QU��g\\(��9�g�\0�[~4���\0�&gt;�\"�IVK�j�� ݖEI�����q�+���8w�������\0f��.�[���/�+mWŒ[٬��������(���v5�S�ts��{ih��i%����r�$�\r�[�7�?k��/��o�ˋ��Xx7J���ѭ,E�4�mnF�),\0\f������ۃ����/��_נ��5�v�=�^�S��<E��q�\t�NY�\b��x\a�����\0�+?j}+���=�]k߳7��x�G�`�����Pħh*�H\v�s�\a����)����\n'�\0\a^Z|4I���:�ᛝt�3��[�������9�`�v��llC �_-�.t�ˊTޭ�׋�2}���|:�D�������,������\0�Z���I�Z����B�;�\tqt�~�*�\0H���O�G��e�\v����7�k=N)~x�Ņ���F��O2�:��3G&\b9�&gt;1�|K�Z~�_�������D�\0~(��\0��O�N��\v[\0Ύ9 Tj�T�Tt!���T��e�7���\0���\0j����������P��m�Oi��̼�.4�w����$�!b\n��ҹ�IQB�t�QT��ȴ��ck4�k]^������mm��o��\0<7�W��%�f��xB��i��ofE��<��\0�2N8�߳���O�Wo�O�_�^�g��d��.�I\r��)��2��#���W�^�\0�n|g�\0��x���w�q{��+�dR\v�\r�&amp;�.�^���w�#vA;Ԝ�*���#g�!�*���.��+�Yxx|��m<\v{{�\0�yd\t�7$�9&�\\N���Rnu:�ۖ&gt;W��4��-R��o?��_�-v��\0$���~\\_��~�1�\fQ���*ײ�IPA�\ankS�\b�����:��O������O��6z�%�M&6�gftČ2�m8\a 濡�\n�����Ý&gt;�Y|%�Wm� 73xz��\\t���\\�rs^���l����cL�!0¡~�����a�Y�^%M���7��'�_�c��?<����?�t����66�#����\t���%��<0--ѻ��0�@�#'ھ����/����?\r�v:焥�����-_tR]���\a�2+���}�\0����?�\0dK��^����'jڍ����R;���Pҗ�|�̣`O�O����m��⿃��Hm3�,.�ƷZ���tYd�Ӯ�UU��w�gǤ���32ɰ���(J���yd�u�h��*I���&gt;\v�\0�O<-'�3�\0\t���0kQG�G{a43���&lt;�����Cg ��`+��\0��/��\0?e?���/�� x�iQ��2ŧ�A&��r�\0�L0��z�d�'��/� o��V�i����_ǞL��X�c���\v��\"�y�VV\fv`�\a95�M��o���U߆��M��\r<ۄ�uI���E��l�X'����3,���ӓ���Z�������;y38Sn�#��{��\0�i��X��>j~!Ҽu�_�/Xo��#����,��`�\r�+�A�PA�p�\0�RO�6�?�e\t�|�um/�?\v��4�,jw���->�=���Ƞ$�$��W�T��?KeO��/�[�p������v�O&�ڬ�i�-ʨKa'�tM�\r#3���c���e�x��[\bҳ�����Y/GceE8�G��\r�0~�З��׾(�b���a�Y�5͌���[ʫ̌q�0$\r��_��<x���g��;���ĝw�vZ��n�r��ߝ�D����7�_\0z���?�����\0�s����#Q��m�Y�~�\r�m\r���Y��2��\b�U\nŔ4��k���\b��#|Uмy�~Ӛ7��ߍ^��mF��\v뫿/+4�w�X� ��dg��fq����Ww[(I��ݔ��z%Ͷ��qV�������#����A|�\0�{�?�yw�o�݊^h��A��1����w�`\\�1\a�����(O�o�\0N���gy.��熴x����\b��]鷧�$�Ӆ�����������I���\0��K�\v�F��͠jV���h�9���X�pT`���?�,�ů��/���?b���#��Q���a��CÐ>���U�b>�Z����6�R�IyE�o���U �R�h�1�?�������Oҿh���+����������\a���\v�;z�=+��0�\0�p��M���?l��k��u_L���lW�\05����?\r�C������>��ʞ\rg��a�_�e#����������ǃM���=j���Z��2K\a�����8r;a�v���b�5�}�tW�:p���S�+y'�s�aO�&amp;��\0\v����_���^�i�~8y���1��<RIv�xۑ�#\"�I����e�\0����U�I<'�\a�v��o٧�t�W�{��\\\b�h��\0I�9��M�Ԃ\0�s���k㸯���n����;9C�ٵ�%t�QE��_�\0�������kǩcm%ֱ�-�OeQ%��|J�\a<�$��\0�_{Q]�~2XLM<L7�O�{|ɔy�L�R�\0�6�x3�_�Ox�@�4�(�+wO����F�'�eV`lE\t�\\��KZD�I�2I�%FMIEt�Y���6x�^^ki{�K˰�Ò*#Zd\nQJ��q_�_�����'���\0d����g��x�/iˢ���R�XMq���Ͷv\v�M~��X���L$�($ԓ�Of�����c��>4���&lt;o�z���~$|k�ŧ�<#���\fx%� ���VeU��ۼ�2E�1$oԒ�\b��O� .��1~Ԟ4���+�Q�J�%��5\rs¶�#5�����s\\yn��8��i���г�\\iʍ)r�J�]�ݓwz���R}�ove�������z��oq�O��Mi�m�:�xܤ�{�_�zG���?\v��G���\0h�.�{��m�,J��'XOZ�8���f��\"q�+'�����\b�s�X�\0�u�]�*k_����5+)�\t��H�ܫ1k�_�k�Ǳ�!���ĩIɞ�[��v�\")����cEw�ٟ/,j���'�ñ����\0\a���\0e��\r�4���-�����̚���NVH��X��8e ��%T\"�\0\0p\0�KEyx�n#.|D��v��ˌTtH(���((��\0��\vi�6��擬X��zf�\v[�Z��$�x�a���A�+�\a�?\b~����>\a�։�?[I$��U�Z���Ŝ�h��I⺊*�Ir�_N��*�P\0\0@�\f▊�#��.<�(p�H��RQE�EP�\0\0=-P\a��\r\n\r\n" 
```

我认为这是我们的图像，现在我想在我的图片框中显示它。
但我在这一行总是有错误->`var image = Image.FromStream(Stream);`
那个错误->`Parameter is not valid.`
发生了什么，问题是什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:24:25.717

我认为问题在于您正在从流中读出数据而忘记将其重置为开头。只是不要将数据读成字符串，你应该没问题。

```
Stream = res.GetResponseStream();
//reader = new StreamReader(Stream); <-- Don't do these 4 lines
//reader_str = reader.ReadToEnd();
//txtLog.Text += reader_str;
//txtLog.Text += "\r\n----------------------------------------------------------\r\n";

var image = Image.FromStream(Stream); 
```

If you want to keep the lines, you just have to reset the stream back to the beginning, using:

```
Stream.Seek(0, SeekOrigin.Begin); 
```

# c# - 如何测量进程上下文切换所用时间的近似值？

> ID：13714822
> 
> 赞同：3
> 
> 时间：2012-12-05T01:16:11.053
> 
> 标签：c#, .net, process, operating-system, context-switch

是否有可能测量 C# 中进程上下文切换的大致时间？如果是，如何？

我根据《[Cracking the Coding Interview: 150 Programming Questions and Solutions](https://rads.stackoverflow.com/amzn/click/com/098478280X) 》一书提出了这个问题。

他们的解决方案是：

假设只有 2 个进程，P1 和 P2。（是一个巨大的近似值，我相信还有更准确的）

P1 正在执行，P2 正在等待执行。在某些时候，操作系统必须交换 P1 和 P2 - 假设它发生在 P1 的第 N 条指令处。因此，上下文切换时间为：

```
Time_Stamp(P2_1) - TimeStamp(P2_N) 
```

其中一个问题是我们无法记录过程中每条指令的时间戳。而且我们不考虑其他进程之间的上下文切换所花费的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:50:47.470

您可以使用 WMI（Windows 管理规范）

例子：

```
ManagementScope managementScope = new ManagementScope("\\\\.\\ROOT\\cimv2");
ObjectQuery objectQuery = new ObjectQuery("SELECT * FROM Win32_PerfFormattedData_PerfProc_Thread");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(managementScope, objectQuery);
ManagementObjectCollection objectCollection = searcher.Get();

foreach (ManagementObject m in objectCollection)
{
    Console.WriteLine("ContextSwitchesPersec : {0}", m["ContextSwitchesPersec"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:23:21.653

进程上下文切换由操作系统完成，与 .NET 或 C# 无关。

您可以使用 Windows 性能监视器监控每秒上下文切换的数量，但进程本身不知道任何上下文切换。

您还可以使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)来监视上下文切换和单个进程的增量，这些默认情况下不显示，但可以从“视图”、“选择列”、“性能”选项卡中添加

# delphi - 如何重载父类中引入的虚函数？

> ID：13714827
> 
> 赞同：9
> 
> 时间：2012-12-05T01:16:38.407
> 
> 标签：delphi, overloading, virtual-functions

我有一个父类，其中包含一个重要的抽象过程，我在许多子类中重载了它，如下所示的示例代码：

```
TCParent = Class
private
public
 procedure SaveConfig; virtual; abstract;

end;

TCChild = Class(TCParent)
private
public
 procedure SaveConfig; override;
end; 
```

现在我需要用另一个接受参数的 SaveConfig 过程（重载）这个过程，但我不想在父类中进行可能需要我去对所有其他子类进行更改的大更改。

有没有一种方法可以在这个特定的子类中重载 SaveConfig 而无需对父类和从它继承的其他子类进行重大更改？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T01:39:29.310

您可以使用`reintroduce`添加新的重载方法。注意`reintroduce; overload;`子类中的顺序是必须的；如果你反转它们，代码将无法编译。

```
TCParent = Class
private
public
 procedure SaveConfig; virtual; abstract;
end;

TCChild = Class(TCParent)
private
public
 procedure SaveConfig; overload; override;
 procedure SaveConfig(const FileName: string); reintroduce; overload;
end; 
```

（在 Delphi 7 中测试，所以应该在它和所有更高版本中工作。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T02:55:27.017

由于您不想对其他后代进行更改，我建议在父类中添加一个可选字段来保存参数，然后任何想要使用参数的后代都可以使用它们。这样，您不必更改覆盖的签名`SaveConfig()`。例如：

```
type
  TCParent = class
  protected
    SaveConfigParams: TStrings; // or whatever...
  public
    procedure SaveConfig; overload; virtual; abstract;
    procedure SaveConfig(Params: TStrings); overload;
  end;

procedure TCParent.SaveConfig(Params: TStrings);
begin
  SaveConfigParams := Params;
  try
    SaveConfig;
  finally
    SaveConfigParams := nil;
  end;
end; 
```

.

```
type
  TCChild = class(TCParent)
  public
    procedure SaveConfig; override;
  end;

procedure TCChild.SaveConfig;
begin
  if SaveConfigParams <> nil then
  begin
    // do something that uses the parameters...
  end else begin
    // do something else...
  end;
end; 
```

.

```
type
  TCChild2 = class(TCParent)
  public
    procedure SaveConfig; override;
  end;

procedure TCChild2.SaveConfig;
begin
  // do something, ignoring the SaveConfigParams...
end; 
```

# xlib - 在 ubuntu/linux 中使用 Xlib 或 xinput 控制多个指针

> ID：13714831
> 
> 赞同：3
> 
> 时间：2012-12-05T01:17:15.443
> 
> 标签：xlib, multiple-monitors, mouse-cursor, xinput

我正在创建一个在多个 xsession 中使用多个游标（指针）的系统。我的电脑中有多个视频卡，用于控制不同的显示器。我想在每个屏幕上有一个不同的光标并控制每个屏幕。每个监视器是一个不同的会话。

我开始使用 C 中的 xlib 库来控制使用以下命令的单个光标：

```
XWarpPointer(display,None,window,0,0,0,0,x,y); 
```

这适用于一个光标。然后我在终端中使用 xinput 创建了第二个光标：

```
>>xinput create-master second 
```

然后我在屏幕上有两个光标。我可以使用 reattach 命令用单独的鼠标来控制每个：

```
>>xinput reattach MOUSEID POINTERID 
```

最后一步是使用 xlib 分别控制每个游标。当我使用 xWarpPointer 命令时，它只会移动原始光标，我找不到指定要控制的光标的方法。我也一直无法找到设置默认指针的方法。您可以在终端中使用“xinput list”查看所有指针的列表。有谁知道我怎么能

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:01:34.557

您需要使用`XIWarpPointer`来自 XInput2 扩展的请求，它以 deviceid 作为参数

```
Bool     XIWarpPointer(
        Display*            display,
        int                 deviceid,
        Window              src_win,
        Window              dst_win,
        double              src_x,
        double              src_y,
        unsigned int        src_width,
        unsigned int        src_height,
        double              dst_x,
        double              dst_y
    ); 
```

# java - 计算几种方法的运行时间分析

> ID：13714832
> 
> 赞同：1
> 
> 时间：2012-12-05T01:17:28.177
> 
> 标签：java, performance, big-o

我正在准备考试，在运行时分析方面遇到了一些麻烦。我有以下两种方法，我对运行时分析感到困惑：

```
 public boolean findDuplicates(String [] arr) {
    Hashtable<String,String> h = new Hashtable<String,String>();
    for (int i = 0; i < arr.length; i++) {
         if (h.get(arr[i]) == null)
              h.put(arr[i], arr[i]);
         else
              return true;
         }
    return false;
    } 
```

假设散列函数只在任何键上采用 O(1)，运行时间是否会简单地为 O(n)，因为在最坏的情况下，运行整个数组？如果每个散列函数需要恒定的时间来评估，我是否会沿着正确的思路考虑这一点？

我遇到的另一个问题似乎要复杂得多，我不知道如何解决这个问题。假设这些是arrarlists。

```
public boolean makeTranslation(List<Integer> lst1, List<Integer> lst2) {
//both lst1 and lst2 are same size and size is positive
     int shift = lst1.get(0) - lst2.get(0);
     for (int i = 1; i < lst1.size(); i++)
          if ( (lst1.get(i) - lst2.get(i)) != shift)
               return false;
     return true;
} 
```

在这种情况下，get 操作应该是恒定的，因为我们只是检索特定的索引值。但是在 for 循环中，我们既将其与 shift 进行比较，也对所有元素进行迭代。这将如何准确地转换为运行时间？

一个有用的解释将不胜感激，因为我比本课程中的任何内容都最难理解运行时分析，而我的期末考试是下周。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:52:24.367

简短的回答：这两种方法的时间复杂度都是`O(n)`.

对于散列，很明显`get`和`put`操作都需要恒定的时间。

对于列表，如果您使用`ArrayList`实现（并且很可能），该`get`方法也需要恒定的时间。这是因为`ArrayList`Java 中的 a`List`是由数组支持的 a。

`ArrayList.get(index)`标准 Java 库中的代码：

```
public E get(int index) {
    RangeCheck(index);
    return (E) elementData[index];
} 
```

`RangeCheck`大概做了两次比较，都是常数时间。从 an 返回一个值`array`显然是常数时间。因此，该`get`方法`ArrayList`需要恒定的时间。

至于您在 OP 中提到的具体问题：

> 但是在 for 循环中，我们既将其与 shift 进行比较，也对所有元素进行迭代。这将如何准确地转换为运行时间？

`lst1.get(i)`需要恒定的时间。`lst2.get(i)`需要恒定的时间。因此，`lst1.get(i) - lst2.get(i)`需要恒定的时间。对于`(lst1.get(i) - lst2.get(i)) != shift`. 这个想法是恒定数量的恒定时间操作的总和仍然是恒定时间。由于循环最多迭代`n`次数，因此总时间为`O(Cn)`，即 O(n)，其中 C 是常数。

而且......在final之前简要回顾[一下大O符号永远不会有什么坏处:)](https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:23:02.227

Big-O 表示法不是很准确，因为您忽略了常数因子和低阶项。因此，即使您有 2 个恒定操作 n 次，它仍然是 O(n)。实际上，它将是 (1+1)n=2n，但在 ordo 表示法中，我们将其四舍五入（即使它是 10000n）。因此，对于这两种情况，运行时间都是 O(n)。

在实践中，我建议在最坏的情况下输入每个循环和每个操作的成本。从最里面的嵌套级别开始并向外相乘（只有每个级别的最高成本）。

例如：

```
for (int i = 0; i<n; i++) { //n times
    //log n operation
    for (int i = 0; i<n; i++) { //n times
        //constant operation
    }
} 
```

在这里，我们有 n*(log(n)+n*1)=O(n*n) 因为 n>log(n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:29:18.810

通常， O() 表示算法的复杂性，通常是操作的数量，假设每个操作的成本是恒定的。例如***O(1000n)***类似于编写***O(n)***，因为每个操作成本*1000*，并且有***n***次操作。

因此，假设***get***和***put***对于每个值都是恒定的（取决于库实现），那么两者的时间都是***O(n)***。欲了解更多信息，请参阅： [http ://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T03:23:28.530

值得一提的是，但这两个操作都是**O(n)**（对于#2，这是最坏的情况）。需要注意的关键是每次迭代完成的关键操作的数量。

对于您的第一个片段，这`Hashtable`有点牵强，因为访问时间不会是您在循环中最大的操作。情况也是如此，因为那`Hashtable`只是`new`'d，你*总是*会在其中插入*n 个*元素。

对于您的第二个片段，您有机会提前结束。如果下一个元素的差异不是`shift`，那么您`false`就在那儿返回，然后，这只是一个操作。在最坏的情况下，您将经历所有*n*并返回。

# javascript - 3rd-party JavaScript 应用程序依赖管理

> ID：13714834
> 
> 赞同：1
> 
> 时间：2012-12-05T01:17:58.407
> 
> 标签：javascript, dependency-management

我正在为一个第 3 方 JavaScript 应用程序做贡献，我们称之为 X。网站所有者可以将 X 放在他们自己的网站中，我们称之为 Y，使用脚本标签，X 可能会呈现一些内容、响应事件等.想想像Disqus这样的东西。

X 可能依赖于 Handlebars、Underscore.js 等库。我面临以不干扰 Y 的方式解决这些依赖关系的问题。如果 X 为自己引入 Handlebars 和 Underscore.js，而 Y 已经包含这些图书馆，事情可能会因为那里有两个版本可能会导致未定义的行为而爆炸。

那么处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:26:32.160

既然你不能保证任何网站所有者都会使用与 X 相同的依赖管理系统，为什么不直接使用条件加载呢？只需检查（例如）window.jQuery 是否存在，如果尚未定义，则仅加载 jQuery。对于您的正确命名空间的第四方组件，依此类推。如果你要求你的用户只在他们页面的底部加载你的库，你应该没问题。

为了清晰和快速，您可以使用像[http://yepnopejs.com/这样的条件加载器。](http://yepnopejs.com/)

或者，您是否可以要求您的用户自己插入所需的库？您在分发点声明您的依赖关系（并提供代码），并在页面上没有其他需要的库时提供美观的错误状态（例如，对话框、console.log 等）。

# c# - 如何允许用户更改列表框顺序

> ID：13714837
> 
> 赞同：2
> 
> 时间：2012-12-05T01:18:22.900
> 
> 标签：c#, list, listbox

我正在寻求帮助，我有两个列表都将数据添加到同一个列表框中并将它们显示为摘要，我想知道如何让用户在列表框中向上或向下移动索引。

在此处添加项目

```
 private void BtnAddpickup_Click(object sender, EventArgs e)
    {
           /*
            * This method creates a new pickup object, allows the user to
            * enter details and adds it to the List
            *  
            */

        Pickupform.pickup = new Pickups();
        //New Visit- note added to the pickupform object

        Pickupform.ShowDialog();
        //Show the pickupForm. ShowDialog ensures that the form has the exclusive focus    until it is closed.

        if (Pickupform.pickup != null)
        //if null then the "cancel" button was pressed
        {
            Pickups newpic = Pickupform.pickup;
            //Get the Pickup object from the form

            thePickup.addPickups(newpic);
            //Add the visit to the list
        }
        updateList();
        //Update the list object to reflect the Pickups in the list
    } 
```

和这个

```
 public Pickups getPickups(int index)
    {
        //Return the pickup object at the <index> place in the list

        int count = 0;
        foreach (Pickups pic in pickups)
        {
            //Go through all the pickup objects
            if (index == count)
                //If we're at the correct point in the list...
                return pic;
            //exit this method and return the current visit
            count++;
            //Keep counting
        }
        return null;
        //Return null if an index was entered that could not be found
    } 
```

我的其他课程也是如此，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T02:39:36.873

你可以尝试这样的事情。下面的代码假定一个 Windows 窗体包含一个名为 mainListBox 的 ListBox、一个名为 upButton 的按钮和一个名为 downButton 的按钮。

```
public partial class Form1 : Form
{
    private class Person
    {
        public string LastName { get; set; }

        public string FirstName { get; set; }

        public override string ToString()
        {
            return string.Format("{0}, {1}", LastName, FirstName);
        }
    }

    public Form1()
    {
        this.InitializeComponent();

        this.mainListBox.SelectionMode = SelectionMode.One;

        this.PopulateListBox();
    }

    private void PopulateListBox()
    {
        this.mainListBox.Items.Add(new Person() { FirstName = "Joe", LastName = "Smith" });
        this.mainListBox.Items.Add(new Person() { FirstName = "Sally", LastName = "Jones" });
        this.mainListBox.Items.Add(new Person() { FirstName = "Billy", LastName = "Anderson" });
    }

    private void upButton_Click(object sender, EventArgs e)
    {
        if (this.mainListBox.SelectedIndex > 0)
        {
            int selectedIndex = this.mainListBox.SelectedIndex;
            object selectedItem = this.mainListBox.SelectedItem;

            this.mainListBox.Items.RemoveAt(selectedIndex);
            this.mainListBox.Items.Insert(selectedIndex - 1, selectedItem);

            this.mainListBox.SelectedIndex = selectedIndex - 1;
        }
    }

    private void downButton_Click(object sender, EventArgs e)
    {
        if (this.mainListBox.SelectedIndex > -1 &&
            this.mainListBox.SelectedIndex < this.mainListBox.Items.Count - 1)
        {
            int selectedIndex = this.mainListBox.SelectedIndex;
            object selectedItem = this.mainListBox.SelectedItem;

            this.mainListBox.Items.RemoveAt(selectedIndex);
            this.mainListBox.Items.Insert(selectedIndex + 1, selectedItem);

            this.mainListBox.SelectedIndex = selectedIndex + 1;
        }
    }
} 
```

这仅在您使用 ObjectCollection.Add 方法将项目添加到 ListBox 时才有效。如果是数据绑定，可以更新实际数据源，使用ListBox的BindingContext来刷新。

```
private List<Person> people = new List<Person>();

private void PopulateListBox()
{
    this.people.Add(new Person() { FirstName = "Joe", LastName = "Smith" });
    this.people.Add(new Person() { FirstName = "Sally", LastName = "Jones" });
    this.people.Add(new Person() { FirstName = "Billy", LastName = "Anderson" });

    this.mainListBox.DataSource = people;
}

private void upButton_Click(object sender, EventArgs e)
{
    if (this.mainListBox.SelectedIndex > 0)
    {
        int selectedIndex = this.mainListBox.SelectedIndex;
        Person selectedItem = this.mainListBox.SelectedItem as Person;

        this.people.RemoveAt(selectedIndex);
        this.people.Insert(selectedIndex - 1, selectedItem);

        this.mainListBox.SelectedIndex = selectedIndex - 1;

        this.RefreshListSource();
    }
}

private void RefreshListSource()
{
    CurrencyManager boundList = this.mainListBox.BindingContext[this.people] as CurrencyManager;
    boundList.Refresh();
} 
```

# java - JTextPane 在自动换行上调整大小

> ID：13714839
> 
> 赞同：0
> 
> 时间：2012-12-05T01:18:40.833
> 
> 标签：java, swing, resize, word-wrap, jtextpane

我正在创建一个类似于 IRC 的聊天程序。但是，对于我的客户端，我遇到的问题是，当将文本添加到 JTextPane（使用 GridBagLayout）时，它会调整大小而不是自动换行。好吧，它实际上最终会自动换行，但它不应该调整大小。这就是我的意思：

![JTextPane 调整大小](../Images/0f4eb223d510425cfdcb8fc5514fb5b4.png)

我可以将 JTextPane 尺寸设置为一个确切的数字，但我希望用户能够根据需要调整窗口的大小以及里面的部分。如何在不调整大小的情况下放入尽可能多的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:34:49.540

我最终通过将其添加到 JScrollPand 并使用 .setPreferredSize() 来修复它。

# hibernate - Grails 模式导出产生“未找到线程绑定请求”错误

> ID：13714841
> 
> 赞同：0
> 
> 时间：2012-12-05T01:19:02.663
> 
> 标签：hibernate, grails, groovy, schemaexport

我正在尝试`grails schema-export`使用 Grails 2.1.1 在一个相当大的已建立项目上运行。不幸的是，我收到此错误消息：

```
| Error Error executing script SchemaExport: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
    at org.codehaus.groovy.grails.web.pages.GroovyPageOutputStack.currentStack(GroovyPageOutputStack.java:39)
    at org.codehaus.groovy.grails.web.pages.GroovyPageOutputStack.currentStack(GroovyPageOutputStack.java:31)
    at org.codehaus.groovy.grails.web.pages.GroovyPageOutputStack.currentWriter(GroovyPageOutputStack.java:106)
    at org.codehaus.groovy.grails.plugins.web.api.TagLibraryApi.getOut(TagLibraryApi.java:103)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:51)
    at org.codehaus.groovy.grails.commons.metaclass.BaseApiProvider$1.invoke(BaseApiProvider.java:87)
    at groovy.lang.MetaBeanProperty.getProperty(MetaBeanProperty.java:57)
    at groovy.lang.MetaClassImpl.invokeMissingProperty(MetaClassImpl.java:743)
    at groovy.lang.MetaClassImpl.getProperty(MetaClassImpl.java:1613)
    at groovy.lang.ExpandoMetaClass.getProperty(ExpandoMetaClass.java:1140)
    at groovy.lang.MetaClassImpl.getProperty(MetaClassImpl.java:3332)
    at groovy.lang.ExpandoMetaClass.getProperty(ExpandoMetaClass.java:1152)
    at groovy.lang.GroovyObjectSupport.getProperty(GroovyObjectSupport.java:36)
    at groovy.lang.Script.getProperty(Script.java:56)
    at groovy.lang.Script.println(Script.java:153)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:793)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:776)
    at org.codehaus.groovy.runtime.DefaultGroovyMethods.println(DefaultGroovyMethods.java:632)
    at org.codehaus.groovy.runtime.dgm$626.doMethodInvoke(Unknown Source)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at SchemaExport$_run_closure1.doCall(SchemaExport.groovy:57)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
    at groovy.lang.Closure.call(Closure.java:415)
    at groovy.lang.Closure.call(Closure.java:428)
    at sun.reflect.GeneratedMethodAccessor96.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:39)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:54)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:231)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.Closure.call(Closure.java:415)
    at groovy.lang.Closure.call(Closure.java:409)
    at java_util_concurrent_Callable$call.call(Unknown Source)
    at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
    at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1016)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:721)
    at groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)
    at groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:1136)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1030)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:149)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:231)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.Closure.call(Closure.java:415)
    at groovy.lang.Closure.call(Closure.java:409)
    at java_util_concurrent_Callable$call.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
    at gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.Closure.call(Closure.java:415)
    at groovy.lang.Closure.call(Closure.java:428)
    at groovy.lang.Closure$call.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:231)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.Closure.call(Closure.java:415)
    at groovy.lang.Closure.call(Closure.java:409)
    at java_util_concurrent_Callable$call.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
    at gant.Gant.withBuildListeners(Gant.groovy:427)
    at gant.Gant.this$2$withBuildListeners(Gant.groovy)
    at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at gant.Gant.dispatch(Gant.groovy:415)
    at gant.Gant.this$2$dispatch(Gant.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:723)
    at gant.Gant.invokeMethod(Gant.groovy)
    at groovy.lang.GroovyObject$invokeMethod.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
    at gant.Gant.executeTargets(Gant.groovy:591)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:231)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
    at gant.Gant.executeTargets(Gant.groovy:590)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeWithGantInstance(GrailsScriptRunner.java:748)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeScriptFile(GrailsScriptRunner.java:551)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeScriptWithCaching(GrailsScriptRunner.java:452)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.callPluginOrGrailsScript(GrailsScriptRunner.java:396)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeCommand(GrailsScriptRunner.java:371)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.main(GrailsScriptRunner.java:232)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.grails.cli.support.GrailsStarter.rootLoader(GrailsStarter.java:234)
    at org.codehaus.groovy.grails.cli.support.GrailsStarter.main(GrailsStarter.java:262)
| Error Error executing script SchemaExport: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
Application context shutting down... 
```

那就是 --stacktrace --verbose。

显而易见的问题是：如何让这个错误消失？

不太明显的问题是：为什么 grails 首先要尝试在模式导出上处理标记库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:42:44.680

该脚本似乎`out`正在其绑定中找到一个属性，并尝试在执行该`println`方法时使用该属性。出于某种原因，该`out`属性似乎与标记库相关联。这`println`似乎无关紧要 - 我将编辑 SchemaExport.groovy 的第 57 行以将其注释掉并重试。或者，您可以尝试对其进行编辑以删除`out`参数或将其重置`System.out`为`println`.

至于为什么在 taglib 上，不知道。在一个最小的项目上运行这个命令并不会重现这个问题，而且面对这个项目的任何上游脚本，我没有任何反应。我想我会检查您的配置是否在这方面做了任何有趣的事情。

# javascript - JavaScript hasClass 忽略元素的类？

> ID：13714843
> 
> 赞同：0
> 
> 时间：2012-12-05T01:19:05.550
> 
> 标签：javascript, jquery, filter, jquery-isotope, slidedown

我有一个[同位素](http://isotope.metafizzy.co/index.html)过滤器菜单，并且我正在使用哈希历史记录，因此如果用户返回该页面，过滤器仍会设置。因为我们使用 .slideDown 来展开子菜单项，所以当您返回页面时，即使选择了其中的一些过滤器，子菜单项也会被隐藏。

我正在尝试使用：

```
if ($('#option1').hasClass('.selected')) {
    $('.level-two').slideDown('fast');
} 
```

但是，由于“选定”类是由 jQuery 过滤器（同位素）生成的，因此它被忽略了。

小提琴：http: [//jsfiddle.net/RevConcept/swT84/](http://jsfiddle.net/RevConcept/swT84/)

HTML：

```
<nav>           

            <div id="options" class="combo-filters">

                <div class="option-combo location">

                    <ul class="filter option-set group level-one" data-filter-group="location"> 

                        <li class="hidden"><a href="#filter-location-any" data-filter-value="" class="selected">any</a></li>

                        <li><a id="option1" href="#filter-location-exterior" data-filter-value=".exterior" class="trigger-two">exterior</a></li>

                        <li><a id="option2" href="#filter-location-interior" data-filter-value=".interior" class="trigger-two">interior</a></li>

                    </ul>

                </div>

                <div class="option-combo illumination">

                    <ul class="filter option-set group level-two" data-filter-group="illumination"> 

                        <li class="hidden"><a href="#filter-illumination-any" data-filter-value="" class="selected">any</a></li>

                        <li><a href="#filter-illumination-illuminated" data-filter-value=".illuminated" class="trigger-three">illuminated</a></li>

                        <li><a href="#filter-illumination-non-illuminated" data-filter-value=".non-illuminated" class="trigger-three">non-illuminated</a></li>

                    </ul>

                </div>

                <div class="option-combo mount">

                    <ul class="filter option-set group level-three" data-filter-group="mount"> 

                        <li class="hidden"><a href="#filter-mount-any" data-filter-value="" class="selected">any</a></li>

                        <li><a href="#filter-mount-wall" data-filter-value=".wall">wall</a></li>

                        <li><a href="#filter-mount-ground" data-filter-value=".ground">ground</a></li>

                    </ul>

                </div>

            </div><!--end options-->

        </nav> 
```

CSS：

```
header nav ul.level-two, header nav ul.level-three {
display:none;
} 
```

JavaScript：

```
$(function(){
    $('.level-one').hide().fadeIn('fast');
});

$(".trigger-two").one('click', function(){
    $(".level-two").slideDown('fast'); 
});

$(".trigger-three").one('click', function(){
    $(".level-three").slideDown('fast'); 
});

if ($('#option1').is('selected')) {
    $('.level-two').slideDown('fast');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:20:36.150

我猜你错过了一个'。

```
if ($('#option1').is('.selected')) {
    $('.level-two').slideDown('fast');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:15:21.180

您可以始终以编程方式触发对 .selected 锚点的点击，而不是使用重复功能复制每次点击的相同过程。

```
$('.option-combo a.selected').trigger('click'); 
```

小提琴：http: [//jsfiddle.net/jgkwd/](http://jsfiddle.net/jgkwd/)

# actionscript-3 - as3 - 将库图像名称传递给函数，然后添加到阶段

> ID：13714844
> 
> 赞同：1
> 
> 时间：2012-12-05T01:19:09.013
> 
> 标签：actionscript-3, bitmap

我正在使用以下函数将库中的一些图像添加到舞台。

```
function AddImage(image_name:String):void {
    if(image_count == 4) return;
    // change the following line so it uses "image_name"
    var defaultImage:added_1 = new added_1(100, 100);
    var tmpImage:Bitmap = new Bitmap(defaultImage);
    tmpImage.x = 124.5 + (108.5 * image_count);
    tmpImage.y = 1511.9;
    addChild(tmpImage);
    image_count++;
} 
```

我想做的是将图像名称作为字符串参数传递给函数，但似乎无法弄清楚如何做到这一点。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:48:36.800

您想要做的是通过使用 getDefinitionByName 获取类定义，以便您可以创建一个实例，以下代码是您如何做到这一点：

```
// you'll need to add this import to use getDefinitionByName
import flash.utils.getDefinitionByName;

function AddImage(image_name:String):void {
    if(image_count == 4) return;
    // this next line gets the class definition of the image_name
    var imageClass:Class = getDefinitionByName(image_name) as Class;
    // this is how you create an instance of that class
    var defaultImage:BitmapData = new imageClass(100, 100);
    var tmpImage:Bitmap = new Bitmap(defaultImage);
    tmpImage.x = 124.5 + (108.5 * image_count);
    tmpImage.y = 1511.9;
    addChild(tmpImage);
    image_count++;
} 
```

更改是导入：

`import flash.utils.getDefinitionByName;`

这两行：

```
 var imageClass:Class = getDefinitionByName(image_name) as Class;
 var defaultImage:BitmapData = new imageClass(100, 100); 
```

**注意 ---** 还想提一下，在某些情况下，如果您使用 Flex 而不是 Flash IDE 进行编译，您可能会遇到问题，您会收到以下错误：

```
ReferenceError: Error #1065: Variable <YourImageClassName> is not defined. 
```

处理这种情况的方法是在编译器的类变量声明中声明一个变量，以便它识别该符号。

因此，如果您的两个图像类名称是 image_1 和 image_2，那么在您的类声明中，您将执行以下操作：

```
private var forCompiler1:image_1;
private var forCompiler2:image_2; 
```

如果您有大量图像，那可能会很痛苦，但这是我发现让编译器识别它们的唯一方法。：/ 哈哈

# visual-studio-2010 - TeamCity 不编译 Visual Studio MS 测试项目

> ID：13714845
> 
> 赞同：3
> 
> 时间：2012-12-05T01:19:15.193
> 
> 标签：visual-studio-2010, visual-studio, msbuild, teamcity, teamcity-7.0

我的解决方案中有几个 MS 测试项目，但在构建服务器（TeamCity 7.1）中，我无法编译它们。例外是说......'VisualStudio'命名空间不存在......

我将 VisualStudio 工具复制到构建服务器 GAC 中，但仍然没有运气！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:49:55.873

The problem is in your test projects. you're referencing to some assemblies which haven't been deployed to the Build Server(TeamCity). Also you cannot do that by simply copy and paste to GAC or working directory.

The best and easiest way to do that is installing [**Visual studio 2010 Agents**](http://www.microsoft.com/en-us/download/details.aspx?id=1334) in the build server. It's free and it can be downloaded from MS web site. By installing the agents, it will install all the required libraries for compiling and even running the MSTest projects.

# javascript - 通过 HTML5 本地存储检查重复键

> ID：13714847
> 
> 赞同：0
> 
> 时间：2012-12-05T01:19:26.860
> 
> 标签：javascript, html, local-storage

我为 onClick 按钮编写了一个函数以保存到 localStorage。一切正常，没有问题。我正在尝试执行错误检查以查看密钥是否已存在，然后提示用户。

之前有一个问题涵盖了这一点，我按照他们的回答进行了操作，但我仍然没有运气。

这是有问题的部分：

```
 function save_dat_data() {

     //Gets value from scroll wheel
     var result = $('#i').scroller('getValue').join('');

     for (var i in localStorage) {
         if (localStorage[i] == result) {
             window.alert("This entry already exists");
             return;
         } else {
             localStorage.setItem(result, nameout);
             localStorage.saveServer
             //Resets the form
             document.getElementById('localStorageTest').reset();
         }
     }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:23:55.437

我猜你正在检查钥匙。不是价值。是吗？

```
function save(result, nameout){
    for (var i in localStorage) {
         if (i == result) {
             window.alert("This entry already exists");
             return;
         } 
     }
     localStorage.setItem(result, nameout);
     localStorage.saveServer
     //Resets the form
     document.getElementById('localStorageTest').reset();
 } 
```

# .net - 在现有用户的会话中通过 RegistrationService 创建新的 ServiceStack 用户

> ID：13714859
> 
> 赞同：1
> 
> 时间：2012-12-05T01:20:36.330
> 
> 标签：.net, servicestack

此要求是由于现有的“**邀请者**用户”邀请新的“**被邀请者**用户”的邀请功能而提出的（它与普通的电子邮件邀请系统不同，因为邀请者必须在被邀请者的帐户上设置某些角色，因此帐户必须在受邀者阅读电子邮件并点击链接之前存在）。

因此，继我之前关于[从我的 InvitationService 调用 RegistrationService 的](https://stackoverflow.com/questions/13702510/forwarding-servicestack-requests-to-other-service-handlers)问题之后，我已经让消息转发方面工作了。但现在`RegistrationService`似乎[假设您正在为当前会话创建一个新用户，或者更新当前会话的用户详细信息](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/RegistrationService.cs#L115-L118)。

这会导致我的邀请服务出现问题，因为邀请者不会创建新的被邀请者用户，而是`UserAuth`使用被邀请者的详细信息进行更新。

现在我可以创建一个新的，除了现有的用户检查之外`InviteeRegistrationService`，它基本上会做同样`RegistrationService`的事情（它可能仍然会做现有的用户检查，但会返回一个“已经邀请”的响应），但我真的不想要复制所有注册代码并维护副本。

这种边缘情况有什么技巧/解决方法吗？还是允许我执行此操作的实际功能，但我错过了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:32:27.557

由于[ServiceStack 都是开源](https://github.com/ServiceStack/ServiceStack)的，如果您有特殊要求，最好复制现有代码并对其进行修改以满足您的需求。这比尝试抽象 RegistrationService 更好，以便它尝试满足每个人的要求，这反过来又使每个人都更难阅读和理解。

不要担心代码重复，因为您有不同的要求 - 从 RegistrationService 中的代码作为模板开始，然后根据您的需要进行更改。

# google-app-engine - OAuth Twitter 登录序列

> ID：13714860
> 
> 赞同：1
> 
> 时间：2012-12-05T01:20:39.177
> 
> 标签：google-app-engine, twitter-oauth, python-2.x

不同的网站对oauth有不同的顺序。例如， http: [//oauth.net/core/diagram.png](http://oauth.net/core/diagram.png)有 7 个交互！在基于现有库（如下所列）的实施过程中，我们根本看不到步骤 B 和 C 发生。

问题是：

1.  是否可以跳过 B 和 C（根据上图）。或者库中有错误。
2.  对于步骤E，我们是否需要重新计算步骤D中收到的除了oauth_verifier和oauth_token之外的所有参数
3.  假设步骤 C 有助于避免用户手动输入 PIN 是否正确

开发环境信息：

*   开发语言：Python（2.5）
*   平台：谷歌应用引擎
*   下面列出了参考库：

(a) [http://sa-jtwitter-bot.googlecode.com/hg/oauthtwitter.py][2]，

(b) [http://python-twitter.googlecode.com/hg/twitter.py][3]

(c) 用户说 http://myapp.com/twitter/authrequest 和回调时运行的实际代码：http://myapp.com/twitter/authresponse，取自 [http://popdevelop.com /2010/07/an-example-on-how-to-use-oauth-and-python-to-connect-to-twitter][4]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T14:12:39.800

我的回答不是针对您提到的开发环境，而是通用的。

**Ans 1.**除非您已经拥有该特定用户的访问令牌，否则您不能跳过步骤 B 和 C。实际上在步骤 B 和 C 中，身份验证/授权弹出窗口从服务提供商打开。然后，用户输入他/她的凭据并允许对用户应用程序进行授权。接下来，在您的回调中，您再次代表用户请求访问令牌。收到访问令牌后，您可以向服务提供商发出请求以获取信息/数据。如果您将访问令牌存储在您的数据库中，那么您可以跳过上述步骤并使用访问令牌直接请求数据，但是很少有服务提供商要求您在一段时间后刷新访问令牌，这涉及通过传递的另一个调用旧访问令牌以获取新访问令牌（例如 Yahoo）

**Ans 2.**您需要每次重新计算 oauth_signature、oauth_timestamp、oauth_nonce 来发出请求，因为每个请求都会使用/生成此参数，对于其他参数，您可以使用以前的值。

**Ans 3.**步骤 C 是为了获得用户对您的应用程序要求的操作/范围的授权。

# c# - 如何在 Windows 窗体中制作 Select Where 语句

> ID：13714862
> 
> 赞同：0
> 
> 时间：2012-12-05T01:20:49.753
> 
> 标签：c#, windows, ado.net

我想选择所有客户信息，其中 customerid = 存储在组合框中的所选客户 ID，并在 datagridview 中显示结果我尝试了此代码，但 gridview 不显示结果。

```
 private void button1_Click(object sender, EventArgs e)
    { 
        SqlConnection con = new SqlConnection(constring);
      int id = Convert.ToInt32(comboBox1.SelectedValue);
string cmdstring=string.Format("select *from customers where customer_id={0}",id);
        SqlCommand cmd = new SqlCommand(cmdstring,con);

        //cmd.Parameters.AddWithValue("@id",id);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        //da.Fill(ds, "customers");
        //dataGridView1.DataSource = ds.Tables["customers"];

        con.Open();
         SqlDataReader red = cmd.ExecuteReader();

        con.Close();
        dataGridView1.DataSource = red;

        button = new DataGridViewButtonColumn();
        button.HeaderText = "edit";
        button.Tag = ds.Tables["customers"].Columns["customer_id"];

        dataGridView1.Columns.Add(button);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:57:32.563

你总是可以创建一个数据库类，如果你需要重构这个类以传入连接字符串或从 .Config 文件中读取连接字符串，你可以使用它作为模板开始，而且它更干净注意我正在返回一个 DataTable如果你只喜欢一个建议，你可以使用它

```
public class ClassDataManagement 
{ 
   public DataTable GetData(string sqlcmdString, string connString)
   {
       SqlConnection con = new SqlConnection(connString);
       SqlCommand cmd = new SqlCommand(sqlcmdString, cn);
       SqlDataAdapter da = new SqlDataAdapter(cmd);
       con.Open();
       DataTable dt = new DataTable();
       da.Fill(dt);
       return dt;
   } 
} 
```

如果您想使用 DataSet 而不是 DataTable 替换我有 DataTable 的地方或更改方法以返回如下所示的 DataSet

```
 public DataSet GetData(string sqlcmdString, string connString)
   {
       SqlConnection con = new SqlConnection(connString);
       SqlCommand cmd = new SqlCommand(sqlcmdString, cn);
       SqlDataAdapter da = new SqlDataAdapter(cmd);
       con.Open();
       DataSet ds = new DataSet();
       da.Fill(ds);
       return ds;
   } 
```

返回 ds 后，您需要像这样绑定它

```
 dataGridView1.DataSource = ds;
   dataGridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:35:34.860

我相当确定您没有获得任何数据，因为您在绑定之前关闭了连接，并且因为您使用不兼容的类型作为数据源：

```
 con.Close();
    dataGridView1.DataSource = red; 
```

在关闭连接之前设置数据源，或者至少确保填充数据（对于数据阅读器，数据在您枚举时填充）。此外，[DataGridView.DataSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)指示它必须使用以下四个接口之一：IList、IListSource、IBindingList 和 IBindingListSource。SqlDataReader 不支持这些。我建议阅读[DataAdapters 和 DataReaders](http://msdn.microsoft.com/en-us/library/vstudio/ms254931%28v=vs.90%29.aspx)，因为这概述了用于填充此类控件的一些功能。

# iphone - 无法绘制贝塞尔路径

> ID：13714866
> 
> 赞同：1
> 
> 时间：2012-12-05T01:21:50.010
> 
> 标签：iphone, objective-c, ios, ipad

我在 UIViewController 中放置了以下代码：

```
- (void)drawRect:(CGRect)rect {
    UIBezierPath *trackPath = [UIBezierPath bezierPath];
    [trackPath addQuadCurveToPoint:CGPointMake(10, 30) controlPoint:CGPointMake(0, 0)];
    trackPath.lineWidth = 2;
    [trackPath fill];
    [trackPath stroke];
} 
```

但是，我没有看到路径。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:33:16.717

UIViewController 没有实现 drawRect:。您需要在 UIView 子类中覆盖该方法。此外，您可能想要为贝塞尔路径设置颜色。

# php - 如何将 SelectQuery 对象转换为 SQL 字符串？

> ID：13714873
> 
> 赞同：1
> 
> 时间：2012-12-05T01:22:42.173
> 
> 标签：php, sql, drupal, drupal-7

我设法使用 __toString() 魔术方法打印了一个字符串，但在这个字符串中我看到了占位符（用于条件参数），它不能用作 SQL 查询。

我检查了这个对象的[文档](http://api.drupal.org/api/drupal/includes!database!select.inc/class/SelectQuery/7)，也查看了谷歌，但找不到有效的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:33:35.240

根据问题的评论（感谢@Scuzzy 的启发），我编写了一些简单的代码来转换`SelectQuery`对象：

```
class ExportableSelectQuery {

    public static function toSql(SelectQuery $obj) {

        $_string = $obj->__toString();
        $_conditions = $obj->conditions();
        $_tables = $obj->getTables();
        $_fields = $obj->getFields();

        foreach($_tables as $k => $t) {
            if(!empty($t['alias'])) {
                $_string = str_replace('{' . $t['table'] . '}', $t['table'] . ' as', $_string);
            }
            else {
                $_string = str_replace('{' . $t['table'] . '}', $t['table'], $_string);
            }
        }

        foreach($_conditions as $k => $c) {
            if(is_int($c['value'])) {
                $_string = str_replace(':db_condition_placeholder_' . $k, $c['value'], $_string);
            }
            else {
                $_string = str_replace(':db_condition_placeholder_' . $k, "'" . $c['value'] . "'", $_string);
            }
        }

        //echo('<pre>');
        //var_dump($_fields);
        //var_dump($_conditions);
        //var_dump($_tables);
        //var_dump($_string);
        //echo('</pre>');
        //die();

        return $_string;
    }
} 
```

`SelectQuery`这段代码的使用现在很简单（如果你在某处只有对象）：

```
die(ExportableSelectQuery::toSql($query)); 
```

我正在考虑扩展原始`SelectQuery`对象，并提供获取 SQL 代码的方法，但是 Drupal 的`db_select`函数返回`SelectQuery`，所以我将不得不更改`db_select`函数或将返回的对象转换为`ExportableSelectQuery`.

此外，这可能不是我能写的最佳解决方案，但假设时间和目的有限，它很好地解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T11:18:01.757

如果您希望从例如“EntityFieldQyery”获取 SQL，您可以使用类似这样的东西

1.  为查询添加标签

    ```
    $query->entityCondition('entity_type', 'node')
          ->entityCondition('bundle', 'page')
          ->addTag('EFQDumper'); //<=== TAG 
    ```

2.  实施挂钩“query_TAG_alter”

    ```
    function YOURMODULE_query_EFQDumper_alter(QueryAlterableInterface $query)
    {
     //echo ExportableSelectQuery::toSql($query);
     //die();
    } 
    ```

基于卡洛斯评论的解决方案

# php - 如何计算 MySQL 存储过程中的年龄？

> ID：13714875
> 
> 赞同：1
> 
> 时间：2012-12-05T01:22:49.263
> 
> 标签：php, mysql, sql

我正在尝试在 mysql 中实现一个基于计算返回年龄的过程。输入出生日期 (DATE)，然后完成计算。应该相对简单，但我似乎无法让它发挥作用。我不确定这是否适合“选择语句”，如果这非常简单，我深表歉意，但这是我第一次运行程序。

如果有人可以告诉我我做错了什么，将不胜感激。

谢谢！

PS 我有一个名为“PERSON”的表，其中包含字段“age”（int），在调用存储过程之前该字段当前为空。

```
DELIMITER $$
CREATE PROCEDURE determineAge(IN birthDate DATE)
BEGIN
DECLARE today TIMESTAMP; 
SELECT DATEDIFF(today,birthdate)/365 AS ageInYears
FROM PERSON;
END $$
DELIMITER ;

call determineAge('June 25, 1981'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:34:05.773

这行得通。无需声明“今天” - 只需`NOW()`在查询中使用一个函数。

此外，无需选择`FROM`任何东西......您只是查询一个值。

您的日期格式错误（MySQL 需要`'YYYY-MM-DD'`，并且您希望将差值计算为整数年。

```
DELIMITER $$
CREATE PROCEDURE determineAge(IN birthDate DATE)
BEGIN
    SELECT FLOOR(DATEDIFF(NOW(), DATE(birthdate))/365);
END $$
DELIMITER ;

CALL determineAge('1981-06-25'); 
```

最后，如果您愿意，理论上可以将年份值作为`OUT`参数返回，尽管查询结果很好。

```
DELIMITER $$
CREATE PROCEDURE determineAge(IN birthDate DATE, OUT age INT)
BEGIN
    SELECT FLOOR(DATEDIFF(NOW(), DATE(birthdate))/365) INTO age;
END $$
DELIMITER ; 
```

给你！

# java - Java /广度优先遍历：为什么不应该打印出倍数？

> ID：13714876
> 
> 赞同：0
> 
> 时间：2012-12-05T01:22:50.607
> 
> 标签：java, search

邻接矩阵如下所示：

```
 A  B  C  D  E  
A  0  1  0  1  1  
B  1  0  0  1  1  
C  0  0  0  1  0  
D  1  1  1  0  0  
E  1  1  0  0  0 
```

但它输出

> 阿布德贝克

这是我的搜索代码，我想知道你是否能告诉我哪里出错了。应该确保这封信尚未被查看，但似乎没有。提前致谢。

```
public static void breadthFirst(int[][] adjM)
{
    int x = 0, y = 0;
    Queue<Character> queue = new Queue<Character>();
    ArrayList<Character> track = new ArrayList<Character>();

    //finding a vertex to use to search. 
    char ch1;
    outerloop:
    for (int i = 0; i < adjM.length; i++)
    {
        for (int j = 0; j < adjM.length; j++)
        {
            if (adjM[i][j] == 1)
            {
                x = i; y = j;
                ch1 = ((char)(x+65));
                queue.enqueue(ch1); 
                track.add(ch1);
                adjM[i][j] = 3; adjM[j][i] = 3;
                break outerloop;
            }
        }
    }

    while (!queue.isEmpty())
    {
        char c = queue.dequeue();
        System.out.print(c + "  ");

        for (int i = 0; i < adjM.length; i++)
        {
            for (int j = 0; j < adjM.length; j++)
            {   
                char chari = ((char)(i+65));
                char charj = ((char)(j+65));
                if (adjM[i][j] != 0)
                {
                    if (!track.contains(chari))
                    {
                        queue.enqueue(chari);
                        track.add(chari);
                        adjM[i][j] = 0; adjM[j][i] = 0;
                    }
                    else if (!track.contains(charj))
                    {
                        queue.enqueue(charj);
                        track.add(chari);
                        adjM[i][j] = 0; adjM[j][i] = 0;
                    }

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:01:14.083

在您的实施中：

```
 else if (!track.contains(charj))
                {
                    queue.enqueue(charj);
                    track.add(chari); // this should be charj
                    adjM[i][j] = 0; adjM[j][i] = 0;
                } 
```

一个更简单的方法是这样的。不要修改邻接矩阵，只跟踪你访问过的东西。

```
while (!queue.isEmpty())
{
    char c = queue.dequeue();
    System.out.print(c + "  ");
    char chari = ((int)(c-65));
    track.add(chari)

    for (int j = 0; j < adjM.length; j++)
    {

        char charj = ((int)(j+65));
        if (adjM[chari][j] != 0  && !track.contains(chari))
        {
             queue.enqueue(charj);
        }
    }
} 
```

# ruby-on-rails - activeadmin：不断加载页面

> ID：13714882
> 
> 赞同：0
> 
> 时间：2012-12-05T01:23:10.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我有模型`Comment`试图用 activeadmin 管理这个模型：

```
rails g active_admin:resource 评论
```

活动管理员创建的文件：`app\admin\comments.rb`带有：

```
ActiveAdmin.register Comment, :as => 'AllComments' 做
  menu :parent => "Campaigns", :priority => 55

结尾

```

来自`rake:routes`：

```
                        admin_all_comments GET /admin/all_comments(.:format) admin/all_comments#index
                                           POST /admin/all_comments(.:format) admin/all_comments#create
                     new_admin_all_comment GET /admin/all_comments/new(.:format) admin/all_comments#new
                    edit_admin_all_comment GET /admin/all_comments/:id/edit(.:format) admin/all_comments#edit
                         admin_all_comment GET /admin/all_comments/:id(.:format) admin/all_comments#show
                                           PUT /admin/all_comments/:id(.:format) admin/all_comments#update
                                           删除 /admin/all_comments/:id(.:format) admin/all_comments#destroy
                            admin_comments GET /admin/comments(.:format) admin/comments#index

```

问题：访问时`admin\all_comments`我发现评论加载了很长时间。

笔记：

1.  `comment`模型中只有 24 条记录
2.  评论模型是由 Ryan Bates (http://railscasts.com/episodes/154-polymorphic-association) 描述的多态关联
3.  我在模型上使用`kaminari`设置 { `paginates_per 10`} `comment`，但是从我的角度来看，这根本不应该影响 activeadmin
4.  控制台没有输出，它定义没有错误，所以这就是它不断加载页面的原因

任何有关此问题的帮助将不胜感激

我的堆栈： `ruby-1.9.3-p125`, `rails-3.2.8`, `WEBrick 1.3.1`,`mac os lion`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:31:18.333

好的，所以这是解决方案，我添加`filter: commentable`了`Comments.rb`，我工作得很好

# knockout.js - Knockout.js、CoffeeScript 和 jQuery ajax 不更新文本字段

> ID：13714883
> 
> 赞同：3
> 
> 时间：2012-12-05T01:23:20.240
> 
> 标签：knockout.js, coffeescript

我正在尝试通过 AJAX 接收数据并将其显示在页面上。ajax请求成功，但是knockout没有更新视图。可能是什么问题？

**源代码：查看模型**

```
class AppViewModel
  constructor: ->
    @company = ko.observable {name:'n/a', tariff:'n/a', contract:'n/a', balance:'0'}
    @getBriefInfo()
    @companyTariff = ko.computed  => "Tariff: #{@company.tariff}"
    @companyBalance = ko.computed => "Total: #{@company.balance}"

  getBriefInfo: ->
    $.ajax
        type: 'POST'
        url: '/index.php/site/getCompanyShortInfo'
        data: {}
        dataType: 'json'
        contentType: 'json'
        success: (res) =>
          console.log @company(), res.name, res.tariff
          @company res
          console.log @company(), res.name, res.tariff

$ ->
  ko.applyBindings(new AppViewModel(),document.getElementById("company-info")) 
```

**源代码：查看**

```
 <ul id="company-info" class="unstyled company-info">
        <li data-bind="text: company.contract"></li>
        <li data-bind="text: company.name"></li>
        <li data-bind="text: companyBalance"></li>
        <li data-bind="text: companyTariff"></li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:31:52.657

该`company`属性是可观察的，而不是它的属性。由于您直接绑定到属性，因此当公司对象更改时您不会看到任何更改。

`with`您可能只需使用绑定就可以逃脱。当公司发生变化时，内容应该更新。

```
<ul id="company-info" class="unstyled company-info">
    <!-- ko with: company -->
        <li data-bind="text: contract"></li>
        <li data-bind="text: name"></li>
    <!-- /ko -->
    <li data-bind="text: companyBalance"></li>
    <li data-bind="text: companyTariff"></li>
</ul> 
```

如果您需要嵌套任何其他属性，则必须对其进行更改，以便这些属性实际上是可观察的。

# angularjs - ng-model、ng-repeat 和输入的难度

> ID：13714884
> 
> 赞同：116
> 
> 时间：2012-12-05T01:23:21.187
> 
> 标签：angularjs, angularjs-ng-repeat, angularjs-ng-model

我正在尝试允许用户使用`ngRepeat`and来编辑项目列表`ngModel`。（[请参阅this fiddle](http://jsfiddle.net/_nth/rnw3u/2/)。）但是，我尝试过的两种方法都会导致奇怪的行为：一种不会更新模型，另一种会在每次按键时模糊表单。

我在这里做错了吗？这不是受支持的用例吗？

这是小提琴中的代码，为方便起见复制：

```
<html ng-app>
    <head>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    </head>
    <body ng-init="names = ['Sam', 'Harry', 'Sally']">
        <h1>Fun with Fields and ngModel</h1>
        <p>names: {{names}}</p>
        <h3>Binding to each element directly:</h3>
        <div ng-repeat="name in names">
            Value: {{name}}
            <input ng-model="name">                         
        </div>
        <p class="muted">The binding does not appear to be working: the value in the model is not changed.</p>
        <h3>Indexing into the array:</h3>
        <div ng-repeat="name in names">
            Value: {{names[$index]}}
            <input ng-model="names[$index]">                         
        </div>
        <p class="muted">Type one character, and the input field loses focus. However, the binding appears to be working correctly.</p>
    </body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-12-05T02:25:12.537

这似乎是一个有约束力的问题。

建议[不要绑定到原语](https://github.com/angular/angular.js/issues/1267)。

`ngRepeat`当它应该迭代对象时，您正在迭代集合中的字符串。解决您的问题

```
<body ng-init="models = [{name:'Sam'},{name:'Harry'},{name:'Sally'}]">
    <h1>Fun with Fields and ngModel</h1>
    <p>names: {{models}}</p>
    <h3>Binding to each element directly:</h3>
    <div ng-repeat="model in models">
        Value: {{model.name}}
        <input ng-model="model.name">                         
    </div> 
```

jsfiddle：http: [//jsfiddle.net/jaimem/rnw3u/5/](http://jsfiddle.net/jaimem/rnw3u/5/)

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-02-06T12:52:53.773

使用 Angular 最新版本 (1.2.1) 并通过`$index`. 此问题已修复

[http://jsfiddle.net/rnw3u/53/](http://jsfiddle.net/rnw3u/53/)

```
<div ng-repeat="(i, name) in names track by $index">
    Value: {{name}}
    <input ng-model="names[i]">                         
</div> 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2012-12-05T13:09:58.633

当需要了解[scopes](http://docs.angularjs.org/guide/scope)、[ngRepeat](http://docs.angularjs.org/api/ng.directive:ngRepeat)和[ngModel](http://docs.angularjs.org/api/ng.directive:ngModel)与[NgModelController](http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController)的工作方式时，你会陷入困境。也尝试使用 1.0.3 版本。你的例子会有所不同。

您可以简单地使用 jm- 提供的解决方案

但如果你想更深入地处理这种情况，你必须了解：

*   [AngularJS 是如何工作的](http://docs.angularjs.org/guide/concepts)；
*   范围具有层次结构；
*   ngRepeat 为每个元素创建新范围；
*   ngRepeat 构建带有附加信息的项目缓存（hashKey）；在每次监视调用每个新项目（不在缓存中）时，ngRepeat 构造新范围、DOM 元素等。[更详细的描述](https://stackoverflow.com/questions/12336897/how-to-loop-through-items-returned-by-a-function-with-ng-repeat/12340772#12340772)。
*   从 1.0.3 开始，ngModelController 使用实际模型值重新呈现输入。

您的示例“直接绑定到每个元素”如何适用于 AngularJS 1.0.3：

*   您在输入中输入字母`'f'`；
*   `ngModelController`更改项目范围的模型（名称数组未更改）=> `name == 'Samf'`, `names == ['Sam', 'Harry', 'Sally']`;
*   `$digest`循环开始；
*   `ngRepeat`将项目范围 ( `'Samf'`) 中的模型值替换为未更改名称数组 ( `'Sam'`) 中的值；
*   `ngModelController`使用实际模型值 ( `'Sam'`) 重新呈现输入。

您的示例“索引到数组”如何工作：

*   您在输入中输入字母`'f'`；
*   `ngModelController`更改名称中的项目`array`=> `names == ['Samf', 'Harry', 'Sally'];
*   $digest 循环开始；
*   `ngRepeat``'Samf'`在缓存中找不到；
*   `ngRepeat`创建新范围，使用新输入添加新 div 元素（这就是输入字段失去焦点的原因 - 具有旧输入的旧 div 被具有新输入的新 div 替换）；
*   呈现新 DOM 元素的新值。

此外，您可以尝试使用[AngularJS Batarang](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk)并查看 $id 如何通过您输入的输入更改 div 范围的 $id。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-08-09T22:06:22.513

如果您不需要模型在每次击键时更新，只需绑定到`name`然后在 blur 事件上更新数组项：

```
<div ng-repeat="name in names">
    Value: {{name}}
    <input ng-model="name" ng-blur="names[$index] = name" />
</div> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-21T13:29:37.567

我刚刚将 AngularJs 更新到 1.1.2 并且没有问题。我想这个错误是固定的。

[http://ci.angularjs.org/job/angular.js-pete/57/artifact/build/angular.js](http://ci.angularjs.org/job/angular.js-pete/57/artifact/build/angular.js)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-10T08:17:23.990

问题似乎在于如何`ng-model`使用`input`和覆盖`name`对象，使其丢失`ng-repeat`。

作为一种解决方法，可以使用以下代码：

```
<div ng-repeat="name in names">
    Value: {{name}}
    <input ng-model="names[$index]">                         
</div> 
```

希望能帮助到你

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-05T23:05:04.257

我尝试了上面的解决方案来解决我的问题，它就像一个魅力。谢谢！

[http://jsfiddle.net/leighboone/wn9Ym/7/](http://jsfiddle.net/leighboone/wn9Ym/7/)

这是我的版本：

```
var myApp = angular.module('myApp', []);
function MyCtrl($scope) {
    $scope.models = [{
        name: 'Device1',
        checked: true
    }, {
        name: 'Device1',
        checked: true
    }, {
        name: 'Device1',
        checked: true
    }];

} 
```

和我的 HTML

```
<div ng-app="myApp">
    <div ng-controller="MyCtrl">
         <h1>Fun with Fields and ngModel</h1>
        <p>names: {{models}}</p>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th></th>
                    <th>Feature 1</td>
                    <th>Feature 2</th>
                    <th>Feature 3</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Device</td>
                   <td ng-repeat="modelCheck in models" class=""> <span>
                                    {{modelCheck.checked}}
                                </span>

                    </td>
                </tr>
                <tr>
                    <td>
                        <label class="control-label">Which devices?</label>
                    </td>
                    <td ng-repeat="model in models">{{model.name}}
                        <input type="checkbox" class="checkbox inline" ng-model="model.checked" />
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2015-09-02T19:46:32.530

怎么做：

```
<select ng-model="myModel($index+1)"> 
```

在我的检查员元素中是：

```
<select ng-model="myModel1">
...
<select ng-model="myModel2"> 
```

# process - 作业 - 抢先优先级调度

> ID：13714892
> 
> 赞同：0
> 
> 时间：2012-12-05T01:23:55.747
> 
> 标签：process, cpu, scheduling

```
处理突发时间到达时间优先级
P1 5 0 1
P2 1 0 3
P3 2 2 1
P4 4 4 2
P5 2 4 2
P6 3 5 3
P7 4 5 3

```

嗨，大家好。我们被分配了一项关于抢占式优先级调度的任务，但鉴于两个或多个具有相同优先级编号的进程，我真的不知道如何执行此操作。

我必须制作甘特图，计算周转时间和平均等待时间。

如果可能的话，你们能否发布一个关于如何做到这一点的分步解决方案，以便我可以研究它是如何完成的。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:31:46.523

第一：优先级相同的两个进程一般会按照到达时间排序：所以先到先得。

周转时间：一般是指过程产生输出所需的时间。您的课程可能会使用不同或更简单的定义来使您的计算更容易。据我所知，您可能被要求计算完成每个过程所需的时间。这等于：（`finish_time - time_first_scheduled_on_CPU`不是`finish_time - arrival_time`）。

平均等待时间：根据您开发的甘特图，该图准确显示了进程在 CPU 上的时间和时间，您可以计算每个进程等待 CPU 上的总时间。

这包括：

1.  到达与第一次在 CPU 上调度之间的时间量
2.  如果进程的执行时间比单个量程长，那么您需要将所有花费在 CPU 上的**时间**相加
3.  将这两个数量加在一起，您就有了该过程的总等待时间
4.  对每个过程重复步骤 1-3 并取平均值。

# r - 在 R 中查找“近乎重复”的字符串

> ID：13714893
> 
> 赞同：3
> 
> 时间：2012-12-05T01:23:58.127
> 
> 标签：r, nlp, sentiment-analysis, text-analysis

我正在使用 R 构建情绪分析工具，但我遇到了一些重复问题。数据的主要来源是 Twitter，看起来很多人通过在每条推文的末尾添加一些随机文本来绕过 twitter 自己的垃圾邮件过滤器。例如

```
Click xxxxx to buy the amazing xxxxx for FREE ugjh 
```

我得到了大量的确切推文，最后带有不同的随机字符串。它们要么来自同一个用户，要么来自不同的用户。

是否有任何类似`duplicated`或`unique`返回 2 个字符串的接近程度以及它们是否高于某个百分比的函数？

我知道这样做最终会删除那些说完全相同的人的真实推文，比如

```
I love xxxx ! 
```

但我会在未来处理这个问题。

任何正确方向的提示将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T01:32:26.803

我`agrep`上面提到过。这是您所解释的示例。通过改变`max.distance`我们可以调整被踢的内容：

```
comp <- "Click xxxxx to buy the amazing xxxxx for FREE ugjh"
w <- "I love xxxx !"
x <- "Click xxxxx to purchase the awesome xxxxx for FREE bmf"

agrep(comp, c(x, w), max.distance =.4, value = TRUE)
agrep(comp, c(x, w), max.distance =.9, value = TRUE) 
```

# android - 查看寻呼机包含一个滑动抽屉，里面有一个查看寻呼机

> ID：13714901
> 
> 赞同：1
> 
> 时间：2012-12-05T01:24:39.953
> 
> 标签：android, android-viewpager, slidingdrawer

我有一个视图寻呼机，它在您滑动时加载不同的片段，最后一个片段是视图寻呼机本身。在实地考察应用程序中，他们会做类似的事情，你在视图中滑动，最后一个视图是谷歌地图。到达地图后，您可以四处移动地图，而无需滑回上一个视图，但侧面有一个滑动抽屉手柄，可在您确实想离开地图时使用。这就是我想要的功能，但我无法弄清楚它是如何工作的。有没有人做过类似的事情或有任何想法。我已经能够禁用顶级视图寻呼机，但无法让滑动抽屉内的视图寻呼机在之后滑动视图。

# java - 在给定某些约束的情况下找到元素之间的最大距离

> ID：13714903
> 
> 赞同：3
> 
> 时间：2012-12-05T01:24:47.777
> 
> 标签：java, c++, algorithm, optimization, max

我有一个编号元素 1 到 N 的列表，它们适合从 1 开始的数轴上的位置。我也对这些元素有限制：

*   元素 1 位于位置 1，元素 N 必须位于 >= 元素 N-1 的位置。（即元素 2 可能在位置 1，元素 3 在位置 7，元素 4 在位置 8（但不是位置 5））
*   某些元素必须在一定距离内才能在线。
*   某些元素必须至少与其他元素保持一定距离就行了。

我的目标是返回一个整数，表示元素 1 和元素 N 之间的最大跨度。如果没有可能的阵容，则返回 -1，如果元素可以相隔任意距离，则返回 -2。

我得到：

*   元素数量
*   一个 withinArray[][] 其中 withinArray[x][y] = 距离元素 x 和 y 必须在行内。任何零值表示没有约束。
*   一个 atLeastArray[][] 其中 atLeastArray[x][y] = 距离元素 x 和 y 必须在线上分开。任何零值表示没有约束。

一个示例输入是：4 个元素，withinArray[1][3] = 10、withinArray[2][4] = 20 和 atLeastArray[2][3] = 3。（所有其他数组值为零）。

此输入的返回值为 27。（元素 1 位于位置 1，元素 2 位于位置 8，元素 3 位于位置 11，元素 4 位于位置 28）

到目前为止，我想出了这个：

```
for (int i = 1; i < n; i++) {
    for (int j = 1; j < atLeastArray.length; j++) 
        if (j == i)
            positions[i] = positions[j] - atLeastArray[i][j];
    for (int j = 1l j < withinArray.length; j++) 
        if (j == i) 
            positions[j] = positions[i] + withinArray[i][j];
}
return positions[n] - positions[1]; 
```

这为我给出的示例提供了正确的答案，但我不相信它在每种情况下都有效，而且我不确定如何定义不可能的情况或元素是否可以相距任何距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:06:05.340

让我们从线性规划的角度来考虑这个问题。我们有变量 x_1、...、x_n 和一堆形式为 x_i <= x_(i+1)、x_i - x_j <= w_{ij} 和 x_i - x_j >= a_(ij) 的约束。

注意当我们对一个变量进行傅里叶-莫茨金消除时会发生什么——也就是说，在它出现的每个方程中隔离它，形成两组不等式，比如 x_i <= foo_k 对于各种 k 和 x_i >= bar_l 对于各种l，然后删除所有涉及 x_i 的约束并将它们替换为每个 k 和 l 的约束 bar_l <= foo_k。

您将获得与以前相同形式的更多约束！请注意，如果您知道 x_i - x_j <= a 和 x_i - x_j <= b，则可以得出结论 x_i - x_j <= min(a,b) 并忘记之前的两个约束。所以你永远不需要超过 n^2 个约束。

所以只需消除除 x_1 和 x_n 之外的所有变量。最后会有两个约束，即 x_n - x_1 >= a 和 x_n - x_1 <= b。检查 a <= b 并且 b 不是无穷大，你应该很好。

嗯，如果有人能教我如何在这件事上写数学，我将不胜感激:)

# c++ - 如何正确读取 C++ 中的波形文件采样率？

> ID：13714906
> 
> 赞同：0
> 
> 时间：2012-12-05T01:25:05.407
> 
> 标签：c++, hex

只是出于好奇，同时学习波形文件格式和 C++，我偶然发现了这个[页面](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)，详细介绍了波形格式的规范布局

现在，我尝试编写一个 C++ 程序来读取采样率

```
char buffer[4];
// already read other values before reading sample rate
inFile.read(buffer, 4);
// conversion using little endian
sampleRate = (long) buffer[0] + ((long) buffer[1] << 8) + ((long) buffer[2] << 16) + ((long) buffer[3] << 24); 
```

在十六进制编辑器中，我可以看到我的样本波形文件的采样率为`44 ac 00 00`，转换为 44100 速率。但是，使用上面的代码，我总是以 -21436 结尾

经过一些调试，原来的十六进制值“ac”应该在 dec 中转换为 172，但 C++ 假定十六进制值是“ffffffac”，在 dec 中转换为 -84。如果 C++ 只是假设它是简单的“ac”，那么我最终会得到正确的采样率值。

所以问题是，我如何从波形文件中读取数据并实际获得正确的采样率？我必须做一些魔术来去除前导的“f”吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:33:21.203

最简单的方法如下：

```
// simply store bytes directly into sampleRate
long sampleRate = 0;
inFile.read(&sampleRate, 4); 
```

正如您可能怀疑的那样，这假设您的系统是小端序。要修复您的示例，您必须避免在转换为 long 时发生的符号扩展。声明`buffer`类型`unsigned char`。请参阅以下内容。

```
unsigned char buffer[4];
inFile.read(buffer, 4);
long sampleRate = (long)buffer[0] + ((long)buffer[1] << 8) + ((long)buffer[2] << 16) + ((long)buffer[3] << 24); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:35:43.187

有两种方法可以修复您的代码。首先是通过使所有内容都无符号来确保始终使用无符号算术。第二种是使用位掩码来删除符号扩展。

```
sampleRate = ((long) buffer[0] & 0xff) + (((long) buffer[1] << 8) & 0xff00) + (((long) buffer[2] << 16) & 0xff0000) + ((long) buffer[3] << 24); 
```

# r - 如何在绘图中使用自定义点样式？

> ID：13714907
> 
> 赞同：9
> 
> 时间：2012-12-05T01:25:17.377
> 
> 标签：r, graphics, bitmap, plot, points

我正在做一个降维实验，其中一组面将被放置到一个 XY 平面上。我想在图中的每个点显示真实的面孔（例如：[第 476 页的图 10](http://jmlr.csail.mit.edu/papers/volume11/venna10a/venna10a.pdf)）。我可以在 R 中做到这一点吗？谢谢你。

![在此处输入图像描述](../Images/2f943261c7546fb71c6d06f1cc238fa8.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T01:50:59.473

您可能需要一些附加包，例如`png`和`raster`来实现这一点。所以首先，确保你已经加载了包。

```
library(png)
library(raster) 
```

现在，获取一张图片（我在 ms paint 中制作的一个很棒的曲线 - 另存为`spotimg.png`）：

![在此处输入图像描述](../Images/6060ce5d5c324c8657e48fff8c5a154f.png)

将图像加载到 R 中并绘制它：

```
pngimg <- readPNG("spotimg.png")
plot(NA,xlim=c(0,10),ylim=c(0,10))
rasterImage(pngimg,4.5,4.5,5,5) 
```

调用的最后 4 个输入以`rasterImage`格式给出图像边界的坐标`xleft, ybottom, xright, ytop`

还有宾果游戏，您的图像绘制在您指定的位置。

![在此处输入图像描述](../Images/0ec12482cbcf5b3b87b40c342ecb64ae.png)

# automation - 如何使用查找/替换和后跟数字的反向引用？

> ID：13714908
> 
> 赞同：0
> 
> 时间：2012-12-05T01:25:22.130
> 
> 标签：automation, text-editor, replace, backreference, komodoedit

我想对匹配的字符串进行查找/替换`(abcdefg)1`，`\12`但它不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:25:22.130

向反向引用添加前导零：

```
\012 
```

**参考**

*   [示例：匹配有效日期的正则表达式](http://www.regular-expressions.info/dates.html)

*   [*在搜索*模式中的反向引用后如何获得文字数字](https://groups.google.com/forum/#!topic/bbedit/o936Qla2IF0)

# entity-framework - 实体框架 ConnectionString 解析异常

> ID：13714910
> 
> 赞同：0
> 
> 时间：2012-12-05T01:25:41.460
> 
> 标签：entity-framework, entity-framework-4, connection-string

我找不到我的 connectionString 语法是如何错误的。谁能建议一种方法来解决这个问题？我在将 EF 与我的连接字符串一起使用时遇到了困难。我是 EF 的新手。

*   我正在使用 Sybase Anywhere 12 数据库。
*   我在 Web 应用程序引用的单独类库中使用 Table-First ObjectContext 和 EDMX。
*   我在我的类库中使用 Ninject 模块来绑定我的存储库。
*   我正在使用一个名为“Test”的 ODBC DataStore
*   其他信息 EF 4.3.1.0、.NET 4、VS2010
*   我的主 Web 应用程序 web.config 将 EF 连接字符串复制到其中：

`<connectionStrings> <add name="Entities"connectionString="metadata=res://*/MyEntities.csdl|res://*/MyEntities.ssdl|res://*/MyEntities.msl;provider=iAnywhere.Data.SQLAnywhere;provider connection string=&quot;UserID=aUser;Password=aPassword;DataSourceName=Test&quot;" providerName="iAnywhere.Data.SQLAnywhere"/> </connectionStrings>`

当我在我的存储库中初始化我的 Entity/ObjectContext 时（参见下面的 using 语句），它返回一个错误：“在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效。”

```
 using (var context = new Entities())
        {
           return {Linq to Entity here}
        } 
```

我在调试器上打开了 CLR 异常，发现代码在 .NET Framework 中抛出了错误：

实体连接.cs

effectiveConnectionOptions = new DbConnectionOptions(setting.ConnectionString, EntityConnectionStringBuilder.Synonyms, false);

edmx 设计器生成：

```
 /// <summary>
        /// Initializes a new Entities object using the connection string found in the 'Entities' section of the application configuration file.
        /// </summary>
        public Entities() : base("name=Entities", "Entities")
        {
            this.ContextOptions.LazyLoadingEnabled = true;
            OnContextCreated();
        } 
```

我可以在那里看到我的连接字符串，因此很难解析连接字符串。我尝试了许多不同的语法排列，但没有找到它接受的任何内容，包括：

*   显式命名实体文件的程序集而不是通配符（例如 metadata=res://MyDomain/MyEntities.csdl...）
*   使用 Sybase 友好的 ODBC 属性，例如 UID 代替 UserID、PWD 代替 Password，以及 DBN 代替 DataSourceName。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:07:11.880

我让一切正常，我能想到的唯一原因是我删除了我的 ASP .NET 4.0 临时文件。另外，我必须补充一点，我将我的流程从使用集成测试来测试这一部分更改为使用单元测试。我没有先做单元测试，因为我们的构建服务器上没有数据库。

一旦我能够证明它在那里工作，我决定删除我的临时文件。在那之后，一切都开始正常工作。因此，我的应用程序中出现了某种缓存问题。我使用了上面提到的相同的连接字符串。

实际上，我使用了元数据的域名“metadata=res://MyDomain/MyEntitities.csdl”而不是*/MyEntities.csdl。我不打算很快更改域。事实上，这正是可能导致某些问题的原因，因为我更改了 EF 所在的 MyEntities.Domain 的位置、名称和命名空间。

# c++ - StretchDIBits 仅在特定图像尺寸上失败

> ID：13714911
> 
> 赞同：1
> 
> 时间：2012-12-05T01:25:57.173
> 
> 标签：c++, windows, crash, gdi, stretchdibits

我正在使用`StretchDIBits`打印图像，并且由于某种未知原因图像处于特定尺寸时它会失败。

图像数据以 24 位 BGR 格式从其他一些图像源加载到无符号整数数组中。我已经验证了图像和缓冲区非常好，因为就像我说的那样，它可以在某些尺寸下工作，但根本不行。

我正在测试的当前尺寸是 638x1014。如果我将高度更改为 1013，它可以正常工作，但由于某种原因，如果它是 1014，它就会完全失败。

这里有一些代码向您展示如何设置：

```
unsigned int * buffer = new unsigned int[width * height * 3];

// Fill buffer with image data...

BITMAPINFOHEADER bi = { 0 };
bi.biSize = sizeof(BITMAPINFOHEADER);
bi.biWidth = width;
bi.biHeight = height;
bi.biPlanes = 1;
bi.biBitCount = 24;
bi.biCompression = BI_RGB;
bi.biSizeImage = width * height * 3; // Specifying this value because if I don't it will crash trying to read outside of the buffer.

StartPage(hdcPrint);
SetMapMode(hdcPrint, MM_ISOTROPIC);
SetWindowExtEx(hdcPrint, width, height, NULL);
SetViewportExtEx(hdcPrint, width, height, NULL);
SetViewportOrgEx(hdcPrint, 0, 0, NULL);

StretchDIBits(hdcPrint, 0, 0, width, width, 0, 0, width, height, buffer, (BITMAPINFO *) &bi, DIB_RGB_COLORS, SRCCOPY); 
```

`StretchDIBits`失败时返回零并且打印结果为空白页。

我对问题所在有一个模糊的概念，因为就像评论中所说的那样，如果我没有指定`biSizeImage`并将其保留为零，那么`StretchDIBits`将导致崩溃，因为它试图读取缓冲区的末尾。即便如此，我也不知道如何准确诊断它为什么会这样做，因为它适用于某些尺寸，但不适用于其他尺寸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T01:42:18.273

您的宽度是错误的字节数。Windows 要求每行是 4 字节的倍数；`638*3`是 1914，这是 2 个字节害羞。

# android - 如何让 Eclipse 自动建议方法？

> ID：13714913
> 
> 赞同：4
> 
> 时间：2012-12-05T01:26:05.970
> 
> 标签：android, eclipse

我刚刚完全删除了 Eclipse 和 Android SDK，然后从 Android SDK 包中重新安装了它们。（我这样做是因为随着时间的推移已经积累了很多膨胀，我无法让 SDK Manager 识别新版本的 ADT。）

如果我键入类的名称，然后键入一个点，Eclipse 会弹出一个类的所有可用方法的列表，并在我继续键入时开始过滤列表。此功能在我重新安装后无法使用。我怎样才能打开它？

我已经在 SDK Manager 中安装了 API 17 的源代码和文档。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T01:49:53.593

需要在首选项的 Java -> Editor-> Content Assist -> Advanced 部分中选中以下框：

*   Java 非类型提案
*   Java 提案
*   Java 类型建议

# iphone - 处理 performSelector 时出现 iOS 6 错误

> ID：13714914
> 
> 赞同：0
> 
> 时间：2012-12-05T01:26:10.213
> 
> 标签：iphone, objective-c, facebook, ios6

这是我将字符串转换为浮点数的代码

```
-(void) onUploadProgress:(id) sender valueString:(NSString *)valueString
{
    NSLog(@"Value String = %@", valueString);
    [progressbar setProgress:[valueString floatValue]];
} 
```

这是调用上述函数的选择器

```
NSString *valueString = [NSString stringWithFormat:@"%f", ((float)totalBytesWritten/(float)totalBytesExpectedToWrite)];
[delegate performSelector:progressSelector withObject:(NSString*)valueString]; 
```

这段代码在我的 iPad ios5 上工作，但是当我在 IOS 6 模拟器上测试时，它抛出了一个无法识别的异常`[controller floatValue]`选择器。我知道这是由这个引起的，但不知道为什么。它在 valueString 变量中确实有值。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:55:24.767

尝试

```
[delegate performSelector:@selector(progressSelector) withObject:(NSString*)valueString]; 
```

# c - 链表，存储顺序错误？

> ID：13714916
> 
> 赞同：2
> 
> 时间：2012-12-05T01:26:26.923
> 
> 标签：c, hyperlink, struct, linked-list

我有一个关于如何存储我的链接列表的问题。数据是从像 0 1 2 3 4 这样的文件输入的，每个数字代表不同的数据行。然而，数据在这个问题中并不重要。

我试图将它存储到我的链接列表中并存储它，但是它是从下到上存储的，所以当我输出它时，它以错误的顺序打印出来。我不确定我是否以错误的顺序存储它，或者以错误的顺序打印它请帮助我，谢谢！

代码：

```
struct roomData
{
float widthFeet, widthInch;
float lengthFeet, lengthInch;
char roomName[100];
int roomNumberOfType;
char roomType[6]; //char of room type
int roomStock[100][2]; //for storing each room stock types
int roomHasStock; //if the room has a stock avaliable
int roomStockCount; //how many stocks the room has
float area;  // sq ft
float rentalRate;
float profitsPerRoom;
float netProfit;
float grossProfit;
char stockLine[200];

int x;
struct roomData *nextRoom;

}*startRoom; 
```

在 main 中像这样声明结构链表：

```
struct roomData *rooms;
//Sets them to empty
startRoom = NULL; 
```

将数据添加到结构中：

```
 void addRoomData(int n, int x, struct fileInput array[300], int check)
            {
            /*******************************************************************
            * NAME :            void addRoomData(int n, int x, struct fileInput array[300], int check)
              DESCRIPTION :     fills up the room struct
              INPUTS :          n, x, array, check
              OUTPUTS:          None
            */

                struct roomData *temp;
                temp=(struct roomData *)malloc(sizeof(struct roomData));

                char * word3 = (char *) malloc(100) ; // used with strTok
                char salesName[100] = "";

                word3 = strtok(array[n].input," "); //roomType
                strcpy(temp->roomType, word3);

                word3 = strtok(NULL," "); //roomNumberOfTYpe
                temp->roomNumberOfType = atoi(word3);

                word3 = strtok(NULL," "); //roomLengthFeet
                temp->lengthFeet = atof(word3);

                word3 = strtok(NULL," "); //roomLengthInches
                temp->lengthInch = atof(word3);

                word3 = strtok(NULL," "); //roomWidthFeet
                temp->widthFeet = atof(word3);

                word3 = strtok(NULL," "); //roomWidthInches
                temp->widthInch = atof(word3);

                //room area
                temp->area = (((temp->lengthFeet * 12) + temp->lengthInch) /12) * (((temp->widthFeet * 12) + temp->widthInch) /12);

                word3 = strtok(NULL," "); //rentalRate
                temp->rentalRate = atof(word3);

                word3 = strtok(NULL," "); //forSalesName
                while(word3 != NULL ) //fills up the name array and stores it into salesName with concatanation
                {
                    strcat(salesName, word3);
                    strcat(salesName, " ");
                    word3 = strtok(NULL, " ");
                }

                char *ptr = (char *) malloc(100); //delets new line from string
                if( (ptr = strchr(salesName, '\n')) != NULL)
                *ptr = '\0';

                char roomNumber[10];
                sprintf(roomNumber, " %d", temp->roomNumberOfType);
                strcat(salesName, roomNumber); //adds room number to salesName string

                if(strcmp(temp->roomType, "S")==0)
                    strcpy(temp->roomName, salesName);//store salesName with roomNumner

                if(check == 1) //for stock values in room
                {
                    temp->roomHasStock = 1;
                    n++;
                    /*
                    strcpy(temp->stockLine, array[n].input);
                    printf("%s", array[n].input);

                    int a,b = 0 ;
                    word3 = strtok(array[n].input," "); //stockType
                    printf("%s \n", word3);
                    temp->roomStock[a][0] = atoi(word3); //sores stock number
                    printf("%s \n", word3);
                    word3 = strtok(NULL, " "); //stockCount
                    temp->roomStock[a][1] = atoi(word3); //sores stock inventory
                    temp->roomStockCount = 0; //for storing how many stocks in room
                    a++; //next value in array
                    temp->roomStockCount++; //if a stock was saved, then inventory + 1

                    while(word3 != NULL ) //fills up the name array and stores it into salesName with concatanation
                    {
                        word3 = strtok(NULL, " "); //takes each value stockItem and stockCount
                        temp->roomStock[a][b] = atoi(word3); //stores
                        b++; //for count

                        if(b == 2) //if reaches after count, reset so it can store item number
                        {
                            a++; //next item number
                            temp->roomStockCount++; //inventory + 1
                            b=0;
                        }

                    }
                        a = 0; //reset values
                        b = 0; //reset values
                    */
                }//end if

                if (startRoom== NULL)
                {
                    startRoom=temp;
                    startRoom->nextRoom=NULL;
                }
                else
                {
                    temp->nextRoom=startRoom;
                    startRoom=temp;
                }
            } 
```

用这个打印它：

```
 void printRoomData(struct roomData *r)
            {
            /*******************************************************************
            * NAME :            void printRoomData(struct roomData *r)
              DESCRIPTION :     print room information
              INPUTS :          struct roomData
              OUTPUTS:          None
            */
                r=startRoom;
                if(r==NULL)
                {
                    return;
                }
                int y;
                printf("**************************************************\n");
                printf("Room Information:\n\n");
                while(r!=NULL)
                {
                    printf("Room Type: %s\n", r->roomType);
                    printf("Room Number: %d of Type %s\n", r->roomNumberOfType, r->roomType);
                    printf("Room Length- Feet: %.2f    Inches: %.2f\n", r->lengthFeet, r->lengthInch );
                    printf("Room Widh- Feet: %.2f    Inches: %.2f\n", r->widthFeet, r->widthInch );
                    printf("Room Area: %.2f sq ft\n", r->area);
                    printf("Room Rental Rate: $%.2f\n", r->rentalRate);
                    printf("Gross Profit: $%.2f\n", r->grossProfit);
                    printf("Net Profit: $%.2f\n", r->netProfit);
                    if(strcmp(r->roomType, "S")==0) //if room is a sales room
                    printf("Sales Room Name: %s\n", r->roomName);
                    if(r->roomHasStock == 0) //if room has no stock
                        printf("Stock Avaliable: No\n");
                    if(r->roomHasStock == 1) //if room has stock
                    {
                        printf("Stock Avaliable: Yes\n");
                        printf("Stocks: %s\n", r->stockLine);
                        for(y=0; y<r->roomStockCount; y++) //how many stock does room have?
                        {
                            printf("Stock Number: %d, Stock Inventory: %d\n", r->roomStock[y][0], r->roomStock[y][1]);
                        }
                    }
                    printf("\n");
                    r=r->nextRoom;
                }
                printf("**************************************************\n");
                printf("\n");
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:40:52.080

You have to define a list tail pointer, then add new room data at tail.

```
struct roomData *startRoom = NULL, *tail = NULL;

void addRoomData() {
    // skip code to set room  data

    temp.next = NULL;
    if (startRoom == NULL) {
        startRoom = temp;
        tail = temp;
    }
    else {
        tail->next = temp;
        tail = temp;
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:39:53.420

Your last line body in the fragment code, basically injects as the first item in the list. You have one of two basic choices. Change the add code, so that it enumerates the list to the end and add the link there. Or write a print function, and then call it recursively so that it unwinds the stack/list in forward order. This really isn't a good idea generally, at all, so I'll leave how to write that as an exercise for the masochist student. If you don't want to enumerate to add, you can keep two pointers, one to the firstLink, and one to the lastLink (make sure you keep lastLink updated)

# java - 退出动作监听器

> ID：13714922
> 
> 赞同：0
> 
> 时间：2012-12-05T01:27:22.290
> 
> 标签：java, multithreading, actionlistener

如何从 actionlistener 中退出我的程序。我有两个线程，thread1 和 thread2。一个线程在 actionlistener 中。但我希望其他线程退出此操作侦听器并管理其余代码。我该怎么做？

```
sendtkttgt.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {

        Thread thread1= new Thread(){
            public void run(){
                SendingLogictoTGT obj=new SendingLogictoTGT();
                try {
                    try {
                        obj.main(null);
                    } catch (InterruptedException ex) {
                    }
                } catch (IOException ex) {
                   //  System.exit(1);
                }

            }
        };

      /*Thread thread2= new Thread(){
            public void run(){              
           //I want to exit from this actionlistener 

            }
        };
      */

        thread1.start();

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:33:01.907

interrupt() 将是您的最佳选择。

# java - DataTable.diff（列表 ) or List in cucumber-jvm

> ID：13714924
> 
> 赞同：0
> 
> 时间：2012-12-05T01:27:29.747
> 
> 标签：java, ruby, testing, cucumber-jvm

我目前正在将最初用 ruby​​ 编写的测试套件移植到 java。

# 列表<字符串[]>

我尝试移植的第一步将 CSV 数据解析为`List<String[]>`

```
@Then("test 1")
public void test1( DataTable expectedTable ) {
  List<String[]> tableData = getCsvData( fileName );
  // I have also tried List<Map<String,String>> here.
  // when List<String[]> includes the column names in element 0, TableConverter.toTable() 
  // for List<Map<String,String>>, TableConverter.toTable() ends up with 
  // writer: { columnNames:(as provided in element 0),
  //           fieldNames: ["entry", "entry", "entry"...]
  //           fieldValues: [colName0, row1Value0, colName1, row1Value1...] }
  // and then ComplexTypeWriter.getValues() calls
  //   int index = fieldNames.indexOf(converter.map(columnName));
  // where columnName is correct, but index is evaluated as -1, so getValues() returns
  //   [, , , ,...]
  // so .diff() displays a table of empty strings.
  expectedTable.diff( tableData );
} 
```

...cucumber-jvm 无法正确显示实际的 CSV 数据。

# 列表<地图<字符串,字符串>>

在我们的 ruby​​ 实现中，其他测试步骤用于`Cucumber::Ast::Table.diff!`显示失败的原因：

```
failure = {'line number' => line, 'reason' => 'bad data in column 2', 'data' => column2}
failures.push failure
Cucumber::Ast::Table.new([[]]).diff!( failures, {surplus_col: true, surplus_row: true} )    unless failures.empty? 
```

我尝试使用 将其移植到 java `java.util.Map`，如下所示。问题在于，尽管 cucumber-jvm 识别出s 的 empty`DataTable`和 my之间存在差异，但它并不能正确解析（或显示）my。`List``Map``List<Map>`

```
Map<String,String> failure = new HashMap<String,String>();
failure.put("line number", Integer.toString(line));
failure.put("reason", "bad data in column 2");
failure.put("data", Arrays.toString(column2));

List<Map<String,String> failures = new ArrayList<Map<String,String>>();
failures.add(failure);

// We're expecting an empty list of failures, so create one to compare against.
String[] columnNames = failures.get(0).keySet().toArray(new String[]{});
ArrayList<Map<String, String>> emptyList = new ArrayList<Map<String,String>>();
HashMap<String, String> emptyData = new HashMap<String, String>();

for( String columnName : failures.get(0).keySet() ) {
    emptyData.put(columnName, null);
}

emptyList.add(emptyData);
DataTable empty = DataTable.create( emptyList, Locale.getDefault(), columnNames );

empty.diff( failures ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:17:10.337

我已经实现了对此的支持：

[https://github.com/cucumber/cucumber-jvm/pull/434](https://github.com/cucumber/cucumber-jvm/pull/434)

# ruby-on-rails - Rails 路由重定向子域

> ID：13714926
> 
> 赞同：6
> 
> 时间：2012-12-05T01:27:56.097
> 
> 标签：ruby-on-rails, routes

我们无法更改服务器配置文件，因此我们需要在 rails 级别进行重定向。

我对到外部站点的路径重定向没有问题，例如：

`match "/meow" => redirect("http://meow.com/")`

问题在于子域。我需要重定向例如：

[http://my.example.com](http://my.example.com) => [http://example.com](http://example.com)

如何使用 routes.rb 来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-31T11:48:31.520

根据@cfernandezlinux 的[惊人回答](https://stackoverflow.com/a/13716446/525478)，**Rails 4/Ruby 2**的语法也一样：

```
constraints subdomain: "meow" do   
  get "/" => redirect { |params| "http://www.externalurl.com" }
end 
```

*   **`match`**在 Rails 4.0 中不再允许在 routes.rb 中。您必须明确使用`get`,`post`等。
*   **hashrocket 语法**(=>) 用于旧的 Ruby，现在在 Ruby 2.0 中我们使用 param: 'value' 语法

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T04:41:45.040

我最终做了这样的事情：

```
constraints :subdomain => "meow" do   
  match "/" => redirect { |params| "http://www.externalurl.com" }
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-17T16:42:42.303

如果您不想对 URL 进行硬编码（例如，您可以在本地测试/使用它），您可以执行以下操作：

```
 constraints subdomain: 'subdomain_from' do
    get '/' => redirect(subdomain: :new_subdomain, path: '')
  end 
```

所以现在`subdomain_from.google.com`将重定向到`new_subdomain.google.com`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T01:30:42.653

我希望这个 railscast 可以帮助：

[http://railscasts.com/episodes/221-subdomains-in-rails-3](http://railscasts.com/episodes/221-subdomains-in-rails-3)

[http://railscasts.com/episodes/123-subdomains](http://railscasts.com/episodes/123-subdomains)

# c# - 在回发到另一个页面时检索 MasterPage 文本框控件

> ID：13714927
> 
> 赞同：0
> 
> 时间：2012-12-05T01:28:10.247
> 
> 标签：c#, asp.net, master-pages

我花了两天时间试图找出这个问题的解决方案，甚至尝试了 ExpertExchange，但我仍然无法得到解决方案。我是 ASP.Net（使用 C#）的新手程序员，我不想使用字符串/url 帖子

我有一个 MasterPage，其中有一个名为 tbSearchString 的文本框。这是一个简单的框，用户可以输入一些内容，然后它会回发到另一个页面 SearchResults.aspx 所以我还有其他页面，例如使用 MasterPage 的 Default.aspx。

我已经尝试了几乎所有东西，并且阅读了我在网上可以找到的几乎所有帖子，无论变量总是为 Null 是什么。

我在 searchResults loadpage 事件中使用了此代码，并且这些变量中的每一个都是空的，即使我在页面文本框中输入了一个值并单击按钮以回发到 SearchResults 页面，它唯一有效的时间是如果我是在 searchResults 页面上并提交。

**搜索结果后端页面**

```
protected void Page_Load(object sender, EventArgs e)
{

    TextBox SearchString;
    TextBox SearchString2;
    TextBox SearchString3;
    TextBox SearchString5;   

    if (Page.PreviousPage != null)  //This is true on every test
    {

        SearchString = (TextBox)Page.PreviousPage.Master.FindControl("tbSearchString");
        SearchString2 = (TextBox)PreviousPage.Master.FindControl("tbSearchString");
        SearchString3 = (TextBox)Master.FindControl("tbSearchString");
        TextBox LoginControlx = (TextBox)PreviousPage.FindControl("Form1");

       if (LoginControlx != null)
        {
          TextBox SearchString4 = (TextBox)LoginControlx.FindControl("tbSearchString");
        }
  } 
```

**MainWebsite.Master 页面代码**

```
<asp:TextBox ID="tbSearchString" runat="server"></asp:TextBox>
                <asp:Button ID="btnSearch1" runat="server" Text="Search" PostBackUrl="~/SearchResultRentalEquiptment.aspx" /> 
```

我在 CS 后端页面中没有任何内容

所以在 Default.aspx 页面上

没什么特别的 只是母版页和一些文本内容，我在文本框中输入一些文本会转到 SearchResults 页面，但我无法从 Default 或任何其他页面的 Textbox 控件中获取该值。

智者怎么说？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:00:38.220

您如何将表单重定向到搜索结果表单？如果您使用的是 Response.redirect，Page.PreviousPage.Master.FindControl 下的值将为 null 。尝试使用**Server.Transfer**看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:06:59.597

查看[会话](http://msdn.microsoft.com/en-US/library/6ad7zeeb%28v=vs.100%29.aspx)。当我需要从一页到另一页获取数据时，我一直使用它。我目前无法为您写出完整的示例，但在我的脑海中，以下应该可以工作：

```
//page1.aspx:

protected void btnSubmit_Click(object sender, EventArgs e)
{
     string greetingString = "Hello";
     Session["MyValue"] = greetingString;
     Response.Redirect("page2.aspx");
}

//page2.aspx:

protected void Page_Load(object sender, EventArgs e)
{
     Response.Write(Session["MyValue"].ToString());  //prints "Hello"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T02:02:35.307

这是一种方法：

假设这是您的母版页代码：

```
<asp:TextBox ID="searchbox" runat="server" /><br />
<asp:Button ID="sendSearch" runat="server" PostBackUrl="~/Results.aspx" Text="Search" /> 
```

归根结底，一切都是关于`HTTP POST`，所以在目标页面中`Results.aspx` `PageLoad`：

```
protected void Page_Load(object sender, EventArgs e)
{
    string _foo = Request.Form[this.Master.FindControl("searchbox").UniqueID];
} 
```

嗯……

# linux - 一个进程什么时候会导致linux中的分页

> ID：13714932
> 
> 赞同：0
> 
> 时间：2012-12-05T01:29:04.197
> 
> 标签：linux, memory-management, paging

今天，我收到了一些关于 3000KB/秒交换活动的警报。这个 linux 机器运行的进程很少，总共有 32GB 的 RAM。当我登录并确实免费执行时，我没有看到任何可疑的东西。可用内存与（缓冲区/缓存）行中使用的比率足够高（25GB 空闲，5GB 使用）。

1.  所以我想知道在linux系统上分页的主要原因是什么

2.  交换性如何影响分页

3.  页面在换出之前在物理 RAM 中停留多长时间。是什么控制了 Linux 上的这种行为？

4.  是否有可能即使有足够的可用物理 RAM，但进程的内存访问模式使得数据分布在多个页面上。这会导致分页吗？例如，考虑一个 5GB 的数组，这样程序在循环中访问 5GB，虽然速度很慢，但是没有使用的页面被换出。同样，请记住，即使缓冲区是 5GB，也可能有 20GB 的物理 RAM 可用。

更新：Linux 供应商是 RHEL 6.3，内核版本 2.6.32-279.el6.x86_64

# solr - 查找具有多个方面的组

> ID：13714933
> 
> 赞同：1
> 
> 时间：2012-12-05T01:29:15.163
> 
> 标签：solr, facet

我试图弄清楚 SOLR 4.0 是否有可能。

我有一堆已编入索引的文档，我可以成功搜索它们。我想弄清楚的是如何找到 GROUP 具有一组特定方面的文档组。

例如，假设我拥有的文档是一个以作者、类型（小说或非小说）、标题和概要为架构的书籍列表。

我想做的是按作者分组并找到所有写小说和非小说书籍的作者。我知道如何获取组，并且我设置了分面以显示组计数而不是文档计数。我只是不知道是否可以进行 fq 搜索并找到具有所需方面的组。

# php - 设置会话规则后我无法访问我的主页 - 这是为什么呢？

> ID：13714936
> 
> 赞同：-1
> 
> 时间：2012-12-05T01:29:52.347
> 
> 标签：php, session-variables

如果我以用户身份登录，我将无法访问我自己的个人资料页面 - 我已在每个页面的顶部设置此规则：

登录页面：

```
 <?php  session_start();
   $password = $this->input->post('password');
   if($password == '1'){$_SESSION['loggedin'] = 1;}
     ?> 
```

然后应将用户带到主页：

```
<?php  session_start();
  if(! isset($_SESSION['loggedin']))
  header("location:http://localhost/ci/web-project-jb.php/start");

?> 
```

```
<div id="header">
  <h1> 
    SpaceBook: <?=$username?>'s Home Page
  </h1>
</div> 
```

如果未注册用户尝试手动导航到我的任何网页，他们将被带到“开始”页面：

```
 <?php  $_SESSION['username'] = null;?>
 <body id="start">

<div id="header">
<h1>
 SpaceBook: Start Page
</h1> 
```

只是为了确保会话已被销毁

我在我的注销功能中设置了它将破坏会话：

```
 function logout()
{
$this->session->sess_destroy();
redirect ('start');
 } 
```

我有一个 session_start(); 在我登录后在我的主页上（在我的登录页面上也有）但是由于我已经将上面的 if 语句放在我不能再以注册用户身份登录 - 为什么会发生这种情况？我什至在登录页面调用了 session_start。我也有一个登录控制器，我在其中传递我的登录参数。我需要在这里提及登录吗？控制器：

```
 function loguserin()

    {

$this->load->helper(array('form', 'url'));

$this->load->library('form_validation');

$this->form_validation->set_rules('username', 'Username', 'required|min_length[5]|max_length[12]|trim');
$this->form_validation->set_rules('password', 'Password', 'required|md5|trim');

$username = $this->input->post('username');
$password = $this->input->post('password');

$valid = $this->membership->validateUser($username, $password);

if ($this->form_validation->run() && $valid == true)
{
    $this->session->set_userdata('status', 'OK');
    $this->session->set_userdata('username', $username);

    redirect('home');
}
else
{
    $this->session->set_userdata('status', 'NOT_OK');
    $this->load->view('shared/header');
    $this->load->view('account/logintitle');
    $this->load->view('account/loginview');
    $this->load->view('shared/footer');
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:45:26.550

您的代码似乎不太有效。`if(!isset($_SESSION['loggedin']))`那条线应该没问题。当您说要重置会话时，使用`$this->session->sess_destroy();`代替不是更好`<$_SESSION['username'] = null;?>`吗？

最后，`<$_SESSION['username'] = null;?>`似乎是一个重置代码。如果您登录然后访问带有此代码的页面，它只会结束会话...您确定您没有这样做吗？

# javascript - 在 for...in 循环 (JavaScript) 中继承的不可枚举属性

> ID：13714938
> 
> 赞同：2
> 
> 时间：2012-12-05T01:30:05.570
> 
> 标签：javascript, internet-explorer, firefox, google-chrome

我有一个对象*p*，具有可枚举的属性*x*。

```
var p = Object.create(Object.prototype, {
  x: {
    value: "frog",
    enumerable: true
  }
}); 
```

我创建了一个对象，它继承自*p*并覆盖属性*x*，具有不可枚举的属性

```
var o = Object.create(p, {
  x: {
    value: "bird",
    enumerable: false
  }
}); 
```

你怎么看，属性*x会在**o*的 for...in 循环中枚举吗？

```
for (var n in o) {
  console.log(n);
} 
```

好吧，在 Chrome 和 IE9 中，它将被枚举（我认为这很奇怪）；在FF中，它不会被枚举。

哪一个是正确的行为？

这是一个完整的例子：http: [//jsfiddle.net/hnvsM/3/](http://jsfiddle.net/hnvsM/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T01:37:32.663

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T01:35:37.510

这是 V8 中的一个已知错误。很长一段时间以来，一直有关于此的错误报告。

[问题 705：不可枚举属性无法从 for-in 隐藏继承的可枚举属性](http://code.google.com/p/v8/issues/detail?id=705&q=enumerable&colspec=ID%20Type%20Status%20Priority%20Owner%20Summary%20HW%20OS%20Area%20Stars)

# javascript - 以编程方式禁用对谷歌电子表格中命名范围的编辑

> ID：13714939
> 
> 赞同：0
> 
> 时间：2012-12-05T01:30:26.740
> 
> 标签：javascript, permissions, range, google-sheets

有谁知道如何以编程方式为 google 电子表格的 javascript 中的命名范围分配具有“VIEW”权限的共享用户？我可以通过上下文菜单做到这一点，但还没有找到如何在 javascript 中完成？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:44:07.213

Google-spreadsheet-api 目前不支持对命名范围的保护。此[功能请求](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1721)要求这样做。您可能希望为它加注星标以跟踪更新并为它投票。

# nhibernate - Castle Active Record - 嵌套数据列前缀

> ID：13714943
> 
> 赞同：0
> 
> 时间：2012-12-05T01:30:46.800
> 
> 标签：nhibernate, castle-activerecord

我有一些类的结构类似于下面显示的类。

```
[ActiveRecord]
public class Request : ActiveRecordBase
{
    [PrimaryKey]
    public int Id {get; set;}

    [Nested("SectionA")]
    public SectionA A {get; set;}

    [Nested("SectionB")]
    public SectionB B {get; set;}

}

public class SectionA
{
    [Property]
    public string Description {get; set;}

    [Property]
    public string Remark {get; set;}

    [HasMany(typeof(Attachment), 
             Table="Attachments", ColumnKey="RequestId",
             Where="Section = 'SectionA'")]
    public IList Attachments {get; set;}
}

public class SectionB
{
    [Property]
    public string Description {get; set;}

    [HasMany(typeof(Attachment), 
             Table="Attachments", ColumnKey="RequestId",
             Where="Section = 'SectionB'")]
    public IList Attachments {get; set;}

}

[ActiveRecord]
public class Attachment
{
    [PrimaryKey]
    public int Id {get; set;}

    [BelongsTo("RequestId")]
    public Request Owner {get; set;}

    [Property]
    public string Section {get; set;}

    [Property]
    public string FilePath {get; set;}
} 
```

一切正常，除了附件类的列也将具有前缀。它的发生非常随机，因为有时它确实有前缀，有时却没有。

有什么方法可以防止附件有前缀，或者有更好的方法来构造我的类来防止这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:04:11.887

似乎方法是防止附件类上的嵌套前缀是直接连接请求和附件。仍然需要观察几次迭代。

```
[ActiveRecord]
public class Request : ActiveRecordBase
{
    [PrimaryKey]
    public int Id {get; set;}

    [HasMany(typeof(Attachment)]
    public IList Attachments {get; set;}

    [Nested("SectionA")]
    public SectionA A {get; set;}

    [Nested("SectionB")]
    public SectionB B {get; set;}

} 
```

# ruby - 使用 mechanize 检查具有相似但不同名称的 div

> ID：13714944
> 
> 赞同：1
> 
> 时间：2012-12-05T01:31:20.597
> 
> 标签：ruby, xpath, nokogiri, mechanize

目前我正在做以下事情：

```
if( firstTemp == true )
    total = doc.xpath("//div[@class='pricing  condense']").text
else
    total = doc.xpath("//div[@class='pricing  ']").text
end 
```

我想知道无论如何我可以让机械化自动获取包含字符串“定价”的div吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T01:50:11.037

是`doc`一个`Mechanize::Page`？通常约定是`page`针对那些和`doc`针对`Nokogiri::HTML::Document`. 无论如何，对于任何一个尝试：

```
doc.search('div.pricing') 
```

对于第一个，使用`at`代替`search`：

```
doc.at('div.pricing') 
```

# delphi - 印地 (IdHTTP) 的 curl_multi？

> ID：13714945
> 
> 赞同：1
> 
> 时间：2012-12-05T01:31:22.687
> 
> 标签：delphi, curl, delphi-xe2, libcurl, indy

如何使用 Indy IdHTTP 在 Delphi 中执行 curl_multi？我的意思是多个请求，就像在 PHP 中一样。但我不会使用 cURL，而是使用 Indy。

> curl_multi 基本上是单个线程内并行的多个 HTTP 请求

它也可以是任何其他库。因为据我所知，CurlPas 自 2005 年以来就没有更新过。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T01:45:59.110

使用多个 IdHTTP 实例，每个实例都在它自己的线程中。

## 更新

澄清一下：创建一个 TThread 子类。在 TThread 执行中，选择一个请求的 URL，创建一个 IdHttp 并为其提供服务。您可以让多个这样的线程并行运行。这意味着您的 HTTP 请求正在被并行处理，就像 curl 一样。

# ios - iOS - 添加了安全框架。但它被使用了吗？

> ID：13714948
> 
> 赞同：0
> 
> 时间：2012-12-05T01:31:33.950
> 
> 标签：ios, security, code-analysis, ios-frameworks

我正在查看应用程序的源代码。在框架下，我看到已经添加了安全框架（Security.Framework），但我不知道它是否正在被使用。

检查框架是否被使用的有效方法是什么？换句话说，我如何判断开发人员是否正确使用了框架？我对框架不太熟悉。看起来好像开发人员需要实际使用该框架，并且仅仅因为它已安装，它并没有提供任何保护。如果我错了，请纠正我。

我一直在查看的文档并不是很有帮助。谢谢你。

# svn - svn checkout 两个目录中的两个路径

> ID：13714949
> 
> 赞同：0
> 
> 时间：2012-12-05T01:31:36.277
> 
> 标签：svn, svn-checkout

我需要检查两个目录中的两个路径。这是我以前尝试过的：

```
svn co https://localhost:8443/svn/Code "d:\src" https://localhost:8443/svn/lines "d:\src\bin" 
```

和类似的命令，但只有第一个路径被检出到第二个目录，并出现错误 svn: E125002: >D:/src< scheint keine URL zu sein 这意味着 >D:/src< 看起来不像 URL。

我在[这里](http://www.visualsvn.com/support/svnbook/ref/svn/c/checkout/)修改了语法，但无法正常工作。请为我提供工作示例。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:11:22.123

似乎不可能通过 svn checkout 命令检查每个目录。

你必须用我推荐的一行命令'&'

```
svn co https://localhost:8443/svn/Code "d:\src" & svn co https://localhost:8443/svn/lines "d:\src\bin" 
```

它在 linux 操作系统中运行良好

我希望它有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:49:55.380

*   ~~正如@namxee 所写（并`svn help co`提醒），您在结帐**时不能**使用**两个以上的**参数（SRC 和 TGT）~~ VisualSVN 手册页中的第三个命令将有助于（使用三个参数将多 SRC 结帐到公共库中），语法正确

`svn co https://localhost:8443/svn/Code https://localhost:8443/svn/lines d:\src`

这将在 d:\src`中将`Code`和子​​目录`lines`作为**两个独立的工作副本**

*   第二个问题更糟糕：即使使用两个单独的命令将两个**同级源**（`/svn/Code`和`/svn/lines`）签入父|子工作副本（`d:\src`+ `d:\src\bin`），当你尝试提交（或成功提交，我也是懒得预测，你的机架到底在哪里）对 Repo 的更改。也许你可以描述**你**对这种异国情调的厕所布置的商业任务

# php - CodeIgniter 将 html 放入 flashdata

> ID：13714950
> 
> 赞同：0
> 
> 时间：2012-12-05T01:31:44.060
> 
> 标签：php, codeigniter

当我放置一些大数据（如 html 标签和消息）时，会话失败，我尝试使用数据库，但仍然出现相同的错误

```
$this->session->set_flashdata('message', '
            <p class="center">Article added successfully</p>
            <p class="center"><a href="/admin/item/add">some other message</a></p>
            '); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-05-11T09:33:28.083

你应该删除标签之间的空格，像这样

```
$this->session->set_flashdata('message', '<p class="center">Article added successfully</p><p class="center"><a href="/admin/item/add">some other message</a></p>'); 
```

# php - 查看详细信息的 php cookie 或会话？

> ID：13714956
> 
> 赞同：0
> 
> 时间：2012-12-05T01:32:17.957
> 
> 标签：php, cookies

我有来自数据库的数据，我需要计算每次点击的视图，

我只需要计算当前小时的唯一点击次数。

将其保存在数据库中不是我的选择。并且让用户知道他/她已经点击了该数据

我应该为用户单击或会话的每个数据使用 cookie 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:38:41.140

I would store it in a session, there is no need to send it back and forth with every page request, that would only slow things down, especially if the site is big and the internet connection of your visitor slow.

However, note that you can only display this information to your visitor if you use sessions or cookies, there is nothing that **you** can actually do with it unless you store in in a database or a text file.

# c++ - 带继承的构造函数定义

> ID：13714961
> 
> 赞同：0
> 
> 时间：2012-12-05T01:32:35.960
> 
> 标签：c++, class, object, constructor

我的教授给出了以下代码来展示继承的示例：

```
//Base class
class Inventory {
    int quant, reorder; // #on-hand & reorder qty
    double price; // price of item
    char * descrip; // description of item
public:
    Inventory(int q, int r, double p, char *); // constructor
    ~Inventory(); // destructor
    void print();
    int get_quant() { return quant; }
    int get_reorder() { return reorder; }
    double get_price() { return price; }
};
Inventory::Inventory(int q, int r, double p, char * d) : quant (q), reorder (r), price (p)
{
    descrip = new char[strlen(d)+1]; // need the +1 for string terminator
    strcpy(descrip, d);
} // Initialization list

//Derived Auto Class
class Auto : public Inventory {
    char *dealer;
public:
    Auto(int q, int r, double p, char * d, char *dea); // constructor
    ~Auto(); // destructor
    void print();
    char * get_dealer() { return dealer; }
};
Auto::Auto(int q, int r, double p, char * d, char * dea) : Inventory(q, r, p, d) // base constructor
{
    dealer = new char(strlen(dea)+1); // need +1 for string terminator
    strcpy(dealer, dea);
} 
```

我很困惑“Auto::Auto(int q, int r, double p, char * d, char * dea) : Inventory(q, r, p, d)”，什么是“Inventory(q, r , p, d)" 做。同样在“Inventory::Inventory(int q, int r, double p, char * d) : quant (q), reorder (r), price (p)”行中，我不确定他在用 quant 做什么(q)、重新排序 (r)、价格 (p)。这些变量是否与在类中定义为 int quant、reorder 和 double price 的变量相同？如果是这样，为什么他必须在构造函数中使用。以及他为什么/如何使用基类的构造函数来帮助定义“自动”类构造函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T01:35:18.073

他正在使用“初始化列表”。

他正在调用基类构造函数。为调用参数化构造函数的类`Auto::Auto(int q, int r, double p, char * d, char * dea) : Inventory(q, r, p, d)`定义一个构造函数。需要调用参数化构造函数，因为它继承自并定义了参数化构造函数。C++ 规定，如果您定义参数化构造函数，则默认构造函数将被覆盖，并且您可以实例化该类或任何子类的对象的唯一方法是调用参数化构造函数（或通过定义备用默认构造函数）。`Auto``Inventory``Auto``Inventory``Inventory`

在 的情况下，他分别用值和`Inventory::Inventory(int q, int r, double p, char * d) : quant (q), reorder (r), price (p)`初始化字段`quant`、`reorder`和。这实际上是一种速记，您可以改为在构造函数主体中分配值（除非该成员是常量）。`price``q``r``p`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T20:45:01.870

在子构造函数中，你总是默认调用父构造函数。如果该构造函数接收参数，则必须使用 : 表示法显式编写调用。

# asp-classic - 经典 ASP - 使用 CDOSYS 向自己的域发送电子邮件失败

> ID：13714964
> 
> 赞同：1
> 
> 时间：2012-12-05T01:33:16.213
> 
> 标签：asp-classic, windows-server-2008, plesk

我有一个经典的 asp 电子邮件脚本，它使用经过身份验证的 CDOSYS 从数据库发送到电子邮件。它在 Parallels Plesk Windows 2008 服务器上运行。

这适用于所有电子邮件地址，但属于我发送的服务器上的站点的任何地址除外。

我可以使用 Google Apps 电子邮件帐户进行身份验证（域是使用 Google Apps 为电子邮件设置的），但每次客户端运行脚本时，我都会遇到 Google 的 24 小时发送限制。

任何人都可以指出我哪里出错或解释为什么电子邮件发送到发送服务器上的站点会导致错误？错误是

```
error '8004020f'
/admin/send-group-email.asp, line 128 
```

这是 objCDO.Send 行

**编码 ：**

（primarydomain.com 是站点在 Parallels 中所在的主要帐户的域名。SenderEmail 值例如是 id@secondarydomain.com）

```
Set cdoConfig = CreateObject("CDO.Configuration")  

    With cdoConfig.Fields  
        .Item(cdoSendUsingMethod) = cdoSendUsingPort  
        .Item(cdoSMTPServer) = "localhost"  
        .Item(cdoSMTPAuthenticate) = 1  
        .Item(cdoSendUsername) = "authenticate@primarydomain.com"  
        .Item(cdoSendPassword) = "thepassword"  
        .Update  
    End With 

   while (NOT RS_Emails.EOF)
      Dim objCDO      
      set objCDO = Server.CreateObject("CDO.Message")
      objCDO.Configuration = cdoConfig
      objCDO.From = CStr(Request.Form("SenderEmail")) & " (" & CStr(Request.Form("SenderName")) & ")"
      objCDO.To = RS_Emails.Fields.Item("email").Value
      objCDO.Subject = CStr(Request.Form("Subject"))
      objCDO.HTMLBody = message
      objCDO.Send
      set objCDO = Nothing
      RS_Emails.MoveNext
    Wend
      set cdoConfig=Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:03:28.860

这很可能是可以使用 Plesk 解决的服务器问题。

请查看以下链接： [http ://mkb-training.com/index.php?option=com_content&view=article&id=1:setting-up-google-apps-with-plesk&catid=1:google-tutorial&Itemid=2](http://mkb-training.com/index.php?option=com_content&view=article&id=1:setting-up-google-apps-with-plesk&catid=1:google-tutorial&Itemid=2)

请注意以下内容：“取消选中 MX1：“域 IP 也用于邮件服务器””（那里有关于如何执行此操作的屏幕截图）。我不是 100% 确定 Plesk，但在 H-Sphere（另一个 Parallels 控制面板）中，当您有远程邮件交换器时，这样做对于能够从服务器发送到您自己的域是必不可少的。

还要确保没有 MX 记录指向您的服务器（即使 Google Apps 的配置正确）。

# java - 单击actionPerformed（Java Swing）上的按钮时如何识别是否选择了shift？

> ID：13714966
> 
> 赞同：3
> 
> 时间：2012-12-05T01:33:24.577
> 
> 标签：java, swing, jbutton, shift

我试图创建一个不同的`actionPerformed`when`Shift`按下 JButton 时按住，但是当我使用时： `event.isShiftDown;` 我的程序无法编译，因为它无法识别它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T01:40:43.180

Basically you need to bitwise-and the `ActionEvent#getModifiers` result

```
if ((e.getModifiers() & InputEvent.SHIFT_MASK) != 0) {
    // Shift is down...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T01:51:58.100

作为直接检查事件修饰符的替代方法，请考虑[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)对 shift 键的每个状态使用不同的修饰符。您可以将所需的掩码提供给`KeyStroke`在您的[*键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)[中使用，如此处](https://stackoverflow.com/a/12521353/230513)所述。[此处](https://stackoverflow.com/a/5129757/230513)`getMenuShortcutKeyMask()`显示了一个相关的使用示例。

# turing-machines - L = {T | T 是识别 {00, 01}} 的图灵机 证明 L 不可判定

> ID：13714971
> 
> 赞同：0
> 
> 时间：2012-12-05T01:34:04.897
> 
> 标签：turing-machines, reduction, decidable

L = {<T> | T 是识别 {00, 01}} 的图灵机

证明 L 是不可判定的。

我真的很难理解这里使用的减少。

我不是要免费午餐，只是朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:04:09.937

赖斯定理的直接应用将使您无需做任何工作即可证明这一点。

一些图灵机可以识别 {00, 01}。有些没有。区别在于语义，因为它与接受的字符串有关，而不是自动机的结构。因此，根据赖斯定理，这个集合是不可判定的。

# mysql - Mysql选择所有行，除了在另一个表中的行

> ID：13714973
> 
> 赞同：1
> 
> 时间：2012-12-05T01:34:09.760
> 
> 标签：mysql

> **可能重复：**
> [需要 SQL 查询来查找没有子记录的父记录](https://stackoverflow.com/questions/6839500/need-sql-query-to-find-parent-records-without-child-records)

我有一张桌子和一张桌子，

```
select name from one 
```

假设我有 3 行 a、b、c

```
select name from table two; 
```

假设我在表 2 中有 3 行，其中包含 a、d、f

我想`select * from table one`name 不在表二中，所以我应该以 b,c 而不是 a 结尾，因为 a 在表二中

请指教谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:37:17.480

Use a `NOT EXISTS` clause

```
SELECT name from one
WHERE NOT EXISTS (
    SELECT 1 FROM two
    WHERE two.name = one.name
) 
```

## Update

Alternatively, you can use a `LEFT JOIN` with a `NULL` qualifier

```
SELECT one.name FROM one
LEFT JOIN two on one.name = two.name
WHERE two.name IS NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T01:39:55.887

You can make a subquery to get the names from table two and use them to exlude rows from table one

SELECT * FROM table1 WHERE name NOT IN (SELECT name FROM table2)

# android - 如何在此 Action Script 3.0 代码中翻转我的视频

> ID：13714977
> 
> 赞同：1
> 
> 时间：2012-12-05T01:34:27.023
> 
> 标签：android, actionscript-3, flash, rotation

我怀疑我创建了一个应用程序来拍照，将其发送到数据库，然后在某个页面上打印。

当我让应用程序运行时，相机会正确显示。但它只在桌面上。当我在apk中打开fla并尝试在android上运行时，面向相机出现在水平方向。

我怎么解决这个问题？

代码在这里：

```
import com.adobe.images.JPEGEncoder;

var video:Video;
var camera:Camera;

var imgBA:ByteArray;
var imgBD:BitmapData;
var imgBitmap:Bitmap;

var phpPath:String;
var jpgEncoder:JPEGEncoder;
var sendHeader:URLRequestHeader;
var sendReq:URLRequest;
var sendLoader:URLLoader;

var imagePath:String;

setupCamera(430,500);

var inicializado:Boolean=false;

status_txt.text="esperando coordenadas";
var geolocationmarcelinho:MarcelinhoGeolocation=new MarcelinhoGeolocation(geoUpdate);

function geoUpdate(lat:Number,lon:Number)
{
if(inicializado)
{
lat_txt.text=lat+"";
lon_txt.text=lon+"";
}
else
{
setupApplication();
lat_txt.text=lat+"";
lon_txt.text=lon+"";
if(lat==-1)
{
status_txt.text="sem geolocation";
}
else
{
status_txt.text="pode usar!";
}
inicializado=true; 
}

}

//setupApplication();

function setupCamera(w:int,h:int):void {
try {
camera = Camera.getCamera();
} catch(e:Error) {
status_txt.text="camera não conectada!";
trace("No Camera detected!");
}

camera.addEventListener(StatusEvent.STATUS, camStatusHandler);
camera.setMode(w,h,stage.frameRate);

video = new Video(w,h);
video.attachCamera(camera);
addChild(video);
}

function camStatusHandler(event:StatusEvent):void {
// Camera.Muted or Camera.Unmuted -> User's security
trace(event.code);
}

function setupApplication():void {
shotBtn.addEventListener(MouseEvent.CLICK, createSnapshot);
removeBtn.addEventListener(MouseEvent.CLICK, removeSnapshot);
sendBtn.addEventListener(MouseEvent.CLICK, sendImage);

jpgEncoder = new JPEGEncoder(90);

}

function createSnapshot(event:MouseEvent):void {
imgBD = new BitmapData(video.width,video.height);
imgBD.draw(video);

imgBitmap = new Bitmap(imgBD);
addChild(imgBitmap);

shotBtn.removeEventListener(MouseEvent.CLICK, createSnapshot);
}

function removeSnapshot(event:MouseEvent):void {
removeChild(imgBitmap);
comentario_txt.text="";
status_txt.text="pode usar!";
shotBtn.addEventListener(MouseEvent.CLICK, createSnapshot);
}

function sendImage(event:MouseEvent):void {
phpPath = "http://celoweb.com.br/app/img_aplicativo/upload.php?comentario=qualquercoisa&latitude=34&longitude=-45"
+comentario_txt.text+"&latitude="+lat_txt.text+"&longitude="+lon_txt.text;

sendHeader = new URLRequestHeader("Content-type","application/octet-stream");
sendReq = new URLRequest(phpPath);
sendReq.requestHeaders.push(sendHeader);
sendReq.method = URLRequestMethod.POST;

sendLoader = new URLLoader();
sendLoader.addEventListener(Event.COMPLETE,imageSentHandler);

imgBA = jpgEncoder.encode(imgBD);
sendReq.data = imgBA;
sendLoader.load(sendReq);
}

function imageSentHandler(event:Event):void {
var dataStr:String = event.currentTarget.data.toString();
var resultVars:URLVariables = new URLVariables();
resultVars.decode(dataStr);

imagePath = "http://" + resultVars.base + "/" + resultVars.filename;
status_txt.text="Uploaded to: " + imagePath;
trace("Uploaded to: " + imagePath);
sendLoader.removeEventListener(Event.COMPLETE,imageSentHandler);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:42:07.950

同意你的问题有点不清楚，但猜测......

要旋转图像，您将使用： imgBitmap.rotation = 90;

或翻转：

imgBitmap.scaleX = -1;

# c++ - 如何从输入文件 C++ 的行中读取多个数据变量？

> ID：13714978
> 
> 赞同：2
> 
> 时间：2012-12-05T01:34:30.613
> 
> 标签：c++, string, file-io

我正在开发一个从输入文件中读取道路数据的程序，如下所示：

```
INTERSECTIONS:
1   0.5 Speedway and Campbell    // intersection ID, safety rating, name
2   0.3 Park and Grant
3   0.1 Euclid and Grant

STREETS:
1   2   3            // intersection 1, intersection 2, distance in between
2   3   1
3   1   2 
```

表中的每个值都由制表符 (\t) 字符分隔

我必须将这些数据读入图表指定的适当变量中。我主要是在寻找一个简单的答案：是否可以使用 getline 一次读取一行，然后将该行分成每一位数据？如果是这样，我会怎么做？

到目前为止，这是我在主文件中的内容：

```
#include "graph.h"
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>

using namespace std;

vector <Vertex*> vertices;
vector <Edge*> edges;

int main (int argc, char *argv[]) {

    if( argc != 4 )
    {
        std::cout << "\nUsage: " << argv[0] << " distanceInMiles startingIntersection streetMapGraphFile \n\n" << endl;
        return -1;
    }

    ifstream mapfile ("streetMapGraphFile");

    int count = 0;
    int loc = 0;

    Graph streetMap;

    if (mapfile.is_open())
    {
        while ( mapfile.good() )
        {
            while ( count != 1 ) {
                string line;
                getline(mapfile,line);
                if ( line == "INTERSECTIONS:" )
                {
                    getline(mapfile,line);
                }
                else if ( line == "" )
                {
                    count++;
                    break;  //  to avoid reading blank line line
                }
                stringstream ss(line);
                ss >> streetMap.intersection->streetID >> streetMap.intersection->safetyIndex;
                getline(ss, streetMap.intersection->name);
            }
            string line2;
            getline(mapfile,line2);
            if ( line2 == "STREETS:" )
            {
                getline(mapfile,line2);
            }
            //  TODO: Read in the edges/streets here
            stringstream ss2(line2);
            ss2 >> streetMap.street->intersection1 >> streetMap.street->intersection2 >> streetMap.street->distance;
        }
        mapfile.close();
    }
    else { cerr << "Error: unable to open file" << endl; }

    return 0;
} 
```

我已经更改了代码以在行字符串上实现 stringstream，但是当我逐步调试时，我的编译器在执行此行后崩溃：

```
ss >> streetMap.intersection->streetID >> streetMap.intersection->safetyIndex; 
```

错误显示“safejogger.exe 中 0x0F592208 (msvcp110d.dll) 处的未处理异常：0xC0000005：访问冲突写入位置 0xCCCCCCCC。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:40:48.023

Yes it is possible. One way is to use a stringstream: [http://www.cplusplus.com/reference/sstream/stringstream/](http://www.cplusplus.com/reference/sstream/stringstream/)

Example:

```
#include <sstream>
#include <iostream>
#include <string>

using namespace std;

template <typename T>
void getVal(stringstream &ss, T &val)
{
  string token;
  getVal(ss, token);
  stringstream ss2(token);
  ss2>>val;
}

template <>
void getVal<string>(stringstream &ss, string &val)
{
  getline(ss, val, '\t'); //Note the separator specification                                                                                                                                                                                                                                                                                                              
}

int main(int argc, char** argv)
{
  string line = "1\t2\t3";
  stringstream ss(line);
  int intersection1, intersection2, distance;
  getVal(ss, intersection1);
  getVal(ss, intersection2);
  getVal(ss, distance);
  cout<<"Distance was: "<<distance<<endl;

  string line2 = "1\t0.5\t Speedway and Campbell";
  stringstream ss2(line2);
  int intersectionID;
  float safetyRating;
  string intersectionName;
  getVal(ss2, intersectionID);
  getVal(ss2, safetyRating);
  getVal(ss2, intersectionName);
  cout<<"Intersection name: ["<<intersectionName<<"]"<<endl;

  return 0;
} 
```

# jquery-mobile - 带有导航栏的 JQuery Mobile 后退按钮

> ID：13714980
> 
> 赞同：1
> 
> 时间：2012-12-05T01:34:48.553
> 
> 标签：jquery-mobile

我在 JQM 页面中有导航栏：

```
<div data-role="navbar">
    <ul>
        <li><a href="#about" class="ui-btn-active ui-state-persist">About</a></li>
        <li><a href="#details">Details</a></li>
    </ul>
</div> 
```

两个页面都一样`navbar`。

我有如下返回按钮：

```
<a href="#" data-icon="back" data-rel="back" >Back</a> 
```

问题是在查看页面之前后退按钮不会转到上一页，#details 和#about 页面包含在历史记录中。如何忽略或排除这两个页面，以便单击后退按钮将转到首先加载它的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:35:42.533

您不能因为“data-rel=back”使用浏览器历史记录，因此：

1.  从“主要”开始
2.  点击“关于”
3.  点击“详情”
4.  点击“关于”
5.  单击“返回”-返回到“详细信息”
6.  单击“返回” - 返回“关于”
7.  单击“返回” - 将您返回到“主要”，哇哦！

我建议你删除“关于”和“详细信息”页面上的导航栏，这样你只有一种方法可以去：回到你调用它的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:21:20.523

试试这个解决方案：

```
<script>
$('#about').click(function(){
    $('#contentDiv').html('Your content');
});
$('#details').click(function(){
    $('#contentDiv').html('Your content');
});
</script>
<body>
<div data-role="page" id="main">
    <div id="contentDiv" data-role="content">
    </div>
    <div data-role="navbar">
        <ul>
            <li><a id="about" class="ui-btn-active ui-state-persist">About</a></li>
            <li><a id="details">Details</a></li>
        </ul>
    </div>
</div>
</body> 
```

使用此解决方案时，您将确保单击后退按钮时，您会转到上一页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:53:17.277

最简单的方法是让您的 about 和 details 页面为 jquery 移动对话页面（请参阅[文档](http://jquerymobile.com/demos/1.2.0-beta.1/docs/pages/page-dialogs.html)）。

```
<a href="foo.html" data-rel="dialog">Open dialog</a> 
```

历史记录中不跟踪对话页面，这应该可以实现您正在寻找的目标。

# python - 比较两个字典键值，如果匹配则返回值

> ID：13714982
> 
> 赞同：20
> 
> 时间：2012-12-05T01:35:05.887
> 
> 标签：python, dictionary

我是 Python 的初学者，但我一直在尝试这种语法，但我无法弄清楚——这真是令人困惑。

```
crucial = {'eggs': '','ham': '','cheese': ''}
dishes = {'eggs': 2, 'sausage': 1, 'bacon': 1, 'spam': 500}

if crucial.keys() in dishes.keys():
    print dishes[value] 
```

我想要做的是——如果关键在`eggs`盘子里有一个键（在这种情况下，），它会返回`2`。看起来很简单，但我相信我一定在某处弄乱了某种语法。如果有人可以指导我一点，那将不胜感激。

我比较的真正字典大约有 150 个键长，但我希望这段代码足够简单。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-05T01:36:54.180

您需要遍历 key 中的键并将每个键与菜键进行比较。因此，您的代码的直接修改版本。

```
for key in crucial.keys():
    if key in dishes.keys():
        print dishes[key] 
```

可以更好地表述为（无需指定 .keys）：

```
for key in crucial:
    if key in dishes:
        print dishes[key] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T02:26:41.320

如果您使用的是 Python 3，则`keys`字典的方法遵循`set`接口。这意味着您可以使用`&`运算符对两个字典的键进行交集。

```
for key in crucial.keys() & dishes.keys():
    print(dishes[key]) 
```

或者，如果您需要值列表：

```
result = [dishes[key] for key in crucial.keys() & dishes.keys()] 
```

在 Python 2 中，您可以通过显式创建集合（可能来自`iterkeys`生成器）来管理相同的事情，但可能最好简单地对键进行循环，就像其他几个答案所建议的那样。

这是循环的一个变体，我认为我没有见过其他人这样做。外层循环从 dict 中获取键和值`dishes`，因此您不需要单独按键查找值。

```
for key, value in dishes.iteritems(): # use items() in Python 3
    if key in crucial:
        print value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T01:44:41.683

使用列表理解很好

```
[ dishes[x] for x in crucial if dishes.has_key(x) ] 
```

或者，根据 gnibbler：

```
[ dishes[x] for x in crucial if x in dishes ] 
```

该表达式将迭代critical中的每个键，如果键在dish中，它将返回dish中相同键的值，最后返回所有匹配值的列表。

或者，您可以使用这种方式， (set (crucial) & set(dishes)) 返回两个集合的公共键，然后迭代这个集合并返回菜式中的值。

```
[ dishes[x] for x in set (crucial) & set(dishes) ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T01:47:30.623

`has_key()`已在 Python 3 中删除：http: [//docs.python.org/3.1/whatsnew/3.0.html#builtins](http://docs.python.org/3.1/whatsnew/3.0.html#builtins)

相反，您可以使用：

```
[dishes[key] for key in crucial.keys() if key in dishes] 
```

这里使用的方法称为列表推导。你可以在这里读到它：

[http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T02:11:15.420

如果您还不熟悉 Python 的 REPL（Read-Evaluate-Print-Loop - 您输入代码的地方，按 Enter 并立即计算），这将是一个很好的工具。

因此，让我们开始分解您的代码。

```
crucial = {'eggs': '','ham': '','cheese': ''}
dishes = {'eggs': 2, 'sausage': 1, 'bacon': 1, 'spam': 500} 
```

很简单。`crucials`尽管我注意到您在字典中没有任何值。我不确定这是否是您示例的缩写，或者您是否只是关心键。如果您只关心键，那么我假设您使用字典是为了确保唯一性。在这种情况下，您应该检查[`set`数据结构](http://docs.python.org/2/library/stdtypes.html#set)。

例子：

```
crutial = set(['cheese', 'eggs', 'ham']) 
```

继续我们有

```
if crucial.keys() in dishes.keys(): 
```

在这里，您使用的是[`in`比较运算符](http://docs.python.org/2/reference/expressions.html#in)。例子：

```
5 in [5, 4] #True
3 in [5, 4] #False 
```

如果我们评估`crucial.keys()`并`dishes.keys()`得到

```
 >>> crucial.keys()
 ['cheese', 'eggs', 'ham']
 >>> dishes.keys()
 ['eggs', 'bacon', 'sausage', 'spam'] 
```

所以在执行期间你的代码评估为

```
 ['cheese', 'eggs', 'ham'] in ['eggs', 'bacon', 'sausage', 'spam'] 
```

它返回`False`是因为值`['eggs', 'bacon', 'sausage']`（这是一个列表）不在列表中`['eggs', 'bacon', 'sausage', 'spam']`（实际上该列表中没有列表，只有字符串）。

因此，您正在评估为

```
if False:
    print dishes[value] #note value is not defined. 
```

看起来您已经混合/混淆了`in`返回布尔值的运算符和 for 迭代器 ( `for item in collection`)。这种事情有一种语法。它被称为[列表](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)推导，您可以在@ShawnZhang 和@kmad 的答案中找到示例。您可以将其视为过滤和修改（映射）集合的简洁方法，并返回一个列表作为结果。我不想在这里太深入，否则我最终会介绍函数式编程。

您的另一个选择是分别使用`for .. in`迭代和`in`运算符。这是@timc 给出的解决方案。对于初学者来说，这样的解决方案可能更熟悉或更容易。它清楚地区分了迭代和过滤的行为。它也更像是用其他没有与列表推导等效的编程语言编写的内容。那些经常使用 Python 工作的人可能会喜欢理解语法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-14T04:15:41.730

您可以使用[`Counter`](https://docs.python.org/3/library/collections.html#collections.Counter)：

```
import operator
from collections import Counter

def mio(si, ti):
    si = Counter(s)
    ti = Counter(t)
    if operator.eq(si, ti):
        return True
    return False 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-25T04:16:25.927

```
crucial = {'eggs': '','ham': '','cheese': ''}
dishes = {'eggs': 2, 'sausage': 1, 'bacon': 1, 'spam': 500}
for key in set(dishes.keys()) & set(crucial.keys()):
    print dishes[key] 
```

同样，您可以拥有`set(dishes.keys()) - set(crucial.keys())`、`set(dishes.keys()) | set(crucial.keys())`或`set(dishes.keys()) ^ set(crucial.keys())`。

# javascript - 为什么我无法在 JavaScript 中通过 OM 获取 ClientContext？

> ID：13714983
> 
> 赞同：3
> 
> 时间：2012-12-05T01:35:08.657
> 
> 标签：javascript, sharepoint, sharepoint-2010

这是我在项目中所做的：

```
<asp:Content ContentPlaceHolderID="PlaceHolderAdditionalPageHead" runat="server">
<script type="text/javascript">
  alert("before");
  //It can not work cause the LIST is in the subsite called "Service"
  //var clientContext = SP.ClientContext.get_current();
  var context =new SP.ClientContext("http://sp2010dev1:88/Service/");
  alert(context );  
</script>
</asp:Content> 
```

但是，警报（上下文）无法执行，当我检查它显示给我的concole时`TypeError: SP.ClientContext is not a constructor`，也就是说ClientContext的初始化有问题。为什么？如何获取 ClientContext？还是因为缺少SP.js造成的？

我的最终解决方案是：将此语句添加到母版页：，然后一切正常！希望这可以帮助你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:15:17.020

不要直接在`<script>`块中写入，而是尝试插入`function`并在身体负载时调用该函数。

另一个好方法是使用 jquery 调用

```
$(document).ready()(function(){
var context =new SP.ClientContext("http://sp2010dev1:88/Service/");
  alert(context );  

}); 
```

尝试一次，即使它不起作用，也会尝试找到另一个解决方案。

根据 steve 的建议，除此之外，首先包括`sp.js`并执行剩余的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T03:31:49.017

是的，可能是因为没有加载 SP.js。尝试这个：

```
<SharePoint:ScriptLink runat="server" Name="SP.js" Localizable="false" OnDemand="False" LoadAfterUI="True"></SharePoint:ScriptLink>
<script type="text/javascript">
    ExecuteOrDelayUntilScriptLoaded(function () {
        /* your code here */;
    }, "sp.js");
</script> 
```

# combobox - GTK CellRendererCombo 将值设置到适当的单元格中

> ID：13714985
> 
> 赞同：0
> 
> 时间：2012-12-05T01:35:31.007
> 
> 标签：combobox, gtk, treecellrenderer

我正在尝试做一个有几列的 TreeView。第一列是一个ComboBox，这意味着我使用Gtk.CellRendererCombo。问题是，当我从组合框中选择一个值时，我希望单元格中的文本从“”更改为我刚刚选择的值。如果在 Gtk.CellRendererCombo.Edited 事件中我将列 Text 字段设置为 EditedArgs.NewText，这是可行的。

问题是，每次我设置一个值时，我都会创建一个新行，并且我希望文本字段的行为与 Gtk.CellRendererText 中的行为一样，但事实并非如此。该列的每一行的值不是不同的，而是与 Gtk.CellRendererCombo.Text 中设置的值相同

Gtk.CellRenderer 不应该包含任何状态，所以好吧，从我想做的事情来看，使用 Text 字段是一个非常糟糕的主意。

但是，如果我从 Gtk.ListStore 中设置一些值，即我的 TreeView 的模型（这与 Gtk.CellRendererCombo 的模型不同）。设置的值永远不会显示在 ComboBox 的列中。

```
class Program
{
    private static Gtk.TreeView treeview = null;

    static void OnEdited(object sender, Gtk.EditedArgs args)
    {
        Gtk.TreeSelection selection = treeview.Selection;
        Gtk.TreeIter iter;
        selection.GetSelected(out iter);

        treeview.Model.SetValue(iter, 0, args.NewText); // the CellRendererCombo
        treeview.Model.SetValue(iter, 1, args.NewText); // the CellRendererText

        //(sender as Gtk.CellRendererCombo).Text = args.NewText; // Will set all the Cells of this Column to the Selection's Text
    }

    static void Main(string[] args)
    {
        Gtk.Application.Init();

        Gtk.Window window = new Window("TreeView ComboTest");
        window.WidthRequest = 200;
        window.HeightRequest = 150;

        Gtk.ListStore treeModel = new ListStore(typeof(string), typeof(string));
        treeview = new TreeView(treeModel);

        // Values to be chosen in the ComboBox
        Gtk.ListStore comboModel = new ListStore(typeof(string));
        Gtk.ComboBox comboBox = new ComboBox(comboModel);
        comboBox.AppendText("<Please select>");
        comboBox.AppendText("A");
        comboBox.AppendText("B");
        comboBox.AppendText("C");
        comboBox.Active = 0;

        Gtk.TreeViewColumn comboCol = new TreeViewColumn();
        Gtk.CellRendererCombo comboCell = new CellRendererCombo();
        comboCol.Title = "Combo Column";
        comboCol.PackStart(comboCell, true);
        comboCell.Editable = true;
        comboCell.Edited += OnEdited;
        comboCell.TextColumn = 0;
        comboCell.Text = comboBox.ActiveText;
        comboCell.Model = comboModel;
        comboCell.WidthChars = 20;

        Gtk.TreeViewColumn valueCol = new TreeViewColumn();
        Gtk.CellRendererText valueCell = new CellRendererText();
        valueCol.Title = "Value";
        valueCol.PackStart(valueCell, true);
        valueCol.AddAttribute(valueCell, "text", 1);

        treeview.AppendColumn(comboCol);
        treeview.AppendColumn(valueCol);

        // Append the values used for the tests
        treeModel.AppendValues("comboBox1", string.Empty); // the string value setted for the first column does not appear.
        treeModel.AppendValues("comboBox2", string.Empty);
        treeModel.AppendValues("comboBox3", string.Empty);

        window.Add(treeview);
        window.ShowAll();
        Gtk.Application.Run();
    }
} 
```

我希望 ComboBox 的单元格在其中进行了选择以显示值，但继续可编辑以供以后更改。

如果有人有办法做到这一点，我将非常感谢您的意见。谢谢。

**更新：**

我的想法是，因为 Gtk.CellRendererCombo 继承自 Gtk.CellRendererText 它只是忽略了单元格中设置的值。现在，我想我可以创建一个继承自 Gtk.CellRendererCombo 的自定义 MyCellRendererCombo 并在为渲染提供时使用单元格中设置的值，但是关于 Gtk.CellRendererText 和 Gtk.CellRendererCombo 之间差异的文档非常薄......我想我应该访问 C 中的实现以了解详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:34:47.127

好的，我找到了解决问题的方法，我使用“隐藏”列读取“文本”值。隐藏列包含 Gtk.CellRendererText，Gtk.CellRendererCombo 必须具有与新列的属性映射。

结果代码如下：

```
class Program
{
    private static Gtk.TreeView treeview = null;

    static void OnEdited(object sender, Gtk.EditedArgs args)
    {
        Gtk.TreeSelection selection = treeview.Selection;
        Gtk.TreeIter iter;
        selection.GetSelected(out iter);

        treeview.Model.SetValue(iter, 1, args.NewText); // the CellRendererText
    }

    static void Main(string[] args)
    {
        Gtk.Application.Init();

        Gtk.Window window = new Window("TreeView ComboTest");
        window.WidthRequest = 200;
        window.HeightRequest = 150;

        Gtk.ListStore treeModel = new ListStore(typeof(string), typeof(string));
        treeview = new TreeView(treeModel);

        // Values to be chosen in the ComboBox
        Gtk.ListStore comboModel = new ListStore(typeof(string));
        Gtk.ComboBox comboBox = new ComboBox(comboModel);
        comboBox.AppendText("<Please select>");
        comboBox.AppendText("A");
        comboBox.AppendText("B");
        comboBox.AppendText("C");
        comboBox.Active = 0;

        Gtk.TreeViewColumn comboCol = new TreeViewColumn();
        Gtk.CellRendererCombo comboCell = new CellRendererCombo();
        comboCol.Title = "Combo Column";
        comboCol.PackStart(comboCell, true);
        comboCol.AddAttribute(comboCell, "text", 1);
        comboCell.Editable = true;
        comboCell.Edited += OnEdited;
        comboCell.TextColumn = 0;
        comboCell.Text = comboBox.ActiveText;
        comboCell.Model = comboModel;
        comboCell.WidthChars = 20;

        Gtk.TreeViewColumn valueCol = new TreeViewColumn();
        Gtk.CellRendererText valueCell = new CellRendererText();
        valueCol.Title = "Value";
        valueCol.PackStart(valueCell, true);
        valueCol.AddAttribute(valueCell, "text", 1);
        valueCol.Visible = false;

        treeview.AppendColumn(comboCol);
        treeview.AppendColumn(valueCol);

        // Append the values used for the tests
        treeModel.AppendValues("comboBox1", "<Please select>"); // the string value setted for the first column does not appear.
        treeModel.AppendValues("comboBox2", "<Please select>");
        treeModel.AppendValues("comboBox3", "<Please select>");

        window.Add(treeview);
        window.ShowAll();
        Gtk.Application.Run();
    }
} 
```

# c - 从结构打印数据

> ID：13714989
> 
> 赞同：1
> 
> 时间：2012-12-05T01:35:48.267
> 
> 标签：c, struct

我有以下形式的嵌套结构数组：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct
{
    char* e_name;
    char* e_lastname;
}emp_name;

typedef struct
{
   emp_name name;
   int id;
}emp;

int main(int argc, char *argv[])
{
  int i;
  int cod=100;
  emp job[3];
  for (i=0;i<3;i++)
  {

     scanf("%s",&job[i].emp.e_lastname);
     job[i].id=cod;
      cod++;
 }
     for (i=0;i<3;i++)
  {
       printf("%s",job[i].emp.e_lastname);
         printf("%d\n",job[i].id);
  }
 system("PAUSE");   
    return 0;
  } 
```

但是程序挂在打印部分，这是为什么呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:30:29.580

您确实需要小心指针以及分配或不分配的内容。我已经重写了您的代码，但使用了错误的解决方案。检查评论。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct emp_name {
    /* 
     * now there you had just char*. this decares
     * a pointer to some memory but no memory is allocated.
     * if you were going with that approach you should initialize
     * the struct and assign those values to something you malloc'ed().
     * This version suffers from fixed size and a possible buffer overflow if
     * you chose scanf to write the data in the buffer.
     */
    char e_name[512];
    char e_lastname[512];
    /*
     * try to follow conventions. your previous struct declarations
     * were anonymous. if it caught an error you wouldn't know in which
     * struct it would be.  good practices here: link1 (bottom) 
     */
} emp_name_t;

typedef struct emp {
    emp_name_t emp;
    int id;
} emp_t;

int main(int argc, char *argv[]) {
    int i;
    int cod=100;
    emp job[3];
    for (i=0;i<3;i++) {
        /*
         * check out this excelent post for a secure alternative:
         * link2 (bottom)
         */
        scanf("%s",&job[i].emp.e_lastname);
        job[i].id=cod;
        cod++;
     }
     for (i=0;i<3;i++) {
         printf("%s",job[i].emp.e_lastname);
         printf("%d\n",job[i].id);
     }
     return 0;
} 
```

链接1 ：[openbsd风格（9）](http://www.openbsd.org/cgi-bin/man.cgi?query=style&apropos=0&sektion=0&manpath=OpenBSD%20Current&arch=i386&format=html)

链接2：[scanf的缺点](https://stackoverflow.com/questions/2430303/disadvantages-of-scanf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:54:44.773

你有三个问题：

**首先**你要访问：

```
job[i].name.e_lastname 
```

不是

```
job[i].emp.e_lastname 
```

**第二**你应该有：

```
scanf("%s",&job[i].name.e_lastname); 
```

代替

```
scanf("%s",job[i].name.e_lastname); 
```

您没有通过`&`，因为它是您传递给 scanf 函数的数组。

**第三个**问题你应该为你的`char *e_lastname`和`char *e_name`阵营分配内存`struct emp_name`。

注意：

**扫描**

int scanf ( const char * 格式, ... );

> 从标准输入读取数据并根据参数格式将它们存储到附加参数指向的位置。
> 
> **附加参数应指向已分配的对象**， 其类型由格式字符串中的相应格式说明符指定。（[来源](http://www.cplusplus.com/reference/cstdio/scanf/)）

所以你想要这个：

```
int main(int argc, char *argv[])
{
  int i;
  int string_size = 10;
  int cod=100;
  emp job[3];

  for (i=0;i<3;i++) // Allocate space for the string you will access.
  {
  job[i].name.e_name = malloc(sizeof(char)*string_size);
  job[i].name.e_lastname = malloc(sizeof(char)*string_size);
  }

  for (i=0;i<3;i++)
  {

     scanf("%s",job[i].name.e_lastname);
     job[i].id=cod;
     cod++;
 }
     for (i=0;i<3;i++)
  {
       printf("%s",job[i].name.e_lastname);
         printf("%d\n",job[i].id);
  }
 system("PAUSE");   
    return 0;
  } 
```

考虑使用 scanf 是不安全的事实，因为：

> 如果不正确地使用 %s 和 %[ 转换，则读取的字符数仅受下一个空白字符出现的位置的限制。这几乎肯定意味着无效输入可能会使您的程序崩溃，因为输入太长会溢出您为其提供的任何缓冲区。不管你的缓冲区有多长，用户总是可以提供更长的输入。一个编写良好的程序会通过可理解的错误消息报告无效输入，而不是崩溃。（[来源](http://crasseux.com/books/ctutorial/String-overflows-with-scanf.html)）

不过，它们是您可以使用 scanf 做的一些解决方法（[在此处](http://crasseux.com/books/ctutorial/String-overflows-with-scanf.html)检查它们）

[您可以使用fgets](http://itee.uq.edu.au/~comp2303/Leslie_C_ref/C/FUNCTIONS/fgets.html)而不是 scanf 。fgets 允许您限制将放置在缓冲区中的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:49:28.063

我看到你有：

```
typedef struct
{
    char* e_name;
    char* e_lastname;
}emp_name;

typedef struct
{
   emp_name name;
   int id;
}emp;

emp job[3]; 
```

那么**.emp**在下面的行中做了什么？它不是任何结构的成员

```
job[i].emp.e_lastname 
```

# html - 将带有 htaccess 的 favicon 添加到子域

> ID：13714996
> 
> 赞同：0
> 
> 时间：2012-12-05T01:36:40.213
> 
> 标签：html, css, http-headers, favicon

如果没有在我的文档头部明确声明`<link rel="shortcut icon" href="favicon.ico">`，我可以在特定子目录中的每个页面上添加一个网站图标吗？我以为我读过一次，可以通过将单行 htaccess 文件添加到要显示 facicon 的目录来完成，但现在我似乎找不到该文档。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T01:38:12.490

如果没有定义 favicon，一般浏览器会查询域的根目录。

IE。它将尝试 www.example.com/favicon.ico

如果您将文件放在那里，它将适用于整个域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:44:49.343

你的意思是这样的吗

```
AddType image/x-icon .ico 
```

# iphone - pushViewController Not Working on iOS 5 (OK on iOS 6)

> ID：13714997
> 
> 赞同：1
> 
> 时间：2012-12-05T01:36:44.087
> 
> 标签：iphone, ios, uinavigationcontroller, sigabrt

I have a UINavigationController that displays several buttons on screen. They all simply use the line:

```
myViewController *newView = [[myViewController alloc] initWithNibName:@"myViewController"
                                                                          bundle:nil];
[[self navigationController] pushViewController:newView animated:YES]; 
```

to transition to the next view. I have one such view controller however that results in a crash at this very line ONLY on iOS 5\. It works perfectly fine on iOS 6\. I am baffled. There are no real details to the crash. It is a SIGABRT that highlights the main.m line:

```
exitStatus = UIApplicationMain( argc, argv, nil, NSStringFromClass([ApplicationDelegate class])); 
```

I have no clue...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T04:32:56.133

1.  **您需要取消选中自动布局。**

![在此处输入图像描述](../Images/85fb62ee6d37d39b3a5c68f477232d4f.png)

2.  **并确保您也在此处进行更改.. 选择 ios 5.1**

![在此处输入图像描述](../Images/5734a055a20e6e1391600da3403ce669.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:25:37.877

我已经尝试了一个类似的问题，这里是我认为需要考虑的步骤：

*   （如果您使用的是 xib 文件）就像提到的**Venkat Manohar Perepa**一样，请检查 Use Auto Layout 是否已关闭，因为它是 iOS 6 的特定功能。
*   （如果您使用的是 xib 文件）查看显示视图控制器时使用的 xib 文件的内容，并检查是否没有特定于 iOS6 的类（例如：NSLayoutConstraint）
*   最后（这就是我面临的问题）您应该检查崩溃是否出现在安装了 iOS5 的设备上。如果它没有但仍然在模拟器上崩溃，请通过选择 iPhone Simulator > Reset Content and Settings 删除您已安装的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:34:44.413

试试这条线：

```
myViewController *newView = [[myViewController alloc] initWithNibName:@"myViewController"
                                                                              bundle:[NSBundle mainBundle]]; 
```

代替：

```
myViewController *newView = [[myViewController alloc] initWithNibName:@"myViewController"
                                                                          bundle:nil]; 
```