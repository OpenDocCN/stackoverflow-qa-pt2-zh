# StackOverflow 问答 15914000-15914999

# css - 基于彼此拉伸不同的div

> ID：15914000
> 
> 赞同：0
> 
> 时间：2013-04-09T22:55:12.623
> 
> 标签：css, html, stretch

我在根据 div B 的高度拉伸 div A 或根据 div A 的高度拉伸 div B 时遇到问题（取决于哪个内容最多）。

我尝试查看人造列，但由于我的 div 不在同一个“持有人”中，这无法正常工作......我当前的代码如下所示：

```
<div id="header">
    <div id="content">CONTENT HEADER</div>
</div>

<div id="content">
    <div id="column-left">
        <p>INHOUD LINKER KOLOM</p>
        <p>&nbsp;</p>
    </div>
    <div id="column-right">
        <p>INHOUD RECHTER KOLOM</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp; </p>
        <p>&nbsp;</p>
    </div>
    <div class="clear"></div>
</div>

<div id="main">
    <div id="content">
        <div id="main-content">
            <p>HOOFD INHOUD </p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
        </div>
    </div>    
    <div class="clear"></div>
</div>

<div id="footer">
    <div id="content">CONTENT FOOTER</div>
</div> 
```

使用 CSS 如下：

```
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
.clear {
    clear: both;
}

#content { 
    position: relative;
    width: 950px;
    margin-left: auto;
    margin-right: auto;
    z-index: 10
}
#header {
    position: relative;
    min-width: 990px;
    width: 100%;
    height: 90px;
    background-color: #F00;
}
#column-left {
    width: 500px;
    float: left;
    background-color: #0F0;
}
#column-right {
    width: 450px;
    float: right;
    background-color: #00F;
    position: absolute;
    margin-left: 500px;
}
#main {
    min-width: 990px;
    width: 100%;
    background-color: #FF0;
}
#main-content {
    width: 500px;
    float: left;
}
#footer {
    min-width: 990px;
    width: 100%;
    height: 90px;
    background-color: #F00;
} 
```

在我的示例中，您将看到我使“蓝色”div 的内容更长，而我想让“黄色”div 拉伸（因此页脚将在它们下方）

另一种方式也适用（如果“黄色” div 包含更多内容，“蓝色” div 应该拉伸......虽然如果我给出“黄色-蓝色”图像作为背景，这可以通过人造列解决到“蓝色”div）。图片示例：[http ://tinypic.com/view.php?pic=jjpx0k&s=6](http://tinypic.com/view.php?pic=jjpx0k&s=6)

有人可以帮我弄这个吗？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:13:50.807

我查看了您的代码，您真的无法实现您想要做的事情，因为蓝色 div 是绝对的。

这样做的唯一方法是使用 jquery 并检测蓝色 div 的高度，然后将边距或高度添加到黄色 div 以腾出空间，使页脚看起来在蓝色 div 下方...

我希望这有帮助。

# google-drive-api - Google Drive 应用程序的货币化

> ID：15914006
> 
> 赞同：4
> 
> 时间：2013-04-09T22:55:34.623
> 
> 标签：google-drive-api, chrome-web-store

我创建了一个使用 Google Drive SDK 的网络应用程序。我按照如何在 Chrome 网上应用店中列出的说明进行操作，包括对清单文件使用以下格式

```
{
  "name" : "DrEdit",
  "version" : "2",
  "description" : "Text editor",
  "container" : "GOOGLE_DRIVE",
  "api_console_project_id" : "[[YOUR_API_PROJECT_ID]]",
  "icons": {
    "128": "icon-128.png"
  },
  "app" : {
    "launch" : {
      "web_url" : "[[YOUR_WEB_APP_URL]]"
    }
  }
} 
```

但是，当我尝试在 Chrome 商店开发者仪表板中设置定价时，我收到一条错误消息

> 在清单中指定 CHROME 以外的容器的应用可能不会使用 Chrome 网上应用店付款。

不能将 Google Checkout 与 Drive Apps 一起使用吗？

# iphone - 如何使用 PhoneGap 将字符串发送到服务器？

> ID：15914008
> 
> 赞同：0
> 
> 时间：2013-04-09T22:55:36.020
> 
> 标签：iphone, cordova

如何使用 PhoneGap 将字符串发送到服务器？我知道 PhoneGap 有 FileTransfer 使用 POST 请求将文件上传到服务器。但是，如果我只有一个要发送的字符串而不是一个文件，我该怎么做呢？我仍然想使用 POST 请求，以便我可以将字符串发送到服务器，然后让服务器发回响应。

提前致谢！

# cryptography - 支持 AES-256 的 Windows Phone 8 中是否有可用的 C/C++ 加密 API？

> ID：15914011
> 
> 赞同：2
> 
> 时间：2013-04-09T22:55:47.267
> 
> 标签：cryptography, windows-phone-8, aes, windows-phone

Windows CryptoAPI 似乎仅适用于桌面应用程序。是否有任何系统级 C 或 C++ 加密 API 可用于在 Windows Phone 8 中执行 AES-256 加密，还是我必须调用 .NET 并使用 AesManaged？

我试图在 MSDN 中查找这方面的文档，但找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:29:45.517

使用 System.Security.Cryptography.AesManaged。它适用于 Windows Phone，并且具有 256 位 KeySize。示例代码也在 MSDN 上：

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)

要显示它是 AES-256，请将示例代码复制到您的 Windows Phone 项目的 MainPage.cs 文件中。请务必使用 System、System.IO 和 System.Security.Cryptography。从页面的构造函数调用 Main 函数并在“byte[] encrypted = ...”行设置断点。当该断点被命中时，检查 myAes.KeySize 你会看到它是 256 位。

# c++ - 使用 FFMPEG 将屏幕截图编码为视频

> ID：15914012
> 
> 赞同：3
> 
> 时间：2013-04-09T22:55:51.300
> 
> 标签：c++, encoding, ffmpeg, video-streaming

我正在尝试从屏幕上获取像素，并使用 ffmpeg 将屏幕截图编码为视频。我看过几个例子，但他们要么假设您已经拥有像素数据，要么使用图像文件输入。似乎我是否使用 sws_scale() （包括在我见过的示例中），或者我是否在转换 HBITMAP 或 RGBQUAD* 它告诉我图像 src 数据是错误的并且正在编码一个空白图像而不是屏幕截图。我在这里缺少什么吗？

```
AVCodec* codec;
AVCodecContext* c = NULL;
AVFrame* inpic;
uint8_t* outbuf, *picture_buf;
int i, out_size, size, outbuf_size;
HBITMAP hBmp;
//int x,y;

avcodec_register_all();

printf("Video encoding\n");

// Find the mpeg1 video encoder
codec = avcodec_find_encoder(CODEC_ID_H264);
if (!codec) {
    fprintf(stderr, "Codec not found\n");
    exit(1);
}
else printf("H264 codec found\n");

c = avcodec_alloc_context3(codec);
inpic = avcodec_alloc_frame();

c->bit_rate = 400000;
c->width = screenWidth;                                     // resolution must be a multiple of two
c->height = screenHeight;
c->time_base.num = 1;
c->time_base.den = 25;
c->gop_size = 10;                                           // emit one intra frame every ten frames
c->max_b_frames=1;
c->pix_fmt = PIX_FMT_YUV420P;
c->codec_id = CODEC_ID_H264;
//c->codec_type = AVMEDIA_TYPE_VIDEO;

//av_opt_set(c->priv_data, "preset", "slow", 0);
//printf("Setting presets to slow for performance\n");

// Open the encoder
if (avcodec_open2(c, codec,NULL) < 0) {
    fprintf(stderr, "Could not open codec\n");
    exit(1);
}
else printf("H264 codec opened\n");

outbuf_size = 100000 + 12*c->width*c->height;           // alloc image and output buffer
//outbuf_size = 100000;
outbuf = static_cast<uint8_t *>(malloc(outbuf_size));
size = c->width * c->height;
picture_buf = static_cast<uint8_t*>(malloc((size*3)/2));
printf("Setting buffer size to: %d\n",outbuf_size);

FILE* f = fopen("example.mpg","wb");
if(!f) printf("x  -  Cannot open video file for writing\n");
else printf("Opened video file for writing\n");

/*inpic->data[0] = picture_buf;
inpic->data[1] = inpic->data[0] + size;
inpic->data[2] = inpic->data[1] + size / 4;
inpic->linesize[0] = c->width;
inpic->linesize[1] = c->width / 2;
inpic->linesize[2] = c->width / 2;*/

//int x,y;
// encode 1 second of video
for(i=0;i<c->time_base.den;i++) {
    fflush(stdout);

    HWND hDesktopWnd = GetDesktopWindow();
    HDC hDesktopDC = GetDC(hDesktopWnd);
    HDC hCaptureDC = CreateCompatibleDC(hDesktopDC);
    hBmp = CreateCompatibleBitmap(GetDC(0), screenWidth, screenHeight);
    SelectObject(hCaptureDC, hBmp);
    BitBlt(hCaptureDC, 0, 0, screenWidth, screenHeight, hDesktopDC, 0, 0, SRCCOPY|CAPTUREBLT);
    BITMAPINFO bmi = {0}; 
    bmi.bmiHeader.biSize = sizeof(bmi.bmiHeader); 
    bmi.bmiHeader.biWidth = screenWidth; 
    bmi.bmiHeader.biHeight = screenHeight; 
    bmi.bmiHeader.biPlanes = 1; 
    bmi.bmiHeader.biBitCount = 32; 
    bmi.bmiHeader.biCompression = BI_RGB;
    RGBQUAD *pPixels = new RGBQUAD[screenWidth*screenHeight];
    GetDIBits(hCaptureDC,hBmp,0,screenHeight,pPixels,&bmi,DIB_RGB_COLORS);

inpic->pts = (float) i * (1000.0/(float)(c->time_base.den))*90;
    avpicture_fill((AVPicture*)inpic, (uint8_t*)pPixels, PIX_FMT_BGR32, c->width, c->height);                   // Fill picture with image
    av_image_alloc(inpic->data, inpic->linesize, c->width, c->height, c->pix_fmt, 1);
    //printf("Allocated frame\n");
    //SaveBMPFile(L"screenshot.bmp",hBmp,hDc,screenWidth,screenHeight);
    ReleaseDC(hDesktopWnd,hDesktopDC);
    DeleteDC(hCaptureDC);
    DeleteObject(hBmp);

    // encode the image
    out_size = avcodec_encode_video(c, outbuf, outbuf_size, inpic);
    printf("Encoding frame %3d (size=%5d)\n", i, out_size);
    fwrite(outbuf, 1, out_size, f);
}

// get the delayed frames
for(; out_size; i++) {
    fflush(stdout);

    out_size = avcodec_encode_video(c, outbuf, outbuf_size, NULL);
    printf("Writing frame %3d (size=%5d)\n", i, out_size);
    fwrite(outbuf, 1, out_size, f);
}

// add sequence end code to have a real mpeg file
outbuf[0] = 0x00;
outbuf[1] = 0x00;
outbuf[2] = 0x01;
outbuf[3] = 0xb7;
fwrite(outbuf, 1, 4, f);
fclose(f);
free(picture_buf);
free(outbuf);

avcodec_close(c);
av_free(c);
av_free(inpic);
printf("Closed codec and Freed\n"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T04:33:04.363

经过相当多的反复试验，我设法让它工作。我在填充图像后分配图像，这是第一个问题。第二个问题是未正确创建屏幕截图，应该将其转换为 COLORREF* 而不是 RGBQUAD。

```
AVCodec* codec;
AVCodecContext* c = NULL;
uint8_t* outbuf;
int i, out_size, outbuf_size;

avcodec_register_all();                                 // mandatory to register ffmpeg functions

printf("Video encoding\n");

codec = avcodec_find_encoder(CODEC_ID_H264);            // finding the H264 encoder
if (!codec) {
    fprintf(stderr, "Codec not found\n");
    exit(1);
}
else printf("H264 codec found\n");

c = avcodec_alloc_context3(codec);
c->bit_rate = 400000;
c->width = 1280;                                        // resolution must be a multiple of two (1280x720),(1900x1080),(720x480)
c->height = 720;
c->time_base.num = 1;                                   // framerate numerator
c->time_base.den = 25;                                  // framerate denominator
c->gop_size = 10;                                       // emit one intra frame every ten frames
c->max_b_frames = 1;                                    // maximum number of b-frames between non b-frames
c->keyint_min = 1;                                      // minimum GOP size
c->i_quant_factor = (float)0.71;                        // qscale factor between P and I frames
c->b_frame_strategy = 20;                               ///// find out exactly what this does
c->qcompress = (float)0.6;                              ///// find out exactly what this does
c->qmin = 20;                                           // minimum quantizer
c->qmax = 51;                                           // maximum quantizer
c->max_qdiff = 4;                                       // maximum quantizer difference between frames
c->refs = 4;                                            // number of reference frames
c->trellis = 1;                                         // trellis RD Quantization
c->pix_fmt = PIX_FMT_YUV420P;                           // universal pixel format for video encoding
c->codec_id = CODEC_ID_H264;
c->codec_type = AVMEDIA_TYPE_VIDEO;

if (avcodec_open2(c, codec,NULL) < 0) {
    fprintf(stderr, "Could not open codec\n");          // opening the codec
    exit(1);
}
else printf("H264 codec opened\n");

outbuf_size = 100000 + c->width*c->height*(32>>3);      // allocate output buffer
outbuf = static_cast<uint8_t *>(malloc(outbuf_size));
printf("Setting buffer size to: %d\n",outbuf_size);

FILE* f = fopen("example.mpg","wb");                    // opening video file for writing
if(!f) printf("x  -  Cannot open video file for writing\n");
else printf("Opened video file for writing\n");

// encode video
for(i=0;i<STREAM_FRAME_RATE*STREAM_DURATION;i++) {
    fflush(stdout);

    screenCap();                                                                                                // taking screenshot

    int nbytes = avpicture_get_size(PIX_FMT_YUV420P, c->width, c->height);                                      // allocating outbuffer
    uint8_t* outbuffer = (uint8_t*)av_malloc(nbytes*sizeof(uint8_t));

    AVFrame* inpic = avcodec_alloc_frame();                                                                     // mandatory frame allocation
    AVFrame* outpic = avcodec_alloc_frame();

    outpic->pts = (int64_t)((float)i * (1000.0/((float)(c->time_base.den))) * 90);                              // setting frame pts
    avpicture_fill((AVPicture*)inpic, (uint8_t*)pPixels, PIX_FMT_RGB32, c->width, c->height);                   // fill image with input screenshot
    avpicture_fill((AVPicture*)outpic, outbuffer, PIX_FMT_YUV420P, c->width, c->height);                        // clear output picture for buffer copy
    av_image_alloc(outpic->data, outpic->linesize, c->width, c->height, c->pix_fmt, 1); 

    inpic->data[0] += inpic->linesize[0]*(screenHeight-1);                                                      // flipping frame
    inpic->linesize[0] = -inpic->linesize[0];                                                                   // flipping frame

    struct SwsContext* fooContext = sws_getContext(screenWidth, screenHeight, PIX_FMT_RGB32, c->width, c->height, PIX_FMT_YUV420P, SWS_FAST_BILINEAR, NULL, NULL, NULL);
    sws_scale(fooContext, inpic->data, inpic->linesize, 0, c->height, outpic->data, outpic->linesize);          // converting frame size and format

    out_size = avcodec_encode_video(c, outbuf, outbuf_size, outpic);                                            // encoding video
    printf("Encoding frame %3d (size=%5d)\n", i, out_size);
    fwrite(outbuf, 1, out_size, f);

    delete [] pPixels;                                                                                          // freeing memory
    av_free(outbuffer);     
    av_free(inpic);
    av_free(outpic);
}

for(; out_size; i++) {
    fflush(stdout);

    out_size = avcodec_encode_video(c, outbuf, outbuf_size, NULL);                                              // encode the delayed frames
    printf("Writing frame %3d (size=%5d)\n", i, out_size);
    fwrite(outbuf, 1, out_size, f);
}

outbuf[0] = 0x00;
outbuf[1] = 0x00;                                                                                               // add sequence end code to have a real mpeg file
outbuf[2] = 0x01;
outbuf[3] = 0xb7;
fwrite(outbuf, 1, 4, f);
fclose(f);

avcodec_close(c);                                                                                               // freeing memory
free(outbuf);
av_free(c);
printf("Closed codec and Freed\n"); 
```

# objective-c - Objective-c 发布被调用了这么多次

> ID：15914013
> 
> 赞同：0
> 
> 时间：2013-04-09T22:56:00.453
> 
> 标签：objective-c, release

我的根视图控制器的释放方法被调用了38次，但我没有调用释放，为什么会发生？

```
@implementation AppDelegate

- (void)dealloc
{
    [_window release];
    [_viewController release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    } else {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

```
@interface ViewController ()

@end

@implementation ViewController

-(oneway void)release
{
    NSLog(@"release called");
    [super release];
}

@end 
```

* * *

输出

```
2013-04-09 19:47:36.060 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.063 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.064 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.065 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.065 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.066 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.067 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.068 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.072 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.073 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.074 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.075 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.077 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.080 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.081 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.081 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.082 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.108 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.110 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.111 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.112 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.134 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.144 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.158 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.161 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.170 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.180 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.182 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.193 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.197 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.198 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.199 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.202 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.208 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.208 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.218 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.220 TesteRelease[44985:c07] release called
2013-04-09 19:47:36.220 TesteRelease[44985:c07] release called 
```

* * *

我没有使用ARC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:59:48.347

框架的一部分在他们认为合适的时候保留和释放（或自动释放）对象。这是鼓励您不要尝试精确跟踪保留计数的众多原因之一——您不需要知道所有这些保留和释放正在发生，因为它们与您无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:59:20.247

最有可能的是，您的视图控制器在通过系统库传递时被添加到自动释放池中。但只要您确信您的代码正确地管理视图控制器，您就应该将其视为背景噪音而忽略。

# ruby-on-rails - 如果 result.to_s.strip.empty，PDFkit 会引发“命令失败：#{invoke}”？

> ID：15914014
> 
> 赞同：3
> 
> 时间：2013-04-09T22:56:15.280
> 
> 标签：ruby-on-rails, pdfkit

我正在尝试使用 PDFkit。我明白了

```
command failed: "/Users/burtondav/sites/ndeavor/bin/wkhtmltopdf-amd64" "--page-size" "Letter" "--margin-top" "0.75in" "--margin-right" "0.75in" "--margin-bottom" "0.75in" "--margin-left" "0.75in" "--encoding" "UTF-8" "--print-media-type" "--quiet" "-" "-" 
```

它在 (gem) pdfkit-0.5.3/lib/pdfkit/pdfkit.rb 中的代码出错

```
73     raise "command failed: #{invoke}" if result.to_s.strip.empty? 
```

我在 /bin/ 中有 wkhtmltopdf-amd64

在 pdfkit.rb 中，我有：

```
 config.wkhtmltopdf = Rails.root.join('bin', 'wkhtmltopdf-amd64').to_s 
```

谢谢您的帮助！

# html - 居中对齐内联块元素的集合，而不使每个元素居中

> ID：15914019
> 
> 赞同：3
> 
> 时间：2013-04-09T22:56:47.347
> 
> 标签：html, css, layout

我的代码中有一个复杂的层次结构，无法真正改变。它是包含图像的内联块 div 的集合，位于外部 div 内部。像这样的东西：

```
<div> <!-- text-align: center -->
    <div><img/></div><!-- display: inline-block -->
    <div><img/></div><!-- display: inline-block -->
    <div><img/></div><!-- display: inline-block -->
    <div><img/></div><!-- display: inline-block -->
    <!-- ... -->
</div> 
```

我需要这些图像来填充基于用户浏览器窗口的屏幕。我还需要图像本身左对齐 - 因此，如果浏览器每行可以容纳 5 个图像，并且最后一行只有 1 个图像，则该图像需要一直向左，而不是居中。但是，我需要整个组居中对齐，因此右侧没有巨大的白边距。

我尝试在层次结构中添加另一个 div，如下所示：

```
<div><!-- text-align: center -->
    <div><!-- display: inline-block -->
        <div><img/></div><!-- display: inline-block -->
        <div><img/></div><!-- display: inline-block -->
        <div><img/></div><!-- display: inline-block -->
        <div><img/></div><!-- display: inline-block -->
        <!-- ... -->
    </div>
</div> 
```

这不起作用，因为中间的 div 最终是全宽的，尽管是内联块。可以在这里找到一个例子：http: [//jsfiddle.net/cwmRw/](http://jsfiddle.net/cwmRw/)

关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:23:07.423

如果您被允许使用 jQuery，这是一个可行的解决方案：http:
[//jsfiddle.net/cwmRw/6/](http://jsfiddle.net/cwmRw/6/)

它会动态计算宽度`img-sub-container`并在窗口大小发生变化时重新计算。

对于纯 CSS 解决方案，您需要知道`img-sub-container`（像素、百分比...）的宽度。

与高度不同，宽度在块级元素中尽可能向左和向右扩展。

如果你制作`img-sub-container`了一个内联元素，比如说 by `display:inline-block;`，你仍然需要**`width`设置才能`margin: 0px auto;`工作**和居中。

由于您不知道需要多少宽度，因此您必须动态计算和设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:39:09.807

您可以使用 CSS3 媒体查询通过根据不同的分辨率边界值设置 div 的宽度来做到这一点。我在这里复制了 css，以防 jsfiddle 不会永远保留它。

```
.img-block{
    max-width: 160px;
    max-height: 160px;
}
.div-block{
    display: inline-block;
}
.img-container{
    margin-left: auto;
    margin-right: auto;
}

@media all and (min-width:984px){
    .img-container{
        width: 985px;
    }
}

@media all and (min-width:820px) and (max-width: 984px){
    .img-container{
        width: 820px;
    }
}
@media all and (min-width:656px) and (max-width:820px){
    .img-container{
        width: 656px;
    }
}
@media all and (min-width:492px) and (max-width:656px){
    .img-container{
        width: 492px;
    }
}
@media all and (min-width:328px) and (max-width:492px){
    .img-container{
        width: 328px;
    }
}
@media all and (min-width:164px) and (max-width:328px){
    .img-container{
        width: 164px;
    }
} 
```

这是原始代码的修改版本[http://jsfiddle.net/hxHuV/9/](http://jsfiddle.net/hxHuV/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:05:42.387

如果您知道图像的宽度和每行的图像数量，那么您可以设置容器的宽度并将其水平居中，[同时](http://jsfiddle.net/cwmRw/1/)**`margin: 0 auto`**浮动图像容器以避免每个之间的空白（4px 间隙）图像由于. 您不再需要容器，但如果删除它，则需要在容器元素上添加 a，因为它仅包含浮点数并且流程中没有其他元素：[更新的小提琴](http://jsfiddle.net/cwmRw/3/) 或没有浮点数，您需要删除空格，例如通过编写（最好在 HTML 代码中删除空格，然后尝试在 CSS 中否定它的效果，它更加健壮）`inline-block``.sub``clearfix`
[`</div><div>`](http://jsfiddle.net/cwmRw/5/)

`.sub`或者您可以使用文本居中对齐容器并在另一个[小提琴](http://jsfiddle.net/cwmRw/2/)中设置类似的宽度

# iphone - MapView 标注上的详细信息披露按钮不会响应点击

> ID：15914027
> 
> 赞同：0
> 
> 时间：2013-04-09T22:57:31.773
> 
> 标签：iphone, objective-c, mapkit

当我点击地图标注中的披露按钮时，我希望加载另一个视图。

我在 AnnotationView 实现文件的 initWithAnnotation 方法中使用以下内容将按钮添加到标注（我只显示相关代码）：

```
- (id)initWithAnnotation:(id<MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier

{

 self.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

} 
```

我还在 MapViewController 实现文件中添加了以下 controllTapped 方法，用于检测何时点击了披露按钮：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control

{

    DetailViewController *dvc = [[DetailViewController alloc] init];
    [self.navigationController pushViewController:dvc animated:YES];

} 
```

我还为 UI 创建了一个带有 .XIB 的新 detailDisclosure 类。这是当用户点击公开按钮时我想要加载的视图。

那么，为什么当用户点击公开按钮时什么都没有发生呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:23:51.590

```
UIButton *btnGo = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[btnGo addTarget:self action:@selector(goToLocation:) forControlEvents:UIControlEventTouchUpInside];
pinView.rightCalloutAccessoryView=btnGo;

-(void) goToLocation:(UIButton *) sender
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:01:34.890

`MKMapView`为此，您必须使用委托方法，如下所示，以识别您的`CustomAnnotationClass`：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    id <MKAnnotation> annotation = [view annotation];
    if ([annotation isKindOfClass:[CustomAnnotationClass class]])
    {
        DetailViewController *dvc = [[DetailViewController alloc] init];
        [self.navigationController pushViewController:dvc animated:YES];
    }
} 
```

让我知道，如果你让它工作。

# c - Netbeans 链接器问题。开放式GL/GLFW

> ID：15914030
> 
> 赞同：1
> 
> 时间：2013-04-09T22:57:50.493
> 
> 标签：c, opengl, glfw

我正在尝试使用 GLFW 在 netbeans 中设置 openGL，但我无法让库正确链接。我有所有它们应该在的图书馆，我已经尝试改变所有链接的顺序，我只是不知道该怎么做。

**这是代码：**

```
// This is a small test application for GLFW.
// The program opens a window (640x480), and renders a spinning colored
// triangle (it is controlled with both the GLFW timer and the mouse).

#include <stdio.h>
#include <stdlib.h>
//#define GLFW_DLL
#include <GL/glfw.h>

int main(void) {
    int width, height, x;
    double t;

    // Initialise GLFW
    if (!glfwInit()) {
        fprintf(stderr, "Failed to initialize GLFW\n");
        exit(EXIT_FAILURE);
    }

    // Open a window and create its OpenGL context
    if (!glfwOpenWindow(640, 480, 0, 0, 0, 0, 0, 0, GLFW_WINDOW)) {
        fprintf(stderr, "Failed to open GLFW window\n");

        glfwTerminate();
        exit(EXIT_FAILURE);
    }

    glfwSetWindowTitle("Spinning Triangle");

    // Ensure we can capture the escape key being pressed below
    glfwEnable(GLFW_STICKY_KEYS);

    // Enable vertical sync (on cards that support it)
    glfwSwapInterval(1);

    do {
        t = glfwGetTime();
        glfwGetMousePos(&x, NULL);

        // Get window size (may be different than the requested size)
        glfwGetWindowSize(&width, &height);

        // Special case: avoid division by zero below
        height = height > 0 ? height : 1;

        glViewport(0, 0, width, height);

        // Clear color buffer to black
        glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
        glClear(GL_COLOR_BUFFER_BIT);

        // Select and setup the projection matrix
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(65.0f, (GLfloat) width / (GLfloat) height, 1.0f, 100.0f);

        // Select and setup the modelview matrix
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        gluLookAt(0.0f, 1.0f, 0.0f, // Eye-position
                0.0f, 20.0f, 0.0f, // View-point
                0.0f, 0.0f, 1.0f); // Up-vector

        // Draw a rotating colorful triangle
        glTranslatef(0.0f, 14.0f, 0.0f);
        glRotatef(0.3f * (GLfloat) x + (GLfloat) t * 100.0f, 0.0f, 0.0f, 1.0f);
        glBegin(GL_TRIANGLES);
        glColor3f(1.0f, 0.0f, 0.0f);
        glVertex3f(-5.0f, 0.0f, -4.0f);
        glColor3f(0.0f, 1.0f, 0.0f);
        glVertex3f(5.0f, 0.0f, -4.0f);
        glColor3f(0.0f, 0.0f, 1.0f);
        glVertex3f(0.0f, 0.0f, 6.0f);
        glEnd();

        // Swap buffers
        glfwSwapBuffers();

    }// Check if the ESC key was pressed or the window was closed
    while (glfwGetKey(GLFW_KEY_ESC) != GLFW_PRESS &&
            glfwGetWindowParam(GLFW_OPENED));

    // Close OpenGL window and terminate GLFW
    glfwTerminate();

    exit(EXIT_SUCCESS);
} 
```

**这是输出/错误：**

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/c/Users/cseat/Documents/NetBeansProjects/cs335'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/MinGW-Windows/cs335.exe
make[2]: Entering directory `/c/Users/cseat/Documents/NetBeansProjects/cs335'
mkdir -p build/Debug/MinGW-Windows
rm -f build/Debug/MinGW-Windows/triangle.o.d
gcc.exe    -c -g -I/C/MinGW/include/GL -I/C/MinGW/include -I/C/GLFW/glfw- 
2.7.8/include/GL -MMD -MP -MF build/Debug/MinGW-Windows/triangle.o.d -o     
build/Debug/MinGW-Windows/triangle.o triangle.c

mkdir -p dist/Debug/MinGW-Windows 

gcc.exe -o dist/Debug/MinGW-Windows/cs335 build/Debug/MinGW-Windows/triangle.o -     
L/C/MinGW/lib -L/C/GLFW/glfw-2.7.8/lib -lmingw32 -lkernel32 -luser32 -lgdi32 -lglu32 -   
lopengl32 -lglfw -lglfwdll 

make[2]: Leaving directory `/c/Users/cseat/Documents/NetBeansProjects/cs335'
build/Debug/MinGW-Windows/triangle.o: In function `main':

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:17: undefined reference to   
`glfwInit'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:23: undefined reference to 
`glfwOpenWindow'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:26: undefined reference to 
`glfwTerminate'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:30: undefined reference to 
`glfwSetWindowTitle'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:33: undefined reference to 
`glfwEnable'

make[1]: Leaving directory `/c/Users/cseat/Documents/NetBeansProjects/cs335'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:36: undefined reference to 
`glfwSwapInterval'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:39: undefined reference to 
`glfwGetTime'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:40: undefined reference to 
`glfwGetMousePos'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:43: undefined reference to 
`glfwGetWindowSize'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:79: undefined reference to 
`glfwSwapBuffers'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:81: undefined reference to 
`glfwGetKey'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:81: undefined reference to 
`glfwGetWindowParam'

C:/Users/cseat/Documents/NetBeansProjects/cs335/triangle.c:86: undefined reference to 
`glfwTerminate'

collect2: ld returned 1 exit status
make[2]: * [dist/Debug/MinGW-Windows/cs335.exe] Error 1
make[1]: * [.build-conf] Error 2
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 866ms) 
```

**以下是所有设置和链接的屏幕截图：**

[![图像](https://i.imgur.com/gt42ZLE.png)](https://i.imgur.com/gt42ZLE.png)

# java - 在 Linux 上将 MSword 转换为 XML/HTML

> ID：15914031
> 
> 赞同：2
> 
> 时间：2013-04-09T22:57:52.040
> 
> 标签：java, python, linux, perl, apache-tika

我需要将 MSWord 文件转换为 XML 或 HTML，同时保留文件的结构（主要是表格）。我碰巧找到了 tika，它在从 MSword 文件（以及任何文件）中提取文本方面非常强大，如下所示：

```
curl www.vit.org/downloads/doc/tariff.doc \ | java -jar tika-app-1.3.jar --text 
```

我可以从选项中选择将输出保存到 html/XML 中，如下所示：

```
curl www.vit.org/downloads/doc/tariff.doc \ | java -jar tika-app-1.3.jar --html 
```

但输出基本上就像是用 HTML 编写的纯文本，因此无法获取表格结构和其他文档元素。

在 Perl 或 Python 中是否有任何 Tika 实现，可以在维护其元素结构的同时将文档转换为 XML/HTML？或者linux上有没有其他工具可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:29:36.537

安装 OpenOffice SDK，它为各种文档（包括转换）提供了强大的 API。

[http://www.oooforum.org/forum/viewtopic.phtml?t=7242](http://www.oooforum.org/forum/viewtopic.phtml?t=7242)

# iphone - 如何在隐藏之前检查广告横幅是否已加载？

> ID：15914032
> 
> 赞同：0
> 
> 时间：2013-04-09T22:58:02.323
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我在我的一个应用程序中使用了 Revmob 横幅，当用户退出该屏幕时，横幅被设置为隐藏。

这很好用，但是，如果横幅不可见，也许当时没有加载，或者他们快速切换了屏幕，那么应用程序将崩溃并显示

```
message sent to deallocated instance 
```

错误。

这当然是有道理的，因为没有什么可以释放/隐藏，所以我的问题是，我如何检查横幅是否已加载，以便它只隐藏它，如果它是可见的；

退出屏幕时的代码是；

```
-(void)onExit {

    [super onExit];

    [[RevMobAds session] hideBanner];

} 
```

调用横幅的代码是

```
[super onEnter];

        [[RevMobAds session] showBanner]; 
```

我想知道是否有类似的东西可以用来检查？

```
if ([RevMobAds session].bannerisVisible == YES)
{
    [[RevMobAds session] hideBanner];
}else{

} 
```

# solr - org.apache.solr.common.SolrException：错误：[doc=SOMEURL] 未知字段''

> ID：15914033
> 
> 赞同：0
> 
> 时间：2013-04-09T22:58:08.887
> 
> 标签：solr, nutch

嗨，我遇到了这个异常，我已经用尽了我能想到的所有可能的设置。

```
org.apache.solr.common.SolrException: ERROR: [doc=SOMEURL] unknown field '' 
```

问题是**字段 ''** - 引号是空的，所以我不知道是什么导致了问题。

有没有人有同样的问题？我会帮我很多。

一些信息：

*   Nutch 2.1 版
*   Solr 版本 1.5
*   Hbase 作为数据存储 - 用于 Solr 运行的 Tomcat6

在代码中只有这个：

```
nutchDocument.add("my_key",stringValue); 
```

我检查了 Solr 的 schema.xml、Nutch 的 schema.xml 以及 Nutch solr-mapping.xml（我确定在正确的目录中），每个都是以正确的方式编写的“my_key”。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:31:01.727

好吧，我必须是盲人。我发现问题出在哪里。对于会遇到类似问题的人来说，原因如下：

在我的**solrindex-mapping.xml**我有这个：

```
<field dest="video_og_title" source="video_og_title" />
<field dest="video_og_type" source="video_og_type"/>
<field dest="video_og_image" source="video_og_image" />
<field name="video_og_url" source="video_og_url"/>
<field name="video_og_description" source="video_og_description" />
<field name="video_og_video" source="video_og_video" /> 
```

我没有看到该字段具有属性`name`，`dest`因此 Solr 没有表示该`dest`属性，它用于映射，如空字段“”。

# javascript - 显示隐藏 JS div css

> ID：15914034
> 
> 赞同：-2
> 
> 时间：2013-04-09T22:58:10.743
> 
> 标签：javascript, css

我熟悉 php，但是 js 的认真学习者，我尝试了 3 种方法来实现我的目标，我看到下面使用的方法似乎最容易实现，所以我可以实现我的目标，但由于某种原因它不起作用. 我只包含了不工作的特定函数的必要位，这一切都在基于数据库中的条目的 while 循环内工作，用 {$page_trackid} 分隔以区分每个函数并链接到它。

我知道可以使用“this”风格的函数，但正如我所说的那样，我对 js 很陌生，我只是想在我扩展到更复杂之前实现必要的功能。

我在这里做错了什么吗？

干杯

```
<head>

    <style>
        .hidden {display:none;}
        .visible {display:block;}

        .subtext_img {
            width: 100px; height: 100px; padding-top: 10px; padding-right: 10px; float: right;
        }

        .subtext {
            padding-left: 10px;
        }
        .arrow_box { padding-left: 100px; position: absolute; z-index: 100; background: #88b7d5; border: 4px solid #c2e1f5; width: 580px; height: 120px;} .arrow_box:after, .arrow_box:before { left: 100%; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; pointer-events: none; } .arrow_box:after { border-color: rgba(136, 183, 213, 0); border-left-color: #88b7d5; border-width: 10px; top: 30%; margin-top: -10px; } .arrow_box:before { border-color: rgba(194, 225, 245, 0); border-left-color: #c2e1f5; border-width: 16px; top: 30%; margin-top: -16px; }

    </style>
</head>
<body>

    <?
    $data = mysql_query("SELECT * FROM user_Uploaded_Tracks WHERE username = '$user' ORDER BY datetime DESC")
            or die(mysql_error());

    $page_trackid = '1'; //reset page track id
    // get a whole bunch of data, track info & user info based on some cross referencing via id
    while ($info = mysql_fetch_array($data)) {

        $db_trackid = $info['id'];
        $username = $info['username'];

        //data 2 track info based on db track id
        $data2 = mysql_query("SELECT * FROM user_Uploaded_Tracks WHERE id = '$db_trackid' LIMIT 1")
                or die(mysql_error());

        $info2 = mysql_fetch_array($data2);

        //data 3 is user profile data based on db track id
        $data3 = mysql_query("SELECT * FROM users WHERE username = '$username' LIMIT 1")
                or die(mysql_error());

        $info3 = mysql_fetch_array($data3);

        //data 4 profile image based on user id, track uploader*
        $data4 = mysql_query("SELECT * FROM user_profile_pic WHERE username = '$username' ORDER BY datetime DESC LIMIT 1")
                or die(mysql_error());

        $info4 = mysql_fetch_array($data4);

        echo "
        <script>
            function showbox(userinfo_{$page_trackid}){
                document.getElementById(userinfo_{$page_trackid}).style.visibility='visible';
            }

            function hidestuff(userinfo_{$page_trackid}){
                document.getElementById(userinfo_{$page_trackid}).style.visibility='hidden';
            }
        </script>
        <div id='userinfo_{$page_trackid}'  class='arrow_box' style='display: none;'>  <img src='" . $info4['Image'] . "' class='subtext_img'>
            <h2 class='subtext'><a href='http://XXXX/XXX/" . $info2['username'] . "'>" . $info2['username'] . "</a></h2>
            <p class='subtext'>" . $info3['user_title'] . "</p>
            <p class='subtext'><a href='" . $info3['website_link'] . "' target='_blank'>" . $info3['website_link'] . "</a>

            </p>

        </div>";

        echo "
            <div style='position: absolute; z-index: 1; width: 20px; height: 20px; padding-top: 50px; padding-left: 699px;'>
                <a href='javascript:showbox_{$page_trackid}()'><img style='height: 20px;' alt='Track stats' src='http://XXXXXX/play1/skin/user-profile2.png' style=''></a>
            </div>";
    }
    ?>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:10:35.097

[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)：避免直接在 javascript 中操作元素的样式。样式属于 css。

这是我要做的：

CSS

```
.hidden {
    display: none;
} 
```

Javascript：

```
// show an element
document.getElementById("my-id").classList.remove("hidden");

// hide an element
document.getElementById("my-id").classList.add("hidden"); 
```

旧浏览器不支持 classList，因此请确保在[https://developer.mozilla.org/en-US/docs/DOM/element.classList中包含 polyfill](https://developer.mozilla.org/en-US/docs/DOM/element.classList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:17:20.833

您的问题似乎是在 HTML 中您将*display*属性设置为*none*，但在脚本中您正在设置 visibility 属性。它们是不同的东西。在两个地方设置一个或另一个。

# c++ - LNK2001：无法解析的外部符号安装

> ID：15914035
> 
> 赞同：2
> 
> 时间：2013-04-09T22:58:17.700
> 
> 标签：c++, visual-studio-2010, linker, linker-errors

我对 C++ 不是很精通，并且遇到了一个我不太确定如何解决的链接问题。我有一个在 x64 模式下构建良好的解决方案，但在 x86 模式下会出现链接错误。

我已经确认该项目配置为构建为 Win32，并且平台工具集设置为 v90。

错误前链接器日志的最后几行如下：

```
...
1>        Found "long __stdcall AfxDllCanUnloadNow(void)" (?AfxDllCanUnloadNow@@YGJXZ)
1>          Referenced in mfcs90.lib(oleexp.obj)
1>          Loaded mfc90.lib(mfc90.dll)
1>        Found "public: __thiscall CDynLinkLibrary::CDynLinkLibrary(struct HINSTANCE__ *,struct HINSTANCE__ *)" (??0CDynLinkLibrary@@QAE@PAUHINSTANCE__@@0@Z)
1>          Referenced in mfcs90.lib(dllmodulx.obj)
1>          Loaded mfc90.lib(mfc90.dll)
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\atlmfc\lib\mfcs90.lib:
1>        Found __pRawDllMain
1>          Referenced in msvcrt.lib(crtdll.obj)
1>          Loaded mfcs90.lib(rawdllmainproxy.obj)
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\lib\msvcrt.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\kernel32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\user32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\gdi32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\msimg32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\comdlg32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\winspool.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\advapi32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\shell32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\comctl32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\shlwapi.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\uuid.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\lib\msvcprt.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\lib\OLDNAMES.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\mapi32.lib:
1>      Searching C:\Program Files\Microsoft SDKs\Windows\v7.0\lib\Ole32.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\atlmfc\lib\atls.lib:
1>  
1>  Finished searching libraries
1>  
1>  Generating .exp file
1>LINK : error LNK2001: unresolved external symbol Install
1>Release\app.lib : fatal error LNK1120: 1 unresolved externals
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

有没有人知道我做错了什么。我发现了许多类似的问题，但解决方案似乎并不适用。对不起这么简单的问题。

# sql - 子查询返回超过 1 个值 - where 子句

> ID：15914036
> 
> 赞同：1
> 
> 时间：2013-04-09T22:58:19.327
> 
> 标签：sql, sql-update, subquery

我有一个查询要停用一些已激活的帐户。基本上，它查看 year_end_close 表，并且那里存在的任何帐户都在主表中更新为非活动状态（A 或 B）。

```
update master
 set account_type = case account_type
  when 'C' then 'A'
  when 'D' then 'B'
  else account_type
 end
where account_num = 
      (select account_num 
       from year_end_close 
       where account_type in('C', 'D'))` 
```

我从 where 子句中得到“子查询返回超过 1 个值”——我做错了什么？当我注释掉 where 子句时，我不再得到那个错误，所以它在那个子句中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:00:30.243

改变你`=`的`IN`

```
UPDATE master
SET account_type =
   CASE account_type
      WHEN 'C' then 'A'
      WHEN 'D' then 'B'
      ELSE account_type
   END
WHERE account_num IN
(
   SELECT account_num
   FROM year_end_close
   WHERE account_type IN('C', 'D')
) 
```

通过使用，`=`您是说您要将左侧的`=`1 项与右侧的 1 项进行比较。带有of或的不止一个`account_num`。这使您的子查询返回超过 1 个结果。查询无法确定子查询中的哪个值应与左侧的值匹配。使用允许查询检查子查询中任何有效的左值。`year_end_close``account_type``C``D``IN``account_num`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:00:22.397

尝试 IN 而不是检查是否相等：

```
update master
 set account_type = case account_type
  when 'C' then 'A'
  when 'D' then 'B'
  else account_type
 end
where account_num IN (select account_num from year_end_close where account_type in('C', 'D'))` 
```

...尽管这取决于您的数据/架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:06:37.277

@matt 和 @Adam 的其他答案是正确的 - 您需要使用`In`而不是`=`坚持使用子查询。但我认为这与以下内容相同：

```
UPDATE m Set
   account_type = 
    Case account_type
       WHEN 'C' then 'A'
       WHEN 'D' then 'B'
       ELSE account_type END
From master m Join year_end_close c
    On c.account_num  = m.account_num 
       And c.account_type in ('C', 'D') 
```

编辑：此语法适用于 MS Sql Server，但可能不适用于所有其他供应商的数据库产品。您使用的是哪个数据库？

# iis-7 - AppFabric 1.1 客户端应该连接多少个 DataCacheServerEndpoint？

> ID：15914039
> 
> 赞同：1
> 
> 时间：2013-04-09T22:58:56.657
> 
> 标签：iis-7, appfabric-cache

AppFabric 1.1 客户端文档讨论了将 DataCachServer 终结点列表分配给 DataCacheFactoryConfiguration。大多数示例显示了由一个或两个不同的缓存服务器组成的列表。如果集群由*n 个*服务器组成，客户端应该注册每个服务器吗？服务器注册的顺序是否重要？例如，如果我的 Web 层中有 50 台服务器，缓存层中有 5 台服务器，那么 50 台 Web 服务器是否都注册了所有 5 台缓存服务器？这是示例代码：

```
// Declare array for cache host(s).
DataCacheServerEndpoint[] servers = new DataCacheServerEndpoint[5];
servers[0] = new DataCacheServerEndpoint("Cache01", 22233);
servers[1] = new DataCacheServerEndpoint("Cache02", 22233);
servers[2] = new DataCacheServerEndpoint("Cache03", 22233);
servers[3] = new DataCacheServerEndpoint("Cache04", 22233);
servers[4] = new DataCacheServerEndpoint("Cache05", 22233);

// Setup the DataCacheFactory configuration.
DataCacheFactoryConfiguration factoryConfig = new DataCacheFactoryConfiguration();
factoryConfig.Servers = servers;

// Create a configured DataCacheFactory object.
DataCacheFactory mycacheFactory = new DataCacheFactory(factoryConfig);

// Get a cache client for the cache named "default".
DataCache myDefaultCache = mycacheFactory.GetCache("default"); 
```

每个 Web 服务器是否可以相同地注册，并且是否会在缓存层之间平衡负载？如果已注册的服务器不可用，是按顺序尝试下一个服务器，还是随机尝试？支持文档的链接会有所帮助。

与负载平衡相关，[Jason Roth](http://social.msdn.microsoft.com/Forums/en-US/velocity/thread/ac04a2af-a850-4fea-836a-f3377f2bfa55)写了以下 [还有其他可用的文档]？

> App Fabric 客户端是智能客户端，它可以直接联系拥有您数据的服务器。应用程序不必担心负载平衡。这是使用路由客户端完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:55:06.533

基于一些测试，并让 Jason Roth 的评论深入人心，我*认为*DataCacheServerEndPoint 被“智能客户端”用于在 DataCacheFactory 上调用 GetCache 方法时检索缓存集群成员列表。DataCache 对象是智能的——如果在 DataCacheServerEndpoint 实例化中使用的服务器脱机或不可用，智能客户端仍然可以访问其他集群成员。因此，列出多个 DataCacheServerEndpoint 的目的是在调用 GetCache 方法时提供冗余。

建议是 DataCache 对象应该遵循单例模式，而不是在每次请求缓存数据时实例化。这就是为什么不需要为各个 DataCacheServerEndpoints 进行负载平衡或提供 VIP 的原因。

根据需要实例化尽可能多的 DataCacheServerEndPoint，以确保至少有一个始终处于运行状态——无需添加缓存集群的每个成员，除非这是确保至少一个处于运行状态的唯一方法。

当涉及到管理缓存集群中的盒子时（例如，应用每月补丁），考虑通过一次管理一个盒子来最小化缓存抖动和重新平衡，而不是尝试以“波”的形式管理一组盒子。

# r - as.environment(x) 中的错误：R 中“as.environment”的对象无效

> ID：15914042
> 
> 赞同：3
> 
> 时间：2013-04-09T22:59:15.987
> 
> 标签：r, ggplot2

我是 R 的新用户，我尝试了以下代码。它给出了一个错误。任何人都可以帮忙，拜托。代码是：

```
library(ggplot2)
data(diamonds)
qplot(price, data=diamonds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T08:05:44.950

我在 x64 Wintel 计算机上运行 R (2.15.3)，遇到了同样的问题。

我刚刚搜索了一下，找到了以下解决方案：

1st - 从一个新的 R 会话（不使用 RStudio，以防万一），卸载包“ggplot2”、“scales”、“plyr”、“reshape2”、“gtable”

```
remove.packages(c("ggplot2","scales","plyr","reshape2","gtable")) 
```

第二 - 退出 R 并转到您的库目录。我发现 remove.packages 没有完全删除 plyr 库，将 plyr ddl 保留在系统中。然后根据需要手动删除库文件夹。

3rd - 再次启动 R 并再次安装库。

```
install.packages(c("ggplot2", "scales", "plyr", "reshape2", "gtable")) 
```

4th - 更新软件包以获得最新版本。

```
update.packages(ask=FALSE, checkBuilt=TRUE) 
```

5th - 我运行了一个非常简单的例子来检查 ggplot2 是否正确安装：

```
library(ggplot2)
library(gridExtra)
ggplot(mtc, aes(x = factor(gear))) + geom_bar(stat = "bin") 
```

应该呈现一个非常简单的条形图。

希望这对你有用！

D.

# cqrs - 为什么使用 GUID 作为 EventStore 数据库中 EventSources 和 Events 表中的 Id 字段的类型？

> ID：15914043
> 
> 赞同：2
> 
> 时间：2013-04-09T22:59:17.267
> 
> 标签：cqrs, event-sourcing

为什么将 uniqueidentifier（相当于 .NET 中的 GUID）用作 EventSources 和 Events 表中 Id 字段的类型？

使用充当身份的整数类型（如 SQL Server 中的 bigint）会不会更快，以便数据库可以在执行插入时分配 Id？

在事件溯源和 CQRS 方面，我是一个完全的新手，所以如果有人问过这个问题并回答了这个问题，并且我的搜索还不够正确，无法找到答案，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:51:09.097

*注意：答案 2 和 4 假设您遵循领域驱动设计的一些基本原则。*

1.  **ID在不同的聚合类型甚至不同的有界上下文中**应该是唯一的****

***   每个聚合必须**始终处于有效状态**。拥有唯一 ID 是其中的一部分。这意味着在存储初始事件并且数据库生成并返回相应的 ID 之前，您无法对聚合执行任何操作。

    *   发送初始命令的客户端通常需要某种引用来关联创建的聚合。**客户如何知道分配了哪个 ID**？请记住，命令是无效的，它们不会返回 ack/nack 之外的任何内容，甚至不会返回 ID。

    *   领域关注（实体的识别）将严重**依赖技术实现细节**（这实际上应该是#1）**

# java - 写入输出文件

> ID：15914047
> 
> 赞同：-2
> 
> 时间：2013-04-09T22:59:39.610
> 
> 标签：java

我被困在不写入输出文件的这部分

第一堂课是联系我必须修改这不是我的课是作者课我只需要使用它

```
 //********************************************************************  
// Contact.java Author: Lewis/Loftus  
//  
// Represents a phone contact.  
//********************************************************************  
public class Contact implements Comparable  
{  
 private String firstName, lastName, phone;  
  //-----------------------------------------------------------------  
  // Constructor: Sets up this contact with the specified data.  
  //-----------------------------------------------------------------  
  public Contact (String first, String last, String telephone)  
  {  
    firstName = first;  
    lastName = last;  
    phone = telephone;  
  }  
  //-----------------------------------------------------------------  
  // Returns a description of this contact as a string.  
  //-----------------------------------------------------------------  
  public String toString ()  
  {  
    return lastName + ", " + firstName + "\t" + phone;  
  }  
  //-----------------------------------------------------------------  
  // Returns true if the first and last names of this contact match  
  // those of the parameter.  
  //-----------------------------------------------------------------  
  public boolean equals (Object other)  
  {  
   return (lastName.equals(((Contact)other).getLastName()) &&  
   firstName.equals(((Contact)other).getFirstName()));  
  }  
  //-----------------------------------------------------------------  
  // Uses both last and first names to determine ordering.  
  //-----------------------------------------------------------------  
  public int compareTo (Object other)  
  {  
   int result;  
   String otherFirst = ((Contact)other).getFirstName();  
   String otherLast = ((Contact)other).getLastName();  

   if (lastName.equals(otherLast))  

      result = firstName.compareTo(otherFirst);  
   else  

      result = lastName.compareTo(otherLast);  

    return result;  
  }  
  //-----------------------------------------------------------------  
  // First name accessor.  
  //-----------------------------------------------------------------  
  public String getFirstName ()  
  {  
    return firstName;  
  }  
  //-----------------------------------------------------------------  
  // Last name accessor.  
  //-----------------------------------------------------------------  
  public String getLastName ()  
  {  
    return lastName;  
  }  
} 
```

这个类的排序很好。它进行排序没有问题

```
 public class Sorting {  

    public static void bubbleSortRecursive(Comparable[] data, int n)   
    {  

        if (n < 2)   
        {  
            return;  
        }  
        else  
        {  

            int lastIndex = n - 1;  

            for (int i = 0; i < lastIndex; i++)   
            {  
                if (data[i].compareTo(data[i + 1]) > 0)   
                { //swap check  

                    Comparable tmp = data[i];  
                    data[i] = data[i + 1];  
                    data[i + 1] = tmp;  
                }  
            }  

            bubbleSortRecursive(data, lastIndex);  
        }  
    }  

    public static void selectionSortRecursive(Comparable[] data, int n)   
    {  

        if (n < 2)   
        {  
            return;  
        }   
        else   
        {  

            int lastIndex = n - 1;  
            int largestIndex = lastIndex;  

            for (int i = 0; i < lastIndex; i++)   
            {  
                if (data[i].compareTo(data[largestIndex]) > 0)   
                {  
                    largestIndex = i;  
                }  
            }  

            if (largestIndex != lastIndex)   
            { //swap check  
                Comparable tmp = data[lastIndex];  
                data[lastIndex] = data[largestIndex];  
                data[largestIndex] = tmp;  
            }  

            selectionSortRecursive(data, n - 1);  
        }  
    }  
} 
```

这是我需要帮助的部分。它没有输出到他 p4output.txt，我不知道问题是什么。

```
 import java.io.BufferedWriter;  
import java.io.File;  
import java.io.FileWriter;  
import java.io.IOException;  

public class TestProject4 {  

    public static void main(String[] args)   
    {  

        doBubbleSortRecursive();  

        System.out.println();  
        System.out.println();  

        doSelectionSortRecursive();  

    }  
    private static void doBubbleSortRecursive()  
    {  
        Contact[] contacts = createContacts();  

        System.out.println("Before bubbleSortRecursive(): ");  
        for (int i=0; i<contacts.length; i++)  
        System.out.println(contacts[i].toString());  

        Sorting.bubbleSortRecursive(contacts, contacts.length);  

        System.out.println("\nAfter bubbleSortRecursive(): ");  
        for (int i=0; i<contacts.length; i++)  
        System.out.println(contacts[i].toString());  
    }  

    private static void doSelectionSortRecursive()   
    {  
        Contact[] contacts = createContacts();  

        System.out.println("Before selectionSortRecursive(): ");  
        for (int i=0; i<contacts.length; i++)  
        System.out.println(contacts[i].toString());  

        Sorting.selectionSortRecursive(contacts, contacts.length);  

        System.out.println("\nAfter selectionSortRecursive(): ");  
        for (int i=0; i<contacts.length; i++)  
        System.out.println(contacts[i].toString());  
    }  

    private static void printContacts(Contact[] contacts)  
    {  

        try   
        {  

        // this part I need help with it is not outputing in the text file   
                    File file = new File("p4output.txt");  
            FileWriter fw = new FileWriter(file.getAbsoluteFile());  
            BufferedWriter bw = new BufferedWriter(fw);  

            for (Contact contact : contacts)  
             {  
                bw.write(contact.toString());       
             }              
              bw.close();  
        }  

        catch (IOException e)   
        {  
           e.printStackTrace();  
        }  

       System.out.println("\t" + contacts);  
    }  
    public static Contact[] createContacts()   
    {  
        return new Contact[]   
        {  
            new Contact("John"  , "Smith" , "610-555-7384"),  
            new Contact("Sarah" , "Barnes"   , "215-555-3827"),  
            new Contact("Mark"  , "Riley", "333-333-3333"),  
            new Contact("Laura"   , "Getz"  ,"663-555-3984"),  
            new Contact("Larry"  , "Smith"  , "464-555-3489"),  
            new Contact("Frank"  , "Phelps" , "322-555-2284"),  
            new Contact("Mario"    , "Guzman" , "804-555-9066"),  
            new Contact("Marsha"    , "Grant" , "243-555-2837"),  
        };  
     }  
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:08:58.973

根据 Eclipse，你永远不会调用/使用`printContacts(Contact[] contacts);`方法

![在此处输入图像描述](https://i.stack.imgur.com/QQ13b.png)

您`printContacts(Contact[] contacts);`包含写入文件的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:18:23.343

您似乎没有在程序中调用函数 printContacts() 。在您创建和排序联系人后尝试调用它。

它可能看起来像这样：

```
public static void main(String[] args)   
{  

    doBubbleSortRecursive();  

    System.out.println();  
    System.out.println();  

    doSelectionSortRecursive();  
    printContacts(contactArray);//inserted code
} 
```

此外，当您调用排序方法 doSelectionSortRecursive() 时，您不会返回联系人列表。为其创建一个返回语句，然后将联系人数组放入您的 printContacts 函数中。

这是一个例子：

```
public static void main(String[] args)   
{  

    doBubbleSortRecursive();  

    System.out.println();  
    System.out.println();  

    Contact[] contacts = doSelectionSortRecursive();  
    printContacts(contacts);
}  

public static Contact[] doSelectionSortRecursive(){
    Contact[] contacts = createContacts();
    //your sorting code
    return contacts;
} 
```

使用此方法，您可以在排序后从该方法中获取联系人数组。

# objective-c - 核心数据请求问题

> ID：15914049
> 
> 赞同：1
> 
> 时间：2013-04-09T22:59:46.943
> 
> 标签：objective-c, core-data, request, data-modeling

我有一个数据模型，但执行请求时遇到问题。

这是我的模型：

![在此处输入图像描述](https://i.stack.imgur.com/80qgx.png)

我想获得与一个特定事件相关的所有费用。

你认为我的模型是错误的吗？

有关更多解释，这是我在数据库中设置数据的方式：我有**2 种类型**的***事件***：*“事件”*和*“派对”*

一位***客人***与**1 或 n 个**费用相关联，而一项费用与**1 或 n 个**客人相关联。这就是为什么我创建了我的实体“交易”。

***交易***有两种类型：“已*支付*”和“*受益人*”，因为***客人***可以支付费用，也可以成为受益人。

以下是我与这些实体合作的方式：对于**一次***活动中的***一项** *费用*，一位*客人*为所有其他*客人*支付这笔*费用*，因此我创建了一个与**该***客人相关的**交易*，**该***费用*类型为“已*支付*”，并且 a**有许多交易为**我*的活动的客人*与**相同的***费用*相关联，但类型为“*受益人*”。

 *********我不知道我的解释很清楚......

***编辑***

由于人们并不真正理解我的问题，我将解释我的应用程序是如何工作的。

我申请的主要目的是为*聚会*（生日、寿司聚会等）或*活动*（假期、周末等）重新平衡人们之间的**费用。**

 **我的应用程序已经在 Apple 商店：**iVent**。但这不是很好，这就是为什么我想使用核心数据更新它:)。

那么，它是如何工作的呢？

用户创建事件并选择事件**类型**

***对于聚会：***

我得到了 iPhone 联系人并将它们显示在 tableview 上，**用户检查哪个联系人被邀请参加聚会。**

然后**对于每个事件**，我都有一个**杂货清单**。我**从 plist**中获取该购物清单，用户可以将其修改为“默认购物清单”。但是，对于每个事件，用户可以删除所有的杂货，*它不会影响 plist*。

我的杂货按**类别**（饮料、膳食、家具、酒精等）分类。用户选择他想要的**杂货店**，例如*2 个六包、3 瓶红酒等。* 然后他**将杂货店链接到客人**：Paul 将购买 1 个六包和 1 瓶红酒，Amy 1 个六包等.

然后我允许用户***给出每个指定杂货的价格***并设置***该杂货的受益人。*** 例如 Anna 不喝酒，因此当用户将重新平衡用户之间的所有价格时，她不想为任何酒付费。

***对于一个事件，过程是不同的：***

用户**仅检查受邀客人**的活动创建。然后在活动期间*用户会将所做的所有费用存入数据库*。

例如，Paul 和 Anna**为每个人支付汽油**，因此我们将 Paul 和 Anna 设置**为费用购买者，**并将 Paul、Anna、Maurice 和 Mike***作为受益人***，因为他们都在车上旅行。

**我们可以为买家**设置不同的价格，例如汽油成本 50 美元，然后安娜支付 20 美元，迈克支付 30 美元。

**受益人**也是如此：例如，迈克只在行程中途来，所以他将（在重新平衡后）只支付 12.5% 的汽油价格，而不是默认的 25%（因为他们 4 人在车里^ ^)

我知道理解起来有点令人困惑，但这就是我来这里寻求帮助的原因^^

基本上这就是我的应用程序的工作方式，Appstore 上的版本已经具备所有这些功能，但不是很好。

这是我的所有数据模型：

![在此处输入图像描述](https://i.stack.imgur.com/NWiSa.png)

我希望你现在能理解我的问题:)

我想知道**我的模型是否**正常，以及**如何**使用此模型配置列出活动（不是派对）的所有费用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:12:41.540

好的，我想我听到的是你的模型看起来不错。如果您想要一份与活动相关的所有费用的清单，您必须通过客人。以下是伪代码，因为我不确定语法

```
NSMutableArray* expenseList; //This will contain all of the expense objects for a given event
   for Guest* guestObject in myEvent.guests
   {
      for Transaction* transactionObject in guestObject.transactions
      {
          [expenseList addObject:transactionObject.expense];
      }
   } 
```***********

# asp.net - 进行 web.config 转换，但无法测试它们

> ID：15914052
> 
> 赞同：0
> 
> 时间：2013-04-09T22:59:56.330
> 
> 标签：asp.net

我正在为我的网络配置文件编写一些转换。但是当我去调试时，有没有办法查看生成的 web.config 文件？我试过[http://webconfigtransformationtester.apphb.com/](http://webconfigtransformationtester.apphb.com/)；但我想在调试时实际查看 Web 配置文件是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:11:35.927

如果您使用的是 Visual Studio 2012，则该功能已经存在，可以右键单击您的转换（例如，Web.Release.config）并单击“预览转换”。如果您使用的是 VS2010，我认为默认情况下该功能不存在，但您可以通过安装[Slow Cheetah 扩展](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)来获得它。

# ios - Core Data vs. SQLite 用于通过 OData 公开的现有数据库的脱机持久性

> ID：15914064
> 
> 赞同：2
> 
> 时间：2013-04-09T23:01:02.150
> 
> 标签：ios, sqlite, core-data, odata

我正在创建一个应用程序，该应用程序需要对其通过 OData Web 服务公开的数据进行“离线”持久性。OData 服务使我能够访问底层数据库的所有表，以及所有相关的数据库字段，例如 ID。

此外，我已经有一个可以使用的 SQLite 数据库模式。

**我的问题是，我已经问过两次了，是直接通过 SQLite（使用 FMDB）将 Web 服务数据存储在设备上，还是利用 Core Data 更好？**

如果我使用 Core Data，那么我会失去主键和外键的关系优势，但会获得自动嵌套/填充的 NSManagedObjects 的优势。我不完全确定如何最好地重新创建我的数据对象的关系性质。

如果我使用 SQLite，我可以直接插入/更新 Web 服务调用的结果，并自动从现有的外键列中获取关系。缺点是我可能需要手动将结果封装在 POCO 对象中。

我现在的直觉告诉我 SQLite，但似乎社区在任何/所有情况下绝大多数都指向 Core Data。如果是核心数据，我如何最好地创建和维护对象关系（尤其是当它们是 1->many 时）

如果任何与 Apple 相关的方面存在问题，此应用程序将不会进入应用程序商店。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:32:10.907

Core Data 直接对关系建模。因此，在您的模式中，您可能会说，例如对象 A 与对象 B 有关系，并且该关系是“对多个”的。然而，这些关系就像普通的对象引用一样工作——您需要将 A 的每个实例链接到 B 的所有相关实例，您不会 [容易或通常] 只是说“A 通过外键 bID 与 B 相关”然后让关系自己处理。

如果您有一个 SQL 持久存储，那么实现的方式是每个对象都为其表获取一个隐式唯一键。关系被建模为一个额外的列，它包含外部表中每个链接对象的一个​​或多个键。

人们往往不喜欢 Core Data 的其他方面：

*   如果您始终依赖于隐式数据获取，那么您通常会获得较差的性能，因此您通常最终还是会使用显式查询来填充您可能即将在单个数据库行程中查看的结果；
*   由于 SQLite 不是线程安全的并且 Core Data 对象保持与其存储的实时连接，Core Data 对象不是线程安全的（尽管`objectID`对它们的引用是并且如果您愿意，您可以获取类似安全的字典而不是实时对象）；
*   即使您以其他方式解决了线程问题，根据 SQLite 线程安全注释，在后台保存仍会阻止前台访问。

反过来：

*   从 iOS 5 开始，您可以使用`NSIncrementalStore`，这样您只需运行 Core Data 查询，并且您的 Core Data 存储足够智能，可以在需要时转到服务器 - 您的代码的主体不知道数据是本地的还是远程的，并且不知道在声明要查找的内容时不需要重复；
*   您可以免费获得实时数据库连接，因此如果持久存储发生更改，您的对象会自动更新；
*   如果您主要寻找 iPhone 样式的表格视图，那么工作几乎已经为您完成，您几乎只需提供查询；
*   Core Data 有一个复杂的故障系统，可以在很大程度上解决处理大型数据集时的内存占用问题。

# android - 可以在片段中设置 SpannableString 吗？

> ID：15914074
> 
> 赞同：0
> 
> 时间：2013-04-09T23:01:41.870
> 
> 标签：android, android-fragments, bundle, spannablestring

如果可以将 SpannableString 设置为片段的参数，它是如何完成的？

```
 Bundle args = new Bundle();
        args.putString(PagesFragment.ARG_SECTION_NUMBER, Page[position]);
        fragment.setArguments(args);
        return fragment; 
```

此示例代码中需要更改哪些内容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T23:20:18.663

由于 SpannableString 实现 CharSequence 您可以使用 putCharSequence 方法。

```
 Bundle args = new Bundle();
    args.putCharSequence(PagesFragment.ARG_SECTION_NUMBER, Page[position]);
    fragment.setArguments(args);
    return fragment; 
```

问候。

# html - html5 地理定位 - 在移动设备上的地图上绘制轨迹（iPad、三星 Galaxy 选项卡）

> ID：15914075
> 
> 赞同：0
> 
> 时间：2013-04-09T23:01:50.343
> 
> 标签：html, jquery-mobile, geolocation

在户外使用地理定位在地图上绘制轨迹（我正在使用 ThinkGeo）的最佳方法是什么？

用户在四处移动时应该能够看到地图上的移动点。我知道以特定间隔重新加载页面可能会起作用，但是有没有办法在用户移动时捕捉事件，然后只在地图上显示一个新点，比如 GPS？

# php - 使用ajax将表单数据发送到php

> ID：15914077
> 
> 赞同：0
> 
> 时间：2013-04-09T23:02:11.587
> 
> 标签：php

我需要使用 ajax 将表单数据传递给 php 并在 php 中实现以计算总和、除法和其他算术方法如果有人帮我解决这个问题

**索引.html**

```
<script type="text/javascript">
$(document).ready(function(){

  $("#submit_btn").click(function() {
         $.ajax({

      url: 'count.php',

    data: data,
        type: 'POST',
        processData: false,
        contentType: false,
        success: function (data) {
            alert('data');
        }
     })

});
    </script>
</head>

<form name="contact" id="form" method="post" action="">

      <label  for="FNO">Enter First no:</label>
      <input type="text" name="FNO" id="FNO" value=""  />
label for="SNO">SNO:</label>
                        <input type="text" name="SNO" id="SNO" value="" />

      <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />

  </form> 
```

在**count.php**我想实现

```
<?php
$FNO = ($_POST['FNO']);
$SNO=($_post['SNO']);

$output=$FNO+$SNO;
echo $output;

?> 
```

（我想在 count.php 页面而不是在第一页 index.html 中显示输出）提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:10:10.750

您可以使用带有 AJAX 的简单 .post。看看下面的代码能够实现这一点：

```
$('#form').submit(function() {  
alert($(this).serialize()); // check to show that all form data is being submitted
$.post("count.php",$(this).serialize(),function(data){
    alert(data); //check to show that the calculation was successful                        
});
return false; // return false to stop the page submitting. You could have the form action set to the same PHP page so if people dont have JS on they can still use the form
}); 
```

这会将所有表单变量发送到序列化数组中的 count.php。如果您想在 index.html 上显示结果，则此代码有效。

我在您问题的最底部看到您想显示 count.php 的计数。好吧，您可能知道您可以简单地将 count.php 放入表单操作页面，而这不需要 AJAX。如果您真的想使用 jQuery 提交表单，您可以执行以下操作，但您需要在表单的 action 字段中指定一个值：

```
$("#submit_btn").click(function() {
    $("#form").submit();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:57:44.987

我已经修改了你的 PHP 代码，因为你在那里犯了一些错误。对于 javscript 代码，我为您编写了全新的代码。

**索引.html**

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

</head>
<body>
<form name="contact" id="contactForm" method="post" action="count.php">

      <label  for="FNO">Enter First no:</label>
      <input type="text" name="FNO" id="FNO" value=""  />
<label for="SNO">SNO:</label>
                        <input type="text" name="SNO" id="SNO" value="" />

      <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />

  </form>

  <!-- The following div will use to display data from server -->
<div id="result"></div>
</body>

  <script>

  /* attach a submit handler to the form */
  $("#contactForm").submit(function(event) {
  /* stop form from submitting normally */  
  event.preventDefault();

  /* get some values from elements on the page: */
  var $form = $( this ),
  //Get the first value
  value1 = $form.find( 'input[name="SNO"]' ).val(),
  //get second value
  value2 = $form.find( 'input[name="FNO"]' ).val(),
  //get the url. action="count.php"
  url = $form.attr( 'action' );

  /* Send the data using post */
  var posting = $.post( url, { SNO: value1, FNO: value2 } );

  /* Put the results in a div */
  posting.done(function( data ) {

  $( "#result" ).empty().append( data );
  });
  });
  </script>
</html> 
```

**计数.php**

```
<?php
$FNO =  $_POST['FNO'];
$SNO= $_POST['SNO'];

$output = $FNO + $SNO;
echo $output;

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T23:54:05.857

您的代码有一些问题；从细节到实际错误。

如果我们看一下 Javascript，那么它就是行不通的。`data`您无需设置即可使用该变量。您需要打开浏览器的*Javascript 控制台*才能查看错误。去谷歌上查询。

此外，javascript 比必要的复杂。Ajax 请求有点特殊，而在本例中，您只需要设置两个 POST 变量。该`jQuery.post()`方法将以更少的代码为您做到这一点：

```
<script type="text/javascript">
$(document).ready(function(){
  $("#form").on("submit", function () {
    $.post("/count.php", $(this).serialize(), function (data) {
      alert(data);
    }, "text");
    return false;
  });
});
</script> 
```

至于 HTML，没关系，但我建议`name=""`使用实际和简单的单词命名（即）输入字段，而不是缩写，从长远来看，这将为您提供更好的服务。

```
<form method="post" action="/count.php" id="form">
  <label  for="number1">Enter First no:</label>
  <input type="number" name="number1" id="number1">
  <label for="number2">Enter Second no:</label>
  <input type="number" name="number2" id="number2">
  <input type="submit" value="Calculate">
</form> 
```

PHP 与 Javascript 一样，只是不起作用。与大多数编程语言一样，PHP 对变量名称非常挑剔。换句话说，`$_POST`和`$_post`都不是同一个变量！在 PHP 中，您需要使用`$_POST`来访问 POST 变量。

此外，您永远不应该相信您无法控制的数据，这基本上意味着来自外部的任何数据。你的 PHP 代码，虽然它可能不会造成太大的伤害（除了显示文件在文件系统上的位置，如果启用了错误），应该清理和验证 POST 变量。这可以使用`filter_input`函数来完成。

```
<?php
$number1 = filter_input(INPUT_POST, 'number1', FILTER_SANITIZE_NUMBER_INT);
$number2 = filter_input(INPUT_POST, 'number2', FILTER_SANITIZE_NUMBER_INT);
if ( ! ctype_digit($number1) || ! ctype_digit($number2)) {
  echo 'Error';
} else {
  echo ($number1 + $number2);
} 
```

总的来说，我会说你需要更加小心你如何编写你的代码。代码中的小错误可能会导致一切崩溃。弄清楚如何检测错误（在 jQuery 中您需要使用控制台，在 PHP 中您需要打开错误消息，在 HTML 中您需要使用验证器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T05:40:50.737

您可以像下面那样在 ajax 调用中传递表单数据。

var formData = $('#client-form').serialize();

$.ajax({

网址：'www.xyz.com/index.php?' + 表格数据，

类型：'POST'，

数据：{

},

成功：函数（数据）{}，

错误：函数（数据）{}，}）

# visual-sourcesafe - 远程环境中的源代码控制

> ID：15914079
> 
> 赞同：0
> 
> 时间：2013-04-09T23:02:18.823
> 
> 标签：visual-sourcesafe, remote-access, azure-devops

我有一个开发人员团队，他们都在家远程工作（没有 Intranet 或 Extranet）。我们通过托管服务提供商提供专用托管托管服务，但他们不提供 TFS。生产 Web 和 sql 服务器位于主机的防火墙后面，并阻止其网络外部的远程连接。我们通过 SFTP 和/或 VPN 连接。

我们正在 ASP.Net MVC、VS 2012 中开发，我正在寻找有关此类环境的源代码控制选项的建议。

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:09:37.983

我真的很喜欢[分布式版本控制系统](https://en.wikipedia.org/wiki/Distributed_revision_control)这样的东西。[Mercurial](http://mercurial.selenic.com/)是我最喜欢的，没有什么特别好的理由，只是我先学会了它。

这使您的远程员工基本上可以在其工作站上拥有源树的完整副本，从而真正消除了由于网络漏洞而在远程系统中引入的任何摩擦。

缺点是您必须掌握源代码控制管理，确保只有成熟的变更集被提升到构建流中，并减少与各种变更的冲突。取决于你如何看待它，这可能是一个好处，因为它迫使你做一些你无论如何都应该做的事情：密切关注变化。

现在，对于托管，您可以使用许多不同的服务。我使用过[Bitbucket](https://bitbucket.org/)，其他人使用[GitHub](https://github.com/)，但还有很多其他的，或者您可以托管自己的。我发现在内部托管 Mercurial 并不比托管其他需要备份的东西更难。

祝你好运！

# python - 如何在 Kivy-iOS 上修改屏幕分辨率

> ID：15914088
> 
> 赞同：4
> 
> 时间：2013-04-09T23:03:01.677
> 
> 标签：python, ios, kivy

我正在使用 python/Kivy-iOS 工具链开发一个应用程序。出于某种原因，当我构建到 iPhone5 时，该应用程序无法全屏运行（顶部和底部都有信箱，请参阅随附的屏幕截图）。这似乎是 iOS 上 Kivy 的默认行为。

知道如何手动设置分辨率或使其正确检测分辨率吗？

![带有信箱的 iPhone 屏幕截图](https://i.stack.imgur.com/bRoam.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T21:09:41.217

iPhone5 需要具有以下属性的启动图像才能为您的应用启用完整的 4 英寸屏幕尺寸

*   文件名 - “Default-568h@2x.png”
*   尺寸 - 640x1136

放置在您的 app-kivyapp/ 目录中或通过 xcode 的设置界面添加它们，您就可以开始使用了。

# jquery - jquery zebra_accordion 扩展从其他页面链接到的 div

> ID：15914089
> 
> 赞同：0
> 
> 时间：2013-04-09T23:03:05.747
> 
> 标签：jquery, accordion

我试图让我的 jquery zebra_accordion 根据从另一个页面上的链接传递的 URL 变量展开（显示）一个指定的 div。通过查看其他帖子和论坛，我尝试从这里自定义它的 functions.js 文件：

```
$(document).ready(function() {
        new $.Zebra_Accordion('#Zebra_Accordion1'); }); 
```

对于这样的事情...

```
$(document).ready(function() {

var torun = self.location.search.slice(1);
    if (torun==expand-yourself) {
        new $.Zebra_Accordion($('.Zebra_Accordion1'), {
    'show': 0
});
        } 
    if (torun==half-day-evening) {
        new $.Zebra_Accordion($('.Zebra_Accordion1'), {
    'show': 1
});
        }       
    if (torun==private-lessons) {
        new $.Zebra_Accordion($('.Zebra_Accordion1'), {
    'show': 2
});
        }       
    else {
        new $.Zebra_Accordion('#Zebra_Accordion1');
    } }); 
```

“expand-yourself”、“half-day-evening”和“private-lesson”是被传递的变量，“show”后面的数字是手风琴中div的数字。我从 Zebra_Accordion 的配置说明中得到了那个小片段，[这里](http://stefangabos.ro/jquery/zebra-accordion)。

我的 javascript 技能几乎为零，而且根本不起作用。我什至把这个功能放在正确的地方吗？

这是我正在构建的网站的链接： [www.thehumanualway.com](http://thehumanualway.com) 链接位于主页上的“Classes”下方，手风琴位于 Classes 页面上。

我在 zebra_accordian 网站上发布了一个问题，但看起来它不再被审核了。帮助我stackoverflow，你是我唯一的希望。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:27:12.487

我想到了。来自其他页面的链接使用以下方法在 URL 中传递一个名为“tab”的参数：

```
<a href="javascript:location='/classes/?tab=expand-yourself';">Expand Yourself</a> 
```

这是正确的功能。希望其他人觉得这有帮助！

```
 $(document).ready(function() {

            if (window.location.search.indexOf('tab=expand-yourself') > -1) {
                    var myAccordion = new $.Zebra_Accordion($('#Zebra_Accordion1'));
myAccordion.show(0);
            } 

            else if (window.location.search.indexOf('tab=half-day-evening') > -1) {
                    var myAccordion = new $.Zebra_Accordion($('#Zebra_Accordion1'));
myAccordion.show(1);
            }

            else {
                    new $.Zebra_Accordion('#Zebra_Accordion1');
            }
}); 
```

# ios - 拆分一个字符串

> ID：15914092
> 
> 赞同：0
> 
> 时间：2013-04-09T23:03:15.317
> 
> 标签：ios, objective-c, xcode

我怎样才能做到这一点，以便我可以将从文件中读取的字符串拆分为单独的字符串，或者让它只读取特定的行，就像我希望它只读取文本文件的第一行并将其存储到字符串中一样。这是我用来读取文本文件的代码。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pday11 = [documentsDirectory stringByAppendingPathComponent:@"day11.txt"];
    NSString *stringFromFileday11 = [NSString stringWithContentsOfFile:pday11 encoding:NSUTF8StringEncoding error:nil];
//If i used this to read the file how could i split up the "stringFromFileday11" into different strings where every line is a string from the file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:52:16.353

读取字符串并将其拆分

```
NSString *str = [NSString stringWithContentsOfFile:<YOUR FILEPATH> encoding:NSUTF8StringEncoding error:nil];
NSArray *array = [str componentsSeparatedByString:@"\n"]; 
```

（例如阅读第一行。）

```
NSString *firstline = [array objectAtIndex:0]; 
```

# performance - 任何 Clojure 实现都可以快速启动吗？

> ID：15914094
> 
> 赞同：5
> 
> 时间：2013-04-09T23:03:20.077
> 
> 标签：performance, clojure

```
$ time java -jar clojure-1.4.0.jar -e '(println "Hello world")'
Hello world

real    0m4.586s

$ time python clojure.py  -c '(py/print "Hello world")'

real    0m14.690s

$ time mono Clojure.Main.exe -e '(println "hello world")'
hello world

real    0m4.843s

/* clojure-metal is not tested due to not being written at the moment */ 
```

Clojure 的启动时间是否可以像我运行 Perl 或 Python 脚本时那样少？启动时间慢是底层框架或 Clojure 的问题（迟早可以修复）还是设计使然？

注意：我已经知道 start-persistent-server-than-connect-to-it 解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:08:18.760

ClojureScript 可以很快启动。这个数字有点误导，因为它在编译时会删除死代码。这意味着这个片段被编译成`print("hello world");`. 这是我在我的机器上得到的：

```
$ echo '(js/print "hello world")' > hello.cljs
$ cljsc hello.cljs '{:optimizations :advanced}' > hello.js
$ time rhino hello.js 
hello world

real    0m0.466s 
```

为了比较，这是我使用普通clojure得到的：

```
$ time java -jar clojure-1.4.0.jar -e '(println "hello world")'
hello world

real    0m1.369s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T02:39:47.210

启动时间主要是因为 Clojure 本身在初始化方面所做的工作。其中一些任务非常重要，例如加载和编译核心 Clojure 命名空间。在不同的平台实现上运行并不会真正改变这一点。

但是，未来有很大的优化潜力：

*   Clojure 本身的大部分内容可以提前编译
*   Clojure 编译器本身的性能可以提高
*   延迟加载和/或编译可以减少感知延迟（可能是最大的胜利：大多数代码不需要 clojure.core 和其他依赖项中的所有命名空间，或者至少不需要立即）
*   非常聪明的人可能会弄清楚如何进行并行加载和编译

请注意，尽管 JVM 经常（不公正地）受到指责，但 JVM 在这里基本上是无关紧要的：现代 JVM 的启动时间约为 0.1 秒。

实际上，我将这一点用于用 Clojure 编写的 GUI 应用程序：通过使用一种`main`方法在纯 Java 中编写启动代码，您可以有一个启动屏幕，并且您的 GUI 的第一个屏幕几乎立即出现，然后将 Clojure 与您的其余部分一起加载后台应用程序代码。

# php - Code Igniter 中的自定义路由被覆盖

> ID：15914099
> 
> 赞同：1
> 
> 时间：2013-04-09T23:03:53.227
> 
> 标签：php, codeigniter

我有这些路线：

```
$route['shop/(:any)/(:any)'] = 'product/category_listing/$1/$2';
$route['shop/(:any)/(:any)/(:any)'] = 'product/product_listing/$1/$2/$3'; 
```

当我调用这个网址时：

[http://mysite.com/shop/mens/trainers/a-product](http://mysite.com/shop/mens/trainers/a-product)

应该调用 product_listing 方法，但会调用第一个方法 (category_listing) 并且永远不会调用 product_listing。

我怎样才能根据需要进行这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:19:24.143

**数组元素的顺序很重要！**

关键字`(:any)`匹配所有内容，甚至是斜线，因此在您的示例中，CodeIgniter 会找到第一个匹配的路由，并且不再查找。

所以，如果我们这样做：

```
$route['shop/(:any)/(:any)/(:any)'] = 'product/product_listing/$1/$2/$3';
$route['shop/(:any)/(:any)'] = 'product/category_listing/$1/$2'; 
```

...然后首先匹配产品列表，然后是其他所有内容。

更重要的是，您可以使用正则表达式（例如`([a-z0-9]+)`）来创建您需要的规则。

# unix - 在给定月份和年份的linux中执行cal函数

> ID：15914102
> 
> 赞同：1
> 
> 时间：2013-04-09T23:04:19.630
> 
> 标签：unix

我正在为一个开始的 unix/linux 类编写一个 bash 脚本，让用户输入他们想要查看的月份和年份。给定用户输入，我不确定如何执行日历。

这就是我所拥有的。

```
#!/bin/bash  
echo -n "Enter the month you wish displayed: "; read month  
echo -n "Enter the year you wish displayed: "; read year  
echo cal '$month' '$year' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:22:14.907

当您使用`echo`时，该行的其余部分（在 shell 可能处理之后）将输出到`stdout`（或可能通过管道传输到下一个进程）。这可以防止`cal`被视为命令。

'nix 中使用了不同类型的引号：`"`双引号和`'`单引号。还有 ` 反引号。每个都有一个非常具体的用途。

任何被反引号包围的命令都是*内联扩展*的——也就是说，它被执行并且输出被放在行中。因此，

```
echo hello `whoami` 
```

如果您的`hello john`用户名（对`whoami`命令的响应）是`john`.

单引号具有相反的效果：它“保护” shell 中的任何文本，因此不会再尝试处理。因此

```
echo hello '`whoami`' 
```

将导致

```
hello '`whoami`' 
```

双引号`"`的限制较少。( `$`variable)、`\`(escape) 和 ` 反引号仍会被解释，但这是将带有空格的参数传递给脚本的好方法。因此

```
doSomething for me 
```

将两个参数传递给函数`doSomething`：`for`和`me`。另一方面

```
doSomething "for me" 
```

只传递一个参数，`for me`

我希望这可以为您澄清事情。

# sql - 访问查询；从列表中创建主/从

> ID：15914103
> 
> 赞同：1
> 
> 时间：2013-04-09T23:04:37.370
> 
> 标签：sql, ms-access, ms-access-2003

几天前问了一个问题，但决定走另一条路，所以我重新做这个问题，因为编辑变得有点混乱。

我有一个包含两列的数据列表：

```
pID     sKey
100     8611
100     2318
101     3516
101     5413
102     6546
102     5646
102     8411
103     8795
103     5845 
```

第一个出现的 sKey 将成为该 pID 的主 sKey，之后的每个 sKey 都将成为从属。数据看起来像这样。

```
pID     sKey     sKey_1
100     8611    2318    
101     3516     5413
102     6546     5646
102     6546     8411
103     8795    5845 
```

这个查询让我接近

```
SELECT MyTable.pID, MyTable.sKey, MyTable_1.sKey
FROM MyTable 
    INNER JOIN MyTable AS MyTable_1 
    ON MyTable.pID = MyTable_1.pID
WHERE (((IIf([MyTable.sKey]=[MyTable_1.sKey],"Y","N"))="N"))

pID     sKey     sKey
100     2318     8611
100     8611     2318
101     3516     5413
101     5413     3516
102     5646     6546
102     5646     8411
102     6546     5646
102     6546     8411
102     8411     5646
102     8411     6546
103     5845     8795
103     8795     5845 
```

但是正如你所看到的，它颠倒了顺序并将每个加倍，当它遇到一个有 3 个或更多 sKey 的实例时，它有点疯狂：\

任何人有任何想法，或者可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:28:26.257

如果您尝试使用 MIN(skey) 作为您的主人，那么这样的事情应该可以工作：

```
select 
  p.pId, 
  p.skey,
  p3.skey skey1
from mytable p
  join (select pID, min(skey) minskey
        from mytable
        group by pID
        ) p2 on p.pid = p2.pid and p.skey = p2.minskey
  join mytable p3 on p.pid = p3.pid and p.skey != p3.skey 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/8b769/4)

这会产生与上面的结果略有不同的结果。

如果您想要的结果是使用出现的第一个 skey，那么我建议您在表中添加一个 Identity/AutoNumber 列，以便从中播种。如果没有该列，您将无法保证结果的顺序。所以假设你要添加这样一个列，那么这样的事情应该可以工作：

```
select 
  p.pId, 
  p.skey,
  p3.skey skey1
from mytable p
  join (select pID, min(id) minId
        from mytable
        group by pID
        ) p2 on p.id = p2.minId
  join mytable p3 on p.pid = p3.pid and p.id <> p3.id
order by p.pid, p3.id 
```

[带有自动编号的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/2f68c/1)

# java - 管理java战舰的转弯

> ID：15914107
> 
> 赞同：-2
> 
> 时间：2013-04-09T23:04:47.373
> 
> 标签：java

基本上我正在尝试用java制作战舰游戏。最终目标是实现一个 GUI 版本 (MVC)，但目前我正试图让游戏模型使用控制台输出工作。我还创建了一个简单的游戏引擎来管理游戏。我已经让游戏的大部分工作在某种意义上说，游戏会自动为两个玩家放置船只（随机），并且用户可以输入坐标以击中每个玩家（轮流）。

我遇到的问题是，当玩家指定他们已经击中的坐标（无论是未命中还是击中战舰）时，它会向控制台指定正确的消息（您已经在这里击中，再试一次）但它会将回合传递给其他玩家，而不允许玩家指定另一组要击球的坐标。

我不确定如何解决这个问题。在 GUI 版本中，我想这并不是非常重要，因为当射击时，网格上的 JButton 将只是禁用所以它是不可点击的？？？

我已经包含了我的 PlayingBoard 类的代码片段：

```
public int shootAtShip(int x, int y) {
//0 = empty, not hit
//10 = not empty, missed
//11 = hit on a battleship

        //Check if co-ordinates are out of bounds
        if(x >= playingStatus.length || x < 0 || y >= playingStatus[0].length || y < 0) {
            System.out.println("Your specified move was invalid");
        }
        //If grid location was empty, player has missed
        if(playingStatus[x][y] == 0) {
            playingStatus[x][y] = 10;
            System.out.println("You missed...");
            return playingStatus[x][y];
        }
        //If grid location has already been hit
        if(playingStatus[x][y] == 10 || playingStatus[x][y] == 11) {
            System.out.println("You have already shot here! Try again...");
        }
        //Hit in a field with Aircraft Carrier
        if(playingStatus[x][y] == 1){
            playingStatus[x][y] = 11;
            this.carrierHit++;
            System.out.println("You hit an Aircraft Carrier");
            if(this.carrierHit == 5) {
                System.out.println("You destroyed the Aircraft Carrier");
                fleet.remove(carrier);
            }
        }
        //Hit in a field with Battleship
        if(playingStatus[x][y] == 2) {
            playingStatus[x][y] = 11;
            this.battleshipHit++;
            System.out.println("You hit a Battleship");
            if(this.battleshipHit == 4) {
                System.out.println("You destroyed the Battleship");
                fleet.remove(battleship);
            }
        }
        //Hit in a field with 1st Destroyer
        if(playingStatus[x][y] == 3) {
            playingStatus[x][y] = 11;
            this.destroyerHit++;
            System.out.println("You hit Destroyer #1");
            if(this.destroyerHit == 3) {
                System.out.println("You destroyed the #1 Destroyer");
                fleet.remove(destroyer);
            }
        }
        //Hit in a field with 2nd Destroyer
        if(playingStatus[x][y] == 4) {
            playingStatus[x][y] = 11;
            this.destroyer2Hit++;
            System.out.println("You hit Destroyer #2");
            if(this.destroyer2Hit == 3) {
                System.out.println("You destroyed the #2 Destroyer");
                fleet.remove(destroyer2);
            }
        }
        //Hit in a field with Patrol Boat
        if(playingStatus[x][y] == 5) {
            playingStatus[x][y] = 11;
            this.patrolHit++;
            System.out.println("You hit a patrol boat");
            if(this.patrolHit == 2) {
                System.out.println("You destroyed the Patrol Boat");
                fleet.remove(patrol);
            }
        }
        return playingStatus[x][y];
    } 
```

游戏引擎：

```
public void play() {
    while(player1.board.isGameOver() == false || player2.board.isGameOver() == false) {
        System.out.println("Player 1 ----------------------------");
        player1.board.printBoard();
        player1.board.printFleet();
        System.out.println("Player2 -----------------------------");
        player2.board.printBoard();
        player2.board.printFleet();
        System.out.println(currentTurn + " - It is this players turn");
        System.out.println("Please enter target co-ordinates: ");
        String move = userinput.nextLine();
        int movex, movey;
        movex = -2;
        movey = -2;
        StringTokenizer tokenizer = new StringTokenizer(move, ",");
        if(tokenizer.countTokens() == 2) {
                movex = Integer.parseInt(tokenizer.nextToken());
                movey = Integer.parseInt(tokenizer.nextToken());
        }
        if(currentTurn == "player1") {
            player2.board.shootAtShip(movex, movey);
        }
        if(currentTurn == "player2") {
            player1.board.shootAtShip(movex, movey);
        }
        if(player1.board.isGameOver() == true) {
            System.out.println("Player2 has won - Sorry");
            break;
        }
        if(player2.board.isGameOver() == true) {
            System.out.println("Player1 has won - Sorry");
            break;
        }
        nextTurn();
    }
}

public void nextTurn() {
    if(this.currentTurn == "player2") {
        currentTurn = "player1";
    }
    else {
        currentTurn = "player2";
    }
} 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:09:39.107

理想情况下，如果 shootAtShip 没有返回成功值，您不会提前转弯。因此，在从 shootAtShip 返回 10 或 11 时，设置一个标志，表示不推进转弯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:10:02.687

您应该在消息“是玩家轮到”之后到下一轮调用之前创建一个嵌套循环。此循环应在播放器状态为 10 或 11 时重复

# ruby - 我在 ruby 中的数组初始化有什么问题？

> ID：15914108
> 
> 赞同：0
> 
> 时间：2013-04-09T23:04:48.070
> 
> 标签：ruby

为什么这是 ruby​​ 中的语法错误？

```
#!/usr/bin/ruby

servers = [ 
            "xyz1-3-l" 
    ,       "xyz1-2-l" 
    ,       "dws-zxy-l" 
    ,       "abcl" 
]

hostname_input = ARGV[0]
hostname = hostname_input.gsub( /.example.com/, "" )
servers.each do |server|
    if  hostname == server then 
            puts "that's the one"
            break
    end
end 
```

...当我执行这个脚本时，我得到这个输出......

```
$ ./test.rb abc1
./test.rb:5: syntax error, unexpected ',', expecting ']'
        ,       "xyz1-2-l" 
         ^
./test.rb:6: syntax error, unexpected ',', expecting $end
        ,       "dws-zxy-l" 
         ^ 
```

...如果我只是将所有内容放在同一行上就可以了...

```
$ cat test.rb 
#!/usr/bin/ruby

servers = [ "xyz1-3-l" ,        "xyz1-2-l" ,    "dws-zxy-l" ,   "abcl" ]

hostname_input = ARGV[0]
hostname = hostname_input.gsub( /.example.com/, "" )
servers.each do |server|
        if  hostname == server then 
                puts "that's the one"
                break
        end
end
$ ./test.rb dws-zxy-l
that's the one 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:00:50.987

看 ma，没有逗号（或引号）：

```
servers = %W[
    xyz1-3-l
    xyz1-2-l
    dws-zxy-l
    abcl
]

# => ["xyz1-3-l", "xyz1-2-l", "dws-zxy-l", "abcl"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:24:13.697

换行符在 Ruby 中很重要。您需要将逗号放在行尾或在换行符之前使用反斜杠来表示该行正在继续（当然，在这种情况下，将逗号移动到下一行有什么意义？）。

# windows - 使用 powershell 更改注册表二进制数据

> ID：15914109
> 
> 赞同：5
> 
> 时间：2013-04-09T23:05:04.030
> 
> 标签：windows, internet-explorer, powershell, binary

我了解使用 powershell 可以更改注册表值。

例如，这里： http: [//poshcode.org/3504](http://poshcode.org/3504)

我们可以像这样设置属性：

```
Set-ItemProperty 'HKCU:\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\ftp\UserChoice' -name ProgId IE.FTP 
```

**但是，是否可以使用 powershell 设置这些二进制值？**

![在此处输入图像描述](https://i.stack.imgur.com/VOMTf.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T23:41:15.517

1.  读取值（字节数组）
2.  修改数组元素
3.  将字节数组写回注册表项。

这是一个例子：

```
$key = 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections'

$data = (Get-ItemProperty -Path $key -Name DefaultConnectionSettings).DefaultConnectionSettings
$data[8] = 9
Set-ItemProperty -Path $key -Name DefaultConnectionSettings -Value $data 
```

# c# - 解析 XML 文件中的两条连续记录

> ID：15914110
> 
> 赞同：2
> 
> 时间：2013-04-09T23:05:04.537
> 
> 标签：c#, xml, linq

我有一个 XML 文件：

```
<root type="service">
  <Msg Date="03/23/2013 12:00:04 AM">Request'HANDSHAKE'</Msg>
  <Msg Date="03/23/2013 12:00:04 AM">Response'RSHANDSHAKE'</Msg>
  <Msg Date="03/23/2013 12:03:04 AM">Request'HANDSHAKE'</Msg>
  <Msg Date="03/23/2013 12:03:04 AM">Response'RSHANDSHAKE'</Msg>
  <Msg Date="03/23/2013 01:34:30 PM">Request 'IQ~bbabb3ff2-...DLE~VNECTRECVBDHANDLE'</Msg>
  <Msg Date="03/23/2013 01:34:30 PM">Response SIQ~7a23da12...RDHANDLE=O000000000014'</Msg>
</root> 
```

我必须解析文件并查看每个请求是否都有响应。如果没有响应，则表明有错误。我怎样才能在 C# 和最好的 LINQ 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:17:35.370

您应该使用像 LINQ to XML 这样的 XML 解析器。这样，您的代码可能如下所示：

```
XDocument doc = XDocument.Load("file.xml");
bool isError = (from e1 in doc.Root.Elements()
                where e1.Value.StartsWith("Request")
                let e2 = e1.ElementsAfterSelf().FirstOrDefault()
                where e2 == null || !e2.Value.StartsWith("Response")
                select e1).Any(); 
```

这篇文学作品符合您的要求：对于每个`Request`元素，它检查以下元素是否存在并且是一个`Response`元素。

如果您有其他要求，例如`Response`元素本身也无效，则必须相应地修改代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T00:07:38.430

这是一个适用于有效案例和错误的解决方案，还可以为您提供确切的数量：

```
 String xmlString = @"<root type=""service"">
        <Msg Date=""03/23/2013 12:00:04 AM"">Request'HANDSHAKE'</Msg>
        <Msg Date=""03/23/2013 12:00:04 AM"">Response'RSHANDSHAKE'</Msg>
        <Msg Date=""03/23/2013 12:03:04 AM"">Request'HANDSHAKE'</Msg>
        <Msg Date=""03/23/2013 12:03:04 AM"">Response'RSHANDSHAKE'</Msg>
        <Msg Date=""03/23/2013 01:34:30 PM"">Request 'IQ~bbabb3ff2-...DLE~VNECTRECVBDHANDLE'</Msg>
        <Msg Date=""03/23/2013 01:34:30 PM"">Response SIQ~7a23da12...RDHANDLE=O000000000014'</Msg>
    </root>";

    String[] data = xmlString.Split(new string[] { "/Msg"},  StringSplitOptions.None);

    int errors = 0;
    Boolean secondLine = false;
    for (int i = 0; i+1 < data.Length; i ++ )
    {
        if (secondLine)
        {
            if (!data[i].Contains("Response"))
            {
                errors += 1;
            }
            secondLine = false;
        }
        else
        {
            if (!data[i].Contains("Request"))
            {
                errors += 1;
            }
            else
            {
                secondLine = true;
            }
        }
    }
    if (secondLine) { errors += 1; }

    System.Windows.Forms.MessageBox.Show("Errors: " + errors.ToString()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T23:26:54.843

像这样的东西会起作用，我只是在 Visual Studio 中对其进行了测试，肯定有更优雅的方法可以使用`XPATH`过滤器/选择器来完成其中的一部分......

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Text;
using System.Xml;

namespace ParseXML
{
    class Program
    {
        static void Main(string[] args)
        {
            String xmlString =
        @"<root type=""service"">
                <Msg Date=""03/23/2013 12:00:04 AM"">Request'HANDSHAKE'</Msg>
                <Msg Date=""03/23/2013 12:00:04 AM"">Response'RSHANDSHAKE'</Msg>
                <Msg Date=""03/23/2013 12:03:04 AM"">Request'HANDSHAKE'</Msg>
                <Msg Date=""03/23/2013 12:03:04 AM"">Response'RSHANDSHAKE'</Msg>
                <Msg Date=""03/23/2013 01:34:30 PM"">Request 'IQ~bbabb3ff2-...DLE~VNECTRECVBDHANDLE'</Msg>
                <Msg Date=""03/23/2013 01:34:30 PM"">Response SIQ~7a23da12...RDHANDLE=O000000000014'</Msg>
            </root>";

            // Create an XmlReader
            using (XmlReader reader = XmlReader.Create(new StringReader(xmlString)))
            {
                while (reader.ReadToFollowing("Msg"))
                {
                    string request = reader.ReadElementContentAsString();

                    if(reader.ReadToFollowing("Msg"))
                    {
                        string response = reader.ReadElementContentAsString();

                        if (request.Contains("Request") && response.Contains("Response"))
                        {
                            // Request/Response nodes identified...
                        }
                    }
                }
            }
        }
    }
} 
```

# ios - 在 cocos2d 中停止触摸传播

> ID：15914111
> 
> 赞同：0
> 
> 时间：2013-04-09T23:05:15.837
> 
> 标签：ios, objective-c, cocoa-touch, ios6, cocos2d-iphone

我们正在 cocos2d 中开发一款游戏，其中有可能会遇到一个琐事问题。琐事问题作为一个新的、透明的 CCLayer 实现在游戏板上，其中包含一个包含所有问题的 CCMenu。

我们的问题是我们似乎无法停止正确传播。当琐事菜单打开时，玩家应该无法点击棋盘层上的“掷骰子”按钮。

我们已经尝试通过`dice.isTouchEnabled=NO;`在添加琐事层之前调用来实现这一点，但我们无法弄清楚如何重新启用骰子按钮。

我们还尝试将`ccTouchBegan`NO 更改为 YES 以始终使用所有触摸，但随后它停止响应我们的菜单。看起来这应该是正确的做法，但是为什么菜单停止响应呢？

我们的教授建议实现一个回调函数，我们当然可以这样做，但看起来应该比这更容易。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:13:32.310

我知道有两种方法可以做到这一点。

**方法1（我正在使用的方法）**

1.  在弹出琐事问题之前，请使用以下功能禁用 Underlying Scene 节点上的菜单。该方法是一种递归方法，因此它也会禁用节点子节点上的所有菜单。

2.  当琐事问题被解除时，发送一个 NSNotification 将被底层场景节点接收，并将重新启用节点及其子节点上的菜单。你可以使用 NSNotification 的 block 方法来缩短你的代码。

文档[`addObserverForName:object:queue:usingBlock:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-SW1)

```
(void) MenuStatus:(BOOL)_enable Node:(id)_node {

    for (id result in ((CCNode *)_node).children) {
        if ([result isKindOfClass:[CCMenu class]]) {
            for (id result1 in ((CCMenu *)result).children) {
                if ([result1 isKindOfClass:[CCMenuItem class]]) {
                    ((CCMenuItem *)result1).isEnabled = _enable;
                }
            }
        }
        else
            [self MenuStatus:_enable Node:result];
    }
} 
```

**方法二**

创建一个不可见的图层，它将吞噬 Trivia Question 图层下方的所有内容。这是您可以尝试的课程：[https ://gist.github.com/christophercotton/1563708](https://gist.github.com/christophercotton/1563708)

# android - 打开现有活动 - 用于 android 的单声道

> ID：15914112
> 
> 赞同：0
> 
> 时间：2013-04-09T23:05:28.960
> 
> 标签：android, mono, notifications, android-activity

我正在构建一个单声道 android 应用程序，它接收来自 GCM 的通知并在用户单击通知时打开一个活动。

当通知创建的活​​动实例已经存在并且是应用程序中的当前活动活动时，就会出现问题。单击通知后，将在应用程序中创建一个重复的活动。这个问题很微妙，因为新的重复活动在前台打开并且看起来与以前的活动相同，但是当用户单击后退按钮时，重复的活动被杀死，但以前的活动仍然存在，这意味着用户必须单击后退按钮两次。

以下是用于生成通知并在点击时创建活动的当前代码。我希望该过程类似于，如果存在活动，则打开现有活动，否则开始新活动。感谢任何帮助谢谢。

```
void createNotification(string title, string desc)
{
 //Create notification
 var notificationManager = GetSystemService(Context.NotificationService) as NotificationManager;

 //Create an intent to show ui
 var uiIntent = new Intent(this, typeof(Messaging));

 //Create the notification
 var notification = new Notification(Android.Resource.Drawable.SymActionEmail, title);

 notification.Defaults = NotificationDefaults.Sound;

 //Auto cancel will remove the notification once the user touches it
 notification.Flags = NotificationFlags.AutoCancel;

 //Set the notification info
 //we use the pending intent, passing our ui intent over which will get called
 //when the notification is tapped.
 notification.SetLatestEventInfo(this, title, desc, PendingIntent.GetActivity(this, 0, uiIntent, 0));

 //Show the notification
 notificationManager.Notify(1, notification);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:08:43.910

尝试这个

```
Intent intent = new Intent(context, MyActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
startActivity(intent); 
```

# html - 网页为“屏幕尺寸”并且内容滚动而不是页面

> ID：15914114
> 
> 赞同：0
> 
> 时间：2013-04-09T23:05:54.077
> 
> 标签：html, css

我正在寻找一个带有粘性页脚的网页。我的粘性页脚工作正常（除了内容很少的页面，但我可以解决这个问题）。我曾希望我的粘性页脚，粘在页面底部，我不必向下滚动即可看到它。我的最后一个内容和页脚之间似乎有大量空白空间（我可以稍后修复）。

但回到正题，我想要的是页脚位于屏幕底部，而不是页面，如果内容需要滚动，那么它在页脚后面，内容本身是可滚动的，而不是整个页面，如果有人的话知道我的意思吗？

我假设它的 CSS，所以我将仅包含 CSS，如果需要 html，我将编辑并添加它。

```
body, div, h1, h2, h3, h4, h5, h6, p, ul, ol, li, dl, dt, dd, img, form, fieldset,input, blockquote {
margin: 0; padding: 0; border: 0;
}

body {
font-family: Helvetica, Arial, Sans-Serif; line-height: 24px;
background: #ebebeb url(images/bg.png) center top repeat-y;
}

#container {
width: 600px; margin: 0 auto;
 position:relative;
    }

#ImgGallery {
position:relative;
width:600px;
height:400px;
margin:20px auto 0 auto;
}

#ImgGallery ul {
padding:0;
margin:0;
list-style-type:none;
}

#ImgGallery a.gallery span {
position:absolute;
width:1px;
height:1px;
top:-1px;
left:-1px;
overflow:hidden;
background:#fff;
color:b00a38;
}

#ImgGallery a.gallery, #ImgGallery a.gallery:visited {
display:block;
color:#000;
text-decoration:none;
border:1px solid #000;
margin:1px 2px 1px 2px;
text-align:left;
cursor:default;
}
#ImgGallery a.slidea {
background:url('images/Picture 014 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slideb {
background:url('images/Picture 015 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slidec {
background:url('images/Picture 016 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slided {
background:url('images/Picture 017 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slidee {
background:url('images/Picture 027 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slidef {
background:url('images/Picture 035 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slideg {
background:url('images/Picture 039 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slideh {
background:url('images/work dinosaur 002 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slidei {
background:url('images/work dinosaur 010 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slidej {
background:url('images/work dinosaur 011 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slidek {
background:url('images/work dinosaur 012 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery a.slidel {
background:url('images/work dinosaur 015 thumb.jpg');
height:38px;
width:50px;
}
#ImgGallery ul {
margin:200px 0 0 150px;
width:350px;
height:38px;
}

#ImgGallery li {
float:left;
}

#ImgGallery a.gallery:hover {
border:1px solid #fff;
}

#ImgGallery a.gallery:hover span {
position:absolute;
width:200px;
height:200px;
top: -200px;
left:200px;
color:#000;

}

#header {
overflow: hidden;
padding: 0 0 10px 0;
}

#header h1 {
    float: left;
}

#header ul#categories { /*menu settings */
    float: left; list-style: none; margin: 25px 0 0 0;
}
    #header ul#categories li {
    float: left; margin: 0 0 0 15px;
    }

        #header ul#categories li a {
            display: block;
            font-size: 12px; font-weight: bold; color: #b20938;
            text-decoration: none;
        }
            #header ul#categories li a:hover {
                color: #800427;
            }

#content {
overflow: hidden; padding: 5% 0 0 0;
}

#content #avemenu a { /* link settings in main */
    font-weight: normal; color: #b20938;
    text-decoration: none;
}
    #content a:hover {
        color: #800427;
    }

        #content #main { /* post content spacing etc */
                width: 600px; float: left; padding: 0 0 0 0 ;
            }

            #content #main h2 { /*space between post heading and content */
                        margin: 0 0 0px 10px;
                        font-size: 14px; font-weight: bold; text-transform: uppercase; color: #b20938;
                    }

                #content #main p { /*post text settings */
                            margin:0 0 25px 10px; color: #000000; font-size: 12px;
                        }

                    #content #main .post { /*post box */
                        background: #ebebeb url(images/contentheadbg.png) right top repeat-x;
                        padding: 0 10px 0 0; margin: 0 0 20px 0;
                        overflow: hidden;
                    }

#content #main .post .post-content {
width: 600px;
}
#content #main .post .post-content ul.post-meta {
    width: 600px; height: 21px; list-style: none; padding: 0 0 0 10px; margin: -20px 0 0 0;
    background: #ebebeb url(images/contentheadbg.png);
}
    #content #main .post .post-content ul.post-meta li {
        float: left; margin: 0 40px 0 0;
        font-size: 12px; font-weight: bold; color: #000000;
    }
        #content #main .post .post-content ul.post-meta li.see-more {
            float: right; margin: 0 20px 0 0;
        }

        /*#menu {
        width: 600px;
        }*/

#footer {
background: url(images/footer.jpg) center bottom no-repeat; overflow: hidden;
}

#footer ul#pages {
    overflow: hidden; list-style: none; float: left; padding: 0 0 0 0; margin: 0 0 0 0;
}

    #footer ul#pages li {
    float: left; margin: 0 0 0 75px;
    }

        #footer ul#pages li a {
            display: block;
            font-size: 12px; font-weight: bold; color: #b20938;
            text-decoration: none;
        }
            #footer ul#pages li a:hover {
                color: #800427;
            } 

#map {
float: right;
}

/* simple wordpress contact form */

            div#simple-contact-form {}
div#simple-contact-form form {}
#simple-contact-form fieldset {}
#simple-contact-form label {}
#simple-contact-form input {}
#simple-contact-form textarea {}

#simple-contact-form fieldset input {} /* excludes submit button */
#simple-contact-form div.scf-submit input {} /* submit button */

#simple-contact-form input:focus,
#simple-contact-form textarea:focus {}

p.scf_spam,
p.scf_error {}
p.scf_success {}
p.scf_reset {}

#scf_success {}
#simple-contact-form fieldset input.scf_error {}
#simple-contact-form fieldset textarea.scf_error {}

a:link {
text-align: center;
}

html, body {height: 100%;}

#container {min-height: 100%;}

#content {
overflow:auto;
padding-bottom: 110px;  /* must be same height as the footer */
}
#footer {
position: relative;
margin-top: -110px; /* negative value of footer height */
height: 110px;
width: 600px;
margin: 0 auto;
clear:both;
}

/*Opera Fix*/
body:before {
content:"";
height:100%;
float:left;
width:0;
margin-top:-32767px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:33:16.373

可能类似于[试图让页脚粘在底部](https://stackoverflow.com/questions/5454260/trying-to-get-footer-to-stick-to-bottom)。还要检查一下：http: [//johnpatrickgiven.com/jquery/pinned-footer/](http://johnpatrickgiven.com/jquery/pinned-footer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T05:22:11.517

```
#footer{
position: fixed; //make it stick and not scroll with content
bottom: 0; //stick to bottom
left: 0; //stick to left
z-index: -9999; //make it render at a high z-index to not block content
} 
```

让你的内容 CSS 保持原样，只需让页脚粘住而不是内容在其内部滚动，你就会得到你想要的。

希望这可以帮助！

# ios - 使用不受支持的 WebKit 属性有什么影响？

> ID：15914115
> 
> 赞同：3
> 
> 时间：2013-04-09T23:05:55.270
> 
> 标签：ios, css, webkit

我有兴趣在`-webkit-line-clamp`混合 iOS 应用程序中使用。

我已阅读有关不受支持的属性的[苹果文档。](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/doc/uid/TP30001266-UnsupportedProperties)

使用不受支持的属性是否明智，或者我是否冒着在移动 safari 和其他浏览器实现中的 webkit 未来实现中删除该功能的风险？

如何检查 WebKit 属性的状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:41:38.000

只要缺乏对`-webkit-line-clamp`(ala `border-radius`) 支持的浏览器仍然可以访问该设计，就没有什么影响可言。

浏览器过去是否更改了它们的实现或放弃了对实验性属性的支持？当然。

*   Safari 最初的渐变实现与当前标准完全不同
*   WebKit 浏览器仍然支持 prefixed`column-break-before`属性，`break-before`在当前标准中被重命名为
*   WebKit 浏览器仍然支持 2009 年 Flexbox 草案中的属性，尽管在 2012 年末进行了彻底改革

值得庆幸的是，您可以以在支持旧实现和新实现的浏览器中工作的方式编写 CSS：

```
.foo {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
} 
```

将来，我们将可以访问*功能查询*来检测浏览器是否支持特定属性（Opera 现在支持，Firefox*很快就会*支持： http: [//caniuse.com/#feat=css-featurequeries](http://caniuse.com/#feat=css-featurequeries)）

```
@supports not (-webkit-line-clamp: somevalue) {
    // some styles for unsupported browsers
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T10:09:56.300

Chris Coyer 写了一篇关于这个主题的文章：[http](http://css-tricks.com/line-clampin/) ://css-tricks.com/line-clampin/ FTLabs 为此创建了一个 JS-Plugin：[FTEllipsis](https://github.com/ftlabs/ftellipsis "FT省略号")他们将它用于新的金融时报 iPad webapp - 看看[http ://coding.smashingmagazine.com/2013/05/23/building-the-new-financial-times-web-app/](http://coding.smashingmagazine.com/2013/05/23/building-the-new-financial-times-web-app/)

# java - 处理 asyncServlet 时出现 NullPointerException

> ID：15914118
> 
> 赞同：0
> 
> 时间：2013-04-09T23:06:06.197
> 
> 标签：java, servlets, jetty, servlet-3.0

我正在关注[本](http://www.softwareengineeringsolutions.com/blogs/2010/08/13/asynchronous-servlets-in-servlet-spec-3-0/)教程 -

当我这样发送请求时-

```
http://localhost:9090/AsyncServlet?id=99&dispatch=true&timeout=false 
```

我越来越关注-

```
Apr 09, 2013 4:01:09 PM com.mycompany.mavenproject1.AsyncServlet doGet
INFO: AsyncServlet: Processing request: 99\. on thread: 27:qtp2072997125-27[4/9/13 4:01 PM]
2013-04-09 16:01:09.503:WARN:oejs.ServletHandler:/AsyncServlet
java.lang.NullPointerException
    at com.mycompany.mavenproject1.AsyncServlet.doGet(AsyncServlet.java:50)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:457)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
    at org.eclipse.jetty.server.Server.handle(Server.java:368)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
    at java.lang.Thread.run(Thread.java:722) 
```

我只是不知道从哪里开始调试。我的 web.xml 看起来像这样-

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0"> 

<servlet>
    <servlet-name>AsyncServlet</servlet-name>
    <servlet-class>com.mycompany.mavenproject1.AsyncServlet
    </servlet-class>        
    <async-supported>true</async-supported>

</servlet>
<servlet-mapping>
    <servlet-name>AsyncServlet</servlet-name>
    <url-pattern>/AsyncServlet/*</url-pattern>
</servlet-mapping>

</web-app> 
```

Line50: executor.execute(new AsyncRequestProcessor(asyncCtx, dispatch));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:18:19.983

唯一可能迫使 a`NullPointerException`从该行抛出的情况是`executor`对象未正确初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:18:22.917

如果第 50 行是这样的：

```
executor.execute(new AsyncRequestProcessor(asyncCtx, dispatch)); 
```

那么 NPE 最可能的直接原因`executor`就是`null`.

如果`asyncCtx`或`dispatch`在哪里装箱原始类型，那么您可以从 unboxing 获得 NPE `null`。然而，考虑到变量的名称，这似乎不太可能。在我看来，它们就像“常规”类实例的名称。

# java - Java 子类最后一个实例覆盖值

> ID：15914123
> 
> 赞同：0
> 
> 时间：2013-04-09T23:06:41.540
> 
> 标签：java

我是一名涉足 Java 的 Web 开发人员（再次），但我遇到了一些问题。

基本上，我有一个超类 Employee，它有两个扩展它的子类，称为 Management 和 Programmer。Employee 类包含一个数组，该数组`employees`基本上是一个 Employee 对象数组。

这是两个类（Employee 和 Management）的重要片段和最终的 main 方法。我将在底部解释输出。

```
public class **Employee** {

   private static String firstName;
   protected static int MAXEMPLOYEES = 5;
   protected Employee[] employees = new Employee[MAXEMPLOYEES];
   protected int totEmployees = 0;

   public Employee(String first) {
       setFirstName(first);
   }

   public void setFirstName(String str){
       firstName = str;
   }

   public String getFirstName(){
       return firstName;
   }

    public boolean addEmployee(String fname) {
       boolean added = false;
       if (totEmployees < MAXEMPLOYEES) {
           Employee empl = new Employee(fname);
           employees[totEmployees] = empl;
           added = true;
           totEmployees++;
       }
       return added;
   }

}

public class **Management** extends **Employee** {
    private String title = "Project Manager";

    public Management(String fname, String t){
        super(fname);
        title = t;
    }

    public boolean addManagement(String fname, String t){
        boolean added = false;

        if (totEmployees < MAXEMPLOYEES) {
            employees[totEmployees] = new Management(fname, t);
            added = true;
            totEmployees++;
        }
        return added;
    }
}

-------------------------------------
package employee;

public class EmployeeApplication {

    public static void main(String[] args) {
        Employee[] empl = new Employee[3];
        empl[0] = new Employee("Kyle");
        empl[1] = new Management("Sheree", "Director");

        System.out.println(empl[0].getFirstName());
    }
} 
```

现在，我希望系统打印出“Kyle”，但它打印出“Sheree”。有任何想法吗？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T23:11:41.887

```
private static String firstName; 
```

您设置了`firstName`静态，这意味着所有实例共享相同的名称。您需要删除 static 修饰符才能使不同的员工具有不同的名称。您还需要将私有访问修饰符更改为受保护，以便子类继承该字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:13:12.730

```
private String firstName; 
```

删除`static`；

Kyle 被 Sheree 覆盖，这就是为什么你得到那个输出

# java - 需要帮助创建一个返回数组的方法，该数组的元素是另一个数组的平方

> ID：15914124
> 
> 赞同：0
> 
> 时间：2013-04-09T23:06:50.653
> 
> 标签：java, methods, double

我有一个任务，要求我创建一个方法，该方法将一个名为 dArray 的双精度数组作为参数，并返回另一个数组，其元素是 dArray 元素的平方。

例如，

如果 dArray 是`{1, 4, 6, 7}`，则返回的数组将是`{1, 16, 36, 49}`。

任何帮助将不胜感激！

这是我到目前为止所写的，但它不能正常工作。

```
public static double[] squareArray(double[] dArray) {
    double[] squareArray = new double[10];

    for(int i = 0; i < dArray.length ; i++) {
        dArray[] = dArray * dArray;
    }

    return squareArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:08:55.703

看起来您对数组的平方超出了您的需要。如果数组中的每个元素都需要平方，你应该只需要循环一次该数组，但在你的代码中你有两个循环。

这是问题的一部分。

另一个是您试图将数组相乘，这是不允许的。在该方法中，您需要遍历数组并对其中的每个元素进行平方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:12:04.793

试试这个：

1.  在您的 squareArray() 中，创建一个 List< Double> 或类似的东西。
2.  遍历 double[] 中的每个双精度并将该双平方添加到列表中。
3.  Return (listname).toArray();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:14:23.453

```
class Test {

    public static void main(String [ ] args) {
            double[] scores = {3, 9, 3, 3};
            double[] scoresSquared = squareArray(scores);
            for (int i =0; i <scoresSquared.length; i++) {
                    System.out.println(scoresSquared[i] + " ");
            }
    }

    public static double[] squareArray(double[] dArray){
            double[] squareArray = new double[dArray.length];
            for (int i = 0; i < dArray.length ; i++){
                    squareArray[i]= dArray[i] * dArray[i];
            }
            return squareArray;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:16:08.497

您快到了。

*   [复制](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)您收到的数组的内容并将它们放入您的 internal `squareArray`.
*   迭代`squareArray`并应用您的算法（要在循环中访问特定索引，请使用`squareArray[i]`）
*   返回`squareArray`。

# java - 如何从类中检索 T 的类名 实例

> ID：15914127
> 
> 赞同：-2
> 
> 时间：2013-04-09T23:07:08.473
> 
> 标签：java, generics, reflection

我有一个接收类型化类的实例作为参数的方法：

`public <T> someMethod(Class<T> theClass)`

我想获取 T 代表的类的名称。

我可以这样得到：

`theClass.newInstance().getClass().getName()`

有没有更好的办法？

背景：我的方法基于指定的实体类构建了一个通用的 JPQL 查询。

**编辑：**

有问题的方法实际上如下所示：

`public <K> List<? extends SomeInterface<K>> someMethod(Class<? extends SomeInterface<K>> theClass, K thePk)`

...并且 Eng.Fouad 能够猜出导致我的问题的错字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:08:59.517

那这个呢？

```
theClass.getName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:12:11.793

您的代码只是返回相同的内容。

```
theClass.newInstance().getClass().getName() 
```

您有一个`Class<T>`为它创建一个新实例的实例。然后你调用`getClass()`它，它`Class<T>`再次返回。

您可以只`getName`在原始输入参数上使用。

例子：

```
public static void main(String[] args) {
    printName(String.class);
    printName(Integer.class);
}

public static <T> void printName(final Class<T> clazz) {
    System.out.println(clazz.getName());
} 
```

输出：

```
java.lang.String
java.lang.Integer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:32:10.200

你可以尝试这样做。

```
public void printName(Object classObject){
    System.out.println(classObject.getClass().getName());
} 
```

该方法不使用参数，而是接受代表类的对象。

# templates - 模板countmodules可调宽度？

> ID：15914128
> 
> 赞同：0
> 
> 时间：2013-04-09T23:07:10.997
> 
> 标签：templates, joomla, width

好的，

我确信这已经得到了回答，而且我相信这个链接可以帮助我[http://docs.joomla.org/Hide_column_to_avoid_width_issues](http://docs.joomla.org/Hide_column_to_avoid_width_issues)

我对语法或 php 编码不是很熟悉，所以我在尝试做的事情时遇到了麻烦..

我正在构建一个 joomla 2.5 模板，并且当那里没有发布任何模块时，我正在使用 countmodules 来隐藏“div”或整个位置。我的问题是假设在我的 100% 宽度的主列中，有时我想在主内容框中的内容右侧显示一个模块，该模块仅占整个列宽度的 25%。好的，这行得通。

但是，我想将内容浮动到左侧，这个 25% 宽度的模块我们将称为“right1”，它浮动到右侧，所以我需要将主要内容设置为 75% 左右的宽度，以使所有内容都能很好地浮动并正确显示确实如此！我的问题是，如果“right1”不存在，我不明白如何使我的主要内容为 100% 宽度。如果我在“right1”中没有显示任何模块，那么它不会显示我将如何更改我的主要内容的 css 以调整到 100% 而不是缩小到 75% 以弥补缺少的 right1 位置。

我可能真的很愚蠢，我不记得有一个简单的解决方案摆在我面前。提前致谢！

-编辑-

它是这样的

```
<div id="contentcontainer">
<jdoc:include type="message" /><jdoc:include type="component" />
<?php if ($this->countModules( 'right1' )) : ?>
<div id="right1"><jdoc:include type="modules" name="right1" style="xhtml" /></div>
<div class="clearfix"></div><?php endif; ?><?php if ($this->countModules('right2')): ?>
<div id="right2"><jdoc:include type="modules" name="right2" style="xhtml" /></div>
<div class="clearfix"></div>
<?php endif; ?>

</div></div></div> 
```

我刚刚添加了 contentcontainer 以确保它们在 100% 宽度的容器内可以使用

```
#contentcontainer{
width:100%;
position:relative;
}

#right1, #right2 {
border: 1px solid #990000;
border-radius: 18px 18px 18px 18px;
box-shadow: 5px 3px 5px #990000;
display: block;
float: right;
height: auto;
width: 25%;
} 
```

我将内容使用的任何标签放在浮动：左；我尝试做的是对主要内容使用“最小宽度：”，而最小宽度似乎不起作用。那么什么可能是一个解决方案，希望我不必像曾经建议的那样求助于 jQuery。这是足够的信息吗？

-编辑-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:51:07.490

您可以使用一些简单的 PHP 和内联样式来完成。我不是 PHP 方面的专家，所以这可能不像它可能的那样优雅，但是我相信有人会纠正它。

```
 <div id="contentcontainer">

    <?php 
    //column calculation
    $columns == 0;
    if($this->countModules( 'right1' )) {$columns++;}
    if($this->countModules( 'right2' )) {$columns++;}
    $centercolumnwidth = 100 - (25 * $columns);
    ?>

    <jdoc:include type="message" />

    <div id="maincolumn" style="width:<?php echo $centercolumnwidth ?>%">
        <jdoc:include type="component" />
    </div><!--/maincolumn-->

    <?php if ($this->countModules( 'right1' )) : ?>
    <div id="right1">
        <jdoc:include type="modules" name="right1" style="xhtml" />
    </div><!--/right1-->
    <div class="clearfix"></div>
    <?php endif; ?>

    <?php if ($this->countModules('right2')): ?>
    <div id="right2">
        <jdoc:include type="modules" name="right2" style="xhtml" />
    </div><!--/right2-->
    <div class="clearfix"></div>
    <?php endif; ?>

</div><!--/contentcontainer--> 
```

我刚刚在没有测试的情况下输入了这个，但它应该将#maincolumn 的宽度设置为 100%、75% 或 50%，具体取决于是否发布了 right1 和/或 right2。您还需要在 CSS 中将 #maincolumn 浮动到左侧。

# php - 在没有重定向的情况下使用 php 抛出 401 标头

> ID：15914130
> 
> 赞同：36
> 
> 时间：2013-04-09T23:07:20.693
> 
> 标签：php, http, header

我有一个 php 函数，它将错误的 IP 添加到 MySQL 表中。

然后，我网站上的每个页面都会检查该表并在找到匹配项时抛出 HTTP 401 标头。

```
if(badCrawler()){
    header("HTTP/1.1 401 Unauthorized");
    header("Location: error401.php");
} 
```

是否可以在不更改 url 的情况下执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-09T23:08:33.847

当然。就`exit`在您的 401 标头之后。`header("Location...")`根本不需要。

```
if(badCrawler()){
    header("HTTP/1.1 401 Unauthorized");
    exit;
} 
```

旁注：401 通常与身份验证请求结合使用。

从[规格](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

*响应必须包含一个 WWW-Authenticate 头字段（第 14.47 节），其中包含适用于所请求资源的质询。*

`403 Forbidden`使用拒绝访问可能会更好，或者即使`404 Not Found`您希望不良爬虫认为该页面不再存在：

```
header("HTTP/1.0 404 Not Found");
exit; 
```

## 发送内容

请注意，您的 404 响应可能会导致某些浏览器中出现空白页面，请参阅[此线程](https://stackoverflow.com/questions/437256/sending-a-404-error-in-php)中的最佳答案以获取有关发生这种情况的完整解释。基本上标题是工作的，但它只是由你来显示任何 HTML 内容）。

`exit`解决方案很简单，在声明之前回显您的内容（或包含单独的文件） 。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-16T08:53:38.553

知道这有点旧，但它在谷歌搜索“php，401s”时弹出。

这里的问题是当页面重定向到 error401.php 时*，该*页面将返回 200 OK，因为 error401.php 加载正常。如果你真的想要显示 401 页面，这个怎么样？

```
if(badCrawler()){
     header("HTTP/1.1 401 Unauthorized");
     include("error401.php");
     exit;
} 
```

# if-statement - 批处理文件如果错误

> ID：15914131
> 
> 赞同：0
> 
> 时间：2013-04-09T23:07:25.137
> 
> 标签：if-statement, batch-file, cmd, batch-processing

好的，所以我正在做一个项目，我正在做这件事，然后我到达了 confirmOne 中的 if 语句，它给了我“（此时不是预期的。”请帮忙！

许多流浪的“你到了这里！” 消息来自我试图调试它。我真的很快就需要这个。请帮忙。我也尝试删除部分，但它似乎仍然不起作用。如果您发现任何其他错误，请告诉我，因为我需要我能得到的所有帮助。谢谢！

```
:grabInput
echo Please enter the username of the user you wish to access.

REM - } End Echoing Information/Main Menu | Grab Input {

set /p result=
goto correctName

REM - } End Grab Input | Process Input {

:correctName
set /p input=%result%
goto confirmOne
:confirmOne
echo Got to confirmOne
pause
if %input%==[] (
  pause
  cls
  echo Oops! Looks like you didn't enter anything! Try Agian!
  echo.
  echo ................................................................................
  echo.
  goto grabInput
) ELSE (
  goto confirmTwo
)

:confirmTwo
echo Got to ConfirmTwo
pause
if %input%==~help (
  goto helpMenu
) ELSE (
  goto confirmThree
)

:confirmThree
echo Got to ConfirmThree
if %input%==~info (
  goto infoMenu
) ELSE (
  goto swapDrive
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:54:46.473

好吧，如果您没有为 输入任何内容`%input%`，那么您的`if`语句将看起来像`if ==[] (`。

你的`if`陈述应该看起来像`if [%input%] == [] (`

我还看到很多不必要的代码，你应该看看你的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:13:58.657

批处理**总是**在字符串上工作。

使用语句`if %input%==[]`，当 %input% 设置为 [nothing] （这是您尝试检测的内容）时，批量替换 [nothing] fo`%input%`并获取

```
IF ==[] ( 
```

并且很困惑，因为 '(' 不是比较运算符。

`[]`不是什么神奇的咒语。这是一种检测参数是否存在的旧方法，如果参数不存在，[%1] 将等于 []。当变量包含空格或其他一些字符时，它不起作用。

```
if "%var%"=="" is better
if not defined var is better still 
```

注意

```
set /p var= 
```

不会设置`var`为 [nothing] 只需按`enter`，它将`var`保持不变。

因此这

```
set var=something
set /p var= 
```

将离开`var`设置为`something`。您应该将其编码为

```
set "var="
set /p var="Some prompt "
if not defined var echo VAR is not defined 
```

如果行上有尾随空格，则周围的引号`var=`确保不设置为 [一些空格]。`var`

除此之外，顺序

```
goto somelabel
:somelabel 
```

（REM 线无关紧要）是多余的。

同样，在

```
if somecondition (goto somewhere) else (goto somewhereelse)
:somewhereelse 
```

`else`条件是多余的

Batch 仅将通知`:label`作为 a`GOTO`或 a的 DESTINATION `CALL`。否则将直接通过`:label`它发现的任何内容进行收费，就好像它们是评论声明一样。

# excel - 包含文本的范围内的 SumProduct

> ID：15914132
> 
> 赞同：1
> 
> 时间：2013-04-09T23:07:25.317
> 
> 标签：excel, excel-2010

我正在尝试在一个范围内使用 sumproduct 公式（例如，A2:B10），因为列 C =“Mike”中的相应单元格 - 我不断收到 #value 错误，因为在某些单元格中有文本A2:B10 范围。

我正在寻找 C 列中带有“Mike”的每一行中的数字总和（假设它是一个数字）。

我试过的公式：

*   =SUMPRODUCT(--(C2:C10="迈克"),A1:B10)
*   =SUMPRODUCT((C2:C10="迈克")*(A1:B10))
*   =SUMPRODUCT(A1:B10,C2:C10="迈克")

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:11:53.343

用 SUMPRODUCT 试试这个公式

`=SUMPRODUCT(A2:B10,(C2:C10="Mike")*ISNUMBER(A2:B10))`

或者您可以使用“数组公式”

`=SUM(IF(C2:C10="Mike",A2:B10))`

后一个公式需要用`CTRL`+ `SHIFT`+确认，`ENTER`以便在公式栏中的公式周围出现花括号

# three.js - 粒子绘制顺序

> ID：15914135
> 
> 赞同：1
> 
> 时间：2013-04-09T23:07:37.840
> 
> 标签：three.js

有谁知道如何解决以下问题？ ![在此处输入图像描述](https://i.stack.imgur.com/y2sXb.jpg)

红色只是一个带有着色器材质的平面（代表水）。我已经为水材质编写了一个自定义着色器，但它非常简单（我让它显示为红色）。从下图中可以看出，两个粒子系统似乎打乱了绘制顺序。

奇怪的是 - 如果我使用标准的三种材料作为水，比如 phong 或 lambert，那么问题就不会发生。我需要在着色器材质上更改一些定义/属性以防止这种情况发生吗？

非常感谢

# node.js - 是否可以修改流星使用的 mongo_client 参数？

> ID：15914138
> 
> 赞同：0
> 
> 时间：2013-04-09T23:08:10.113
> 
> 标签：node.js, mongodb, meteor

简而言之，使用 Python，我可以：

```
client.write_concern = { 'w': 1, 'j': True, 'fsync': True } 
```

为了：

1.  设置 mongo 客户端以在独立框上提供写入确认
2.  确认`mongod`实例已将数据写入磁盘日志
3.  在返回之前强制数据库到`fsync`所有文件

但无论如何我不认为用 Meteor 来做这件事。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:45:01.230

我认为默认情况下它已经这样做了：

如果你看到包裹`https://github.com/meteor/meteor/blob/master/packages/mongo-livedata/mongo_driver.js`

启用安全（这是为了确认写入）

```
var options = {db: {safe: true}}; 
```

# python - Python3 使用 re.match 检查密码是否包含某些字符

> ID：15914140
> 
> 赞同：0
> 
> 时间：2013-04-09T23:08:18.640
> 
> 标签：python, regex, match

我正在尝试返回用户输入的密码，如果它匹配`a-z`, `A-Z`, `0-9`, `_`，`-`否则将在 try 子句中执行 ValueError 。这是我的代码行，它似乎不起作用，因为它几乎允许 (?.,@#$%^*)

```
return re.match('^[A-Za-z0-9_-]*$',password) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:16:38.033

使用 Kleene 闭包，您可以使用空字符串作为正确的密码。您可以使用`+`特殊字符匹配一个重复的有效字符：

```
def validate(password):
    match = re.match('^[a-z0-9_-]+$', password, re.I)
    if match is not None:
        return password
    else:
        raise ValueError 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:12:59.623

# 大纲

使用集合和集合减法可能是一个更简单的解决方案。

# 代码

```
from string import ascii_letters, digits

PASSWORD_SET = set(ascii_letters + digits + "_-")

def has_only_password_letters(candidate):
    return not(set(candidate) - PASSWORD_SET) 
```

或者：

```
def has_only_password_letters(candidate):
    return all(c in PASSWORD_SET for c in candidate) 
```

# 测试

```
>>> def test_password(password):
...     if has_only_password_letters(password):
...         print "Okay: ", password
...     else:
...         print "Nuh-uh: ", password
... 
>>> test_password("asdasd123123")
Okay:  asdasd123123
>>> test_password("asdasd123123!!!")
Nuh-uh:  asdasd123123!!! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:43:56.380

这是使用的非正则表达式解决方案`isalnum`：

```
for c in password:
    if not (c.isalnum() or c in ['_', '-']):
        raise ValueError('Invalid character in password') 
```

# c++ - sleep() 导致分段错误

> ID：15914144
> 
> 赞同：3
> 
> 时间：2013-04-09T23:08:34.410
> 
> 标签：c++

我有一个带有头文件的动态库，如下所示：

```
#ifndef SRC_H
#define SRC_H

#include<time.h>

namespace test
{
    void sleep( int numsec );
}
#endif 
```

和一个源文件如下：

```
#include"src.h"

namespace test
{
    void sleep(int numsec)
    {
        sleep(numsec);        
    }
} 
```

我有一个只包含以下主文件的可执行文件

```
#include "linked/src.h"

int main() 
{
    test::sleep(3);    
} 
```

我得到

> 启动程序：/usr0/home/gschoenh/Dropbox/Code/cpp/scratch/main/app
> [启用使用 libthread_db 的线程调试]
> 使用主机 libthread_db 库“/lib/x86_64-linux-gnu/libthread_db.so.1”。
> 
> 程序收到信号 SIGSEGV，分段错误。
> 0x00007ffff7bd863c 在 test::sleep (numsec=3) at src.cpp:8
> 8 sleep(numsec);

谢谢您的帮助 ：）

PS：我花了很多时间试图自己解决这个问题。我自己解决了最后 100 个错误。所以请不要像“你 ^#*$(#($&%(#_. 花更多时间尝试自己做# *$&@* (#)@。”这样的火焰评论。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T23:10:59.757

```
void sleep(int numsec)
{
    sleep(numsec);        
} 
```

看起来像一个递归无限循环。除非您的编译器进行尾递归消除，否则可能会导致堆栈溢出。

如果假设这是对 POSIX`sleep`函数的调用，则它在`<unistd.h>`. 添加后，您应该可以这样称呼它`#include <unistd.h>`：

```
::sleep(numsec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:22:39.473

```
void sleep(int secs)
{
sleep(3);
} 
```

上面的代码导致无限递归。我修改了代码，例如：

```
#include <iostream>
#include <unistd.h>
void sleep(int secs)
{
using std::cout;
using std::endl;
cout << "Before sleep\n";
::sleep(3);
cout << "After sleep" << endl;
} 
```

对我来说很好，g++ 编译器版本 g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

同样根据**Linux**手册页[http://linux.die.net/man/3/sleep](http://linux.die.net/man/3/sleep)；睡眠原型是

```
unsigned int sleep(unsigned int secs) 
```

您还可以修改代码以将睡眠 (unistd.h) 的返回存储到一个虚拟对象中以解决冲突以及检查返回值（例如调用是否被信号中断）。

# msbuild - MSBuild 中的交叉连接项组

> ID：15914145
> 
> 赞同：5
> 
> 时间：2013-04-09T23:08:37.500
> 
> 标签：msbuild, itemgroup

鉴于这样的事情..

```
 <?xml version="1.0" encoding="utf-8"?>
    <Project DefaultTargets="test" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
        <ItemGroup>
            <ConfigFiles Include="*.config" />

            <DatabaseConfig Include="ABC">
                <Database>DB1</Database>
                <CsString>Database</CsString>
            </DatabaseConfig>

            <DatabaseConfig Include="DEF">
                <Database>DB2</Database>
                <CsString>Logging</CsString>
            </DatabaseConfig>
        </ItemGroup>

        <Target Name="test" >
            <!-- Some sort of join here (or somewhere)... -->
         <Message Text=" %(Combined.ConfigFile) %(Combined.Database) " />
        </Target> 
    </Project> 
```

我希望输出是这样的..（给定两个文件 one.config 和 two.config）

```
one.config DB1
two.config DB1
one.config DB2
two.config DB2 
```

（顺序不重要，只是两个 ItemGroup 的全笛卡尔积）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:36:30.563

这似乎是一个整洁的解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="test" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup>
        <ConfigFiles Include="*.config" />

        <DatabaseConfig Include="ABC">
            <Database>DB1</Database>
            <CsString>Database</CsString>
        </DatabaseConfig>

        <DatabaseConfig Include="DEF">
            <Database>DB2</Database>
            <CsString>Logging</CsString>
        </DatabaseConfig>
    </ItemGroup>

    <Target Name="test" >
        <ItemGroup>
            <Combined Include="@(DatabaseConfig)">
                <ConfigFile>%(ConfigFiles.Identity)</ConfigFile>
            </Combined> 
        </ItemGroup>
    <Message Text=" %(Combined.ConfigFile) %(Combined.Database) " />
    </Target> 
</Project> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T01:00:22.490

有一种方法可以通过对现有示例代码进行最少的更改来做到这一点。您可以将项目和项目中的[元数据组合](http://msdn.microsoft.com/en-us/library/bb651786.aspx)成一个新的“组合”项目，然后输出该“组合”项目。`ConfigFiles``DatabaseConfig`

要组合元数据，请使用[目标批处理](http://msdn.microsoft.com/en-us/library/ms171473%28v=vs.100%29.aspx)`DatabaseConfig`和为每个项目运行一次的批处理目标。然后你可以调用另一个目标来输出组合的元数据以获得你描述的输出。看看我对您的示例代码的扩展，看看这一切是如何完成的：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="test" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <ItemGroup>
    <ConfigFiles Include="*.config" />

    <DatabaseConfig Include="ABC">
      <Database>DB1</Database>
      <CsString>Database</CsString>
    </DatabaseConfig>

    <DatabaseConfig Include="DEF">
      <Database>DB2</Database>
      <CsString>Logging</CsString>
    </DatabaseConfig>
  </ItemGroup>

  <Target Name="test" DependsOnTargets="test_setup;test_output" >
    <!-- Logic here runs after targets listed in "DependsOnTargets". -->
  </Target>

  <!-- This will run once for each "DatabaseConfig" item. -->
  <Target Name="test_setup" Outputs="%(DatabaseConfig.Identity)">
    <PropertyGroup>
      <!-- Specify the Database for the current DatabaseConfig item -->
      <CurrentDb>%(DatabaseConfig.Database)</CurrentDb>
    </PropertyGroup>
    <ItemGroup>
      <!-- Add a new CombinedOutput item with each run, combining metadata. -->
      <CombinedOutput Include=" %(ConfigFiles.FileName)%(ConfigFiles.Extension) $(CurrentDb) " />
    </ItemGroup>
  </Target>

  <Target Name="test_output">
    <!-- Output the combined metadata from the CombinedOutput items -->
    <Message Text=" %(CombinedOutput.Identity) " />
  </Target>

</Project> 
```

示例中发生了什么：

1.  `test`目标现在只是作为调用其他两个目标来执行工作的一种方式：`test_setup`和`test_output`
2.  `test_setup`目标被批处理并创建新 项目`CombinedOutput`。
3.  `test_output`之后调用目标`test_setup` 以输出`CombinedOutput`项目的元数据。

输出`test_output`：

```
one.config DB1
two.config DB1
one.config DB2
two.config DB2 
```

# php - 如何通过 JQuery/Ajax 请求返回最新的 Mysql 条目

> ID：15914152
> 
> 赞同：0
> 
> 时间：2013-04-09T23:09:09.720
> 
> 标签：php, javascript, jquery, html, ajax

我正在尝试通过 ajax 提取 mysql 表的最新条目并将其显示为 div 内的 html 内容。我的 ajax 和 php 运行正常，我唯一的问题是我想查询新条目并在循环内按时间间隔堆叠结果，我遇到了两个问题：让数据表现得像一个正常的javascript 字符串，并让循环仅返回唯一条目。

更新.php 文件

```
$con=mysqli_connect("mydbhost.com","username","password","database_name");
// Check connection
if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con,"SELECT * FROM conversations");
$j = 0;
while($row = mysqli_fetch_array($result))
{
$carray[j] =   $row['comment'];
$j++;
}
$comment = (array_pop($carray));
echo $comment;
echo "<br>";
mysqli_close($con); 
```

JQuery Ajax 请求循环：

```
$(document).ready(function(e){
  var comment;
  function commentLoop() {
    comment = $('#testdiv').load('update.php');
    $('#testdiv').append(comment);
    setTimeout(commentLoop, 6000);
  }
  commentLoop();

  $(document).focus();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:14:17.103

问题是`SELECT * FROM conversations`你是否一直要求整张桌子——尽管你只拿最后一张。

您的代码需要记住已加载的评论，并且只获取比该评论更新的评论。

例如，假设您的主键是增量的，请执行`SELECT * FROM conversations WHERE convid > ?`. 替换`?`为已加载的最新评论。如果您是第一次加载，请执行`SELECT * FROM conversations`

您可以将使用请求参数显示的最后一个评论 id 传递到`update.php`. 我还建议以 JSON 格式返回数据，以便您可以返回评论和 id 的集合并轻松解析它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:01:36.080

`json`这将计算表中的评论并选择最后输入的评论，然后仅当接收到的计数低于表中的评论数时才将它们作为数据传递给 ajax ：

PHP：

```
if(isset($_GET['data']))
{   
    $con        = new mysqli('host', 'user', 'password', 'database');
    $init_count = $_GET['data'];
    $stmt1      = "SELECT COUNT(*) AS count FROM conversations";
    $stmt2      = "SELECT comment FROM conversations ORDER BY date_column DESC LIMIT 1";

    $total = $con->prepare($stmt1);
    $total->execute();
    $total->bind_result($count);
    $total->fetch();
    $total->close();    

    if( ($init_count != '') && ($init_count < $count) )
    {
        $lastComment = $con->prepare($stmt2);
        $lastComment->execute();
        $result = $lastComment->get_result();
        $row    = $result->fetch_assoc();
        $lastComment->close();

        $data = array(
                 'comment' => $row['comment'],
                 'count'   => $count
                 );
    }

    elseif($init_count == '')
    {
        $data = array(
        'comment' => '',
        'count'   => $count
        );
    }
    $pdo->close();
    echo json_encode($data);
} 
```

HTML：

```
<input type="hidden" id="count" value="" /> 
```

查询：

```
$(document).ready(function(e){

    function getComment(){
        var count = $('#test').val();
        $.ajax({
                type: 'get',
                url: 'update.php?data=' + count,
                dataType: 'json',
                success: function(data)
            {
            $('#count').val(data.count);
            if(data.comment) !=  $('#testdiv').html(data.comment);
            }
        });
    }
    getComment();
    setInterval(getComment, 6000);

}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T23:17:10.270

```
SELECT * FROM conversations order by insert_date desc limit 10 
```

insert_date 插入日期时间评论，我希望你有一个字段来存储，如果现在不添加它

# javascript - Ember 视图的 Twitter 提要问题

> ID：15914156
> 
> 赞同：2
> 
> 时间：2013-04-09T23:09:29.570
> 
> 标签：javascript, ember.js, single-page-application, twitter-feed

基本上在主页上，我有 Twitter Widget 生成的代码片段，当我第一次通过 url 加载页面时，会显示提要，现在我转到其他页面并再次返回主页，推特提要没有似乎显示。

我似乎没有找到这背后的原因，它与SPA有关吗？因为如果通过 URL 加载主页，它会加载，但是当我来回导航时它不会显示，
我只会看到`a`标签**Tweets by User**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:52:27.680

**这是我们在Twitter 设置**中创建小部件时的小部件代码（它被缩小了，我做了格式化以使其可读）

```
<script>
  !function(d,s,id){
    var js,fjs=d.getElementsByTagName(s[0],p=/^http:/.test(d.location)?'http':'https';
    if(!d.getElementById(id)){
      js=d.createElement(s);
      js.id=id;
      js.src=p+"://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script> 
```

如您所见，`if(!d.getElementById(id))`this 查找元素的存在，如果它不存在，则它将插入提要，在我的情况下，此元素存在，但是当我导航到某个页面并返回时，小部件未以某种方式呈现，所以我删除了 if 语句，一切正常，页面上只有一个小部件。

不是最好的解决方案，但将来有人会遇到这个问题，这是一种可能的解决方法！

# google-chrome - Chrome 背景尺寸没有被重复考虑

> ID：15914161
> 
> 赞同：0
> 
> 时间：2013-04-09T23:09:42.523
> 
> 标签：google-chrome, css, background-repeat

我有一个 25px x 25px 的 gif，并在 500x500 中重复 xy。我在它上面叠加了一些图像，正好是 25px。这在 Firefox 中运行良好，但 Chrome 似乎每 4 个图像将背景 gif xy 缩小 1 个像素！所以，我的叠加层不在 Chrome 中排列，但在 Firefox 中排列。我看到了一个 Chrome 表格错误，但这不是表格。

```
.grid2 {
float:left;
clear: both;
height:226px !important;
width:402px !important;
background:#000;
margin: 0px 0px 0px 0px;
padding: 0px 0px 0px 0px;
/*background-position: left;*/
background-image:url('../bitmaps/gifs/hole.gif');
/*background-size:25px 25px;*/
background-repeat: repeat;
} 
```

我试过没有明确的、重要的等。有什么想法吗？

# php - json_encode 和 highcharts

> ID：15914165
> 
> 赞同：2
> 
> 时间：2013-04-09T23:10:07.953
> 
> 标签：php, jquery, mysql, json, highcharts

我正在尝试使用 jQuery 在 PHP 和 MySQL 中制作图表，特别是使用 Highcharts 库，我已经设法使用 MySQL 数据库中的数据制作图表，但是这些数据显示了一些数据，如果它们在数据库中而不是其他数据，例如，产生 10 个结果的查询 5 个很好，但其他五个没有，我在网上做了一些研究，我知道这是由于我通过 json_encode 在 MySQL 中传递我的查询结果时出现的问题，我希望你们中的一些人可以告诉我，因为我有这个错误，或者我误用了 JSON，非常感谢。代码：index.php

```
 <html>
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
    <title>Incidencias</title>
    <script type="text/javascript" src="../js/jquery-1.7.1.min.js" ></script>
    <script type="text/javascript" src="../js/highcharts.js" ></script>
    <script type="text/javascript" src="../js/themes/grid.js"></script>
    <script type="text/javascript" src="../js/export.js"></script>
    <script type="text/javascript">
        var chart;
            $(document).ready(function() {
                var options = {
                    chart: {
                        renderTo: 'pieClientes',
                        defaultSeriesType: 'pie',
                        marginRight: 10,
                        marginBottom: 25
                    },
                    title: {
                        text: 'top 10\. Clientes con m\u00e1s incidencias',
                        x: -10  
                    },
                    subtitle: {
                        text: '',
                        x: -20
                    },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: <b>'+ this.y +' incidencias</b>';
                        }
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'top',
                        x: -10,
                        y: 100,
                        borderWidth: 0
                    },

                series: [{
                    type: 'pie',
                    name: 'Browser share',
                    data: []
                }]
            }

            $.getJSON("datosCliente.php", function(json) {
                options.series[0].data = json;
                chart = new Highcharts.Chart(options);
            });
            });
    </script>
</head>
<body>
    <div style="font-size: 12p; font-family: Calibri, Candara, Segoe, Segoe UI, Optima, Arial, sans-serif; align="left" >
        <h1>Dashboard incidencias SCI</h1>
    <div>
    <div id="pieClientes" style="width: 770px; height: 450x; margin: 0"></div>              
</body>
</html> 
```

datosCliente.php

```
<?php
    include"../clases/conexion.php";
    $result = mysql_query("SELECT 
                    clientes.cliente,
                    COUNT(incidencias.idIncidencia) AS nIncidencias
                    FROM incidencias
                    INNER JOIN clientes ON incidencias.idCliente = clientes.idCliente
                    GROUP BY incidencias.idCliente
                    ORDER BY nIncidencias DESC
                    LIMIT 0,10");
    $rows = array();
        while($r = mysql_fetch_array($result)) 
            {
                $row[0] = $r[0];
                $row[1] = $r[1];
                array_push($rows,$row);
            }

    //print json_encode($rows, JSON_PRETTY_PRINT);
    echo json_encode($rows, JSON_NUMERIC_CHECK | JSON_PRETTY_PRINT); 
    mysql_close($con);
?> 
```

例如，当我想在图表中显示 10 行数据库时，错误会显示此表单的结果：

```
 1st. row->  show me "slice" 
      2nd. row-> the registerok,
      3th. row->  show me "slice"
      4\. row-> the registerok,
      5\. row-> the registerok,
      6.row-> show me "slice"
     7.row->the registerok,
     8.row-> show me "slice"
     9.row->the registerok,
    10.row-> show me "slice" 
```

问题是，在图表（饼图）中显示正确的数据而不是其他数据，就好像某些记录或 tubiese 跳过了 5 个注册器的限制，而不是我不知道我错在哪里。:(

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T06:46:59.227

首先，我会尝试给数组元素一个值，而不是使用索引。给你的数组键一个名字。以及从您的编码中删除所有大写字母。我在 ipad 上，无法编码，但如果您有任何问题，请告诉我。

# wso2 - 将 WSO2 ESB 与 WSO2 IS 结合使用

> ID：15914166
> 
> 赞同：0
> 
> 时间：2013-04-09T23:10:08.083
> 
> 标签：wso2, identity, wso2esb

我正在考虑使用 WSO2 IS 的功能。但是，我已经在生产环境中部署了 WSO2 ESB，因此我更愿意将 IS 功能添加到已经存在的 ESB 环境中。

我能够从 IS 4.1.0 包开始，添加[Carbon 4.0.5 P2 存储库](http://dist.wso2.org/p2/carbon/releases/4.0.5/)（ESB 4.6.0 是基于该版本的 Carbon 构建的）并安装 ESB 4.6.0 功能，但我似乎无法做相反的事情，因为据我所知，WSO2 IS 基于 Carbon 4.0.6，但[没有 P2 回购](http://wso2.org/projects/carbon/provisioning-wso2-carbon-with-equinox-p2)。

将 IS 功能安装到 ESB（如果有）的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:55:36.627

我还没有尝试将 4.0.7 Identity Server 功能安装到 ESB 4.0.6。但我可以建议你不要这样做。原因是：Identity Server 4.1.0 对与旧版本不兼容的用户管理核心捆绑包进行了一些更改。因此，您可以尝试在 ESB 4.6.0 之上安装旧版本的身份服务器功能。Identity Server 4.0.0 与 Carbon 4.0.3 一起发布。因此，我认为您应该尝试使用[Carbon 4.0.3 p2 存储库](http://dist.wso2.org/p2/carbon/releases/4.0.3/)在 ESB 4.6.0 上安装身份功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:37:31.453

请使用 4.0.7 P2 存储库来获取基于 IS 4.1.0 的新 IS 功能。

[http://dist.wso2.org/p2/carbon/releases/4.0.7/](http://dist.wso2.org/p2/carbon/releases/4.0.7/)

# c - 指针未在 main 中更新

> ID：15914170
> 
> 赞同：0
> 
> 时间：2013-04-09T23:10:30.837
> 
> 标签：c, pointers, struct

我在另一个文件中有一个主程序调用一个函数`cbuf_update()`，该函数又调用`cbuf_sizeChange()` 这让我感到困惑：在内部`cbuf_update`，正确调用`cbuf_sizeChange`更新`cb_ptr`，但在 main.c 中，当我在.cb 中释放 cb1 时，它是垃圾`sizeChange()`。我无法将其设为静态，因为 main 中有可变数量的 cbuf。我该怎么办？我无法更改 的签名`cbuf_update()`。

结构定义：

```
typedef struct cbuf {
    unsigned int max;
    unsigned int start;
    unsigned int end;
    unsigned int size;
    quote *quotes;
} cbuf; 
```

从 main.c 调用：

```
cbuf *eur_jpy;
eur_usd = cbuf_init() ;
cbuf_update(eur_jpy, time, rate) ; 
```

其他文件中的相关方法：

```
cbuf * cbuf_init()
{
    //initialize the cbuf with malloc

    return cb1;
}

void cbuf_update(cbuf *cb_ptr, double rate)
{
    cb_ptr = cbuf_sizeChange(cb_ptr, 2);
}

cbuf *cbuf_sizeChange(cbuf *cb1, double factor)
{
        cbuf *cb2;
    quote *quotes;
    quotes = (quote *)malloc(cb1->max * factor * sizeof(quote));
    cb2 = (cbuf *)malloc(sizeof(*quotes) + 4 * sizeof(unsigned int));

        //Update quotes here(exluding it)

        cb2->size = cb1->size;
    cb2->end = cb1->size - 1;
    cb2->max = factor * cb1->max;
    cb2->start = 0;
    free(cb1->quotes);
    free(cb1);

    cb2->quotes = quotes;

    return cb2;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:14:58.160

这一点看起来不对：

```
void cbuf_update(cbuf *cb_ptr, double rate)
{
    cb_ptr = cbuf_sizeChange(cb_ptr, 2);
} 
```

它修改，这是您作为第一个参数`cb_ptr`传入的任何内容的本地副本。`cbuf_update()`

您可能想按照以下思路进行思考：

```
void cbuf_update(cbuf **cb_ptr, double rate)
{
    *cb_ptr = cbuf_sizeChange(*cb_ptr, 2);
} 
```

而不是调用`cbuf_update(something, rate)`call `cbuf_update(&something, rate)`。

# winforms - C1TrueDBGrid / 如何以编程方式确定单元格是否为只读

> ID：15914182
> 
> 赞同：0
> 
> 时间：2013-04-09T23:11:47.633
> 
> 标签：winforms, componentone

给定 C1TrueDBGrid 实例和单元格位置（行和列索引），我如何确定单元格是可编辑的还是只读的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T07:28:01.797

该查询已在[C1Forums](http://our.componentone.com/groups/topic/how-to-programatically-determine-if-a-cell-is-readonly/)上处理。

问候，莫希塔

# ruby - 发送请求时，Rails 3 ActiveResource 未在 xml 中转义 unicode

> ID：15914189
> 
> 赞同：0
> 
> 时间：2013-04-09T23:12:10.063
> 
> 标签：ruby, ruby-on-rails-3, activeresource, activesupport

我们最近搬到了 rails 3.2.13。我们使用 ActiveResource 来调用 Web 服务。ActiveResoure 将生成 xml 有效负载。我们注意到新的 xml 不会转义 unicode 字符。例如：

```
  <name> C:\Documents and Settings\All Users\testütestdev1.txt </name>

```

在 rails 2.3 中，它将转义 ü 到 ü ：

```
  <名称> C:\Documents and Settings\所有用户\testütestdev1.txt <名称>

```

经过一番调查。看起来这是由于 ActiveSuppport to_xml 方法没有转义 unicode 字符。有没有人遇到过这个问题并知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:24:44.457

你可以用`Rack::Utils`它

```
> Rack::Utils.escape("  <name> C:\Documents and Settings\All Users\testütestdev1.txt </name>")
#=> "++%3Cname%3E+C%3ADocuments+and+SettingsAll+Users%09est%C3%BCtestdev1.txt+%3C%2Fname%3E"

> Rack::Utils.unescape(_)
#=> "  <name> C:Documents and SettingsAll Users\testütestdev1.txt </name>" 
```

# c# - 实体框架 5：保存具有多个父关系的新子实体时出错

> ID：15914193
> 
> 赞同：2
> 
> 时间：2013-04-09T23:12:23.280
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5

对于工作中的项目，我创建了类似于以下内容的实体：

```
public class ObjectA
{
    public Guid ObjectAGUID { get; set; } // key
    public string Name { get; set; }
    public int Number { get; set; }
}

public class ObjectB
{
    public Guid ObjectBGUID { get; set; } //key
    public string Name { get; set; }
    public int Number { get; set; }
}

public class Note
{
    public Guid NoteGUID { get; set; } // key
    public Guid AssociationGUID { get; set; }
    public string Text { get; set; }
    public string NoteType { get; set; }
} 
```

ObjectA 和 ObjectB 都与 Note 具有一对多关系，其中 Note.AssociatedGUID 是 A 和 B 各自实体键的依赖属性。换句话说，A 和 B 可以有任意数量的 Note 实体与其中任何一个相关联。

**我的问题：**

当我在 Note.AssociatedGUID = ObjectA.ObjectAGUID 创建一个新的 ObjectA 和一个新的 Note 时，我在 DBContext.SaveChanges() 上收到以下错误：

```
Entities in 'Entities.Notes' participate in the 'ObjectBNote' relationship. 0 related 'ObjectB' were found. 1 'ObjectB' is expected. 
```

**沉思**

如果我想同时为 ObjectA 和 ObjectB 创建注释，是否需要创建单独的注释实体（例如 NoteA 和 NoteB）来执行此操作？如果是这样，这似乎是多余的。

或者，我是否需要在 Note 上为每个父实体设置一个单独的可为空的外键？虽然更易于管理，但这似乎也有点矫枉过正。

```
public class Note
{
    public System.Guid NoteGUID { get; set; }
    public System.Guid? ObjectAGUID { get; set; }
    public System.Guid? ObjectBGUID { get; set; }
    public string Text { get; set; }
    public string NoteType { get; set; }
} 
```

帮助？

# flash - 1120: 未定义属性 clickBt 的访问

> ID：15914194
> 
> 赞同：0
> 
> 时间：2013-04-09T23:12:23.953
> 
> 标签：flash, cs3

我正在尝试使用 Flash CS3 制作游戏，但我还是 CS3 的新手。
有人请帮助我。

在我的代码中，我遇到了这个错误：

> 第 17 1120 行：未定义属性 clickBt 的访问。

* * *

```
package  {
import flash.events.MouseEvent;

public class StartScreen {
    public var b:Bt;
    public var ref:main;

    public function StartScreen(r:main) {
        ref = r;
        startScreen();
    }

    public function startScreen(){
        b = new Bt();
        b.x = 200; b.y = 200;
        b.buttonMode =true;
        b.addEventListener(MouseEvent.CLICK,clickBt);
        ref.stage.addChild(b);
    } 
```

* * *

```
Class main

package  {

import flash.display.MovieClip;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;   

public class main extends MovieClip {
    var s:StartScreen;

    var bg:Bg;
    var player:Karma;
    var playerScale:int = 1;
    var playerAnim:String;
    var playerSpeed:int = 0;

    var isLeft:Boolean = false;
    var isRight:Boolean = false;
    var isStrike:Boolean = false;
    var isJump:Boolean = false;
    var isShot:Boolean=false;

    public function main() {
        loadStartScreen();

        bg = new Bg;
        addChild(bg);
        player = new Karma;

        //centraliza karma na tela
        player.y = (stage.stageHeight/2) + (player.height/2);
        player.x = stage.stageWidth/2;

        //insere karma na tela
        addChild(player);

        //eventos de teclado
        stage.addEventListener(KeyboardEvent.KEY_DOWN,kDown);       
        stage.addEventListener(KeyboardEvent.KEY_UP,kUp);       

        //evento ENTER_FRAME (looping do game)
        stage.addEventListener(Event.ENTER_FRAME,gLoop);    
    }
    function loadStartScreen(){
        s = new StartScreen(this);
    }
    public function kDown(e:KeyboardEvent){
        var code:int = e.keyCode;
        if(code == Keyboard.LEFT){
            isLeft = true;
        }
        if(code == Keyboard.RIGHT){
            isRight = true;
        }
        if(code == Keyboard.SPACE){
            isStrike = true;
                        }
        if(code == Keyboard.UP){
            isJump = true;
        }
}
    public function kUp(e:KeyboardEvent){
        var code:int = e.keyCode;
        if(code == Keyboard.LEFT){
            isLeft = false;
        }
        if(code == Keyboard.RIGHT){
            isRight = false;
        }
        /*if(code == Keyboard.SPACE){
            isStrike = false;
        }*/
        /*if(code == Keyboard.UP){
            isJump = false;
        }*/

}
    public function gLoop(e:Event){

        if(!isLeft && !isRight || isLeft && isRight){ 
                playerSpeed = 0;
                playerAnim = "Stand";
            }else if(isLeft){
                playerSpeed = -7;
                playerScale = -1;
                playerAnim = "Walk";
            }else if(isRight){
                playerSpeed = 7;
                playerScale = 1;
                playerAnim = "Walk";
            }if(isStrike){
                playerSpeed = 0;
                playerAnim = "Strike";
                if(player.anim.currentFrame == player.anim.totalFrames){
                    isStrike = false;                       

                }
            }if(isJump){

                playerAnim = "Jump";
                if(player.anim.currentFrame == 15){
                    isJump = false;

                }
                    }
            player.x += playerSpeed
            player.scaleX = playerScale;
            player.gotoAndStop(playerAnim);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:00:35.697

看起来`clickBt`是未定义的。创建`clickBt`函数，你应该是金子！

# digital-certificate - 证书签名

> ID：15914195
> 
> 赞同：1
> 
> 时间：2013-04-09T23:12:25.640
> 
> 标签：digital-certificate

我知道在 RSA 算法中，公钥用于加密只能使用私钥解密的数据。

当数字证书被签名时，证书的散列是使用 RootCA 的私钥签名的，并且在验证期间，公钥用于验证散列。在这种情况下，签名意味着加密。此外，sha1RSA 算法是用于签署证书的算法之一。

因此，用于加密的私钥和用于解密哈希的公钥？这可能使用 RSA 还是我理解错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T09:29:19.373

这是很合乎逻辑的。私钥只有所有者知道，公钥是每个人都知道的。

在进行异步加密时，重要的是每个人都可以生成加密消息（通过使用公钥），但只有接收者（私钥持有者）才能读取消息。

在进行数字签名时，重要的是每个人都可以验证签名（通过使用公钥），但只有创建者（私钥持有者）才能生成它。

# c - 用C读写多行数据文件

> ID：15914196
> 
> 赞同：2
> 
> 时间：2013-04-09T23:12:28.873
> 
> 标签：c, file, binary, decimal

我在从文件中读取和写入多行数据时遇到问题。问题是从文件中读取多行二进制并将其转换为十进制并将多行十进制写入新文件。我让程序将一行二进制转换为十进制没有问题，当我有多行时麻烦就来了。到目前为止，这是我的代码：

```
#include <stdio.h>
#include <string.h>
#define NULL 0

int main() {
  FILE *ptdata, *ptresult;
  char bin[32];
  int i, r = 0, len;
  ptdata = fopen("data.txt", "r");
  ptresult = fopen("result.txt", "w");
  if (ptdata == NULL) printf("Error cannot open file");
  else {
    while (fgets(bin, 32, ptdata) != NULL);
    len = strlen(bin);
    for (i = 0; i < len; i++) {
      r = r * 2 + (bin[i] == '1' ? 1 : 0);
    }
    printf("%d\n", r);
    fprintf(ptresult, "%d\n", r);
    fclose(ptdata);
    fclose(ptresult);
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:15:25.543

这是错误：

```
while(fgets(bin,32,ptdata)!=NULL); 
                               //^^^You have semicolon 
                              //here which ends the while loop 
```

您应该执行以下操作：

```
 while(fgets(bin,32,ptdata)!=NULL){
    len = strlen(bin);
    r = 0 ;
    for(i = 0; i < len; i++)
    {
       r = r * 2 + (bin[i] == '1' ? 1 : 0);
    }

    printf("%d\n",r);
    fprintf(ptresult,"%d\n",r);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:15:06.450

您的 while 循环已过早终止

```
while(fgets(bin,32,ptdata)!=NULL);
                                ^^^ 
```

# python - ZODB pool_size 的合理设置

> ID：15914198
> 
> 赞同：2
> 
> 时间：2013-04-09T23:12:37.470
> 
> 标签：python, connection-pooling, zodb

在多线程 Web 应用程序`pool_size`的调用中，合理的默认值是什么？`ZODB.DB`

即使我是唯一一个浏览 db-interacting 处理程序的人，保留实际的默认值也会`7`给我一些 connection 。`WARNING`是否可以设置一个过高的数字？哪些因素会影响决定将其设置为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:35:25.693

池大小只是一个“准则”；当您超过该大小时，将记录警告；如果您要使用*双倍*的连接数，`CRITICAL`则会注册一条日志消息。这些表明您*可能*在应用程序中使用了太多连接。

当您关闭连接时，池将尝试将保留的连接数减少到池大小。

您需要将其设置为应用程序中的最大线程数。对于 Tornado，我认为它使用异步事件而不是几乎完全使用线程，这可能更难确定；如果在 Tornado 中配置了最大并发连接数，则需要将池大小设置*为该*数字。

不过，我不确定当您的应用程序扩展到数百或数千个并发连接时 ZODB 将如何执行。到目前为止，我只将它与分布在多个进程甚至机器上的最多 100 个左右的并发连接一起使用（使用 ZEO 或 RelStorage 跨这些进程为 ZODB 提供服务）。

我会说，如果这些连接中的大多数只读取，你应该没问题；就可扩展性而言，它同时在同一个对象上写入，这是 ZODB 的弱点。

# java - 如何在 Netbeans JavaDB 中使用 SQL RANDOM() 函数

> ID：15914204
> 
> 赞同：2
> 
> 时间：2013-04-09T23:12:56.657
> 
> 标签：java, sql, netbeans-7, javadb

我需要在 Netbeans 7.2 的小型本地 JavaDB 中执行 SQL 调用，以从数据库中提取单个随机行。

```
SELECT * FROM JAVA2.FORTUNES ORDER BY RANDOM() 
```

到目前为止，我已经使用 RANDOM() 函数让它工作，但我无法让 LIMIT 1 工作，它返回一个语法错误。

我知道每个数据库都有不同的方法来做到这一点，我无法弄清楚它是如何专门为 Netbeans 中的这个 JavaDB 工作的（我让它在不同语法的单独的 Oracle DB 中工作）。

是否有使用上述语法返回单行的 Java DB 特定或 ANSII 标准方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:29:23.487

Java DB 使用 SQL 的 OFFSET/FETCH 语法来获得此功能。

假设 RANDOM() 对它们进行正确排序，则以下语法应该有效：

```
SELECT * FROM JAVA2.FORTUNES ORDER BY RANDOM() OFFSET 0 ROWS FETCH NEXT 1 ROW ONLY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:32:10.480

来自[http://db.apache.org/derby/faq.html#limit](http://db.apache.org/derby/faq.html#limit)

> Derby 不支持 LIMIT 语法。但是，Derby 10.4 添加了 ROW_NUMBER 函数，而 Derby 10.7 添加了 OFFSET 和 FETCH 子句。
> 
> Derby 还支持通过 JDBC 限制查询返回的行数。例如，要获取大表的前 5 行：
> 
> ```
> Statement stmt = con.createStatement();  
> stmt.setMaxRows(5); 
> ResultSet rs = stmt.executeQuery("SELECT * FROM myLargeTable"); 
> ```

# c++ - C/C++：在程序运行期间，诸如`int``double`之类的内置对象是否总是停留在内存中的确切位置？

> ID：15914211
> 
> 赞同：2
> 
> 时间：2013-04-09T23:13:49.153
> 
> 标签：c++, memory, types, built-in

**不是**动态定义的内置类型在程序执行期间是否总是留在同一块内存中？

如果这是我应该了解的事情，我该如何进行检查？

IE

```
int j = 0;
double k = 2.2;
double* p = &k; 
```

如果 C/C++ 程序是高度内存密集型程序，系统架构或编译器是否会围绕所有这些对象移动？

注意：我不是在谈论容器，例如`std::vectors<T>`. 这些显然可以在某些情况下重新分配，但这也是动态的。

* * *

~~**附带问题：** 下面的场景显然会引起一些人的注意。举个例子，这个指针在程序执行期间总是有效吗？~~

*由于我的无知，这个附带问题已经过时了！*

```
struct null_deleter
{
    void operator() (void const *) const {};
};

int main()
{
    // define object
    double b=0;

    // define shared pointer
    std::shared_ptr<double> ptr_store;
    ptr_store.reset(&b,null_deleter()); // this works and behaves how you would expect
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T23:20:07.767

在抽象机器中，对象的地址在对象的生命周期内不会改变。

（这里的“对象”一词并不是指“面向对象”的任何东西；“对象”只是一个存储区域。）

这实际上意味着程序必须表现得*好像*对象的地址永远不会改变。编译器可以生成代码来玩它喜欢的任何游戏，包括移动对象或根本不将它们存储在任何地方，只要此类游戏不会以违反标准的方式影响可见行为。

例如，这个：

```
int n;
int *addr1 = &n;
int *addr2 = &n;
if (addr1 == addr2) {
    std::cout << "Equal\n";
} 
```

必须打印“Equal”——但一个聪明的优化编译器可以合法地消除除输出语句之外的所有内容。

ISO C 标准在第 6.2.4 节中明确说明了这一点：

> 对象的*生命周期*是程序执行期间保证为其保留存储的部分。一个对象存在，有一个不变的地址，并在其整个生命周期中保留其最后存储的值。

带有（非规范性）脚注：

> 术语“恒定地址”意味着在可能不同时间构造的指向对象的两个指针将比较相等。在同一程序的两次不同执行期间，地址可能不同。

我在 C++ 标准中没有找到类似的明确声明；要么我错过了它，要么作者认为它太明显而无法说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:16:08.720

编译器可以随意做任何事情，只要它不影响可观察的程序行为。

首先，考虑到局部变量甚至可能不会被放入内存（它们可能只存储在寄存器中，或者完全优化掉）。

因此，即使在您获取局部变量地址的示例中，这并不意味着它**必须**位于内存中的固定位置。这取决于你继续用它做什么，以及编译器是否足够聪明来优化它。例如，这个：

```
double k = 2.2;
double *p = &k;
*p = 3.3; 
```

可能相当于：

```
double k = 3.3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T23:19:29.183

是和不是。

全局变量将保留在同一个位置。

每次调用和返回函数时，堆栈变量（在函数内部）都会被分配和释放。例如：

```
void k(int);
void f() {
    int x;
    k(x);
}
void g() {
    f();
}
int main() {
    f();
    g();
} 
```

在这里，第二次`f()`调用，它将`x`在不同的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:25:13.603

这个问题有几个答案，取决于你没有提到的因素。

*   如果一个数据对象的地址从未被取走，那么符合标准的 C 程序就无法判断它是否*有*地址。它可能只存在于寄存器中，或者被完全优化出来；如果它确实存在于内存中，它不需要有一个固定的地址。
*   具有“自动”*存储持续时间*的数据对象（第一个近似值，未用 声明的函数局部变量`static`）在每次调用其包含函数时创建，并在退出时销毁；在任何给定时间，它们可能有多个副本，并且不能保证一个的新实例与旧实例具有相同的地址。
*   我们将`&`操作员称为“获取数据对象的地址”，但从技术上讲，这不是它的作用。它构造一个*指向*该数据对象的指针。指针是 C 标准中的不透明实体。如果您检查位（通过转换为整数），则结果是实现定义的。而且，如果您连续两次检查这些位，则不能保证您得到相同的数字！一个假设的垃圾收集 C 实现*可以*跟踪指向每个数据的所有指针，并在移动堆时根据需要更新它们。（人们实际上已经尝试过了。它往往会破坏不遵守规则的程序。）

# sql - SQL 在不应该的情况下评估为 true

> ID：15914213
> 
> 赞同：0
> 
> 时间：2013-04-09T23:14:01.107
> 
> 标签：sql

我有这个 SQL 代码

```
$passwordQuery = mysql_query("UPDATE `Medarbejder` SET `password` = '$password' WHERE `login` = '$login' AND `password` = '$oldPassword'")or die(mysql_error());
            if($passwordQuery){ 
```

而且无论 $oldPassword 是否等于`password`或不等于，它的计算结果都是 true，这很烦人，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:18:05.320

我认为`mysql_query`无论是否更新一行都会返回 TRUE。根据手册所述，它只会在错误时返回 FALSE

> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

我认为你想要的是检查更新计数——除了错误检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:20:47.167

如果要检查受影响的行数，可以`mysql_affected_rows`在 PHP 代码中使用。

[以供参考](http://php.net/manual/en/function.mysql-affected-rows.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:16:48.647

我可能错了，但是即使没有找到记录，您的更新也不会失败，他只会什么都不更新！:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:28:00.793

像这样做

```
$passwordQuery = mysql_query("UPDATE `Medarbejder` SET `password` = '$password' WHERE `login` = '$login' AND `password` = '$oldPassword'")or die(mysql_error());
        if(mysql_affected_rows()==0){
        //alternative to false return of query
        }
        else if(mysql_affected_rows()>0){
        //alternative to true return of query
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T23:20:24.493

[mysql_affected_rows](http://php.net/manual/en/function.mysql-affected-rows.php)将在更新后返回受影响的行数。

# c++ - C++ 错误：将 'char*' 分配给 'char [2] 时的类型不兼容

> ID：15914220
> 
> 赞同：11
> 
> 时间：2013-04-09T23:15:02.537
> 
> 标签：c++, error-handling, char

我的构造函数有点问题。在我的头文件中，我声明：

```
char short_name_[2]; 
```

*   和其他变量

在我的构造函数中：

```
Territory(std::string name, char short_name[2], Player* owner, char units);
void setShortName(char* short_name);
inline const char (&getShortName() const)[2] { return short_name_; } 
```

在我的 cpp 文件中：

```
Territory::Territory(std::string name, char short_name[2], Player* owner, 
                     char units) : name_(name), short_name_(short_name), 
                    owner_(owner), units_(units)
{ } 
```

我的错误：

> Territory.cpp：在构造函数“Territory::Territory(std::string, char*, Player*, char)”中：Territory.cpp:15:33：错误：将“char*”分配给“char [ 2]'</p>

我已经想通了，`char[2] <=> char*`但我不确定如何处理我的构造函数和 get/setter。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T00:15:08.430

C++ 中的原始数组有点烦人且充满危险。这就是为什么除非你有很好的理由你应该使用`std::vector`or `std::array`。

首先，正如其他人所说，`char[2]`与 不一样`char*`，或者至少通常不一样。`char[2]`是一个大小为 2 的数组，`char`并且`char*`是指向 a 的指针`char`。他们经常感到困惑，因为数组会在需要时衰减到指向第一个元素的指针。所以这有效：

```
char foo[2];
char* bar = foo; 
```

但反之则不然：

```
const char* bar = "hello";
const char foo[6] = bar; // ERROR 
```

更令人困惑的是，在声明函数参数时，`char[]`等效于`char*`. 所以在你的构造函数中，参数`char short_name[2]`真的是`char* short_name`.

数组的另一个怪癖是它们不能像其他类型一样被复制（这是为什么函数参数中的数组被视为指针的一种解释）。所以例如我*不能*做这样的事情：

```
char foo[2] = {'a', 'b'};
char bar[2] = foo; 
```

相反，我必须遍历 的元素`foo`并将它们复制到`bar`中，或者使用一些为我执行此操作的函数，例如[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)：

```
char foo[2] = {'a', 'b'};
char bar[2];
// std::begin and std::end are only available in C++11
std::copy(std::begin(foo), std::end(foo), std::begin(bar)); 
```

因此，在您的构造函数中，您必须手动将元素复制`short_name`到`short_name_`：

```
Territory::Territory(std::string name, char* short_name, Player* owner, 
                     char units) : name_(name), owner_(owner), units_(units)
{ 
    // Note that std::begin and std::end can *not* be used on pointers.
    std::copy(short_name, short_name + 2, std::begin(short_name));
} 
```

正如您所看到的，这一切都非常烦人，因此除非您有充分的理由，否则您应该使用`std::vector`原始数组而不是原始数组（或者在这种情况下可能`std::string`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:45:41.713

当一个函数想要一个数组作为参数时，它会得到一个指向数组第一个元素的指针。该指针不能用于初始化数组，因为它是指针，而不是数组。

您可以编写接受对数组的*引用作为参数的函数：*

```
void i_dont_accept_pointers(const char (array&)[2]) {} 
```

这里的问题是，这个数组引用不能用于初始化另一个数组。

```
class Foo {
  char vars[2];
  Foo(const char (args&)[2])
    : vars(args)  // This will not work
  {}
}; 
```

引入 C++ 11`std::array`以消除数组的这个问题和其他问题。在旧版本中，您必须遍历数组元素并单独复制它们或使用`std::copy`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-19T10:18:08.793

C++ 作为 C 持有 C 的大部分规则。

在 C 的情况下，总是使用 char* 来传递数组，因为 C 是这样看待它的。`sizeof (short_name_)`传递给函数时，偶数将为 8 或 4。现在，变量中有 2 个字节的空间`short_name_`

构造函数为两个字节分配了内存，`short_name_`您需要将字节复制到其中或使用 char * 指针并假设它的大小为 2。

**Expert C Programming: Deep C Secrets**的第 9 章很适合阅读以理解它。

为简单起见，这可能是 C 风格的代码。

```
#include <stdio.h>
#include <iostream>
using namespace std;
class Territory {
    private:
        string s;
        char c[2];
    public:
    Territory(std::string a, char b[2] /*visualize as char *b*/) {
        s  = a;
        c[0] = b[0]; //or use strcpy
        c[1] = b[1];
    }
    void PrintMe() {
        printf ("As string %s as char %c or %s\n",this->s.c_str(), c[0],c);
    }
};

main () {
    Territory a("hello", "h");
    a.PrintMe();
} 
```

# java - 用java读取文本文件

> ID：15914221
> 
> 赞同：0
> 
> 时间：2013-04-09T23:15:02.783
> 
> 标签：java, string, parsing, arraylist

我正在编写一个“移至前面”编码器，它读取给定的文件，然后将文件解析为列表。它适用于编码，但它只适用于只有一行的文件，我认为问题出在 while 循环中。

这是代码：

```
while ((line = br.readLine()) !=
       null) // While the line file is not empty after reading a line from teh text file split the line into strings
{
  splitArray = line.split(" ");
}

for (int i = 0; i <= splitArray.length - 1;
     i++) // for every string in the array test if it exists already then output data accordinly
{
  if (FirstPass.contains(splitArray[i])) {
    System.out.println(FirstPass.lastIndexOf(splitArray[i]));
    FirstPass.addFirst(splitArray[i]);
    FirstPass.removeLastOccurrence(splitArray[i]);
  } else if (!FirstPass.contains(splitArray[i])) {
    FirstPass.addFirst(splitArray[i]);
    System.out.println("0 " + splitArray[i]);
  }
}

System.out.println(" ");
for (String S : FirstPass) {
  System.out.println(S);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:18:22.800

您解析 splitArray 的代码在 while 循环之外 .. 所以只有最后一行会被处理。

要处理每一行，请将整个`for ()`块放在 while 循环中。

```
while((line = br.readLine()) != null) // While the line file is not empty after reading a line from teh text file split the line into strings
{
    splitArray = line.split(" ");

    for(int i = 0; i <= splitArray.length - 1; i++)     // for every string in the array test if it exists already then output data accordinly
    {
        //..........
    } // end for
} // end while 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:18:28.917

错误位置的大括号：

```
while((line = br.readLine()) != null) 
{
    splitArray = line.split(" ");
}  // This } shouuldn't be here... 
```

# java - JVM 是否允许使用 struct 创建语言？

> ID：15914235
> 
> 赞同：3
> 
> 时间：2013-04-09T23:16:40.670
> 
> 标签：java, struct, garbage-collection

JVM 是否允许使用 struct 创建语言？我的意思是与 C#（和 IL）具有相同的结构。该结构应该是自定义值类型，因此不是垃圾收集器的目标。不要误会我的意思，我不希望 Java 和 C# 一样——我只是想从完全理解 Java 和 JVM 设计的方式和原因的人那里学到一些教训。没有它的动机是什么？Java 社区或 Sun/Oracle 在任何时候都考虑过引入 struct 吗？你知道它周围故事的链接吗？

**结论：** 所以不是问这个问题的正确地方。因为大约 20 年前没有人与那个决定有关。尽管一些合理的 SO 用户在下面提供了以下可能的原因，即没有按顺序出现自定义值类型（结构）：

1.  自定义值类型会影响 JVM 实现的简单性。
2.  值类型违反了 Java 试图遵循的 OOP 原则。
3.  学习曲线。Everything-is-a-reference-object 语言更容易学习。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:31:36.230

我认为理论上*可以*在 Java中引入类似结构的类型，*而不是*垃圾收集类型。但是，由于 Java 没有指针（并且永远不会有），所以类似结构的东西应该总是按值传递，就像原语一样。

主要优点是创建这种值类型的大型数组，而不需要数组的每个项目都有自己的生命周期（和垃圾收集负担）。

您可能会发现这个 10 年前关于在 Java 中引入结构（琐碎数据对象）的讨论很有趣：[http ://bugs.sun.com/view_bug.do?bug_id=4820062](http://bugs.sun.com/view_bug.do?bug_id=4820062)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:25:59.873

除了原语，Java 没有类似于 C# 的“值类型”。我只能猜测为什么它是这样设计的；可能是为了简单。出于性能原因，基元不太可能是对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T23:35:04.430

就自定义语言而言，我强烈怀疑 JVM 会以任何方式阻止这种情况。它真的没有帮助。您必须将结构类型的局部变量转换为一堆名称损坏的原始类型的局部变量，处理（取消）装箱以将它们存储在集合中并与 Java 库交互，并且通常提出并实现所有值-从头开始类型语义

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T23:29:06.260

C`struct`可与 Java 相媲美`Objects`。在 a中，您可以将几个*复杂*或*原始*`struct`数据类型打包成一个*复杂*数据类型，在 Java 中是 a或.***`class``Object`***

 ***现在，您要使用该对象的方式取决于您。你可以用公共变量打包它，或者你可以给它一些更多的*函数*/*方法*来处理这些变量。这一切背后的整个想法是（与 C 语言不同）Java 从一开始就被创建为一种面向对象的语言（好吧，Java 中有一些小方面并不是真正的 OO 的一部分，例如原语 boolean、int 等。 .但那是另一个故事）。

而关于`garbage collector`，那是 Java 中*普通*程序员不应该（必须）担心的事情。对象是否以及何时受到垃圾收集取决于运行时。（虽然可以强制垃圾回收，但不是很实用）。***

# calayer - 如何使用 renderInContext: 与 CGBitmapContextCreate 和 Retina？

> ID：15914237
> 
> 赞同：5
> 
> 时间：2013-04-09T23:16:58.577
> 
> 标签：calayer, retina-display, cgbitmapcontext

我手动创建了一个 CGBitmapContext：

```
bitmapContext = CGBitmapContextCreate( myImageData, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big ); 
```

并为其绘制一个图层：

```
[self.myView.layer renderInContext:bitmapContext]; 
```

但是，在 Retina 上，我的图层仅渲染为原始大小的一半。

在 上设置`contentScaleFactor`属性`UIView`不会改变任何东西。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T23:26:17.250

当然，在我问这个问题的那一刻，我就得到了答案。只需这样做：

```
float scale = self.myView.contentScaleFactor;

CGContextScaleCTM(context, scale, scale);

[self.myView.layer renderInContext:context]; 
```

# java - 如何在 JOptionPane 中打印一组 for 循环数组？

> ID：15914239
> 
> 赞同：0
> 
> 时间：2013-04-09T23:17:18.283
> 
> 标签：java, swing, joptionpane

这是我打印输入程序信息的原始代码，它旨在创建一个漂亮的小表格，左侧显示导师姓名，右侧显示他们的工资，底部显示所有人的总工资：

```
System.out.println("Tutor Stipend Report");
System.out.println("Tutors\t\tPay");
System.out.println("------\t\t---");
for(int out=0;out<numOfTutors;out++) {
    System.out.println(names[out]+"\t\t"+stipend[out]);
}
System.out.println("--------");
System.out.println("Total: " +sum); 
```

现在我需要打开这段代码来显示，`JOptionPane`这就是我卡住的地方。我想保持和以前一样的表格设置，但每次我去显示信息时，假设我需要显示 3 个导师，它只会出现 3 个`JOptionPane`对话框，而不是在一个对话框中打印 3 个导师。

我意识到问题是因为所有信息都在 for 循环中，但是我该如何解决这个问题，以便我可以显示指定数量的导师并像`System.out.println`解决方案一样在一个对话框上付费？

```
for (int out=0;out<numOfTutors;out++) {
    JOptionPane.showMessageDialog(null, 
                                "Tutor Stipend Report" + 
                              "\nTutors        Pay" + 
                              "\n---------         -----" + 
                              "\n"+names[out]+"               "+stipend[out] + 
                              "\n--------" + 
                              "\nTotal: " +sum);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:24:30.553

您需要将调用移到-loop`JOptionPane.showMessageDialog`之外。`for`

退房[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)。这对这种事情很有帮助：

```
StringBuilder sb = new StringBuilder();
sb.append("There are ").append(count).append(" people in the following list:\n");
for (int i = 0; i < count; i++) {
    sb.append("Person #").append(count).append('\n');
}
JOptionPane.showMessageDialog(null, sb.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:42:18.600

问题是由于您在`JOptionPane.showMessageDialog`循环内调用，它将执行 3 次。您应该做的是将要打印的字符串连接到一个字符串对象中，如下所示：

```
String toBeDisplayed = "";
for(int out=0;out<numOfTutors;out++) {
   toBeDisplayed += /*.. add your string here.. */;
}

JOptionPane.showMessageDialog(null, toBeDisplayed); 
```

请注意，使用 += 连接字符串并不是最有效的做法——考虑使用 StringBuilder / StringBuffer

# rubygems - 使用 ruby gems s3 源的缺点？

> ID：15914240
> 
> 赞同：1
> 
> 时间：2013-04-09T23:17:19.023
> 
> 标签：rubygems, bundler

使用以下版本时，安装新 gem 的速度*非常*慢。

```
$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.3.0]

$ gem -v
2.0.3

$ bundle -v
Bundler version 1.3.5 
```

我注意到通过将 bundler 直接指向 s3 存储可以实现相当令人难以置信的访问 api 的加速，从而避免了 302 重定向：

1.  第一行`Gemfile`设置为`source 'https://rubygems.org'`

    ```
    $ time bundle update
    bundle update  5.16s user 0.21s system 2% cpu 3:19.20 total 
    ```

2.  使用`source 'https://s3.amazonaws.com/production.s3.rubygems.org'`

    ```
    $ time bundle update
    bundle update  22.70s user 0.44s system 37% cpu 1:01.68 total 
    ```

以上数字来自 2008 年中期 macbook pro 上新生成的 rails 4 应用程序包。实际安装 gems 时观察到的差异比仅更新锁定文件时更明显。

s3 源有什么缺点？

由于它始终快*几分钟*，有什么理由不使用它吗？

# sql - 在Access中，如何显示每行中值最高的列的id和列名？

> ID：15914247
> 
> 赞同：1
> 
> 时间：2013-04-09T23:17:46.327
> 
> 标签：sql, ms-access, max

**这是示例表：**

```
Table1
| id | one | two | three | four | five | six |
|--------------------------------------------|
|   1|   11|    7|      4|     9|     4|    1|
|   2|   12|    9|      3|     8|    19|   32|
|   3|   18|    7|      7|     1|    24|    2|
|   4|    9|    1|     15|     6|     6|    4| 
```

**目前我在表上使用的查询是这样的：**

```
SELECT id, Max(colx) AS colWithMax
FROM (
   SELECT id, one AS Colx From Table1 UNION ALL
   SELECT id, two AS Colx From Table1 UNION ALL
   SELECT id, three AS Colx From Table1 UNION ALL
   SELECT id, four AS Colx From Table1 UNION ALL
   SELECT id, five AS Colx From Table1 UNION ALL
   SELECT id, six AS Colx From Table1
)
group by id; 
```

**我得到的输出是：**

```
ID | colWithMax
-- | ---------
 1 |     11
 2 |     32
 3 |     24
 4 |     15 
```

# 我的问题是如何更改我的查询，以便我的输出将显示列名而不是列中的值？

**根据示例表，所需的输出将是：**

```
ID | colWithMax
-- | --------- 
 1 |   one
 2 |   six
 3 |   five
 4 |   three 
```

*注意：我对sql有基本的了解，之前从未使用过ms-access。请在您的回答中尽可能描述性。谢谢你。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:40:31.533

您可以尝试以下查询 -

```
select id, colname from (   
SELECT id, one AS Colx, 'one' Colname From Table1 UNION ALL
   SELECT id, two AS Colx, 'Two' Colname From Table1 UNION ALL
   SELECT id, three AS Colx, 'Three' colname From Table1 UNION ALL
   SELECT id, four AS Colx, 'four' colname From Table1 UNION ALL
   SELECT id, five AS Colx, 'Five' colname From Table1 UNION ALL
   SELECT id, six AS Colx, 'Six' colname From Table1
) as t1
where exist ( select 1 from (
SELECT id, Max(colx) AS colWithMax
FROM (
   SELECT id, one AS Colx, 'one' Colname From Table1 UNION ALL
   SELECT id, two AS Colx, 'Two' Colname From Table1 UNION ALL
   SELECT id, three AS Colx, 'Three' colname From Table1 UNION ALL
   SELECT id, four AS Colx, 'four' colname From Table1 UNION ALL
   SELECT id, five AS Colx, 'Five' colname From Table1 UNION ALL
   SELECT id, six AS Colx, 'Six' colname From Table1
)
group by id) as t2
where t1.id = t2.id
and  t1.colx = t2.colx)
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:46:00.160

只是为了简化一些事情，把它移到它自己的查询中（把它叫做你喜欢的名字，但我会`Qry`为了这个答案的目的调用它。正如你所看到的，我已经为列的名称添加了一个列，其中的值来了。

```
SELECT id, val, col
FROM (
    SELECT id, one AS val, 'one' AS col FROM Table1 UNION ALL
    SELECT id, two AS val, 'two' AS col FROM Table1 UNION ALL
    SELECT id, three AS val, 'three' AS col FROM Table1 UNION ALL
    SELECT id, four AS val, 'four' AS col FROM Table1 UNION ALL
    SELECT id, five AS val, 'five' AS col FROM Table1 UNION ALL
    SELECT id, six AS val, 'six' AS col FROM Table1
) AS Qry 
```

在将使用上面定义的第二个/新查询中，执行类似的操作

```
SELECT q1.id, q1.val, q1.col  AS colWithMax
FROM Qry q1
LEFT JOIN Qry q2 ON q2.id = q1.id
                AND q2.val > q1.val
WHERE q2.id IS NULL 
```

这个想法是只有没有大于它们的数字的值才会有连接，因此最大（或最大数字）不应该有“连接值”，这些由`q2.id IS NULL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:54:24.613

这是另一个没有使用多个查询的旋转`if`：

```
select  id,
  if (one > two && one > three && one > four && one > five && one > six, 'one',  
  if (two > three && two > four && two > five && two > six, 'two',
  if (three > four && three > five && three > six, 'three',
  if (four > five && four > six, 'four',
  if (five > six, 'five', 'six'))))) col
from Table1 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/17b42/2)

这实际上使用`if`where access uses`iif`和 this uses `&&`where I think access uses `AND`，但重点是，您不需要`group by`在查询中使用聚合和 a 。

这是我对访问等效项的尝试：

```
select  id,
  iif (one > two AND one > three AND one > four AND one > five AND one > six, 'one',  
  iif (two > three AND two > four AND two > five AND two > six, 'two',
  iif (three > four AND three > five AND three > six, 'three',
  iif (four > five AND four > six, 'four',
  iif (five > six, 'five', 'six'))))) col
from Table1 
```

# jquery - addClass 和 removeClass 转换 - Firefox

> ID：15914261
> 
> 赞同：4
> 
> 时间：2013-04-09T23:18:35.607
> 
> 标签：jquery, html, css, transitions

**编辑：**解决了文本问题，仍然需要 Firefox 转换的帮助。

向下滚动页面后尝试使用最小菜单。该代码在它正在转换的意义上起作用，但是它并没有像我希望的那样转换。有两个问题：

1.  ~~在 Chrome 中，只有在其他所有内容都移动后，文本才会“滑动”到中间。~~
2.  在 Firefox 中，图像不会过渡/淡出，它只是简单地从右侧“打开”。

在理想情况下，我希望图像能够像在 Chrome 中那样进行动画处理，但我希望文本像在 Firefox 中那样滑动到位。

我在 Stackoverflow 和其他地方查找了其他问题，但似乎没有一个解决方案可以解决 Webkit 和 Moz 之间的差异。

[jsFiddle](http://jsfiddle.net/8pFWj/1/)的问题。

尝试这个：

```
$(document).on("scroll",function(){
        if($(document).scrollTop()>100){ 
            $(".logo").removeClass("logo_large").addClass("logo_small");
            $("header").removeClass("large").addClass("small");
            }
        else{
            $(".logo").removeClass("logo_small").addClass("logo_large");
            $("header").removeClass("small").addClass("large");
            }
        });
```

```
.small li, .large li, .logo_large, .logo_small {
    transition: all 1s;
    -moz-transition: all 1s; /* Firefox 4 */
    -webkit-transition: all 1s; /* Safari and Chrome */
    -o-transition: all 1s; /* Opera */
}

nav {
    width: 960px;
    margin: 0 auto;
}

ul {
    display:inline-table;
    list-style-type: none;
    text-align: center;
}

li {
    display:table-cell;
    float: left;
    text-align: center;
    margin-right: 30px;
}

.large li {
    height: 120px;
    line-height: 120px;
}

.small li {
    height: 70px;
    line-height: 70px;
}

.logo_large {
    height: 130px;
    width: 164px;
    background:url(https://unsplash.it/200/300) no-repeat;
}

.logo_small {
    height: 80px;
    width: 50px;
    background:url(https://unsplash.it/200/300) no-repeat;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<header class="large">
    <nav>
        <ul>
            <li><a class="active" href="#">Home</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Portfolio</a></li>
            <li class="logo logo_large"></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </nav>
</header>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:07:08.630

从实际元素中删除过渡`header, a, img, li{...`并添加到实际元素中：

```
.large li {
    height: 120px;
    line-height: 120px;
    transition: all 1s;
    -moz-transition: all 1s; /* Firefox 4 */
    -webkit-transition: all 1s; /* Safari and Chrome */
    -o-transition: all 1s; /* Opera */
}

.small li {
    height: 70px;
    line-height: 70px;
    transition: all 1s;
    -moz-transition: all 1s; /* Firefox 4 */
    -webkit-transition: all 1s; /* Safari and Chrome */
    -o-transition: all 1s; /* Opera */
}

.logo_large {
    height: 130px;
    width: 164px;
    background:url(http://samaradionne.com/img/typeBlack.png) no-repeat;
    transition: all 1s;
    -moz-transition: all 1s; /* Firefox 4 */
    -webkit-transition: all 1s; /* Safari and Chrome */
    -o-transition: all 1s; /* Opera */
}

.logo_small {
    height: 80px;
    width: 50px;
    background:url(http://samaradionne.com/img/logoBlack.png) no-repeat;
    transition: all 1s;
    -moz-transition: all 1s; /* Firefox 4 */
    -webkit-transition: all 1s; /* Safari and Chrome */
    -o-transition: all 1s; /* Opera */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:33:10.477

如果这是您仅有的两种状态，您可以通过创建持久类和覆盖类并将您的样式应用到这些状态来避免该问题，例如：

```
.logo { }
.logo.minimized { } 
```

只需添加和删除覆盖样式。

这应该允许 jQuery 正确计算转换。

# c++ - 有任何 cocos2d-X 功能可以在 Facebook 上分享/发送邮件吗？

> ID：15914270
> 
> 赞同：0
> 
> 时间：2013-04-09T23:19:33.493
> 
> 标签：c++, ios, ipad, cocos2d-x

我有一个快完成的应用程序，在游戏结束屏幕上我有一个分享按钮，可以在 Facebook 上分享你的分数，或者通过电子邮件发送，在 cocos2d-x 中有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:27:52.587

不，但是您没有理由不能调用提供此类功能的系统 API。调查[`UIActivityViewController`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html)。

# php - PHP 编码 JSON（二维数组）

> ID：15914282
> 
> 赞同：3
> 
> 时间：2013-04-09T23:20:48.227
> 
> 标签：php, arrays, json

我正在查询一个返回字段（message_type 和百分比）的表。我使用 PHP 对 json 数据进行编码，这是我的做法

```
$json = array();
while ($row = odbc_fetch_array($rs)) {
  $json[][] = $row;
}
echo json_encode($json); 
```

输出 ：

```
[ [ { "message_type" : "bullying",
      "percentage" : "60"
    } ],
  [ { "message_type" : "cheating",
      "percentage" : " 14"
    } ],
  [ { "message_type" : "Stress",
      "percentage" : "16"
    } ],
  [ { "message_type" : "Gang",
      "percentage" : "7"
    } ]
] 
```

如您所见，json_encode 函数正在添加花括号、引号和对象键名。

我想要的只是将 json 解析为二维数组，这是所需的输出：

```
[
  ["bullying", 60],
  ["harrassment", 9],
  ["cheating", 14],
  ["Stress", 16],
  ["Gang", 7]
] 
```

我也尝试手动对其进行编码，但无法获得所需的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T23:38:23.990

PHP`json_encode()`使用一定的魔法来确定给定的向量是编码为 JSON 对象还是数组，但简单的规则是：如果数组有连续的、零索引的数字键，它将被编码为数组. 任何其他向量（对象或关联数组）都将被编码为对象。

因为您正在使用`odbc_fetch_array()`，所以您的结果行将作为关联数组返回，其中键是列名。要获得您想要的结果，您有 3 个选项：

通过以下方式传递结果行[`array_values()`](http://php.net/array-values)：

```
$json[] = array_values($row); 
```

手动构造单个数组：

```
$json[] = array($row['message_type'], $row['percentage']); 
```

或者可能最好的选择是使用[`odbc_fetch_row()`](http://php.net/odbc-fetch-row)它，它将立即返回索引数组：

```
while ($row = odbc_fetch_row($rs)) {
    $json[] = $row;
} 
```

# ios - 在 iOS 中使用 AudioToolbox 时音量低

> ID：15914287
> 
> 赞同：1
> 
> 时间：2013-04-09T23:21:33.957
> 
> 标签：ios, volume, audiotoolbox

我以前使用过 AV Foundation，但我的最新项目需要 AudioToolbox，我更改了代码，现在音频播放非常低，特别是在耳机插孔上，无论设备音量如何。

我真正想要的是始终保持 100% 的音量，即使设备设置为 50% 或其他什么。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-14T05:53:08.520

你有没有添加这些代码？

```
 let session = AVAudioSession.sharedInstance()
    session.setCategory(AVAudioSessionCategoryPlayAndRecord, withOptions:AVAudioSessionCategoryOptions.DefaultToSpeaker, error: nil)
    session.setActive(true, error: nil) 
```

# javascript - 未捕获的错误：NOT_FOUND_ERR：insertBefore 上的 DOM 异常 8

> ID：15914288
> 
> 赞同：1
> 
> 时间：2013-04-09T23:21:34.740
> 
> 标签：javascript, dom

```
function create(htmlStr) {
    var frag = document.createDocumentFragment(),
        temp = document.createElement('div');
    temp.innerHTML = htmlStr;
    while (temp.firstChild) {
        frag.appendChild(temp.firstChild);
    }
    return frag;
}

function add(identifier, html){
    var frag = create(html);
    document.body.insertBefore(frag, document.getElementById(identifier));
} 
```

`identifier`是我在开发人员工具中验证的标签的字符串 id 存在，`html`只是我想要添加到由所述 表示的元素之前的片段`identifier`。`frag`是一个bonefide html 片段，并且调用`getElementById`返回一个bonefide 元素，即两者都不是字符串。为什么我会收到上述错误`insertBefore`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:27:58.520

您的元素可能不是`document.body`. 试试这个->

```
function add(identifier, html){
    var frag = create(html),
        el = document.getElementById(identifier);
    el.parentNode.insertBefore(frag, el);
} 
```

# java - JBullet 刚体

> ID：15914289
> 
> 赞同：0
> 
> 时间：2013-04-09T23:21:36.857
> 
> 标签：java, collision, jbullet

我无法实现与我的游戏的碰撞，更具体地说是主要玩家（一旦它与我设置的盒子碰撞，它就会弹回很远）。这是设置查看器的代码：

> ```
>  CollisionShape myCol = new CylinderShape(new javax.vecmath.Vector3f(0.4f, 0.9f, 0.4f));
>     DefaultMotionState motion = new DefaultMotionState(new Transform(new Matrix4f(new Quat4f(0, 0, 0, 1), new javax.vecmath.Vector3f(0, 33, 0), 1f)));
>     javax.vecmath.Vector3f fallInertia = new javax.vecmath.Vector3f(0, 0, 0);
>     //myCol.calculateLocalInertia(0, fallInertia);
>     RigidBodyConstructionInfo cInfo = new RigidBodyConstructionInfo(1, motion, myCol, fallInertia);
>     self_Col = new RigidBody(cInfo);
>     self_Col.setFriction(1f);
>     self_Col.setRestitution(1f);
>     self_Col.setDamping(0.04f, 0.1f); 
> ```

这是物理世界设置：

> ```
>  AxisSweep3 pairCache = new AxisSweep3(new javax.vecmath.Vector3f(-10000, -10000, -10000), new javax.vecmath.Vector3f(10000, 10000, 10000));
>     DefaultCollisionConfiguration collisionConfiguration = new DefaultCollisionConfiguration();
>     CollisionDispatcher dispatcher = new CollisionDispatcher(collisionConfiguration);
>     SequentialImpulseConstraintSolver solver = new SequentialImpulseConstraintSolver();
>     detectionWorld = new DiscreteDynamicsWorld(dispatcher, pairCache, solver, collisionConfiguration);
>     detectionWorld.setGravity(new javax.vecmath.Vector3f(0, -2f, 0)); 
> ```

我正在尝试移动玩家，然后将新位置应用于碰撞盒，然后执行物理步骤并将位置设置为新的碰撞盒位置。所以基本上我有两个向量占据一个位置。

编辑：有人吗？我仍然有这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T13:34:38.410

JBullet 通常有许多从 0 到 1 的单位。Restitution 是造成这个问题的原因，restitution 是碰撞形状的弹性。你的赔偿太高了，试着减少它，看看是否有帮助。

```
self_Col.setRestitution(0.1f); 
```

# eclipse - 我如何启动 Eclipse WTP 工作台？

> ID：15914291
> 
> 赞同：1
> 
> 时间：2013-04-09T23:21:49.177
> 
> 标签：eclipse, web-services, eclipse-wtp

我正在学习如何使用 Web 服务工具包调试 Web 服务。在这些说明中，第 1 步说“[启动 Eclipse WTP 工作台](http://www.eclipse.org/webtools/jst/components/ws/1.0/tutorials/WebServiceExplorer/WebServiceExplorer.html)”。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:26:42.380

Eclipse Web 工具平台（又名 WTP）。你可以从这里下载这个版本：http: [//www.eclipse.org/webtools/](http://www.eclipse.org/webtools/)

顺便说一句，这是 7 年的文章，我不确定随着 Java EE 标准和 Eclipse IDE 的发展，它是否还能带来任何好处......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T17:09:28.647

我做了“窗口-> 透视-> 打开透视-> 其他-> Web”。这给了我想要的按钮。然后我点击“启动 Web 服务资源管理器”按钮。

# html - wp8错误上的localStorage

> ID：15914292
> 
> 赞同：0
> 
> 时间：2013-04-09T23:21:50.247
> 
> 标签：html, windows-phone-8

我有一个 WP8 HTML/JS 应用程序，我需要在本地存储中保存一些简单的数据。这应该是一件很容易的事，但它已经让我头疼了。

我尝试以多种不同的方式调用**localStorage**，但它不起作用。我得到的错误信息是： *系统找不到指定的文件。*

奇怪的是**sessionStorage 似乎很好**。至少我在使用该对象时没有遇到任何错误。

**附加信息：** - 我调用 localStorage 的方式是：localStorage.setItem()、window['localStorage']、window.localStorage 等。它们都说相同的消息。- 我正在开发一个 Windows Phone HTML 应用程序 OS8。- 我调用 localStorage 的方法在 $('#channels').bind('pagebeforeshow', function (e, data) {...} - 项目中唯一的参考是 .Net for Windows Phone 和 Windows Phone .-我包含的一些 js 库是 jQuery、jQuery mobile 和 ko。-我正在 WP8 设备和模拟器上进行测试

我不喜欢使用 phoneGap 和任何其他已知的设备数据库，因为我不想涉及与本机代码的交互只是为了调用来获取和保存一些数据。

**更新1：** 在前端评论之后，我一一调查了我的js refs。当我添加 jqm 1.3 分钟时出现问题。所有 js 都与我的应用程序捆绑在一起。还有其他建议吗？

```
$(function () {
        try {
            localStorage.setItem('aaa', 123);
            alert(localStorage.aaa);
        }
        catch (err) { alert(err.message) }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:43:37.547

如果你更换

```
alert(localStorage.aaa); 
```

和

```
alert(localStorage.getItem('aaa'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T16:47:41.833

毕竟我得到了jQuery官方论坛的答案。您需要从 HTML5 部分添加具有至少 localStorage 的modernizr。

添加：（第一个或最后一个无关紧要）

如以下帖子所示： [http ://www.pksoftlab.com/?p=1073](http://www.pksoftlab.com/?p=1073)

# c# - 如何在不同的驱动器上移动 SQL LocalDB 2012 系统数据库？

> ID：15914293
> 
> 赞同：1
> 
> 时间：2013-04-09T23:21:52.227
> 
> 标签：c#, sql-server-2012, localdb

默认情况下，SQL LocalDb 在 C:\Users 配置文件下创建所有系统数据库。我需要 D:\drive 上的所有数据库，包括（系统数据库 master、msdb 等）。我知道我可以在 D:\Drive 上创建用户数据库，但是否可以使用 SQL LocalDb 创建或移动系统数据库到 D:\Drive？

注意：我知道可以使用 SQL Express 移动系统数据库，其中可以使用 ALTER 命令移动数据库并使用启动命令移动主数据库。但同样的操作不能用于 SQL LocalDb。

所以我正在寻找 SQL LocalDb 解决方案。

谢谢，削

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:38:15.590

我想出了一个解决方法，将我的系统数据库放在另一个驱动器中。解决方法如下： 1.安装SQL LocalDb

2.将用户移动到 D: 驱动器上的新位置。（您必须创建另一个具有管理员权限的用户才能执行此操作）请参阅文章[http://www.sevenforums.com/tutorials/87555-user-profile-change-default-location.html](http://www.sevenforums.com/tutorials/87555-user-profile-change-default-location.html)。在创建 SQL LocalDb 的第一个实例之前移动用户位置是一个关键步骤。

3.移动用户后，在命令行启动SQL LocalDb（slqlocaldb s v11.0）的实例。所以现在所有系统数据库都创建在 C:\ 以外的不同驱动器上

注意：如果您不想移动整个用户，您也可以将 AppData\Local 文件夹移动到不同的驱动器。右键单击本地文件夹，选择属性，转到“位置”选项卡并移动到新位置。使用具有管理员权限的不同用户登录后移动内容。（AppData 是一个隐藏文件夹）

希望这个解决方案可以帮助其他人，因此分享我在解决方案方面的工作。

# css - CSS：如何修复一个面板并滚动另一个面板？

> ID：15914294
> 
> 赞同：1
> 
> 时间：2013-04-09T23:22:12.457
> 
> 标签：css, html

我有一个带有两个面板的网页。左侧面板占据了大部分宽度并显示用户帖子。右侧面板是一个导航菜单，所以我希望它保持固定并且永远不会滚出屏幕。

当一个屏幕上放不下太多帖子时，屏幕右侧（不是面板）会出现一个滚动条，用户向下滚动。这一切都很好，除了导航菜单滚动到屏幕外。

两个面板都在一个共同的 div 中。我尝试将其位置设置为相对，然后将导航面板位置固定，右侧偏移量为 0。这使导航面板保持在屏幕上，但在最右边（即不在包含的 div 内）。

如何保持导航面板固定在屏幕上，但浮动到包含 div 的右侧？

太感谢了！

编辑：例如我的意思，看看 Facebook。您会看到帖子栏可以永远延伸，但右侧栏（带有广告）仍留在屏幕上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:28:47.613

您可以使用 Twitter Bootstrap Affix JS 插件：http: [//twitter.github.io/bootstrap/javascript.html#affix](http://twitter.github.io/bootstrap/javascript.html#affix)

# lex - lex 程序中的“无法识别的规则”错误

> ID：15914296
> 
> 赞同：0
> 
> 时间：2013-04-09T23:22:25.330
> 
> 标签：lex, flex-lexer

我正在编写一个 lex 程序。这个问题的目的是我输入一个字符串（字母和其他字符）并返回这个字符串的长度。

这是代码：

```
letter ([a-z]|[A-Z])
carac (•|¤|¶|§|à|î|ì|Ä|Å|É|æ|Æ|ô|ö|ò|û|ù|ÿ|Ö|Ü|ø|£|Ø|×|ƒ|á|í|ó|ú|ñ|Ñ|ª|º|¿|®|¬|½|¼|¡|:|;|.|,|/|?|=|-|!|*|£|µ|^|¨|%)
String {letter}({letter}|{carac})*
%%
{String} printf("[%d] : The number of your String \n",yyleng);
.* printf("You have a problem somewhere !"); 
%%
int yywrap(){return 1;}
main ()
{
    yylex ();
} 
```

和输出：

![在此处输入图像描述](https://i.stack.imgur.com/jpfox.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T19:25:24.573

（答案包含在评论中，我在这里包括。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）。

@Thomas Padron-McCarthy 和 @David Gorsline 是正确的：

*   Flex 很可能不理解输入文件的字符编码。据我所知，Flex 仍然只能理解单字节字符。

*   放大 Thomas 的评论：尝试一个更简单的程序版本，您在其中定义`carac`为`carac (:|;|.|,|/|?|=|-|!|^|%)`.

*   您可能需要引用特殊字符：`carac (\:|\;|\.|\,|\/|\?|\=|\-|\!|\^|\%)`或使用字符类表示法：`carac [-:;.,/?=!^%]`

为了确认这一点，我应用了这些编辑并通过 flex 运行它。以下不会给出 flex 错误：

```
carac (\•|\¤|\¶|\§|\à|\î|\ì|\Ä|\Å|\É|\æ|\Æ|\ô|\ö|\ò|\û|\ù|\ÿ|\Ö|\Ü|\ø|\£|\Ø|\×|\ƒ|\á|\í|\ó|\ú|\ñ|\Ñ|\ª|\º|\¿|\®|\¬|\½|\¼|\¡|\:|\;|\.|\,|\/|\?|\=|\-|\!|\*|\£|\µ|\^|\¨|\%) 
```

# c# - 如何理解“合同”的含义

> ID：15914298
> 
> 赞同：2
> 
> 时间：2013-04-09T23:22:39.887
> 
> 标签：c#, .net, terminology

我总是看到这个词`contract`，它似乎有不同的含义，或者至少在我看来是这样的（我不是以英语为母语的人）所以当我看到“合同”这个词时，我不确定我应该理解和期待什么从中。我不知道其他人是否有同样的麻烦，但这让我很烦恼。例如，当我看到“接口”时，我会想到“抽象、依赖注入、继承等”。而且我知道我在寻找什么，并且它正在我的脑海中轻松而轻松地形成。

但是当谈到这个词时，`contract`我无法想象一个模式、类等。不管它是什么。它是使用`interface`或 a`class`或 a`attribute`等形成的东西吗？

例如，这里有一个类[（](http://james.newtonking.com/projects/json/help/index.html?topic=html/ContractResolver.htm)在 Json.NET 中），它讨论了一些叫做`IContractResolver`的东西，页面解释了它的用途：

> IContractResolver 接口提供了一种方法来自定义 JsonSerializer 如何将 .NET 对象序列化和反序列化为 JSON，而无需在类上放置属性。

解释很容易理解，但我不能只是在我看到的时候形成这个想法，`Contract`我不能说：

> “嗯，我期待一些方法可以做到这一点，这样我就可以覆盖它，然后我在这里/那里使用这个类来更改/实现一些功能等。”

这让我很烦恼。我读了一些关于它的文章，但他们正在谈论[按合同设计，](https://www.google.com/search?q=Programming%20by%20contracts&aq=f&oq=Programming%20by%20contracts&aqs=chrome.0.57j0l3j60j62.278j0&sourceid=chrome&ie=UTF-8#hl=en&gs_rn=8&gs_ri=psy-ab&pq=programming%20by%20contracts&cp=2&gs_id=6&xhr=t&q=design%20by%20contracts&es_nrs=true&pf=p&sclient=psy-ab&oq=de%20by%20contracts&gs_l=&pbx=1&bav=on.2,or.r_qf.&bvm=bv.44990110,d.cGE&fp=224b1cd839b2e194&biw=1920&bih=991)这对于那些对“合同”含义有疑问的人来说没有用。

那么有人可以解释一下我应该如何理解这个术语以及当我看到它时我应该期待什么？如果您可以添加一些示例代码以便我将其可视化，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:27:39.503

在“契约式设计”中，*契约*是指库（类、函数）的开发者和消费者之间的协议。

这可能是一项协议，没有人会通过`null`某个参数。这可能是一个特定方法总是在不到 200 毫秒内完成的协议。或者在创建对象的线程上引发事件。重要的是有一些充满规则的文档，并且调用者和函数都同意这些规则。

`IContractResolver`听起来它提供了一种数据格式。这不是合同。（可能有一个合同规定通信的两个端点都将对特定消息使用这种格式，但格式本身并不是一个完整的合同。合同还需要描述何时应该发送每条消息，等等。 )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T23:28:56.353

合同是至少两方之间的协议。在这种情况下，.NET 合约非常有意义。

在按合同上下文设计中，它是相似的。通过协议进行设计，您就接口和一些可验证的义务达成一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T23:37:11.427

合同是相当宽泛的术语，但有一些特定的含义。因此，要正确理解它，您应该了解上下文。一般定义是（从[这里](http://www.merriam-webster.com/dictionary/contract)）：

> 两个或多个人或当事方之间的具有约束力的协议

可以就提供的操作达成一致（部分与*协议*同义），如下[所示](http://msdn.microsoft.com/en-us/library/ms731835.aspx)：

> 服务合同指定服务支持的操作。

或者必须以什么格式传递数据（[这里](http://msdn.microsoft.com/en-us/library/ms733127.aspx)）：

> 数据合同是服务和客户之间的正式协议

有时也`interface`被称为合同 - 因为它正是它：关于可以调用什么以及如何调用的具有约束力的协议。

数据驱动开发中的契约也是关于可以传递什么数据，可以返回什么数据，以及对象的有效状态是什么的协议。它本质上与第一个引用中的相同：两个不同代码段之间的绑定协议。

因此，如果您不确定上下文，请尝试使用常识。如果您不熟悉上下文，请尝试理解或询问：

*   在这种情况下，合同定义了什么？
*   它是如何定义的？
*   涉及的各方有哪些？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T23:28:28.510

好吧，合同是那些根据上下文具有多种含义的负担词之一。

对我来说，它是两方之间的任何协议，因此它可以是 .NET 接口意义上的接口（即类型），也可以是双方之间交换的一组消息和序列（即协议）或在您的 JSON 示例中，对象与其持久化形式之间的映射。

有趣的是，您更清楚地提到“界面”，因为它不一定如此。我不将它与抽象、依赖注入或继承（尤其是最后一个）相关联，但更松散地与任何类型的协议相关联。也许原因是我从没有内置具有特定含义和关键字的接口的语言开始（例如 C++）。关键是它还取决于上下文。

# c++ - 二进制 PLC 通信的校验和

> ID：15914299
> 
> 赞同：2
> 
> 时间：2013-04-09T23:22:49.263
> 
> 标签：c++, python, hex, checksum, plc

我一直在摸索计算校验和以使用二进制命令与 Unitronics PLC 通信。他们提供了源代码，但它是一个仅限 Windows 的 C# 实现，除了基本语法之外，这对我没什么帮助。

**[规范 PDF](http://unitronics.com/Data/Uploads/communication/Unitronics%20PCOM%20Protocol.pdf)**（校验和计算接近尾声）

**[C#驱动源码](http://www.unitronics.com/Data/Uploads/software%20utilities/Unitronics.ComDrive.SourceCodes_Ver_1.0.0.47.zip)**（Utils.cs中的校验和计算）

**预期结果**

下面是字节索引、消息描述和有效的示例。

```
#  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 | 24 25 26 27 28 29 | 30 31 32
# sx--------------- id FE 01 00 00 00 cn 00 specific--------- lengt CHKSM | numbr ot FF addr- | CHKSM ex
# 2F 5F 4F 50 4C 43 00 FE 01 00 00 00 4D 00 00 00 00 00 01 00 06 00 F1 FC | 01 00 01 FF 01 00 | FE FE 5C 
```

规范要求计算 22 字节消息头的累积值，以及单独的 6+ 字节详细信息，得到 sum 模 65536 的值，然后返回该值的二进制补码。

**尝试#1**

我的理解是 Python 中的波浪号 (~) 运算符直接源自 C/C++。在编写了创建消息的 Python 一天后，我想出了这个（精简版）：

```
#!/usr/bin/env python

def Checksum( s ):
    x = ( int( s, 16 ) ) % 0x10000
    x = ( ~x ) + 1 
    return hex( x ).split( 'x' )[1].zfill( 4 )

Details = ''
Footer  = ''
Header  = ''
Message = ''

Details += '0x010001FF0100'

Header += '0x2F5F4F504C4300FE010000004D000000000001000600'
Header += Checksum( Header )

Footer += Checksum( Details )
Footer += '5C'

Message +=  Header.split( 'x' )[1].zfill( 4 )
Message += Details.split( 'x' )[1].zfill( 4 )
Message +=  Footer

print Message 
```

信息：`2F5F4F504C4300FE010000004D000000000001000600600L010001FF010001005C`

我在那里看到了一个 L，这与昨天的结果不同，而且没有更接近。如果您想要基于消息的其余部分的快速公式结果：**Checksum(Header) 应该返回 F1FC 并且 Checksum(Details) 应该返回 FEFE**。

它返回的值与规范中的示例相差甚远。我认为问题可能是一两件事：Checksum 方法没有正确计算十六进制字符串的总和，或者 Python`~`运算符不等同于 C++`~`运算符。

**尝试#2**

一个朋友给了我他对计算应该是什么的 C++ 解释，我只是无法理解这段代码，我的 C++ 知识很少。

```
short PlcBinarySpec::CalcHeaderChecksum( std::vector<byte>  _header ) {
    short bytesum = 0;
    for ( std::vector<byte>::iterator it = _header.begin(); it != _header.end(); ++it ) {
        bytesum = bytesum + ( *it );
    }
    return ( ~( bytesum % 0x10000 ) ) + 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:38:08.110

我不完全确定正确的代码应该是什么......但如果打算`Checksum(Header)`返回 f705，并且它返回 08fb，那么问题就在这里：

```
x = ( ~( x % 0x10000 ) ) + 1 
```

简短的版本是你想要这个：

```
x = (( ~( x % 0x10000 ) ) + 1) % 0x10000 
```

这里的问题不在于这`~`意味着不同的东西。正如[文档](http://docs.python.org/2/library/stdtypes.html#bitwise-operations-on-integer-types)所说，`~x`返回“`x`倒置位”，这实际上与它在 C 中的含义相同（至少在包括所有 Windows 平台的 2s 补码平台上）。

您可能会在此处遇到 C 和 Python 类型之间差异的问题（C 整数类型是固定大小的，并且会溢出；Python 整数类型实际上是无限大小的，并且可以根据需要增长）。但我认为这不是你的问题。

问题只是如何将结果转换为字符串。

在两个版本中，调用 的结果（`Checksum(Header)`直至格式化）都是 -2299 或 -0x08fb。

在 C 中，您几乎可以将有符号整数视为相同大小的无符号整数（尽管在某些情况下您可能必须忽略警告才能这样做）。确切的作用取决于您的平台，但在 2s 补码平台上，有符号短 -0x08fb 是无符号 0xf705 的逐位等效项。因此，例如，如果您这样做`sprintf(buf, "%04hx", -0x08fb)`，它工作得很好——并且它为您（在大多数平台上，包括所有 Windows 上）提供了未签名的等价物，`f705`.

但是在 Python 中，没有无符号整数。int -0x08fb 与 0xf705 无关。如果你这样做`"%04hx" % -0x08fb`，你会得到`-8fb`，并且没有办法强行“将其转换为未签名”或类似的东西。

你的代码实际上是这样做`hex(-0x08fb)`的，它给了你`-0x8fb`，然后你`split`在`x`，给你`8fb`，你`zfill`去`08fb`，这使得问题更难注意到（因为这看起来像一对完全有效的十六进制字节，而不是减号和三个十六进制数字），但这是同样的问题。

无论如何，您必须明确确定“无符号等价物”的含义，并编写代码来做到这一点。由于您试图匹配 C 在 2s 补码平台上所做的事情，因此您可以将该显式转换编写为`% 0x10000`. 如果你这样做`"%04hx" % (-0x08fb % 0x10000)`，你会得到`f705`，就像你在 C 中所做的那样。对于你现有的代码也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:46:46.100

这很简单。我通过在计算器上手动添加所有标题字节来检查您朋友的算法，它产生了正确的结果（`0xfcf1`）。

现在，我实际上并不了解 python，但在我看来，您正在将半字节值相加。您已经制作了这样的标题字符串：

```
Header = '2F5F4F504C4300FE010000004D000000000001000600' 
```

然后您将该字符串中的每个字节从十六进制转换并添加。这意味着您正在处理从 0 到 15 的值。您需要将每两个字节视为一对并将其转换（从 0 到 255 的值）。或者您需要使用实际的二进制数据而不是二进制数据的文本表示。

在算法的最后，`~`如果你不信任它，你真的不需要做操作符。相反，您可以这样做`(0xffff - (x % 0x10000)) + 1`。请记住，在添加 1 之前，该值实际上可能是`0xffff`，因此您需要在`0x10000`之后对整个结果取模。您朋友的 C++ 版本使用该`short`数据类型，因此根本不需要模数，因为它`short`会自然溢出

# android - Android 自定义对话框（DialogFragment）

> ID：15914300
> 
> 赞同：0
> 
> 时间：2013-04-09T23:22:53.050
> 
> 标签：android, android-dialog, android-dialogfragment

我有`DialogFragment`以下方法：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    LayoutInflater inflater = getActivity().getLayoutInflater();
    builder.setView(inflater.inflate(R.layout.buddy_challenge, null));

    this.title = (TextView)getActivity().findViewById(R.id.challenge_title);
    this.challenge = (Button)getActivity().findViewById(R.id.challenge_button);
    this.at = (AutoCompleteTextView)getActivity().findViewById(R.id.chall_ex);

    ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("action", "getAllEx"));
    new ServerCallEx().execute(params);
    return builder.create();
} 
```

自定义布局正确膨胀，但如果我尝试更改 TextView 或尝试将适配器附加到 AutoCompleteTextView 我得到一个空指针异常并且无法弄清楚为什么（不知道为什么`getActivity.findViewByID()`不工作）。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:27:31.680

尝试类似：

```
 LayoutInflater inflater = getActivity().getLayoutInflater();
    View view = inflater.inflate(R.layout.buddy_challenge, null);
    builder.setView(view);

    this.title = (TextView)view.findViewById(R.id.challenge_title); 
```

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:12:22.583

解决了这个问题：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.buddy_challenge, container, false);
    this.title = (TextView)view.findViewById(R.id.challenge_title);
    this.at = (AutoCompleteTextView)view.findViewById(R.id.chall_ex);
    this.at.setThreshold(1);
    return view;
} 
```

并调用它来删除标题：

```
challDialog.setStyle(DialogFragment.STYLE_NO_TITLE, android.R.style.Theme_Holo_Light_Dialog); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:25:33.300

因为你还没有创建它。您在方法结束时调用`create`并返回了`View`，但您试图在`findViewById`此之前执行此操作。

# c - time(NULL) 和 time(&timer) 有什么区别

> ID：15914304
> 
> 赞同：4
> 
> 时间：2013-04-09T23:23:13.830
> 
> 标签：c

考虑：

```
#include <time.h>

time_t now = time(NULL); 
```

对比

```
time_t timer;
time(&timer); 
```

它们是否都生成 UTC 值，如果没有，它们有何不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:26:09.617

没有太大的区别。理论上，你可以这样写：

```
time_t t1;
time_t t2 = time(&t1); 
```

这会将`t1`和`t2`设置为相同的值。

我通常使用：

```
time_t t3 = time(0);  // Or NULL 
```

因为我很少需要同时复制两份。不清楚为什么双重行为被认为是可取的，但早在 1978 年的第 7 版 UNIX™ 中就是这样，并且界面没有改变。

请注意，标准 C（ISO/IEC 9899:2011 §7.27.2.4 'The `time`function'）只是说：

> 该`time`函数确定当前日历时间。该值的编码未指定。

的 POSIX 定义[`time()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/time.html)为您提供了更有用的定义：

> 该`time()`函数应返回自纪元以来的时间值（以秒为单位）。
> 
> `tloc`参数指向还存储返回值的区域。如果`tloc`是空指针，则不存储任何值。

这大概就是您所说的“UTC时间”的意思。

# html - 文字环绕图像

> ID：15914305
> 
> 赞同：3
> 
> 时间：2013-04-09T23:23:19.613
> 
> 标签：html, css, alignment

目前在我的代码中，我的图像看起来像[这样](http://d.pr/i/1XyZ)（右下角） - 我如何使用 CSS 使其在图像周围环绕的文本出现在右上角：

**HTML：**

```
 <div class="leftColBlog">
                        {{ streams:cycle stream="agrilife_news" limit="5"}}
                            {{ entries }}
                                <h2 class="blogTitle">{{ title }}</h2>
                                    <div class="textCon alignLeft">
                                        <p class="text"> {{ description }} </p>
                                            <img class="alignRight" src="{{ image:thumb }}" />
                                    </div>

                            {{ /entries}}   
                        {{ /streams:cycle }}
                    </div> 
```

**CSS：**

```
.leftColBlog{
    display: inline-block;
    width:650px;
    border-right: 1px solid red;
}
.textCon{
    display: inline-block;
}
.textCon p{
    padding: 0 10px 0 10px;
}
.textCon p a{
    color: #fff !important;
}
.textCon img{
    display: inline-block;
}
.alignleft{
    float: left;
    margin: 0 0 0 5px;
}
.alignRight{
    float: right;
    margin: 0 0 0 5px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:35:00.447

把你的图片放在你的文字之前，并给它一个浮动的风格：对。

应该看起来像这样：

```
<div class="leftColBlog">
        {{ streams:cycle stream="agrilife_news" limit="5"}}
              {{ entries }}
                  <h2 class="blogTitle">{{ title }}</h2>
                    <div class="textCon alignLeft">
                      <img class="alignRight" src="{{ image:thumb }}"/>
                      <p class="text"> {{ description }} </p>

                    </div>

              {{ /entries}}   
        {{ /streams:cycle }}
</div> 
```

CSS

```
.leftColBlog{
    display: inline-block;
    width:650px;
    border-right: 1px solid red;
}
.textCon{
    display: inline-block;
}
.textCon p{
    padding: 0 10px 0 10px;
}
.textCon p a{
    color: #fff !important;
}
.textCon img{
    float:right;
}
.alignleft{
    float: left;
    margin: 0 0 0 5px;
}
.alignRight{
    float: right;
    margin: 0 0 0 5px;
} 
```

# ruby-on-rails - Rails 路径没有给我任何路线匹配，但我不明白为什么

> ID：15914306
> 
> 赞同：-1
> 
> 时间：2013-04-09T23:23:21.387
> 
> 标签：ruby-on-rails

所以我有一个我认为非常简单的布局。我的配置路线是：

```
 resources :webcomics
  match '/webcomics/first' => 'webcomics#first', :as => :first
  match '/webcomics/random' => 'webcomics#random', :as => :random
  match '/webcomics/latest' => 'webcomics#latest', :as => :latest 
```

控制器：

```
 def show
    @webcomic = Webcomic.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @webcomic }
    end
  end

  def first
    @webcomic = Webcomic.order("created_at ASC").first
    respond_to do |format|
      format.html { render 'show'}
      format.json { render json: @webcomic }
    end
  end 
```

导航栏：

```
<%= link_to first_webcomics_path, :rel => "tooltip", :title => "first comic" do %>
              formatting in here
        <% end %> 
```

当我单击此链接时，它会将我发送到正确的路径 /webcomics/first，但它给了我错误

```
Routing Error
No route matches {:action=>"edit", :controller=>"webcomics"} 
```

我正在打破我的头，它是如何“编辑”的，不管这条消息是完全错误的，我确实有编辑，但为什么它会尝试进行操作编辑。

```
def edit
    @webcomic = Webcomic.find(params[:id])
end 
```

rake 路由的结果：

```
 first_webcomics GET    /webcomics/first(.:format)    webcomics#first
latest_webcomics GET    /webcomics/latest(.:format)   webcomics#latest
random_webcomics GET    /webcomics/random(.:format)   webcomics#random
       webcomics GET    /webcomics(.:format)          webcomics#index
                 POST   /webcomics(.:format)          webcomics#create
    new_webcomic GET    /webcomics/new(.:format)      webcomics#new
   edit_webcomic GET    /webcomics/:id/edit(.:format) webcomics#edit
        webcomic GET    /webcomics/:id(.:format)      webcomics#show
                 PUT    /webcomics/:id(.:format)      webcomics#update
                 DELETE /webcomics/:id(.:format)      webcomics#destroy
            root        /                             webcomics#index 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:32:54.663

路由是有序的；把`match`es 放在`resources`.

也就是说，我会考虑[将这些路由添加为 RESTful 操作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)：

```
resources :webcomics
  collection do
    get 'first'
    get 'random'
    get 'latest'
  end
end 
```

IMO 这有点干净，并且恰好适合。

* * *

问题是因为您在`show`模板中的编辑链接。编辑链接需要一个对象来编辑：

```
<%= link_to "edit", edit_webcomic_path(@webcomic) %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T23:28:46.743

将这三个`match`规则放在`resources`行上方，如下所示：

```
match '/webcomics/first' => 'webcomics#first', :as => :first
match '/webcomics/random' => 'webcomics#random', :as => :random
match '/webcomics/latest' => 'webcomics#latest', :as => :latest
resources :webcomics 
```

原因在[Ruby Guides: Routing](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)中有解释：

> Rails 路由按照指定的顺序进行匹配，因此如果您在 get 'photos/poll' 上方有一个资源 :photos，则资源行的 show action 路由将在 get 行之前匹配。要解决此问题，请将 get 行移到资源行上方，以便首先匹配。

# perl - 将一个子程序传递给另一个子程序

> ID：15914308
> 
> 赞同：1
> 
> 时间：2013-04-09T23:23:32.490
> 
> 标签：perl, function, functional-programming, arguments

我有一个带有`sub _where(\@ \&)`2 个参数的函数：第一个是数组，第二个应该是另一个函数。这个另一个函数返回一个布尔值，我想在我的 for`sub _where(\@ \&)`函数循环中调用它。

我无法将传入的函数提取到自定义本地名称中。我想我确实需要一些本地名称，因为应该可以将不同的布尔函数传递给我的`where`函数。

在哪里：

```
sub _where(\@ \&)
{
    my @stud = @{$_[0]};
    my $student;
    my $function = shift;
    my $bool = 0;
    my $i;

    for $i(0..$#stud)
    {
        my $student = $stud[$i];
        function $student;
    }
} 
```

应该传递的 Function1：

```
sub name_starts_with($)
{
    my $letter = 'B'; 
    my $student = shift;
    my $first;

    $first = substr($student -> name, 0, 1);

    if($first eq $letter)
    {
        return 1;
    }
} 
```

应传递给的 Function2 `where`：

```
sub points_greater_than($)
{
    my $sum_pts = 5; 
    my $student = shift;
    my $pts;

    $pts = $student -> points;
    if($pts > $sum_pts)
    {
        return 1;
    }
} 
```

希望你们能在这里帮助我。干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:32:50.650

你不应该使用原型。它们在 Perl 中的工作方式与其他语言不同，几乎从来都不是一个好的选择。

您还应该避免制作传入数组的本地副本，除非您想在不影响外部数据的情况下对其进行修改。

最后，以下划线开头的子程序名称通常表明它是类的私有方法。看起来情况并非如此。

您的代码应如下所示

```
sub _where {

    my ($stud, $function) = @_;
    my $student;
    my $bool = 0;

    for my $i (0..$#stud) {
        my $student = $stud->[$i];
        $function->($student);
    }
} 
```

然后你可以称它为

```
_where(\@student, \&function); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:28:13.880

一个问题是如何获取参数：

```
my @stud = @{$_[0]};  # <-- this doesn't remove first parameter from list
my $student;
my $function = shift; # <-- therefore you'll still get first parameter, not second 
```

试试这个修复：

```
my $function = $_[1]; # always get second parameter 
```

**更新**

添加如何将函数引用传递给其他函数的示例：

```
_where(\@stud, \&name_starts_with); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T04:35:53.020

如果您更改参数的顺序以使 coderef 位于第一位，您的代码将会有点 Perlish。

```
sub _where(\&@){
  my $func = shift;
  my @return;

  for(@_){
    push @return, $_ if $func->($_);
  }

  return @return;
} 
```

如果您精通 Perl，您会注意到我只是重新实现了[`grep`](http://perldoc.perl.org/functions/grep.html "perldoc -f grep")（很差）。

```
sub name_starts_with{
    'B' eq substr($_->name, 0, 1);
}

sub points_greater_than{
    $_->points > 5;
}

my @b_students = _where( &name_starts_with, @students );

my $count_of_students_above_5 = _where( &points_greater_than, @students ); 
```

由于这些子程序现在依赖[`$_`](http://perldoc.perl.org/perlvar.html#%24_ "perldoc -v '$_'")，我们应该只使用[`grep`](http://perldoc.perl.org/functions/grep.html "perldoc -f grep").

```
my @b_students = grep( &name_starts_with, @students );

my $count_of_students_above_5 = grep( &points_greater_than, @students ); 
```

由于这些子程序也很短，所以只使用一个块怎么样。

```
my @b_students = grep {
  'B' eq substr($_->name, 0, 1)
} @students;

my $count_of_students_above_5 = grep {
  $_->points > 5;
} @students; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T00:08:58.930

解决了获取第一个参数的问题后，以下是从代码引用中调用子例程的三种方法：

```
&$function($student);    # uses the fewest characters!

&{$function}($student);  # the style you're using for the array ref

$function->($student);   # my favorite style 
```

[您可以通过阅读perlref](http://perldoc.perl.org/perlref.html)手册页找到更多详细信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T03:59:44.090

您似乎正在尝试用 Perl 编写另一种语言。伊克。尝试这个：

```
sub _where
{
    my $students = shift; 
    my $function = shift;
    $function->($_) for @$students;
}

sub name_starts_with
{
    my $student = shift;
    my $letter = 'B'; 
    my $first = substr($student->name, 0, 1);   
    return $first eq $letter; # same as 'return $first eq $letter ? 1 : undef;'
}

sub points_greater_than
{
    my $student = shift;
    my $sum_pts = 5; 
    my $pts     = $student->points;
    return $pts > $sum_pts;
} 
```

你会这样称呼它`_where(\@students, \&name_starts_with)`。

但我不完全是你的 _where 函数的目的，因为它不返回任何东西（除了最后一个评估的语句，在这种情况下它似乎不太有用）。

也许你只是想要grep？

`my @students_b = grep { substr($_->name, 0, 1) eq 'B' } @students;`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T23:29:11.050

您在函数中的参数处理中有错误`_where`。您正在将数组引用放入`$function`变量中。你所要做的

```
my @stud = @{shift()};
my $student;
my $function = shift(); 
```

或者

```
my @stud = @{$_[0]};
my $student;
my $function = $_[1]; 
```

或者我更喜欢哪个

```
sub _where(\@ \&)
{
    my ($stud, $function) = @_;

    for my $student (@$stud)
    {
        $function->($student);
    }
} 
```

但不要混合使用这些方法。

# wordpress - 还有人从头开始写网站吗？

> ID：15914319
> 
> 赞同：4
> 
> 时间：2013-04-09T23:25:08.820
> 
> 标签：wordpress, web

我正在潜入网页设计和开发。我从头开始编写了几个网站（只是客户端代码），从`touch index.html`. 这种做法是否仍在使用，或者大部分网络是由模板、Wordpress 或其他权宜之计组成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:30:45.847

我认为 3 件事足以创建好的网站（展示网站或小型网络应用程序）：

*   服务器端 = 了解 CMS 及其结构和核心功能 + 具有基本的服务器语言概念。在这个 OP 的情况下（Wordpress-PHP 组合很好）。

*   客户端：CSS3 + HTML5 + Javascript（Jquery 或等效）。

*   AJAX 作为双方之间的“桥梁”。

在不使用 CMS 的情况下从头开始做事对知识有好处，但需要更多时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:37:04.287

我认为这里有两个问题：

1) 这种做法还在使用吗？

*   是的，你刚刚用过。浏览器会支持它，所以*有人*会这样做。

2) 大部分网络是由模板、Wordpress 等组成的吗？

*   是的，我会这么认为。

你可以反其道而行之，绕过 Web 服务器并创建一个程序，直接响应端口 80 上的 HTTP 请求，但使用 Web 服务器可以省去编程的麻烦，并允许你处理文件。使用`touch index.html`除此之外的其他东西只是又一步，使用更方便的方式获取您需要的 html 文件。

并不是说所有的网站都必须是*动态*的——比如我自己的博客是用[middleman](http://middlemanapp.com/)写的，这很像编写 Rails 应用程序，只是你将应用程序编译成静态 HTML 文件。用像 Markdown 这样的东西来编写生成一个漂亮的页面要容易得多，而不必手动编辑 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:32:19.160

一条规则：如果您正在构建一个非常复杂的网站，您将花费大量时间来做一些您可以在几秒钟内完成的事情（或许多事情）。从头开始编写网站是学生的任务/家庭作业。

# ios - 测试 NSDate 比较的最佳方法是什么？

> ID：15914322
> 
> 赞同：1
> 
> 时间：2013-04-09T23:25:27.530
> 
> 标签：ios, objective-c, cocoa-touch, nsdate

我有两个日期选择器，它们给了我一个 startTime 和一个 endTime。根据此代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
dateFormatter.timeZone=[NSTimeZone defaultTimeZone];
dateFormatter.timeStyle=NSDateFormatterShortStyle;
dateFormatter.dateStyle=NSDateFormatterShortStyle;
NSString *dateTimeString=[dateFormatter stringFromDate:startTime.date];
NSLog(@"Start time is %@",dateTimeString);

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc]init];
dateFormatter2.timeZone=[NSTimeZone defaultTimeZone];
dateFormatter2.timeStyle=NSDateFormatterShortStyle;
dateFormatter2.dateStyle=NSDateFormatterShortStyle;
NSString *dateTimeString2=[dateFormatter2 stringFromDate:endTime.date];
NSLog(@"End time is %@",dateTimeString2); 
```

**在我的.h**

```
@property (weak, nonatomic) IBOutlet UIDatePicker *startTime;
@property (weak, nonatomic) IBOutlet UIDatePicker *endTime; 
```

我有这段代码，可以让我比较给定时间和当前时间。什么是最好的测试方法，因为我需要你在后台使用它。

```
if ([[NSDate date] isEqualToDate:startTime.date]) {
NSLog(@"currentDate is equal to startTime"); 
}

if ([[NSDate date] isEqualToDate:endTime.date]) {
NSLog(@"currentDate is equal to endTime"); 
} 
```

我需要在该代码或此代码之间进行选择。所以在这里可以`NSLog`工作吗？

```
- (NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate

if([startTime.date timeIntervalSinceDate:[NSDate date]] > 0)
{
//start time greater than today
}

else if([startTime.date timeIntervalSinceDate:[NSDate date]] < 0)
{
//start time less than today
}

else
{
//both dates are equal
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T05:53:20.007

```
NSDate *date1;
NSDate *date2; 
```

然后下面的比较将告诉哪个是早/晚/相同：

```
 if ([date1 compare:date2] == NSOrderedDescending) {
 NSLog(@"date1 is later than date2");        

 } else if ([date1 compare:date2] == NSOrderedAscending) {
  NSLog(@"date1 is earlier than date2");

 } else {
NSLog(@"dates are the same");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T04:29:52.480

您可以使用 NSComparator 比较两个对象的值

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
NSDate *strDate;
NSDate *endDate;
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
strDate = [formatter dateFromString:@"2012-12-07 08:43:31"];
endDate = [formatter dateFromString:@"2012-12-07 08:43:30"];

NSLog(@"%d",[strDate compare:endDate]);
if([strDate compare:endDate] < 0)
    NSLog(@"Enddate bigger than serdate");
else if([strDate compare:endDate] > 0)
    NSLog(@"strdate bigger than enddate");
else
    NSLog(@"Both Are Identicle"); 
```

# php - 创建三个 div，每个包含 1/3 的内容

> ID：15914324
> 
> 赞同：0
> 
> 时间：2013-04-09T23:25:37.517
> 
> 标签：php, arrays, layout, foreach

我正在尝试创建一个三列 Pinterest 布局的模型，该布局扫描图像目录并将 1/3 的图像放在每一列中。

但我不知道如何让正确的图像显示在列中。

包含所有图像并不重要，我只是希望列看起来适度均匀。

这是我到目前为止所拥有的，但显然这只是列出了每一列中的所有图像。

```
<?php
    $dir    = 'img';
    $files = scandir($dir);
    $count = round((count($files)/3), 0);
?>

<div class="column">
    <?php 
        foreach ($files as $file) { // 1/3 of the images
            if ($file != "." && $file != "..") {
                    echo "<img src=\"img/" . $file . "\">" . "\n";
            }
        }
    ?>
</div>

<div class="column">
    <?php 
        foreach ($files as $file) { // 1/3 of the images
            if ($file != "." && $file != "..") {
                    echo "<img src=\"img/" . $file . "\">" . "\n";
            }
        }
    ?>
</div>

<div class="column">
    <?php 
        foreach ($files as $file) { // 1/3 of the images
            if ($file != "." && $file != "..") {
                    echo "<img src=\"img/" . $file . "\">" . "\n";
            }
        }
    ?>
</div> 
```

更新：最终我使用了这个

```
<?php
    $dir    = 'img';
    $files = scandir($dir);
    $count = round((count($files)/3), 0);
?>

<div class="column">
<?php 
    // 1/3 of the images
    for ($i = 0; $i < floor(count($files) / 3); $i++) {
        $file = $files[$i];
        if ($file != "." && $file != "..") {
                echo "<img src=\"img/" . $file . "\">" . "\n";
        }
    }
?>
</div>

<div class="column">
    <?php
        // 2/3 of the images
        for ($i = floor(count($files) / 3); $i < floor(count($files) / 3) * 2; $i++) {
            $file = $files[$i];
            if ($file != "." && $file != "..") {
                    echo "<img src=\"img/" . $file . "\">" . "\n";
            }
        }
    ?>
</div>

<div class="column">
    <?php 
        // 3/3 of the images
        for ($i = floor(count($files) / 3) * 2; $i < count($files); $i++) {
            $file = $files[$i];
            if ($file != "." && $file != "..") {
                    echo "<img src=\"img/" . $file . "\">" . "\n";
            }
        }
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:32:57.003

我会使用`for`循环，如下所示：

```
// 1/3 of the images
for ($i = 0; $i < floor(count($files) / 3); $i++) {
    $file = $files[$i];

// 2/3 of the images
for ($i = floor(count($files) / 3); $i < floor(count($files) / 3) * 2; $i++) {
    $file = $files[$i];

// 3/3 of the images
for ($i = floor(count($files) / 3) * 2; $i < count($files); $i++) {
    $file = $files[$i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:33:04.387

```
$num = 0;
$col = 0; // column number: 0, 1 or 2
foreach ($files as $file) { // 1/3 of the images
    if ($file != "." && $file != "..") {
        if ($num++ % 3 == $col) {
            echo "<img src=\"img/" . $file . "\">" . "\n";
        }
    }
} 
```

# c# - MissingMemberException：“Guid”对象没有属性“长度”

> ID：15914328
> 
> 赞同：3
> 
> 时间：2013-04-09T23:26:01.563
> 
> 标签：c#, python, ironpython, grasshopper, rhino3d

我正在尝试获取曲线的长度，但收到的消息是：`MissingMemberException: 'Guid' object has no attribute 'length'`C# 中的相同脚本可以完美运行。python翻译有什么问题？这是[文档](http://4.rhino3d.com/5/ironpython/functions/curvelength.htm)。

**PYTHON：**

```
import rhinoscriptsyntax as rs

ln = rs.AddLine(pt1, pt2)

a = ln 
b = ln.Length 
```

**C＃：**

```
Line ln;

ln = new Line(pt1, pt2);

A = ln;
B = ln.Length; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:39:37.403

我快速浏览了[文档](http://4.rhino3d.com/5/ironpython/functions/curvelength.htm)。我认为你应该使用`rhinoscriptsyntax.CurveLength`. `AddLine`返回 Guid 而不是曲线对象。您可以将 Guid 传递给`CurveLength`.

```
rs.CurveLength(ln) 
```

# asp.net - VS 12 Site.Master 模板不适用于新页面

> ID：15914335
> 
> 赞同：1
> 
> 时间：2013-04-09T23:26:44.033
> 
> 标签：asp.net, visual-studio-2012

我正在通过 Visual Studio 2012 创建一个新网站，该网站将由不是程序员/开发人员的同事进行更新。这非常简单，因为我要做的就是将我创建的模板应用于我自动创建的每个新 ASPX 页面。我可以复制并粘贴上述模板，但我想让非开发人员/程序员的人尽可能轻松。我在这里缺少什么吗？

# javascript - 更改数据在 Highcharts 中的显示方式

> ID：15914348
> 
> 赞同：0
> 
> 时间：2013-04-09T23:28:03.653
> 
> 标签：javascript, highcharts

我有一个小问题，我有一个由 highcharts 生成的饼图 - 它以百分比表示数据。因此，例如，如果我有两个值 2 和 3，它将在绘制的图表上显示 40% 和 60%。而不是以百分比显示数据，我实际上想在绘制的图表上显示这些数字：2 和 3。任何人都知道我必须更改什么来显示数字而不是百分比？谢谢！

```
chart: 
        {
            renderTo: 'sunshine',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: 
        {
            text: 'Browser market shares at a specific website, 2010'
        },

        tooltip: 
        {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: 
        {
            pie: 
            {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: 
                {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() 
                    {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [
        {
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Jan',   2],
                ['Feb',       3],
            ]
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:37:42.817

使用 pie 属性的标签格式化程序。您可以使用以下值访问确切的数据点`this.y`：

```
 pie: 
        {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: 
            {
                enabled: true,
                color: '#000000',
                connectorColor: '#000000',
                formatter: function() 
                { 
                    return '<b>'+ this.point.name +'</b>: '+ this.y;
                }
            }
        } 
```

# php - 谷歌图表是否已弃用？

> ID：15914349
> 
> 赞同：6
> 
> 时间：2013-04-09T23:28:06.163
> 
> 标签：php, graph, charts

我对 Google 图表是否已弃用感到有些困惑？我想在我的网页上绘制图形和图表，显然不想使用已弃用的图表组件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T23:29:11.213

AFAIK，它只是不推荐使用的图像 API。

[https://developers.google.com/chart/image/](https://developers.google.com/chart/image/)

> 重要提示：Google Chart Tools 的 Image Charts 部分已于 2012 年 4 月 20 日正式弃用。它将根据我们的弃用政策继续工作。

[看起来距离他们完全摆脱 API 还有一年的时间](https://developers.google.com/chart/terms)

# .htaccess - 为 SEO 合规性正确配置 301 重定向？

> ID：15914351
> 
> 赞同：0
> 
> 时间：2013-04-09T23:28:21.053
> 
> 标签：.htaccess, mod-rewrite, seo

经过 SO 成员的大量研究和帮助后，我已经清除了使用 .htaccess 的第一个主要障碍。

我的新 .htaccess 文件成功地将我的`index.php`页面重命名为`/home`并获取附加到链接的所有查询字符串：

`http://www.website.com/departments?nav=business`（ETC。）

并将它们变成我想要的格式：

`http://www.website.com/business`

这是我的 .htaccess 代码：

```
AddDefaultCharset UTF-8
RewriteEngine On
RewriteBase /

RewriteRule ^/?Home/?$ /index.php [L,NC]

RewriteRule ^([a-zA-Z-?]+)/?$ departments.php?nav=$1 [L] 
```

如果上面的任何代码都不理想，我已经在我的在线研究中收集了它，我仍在从中学习。

我的问题是，既然我已经重新定义了链接，我知道我应该做一个 301 重定向，这样旧的链接就不会在搜索引擎中显示为重复的或类似的。我很抱歉没有把所有的术语都写下来，但这是对此进行研究的漫长的两天。

为了进行重定向以保持页面 SEO 友好，要添加什么正确的代码？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:30:57.673

让你重写规则：

```
RewriteRule ^([a-zA-Z-?]+)/?$ departments.php?nav=$1 [L,R=301] 
```

这将使您的链接执行 301 重定向到您的新 URL。

# hadoop - Hadoop流API-限制每个作业的映射器数量

> ID：15914356
> 
> 赞同：2
> 
> 时间：2013-04-09T23:28:34.403
> 
> 标签：hadoop, mapreduce, cloudera

我有一个在小型 hadoop 集群上运行的作业，我想限制它为每个数据节点生成的映射器数量。当我使用 -Dmapred.map.tasks=12 时，由于某种原因，它仍然会生成 17 个映射器。我已经想出了一种在全球范围内限制它的方法，但我想在每个工作的基础上做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:16:44.863

在 Map Reduce 中，生成的映射器总数取决于从您的数据创建的输入拆分。

每个输入拆分都会产生一个映射器任务。所以，你不能减少 Map Reduce 中映射器的数量。

# .net - 无法在 VS 2010 中使用本地 IIS 开始调试

> ID：15914360
> 
> 赞同：2
> 
> 时间：2013-04-09T23:29:00.737
> 
> 标签：.net, visual-studio-2010, iis

我刚刚浪费了大约一个小时试图开始在我的一台开发机器上调试用 VS 2010 编写的 ASP.NET 项目。我需要使用本地 IIS 服务器对其进行调试，但我不断收到以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/vqifQ.jpg)

只是为了展示微软是多么愚蠢，如果我点击帮助，我会得到以下结果：

![在此处输入图像描述](https://i.stack.imgur.com/7fr0B.jpg)

最烦人的部分是完全相同的项目在另一台开发机器上运行良好。

所以，这就是我在这台机器上所做的，但它不起作用：

1.  重新启动计算机。

2.  我禁用了 Windows 防火墙（完全）：

![在此处输入图像描述](https://i.stack.imgur.com/i9ls7.jpg)

3.  并杀死了来自微软的那个绿色的反病毒程序： ![在此处输入图像描述](https://i.stack.imgur.com/uorEw.jpg)

4.  我确保已安装 IIS 并在 IIS 管理器中启动了应用程序池：

![在此处输入图像描述](https://i.stack.imgur.com/QqCXS.jpg)

那么我错过了什么？

PS。浪费时间在这个愚蠢的错误标签上真是令人沮丧！

# java - Java书店程序

> ID：15914366
> 
> 赞同：1
> 
> 时间：2013-04-09T23:29:26.770
> 
> 标签：java

我正在为家庭作业编写一个书店程序。该程序为用户提供了 6 个不同的选项供他们选择。目前，我正在研究的是选项 1。选项 1 是在库存中添加更多书籍。当用户选择选项 1 时，它会要求用户输入书名，然后检查这些书是否已经有货。我遇到的问题是检查用户输入的书名是否已经有货。我有一个名为 inStock 的函数，但我不确定如何调用此函数。现在代码无法编译，因为我在一行上收到一个错误，说明`if (bt == myBkStore.inStock(title, y))`由于类型不兼容。但我不确定如何调用 inStock() 函数。到目前为止，这是我的编码：

```
import java.util.Scanner;
import java.util.ArrayList;
public class MyBookstore {
  public static void main(String[] args) {
    Scanner s = new Scanner(System.in);
    Bookstore myBkStore = new Bookstore();

    int y = 0;
    int user_choice = 2;
    boolean quit = false;

    do {
        //display menu to user
        //ask user for his choice and validate it (make sure it is between 1 and 6)
        System.out.println();
        System.out.println("1) Add a book to the stock");
        System.out.println("2) Sell a book in stock");
        System.out.println("3) List the titles of all the books in stock (in the Bookstore object)");
        System.out.println("4) List all the information about the books in stock (in the Bookstore object)");
        System.out.println("5) Print out the gross income of the bookstore");
        System.out.println("6) Quit");
        System.out.println();
        System.out.print("Enter choice [1-6]: ");
        user_choice = s.nextInt();
        switch (user_choice) {
            case 1: System.out.println("Enter a book title");

                    String bt = s.next();           //stores title of book user enters in

                    if (myBkStore.inStock(title, y))
                    {
                        System.out.println("How many more to add to the stock");
                        y = s.nextInt();
                        myBkStore.addBookQuantity(bt, y);
                    }
                    else
                    {
                        System.out.println("Enter the amount of pages of the book: ");
                        int pages = s.nextInt();
                        System.out.println("Enter the price of the book: ");
                        double price = s.nextDouble();
                        System.out.println("Enter the quantity to add: ");
                        int quant = s.nextInt();
                        //myBkStore.Book(bt, pages, price, quant);
                        myBkStore.addNewBook(book);
                    } 

                    break;
            case 2: System.out.println("Enter book title to buy: ");
                    String bookT = s.next();
                    myBkStore.sellBook(title, y);
                    break;
            case 3: myBkStore.listTitles();
                    break;
            case 4: myBkStore.listBooks();
                    break;
            case 5: myBkStore.getIncome();
                    break;
            case 6: System.out.println("Thanks for coming");
                    quit = true;
                    break;
            default: System.out.println("\nInvalid Choice");
        }
}
while (!quit);
}

static class Bookstore {
private Book[] books; // all the books in this bookstore
private int totalBooks; // the number of books in this bookstore
    private double grossIncome; //the gross income of the bookstore (will be incremented when books are sold)

// Constructor: A new Bank object initially doesn’t contain any accounts.
public Bookstore() {
    books = new Book[100];
    totalBooks = 0;
    grossIncome = 0;
    }

// Creates a new bank account using the customer name and the opening balance given as parameters
// and returns the account number of this new account. It also adds this account into the account list
// of the Bank calling object.
public void addNewBook(Book b) {
    if(totalBooks < books.length) {
        books[totalBooks] = b;
        totalBooks++;

    }
    else
    {
        System.out.println("\nSorry, cannot add book to stock.");
    }

}

public void addBookQuantity(String title, int quantity) {
    for (int i =0; i<totalBooks; i++) {
        if (title == books[i].getTitle()  ) {
            books[i].addQuantity(quantity);
            System.out.println("Quantity added successfully");
            return;
        }
    }

    /*int i;

    for (i = 0; i < totalbooks; i++)
    {
        if((books[i].getTitle()).equals(title))
        {
            books[i].addQuantity(quantity);
            return;
        }
    }*/

}

public boolean inStock (String title, int quantity) {
    for (int i =0; i<totalBooks; i++) {
            if (title.equals(books[i].getTitle())) {
                if (quantity <= books[i].getQuantity()) {return true;}
                else {return false;}
            }
        }
    return false;

}

public boolean sellBook(String title, int quantity){
    int i;

        boolean sellflag=false;

        // Checks to see if the books are in stock.

        boolean retval = inStock(title, quantity);

        // If so, completes the sale.

        if (retval) {

          for (i=0; i<totalBooks && !sellflag; i++) {

            if (title.equals(books[i].getTitle())) {

              books[i].subtractQuantity(quantity);

              grossIncome += (books[i].getPrice()) * quantity;

              sellflag = true;

            }

          } // for

        } // if

        return retval;

      } // sellBook

public void listTitles()
{
    for (int i = 0; i < totalBooks; i++)
    {
        System.out.println(books[i].getTitle());
    }

}

public void listBooks()
{
    int i;

    System.out.println("\nList of Books\n======");
    for (i = 0; i < totalBooks; i++)
    {
        System.out.println(books[i]);
    }
    System.out.println();
}

public double getIncome()
{
    return grossIncome;
}

}

  static class Book{

       private String title;
       private int numOfPages;
       private double price;
       private int quantity;
       private Book book;

       public String toString(){
           return "Title: " + title + "\nNumber of pages: " + numOfPages + "\nPrice:" + price +"\nQuantity: " + quantity + "\n";

       }

       public Book book(String thetitle, int pages, double cost, int num){
         /*title = thetitle;
         numOfPages = pages;
         price = cost;
         quantity = num;*/
         return book;

       }

       public String getTitle(){
         return title;
       }

       public double getPrice(){
         return price;
       }

       public int getQuantity(){
         return quantity;
       }

       public void addQuantity(int amount){
            quantity = quantity + amount;

    }
    public void subtractQuantity(int amount)
    {
          System.out.println("Amount to buy");
        Scanner s = new Scanner(System.in);
        quantity = s.nextInt();
        quantity = quantity - amount;   
    }

}//end of class
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:35:41.210

bt 是一个字符串。inStock 方法的返回类型是布尔值。您需要将 inStock 的返回值存储为布尔值。然后在 if 语句中使用从 inStock 方法返回的任何内容。例如：

```
if (myBkStore.inStock(title, y)) { // this statement basically means if (myBkStore.inStock(title, y) == true)
    // then do stuff
}

OR

if (!myBkStore.inStock(title, y)) { // this statement basically means if (myBkStore.inStock(title, y) == false)
    // then do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:35:59.693

bt 是一个字符串：

```
String bt = s.next(); 
```

但 inStock() 返回一个布尔值：

```
 public boolean inStock(...) 
```

所以当你打电话时：

```
 if (bt == myBkStore.inStock(title, y)) 
```

你是说“如果这个字符串（bt）等于这个布尔值（由 inStock 返回）”......

这里的类型不兼容，因此例外

编辑：要简单地检查 inStock 是否返回 true 或 false，您可以简单地说：

```
 if (myBkStore.inStock(title, y))
        // do stuff you want to do if the inStock() method returns true
   else 
        //do stuff you want to do if the inStock() method returns false 
```

注：`(myBkStore.inStock(bt, y))`是一种简写方式

```
 if (myBkStore.instock(title, y) == true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:38:15.693

只是尝试更换

```
if (bt == myBkStore.inStock(title, y)) 
```

和：

```
if (myBkStore.inStock(bt, y)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:40:43.803

只需从您的代码中删除 bt == 即可。它应该工作

```
if (myBkStore.inStock(title, y))
{
    System.out.println("How many more to add to the stock");
    y = s.nextInt();
    myBkStore.addBookQuantity(bt, y);
} 
```

# java - sudo killall java 不是 Eclipse

> ID：15914367
> 
> 赞同：2
> 
> 时间：2013-04-09T23:29:35.793
> 
> 标签：java, linux, bash, command-line, kill

什么是“ `sudo killall java`”而不是 Eclipse 进程的好技术？

我已经尝试过`grep`在类路径上使用的技术，但我尝试过的一切似乎都很混乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:00:43.217

我建议您使用`jps`列出 Java 进程，然后通过管道输出`grep -v`以过滤掉 eclipse 进程并`cut`提取 pid。然后将这些作为命令行参数提供给`kill`.

例如：

```
jps | egrep -v "eclipse" | egrep -v "Jps" | cut -b1-6 | xargs -t kill 
```

您可以使用它`jps -l`来更准确地识别要杀死的 java 进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:57:45.310

你可以像这样杀死所有的java进程：

```
ps ax | grep "java" | cut -b1-06 | xargs -t kill 
```

这将 grep 并剪切所有 java 进程的 PID 并杀死它们。如果你的`ps ax | grep "java"`回报也日食，那么做一个`egrep -v "eclipse"`. 它将删除有 Eclipse 的行。然后把它剪掉。

```
ps ax | grep "java" | egrep -v "eclipse" | cut -b1-06 | xargs -t kill 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-09T23:36:59.427

使用 ProcExplorer 可以看到进程树，并且可以轻松地从 powershell 获取进程创建时间：

```
 $a =  gwmi win32_process -computername localhost | ? { $_.name -eq "java.exe" }
 $a | % { $_.ConvertToDateTime( $_.CreationDate )} 
```

# mysql - 有效地组合两个查询，两者都有一个共同的内部连接

> ID：15914369
> 
> 赞同：0
> 
> 时间：2013-04-09T23:29:48.537
> 
> 标签：mysql, sql

我想加入三个表，然后合并它们。在联合的两个查询中，两个连接的表是相同的，执行两次连接似乎是一种浪费。请参阅下面的示例。这如何表现得最好？谢谢

```
SELECT t1.c1,t2.c1,t3.c1
FROM audits AS t1
INNER JOIN t2 ON t2.t1_id=t1.id
INNER JOIN t3 ON t3.t1_id=t1.id
WHERE t2.fk1=123
UNION
SELECT t1.c1,t2.c1,t4.c1
FROM audits AS t1
INNER JOIN t2 ON t2.t1_id=t1.id
INNER JOIN t4 ON t4.t1_id=t1.id
WHERE t2.fk1=123
ORDER BY t1.fk1 ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:11:09.780

如果 MySql 支持语法，这将起作用，并且可能会更有效：

```
SELECT t1.c1, t2.c1, t.c1
FROM audits AS t1
INNER JOIN t2 ON t2.t1_id=t1.id
INNER JOIN (
  select t1_id from t3
  union
  select t1_id from t4
) as t ON t.t1_id=t1.id
WHERE t2.fk1=123
ORDER BY t1.fk1 ASC 
```

可能的性能改进的原因是被 UNION 的关系占用的空间更小；一列而不是 3。 UNION 消除重复项（与 UNION ALL 不同），因此必须对整个记录集合进行排序以消除重复项。

在元级别，此查询通知优化器可用的特定优化，它可能无法自行确定。

# macos - Opencv 视频编解码器 OSX

> ID：15914372
> 
> 赞同：1
> 
> 时间：2013-04-09T23:29:59.343
> 
> 标签：macos, opencv, codec

我正在研究 openCV Highgui 中的示例，可以在[此处](http://docs.opencv.org/doc/tutorials/highgui/video-input-psnr-ssim/video-input-psnr-ssim.html#videoinputpsnrmssim%5d)找到。值得注意的是，我正在运行 osx。运行文件时出现错误“警告：无法读取电影文件视频/Megamind.avi”。这是编解码器问题（openCV 附带的 .avi 文件）还是环境问题？这是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:49:15.347

有时端口安装会抱怨并搞砸旧安装。尝试 brew OS X 的包管理器来安装 ffmpeg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:11:28.223

我相信 Megamind.avi 在 XVID 中。尝试[从 XVID](http://www.xvid.org/Downloads.43.0.html)安装 XVID 编解码器。我猜 OSX 包管理器也可以得到它。

更直接地回答你的问题：我想你们都可以使用正确的引用构建 opencv，但它对我有用（在 Windows 中）只是为了为我的系统设置编解码器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:48:36.317

我按照说明（见下文）在支持 ffmpeg 的 mac os X 上安装 opencv。
它工作，我可以看到我的 .avi 文件工作。有详细的安装说明，
一步一步来。

[按照这个链接](http://tech.enekochan.com/2012/07/27/install-opencv-2-4-2-with-ffmpeg-support-in-mac-os-x-10-8/ "这个链接")

# python - 通过 Tastypie 流式传输/部分结果

> ID：15914373
> 
> 赞同：0
> 
> 时间：2013-04-09T23:30:08.563
> 
> 标签：python, django, http, rest, tastypie

有没有办法通过tastepie流式传输/返回部分结果（[通常在Django中似乎是可能的](https://stackoverflow.com/questions/2922874/how-to-stream-an-httpresponse-with-django)）。我有一个 API 需要向外部服务发出一堆请求才能产生结果。对外部服务的请求将需要不同的时间才能返回。我不想让 API 的用户等待所有外部服务完成，而是希望在它们可用时立即返回部分结果。你会怎么做呢？这是否违反 RESTful 原则？

# java - Java - OpenGL设置中心（0,0）坐标的偏移量

> ID：15914374
> 
> 赞同：1
> 
> 时间：2013-04-09T23:30:15.157
> 
> 标签：java, opengl, viewport, offset, jogl

我正在使用 JOGL 库（被迫）做某事，但我不知道如何偏移中心零坐标。我想在方法中将它们偏移到我的视口底部

`public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height)`

但我无法谷歌任何方式将 int 高度转换为任何有意义的偏移浮点坐标。

编辑：

```
gl.glViewport(0, 0, width, height); 
gl.glMatrixMode(GL_PROJECTION); 
gl.glLoadIdentity(); 
glu.gluPerspective(45.0, width / (float) height, 0.1, 100.0); 
gl.glMatrixMode(GL_MODELVIEW);
gl.glLoadIdentity(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:42:45.750

使用解决

glu.gluLookAt(0, 0, 1, 0, 0.42, 0, 0, 1, 0);

没有意识到偏移量不是相对的。

# css - 是否可以给一个元素两个不同的边界？

> ID：15914380
> 
> 赞同：2
> 
> 时间：2013-04-09T23:31:03.300
> 
> 标签：css, colors, border

我查了这个，我根本找不到我正在寻找的答案。我的网页上有多个 div，它们周围都有一个 1px 纯黑色的黑色边框。除了具有特定 id 的两个 div。它们有一个 10 像素的不同颜色边框，但我想用 1 像素纯黑色边框围绕它。有什么建议么？我所有的 div 都是 javascript 创建的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:34:16.903

在所有浏览器中唯一可靠的方法是使用额外的`DIV`容器并为其加上边框以及内部`DIV`.

Louis Lazaris 在[http://www.impressivewebs.com/multiple-borders-css/详细介绍了适用于许多浏览器的其他一些方法](http://www.impressivewebs.com/multiple-borders-css/)

# Lazaris 的方法简介

## 边框和轮廓

支持：除 IE6/7 之外的所有内容
注意：`outline`不影响其周围元素的流动，因此它会与其他元素重叠或重叠。

```
.one {  
    border: solid 6px #fff;  
    outline: solid 6px #888;      
} 
```

## 伪元素

注意：`min-height`保持垂直流动。

```
.two {  
    border: solid 6px #fff;  
    position: relative;  
    z-index: 1;  
}  

.two:before {  
    content: "";  
    display: block;  
    position: absolute;  
    top: -12px;  
    left: -12px;  
    border: solid 6px #888;  
    width: 312px;  
    padding-bottom: 12px;  
    min-height: 100%;  
    z-index: 10;  
} 
```

## 盒子阴影

注意：`box-shadow`也不会影响它周围元素的流动。

> 我使用了两个阴影（逗号分隔），并将偏移和模糊设置设置为零，同时为每个阴影提供适当的大小。因为一个与另一个重叠，第二个阴影的大小是另一个的两倍。关键部分是缺乏模糊和完全不透明的颜色。这为每个阴影提供了一条直边，就像边框一样。

```
.three {  
    box-shadow: 0 0 0 6px #fff, 0 0 0 12px #888;  
} 
```

## 额外的 <div>

支持：所有浏览器

```
.four {  
    border: solid 6px #888;  
    background: #fff;  
    width: 312px;  
    min-height: 312px;  
}  

.four div {  
    width: 300px;  
    min-height: 300px;  
    background: #222;  
    margin: 6px auto;  
    overflow: hidden;  
} 
```

## 边框图像

```
.five {  
    border-width: 12px;  
    -webkit-border-image: url(multiple-borders.gif) 12 12 12 12 repeat;  
    -moz-border-image: url(multiple-borders.gif) 12 12 12 12 repeat;  
    border-image: url(multiple-borders) 12 12 12 12 repeat; /* for Opera */  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:50:22.037

不完全是双边框，但您可以像 box-shadow 一样给边框，这可以给您想要的效果。

# memory-management - Linux 中的 vmsplice() 系统调用是否有反向操作？

> ID：15914382
> 
> 赞同：3
> 
> 时间：2013-04-09T23:31:33.683
> 
> 标签：memory-management, linux-kernel, ipc

`vmsplice`系统调用允许使用“SPLICE_F_GIFT”标志实现从一组用户级页面到管道的零复制发送。我的问题是是否存在反向操作，例如，我是否可以在管道的另一端有一个进程，它不只是简单地`read()`或`aio_read()`管道，而是执行一个简单地将管道数据映射到其地址空间的操作？这最终意味着将内存映射从发送方传输（移动）到接收方进程而无需任何复制。这可能吗？

**编辑：**我的用例如下所示。我有两个进程 A 和 B。A 生成数据（> 兆字节）并希望将其传递给 B 进行进一步处理，然后终止。我想避免复制，只是告诉内核'看我这里有这些页面，不再需要它们了。请将它们附加到 B 的地址空间并完成它。'。

简单的共享内存对我不起作用，因为 A 发送的内存可能位于其地址空间中的任何位置，除非我限制 A 使用适用于共享内存或临时文件的特定内存分配器，我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:54:47.623

我认为您正在寻找`process_vm_readv`and `process_vm_writev`。

> 这些系统调用在调用进程（“本地进程”）的地址空间和由 pid 标识的进程（“远程进程”）之间传输数据。数据直接在两个进程的地址空间之间移动，不经过内核空间。

有关详细信息，请参见手册页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:11:19.673

不，vmsplice 操作没有反向操作，现在有一个项目正在进行，用于将 DBUS 放入内核中，您可能想看看它。我也有同样的要求，正在调查这整个 vmsplice 的事情。

# javascript - 使用 Backbone 更新页面标题，使其在浏览器历史记录中正确显示

> ID：15914385
> 
> 赞同：0
> 
> 时间：2013-04-09T23:31:43.160
> 
> 标签：javascript, google-chrome, backbone.js, coffeescript

我正在使用骨干网和骨干网布局管理器进行构建。当我需要更改视图时，我需要将页面更新为新标题。我尝试添加一个名为 setTitle 的便捷方法，

```
setTitle: (new_title) ->
    document.title = new_title
    console.log "changed title to: #{new_title}" 
```

我可以在路由更改时调用我的路由器。这很好用，但是，有一个问题。当我检查我的浏览器历史记录时，很明显它显示了与上一页相关联的标题。示例（按访问页面顺序排列的 1-3）：

```
1\. localhost/#/home/ - "Website"
2\. localhost/#/blog/ - "Website - Home"
3\. localhost/#/home/ - "Website - Blog" 
```

我看到路由器直到 url 更改并且我的浏览器 Chrome 已将该页面添加到其历史记录后才调用路由。

我的问题是，如何更新页面的标题，以便标题积极反映在我的浏览器历史记录中。

更新：这不是 Safari 的问题，IE 也有它自己的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-28T16:50:02.850

我可以通过更新`document.title`每个路由回调中的 来实现这一点。

```
Backbone.Router.extend({
  routes: {
    'posts': 'posts',
    'posts/new': 'newPost'
  },
  posts: function() {
    document.title = 'All Posts';
    // do something
  },
  newPost: function() {
    document.title = 'New Post';
    // do something
  }
}) 
```

# ios - 如何让用户访问由应用程序创建的 PDF 文件以便他们可以打印它们

> ID：15914386
> 
> 赞同：0
> 
> 时间：2013-04-09T23:31:51.770
> 
> 标签：ios, pdf, printing

好的，所以我有一个应用程序可以为脊椎治疗诊所生成报告，并允许用户直接从 iPad 打印报告，假设他们有 Airprint 打印机。我也在编写代码，允许用户生成报告的 PDF，以便他们可以通过电子邮件发送/上传到云端或以某种方式将其发送到其他设备，允许他们在不使用的情况下打印它空气打印。

我知道沙盒，但我也知道您可以将 PDF 存储在 iPad 上并通过 iBooks 查看它们。

我在这里读到：[以编程方式将 PDF 加载到 iBooks](https://stackoverflow.com/questions/3399645/loading-pdfs-into-ibooks-programmatically)中，早在 2010 年就没有办法这样做了。那个家伙说他会更新他的答案，但你知道这些事情是怎么回事

我这里也有一个后门解决方案：[Xcode save a PDF as Image?](https://stackoverflow.com/questions/9810209/xcode-save-a-pdf-as-image) 将整个该死的东西变成.png

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:48:16.933

用于`UIDocumentInteractionController`向用户呈现一组选项。让用户选择他们想要对 PDF 执行的操作。

# jquery - 手风琴与 jQuery

> ID：15914387
> 
> 赞同：1
> 
> 时间：2013-04-09T23:32:04.517
> 
> 标签：jquery, html, css, function, jquery-ui-accordion

我正在尝试用 jQuery 实现手风琴，但是我遇到了问题。当我按下按钮时，它应该`slideToggle`是信息，但它只是滑入和滑出。

我不知道为什么会这样，我正在学习，如果有人可以帮助我，我将不胜感激。

这是我的 JavaScript：

```
$(".wrap-faq  a").on("click",accordion);

function accordion() {
    if($(this).attr("class") != "active"){
        $(".wrap-faq  li  p").slideDown();
        $(this).next().slideToggle();
        $(".wrap-faq a").removeClass("active");
        $(this).addClass("active");
       }
} 
```

我还留下了我的 JSFiddle 演示的链接：http: [//jsfiddle.net/zZaTf/](http://jsfiddle.net/zZaTf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:16:53.870

您拥有`display: none`的`.txt-ans-faq`类和`slide...`效果不适用于隐藏元素。好吧，它会，但你不会看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:04:56.280

As Ilia notes, `display: none` will prevent you from seeing your content text, so get rid of that for a start. You can hide all the content by calling an initial `slideUp()`.

The actual `slideToggle` can be implemented simply in this way:

```
$(document).ready(function() {

  $('.txt-ans-faq').slideUp(0);

  $('.wrap-faq  a').click(function(e) {
        $(this).next().find('.txt-ans-faq').slideToggle(300);
  });
}); 
```

[Fiddle](http://jsfiddle.net/SiCurious/zZaTf/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T23:47:46.833

我更新了 Simon 手风琴脚本。

```
 $(document).ready(function() {

   $('.txt-ans-faq').slideUp(0);

  $('.wrap-faq  a').click(function(e) {
         $('.txt-ans-faq').slideUp(300);      
        $(this).next().find('.txt-ans-faq').slideToggle(300);
  });
}); 
```

[http://jsfiddle.net/zZaTf/9/](http://jsfiddle.net/zZaTf/9/)

# php - 试图让php输出带有完整url而不是相对路径的xml

> ID：15914402
> 
> 赞同：0
> 
> 时间：2013-04-09T23:33:29.930
> 
> 标签：php, ios, xml, air

我在浏览器中可以正常工作，但适用于 ios 的空气需要完整地址。

```
<?php $path_to_image_dir = 'Games/game_images/'.$username; 

    $xml_string = "<?xml version=\"1.0\" encoding=\"iso-8859-1\"?><data> <LoaderMax name=\"gallery\">";

    if ( $handle = opendir( $path_to_image_dir ) ) {
        $i = 1;
        while (false !== ($file = readdir($handle))) {
            if ( is_file($path_to_image_dir.'/'.$file) ) {
                $xml_string .= "<ImageLoader url=\"" . $path_to_image_dir."/".$file . "\"  />";
            }
        }
        closedir($handle);
    }

$xml_string .= "</LoaderMax></data>";
$ignore = array('.','..','cgi-bin','.DS_Store');
$file = fopen($username.'_imagesfile.xml','w');
fwrite($file, $xml_string);
fclose($file);
?> 
```

* * *

这是 xml 结果：

```
<?xml version="1.0" encoding="iso-8859-1"?><data> <LoaderMax name="gallery"><ImageLoader url="Games/game_images/mrpeepers/1365535674.jpg"  /><ImageLoader url="Games/game_images/mrpeepers/1365535527.jpg"  /></LoaderMax></data> 
```

* * *

如果地址是手动添加的，则适用于 ios`http://wwww.mysite.ccom/Games/game_images/mrpeeper/1365535674.jpg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:42:14.450

将 $_SERVER['SERVER_NAME'] 添加到您的目录名称中，如下所示：

```
$xml_string .= "<ImageLoader url=\"" . $_SERVER['SERVER_NAME'] . "/" . $path_to_image_dir."/".$file . "\"  />"; 
```

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# php - 合并多个 PHP 数组

> ID：15914405
> 
> 赞同：3
> 
> 时间：2013-04-09T23:33:48.897
> 
> 标签：php, mysql, arrays, merge

我的问题是：我正在创建一个数组来存储这两种“细化”类型。然而，当从数据库收集信息时，当在 while 循环中创建数组时，每个“优化”都被分配给它自己的特定条目。

```
while($row = mysqli_fetch_array($result2, MYSQLI_ASSOC)){
etc...
} 
```

例如，第一个数组是对“虎胆龙威”的引用，第二个是“绝命毒师”，第三个是“Greys Anatomy”。我想要实现的是将它们合并到 1 个单个数组中。

```
Array 
      ( 
      [genreType] => Action
      [mediaType] => Film
      ) 

Array 
      ( 
      [genreType] => Action
      [mediaType] => TV
      )  

Array 
      ( 
      [genreType] => Drama
      [mediaType] => TV
      ) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:37:13.910

试试看这个，[http ://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

```
<?php
    $array1 = array("color" => "red", 2, 4);
    $array2 = array("a", "b", "color" => "green", "shape" => "trapezoid", 4);
    $result = array_merge($array1, $array2);
    print_r($result);
?> 
```

**输出**

```
Array (
    [color] => green
    [0] => 2
    [1] => 4
    [2] => a
    [3] => b
    [shape] => trapezoid
    [4] => 4
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:36:42.283

为什么不能直接使用`array_merge`？来自 php 文档[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:13:04.833

```
while{$row...
{
    $movies[] = $row;
    //OR
    $tmp['genreType'] = $row['genre'];
    //and the like.....
    $movies[] = $tmp;
} 
```

导致

```
$movies = array(
             array(
               "title"=>"Die Hard", 
               "genreType"=>"Action", 
               "mediaType"=>"Film"
             ),
             array(
               "title"=>"some other movie",
               "genreType"=>"Comedy",
               "mediaType"=>"TV"
             )
           ); 
```

像这样？

# javascript - 是否可以从应用程序控制 iTunes（使其播放暂停的歌曲）？

> ID：15914406
> 
> 赞同：1
> 
> 时间：2013-04-09T23:34:15.417
> 
> 标签：javascript, ios, audio, trigger.io, mpmusicplayercontroller

我正在查看[MPMusicPlayerController 类](https://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPMusicPlayerController_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008221)，它允许您创建一个`iPodMusicPlayer`带有**readonly的**[播放](https://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPMusicPlayerController_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008221)状态。我想知道是否有办法让我在其他地方修改播放状态以将状态从更改为.**`MPMusicPlaybackStatePaused``MPMusicPlaybackStatePlaying`**

 **如果这是播放由[TriggerIO 媒体播放器](http://docs.trigger.io/en/v1.4/modules/media.html#createaudioplayer)暂停的 iTunes 音乐的目标- 目前它支持通过暂停背景音频在您的应用程序中播放音频，但在我的音频播放后，我想继续播放背景音频。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:55:56.837

我正在将我的评论变成答案，因为如果找到更多证据。

我的假设是您正在寻找诸如背景音频或音频覆盖之类的东西。根据[如何使用 Trigger.io 在 iOS 中播放背景音频？](https://stackoverflow.com/questions/10400201/how-to-play-background-audio-in-ios-with-trigger-io)，由 trigger.io 的联合创始人回答，它尚未得到官方支持，但在他们的路线图上。**

# .net - 已安装应用程序的空引用异常

> ID：15914409
> 
> 赞同：0
> 
> 时间：2013-04-09T23:34:40.913
> 
> 标签：.net, vb.net, nullreferenceexception

我的场景是我在我的开发机器上创建了一个 VB.NET 应用程序，现在希望使用包和部署向导将它分发到另一台机器上。

**开发机器上的代码完美运行**，但是当我将它安装在目标机器上时，它给出了一个空引用异常。

我在目标机器上有一个访问数据库，它是我在我的开发机器上使用的数据库的精确副本。我的连接字符串在我的 app.config 文件中定义，我不知道如何继续。

这是我的 app.config 文件，其中包含我的连接字符串：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
</configSections>
<connectionStrings>
  <add name="connString"
       connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Dave\Documents\duraGadget.mdb"
       providerName="System.Data.OleDb" />
</connectionStrings>
<startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client" />
</startup>
</configuration> 
```

这是我的 Form1 加载（根据错误消息出现空指针）：

```
 Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    constring = ConfigurationManager.ConnectionStrings("connString").ConnectionString()

    Dim sql As String = "SELECT * FROM duragadget ORDER BY skuNo ASC"
    Dim connection As New OleDbConnection(constring)
    Dim dataadapter As New OleDbDataAdapter(sql, connection)
    Dim ds As New DataSet()
    connection.Open()
    dataadapter.Fill(ds, "dura")
    connection.Close()
    DataGridView1.DataSource = ds
    DataGridView1.DataMember = "dura"

    DataGridView1.Columns(1).Width = 125
    DataGridView1.Columns(2).Width = 125
    DataGridView1.Columns(3).Width = 125
    DataGridView1.Columns(4).Width = 125
    DataGridView1.Columns(5).Width = 5000

End Sub 
```

这是目标机器上错误消息框对话框中显示的错误消息：

有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。

****** *** ******异常文本******* *** ****** System.NullReferenceException：对象引用未设置为对象的实例。在 DuraGadget.Form1.Form1_Load(Object sender, EventArgs e) 在 System.EventHandler.Invoke(Object sender, EventArgs e) 在 System.Windows.Forms.Form.OnLoad(EventArgs e) 在 System.Windows.Forms.Form.OnCreateControl () 在 System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible) 在 System.Windows.Forms.Control.CreateControl() 在 System.Windows.Forms.Control.WmShowWindow(Message& m) 在 System.Windows.Forms.Control .WndProc(Message& m) 在 System.Windows.Forms.ScrollableControl.WndProc(Message& m) 在 System.Windows.Forms.Form.WmShowWindow(Message& m) 在 System.Windows.Forms.Form.WndProc(Message& m) 在 System .Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m) 在 System.Windows.Forms.Control。*****

 *********** *** ******加载的程序集******* *** ****** mscorlib 程序集版本：4.0.0.0 Win32 版本：4.0.30319.296 (RTMGDR.030319-2900)*****

 *****## 代码库：file:///c:/WINDOWS/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll

DuraGadget 程序集版本：1.0.0.0 Win32 版本：1.0.0.0

## 代码库：file:///C:/Program%20Files/Default%20Company%20Name/DSN%20new%20Upgrade/DuraGadget.exe

Microsoft.VisualBasic 程序集版本：10.0.0.0 Win32 版本：10.0.30319.1 构建者：RTMRel

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/Microsoft.VisualBasic/v4.0_10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll

系统组装版本：4.0.0.0 Win32 版本：4.0.30319.1001 构建者：RTMGDR

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll

System.Core 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1 构建者：RTMRel

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll

System.Windows.Forms 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1002 构建者：RTMGDR

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll

System.Drawing 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1001 构建者：RTMGDR

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll

System.Runtime.Remoting 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1 (RTMRel.030319-0100)

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Runtime.Remoting/v4.0_4.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll

System.Data 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1 (RTMRel.030319-0100)

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll

System.Configuration 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1 (RTMRel.030319-0100)

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll

System.Xml 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1 构建者：RTMRel

## 代码库：file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll

****** *** ******即时调试******* *** ****** 要启用即时 (JIT) 调试，此应用程序或计算机 (machine.config) 的 .config 文件必须在 system.windows.forms 部分中设置 jitDebugging 值。还必须在启用调试的情况下编译应用程序。*****

 *****例如：

启用 JIT 调试后，任何未处理的异常都将发送到计算机上注册的 JIT 调试器，而不是由该对话框处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:49:52.150

这是连接字符串中的来源：

```
Data Source=C:\Users\Dave\Documents\duraGadget.mdb 
```

您机器上 exe 的路径：

```
C:/Program Files/Default Company Name/DSN new Upgrade/DuraGadget.exe 
```

很可能无法打开 duraGadget 文件，因为指定文件夹（在目标计算机上）中不存在，因为 C:\Users\Dave 目录完全不存在。你说的是Windows XP，XP没有C:\Users文件夹。是的。更新连接字符串的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:40:54.750

伙计们感谢您的所有建议。经过数小时的工作后，我最终破解了它。这是一个组合。对于处于类似情况的任何人，请通过右键单击您的项目文件夹...属性使用发布选项，然后通过发布向导发布一键部署。另外我正在使用不同的数据库。拆分数据库给我带来了麻烦，在我的情况下不需要。更改这些问题以及在我的 app.config 中声明单个连接字符串，以及确保正确设置我的数据集连接字符串 最终对其进行排序，我现在可以将其安装在 XP...Win7 等上。***************

# ruby-on-rails - 恢复 Gemfile.lock

> ID：15914410
> 
> 赞同：1
> 
> 时间：2013-04-09T23:34:44.600
> 
> 标签：ruby-on-rails, redmine, gemfile

我从安装在我的机器上的 Redmine 2.2 中删除了 gemfile.lock。我怎样才能恢复它？

我尝试了“捆绑安装”，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:45:51.393

在你的情况下，这没什么大不了的。

出于可移植性的原因，Gemfile.lock 是安装了 gem 的哪个版本、它来自哪里以及它的依赖项的快照。鉴于您使用的是[打包软件](https://github.com/redmine/redmine/tree/2.2-stable)，除非您计划在未来某个时候分发您的代码，否则缺少 Gemfile.lock 并不是世界末日。

如果您绝对需要 Gemfile.lock 文件，请尝试**更改您的 Gemfile**并`bundle install`再次运行。如果找不到已缓存或安装的 gem，Bundler 会安装它。由于您正在尝试安装一组完全安装的 gem，Bundler 可能会在不执行任何工作的情况下掩盖整个过程。通过安装一个你还没有的任意 gem 给它做点什么，然后它可能会为你生成一个新的 Gemfile.lock 文件。

或者我想最简单的方法是**删除整个 gems 文件夹**然后运行`bundle install`​​. 这相当于从全新安装重新开始，而无需破坏您的数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:12:50.253

你在使用版本控制吗？如果你想试试`git reset --hard`。不然没人能帮你...

# php - 不在对象上下文中时使用 $this

> ID：15914412
> 
> 赞同：1
> 
> 时间：2013-04-09T23:34:56.593
> 
> 标签：php

我确信这一定是一个简单的答案，但我只是没有看到它。为了简化我的所有其余代码，我正在尝试将所有数据库代码移动到一个类中。

我遇到了这个错误，我不明白为什么

致命错误：在第 18 行的 /var/www/php/dbclass.php 中不在对象上下文中时使用 $this（我用箭头标记了第 18 行）

这是我的课

```
<?php

class kdb {

    var $dbhost = "localhost";
    var $dbname = "name";
    var $dbuser = "root";
    var $dbpass = "pass";

    var $error;

//    function __construct($persons_name) {
//        $this->name = $persons_name;
//    }
    //function to insert safely

    public static function exe($qry_string, $var_array) {
        $host = $this->dbhost;  <------------------ LINE 18
        $name = $this->dbname;
        $user = $this->dbuser;
        $pass = $this->dbpass;
        $retries = 30;
        while ($retries > 0) {
            try {
                $pdo_conn = new PDO("mysql:host={$host};dbname={$name}", $user, $pass);
                $retries = 0;
                //echo 'run query';
            } catch (PDOException $e) {
                $retries--;
                sleep(1); // Wait 1s between retries.
                log::enter_log("Error connecting: {$retries} retries left");
            }
        }
        $q = $pdo_conn->prepare($qry_string);
        $q->execute($var_array);
        $return_arr = $q->fetchAll();
        $this->error = $q->errorInfo();
        //dbconn::logquery($qry_string, $var_array, $q->rowCount(), $error[2]);
        return $return_arr;
    }

}

?> 
```

和页面上的代码

```
 $db = new kdb();   
    $db_list = $db->exe('select * from table where id = ?', array(42));
    var_dump($db_list); 
```

请注意它只完成了一半，我知道目前它比它需要的更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:36:35.613

从该声明中删除`static`，使其看起来像：

```
public function exe($qry_string, $var_array) { 
```

如果您处于静态上下文中，则`$this`伪 var 不可用。但是我认为这只是一个疏忽，因为您将该方法称为对象方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:38:58.667

您可以使用`self::`从静态方法访问静态变量。`$this`只是没有意义，因为它通常指向对象，而在静态函数的情况下，没有可引用的对象。

在您的特定情况下，您的函数似乎`exe`应该是实例方法而不是静态方法，因此我建议您`static`从方法定义中删除关键字。

# javascript - 将图像翻转为具有透明背景的文本

> ID：15914415
> 
> 赞同：1
> 
> 时间：2013-04-09T23:35:01.117
> 
> 标签：javascript, html, css

我没有太多使用 Javascript，但我对如何将图像翻转到另一个图像有一个粗略的想法。我正在尝试制作一个图像，当鼠标悬停时，它将成为一块文本的透明背景，该文本块将占据图像所占据的空间。我看过很多教程，但没有什么与之匹配的。

另外：有没有办法用css或其他方式格式化这个文本？（如添加填充、换行符等）

任何帮助或指向我能找到的网站的链接将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:52:33.073

这个[小提琴](http://jsfiddle.net/asifrc/Spres/)是一个纯 css 实现，它改变悬停时放置在文本前面的图像的不透明度。为此，我将文本和图像容器都放在容器 div 中并设置`position: absolute`为重叠。然后我使用选择器更改图像的不透明度`:hover`。由于文字在图像后面，因此无法选择。让我知道这是否是您想要的，如果不是，请指定您想要的不同:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:56:41.590

如果您希望文本在鼠标悬停后保留，您可以使用 javascript 在鼠标悬停时切换一个类并添加一些文本。例如，将图像作为背景放置到具有某些类（例如`class="solid-image"`）的 div 中。当您想要更改元素时，只需更改类（例如，使用`myElement.className="translucent-image"`），然后您可以拥有以前不可见的文本，或者您可以通过使用将文本添加到 div（只要它没有子元素）`textContent`或`innerText`元素。例如：

```
text = "textContent" in document ? "textContent" : "innerText";
myDomElement[text] = "My text here"; 
```

然后为适当的事件添加一个事件监听器。

# sql - SQL 创建表缺少括号

> ID：15914421
> 
> 赞同：-1
> 
> 时间：2013-04-09T23:35:42.353
> 
> 标签：sql, oracle, create-table

我正在运行这两个命令来创建新表，但是第二个创建表命令一直给我错误。

```
CREATE TABLE TEAMSTADIUM(
stadium_name varchar2(40) not null,
stadium_max_capcity number(10) not null,
stadium_field_serface varchar2(40) not null,
stadium_year_built number(4) not null,
stadium_location varchar2(40) not null,
Primary KEY(stadium_name)
)

CREATE TABLE TEAMINFO(
team_name varchar2(40) not null,
team_owner varchar2(40) not null,
team_coach varchar2(40) not null,
team_created Date() not null,
PRIMARY KEY(team_name)
foreign key(stadium_name) references TEAMSTADIUM(stadium_name)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:44:22.137

您的`TEAMINFO`表引用`TEAMSTADIUM.stadium_name`，但没有自己的此类列。添加它，并确保它与父表具有完全相同的数据类型：

```
CREATE TABLE TEAMINFO(
  team_name varchar2(40) not null,
  team_owner varchar2(40) not null,
  team_coach varchar2(40) not null,
  team_created Date not null,
  -- Remove ()    ^^
  -- This column must exist in both tables
  stadium_name varchar2(40) not null,
  PRIMARY KEY(team_name),
  -- missing comma     ^^
  foreign key(stadium_name) references TEAMSTADIUM(stadium_name)
) 
```

应用上面的三个修改后，它会正确执行：[http ://sqlfiddle.com/#!4/883a4](http://sqlfiddle.com/#!4/883a4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:39:17.870

尝试使用`Date not null;`并放在`;`每个`)`茶几之后

```
CREATE TABLE TEAMINFO(
   stadium_name varchar2(40) not null,
   team_name varchar2(40) not null,
   team_owner varchar2(40) not null,
   team_coach varchar2(40) not null,
   team_created Date not null,
   PRIMARY KEY(team_name),
   foreign key(stadium_name) references TEAMSTADIUM(stadium_name)
); 
```

# ruby - 如何使用 ruby 查找字符串中 2 个单词组合的频率？

> ID：15914422
> 
> 赞同：0
> 
> 时间：2013-04-09T23:35:48.577
> 
> 标签：ruby

我一直在使用下面的代码来使用 Ruby 查找字符串中给定单词的频率。我的问题是如何调整它以在给定时间找到 2 个单词的频率。例如：“咩咩咩黑羊”应该返回......

```
{"baa baa"=>2, "baa black"=>1, "black sheep"=>1} 
```

代码：

```
def count_words(string)
  words = string.split(' ')
  frequency = Hash.new(0)
  words.each { |word| frequency[word.downcase] += 1 }
  return frequency
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:14:21.477

```
str = "baa baa baa black sheep"

count = Hash.new(0)
str.split.each_cons(2) do |words|
  count[ words.join(' ') ] += 1
end
count
# => {"baa baa"=>2, "baa black"=>1, "black sheep"=>1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:02:55.240

```
def count_words(string)
  words = string.downcase.split(' ')
  frequency = Hash.new(0)
  while words.size >= 2
    frequency["#{words[0]} #{words[1]}"] += 1
    words.shift
  end
  frequency
end 
```

# php - 从返回的数据中仅获取 XML 内容

> ID：15914424
> 
> 赞同：0
> 
> 时间：2013-04-09T23:36:07.887
> 
> 标签：php, xml, xml-parsing

我完全坚持如何解决这个问题。基本上我有一个 curl 调用，它返回一个 xml 以及其他信息，我需要做的基本上只是获取返回数据的 xml 部分并将其设置为我猜的单独变量。所以例如

```
 array(
    ['name']='john',
    ['location']='california',
  )

  <?xml version="1.0"?>
     <data>
       <name>somename</name>

    </data>

   array(
    ['name']='john',
    ['location']='california',
  )

  array(
    ['name']='john',
    ['location']='california',
  ) 
```

所以我只想要整个数据的 XML 部分。我没有尝试过任何事情，因为我什至不知道从哪里开始，请有人帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T01:21:32.023

作为前奏，重要的是要注意无论你在做什么，这几乎肯定是错误的做法。您应该尝试和操作生成此数据的应用程序，以便它以严格定义的格式生成数据。

出于此答案的目的，我将假设在这种情况下这是不可能的。

* * *

很明显，这个问题的答案是使用正则表达式从其余数据中提取 XML。

但是尝试提供此正则表达式的其他两个答案对于通用用例来说都不够好。这是我要做的：

```
@
    (?:<\?xml.*?\?>\s*)?             # optionally match the XML declaration
    <([^/]\S*)[^>]*>                 # match opening tag and capture the tag name
    (?:                              # group alternates together
        (?>                          # atomic group for efficiency
            (?:(?!</?[^/>]+[^/]>).)+ # match everything up to the next long tag
        )
      | (?R)                         # ...or a recursive match of the expression
    )*                               # ...zero or more times
    </\1>                            # match the closing tag
@isx 
```

至关重要的是，这假设您要查找的 XML 格式正确。重要的是要注意您不应该，并且在很大程度上*不能*在此任务中使用正则表达式，除非您 100% 确定要搜索的 XML 格式正确。

如果是这种情况，此表达式将匹配任何嵌套在给定字符串中的完整 XML 文档，并且能够处理诸如标签名称与文档元素匹配的元素和自闭合标签之类的陷阱。

[看到它工作](http://codepad.viper-7.com/WDAJ94)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:00:21.540

尝试这个：

```
$result = "
  array(
    ['name']='john',
    ['location']='california',
  )

  <?xml version=\"1.0\"?>
     <data>
       <name>somename</name>

    </data>

   array(
    ['name']='john',
    ['location']='california',
  )

  array(
    ['name']='john',
    ['location']='california',
  )
";

$matches = array();
preg_match('/<\?xml(.*)<\/data>/is', $result, $matches);

var_dump(reset($matches)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:42:22.177

您应该能够使用正则表达式来检测 XML 标头 ( `<?xml version="1.0"?>`) 和根元素 ( `<data>`)。一旦你有了它，你只需要检测结束标签 ( `</data>`) 就可以了！小麦与谷壳分离！

# asp.net - 我如何获得 asp:Panel Default Button 来触发按钮单击事件？

> ID：15914429
> 
> 赞同：0
> 
> 时间：2013-04-09T23:36:59.157
> 
> 标签：asp.net, textbox, enter, dopostback, defaultbutton

我有三个 asp net 文本框，其中包含搜索表的搜索条件。我希望搜索像谷歌一样工作。当按下回车键以触发“回车”按钮上的单击事件时。click 事件永远不会触发。我该怎么做才能让它着火？

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebCategoryGenerateEdit.ascx.cs"
Inherits="EPPA.Controls.WebCategoryGenerateEdit" ClientIDMode="Static" %>
<script src="/Scripts/jquery-1.8.3.js" type="text/javascript"></script>
<script type="text/javascript">
//    debugger;
function pageLoad() {
    var gvCategoryMessage = $("#<%=GVCategoryMessage.ClientID %>").html

    if (gvCategoryMessage.length != 0) {
        $("#<%=GVParentCategoryLinkTitle.ClientID %>").keydown(function () {
            $("#<%=GVCategoryMessage.ClientID %>").html("");
        })
        $("#<%=GVCategoryLinkTitle.ClientID %>").keydown(function () {
            $("#<%=GVCategoryMessage.ClientID %>").html("");
        })
    }
}
</script>
<asp:ScriptManager runat="server" />
<asp:MultiView ID="Multiview1" runat="server" ActiveViewIndex="0">
<asp:View ID="SearchView" runat="server">
        <asp:Table ID="TableSV1" runat="server">
            <asp:TableRow ID="TableRowSV1" runat="server">
                <asp:TableCell ID="TableCellSV1" runat="server">
                    <asp:Label ID="LabelSV1" runat="server" SkinID="SearchTextLabel"
Text="CB or CJ" CssClass="searchTextLabel_Division"/>
                </asp:TableCell>
                <asp:TableCell ID="TableCellSV2" runat="server">
                    &nbsp;<asp:Label ID="LabelSV2" runat="server"
SkinID="SearchTextLabel" Text="Parent Category Link Title"
CssClass="searchTextLabel_ParentCategoryLink" />
                </asp:TableCell>
                <asp:TableCell ID="TableCellSV3" runat="server">
                    &nbsp;<asp:Label ID="LabelSV3" runat="server"
 SkinID="SearchTextLabel"
 Text="Category Link Title" CssClass="searchTextLabel_CategoryLink" />
                </asp:TableCell>
                <asp:TableCell ID="TableCellSV4" runat="server">
                    &nbsp;<asp:Label ID="Label1" runat="server" 
 SkinID="SearchTextLabel"
 Text="Category ID" CssClass="searchTextLabel_CategoryID" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="SVTableRowSV2" runat="server">
                <asp:TableCell ID="TableCellSV5" runat="server">
                    <asp:DropDownList ID="SVDivisionDDL" runat="server"
 OnSelectedIndexChanged="SVDivisionDDL_SelectedIndexChanged" AutoPostBack="true" >
                        <asp:ListItem Value="CB">CB</asp:ListItem>
                        <asp:ListItem Value="CJ">CJ</asp:ListItem>
                    </asp:DropDownList>
                    &nbsp;
                </asp:TableCell>            
                <asp:TableCell ID="TableCellSV6" runat="server" >
                   <asp:panel ID="SVPCLTContainer" runat="server"
                    DefaultButton="SV6EnterButton">                       
                      <asp:TextBox ID="SVParentCategoryLinkTitle" runat="server"
                         SkinID="SearchTextBox"
                         CssClass="searchTextBox_ParentCategoryLink"  />
                      <asp:Button ID="SV6EnterButton" runat="server"  Visible="false"
                         Text="Enter" OnClick="EnterKeyPressed_Click" />  
                   </asp:panel>
                   &nbsp;
                </asp:TableCell>            
                <asp:TableCell ID="TableCellSV7" runat="server" >
                    <asp:TextBox ID="SVCategoryLinkTitle"
                         runat="server" SkinID="SearchTextBox" 
                           CssClass="searchTextBox_CategoryLink" />
                    &nbsp;
                </asp:TableCell>            
                <asp:TableCell ID="TableCellSV8" runat="server" >
                    <asp:TextBox ID="SVCategoryID" runat="server"
                       SkinID="SearchTextBox"
                       CssClass="searchTextBox_CategoryID" />
                    &nbsp;
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
    <asp:Button ID="SVGenNewButton" runat="server" Text="Generate New Category ID"
 OnClick="SVGenerateNewButton_Click" />
    &nbsp;
    <asp:Button ID="SVDeleteButton" runat="server" Text="Delete Checked items"
 OnClick="SVDeleteButton_Click" />
    <div style="width:618px; overflow-x:no-display; overflow-y:auto; max-height:392px; 
 padding-top:2px; ">
        <asp:GridView ID="gvWebCategoryID" runat="server" AutoGenerateColumns="False"
 SkinID="gridViewSkin" OnRowDeleting="gvWebCategoryID_RowDeleting" >
            <Columns>
                <asp:TemplateField HeaderText="Edit">
                    <ItemTemplate>
                       <asp:Button ID="SVgridViewEditButton" runat="server"
 OnClick="gvWeCategoryIDEditButton_Click" Text="Edit" />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Delete">
                    <ItemTemplate>
                       <asp:CheckBox ID="Checkbox1" runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="Division" HeaderText="CB or CJ"
                 Visible="true"  />
                <asp:BoundField DataField="ParentCategoryLinkTitle" HeaderText="Parent
                 Category Link Title" />
                <asp:BoundField DataField="CategoryLinkTitle" HeaderText="Category 
                     Link Title" />
                <asp:BoundField DataField="CategoryID" HeaderText="Category ID" />
                <asp:TemplateField HeaderText="Error Message" Visible="false" >
                    <ItemTemplate>
                       <asp:Label ID="ErrorMessage" runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </div>
</asp:View>

</asp:MultiView> 
```

这是后面的代码方法：

```
 protected void EnterKeyPressed_Click(object sender, EventArgs e)
    {
        ReloadData();
        this.Multiview1.ActiveViewIndex = 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:05:14.277

快速浏览一下，您是否尝试过在此处删除 return false ：

```
$("#<%=SVParentCategoryLinkTitle.ClientID %>").keydown(function (e) {
    if (e.which == 13) {
        __doPostBack("#<%=EnterKeyPressed.UniqueID %>", "");
        return false;
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:04:42.657

如果有帮助，请查看此问题和答案：[Default button not working in asp.net panel](https://stackoverflow.com/questions/11923457/default-button-not-working-in-asp-net-panel)

如果焦点已经在面板内，`DefaultButton`则用于捕获`Enter`按键，例如，您必须将焦点移动到面板内的文本框等输入字段。如果焦点不在那里，它将无法工作。

# javascript - 为什么 $(window).width() 会大于 CSS 最大宽度？

> ID：15914442
> 
> 赞同：0
> 
> 时间：2013-04-09T23:38:00.347
> 
> 标签：javascript, jquery, css

在我的 CSS 中，我有这样的代码：

```
html {
background:blue;
}
@media screen and (max-width: 980px)
html {
background:red;
} 
```

所以当浏览器窗口小于 980px 时，背景变为红色，其余时间为蓝色。

我将窗口大小调整为 970 像素（根据 CSS），背景为红色。但是当我使用 jquery 做 a`alert($(window).width())`时，这给了我一个弹出窗口说 1000px

为什么 $(window).width() 会报告比 CSS 预期更大的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:04:43.793

没有足够的背景来告诉您浏览器中到底发生了什么。

我写了以下页面来测试所有内容：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<style>
    html { background:blue; }
    @media screen and (max-width: 980px) {
        html { background:red; }
    }
</style>
</head>
<body>test</body>
</html> 
```

在与检查员进行测试后，`$(window).width()`Chromium 检查员的内部会准确显示它应该是什么。

当屏幕为红色时，检查器中设置了以下样式：

```
margin-left: 8px;
margin-right: 8px;
width: 964px; 
```

...和控制台中的 jquery 显示：

```
> $(window).width()
980 
```

总宽度是宽度 + 所有边距。所以，它是：964 + 8 + 8 = 980。

在我看来，这种不一致是由为您正在测量的标签和任何父标签设置的**边距和可能的边框引起的。**我没有看到这种行为的任何其他原因。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:43:48.910

我相信可见页面和窗口大小之间存在差异。据我了解，在香草 JS 中：

```
window.innerWidth, window.innerHeight 
```

（页面的可见宽度/高度）

```
window.outerWidth, window.outerHeight 
```

（浏览器外部宽度/高度）

我觉得这可能就是为什么 - 返回的值是浏览器窗口的外部宽度。[资源](http://www.javascripter.net/faq/browserw.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:32:49.307

我解决了这个问题。

在 chrome 中，我按了 CTRL MINUS 几次，所以窗口以某种方式缩放以显示更小的文本。完成此操作后，jquery 将报告与 css 报告不同的窗口宽度

# android - 在 Android 上分析 AudioTrack（Visualizer 的替代品）

> ID：15914443
> 
> 赞同：3
> 
> 时间：2013-04-09T23:38:04.090
> 
> 标签：android, visualization, audio-recording, audiorecord, audiotrack

我想分析我的 Android 应用程序录制的麦克风声音。

不幸的是，[Visualizer](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)只能在当前正在播放的[AudioTrack上工作。](http://developer.android.com/reference/android/media/AudioTrack.html)目前我正在使用 AudioRecord 进行录制，[并将](http://developer.android.com/reference/android/media/AudioRecord.html)数据复制到可视化工具正在监听的 AudioTrack 中。但是这种架构会导致可怕的播放记录循环。

一种解决方法是在录制时将 AudioTrack 的音量调到最低，但这听起来根本不是一个好的解决方案。

是否有任何替代[Visualizer](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)类的方法可以从记录的轨道中捕获 FFT 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T14:27:57.843

额外的。它说

AudioFlinger createEffect_l() effect Visualizer (flags 00000008) created on wrong thread type 3 AudioEffect set(): AudioFlinger could not create effect, status: -22

搜索“在错误的线程类型上创建”后发现可视化输入信号有问题。到目前为止，我一直在挣扎，但毫无结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T09:29:46.067

我现在解决了这个问题，方法是直接分析来自 AudioRecord 的数据，如[Android 音频 FFT 中所述，以使用 audiorecord 检索特定的频率幅度](https://stackoverflow.com/questions/5774104/android-audio-fft-to-retrieve-specific-frequency-magnitude-using-audiorecord)。

# javascript - Javascript函数需要2次点击才能触发

> ID：15914450
> 
> 赞同：0
> 
> 时间：2013-04-09T23:38:32.573
> 
> 标签：javascript, html, css, modal-dialog

我有一个 javascript 函数来打开和关闭一个模态，它检查模态是否打开和关闭，但第一次需要单击 2 次才能触发，直到您刷新页面然后您必须再次单击 2 次。

Javascript：

```
function ToggleModal(Box) {
        var Modal = document.getElementById(Box);
        var Display = Modal.style.display;

        if(Display == 'none')
        {
            Modal.style.display = 'block';
            document.getElementById('Wrapper').style.overflow = 'hidden';
        }
        else
        {
            Modal.style.display = 'none';
        }
    } 
```

CSS：

```
.Modal {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("../IMG/Modal.png");
    background-repeat: repeat;
    z-index: 2000;
} 
```

我的分区：

```
<div id="Login" class="Modal">
    <div id="LoginForm" class="Form">
        <div class="ModalTitle">Sign In <a href="#" class="Toggle" onclick="ToggleModal('Login');"></a></div>
        <div class="ModalBody">
            <form id="LForm" action="/Assets/PHP/Login/Login.php" method="POST">
                <label for="User">Username:</label>
                <input id="User" type="text" name="User" class="Input" placeholder="Username" />

                <label for="Pass">Password:</label>
                <input id="Pass" type="password" name="Pass" class="Input" placeholder="Password" />
            </form>
            <div class="Clear"></div>
        </div>
    </div>
</div> 
```

Logo div id 没有样式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:48:05.690

最有可能的是，初始样式不是“块”或“无”。

第一次单击时`(Display == 'none')`为假，因此显示设置为“无”（因此您的模式不会出现）。

第二次，`(Display == 'none')`是真的，所以显示设置为“阻止”。

如果是这种情况，您应该可以通过更改`(Display == 'none')`为`(Display != 'block')`.

# php - 单词“数组”出现在博客文章页面上

> ID：15914451
> 
> 赞同：0
> 
> 时间：2013-04-09T23:38:36.163
> 
> 标签：php, templates

当我使用下面的代码时，我的博客帖子页面上出现了“数组”这个词。我有一种感觉，它与这条线有关：

我正在为我的 PORTFOLIO 和 NEWS 页面使用类似的模板，其中这一行的措辞略有不同（“showportcat”和“shownewscat”而不是“get_the_category”），它应该显示类别，而是显示“数组”这个词在它的位置。

我试过“showpostcat”，但没用，所以我想知道是否需要重新措辞？或者问题可能出在我下面包含的代码的另一部分？

```
 <div class="greyblock">
            <h4 class="nomar"><?php echo the_title(); ?></h4>
            <div class="sep"></div>

                <?php echo get_the_category(get_the_ID()); ?>

                <div class="clear"></div>
                <ul class="blogpost_list columns2">

                <?php
                $temp = $wp_query;
                $wp_query = null;
                $wp_query = new WP_Query();
                $args = array(
                'post_type' => 'post',
                'paged' => $paged,
                'posts_per_page' => get_option("posts_per_page"),   
                );

                if (isset($_GET['slug'])) {
                $args['tax_query']=array( 
                        array( 
                            'taxonomy' => 'postcat',  
                            'field' => 'slug',  
                            'terms' => $_GET['slug']  
                         )
                    );
                }

                $wp_query->query($args);
                ?>
                <?php while ( $wp_query->have_posts() ) : $wp_query->the_post(); 
                #We have:
                #get_permalink() - Full url to post;
                #get_the_title() - Post title;
                #get_the_content() - Post text;
                #get_post_time('U', true) - unix timestamp

                $featured_image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' );   

                echo "
                <li class='pc'>
                        <img alt='".get_the_title()."' src='".TIMTHUMBURL."?w=400&h=400&src=".$featured_image[0]."'>
                        <h4>".get_the_title()."</h4>";
                        $terms = get_the_terms($post->ID, 'postcat');
                        if ( $terms && ! is_wp_error( $terms ) ) {

                        $draught_links = array();

                        foreach ( $terms as $term ) {
                            $draught_links[] = $term->name;
                        }

                        $on_draught = join( ", ", $draught_links );
                        }

                echo "
                <p>".get_the_excerpt()."</p>
                    <a href='".get_permalink()."' class='read'>Read more</a>                        
                    <br class='clear' />
                </li>
                ";  

                 endwhile; ?>

            </ul>
        </div>
        <?php get_pagination() ?>
        <?php $wp_query = null; $wp_query = $temp;  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:43:44.310

怎么样：

```
$categories = get_the_category(get_the_ID());
foreach ($categories as $category) {
    echo $category;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:10:54.453

问题仍然存在。我猜这与我对以下两行之一的措辞方式有关，因为它是用于投资组合的“showportcat”和用于新闻的“shownewscat”，但“showpostcat”不适用于帖子，所以我只是想不通出去：

```
 <?php echo get_the_category(get_the_ID()); ?>
 **OR**
 'taxonomy' => 'postcat', 
```

# sql - Access 2000 中的连接

> ID：15914457
> 
> 赞同：1
> 
> 时间：2013-04-09T23:39:21.797
> 
> 标签：sql, ms-access, concatenation

我搜索了“连接”主题，但无法找到我需要的答案。这篇文章接近 [访问 sql 查询以连接行](https://stackoverflow.com/questions/8601643/access-sql-query-to-concatenate-rows)，但我试图让它为我的目的工作失败了。

我有一张这样的桌子

```
Lic# | Permit  | Year     
------------------------
1    | NS1     |   2003   
1    | NS1     |   2004  
1    | NS2     |   2004  
2    | TR      |   2012  
2    | NS2     |   2012  
3    | OR      |   2008   
2    | OR      |   2011  
2    | NS1     |   2011  
2    |  TR     |   2011 
```

....等等。此表有许多唯一的许可证编号，每个许可证类型和年份（从 2003 年到 2012 年）都列出。

我想要的是创建一个表格来显示这样的信息

```
Lic#  | Permit      | Year  
-----------------------------
1     |NS1          | 2003  
1     | NS1, NS2    | 2004  
2     | TR, NS2     | 2012  
3     | OR          | 2008  
2     | OR, NS1, TR | 2011 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:52:16.813

正如我在评论中发布的那样，`group_concat()`在 MySQL 中使用该功能很容易，但是如果您想在 MS Access 中执行此操作，我认为您必须使用 VBA 来处理这个问题。

我建议你这个功能：

```
public function concatenatePermits(licNo as integer, year as integer)
    dim db as DAO.database, rec as DAO.recordset, strSQL as string
    dim ans as string

    set db = currentdb()
    strSQL = "select permit from [your table] " & _
             "where [lic#]=" & licNo & " and year=" & year & ";"
    set rec = db.openrecordset(strSQL, dbOpenDynaset, dbReadOnly)
    ans = ""
    with rec
        .moveFirst
        do
            if ans = "" then
                ans = !permit
            else
                ans = ans & "," & !permit
            end if
        loop until .EOF
    end with
    rec.close
    db.close
    concatenatePermits = ans
end function 
```

此函数可用于任何查询。缺点：如果你的表真的很大，使用这个函数的查询的执行会**很慢**。我认为更好的方法是创建一个空表，然后使用 VBA 逐行填充它。

希望这对您有所帮助。

* * *

**使用 VBA 添加行**

在您的评论中，您询问如何使用 VBA 向表中添加行。假设该表存在并且您有要输入该表的数据，我建议您这样做：

```
public sub addData()
    dim db as dao.database, recOut as dao.recordset
    ' Declare all the variables you need for your code'
    set db = currentdb()

    ' recOut will be the table where you want to store your data '
    set recIn = db.openRecordset("tblYourOutTable",dbOpenDynaset,dbEditAdd)

    ' At some point in your code you will need to store data in your table: '
    with recOut
        .addNew
            ![A_Field] = value1
            ![Another_field] = value2
            ![Yet_another_field] = value3
        .update
    end with

    ' Close the recordset and the database objects '
    rec.close
    db.close
end sub 
```

# ios - “以编程方式”将 UICollectionViewController 的视图添加到超级视图

> ID：15914458
> 
> 赞同：1
> 
> 时间：2013-04-09T23:39:34.420
> 
> 标签：ios, objective-c, uicollectionview

我正在尝试以编程方式将 UICollectionView 添加到主视图中。

我首先创建了一个“PhotosViewController.h/h/xib”文件（类型为 UIViewController），删除了给出的视图并添加了一个**UICollectionView**作为该控制器的主视图，然后将“PhotosViewController.h”的超类更改为 UICollectionViewController .

我按照本教程中给出的前 6 个步骤进行操作：http: **[//skeuo.com/uicollectionview-custom-layout-tutorial](http://skeuo.com/uicollectionview-custom-layout-tutorial)**然后跳到第 14 步。我要做的只是在用户单击时显示此视图在分段控制按钮上。

```
if ([segmentedControl selectedSegmentIndex]==3){
    //Photos View Controller
    pvc=[[PhotosViewController alloc] init];
    NSLog(@"Photos segment is chosen!");
    [[self view] addSubview:pvc.view]; **//Line 5**
} 
```

**但是程序在到达Line 5**时抛出异常。

这是我收到的日志消息。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'UICollectionView must be initialized with a non-nil layout parameter' 
```

看起来，我在这里遗漏了一些非常基本的东西。在过去的一个小时里，我一直在寻找任何解决这个问题的方法，但我找不到任何东西。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:35:37.550

```
[[PhotosViewController alloc] init]; 
```

I assume this is where you are creating your collection view controller. The designated initialiser for this class is [`initWithCollectionViewLayout:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewController_clas/Reference/Reference.html#//apple_ref/occ/instm/UICollectionViewController/initWithCollectionViewLayout%3a), where you'd pass in a layout object. You aren't passing one in, so it complains. Try using that initialiser, or, in your subclass, make sure you call this instead of [super init], and pass in a new flow layout object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:24:23.620

我不清楚你在哪里初始化你的集合视图，但它应该看起来像这样：

```
UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
[flowLayout setScrollDirection:UICollectionViewScrollDirectionVertical];

collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(0.0f,
                                                                    230.0f,
                                                                    [self viewWidth],
                                                                    [self viewHeight]) 
                                    collectionViewLayout:flowLayout]; 
```

除非你有更扩展的 UICollectionViewFlowLayout。

从您收到的消息来看，您似乎没有在您的 collectionViewLayout 中给它一个 UICollectionViewFlowLayout：

# jquery - 带有 URL 内容的滑动 div

> ID：15914460
> 
> 赞同：0
> 
> 时间：2013-04-09T23:39:51.123
> 
> 标签：jquery

我正在尝试创建一个两列页面，其中单击左侧的链接将导致来自另一个 URL（在同一域上）的内容水平向右滑动。

[**这个小提琴**](http://jsfiddle.net/sg3s/RZpbK/)是我目标的一个很好的例子。

我无法弄清楚的是如何使用此脚本加载外部内容。jQuery`.load(url);`似乎是实现这一目标的理想方式，但我无法让它与上面小提琴中显示的 jQuery 一起工作。

有谁知道这是否可以做到，或者是否有更好的方法来达到同样的效果？

下面的小提琴代码。

HTML：

```
<div id="left">
    <a href="#target1" class="panel">Target 1</a><br/>
    <a href="#target2" class="panel">Target 2</a><br/>
    <a href="#target3" class="panel">Target 3</a><br/>
</div>

<div id="right">
    <div class="panel" id="target1" style="background:green">Target 1</div>
    <div class="panel" id="target2" style="background:red">Target 2</div>
    <div class="panel" id="target3" style="background:yellow">Target 3</div>
</div> 
```

脚本：

```
jQuery(function($) {
    $('a.panel').click(function() {
        var $target = $($(this).attr('href')),
            $other = $target.siblings('.active'),
            animIn = function () {
                $target.addClass('active').show().css({
                    left: -($target.width())
                }).animate({
                    left: 0
                }, 500);
            };

        if (!$target.hasClass('active') && $other.length > 0) {
            $other.each(function(index, self) {
                var $this = $(this);
                $this.removeClass('active').animate({
                    left: -$this.width()
                }, 500, animIn);
            });
        } else if (!$target.hasClass('active')) {
            animIn();
        }
    });

}); 
```

CSS：

```
#left, #right {
    position: relative;
    float: left;
    margin: 0 5px 0 0;
    border: 1px solid black;
    width: 200px;
    height: 300px;
    overflow: hidden;
}

div.panel {
    position: absolute;
    height: 100%;
    width: 100%;
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:46:27.753

如果您请求的内容尚未出现在页面上，最好添加一个服务器端组件（php、ruby 等），您可以请求第二条内容并让服务器将其发回。

IE

```
$("#target1).click(function(){
$.ajax({
url: "your-script.php", 
data: {target: "send-target-one-please"}, 
success: function(){
//append your second piece of content here
}
}); 
}); 
```

然后在你的脚本（php）中：

```
function someFunction(){
//get your content here
$myContent = file_get_contents('../path/to/my/file'); 
echo json_encode($myContent); 
} 
```

显然这是伪代码，但它的一般思想

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:54:52.983

您可以更改`animIn`功能以加载内容：

```
animIn = function () {
    $target.load(URL, function() {
        $target.addClass('active').show().css({
            left: -($target.width())
        }).animate({
            left: 0
        }, 500);
    });
}; 
```

只需替换`URL`为实际的 URL。

更新：这是[完整的代码](http://jsfiddle.net/RZpbK/862/)：

```
jQuery(function($) {

$('a.panel').click(function() {
    var $target = $($(this).attr('href')),
        $other = $target.siblings('.active'),
        animIn = function () {
            $target.load('/echo/html/', {delay:0.5,html:$target.text()}, function() {
                $target.addClass('active').show().css({
                    left: -($target.width())
                }).animate({
                    left: 0
                }, 500);
            });
        };

    if (!$target.hasClass('active') && $other.length > 0) {
        $other.each(function(index, self) {
            var $this = $(this);
            $this.removeClass('active').animate({
                left: -$this.width()
            }, 500, animIn);
        });
    } else if (!$target.hasClass('active')) {
        animIn();
    }
});

}); 
```

# c# - 如何区分 WCF 数据合同中用户指定的空值和默认值

> ID：15914464
> 
> 赞同：2
> 
> 时间：2013-04-09T23:40:50.817
> 
> 标签：c#, wcf, web-services, soap

我需要定义一个 WCF API 以使用户能够更新大对象。虽然我可以定义一些较小的方法并让用户一次更新大对象的特定部分。但由于某种原因，我无法做到这一点。我尝试的另一种方法是将数据契约定义为键值的集合（键是一个`enum`，值是一些字符串）并让用户添加他想要更新的任何内容。这个 api 非常紧凑，但不是很直观，可能会让用户感到困惑。此外，由于该值是字符串类型，所以它不是很安全。

所以我现在创建了一个 api，用户可以在其中更新整个对象。例如：

```
public UpdateResult UpdateAPI(UpdateParam param){} 
```

现在`UpdateParam`该类将几个可为空的字段。

Q：如果其中一个字段有空值，服务器端如何区分空值是用户指定的还是默认未指定的？传入的肥皂消息中是否有可以帮助区分的内容？

任何帮助将不胜感激。

提出的类似问题是 1.[数据成员默认值，如何确定是否真的发送了某些内容？](https://stackoverflow.com/questions/8993507/data-member-default-values-how-to-figure-out-whether-something-was-really-sent) 2.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:47:18.900

不，据我所知，如果您只有一个可为空的字段，则无法区分条件...

但是，您可以为每个属性提供一个额外的 bool，它可以作为一个标志来指示该值是由用户设置还是仍为默认值

您可以实现属性的设置器以在设置属性时自动设置相应的布尔值

# 3d - 边界框碰撞 - 3D XNA

> ID：15914466
> 
> 赞同：1
> 
> 时间：2013-04-09T23:41:06.447
> 
> 标签：3d, xna, collision

基本上我想在 XNA 中围绕我的 3D 模型放置一个边界框/立方体（在这种情况下，它是一个简单的绘画，因此模型本身只是一个带纹理的矩形）。

我尝试了以下代码来创建多维数据集：

```
 public BoundingBox BoundingBoxCreation()
    {
        min = Position + Vector3.Up * Height - Size / 2
        max = Position + Vector3.Up * Height - Size / 2;

        boundingBox = new BoundingBox(min, max);
        return boundingBox; 
    } 
```

然后我创建了两个相同的模型，具有相同的高度、大小和比例：比例：新 Vector3(500.0f)（大比例，因为我在 Blender 中创建它们）高度：2f 大小：新 Vector3(6.75f * 500，- 1.09f * 500, 0.35f * 500）（将所有内容乘以比例）。然后我尝试检查两者之间的碰撞，如下所示：

```
if (CollisionTest.boundingBox.Intersects(tapestryLeftOne.boundingBox))
   {
      Window.Title = "Collision";
   } 
```

然而，只有当两者绝对 100% 完全对齐时，窗口标题才会改变以显示碰撞，但我想要做到的是即使它们在任何时候都接触，而不仅仅是在它们匹配时。关于如何实现这一目标的任何想法？

如果有更好的方法来构建边界框/立方体并检测另一个边界立方体、球体等之间的碰撞，那么如果您能告诉我，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:38:10.620

根据您拥有的代码，最小值和最大值将相同。这可以解释为什么它们只有在完全对齐时才会相交。你以后要修改边界吗？

您所做的看起来是正确的，但您也可以尝试包含并检查 4 个角（Vector3），如果框大小相同

有关模型边界框的更多信息 [http://www.toymaker.info/Games/XNA/html/xna_bounding_box.html](http://www.toymaker.info/Games/XNA/html/xna_bounding_box.html)

# encryption - Azure SQL 数据库是否支持加密？

> ID：15914467
> 
> 赞同：1
> 
> 时间：2013-04-09T23:41:09.817
> 
> 标签：encryption, azure, azure-sql-database

我在多个网站上读到 Azure 不支持加密。

但是，我正在使用“Azure SQL 迁移工具”将 Azure DB 迁移（更像是备份）到 SQL Server，并且收到有关编写视图脚本的警告：“加密对象不会被编写脚本”。

还在他们的网站上找到了这个注释：问题在 v3.5.5 中修复。基本上，存储过程、视图、UDF、触发器......任何可以加密的对象都是事先检查的。加密的对象以黄色和红色字母突出显示。在摘要页面上，将显示不会编写脚本的加密对象列表。

[http://sqlazuremw.codeplex.com/workitem/5762](http://sqlazuremw.codeplex.com/workitem/5762)

如果 Azure SQL 支持加密，如何获取此视图的创建脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:55:02.240

Windows Azure SQL 数据库（数据库即服务）不支持加密。但是：如果您在虚拟机中运行 SQL Server，您应该可以使用所有功能，包括加密。

关于目标端涉及加密对象的创建脚本，我无法解释从 SQL 数据库迁移到 SQL Server 发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:06:42.977

SQL 数据库仍然不支持加密，因此要么您正在从 SQL Server 数据库读取数据，要么向导中存在错误。据我所知，SQL 数据库中没有加密的数据库对象。如果您确定您正在从 SQL 数据库读取数据，只需尝试在其中创建一个加密视图，看看会发生什么。从 MSDN 文档中，不支持创建加密视图：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee336244.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336244.aspx)。

我很想知道您是否遇到与 Enzo Cloud Backup 相同的错误：http: [//www.bluesyntax.net/backup20.aspx](http://www.bluesyntax.net/backup20.aspx)。只需使用免费版。

# java - 当我们说“整数是不可变的”时，我们究竟是什么意思

> ID：15914468
> 
> 赞同：1
> 
> 时间：2013-04-09T23:41:10.440
> 
> 标签：java, c++

我对“不可变”的概念感到困惑。我们的教授每天都在说“整数是不可变的！字符串是不可变的”，他到底是什么意思？

一个更普遍的问题，我们如何知道数据结构是否不可变？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T00:42:00.013

*这里的其他一些答案将可变性/不变性与值/引用语义混淆了，所以要小心......*

* * *

简而言之，如果实体在创建后可以修改，则它是可变的。换句话说，它的价值可能会随着时间而改变。

首先，一个反例。Java`String`对象是不可变的；没有可以调用`String`会更改其值的对象的方法：

```
String a = "foo";
a.concat("bar");
System.out.println(a);  // foo 
```

你可以这样做：

```
String a = "foo";
a = a.concat("bar");
System.out.println(a);  // foobar 
```

但这很有效，因为`concat()`它正在创建一个**新** `String`对象，然后将引用`a`重新指向它。现在有**两个** `String`对象；原件没有改变（只是永远丢失了）。 `a`是可变的，底层对象不是。

* * *

至于`int`变量；在 C 或 Java 中，我们可以这样做：

```
int x = 3;
x = 4;  // Mutates x
x++;    // Mutates x 
```

我们如何知道这些真的 mutate `x`，而不是简单地创建一个新的整数“对象”并“重新指向”`x`它？（除了语言向我们保证原始类型不同于对象类型这一事实。）在 C 中，我们可以在某种程度上证明这一点：

```
int x = 3;
int *p = x;   // Pointer to original entity
x = 4;
printf("%d\n", *p);   // 4 
```

AFAIK，Java 中没有等效的方法。因此，您可能会争辩说整数类型在 Java 中是否真正可变的问题是无关紧要的。

* * *

至于我们如何知道给定类型是否不可变，我们通常不知道。至少，不是没有检查它，或者只是相信我们被告知的一个承诺。

在 Java 中，确保用户定义的类型是不可变的涉及遵循一些简单的规则（[在此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html)解释）。但这仍然只是一个承诺；语言不强制执行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T23:45:32.510

不变性（对象或值，而不是变量）通常意味着无法对值*进行就地*更改。（一个会传播到其他对它的引用。）这意味着如果您有以下内容：

```
String a = "foo"; 
```

您可以执行的任何操作都`a`不会改变其值。即你*不能*有一个假设的方法`append()`会导致以下行为：

```
String a = "foo";
a.append("bar"); // a is not reassigned
System.out.println(a); // prints "foobar" 
```

您可以将此与可变对象（如集合）进行对比：

```
int[] as = new String[] { "foo" };
as[0] = "bar"; // we're changing `as` in-place - not the Strings stored in it
System.out.println(as[0]); // prints "bar" 
```

原始类型不是 Java 示例的一个很好的选择，因为您不能对它们有多个引用，并且没有办法证明突变和重新分配之间的区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T00:06:23.090

谈论`int`s 的不变性很尴尬，因为改变不是容器的东西的想法对我们大多数人来说没有意义。那么让我们来谈谈字符串。

这是一个字符串，在 Python 中：

```
s = "abc" 
```

字符串是容器，因为它们包含一定数量的单个字符：here `a`、`b`和`c`. 如果我想将第二个字符更改为 a `d`，我可以尝试：

```
s[1] = 'd' 
```

哪个会失败`TypeError`。我们说字符串在 Python 中是*不可变*的，因为没有任何操作会*改变现有的字符串*。当然有很多操作会执行一些操作并创建一个*新*的字符串，但是现有的字符串是一成不变的。

这里有几个优点。一个是它允许*实习*：有时当一个字符串需要分配时（并且由解释器决定），CPython 会注意到一个相同的字符串已经被分配并且只是重用相同的`str`对象。当字符串是不可变的时，这是最简单的——否则，你必须对这样的问题做一些事情：

```
s = "abc"
t = "abc"   # this reuses the same memory, as an optimization
s[0] = "x"  # oops!  now t has changed, too! 
```

实习在 Python 和支持运行时反射的类似语言中特别有用：它必须在运行时知道每个函数和方法的名称，并且*很多*方法都有内置名称，例如`__init__`（构造函数方法的名称），因此重用相同的所有这些相同名称的字符串对象可以节省大量浪费的空间。

另一个优势在于语义：您可以安全地将字符串传递给任意函数，而不必担心它们会在您背后就地更改。函数式程序员很欣赏这种东西。

当然，缺点是对非常大的字符串进行大量工作需要多次重新分配和重建这些大字符串，而不是在原地进行小的编辑。

现在，关于`int`s。这不是不变性的示例：

```
x = 3
x = 4 
```

这根本不涉及实际对象；它只为变量分配一个新值`x`。

改为考虑：

```
x = [1, 2, 3]
y = x
x[:] = [4, 5, 6]
print y  # [4, 5, 6] 
```

语法是“`x[:] =`切片表示法”，用于替换列表的全部内容。在这里，`x`和`y`是*同一个*列表的两个名称。因此，当您替换 的内容时`x`，您也会在 中看到相同的效果`y`，因为...它们都命名了相同的列表。（这与其他语言中的引用变量不同：您可以为其中一个`x`或`y`不影响另一个分配一个新值。）

用数字来考虑这一点。如果您可以对普通数字进行上述假设操作，则会发生这种情况：

```
x = 3
y = x
x[:] = 4
print y  # hypothetically, 4 
```

但你不能那样做。您无法更改现有`int`代表的数字。所以我们称它们为不可变的。

`int`在 Smalltalk 中改变 an很容易：

```
3 become: 4 
```

这会将3*更改*为 4，覆盖之前包含 3 的内存。如果`int`s 被实习（因为它们可以在 Python 中），这甚至可能意味着`3`源代码中到处都出现，*它就像数字 4 一样*。

在 C 中，这些区别没有那么有意义，因为变量是固定的内存块，而不是 Python 的临时标签。所以当你这样做时：

```
int x = 3;
x = 4; 
```

很难明确地说这是否是在“变异”一个 int。它确实会覆盖现有内存，但这也是 C 变量赋值的*工作方式*。

反正！可变性只是关于您是要更改现有对象还是用新对象替换它。在 Python 和 Java 中，您无法更改现有字符串，也无法“更改”数字，因此我们称它们为不可变的。您可以*就地*更改列表和数组的内容而无需创建新内容，因此它们是可变的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T23:43:27.580

不可变是高度依赖于语言的，但不可变对象只是一个创建后无法更改的对象。

这通常意味着：

```
int x = 4;
x = 5;//not 'allowed' 
```

这在诸如 int 之类的原语可以是不可变的语言（例如 Scala 之类的函数式语言）中可以看到。

OOP 中的大多数对象实际上是指向内存中某个位置的指针。如果该对象是不可变的，则内存中的该位置不能更改其内容。在 Java 中的 a 的情况下`String`，我们看到了这种情况：

```
String a = "Hello"; //points to some memory location, lets say '0x00001'
a = a + " World!"; //points to a new locations, lets say '0x00002'
System.out.println(a);//prints the contents of memory location '0x00002' 
```

在这种情况下，`a`实际上在第 2 行之后指向内存中完全不同的位置。这意味着另一个具有不同作用域的线程`a`将不会看到“Hello World！”。而是“你好”：

```
String a = "Hello";
startThread(a, " Hello!");//starts some thread and passes a to it
startThread(b, " World!");//starts another thread and passes a to it

   ...

public void methodInThread(String a, String b) {
  a = a + b;
  System.out.println(a);
} 
```

这两个线程将输出以下内容，无论它们被调用的顺序如何：

```
"Hello Hello!" //thread 1
"Hello World!" //thread 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T15:47:50.343

可变性和不变性的概念只与代码可能*引用*的事物相关。如果一个人持有对某物的引用，并且观察到该事物状态的某些不可变方面具有某个值（或状态），那么只要该引用存在，则可以始终观察到该事物状态的该方面具有相同的值（状态）。

Java 中的`String`类型可以合理地描述为不可变的，因为引用字符串并观察到它包含字符“Hello”的代码可以随时检查它并始终观察到它包含这些字符。相比之下，a`Char[]`可能在某一时刻被观察到包含字母“Hello”，但在稍后的某个时间被观察到包含字母“Jello”。因此，a`Char[]`被认为是可变的。

因为在 Java 中不可能直接引用 an `int`，所以可变性和不变性的概念并不真正适用于该类型。但是，可以持有对`Integer`它们相关的 的引用。观察到具有特定值的任何此类引用将始终具有相同的值。因此，`Integer`是不可变的。`int`请注意，虽然可变性和不变性的概念并不真正适用于像或不可变类型保证不会更改，除非用新值或对不同不可变对象的引用覆盖该位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-14T17:04:23.973

java中有一些类是不可变的，例如String，All Wrapper Class，即。整数、浮点数、长整数等。

例如：整数 i=5；我=10；我=15；

当 Integer i=5 时，这里会创建一个新的 Integer 对象，然后在第 2 次，i=10 而不是将这个值 10 分配给先前创建的对象，创建另一个新对象并分配给 i，第 3 次 i=15 ，在这里再次创建新对象并再次分配给 i。

注意：不要将 int 与 Integer 混淆。int 是原始类型，Integer 是包装类。所有原语都是可变的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T23:43:15.453

如果一个对象在构造后它的状态不能改变，那么它就被认为是不可变的。

来源：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-09T23:44:44.810

通常，这意味着您不能调用将更改类型（int 或其他）的方法

有时人们将值类型称为不可变的

```
//theres no way for this to be mutable but this is an example of a value type
int a = 5
int b = a;
b=9 
```

a 不会像类类型那样改变

```
MyClass a = new MyClass
MyClass b = a
b.DoSomething()
//a is now changed 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-09T23:45:11.393

不可变对象是一旦实例化就不能修改的东西。如果必须修改，将创建一个新对象并指向该引用。

并且整数不是一成不变的。

# python - Flask URL 路由

> ID：15914469
> 
> 赞同：2
> 
> 时间：2013-04-09T23:41:14.067
> 
> 标签：python, routing, flask

如果我正在创建一个博客站点并且我想设置路由这样

```
@app.route('/<username>/<postname>', methods=['GET']) 
```

路由到名为 'username' 的用户的名为 'postname' 的帖子，我如何让 html 识别这个？我一直在尝试做类似的事情

```
<a href={{ url_for('/', username=user.name, postname=post.name) }}>{{post.name}}</a> 
```

我还试图通过 Flask 理解特殊关键字 /login 或 /about 来协调这一点，以便它检查用户是否首先尝试访问这些关键字。我该如何实施这些检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:45:20.160

模板中的第一个参数`url_for`应该是您装饰的视图函数的名称：

```
@app.route('/<username>/<postname>', methods=['GET'])
def view_user_post(username, postname):
    ^^^^^^^^^^^^^^ 
```

现在，您可以在模板中编写：

```
{{ url_for('view_user_post', username=user.name, postname=post.name) }} 
```

这使您可以更改路由中的 URL，而无需在代码库的其他地方更新它。

# web - facebook 墙，网站上有类似按钮和重播框

> ID：15914482
> 
> 赞同：0
> 
> 时间：2013-04-09T23:43:12.390
> 
> 标签：web, facebook-wall

我正在为一个乐队制作一个网站，我想知道是否可以选择在网站上添加一个带有类似按钮和反应框的墙，就像在 facebook 上一样我找不到这个如何完成这个（我不想使用 iframe 更像是一个插件，它只显示带有likebutton和反应选项的帖子等等，换句话说，将乐队页面的墙壁直接复制粘贴到网站上，并带有友好的伟大人物 jorgen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:05:30.573

什么样的网站？您是在使用一些 cms 还是自己构建一些东西？这种“喜欢”的功能应该如何表现？

回答你的问题，因为它被问到：**是的，这是可能的。**

如果您使用的是内容管理系统，您可能希望搜索[具有此类功能的模块](http://drupal.org/project/fblikebutton)。

# django - 动态设置复选框的初始值

> ID：15914488
> 
> 赞同：4
> 
> 时间：2013-04-09T23:43:51.500
> 
> 标签：django, forms

我有一个带有 CheckboxSelectMutliple 小部件的 MultipleChoiceField：

```
weight_training_days = forms.MultipleChoiceField(
    help_text=u'(Required) 3 days must be selected',
    widget=forms.CheckboxSelectMultiple(attrs={
        'inline': True,
    }),
    choices=(
        (0, "Mon"),
        (1, "Tue"),
        (2, "Wed"),
        (3, "Thu"),
        (4, "Fri"),
        (5, "Sat"),
        (6, "Sun"),
    ),
) 
```

我正在尝试将 7 个复选框中的 3 个动态设置为“True”。理想情况下，我会从视图中做到这一点。

```
def change_challenge_settings_page(request):

    c = Challenge.objects.get(user__exact = request.user,chal_status=1)

    layout = 'horizontal'
    form =UpdateChallengeSettingsForm(initial={'goal': c.level_goal }) 

    return render(request, 'portal/portal_change_challenge_settings.html', {'form': form,'layout': layout,'scorecard_page': True,}) 
```

我知道如何使用 ChoiceFields 来做到这一点（在上面的示例中，“目标”是一个 ChoiceField），但是在涉及 MultipleChoiceFields 时却被卡住了。我非常感谢任何想法/反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:55:08.927

您可以将首字母设置为列表。在这种情况下，如果您设置`YourForm(inital={'weight_training_days': [0,1,2]})`它将默认选择星期一、星期二和星期三。你也可以这样做`forms.MultipleChoiceField(... inital=[0,1,2] ...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:56:51.870

这很简单，只需传递一个列表。这是一个完整的例子：

```
from django import forms
class UpdateChallengeSettingsForm(forms.Form):
    weight_training_days = forms.MultipleChoiceField(
        help_text=u'(Required) 3 days must be selected',
        widget=forms.CheckboxSelectMultiple(attrs={
            'inline': True,
        }),
        choices=(
            (0, "Mon"),
            (1, "Tue"),
            (2, "Wed"),
            (3, "Thu"),
            (4, "Fri"),
            (5, "Sat"),
            (6, "Sun"),
        ),
    )

form = UpdateChallengeSettingsForm(initial={
    'weight_training_days': [1,2,4,5,6],
})

print form.as_p() 
```

和输出：

```
<p><label for="id_weight_training_days_0">Weight training days:</label> <ul>
<li><label for="id_weight_training_days_0"><input inline="True" type="checkbox" name="weight_training_days" value="0" id="id_weight_training_days_0" /> Mon</label></li>
<li><label for="id_weight_training_days_1"><input checked="checked" name="weight_training_days" value="1" inline="True" type="checkbox" id="id_weight_training_days_1" /> Tue</label></li>
<li><label for="id_weight_training_days_2"><input checked="checked" name="weight_training_days" value="2" inline="True" type="checkbox" id="id_weight_training_days_2" /> Wed</label></li>
<li><label for="id_weight_training_days_3"><input inline="True" type="checkbox" name="weight_training_days" value="3" id="id_weight_training_days_3" /> Thu</label></li>
<li><label for="id_weight_training_days_4"><input checked="checked" name="weight_training_days" value="4" inline="True" type="checkbox" id="id_weight_training_days_4" /> Fri</label></li>
<li><label for="id_weight_training_days_5"><input checked="checked" name="weight_training_days" value="5" inline="True" type="checkbox" id="id_weight_training_days_5" /> Sat</label></li>
<li><label for="id_weight_training_days_6"><input checked="checked" name="weight_training_days" value="6" inline="True" type="checkbox" id="id_weight_training_days_6" /> Sun</label></li>
</ul> <span class="helptext">(Required) 3 days must be selected</span></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-07T16:51:12.187

OP 说他们理想地希望在视图中执行此操作，我发现通常情况下您希望在视图级别而不是表单级别动态指定这些。

这就是您在视图级别执行此操作的方式

```
 form = MySelectForm()
    form.fields['my_choice_field'].initial = [1,2,3] 
```

您还可以使用以下内容动态指定选项（不仅仅是最初选择的选项）：

```
 form.fields['my_choice_field'].choices = [1,2,3,4,5,6,7] 
```

# cygwin - 新手安装Cygwin

> ID：15914491
> 
> 赞同：-2
> 
> 时间：2013-04-09T23:43:57.043
> 
> 标签：cygwin

如何安装 Cygwin 和 Postgresql？我需要一个带有 postgresql 数据库引擎以及 perl 的 cygwin 安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:49:33.860

只需再次执行 cygwin 安装程序，然后在 Select Packages 视图中好好看看。

Postgresql 9.2 应该在“数据库”节点下；点击展开。

同样，Perl 位于“Perl”树节点下。

# mysql - 使用mysql创建新应用程序后启动rails服务器出错

> ID：15914495
> 
> 赞同：0
> 
> 时间：2013-04-09T23:44:29.370
> 
> 标签：mysql, sql, ruby-on-rails, mysql2

我正在关注 Lynda Ruby on Rails 3 Essential Training 视频，刚刚创建了一个新的 Rails 应用程序，预配置为使用 MySQL 数据库：

```
rails new app -d mysql 
```

然后我进入 /app 目录并尝试启动 rails 服务器：

```
rails s 
```

这是返回的内容：

```
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2.rb:9:in 'require': dlopen(/usr/local/rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib (LoadError)
  Referenced from: /usr/local/rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
  Reason: image not found - /usr/local/rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2.rb:9:in '<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in 'require'
    from /usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in 'block (2 levels) in require'
    from /usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in 'each'
    from /usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in 'block in require'
    from /usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in 'each'
    from /usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in 'require'
    from /usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.2.4/lib/bundler.rb:128:in 'require'
    from /Users/joemeissler/code/lynda/config/application.rb:7:in '<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in 'require'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in 'block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in 'tap'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in '<top (required)>'
    from script/rails:6:in 'require'
    from script/rails:6:in '<main>' 
```

知道这可能是什么吗？我已经安装了 MySQL。mysql2 gem 已安装，我在 Mountain Lion 上。谢谢您的帮助。

# jquery - 使用 JQuery 解析 JSON - parseJSON/getJSON

> ID：15914496
> 
> 赞同：0
> 
> 时间：2013-04-09T23:44:39.577
> 
> 标签：jquery, json, parsing

我正在尝试解析具有以下代码的 JSON 文件：

```
{
    "employees": [
        { "firstName":"John" , "lastName":"Doe" }, 
        { "firstName":"Anna" , "lastName":"Smith" }, 
        { "firstName":"Peter" , "lastName":"Jones" }
    ]
} 
```

使用这个小脚本：

```
<script>
    var obj = $.parseJSON("employe.json")
</script> 
```

我只想使用 employees 对象，但我收到了这个错误：

```
SyntaxError: JSON.parse: unexpected character @ http://code.jquery.com/jquery-1.9.1.min.js:3 
```

我也尝试过同样的事情`getJSON`，但它也没有奏效。

`getJSON`用于外部文件和`parseJSON`json 字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:53:46.403

您应该首先加载 json 文件，然后将该文档的结果字符串内容发送到 parse 语句中。

```
$.ajax({url: "employe.json"}).done(function(data){
    console.log($.parseJSON(data));
}); 
```

# c - 如何从 gcc 限制 C 指令集

> ID：15914498
> 
> 赞同：1
> 
> 时间：2013-04-09T23:44:41.343
> 
> 标签：c, gcc

我正在开发一个类似于hackerrank.com的平台，有人可以在其中提交C代码，然后该代码将被编译并在我的服务器上运行，但我想限制一个人能够执行的C指令集我的服务器。

例如：将指令集限制为仅 I/O。

我的第一种方法是解析代码并查找恶意代码，但这很幼稚，因为它很容易被覆盖（shell 代码、混淆等）

我的第二种方法（我认为可行的方法*）*是删除所有“不必要的”标题，只留下 stdio.h、math.h、stdlib.h 等……仅举几例。

但是后来我认为可能可以从 gcc 限制 C 的指令集，但是在阅读了 gcc 的 man 条目后，我找不到任何接近我需要的东西，所以我想知道这是否可能。

如果这是不可能的，那么解决这个问题的安全方法是什么？除了摆脱不必要的库。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:40:51.663

您可以使用 OpenBSD 上提供的 systrace 来限制系统调用。我敢肯定 linux 和其他操作系统有一个等价物。这将允许您将系统调用限制为仅文件 io 而不是套接字和分叉之类的东西。

# big-o - 对初学者的大帮助

> ID：15914499
> 
> 赞同：0
> 
> 时间：2013-04-09T23:44:43.343
> 
> 标签：big-o

好的，我正在尝试理解大 O 的概念。我有一个功能，我想找到大 O，但我不是很“明白”，这是书中的一个例子，就像我的家庭作业一样。我知道答案是 O(nk)，但有人可以用简单的术语把它分解一下，这样我可能会更好地理解。

```
int selectkth(int a[], int k, int n)
{
int i, j, mini, tmp;
for (i=0; i < k; i++)
{
mini = i;
for (j = i+1; j < n; j++)
{
if (a[j] < a[mini])
mini = k;
tmp = a[i];
a[i] = a[mini];
a[mini] = tmp;
}
}
return a[k-1];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:47:47.717

在计算 bigO 时，尽量考虑最坏的时间复杂度，并注意循环。这里我们有两个循环：

// 下面的行运行 k 次

对于 (i=0; i < k; i++)

// 最坏的情况，下面的循环将运行 n 次。

对于 (j = i+1; j < n; j++)

bigO 将是这两个值的乘积 = k*n

另请查看这篇文章：[“Big O”符号的简单英文解释是什么？](https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o?rq=1)

# apache - 错误为属于同一域的文件夹设置 VirtualHost

> ID：15914501
> 
> 赞同：0
> 
> 时间：2013-04-09T23:44:46.030
> 
> 标签：apache, ubuntu, apache2, vhosts, mod-vhost-alias

Noob Here.. 我的 Ubuntu 机器上有以下文件夹结构

```
 /var/www/
        /folder1
        /folder2 
```

现在我想将我的 url xyz.com 重定向到 folder1 和 xyz.com/blog 到 folder2。我正在使用以下 Vhost 配置文件

对于 xyz.com 到文件夹 1

```
 <VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName xyz.com
    ServerAlias www.xyz.com

    DocumentRoot /var/www/folder1
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory>
     .......
   </VirtualHost > 
```

对于 xyz.com/blog 到 folder2

```
 <VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName xyz.com/blog
    ServerAlias www.xyz.com/blog

    DocumentRoot /var/www/folder2
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>

    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory>
     .......
   </VirtualHost > 
```

当我在 url 中输入 xyz.com 时，它为我提供来自 folder1 的索引文件（如预期和正确）但是当我输入 xyz.com/blog 它显示 404：未找到错误

```
 Not Found

  The requested URL /blog/ was not found on this server.

  Apache/2.2.22 (Ubuntu) Server at socialcosmo.com Port 80 
```

我已经花了几个小时，但仍然无法找出问题:(任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:16:42.193

没有包含路径的主机（域名）之类的东西。`xyz.com/blog`不是有效的`ServerName`.

删除第二个虚拟主机并向第一个虚拟主机添加[别名指令](http://httpd.apache.org/docs/current/mod/mod_alias.html#alias)。

`Alias /blog /var/www/folder2`

# c# - 是否可以使用 Web API .net 中的参数路由到操作？

> ID：15914510
> 
> 赞同：1
> 
> 时间：2013-04-09T23:45:44.220
> 
> 标签：c#, .net, routing, asp.net-web-api, asp.net-web-api-routing

是否有可能采取行动？

```
 [HttpGet]
    public List<Product> GET(int CategoryId, string option, params string[] properties)
    {
        List<Product> result = new List<Product>();
        result = BusinessRules.getProductsByCategoryId(CategoryId);
        return result;
    } 
```

使 URL 看起来像“/api/Products/CategoryId/full/Name/ProductID/”

它调用该动作可能是因为属性是可选的，但属性参数始终为空。我什至尝试在请求正文中传递 Name 和 ProductID 参数，但属性仍然为空。我想使用“参数”，因为我想将 0..N 个参数传递给操作。

这是路线模板。

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{CategoryId}/{option}/{*properties}",
            constraints: new { CategoryId = @"\d+" },
            defaults: new { option = RouteParameter.Optional, properties = RouteParameter.Optional }
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:41:01.017

看看这篇文章：[http ://www.tugberkugurlu.com/archive/asp-net-web-api-catch-all-route-parameter-binding](http://www.tugberkugurlu.com/archive/asp-net-web-api-catch-all-route-parameter-binding)

它通过创建自定义参数绑定将任何包罗万象的查询参数转换为数组。我喜欢不要在全球范围内注册它，而是用它来装饰你需要它的地方，就像这样：

```
 public HttpResponseMessage Get([BindCatchAllRoute('/')]string[] tags) { ... 
```

当然，您始终可以使用常规查询字符串。这当然很容易：

```
[HttpGet]
public List<Product> GET(int CategoryId, string option, [FromUri] string[] properties = null)
{
    List<Product> result = new List<Product>();
    result = BusinessRules.getProductsByCategoryId(CategoryId);
    return result;
} 
```

并这样称呼它：/api/Products/123/full/?properties=Name&properties=ProductID

# c - 此输出背后的原因

> ID：15914511
> 
> 赞同：1
> 
> 时间：2013-04-09T23:45:46.413
> 
> 标签：c, printf

我做了一个测试，它看起来像这样：

```
char* trim(char* strr, char* str1) {
  char* s = strr;
  while(*str1 == 32) str1++;
  while( (*str1 != 32) && (*str1 != 0) )
        *s++ = *str1++;
  *s = 0;
  return strr;
  }

int main(void) {
  char str[20] = "???";
  char str1[20] ="    bcd  \0";

  printf("(%s)\n(%s)\n", str, trim(str, str1));
  return(0);
} 
```

问题是：上面的代码会打印什么，为什么？我得到了关于输出和原因的线索，但我想听听更有经验的人在这个问题上的意见。

乍一看，它看起来会打印：

```
(???)
(bcd) 
```

但实际上产生的输出是：

```
(bcd)
(bcd) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:50:23.270

[编辑：删除了先前的答案，@Nigel Harper 很礼貌地指出这完全是胡说八道。]

（所有参数）的参数在开始`printf`执行之前以某种未指定的顺序进行评估`printf`。因此，在`printf`开始执行时，两者`str`和（重要的是）`trim(str, str1)`都已被评估。

由于`trim(str, str1)`修改了`str`指向的内存，所以当`printf`它本身正在执行时，will 指向的内存`str`已经被修改为包含`bcd`（显然，`trim(str, str1)`还有从 will 返回的指针）。

因此，无论计算两个参数的顺序如何，两个输出都是`bcd`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:53:06.067

您正在调用 str 的函数中覆盖 strr 。由于它是通过引用传递的，因此更改会反映回调用函数。printf 将获得 str 的评估副本（两个参数相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:53:39.673

最后一个参数首先被~~评估并首先~~被压入堆栈。但是评估论点的顺序是不确定的。

我编写了一个简单的代码：

```
#include <stdio.h>

char *go(char *s) { *s = '0'; return s; }

int main() {
    char str[] = "xyz", str1[] = "abc";
    printf("(%s)(%s)\n", str, go(str));
    printf("(%s)(%s)\n", go(str1), str1);
} 
```

输出：

```
(0yz)(0yz)
(0bc)(0bc) 
```

您可以使用此 gcc 命令行分析程序集输出：

```
gcc -c -g -Wa,-a,-ad x.c >x.lst 
```

如果您添加 -O2，则顺序相同，但 go() 函数变为内联。

嗯……我又学到东西了！谢谢你！

# c# - 查找匹配的列表项索引号c#

> ID：15914513
> 
> 赞同：2
> 
> 时间：2013-04-09T23:46:14.133
> 
> 标签：c#, list

我正在使用 .net 2.0 并尝试查找给定列表的索引。该列表有点长，但我在下面以shoter版本显示它。我写了下面代码的各种变体，但它不起作用，虽然我认为我接近解决方案，但我只是想念它。

```
 List<string> arrayLanguages =  new List<string> {"EN","NL","DE"};

  int Languagenr = arrayLanguages.Find(item => item.Equals ("DE")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:47:59.417

IndexOf() 是您正在寻找的！

```
List<string> arrayLanguages = new List<string> { "EN", "NL", "DE" };

int Languagenr = arrayLanguages.IndexOf("DE"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:49:08.570

IndexOf 应该给你的位置

尝试这个：

```
int pos = arrayLanguages.IndexOf("EN"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:15:28.477

为什么不使用`List<T>.FindIndex()` `Method`

```
List<string> arrayLanguages = new List<string> { "EN", "NL", "DE" };

int Languagenr = arrayLanguages.FindIndex(x=> x== "DE"); 
```

`Returns Index of 2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:54:04.863

List 中内置了一个`IndexOf()`函数，它返回您要查找的索引值。

输入：

```
List<string> arrayLanguages = new List<string> { "EN", "NL", "DE" };
int index = arrayLanguages.IndexOf("DE"); 
```

输出：

```
2 
```

# javascript - 使用 Javascript 比较 HTML 中的两个输入数字？

> ID：15914514
> 
> 赞同：3
> 
> 时间：2013-04-09T23:46:19.983
> 
> 标签：javascript, html, if-statement

我正在使用 Notepad++ 创建一个简单的网页，其中用户在文本框中输入两个数字，然后按下按钮。当他们按下按钮时，会出现一些信息，告诉他们第一个数字还是第二个数字更大。我有以下代码，但无法得到任何东西。有谁知道出了什么问题？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
   <title>Assignment 10 Form</title>

    <script type="text/javascript">

        function greaterNum(){
        var value1;
        var value2;
        value1 = document.First_num.value;
        value2 = document.last_num.value;
        if (value1 > value2){
        alert('Value 1 is greater than value 2');
        document.body.style.background = "orange";
        }

    }

</script> 

<style type="text/css">
  body{background-color: #40FF00;
    margin-left: auto;
    margin-right: auto;
    width: 60%;
    }

#container{
    border: 2px solid yellow;
    padding: 20px;
    }

</style>

</head>

<body>
<h1>Assignment 10</h1>

<div id="container">
    <div class="Num">
    <form>
<label class="label1">Enter Value 1:</label>
<input type="text" name="First_num" value=" " />
<label class="label1">Enter Value 2:</label>
<input type="text" name="last_num" value=" " />
<br/>
<input type="button" value=" Which number is greater? " onclick="greaterNum();" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:47:46.963

输入中的值作为字符串检索，您需要将其转换为数字。尝试这个：

```
value1 = +document.First_num.value;
value2 = +document.last_num.value; 
```

另外，在命名输入时尽量保持一致，为什么一个大写而另一个小写？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:29:54.007

转换为浮点数。

```
value1 = parseFloat(document.First_num.value);
value2 = parseFloat(document.last_num.value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:50:45.673

您可能需要使用：

```
value1 = document.getElementById("First_num").value; 
```

但是，这**仅**在您分配元素`id`属性时才有效：

```
<input type="text" id="First_num" name="First_num" value=" " /> 
```

**否则，**使用[`getElementsByName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName).

希望这可以帮助！！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T23:48:59.570

Html 是一个字符串，而不是一个值。你需要以某种方式解析它。

编辑：

问题似乎是获取值，将其更改为 getElementById 并且它工作正常：

[http://jsfiddle.net/fHtZU/10/](http://jsfiddle.net/fHtZU/10/)

HTML

```
<h1>Assignment 10</h1>

<div id="container">
    <div class="Num">
    <form>
<label class="label1">Enter Value 1:</label>
<input type="text" id="First_num" name="First_num" />
<label class="label1">Enter Value 2:</label>
<input type="text" id="last_num" name="last_num" />
<br/>
<input type="button" id="clickme" value="Which number is greater?" onclick="greaterNum()" />
</form> 
```

js

```
function greaterNum(){
    var value1;
    var value2;
    value1 = document.getElementById("First_num").value;
    value2 = document.getElementById("last_num").value;
    if (value1 > value2){
        alert(value1 - value2);
        document.body.style.background = "orange";
    }

} 
```

# c++ - 如何确定感兴趣区域，然后使用 OpenCV c++ 裁剪图像

> ID：15914515
> 
> 赞同：0
> 
> 时间：2013-04-09T23:46:21.460
> 
> 标签：c++, visual-studio-2010, opencv

我有一个示例图像，如下所示。我想将正方形设为我的感兴趣区域，然后裁剪出该部分（正方形）并用它创建一个新图像。我将使用不同的图像，因此正方形不会在所有图像中始终位于同一位置。所以我需要以某种方式检测正方形的边缘。

我不能发布图片，因为我有 10 个声望

请帮帮我？？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:53:08.137

```
cvSetImageROI(currentImage,yourSquare);
CvSize size = cvSize(width, height);
IplImage * newImage = cvCreateImage(size,8,3);
cvResize(currentImage,newImage,CV_INTER_AREA); 
```

首先你必须用 cvSetImageROI(IplImage*,CvRect) 设置你的 ROI。之后，您创建具有所需宽度和高度的新图像。最后，您可以将旧图像复制到新图像。新图像将包含您想要的 ROI。

# javascript - 需要从当前选项卡中获取选定文本作为字符串

> ID：15914519
> 
> 赞同：1
> 
> 时间：2013-04-09T23:46:40.790
> 
> 标签：javascript, html, google-chrome-extension

这是我目前拥有的代码：

```
var clicked = function(){
    var selection
    chrome.tts.speak(selection, {'lang': 'en-US', 'rate': 0.8, 'enqueue': true});
}
chrome.contextMenus.create({
  "title" : "Say '%s'!",
  "type" : "normal",
  "contexts" : ["selection"],
  "onclick" : clicked()
}); 
```

我需要从当前选项卡中获取选择。我不知道如何得到它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:08:09.113

两个问题：

1.  不要调用`clicked()`，而是通过省略括号传递函数引用。
2.  `var selection`可从[函数的参数](https://developer.chrome.com/extensions/contextMenus.html#property-createProperties-onclick)中获得。在文档中，此对象被描述为[`OnClickData`](https://developer.chrome.com/extensions/contextMenus.html#type-OnClickData). 所需的信息存储在`selectionText`密钥中。

应用这些修复后的代码：

```
// Background page
var clicked = function(info, tab) {
    var selection = info.selectionText;
    chrome.tts.speak(selection, {'lang': 'en-US', 'rate': 0.8, 'enqueue': true});
};
chrome.contextMenus.create({
  "title" : "Say '%s'!",
  "type" : "normal",
  "contexts" : ["selection"],
  "onclick" : clicked
}); 
```

# javascript - 到 id 锚点的外部链接不起作用 - 使用 jquery 航点

> ID：15914523
> 
> 赞同：1
> 
> 时间：2013-04-09T23:46:59.523
> 
> 标签：javascript, anchor, jquery-waypoints

我的索引页面上有一个指向 id 锚点的外部页面链接的问题。每次我尝试链接到锚点时，它都会转到页面顶部。它几乎看起来像是在锚点处显示页面一瞬间，但随后只是页面顶部。

你可以看看这里.. [http://jointmedias.com/clients/misfit/site/](http://jointmedias.com/clients/misfit/site/)

所有锚点都在页面上工作，但再次无法从外部页面链接到特定锚点。这应该可以工作[http://jointmedias.com/clients/misfit/site/#p3](http://jointmedias.com/clients/misfit/site/#p3)但它没有。

我正在使用这个 js 脚本进行平滑滚动（再次在页面本身上完美运行）

```
$(document).ready(function(){

$(window).scroll(function(){
    var scrollTop = $("#topsec").height();
    if($(window).scrollTop() >= scrollTop){
        $('#nav').css({
            position : 'fixed',
            top : '0'
        });
    }
    if($(window).scrollTop() < scrollTop){
        $('#nav').removeAttr('style');  
    }
})

})

$('a[href*=#]:not([href=#])').click(function() {
if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
    || location.hostname == this.hostname) {

    var target = $(this.hash);
    target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
       if (target.length) {
         $('html,body').animate({
             scrollTop: target.offset().top
        }, 2000,'easeInOutCubic');
        return false;
    }
}
}); 
```

我对 JS 太陌生了，不知道这是否与它有关。任何帮助将不胜感激。谢谢参观。

布赖恩

# c++ - C++ 发送和接收套接字

> ID：15914526
> 
> 赞同：-2
> 
> 时间：2013-04-09T23:47:42.050
> 
> 标签：c++, windows, sockets, send

使用下面的代码，程序总是进入 if 的 else 部分，而不是第一个 - 为什么？

```
char buffer[10000];
    if(buffer[0] != '\0')
    {
        send(Socket, "GET /gbot/gate.php?page=get_cmd", strlen("GET /gbot/gate.php?page=get_cmd"), 0);
        recv(Socket, buffer, 10000, 0);
        cout << buffer;
        buffer[0] = '\0';
    }
    else
    {
        string mybuf("GET /gbot/gate.php?page=ident&os=");
        if(getenv("windir") != NULL){
            mybuf += "windows&username=";
            mybuf += getenv("username");
            mybuf += "&version=win";
            mybuf += "\r\n\r\n";
        }
        else
            mybuf += "linux\r\n\r\n";
        send(Socket, mybuf.c_str(), mybuf.length(), 0);
        recv(Socket, buffer, 10000, 0);
        cout << buffer;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:51:23.803

您从未初始化`char buffer[10000];`，因此缓冲区的内容是不确定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:55:31.627

在 IF 语句之前初始化数组，例如；

```
char buffer[10000];
for (int i = 0; i < 10000; i++)
    buffer[i] = '1'; //you can initialize with any character except '\0' because you're testing for != in IF. 
```

# python - python在列表中拆分数字

> ID：15914533
> 
> 赞同：1
> 
> 时间：2013-04-09T23:48:42.790
> 
> 标签：python, list, split

我正在使用列表列表，并且正在使用坐标来浏览列表。从坐标 0,0 开始后，我的相邻节点列表如下所示：

```
[(0, 1), (1, 0), (1, 1)] 
```

接下来我选择第一个节点，它看起来像：

```
(0, 1) 
```

我希望能够将第一个数字与第二个数字分开并将它们分配给 i 和 j，以便我可以继续迭代循环。有没有办法做到这一点？我知道 for x in list 但它循环遍历 (0,1) 的每个项目，而不是每个单独的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:50:10.013

像这样的东西：

```
In [45]: lis=[(0, 1), (1, 0), (1, 1)]

In [46]: for i,j in lis:
   ....:     print i,j
   ....:     
0 1
1 0
1 1 
```

# c# - 刷新 ObservableCollection（覆盖）

> ID：15914538
> 
> 赞同：1
> 
> 时间：2013-04-09T23:49:21.687
> 
> 标签：c#, wpf, collections, observablecollection

如何刷新以下内容`ObservableCollection`？

```
public class ViewModelProperties
{
    private ObservableCollection<ServerProperties> properties;

    public ObservableCollection<ServerProperties> Properties
    {
        get
        {
            properties = new ObservableCollection<ServerProperties>();

            for (var lineNumber = 0; lineNumber < MainWindow.lineCount; lineNumber++)
            {
                if (MainWindow.textProperties[lineNumber, 0] == null) break;

                properties.Add(new ServerProperties(MainWindow.textProperties[lineNumber, 0],
                                                    MainWindow.textProperties[lineNumber, 1]));
            }

            return properties;
        }
    }
}

public class ServerProperties
{
    private string property;
    private string value;

    public ServerProperties()
    {
    }

    public ServerProperties(string property, string value)
    {
        Property = property;
        Value = value;
    }

    public string Property
    {
        get
        {
            return this.property;
        }
        set
        {
            this.property = value;
        }
    }

    public string Value
    {
        get
        {
            return this.value;
        }
        set
        {
            this.value = value;
        }
    }

    public override string ToString()
    {
        return string.Format("[Property : {0}]", Value);
    }
} 
```

我更改了 的值，`textProperties[,]`现在我想用 的当前内容覆盖集合的先前内容`textProperties[,]`。

**最简单的方法是什么？**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:06:25.017

首先在 ViewModel 和 ServerProperties 对象中实现 INotifyPropertyChanged。这样，您可以引发 PropetyChanged 事件，该事件将传递回用户界面。

视图模型

```
public class ViewModelProperties : INotifyPropertyChanged {

public event ProeprtyChangedEventHandler PropertyChanged;

private ObservableCollection<ServerProperties> properties = new ObservableCollection<ServerProperties>();

public ObservableCollection<ServerProperties> Properties {
    get { return properties;}
    set {
        properties = value;
        this.RaisePropertyChangedEvent("Properties");
    }
}

private void RaisePropertyChanged(string propertyName) {
    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
}
} 
```

在 ServerProperties 对象上实现这一点也将允许您在任何级别更改对象，并将其冒泡到界面。

最后查看您的填充代码，为了让属性成功更新，首先将其填充到列表中，然后使用列表重新初始化 ObservableCollection。

```
Properties = new ObservableCollection<ServerProperties>(propertiesList); 
```

这还允许您更好地处理 ObservableCollection 的创建并在将输出发布到接口之前执行测试。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:54:14.423

例如，一种更简单的解决方案可能是

```
public class ViewModelProperties
{
    private ObservableCollection<ServerProperties> properties = new ObservableCollection<ServerProperties>();

    public ObservableCollection<ServerProperties> Properties
    {
        get
        {
            return properties;
        }
    }

    public void SetProperties()
    {
        properties.Clear();
        for (var lineNumber = 0; lineNumber < MainWindow.lineCount; lineNumber++)
        {
            if (MainWindow.textProperties[lineNumber, 0] == null) break;

            properties.Add(new ServerProperties(MainWindow.textProperties[lineNumber, 0],
                                                MainWindow.textProperties[lineNumber, 1]));
        }

    }
} 
```

任何时候您希望向 OC 添加新项目，只需调用 SetProperties 方法。

# perl - Perl 使用 Win32::OLE 模块 Excel 2007-无法生成图表

> ID：15914541
> 
> 赞同：0
> 
> 时间：2013-04-09T23:49:46.333
> 
> 标签：perl, win32ole, activeperl

我在 perl64 上运行以下简单脚本以在 excel 上生成图表，但我在没有生成任何图表的情况下出现以下错误。
它打开excel工作表，将数据写入工作表但没有图表。

```
Win32::OLE(0.1709) error 0x80020003: "Member not found"
    in PROPERTYPUT "ChartType" at C:\path\test.pl line 20. 
```

这是我的系统规格

*   PERL 版本：Active Perl 64 v5.16.3
*   WIN32 OLE：0.1709
*   Excel 版本：Excel 2007 SP3

谁能给我一些关于如何消除此错误并生成图表的意见？

```
use strict;
use Win32::OLE; 
use Win32::OLE::Const 'Microsoft Excel';

my $Excel = Win32::OLE->new("Excel.Application");
$Excel->{Visible} = 1;
$Win32::OLE::Warn = 3;
my $Book = $Excel->Workbooks->Add;
my $Sheet = $Book->Worksheets(1);
my $Range = $Sheet->Range("A2:C7");
$Range->{Value} =
[['Delivered', 'En route', 'To be shipped'],
 [504, 102, 86],
 [670, 150, 174],
 [891, 261, 201],
 [1274, 471, 321],
 [1563, 536, 241]];

 my $Chart = $Excel->Charts->Add;
 $Chart->{ChartType} = xlAreaStacked;
 $Chart->SetSourceData({Source => $Range, PlotBy => xlColumns});
 $Chart->{HasTitle} = 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:45:01.677

尝试更改此行：

```
 $Chart->SetSourceData({Source => $Range, PlotBy => xlColumns}); 
```

对此：

```
 $Chart->SetSourceData( $Range, xlColumns ); 
```

# php - php datetime差异返回不正确的结果

> ID：15914545
> 
> 赞同：0
> 
> 时间：2013-04-09T23:50:10.097
> 
> 标签：php

所以我在 php 中有这段代码：

```
$now= new \Datetime("UTC");
$lv=$user->getLastVisit();
$interval =$lv->diff($now,true);

print_r($interval);
print_r("<br>".$lv->format("Y-m-d H:i:s"));
print_r("<br>".$now->format("Y-m-d H:i:s"));
exit(0); 
```

这是输出：

```
DateInterval Object ( [y] => 0 [m] => 0 [d] => 0 [h] => 6 [i] => 59 [s] => 6 [invert] => 0 [days] => 0 ) 
2013-04-09 23:44:21
2013-04-09 23:45:15 
```

所以差异结果是 6 小时 59 分 6 秒！但如果我手动做差异，我有 54 秒！那么这个 DateTime::diff 函数有什么问题呢？

编辑：

这是 var_dump($user->getLastVisit());

```
2013-04-09 23:54:59object(DateTime)#320 (3) { ["date"]=> string(19) "2013-04-09 23:44:21" ["timezone_type"]=> int(3) ["timezone"]=> string(19) "America/Los_Angeles" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:24:47.210

最后登录时间应该是 23:44 UTC，而不是 Los_Angeles。（截至撰写本文时，洛杉矶还不是 2013-04-09 23:44:21！）

似乎您可能将数据库中的上次登录时间存储为 UTC，但是当退出数据库时，PHP 使用本地/默认时区，并将其视为`America/Los_Angeles`.

见这里：http: [//3v4l.org/elbLY](http://3v4l.org/elbLY)

请注意，我设置`$now`的时间与您的时间完全相同（以 UTC 为单位），并且我也在使用您的`$lv`时间，首先是 Los_Angeles 时区，然后是 UTC。

第一个间隔是你得到的，第二个间隔正确显示了 54 秒。

因此，您需要修复您的`$user->getLastVisit()`方法并确保它以 UTC 为您提供该日期，并且您的差异将起作用。

# java - 为序列化制作一个瞬态字段，但为 JPA 制作非瞬态字段

> ID：15914546
> 
> 赞同：1
> 
> 时间：2013-04-09T23:50:10.897
> 
> 标签：java, jpa, serialization, jpa-2.0, eclipselink

**问题：**
是否可以让 JPA 保留一个字段但被序列化跳过？

有可能达到相反的效果（JPA 跳过一个字段而序列化没有），如果使用此功能，那么反过来肯定会很有用。

像这样的东西：

```
@Entity 
class MyClass {
    // Other fields.

    @NonTransient
    private transient String strangeField;
} 
```

我主要是出于好奇而问，所以我没有具体的背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:42:57.130

一种选择是在实体上使用属性访问。然后，将该字段标记为瞬态。JPA 将忽略该字段并仅使用 getter。因此，序列化会跳过该字段，而 JPA 使用 getter。

```
@Entity(AccessType.Property)
class MyClass {
    // Other fields.

    private transient String strangeField;

    public String getStrangeField() {
        return strangeField;
    }

    public void setStrangeField(String strangeField) {
        this.strangeField = strangeField;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:46:06.457

您需要使用属性访问，或使用 XML 来映射实体而不是注释。

# c# - （可能）简单的解释 - 构造函数定义和参数

> ID：15914548
> 
> 赞同：1
> 
> 时间：2013-04-09T23:50:24.390
> 
> 标签：c#, class, constructor

我已经看到这个问题被问了几次，但我似乎无法理解为什么这不起作用。请帮助一个菜鸟（并且要温柔！）。我只是想创建一个类来接受 COM 端口的名称，然后在该端口上启动一个串行对象。我不断收到“Conex 不包含接受 1 个参数的构造函数”错误，尽管在我看来这就是它所包含的全部内容。想法？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO.Ports;

namespace Conex_Commands
{

    public class Conex
    {
        string NewLine = "\r";
        int BaudRate = 921600, DataBits = 8, ReadTimeout = 100, WriteTimeout = 100;
        Parity Parity = Parity.None;
        StopBits StopBits = StopBits.One;

        public Conex(string PortName)
        {
            SerialPort Serial = new SerialPort(PortName, BaudRate, Parity, DataBits, StopBits);
            Serial.ReadTimeout = ReadTimeout;
            Serial.WriteTimeout = WriteTimeout;
            Serial.NewLine = NewLine;
        }

    }

} 
```

我的 main 中包含的调用代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Conex_Commands;

namespace Tester
{
    class Program
    {
        static void Main(string[] args)
        {

            Conex abc = new Conex("COM5");
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:44:23.713

这只是为了调试目的吗？

我的 VS2010 代码显示此代码没有错误。

但是，它在编写时是无用的，因为一旦您调用构造函数 for `Conex`， the`SerialPort`就会超出范围。

相反，将您的`Serial`对象带到构造函数之外：

```
public class Conex {
  string NewLine = "\r";
  int BaudRate = 921600, DataBits = 8, ReadTimeout = 100, WriteTimeout = 100;
  Parity Parity = Parity.None;
  StopBits StopBits = StopBits.One;
  SerialPort Serial;

  public Conex(string PortName) {
    Serial = new SerialPort(PortName, BaudRate, Parity, DataBits, StopBits);
    Serial.ReadTimeout = ReadTimeout;
    Serial.WriteTimeout = WriteTimeout;
    Serial.NewLine = NewLine;
  }

  public void Open() {
    Serial.Open();
  }

  public void Close() {
    Serial.Close();
  }

} 
```

现在，在您的`Main`例程中，您实际上可以尝试打开和关闭连接（这在我的 PC 上引发了异常，因为它没有“COM5”端口）：

```
static void Main(string[] args) {
  Conex abc = new Conex("COM5");
  abc.Open();
  abc.Close();
} 
```

# android - 是否可以探测视图的 onTouchEvent 以查看它是否消耗触摸

> ID：15914549
> 
> 赞同：0
> 
> 时间：2013-04-09T23:50:37.070
> 
> 标签：android, view, touch

这是一个足够简单的问题：

在 Android 中，如果触摸事件*不*被传递给父视图，并且`onTouchEvent()`如果它们*是*.`true`*`false`*

 **有没有办法从对象外部测试方法的返回值，看看是否会传递触摸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:11:34.430

没有检查代码，没有。该方法可能只会有条件地返回`true`or `false`。也许它`true`仅在坐标`(3,200)`为时返回，或者它仅`true`在每个月的第二个星期四返回。没有简单、合理的方法来了解或测试。**

# upload - wso2治理注册表资源上传超时

> ID：15914551
> 
> 赞同：0
> 
> 时间：2013-04-09T23:50:44.203
> 
> 标签：upload, timeout, registry, wso2

我正在尝试上传大型 wsdl 文件（具有多个模式和端点）。每次在超时失败之前大约需要 2440 秒。是否有可以减少此超时时间的配置或代码更改？

（我还没有修改任何默认配置）

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:32:13.820

您可以取消注释 GREG_HOME/repository/conf/registry.xml 中的`disableWSDLValidation`和`disableSchemaValidation`属性。

# javascript - 使用 javascript google calendar api v3 获取某一天的事件

> ID：15914553
> 
> 赞同：5
> 
> 时间：2013-04-09T23:50:49.897
> 
> 标签：javascript, google-api, google-calendar-api

您好，我的主要目标是从谷歌日历中获取所有事件，并在下方显示其名称以及日期（和时间，如果有）。我正在使用 javascript google calendar api v3，并且在获取每个事件的日期时遇到了麻烦。在我进一步解释我的问题之前，这里是当前代码：

 `````
var clientId = '200816328603.apps.googleusercontent.com';
var apiKey = 'AIzaSyD3rbV__d8u6r9u5GioBU0oVwa-53YXRqM';
var scopes = 'https://www.googleapis.com/auth/calendar';

function handleClientLoad() {
  gapi.client.setApiKey(apiKey);
  window.setTimeout(checkAuth,1);
  checkAuth();
}

function checkAuth() {
  gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true},
      handleAuthResult);
}

function handleAuthResult(authResult) {
  var authorizeButton = document.getElementById('authorize-button');
  if (authResult) {
    authorizeButton.style.visibility = 'hidden';
    makeApiCall();
  } else {
    authorizeButton.style.visibility = '';
    authorizeButton.onclick = handleAuthClick;
   }
}

function handleAuthClick(event) {
  gapi.auth.authorize(
      {client_id: clientId, scope: scopes, immediate: false},
      handleAuthResult);
  return false;
}

//document.createTextNode(resp.items[i].summary)

function makeApiCall() {

  gapi.client.load('calendar', 'v3', function() {
    var request = gapi.client.calendar.events.list({
      'calendarId': 'pvhs.k12.nj.us_r6jaor04o80hpsaldf17civeio@group.calendar.google.com'
    });

    request.execute(function(resp) {
      for (var i = 0; i < resp.items.length; i++) {

        //---------nodes for html elements
        var title = document.createTextNode(resp.items[i].summary); //titles are undefined so I'm using the summary as title instead
        //var description = document.createTextNode(resp.items[i].description); //there are no descriptions apparently
        var date = document.createTextNode('Start: ' + resp.items[i].start.date + ' End: ' + resp.items[i].end.date); //resp.items[i].date returns undefined

        //---------html elements
        var div = document.createElement('div');
        div.className = resp.items[i].summary;

        var h1 = document.createElement('h1');
        h1.appendChild(title);
        div.appendChild(h1);

        //loop is to filter out all the undefined
        if (date.textContent != 'Start: undefined End: undefined') {
          var p = document.createElement('p');
          p.appendChild(date);
          div.appendChild(p);
        }

        document.body.appendChild(div);
      }
    });
  });
} 
````  `现在 resp.items[i].start.date 和 resp.items[i].end.date 将偶尔返回日期，但有时只是返回未定义。那我还能如何获取活动的日期呢？

我解决这个问题的想法是循环遍历每个月的每一天并获取当天的所有事件。但是，当我尝试为所需日期添加带有 RFC3339 时间戳的 timeMax 和 timeMin 参数时，它没有返回任何内容。有人可以为我提供一个实现这一目标的例子吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-15T13:29:22.167

为了使用 timeMin 或 timeMax，您需要将“singleEvents”设置为 true，我相信这会返回重复事件的单个实例而不是事件组。

```
var request = gapi.client.calendar.events.list({
        'calendarId': 'pvhs.k12.nj.us_r6jaor04o80hpsaldf17civeio@group.calendar.google.com',
        'singleEvents': true, /* required to use timeMin */ 
        'timeMin': '2013-02-01T11:43:22.000Z'
    }); 
```

希望有帮助。``

# mysql - MYSQL - 三个表的 SUM 点

> ID：15914561
> 
> 赞同：0
> 
> 时间：2013-04-09T23:51:49.103
> 
> 标签：mysql, sum, inner-join

我有以下 SQL 语句（到目前为止）：

```
SELECT p.facebookID,p.points,pi.facebookID,pi.points, SUM(pi.points) FROM player AS p 
INNER JOIN invites AS i ON p.id = i.inviteFromID 
INNER JOIN player AS pi ON i.inviteToId  = pi.facebookID
WHERE p.id = 1 GROUP BY pi.points 
```

这将向我显示 UserId = 1 邀请的哪个用户以及他们获得了哪些积分。

**目标：**
我需要所选 UserId 的所有邀请点的总和。
我怎样才能做到这一点？我的方法对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:54:48.767

你不应该按 pi.points 分组，而是按用户 ID 分组，我相信......试试这个

```
SELECT p.facebookID,p.points,pi.facebookID,pi.points, SUM(pi.points) FROM player AS p 
INNER JOIN invites AS i ON p.id = i.inviteFromID 
INNER JOIN player AS pi ON i.inviteToId  = pi.facebookID
WHERE p.id = 1 GROUP BY p.id 
```

假设 p.id 是您的用户 ID

让我知道这是如何工作的

# php - IntelliJ 自动完成不显示 PHPDoc

> ID：15914566
> 
> 赞同：0
> 
> 时间：2013-04-09T23:52:36.123
> 
> 标签：php, intellij-idea

当我在 IntelliJ 中使用自动完成功能并激活 PHP 插件时，它会正确显示。问题是我缺少函数调用的文档。我知道 IntelliJ 可以“看到”它，因为如果我检查 $this->connection->autocommit("foo"); 并点击 ctrl-Q 我看到了我正在寻找的文档。

我如何...

1.  当我进行自动完成时，让 PHPDocs 自动出现。
2.  当我将鼠标悬停在某物上时，让 PHPDocs 自动出现。

![在此处输入图像描述](https://i.stack.imgur.com/lndDa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:17:39.450

1.  [...](http://img407.imageshack.us/img407/2683/20130410111358.png)请注意，它仅适用于显式完成，当您按`Ctrl`+时`Space`。

2.  您可以在完成时按`Ctrl`+`Q`以获取弹出窗口。但是，当前 IDE 版本中不提供有关鼠标的自动文档，但它可能会在以后出现，因为该功能[最近在平台中实现](http://youtrack.jetbrains.com/issue/IDEABKL-5999)。

# java - 从拦截器中的 MessageContext 获取 ServletContext

> ID：15914567
> 
> 赞同：0
> 
> 时间：2013-04-09T23:52:39.730
> 
> 标签：java, spring, spring-ws

如何从拦截器中提供的 MessageContext 获取 ServletContext 对象？下面的 TODO 假设是一个 ServletContext。

```
@Override
public boolean handleRequest(MessageContext messageContext, Object endpoint)
        throws Exception {

    WebApplicationContext applicationContext =
            WebApplicationContextUtils.getWebApplicationContext(TODO);
            TestIdentitiesService service = applicationContext.getBean(TestIdentitiesService.class); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:52:36.727

您可以尝试以下方法：

```
@Autowired
private ServletContext context;

@Override
public boolean handleRequest(MessageContext messageContext, Object endpoint)
        throws Exception {

    WebApplicationContext applicationContext =
            WebApplicationContextUtils.getWebApplicationContext(context);
    TestIdentitiesService service =
    applicationContext.getBean(TestIdentitiesService.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:08:46.947

您应该能够获得具有以下内容的 ServletContext：

```
messageContext.getProperty(HTTPConstants.MC_HTTP_SERVLETCONTEXT); 
```

# objective-c - 当其属性（模型）更改时更新 UIView 子类

> ID：15914568
> 
> 赞同：0
> 
> 时间：2013-04-09T23:52:42.807
> 
> 标签：objective-c, uiview, subclass, key-value-observing

我有一个 UIView 子类`CustomView`，它有一个属性`CustomObject *model`，以及几个`IBOutlet`属性。`CustomObject`有两个属性，一个`NSString *title`和`NSString *imageName`。我想要一种简单、可扩展的方式来更新`CustomView`'s 的各种网点，只要有任何`model`变化。我觉得应该有一些使用 KVO 的简单方法来做到这一点，但是由于可以将新对象分配给`model`，所以我不能只订阅这些通知。

我可以想到一种方法（我以前使用过）是重写`- (void)setModel:(CustomObject *)model`以重做我的布局并重新订阅该对象的 KVO 键。这是最合理的解决方案，还是我忽略了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:14:59.927

让视图控制属性违背了 MVC 设计，这虽然可能使事情变得更加困难。我建议您创建一个 ViewController 自定义子类，并让它通过许多不同的方法将信息传递给视图，其中一种是委托/协议分配，另一种是通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:27:02.307

在我读完你的问题之前，我打算建议 KVO，所以，在你的问题结束后，我不得不说，是的，这正是 KVO 的用途。但我也同意另一个答案（来自 Pinwheeler）——不是应该进行观察的视图，而是视图控制器。

但是，如果可能，视图控制器更常见的是同时管理模型和视图。既然两者都管，就不需要观察什么；它知道模型是否因为它改变了模型而改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:35:06.513

我通过这样的覆盖来处理这个`setModel:`问题：

```
- (void)setModel:(Model *)model {
    if (model != _model) {
        [self disconnectFromModel];
        _model = model;
        [self connectToModel];
    }
} 
```

`dealloc`我也打电话给`disconnect`：

```
- (void)dealloc {
    [self disconnectFromModel];
} 
```

在`connect`中，我建立与模型的连接（如果有的话），并在适当的情况下将模型（或模型的某些部分）传递给我的子视图。例子：

```
- (void)connectToModel {
    if (_model) {
        // Maybe start KVO...
        [_model addObserver:self forKeyPath:@"name"
            options:NSKeyValueObservingOptionInitial context:&MyKVOContext];

        // Or maybe register for notifications...
        nameNotificationObserver = [[NSNotificationCenter defaultCenter]
            addObserverForName:ModelNameDidChangeNotification object:_model queue:nil
            usingBlock:^(NSNotification *note) {
                [self modelNameDidChange];
            }];

        // Maybe pass part of the model down to a subview...
        [self.addressView setModel:model.address];
    }
} 
```

在`disconnect`中，我只是撤消我在 中所做的事情`connect`：

```
- (void)disconnectFromModel {
    if (_model) {
        [_model removeObserver:self forKeyPath:@"name" context:&MyKVOContext];

        [[NSNotificationCenter defaultCenter] removeObserver:nameNotificationObserver];
        nameNotificationObserver = nil;

        [self.addressView setModel:nil];
    }
} 
```

请注意，如果您确实有也观察模型的子视图，则模型的更改发生在两次传递中。首先，整个视图层次结构与旧模型断开连接。然后整个视图层次结构连接到新模型。

# c++ - 是否可以使用 CUDA 来有效地计算排序数组中元素的频率？

> ID：15914569
> 
> 赞同：2
> 
> 时间：2013-04-09T23:52:49.290
> 
> 标签：c++, cuda, frequency, gpu, sorted

我对 Cuda 很陌生，我已经阅读了书籍中的几章并在线阅读了很多教程。我已经对向量加法和乘法进行了自己的实现。

我想更进一步，假设我们要实现一个函数，该函数将一个排序的整数数组作为输入。

我们的目标是找到数组中每个整数的频率。

我们可以依次扫描数组一次以产生输出。时间复杂度为`O(n)`。

由于组不同，我想一定可以利用 CUDA。

假设这是数组

```
 1
   1
   1
   1
   2
   2
   3
   3
   5
   5
   6
   7 
```

为了实现完全并行，每个线程必须准确地知道它必须扫描数组的哪一部分才能找到总和。这只有在我们使用另一个名为的数组时才能实现，该数组`int dataPosPerThread[]`对于每个线程 id`dataPosPerThread[threadId]`将具有初始数组上的起始位置作为值。所以，这意味着每个线程都知道从哪里开始和在哪里结束。

然而，这样我们不会得到任何东西，因为我们需要`O(n)`时间才能找到位置。最终总成本将是线程`O(n) + cost_to_transfer_the_data_to_the_gpu + O(c) + cost_to_transfer_the_results_to_the_gpu` 找到`O(c)`最终输出所需的恒定时间，当然假设我们在初始数组中有许多不同的整数。

我想避免额外的`O(n)`费用。

到目前为止我的想法是，拥有一个 size 数组`arraySize`，我们指定将使用的线程总数，假设`totalAmountOfThreads`这意味着每个线程都必须扫描`totalAmountOfThreads/arraySize`值。

第一个线程（id 0）将从位置 0 开始扫描直到位置`totalAmountOfThreads/arraySize`。

第二个线程将从`totalAmountOfThreads/arraySize + 1`等等开始。

问题在于，尽管某些线程可能正在使用不同的整数组，或者使用具有更多值的组正在被其他线程处理。例如在上面的例子中，如果我们假设我们将有 6 个线程，每个线程将获取数组的 2 个整数，所以我们将有这样的东西：

```
 1     <-------- thread 0
   1
   1     <-------- thread 1
   1
   2     <-------- thread 2
   2
   3     <-------- thread 3
   3
   5     <-------- thread 4
   5
   6     <-------- thread 5
   7 
```

如您所见，线程 0 只有`1`值，但是`1`线程 2 正在处理其他值。为了实现并行性，这些线程必须处理不相关的数据。假设我们将使用此逻辑，每个线程将计算以下结果：

```
 thread 0 => {value=1, total=2}
   thread 1 => {value=1, total=2}
   thread 2 => {value=2, total=2}
   thread 3 => {value=3, total=2}
   thread 4 => {value=5, total=2}
   thread 5 => {{value=6, total=1}, {value=7, total=1}} 
```

有了这个结果，可以进一步实现什么？有人可能会建议使用额外的 hash_map，就像`unordered_map`它可以有效地为单个线程计算的每个值更新总变量。然而

1.  `Unordered_map`cuda 编译器不支持

2.  这意味着线程将无法利用共享内存，因为来自不同块的两个线程可能使用相同的值，因此哈希映射必须位于全局内存中。

3.  即使上述两个没有问题，在更新哈希映射时，我们仍然会在线程之间出现竞争条件。

解决这个问题的好方法是什么？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T03:03:09.507

正如@tera 已经指出的那样，您所描述的是直方图。

您可能对[推力直方图示例代码](http://code.google.com/p/thrust/source/browse/examples/histogram.cu)感兴趣。如果我们以`dense_histogram()`例程为例，您会注意到第一步是对数据进行排序。

所以，是的，您的数据已排序这一事实将为您节省一步。

简而言之，我们是：

1.  对数据进行排序
2.  标记数据中不同元素的边界
3.  计算边界之间的距离。

如示例代码所示，thrust 可以在单个函数中完成上述每个步骤。由于您的数据已排序，因此您可以有效地跳过第一步。

# java - 调用自己的方法的输入和对象

> ID：15914570
> 
> 赞同：0
> 
> 时间：2013-04-09T23:53:01.247
> 
> 标签：java, methods, input

我需要知道我是否理解这一点。在这个程序中，变量“input”被创建为一个 Scanner 对象，因此可以访问 Scanner 方法。这是继承吗？其次，直到将“半径”分配为双精度数据类型并使用 nextDouble 方法，用户的实际输入才会发生。我有这个正确的吗？如果你是从 Scanner 制作对象，为什么不能直接使用 Scanner 呢？

```
 public class ComputeAreaWithConsoleInput {
 public static void main(String[] args) {

// Create a Scanner object

Scanner input = new Scanner(System.in);    //Scanner object called "input" created

System.out.print("Enter a number for radius: ");
double radius = input.nextDouble();        // "input" set as double datatype

double area = radius * radius * 3.14159;

System.out.println("The area for the circle of radius " +
radius + " is " + area);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:54:24.877

> 在这个程序中，变量“input”被创建为一个 Scanner 对象，因此可以访问 Scanner 方法。这是继承吗？

不，这不是[继承。](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)这没有定义 的子类型`Scanner`。`input`是 的一个**实例**。`Scanner`

> 直到将“半径”分配为双精度数据类型并使用 nextDouble 方法，用户的实际输入才会发生。我有这个正确的吗？

再次，不。这特别`Scanner`从标准输入读取。对流的写入和从该流中的读取是分离的，并且彼此之间完全没有关系。如果没有要读取的数据，读取流将阻塞。读取*会等到*用户输入内容。

> 如果你是从 Scanner 制作对象，为什么不能直接使用 Scanner 呢？

这是一个荒谬的问题。

# webserver - 如何使用单个请求使 Mini-redirector 删除 WebDAV 服务器上的整个文件夹？

> ID：15914573
> 
> 赞同：2
> 
> 时间：2013-04-09T23:53:08.513
> 
> 标签：webserver, client, options, webdav

我发现当 Microsoft Mini-redirector 删除文件夹时，它会逐个文件地删除它。这会产生大量的服务器请求。

是否可以强制迷你重定向器在一个请求中删除整个文件夹？在客户端是否有任何设置？

我不能使用任何其他 WebDAV 客户端，迷你重定向器是我唯一的选择，但是我可以更新我的服务器代码。WebDAV 服务器应该指定任何选项吗？

# java - 在数据库中关联数学方程以使用 JAVA 进行运行时处理

> ID：15914585
> 
> 赞同：0
> 
> 时间：2013-04-09T23:54:29.750
> 
> 标签：java, database, type-conversion

我目前正在运行一个学生项目，我在其中使用 java 接收物理传感器值。

为了转换传感器值（从一个物理暗淡到另一个物理暗淡），每个传感器都有一个特定的输入数据类型（8 位、16 位、双精度等）和一个用于数据转换的数学方程。此配置应存储在数据库中（直接或链接到脚本）

您建议如何实现这样的功能？

转换示例：Sensor0 发送其值，应用程序应查看数据库，Sensor0 的传感器值必须如何转换。它获取转换方程并转换值。（例如输出值计算如下：`output_val = (input_val^2) * pi / (2*inputval))`

前面的数学方程应以某种方式存储为各种传感器的数据库条目或脚本定义，并应在运行时进行处理。

我的测试系统是带有 java 运行时和 mysql 服务器的 debian x86 计算机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:59:30.757

使用方法创建一个`Calculation`抽象类`calculate`，然后为每个传感器创建一个继承类，例如`Input_1 extends Calculation`. 然后序列化`Input_1`，例如使用[Jackson](http://jackson.codehaus.org/)，并将序列化的实例存储在您的数据库中。当你需要执行计算时，读入序列化的实例，反序列化它，然后运行它的`calculate`方法。

作为替代方案，创建一个执行所有必要输入计算的类，然后根据需要对其进行序列化和反序列化。哪个对您的数据库最有意义。

序列化和反序列化类的最简单方法是使用默认的 Java 序列化程序，如下所示。

```
public abstract class Calculation {
    public double conversion(double d);
}

public class Sensor_34 extends Calculation implements Serializable {
    public double conversion(double d) {
        // conversion code
    }
}

ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
ObjectOutputStream objectOut = new ObjectOutputStream(byteOut);
Sensor_34 sensor34 = new Sensor_34();
objectOut.writeObject(sensor34);
objectOut.close();
byte[] saveThisValue = byteOut.toByteArray(); // save the byte[] to the database

// ***

byte[] input = Database.read(); // read the byte[] back from the database
ByteArrayInputStream byteIn = new ByteArrayInputStream(input);
ObjectInputStream objectIn = new ObjectInputSteam(byteIn);
Calculation calculation = (Calculation)objectIn.readObject();
// Now use the calculation object's "conversion" method to perform the conversion 
```

因此，总而言之，将 Sensor_34 对象序列化为字节数组并将其保存到数据库中，然后将字节数组读回并将其转换回 Sensor_34 对象。

# rest - 不同的 servlet-api 版本冲突

> ID：15914595
> 
> 赞同：4
> 
> 时间：2013-04-09T23:55:19.750
> 
> 标签：rest, maven, jetty, servlet-filters

我正在使用 Maven 和 Jetty 作为服务器开发 RestEasy Web 服务。其中一项服务应使用扩展 javax.servlet.http.HttpServletResponseWrapper 的过滤器。问题出在来自 servlet-api 2.3 的接口 javax.servlet.ServletResponse 的方法 setCharacterEncoding 中。我收到以下异常

```
java.lang.NoSuchMethodError: com.webapp.rest.jsonp.HttpServletResponseContentWrapper.setCharacterEncoding(Ljava/lang/String;)V 
```

我已经指定了 servlet-api 2.4 依赖项，但也尝试使用 2.5：

```
 <web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"> 
```

Servlet-api 2.4 是这样指定的：

```
 <dependency>
<groupId>javax.servlet</groupId>
<artifactId>servlet-api</artifactId>
<version>2.4</version>
    <scope>provided</scope>
 </dependency> 
```

我正在使用 Maven 码头插件：

```
 <plugin>
<groupId>org.mortbay.jetty</groupId>
<artifactId>maven-jetty-plugin</artifactId>
<version>6.1.15</version>
<configuration>
 ....
 <exclusions>
<exclusion>
<groupId>javax.servlet</groupId>
<artifactId>servlet-api</artifactId>
</exclusion>
</exclusions> 
```

我的 RestEasy 配置：

```
 <dependency>
<groupId>org.jboss.resteasy</groupId>
<artifactId>resteasy-jettison-provider</artifactId>
<version>2.2.2.GA</version>
<exclusions>
    <exclusion>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    </exclusion> 
```

但是，在 Maven 存储库中，始终有 2.3 和 2.4（或 2.5）版本。我不知道这个 2.3 版本是否带有其他依赖项。有什么建议我怎么能找到这个以及如何强制使用 servlet-api 2.4。

我的依赖树看起来如下：

```
[INFO] [dependency:tree {execution: default-cli}]
[INFO] com.inextweb.ai:inextweb-ai:war:1.0.0-SNAPSHOT
[INFO] +- org.htmlparser:htmlparser:jar:2.1:compile
[INFO] +- org.htmlparser:htmllexer:jar:2.1:compile
[INFO] +- org.htmlparser:thumbelina:jar:2.1:compile
[INFO] +- org.htmlparser:sitecapturer:jar:2.1:compile
[INFO] +- org.htmlparser:filterbuilder:jar:2.1:compile
[INFO] +- net.sf.jung:jung-api:jar:2.0.1:compile
[INFO] |  \- net.sourceforge.collections:collections-generic:jar:4.01:compile
[INFO] +- net.sf.jung:jung-algorithms:jar:2.0.1:compile
[INFO] |  \- colt:colt:jar:1.2.0:compile
[INFO] |     \- concurrent:concurrent:jar:1.3.4:compile
[INFO] +- net.sf.jung:jung-graph-impl:jar:2.0.1:compile
[INFO] +- net.sf.jung:jung-visualization:jar:2.0.1:compile
[INFO] +- org.apache.opennlp:opennlp-tools:jar:1.5.2-incubating:compile
[INFO] |  +- org.apache.opennlp:opennlp-maxent:jar:3.0.2-incubating:compile
[INFO] |  \- jwnl:jwnl:jar:1.3.3:compile
[INFO] +- net.sf.jwordnet:jwnl:jar:1.4_rc3:compile
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- org.testng:testng:jar:6.1.1:test
[INFO] |  +- org.beanshell:bsh:jar:2.0b4:test
[INFO] |  +- com.beust:jcommander:jar:1.12:test
[INFO] |  \- org.yaml:snakeyaml:jar:1.6:test
[INFO] +- commons-pool:commons-pool:jar:1.6:compile
[INFO] +- commons-codec:commons-codec:jar:1.7:compile
[INFO] +- commons-lang:commons-lang:jar:2.6:compile
[INFO] +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- log4j:log4j:jar:1.2.16:compile
[INFO] +- org.mongodb:mongo-java-driver:jar:2.10.1:compile
[INFO] +- org.jboss.resteasy:resteasy-jaxrs:jar:2.3.5.Final:compile
[INFO] |  +- org.jboss.resteasy:jaxrs-api:jar:2.3.5.Final:compile
[INFO] |  +- org.scannotation:scannotation:jar:1.0.3:compile
[INFO] |  |  \- javassist:javassist:jar:3.12.1.GA:compile
[INFO] |  +- javax.annotation:jsr250-api:jar:1.0:compile
[INFO] |  +- javax.activation:activation:jar:1.1:compile
[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.1.2:compile
[INFO] |  |  \- org.apache.httpcomponents:httpcore:jar:4.1.2:compile
[INFO] |  \- net.jcip:jcip-annotations:jar:1.0:compile
[INFO] +- org.jboss.resteasy:resteasy-jackson-provider:jar:2.2.2.GA:compile
[INFO] |  +- org.codehaus.jackson:jackson-core-asl:jar:1.6.3:compile
[INFO] |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.6.3:compile
[INFO] |  +- org.codehaus.jackson:jackson-jaxrs:jar:1.6.3:compile
[INFO] |  \- org.codehaus.jackson:jackson-xc:jar:1.6.3:compile
[INFO] +- org.jboss.resteasy:resteasy-jettison-provider:jar:2.2.2.GA:compile
[INFO] |  +- org.jboss.resteasy:resteasy-jaxb-provider:jar:2.2.2.GA:compile
[INFO] |  |  \- com.sun.xml.stream:sjsxp:jar:1.0.1:compile
[INFO] |  \- org.codehaus.jettison:jettison:jar:1.2:compile
[INFO] +- org.simpleframework:simple-xml:jar:2.3.6:compile
[INFO] |  +- stax:stax-api:jar:1.0.1:compile
[INFO] |  \- stax:stax:jar:1.2.0:compile
[INFO] +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  \- xml-apis:xml-apis:jar:1.0.b2:compile
[INFO] +- com.google.code.gson:gson:jar:2.2.2:system
[INFO] +- junit:junit:jar:3.8.2:compile
[INFO] +- xalan:serializer:jar:2.7.1:compile
[INFO] +- bouncycastle:bcprov-jdk15:jar:140:compile
[INFO] +- net.sf.json-lib:json-lib:jar:jdk15:2.4:compile
[INFO] |  +- commons-beanutils:commons-beanutils:jar:1.8.0:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  \- net.sf.ezmorph:ezmorph:jar:1.0.6:compile
[INFO] +- commons-io:commons-io:jar:1.3.2:compile
[INFO] +- xom:xom:jar:1.1:compile
[INFO] |  +- xerces:xmlParserAPIs:jar:2.6.2:compile
[INFO] |  +- xerces:xercesImpl:jar:2.6.2:compile
[INFO] |  +- xalan:xalan:jar:2.7.0:compile
[INFO] |  \- jaxen:jaxen:jar:1.1-beta-8:compile
[INFO] |     \- jdom:jdom:jar:1.0:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.6.6:compile
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.6:compile
[INFO] +- org.slf4j:jul-to-slf4j:jar:1.6.6:compile
[INFO] \- org.slf4j:jcl-over-slf4j:jar:1.6.6:runtime
[INFO] ------------------------------------------------------------------------ 
```

这是整个[pom.xml](http://goo.gl/8uJ3W)和[web.xml](http://goo.gl/2CeQy)

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T00:15:05.537

根据[servlet api javadoc](http://docs.oracle.com/javaee/6/api/index.html?javax/servlet/package-summary.html) ...

[javax.servlet.HttpSevletResponseWrapper.setCharacterEncoding(String)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#setCharacterEncoding%28java.lang.String%29)自 Servlet API 2.4 以来就存在。

你有几件事情要处理。

1.  设置您的 Servlet API 版本`WEB-INF/web.xml`
2.  确保您在项目中为您打算运行的 Jetty 版本使用适当的 Servlet API。
    *   码头 6 - Servlet API 2.4
    *   码头 7 - Servlet API 2.5
    *   码头 8 - Servlet API 3.0
    *   码头 9 - Servlet API 3.1
3.  从 maven 获取适当的 Servlet API jar 文件

```
<project>
  <build>
    <dependencies>

      <!-- Servlet API 2.4 -->
      <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
      </dependency>

      <!-- Servlet API 2.5 / Standard Location -->
      <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
      </dependency>

      <!-- Servlet API 2.5 / OSGi bundle ready -->
      <dependency>
        <groupId>org.eclipse.jetty.orbit</groupId>
        <artifactId>javax.servlet</artifactId>
        <version>2.5.0.v201103041518</version>
        <scope>provided</scope>
      </dependency>

      <!-- Servlet API 3.0 / Standard Location / OSGi bundle ready -->
      <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
      </dependency>

      <!-- Servlet API 3.1 / Standard Location / OSGi bundle ready -->
      <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.1.0</version>
        <scope>provided</scope>
      </dependency>

    </dependencies>
  </build>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:34:59.977

我发现这里有什么问题。在 maven-jetty-plugin 中，我添加了对 commons-logging 的依赖，每次运行 jetty 时都会拉取 servlet-api 2.3。一旦我删除了这个依赖，一切都很好。

谢谢你的帮助。

# .htaccess - 如果我创建自己的文件扩展名，浏览器会难以打开我的页面吗？

> ID：15914596
> 
> 赞同：0
> 
> 时间：2013-04-09T23:55:31.177
> 
> 标签：.htaccess, file-extension, file-type

使用 htaccess，我想通过向我的所有页面添加自定义扩展来为我的网站打造品牌，只是为了外观。

假设我的公司名称是“xtreme web design”，我希望我的所有页面都以 .xwd 而不是 .php 或 .html 结尾，例如：

```
http://example.com/file.swd 
```

如果我指定 MIME 类型，这会影响与浏览器或设备的兼容性吗？这会对我的 SEO 产生负面影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:01:26.063

如果这纯粹是为了品牌/用户感知 - 那么您应该能够使用 . 只要你事先逃脱它。对 SEO 不会有真正的影响，只要你的 url 是友好的并且没有填充 PHP 获取字符或类似的。

长答案缩短了 - 很好 - 只需确保在 .htaccess 中重写时转义字符

希望这可以帮助！

注意：此答案假设您不想创建不同的文件类型 - 只需给出不同文件类型的感知。

重写：

```
http://example.com/file.html 
```

在您的 .htaccess 中执行此操作：

```
RewriteEngine On 
RewriteRule   ^file\.swd/?$   file.html  [NC] 
```

这 。转义/取消句点 - 这很重要。希望这能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:59:47.133

如果您确实希望服务器上的文件具有自定义扩展名，而不仅仅是用 Apache 重写`RewriteRule`，您可以使用[AddType](http://httpd.apache.org/docs/2.0/mod/mod_mime.html#addtype)配置指令，例如：

```
AddType application/x-httpd-php .html .htm .xwd 
```

我敢打赌，不使用 a 会有一点效率`RewriteRule`，尽管它无疑很小。;-)

但是这两种方法都不应该给 SEO 带来任何问题，虽然我不能代表搜索引擎，但我怀疑这种变化会影响你的排名。

# c++ - 编译器或定义行为的可能优化

> ID：15914601
> 
> 赞同：1
> 
> 时间：2013-04-09T23:56:23.273
> 
> 标签：c++, c++11, undefined-behavior

如果有一个函数不接受任何引用或指针作为参数，它的返回类型是未使用的，并且它不进行明显离开系统的调用（I/O 调用、更改系统时间等），它是否保证只修改定义它的类（或根本没有）？

我能想到的这条规则的唯一例外是：

```
void a(int b, int c){
    *((int*)b) = c; }

int main() {
    int d=1;
    a((int)(&d),d+1);
    return 0; } 
```

可以保证定义吗？我知道`int*`并且`int`不必是相同的大小，但是如果它们被定义为相同的大小，这是否必须工作，或者它仍然是未定义的行为？

目的是看一个函数是否可以合法地优化出来（即如果你能证明它没有副作用，它可以被删除）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:10:54.763

该标准保证`reinterpret_cast`用于从指针转换为*合适*的整数类型（大到足以容纳所有值）并返回到原始指针类型，保证产生相同的指针值。所以是的，这是有保证的：

```
int *p = new int(5);
intptr_t i = reinterpret_cast<intptr_t>(p);
// ...
int *q = reinterpret_cast<int*>(i);

assert(p == q);
*q = 10;
assert(*p == 5); 
```

允许编译器删除没有副作用的代码，但仅通过检查函数签名无法明确确定。对于内联函数，编译器可以看到代码，编译器就有机会。对于在不同翻译单元中定义的函数，事情有点困难（通过链接时间优化，如果函数*足够小，*它仍然是可行的）。

请注意，这不仅限于通过值或常量引用获取参数的函数。如果编译器看到一个函数*通过引用**修改*了一个参数，但它可以证明被修改的对象的值再也不会被读取，它理论上可以删除该调用。另一方面，除了简单的情况外，我不会打赌编译器会这样做。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:38:14.693

我想说这属于“定义明确的未定义行为”领域；它*可能会*一直工作（假设 sizeof(int*) == sizeof(int)），但它在技术上是未定义的，并且某些编译器将来很有可能完全破坏它。另一个例子是使用联合将浮点数重新解释为 int。

另外，如果我没有向您指出 LLVM 的链接时间优化的方向，那我就完全不对劲了。它旨在完全按照您在链接时谈论的内容。它很棒，并且在 osx 上“开箱即用”。他们也有一个很好的简单例子来说明它是如何工作的：http: [//llvm.org/docs/LinkTimeOptimization.html](http://llvm.org/docs/LinkTimeOptimization.html)*

# actionscript-3 - 将 eventListener 添加到由函数创建的对象

> ID：15914607
> 
> 赞同：1
> 
> 时间：2013-04-09T23:57:02.780
> 
> 标签：actionscript-3, flash, flash-builder

我环顾了几个不同的线程，似乎找不到任何适合我的东西。我对 ActionScript 还很陌生，所以这可能很明显。为了练习，我正在尝试制作一个简单的游戏。在游戏中，您可以砍伐树木以添加到您的“木材”资源中。这是树类：

```
 package
 {
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Tree extends Sprite
    {

    //Embed the gameObject image
    [Embed(source="../images/tree.png")]
    public var GameObjectImage:Class;
    public var gameObjectImage:DisplayObject = new GameObjectImage();
    public var gameObject:Sprite = new Sprite();

    public function Tree()
    {
        gameObject.addChild(gameObjectImage);
        this.addChild(gameObject);
    }
}
 } 
```

然后，我在 Main.as 中创建一个函数调用'createTree'

```
 public function createTree (xPos:int, yPos:int):void
    {
        var treeName:Tree = new Tree();
        treeName.x = xPos;
        treeName.y = yPos;
        treeName.addEventListener(MouseEvent.CLICK, chopWood);
        stage.addChild(treeName);
    } 
```

我有一个名为“chopWood”的函数来移除树。

```
 public function chopWood(e:MouseEvent):void
    {
        wood++;
        stage.removeChild(e.relatedObject);
        updateResources();
    } 
```

在构造函数中，我添加了一棵树。

```
 createTree(100,100); 
```

它确实在 x:100 y:100 添加了树。但是 Click 事件不起作用。如果我手动添加树（即不是通过函数）并手动添加偶数侦听器，它就可以工作。我认为这是某种封装问题，但我不确定如何解决它。创建树需要通过函数来​​完成，因为游戏需要在某些时候添加树。

我怎样才能让点击事件在我添加到舞台的所有树上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:59:02.507

这似乎应该工作。点击后会调用chopWood 方法吗？在开头放一个跟踪`chopWood`来测试它。

如果`chopWood`被调用，那么我可以看到一件奇怪的事情。我不太确定是什么`e.relatedObject`。我想你会想要`e.currentTarget as Tree`的。您也可以省略行中的“阶段” `stage.removeChild(e.relatedObject);`。它应该将其添加为 Main 类的子类。

# c++ - 将双精度数除以双精度以获得循环中的余数和字符参数不起作用

> ID：15914608
> 
> 赞同：1
> 
> 时间：2013-04-09T23:57:14.883
> 
> 标签：c++, visual-c++, loops

我遇到了一个问题，我似乎无法弄清楚我做错了什么。我必须编写这个程序，由于某种原因，它不允许我将 char 变量与循环中的常量 char 变量进行比较，也不允许我使用 % 两个双变量？谁能帮忙？

```
 // Nathan Brown
// Nathan Owen Brown's Space Travle Company
// CSCI 1010 PASS9

#include <iostream>
#include <cmath>
#include <iomanip>
using namespace std;

void mostPowerful (double &power1, double &power2, double &power3)
{
    if (power1 > power2 && power1 > power3)
        cout << "The largest power output is " << power1 << " and is Jetpack number 1" << endl;
    else if (power2 > power1 && power2 > power3)
        cout << "The largest power output is " << power2 << " and is Jetpack number 2" << endl;
    else if (power3 > power1 && power3 > power2)
        cout << "The largest power output is " << power3 << " and is Jetpack number 3" << endl;
}

void discountResults (double &price, double &disAmount) 
{
    disAmount = price * disAmount;
    price = price - disAmount;
}

void howMany (double &moneyAvail, double &cost)
{
    int howMany;
    double leftOver;

    howMany = moneyAvail / cost;
    leftOver = moneyAvail % cost;

    moneyAvail = howMany;
    cost = leftOver;
}

char menu ()
{
    char choice;

    cout << "Welcom to Nathan Owen Brown's Space Travel Company" << endl;
    cout << "(M)ost Powerful Calculation" << endl;
    cout << "(D)iscount Calculation" << endl;
    cout << "(H)ow Many Calculation" << endl;
    cout << "(Q)uit" << endl;
    cout << endl;
    cout << endl;
    cout << "Please enter the option (M, D, H, or Q)    ";
    cin >> choice;

    return choice;
}

int main ()
{
    double power1, power2, power3, price, disAmount, moneyAvail, cost;
    char choice;

    menu ();

    while (choice != "Q "|| choice != "q")
    {
        if (choice == "M" || choice == "m" )
        { 
            cout << "Please enter 3 power output measurements in MW: " << endl;
            cin >> power1 >> power2 >> power3;
            mostPowerful (power1, power2, power3);
        }

        else if (choice == "D" || choice == "d")
        {
            cout << "Please enter a price and a discount amount: " << endl;
            cin >> price >> disAmount;
            discountResults (price, disAmount);
            cout << "The discount amount is " << disAmount << " and the dicounted price is " << price << "." << endl;
        }
        else if (choice == "H" || choice == "h")
        {
            cout << "Please enter amount available and cost of each: " << endl;
            cin >> moneyAvail >> cost;
            howMany (moneyAvail, cost);
            cout << "You can buy " << moneyAvail << " and have " << cost << " left over." << endl;
        }
    menu ();
    }

    system ("PAUSE");
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:58:59.507

```
choice != "Q " 
```

您正在`char`与 a进行比较`string`，因此类型不匹配，您必须执行以下操作：

```
choice != 'Q' //this is char literal 
```

`%`仅适用于整数，因为“余数”的正常数学概念仅适用于整数除法。即生成整数商所需的除法。所以不能申请`%`。`double`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:25:58.717

关于 while 条件还有一个逻辑错误。您的初始行是
`while (choice != "Q "|| choice != "q")`根据 tacp 更正的看起来像
`while (choice != 'Q' || choice != 'q')`.

这在逻辑上仍然不正确：

*   假设您想知道用户何时输入“q”或“Q”，这样您就可以结束循环。如果满足任何条件，则以下表达式为真

    ```
    choice == 'Q' || choice == 'q' 
    ```

*   但这并不好，因为只要表达式为真，while 循环就会继续。只要用户不退出，您就需要它。所以你否定初始表达式

    ```
    !(choice == 'Q' || choice == 'q') 
    ```

*   通过一些布尔逻辑，您可以获得正确的版本（注意**&&**）：

    ```
    choice != 'Q' && choice != 'q' 
    ```

# python - 确定方法的类

> ID：15914610
> 
> 赞同：1
> 
> 时间：2013-04-09T23:57:21.123
> 
> 标签：python

假设我有：

```
class User():
  def method(self):
    pass

u=User() 
```

如何`u.method`通过`access`装饰器提取类？我得到的`u.method`只是它是一个函数......但我想知道从哪个`class`.

我对 python 2.7 解决方案感兴趣。

**更新**：我忘了提到我没有提供足够的细节：

```
class access():
    """
    Decorator for specifying which 'access right' must be enforced 
    at the object method level  
    """

    def __init__(self, right):
        self.right=right

    def __call__(self, method):
      ### need to grab the method's class name here 
```

我实际上正在使用装饰器：

```
class User():
  @access("edit"
  def method(self):
    pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:58:11.423

使用`u.method.im_class`：

```
In [3]: u.method.im_class
Out[3]: __main__.User 
```

[文档](http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy)

> *用户自定义方法* ... 特殊只读属性：`im_self`是类实例对象，`im_func`是函数对象；`im_class`是绑定方法的 im_self 类或请求未绑定方法的方法的类。

在 python 3 中，通过以下方式查找类`__self__`：

```
>>> u.method.__self__.__class__
<class '__main__.User'> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:20:47.307

您的装饰器不是用方法调用的，而是用函数调用的。

该类还不存在，将函数绑定到类的未绑定方法也不存在，更不用说类的任何实例以及将函数绑定到该实例的绑定方法。而且，即使这些方法*确实*存在，它们也会围绕装饰器返回的函数构建。

所以，你不能反省你收到的函数来尝试获取它的类，因为它没有一个。

* * *

您可以使用各种 hacky 技巧来确定您正在定义的内容（尽管它们可能特定于特定的 Python 实现和版本），但是没有干净的方法来做您想做的事情。例如，这是一个可怕的 hack：

```
self.classname = sys._getframe(1).f_code.co_name 
```

这是什么意思？好吧，你的装饰器本身是第 0 帧；无论调用它是第 1 帧。如果调用它的事物是类定义，则其`code`对象将以类的名称作为其类。您仍然无法实际访问该类，因为它不存在（并且在执行代码之前不会存在，这正在发生中）。但是，如果您知道该名称永远不会被覆盖，您可以只存储该名称并稍后`f_locals['__module__']`在调用时查找它（您也可能想要查找它）以获取类。

* * *

然而，一个更好的解决方案是创建一个类装饰器和一个与之一起工作的方法装饰器。诀窍是方法装饰器以他们想要的某种方式“注册”（它们返回的函数）被“修复”。然后，类装饰器遍历注册的方法并修复它们。

例如：

```
def class_deco(cls):
    for name, method in inspect.getmembers(cls, callable):
        if hasattr(method, 'class_fixup'):
            method.class_fixup(cls)
    return cls 
```

现在，您的方法装饰器在调用时仍然无法访问该类，但它可以创建一个“修复”函数，该函数在类准备好时完成装饰，然后就`f.class_fixup = fixup`在之前做`return f`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:05:06.143

为什么不直接打印呢？

```
class User():
  def method(self):
    pass

u=User()

print(u.method) 
```

输出：

```
<bound method User.method of <__main__.User object at 0x02D59510>> 
```

或者，如果您想测试，您可以使用：

```
u.method.__self__.__class__ 
```

输出：

```
<class '__main__.User'> 
```

两种方法都确认在 python`2.7.3`和 python中工作`3.3`

# ruby - 如何将字符串拆分为多个单词的数组？

> ID：15914614
> 
> 赞同：10
> 
> 时间：2013-04-09T23:57:44.513
> 
> 标签：ruby, string

我有一个字符串，我正在使用 .split(' ') 将字符串拆分为单词数组。我可以使用类似的方法将字符串拆分为 2 个单词的数组吗？

返回一个数组，其中每个元素都是一个单词：

```
words = string.split(' ') 
```

我希望返回一个数组，其中每个元素都是 2 个单词。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T00:07:02.053

```
str = 'one two three four five six seven'
str.split.each_slice(2).map{|a|a.join ' '}
=> ["one two", "three four", "five six", "seven"] 
```

这也处理奇数个单词的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T00:31:28.573

你可以做

```
string= 'one1! two2@ three3# four4$ five5% six6^ sev'
string.scan(/\S+ ?\S*/)
# => ["one1! two2@", "three3# four4$", "five5% six6^", "sev"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T00:05:57.223

像这样的东西应该工作：

```
string.scan(/\w+ \w+/) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T04:11:04.663

Ruby`scan`对此很有用：

```
'a b c'.scan(/\w+(?:\s+\w+)?/)
=> ["a b", "c"]

'a b c d e f g'.scan(/\w+(?:\s+\w+)?/)
=> ["a b", "c d", "e f", "g"] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-22T04:53:49.540

这就是我所要做的：

```
def first_word
    chat = "I love Ruby"
    chat = chat.split(" ")
    chat[0]
end 
```

# ruby-on-rails - 在 Rails 中存储全局共享数据结构的位置

> ID：15914621
> 
> 赞同：3
> 
> 时间：2013-04-09T23:58:42.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我的一个模型中有这样的数据结构：

```
def image_size_limits
    {
        "web" => {"maxheight" => 480, "maxwidth" => 680, "minheight" => 400, "minwidth" => 600}, 
        "phone" => {"height" => 345, "width" => 230, "minheight" => 300, "minwidth" => 200},
        "tablet" => {"height" => 680, "width" => 480, "minheight" => 600, "minwidth" => 400},
        "other" => {"height" => 680, "width" => 480, "minheight" => 600, "minwidth" => 400}
    }
end 
```

我在自定义验证器中使用它，我必须验证上传图像的大小。我希望能够不仅在这个模型中使用这种数据结构，而且在任何地方都能使用。在我所有的模型、视图和控制器中。

我将如何去做，我会把它放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:14:16.620

我会使用一个**模块**。

把它放在你的`lib`目录中。（您可能需要将 Rails 3 配置为从您的`lib`文件夹中自动加载类和模块。请参阅[此问题](https://stackoverflow.com/questions/3356742/best-way-to-load-module-class-from-lib-folder-in-rails-3)。）

```
# lib/image_sizes.rb

module ImageSizes
  def image_size_limits
    {
      "web" => {"maxheight" => 480, "maxwidth" => 680, "minheight" => 400, "minwidth" => 600}, 
      "phone" => {"height" => 345, "width" => 230, "minheight" => 300, "minwidth" => 200},
      "tablet" => {"height" => 680, "width" => 480, "minheight" => 600, "minwidth" => 400},
      "other" => {"height" => 680, "width" => 480, "minheight" => 600, "minwidth" => 400}
    }
  end
end 
```

然后在您的模型或控制器中：

```
class MyModel < ActiveRecord::Base
  include ImageSizes
  # ...
end

class MyController < ApplicationController
  include ImageSizes
  # ...
end 
```

现在，包含`ImageSizes`模块的每个模型或控制器都可以访问模块的方法，即`image_size_limits`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T01:02:21.317

另一种选择是创建一个初始化文件并在那里声明一个常量。

```
# config/initializers/image_size_limits.rb

IMAGE_SIZE_LIMITS = {
  "web" => {"maxheight" => 480, "maxwidth" => 680, "minheight" => 400, "minwidth" => 600}, 
  "phone" => {"height" => 345, "width" => 230, "minheight" => 300, "minwidth" => 200},
  "tablet" => {"height" => 680, "width" => 480, "minheight" => 600, "minwidth" => 400},
  "other" => {"height" => 680, "width" => 480, "minheight" => 600, "minwidth" => 400}
} 
```

然后在您的模型或控制器中，只需`IMAGE_SIZE_LIMITS['web']['maxheight']`使用`480`.

# ruby-on-rails - 使用 Ruby on Rails 根据两个值返回记录

> ID：15914623
> 
> 赞同：0
> 
> 时间：2013-04-09T23:58:53.583
> 
> 标签：ruby-on-rails, activerecord

在 Ruby on Rails 中，给定一个值数组，我可以选择具有该数组中值的属性的所有记录：

```
trip_array = [31, 37, 40]
@flights = Flight.where(trip_id: trip_array) 
```

这为我提供了 trip_id 为 31、37 或 40 的所有航班的列表。

但是，我需要选择一对值。我希望做这样的事情：

```
trip_sections_array = [[31, 1], [37, 2], [40, 1]]
@flights = Flight.where([:trip_id, :trip_section] => trip_section_array) 
```

所以我实际上想返回所有航班 where `(trip_id = 31 and trip_section = 1) or (trip_id = 37 and trip_section = 2) or (trip_id = 40 and trip_section = 1)`，但对于任意二维数组。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:46:19.690

您将不得不为此使用字符串 SQL 条件。就像是：

```
trip_conditions = trip_sections_array.map { "(trip_id = ? AND trip_section = ?)" }.join(" OR ")
Flight.where(trip_conditions, *trip_sections_array.flatten) 
```

有关更多信息，请参阅有关[纯字符串条件的 rails 指南](http://guides.rubyonrails.org/active_record_querying.html#pure-string-conditions)

# hibernate - DB2 JDBC 驱动程序截断十进制

> ID：15914625
> 
> 赞同：0
> 
> 时间：2013-04-09T23:59:09.900
> 
> 标签：hibernate, jdbc, db2

DB2 的 JDBC 驱动程序似乎截断了 Numeric/Decimal 字段的精度。我在 SALES 表中定义了以下字段：

十进制数 (16,16)

然后我执行以下插入语句：

插入销售（金额）值（14.12345678）

如果我使用 DB2 Control Center 中的查询工具进行查询，我会得到 14.1234567800000000。

如果我使用 Squirrel（一个使用 DB2 的 JDBC 驱动程序连接到数据库的 DB 客户端，我得到 14.12346。当我使用 Hibernate 从 Java 代码执行相同操作时也会发生同样的情况。

这让我相信 JDBC 驱动程序正在截断结果的精度。有没有办法用选项来配置 JDBC 驱动程序来防止这种情况发生？我已经看到了 JDBC 驱动程序的 JDBC 选项，但似乎没有一个描述影响这一点的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:21:37.923

如果记录被正确插入到数据库中，那么在获取时，它可能会被隐式格式化/截断。

我在使用 Toad for Oracle 检索记录时遇到了类似的问题。然后我手动配置了首选项以使其正确显示，但对 DB2 不熟悉。

您可以尝试在列定义中配置它。 `@Column(precision=16, scale=8)`为`BigDecimal`领域。

> **精度：**小数（精确数字）列的精度。（仅在使用小数列时适用。）
> 
> **scale ：**小数（精确数字）列的比例。（仅在使用小数列时适用。）

精度是总位数，比例是小数点右侧的位数。尝试更改它们的值，目前似乎不合适。

# ios - iOS 开发：用于 UITableView 标签的 NSArray 返回“索引 1 越界”

> ID：15914626
> 
> 赞同：0
> 
> 时间：2013-04-09T23:59:17.537
> 
> 标签：ios, objective-c, xcode, uitableview

Gday，试图将我的循环 tableview 数组拆分为它自己的静态数组，然后在 UITableView 中的每个标签上使用它......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"ListingCell";

UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleDefault
            reuseIdentifier:CellIdentifier];
}

//Load Row Value into NSArray
NSString *RowValues = [self.ListingArray objectAtIndex:[indexPath row]];
NSArray *RunTimeArray = [RowValues componentsSeparatedByString:@","];

//Configure the cell.
cell.detailTextLabel.text = [RunTimeArray objectAtIndex:1]; //small label
cell.textLabel.text = [RunTimeArray objectAtIndex:0]; //main title

return cell;
} 
```

当我运行项目时，它返回一个错误：

```
DATE APP_NAME[28399:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

基本上这意味着 Index :1 不存在，但 Index:0 确实...当我重新加入数组时，例如 '-------' 它都显示正确，因此它的含义是新对象具有不同索引到 1 或另一个连续数字。

知道如何使它们成为连续索引，例如：0,1,2,3,4 而不是 0,21581,2185929,385749 ...

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:09:20.437

验证以下内容

1) numberOfRowsInSection:中返回的值应该是[self.listingArray count]；

2) RunTimeArray 计数应始终 >=2。

# c# - 动态方法，将返回值存储在本地

> ID：15914628
> 
> 赞同：2
> 
> 时间：2013-04-09T23:59:33.323
> 
> 标签：c#, dynamic, il

我在使用动态方法时遇到了一些问题。此方法的（伪）IL 代码如下所示

```
var localB = dynMethodGen.DeclareLocal(typeof(Runtime.IntegerObject));
dynMethodGen.Emit(Ldc_I8, 2);
dynMethodGen.Emit(Newobj, Runtime.IntegerObject.Constructor);
dynMethodGen.Emit(ldstr, "a");
dynMethodGen.Emit(call, GlobalDeclaratorManager.SetMethod);
dynMethodGen.Emit(ldstr, "a");
dynMethodGen.Emit(call, GlobalDeclaratorManager.GetMethod);
dynMethodGen.Emit(Stloc, localB); 
```

使用此代码，我遇到以下问题：最终的 Stloc 导致异常：System.Security.VerificationException: Dieser Vorgang kann die Laufzeit destabilisieren。（在英语中，这意味着运行时可能会不稳定）。

我以前在堆栈不正确时遇到过这个问题，但在这种情况下堆栈是正确的。最后用一个简单的 Pop 替换 Stloc 一切正常，除了该值未存储在语言环境中。

Get 和 Set 方法如下所示：

```
 public static GenericObject getGlobal(string name)
        {
            return mDeclarators[name];
        }

        public static void setGlobal(GenericObject value, string name)
        {
            mDeclarators[name] = value;
        } 
```

同样有效的方法是将 Stloc 替换为对 SetMethod 的另一个调用，这些值被正确传递。

我错过了某种限制吗？我不能在语言环境中存储函数的返回值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:18:39.767

你想做的是

```
setGlobal(new IntegerObject(2), "a");

IntegerObject localB = getGlobal("a"); 
```

where`getGlobal`声明返回一个`GenericObject`实例。

除非类扩展了类，否则您不能将`GenericObject`实例的引用存储在`IntegerObject`变量中。C# 编译器会给您以下错误消息：`GenericObject``IntegerObject`

> 无法将类型“GenericObject”隐式转换为“IntegerObject”

假设`IntegerObject`extends `GenericObject`，解决方案是添加一个像

```
IntegerObject localB = (IntegerObject)getGlobal("a"); 
```

或者

```
IntegerObject localB = getGlobal("a") as IntegerObject; 
```

# mysql - 插入大数组时如何正确使用PDO准备执行语句

> ID：15914631
> 
> 赞同：1
> 
> 时间：2013-04-09T23:59:52.880
> 
> 标签：mysql, arrays, insert, pdo, prepare

我有一个 foreach 循环设置，这样我就可以插入一个巨大的数组（大约 200 个键）。我承认我并不完全了解 PDO 的工作原理，但我是个白痴，阅读大量文献只会让我感到愤怒和困惑。在我看到的所有示例中，数组都是在准备语句中拼写出来的。我不能这样做，因为我已经通过 foreach 循环的 200 次迭代“构建”了数组。

那么如何在不显式地在prepare语句中重新声明数组的情况下进行插入呢？谢谢你帮助我不要用叉子自杀。

```
 $ar_header = array();
        $ar_data = array();
        for ($rowcount=1; $rowcount<=$tblrows; $rowcount++)
 {
        for ($cellcount=1; $cellcount<=$tblcells; $cellcount++)
        {
        if (isset($_POST["row"."$rowcount"."cell"."$cellcount"])){ 

        // use this format as it matches with the database          
        $header = ($array1[$rowcount]).($array2[$cellcount]); 
        $data = $_POST ["row"."$rowcount"."cell"."$cellcount"];
        //the array will add each new header and data repectively
        $ar_header[] = $header;
        $ar_data[] = $data;
        $ar_god = array_combine($ar_header, $ar_data);

        }
        }
   }
  $qry = ("INSERT INTO invforms ('header') VALUES ('value')");
        $prep = $conn->prepare($qry);

       $prep->execute($ar_god); 
```

# php - jQuery没有加载

> ID：15914632
> 
> 赞同：0
> 
> 时间：2013-04-09T23:59:54.863
> 
> 标签：php, jquery, fadein, fade, fadeout

我有一个 jQuery fadetoggle 函数，它应该适用于我网站的所有八个页面，但在八个页面中，该功能仅适用于主页和联系人页面。

该网站有八个主要页面，其中七个链接在顶部导航栏中：

*   服务 产品组合 常见问题 工具 新闻 关于 联系

单击“工具”链接时，该脚本应该为“#clients_button_container”div 淡入淡出：

```
<script>
$(document).ready(function() { 
    $('#clients_button').click(function() {
        $('#clients_button_container').fadeToggle('slow')
    });
});
</script> 
```

为什么脚本只在主页和联系人页面上有效，而在其他页面上无效？所有页面都是php实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:12:59.863

Along with jquery-1.9.1.min.js you are also loading jquery-1.2.6.min.js via AJAX towards the end of the pages `.fadeToggle()` doesn't work in.

So on those pages you are loading a recent version of jQuery, then loading an older version, which takes precedence (`.fadeToggle()` was added in 1.4.4).

# sql - 使用 sql 从特定的 xml 名称值对中获取值

> ID：15914633
> 
> 赞同：0
> 
> 时间：2013-04-09T23:59:57.290
> 
> 标签：sql, xml

我正在用 SQL 编写一个查询来组合几个数据表，并得到一个以 XML 格式存储的数据，格式如下：

```
<CustomDetails xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Fields>
    <Field>
      <Name>Selected City</Name>
      <Value>Central</Value>
    </Field>
    <Field>
      <Name>Address Provided</Name>
      <Value>New Address</Value>
    </Field>
  </Fields>
</CustomDetails> 
```

XML 存储在一个表中，我已经设法`Address Provided`使用以下代码获取该字段

```
select
    o.OrderID,
    od.CustomDetails.query('data(/CustomDetails/Fields/Field[2]/Value)') as 'Address Provided'
from
    dbo.[Order] o on
        o.OrderID = s.OrderID
            join
                dbo.OrderData od on
                    od.OrderID = o.OrderID 
```

我想知道是否有更好的方法来做到这一点，以及是否有办法保证我将获得地址提供字段，即使它首先出现或前面是否有其他字段。

希望一切都有意义，任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:13:41.593

经过一番研究，我设法得到了解决方案。

```
select
    o.OrderID,
    cast(od.CustomDetails.query('
       for $CD in /CustomDetails/Fields/Field,
           $Name in $CD/Name 
       where contains($Name, "Address Provided")
       return data($CD/Value)
    ') as varchar(50)) as addressProvided
from
    dbo.[Order] o on
        o.OrderID = s.OrderID
            join
                dbo.OrderData od on
                            od.OrderID = o.OrderID 
```

# php - 从正则表达式 PHP 中排除符号

> ID：15914637
> 
> 赞同：2
> 
> 时间：2013-04-10T00:00:22.277
> 
> 标签：php, regex, replace

我目前正在使用以下内容从符号/未知字符中清除字符串：

```
$title = preg_replace("/[^a-zA-Z0-9-]/", " ", $title); 
```

但是，我不想从字符串中删除 '&'

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:02:00.487

看看这个漂亮的备忘单，它会在以后派上用场。

![在此处输入图像描述](https://i.stack.imgur.com/mC6zO.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:01:56.810

字符类的`^`开头：`[^... ]`表示该类中的所有字符都应从匹配中排除。在您的情况下，不应删除此字符。所以像这样添加`&`到类中：

```
$title = preg_replace("/[^a-zA-Z0-9-&;]/", " ", $title); 
```

# c# - 无法将 Visual Studio 制作的 C++ DLL 导入 Windows 上的 Visual Studio C# 项目

> ID：15914641
> 
> 赞同：1
> 
> 时间：2013-04-10T00:00:49.887
> 
> 标签：c#, c++, video, dll, reference

我一直在尝试为高性能密集型程序监控视频内存。

所以我在 C++ Visual Studio 应用程序中使用了 NVIDIA CUDA 库来收集我需要的数据。

不幸的是，我需要一个可以与 Ruby、C# 和我公司拥有的软件测试工具一起使用的包。

所以我决定编译一个 C++ DLL 并将其导入到 C# Visual Studio 项目中进行测试。

我能够编译 DLL，但将其导入我的 Visual C# 程序一直是个问题。

我右键单击参考 - >添加参考。然后我单击浏览选项卡并浏览到我的 DLL 的位置；“TestProgram.dll”，我点击“确定”

然后我收到以下错误消息“无法添加对 C:.... 的引用。请确保该文件可访问，并且它是有效的程序集或 COM 组件。”

到目前为止我所尝试的： 1\. 从我系统上的几个不同位置导入 DLL。2\. 将 DLL 移动到我的解决方案资源管理器中并导入它 3\. 使用“Invoke”方法：[DllImport("PathToMyDll")] 4\. 仅使用我的 dll 名称使用“Invoke”方法。5\. 键入我的 DLL 的“使用”路径 6\. 将 dll 导出为 .lib 文件

我究竟做错了什么？我认为如果我使用 Visual Studio 2010 导出 DLL，那么肯定可以将相同的 DLL 添加到 Visual Studio 2010 项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:34:00.803

那么，它是有效的程序集还是 COM 组件？仅仅因为它是一个 C++ DLL 并不意味着它可以仅作为一个参考使用，事实上，大多数都不能。它需要是托管 DLL 或 COM 对象。如果不是这些，那么您必须从托管程序集中调用非托管代码。这意味着在存根中定义每个函数。

更多信息：[如何从 C# 调用 C++ dll 导出函数](https://stackoverflow.com/questions/5367515/how-to-call-a-c-dll-exported-function-from-c-sharp)

请注意，您还必须处理 64/32 位问题，因为如果 DLL 是为 32 位编译的，则不能在 64 位应用程序中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:31:44.083

我找到了解决这个问题的方法。CUDA 创建一个 Windows 控制台应用程序项目。所以解决方案是只使用它而不是 DLL。

这很有效，因为 Ruby、Test Complete 和 Visual C# 可以读取基本 .exe 控制台程序的输出（需要一些工作）。

编译的exe很简单。我需要做的就是在启动程序时传入一个整数作为参数，程序将从我的 NVIDIA 卡中获取我需要的数据。

现在的挑战是找到与 .exe 交互的好方法。

# asp.net - 循环时根据内联代码显示/隐藏按钮

> ID：15914645
> 
> 赞同：0
> 
> 时间：2013-04-10T00:01:33.577
> 
> 标签：asp.net

我试图弄清楚如何使用临时变量（从循环创建）来显示/隐藏按钮。我有表格数据和它们旁边的一些操作按钮。我需要能够根据该数据的状态关闭和打开按钮。

f.IsFoo 是一个布尔值

```
 <table stuff here>
 <% foreach (Foo f in listOfFoos) { %>
    <tr>
        <td>
            <%= Fubar(f)%>
        </td>
        <td>
            <%= Fubar1(f) %>
        </td>
        <td>
            <%= Fubar2(f)%>
        </td>
        <td>
            <%= Fubar3(f)%>
        </td>
        <td>
            <%= Fuba4(f)%>
        </td>
        <td>
            <%= Fubar5(f)%>
        </td>
        <td>

        <asp:Button Text="Load" runat="server"  OnClick="FooBar" Visible='<%= f.IsFoo%>'/>

        </td>
    </tr>
<%}%> 
```

我对 aspx 很陌生，它的语法和在线搜索让我更加困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:10:16.783

就个人而言，我倾向于将这样的逻辑放在文件后面的代码中 - 但是我相信下面的代码应该可以工作，

我为您的按钮添加了一个 ID - 我还删除了可见性属性 - 然后我通过其 ID 引用该按钮 - 并将其可见性设置为等于 f.IsFoo 属性的可见性

可能在这里试试这个：

```
<% btnFoo.Visible = f.IsFoo; %>

<asp:Button ID="btnFoo" Text="Load" runat="server"  OnClick="FooBar" /> 
```

# c# - 使用 GridView1_SelectedIndexChanged 时出错

> ID：15914647
> 
> 赞同：1
> 
> 时间：2013-04-10T00:01:41.720
> 
> 标签：c#, asp.net, events, gridview

我有带有 selectedindexchanged 事件和 3 个按钮的 Gridview。单击其中一个按钮时，我使用 **GridView1.SelectedRow.RowIndex**来选择选定的行。

![在此处输入图像描述](https://i.stack.imgur.com/v5kEO.jpg)

当用户单击一行时，这可以正常工作。但问题是当没有选择行并且在我的代码中调用**GridView1.SelectedRow.RowIndex时。**这给出了错误：**对象引用未设置为对象的实例。**

有什么想法可以检查 GridView1.SelectedRow.RowIndex 是否有值，或者如何在选择一行之前禁用它？

这是添加按钮的代码：

```
protected void AddNews_Click(object sender, EventArgs e)
{
    rowIndex = GridView1.SelectedRow.RowIndex;
    Response.Redirect("~/AddNews.aspx?Parameter=" + rowIndex);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T04:10:45.583

您可以将您的 NewsID 绑定到您的超链接：

```
 <asp:HyperLinkField 
                        Text="Add News"
                        HeaderText="" 
    DataNavigateUrlFormatString="~/AddNews.aspx?Parameter=/{0}" 
                        DataNavigateUrlFields="NewsID" >
                        <ItemStyle HorizontalAlign="Left" />
                    </asp:HyperLinkField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:20:48.280

```
protected void AddNews_Click(object sender, EventArgs e)
{
    int i = GridView1.SelectedRow.RowIndex;
    if(i>= 0)
    {
        Response.Redirect("~/AddNews.aspx?Parameter=" + index);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T04:09:27.860

```
protected void AddNews_Click(object sender, EventArgs e)
{
    int index = GridView1.SelectedIndex;
    if(index >= 0) // if -1 no selection 
    {
        Response.Redirect("~/AddNews.aspx?Parameter=" + index);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:40:14.010

看起来你得到了`NullReferenceException`因为`GridView1.SelectedRow`是空的。在尝试使用它之前验证它`GridView1.SelectedRow`不为**空。**

```
if(GridView1.SelectedRow != null)
{
     // A row is selected, SelectedRow is not null so safe to access RowIndex...
     int rowIndex = GridView1.SelectedRow.RowIndex;
} 
```

或者，您可以只使用在未选择任何内容时`SelectedRowIndex`返回的成员`-1`。

```
if(GridView1.SelectedIndex >= 0)
{
     // A row is selected, get SelectedRowIndex...
     int rowIndex = GridView1.SelectedIndex;
} 
```

# php - mb_convert_case 删除 Unicode 字符？

> ID：15914648
> 
> 赞同：0
> 
> 时间：2013-04-10T00:01:47.127
> 
> 标签：php, unicode, character-encoding

我的代码：

```
echo mb_convert_case('Björk Guðmundsdóttir', MB_CASE_UPPER, 'UTF-8');
echo mb_convert_case('Björk Guðmundsdóttir', MB_CASE_LOWER, 'UTF-8'); 
```

和输出：

```
BJRK GUMUNDSDTTIR
bjrk gumundsdttir 
```

一些字符被删除。有谁知道为什么？

**更新 1：**

我注意到我的 PHP 文件被注意保存为 UTF-8。所以，我将它保存为 UTF-8 并再次运行代码。我的新结果：

```
BJÃ–RK GUÃMUNDSDÃ“TTIR
bjÃ¶rk guÃ°mundsdÃ³ttir 
```

**更新 2：**

我想问题只是它在浏览器中显示得很奇怪。通过添加解决`header('Content-Type: text/html; charset=utf-8');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:33:11.527

首先确保您的编辑器设置为没有 BOM 的 UTF-8，然后您必须确保您传递给函数的文本实际上是 UTF-8，因为这是您指定为第三个参数的内容。然后它应该工作

编辑：您可能还想检查您的浏览器是否正确解释字符并确保页面正在设置内容类型，使用`<meta>`标签或 PHPs [header()](http://www.php.net/header)

# meteor - Meteor - 如何将动态生成的内容插入到集合中？

> ID：15914649
> 
> 赞同：0
> 
> 时间：2013-04-10T00:01:50.037
> 
> 标签：meteor

我是 Meteor 的新手，几乎不了解它，但假设我有一个名为 mycollection 的集合，声明方式居于顶部，因此它在客户端和服务器部分都可用：

```
mycollection = new Meteor.Collection('MyDumbCollection'); 
```

然后我有这样的事情：

```
if (Meteor.isClient) {  

Deps.autorun(function() {
    Meteor.subscribe('mycollectionSubscription');
});

Template.myshittytemplate.rendered = function() {

$("#heynow").prepend(shitfuck).dosomething(); 
godammit = thisfuckingthing;
//paraphrasing

mycollection.insert({thing1: thisfuckingthing});

  };

}

if (Meteor.isServer) {

 Meteor.publish('mycollectionSubscription', function () {
return mycollection.find();
});

}; 
```

然后在我的模板中：

```
<template name="myshittytemplate">
<div id ="heynow">
{{#each mycollection}}
{{{thing1}}}
{{/each}}
</div>
</template> 
```

我要做的是将在#heynow div 中创建的'thisfuckingthing' html 保存到集合中并发布给所有人。如果有办法让 Meteor 简单地观察 dom 的变化并保存它们，那就更好了。

我*确实*卸载了自动发布，如果这有所作为。哈尔普。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:28:51.863

在客户端模板中

```
 Template.myshittytemplate.mycollection = function() {
       return mycollection.find({}).fetch(); 
     };

    Template.myshittytemplate.rendered = function() {
       $(function(){
         $("#heynow").prepend(shitfuck).dosomething(); 
         godammit = thisfuckingthing;
        //paraphrasing
         mycollection.insert({thing1: thisfuckingthing},function(err,_id){
                   if(err){
                      console.log(err);
                      return;
                   });
                   console.log(_id);
         });
       };
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:39:50.563

我在客户端部分需要这个：

```
 Template.myshittytemplate.mycollection = function() {
 return mycollection.find(); 
 }; 
```

希望这对某人有帮助！

# java - Swing中的背景问题，没有Netbeans

> ID：15914653
> 
> 赞同：0
> 
> 时间：2013-04-10T00:01:59.030
> 
> 标签：java, swing, background, jframe, paintcomponent

我是一个完全的初学者，虽然我马上就有了大部分的应用程序。我无法为我的摇摆 gui 制作背景图片。我已经读到你应该用我所做的覆盖油漆方法来做到这一点。但在某个地方我犯了一个错误。因为没有任何机会，除了按钮是不可见的，直到我用鼠标越过它。我尝试了几件事，也许你们中的一个人可以看到问题并帮助我？非常感谢 ：）

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

/**
 *
 * @author Shore
 */
public class GUI extends JFrame implements ActionListener  {
    Container c;
    JButton überprüfungsButton = new JButton();
    JTextField eingabeTextField = new JTextField();
    JTextArea ausgabeTextFeld = new JTextArea();
    Image hintergrundBild;

    public GUI(){
        this.hintergrundBild = Toolkit.getDefaultToolkit().getImage( "Bild2.jpg" );
        c = getContentPane();   
        c.setLayout(new BorderLayout());
        c.setBackground(Color.LIGHT_GRAY);
        überprüfungsButton = new JButton("Test");
        überprüfungsButton.addActionListener(this);
        c.add(überprüfungsButton, BorderLayout.CENTER);
        eingabeTextField = new JTextField(40);
        c.add(eingabeTextField, BorderLayout.PAGE_START);
        eingabeTextField.setOpaque(false);
        ausgabeTextFeld = new JTextArea(30,30);
        c.add(ausgabeTextFeld, BorderLayout.PAGE_END);
        ausgabeTextFeld.setOpaque(false);

    }
    public static void main(String[] args) {
          GUI fenster = new GUI();
          fenster.setTitle("Für");
          fenster.setSize(800, 800);
          fenster.setVisible(true);
          fenster.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

      protected void paintComponent(Graphics g) {

                if (hintergrundBild != null) {
                    g.drawImage(hintergrundBild, 0, 0, getWidth(), getHeight(), null);
                }
      }

    @Override
    public void actionPerformed(ActionEvent e) {
       if(e.getSource() == überprüfungsButton){ 
```

感谢花时间看的人。

更新：我实际上可以解决 Netbeans 和 swing-GUI Creator 的问题。不过，我还是很好奇！如果您仍然可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:35:39.473

`JFrame`不会覆盖`paintComponent`，因此 Swing 不会调用它。

在方法上方添加`@Override`注解会表明该方法不包含在超类中。实现背景图像的最简单方法是创建一个子类`JPanel`并在那里覆盖`paintComponent`。

**更新：**

网络上有许多`JFrame`扩展类的示例。从设计的角度来看，这不是必需的，因为您通常不会对框架进行任何新功能。出于这个原因，只创建一个直接实例并使用会更好（如图所示）：

```
public class BackGroundProblem {
    public static void main(String[] args) throws IOException {

        final Image image = ImageIO.read(new URL("http://news.beloblog.com/ProJo_Blogs/architecturehereandthere/hallstattsumm.jpg"));
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                JPanel backgroundPanel = new ImagePanel(image);
                backgroundPanel.add(new JButton("Sample Button 1"));
                backgroundPanel.add(new JButton("Sample Button 2"));
                frame.add(backgroundPanel);
                frame.setLocationByPlatform(true);
                frame.pack();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }
}

class ImagePanel extends JPanel {
    private static final long serialVersionUID = 1L;
    private Image image;

    ImagePanel(Image image) {
        this.image = image;
    };

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, getWidth(), getHeight(), this);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(800, 600);
    }
} 
```

# xml - 应用模板

> ID：15914655
> 
> 赞同：0
> 
> 时间：2013-04-10T00:02:06.313
> 
> 标签：xml, xslt, xpath, xslt-1.0

这是我的代码：

```
<xsl:template match="*">
  <Segment ID="{name()}">
    <xsl:value-of select="concat(., ' ')"/>
  </Segment>    
</xsl:template>

<xsl:template match="*" mode="break">
  <Segment ID="{name()}">
    <xsl:value-of select="."/>
  </Segment>
  <Segment>#$NL</Segment>
</xsl:template> 
```

有没有办法在第二个模板中调用第一个模板，这样我就不必重复代码了？像这样的东西：

```
<xsl:template match="*" mode="break">
  <xsl:apply-templates select="*"/>
  <Segment>#$NL</Segment>
</xsl:template> 
```

我在这里使用 * 并且它不起作用。我尝试了 @* 和 / 但没有任何效果。我的目标是这样称呼它：

```
<xsl:apply-templates select="FirstName"/> 
```

或者

```
<xsl:apply-templates select="Name" mode="break"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:16:23.677

如果您使用`xsl:call-template`而不是`xsl:apply-templates`，您可以设置一个命名模板，然后在需要时调用它。

如果我正确理解您的问题，则重复代码是具有指定 ID 属性和内部文本字符串的 Segment 元素。所以你可以给这个模板这两个参数，并在你调用它时指定它们。像这样：

```
<xsl:template name="segment">
   <xsl:param name="id"/>
   <xsl:param name="text"/>
   <Segment ID="{$id}">
      <xsl:value-of select="$text"/>
   </Segment>    
</xsl:template>

...
   <xsl:call-template name="segment">
      <xsl:with-param name="id" select="name(.)"/>
      <xsl:with-param name="text" select="."/>
   </xsl:call-template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:25:44.220

您可以简单地用这两个替换您向我们展示的两个模板：

```
<xsl:template match="*" name="Segment">
  <Segment ID="{name()}">
    <xsl:value-of select="concat(., ' ')"/>
  </Segment>    
</xsl:template>

<xsl:template match="*" mode="break">
  <xsl:call-template name="Segment" />
  <Segment>#$NL</Segment>
</xsl:template> 
```

我可以看到，在您原来的 XSLT 中，第一个模板将空格连接到值上，而第二个模板没有。使用上述方法，在两种情况下都会附加空格。这对您的要求满意吗？

# javascript - dust.js 助手的参数可以不是字符串（例如数组）吗？

> ID：15914657
> 
> 赞同：2
> 
> 时间：2013-04-10T00:02:24.953
> 
> 标签：javascript, dust.js

在使用dust.js 模板解析JSON 数据时，我调用了一个助手并将JSON 数据中的一个数组作为其参数之一传递给助手。它是一个字符串数组，例如：

```
"foo": ["a", "b", "c"] 
```

在dust.js 帮助器中，值变成了这个字符串：“a, b, c”。typeof 将其类型报告为字符串。有没有办法阻止这种自动转换？我不想对逗号进行拆分，因为数组中的各个字符串可能包含逗号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T23:47:16.440

这取决于您如何将参数传递给助手。`{@myHelpers arrayParam=myArray /}`将作为数组传入（假设 myArray 是一个数组）vs`{@myHelper arrayParam="{myArray}"/}`由于插值将作为字符串传入。请注意第一个示例如何没有参数`{}`。`myArray`

这是JSFiddle 中这两个示例的[工作演示。](http://jsfiddle.net/Yy6rP/)

# angularjs - 如何使 ng-repeat 过滤掉重复的结果

> ID：15914658
> 
> 赞同：131
> 
> 时间：2013-04-10T00:02:26.150
> 
> 标签：angularjs, angularjs-ng-repeat

我正在运行一个简单的`ng-repeat`JSON 文件上运行一个简单的程序，并希望获取类别名称。大约有 100 个对象，每个对象属于一个类别 - 但只有大约 6 个类别。

我目前的代码是这样的：

```
<select ng-model="orderProp" >
  <option ng-repeat="place in places" value="{{place.category}}">{{place.category}}</option>
</select> 
```

输出是 100 个不同的选项，大部分是重复的。如何使用 Angular 检查是否存在`{{place.category}}`已存在，如果已存在则不创建选项？

编辑：在我的 javascript 中`$scope.places = JSON data`，只是为了澄清

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-04-11T04:51:21.810

您可以使用来自 AngularUI 的**唯一**过滤器（此处提供源代码：[AngularUI 唯一过滤器](https://github.com/angular-ui/angular-ui/blob/master/modules/filters/unique/unique.js)）并直接在 ng-options（或 ng-repeat）中使用它。

```
<select ng-model="orderProp" ng-options="place.category for place in places | unique:'category'">
    <option value="0">Default</option>
    // unique options from the categories
</select> 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-03-19T20:27:25.967

或者您可以使用 lodash 编写自己的过滤器。

```
app.filter('unique', function() {
    return function (arr, field) {
        return _.uniq(arr, function(a) { return a[field]; });
    };
}); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-06-30T13:14:24.853

[您可以在angular.filter](https://github.com/a8m/angular-filter)模块 中使用 'unique'(aliases: uniq) 过滤器

用法：`colection | uniq: 'property'`
您还可以按嵌套属性过滤： `colection | uniq: 'property.nested_property'`

你能做的，就是这样。。

```
function MainController ($scope) {
 $scope.orders = [
  { id:1, customer: { name: 'foo', id: 10 } },
  { id:2, customer: { name: 'bar', id: 20 } },
  { id:3, customer: { name: 'foo', id: 10 } },
  { id:4, customer: { name: 'bar', id: 20 } },
  { id:5, customer: { name: 'baz', id: 30 } },
 ];
} 
```

**HTML：**我们按客户 ID 过滤，即删除重复的客户

```
<th>Customer list: </th>
<tr ng-repeat="order in orders | unique: 'customer.id'" >
   <td> {{ order.customer.name }} , {{ order.customer.id }} </td>
</tr> 
```

**结果**
客户列表：
foo 10
bar 20
baz 30

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-09-09T20:08:56.057

这段代码对我有用。

```
app.filter('unique', function() {

  return function (arr, field) {
    var o = {}, i, l = arr.length, r = [];
    for(i=0; i<l;i+=1) {
      o[arr[i][field]] = arr[i];
    }
    for(i in o) {
      r.push(o[i]);
    }
    return r;
  };
}) 
```

接着

```
var colors=$filter('unique')(items,"color"); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-10T01:42:58.393

如果您想列出类别，我认为您应该在视图中明确说明您的意图。

```
<select ng-model="orderProp" >
  <option ng-repeat="category in categories"
          value="{{category}}">
    {{category}}
  </option>
</select> 
```

在控制器中：

```
$scope.categories = $scope.places.reduce(function(sum, place) {
  if (sum.indexOf( place.category ) < 0) sum.push( place.category );
  return sum;
}, []); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-15T22:48:08.307

这是一个简单而通用的示例。

过滤器：

```
sampleApp.filter('unique', function() {

  // Take in the collection and which field
  //   should be unique
  // We assume an array of objects here
  // NOTE: We are skipping any object which
  //   contains a duplicated value for that
  //   particular key.  Make sure this is what
  //   you want!
  return function (arr, targetField) {

    var values = [],
        i, 
        unique,
        l = arr.length, 
        results = [],
        obj;

    // Iterate over all objects in the array
    // and collect all unique values
    for( i = 0; i < arr.length; i++ ) {

      obj = arr[i];

      // check for uniqueness
      unique = true;
      for( v = 0; v < values.length; v++ ){
        if( obj[targetField] == values[v] ){
          unique = false;
        }
      }

      // If this is indeed unique, add its
      //   value to our values and push
      //   it onto the returned array
      if( unique ){
        values.push( obj[targetField] );
        results.push( obj );
      }

    }
    return results;
  };
}) 
```

标记：

```
<div ng-repeat = "item in items | unique:'name'">
  {{ item.name }}
</div>
<script src="your/filters.js"></script> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-08-25T22:15:47.343

我决定扩展@thethakuri 的答案以允许唯一成员的任何深度。这是代码。这适用于那些不想仅仅为了这个功能而包含整个 AngularUI 模块的人。如果您已经在使用 AngularUI，请忽略此答案：

```
app.filter('unique', function() {
    return function(collection, primaryKey) { //no need for secondary key
      var output = [], 
          keys = [];
          var splitKeys = primaryKey.split('.'); //split by period

      angular.forEach(collection, function(item) {
            var key = {};
            angular.copy(item, key);
            for(var i=0; i<splitKeys.length; i++){
                key = key[splitKeys[i]];    //the beauty of loosely typed js :)
            }

            if(keys.indexOf(key) === -1) {
              keys.push(key);
              output.push(item);
            }
      });

      return output;
    };
}); 
```

例子

```
<div ng-repeat="item in items | unique : 'subitem.subitem.subitem.value'"></div> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-09-22T21:12:18.500

# 更新

我推荐使用 Set 但很抱歉这不适用于 ng-repeat，也不适用于 Map，因为 ng-repeat 仅适用于数组。所以忽略这个答案。无论如何，如果您需要以一种方式过滤掉重复项，就像其他人所说的那样`angular filters`，这里是[它到入门部分的链接](https://github.com/a8m/angular-filter#get-started)。

* * *

# 旧答案

Yo 可以使用[ECMAScript 2015 (ES6) 标准 Set Data structure](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Set)，而不是 Array Data Structure ，这样您在添加到 Set 时过滤重复值。（记住集合不允许重复值）。真的很容易使用：

```
var mySet = new Set();

mySet.add(1);
mySet.add(5);
mySet.add("some text");
var o = {a: 1, b: 2};
mySet.add(o);

mySet.has(1); // true
mySet.has(3); // false, 3 has not been added to the set
mySet.has(5);              // true
mySet.has(Math.sqrt(25));  // true
mySet.has("Some Text".toLowerCase()); // true
mySet.has(o); // true

mySet.size; // 4

mySet.delete(5); // removes 5 from the set
mySet.has(5);    // false, 5 has been removed

mySet.size; // 3, we just removed one value 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-09-14T15:52:42.183

这是一种仅模板的方法（尽管它不维护顺序）。另外，结果也会被排序，这在大多数情况下很有用：

```
<select ng-model="orderProp" >
   <option ng-repeat="place in places | orderBy:'category' as sortedPlaces" data-ng-if="sortedPlaces[$index-1].category != place.category" value="{{place.category}}">
      {{place.category}}
   </option>
</select> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-10-20T15:33:39.993

我有一个字符串数组，而不是对象，我使用了这种方法：

```
ng-repeat="name in names | unique" 
```

使用此过滤器：

```
angular.module('app').filter('unique', unique);
function unique(){
return function(arry){
        Array.prototype.getUnique = function(){
        var u = {}, a = [];
        for(var i = 0, l = this.length; i < l; ++i){
           if(u.hasOwnProperty(this[i])) {
              continue;
           }
           a.push(this[i]);
           u[this[i]] = 1;
        }
        return a;
    };
    if(arry === undefined || arry.length === 0){
          return '';
    }
    else {
         return arry.getUnique(); 
    }

  };
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-02-17T17:38:47.193

似乎每个人都在将自己版本的`unique`过滤器扔进戒指，所以我也会这样做。非常欢迎批评。

```
angular.module('myFilters', [])
  .filter('unique', function () {
    return function (items, attr) {
      var seen = {};
      return items.filter(function (item) {
        return (angular.isUndefined(attr) || !item.hasOwnProperty(attr))
          ? true
          : seen[item[attr]] = !seen[item[attr]];
      });
    };
  }); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-10-16T06:13:57.637

上述过滤器都没有解决我的问题，所以我不得不从官方 [github doc 复制过滤器。](https://github.com/angular-ui/angular-ui-OLDREPO/blob/master/modules/filters/unique/unique.js)然后按照上述答案中的说明使用它

```
angular.module('yourAppNameHere').filter('unique', function () { 
```

返回函数（项目，filterOn）{

```
if (filterOn === false) {
  return items;
}

if ((filterOn || angular.isUndefined(filterOn)) && angular.isArray(items)) {
  var hashCheck = {}, newItems = [];

  var extractValueToCompare = function (item) {
    if (angular.isObject(item) && angular.isString(filterOn)) {
      return item[filterOn];
    } else {
      return item;
    }
  };

  angular.forEach(items, function (item) {
    var valueToCheck, isDuplicate = false;

    for (var i = 0; i < newItems.length; i++) {
      if (angular.equals(extractValueToCompare(newItems[i]), extractValueToCompare(item))) {
        isDuplicate = true;
        break;
      }
    }
    if (!isDuplicate) {
      newItems.push(item);
    }

  });
  items = newItems;
}
return items;
  };

}); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-06-23T15:24:30.567

如果要根据嵌套键获取唯一数据：

```
app.filter('unique', function() {
        return function(collection, primaryKey, secondaryKey) { //optional secondary key
          var output = [], 
              keys = [];

          angular.forEach(collection, function(item) {
                var key;
                secondaryKey === undefined ? key = item[primaryKey] : key = item[primaryKey][secondaryKey];

                if(keys.indexOf(key) === -1) {
                  keys.push(key);
                  output.push(item);
                }
          });

          return output;
        };
    }); 
```

像这样称呼它：

```
<div ng-repeat="notify in notifications | unique: 'firstlevel':'secondlevel'"> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-05-28T19:57:46.660

添加此过滤器：

```
app.filter('unique', function () {
return function ( collection, keyname) {
var output = [],
    keys = []
    found = [];

if (!keyname) {

    angular.forEach(collection, function (row) {
        var is_found = false;
        angular.forEach(found, function (foundRow) {

            if (foundRow == row) {
                is_found = true;                            
            }
        });

        if (is_found) { return; }
        found.push(row);
        output.push(row);

    });
}
else {

    angular.forEach(collection, function (row) {
        var item = row[keyname];
        if (item === null || item === undefined) return;
        if (keys.indexOf(item) === -1) {
            keys.push(item);
            output.push(row);
        }
    });
}

return output;
};
}); 
```

更新您的标记：

```
<select ng-model="orderProp" >
   <option ng-repeat="place in places | unique" value="{{place.category}}">{{place.category}}</option>
</select> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-07-10T13:05:02.987

创建自己的数组。

```
<select name="cmpPro" ng-model="test3.Product" ng-options="q for q in productArray track by q">
    <option value="" >Plans</option>
</select>

 productArray =[];
angular.forEach($scope.leadDetail, function(value,key){
    var index = $scope.productArray.indexOf(value.Product);
    if(index === -1)
    {
        $scope.productArray.push(value.Product);
    }
}); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-30T09:08:33.283

这可能有点矫枉过正，但它对我有用。

```
Array.prototype.contains = function (item, prop) {
var arr = this.valueOf();
if (prop == undefined || prop == null) {
    for (var i = 0; i < arr.length; i++) {
        if (arr[i] == item) {
            return true;
        }
    }
}
else {
    for (var i = 0; i < arr.length; i++) {
        if (arr[i][prop] == item) return true;
    }
}
return false;
}

Array.prototype.distinct = function (prop) {
   var arr = this.valueOf();
   var ret = [];
   for (var i = 0; i < arr.length; i++) {
       if (!ret.contains(arr[i][prop], prop)) {
           ret.push(arr[i]);
       }
   }
   arr = [];
   arr = ret;
   return arr;
} 
```

distinct 函数取决于上面定义的 contains 函数。它可以称为`array.distinct(prop);`prop 是您想要区分的属性。

所以你可以说`$scope.places.distinct("category");`

# java - 聊天应用程序的Java nat遍历

> ID：15914661
> 
> 赞同：6
> 
> 时间：2013-04-10T00:02:33.910
> 
> 标签：java, sockets, chat, nat

我正在尝试为我的网络课程创建一个 java 聊天应用程序。截至目前，我一直试图连接到不同路由器后面的人。我现在拥有我的项目的方式是我有一个客户端程序和一个服务器程序。客户端程序首先登录到服务器程序，服务器程序将他们的 IP 和端口记录在数据库中，然后服务器将他们的朋友列表及其 IP 和端口返回给他们。然后客户端关闭与服务器的连接并尝试使用服务器发回的信息连接到另一个客户端。到目前为止，我的程序只能连接到服务器并获取朋友的 IP 和端口，但是当我使用这些值连接到另一个客户端时，我无法连接。

```
socket = new Socket();
socket.setReuseAddress(true);
socket.setKeepAlive(true);
socket.setSoLinger(true, 10);
socket.bind(new InetSocketAddress(Port));
socket.connect(new InetSocketAddress(host, SERVER_PORT));
reusePort = socket.getLocalPort(); 
```

上面是一段用于连接服务器的java代码，下面是我在客户端所做的。

```
ss = new ServerSocket(reusePort); 
```

所以现在从技术上讲，我正在侦听我用来连接服务器的同一端口，该服务器已登录并且可以检索到另一个客户端，并且我的 ip 和端口位于 NAT 表中。我不确定我错过了什么，或者是否有一些协议或我必须做的事情。我看过 TCP 和 UDP 打孔，但我不确定它是如何实际完成的或如何实现它。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:06:09.503

如果要发送消息，则需要在充当服务器的任何设备（创建套接字服务器的任何设备）上设置端口转发。端口转发在路由器上完成。您无法连接到其他客户端的原因是它们隐藏在路由器防火墙后面。他们在世界其他地方的地址实际上是路由器的地址，而不是他们的物理计算机的地址。在他们的本地网络上，他们的地址与世界其他地方看到的地址不同，路由器根据地址转换表确定需要将来自外部世界的哪些消息发送到客户端。

鉴于您的架构，这意味着所有客户端都需要让他们的路由器进行端口转发，这当然是不可行的（想象 gtalk 或目标要求用户进行端口转发）。

更常见的架构是让服务器完成向连接的客户端重新广播消息的工作，并维护表以查找谁与谁交谈。这样就有一个服务器需要一个静态 IP（或端口转发），所有用户只是连接到服务器套接字并从中读取消息的客户端。

有关描述第二种架构的实际代码，请参阅[http://pirate.shu.edu/~wachsmut/Teaching/CSAS2214/Virtual/Lectures/chat-c​​lient-server.html](http://pirate.shu.edu/~wachsmut/Teaching/CSAS2214/Virtual/Lectures/chat-client-server.html)。然后，运行服务器代码的机器要么需要一个静态 IP，要么如果它位于路由器后面，则需要来自它正在侦听的端口的流量以进行转发。

因此，在服务器代码上，您将绑定到从路由器分配的 ip（例如 192.168.1.2 在某个端口，例如 5000）。然后转到您的路由器配置页面（可能是 192.168.1.1 参见[http://www.wikihow.com/Port-Forward/Open-Ports-on-a-Linksys-Router](http://www.wikihow.com/Port-Forward/Open-Ports-on-a-Linksys-Router)），并将端口 5000 转发到地址 192.168 .1.2.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-19T15:34:04.067

> 交互式连接建立 (ICE) 协议结合了各种 NAT 穿越实用程序，例如 STUN 和 TURN 协议，以提供一种强大的机制，允许基于提供/应答的协议（例如 SIP 和 XMPP）穿越 NAT。

该项目提供了 ICE 协议的 Java 实现，SIP 和 XMPP 应用程序都可以使用它。该项目还提供了套接字共享和对伪 TCP 的支持等功能。

ice4j 由[Jitsi](https://jitsi.org/)社区维护。

[冰4j](https://github.com/jitsi/ice4j)

# c# - 检查整数列表是否增加一

> ID：15914662
> 
> 赞同：8
> 
> 时间：2013-04-10T00:02:35.093
> 
> 标签：c#, linq, list

有没有办法使用 LINQ 检查整数列表是否是“连续的” - 即 1、2、3、4、5 或 14、15、16、17、18？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-10T00:08:22.723

你可以通过[Enumerable.Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)做到这一点：

```
bool sequential = values.Zip(values.Skip(1), (a,b) => (a+1) == b).All(x => x); 
```

这通过获取每对值，并检查第二个是否比第一个大 1 并返回布尔值来工作。如果所有对都符合标准，则值是连续的。

* * *

鉴于这是一个整数*列表*，您可以使用以下方法更有效地执行此操作：

```
bool sequential = values.Skip(1).Select((v,i) => v == (values[i]+1)).All(v => v); 
```

这仅适用于可以通过索引访问的序列。请注意，我们使用`values[i]`，而不是`values[i-1]`，因为`Skip`调用有效地移动了索引。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-10T00:15:21.520

```
bool isSequential = Enumerable.Range(values.Min(), values.Count())
                              .SequenceEqual(values); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T02:00:28.900

另一种选择是使用[Aggregate](http://msdn.microsoft.com/en-us/library/bb549218.aspx)仅迭代序列一次。

请注意，与`All`Reed Copsey 建议的不同`Aggregate`，条件失败时不能在中间停止......

```
var s = new int[] {3,4,5,6}.ToList();

var isSequential = s.Aggregate
  (
      new {PrevValue = 0, isFirst = true, Success = true} ,
      (acc, current) => 
          new {
                  PrevValue = current,
                  isFirst = false, 
                  Success = acc.Success && (acc.isFirst || (acc.PrevValue == current - 1))
               }
  )
  .Success; 
```

更高级的版本将是具有携带先前值的迭代器或特殊代码，该代码将在“First and the rest”上拆分迭代器，从而允许对任何可枚举的单次迭代实现 Reed 的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-01T02:59:46.077

如果您已经知道列表中的数字是**唯一的**，并且也是**排序**的，那么最简单的顺序检查就是

```
lst[lst.Count - 1] - lst[0] == lst.Count - 1 
```

假设列表中至少有 1 个元素。

# c++ - 在 Class::method 中取消破坏代码

> ID：15914666
> 
> 赞同：4
> 
> 时间：2013-04-10T00:03:06.910
> 
> 标签：c++, uncrustify

我正在尝试使用 Uncrustify 但在 xcode 中工作时所有配置都破坏了我的代码

```
std::vector<int> a; 
```

变成

```
std: : vector<int> a; 
```

有没有办法防止这种情况，以便 :: 保持在一起

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:44:52.690

此错误的原因是 Uncrustify 参数中的语言设置错误。

将 -l OC 更改为 -l CPP 解决了问题

# c++ - 常用对话框 Win32

> ID：15914668
> 
> 赞同：1
> 
> 时间：2013-04-10T00:03:12.473
> 
> 标签：c++, winapi, modal-dialog

我有一个通用颜色对话框，我想在菜单按下时激活它。不幸的是，每次我按下该项目时，窗口都会失去焦点，就好像一个对话框即将出现，但该对话框从未出现。

我现在使用的代码如下：

```
case ID_TOOL_CHOOSECOLOR:
//show colour dialog
ChooseColor(&cc); 
```

我已经像这样初始化了我的 CHOOSECOLOR 结构：

```
 cc.lStructSize    = sizeof (CHOOSECOLOR) ;
 cc.hwndOwner      = NULL ;
 cc.hInstance      = NULL ;
 cc.rgbResult      = RGB (0x80, 0x80, 0x80) ;
 cc.lpCustColors   = crCustColor ;
 cc.Flags          = CC_RGBINIT | CC_FULLOPEN ;
 cc.lCustData      = 0 ;
 cc.lpfnHook       = NULL ;
 cc.lpTemplateName = NULL ; 
```

奇怪的是，对话框仅在我按下“ALT”键（并且只有 alt 键）后才会出现。有小费吗？

顺便说一句，我正在尝试在 MDI 文档中执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T00:10:43.217

我能看到的唯一问题是您没有为对话框指定所有者。这可能会导致对话框显示在主窗口后面。将主窗口的句柄指定为对话框的所有者。

[在 MSDN 上的窗口功能页面上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)阅读有关窗口所有权的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:59:32.400

Fixed it!

Turns out, the issue I had was in the main window's WndProc.

I had set my `WM_PAINT` command to `return 0;` instead of `break;`.

Changing my `return 0` to `break` solved everything! I think this is cause my `return` would exit the wndproc, whereas `break` would allow me to continue to the `return MDIFrameProc(hwnd, message, wparam, lparam)` .

I maybe wrong, but that's the best explanation that I can come up with that explains why `break` works but `return 0` doesn't.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T01:21:05.583

画完后一定要打电话`ValidateRect(HWND,CONST RECT*);`

# java - 通过 URL 编码从 PHP 到 Java 的时间敏感加密/解密错误

> ID：15914673
> 
> 赞同：2
> 
> 时间：2013-04-10T00:04:19.130
> 
> 标签：java, php, encryption, encoding

我有一个访问控制的 PHP 系统，HTTP 将客户端重定向到具有独特安全模型的基于 Java 的报告系统（这很糟糕）。为了绕过报告安全模型，我使用 Tomcat 过滤器在所有请求到达报告系统之前对其进行验证。我正在使用从 PHP 传递到 Java 的加密令牌，它告诉报告系统客户端是谁。过滤器根据限制列表检查请求的报告名称，如果客户端的角色不足，则返回 403。

加密令牌存储时间戳和用户角色，例如

```
1365549482|SysAdmin 
```

加密后看起来像这样

```
vSEFgBYd30Ik5p4PZlG968cvdg== 
```

PHP 系统充当所有报告请求的代理。当用户请求报告时，请求转到 PHP，PHP 生成加密令牌，URL 对其进行编码，然后将其附加到报告 URL 并向报告系统发出 GET 请求。我的 Java 过滤器对令牌进行解密，将其拆开，然后弄清楚要做什么。

10 次中有 9 次都可以，但有时无法正确解密令牌。上面的（未加密的）例子被转换成这样的

```
1365549482q??YZ7 
```

一切都出错了。

我对加密、解密和字符编码的细节有点不了解，但不幸的是，我是唯一可以从事此工作的开发人员。任何关于这里可能出现问题的想法都将不胜感激。我不期望有任何大的代码更改，因为它在大多数时间都有效，但显然其中有一个我不理解的时间敏感组件。下面的代码片段

**编辑**

我现在已经花了一段时间调试它，但它变得陌生了。我编写了一个小型 Java 程序，通过 HTTP GET 从 PHP 请求令牌。PHP 脚本返回与在正常工作流程中通过 URL 参数传递给 Java 的相同（URL 编码）值。Java 程序以与下面的代码片段相同的方式对此进行解码和解密，并检查结果。经过数千次迭代（到目前为止，还在不断增加），它按预期工作。但是，在进行此测试时，我可以在过滤器的日志文件中看到相同的故障。

导致此间歇性问题的原因似乎与作为 Tomcat 过滤器的 Java 类或通过 Tomcat 通过 URL 传递的数据有关。这是否给任何人暗示这里可能发生的事情？我现在很困惑。

PHP

```
$presentAsSeconds = time();

$message = strval($presentAsSeconds + Configure::read('Reporting.Authentication.ExpireInSeconds')) . '|' . $userDetails['role'];

return base64_encode(
    mcrypt_encrypt(
        MCRYPT_RIJNDAEL_128,
        md5(Configure::read('Reporting.Authentication.Key')),   // matches "the key" in Java function
        $message,
        MCRYPT_MODE_CFB,
        Configure::read('Reporting.Authentication.IVector')     // matches "the vector" in Java function
    )
); 
```

爪哇

```
private String decrypt(String initial) throws Exception {

    SecretKeySpec skeySpec = new SecretKeySpec(md5("the key").getBytes("UTF-8"), "AES");
    IvParameterSpec initialVector = new IvParameterSpec("the vector".getBytes("UTF-8"));
    Cipher cipher = Cipher.getInstance("AES/CFB8/NoPadding");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec, initialVector);
    byte[] encryptedByteArray = (new org.apache.commons.codec.binary.Base64()).decode(initial.getBytes("UTF-8"));
    byte[] decryptedByteArray = cipher.doFinal(encryptedByteArray);

    return (new String(decryptedByteArray, "UTF8"));
}

private String md5(String input) throws NoSuchAlgorithmException {

    MessageDigest md = MessageDigest.getInstance("MD5");
    byte[] messageDigest = md.digest(input.getBytes("UTF-8"));
    BigInteger number = new BigInteger(1, messageDigest);

    return number.toString(16);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:09:41.707

问题可能出在您的 getBytes() 方法上——这些方法使用默认的系统字符编码，这在每个 JVM 中都不相同。请改用 getBytes("UTF-8")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:53:43.553

我认为问题在于您如何在 PHP 中使用 mcrypt 库，然后对加密数据进行 base64 编码？我们在做类似的事情时肯定遇到了一些问题，并放弃了 base64 编码，然后它就起作用了。

您可以使用另一种方法来传递令牌而不是 url 吗？例如 cookie 或 auth 标头？

这是我在 PHP 中加密/解密的片段（我对 Java 不是很好），因为我认为您的 mcrypt 不正确。

编码：

```
 $userObjectJson = json_encode($this);

    //encrypt the user session object
    $mcrypt = mcrypt_module_open(MCRYPT_3DES, '', MCRYPT_MODE_CFB, '');
    $_SESSION['iv'] = mcrypt_create_iv(mcrypt_enc_get_iv_size($mcrypt), MCRYPT_RAND);
    $keySize = mcrypt_enc_get_key_size($mcrypt);
    $key = substr(MYAWESOME_KEY, 0, $keySize);

    mcrypt_generic_init($mcrypt, $key, $_SESSION['iv']);
    $_SESSION['user'] = mcrypt_generic($mcrypt, $userObjectJson);
    mcrypt_generic_deinit($mcrypt);
    mcrypt_module_close($mcrypt); 
```

解码：

```
 //decrypt the user session object
    $mcrypt = mcrypt_module_open(MCRYPT_3DES, '', MCRYPT_MODE_CFB, '');
    $keySize = mcrypt_enc_get_key_size($mcrypt);
    $key = substr(MYAWESOME_KEY, 0, $keySize);
    mcrypt_generic_init($mcrypt, $key, $_SESSION['iv']);
    $userObjectJson = mdecrypt_generic($mcrypt, $_SESSION['user']);
    mcrypt_generic_deinit($mcrypt);
    mcrypt_module_close($mcrypt); 
```

# javascript - 在 Internet Explorer 7 上运行 AngularJS 应用程序

> ID：15914675
> 
> 赞同：18
> 
> 时间：2013-04-10T00:04:19.467
> 
> 标签：javascript, angularjs, internet-explorer-7

为了确定 AngularJS 是否可以在我需要的浏览器上运行，我制作了一个简单的数据绑定演示，它可以在 Firefox、Chrome 和 IE8+ 上正常运行，但我还需要让它在 IE7 上运行。不幸的是，我无法让它发挥作用。它只显示带有花括号的 html，忽略`ng-`属性。

我在 Internet Explorer 上查看[了几篇](http://gpiot.com/angularjs-on-ie7-not-working-how-to-fix-it/) [关于](https://stackoverflow.com/questions/11984223/angularjs-data-binding-issue-on-internet-explorer-using-curly-braces)[AngularJS的](https://stackoverflow.com/questions/12709745/angular-routing-not-working-in-ie7)[帖子](https://stackoverflow.com/questions/14464742/angularjs-and-internet-explorer) ，并在每一篇上都尝试了建议的修复，但在我的演示中没有任何效果。

这是我的演示的 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Angular IE7 Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<!--[if lt IE 9]>
<script type="text/javascript" src="angularjs/html5shiv.js"></script>
<![endif]-->
<!--[if lt IE 8]>
<script type="text/javascript" src="angularjs/json3.js"></script>
<![endif]-->
<script language="JavaScript" src="angularjs/angular.min.js"></script>
<script language="JavaScript" src="angularjs/test.js"></script>
</head>
<body class="ng-app">
    <div ng-controller="serversCtrl">
        <p>{{texto}}</p>

        <table border="1">
            <tbody>
                <tr><th>Col1</th><th>Col2</th><th>Col3</th></tr>
                <tr ng-repeat="item in items"><td>{{item.col1}}</td><td>{{item.col2}}</td><td>{{item.col3}}</td></tr>
            </tbody>
        </table>
    </div>
</body>
</html> 
```

这是包含控制器和模型的 test.js javascript：

```
function serversCtrl($scope, $http, $location) {
    $scope.texto = "Texto dinamico";
    $scope.items = [
        {col1: "foo1", col2: "bar1", col3: "baz1"},
        {col1: "foo2", col2: "bar2", col3: "baz2"},
        {col1: "foo3", col2: "bar3", col3: "baz3"},
        {col1: "foo4", col2: "bar4", col3: "baz4"},
        {col1: "foo5", col2: "bar5", col3: "baz5"}
    ];
} 
```

难道我做错了什么？是否有任何其他提示可以使它发挥作用，我错过了？

**编辑：**我正在使用 AngularJS v1.0.5

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-10T08:37:49.247

1）添加`id="ng-app"`到您的身体标签。

```
<body ng-app="myApp" id="ng-app"> 
```

  2) 通知您的用户/客户现在是 2013 年。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-10T15:28:22.030

经过更多的阅读，我可以使它工作。

IE7 的问题在于引导。它没有开火！所以我做了一个手动初始化，如[本页](http://docs.angularjs.org/guide/bootstrap)所示，它起作用了。

这是我添加到 HTML 中的代码，确保它只会在 Internet Explorer 8 或更低版本上触发（因为如果我为所有浏览器触发它，一些事件处理程序会为非 ie 浏览器触发两次）：

```
<!--[if lte IE 8]>
<script type="text/javascript">
    $(document).ready(function() {
        angular.bootstrap(document);
    });
</script>
<![endif]--> 
```

该`$document.ready()`部分是 jQuery 方法，以确保在加载正文上的所有内容时执行此代码，但由于我在我的网站上使用 jQuery，所以我利用了它。

# java - 如何通过Java中的命令行获取输入？

> ID：15914676
> 
> 赞同：4
> 
> 时间：2013-04-10T00:04:24.140
> 
> 标签：java

我目前有这段代码需要用户输入来伪化一些单词，以便稍后发送和提交对整数的混淆。我只需要获取用户输入。任何人都有一个很好的api来源来获取这个？我想我应该寻找 System. 命令。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T00:05:31.443

该类`Scanner`是在 Java 5.0 中实现的，以使输入更容易：

`Scanner input = new Scanner(System.in)`这`System.in`将允许控制台输入。

```
Scanner sc = new Scanner(System.in);
int i = sc.nextInt();
/* will wait for input then assign it to the variable,
 * in this case it will wait for an int.
 */
System.out.println(i); // will print the variable 
```

[https://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html](https://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:10:27.867

你在找这个吗？正如您询问有关通过命令行获取输入的问题，因此，如果您通过命令行运行 java 程序并希望向其传递一些输入，它们将由`args`in 中的参数接收`main`。[看这里](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)

**呼应命令行参数**

Echo 示例将其每个命令行参数单独显示在一行中：

```
public class Echo {
    public static void main (String[] args) {
        for (String s: args) {
            System.out.println(s);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T00:27:58.837

您可能想要使用 Scanner 类：java.util.Scanner

基本设置很简单：

```
Scanner scan = new Scanner(System.in);
int number = scan.nextInt(); 
```

这将设置一个扫描器对象并使扫描器从默认输入流中获取一个整数。但是，这不会检查用户是否输入了“好数据”。如果用户输入的不是数字，则会导致错误。您可能希望包含一个循环，直到用户输入有效数据。

这是相同的代码，但带有错误检查：

```
Scanner scan = new Scanner(System.in);
boolean validData = false;
int number=0;
do{
    System.out.println("Enter a Number");
    try{
        number = scan.nextInt();//tries to get data. Goes to catch if invalid data
        validData = true;//if gets data successfully, sets boolean to true
    }catch(InputMismatchException e){
        //executes when this exception occurs
        System.out.println("Input has to be a number. ");
    }
}while(validData==false);//loops until validData is true 
```

该程序将要求用户输入一个数字。如果用户输入了错误数据，则会抛出 InputMismatchException，将程序带到 catch 子句并跳过将 validData 设置为 true。这个循环直到输入有效数据。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T00:13:25.287

是的，`System.in`对于少量可预测输入的命令可以正常工作。如果您想要更专业/更强大的机制，Apache 有一个不错的小工具。

见：[http ://commons.apache.org/proper/commons-cli/](http://commons.apache.org/proper/commons-cli/)

# python - 如何使用 python 库在骨架图像中找到循环？

> ID：15914684
> 
> 赞同：8
> 
> 时间：2013-04-10T00:05:10.407
> 
> 标签：python, opencv, image-processing, mathematical-morphology, scikit-image

我有很多这样的骨架图像：

![在此处输入图像描述](https://i.stack.imgur.com/vdosF.png) ![在此处输入图像描述](https://i.stack.imgur.com/u52Gg.gif)

我怎样才能检测到一个循环，一个骨架中的循环？是否有执行此操作的“特殊”功能，或者我应该将其实现为图形？

如果只有图形选项，python 图形库 NetworkX 可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:37:01.607

您可以利用骨架的拓扑结构。一个循环不会有洞，所以我们可以用它`scipy.ndimage`来找到任何洞并进行比较。这不是最快的方法，但它非常容易编码。

```
import scipy.misc, scipy.ndimage

# Read the image
img = scipy.misc.imread("Skel.png")

# Retain only the skeleton
img[img!=255] = 0
img = img.astype(bool)

# Fill the holes
img2 = scipy.ndimage.binary_fill_holes(img)

# Compare the two, an image without cycles will have no holes
print "Cycles in image: ", ~(img == img2).all()

# As a test break the cycles
img3 = img.copy()
img3[0:200, 0:200] = 0
img4 = scipy.ndimage.binary_fill_holes(img3)

# Compare the two, an image without cycles will have no holes
print "Cycles in image: ", ~(img3 == img4).all() 
```

我以你的“B”图片为例。前两个图像是原始版本和检测周期的填充版本。在第二个版本中，我打破了循环并且没有填充，因此两个图像是相同的。

![在此处输入图像描述](https://i.stack.imgur.com/JVyWM.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T11:01:03.723

首先，让我们用 PIL 构建字母 B 的图像：

```
import Image, ImageDraw, ImageFont
image = Image.new("RGBA", (600,150), (255,255,255))
draw = ImageDraw.Draw(image)
fontsize = 150
font = ImageFont.truetype("/usr/share/fonts/truetype/liberation/LiberationMono-Regular.ttf", fontsize)
txt = 'B'
draw.text((30, 5), txt, (0,0,0), font=font)
img = image.resize((188,45), Image.ANTIALIAS)
print type(img)
plt.imshow(img) 
```

您可能会找到更好的方法来做到这一点，尤其是字体路径。ii 加载图像而不是生成图像会更好。无论如何，我们现在有一些工作要做： ![上B](https://i.stack.imgur.com/DKzgs.png)

现在，真正的部分：

```
import mahotas as mh
img = np.array(img)
im = img[:,0:50,0]
im = im < 128
skel = mh.thin(im)
noholes = mh.morph.close_holes(skel)
plt.subplot(311)
plt.imshow(im)
plt.subplot(312)
plt.imshow(skel)
plt.subplot(313)
cskel = np.logical_not(skel)
choles = np.logical_not(noholes)
holes = np.logical_and(cskel,noholes)
lab, n = mh.label(holes)
print 'B has %s holes'% str(n)
plt.imshow(lab) 
```

![孔标记](https://i.stack.imgur.com/dowzt.png) 我们在控制台（ipython）中有： ***B 有 2 个孔***

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T14:30:59.497

将您的骨架图像转换为图形表示并非易事，而且我不知道有任何工具可以为您做到这一点。

在位图中执行此操作的一种方法是使用[洪水填充](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-floodfill)，例如 Photoshop 中的油漆桶。如果您开始对图像进行泛光填充，如果没有循环，整个背景将被填充。如果填充没有得到整个图像，那么您已经找到了一个循环。稳健地找到所有循环可能需要多次填充。

这可能执行起来很慢，但可能比将骨架追踪到图形数据结构中的技术快得多。

# php - 打印没有附加内容（URL、日期等）的 HTML 页面

> ID：15914685
> 
> 赞同：8
> 
> 时间：2013-04-10T00:05:13.937
> 
> 标签：php, javascript, css, html

我想按原样打印 HTML 页面，而不需要任何其他内容，例如 URL 和日期。

有些人告诉我，你不能使用 CSS/JavaScript 来做到这一点，因为那些额外的东西来自浏览器/打印机。

将打印页面的用户正在使用服务器机器。浏览器将界面和PHP结合使用即可打印。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-19T14:11:18.587

URL、日期和页面标题以及通常打印在页眉和/或页脚中的其他信息由 Web 浏览器控制。不幸的是，您无法通过 CSS 或 HTML 控制这些。由您网站的访问者决定是否要打印这些元素。

用户可以按照以下步骤关闭页眉和页脚。（步骤可能因浏览器版本而异，甚至可能在旧浏览器上不可用。所有步骤均在每个浏览器的最新版本中完成。）

**铬合金**

1.  单击![菜单](https://i.stack.imgur.com/2gfhV.png)浏览器右上角的图标。
2.  单击*打印*。
3.  取消选中**选项**部分下的*页眉和页脚。*

 ****火狐**

1.  单击![火狐](https://i.stack.imgur.com/7sYO0.png)浏览器左上角的 。
2.  将鼠标放在*打印*上，单击*页面设置*。
3.  单击*边距和页眉/页脚*选项卡。
4.  **将页眉和页脚下**的每个值更改为`--blank--`。

**IE浏览器**

1.  单击![齿轮](https://i.stack.imgur.com/R7BZ2.png)浏览器右上角的图标。
2.  将鼠标放在*打印*上，然后单击*页面设置*。
3.  **将页眉和页脚下**的每个值更改为`-Empty-`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-01T02:38:05.773

您可以在页面中包含[页面媒体](http://www.w3.org/TR/1998/REC-CSS2-19980512/page.html) **CSS**规则：

```
<style>
  @page {
    size: auto;
    margin: 0;
  }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T12:22:29.400

在谷歌浏览器中，您可以在打印时关闭附加内容。

在左下角的选项部分，关闭“页眉和页脚”。

[https://storage.googleapis.com/support-kms-prod/SNP_2703025_en_v0](https://storage.googleapis.com/support-kms-prod/SNP_2703025_en_v0)**

# python - Gtk.ProgressBar 在 Python 中不起作用

> ID：15914687
> 
> 赞同：2
> 
> 时间：2013-04-10T00:05:14.673
> 
> 标签：python, progress-bar, gtk3, pygobject

我正在尝试在**Python**和**Gtk3**中使用进度条，但它没有得到更新。我已经阅读[了这个](http://python-gtk-3-tutorial.readthedocs.org/en/latest/progressbar.html)文档和这个论坛中的一些问题（主要是针对 pygtk），但我真的不明白！

我制作了一个仅用于测试目的的代码。当您单击一个按钮时，它会递归地读取目录的内容。我的意图是在阅读所有这些文件时使用进度条。

这是整个代码：

```
import os
from gi.repository import Gtk

class MyWindow(Gtk.Window):
    """Progress Bar"""

    def __init__(self):
        Gtk.Window.__init__(self, title='Progress Bar')
        self.set_default_size(300, 75)
        self.set_position(Gtk.WindowPosition.CENTER)
        self.set_border_width(10)

        # read dir contents
        mydir = 'Documents'
        home_path = os.environ.get('HOME')
        dir_path = os.path.join(home_path, mydir)
        self.dir_files_list(dir_path)

        # create a grid
        self.grid = Gtk.Grid(column_homogeneous=True, row_homogeneous=True,
                             column_spacing=10, row_spacing=10)
        self.add(self.grid)

        # create a progress bar
        self.progressbar = Gtk.ProgressBar()
        self.grid.add(self.progressbar)

        # create a button
        self.button = Gtk.Button(stock=Gtk.STOCK_APPLY)
        self.button.connect('clicked', self.on_button_pressed)
        self.grid.attach(self.button, 0, 1, 1, 1)

    # function to read the dir contents
    def dir_files_list(self, dir_path):
        self.dir_list = []
        for root, dirs, files in os.walk(dir_path):
            for fn in files:
                f = os.path.join(root, fn)
                self.dir_list.append(f)

    # function to update the progressbar
    def on_button_pressed(self, widget):
        self.progressbar.set_fraction(0.0)
        frac = 1.0 / len(self.dir_list)
        for f in self.dir_list:
            new_val = self.progressbar.get_fraction() + frac
            print new_val, f
            self.progressbar.set_fraction(new_val)
        return True

def main():
    """Show the window"""
    win = MyWindow()
    win.connect('delete-event', Gtk.main_quit)
    win.show_all()
    Gtk.main()
    return 0

if __name__ == '__main__':
    main() 
```

感谢经验丰富的程序员提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:17:24.950

问题是您在创建窗口时正在处理整个目录。甚至在您展示它之前（与 一致`self.dir_files_list(dir_path)`）。在我看来，您想在按下应用按钮后调用它。

至少有两种可能的解决方案：使用线程或使用迭代器。对于您的特定用例，我认为迭代器就足够了，除了更简单和更pythonic。我只会在你*真正*需要的时候推荐线程。

您可以一次处理每个目录中的每个文件，而不是事先遍历整个目录并稍后处理它们。

在您的示例中，我将更改方法`dir_files_list`（重命名为`walk`）并`on_button_pressed`为：

```
from gc import collect
from gi.repository import Gtk, GObject 
```

我们现在还需要导入 GObject 以便`idle_add`在没有更高优先级的事件挂起时调用回调。此外，一旦任务完成，我们需要删除回调以不再调用它（我们需要这样做`source_remove`）。

我将您的方法重命名`dir_files_list`为`walk`因为它在语义上似乎更接近迭代器。当我们遍历每个目录和文件时，我们会暂时“返回”（使用`yield`）。请记住，`yield True`这意味着有待处理的项目。`yield False`意味着我们停止迭代。

所以，方法是：

```
def walk(self, dir_path):
    self.dir_list = []
    for root, dirs, files in os.walk(dir_path):
        i = 0.0
        self.set_title(os.path.dirname(root))

        for fn in files:
            i = i + 1.0
            f = os.path.join(root, fn)
            self.dir_list.append(f)

            self.progressbar.set_fraction(i / len(files))

            collect()
            yield True

       yield True

    GObject.source_remove(self.id)
    yield False 
```

现在，我们在`progressbar`这里更新。在这个特定的部分中，我正在更新每个目录中的进度条。也就是说，它会在每个子目录中重新启动，并且进度条会在每个子目录中重新启动。要了解正在访问的目录，请将窗口标题设置为当前目录。这里要理解的重要部分是`yield`. 您可以将其调整为您想做的任何事情。

遍历整个目录后，我们必须返回`yield False`，但在此之前我们删除回调 ( `GObject.source_remove(self.id)`)。

我认为这里`self.dir_list`不再有用了，但你可能有不同的想法。

您可能想知道何时以及如何`walk`调用？按下按钮时可以设置：

```
def on_button_pressed(self, button, *args):
    homedir = os.path.expanduser('~')
    rootdir = os.path.join(homedir, 'Documents')

    self.task = self.walk(rootdir)
    self.id = GObject.idle_add(self.task.next) 
```

`self.task`是一个迭代器，它具有从`next()`检索下一项的方法，`self.task`只要没有未决事件（带有`idle_add`），就会调用该方法。完成后，我们会得到`id`以删除回调。

您必须`self.dir_files_list(dir_path)`从`__init__`方法中删除该行。

还有一件事：我手动调用了垃圾收集器`gc.collect()`（

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:56:03.413

首先，问题是上面的代码运行得太快了，所以你看到进度条更新得太快了，好像没有更新。这样做是因为您没有同时搜索目录并显示结果。当`__init__`您搜索班级时，然后当您单击按钮时，列表将被读取并全速显示在进度条中。我很确定如果目录很大，当你启动脚本时，窗口显示需要几秒钟，进度条最终会在几毫秒内完成。

基本上你遇到的问题是你在同一个线程中做所有事情。Gtk 在它自己的线程中，监听来自 GUI 的事件并更新 GUI。大多数时候，您将使用 Gtk.ProgressBar 来完成需要一些时间才能完成的事情，并且您需要同时执行 GUI 线程和工作线程（正在做某事的线程），并从工作线程到 GUI 线程，以便更新进度条。如果像上面的代码一样，你在同一个线程中运行所有东西，你最终会遇到这种问题，例如当 GUI 冻结时，也就是说，它变得无响应，因为突然 GUI 线程正在做一些与 GUI 无关的工作.

在 PyGTK 中，您拥有`gobject.idle_add(function, parameters)`可以从工作线程与 GUI 线程通信的方法，因此当 GUI 线程空闲时，它将使用这些参数执行该函数，例如，更新 Gtk.ProgressBar。

我解决这个问题的方法在这里实现，请注意PyGTK：[https ://github.com/carlos-jenkins/nested/blob/master/src/lib/nested/core/gallery/loading.py](https://github.com/carlos-jenkins/nested/blob/master/src/lib/nested/core/gallery/loading.py)

基本上，它是整个应用程序共享的“LoadingWindow”。当您想开始加载某些东西或执行一些繁重的工作时，您必须继承 WorkingThread 类（[示例](https://github.com/carlos-jenkins/nested/blob/master/src/lib/nested/core/gallery/gallery.py#L98)）。然后，您只需`show()`使用 WorkingThread 子类实例作为参数调用该方法并完成。在 WorkingThread 子类中，您必须实现`payload()`函数，即完成繁重工作的函数。您可以直接从 WorkingThread 调用`pulse`LoadingWindow 中的方法来更新 ProgressBar，并且不应该关心线程通信，因为该逻辑是在那里实现的。

希望解释有所帮助。

编辑：

我刚刚将以上内容移植到 PyGObject，您可以在此处找到示例：[https ://gist.github.com/carlos-jenkins/5358445](https://gist.github.com/carlos-jenkins/5358445)

# installation - 如何检查是否安装了 Adob e Acrobat Reader

> ID：15914697
> 
> 赞同：1
> 
> 时间：2013-04-10T00:06:14.400
> 
> 标签：installation, inno-setup, acrobat, foxit

我有这段代码提示用户安装 Foxit PDF 阅读器。如何查看电脑是否安装了 Adob​​e Acrobat Reader？

```
[Components]
Name: "foxit"; Description: "Foxit"; Types: "games"; ExtraDiskSpaceRequired: "30000000"; Check: "not AcrobatExists"; 
```

如果没有找到 Adob​​e Acrobat Reader，那么我想开始安装 Foxit Reader。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:25:42.073

试试这个[Acrobat Reader - 检测安装的版本](http://www.vincenzo.net/isxkb/index.php?title=Acrobat_Reader_-_Detect_installed_version)脚本：

```
[Setup]
AppName=Acrobat
AppVerName=Acrobat
DefaultDirName={pf}\Acrobat
DisableStartupPrompt=true
Uninstallable=false
DisableDirPage=true
OutputBaseFilename=Acrobat
CreateAppDir=false

[Code]

function GetAcrobatReaderVersion(): String;
var
  sVersion:  String;
begin
  sVersion := '';
  RegQueryStringValue( HKLM, 'SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\AcroRd32.exe',
     '', sVersion );
  GetVersionNumbersString( sVersion , sVersion );
  Result := sVersion;
end;

function NextButtonClick(CurPage: Integer): Boolean;
begin

  // by default go to next page
  Result := true;

  if CurPage = wpWelcome then
  begin

    if Length( GetAcrobatReaderVersion() ) = 0 then
    begin
      MsgBox( 'There is not installed Acrobat reader',  mbInformation, MB_OK );
      Result := false;
    end
    else
      MsgBox( 'Acrobat reader installed is version ' + GetAcrobatReaderVersion() ,
           mbInformation, MB_OK );

  end;

end; 
```

您可以使用 GetAcrobatReaderVersion() 并进行检查功能，例如：

```
function AcrobatExists(): Boolean;
begin
    result := Length( GetAcrobatReaderVersion() ) <> 0;
end; 
```

# asp.net - ASP.Net FormsAuthentication + SqlMembershipProvider 的自定义 cookie

> ID：15914700
> 
> 赞同：1
> 
> 时间：2013-04-10T00:06:34.010
> 
> 标签：asp.net, .net, cookies, asp.net-membership, forms-authentication

我正在建立一个新的子站点，它使用的技术与我的主应用程序不同。例如：“~/subapp/” ...此站点需要能够读取/写入正在使用的身份验证 cookie。主站点使用 SQL Membership、Roles 和 Profiles

我希望有一些相对简单的东西我可以用 FormsAuthentication 位覆盖，这样我就可以以双方都可以读/写的不同加密格式编写 cookie。

除非有关于使用的身份验证 cookie 的结构/加密的任何文档吗？我知道我必须对 machine.config 和新应用程序进行硬编码，以便它们共享相同的密钥。

**注意：**当您简单地覆盖 global.asax.cs 中的 Application_AuthenticateRequest 时，当有成员资格提供者时，提供者似乎覆盖了您在 global.asax 中指定的内容......

# parsing - 解析 NSString

> ID：15914701
> 
> 赞同：0
> 
> 时间：2013-04-10T00:06:36.400
> 
> 标签：parsing, time, nsstring, nsdate

我目前正在创建一个简单的文本文件，将其读入我的应用程序，将字符串“0700 1300”转换为 NSDate 格式以读入我的本地日历。

我对objective-c很陌生，但我试图将0700读入事件的开始时间，并将1300读入事件的结束时间。我只是无法获得1300。主要是我想存储第一个WORD“0700”和第二个WORD“1300”。

编辑：如果可能，请包含将字符串“0700 1400”转换为字符串的代码，稍后将是

`EKEvent *myEvent;`

这是我用来将数据存储在从网上下载的文本文件中的代码。

```
NSData *data = [[NSData alloc] initWithData:downloadFile.receivedData];
NSString *dataString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
[self.myDataArray addObject:dataString]; 
```

`myDataArray`是我之前在`viewDidLoad`当前视图控制器中启动的可变数组。

这是我正在读入的文本文件的一小段。

```
Sunday
0 1200
Sunday
2100 2400
Monday
0 600 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:18:21.323

我能够解析我的文本文件，但现在将包含开始日期和结束日期的字符串转换为 NSDATE 的问题。

我还没有遍历整个文件，只是特定文件中的一行，一旦我至少可以格式化一行，我将遍历整个文件。

`2013-06-08 00:00:00 +0000 and 2013-06-08 12:00:00 +0000`我目前已经通过追加和插入将0 和 1200 转换为。

这是我使用的代码。

```
NSData *data = [[NSData alloc] initWithData:downloadFile.receivedData];
NSString *dataString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
NSArray *components = [dataString componentsSeparatedByString:@"\n"];
NSString *anotherString = [NSString stringWithFormat:components[1]];
NSArray *times = [anotherString componentsSeparatedByString:@" "];

NSMutableString *startDate = [[NSMutableString alloc] initWithString:times[0]];
NSMutableString *endDate = [[NSMutableString alloc] initWithString:times[1]];

for (int i = startDate.length; i < 4; i++)
    [startDate appendString:@"0"];
[startDate appendString:@":00 +0000"];

for (int i = endDate.length; i < 4; i++)
    [endDate appendString:@"0"];
[endDate appendString:@":00 +0000"];

[startDate insertString:@":" atIndex:2];
[endDate insertString:@":" atIndex:2];

[startDate insertString:@"2013-06-08 " atIndex:0];
[endDate insertString:@"2013-06-08 " atIndex:0]; 
```

我意识到在添加事件时，我不需要知道结束时间只是时间间隔。因此，我计划将开始时间与结束时间进行比较，然后以这种方式找到时间间隔。

I understand the DATE i give my string is of a constant date but that isn't the issue at the moment, I'll fix that later. But for now I would like to convert the NSString *startDate I created and stored the date/time string in to an NSDate *startDate so that I can use it as the start dat of an EKEvent.

Thank you guys.

# meteor - 使用帐户和数据

> ID：15914703
> 
> 赞同：0
> 
> 时间：2013-04-10T00:06:41.007
> 
> 标签：meteor, accounts

在我的聊天室应用程序的下一阶段，我想使用用户帐户。

我想做以下事情。

1.  要求用户创建帐户或登录才能发布消息（注销时，消息区域将替换为引导警报框）
2.  登录后，名称字段将使用用户名

允许用户设置他们的用户名而不是他们的电子邮件地址也很好。

我一直在查看问题和各方教程，但我还没有能够对我的实例中的功能进行逆向工程。有人愿意帮助我吗？

项目文件 - [https://github.com/SmashBrando/chatroom](https://github.com/SmashBrando/chatroom)

项目 - [http://smashchat.meteor.com/](http://smashchat.meteor.com/)

回答：

要在用户登录时显示内容，我添加了：

```
 {{#if currentUser}}
           {{> entry}}
        {{else}}
           <div class="alert alert-error">
            You Must Login To Post a Message!
           </div>
        {{/if}} 
```

要将用户名设置为消息名称（用户希望被称为的配置文件名称），我将以下代码添加到输入区域。

`<input type="text" class="span6" id="name" value="{{currentUser.username}}">`

我将致力于不使用输入框并使用变量的未来迭代（一旦我弄清楚如何做到这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:04:32.490

您可以使用车把助手和 if/else 来显示某些项目

```
{{#if currentUser}}
   <logged in content>
{{else}}
   <not logged in content>
{{/if}} 
```

对于用户的姓名，您必须使用另一个字段作为他们的真实姓名，通常在个人资料中，例如。`user.profile.name`

假设已经设置了用户名，那么您应该能够执行类似的操作

```
{{#if currentUser}}
   {{loginButtons}}
{{else}}
   {{currentUser.profile.name}}
{{/if}} 
```

# perl - 定义全局符号（错误）

> ID：15914704
> 
> 赞同：0
> 
> 时间：2013-04-10T00:06:53.100
> 
> 标签：perl, package, global, explicit

我进行了几次讨论以找到解决方案，但它们似乎都不适用于我的情况。

我有以下一段代码

```
print ("Choose from the following\n");
print ("op1 op2\n");

my $x = <>;  
chomp($x);     
print ("x is $x");

if ($x eq "op1")
{
my $DirA = "./A";
my $DirB = "./B"; # **I want to use this dirA and dir B below (Tried switch stmts but I 
#**get the same error)**
}

opendir my($dh), "$DirA" or die "Couldn't open dir DirA!";
my @files = readdir $dh;
closedir $dh;
system("rm -rf diffs");
system ("mkdir diffs\n");
foreach my $input (@list) {
.
.
.
} 
```

我收到此错误：**全局符号“$DirA”需要 test_switch.tc 中的显式包名称**

有人可以帮助我吗？我的意图是在我的脚本中添加选项/开关。就像我从案例 stmt 开始的“test.pl -A”、“test.pl -B”。请就此提供意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:12:27.080

你的`$DirA`and`$DirB`不是全局的，它们只在`if`声明它们的语句范围内定义`my`。通常，来自[文档](http://perldoc.perl.org/functions/my.html)：“A`my`将列出的变量声明为本地（词法）封闭块、文件或`eval`。” 要在后面的任何代码中使用它们，您必须执行以下操作：

```
my $DirA;
my $DirB;

if ($x eq "op1") {
  $DirA = "./A";
  $DirB = "./B";
} else {
  $DirA = ...
  $DirB = ...
} 
```

请注意`else`：如果不是，您也应该做一些事情，`$x`因为*即使* `"op1"`代码已经运行，您在尝试将未定义的值传递给`opendir`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:13:13.283

只需在块*之前*声明变量，之后`if`就可以访问它们。

```
my $DirA;
my $DirB;

if ($x eq "op1") {
    $DirA = "./A";
    $DirB = "./B";
} 
```

# android - 在Android中动态填充微调器？

> ID：15914705
> 
> 赞同：20
> 
> 时间：2013-04-10T00:06:57.587
> 
> 标签：android, dynamic, insert, spinner

我一直在绞尽脑汁试图让它发挥作用。我想从 1900 年到当前年份动态输入微调器。我不认为使用 XML 定义的数组可以做到这一点，但我可以使用数组适配器来做到这一点吗？这是我到目前为止所拥有的：

```
ArrayList<String> years = new ArrayList<String>();
int thisYear = Calendar.getInstance().get(Calendar.YEAR);

for (int i = 1900; i <= thisYear; i++) 
{
    years.add(i);
}

adapter = new ArrayAdapter<String>(this, 
           android.R.layout.simple_spinner_item, years);

//spinner to enter this list to
spinYear = (Spinner)findViewById(R.id.yearspin); 
```

这是微调器的 XML：

```
<Spinner
        android:id="@+id/yearspin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-10T00:20:11.173

你很亲密。尝试这个：

```
ArrayList<String> years = new ArrayList<String>();
int thisYear = Calendar.getInstance().get(Calendar.YEAR);
for (int i = 1900; i <= thisYear; i++) {
    years.add(Integer.toString(i));
}
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, years);

Spinner spinYear = (Spinner)findViewById(R.id.yearspin);
spinYear.setAdapter(adapter); 
```

你只是忘了添加

```
spinYear.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-18T02:25:04.423

我希望它会帮助你。

```
static final String[] Months = new String[] { "January", "February",
            "March", "April", "May", "June", "July", "August", "September",
            "October", "November", "December" }; 
```

* * *

```
 // Set years
        ArrayList<String> years = new ArrayList<String>();
        int thisYear = Calendar.getInstance().get(Calendar.YEAR);
        for (int i = 1900; i <= thisYear; i++) {
            years.add(Integer.toString(i));
        }
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, years);

        Spinner spinYear = (Spinner)findViewById(R.id.spinnerYears);
        spinYear.setAdapter(adapter);
        // Set months
        ArrayAdapter<String> adapterMonths = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, Months);
        adapterMonths.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        Spinner spinMonths = (Spinner)findViewById(R.id.spinnerMonths);
        spinMonths.setAdapter(adapterMonths);
        // Set days
        ArrayList<String> days = new ArrayList<String>();
        for (int i = 1; i <= 31; i++) {
            days.add(Integer.toString(i));
        }
        ArrayAdapter<String> adapterDays = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, days);

        Spinner spinDays = (Spinner)findViewById(R.id.spinnerDays);
        spinDays.setAdapter(adapterDays); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-27T14:53:20.760

我建议一个简单的：

```
ArrayList<String> yearsList = new ArrayList<>();
int current_year = Calendar.getInstance().get(Calendar.YEAR);
int count = 60;
for (int i = 0; i < count; i++) {
    yearsList.add(Integer.toString(current_year - i));
}

ArrayAdapter<String> yearsAdapter = new ArrayAdapter<>(getContext(), R.layout.dropdown_item, yearsList);
spinYear.setAdapter(yearsAdapter); 
```

只需将 int count 的值更改为要在当前年份之前打印多少年。

# xpath - 选择节点，其中包含具有特定属性的后代

> ID：15914711
> 
> 赞同：5
> 
> 时间：2013-04-10T00:07:25.153
> 
> 标签：xpath

我有类似的结构：

```
<tr>
    <td>I WANT THIS</td>
    <td>
        <a class="unread">text</a>
    </td>
    <td></td>
</tr>
<tr>
    <td></td>
    <td>
        <a class="read">text</a>
    </td>
    <td></td>
</tr> 
```

我需要选择具有属性节点的节点`<tr>`，以便稍后选择内部。`<a>``[@class='unread']``<td>`

我试过`//tr[a/@class='unread']`但`//tr/a[@class='textMsg unread']`没有奏效。我怎样才能得到我的`<tr>`节点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T00:26:58.903

`a`tag 不是 tag 的子`tr`节点，你可以试试这个 xpath：

```
//tr[.//a/@class='unread'] 
```

或者

```
//tr[descendant::a/@class='unread'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:06:44.210

**要选择想要的`td`元素，请使用**：

```
//tr//td[.//a[@class = 'unread']] 
```

**如果已知`td`是 的子代`tr`并且`a`是 的子代`td`，则上述可简化为**：

```
//tr/td[a[@class = 'unread']] 
```

# javascript - -webkit-transform：使用 += 运算符的增量重新定位不起作用

> ID：15914712
> 
> 赞同：-2
> 
> 时间：2013-04-10T00:07:25.483
> 
> 标签：javascript, css

我正在尝试通过将`-webkit-transform`属性设置为来逐步重新定位元素`+=200px`

但它不起作用。我错过了一些东西，但不知道是什么。

*   **[http://jsfiddle.net/yVSDC/](http://jsfiddle.net/yVSDC/)**

单击 div 应该每次将其进一步向下移动 200 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:09:47.267

CSS 不能那样工作，而 jQuery 不会把数据拉出来，所以你可以那样做。

您需要读取该值，添加`200`然后重置它。

```
var getTranslatedY = function (element) {
    var transform = element.css("transform") || element.css("-webkit-transform") || element.css("-moz-transform");

    if (transform == "none") {
        return 0;
    }

    return parseInt((transform.match(/^matrix\(.*?(-?[\d.]+)\)$/) || [])[1]) || 0;
};

$('#m').on(
    'click',
    function () {
    var element = $(this);
         element
         .css('-webkit-transform',
              "translateY(" + (getTranslatedY(element) + 200) + "px)");
    }); 
```

[js小提琴](http://jsfiddle.net/gTKvq/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:52:18.097

```
var step = 200;
$('body').on('click', "#m", function(){
    $(this).css('-webkit-transform','translateY('+ step +'px)');
    step = step+200;
}); 
```

相反`-webkit-transform:translateY(100px);`，您可以在 CSS 中设置`margin-top: 100px;`

[http://jsfiddle.net/yVSDC/28/](http://jsfiddle.net/yVSDC/28/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:13:54.233

您必须获取当前`webkit-transform`值并增加它。替代解决方案是使用`top`CSS 属性

你可以试试这个（它是免费的）：[http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

示例代码：

```
$('.box').transition({ x: '200px' });
$('.box').transition({ y: '200px' });
$('.box').transition({ x: '200px', y: '200px' }); 
```

# ruby - 在 os x 上安装 pg 0.15.1 时出错

> ID：15914724
> 
> 赞同：2
> 
> 时间：2013-04-10T00:08:55.867
> 
> 标签：ruby, rubygems, gem, osx-lion, pg

这就是我尝试在 OS X Lion 上安装最新版本的 Postgres gem 时发生的情况。

```
$ gem install pg
Upgraded http://rubygems.org/ to HTTPS
Fetching: pg-0.15.1.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

    /.rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /Applications/Postgres.app/Contents/MacOS/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQescapeLiteral()... yes
checking for PQescapeIdentifier()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for pg_char_to_encoding()... yes
checking for PQsetClientEncoding()... yes
checking for PQlibVersion()... yes
checking for PQping()... yes
checking for PQsetSingleRowMode()... yes
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... yes
checking for rb_thread_call_without_gvl()... yes
checking for rb_thread_call_with_gvl()... yes
checking for rb_thread_fd_select()... yes
checking for rb_w32_wrap_io_handle()... no
checking for PGRES_COPY_BOTH in libpq-fe.h... no
checking for PGRES_SINGLE_TUPLE in libpq-fe.h... no
checking for struct pgNotify.extra in libpq-fe.h... yes
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling gvl_wrappers.c
compiling pg.c
pg.c: In function ‘pg_s_library_version’:
pg.c:273: warning: implicit declaration of function ‘PQlibVersion’
pg.c: In function ‘Init_pg_ext’:
pg.c:384: error: ‘PQPING_OK’ undeclared (first use in this function)
pg.c:384: error: (Each undeclared identifier is reported only once
pg.c:384: error: for each function it appears in.)
pg.c:386: error: ‘PQPING_REJECT’ undeclared (first use in this function)
pg.c:388: error: ‘PQPING_NO_RESPONSE’ undeclared (first use in this function)
pg.c:390: error: ‘PQPING_NO_ATTEMPT’ undeclared (first use in this function)
make: *** [pg.o] Error 1

Gem files will remain installed in /.rvm/gems/ruby-2.0.0-p0@myapp/gems/pg-0.15.1 for inspection.
Results logged to /.rvm/gems/ruby-2.0.0-p0@myapp/gems/pg-0.15.1/ext/gem_make.out 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T20:03:43.630

尝试通过执行来安装 PG

`brew install postgresql`

然后尝试重新运行捆绑包，看看是否有效

# cmake - cmake 外部项目：允许下载或用户指定的路径

> ID：15914727
> 
> 赞同：0
> 
> 时间：2013-04-10T00:09:12.913
> 
> 标签：cmake

考虑一个依赖于外部项目的项目。在配置我的项目时，我想为用户提供以下两种选择之一：

*   允许 cmake 的 ExternalProject 工具自动下载、配置、构建和安装这个外部项目
*   如果外部项目已经在本地构建，则允许用户手动指定 headers/libs 的路径

这个想法是，如果用户不关心并且只是运行

```
cmake . 
```

然后 cmake 将自动执行外部项目的下载和安装。但是，开发人员通常已经在他的机器上本地构建了外部项目（并且没有安装）。为了节省内存或便于定制，我还希望用户能够手动指定（例如通过 ccmake）该项目的头文件和库路径，这将节省 cmake 下载和编译的工作.

有没有一种巧妙的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:05:34.953

我不确定一个简洁的方法，但它是可能的。我想粗略的流程是这样的：

```
add_executable(Foo ...)

find_path(OtherProjectIncludes NAMES ...)
find_library(OtherProjectLib NAMES ...)

if(OtherProjectIncludes AND OtherProjectLib)
  include_directories(${OtherProjectIncludes})
  target_link_libraries(Foo ${OtherProjectLib})
else()
  include(ExternalProject)
  ...
endif() 
```

如果有可用于其他项目的 FindModule，您可能会使用and`find_package`来代替。`find_path``find_library`

无论如何，您需要决定如何处理用户通过路径以查找另一个项目的现有（构建）副本但`find_xxx`调用失败的情况。您可以继续调用该`ExternalProject`模块，或者您可以提供有用的`FATAL_ERROR`消息并允许用户重试。

# r - 给定带有类标签的训练和测试数据，如何在 R 中执行最小二乘回归？

> ID：15914730
> 
> 赞同：1
> 
> 时间：2013-04-10T00:09:17.697
> 
> 标签：r, data-mining, linear-regression, least-squares

我有一个 63*62 的训练集，并且类标签也存在。测试数据是 25*62 尺寸，也有类标签。鉴于此，我将如何执行最小二乘回归？我正在使用代码：

`res = lm(height~age)`

身高和年龄对应什么？当我有 61 个特征 + 1 个类（训练数据为 62 列）时，我将如何输入参数？

另外我如何将模型应用于测试数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:30:28.627

如果您有 62 列，则可能需要使用更通用的公式

```
res = lm(height ~ . , data = mydata) 
```

注意句号'.' 代表其余的变量。但是前面的答案是完全正确的，因为变量多于观察结果，因此答案（如果有任何不应该的答案）是完全没用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:19:14.667

`height`并且`age`只是数据框中列的标签。`height`是预测变量。您可以在其中拥有任意数量的变量：`res = lm(height~age+wight+gender)`

但是，我必须说这个问题对我来说似乎有点奇怪，因为如果你正在执行一个回归，其中 62 个变量在训练集中有 62 个点，这仅仅意味着你总是有一个精确的解决方案。训练集应始终（显着）大于使用的变量数量。

# ruby-on-rails - 通过多对多关系的属性访问的最佳方法是什么？

> ID：15914732
> 
> 赞同：0
> 
> 时间：2013-04-10T00:09:19.627
> 
> 标签：ruby-on-rails, many-to-many, has-many-through

我有以下几点，每个玩家有很多游戏，每个游戏都有很多玩家，玩家可以选择去或不去游戏。

```
Game
 has_many :shows
 has_many :players, :through => :shows

Player
 has_many :shows
 has_many :games, :through => :shows

Show Migration
  t.references :game
  t.references :player
  t.boolean :going, :default => false 
```

如果玩家决定参加比赛，我想要做的就是设置为真，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:16:49.497

假设您知道玩家的 id ( `player_id`) 和特定游戏的 id ( `game_id`)，您可以执行以下操作：

```
Show.where('player_id = ? and game_id = ?', player_id, game_id).first.update_attributes(:going => true) 
```

这更冗长，但也可能：

```
player = Player.find(player_id)
show = player.shows.find_by_game_id(game_id)
show.update_attributes(:going => true) 
```

如果你想迭代游戏，你可以这样做：

```
player = Player.find(id_of_player)

player.shows.each do |show|
  if show.game == ... # condition that decides whether player's going or not
    show.update_attributes(:going => true) 
  end
end 
```

# user-interface - 在 Linux 中访问 emacs gui 顶部菜单的键盘快捷键

> ID：15914733
> 
> 赞同：3
> 
> 时间：2013-04-10T00:09:35.010
> 
> 标签：user-interface, emacs, keyboard-shortcuts

访问文件/编辑/选项/缓冲区/工具/帮助菜单栏项目的键是什么？有无数的 emacs 键组合，只有鼠标才能达到这些组合。:?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:09:29.437

不完全一样，因为你说“gui”，但你也可以`M-``用来通过迷你缓冲区中的菜单选择对话框。在终端中运行 emacs 时，此键击也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:35:53.000

如果您使用的是 GUI 版本，您应该可以使用`F10`来访问菜单，并使用光标键进行导航。您可以使用函数将键绑定到它`menu-bar-open`。

# hadoop - 用于并行非 MapReduce 算法的 Hadoop 集群

> ID：15914734
> 
> 赞同：0
> 
> 时间：2013-04-10T00:09:41.393
> 
> 标签：hadoop, parallel-processing, cluster-computing

Apache Hadoop 的灵感来自 Google MapReduce 论文。MapReduce 的流程可以看作是两组 SIMD（单指令多数据），一组用于 Mappers，另一组用于 Reducers。Reducers 通过预定义的“key”消耗 Mappers 的输出。MapReduce框架（和Hadoop）的本质是自动对数据进行分区，确定分区数量和并行作业，管理分布式资源。

我有一个并行运行的通用算法（不一定是 MapReducable）。我没有以 MapReduce 方式实现算法本身。相反，该算法只是一个单机 python/java 程序。我想并行运行这个程序的 64 个副本（假设程序中没有并发问题）。即我对Hadoop集群中的计算资源比对MapReduce框架更感兴趣。无论如何我可以以这种旧方式使用 Hadoop 集群吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:35:43.767

MapReduce 的其他思考方式是，MR 进行转换，Reduce 进行某种聚合。

Hadoop 还允许仅映射作业。这样，应该可以并行运行 64 个 Map 程序副本。

Hadoop 有槽的概念。默认情况下，每个节点/机器将有 2 个 map 和 2 个 reduce 插槽。因此，对于 64 个并行进程，需要 32 个节点。如果节点是高端配置，那么每个节点的 M/R 插槽数也可以增加。

# php - 模板目录中文件的短链接

> ID：15914739
> 
> 赞同：0
> 
> 时间：2013-04-10T00:10:09.137
> 
> 标签：php, wordpress, .htaccess

我想在我的模板中创建一个自定义登录页面。它需要是一个独立的主题，所以插件或页面模板不是一个选项。

是否可以制作一个名为例如的文件。`login.php`并永久链接到`www.host.com/login/`？也许有人有其他想法？

最后它将在一个覆盖框中，但如果用户禁用 JS，则需要该页面。

我正在尝试这个，但它对我不起作用：

```
add_filter('generate_rewrite_rules', 'login_rewrites');
    function login_rewrites($wp_rewrite) {
        $newrules = array();
        $newrules['log-in/?$'] = '/wp-content/themes/candyfloss/login.php';
        $wp_rewrite->rules = $newrules + $wp_rewrite->rules;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:43:59.730

尝试一下，您希望使用 javascript 执行某种弹出页面，并在单击链接时回退到另一个页面。

在没有看到您的代码的情况下，简短的回答是肯定的，这是可能的，并且会这样做。

```
<script>
    function loginOverlay() {
        // ... Whatever ajavscript or jquery you want to use to pop up the javascript
        //     The link will not launch due to the 'return false' on the onClick param in the markup
        //     If javascript is turned off, it won't matter, so the browser will navigate to login.php
    }
</script>
<a href="login.php" onClick="loginOverlay(); return false;">Login</a> 
```

# dictionary - Python Pandas 系列在传递具有大索引值的 dict 时提供 NaN 数据

> ID：15914742
> 
> 赞同：1
> 
> 时间：2013-04-10T00:10:21.510
> 
> 标签：dictionary, python-2.7, pandas, series

我正在尝试通过将包含索引和数据对的字典传递给 Pandas 系列来构建它。这样做时，我注意到一个有趣的怪癖。如果数据对的索引是一个非常大的整数，则数据将显示为 NaN。这可以通过减小索引值的大小或使用两个列表而不是单个 dict 创建系列来解决。我有很大的索引值，因为我使用的是自 1970 年以来微秒格式的时间戳。我做错了什么还是这是一个错误？

这是一个例子：

```
import pandas as pd

test_series_time = [1357230060000000, 1357230180000000, 1357230300000000]
test_series_value = [1, 2, 3]
series = pd.Series(test_series_value, test_series_time, name="this works")

test_series_dict = {1357230060000000: 1, 1357230180000000: 2, 1357230300000000: 3}
series2 = pd.Series(test_series_dict, name="this doesn't")

test_series_dict_smaller_index = {1357230060: 1, 1357230180: 2, 1357230300: 3}
series3 = pd.Series(test_series_dict_smaller_index, name="this does")

print series
print series2
print series3 
```

和输出：

```
1357230060000000    1
1357230180000000    2
1357230300000000    3
Name: this works

1357230060000000   NaN
1357230180000000   NaN
1357230300000000   NaN
Name: this doesn't

1357230060    1
1357230180    2
1357230300    3
Name: this does 
```

那么这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:16:20.403

我打赌你是 32 位的；在 64 位上，这工作正常。在 0.10.1 中，通过 dicts 创建的默认设置是使用默认的 numpy 整数创建，这取决于系统（例如 int32 在 32 位上，int64 在 64 位上）。您正在溢出 dtype，这会导致不可预测的行为。

在 0.11（本周发布！）中，这将起作用，因为无论系统如何，它都会默认创建 int64。

```
In [12]: np.iinfo(np.int32).max
Out[12]: 2147483647

In [13]: np.iinfo(np.int64).max
Out[13]: 9223372036854775807 
```

将您的微秒转换为时间戳（乘以 1000 以输入纳秒，这是 Timestamp 接受的整数输入，那么您就可以开始了

```
In [5]: pd.Series(test_series_value, 
        [ pd.Timestamp(k*1000) for k in test_series_time ])
Out[5]: 
2013-01-03 16:21:00    1
2013-01-03 16:23:00    2
2013-01-03 16:25:00    3 
```

# sqlite - sqlite 复制表中的值

> ID：15914743
> 
> 赞同：1
> 
> 时间：2013-04-10T00:10:23.170
> 
> 标签：sqlite

我对 sqlite 完全陌生，所以请耐心等待。我正在更新一个数据库，需要在同一个名为“custom”的表中复制值。我使用 pragma 来获取表格信息，它是：

> 0|票|整数|0||0
> 
> 1|名称|文本|0||0
> 
> 2|值|0||0

使用`select * from custom where ticket = (some value)`我得到的结果，除其他结果外，

> （一些值）|块|
> 
> （某个值）|必填|（另一个值）

我想复制（另一个值）以“阻止”该值存在于“必需”中的任何位置。我该如何做到这一点？到目前为止，我所尝试的一切都失败了。

我的伪代码版本将类似于

```
update custom

where required has a value

copy it to block 
```

如何将其转换为实际的 sqlite 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:10:01.310

```
UPDATE custom
SET value = (SELECT value
             FROM custom AS c2
             WHERE c2.ticket = custom.ticket
               AND c2.name = 'required')
WHERE name = 'block'
  AND value IS NULL 
```

# javascript - Javascript document.cookie 总是返回空字符串

> ID：15914744
> 
> 赞同：57
> 
> 时间：2013-04-10T00:10:23.850
> 
> 标签：javascript, cookies

我在客户端 javascript 设置 cookie 方面遇到了这个真正奇怪的问题。我目前正在开发一个小 1 页演示，以使用 cookie 来存储一些“首选项”。请注意，我不能为此演示或任何 3rd 方 jQuery 插件使用服务器端语言。

所以我写了一个javascript对象来设置一个cookie：

```
var cookie = {
  set: function (name,value,exdays) {

    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var value = escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=name + "=" + value;
    console.log(document.cookie);
  }
}

cookie.set('foo','bar',2);
console.log(document.cookie); 
```

它只返回一个空字符串。我已经进入 Chrome 控制台，看看我是否可以通过直接修改来做到这一点`document.cookie`

```
> document.cookie = "foo=bar";
"foo=bar"
> document.cookie
"" 
```

如何通过客户端 javascript 设置 cookie？

**编辑：我没有处于隐身模式并且启用了 cookie。**

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-08-15T11:40:44.203

无法从 Javascript 访问 HttpOnly cookie，会话 cookie 通常设置为 HttpOnly cookie。另请参阅此 StackOverflow 问题： [如何使用 JavaScript 读取安全 cookie](https://stackoverflow.com/questions/8064318/how-to-read-a-secure-cookie-using-javascript)

所以...检查您要读取的cookie是否设置了'HttpOnly'标志...如果是这样，您就知道罪魁祸首了。这不是一个错误，这是一个功能！

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-04-10T01:26:33.563

如果 cookie 不在 Web 服务器中运行，则无法通过外观设置 cookie。

`file:///C:/Users/me/Desktop/demo/demo.html`

然而：

`http://localhost/demo/demo.html`作品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T11:10:48.357

当从本地主机运行 chrome 28.0.1472.0 canary 时，这对我有用：

```
<!DOCTYPE html>
<html>
<head>
  <title>localhost cookie</title>
</head>
<body>
  <script type="text/javascript">
    console.log(document.cookie);
    var myCookie = "mycookie=hellocookie";
    document.cookie = myCookie;
  </script>
</body>
</html> 
```

在服务器中运行它，访问页面并查看您的 cookie 存储，刷新页面并查看您的控制台。

它在作为文件打开时没有设置 cookie，但每次从服务器打开时都有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T00:15:43.300

有关用法和文档，请参见此处：

[https://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

如果您处于[隐身模式](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95464)或禁用了 cookie，它将无法工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-23T11:35:12.123

您可能为 cookie 设置了错误的路径。

就我而言，我将`path`cookie 中的设置为，`/foo`因为应用程序通常位于 address `http://example.org/foo`。但是，在测试期间，我在默认地址上打开了应用程序，`http://localhost:3000`这使我可以使用路径创建 cookie，`/foo`但不能读取它们。解决方案是在 address 上测试应用程序`http://localhost:3000/foo`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-09-08T23:00:36.463

1.  如果您直接打开文件，cookie 将不起作用，比如说 index.html

    file:///C:/Users/me/Desktop/index.html

2.  但是：如果使用轻量级服务器或本地服务器打开页面 (index.html)，cookie 将起作用

    http://localhost/demo/demo.html 有效。或 [http://127.0.0.1:5500/temp6.html](http://127.0.0.1:5500/temp6.html)

3.  对于 VS Code 中的实时服务器，您可以使用 Ritwick Dey 的 Live Serve [![在此处输入图像描述](https://i.stack.imgur.com/tT7gC.png)](https://i.stack.imgur.com/tT7gC.png)

# javascript - DevTools 控制台 - 将其关闭

> ID：15914746
> 
> 赞同：4
> 
> 时间：2013-04-10T00:10:29.507
> 
> 标签：javascript, logging, google-chrome-devtools

我目前正在用 Javascript 构建一个库，并且非常喜欢 Google 的 DevTools 来调试它。不幸的是，我不希望我的库在我发布时记录。

这就是我的记录器当前的设置方式。

```
var debug = false;

var increaseSomething = function()
{
    // Random Code...

    if (debug) { console.log("Increased!"); }
} 
```

不幸的是，这很烦人，我不应该在每次调用登录到控制台之前检查调试是否打开。

我可以尝试将控制台封装在我自己的日志对象中，但我觉得这不是一个好主意。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T00:12:34.473

你能做到这一点吗？

```
if (!debug) {
  console.log = function() {/* No-op */}
} 
```

正如您所提到的，您可能不想为所有人杀死所有日志记录。这就是我通常的做法。在一些实用程序文件中将它们定义为全局函数。`LOG`我通常为、和添加额外的函数`WARN`，并根据详细程度记录这些函数。`ERROR``TRACE`

```
// Define some verbosity levels, and the current setting.
_verbosityLevels = ["TRACE", "LOG", "WARN", "ERROR"];
_verbosityCurrent = _verbosityLevels.indexOf("LOG");

// Helper function.
var checkVerbosity = function(level) { 
  return _verbosityLevels.indexOf(level) <= _verbosityCurrent; 
}

// Internal log function.
var _log = function(msg, level) {
  if(!debug && checkVerbosity(level)) console.log(msg);
}

// Default no-op logging functions.
LOG = function() {/* no-op */}
WARN = function() {/* no-op */}

// Override if console exists.
if (console && console.log) {
  LOG = function(msg) { 
    _log(msg, "LOG");
  }
  WARN = function(msg) {
    _log(msg, "WARN");
  }
} 
```

这还允许您将重要信息添加到日志中，例如时间和呼叫者位置。

```
console.log(time + ", " + arguments.callee.caller.name + "(), " + msg); 
```

这可能会输出如下内容：

```
"10:24:10.123, Foo(), An error occurred in the function Foo()" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:52:31.013

我考虑过再次封装控制台记录器，而不是想出一个完整的对象来封装控制台，而是创建了一个接受控制台方法的函数。然后它检查调试是否打开并调用该函数。

```
var debug = true;

var log = function (logFunction) {
    if (debug) {
        logFunction.apply(console, Array.prototype.slice.call(arguments, 1));
    }
};

var check = function (canvas) {
    log(console.groupCollapsed, "Initializing WebGL for Canvas: %O", canvas);
    log(console.log, "cool");

    log(console.groupEnd);
};

check(document.getElementById('thing')); 
```

我确实喜欢@Aesthete 的想法，但我还不想制作封装的控制台。这里是以 jsfiddle 为例：http: [//jsfiddle.net/WRe29/](http://jsfiddle.net/WRe29/)

`debugCall`在这里，我向 Objects 原型添加了一个。与日志函数相同，只是名称不同，因此它们没有“重叠” 现在任何对象都可以调用`debugCall`并检查其`debug`标志。

```
Object.prototype.debugCall = function(logFunction)
{
    if (this.debug) { logFunction.apply(console, Array.prototype.slice.call(arguments, 1)); } 
};

var Thing = { debug : true /*, other properties*/ };
Thing.debugCall(console.log, "hello world"); 
```

**编辑：**

我最初的想法是使用一个对象作为“配置”来指示该对象是否应该记录。我已经使用了一段时间并且喜欢配置概念，但没想到每个人都会如此热衷于在他们的代码中使用配置对象以及传递给对象扩展函数的函数。因此，我采用了这个概念，转而关注功能装饰。

```
Function.prototype.if = function (exp) {
    var exFn = this; 
    return function () {
        if (exp) exFn.apply(this, arguments); 
    };
};

var debug = false;

console.log = console.log.if(debug);
console.group = console.group.if(debug);
// Console functions...
myFunction = myFunction.if(debug); 
```

甚至有一个检查表达式的装饰函数非常简单，几乎没有必要，但我不愿意在我的代码中到处放置 if 语句。希望这可以帮助某人，甚至可能激发他们对功能装饰的兴趣。

**注意**：除非您正确设置了 if 扩展，否则这种方式也会终止所有人的日志记录；）*咳嗽某种类型的对象/库配置，指示调试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T19:28:33.240

[https://github.com/pimterry/loglevel](https://github.com/pimterry/loglevel)

日志级别库::试试这是否适合你的需要。

# hadoop - 为什么猪分布包括斑马？猪依赖斑马吗？

> ID：15914747
> 
> 赞同：0
> 
> 时间：2013-04-10T00:10:42.007
> 
> 标签：hadoop, apache-pig, hdfs, bigdata

每当你下载 Pig（例如从这里[http://www.eng.lsu.edu/mirrors/apache/pig/](http://www.eng.lsu.edu/mirrors/apache/pig/)）它总是包含 Zebra 和 Hadoop。

**为什么 Pig 依赖 Zebra？（可以？）**

**斑马和猪有什么关系？**

我正在使用 pig 0.7 但需要升级到 0.9.2+ 是否可以将旧版本的 Zebra 与新版本的 Pig 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:19:30.287

[http://wiki.apache.org/pig/zebra](http://wiki.apache.org/pig/zebra)

我相信这是一个非常有用的工具，但不是必需的。Zebra 主要在 hadoop 之上使用一个非常方便的存储系统，而 pig 可以利用 zebra，但我认为它不必使用它。

# java - 日期“2013 年 1 月 2 日星期三 5:29:26 PM +02:00”的 Java 日期格式字符串

> ID：15914753
> 
> 赞同：0
> 
> 时间：2013-04-10T00:11:19.553
> 
> 标签：java, simpledateformat

我正在将一些数据导入某个系统，它要求我为 CSV 文档中的日期提供一个 java 日期格式字符串。我不是 Java 程序员，我很难测试它。它要求使用对[SimpleDateFormat](http://docs.oracle.com/javase/1.3/docs/api/java/text/SimpleDateFormat.html)有效的语法。

我有这样的日期`Wednesday, January 2, 2013 5:29:26 PM +02:00`，这是我根据文档附带的格式字符串，但是，它失败了：

```
EEEE, MMM d, y hh:mm:ss a Z 
```

我认为时区格式字符串是错误的，但我不知道正确的解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:13:51.197

问题是 +02:00，Java 期待 +0200。如果您可以更正此问题，它将正确解析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:13:03.033

Consider Joda Time library, which has built in support for parsing and outputting ISO-format date strings.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:16:51.007

要调试日期解析错误，请打印出日期格式。

例如：

```
System.out.println(new SimpleDateFormat("EEEE, MMM d, y hh:mm:ss a Z").format(new Date())); 
```

然后调整直到你看到正确的格式。

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T21:40:50.407

希望您的问题的答案：

```
C:\Users\Cebence\jdev\StackOverflow> java StackOverflow15914753
input = Wednesday, January 2, 2013 5:29:26 PM +02:00

Parsing input into date ............   [ OK ]

    date @ local = Wed Jan 02 16:29:26 CET 2013
ISO date @ local = 2013-01-02T16:29:26.000+01:00
        UTC date = 2013-01-02T15:29:26.000Z 
```

此输出由以下演示应用程序创建。请注意**正确的时区、语言环境和“X”而不是“Z”**进行解析的重要性。“X”处理“+02:00”，仅适用于 Java 7。

```
 // Important to be US!
    SimpleDateFormat format = new SimpleDateFormat(CUSTOM_FORMAT_WITH_TZ, Locale.US);
    // Important to be +2 hours offset!

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;
import java.util.TimeZone;

/**
 * http://stackoverflow.com/questions/15914753/java-date-format-string-for-date-wednesday-january-2-2013-52926-pm-0200
 * input: "Wednesday, January 2, 2013 5:29:26 PM +02:00"
 * asking-for: working timestamp format string "EEEE, MMM d, y hh:mm:ss a Z"
 *
 * @author dejan.cebetarevic
 */
public class StackOverflow15914753 {
  private static final String ISO_FORMAT_WITH_TZ = "yyyy-MM-dd'T'HH:mm:ss.SSSXXX";
  private static final String ISO_FORMAT_NO_TZ = "yyyy-MM-dd'T'HH:mm:ss.SSS";
  private static final String CUSTOM_FORMAT_WITH_TZ = "EEEE, MMMM d, y hh:mm:ss a XXX";
  private static final String DEFAULT_INPUT = "Wednesday, January 2, 2013 5:29:26 PM +02:00";

  public static void main(String[] args) throws Exception {
    // Assume default input.
    String input = DEFAULT_INPUT;

    // But if an input was given, use it.
    if (args.length == 1) {
      input = args[0];
    }
    System.out.println("input = " + input);

    System.out.print("\nParsing input into date ............");
    Date d = createCustomDateFormat().parse(input);
    System.out.println("   [ OK ]\n");

    System.out.println("    date @ local = " + d);
    System.out.println("ISO date @ local = " + isoFormat(d));
    System.out.println("        UTC date = " + utcFormat(d));
  }

  public static String utcFormat(Date date) throws Exception {
    SimpleDateFormat utc = new SimpleDateFormat(ISO_FORMAT_WITH_TZ, Locale.UK);
    utc.setCalendar(Calendar.getInstance(TimeZone.getTimeZone("UTC")));
    return utc.format(date);
  }

  public static String isoFormat(Date date) throws Exception {
    SimpleDateFormat iso = new SimpleDateFormat(ISO_FORMAT_WITH_TZ);
    return iso.format(date);
  }

  public static SimpleDateFormat createCustomDateFormat() throws Exception {
    // Important to be US!
    SimpleDateFormat format = new SimpleDateFormat(CUSTOM_FORMAT_WITH_TZ, Locale.US);
    // Important to be +2 hours offset!
    format.setCalendar(Calendar.getInstance(TimeZone.getTimeZone("GMT+2")));
    return format;
  }
} 
```

# vba - 用户输入应该是替换文本

> ID：15914756
> 
> 赞同：0
> 
> 时间：2013-04-10T00:11:32.980
> 
> 标签：vba, input, replace, ms-word

我正在研究一个宏，它有3个问题。可能更多取决于您的程序员经验。我正在尝试让我的代码立即执行此操作。

在代码的底部，我试图使输入框工作，以便用户的输入将成为“Assigned BK Specialist:”的替换文本

```
With ActiveDocument.Content.Find
    .Text = "Assigned BK Specialist:"
    .Replacement.Text = InputBox("Type in BK specialist's name.", "Mark Scott")
End With

Sub Combined_Code()
'Condense Version
Dim iRet As Integer
Dim strPrompt As String
Dim strTitle As String
Dim BkSpecName As String

For i = 1 To 2
With Selection.Find
    .Text = "date received"
    .Replacement.Text = ""
    .Forward = True
    .Wrap = wdFindAsk
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
End With
Selection.Find.Execute
Selection.Paste
Selection.MoveDown Unit:=wdLine, Count:=10
Next i
Selection.GoTo What:=wdGoToPage, Which:=wdGoToNext, Name:="3"
Selection.Find.Replacement.ClearFormatting
'   Insert your name for the file.
With Selection.Find
    .Text = "By:"
End With
Selection.Find.Execute
Selection.TypeText Text:="By: Robert Birch"
With Selection.Find
    .Text = "Date Assigned:"
End With
'   Insert current date on 3rd page.
Selection.Find.Execute
Selection.TypeText Text:="Date Assigned: "
Selection.InsertDateTime DateTimeFormat:="M/d/yyyy", InsertAsField:=False, _
    DateLanguage:=wdEnglishUS, CalendarType:=wdCalendarWestern, _
    InsertAsFullWidth:=False

'Prompt
strPrompt = "What chapter is the MFR for?, NO = 13, Yes = 7"

'Dialog's Title
strTitle = "What Chapter Are You Working On?"

'Display MessageBox
iRet = MsgBox(strPrompt, vbYesNoCancel, strTitle, Yes = "Option1", No = "Option2")

'Check pressed button
If iRet = vbNo Then
    MsgBox "Running Ch.13!"
'   Added code for ch 13
Selection.GoTo What:=wdGoToPage, Which:=wdGoToNext, Name:="1"
Selection.MoveDown Unit:=wdLine, Count:=9
Selection.MoveRight Unit:=wdCell, Count:=2
    For q = 1 To 7
        Selection.TypeText Text:="x"
        Selection.MoveDown Unit:=wdLine, Count:=1
    Next q
Selection.GoTo What:=wdGoToPage, Which:=wdGoToNext, Name:="2"
Selection.MoveDown Unit:=wdLine, Count:=10
Selection.MoveRight Unit:=wdCell, Count:=2
    For w = 1 To 9
        Selection.TypeText Text:="x"
        Selection.MoveDown Unit:=wdLine, Count:=1
    Next w
Else
    MsgBox "Running Ch.7!"
' Added coded for Ch.7
Selection.GoTo What:=wdGoToPage, Which:=wdGoToNext, Name:="1"
Selection.MoveDown Unit:=wdLine, Count:=9
Selection.MoveRight Unit:=wdCell, Count:=2
For b = 1 To 7
Selection.TypeText Text:="x"
Selection.MoveDown Unit:=wdLine, Count:=1
'modded
Next b
        Selection.MoveDown Unit:=wdLine, Count:=10
For j = 1 To 3
        Selection.TypeText Text:="x"
        Selection.MoveDown Unit:=wdLine, Count:=1
Next j
        Selection.TypeText Text:="n/a"
        Selection.MoveDown Unit:=wdLine, Count:=1
        Selection.TypeText Text:="n/a"
For o = 1 To 4
      Selection.MoveDown Unit:=wdLine, Count:=1
      Selection.TypeText Text:="x"
Next o
End If
 Selection.GoTo What:=wdGoToPage, Which:=wdGoToNext, Name:="3"
    Selection.MoveDown Unit:=wdLine, Count:=9
    Selection.MoveRight Unit:=wdCell, Count:=2
    Selection.TypeText Text:="x"
    Selection.MoveDown Unit:=wdLine, Count:=2
    Selection.TypeText Text:="x"
'End part of program requires user input for BK spec's name
With ActiveDocument.Content.Find
         .Text = "Assigned BK Specialist:"
         .Replacement.Text = InputBox("Type in BK specialist's name.", "Mark Scott")
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:04:01.117

试试这样：

```
With ActiveDocument.Content.Find
         .Text = "Assigned BK Specialist:"
         .Replacement.Text = InputBox("Type in BK specialist's name.", "Mark Scott")
         .Execute Replace:=wdReplaceAll, Forward:=True, Wrap:=wdFindContinue '<----- add that
End With 
```

# gcc - DragonEgg 是否支持 clang 中的 -fno-builtin 等参数？

> ID：15914758
> 
> 赞同：0
> 
> 时间：2013-04-10T00:11:40.740
> 
> 标签：gcc, llvm

用clang已经有一段时间了，可以`clang -fno-builtin -emit-llvm -c hello.c`用来防止llvm内置函数的生成，比如`llvm.memset`.

最近，我用 DragonEgg 切换到 gcc，因为要构建的程序最初设计为使用 gcc 编译。我在网上搜索，但没有找到有关如何设置 DragonEgg 参数的任何信息。

谁能给我一些帮助？欢迎任何提示或参考。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:11:34.200

我自己想出了一种使用`gcc`+`DragonEgg`来实现类似效果的方法。

```
gcc -S -c -O0 -fplugin=$(DRAGONEGG_SO) -fplugin-arg-dragonegg-emit-ir hello.c -o hello.bc
opt -O3 -disable-simplify-libcalls hello.bc -o hello.bc 
```

`$(DRAGONEGG_SO)`是路径`dragonegg.so`。

基本上 LLVM 内在函数是由优化 pass 添加的`instcombine`。使用`-disable-simplify-libcalls`，可以防止 LLVM 内在函数在`instcombine`.

该方法还应该适用`llvm-gcc`于生成没有 LLVM 内在函数的 LLVM IR。

# r - 使用 NA 或 0 列出数据帧

> ID：15914759
> 
> 赞同：1
> 
> 时间：2013-04-10T00:11:46.683
> 
> 标签：r, list, matrix, dataframe

我有一个包含 138 个表的列表`(prop.table)`。每个表中最多可以有 20 个变量（数字类别范围为 11-95 作为列名）。我需要将此列表转换为主数据框。前三个表如下所示：

```
[[1]]
x
        21         41         42         43         52         71         81         82 
0.02007456 0.58158876 0.22483510 0.09349011 0.05248064 0.01204474 0.00544881 0.01003728 

[[2]]
x
        21         41         42         43         52         71         90 
0.01175122 0.36973345 0.34107194 0.03066781 0.08655775 0.01633706 0.14388077 

[[3]]
x
         21          22          23          41          42 
0.043254082 0.008307075 0.016614151 0.930392438 0.001432254 
```

我需要将其转换为矩阵，使其看起来像这样，当分类变量不可用时使用 NAs 或 0：

```
x<-matrix (nrow=3, ncol=11 )
colnames(x) <-c('21', '22', '23', '41', '42', '43', '52', '71', '81', '82', '90' ) 
```

我曾尝试使用之前类似问题中的这一行，但表格不正确：

```
df <- data.frame(matrix(unlist(prop.table), nrow=138, byrow=T)) 
```

有关如何解决此问题并获得我需要的表格的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:44:07.617

这是你想要的吗？

```
x1 <- c(1, 5, 7)
names(x1) <- 1:3
x2 <- c(1, 2, 7)
names(x2) <- c(1,3,5)
l <- list(x1, x2)

m <- matrix(nrow=length(l), ncol=5)
colnames(m) <- 1:5
for (i in 1:length(l)) {
  m[i, names(l[[i]])] <- l[[i]]
} 
```

也许可以用`apply`函数替换循环，但我不确定......基本上，我循环遍历列表并在矩阵的每一行中设置与列表中向量名称匹配的列。

很抱歉没有使用您的数据集，但您手头没有代码，我懒得打出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T01:46:54.493

`rbind.fill`从`plyr`包中将为您做到这一点：

```
# make an example `prop.table`:
tbl <- 1:10
names(tbl) <- letters[1:10]
tbl <- as.matrix(tbl)

# make sure some of the columns are missing
prop.table <- list(tbl[sample(10, size=8),], tbl[sample(10, size=7),], tbl[sample(10, size=9),])
# [[1]]
# d b g c h f e i 
# 4 2 7 3 8 6 5 9 
# [[2]]
#  h  g  d  a  j  f  c 
#  8  7  4  1 10  6  3 
# [[3]]
#  c  i  b  d  j  a  h  g  e 
# 3  9  2  4 10  1  8  7  5 
```

您可以使用`rbind.fill`来自 的函数`plyr`，它只是`rbind`用 来填充缺失的列`NA`。它可以将一个数据框列表`rbind`放在一起，所以我`prop.table`首先将每个元素转换为一个数据框（需要`t`确保每个元素都`prop.table[[i]]`被视为一行，而不是一列）

```
rbind.fill(lapply(prop.table, function (x) as.data.frame(t(x))))
#   d  b g c h  f  e  i  a  j
# 1 4  2 7 3 8  6  5  9 NA NA
# 2 4 NA 7 3 8  6 NA NA  1 10
# 3 4  2 7 3 8 NA  5  9  1 10 
```

（注意 - 您可以使用 对输出数据框的列进行排序`x[, order(colnames(x))]`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T00:49:26.163

我只是建议一种解决方案。您如何将所有列表连接在一起。所以你会有

```
MyDataFrame
variable1         1          1          1          1          1          1          1          1
variable2        21         41         42         43         52         71         81         82 
variable30.02007456 0.58158876 0.22483510 0.09349011 0.05248064 0.01204474 0.00544881 0.01003728 

variable1         2          2          2          2          2          2          2 
variable2        21         41         42         43         52         71         90 
variable30.01175122 0.36973345 0.34107194 0.03066781 0.08655775 0.01633706 0.14388077 

variable1          3           3           3           3           3
variable2         21          22          23          41          42 
variable30.043254082 0.008307075 0.016614151 0.930392438 0.001432254 
```

一旦你只有一个数据框。您可以使用重塑功能。喜欢

```
install.packages('reshape')
library('reshape')
cast(MyDataFrame, variable1~variable2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T00:50:34.130

这不是最有效的，但使用`plyr`and `reshape2`，并假设您的列表`prop.tables`被调用`foo`

```
library(plyr)
library(reshape2)

allData <- dcast(ldply(lapply(seq_along(foo), function(x) data.frame(foo[[x]], id = x))), 
                id ~ x, value.var = 'Freq') 
```

或更直截了当

```
ff <- c('21', '22', '23', '41', '42', '43', '52', '71', '81', '82', '90' )

t(sapply(foo, function(x,y) {x[ff]} )) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T02:04:04.433

这是使用的简单方法`lapply`，`rbind`并且`do.call`

```
ptl
## [[1]]
## x
##         21         41         42         43         52         71         81         82 
## 0.02007456 0.58158876 0.22483510 0.09349011 0.05248064 0.01204474 0.00544881 0.01003728 
## 
## [[2]]
## x
##         21         41         42         43         52         71         90 
## 0.01175122 0.36973345 0.34107194 0.03066781 0.08655775 0.01633706 0.14388077 
## 
## [[3]]
## x
##          21          22          23          41          42 
## 0.043254082 0.008307075 0.016614151 0.930392438 0.001432254 
## 
## [[4]]
## x
##         21         22         31         41         42         43         81 
## 0.10028653 0.03123209 0.00487106 0.66103152 0.03037249 0.01604585 0.15616046 
## 
## [[5]]
## x
##           21           41           42           43           81 
## 0.0662080825 0.8291774147 0.0005732302 0.0865577529 0.0174835196 
## 
## [[6]]
## x
##          21          22          31          41          42          43          81 
## 0.081948424 0.002292264 0.006303725 0.825501433 0.029226361 0.020630372 0.034097421 
## 

# Get unique names of all columns in tables in the list
resCol <- unique(unlist(lapply(ptl, names)))

# Get dimensions of desired result
nresCol <- length(resCol)
nresRow <- length(ptl)

# Create 'Template' data.frame row
DF <- as.data.frame(matrix(rep(0, nresCol), nrow = 1, dimnames = list(1, resCol)))

# for every table in list, create copy of DF, fill it appropriately, then rbind result together using do.call

result <- do.call(rbind, lapply(ptl, function(x) {
    retDF <- DF
    retDF[, names(x)] <- x
    return(retDF)
}))

# rename rows(optional)
rownames(result) <- 1:nrow(result)

result
##           21        41           42         43         52         71         81         82        90          22         23          31
## 1 0.02007456 0.5815888 0.2248351018 0.09349011 0.05248064 0.01204474 0.00544881 0.01003728 0.0000000 0.000000000 0.00000000 0.000000000
## 2 0.01175122 0.3697334 0.3410719404 0.03066781 0.08655775 0.01633706 0.00000000 0.00000000 0.1438808 0.000000000 0.00000000 0.000000000
## 3 0.04325408 0.9303924 0.0014322544 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.0000000 0.008307075 0.01661415 0.000000000
## 4 0.10028653 0.6610315 0.0303724928 0.01604585 0.00000000 0.00000000 0.15616046 0.00000000 0.0000000 0.031232092 0.00000000 0.004871060
## 5 0.06620808 0.8291774 0.0005732302 0.08655775 0.00000000 0.00000000 0.01748352 0.00000000 0.0000000 0.000000000 0.00000000 0.000000000
## 6 0.08194842 0.8255014 0.0292263610 0.02063037 0.00000000 0.00000000 0.03409742 0.00000000 0.0000000 0.002292264 0.00000000 0.006303725 
```

# css - 如何收听引导动画的结尾

> ID：15914760
> 
> 赞同：6
> 
> 时间：2013-04-10T00:11:57.117
> 
> 标签：css, twitter-bootstrap, css-transitions

我正在使用引导程序及其响应式 JS+CSS 开发一个网站。

在页面的顶部，我有一个固定的导航栏，其中会显示一个“展开菜单”按钮，以防视口太紧。这个按钮通过动画（我认为是 CSS3 的）发挥了它的魔力，我对它很满意，但我想做更多的事情（用 jquery 切换类）每次动画完成（打开动画和关闭动画）一）。我在考虑一个 javascript 监听器（通过 jquery .on 函数定义它更好），但我真的不知道我应该听什么事件！有任何想法吗？

*更新* 我很喜欢通过在我想要控制的对象上收听这个事件几乎可以很好地完成工作：

```
$("#main-navbar .nav-collapse").on("transitionend", function(event){    
    console.log("end of the animation");
} 
```

唯一的问题是它在该对象上弄乱了引导动画：它第一次工作，但是当我想关闭扩展的导航栏时，什么也没有发生（似乎我的听众覆盖了引导动画。很奇怪，是吧？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-28T21:13:08.353

如果你使用引导和转换（css3 转换），你可以试试这个：

```
$("body").on($.support.transition.end, '#main-navbar .nav-collapse', function(event){    
    console.log("end of the animation");
}); 
```

$.support.transition.end 包含以下事件之一：`webkitTransitionEnd, transitionend, oTransitionEnd otransitionend, transitionend.`

但如果你使用 css3 动画（css3 动画名称和关键帧），你可以试试这个：

```
$("body").on('webkitAnimationEnd oanimationend msAnimationEnd animationend', '#main-navbar .nav-collapse', function(event){    
    console.log("end of the animation");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-05T15:18:05.453

```
$target.on("shown.bs.collapse", function(event){    
    console.log("end of the animation");
}); 
```

* * *

奇怪的是，没有人提到`Util.emulateTransitionEnd()`哪个是故意创建的，并被 Bootstrap 组件用来捕捉动画结束的时间。

```
$('#nav')
  .one(
    'bsTransitionEnd', // Util.TRANSITION_END
    handler
  )
  .emulateTransitionEnd(600); // Collapse.TRANSITION_DURATION 
```

在您的特定情况下，您可能希望扩展相应的 Bootstrap 插件，以便您可以确定您的具体情况 - Collapse 由不同的组件使用。

这是演示的[jsfiddle](https://jsfiddle.net/ru5ow96z/)片段（基于 Bootstrap v4）。

[![jsfiddle.net/ru5ow96z](https://i.stack.imgur.com/ytKUH.gif)](https://i.stack.imgur.com/ytKUH.gif)

```
(function($) {
  var Collapse = $.fn.collapse.Constructor;
  var navbar = $('#nav');

  $.extend(Collapse.Default, {
    navbarClass: ''
  });

  var _show = Collapse.prototype.show;
  Collapse.prototype.show = function() {
    _show.apply(this, Array.prototype.slice.apply(arguments));

    var navbarClass = this._config.navbarClass;
    if (navbarClass && !navbar.hasClass(navbarClass)) {
      navbar.addClass(navbarClass);
    }
  }

  var _hide = Collapse.prototype.hide;
  Collapse.prototype.hide = function() {
    _hide.apply(this, Array.prototype.slice.apply(arguments));

    var navbarClass = this._config.navbarClass;
    if (navbarClass && navbar.hasClass(navbarClass)) {
      navbar
        .one('bsTransitionEnd', function() { // Util.TRANSITION_END
          navbar.removeClass(navbarClass);
        })
        .emulateTransitionEnd(300); // Collapse.TRANSITION_DURATION / 2
    }
  }
})(window.jQuery);
```

```
<nav id="nav" role="navigation" class="navbar fixed-top navbar-light bg-light">
  <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#nav_items" data-navbar-class="navbar-dark bg-dark" aria-expanded="false" aria-label="Menu">
    <span class="text-hide">Menu</span>
    <span class="navbar-toggler-icon"></span>
  </button>

  <div id="nav_items" class="collapse navbar-collapse">
    <div class="nav navbar-nav">
      <a class="nav-item nav-link active" href="">Link <span class="sr-only">Home</span></a>
      <a class="nav-item nav-link" href="">Link2</a>
      <a class="nav-item nav-link" href="">Link3</a>
    </div>
  </div>
</nav>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
<style type="text/css">
  button:focus {
    outline-width: 0;
  }

  .navbar-collapse.collapse.show {
    height: 100vh;
  }

  .navbar-nav {
    height: 100vh;
  }

  .navbar-toggler {
    border: none;
    padding: 0.25rem 0;
  }

  .navbar-dark .navbar-toggler-icon {
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,.5)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E");
  }
</style>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:06:00.120

jQuery 内置了一个动画监听器：http: [//docs.jquery.com/Selectors/animated](http://docs.jquery.com/Selectors/animated)

例子：`if( $(foo).is(':animated') ) {...}`

然后，如果一个元素是 !animated 你可以应用你想要的任何逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T16:06:47.663

```
$('.collapse').on('bsTransitionEnd', function(e) {
  console.log('finished')
}) 
```

这对我来说适用于任何类型的可折叠面板。您可以尝试使用不同的选择器。

# excel - Excel“UnCONCATENATE”/在函数中分解/将单元格转换为数组

> ID：15914761
> 
> 赞同：2
> 
> 时间：2013-04-10T00:12:01.203
> 
> 标签：excel, concatenation, excel-2010

我正在尝试在 Excel 2010 中“取消连接”一个字符串。是的，我知道这不是一个真实的词。差不多；我有一个无法拆分为多列的单元格，该单元格如下所示：

第 1 项、第 2 项、第 3 项

现在这个单元格可能有 0-? 项目。我想将该单元格与另一张表中的列进行比较。我相信我需要使用 match 函数来执行此操作，但我需要将第一个单元格转换为函数中的数组，分隔符为逗号。到目前为止，我有 =MATCH(***单元格中的每个项目***，SHEET2!A:A, 0)

你能帮忙的话，我会很高兴。我知道 =Left 和 =Right，但我认为它们不会起作用，因为每个单元格中的项目数可能不一样。谢谢

编辑：

详细说明：在我的第一张工作表中，我有一个下拉框。当您选择项目时，它会在该项目的表 2 上进行 vlookup。发生这种情况时，我希望它还检查该行（第 1 项、第 2 项、第 3 项）中的单元格 E 是否与工作表 3 中的列中的任何单个单元格匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:06:58.980

以下代码公开了 VBA 的 Split 函数以供工作表使用 - 它返回已使用指定分隔符拆分的项目的行数组。例如，如果单元格 A1 包含文本“Item 1,Item 2”)，则 EXPLODE(A1,",") 将返回一个包含元素“Item 1”和“Item 2”的数组。

```
 Function EXPLODE(str As String, Optional delimiter As Variant) As Variant
      If IsMissing(delimiter) Then
          delimiter = " "
      End If
      EXPLODE = Split(str, delimiter)
  End Function 
```

它是一个数组函数。要在电子表格中使用返回的元素：

*   选择要显示“爆炸”项目的单元格
*   输入指定具有源字符串的单元格（或引用包含源的单元格）和将在其上完成拆分的分隔符的函数
*   使用`Control`- `Shift`-`Enter`组合键完成输入。

或者，可以使用 INDEX 函数选择单个元素——`=INDEX(EXPLODE(A1,1,2)`使用前面的示例将返回“Item 2”。（给定一个范围或数组，INDEX 函数返回第 i 行第 j 列中的值。）这种用法不需要​​将公式作为数组公式输入。

对于您的用例，可以与其他功能组合使用。您有一个包含多个“aa, bb, cc”形式的项目（VLOOKUP 的结果）的字符串，并且想要确定是否可以在 A 列的任何单元格中找到该字符串的任何元素作为单个项目. 你想要一个函数，如果找到所有元素，则返回 True，否则返回 False。以下公式实现了该结果：

```
 =SUM(SIGN(IFERROR(MATCH(TRIM(EXPLODE(D1,",")),$A:$A,0),0)))=COUNTA(EXPLODE(D1,",")) 
```

它是一个数组公式，需要用`Control`- `Shift`-输入`Enter`。请注意，我使用单元格 D1 的内容代替了您的查找值。TRIM 函数用多个项目去除字符串元素之间的任何无关空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:19:27.573

（不是真正的答案，只是想弄清楚问题是什么）

工作表 1 有一个下拉框，其中包含许多项目，所选项目用于查看工作表 2 中的表格的 vlookup()。

工作表 2 有 2(+) 列，一个是用于 vlookup 的索引，另一个包含分隔列表。

工作表 3 有 1(+) 列，每一行都有一个值，该值*可能*对应于工作表 2 中的一个分隔列表中的一个项目。

当在工作表 1 的下拉框中选择一个项目时，我想在工作表 2 中查找相应的列表（使用 vlookup），然后查看该列表中的任何项目是否存在于工作表 3 中。

这是你想做的吗？如果是，这个搜索的结果是什么？

*   布尔值：真 - 找到一些匹配！，假 - 没有匹配
*   编号：我找到了这么多结果

不？:(

**更新**

仅使用工作表函数来做到这一点将相当棘手！

VBA 是一个更好的选择。（至少最后一步）

将以下代码添加到新模块（不是工作表或工作簿模块），它将在您的工作表上作为 UDF 提供。

这个函数接受一个字符串（这是你的分隔列表），它在函数内部被分解，所以你不必担心这样做。

~~我没有测试过它，但理论上它应该允许你传递一个列表。然后该函数应为您检查表 3 并根据天气是否找到项目返回真/假。~~

我知道您已经找到了答案，但这是我的函数的一个有效且稍快的版本。

```
Public Function ValidateList(ByVal Target As Range) As Boolean
Dim Sheet As Worksheet: Set Sheet = ThisWorkbook.Worksheets("Sheet3") ' Check Sheet3 is the correct sheet
Dim List As Variant: List = Sheet.UsedRange.Columns("A").Value2       ' Set Column(A) to correct column
Dim Items() As String: Items = Split(Target.Value2, ",")
Dim Item As Long
Dim Key As String
Dim Result As Boolean: Result = False
Dim Search As Object: Set Search = CreateObject("Scripting.Dictionary")

For Item = LBound(Items) To UBound(Items)
    Search.Add Trim(Items(Item)), False
Next Item

If Search.Count > 0 Then
    ' Target List has 1+ Items
    For Item = LBound(List, 1) To UBound(List, 1)
        Key = Trim(List(Item, 1))
        If Search.Exists(Key) = True Then
            Search.Remove Key
        End If
        If Search.Count = 0 Then
            Result = True
            Exit For
        End If
    Next Item
Else
    ' Target List is Empty
    ' Optionally set result to True here if empty list should return True
    ' Defaults to False
End If

ValidateList = Result

End Function 
```

# json - 以 0（零）开头的 CVV 编号在执行期间失败？

> ID：15914762
> 
> 赞同：2
> 
> 时间：2013-04-10T00:12:20.527
> 
> 标签：json, paypal

有没有其他人看到过这个或者你能验证看到这个行为吗？

我正在使用 PayPal 的新 REST API。事实上，信用卡上的某些 CVV 号码以 0（零）开头。然而，使用以零开头的 CVV 编号向 PayPal REST API 发送请求失败。这是因为“funding_instrument”对象中的“cvv2”值应该是一个数字，而以零开头的数字是无效的 JSON。当我尝试执行我的请求时，我得到一个“INTERNAL_SERVICE_ERROR”错误作为我的响应。

为了纠正这个问题，我将我的 CVV 编号用引号括起来，将其视为一个字符串，然后重新提交了我的请求。这次我收到“VALIDATION_ERROR”响应，告诉我 CVV 编号必须是数字。因此，除非有某种方法可以在 JSON 中转义数字中的前导零，否则无法通过 CVV 包含零作为其第一个数字的 PayPal REST API 接受卡。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:37:11.200

这是我们新的 REST API 中的一个错误 - 其中 cvv2 字段被定义为整数而不是字符串，以容纳以零开头的值（例如 011、001）。我们正在修复 - 一旦修复推出，将更新此线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:15:15.727

十进制表示以“0”开头的唯一整数为零，这在 JSON 中是完全合法的。你描述的问题是不可能的。您必须将 CVV2 代码从您拥有的任何表示形式转换为规范的十进制数，因为这是 JSON 规范所要求的。

您实际上从未从用户（或任何来源）那里获得 CVV*编号。*您尝试将*表示*直接转换为 JSON。直接转换表示会给你带来麻烦——而是通过数字转换。

信用卡上的“012”代表数字十二。数字 12 在 JSON 中表示为“12”。尝试将数字从一种表示形式转换为另一种表示形式时，最好先将其转换为数字。

根据 JSON 规范，“012”不是任何数字的合法表示。尝试发送它违反了该规范，并表明您实际上从未获得 CVV*编号*，而是尝试使用它的*表示*，就好像它是所表示的数字一样。这就像吃食谱一样，可能会让您和 PayPal API 消化不良。

**更新**：显然，该错误在 PayPal API 中。CVV 代码*不是*数字。没有“CVV 编号”之类的东西。PayPal API 要求您提供不存在的内容，并且在没有与 CVV 代码对应的数字时失败。

# java - Android：切换按钮不更新

> ID：15914766
> 
> 赞同：0
> 
> 时间：2013-04-10T00:12:41.410
> 
> 标签：java, android, button, auto-update, ui-thread

例如，在 novo.charAt(0) 接收到值 1 后，我在尝试设置切换按钮 (LeftLightButton) 状态和文本时遇到了一些问题。主要思想是，我单击按钮，它会生成 webview.loadUrl，如果页面更改为我预期的切换按钮状态应该打开，如果不是，它必须保持关闭，反之亦然。现在的方式，如果网站没有更新到我期望的值，也不会改变文本。

```
public class MainActivity extends Activity {

private WebView webView;
private ToggleButton LeftLightButton;
private Thread webviewthread;
private String baseURL;

private boolean LeftLightButtonState;

public void onCreate(Bundle savedInstanceState) {

    final Context context = this;
    baseURL = "http://192.168.1.4/i.php";

    LeftLightButton = (ToggleButton) findViewById(R.id.toggleButton1);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     runOnUiThread(new Runnable() {
            public void run()
            {
                synchronized(this) {
                    webView = (WebView) findViewById(R.id.webView1);

                    webView.getSettings().setJavaScriptEnabled(true);
                    webView.addJavascriptInterface(context, "HTMLOUT");

                    webView.setWebViewClient(new WebViewClient() {
                        @Override
                        public void onPageFinished(WebView view, String url) {
                            webView.loadUrl("javascript:window.HTMLOUT.processHTML('<head>'+document.getElementsByTagName('html')[0].innerHTML+'</head>');");
                        }
                    });

                    webView.loadUrl(baseURL);
                }
            }
        });

    showToast("Getting current status...");

}

public void notify(final boolean state, final ToggleButton buttonName) {

    Thread thread = new Thread() {
        @Override
        public void run() {
            synchronized (this) {
                try {
                    wait(1000);
                    final ToggleButton button = (ToggleButton) findViewById(R.id.toggleButton1);
                    if (!state && button.isChecked()) {
                        showToast("Couldnt turn OFF");
                        // UI
                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {

                                button.setChecked(false);
                                button.setTextOff("OFF");
                            }
                        });
                        // end of UI

                    }
                    if (state && !button.isChecked()) {
                        showToast("Couldnt turn ON");
                        // UI
                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {

                                button.setChecked(true);
                                button.setTextOn("ON");
                            }
                        });
                        // end of UI
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
            }

        }
    };
    thread.start();

}

public void showToast(final String toast)
{
    runOnUiThread(new Runnable() {
        public void run()
        {
            Toast.makeText(MainActivity.this, toast, Toast.LENGTH_SHORT).show();
        }
    });
}

public void onClick(View arg0) {

    final int id = arg0.getId();
    switch (id) {
    case R.id.toggleButton1:
        if (LeftLightButtonState == true) {
            webView.loadUrl(baseURL+"?L=0");
            notify(false, LeftLightButton);
        } else {
            webView.loadUrl(baseURL+"?L=1");
            notify(true, LeftLightButton);
        }
        break;
    // even more buttons here
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public void processHTML(String html) { // <html> <body> 1 0 0 0 </body> </html>
    LeftLightButton = (ToggleButton) findViewById(R.id.toggleButton1);
    String novo = android.text.Html.fromHtml(html).toString();
    System.out.println("RECEIVED: "+novo);

    if (novo != null) {
        if (novo.charAt(0) == '0') {
            LeftLightButtonState = false;       
            LeftLightButton.setTextOff("OFF");
            LeftLightButton.setChecked(false);

        }
        if (novo.charAt(0) == '1') {
            LeftLightButtonState = true;
            LeftLightButton.setTextOn("ON");
            LeftLightButton.setChecked(true);

        }
        System.out.println("CHEGUEI");
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:16:07.357

在 xml 文件本身中使用不同的字符串。然后根据状态显示适当的文本。您可以调用 setChecked(true/false) 来选择或取消选择切换按钮。它在我的项目中工作正常。

```
 android:textOff="@string/dontshowtraffic"
    android:textOn="@string/showtraffic" 
```

# c++ - 从文本文件 C++ 中读取字符串和整数

> ID：15914767
> 
> 赞同：-1
> 
> 时间：2013-04-10T00:12:51.683
> 
> 标签：c++, iostream

好的，这是交易。下面是我的文件中的输入。

```
 3332453:Ryan:77 Easy Street
 3324532:Tom:1 Victory Lane
 3326854:Gary:69 Sexual Ave
 3304357:Susan:11 Straight Road
 3343651:Frank:96 Backwards street 
```

我要做的是读取数字，然后是名称，然后是地址，然后将它们存储到`BST`. 检查完所有内容后，我认为我的插入工作正常。它正确地将名称和地址插入每个位置，但 key1 始终为 0 或 -955472。以上数字均假设为 7 位数字（电话号码）。以下是我认为迄今为止我最接近的尝试。我不是要求某人只给我代码（尽管它会有所帮助），而是向我解释为什么我的实现不起作用，以及我如何改进它。谢谢你。

```
 ifstream dataFile;
dataFile.open ("/Users/revaes12/Desktop/BinarySearch/BinarySearch/phone.dat.rtf");
for (int counter = 0; counter < 5; counter++)
{
        getline(dataFile, tmp,  ':');
        person[counter].key1 = atoi(tmp.c_str());
        getline(dataFile, person[counter].name1,':');
        getline(dataFile, person[counter].address1);

        PNTree.insert(person[counter].key1, person[counter]);
}
dataFile.close(); 
```

`insert`调用的原型是“ `template <class KeyType, class DataType> bool BST<KeyType, DataType>::insert (KeyType key, DataType data)`”。另外，我知道 atoi 是 C 而不是 C++，但我也尝试了 stringstream，但也失败了！请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:25:38.853

在尝试对[您的问题进行逆向工程](http://coliru.stacked-crooked.com/view?id=66150f4871b1c16e6ade19731707780e-50d9cfc8a1d350e7409e81e87c2653ba)后，我认为这`PNTree.insert`是错误的。假设`PNTree`是 a `std::map<int, person_type>`，那么`insert`that 的方法不接受这些类型的两个参数。三个插入成员如下。

```
pair<iterator,bool> insert (const value_type& val);
iterator insert (iterator position, const value_type& val);
template <class InputIterator>
void insert (InputIterator first, InputIterator last); 
```

并且`value_type`是一个`std::pair<int, person_type>`。我想你想要第一个，插入一个*node*，在这种情况下，最简单的事情是：

```
PNTree[person[counter].key1] = person[counter]; 
```

另请注意，其中一些“数字”无法转换为`int`，它们只是很大。你必须要么使用`long long`，要么`std::string`持有那些。

如果我要编写这段代码，它看起来更像[这样](http://coliru.stacked-crooked.com/view?id=c8d738ebfef1112aa33bf64179ac04fd-50d9cfc8a1d350e7409e81e87c2653ba)。

# python - 如何从 django 运行脚本？

> ID：15914777
> 
> 赞同：0
> 
> 时间：2013-04-10T00:13:39.013
> 
> 标签：python, django, shell

我想知道如何从 django 视图运行脚本。

它从命令行工作：例如：`$ python sync.py`但不是通过 django 视图。提前致谢

# 脚本 1：/home/ubuntu/webapps/sony_mv/sync.py

```
#!/usr/bin/env python
from subprocess import call
call(["/bin/sh", "/home/ubuntu/webapps/sony_mv/sync.sh"]) 
```

# 脚本 2：/home/ubuntu/webapps/sony_mv/sync.sh

```
cd /home/ubuntu/webapps/sony_mv
heroku pgbackups:capture -a staging-db --expire
heroku pgbackups:capture -a prod-db --expire
heroku pgbackups:restore DATABASE -a prod-db `heroku pgbackups:url -a staging-d` --confirm prod-db 
```

# 视图.py

```
def sync_staging_to_production(request):
    try:
        token = request.GET['token']
    except:
        token = False
    if token == '382749813256-231952135':
        from subprocess import *
        import sys
        p = Popen([sys.executable, '/home/ubuntu/webapps/sony_mv/sync.py'],stdout=PIPE,stderr=STDOUT)
        return render_to_response('hannibal/sync_staging_to_production.html',{'feedback':'Success. Sync in progress.'},context_instance=RequestContext(request))
    else:
        return render_to_response('hannibal/sync_staging_to_production.html',{'feedback':'Authorization required'},context_instance=RequestContext(request)) 
```

# ls 输出

```
 $ ls -l sync.*
-rwxrwxr-x 1 root 108 2013-04-09 16:35 sync.py
-rwxrwxr-x 1 root 326 2013-04-09 16:44 sync.sh 
```

# whoami 输出

```
$ python
>>> from subprocess import call
>>> call(["/usr/bin/whoami"])
ubuntu
0
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:57:31.283

为 shell 命令的输出添加日志有助于调试。该问题与相应用户的权限和 ssh 密钥有关。添加相应的用户 SSH 密钥解决了该问题。

感谢大家

# python - BeautifulSoup 不解析任意 XML？例如 - 如果有标签调用

> ID：15914779
> 
> 赞同：1
> 
> 时间：2013-04-10T00:13:42.803
> 
> 标签：python, parsing, beautifulsoup

使用以下记录解析 xml 文件：

```
<Message>
    <Subject>some text</Subject>
    <Body>some text</Body>
</Message> 
```

但下面的“一些文本”`BeautifulSoup`会给出错误“NoneType 没有属性“文本”：

```
message.find('body').text 
```

我可以在搜索/替换标签名称后解析文件，但这听起来很奇怪。有没有办法在`BeautifulSoup`不删除记录的情况下解析任何 XML 结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:24:02.753

您必须`'xml'`作为第二个参数传递给`BeautifulSoup`的构造函数：

```
soup = BeautifulSoup(your_xml, 'xml') 
```

# linux - 从 perl 脚本中删除权限？

> ID：15914780
> 
> 赞同：1
> 
> 时间：2013-04-10T00:13:50.910
> 
> 标签：linux, perl, bash

我有一个以 root 身份运行的 perl 脚本，我想在其中`bar`以较低特权用户的身份执行系统命令`foo`。所以我的`system`电话包装如下：

```
sub dosys
{
        system(@_) == 0
                or die "system @_ failed: $?";
} 
```

所以我想说：

```
as user foo dosys("bar") 
```

perl 或底层 bash shell 中是否有我可以用来执行此操作的机制？（如果可能的话，我更喜欢不需要安装额外的 cpan 库的那个）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:23:33.380

该[`POSIX`](http://perldoc.perl.org/POSIX.html)模块是 Perl 的核心模块，它包括以下功能：

*   `setuid()`
*   `setgid()`

和相关`get*id()`函数，尽管这些值也可以通过特殊变量获得：

*   `$)`和`$(`（有效和真实的 GID）
*   `$<`和`$>`（有效且真实的 UID）

您也可以尝试直接设置这些（每个[$EGID](http://perldoc.perl.org/perlvar.html#%24EGID)和[$UID](http://perldoc.perl.org/perlvar.html#%24UID)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:22:52.363

```
system('su www-data -c whoami')
> www-data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:17:13.750

您必须先更改组，记住取消补充组，然后更改用户。您需要在单独的进程中执行此操作，以便 [UG]ID 更改不会影响您的根进程上的权限。

```
sub su_system {
  my $acct = shift;
  my $gid = getgrnam $acct; # XXX error checking!
  my $uid = getpwnam $acct;

  if (fork) {               # XXX error checking!
    wait;
    return $? >> 8;
  }

  # -- child
  $( = $) = "$gid $gid";    # No supp. groups; see perlvar $)
  $< = $> = $uid;

  exec @_;  # XXX not as safe as exec {prog} @argv
            #     oh, and what if $acct had [ug]id zero?  darn
} 
```

谨慎行事。

# php - 使用 eclipse 和 xdebug 进行调试不会超过第一行

> ID：15914785
> 
> 赞同：2
> 
> 时间：2013-04-10T00:14:04.723
> 
> 标签：php, eclipse, codeigniter, xdebug, eclipse-pdt

**是的，我尝试在 StackOverflow 和 Google 上搜索我的问题。如果您阅读了整个问题，您会看到我包含许多指向我使用两者找到的先前答案的链接。**

在过去的一个半小时里，我一直试图让 XDebug 与版本：Eclipse 的 Juno Service Release 2 一起工作，我遇到了一系列问题。我已经通过使用堆栈溢出和谷歌解决了我的大部分问题。

我首先按照[此处](http://technosophos.com/content/debugging-your-php-code-xdebug-mamp-textmate-and-macgdbp-support)的步骤安装调试器。

[如本文](https://stackoverflow.com/questions/2359712/remote-debugging-wont-stop-at-breakpoints)所述，我确保将调试器添加为 zend_extension 。

这是我的 php.ini 文件中的相关行

```
zend_extension="/Applications/MAMP/bin/php5.3/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
xdebug.collect_params=4
xdebug.var_display_max_depth=999
xdebug.dump.POST=*
xdebug.dump.GET=*
xdebug.show_local_vars=1 
```

我确定我为 MAMP 附带的 5.3 版本的 php 编辑了 php.ini 文件。此时，即使在我运行 php -v 时确实出现了 XDebug，调试器也会启动。

由于我仍然遇到问题，所以我就像[这里](https://stackoverflow.com/questions/3422433/xdebug-ignores-breakpoints)有人一样检查了日志。我在日志中注意到了这个错误：

```
PHP Fatal error:  Class 'Model' not found in ... 
```

在查看最新版本的 CodeIgniter 的[文档](http://ellislab.com/codeigniter/user-guide/general/models.html)后，我注意到所有模型都必须扩展 CI_Model 而不是模型。

我解决了这个问题，错误不再被打印到日志中，但现在一切都不起作用了。当我尝试调试文件时，调试器不会超过第一行。

我正在尝试将我的 php 应用程序调试为 PHP CLI 应用程序。当我尝试将应用程序作为 PHP Web 应用程序进行调试时，我收到一条错误消息：

```
No tab group defined for launch configuration type org.eclipse.php.debug.core.launching.webPageLaunch 
```

[谷歌搜索](https://www.google.com/search?q=no+tab+group+defined+for+launch+configuration+type&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a&channel=fflb#hl=en&client=firefox-a&hs=wv3&rls=org.mozilla:en-US%3Aofficial&channel=fflb&sclient=psy-ab&q=no+tab+group+defined+for+launch+configuration+type+php+webpage&oq=no+tab+group+defined+for+launch+configuration+type+php+webpage&gs_l=serp.3...4412.6607.0.7990.8.8.0.0.0.0.171.902.5j3.8.0...0.0...1c.1.8.psy-ab.7ZH9knNOCgw&pbx=1&bav=on.2,or.r_cp.r_qf.&fp=f541d26e5940a762&biw=1440&bih=714)问题后，我发现[这篇](https://stackoverflow.com/questions/12182255/how-to-install-eclipse-pdt-3-1-in-eclipse-juno)文章暗示[你可能无法做](http://www.eclipse.org/forums/index.php/t/366539/)我想做的事。由于该问题于 2009 年首次提出，因此我决定尝试第二个建议并检查是否有任何更新。

在更新了我所有的 Eclipse 插件后，我仍然遇到同样的问题。在搜索了更多之后，我看到[这个](https://stackoverflow.com/questions/5585026/problems-debugging-with-eclipse-and-xdebug)人只是放弃并尝试使用 NetBeans 并让一切正常工作。

我是否应该将过去的 1.5 - 2 小时视为沉没成本，然后转而使用不同的 IDE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:34:06.687

我在让 XDebug 与 Eclipse 和 XAMPP 一起工作时也遇到了问题。最后，我决定使用 Netbeans，而且设置起来要顺畅得多。迄今为止，我仍在使用 Netbeans 进行所有 PHP 开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:14:07.293

您的 Php CLI 是否选择了错误的 php.ini 文件？

请转到终端并检查加载了哪个 ini 文件：

```
php --ini 
```

并确保它想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:43:37.197

杰罗德·泰勒，

我在开始使用 PHP、Xdebug 和 Eclipse 时遇到了很多问题。我自己考虑过更改 IDE，但我喜欢这个挑战，并在网上找到了很多帮助。我会尽力为您提供一些对您有所帮助的提示。

首先这是我在 php.ini 中的参数：

```
zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
xdebug.remote_enable=On
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9060
xdebug.remote_handler="dbgp"
xdebug.remote_autostart=On 
```

我使用本地机器作为远程主机。适应你的世界。此配置适用于 CLI 和 Web 调试。我真的不确定其中一些是否特定于不同类型的调试。所以，让我们从所有这些开始。

现在，确保支持 xdebug。运行以下命令，看看是否存在不好的东西。

```
php -i|grep xdebug 
```

现在，让我们进入 Eclipse。在 Eclipse 首选项中添加对应的 PHP 可执行文件并确保调试器类型是 Xdebug。这一步可以通过 Preferences->PHP->PHP Executables 完成。如果您添加一个项目，您要求您提供以下信息的表单：

```
Name : Choose one
Executable Path : the_path_to_php_exe
PHP Ini file : you can leave it blank
SAPI type : CLI
PHP debugger : Xdebug 
```

这一步很重要。这就是我们告诉 eclipse 要使用的可执行文件的方式。

现在，让我们添加一个调试配置。我的工作区中有一个名为 upload 的项目，并且在该项目中存在一个文件 index.php。要创建调试配置，请在选择“PHP CLI 应用程序”时单击新建。它将为您添加一个新的配置表单。对于我的调试配置，我有以下信息：

```
Tab PHP Script

Run Time PHP
   Alternat PHP: (Select the PHP executable you have created above)
PHP File : /upload/index.php
Break Point : Break at first line is selected 
```

这些步骤应该足以解决您的问题。让我们知道情况如何。

# android - 在静态方法中设置 ImageView

> ID：15914789
> 
> 赞同：0
> 
> 时间：2013-04-10T00:14:40.020
> 
> 标签：android, static, imageview

我有一个需要从另一个活动调用的方法，我需要使用它在它自己的活动中设置一个 ImageView。我在 MainActivity 中有这个方法：

```
public static void setImageView(String fileName){
        Log.i(TAG, fileName);
        imageView = (ImageView) findViewById(R.id.imageView);
        bmp = BitmapFactory.decodeFile(fileName);
        imageView.setBackgroundResource(0);
        imageView.setImageBitmap(bmp);  
    } 
```

但我无法对 findViewById 进行静态引用，因为它不是静态方法。保存照片后，在相机 Activity 中调用此方法，我想传入文件名（文件 URI）并设置 imageView，以便当相机 Activity 完成并且用户返回 MainActivity 时，ImageView 已经设置. 因此，在 CameraView 我试图这样称呼：

```
...code...
mCamera.takePicture(null, null, callback);
MainActivity.setImageView(fileName); 
```

有没有办法解决这个问题？我知道还有其他关于此的帖子，但我无法弄清楚如何将那里给出的建议应用于我的情况。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:31:48.253

一些东西。

1）既然你一次只应该显示一个活动，为什么不从活动开始，`startActivityForResult`并在你的相机活动中 `ImageView`覆盖？`onActivityResult`

2）我不确定您的应用程序，但如果您按照以下步骤实现拍照可能会更容易：http: [//mobile.tutsplus.com/tutorials/android/android-sdk-quick-tip-launching-相机/](http://mobile.tutsplus.com/tutorials/android/android-sdk-quick-tip-launching-the-camera/) .

3）您可以在您的主要活动的`onCreate`方法中公开对您的主要活动的静态引用，执行类似的操作`staticRef = this;`，并在您的相机活动中简单地通过`MainActivity.staticRef...`（我不推荐这种方法）访问它

4）您可以在您的主要活动中注册一个广播接收器，该接收器引用您的主要活动或图像视图，并在您的相机活动中向其发送广播，您可以设置图像视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:32:56.410

也许您应该使用 startActivityForResult() 方法启动您的 CameraActivity，然后在拍摄照片后将 fileName 作为 Extra 放入 Intent 并将其设置为结果。然后在您的 MainActivity 中，您可以从 onActivityResult() 的 Intent arg 中获取文件名。

就像是：

```
 public class MainActivity extends Activity{
        public void aMethod(){
            ...
            Intent i = new Intent(this, CameraActivity.class);
            startActivityForResult(i, REQUEST_CODE);
            ...
        }
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
                Bundle b = data.getExtras();
                String fileName = b.getString(RETURN_FILE_PARAMETER);
                doSomething(fileName);
    }
    }
    }

    ...

    public class CameraActivity extends Activity{
        private void returnFileFinishActivity(String fileName) {
            Intent retIntent = new Intent();
            retIntent.putExtra(RETURN_FILE_PARAMETER, fileName);
            setResult(RESULT_OK, retIntent);
            finish();
        }
    } 
```

问候。

# c - 如何通过套接字地址获取自己的 IP 地址？

> ID：15914790
> 
> 赞同：8
> 
> 时间：2013-04-10T00:14:44.830
> 
> 标签：c, linux, sockets, networking

我想获取启动我的程序的计算机的 IP 地址，以便能够将其发送到客户端，但我总是得到 0.0.0.1 而不是真实的 IP 地址（例如 127.0.0.1）。

我目前能够获取端口，但不能获取 IP 地址。

我怎么才能得到它？

最好的解决方案是能够使用`sockaddr_in`. 这是我目前正在做的事情：

```
int open_connection(char* ip, int* port)
{
  int                   sock;
  struct sockaddr_in    sin;
  socklen_t             len;
  int                   i;

  i = 0;
  len = sizeof(sin);
  if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
    return (-1);
  bzero(&sin, sizeof(struct sockaddr_in));
  sin.sin_family = AF_INET;
  if (bind(sock, (struct sockaddr *) &sin, sizeof(sin)) != 0)
    perror("Error on bind");
  if (getsockname(sock, (struct sockaddr *)&sin, &len) != 0)
    perror("Error on getsockname");
  strcpy(ip, inet_ntoa(sin.sin_addr)); // IP = 0.0.0.0
  *port = sin.sin_port;
  return (sock);
} 
```

**编辑：**我知道我的思维方式是错误的。所以我的问题是：获取自己的 IP 地址的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T01:50:39.083

当您`bind()`将套接字连接到 0.0.0.0 时，这是该套接字在调用时唯一可用的 IP `getsockname()`。这意味着套接字绑定到所有本地接口。为了从套接字获取特定的 IP，它必须绑定到特定的 IP。

无论如何，使用套接字 API 获取机器的本地 IP 是错误的方法。一个常见的错误是使用`gethostname()`with`gethostbyname()`或`getaddrinfo()`获取本地 IP 列表。通常这是可行的，但它有一些可能导致虚假信息的隐藏陷阱，但人们往往会忽略这个事实，或者甚至一开始都不知道它（我多年来不知道它，但后来我学得更好）。

相反，您确实应该使用特定于平台的 API 来枚举本地网络接口。这将提供更可靠的信息。Windows 具有`GetAdaptersInfo()`和`GetAdaptersAddresses()`. 其他平台有`getifaddrs()`。这些将告诉您哪些本地 IP 可用。然后，您可以将`bind()`套接字连接到 0.0.0.0 以接受任何这些 IP 上的客户端，或者`bind()`连接到特定 IP 以仅接受该 IP 上的客户端。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T00:38:15.357

套接字 API 允许您枚举分配给网络接口的 IP 地址，但如果您从路由器后面连接到 Internet，它不会告诉您“真实 IP”是什么。

唯一知道的方法是问外面的人。这就是像 FileZilla FTP Server 这样的服务器如何做到这一点的。他们指示您在服务器设置中配置“ip.php”脚本的 URL，[以便](http://www.etcwiki.org/ip.php)它可以向 Internet 询问其公共 IP 地址是什么，以便在被动模式下使用。

您还可以考虑使用[STUN](http://en.wikipedia.org/wiki/STUN)，这是一种在 VoIP 中广泛用于发现公共 IP 的协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-09T08:17:25.343

你可以调用 ioctl(sock, SIOCGIFADDR, adr)

见网络设备(7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-23T18:35:44.027

以下`@Remy Lebeau`的答案我写了一个返回当前机器地址的函数。我只在 macOS High Sierra 上测试过这个。

`interfaec`可以是 , 等之间的任何`lo0`东西`en0`。

`ipVersion`可以是`AF_INET`或`AF_INET6`。

```
long int getInternalAddress(char* interface, sa_family_t ipVersion)
{
  struct ifaddrs *ifaddrHead, *ifaddr;
  /* int_8 */
  sa_family_t family;
  int n;
  char *interfaceName;

  if (getifaddrs(&ifaddrHead) != 0)
  {
    fprintf(stderr, "ifaddrs error");
  }

  /* iterate through address list */
  for (ifaddr = ifaddrHead, n = 0; ifaddr != NULL; ifaddr = ifaddr->ifa_next, n++)
  {
    family = ifaddr->ifa_addr->sa_family;
    interfaceName = ifaddr->ifa_name;

    if (!family || family != ipVersion || strcmp(interfaceName, interface)) continue;

    struct sockaddr *addr = ifaddr->ifa_addr;
    struct sockaddr_in* addr_in = (struct sockaddr_in*) addr;
    long int address = addr_in->sin_addr.s_addr;

    freeifaddrs(ifaddrHead);

    return address;
  }

  freeifaddrs(ifaddrHead);

  return 0;
} 
```

要使用它，

```
int main()
{
  long int address = getInternalAddress((char*) &"en0", AF_INET);
  printf("%li\n", address);

  return 0;
} 
```

我还是C的初学者，如果有什么问题请告诉我。

# php - mySQL 记录随机不存储到 dbase

> ID：15914791
> 
> 赞同：-1
> 
> 时间：2013-04-10T00:14:54.663
> 
> 标签：php, mysql

我不确定如何处理这个问题。我有一个 mySQL 数据库，并且正在使用 PHP 通过我的网络应用程序修改记录等。经过相当多的调试，mySQL 记录似乎只是随机地没有被存储/更新，我不明白为什么。

对于某些背景，Web 应用程序做了两件事 - 更新用户浏览器中的 以显示刚刚提交的文本，然后触发 php 脚本将文本存储到 mySQL 记录中。更新，但将记录插入 dbase 似乎在 5 个事件中有 2 个失败（大约）。

对这个有什么想法吗？

```
function submit_wallpost($wallpost){
$userid = $_SESSION['SESS_MEMBER_ID'];

include './mySQL_access.php';

mysql_connect("$host", "$user", "$pass")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

mysql_query("INSERT INTO wall (clusterID, userID, postContent) VALUES (111, '$userid', '$wallpost')");

mysql_close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:28:32.167

代码看起来不错，除了你应该使用 PDO 或 mysqli 连接，因为 mysql_functions 已被弃用。无论如何，一些调试可能会对您有所帮助。

```
$query = mysql_query("INSERT INTO wall (clusterID, userID, postContent) VALUES (111, '$userid', '$wallpost')");
if (!$query) die(mysql_error()); 
```

可能有助于您的事业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:41:19.857

**您的代码似乎很好。您很可能需要检查发生错误的位置。**

1.检查打算从查询中插入的值。尝试通过首先定义您的查询来将查询语句与执行分开。这将是一个很好的检查打算提交使用的值`echo`，您也可以尝试在您的数据库中运行它`sql`

```
 $sql="INSERT INTO wall (clusterID, userID, postContent) VALUES (111, '$userid', '$wallpost')" 
```

2.尝试检查您的`$sql`语句执行是否失败。这个想法将返回一个`echo`语句。

```
 if($result){
      echo 'Success';
   }
   else{
    echo 'Failed';
 } 
```

在这些中，我们将大致了解导致查询失败的代码在哪里停止

# java - Android中“IF STATEMENT”中的行为非常奇怪

> ID：15914795
> 
> 赞同：0
> 
> 时间：2013-04-10T00:15:09.037
> 
> 标签：java, android, loops, if-statement

有人见过以下语句运行错误吗？

```
String BloodyHell = "Unbelievable";
if (BloodyHell == BloodyHell) >> false 
```

尽管我得到的不是该死的地狱，而是​​：`|-,-|`or `|o,-|`or `|-,o|`or `|o,o|`or `XXXX`。

不过，这些都不是真的。虽然调试确切的东西仍然是错误的。

有人请在这里帮助我。这是片段：

```
public String doStats()
{       
        String[] pattern = splitPattern();          
        for (int i = 0; i < pattern.length; i++)
        {
            if (pattern[i] == "|-,-|")
                frontClosed++;
            if (pattern[i] == "|o,-|")
                left++;
            if (pattern[i] == "|-,o|")
                right++;
            if (pattern[i] == "|o,o|")
                frontOpened++;
            if (pattern[i] == "XXXX")
                noFace++;           
        }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/6pYOe.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:16:59.107

在 Java 中，您应该使用[`String#equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法来比较字符串值，而不是`==`. 运算符比较`==`对象引用以查看它们是否是同一个对象，这就是您不断获取`false`. 对象引用是不同的，即使字符串的内容是等价的。

```
if (pattern[i].equals("|-,-|")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T00:17:26.903

之间有区别`==`和`equals()`。

比较字符串时，您想使用`equals()`; `==`用于比较它们在内存中是否相同。

# javascript - 如何检测是否支持 HTML5 输入控件？

> ID：15914797
> 
> 赞同：6
> 
> 时间：2013-04-10T00:15:16.593
> 
> 标签：javascript, html

如果我`<input type="range">`在表单上放置一个控件，一些浏览器将（正确地）呈现一个滑块控件，而其他浏览器将不知道是什么`range`，而是呈现一个文本框。处理这种情况需要额外的验证，因为文本框可以包含任意文本。是否有任何 JavaScript 可以放入页面中以说“查看 DOM 中的此控件，如果它是文本框控件，请执行`foo()`”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T00:17:57.630

该[站点建议使用 Modernizer](http://diveintohtml5.info/detect.html#input-types)：

检查 HTML5 输入类型使用检测技术 #4。首先，您在内存中创建一个虚拟`<input>`元素。`<input>`所有元素的默认输入类型是“文本”。这将被证明是至关重要的。

```
var i = document.createElement("input"); 
```

接下来，将 dummy 元素上的 type 属性设置为您要检测的输入类型。

```
i.setAttribute("type", "color"); 
```

如果您的浏览器支持该特定输入类型，则 type 属性将保留您设置的值。如果您的浏览器不支持该特定输入类型，它将忽略您设置的值，并且 type 属性仍将是“文本”。

```
return i.type !== "text"; 
```

您可以使用 Modernizr 检测对 HTML5 中定义的所有新输入类型的支持，而不是自己编写 13 个单独的函数。Modernizr 重用单个`<input>`元素来有效检测对所有 13 种输入类型的支持。然后它构建一个名为 的散列`Modernizr.inputtypes`，其中包含 13 个键（HTML5 类型属性）和 13 个布尔值（如果支持，则为 true，如果不支持，则为 false）。

```
//check for native date picker
if (!Modernizr.inputtypes.date) {
  // no native support for <input type="date"> :(
  // maybe build one yourself with Dojo or jQueryUI
} 
```

# asp.net - asp 服务器错误“无法加载文件或程序集”，但程序集肯定存在。

> ID：15914801
> 
> 赞同：4
> 
> 时间：2013-04-10T00:15:43.263
> 
> 标签：asp.net, mysql, .net

我目前收到以下错误。在本地主机网站上。

```
Could not load file or assembly 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

虽然，引用肯定存在于引用文件夹中，并且该 dll 肯定在我的本地计算机上它指向的位置。我也尝试过删除并重新添加参考。

有谁知道什么会导致这个错误？

还有什么是程序集清单定义？

提前感谢您的帮助，我非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T00:47:29.227

在 Visual Studio 中选择解决方案资源管理器中的引用，然后在属性中确保该`Specific Version`属性设置为`false`.

如果您在 中有此引用的条目`web.config`，请编辑该文件并删除版本信息。

如果您关闭 Visual Studio 并使用文本编辑器打开项目文件，请确保在项目文件中未列出程序集的版本，而仅列出名称和类型，因此只需删除以下内容：

```
, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' 
```

那么无论您使用的是 6.5.5 还是 6.5.4，只要代码使用两者都可用的类和方法，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T09:40:59.230

我经历过同样的情况并设法通过这些步骤解决了问题，

仔细阅读错误信息，其中提供了有助于纠正这种情况的详细信息。我不会更改 machine.config 文件。正如它所说，应用程序找不到对程序集 MySql.Web 的引用，它试图引用的版本是 Version=6.7.4.0。

根据您安装 MySql 的路径，您将能够找到正确的程序集文件，例如：

```
C:\Program Files\MySQL\Connector NET 6.7.4\Assemblies\v4.0\MySql.Data.dll 
```

将该文件复制到 bin 文件夹。（我会将 C:\Program Files\MySQL\Connector NET 6.7.4\Assemblies\v4.0\ 文件夹中的所有文件复制到 bin 文件夹）

希望这可以帮助！谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:20:34.283

几天前我也遇到过同样的问题，当你用早期版本构建了一些 DLL 并且现在你已经更改了依赖的 DLL 版本但没有再次构建 DLL 时，你会得到这个错误。请检查您是否有任何基于早期版本构建的组件。当我们构建任何 DLL 时，它自己在清单中的 DLL 添加所有依赖信息，以便它可以在需要时加载所有这些信息。因此，如果您删除该版本的 DLL，您需要重新编译所有组件，然后使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T07:04:11.257

此问题在较新版本的 MySql.Data 中也存在。只需从 App.config 文件更改版本：

```
<assemblyIdentity name="MySql.Data" publicKeyToken="c5687fc88969c44d" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-6.6.5.0" newVersion="6.6.5.0" />6.7.4.0 
```

到 oldVersion="6.6.5.0"

```
<assemblyIdentity name="MySql.Data" publicKeyToken="c5687fc88969c44d" culture="neutral" />
    <bindingRedirect oldVersion="6.6.5.0" newVersion="6.7.4.0" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-24T11:11:10.927

在某些情况下，它依赖于项目的 web.config 文件中的*bindingRedirect*属性。就我而言，我有两个版本：*oldVersion*和*newVersion*。我刚刚切换了这些值，它解决了问题。

警告：确保将新版本引用到 web.config 程序集的标记文件中，就像：<add assembly="$AssemblyName", Version=$NewVersion, Culture=neutral, PublicKeyToken=$KeyToken/>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-20T10:11:37.210

我遇到了同样的错误，文件绝对存在。如果您在错误旁边看到 SGEN，可以尝试以下操作：

在项目属性窗口中转到 Build 并在 Output 部分中转到 Generate serialization assembly 下拉菜单。将值 Auto 更改为 Off 并再次构建。

如果需要，您可以将其设置回自动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-02T16:29:53.827

我在新机器上的旧 asp.net 2.0 网站上有这个。就我而言，来自 GAC 的 MySql 程序集无法加载，因为它是 .Net 4.0。web.config 中的程序集重定向不起作用。我将其修复如下：

*   从nuget下载MySql.Web和MySql.Data的具体版本： [https ://www.nuget.org/api/v2/package/MySql.Web/6.5.4](https://www.nuget.org/api/v2/package/MySql.Web/6.5.4) [https://www.nuget.org/api/ v2/package/MySql.Data/6.5.4](https://www.nuget.org/api/v2/package/MySql.Data/6.5.4)

*   使用 zip 工具（例如 7zip）打开下载的包，然后将 .Net 2.0 程序集解压缩到故障 asp.net 站点的 bin 目录中。

# wpf - WPF MVVM 在父窗口顶部打开新窗口并将父窗口设置为子窗口的所有者

> ID：15914804
> 
> 赞同：1
> 
> 时间：2013-04-10T00:16:13.540
> 
> 标签：wpf, mvvm, childwindow, modalpopup

我的问题与您发布答案的以下文章有关。

参考：[使用 MVVM 在 wpf 的父窗口中打开子窗口](https://stackoverflow.com/questions/7446825/open-child-window-inside-a-parent-window-in-wpf-using-mvvm)

我正在使用 MVVM 框架和您在下一篇文章中提到的技术

[http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/](http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/)

这与我用来实现 WPF 应用程序的技术相同。我正在构建新的 WPF 应用程序并希望使用纯 MVVM，即没有代码。现在我想使用单击当前应用程序窗口的按钮在应用程序窗口顶部打开对话框窗口或子窗口。在该窗口中，我想在数据网格中显示一些数据，并希望提供工具来过滤网格中的这些数据以搜索网格中的特定数据，然后希望为用户提供一个功能，用户可以从网格中选择特定行并点击“确定”或“取消”。现在我的问题是如何在应用程序窗口顶部打开此窗口？我如何知道用户选择了哪个记录？一旦用户单击“确定”或“取消”，我希望该窗口消失并根据选择进行一些操作。

你有这个场景的样本吗？或者你能给这个场景提供任何样本吗？如果您愿意，我可以与您分享我的解决方案。

提前致谢。

米特什。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-10T11:23:35.540

在我看来，您刚刚起步，需要一些学习投入。尝试以下标记为答案的帖子中的链接：

[MVVM：从头到尾的教程？](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish)

# python - 从python中的变量解析元组数据的方法

> ID：15914805
> 
> 赞同：0
> 
> 时间：2013-04-10T00:16:21.353
> 
> 标签：python

我正在开发一个 API，它从我们的后端提取一些连接信息，并将其设置为变量。需要一些关于如何解析这些数据的建议，以便在我需要的时候得到我需要的东西。下面是我的变量中的输出示例。

```
(ArrayOfString){
   string[] = 
      "Starting Up
- AuthCode OK
- Found 4123 Devices
Done
OK",
      "007.blahname.com AB Publishing   1.1.1.1 CentOS Linux 5.0            
",
      "027503-blah  test blah   1.1.1.2 NetScaler OS    Network Gathering   1.1.1.1 22
",
      "028072-;alskdjf; Alpha Group 192.168.19.100  CentOS Linux 5  SSH 2.2.2.2 2022
",
      "028072-4alksgjasdfserver Alpha Group 192.168.19.101  CentOS Linux 5  SSH 2.3.4.5 2022
", 
```

不确定是否容易看到，但所有内容都是制表符分隔的。最后我需要的是，是否设置为列，所以我可以搜索设备名称（第 1 列），并读取关联的 IP、端口和连接方法（028072 示例中的第 7、8 和 6 列任何关于从哪里开始的
帮助/想法都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:23:39.880

您可以使用标准库中的[CSV 模块](http://docs.python.org/2/library/csv.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:19:10.190

我相信，您可以专门按制表符`.split('\t')`或按空格进行拆分。`.split()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:10:15.953

您向我们展示的内容类似于 C# 源代码。如果这就是您实际得到的，您需要首先从该源代码中解析字符串，然后您可以从这些字符串中解析列。

所以，首先：

```
r = re.compile(r'"(.*?)"', re.MULTILINE | re.DOTALL)
lines = r.findall(data) 
```

接下来，第一个字符串（其中包含一堆换行符的字符串）似乎是您想要跳过的某种标题信息。此外，每一行都有一个换行符。所以，让我们解决这两个问题：（我们可以在正则表达式中去掉换行符，但在这里也很容易做到。）

```
lines = [line.rstrip('\n') for line in lines[1:]] 
```

现在，每个字符串都可以通过制表符分成列，对吧？

```
values = [line.split('\t') for line in lines] 
```

而已。

作为替代方案，我们本可以完成`StringIO(''.join(lines))`并将其传递给`csv.reader(sio, delimiter='\t')`... 如果解析比 更复杂`split`，我可能会这样做。但在这种情况下，我认为它增加的复杂性多于节省的复杂性。

* * *

但是有一个问题。如果您已正确复制和粘贴，则这些字符串中*没有*制表符，它们有空格。而且，由于列本身具有内部空间，并且没有引用或转义，因此没有明确的方式来拆分它们。您可以编写一些启发式代码，通过猜测制表位来尝试重建制表符，假设任何 2 个或更多空格的运行都必须是制表符等，但这需要大量工作。

# c# - 此类中的静态布尔值和私有静态布尔值有什么区别？

> ID：15914808
> 
> 赞同：1
> 
> 时间：2013-04-10T00:16:45.337
> 
> 标签：c#, .net

考虑下面的`OutputToConsole`布尔值`class`。

下面两行代码有什么区别吗？

```
private static bool OutputToConsole = true; 
```

```
static bool OutputToConsole = true; 
```

它们似乎都具有相同的功能。

* * *

```
class Debug
{
    private static bool OutputToConsole = true;

    public static void Log(string Type, string URL, StringBuilder Parameters)
    {
        Write(Type + ":" + new string(' ', 9 - Type.Length) + URL + " { " +
            Parameters.ToString() + " }");
    }

    public static void Log(string Data)
    {
        Write("Response: " + Data);
    }

    private static void Write(string Output)
    {
        Trace.WriteLine(Output);
        if(OutputToConsole) Console.WriteLine(Output);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:19:48.270

类成员的默认访问修饰符`private`在 C# 中，所以如果你不写任何东西（比如`private`、或） `public`，那么如果你写的是 .`protected``internal``private`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:19:39.133

没有区别。如果没有显式设置访问修饰符，则默认为私有。

# c++ - 绑定 Texture2D 和 TextureCube

> ID：15914812
> 
> 赞同：3
> 
> 时间：2013-04-10T00:16:51.577
> 
> 标签：c++, directx, shader, hlsl, directx-11

我需要同时将 Texture2D 和 TextureCube 传递给我的像素着色器。

我之前发送了一组纹理，但发现我无法发送一个 textureCube 以及这个。

[这个问题](https://stackoverflow.com/questions/6027086/glsl-texturecube-and-texture2d-in-same-shader)提到了一种叫做绑定的东西，但我找不到更多关于这个的信息，并且想知道是否有人可以为我指出解决这个问题的方向。

谢谢你。

编辑----在尝试实施凯撒的建议后，以下代码会导致错误。尝试读取着色器时的第一次机会异常，问题线很简单

```
Texture2D texture04 : register( t0 ); 
```

在此之后导致崩溃：

```
D3DX11CompileFromFile("Data/Shaders/Effects.fx", 0, 0, "VS", "vs_4_0", 0, 0, 0, &VS_Buffer, 0, 0);
D3DX11CompileFromFile("Data/Shaders/Effects.fx", 0, 0, "PS", "ps_4_0", 0, 0, 0, &PS_Buffer, 0, 0);
d3dDevice_->CreateVertexShader(VS_Buffer->GetBufferPointer(), VS_Buffer->GetBufferSize(), NULL, &VS); 
```

ReEdit---- 重写了确切的代码......这次成功了，不知道为什么。非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T01:56:32.447

您可以像这样在着色器文件中注册多个纹理

```
Texture2D texture04 : register( t0 );    
TextureCube myCubeMap : register( t1 ); 
```

并指定注册表号`t0`，`t1`因此您使用该号码作为第一个参数`PSSetShaderResources`

当你想`t0`在你的 C++ 代码中设置时，你可以这样做

```
pImmediateContext->PSSetShaderResources( 0, 1, &(texture) ); 
```

当你想设置时，`t1`你就这样做

```
pImmediateContext->PSSetShaderResources( 1, 1, &(texture) ); 
```

# jquery - 数值的 HTML 输入字段模式。

> ID：15914815
> 
> 赞同：1
> 
> 时间：2013-04-10T00:17:05.420
> 
> 标签：jquery, html, regular-language

我有一个输入字段，用于从用户那里获取货币金额。我正在使用 jQuery [Money Mask](https://github.com/plentz/jquery-maskmoney)函数在用户的输入上放置一个掩码。例如，如果用户键入“100000”，它将在输入字段中显示为“$ 1,000.00”。问题是我为输入字段设置了一个模式，将其限制为仅数值。我需要修改这个正则表达式 ( `pattern="[0-9]*"`) 以便它接受货币字符串。非常感谢任何帮助！

**输入字段的代码：**

`<input name="rentPayment[paymentAmount]" id="paymentAmount" placeholder="0.00" value="" type="text" pattern="[0-9]*">`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:22:38.663

我不熟悉 JQuery Money Mask，但如果您只需要正则表达式，那么以下应该足以允许货币值。

```
pattern="[0-9$,.]*" - would allow 0-9 dollar sign, comma and period zero or more times. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:23:25.553

怎么样：

```
\$(\d(,?\d+)*)+(\.\d+)? 
```

这将支持：

> 324234.23423
> 美元 3,242,343
> 美元 3,242.4234
> 美元 3242 美元

但我不建议使用这种方法，因为它取决于用户的本地化，并且它还依赖于插件 - 这实际上只是*掩盖*了用户的输入。我更愿意像您所做的那样验证用户的字符串，并让掩码插件完成它的美化工作。因此，您需要在插件发生之前进行验证。

一个可行的解决方案是将验证字段留空 - Money Mask 将为您验证，因此在这种情况下您不需要外部模式来进行进一步验证。

# sql - 通过 REF CURSOR 与通过 SQL 查询检索数据以不同的顺序显示数据

> ID：15914818
> 
> 赞同：0
> 
> 时间：2013-04-10T00:17:15.517
> 
> 标签：sql, oracle

我在使用 Oracle 10g 数据库的查询中有这种奇怪的行为。

我调用包中包含的这个存储过程：

```
SQL> VAR RC REFCURSOR
SQL> EXEC MyPackage.MyProcedure('ATLANTICO', :RC )

PL/SQL procedure successfully completed.

SQL> PRINT RC
--prints the data
LURUACO
TUBARA
CGTO SALGAR
ALPES DE SEVILLA
MANATI
SOLEDAD
USIACURI
CGTO SANTA CRUZ
PONEDERA
CGTO JUAN MINA
PALMAR DE VARELA
PIOJO
SANTA LUCIA
BARRANQUILLA
POLONUEVO
REPELON
SANTO TOMAS
SUAN
JUAN DE ACOSTA
BARANOA
MALAMBO
PUERTO COLOMBIA
SABANALARGA
CGTO PATILLA
GALAPA
SABANAGRANDE
CAMPO DE LA CRUZ
EDUARDO SANTOS (LA PLAYA) 
```

这是包中存储过程的定义：

```
PROCEDURE MyProcedure(iDEPTO IN VARCHAR2,oCURSOR OUT MYREFCUR) IS
BEGIN
OPEN oCURSOR FOR
select distinct city from MyTable where state=iDEPTO;
END; 
```

如果我在包之外执行查询，这就是我得到的：

```
SQL> select distinct city from MyTable where state='ATLANTICO';

--data retrieved
ALPES DE SEVILLA
BARANOA
BARRANQUILLA
CAMPO DE LA CRUZ
CGTO JUAN MINA
CGTO PATILLA
CGTO SALGAR
CGTO SANTA CRUZ
EDUARDO SANTOS (LA PLAYA)
GALAPA
JUAN DE ACOSTA
LURUACO
MALAMBO
MANATI
PALMAR DE VARELA
PIOJO
POLONUEVO
PONEDERA
PUERTO COLOMBIA
REPELON
SABANAGRANDE
SABANALARGA
SANTA LUCIA
SANTO TOMAS
SOLEDAD
SUAN
TUBARA
USIACURI
28 rows selected. 
```

如您所见，我既没有在存储过程中也没有在 SQL 查询中应用排序。那么，为什么游标返回无序的数据，使用相同的查询呢？这种行为有“科学”的解释吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T00:22:22.487

这两个查询都没有`ORDER BY`子句，因此 Oracle 碰巧返回数据的顺序是任意的。Oracle 以任意顺序返回数据是完全有效的。并且无法保证您会随着时间的推移获得相同的订单。如果您关心数据返回的顺序，则必须包含一个`ORDER BY`子句。

进一步了解细节，我敢打赌，如果您查看这两个查询的查询计划，您会发现 Oracle 正在采用不同的方法来删除重复的行。在使用绑定变量的查询中，我的猜测是它正在做一个哈希。在使用文字的查询中，我的猜测是它正在进行排序。当然，这只是一个猜测。您需要发布查询计划以供任何人确定。

# ruby - 将字符串附加到 Ruby 中的现有 gzipfile

> ID：15914819
> 
> 赞同：1
> 
> 时间：2013-04-10T00:17:21.267
> 
> 标签：ruby, gzip

我正在尝试读取一个 gzip 文件并将 gzip 文件的一部分（它是字符串）附加到另一个现有的 gzip 文件中。字符串的大小约为 3000 行。我将不得不在红宝石中多次（〜10000次）这样做。这样做最有效的方法是什么？zlib 库不支持追加和使用反引号 ( `gzip -c orig_gzip >> gzip.gz`) 似乎太慢了。结果文件应该是一个巨大的文本文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:56:25.273

目前尚不清楚您在寻找什么。如果您尝试将多个文件合并到一个 gzip 存档中，则无法到达那里。根据[gzip 文档](http://www.gzip.org/#faq16)：

> gzip 可以将多个文件压缩到一个存档中吗？
> 
> 不是直接的。您可以先创建一个 tar 文件，然后将其压缩： 对于 GNU tar： `gtar cvzf file.tar.gz filenames` 对于任何 tar： `tar cvf - filenames | gzip > file.tar.gz`
> 
> 或者，您可以使用 zip、PowerArchiver 6.1、7-zip 或 Winzip。zip 格式允许随机访问存档中的任何文件，但 tar.gz 格式通常提供更好的压缩率。

随着您将添加到存档的次数，扩展源然后将字符串附加到单个文件，然后按需压缩或循环压缩更有意义。

您将有一个大文件，但压缩时间会很快。

* * *

如果您想在 gzip 文件中累积数据而不是单独的文件而不是全部展开，则可以从 Ruby 追加到现有的 gzip 文件，但是您必须`"a"`在打开原始 .gzip 时指定（“追加”）模式文件。否则会导致您的原件被覆盖：

```
require 'zlib'

File.open('main.gz', 'a') do |main_gz_io|
  Zlib::GzipWriter.wrap(main_gz_io) do |main_gz|
    5.times do
      print '.'
      main_gz.puts Time.now.to_s
      sleep 1
    end
  end
end
puts 'done'
puts 'viewing output:'
puts '---------------'
puts `gunzip -c main.gz` 
```

其中，运行时，输出：

```
.....done
viewing output:
---------------
2013-04-10 12:06:34 -0700
2013-04-10 12:06:35 -0700
2013-04-10 12:06:36 -0700
2013-04-10 12:06:37 -0700
2013-04-10 12:06:38 -0700 
```

运行几次，你会看到输出增长。

很难说这段代码是否足够快满足您的需求。这个例子人为地拖着脚每秒写一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:36:22.680

听起来您附加的数据足够长，足以将 3000 行简单地压缩为 gzip 流并将其附加到现有的 gzip 流中。gzip 具有这样的属性，即两个有效的 gzip 流连接起来也是一个有效的 gzip 流，并且 gzip 流解压缩为两个原始 gzip 流的解压缩的连接。

我不明白“`(gzip -c orig_gzip >> gzip.gz)`似乎太慢了”。那将是最快的方法。如果您不喜欢压缩所花费的时间，您可以降低压缩级别，例如`gzip -1`.

当使用低级函数时，zlib 库实际上支持很多。[您可以在zlib 发行版的](http://zlib.net/)[`examples/`目录](https://github.com/madler/zlib/tree/master/examples)中查看附加 gzip 的高级示例。您可以通过首先解压缩现有的 gzip 流并在前一个流停止的地方进行压缩 来查看，就压缩而言，它比简单的串联更有效地附加。并提供一种有效且健壮的方式将短消息附加到 gzip 流中。[`gzappend.c`](https://github.com/madler/zlib/blob/master/examples/gzappend.c)[`gzlog.h`](https://github.com/madler/zlib/blob/master/examples/gzlog.h)[`gzlog.c`](https://github.com/madler/zlib/blob/master/examples/gzlog.c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T14:07:03.847

您需要以二进制模式`b`（`a`

```
file = File.open('path-to-file.csv.gz', 'ab')
gz = Zlib::GzipWriter.new(f)
gz.write("new,row,csv\n")
gz.close 
```

如果您在`w`模式下打开文件，您将覆盖文件的内容。检查文档以获取打开模式的完整描述[http://ruby-doc.org/core-2.5.3/IO.html#method-c-new](http://ruby-doc.org/core-2.5.3/IO.html#method-c-new)

# python - 如何使用python在couchdb中添加过滤功能？

> ID：15914820
> 
> 赞同：1
> 
> 时间：2013-04-10T00:17:21.247
> 
> 标签：python, couchdb

我知道我可以使用 couchdb.ViewDefinition 为数据库创建视图。是否有类似的东西来创建更改过滤器功能，或者我可以只使用过滤器字段创建设计文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:20:31.077

目前没有这样的东西，除非您将设计文档作为常规操作进行操作，例如将 python 函数转储到源代码并将其分配给 ddoc 过滤器字段。

您可以尝试应用[issue 186](http://code.google.com/p/couchdb-python/issues/detail?id=186)中的补丁：它以类似于当前视图的方式提供对定义 show/list/update/filter/validate_doc_update 函数的支持。

例如：

```
from couchdb import design, mapping

class Post(mapping.Document):

   by_author = design.FilterFunction('posts', 'by_name', '''
function(doc, req){
  if (req.query.author){
    return doc.author === req.query.author;
  }
  throw({'invalid_query': 'author name was not specified'});
}
''')

if __name__ == '__main__:
    design.sync_docs(db, [Post]) 
```

欢迎反馈和错误（：

# database-connection - Oracle 10g TNS 监听器工作但不工作

> ID：15914823
> 
> 赞同：0
> 
> 时间：2013-04-10T00:17:42.960
> 
> 标签：database-connection, oracle-xe

我的应用程序无法连接到我的本地 Oracle 10g 数据库 (Windows 7)，但我无法确定配置的哪一方面是错误的。我可以使用 sqlplus 模拟连接问题。

以下作品：

```
sqlplus <username>/<password> 
```

但是，如果我附加 TNS 别名，它将不起作用：

```
sqlplus <username>/<password>@XE 
```

它似乎连接但随后挂起，从未给我命令提示符。如果我执行“tnsping xe”，似乎 TNS 信息都配置正确。如何诊断问题所在？我在日志、事件查看器等中四处寻找，但仍然没有清晰的画面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T14:50:40.240

尝试这个：

sqlplus 用户/密码@//IP:端口/sid

端口通常是 1521，具体取决于您的安装。

例如 sqlplus 用户/密码@//127.0.0.1:1521/XE

# jquery - 如何创建自定义谷歌地图（api v3）标记信息窗口（在特定示例的上下文中）

> ID：15914825
> 
> 赞同：-1
> 
> 时间：2013-04-10T00:17:53.127
> 
> 标签：jquery, google-maps, google-maps-api-3, expressionengine, infowindow

1）所以有[一个很好的例子](http://www.geocodezip.com/v3_MW_example_categories.html)，通过单击复选框来显示标记组，我想通过自定义标记信息窗口来扩展它。下面是此示例中的代码 - 它非常适合切换标记，但具有无样式的信息窗口。我已经对其进行了一些额外的自定义。即，对地图进行样式化并增加响应性，以便在更改浏览器窗口时标记保持居中：

```
//<![CDATA[
  // this variable will collect the html which will eventually be placed in the side_bar 
  var side_bar_html = ""; 

  var gmarkers = [];
  var gicons = [];
  var map = null;

 var infowindow = new google.maps.InfoWindow(
 { 
   size: new google.maps.Size(150,50)
  });

gicons["red"] = new google.maps.MarkerImage("mapIcons/marker_red.png",
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0,0),
  // The anchor for this image is at 9,34.
   new google.maps.Point(9, 34));
// Marker sizes are expressed as a Size of X,Y
// where the origin of the image (0,0) is located
// in the top left of the image.

// Origins, anchor positions and coordinates of the marker
// increase in the X direction to the right and in
// the Y direction down.

var iconImage = new google.maps.MarkerImage('mapIcons/marker_red.png',
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0,0),
  // The anchor for this image is at 9,34.
  new google.maps.Point(9, 34));
var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
  // The shadow image is larger in the horizontal dimension
  // while the position and offset are the same as for the main image.
  new google.maps.Size(37, 34),
  new google.maps.Point(0,0),
  new google.maps.Point(9, 34));
  // Shapes define the clickable region of the icon.
  // The type defines an HTML &lt;area&gt; element 'poly' which
  // traces out a polygon as a series of X,Y points. The final
  // coordinate closes the poly by connecting to the first
  // coordinate.
var iconShape = {
  coord:  [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
  type: 'poly'
};

function getMarkerImage(iconColor) {
   if ((typeof(iconColor)=="undefined") || (iconColor==null)) { 
  iconColor = "red"; 
}
if (!gicons[iconColor]) {
  gicons[iconColor] = new google.maps.MarkerImage("mapIcons/marker_"+ iconColor +".png",
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0,0),
  // The anchor for this image is at 6,20.
  new google.maps.Point(9, 34));
 } 
 return gicons[iconColor];

 }

function category2color(category) {
   var color = "red";
   switch(category) {
     case "theatre": color = "blue";
            break;
     case "golf":    color = "green";
            break;
     case "info":    color = "yellow";
                break;
 default:   color = "red";
            break;
   }
   return color;
}

  gicons["theatre"] = getMarkerImage(category2color("theatre"));
  gicons["golf"] = getMarkerImage(category2color("golf"));
  gicons["info"] = getMarkerImage(category2color("info"));

  // A function to create the marker and set up the event window
function createMarker(latlng,name,html,category) {
var contentString = html;
var marker = new google.maps.Marker({
    position: latlng,
    icon: gicons[category],
    shadow: iconShadow,
    map: map,
    title: name,
    zIndex: Math.round(latlng.lat()*-100000)<<5
    });
    // === Store the category and name info as a marker properties ===
    marker.mycategory = category;                                 
    marker.myname = name;
    gmarkers.push(marker);

 google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString); 
    infowindow.open(map,marker);
    });
 }

  // == shows all markers of a particular category, and ensures the checkbox is checked ==
  function show(category) {
    for (var i=0; i<gmarkers.length; i++) {
      if (gmarkers[i].mycategory == category) {
        gmarkers[i].setVisible(true);
      }
    }
    // == check the checkbox ==
    document.getElementById(category+"box").checked = true;
  }

  // == hides all markers of a particular category, and ensures the checkbox is cleared ==
  function hide(category) {
    for (var i=0; i<gmarkers.length; i++) {
      if (gmarkers[i].mycategory == category) {
        gmarkers[i].setVisible(false);
      }
    }
    // == clear the checkbox ==
    document.getElementById(category+"box").checked = false;
    // == close the info window, in case its open on a marker that we just hid
    infowindow.close();
  }

  // == a checkbox has been clicked ==
  function boxclick(box,category) {
    if (box.checked) {
      show(category);
    } else {
      hide(category);
    }
    // == rebuild the side bar
    makeSidebar();
  }

  function myclick(i) {
    google.maps.event.trigger(gmarkers[i],"click");
  }

  // == rebuilds the sidebar to match the markers currently displayed ==
  function makeSidebar() {
    var html = "";
    for (var i=0; i<gmarkers.length; i++) {
      if (gmarkers[i].getVisible()) {
        html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].myname + '<\/a><br>';
      }
    }
    document.getElementById("side_bar").innerHTML = html;
  }

function initialize() {

var styles = [
{
"featureType": "landscape.natural",
"elementType": "geometry.fill",
"stylers": [
  { "color": "#d5d0c8" }
]
},{
"featureType": "water",
"stylers": [
  { "invert_lightness": true },
  { "visibility": "simplified" }
]
},{
"featureType": "road.local",
"elementType": "geometry.fill",
"stylers": [
  { "color": "#c4bfb5" },
  { "visibility": "on" }
]
},{
"featureType": "road.arterial",
"elementType": "geometry",
"stylers": [
  { "color": "#ffffff" },
  { "visibility": "simplified" }
]
},{
"featureType": "road.local",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#c4bfb5" }
]
},{
"featureType": "road.local",
"elementType": "labels.text.fill",
"stylers": [
  { "color": "#ffffff" }
]
},{
"featureType": "road.highway",
"elementType": "geometry",
"stylers": [
  { "color": "#ffffff" },
  { "visibility": "on" }
]
},{
"featureType": "road.highway",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#ffffff" }
]
},{
"featureType": "road.arterial",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#ffffff" }
]
},{
"featureType": "landscape.natural.terrain",
"elementType": "geometry",
"stylers": [
  { "color": "#c9c4b4" }
]
},{
"featureType": "poi.park",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#808080" },
  { "visibility": "off" }
]
},{
"featureType": "landscape.man_made",
"stylers": [
  { "visibility": "off" }
]
}
];

// Create a new StyledMapType object, passing it the array of styles,
// as well as the name to be displayed on the map type control.
var styledMap = new google.maps.StyledMapType(styles,
 {name: "Styled Map"});

var myOptions = {
  zoom: 11,
  center: new google.maps.LatLng(53.8363,-3.0377),
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"), myOptions);

google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
    });

// Ensure the map stays centered when we resize the browser
google.maps.event.addDomListener(window, "resize", function() {
    var center = map.getCenter();
    google.maps.event.trigger(map, "resize");
    map.setCenter(center); 
});    

//Associate the styled map with the MapTypeId and set it to display.
map.mapTypes.set('map_style', styledMap);
map.setMapTypeId('map_style');

  // Read the data
  downloadUrl("categories.xml", function(doc) {
var xml = xmlParse(doc);
var markers = xml.documentElement.getElementsByTagName("marker");

    for (var i = 0; i < markers.length; i++) {
      // obtain the attribues of each marker
      var lat = parseFloat(markers[i].getAttribute("lat"));
      var lng = parseFloat(markers[i].getAttribute("lng"));
      var point = new google.maps.LatLng(lat,lng);
      var address = markers[i].getAttribute("address");
      var name = markers[i].getAttribute("name");
      var html = "<b>"+name+"<\/b><p>"+address;
      var category = markers[i].getAttribute("category");
      // create the marker
      var marker = createMarker(point,name,html,category);
    }

    // == show or hide the categories initially ==
    show("theatre");
    hide("golf");
    hide("info");
    // == create the initial sidebar ==
    makeSidebar();
  });
}

// This Javascript is based on code provided by the
// Community Church Javascript Team
// http://www.bisphamchurch.org.uk/   
// http://econym.org.uk/gmap/
// from the v2 tutorial page at:
// http://econym.org.uk/gmap/example_categories.htm
//]]> 
```

这是 categories.xml 的内容：

```
<markers>
      <marker name="Grand Theatre" address="33 Church St, Blackpool, Lancashire, FY1 1HT" lng="-3.053102" lat="53.817260" category="theatre" />
      <marker name="Claremont Theatre Club" address="Burwood Dr, Blackpool, Lancashire, FY3 8NS" lng="-3.049690" lat="53.829649" category="theatre" />
       ETC...
</markers> 
```

[2）我在这里](https://objectivehtml.com/google-maps/examples/custom-map-styles)找到了以下非常好的样式信息窗口的工作示例。我只是不知道如何将该代码与上面的 js 代码一起使用。这是此特定示例生成的 javascript。如果有更好的方法可以做到这一点，并且它可以与上面#1 的代码一起使用，我对此完全开放。与此示例使用的 ExpressionEngine CMS 方法没有任何关系。

```
var options = {
        alignBottom: true,
        boxClass: "ui-infobox-dark",
        boxStyle: {width:'250px'},
                closeBoxMargin: "",
                closeBoxURL: "white-close-button.png",
                disableAutoPan: false,
                enableEventPropagation: false,
                infoBoxClearance: new google.maps.Size(0, 0),
                isHidden: false,
                maxWidth: 0,
                pane: "floatPane",
                pixelOffset: new google.maps.Size(0, 0),
                zIndex: null
            };

            var infowindow  = new InfoBox(options);

            var obj = map7_markers[index];      

            map7_windows.push(infowindow);

            google.maps.event.addListener(obj, 'click', function(e) {
                obj.position = e.latLng;                            
                obj.getPosition = function() {
                    return e.latLng;
                }                   
                    for(var i = 0; i < map7_windows.length; i++) {
                        map7_windows[i].close();
                    }
                infowindow.setPosition(e.latLng);
                infowindow.open(map7_map, obj);

            });

            map7_window = infowindow; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:10:09.417

您可以在此处查看一个工作示例。[http://vibe9design.com/seylynn_map/](http://vibe9design.com/seylynn_map/)

# c# - 我的 google+ 页面（.Net）中的简单插入（时刻）错误

> ID：15914826
> 
> 赞同：1
> 
> 时间：2013-04-10T00:17:56.030
> 
> 标签：c#, vb.net, api, google-plus

晚安，

我尝试将参数添加为注释，但无济于事。我得到了以下代码，但是现在错误是...

```
ProtocolException as caught
Error occurred while sending a direct message or getting the response. 
```

有人可以帮助我，因为我几乎认为这是不可能的。

```
Public Shared Function PostPlus2(sMsg As String) As Boolean
        Try

            Dim sPath_Absolut As String = HttpContext.Current.Server.MapPath("~/funcoes/")

            Dim ServiceAccountId As String = "****************************.apps.googleusercontent.com"
            Dim ServiceAccountUser As String = "***************************@developer.gserviceaccount.com"
            Dim Certificado As String = sPath_Absolut + "Certificado\privatekey.p12"

            Dim oCertificate As X509Certificate2 = New X509Certificate2(Certificado, "notasecret", X509KeyStorageFlags.Exportable) 'Or X509KeyStorageFlags.MachineKeySet

            'Dim GooAuthServer As DotNetOpenAuth.OAuth2.AuthorizationServerDescription = GoogleAuthenticationServer.Description
            'GooAuthServer.AuthorizationEndpoint = New Uri(GooAuthServer.AuthorizationEndpoint.AbsoluteUri + "?" + "request_visible_actions=http://schemas.google.com/AddActivity" + "&" + "access_type=offline")
            'Dim oClient As New AssertionFlowClient(GooAuthServer, oCertificate) With

            Dim oClient As New AssertionFlowClient(GoogleAuthenticationServer.Description, oCertificate) With
            {
            .ServiceAccountId = ServiceAccountUser,
            .ServiceAccountUser = "************@gmail.com",
            .Scope = Plus.v1.PlusService.Scopes.PlusMe.GetStringValue()
                                }

            Dim oAuth As New OAuth2Authenticator(Of AssertionFlowClient)(oClient, AddressOf AssertionFlowClient.GetState)
            Dim oInitializer As New BaseClientService.Initializer() With
            {
            .Authenticator = oAuth
            }

            Dim oPlusServ As New Plus.v1.PlusService(oInitializer)

            Dim body As New Plus.v1.Data.Moment()
            Dim target As New Plus.v1.Data.ItemScope()
            target.Id = "4"
            target.Image = "http://www.google.com/s2/static/images/GoogleyEyes.png"
            target.Type = "http://schemas.google.com/AddActivity"
            target.Description = "teste description"
            target.Name = "teste name"
            target.Url = "https://developers.google.com/+/web/snippet/examples/thing"

            body.Target = target
            body.Type = "http://schemas.google.com/AddActivity"

            Dim insert As New Plus.v1.MomentsResource.InsertRequest(
                    oPlusServ,
                    body,
                    "me",
                    Plus.v1.MomentsResource.Collection.Vault)

            insert.Fetch()
            'Dim wrote As Plus.v1.Data.Moment = insert.Fetch()

            Return True
        Catch ex As Exception
            Return False
        End Try
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:43:35.427

为了能够编写 AppActivity，您需要在配置 Google+ 登录按钮时设置 request-visible-actions 参数。此参数指示您打算编写哪些 AppActivityType。[您可以在https://developers.google.com/+/web/app-activities/?hl=en](https://developers.google.com/+/web/app-activities/?hl=en)或观看此 Google+ 开发者直播剧集了解更多信息： [http ://www.youtube.com/watch?v= cQC_EanIaUw#t=6m46s](http://www.youtube.com/watch?v=cQC_EanIaUw#t=6m46s)。

# api - 使用 Foursquare API，可以验证谁验证了场地吗？

> ID：15914831
> 
> 赞同：1
> 
> 时间：2013-04-10T00:18:31.313
> 
> 标签：api, foursquare

如果用户通过 oauth2 将他们的foursquare 帐户链接到我的网站，那么当我从foursquare API 中提取一个场所时，我是否能够测试当前用户是否是验证该场所的同一用户（假设该场所已经过验证）？

或者...是否可以使用foursquare API 来知道谁验证了一个场地？

我正在尝试建立一种服务，场地所有者/经理可以使用它来帮助他们的业务。但是，我需要一种方法来验证他们是场地的所有者/管理者。我相信一个非常有效的方法是强迫他们链接他们的foursquare账户，然后测试他们的账户是否是验证场地的账户。

如果这不可能，执行此操作的标准方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:56:51.740

与其测试场地是否由当前 OAuth 用户管理，不如获取当前用户管理的所有场地更有意义？您可以通过我们的[场所/托管](https://developer.foursquare.com/docs/venues/managed)端点来做到这一点。

同样，一般而言，您要求用户进行 OAuth 的方法对于这些应用程序风格是正确且非常标准的。我们在[商家平台](https://developer.foursquare.com/overview/merchants)上的信息应该能够帮助您。

# ruby-on-rails - Rails：如何在 RESTful 路由中使用 RegExp 而不是硬编码的控制器名称？

> ID：15914832
> 
> 赞同：0
> 
> 时间：2013-04-10T00:18:36.330
> 
> 标签：ruby-on-rails, routing, ruby-on-rails-3.2

默认情况下，Rails 提供两种设置 RESTful 路由的方法（让`:id`segment 是整数约束`/[0-9]/+`）：

```
 1\. site.com/users/10/homes/15
 2\. site.com/user/homes/15 
```

**第一个变体：**

您的控制器：`UsersController`和`HomesController`

您的路线：

```
resources(:users) do  #=> plural, so the url path is /users/10, :id segment possible
    resources(:homes) #=> plural, so the url path is /homes/10, :id segment possible
end 
```

**第二种变体：**

您的控制器：`UsersController`和`HomesController`

您的路线：

```
resource(:user) do    #=> singular, so the url path is /user, no :id segment
    resources(:homes) #=> plural, so the url path is /homes/10, :id segment possible
end 
```

但是这些 URL 看起来不太好。我希望他们像这样：

```
site.com/bugsbunny123/homeinny 
```

第一个和第二个段是一个正则表达式，但仍然连接到控制器`Users`并且`Homes`是 RESTful。我知道如何使用 Non-Resourceful Routes 来实现它。但是，使用,`:via => POST`等将每个映射到控制器的 RESTful 方法是非常乏味的。`:via => PUT``:except`

我想要这样的东西：

```
:users => /[A-Za-z0-9]+/
resource(:users) do ... 
```

或像这样：

```
resource(/[A-Za-z0-9]+/ => :users) do ... 
```

这个想法是使用正则表达式用户名，而不是`/users/10`默认 RESTful 路由器现在提供的硬编码。

是否有可能仍然使用它来实现它`resource(:controller)`？或者我必须使用非资源路由？

# c++ - 无法在 C++ 中读取文本文件

> ID：15914839
> 
> 赞同：1
> 
> 时间：2013-04-10T00:19:36.257
> 
> 标签：c++, text-files, fstream, getline

嗨，我的大学班级被分配了一项小组作业，阅读一个多行文本文件，去掉最低分，然后从剩余数​​字中取平均分。当提示输入文本文件的文件名时，我遇到了问题。虽然我输入正确，但它不会加载。我将文件放在程序所在的同一文件夹中。请帮忙：

```
#include<iostream>
#include<fstream>
#include<string>
using namespace std;
const int NROWS =10;
const int NCOLS =10;

void theProgram();
//Function loads immediately upon opening the program and describes the purpose of the program
//and its functionality.

int ReadTxtFile(ifstream &file, string name[], double test[][NCOLS], int ncolUsed=3);
//Function reads data from a tab delimited file, whose first column is a string and the others are 
//double or int. The function returns the number of rows read. The requires three parameters to be 
//passed to it. The fourth parameter is has a default value of 3.

void outPutData(string header, string name[], double test[][NCOLS], int nDataPts, int ncolUsed=3);
//The function prints out the data read from the file. The function requires four parameters to be 
//passed to it. Does not return any value.

int main(){

   string name[NROWS];
   string header, filename;
   double test[NROWS][NCOLS];
   char next;
   int nDataRows;
   ifstream file; //Declares file as an input file stream 

   theProgram(); //Invokes the function that displays the program information

   cout<<"Please give me the filenames containing the test scores\n";
   getline(cin,filename);

//Opens the file and checks if the file has opened correctly
   file.open(filename);
   if(file.fail()){
     cout<<"Failed to open input file "<<filename<<endl;
     exit(1);
   }

   getline(file,header);// Reads the column headers as a string
   nDataRows=ReadTxtFile(file, name, test); // Calls the function to read the file
   file.close();

   cout<< "Number of records in the file is "<<nDataRows<<endl;  
   outPutData(header,name, test, nDataRows); //Calls the function to output the data read from the file

   cin>>next;
} //End of main

void theProgram(){
    cout<<"************************************************************************\n";
    cout<<"* ******************************************************************** *\n";
    cout<<"* *This program will help the faculty to analyze the test scores and * *\n";
    cout<<"* *assign grades. It reads a tab delimited file that contains the    * *\n"; 
    cout<<"* *raw score for different tests and drops the lowest score. It then * *\n";
    cout<<"* *calcluates the average percentage of the remaining test scores.   * *\n";
    cout<<"* *Based on the average, the program then assigns a letter grade.    * *\n";
    cout<<"* ******************************************************************** *\n";
    cout<<"************************************************************************\n";
}

void outPutData( string header, string name[], double test[][NCOLS], int nDataRows, int ncolUsed)
{
   cout<<"\t"<<header<<endl;
   for(int i=0; i<nDataRows; i++){
       cout<<i<<"\t"<<name[i]<<"\t";
       for(int j=0; j<ncolUsed; j++){
           cout<<test[i][j]<<"\t";
       }
       cout<<endl;
    }
char next; 
cin>>next;
} 

int ReadTxtFile(ifstream &file, string name[], double test[][NCOLS], int ncolUsed)
{
    int i=0;
    char next;
    while (!file.eof()) //repeat until end of file
    {
        file>>name[i];
        for(int j=0; j<ncolUsed; j++){
            file>>test[i][j];
        }
        file.get(next);
        if(!file.eof()){
            file.putback(next);
        }
        i++;
    }
    return(i-1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:21:20.860

在 C++11 之前，`file.open()`接受 a `char*`，它是包含要打开的文件名的 C 字符串，但是`filename`是`string`类型，您需要执行以下操作：

```
 file.open(filename.c_str()); 
```

为了从文件中读取。

**编辑**：感谢 Benjamin Lindley，您可以`open()`在 C++11 中传递字符串。您可能需要检查从您的代码生成的 exe 文件是否可以访问您的文件，它们可能不在同一个目录中。

# oracle11g - oracle 11g 中的 TO_CHAR 和 IF 语句

> ID：15914846
> 
> 赞同：1
> 
> 时间：2013-04-10T00:20:05.447
> 
> 标签：oracle11g

我试图存储这一天，然后在 if 语句中使用它，但它不起作用....

它跳过如果全部

```
 select TO_CHAR(sysdate, 'DAY')  into v_today from dual ; // save the day to v_today

  if v_today <> 'SUNDAY'  or  v_today <> 'SATURDAY'// check for the vlaue of v_today
  then
         DBMS_OUTPUT.PUT_LINE('the office is open') ;
  else
         DBMS_OUTPUT.PUT_LINE('the  office is close of the weekend') ; 
  end if; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:29:06.543

首先，您几乎可以肯定要使用格式掩码`fmDAY`而不仅仅是`DAY`. `DAY`总是返回一个 9 个字符的字符串（假设会话设置为使用英语）。如果这一天不是星期三，它将用空格填充。`fmDAY`格式掩码删除空格填充。

其次，您的 IF 条件几乎可以肯定是不正确的。如果`v_today`不是`NULL`，则`IF`条件将评估为`TRUE`。例如，如果`v_today`是，将评估为 TRUE。并且由于评估为，因此条件评估为。我希望你想要`SATURDAY``v_today <> 'SUNDAY'``TRUE or FALSE``TRUE``IF``TRUE`

```
IF( v_today IN ('SATURDAY', 'SUNDAY' )) 
```

或者

```
IF( v_today != 'SATURDAY' and v_today != 'SUNDAY' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T04:16:35.733

```
CREATE OR REPLACE PROCEDURE P_1
IS
    v_today varchar2(20);
  BEGIN
     SELECT TO_CHAR(SYSDATE,'DAY') INTO v_today FROM DUAL;
        if (v_today NOT IN('SATURDAY','SUNDAY')) THEN
                DBMS_OUTPUT.PUT_LINE('the office is open') ;
        ELSE
               DBMS_OUTPUT.PUT_LINE('the  office is close of the weekend') ;
 END IF;
 END; 
```

执行此过程 SET SERVEROUTPUT ON EXECUTE P_1;

# java - Linux - Java - 虚拟机初始化期间发生错误

> ID：15914849
> 
> 赞同：1
> 
> 时间：2013-04-10T00:20:19.467
> 
> 标签：java, linux, jvm

我已经解决了类似的问题，但没有一个给出正确的工作答案 wrt 我的设置（其他问题的答案适用于 Windows 机器，64 位）。

我有以下设置：

```
$ 
$ uname -a
Linux localhost.localdomain 3.8.4-102.fc17.i686 #1 SMP Sun Mar 24 13:20:55 UTC 2013 i686 i686 i386 GNU/Linux
$ 
$ java -version
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) Server VM (build 23.7-b01, mixed mode)
$ 
$ javac -version
javac 1.7.0_17
$ 
$ 
$ free -m
             total       used       free     shared    buffers     cached
Mem:          3520       3435         85          0        472       1531
-/+ buffers/cache:       1431       2089
Swap:         5567          0       5567
$ 
$ 
$ echo $JAVA_HOME 
/usr/java/jdk1.7.0_17
$ 
$ echo $PATH 
/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/usr/java/jdk1.7.0_17/bin
$ 
```

尝试运行 java 程序时出现以下错误！

```
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

我需要升级`64-bit OS`并安装`64-bit JVM`吗？或者我应该用更多升级我的硬件`RAM`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:32:41.740

您需要检查是否定义了任何 JAVA_OPTS: `echo $JAVA_OPTS`。您是否指定任何堆大小？

首先，您可以尝试为您的机器分配更多 RAM。

其次，您可以尝试使用指定的 MaxHeapSize 和 Xmx/Xms 运行您的 java 命令。查看Oracle 文档中的[Tuning the JVM heap size。](http://docs.oracle.com/cd/E15523_01/web.1111/e13814/jvm_tuning.htm#i1110833)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:35:51.723

查看内存，您只有 85mb 可用。您可能希望在启动程序之前释放一些内存。此外，尝试使用以下命令行选项运行它 `-Xmx512m`：`-XX:MaxHeapSize=256m`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T01:36:58.547

请访问[Running java with JAVA_OPTS env variable](https://stackoverflow.com/questions/2011311/running-java-with-java-opts-env-variable)，HEX 规定您应该设置 _JAVA_OPTIONS 变量。

# google-chrome - 禁用 Chrome 开发者工具 ⌘-[0-9] 键盘快捷键？

> ID：15914851
> 
> 赞同：4
> 
> 时间：2013-04-10T00:20:26.263
> 
> 标签：google-chrome, google-chrome-devtools

`⌘-[0-9]`是否可以在 Chrome 的开发者工具中禁用键盘快捷键？当我打算切换选项卡时意外点击它们是令人沮丧的（例如，当我`⌘-1`因为我想切换到第一个选项卡而点击时，而是被带到开发人员工具的“元素”面板时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:45:15.973

更新：此功能已[登陆 Chrome 28](https://code.google.com/p/chromium/issues/detail?id=174606#c15)。

1.  打开开发工具。
2.  点击右下角的齿轮图标
3.  选择常规选项卡
4.  使用“启用 Ctrl + 1-9 快捷方式切换面板”之前的复选框来切换首选项。此选项位于“设置”->“常规”选项卡的右下角。

* * *

*上一个答案，它显示了如何轻松更改开发工具的源代码。*

更改快捷方式没有偏好或标志，因此您要么必须编辑源代码并自己构建 Chrome，*要么*更改`resources.pak`.

1.  首先，**定位`resources.pak`**. 此存档（[此处](https://groups.google.com/a/chromium.org/d/msg/chromium-dev/agGjTt4Dmcw/uekdoo_cAxkJ)描述的格式）包含几个静态文件。`resources.pak`位于以下目录中：

    *   **OS X 10.7.3**：`/Applications/Google Chrome.app/Contents/Versions/26.0.1410.65/Google Chrome Framework.framework/Resources/resources.pak`
    *   **Linux**（ArchLinux）：`/usr/lib/chromium/resources.pak`
    *   **视窗XP**：`%AppData%\..\Local Settings\Application Data\Google\Chrome\26.0.1410.65\resources.pak`
    *   **Windows Vista/7/8**：`%LocalAppData%\Google\Chrome\26.0.1410.65\resources.pak`

    如果您无法在指定路径找到文件，请使用您的常识。调整版本，例如 Chrome/Chromium。找到 Chrome 可执行文件，并`resources.pak`在它附近找到。

2.  **创建resources.pak 的备份以防万一。**

3.  打开`resources.pak`（使用`vim`或任何其他十六进制编辑器）。
4.  找到`_keyDown:`，然后向前移动几行（见下文）。更改`!`为`~`。这是做什么的？对于所有给定的输入，`~value`将返回一个负数，这是真实的，因此`_keyDown:`函数总是提前结束。

我已`Ctrl``*digit*`按照以下步骤确认在 Linux/Mac/Windows 上的 Chrome/Chromium 中禁用了该快捷方式。

## 会出什么问题？

*   您丢弃了一些字节，例如使用记事本保存`resources.pak`.
*   您没有编辑一个字节，而是添加/删除了一个字节。请记住，资源的大小是固定的！

在任何这些情况下，开发人员工具都会显示为“未找到”。Chrome 本身仍然可用：可以浏览网站。如果您忘记在第 3 步进行备份，重新安装 Chrome 将解决所有问题。

* * *

供以后参考，部分源代码（源代码在注释处[`InspectorView.js`](https://github.com/WebKit/webkit/blob/eb4af44b6/Source/WebCore/inspector/front-end/InspectorView.js#L148-L151)）：（
在粗体行中，替换`!`为`~`）

```
_keyDown：函数（事件）
{
if (!WebInspector.KeyboardShortcut.eventHasCtrlOrMeta(event))
返回;

if (!event.shiftKey && !event.altKey && event.keyCode > 0x30 && event.keyCode < 0x3A) {
var panelName = this._panelOrder[event.keyCode - 0x31];
如果（面板名称）{
this.showPanel（面板名称）；
event.consume(true);
}
返回;
}

```

# app-store - AppStore 的屏幕截图 - 我是否合并为一张图片？

> ID：15914853
> 
> 赞同：0
> 
> 时间：2013-04-10T00:20:31.327
> 
> 标签：app-store, itunes, screenshot

iTunes Connect 有不同的按钮用于上传屏幕截图（例如，一个用于 3.5 英寸视网膜） 我可以多次使用每个按钮来上传多个屏幕截图 - 还是第二次上传会覆盖第一次？我知道它说“截图”（复数），但不清楚这是否是因为我需要将几张截图组合成一张图片并上传。特别是因为可用尺寸似乎大于 XCode 生成的默认屏幕截图尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:20:33.833

好的。通过尝试并尝试找到答案。是的，您可以在每个类别下添加多个屏幕截图。它们会为您显示，并且您似乎也可以稍后更改它们。所以这真的很容易。

# javascript - Javascript轮盘赌桌，拖放

> ID：15914856
> 
> 赞同：0
> 
> 时间：2013-04-10T00:20:50.283
> 
> 标签：javascript, css, html, drag-and-drop, draggable

大家，早安，

我需要创建一个轮盘赌桌，您可以在其中仅使用 javascript/css/html 将扑克筹码拖到数字上（以图形方式）。

问题1：最好的方法是什么？

问题2：我想过使用2个for循环来初始化div中的所有数字，然后使用拖放（[http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx](http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx)）在释放时将扑克筹码图像“捕捉”到最近的 div。嗯...如果不使用数百个 if/else，我怎么知道在哪里拍摄图像？

非常感谢！祝你今天过得愉快！:)

更新：

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
#div1 {
    width: 20px;
    height: 40px;
    padding: 10px;
    border: 1px solid #aaaaaa;
}
#game {width:350px;height:70px;padding:10px;border:1px solid #aaaaaa;}
</style>

</head>
<body>

<p>Drag the W3Schools image into the rectangle:</p>

<br>
<div id="game">
</div>
<img id="drag1" src="images/c.png" draggable="true" ondragstart="drag(event)" width="336" height="69">

<script>
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
}
function dragAlert() {
    alert("Ondrag");
}
var numberCount = 1;
var divId = 0;
var div = document.createElement("div");
            div.className = "div1";
            /*divId = "id";
            divId += numberCount;*/
            div.id = "div1";
            div.ondrop = function() { 
            drop(event);
             };
            div.ondragover = function() {
                allowDrop(event);
            };
            document.getElementById("game").appendChild(div);
            numberCount++;
</script>
</body>

</html> 
```

有谁知道为什么 ondragover/ondrop 不适用于此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:54:47.513

我想你会喜欢[interact.js](https://github.com/taye/interact.js)。这是我编写的一个独立的 JavaScript 拖放、调整大小和多点触控手势模块。我最近添加了捕捉；它允许您捕捉到自定义网格，或者在这种情况下更合适地捕捉到自定义锚点。

要使`element`可拖动，您将调用`interact(element).draggable(true)`然后将侦听器绑定到 dragmove 事件：

```
interact(element).bind('dragmove', function (event) {
    // use event.dx, event.dy and normal MouseEvent properties
    // to move the element
}); 
```

并配置捕捉到自定义锚点：

```
interact.snap({
    mode: 'anchors',
    anchors: [
        {x: 300, y: 100, range: 50},
        {x: 100, y: 400, range: 40},
        {x: 500, y: 400},
        {x: 500, y: 500}
    ],
    range: 30
}); 
```

我在这里写了一篇博客文章来解释如何使用它：[使用 interact.js 拖放 snap to grid](http://t1.netsoc.ie/taye/?p=72)。该帖子还链接到交互式演示。

# sql - What is the correct sql script for this select Statement?

> ID：15914858
> 
> 赞同：0
> 
> 时间：2013-04-10T00:21:04.730
> 
> 标签：sql, sql-server, sql-server-2000, pivot

This is my script

```
SELECT iBranch_num,
   CASE WHEN iPatient_typ=1 THEN COUNT(iPatient_num) ELSE 0 END AS [New Patient], 
   CASE WHEN iPatient_typ=2 THEN COUNT(iPatient_num) ELSE 0 END AS [Buying Patient],                
   CASE WHEN iPatient_typ=3 THEN COUNT(iPatient_num) ELSE 0 END AS [Active Patient],
   CASE WHEN iPatient_typ=4 THEN COUNT(iPatient_num) ELSE 0 END AS [Inactive Patient]
FROM tblsotransaction
WHERE iStatus_typ=1
   AND iApply_dt BETWEEN 20130401 AND 20130408 
   AND iBranch_num=14
GROUP BY iBranch_num, iPatient_typ 
```

Current Result:

```
14, 25, 0,  0,  0
14, 0,  8,  0,  0
14, 0,  0,  97, 0
14, 0,  0,  0,  2 
```

I want the result to be like this

```
14, 25, 8,  9,  2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:23:57.340

Wrap the whole `CASE` expression inside an aggregate function `COUNT`, and remove `iPatient_typ` from the `GROUP BY` clause:

```
SELECT 
  iBranch_num,
  COUNT(CASE WHEN iPatient_typ=1 THEN iPatient_num ELSE 0 END) AS [New Patient], 
  COUNT(CASE WHEN iPatient_typ=2 THEN iPatient_num ELSE 0 END) AS [Buying Patient],                
  COUNT(CASE WHEN iPatient_typ=3 THEN iPatient_num ELSE 0 END) AS [Active Patient],
  COUNT(CASE WHEN iPatient_typ=4 THEN iPatient_num ELSE 0 END) AS [Inactive Patient]
FROM tblsotransaction
WHERE iStatus_typ = 1 
  AND iApply_dt BETWEEN 20130401 AND 20130408 
  AND iBranch_num = 14
GROUP BY iBranch_num; 
```

**Or:** `SUM`:

```
SELECT 
  iBranch_num,
  SUM(CASE WHEN iPatient_typ = 1 THEN 1 ELSE 0 END) AS [New Patient], 
  SUM(CASE WHEN iPatient_typ = 2 THEN 1 ELSE 0 END) AS [Buying Patient],
  SUM(CASE WHEN iPatient_typ = 3 THEN 1 ELSE 0 END) AS [Active Patient],
  SUM(CASE WHEN iPatient_typ = 4 THEN 1 ELSE 0 END) AS [Inactive Patient]
FROM tblsotransaction
WHERE iStatus_typ = 1 
  AND iApply_dt BETWEEN 20130401 AND 20130408 
  AND iBranch_num = 14
GROUP BY iBranch_num; 
```

# vhdl - VHDL - 如何将 1 添加到 STD_LOGIC_VECTOR？

> ID：15914859
> 
> 赞同：3
> 
> 时间：2013-04-10T00:21:16.593
> 
> 标签：vhdl

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned.all;
-- use ieee.std_logic_arith.all;
-- use ieee.numeric_std.all;

-- entity part contain R for output of Register

entity register_16 is
    port(   input:  in std_logic_vector(15 downto 0);
        ld, inc, clk, clr:  in std_logic;
        R: buffer std_logic_vector(15 downto 0));
end register_16 ;

-- it have to parallel process    

architecture behavioral of register_16 is
begin

reg: process (input, ld, clk, clr)
    variable R_temp: std_logic_vector(15 downto 0);
begin
    if (clr = '1') then
        R_temp := b"0000000000000000";
    elsif (clk'event and clk = '1') then
        if (ld = '1') then
            R_temp := input;
        end if;
    end if;
    R <= R_temp;
end process reg;

-- my error in this step    

inc_R: process (inc)
begin
    R <= R + '1';
end process inc_R;

end behavioral; 
```

主进程 (reg) 正常工作，但其他进程添加 1 时出错。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-06T09:48:36.020

您将不得不再次将向量转换为整数，这是一个示例：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

signal in  : std_logic_vector( 7 downto 0 );
signal out : std_logic_vector( 7 downto 0 );

out <= std_logic_vector(to_unsigned(to_integer(unsigned( in )) + 1, 8)); 
```

有关类型转换的好图片，请看这里：

[http://www.bitweenie.com/listings/vhdl-type-conversion/](http://www.bitweenie.com/listings/vhdl-type-conversion/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T07:47:47.280

抱歉，您的代码有很多问题...

1.  您在同一过程中混合了组合代码和顺序代码，这是一种糟糕的编码风格。如果编码正确，则确实不需要变量 R_temp。
2.  敏感度列表只是一个模拟辅助，但您正试图将其用作条件（当 inc 更改时，增加 R）。这在硬件中不起作用。在开始使用 VHDL 时，我的建议是使用 VHDL_2008 并始终使用 process(all) 作为敏感度列表。这避免了初学者的错误，因为它反映了综合的作用。
3.  您正在第二个过程中创建一个组合循环。由于上面的2.，这不会出现在模拟中，但会导致综合错误。
4.  正如 baldyHDL 已经提到的，您在多个进程中分配给 R。
5.  处理数字时，首选 unsigned 而非 std_logic_vector。通常，您不应包含 std_logic_arith 或 std_logic_unsigned，而应仅包含 std_logic_1164 和 numeric_std。
6.  添加 std_logic 值（例如“1”）不是标准的，或者至少不是所有工具都支持。只需使用整数代替：`R <= R + 1;`

通过您的代码，我了解到您正在尝试编写一个带有增量、加载和清除信号的计数器。我不只是想给你代码（这会破坏你的学习体验），而是尝试使用以下模板将整个计数器放入一个进程中：

```
process(clk) begin
    if(rising_edge(clk)) then
        -- Your code here vvv
        if(clr = '1') then

        elsif(ld = '1') then

        elsif(inc = '1') then

        end if;
        -- Your code here ^^^
    end if;
end process; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:45:42.457

你在你的两个进程中都写了 R。这会导致无法综合的多驱动器情况。要解决它，请结合流程，例如：

```
reg: process (clk, clr)
  variable R_temp : std_logic_vector(15 downto 0);
begin
   if (clr='1') then
       R_temp := b"0000000000000000";
   elsif (clk'event and clk='1') then
       if (ld='1') then
           R_temp := input;
       elsif (inc='1') then
           R_temp := R_temp + '1';
       end if;
   end if;
   R <= R_temp;
end process reg; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-31T04:48:06.480

我使用了以下库，它能够做类似的事情

```
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL; 
```

...

```
signal cnt : std_logic_vector(3 downto 0);

begin
    process(clk, reset, ce, cnt)
        begin
            if(reset = '1') then
                cnt <= "0000";
            elsif(clk'event and clk='1') then 
                if(ce='1') then
                    if(cnt = "1001") then
                        cnt <= "0000";
                    else
                        cnt <= cnt + 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-20T13:26:32.960

您应该能够添加一个包含值 1 的向量，因为您正在使用 numeric_std 库：

```
R <= R + x"0001"; 
```

# asp.net-mvc-3 - EF如何反转对象层次结构

> ID：15914861
> 
> 赞同：0
> 
> 时间：2013-04-10T00:21:21.213
> 
> 标签：asp.net-mvc-3, entity-framework

我有一个家庭中的`var foo = someUser.MyFamily();`
用户列表每个用户都有一个班级列表`public virtual List<Class> Classes {get; set;}`
每个班级都有一个日期列表`public virtual List<Date> Dates {get; set;}`

为了显示家庭本周的活动，我想创建一个表格

```
    约会班的人...
            班级人...
    约会+班级人

```

所以我真正想要的是颠倒这种安排并有
一个相关日期列表，
每个日期都有一个类列表，
每个类都有一个用户列表（但只有家庭中的用户）

我一直不知道该怎么说。我一直在想它应该是这样的

```
var foo = Users x Classes x Dates as in a join
.GroupBy(x => x.Date)
.Select(x => new { something })    
.GroupBy(x => x.Class)
.Select(x => new { something })    
etc... 
```

并最终能够说

```
foreach (var d in foo)
{
    use d.Date
    foreach (var c in d.Classes)
    {
        use c.Class.ClassTime, c.Class.ClassName
        foreach (var u in c.Users)
        {
            use u.FirstName 
```

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:36:44.213

**我知道了 ！！！！！**

感谢这篇文章，我学会了如何使用 SelectMany 来扁平化层次结构
[http://blogs.interknowlogy.com/2008/10/10/use-linqs-selectmany-method-to-flatten-collections/](http://blogs.interknowlogy.com/2008/10/10/use-linqs-selectmany-method-to-flatten-collections/)；

一旦我将它展平，就可以直接使用`GroupBy()`从日期 -> 会议 -> 用户重建对象层次结构，这样
每个日期都有一个会议列表
每个会议都有一个用户列表

```
var meetingDates = Model.User.MyFamily(true)
    .SelectMany(x => x.ClassesIamIn)
    .SelectMany(x => x.Class.ClassMeetings, (c, d) => new { Date = d.Date, Meeting = d, c.User })
    .GroupBy(x => x.Date)
    .Select(x => new
    {
        Date = x.Key,
        Meetings = x.Select(y => new { Meeting = y.Meeting, User = y.User })
            .GroupBy(a => a.Meeting)
            .Select(a => new
            {
                Meeting = a.Key,
                Users = a.Select(b => b.User)
                    .OrderBy(d => d.FirstName)
            })
            .OrderBy(c => c.Meeting.TimeStart.TimeOfDay)
    }); 
```

哇，这是一场斗争；哇，真是一种解脱。上面的文章是关键。我知道如何使用 SelectMany() 在列表中进行钻取。我不知道的是用于创建包含父对象的东西的愚蠢的 lambda 语法`(parent, child) => new { parent child mix }`

# javascript - 销毁 Javascript Datepicker Onblur

> ID：15914867
> 
> 赞同：0
> 
> 时间：2013-04-10T00:21:55.060
> 
> 标签：javascript, datepicker

我有一个 javascript datepicker 可以完美运行，但有一个例外。如果用户在没有选择日期的情况下跳出表单域，则日期选择器将保留在屏幕上。我需要销毁 onBlur 但不确定在哪里。

在正文中调用日期选择器的函数是：

```
<script type="text/javascript" src="../Datepicker/datepickr.js"></script>
    <script type="text/javascript">
        new datepickr('effectiveDate', {
            'dateFormat': 'n/j/Y'
        });
    </script> 
```

js文件内容为：

```
var datepickr = (function() {
var datepickrs = [],
currentDate = new Date(setAllDates(3)),
date = {
    current: {
        year: function() {
            return currentDate.getFullYear();
        },
        month: {
            integer: function() {
                return currentDate.getMonth();
            },
            string: function(full) {
                var date = currentDate.getMonth();
                return monthToStr(date, full);
            }
        },
        day: function() {
            return currentDate.getDate();           
        }
    },
    month: {
        string: function(full, currentMonthView) {
            var date = currentMonthView;
            return monthToStr(date, full);
        },
        numDays: function(currentMonthView, currentYearView) {
            // checks to see if february is a leap year otherwise     return the respective # of days
            return (currentMonthView == 1 && !(currentYearView & 3) &&     (currentYearView % 1e2 || !(currentYearView % 4e2))) ? 29 : daysInMonth[currentMonthView];
        }
    }
},
weekdays = ['Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur'],
months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
suffix = { 1: 'st', 2: 'nd', 3: 'rd', 21: 'st', 22: 'nd', 23: 'rd', 31: 'st' },
buildCache = [],
handlers = {
    calendarClick: function(e) {
        if(e.target.className) {
            switch(e.target.className) {
                case 'prev-month':
                case 'prevMonth':
                    this.currentMonthView--;
                    if(this.currentMonthView < 0) {
                        this.currentYearView--;
                        this.currentMonthView = 11;
                    }
                    rebuildCalendar.call(this);
                break;
                case 'next-month':
                case 'nextMonth':
                    this.currentMonthView++;
                    if(this.currentMonthView > 11) {
                        this.currentYearView++;
                        this.currentMonthView = 0;
                    }
                    rebuildCalendar.call(this);
                break;
                case 'day':
                    this.element.value = formatDate(new Date(this.currentYearView, this.currentMonthView, e.target.innerHTML).getTime(), this.config.dateFormat);
                    this.close();
                break;
            }
        }
    },
    documentClick: function(e) {
        if(e.target != this.element && e.target != this.calendar) {
            var parentNode = e.target.parentNode;
            if(parentNode != this.calender) {
                while(parentNode != this.calendar) {
                    parentNode = parentNode.parentNode;
                    if(parentNode == null) {
                        this.close();
                        break;
                    }
                }
            }
        }
    }
};

function formatDate(milliseconds, dateFormat) {
    var formattedDate = '',
    dateObj = new Date(milliseconds),
    format = {
        d: function() {
            var day = format.j();
            return (day < 10) ? '0' + day : day;
        },
        D: function() {
            return weekdays[format.w()].substring(0, 3);
        },
        j: function() {
            return dateObj.getDate();
        },
        l: function() {
            return weekdays[format.w()] + 'day';
        },
        S: function() {
            return suffix[format.j()] || 'th';
        },
        w: function() {
            return dateObj.getDay();
        },
        F: function() {
            return monthToStr(format.n(), true);
        },
        m: function() {
            var month = format.n() + 1;
            return (month < 10) ? '0' + month : month;
        },
        M: function() {
            return monthToStr(format.n(), false);
        },
        n: function() {
            return dateObj.getMonth() + 1;
        },
        Y: function() {
            return dateObj.getFullYear();
        },
        y: function() {
            return format.Y().toString().substring(2, 4);
        }
    },
    formatPieces = dateFormat.split('');

    foreach(formatPieces, function(formatPiece) {
        formattedDate += format[formatPiece] ? format[formatPiece]() : formatPiece;
    });

    return formattedDate;
}

function foreach(items, callback) {
    var i = 0, x = items.length;
    for(i; i < x; i++) {
        if(callback(items[i], i) === false) {
            break;
        }
    }
}

function addEvent(element, eventType, callback) {
    if(element.addEventListener) {
        element.addEventListener(eventType, callback, false);
    } else if(element.attachEvent) {
        var fixedCallback = function(e) {
            e = e || window.event;
            e.preventDefault = (function(e) {
                return function() { e.returnValue = false; }
            })(e);
            e.stopPropagation = (function(e) {
                return function() { e.cancelBubble = true; }
            })(e);
            e.target = e.srcElement;
            callback.call(element, e);
        };
        element.attachEvent('on' + eventType, fixedCallback);
    }
}

function removeEvent(element, eventType, callback) {
    if(element.removeEventListener) {
        element.removeEventListener(eventType, callback, false);
    } else if(element.detachEvent) {
        element.detachEvent('on' + eventType, callback);
    }
}

function buildNode(nodeName, attributes, content) {
    var element;

    if(!(nodeName in buildCache)) {
        buildCache[nodeName] = document.createElement(nodeName);
    }

    element = buildCache[nodeName].cloneNode(false);

    if(attributes != null) {
        for(var attribute in attributes) {
            element[attribute] = attributes[attribute];
        }
    }

    if(content != null) {
        if(typeof(content) == 'object') {
            element.appendChild(content);
        } else {
            element.innerHTML = content;
        }
    }

    return element;
}

function monthToStr(date, full) {
    return ((full == true) ? months[date] : ((months[date].length > 3) ? months[date].substring(0, 3) : months[date]));
}

function isToday(day, currentMonthView, currentYearView) {
    return day == date.current.day() && currentMonthView == date.current.month.integer() && currentYearView == date.current.year();
}

function buildWeekdays() {
    var weekdayHtml = document.createDocumentFragment();
    foreach(weekdays, function(weekday) {
        weekdayHtml.appendChild(buildNode('th', {}, weekday.substring(0, 2)));
    });
    return weekdayHtml;
}

function rebuildCalendar() {
    while(this.calendarBody.hasChildNodes()){
        this.calendarBody.removeChild(this.calendarBody.lastChild);
    }

    var firstOfMonth = new Date(this.currentYearView, this.currentMonthView, 1).getDay(),
    numDays = date.month.numDays(this.currentMonthView, this.currentYearView);

    this.currentMonth.innerHTML = date.month.string(this.config.fullCurrentMonth, this.currentMonthView) + ' ' + this.currentYearView;
    this.calendarBody.appendChild(buildDays(firstOfMonth, numDays, this.currentMonthView, this.currentYearView));
}

function buildCurrentMonth(config, currentMonthView, currentYearView) {
    return buildNode('span', { className: 'current-month' }, date.month.string(config.fullCurrentMonth, currentMonthView) + ' ' + currentYearView);
}

function buildMonths(config, currentMonthView, currentYearView) {
    var months = buildNode('div', { className: 'months' }),
    prevMonth = buildNode('span', { className: 'prev-month' }, buildNode('span', { className: 'prevMonth' }, '&lt;')),
    nextMonth = buildNode('span', { className: 'next-month' }, buildNode('span', { className: 'nextMonth' }, '&gt;'));

    months.appendChild(prevMonth);
    months.appendChild(nextMonth);

    return months;
}

function buildDays(firstOfMonth, numDays, currentMonthView, currentYearView) {
    var calendarBody = document.createDocumentFragment(),
    row = buildNode('tr'),
    dayCount = 0, i;

    // print out previous month's "days"
    for(i = 1; i <= firstOfMonth; i++) {
        row.appendChild(buildNode('td', null, '&nbsp;'));
        dayCount++;
    }

    for(i = 1; i <= numDays; i++) {
        // if we have reached the end of a week, wrap to the next line
        if(dayCount == 7) {
            calendarBody.appendChild(row);
            row = buildNode('tr');
            dayCount = 0;
        }

        var todayClassName = isToday(i, currentMonthView, currentYearView) ? { className: 'today' } : null;
        row.appendChild(buildNode('td', todayClassName, buildNode('span', { className: 'day' }, i)));

        dayCount++;
    }

    // if we haven't finished at the end of the week, start writing out the "days" for the next month
    for(i = 1; i <= (7 - dayCount); i++) {
        row.appendChild(buildNode('td', null, '&nbsp;'));
    }

    calendarBody.appendChild(row);

    return calendarBody;
}

function buildCalendar() {
    var firstOfMonth = new Date(this.currentYearView, this.currentMonthView,     1).getDay(),
    numDays = date.month.numDays(this.currentMonthView, this.currentYearView),
    self = this;

    var inputLeft = inputTop = 0,
    obj = this.element;

    if(obj.offsetParent) {
        do {
            inputLeft += obj.offsetLeft;
            inputTop += obj.offsetTop;
        } while (obj = obj.offsetParent);
    }

    var calendarContainer = buildNode('div', { className: 'calendar' });
    calendarContainer.style.cssText = 'display: none; position: absolute; top:     ' + (inputTop + this.element.offsetHeight) + 'px; left: ' + inputLeft + 'px; z-index: 100;';

    this.currentMonth = buildCurrentMonth(this.config, this.currentMonthView, this.currentYearView)
    var months = buildMonths(this.config, this.currentMonthView,     this.currentYearView);
    months.appendChild(this.currentMonth);

    var calendar = buildNode('table', null, buildNode('thead', null, buildNode    ('tr', { className: 'weekdays' }, buildWeekdays())));
    this.calendarBody = buildNode('tbody');
    this.calendarBody.appendChild(buildDays(firstOfMonth, numDays,     this.currentMonthView, this.currentYearView));
    calendar.appendChild(this.calendarBody);

    calendarContainer.appendChild(months);
    calendarContainer.appendChild(calendar);

    document.body.appendChild(calendarContainer);

    addEvent(calendarContainer, 'click', function(e) { handlers.calendarClick.call(self, e); });

    return calendarContainer;
}

return function(elementId, userConfig) {
    var self = this;

    this.element = document.getElementById(elementId);
    this.config = {
        fullCurrentMonth: true,
        dateFormat: 'F jS, Y'
    };
    this.currentYearView = date.current.year();
    this.currentMonthView = date.current.month.integer();

    if(userConfig) {
        for(var key in userConfig) {
            if(this.config.hasOwnProperty(key)) {
                this.config[key] = userConfig[key];
            }
        }
    }

    this.documentClick = function(e) { handlers.documentClick.call(self, e); }

    this.open = function(e) {
        addEvent(document, 'click', self.documentClick);

        foreach(datepickrs, function(datepickr) {
            if(datepickr != self) {
                datepickr.close();
            }
        });

        self.calendar.style.display = 'block';
    }

    this.close = function() {
        removeEvent(document, 'click', self.documentClick);
        self.calendar.style.display = 'none';
    }

    this.calendar = buildCalendar.call(this);

    datepickrs.push(this);

    if(this.element.nodeName == 'INPUT') {
        addEvent(this.element, 'focus', this.open);
    } else {
        addEvent(this.element, 'click', this.open);
    }
}
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:29:08.277

尝试添加这个（查看 datepickr.js 的末尾）：

```
if(this.element.nodeName == 'INPUT') {
    addEvent(this.element, 'focus', this.open);
    addEvent(this.element, 'blur', this.close); // <--- Add this line
} else {
    addEvent(this.element, 'click', this.open);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:31:23.693

```
var d = new datepickr('effectiveDate', {
    'dateFormat': 'n/j/Y'
});

document.getElementById('effectiveDate').addEventListener('blur', function (e) {
    d.close();
}); 
```

# java - 从 Java 字符串中解析文本

> ID：15914871
> 
> 赞同：1
> 
> 时间：2013-04-10T00:22:24.887
> 
> 标签：java, regex

我有一个格式如下的字符串：-----BEGIN MESSAGE-----，后跟可变长度加密会话密钥，后跟换行符，后跟加密消息，后跟换行符，后跟数字签名，后跟 -----END MESSAGE-----。

```
-----BEGIN MESSAGE-----
SNyeWtz8QD8AKdioMG11wu7U6gG2wD9tekvVrx6VYW+6oJj4Wl8NE+7i5MHbu4Au
+vN1Z886lOWka7ekgPF8N7t9MpiFo2pBPHuFcOsaY5ETYuEyk5gaX7BYP7qT6wKG
BRILmX6DblWqGxG2tKs/AdcHDqQ5QBXrP03uhN68wgo=

U2FsdGVkX18gtpQSqyH4H5242SZzcZrb0oH7FWw7/MSCxo7h7BVaesZV2N38sr9y

kVr+wabiNn4RfAB4nNi9gAZHQLok4uxRMALGF2kZk2zpVNPQo6jcdz85fy68gylX
OCQIIdk8JPIwxzHfVvRZqNHDRADZRlNHUMYScjRPU+DB8avghYAVKMJhLgA/2Tdp
a59uBMBg/yB1yqA5FivxPzOhq92Y4nZuP1R9/yGE9O8K
-----END MESSAGE----- 
```

解析出三部分信息（会话密钥、加密消息和数字签名）的最佳方法是什么？

我尝试使用 Scanner 类，但我不知道用什么作为分隔符。我也尝试使用 Pattern 类，但也无法弄清楚该方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:36:12.443

您实际上在各个部分中嵌入了换行符。分隔它们的是*空*行——一行中的两个换行符。我假设您希望每个部分都删除换行符。我建议采用蛮力方法：

```
StringBuilder sb = new StringBuilder();
String[] parts = input.split("\\r?\\n\\r?\\n"); // should be 3 long
// strip out header and newlines from session key
String[] lines = parts[0].split("\\r?\\n");
for (int i = 1; i < lines.length; ++i) { // skip first line
    sb.append(lines[i]);
}
parts[0] = sb.toString();
// strip out header and newlines from message
sb.setLength(0);
lines = parts[1].split("\\r?\\n");
for (int i = 0; i < lines.length; ++i) {
    sb.append(lines[i]);
}
parts[1] = sb.toString();
// finally, deal with the signature
sb.setLength(0);
lines = parts[2].split("\\r?\\n");
for (int i = 0; i < lines.length - 1; ++i) {
    sb.append(lines[i]);
}
parts[2] = sb.toString(); 
```

不优雅，但它清楚地表明了正在发生的事情。

另一种方法是使用 a`Scanner`读取每一行并决定如何处理它。三行——头、尾和空行——将进行特殊处理并影响处理。否则，只需在阅读时将每一行附加到`StringBuffer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:34:23.580

对，就像 Sergii 说的那样删除开始和结束。然后对 "\s+" 进行正则表达式拆分，例如在 .NET 中：

```
Regex.Split(Regex.Replace(strCert, "(?i)\s*-{5}(BEGIN|END)\sMESSAGE-{5}\s*", ""), "\s+") 
```

也就是说，假设您的示例在每个数据的正文中包含单行换行符的唯一原因是用于格式化，因为据我所知，这些在实际证书中不存在。实际的证书如下所示：

```
-----BEGIN MESSAGE-----
SNyeWtz8QD8AKdioMG11wu7U6gG2wD9tekvVrx6VYW+6oJj4Wl8NE+7i5MHbu4Au+vN1Z886lOWka7ekgPF8N7t9MpiFo2pBPHuFcOsaY5ETYuEyk5gaX7BYP7qT6wKGBRILmX6DblWqGxG2tKs/AdcHDqQ5QBXrP03uhN68wgo=

U2FsdGVkX18gtpQSqyH4H5242SZzcZrb0oH7FWw7/MSCxo7h7BVaesZV2N38sr9y

kVr+wabiNn4RfAB4nNi9gAZHQLok4uxRMALGF2kZk2zpVNPQo6jcdz85fy68gylXOCQIIdk8JPIwxzHfVvRZqNHDRADZRlNHUMYScjRPU+DB8avghYAVKMJhLgA/2Tdpa59uBMBg/yB1yqA5FivxPzOhq92Y4nZuP1R9/yGE9O8K
-----END MESSAGE----- 
```

是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:26:23.097

`newline`?

`-----BEGIN MESSAGE-----`并从第一个值和`-----END MESSAGE-----`最后一个值中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T00:29:38.313

```
String[] parts = string.split("\r?\n");
sessionKey = parts[1];
encryptedMessage = parts[3]; 
digitalSignature = parts[5]; 
```

`\r?`允许 Windows EOL ( )`\r\n`或 Unix EOL ( `\n`)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T00:34:34.813

代码：

```
public class MessageParser {

   public static void main( String[] args ) {
      String message =
         "-----BEGIN MESSAGE-----\n" +
         "SNyeWtz8QD8AKdioMG11wu7U6gG2wD9tekvVrx6VYW+6oJj4Wl8NE+7i5MHbu4Au\n" +
         "+vN1Z886lOWka7ekgPF8N7t9MoiFo2pBPHuFcOsaY5ETYuEyk5gaX7BYP7qT6wKG\n" +
         "BRILmX6DblWqGxG2tKs/AdcHDqQ5QBXrP03uhN68wgo=\n" +
         "\n" +
         "U2FsdGVkX18gtpQSqyH4H5242gZzcZrb0oH7FWw7/MSCxo7h7BVaesZV2N38sr9y\n" +
         "\n" +
         "kVr+wabiNn4RfAB4nNi9gAZHQLok4uxRMALGF2kZk2zpVNPQo6jcdz85fy68gylX\n" +
         "OCQIIdk8JPIwxzHfVvRZqNHDRFDZRlNHUMYScjRPU+DB8avghYAVKMJhLgA/2Tdp\n" +
         "a59uBMBg/yB1yqA5FivxPzOhq92Y4nZuP1R9/yGE9O8K\n" +
         "-----END MESSAGE-----\n";
      String[] lines = message.split( "\n" );
      int i = 1;
      String sessionKey = "";
      String line = lines[i];
      while( i < lines.length && line.length() > 0 ) {
         sessionKey += line;
         line = lines[++i];
      }
      String encryptedMessage = "";
      line = lines[++i];
      while( i < lines.length && line.length() > 0 ) {
         encryptedMessage += line;
         line = lines[++i];
      }
      String digitalSignature = "";
      line = lines[++i];
      while( i < lines.length && ! line.equals( "-----END MESSAGE-----" )) {
         digitalSignature += line;
         line = lines[++i];
      }
      System.out.println( "sessionKey      : " + sessionKey );
      System.out.println( "encryptedMessage: " + encryptedMessage );
      System.out.println( "digitalSignature: " + digitalSignature );
   }
} 
```

输出：

```
sessionKey      : SNyeWtz8QD8AKdioMG11wu7U6gG2wD9tekvVrx6VYW+6oJj4Wl8NE+7i5MHbu4Au+vN1Z886lOWka7ekgPF8N7t9MoiFo2pBPHuFcOsaY5ETYuEyk5gaX7BYP7qT6wKGBRILmX6DblWqGxG2tKs/AdcHDqQ5QBXrP03uhN68wgo=
encryptedMessage: U2FsdGVkX18gtpQSqyH4H5242gZzcZrb0oH7FWw7/MSCxo7h7BVaesZV2N38sr9y
digitalSignature: kVr+wabiNn4RfAB4nNi9gAZHQLok4uxRMALGF2kZk2zpVNPQo6jcdz85fy68gylXOCQIIdk8JPIwxzHfVvRZqNHDRFDZRlNHUMYScjRPU+DB8avghYAVKMJhLgA/2Tdpa59uBMBg/yB1yqA5FivxPzOhq92Y4nZuP1R9/yGE9O8K 
```

# ffmpeg - ffprobe 或 avprobe 在 JSON 输出中返回纯文本错误

> ID：15914874
> 
> 赞同：3
> 
> 时间：2013-04-10T00:22:42.007
> 
> 标签：ffmpeg, ffprobe, avconv, avprobe

我正在运行以获取有关...`avprobe`中的视频的流信息`JSON`

`avprobe -loglevel quiet -show_format -show_streams file.m4v -of json`

这基本上与`ffprobe`or完全相同`ffmpeg -i`（并且我得到相同的错误。）

`ffprobe -loglevel quiet -show_format -show_streams file.m4v -print_format json`

该命令大部分时间都有效......但是，有时我会有一个视频，其中有一个“不受支持”的奇怪流，我会得到这样的东西（缩写。）

```
Unsupported codec with id 94213 for input stream 2
{  "format" : {
    "filename" : "file.m4v",
    "nb_streams" : 3,
    "format_name" : "mov,mp4,m4a,3gp,3g2,mj2" ... 
```

当我运行命令时，我返回`JSON`+ 中的错误`plain text`，这使结果无效`JSON`，我必须稍后“清理”它。

我正在**抑制**输出中的错误，`-loglevel quiet`但错误仍然出现。

我如何告诉`avprobe/ffprobe`不显示此错误并因此取回正确的`JSON`对象？

* * *

## 更长的输出示例

## `ffprobe`, 来自源代码, MacOS

```
ffprobe version 0.9.1-subsplash, Copyright (c) 2007-2012 the FFmpeg developers
  built on Feb  5 2012 01:35:36 with gcc 4.2.1 (Apple Inc. build 5664)
  configuration: --prefix=/Volumes/Ramdisk/sw --as=yasm --extra-version=subsplash --disable-shared --enable-static --disable-ffplay --disable-ffserver --enable-gpl --enable-pthreads --enable-version3 --enable-libspeex --enable-libvpx --disable-decoder=libvpx --enable-libmp3lame --enable-libfaac --enable-libvorbis --enable-libtheora --enable-libx264 --enable-avfilter --enable-libopencore_amrwb --enable-libopencore_amrnb --enable-filters --arch=x86_64 --enable-runtime-cpudetect --enable-nonfree
  libavutil    51\. 32\. 0 / 51\. 32\. 0
  libavcodec   53\. 42\. 4 / 53\. 42\. 4
  libavformat  53\. 24\. 2 / 53\. 24\. 2
  libavdevice  53\.  4\. 0 / 53\.  4\. 0
  libavfilter   2\. 53\. 0 /  2\. 53\. 0
  libswscale    2\.  1\. 0 /  2\.  1\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'file.m4v':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42isomavc1
    creation_time   : 2012-01-01 06:38:43
    encoder         : HandBrake 0.9.5 2011010300
  Duration: 00:30:47.53, start: 0.000000, bitrate: 1558 kb/s
    Chapter #0.0: start -0.066733, end 17.784433
    Metadata:
      title           : Chapter  1

...

    Stream #0:2(und): Subtitle: mov_text (text / 0x74786574)
    Metadata:
      creation_time   : 2012-01-01 06:38:43
      handler_name    : 
Unsupported codec with id 94213 for input stream 2
{

... 
```

## `avprobe`，来自源代码，Ubuntu Linux

```
avprobe version 10_alpha1-6:10~~git20130307.4be368b-1~quantal1, Copyright (c) 2007-2013 the Libav developers
  built on Mar  7 2013 22:12:44 with gcc 4.7 (Ubuntu/Linaro 4.7.2-2ubuntu1)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'file.m4v':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42isomavc1
    creation_time   : 2012-01-01 06:38:43
    encoder         : HandBrake 0.9.5 2011010300
  Duration: 00:30:47.53, start: 0.000000, bitrate: 1558 kb/s
    Chapter #0.0: start -0.066733, end 17.784433
    Metadata:
      title           : Chapter  1

...

    Stream #0.2(und): Subtitle: text / 0x74786574
    Metadata:
      creation_time   : 2012-01-01 06:38:43
Unsupported codec with id 94213 for input stream 2
{

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-19T03:42:07.303

您看到的是 STDOUT 和 STDERR 的输出。如果要过滤掉`Unsupported codec with id 94213 for input stream 2`，例如，可以通过在 bash 中将其重定向到 /dev/null 来过滤掉 STDERR 输出：

`avprobe -loglevel quiet -show_format -show_streams file.m4v -of json 2>/dev/null`

# css - Ember.js 的 CSS 继承问题

> ID：15914875
> 
> 赞同：3
> 
> 时间：2013-04-10T00:22:46.847
> 
> 标签：css, twitter-bootstrap, ember.js, less

我在将[Inspiritas](https://github.com/littke/inspiritas-bootstrap/)作为 Ember 应用程序时遇到问题。index.html 如下所示：

```
<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>title</title>
        <meta name="author" content="me">
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="shortcut icon" href="favicon.ico">
        <link href="inspiritas.css" rel="stylesheet">
    </head>

    <body>
        <script type="text/x-handlebars">
            <div class="navbar navbar-static-top navbar-inverse">
                <div class="navbar-inner">
                    <div class="container">
                        ...
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row-fluid">
                    <div class="span3">
                        ...
                    </div>
                    {{outlet}}
                </div>
            </div><!-- /container -->
        </script>

        <script type="text/x-handlebars" id="dashboard">
            <div class="span9" id="content-wrapper">
                <div id="content">
                    <section id="tables">
                        ...
                    </section>
                </div>
            </div>
        </script> 
```

首先，它不会为`<div class="container">`（不是导航栏中的那个）加载 CSS。相反，它继承自 body.ember-application，并在此过程中丢失了所有 CSS。不过，这只发生在这个容器上。我可以将其缩小到的唯一一点是这里的一些自定义样式：

```
body > .container {
    // Color the whole container like the sidebar to fix faux columns
    background: url('images/sidebar_bg.png') repeat @sidebarBackground;

    .border-radius(@borderRadiusLarge);

    // Make some space, eh.
    margin-top: 40px;
    margin-bottom: 40px;
} 
```

**更新：**嗯，我不知道为什么，但是后来一个类名发生了变化，一切都变得一团糟，一切都失去了它的风格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:28:07.197

您粘贴的 CSS 规则使用后代选择器，这意味着只有在元素`container`正下方的类的`body`元素才会被设置样式。但是当 Ember 插入 Handlebars 模板时，它会通过 View 包装它们，从而创建另一个中间 DIV。我猜这是您的样式没有出现的原因。

# php - Stripos 从字符串末尾开始

> ID：15914876
> 
> 赞同：0
> 
> 时间：2013-04-10T00:22:47.160
> 
> 标签：php, stripos

我有一些代码可以搜索一个巨大的日志文件并找到一个关键字，在大多数情况下，它位于文档的底部附近。在这种情况下，从底部开始搜索并向上工作会更有效。

```
$pos = stripos($body,$keyword);  
$snippet_pre = substr($body, $pos, SNIPPET_LENGTH); 
```

我看过 strripos ，虽然它做了我想要的，就像找到最后一次出现一样，但它听起来像是从文档的开头搜索，所以我的查询中添加了很多不必要的工作，因为大多数关键字都在附近字符串/文档的底部

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:27:11.520

通过换行符分解您的日志文件以获得一个数组。反转您的数组，现在您可以从末尾逐行搜索。

```
$lines = explode("\n",$body);
$reversed = array_reverse($lines);
foreach($reversed AS $line) {
   // Search for your keyword
} 
```

如果您谈论的是一个庞大的日志文件，因此您绝对不想将其全部读入内存，您也可以查看反向查找方法，尽管通常不需要。看这里：

[使用 fseek 逐行向后读取文件](https://stackoverflow.com/questions/3234580/read-a-file-backwards-line-by-line-using-fseek)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T01:05:20.703

[如果您将负偏移量设置为第三个参数， strripos](http://www.php.net/manual/en/function.strripos.php)将从末尾开始并向后搜索。

```
$pos = stripos($body,$keyword,$offset); 
```

# python - 我无法在 django 中修改用户模型数据

> ID：15914879
> 
> 赞同：0
> 
> 时间：2013-04-10T00:23:00.910
> 
> 标签：python, django

当我使用（来自 Shell）创建用户时：

```
u = User.objects.create_user('Angel', 'angel@test.com', 'angel') 
```

如果然后我执行（在shell中）：

```
u.first_name = 'Angel'
u.save 
```

如果我看到数据库（MySql），我看到 first_name 是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:23:56.573

你没有打电话`save`（你忘了括号）：

```
u.first_name = 'Angel'
u.save() 
```

# actionscript-3 - ReferenceError：错误 #1065：未定义变量探查器

> ID：15914880
> 
> 赞同：0
> 
> 时间：2013-04-10T00:23:01.863
> 
> 标签：actionscript-3, flash, apache-flex, actionscript

我有这个错误，使用 flex builder 编译的 swf

```
ReferenceError: Error #1065: Variable Profiler is not defined.
at global$init()
at core::Emulator()[C:\Users\AJ\Documents\Flex Builder 3\Snes\src\core\Emulator.as:67]
at Snes/onRomLoaded()[C:\Users\AJ\Documents\Flex Builder 3\Snes\src\Snes.as:90]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.net::URLLoader/onComplete() 
```

任何帮助都会很棒。

Emulator.as 文件：[http ://txtup.net/8CP6r](http://txtup.net/8CP6r)

Snes.as 文件：[http ://txtup.net/b9WW](http://txtup.net/b9WW)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:03:05.990

我正在阅读您的代码，您能否粘贴以下行并检查您的“cLoader”变量是否正确初始化？或者如果您也可以为“CLibInit”类提供源代码，那就太好了。

```
cLoader = new CLibInit();
if(cLoader){
  cLoader.supplyFile( "romfile", rom );                         
  cLib = cLoader.init();            
  cLib.setup();
} 
```

# asp.net-mvc-4 - 用于尾部斜杠的 URL 重写规则破坏了 Asp.net MVC4 捆绑包

> ID：15914881
> 
> 赞同：2
> 
> 时间：2013-04-10T00:23:08.893
> 
> 标签：asp.net-mvc-4, iis-7, url-rewriting, routes

我将我的**mvc4**应用程序托管在现有站点下的**虚拟路径中：**

**即**：[http ://www.mysite.com/myApp](http://www.mysite.com/myApp)

如果URL 中未提供**尾部斜杠**，则相对路径会被破坏，这是一个众所周知的问题。因此，如果用户像我上面那样键入 URL，则不会找到使用相对路径的脚本、样式等。

如果提供了尾部斜杠，则一切正常。

为了解决这个问题，我安装了**URL Rewrite** ( [http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite) ) 并添加了规则以附加斜杠（如果不存在）。这是一个预定义的规则，如下所示：

```
<rewrite>
<rules>
    <rule name="AddTrailingSlashRule1" stopProcessing="true">
        <match url="(.*[^/])$" />
        <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        </conditions>
        <action type="Redirect" url="{R:1}/" />
    </rule>
</rules> 
```

到目前为止一切顺利，唯一的问题是现在通过在包名称/ url 和 chache 破坏之间添加一个斜杠来破坏包：

IE：

[http://www.mysite.com/myApp/bundles/myBundle/?v=8_EQPT2vzBgg4HcGhkeTQpLE1flm2VOsp3A1ZEy-C3k1](http://www.mysite.com/myApp/bundles/myBundle/?v=8_EQPT2vzBgg4HcGhkeTQpLE1flm2VOsp3A1ZEy-C3k1)

（**注意**myBundle 和 ?v=8.... 之间的**/ ）**

我曾尝试从条件中排除“捆绑”，但我没有运气。

我想知道如何从条件中排除某些路径（并非我的所有捆绑包都在路径上使用“捆绑包”）或者可能是一个更简单的规则，允许我为我需要关心的唯一情况添加尾部斜杠about：当用户忘记在我的应用程序 url 末尾键入它时。

谢谢，R。

**更新**

我刚刚向我的主控制器添加了一个永久重定向条件 - 更容易被用户直接在地址栏上键入的那个。这正在解决我的问题。我让这个问题打开，以防有人通过调整路由引擎或使用 URL 重写想出一个更好的主意。

这是代码：

```
public ActionResult Index()
{
    if (!Request.Path.EndsWith("/"))
        return RedirectPermanent(Request.Url.ToString() + "/");
    return View();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T14:25:01.500

以下是添加文件夹排除项的方法：

```
<rule name="AddTrailingSlashRule1" stopProcessing="true">
   <match url="(.*[^/])$" />
   <conditions>
      <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
      <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
      <add input="{URL}" pattern="myBundle$" negate="true" />
   </conditions>
   <action type="Redirect" url="{R:1}/" redirectType="Found" />
</rule> 
```

只需为您的排除项添加新的 {URL} 行。此示例“以”myBundle 结尾，但您可以改用以下内容：

```
<add input="{URL}" pattern="/bundles/" negate="true" /> 
```

这将执行包含搜索，因为它不检查开始 (^) 或结束 ($)。

如果您想反转逻辑以仅包含某些路径，则删除 {URL} 行上的 negate="true"，并将模式设置为您想要包含的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:02:02.807

这听起来像是安装此修复程序应该修复的症状之一。 [http://support.microsoft.com/kb/2520479](http://support.microsoft.com/kb/2520479)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:04:33.233

如果您想在提交查询字符​​串时阻止此规则发生，您可以使用如下条件：

```
<rule name="Add Trailing Slash" stopProcessing="true">
    <match url="^(.*)/$" negate="true" />
    <action type="Redirect" url="{R:0}/" />
    <conditions>
        <add input="{QUERY_STRING}" pattern="(.+)" negate="true" />
    </conditions>
</rule> 
```

`negate="true"`当`(.+)`（至少在字符上）对查询字符串为真时，该条件将确保不执行此规则（ ）。

我还更改了匹配以使用对我来说更清晰和合适的否定形式，但如果您的规则适合您，请保持原样！

# spring - 在不在我的项目中的类上加载时间编织

> ID：15914887
> 
> 赞同：1
> 
> 时间：2013-04-10T00:23:40.043
> 
> 标签：spring, aop, aspectj, spring-aop, load-time-weaving

我正在尝试使用 Spring 为我创建的项目中的几个类提供加载时间编织。当我调用一个不在本地项目中的类时，我无法让它工作。

我创建了一个名为的类`ExampleClass`，当我在其中执行`@Around`一个方法时，我可以看到我对返回所做的修改，但是当我尝试对返回做同样的事情时，`String`我无法得到任何结果。

这是我的`Aspect`代码：

```
@Pointcut("call(* java.lang.String.*(..))")
public void cutString() {}

@Before("cutString()")
public void aroundString() throws Throwable {
    System.out.println("I Never See This");
} 
```

这是我对该代码的调用：

```
public class Main {
    public static void main(String[] args) {
        new ClassPathXmlApplicationContext("classpath:my-context.xml");

        String string = new String("I Only See This");
        System.out.println(string.toLowerCase());
    }
} 
```

的内容`my-context.xml`只是一个`<context:load-time-weaver />`.

我有一个`aop.xml`定义，正如我所说的适用于一个类，但不适用于另一个类：

```
<!DOCTYPE aspectj PUBLIC "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
<aspectj>
    <weaver>
        <include within="com.example.*" />
        <include within="java.lang.String" />
    </weaver>

    <aspects>
        <aspect name="com.example.PerformMonitor" />
    </aspects>
</aspectj> 
```

我是否遗漏了什么，或者这是 Spring 和 AspectJ 的限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T05:18:10.857

默认情况下，aspectj 不会编织任何 java 标准类。据我所知，这是防止安全泄漏的限制。它在 aspectj 文档中进行了描述。可能有一个属性允许更改此行为，但您应该非常确定在开始执行此操作之前需要它。

只需用您自己的一类创建另一个罐子，然后尝试编织这个。这应该开箱即用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:38:51.767

马丁弗雷是对的。有很多方法可以编织 JDK 类（我已经做到了），但这有点棘手，而且不适合新手——而且大多没有必要。您的替代方法是拦截对外部方法的调用，而不是执行外部方法。这样你就不需要编织它们了。干净又容易。只需`call()`用于`execution()`您的外部类。

# .net - Microsoft.Practices.EnterpriseLibrary.Data 的替代方案

> ID：15914895
> 
> 赞同：2
> 
> 时间：2013-04-10T00:24:48.350
> 
> 标签：.net, .net-framework-version

有谁知道 Microsoft.Practices.EnterpriseLibrary.Data 的替代品，它已被弃用，现在当我第一次将它引入 VS2010 时，它甚至无法编译。即使我将应用程序保留为 ASP.NET 2.0 框架应用程序，它仍然会引发错误。

这是我刚刚继承的一个旧的遗留应用程序，我什至不太清楚该库的用途，但它导致我的应用程序严重失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:38:04.620

您正在寻找[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)，而 .NET 的选项列表很长

*   我选择的形式是[ServiceStack](https://github.com/ServiceStack/ServiceStack.OrmLite)
*   [Entity Framework，](http://msdn.microsoft.com/en-us/data/ef.aspx)是微软的官方入口
*   [Dapper](https://github.com/SamSaffron/dapper-dot-net)是一个轻量级的 orm，我相信它是为 StackOverflow 创建的
*   [NHibernate](http://nhforge.org/)是 Java 的 Hibernate 的一个端口，是代码优先 ORM 的鼻祖
*   [Massive](https://github.com/robconery/massive)是由亚音速成名的 Rob Conery 开发的另一种轻量级结构

还有很多，这些是第一个想到的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:25:24.707

`Microsoft.Practices.EnterpriseLibrary.Data`不是默认系统命名空间，这就是它失败的原因，您应该下载包含该程序集的正确版本的 MS EnterpriseLibrary 包并从 Visual Studio 中引用它，已弃用或过时，但如果您仍然拥有它并引用它，它应该仍然工作。

也看看这个：

[什么是 Microsoft.Practices.EnterpriseLibrary.Data](https://stackoverflow.com/questions/14413514/what-is-microsoft-practices-enterpriselibrary-data)

# maven - 如何从源代码构建 HornetQ？

> ID：15914897
> 
> 赞同：0
> 
> 时间：2013-04-10T00:25:21.073
> 
> 标签：maven, hornetq

我对 Maven 并不陌生。但我不知道为什么我的maven使用1.1.1版本的maven-plugin，hornet-maven-plugin。我说版本的原因是存储库没有版本。所以我想我必须更改存储库的插件版本。

源代码在这里（[https://github.com/verystrongjoe/hornetq/tree/master/examples/jms/clustered-queue](https://github.com/verystrongjoe/hornetq/tree/master/examples/jms/clustered-queue)）。

我把它下载到我的本地磁盘上。我导入到我的 Eclipse 中。但结果是如下错误。

```
Failure to find org.hornetq:hornetq-maven-plugin:pom:1.1.1-SNAPSHOT in http://repository.jboss.org/nexus/content/groups/public was cached in the local 
 repository, resolution will not be reattempted until the update interval of jboss-public-repository-group has elapsed or updates are forced 
```

如果你去存储库[http://repository.jboss.org/nexus/content/groups/public](http://repository.jboss.org/nexus/content/groups/public)，有 1.1.0 或 1.0.0。

请让我解释一下..提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:31:39.473

您正在分叉并尝试使用*正在开发的*SNAPSHOT 版本的 HornetQ。这通常比使用已发布版本需要更多的工作。提示一：考虑仅使用 HQ 的已发布版本。

如果没有，请注意：

*   HornetQ 不会`*-SNAPSHOT`将工件版本发布到 Maven 存储库。这就是您在 JBoss Maven 存储库中找不到它们的原因。顺便说一句，有关找出 HornetQ 示例的依赖关系的评论，请参见此处[https://github.com/hornetq/hornetq#recreating-the-examples](https://github.com/hornetq/hornetq#recreating-the-examples)

*   [有关使用https://github.com/hornetq/maven-hornetq-plugin/blob/master/README.md](https://github.com/hornetq/maven-hornetq-plugin/blob/master/README.md)的 SNAPSHOT 版本的基本说明，请参见此处`hornetq-maven-plugin`

请注意，每个链接的内容都很小。我本可以在这里复制他们的内容，但我没有。我的观点是：这些项目有 README 文件可以解决你的问题，**你应该经常检查 README**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:40:03.717

你可以在 super-POM 的[第 716 行](https://github.com/verystrongjoe/hornetq/blob/master/pom.xml#L716)看到答案：

```
 <plugin>
        <groupId>org.hornetq</groupId>
        <artifactId>hornetq-maven-plugin</artifactId>
        <version>1.1.1-SNAPSHOT</version>
     </plugin> 
```

听起来您可能没有足够的知识在 github 源代码的边缘工作。也许您应该改用最近[发布的标签](https://github.com/verystrongjoe/hornetq/tree/HornetQ_2_2_23_AS7_Final)之一？

# ruby-on-rails - 是否可以创建在其行创建时定义的模棱两可的外键？

> ID：15914900
> 
> 赞同：0
> 
> 时间：2013-04-10T00:25:42.043
> 
> 标签：ruby-on-rails, database, postgresql, ruby-on-rails-3.2

我有两个数据库表，`houses`并且`apartments`. 其中每一个都有自己的视图页面，我希望用户对其发表评论。当然，我也有一张`posts`桌子。创建帖子时，它应该有一个引用适当表的外键 id（要么 要么`houses`）`apartments`。有没有一种有效的方法来为`posts`表创建某种类型的模棱两可的外键并在创建时定义它？到目前为止，我想到的问题的最佳解决方案是创建两个外键 id（一个 for`houses`和一个 for `apartments`），并且每个`post`. 谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:37:06.570

**单表继承**允许将对象定义为单独的类，同时仅使用单个数据库表。这适用于结构和功能相似的对象，除了*轻微*的行为差异。

在您的情况下，您有两个子类`House`和`Apartment`，它们非常相似，可以抽象为单个超类 ，`Dwelling`。这个超类将包含房屋和公寓都可以访问的通用方法。`Dwelling`每个子类都将使用自己的子类特定方法继承和扩展它。您将像往常一样实例化一个子类，但在内部 Rails 将使用超类的类型转换实例。因此，您永远不应该直接实例化超类。

值得注意的是，STI 将所有属性组合到一张表中。一个子类的属性将出现在另一个子类中，如果未使用则*为零。*具有大量无关属性的子类将导致填充*nil*值的臃肿表。作为一般规则，当您的子类包含的差异多于相似性时，应考虑多态关联。

* * *

这是我们的做法。~~所有这些都在`app/models/dwelling.rb`~~：

```
class Dwelling < ActiveRecord::Base
  has_many :posts
  # ...common methods...
end 

class House < Dwelling
  has_many :posts, :foreign_key => "dwelling_id"
  # ...house methods...
end

class Apartment < Dwelling
  has_many :posts, :foreign_key => "dwelling_id"
  # ...apartment methods...
end 
```

为了使它起作用，您的`dwelling`表**必须包含一个名为 "type" 的字符串列**。Rails 会看到这一点并自动知道正在使用 STI。注意：应用程序将不再使用`house`和表。`apartment`创建一个`House`对象会将一个新的居住记录保存到数据库中，它有自己的唯一 ID，`type`它将是“房子”。

将新对象分配给`Post`子类时，请使用子类对象的 ID。子类 ID 和超类 ID 都引用相同的记录。请注意`has_many`每个子类中的方法。通过调用获取子类的帖子`@house.posts`。

要推断帖子是发布到房屋还是公寓，您可以使用`@post.dwelling.type`.

* * *

## 编辑：

Rails 3 的自动加载行为要求每个类都在它自己的文件中。因此，子类必须分别在自己的文件中：

```
app/
  models/
    apartment.rb
    dwelling.rb
    house.rb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:50:04.193

多态关联应该可以解决问题。您希望帖子引用房屋和公寓。您必须通过模型添加多态关联，然后为表添加适当的字段。

如果您确实决定采用多态路线，那么您的模型将是什么样子。

# 帖子

```
#Attributes
housing_type :string #Either will `House` or `Apartment`
housing_id :integer #This will reference the id of House or Apartment, depending on what's in your housing_type field

#Associations
belongs_to :housing, :polymorphic => true 
```

# 房屋

```
#Attributes
post_id :integer

#Associations
has_many :posts, :as => :housing 
```

# 公寓

```
#Attributes 
post_id :integer

#Associations
has_many :posts, :as => :housing 
```

关于理解和创建多态关联的基本[指南。](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

当然还有[RailsCast](http://railscasts.com/episodes/154-polymorphic-association-revised)。

# python - Django autocomplete_light 和 city_light - 无效的选择

> ID：15914904
> 
> 赞同：1
> 
> 时间：2013-04-10T00:26:01.823
> 
> 标签：python, django, django-autocomplete-light

我有一个模型，其位置字段映射到 city_light.city，我正在使用一个自动完成字段，允许用户输入他们的城市并将其自动完成到正确/有效的位置模型实例。

```
class Profile(models.Model):
    location = models.ForeignKey(City, blank=True, null=True)

class ProfileForm(ModelForm):

    class Meta:
        model = Profile
        fields = ('location')
        widgets = {
            'location': autocomplete_light.TextWidget(CityAutocomplete, autocomplete_js_attributes={'placeholder':'City, Country', 'minimum_characters':4})
        } 
```

表单字段的工作方式与宣传的完全一样，并显示了自动完成选项列表。但是，当我保存表单/模型时，我收到一个验证错误，这似乎是由于字段未转换为 City 模型实例的主键引起的。

```
Select a valid choice. That choice is not one of the available choices. 
```

我猜我需要像下面实现的 CityAutocomplete 一样扩展 AutocompleteModelBase，但我不确定如何并且我一直无法找到一个工作示例。

```
class CityAutocomplete(autocomplete_light.AutocompleteModelBase):
    search_fields = ('search_names',) 
```

[https://github.com/yourlabs/django-cities-light/blob/master/cities_light/contrib/autocompletes.py](https://github.com/yourlabs/django-cities-light/blob/master/cities_light/contrib/autocompletes.py)

感谢您的帮助，如果我的问题格式不正确，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:36:22.163

您的问题并非特定于 django-autocomplete-light。你正在做的事情没有机会工作，原因如下：

*   `ForeignKey`默认情况下， like的表单字段`location`是[ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)，
*   `ModelChoiceField`接受是 pks 中模型的值`ModelChoiceField.queryset`，`TheModel.objects.all()`默认情况下，
*   小`TextWidget`部件[是一个`TextInput`](http://django-autocomplete-light.readthedocs.org/en/latest/_modules/autocomplete_light/widgets.html#TextWidget)，
*   一个[`TextInput`小部件只是一个`<input type="text" />`](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#textinput)，
*   a 的值`<input type="text" />`在表单提交时直接发送到服务器。

结果，使用文本小部件选择几个城市，如“里斯本”和“马德里”，将如下所示：

```
<input type="text" value="Lisboa, Madrid" name="location" /> 
```

这意味着表单将发布`{'location': 'Lisboa, Madrid'}`。虽然这对 a 有好处`CharField`，但它不适用于 a ，`ModelMultipleChoiceField`它会期望像`{'location': [3,5]}`3 是 Lisboa 的 pk 和 5 是马德里的 pk 的地方。

以同样的方式，a`ModelChoiceField`会期望`{'location': 3}`它`autocomplete_light.ChoiceWidget`能够做到。

要解决此问题，请使用 a`ChoiceWidget`而不是 a `TextWidget`。我已经[在教程](https://django-autocomplete-light.readthedocs.org/en/latest/tutorial.html#using-autocomplete-widgets-in-non-model-forms)中澄清了这一点，我希望现在更好。

# c++ - C++ 中是否有半环或幺半群的标准抽象？

> ID：15914905
> 
> 赞同：13
> 
> 时间：2013-04-10T00:26:03.703
> 
> 标签：c++, math, boost, monoids

boost 或任何其他常见的 C++ 库是否提供[半环](http://en.wikipedia.org/wiki/Semiring)或[幺半群](http://en.wikipedia.org/wiki/Monoid)抽象（例如模板类）？

我有一些算法我想用这些抽象结构来表达，但到目前为止我还没有遇到任何东西。我可以自己编写，但理想情况下，这些将在我已经在使用的库中，例如 boost。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T00:44:47.310

[**SGI STL**](http://www.sgi.com/tech/stl/)有[MonoidOperation](http://www.sgi.com/tech/stl/MonoidOperation.html)概念。例如，为**MonoidOperation实现了**[幂](http://www.sgi.com/tech/stl/power.html)函数。

 **[**Boost.Graph**](http://www.boost.org/doc/libs/1_53_0/libs/graph/doc/index.html)库还定义了[Monoid 概念](http://www.boost.org/doc/libs/1_53_0/libs/graph/doc/Monoid.html)。

除了[已经建议](https://stackoverflow.com/a/15914975/1762344) [的编程元素](https://rads.stackoverflow.com/amzn/click/com/B002HMJYAQ)之外，您还可以查看Alexander Stepanov（ **EoP**的作者之一）的[编程笔记](http://www.stepanovpapers.com/notes.pdf)。 **笔记**是免费提供的，并且与**EoP**书有一些重叠。

 ********EoP**和**Notes**之间存在风格差异- **EoP**非常简洁，就像数学教科书一样，但**Notes**更“非正式” - 有一些小故事等。

顺便说一句，两者都对上面提到的**幂**函数实现进行了一些讨论。

PS 有 Alexander Stepanov 的精彩演讲：

*   [编程元素](https://www.youtube.com/watch?v=Ih9gpJga4Vc)
*   [STL及其设计原则](https://www.youtube.com/watch?v=COuHLky7E2Q)
*   [A9讲座](http://www.youtube.com/watch?v=wrmXDxn_Zuc&list=PLHxtyCq_WDLV5N5zUCBCDC2WqF1VBDGg1&index=1)
*   [最普遍的衡量标准](http://www.stepanovpapers.com/stepanov_gcd.mov)

PPS[收集了 Alexander A. Stepanov 的论文](http://www.stepanovpapers.com/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T00:34:30.437

据我所知，C++ 标准库对这些结构没有任何抽象。然而，STL 的发明者 Alex Stepanov 写了一本名为Elements [*of Programming*](https://rads.stackoverflow.com/amzn/click/com/032163537X)成为进一步探索的良好起点。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T07:05:59.897

[**Boost.Operators**](http://www.boost.org/doc/libs/1_53_0/libs/utility/operators.htm#grpd_oprs)提供了一种为类定义算术运算符组的便捷方法。

预定义概念（仅限语法鸭类型）包括环、有序环、欧几里得环、有序欧几里得环、场和有序场。您应该能够通过从适当的运算符类组派生来为半环或幺半群定义自己的类。********

# javascript - 检测其他打开的网站甚至带有 js 的应用程序的数量（可能）？

> ID：15914911
> 
> 赞同：0
> 
> 时间：2013-04-10T00:26:58.147
> 
> 标签：javascript, jquery, ruby-on-rails, audio, volume

这可能吗？谷歌似乎对此没有任何帮助..

这样，如果用户在另一个网站上播放视频或歌曲，我的音量会自动降低

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:11:45.797

不，这是不可能的。

如果可能的话，它必须是特定于浏览器的，我认为不会发生这种情况。尽管知道音频是否在另一个应用程序（或选项卡）中播放似乎无害，但这是一个滑坡，不可避免地会导致开发人员要求越来越多。你说的是在一个非常大的防火墙上戳一个小洞，这是有充分理由的。当普通用户开始对浏览器中的 javascript 能够在其所在的沙箱之外查看时感到不安全时，我们都回到了 Web 开发的黑暗时代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:02:37.847

其他应用程序的音量几乎完全由分配它的程序分配和拥有的变量控制。因此，要访问它，您必须直接通过危险区域访问其他应用程序变量...

我玩了一段时间试图破解 Flash 游戏（不是恶意的，这是我必须学习的一项技能），如果不与界面本身进行实际交互，几乎不可能确定什么在控制音量。

完成此操作的主要方法是查看要更改的变量的值。

“我有 300 枚弹药，我想要 1,000,000 枚弹药”

所以你必须搜索一个值为300的内存地址。你会找到一堆。

'射击一些子弹'

弹了几下，寻找新的值，最终可以找到你想要的内存地址，但是，这是一个非常艰巨的过程，而且你很容易通过修改不应该修改的变量来使浏览器崩溃。

这就是为什么它可能是不可能的

# java - 在 Java 中处理 SQL 连接池清理和错误处理的正确方法是什么？

> ID：15914914
> 
> 赞同：1
> 
> 时间：2013-04-10T00:27:09.937
> 
> 标签：java, mysql, jdbc, innodb

我一直在学习如何使用 Oracle JDBC 在 Java 中使用 MySQL，并且我正在尝试进入 try/catch 和池清理的心态。

我想知道以下代码是否是完美清理所有内容的正确方法，或者您是否注意到我的代码中需要我遗漏的东西的漏洞。作为记录，我打算使用 InnoDB 及其行锁定机制，这就是我关闭自动提交的原因。

```
try
{
    connection = getConnection(); // obtains Connection from a pool

    connection.setAutoCommit(false);

    // do mysql stuff here
}
catch(SQLException e)
{
    if(connection != null)
    {
        try
        {
            connection.rollback(); // undo any changes
        }
        catch (SQLException e1)
        {
            this.trace(ExtensionLogLevel.ERROR, e1.getMessage());
        }
    }
}
finally
{
    if(connection != null)
    {
        try
        {
            if(!connection.isClosed())
            {
                connection.close(); // free up Connection so others using the connection pool can make use of this object
            }
        }
        catch (SQLException e)
        {
            this.trace(ExtensionLogLevel.ERROR, e.getMessage());
        }
    }
} 
```

`getConnection()`从池中返回一个 Connection 对象并`connection.close()`关闭它，将其释放回池中*（所以有人告诉我，这仍然是新手，如果我说的是垃圾，请道歉）*。任何对此的帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:42:32.207

我建议不要在 finally 块中将 autocommit 设置回 true - 依赖 autocommit 设置为 true 的其他线程不应假定池中的连接处于此状态，而是应该在使用之前将 autocommit 设置为 true连接（就像这个线程将 autocommit 设置为 false 一样）。

此外，您应该在调用 close() 之前检查连接的 isClosed 属性。

除此之外，我没有看到任何问题。

# javascript - 元素背景图像 DataURL

> ID：15914917
> 
> 赞同：0
> 
> 时间：2013-04-10T00:27:30.180
> 
> 标签：javascript, html

有什么方法可以让回调`background-image`加载以 64 为基数`DataURL`。我可以使用图像`src`属性缓存它，但是使用数据 url 吗？如何 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:29:57.817

应该按照通常的方式工作：

```
var image = new Image();
image.src = "data:image/  png;base64,iVBORw0KGgoAAAANSUh.......";
image.onload = function() {
    //image was loaded
}; 
```

对于 Base64 字符串，浏览器的缓存当然是禁用的，这就是为什么它通常只用于小图像，比如图标和东西。

您可以在此处在线将图像转换为 Base64：http: [//base64img.com/#encode](http://base64img.com/#encode)

请注意，某些浏览器可能会限制 Base64 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:40:58.193

似乎 style.BackgroundImage 属性没有异步设置值。所以我的问题解决了。

# php - 在php中转换为超类

> ID：15914926
> 
> 赞同：1
> 
> 时间：2013-04-10T00:28:33.647
> 
> 标签：php, datetime

我正在寻找一种将类投射到其父级的方法。情况：

为了减少与 DateTime 对象的混淆，我扩展了 DateTime 类以包含一个`__toString`方法。

```
class myDateTime extends DateTime{
public $formatstring = null;

public function format($format = null) {
    if(null === $format){
        $format = $this->formatstring;
    }
    if(null === $format){
        $format = 'Y-m-d H:i:s';
    }

    return parent::format($format);
}

public function __toString(){
    return $this->format();
}

} 
```

虽然这很好用，但我后来发现它正在中断`DateTime::diff`，我假设正在检查传入`object`的是`DateTime`.

```
public function TotalTime(){
    $start = $this->getStart();
    $end   = $this->getEnd();
    $diff  = $end->diff($start);

    $minutes = 
        ($diff->days*1440) +
        ($diff->h * 60) +
        ($diff->i *  1) +
        ($diff->s / 60);

    echo("<pre>Start:$start\nEnd:$end\nMin:$minutes\n</pre>");
    var_dump($diff);

    return $minutes;
} 
```

生成的 DateInterval 始终将每个值都归零。

关于对继承类进行类型转换的最有效方法有什么建议吗？PHP 5.4

*编辑：* 这似乎取决于环境。目前，这似乎只发生在 Windows/PHP 上。

```
PHP 5.4.10 (cli) (built: Dec 19 2012 20:33:35)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:49:00.513

有时您只需要提出问题即可回答。

因此，由于我们无法强制转换，我们将不得不创建一个新对象。我们只需要确保比`DateTime`对象更好地检查继承（如果您正在修复某些东西，请比原始问题更好地修复它）。此方法覆盖父方法：

```
public function diff($object,$absolute=false){
    if($object instanceof DateTime){
        $object = new DateTime($object);
    }
    return parent::diff($object,$absolute);
} 
```

这将检查继承树以查看过去是否有任何东西从 DateTime 继承，这将允许它在其他人继承时继续工作`myDateTime`。

# entity-framework-4 - 如何使 LINQPad 表达式与 entityFramework 一起使用

> ID：15914937
> 
> 赞同：0
> 
> 时间：2013-04-10T00:30:26.770
> 
> 标签：entity-framework-4, linqpad

以下表达式在 LINQPad 中正确运行。使用 EntityFramework 它运行但不排序（没有运行时错误只是错误的结果）。

非常简单的表格：

分数 - 整数 0 -300

类型 - 字符串 - 其中四个（男性 - 女性，游戏和系列

日期 - 这里不重要

```
var scoresTest = from h in HighScores
                         where h.Date > startDate
                         orderby h.Type, h.Score descending // doesn't sort in EF
                         group h by h.Type into g
                         let fewItems = g.Take(15)
                         select new {key = g.Key, scores = fewItems }; 
```

我使用的是相同的 Db，可以看到从 EF 返回的分数只是数据库中的第一个分数。

谁能建议如何重写查询以在 LINQPad 和 EF 中工作。

:)

# sql-server - FreeTDS / SQL Server UPDATE 查询无限期挂起

> ID：15914939
> 
> 赞同：1
> 
> 时间：2013-04-10T00:30:41.680
> 
> 标签：sql-server, freetds

我正在尝试`UPDATE`从 python 脚本运行以下查询*（注意我已经删除了数据库信息）*：

```
print 'Connecting to db for update query...'
db = pyodbc.connect('DRIVER={FreeTDS};SERVER=<removed>;DATABASE=<removed>;UID=<removed>;PWD=<removed>')
cursor = db.cursor()
print '    Executing SQL queries...'
for i in range(len(data)):
    sql = '''
        UPDATE product.sanction
        SET action_summary = '{action_summary}'
        WHERE sanction_id = {sanction_id};
        '''.format(sanction_id=data[i][0], action_summary=data[i][1])
    cursor.execute(sql)
cursor.close()
db.commit()
db.close() 
```

但是，它无限期挂起，没有错误。

我是 pyodbc 的新手，但考虑到我在执行`SELECT`查询时没有问题，应该正确设置它。我确实必须调用`CAST`查询`SELECT`（我已经在`sanction_id AS INT`[ `int identity`on the database] 和`action_summary AS TEXT`[ `nvarchar`on the database] 中进行了转换）以正确填充数据，所以问题可能出在某个地方，但我不知道从哪里开始调试。将文本转换为`NVARCHAR`也没有做任何事情。

下面是 data 中的行之一的示例：

```
(2861357, 'Exclusion Program: NonProcurement; Excluding Agency: HHS; CT Code: Z; Exclusion Type: Prohibition/Restriction; SAM Number: S4MR3Q9FL;') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:08:43.037

我找不到我的问题，但我最终使用了 QuerySets 而不是运行`UPDATE`查询。

# javascript - 创建一个切换按钮来更改页面视图

> ID：15914940
> 
> 赞同：0
> 
> 时间：2013-04-10T00:30:46.817
> 
> 标签：javascript, asp.net-mvc, knockout.js, knockout-templating

我正在使用淘汰赛 js 来显示我的数据，并且我还使用它来绑定模板。我有一个页面以两种不同的方式显示相同的信息：一种是网格视图，另一种是列表视图。目前我在页面加载时显示了两个视图。我想创建两个按钮，一个用于网格，一个用于列表。我不知道如何使用 Knockout js 进行操作，任何提示或帮助表示赞赏。

**查看页面**

```
<div data-bind="template: {name:'grid-template'}, visible: !showList()"></div>
<div data-bind="template: {name:'list-template'}, visible: showList()"></div>

<input type="button" value="Toggle" data-bind="click: toggleView"/>

<script style="float:left"  type="text/html" id ="grid-template">
    <section " style="width:100%; float:left">
    <section id="users" data-bind="foreach: Users">
        <div id="nameImage">
            <figure id="content">
                <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <figcaption>
                    <a title="Email" id="emailIcon" class="icon-envelope icon-white" data-bind="attr:{'href':'mailto:' + Email()}"></a>
                    <a title="Profile" id="profileIcon" class="icon-user icon-white"></a>
                </figcaption>
            </figure>
            <p data-bind="text:Name"></p>
            </div>
        </section>
    </section>
</script>

<script style="float:left" type="text/html" id="list-template">
        <div data-bind="foreach: Users">
            <div style="width:60%; float:left; margin:10px; height:58px">
                <img style="float:left; margin-right:5px" width="58" height="58" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <p style="height:58px; float:left; vertical-align:central" data-bind="text:Name"></p>
                <a style="float:right"  title="Profile"  class="icon-user icon-black"></a>
                <a style="float:right"  title="Email" class="icon-envelope icon-black" data-bind="attr:{'href':'mailto:' + Email()}"></a>
            </div>
        </div>
</script>

@section scripts{
    @Scripts.Render("~/bundles/user" + ViewBag.Layout.AppVersionForUrls)

    <script type="text/javascript">
        (function ($) {
            $.views.User.GetUser('@url');
        })(jQuery);
    </script>
    } 
```

**淘汰赛JS**

```
$.views.User.UserViewModel = function (data) {
        var self = this;
        self.Name = ko.observable(data.Name);
        self.Email = ko.observable(data.Email);
        self.ContentRole = ko.observable(data.ContentRole);
        self.MD5Email = ko.observable(data.MD5Email);
        self.GravatarUrl = ko.computed(function () {
           return 'http://www.gravatar.com/avatar/' + self.MD5Email() + '?s=300&d=identicon&r=G';
        });
        self.showList = ko.observable(true);
        self.toggleView = function () {
        self.showList(!self.showList());
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:56:17.167

如果我理解正确，您可以将每个 div 的可见属性绑定到每次按下按钮时翻转的布尔值。

HTML：

```
<input type="button" value="Toggle" data-bind="click: toggleView"/>

<div data-bind="visible: showGrid()">Grid</div>
<div data-bind="visible: !showGrid()">List</div> 
```

查看型号：

```
var ViewModel = function() {
    var self = this;

    self.showGrid = ko.observable(true);
    self.toggleView = function() {
        self.showGrid(!self.showGrid());
    }
}

var vm = new ViewModel();
ko.applyBindings(vm); 
```

这是一个[jsFiddle](http://jsfiddle.net/psteele/d64xR/)。

# xslt - 不需要的元素数据（没有元素）出现在 xslt

> ID：15914944
> 
> 赞同：0
> 
> 时间：2013-04-10T00:31:04.547
> 
> 标签：xslt

我正在尝试应用转换来生成 rdf 文档。我的源 xml 包含一个我想忽略的元素，但输出（通过 SAP 的转换测试工具生成）包括来自 SYSINFO 的元素的（连接！）文本。
我尝试了几种变体（例如 xsl:apply-templates select="asx:abap/asx:/values/CT" ），但我根本没有得到任何输出。唔。花了几个小时尝试不同的事情和研究，但一无所获。任何帮助都非常感谢。约翰

这是我的示例 xml（片段）

```
<?xml version="1.0" encoding="utf-8"?>
<asx:abap xmlns:asx="http://www.sap.com/abapxml"version="1.0">
<asx:values>
<SYSINFO>
    <SERVER_NAME>sapserver06</SERVER_NAME>
    <SYSTEM_ID>ECC</SYSTEM_ID>
    <SAP_RELEASE>701</SAP_RELEASE>
    <SYS_NR>00</SYS_NR>
    <CLIENT>800</CLIENT>
    <EXE_USER>XXX</EXE_USER>
    <LOGON_LANGUAGE>E</LOGON_LANGUAGE>
    <DATE>2013-04-09</DATE>
    <TIME>12:06:58</TIME>
    <TIMEZONE>CST</TIMEZONE>
    <OPERATING_SYSTEM>Windows NT</OPERATING_SYSTEM>
    <LICENSE_NUMBER>YYY</LICENSE_NUMBER>
    <SAP_CUSTOMER>ZZZ</SAP_CUSTOMER>
    <CLIENT_CATEGORY>C</CLIENT_CATEGORY>
    <LANGUAGES_INSTALLED>JED</LANGUAGES_INSTALLED>
</SYSINFO>
<CT>
<item>
    <ID>1</ID>
    <TABNAME>T000</TABNAME>
    <FIELDNAME>ADRNR</FIELDNAME>
    <KEYFLAG/>
    <ROLLNAME>CHAR10</ROLLNAME>
</item>
.....
</CT>
</asx:values>
</asx:abap> 
```

这里是转变

```
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:sap="http://www.sap.com/sapxsl" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sap_coda="http://www.sapmantics.com/sap_coda#" version="1.0">

  <xsl:strip-space elements="*"/>

  <xsl:template match="/">
    <rdf:RDF>
      <xsl:apply-templates/>
    </rdf:RDF>
  </xsl:template>

  <xsl:template>
    <xsl:for-each select="//item">
      <rdf:Description>
        <xsl:attribute name="rdf:about">
          <xsl:value-of select="TABNAME"/>
        </xsl:attribute>
        <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#ctable"/>
        <sap_coda:t2f>
          <rdf:Description>
            <xsl:attribute name="rdf:about">
              <xsl:value-of select="FIELDNAME"/>
            </xsl:attribute>
            <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#cfield"/>
            <xsl:if test="KEYFLAG=X">
              <sap_coda:keyflag>X</sap_coda:keyflag>
            </xsl:if>
          </rdf:Description>
        </sap_coda:t2f>
      </rdf:Description>
    </xsl:for-each>
  </xsl:template>

</xsl:transform> 
```

最后，这是输出：

```
<?xml version="1.0" encoding="utf-16"?>
sapserver06ECC70100800XXXE2013-04-0917:21:50CSTWindowsNTYYYZZZCJED
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sap_coda="http://www.sapmantics.com/sap_coda#">
<rdf:Description rdf:about="T000">
<rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#ctable"/>.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:33:11.353

文本节点的连接`<SYSINFO/>`可以通过元素节点的默认处理来解释：

[http://www.w3.org/TR/xslt#built-in-rule](http://www.w3.org/TR/xslt#built-in-rule)

我不知道您使用的是哪个 XSLT 处理器，但令我惊讶的是您的`//item`处理程序没有因缺少`@match`属性而被标记。您可以使用以下内容对其进行更新，它将`<item/>`按文档顺序处理每个元素：

```
<xsl:template match="item">
    <rdf:Description> 
```

为防止您的 SYSINFO 内容包含在您的 RDF 中（如果这是您的意图），请使用以下内容更新您的根模板：

```
<rdf:RDF>
    <xsl:apply-templates select="//item"/>
</rdf:RDF> 
```

- - - - - -编辑 - - - - - - - - - - - - -

有了这个输入

```
<?xml version="1.0" encoding="utf-8"?>
<asx:abap xmlns:asx="http://www.sap.com/abapxml">
    <asx:values>
        <SYSINFO>
            <SERVER_NAME>sapserver06</SERVER_NAME>
            <SYSTEM_ID>ECC</SYSTEM_ID>
            <SAP_RELEASE>701</SAP_RELEASE>
            <SYS_NR>00</SYS_NR>
            <CLIENT>800</CLIENT>
            <EXE_USER>XXX</EXE_USER>
            <LOGON_LANGUAGE>E</LOGON_LANGUAGE>
            <DATE>2013-04-09</DATE>
            <TIME>12:06:58</TIME>
            <TIMEZONE>CST</TIMEZONE>
            <OPERATING_SYSTEM>Windows NT</OPERATING_SYSTEM>
            <LICENSE_NUMBER>YYY</LICENSE_NUMBER>
            <SAP_CUSTOMER>ZZZ</SAP_CUSTOMER>
            <CLIENT_CATEGORY>C</CLIENT_CATEGORY>
            <LANGUAGES_INSTALLED>JED</LANGUAGES_INSTALLED>
        </SYSINFO>
        <CT>
            <item>
                <ID>1</ID>
                <TABNAME>T000</TABNAME>
                <FIELDNAME>ADRNR</FIELDNAME>
                <KEYFLAG/>
                <ROLLNAME>CHAR10</ROLLNAME>
            </item>
        </CT>
    </asx:values>
</asx:abap> 
```

和这个样式表

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:sap="http://www.sap.com/sapxsl"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:sap_coda="http://www.sapmantics.com/sap_coda#" 
    version="1.0">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <rdf:RDF>
            <xsl:apply-templates select="//item"/>
        </rdf:RDF>
    </xsl:template>

    <xsl:template match="item[parent::CT]">
        <rdf:Description>
            <xsl:attribute name="rdf:about">
                <xsl:value-of select="TABNAME"/>
            </xsl:attribute>
            <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#ctable"/>
            <sap_coda:t2f>
                <rdf:Description>
                    <xsl:attribute name="rdf:about">
                        <xsl:value-of select="FIELDNAME"/>
                    </xsl:attribute>
                    <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#cfield"/>
                    <xsl:if test="KEYFLAG=X">
                        <sap_coda:keyflag>X</sap_coda:keyflag>
                    </xsl:if>
                </rdf:Description>
            </sap_coda:t2f>
        </rdf:Description>
    </xsl:template>

    <xsl:template match="item[parent::FOO]"/> 

    <xsl:template match="item"/> 
</xsl:transform> 
```

我从 Saxon-EE 9.4.0.3 得到这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF xmlns:sap="http://www.sap.com/sapxsl"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:sap_coda="http://www.sapmantics.com/sap_coda#">
   <rdf:Description rdf:about="T000">
      <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#ctable"/>
      <sap_coda:t2f>
         <rdf:Description rdf:about="ADRNR">
            <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#cfield"/>
         </rdf:Description>
      </sap_coda:t2f>
   </rdf:Description>
</rdf:RDF> 
```

以及 xstlproc 的输出：

```
<?xml version="1.0"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sap="http://www.sap.com/sapxsl" xmlns:sap_coda="http://www.sapmantics.com/sap_coda#">
  <rdf:Description rdf:about="T000">
    <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#ctable"/>
    <sap_coda:t2f>
      <rdf:Description rdf:about="ADRNR">
        <rdf:type rdf:resource="http://www.sapmantics.com/sap_coda#cfield"/>
      </rdf:Description>
    </sap_coda:t2f>
  </rdf:Description>
</rdf:RDF> 
```

# php - 如何打开在 div 中解析的链接？

> ID：15914945
> 
> 赞同：1
> 
> 时间：2013-04-10T00:31:07.827
> 
> 标签：php, javascript, html, parsing, html-parsing

我的网站解析一本西班牙语词典，让您一次搜索多个单词。如果你查找“hola”，你会得到第一个 div）。有些词提出了建议，例如“casa”，而不是“hola”之类的定义：

![在此处输入图像描述](https://i.stack.imgur.com/6Qi4I.jpg)

我正在寻找的是：

![在此处输入图像描述](https://i.stack.imgur.com/Pi9JL.png)

所以，我想：当您单击建议时（例如我发布的示例中的 CASAR）以将结果打印在像 HOLA 这样的 div 中。这是使用的代码：

```
$words = array('word0','word-1');
    function url_decode($string){
    return urldecode(utf8_decode($string));
    }

    $baseUrl = 'http://lema.rae.es/drae/srv/search?val=';

    $cssReplace = <<<EOT

    <style type="text/css">
    // I changed the style
    </style>
    </head>
 EOT;

 $resultIndex = 0;

foreach($words as $word) {
if(!isset($_REQUEST[$word]))
    continue;

$contents = file_get_contents($baseUrl . urldecode(utf8_decode($_REQUEST[$word])));

$contents = str_replace('</head>', $cssReplace, $contents);
$contents = preg_replace('/(search?[\d\w]+)/','http://lema.rae.es/drae/srv/search', $contents);

echo "<div style='
      //style
     ", (++$resultIndex) ,"'>", $contents,
        "</div>";
} 
```

我试过：`$contents .= '<a href="">' . $word . '</a><br/>';`但它没有用，我也不知道在哪里/如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:55:17.333

好的，我将使用 jQuery 作为示例，因为如果您是编程新手，这将是最容易完成这项工作的。

**注意：我不建议在学习 JAVASCRIPT 之前使用 JQUERY - 风险自负，但至少稍后再回来学习 JAVASCRIPT**

首先，阅读如何在[此处](http://jquery.com)下载和安装 jquery 。

其次，你会想要这样的东西，让我们假设这是你的标记。

```
<div id="wrapper">
    <!-- This output div will contain the output of whatever the MAIN
         word being displayed is, this is where HOLA would be from your first example -->
    <div id="output">

    </div>

    <!-- This is your suggestions box, assuming all anchor tags in here will result in
         a new word being displayed in output -->
    <div id="suggestions">

    </div>
</div>

<!-- Le javascript -->
<script>
    // Standard jQuery stuff, read about it on the jquery documentation
    $(function() {
        // The below line is a selector, it will select any anchor tag inside the div with 'suggestions' as identifier
        $('#suggestions a').click(function(e) {
            // First, stop the link going anywhere
            e.preventDefault();

            // Secondly, we want to replace the content from output with new content, we will use AJAX here
            // which you should also read about, basically we set a php page, and send a request to it
            // and display the result without refreshing your page
            $.ajax({
                url: 'phppage.php',
                data: { word: 'casar' },
                success: function(output) {
                    // This code here will replace the contents of the output div with the output we brought back from your php page
                    $('#output').html(output);
                }
            })
        });
    })
</script> 
```

希望评论会有所启发，然后您需要设置将发送 GET 请求的 php 脚本。（例如[http://some.address.com/phppage.php/?word=casar](http://some.address.com/phppage.php/?word=casar)）

然后你只需回显 PHP 的输出

```
<?php

    $word = $_GET['word'];
    // Connect to some database, get the definitions, and store the results
    $result = someDatabaseFunctionThatDoesSomething($word);
    echo $result;
?> 
```

希望这会有所帮助，我希望你有很多阅读要做！

# ruby-on-rails - 在 Rails 3 中使用 Twitter gem，需要去这里分享发布到 twitter 的内容吗？

> ID：15914963
> 
> 赞同：1
> 
> 时间：2013-04-10T00:33:20.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, twitter, rubygems

我安装了 Twitter gem，并试图让用户在我的网站上发布的任何内容也自动转到 Twitter。

当人们“发布”时，这里是“创建”下使用的控制器

```
def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      if @micropost.review
        UserMailer.review_email(@user).deliver
        redirect_to root_path
      else
        flash[:success] = "Post"
        @twitter = Twitter::Client.new
        @twitter.update(**""**)
      redirect_to root_path
    end
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end 
```

如果我只使用@twitter.update("Hi Twitter")，上面的代码就可以工作，“Hi Twitter”会被发送到 Twitter，这与用户实际发布的内容不同。我尝试了 micropost.content 和其他一些行，但它们给我带来了错误。

这是 schema.db

```
create_table "microposts", :force => true do |t|
    t.text     "content"
    t.string   "image" 
```

这是我网站上的提要的样子，但我也想在某人的 Twitter 网站上显示

feed_item.html.erb（查看）

```
<%= truncate(feed_item.content, :length=>140, :omission=>' ...') %>
<%= link_to feed_item.image.path, feed_item.user if feed_item.image? %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:36:26.797

您确定 @micropost.content 包含字符串或任何内容吗？尝试：

```
@twitter.update(@micropost.content.to_s) 
```

# javascript - 有人可以在幕后解释为什么这个 Jquery Hover 图像命令不起作用吗？

> ID：15914964
> 
> 赞同：0
> 
> 时间：2013-04-10T00:33:28.490
> 
> 标签：javascript, jquery, html

有人可以在幕后解释为什么这个 Jquery Hover image 命令不起作用吗？

我已经看到了工作示例，但我想知道为什么这不起作用。（不正确的语法不是我要找的答案）

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script type="text/javascript"></script>
      <script>
        $(document).ready(function() {
            $("#banner").fadeIn(1500,function(){
                $("#contactBt").fadeIn('slow');
            });
        $("#contactBt").hover(function(){
            $("#contactBt").css("src","images/contactBtHover.png");
        },function(){
            $("#contactBt").css("src","images/contactBtNoHover.png");
        });
        });
    </script>
</head>

<body bgcolor=212121>

    <div style="margin-top:15%; margin-left:10%" >
        <img id="banner" style="display:none;" src="images/banner.png" width=1000 height=275/>
    </div>

    <img id="contactBt" style="display:none; margin-top:0%; margin-left:10%" src="images/contactBtNoHover.png" width=250/>
</body> 
```

基本上我只想说当鼠标悬停在图像上时，将其图像源更改为不同的图像。回来路上的副诗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T00:35:38.470

那将是：

```
$("#contactBt").attr("src","images/contactBtHover.png"); 
```

as`src`是属性，而不是样式。

# css - 在 thead 和 tbody 之间插入 div 内容

> ID：15914966
> 
> 赞同：4
> 
> 时间：2013-04-10T00:33:36.603
> 
> 标签：css

我有一个表，我希望在表头和正文之间有一个输入行 - 目前，现有代码通过使“表头”成为不与实际表内容绑定的单独 div 来实现它。

有没有办法使用 CSS（如果需要，可能使用 javascript）在表格的标题和内容之间插入一个 div？

```
╔══════════════════════════════════╦═════════╦════════╗
║ Col1                             ║ Col2    ║ Col3   ║ <- thead
╠══════════════════════════════════╬═════════╬════════╣
║            <Inserted DIV content>                   ║
║ Value 1                          ║ Value 2 ║ Value3 ║ <- first tbody tr
╚══════════════════════════════════╩═════════╩════════╝ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:36:54.137

您是否尝试过使用

```
<td id="foo"> 
```

然后使用标准的 getElementByID javascript 调用？

# excel - 宏中的函数

> ID：15914970
> 
> 赞同：1
> 
> 时间：2013-04-10T00:34:23.080
> 
> 标签：excel, vba

我正在尝试编写一个简单的宏来将小写字母转换为大写。每当我运行它时，它都会给出一条错误消息：“编译错误：找不到项目或库”

它不识别 UCase 和 Format 函数。我该如何解决这个问题？

```
Sub text001()
Dim x As String
    x = "is lois a good girl"
    x = UCase(x)
    mystr = Format("this is good", ">")
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:10:41.230

当我遇到这个问题时，我发现经常保存、关闭和重新打开可以解决这个问题。

否则，在“参考”对话框中，添加另一个参考，保存并关闭。

当您重新打开时，您的参考文献应该被修复。

# ios - ACAccountStore requestAccessToAccountsWithType 不调用完成块的问题

> ID：15914977
> 
> 赞同：1
> 
> 时间：2013-04-10T00:34:54.563
> 
> 标签：ios, objective-c, social-framework, acaccountstore

我一直有这个问题，找不到任何东西。我正在使用 Social 框架来构建一个基本的 Twitter 应用程序（我自己的一个学习项目），并且直到最近帐户商店停止完成我的帐户访问请求时才遇到任何主要障碍。从我阅读和收集的所有示例中，当应用程序启动时，我请求访问帐户，然后一旦获得授权就可以从那里开始。

我必须获取帐户的代码是：

```
ACAccountType* accountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
NSLog(@"Making this call to getTwitterAccount");
[self.accountStore
 requestAccessToAccountsWithType:accountType
 options:nil
 completion:^(BOOL granted, NSError* error) {
    NSLog(@"Testing, this should show up");
    if (granted) {
        NSArray* accounts = [self.accountStore accountsWithAccountType:accountType];
        [self getAccountFromArray:accounts];
    }
    else {
        if (error.code == 6)
            NSLog(@"No twitter account");
        else
            NSLog(@"Access denied");
    }
}]; 
```

两个 NSLog 语句用于调试目的。我从中调用包含此代码的函数，`viewDidLoad`该`getAccountFromArray:(NSArray*)`函数只是确定用户是否希望将哪个帐户用于应用程序（如果需要，显示模式视图）。我的问题是永远不会调用完成块，除非我对模拟器中的帐户进行更改。更改帐户后，代码立即执行并显示模式（现在只显示一条消息），但对于任何其他执行，此块永远不会被触发，并且在控制台中看到的唯一打印是`"Making this call to getTwitterAccount"`. 以前，这对于获取单个帐户效果很好，我能够让时间线获取工作和打印，但是由于某种原因它停止触发，我无法成功`SLRequest`或基于它执行任何其他操作。

我在谷歌上搜索并发现了使用此功能的问题，但这些问题都与完成块永远不会触发有关。

**编辑**

好的，所以一个更新，一直在处理这个问题，出于某种原因，将调用检查帐户的函数转移到 views`initWithNibName:bundle:`方法似乎工作，它可靠地执行（尽管在应用程序加载后有一点点）。该函数被调用两次，但只执行一次完成，并且只有当我从`init`- 也许是这个原因？

# mysql - 具有 LIKE 和 AND 子句的 MySQL 查询

> ID：15914978
> 
> 赞同：1
> 
> 时间：2013-04-10T00:35:06.933
> 
> 标签：mysql, sql

我有以下查询：

```
$query="SELECT * FROM products 
                 WHERE  productname LIKE '%$searchterm%' 
                 OR shortdescription LIKE '%$searchterm%' 
                 OR description LIKE  '%$searchterm%' AND VISIBLE != 0"; 
```

该查询返回我想要的记录，但也返回可见 = 0 的记录。

谁能告诉我我做错了什么？

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:38:11.327

使用括号：

```
SELECT 
    * 
FROM 
    products 
WHERE  
    (
        productname LIKE '%$searchterm%' 
     OR shortdescription LIKE '%$searchterm%' 
     OR description LIKE  '%$searchterm%'
    ) 
AND VISIBLE != 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:50:38.357

这是关于[运算符优先级的](http://en.wikipedia.org/wiki/Order_of_operations)

运算符`AND`先运行，然后`OR`。

所以你的查询是这样的：

```
$query="SELECT * FROM products 
                 WHERE  productname LIKE '%$searchterm%' 
                 OR shortdescription LIKE '%$searchterm%' 
                 OR (description LIKE  '%$searchterm%' AND VISIBLE != 0"); 
```

将您的查询修复为：

```
$query="SELECT * FROM products 
                 WHERE  (productname LIKE '%$searchterm%' 
                 OR shortdescription LIKE '%$searchterm%' 
                 OR description LIKE  '%$searchterm%') AND VISIBLE != 0"; 
```

# css - 图像顶部的控件

> ID：15914980
> 
> 赞同：0
> 
> 时间：2013-04-10T00:35:28.710
> 
> 标签：css

我已经搜索过，但找不到一个好的答案。

*   我需要在图像顶部放置一些控件，即一个文本框和两个按钮。
*   图像设置为页面宽度的 100%，高度由浏览器自动调整。
*   控件需要与图像的确切位置对齐，并且还需要调整大小。

[你可以看到我在这里](http://partyfund.us/)谈论的图像。我认为这个位置是不言自明的。

如果需要，我可以在没有控制尺寸的情况下生活，但确实需要定位。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:48:43.107

您可以将`position:fixed`或`position:absolute`with组合`@media queries`用于输入和按钮的宽度。因此，当您的图像调整大小时，您的控件保持相同的位置。例如，`position:absolute; left:10%; top:20%;`。

话虽如此，当您可以通过创建[响应式设计](http://responsivedesign.co.nz/)来节省加载时间并拥有实际可用的东西时，拥有一个巨大的图像真的没有意义。就像现在一样，该图像无法在手机中读取，而且您的输入会变得很小！

[@media 查询](http://www.w3.org/TR/css3-mediaqueries/)将允许您针对不同的屏幕分辨率（和像素密度）使用不同的样式。在您的情况下，您可以将当前布局用于桌面，并开始在 iPad 和较小的手机上移动元素。因此，例如，对于智能手机，您可以在此布局中包含元素（320 像素宽度）：

*   标识
*   菜单
*   视频/图片
*   登录/注册按钮
*   页脚 1
*   页脚 2
*   页脚 3

# windows-runtime - 在 WinRT 下如何在 XAML 中使用 ActiveX？

> ID：15914985
> 
> 赞同：0
> 
> 时间：2013-04-10T00:35:44.173
> 
> 标签：windows-runtime, activex, winrt-xaml

我正在尝试在 WinRT XAML 应用程序中使用 RDP 控件。MS 示例是一个似乎使用 ActiveX 组件的 JS 装置。如何将 ActiveX 控件合并到 XAML 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T14:49:15.620

[在将 Build 应用程序迁移到 Windows 8 Consumer Preview 白皮书](http://go.microsoft.com/fwlink/?LinkID=242888)的第 5 页上，您可以找到以下部分：

**使用 JavaScript 在 Windows 应用商店应用程序中删除 ActiveX 对象**

> 以前，可以实例化一小组 ActiveX 对象。
> 
> 其中包括一些与 XML 相关的 ActiveX 对象。实例化这些的能力已被删除。

# python-2.7 - 防止 PySide 跑赢 Python

> ID：15914992
> 
> 赞同：0
> 
> 时间：2013-04-10T00:36:30.477
> 
> 标签：python-2.7, pyqt, pyside

我有一个 PySide 应用程序，它将许多按钮连接到一个函数调用，该函数调用衍生出一堆外部进程（这并不理想，但这是必要的）。

函数调用的运行时间不到四分之一秒，但它仍然为用户提供了超越我的代码的机会，从而导致延迟、冻结或崩溃。

这让我想到了几个问题......

1.  将可调用对象连接到信号究竟意味着什么？假设按钮 A 的点击信号连接了一个 Python 函数 f。如果单击 A，然后在 f 退出之前再次单击，PySide 是否只是将另一个对 f 的调用排队，还是做一些更有趣的事情？

2.  一种可能的解决方案是使 f 与信号断开连接，然后在退出之前重新连接。在我开始重写东西来尝试这个之前，有没有人知道这是否有效，或者是否有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:06:47.280

我猜它的功能与其他所有 GUI 工具包的功能完全相同，即尝试在每次按下按钮时执行该功能。如果您不希望这样，那么您可以采取以下几种方法：

1.  禁用按钮，直到功能完成
2.  使用一个标记值，例如 self.running，并添加一个检查以查看它是否为 True。如果是，请返回。否则，将其设置为 True 并执行。只需记住在函数结束时将其设置回 False
3.  做你提到的并断开功能与信号的连接

这些是主要的。我敢肯定还有一些更深奥的解决方案。

# iphone - 更改 iphone 语言以便应用程序在各自的语言环境中启动？

> ID：15914995
> 
> 赞同：0
> 
> 时间：2013-04-10T00:37:03.433
> 
> 标签：iphone, ios, user-interface, automation, ios-ui-automation

有没有办法以自动方式更改 iphone 国际语言，以便在我们启动应用程序时它显示为目标区域设置 (ll-CC) 的本地化？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:07:52.673

Yes there is! I actually wrote a small bash script to do just that for my UI Automation-powered app screenshot taker. Grab it from here:

[https://github.com/jonathanpenn/ui-screen-shooter/blob/master/bin/choose_sim_language](https://github.com/jonathanpenn/ui-screen-shooter/blob/master/bin/choose_sim_language)

Feel free to explore it to see how it works. To use it you just need to run it with the locale code you choose.

```
./choose_sim_language en 
```

All the simulator versions will be set to the one you gave it. Run the script without any parameters to have it print out the current language.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:31:41.167

从这个意义上说，不确定您所说的自动化是什么意思。您需要将您的应用程序国际化，然后提供本地化翻译。如果您已针对特定语言本地化您的应用程序，那么它将在使用该语言的语言环境中工作。

可以在[此处](https://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/BPInternational.html)找到有关国际化（iOS 和 OS X）的基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:52:47.557

如果您针对的是实际设备，则需要覆盖`AppleLanguages`首选项：

```
[[NSUserDefaults standardUserDefaults] setObject: [NSArray arrayWithObjects:lang, nil] forKey:@"AppleLanguages"]; 
```

在此处查看完整的工作解决方案：http: [//aggressive-mediocrity.blogspot.com.es/2010/03/custom-localization-system-for-your.html](http://aggressive-mediocrity.blogspot.com.es/2010/03/custom-localization-system-for-your.html)

您不需要该文章中指出的自定义本地化宏，只需要`#undef`它们和`#define`它们来使用您的类。

您需要一些机制来更改应用程序中的语言：UI 中的某些内容或只是一个环境变量（如果您正在执行此操作，请在启动 Instruments 时在命令行中设置它）。

# objective-c - Objective-C：使用静态变量

> ID：15914996
> 
> 赞同：2
> 
> 时间：2013-04-10T00:37:12.003
> 
> 标签：objective-c, struct, messages, class-method, ivar

给定下面的代码，宇宙飞船（程序中只有一个）会检查它是否可以支付新零件的费用，然后“如果（是）”就建造它。发送消息时`payFor:`，应该像下面那样处理 iVar，还是应该像每个事务一样使用方法`+(void)deduct: (ShipObject *) cost;`，或者我应该使用`struct`和使用结构算术？

```
@ implementation Spaceship
+(void) payFor: (ShipObject) *shipObject
{
    totalEnergy     -= [shipObject energy];     
    totalCredits    -= [shipObject credits];
    totalSamples    -= [shipObject samples];
}

+(void) buildShipObject: (ShipObject) *shipObject
{
    if ([self canBuild: shipObject]) {
        [self payFor: shipObject];
...
} 
```

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:47:02.767

首先，由于方法是类方法，而不是实例方法，我假设变量不是 ivars，而是某种静态变量。

如果允许使用某些而非全部支付方式（例如，仅使用能源和样品，而不是信用）进行支付，那么您应该使用三种不同的方法。否则，您的`payFor`方法对于 Objective C 来说是非常惯用的。使用 C`struct`应该保留用于 Objective C 类不再提供足够性能的罕见情况。

考虑将宇宙飞船设为单例，并使用 ivars：如果您决定在游戏中引入更多飞船，或者对对象做一些更容易完成的事情（例如对象状态的外部化），这可能会很方便。

# java - 从表格内的字符串中删除句点。简单的。- 爪哇

> ID：15914997
> 
> 赞同：0
> 
> 时间：2013-04-10T00:37:13.743
> 
> 标签：java, string

我有这个字符串是通过'string.split(" ");'从表中得到的 我遇到的问题是其中一个应该包括一个句号。我将如何去寻找这个时期。我知道我必须搜索它，因为我在 Lua 中编码。虽然我们使用了 String.find() 方法。

从 String[] 表中的字符串中删除句点的方法是什么？

提前致谢 ：）

这是给学校的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:40:39.320

如果我理解正确的话，你有一个字符串，你已经通过分隔一个空格来分割它。您现在要在结果字符串数组中搜索句点。

```
for(String s : stringArray) {
    if (s.contains(".")) {
        //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:49:31.723

不幸的是，我对 RegExp 并不那么聪明，但你可以......

```
String s = "This.is.a.test";
while (s.contains(".")) {
    s = s.replace(".", "");
}
System.out.println(s); 
```

我确信有一个很棒的单行正则表达式可以做同样的事情

**根据评论更新**

因为`String`不可变，所以需要将其重新分配回原始数组

```
String[] apples = {"one", "two.", "three"};
for (int index = 0; index < apples.length; index++) {
    String s = apples[index];
    while (s.contains(".")) {
        s = s.replace(".", "");
    }
    apples[index] = s;
}
for (String s : apples) {
    System.out.println(s);
} 
```