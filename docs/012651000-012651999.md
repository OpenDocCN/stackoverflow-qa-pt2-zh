# StackOverflow 问答 12651000-12651999

# android - 在显示活动内容时访问启动器屏幕？

> ID：12651000
> 
> 赞同：1
> 
> 时间：2012-09-29T07:57:37.980
> 
> 标签：android, uiactivityindicatorview, android-windowmanager

是否可以在显示活动时获得启动器的触摸访问权限？而活动仅覆盖屏幕区域的四分之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:19:59.180

正如我所说，制作一个覆盖四分之一屏幕区域的活动布局，我为活动添加了标志`getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE, PixelFormat.TRANSLUCENT);`

它有效:) 可以访问启动器屏幕，即使我的活动是开放的。我注意到另一件事我无法在启动器上获得点击事件，也无法将焦点从我的活动转移到启动器，它只是给我在启动器上的触摸事件。

任何人都对此有所了解，我如何才能将焦点从我的活动转移到启动器或任何打开的应用程序。

# eclipse - 使用 Scala 时如何从 Eclipse 中引用第三方库，例如微风

> ID：12651003
> 
> 赞同：0
> 
> 时间：2012-09-29T07:58:33.333
> 
> 标签：eclipse, scala, scala-ide

我有 Eclipse，安装了 eclipse-ide 插件，并选择了“sbt”作为构建器。我想使用第三方库，特别是 scala-breeze，但我不确定如何指示 eclipse/scala-ide 获取和安装它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:10:55.080

通过添加`breeze`依赖项`sbt`，然后运行`sbt eclipse`命令以配置所有内容。每次构建中的某些内容发生更改时，都必须运行该命令。

# eclipse - 如何更改 tomcat ${appserver.lib} 指向的内容？

> ID：12651004
> 
> 赞同：2
> 
> 时间：2012-09-29T07:58:44.237
> 
> 标签：eclipse, jakarta-ee, tomcat, ant

我正在做关于[http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html)的教程，当我尝试构建 ant 构建时，我得到了错误：

```
D:\workspace\springapp\build.xml:85: D:\apache-tomcat-6.0.14\lib does not exist. 
```

问题似乎是因为**"${appserver.lib}"**指向**D:\apache-tomcat-6.0.14\lib**而正确的目录应该是**C:\apache-tomcat-6.0.35\lib** - 注意不同版本的tomcat目录名。如何更改 this 指向的内容？我已经将 %CATALINA_HOME% 设置为正确的路径，并将 %CATALINA_HOME%\bin 添加到路径

我正在使用带有 Eclipse 的 Windows 7 64 位

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T08:14:56.480

简单地改变

> appserver.home=C:/apache-tomcat-6.0.35

这是`build.properties`文件中的正确目录。

# objective-c - AVRecorder 从后台模式返回时延迟？

> ID：12651013
> 
> 赞同：0
> 
> 时间：2012-09-29T08:00:03.890
> 
> 标签：objective-c

我经常使用 AVRecorder 和 AVPlayer。我看到他们俩都延迟了，当我回到我的应用程序时，在她处于后台之后 - 例如，如果我试图录制，它需要 4 秒才能开始。

在我的代码中，我准备在录制**之前**录制，但是当回到应用程序时，它没有帮助。

我能做些什么来改进它？

这是在应用程序打开时完成的（在开始时，而不是从后台返回时！）

```
-(void)prepareToRecord
{
    NSArray *dirPaths;
    NSString *docsDir;

    NSString *sound=[NSString stringWithFormat:@"sound%d.caf",[memoryInstnace getNextFreePlace]];
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) ;
    docsDir = [dirPaths objectAtIndex:0];
    currentSoundFilePath = [docsDir stringByAppendingPathComponent:sound];
    NSURL *soundFileURL = [NSURL fileURLWithPath:currentSoundFilePath];

    NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                              [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                              [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                              [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                              nil];

    NSError *error;

    recorder = [[AVAudioRecorder alloc] initWithURL:soundFileURL settings:settings error:&error];

    //to not having a delay befor record
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryRecord error:nil];

    if (recorder)
    {
        [recorder prepareToRecord];
        recorder.meteringEnabled = YES;

    }
    else
        NSLog( @"error in recordings"  );

} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:46:23.737

如果另一个应用程序通过启动一个活动的 AVAudioSession 来控制麦克风，那么 iOS 会淡出该应用程序的控制权，并在您激活会话时将其提供给您。这可能需要一两秒钟。这是正在发生的事情吗？或者是其他什么让你慢下来？

# android - 如何列出通过另一个活动的图像

> ID：12651021
> 
> 赞同：1
> 
> 时间：2012-09-29T08:01:47.057
> 
> 标签：android, image, listview, android-intent, android-activity

我是android开发的初学者。这是我的列表图像代码。它不会将图像传递给另一个活动。为什么它不传递图像另一个活动。任何人都可以修复它吗？

```
public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = getLayoutInflater();

        View row = inflater.inflate(R.layout.row, parent, false);

        TextView textview = (TextView) row.findViewById(R.id.tvTop);
        ImageView imageview = (ImageView) row.findViewById(R.id.list_image);

        textview.setText(data_topText[position]);
        imageview.setImageResource(data_image[position]);

        row.setOnClickListener(new OnClickListener() {

            public void onClick(View row) {
                    TextView textview = (TextView) row.findViewById(R.id.tvTop);
                    ImageView imageview = (ImageView) row.findViewById(R.id.list_image);

                    String product = textview.getText().toString();
                    int images = imageview.getId();

                    Intent i = new Intent(getApplicationContext(),
                            SecondScreenActivity.class);

                    i.putExtra("name", product);
                    i.putExtra("zurag", images);
                    startActivity(i);
            }
        });

        return (row);

    } 
```

这是 SecondScreenActivity.java：

```
public class SecondScreenActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screen2);

    TextView txtName = (TextView) findViewById(R.id.txtName);
    ImageView images = (ImageView) findViewById(R.id.image);

    Intent intent = getIntent();

    String name = intent.getStringExtra("name");
    int pic =intent.getIntExtra("zurag", 0);

    txtName.setText(name);
    images.setImageResource(pic);

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:21:36.637

而不是 setOnClickListener() 为您的行，尝试使用 setOnItemClickListener() 为您的 ListView：

```
lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View row, int position, long id) {
                TextView textview = (TextView)row.findViewById(R.id.tvTop);
                    ImageView imageview = (ImageView) row.findViewById(R.id.list_image);

                    String product = textview.getText().toString();
                    int images = imageview.getId();

                    Intent i = new Intent(getApplicationContext(),
                            SecondScreenActivity.class);

                    i.putExtra("name", product);
                    i.putExtra("zurag", images);
                    startActivity(i);

            }

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:42:03.140

在动态分配 Resource 给您的`Imageview`.

```
int images = getID(); // Will Not Return you Image Resource you set. 
```

分配 ImageResource 时尝试设置标签标识，这将帮助您在第二个活动中检索图像资源。

```
imageView.setTag("any tag");
String imageTag =  (String) imageView.getTag(); // To retrieve 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:44:34.917

只需在图像数组上发送图像的位置并在第二个活动中检索就足够了......在第一个活动中：

```
 i.putExtra("name", product);
 i.putExtra("pos", position); 
```

在第二个活动中：

```
int pic =intent.getIntExtra("pos", 0); 
```

//并设置images.setImageResource(data_image[pic]);

重要提示：即使在第二个活动中，您也需要保留图像数组（即 data_image）.. 或者您可以尝试发送位图...

# jquery - Get an element of HTML content in JQuery

> ID：12651023
> 
> 赞同：-4
> 
> 时间：2012-09-29T08:03:10.843
> 
> 标签：jquery, html

I am new in JQuery and having problem in getting element from HTML.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:05:23.947

If I understood correctly you need the context part of [`jQuery()`](http://api.jquery.com/jQuery/) function:

```
// string with HTML content
var content = '<div><p class="myel">Test</p></div>';

// returns '<p>' element
var myEl = $(".myel", content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:05:51.850

```
$("#id").html() or $("#id").text();

"#" is used for id 
. is used for class

<div id="id">this is text</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T08:05:56.390

Although this question is rather vague I'll take a stab at understanding your issue anyway,

You can retrieve any HTML element as an object in `jquery` simply by referencing it in any number of ways that is possible in `jquery`.

**i.e**

if you have a `div` with an `id` of `noodles` ( `<div id="noodles"></div>` ) you can reference it in jquery with something like

```
myHTMLelement = $('#noodles').html(); 
```

or if you want the html as plain text you can do the following

```
myHTMLelement = $('#noodles').text(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T08:09:40.157

Just use $(this is the parent of element).find(expected element). just like as

> $(div).find(table)

see this [link](http://api.jquery.com/find/)

# playframework-2.0 - 如何在 Play Framework 中保留重要字段

> ID：12651034
> 
> 赞同：1
> 
> 时间：2012-09-29T08:05:07.277
> 
> 标签：playframework-2.0, weka, ebean

我正在尝试使用 Play Framework (2.03) 中的 Ebeans 来持久化复杂对象。特别是，我创建了一个包含 weka.classifier.Classifier 类型字段的类（Weka 是一个流行的机器学习库 - 请参阅[http://weka.sourceforge.net/doc/weka/classifiers/Classifier.html](http://weka.sourceforge.net/doc/weka/classifiers/Classifier.html)） . 分类器实现了 Serializeable 所以我希望我能摆脱类似的东西

```
@Entity
@Table(name = "classifiers")
public class ClassifierData extends Model {
    @Id
    public Long id;
    public Classifier classifier;
} 
```

但是，Evolutions 脚本建议使用以下数据库结构：

```
create table classifiers (
   id  bigint auto_increment not null,
   constraint pk_classifiers primary key (id))
) 
```

换句话说，它忽略了 Classifier 类型的字段。

（如果有任何区别，数据库是 MySQL）

如何使用 Ebean/Evolutions/PlayFramework 存储复杂的可序列化对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:35:46.810

我假设您正在使用 JPA 进行数据库访问。您可以存储，请参阅[Java EE5 教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnbqa.html)

*   用户定义的可序列化类型
*   字节[]
*   字节[]

即使 Classifier 类实现了 java.io.Serializable，Classifier 类型似乎也没有保存到数据库中。我认为您应该将 byte[] 用于保存的模型，将 String 用于分类器类型。您可以使用以下方法来查看 weka 如何编写和读取模型。

*   weka.core.SerializationHelper.write
*   weka.core.SerializationHelper.read

将序列化对象本身作为 byte[] 存储在数据库中。

```
@Entity
@Table(name = "classifiers")
public class ClassifierData extends Model {
    @Id
    public Long id;
    public byte[] classifierSavedModel;
    public String classifierType
} 
```

# jquery - 为什么我有这样的错误？我使用数据表 jquery 插件

> ID：12651040
> 
> 赞同：-4
> 
> 时间：2012-09-29T08:06:07.057
> 
> 标签：jquery, html, twitter-bootstrap, datatables

我正在使用[css](https://github.com/DataTables/DataTables/blob/master/media/css/jquery.dataTables.css)

对于[数据表](https://github.com/DataTables/DataTables/blob/master/media/js/jquery.dataTables.js)

请帮助我解决我想实现表格排序的问题。谢谢！

我有这样的错误。

![在此处输入图像描述](../Images/70262287601f6aa54c0c8ad91d01286b.png)

完整代码：

```
 <!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">

    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">

    <link href="https://github.com/DataTables/DataTables/blob/master/media/css/jquery.dataTables.css" rel="stylesheet" type="text/css">
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>

    <script src="https://github.com/DataTables/DataTables/blob/master/media/js/jquery.dataTables.js"></script>
    <script>
        $(document).ready(function() {
            $('#example').dataTable( {
                "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>"
            });
            $.extend( $.fn.dataTableExt.oStdClasses, {
                "sWrapper": "dataTables_wrapper form-inline"
            });
        });
    </script>
</head>
<body>

<div class="container">

    <div class="span12">
        <table id="example" class="data-results table table-striped table-hover table-bordered tablesorter">

        </table>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:09:07.933

`https://github.com/DataTables/DataTables/blob/master/media/js/jquery.dataTables.js`是 HTML 文档而不是 JavaScript 文件。

Github 存储库不是 CDN。您需要检查代码（或点击[项目主页](http://www.datatables.net/)上的下载链接）并将其托管在某处。

# ios - 如何使用 UIRotationGestureRecognizer 进行延迟旋转？

> ID：12651041
> 
> 赞同：0
> 
> 时间：2012-09-29T08:06:07.143
> 
> 标签：ios, cocoa-touch, uigesturerecognizer

我想“检测”旋转 - 而不是跟踪它。我需要顺时针或逆时针处理手势旋转`M_PI/8`，然后将图像旋转`M_PI_2`或`-M_PI_2`。

可以使用`UIRotationGestureRecognizer`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:05:48.793

此代码按我的需要工作：

```
- (IBAction)rorationDid:(UIRotationGestureRecognizer *)recognizer
{
    static CGFloat angle = 0;
    if (recognizer.state == UIGestureRecognizerStateBegan)
        angle = recognizer.rotation;
    if (recognizer.state != UIGestureRecognizerStateEnded)
        return;

    float rotation = 0;
    if (angle - recognizer.rotation > M_PI/8)
        rotation = -M_PI_2;
    if (angle - recognizer.rotation < -M_PI/8)
        rotation = M_PI_2;

    if (rotation != 0.0)
    {
        // Let's do rotation
    }
} 
```

更新：

这段代码：`static CGFloat angle = 0;`应该真的是一个`@property`not `static`。

# javascript - 未出现警报消息

> ID：12651042
> 
> 赞同：2
> 
> 时间：2012-09-29T08:06:08.693
> 
> 标签：javascript, html, xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
var x=document.f1.tt1.value;
alert(x);
</script>
</head>
<body>
<form name="f1">
<input type="text" name="tt" value="jawadi" />
</form>
</form>
</body>
</html> 
```

**没有出现提示信息，是什么问题？感谢您的帮助 ：） ：） **

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:11:18.140

除了其他答案之外，您的文档可能还没有准备好。在您的脚本标签中有：

```
 $(document).ready(function(){
       var x = document.f1.tt.value;
    }) 
```

更好的方法可能是为您的输入提供一个 id。

```
<input type="text" name="tt" id="myInput" value="jawadi" />
$(document).ready(function(){
     var x = $("#myInput").val();    
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:07:57.757

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

</head>
<body>
<form name="f1">
<input type="text" name="tt" value="jawadi" />
</form>
</form>
<script type="text/javascript">
var x=document.f1.tt.value;
alert(x);
</script>
</body>
</html> 
```

因为 javacript not found f1 试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T08:08:44.117

代替

```
var x=document.f1.tt1.value; 
```

和

```
var x=document.f1.tt.value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T08:19:13.933

修改代码： [DEMO](http://jsfiddle.net/VkjyA/)

```
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Untitled Document</title>
 <script type="text/javascript">
    function alertX(){
       var x=document.f1.tt.value;
       alert(x);
    }
 </script>
 </head>
 <body  onload='alertX();'><!-- call alertX on body load-->
    <form name="f1">
        <input type="text" name="tt" value="jawadi" />
    </form>
 </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T08:24:28.370

您的脚本的问题是您试图获取尚未在 DOM 中创建的元素的值。所以你得到空值，因为它不存在。您可以做的一件事是在页面底部包含脚本，以便它获取值

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
     </head>
    <body>
    <form name="f1">
    <input type="text" name="tt" value="jawadi" />
    </form>
    </form>
    </body>
    <script type="text/javascript">
       var x=document.f1.tt.value;//the name of textbox is tt
       alert(x);
    </script>
    </html> 
```

如果您对 jquery 感到满意，您可以尝试的第二件事是使用 .ready 函数，因此它将在页面加载后获取值。

```
$(document).ready(function(){
 var x=document.f1.tt.value;//the name of textbox is tt
           alert(x);

}); 
```

# java - 如何使 BoxLayout 表现为垂直 FlowLayout？

> ID：12651043
> 
> 赞同：3
> 
> 时间：2012-09-29T08:06:08.807
> 
> 标签：java, swing, layout, boxlayout, flowlayout

`FlowLayout`从右侧执行“压力”，因此所有组件都试图采用它们的最小宽度。相反，`BoxLayout`尝试分散所有组件以填充空间的整个高度。

我可以添加一些填充物作为最后一个组件或使所有组件的高度最小的东西`BoxLayout`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T15:34:56.227

您可以使用 Box.createGlue()，它返回一个组件，该组件占用的空间与 BoxLayout 提供的一样多。将其添加到垂直 BoxLayout 的底部会将其他组件压缩到顶部。

您还可以使用嵌套布局。

# jsf - JSF SelectMany 复选框，绑定到子列表

> ID：12651047
> 
> 赞同：2
> 
> 时间：2012-09-29T08:07:12.177
> 
> 标签：jsf, jsf-2, primefaces

我正在使用Primefaces 的[SelectMany 复选框](http://www.primefaces.org/showcase-labs/ui/selectManyCheckbox.jsf)，并且在将值存储在 Bean 中时遇到了一些麻烦。

我需要一组 SelectManyCheck 框。这是到目前为止的xhtml，

```
<c:set var="obj" value="#{userBean.userSettingsMap}"> </c:set>
<c:forEach items="#{obj}" var="entry">
  <h:outputText value="#{entry.key} " /><!--Correctly prints the key -->
  <p:selectManyCheckbox value="#{entry.value}"><!-- `entry.value` SHOULD correspond to inner lists --->
    <!-- I want values of these check boxes to be updated in my ManagedBean's property -->
    <f:selectItem itemLabel="Option 1" itemValue="Option 1" />
    <f:selectItem itemLabel="Option 2" itemValue="Option 2" />
    <f:selectItem itemLabel="Option 3" itemValue="Option 3" />
</p:selectManyCheckbox>
</c:forEach> 
```

Select Many 复选框的数组呈现在页面上。但是当我提交页面时，子列表没有更新。而是我的 ManagedBean 中的对象没有得到更新。

因此，在提交时，我会在对话框中显示空白列表。

> {键 1=[]，键 2=[]}

在我的 ManagedBean 中，

```
 private Map<String,List<String>> userSettingsMap; 
```

子列表将对应于 `<p:selectManyCheckbox>`视图上的每个

提交按钮与示例中的相同。

```
 <p:commandButton value="Submit" update="display" oncomplete="dlg.show()" />
    <p:dialog header="Selected Values" modal="true" showEffect="fade" hideEffect="fade" widgetVar="dlg">

      <p:outputPanel id="display">
          <p:dataList value="#{userService.userMaintainceMap}" var="option">
              #{option}
          </p:dataList>             
      </p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:23:45.823

您使用 JSTL 对 Map 进行迭代`c:forEach`，这意味着每个条目都将是最有可能实现的内部迭代器类型`Map.Entry`（例如[MappedValueExpression.Entry](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.1.4/com/sun/faces/facelets/tag/jstl/core/MappedValueExpression.java#MappedValueExpression.Entry)）。这里有一个`setValue`方法，但它不符合 JavaBeans 约定，这意味着 EL 不会找到它。

结果`#{entry.value}`将被视为**只读属性**，`<p:selectManyCheckbox>`无法将其值存储在那里。我希望会出现一个例外，但也许它在某个地方被吞没了。一个普通的表单和一个普通的命令按钮肯定会在这里触发异常。

第二个问题是您有一个带有泛型的 Map 作为您选择的目标，但是 EL 将无法看到这些泛型（归咎于 Java 中臭名昭著的缺乏具体化的泛型），因此特别看不到该值是列表。然后它将`String[]`在您的地图中放置一个实例。

如果您使用按其键索引的 Map 表达式作为选择的目标并声明要键入的 Map `String[]`，您的代码应该可以工作。

例如

内部复选框.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">

    <h:body>

        <h:form>
            <c:forEach items="#{innerCheckboxBacking.userSettingsMap}" var="entry">
                <h:outputText value="#{entry.key}" />
                <p:selectManyCheckbox value="#{innerCheckboxBacking.userSettingsMap[entry.key]}">
                    <f:selectItem itemLabel="Option 1" itemValue="Option 1" />
                    <f:selectItem itemLabel="Option 2" itemValue="Option 2" />
                    <f:selectItem itemLabel="Option 3" itemValue="Option 3" />
                </p:selectManyCheckbox>
            </c:forEach>

            <h:commandButton value="Submit" action="#{innerCheckboxBacking.action}" />

        </h:form>

    </h:body>
</html> 
```

InnerCheckboxBacking.java：

```
@ManagedBean
@ViewScoped
public class InnerCheckboxBacking {

    private Map<String, String[]> userSettingsMap = new LinkedHashMap<>();

    @PostConstruct
    public void init() {
        userSettingsMap.put("key1", null);
        userSettingsMap.put("key2", null);
    }

    public void action() {
        String[] result = userSettingsMap.get("key1");
        for (String string : result) {
            System.out.println(string);
        }
    }

    public Map<String, String[]> getUserSettingsMap() {
        return userSettingsMap;
    }

} 
```

# objective-c - 替代 NSGlyph 的 -glyphIsEncoded:?

> ID：12651052
> 
> 赞同：1
> 
> 时间：2012-09-29T08:07:58.470
> 
> 标签：objective-c, macos, cocoa

在移植一些***古老***的代码时，我遇到了一个在 OS X 10.4 中大部分被弃用的特殊类，称为 NSGlyph。在谷歌上搜索了一段时间后，我[几乎](http://lists.apple.com/archives/cocoa-dev/2002/Jan/msg01116.html)没有找到关于它究竟做了什么，以及为什么它对框架中的 if-else 分支很重要的问题。特别是，该方法`NSFont -glyphIsEncoded:`似乎是某些分支的重要组成部分，如果只是将其删除并继续前进，以防万一发生故障，这对我来说将是一种耻辱。有人知道合适的替代品`NSFont -glyphIsEncoded:`吗？

```
if (glyph == 0xffff || ![font glyphIsEncoded:glyph]) {
    // Switch to getting it from the system font for "normal" keys
    // get the glyph from the layout manager (this normally will be the ascii value)
    glyph = [layoutManager glyphAtIndex: i];
font = [NSFont systemFontOfSize:[font pointSize]]; // use the system font
        //NSLog(@"Asking layout manager for glyph for %@, got %d", glyphName, glyph);
    }
    if (glyph != 0xffff && [font glyphIsEncoded:glyph]) {
        NSRect bounds = [font boundingRectForGlyph:glyph];
        [path moveToPoint: NSMakePoint(left, 0.0 - [font descender])];
        [path appendBezierPathWithGlyph: glyph inFont: font];
    left += [font advancementForGlyph: glyph].width;
        continue; // rendered a character
    } //etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:13:50.923

根据[文件](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSFont_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/uid/20000382-glyphIsEncoded_)，

```
[font glyphIsEncoded:glyph] 
```

可以替换为

```
glyph < [font numberOfGlyphs] 
```

# node.js - Node.js 是否真的在下面使用了多个线程？

> ID：12651055
> 
> 赞同：11
> 
> 时间：2012-09-29T08:08:05.497
> 
> 标签：node.js, asynchronous, posix

在我阅读了关于 node.js 的所有文献之后，我仍然回到这个问题，node.js 本身是否在后台使用了多个线程？我认为答案是肯定的，因为如果我们使用简单的异步文件读取示例，则必须做一些工作来读取文件，但是如果节点的主事件循环没有处理这项工作，那一定意味着应该有一个 POSIX 线程运行某个负责文件读取的地方，然后在完成后将回调放在要执行的事件循环中。那么当我们说 Node.js 在一个线程中运行时，我们实际上是指 node.js 的事件循环只有一个线程吗？或者我在这里错过了什么......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T08:20:36.930

对于 node.js 上的 Javascript 程序，*只有一个线程*。

如果您正在寻找技术细节，如果底层操作系统需要，node.js 可以免费使用线程来解决异步 I/O。

重要的是永远不要破坏 Javascript 程序的“只有一个线程”抽象。如果有更多的线程，它们所能做的就是为 Javascript 程序中的主线程排队工作，它们自己永远无法执行任何 Javascript 代码。

# ms-access - 更高效的表单过滤方式

> ID：12651056
> 
> 赞同：0
> 
> 时间：2012-09-29T08:08:07.607
> 
> 标签：ms-access, vba, ms-access-2003

我有以下代码：

```
Public Function BuildSQL(stQueryName As String, stWhereClause As String) As String
    On Error GoTo Err_BuildSQL

    Dim SQLcmd  As String
    Dim intPos  As Integer
    Dim db      As Database
    Dim qryOrig As QueryDef

    Set db = CurrentDb()
    Set qryOrig = db.QueryDefs(stQueryName)

    SQLcmd = qryOrig.SQL

    intPos = InStr(SQLcmd, "WHERE")
    If intPos > 0 Then
        SQLcmd = Left(SQLcmd, intPos - 1)
    End If

    intPos = InStr(SQLcmd, ";")
    If intPos > 0 Then
        SQLcmd = Left(SQLcmd, intPos - 1)
    End If

    If Not (stWhereClause = "") Then
        SQLcmd = Trim(SQLcmd) & " WHERE " & stWhereClause & ";"
    Else
        SQLcmd = Trim(SQLcmd) & ";"
    End If

    BuildSQL = SQLcmd

Exit_BuildSQL:
    Set qryOrig = Nothing
    Set db = Nothing
    Exit Function

Err_BuildSQL:
    MsgBox Err.Description
    Resume Exit_BuildSQL

End Function

Private Sub SandBox_Click()
    On Error GoTo Err_SandBox_Click

    Dim db         As Database
    Dim rs         As Recordset
    Dim stSQL      As String
    Dim stFrmName  As String
    Dim stQryName  As String
    Dim stSQLWhere As String
    Dim stIDList   As String

    stFrmName = "Libri"
    stQryName = "Libri_All_Query"

    'Define WHERE clause
    stSQLWhere = ""
    If Not (IsNull([Forms]![Libreria]![Editore]) Or [Forms]![Libreria]![Editore] = "") Then
        stSQLWhere = stSQLWhere & "Libri_Editori.Editore = '" & [Forms]![Libreria]![Editore] & "'"
    End If
    If Not (IsNull([Forms]![Libreria]![CognomeAutore]) Or [Forms]![Libreria]![CognomeAutore] = "") Then
        If (stSQLWhere = "") Then
            stSQLWhere = stSQLWhere & "Autori.Cognome = '" & [Forms]![Libreria]![CognomeAutore] & "'"
        Else
            stSQLWhere = stSQLWhere & " AND Autori.Cognome = '" & [Forms]![Libreria]![CognomeAutore] & "'"
        End If
    End If

    'Here several more fields of the search form will be checked and added

    stSQL = BuildSQL(stQryName, stSQLWhere)

    '*** Code in question!
    Set db = CurrentDb()
    Set rs = db.OpenRecordset(stSQL)
    If Not (rs.EOF And rs.BOF) Then
        stIDList = "("
        rs.MoveFirst
        Do Until rs.EOF = True
            If (stIDList = "(") Then
                stIDList = stIDList & rs.Fields(0)
            Else
                stIDList = stIDList & ", " & rs.Fields(0)
            End If
            rs.MoveNext
        Loop
        stIDList = stIDList & ")"
    Else
        Err.Description = "Errore! Recordset vuoto."
        Resume Err_SandBox_Click
    End If
    DoCmd.OpenForm stFrmName, , , , acFormReadOnly
    Access.Forms(stFrmName).RecordSource = "SELECT * FROM Libri WHERE Libri.ID IN " & stIDList
    '**** End code in question

Exit_SandBox_Click:
    Set db = Nothing
    Set rs = Nothing
    Exit Sub

Err_SandBox_Click:
    MsgBox Err.Description
    Resume Exit_SandBox_Click
End Sub 
```

这段代码可以按我的意愿工作，但“看起来”很慢，即使每个表中只有几条记录的测试数据库也是如此。我相信在评论之间的循环中花费了时间（我如何检查这是否属实？）。有没有比创建记录集并像我一样循环遍历表单更基本、明显和有效的方法来过滤表单？
“图书馆”表格是一个大表格，有几个子表格，可以看到一本书的所有数据。
查询“Libri_All_Query”是数据库中几乎所有表的连接，显示的代码是从我计划添加所有可能的搜索字段的表单中执行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:56:34.583

表单有一个过滤器属性：

```
stWhereClause = "Title Like '" & Me.txtSearch & "*'"
Me.Filter = stWhereClause 
Me.FilterOn = True 
```

过滤器的构造方式应与 WHERE 语句类似。与 Where 相比有一些限制。您可能希望与 DCount 核对是否将返回记录。

编辑

如果您想要一组记录，其中子表单仅包含某些记录，则需要以下几行：

```
SELECT b.Title
FROM Books b 
WHERE b.ID IN (
   SELECT j.BookID FROM BooksAuthorJunction j 
   INNER JOIN  Authors a ON j.AuthorID = a.ID
   WHERE a.Author Like "Arn*") 
```

构建一个以上的表单，书籍作为主要表单，作者作为子表单，然后作者作为主要表单，书籍作为子表单，这是有优势的。它通常对用户来说更容易。

# c++ - 编写移动复制和移动赋值构造函数的有效方法

> ID：12651063
> 
> 赞同：5
> 
> 时间：2012-09-29T08:09:11.913
> 
> 标签：c++, constructor, c++11, variable-assignment, move

以下赋值和复制移动构造函数是最有效的吗？如果有人有其他方法请告诉我？我的意思是 std::swap 怎么样？在下面的代码中通过复制构造函数调用赋值是安全的吗？

```
#include <iostream>
#include <functional>
#include <algorithm>
#include <utility>

using std::cout;
using std::cin;
using std::endl;
using std::bind;

class Widget
{

public:

    Widget(int length)
        :length_(length),
        data_(new int[length])
    {
        cout<<__FUNCTION__<<"("<<length<<")"<<endl;
    }

    ~Widget()
    {
        cout<<endl<<__FUNCTION__<<"()"<<endl;
        if (data_)
        {
            cout<<"deleting source"<<endl;
        } 
        else
        {
            cout<<"deleting Moved object"<<endl;
        }

        cout<<endl<<endl;
    }

    Widget(const Widget& other)
        :length_(other.length_),
        data_(new int[length_])
    {
        cout<<__FUNCTION__<<"(const Widget& other)"<<endl;
        std::copy(other.data_,other.data_ + length_,data_);
    }

    Widget(Widget&& other)
/*
        :length_(other.length_),
        data_(new int[length_])*/
    {
        cout<<__FUNCTION__<<"(Widget&& other)"<<endl;
        length_ = 0;
        data_ = nullptr;
        std::swap(length_,other.length_);
        std::swap(data_,other.data_);
    }

    Widget& operator = (Widget&& other)
    {
        cout<<__FUNCTION__<<"(Widget&& other)"<<endl;

        std::swap(length_,other.length_);
        std::swap(data_,other.data_);

        return *this;
    }

    Widget& operator = (const Widget& other)
    {
        cout<<__FUNCTION__<<"(const Widget& other)"<<endl;
        Widget tem(other);
        std::swap(length_,tem.length_);
        std::swap(data_,tem.data_);

        return *this;
    }
    int length()
    {
        return length_;
    }

private:

    int length_;
    int* data_;
};

int main()
{
    {
        Widget w1(1);
        Widget w2(std::move(Widget(2)));

        w1 = std::move(w2);
    }

    cout<<"ENTER"<<endl;
    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T14:24:10.660

从效率 POV 看起来不错，但包含大量重复的代码。ID

*   `swap()`为您的类实现一个运算符。
*   初始化`length_`和`data_`声明它们的位置。
*   尽可能根据其他操作实施操作。

您*可能*想要使用`std::memcpy`，而不是`std::copy`因为您正在处理原始数组。一些编译器会为你做到这一点，但可能不是所有的编译器......

这是您的代码的重复数据删除版本。注意只有*一个*地方需要知道两个实例是如何`Widget`交换的。只有*一个*地方知道如何分配给定大小的小部件。

**编辑：**您通常还想使用依赖于参数的查找来定位交换，以防万一您有非原始成员。

**编辑：**集成@Philipp 建议让赋值运算符按值接受它的参数。这样，它既充当移动赋值运算符，又充当复制赋值运算符。在移动的情况下，如果你传递一个临时的，它**不会**被复制，因为移动构造函数，*而不是*复制构造函数将用于传递参数。

**编辑：** C++11 允许在右值上调用非成本成员，以便与标准的先前版本兼容。这允许编译奇怪的代码`Widget(...) = someWidget`。通过在声明之后放置需要`operator=`一个左值来防止这种情况发生。请注意，即使没有该限制，代码也是正确的，但这似乎是个好主意，所以我添加了它。`this``&`

**编辑：**正如 Guillaume Papin 指出的那样，析构函数应该使用`delete[]`而不是 plain `delete`。C++ 标准要求通过`new []`删除分配的内存`delete []`，即它允许`new' and`new []` 使用不同的堆。

```
class Widget
{
public:
    Widget(int length)
        :length_(length)
        ,data_(new int[length])
    {}

    ~Widget()
    {
        delete[] data_;
    }

    Widget(const Widget& other)
        :Widget(other.length_)
    {
        std::copy(other.data_, other.data_ + length_, data_);
    }

    Widget(Widget&& other)
    {
        swap(*this, other);
    }

    Widget& operator= (Widget other) &
    {
        swap(*this, other);
        return *this;
    }

    int length() const
    {
        return length_;
    }

private:
    friend void swap(Widget& a, Widget& b);

    int length_ = 0;
    int* data_ = nullptr;
};

void swap(Widget& a, Widget& b) {
    using std::swap;
    swap(a.length_, b.length_);
    swap(a.data_, b.data_);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:41:35.897

答案是针对@Abdulrhman 在上述评论中的抱怨，即某些（模糊的）任务序列失败了。放入单独的答案，因为这样更具可读性。

投诉是这样的

```
Widget w(2);
w = Widget(1) = std::move(w); 
```

崩溃。这是我得到的输出

```
Widget w(2);
w.data()[0] = 0xDEAD; w.data()[1] = 0xBEEF;
w = Widget(1) = std::move(w);
std::cerr << std::hex << w.data()[0] << w.data()[1] << std::endl; 
```

添加了一些代码`Widget`来记录构造函数、析构函数和赋值运算符的调用。交错是关于这些呼叫来自何处的评论

```
w is constructed
0x7fff619c36c0: [constructor] allocated 2@0x1043dff80
temporary Widget(1) is constructed
0x7fff619c37c0: [constructor] allocated 1@0x1043e0180
first (right) assignment operator argument is constructed. w is empty afterwards!
0x7fff619c3800: [default constructor] empty
0x7fff619c3800: [move constructor] stealing 2@0x1043dff80 from 0x7fff619c36c0, replacing with 0@0x0
first assignment operator does it's job, i.e. moves from by-value argument.
0x7fff619c37c0: [assignment] stealing 2@0x1043dff80 from 0x7fff619c3800, replacing with 1@0x1043e0180
second (left) assignment operator arguments is constructed
0x7fff619c3780: [constructor] allocated 2@0x1043e0280
0x7fff619c3780: [copy constructor] copying 2@0x1043dff80 from 0x7fff619c37c0
second assignment operator does it's job, i.e. moves from by-value argument
0x7fff619c36c0: [assignment] stealing 2@0x1043e0280 from 0x7fff619c3780, replacing with 0@0x0
second assingment operator's by-value argument is destructed
0x7fff619c3780: [destructor] deleting 0@0x0
first assignment operator's by-value argument is destructed
0x7fff619c3800: [destructor] deleting 1@0x1043e0180
temporary created as Widget(1) is destructed.
0x7fff619c37c0: [destructor] deleting 2@0x1043dff80
data contains in "w" after assignments.
deadbeef
finally, "w" is destructed.
0x7fff619c36c0: [destructor] deleting 2@0x1043e0280 
```

我在那里看不出问题，并用clang编译它，`-faddress-sanitizer, -fcatch-undefined-behaviour`也没有抱怨。

但请注意，第二个分配（左`=`运算符）复制而不是移动。这是因为第一个（右）赋值运算符返回一个左值引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:25:08.023

您不需要在移动构造函数中进行如此多的交换和分配。这：

```
Widget(Widget&& other) :
    length( other.length_ ), data( other.data_ )
{
    other.length_ = 0;
    other.data_ = nullptr;
} 
```

为移动构造函数做最少的工作：总共 4 个分配。您的版本有 8 个，计算对 swap() 的调用中的那些。

你的移动分配没问题，但你可能想考虑只写一个 operator=() 来涵盖这两种情况：

```
Widget &operator=( Widget other ) {
    delete data_;
    data_ = other.data_;
    other.data_ = nullptr;
    length_ = other.length_;
    other.length_ = 0;
    return *this;
} 
```

这比您的版本效率略低，因为它可以移动两次。

# linux - 在错误的情况下释放羊群？

> ID：12651068
> 
> 赞同：14
> 
> 时间：2012-09-29T08:09:35.003
> 
> 标签：linux, perl, locking, flock

想象一下下面的 Perl 代码（这里是伪代码）：

```
successfully acquired flock for FILEHANDLER       # line 1
some error or maybe simply a call to exit()       # line 2
close FILEHANDLER (which also releases the lock)  # line 3 
```

在这种情况下，我不会释放锁，因为 Perl 脚本在第 2 行结束。在这种情况下，操作系统是否曾经释放过锁？它是否看到“嘿，获取锁的脚本崩溃”并释放锁？它会立即释放锁吗？此外，是否每个脚本都运行一个 Perl 实例，以便清楚哪个脚本在没有释放锁的情况下崩溃/停止？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-29T12:31:01.837

> 在那种情况下，操作系统是否曾经释放过锁？
> 它是否看到“嘿，获取锁的脚本崩溃”并释放锁？
> 它会立即释放锁吗？

所有这些问题都取决于系统。Perl 5 没有实现文件锁定功能，它只是提供了一个通用接口`flock(2)`，`fcntl(2)`锁定或`lockf(3)`（取决于操作系统中可用的内容）。当程序退出、段错误或被 sigkill 杀死时，所发生的情况也可能有所不同。

Linux 下的快速测试表明，在正常退出条件下，锁被移除：

```
$ perl -le 'open my $fh, ">", "f" or die $!; print flock($fh, 6) ? "got lock" : "was already locked", "\n"'
got lock
$ perl -le 'open my $fh, ">", "f" or die $!; print flock($fh, 6) ? "got lock" : "was already locked", "\n"'
got lock 
```

让我们看看当我们`die`：

```
$ perl -le 'open my $fh, ">", "f" or die $!; print flock($fh, 6) ? "got lock" : "was already locked", "\n"; die "died"'
got lock
died at -e line 1.
$ perl -le 'open my $fh, ">", "f" or die $!; print flock($fh, 6) ? "got lock" : "was already locked", "\n"; die "died"'
got lock
died at -e line 1. 
```

要获得段错误，我们将需要访问 C，我正在使用`Inline`它来获得它：

```
$ cat segfault.pl
#!/usr/bin/perl

use strict;
use warnings;

use Inline "C";

open my $fh, ">", "f" or die $!;

print flock($fh, 6) ? "got lock" : "was already locked", "\n";

crash();

__DATA__
__C__

void crash() {
    int* ptr = NULL;
    *ptr = 5;
}
$ perl segfault.pl
got lock
Segmentation fault
$ perl segfault.pl
got lock
Segmentation fault 
```

最后，发送程序时会发生以下情况`SIGKILL`：

```
$ cat fork.pl
#!/usr/bin/perl

use strict;
use warnings;

$SIG{CHLD} = "IGNORE"; #auto-reap children

die "could not fork: $!" unless defined(my $pid = fork);
unless ($pid) {
    #child
    open my $fh, ">", "f" or die $!;
    print flock($fh, 6) ? "got lock" : "was already locked", "\n";
    sleep(100);
    exit;
}

kill 9, $pid;

die "could not fork: $!" unless defined($pid = fork);
unless ($pid) {
    #child
    open my $fh, ">", "f" or die $!;
    print flock($fh, 6) ? "got lock" : "was already locked", "\n";
    exit;
}
$ perl fork.pl
got lock
got lock 
```

从这些实验中，我们可以看到，对于您关心的每种情况，Linux 中的锁都被释放了。

> 此外，是否每个脚本都运行一个 perl 实例，以便清楚哪个脚本在没有释放锁的情况下崩溃/停止？

是的，Perl 5`perl`每个脚本都有一个进程。即使你分叉，孩子也会有自己的`perl`进程。线程不提供单独的`perl`进程。

注意：如果父进程获得了锁并且在锁定之前没有放弃它，那么即使父进程退出，子进程也将拥有相同的锁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T08:49:47.340

当程序退出时，操作系统会自动释放程序获取的所有锁，并关闭程序打开的所有文件。

# google-apps-script - 谷歌应用脚 本驱动的谷歌表单中的并发问题和丢失表单数据

> ID：12651073
> 
> 赞同：0
> 
> 时间：2012-09-29T08:10:00.043
> 
> 标签：google-apps-script, google-sheets, google-forms

当人们几乎同时提交表单时，我最近遇到了我认为是并发问题的问题，这导致谷歌表单的数据丢失。我已经在使用 Lock 服务来防止这个问题，但我似乎仍然有问题。[http://googleappsdeveloper.blogspot.com/2011/10/concurrency-and-google-apps-script.html](http://googleappsdeveloper.blogspot.com/2011/10/concurrency-and-google-apps-script.html)

表单目前有 onFormSubmit 触发器：formSubmitReply 和 logMessage。formSubmitReply 向提交表单的人发送确认信息，并且 logMessage 应该在单独的电子表格中备份信息，以防常规电子表格中的行被破坏。它应该从 formSubmit 事件中提取值，然后将其附加到“日志”表中。

我已经包含了脚本的所有当前代码，并用占位符替换了电子邮件。我可以获得一些帮助来识别代码中可能阻止表单在表单中记录行的任何错误吗？

```
 function getColIndexbyName(colName){
      var sheet=SpreadsheetApp.getActiveSheet();
      var rowWidth=sheet.getLastColumn();
      var row=sheet.getRange(1,1,1,rowWidth).getValues();//this is the first row
      for ( i in row[0]){
        var name=row[0][i];
        if(name == colName || new RegExp(colName,'i').test(name)){
          return parseInt(i)+1;
        }
      }
      return -1
    }
    function makeReceipt(e){
      /*This is for Student Volunteer auto-confirmation*/
      var ss,sheet, rowWidth, headers, rowWidth,curRow, values, greeting, robot, msg, space, newline;
      curRow=e.range.getRow();
      ss=SpreadsheetApp.getActiveSpreadsheet();
      sheet=ss.getSheetByName("RAW");
      rowWidth=sheet.getLastColumn();
      headers=sheet.getRange(1,1,1,rowWidth).getValues();
      values=sheet.getRange(curRow,1,1,rowWidth).getValues();
      greeting='Hi '+sheet.getRange(curRow,getColIndexbyName('First Name'),1,1).getValue()+"! <br><br>"+ ' '; 
      robot="<i>Below are the responses you submitted. Please let us know if any changes arise!</i> <br><br>";
      msg=greeting+robot;
      space=' ';
      newline='<br>';
      for( i in headers[0]){
        //only write non "Reminders" column values
        if(headers[0][i]!="Reminders"){
          msg+="<b>";
          msg+=headers[0][i];
          msg+="</b>";
          msg+=":";
          msg+=space;
          msg+=values[0][i];
          msg+=newline;
        }
      }
      return msg;

    }

    /**
     * Triggered on form submit
     **/
    function formSubmitReply(e) {
      var ss, row, mailIndex, userEmail, message, appreciation;
      var lock = LockService.getPublicLock();
      if(lock.tryLock(60000)){
        try{
          ss=SpreadsheetApp.getActiveSheet();
          row=e.range.getRow();
          mailIndex=getColIndexbyName('Email Address');
          userEmail=e.values[mailIndex-1];
          message=makeReceipt(e);
          MailApp.sendEmail(userEmail, 'BP Day 2012 Confirmation for'+' '+userEmail,message,{name:"Name", htmlBody:message, replyTo:"example@example.com"});  
          messageAlert100(e);
        } catch(err){
          e.values.push("did not send email"); 
          MailApp.sendEmail(""example@example.com","error in formSubmitReply"+err.message, err.message);
        }
        logToSpreadsheet(e);
      } else {
        //timeOut
        try{
          if(e && e.values){
            logToSpreadsheet(e);
            e.values.push("did not send email");  
          }
        }catch(err){
          MailApp.sendEmail("example@example.com", "error in logging script block "+err.message, err.message)
        }

      }
    }

    /**
     * Triggered on form submit
     **/
    function messageAlert100(e){
      var cheer_list, curRow, cheer_list, cheer_index, cheer, ss=SpreadsheetApp.getActiveSpreadsheet();
      if(e && e.range.activate){
        curRow=e.range.getRow();
      }
      cheer_list=["Congratulations!", "Give yourself a pat on the back!", "Yes!", "Cheers!","It's time to Celebrate!"];
      cheer_index=Math.floor(Math.random()*cheer_list.length);
      cheer=cheer_list[cheer_index];
      if(typeof(curRow) != "undefined" && curRow % 100 ==0){
        MailApp.sendEmail("example@example.com", ss.getName()+": "+cheer+" We now have "+ curRow + " Volunteers!", cheer+" We now have "+ curRow + " Volunteers!");
      }
    }

    /**
     *
     **/
    function logToSpreadsheet(e){
      var ss=SpreadsheetApp.getActiveSpreadsheet(), sh;
      if(!ss.getSheetByName("log")){
        sh=ss.insertSheet("log");
      }
      sh=ss.getSheetByName("log");
      if(e && e.values !==null){
        sh.appendRow(e.values)
      } else {
        sh.appendRow(e);
      }
      Logger.log(e);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:33:21.470

我使用一种非常简单的方法来避免表单的并发问题，我不得不想象在 GAS 提供锁定方法之前。我没有使用触发器，而是在`on form submit`检查列是否有标志（MAIL SENT）的函数上使用计时器触发器（每隔几分钟左右）......如果标志不存在，我发送带有处理数据的电子邮件，复制到备份表并设置标志。我从最后一行开始在每一行上执行此操作，并在找到标志时停止。这样，我确定所有数据行都已处理，并且不会发送重复的邮件。实际上实现起来非常简单，您的脚本只需要进行一些修改。

从用户的角度来看，结果几乎与他们在提交后几分钟收到的邮件相同。

编辑：当然，在此设置中，您不能使用 e 参数来获取表单数据，但您必须改为读取工作表上的数据......但这并不是一个很大的区别;-)

# php - 在 Joomla 中以编程方式创建菜单项

> ID：12651075
> 
> 赞同：4
> 
> 时间：2012-09-29T08:10:18.160
> 
> 标签：php, joomla, content-management-system, joomla2.5

我在 joomla 2.5 中创建了一个组件，该组件创建了一篇新文章并将该文章添加到菜单项中。

创建文章工作正常，但我在创建菜单项时遇到了一些问题。

我有以下代码：

```
 //add the article to a menu item
                $menuTable = JTable::getInstance('Menu', 'JTable', array());

                    $menuData = array(
                    'menutype' => 'client-pages',
                    'title' => $data[name],
                    'type' => 'component',
                    'component_id' => 22,                  
                    'link' => 'index.php?option=com_content&view=article&id='.$resultID,
                    'language' => '*',
                    'published' => 1,
                    'parent_id' => '1',
                    'level' => 1,
                );

                // Bind data
                if (!$menuTable->bind($menuData))
                {
                    $this->setError($menuTable->getError());
                    return false;
                }

                // Check the data.
                if (!$menuTable->check())
                {
                    $this->setError($menuTable->getError());
                    return false;
                }

                // Store the data.
                if (!$menuTable->store())
                {
                    $this->setError($menuTable->getError());
                    return false;
                } 
```

错误似乎与设置 parent_id 和级别有关。在调试 library/joomla/database/tablenested.php 时，将 parent_id 和 level 设置为 0。这导致我的管理员页面出现以下错误：

> 警告：str_repeat() [function.str-repeat]：/Applications/MAMP/htdocs/joomla_2_5/administrator/components/com_menus/views/items/tmpl/default.php 中的第二个参数必须大于或等于 0第 129 行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T11:45:34.033

尝试使用`JTableNested::setLocation($referenceId, $position = 'after'):`

```
$table->setLocation($parent_id, 'last-child'); 
```

我也认为你需要重建路径：

```
// Rebuild the tree path.
if (!$table->rebuildPath($table->id)) {
    $this->setError($table->getError());
    return false;
} 
```

如果它仍然不起作用，请尝试找出~~[MenusModelItem::save](https://github.com/joomla/joomla-cms/blob/2.5.x/administrator/components/com_menus/models/item.php#L1078)~~做了哪些你没有做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-07T15:59:16.987

```
$table->setLocation($parent_id, 'last-child'); 
```

只需要确保为新菜单项正确创建左/右值。无需重建路径，因为现在由 JTableMenu 的 store 方法处理。

此外，便捷的方法“save”可用于绑定、检查和存储菜单项：

```
$menuItem = array(
            'menutype' => 'client-pages',
            'title' => $data[name],
            'type' => 'component',
            'component_id' => 22,                  
            'link' => 'index.php?option=com_content&view=article&id='.$resultID,
            'language' => '*',
            'published' => 1,
            'parent_id' => $parent_id,
            'level' => 1,
        );

$menuTable = JTable::getInstance('Menu', 'JTable', array());

$menuTable->setLocation($parent_id, 'last-child');

if (!$menuTable->save($menuItem)) {
    throw new Exception($menuTable->getError());
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T10:15:02.123

不知何故`$menutable`不会更新数据库表`parent_id`，`level`因此您必须通过 joomla 查询手动更新这两个字段。

```
$menuTable = JTable::getInstance('Menu', 'JTable', array());

        $menuData = array(
            'menutype' => 'client-pages',
            'title' => $data[name],
            'type' => 'component',
            'component_id' => 22,                  
            'link' => 'index.php?option=com_content&view=article&id='.$resultID,
            'language' => '*',
            'published' => 1,
            'parent_id' => '1',
            'level' => 1,
        );

        // Bind data
        if (!$menuTable->bind($menuData))
        {
            $this->setError($menuTable->getError());
            return false;
        }

        // Check the data.
        if (!$menuTable->check())
        {
            $this->setError($menuTable->getError());
            return false;
        }

        // Store the data.
        if (!$menuTable->store())
        {
            $this->setError($menuTable->getError());
            return false;
        }

        $db   = $this->getDbo();
        $qry = "UPDATE `#__menu` SET `parent_id` = 1 , `level` = 1 WHERE `id` = ".$menuTable->id;
        $db->setQuery($qry);
        $db->query(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:53:18.353

这段代码对我有用

```
 JTable::addIncludePath(JPATH_ADMINISTRATOR.'/components/com_menus/tables/');

                $menuTable =& JTable::getInstance('menu', 'menusTable');

                $menuData = array(
                        'menutype' => 'client-pages',
                        'title' => 'mytrialmenu',
                        'type' => 'component',
                        'component_id' => 22,
                        'link' => 'index.php?option=index.php?                    option='com_content&view=article&id='.$resultID,
                        'language' => '*',
                        'published' => 1,
                        'parent_id' => 'choose some parent',
                        'level' => 1,
                );
                // Bind data
                if (!$row->bind($menuData))
                {
                    $this->setError($menuTable->getError());
                    return false;
                }

                // Check the data.
                if (!$row->check())
                {
                    $this->setError($menuTable->getError());
                    return false;
                }

                // Store the data.
                if (!$row->store())
                {
                    $this->setError($menuTable->getError());
                    return false;
                } 
```

我认为原因是 menusTable 扩展了 JnestedTable，这是在菜单表中操作 lft 和 rgt 字段所必需的

# java - 调用外部 .exe 的 Android 应用程序

> ID：12651078
> 
> 赞同：1
> 
> 时间：2012-09-29T08:11:12.423
> 
> 标签：java, android, c++, c, java-native-interface

我即将在android上制作一个应用程序，但我对此有0经验。这个项目很重要，对我来说是一个很大的挑战。话虽如此，我会尽力解释它，以便你们能给我一个准确的方法

所以假设我有一个用 C、C++ 编写的程序。一个 .exe 或一堆库。这个可执行文件的作用是处理数据并生成一个包含一堆二进制和奇怪输出的文件。这个过程称为预处理。

然后将结果文件输入 Matlab 或 python 并生成图形结果。这称为后处理，也是最终目标。

现在我买不起matlab，所以我的老板只让我去预处理部分。

该项目将在 android 设备的屏幕上显示预处理，即使它可能不可读。

我做了一些研究并找到了几种方法来实现这一点：1/使用java编写一个简单的应用程序并使用JNI调用.exe的主要功能2/使用c++编写一个简单的应用程序并直接从.exe中获取结果

我能想到的就这些了，请各位高手给点建议。我正在寻找一种解决方案，它可以让我通过预处理阶段，但如果我以后有机会在后处理阶段工作，它也会变得高效且容易。

非常感谢

# scala - 作业帮助：集合之间的并集

> ID：12651079
> 
> 赞同：13
> 
> 时间：2012-09-29T08:11:13.270
> 
> 标签：scala, functional-programming

我正在学习 Scala 课程的 Coursera 函数式编程。这是第二周，我碰壁了。在作业中，我们使用的是 Set，但不是我们在 Java 中遇到的那种 Set，例如。它是一个 Set，如果值在那里，则返回 true，否则返回 false。他们说它不是一个容器，它只是一个函数。

为了弄清楚，我需要你的帮助。我不想让你解决我的任务，这只是一个例子，我想知道我应该做什么。

```
/**
   * We represent a set by its characteristic function, i.e.
   * its `contains` predicate.
   */
  type Set = Int => Boolean

 /**
   * Indicates whether a set contains a given element.
   */
  def contains(s: Set, elem: Int): Boolean = s(elem)

 /**
   * Returns the set of the one given element.
   */
  def singletonSet(elem: Int): Set = Set(elem)

 /**
   * Returns the union of the two given sets,
   * the sets of all elements that are in either `s` or `t`.
   */
  def union(s: Set, t: Set): Set = ??? 
```

这是代码。在`singletonSet`我想解决它的方法是返回`Set(elem)`，对吗？

如果这很好，我应该如何在两者之间建立联盟？我对编程并不陌生，但我看不到任何方法。因为我不应该返回一组数字。

这是另一个学生告诉我的关于集合的内容：“*但是所有的“集合”都是一个接受一个 Int 并返回一个布尔值 (Int => Boolean) 的函数。任何接受一个 Int 并返回一个布尔值的函数都适合类型'设置'。* ”

我在 union 函数中尝试的是：

```
def union(s: Set, t: Set): Set = (s | t) //value | not a member of Int => Boolean 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-29T14:43:27.827

看来您遇到的障碍是您不熟悉在 Scala 中定义函数。在这种特殊情况下，您需要定义 type 的函数`Int => Boolean`，它们接受 a`Int`并返回 a `Boolean`。

以下是一些类型的函数字面量示例`Int => Boolean`。在 Scala 控制台或 Scala IDE 工作表中尝试它们：

```
(x: Int) => true
(x: Int) => false
(x: Int) => x == 2
(x: Int) => x == 10
(x: Int) => x == 2 || x == 10
(x: Int) => x % 2 == 0 
```

那么你所要做的就是使用相同的语法，`(x: Int) =>`然后将 union, intersect, ... 的含义翻译到表达式的右侧。

学习的一部分是付出真正的努力。我相信您可以多次重新提交解决方案，所以如果您在第一次尝试时没有获得 10/10，请不要犹豫提交并迭代。您所需要的只是编译代码。祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-29T08:37:02.743

一个可能的提示是查看类型。看`Set`类型。它实际上是`Int`into函数的类型别名`Boolean`。

因此，当你有两个集合时，你实际上有两个功能。你如何使用它们来提供一个代表这些集合并集的函数？它必须是你的起点。

# css - 按下提交时，输入文本填充不断改变宽度

> ID：12651082
> 
> 赞同：0
> 
> 时间：2012-09-29T08:11:22.937
> 
> 标签：css, forms, input, width, padding

我有一个简单的登录表单宽度用户名和密码字段和提交按钮。在我单击提交按钮之前，输入字段的宽度符合`212px`预期。当我单击提交按钮时，宽度变为`200px`.

这是输入的css：

```
.textInput  {
        padding: 6px;
        width: 200px;
        background-color: #15242A;
        border: none;
        color: #BFE6FE;
        margin: 2px;
        display: inline-block;
} 
```

这是输入：

```
<input type="text" class="textInput" name="username" value="<?php if (isset ($username)) echo stripcslashes($username); ?>"/> 
```

它不在任何 div 或任何东西中。我只想让它在我提交表单之前和之后保持相同的宽度

这是完整代码的链接[http://jsfiddle.net/kEWdd/](http://jsfiddle.net/kEWdd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:16:08.093

嘿，你能给我们完整的 html 页面，包括提交按钮和表单标签吗？问题可能出在表单标签的原生样式中。尝试造型。

或尝试类似的东西。

```
form{
   display : inline-block;
   width : 200px;
   margin : 0;
   padding : 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:57:17.487

我正在尝试链接到 jsfiddle，但我没有遇到这个问题。不使用时请尝试查看问题是否仍然存在`stripcslashes`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:33:44.857

感谢所有回答的人。我解决了这个问题。我在 html 标记之外的 php 中回显了一些 js 代码。一旦我将回声移动到头部，问题就消失了。

# mobile - 如何配置其他浏览器以在 Vellamo 上进行测试

> ID：12651086
> 
> 赞同：1
> 
> 时间：2012-09-29T08:12:14.517
> 
> 标签：mobile, browser

对于 Vellamo Mobile Benchmark，HTML5 章节评估了移动 Web 浏览器的性能。运行基准测试时，是否使用默认浏览器进行测试？如果 Android 设备上安装了多个浏览器，如何配置其他浏览器以在 Vellamo 上进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T20:40:36.500

Velamo HTML5 章节对[WebView](http://developer.android.com/reference/android/webkit/WebView.html "网络视图")组件进行基准测试。它是“浏览器”APP以及其他数千个APP中使用的Web引擎，它们将其用作布局引擎或呈现在线内容。

由于 Android 框架的限制，Vellamo 无法测试其他浏览器。在 Android 4.0（我相信）中，该框架进行了调整，以便用户能够切换到不同的 Web 引擎（例如 Chrome），但是 afaik 没有简单的方法来激活这种新行为。我相信在未来，Android 将允许选择不同的网络引擎，如果发生这种情况，Vellamo 可能会提供对它们进行基准测试的选项。

# objective-c - cocos2d 带过渡的推送场景

> ID：12651089
> 
> 赞同：2
> 
> 时间：2012-09-29T08:13:02.363
> 
> 标签：objective-c, ios, cocos2d-iphone, scene

我正在使用 cocos2d v2.1 beta2（不确定是否重要）。

我`CCDirector`用来推动一个场景。我这样做是这样`[[CCDirector sharedDirector] pushScene:[CCTransitionFadeUp transitionWithDuration:1 scene:[ShopLayer scene]]];` 的：问题是一开始场景会出现一瞬间，然后执行过渡。我该如何解决？我真的要换`replaceScene:`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:52:02.343

我已经解决了这个问题。

我用`CCTransitionSlideInL`. 它现在工作。

# node.js - 组装自己服务器的完整 URL

> ID：12651091
> 
> 赞同：0
> 
> 时间：2012-09-29T08:13:30.437
> 
> 标签：node.js, express

我正在使用 Node.js 和 Express 作为我的应用程序的后端，并希望将照片上传到 Facebook。我遇到了这种通过 url 上传图片的方法：[https ://developers.facebook.com/blog/post/526/](https://developers.facebook.com/blog/post/526/)

现在我只需要弄清楚我自己的基本 url 是什么，这样我就可以组装 mt photo 的完整地址（比如 /photos/12345 应该是[http://www.mydomain.com/photos/12345](http://www.mydomain.com/photos/12345)）

有什么办法吗？也许是一些 Node 环境变量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:18:53.977

基本上，您将 Node.js / Express 绑定到一个端口，也许还绑定到一个 IP 地址。所以你的问题归结为：

是否可以仅通过 IP 地址找出它使用的域名？

答案很简单：不，很遗憾不是。

原因：可以将多个域名绑定到同一个IP地址。因此，您所能做的就是查询您选择的 DNS 服务器以反向查找 IP 地址以获取域名列表。如果幸运的话，只有一个。如果没有，还有更多。

而且，作为一个额外的问题：如果您的代码没有明确地将自己绑定到特定的 IP 地址，您甚至不知道要使用哪个 IP 地址 - 将会有多个：至少一个 IPv4、环回、可能是 IPv6、. .. 如果有多个网卡，可能会更多，...

所以，底线：如果你有很多好运，是的，但没有一种可靠的方法在所有情况下都有效。

# spring - 如何在 liferay 6.1 GA2 中集成 spring 3.1.2 RELEASE

> ID：12651094
> 
> 赞同：0
> 
> 时间：2012-09-29T08:13:41.963
> 
> 标签：spring, spring-mvc, liferay, liferay-6

我不知道该怎么做：关于上下文应用程序我必须知道什么？依赖怎么办？

我将它用于应用程序上下文：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd
       http://www.springframework.org/schema/util
       http://www.springframework.org/schema/util/spring-util-3.1.xsd">

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" id="viewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView">
  <property name="prefix" value="/WEB-INF/jsp/">
  <property name="suffix" value=".jsp">
 </property></property></property></bean>
 <dependency org="org.springframework" name="org.springframework.web.portlet" rev="3.1.2.RELEASE" />

</beans> 
```

我在我的库中包含 spring 3.1.2 并构建路径

我收到错误：找不到元素“bean”的声明。

# ruby - Ruby 和 Redis，线程不处理命令

> ID：12651095
> 
> 赞同：2
> 
> 时间：2012-09-29T08:13:54.667
> 
> 标签：ruby, multithreading, redis

我正在使用 redis 和 ruby​​ 并尝试`blpop`在线程内发出 a ，以便我可以等待列表中的传入项目。

问题是块中的代码`blpop`似乎永远不会被调用。这是我正在运行的示例代码（ruby 1.9.3）：

```
require 'rubygems'
require 'redis'

def start_thread
  @thread = Thread.new do
    r = Redis.new
    r.blpop("test", 0) do |key, message|
      process_message(key, message)
    end
  end
  redis = Redis.new
  redis.rpush "test", "hello world"
end

def process_message(key, message)
  @message = "#{key} was sent #{message}"
end

start_thread
@thread.join
p @message 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:20:35.083

```
require 'rubygems'
require 'redis'

def start_thread
  @thread = Thread.new do
    r = Redis.new
    key, message = r.blpop(:test, 0)
    process_message(key, message)
  end
  redis = Redis.new
  redis.rpush :test, "hello world"
end

def process_message(key, message)
  @message = "#{key} was sent #{message}"
end

start_thread
@thread.join
p @message 
```

# android - 我的视图中的画布设置为全屏尺寸，而不是视图尺寸......为什么？

> ID：12651105
> 
> 赞同：1
> 
> 时间：2012-09-29T08:15:18.923
> 
> 标签：android, canvas

我有一个扩展我绘制的 View 的类。

尽管视图被设置为具有特定尺寸的 RelativeLayout 的子视图，但视图的画布报告它是 1280 宽（与设备一样宽）。

我试图了解我需要做什么才能使画布受到其视图尺寸的约束（正如常识所决定的那样）。

好奇我忽略了什么......这里是相关的代码片段......

```
dv = new DrawView(this, getWindowManager());
    dv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    //this wrapper is 500x500
    ((RelativeLayout)findViewById(R.id.drawWrapper)).addView(dv);
    L.log("DRAWVIEW WIDTH = " + dv.getWidth()); //this reports 0... why? 
```

在 DrawView 内...

```
@Override
public void onDraw(Canvas canvas) {

    L.log("CANVAS WIDTH ON DRAW = " + canvas.getWidth()); //this always reports 1280 on xoom
    this.canvas = canvas;
    drawElementsOntoCanvas(canvas, true, false);
    ...     
} 
```

有没有我忽略的东西，或者视图中的画布总是整个屏幕的宽度和高度？

相对布局的 XML：

```
 <RelativeLayout 
            android:id="@+id/drawWrapper"
            android:layout_width="500px"
        android:layout_height="500px"        
        android:layout_centerHorizontal="true"
        android:layout_marginTop="50dip" 
        android:clipChildren="true"
        android:background="@drawable/cut_out_frame"           
        /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:29:42.733

啊，现在我明白了：）

您有 clipChildren = true 但这适用于包含布局。子视图可以在其父视图的范围之外绘制，但绘图将被简单地裁剪到父尺寸。

似乎在这里，您正在使用窗口管理器来构建您的 DrawView

```
dv = new DrawView(this, getWindowManager());
dv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

没有看到构造函数，我猜测后面的 setLayoutParams 使用的是 FILL_PARENT，即整个屏幕。

如果我是你，我会为你的 DrawView 实现标准构造函数，然后将它放在布局 XML 中。这是“安卓”的方式。您还可以覆盖 onMeasure() 以跟踪 DrawView 的大小，将 x 和 y 存储在内部字段中，您可以使用它们进行所需的任何缩放。这样，如果您的布局每次更改（方向更改、不同的分辨率支持、新版本），您的代码就不需要更改。

最后，永远不要（除非你真的知道为什么）在布局中使用 PX。请改用 DIP。

# asp.net - 我应该使用哪个控件在 ASP.NET 中显示我的数据库中的帖子记录？

> ID：12651106
> 
> 赞同：0
> 
> 时间：2012-09-29T08:15:23.330
> 
> 标签：asp.net

我应该使用哪个控件在 ASP.NET 中显示我的数据库中的帖子记录？

在我的项目页面上，我想展示最近的特色项目。项目的数量可能会有所不同。我正在寻找类似的控件`GridView`或相应地改变其属性以从我的数据库中获取数据的东西。

下面是我希望我的页面看起来像的图像：

![帖子](../Images/9f1b968c8aeef23d934e8a6f27b92233.png)

我被告知要使用`asp:ListView`，但我不知道如何使用它。这是解决我问题的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:19:53.493

您可以使用[GridView 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)

> 在表格中显示数据源的值，其中每列代表一个字段，每行代表一条记录。GridView 控件使您能够选择、排序和编辑这些项目。

或[中继器类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater%28v=vs.110%29.aspx)

> 一个数据绑定列表控件，允许通过为列表中显示的每个项目重复指定的模板来自定义布局。

# java - 在 IntelliJ 中执行程序/编译时出错，命令行中没有错误

> ID：12651107
> 
> 赞同：3
> 
> 时间：2012-09-29T08:15:51.623
> 
> 标签：java, intellij-idea, osx-mountain-lion, ioexception

我最近买了一台 Macbook Air，它现在正在运行 Mountain Lion，但我在运行公司的项目时遇到了一些问题，唯一一个在工作中使用 mac 的人在他的 Macbook Pro 上运行 Lion，他没有这样的问题。正如标题所说，在命令行上编译项目没有问题，但是当我尝试在 IntelliJ 中编译它时，我得到了这个错误

```
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:exec (requireJS-Optimizer) on project MarfeelTouch: Command execution failed. Cannot run program "node" (in directory "/Users/pedrompg/Documents/Marfeel/MarfeelTouch"): error=2, No such file or directory -> [Help 1] 
```

当我从命令行编译它并尝试运行程序时也会出现问题

```
Caused by: java.util.concurrent.ExecutionException: java.io.IOException: Cannot run program "phantomjs" (in directory "/Users/pedrompg/Documents/Tenants/vhosts/discoverint"): error=2, No such file or directory
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232) ~[na:1.6.0_35]
    at java.util.concurrent.FutureTask.get(FutureTask.java:91) ~[na:1.6.0_35]
    at com.marfeel.pressSystem.impl.SectionPressImpl.getAllItemsFromSectionFeeds(SectionPressImpl.java:137) ~[MarfeelPressSystem-1.0.jar:na]
    ... 29 common frames omitted 
```

看来我无法从项目内部运行任何命令行程序

这就是我们 phantomJS 的调用方式：

```
private Process buildProcess() throws IOException {
        Process process;
        String[] invocationCmd = getInvocationCmd();

        if (executionDirectory != null) {
            if (LOG.isDebugEnabled()) {
                LOG.info("Invoking PhantomJS with {} in {}.", Arrays.toString(invocationCmd), executionDirectory);
            }

            process = Runtime.getRuntime().exec(invocationCmd, null,
                    new File(executionDirectory));
        } else {
            if (LOG.isDebugEnabled()) {
                LOG.info("Invoking PhantomJS with {} in {}.", Arrays.toString(invocationCmd));
            }

            process = Runtime.getRuntime().exec(invocationCmd, null);
        }

        return process;
    } 
```

getInvocationCmd() 返回以下数组

```
[phantomjs,--load-images=no,--disk-cache=yes,--max-disk-cache-size=1048576,/Users/pedrompg/Documents/Marfeel/MarfeelHub/target/webapp/WEB-INF/classes/whiteCollar.js,marca/marca.js,http://www.marca.com/] 
```

不知道有没有留下相关资料我们在项目上使用Maven、tomcat 7、nodeJS、phantomJS 1.5、nginx 1.2.4、java 1.6.0_35

希望有人可以提供帮助，我真的很担心这个问题，已经浪费了 2 天时间来解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T08:48:53.613

当您使用 Mac 时，这很可能是与环境相关的问题。请注意，在 Mac 上的 GUI 应用程序不继承终端环境变量，因此如果您调整`PATH`了变量并且命令可以从终端运行，当您尝试从其他应用程序运行时它将无法正常工作。

请参阅有关此 Mac 功能的[相关](https://apple.stackexchange.com/q/51677) [问题。](https://apple.stackexchange.com/q/57385/17551)注意[第二个环节](https://apple.stackexchange.com/q/57385/17551)，Mountain Lion 对环境变量有不同的行为。

验证是否存在这种情况和解决问题的最简单方法是从终端运行 IntelliJ IDEA：

```
open -a /Applications/IntelliJ\ IDEA\ 11.app/ 
```

这样终端环境将被传递给 IDEA，您可以从终端运行的命令也将从 IntelliJ IDEA 运行。

# android - 从正在运行的应用程序中排除基本系统进程

> ID：12651110
> 
> 赞同：1
> 
> 时间：2012-09-29T08:16:05.990
> 
> 标签：android

我通过使用获得了正在运行的应用程序列表`Activity Manager`。

我过滤了那个应用程序列表`RunningAppProcessInfo.IMPORTANCE_FOREGROUND`。

现在的问题是，我需要从该列表中排除基本系统进程。

Activity Manager 类中是否有任何方法或方法？

# curl - 使用红宝石卷曲

> ID：12651113
> 
> 赞同：1
> 
> 时间：2012-09-29T08:16:31.217
> 
> 标签：curl, ruby-on-rails-3.1, curb, negotiate, httpi

我正在尝试将 Curl 与 SPNEGO 一起使用，通过 ruby​​ 协商一种身份验证。

我尝试了几个库，但似乎 httpi 有办法通过它的路边适配器来做到这一点，就像这个链接：

[https://gist.github.com/3179054#comments](https://gist.github.com/3179054#comments)

我想知道是否有办法将 JSON 数据作为 curl 的“数据”部分而不是链接中给出的文件发送。（我的意思是 curl -d 选项）

我的卷曲是这样的：

> curl -X POST -d "{"id": "12341234","fieldsRequested":["title","state","component"]}" -H >"Accept: application/json" -H "Content-类型：application/json" --negotiate -u : >https://abcd.com/find/it

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:49:18.340

要使用 HTTPI/curb 发送 JSON 数据，只需将 JSON 字符串设置为请求正文，如下所示：

```
require 'httpi'
require 'curb'
require 'json'  
# ...  

req.body = {"id"=>"12341234","fieldsRequested"=>["title","state","component"]}.to_json

# Then set your custom headers
req.headers = {"Accept" => "application/json", "Content-Type" => "application/json"} 
```

也不要启用该`multipart_form_post`选项，因为不需要多部分 POST：

```
req.auth.gssnegotiate
resp = HTTPI.post req do |http|
  http.use_ssl
end 
```

# html - 在 HTML5 输入的“名称”属性中放置句点是否有效？

> ID：12651114
> 
> 赞同：34
> 
> 时间：2012-09-29T08:16:37.050
> 
> 标签：html

> **可能重复：**
> [HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)
> [html 中 name 属性的有效值](https://stackoverflow.com/questions/10369295/valid-value-for-name-attribute-in-html)

使用包含句点的字符串命名 HTML5 输入是否有效？

```
<input type="text" name="article.title" value="The title"/> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-29T08:21:00.997

是的，它是有效的。

但是如果你特别需要通过 JS 或 CSS 来访问它们，你就会给自己带来麻烦。同样，它可以做到，但它会使事情变得困难。

我的建议是改用连字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T08:23:23.260

[根据HTML5 规范的这一部分](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#attr-fe-name)它是有效的。

> name 内容属性给出了表单控件的名称，在表单提交和表单元素的元素对象中使用。如果指定了属性，则其值不得为空字符串。
> 
> **name 的任何非空值都是允许**的，但名称“ *charset* ”和“isindex”是特殊的：

*强调我的*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T08:38:58.363

“属性值可以包含文本和字符引用，附加限制取决于它们是不带引号的属性值、单引号的属性值还是双引号的属性值。此外，本参考的 HTML 元素部分描述了允许的进一步限制特定属性的值，并且属性必须具有符合这些限制的值。”

来自 w3.org（W3C 工作草案）：

[HTML 语法 - HTML5](http://www.w3.org/TR/html-markup/syntax.html#syntax-attributes)

# php - 带有 % 符号的 Yii 框架 url 给出 400 状态

> ID：12651115
> 
> 赞同：0
> 
> 时间：2012-09-29T08:16:54.120
> 
> 标签：php, url, yii

我有一个搜索表单，其中仅包含一个带有提交按钮的文本字段。

如果用户使用任何文本进行搜索，那么我们会根据搜索字符串将结果发送到浏览器。

如果搜索字符串包含 % 符号，那么我的请求状态错误（400），

我该如何解决这个问题？

注意：我使用的是 Yii 框架提供的路径类型 URL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:21:19.757

我会建议你使用`encodeURI`

```
 var value=$("#searchbar").val();
 var senddata=encodeURI("main.php?value="+value);

$.get(senddata,function(){

//write some code
}) 
```

# iphone - cocos3d如何注册触摸事件

> ID：12651118
> 
> 赞同：2
> 
> 时间：2012-09-29T08:17:51.857
> 
> 标签：iphone, objective-c, cocos3d

我试图找到一种在 cocos3d 中注册触摸事件的方法，例如 TOUCHESBEGAN 但不存在，只有

```
 -(void) touchEvent: (uint) touchType at: (CGPoint) touchPoint {
    NSLog(@"hello");
    } 
```

不记录“你好”的卜。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:36:20.063

不确定您是否仍然对答案感兴趣，但这里有。

为了在cocos3d中使用touchEvent，需要在CC3Layer中开启触摸**（**在initializeControls方法中）

```
self.isTouchEnabled = YES; 
```

然后你可以在 CC3Scene 中使用 touchEvent:(uint)touchType at:(CGPoint) **touchPoint**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T19:13:11.410

当我将此代码放入我的 CC3Layer 子类时开始为我工作

```
-(void) initializeControls {
    [self scheduleUpdate];
    self.userInteractionEnabled = YES;
    [self setTouchEnabled:YES];
} 
```

# java - 如何从 Java 类访问 ManagedBean 的属性？

> ID：12651119
> 
> 赞同：0
> 
> 时间：2012-09-29T08:17:55.347
> 
> 标签：java, spring, jsf

我有一个 requestScope bean、常规 Java bean 和 Spring 配置，就像下面显示的代码一样。我可以知道如何从使用 Spring 配置的常规 Java 代码访问 bean 的属性吗？

**托管豆**

```
@ManagedBean(name="requestBean")
public class RequestBean {
   private String theID;

   /** getter and setter of theID **/
} 
```

**春豆**

```
public class SpringBean {

   private RequestBean theBean = null;

   // how could I access the RequestBean.theID from this class ??
} 
```

**弹簧配置**

```
<bean id="springBean" class="org.huahsin.SpringBean"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:01:54.477

也许我不明白这个问题，但我认为这只是通过调用吸气剂：

```
public class SpringBean {

   private RequestBean theBean = null;

   ...
   public void aCallingMethod() {
      if (theBean != null) {
            theBean.getTheId();  // <-- here it is !!
      }

   }
} 
```

**编辑**

要将请求 bean 注入 Spring bean，您可以使用 @Autowired 注释：

```
public class SpringBean {

   @Autowired
   private RequestBean theBean = null;
   ...
} 
```

要么将其注入 XML 文件：

```
<bean id="springBean" class="org.huahsin.SpringBean">
     <property name="theBean" ref="requestBean"/>
</bean> 
```

# windows - 就海拔高度而言，清单中“highestAvailable”和“requireAdministrator”之间的区别？

> ID：12651124
> 
> 赞同：19
> 
> 时间：2012-09-29T08:18:17.897
> 
> 标签：windows, winapi, sdk, manifest

我在我的 exe 清单中使用了“highestAvailable”。但`standard user and UAC ON`它没有提升exe。

这是“highestAvailable”的行为吗？

我提到了这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/bb756929.aspx)，但不清楚“highestavailable”是否会提升 exe。如果 UAC 打开，我的要求是提升 exe。

我更改为“requireAdministrator”，并且我的 exe 在 UAC ON 的标准用户中得到提升。

有人可以详细解释一下“highestAvailabe”和“requireAdministrator”这两个选项的提升行为吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-29T10:51:34.287

`highestAvailable`如果当前用户是管理员，将提升。这与您观察到的一致。当标准用户运行进程时，不会显示 UAC 对话框，进程会使用标准令牌运行。当管理员用户执行时，将显示 UAC 同意对话框，然后该过程将运行提升。

如果您的程序需要管理员权限才能运行，那么您需要使用`requireAdministrator`. 当标准用户启动这样的过程时，会显示*肩上的*UAC 对话框。这使用户有机会要求管理员提供他们的凭据。

仅`highestAvailable`当您的程序能够以有限的功能运行时才应使用，以防用户无法提升。这就是您的问题链接的 MSDN 主题中*混合模式的含义。*

# scala - 如何在 Scala Breeze 中执行 X * diag(Y)？

> ID：12651127
> 
> 赞同：0
> 
> 时间：2012-09-29T08:18:32.230
> 
> 标签：scala, linear-algebra, scalala

如何`X * diag(Y)`在 Scala Breeze 中进行操作？ `X`可以是例如 a`CSCMatrix`并且`Y`可以是 a `DenseVector`?

在 MATLAB 语法中，这将是：

```
X * spdiags(0, Y, N, N ) 
```

或者：

```
X .* repmat( Y', K, 0 ) 
```

在 SciPy 语法中，这将是一个“广播乘法”：

```
Y * X 
```

如何`X * diag(Y)`在 Scala Breeze 中进行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:31:31.173

我写了自己的稀疏对角线方法，最后写了密集/稀疏乘法方法。

像这样使用：

```
val N = 100000
val K = 100
val A = DenseMatrix.rand(N,K)
val b = DenseVector.rand(N)
val c = MatrixHelper.spdiag(b)
val d = MatrixHelper.mul( A.t, c ) 
```

下面是 spdiag 和 mul 的实现：

```
// Copyright Hugh Perkins 2012
// You can use this under the terms of the Apache Public License 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package root

import breeze.linalg._

object MatrixHelper {
   // it's only efficient to put the sparse matrix on the right hand side, since 
   // it is a column-sparse matrix
   def mul( A: DenseMatrix[Double], B: CSCMatrix[Double] ) : DenseMatrix[Double] = {
      val resultRows = A.rows
      val resultCols = B.cols
      var row = 0
      val result = DenseMatrix.zeros[Double](resultRows, resultCols )
      while( row < resultRows ) {
         var col = 0
         while( col < resultCols ) {
            val rightRowStartIndex = B.colPtrs(col)
            val rightRowEndIndex = B.colPtrs(col + 1) - 1
            val numRightRows = rightRowEndIndex - rightRowStartIndex + 1
            var ri = 0
            var sum = 0.
            while( ri < numRightRows ) {
               val inner = B.rowIndices(rightRowStartIndex + ri)
               val rightValue = B.data(rightRowStartIndex + ri)
               sum += A(row,inner) * rightValue
               ri += 1
            }
            result(row,col) = sum
            col += 1
         }
         row += 1
      }
      result
   }   

   def spdiag( a: Tensor[Int,Double] ) : CSCMatrix[Double] = {
      val size = a.size
      val result = CSCMatrix.zeros[Double](size,size)
      result.reserve(a.size)
      var i = 0
      while( i < size ) {
         result.rowIndices(i) = i
         result.colPtrs(i) = i
         result.data(i) = i
         //result(i,i) = a(i)
         i += 1
      }
      //result.activeSize = size
      result.colPtrs(i) = i
      result
   }
} 
```

# ios - iOS 模拟器 (Xcode 4.5) 是否可以加快速度？

> ID：12651128
> 
> 赞同：0
> 
> 时间：2012-09-29T08:18:38.803
> 
> 标签：ios, ios-simulator

有人经历过这些差异吗？

几乎需要 7-8 秒才能启动，而以前是瞬时的。

有什么改善的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:04:52.767

这是不可能的，关闭所有其他应用程序，这是你可以做的

# android - 如何检查与 Internet 的连接（处理连接受限的情况）

> ID：12651135
> 
> 赞同：2
> 
> 时间：2012-09-29T08:19:23.313
> 
> 标签：android

我使用此代码检查互联网连接

```
private boolean haveNetworkConnection() {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

但是当我的互联网连接有限时，它无法处理这种情况，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:30:17.160

如果您获得成功状态，请尝试在后台以编程方式打开 Web 链接，然后互联网连接可用，否则如果失败则没有可用的互联网连接。尝试`HttpURLConnection`通过打开任何链接检查互联网可用性，您可以`HttpURLConnection`在给定链接中获取详细信息：[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)

# node.js - 将照片上传到 Facebook 相册

> ID：12651137
> 
> 赞同：4
> 
> 时间：2012-09-29T08:19:45.663
> 
> 标签：node.js, mongodb, facebook-graph-api

我有一个 nodejs (+express + mongodb,gridstore) 后端，并且想将照片上传到 Facebook 相册。

我遇到了两种方法。第一个（[https://developers.facebook.com/blog/post/526/](https://developers.facebook.com/blog/post/526/)）需要获取我的图片的完整 url 资源，我没有，因为它是我从 gridstore 提取的数据，第二个（[https://developers.facebook.com/docs/reference/api/album/](https://developers.facebook.com/docs/reference/api/album/)）通过 Graph API 的文档记录非常差，我无法弄清楚我的请求应该是什么样子。（表单数据，它应该有哪些字段，如何将我的数据 blob\stream 从 gridstore 转换为它）

这是我目前拥有的，但不起作用：

```
facebook.uploadPhoto = function (token, albumId, photo, callback) {
    var fb = fermata.json('https://graph.facebook.com/' + albumId);
    fb.photos({access_token:token}).post({'Content-Type':"multipart/form-data"}, {source:{data:photo}}, callback);
}; 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T01:31:45.563

该文件很有可能没有正确序列化。Fermata 将通过数据获取节点文件缓冲区。您是否尝试过通过它？

```
fs.readFile("/path/to/photo.jpg", function (err, data) {
  fermata.json("https://graph.facebook.com/graph/api").post({"Content-Type":"multipart/form-data"},  {fileField:  {data:data, name:"", type:""}  }, callback);
}); 
```

添加您的访问令牌等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:47:02.267

我通过使用[海报](https://github.com/rfrench/poster)模块使用简单的 POST 到 facebook 图形 API 解决了这个问题。

```
var options = {
  uploadUrl: 'https://graph.facebook.com/'+user+'/photos?access_token='+accessToken,
  method: 'POST',
  fileId: 'source',
  fields: {'message':''} // Additional fields according to graph API
};

var fileName = ''; // Local or remote url where to find the image
poster.post(fileName, options, function(err, data) {
  if (err) {
    //Something went wrong
  } else {
    // Everything ok
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:15:22.743

老实说，我使用 Facebook 图形 API 的经验有限，主要使用 PHP 和 Java。

以下是一些您可能会发现有用的信息流：

*   [使用 Facebook 的 Graph API 将照片上传到相册](https://stackoverflow.com/questions/2718610/upload-photo-to-album-with-facebooks-graph-api)
*   [Facebook Graph API - 使用 JavaScript 上传照片](https://stackoverflow.com/questions/4999024/facebook-graph-api-upload-photo-using-javascript)

基本上，我建议你在你的实现中加一点点，并按以下方式编码：

1.  在 Node.js 中创建一个 REST Web 服务函数调用，以使用内部 UID 从 gridstore 输出单个图像。
2.  对您的 uploadToFacebook 函数进行编码以使用调用 REST Web 服务函数的图像 URL。

基本上，这将允许您通过将浏览器指向 REST Web 服务来验证图像输出，并避免在您的 uploadToFacebook 函数中进行任何 blob\stream 转换。我假设您将图像存储在 gridstore 与 mongodb 中。

希望有帮助...

# erlang - 为什么 Erlang 的终止原因是正常的？

> ID：12651139
> 
> 赞同：2
> 
> 时间：2012-09-29T08:19:59.297
> 
> 标签：erlang, termination, gen-server

全部

日志部分：

```
** Reason for termination == ** 
{normal,
{gen_server,call,
       [<0.9723.458>,
        {create_jtxn_mon,
            {player,34125,0,"gulexi", 
```

为什么在正常的情况下会报错误日志？谢谢你的帮助~~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:46:03.643

似乎您在向`normal`调用者发送响应之前调用了有理由退出的 gen_server。

一般来说，如果 gen_server`ServerExitReason`在调用过程中以 reason 退出，即使is ，`gen_server:call`也会以 exit reason 退出。（见[源码](https://github.com/erlang/otp/blob/06067a490863cf2e7ff3323b639176b6200c9c41/lib/stdlib/src/gen_server.erl#L175)）`{ServerExitReason, {gen_server, call, [...]}}``ServerExitReason``normal`

也就是说，退出原因不是`normal`but `{normal, ...}`，这就是您收到日志消息的原因。

# c# - c# Regex.Matches html input like php preg_match_all

> ID：12651140
> 
> 赞同：-1
> 
> 时间：2012-09-29T08:20:01.013
> 
> 标签：c#, php

html源码

```
<form>
<input type="text" name="a" value="a1fa4" type="hidden"/>
<input type="text" name="b" value="b1fa9" type="hidden"/>
<input type="text" name="c" value="c1fd2" type="hidden"/>
<input type="text" name="d" value="d1fx1" type="hidden"/>
</form> 
```

php源码

```
<?php
  preg_match_all('/<input name="(.*?)" value="(.*?)" type="hidden"\/>/i', $form, $input);

  $var = array();

  for($i=0;$i<count($input[1]);$i++){
    $var[$input[1][$i]] = $input[2][$i];
  }
?> 
```

C# 源代码

```
Match match = Regex.Match(html, "<input name=\"(.*?)\" value=\"(.*?)\" type=\"hidden\"/>", RegexOptions.IgnoreCase );
while (match.Success)
{
    System.Console.WriteLine(" {0} {1} ", match.Value, match.Index);  
} 
```

php 代码有效，但 c# 代码无效。如何修复 c# 代码？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:32:28.503

如果你想用真正的[Html 解析器](http://htmlagilitypack.codeplex.com/)而不是[正则表达式来解析你的 html](https://stackoverflow.com/a/1732454/932418)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var dict =  doc.DocumentNode
       .Descendants("input")
       .ToDictionary(n=>n.Attributes["name"].Value,n=>n.Attributes["value"].Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:48:55.050

您的正则表达式的问题是您省略了`type=\"text\"`. 以下作品：

```
string html =
    @"<form>
    <input type=""text"" name=""a"" value=""a1fa4"" type=""hidden""/>
    <input type=""text"" name=""b"" value=""b1fa9"" type=""hidden""/>
    <input type=""text"" name=""c"" value=""c1fd2"" type=""hidden""/>
    <input type=""text"" name=""d"" value=""d1fx1"" type=""hidden""/>
    </form>";

foreach(Match match in Regex.Matches(html, 
    "<input type=\"text\" name=\"(.*?)\" value=\"(.*?)\" type=\"hidden\"/>", 
        RegexOptions.IgnoreCase))
{
    // Group 0 is the string matched so get groups 1 and 2.
    System.Console.WriteLine("Name={0} Value={1} ", match.Groups[1].Value, 
        match.Groups[2].Value);
} 
```

然而，正如 LB 所说，使用专用的 HTML 解析器而不是正则表达式，因为 HTML 不能保证是有效的 XML，可能包含不同的布局和编码等等。

如果您必须使用正则表达式，它们需要更加灵活。例如，属性和元素之间可能有更多或不同的空白。

# android - 在横向布局Android中水平对齐两个图像按钮，每个按钮下都有一个文本视图

> ID：12651145
> 
> 赞同：0
> 
> 时间：2012-09-29T08:21:04.560
> 
> 标签：android, android-layout, android-widget

我正在制作一个选择器屏幕，例如画廊或拍照。我已经把纵向布局做好了，但在横向上却很挣扎。我正在尝试使用 DroidDraw。这是我要作为示例的那种外观（忽略按钮），但布局已被弃用。

```
 <?xml version="1.0" encoding="utf-8"?>
     <AbsoluteLayout
  android:id="@+id/widget65"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <Button
android:id="@+id/widget66"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="CAMERA"
android:layout_x="136dp"
android:layout_y="96dp" />
    <Button
android:id="@+id/widget67"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="GALLERY"
android:layout_x="272dp"
android:layout_y="95dp" />
    <TextView
android:id="@+id/widget68"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Choose from Gallery"
android:layout_x="246dp"
android:layout_y="146dp" />
    <TextView
android:id="@+id/widget69"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Take Picture"
android:layout_x="117dp"
android:layout_y="149dp" />
    </AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:49:24.177

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget65"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginTop="100dp" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical" >

            <Button
                android:id="@+id/widget66"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_gravity="center"
                android:text="CAMERA" />

            <TextView
                android:id="@+id/widget68"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_gravity="center"
                android:text="Choose from Gallery" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical" >

            <Button
                android:id="@+id/widget67"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_gravity="center"
                android:text="GALLERY" />

            <TextView
                android:id="@+id/widget69"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:text="Take Picture" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

# haskell - 为什么归纳数据类型禁止类型递归发生在 -> 前面的类型，如 `data Bad a = C (Bad a -> a)`？

> ID：12651146
> 
> 赞同：16
> 
> 时间：2012-09-29T08:21:05.927
> 
> 标签：haskell, recursive-datastructures, algebraic-data-types, y-combinator, agda

Agda[归纳数据类型和模式匹配](http://wiki.portal.chalmers.se/agda/agda.php?n=ReferenceManual.InductiveDataTypesAndPatternMatching)手册说明：

> 为了确保归一化，感应事件必须出现在严格的正位置。例如，不允许使用以下数据类型：
> 
> ```
> data Bad : Set where
>   bad : (Bad → Bad) → Bad 
> ```
> 
> 因为在构造函数的参数中有一个负面的 Bad 出现。

为什么这个要求对于归纳数据类型是必要的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-29T08:54:39.960

您提供的数据类型很特殊，因为它是无类型 lambda 演算的*嵌入*。

```
data Bad : Set where
  bad : (Bad → Bad) → Bad

unbad : Bad → (Bad → Bad)
unbad (bad f) = f 
```

让我们看看如何。回想一下，无类型的 lambda 演算有以下术语：

```
 e := x | \x. e | e e' 
```

我们可以定义从无类型的`[[e]]`lambda 演算项到类型的 Agda 项的转换`Bad`（尽管在 Agda 中没有）：

```
[[x]]     = x
[[\x. e]] = bad (\x -> [[e]])
[[e e']]  = unbad [[e]] [[e']] 
```

现在您可以使用您最喜欢的非终止无类型 lambda 术语来生成类型的非终止术语`Bad`。例如，我们可以转换`(\x. x x) (\x. x x)`为以下类型的非终止表达式`Bad`：

```
unbad (bad (\x -> unbad x x)) (bad (\x -> unbad x x)) 
```

尽管该类型恰好是该参数的一种特别方便的形式，但可以通过一些工作将其推广到具有负递归出现的任何数据类型。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-29T08:21:05.927

[Turner, DA (2004-07-28), Total Functional Programming](http://www.jucs.org/jucs_10_7/total_functional_programming) , sect.中给出了这种数据类型如何让我们适应任何类型的示例。3.1，第 758 页*规则 2：类型递归必须是协变*的。”

* * *

让我们用 Haskell 做一个更详细的例子。我们将从“坏”的递归数据类型开始

```
data Bad a = C (Bad a -> a) 
```

并从中构造[Y 组合器](https://en.wikipedia.org/wiki/Fixed-point_combinator#Y_combinator)，无需任何其他形式的递归。这意味着拥有这样的数据类型允许我们构造任何类型的递归，或者通过无限递归来容纳任何类型。

无类型 lambda 演算中的 Y 组合子定义为

```
Y = λf.(λx.f (x x)) (λx.f (x x)) 
```

它的关键是我们`x`在`x x`. 在类型化语言中，这是不可能的，因为不可能有有效的类型`x`。但是我们的`Bad`数据类型允许这个模数添加/删除构造函数：

```
selfApp :: Bad a -> a
selfApp (x@(C x')) = x' x 
```

使用`x :: Bad a`，我们可以解开它的构造函数并将里面的函数应用到`x`它自己身上。一旦我们知道如何做到这一点，就很容易构造 Y 组合器：

```
yc :: (a -> a) -> a
yc f =  let fxx = C (\x -> f (selfApp x))  -- this is the λx.f (x x) part of Y
        in selfApp fxx 
```

请注意，*既不是递归的，`selfApp`也不`yc`是递归的，函数本身没有递归调用。*递归仅出现在我们的递归数据类型中。

我们可以检查构造的组合器确实做了它应该做的事情。我们可以做一个无限循环：

```
loop :: a
loop = yc id 
```

或计算让我们说[GCD](https://en.wikipedia.org/wiki/Greatest_common_divisor)：

```
gcd' :: Int -> Int -> Int
gcd' = yc gcd0
  where
    gcd0  :: (Int -> Int -> Int) -> (Int -> Int -> Int)
    gcd0 rec a b  | c == 0     = b
                  | otherwise  = rec b c
      where c = a `mod` b 
```

# tomcat7 - Tomcat网页没有出现

> ID：12651149
> 
> 赞同：3
> 
> 时间：2012-09-29T08:21:23.137
> 
> 标签：tomcat7

我的tomcat默认网页没有出现，请有人告诉我原因我已经粘贴了catalina日志的最后100行

```
 Exception in thread "Timer-0" java.lang.NoClassDefFoundError: org/apache/commons/pool/impl/CursorableLinkedList$Cursor
    at org.apache.commons.pool.impl.CursorableLinkedList.cursor(CursorableLinkedList.java:305)
    at org.apache.commons.pool.impl.GenericObjectPool.evict(GenericObjectPool.java:1488)
    at org.apache.commons.pool.impl.GenericObjectPool$Evictor.run(GenericObjectPool.java:1700)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505) 
```

引起：java.lang.ClassNotFoundException: org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714) 中 org.apache.catalina.loader 中的 org.apache.commons.pool.impl.CursorableLinkedList$Cursor。 WebappClassLoader.loadClass(WebappClassLoader.java:1559) ... 还有 5 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:38:09.777

堆栈跟踪表明 Tomcat 无法从[Apache Commons Pool 库](http://commons.apache.org/pool/)中找到类。尝试在 webapp 的 WEB-INF/lib 目录下添加 commons-pool jar。

# perl - DBI：评估中的引发错误

> ID：12651154
> 
> 赞同：2
> 
> 时间：2012-09-29T08:22:31.713
> 
> 标签：perl, exception-handling, eval, dbi, raiseerror

这个问题是指池上的这个评论：

```
[...] But if you're going to put an eval around every statement, just use RaiseError => 0\. [...] 
```

在这个[线程](https://stackoverflow.com/questions/12635495/should-i-put-the-eval-in-the-subroutine-or-the-subroutine-in-the-eval)中。

如果我在这种情况下设置`RaiseError`，我会得到什么？`0`

```
#!/usr/bin/env perl
use warnings;
use 5.10.1;
use DBI;

my $db = 'my_test_sqlite_db.sqlite';
open my $fh, '>', $db or die $!;
close $fh or die $!;

my ( $dbh, $sth );
eval {
    $dbh = DBI->connect( "DBI:SQLite:dbname=$db", "", "", {} );
};
if ( $@ ) { print $@ };

my $table = 'my_sqlite_table';

say   "RaiseError = 1";
say   "PrintError = 0";
$dbh->{RaiseError} = 1;
$dbh->{PrintError} = 0;
eval {
    $sth = $dbh->prepare( "SELECT * FROM $table" );
    $sth->execute();
};
if ( $@ ) { print "ERROR: $@" };

say "\nRaiseError = 0";
say   "PrintError = 1";
$dbh->{RaiseError} = 0;
$dbh->{PrintError} = 1;
eval {
    $sth = $dbh->prepare( "SELECT * FROM $table" );
    $sth->execute();
};
if ( $@ ) { print "ERROR: $@" };

say "\nRaiseError = 0";
say   "PrintError = 0";
$dbh->{RaiseError} = 0;
$dbh->{PrintError} = 0;
eval {
    $sth = $dbh->prepare( "SELECT * FROM $table" );
    $sth->execute();
};
if ( $@ ) { print "ERROR: $@" }; 
```

输出：

```
RaiseError = 1
PrintError = 0
ERROR: DBD::SQLite::db prepare failed: no such table: my_sqlite_table at ./perl2.pl line 23.

RaiseError = 0
PrintError = 1
DBD::SQLite::db prepare failed: no such table: my_sqlite_table at ./perl2.pl line 33.
ERROR: Can't call method "execute" on an undefined value at ./perl2.pl line 34.

RaiseError = 0
PrintError = 0
ERROR: Can't call method "execute" on an undefined value at ./perl2.pl line 44. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:27:54.500

如果由于某些原因失败，大多数 $dbh 方法将：

*   （如果`RaiseError`选项设置为 0）返回`undef`
*   （如果`RaiseError`选项设置为 1）立即退出脚本（'die'），错误原因作为退出消息给出。

这里的关键是如何处理错误取决于您。如果你愿意，你可以忽略它们，例如（以下显然只适用于`RaiseError`设置`0`）：

```
for my $db ( ... ) {
    my $dbh = get_database_handle( $db )
       or next;
    ...
} 
```

在此代码段中（从您在问题中提到的@ikegami 的回答中复制）您循环浏览数据库连接的一些设置列表；如果某个连接给了您一个`undef`，那么您只需选择另一个连接，并且不会出错。

但是，通常情况下，当错误发生时，您必须做的不仅仅是“下一步”——但话又说回来，您有两个选择：或者检查*每个* `$dbh`相关的语句，如下所示：

```
$sth = $dbh->prepare('some_params') 
  or process_db_error('In prepare');
...
$res = $sth->execute('another_set_of_params') 
  or process_db_error('In execute');
...
$res->doAnythingElse('something completely different') 
  or process_db_error('In something completely different'); 
```

*（因为只有在布尔上下文中`or`对应的“左侧部分”评估为时才会执行部分`false`*） 。

...或者只是将所有这些包装到 Perlish 'try-catch' 块中：

```
if (!eval {    
   $sth = $dbh->prepare('some_params');
   ...
   $res = $sth->execute('another_set_of_params');
   ...
   $res->doSomethingElse('something completely different') 
   ...
   1  # No exception
}) {
   process_db_error($@);
} 
```

选择什么，由您决定：这是“返回语句中的错误”（除了要获取实际错误，您必须询问 $dbh 对象）和异常之间的常见决定。

但最重要的是你不能只写这个：

```
$sth = $dbh->do_something('that_can_result_in_error');
$sth->do_something('else'); 
```

...如果您确实设置`RaiseError`为`0`. 在这种情况下，脚本不会死，`$sth`将被分配一个`undef`，并且您会得到一个“衍生”错误（因为您不能在 上调用方法`undef`）。

这正是您原始问题的最后一部分代码中发生的事情。

# actionscript-3 - 从字符串手动评估数学公式

> ID：12651155
> 
> 赞同：0
> 
> 时间：2012-09-29T08:22:39.263
> 
> 标签：actionscript-3, parsing, math

我知道有使用 AS3 评估数学公式的解决方案：使用 MathParser，或将其移植到 JavaScript 和许多其他工具。

但是，如果我想手动评估数学公式，而不使用任何内置库怎么办？
它应该能够解决这个问题：`1+(2*5+(9-6)/(5-2))+(6/2)*5`

这就是我打算这样做的方式：

1.  用左括号和右括号分隔字符串文字。
2.  根据优先级对结果进行排序（通过从左到右扫描字符串，每次看到左括号时优先级增加。每次看到右括号然后降低）。
3.  计算具有最高优先级的结果。

但是，我还没有能够成功地实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:32:02.123

使用[Shutting-yard 算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)将您的表达式转换为[逆波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)并对其进行评估。第二篇文章中有一个很好的例子。

# r - 通过原点绘制回归线

> ID：12651156
> 
> 赞同：9
> 
> 时间：2012-09-29T08:23:21.543
> 
> 标签：r, ggplot2

我正在使用以下代码绘制一些数据系列和回归线：

```
ggplot(dt1.melt, aes(x=lower, y=value, group=variable, colour=variable)) +
    geom_point(shape=1) +    
    geom_smooth(method=lm,  
            se=FALSE) 
```

但是，我需要将回归线限制为通过所有系列的原点 - 与`abline(lm(Q75~-1+lower,data=dt1))`在标准 R 图上实现的方式相同。

谁能解释如何做到这一点`ggplot`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-29T08:45:26.047

您需要在`formula`参数中指定`geom_smooth`：

```
... + geom_smooth(method=lm, se=FALSE, formula=y~x-1) 
```

# android - 每个项目基础上的 Eclipse 中的不同调试密钥库？

> ID：12651160
> 
> 赞同：4
> 
> 时间：2012-09-29T08:23:51.410
> 
> 标签：android, eclipse, debugging, keystore

我确实需要为几个 Android 项目提供不同的调试密钥库。我怎样才能用普通的 Eclipse（没有额外的工具）来做到这一点？

问题是无法将共享相同调试密钥的不同应用程序连接到 Google Drive。只有一个，第一个，有效 - 总是。

目前我使用发布版本进行调试，但为每个调试周期生成签名应用程序的过程非常耗时。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T02:01:53.847

最近，他们更改了 Google Cloud Console 中的 APIs & Auth 部分。现在有一个凭据部分而不是“注册的应用程序”

在开发人员控制台的 1 个“项目”中，我目前有 2 个不同的 OAuth 条目，它们具有相同的调试密钥 sha1，并且工作正常。他们当然有不同的包名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T13:21:50.390

虽然通过 Eclipse 无法做到这一点，但您可能需要考虑通过 Ant 构建您的应用程序。[可以在这个答案中找到](https://stackoverflow.com/a/10747511/154306)详细的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T08:34:54.607

**您可以在Windows > Preferences > Android > Build**中更改 debug.keystore 位置。请参阅[在调试模式下登录](http://developer.android.com/tools/publishing/app-signing.html#debugmode)。但是，这将影响工作区中的所有项目。

# code-generation - LLVM后端整数除法的软件实现

> ID：12651168
> 
> 赞同：1
> 
> 时间：2012-09-29T08:25:27.453
> 
> 标签：code-generation, llvm

我正在尝试为没有硬件实现整数除法的自定义架构实现代码生成（我只寻找汇编程序列表，而不是二进制代码）。我使用 clang 前端并在我的汇编程序列表中获取像 __divsi3 这样的符号。我[在 LLVM 的 compiler_rt 库中看到了 __divsi3 的实现](https://llvm.org/svn/llvm-project/compiler-rt/trunk/lib/divsi3.c)。我怎么能用这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:05:46.407

您将使用您的新编译器在 compiler-rt 中编译您的处理器缺少的相应函数。然后在链接时包含 compiler-rt 库，以便可以解析未解析的符号。

__divsi3 只是一个简单的 C 函数，它使用更简单的操作来执行您的架构不支持的除法。

# asp.net-mvc-3 - SignalR 和大量组

> ID：12651169
> 
> 赞同：1
> 
> 时间：2012-09-29T08:25:46.487
> 
> 标签：asp.net-mvc-3, signalr, signalr-hub

我正在使用 SignalR 的最新版本，它很棒。但是，我最近遇到了一个有趣的扩展问题：似乎 SignalR 在查询字符串中从客户端发送了所有客户端组。我的系统要求一个人加入许多组，这些组代表用户订阅的所有项目，并接收其中任何一个的通知。

大量组（以及我使用 GUID 作为 id）导致查询字符串达到其最大大小，并且 SignalR 停止工作。

这是 Fiddler 在请求网络表单中显示的内容（对 Azure 错误使用长轮询）：

```
transport   longPolling
connectionId    bbed6f35-8379-4be3-ac28-ef3e618382ae
connectionData  [{"name":"jethub"}]
messageId   85
groups  ["JetHub.f9f81bcc-8417-46bd-bae5-c4134972601d","JetHub.5139a8de-04c2-48da-9427-39666e52fabd","JetHub.6b12e333-4d22-47c3-8587-7a9ad5026184","JetHub.252ea279-7a71-40e7-b03c-7d63e69f07ab","JetHub.a4843a77-1e6d-4693-b3de-b392ef465410","JetHub.27feb53a-3c2d-4b11-92f7-dbdffb874b25","JetHub.8840dfcf-e6be-4b72-965b-b282a60446e8","JetHub.bf7d3301-6fc0-4499-bee8-fe22f1bc2281","JetHub.655cba0e-7f72-402c-b80b-dcb740546163","JetHub.85d817e2-67a3-4291-b564-5320598339f6","JetHub.e3079263-3f6e-4a54-ad88-0dfc5dd2ce18","JetHub.33f00a67-9b05-4293-8119-4617e2fed9b0","JetHub.6323cfe8-fb81-4716-b553-79b9d72641a5","JetHub.b4359f8a-030a-4ac9-aacd-c05b42163bcc", ... many more] 
```

我知道我可以增加 IIS 中的查询字符串大小，但是有没有更好的方法来管理组，或者我应该尝试创建我的服务器端分组方案并分别广播到每个客户端？PersistenConnections 可以在这方面提供帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T14:58:33.157

由于组通过 SignalR 0.5.3 中的查询字符串往返，您有以下选择：a) 增加最大查询字符串大小 b) 使用较短的组名 c) 在服务器上处理自己的分组并分别广播给每个用户

PersistentConnections 在这里没有帮助，因为 Hub API 是建立在它们之上的，所以你会遇到同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:03:38.800

我知道这已经让您满意了，但是有一种方法可以管理服务器上的组，而无需单独向每个客​​户端发送消息。您可以实现自己的 HubDispatcher：

```
using System.Collections.Generic;
using SignalR;
using SignalR.Hubs;

namespace My.Hubs
{
    public class MyHubDispatcher : HubDispatcher
    {
        public MyHubDispatcher() : base("/myhubs") { }

        protected override Connection CreateConnection(string connectionId, IEnumerable<string> signals, IEnumerable<string> groups)
        {
            //ex: IEnumerable<string> myGroups = new string[] { "MyHub.MyGroup", "MyHub.MyOtherGroup", "MyOtherHub.MyGroup" };
            IEnumerable<string> myGroups = GetGroups(connectionId);
            return base.CreateConnection(connectionId, signals, myGroups);
        }
    }
} 
```

然后，您可以像任何其他 PersistentConnection 一样设置路由：

```
using System.Web;
using System.Web.Routing;
using SignalR;

namespace My
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class Application : HttpApplication
    {
        protected void Application_Start()
        {
            RouteTable.Routes.MapConnection<Hubs.MyHubDispatcher>("myhubs", "myhubs/{*operation}");
            RouteConfig.RegisterRoutes(RouteTable.Routes);
        }
    }
} 
```

然后，您可以像往常一样在您的集线器上使用组：

```
using SignalR.Hubs;

namespace My.Hubs
{
    public class MyHub : Hub
    {
        public void AlertClients(string id, int duration)
        {
            Clients["MyGroup"].Alert("MyGroup");
            Clients["MyOtherGroup"].Alert("MyOtherGroup");
        }
    }
} 
```

如果您使用 JS 客户端，您可以简单地将脚本包含在`~/myhubs/hubs`而不是`~/signalr/hubs`. 如果您使用的是 .NET 客户端，您只需使用`new Client.Hubs.HubConnection("http://foo/myhubs", useDefaultUrl: false);`

# java - Eclipse 打印堆栈跟踪但不显示变量。漏洞？

> ID：12651172
> 
> 赞同：0
> 
> 时间：2012-09-29T08:27:04.783
> 
> 标签：java, eclipse, debugging, exception

在我以前的应用程序中，我得到了一个 NPE，并且通过在 NullPointerException 处设置断点，可以获得中断、堆栈跟踪（在“调试”窗口中）和“变量”窗口中的当前变量。

但是，现在其他地方有一个未捕获的 ArrayIndexOutOfBoundsException。在 Eclipse 中，当在该异常处设置断点时，我只*在控制台中*获得堆栈跟踪，但在“变量”窗口中看不到任何变量。这是一个错误吗？我还确保应用程序不会捕获异常或打印跟踪。

断点是这样配置的（复制）： ArrayIndexOutOfBoundsException: 已捕获和未捕获（两个开关都打开）
挂起线程打开，所有其他开关都关闭。

第一行跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:54:23.180

我自己的问题的解决方案是：不，这不是错误。我通过 Debug 窗口顶部的小 Play 按钮在 Eclipse Debug 外观中启动了应用程序。但这并没有启动调试会话，因为我之前已经启动了运行会话。然而，在整个画面中并没有明显的迹象。我个人认为这是一个设计错误。

# javascript - facebook javascript api调用返回未定义

> ID：12651174
> 
> 赞同：0
> 
> 时间：2012-09-29T08:27:26.520
> 
> 标签：javascript, facebook

我在使用 Facebook 的 javascript sdk 时遇到问题。根据文档，我正在尝试执行一个简单的 api 调用来返回我的名字。应该弹出一个警报，说明“你的名字是”，但我得到的是“你的名字未定义”。我错过了什么吗？

php SDK 运行良好，所以我知道这不是关于应用程序设置的错误。我目前也已登录该应用程序。

```
<div id="fb-root"></div>
<script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<app id>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });

        FB.api('/me', function(response) {
          alert('Your name is ' + response.name);
        });
      };

      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());

</script> 
```

# database - 将二维电子表格数据保存到数据库

> ID：12651175
> 
> 赞同：0
> 
> 时间：2012-09-29T08:27:32.867
> 
> 标签：database, database-design, multidimensional-array

我有几个重量/价格对表，格式如下：

```
(example for two tables, I have several such tables)

    table 1:               table 2:
weight    price         weight    price
  5         7             5         4
  10        9             10        7
  15        14            15        11
  20        15            20        14
  ...                     ... 
```

每个重量/价格表都有相同数量的行，但应该可以在需要时编辑值。以后也应该可以尽可能少地添加新表。

我希望表格几乎像另一个实体的属性。有没有办法做这样的事情？有些人建议将文件简单地存储在磁盘上并在需要时读取它们，但该解决方案对我来说并不完美，因为我有时想编辑这些值。

存储此类数据的正确结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:53:34.920

在 SQL 中，您可以简单地执行以下操作（假设“产品”是识别每组重量/价格对并假设重量决定价格的东西）：

```
CREATE TABLE ProductWeightPrice
 (Product VARCHAR(20) NOT NULL,
  Weight INT NOT NULL,
  Price INT NOT NULL,
  PRIMARY KEY (Product,Weight)); 
```

如果您需要更多帮助，请说明您使用的是什么 DBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T09:53:34.493

有一个“表号”字段对你有用吗？所以它变成：

```
product_id,
table_number,
weight,
price 
```

使用 product_id、table_number 上的主键。

现在它不再是“表号”，而是“对号”或类似名称，因此您可以将名称更改为更有意义。

# javascript - 谷歌地图没有在弹出窗口中正确显示

> ID：12651177
> 
> 赞同：0
> 
> 时间：2012-09-29T08:27:41.983
> 
> 标签：javascript, jquery, google-maps, popup

我想在弹出窗口中显示谷歌地图，但显示不正确。我在单击时显示该弹出窗口，然后将地图加载到该弹出窗口中。它没有显示在整个`div`弹出窗口中。

这是我的代码：-我`div (dinner_loc_map)`在点击时显示

```
<a id="DinnerLocMap"></a> 

$('#DinnerLocMap').click(function() { 
    $('.dinner_loc_map').show(); 
    initialize(); 
});

function initialize() { 
    var myLatlng = new google.maps.LatLng(lat, long); 
    var myOptions = { 
        zoom: 8, 
        center: myLatlng, 
        mapTypeId: google.maps.MapTypeId.ROADMAP 
    } 

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
} 
```

# php - 如何在运行时生成或修改 PHP 类？

> ID：12651179
> 
> 赞同：2
> 
> 时间：2012-09-29T08:28:04.430
> 
> 标签：php, runtime, php-5.3

schmittjoh [/cg-library](https://github.com/schmittjoh/cg-library)似乎是我需要的，但根本没有文档。

> 这个库提供了一些生成 PHP 代码通常需要的工具。它的优势之一在于通过行为增强现有类。

给定`A`类：

```
class A {} 
```

当然，我想在运行时使用一些缓存机制 class 进行修改，`A`使其实现给定的接口：

```
interface I
{
    public function mustImplement();
} 
```

`mustImplement()`...具有类中方法的“默认”实现`A`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T08:31:59.877

> *注意：* OP 需要 PHP 5.3（以前没有这样标记），这个问题是 PHP 5.4 的概述。

您可以通过定义接口并添加包含这些接口的默认实现的特征来做到这一点。

然后你创建一个新的类定义

*   *从您的基类*扩展，**
**   *实现*该接口和*   *使用*默认特征。*

 *例如，请参阅[PHP 中的特征 - 任何现实世界的示例/最佳实践？](https://stackoverflow.com/questions/7892749/traits-in-php-any-real-world-examples-best-practices/7893384#7893384)

您可以轻松地生成该类定义代码并将其存储`include`或`eval`直接存储。

如果您使新的类名包含它所包含的所有信息（在您的情况下是基类名和接口），您可以轻松地防止创建重复的类定义。

这无需任何 PHP 扩展（如 runkit）即可工作。如果您`serialize`参与其中，您甚至可以在运行时使用新接口重载现有对象，以防它们可以序列化/反序列化。

您可以在以下位置找到已实现此功能的代码示例：

*   [DCI-Account-Example-in-PHP / src / DCI / Casting.php](https://github.com/hakre/DCI-Account-Example-in-PHP/blob/ScalaCopy/src/DCI/Casting.php)（[用法](https://github.com/hakre/DCI-Account-Example-in-PHP/blob/ScalaCopy/example/app.php)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T10:05:59.260

您还可以使用角色对象模式和良好的旧聚合。

与其拥有包含所有业务逻辑的智能实体，不如让它们变得愚蠢，然后将所有业务逻辑移动到聚合这些愚蠢实体的角色中。然后，您的行为是生活在角色中的一等公民。

例子：

```
interface BannableUser
{
    public function ban();
} 
```

具有一种特定行为的接口遵循接口隔离原则。它还极大地增加了重用的可能性，因为与具有特定应用程序行为集合的实体相比，您更有可能重用单个行为。

现在要实现它，您需要创建一个适当的角色类：

```
class BannableUserRole implements BannableUser
{
     private $user;

     public function __construct(User $user)
     {
         $this->user = $user;
     }

     public function ban()
     {
         $this->user->isBanned = true;
     }
} 
```

您仍然有一个 User 实体，但它完全没有所有行为。它本质上只是一袋 Getter 和 Setter 或公共属性。它代表您的系统*是*什么。这是数据部分，而不是交互部分。交互现在在角色内部。

```
class User
{
    public $isBanned;

    // … more properties
} 
```

现在假设您有某种 Web UI，您可以在控制器中执行以下操作：

```
class BanUserController implements RequestHandler
{
    // …

    public function handleRequest(Request $request)
    {
        $userId = $request->getVar('user_id');
        $user = $this->userRepository->findById($userId);
        $bannableUser = new BannableUserRole($user);
        $bannableUser->ban();
    }
} 
```

您可以通过将 User 的实际查找和 Role 的分配移动到 UseCase 类中来进一步解耦。我们称之为上下文：

```
class BanUserContext implements Context
{
    public function run($userId)
    {
        $user = $this->userRepository->findById($userId);
        $bannableUser = new BannableUserRole($user);
        $bannableUser->ban();
    }
} 
```

现在，您在模型层中拥有了所有业务逻辑，并且与您的用户界面完全隔离。上下文是您的系统**所做**的。您的控制器只会委托给适当的上下文：

```
class BanUserController implements RequestHandler
{
    // …

    public function handleRequest(Request $request)
    {
        $this->banUserContext->run($request->getVar('user_id'));

    }
} 
```

就是这样。不需要 Runkit 或类似的黑客。以上是*数据上下文交互*架构模式的简化版本，以防您想进一步研究。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T00:17:51.847

我需要一个工具来编辑 PHP 类（特别是 Doctrine Entities），我找不到它，所以我创建了一个可以帮助你的工具，我大量记录了它。因此，如果您想尝试一下，我很乐意提供帮助。

在这里，[SourceEditor](https://github.com/juanmf/SourceEditor)

它为您提供了这样的 API：

```
 /* @var $classEditor DocDigital\Lib\SourceEditor\PhpClassEditor */
    $classEditor->parseFile($classPath);
    $classEditor->getClass('a')->getMethod('b')->addAnnotation('@auth Juan Manuel Fernandez <juanmf@gmail.com>');
    $classEditor->getClass('a')->getAttribute('attr')->addAnnotation('@Assert\Choice(...)');
    $classEditor->getClass('a')->addAttribute($attr2);
    $classEditor->getClass('a')->addUse('use DocDigital\Bundle\DocumentBundle\DocumentGenerator\Annotation as DdMapping;');
    $classEditor->getClass('a')->addConst('    const CONSTANT = 1;');

    file_put_contents($classPath, $classEditor->getClass('a')->render(false)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T08:31:35.290

[Runkit](http://php.net/runkit)扩展可以帮助你

```
Runkit_Sandbox — Runkit Sandbox Class -- PHP Virtual Machine
Runkit_Sandbox_Parent — Runkit Anti-Sandbox Class
runkit_class_adopt — Convert a base class to an inherited class, add ancestral methods when appropriate
runkit_class_emancipate — Convert an inherited class to a base class, removes any method whose scope is ancestral
runkit_constant_add — Similar to define(), but allows defining in class definitions as well
runkit_constant_redefine — Redefine an already defined constant
runkit_constant_remove — Remove/Delete an already defined constant
runkit_function_add — Add a new function, similar to create_function
runkit_function_copy — Copy a function to a new function name
runkit_function_redefine — Replace a function definition with a new implementation
runkit_function_remove — Remove a function definition
runkit_function_rename — Change the name of a function
runkit_import — Process a PHP file importing function and class definitions, overwriting where appropriate
runkit_lint_file — Check the PHP syntax of the specified file
runkit_lint — Check the PHP syntax of the specified php code
runkit_method_add — Dynamically adds a new method to a given class
runkit_method_copy — Copies a method from class to another
runkit_method_redefine — Dynamically changes the code of the given method
runkit_method_remove — Dynamically removes the given method
runkit_method_rename — Dynamically changes the name of the given method
runkit_return_value_used — Determines if the current functions return value will be used
runkit_sandbox_output_handler — Specify a function to capture and/or process output from a runkit sandbox
runkit_superglobals — Return numerically indexed array of registered superglobals 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T18:28:07.603

你可以看看：[https ://github.com/ptrofimov/jslikeobject](https://github.com/ptrofimov/jslikeobject)

作者实现了支持继承的动态类 JS 对象。

但这更像是一个笑话，而不是真正的提议。*

# ruby - 我想删除 d[24] 中的令牌

> ID：12651189
> 
> 赞同：-1
> 
> 时间：2012-09-29T08:30:08.007
> 
> 标签：ruby, ruby-on-rails-3.2

我想用“”替换 d[24] 中的标记。有谁能够帮助我。谢谢

```
:1 > d = "01-04-2013 ist the first-day of April"
  => "01-04-2013 ist the first-day of April" 
:2 > d.index(/(\D|\s)(\/|\-|\:|\#|\\|\"|\'){1,}/)+1
  => 24
:3 > d[d.index(/(\D|\s)(\/|\-|\:|\#|\\|\"|\'){1,}/)+1]
  => "-" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:32:45.220

我不确定我得到你的问题，但不会

```
d[24] = " " 
```

工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:36:15.583

要替换您的表达式正在查找索引的字符，只需分配`' '`给它；

> irb(main):001:0> **d = "01-04-2013 是 4 月的第一天"**
> => "01-04-2013 是 4 月的第一天"
> irb(main):002:0> **d[d.index(/(\D|\s)(/|-|\:|#|\|\"|\'){1,}/)+1] = ' '**
> => " "
> irb( main):003:0> **d**
> => "01-04-2013 ist 四月的第一天"

# qt4.7 - QTcp [服务器和套接字]：无法读取发送的文件

> ID：12651192
> 
> 赞同：1
> 
> 时间：2012-09-29T08:30:51.110
> 
> 标签：qt4.7, qtcpserver

早上好，我正在寻找一个关于使用 QTcpSocket 将文件从一台电脑发送到另一台电脑的示例。我试图创建自己的代码。我有一个应用程序，其中，用户将从他的 DD 中选择一个文件（所有类型）并将其发送到 TcpServer，然后该服务器将此文件发送到其他客户端。但是，当我选择时，我有一个问题文件和我发送它，在客户端，我有这个消息：文件正在发送，但在服务器端，它告诉我文件没有收到它的全部字节。请有任何建议。这是在客户端发送文件的函数：

```
void FenClient::on_boutonEnvoyer_2_clicked()
{
    QString nomFichier = lineEdit->text();
        QFile file(lineEdit->text());
        if(!file.open(QIODevice::ReadOnly))
        {
            qDebug() << "Error, file can't be opened successfully !";
            return;

        }

        QByteArray bytes = file.readAll();

        QByteArray block;
        QDataStream out(&block, QIODevice::WriteOnly);

        out << quint32(0);
        out << nomFichier;
        out << bytes;
        out.device()->seek(0);
        out << quint32((block.size() - sizeof(quint32)));

        qDebug() << "Etat : envoi en cours...";
         listeMessages->append("status : sending the file...");

        socket->write(block);
} 
```

和服务器端：

```
void FenServeur::datarecieved()
{

    QTcpSocket *socket = qobject_cast<QTcpSocket *>(sender());

        if(socket == 0)
        {
            qDebug() << "no Socket!";
            return;
        }

        forever
        {
            QDataStream in(socket);
            if(blockSize == 0)
            {
                if(socket->bytesAvailable()  )
                {
                    qDebug() << "Error < sizeof(quint32))";
                    return;
                }

                in >> blockSize;
            }

            if(socket->bytesAvailable() < blockSize)
             {
                qDebug() << "data not recieved with its total bytes";

                return;
             }

            qDebug() << "!!!!!!";
            QByteArray dataOut;
            QString nameFile;
            in >> nameFile >> dataOut;
            QFile fileOut(nameFile);
            fileOut.open(QIODevice::WriteOnly);
            fileOut.write(dataOut);
            fileOut.close();

            blockSize = 0;
         }
}

void FenServeur::sendToAll(const QString &message)
{

    QByteArray paquet;
    QDataStream out(&paquet, QIODevice::WriteOnly);

    out << (quint32) 0;
    out << message;
    out.device()->seek(0);
    out << (quint32) (paquet.size() - sizeof(quint32));
    for (int i = 0; i < clients.size(); i++)
    {
        clients[i]->write(paquet);
    }

} 
```

所以我无法将服务器收到的文件写入新文件。请有任何建议！！并提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:38:43.030

你的代码在等对方，而对方却在等你。任何允许双方相互等待的协议都从根本上被破坏了。

TCP 允许发送方等待接收方，但不允许接收方等待发送方。这是有道理的，因为不允许发送者等待接收者需要无限量的缓冲。因此，对于任何在 TCP 之上的应用程序，接收者可能不会等待发送者。

但你做了：

```
 if(socket->bytesAvailable() < blockSize)
        {
            qDebug() << "data not recieved with its total bytes";

            return;
        } 
```

在这里，您正在等待发送方取得进展（bytesAvailable 增加），然后您才愿意接收（从套接字拉数据）。但是发送者在它愿意发送更多数据之前正在等待你取得进展。这会导致死锁。不要这样做。

尽可能快地接收尽可能多的数据。*在从网络堆栈中提取已经接收到的数据之前，切勿*坚持通过网络接收更多数据。

# database - 从头开始为客户管理创建数据库

> ID：12651195
> 
> 赞同：2
> 
> 时间：2012-09-29T08:31:30.017
> 
> 标签：database, database-design, content-management-system

如何使用客户信息（电子邮件地址、电话、附属机构）和不同活动的驱动信息（当前兴趣、正在进行的研究等）创建一个简单的数据库。数据库应允许用户记录日常信息，例如：

*   联系客户的日期；
*   客户回覆我的日期；
*   交互状态（感兴趣的客户，不感兴趣，考虑...等）
*   当前状态需要采取的行动（自动警报提示和行动）；
*   记录采取行动的日期；
*   数据分析，以了解与客户进行的和过去的电子邮件交换的演变；
*   多个用户使用同一个数据库；
*   检查是否有重复的客户（电子邮件 ID 验证）
*   考虑同一个人的不同电子邮件地址，并检查所有电子邮件地址是否重复联系人；
*   从 excel 导入当前数据库（包括重复数据库，并考虑同一客户可以包含在不同的活动中，但从未在同一此处联系过两次）
*   创建简单的界面来访问数据库并执行所有日常操作，例如日志信息，并为每个活动驱动器详细信息上传带有主题信息的新闻联系人。

重要提示：我对编程知之甚少，这应该是易于开发和使用的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:54:25.833

It sounds like you are looking for more than just a database (E.G., a place to store stuff) and are looking at a solution UI, DB, Reports, etc. Assuming this is correct and that you want to use Microsoft technologies (there are tons of other alternatives Ruby on Rails, Java, PHP, MySql, Mongo, etc.) I would suggest learning about [Nerd Dinner written by Microsoft](http://nerddinner.codeplex.com/) in ASP.NET MVC3 using SQL Server for the RDBMS as the concept matches **some** of your requirements above.

# python - Python 数据库更新错误

> ID：12651197
> 
> 赞同：0
> 
> 时间：2012-09-29T08:31:42.473
> 
> 标签：python, mysql, database

通常我使用 Django orm 在 python 中进行与数据库相关的查询，但现在我使用的是 python 本身

我正在尝试更新我的 mysql 数据库的一行

```
query ='UPDATE callerdetail SET upload="{0}" WHERE agent="{1}" AND custid="{2}"AND screenname="{3}" AND status="1"'.format(get.uploaded,get.agent,get.custid,get.screenname) 
```

但我得到了错误

```
query ='UPDATE callerdetail SET upload="{0}" WHERE agent="{1}" AND custid="{2}"AND screenname="{3}" AND status="1"'.format(get.uploaded,get.agent,get.custid,get.screenname) 
```

AttributeError：“C”对象没有“已上传”属性

请帮助我的查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:28:45.023

简而言之——`get`可能不是你想的那样。

但是，在您进一步使用字符串格式构建 SQL 查询之前，我强烈建议您不要这样做！搜索“SQL 注入”，您就会明白为什么。Python DB API 兼容库利用“占位符”，库可以使用这些“占位符”将变量插入到查询中，以便您提供任何必要的转义/引用。

所以而不是：

```
query ='UPDATE callerdetail SET upload="{0}" WHERE agent="{1}" AND custid="{2}"AND screenname="{3}" AND status="1"'.format(get.uploaded,get.agent,get.custid,get.screenname) 
```

使用 SQLite3 的示例（`?`用作占位符 - 其他人使用`%s`or`:1`或 %(name)s - 或以上任何/所有 - 但这将在您的库的文档中详细说明）：

```
query = "update callerdetail set upload=? where agent=? and custid=? and screename=? and status=?" 
```

然后在执行查询时，您提供要替换的值作为单独的参数：

```
cursor.execute(query, (get.uploaded, get.agent, get.custid, get.screenname)) 
```

如果你真的想要，你可以有一个方便的功能，并将其简化为：

```
from operator import attrgetter
get_fields = attrgetter('uploaded', 'agent', 'custid', 'screenname')
cursor.execute(query, get_fields(get)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:35:25.760

Get 可能正在映射到 ac 对象。尝试将您的“get”对象重命名为其他对象。

这是[保留字](http://pentangle.net/python/handbook/node52.html)列表。我看不到那里，但听起来它可能是被包含的 ac 库的一部分。如果您使用**from x import ***包含某些内容，您可能会在不知道的情况下导入它。

# ipad - 如何在 ipad 的 popOvewView 中显示 cameracview

> ID：12651198
> 
> 赞同：0
> 
> 时间：2012-09-29T08:31:52.260
> 
> 标签：ipad, uipopovercontroller

大家好，我正在使用 popoverController 显示相机视图，但我没有获得相机视图任何人请帮助我这里是我的代码。

```
 picker = [[UIImagePickerController alloc] init];
picker.sourceType = UIImagePickerControllerSourceTypeCamera;
picker.showsCameraControls=NO;
picker.delegate = nil;
picker.allowsEditing = NO;

UIViewController *containerController = [[UIViewController alloc] init];
containerController.contentSizeForViewInPopover = CGSizeMake(768, 750);
[containerController.view addSubview:picker.view];

UIPopoverController *popover = [[UIPopoverController alloc]   initWithContentViewController:containerController];

self.popoverController = popover;          
popoverController.delegate = self;          

[popover release];          
CGPoint point = {760,750}; 
CGSize size = {760,750};

[popoverController presentPopoverFromRect:CGRectMake(point.x, point.y, size.width, size.height) 
                                   inView:self.view  permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

在这里我得到空的popoverView？视频不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:39:41.270

我找不到问题。请检查此代码：

```
picker = [[UIImagePickerController alloc] init];
picker.sourceType = UIImagePickerControllerSourceTypeCamera;
picker.showsCameraControls=NO;
picker.delegate = nil;
picker.allowsEditing = NO;
picker.contentSizeForViewInPopover = CGSizeMake(768, 750);

UIPopoverController *popover = [[UIPopoverController alloc]   initWithContentViewController:picker];

self.popoverController = popover;          
popoverController.delegate = self;          

[popover release];          
CGPoint point = {760,750}; 
CGSize size = {760,750};

[self.popoverController presentPopoverFromRect:CGRectMake(point.x, point.y, size.width, size.height) inView:self.view  permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

# c - 使用 gcc 编译 win32 项目时如何链接到库？

> ID：12651202
> 
> 赞同：2
> 
> 时间：2012-09-29T08:32:26.997
> 
> 标签：c, windows, winapi, gcc

我正在尝试在 Win 7 上使用 gcc 编译一个基本的 hello word winform 应用程序。

代码是这样的：

```
/*

  WINHELLO.C

  "Hello, world!", Win32 style.

*/

#include <windows.h>

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);

/*  WinMain(), our entry point  */

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
           LPSTR szCmdLine, int iCmdShow) {
    static char szAppName[] = "winhello";
    HWND        hwnd;
    MSG         msg;
    WNDCLASSEX  wndclass;

    /*  Fill in WNDCLASSEX struct members  */

    wndclass.cbSize         = sizeof(wndclass);
    wndclass.style          = CS_HREDRAW | CS_VREDRAW;
    wndclass.lpfnWndProc    = WndProc;
    wndclass.cbClsExtra     = 0;
    wndclass.cbWndExtra     = 0;
    wndclass.hInstance      = hInstance;
    wndclass.hIcon          = LoadIcon(NULL, IDI_APPLICATION);
    wndclass.hIconSm        = LoadIcon(NULL, IDI_APPLICATION);
    wndclass.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wndclass.hbrBackground  = (HBRUSH) GetStockObject(WHITE_BRUSH);
    wndclass.lpszClassName  = szAppName;
    wndclass.lpszMenuName   = NULL;

    /*  Register a new window class with Windows  */

    RegisterClassEx(&wndclass);

    /*  Create a window based on our new class  */

    hwnd = CreateWindow(szAppName, "Hello, world!",
            WS_OVERLAPPEDWINDOW,
            CW_USEDEFAULT, CW_USEDEFAULT,
            CW_USEDEFAULT, CW_USEDEFAULT,
            NULL, NULL, hInstance, NULL);

    /*  Show and update our window  */

    ShowWindow(hwnd, iCmdShow);
    UpdateWindow(hwnd);

    /*  Retrieve and process messages until we get WM_QUIT  */

    while ( GetMessage(&msg, NULL, 0, 0) ) {
    TranslateMessage(&msg);    /*  for certain keyboard messages  */
    DispatchMessage(&msg);     /*  send message to WndProc        */
    } 

    /*  Exit with status specified in WM_QUIT message  */

    return msg.wParam;
}

/*  Window procedure  */

LRESULT CALLBACK WndProc(HWND hwnd, UINT iMsg, WPARAM wParam, LPARAM lParam) {
    PAINTSTRUCT ps;
    HDC         hdc;

    /*  Switch according to what type of message we have received  */

    switch ( iMsg ) {
    case WM_PAINT:

    /*  We receive WM_PAINT every time window is updated  */

    hdc = BeginPaint(hwnd, &ps);
    TextOut(hdc, 100, 100, "Hello, world!", 13);
    EndPaint(hwnd, &ps);
    return 0;

    case WM_DESTROY:

    /*  Window has been destroyed, so exit cleanly  */

    PostQuitMessage(0);
    return 0;
    }

    /*  Send any messages we don't handle to default window procedure  */

    return DefWindowProc(hwnd, iMsg, wParam, lParam);
} 
```

我给编译器的命令是`gcc C:\Users\Bobby\Desktop\myfile.c`

好吧，它会寻找库：

```
C:\Users\Bobby\desktop>gcc C:\Users\Bobby\Desktop\myfile.c
C:\Users\Bobby\AppData\Local\Temp\ccT0bq97.o:myfile.c:(.text+0x88): undefined reference to `GetStockObject@4'
C:\Users\Bobby\AppData\Local\Temp\ccT0bq97.o:myfile.c:(.text+0x1db): undefined reference to `TextOutA@20'
collect2: ld returned 1 exit status
PS C:\Users\Scruffy\desktop> .\build.bat

C:\Users\Bobby\desktop>gcc C:\Users\Bobby\Desktop\myfile.c -I Gdi32.lib
C:\Users\Bobby\AppData\Local\Temp\ccylV5js.o:myfile.c:(.text+0x88): undefined reference to `GetStockObject@4'
C:\Users\Bobby\AppData\Local\Temp\ccylV5js.o:myfile.c:(.text+0x1db): undefined reference to `TextOutA@20'
collect2: ld returned 1 exit status
PS C:\Users\Bobby\desktop> C:\MinGW\ 
```

我做了一些谷歌搜索，我发现这首先`GetStockObject@4`是在一个名为 Gdi32.lib 的文件中。所以我搜索了我的硬盘驱动器并通过 MinGW 并找不到它。定位此函数的 Lib 在哪里，链接到它的方法是什么？我也认为我必须链接到`TextOutA@20`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T10:35:22.087

`-mwindows`在这种情况下，您应该使用子系统选项，而不是显式链接 GDI32 ：

```
gcc -Wall -mwindows winhello.c -o winhello.exe 
```

笔记：

gcc 等人。比 .lib 更喜欢 .a 文件，所以你应该一直在寻找`libgdi32.a`. 您仍然可以通过将文件名作为参数来链接：

```
gcc src.c /path/to/example1.lib /path/to/libexample2.a 
```

或使用`-l`.a 文件的选项：

```
gcc src.c /path/to/example1.lib -L/path/to -lexample2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:16:57.390

Windows DLL 需要所谓的*导入库*供链接器解析对其导出函数的引用。Microsoft 为Windows SDK提供导入库，包括**Gdi32.lib 。**此文件不应部署给最终用户。

# mongodb - MongoDB和两阶段提交如何解决多个并发写入？

> ID：12651206
> 
> 赞同：1
> 
> 时间：2012-09-29T08:33:08.987
> 
> 标签：mongodb, concurrency

我已经为 MongoDB 实现了两阶段提交，如 MongoDB 的[文档](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)中所述。基本上，这工作正常。这特别容易，因为我只关心插入新文档，我从不更新它们。

然而，我担心一个特定的场景，我不确定如何解决这个问题。所以任何帮助将不胜感激。

给定：包含具有以下结构的文档的集合：

```
id: ...,
subId: ...
payload: {
  ...
} 
```

可能有多个相同的`id`文档，但所有相同的文档`id`都有增加`subId`。所以，你有类似的东西：

*   1 - 1
*   1 - 2
*   2 - 1
*   3 - 1
*   3 - 2
*   3 - 3

每个插入只处理一个`id`，但可能提供多个文档。所以这意味着可能会有一个带有文档`3 - 4`和的插入`3 - 5`，但永远不会有一个带有文档`3 - 4`和的插入`4 - 1`。

`id`和`subId`字段由插入数据的客户端计算。

插入多个文档时，此插入被 2PC 覆盖。所以要么所有文件都被提交，要么没有。

现在问题出现在 2PC 的第二阶段。由于我不希望其他客户端能够读取未提交的数据，因此每个文档中都有一个标志，告诉我该文档是否已经提交。一旦所有文档都已写入并且事务已设置为“已完成”，作为最后一步，文档将被标记为已提交。

所以现在如果我尝试插入`3 - 4`and会发生什么`3 - 5`，两者都被写入，事务完成，并被`3 - 4`标记为已提交，并且在`3 - 5`被标记为已提交之前，另一个客户端读取所有具有 id 的文档`3`，将 subId`4`视为最高的文档，创建一个新文档`3 - 5`并插入它？

然后提交失败，我混合了来自两个事务的版本号。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:34:30.157

哦，算了……典型的“写就看到”的例子。我描述的场景没有问题，因为`3 - 5`第一个事务已经编写了，只是没有提交。因此作为唯一索引约束的`id - subId`另一个事务不能干涉。

问题解决了。

# php - 未找到 CodeIgniter 模型

> ID：12651207
> 
> 赞同：1
> 
> 时间：2012-09-29T08:33:46.533
> 
> 标签：php, mysql, database, codeigniter

我正在尝试将 mysql 与 CodeIgniter 连接。我收到了这个错误：

```
load->database(); 
$query = $this->db->get('student'); return $query->result(); } } ?>

Fatal error: Class 'Student_model' not found in 
C:\wamp\www\CodeIgniter\system\core\Loader.php on line 303 
```

这是我的代码：

**模型**

```
class Student_model extends CI_Model
{

    function __Construct()

    {
        parent::__Construct();
    }

    public function student_getall()
    {
        $this->load->database();
        $query = $this->db->get('student');
        return $query->result();
    }
} 
```

**看法**

```
foreach($query as $row)
{
    print $row->fname;
    print $row->lname;
    print $row->roll;
    print $row->address;
    print "<br>";
} 
```

**控制器**

```
class Student extends CI_Controller
{
    function __Construct()
    {
        parent::__Construct();
    }

    public function getall()
    {
        $this->load->model('student_model');
        $data['query'] = $this->student_model->student_getall();
        $this->load->view('student_view',$data);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:33:41.763

问题是

```
function __Construct()
{
        parent::__Construct();
} 
```

您可以看到首都`C`而不是`c`.

再说一遍，请确保您从使用文件开始，在 .之后没有任何空格`<?php`的结束文件。`?>``?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:57:03.690

我建议你自动加载数据库库，因为它会经常使用。您可以在 application/config/autload.php 文件中定义它，变量是，

```
$autoload['libraries'] = array('database'); 
```

您的模型文件名应该是，

```
student_model.php 
```

并且类名应该是

```
Student_model

and $this->load->model('student_model') = $this->load->model('Student_model'); 
```

这不区分大小写。

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:03:56.497

```
May be your model starts with <?
And in yuour php.ini, shorttages is off thats why the issue is there.
Either enable shorttag or user <?php instead of <?
I found out this solution. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T02:07:38.033

这个

```
function __Construct()
{
    parent::__Construct();
} 
```

应该是小“c”。请检查您是否已正确保存`student_model.php`在您的模型文件夹中

> /Codeigniter/application.models

# django - django 有条件地过滤对象

> ID：12651211
> 
> 赞同：36
> 
> 时间：2012-09-29T08:34:18.453
> 
> 标签：django

我想使用一组过滤器从我的数据库中检索一堆行。

我想知道条件过滤器是否适用于 django。也就是说，“如果变量不是无则过滤，否则不应用过滤”。

像这样的东西：

```
user = User.objects.get(pk=1)
category = Category.objects.get(pk=1)
todays_items = Item.objects.filter(user=user, date=now()).conditional_filter(category=category)) 
```

我想做的是仅在类别不是无时应用类别过滤器。

如果 category 是 None （意味着它没有在请求对象中给出），那么这个过滤器根本不会被应用。这将为我节省一堆“if-elif-else”的情况。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-29T09:29:46.600

您可以链接查询：

```
user = User.objects.get(pk=1)
category = Category.objects.get(pk=1)
qs = Item.objects.filter(user=user, date=now())
if category:
    qs = qs.filter(category=category) 
```

由于查询集是延迟执行的，因此只有在显示项目时才会发生 DB 命中。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-29T08:42:00.830

它们是解决您问题的几种方法。一种方法是[使用 Q 对象进行复杂查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

```
from django.db.models import Q

user = User.objects.get(pk=1)
category = Category.objects.get(pk=1)

f1 = Q( user=user, date=now() )
f_cat_is_none = Q( category__isnull = True )
f_cat_is_not_none = Q( category=category )

todays_items = Item.objects.filter( f1 & ( f_cat_is_none | f_cat_is_not_none ) ) 
```

如果这是您要查找的查询，我在您的回答中没有正确理解，但是，通过此示例，您可以轻松地编写自己的查询。

**编辑到期的 OP 评论**

`category__isnull == True`意味着，在数据库中，该项目没有关联的类别。也许您正在寻找的查询是：

```
from django.db.models import Q

user_pk = 1
category_pk = 1  #some times None

f = Q( user__pk = user_pk, date=now() )
if category_pk is not None:
  f &= Q( category__pk = category_pk )

todays_items = Item.objects.filter( f  ) 
```

这只是一个代码示例，适合您的要求。小心 single`_`和 double `__`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-20T06:03:19.353

好吧，这是一个相当老的问题，但是对于那些想在一行上进行条件过滤的人，这是我的方法（顺便说一句，以下代码可能可以用更通用的方式编写）：

```
from django.db.models import Q

def conditional_category_filter(category):
    if category != None:
        return Q(category=category)
    else:
        return Q() #Dummy filter

user = User.objects.get(pk=1)
category = Category.objects.get(pk=1)
todays_items = Item.objects.filter(conditional_category_filter(category), user=user, date=now()) 
```

您唯一需要注意的是`conditional_category_filter(category)`在关键字参数之前使用调用，例如`user=user`. 例如下面的代码会抛出一个错误：

```
todays_items = Item.objects.filter(user=user, date=now(), conditional_category_filter(category)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-11T14:11:35.877

要继续@iuysal 答案：

为了使其通用，您还需要将密钥作为参数传递，为此您需要传递字典，这就是我的做法：

像这样创建你的字典：

```
filters = {'filter1': 'value1', 'filter2__startswith': 'valu', ...} 
```

然后将其传递给您的项目过滤器，如下所示：

```
Item.objects.filter(*[Q(**{k: v}) for k, v in filters.items() if v], filter3='value3') 
```

我拥有的第一个版本不那么神秘：

```
def _filter(filters):
    filters = []
    for k, v in n.items():
        if v:
            filters.append(Q(**{k: v}))
    return filters

filters = _filter({'name': name})
return Item.objects.filter(*filters) 
```

开箱说明：我们想给`Q (queries)`as `args`to `objects.filter`as args 而我们想给`kwargs`to`Q()`

我现在正在生产中（我将只修改过滤器名称，因为它很敏感）：

```
def get_queryset(self):
    filter1 = self.request.GET.get('filter1 ', '')
    filter2__startswith = self.request.GET.get('filter2_prefix ', '')

    def filters_to_Qs(filters):
        return [Q(**{k: v}) for k, v in filters.items() if v]

    filters = {'filter1': filter1 ,
               'filter2__startswith': filter2__startswith }

    return Order.objects.filter(*filters_to_Qs(filters)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-01T13:04:05.283

```
from django.db.models import Q

qs = Users.objects.filter(
                    p_id=parent_id,
                    status=True
                ).all()

if user_id>0:
    qs = qs.filter( ~Q(id=user_id) ) 
```

> # 在`qs`我们将得到过滤后的结果

# yql - 将 yql 中 geo.places.neighbors 的选择结果限制为最大值。距离

> ID：12651213
> 
> 赞同：0
> 
> 时间：2012-09-29T08:34:31.110
> 
> 标签：yql, geo

和

```
select placeTypeName, name from geo.places.neighbors where neighbor_woeid in (select woeid from geo.places where text="sunnyvale, usa" limit 1) 
```

我可以通过 YQL 从某个位置获取邻居位置。但是我怎样才能将结果限制在一定距离内呢？10公里，20公里，30公里..

# c# - 在线程中获取目录时出现对象引用错误

> ID：12651217
> 
> 赞同：1
> 
> 时间：2012-09-29T08:35:00.110
> 
> 标签：c#, threadpool, .net

大家好，我想像这样访问我的线程中的文件夹

```
protected string GetFolderName(int OrgID)
{
    string FolderName = string.Empty;
    string[] strDirectories = Directory.GetDirectories(HttpContext.Current.Server.MapPath("~/Uploads/"));
    if (strDirectories.Length > 0)
    {
        for (int count = 0; count < strDirectories.Length; count++)
        {
            string name = strDirectories[count].Substring(strDirectories[count].LastIndexOf("\\") + 1);
            if (name.Contains("_"))
            {
                string companyId = name.Substring(name.LastIndexOf("_") + 1);
                if (Convert.ToInt32(companyId) == OrgID)
                {
                    FolderName = name;
                    break;
                }
            }
        }
    }
    return FolderName;
} 
```

此方法是通过线程池调用的，它在此行上给了我“对象引用未设置为对象的实例”的错误

```
string[] strDirectories = Directory.GetDirectories(HttpContext.Current.Server.MapPath("~/Uploads/")); 
```

请帮帮我

* * *

**解决方案**

我用它`HttpRuntime.AppDomainAppPath`代替`HttpContext.Current.Server.MapPath`并且效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:39:18.703

[`HttpContext.Current`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)*返回执行线程中*的当前上下文。线程池线程不负责任何 HTTP 请求，因此它没有上下文。该`Current`属性将返回 null，这就是您收到异常的原因。我建议你在转移到线程池`Directory.GetDirectories()` *之前调用。*另一种方法是传递上下文。

EDIT: If you don't want to perform `Directory.GetDirectories()` in the thread pool thread, you could at least evaluate `HttpContext.Current.Server.MapPath("~/Uploads/")` in the original thread, and make *that* available to the thread pool. Basically you just want to avoid evaluating `HttpContext.Current` on the wrong thread.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:39:08.240

`HttpContext.Current.Server.MapPath("~/Uploads/")`作为最后一个参数发送`QueueUserWorkItem`

# openstreetmap - OpenStreetMap (OSM) 热图

> ID：12651226
> 
> 赞同：5
> 
> 时间：2012-09-29T08:36:33.213
> 
> 标签：openstreetmap

有没有人为 OpenStreetMap 使用过以下任何热图 API/脚本：

1.  Bjoern Hoehrmann 的 OpenLayers 热图层：[http ://www.websitedev.de/temp/openlayers-heatmap-layer.html](http://www.websitedev.de/temp/openlayers-heatmap-layer.html)
2.  Patrick Wied 的热图：http: [//www.patrick-wied.at/static/heatmapjs/](http://www.patrick-wied.at/static/heatmapjs/)

我正在寻找一个可以在生产环境中使用的免费热图api（每天几千次点击），所以，如果有人在高访问量环境中使用过上述任何一种，请分享您的经验；否则，如果您知道 OSM 热图的任何其他免费脚本，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T20:28:33.587

从未使用过它们，但您可以尝试：

*   [https://github.com/fredj/openlayers-heatmap](https://github.com/fredj/openlayers-heatmap)
*   [https://github.com/sunng87/heatcanvas](https://github.com/sunng87/heatcanvas)

# jquery - iPhone点击附加的DIV

> ID：12651230
> 
> 赞同：0
> 
> 时间：2012-09-29T08:37:06.957
> 
> 标签：jquery, ajax, html

我有一个专为移动设备设计的网页，大部分数据通过 AJAX 请求加载到其中，并使用 jQuery 附加到 BODY，到目前为止它工作得很好。但是，当我尝试附加一个点击监听器时，以下监听器不适用于任何浏览器

```
$('[id^="the_content"]').click(function () {
...
}); 
```

我已经通过使用 On() 方法解决了这个问题。以下代码在所有浏览器上都能完美运行（在 Chrome、FF、IE、**Safari for windows**上测试）。除了构建浏览器。

```
$(document).on("click",'[id^="the_content"]',function() {
...
}); 
```

请注意，这些侦听**器确实**适用于未通过 JS/jQuery 附加的数据

**请注意，我的代码完全没有错误地通过了 W3C HTML5 验证。**

有没有人遇到过这样的问题？

*div 示例：*

```
<div id='the_content_id_61'>...</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:45:44.670

`click`与其使用事件，不如使用`touch`事件。

请参阅此**[$(document).click() 上的 touch Handler 函数在 iPhone 上无法正常工作。jQuery](https://stackoverflow.com/a/3714129/500725)**

# c#-4.0 - 找出 5 个整数中的最小值？

> ID：12651232
> 
> 赞同：7
> 
> 时间：2012-09-29T08:37:18.173
> 
> 标签：c#-4.0

我需要找到 5 个整数值的最小值。我使用 if else 语句进行比较。所以它看起来不太好。即代码很长。我不知道如何降低代码复杂度。谁能帮我吗？

问候， 卡尔蒂

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T08:41:46.073

您可以使用`Min`LINQ 中的方法：

```
var list = new[] {1, 2, 3, 4, 5};
int min = list.Min(); 
```

`Min`这是您可以参考的 LINQ 列表：

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.min.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.min.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T08:39:06.213

查看 LINQ 的[Min](http://msdn.microsoft.com/en-us/library/bb339189.aspx)方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-29T08:49:48.317

您可以使用该`Math.Min`方法获得最小值：

```
int min = Math.Min(Math.Min(Math.Min(Math.Min(n1, n2) ,n3), n4), n5); 
```

* * *

其他一些可能更具可读性（和可扩展性）但效率不高的选项：

```
int min = new int[]{ n1, n2, n3, n4, n5}.Min();

int min = new SortedSet<int>() { n1, n2, n3, n4, n5 }[0]; 
```

# c# - HttpModule 和页面创建？

> ID：12651237
> 
> 赞同：3
> 
> 时间：2012-09-29T08:37:55.730
> 
> 标签：c#, asp.net, httpmodule

> **可能重复：**
> [HTTPModule 事件执行顺序？](https://stackoverflow.com/questions/441421/httpmodule-event-execution-order)

我正在调查 Page 对象最初是在哪里创建的 HttpModule Pipeline ：

```
 HttpModule 

     ===========
    #1  BeginRequest
    #2  AuthenticateRequest
    #3  AuthorizeRequest
    #4  RespolveRequestCache
    #5  AcquireRequestState 
    #6  PreRequestHandnlerExecute

    Handler
    ========
    #7  ProcessRequest

   ... later stages
   ================ 
```

这是我的有效期：

我已经注册了每个函数来执行一个特定的方法：

```
 void check(object sender, EventArgs e)
        {
          Page objPage = (sender as HttpApplication).Context.Handler as Page;
          if (objPage == null) return;
          ...
        } 
```

“安全演员”成功运作的*第一个*阶段是`AcquireRequestState`.

问题 ：

它确实对*我有用* ，但它是获取页面类的安全地方吗？

另外，为什么它没有记录在任何地方？我在 Msdn 中搜索了页面类在哪个阶段首次可访问，但找不到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:45:53.833

它是在[PostResolveRequestCache](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.postresolverequestcache.aspx)和[AcquireRequestState之间创建的](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.acquirerequeststate.aspx)

从我的脑海中，我认为[PostAcquireRequestState](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.postacquirerequeststate.aspx)访问页面会更安全

> 在获得与当前请求关联的请求状态（例如会话状态）时发生。

# objective-c - presentViewController:animated:completion: 总是导致呈现视图控制器的两个实例，这是一个错误吗？

> ID：12651248
> 
> 赞同：0
> 
> 时间：2012-09-29T08:39:11.050
> 
> 标签：objective-c, ios, modalviewcontroller

我连接到呈现的视图控制器的 init、loadView、viewDidLoad、viewWillAppear:、viewDidAppear:、viewDidUnload 和 dealloc 方法以注销相关的时间信息。

但是发现是否`presentModalViewController:animated:`或`presentViewController:animated:completion:`将导致呈现的视图控制器的两个实例，其中一个将很快被销毁，而屏幕上没有出现任何内容（尚未触发 loadView 和 next 方法）。

它是一个错误还是 iOS 的视图控制器转换就是这样工作的？

这是日志信息，WDIMMIndItemEditViewController 是呈现的视图控制器，WDIMMmainScreenViewController 是呈现的视图控制器：

> 2012-09-29 16:10:02.615 ideaCal[23450:707]<WDIMMindItemEditViewController:0x2b5260>：编辑视图控制器将初始化
> 
> 2012-09-29 16:10:02.639 ideaCal[23450:707]<WDIMMindItemEditViewController:0x2b5260>：编辑视图控制器已初始化
> 
> 2012-09-29 16:10:02.641 ideaCal[23450:707] < WDIMMindItemEditViewController: 0x2b94d0> ：编辑视图控制器将初始化
> 
> 2012-09-29 16:10:02.645 ideaCal[23450:707]<WDIMMindItemEditViewController:0x2b94d0>：编辑视图控制器已初始化
> 
> 2012-09-29 16:10:02.835 ideaCal[23450:707] < WDIMMmainScreenViewController: 0x27c790> 将呈现模态视图控制器：< WDIMMIndItemEditViewController: 0x2b5260>
> 
> 2012-09-29 16:10:02.841 ideaCal[23450:707]<WDIMMindItemEditViewController:0x2b5260>：编辑视图控制器加载视图
> 
> 2012-09-29 16:10:02.910 ideaCal[23450:707]<WDIMMindItemEditViewController:0x2b5260>：编辑视图控制器已加载视图
> 
> 2012-09-29 16:10:02.912 ideaCal[23450:707] < WDIMMIndItemEditViewController: 0x2b5260> ：编辑视图控制器的视图将出现
> 
> 2012-09-29 16:10:03.297 ideaCal[23450:707] < WDIMMmainScreenViewController: 0x27c790> 将呈现模态视图控制器：< WDIMMindItemEditViewController: 0x2b94d0>
> 
> 2012-09-29 16:10:03.302 ideaCal[23450:707]<WDIMMindItemEditViewController:0x2b94d0>：编辑视图控制器将解除分配
> 
> 2012-09-29 16:10:03.340 ideaCal[23450:707] <WDIMMindItemEditViewController: 0x2b94d0>：编辑视图控制器结束了释放
> 
> 2012-09-29 16:10:03.702 ideaCal[23450:707] < WDIMMindItemEditViewController: 0x2b5260> ：编辑视图控制器的视图出现
> 
> 2012-09-29 16:10:05.434 ideaCal[23450:707] <WDIMMmainScreenViewController: 0x27c790> 结束当前模态视图控制器：<WDIMMindItemEditViewController: 0x2b5260>

这是我的演示代码：

```
- (IBAction)slidingMenuGetPressed:(WZUICircularPagingControlViewSlidingMenu *)slidingMenu event:(UIEvent *)event
{
    WDIMEditViewController * editModalViewController = nil;
    if ([slidingMenu.identifier isEqualToString:NEW_MIND_ITEM]) {
        editModalViewController = [[WDIMMindItemEditViewController alloc] init];
    }
    if ([slidingMenu.identifier isEqualToString:NEW_PROJECT]) {
        editModalViewController = [[WDIMMindItemEditViewController alloc] init];
    }
    if ([slidingMenu.identifier isEqualToString:NEW_TAG]) {
        editModalViewController = [[WDIMTagEditViewController alloc] init];
    }

    dispatch_queue_t snapshotQueue = dispatch_queue_create("com.WeZZardDesign.ScreenSnapshotQueue", NULL);
    dispatch_async(snapshotQueue, ^{
        UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage * snapshot = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        dispatch_async(dispatch_get_main_queue(), ^{
            editModalViewController.backgroundImage = snapshot;
            NSManagedObjectContext * workingContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
            workingContext.parentContext = self.database.managedObjectContext;

            editModalViewController.preference = self.preference;
            editModalViewController.dataSource = self;
            editModalViewController.delegate = self;
            editModalViewController.workingContext = workingContext;

            NSLog(@"%@ will present modal view controller: %@", self, editModalViewController);
            [self presentViewController:editModalViewController animated:YES completion:^{
                NSLog(@"%@ ended present modal view controller: %@", self, editModalViewController);
            }];
        });
    });
    dispatch_release(snapshotQueue);
} 
```

`presentModalViewController:animated:`而且我的方法没有任何改变`presentViewController:animated:completion:`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:08:03.853

从上面的评论中可以清楚地看出，`NEW_MIND_ITEM`and`NEW_PROJECT`是两个具有相同内容的字符串。由于 `isEqualToString`比较的是内容，而不是指针，因此执行了两个“if”块，创建了两个`WDIMMindItemEditViewController`. 使用不同的字符串应该可以解决问题。

# php - php生成给定长度的所有可能的字母数字组合

> ID：12651254
> 
> 赞同：0
> 
> 时间：2012-09-29T08:39:55.273
> 
> 标签：php, arrays, string

当我最终达到每一种可能性时，如何让循环停止。我怎么知道它什么时候达到了那个水平？有任何想法吗？

*背景：*所以我有这个脚本，我试图想出一种存储问题的方法，我在目录中的文件周围旋转，并且在给定的目录中有很多文件。当脚本检查文件是否存在时，它会给机器带来过多的负载和渲染时间。所以我总体上试图想出一种存储方法来分解它，其中涉及目录内部的目录，目录内部的目录实际上具有当前 6 个字符大的字符串的所有可能的字母数字组合，但我必须首先处理一些数字，无论如何，我试图想出一种快速理智的方法来为这种情况下的 6 个字母或数字提供给定长度，并让它生成一个包含 az 和 0-9 的每个组合的数组，该长度问题是我可以'

我想出了一种方法来生成我选择的任意长度的随机字符串，但是将它们放入一个数组并不是那么难，但是想出一个停止点的方法让我有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T09:33:31.250

这是一个基于特定字符集计算字符串下一次迭代的函数：

```
function next_iteration($str, $charset) {
    // last character in charset that requires a carry-over
    $copos = strlen($charset)-1;
    // starting with the least significant digit
    $i = strlen($str)-1;
    do {
        // reset carry-over flag
        $co = false;
        // find position of digit in charset
        $pos = strpos($charset, $str[$i]);
        if ($pos === false) {
            // invalid input char at position $i
            return false;
        }
        // check whether it’s the last character in the charset
        if ($pos === $copos) {
            // we need a carry-over to the next higher digit
            $co = true;
            // check whether we’ve already reached the highest digit
            if ($i === 0) {
                // no next iteration possible due to fixed string length
                return false;
            }
            // set current digit to lowest charset digit
            $str[$i] = $charset[0];
        } else {
            // if no carry-over is required, simply use the next higher digit
            // from the charset
            $str[$i] = $charset[$pos+1];
        }
        // repeat for each digit until there is no carry-over
        $i--;
    } while ($co);
    return $str;
}

$str = 'aaa';
$charset = 'abc';
do {
    var_dump($str);
} while (($str = next_iteration($str, $charset)) !== false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T08:42:36.913

```
$Number= base_convert(mt_rand(1, 9) . intval(microtime(true) * 1000), 10, 36);
echo $Number; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T08:50:25.437

`break`您可以使用该语句在某个点退出任何循环。

对于您的可能性，我建议您使用迭代器实现它们并提供一个堆栈，以便您可以测试您是否已经使用了所有可能性：

```
$stackOfAllPossibilities = $possibilities->getStack();

foreach ($possibilities as $posibility)
{
    ...
    $stackOfAllPossibilities->remove($posibility);
    if ($stackOfAllPossibilities->isEmpty()) {
       break;
    }
} 
```

# visual-studio - VisualStudio 如何像在 NetBeans 中一样更改“自动引号和括号”的行为

> ID：12651257
> 
> 赞同：1
> 
> 时间：2012-09-29T08:40:49.280
> 
> 标签：visual-studio, code-generation, options, behavior

我在 NetBeans 中编程了一段时间，我喜欢他帮助生成引号和括号的智能方式。我要告诉你我想要什么：

**在 NetBeans 中是这样的：**

我在写：`<tag attribute="`当我按下第一个引号时，他正在生成第二个：`<tag attribute=""`我可以立即在它们之间写一些东西（光标在它们之间），如下所示：`<tag attribute="something"`

到目前为止，它与 Visual Studio 中的行为相同，但现在有所不同：

当光标就在第二个引号之前，像这样：“something|”，当我再次按下引号时：

**在 NetBeans 中：**

"东西"|

**在 VisualStudio 中：**

“某事”|”

我更喜欢 NetBeans 的行为，因为它编写代码更快，而 VisualStudio 让我放慢了速度，因为我必须按键盘上的右箭头或“结束”键，这不像只写另一个“然后继续”那么舒服。我不相信在 Visual Studio 中没有这样的选项来打开这样的东西，但我在任何地方都没有找到它。我什至在谷歌上都没有找到它（即使提出这样的问题来搜索答案也很困难）

有经验的 Visual Studio 用户，请帮助我。

# ruby-on-rails - 在 Heroku 上安装二进制依赖项

> ID：12651261
> 
> 赞同：1
> 
> 时间：2012-09-29T08:41:07.693
> 
> 标签：ruby-on-rails, heroku, imagemagick, ghostscript

我需要在heroku上将PDF转换为PNG，我正在使用RMagick，对于一些PDF我遇到了这个错误：

> Ghostscript 8.628.62：：不可恢复的错误，退出代码1不可恢复

相同的代码在我的本地机器上使用 Ghostscript 9.05 运行良好

我想更新 Heroku 上使用的 Ghostscript 版本，看看是否能解决问题。我按照这些说明在 heroku 上构建了 ghostscript 9.05：

[http://theprogrammingbutler.com/blog/archives/2011/07/28/running-pdftotext-on-heroku/](http://theprogrammingbutler.com/blog/archives/2011/07/28/running-pdftotext-on-heroku/)

我的问题是出售结果包，**我如何告诉 heroku 使用我的自定义版本的 ghostscript 而不是系统版本？**

这是我尝试过的：

*   在 vendor/ghostscript/bin 下添加 gs 包
*   将其添加到 heroku 路径：heroku config:add PATH=vendor/ghostscript/bin:/usr/bin:/bin

我的应用程序仍在 GS 8.62 上运行

任何帮助将不胜感激 ！

以下是我尝试遵循但没有成功的一些资源...

[https://devcenter.heroku.com/articles/buildpack-binaries](https://devcenter.heroku.com/articles/buildpack-binaries)

[http://www.ryandaigle.com/a/using-vulcan-to-build-binary-dependencies-on-heroku](http://www.ryandaigle.com/a/using-vulcan-to-build-binary-dependencies-on-heroku)

# c# - 从 web.config 获取连接字符串

> ID：12651264
> 
> 赞同：0
> 
> 时间：2012-09-29T08:41:44.473
> 
> 标签：c#, asp.net, web-config

我`System.Configuration.ConfigurationManager.AppSettings["key1"]`在**settings.designer.cs**文件中使用。它在开发中运行良好，但在我将所有**.dll**文件移至生产环境后，它无法正常工作。

在`web.config`文件中，我在开发和生产中都添加了应用程序设置。问题是什么？

来自 settings.designer.cs 文件的代码

```
get
{
  return WebConfigurationManager.AppSettings["ConnectionString"];
  //return (AppSettings["ConnectionString"]);
  //return ((string)(this["ConnectionString"])); 
} 
```

我尝试了所有三个返回语句。第三次返回在 dev 和 prod 中都可以正常工作，但它不是从 web.config 呈现的。

web.config 中的代码

```
<add key="ConnectionString" value="connection string values are given here"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:10:31.430

**不要**使用`WebConfigurationManager`.

* * *

改为`System.Configuration.ConfigurationManager.AppSettings["key"]`读取保存在 Web.config 中的键值对，例如：

```
<configuration>
    <appSetttings>
        <add key="key1" value="value1" />
    </appSetttings>
</configuration> 
```

并`System.Configuration.ConfigurationManager.ConnectionStrings["name"].ConnectionString`读取连接字符串，例如：

```
<configuration>
    <connectionStrings>
        <add name="name" connectionString="value1" />
    </connectionStrings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-29T09:12:54.707

您必须将配置设置 ( `connectionstring`) 添加到最后执行的程序配置文件中。

# javascript - 设置“overflow-y 元素”的滚动位置

> ID：12651272
> 
> 赞同：2
> 
> 时间：2012-09-29T08:42:43.477
> 
> 标签：javascript, html, css

我有这个代码

```
 <div style="width: 400px; height:200px; background-color: #090; overflow-y: scroll">
        <p>first</p>
        <p>aaaaaaaaaa</p>
        <p>aaaaaaaaaa</p>
        <p>aaaaaaaaaa</p>
        <p>aaaaaaaaaa</p>
        <p>aaaaaaaaaa</p>
        <p>aaaaaaaaaa</p>
        <p>aaaaaaaaaa</p>
        <p>aaaaaaaaaa</p>
        <p>last</p>
    </div> 
```

我需要 onclick 一些元素，自动滚动底部（最大底部），即 onclick 一些元素，需要这个结果： [请看截图](http://i.stack.imgur.com/sPwn4.jpg)

请告诉如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:55:34.427

使用`<p id="last">last</p>`和`<a href="#last">Go to #last</a>`：

```
<div style="width: 400px; height:200px; background-color: #090; overflow-y: scroll">
    <p>first - <a href="#last">Go to #last</a></p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p>aaaaaaaaaa</p>
    <p id="last">last</p>
</div> 
```

[​http://jsfiddle.net/bzuPy/](http://jsfiddle.net/bzuPy/)

# javascript - 为什么正则表达式不匹配？

> ID：12651277
> 
> 赞同：1
> 
> 时间：2012-09-29T08:43:36.940
> 
> 标签：javascript, jquery

谁能告诉我为什么这个正则表达式不匹配？

```
var matches = ' @test'.match(new RegExp('(\s+|^)(@|!)(.*?)(\s+|$)', 'g')); 
```

而这个匹配：

```
var matches = '@test'.match(new RegExp('(\s+|^)(@|!)(.*?)(\s+|$)', 'g')); 
```

我已经指定了`\s+`。那为什么不匹配呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T08:47:24.973

`\s`不被识别为空格速记，因为您是从字符串而不是正则表达式文字构造正则表达式，并且在字符串内您需要将反斜杠加倍。

所以你需要使用

```
var matches = ' @test'.match(new RegExp('(\\s+|^)([@!])(.*?)(\\s+|$)', 'g')); 
```

或者

```
var matches = ' @test'.match(/(\s+|^)([@!])(.*?)(\s+|$)/g); 
```

# android - 如何在 AChartEngine 中绘制两个具有不同缩放比例的 Y 轴

> ID：12651284
> 
> 赞同：3
> 
> 时间：2012-09-29T08:45:05.673
> 
> 标签：android, charts, achartengine, linechart

我在 AChartEngine 中以不同的缩放比例绘制两个 Y 轴（一个在右侧，一个在左侧）时遇到问题：我希望左侧从 0 缩放到 40，这是正确的，但右侧缩放不是想要的，因为它应该是从 10 到 100。请帮助我。

我的源代码看起来像这样

公共线性布局执行（上下文上下文）{

```
String[] titles = new String[] { "Ciggars" };

List<double[]> x = new ArrayList<double[]>();

for (int i = 0; i < titles.length; i++) {
  x.add(new double[] { 1, 2, 3, 4, 5, 6, 7});
}

List<double[]> values = new ArrayList<double[]>();
values.add(new double[] { 12.3, 12.5, 13.8, 16.8, 20.4, 24.4, 26.4, 26.1, 13.9 });

// Set color of lines
int[] colors = new int[] { Color.BLUE, Color.YELLOW };
PointStyle[] styles = new PointStyle[] { PointStyle.CIRCLE, PointStyle.DIAMOND};

XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer(2);
setRenderer(renderer, colors, styles);
int length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) {
  ((XYSeriesRenderer) renderer.getSeriesRendererAt(i)).setFillPoints(true);
}

setChartSettings(renderer, "Average Cigarates", "Days", "Cigarates", 0, 7, 0, 40, Color.LTGRAY, Color.LTGRAY);
// fragments on X and Y-axis to be divided
renderer.setXLabels(7);
renderer.setYLabels(10);
renderer.setShowGrid(true);
renderer.setXLabelsAlign(Align.RIGHT);
renderer.setYLabelsAlign(Align.RIGHT);
renderer.setZoomButtonsVisible(true);
renderer.setZoomRate(1.05f);
renderer.setLabelsColor(Color.WHITE);
renderer.setXLabelsColor(Color.GREEN);

renderer.setYLabelsColor(0, colors[0]);
renderer.setYLabelsColor(1, colors[1]);

renderer.setYTitle("% Tar/Nicotine", 1);
//renderer.setYTitle(title, scale)
renderer.setYAxisAlign(Align.RIGHT, 1);
renderer.setYLabelsAlign(Align.LEFT, 1);

XYMultipleSeriesDataset dataset = buildDataset(titles, x, values);
values.clear();

values.add(new double[] { 4.3, 4.9, 5.9, 8.8, 10.8, 11.9, 13.6, 12.8});
addXYSeries(dataset, new String[] { "Tar/Nicotine" }, x, values, 1);

// set background color
renderer.setApplyBackgroundColor(true);     
renderer.setBackgroundColor(Color.GRAY);
renderer.setMarginsColor(Color.GRAY);

GraphicalView gview = ChartFactory.getCubeLineChartView(context, dataset, renderer, 0.3f);

LinearLayout lnr = null;
lnr = new LinearLayout(context);
lnr.addView(gview);

return lnr; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T13:53:04.520

您正在为右侧具有 Y 轴的系列添加这些值：

```
values.add(new double[] { 4.3, 4.9, 5.9, 8.8, 10.8, 11.9, 13.6, 12.8 }); 
```

由于 AChartEngine 默认计算可见范围，因此 Y 轴的范围在 4.3 和 13.6 之间。

因此，您必须将值设置在 10 到 100 之间，或者您必须以这种方式手动修改可见范围：

```
renderer.setYAxisMin(10, 1);
renderer.setYAxisMax(100, 1); 
```

# mysql - 数据库重新设计或复杂的 4 路连接查询

> ID：12651285
> 
> 赞同：2
> 
> 时间：2012-09-29T08:45:08.890
> 
> 标签：mysql, sql

我有一个应用程序，用户可以在其中将他们购买的东西添加到他们的帐户中。他们创建一个列表名称，例如我的 ebay 购买，然后添加他们过去购买的东西。

当他们创建列表时，他们可以选择是否公开，这就是我苦苦挣扎的地方。

我需要显示产品列表以及谁将它们列在哪个列表中，但是，如果它们被列在私有列表中，则将用户名显示为私有，将列表名称显示为私有

4张桌子：

产品

```
prod_id    store_name   product    user_id
-------    ---------    -------    -------
1          ebay         chair       1002
2          amazon       desk        1000
3          ebay         lamp        1001 
```

用户

```
user_id    name
-------    -------
1000       john
1001       mark
1002       sue 
```

user_onto_list

```
user_onto_list_id    user_id      list_id
-------              ---------    -------
1                    1000         11
2                    1001         12
3                    1002         10 
```

list_detail

```
list_id    visibility    list_name
-------    -------       ---------
10         open          myEbayList
11         open          myAmazonList
12         private       myPrivateList 
```

所以结果是：

```
product    listed_by    list_name
-------    ---------    ---------
chair      sue          myEbayList
desk       john         myAmazonList
lamp       PRIVATE      PRIVATE 
```

这是否可以在一个查询中实现，或者您是否会重新设计数据的存储方式以使其更简单？我宁愿保持这种状态，因此如果例如 sue 决定在任何时候将她的 myEbatList 设为私有，则产品不会显示为由她列出，并且 mark 可能会决定公开他的列表。

建议赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:51:51.630

```
select
p.product
, case when ld.visibility = 'private' then
   'PRIVATE'
  else
   u.name
  end as listed_by
, case when ld.visibility = 'private' then
   'PRIVATE'
  else
   ld.list_name
  end as listed_name
from products p

inner join users u on u.ser_id = p.user_id
inner join user_onto_list uol on uol.user_id = u.user_id
inner join list_detail ld on ld.list_id = uol.list_id 
```

编辑：我在 CASE 语句中包含有关隐私的逻辑作为 SELECT 的一部分，因为这不会干扰 JOIN 标准，它只是显示信息。或者，您可以将该逻辑构建到派生表中的某种 UNION 结构中，然后加入该结构，但这可能会降低效率。

# chef-infra - 具有嵌入式角色的厨师食谱

> ID：12651287
> 
> 赞同：1
> 
> 时间：2012-09-29T08:45:35.627
> 
> 标签：chef-infra, vagrant, role, cookbook

我创建了一本厨师食谱，它对其他食谱有很多依赖。我现在的主要问题是其他食谱中的食谱是按随机顺序执行的。如果我在 vagrant 文件中指定这些配方的执行，例如：

```
chef.add_recipe "gitlab::core_prereq"
chef.add_recipe "postfix"
chef.add_recipe "gitlab::users_prereq"
chef.add_recipe "rvm::vagrant"
chef.add_recipe "rvm::system"
chef.add_recipe "ohai"
chef.add_recipe "nginx"
chef.add_recipe "gitlab::python_tools_prereq"
chef.add_recipe "gitlab::gitolite_prereq"
chef.add_recipe "gitlab::gitlab_install" 
```

一切正常，但我希望在配方中包含此规范，以便用户只需要包含默认配方并以正确的顺序安装所需的一切。

我该如何解决这个问题？我应该使用角色吗？如果可以在食谱中指定角色，我不会从厨师文档中得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:58:08.243

我想不是所有的食谱都可以安装在干净的机器上。但他们应该是。如果某个配方“A”有一些先决条件，那么您应该使用`include_recipe`.

在你的情况下，我猜**gitlab::gitlab_install**需要**gitlab::gitolite_prereq**和**gitlab::python_tools_prereq**。这意味着您应该添加到您的`cookbooks/gitlab/recipes/gitlab_install.rb`：

```
incude_recipe 'gitlab::gitolite_prereq'
incude_recipe 'gitlab::python_tools_prereq' 
```

您还可以通过这种方式包含其他食谱中的食谱。例如**ohai**需要**rvm::system**。添加到`cookbooks/ohai/recipes/default.rb`：

```
incude_recipe 'rvm::system' 
```

并添加到`cookbooks/ohai/metadata.rb`：

```
depends 'rvm' 
```

这样，您就不必以某种确切的顺序编写所有配方，也不必编写所有依赖项，它们将自动安装。

# jquery - Jquery同位素不工作

> ID：12651303
> 
> 赞同：-3
> 
> 时间：2012-09-29T08:48:47.607
> 
> 标签：jquery, jquery-isotope

这是我面临的问题 - 它有时只发生：![问题](../Images/23786ed0ddcbfbde9ff012c42e3b0ef2.png) 这是我的输出图像：

我需要与 Pintrest 样式相同的输出。

代码：

```
$(document).ready(function(){
        var $container = $('#content');
$container.isotope({
    filter: '*',
    //layoutMode : '',
        animationOptions: {
     duration: 750,
     easing: 'linear',
     queue: false,

   }

});

$('#nav a').click(function(){
  var selector = $(this).attr('data-filter');
    $container.isotope({ 
    filter: selector,
    animationOptions: {
     duration: 750,
     easing: 'linear',
     queue: false,

   }
  });
  return false;
});

}); 
```

已解决：问题已解决:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:17:57.727

我已经在您的网站上进行了测试，这是您的答案：

```
$('#content').isotope({
  itemSelector:'.isotope-item',
  layoutMode: 'fitRows'
}); 
```

将 layoutMode 更改为此处可用的其他值：http: [//isotope.metafizzy.co/docs/layout-modes.html](http://isotope.metafizzy.co/docs/layout-modes.html)

此外，您的标头 JS 应如下所示：

```
<script type="text/javascript">
$( document ).ready( function() { // Here you listen for the document ready event, when html, css, js are ready
  $( '#part1' ).load("home/" , function(){ $('#loading').remove();});
});
//hide frame on resizing the window
$(window).bind('resize load', function(){ // here you listen for resize and load of images, iframes and others
  if ($(window).width() < 1349) {
    $('#frame').hide();
    $('#right').css('width' , '85%');
  }
  else {
    $('#frame').show();
    $('#right').css('width' , '72%');
  }
});
</script> 
```

# java - Java 数据库 (oracle) odbc 驱动程序不匹配

> ID：12651304
> 
> 赞同：0
> 
> 时间：2012-09-29T08:48:48.573
> 
> 标签：java, database, oracle, odbc, drivers

我正在尝试创建一个以 java 作为前端，oracle 作为后端的数据库应用程序。

我有一个安装了 32 位 oracle 10g (10.2) 的 64 位 win7 系统。

我从/通过创建了一个 DSN，`C:\Windows\SysWOW64\odbcad32.exe`因为“控制面板/管理工具/odbc 数据源”没有显示“Microsoft Oracle ODBC”的选项

但是在连接到数据库时出现此错误：

```
java.sql.SQLException: [Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)
    at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)
    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(JdbcOdbc.java:3072)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:323)
    at sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at InsertRecord.main(InsertRecord.java:28)
    at __SHELL7.run(__SHELL7.java:6)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at bluej.runtime.ExecServer$3.run(ExecServer.java:724) 
```

我认为这是因为 64 位 32 位冲突。如果是这样，那么如果我为 64 位安装 odbc 驱动程序，它是否可以工作，或者我需要重新为 win64 安装 oracle 数据库。

如果驱动程序会这样做，那么我可以从哪里单独下载驱动程序？

任何人任何帮助？尝试使用 odbc 连接到 oracle 时出现此错误

```
Driver loaded
java.sql.SQLException: [Microsoft][ODBC driver for Oracle][Oracle]ORA-06413: Connection not open.
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at InsertRecord.main(InsertRecord.java:28)
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:01:11.147

首先，您不应该使用 JDBC/ODBC 桥。

下载 Oracle 的（纯 Java）JDBC 驱动程序 (http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)，您不必再担心任何 32 位与 64 位不匹配的问题.

作为一个额外的好处，数据库访问将更快、更可靠。

无需“安装”，只需使用应用程序中的 .jar 文件即可。不要乱用 tnsnames.ora，也不要在计算机上安装 Oracle 客户端。

# vb.net - vb.net中文本框的textchanged事件

> ID：12651316
> 
> 赞同：0
> 
> 时间：2012-09-29T08:50:29.593
> 
> 标签：vb.net

我想在用户在 vb.net 的文本框中输入文本/数据后触发文本框的 textchanged 事件。但是一旦用户在文本框中输入第一个单词，该事件就会被触发。

有什么办法可以解决这个问题吗？我尝试谷歌搜索但没有得到满意的解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:57:28.593

**当 TextBox 发生任何变化时触发**TextChanged事件。**如果您想在用户完成后调用某些内容，请尝试使用TextBox 的**LostFocus**事件，该事件将在用户离开文本框的焦点时触发。**

# android - 点击按钮打开 Facebook 登录对话框

> ID：12651327
> 
> 赞同：0
> 
> 时间：2012-09-29T08:52:16.060
> 
> 标签：android, facebook, user-interface

大家好，我正在将 facebook 登录集成到我的应用程序中。我搜索了很多，我能够登录我使用了这个链接： [https](https://developers.facebook.com/docs/mobile/android/build/#register)
://developers.facebook.com/docs/mobile/android/build/#register 我想要做的就是当我点击一个按钮时然后 facebook 对话框必须出现而不是仅打开以下活动（HomeActivity）是我的代码。

```
 public class HomeActivity extends Activity {

     Facebook facebook = new Facebook("114987225319269");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        Button more = (Button) findViewById(R.id.button1);
        more.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                facebook.authorize(this, new DialogListener() {
                    @Override
                    public void onComplete(Bundle values) {}

                    @Override
                    public void onFacebookError(FacebookError error) {}

                    @Override
                    public void onError(DialogError e) {}

                    @Override
                    public void onCancel() {}
                });
            }
public void onActivityResult(int requestCode, int resultCode, Intent data) {
                super.onActivityResult(requestCode, resultCode, data);

                facebook.authorizeCallback(requestCode, resultCode, data);
            }

        }); 

    }   

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:56:47.100

在您的清单中

```
<activity
android:theme="@android:style/Theme.Translucent"
android:name=".HomeActivity "
> 
```

这会将您的活动主题更改为`Dialog`主题。希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:15:59.503

使用此代码

```
Button more = (Button) findViewById(R.id.button1);
more.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
         if (! facebook.isSessionValid()) {         
             facebook.authorize(HomeActivity.this, PERMISSIONS, new LoginDialogListener()); 
        });
    } 
```

这是登录对话框监听器

```
private class LoginDialogListener implements DialogListener {

    public void onComplete(Bundle values) {
        saveCredentials(facebook);
        getAlbumsData task = new getAlbumsData();           
        task.execute();
    }

    public void onFacebookError(FacebookError error) {
        showToast("Authentication with Facebook failed!");
    }

    public void onError(DialogError error) {
        showToast("Authentication with Facebook failed!");
    }

    public void onCancel() {
        showToast("Authentication with Facebook cancelled!");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:26:29.850

这就是您所需要的：

```
public class BaseActivity extends Activity
{

    public AsyncFacebookRunner mAsyncRunner;
    public Facebook facebook;
    public SharedPreferences mPrefs;
    public static String appId = "123344";
    SharedPreferences.Editor editor;

    private void initialize()
    {

        facebook = new Facebook(appId);
        mAsyncRunner = new AsyncFacebookRunner(facebook);

    }

    public void verifyLogin()
    {

        mPrefs = getPreferences(MODE_PRIVATE);
        String accessToken = mPrefs.getString("access_token", null);
        facebook.setAccessToken(accessToken);
        long expires = mPrefs.getLong("access_expires", 0);

        if (accessToken != null)
        {
            facebook.setAccessToken(accessToken);
        }

        if (expires != 0)
        {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid())
        {
            facebook.authorize(this, new String[] {
                "email", "publish_stream", "create_event"
            }, new DialogListener()
            {

                @Override
                public void onCancel()
                {
                    // Function to handle cancel event
                }

                @Override
                public void onComplete(Bundle values)
                {
                    // Function to handle complete event
                    // Edit Preferences and update facebook acess_token
                    editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();
                }

                @Override
                public void onError(DialogError error)
                {
                    // Function to handle error

                }

                @Override
                public void onFacebookError(FacebookError fberror)
                {
                    // Function to handle Facebook errors

                }

            });
        }

    }

} 
```

# eclipse - Komodo IDE 7.0 '链接自动关闭括号'

> ID：12651328
> 
> 赞同：1
> 
> 时间：2012-09-29T08:53:19.353
> 
> 标签：eclipse, ide, editor, pydev, komodo

Komodo IDE 是否有类似于 Eclipse 中的 PyDev 的选项，用于从自动完成的括号和引号中跳出？我将 Komodo 设置为插入右引号和括号，但发现使用箭头键移出它们很烦人。是否有类似于下面 PyDev 中的选项？

首选项 -> Pydev -> 编辑器 -> 打字 -> '启用自动关闭括号的链接'

如果没有，我可能会关闭该功能并尝试手动执行，但我发现它在 PyDev 中很方便。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:56:26.743

使用以下选项之一：

*   重新映射`Ctrl + ]`到Komodo 首选项`tab,tab`的[键绑定](http://docs.activestate.com/komodo/7.1/prefs.html#Config_Key_Bindings)部分。
*   按`End`键移动到行尾
*   按住`Ctrl`右括号的同时按住键跳到块的末尾
*   按住[`Ctrl`键](http://docs.activestate.com/komodo/7.1/defkeybind.html)（[`Alt`在 OSX 上](http://docs.activestate.com/komodo/7.1/osxkeybind.html)）同时按右箭头跳转到当前语句的末尾

# api - 使用 opt_fields 请求时，Asana API 未返回受让人信息

> ID：12651329
> 
> 赞同：1
> 
> 时间：2012-09-29T08:53:24.963
> 
> 标签：api, asana

我希望检索特定项目中的任务（和其他信息）。未检索受让人信息。

我进行了以下 api 调用：

> [https://app.asana.com/api/1.0/tasks?project=projectidhidden&opt_fields=name,created_at,assignee,assignee.name,assignee.id](https://app.asana.com/api/1.0/tasks?project=projectidhidden&opt_fields=name,created_at,assignee,assignee.name,assignee.id)

在 urlencoding 之后看起来像这样：

> [https://app.asana.com/api/1.0/tasks?project=projectidhidden&opt_fields=name%2Ccreated_at%2Cassignee%2Cassignee.name%2Cassignee.id](https://app.asana.com/api/1.0/tasks?project=projectidhidden&opt_fields=name%2Ccreated_at%2Cassignee%2Cassignee.name%2Cassignee.id)

api返回了任务名称和created_at信息，但是没有返回assignee信息。

以下链接特别提到受让人信息已成功返回： [Get asana tasks in project with assignee information](https://stackoverflow.com/questions/11095933/get-asana-tasks-in-project-with-assignee-information?answertab=active#tab-top)

如何在不进行额外 API 调用的情况下检索每个任务的受让人信息？

谢谢。

更新：我在输入上述网址时错过了提及项目 ID。进行了更正；我也传递了项目ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T22:21:14.773

（我在 Asana 工作）

您确定这是您提出的确切要求吗？它没有“项目”或“受让人”参数来过滤任务，因此这应该返回错误。

此外，请确保返回的任务实际上具有受让人。没有受让人的任务将返回`assignee: null`，并且您的请求`assignee.name`对该任务没有影响，因为它没有受让人。

# iphone - 将 UIViewController 代码转换为 UIView

> ID：12651332
> 
> 赞同：3
> 
> 时间：2012-09-29T08:53:58.647
> 
> 标签：iphone, objective-c, xcode, uiview, uiviewcontroller

我有一个基于动画的应用程序。经过数小时的尝试和搜索最有效的动画处理器（具有低延迟和最佳内存管理），我发现了令人惊叹的 PNGAnimator (http://www.modejong.com/iPhone/)。有趣的是，我实际上使用的是 JPEG（由于大小），但这不是问题。

问题是该类本身是 UIViewController 的子类，当我将它添加到我的 rootViewController 时，新的视图控制器会与它重叠 - 所以所有界面元素（按钮......）都隐藏在它下面。

这就是为什么我想以某种方式将代码转换为 UIView 的子类。（所以我可以在上面添加按钮）我尝试自己转换代码，但是应用程序会在动画调用时崩溃。你能告诉我我应该在代码中更改什么以便它将充当 UIView 吗？

例如，我尝试在 .h 文件中将其更改为 UIView，然后在 .m 文件中，将引用 self.view 更改为只是 self。然后在我的根视图控制器中将其添加为子视图，但这也不会显示并崩溃。

这是.h文件：

```
//
//  ImageAnimatorViewController.h
//  PNGAnimatorDemo
//
//  Created by Moses DeJong on 2/5/09.
//

#import <UIKit/UIKit.h>

#define ImageAnimator15FPS (1.0/15)
#define ImageAnimator12FPS (1.0/12)
#define ImageAnimator25FPS (1.0/24)
#define ImageAnimator18FPS (1.0/18)

#define ImageAnimatorDidStartNotification @"ImageAnimatorDidStartNotification"
#define ImageAnimatorDidStopNotification @"ImageAnimatorDidStopNotification"

@class AVAudioPlayer;

@interface ImageAnimatorViewController : UIViewController {

@public

    NSArray *animationURLs;

    NSTimeInterval animationFrameDuration;

    NSInteger animationNumFrames;

    NSInteger animationRepeatCount;

    UIImageOrientation animationOrientation;

    NSURL *animationAudioURL;

    AVAudioPlayer *avAudioPlayer;

@private

    UIImageView *imageView;

    NSArray *animationData;

    NSTimer *animationTimer;

    NSInteger animationStep;

    NSTimeInterval animationDuration;

    NSTimeInterval lastReportedTime;
}

// public properties

@property (nonatomic, copy) NSArray *animationURLs;
@property (nonatomic, assign) NSTimeInterval animationFrameDuration;
@property (nonatomic, readonly) NSInteger animationNumFrames;
@property (nonatomic, assign) NSInteger animationRepeatCount;
@property (nonatomic, assign) UIImageOrientation animationOrientation;
@property (nonatomic, retain) NSURL *animationAudioURL;
@property (nonatomic, retain) AVAudioPlayer *avAudioPlayer;
@property (nonatomic, assign) CGRect viewCGRect;

// private properties

@property (nonatomic, retain) UIImageView *imageView;
@property (nonatomic, copy) NSArray *animationData;
@property (nonatomic, retain) NSTimer *animationTimer;
@property (nonatomic, assign) NSInteger animationStep;
@property (nonatomic, assign) NSTimeInterval animationDuration;

+ (ImageAnimatorViewController*) imageAnimatorViewController;

- (void) startAnimating;
- (void) stopAnimating;
- (BOOL) isAnimating;

- (void) animationShowFrame: (NSInteger) frame;

+ (NSArray*) arrayWithNumberedNames:(NSString*)filenamePrefix
                         rangeStart:(NSInteger)rangeStart
                           rangeEnd:(NSInteger)rangeEnd
                       suffixFormat:(NSString*)suffixFormat;

+ (NSArray*) arrayWithResourcePrefixedURLs:(NSArray*)inNumberedNames;

@end 
```

这里是 .m 文件：

```
//
//  ImageAnimatorViewController.m
//  PNGAnimatorDemo
//
//  Created by Moses DeJong on 2/5/09.
//

#import "ImageAnimatorViewController.h"

#import <QuartzCore/QuartzCore.h>

#import <AVFoundation/AVAudioPlayer.h>

@implementation ImageAnimatorViewController

@synthesize animationURLs, animationFrameDuration, animationNumFrames, animationRepeatCount,
imageView, animationData, animationTimer, animationStep, animationDuration, animationOrientation, viewCGRect;
@synthesize animationAudioURL, avAudioPlayer;

- (void)dealloc {
    // This object can't be deallocated while animating, this could
    // only happen if user code incorrectly dropped the last ref.

    NSAssert([self isAnimating] == FALSE, @"dealloc while still animating");

  self.animationURLs = nil;
  self.imageView = nil;
  self.animationData = nil;
  self.animationTimer = nil;

  [super dealloc];
}

+ (ImageAnimatorViewController*) imageAnimatorViewController
{
  return [[[ImageAnimatorViewController alloc] init] autorelease];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  // Return YES for supported orientations
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

// Implement loadView to create a view hierarchy programmatically, without using a nib.

- (void)loadView {
    UIView *myView = [[UIView alloc] initWithFrame:viewCGRect];
    [myView autorelease];
    self.view = myView;
    /*UIView *myView = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    [myView autorelease];
    self.view = myView;

    // FIXME: Additional Supported Orientations

    if (animationOrientation == UIImageOrientationUp) {
        // No-op
    } else if (animationOrientation == UIImageOrientationLeft) {
        // 90 deg CCW
        //[self rotateToLandscape];
    } else if (animationOrientation == UIImageOrientationRight) {
        // 90 deg CW
        //[self rotateToLandscapeRight];
    } else {
        NSAssert(FALSE,@"Unsupported animationOrientation");
    }
*/
    // Foreground animation images

    UIImageView *myImageView = [[UIImageView alloc] initWithFrame:self.view.frame];
    [myImageView autorelease];
    self.imageView = myImageView;

    // Animation data should have already been loaded into memory as a result of
    // setting the animationURLs property

    NSAssert(animationURLs, @"animationURLs was not defined");
    NSAssert([animationURLs count] > 1, @"animationURLs must include at least 2 urls");
    NSAssert(animationFrameDuration, @"animationFrameDuration was not defined");

    // Load animationData by reading from animationURLs

    NSMutableDictionary *dataDict = [NSMutableDictionary dictionaryWithCapacity:[animationURLs count]];

    NSMutableArray *muArray = [NSMutableArray arrayWithCapacity:[animationURLs count]];
    for ( NSURL* aURL in animationURLs ) {
        NSString *urlKey = aURL.path;
        NSData *dataForKey = [dataDict objectForKey:urlKey];

        if (dataForKey == nil) {
            dataForKey = [NSData dataWithContentsOfURL:aURL];
            NSAssert(dataForKey, @"dataForKey");

            [dataDict setObject:dataForKey forKey:urlKey];
        }

        [muArray addObject:dataForKey];
    }
    self.animationData = [NSArray arrayWithArray:muArray];

    int numFrames = [animationURLs count];
    float duration = animationFrameDuration * numFrames;

    self->animationNumFrames = numFrames;
    self.animationDuration = duration;

    [self.view addSubview:imageView];

    // Display first frame of image animation

    self.animationStep = 0;

    [self animationShowFrame: animationStep];

    self.animationStep = animationStep + 1;

    if (animationAudioURL != nil) {
        AVAudioPlayer *avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:animationAudioURL
                                                                         error:nil];
    [avPlayer autorelease];
        NSAssert(avPlayer, @"AVAudioPlayer could not be allocated");
        self.avAudioPlayer = avPlayer;

        [avAudioPlayer prepareToPlay];      
    }
}

// Create an array of file/resource names with the given filename prefix,
// the file names will have an integer appended in the range indicated
// by the rangeStart and rangeEnd arguments. The suffixFormat argument
// is a format string like "%02i.png", it must format an integer value
// into a string that is appended to the file/resource string.
//
// For example: [createNumberedNames:@"Image" rangeStart:1 rangeEnd:3 rangeFormat:@"%02i.png"]
//
// returns: {"Image01.png", "Image02.png", "Image03.png"}

+ (NSArray*) arrayWithNumberedNames:(NSString*)filenamePrefix
                              rangeStart:(NSInteger)rangeStart
                                rangeEnd:(NSInteger)rangeEnd
                             suffixFormat:(NSString*)suffixFormat
{
    NSMutableArray *numberedNames = [[NSMutableArray alloc] initWithCapacity:40];

    for (int i = rangeStart; i <= rangeEnd; i++) {
        NSString *suffix = [NSString stringWithFormat:suffixFormat, i];
        NSString *filename = [NSString stringWithFormat:@"%@%@", filenamePrefix, suffix];

        [numberedNames addObject:filename];
    }

    NSArray *newArray = [NSArray arrayWithArray:numberedNames];
    [numberedNames release];
    return newArray;
}

// Given an array of resource names (as returned by arrayWithNumberedNames)
// create a new array that contains these resource names prefixed as
// resource paths and wrapped in a NSURL object.

+ (NSArray*) arrayWithResourcePrefixedURLs:(NSArray*)inNumberedNames
{
    NSMutableArray *URLs = [[NSMutableArray alloc] initWithCapacity:[inNumberedNames count]];
    NSBundle* appBundle = [NSBundle mainBundle];

    for ( NSString* path in inNumberedNames ) {
        NSString* resPath = [appBundle pathForResource:path ofType:nil];    
        NSURL* aURL = [NSURL fileURLWithPath:resPath];

        [URLs addObject:aURL];
    }

    NSArray *newArray = [NSArray arrayWithArray:URLs];
    [URLs release];
    return newArray;
}

// Invoke this method to start the animation

- (void) startAnimating
{
    self.animationTimer = [NSTimer timerWithTimeInterval: animationFrameDuration
                                             target: self
                                           selector: @selector(animationTimerCallback:)
                                           userInfo: NULL
                                            repeats: TRUE];

    [[NSRunLoop currentRunLoop] addTimer: animationTimer forMode: NSDefaultRunLoopMode];

    animationStep = 0;

    if (avAudioPlayer != nil)
        [avAudioPlayer play];

    // Send notification to object(s) that regestered interest in a start action

    [[NSNotificationCenter defaultCenter]
     postNotificationName:ImageAnimatorDidStartNotification
     object:self];  
}

// Invoke this method to stop the animation, note that this method must not
// invoke other methods and it must cancel any pending callbacks since
// it could be invoked in a low-memory situation or when the object
// is being deallocated. Invoking this method will not generate a
// animation stopped notification, that callback is only invoked when
// the animation reaches the end normally.

- (void) stopAnimating
{
    if (![self isAnimating])
        return;

    [animationTimer invalidate];
    self.animationTimer = nil;

    animationStep = animationNumFrames - 1;
    [self animationShowFrame: animationStep];

    if (avAudioPlayer != nil) {
        [avAudioPlayer stop];
        avAudioPlayer.currentTime = 0.0;
        self->lastReportedTime = 0.0;
    }

    // Send notification to object(s) that regestered interest in a stop action

    [[NSNotificationCenter defaultCenter]
     postNotificationName:ImageAnimatorDidStopNotification
     object:self];  
}

- (BOOL) isAnimating
{
    return (animationTimer != nil);
}

// Invoked at framerate interval to implement the animation

- (void) animationTimerCallback: (NSTimer *)timer {
    if (![self isAnimating])
        return;

    NSTimeInterval currentTime;
    NSUInteger frameNow;

    if (avAudioPlayer == nil) {
        self.animationStep += 1;

//      currentTime = animationStep * animationFrameDuration;
        frameNow = animationStep;
    } else {
        currentTime = avAudioPlayer.currentTime;
        frameNow = (NSInteger) (currentTime / animationFrameDuration);
    }

    // Limit the range of frameNow to [0, SIZE-1]
    if (frameNow == 0) {
        frameNow = 0;
    } else if (frameNow >= animationNumFrames) {
        frameNow = animationNumFrames - 1;
    }

    [self animationShowFrame: frameNow];
//  animationStep = frameNow + 1;

    if (animationStep >= animationNumFrames) {
        [self stopAnimating];

        // Continue to loop animation until loop counter reaches 0

        if (animationRepeatCount > 0) {
            self.animationRepeatCount = animationRepeatCount - 1;
            [self startAnimating];
        }
    }
}

// Display the given animation frame, in the range [1 to N]
// where N is the largest frame number.

- (void) animationShowFrame: (NSInteger) frame {
    if ((frame >= animationNumFrames) || (frame < 0))
        return;

    NSData *data = [animationData objectAtIndex:frame];
    UIImage *img = [UIImage imageWithData:data];
    imageView.image = img;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  self.animationRepeatCount = 0;

    [self stopAnimating];
}

@end 
```

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:14:08.890

不知道为什么你被否决了。我认为您的问题是`UIViewController`子类已`loadView`实现该功能，并依赖它来构建 UI。在视图控制器的情况下，如果视图不是从 .xib 加载的，则会自动调用此函数来构建视图。您可以在创建对象后尝试手动调用此函数，它应该做几乎相同的事情。

请记住，该`shouldAutorotateToInterfaceOrientation` 函数也是一个`UIViewController`函数，永远不会在`UIView`

# django-views - Django 在 Json 中获取资源

> ID：12651333
> 
> 赞同：0
> 
> 时间：2012-09-29T08:54:02.847
> 
> 标签：django-views, getjson

```
import json
from django.core import serializers
from django.http import HttpResponse, Http404
from menu.models import *

def Database(request):
    if request.method == 'GET':
       menus = Menu.objects.all()
       return toJSON(serialize(menus))

def serialize(menus):
    serialized = []
    for obj in menus:
        serialized.append(obj.serializer())
    return serialized

def toJSON(menus, status=200):
    j = json.dumps(menus, ensure_ascii=False)
    return HttpResponse(j, status=status, content_type='application/json; charset=utf-8') 
```

我`views.py`喜欢这样，但它只返回`[]`，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:18:47.393

你的意思是你没有得到键值对，而是得到了 list ？

利用

```
j = json.dumps({"menus":menus}, ensure_ascii=False) 
```

代替

```
j = json.dumps(menus, ensure_ascii=False) 
```

# wcf - WCF 来自同一客户端的多个请求

> ID：12651334
> 
> 赞同：2
> 
> 时间：2012-09-29T08:54:09.203
> 
> 标签：wcf

我正在构建 WCF 服务，我需要客户能够同时获得多个结果。例如 5 次调用 void UploadPhoto(byte[] photo); 和 1 个字符串 GetInfo()

如果我理解正确，那么每当我请求服务时，我需要在第二个开始之前得到第一个的响应。那是对的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:59:39.577

如果您增加`System.Net.ServicePointManager.DefaultConnectionLimit`默认值为 2，您可以拨打多个电话。

您需要将 WCF Service 设置为[Per-Call Service](http://wcftutorial.net/Per-Call-Service.aspx)以处理并发请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:06:42.707

这并不完全正确。

如果您同步调用 WCF（或其他 Web 服务），那么您必须在执行其他任何操作之前等待响应。

但是，您可以异步调用 wcf 服务，在这种情况下您不必等待结果。您创建一个处理程序来处理返回的结果，但主程序继续。

看看 Ladislav 对这个问题的回答：[WCF 同步和异步调用的区别？](https://stackoverflow.com/questions/3793068/difference-between-wcf-sync-and-async-call)

# android - 设备通话时如何获取意图？

> ID：12651340
> 
> 赞同：0
> 
> 时间：2012-09-29T08:55:08.957
> 
> 标签：android, android-intent, broadcastreceiver

如何在设备开始通话和结束通话时获得我的注册广播接收器的意图？不管是呼入电话还是呼出电话。我只需要在每次设备开始呼叫和结束呼叫时获取 Intent。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:25:11.710

```
private class PhoneCallListener extends PhoneStateListener {

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (TelephonyManager.CALL_STATE_RINGING == state) {

        }

        if (TelephonyManager.CALL_STATE_OFFHOOK == state) {

        }

        if (TelephonyManager.CALL_STATE_IDLE == state) {

        }
    }
} 
```

在你 onCreate() 添加：

```
PhoneCallListener phoneListener = new PhoneCallListener();
TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE); 
```

# java - 从 URLConnection 读取

> ID：12651343
> 
> 赞同：1
> 
> 时间：2012-09-29T08:55:34.000
> 
> 标签：java, php, http, urlconnection

我的服务器中有一个 php 页面，它接受几个 POST 请求并处理它们。可以说这是一个简单的页面，输出只是一个回显语句。通过从 Java 程序建立的 URLConnection 发送 POST 请求，我尝试使用通过的输入流获取输入`connection.getInputStream()`。但我得到的只是页面的来源（整个 php 脚本），而不是它产生的输出。我们将在这里避免套接字连接。这可以通过 Url 连接或 HttpRequest 完成吗？如何？

```
class htttp{
public static void main(String a[]) throws IOException{
    URL url=new URL("http://localhost/test.php");

    URLConnection conn = url.openConnection();

    //((HttpURLConnection) conn).setRequestMethod("POST");
    conn.setDoOutput(true);
    conn.setDoInput(true);
    OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream()); 

    wr.write("Hello");
    wr.flush();
    wr.close();

    InputStream ins = conn.getInputStream();
    InputStreamReader isr = new InputStreamReader(ins);
    BufferedReader in = new BufferedReader(isr);
    String inputLine;
    String result = "";
      while( (inputLine = in.readLine()) != null )
                result += inputLine;
        System.out.print(result);

    }
      } 
```

我`test.php`在`result`. 但我只想要 php 脚本的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:17:01.760

您获得 PHP 源本身而不是它应该呈现的输出的原因是您的本地 HTTP 服务器 - 接收您的目标请求`http://localhost/test.php`- 决定返回 PHP 源，而不是将 HTTP 请求转发到 PHP 处理器渲染输出。

为什么会发生这种情况？这与您的 HTTP 服务器的配置有关；可能有几个原因。对于初学者，您应该验证 HTTP 服务器的配置。

*   您在机器上使用哪个 HTTP 服务器？
*   当您`http://localhost/test.php`通过浏览器浏览时会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:16:48.417

这里的问题不在于 Java 代码 - 问题在于 Web 服务器。您需要调查为什么您的网络服务器没有执行您的 PHP 脚本，而是将其原始发送回去。您可以首先使用一个简单的 PHP scipt 进行测试，该脚本返回一个固定的结果，并使用 GET 请求（来自 Web 浏览器）进行访问。一旦工作正常，您可以使用响应 POST 请求的那个进行测试。

# html - CSS Whitespace Normal 不包裹在 h3 标签上

> ID：12651347
> 
> 赞同：0
> 
> 时间：2012-09-29T08:56:24.053
> 
> 标签：html, css

我试图让一些文本换行所以我有这个：

```
h3.h3_title {
    white-space:normal !important;
} 
```

这是html：

```
<li>
<a href="#">
<img src="img.png" />
<h3 class="h3_title">this is some text which is supposed to wrap but it is not happening</h3>
</a>
</li> 
```

出于某种原因，它没有包装......为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T09:01:13.083

```
h3.h3_title {
    white-space:normal !important;
    width:20px !important;
} 
```

根据您的条件设置宽度

# jquery - 简单的 jquery 幻灯片 - 使顺序随机

> ID：12651353
> 
> 赞同：0
> 
> 时间：2012-09-29T08:56:56.443
> 
> 标签：jquery

我对 jquery 非常陌生。几乎什么都不知道。

在我的新极简主义网站上，我使用了一个非常简单的 jquery 幻灯片，我喜欢它的工作原理。但它缺少的一件事是随机射击的能力。有人会与我分享我需要添加到代码中以使其执行此操作吗？

你可以在我的网站[www.twentyfivethree.com上看到它](http://www.twentyfivethree.com)

```
<script>
$(function(){
    $('.fadein img:gt(0)').hide();
    setInterval(function(){
      $('.fadein :first-child').fadeOut(2250)
         .next('img').fadeIn()
         .end().appendTo('.fadein');}, 
      7000);
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:02:16.743

用这个

```
<div id="wrapper">
      <img src="dog.jpg">
      <img src="cat.jpg">
</div>

  $(document).ready(function(){
      var $imageArr = $('#wrapper img'),
      imageArrLength = $imageArr.length,
      randNum = Math.floor ( Math.random ( ) * imageArrLength + 1 );
      // show image that is nth child of image array
      $imageArr.eq(randNum-1).show();
} 
```

# arrays - 如何将文件中的行读入数组？

> ID：12651355
> 
> 赞同：7
> 
> 时间：2012-09-29T08:57:12.617
> 
> 标签：arrays, file-io, zsh

我正在尝试将文件作为行数组读取，然后使用 zsh 对其进行迭代。我得到的代码大部分时间都有效，除非输入文件包含某些字符（例如括号）。这是它的一个片段：

```
#!/bin/zsh
LIST=$(cat /path/to/some/file.txt)
SIZE=${${(f)LIST}[(I)${${(f)LIST}[-1]}]}
POS=${${(f)LIST}[(I)${${(f)LIST}[-1]}]}
while [[ $POS -le $SIZE ]] ; do
    ITEM=${${(f)LIST}[$POS]}
    # Do stuff
    ((POS=POS+1))
done 
```

我需要进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T11:23:34.030

```
#!/bin/zsh
zmodload zsh/mapfile
FNAME=/path/to/some/file.txt
FLINES=( "${(f)mapfile[$FNAME]}" )
LIST="${mapfile[$FNAME]}" # Not required unless stuff uses it
integer POS=1             # Not required unless stuff uses it
integer SIZE=$#FLINES     # Number of lines, not required unless stuff uses it
for ITEM in $FLINES
    # Do stuff
    (( POS++ ))
done 
```

你的代码中有一些奇怪的东西：

1.  为什么`LIST`每次都拆分而不是使其成为数组变量？这只是浪费CPU时间。
2.  你为什么不使用`for ITEM in ${(f)LIST}`？
3.  有可能直接向 zsh 询问数组长度：`$#ARRAY`。无需确定最后一个元素最后一次出现的索引。
4.  `POS``SIZE`获得与您的代码中相同的值。因此它只会迭代一次。
5.  括号是问题可能是因为 3.:`(I)`与模式匹配。请阅读文档。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-12-18T20:56:38.730

我知道问题得到解答已经有很长时间了，但我认为值得发布一个更简单的答案（不需要 zsh/mapfile 外部模块）：

```
#!/bin/zsh
for line in "${(@f)"$(</path/to/some/file.txt)"}"
{
  // do something with each $line
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-28T11:52:54.507

假设，出于示例的目的，它`file.txt`包含以下文本：

```
one

two

three 
```

解决方案取决于您是否要省略空行`file.txt`：

* * *

*   `lines`从文件创建一个数组`file.txt`，**省略空行**：

    ```
    typeset -a lines=("${(f)"$(<file.txt)"}")

    print ${#lines} 
    ```

    预期输出：

    ```
    3 
    ```

* * *

*   `lines`从文件创建一个数组`file.txt`，**不省略空行**：

    ```
    typeset -a lines=("${(@f)"$(<file.txt)"}")

    print ${#lines} 
    ```

    预期输出：

    ```
    5 
    ```

* * *

最后，结果数组的差异是在大括号扩展期间是否提供了[参数扩展标志的结果。](https://zsh.sourceforge.io/Doc/Release/Expansion.html#Parameter-Expansion-Flags) `(@)`

# c# - 在 .NET 3.5 上实现 Pub/Sub 或 SignalR 功能？

> ID：12651358
> 
> 赞同：6
> 
> 时间：2012-09-29T08:57:35.617
> 
> 标签：c#, jquery, asp.net, signalr

使用**SignalR**，很容易通过内置的 PUB/SUB 机制实时同步不同的客户端 PC 浏览器。但是 SignalR 只能与 .NET 4.0 或更高版本一起使用。我们正在尝试在 .NET 3.5 中实现类似的功能，因为此时我们无法升级我们的应用程序。

考虑到 SignalR 利用以下最新技术这一事实 -

1.  dot net 4.0 中的任务并行库
2.  HTML5 中的 WebSocket
3.  使用 AJAX 的异步回发

对于异步调用，我们计划使用经典的 BeginAsync 和回调方法，以及 ThreadPool 来创建多个线程。仍在学习如何使用 HTML 5 WebSocket。

我们正在评估其他替代方案，例如使用 jQuery AJAX 和编写自定义 IIS 处理程序，它可以从客户端 1 获取异步更新并将其推送到客户端 2 等等。

如果您过去做过类似的事情，您能否建议采用哪种方法是正确的？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T03:30:45.103

我将 v1.x 和 v2.x SignalR 客户端反向移植到 NET35。它们在此处作为 NuGet 包提供：[http ://www.nuget.org/packages/Nivot.SignalR.Client.Net35/](http://www.nuget.org/packages/Nivot.SignalR.Client.Net35/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:13:20.323

您可以使用 node.js 并与 .net 中的 mvc proyect 结合使用

关于混合应用

[http://sweettam.blogspot.mx/2012/06/hybrid-application-using-aspnet-mvc3.html](http://sweettam.blogspot.mx/2012/06/hybrid-application-using-aspnet-mvc3.html)

祝你好运。

# jquery - 在 jquery Datepicker 的 minDate 中传递时间戳值

> ID：12651360
> 
> 赞同：1
> 
> 时间：2012-09-29T08:57:59.167
> 
> 标签：jquery, datepicker, timestamp, mindate

我无法将时间戳字符串传递到 minDate 属性。我这样做的方式似乎不起作用。

var 时间戳 = 1349802000000;

```
$( "booksale_start_date_view" ).datepicker( "option", "minDate", new Date(timestamp) ); 
```

这是正确的做法吗？对不起我对这个问题的无知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:09:43.503

像这样试试

```
 var timestamp=new Date(); //Unix Timestamp in seconds

  //But we need the time in milliseconds so,
  timestamp=timestamp*1000;
  $("booksale_start_date_view" ).datepicker( "option", "minDate", timestamp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T09:22:28.483

假设您使用的是 jQuery UI，您应该像这样设置它：

```
$( "#booksale_start_date_view" ).datepicker({ minDate: new Date(1349802000000)}); 
```

如果您提供了 jsfiddle，则更容易看出哪里出错了。

# objective-c - 对象名称内的整数值（xcode）

> ID：12651362
> 
> 赞同：0
> 
> 时间：2012-09-29T08:58:11.450
> 
> 标签：objective-c, xcode, integer, objectname

我的想法是将生成的整数值添加到 UIImageView 的名称中。这是一个示例：我有三个 UIImageView，分别命名为 imageView1、imageView2、imageView3。当按下按钮时，我有这个简单 `self.value = value + 1;` 的代码：（当然，我声明了这个“值”）现在我想添加一些代码，内容如下： `UIImage *img = [UIImage imageNamed:@"image.png"]; [imageView(value) setImage:img];` 所以我希望这部分代码`...[imageView(value)...`使用我上面定义的值. 我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:04:06.157

你可以`tag`为你的图像视图设置一个：

```
// set tag
[imageView1 setTag:1];
[imageView2 setTag:2];
//...

// get the image view with the tag
[(UIImageView *)[self.view viewWithTag:value] setImage:img];
//... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T09:06:27.113

您可以使用标签，也可以将标签`UIImageViews`放入`NSArray`. 然后你可以做类似的事情

```
[((UIImageView *)[imageViewArray objectAtIndex:self.value]) setImage:img]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T12:29:01.770

在这里，我尝试按照您的要求进行操作。

我的 ViewController 类

```
- (void)viewDidLoad
{   
[super viewDidLoad];
ExtendedUIImageView *eimage=[[ExtendedUIImageView alloc]initExtendedUIImageViewWithFrame:CGRectMake(0, 0, 768, 1024)];
UIImage *img1=[UIImage imageNamed:@"mac.png"];
UIImage *img2=[UIImage imageNamed:@"images.jpeg"];
UIImage *img3=[UIImage imageNamed:@"mac.png"];
[eimage addUIImage:img1 ToExtendedImageViewWithRect:CGRectMake(100, 100, 100, 100) withTag:1];
[eimage addUIImage:img2 ToExtendedImageViewWithRect:CGRectMake(210, 100, 100, 100) withTag:2];
[eimage addUIImage:img3 ToExtendedImageViewWithRect:CGRectMake(320, 100, 100, 100) withTag:3];
[self.view addSubview:eimage];

}

- (IBAction)chageImage:(UIButton *)sender {
    NSLog(@"#####");
     UIImage *img2=[UIImage imageNamed:@"images.jpeg"];
    [eimage replaceImage:img2 forTag:3];
} 
```

我扩展了 UIView 类并创建了新的类 ExtendedImageView 类

扩展图像视图.h

```
@interface ExtendedUIImageView : UIView
-(id)initExtendedUIImageViewWithFrame:(CGRect)rect;
-(void)addUIImage:(UIImage *)img ToExtendedImageViewWithRect:(CGRect)rect withTag:(int)n;
-(void)replaceImage:(UIImage *)newImg forTag:(int)n;    
@end 
```

扩展图像视图.m

```
@implementation ExtendedUIImageView
-(id)initExtendedUIImageViewWithFrame:(CGRect)rect{
    if([super initWithFrame:rect]){
        return  self;
    }
    return nil;
}

-(void)addUIImage:(UIImage *)img ToExtendedImageViewWithRect:(CGRect)rect withTag:(int)n{
    UIImageView *imgView=[[UIImageView alloc]initWithImage:img];
    //[imgView setBackgroundColor:[UIColor grayColor]];
    imgView.frame=rect;
    [imgView setTag:n];
    [self addSubview:imgView];

}

-(void)replaceImage:(UIImage *)newImg forTag:(int)n{
    for(UIView * img in [self subviews]){
        if([img isKindOfClass:[UIImageView class]]&&[img tag]==n){
            ((UIImageView *)img).image=newImg;
        }
    }
}
@end 
```

# amazon-ec2 - EC2按需实例中是否经常出现partial instanc-hour

> ID：12651367
> 
> 赞同：-1
> 
> 时间：2012-09-29T08:59:07.267
> 
> 标签：amazon-ec2

因为定价是按每个实例消耗的每个实例小时计算的，所以从实例启动到终止。消耗的每个部分实例小时将按整小时计费。

这是我的问题：

**部分 instance-hour**是**经常**出现还是**很少**出现？

或者在什么样的情况下，**partial instance-hour****频繁**出现？

有人会有这些经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:49:56.993

使用经常扩展的系统时，部分时间最常发生。例如，在我的系统中，我每周六和周日额外启动 10-20 台服务器来处理额外的流量。当这些服务器停止时，我将收取部分小时的费用。Amazon 为自动扩展组提供了一项新功能，告诉它终止（如果必须）靠近小时标记的服务器以节省资金。

其他可能的用途是用于 MapReduce 等服务，其中将启动大量实例，然后在作业完成时终止它们。

但我的经验是，部分时间的实际成本对我来说微不足道。也许如果您使用更大的服务器，它会花费很多，但我使用的是 c1.medium，我几乎没有注意到我在周末的部分时间收取 5 美元。

# google-apps-script - 我可以在 web 应用程序中显示 Google Docs 视频吗？

> ID：12651368
> 
> 赞同：0
> 
> 时间：2012-09-29T08:59:24.883
> 
> 标签：google-apps-script

我知道如何在我的谷歌网站中嵌入谷歌文档视频，但我真正想做的是通过部署为网络应用程序的 GAS 显示一些视频教程 - 最好在 TabPanel 的一个选项卡中，但我愿意接受建议关于其他面板类型。支持吗？

我认为使用 Class Image 可能有效，但我没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:26:38.520

与其编写 UI 应用程序，不如考虑使用 HtmlService，您可以在其中嵌入受特定限制的 Javascript，因此也可以嵌入视频

[https://developers.google.com/apps-script/service_html](https://developers.google.com/apps-script/service_html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:53:29.803

您还不能在 HtmlService 中嵌入 flash 视频，尽管计划提供此类支持

# java - 我可以编写重新加载一个互联网页面的java代码吗？

> ID：12651369
> 
> 赞同：0
> 
> 时间：2012-09-29T08:59:30.333
> 
> 标签：java

我只是想知道我是否可以编写例如在 5 秒内重新加载互联网页面的代码。我只知道Java，这种语言可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:01:52.490

是的，查看 HttpURLConnection 类。这方面的例子很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:16:46.760

在您的 JSP 中，您可以使用

```
<meta http-equiv="refresh" content="5"> //Refresh after 5 seconds 
```

您也可以使用[HttpServletResponse#setIntHeader](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#setIntHeader%28java.lang.String,%20int%29)

```
<% response.setIntHeader("Refresh", 5); %>//Refresh after 5 seconds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:32:47.540

您可以使用 httpservlet 执行此操作。您可以使用 http 标头刷新页面

```
response.setHeader("Refresh", "5; url=http://your.domain.com/page"); 
```

或通过 hml 元刷新。（代码未经测试）

# php - 贝宝 IPN php 脚本

> ID：12651373
> 
> 赞同：1
> 
> 时间：2012-09-29T08:59:49.510
> 
> 标签：php, paypal, handler, paypal-ipn

我刚刚意识到我在 php 中的 paypal ipn 处理程序不再工作（我什么也没改变），我使用[了 paypal 提供的示例 php 脚本。](https://cms.paypal.com/cms_content/FR/fr_FR/files/developer/IPN_PHP_41.txt)

我试图通过进行几次测试来隔离问题，此时我可以说问题不是“已验证”或“无效”的事情，而是来自以下几行：

[...]

```
fputs ($fp, $header . $req);
    while (!feof($fp))
    {
        $res = fgets ($fp, 1024);
        if (strcmp ($res, "VERIFIED") == 0)
        {
        // check the payment_status is Completed 
```

[...]

任何人都知道贝宝是否改变了某些东西或为什么它不起作用？

谢谢'

ps：如果我把我的代码放在所有贝宝测试之前（在“if（！$fp）”行之前）它就可以正常工作

这是我的代码，我评论了“数据库进程”在哪里工作以及在哪里不工作。

```
<?php

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value)
{
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
}

// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$payment_status = $_POST['payment_status'];

// DATABASE PROCESS WORKS (BEFORE THE PAYPAL TESTS)

if (!$fp)
{
    // HTTP ERROR
}
else
   {

// DATABASE PROCESS WORKS

    fputs ($fp, $header . $req);
    while (!feof($fp))
    {
        $res = fgets ($fp, 1024);
        if (strcmp ($res, "VERIFIED") == 0)
        {
            // check the payment_status is Completed
            // check that txn_id has not been previously processed
            // check that receiver_email is your Primary PayPal email
            // check that payment_amount/payment_currency are correct
            // process payment

// DATABASE PROCESS NOT WORKING

        }
        else if (strcmp ($res, "INVALID") == 0)
        {
            // log for manual investigation

// DATABASE PROCESS NOT WORKING
        }
    }
fclose ($fp);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:29:32.827

尝试在 x.xom [https://www.x.com/instant-payment-notification-4上使用更新后的脚本](https://www.x.com/instant-payment-notification-4)

它使用 CURL 而不是 fsock

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:36:28.063

当服务器未正确配置套接字或未配置 openSSL 模块时发生此错误。

或者

您可以尝试使用以下代码示例，使用 file_get_contents 而不是 $fp 代码

```
<?php
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}

// for live mode
$url="https://www.paypal.com/cgi-bin/webscr";
// for developement mode
$url="https://www.sandbox.paypal.com/cgi-bin/webscr";

// instead of use of fopen you can use
$res=file_get_contents($url"?".$req);
// compare response
if (strcmp (trim($res), "VERIFIED") == 0) {
// check the payment_status is Completed
// check that txn_id has not been previously processed
// check that receiver_email is your Primary PayPal email
// check that payment_amount/payment_currency are correct
// process payment
}
else if (strcmp (trim($res), "INVALID") == 0) {
// log for manual investigation
}

?> 
```

如果 file_get_contents 不起作用，那么您可以使用 CURL 获取响应...

让我知道是否有任何问题？

谢谢

# c# - 如何以 yyyy-MM-ddThh:mm:ssZ 格式打印 DateTime 对象？

> ID：12651378
> 
> 赞同：1
> 
> 时间：2012-09-29T09:00:49.537
> 
> 标签：c#

任何人都可以帮助我找到一个格式化程序以通过以下方式打印 DateTime 对象：

```
2012-09-30T16:53:46Z 
```

“Z”后缀是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:02:17.360

文字`Z`实际上是*UTC 时间的 ISO 8601 日期时间标准的*一部分。当`Z`(Zulu) 被添加到时间的末尾时，它表示该时间是 UTC，所以实际上文字`Z`是时间的一部分。

**[MSDN：自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)**

# html - Dreamweaver 可以打开 .manifest 文件吗？

> ID：12651382
> 
> 赞同：0
> 
> 时间：2012-09-29T09:01:18.137
> 
> 标签：html, dreamweaver

**有没有办法用 Dreamweaver (CS 6) 编辑 .manifest 文件？**

我有一个 HTML 5 页面，其中连接了很多文件。清单有时需要更改，或者我必须在线提供更新。

这在 Drwamweaver 中是不可能的。当我双击该文件时，Dreamweaver 会提醒我此扩展没有有效的编辑器。当我在资源管理器中双击该文件时，它只会使用 Notepad++ 打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:00:30.283

您需要让 Dreamweaver 知道您要在代码视图中打开 .manifest 文件。

转到**编辑**>**首选项**
并选择类别**文件类型/编辑器**

在输入字段“*在代码视图中打开*”中添加“ **.manifest** ”作为文件扩展名。
单击**确定**以保存您的首选项。

双击 *.manifest 文件现在将导致 Dreamweaver 在代码视图中打开该文件。

# php - 如何实现只有 1 个深度级别的评论系统

> ID：12651384
> 
> 赞同：-3
> 
> 时间：2012-09-29T09:01:32.573
> 
> 标签：php, mysql, sql, comments, hierarchy

我读过评论系统的最佳解决方案是[在 MySQL 中管理分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

但是，我计划只允许回复最热门的评论 - 只有一个深度级别。在这种情况下，结构变得比复杂的树要简单得多。

在这种情况下还有其他方法可以实现它吗？更简单，更简单，更快的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:08:29.487

1 级的实现与 N 级的实现相同。

唯一的区别是您只使用 1 级。

一个可能的实现如下所示：将所有评论放在一个表中，并使用博客文章或您评论的任何内容的外键。嵌套存储在 ParentCommentId 中。如果它的值为 NULL，则它是根注释，如果它具有值，则它是对其他注释的注释。

然后很容易制作一个简单的评论表单并将结果存储在数据库中。

表结构可能如下所示：

```
CREATE TABLE `Comments` (
  `CommentId` int(11) NOT NULL AUTO_INCREMENT,
  `BlogId` int(11) NOT NULL,
  `ParentCommentId` int(11),
  `Content` text NOT NULL,
  `Name` varchar(64) NOT NULL DEFAULT '',
  `EMail` varchar(64) DEFAULT NULL,
  `Url` varchar(64) DEFAULT NULL,
  `IP` varchar(20) NOT NULL DEFAULT '',
  `Created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `Modified` datetime DEFAULT NULL,
  PRIMARY KEY (`CommentId`),
  KEY `FK_Blog` (`BlogId`),
  CONSTRAINT `FK_CommentBlog` FOREIGN KEY (`BlogId`) REFERENCES `Blogs` (`BlogId`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# perl - 反转智能匹配运算符的操作数不会给出相同的结果

> ID：12651385
> 
> 赞同：2
> 
> 时间：2012-09-29T09:01:33.817
> 
> 标签：perl

我在`Smart Matching Operator`..的工作中遇到了一个奇怪的问题

我已经读过使用时操作数的顺序`Smart Matching Operator(~~)`无关紧要，它给出了相同的结果..但是在我下面展示的示例中，这不起作用..

我想检查一个元素是否在给定数组的元素之一中。
以下是我尝试的两种方法：-

**第一种方式： -** ($result ~~ @nums)

```
#!/perl/bin
use v5.14;

my @nums = qw( 1 2 3 27 42 );
my $result = 27;

say "The result [$result] is one of the input values (@nums)" if $result ~~ @nums; 
```

**第二种方式： -** (@nums ~~ $result)

```
#!/perl/bin
use v5.14;

my @nums = qw( 1 2 3 27 42 );
my $result = 27;

say "The result [$result] is one of the input values (@nums)" \
                                 if @nums ~~ $result; 
```

但是，第一种方式工作正常，它正在打印语句，但在第二种方式中，它没有打印..

即： -**`@nums ~~ $result`**没有给出相同的结果**`$result ~~ @nums`**

我不明白为什么会这样。

任何人都可以帮助我。我无法在 SO 上找到这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T09:07:48.247

根据[perlop](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)，它说（在许多其他东西中）：

> 通常最好将其朗读为“in”、“inside of”或“is contains in”，因为左操作数通常在右操作数内部查找。

您可能想查看那里的表格，尤其是以下部分：

```
Left      Right      Description and pseudocode                               
===============================================================
Any       ARRAY      smartmatch each ARRAY element[3]                   
                like: grep { Any ~~ $_ } ARRAY
Any       Num        numeric equality                                  
                 like: Any == Num 
```

请记住，如果`Any`是数组并且`Num`是标量，则以下内容相等：

```
Any == Num <=> scalar(Any) == Num 
```

# haskell - haskell 将输入数字放在有序列表中

> ID：12651391
> 
> 赞同：0
> 
> 时间：2012-09-29T09:02:19.917
> 
> 标签：haskell, io

这是一个haskell问题：重复输入数字直到用户输入0，然后按顺序显示这些数字。

我知道如何按顺序排列 int 列表。这是我的代码：

```
placeinorder :: [Int] -> [Int]
placeinorder [] = []
placeinorder [x] = [x]
placeinorder (pivot:xs) = placeinorder left ++ [pivot] ++ placeinorder right
                where left = filter (<pivot) xs
                      right = filter (>pivot) xs 
```

而且，我知道如何从输入中获取 Int ：

```
 getInt :: IO Int 
 getInt = do 
        line <- getLine
        return (read line :: Int) 
```

但我不知道如何将输入数字更改为列表...然后我可以使用 placeinorder 函数。

有人可以为我写正确的代码吗？

非常感谢！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:14:44.253

> 有人可以为我写正确的代码吗？

不，它看起来太像家庭作业了。

> 有人可以给我有价值的提示，以便我自己做吗？

我很乐意尝试。

所以你有你的 placeinorder 类型的函数`[Int] -> [Int]`。您有 getInt 来读取单个 Int 类型`IO Int`。显然，你仍然需要一个函数`getIntList :: IO [Int]`。

一旦你有了这个功能，你就完成了。在您的`main`函数中，您必须调用它并将结果粘贴到标准打印函数中（我们将假装它具有类型`print :: [Int] -> IO ()`- 实际上，它更通用）。

那么，你怎么写`getIntList`？使用递归。

得到一个整数。如果它为零，则您刚刚读取了一个空列表。如果不是，请使用递归来读取列表的其余部分。然后把你读过的数字和你刚刚读过的列表的其余部分放在一起。

一旦你将上面的内容翻译成 Haskell，你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:26:39.410

我自己已经得到了答案！

这是代码！

```
main = do 
      putStrLn "Please input numbers: "
      a <- getIntList
      print (placeinorder a)

getInt :: IO Int 
getInt = do 
        line <- getLine
        return (read line :: Int)

getIntList :: IO [Int]
getIntList = do 
           number <- getInt
           if number == 0 
                 then return []
                 else (do 
                          a <- getIntList
                          return (convert_to_list number a))

convert_to_list :: Int -> [Int] -> [Int]
convert_to_list 0 [] = []
convert_to_list x [] = [x]
convert_to_list x xs = x:xs

placeinorder :: [Int] -> [Int]
placeinorder [] = []
placeinorder [x] = [x]
placeinorder (pivot:xs) = placeinorder left ++ [pivot] ++ placeinorder right
                where left = filter (<pivot) xs
                      right = filter (>pivot) xs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T10:44:52.257

也许我迷路了，但我看不出 convert_to_list 与函数 (:) 有何不同，除了第一个 arg 为 0 的情况。由于您的特殊情况，0 回答 convert_to_list 的第一个参数永远不会为 0。将 convert_to_list 替换为(:)

此外，如果这不是家庭作业（或者如果实现合并排序不是任务的一部分）haskell 有一个排序功能（Data.List.sort）我不确定它使用什么样的排序（可能是快速排序或合并排序) 可以替换placeinorder。您也可以将 placeinorder 的类型签名更改为

```
placeinorder :: Ord a => [a] -> [a] 
```

使其成为通用排序（这可能会使其速度稍慢）。

编辑：

此外，如果您像现在一样离开读取功能，它会给您

***例外：Prelude.read：没有解析

如果您的用户向您提供错误数据（即不解析为 Ints 的字符串），我建议更改 getInt 以返回 IO（可能是 Int）（并可能打印错误输入的警告）。

# cocoa - NSOutlineView outlineViewItemDidExpand 通知出现在大纲视图重绘之前

> ID：12651394
> 
> 赞同：2
> 
> 时间：2012-09-29T09:02:48.623
> 
> 标签：cocoa, nsoutlineview

我有 NSOutlineView 来显示文件夹树。我需要在树中的文件夹扩展时显示进度指示器。我通过委托通知做到了：

```
-(void)outlineViewItemDidExpand:(NSNotification *)notification
{
  [self stopProgressIndicator];
} 
```

和

```
-(void)outlineViewItemWillExpand:(NSNotification *)notification
{
  [self stopProgressIndicator];
} 
```

一切都适用于小文件夹。但是，当我尝试扩展包含大量子文件夹的文件夹时，我的进度指示器会在扩展结果显示在大纲视图中之前停止。

据我了解，我需要停止我的进度指示器，而不是在项目确实展开但在大纲视图确实完成重绘。我怎么能赶上这样的事件？

# asp.net - jquery mobile中的多页模板

> ID：12651400
> 
> 赞同：0
> 
> 时间：2012-09-29T09:03:35.633
> 
> 标签：asp.net, jquery-mobile

我使用多页模板创建我的页面，我读到加载时每个页面中只有起始页（例如 index.aspx）仍然保留在 Dom 中。但是现在在我的另一个页面（例如 child.aspx）中，它是页面 parent.aspx 的子页面，我可以看到 parent.aspx 页面的 dom 元素。面包屑如下：索引--->父--->子，也许我应该只看到索引dom内容而不是父。这让我想知道为什么页面是这样的以及我如何处理它。谢谢

# 更新：

我只想在每次显示时重新加载每个页面，我的意思是完全清除 DOM 并从头开始加载内容。就像当您按下 ctrl+f5 并加载没有缓存的页面时一样。这在 JQM 中可能吗？

**索引.aspx：**

```
 <form id="form1" runat="server" dir="rtl">
            <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode = "Conditional">
            <ContentTemplate>
        <asp:ScriptManager ID="ScriptManager" runat="server"></asp:ScriptManager>
        <uc2:MblMyMessageBox ID="MblMyMessageBoxInfo" runat="server" ShowCloseButton="true" /> 
    <div data-role="page" id="home"> 
        <div data-role="header">
            <h1>header</h1>
        </div>
        <div data-role="content">   
            <ul data-role="listview" data-inset="true" data-filter="false">
                <li data-icon="false"><a href="AccountStatus.aspx">AccountStatus</a></li>
                <li data-icon="false"><a href="ConfirmPayment.aspx">ConfirmPayment</a></li>
            </ul>   
        </div>
    </div>
            </ContentTemplate>
    </asp:UpdatePanel>
</form> 
```

**帐户状态.aspx：**

```
 <div data-role="page" id="accountStatus">
    <div data-role="header">
        <h1>Header</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <ul data-role="listview" data-inset="true" data-filter="false">
            <li data-icon="false"><a href="BalancePage.aspx" data-prefetch="true">balance</a></li>
            <li data-icon="false"><a href="InvoicePage.aspx">invoice</a></li>
        </ul>           
    </div><!-- /content -->
    <div data-role="footer">
        <p><a href="Index.aspx">back</a></p>
    </div><!-- /footer -->
 </div><!-- /page --> 
```

从 accountStatus 页面 dom 元素中删除索引的内容是我的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:53:18.123

用户导航到的所有页面都将添加到 dom 中。请参阅[文档](http://jquerymobile.com/test/docs/pages/page-links.html)。然而，jQM 也有[一种机制](http://jquerymobile.com/test/docs/pages/page-cache.html)来防止 DOM 变大并减慢浏览器的速度。它可能会也可能不会从 DOM 中删除旧元素。我建议你不要相信 DOM 元素会被自动删除。如果您真的想删除您要离开的页面，您可以绑定例如以下内容：

```
$(document).one("pageshow",function(){
     $(document).one("pagehide",function(){
          $("#pageId").remove();
     });
}); 
```

其中 pageId 是您提供给`<div data-role="page" id="pageId">`.

编辑更新的问题：在以下链接时重新加载整个页面：

> 指向其他域或具有 rel="external"、data-ajax="false" 或 target 属性的链接将不会被 Ajax 加载。相反，这些链接将导致整个页面刷新而没有动画过渡。

来源：[jQuery Mobile 文档](http://jquerymobile.com/test/docs/pages/page-links.html)

或者您可以使用[以下全局变量](http://jquerymobile.com/test/docs/api/globalconfig.html)更改它：

```
$.mobile.ajaxEnabled = false; 
```

# javascript - 嵌入 YouTube 实时供稿

> ID：12651401
> 
> 赞同：2
> 
> 时间：2012-09-29T09:03:38.790
> 
> 标签：javascript, jquery, youtube-api, youtube-livestreaming-api

我正在尝试使用[YouTube API v2.0 提取最新的 YouTube 实时事件源 - 检索实时事件](https://developers.google.com/youtube/2.0/developers_guide_protocol_retrieving_live_events) 但我的脚本似乎不起作用。这是我的代码。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    </head>
    <body>

     <div id="static_video"></div>

      <script> 
          $(document).ready(function() {
          $(function () {   
              $.getJSON( "https://gdata.youtube.com/feeds/api/users/ElektraRecords/live/events?v=2&inline=true&alt=json-in-script&status=pending&orderby=published$callback=?",
            function (data) {   
                $.each(data.feed.content.entry, function(i,entry) { 
                    var videoid = 'http://www.youtube.com/embed/' + entry.yt$videoid.$t;
                    var title = '<h1>' + entry.media$title.$t + '</h1>';
                var video = +title+ "<iframe width='420' height='315' src='"+videoid+ "' frameborder='0' allowfullscreen></iframe>";
                $('#static_video').html(video);
                    });
                });
            });
        });
      </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:17:00.047

您缺少依赖项脚本。显然，您需要在文档的标题中包含 API 的 gdata 部分。查看我放在 JSFiddle 上的浏览​​器调试器和脚本：http: [//jsfiddle.net/2NDrC/](http://jsfiddle.net/2NDrC/) - 您可能希望嵌入的 API 在这里：[https ://code.google.com/p/google-api -javascript客户端/](https://code.google.com/p/google-api-javascript-client/)

如果您查看使用 javascript 检索的 URL 的作用，您会发现它是对 gdata api 中方法的方法调用：

网址：`https://gdata.youtube.com/feeds/api/users/ElektraRecords/live/events?v=2&inline=true&alt=json-in-script&status=pending&orderby=published$callback=?`

返回

`gdata.io.handleScriptLoaded({"version":"1.0","encoding":"UTF-8","feed":{"xmlns$app":"http://www.w3...`

并作为javascript执行。因此，必须提供一个名为 gdata.io.handleScriptLoaded 的方法才能成功执行。

此处显示了解释如何伪造 gdata.io.handledScriptLoaded 方法以仅提取数据的解决方法：[https ://groups.google.com/forum/?fromgroups=#!topic/jquery-en/83Kpr9oSxFM](https://groups.google.com/forum/?fromgroups=#!topic/jquery-en/83Kpr9oSxFM)

# android - 从android中的Web服务将数据列表分配给微调器

> ID：12651402
> 
> 赞同：0
> 
> 时间：2012-09-29T09:03:39.307
> 
> 标签：android, database, web-services, spinner

我通过网络服务从数据库中获取数据。我必须将数据设置为微调器。是否可以将数据从数据库分配给微调器？如果可能，它是怎样的？请帮我。提前致谢........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:30:02.437

**是**的，您可以从数据库中读取数据，然后设置为微调器。

看[这个例子](http://samir-mangroliya.blogspot.in/2012/09/android-populate-spinner-from-sqlite.html)

# node.js - Node.js - 执行传递给另一个函数的匿名函数

> ID：12651408
> 
> 赞同：0
> 
> 时间：2012-09-29T09:04:37.203
> 
> 标签：node.js

我知道 Node.js 通过利用事件循环具有事件驱动的异步回调的概念。

```
database.query("SELECT * FROM hugetable", function(rows) { var result = rows; });
console.log("Hello World"); 
```

在这里，我们不期望 database.query() 直接向我们返回结果，而是向它传递第二个参数，一个匿名函数。现在，Node.js 可以异步处理数据库请求。假设 database.query() 是异步库的一部分，Node.js 就是这样做的：就像以前一样，它接受查询并将其发送到数据库。但它不是等待它完成，而是在心里记下“当在未来某个时间数据库服务器完成并发送查询结果时，我必须执行传递给数据库.查询（）。”

我正在尝试使用示例代码进行相同的操作（因为我是新手，直到 Node.js DB 交互才达到）：

```
[root@example]# cat server8.js
function myfun(noparm , afterend)
{
         for ( var i =0; i < 10; i ++)
                console.log("The valus is " + i);
}

function mynextfn()
{
        console.log("Hello World");
}
function afterend()
{
        console.log("Hello afterend");
}

myfun(0, afterend);
mynextfn();
[root@idc-bldtool01 example]# node server8.js
The valus is 0
The valus is 1
The valus is 2
The valus is 3
The valus is 4
The valus is 5
The valus is 6
The valus is 7
The valus is 8
The valus is 9
Hello World
[root@iexample]# 
```

因此，我没有看到“通过利用事件循环，事件驱动的异步回调的概念”？

谁能帮我实现一些基本的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:10:53.320

您将`afterend`函数作为参数传递，但您从不调用它。

您的功能`myfun`必须是：

```
function myfun(noparm , afterend)
{
  for (var i = 0; i < 10; i++) {
    console.log("The valus is " + i);
  }
  afterend();
} 
```

那么你期望会发生什么;-)

并且：第二件事是您的`myfun`功能是完全同步的。所以 Node.js 没有机会`mynextfn`在函数的内容之前运行`myfun`。

可能`afterend`会在之前运行`myfun`，这取决于时间问题，因为两者都不做任何繁重的工作。

# android - Android - 未定义类型新 View.OnClickListener(){} 的 Sqlite 数据库方法

> ID：12651410
> 
> 赞同：1
> 
> 时间：2012-09-29T09:04:54.253
> 
> 标签：android

我想从 RechargeActivity.java 文件中调用 inserttable 方法，该文件的定义位于另一个 TryUIOpenHelper.java 中，我的数据库和表是在其中创建的。我想知道更好的方法。请帮忙

```
 public class RechargeActivity extends Activity   {
     protected void onCreate(Bundle savedInstanceState) {

     super.onCreate(savedInstanceState);
     setContentView(R.layout.rechtable);

     RadioButton rb1 = (RadioButton) findViewById(R.id.rtt1); 
     RadioButton rb2 = (RadioButton) findViewById(R.id.rtt2); 
     final TextView amount = (TextView)findViewById(R.id.amount1);
     final TextView talktime = (TextView)findViewById(R.id.talktime1);
     final TextView validity = (TextView)findViewById(R.id.validity1);  
     final Button button = (Button) findViewById(R.id.done);

     final TryUIOpenHelper helper=new TryUIOpenHelper(this);
     final SQLiteDatabase dbDatabase=helper.getWritableDatabase();
     final Date date = new Date(); 
     Calendar now = Calendar.getInstance();
     int  year = now.get(Calendar.YEAR);
     int  month = now.get(Calendar.MONTH);      // 0 to 11
     int day = now.get(Calendar.DAY_OF_MONTH); 

     String val=""+(day)+"/"+(month+1)+"/"+(year+1)+"";
         validity.setText(val);

     try{
     rb1.setOnClickListener( new OnClickListener ()
     {
            public void onClick(View v)
            {   
          //Error here: The method inserttable(SQLiteDatabase) is undefined       for the type new View.OnClickListener(){}
    inserttable(dbDatabase);

           } 
          });
    }
    catch(Exception e)
    {
    System.out.println("Exception:"+e);
    }   

    rb2.setOnClickListener( new OnClickListener ()
     {
    public void onClick(View v)
      { 

      } } );

    button.setOnClickListener(new OnClickListener() {
        @Override
    public void onClick(View v) {
    final Intent intent = 
    new Intent(RechargeActivity.this,       NumForRecharge.class);
            startActivity(intent);
        }
    });

     //db.close();

      }         
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:16:20.910

`TryUIOpenHelper`在你的对象上调用它

```
helper.inserttable(dbDatabase); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:32:56.807

```
 rb1.setOnClickListener( new OnClickListener ()
     {
            public void onClick(View v)
            {   

     TryUIOpenHelper openHelper=new TryUIOpenHelper();
    openHelper.inserttable(dbDatabase);

           } 
          }); 
```

像这样更改您的 onClickListener。

**原因：**当您尝试使用位于某个其他类中的方法时，您需要为该类创建一个对象，然后才能从该类调用一个方法（假设它是公共方法）。如果它是私有方法，那么您将无法访问它。

同样，如果该方法是静态方法，则无需为该类创建对象。干脆`ClassName.MethodName();`就行。

# javascript - jquery滚动效果方法（滚动点，水平滚动“劫持”）

> ID：12651414
> 
> 赞同：3
> 
> 时间：2012-09-29T09:06:02.287
> 
> 标签：javascript, jquery, scroll, parallax

可能不是最好的标题，但我正在寻找的是创建一个具有类似于此[http://www.mdot.it/](http://www.mdot.it/) “劫持”垂直滚动效果的网站的最佳方法。

基本上我知道如果它只向下滚动（即如果滚动位置为 100，淡出某些东西，将某些东西设置为固定等），我无法理解的是如何让它在两个方向上工作除非我会使用一些疯狂的条件和东西。

也找不到合适的词来调用这种效果，我搜索的所有内容都导致了视差插件..

任何可以帮助我的提示/模式/链接？

谢谢！

// 编辑 mdot 所做的是将整个页面拆分为帧（1px 1 帧），然后将所有 52 个元素的样式分配给每个帧，因此每个滚动像素都有 52 个样式被设置.. 必须有更好的方法， 或者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:31:29.527

也许[skrollr](https://github.com/Prinzhorn/skrollr)是你想要的。它非常轻巧，不会妨碍您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:36:34.420

我能够在 google 上找到[http://johnpolacek.github.com/scrolldeck.js/](http://johnpolacek.github.com/scrolldeck.js/)，其中一个示例具有双向工作的动画，而且看起来经过深思熟虑 - 应该是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:42:45.003

检查 Joel Besada 的酷滚动路径：

[https://github.com/JoelBesada/scrollpath](https://github.com/JoelBesada/scrollpath)

演示[**在这里**](http://joelb.me/scrollpath/)

# java - Node.js / Java 通信允许多条消息

> ID：12651419
> 
> 赞同：1
> 
> 时间：2012-09-29T09:07:23.380
> 
> 标签：java, node.js, socket.io

我目前在我的服务器上运行了一个 java 后端，并且我遇到了一个从 Java 到 Node.js 通信的脚本。我想知道如何修改脚本以一次允许多条消息，如果可能的话，反向使用它来与 Java 进行通信。

这是代码：

Java端：

```
package com.timetablr.backend.nodecommunicator;

import java.io.ByteArrayOutputStream;

import java.io.IOException;

import java.io.InputStream;

import java.net.Socket;

public class NodeCommunicator {

public static void main(String[] args) {
    try {
        Socket nodejs = new Socket("localhost", 8080);
        sendMessage(nodejs, "testnamespace");
        Thread.sleep(100);
        int x = 0;
        while (true)
        {
            sendMessage(nodejs, x + "");
            x++;
            Thread.sleep(1000);
            System.out.println(x + " has been sent to server");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static void sendMessage(Socket s, String message) throws IOException {
    s.getOutputStream().write(message.getBytes("UTF-8"));
    s.getOutputStream().flush();
}

public static String readMessage(Socket s) throws IOException {
    InputStream is = s.getInputStream();
    int curr = -1;
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    while ((curr = is.read()) != -1) {
        if (curr == '\n') {
            break;
        }
        baos.write(curr);
    }
    return baos.toString("UTF-8");
}
} 
```

Node.js 方面：

```
var javaPort = 8080;
var sIOPort = 8081;
var javaServer = require('net').createServer();
var browserServer = require('socket.io').listen(sIOPort);

console.log('=====================================================');
console.log('JamesS237 Timetablr Node.js/Java Communication Module');
console.log('=====================================================');

console.log('Socket.IO version: ' + require('socket.io').version);

javaServer.on('listening', function () {
    console.log('Server is listening on ' + javaPort);
});

javaServer.on('error', function (e) {
    console.log('Server error: ' + e.code);
});

javaServer.on('close', function () {
    console.log('Server closed');
});

javaServer.on('connection', function (javaSocket) {
    var clientAddress = javaSocket.address().address + ':' + javaSocket.address().port;
    console.log('Java ' + clientAddress + ' connected');

    var firstDataListenner = function (data) {
            console.log('Received namespace from java: ' + data);
            console.log(data);
            javaSocket.removeListener('data', firstDataListenner);
            createNamespace(data, javaSocket);
    }

    javaSocket.on('data', firstDataListenner);

    javaSocket.on('close', function() {
            console.log('Java ' + clientAddress + ' disconnected');
    });
});

javaServer.listen(javaPort);

function createNamespace(namespaceName, javaSocket) {
    var browserConnectionListenner = function (browserSocket) {
            console.log('Browser Connected');
            var javaSocketDataListenner = function(data) {
                    console.log('Data received from java socket and sent to browser: ' + data);
                    browserSocket.emit('m', data + '\r\n');
            }

            var javaSocketClosedListenner = function() {
                    console.log('The java socket that was providing data has been closed, removing namespace');
                    browserSocket.disconnect();
                    browserServer.of('/' + namespaceName).removeListener('connection', browserConnectionListenner);
                    javaSocket.removeListener('data', javaSocketDataListenner);
                    javaSocket.removeListener('close', javaSocketClosedListenner);
            }

            javaSocket.on('close', javaSocketClosedListenner);
            javaSocket.on('data', javaSocketDataListenner);

            browserSocket.on('disconnect', function () {
                    console.log('Browser Disconnected');
                    javaSocket.removeListener('data', javaSocketDataListenner);
                    javaSocket.removeListener('close', javaSocketClosedListenner);
            });
    }

    var namespace = browserServer.of('/' + namespaceName).on('connection', browserConnectionListenner);
} 
```

在此先感谢，这是一个棘手的问题

# android - 切换本地语言时，android辅助功能服务描述不会改变

> ID：12651422
> 
> 赞同：0
> 
> 时间：2012-09-29T09:08:20.240
> 
> 标签：android, accessibility

我在 android 上创建了一个无障碍服务，在 manifest.xml 文件中我用元数据声明了该服务，并且资源标记引用了一个包含该项目的 config.xml 文件`android:description="@string/accessibility_service_description"`然后在值目录中我有两个名为accessibility_service_description 的字符串中文和英文。我期望的是当我切换语言时，描述内容会改变。但是，当我从英文切换到中文时，描述是一样的。从中文切换时也会出现同样的问题。问题是当我安装应用程序时，描述内容将与当时的语言相同。所以我不认为这是字符串的问题，还有什么我需要知道的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:51:36.753

你做的一切都是正确的。这是在 Android 4.1 (Jelly Bean) 中修复的框架错误。

# java - 将鼠标侦听器添加到 JTextPane 中插入的 JLabel/JButton

> ID：12651426
> 
> 赞同：5
> 
> 时间：2012-09-29T09:09:06.767
> 
> 标签：java, swing, jtextpane, jeditorpane, mouselistener

我有一个问题，当我尝试将鼠标侦听器添加到 JTextPane 中的 JLabel 或 JButton 时，我收到错误“无法通过调用转换转换为 Mouselistener”。我更希望将组件放在 JEditorPane 中。我还听说可以使用 HyperlinkEvent。

基本上我想要一个可以在 JEditorPane(preffered)/JTextPane 中右击/左击的组件。任何帮助，将不胜感激

现在它工作（排序）它只接收右键单击，我不需要绘制按钮边缘。我可以在按钮的文本下划线吗？

示例代码如下...

```
import java.awt.*;
import javax.swing.*;
import java.awt.Color;
import javax.swing.JTextPane;
import javax.swing.JButton;
import java.applet.*;
import java.awt.event.MouseAdapter; 
import java.awt.event.MouseEvent; 

public class jlabeltest extends Applet {

    public void init() {

        jlabeltest editorPaneExample = new jlabeltest();
        editorPaneExample.setSize(550, 300);
//      editorPaneExample.setText("tutorialData.com");
        editorPaneExample.setVisible(true);
    }

    public jlabeltest() {

        JTextPane editorPane = new JTextPane();
        editorPane.setSelectedTextColor(Color.red);
        editorPane.setText("<p color='#FF0000'>Cool!</p>");
        InlineB label = new InlineB("JLabel");  
        label.setAlignmentY(0.85f); 

        label.addMouseListener(new MouseAdapter()   {   

        public void mouseReleased(MouseEvent e)   
        {   
        if (e.isPopupTrigger())   
        {   
            JOptionPane.showMessageDialog(null,"Hello!");
            // do your work here   
        }   
    }   
});  
        editorPane.insertComponent(label); 
        this.add(editorPane); 
    }
} 
```

内联B.java

```
import javax.swing.JButton;

    public class InlineB extends JButton    {

        public InlineB( String caption )    {

            super( caption );
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T12:22:57.333

我不确定你想要什么问题无处不在。

但是看起来太下划线了一个`JButton`简单的用HTML设置按钮的文本*标签：*

 *```
//added <u></u> to underlone button
InlineB label = new InlineB("<html><u>JLabel</u></html>"); 
```

至于左键单击，在您的 if 语句中添加一个检查`MouseEvent.BUTTON1`or `SwingUtilities.isLeftMouseButton(MouseEvent me)`：

```
//added check for MouseEvent.BUTTON1 which is left click
if (e.isPopupTrigger() || e.getButton() == MouseEvent.BUTTON1) {
} 
```

不要在类或实例上绘制`JButton`简单调用的边界（我在类中做了）：`setBorder(null);``InlineB``InlineB`

```
 public InlineB(String caption) {
    super(caption);
    setBorder(null);//set border to nothing
} 
```

我还看到您没有设置的内容类型`JTextPane`，您应该：

```
 //set content as html
    editorPane.setContentType("text/html"); 
```

我做了一个小例子，虽然我没有使用 Applet，但它很容易移植：

![在此处输入图像描述](../Images/f03be4ce9ea2823bc75a4fcf1c97bcfe.png)

```
import java.awt.Color;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class Test {

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        initComponents(frame);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {
        JTextPane editorPane = new JTextPane();
        editorPane.setSelectedTextColor(Color.red);

        //set content as html
        editorPane.setContentType("text/html");
        editorPane.setText("<p color='#FF0000'>Cool!</p>");

        //added <u></u> to underlone button
        InlineB label = new InlineB("<html><u>JLabel</u></html>");

        label.setAlignmentY(0.85f);

        label.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseReleased(MouseEvent e) {
                //added check for MouseEvent.BUTTON1 which is left click
                if (e.isPopupTrigger() || e.getButton() == MouseEvent.BUTTON1) {
                    JOptionPane.showMessageDialog(null, "Hello!");
                    // do your work here   
                }
            }
        });

        editorPane.insertComponent(label);
        frame.getContentPane().add(editorPane);
    }
}

class InlineB extends JButton {

    public InlineB(String caption) {
        super(caption);
        setBorder(null);//set border to nothing
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T09:32:28.393

> 我有一个问题，当我尝试将鼠标侦听器添加到 JTextPane 中的 JLabel 或 JButton 时，出现错误“无法通过调用转换转换为 Mouselistener”。

~~您传递给 addMouseListener() 的对象实现了 MouseListener 接口。正确的？~~（刚刚看到代码示例。鼠标适配器似乎是正确的）。
你现在说*Now it works (sortof)*。这是否意味着您已纠正该错误？

顺便说一句，如果解决了问题并且您有后续问题，并且社区可以重复使用它们，那么我建议打开一个单独的问题：[https ://meta.stackexchange.com/questions/48345/what-is-the-etiquette -为了改变问题的实质](https://meta.stackexchange.com/questions/48345/what-is-the-etiquette-for-changing-the-substance-of-a-question)

> 我更希望将组件放在 JEditorPane 中。

我猜你的意思是你正在听的组件。无论如何，我不确定[JEditorPane](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JEditorPane.html)是否打算用作其他组件的容器。

> 我还听说可以使用 HyperlinkEvent。

[HyperLinkEvent](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/event/HyperlinkEvent.html)用于 ENTERED、EXITED 和 ACTIVATED 事件类型。您打算处理超链接事件或[鼠标事件](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseEvent.html)？

> 基本上我想要一个可以在 JEditorPane(preffered)/JTextPane 中右击/左击的组件。任何帮助，将不胜感激

我建议下次先给出问题的范围/背景。我猜你的意思是你想要一些东西（你能更具体吗？）在一个可以点击的文本窗格之上。无论如何，我很惊讶您打算以这种方式使用 JEditorPane。*

# asp.net - 如何处理几乎相同的枚举？

> ID：12651431
> 
> 赞同：2
> 
> 时间：2012-09-29T09:09:57.113
> 
> 标签：asp.net, enums, refactoring

我需要在几个类中定义**枚举**来表示每个类的可用操作。. 现在我想知道解决这个问题的最佳方法是什么？

1）创建单独的枚举

```
public enum Foo {Insert, Update, Delete , Select };
public enum Bar {Insert, Select }; 
```

`enum`2）或对所有这些都使用一般

```
public enum FooBar {Insert, Update, Delete , Select}; 
```

编辑：我想在类方法参数中使用这个枚举

```
public void MethodOne(Foo action){ ...} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:26:13.753

答案**应该来自你的领域——无处不在的语言**

但是，我认为如果你为每个类实现一个新的枚举，你会遇到麻烦，这种方法很容易出错，并且会让你的开发人员感到困惑。现在想象一下将来必须维护您的代码的可怜人......

如果您坚持使用枚举，我认为最好创建一个名为：的单个枚举`Actions`并在您的应用程序中一致地使用它

如果您想要更优雅的解决方案，我建议您考虑[状态模式](http://www.dofactory.com/Patterns/PatternState.aspx#_self1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:44:51.690

您可以使用继承来定义您的枚举 - 至少在某种程度上。

试试这个：

```
public class Bar
{
    public static readonly int Insert = 1;
    public static readonly int Select = 2;
}

public class Foo : Bar
{
    public static readonly int Update = 3;
    public static readonly int Delete = 4;
} 
```

您仍然可以使用 enum`Bar.Insert`或`Foo.Select`or之类的代码`Foo.Delete`。

这有帮助吗？

# eclipse - Eclipse中的groovy列表初始化缩进

> ID：12651437
> 
> 赞同：2
> 
> 时间：2012-09-29T09:10:33.697
> 
> 标签：eclipse, groovy

当我使用自动代码格式化时，我对 Eclipse 如何缩进 List 初始化语句有疑问。

问题是如果列表足够长，Eclipse 会折叠每个值：因此：

```
def list = ["aaa", "bbb", "ccc", "ddd", "eee" ] 
```

变成：

```
def list = [
    "aaa",
    "bbb",
    "ccc",
    "ddd",
    "eee"
] 
```

据我了解，groovy 插件继承了 Java 样式的大部分格式，但我发现在 Java 格式化程序首选项中没有控制这种折叠的选项。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:32:04.870

时机不错。我昨天刚刚修复了这个错误。

见[https://jira.codehaus.org/browse/GRECLIPSE-1488](https://jira.codehaus.org/browse/GRECLIPSE-1488)

如果您安装 groovy-eclipse 的最新快照版本，然后转到 Preferences -> Groovy -> Formatter，则会有一个名为“Long list length”的新选项。将值更改为更大的值，列表将不会被包装，直到它们至少与框中的值一样长。

请参阅此处的说明以安装快照构建： http: [//groovy.codehaus.org/Eclipse+Plugin#EclipsePlugin-DevelopmentBuilds](http://groovy.codehaus.org/Eclipse+Plugin#EclipsePlugin-DevelopmentBuilds)

# android - Android，如何从画布中获取像素颜色？

> ID：12651440
> 
> 赞同：2
> 
> 时间：2012-09-29T09:10:54.537
> 
> 标签：android, colors, android-canvas, draw, pixels

我有这样的代码：

```
// ...

public class MyImageView extends ImageView

    public MyImageView(Context context, String value /* some other params */) {
        super(context);

        // some predefines
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        // some preparations
        try {
            // here I call third party lib like:
            someObj.draw(canvas);

            // HERE I WANT TO CHANGE COLOR OF SOME PIXELS ACCORDING TO THEIR CURRENT COLOR
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

代替 UPCASE 字母注释，我想在第三方库绘制后根据它们当前的颜色更改画布上某些像素的颜色。我可以使用`canvas.drawPoint(x, y, paint)`设置像素颜色的方法，但我怎样才能获得某些像素的颜色`(x,y)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T14:34:08.673

我可能在这里有一些东西（未经测试）：

```
public static Bitmap getBitmap(Canvas canvas) {
    // mBitmap is a private value inside Canvas.
    // time for some dirty reflection:
    try {
        java.lang.reflect.Field field = Canvas.class.getDeclaredField("mBitmap");
        field.setAccessible(true);
        return (Bitmap)field.get(canvas);
    }
    catch (Throwable t) {
        return null;
    }
} 
```

然后，您可以通过以下方式访问像素：

```
Bitmap map = getBitmap(canvas);
if (map != null) {
    int rgb = map.getPixel(100,100);
    int red = android.graphics.Color.red(rgb);
    ...
} 
```

# c++ - 尝试退出 C++11 标准库时，调试器会更深入

> ID：12651441
> 
> 赞同：10
> 
> 时间：2012-09-29T09:10:57.297
> 
> 标签：c++, debugging, xcode4, c++11, llvm

我在 Xcode 4.5 中使用（Apple）LLVM 4.1（但我在早期的测试版中看到了同样的东西）。我有它针对 C++11 并且正在使用 libc++（新的，启用 C++11，LLVM 版本的 std 库）。

在调试版本中，如果我尝试跳过调用 std 库函数（例如 std::vector 构造函数）的代码，则调试器将在 std lib 实现中停止，如果我尝试将其跨出更深一步！在我回到自己的代码之前可能需要多次（有时 10 次或更多）步出（而且我一开始就不想步入）。

视图中似乎总是有一个 _LIBCPP_DEBUG 宏以及 _LIBCPP_INLINE_VISIBILITY - 但这些似乎无处不在，所以我不确定它是否相关。不过，这似乎与内联的工作方式有关。

我无法找到任何其他人遇到此问题的示例 - 但是，对我而言，它已经在多个测试版中持续存在 - 进入发布 - 并通过完全重新安装操作系统。

还有其他人*看过*这个吗？- 但最好还是知道发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T21:08:58.223

Xcode 4.5 中的 lldb 不处理内联函数的单步执行。libc++ 标准库有许多总是内联的函数，即使是在 -O0 下构建的，这也是一个问题。看起来 Jim Ingham 大约在一个月前就开始了这个工作，例如，请参阅第一个补丁[http://llvm.org/viewvc/llvm-project?view=rev&revision=163044](http://llvm.org/viewvc/llvm-project?view=rev&revision=163044)以及接下来一两周内的几个后续补丁，但当然，这些还没有在 lldb 的发布版本中。[您可以从公共站点http://lldb.llvm.org/](http://lldb.llvm.org/)构建和使用 lldb 的命令行版本（具体参见[http://lldb.llvm.org/build.html](http://lldb.llvm.org/build.html)），唯一棘手的地方是请记住遵循 lldb/docs/code-signing.txt 中的代码签名说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:54:34.407

我也看到了这一点，不仅是 libc++，还有 libstdc++（GNU C++ 标准库，由 GCC 和 C++03 模式中的 clang 使用）。我一直认为这是由于内联，我猜有时也会发生在调试版本中。

# web - DuckDuckGo（和其他）业力小部件问题

> ID：12651442
> 
> 赞同：0
> 
> 时间：2012-09-29T09:11:01.680
> 
> 标签：web, widget, duckduckgo-api

有一天，我在浏览时注意到了“DuckDuckGo”业力小部件，并决定玩一个。

它的目的是从不同的网站收集你的“业力”并显示一个像这样的小盒子：

![ddg 业力小部件](../Images/f54b402babf13066954fa9788a53ffec.png)

我在我的网站上尝试如下，它提供了上面的图片。

```
<div id="footer">
<script type="text/javascript">
    ddg_k_title = '';
    ddg_k_bold_karma = '1';
    ddg_k_link_karma = '0';
    ddg_k_link_label = '0';
    ddg_k_show_username = '0';
    ddg_k_show_service_name = '0';
    ddg_k_paren_karma = '0';
    ddg_k_vertical_spacing = '5';
    ddg_k_column_width = '150';
    ddg_k_padding = '5';
    ddg_k_font_size = '9pt';
    ddg_k_font_color = 'black';
    ddg_k_font_family = '';
    ddg_k_border = '1px solid #AAA';
</script>
<div id="holder" style="position: relative; height: 76px; width: 50%; margin: 0px auto">
    <div id="ddg_k" style="width: 150px; height: 47px; font-size: 9pt; background: white;
        padding: 5px; text-align: left; float: left">
    </div>
    <script type="text/javascript" src="http://karma.duckduckgo.com/k.js?t=1,5&u=Evgeny,evgenyr"></script> 
```

但是，有些问题我找不到答案：

1.  我找不到任何文档。k.js 的参数我必须通过反复试验才能弄清楚。任何人都可以帮忙吗？

2.  当我将小部件添加到我的网站时，它仍然显示当天的业力 - 我知道从那以后这些值已经改变。我错过了什么？

3.  最后，如果有人可以建议我可以在网站上轻松使用的类似小部件，那将得到适当的支持！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:03:28.490

尽管在谷歌上搜索了很多，但我也没有找到 karma 小部件的任何文档。

看来您已经查看了脚本，但我仍然会在此处记录一些发现。

查看生成的`k.js`文件，您可以看到您使用查询参数`t`和指定要在小部件中显示的站点`u`：

[http://karma.duckduckgo.com/k.js?t=1,5&u=Evgeny,evgenyr](http://karma.duckduckgo.com/k.js?t=1,5&u=Evgeny,evgenyr)

这意味着对于由`1`用户名标识的站点是`Evgeny`，对于具有 id`5`的站点，用户名是`evgenyr`。如果您查看脚本，您可以看到它是在服务器端生成的，并且已经在脚本中检索到了业力点。

标识符如下（直接来自脚本@ 2012-10-09）：

```
Id  Site
--------------------
1   Hacker News
2   reddit
3   digg
4   Mixx
5   LinkedIn
6   Twitter
7   StumbleUpon
8   delicious
9   YouTube
A   Dailymotion
B   Plurk
C   identi.ca
D   Stack Overflow
E   MySpace
F   GitHub
G   Facebook 
```

通过查看代码，您还可以通过将参数（开始`ddg_k_`）作为 javascript 代码嵌入到您的站点来自定义小部件的外观。这些参数几乎是不言自明的。

该脚本还需要一个元素，该元素的 id 是`ddg_k`它放置小部件的位置。

至于为什么自从添加小部件后值没有更新；我只能提出一个有根据的猜测，即正在进行一些缓存。至少[在这里](http://duck.co/topic/my-karma-bug)最后一条消息提到了一些延迟。[此外， duckduckgo 论坛](http://duck.co/topic/karma-widget-now-displays-facebook-fans)上也提到了缓存问题。也可能是因为检索点的服务器端组件对于站点而言已过时。

关于这个主题的信息肯定非常稀缺。:-)

# android - 用户向服务器请求时如何查找路由信息

> ID：12651443
> 
> 赞同：0
> 
> 时间：2012-09-29T09:11:08.500
> 
> 标签：android, ip

当用户请求服务器时，我想获取所有路由信息。当用户打开我的应用程序然后用户输入域名或IP地址然后点击跟踪路由然后它显示到目的地的路由甚至关于源到目的地之间的所有跃点的信息。那么如何实现路径跟踪及其之间的路径设备信息，如 IP 地址、主机名、生存时间、周转时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:40:21.673

实现这一目标的正常方法是发送[TTL（生存时间）为 1 的](https://en.wikipedia.org/wiki/Time_to_live)[ICMP](https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)包并增加它们，直到达到所需的 IP 地址。

TTL 在每一跳都减少。因此，TTL 为零的路由器将回答包裹无法路由到您的目的地。有了这个小技巧，所有的跟踪路由都可以工作。

要获取主机名，您需要对该 IP 进行反向查找。在 linux 中，这只需使用`dig -x [ip-address]`. 当然，这对您没有帮助，但您可能会找到更详细的帮助。从技术上讲，这适用于[RDNS（反向 DNS）](https://en.wikipedia.org/wiki/Reverse_DNS_lookup)，您只需解析一个特殊域即可获取域名（如果已设置）。

要获得[RTT（往返时间）](https://en.wikipedia.org/wiki/Round-trip_delay_time)，您只需测量获得 icmp 响应的时间并将其除以 2。

# ruby - 测试红宝石脚本

> ID：12651444
> 
> 赞同：3
> 
> 时间：2012-09-29T09:11:20.013
> 
> 标签：ruby, unit-testing, cucumber

我正在创建一个 Ruby（不是 Rails）脚本，我必须使用标准 Rails 单元测试和 Cucumber 进行测试。我不能使用 RSpec。

那么如何使用 Cucumber 和 Rails Test::Unit 测试 ruby​​ 脚本？是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T08:55:54.053

在这里，为了方便起见，我创建了一个包含 Rakefile 的完整示例。文件结构是这样的：

```
./notepad.rb
./Rakefile
./test
./test/test_notepad.rb
./features
./features/add_note.feature
./features/step_definitions
./features/step_definitions/add_note_step.rb 
```

事实上，这个例子甚至没有使用类，所以你可以用它来测试典型的“脚本”。文件内容在这里： http: [//pastebin.com/sJUP7VSA](http://pastebin.com/sJUP7VSA)

所以最后你可以这样做：

```
$ rake test
Finished tests in 0.001368s, 730.9942 tests/s, 1461.9883 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips

$ rake cucumber
1 scenario (1 passed)
2 steps (2 passed)
0m0.002s 
```

干杯，菲利普

# php - 如何使用 Oracle 驱动程序在 Codeigniter 中执行存储过程？

> ID：12651446
> 
> 赞同：1
> 
> 时间：2012-09-29T09:11:37.500
> 
> 标签：php, oracle, codeigniter

如何使用 Oracle 驱动程序在 Codeigniter 中执行存储过程？我有 Oracle 10g 和 Codeigniter 2.1.2 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:22:06.263

我不认为你可以使用 CodeIgniter 来做到这一点，因为它特定于 Oracle DB。有两种方法可以解决此问题。

1.  您总是可以回退并使用纯 PHP 来完成此类任务。
2.  您可以尝试在`$this->db->call_function();` [此处的 CI 用户指南中运行带有描述的命令](http://codeigniter.com/user_guide/database/call_function.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T11:15:00.450

参考建议使用`$this->db->call_function('an_oracle_function()');`它的答案不适用于 Oracle 11g。尝试和测试。我认为 Vlakarados 提到的更好的选择是使用纯 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T02:05:23.893

在你的模型中试试这个，这对我有用：

```
if (!$this->db) {
  $m = oci_error();
  trigger_error(htmlentities($m['message']), E_USER_ERROR);
}

$stid = oci_parse($this->db->conn_id, 'BEGIN PROCEDURE_NAME(:PARAMETER_1,:PARAMETER_2,:OUT_MESSAGE); end;');

oci_bind_by_name($stid, ':PARAMAETER_1',  $PARAMAETER_1,200);
oci_bind_by_name($stid, ':PARAMETER_2',  $PARAMETER_2,200);
oci_bind_by_name($stid, ':OUT_MESSAGE',  $OUT_MESSAGE ,100, SQLT_CHR);

if(oci_execute($stid)){
  $results = $OUT_MESSAGE;
}
oci_free_statement($stid);
oci_close($this->db->conn_id);

return  $results; 
```

# ios - Tesseract 3.01 和 Pocket-OCR 构建问题

> ID：12651450
> 
> 赞同：1
> 
> 时间：2012-09-29T09:12:23.100
> 
> 标签：ios, ocr, tesseract

我在尝试构建[Pocket-OCR时遇到了以下问题](https://github.com/AalokParikh/Pocket-OCR)

> 架构 i386 的未定义符号：
> “tesseract::TessBaseAPI::SetVariable(char const*, char const*)”，引用自：-[OCRDisplayViewController viewDidLoad] in OCRDisplayViewController.o
> "tesseract::TessBaseAPI::TesseractRect(unsigned char const* , int, int, int, int, int, int)”，引用自：-[OCRDisplayViewController readAndProcessImage:] in OCRDisplayViewController.o -[OCRDisplayViewController threadedReadAndProcessImage:] in OCRDisplayViewController.o
> "tesseract::TessBaseAPI::AllWordConfidences()"，引用自：-[OCRDisplayViewController viewDidLoad] in OCRDisplayViewController.o "tesseract::TessBaseAPI::End()"，引用自：-[OCRDisplayViewController dealloc] in OCRDisplayViewController.o "tesseract ::TessBaseAPI::Init(char const*, char const*, tesseract::OcrEngineMode, char* *, int, GenericVector const* , GenericVector const*, bool)”，引用自：tesseract::TessBaseAPI::Init(char const* , char const*) 在 OCRDisplayViewController.o "tesseract::TessBaseAPI::TessBaseAPI()"，引用自：-[OCRDisplayViewController viewDidLoad] in OCRDisplayViewController.o ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我应该怎么做才能解决这个问题？

我在 goole 上搜索答案，但没有得到太多帮助来解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:49:14.833

您可以在 SO 上参考[此解决方案](https://stackoverflow.com/questions/12849517/c-linking-problems-seems-like-i-cant-link-against-standard-c-stuff)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:09:49.500

我得到了解决方案，还得到了新的链接和示例，它们运行良好，并且已经完成了我的演示项目

愿这些链接对其他想要使用它的人有用。

[示例一](https://github.com/AalokParikh/Tesseract-iPhone-Demo)

现在得到了我能够开发我的演示项目的确切链接。

[我使用的示例](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:28:05.337

虽然答案已经被接受，但我找到了适合我的解决方案：

显然 xCode 不会自动将框架添加到“Link Binary With Libraries”和“Copy Bundle Resources”列表中。

您可以通过单击您的项目名称（蓝色图标）找到它们，然后转到“构建阶段”并将它们添加到两个列表中。然后从“必需”更改为“可选”。两者都可以在屏幕截图中看到。

![在此处输入图像描述](../Images/91eaf9c84f2ea87556827839089c2b14.png)

# jquery - 如何将逻辑更改为 jQuery UI 对话框？

> ID：12651451
> 
> 赞同：-1
> 
> 时间：2012-09-29T09:12:46.020
> 
> 标签：jquery, user-interface

这是原始代码（它实际上不是真正的代码，希望你们能明白我的意思）：

```
function whichButton(a,b){
    if(confirm('I dont wanna compare them?')){
        return "yes";
    }
    else{
        return "no";
    }
} 
```

我需要做的是将此逻辑更改为可以替换`confirm`in navigator 的 jQuery UI。

我想要的是遵循与上面相同的逻辑（`myConfirm()`是我用 jQuery UI 对话框密封它的函数）。

```
function whichButton(){
    myConfirm('I dont wanna compare them?',function(yes){
        if(yes){
            return "yes";
        }
        else{
            return "no";
        }
    });
} 
```

我只希望原始逻辑在使用 jQuery UI 对话框时起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:23:31.730

您可以使用以下示例：

[http://jqueryui.com/demos/dialog/#modal-confirmation](http://jqueryui.com/demos/dialog/#modal-confirmation)

```
$( "#dialog:ui-dialog" ).dialog( "destroy" );

$( "#dialog-confirm" ).dialog({
    resizable: false,
    height:140,
    modal: true,
    buttons: {
        "Yes": function() {
            $( this ).dialog( "close" );
            doCompare(a, b);
        },
        Cancel: function() {
            $( this ).dialog( "close" );
        }
    }
});

function doCompare(a, b) {
    return a>b?a:b;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:19:07.420

我认为您想比较两个变量，如果您在确认对话框上单击“是”，该函数将返回“是”，否则您将获得比较结果。

```
function maxNumber(a,b){
   myConfirm('I dont wanna compare them?',function(yes){
    if(yes){
        return "yes";
    }
    else{
     return a>b?a:b;
    }
  });   
} 
```

# asp.net - 一个可以支持asp.net web forms标签的可视化网页编辑工具

> ID：12651454
> 
> 赞同：5
> 
> 时间：2012-09-29T09:13:28.333
> 
> 标签：asp.net, html, editor, wysiwyg, html-editor

我一直在努力寻找可以让我直观地编辑已经设计好的 asp.net 网页表单页面的网页编辑器。在整个期间，我使用 Dreamweaver（现在我正在使用 Dreamweaver CS4）进行页面设计，并将我的设计转移到 Visual Studio 2010 以使用该模板制作 asp.net 页面。Visual Studio 中 Web 表单的表格编辑功能真的很烦人，通过尝试更改列宽，表格结构已损坏，VS 决定更改该表格上的所有内容（将其与 Dreamweaver 进行比较，后者仅更改其边界所在的那两列更改而不是该表的整个列）。

不幸的是，Dreamweaver 无法识别 asp.net 标记语法，因此无法在设计模式下正确呈现它们。我想知道您是否知道任何工具（最好是非 Microsoft 工具），它可以让我在其中打开一个 asp.net Web 表单并以可视方式编辑页面元素，而不会产生 Visual Studio 对我的页面设计造成的副作用。（我使用 HTML 表格来排列我的页面元素。）

顺便说一句，我查看了此链接：

[http://en.wikipedia.org/wiki/List_of_HTML_editors](http://en.wikipedia.org/wiki/List_of_HTML_editors)

但是打开所有可视化编辑器网页后，我没有找到任何支持 ASP.net 标签的工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:38:43.087

尽管您在 Microsoft 平台上工作但不想使用 Microsoft 编辑器，是否有特殊原因？

MS 提供了两个免费工具，可以帮助您：

*   [Visual Studio 速成版](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)
*   [网络矩阵](http://www.microsoft.com/web/webmatrix/)

此外，我强烈建议使用 CSS 类来设置 ASP.NET 生成的表/列的宽度。（而不是为那些 ASP.NET 控件使用样式属性。）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:01:01.707

你可以使用`AjaxControlToolkit.HTMLEditor.Editor`. 将 DLL 放入您的项目中，然后放入页面中，然后您就可以进行编辑了。创建一些逻辑以在某些权限下查看和编辑，您的页面将具有可编辑的内容。

# iphone - UIActionSheet 高度在 3.5 英寸设备上为 4 英寸

> ID：12651460
> 
> 赞同：2
> 
> 时间：2012-09-29T09:14:25.917
> 
> 标签：iphone, ios, ios6, uiactionsheet

我目前正在更新我的应用程序以支持 4 英寸 iPhone 5 屏幕。在那次尝试中，我被困在打开 UIActionSheet 的地方，它工作正常并显示 iPhone 5 4 英寸屏幕上的所有按钮，但在 3.5 英寸设备上，最后一个按钮被切断。这表明 UIActionSheet 无法识别较小的屏幕。

这就是我在我的代码中所做的。任何想法？

```
UIActionSheet *popupQuery;
// Code to initialize UIActionSheet

popupQuery.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
[popupQuery showInView:[UIApplication sharedApplication].keyWindow];
[popupQuery release]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:51:50.260

Check that the option 'Full Screen at Launch' is checked on the Window in you MainWindow.xib.

I had a similar problem and others when updating for iPhone 5 screen. Apparently the 'Simulated metrics' of Window will be the actual metrics when launching (provided you have not checked 'Full Screen at Launch').

Apple actually has a Note about it in the [UIWindow Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html):

> ... If you choose to create a window in Interface Builder, be sure to select the Full Screen at Launch option in the Attributes inspector so that the window is sized appropriately for the current device. ...

# php - 在php中爆炸数组问题

> ID：12651463
> 
> 赞同：0
> 
> 时间：2012-09-29T09:14:52.833
> 
> 标签：php

我在上面有这段代码，我用它来内爆一些变量。问题是我需要为我创建相同的`$hostess_name[]`东西 `$hostess_id_selected[]`。我不知道我在做什么错。我需要以与我相同的方式内爆它`$hostess_id_selected1`

```
 foreach($hostess_id as $val) {
   $hostess_id_selected[] = $val;
   $sqlnomehostess="SELECT nome_hostess FROM hostess where id='$val'";
   $resultnomehostess=mysql_query($sqlnomehostess)or die(mysql_error());
   $hostess_name= array();

   while ($row=mysql_fetch_array($resultnomehostess,MYSQL_ASSOC)) {
     $hostess_name[] = $row['nome_hostess'];
   }
 }

 $hostess_id_selected1 = implode("-",$hostess_id_selected); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:18:43.477

你有 $hostess_name= array(); 循环内。把它移到上面

**编辑：**

一些技巧：

```
 foreach($hostess_id as $val) {
   $hostess_id_selected[] = $val;
 // this is pointless, i mean - you are recreating $hostess_id 
```

顺便说一句，只是一个改进的小技巧 - 你可以使用单个查询，而不是运行许多 SQL 查询：

```
$sql = "SELECT GROUP_CONTACT(`nome_hostess` SEPARATOR '-') AS name_list 
        FROM `hostess` 
        WHERE id IN (".implode(',',$hostess_id).")"; 
```

如果 $hostess_id 中的项目不一定是数字：

```
$sql_ids = array();
foreach($hostess_id as $id)
    $sql_ids[] = mysql_real_escape_string($id);
$sql = "SELECT GROUP_CONTACT(`nome_hostess` SEPARATOR '-') AS name_list 
        FROM `hostess` 
        WHERE id IN (".implode(',',$sql_ids).")"; 
```

在那之后：

sql 查询返回 1 行，其中包含名为“name_list”的列，其中包含用“-”连接的名称。

如果你想保持 id 和 name 的顺序 - 你应该这样做：

```
$sql = "SELECT 
             GROUP_CONTACT(`nome_hostess` SEPARATOR '-') AS name_list,
             GROUP_CONTACT(`id` SEPARATOR '-') AS id_list 
        FROM `hostess` 
        WHERE id IN (".implode(',',$hostess_id).")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:02:21.323

implode 是 php 的一个基本功能。它总是完美无缺。只需检查您的数组 $hostess_id_selected，它会返回什么。我想它会对你有所帮助。

# php - 将 php 会话移动到 redis。是否可以不丢失现有的会话数据？

> ID：12651464
> 
> 赞同：4
> 
> 时间：2012-09-29T09:15:18.980
> 
> 标签：php, apache, redis

我们正在考虑将我们的 php 会话数据移动到 redis。

设置看起来很简单。只需在 php.ini 中设置以下内容并重新启动 apache。应该都设置好了：

```
session.save_handler = redis
session.save_path = "tcp://host1:6379" 
```

如果可能的话，我希望我们的用户不要注意到迁移。是否可以在不丢失任何现有会话数据的情况下将会话数据移动到 redis？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T15:01:15.163

目前没有针对您所要求的开箱即用的解决方案，但为此任务编写自定义脚本实际上相当简单。

本质上，phpredis 将会话数据以字符串形式存储在 redis 中，键名格式如下：`PHPREDIS_SESSION:$sessionid`，其中`$sessionid`是会话的 php id，可通过 检索`session_id()`。会话数据被“编码”为 php-session 序列化变量（与常见的 php 序列化/反序列化格式略有不同，请参阅[session_encode](http://php.net/manual/en/function.session-encode.php)）。

既然我们知道了这一点，那么迁移存储在文件中的会话数据有两种可能性：

*   遍历每个会话文件（实际路径`session.save_path`在您的 php.ini 中设置），读取数据并将其写回 redis。文件本身存储会话数据的 php-session 序列化表示，这意味着内容可以直接复制到 redis，并且文件名具有以下模式：`sess_$sessionid`$sessionid 是，你猜对了，id 你'将要用于您的 redis 密钥。

*   通过暂时保留基于文件的会话来逐步迁移数据，但在使用会话数据时实时填充 redis，直到存储在 redis 中的会话数量看起来足以进行切换。这可以通过执行以下操作来实现：

    `$redis->set("PHPREDIS_SESSION:".session_id(), session_encode());`

    就在每个脚本结束之前。此方法可能会增加一点开销，具体取决于会话中的数据量以及 session_encode 的工作方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T10:52:57.350

刚刚在 bash 中创建了这样一个脚本并添加到我的仓库中。

[https://github.com/renasboy/php-redis-migrate-sessions](https://github.com/renasboy/php-redis-migrate-sessions)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T12:50:52.047

可能，是的，容易，不是那么多。

AFAIK，phpredis 没有迁移脚本，因此您必须自己编写一个。您可能想查看[Cm_RedisSession 的脚本](https://github.com/colinmollenhour/Cm_RedisSession/blob/master/migrateSessions.php)，该脚本对该 redis 模块执行类似操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-17T11:40:23.927

如果你使用 symfony，你可以使用如下命令：

**yml 配置：**

```
parameters:
    redis_address: "localhost"
    project_name : "ACME_"

snc_redis:
    clients:
        default:
            type: predis
            alias: default
            dsn: redis://%redis_address%
            logging: '%kernel.debug%'
        session:
            type: predis
            alias: session
            dsn: redis://%redis_address%/1
            logging: true
    session:
        client: session
        prefix: '%project_name%PHPREDIS_SESSION'
        ttl: 7776000 # 90 days 
```

**symfony 命令：**

```
<?php

// Command:  app/console acme:migrate:session:files:to:redis --env=dev
namespace Acme\AppBundle\Command;

use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Finder\Finder;

class MigrateSessionFilesToRedisCommand extends ContainerAwareCommand {

protected $env;

protected function configure() {
    $this->setName('acme:migrate:session:files:to:redis')
        ->setDescription("Migrate Session Files To Redis")
        ->setHelp("Migrate Session Files To Redis");
}

protected function execute(InputInterface $input, OutputInterface $output) {

    $sessionPath = realpath( sprintf('%s%s', $this->getContainer()->getParameter('kernel.root_dir'), '/sessions') );
    $prefix      = 'ACME_PHPREDIS_SESSION';

    $redis = $this->getContainer()->get('snc_redis.session');

    $finder = new Finder();
    $finder->files()->in($sessionPath);

    foreach ($finder as $file) {

        $realPath = $file->getRealpath();

        $sessionId = str_replace( 'sess_', '', $file->getRelativePathname() );
        $redis->append( sprintf('%s:%s', $prefix, $sessionId) , file_get_contents( $realPath ) );
    }

} 
```

}

**注意**：将**“ACME”**替换为您的**项目 ID/名称**，并设置存储文件的正确**会话路径。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-04T10:23:20.457

这是我将会话数据导入 redis 的超级简单脚本：

```
#!/bin/bash

export REDISCLI_AUTH=my-supper-strong-password-4-redis-server
TTL=$(( 24 * 3600 ))

for i in sess_*; do
    ex=$(( $(date +%s) - $(stat -c %Y "$i") + $TTL ))
    k="PHPREDIS_SESSION:${i:5}"
    v=$(cat "$i")

    echo "SET $k of len:${#v} EX $ex"
    redis-cli SET "$k" "$v" EX $ex
done 
```

我没有彻底测试它，所以请谨慎使用。

# node.js - 如何在 nodejs 服务器中设置 HTTP Keep-Alive 超时

> ID：12651466
> 
> 赞同：43
> 
> 时间：2012-09-29T09:15:40.060
> 
> 标签：node.js, http-headers, express, keep-alive

我实际上正在对 ExpressJS 服务器进行一些负载测试，我注意到服务器发送的响应包含一个“Connection: Keep-Alive”标头。据我了解，连接将保持打开状态，直到服务器或客户端发送“连接：关闭”标头。

在某些实现中，“Connection: Keep-Alive”标头带有“Keep-Alive”标头，用于设置连接超时和通过此连接发送的最大连续请求数。

例如：“保持活动：超时=15，最大值=100”

有没有办法（是否相关）在 Express 服务器上设置这些参数？

如果没有，你知道 ExpressJS 是如何处理这个问题的吗？

**编辑：** 经过一番调查，我发现[节点标准http库](https://github.com/joyent/node/blob/master/lib/http.js#L1688)中设置了默认超时：

```
socket.setTimeout(2 * 60 * 1000); // 2 minute timeout 
```

为了改变这一点：

```
var http = require('http');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end("Hello World");
}).on('connection', function(socket) {
  socket.setTimeout(10000);
}).listen(3000); 
```

无论如何，对我来说，服务器没有向客户端发送任何关于其超时的提示仍然看起来有点奇怪。

**Edit2：** 感谢 josh3736 的评论。

setSocketKeepAlive 与 HTTP keep-alive 无关。这是一个 TCP 级别的选项，允许您检测连接的另一端是否已消失。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-20T23:28:47.917

对于快递 3：

```
var express = require('express');
var app = express();
var server = app.listen(5001);

server.on('connection', function(socket) {
  console.log("A new connection was made by a client.");
  socket.setTimeout(30 * 1000); 
  // 30 second timeout. Change this as you see fit.
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-07-22T13:59:16.520

要在 express 服务器上设置 keepAliveTimeout，请执行以下操作：

```
var express = require('express');
var app = express();
var server = app.listen(5001);

server.keepAliveTimeout = 30000; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-25T12:11:20.887

对于 Node.js`10.15.2`和带有 express 的更新版本，仅`server.keepAliveTimeout`是不够的。我们还需要配置`server.headersTimeout`比`server.keepAliveTimeout`.

```
server.keepAliveTimeout = 30000; 
// Ensure all inactive connections are terminated by the ALB, by setting this a few seconds higher than the ALB idle timeout
server.headersTimeout = 31000; 
// Ensure the headersTimeout is set higher than the keepAliveTimeout due to this nodejs regression bug: https://github.com/nodejs/node/issues/27363 
```

# javascript - 在 xcode 项目中隐藏 javascript 文件

> ID：12651470
> 
> 赞同：2
> 
> 时间：2012-09-29T09:16:09.320
> 
> 标签：javascript, objective-c, xcode, cocoa

我在我的objective-c/cocoa 项目中使用了javascript。但是编译后发现所有的脚本文件都在 .app 内容中列出。是否可以隐藏脚本或将它们添加到 unix 可执行文件中？

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:28:35.093

创建隐藏的 javascript 文件（以点“.”开头）并在 Bundle Resources 构建阶段复制该文件。

# ios - UINavigationBar 右键太高

> ID：12651478
> 
> 赞同：0
> 
> 时间：2012-09-29T09:16:47.517
> 
> 标签：ios, xcode, cocoa-touch

我正在为 UINavigationBars 和 UIToolbars 使用自定义图像。我遇到的问题是在我的一个使用 UINavigationBar 的视图上，右侧按钮显得太高 ![在此处输入图像描述](../Images/9ac61ad9839f507728c40fb2b302133f.png) 在使用 UIToolbar 的视图上（模态视图，所以没有导航栏）它们看起来很好 ![在此处输入图像描述](../Images/90d721ebcd75d4b23f5b0418f8bdb6a4.png)

什么可能导致按钮太大？我尝试在 IB 中添加按钮并使用代码。然后像这样设置图像

```
UIImage *barButton = [[UIImage imageNamed:@"ButtonBlue"] resizableImageWithCapInsets:UIEdgeInsetsMake(6, 8, 6, 8)];
        [self.connectButton setBackgroundImage:barButton forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:02:39.393

创建一个较小的按钮。您可以在预览中执行此操作 - 调整它的大小。确保你也有@2x 大小。T 无法回忆起这些图像的推荐尺寸——大约是 30 磅左右（搜索一下，你肯定会找到）。

# linux - 没有svn的Linux上的Wget？

> ID：12651482
> 
> 赞同：0
> 
> 时间：2012-09-29T09:16:54.770
> 
> 标签：linux, svn, unix

我正在尝试使用 wget 获取 svn 存储库。我有：

```
wget -m -np http://svn.wikia-code.com/wikia/releases/release-126/ 
```

这不起作用，并且开始拉下上面的所有内容。我只想要发布 126 文件夹及其包含的所有内容。

请问正确的语法是什么？

我找到的解决方案：

wget -r -np [http://svn.wikia-code.com/wikia/releases/release-126/](http://svn.wikia-code.com/wikia/releases/release-126/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T13:24:08.917

You are getting higher-level directories because the `-m` switch for `wget` follows all links. The first link on the directory listing points to the parent directory.

As others have correctly pointed out, you should be checking out the code with `svn co`, or following the project's instructions for acquiring & installing the software.

# css - 适合 CSS 中的 div

> ID：12651488
> 
> 赞同：0
> 
> 时间：2012-09-29T09:17:31.527
> 
> 标签：css

`<div>`大家好，我的菜单栏在不同的浏览器中无法适应我的区域。我检查过 Opera 和 Chrome，它看起来不错，但使用 Explorer 和 Firefox，我的菜单不适合。

我的菜单在这个`<div>`标签中：

```
.page {
     width: 964px;
    margin-left: auto;
    margin-right: auto;
    background-image:url(../images2/images/orta_alan_bg_GOLGE.png);
    background-repeat:repeat-y;
} 
```

这是我的菜单：

```
ul#menu {       
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    text-align: center;       
}

ul#menu li {
    display: inline;
    list-style: none;
    font-family: 'Museo300Regular';
    font-size:17px;
    font-style:normal;        
}
ul#menu li a 
{        
    background-image:url(../../images2/images/menu_bg_normal.jpg); 
    background-repeat: repeat;
    padding: 5px 19px 5px;        
    font-weight: normal;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #FEFEFF;
    border-radius: 4px 4px 0 0;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
      cursor:pointer;          
} 
```

那么为什么它不能与 Explorer 和 Firefox 兼容的问题是什么？

我附上一张图片你可以理解我的意思

![在此处输入图像描述](../Images/0c38a91e5dd4b35e8eba25a649f2e779.png)

这是它可以安装的 Chrome 和 Opera

![在此处输入图像描述](../Images/131c30f82ff7a3cac7274eb64732ed0a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:31:22.110

文本在不同的浏览器中总是会占用不同的空间（甚至在不同计算机上的相同浏览器中）。

因此，如果您希望您的菜单完全适合，您不能将按钮的宽度直接基于其中的文本。要么使所有按钮的宽度相同，要么为每个按钮指定精确的宽度。

或者，使用表格，它可以根据单元格的内容划分单元格之间的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T09:41:29.840

您可以通过重置[您的 CSS 代码](http://meyerweb.com/eric/tools/css/reset/)来实现它。然后用于`ul li`设置列表项的样式。
如果需要，您可以使用条件注释来加载您的 IE 样式表并修复一些错误。

但通常我可以在 li 元素上的所有浏览器中获得 100% 的准确结果，因此证明了这一点。

# node.js - Nodejs 中的依赖注入模型

> ID：12651489
> 
> 赞同：1
> 
> 时间：2012-09-29T09:17:32.027
> 
> 标签：node.js, dependency-injection

将依赖项注入模型的最佳实践是什么？尤其是，如果他们的 getter 是异步的，比如`mongodb.getCollection()`?

关键是一次注入依赖项

```
var model = require('./model')({dep1: foo, dep2: bar}); 
```

并调用所有成员方法，而不必将它们作为参数传递。我也不希望每种方法都以异步 getter 的瀑布开始。

我最终得到了一个专用的`exports`包装器，它代理所有调用并传递异步依赖项。

但是，这会产生很多开销，重复很多，我通常不喜欢它。

```
var Entity = require('./entity');

function findById(id, callback, collection) {
    // ...
    // callback(null, Entity(...));
};

module.exports = function(di) {
    function getCollection(callback) {
        di.database.collection('users', callback);
    };

    return {
        findById: function(id, callback) {
            getCollection(function(err, collection) {
                findById(id, callback, collection);
            });
        },
        // ... more methods, all expecting `collection`
    };
}; 
```

注入依赖项的最佳实践是什么，尤其是那些具有异步 getter 的依赖项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T22:41:20.430

如果您需要支持单元测试，那么像 javascript 这样的动态语言中的依赖注入可能比它的价值更麻烦。请注意，您需要的其他模块几乎都不会使用您在 Java、.NET 和其他静态编译语言中看到的 DI 模式。

如果您想模拟行为以隔离特定的代码单元进行测试，请参阅“sinon”模块[http://sinonjs.org/](http://sinonjs.org/)。它允许您动态地换入/换出拦截器，这些拦截器可以监视方法调用或完全替换它们。在实践中，您会在需要模块的地方编写 mocha 测试，然后需要在代码中使用的模块。使用 sinon 监视或存根该模块上的方法，因此，您可以隔离代码。

在一种情况下，我无法使用 sinon 完全隔离 3rd 方代码，这是当 require() 模块执行某些您不想在测试中运行的行为时。对于这种情况，我制作了一个名为“mockrequire”的超级简单模块[https://github.com/mateodelnorte/mockrequire](https://github.com/mateodelnorte/mockrequire)，它允许您提供一个需要的内联模拟而不是实际模块。您可以提供一个使用来自 sinon 的 spy 或 stub 的模拟，并具有与所有其余测试相同的语法和模式。

希望这能回答您帖子中的基本问题。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T12:29:38.650

在非常简单的情况下，您可以简单地导出一个修改文件范围内对象并返回实际导出对象的函数，但如果您想注入更多变量（即从您的应用程序中多次使用），通常最好创建一个像你所做的那样包装对象。

在某些情况下，您可以通过使用包装类而不是返回对象的函数来减少一些开销和缩进。

例如

```
function findById(id, callback, collection) {
  // ...
  // callback(null, Entity(...));
};

function Wrapper(di) {
  this.di = di;
}
module.exports = Wrapper; // or do 'new' usage in a function if preferred

Wrapper.prototype.findById = function (id, callback) {
  // use this.di to call findById and getCollection
}, // etc 
```

除此之外，你可以做很多事情来改善事情。不过我喜欢这种方法。保持状态`di`显式并与 findById 的函数体分开，并且通过使用一个类，您至少可以减少一点缩进的嵌套。

# android - 我可以在没有 Google 帐户的情况下访问 Google Drive 文档吗？

> ID：12651497
> 
> 赞同：4
> 
> 时间：2012-09-29T09:18:48.990
> 
> 标签：android, google-drive-api

我希望我的 android 应用访问特定帐户 [不是用户帐户] 并下载文件。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:29:20.757

要使用谷歌文档，您需要一个谷歌帐户。这不需要您拥有**google 邮件**帐户。

使用此 URL，您可以使用自己的电子邮件地址创建自己的 google 帐户： [https ://accounts.google.com/NewAccount?continue=https%3A%2F%2Fdocs.google.com%2F%23&followup=https%3A% 2F%2Fdocs.google.com%2F&service=writely<mpl=主页](https://accounts.google.com/NewAccount?continue=https%3A%2F%2Fdocs.google.com%2F%23&followup=https%3A%2F%2Fdocs.google.com%2F&service=writely&ltmpl=homepage)

祝你好运，

托马斯·范拉图姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:06:53.303

我一直在寻找的东西，即免费增值云服务，由 Google appEngine 或 Azure 或亚马逊或苹果云免费增值交易等提供更好的服务。请注意，这些通常很容易实现，但有许多扩展问题会影响决策。重要的是，从一个云平台迁移到另一个云平台的成本很高，因为代码在特定云之外是特殊的且无用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:38:47.717

这通常可以使用[Service Accounts](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)来实现。但是，服务帐户可能不能直接从 Android 应用程序中使用，因为 Android 无法保护您的私钥文件。

一种解决方法是自己拥有一个 Web 应用程序，该应用程序使用服务帐户从 Google 查询数据，并且仅从 Android 连接到您的 Web 应用程序。但是，如何确保只有您的客户才能访问您的 Web 应用程序是您的责任。

# php - 如何通过电子邮件发送 HTML5 画布图像

> ID：12651504
> 
> 赞同：2
> 
> 时间：2012-09-29T09:19:33.087
> 
> 标签：php, email, canvas

首先，我尝试使用 Pear 的 Mail_mime 来执行此操作，但我无法从我的共享主机提供程序和 cpanel 加载该类。

接下来我按照[这篇文章](https://stackoverflow.com/questions/6150880/email-an-image-created-on-html5-canvas)的指示进行 操作。它将图像写入“temp”文件夹，但写入零字节。显然问题是，我错过了什么。我在某处读到了有关在编码字符串中转换 + 符号的信息，但我不确定？

**主要问题是如何通过电子邮件发送画布图像，我对此一无所知。我关注了一些帖子，我认为我需要在服务器端创建一个临时图像文件，以便能够使用内置邮件功能将其附加到电子邮件中。因为实际写入了 0 个字节，所以首先解决该问题似乎是合乎逻辑的，邮件问题会自行解决。从下面的评论来看，似乎不需要先创建图像，但在找到可行的解决方案之前，我必须进行更多调查。**

此外，如果有人有另一个解决方案或 php 类来发送邮件正文中的图像而不是附件

我用ajax发送这个

```
var canvas = document.getElementById('doodle');
function serialize(canvas) {
    return canvas.toDataURL();
} 
```

这是服务器端

```
case 'doodle':
    $image = $_POST['doodle'];
    $data ="doedeliedoe";

    $email ="from@msn.com";
    $headers="From:".$email."\r\n";
    $headers .= "MIME-Version: 1.0\r\n"; 
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
    list($settings, $encoded_string) = explode(',', $image);
    list($img_type, $encoding_method) = explode(';', substr($settings, 5));

    if($encoding_method == 'base64'){

        $file=fopen("/home/user/public_html/user/temp/newLego.png",'w+');

       fwrite($file,base64_decode($encoded_string)) ;
       fclose($file);
    }
    $my_file = "newLego.png";
    $my_path = "/home/user/public_html/user/temp/";
    $my_subject = "My Design";
    $my_message = "Designed by ".$email;
   $this-> mail_attachment($my_file, $my_path, "mymail@gmail.com", $email, $email, $email,  $my_subject, $my_message);  

function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
    $file = $path.$filename;
    $file_size = filesize($file);
    $handle = fopen($file, "r");
    $content = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($content));
    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mailto, $subject, "", $header)) {
        //echo "mail send ... OK"; // or use booleans here
    } else {
       // echo "mail send ... ERROR!";
    }
} 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:37:35.523

首先，您应该更好地让自己对所面临的问题感到满意。是不是：

1.  将画布转换为图像“文件”   - 或*-*
2.  将图像“文件”附加到外发邮件消息

如果不执行 1.，您将无法在您的场景中执行 2.，但是 2\. 可以独立于 1.. 来解决

我建议你问一个或另一个。将两者整合起来实际上非常简单：

*   如果您有一个只接受附件文件的邮件库，则需要创建一个临时文件。[`SplTempFileObject`](http://php.net/SplTempFileObject)你可以很容易地在 PHP 中创建临时文件。
*   如果您有一个接受二进制字符串作为附件的邮件库，您可以只传递二进制字符串。
*   如果您需要调试从画布位图数据创建文件是否有效，您应该保存到文件并测试文件是否为图像（这很容易手动完成，但*也*可以自动完成)

抱歉，如果这个答案更像是评论，只是我在实际提供代码方面没有多大用处，因为问题是如此细分。

# iphone - 样式化 a 的第一个选项iOS 上的输入我正在尝试在 iOS 上设置选择输入的样式。第一个选项或初始状态应该有较小的字体大小，但不是其余的选项。我有以下 html 结构： <select class="dropdown"><option selected="" value="Navigation">Navigation</option> <option value="some-link">Whatever</option> &l ID：12651507 赞同：8 时间：2012-09-29T09:20:39.930 标签：iphone, ios, css, select 回答 #1 赞同：14 时间：2012-09-29T09:22:08.173 不幸的是，没有办法做到这一点。iOS Safari完全控制样式select列表的内部内容。这是验证的参考：little link。 实现此目的的一种方法是使用 JavaScript 模拟下拉/选择菜单。 这不是很可取，但是如果您绝对需要更改默认样式，那么恐怕这是唯一的方法；这是一个演示，可以让您了解如何进行模拟：另一个小链接。 回答 #2 赞同：2 时间：2017-11-22T07:10:48.933 试试这个 100% 对我有用 select { -webkit-appearance: none; -moz-appearance: none; appearance: none; } 回答 #3 赞同：0 时间：2016-09-23T21:26:25.703 对于它的价值 - 我<select>在关闭时有一个带有边框半径的透明下拉菜单。在 iOS 上（我不确定 android，我没有测试它）默认的灰色框<select>会出现在我的自定义边框内，这是不吸引人且不需要的。 为了摆脱内部的灰色框，我使用了以下 CSS： -webkit-appearance: none; 还有更多 - 与此 OP 的主题有关。Bootstrap 提供了一个方便的解决方案，其中包含大量文档以使用 Javascript 启用自定义下拉菜单。在这里查看。</select>

# ruby-on-rails-3 - 在 rspec 集成测试中使用嵌套模型构建模型

> ID：12651509
> 
> 赞同：1
> 
> 时间：2012-09-29T09:20:59.657
> 
> 标签：ruby-on-rails-3, rspec, integration-testing, nested-attributes

我知道我可以在 rspec 中做类似的事情：

```
let(:project) { Project.new } 
```

但是在我的应用程序中，一个项目接受_nested_attributes_for 任务，当我生成项目表单时，我使用以下方法构建了一个任务：

```
@project = Project.new
@project.tasks.build 
```

我需要类似的东西：

```
let(:project) { Project.new.tasks.build } 
```

但这似乎不起作用。

在我的 rspec 测试中，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:35:52.423

不确定我是否理解正确..无论如何，如果 Project 和 Task 是模型，Project has_many tasks，Task 属于项目，那么（使用[FactoryGirl gem](https://github.com/thoughtbot/factory_girl)）：

**工厂.rb**

```
 factory :project do
    name "Foo"
  end
  factory :task do
    name "Bar"
    project
  end 
```

在**规格**中：

```
let(:task) { FactoryGirl.build(:task) }

before { FactoryGirl.build(:project) } 
```

# android - Android 应用程序：在 AsyncTask 中显示叠加项目

> ID：12651511
> 
> 赞同：4
> 
> 时间：2012-09-29T09:21:13.370
> 
> 标签：android, android-asynctask, overlayitem

我正在构建一个使用谷歌地图覆盖项目的 android 应用程序。我从 MySQL 数据库中获取的项目的纬度和经度。为此，我在异步任务中使用 HTTP 连接到 php 脚本。我在地图上显示项目的代码位于异步任务的 onPostExecute() 方法中。

一切正常，但是当我旋转手机时，所有覆盖的项目都消失了。我该如何解决这个问题？

是否应该在主线程中覆盖项目？如果是这样，我需要以某种方式将异步任务中的信息传递到主线程，我已经研究过但无法使其正常工作。如果有人知道这样做的好方法，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:36:31.517

**OnPostExecute**它在主线程中被调用！您的问题是，当您旋转手机时

> Android 重新启动正在运行的 Activity（调用 onDestroy()，然后调用 onCreate()）。重新启动行为旨在通过使用与新设备配置匹配的替代资源自动重新加载您的应用程序来帮助您的应用程序适应新配置。

. [http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T09:56:21.893

create a method named `initUi()` and call it in `onConfigurationChanged` and `onCreate` methods like this:

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        try {
            setContentView(...);
            initUi();               
        } catch (Exception e) {

        }
    } 
```

and

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.act_document);
            initUi();  

        try {
            } catch (Exception e) {

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T09:31:13.187

使用活动类的`onSaveInstanceState(Bundle outstate)`and `onRestoreInstanceState(Bundle savedInstanceState)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T09:32:35.183

异步任务是您的线程，其中 onpost 方法默认附加到主 UI 线程，它不是异步问题，您只需要处理 onConfigurationChanged 方法，最好发布一些代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T09:43:25.403

如前所述，当您更改旋转时，android 会重新启动您的活动。因此，解决方案是在 onSaveInstenceState 中，您应该存储叠加项目数据，在 onRestoreInstanceState 中，您应该根据保存的数据重新创建叠加项目

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T10:58:59.770

正如其他答案所说，您可以使用 onSaveInstanceState(Bundle outstate) 和 onRestoreInstanceState(Bundle savedInstanceState) 甚至禁用设备中的方向更改来解决您的问题。

让我们一一来看：

-禁用方向更改，可能会导致用户体验不佳，所以我不赞成它。

- 使用 onSaveInstanceState(Bundle outstate) 和 onRestoreInstanceState(Bundle savedInstanceState) 你有两个主要的选项......

选项1：

您可以仅保存有关正在显示的项目的基本信息（即，如果它是地图，您可以保存地图中心位置和缩放），然后再次从数据库中检索所有覆盖信息。这非常简单，但是如果您要检索数百个叠加项目，它可能会变得非常缓慢，从而再次导致用户体验不佳。

选项 2：

您可以使用 parcelable 来扩展您的覆盖项目，以便您可以在 onSaveInstanceState(Bundle outstate) 期间保存所有覆盖项目，并在不从数据库重新加载的情况下恢复它们。我已经将它用于数千个项目，并且效果很好。

您可以在此处找到可打包信息：[Google](http://developer.android.com/reference/android/os/Parcelable.html) 和此处的示例：[Android – 使用 Parcelable 类在活动之间传递的包裹数据](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

祝你好运

# asp.net - ASP.NET Web API 的继承和 JSON 格式化程序

> ID：12651512
> 
> 赞同：7
> 
> 时间：2012-09-29T09:21:27.690
> 
> 标签：asp.net, .net, web-services, rest, asp.net-web-api

想象一个简单的控制器动作`IEnumerable<BaseType> Get()`。它返回所有从 BaseType 派生的不同类型的枚举。

当客户端请求 XML 时，结果是这样的：

```
<ArrayOfBaseType>
    <BaseType i:type="DerivedType1"><A>value</A></BaseType>
    <BaseType i:type="DerivedType2"><B>value</B></BaseType>
    <BaseType i:type="DerivedType3"><C>value</C></BaseType>
</ArrayOfBaseType> 
```

可以看到，派生类的类型是在`i:type`属性中传递的。

但是，如果客户端请求 JSON，则缺少此信息：

```
[
  {"A":"value"},
  {"B":"value"},
  {"C":"value"}
] 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:45:40.783

以下更改是必要的：

在 WebApiConfig.cs 中需要添加以下行：

```
config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = 
    TypeNameHandling.Auto; 
```

这将`$type`在需要时自动生成一个新属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:36:51.517

如果你写你的类如下：

```
public class MyClass
{
    // properties here

    public string IType
    {
        get
        {
            return this.GetType().Name;
        }

        set {  }
    }
} 
```

也许，它会帮助你

# paypal - PayPal 自适应付款中的付款状态“已过期”是什么意思？

> ID：12651518
> 
> 赞同：1
> 
> 时间：2012-09-29T09:22:36.563
> 
> 标签：paypal, paypal-adaptive-payments

我有几个“过期”状态的 PayPal 自适应付款（在代表卖家接受付款的应用程序中）。它们是明确批准的付款，这意味着一旦发件人接受付款，钱就会转手。

[PaymentDetails API 调用的文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPaymentDetails)未在可能的状态列表中提及 EXPIRED。

您能否指导我查看其他文档或解释此状态的含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:34:54.117

一些更多的谷歌搜索提出了[这个论坛主题](https://www.x.com/developers/paypal/forums/adaptive-payments-api/paymentdetails-api-operation)：

> 过期状态意味着 PayKey 已过期且无法使用。PayKey 的使用期限为三个小时，超过此期限后将无法用于完成支付。如果发生这种情况，您将需要像以前一样使用 Pay API 调用生成具有新 trackingID 的新 PayKey。跟踪 ID 未被释放并允许再次使用的原因是因为它会导致您和我们系统中的重复跟踪 ID 出现问题。

因此，过期的自适应付款是一种已创建但从未付款的付款，因此您可以安全地创建一个重复的新付款。

# facebook - 对于两个不同的页面，facebook like button 发布相同的 url

> ID：12651519
> 
> 赞同：0
> 
> 时间：2012-09-29T09:22:38.487
> 
> 标签：facebook, facebook-graph-api, facebook-like

我在两个不同的页面中放置了一个类似 facebook 的按钮。A页面的Url是：www.mysite.com/index.php?route=pages/page_a；

B页面的Url是：www.mysite.com/index.php?route=pages/page_b；

喜欢这两个页面中的任何一个，facebook 只会发布页面 A 的链接。并且 facebook 的点赞按钮在每个页面中显示相同的点赞数（这是页面 A 的点赞数）。

我不使用“webiste”作为 og 类型标记值（代表整个站点）。我已经尝试过产品、游戏和活动，但仍然是同样的问题。

我已经尝试使用 facebook 调试工具来清除 facebook 缓存。仍然没有运气。

我花了两天时间，把头发拉出来，试图弄清楚如何修复。但没有运气。谁能告诉我如何解决这个问题？谢谢你。

# php - 单个 IIS 中的 PHP 和 MVC 3

> ID：12651520
> 
> 赞同：0
> 
> 时间：2012-09-29T09:22:41.267
> 
> 标签：php, asp.net-mvc-3, iis-7

我们可以在单个 IIS 7 下运行 php 和 MVC 3 应用程序吗？我已经使用 PHP 管理器在 IIS 中安装了 PHP。我还想在同一个 IIS 服务器中运行 asp.net MVC 3 应用程序。是否可以在同一个 wwwroot 文件夹下同时运行 php 和 asp.net MVC 3 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:37:30.220

是的，你应该能够做到这一点。您将无法共享会话等，但您可能必须更改 IIS 应用程序池配置才能使其正常工作。

看看： [PHP 和 ASP.Net 可以在 IIS 7.5 中的同一个网站中一起运行吗？](https://stackoverflow.com/questions/4761769/can-php-and-asp-net-run-together-within-the-same-web-site-in-iis-7-5)

# java - 如何处理 JAXB 中的多个 @XmlID

> ID：12651521
> 
> 赞同：2
> 
> 时间：2012-09-29T09:22:54.400
> 
> 标签：java, jaxb

如果有一些具有相同值的@XmlID 注释属性，即使它们是不同的类型，JAXB 也无法成功解组对象，但是 marshall 是好的。

它是一个错误吗？

否则，如何支持该功能？

代码：

```
package xml;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

public class MultiID {

    static public class LongXmlAdapter extends XmlAdapter<String, Long> {
        @Override
        public Long unmarshal(String s) {
            return Long.parseLong(s);
        }

        @Override
        public String marshal(Long number) {
            if (number == null) return "";

            return number.toString();
        }
    }

    static public class Element {
        private Long id;

        @XmlID
        @XmlAttribute(required=true)
        @XmlJavaTypeAdapter(LongXmlAdapter.class)
        public Long getId() {
            return id;
        }

        public void setId(Long id) {
            this.id = id;
        }
    }
    static public class Component {
        private Long id;

        @XmlID
        @XmlAttribute(required=true)
        @XmlJavaTypeAdapter(LongXmlAdapter.class)
        public Long getId() {
            return id;
        }

        public void setId(Long id) {
            this.id = id;
        }

        private Element elem;

        @XmlIDREF
        @XmlAttribute(required=true)
        public Element getElem() {
            return elem;
        }

        public void setElem(Element e) {
            this.elem = e;
        }
    }
    @XmlRootElement
    static public class Container {
        private List<Element> elemLst = new ArrayList<Element>();
        private List<Component> lst = new ArrayList<Component>();

        @XmlElementWrapper(name="elemList")
        @XmlElement(name="elem")
        public List<Element> getElemLst() {
            return (elemLst != null)?elemLst:(elemLst = new ArrayList<Element>());
        }

        public void setElemLst(List<Element> elemLst) {
            this.elemLst = elemLst;
        }

        @XmlElementWrapper(name="componentList")
        @XmlElement(name="component")
        public List<Component> getLst() {
            return (lst != null)?lst:(lst = new ArrayList<Component>());
        }

        public void setLst(List<Component> lst) {
            this.lst = lst;
        }
    }

    static public class XmlSerialization {
        public static Object read(String filepath, Class... classesToBeBound) throws FileNotFoundException {
            Object entity = null;
            try {
                File file = new File(filepath);
                if(!file.exists()) throw new FileNotFoundException(filepath);
                JAXBContext context = JAXBContext.newInstance(classesToBeBound);
                Unmarshaller um = context.createUnmarshaller();

                entity = um.unmarshal(file);
            } catch (JAXBException ex) {
                Logger.getLogger(XmlSerialization.class.getName()).log(Level.SEVERE, null, ex);
            }
            return entity;
        }

        public static void write(String filePath, Object entity, Class... classesToBeBound) {
            File file = new File(filePath);
            try {
                JAXBContext context = JAXBContext.newInstance(classesToBeBound);
                Marshaller m = context.createMarshaller();
                m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
                m.marshal(entity, file);
            } catch (JAXBException ex) {
                Logger.getLogger(XmlSerialization.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

    }
    public Container createContainer() {
        Container container = new Container();
        for(long i = 1 ; i < 5; ++i) {
            Element elem = new Element();
            elem.setId(i);
            container.getElemLst().add(elem);
            Component comp = new Component();
            comp.setId(i);
            comp.setElem(elem);
            container.getLst().add(comp);
        }
        return container;
    }
    public void write(String filePath, Container container) {
        XmlSerialization.write(filePath, container, Container.class, Component.class, Element.class);
    }
    public Container read(String filePath) {
        Container container = null;
        try {
            container = (Container)XmlSerialization.read(filePath, Container.class, Component.class, Element.class);
        } catch (FileNotFoundException ex) {
            Logger.getLogger(MultiID.class.getName()).log(Level.SEVERE, null, ex);
        }
        return container;
    }

    public static void main(String[] args) {
        MultiID test = new MultiID();
        String filePath = "c:\\tmp.xml";
        Container c1 = test.createContainer();
        test.write(filePath, c1);
        Container c2 = test.read(filePath);
        filePath = "c:\\tmp2.xml";
        test.write(filePath, c2);
    }
} 
```

输出：

[tmp.xml]

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<container>
    <elemList>
        <elem id="1"/>
        <elem id="2"/>
        <elem id="3"/>
        <elem id="4"/>
    </elemList>
    <componentList>
        <component id="1" elem="1"/>
        <component id="2" elem="2"/>
        <component id="3" elem="3"/>
        <component id="4" elem="4"/>
    </componentList>
</container> 
```

[tmp2.xml]

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<container>
    <elemList>
        <elem id="1"/>
        <elem id="2"/>
        <elem id="3"/>
        <elem id="4"/>
    </elemList>
    <componentList>
        <component id="1"/>
        <component id="2"/>
        <component id="3"/>
        <component id="4"/>
    </componentList>
</container> 
```

tmp2.xml 中的每个“组件”都没有元素引用。那就是问题所在。例如，如果我们从 100 开始更改组件 ID，它将按预期工作。

如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:11:34.267

XML 中的 ID 必须 (a) 在整个 XML 文档中是唯一的，并且 (b) 有效的 XML 名称（因此不能以数字开头）。与其使用 long，不如为元素考虑字符串，如`e1`,`e2`等，为`c1`组件考虑 ...。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:27:06.217

您的输出是由于您正在使用的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现中的错误造成的。[**使用 JDK 1.7.0 for Mac 和EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)中包含的 JAXB impl 运行您的示例代码，我得到了 tmp2.xml 的预期结果。

**tmp2.xml**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<container>
    <elemList>
        <elem id="1"/>
        <elem id="2"/>
        <elem id="3"/>
        <elem id="4"/>
    </elemList>
    <componentList>
        <component elem="1" id="1"/>
        <component elem="2" id="2"/>
        <component elem="3" id="3"/>
        <component elem="4" id="4"/>
    </componentList>
</container> 
```

# android - Android服务发现失败异常

> ID：12651524
> 
> 赞同：1
> 
> 时间：2012-09-29T09:23:20.837
> 
> 标签：android, exception, bluetooth

在我的 android 应用程序中，我使用的是蓝牙。在第一次连接尝试时一切正常，没有问题。但是，在断开连接并第二次尝试连接后，我收到“服务发现失败异常”：

```
socket.connect(); 
```

起初我以为我的断开连接有问题，但在客户端应用程序和服务器应用程序上似乎都很好（两者都是 android 设备 Galaxy sII）

为了能够再次连接，我重新启动客户端设备。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:45:55.087

请提供更多代码，以便我们准确了解连接和断开连接的方式。您说断开连接似乎双方都很好-您如何确认？

您可能想查看 Android SDK 附带的蓝牙聊天示例（如果您还没有的话），并将其安装在两台设备上并检查它是否正常工作（以及原因）。

# jquery - 随机 Div 块背景 Metro 风格

> ID：12651530
> 
> 赞同：1
> 
> 时间：2012-09-29T09:24:58.470
> 
> 标签：jquery, random

情况是我有 div 块。想象一下 Windows 8 Metro 风格。我想要一组颜色，每次重新加载页面时，块的颜色都会改变。

我使用 jquery 创建了一个简单的随机脚本，但是一旦页面加载，这些块是相同的颜色.. 这是我的代码

```
$('#block').css('background', colors[Math.floor(Math.random() * images.length)]); 
```

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:40:30.367

您应该使用[setInterval()](http://www.w3schools.com/js/js_timing.asp)方法。试试这个

```
$(function(){
    var colors = ["red","green","blue","yellow"];

    setInterval(function() {
           $('#block').css('background', colors[Math.floor(Math.random() * colors.length)]);
    }, 500);
}); 
```

**[演示](http://jsfiddle.net/rU8DA/4/)**

在不使用颜色数组的情况下随机获取颜色代码。您可以为颜色代码动态生成十六进制值。

```
$('#block').css('background', '#'+Math.floor(Math.random()*16777215).toString(16)); 
```

就多个 div 块而言，请尝试以下代码：

```
$(function(){
   $("div").each(function(){
      $(this).css('background','#'+Math.floor(Math.random()*16777215).toString(16));
   });
}); 
```

**[工作演示](http://jsfiddle.net/rU8DA/17/)**

祝你好运 ！！

# ios - 交易下载始终为零

> ID：12651540
> 
> 赞同：0
> 
> 时间：2012-09-29T09:26:26.623
> 
> 标签：ios, download, in-app-purchase, ios6

我正在为 iPad 开发一个应用程序。它具有**非消耗性**类型的应用内购买。所以我正在使用苹果提供的**托管内容功能。**
问题是“**交易”的“****下载**”属性始终为“**零**”

 ****```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        if (transaction.downloads) {
            [[SKPaymentQueue defaultQueue] startDownloads:transaction.downloads];            
    }
} 
```

我将**iTunesConnect中****应用程序**的状态设置为“ **Developer Rejected** ”，**应用内购买产品**的状态为“**准备提交**”。 应用内购买产品的内容已通过**XCode**上传。

 ******任何帮助将不胜感激。
非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:56:41.243

只是目标iOS必须设置为iOS6（设备上的操作系统必须是iOS6）......所以我更新了设备并且它运行良好**********

# scala - Scala 的 OptManifest 和 NoManifest 有什么用？

> ID：12651542
> 
> 赞同：6
> 
> 时间：2012-09-29T09:26:53.020
> 
> 标签：scala, manifest, type-erasure

我正在学习 Scala 的清单概念，并且对如何在一些简单的情况下使用它有基本的了解。让我困惑的是什么是`OptNanifest`为了`NoManifest`什么？我从来没有见过然后使用。有人可以举一个需要/有用的例子吗？

（我看到 Scala 2.10 用 s 替换了`Manifest`s的概念，`TypeTags`但在 2.10 最终版本之前我们必须使用`Manifest`s。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T11:48:28.107

假设我们有以下案例类和类型别名：

```
scala> case class Foo[A](a: A)
defined class Foo

scala> type F = Foo[_]
defined type alias F 
```

我们现在可以（不是很有用）列出类型的东西`F`：

```
scala> val foos: List[F] = List(Foo(1), Foo("a"), Foo('a))
foos: List[F] = List(Foo(1), Foo(a), Foo('a)) 
```

我们可以把它变成一个数组：

```
scala> foos.toArray
res0: Array[F] = Array(Foo(1), Foo(a), Foo('a)) 
```

很明显，编译器能够找到它需要的清单作为`toArray`on 方法的隐式参数`List`。但是如果我们要求一个普通的旧`Manifest`for `F`，我们会得到一个错误：

```
scala> manifest[F]
<console>:11: error: overloaded method value classType with alternatives:
  (prefix: scala.reflect.Manifest[_],clazz: Class[_],args: scala.reflect.Manifest[_]*)scala.reflect.Manifest[F] <and>
  (clazz: Class[F],arg1: scala.reflect.Manifest[_],args: scala.reflect.Manifest[_]*)scala.reflect.Manifest[F] <and>
  (clazz: Class[_])scala.reflect.Manifest[F]
 cannot be applied to (java.lang.Class[Foo[_$1]], scala.reflect.Manifest[_$1])
              manifest[F] 
```

所以很明显，编译器在使用清单来表示我们的类型别名中的通配符时遇到了问题。

有效的原因`toArray`是它期望 a `ClassManifest`，而不仅仅是 a `Manifest`。事实上，我们可以毫无问题地得到一个`ClassManifest`for `F`，正是因为`ClassManifest`用于`OptManifest`表示它的类型参数——不像`Manifest`，它的类型参数只是其他类型的东西`Manifest`。

```
scala> classManifest[F]
res2: ClassManifest[F] = Foo[<?>] 
```

那`<?>`是 的字符串表示`NoManifest`。它在这里发挥作用`None`，允许编译器表示有关类型的类信息`F`（幸运的是，这是我们创建数组所需要的全部），而无需说明`F`超出“不，我无法建模”的类型参数”。

# linux - 在 AWK 中使用管道

> ID：12651543
> 
> 赞同：0
> 
> 时间：2012-09-29T09:27:33.067
> 
> 标签：linux, bash, sed, awk

以 AWK 格式编写脚本 - 输入数据 - 时间格式`31.12.2012`。我想比较 2 个日期 - 系统日期和这个日期。我认为最好的方法是将两个日期都转换为unix时间戳，进行扣除，然后与条件进行比较。只有这种格式才能将日期转换为 unix 时间戳`2012-12-31`。为了转换成这种格式，我写了 SED 表达式`sed -n -e "s_\(..\)\(.\)\(..\)\(.\)\(....\)_\5-\3-\1_p"`。然后我们必须用 command 转换这个表达式`date --utc --date "2012-12-31" +%s`。但是管道不想工作。

在 AWK 我写道：

* * *

```
#/usr/bin/awk -f
BEGIN {
    FS=",";
}
{
    split($3, account, "/");
    gsub(/ $/, "", account[1]);
    split($4, products, "\\\\n");
    split($5, supports, "\\\\n");
    for (i in products) {
        gsub("\"", "", products[i]);
        gsub("\"", "", supports[i]);
        split(supports[i], timesupport, "\ > ");
        "date +%s" | getline dateVal;
        print timesupport[1] | sed -n -e "s_\(..\)\(.\)\(..\)\(.\)\(....\)_\5-\3-\1_p" | getline timeVal1 | date --utc --date "timeVal1" +%s | getline timeVal;
        x=dateVal - timeVal;
        if (supports[i] !~ /n\\\\a*/ && supports[i] !~ /n\/a*/ && $2 !~ /\NULL/)
            print $1","$2","timesupport[1]","account[1]"\","products[i]"\","$6;

    }
} 
```

主线程在帖子 12634588 中。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T10:44:06.437

为什么不使用内置的时间函数：

```
(echo | awk '{ print systime() }'; date +%s)
1348915323                
1348915323 
```

要将您提到的字符串转换为相同的格式，请使用`mktime`：

```
{ 
  t = "31.12.2012"
  split(t, a, "\\.")
  ts = sprintf("%04d %02d %02d 00 00 00", a[3], a[2], a[1])
  print mktime(ts)
} 
```

输出：

```
1356908400 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:08:56.027

看起来您正在尝试混合使用 bash 和 awk 代码。尝试使用 system() 调用在 bash 中执行代码并在 awk 中返回结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:10:17.737

`system()`函数和`getline`命令实际上将它们的参数传递给`/bin/sh`. 这使您可以像在 shell 中一样使用管道。例子：

```
cmd = sprintf("echo '%s' | sed -e '...'", timesupport[1])
cmd | getline timeval 
```

您的问题并没有明确说明脚本的输入是什么，所以我不能给您一个更相关的例子。

# tcl - 如何找到TCL程序的位置？

> ID：12651549
> 
> 赞同：9
> 
> 时间：2012-09-29T09:28:36.543
> 
> 标签：tcl, procedure

如何在 TCL 中找到过程（函数）的位置。在位置下，我的意思是声明它的源文件。

我正在尝试阅读外国源代码，但找不到单个过程的声明，例如：

```
set MSISDNElement [regexp -all -inline {ISDN +[0-9]+} $Command]

if { $MSISDNElement != "" } {
    foreach elm $MSISDNElement {
        set MSISDNValue [list ISDN [getInternationalFormat [lindex $elm 1]]]
    }
}

set EptData [list [lindex $Command 1]]

InitEptData 3
foreach Element $EptData {
    SetEptData [lindex $Element 0] [lindex $Element 1]
} 
```

对于函数**InitEptData**和**SetEptData**我找不到任何声明。可以更深入了解 TCL 的人来解释如何解决我面临的问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T11:18:20.733

对此没有通用答案，因为 Tcl 允许您动态声明过程，因此它们可能没有实际的文件引用。

有一些尝试来改善具有定义文件的 procs 的情况，例如[TIP280](http://www.tcl.tk/cgi-bin/tct/tip/280.html "提示 280")，它实际上`info frame`在最近的 8.5 版本中可用，以及 TIP 86 ，它只是在讨论中。

但是，如果一个简单`grep`的方法不起作用，您可以跟踪创建过程或命令的那一刻。

这发生在不同的地方（Tcl OO 可能会添加更多，不确定）：

*   在命令期间，当二进制扩展使用[Tcl_CreateCommand](http://www.tcl.tk/man/tcl8.5/TclLib/CrtCommand.htm)或更现代的 Tcl_CreateObjCommand`load`注册其命令处理函数时。
*   在`source`加载具有 proc 定义的文件的命令期间
*   在运行`proc`命令本身以定义新过程时

使用这些命令`info commands`，`namespace children`您可以遍历整个命名空间树以获取执行命令之前和之后定义的命令列表。因此，您可以创建一个跟踪任何新命令的包装器。请参阅[http://wiki.tcl.tk/1489](http://wiki.tcl.tk/1489)了解如何操作的一些提示。

或者，只需使用 RamDebugger [http://www.compassis.com/ramdebugger/Intro](http://www.compassis.com/ramdebugger/Intro)之类的调试器或 ActiveStates 商业调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T23:32:21.177

在 bash shell 中，我使用：

```
 find . -name "*.tcl" -exec grep -H proc_name_to_find {} \; | grep proc 
```

这会找到所有 tcl 文件，然后对每个文件执行 grep 以搜索 proc_name_to_find，然后再次对包含 'proc' 的行的输出进行 grep

由于**grep -H**输出带有输出字符串的文件名，因此这会向您显示在编辑器中查找定义所需的输出。

**示例**：

```
$ find . -name "*.tcl" -exec grep -H set_prime {} \; | grep proc
./my_lib.tcl:proc prime_test::set_prime {{quiet 0} {no_compare 0}} { 
```

xargs 还有其他解决方案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-23T16:31:17.493

它不会捕获瞬态定义的 procs，也可能不会重命名 procs，但在 99% 的情况下，这应该可以工作并且非常容易。如果您发现全局命名空间中有两个 proc 但首先调用了一个意外的 proc，它也将帮助您解决问题。

假设我的 proc 是“doBlah”，我可以这样做：

```
 array get ::auto_index doBlah 
```

假设我只知道它包含字符串'lah'，我可以这样做：

```
 array get ::auto_index *lah* 
```

在这两种情况下，您都会返回 auto_index 的内容，它会告诉您当您尝试运行该 proc 时 Tcl 将获取哪个文件。

# mysql - MYSQL 将一个表多次连接到另一个表的最佳方法

> ID：12651551
> 
> 赞同：2
> 
> 时间：2012-09-29T09:28:45.260
> 
> 标签：mysql

好的，我有两张桌子

一是**商业**

```
id
name
telephone
primary_category
secondary_category
tertiary_category 
```

另一个表是**类别**

```
id
name
parent_id 
```

现在，在这种情况下，企业必须有一个主要/次要和可选的第三类，这是实现这一目标的唯一方法

```
SELECT * FROM business b
INNER JOIN business_category bc_1 ON b.primary_category = bc.id
INNER JOIN business_category bc_2 ON b.secondary_category = bc.id
LEFT OUTER JOIN business_category bc_3 ON b.tertiary_category = bc.id 
```

我想要的似乎很长只是业务表中每个类别的名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:53:42.917

据我所知，你现在的做法已经很有效了。您有许多选择，例如在其上创建子查询，但它的效率低于您创建的那个。

如果您在所有表上都正确定义了索引，那么就可以了。更具体地说，在这些列上：

```
primary_category
secondary_category
tertiary_category 
```

**因为这些是类别**表中的外键。

# git - Github windows HTTP 失败错误

> ID：12651552
> 
> 赞同：0
> 
> 时间：2012-09-29T09:28:46.900
> 
> 标签：git, github

我已经为 Windows 安装了 Github，当尝试克隆我在 github 上分叉的 django 存储库时，出现错误

```
error: Failed connect to github.com:8080; No error while accessing https://github.com/django   /django.git/info/refs
fatal: HTTP request failed 
```

我有一个正常工作的 wifi 互联网连接...已通过应用程序登录..在失败后仍然要求检查我的互联网连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:11:43.073

对不起..这是一个愚蠢的错误...我之前为我的机构设置了代理

我只是使用

```
git config –global –unset http.proxy 
```

# javascript - 如何在从 Json 数据返回的路径的表中显示图像

> ID：12651553
> 
> 赞同：0
> 
> 时间：2012-09-29T09:28:58.980
> 
> 标签：javascript, jquery, asp.net-mvc

我是 Ajax 和 javqscript 的新手。

我正在通过 Json 使用图像路径返回我的列表。谁能告诉我显示图像的方式？

我正在使用 Ajax 调用加载数据。

```
Ajax Call
var TableHeaderArray = ["Person", "Details"]; 
$.ajax({
url: '/Home/Persondetails',
type: 'POST',
dataType: "json", 
beforeSend: function () {
},
success: function (response) {
$('#Person').append(CreateHTMLTableFromJSON(response, "lightPro", TableHeaderArray)).fadeIn();
},
error: function (error) {
alert(error);
}
}); 
```

控制器

```
[HttpPost]
public ActionResult Persondetails()
{
SqlConnection con = new SqlConnection();
con.ConnectionString = ConfigurationManager.ConnectionStrings["PersonConnectionString"].ConnectionString;
con.Open();
SqlCommand cmd = new SqlCommand("GetDetails", con);
cmd.CommandType = CommandType.StoredProcedure;
cmd.ExecuteScalar();
DataSet ds = new DataSet();
SqlDataAdapter sda = new SqlDataAdapter(cmd);
sda.Fill(ds);
List<Person> Details = new List<Person>();
foreach (DataRow dr in ds.Tables[0].Rows)
{
Details.Add(new Person()
{
Id = dr["Id"].ToString(),
Name = dr["Name"].ToString(),
Age = dr["Age"].ToString(),
Job = dr["Job"].ToString(),
images = dr["Images"].ToString(),
});
}
return Json(Details);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:05:59.957

以这种方式为例：

```
$.ajax({
       url: 'some_url',
       success: function(data) {
          // Here will be image inserting
        }
  }); 
```

现在我们有2个案例：

1) 此图像（例如 id = imagId）已在您的页面上。在这种情况下，`success`您应该在回调中执行以下操作：

```
$('#imgId').attr('src', data.imageUrl); 
```

2）您必须在页面上插入新图像。因此，在这种情况下，`success`回调将如下所示：

```
var img = $('<img/>', {'src': data.imageUrl} );  
$('#whereToInsertId').append(img); 
```

它应该工作;）

# python - 在创建时将属性附加到类

> ID：12651557
> 
> 赞同：1
> 
> 时间：2012-09-29T09:30:17.663
> 
> 标签：python, oop, class, subclassing

我有一堆类在 ZODB 中持续存在。所有类都必须共享一些索引特性，而且它们都定义了很多属性。这些属性是在类级别上使用描述符定义的，以便能够拦截对它们的写入以进行验证并检查数据库中的重复项。为此，每个类都有一个自动维护的属性列表，`_properties`. 他们还拥有`_indices`和其他一些功能，我不想自己复制到每个元素类（大约 10 个左右）。

考虑以下代码：

```
class BaseElement(object):
    _properties = None

class ElementFlavour1(BaseElement):
    _properties = 'a', 'b', 'c'

....

class ElementFlavourN(BaseElement):
    _properties = 'e', 'f', 'g'

for item in locals():
    if issubclass(item, BaseElement):
        item._v_properties_set = set(item._properties) if item._properties else set() 
```

所以，它基本上做了它应该做的事情：我需要`_properties`线性迭代，但我也想做快速查找，如果某个属性存在于类中。尽管如此，我不想重复自己并为每一种风格`BaseElement`明确地指定这个集合。

当前的解决方案有效，但我认为它是一个丑陋的黑客，并希望摆脱它。例如`BaseElement`，其他模块中的子类不会正确设置它们的属性。玩弄`__new__`似乎也是错误的方式，因为它不会拦截类构造，而是实例化。那么，如何正确地做到这一点呢？

PS我知道OrderedDict，但这不是我要找的。我想以一种干净的方式挂钩到类创建过程并在那里附加任意功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T09:50:28.693

你可以用一个元类来做到这一点：

```
class BaseType(type):
    def __init__(cls, name, bases, clsdict):
        super(BaseType, cls).__init__(name, bases, clsdict)
        setattr(cls,'_v_properties_set',
                set(cls._properties) if cls._properties else set())

class BaseElement(object):
    __metaclass__ = BaseType    
    _properties = None

class ElementFlavour1(BaseElement):
    _properties = 'a', 'b', 'c'

class ElementFlavourN(BaseElement):
    _properties = 'e', 'f', 'g'

print(ElementFlavourN._v_properties_set)
# set(['e', 'g', 'f']) 
```

您也可以使用类装饰器来做到这一点，但是您必须`BaseElement`单独装饰每个子类。元类是继承的，因此您只需定义一次。

# .net - 如何将此 VB.NET 代码转换为 C#？

> ID：12651558
> 
> 赞同：0
> 
> 时间：2012-09-29T09:30:27.493
> 
> 标签：.net, vb.net, ado.net, vb.net-to-c#

```
Dim MaxItemID As Integer
Dim objCMD As New SqlCommand(StrSql, objConn)  
MaxItemID = IIf(IsDBNull(objCMD.ExecuteScalar()), 0, objCMD.ExecuteScalar()) + 1 
```

我如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:32:54.853

```
int MaxItemID = 0;
using(SqlCommand objCMD = new SqlCommand(StrSql, objConn))
{
    MaxItemID = (Converter.IsDBNull(objCMD.ExecuteScalar()) ? 0 : objCMD.ExecuteScalar()) + 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:33:44.860

```
int MaxItemID;
SqlCommand objCMD =new SqlCommand (StrSql, objConn);
MaxItemID = IsDBNull(objCMD.ExecuteScalar()? 0: objCMD.ExecuteScalar()) + 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:36:07.277

这应该这样做（并避免执行 SQL 两次）：

```
var objCMD = new SqlCommand(StrSql, objConn);
var sqlRes = objCMD.ExecuteScalar();
int maxItemID = 1 + (Convert.IsDBNull(sqlRes) ? 0 : (int)sqlRes); 
```

注意 VB 会将`object`返回值隐式转换`ExecuteScalar`为 an `int`，但 C# 不会。

# wordpress - 如何发布喜欢的图片？

> ID：12651559
> 
> 赞同：1
> 
> 时间：2012-09-29T09:30:29.923
> 
> 标签：wordpress

我想从静态模板中获取帖子并将其发布在主题 wordpress 中并使其具有动态性。

我知道如何发布包含两个元素的简单帖子：

1.  标题文本。

2.  段落文本。

但就我而言，该帖子的风格与简单帖子不同。

我想将其转换为帖子主题的静态代码 html：

```
<section id="content">
    <div class="container_16">
        <div class="p10">
            <article class="grid_4">
                <h4>Honeymoons:</h4> 
                <div class="txt-1">Praesent vestibulum aenean Nonummy hendrerit mauris.</div>
                <p>Cum sociis natoque penatibus et magnis dis parturient montes ascetur ridiculus
                mus. Nulla dui. Fusce feugiat malesuada odio.</p> <a href="#" class="link-1">read more</a>
            </article>
            <article class="grid_4">
                <h4>Honeymoons:</h4> 
                <div class="txt-1">Praesent vestibulum aenean Nonummy hendrerit mauris.</div>
                <p>Cum sociis natoque penatibus et magnis dis parturient montes ascetur ridiculus
                mus. Nulla dui. Fusce feugiat malesuada odio.</p> <a href="#" class="link-1">read more</a>
            </article>
            <article class="grid_4">
                <h4>Honeymoons:</h4> 
                <div class="txt-1">Praesent vestibulum aenean Nonummy hendrerit mauris.</div>
                <p>Cum sociis natoque penatibus et magnis dis parturient montes ascetur ridiculus
                mus. Nulla dui. Fusce feugiat malesuada odio.</p> <a href="#" class="link-1">read more</a>
            </article>
        </div>
</section> 
```

如您在下面的代码中所见，如何添加标签 html 来发布：？

1.  `<article class="grid_4">`

2.  <`h4>here is the title:</h4>`

3.  `<div class="txt-1">`

4.  `<p>`

样式：

![在此处输入图像描述](../Images/7519e8f49656f55be668149c1fdfb563.png)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:46:10.997

我认为从您的问题中您正在寻找类似以下代码的内容；

```
<section id="content">
    <div class="container_16">
        <div class="p10">

        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>     

            <article class="grid_4">

                    <h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>

                    <div class="txt-1"><?php the_excerpt(); ?></div>

                    <?php the_content(); ?>

                    <a href="<?php the_permalink(); ?>" class="link-1">read more</a>

            </article>

        <?php endwhile; endif; ?>

        </div>
    </div>
</section> 
```

这肯定会帮助你开始。请注意，您省略了结束`</div>`标记。

您可能想要查看自定义 WP_Query 而不仅仅是标准的 Wordpress 循环，因此您可以从博客中提取 3 个最新帖子，或从特定类别中提取帖子。

# c++ - 在 C++ 中将类型从参数转换为模板

> ID：12651560
> 
> 赞同：0
> 
> 时间：2012-09-29T09:30:31.663
> 
> 标签：c++, templates, macros

我正在重构一些使用自己的类型处理系统的旧代码，该系统为用作参数的类型提供了一个特殊的宏：

```
x = function(TYPE(double), y); 
```

重构之后，上面写成

```
x = function<double>(y); 
```

有没有办法（使用宏或重载函数）来保持旧样式也能正常工作，提供向后兼容性？我试过这样的事情：

```
#define TYPE(x) (x)
#define function(x, y) function<x>(y) 
```

希望宏仅在实际参数数量与其定义匹配时使用，但这会导致编译错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:48:24.770

```
template< class Type >
void function( int x ) {}

#define TYPE( t ) t()
template< class Type >
void function( Type, int x ) { function< Type >( x ); } 
```

* * *

编辑：更一般地说，如果你想支持`void`，你可以做......

```
template< class Type >
void function( int ) {}

template< class Type >
struct TypeCarrier {};

#define TYPE( t ) TypeCarrier< t >()
template< class Type >
void function( TypeCarrier< Type >, int x ) { function< Type >( x ); }

int main()
{
    function( TYPE( double ), 1 );
    function( TYPE( void ), 2 );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:11:03.710

一个问题是您对`TYPE`. 去掉括号。

```
#define TYPE(x) x
#define function(x, y) function<x> (y) 
```

还有一个潜在问题是模板函数与您要替换的函数同名。您可能想考虑将其命名为不同的名称。否则，新的使用是不受限制的。

```
#define TYPE(x) x
#define function(x, y) some_name_other_than_function<x> (y) 
```

# c# - 识别 Windows 8 Style (Metro) 应用程序何时处于后台或失去焦点

> ID：12651566
> 
> 赞同：6
> 
> 时间：2012-09-29T09:31:13.450
> 
> 标签：c#, focus, windows-8, microsoft-metro

我有一个游戏，当用户移动到另一个应用程序时，我想暂停它。For example, when the charms menu is selected, the user presses the windows key, alt-tab to another application, click on another application or anything else that would make the application lose focus.

当然，这应该是微不足道的！我只有 a`Page`和 a`Canvas`并且我在 上尝试了`GotFocus`和`LostFocus`事件`Canvas`，但它们不会触发。

我最接近的是`PointerCaptureLost`在`CoreWindow`捕获指针后使用。这适用于选择魅力菜单时的应用程序切换，但当按下 windows 键时这不起作用。

**编辑：**

在下面 Chris Bowen 的帮助下，最终的“解决方案”如下：

```
public MainPage() {
    this.InitializeComponent();
    CapturePointer();
    Window.Current.CoreWindow.PointerCaptureLost += PointerCaptureLost;
    Window.Current.CoreWindow.PointerPressed += PointerPressed;
    Window.Current.VisibilityChanged += VisibilityChanged;
}

private void VisibilityChanged(object sender, VisibilityChangedEventArgs e) {
    if(e.Visible) {
        CapturePointer();
    }
    else {
        Pause();
    }
}

void PointerPressed(CoreWindow sender, PointerEventArgs args) {
    CapturePointer();
}

private void CapturePointer() {
    if(hasCapture == false) {
        Window.Current.CoreWindow.SetPointerCapture();
        hasCapture = true;
    }
}

void PointerCaptureLost(CoreWindow sender, PointerEventArgs args) {
    hasCapture = false;
    Pause();
}

private bool hasCapture; 
```

似乎它们仍然*应该*是一种更简单的方法，所以如果您发现更优雅的方法，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T13:08:32.447

尝试使用[Window.VisibilityChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.window.visibilitychanged.aspx)事件。像这样的东西：

```
public MainPage()
{
    this.InitializeComponent();
    Window.Current.VisibilityChanged += Current_VisibilityChanged;
}

void Current_VisibilityChanged(object sender, Windows.UI.Core.VisibilityChangedEventArgs e)
{
    if (!e.Visible) 
    {
        //Something useful
    }
} 
```

虽然它不会捕获 Charms 激活，但它应该适用于您提到的其他情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:08:38.267

尝试使用`onSuspending`App.xaml.cs 中预定义的事件来处理游戏的暂停。只要应用程序暂停，该事件就会触发，因此它可以工作。在尝试暂停游戏之前，您可能需要进行检查以确保游戏实际上正在运行，因为该事件会在应用程序中的任何页面被暂停时触发。

# mysql - 如何在cakephp中以时间间隔从数据库中获取前一天的数据？

> ID：12651572
> 
> 赞同：0
> 
> 时间：2012-09-29T09:31:58.083
> 
> 标签：mysql, cakephp

我试试这个，但它不工作

```
{
'conditions' => array('Graph.hid' => $hid, 'DATE(Graph.created) = DATE_SUB(CURDATE(), INTERVAL 1 DAY)', 'Graph.number'=>2)
} 
```

实际上需要前一天的当前时间数据。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:34:46.737

如果您有 DATETIME ，则可以像这样在查询（查找）中使用 BETWEEN ：

```
$yesterday = date("Y-m-d", (time()-86400));
$query = 'SELECT * FROM table WHERE registration between '."'$yesterday 00:00:00'".' and '. "'$yesterday 23:59:59'"; 
```

蛋糕之间是：

```
array('Post.read_count BETWEEN ? AND ?' => array(1,10)) 
```

计算最后一天的其他方法：

```
date("Y-m-d", time() - 86400);
date("Y-m-d", strtotime("yesterday")); 
date("Y-m-d", strtotime("-1 day")); 
```

# json - 需要使用 jQuery.ajax 发布 json 数据

> ID：12651576
> 
> 赞同：0
> 
> 时间：2012-09-29T09:32:28.753
> 
> 标签：json, jquery, post

我有一个以下格式的 json，需要通过 POST 方法在 Ajax 请求中发送：

```
 {
    “gbus”: [
        {
            "code": "*"
        }
    ],
    “regions”: [
        {
            "code": "*"
        }
    ],
    “offices”: [
        {
             "code": "*"
        }
    ],
    “contracttypes”: [
        {
            "code": "*"
        }
    ],
    “jobnumbers”: [
        {
            "code": "*"
        }
    ],
    “disciplines”: [
        {
            "code": "*"
        }
    ]
    } 
```

它对我不起作用，`500`当我尝试提交时总是出错。如果您有任何想法，请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:41:21.880

你能再改一下给双引号（“）吗？见“gbus”：应该是“gbus”

这是有效的 JSON

```
{
    "gbus": [
        {
            "code": "*"
        }
    ],
    "regions": [
        {
            "code": "*"
        }
    ],
    "offices": [
        {
            "code": "*"
        }
    ],
    "contracttypes": [
        {
            "code": "*"
        }
    ],
    "jobnumbers": [
        {
            "code": "*"
        }
    ],
    "disciplines": [
        {
            "code": "*"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:46:18.227

```
varJson =  {
    “gbus”: [
        {
            "code": "*"
        }
    ],
    “regions”: [
        {
            "code": "*"
        }
    ],
    “offices”: [
        {
             "code": "*"
        }
    ],
    “contracttypes”: [
        {
            "code": "*"
        }
    ],
    “jobnumbers”: [
        {
            "code": "*"
        }
    ],
    “disciplines”: [
        {
            "code": "*"
        }
    ]
};

$.post("server.php", {'jsonPost[]': varJson}, function(data) {
    alert(data);
}); 
```

您需要配置服务器才能接收`$_POST('varJson')`

# wordpress - Wordpress 表单管理器 - 电子邮件问题

> ID：12651594
> 
> 赞同：0
> 
> 时间：2012-09-29T09:34:41.313
> 
> 标签：wordpress, phpmailer

提交表单时，用户没有收到电子邮件通知。

应该是什么问题？

[http://wordpress.org/extend/plugins/wordpress-form-manager/](http://wordpress.org/extend/plugins/wordpress-form-manager/)

谁能帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:27:46.793

您需要设置一个 SMTP 服务器。php.ini 中的 SMTP 值应该重定向到有效的 SMTP 服务器。

此链接可能会帮助您使用 Gmail 的 SMTP [http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/](http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/)

# c++ - 着色器中的 DirectX 着色器资源视图

> ID：12651597
> 
> 赞同：7
> 
> 时间：2012-09-29T09:34:56.060
> 
> 标签：c++, directx, shader, hlsl, compute-shader

我现在有点困惑，只是想请大家帮助我澄清一些想法。

在 HLSL 着色器（例如计算着色器）中，我可以声明一个 StructuredBuffer sb，对吗？我是否必须将其绑定到寄存器，例如：register(t0)？

从应用程序端，我可以调用 CSSetShaderResources(...)。第一个参数（StartSlot），它与寄存器声明中“t”后面的小数字有什么关系？

如果我将 StartSlot 设置为 0（例如），并将第二个参数设置为 2。我是否告诉 API 我将绑定两个着色器资源视图，一个在 register(t0) 中，另一个在 register(t1) 中？

如果我声明 Texture2D tex[10] : register(t0) 我可以通过调用 CSSetShaderResources(0, 10, ...) 来设置它。这是否意味着寄存器（t0~t9）都用完了？

抱歉，问题如此“迅速”，但我真的很困惑，我的一些测试似乎给出了令人困惑的结果......

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T13:42:08.403

所以我们按顺序回复：

是的，您当然可以在计算着色器中声明一个 StructuredBuffer（实际上您可以为任何类型的着色器声明它）。

如果您不使用效果框架（技术），则需要声明一个寄存器，因此着色器将知道从哪里读取您的数据（使用效果框架它只是在后台执行，但您仍然可以明确声明）。

CSSetShaderResources 告诉从起始槽绑定 N 个资源，因此您对使用 0,2 的描述是正确的。

对于纹理数组，我不得不运行 PIX 来检查它，但这确实是你所说的方式。

```
Texture2D tex[10] : register(t0); 
```

这意味着每个纹理索引将从您指定的寄存器开始分配一个插槽，因此您需要调用 CSSetShaderResources(0,10,srvarray) 来设置它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T10:39:48.270

很酷的解释！我也很困惑，在你的问题和解释之后，我很清楚！

但我为这篇文章找到了一个很好的例子，我想分享一下。似乎它为每个 SetShaderResources 类型启动了插槽的计数器。所有着色器（VS、HS、DS、PS）似乎都有自己的计数器。这是来自 NVidia 示例的代码：

着色器类代码：

```
pd3dDeviceContext->HSSetShaderResources( 0, 2, Resources ); 
pd3dDeviceContext->HSSetShaderResources( 8, 1, &m_pRegularWatertightTexSRV );
pd3dDeviceContext->HSSetShaderResources( 9, 1, &m_pQuadWatertightTexSRV );
pd3dDeviceContext->HSSetShaderResources( 2, 1, &pHeightMapTextureSRV );
pd3dDeviceContext->DSSetShaderResources( 2, 1, &pHeightMapTextureSRV );
pd3dDeviceContext->PSSetShaderResources( 2, 1, &pHeightMapTextureSRV );
pd3dDeviceContext->PSSetShaderResources( 10, 1, &pNormalMapTextureSRV );
pd3dDeviceContext->PSSetShaderResources( 3, 1, &pTexRenderRV11 ); 
```

第一个是持有两个资源，因此下一个插槽（第 4 行）必须为起始插槽（0+2=2）添加 2。每个 SetShaderResources 都必须以 0 开头，但您可以在代码中的不同位置执行此操作，因此这里没有用于 DS 和 PS 的 0 插槽。有时，如果您删除一条线，它仍然可以工作，但数据会被推迟。现在您在 HLSL 中的第 t0、t1、t8 和 t9 行看到前四个寄存器被绑定到其他地方。

HLSL 代码：

```
Texture2D<float> GregoryStencil               : register( t0 ); 
Texture2D<uint>  Index                        : register( t1 );    
Texture2D<float>  g_txHeight                  : register( t2 );       
Texture2D<float> g_depth                      : register( t3 ); 
Texture2D g_FloorTexture                      : register( t4 );  
Texture2D<float3>  regularPatchControlPoints  : register( t5 ); 
Texture2D<float3>  gregoryPatchControlPoints  : register( t6 ); 
Texture2D<float4>  g_floorHeight              : register( t7 );   
Texture2D<float2>  RegularWatertightUVs       : register( t8 );  
Texture2D<float2>  QuadWatertightUVs          : register( t9 );  
Texture2D<float3>  g_txNormal                 : register( t10 ); 
```

# android - 如何以 dp 值设置视图的LayoutMarginBottom（不是像素）

> ID：12651603
> 
> 赞同：0
> 
> 时间：2012-09-29T09:36:18.760
> 
> 标签：android

我想在 dp 中设置视图的 layoutMarginBottom 即`layoutParams.bottomMargin = 90dp;`而不是像素。我已经尝试了 dp 到像素的转换公式，但它们在每种情况下都不相同，这意味着该值与设备屏幕的密度不同。请告诉我该怎么做？在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:44:27.590

你可以这样设置，这里我动态排列布局边距。。

```
layoutparams.setMargins((int) getResources().getDimension(R.dimen.margin), 0, 
                        (int) getResources().getDimension(R.dimen.margin), 0); 
```

首先将这些值存储在`dimensions.xml`文件中`values folder`

```
<?xml version="1.0" encoding="utf-8"?>
      <resources>
        <dimen name="margin">8dp</dimen> 
      </resources> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T09:45:26.280

使用以下方法：

```
float marginPixels = TypedValue.applyDimension(
                    TypedValue.COMPLEX_UNIT_DIP, 90, getResources().getDisplayMetrics()); 
```

# asp.net - 网络用户控件

> ID：12651606
> 
> 赞同：0
> 
> 时间：2012-09-29T09:36:33.560
> 
> 标签：asp.net

我在 asp.net 项目中创建了 web 用户控件，我想在表单中添加动态 web 用户控件，如何在数据表中动态 web 用户控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:52:24.563

您可以使用[LoadControl()](http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcontrol.aspx)方法

**例子 ：**

```
Control CT = LoadControl("Control Path");
PlaceHolder1.Controls.Add(CT); 
```

# c# - 图像未在第二次向前的电子邮件模板中显示

> ID：12651607
> 
> 赞同：1
> 
> 时间：2012-09-29T09:36:35.590
> 
> 标签：c#, asp.net, image, email-templates, massmail

好朋友，

我有一个带有简单邮件模板（HTML 和少量图像）的群发邮件程序。我的图像显示有问题。我的客户没有收到邮件中的图像。有时他们会收到一封包含所有图像的邮件，但是如果他们将同一封电子邮件转发给其他人，他们就无法在转发的邮件中获得图像。

我真的不知道这种方法发生了什么。在大多数情况下，第二次转发的邮件都没有正确显示图像。

例如，**考虑我向客户端 A 发送邮件**，

在这里，客户 A 将收到一封带有图片的邮件。此外，如果客户 A 将相同的消息转发给人 B，那么人 B 不会在转发的电子邮件中获得图像。我正在使用以下方法在邮件模板中嵌入图像：

```
StringBuilder sb = new StringBuilder(" <some html content> <img src=\"cid:main.png\"  alt=\"\" border=\"0\" usemap=\"#Map\"> </html content ends here>");

Attachment imgMain = new Attachment(Server.MapPath("main.png"));
imgMain.ContentId = "main.png";
MailMessageObject.Attachments.Add(imgMain); 
```

我尝试直接绕过服务器的图像路径，而不是附件。如下所示：

```
StringBuilder sb = new StringBuilder(" <some html content> <img src=\"www.mydomain.com/images/main.png\"  alt=\"\" border=\"0\" usemap=\"#Map\"> </html content ends here>"); 
```

但是，结果是一样的，请帮助解决这个问题

# javascript - jQuery将html文件加载到

> ID：12651609
> 
> 赞同：0
> 
> 时间：2012-09-29T09:37:05.707
> 
> 标签：javascript, jquery, html

我想知道如何使用 html 文件并用它来替换

我知道你可以用 jquery 做到这一点，但由于某种原因它不适合我。我有：

```
$(document).ready(function() {    
    $('#nav li a').click(function(){  
        var toLoad = $(this).attr('href');  
        $('#main').hide('fast',loadContent);   
        function loadContent() {  
            $('#main').load(toLoad);  
        }  
        return false; 
    });  
}); 
```

因此，每当我从导航栏中单击链接时，它应该编辑#main div 并调出相应的 html 文件以替换 div。出于某种原因，它只是将其留空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:50:31.037

检查这一行

```
 $('#main').hide('fast',loadContent); 
```

它隐藏了您正在加载内容的 div。如果你再次显示那个 div，你可以看到 div 上的内容。所以

```
 Change 

 $('#main').load(toLoad);

 to 

 $('#main').load(toLoad).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:50:50.313

你可以试试这个

```
$(document).ready(function(){ 
    $('#nav li a').click(function(e){  
        e.preventDefault();
        var toLoad = $(this).attr('href');
        $('#main').hide('fast', function(){  
            $('#main').load(toLoad, function(){
                $('#main').show('fast');
            });  
        });
    });
}); 
```

`$('#main').hide('fast',loadContent);`隐藏了`div`所以需要再次显示它，所以我`$('#main').show('fast');`在加载的回调函数中使用了它。

# c++ - 调试在调试器中不会发生的崩溃

> ID：12651614
> 
> 赞同：1
> 
> 时间：2012-09-29T09:37:28.207
> 
> 标签：c++, debugging, stl, crash

我将一段单片代码拆分为动态加载的库并`main()`调用它。除了 stdc++，我没有使用其他库，也没有任何类，只是一个没有成员函数的模板结构。我没有明确分配任何内存，也没有删除或释放代码中的任何内容。我确实使用从`list<T>`.

切换到 library + main 后，我遇到了间歇性崩溃。

`*** glibc detected *** : free(): invalid pointer:`

从回溯来看，似乎涉及到一个列表迭代器，但名称错位符号让人很难确定。

但是它不会在 gdb 中崩溃，valgrind 也不会检测到任何内存损坏或泄漏。

我以前没有构建共享库。这就是我正在使用的

`g++ -fPIC -shared library_src.cpp -o libblaH.so`

`g++ main.cpp -lblaH`

整个库都在一个源文件中，库函数被包装在一个 `extern "C"`块中，以便 c 用户可以访问它，但现在我正在用 g++ 编译 main() 作为 c++ 代码。

现在，当我添加优化选项时，`-O2`（特别是）我开始遇到崩溃。

我试过`electricfence`它说无效指针不是由malloc分配的。

我将不胜感激有关如何追捕该错误的建议。我的感觉是我在某处使列表迭代器失效，但我不确定。我认为它们不能失效，除了已删除的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:51:43.740

出于某种原因，这对我来说是未初始化的变量。许多年前，当我像这样按小时向公司收费以帮助调试崩溃时，有一半的时间，问题是未初始化的变量。

我会使用的方法是：

1.  系统地初始化所有变量，并在声明时将它们全部初始化。绝对没有例外。
2.  寻找无效的迭代器。即指向已擦除对象的迭代器无效，不应使用。
3.  寻找变量劫持。即具有相同名称的变量在同一个翻译单元中工作正常，但在单独的翻译单元中不起作用。
4.  查找不安全的函数调用，例如 sprintf，其中格式字符串与参数不匹配。
5.  使用#pragma 选择性地禁用部分代码的优化以缩小问题区域。有点像二分查找；禁用第一半，仍然崩溃，第二半出现问题，禁用第一半和第二半的 1/2...

我假设不涉及多个线程。当涉及线程时，可能会出现更多问题。当我在客户现场被聘用时，我总是让他们先初始化所有变量，然后再启动任何调试器。50% 的时间我可以在第 1 步之后回家。

# python - 使用 numpy.median 与其他函数聚合 pandas groupby 对象的结果不一致

> ID：12651618
> 
> 赞同：6
> 
> 时间：2012-09-29T09:37:40.367
> 
> 标签：python, numpy, aggregate, pandas

使用 DataFrame（pandas 作为 pd，numpy 作为 np）：

```
test = pd.DataFrame({'A' : [10,11,12,13,15,25,43,70],  
                     'B' : [1,2,3,4,5,6,7,8],  
                     'C' : [1,1,1,1,2,2,2,2]})

In [39]: test
Out[39]: 
    A  B  C
0  10  1  1
1  11  2  1
2  12  3  1
3  13  4  1
4  15  5  2
5  25  6  2
6  43  7  2
7  70  8  2 
```

按 'C' 对 DF 进行分组并使用 np.mean 进行聚合（也是 sum、min、max）在组内产生按列聚合：

```
In [40]: test_g = test.groupby('C')

In [41]: test_g.aggregate(np.mean)
Out[41]: 
       A    B
C            
1  11.50  2.5
2  38.25  6.5 
```

但是，看起来使用 np.median 进行聚合会在组内产生 DataFrame-wise 聚合：

```
In [42]: test_g.aggregate(np.median)
Out[42]: 
      A     B
C            
1   7.0   7.0
2  11.5  11.5 
```

（虽然使用`groupby.median`方法似乎会产生预期的列式结果）

我将不胜感激解决以下问题：

1.  这种结果的原因/机制是什么？
2.  如果此行为得到确认，它将如何影响聚合分组的推荐“最佳实践”？其他聚合函数可以这样工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T11:44:59.370

原因很可笑。可能一些 pandas 专家会想插话，但这归结为 numpy 和 pandas 之间的乒乓球。请注意，文档说：

> 用于聚合组的函数。如果是函数，则必须在传递 DataFrame 或传递给 DataFrame.apply 时工作。如果传递 dict，则键必须是 DataFrame 列名

第一件事是 2D (array_like)，第二种方法归结为 1D array_likes 被传递给您提供的函数。

这意味着聚合首先传入 2D 系列。在第一种情况下 ( `np.mean`)，numpy 知道数组有一个`.mean`属性，所以它会做它一直做的事情。但是它用`axis=None`（numpy的默认值）调用它。这使得 Pandas 抛出一个异常（它希望轴为 0 或 1，并且从不为 None），然后进入第二步，将其作为 1D 传递并且是万无一失的。

但是，当您输入`np.median`numpy 数组时没有该`.median`属性，因此它会执行正常的 numpy 机制，即展平数组（即通常是`axis=None`）。

解决方法是使用`test_g.aggregate([np.median, np.median])`强制它始终采用第二条路径。或者什么也可以：`test_g.aggregate(np.median, axis=0)`它将传递`axis=0`到`np.median`，从而告诉numpy如何正确处理它。一般来说，我想知道熊猫是否至少不应该发出警告，毕竟将结果广播到两列应该几乎不是想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T00:42:15.470

另外作为一种解决方法，请注意 pandas 具有用于常见操作的快捷方法：

```
In [12]: test.groupby('C').mean()
Out[12]: 
       A    B
C            
1  11.50  2.5
2  38.25  6.5

In [13]: test.groupby('C').median()
Out[13]: 
      A    B
C           
1  11.5  2.5
2  34.0  6.5 
```

对于 sum、mean、median、max、min、first、last、std 之类的东西，您可以直接调用该方法，而不必担心应用到 DataFrame-but-failover-to-each-column 机制GroupBy 引擎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T11:41:02.917

我怀疑这是一个错误......所以[我在这里添加了它](https://github.com/pydata/pandas/issues/1989)。

同时（如果你原谅双关语），你可以使用[.agg](http://pandas.pydata.org/pandas-docs/dev/groupby.html?highlight=agg#applying-multiple-functions-at-once)方法：

```
test_g.agg([np.mean,np.median])
        A             B        
     mean  median  mean  median
 C                             
 1  11.50    11.5   2.5     2.5
 2  38.25    34.0   6.5     6.5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T00:27:22.337

从 v 0.12 开始引入 DataFrame.median：http: [//pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.median.html](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.median.html)

在 v 0.12 之前，我认为该方法不存在。相反，您可以使用 numpy.median

# mysql - MySQL 150 表创建表单 mysql 工作台错误（外键选项与列中的非空值冲突，已修复）

> ID：12651619
> 
> 赞同：2
> 
> 时间：2012-09-29T09:37:45.837
> 
> 标签：mysql, mysql-workbench, mysql-error-1005, forward-engineer

因此，当我从 mysql 工作台对模式进行转发工程时，我收到了 150 个错误。

我确保所有 pk 和 fk 都具有相同的类型。所有表都是innodb引擎。

也许我在这里遗漏了一些愚蠢的东西（如果我这样做了，我会道歉），但您的帮助将不胜感激。

这是失败并出现 150 错误的脚本：

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

SHOW WARNINGS;
CREATE SCHEMA IF NOT EXISTS `bis` DEFAULT CHARACTER SET latin1 ;
SHOW WARNINGS;
USE `bis` ;

-- -----------------------------------------------------
-- Table `bis`.`entities`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bis`.`entities` ;

SHOW WARNINGS;
CREATE  TABLE IF NOT EXISTS `bis`.`entities` (
  `entity_name` VARCHAR(64) NOT NULL ,
  `entity_description` TEXT NULL DEFAULT NULL ,
  `entity_email` TEXT NOT NULL ,
  `entity_phone` VARCHAR(11) NULL DEFAULT NULL ,
  `entity_website` VARCHAR(64) NULL DEFAULT NULL ,
  PRIMARY KEY (`entity_name`) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `bis`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bis`.`users` ;

SHOW WARNINGS;
CREATE  TABLE IF NOT EXISTS `bis`.`users` (
  `user_name` VARCHAR(64) NOT NULL ,
  `user_entity` VARCHAR(64) NOT NULL ,
  `user_email` TEXT NOT NULL ,
  `user_password` CHAR(64) NOT NULL ,
  `user_salt` CHAR(64) NOT NULL ,
  `user_role` VARCHAR(45) NOT NULL ,
  `user_realName` VARCHAR(64) NOT NULL ,
  `user_surname` VARCHAR(64) NOT NULL ,
  `user_IDnumber` VARCHAR(13) NOT NULL ,
  `user_cellNumber` VARCHAR(11) NOT NULL ,
  PRIMARY KEY (`user_name`) ,
  INDEX `entity_id` (`user_entity` ASC) ,
  CONSTRAINT `entity_id`
    FOREIGN KEY (`user_entity` )
    REFERENCES `bis`.`entities` (`entity_name` )
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `bis`.`reports`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bis`.`reports` ;

SHOW WARNINGS;
CREATE  TABLE IF NOT EXISTS `bis`.`reports` (
  `report_id` INT NOT NULL AUTO_INCREMENT ,
  `user_name` VARCHAR(64) NOT NULL ,
  `investigator_name` VARCHAR(64) NOT NULL ,
  `report_entity` VARCHAR(64) NOT NULL ,
  `report_finished` TINYINT(1) NULL DEFAULT false ,
  `submit_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
  `finished_date` TIMESTAMP NULL ,
  `report_PDFFile` LONGBLOB NULL ,
  PRIMARY KEY (`report_id`) ,
  INDEX `user_id` (`user_name` ASC) ,
  INDEX `investigator_id` (`investigator_name` ASC) ,
  INDEX `entity_id` (`report_entity` ASC) ,
  CONSTRAINT `user_id`
    FOREIGN KEY (`user_name` )
    REFERENCES `bis`.`users` (`user_name` )
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `investigator_id`
    FOREIGN KEY (`investigator_name` )
    REFERENCES `bis`.`users` (`user_name` )
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `entity_id`
    FOREIGN KEY (`report_entity` )
    REFERENCES `bis`.`entities` (`entity_name` )
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

然后是相应的错误：

```
Executing SQL script in server

ERROR: Error 1005: Can't create table 'bis.users' (errno: 150)

CREATE  TABLE IF NOT EXISTS `bis`.`users` (
  `user_name` VARCHAR(64) NOT NULL ,
  `user_entity` VARCHAR(64) NOT NULL ,
  `user_email` TEXT NOT NULL ,
  `user_password` CHAR(64) NOT NULL ,
  `user_salt` CHAR(64) NOT NULL ,
  `user_role` VARCHAR(45) NOT NULL ,
  `user_realName` VARCHAR(64) NOT NULL ,
  `user_surname` VARCHAR(64) NOT NULL ,
  `user_IDnumber` VARCHAR(13) NOT NULL ,
  `user_cellNumber` VARCHAR(11) NOT NULL ,
  PRIMARY KEY (`user_name`) ,
  INDEX `entity_id` (`user_entity` ASC) ,
  CONSTRAINT `entity_id`
    FOREIGN KEY (`user_entity` )
    REFERENCES `bis`.`entities` (`entity_name` )
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1

SQL script execution finished: statements: 13 succeeded, 1 failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:53:42.350

The table `users` creates an index named `entity_id` and at the same time names the fk constraint `entity_id`.

I believe you cannot have an index and constraint with the same name.

Try this:

```
INDEX entity_id (user_entity ASC) ,
CONSTRAINT fk_user_entity          -- *** this is the change ***
  FOREIGN KEY (user_entity )
  REFERENCES bis.entities (entity_name )
  ON DELETE SET NULL
  ON UPDATE CASCADE 
```

# objective-c - -[NSString intValue] 返回的值与字符串所说的完全不同

> ID：12651621
> 
> 赞同：5
> 
> 时间：2012-09-29T09:38:03.533
> 
> 标签：objective-c, ios, nsstring

我有一个数字字符串，并观察到它`intValue`与其字符串值有很大不同的差异。下面的代码：

```
NSString *string = [result objectForKey:@"id"];
NSLog(@"ID %@",string);
NSLog(@"ID as integer %i",[string intValue]); 
```

给出一个输出：

```
"ID 100004378121454"
"ID as integer 2147483647" 
```

我能做出的唯一合乎逻辑的猜测是字符串太长而无法转换为`int`......无论如何我都尝试过`longLongValue`- 得到不同的结果，但不是应该的结果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-29T09:59:48.827

您的数字（100004378121454）大于简单的 int 可以处理的数字，`long long`在这种情况下您必须使用 type （以免您的数字被截断为 int32 最大值）：

```
NSString *string = @"100004378121454";
NSLog(@"ID %@",string);
NSLog(@"ID as long long %lli",[string longLongValue]); 
```

输出 ：

```
ID              100004378121454
ID as long long 100004378121454 
```

# c# - 如何从winforms应用程序生成exe

> ID：12651626
> 
> 赞同：-1
> 
> 时间：2012-09-29T09:39:15.877
> 
> 标签：c#, .net, winforms, code-generation, exe

我想知道如何使用我的 C# winforms 应用程序生成 .exe 文件？

假设用户想通过我的 winforms 应用程序创建自己的应用程序。他可以在自己的应用程序中选择将自定义标题、自定义文本放入已创建的标签/文本框等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:44:20.163

看看[Microsoft.CSharp.CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:52:07.133

如果您只需要自定义您的应用程序用户可以创建一些 xml 文件：

```
<title>user title</title>
<textbox name="customName"></textbox> 
```

您可以阅读此文件并将控件添加到应用程序的某些字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:51:56.747

CSharpCodeProvider 的另一种替代方法是使用[System.Reflection.Emit](http://msdn.microsoft.com/en-us/library/xd5fw18y%28v=vs.100%29.aspx)命名空间中的类，从[AppDomain.DefineDynamicAssembly](http://msdn.microsoft.com/en-us/library/bs22fky4%28v=vs.100%29.aspx)开始，您可以构造一个程序集，然后可以将其保存到磁盘（通过使用[AssemblyBuilder.Save(string)](http://msdn.microsoft.com/en-us/library/8zwdfdeh%28v=vs.100%29.aspx)）。

如果用户只能进行一些自定义，而它们的功能是事先知道的，请使用可以定义各种选项的配置文件。使用[ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager%28v=vs.100%29.aspx)编辑其他可执行文件的应用程序配置。

例如：

```
var targetConfig = ConfigurationManager.OpenExeConfiguration("MyOtherApplication.exe");
var uiOptions = targetConfig.Sections["UIOptions"];
uiOptions["TitleText"] = _titleTextBox.Text;
targetConfig.Save(); 
```

然后其他应用程序可以使用相同的键读取它：

```
var myUIOptions = (ConfigurationSection)ConfigurationManager.GetSection("UIOptions");
this.Caption = uiOptions["TitleText"] as string; 
```

# box2d - 我如何检测到世界上所有的物体都达到了零速度？

> ID：12651628
> 
> 赞同：2
> 
> 时间：2012-09-29T09:39:36.893
> 
> 标签：box2d, libgdx, jbox2d

我正在使用box2d的java端口。
我想知道，有没有办法检测 box2d 世界中的所有对象何时达到 0 速度？像回调什么的？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:48:32.323

我认为没有回调。但是你仍然可以制定自己的方法并根据每个物体的速度进行扣除。如果您允许睡眠，只需使用该方法测试您的所有身体是否都处于睡眠模式`isAwake()`。

# ruby - rmagick 像素颜色值

> ID：12651632
> 
> 赞同：6
> 
> 时间：2012-09-29T09:40:11.537
> 
> 标签：ruby, colors, bitmap, rmagick, depth

我正在使用 rmagick 来处理获取位图的每个像素。我需要获得深度为 8（256 色）的颜色值，但不幸的是，当我使用像素。[颜色]（例如像素。红色）时，我将它们的深度设为 16。即使在我之后发生这种情况使用 image.quantize(256)。

这是代码：

```
require 'RMagick'
include Magick

image = ImageList.new("image.bmp")
image3 = image.quantize(number_colors = 256)
puts image3.number_colors

image2 = Image.new(image.columns, image.rows)

(0..image.columns).each do |x|
    (0..image.rows).each do |y|
        pixel = image3.pixel_color(x, y)

    print pixel.red
    print ", "
    print pixel.green
    print ", "
    print pixel.blue
    print "\n"

    image2.pixel_color(x, y, pixel)
    end
end 
```

我应该怎样才能得到 0..255 的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T17:59:43.377

它们存储在 16 位的“量子深度”中。您可以重建库来改变这一点。或者您可以简单地将每个值除以 257。

有一个名为 MagickExportImagePixels 的函数可以得到你想要的 8 位像素数据。每当您对图像执行转换等操作时，它将被转换回 16 位像素。

# css - 垂直和水平居中文本

> ID：12651634
> 
> 赞同：0
> 
> 时间：2012-09-29T09:40:18.813
> 
> 标签：css, html

在下面的文档中，是否可以将内部 div 水平居中，或者以其他方式使 V 和 H 的文本都在`outer`类 div 中居中？

一些限制（抱歉在开始时没有指定）： 1\. 不应该指定固定宽度，否则解决方案是微不足道的；2\. 没有 JavaScript，只有纯 CSS 和 HTML。

```
<!DOCTYPE html>
<html>
  <head>
    <title>the title</title>
    <style>

        div.outer {
            /* ? */
        }

        div.inner {
            display: table-cell;
            min-height: 100px;
            vertical-align: middle;
        }

    </style>
  </head>
  <body>
    <div class="outer">
        <div class="inner">
            <p>Vertically centered text. How to center it horizontally?</p>
        </div>
    <div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:55:20.443

试试这个：

```
.outer {
   display: table;
   width: 100%;
}
.inner {
   display: table-cell;
   text-align: center;
   vertical-align: middle;
} 
```

# [*演示*](http://dabblet.com/gist/3803595)

它不使用 JavaScript，也不需要您修复`width`/ `height`/ `line-height`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T09:51:25.283

如果是单行文本，可以使用：

```
div.inner {
  line-height: 100px;
} 
```

随着浏览器支持开始发挥作用，多行变得更加棘手。在 CSS 中按百分比填充可以工作，尽管我发现使用 jQuery 来检测 div.outer 大小然后创建填充是最可靠的方法。

```
$(document).ready(function() {
  var whitespace = $("div.outer").innerHeight() - $("div.inner").innerHeight();
  var padding = Math.round(whitespace / 2);
  $("div.inner").css({
    "padding-top": padding + "px";
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:43:04.593

看看[这个](http://sapandiwakar.wordpress.com/2011/06/05/how-to-center-text-horizontally-and-vertically-in-a-div/)教程。您需要添加`line-height`和`width` 到您的 css 以使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T14:09:21.710

在谷歌搜索并搜索了几个小时后，我终于找到了一个解决方案，可以将一个 div 水平和垂直居中在另一个 div 中。

```
 div.parent {
          display: block;
          text-align: center;
          line-height: 300px; /* the height of parent div */
        }
        div.child {
          display: inline-block;
          vertical-align: middle;
        } 
```

*   它不使用绝对定位，因此您不需要修复子宽度/高度。
*   它不使用 display:table/tablecell，某些版本的 IE 不支持它。
*   它是一个纯 CSS 解决方案，即使子 div 是动态加载的，也无需编写 javascript。

希望这可以帮助为此受苦的人。

# asp.net - 具有自触发 Ajax 请求的递归 JQuery 函数

> ID：12651636
> 
> 赞同：1
> 
> 时间：2012-09-29T09:40:34.907
> 
> 标签：asp.net, jquery

我有一个 JQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function (){
    $('#<%=btnUpload.ClientID %>').click(function NewRequest(){
        $.ajax({
            type: "POST",
            url: "../Admin/FileUpload.aspx/<- Hear is [WebMethod, ScriptMethod]->",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            cache: false,
            success: function GettingResponse(msg)
            {
                if(msg = 'Upload Completed SuccessFully')
                {
                    $('#myDiv').text(msg.d);
                }
                else
                {
                    $('#myDiv').text(msg.d);
                    NewRequest();
                }
            }
        })
        return false;
    });
  });
</script> 
```

我想递归调用“GettingResponse”函数，以便在服务器的每个响应中我可以向客户端显示一些文本，然后再次向服务器发送请求

我不知道出了什么问题，因为我也不知道 Ajax 和 Jquery.. 任何其他满足我要求的解决方案也会很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:39:34.370

`click`当函数失败时，您可以尝试再次调用该函数：

```
$('#<%=btnUpload.ClientID %>').click(function() {
    $.ajax({
        .....
        .....
        success: function GettingResponse(msg)
        {
            if(msg = 'Upload Completed SuccessFully')
            {
            }
            else
            {
                $('#<%=btnUpload.ClientID %>').click();
            }
        }
    })
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T09:14:25.090

> $('#<%=btnUpload.C​​lientID %>').click();

我试过这个但没有用......我得到答案的任何方式

@Erwin 谢谢亲爱的你，你提出了一个可以处理不同任务的好东西

# facebook - facebook评论框的标准限制是什么

> ID：12651637
> 
> 赞同：-1
> 
> 时间：2012-09-29T09:40:36.683
> 
> 标签：facebook

我使用 facebook 评论框审核工具。在设置菜单下，有一个选项：

黑名单词->标准 Facebook 限制

我在哪里可以找到所有列表来检查一些单词？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:34:36.863

不知道有没有公开的名单。

如果有的话，我可以很容易地查看上面有哪些文字，并在发帖时选择其他人来侮辱你……这会有点挫败使用这样的过滤器。（但无论如何，此类过滤器的有效性值得怀疑。如果您阻止*badword*，“创意”用户很可能会尝试其他形式的拼写，*b*a*d*w*o*r*d* 或使用*1337 5P34K*或类似的东西。）

当激活 Facebook 页面的亵渎阻止列表时，他们提供的唯一解释是，

> 脏话黑名单
> 
> Facebook 将屏蔽被更广泛的社区标记为冒犯性的最常报告的单词和短语。

# android - 如何在android中启用幻灯片放映？

> ID：12651638
> 
> 赞同：1
> 
> 时间：2012-09-29T09:40:43.723
> 
> 标签：android, slideshow

我正在该应用程序中做一个示例画廊应用程序，我有一组 10 张图像，在这里我成功添加了幻灯片放映（在特定时间间隔内连续显示 10 张图像）。在这里，我最初在 GridView 中显示图像，一旦用户单击任何图像，它将显示在图像视图中，在这里我添加此功能，**如果用户不做任何事情（所选图像显示在 Imageview ) 2 到 3 分钟的意思，这里我启用了幻灯片功能**。我不知道如何启用此功能，非常感谢您的指导，谢谢。

# c# - 在以下代码中使用 Cast 和 AS 运算符的区别？

> ID：12651639
> 
> 赞同：0
> 
> 时间：2012-09-29T09:40:53.070
> 
> 标签：c#

> **可能重复：**
> [直接转换与“as”运算符？](https://stackoverflow.com/questions/132445/direct-casting-vs-as-operator)

谁能说出代码片段之间的实际区别？

```
var unknown = (object)new List<string>();

// Snippet 1: as operator
foreach (var item in unknown as IList<int>) {
 // Do something with item
}

// Snippet 2: cast operator
foreach (var item in (IList<int>)unknown) {
 // Do something with item
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:42:30.523

as 运算符不会引发错误，但 cast 会引发错误`InvalidCastException`

来自[MSDN](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)

as 运算符类似于强制转换，只是它在转换失败时产生 null 而不是引发异常。

`expression as type`

相当于：

`expression is type ? (type)expression : (type)null`

除了该表达式只计算一次。

请注意， as 运算符仅执行引用转换和装箱转换。as 运算符不能执行其他转换，例如用户定义的转换，而应使用强制转换表达式执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:49:12.947

使用 as 运算符在三个重要方面不同于 C# 中的强制转换：

1.  当您尝试转换的变量不是请求的类型或不在其继承链中时，它返回 null，而不是引发异常。

2.  它只能应用于转换为引用类型的引用类型变量。

3.  使用 as 不会执行用户定义的转换，例如隐式或显式转换运算符，而强制转换语法将执行此操作。

**[参考博客](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-s-the-difference-between-cast-syntax-and-using-the-code-as-code-operator.aspx)**

# iphone - UITable 重叠并且表格不会在 iPhone 中重新加载

> ID：12651645
> 
> 赞同：0
> 
> 时间：2012-09-29T09:41:57.997
> 
> 标签：iphone, objective-c, xcode, uitableview

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    if(tableView==logTable)
    {

        lbl_description=[[UILabel alloc] init];
        [cell.contentView addSubview:lbl_description];
        lbl_description.backgroundColor = [UIColor clearColor];
        lbl_description.textColor=[UIColor darkGrayColor];
        lbl_description.font = [UIFont systemFontOfSize:18];

        lbl_date=[[UILabel alloc] init];
        [cell.contentView addSubview:lbl_date];
        lbl_date.backgroundColor = [UIColor clearColor];
        lbl_date.textColor=[UIColor lightGrayColor];
        lbl_date.font = [UIFont systemFontOfSize:14];

        lbl_description.frame=CGRectMake(10, 3, 300, 25);
        lbl_date.frame=CGRectMake(10, 23, 300, 25);//left

        lbl_description.text = [getName objectAtIndex:indexPath.row];
        lbl_date.text=[getStartDate objectAtIndex:indexPath.row];

    }

            return cell;
} 
```

UITable 重叠，当我尝试重新加载它时，它不会动态更新自身。我使用表重新加载进行重新加载，但我仍然没有得到解决方案。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:55:09.547

remove `cell==nil` loop, the overlapping does not happen..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:56:45.347

Try allocatinge the lbl_date and description label in the if loop of cell= nil and add it to cell contentview it in the same if loop.only add text to the labels outside the if cell== nil loop;what you Are currently doing is allocating and adding the labels every time the delegate method is called

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:50:44.637

我认为问题是您的单元格内容大于单元格高度。

`heightForRowAtIndexPath`UITableView的实现方法

```
- (CGFloat)tableView:(UITableView *)tv heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 70.0f;
} 
```

# ajax - html/css Web 应用程序的后端选项

> ID：12651651
> 
> 赞同：1
> 
> 时间：2012-09-29T09:43:05.413
> 
> 标签：ajax, ipad, web-applications, content-management-system, backend

这是我在这里的第一篇文章，根据我习惯从这个社区看到的答案的质量，我希望你们中的一个可以帮助我......

我目前正在基于 lynda.com 的教程开发 iPad 网络应用程序。(http://goo.gl/Hpvaa) 基本上，该应用程序自包含在一个页面上，并通过 Ajax 从多个 HTML 动态加载内容文件。（否则应用程序将在单击链接时在 safari 中打开，而不是使用 iOS 的添加到主屏幕功能保持“原生”。一切都按预期工作，但不是使用 HTML 文件作为内容，我想使用某种 CMS，所以更新可以由非编码人员完成。现在我正在寻找可以输出到平面 HTML 文件的 CMS，但它非常有限，并且不允许自定义字段或精确设置。

所以我的问题是能够通过基于 Web 的管理面板更新内容的最佳 CMS 或其他后端解决方案是什么。我（显然）不是一个非常有经验的程序员，所以最简单的更好。在此先感谢所有伟大的编码人员和开发人员...

# jpa - 理解 FetchType.Lazy，在 JPQL 查询中强制 (OpenJPA)

> ID：12651655
> 
> 赞同：2
> 
> 时间：2012-09-29T09:43:24.903
> 
> 标签：jpa, persistence, jpql, openjpa

我有一个这样的实体：

```
public class Configuration {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    @Element(name = "user_id", data = true, required = false)
    private Users users;
} 
```

我想要定义一个查询，其中一次执行 LazyLoading，另一次不执行。

但是查询：

```
@NamedQuery(name = "getNondeletedConfiguration", query = "SELECT c FROM Configuration c  "
                     + "LEFT JOIN c.users users WHERE c.deleted = false"), 
```

不将用户加载到对象中。

强制加载用户对象的方法是访问代码中某处的属性。但是，这不起作用，我不想要这种行为。我想仅根据我的 JPQL 语句来控制延迟加载。我不希望 openJPA 神奇地加载对象，因为它通过 Java 代码中某处的 get 方法检测到访问。

我想这是一个普遍的问题，我只是误解了一些东西。但是，我找不到有关该问题的文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T10:43:04.390

您需要添加`fetch`关键字来加载关联：

```
select c from Configuration c left join fetch c.users where c.deleted = false 
```

请注意，`Users`代表一个用户的实体的名称选择得非常糟糕，而且非常混乱。字段名称相同`users`。您应该删除 final `s`，这会使每个读者都认为一个配置有很多用户。

# php - 使用 OpenID 登录 Youtube

> ID：12651660
> 
> 赞同：1
> 
> 时间：2012-09-29T09:43:47.490
> 
> 标签：php, openid, youtube-api

我想创建一个 web 应用程序，它可以获取有关 favourist 的信息，或者创建了另一个列表。所以，我首先想到的是`How to login youtube with Google OpenID?`，然后我搜索但我没有得到任何有用的信息。也许，我的关键字有问题，因为我认为谷歌必须支持它，但我不确定。所以，我想问一下`Can I login to youtube account with Google OpenID in another site to fect user data if they login successful?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:51:13.813

Youtube 使用 Google OpenID 接口。

这篇文章通过 PHP OpenID 身份验证示例对 OpenID 身份验证有一些很好的参考：[https ://stackoverflow.com/questions/76184/php-tutorial-for-openid-and-oauth](https://stackoverflow.com/questions/76184/php-tutorial-for-openid-and-oauth)

以下是有关其帐户的 OpenID 身份验证的 Google 特定页面：[https ://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:52:59.983

使用谷歌身份工具包。

它一步一步地引导你如何设置它，它为你提供了你需要的所有代码。

[https://developers.google.com/identity-toolkit/](https://developers.google.com/identity-toolkit/)

# css - IE中菜单的css问题

> ID：12651661
> 
> 赞同：0
> 
> 时间：2012-09-29T09:44:06.887
> 
> 标签：css

下一页有一个带有儿童的顶部菜单。

[http://www.businesseventsydney.com.au/about-us/](http://www.businesseventsydney.com.au/about-us/)

在 IE9 中，如果您将鼠标稍微缓慢地移入子项，子菜单会突然消失。就好像它击中了一个像素的空间或其他东西，导致菜单崩溃。您需要快速进入子菜单以避免发生这种崩溃。谁能发现可能导致这种情况的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:52:05.283

请试试这个：

将 padding-bottom 从 14px 更改为 17px

```
#top-nav li a
{
    padding-bottom:17px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:43:03.193

改变#top-nav li ul whit这可能有帮助

```
#top-nav li ul { 
 position : absolute;
 margin : 33px 0 0px 0;
 padding : 0 ;
 width : 184px;
 clear : both;
 font-size: 0.8em;
 z-index : -1;
 left: -999em;
 text-align: left;
 border-bottom: none !important;
} 
```

# apache-flex - 错误“无法解析 MXML 语言版本。”

> ID：12651683
> 
> 赞同：1
> 
> 时间：2012-09-29T09:46:42.143
> 
> 标签：apache-flex, flex4.5

我有一个 MXML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="library://ns.adobe.com/flex/mx" layout="absolute" backgroundcolor="[#000000, #666666]">
    <mx:Label fontSize="40" text="Hello World!"
             verticalCenter="0" letterSpacing="2" >
        <mx:filters>            
            <mx:GlowFilter color="#dddddd"/>
        </mx:filters>
    </mx:Label>
</mx:Application> 
```

我在 Flex 项目的上述 MXML 代码中收到以下错误。

```
Unable to resolve MXML language version. Please specify the language namespace on the root document tag. 
```

请让我知道我该如何纠正这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:26:52.797

如果您尝试使用 Flex 4.x 编译器编译 Flex 3 应用程序，您必须更改 mx 命名空间 uri 并添加“fx”命名空间。在 3.x 项目中，如果不需要迁移，我建议坚持使用旧的 3.x 编译器/框架。如果您出于任何原因需要使用 4.x，请查阅文档，因为需要进行一些其他修改（CSS、兼容性编译器选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:35:28.500

在将代码更改为下面的代码时，它运行良好。

```
 <?xml version="1.0" encoding="utf-8"?>
      <mx:Application xmlns:mx="library://ns.adobe.com/flex/mx          xmlns:fx="http://ns.adobe.com/mxml/2009" backgroundColor="#000000">
            <mx:Label fontSize="40" text="Hello World!" verticalCenter="0" letterSpacing="2" >
        <mx:filters>            
            <mx:GlowFilter color="#dddddd"/>
        </mx:filters>
    </mx:Label>
   </mx:Application> 
```

# asp.net - System.AccessViolationException：试图读取或写入受保护的内存

> ID：12651684
> 
> 赞同：3
> 
> 时间：2012-09-29T09:46:44.820
> 
> 标签：asp.net, vb.net, oledb

尝试从服务器中的 excel 文件中读取时出现以下错误。

**“System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏。”**

代码在本地主机中运行顺利，但是当我在线托管时出现错误。

我无法发布堆栈跟踪，因为我每次都没有收到错误，但执行停止在**"objConn.open"**行。该页面只是说正在加载......并且没有任何反应。

**这是我的代码块：**

```
 fuGroupAttributes.SaveAs(IO.Path.Combine(Server.MapPath("~/Admin/SpecificationExcels"), lblParentId.Text.Trim & IO.Path.GetExtension(fuGroupAttributes.FileName)))
'saving the excel file from the fileUploader

                           Dim path As String = Server.MapPath("~/Admin/SpecificationExcels/" & lblParentId.Text.Trim & IO.Path.GetExtension(fuGroupAttributes.FileName))
'getting the file path from the server

                           Dim connectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & path & ";Extended Properties=Excel 12.0;"
                           Dim objConn As New OleDbConnection(connectionString)
                           **objConn.Open()** 'this is where i am getting the error.
                           Dim strConString As String = "SELECT * FROM [Sheet1$]" 
```

编辑：页面一直说加载...它不会停止加载...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:28:05.917

最可能的原因是，您机器上的用户帐户没有足够的权限来执行此操作。在 localhost 上，您可能正在使用管理员帐户，而在现场机器中并非如此。

# asp.net - MVCMailer 脚手架不起作用

> ID：12651690
> 
> 赞同：0
> 
> 时间：2012-09-29T09:48:03.187
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, mvcmailer

我使用 NuGet 包管理器在 VS2012 Express Web 中安装 MVCMailer - 并得到一个绿色勾号，表示它已正确安装。

但是，当尝试使用 Scaffold 命令设置模板/视图时，我看到以下内容：

```
PM> Scaffold Mailer.Razor UserMailer BookingUpdate
Invoke-Scaffolder : A positional parameter cannot be found that
accepts argument 'UserMailer'.
At line:1 char:9
+ Scaffold <<<<  Mailer.Razor UserMailer BookingUpdate
+ CategoryInfo          : InvalidArgument: (:) [Invoke-Scaffolder],
ParameterBindingException
+ FullyQualifiedErrorId : PositionalParameterNotFound,
T4Scaffolding.Cmdlets.InvokeScaffolderCmdlet 
```

有什么想法我哪里出错了吗？

谢谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:14:08.327

经过更多研究，我安装了 T4Scaffold - 并重新启动了 VS - 它工作正常。我希望这对其他人有帮助。

标记

# java - 要么显示最大小数位数，要么根本不显示

> ID：12651694
> 
> 赞同：2
> 
> 时间：2012-09-29T09:48:54.717
> 
> 标签：java, android

目前，使用`DecimalFormat`我想显示最大小数位数，或者根本不显示。例如，

1.  100.0 显示为**“100”**
2.  100.123 显示为**“100.123”**
3.  100.123456789012345 显示为**“100.123456789012345”** 使用格式为

`new DecimalFormat("0.###");`部分正确。它适用于第一种情况，第二种情况，但不适用于第三种情况。因为，我不知道我`#`应该有多少？

那么，我可以知道`DecimalFormat`我应该使用什么是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T10:10:09.783

您可以使用它[`setMaximumFractionDigits()`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html#setMaximumFractionDigits%28int%29)来执行此操作。最大值为`340`，因此不妨将其设置为该值：

```
public static void main(String[] args) {
    DecimalFormat formatter = new DecimalFormat();
    formatter.setMaximumFractionDigits(340);
    BigDecimal[] numbers = {new BigDecimal("100.0"), new BigDecimal("100.123"), new BigDecimal("100.123456789012345")};
    for (BigDecimal number : numbers) {         
        System.out.println(formatter.format(number));
    }
} 
```

印刷

```
100
100.123
100.123456789012345 
```

# jquery - 如何使用 AJAX 调用获取图像数据？

> ID：12651701
> 
> 赞同：0
> 
> 时间：2012-09-29T09:49:40.740
> 
> 标签：jquery, asp.net-mvc-4

我正在使用 MVC4 和 jQuery，我需要显示一个包含两列的表格；第一列应包含一个人的图像，第二列应包含该人的详细信息。

我通过 AJAX 调用从数据库中获取此人的详细信息和图像路径，并显示我的表格。但是，我没有显示图像，而是仅获取路径。

如何使用 AJAX 调用获取图像，以便将其显示在我的表格中？我的控制器正在返回 JSON 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:21:05.383

您可以使用 javascript 将图像路径放在标记“src”属性中。

# javascript - 引用文本区域？

> ID：12651704
> 
> 赞同：0
> 
> 时间：2012-09-29T09:50:34.707
> 
> 标签：javascript, jquery, html

我刚刚开始编程，不知何故无法为以下问题提出任何明智的方法，因此将不胜感激任何帮助！我有一个结构如下的 .html 文件：

```
<head>
<title>ABC</title>
</head>
<body>
<div class="norm">
...    
<span class="jnenbez">13</span>
....    
<div class="Absatz">text</div>
<div class="Absatz">text</div>
<div class="Absatz">CITE HERE**</div> 
```

“规范” div 是一个父节点。“jnenbez”跨度和“Absatz”div 位于“norm”div 内，但它们的嵌套深度可能会有所不同。现在我要引用“CITE HERE”区域，意思是生成**“jnenbez 13 Absatz 3 ABC”**的输出——意思是获取相同“norm”div的“jnenbez”跨度的文本内容，获取索引号“Absatz” div，因为它是“norm” div 的第三个孩子“Absatz”并获取内容。

1）我怎么能把这个字符串给用户，所以他可以把它复制粘贴到别的地方？似乎很难修改 Firefox 的复制+粘贴行为。一个明显的解决方案是将输出放在每个 div 文本内容末尾的 [jnenbez...] 之类的括号中，但这会降低 html 的可读性...

2) 甚至可以通过 JQuery 自动生成这个输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:30:53.143

不确定存储/显示信息的好方法。此外，不确定您在 class='norm' 容器中还有哪些其他标记。这非常重要，并且会完全影响有用解决方案的形状。

我假设了一个特定的结构 - 一个说第一个包含的跨度是一个有趣的结构。另一个假设是容器中唯一的 div 是感兴趣的并且需要计算在内。

我相信你可以很容易地打破它。:D

```
<!DOCTYPE html>
<html>
<head>
<script>
function onBtnPress(element)
{
    var result;

    var cont = element.parentNode;

    var span = cont.getElementsByTagName('span')[0];
    result = span.className + " ";
    result += span.innerHTML + " ";

    var divList = cont.getElementsByTagName('div');
    result += divList[0].className + " ";
    result += divList.length+" ";
    result += document.title;

    cont.getElementsByTagName('p')[0].innerHTML = result;
}
</script>

<title>ABC</title>
</head>
<body>
    <div class="norm">
        <span class="jnenbez">13</span>
        <div class="Absatz">text</div>
        <div class="Absatz">text</div>
        <div class="Absatz">CITE HERE**</div>
        <button onclick='onBtnPress(this);'>click me</button>
        <p>[string here]</p>
    </div>
    <div class="norm">
        <span class="Crapple">8</span>
        <div class="ipod">worst</div>
        <div class="ipod">music</div>
        <div class="ipod">player</div>
        <div class="ipod">I ever</div>
        <div class="ipod">bought</div>
        <div class="ipod">CITE HERE**</div>
        <button onclick='onBtnPress(this);'>click me</button>
        <p>[string here]</p>
    </div>
</body>
</html> 
```

# c# - 使用 Castle.Facilities.NHibernateFacility 提示 EnumerableExtensions.cs

> ID：12651711
> 
> 赞同：0
> 
> 时间：2012-09-29T09:51:19.693
> 
> 标签：c#, nhibernate, castle-windsor

使用 NHibernateFacility for Castle Windsor 时，系统会提示我输入一个名为 EnumerableExtensions.cs 的文件。我已经通过以下步骤复制了它（所有包都是从 NuGet 安装的）：

1.  创建一个新的 WPF 项目
2.  安装 Castle.Core 3.1.0
3.  安装 Castle.Windsor 3.1.0
4.  安装 Castle.FactorySupportFacility 3.1.0
5.  安装 Castle.Transactions 3.2.207.2207
6.  安装 Castle.Facilities.AutoTx 3.2.207.2207
7.  安装 NHibernate 3.3.1.4000
8.  安装 Fluent NHibernate 1.3.0.733
9.  安装 Castle.Facilities.NHibernate 0.7.1.23602
10.  重写 App.xaml.cs 中的 OnStartup() 以创建 Windsor 容器并向其添加设施。请参阅下面的代码。

    ```
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        IWindsorContainer container = new WindsorContainer();
        container.AddFacility<AutoTxFacility>();
        container.Register(
            Component.For<INHibernateInstaller>()
            .ImplementedBy<FluentNHibernateInstaller>());
        container.AddFacility<NHibernateFacility>();
    } 
    ```

这是 FluentNHibernateInstaller.cs 中的代码

```
public class FluentNHibernateInstaller : INHibernateInstaller
{
    public FluentConfiguration BuildFluent()
    {
        return Fluently.Configure();
    }

    private IPersistenceConfigurer SetupDatabase()
    {
        return MsSqlConfiguration.MsSql2008
            .ConnectionString(c => c
                .Server("Server")
                .Database("Database")
                .Username("User")
                .Password("Password"));
    }

    public Maybe<NHibernate.IInterceptor> Interceptor
    {
        get { return Maybe.None<NHibernate.IInterceptor>(); }
    }

    public bool IsDefault
    {
        get { return true; }
    }

    public void Registered(ISessionFactory factory)
    {

    }

    public string SessionFactoryKey
    {
        get { return "sf.default"; }
    }
} 
```

当我运行应用程序时，这是我看到的对话框：

![打开 EnumerableExtensions.cs 的文件对话框](../Images/770b8060be0c124a2b8a1a9f124ac45d.png)

对我来说，这似乎是 DLL 有问题，但是当我在 Castle Project Google Group 上发布有关此内容时[，有人建议我在我的应用程序中有不兼容的 Windsor 版本](https://groups.google.com/d/msg/castle-project-users/CLHTeZRy7qM/CkTsmp-32tcJ)。这是真的还是看起来像是在发生其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:39:23.660

该对话框是 Visual Studio 询问异常产生的文件的源代码。单击取消，Visual Studio 将改为在您自己的代码中的某处停止并显示异常。

您可以通过删除发生异常的组件的 pdb 文件来阻止对话框（但如果您想报告受影响组件中的错误，这也会导致堆栈跟踪的用处减少）。

# java - 在没有显式配置的情况下更改 bean 后处理顺序

> ID：12651713
> 
> 赞同：0
> 
> 时间：2012-09-29T09:51:38.527
> 
> 标签：java, spring, post-processing

我知道 bean 加载的顺序是由依赖项和传递依赖项隐式确定的。

想象一下，您有一组带注释的 bean，它们为您提供某种元数据，您希望将这些元数据应用于另一组 AwareBean。因此，只有在您从 N 个 bean 中收集了所有元数据之后，您才能对 AwareBeans 进行后期处理。你通常使用`org.springframework.beans.factory.config.BeanPostProcessor`这种东西。但是如何处理订单？我认为即使`depends-on`明确设置也不会优先于加载顺序的依赖关系，对吧？

有一个接口`org.springframework.core.Ordered`只决定 beanPostProcessors 的应用顺序，而不是 bean 的顺序。

我可以使用`org.springframework.beans.factory.config.BeanFactoryPostProcessor`，但 bean 定义在 bean 实例化之前没有足够的信息。例如`beanDef.getBeanClass()` 返回 bean 类名等。

这是你能想到如何做我想做的任何其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:45:24.447

你可以：

a) 将所有元数据 bean 注入您的`BeanPostProcessor`.

b) 让您的后处理器在启动时主动从应用程序上下文中获取所有元数据 bean。

每种方式都有利有弊，但效果是一样的：在`BeanPostProcessor`后构造之后，每个元数据 bean 也将已经被后构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:06:07.553

我通过类加载器使用`org.springframework.beans.factory.config.BeanFactoryPostProcessor`和加载类来解决它，以便我可以使用反射来获取注释。我认为它不应该破坏任何东西，因为之后当spring要类加载时，bean类类加载器会检查该类是否已经加载，如果是则不加载它。否则它会加载它。

# attributes - 适合该数据集的数据挖掘技术

> ID：12651719
> 
> 赞同：0
> 
> 时间：2012-09-29T09:52:09.317
> 
> 标签：attributes, data-mining, classification, rapidminer

我正在从事一个数据挖掘项目，并想挖掘这个数据集[高等教育招生](http://www.infochimps.com/datasets/higher-education-enrolments-from-datagovau)以获取有趣的模式或知识。我的问题是弄清楚哪种技术最适合数据集。

我目前正在使用 RapidMiner 5.0 处理数据集，并从数据中删除了两列（E550 - 参考年份，E931 - 学生总数 EFTSL），因为它们与分析无关。除了我用作*id*的 StudentID （整数）之外，其余属性都是名义上的。我目前正在对其进行分类（朴素贝叶斯），但希望得到其他人的意见，希望那些在这方面有更多经验的人。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:21:35.593

除非您已经知道要查找的内容并了解数据源的质量，否则您应该始终从尝试各种探索性分析开始：

*   查看所有变量的一些一阶和二阶统计量
*   生成每个变量的直方图，以了解每个变量的经验分布
*   查看可能具有依赖性的变量的成对散点图
*   尝试您可能想到的其他可视化

这些可以让您大致了解可能存在什么样的模式，并且在考虑到噪声水平的情况下可能会被发现。然后根据您对哪种模式感兴趣，您可以开始尝试各种无监督模式学习方法，例如 PCA/ICA/因子分析、聚类或监督方法，例如回归、分类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:46:06.867

最佳技术取决于许多因素：训练和目标属性的类型/分布、领域、属性的值范围等。使用的最佳技术是数据分析和理解的结果。

在这种特殊情况下，您应该澄清要预测的属性。

# html - 在手风琴的两侧显示图像

> ID：12651724
> 
> 赞同：0
> 
> 时间：2012-09-29T09:52:23.833
> 
> 标签：html, css, accordion

我有如下手风琴。

```
<div class="question">Header 1</div>
<div class="answer">
    text 1            
</div>
<div class="question">Header 2</div>
<div class="answer">
    text 2

</div> 
```

我拥有的 CSS 是

```
#wrapper {
    width: 100%;
    font-family:verdana;
    font-size:12px;
}

.question {  
    width: 100%;
    float: left;
    border: solid blue;
    border-width: thin;
    background-color: #5CB3FF;
    font-size: 18px;
    font-weight: bold;
    padding-top:20px;
    cursor: pointer;
    background-image: url(images/down_arrow.jpg);
    background-size: 5% 100%;
    background-repeat : no-repeat;
}
.question:hover {
    border: solid blue;
    border-width: thin;
    background-color: #736AFF;
}

.answer {  
    width: 100%;
    float: left;
    padding-top:10px;
    padding-bottom:10px;
}

.active {
    background-image: url(images/up_arrow.jpg);
    background-size: 5% 100%;
    background-repeat:no-repeat;
} 
```

这给了我如下输出

```
| image    Header 1             |
| image    Header 2             | 
```

我想要的是在右侧也添加相同的图像，这样输出就会是

```
| image    Header 1            image |
| image    Header 2            image | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:03:29.247

多重背景？

```
.question {
    background:url(images/up_arrow.jpg) top left; /* fallback */
    background:url(images/up_arrow.jpg) top left, url(images/up_arrow.jpg) top right;
    background-size: 5% 100%;
    background-repeat:no-repeat;
    background-color: #5CB3FF;
} 
```

**[演示](http://jsfiddle.net/gionaf/bAkgu/)**

***注意：*** *您需要`background-color: #5CB3FF;`在背景图像之后*添加，因为速记`background:`将覆盖任何先前的声明。

# multithreading - How to "multithread" single table items that require long time to calculate, in PyQt?

> ID：12651726
> 
> 赞同：1
> 
> 时间：2012-09-29T09:52:37.047
> 
> 标签：multithreading, pyqt, background-process, high-level

I'm a real beginner in multithreading. This question is about high-level multithreading in PyQt.

Suppose that a table widget requires much time to be populated because of some single items, making the window unresponsive meanwhile. So I imagine that a responsive window should require a multithreaded solution in this case, where the big calculations (not every ones) are supposed to use separate threads. A simpler version could use a separate thread for every single column instead of single items.

Working examples are really appreciated. Thank you and sorry for my bad english.

EDIT: I removed the 'QtConcurrent' "requisite" from my original question.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T22:44:26.490

目前我手头没有一个可行的例子，但我至少可以提供一个建议......

*   您可以创建一个[`QThread`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qthread.html)在[`Queue`](http://docs.python.org/library/queue.html).
*   您的主 gui 线程可以将数据结构放入包含输入参数和目标单元（行/列）的队列中。
*   线程循环从队列中接收一个新项目，进行计算，然后发出一个类似的信号`cellDataReady(row, col, value)`。

这样您就可以遍历表数据，并且在需要计算的任何时候，只需将其排队即可。

如果您想按照[`QThreadPool`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qthreadpool.html)路线进行操作，则所有线程都可以从同一个队列对象中提取。无论哪个下一个空闲的，都会抓取下一个项目，计算并发出。

从线程发出信号将允许您的主 gui 连接到它们并简单地将值添加到表中。

# nfs - Vagrant fails to mount NFS shared folders because of corrupted /etc/exports. How do I fix that file?

> ID：12651733
> 
> 赞同：17
> 
> 时间：2012-09-29T09:53:47.037
> 
> 标签：nfs, vagrant

I recently tried to install a VM with vagrant but "vagrant up" always failed with the error:

> Mounting NFS shared folders failed. This is most often caused by the NFS client software not being installed on the guest machine. Please verify that the NFS client software is properly installed, and consult any resources specific to the linux distro you're using for more information on how to do this.

NFS client was properly installed on my machine so I looked for other causes of errors and found a blogpost explaining that my /etc/exports might be corrupted. I restored exportsbak (which contains only commented examples), hoping that vagrant would reconfigure that file properly... but it doesn't, and the error is still there.

How can I force vagrant to regenerate that file or fix it? Thanks.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-30T13:42:47.167

Just delete the file.

```
sudo rm -f /etc/exports 
```

The file will be recreated during the `vagrant up` process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T15:22:06.903

I was not able to get nfs running on my Ubuntu, because I used the vagrant packages from apt (V 1.2.2)

I installed the latest Vagrant Version (1.5) from here: [http://www.vagrantup.com/downloads](http://www.vagrantup.com/downloads) and nfs worked.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T14:35:07.687

1.  Check the NSF server is not installed, you can do…</li>

`dpkg -l | grep nfs-kernel-server`

2.  If it is not installed, install the required packages…</li>

`apt-get install nfs-kernel-server apt-get install nfs-common service nfs-kernel-server restart sudo service portmap restart mkdir -p /var/exports`

3.  Then in Vagranfile add line under #shared folders...

    config.vm.synced_folder "www", "/var/www", :nfs => { :mount_options => "dmode=755","fmode=755"] }

When vagrant is starting it will ask for root password, to run it without root password you can edit /etc/sudoers and add following lines…</p>

```
Cmnd_Alias VAGRANT_EXPORTS_ADD = /usr/bin/tee -a /etc/exports
Cmnd_Alias VAGRANT_NFSD_CHECK = /etc/init.d/nfs-kernel-server status

Cmnd_Alias VAGRANT_NFSD_START = /etc/init.d/nfs-kernel-server start

Cmnd_Alias VAGRANT_NFSD_APPLY = /usr/sbin/exportfs -ar

Cmnd_Alias VAGRANT_EXPORTS_REMOVE = /bin/sed -r -e * d -ibak /etc/exports

%sudo ALL=(root) NOPASSWD: VAGRANT_EXPORTS_ADD, VAGRANT_NFSD_CHECK, VAGRANT_NFSD_START, VAGRANT_NFSD_APPLY, VAGRANT_EXPORTS_REMOVE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T05:32:45.687

if your host is Windows, then you need to install a vagrant plugin [Vagrant WinNFSd](https://github.com/winnfsd/vagrant-winnfsd).

```
$ vagrant plugin install vagrant-winnfsd 
```

# sql - 存储聚合值的最佳方式

> ID：12651734
> 
> 赞同：1
> 
> 时间：2012-09-29T09:54:12.240
> 
> 标签：sql, nosql, aggregation, nosql-aggregation

我们需要存储不同帐户的汇总值，这些汇总值在月/年的基础上汇总了各种数字。每次更新数据时都会更新这些数字（通常每 24 小时一次或两次）。

我期望数据是 PIVOT 函数的结果，例如：

```
Year    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2011    0   0   0   0   0   0   95  33  34  24  36  52 
```

每个帐户都需要不同的聚合，例如“客户计数”、“订单计数”和“销售价值”，我不确定是否最好向数据添加键或使用单独的表，例如：

```
Year    Key        Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2011    CntOrders  0   0   0   0   0   0   95  33  34  24  36  52
2011    CntCust    0   0   0   0   0   0   95  33  34  24  36  52
2011    ValOrders  0   0   0   0   0   0   95  33  34  24  36  52 
```

或 dbo.CountOfOrders

```
Year    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2011    0   0   0   0   0   0   95  33  34  24  36  52 
```

dbo.ValueOfOrders

```
Year    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2011    0   0   0   0   0   0   95  33  34  24  36  52 
```

我已经阅读了许多建议 NoSQL 和 SQL Server 的帖子，所以我不确定我们应该走哪条路或如何决定。

我们目前无法证明专用多维数据集是合理的，但我想知道将值存储在 NoSQL 数据库中是否更好，或者我们是否应该坚持使用 SQL Server？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:20:39.553

设置作业以运行将数据插入表中的存储过程。

存储帐户、年、月、值等数据

使用这些表的视图来报告多个聚合。

绝对坚持使用 SQL。没有理由为这样一个简单的任务增加技术开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:21:01.357

我会坚持使用 SQL。但是，如果您担心重建此类 PIVOT 表的时间，请不要这样做，因为您不一定要构建具有唯一“键”的表。

使用 key + process datetime 构建它，并将其附加到主枢轴。因此，在创建增量期间，它将受您的事务时间戳（开始和结束）的限制。应该有很多膨胀。如果有，您可以在周末作业中折叠处理日期。

# haskell - How to collect output from pipes to file in Haskell

> ID：12651735
> 
> 赞同：0
> 
> 时间：2012-09-29T09:54:20.127
> 
> 标签：haskell, conduit

I have a producer pipe and I have used the print pipe. I would like to write the output to a file. If I use Control.Data.sinkFile, like

```
test2file = runPipe $ CB.sinkFile "testOutput" <+< traverseTree fn3 
```

I get a type error:

```
Couldn't match expected type `Pipe
                                b0 void-0.5.8:Data.Void.Void m0 r0'
            with actual type `Data.Conduit.Internal.Pipe
                                l0 Data.ByteString.Internal.ByteString o0 r1 m1 r1'
In the return type of a call of `sinkFile'
In the first argument of `(<+<)', namely `sinkFile "testOutput"' 
```

How do I convert sinkFile to a pipe which can be composed. is there a Strict vs. Lazy question?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:27:52.443

解决方案很简单，编写一个 fileSink 函数，该函数附加到一个文件

```
fileSink = forever $ do 
inp <- await
liftIO $ appendFile "testOutput" ('\n' : show inp )
return () 
```

使用文件句柄可能更有效，更实用的是，将文件名作为参数传递。使用管道真的很容易！

# android - Android MediaPlayer getCurrentPosition() 导致音频卡顿

> ID：12651737
> 
> 赞同：9
> 
> 时间：2012-09-29T09:54:49.620
> 
> 标签：android, audio, media-player

我正在使用 SeekBar 来显示音频文件的进度并寻求特定时间。为了更新，我使用了一个 Runnable，它每秒左右在 MediaPlayer 上调用 getCurrentPosition()。每次发生这种情况时，音频都会出现少量延迟。由于我经常调用它，所以在演奏某些东西时我会变得非常明显的口吃。如果相关，我使用的是 setAudioStreamType(AudioManager.STREAM_MUSIC)，文件格式是 mp4，带有 AAC 音频（无视频），我使用的是 Android 2.3.4。有没有办法使用 getCurrentPosition() 获得良好的音频，还是我必须实现自己的进度计算？

可运行：

```
private Runnable mUpdateTask = new Runnable(){

    @Override
    public void run() {
        mSeekBar.setProgress((int) (mPlayer.getCurrentPosition() * 100 / mArrayAdapter.getRecording(mPlayingId).mDuration));
        mHandler.postDelayed(mUpdateTask, 999);
    }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-14T21:18:30.007

我有同样的问题或类似的事情。

当我`mMediapPlayer.getCurrentPosition()`在 TimerTask 中使用更新 SeekBar 时，我听到像回声这样的声音问题，但实际上问题不存在..

问题是我也使用 SeekBar`OnSeekBarChangeListener`进行手动搜索，但发生的情况是从 TimerTask 更新 seekBar 也触发了侦听器，这`mp.seekTo(progress)`导致 mp 再次返回到该位置。

我已经通过使用`fromUser`这里建议的参数来修复它，只有在 seekBar 手动更改时才进行搜索。

这是我的示例代码：

定时器任务：

```
public void initializeTimerTask() {

    mTimerTask = new TimerTask() {

        public void run() {

            int progress = mp.getCurrentPosition()/1000;
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    mSeekBar.setProgress(progress);
                    tvDuration.setText(DateUtils.formatElapsedTime(progress));
                }
            });

        }
    };
} 
```

听众：

```
 mSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            if(mp != null && fromUser){
                mp.seekTo(progress * 1000);
            }
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:13:58.167

你可以这样做：

```
private Runnable mUpdateTask = new Runnable(){

    @Override
    public void run() 
  {
        mSeekBar.setProgress(mMediapPlayer.getCurrentPosition());       
        mHandler.postDelayed(mUpdateTask, 999);
    }
}; 
```

您还可以应用搜索栏进度更改侦听器，如下所示：

```
mSeekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
            {               
                @Override
                public void onStopTrackingTouch(SeekBar seekBar) 
                {               
                }
                @Override
                public void onStartTrackingTouch(SeekBar seekBar)
                {                   
                }
                @Override
                public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) 
                {
                    if (fromUser) 
                    {
                        int secProgress = seekBar.getSecondaryProgress();
                                if (secProgress> progress) 
                                {
                                    mMediapPlayer.seekTo(progress);
                                } 
                                else
                                {   
                                    seekBar.setProgress(mSeekBar.getProgress());
                                }
                    }

                }               
            });
            mMediapPlayer.setOnBufferingUpdateListener(new OnBufferingUpdateListener() 
            {

                    @Override
                    public void onBufferingUpdate(MediaPlayer mp, int percent) 
                    {
                        mSeekBar.setSecondaryProgress((mSeekBar.getMax()/100)*percent);

                    }
                }); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-01T06:24:50.220

我用这种方法来计算进度'

```
public static int getProgressPercentage(long currentDuration,
            long totalDuration) {
        Double percentage = (double) 0;

        long currentSeconds = (int) (currentDuration / 1000);
        long totalSeconds = (int) (totalDuration / 1000);

        // calculating percentage
        percentage = (((double) currentSeconds) / totalSeconds) * 100;

        // return percentage
        return percentage.intValue();
    } 
```

注意：mPlayer.getCurrentPosition() 不准确。报告了一些错误。我遇到了当前位置高于totalDuration 的问题。

# javascript - 如何使用正则表达式将欧盟号码格式转换为 javascript 号码

> ID：12651743
> 
> 赞同：3
> 
> 时间：2012-09-29T09:56:13.977
> 
> 标签：javascript, regex, currency-formatting

我正在尝试将欧盟格式的货币金额（例如 1.243,51（在美国格式中等于 1,243.51））转换为 javascript 中的数字（即 1243.51）。

我设法找到了大量试图做非常相似的事情的例子，但我无法适应它。看来我需要使用正则表达式，我对此不太了解，但我设法找到了一些几乎可以完成任务的建议。我找到了一个用“。”替换“，”的正则表达式。和一个删除“。”。我想我必须分两步完成，但问题是删除“。”的那个也会截断点后面的数字。到目前为止，这是我想出的：

```
function usToEuCurrencyFormat(input) {
    var output = input.replace(/\./g, '');          //Removes dots
    output = input.replace((/,([^,]*)$/, ".$1"));   //Replaces commas with dots
    return parseFloat(output);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T09:58:53.120

```
function usToEuCurrencyFormat(input) {
    return input.replace(/[,.]/g, function (x) { return x == "," ? "." : ","; }); }
} 
```

这对我来说似乎足够好（`parseFloat`如果你想要一个浮动就可以了）。

# git - git push 失败：RPC 失败；结果 = 22，HTTP 代码 = 411

> ID：12651749
> 
> 赞同：133
> 
> 时间：2012-09-29T09:58:02.253
> 
> 标签：git, github

我只有一个分支。几个月来我一直在使用

```
git push origin master 
```

提交到我的本地存储库。昨晚在我对本地存储库进行了一些小改动并尝试使用相同的命令推送之后，我收到了这个错误：

```
error: RPC failed; result=22, HTTP code = 411
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

我用谷歌搜索并找到了诸如[this one](https://stackoverflow.com/q/999907/1270459)和[this one](https://stackoverflow.com/q/2936652/1270459)之类的问题，但是这些问题的答案都没有解决我的问题。

大多数答案都暗示了**头部脱落**的问题。然而，我不认为我的头是分离的。我也不认为我在错误的分支上（因为我只有一个分支......）

我做了一些实验来找出问题所在，这是我得到的结果：

(1) 首先是我的`git status`输出

> ```
> # On branch master
> # Untracked files:
> #   (use "git add <file>..." to include in what will be committed)
> #
> # egal.aux
> # egal.blg
> # egal.out
> # egal.pdf
> # egalcar.aux
> # egalcar.blg
> # egalcar.pdf
> nothing added to commit but untracked files present (use "git add" to track) 
> ```

(2) 当我输入 时`git reflog`，我可以看到我所有的本地提交，但远程存储库不会得到更新。

（3）当我输入`git branch -a`时，我得到

> ```
> * master
>   remotes/origin/master 
> ```

（4）当我输入`git remote show origin`时，我得到

> ```
> * remote origin
>   Fetch URL: http://github.com/CherryQu921/egaldoc_en
>   Push  URL: http://github.com/CherryQu921/egaldoc_en
>   HEAD branch: master
>   Remote branch:
>     master tracked
>   Local ref configured for 'git push':
>     master pushes to master (fast-forwardable) 
> ```

我认为输出的最后一行（“快速转发”）很奇怪，但我不确定出了什么问题......

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-09-29T10:11:27.910

如果您尝试使用 HTTP 或 HTTPS 将大量更改推送到 Git 存储库，您可能会收到错误消息，例如 error: `RPC failed; result=22, HTTP code = 411`。这是由 Git 配置默认值导致的，该默认配置将某些 HTTP 操作限制为 1 兆字节。

要更改此限制，请在本地存储库中运行

```
git config http.postBuffer *bytes* 
```

其中 bytes 是允许的最大字节数。例如：

```
git config http.postBuffer 524288000 
```

500MB（感谢@Hengjie）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-03-18T14:08:32.023

您也可以在全球范围内执行此操作 -

```
git config --global http.postBuffer 524288000 
```

这将允许所有本地存储库推送多达 500MB 的数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-26T19:56:36.183

提供的解决方案都不适合我们。我们不得不切换到`ssh`使这项工作而不是`HTTPS`解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-21T09:38:01.140

如果您使用的是 Windows 版 TortoiseGit，最简单的方法是使用集成配置。

在文件资源管理器中按下鼠标左键，选择*TortoiseGit -> Settings*。接受信息消息。现在，您可以选择是否只想为当前项目或系统范围配置属性。对于系统范围的配置，请按“编辑系统范围的 gitconfig”并将下一行添加到该部分`[http]`：

```
postBuffer = 524288000 
```

（如果该部分`[http]`不存在，请创建它）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-14T22:46:29.137

我解决了 22 错误如下：在“git clone”命令中，我没有提供用户：密码。克隆工作，但不是推动。22错误的解决方法：修改 .git/config 的 url 如下： url= [http://user:pwd@host/](http://user:pwd@host/) ... 然后，推送工作。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2022-01-24T18:19:53.800

使用 git lfs 并跟踪大于 1 mb 的文件，然后再次尝试推送

# linux - 为什么重定向输出会影响 bash 中的测试结果？

> ID：12651750
> 
> 赞同：2
> 
> 时间：2012-09-29T09:58:40.677
> 
> 标签：linux, bash, while-loop, return-value, archlinux

我正在尝试编写一个脚本来在他们自己的 x 会话中启动 xfce 和 xbmc。

为此，我正在设置`DISPLAY`值，在后台运行第一个值并等待直到我从`xset q`. 然后我改变`DISPLAY`并为另一个做同样的事情。

我正在逐篇编写这篇文章，以检查每个部分的语法是否正确，而我坚持的部分是“等到我从`xset q`.

```
export DISPLAY=":0.0"
while [[ ! `xset q` ]]
do
  echo -n "."
done 
```

这段代码似乎可以工作，所以当 XFCE 运行时它会立即退出，当它不运行时它会在那里打印`.xset: unable to open display ":0.0"`

但是我不想看到的输出，`xset`所以我试图重定向它的输出。

```
export DISPLAY=":0.0"
while [[ ! `xset q > /dev/null 2>&1` ]]
do
  echo -n "."
done 
```

然而，添加此重定向似乎会破坏检测，并且无论 XFCE 是否正在运行，它都只是坐在那里打印点。

我已经单独测试了这两个命令，并在自己的 shell 脚本中测试了它们都按我的预期工作，当 XFCE 未运行时返回 1，当它运行时返回 0。

谁能解释为什么把这个命令放在里面会`[[ ! `…` ]]`破坏`while`测试以及我如何`while`正确地重写这个循环？

（在拱门上运行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T10:11:29.447

问题是您根本没有测试返回代码`xset`，而是处理它的输出。当您将输出重定向到 时`/dev/null`，反引号中的表达式不会返回任何内容，就好像您有：

```
while [[ ! '' ]] ... 
```

这将永远运行`while`身体。

你应该做的是：

```
while ! xset q > /dev/null 2>&1 
do 
  ...
done 
```

# codeigniter - codeigniter active record class

> ID：12651757
> 
> 赞同：-1
> 
> 时间：2012-09-29T09:59:33.183
> 
> 标签：codeigniter, codeigniter-2, codeigniter-datamapper

**this is my normal mysql command**

```
$query = $this->db->query("SELECT `house_details`.`houses_id` , `house_details`.`house_dis` ,  `house_details`.`house_type` , `house_details`.`area` , `house_details`.`cost` , `house_details`.`user_id` , `image`.`thumb_path`
FROM (
`house_details`
)
LEFT JOIN `image` ON `image`.`house_id` = `house_details`.`houses_id`
AND `house_details`.`status` =1
GROUP BY `houses_id` DESC
LIMIT $start,$limit ");     

return $query->result(); 
```

### what is the similar code with CI active record class ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:12:36.427

尝试这个，

```
$this->db->select('house_details.houses_id, house_details.house_dis, house_details.house_type,house_details.area,house_details.cost,house_details.user_id,image.thumb_path');      
$this->db->from('house_details');
$this->db->join('image', 'image.house_id = house_details.houses_id','left');
$this->db->where('image.status', 1);           
$this->db->order_by("house_details.houses_id DESC");    
$this->db->limit($limit, $start);

$query = $this->db->get();
return $query->result(); 
```

假设没有 group by，因为您想按降序排列结果集。如果 group by 存在，则将其更改为 group_by 并删除“DESC”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:20:04.767

尝试这个：

```
$this->db->select('...')->
     from('house_details')->
     join('image','image.house_id=house_details.houses_id AND image.status=1','LEFT')->
     where('...')->
     order_by('house_details.houses_id','DESC')->
     limit($start,$limit); 
```

# php - 如何在 MySQL 中将空字段与以下值合并？

> ID：12651758
> 
> 赞同：2
> 
> 时间：2012-09-29T09:59:35.107
> 
> 标签：php, mysql

> **可能重复：**
> [在 SQL 中合并两行](https://stackoverflow.com/questions/2941116/merge-two-rows-in-sql)

我在表中有以下值：

```
---------------------
row1 | row2 | row3
---------------------
val1 |      |
     | val2 | 
     |      | val3 
```

如何合并这些行？

```
$qu = mysql_query("SELECT * FROM `table`");

while($row = msyql_fetch_assoc($qu)){
$rowone = $row['row1'];
$rowtwo = $row['row2'];
$rowtre = $row['row3'];

echo $rowone." ".$rowtwo." ".$rowtre;
} 
```

我想要这个返回

```
val1 val2 val3 
```

我有一个关于这如何可能的理论，但我想知道是否有更直接的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:01:27.763

在所有列上使用聚合函数。

```
SELECT MAX(row1), MAX(row2), MAX(row3)
FROM tableName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:03:55.013

```
SELECT concat(col1,col2,col3) as colname
FROM tableName 
```

# jquery - 我可以向表单输入元素添加 2 个“类型”吗？

> ID：12651761
> 
> 赞同：3
> 
> 时间：2012-09-29T10:00:38.127
> 
> 标签：jquery, html, jquery-mobile

我正在使用 jQuery Mobile 构建搜索对话。搜索的输入是数字的，所以理想情况下我想添加一个“类型”的搜索和数字。这可能吗？如果没有，是否有一个简单的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:25:37.673

您不能声明`type`两次，但可以使用**[模式](http://www.w3schools.com/html5/att_input_pattern.asp)**：

```
<input type="search" pattern="[0-9]*"> 
```

它仍处于试验阶段，因此请确保添加额外的（jQuery 和/或服务器端）验证。

# jquery - 表单提交在 onchange 方法中不起作用

> ID：12651765
> 
> 赞同：4
> 
> 时间：2012-09-29T10:01:02.627
> 
> 标签：jquery

`onchange`当使用 jQuery 触发我的下拉事件时，我提交了我的表单。

第一次有效，但第二次`onchange`没有触发事件。它甚至没有进入 jQuery 脚本。我该如何解决这个问题？以及如何在`onload`事件中加载 jQuery？我的jQuery代码：

```
 $('#statusId').bind('change',function() { 
    alert($(this).val());
    $('#statusHiddenId').val($(this).val());
    $('#layoutFormID').attr('method', 'POST'); 
    $('#layoutFormID').attr('action', '/sample');
    $('#layoutFormID').submit();
}); 
```

HTML 代码：

```
select(name='status',rel = "external", id='statusId', data-theme='a', data-icon='gear', data-native-menu="false")
     option(value='0') All Status
     option(value='1') New
     option(value='2') Verified
     option(value='3') KYC Completed
     option(value='4') Loan Sanctioned
     option(value='5') Loan Disbursed
     option(value='6') Closed
     option(value='7') Archive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:56:49.903

试试这个：

将此代码放入 javascript 函数中，并通过 onchange 每次调用它。

```
function MyFunction()
{
    $('#statusHiddenId').val($(this).val());
    $('#layoutFormID').attr('method', 'POST'); 
    $('#layoutFormID').attr('action', '/sample');
    $('#layoutFormID').submit();
} 
```

**onchange = MyFunction();**

```
specify onchange function in select box. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:30:02.713

如果您说的意思是“文档加载” `onload`，那么代码是：

```
$(function(){

    // your code here

}); 
```

如果您的脚本正在替换表单内容，您需要将处理程序绑定到更远的链上，如下所示：

*（假设您有一个 id 为“container”的容器元素**不会**被替换）*

```
$('#container').on('change', '#statusId', function(event) {

    // your code here

}); 
```

这假设您使用的是 jQuery 1.7 或更高版本。

# scala - What's the best way to start using Lift?

> ID：12651766
> 
> 赞同：2
> 
> 时间：2012-09-29T10:01:20.793
> 
> 标签：scala, lift, sbt

I'm a Ruby on Rails developer and I'm very intrigued by what Lift has to offer, but I'm having a very hard time getting together some good resources/documentation to start off.

*   Should I use Lifty? I can't manage to get it working under sbt 0.12; Is there another tool for code generation?
*   Is there a way to see snippet changes live on the development server without spending money on JRebel?
*   Going around on some forums i saw that Manning's Lift in Action is not up-to-date; is there any other tutorial-style book I can look into to grasp the basics on how to make a Lift app from scratch? I found many guides but none of them gives me a clear path on how to work with Lift.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:41:40.220

> 有没有办法在不花钱购买 JRebel 的情况下在开发服务器上实时查看代码段更改？

JRebel 对 Scala 开发人员是免费的 - 只需在[my.jrebel.com上获得一个帐户即可](http://my.jrebel.com)

# asp.net - Web 服务互操作性 - wsdl 复杂类型扩展

> ID：12651770
> 
> 赞同：4
> 
> 时间：2012-09-29T10:01:59.373
> 
> 标签：asp.net, web-services, jax-ws, axis2, java-metro-framework

假设我们有一个使用 WSDL 复杂类型扩展的 Web 服务。考虑下面的（有效的 WSDL）示例，其中`Vechicle`是抽象的。两种类型，`Car`和`Bike`，从它继承：

```
<xs:complexType name="Vehicle" abstract="true">
  <xs:sequence>
    <xs:element name="common1" type="xs:string" minOccurs="0"/>
    <xs:element name="common2" type="xs:string" minOccurs="0"/>
  </xs:sequence>
</xs:complexType>
<xs:complexType name="Car">
  <xs:complexContent>
    <xs:extension base="tns:Vehicle">
      <xs:sequence>
        <xs:element name="carValue1" type="xs:string" minOccurs="0"/>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
<xs:complexType name="Bike">
  <xs:complexContent>
    <xs:extension base="tns:Vehicle">
      <xs:sequence>
        <xs:element name="bikeValue1" type="xs:string" minOccurs="0"/>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```

以及`Transport`使用该`Vehicle`类型作为其元素之一的类型：

```
<xs:complexType name="Transport">
  <xs:sequence>
      <xs:choice>
        <xs:element ref="tns:Car"/>
        <xs:element ref="tns:Bike"/>
      </xs:choice>
    <xs:element name="description" type="xs:string"/>
</xs:sequence>
</xs:complexType> 
```

请注意，`Vehicle`它本身不是内部可能的类型`Transport`，这当然是因为`Vehicle`它是抽象的。在 Java Metro 堆栈中很容易生成上述内容。[Blaise Doughan 的博客](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html)在这里给了我一些宝贵的意见。

我的问题是这将如何在 Web 服务互操作性方面发挥作用，特别是与[WS-I Basic Profile](http://en.wikipedia.org/wiki/WS-I_Basic_Profile)相关。**我可以确定符合 WS-I 的 Web 服务框架能够使用这样的 Web 服务吗？**. 我知道 WS-I 基本上只指定了 WSDL 中允许的内容的一个子集。我已经尝试阅读 WS-I 规范来理解这个问题，但没有真正的运气。语言对我来说太难了。我发现[一篇 2004 年](http://www.ibm.com/developerworks/websphere/techjournal/0401_brown/brown.html)的文章引起了一些担忧：

*这种关注的基本原因是值对象继承的扩展机制的使用超出了 WS-I 基本配置文件，尽管它没有明确排除在外。目前，没有提到在 WS-I 基本概要文件中使用扩展构造，此外，WS-I 合规性测试套件也没有涵盖这种情况。*

...但那是在 2004 年，显然与 WS-I Basic Profile v1.0 有关。从那时起，WS-I Basic profile 1.1、1.2 和 2.0 规范已经发布。

所以问题是：使用 WSDL 值类型扩展特性（即`<xs:complexType name="xxx" abstract="true">`和`<xs:extension base="xxx">`）的 Web 服务是否可以在所有声称符合[WS-I Basic Profile 的](http://en.wikipedia.org/wiki/WS-I_Basic_Profile)框架中工作？他们可以使用这样的网络服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:53:54.990

[WS-I Basic Profile](http://ws-i.org/profiles/BasicProfile-2.0-2010-11-09.html)对 xml 进行了以下说明：

> 概要文件使用 Web 服务描述语言 (WSDL) 将服务描述为对消息进行操作的端点集。本概要的这一部分通过引用合并了以下规范 (...)：[XML 模式第 1 部分：结构](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/)

所以它引用 XML Schema 作为它的基础。[在那里，你会发现](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#Complex_Type_Definition_details)：

> 抽象复杂类型可以用作{基本类型定义}，甚至可以用作元素声明的{类型定义}，只要通过 xsi:type (§ 2.6.1) 或替代组的操作。

此外，[它定义](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#declare-type)了`<extension base="QName">`文档有很多话要说的结构。

但这一切都是在概念层面上，不一定直接将其与对象继承相关联。虽然进行这样的映射可能并不太难（并且您的链接准确地表明了这一点），但它也没有严格定义。我想这就是他们在提出担忧时所谈论的内容。

所以从技术和句法上讲，构造是标准的一部分，但实现可能会以不可预见的方式处理它。另一方面，遵循该标准的工具应该能够接受和输出有效的 WS-I XML，并按照[XML 标准](http://ws-i.org/profiles/BasicProfile-2.0-2010-11-09.html)中的规定执行验证。

最后，我想说任何不能以某种方式处理您的构造的工具都不是有效的 WS-I 实现。

# android - Android Bitmap loading out of memory error Galaxy S3 WXGA

> ID：12651777
> 
> 赞同：24
> 
> 时间：2012-09-29T10:03:00.893
> 
> 标签：android, bitmap

I would be very grateful if someone could confirm that I have solved the below problem correctly or if there is an alternative solution?

I have an app that loads a large image (e.g. 800*1720 pixels) into memory and displays it in a scrollview. The image is a floor plans for a museum and I wanted a simple map like experience of scrolling and zooming. The image loaded fine on older devices, but caused an out of memory error on a Samsung Galaxy S3\.

Looking at the LogCat messages it turned out that in creaing the bitmap 22MB was being allocated for the bitmap instead of 800*1720*4 = 5.5MB. Essentially 4x as much memory was being allocated as required by other devices and pushing the memory usage over the 50MB heap size.

The recommended solution to this problem is to use the `BitmapFactory.Options.inSampleSize` option to reduce the resolution of the image loaded and have it require less memory. However, this reduces the quality of the image, and I actually want to display it at it's full size in the original quality as works fine on older devices.

After much head scratching I concluded that the issue was that the pixel density on the S3's WXGA screens is 2.0 and thus for each pixel in the image, the bitmap was actually allocating 4 pixels. With a bit of trial and error I discovered I could prevent this happening by setting `options.inScaled = false;`

[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inScaled](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inScaled)

On the way, I also realised that I could cut my memory usage in half to 2.7MB by using a lower fidelity colour depth of 2 pixels instead of 4 pixels by setting `options.inPreferredConfig = Bitmap.Config.RGB_565;`. For my floorpans this didn't effect the visible image quality.

The final code was thus:

```
String uri = "drawable/floorplan";
int imageResource = getResources().getIdentifier(uri, null, getPackageName());
BitmapFactory.Options options = new BitmapFactory.Options();
options.inPreferredConfig = Bitmap.Config.RGB_565;
options.inScaled = false;
Bitmap bm = BitmapFactory.decodeResource(getResources(), imageResource, options);
IVfloorplan.setImageBitmap(bm); 
```

When displaying this bitmap you need to scale it back up. To work out the scaling you can obtain the pixel density from:

```
float density = getResources().getDisplayMetrics().density; 
```

I reduced memory usage for the bitmap from 22MB to 2.7MB, which in a 50MB heap is significant.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:18:33.297

S3的屏幕分辨率非常高，可以理解。此外，如果图像位于可绘制文件夹中，它可能会自动放大。可能有办法关闭它。即使您的图像大小没有机会，操作系统也必须分配一个缓冲区来容纳图像，也可能分配一个缓冲区来容纳在屏幕上显示它。

另一种方法是使用平铺，它用于 SNES 游戏等游戏。这也是他们在不耗尽 RAM 的情况下处理大量图形的方式。有证据表明，这就是谷歌地图拥有地球地图的方式。您基本上将大图像分割成图块，并在平移到它们时在屏幕上显示图块（当然，每边可能有 1 个额外的图块）。

尽管这是后蜂窝，谷歌在其中输入代码以更好地管理位图分配，但请注意位图分配。它更像是一个 C 程序而不是一个 Java 程序，并且像管理它一样管理它是一个好主意。在 Android 中使用 Bitmap 对象时很容易耗尽堆空间

# c++ - 从另一个类设置变量

> ID：12651780
> 
> 赞同：0
> 
> 时间：2012-09-29T10:03:23.520
> 
> 标签：c++, class, variables, object

我观看了本教程[http://www.youtube.com/watch?&v=jTS7JTud1qQ&t=7m57s](http://www.youtube.com/watch?&v=jTS7JTud1qQ&t=7m57s)，我可以轻松获取输出字符串的代码，但我希望用户能够设置自己的名称并保存它。

对不起，我真的是 C++ 新手，所以任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:11:41.217

我建议阅读更多关于输入的内容。您正在观看的教程将很快向您展示如何做到这一点。如果你不耐烦，这就是它的工作原理。

```
string temp;
cout << "ENTER YOUR NAME: ";
cin >> temp;
bo.setName(temp); 
```

# mysql - MySQL ORDER BY 聚合列返回不正确的结果

> ID：12651782
> 
> 赞同：1
> 
> 时间：2012-09-29T10:03:39.757
> 
> 标签：mysql, sql, sql-order-by

我努力让这个查询能够`stakes`正确排序 - 它返回既不是 desc 也不是 asc 的值。`wins`如果我使用 order by，它确实有效。也许 MySQL 在构建聚合时没有评估排序顺序？

我已经去掉了一些全名，以减少阅读的乏味。

```
SELECT a.b AS  t , COUNT(  c.aID ) AS  r , 
                   COUNT( 
                          CASE WHEN  c.Finish =1
                               THEN 1 
                               ELSE NULL 
                               END )               AS  wins , 
                 CONCAT( FORMAT( (
                                   COUNT( 
                                          CASE WHEN  c.Finish =1
                                               THEN 1 
                                               ELSE NULL 
                                               END ) / COUNT(  c.aID ) ) *100, 0 ) ,  '%'
                       ) AS  Percent , 
                FORMAT( SUM(  c.StakeWon ) , 0 ) AS  stakes 
 FROM c
 INNER JOIN a ON c.aID = a.aID
 INNER JOIN d ON c.dID = d.dID
 WHERE  d.w >= STR_TO_DATE(  '2012,07,01',  '%Y,%m,%d' ) 
 AND  d.w < STR_TO_DATE(  '2012,07,01',  '%Y,%m,%d' ) + INTERVAL 1 
 MONTH 
 GROUP BY  a.b 
 ORDER BY  stakes DESC` 
```

如果我订购它也不起作用`Percent`。我不想在这里问这个问题，但这让我发疯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:27:59.783

如果您显示一些结果会有所帮助，但您必须在格式化之前对赌注进行排序。然后你真的对数值而不是格式化的字符串进行排序。

这是一个示例[SQL Fiddle](http://sqlfiddle.com/#!2/2b33d/1)它会如何出错。

由于格式的原因，数值未按降序排序

```
100
10,000,000
-5,000,005 
```

所以你会做类似的事情

```
...
     FORMAT( SUM(  c.StakeWon ) , 0 ) AS  stakes ,
     SUM(  c.StakeWon )  AS  stakes_num 
...
     ORDER BY stakes_num desc 
```

示例如何工作：[SQL Fiddle](http://sqlfiddle.com/#!2/2b33d/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:22:58.053

尝试使用整个表达式

```
COUNT(  c.aID ) AS  r , 
                   COUNT( 
                          CASE WHEN  c.Finish =1
                               THEN 1 
                               ELSE NULL 
                               END )               AS  wins , 
                 CONCAT( FORMAT( (
                                   COUNT( 
                                          CASE WHEN  c.Finish =1
                                               THEN 1 
                                               ELSE NULL 
                                               END ) / COUNT(  c.aID ) ) *100, 0 ) ,  '%'
                       ) AS  Percent , 
                FORMAT( SUM(  c.StakeWon ) , 0 ) 
```

在 order by 子句而不是别名中。我的观察是，别名不是这样工作的

大概是这样的

```
SELECT a.b AS  t , COUNT(  c.aID ) AS  r , 
                   COUNT( 
                          CASE WHEN  c.Finish =1
                               THEN 1 
                               ELSE NULL 
                               END )               AS  wins , 
                 CONCAT( FORMAT( (
                                   COUNT( 
                                          CASE WHEN  c.Finish =1
                                               THEN 1 
                                               ELSE NULL 
                                               END ) / COUNT(  c.aID ) ) *100, 0 ) ,  '%'
                       ) AS  Percent , 
                FORMAT( SUM(  c.StakeWon ) , 0 ) AS  stakes 
 FROM c
 INNER JOIN a ON c.aID = a.aID
 INNER JOIN d ON c.dID = d.dID
 WHERE  d.w >= STR_TO_DATE(  '2012,07,01',  '%Y,%m,%d' ) 
 AND  d.w < STR_TO_DATE(  '2012,07,01',  '%Y,%m,%d' ) + INTERVAL 1 
 MONTH 
 GROUP BY  a.b 
 ORDER BY  COUNT(  c.aID ) AS  r , 
                   COUNT( 
                          CASE WHEN  c.Finish =1
                               THEN 1 
                               ELSE NULL 
                               END )               AS  wins , 
                 CONCAT( FORMAT( (
                                   COUNT( 
                                          CASE WHEN  c.Finish =1
                                               THEN 1 
                                               ELSE NULL 
                                               END ) / COUNT(  c.aID ) ) *100, 0 ) ,  '%'
                       ) AS  Percent , 
                FORMAT( SUM(  c.StakeWon ) , 0 ) DESC` 
```

# php - 如何在带有 cookie 的远程页面上使用 php curl 下载？

> ID：12651783
> 
> 赞同：0
> 
> 时间：2012-09-29T10:03:41.837
> 
> 标签：php, curl, download, remote-access

**更新的脚本**

我正在尝试登录网页并将会话保存在文本文件中。

登录成功，如果需要，将我重定向到会员页面或其他页面。

但现在我需要用 curl 下载一个文件，服务器说**致命错误：内存不足**

```
 ini_set("memory_limit","2048M");    //Limite 2GB
  set_time_limit(0);                  //Tiempo de transferencia ilimitada

  //Definimos las variables de la pagina
  $username    = ""; 
  $password    = "";
  $loginUrl    = 'http://login.mysite.com/login.php';
  $loginFields = array('username' => $username, 'password' => $password);

  //Ahora se ha iniciado la sesion y la sesion de la cookie ha sido generada
  getUrl($loginUrl, 'post', $loginFields); 

  //Cargamos la pagina que queremos ver
  $remote_page_content = getUrl('http://miembros.mysite.com/3098');
  echo $remote_page_content;

  //Simple funcion para acceder
  function getUrl($url, $method='', $vars='') 
  {
        $ch = curl_init();
        if ($method == 'post') 
        {
        curl_setopt ($ch, CURLOPT_POST, 1);
        curl_setopt ($ch, CURLOPT_POSTFIELDS, $vars);
        }

        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7");
        curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
        curl_setopt ($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
        curl_setopt ($ch, CURLOPT_MAXREDIRS, 10);
        curl_setopt ($ch, CURLOPT_TIMEOUT, 0);
        curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 0);
        curl_setopt ($ch, CURLOPT_FAILONERROR, true);
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, false);
        $buffer = curl_exec($ch);
        curl_close ($ch);

        return $buffer;
  } 
```

所以我用这个调用下载文件：

```
 //Cargamos la pagina que queremos ver
  $remote_page_content = getUrl('http://content.mysite.com/PSP.mp4/');
  file_put_contents('/downloads/video.mp4',file_get_contents($remote_page_content)); 
```

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:13:24.360

尝试替换以下行：

```
curl_setopt ($ch, CURLOPT_COOKIEJAR,  $cookies);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookies); 
```

对于这个：

```
curl_setopt ($ch, CURLOPT_COOKIEJAR,  $cookie);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
```

看起来你在变量中打错了，你想要文件名（`$cookie`）而不是已经关闭的描述符（`$cookies`）。这是在你的`login()`函数里面。

**更新**：
如果您在一个会话期间使用多个页面，请尝试添加：

```
curl_setopt($ch, CURLOPT_COOKIESESSION, TRUE); 
curl_setopt($ch, CURLOPT_COOKIE, session_name() . '=' . session_id()); 
```

# vb.net - 在同一个对象上多次调用 new

> ID：12651788
> 
> 赞同：2
> 
> 时间：2012-09-29T10:04:40.507
> 
> 标签：vb.net, compact-framework, sql-server-ce

我以前从未在这个论坛上发过帖子，但经常用它来研究，但这次我找不到答案……也许我只是措辞不正确。

我在一个我已经工作了一段时间的 Compact Framework 项目中经常使用 SqlCeCommand，并且遇到了许多内存不足的问题，因此我正在尝试更好地优化非托管代码部分。

看看这个：

```
Dim SQLCmd as SQLCeCommand

SQLCmd = New SQLCeCommand
SQLCmd.Connection = conndb
... Process db stuff

SQLCmd = New SQLCeCommand
SQLCmd.Connection = conndb
... Process db stuff

SQLCmd = New SQLCeCommand
SQLCmd.Connection = conndb
... Process db stuff

SQLCmd.Dispose() 
```

这可以吗，还是每次我在同一个对象上调用 New 时都会丢失内存？我这样做而不是保留对象的相同实例的原因是我不必每次都显式设置 SQLCmd 属性。因为有些可能使用参数，有些可能不使用，所以我认为使用 new 将是一种更简单的方法来确保一切都清楚。

有什么想法或更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:33:41.343

在您的代码中，每次您调用 New 时，先前的引用都会丢失，然后是垃圾收集器工作来释放现在未引用的对象。当垃圾收集器框架决定是时候取回内存时会发生这种情况，因此不会立即发生

为了做得更好，您可以使用[Using 语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)

```
Dim SQLCmd as SQLCeCommand 

Using SQLCmd = New SQLCeCommand 
    SQLCmd.Connection = conndb 
    ... Process db stuff 
End Using

Using SQLCmd = New SQLCeCommand 
    SQLCmd.Connection = conndb 
    ... Process db stuff 
End Using

Using SQLCmd = New SQLCeCommand 
    SQLCmd.Connection = conndb 
    ... Process db stuff 
End Using 
```

通过这种方式，您会自动为之前的 SqlCmd 调用 Dispose，并向垃圾收集器发出强烈提示以收集未使用的内存。

来自 MSDN

```
Managed resources are disposed of by the .NET Framework garbage collector (GC) without any 
extra coding on your part. You do not need a Using block for managed resources. However, 
you can still use a Using block to force the disposal of a managed resource instead of 
waiting for the garbage collector. 
```

# javascript - 如何定位 jQuery 输出？

> ID：12651793
> 
> 赞同：1
> 
> 时间：2012-09-29T10:05:41.807
> 
> 标签：javascript, jquery

我有以下使用 JSON 文件生成下拉列表的内容：

```
<script type="text/javascript">
  $.getJSON('shares.json', function(data) {
  var items = [];

  $.each(data.Destinations, function(key, val) {
  items.push('<option id="' + val.shareName + '">' + val.shareName+ '</option>');
  });

  $('<select/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
});
</script> 
```

我不能像往常一样定位这个下拉菜单，我怎么能告诉它去一个 div 例如？我想 appendTo('body') 只是将它添加到我的 HTML 的末尾，但是你如何改变它呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:07:34.237

试试这个

```
 $('<select/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('#myDiv'); 
```

您不必附加到正文...您可以附加到任何*可以*包含指定元素的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:07:56.243

您正在以与将其附加到 div 的方式相同的方式附加生成的 html。

```
<script type="text/javascript">
  $.getJSON('shares.json', function(data) {
  var items = [];

  $.each(data.Destinations, function(key, val) {
  items.push('<option id="' + val.shareName + '">' + val.shareName+ '</option>');
  });

  $('<select/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('#divId');
});
</script> 
```

# php - drupal 6 意见坏了？

> ID：12651794
> 
> 赞同：0
> 
> 时间：2012-09-29T10:05:43.740
> 
> 标签：php, sql, drupal-6, views

我的 drupal 6 视图是否损坏？

我从我的视图中生成了这个 SQL

```
SELECT quiz_node_properties.vid AS vid, quiz_node_properties.nid AS
quiz_node_properties_nid FROM quiz_node_properties quiz_node_properties 
```

我期望这个输出：

```
Quiz Node NID: 6 
```

我得到这个输出：

```
Quiz Node NID: 6
Quiz Node NID: 6
Quiz Node NID: 6
Quiz Node NID: 6 
```

为什么它使我的输出翻了两番？我的系统里只有一个测验...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:34:55.153

您是否尝试检查“不同”选项？admin/build/views/ => 编辑视图 => 高级设置 => Distinct => 是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:35:11.837

问题是我没有选择查看节点，而是查看测验。

# asp.net - Asp.net登录控制Autologout/AutoRedirect和标签Value

> ID：12651798
> 
> 赞同：0
> 
> 时间：2012-09-29T10:06:09.917
> 
> 标签：asp.net, forms-authentication, login-control

我已经设置了一个 asp.net 登录控件（由 asp.net 配置提供的控件），它工作正常。

我已将代码添加到 web.config，因此 3 分钟后，它会自动注销用户。

```
<authentication mode="Forms">
  <!-- Autologout after xxx min. to login.aspx -->
  <forms loginUrl="~/login.aspx" defaultUrl="~/login.aspx" slidingExpiration="true" timeout="3"/>
</authentication> 
```

如果使用该代码，则我会自动注销，如果在 3 分钟后单击链接，则我会进入登录页面。

这是如何运作的？是在登录后 3 分钟还是在 3 分钟不活动后！？

另外，我可以在我的登录页面上添加一个标签，然后它会告诉用户为什么他/她被重定向到登录页面，如果是的话如何？

最后：如何让它在 3 分钟后将用户重定向到登录页面。所以不是在3分钟之后。然后当用户点击一个链接时，但在 3 分钟后，刷新（如果不活动）然后自动跳转到登录页面并用文本显示我的标签，解释为什么他/她没有登录！？？

..................................................... ..................................................... ..................................................... ……………………………………………………………………………………………………………………

如果我们查看否，我无法让它工作。2 解决方案。

在我的主页（code_behind）上，我在 page_load Session("logintime") = DateTime.Now.ToString() 中有这个响应写入我在主页 01-10-2012 18:30:42 上得到这个，现在是 18 :37:25 它还没有重定向，我根本没有在浏览器窗口中进行活动。

我的主页代码是。

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="default.aspx.vb" Inherits="_default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript">
var count = 30000
var timeLoggedIn = new Date('<%=Session("logintime")%>')
var timeLogOut = new Date('<%=Session("logoutTime") %>');

setTimeout(LoggedInCheck(), 30000);

function LoggedInCheck() {
    var now = new Date();
    var now_utc = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
    if (now_utc > timeLogOut) {
        window.location = "http://www.google.dk";
    }
}

function countDown() {
    if (count <= 0) {
       // window.location = redirect;
    } else {
        count--;
        document.getElementById("timer").innerHTML = "This page will redirect in " + count + " seconds."
        setTimeout("countDown()", 1000)
    }
}
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
<span id="timer">  
<script>
countDown();
</script>  
</span> 
</div>
</form>
</body>
</html> 
```

Code_behind

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not IsPostBack Then
        Session("logintime") = DateTime.Now.ToUniversalTime().ToString("MM/dd/yyyy hh:mm:ss")
        Session("logoutTime") = DateTime.Now.ToUniversalTime().AddMinutes(3).ToString("MM/dd/yyyy hh:mm:ss")

        Response.Write("time now: " & Session("logintime"))
        Response.Write("<br />")
        Response.Write("reload at time: " & Session("logoutTime"))
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:40:27.353

从[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.slidingexpiration.aspx)上`SlidingExpiration`：

> 如果发出请求并且超过一半的超时间隔已经过去，则滑动到期会重置有效身份验证 cookie 的到期时间。如果 cookie 过期，用户必须重新认证。

所以你可以说它是在 3' 不活动之后。

关于。自动注销消息、[此 SO 问题](https://stackoverflow.com/questions/709182/asp-net-implementing-auto-logout-functionality)及其答案可以为您提供一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:34:48.987

您需要最好将用户登录的时间存储在会话中，然后对其进行评估。您还可以使用 cookie 来过期您的时间。

或者，您可以查看 JavaScript >> [http://jsfiddle.net/F8umt/3/](http://jsfiddle.net/F8umt/3/)

但是您应该存储用户登录的时间。根据我的理解，您的脚本可能会在用户每次执行重置登录计数器的任务时刷新。您基本上需要创建一个登录时间，然后从中确定。

我已经更新了代码并对其进行了测试，它似乎在我的机器上运行良好。问题是 Date.Parse 错误地转换了它，所以我稍微改变了它的代码。如果这对您有用，请投票。

也可能重定向到一个页面，该页面会在将会话和 cookie 再次反弹到登录页面之前终止会话和 cookie，否则此代码将无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:16:16.243

好吧，第一种方法是，当用户尝试访问受限页面并且由于自动注销而无法访问时，服务器将他放入登录页面，但使用名为 ReturnURL 的 POST 变量。您可以`Try`阅读此变量，如果没有`Nothing`，您*可能会*认为用户在那里，因为自动注销...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-03T19:02:46.837

这就是解决方案。

在 web.config 添加。

```
<sessionState timeout="3"></sessionState> 
```

记住它在分钟内工作。

在您需要测试自动注销的页面上，在 code_behind 中使用它来启动 javascript。

```
Partial Class _default
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not IsPostBack Then
        Page.ClientScript.RegisterStartupScript(Me.[GetType](), "onLoad", "DisplaySessionTimeout()", True)
        Response.Write(Session.Timeout)
    End If

End Sub

End Class 
```

你不需要 response.write 它只是为了测试它是否在 min 内从 web.config 获得了正确的 session.timeout。

在你的主页上使用这个代码，（你不需要计数器，它只是为了测试所以你知道它什么时候重定向你）

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript">
    var sessionTimeout = "<%= Session.Timeout %>";
    var count = 60 * sessionTimeout
    function DisplaySessionTimeout() {
        setTimeout("location.href='http://www.google.com';", 60000 * sessionTimeout);
    }

    function countDown() {
        count--;
        document.getElementById("timer").innerHTML = "This page will redirect in " + count + " seconds."
        setTimeout("countDown()", 1000)
    }
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
<span id="timer">  
<script>
countDown();
</script>  
</span> 
</div>
</form>
</body>
</html> 
```

这里它占用了 session.timeout 和 * 60000 mil。秒。所以3分钟后。将重定向到登录页面或在本例中为 google。

我没有时间用 gridview 测试它，看看它是否重置了计数器，当 session.timeout 被重置 bc 活动时，所以你需要测试它，但这是一个工作代码。

# java - 在 Eclipse 中使用 java 闭包？

> ID：12651799
> 
> 赞同：1
> 
> 时间：2012-09-29T10:06:24.967
> 
> 标签：java, eclipse, closures

由于闭包是最新 Java 版本的主要特性之一，我尝试在 Eclipse 中尝试一些示例（java 1.7/java 1.8ea 和 Eclipse 4.2）。但令人惊讶的是，Eclipse 现在似乎不支持闭包？每当它在源代码中找到与闭包相关的任何内容时，我得到的只是一堆错误消息。我可以设置的最大“编译器合规级别”是 7。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:57:14.953

Eclipse 使用自己的编译器（请参阅[javac 和 Eclipse 编译器有什么区别？](https://stackoverflow.com/questions/3061654/what-is-the-difference-between-javac-and-the-eclipse-compiler)），因此不提供对 Java 未来（可能不稳定）版本的支持。所以没有办法强迫这个。您唯一的选择是使用 Eclipse 作为编辑器并使用 JDK8 javac 进行编译。

为此，请转到 Project 并添加一个新的 Builder，指定 javac 的位置和其他选项。

# python - 具有后台工作线程的 Python Web 应用程序

> ID：12651801
> 
> 赞同：4
> 
> 时间：2012-09-29T10:06:34.343
> 
> 标签：python, flask

要求：

*   定义具有开始时间*t*、批量大小*s*、调用间隔*i*和应处理的*列表的“作业”*
*   从时间*t*开始，每隔*i*秒从*列表中*抓取下一个*项目*并处理它
***   作业可以暂停和恢复（用户应该能够告诉作业停止抓取新的列表项进行处理）**

 **Flask 将用于 Web 应用程序。显然，我需要一些后台进程/线程来定期执行处理代码。

由于状态将持久保存到数据库中，我能想到的最简单的方法是定义一个 cronjob，它将定期执行检查活动作业并执行处理的 python 脚本。

关于如何仅使用 python 设计它的任何建议？

*   启动另一个将定期检查和执行活动作业的 python 进程？
*   从 Flask 产生一个工作线程？
*   ... ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T10:24:50.080

我强烈建议您使用 Redis 或 RabbitMQ 等队列机制。Flask 将充当生产者，而您的“工人”将消费和处理。

设置这些工具中的任何一个都远没有您想象的那么令人生畏。

```
sudo apt-get install redis-server
sudo apt-get install python-pip
sudo pip install redis 
```

您的烧瓶应用程序充当生产者

```
>>> from redis import Redis
>>> r = Redis()
>>> r.lpush('task_queue', 'task1')
1L 
```

并且您的“工人”异步消费和处理：

```
>>> r.rpop('task_queue')
'task1' 
```**

# javascript - Javascript 变量对象键

> ID：12651803
> 
> 赞同：8
> 
> 时间：2012-09-29T10:07:21.650
> 
> 标签：javascript, variables, object, key

我正在尝试添加一个变量键，但没有运气。

这是我到目前为止得到的：

```
mysql('translations',{
    check: 'element_id',
    element_id: element_id,
    {'lang-'+lang_id}: value
}); 
```

变量 key 是函数的最后一行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-29T10:11:40.693

您不能对对象文字中的标识符使用表达式。

首先创建对象，然后可以使用动态名称：

```
var obj = {
  check: 'element_id',
  element_id: element_id,
}

obj['lang-'+lang_id] = value;

mysql('translations', obj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:12:15.677

你可以这样做：

```
var x = {
    check: 'element_id',
    element_id: element_id    
};
x['lang-'+lang_id] = value;

mysql('translations', x); 
```

# c# - 使用响应式扩展每秒按顺序获取下一个事件

> ID：12651806
> 
> 赞同：3
> 
> 时间：2012-09-29T10:07:37.367
> 
> 标签：c#, system.reactive

我有以下类型...

```
public class NewsFeed
{
    public event EventHandler<NewsItemEventArgs> NewItem;

    .....

}

public class NewsItemEventArgs : EventArgs
{
    public NewsItem Item;
    public NewsItemEventArgs(NewsItem newsItem)
    {
        Item = newsItem;
    }
}

public class NewsItem
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Body { get; set; }
} 
```

NewsFeed 的 NewItem 事件触发带有 NewsItemEventArgs 类型的 eventArgs 的事件。在我的系统中，事件以突发形式发布，例如在 1 秒的小窗口中发布 10 个 NewsItems，然后在 60 秒内没有进一步的新闻报道。我想用 RX 来平滑这些突发事件，这样我的 UI 新闻故事“似乎”以更规律的间隔（比如 5 秒）一次到达一个。

我知道我需要创建一个类似下面的 observable

```
_source = Observable.FromEventPattern<NewsItemEventArgs>(
                        h => _newsFeed.NewItem += h,
                        h => _newsFeed.NewItem -= h); 
```

但我不知道如何转换和订阅 observable，以便我得到事件的滴灌，而不是上述突发事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T14:56:24.583

Zip 可能不是此操作的最佳选择，因为生产者有时可能会变慢，从而导致输出抖动。

Rx 2.0似乎仍然无法进行准确[的调度。`DateTimeOffset`](http://social.msdn.microsoft.com/Forums/en-US/rx/thread/d1d340b2-d60d-470e-9a22-42c22cd60814/)`TimeSpan`不过，现在工作。您可以通过将`TimeSpan`偏移量替换为`DateTimeOffset`.

综上所述，如果我们可以指定两个连续值之间的最小间隔，就可以解决突发问题。

```
 static IObservable<T> DelayBetweenValues<T>(this IObservable<T> observable, TimeSpan interval, IScheduler scheduler)
    {
        return Observable.Create<T>(observer =>
        {
            var offset = TimeSpan.Zero;
            return observable
                .TimeInterval(scheduler)
                .Subscribe
                (
                    ts =>
                    {
                        if (ts.Interval < interval)
                        {
                            offset = offset.Add(interval);
                            scheduler.Schedule(offset, () => observer.OnNext(ts.Value));
                        }
                        else
                        {
                            offset = TimeSpan.Zero;
                            observer.OnNext(ts.Value);
                        }
                    }
                );
        });
    } 
```

测试：

```
 Observable.Interval(TimeSpan.FromSeconds(2.5))
                  .Do(_ => Console.WriteLine("Burst"))
                  .SelectMany(i => Enumerable.Range((int)i, 10))
                  .DelayBetweenValues(TimeSpan.FromSeconds(0.2), TaskPoolScheduler.Default)
                  .Subscribe(Console.WriteLine); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T10:17:11.623

您可以使用另一个定期生成值的序列来压缩您的序列：

```
Observable<NewsItem> nis = _source
    .Zip(Observable.Timer(Timespan.FromSeconds(5), TimeSpan.FromSeconds(5)), (e, _) => e)
    .Select(eventArgs => eventArgs.Item); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T21:32:10.937

I couldn't get the answer from Asti to work. So I tried the undocumented Delay overload with the delayDurationSelector. I got it working for my problem, though somehow it's not behaving correctly when I use the scheduler in the timer, but it works without it:

```
public static IObservable<T> DelayBetweenValues<T>(this IObservable<T> observable, TimeSpan interval,
    IScheduler scheduler)
{
        var offset =  TimeSpan.Zero;
        return observable
            .TimeInterval(scheduler)
            .Delay(ti =>
            {
                offset = (ti.Interval < interval) ? offset.Add(interval) : TimeSpan.Zero;
                return Observable.Timer(offset);
            })
            .Select(ti => ti.Value);
} 
```

# elasticsearch - ElasticSearch 搜索部分字母数字值

> ID：12651808
> 
> 赞同：1
> 
> 时间：2012-09-29T10:08:06.837
> 
> 标签：elasticsearch, n-gram

我有一个字符串字段，其值类似于`PA2456U`or`PA23U-RB`并且我想做部分匹配，以便我可以搜索`PA24`并获得第一个结果，或者搜索`PA23U-RB`并找到第二个结果（这将是一个完全匹配。

我尝试使用 ngram，但它忽略了数值，所以，如果我输入`pa111`它会返回任何以`pa`

有关示例，请参[见此要点。](https://gist.github.com/3803180)

这可能是一个单独的问题，或相关的，但搜索`12345001`也应该匹配`12345-001`

谢谢

**更新** 我使用的最终分析器在这里：[https ://gist.github.com/3803180](https://gist.github.com/3803180)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:39:49.840

根据您的要求制作 ngrams 看起来是一个不错的选择，但我认为[edge_ngrams](http://www.elasticsearch.org/guide/reference/index-modules/analysis/edgengram-tokenfilter.html)应该足够了。这样你的索引会增长一点点，因为你会索引更少的术语。无论如何，问题是您也不需要将相同的分析器应用于查询，否则查询`pa111`将意味着查询您可以从中得出的所有 ngram，这将导致您获得更多匹配项d 期望。

您只需要将您的 search_analyzer 更改为不生成 ngram 的分析器。您可以使用已有的相同并删除 ngram 令牌过滤器（仅适用于 search_analyzer，index_analyzer 很好）。

关于破折号问题，请查看[Word delimiter token filter](http://www.elasticsearch.org/guide/reference/index-modules/analysis/word-delimiter-tokenfilter.html)。您需要对其进行配置以使其按预期工作。我猜`generate_number_parts=false`,`generate_word_parts=false`和`split_on_numerics=false`选项应该让它按你的意愿工作。这样，破折号就不会被索引。您需要在索引时和查询时应用令牌过滤器。

# ffmpeg - 最近的 Ubuntu 版本中的 libswresample？

> ID：12651816
> 
> 赞同：9
> 
> 时间：2012-09-29T10:10:10.610
> 
> 标签：ffmpeg

我想知道哪个软件包涵盖了最近 Ubuntu 版本的 libswresample（可能还有早期版本，希望还有 Debian）。是否完全覆盖？

如果没有，我应该使用什么其他库来重新采样音频？最好的办法是让它随处可用，即 lib 随处可用。

或者，也许我只是将 libswresample 与我的项目一起分发并静态链接到它......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T03:41:33.757

Debian 和 Ubuntu 目前使用 FFMPEG 的“libav”分支。这个 fork 有一个名为 libavresample 的库，它与 libswresample 非常相似，但不兼容。不幸的是，Ubuntu 12.10 似乎也不包含这个库。Debian FFMPEG 维护者是否会继续使用该分支，或者他们是否会切换回包含 libswresample 以及（为了完全兼容）libavresample 的原始 FFMPEG，还有待观察。[http://en.usenet.digipedia.org/thread/16946/35690/](http://en.usenet.digipedia.org/thread/16946/35690/)

同时，您最好的选择是从系统中删除所有 libav 包并使用[https://launchpad.net/~jon-severinsson/+archive/ffmpeg](https://launchpad.net/~jon-severinsson/+archive/ffmpeg)中的 FFMPEG 包，或者如果您想要最前沿，从源代码构建它。

缺点是某些 Debian 软件可能依赖于 libav。将这两个库安装在同一个系统上的不同位置是可能的（我什至设法在同一个程序中同时使用这两个库），但由于它们使用同名文件和符号，因此很容易导致问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:22:00.537

我没有找到任何明确回答此问题的内容（评论、帖子、...）。我也没有找到这样的包（特别是不在官方仓库中）。所以，回答这个问题：没有这样的包。

我现在的解决方案是手动编译 FFmpeg。`./configure && make && sudo make install`大部分工作。这包括 libswresample。`--enable-shared`如果您需要，也很有用（否则只有静态库）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-02T19:17:27.490

很抱歉唤醒了一个老问题，但 Ubuntu 14.04 可能会带回 libavresample。

[http://packages.ubuntu.com/trusty/libavresample1](http://packages.ubuntu.com/trusty/libavresample1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-24T20:27:23.090

显然大多数答案都已过时。当前的 Ubuntu 20.04 在**libswresample3**和**libswresample-dev**软件包中有 libswresample。

# c++ - C ++如何将更多字符串添加到方法中

> ID：12651817
> 
> 赞同：1
> 
> 时间：2012-09-29T10:10:10.143
> 
> 标签：c++, xcode, char, cocos2d-x

自从我开始编程并决定学习 c++ 以来，我一直在使用 Java。我用 Java 写的内容是这样的：

```
showMessage("Hello world" + randomNumber); 
```

它显示文本+整数或浮点数或其他。但它不会在 c++ 中工作。xCode 的错误消息：`Invalid operands to binary expression ('const char *' and 'float')`

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:20:22.017

你可以`sprintf`按照安东做一个，或者更多`c++`：

```
std::stringstream ss;
ss << "Hello, world " << randomNumber;
showmessage(ss.str()); 
```

（sprintf 没有任何问题，特别是如果你使用它`snprintf`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:18:33.083

```
 ostringstream os;
    os<<"HelloWorld"<<randomnumber;
    string s;
    s = os.str(); 
```

string s 现在包含您想要作为字符串对象的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:18:46.853

您还可以使用[boost::lexical_cast](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast.html)将数字转换为字符串，这是大多数情况下最快的方法：

```
showMessage("Hello world" + boost::lexical_cast<std::string>(randomNumber)); 
```

showMessage 声明是

```
void showMessage(cosnt std::string& message) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T10:19:07.063

考虑添加一个能够将多种类型转换为 std::string 的新函数：

```
template<typename ty>
string to_str(ty t)
{
   stringstream ss; ss << t;
   return ss.str();
} 
```

用法：

```
"Hello World " + to_str(123) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T11:39:23.017

我不确定 c 风格的答案是否合适，但我已经在 cocos2d-x 问题中回答了它。

[尝试在 Cocos2d-X C++ 中使用整数作为字符串的一部分设置 CCLabelTTF](https://stackoverflow.com/questions/12506187/trying-to-set-up-a-cclabelttf-with-an-integer-as-part-of-its-string-in-cocos2d)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T10:34:52.987

定义一个类`S`。然后写

```
showMessage( S() << "Hello world" << randomNumber ); 
```

我已经`S`为 SO 编写了太多次类，创建它是一个很好的练习，因此，不提供源代码。

请注意，您可以合理地调用它`StringWriter`或类似的名称，然后`typedef`在函数调用中使用更简洁的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T11:47:38.513

使用 C++11：

```
showMessage("Hello world" + std::to_string(randomNumber)); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-29T10:26:26.337

在 C++ 中，连接字符串和原语的标准方法是使用`stringstream`. 它实现了与 Java 相同的功能（还有更多功能）`StringBuilder`（当然它的 API 不同）。但是，如果您使用起来很舒服，`cout`那么您应该没问题。

例如。

```
#include <iostream>
#include <sstream>
#include <string>

using namespace std;

int main () {
  stringstream ss;
  ss << "Some string - " << 124; // build string    
  string str = ss.str(); // extract string

  cout << str << endl;
  return 0;
} 
```

字符串流快速参考[http://www.cplusplus.com/reference/iostream/stringstream/stringstream/](http://www.cplusplus.com/reference/iostream/stringstream/stringstream/)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-29T10:13:23.890

您应该改为打印到 char* 中。

你可以做类似的事情

```
char* tempBuffer = new char[256];

sprintf_s(tempBuffer, 256, "Hello world %d", randomNumber);

showMessage(tempBuffer); 
```

# powershell - 从 QuestAD 转换 msExchMailboxGuid

> ID：12651824
> 
> 赞同：0
> 
> 时间：2012-09-29T10:11:15.147
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我正在尝试将我的一个 PS 脚本转换为使用 Quest AD 而不是本机工具查询 AD 以加快处理速度。

在我的测试过程中，我得出的结论是 msExchMailboxGuid 属性以我需要转换的格式返回。

这是我正在运行的测试命令：

```
$LDAPQuery = "(&(HomeMDB=*)(objectClass=user))"
$OUPath = "OU=users,DC=domain,DC=com"

$SearchResults = Get-QadUser -LdapFilter $LDAPQuery -SearchRoot $OUPath -ShowProgress -SizeLimit 1 -IncludedProperties "msExchMailboxGuid" 
```

msExchMailboxGuid 值返回如下：

```
[PS] C:\Users\sysadmin>$SearchResults | Select msExchMailboxGuid

msExchMailboxGuid
-----------------
35CAF894943052409B77F30A6F8D40B4 
```

如果我运行它，它会返回：

```
[PS] C:\Users\sysadmin>[guid]"35CAF894943052409B77F30A6F8D40B4"

Guid
----
35caf894-9430-5240-9b77-f30a6f8d40b4 
```

但我知道这个用户的 msExchMailboxGuid 实际上是这样的：

```
94f8ca35-3094-4052-9b77-f30a6f8d40b4 
```

根据交易所 PS。所以它很接近但并不完全正确。

我编写了一个函数，它使用子字符串过程将值转换为正确的值。

有没有更好/更有效的方法来返回正确的值？

```
Function Convert-msExchMailboxGuid
{
    param
    (
        $RawGuid
    )

    $ConvertedGuid = $RawGuid.SubString(6,2) + $RawGuid.SubString(4,2) + $RawGuid.SubString(2,2) + $RawGuid.SubString(0,2) + $RawGuid.SubString(10,2) + $RawGuid.SubString(8,2) + $RawGuid.SubString(14,2) + $RawGuid.SubString(12,2) + $RawGuid.SubString(16)

    return ([guid]$ConvertedGuid).ToString()
} 
```

这工作正常，但我希望这可以以更简单的方式实现：

```
[PS] C:\Users\sysadmin>Convert-msExchMailboxGuid -RawGuid "35CAF894943052409B77F30A6F8D40B4"
94f8ca35-3094-4052-9b77-f30a6f8d40b4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:23:45.890

我尝试了除此之外的几个步骤，即使在 Get-QADUser 命令后面使用某些参数，其余的也明显比我现有的脚本慢。所以我会把这个留在这里，以防有人想使用我的函数来转换 GUID，但我不再对答案感兴趣了。

# javascript - x64 或 x32 与 javascript？

> ID：12651834
> 
> 赞同：1
> 
> 时间：2012-09-29T10:12:27.553
> 
> 标签：javascript, jquery

> **可能重复：**
> [从用户代理或 Javascript 检测 64 位或 32 位 Windows？](https://stackoverflow.com/questions/1741933/detect-64-bit-or-32-bit-windows-from-user-agent-or-javascript)

我刚刚从 Apple 网站下载了 iTunes，当我点击下载时，它会自动下载 x64 版本，就像我在 64 位机器上一样。有谁知道该网站如何检测我正在使用的架构？是吗，可以用javascript完成吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:17:37.213

浏览器在每个请求中都会向服务器发送一个[用户代理字符串。](http://en.wikipedia.org/wiki/User_agent)它包含有关浏览器和操作系统的一些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:28:07.030

当您想检查您的浏览器发送了您正在访问的网站的用户代理字符串时，请在浏览器导航栏中输入：

```
javascript:alert(window.navigator.userAgent); 
```

# c# - 如何在c ++中读取具有数组的结构

> ID：12651835
> 
> 赞同：0
> 
> 时间：2012-09-29T10:12:31.030
> 
> 标签：c#, interop

```
public struct Data
{
    public long id,
    public datetime time;
    public string[] atts;
    public string[] names;
};

Guid("3102C9D3-822E-4359-9383-9B3AF7D39F2C")]
public interface IData  
{
    void GetEvents([MarshalAs(UnmanagedType.LPArray)]out DataResp[] resp);
} 
```

我想将复杂的结构从 C# 传递和接收到 c++ 组件并将其填充到 c++ 中。客户端代码是这样的

```
Lib::Data* data;
long size = svc->GetEvents(&data); 
for(size_t i = 0; i < size; ++i) 
{  
Lib::Data& current = data[i];   
long val = current.Value;  
bstr_t unit = current.Unit; 
```

任何人都可以帮助我如何从 C++ 读取字符串数组以及编组日期时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:46:39.347

这样做时您将面临几个问题。大多数时候，您将不得不用几个属性来装饰结构。

对于传递字符串，我建议您使用 Stringbuilder 构建一个 C++ 预期大小的字符串，这样就足够了。

我多次面临的另一个问题是打包。它改变了结构的对齐方式。要解决此问题，您应该通过提供适当的属性来确保结构按顺序对齐。

此外，如果它要求您传递任何指针，请确保在传递之前固定对象，否则运行时会更改它。

# java - StarActivityForResult() 导致在返回 Intent 数据时强制关闭

> ID：12651837
> 
> 赞同：2
> 
> 时间：2012-09-29T10:13:21.660
> 
> 标签：java, android, android-intent, android-activity

这是我的代码的一部分：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.menu_settings:

        startActivityForResult(new Intent(MainActivity.this,Settings.class),1);
        break;
    }
    return true;
}

@Override
public void onActivityResult(int requestCode,int resultCode,Intent data) {

    Toast.makeText(getBaseContext(),requestCode, Toast.LENGTH_SHORT); // This was causing the error. See the fantastic answer that's been provided for details. Comment out this this and it works !

    if(requestCode==1) {
        if(resultCode==RESULT_OK) 
        {
            String extraData=data.getData().toString();

            minD=Integer.parseInt(extraData);
            Toast.makeText(getBaseContext(),minD, Toast.LENGTH_SHORT);
        }

    }

} 
```

这是 Settings.java 的代码

```
package com.example.com.draft1;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Settings extends Activity  {

@Override 

public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    Button setbtn = (Button) findViewById(R.id.SetminDistance);

    setbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

        //Intent data=new Intent();
        EditText mind=(EditText) findViewById(R.id.minDistance);
                    String minDis =mind.getText().toString();
                    Intent data = new Intent();   
                    data.setData(Uri.parse(minDis));

        Toast.makeText(getBaseContext(), minDis, Toast.LENGTH_SHORT).show();
                  //  intent.putExtra("minD", minDis);

       if (getParent() == null) {
           setResult(RESULT_OK, data);
       } else {
           getParent().setResult(RESULT_OK, data);
       }
       finish();

      /*  setResult(RESULT_OK, data);
       finish();*/
            }

});

}
} 
```

现在，当我选择**设置**的菜单选项时，所需的活动会完美打开，但是，当我尝试返回数据时，它会导致强制关闭

这是显示错误的 Logcat 读数：

```
09-29 16:03:29.366: E/AndroidRuntime(766): FATAL EXCEPTION: main
09-29 16:03:29.366: E/AndroidRuntime(766): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=65 }} to activity {com.example.com.draft1/com.example.com.draft1.MainActivity}: android.content.res.Resources$NotFoundException: String resource ID #0x1
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.app.ActivityThread.access$2000(ActivityThread.java:117)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.os.Looper.loop(Looper.java:130)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-29 16:03:29.366: E/AndroidRuntime(766):  at java.lang.reflect.Method.invokeNative(Native Method)
09-29 16:03:29.366: E/AndroidRuntime(766):  at java.lang.reflect.Method.invoke(Method.java:507)
09-29 16:03:29.366: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-29 16:03:29.366: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-29 16:03:29.366: E/AndroidRuntime(766):  at dalvik.system.NativeStart.main(Native Method)
09-29 16:03:29.366: E/AndroidRuntime(766): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x1
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.content.res.Resources.getText(Resources.java:201)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.widget.Toast.makeText(Toast.java:258)
09-29 16:03:29.366: E/AndroidRuntime(766):  at com.example.com.draft1.MainActivity.onActivityResult(MainActivity.java:570)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.app.Activity.dispatchActivityResult(Activity.java:3908)
09-29 16:03:29.366: E/AndroidRuntime(766):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
09-29 16:03:29.366: E/AndroidRuntime(766):  ... 11 more 
```

为什么我会在附近遇到一股力量？

我真的很感谢这里的帮助

感谢您对问题的兴趣

**根据建议**

```
if(requestCode==1) {
        if(resultCode==RESULT_OK) 
        {
            //String extraData=data.getData().toString();

            //minD=Integer.parseInt(extraData);
            Toast.makeText(getBaseContext(),String.valueOf(requestCode), Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T10:15:40.263

如果你看到[**Toast.makeText**](http://developer.android.com/reference/android/widget/Toast.html#makeText%28android.content.Context,%20int,%20int%29)

```
public static Toast makeText (Context context, int resId, int duration) 
```

因此，如果您提供第二个参数，`int`那么系统将在 R.java 中查找此 id，但具有讽刺意味的是您实际上想要打印数字，所以只需将您的第二个参数转换为`String`即[**this**](http://developer.android.com/reference/android/widget/Toast.html#makeText%28android.content.Context,%20java.lang.CharSequence,%20int%29)

```
public static Toast makeText (Context context, CharSequence text, int duration) 
```

将 Toast 行代码更改为

```
Toast.makeText(getBaseContext(),requestCode+"", Toast.LENGTH_SHORT).show(); 
```

或者

```
Toast.makeText(getBaseContext(),String.valueOf(requestCode), Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:48:58.190

您应该使用 mIntent.putExtra 而不是 uri ...检查此代码....

**MainActivity.java**

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_settings:
        startActivityForResult(new Intent(MainActivity.this, Settings.class), 1);
        break;
    }
    return true;
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1) {
        if (resultCode == RESULT_OK) {
            minD = Integer.parseInt(data.getStringExtra("data"));
            Toast.makeText(MainActivity.this, String.valueOf(minD), Toast.LENGTH_SHORT);
        }

    }

}` 
```

**设置.java**

```
public class Settings extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    Button setbtn = (Button) findViewById(R.id.SetminDistance);

    setbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            EditText mind = (EditText) findViewById(R.id.minDistance);
            Intent data = getIntent();
            data.putExtra("data", mind.getText().toString());
            Toast.makeText(getBaseContext(), mind.getText().toString(), Toast.LENGTH_SHORT).show();

            if (getParent() == null) {
                setResult(RESULT_OK, data);
            } else {
                getParent().setResult(RESULT_OK, data);
            }
            finish();
        }

    });

} 
```

}

# c# - 使用theida保护时反序列化失败

> ID：12651840
> 
> 赞同：3
> 
> 时间：2012-09-29T10:13:38.833
> 
> 标签：c#, xml-deserialization, copy-protection

正如标题所说，在使用 themida 保护我的应用程序后，反序列化失败，但有以下例外：

> 无法生成临时类（结果=1）。错误 CS0009：元数据文件 'c:\Path\to\protected.exe' 无法打开 -- '试图加载格式不正确的程序。'

这是我用于反序列化的代码（它在 exe 不受保护时工作）：

```
MyClass myClass;
try
{
    using (var stream = new MemoryStream(Data))
    {
        var serializer = new XmlSerializer(typeof(ComSec.MyClass));
        myClass = serializer.Deserialize(stream) as MyClass;
    }
}
catch (Exception e)
{
    return null;
} 
```

奇怪的是，代码 + themida 保护在我的机器上运行良好，但在虚拟机和同事的机器上却失败了

我正在使用（与我的同事相同的配置）：

*   VS2012 专业版
*   Windows 7 x64 终极版
*   Themida 2.1.2.0 x86（支持.Net）

VM 是全新安装的 Windows 7 x86。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T14:53:48.467

我最终使用了该`DataContract`属性并使用 DataContractSerializer 来序列化和反序列化对象（它现在在任何地方都可以使用，并且有/没有保护）。

**我的研究：**

```
[DataContract(Name = "TestClass")]
public class TestClass
{
    [DataMember(Name = "Name")]
    public string Name { get; set; }
    [DataMember(Name = "Age")]
    public int Age { get; set; }
} 
```

**序列化/反序列化：**

```
var serializer = new DataContractSerializer(typeof(TestClass));

using (var stream = new MemoryStream())
{
    serializer.WriteObject(stream, this);
    File.WriteAllBytes("TestClass.xml", stream.ToArray());
}

TestClass o = null;
using (var stream = new MemoryStream(File.ReadAllBytes("TestClass.xml")))
{
    o = serializer.ReadObject(stream) as TestClass;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T02:06:17.483

我也遇到了这个问题，建议的答案效果很好。最初的问题是由于文件访问权限。只需添加此信息，以便其他人了解 DataContract 为何有效（来自[https://stackoverflow.com/a/10340155/1111380](https://stackoverflow.com/a/10340155/1111380)）：

DataContractSerializer、NetDataContractSerializer 和 DataContractJsonSerializer 不需要磁盘空间，也不会将程序集发送到磁盘。相反，它们在运行中（在内存中）生成 IL，并在随后的序列化情节中使用它在它们正在操作的 AppDomain 内进行序列化和反序列化。但是，XmlSerializer 确实需要磁盘空间并解释错误（文件路径无法打开/访问）。

# php - php recursive - 目录名称显示为标题

> ID：12651846
> 
> 赞同：3
> 
> 时间：2012-09-29T10:15:12.020
> 
> 标签：php, recursion, directory

我希望将文件夹中的所有目录和子目录列为无序列表。
在下面找到了正确列表的代码。但我需要两件事的帮助：

```
<?php
function listFolderFiles($dir){
    $ffs = scandir($dir);
    echo '<ul>';
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..'){
            echo '<li>'.$ff;
            if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff);
            echo '</li>';
        }
    }
    echo '</ul>';
}

listFolderFiles('../targetfolder');

?> 
```

* * *

所有目录名称都应显示为标题，如下所示：

```
<li> <h2> directory name </h2> <li> 
```

和子目录名称，如下所示：

```
<li> <h3> sub directory name </h3> </li> 
```

* * *

在目标目录中，有两个主要目录。他们的名字不应出现在列表中——

我对 php 的经验非常有限 :) 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T10:23:35.810

试试这个

```
function listFolderFiles($dir){
  static $level = 0;
  $level++;
  $ffs = scandir($dir);
  echo '<ul>';
  foreach($ffs as $ff){
    if($ff != '.' && $ff != '..'){
      echo '<li>';
      if(is_dir($dir.'/'.$ff)) {
        $h_start = ($level == 1) ? '<h2>' : '<h3>';
        $h_close = ($level == 1) ? '</h2>' : '</h3>';
        echo $h_start.$ff.$h_close;
        listFolderFiles($dir.'/'.$ff);
      } else {
        echo $ff;
      }
      echo '</li>';
    }
  }
  echo '</ul>';
  $level--;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:25:43.873

```
function listFolderFiles($dir){
    $ffs = scandir($dir);
    echo '<ul>';
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..'){
            echo '<li>'.$ff;
            if(is_dir($dir.'/'.$ff)) {
                echo '<h3>' . $ff . '</h3>';
                listFolderFiles($dir.'/'.$ff);
            }
            echo '</li>';
        }
    }
    echo '</ul>';
}

echo '<h2>folder</h2>';
listFolderFiles('folder'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-21T18:55:46.587

这是一个非常简单且可破解的解决方案：

```
function dir2ul($path,$title,$n){
    if(!is_dir($path))return "<a href=\"$path\">$title</a>";
    $html="";
    foreach(preg_grep('/^([^.])/', scandir($path)) as $file)
        $html.='<li>'.dir2ul($path.'/'.$file,$file,$n+1).'</li>';
    return "<h$n>$title</h$n><ul>$html</ul>";
}
echo dir2ul('page','',1); 
```

# c++ - 使用在 C++ 中的其他文件中声明的模板

> ID：12651848
> 
> 赞同：0
> 
> 时间：2012-09-29T10:15:39.677
> 
> 标签：c++, templates

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我在文件中定义了一个模板类。

点.h 是

```
#ifndef POINT_H
#define POINT_H

using namespace std;

template <typename T, int size>
class point {
private:
    T coordinates[size];

public:
    point();
    void set_coordinates(const T *);
    void get_coordinates(T *);
};

#endif  /* POINT_H */ 
```

点.c 是

```
#include "point.h"

template <typename T, int size>
point::point() {
    for (int i = 0; i < size; i++)
        coordinates[i] = 0;
}

template <typename T, int size>
void point<T, size>::set_coordinates(const T *coordinates) {
    for (int i = 0; i < size; i++)
        this->coordinates[i] = coordinates[i];
}

template <typename T, int size>
void point<T, size>::get_coordinates(T *coordinates) {
    for (int i = 0; i < size; i++)
        coordinates[i] = this->coordinates[i];
} 
```

我将此模板用作`point<int, 2> p0;`. 但是编译器给出了`point<int, 2>`未定义的错误。我对此进行了搜索，发现了两个解决方案 - 1\. 使用`export`变量。但我读到并非所有编译器都支持它。所以，我不想用那个。2.创建明确的类专业化，如

```
template <> class point<int> {
    ...
} 
```

但是没有其他方法可以做到这一点吗？（我的意思是在 C++ 标准容器中，他们可能使用了一些技术来做到这一点。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:22:11.707

阅读这个和接下来的两个常见问题解答 - [C++ 常见问题解答](http://www.parashift.com/c++-faq-lite/templates-defn-vs-decl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:24:09.237

c++ 标准容器的解决方案是将所有内容都保存在头文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:24:20.783

你应该把属于模板的所有定义`point`（即包括成员函数）放到`point.h`文件中，并包含在任何使用`point`该类的文件中，以便编译器可以根据需要对其进行实例化。有关详细信息，请参阅[此问题](https://stackoverflow.com/q/495021/51831)。

C++ 编译器和链接器有办法避免链接上的“多重定义”错误（标准中的 ODR 规则规定必须如此）。

# ios - 获取我在 iphone 中的当前位置

> ID：12651850
> 
> 赞同：0
> 
> 时间：2012-09-29T10:15:56.640
> 
> 标签：ios

```
#import <UIKit/UIKit.h>

@interface WhereAmIViewController : UIViewController 

{

  IBOutlet UILabel *latLabel;

  IBOutlet UILabel *longLabel;
}

@end

- (void)viewDidLoad {

  [super viewDidLoad];

  locationManager = [[CLLocationManager alloc] init];

  locationManager.delegate = self;

  locationManager.distanceFilter = kCLDistanceFilterNone; 

  locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; 

  [locationManager startUpdatingLocation];

}

- (void)locationManager:(CLLocationManager *)manager 

didUpdateToLocation:(CLLocation *)newLocation

fromLocation:(CLLocation *)oldLocation

{

int degrees = newLocation.coordinate.latitude;

double decimal = fabs(newLocation.coordinate.latitude - degrees);

int minutes = decimal * 60;

double seconds = decimal * 3600 - minutes * 60;

NSString *lat = [NSString stringWithFormat:@"%d° %d' %1.4f\"",
                   degrees, minutes, seconds];

latLabel.text = lat;

 degrees = newLocation.coordinate.longitude;

 decimal = fabs(newLocation.coordinate.longitude - degrees);

minutes = decimal * 60;

 seconds = decimal * 3600 - minutes * 60;

NSString *longt = [NSString stringWithFormat:@"%d° %d' %1.4f\"",
                     degrees, minutes, seconds];

longLabel.text = longt;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:40:09.817

```
locationManager = [[CLLocationManager alloc]init];
locationManager.delegate = self;    

[locationManager startUpdatingLocation]; 
```

使用委托方法

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation 

    *)newLocation fromLocation:(CLLocation *)oldLocation {

    CLLocationCoordinate2D coordinate =  newLocation.coordinate;

    [locationManager stopUpdatingLocation];
} 
```

您可以使用坐标中的经度和纬度。

```
latLabel.text = [[NSNumber numberWithDouble:coordinate.latitude] stringValue];
longLabel.text = [[NSNumber numberWithDouble:coordinate.longitude] stringValue]; 
```

# c# - SQL从C#中的数据库中选择

> ID：12651853
> 
> 赞同：2
> 
> 时间：2012-09-29T10:17:00.660
> 
> 标签：c#, .net, sql-server

我在 C# 中有以下代码：

```
string query = "SELECT * FROM Zboruri WHERE cod_aeroport = " + country;

using (var command = new SqlCommand(query, connection))
{
    var list = new ArrayList();
    var reader = command.ExecuteReader();

    if (reader.HasRows)
    {
         while (reader.Read())
         {
             string data1 = reader.GetString(1);
             string data2 = reader.GetString(2);
             list.Add(cod_aeroport);
             list.Add(data1);
             list.Add(data2);
         }
    }
    else
    {
        string raspuns = "nu este info";
        list.Add(raspuns);
    }

    reader.Close();
    connection.Close();
    return list;
 } 
```

我的数据库表有这些列：

```
data1(numeric(18,0))
data2(numeric(18,0))
........... 
```

它给了我错误：

> *指数数组的边界之外。*

在这行代码上：

```
string data2 = reader.GetString(2); 
```

如何修复错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T10:18:54.123

索引从 0 开始，而不是 1

```
string data1 = reader.GetString(0);
string data2 = reader.GetString(1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T10:24:43.157

我更喜欢使用从表中检索的列名，因为它比使用`index`列提供了更多的描述（*这通常是原因`index out of bounds exception`*）

前任，

```
string data1 = reader["colName1"].ToString();
string data2 = reader["colName2"].ToString(); 
```

旁注：请`parameters`在您的查询中使用，

```
string query = "SELECT * FROM Zboruri WHERE cod_aeroport = @country"; 
```

在你打电话之前`ExecuteReader`添加这一行，

```
command.Parameters.AddWithValue("@country", country);
var reader = command.ExecuteReader(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:27:45.573

您应该更好地按名称访问它们，首先使用该方法按名称解析索引`GetOrdinal()`，以便以后扩展查询时代码不会中断。

```
if (reader.HasRows)
{
     int data1Index = reader.GetOrdinal("data1");
     int data2Index = reader.GetOrdinal("data2");
     while (reader.Read())
     {
         string data1 = reader.GetString(data1index);
         string data2 = reader.GetString(data2index);
         list.Add(cod_aeroport);
         list.Add(data1);
         list.Add(data2);
     }
} 
```

请注意，与使用命名索引器相比，这是更好的方法，因为它避免了在每一行上查找索引。

另外，请对查询进行参数化以避免 SQL 注入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T10:29:33.813

索引是从零开始的，所以第一列是 0，第二列是 1。不过，您应该真正使用列的命名版本；

```
string data1 = reader["data1"].ToString(); 
```

还有一件事，您可能应该参数化您的查询以避免 SQL 注入问题，在这种情况下，它几乎与您的原始查询一样简单并且更安全。它还可以帮助数据库在类似查询上节省大量时间和内存；

```
string query = "SELECT * FROM Zboruri WHERE cod_aeroport = @country";
using (var command = new SqlCommand(query, connection))
{
    command.Parameters.AddWithValue("@country", country);
    var list = new ArrayList();
    ... 
```

# core-data - NSUnknownKeyException 用于现有且未键入错误的密钥

> ID：12651860
> 
> 赞同：0
> 
> 时间：2012-09-29T10:17:54.307
> 
> 标签：core-data, xcode4, ios6, key-value-coding

我得到以下输出：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason:
'[<NSManagedObject 0x21016610> setValue:forUndefinedKey:]: the entity MyEntity is
not key value coding-compliant for the key "aBooleanKey".' 
```

在我得到输出之前运行的代码如下：

```
self.name = [managedObject valueForKey:@"name"];
self.language = [managedObject valueForKey:@"language"];
self.ownerID = [managedObject valueForKey:@"ownerID"];
// the following line is the scope of the problem:
self.aBooleanKey = [[managedObject valueForKey:@"aBooleanKey"] boolValue]; 
```

对我来说，这看起来像是输入错误之类的，因为所有其他实体属性都不会引起任何问题。但是我检查了十二次，找不到任何错误输入。一切看起来都刚刚好。一周前一切都很好——我没有在这里改变任何东西。

还有一些其他的地方我用 做事情，`managedObject`同样所有其他属性都可以正常工作，除了这个。我尝试在 Core Data 存储中删除它并重新输入它，但它并没有解决问题。

这个错误还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:05:08.813

这个问题很奇怪（有时有效，有时无效），所以我建议更改属性的名称（例如`booleanStatus`）并验证问题是否仍然存在。

由于您更改了模型，因此您需要删除该应用程序并重新创建它。或者，您可以在 Core Data 上执行自动迁移。根据你喜欢的。

希望能帮助到你。

# vector - 隐藏后如何在OpenLayers中显示矢量特征？

> ID：12651861
> 
> 赞同：0
> 
> 时间：2012-09-29T10:17:55.687
> 
> 标签：vector, filtering, openlayers

我确实使用样式属性更改了一些功能样式（通过复选框）：

```
var features = layer.features;

for( var i = 0; i < features.length; i++ ) {
  //features[i].style = { visibility: 'hidden' };
    features[i].style = 'none'; 
}

layer.redraw(); 
```

现在，如果我再次选中该框，它应该会再次显示，但没有任何反应！我试过了：

```
 features[i].style = 'block'; 
OR
     features[i].style = 'delete'; 
```

然后重绘图层..但这不起作用

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:37:32.483

尝试这个：

```
// set style
    features[i].style = null;
// or
    features[i].style = {display:'none'};

// redraw feature
layer.drawFeature(features[i]); 
```

# php - 如何在php中打印多维数组

> ID：12651864
> 
> 赞同：7
> 
> 时间：2012-09-29T10:18:23.180
> 
> 标签：php

> **可能重复：**
> [php - 我如何打印这个多维数组？](https://stackoverflow.com/questions/3717967/php-how-do-i-print-this-multidimensional-array)

我有一个以下格式的数组

```
数组 ( [0] => 数组 ( [product_id] => 33 [amount] => 1 ) [1] => 数组 ( [product_id] => 34 [amount] => 3 ) [2] => 数组 ( [ product_id] => 10 [数量] => 1))
```

我想从该数组中获取如下格式的输出

```
产品编号金额
33 1
34 3
10 1

```

谁能帮我解决这个问题。var_dump 的变量是。

```
大批
  0 =>
    大批
      'product_id' => 字符串'33'（长度=2）
      '数量' => 字符串'1'（长度=1）
  1 =>
    大批
      'product_id' => 字符串'34'（长度=2）
      '数量' => 字符串'3'（长度=1）
  2 =>
    大批
      'product_id' => 字符串'10'（长度=2）
      '数量' => 字符串'1'（长度=1）

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T10:23:17.370

我相信这是你的阵列

```
$array = Array ( 
        0 => Array ( "product_id" => 33 , "amount" => 1 ) ,
        1 => Array ( "product_id" => 34  , "amount" => 3 ) ,
        2 => Array ( "product_id" => 10  , "amount" => 1 ) ); 
```

使用`foreach`

```
echo "<pre>";
echo "Product ID\tAmount";
foreach ( $array as $var ) {
    echo "\n", $var['product_id'], "\t\t", $var['amount'];
} 
```

使用`array_map`

```
echo "<pre>" ;
echo "Product ID\tAmount";
array_map(function ($var) {
    echo "\n", $var['product_id'], "\t\t", $var['amount'];
}, $array); 
```

输出

```
Product ID  Amount
33          1
34          3
10          1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T10:26:59.737

```
 <table>
        <tr>
            <th>Product Id</th>
            <th>Ammount</th>
        </tr>

        <?php
        foreach ($yourArray as $subAray)
        {
            ?>
            <tr>
                <td><?php echo $subAray['product_id']; ?></td>
                <td><?php echo $subAray['amount']; ?></td>
            </tr>
            <?php
        }
        ?>
    </table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T10:22:51.473

尝试这个..

```
foreach($arr as $a)
{
    echo $a['product_id'];
    echo $a['amount'];
} 
```

根据您的要求格式化。

# unit-testing - robolectric，“receiveResult”没有意图匹配

> ID：12651865
> 
> 赞同：1
> 
> 时间：2012-09-29T10:18:26.480
> 
> 标签：unit-testing, android-intent, robolectric

查看我的代码：

```
doSomeActionWillStartNewIntentToSelectImage();

// check started intent
Intent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI);
Assert.assertThat(activity, new StartedMatcher(intent));

// simulate the returning result
shadowOf(activity).receiveResult(
        new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI),
        Activity.RESULT_OK,
        new Intent().setData(activity.drawableId2Uri(R.drawable.icon_ok))); 
```

但是会报错：

```
java.lang.RuntimeException: No intent matches 
    Intent{action=android.intent.action.PICK, data=content://media/internal/images/media} among 
   [Intent{action=android.intent.action.PICK, data=content://media/internal/images/media}]
at com.xtremelabs.robolectric.shadows.ShadowActivity.receiveResult(ShadowActivity.java:381) 
```

奇怪的`Intent{action=android.intent.action.PICK, data=content://media/internal/images/media}`是和后面的一模一样。

哪里出了问题以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T07:05:41.077

传入的意图`receiveResult`与活动启动的意图不同。

正确的测试代码应该是：

```
doSomeActionWillStartNewIntentToSelectImage();

// check started intent
Intent intent = shadowOf(activity).getNextStartedActivity();
assertThat(intent.getAction()).isEqualTo(Intent.ACTION_PICK);
assertThat(intent.getData()).isEqualTo(MediaStore.Images.Media.INTERNAL_CONTENT_URI);

// simulate the returning result
shadowOf(activity).receiveResult(
        intent,
        Activity.RESULT_OK,
        new Intent().setData(activity.drawableId2Uri(R.drawable.icon_ok))); 
```

# mysql - MySQL 从表中删除所有行并将 ID 重置为零

> ID：12651867
> 
> 赞同：202
> 
> 时间：2012-09-29T10:18:44.597
> 
> 标签：mysql

我需要从表中删除所有行，但是当我添加新行时，我希望具有自动增量的主键 ID 从 0 分别从 1 重新开始。

* * *

## 回答 #1

> 赞同：338
> 
> 时间：2012-09-29T10:20:18.193

不要删除，使用截断：

```
Truncate table XXX 
```

> 表处理程序不记得上次使用的 AUTO_INCREMENT 值，而是从头开始计数。即使对于通常不重用序列值的 MyISAM 和 InnoDB 也是如此。

[来源](http://dev.mysql.com/doc/refman/5.7/en/truncate-table.html)。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-09-29T10:47:05.343

如果您不能使用`TRUNCATE`（例如由于外键约束），您可以在删除所有行后使用 alter table 重新启动 auto_increment：

```
ALTER TABLE mytable AUTO_INCREMENT = 1 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-10-13T18:31:09.963

如果表有外键，那么我总是使用以下代码：

```
SET FOREIGN_KEY_CHECKS = 0; -- disable a foreign keys check
SET AUTOCOMMIT = 0; -- disable autocommit
START TRANSACTION; -- begin transaction

/*
DELETE FROM table_name;
ALTER TABLE table_name AUTO_INCREMENT = 1;
-- or
TRUNCATE table_name;
-- or
DROP TABLE table_name;
CREATE TABLE table_name ( ... );
*/

SET FOREIGN_KEY_CHECKS = 1; -- enable a foreign keys check
COMMIT;  -- make a commit
SET AUTOCOMMIT = 1 ; 
```

但不同之处在于执行时间。看上面索林的回答。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-02-17T12:13:40.560

一个有趣的事实。

我确信`TRUNCATE`总是会表现得更好，但在我的情况下，对于一个包含大约 30 个带有外键的表且仅填充几行的数据库，`TRUNCATE`所有表都需要大约 12 秒，`DELETE`而行。设置自动增量总共增加了大约一秒钟，但仍然要好得多。

所以我建议两者都试一下，看看哪个更适合你的情况。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-20T19:46:11.167

如果你想`truncate`使用这个：

```
SET FOREIGN_KEY_CHECKS = 0; 
TRUNCATE table $table_name; 
SET FOREIGN_KEY_CHECKS = 1; 
```

# python - 如何在 Celery 中获取所有任务和周期性任务

> ID：12651872
> 
> 赞同：5
> 
> 时间：2012-09-29T10:19:00.927
> 
> 标签：python, django, celery

> **可能重复：**
> [如何在 Python 中找到给定类的所有子类？](https://stackoverflow.com/questions/3862310/how-can-i-find-all-subclasses-of-a-given-class-in-python)

在我的 Django 项目中，我有一些 Celery 的子类`Task`和`PeriodicTask`：

```
class CustomTask(Task):
    # stuff

class CustomPeriodicTask(PeriodicTask):
    # stuff 
```

我需要所有任务类来添加一些自定义日志配置。所以我以为我可以我们`__subclasses__`，但这不起作用：

```
>>> Task.__subclasses__()
[<unbound PeriodicTask>, <class handle_register of <Celery default:0xa1cc3cc>>] 
```

是否有可能以动态方式获取我的所有子类`Task`和`PeriodicTask`子类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T10:55:37.953

Celery 维护所有任务的注册表。这是工作人员在收到任务消息时如何按名称查找任务的方式：

```
from celery import current_app
all_task_names = current_app.tasks.keys()
all_tasks = current_app.tasks.values()
foo_task = current_app.tasks['tasks.foo']

all_task_classes = [type(task) for task in current_app.tasks.itervalues()] 
```

仅在导入包含任务的模块时才会填充任务注册表。如果你还没有导入所有模块，你可以像 celery worker 一样导入所有配置的任务模块源：

```
current_app.loader.import_default_modules() 
```

注意：`import_default_modules`在 Celery 2.5 之前不存在，那时你必须这样做：

```
from celery.loaders import current_loader
current_loader().init_worker() 
```

注意 2：您确定要像这样编辑所有任务类吗？Celery 提供了多种配置任务类的方法，例如：

```
CELERY_ANNOTATIONS = {
     '*': {
         'loglevel': logging.DEBUG,
         'logger': logging.getLogger('foo'),
     },
} 
```

将设置所有任务的 'loglevel' 和 'logger' 属性。或者，您可以使用通用基类：

```
class MyTask(Task):
    abstract = True   # means this base task won't be registered
    loglevel = logging.DEBUG
    logger = logging.getLogger('foo'), 
```

# mysql - MYSQL CASE WHEN UPDATE 查询

> ID：12651873
> 
> 赞同：4
> 
> 时间：2012-09-29T10:19:04.890
> 
> 标签：mysql, sql

这是我的桌子。

![](../Images/3e06806adad0cdb99aef1c74ee0ed65f.png)

我需要做的是创建一个 CASE WHEN UPDATE Query 来更新

*   CurrentCredit +1 如果 1-15

*   CurrentCredit +2 如果 16-30

*   CurrentCredit x.10 如果 >=31 则向上取整

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T10:27:48.730

看看例子

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2e3d8/1/0)

有点像

```
UPDATE MyTable
SET CurrentCredit = 
CASE 
  WHEN CurrentCredit BETWEEN 1 AND 15
    THEN CurrentCredit + 1
  WHEN CurrentCredit BETWEEN 16 AND 30
    THEN CurrentCredit +2
  WHEN CurrentCredit >= 31
    THEN CurrentCredit * 10
  ELSE CurrentCredit
END 
```

另外，请记住，如果 CurrentCredit 是 a `FLOAT`，而不是 a`INT`您可能想尝试类似

```
UPDATE MyTable
SET CurrentCredit = 
CASE 
  WHEN CurrentCredit >= 1 AND CurrentCredit < 16
    THEN CurrentCredit + 1
  WHEN CurrentCredit >= 16 AND CurrentCredit < 31
    THEN CurrentCredit +2
  WHEN CurrentCredit >= 31
    THEN CurrentCredit * 10
  ELSE CurrentCredit
END; 
```

**编辑**

对于更正的请求 (>= 31 CurrentCredit + CEILING(CurrentCredit * 0.1))，请查看使用[CEILING](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_ceiling)

```
UPDATE MyTable
SET CurrentCredit = 
CASE 
  WHEN CurrentCredit BETWEEN 1 AND 15
    THEN CurrentCredit + 1
  WHEN CurrentCredit BETWEEN 16 AND 30
    THEN CurrentCredit +2
  WHEN CurrentCredit >= 31
    THEN CurrentCredit + CEILING(CurrentCredit * 0.1)
  ELSE CurrentCredit
END; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/56bdd/1/0)

# c# - System.net，单声道和.Net之间的httpPOST兼容性

> ID：12651876
> 
> 赞同：2
> 
> 时间：2012-09-29T10:19:55.213
> 
> 标签：c#, mono, http-post, compatibility, system.web

我正在尝试编写一个小程序来从需要登录的报纸网站下载 PDF。我正在使用在 stackoverflow 上找到的这个库：http: [//pastebin.com/RPNU39vF](http://pastebin.com/RPNU39vF)

我用这段代码调用它：

```
 private void backupFunzionante()
    {
        String postData = "log=MYEMAIL@gmail.com&pwd=MYPASSWORD";
        myWeb.RequestManager manager = new myWeb.RequestManager();

        String uri = "http://shop.ilfattoquotidiano.it/login/?action=login";
        HttpWebResponse response;

        response = manager.SendPOSTRequest(uri, postData, null, null, true);
        String strResp = response.StatusCode.ToString();
        label1.Text += "###";

        Uri pdfUrl = new Uri("http://pdf.ilfattoquotidiano.it/openpdf/?n=20120927");
        response = manager.SendPOSTRequest("http://pdf.ilfattoquotidiano.it/openpdf/?n=20120927", "", null, null, true);
        long size = response.ContentLength;

        Stream downloadStream = response.GetResponseStream();

        using (Stream file = File.OpenWrite("C:\\f.pdf"))
        {
            CopyStream(downloadStream, file);
        }
    }

    public static void CopyStream(Stream input, Stream output)
    {
        byte[] buffer = new byte[8 * 1024];
        int len;
        while ((len = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, len);
        }
    } 
```

如果在 .NET 下运行，此代码可以完美运行，而如果在 mono 下调用，它将返回一个空文件。

我认为问题应该出在http post请求中，因为 **长尺寸= response.ContentLength;** 为零。

为什么两个可执行文件之间存在这种差异？我可以做些什么来拥有一个完全可移植的应用程序（我也想在 linux 下使用它，因为它是我的主要操作系统）

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:14:03.583

适用于 Windows 的 Mono 有可能不存在于适用于 Linux/Macintosh 的 Mono 中的错误，因为适用于 Windows 的 Mono 从来都不是优先事项（因为该操作系统已经有 Micosoft 的 .NET）。

我建议您首先使用 Mono for Linux 进行测试。它可能工作正常。（为此，显然您需要将“C:\”替换为原生 unix 路径。）

# javascript - javascript函数不起作用

> ID：12651877
> 
> 赞同：0
> 
> 时间：2012-09-29T10:20:06.963
> 
> 标签：javascript, jquery, html

嗨，我有一个叫 calc 的可怜虫。在这里面我有几个函数，包括init。我有三个使用 jquery 附加到 div 的按钮。因此，当用户单击任何按钮时，它将触发输入函数，并且在基于这些条件的一些 if else 语句之后，它将调用其余三个函数之一，即`calculate`,`reset`和`emailtofriend`。**问题是**它不调用除输入函数之外的其他函数。为什么它会有这样的行为以及如何让它发挥作用？

这是我的代码

js

```
var jQuery, container, output,
    calc = {
        init: function () {
            container = $('.calculate');

            $(document).on('click','.userButtons',calc.input);

            calc.widgetDesign(container);
        },
        widgetDesign: function (container) { 
            var widgetContainer = $('<div />').addClass('calculateContainer'),
                form             = $('<div />'),
                buttons         = $('<div />');

            buttons.append('<button rel="reset" class="userButtons">Reset</button><button rel="emailtofriend" class="userButtons">Email to a friend</button>');

            form.append('<div class="label">Weight (kg):</div>');
            form.append('<input type="text" name="weight" class="weight inputs" />');
            form.append('<div class="label">Height (cm):</div>');
            form.append('<input type="text" name="height" class="height inputs" />');
            form.append('<div><button rel="calculate" class="userButtons calcButton">Calculate</button></div>');

            widgetContainer.append(form);

            widgetContainer.append(buttons);

            widgetContainer.appendTo(container);
        },
        input: function () {
            var button = $(this).attr('rel');

            if ( button == 'calculate' ) {
                console.log(button);
                calc.calculate;
            } else if (button == 'reset') {
                console.log(button);
                calc.reset;
            } else if (button == 'emailtofriend') {
                console.log(button);
                calc.emailtofriend;
            }
        },
        calculate: function () {
            console.log('hello');
        },
        reset: function () {
            alert('reset');
        },
        emailtofriend: function () {
            alert('emailtofriend');
        }
    };
    calc.init();​ 
```

这是**[jsfiddle](http://jsfiddle.net/TvuXL/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:25:11.467

您将需要调用这些函数，而不仅仅是选择它们:-)

```
 if ( button == 'calculate' ) {
            console.log(button);
            calc.calculate();
        //                ^^
        } else if (button == 'reset') {
            console.log(button);
            calc.reset();
        //            ^^
        } else if (button == 'emailtofriend') {
            console.log(button);
            calc.emailtofriend();
        //                    ^^
        } 
```

顺便说一句：通过使用括号表示法作为成员运算符，这可以写得更短：

```
if (button in calc) {
     console.log(button);
     calc[button]();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:25:16.757

您应该将括号放在函数名称的末尾`()`，如下所示：

```
 if ( button == 'calculate' ) {
            console.log(button);
            calc.calculate();
        } else if (button == 'reset') {
            console.log(button);
            calc.reset();
        } else if (button == 'emailtofriend') {
            console.log(button);
            calc.emailtofriend();
        } 
```

# unix - 哪个文件在unix中包含星号

> ID：12651880
> 
> 赞同：1
> 
> 时间：2012-09-29T10:20:38.600
> 
> 标签：unix

全部

在这里，我用星号发布我对文件的疑问，首先我创建一个文件

```
touch test* 
```

如果我检查`ls -lrt`它会显示`test*`当前的文件。然后我使用删除了该文件`rm *`。然后我创建了两个`test1*` `test2*`使用相同触摸命令的文件。如果我检查`ls -lrt`。它显示两个文件，即`test1*`和`test2*`。我再次`test*`使用触摸命令创建，现在我检查`ls -lrt`。这次它不会显示文件`test*`。为什么该`test*`文件未列出？

感谢和问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T10:24:32.760

因为 * 被您的 shell 用作通用字符，所以当您编写

```
touch test* 
```

您的外壳会将其转换为

```
touch test1* test2* 
```

如果要创建'test*'，请使用简单的引号，它会抑制全局功能。

```
touch 'test*' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:44:12.940

通常使用 touch 命令创建一个空文件。如果文件已经存在，它只会改变访问时间。

第一次使用 touch test* 时，没有测试文件，因此它将创建文件名为 test*

第二次使用 touch test* 时，为当前目录计时 test1* 和 test2* 文件，因此它将扩展为 test1* 和 test2* 。

在这种情况下，它只会更改两个文件的访问时间。

如果您想再创建一个时间 test* 文件，则意味着您可以使用双引号。

# android - GL 壁纸示例仅在模拟器中显示绿屏，但它在设备中工作

> ID：12651887
> 
> 赞同：12
> 
> 时间：2012-09-29T10:21:54.103
> 
> 标签：android, opengl-es, live-wallpaper

运行 OpenGL 应用程序是否需要任何特殊的模拟器设置？

我已经将“GPU 仿真”属性设置为“是”。

我正在尝试使用从此[链接](https://github.com/markfguerra/GLWallpaperExample)中找到的示例源运行 Android 示例动态壁纸，所需的输出是一个旋转三角形。

经过一番努力，我运行了该应用程序，但它没有在模拟器中绘制任何内容，但是当我在设备中测试时它可以工作，但是在模拟器中它仍然只显示一个绿屏，我在[这里的 Google 群组](https://groups.google.com/forum/#!topic/glwallpaperservice/L626ZHplWpk)中找到了关于它的讨论。我尝试按照其中的说明设置视口。但它仍然没有显示任何结果，在表面改变我已经添加了这一行

> gl.glViewport(0, 0, 宽度, 高度);

这是设置视口的正确方法吗？

这是我的渲染类，

```
 public class MyRenderer implements GLWallpaperService.Renderer {
    GLTriangle mTriangle;

    public void onDrawFrame(GL10 gl) {

        gl.glClearColor(0.2f, 0.4f, 0.2f, 1f);
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        gl.glMatrixMode(GL10.GL_MODELVIEW);
        autoRotate(gl);
        gl.glColor4f(.2f, 0f, .5f, 1f);

        mTriangle.draw(gl);
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) {

        gl.glViewport(0, 0, width, height);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 60f, (float)width/(float)height, 1f, 100f);

        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        gl.glTranslatef(0, 0, -5);
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        mTriangle = new GLTriangle();

        gl.glClearDepthf(1f);
        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glDepthFunc(GL10.GL_LEQUAL);
    }

    /**
     * Called when the engine is destroyed. Do any necessary clean up because
     * at this point your renderer instance is now done for.
     */
    public void release() {

    }

    private void autoRotate(GL10 gl) {
        gl.glRotatef(1, 0, 1, 0);
        gl.glRotatef(0.5f, 1, 0, 0);
    }
} 
```

Herse 是 GLTriangle 类

```
import java.nio.FloatBuffer;
import java.nio.ShortBuffer;

import javax.microedition.khronos.opengles.GL10;

public class GLTriangle {
    private FloatBuffer _vertexBuffer;
    private final int _nrOfVertices = 3;

    private ShortBuffer _indexBuffer;

    public GLTriangle() {
        init();
    }

    private void init() {
        // We use ByteBuffer.allocateDirect() to get memory outside of
        // the normal, garbage collected heap. I think this is done
        // because the buffer is subject to native I/O.
        // See http://download.oracle.com/javase/1.4.2/docs/api/java/nio/ByteBuffer.html#direct

        // 3 is the number of coordinates to each vertex.
        _vertexBuffer = BufferFactory.createFloatBuffer(_nrOfVertices * 3);

        _indexBuffer = BufferFactory.createShortBuffer(_nrOfVertices);

        // Coordinates for the vertexes of the triangle.
        float[] coords = {
                -1f, -1f,  0f,  // (x1, y1, z1)
                 1f, -1f,  0f,  // (x2, y2, z2)
                 0f,  1f,  0f   // (x3, y3, z3)
        };

        short[] _indicesArray = {0, 1, 2};

        _vertexBuffer.put(coords);
        _indexBuffer.put(_indicesArray);

        _vertexBuffer.position(0);
        _indexBuffer.position(0);
    }

    public void draw(GL10 gl) {
        // 3 coordinates in each vertex
        // 0 is the space between each vertex. They are densely packed
        //   in the array, so the value is 0
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, getVertexBuffer());

        // Draw the primitives, in this case, triangles.
        gl.glDrawElements(GL10.GL_TRIANGLES, _nrOfVertices, GL10.GL_UNSIGNED_SHORT, _indexBuffer);
    }

    private FloatBuffer getVertexBuffer() {
        return _vertexBuffer;
    }
} 
```

这里出了什么问题？是否有更好的 Open GL 动态壁纸示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:03:05.957

最后我找到了它..

我需要做的只是添加

```
gl.glEnableClientState(GL10.GL_VERTEX_ARRAY); 
```

到**onSurfaceCreated**方法以及代码行

```
gl.glViewport(0, 0, width, height); 
```

在**MyRenderer**类的**onSurfaceChanged**方法中

 **[我在堆栈本身](https://stackoverflow.com/questions/7906998/android-glwallpaperservice-causing-green-screen?rq=1) 中发现了一个类似的问题*[但是对我有用的解决方案未标记为正确:(]***

# jquery - jquery如何知道每个循环何时完成

> ID：12651890
> 
> 赞同：0
> 
> 时间：2012-09-29T10:22:21.173
> 
> 标签：jquery

我正在使用开放图形 API 并尝试通过结果回调运行每个循环。

我需要知道循环何时完成，以便我可以运行“成功”功能。

我认为这就像将结果长度与索引进行比较一样简单，但我没有运气。

做这个的最好方式是什么？

```
function authSuccess() {
    FB.api('/me/friends', function (result) {
        if (result.data) {
         var l = result.data.length;
         $.each(result.data, function (index, friend) {
                if(l > index ){
                      //do stuff
                }else{
                    //go to success
                     }
            });
        } else { }
    });
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:25:25.010

这应该这样做：

```
$.each(result.data, function (index, friend) {
//do your work
});
//go to success 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:29:18.283

```
function authSuccess() {
    FB.api('/me/friends', function (result) {
        if (result.data) {
         var len=0;
         $.each(result.data, function (index, friend) {
                if(!result.data[len+1] ){
//go to success                    

                }else{
                    //do stuff
                     }
len++;
            });
        } else { }
    });
} 
```

# neo4j - 嵌入式 Neo4j 无法正确读取属性

> ID：12651903
> 
> 赞同：1
> 
> 时间：2012-09-29T10:23:54.940
> 
> 标签：neo4j

我已经在我的 Scala + Play 框架项目中实现了嵌入 Neo4j 数据库。当我从数据库中读取节点时，我没有正确获取它们的属性。每次刷新页面时，我都会添加 2 个节点 - 具有唯一 ID。当已经有具有此类 ID 的节点时，我不会添加它们。但有时在阅读时，节点没有它们的属性，我得到空值。

调试方法返回如下内容：

```
[debug] application - Node[0] : ?
[debug] application - Node[3] : ?
[debug] application - Node[4] : ?
[debug] application - Node[5] : ?
[debug] application - Node[6] : ?
[debug] application - Node[7] : 786432765
[debug] application - Node[8] : 567987654 
```

下一次：

```
[debug] application - Node[0] : ?
[debug] application - Node[3] : ?
[debug] application - Node[4] : ?
[debug] application - Node[5] : 786432765
[debug] application - Node[6] : 567987654
[debug] application - Node[7] : ?
[debug] application - Node[8] : ? 
```

这是一段代码：

```
 def addNode(node: MyNode) {
      var isUnique = true
      val foundUser : Node = nodeIndex.get("phone", node.phone).getSingle()
      if(foundUser != null) {
          Logger.info("FOUND NODE with phone " + node.phone + ": " + foundUser)
          isUnique = false
      } else {
          Logger.info("THERE IS NO NODE WITH PHONE " + node.phone)
      }
    if (isUnique) {
      Logger.info("Node: " + node.phone + " is being added")
      val tx : Transaction = graph.beginTx
      try {
          val newnode: Node = graph.createNode()
          newnode.setProperty("phone", node.phone)
          nodeIndex.add(newnode, "phone", node.phone)
      } catch {
        case e : Exception => {
          tx.failure()
          Logger.error(e.getMessage())
        }
      }
      tx.success()
    } else {
      Logger.info("Node: " + node.phone + " ALREADY EXISTS")
    }
  }

def debug() {

    Logger.debug("Node of " + graph);
    val it = GlobalGraphOperations.at(graph).getAllNodes().iterator()
    while(it.hasNext()) {
      val node : Node = it.next()
      if(node.hasProperty("phone"))
          Logger.debug(node + " : " + node.getProperty("phone"))
      else
          Logger.debug(node + " : ?")

    }
  } 
```

# java - 如果设置为“text/html”，则 jtextpane 中不能有组件

> ID：12651906
> 
> 赞同：2
> 
> 时间：2012-09-29T10:24:24.293
> 
> 标签：java, html, swing, jtextpane, jcomponent

经过大量的努力，我的点击工作正常。可悲的是，当我更改我的格式`JTextPane`并将`"text/html"`文本添加到 JTextPane 时，我的按钮消失了。我几乎完成了这个苛刻的情妇。有人可以帮忙吗？

代码如下...

```
import java.awt.*;
import javax.swing.*;
import java.awt.Color;
import javax.swing.JTextPane;
import javax.swing.JButton;
import java.applet.*;
import java.awt.event.MouseAdapter; 
import java.awt.event.MouseEvent; 

public class jlabeltest extends Applet {

    public void init() {

        jlabeltest textPaneExample = new jlabeltest();
        textPaneExample.setSize(550, 300);
        textPaneExample.setVisible(true);
    }

    public jlabeltest() {

        JTextPane textPane = new JTextPane();
        textPane.setContentType("text/html");
        InlineB button = new InlineB("Button");     
        textPane.setText("<p color='#FF0000'>Cool!</p>");
        button.setAlignmentY(0.85f); 

        button.addMouseListener(new MouseAdapter()  {   

        public void mouseReleased(MouseEvent e) {

        if (e.isPopupTrigger()) {   

            JOptionPane.showMessageDialog(null,"Hello!");
            // Right Click   
        }   

        if (SwingUtilities.isLeftMouseButton(e)) {

            JOptionPane.showMessageDialog(null,"Click!");
            // Left Click
        }
    }   
    });  
        textPane.insertComponent(button); 
        this.add(textPane); 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:43:52.767

添加组件时，此内容类型似乎存在一些问题（请参阅[此](https://stackoverflow.com/questions/12140026/how-to-wrap-text-around-components-in-a-jtextpane)帖子），但您可以尝试以下操作：

```
 JTextPane textPane = new JTextPane();
    JButton button = new JButton("Button");     
    button.setAlignmentY(0.85f);

    HTMLEditorKit kit = new HTMLEditorKit();
    HTMLDocument doc = new HTMLDocument();
    textPane.setEditorKit(kit);
    textPane.setDocument(doc);

    try {
        kit.insertHTML(doc, doc.getLength(), "<p color='#FF0000'>Cool!", 0, 0, HTML.Tag.P);
        kit.insertHTML(doc, doc.getLength(), "<p></p>", 0, 0, null);
    } catch (BadLocationException ex) {
    } catch (IOException ex) {
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T13:04:13.957

问题是当您向 中添加文本`JEditorPane`，然后添加一个组件时，它会嵌入到 的 HTML 中`JEditorPane`：

这是一个例子：

```
import java.awt.Color;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class Test {

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        initComponents(frame);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {
        final JTextPane editorPane = new JTextPane();
        editorPane.setSelectedTextColor(Color.red);

        //set content as html
        editorPane.setContentType("text/html");
        editorPane.setText("<p color='#FF0000'>Cool!</p>");

        //added <u></u> to underlone button
        final InlineB label = new InlineB("<html><u>JLabel</u></html>");

        label.setAlignmentY(0.85f);

        label.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseReleased(MouseEvent e) {
                //added check for MouseEvent.BUTTON1 which is left click
                if (e.isPopupTrigger() || e.getButton() == MouseEvent.BUTTON1) {
                    JOptionPane.showMessageDialog(null, "Hello!");
                    String s = editorPane.getText();
                    System.out.println(s);
                }
            }
        });

        editorPane.insertComponent(label);
        frame.getContentPane().add(editorPane);
    }
}

class InlineB extends JButton {

    public InlineB(String caption) {
        super(caption);
        setBorder(null);//set border to nothing
    }
} 
```

当我们单击按钮时，它会执行：

```
//added check for MouseEvent.BUTTON1 which is left click
                if (e.isPopupTrigger() || e.getButton() == MouseEvent.BUTTON1) {
                    JOptionPane.showMessageDialog(null, "Hello!");
                    String s = editorPane.getText();
                    System.out.println(s);
                } 
```

println(s) 的结果是：

```
<html>
  <head>

  </head>
  <body>
    <p color="#FF0000">
      Cool!
      <p $ename="component">

    </p>
  </body>
</html> 
```

正如您所看到的，该组件嵌入在 HTML 中，任何进一步的调用都`setText()`将删除它。

唯一其他可行的解决方案（除了 Rempelos +1 给他）也是：

像这样`JEditorPane`调用后将组件重新添加到：`setText()`

```
 @Override
        public void mouseReleased(MouseEvent e) {
            //added check for MouseEvent.BUTTON1 which is left click
            if (e.isPopupTrigger() || e.getButton() == MouseEvent.BUTTON1) {

                JOptionPane.showMessageDialog(null, "Hello!");
                String s = editorPane.getText();
                System.out.println(s);

                editorPane.setText("<html><u>Hello</u></html>");
                //re add after call to setText
                editorPane.insertComponent(label);
            }
        } 
```

虽然更好的方法可能是扩展`JEditorPane`类并使该`setText()`方法自动添加其组件/按钮

# python - 类方法构造函数的类型错误

> ID：12651913
> 
> 赞同：1
> 
> 时间：2012-09-29T10:24:54.070
> 
> 标签：python, constructor, class-method

我正在使用`@classobj`. 我不仅在设置变量，还在新类中调用方法：

```
class Example:
    def __init__(self):
        pass

    @classmethod
    def constructor1(cls,x,y):
        self=cls
        self.__x = x
        self.__somemethod(self,y)

    ... 
```

我收到以下错误：

```
unbound method __somemethod() must be called with Example instance as 
first argument (got classobj instance instead) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T10:42:32.203

如果您希望您的类方法成为构造函数，您可能希望创建一个以`cls`. 我怀疑你正试图用你的`self = cls`行来做到这一点，但你实际上并没有创建一个新实例，因为你忽略了括号。还有一些其他问题，但我认为这是关键问题。这是一个固定的构造函数：

```
@classmethod
def constructor1(cls,x,y):
    self=cls()                # parentheses added, to make it a call
    self.__x = x
    self.__somemethod(y)      # self is not needed as a parameter here
    return self               # return the new instance 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T10:30:01.473

看起来`__somemethod`不是类方法，而是“普通”方法。普通方法期望一个实际的实例作为第一个参数，而不是一个类。因为`constructor1`被装饰为`@classmethod`,`cls`是类本身 - 你传递给`__somemethod`. 那是行不通的。

你应该重新考虑你的设计方法。

附录：

也许你的意思是这样的？

```
@classmethod
def constructor1(cls, x, y):
    newinst = cls()
    newinst.__x = x
    cls.__somemethod(newinst, y) 
```

不过，最好按如下方式编写：

```
@classmethod
def constructor1(cls, x, y):
    newinst = cls()
    newinst.__x = x
    newinst.__somemethod(y) 
```

实际上，我喜欢较近的方法——对我来说似乎是一种过于复杂的代名词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:41:00.430

这可能是我认为你正在努力实现的模板......

```
import random

class Something(object):
    def __init__(self, value, **kwargs):
        self.value = value
        for k, v in kwargs.iteritems():
            setattr(self, k, v)
    @classmethod
    def from_iterable(cls, iterable):
        return cls(sum(iterable), description='came from from_iterable')
    @classmethod
    def make_random(cls):
        return cls(random.randint(1,1000), is_random=True)

a = Something.from_iterable([1, 2, 3])
b = Something.make_random()
c = Something(56)

for obj in (a, b, c):
    print type(obj), obj.value

<class '__main__.Something'> 6
<class '__main__.Something'> 308
<class '__main__.Something'> 56 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T10:41:20.807

感谢 ch3ka 的回答和 Tim Pietzcker 的评论，我发现了我的错误：我使用了来自[http://jjinux.blogspot.co.at/2008/11/python-class-methods-make-good.html](http://jjinux.blogspot.co.at/2008/11/python-class-methods-make-good.html)的工厂方法并忘记了`()`在行`self=cls()`。现在它工作得很好：

```
class Example:
    def __init__(self):
        pass

    @classmethod
    def constructor1(cls,x,y):
        self=cls()
        self.__x = x
        self.__somemethod(self,y)

    ... 
```

# java - 将我的文件放在 netbeans 项目中的哪个位置

> ID：12651915
> 
> 赞同：0
> 
> 时间：2012-09-29T10:25:00.063
> 
> 标签：java, netbeans-7

我正在开发一个使用 JSF 的 Web 应用程序`netbeans`。在其中一个托管 bean 中，我必须读取一个 XML 文件，但我不确定将这个文件放在哪里。我也尝试将文件放入`root`项目和`src`文件夹中，但我仍然收到 FileNotFoundException。请帮忙。

以下是异常的堆栈跟踪

```
Sep 29, 2012 3:59:19 PM me.uni.sushilkumar.turboblogger.PopulatePosts init
SEVERE: null
java.io.FileNotFoundException: posts.xml (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:138)
at me.uni.sushilkumar.turboblogger.PopulatePosts.init(PopulatePosts.java:40)
at me.uni.sushilkumar.turboblogger.PopulatePosts.<init>(PopulatePosts.java:34)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at java.lang.Class.newInstance0(Class.java:372)
at java.lang.Class.newInstance(Class.java:325)
at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
at org.apache.el.parser.AstValue.getValue(AstValue.java:147)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at com.sun.faces.facelets.component.UIRepeat.getValue(UIRepeat.java:273)
at com.sun.faces.facelets.component.UIRepeat.getDataModel(UIRepeat.java:249)
at com.sun.faces.facelets.component.UIRepeat.setIndex(UIRepeat.java:443)
at com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:482)
at com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:974)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:401)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

Sep 29, 2012 3:59:19 PM javax.faces.component.UIViewRoot$ViewMap put
WARNING: Setting non-serializable attribute value into ViewMap: (key: posts, value     class: me.uni.sushilkumar.turboblogger.PopulatePosts) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:38:22.027

如果是静态文件，包含在部署的war文件中，放在src目录下即可。Netbeans 会将其与 .class 文件一起复制到目标位置。使用加载文件

```
SomeClassOfTheWebApp.class.getResourceAsStream("/theXmlFile.xml"); 
```

webapp 的类加载器将为您加载它。

# javascript - js bb代码重复动作错误

> ID：12651925
> 
> 赞同：0
> 
> 时间：2012-09-29T10:26:35.947
> 
> 标签：javascript, bbcode

刚刚为 textarea 制作了我自己的 bbcodes 插件，但我无法纠正错误..

如果页面使用 2 个文本区域，则在第一个操作中会复制两次。
如果页面使用 1 个文本区域，一切正常。

如何解决？

代码：

```
/*
 * plugin: bbcodes based on jquery.bbcode.js
 * version: 0.2
 *
 * author: atomos
 * site: http://light-engine.ru
 */

(function($){
    $.fn.bbcode = function(options){
        var options = $.extend({
            tag_bold: true,
            tag_italic: true,
            tag_right: true,
            tag_center: true,
            tag_left: true,
            tag_link: true,
            tag_image: true,
            image_url: 'bbimage/'
        }, options||{});

        var taid = $(this).attr('name');
        var text = '<div class="btn-group">';

        if(options.tag_bold)
        {
            text = text + '<a class="btn" title="Жирный" href="#" id="b"><i class="icon-bold"></i></a>';
        }

        if(options.tag_italic)
        {
            text = text + '<a class="btn" title="Курсив" href="#" id="i"><i class="icon-italic"></i></a>';
        }

        text = text + '</div><div class="btn-group">';

        if(options.tag_right)
        {
            text = text + '<a class="btn" title="Направо" href="#" id="right"><i class="icon-align-right"></i></a>';
        }

        if(options.tag_center)
        {
            text = text + '<a class="btn" title="Центр" href="#" id="center"><i class="icon-align-center"></i></a>';
        }

        if(options.tag_left)
        {
            text = text + '<a class="btn" title="Налево" href="#" id="left"><i class="icon-align-left"></i></a>';
        }

        text = text + '</div><div class="btn-group">';

        if(options.tag_link)
        {
            text = text + '<a class="btn" title="Ссылка" href="#" id="url"><i class="icon-share-alt"></i></a>';
        }

        if(options.tag_image)
        {
            text = text + '<a class="btn" title="Изображение" href="#" id="img"><i class="icon-picture"></i></a>';
        }

        text = text + '</div>';

        $(this).wrap('<div id="bbcode-' + taid + '"></div>');
        $('#bbcode-' + taid).prepend('<div class="btn-toolbar">' + text + '</div>');

        $('.controls a[class=btn]').click(function()
        {
            var id = $(this).parent('.btn-group').parent('.btn-toolbar').parent().attr('id');
            var area = $('textarea[name=' + id.substring(7) + ']').get(0);

            var button_id = $(this).attr('id');
            var param = '';

            var start = '[' + button_id + ']';
            var end = '[/' + button_id + ']';

            if (button_id == 'img')
            {
                param = prompt('Введите адрес картинки:', 'http://');

                if (param && param != 'http://') start += param;
                else return false;
            }
            else if (button_id == 'url')
            {
                param = prompt('Введите адрес ссылки:', 'http://');

                if (param && param != 'http://') start = '[url href=' + param + ']';
                else return false;
            }

            insert(start, end, area);
            return false;
        });
    }

    function insert(start, end, element)
    {
        if (document.selection)
        {
            element.focus();

            sel = document.selection.createRange();
            sel.text = start + sel.text + end;
        }
        else if (element.selectionStart || element.selectionStart == '0')
        {
            element.focus();

            var startPos = element.selectionStart;
            var endPos = element.selectionEnd;

            element.value = element.value.substring(0, startPos) + start + element.value.substring(startPos, endPos) + end + element.value.substring(endPos, element.value.length);
        }
        else
        {
            element.value += start + end;
        }
    }

})(jQuery); 
```

我有演示：[这里](http://jsfiddle.net/NU79Y/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:47:59.203

你的问题是这样的：

```
$(document).ready(function(){
    $('textarea').each(function() {
        $(this).bbcode();
    });
}); 
```

这意味着您的脚本将遍历页面上的每个文本区域并在它们上运行 bbcode() 函数。
由于某种原因，它在第一个 textarea 中的迭代次数与页面上的 textarea 一样多。
因此，如果您有 2 个区域，函数将在第一个区域执行 2 次，然后在第二个区域执行 1 次。
如果你有 3 个区域，函数将在第一次执行 3 次，在第二次执行 2 次，在最后一次执行 1 次。
等等...

我建议大量调整您的脚本，以便您可以转发特定文本区域的 ID 参数，当您在 bbcode 按钮的 osme 上执行 onclick 事件时，您希望操作该参数，例如：

```
<textarea class="input-xxlarge" id="area_1" rows="3"></textarea>

<a onclick="$('#area_1').bbcode();" class="btn" title="Жирный" href="#" id="b"><i class="icon-bold"></i></a> 
```

这只是您应该朝哪个方向前进的提示......并且还考虑不要使用jquery而不是在纯JS中执行它更清洁，最后您将了解您的代码的每一点。这样将来脚本的维护将变得快速而容易。

# android - Flashbuilder 移动 PHP 数据到 SQLite 同步

> ID：12651928
> 
> 赞同：0
> 
> 时间：2012-09-29T10:26:46.210
> 
> 标签：android, actionscript-3, flash, flash-builder

好的，我只是希望在这里请指点。

在移动应用程序中，我想使用 PHP 检索远程数据，将其本地存储在我的设备上，然后将其同步回远程服务器。

我的方法论；

应用程序打开检查互联网连接。如果可用，检查更新的数据，如果不可用，在必要时检索使用本地 sqlite 当任务完成时将更改上传到远程服务器。

就是这样

到目前为止，我可以检索远程数据创建一个本地 SQLite 数据库来镜像远程模式检查连接性

我正在苦苦挣扎的地方是获取 PHP 数据并将其传输到本地 sqlite，我使用 flashbuilder 向导创建了我的数据服务，并且可以在 service.lastresult 数组中看到数据，我只是不知道如何将这个数组传输到sqlite。

我目前正在疯狂地谷歌搜索任何有帮助的东西，所以任何建议/指针/批评都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:03:23.977

考虑你已经声明了你的 RemoteObject：

```
<s:RemoteObject id="remoteObject" result="remoteObject_resultHandler(event)" /> 
```

实现了结果处理程序

```
protected function remoteObject_resultHandler(event:ResultEvent):void {
    trace(event.result); // your response is here           
} 
```

现在，每次您的 RemoteObject 从服务器获得响应时，都会触发 remoteObject_resultHandler。

# php - 通过 php 脚本在 mysqldump 中出现意外的文件结束错误

> ID：12651930
> 
> 赞同：0
> 
> 时间：2012-09-29T10:27:06.927
> 
> 标签：php, mysql, linux, backup, mysqldump

我只是从 php 脚本中使用 mysqldump，但它给出了错误提示文件意外结束。请帮助，我被困住了。

```
 **Error:**

   sh: -c: line 1: syntax error: unexpected end of file
    X-Powered-By: PHP/5.2.17
    Content-type: text/html 
```

以下是**mybackupscript.php**：

```
$command = "mysqldump  -u myuser -pmypass mydb > mybkp/backup.sql ";

exec($command, $ret_arr, $ret_code); 
```

如果我使用：

```
$command = "mysqldump  > mybkp/backup.sql "; 
```

它工作成功。

如果我使用：

```
$command = "mysqldump --all -databases > mybkp/backup.sql "; 
```

发生错误说：**mysqldump：未知选项'-b'** 此外，它创建文件backup.sql 的内容： **警告：选项'--all' 已弃用，将在未来的版本中删除。请改用--create-options。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:49:25.413

以下命令在语法上不正确。

```
$command = "mysqldump --all -databases > mybkp/backup.sql "; 
```

应该[是](http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html#option_mysqldump_all-databases)

```
$command = "mysqldump -u myuser -p mypass --all-databases > mybkp/backup.sql "; 
```

编辑：

添加了`-u`and`-p`标志。确保您在之后发布您的 MySQL 用户名`-u`和 MySQL 密码`-p`

# cuda - cuda 共享内存和块执行调度

> ID：12651939
> 
> 赞同：1
> 
> 时间：2012-09-29T10:28:07.787
> 
> 标签：cuda, shared-memory, warp-scheduler

我想清除*CUDA 共享内存*的执行状态，并根据每个块使用的共享内存量进行 *块执行。*

## 状态

我的目标是 GTX480 nvidia 卡，它每块有 48KB**共享内存和 15 个流式多处理器。**因此，如果我声明一个包含 15 个块的内核，每个块使用 48KB 的共享内存，并且没有达到其他限制（寄存器、每个块的最大线程数等），每个块都运行到一个 SM（15 个）直到结束。在这种情况下，只需要在同一块的 warp 之间进行调度。

## 问题

所以，我的误解是：
我调用一个有 30 个块的内核，以便每个 SM 上驻留 2 个块。现在每个 SM 上的**调度程序**必须处理来自不同块的扭曲。但只有当一个块完成执行时，另一个块的扭曲才会在 SM 上执行，因为共享内存总量（每个 SM 48KB）使用。如果这没有发生并且不同块调度在同​​一个 SM 上执行的扭曲，结果可能是错误的，因为一个块可以读取从另一个块加载到共享内存中的值。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:04:52.867

你不需要担心这个。正如您所说的那样，如果由于使用的共享内存量而每个 SM 只适合一个块，那么任何时候都只会安排一个块。因此，不会因为过度使用共享内存而导致内存损坏。

* * *

顺便说一句，出于性能原因，通常每个 SM 至少运行两个块会更好，因为

*   在 __syncthreads() 期间，SM 可能会不必要地空闲，因为来自块的越来越少的扭曲可能仍然可以运行。
*   同一块的 warp 往往是紧密耦合的，所以有时所有的 warp 都在等待内存，而其他时候所有的 warp 都执行计算。有了更多的块，这可能会更好，从而整体上更好地利用资源。

当然，与每个 SM 运行多个块相比，每个块更多的共享内存提供更大的加速可能是有原因的。

# linux - 有没有通过 LDAP 命令行执行系统命令？

> ID：12651940
> 
> 赞同：0
> 
> 时间：2012-09-29T10:28:20.157
> 
> 标签：linux, bash, ldap

在linux系统中，我知道我们可以通过Mysql命令执行系统命令，比如使用！. 我想知道我们是否可以通过 LDAP 做类似的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:09:20.780

大多数 LDAP 服务器实现都提供命令行实用程序。

一些常见的命令行实用程序是：

ldapcompare — 执​​行 LDAP 比较操作 ldapdelete 执行 LDAP 删除操作 ldapmodify — 执行 LDAP 修改、添加、删除、修改 DN 操作 ldappasswordmodify — 执行 LDAP 密码修改 ldapsearch — 执行 LDAP 搜索操作

认为它们可能因 LDAP 服务器实现而异。

可以在以下位置找到对特定 LDAP 服务器实现的引用：http: [//opendj.forgerock.org/doc/admin-guide/index/admin-tools-ref.html](http://opendj.forgerock.org/doc/admin-guide/index/admin-tools-ref.html)

-吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:19:20.900

我认为这个问题并不完全正确。当您从 mysql 客户端运行 shell 命令时，您只需运行 shell 命令。这些命令与 mysql 无关。这只是从 mysql 客户端运行某些东西而不离开它的一种方便的方法。

LDAP 没有这样的客户端。您可以用来访问 LDAP 服务器的所有命令都是非交互式的：`ldapsearch`、`ldapadd`等`ldapmodify`。因此，您无法“逃脱”它们。

# jsf-2 - 使用显示/隐藏 JSF2 表单

> ID：12651942
> 
> 赞同：0
> 
> 时间：2012-09-29T10:28:41.023
> 
> 标签：jsf-2, primefaces

我需要在我的 JSF 2-PrimeFaces 应用程序中显示和隐藏组件，请在下面找到我的代码：

```
 <p:outputLabel for="online_offer" value="Online offer#{msg._question_mark}" styleClass="font-size-1em font-weight-bold input-panel-main" />                                                                                                                                  
  <p:panel>
     <h:panelGrid columns="1">
        <p:selectBooleanButton id="online_offer" value="#{QckPstBen.offer.isExpired}" onLabel="Yes" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" >  
         <f:ajax event="click" render="@form" />
        </p:selectBooleanButton>
      </h:panelGrid>                                                                
   </p:panel>
    <h:outputLabel value="&nbsp;" />
 <h:panelGroup rendered="#{QckPstBen.offer.isExpired}">
      <p:outputLabel for="website" value="Website/link to the offer#{msg._colon}" styleClass="font-size-1em font-weight-bold input-panel-main" />                                                                                                                                  
  <p:panel>
   <h:panelGrid columns="1">
          <p:inputText id="website" required="true" size="38" />
           <p:watermark for="website" value="www.discountbox.in" />
   </h:panelGrid>                                                                
  </p:panel>                                                                                                                                    
</h:panelGroup> 
```

但它不起作用，任何线索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:53:47.983

PrimeFaces 组件不支持`<f:ajax>`. 改为使用`<p:ajax>`。

```
<p:selectBooleanButton ...>
    <p:ajax update="@form" />
</p:selectBooleanButton> 
```

请注意，我省略了该`event`属性，这里默认为`click`已经。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:42:41.643

将渲染放置在子节点上`<h:panelGroup>`或在其周围放置某种容器，例如 p:panel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T21:26:55.400

这现在可能是 OBE 但......

在引用页面 bean 时，我不记得在 #{} 上下文中，使用小写的类名称和页面 bean 的方法/属性的约定（即不是 #{QckPstBen.offer.isExpired} 而是 #{qckPstBen.报价.isExpired}？

# codeigniter - Codeigniter 从库中隐藏错误。为什么？

> ID：12651943
> 
> 赞同：0
> 
> 时间：2012-09-29T10:28:42.740
> 
> 标签：codeigniter, exception, facebook-php-sdk

所以我有一个小问题，正如我[在这里概述的那样。](https://stackoverflow.com/questions/12646394/facebook-sdk-breaking-codeigniter-blank-page)

我提出了一个新问题，因为这更笼统，也许会对其他人有所帮助。

所以本质上，我将 Facebook SDK 作为一个库集成到 Codeigniter 中。

SDK 需要 Json 和 Curl。

在 base_facebook.php 文件中有以下代码：

```
 if (!function_exists('curl_init')) {
  throw new Exception('Facebook needs the CURL PHP extension.');
}
if (!function_exists('json_decode')) {
  throw new Exception('Facebook needs the JSON PHP extension.');
} 
```

如果这些功能不可用，我希望会触发一个错误来告诉我。然后我可以安装正确的软件包并继续。

实际发生的情况是，即使我将错误报告设置为 E_ALL，也会返回一个空白页。

这使得调试变得不可能，经过大量播放后我发现这是因为我的服务器上没有安装 CURL。

我的问题是为什么 codeigniter 显示空白页而不是基于库的异常？此外，即使库中存在异常，为什么页面的其余部分不会继续执行。从本质上讲，CI 似乎使异常的使用毫无价值。

有人可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:58:38.660

> 我的问题是为什么 codeigniter 显示空白页而不是基于库的异常？

很可能是因为[display_errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)设置为“关闭”。

虽然这被推荐用于生产环境（网站用户不应该看到内部错误消息——它可能会给他们提供他们不应该拥有的内部信息）——它在开发时不是很有帮助，你作为开发人员想知道出了什么问题。

因此，请检查 CI 是否为此设置了“调试”设置，或者它是否已在您的 PHP 配置中设置为关闭。

（也许 CI 或您的配置设置为将错误记录到文件中。也建议用于生产；在开发时，您必须留意这个文件。）

> 此外，即使库中存在异常，为什么页面的其余部分不会继续执行。

因为这就是异常*应该*如何工作的——如果它们在到达应用程序的“顶层”时没有被捕获，它们会导致**致命错误**，并且脚本在这些发生时会死掉。

熟悉`try { … } catch(…) { … }`处理脚本流中可能发生的异常的概念。

*（实际上，如果您正在使用高级 PHP 框架，您还不知道这一切，这有点令人惊讶……）*

# ios - 在 UITableView 中显示文档目录中的文件 - 最低 iOS5

> ID：12651945
> 
> 赞同：1
> 
> 时间：2012-09-29T10:28:54.043
> 
> 标签：ios, uitableview, directory, document

我正在尝试设置一个 UITableView 来显示文档目录中的数据。

我对代码有点迷茫，因为我尝试了很多来自谷歌和论坛等的例子。

我正在创建没有 Storyboard 的应用程序，所以它全部在代码中。

我已经显示了 UITableView，因此设置了代表和 DataView - 我只需要内容。

我有这段代码给你看，但它没有显示任何数据：

```
- (void)viewDidLoad
  {
    [super viewDidLoad];

    _firstViewWithOutNavBar = [[UIView alloc] init];
    _firstViewWithOutNavBar.frame = CGRectMake(self.view.frame.origin.x, 0, self.v  iew.frame.size.width, self.view.frame.size.height);
    _firstViewWithOutNavBar.backgroundColor = [UIColor whiteColor];
    [self.view addSubview:_firstViewWithOutNavBar];

    UITableView *tableView = [[UITableView alloc] init];
    tableView.frame = CGRectMake(self.view.frame.origin.x, 0,     self.view.frame.size.width, self.view.frame.size.height);
    tableView.delegate = self;
    tableView.dataSource = self;
    [_firstViewWithOutNavBar addSubview:tableView];
  }

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
  {
    //alloc and init view with custom init method that accepts NSString* argument
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:indexPath.row];
    NSString*pathToPass = [documentsDirectory stringByAppendingPathComponent:
                       [tableView cellForRowAtIndexPath:indexPath].textLabel.text]; //pass this.

    NSLog(@"%@", pathToPass);

//_nsarray = [[NSArray alloc] initWithContentsOfFile:pathToPass];

  }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
  {
      return [_nsarray count];
      NSLog(@"%@", _nsarray);
   }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath
   {
     static NSString *CellIdentifier = @"Cell";

     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
      if (cell == nil) {
          cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

      cell.textLabel.text = [NSString stringWithFormat:@"%@",[_nsarray  objectAtIndex:indexPath.row]];

      return cell;
        } 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:58:12.560

您是否将断点放在 numberOfRowsInSection 方法中以检查该方法是否已被调用。正如我在您的代码中看到的那样，您没有初始化 _nsarray 并且没有在该数组中添加任何对象。所以基本上你的数组包含 0 个对象，所以不会创建任何行。在您的 numberOfRowsInSection 方法中，您已将 nslog 放在 return 语句之后，这将永远不会执行，请将其放在 return 语句之前，以便您可以实际看到数组值。我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:43:40.673

在和`_nsarray`中用作表视图数据源的数组永远不会在您的代码中初始化。你应该做类似的事情`numberOfRowsInSection``cellForRowAtIndexPath`

```
NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
_nsarray = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:docPath error:NULL]; 
```

在`viewDidLoad`.

# java - 尝试更新 Eclipse 时出错

> ID：12651953
> 
> 赞同：2
> 
> 时间：2012-09-29T10:30:40.237
> 
> 标签：java, eclipse, updates

尝试更新 Eclipse 时出现错误！

这是错误日志期间发生内部错误：“安装下载 0”

> java.lang.IllegalArgumentException：比较方法违反了它的一般约定！在 java.util.ComparableTimSort.mergeHi(ComparableTimSort.java:835) 在 java.util.ComparableTimSort.mergeAt(ComparableTimSort.java:453) 在 java.util.ComparableTimSort.mergeForceCollapse(ComparableTimSort.java:392) 在 java.util。 ComparableTimSort.sort(ComparableTimSort.java:191) at java.util.ComparableTimSort.sort(ComparableTimSort.java:146) at java.util.Arrays.sort(Arrays.java:472) at org.eclipse.equinox.internal.p2 .artifact.repository.MirrorSelector.hasValidMirror(MirrorSelector.java:319) at org.eclipse.equinox.internal.p2.artifact.repository.simple.SimpleArtifactRepository.downloadArtifact(SimpleArtifactRepository.java:577) at org.eclipse.equinox.internal .p2.artifact.repository.simple.SimpleArtifactRepository。

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T11:35:28.463

这以前发生在我身上，现在我有 Eclipse Juno Release，我没有遇到这样的问题。

**可能的解决方法**：
出现此错误是因为 Eclipse 中的一个小错误与 JDK >= 1.7 一起使用
要解决它，您可以将 JDK 1.7 替换为 JDK 1.6（当然更改环境变量、PATH 等）
（或）
退出/关闭任何活动的 Eclipse IDE 窗口、进程...
然后打开 Eclipse 安装文件夹并检查“eclipse.ini”文件。
您可能会看到在启动期间启动 Eclipse IDE 所需的一些配置条目
现在将（系统属性）条目复制粘贴到“eclipse.ini”文件中的“-vmargs”下方：

```
-Djava.util.Arrays.useLegacyMergeSort=true 
```

保存！
现在打开 Eclipse 并执行更新，它应该正常完成。
然后您可以从“eclipse.ini”配置文件中删除该行。

我希望即使使用 JDK 1.7，您也不会在 Eclipse Juno Release 中遇到任何此类错误。

问题的可能根本原因：JDK 1.7 中的**TimSort**算法

参考：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=317785](https://bugs.eclipse.org/bugs/show_bug.cgi?id=317785)

# php - 如何通过 simplexml 类和 GD 不杀死服务器并刷新 2000 多个图像？

> ID：12651954
> 
> 赞同：2
> 
> 时间：2012-09-29T10:30:57.380
> 
> 标签：php, mysql, cron, simplexml, gd

这很复杂，但我会尽可能清楚地描述我的问题。所以我有 PHP 应用程序，它是 Last.fm 的插件（我想你们中的大多数人都知道这个站点并且知道它是如何工作的）。这个应用程序使用 Lastfm 的 XML 文件。我的脚本计算了上个月播放次数最多的艺术家，因此当您使用它时，例如今天（9 月 29 日），它将生成带有 8 月艺术家的 png 文件（我的意思是艺术家姓名和他的照片）。此应用程序的用户有 BBCode 将其粘贴到他的个人资料中，例如：`scriptname.php?user=example`。

但是当谈到新的一个月时，问题就开始了。当我的应用程序不是很受欢迎时，我只是在我的服务器上写下了生成的文件，当新的一个月到来并且用户访问了他的个人资料（这意味着他强迫我的应用程序启动）时，脚本生成了另一个文件，一切都很清楚。但是现在我有大约 2000 个用户，这种方法会杀死我的服务器，实际上已经杀死了一段时间（当然是在 9 月 1 日......）。现在我不知道该怎么办了，当然我是被迫关闭这个服务的。我在考虑 cronjob 或某事，但我的主机不支持 SSH，现在我没有钱购买新服务器。您是否有任何想法如何在没有 cron 的情况下每月重新生成大量图像？非常感谢任何提示，并为我糟糕的英语感到抱歉。

附加信息（不确定是否有用）：保存一些服务器传输（每月限制 80 GB）我在数据库中保存了有关每个用户的一些数据：last.fm 上的昵称、上个月编号、上个月最喜欢的艺术家和链接到从 imageshack 生成的图像，每次访问脚本都会重新定位到 imageshack。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:42:55.520

不过，这可能是我弄错了；但是，如果您每天有 2000 个用户并且每月只创建一个新图像，那么您实际上并不需要 cronjobs。根据我得到的信息，您只需要缓存这些图像，而不是将它们重新定位到 imageshack ......或者，重新定位它们，但将 url 保留在数据库或其他地方......只需保留它；）当然要使用那个！

# c++ - 读取传感器数据的线程或计时器？

> ID：12651955
> 
> 赞同：1
> 
> 时间：2012-09-29T10:30:58.147
> 
> 标签：c++, multithreading, timer, synchronization

我的 Linux C++ 应用程序定期读取传感器数据。读取是通过简单的文件 I/O 操作完成的（操作系统正在写入文件，应用程序正在读取该文件）。关于我的平台的一些信息：

*   我有带超线程的单核处理器
*   传感器数据更新频率为1秒
*   应用程序 GUI 在主线程中运行，不应被阻塞

我考虑了两种读取传感器数据的方法：

*   在主应用程序线程中运行的计时器
*   具有无限循环的独立线程，它读取传感器数据然后休眠

哪种方法更有意义，还有其他选择吗？两种解决方案的成本是多少（例如，在第一种方法中阻塞主线程或在第二种方法中进行上下文切换）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:42:20.523

我对您的应用程序或硬件一无所知，但这里有几点需要考虑：

*   如果使用线程，则必须创建某种通信通道来告诉主线程数据已更新。通常这将是一个 pipe()，因为信号本质上是不可靠的，并且条件锁不适用于 I/O 多路复用（即 select()/poll()）。
*   可以不阻塞地获取整组数据吗？如果是这样，那么在主线程中阅读它可能会更容易。但是，如果您的读取可能会阻塞，您可能需要更多“跟踪我的读取状态以将其合并到我的中央 select() 中”，而线程可以阻塞直到有更多数据可用。

因此，这两种解决方案都不会自动“更容易”做到。

对于每秒只发生一次的读取，我不会担心“上下文切换”；这无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:43:02.203

我相信，即使对于没有超线程的单核 CPU，每秒一次的上下文切换成本也不是问题，特别是考虑到应用程序在用户空间中运行，因此并不是真正的时间关键。在主线程中轮询传感器会使应用程序的逻辑复杂化。因此，我建议您为此目的启动一个线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:50:26.550

主线程还需要做什么？如果阻塞就可以了吗？如果是这样，那么您不需要在单独的线程中执行计时器等。

如果主线程不能阻塞等待周期性计时器，则必须创建一个单独的线程。线程之间的数据通信可以通过两个线程都可以访问并通过互斥锁（查找 pthread_mutex_t）保护的对象进行，这很容易做到。

至于哪种方案更好，成本是多少，就看主线程还做了什么。但是对于这么简单的事情，任何一种方式都应该大致相同，并且上下文切换不应该影响任何事情。对性能影响最大的是读取的性能密集程度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T13:13:56.320

如果 Linux 驱动程序每秒读取传感器数据并将其写入设备文件，则不应在应用程序中复制计时器逻辑。在 1 秒睡眠后，您的应用程序可能仍会读取与 1 秒前相同的数据。更好的方法是有一个线程来调用设备文件上的阻塞读取。当新的传感器数据可用时，阻塞读取返回，线程可以处理数据并再次调用读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T11:13:16.670

睡眠循环会扭曲时间，因为每次迭代将花费超过 1 秒的时间。计时器没有这个问题，它们是为这种情况而设计的。所以选择一个计时器。

性能方面没有区别，因为您每秒只触发一次。

# jackson - Maven 构建错误没有可用于 org.codehaus.jackson:jackson-core-asl:jar:[1.8,1.9) 的版本在指定范围内

> ID：12651959
> 
> 赞同：12
> 
> 时间：2012-09-29T10:31:41.293
> 
> 标签：jackson, maven-3, maven-metadata

从今天早上开始，我在进行 Maven 构建时遇到了以下错误。昨天和今天没有具体的变化。有人可以帮我解决这个问题吗？我尝试清除所有本地存储库，将杰克逊版本更改为 1.9.10。令人惊讶的是，这适用于我在同一版本上工作的同事。

```
[ERROR] Failed to execute goal on project netvogue-database-api: Could not resolve     dependencies for project org.netvogue.server:netvogue-database-api:jar:1.0-SNAPSHOT: Failed to collect dependencies for [org.springframework.data:spring-data-neo4j-rest:jar:2.1.0.RC4 (compile), org.codehaus.jackson:jackson-jaxrs:jar:1.8.3 (compile), org.codehaus.jackson:jackson-mapper-asl:jar:1.8.3 (compile), org.neo4j:neo4j-kernel:jar:tests:1.8.RC1 (test), org.neo4j:neo4j-cypher:jar:1.8.RC1 (compile), com.amazonaws:aws-java-sdk:jar:1.3.10 (compile), org.imgscalr:imgscalr-lib:jar:4.2 (compile), org.springframework:spring-context:jar:3.1.2.RELEASE (compile), org.springframework.security:spring-security-config:jar:3.1.2.RELEASE (compile), org.springframework.security:spring-security-web:jar:3.1.2.RELEASE (compile), org.slf4j:slf4j-api:jar:1.5.10 (compile), org.slf4j:jcl-over-slf4j:jar:1.5.10 (runtime), org.slf4j:slf4j-log4j12:jar:1.5.10 (runtime), log4j:log4j:jar:1.2.16 (compile), junit:junit:jar:4.7 (test)]: No versions available for org.codehaus.jackson:jackson-core-asl:jar:[1.8,1.9) within specified range -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T07:52:45.410

杰克逊的`jackson-core-asl` [`maven-metadata.xml`](http://central.maven.org/maven2/org/codehaus/jackson/jackson-core-asl/maven-metadata.xml)文件似乎已损坏。

当 Maven 试图从一个范围内解析依赖版本时，它必须查看该`maven-metadata.xml`文件以确定它可以选择的候选版本。目前该文件如下所示：

```
<metadata modelVersion="1.1.0">
  <groupId>org.codehaus.jackson</groupId>
  <artifactId>jackson-core-asl</artifactId>
  <versioning>
    <latest>1.1.0</latest>
    <release>1.1.0</release>
    <versions>
      <version>1.1.0</version>
    </versions>
    <lastUpdated>20120928142709</lastUpdated>
  </versioning>
</metadata> 
```

这表明版本范围可以选择的唯一合法版本是`1.1.0`. 作为在检查文件之前该文件最有可能看起来的示例`jackson-core-lgpl` [`maven-metadata.xml`](http://central.maven.org/maven2/org/codehaus/jackson/jackson-core-lgpl/maven-metadata.xml)：

```
<metadata>
<groupId>org.codehaus.jackson</groupId>
  <artifactId>jackson-core-lgpl</artifactId>
  <version>0.9.8</version>
  <versioning>
    <versions>
      <version>0.9.8</version>
      <version>0.9.7</version>
      <version>0.9.9</version>
      <version>0.9.9-2</version>
      <version>0.9.9-3</version>
      <version>0.9.9-4</version>
      <version>0.9.9-5</version>
      <version>0.9.9-6</version>
      <version>1.0.0</version>
... 
```

如前所述，您可以对特定版本的 Jackson 进行硬编码，从而缩短版本解析并避免读取`maven-metadata.xml`文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T14:29:32.160

正如yegor256所指出的，最近遇到这个问题的人，它可能是由亚马​​逊AWS引起的。只需将您的 aws-java-sdk 更改为较新的版本（当前为 1.3.20），问题就会消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T14:24:14.907

我应该指出，这个文件的最新版本（maven-metadata.xml）一定是错误的。org.codehaus.jackson/jackson-core-asl 的最新版本是 1.9.9。

需要其他版本的 jackson-core-asl（更新 1.1.0）的其他依赖项将中断。正如它在我的场景中所做的那样。我必须手动更改 maven-metadata.xml 文件 ok jackson-core-asl 才能使其工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T10:36:48.737

Maven 无法找到 jackson-core-asl 的依赖项，您需要在 POM 中包含以下内容

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>1.9.0</version>
</dependency> 
```

如果它已经包含，那么您可能必须指定存储库。检查[Maven 存储库](http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl/1.9.0)

# javascript - fb.getLoginStatus 工作时出现 FB.api 错误

> ID：12651960
> 
> 赞同：0
> 
> 时间：2012-09-29T10:32:35.653
> 
> 标签：javascript, facebook

对 facebook 的 javascript SDK 感到非常沮丧。

有人可以告诉我为什么会这样（用我的 Facebook 名称发出警报）：

```
 FB.getLoginStatus(function(response) {

      if (response.authResponse) {
        token = response.authResponse.accessToken;
        FB.api('/me', function(response) {
            console.log(response);
            alert('Your name is ' + response.name);
             // do something here they are logged in and have given you perms   
        });
      } else {
        // no user session available, someone you dont know
      }
    }); 
```

但这会返回错误，“必须使用活动访问令牌来查询有关当前用户的信息。”：

```
 FB.api('/me', function(response) {
          console.log(response);
          alert('Your name is ' + response.name);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:48:37.113

> 但这会返回错误，“必须使用活动访问令牌来查询有关当前用户的信息。”

好吧，因为在调用方法之前您还没有获得访问令牌……？

`FB.getLoginStatus`为您提供新的用户访问令牌，前提是用户之前已授权您的应用。

但是，如果您跳过与 Facebook 交互的这一步——您希望从哪里获得有效的访问令牌？

是的，没有——因此您会收到错误消息，*确切说明*……</p>

# javascript - 服务端Nodejs协同绘图

> ID：12651963
> 
> 赞同：0
> 
> 时间：2012-09-29T10:32:56.590
> 
> 标签：javascript, html, node.js, canvas, socket.io

我找到了一个教程，帮助我设置了一个基本的实时协作绘图页面。它在 localhost:8080 上完美运行，但我想在我的服务器上启动它，但遇到了一些问题。

**应用程序.js**

```
 // Including libraries

    var app = require('http').createServer(handler),
    io = require('socket.io').listen(app),
    static = require('node-static'); // for serving files

    // This will make all the files in the current folder
    // accessible from the web
    var fileServer = new static.Server('./');

    // This is the port for our web server.
    // you will need to go to http://localhost:8080 to see it
    app.listen(8080);

    // If the URL of the socket server is opened in a browser
    function handler (request, response) {

      request.addListener('end', function () {
        fileServer.serve(request, response); // this will return the correct file
      });
    }

    // Delete this row if you want to see debug messages
    io.set('log level', 1);

    // Listen for incoming connections from clients
    io.sockets.on('connection', function (socket) {

      // Start listening for mouse move events
      socket.on('mousemove', function (data) {

        // This line sends the event (broadcasts it)
        // to everyone except the originating client.
        socket.broadcast.emit('moving', data);
      });
    }); 
```

**脚本.js**

```
$(function() {

  // This demo depends on the canvas element
  if(!('getContext' in document.createElement('canvas'))){
    alert('Sorry, it looks like your browser does not support canvas!');
    return false;
  }

  // The URL of your web server (the port is set in app.js)
  var url = 'http://localhost:8080';

  var doc = $(document),
  win = $(window),
  canvas = $('#paper'),
  ctx = canvas[0].getContext('2d'),
  instructions = $('#instructions');

  // Generate an unique ID
  var id = Math.round($.now()*Math.random());

  // A flag for drawing activity
  var drawing = false;

  var clients = {};
  var cursors = {};

  var socket = io.connect(url);

  socket.on('moving', function (data) {

    if(! (data.id in clients)){
      // a new user has come online. create a cursor for them
      cursors[data.id] = $('<div class="cursor">').appendTo('#cursors');
    }

    // Move the mouse pointer
    cursors[data.id].css({
      'left' : data.x,
      'top' : data.y
    });

    // Is the user drawing?
    if(data.drawing && clients[data.id]){

      // Draw a line on the canvas. clients[data.id] holds
      // the previous position of this user's mouse pointer

      drawLine(clients[data.id].x, clients[data.id].y, data.x, data.y);
    }

    // Saving the current client state
    clients[data.id] = data;
    clients[data.id].updated = $.now();
  });

  var prev = {};

  canvas.on('mousedown',function(e){
    e.preventDefault();
    drawing = true;
    prev.x = e.pageX;
    prev.y = e.pageY;

    // Hide the instructions
    instructions.fadeOut();
  });

  doc.bind('mouseup mouseleave',function(){
    drawing = false;
  });

  var lastEmit = $.now();

  doc.on('mousemove',function(e){
    if($.now() - lastEmit > 30){
      socket.emit('mousemove',{
        'x': e.pageX,
        'y': e.pageY,
        'drawing': drawing,
        'id': id
      });
      lastEmit = $.now();
    }

    // Draw a line for the current user's movement, as it is
    // not received in the socket.on('moving') event above

    if(drawing){

      drawLine(prev.x, prev.y, e.pageX, e.pageY);

      prev.x = e.pageX;
      prev.y = e.pageY;
    }
  });

  // Remove inactive clients after 10 seconds of inactivity
  setInterval(function(){

    for(ident in clients){
      if($.now() - clients[ident].updated > 10000){

        // Last update was more than 10 seconds ago.
        // This user has probably closed the page

        cursors[ident].remove();
        delete clients[ident];
        delete cursors[ident];
      }
    }

  },10000);

  function drawLine(fromx, fromy, tox, toy){
    ctx.moveTo(fromx, fromy);
    ctx.lineTo(tox, toy);
    ctx.stroke();
  }

}); 
```

当我把它放在我的服务器上时，它只有在我在同一个浏览器上打开两个页面时才有效，但在其他计算机上的朋友不可用。我认为这是因为我在代码上对 localhost 进行了调用。但是，我不知道用什么替换它们。

我的服务器上安装了所有节点包，并且以与在 localhost 上启动它的方式相同的方式启动它：

```
node assets/js/app.js 
```

我得到的输出是：

```
node assets/js/app.js 
   info  - socket.io started
   warn  - error raised: Error: listen EADDRINUSE 
```

那个警告，我没有在本地机器上得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:45:06.493

使用服务器 IP 地址而不是 localhost。

在 app.js 中`app.listen(port, ip)`

在 script.js 中`var url = 'http://<ip>:8080';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:50:30.357

我不是节点人。我建议你看：[Node / Express: EADDRINUSE, Address already in use - Kill server](https://stackoverflow.com/questions/4075287/node-express-eaddrinuse-address-already-in-use-kill-server)

EADDRINUSE 可能意味着某些东西已经在计算机上的同一端口/同一接口上运行。看看答案，他们建议你寻找旧的节点实例，如果那不起作用。只需尝试绑定除 8080 之外的另一个端口。

是的，正如@vinayr 所说，不要在本地主机上绑定，您的客户端只会尝试连接本地连接。

# symfony - SonataMediaBundle 您请求了一个不存在的参数“doctrine.connections”错误

> ID：12651966
> 
> 赞同：0
> 
> 时间：2012-09-29T10:33:39.783
> 
> 标签：symfony, symfony-2.1, sonata-admin

我在我的 Symfony 2.1.2 项目上设置了一个 SonataAdminBundle，它工作正常。现在我正在尝试设置 SonataMediaBundle，但出现此错误：

```
==> php app/console sonata:easy-extends:generate SonataMediaBundle

  [Symfony\Component\DependencyInjection\Exception\ParameterNotFoundException]  
  You have requested a non-existent parameter "doctrine.connections". 
```

如文档所示，我将配置参数复制到 config.yml。你可以在那里看到它：http: [//pastebin.com/wys11net](http://pastebin.com/wys11net)

任何帮助或线索？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:25:04.697

看起来您缺少 Doctrine > DBAL 节点内的 Connections 节点，以及默认连接的规范（在多个连接中，如果是这种情况）。*正确*模板的示例如下

```
doctrine:
    dbal:
        default_connection:   default
        connections:
            default:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T18:56:51.197

我也遇到了这个问题，发现配置中实际上不需要“连接”节点（参见[http://symfony.com/doc/current/reference/configuration/doctrine.html#doctrine-dbal-配置](http://symfony.com/doc/current/reference/configuration/doctrine.html#doctrine-dbal-configuration)...当您有多个连接时，您只需要连接节点）。

在我的例子中，我在 Doctrine 之前的 AppKernel.php 文件中有 SonataCacheBundle。Doctrine 在 Doctrine 初始化时设置了“doctrine.connections”参数，因此如果您在 Doctrine 初始化之前尝试在 SonataCacheBundle 中访问它，那么“doctrine.connections”还没有在容器中。

重新排序 AppKernel.php 中的条目为我解决了这个问题。

# asp.net - ASP.NET 中的缓存页面回发给它们自己

> ID：12651972
> 
> 赞同：1
> 
> 时间：2012-09-29T10:34:57.380
> 
> 标签：asp.net, postback, outputcache

我有一个配置了输出缓存的页面：

```
<%@ OutputCache VaryByParam="none" Duration="10" %> 
```

在该页面上，我还有以下控件：

```
<asp:Label ID="lblChosen" runat="server" /><br />
<asp:DropDownList ID="lstChoice" runat="server">
    <asp:ListItem>One</asp:ListItem>
    <asp:ListItem>Two</asp:ListItem>
    <asp:ListItem>Three</asp:ListItem>
</asp:DropDownList><br />
<asp:Button ID="cmdSubmit" runat="server" Text="Submit" 
    onclick="cmdSubmit_Click" /> 
```

按钮单击处理程序只是将 DropDownList 中的值分配给标签。

问题：

当我第一次请求页面时，我按预期得到它。现在，我假设此时页面将被缓存，并且任何后续回发都将被忽略。但事实并非如此，处理程序在我第一次回帖时受到打击。在那之后，它不会在接下来的 10 秒内被击中。

为什么它在第一次回帖时被击中？

# haskell - 具有匿名功能的 Haskell Fold

> ID：12651974
> 
> 赞同：3
> 
> 时间：2012-09-29T10:35:20.390
> 
> 标签：haskell, anonymous-function, fold

我对 Haskell 基础之一有疑问：折叠 + 匿名函数

我正在开发一个 bin2dec 程序`foldl`。
解决方案如下所示：

```
bin2dec :: String -> Int
bin2dec = foldl (\x y -> if y=='1' then x*2 + 1 else x*2) 0 
```

我了解`foldl`/的基本概念，`foldr`但我不明白参数`x y`代表什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T10:52:14.133

查看类型`foldl`

`foldl :: (a -> b -> a) -> a -> [b] -> a`

考虑`foldl f z list`

所以 foldl 基本上在列表（或任何可折叠的东西）上递增地工作，从左侧获取 1 个元素并应用`f z element`以获取用于下一步的新元素，同时折叠其余元素。基本上对 foldl 的一个简单定义可能有助于理解它。

```
 foldl f z []     = z
 foldl f z (x:xs) = foldl f (f z x) xs 
```

[Haskell wiki](http://www.haskell.org/haskellwiki/Fold)中的图表可能有助于建立更好的直觉。

![折叠 fz](../Images/643ca3e1392e083a1be84d90ce45ffdb.png)

考虑您的功能`f = (\x y -> if y=='1' then x*2 + 1 else x*2)`并尝试为`foldl f 0 "11"`. 这里`"11"`是一样的`['1','1']`

```
 foldl f 0 ['1','1'] 
= foldl f (f 0 '1') ['1'] 
```

现在 f 是一个接受 2 个参数的函数，第一个是整数，第二个是字符并返回一个整数。所以 在这种情况下`x=0`和`y='1'`，所以`f x y = 0*2 + 1 = 1`

```
= foldl f 1 ['1']
= foldl f (f 1 '1') [] 
```

现在再次申请`f 1 '1'`。这里`x=1`等等。`y='1'`_`f x y = 1*2 + 1 = 3`

```
= foldl f 3 [] 
```

使用空列表的第一个定义`foldl`。

```
= 3 
```

这是“11”的十进制表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T10:45:40.243

使用类型！您可以键入`:t`GHCi，然后键入任何函数或值以查看其类型。如果我们询问类型，会发生以下情况`foldl`

```
Prelude> :t foldl
foldl :: (a -> b -> a) -> a -> [b] -> a 
```

输入列表的类型为`[b]`，因此它是`b`s 的列表。输出类型是`a`，这是我们要生成的。您还必须为折叠提供一个初始值，类型也是`a`。函数是类型

```
a -> b -> a 
```

第一个参数 ( `a`) 是到目前为止计算的折叠值。第二个参数 ( `b`) 是列表的下一个元素。所以在你的例子中

```
\x y -> if y == '1' then x * 2 + 1 else x * 2 
```

参数`x`是您到目前为止计算的二进制数，并且`y`是列表中的下一个字符（ a`'1'`或 a `'0'`）。

# javascript - 为什么不能对函数表达式进行字符串化？

> ID：12651977
> 
> 赞同：24
> 
> 时间：2012-09-29T10:35:43.663
> 
> 标签：javascript, json, function, stringification

为什么这不会产生任何东西？

```
console.log(JSON.stringify(function(){console.log('foobar');})); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-29T10:37:42.150

JSON 根本无法对函数进行字符串化，它就像`undefined`或`null`值一样处理它们。[您可以在EcmaScript 5.1 §15.12.3](http://ecma-international.org/ecma-262/5.1/#sec-15.12.3)中检查确切的算法，另请参阅[MDN 上的描述](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify#Description)。

但是，您当然可以通过将函数表达式转换为字符串来对函数表达式进行字符串化，尝试

```
console.log("" + function(){console.log('foobar');}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-08-28T14:23:10.813

`yourFunctionName.toString();`还将字符串化一个函数

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-29T10:37:56.340

JSON 无法表示函数。它是一种数据格式，旨在实现跨语言的简单性和兼容性（函数是跨语言兼容的最后一件事）。

来自[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)的文档：

> 如果在转换过程中遇到未定义、函数或 XML 值，则它要么被忽略（当它在对象中找到时），要么被审查为 null（当它在数组中找到时）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-29T12:13:09.110

如果您还想用于`JSON.stringify`转换函数和本机对象，则可以将转换器函数作为第二个参数传递：

```
const data = {
  fn: function(){}
}

function converter(key, val) {
  if (typeof val === 'function' || val && val.constructor === RegExp) {
    return String(val)
  }
  return val
}

console.log(JSON.stringify(data, converter, 2)) 
```

`undefined`如果要省略结果，请从转换器函数返回。

第三个参数是您希望输出缩进多少个空格（可选）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-13T06:38:55.420

您不能这样做，但有一些第三方库可以帮助您做到这一点，例如：[https ://www.npmjs.com/package/json-fn](https://www.npmjs.com/package/json-fn)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-13T00:19:22.080

有几种方法可以做到这一点。

假设你有函数 foo

```
> function (foo) { return foo} 
```

如果您控制台记录它，它会返回带有类型的函数名称

```
> console.log(foo)
[Function: foo] 
```

当要访问它的字符串化版本时，您可以使用下面列出的方法之一。

```
> console.log(`${foo}`)
function (bar) { return bar}
undefined
> console.log(foo.toString())
function (bar) { return bar}
undefined
> console.log("" + foo)
function (bar) { return bar}
undefined 
```

# php - jQuery AJAX 请求在页面加载时不起作用，但是，它在调试控制台中起作用

> ID：12651981
> 
> 赞同：2
> 
> 时间：2012-09-29T10:35:53.513
> 
> 标签：php, javascript, jquery, ajax, json

**在 jQuery 中关闭异步请求解决了这个问题。**

我的页面中有以下 Javascript 和 AJAX 请求（使用 jQuery）：

```
 "use strict";

    var hsArea, counter, hotspots, count;
    counter = 4;
    count = 0;
    hotspots = {};

    function fetchHotspotList() {
        $.getJSON ('/alpha/engine/hotspots/gethotspot.php', {'type' : 'list'}, function(json) {
            hotspots = json;
        });
    }

    function displayHotspot(type, id, number) {
        $.ajax({
            url: '/alpha/engine/hotspots/gethotspot.php',
            dataType: 'json',
            data: {'type' : type, 'id' : id},
            success: function(json) {
                console.log(json);
                var hotspot, extract;
                    extract = json.content;
                    extract = extract.replace(/<(?:.|\n)*?>/gm, '');
                    extract = extract.substring(0, 97);
                    extract = extract + "...";
                    json.content = extract;

                    hotspot = document.createElement("div");
                    hsArea.append(hotspot);
                    hotspot.setAttribute('class','hotspot');
                    hotspot.setAttribute('id','hotspot' + number);

                    $(hotspot).css('position', 'absolute');
                    $(hotspot).css('top', number * 100 + 100);
                    $(hotspot).css('left', number * 100 + 110);

                    hotspot.innerHTML = "<h1>"+ json.title + "</h1><p>" + json.content + "</p>";
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus, errorThrown);
            }
        });
        }

        function listHotspots() {
            for(count = 0; count < counter; count++) {
                (function(count) {
                    displayHotspot('scribble',hotspots[count], count);
                    count = count + 1;  
                })(count);
            }
        }

        function loadHotspots() {
            fetchHotspotList();
            listHotspots();
        }

    $(document).ready(function() {
        hsArea = $("#hotspotArea");
        fetchHotspotList();
        listHotspots();
    }); 
```

（抱歉，格式有点不对劲！） - 现在，$(document).ready() 函数按应有的方式分配 hsArea 变量，但是 fetchHotspotList() 和 listHotspots() 的组合返回：

`Uncaught TypeError: Cannot call method 'replace' of null`

但是，如果在 Google Chrome Javascript 控制台中，我运行：

`loadHotspots();`

它从 AJAX 请求中获取数据并将其正确显示在页面上。起初我认为问题在于我没有使用 $(document).ready() 处理程序，但添加它并没有修复它。两者都没有在 body 标记内使用 onload 处理程序。

任何帮助将不胜感激。

问候，本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:47:48.270

这可能是由于您的`listHotSpots`函数在`fetchHotSpots`返回之前被调用（因为它是异步调用）。

您最好将执行链接`listHotSpots`到完成`fetchHotSpots`，如下所示：

```
function fetchHotspotList() {
    $.getJSON ('/alpha/engine/hotspots/gethotspot.php', {'type' : 'list'}, function(json) {
        hotspots = json;
        listHotSpots();
    });
} 
```

您最好修改`listHotSpots`以获取从 AJAX 调用返回的 json 数据。希望这可以帮助！

# java - 如何在 MySQL 上插入 Java 数据

> ID：12651982
> 
> 赞同：0
> 
> 时间：2012-09-29T10:36:02.940
> 
> 标签：java, mysql

运行此代码时出现错误。我不知道为什么。我只想做一个方法，当被调用时会将数据存储在 MySQL 数据库中。这是代码：

```
public Employee(String firstName, String lastName, 
                String userID, String userPassword, String role)
{
    try{
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/hotelmanagementsystem",                            "some_user","");

        PreparedStatement statement = con.prepareStatement("Insert into employee(Firstname, Lastname, UserID, UserPassword, Role)values(?, ?, ?, ?, ?");    
        statement.setString(1, firstName);
        statement.setString(2, lastName);
        statement.setString(3, userID);
        statement.setString(4, userPassword);
        statement.setString(5, role);
        statement.executeUpdate();

        con.close(); 
    }
    catch( Exception e ) {
        e.printStackTrace();        
        return;
    }
} 
```

控制台：语法错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T10:38:08.237

改变

```
PreparedStatement statement = con.prepareStatement("Insert into employee(Firstname, Lastname, UserID, UserPassword, Role)values(?, ?, ?, ?, ?"); 
```

至

```
PreparedStatement statement = con.prepareStatement("Insert into employee(Firstname, Lastname, UserID, UserPassword, Role)values(?, ?, ?, ?, ?)"); 
```

你错过了右括号`)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:39:15.150

您忘记了 values(.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:45:28.767

```
PreparedStatement statement = con.prepareStatement("Insert into employee(Firstname, Lastname, UserID, UserPassword, Role)values(?, ?, ?, ?, ?"); 
```

应该

```
PreparedStatement statement = con.prepareStatement("Insert into employee(Firstname, Lastname, UserID, UserPassword, Role)values(?, ?, ?, ?, ?)"); 
```

你缺少右括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T10:41:22.640

在您的查询中添加双引号，然后就可以了。

```
 PreparedStatement statement = con.prepareStatement("Insert into employee(Firstname, Lastname, UserID, UserPassword, Role)values(?, ?, ?, ?, ?)"); 
```

# android - HTC 设备 adb 错误

> ID：12651984
> 
> 赞同：1
> 
> 时间：2012-09-29T10:36:39.537
> 
> 标签：android, android-emulator, adb

我不明白为什么我的 HTC Wildfire 无法被 adb 识别。当我运行时出现此错误`insufficient permissions for device`。我的平台是 ubuntu 12.04。因此，当我转向另一个操作系统（如 Mac 操作系统）时，它运行良好（设备运行良好）。所以当我打开它时它不起作用。

我读了一些帖子，他们说你必须杀死你的服务器并重新启动它。我也这样做了。但没有结果

谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:45:16.130

除非您手动更改了您机器上的权限，否则您需要以 root 身份运行您的 adb 服务器以授予其与 Android 设备通信的权限。

```
sudo adb start-server 
```

[请参阅此处的文章如何在机器启动时使其自动化](http://www.hrupin.com/2012/01/how-to-start-android-adb-server-on-startup-in-ubuntu-linux-from-root)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:42:56.637

当你尝试连接安卓设备时，Windows需要你安装手机驱动，Mac不需要你做任何事情，Ubuntu需要你配置一个**udev**规则文件。这是[**链接**](https://developer.android.com/tools/device.html)，我认为它可能会对您有所帮助。

# python - 仅列出一个类别 Python xml

> ID：12651988
> 
> 赞同：1
> 
> 时间：2012-09-29T10:37:01.420
> 
> 标签：python, xml, dom, lxml, minidom

我正在尝试编写一个 python 程序，它使用 DOM 读取 xml 文件并打印另一个 xml 结构，该结构仅从一个具有特定选定属性“fun”的节点列出。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<website>
    <url category="fun">
        <title>Fun world</title>
        <author>Jack</author>
        <year>2010</year>
        <price>100.00</price>
    </url>

    <url category="entertainment">
        <title>Fun world</title>
        <author>Jack</author>
        <year>2010</year>
        <price>100.00</price>
    </url>
</website> 
```

我无法从具有 category="fun" 的 URL 中选择列表。

我试过这段代码：

```
for n in dom.getElementsByTagName('url'):
    s = n.attribute['category'] 
    if (s.value == "fun"):
        print n.toxml() 
```

你们能帮我调试我的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:56:34.683

注意：您的标签之一打开“网站”并尝试关闭“网站” - 所以您需要修复那个...

你提到过`lxml`。

```
from lxml import etree as et

root = et.fromstring(xml)
fun = root.xpath('/Website/url[@category="fun"]')
for node in fun:
    print et.tostring(node) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:55:53.830

使用`getAttribute`：

```
for n in dom.getElementsByTagName('url'):
    if (n.getAttribute('category') == "fun"):
        print(n.toxml()) 
```

# seo - 从 Google 代码段中排除元素？

> ID：12651992
> 
> 赞同：0
> 
> 时间：2012-09-29T10:37:52.800
> 
> 标签：seo, googlebot

我有一个基于 Magento 的电子商务商店。我有所有页面的元描述和关键字。

问题在于，在 Google 中，许多片段仅显示一小部分元描述，然后显示该页面中的几个产品。

我的网站会根据用户的位置自动设置货币，因此当它在片段中显示产品时，货币始终是美元，因为我猜谷歌从美国抓取它，因此看到美元的价格。

由于我的大部分销售都销往英国，我认为当人们在 SERP 中看到美元货币符号时，他们会感到厌恶。

有没有办法阻止货币符号或价格显示在代码段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:47:09.803

您可以确保当用户代理是 googlebot 时，您以英镑显示价格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T02:50:35.400

每种货币都有单独的页面，并使用 rel hreflang 来指示它们与哪个国家/地区相关。

# iphone - 选择下载的 UITABLEVIEW 数据

> ID：12651993
> 
> 赞同：1
> 
> 时间：2012-09-29T10:37:54.490
> 
> 标签：iphone, objective-c, ios, uitableview

在`UITableView`我通过下载`_arrayMp3Link`从下面的代码到表中的数据来翻录一些数据。假设它在表中的行中翻录为

`A`

`B`

`C`

`D`

我希望每当我单击第一行时，意味着被翻录的数据将被选择并复制到文本框。`didSelectRowAtIndexPath`我应该怎么做才能选择特定行的数据并复制到某个文本框中

```
-(void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

[_hubView showWithIndicatorAndText:@"Ripping files" animated:YES];

//Rip mp3

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSString *regexStr =  @"(<a.* href=[\"'])(.*\\.mp[34][^\"]*)[\"'](.*</a>)";
    NSError *error = nil;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexStr options:0 error:&error];

    if (((regex == nil) && (error != nil)) || _htmlString == nil){
        NSLog(@"Error");
    } else {
        listUrl = [NSMutableArray array];

        [regex enumerateMatchesInString:_htmlString 
                                options:0 
                                  range:NSMakeRange(0, _htmlString.length) 
                             usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                                 if (result != nil){
                                     // iterate ranges

                               for (int i = 0; i < [result numberOfRanges]; i++) {
                               NSRange range = [result rangeAtIndex:i];
                           NSLog(@"%d,%d group #%d: %@", range.location, range.length, i, (range.length == 0 ? @"--" : [_htmlString substringWithRange:range]));
                                         if (i == 2) {
               if ([[_htmlString substringWithRange:range] hasSuffix:@".mp3"]) {
                 [listUrl addObject:[_htmlString substringWithRange:range]];
                      NSLog(@"%@", [_htmlString substringWithRange:range]);
                                             }
                                         }

                                         // Text a
                                         // Title href
                                     // Name file
                                 }
                                 } else {
                                     NSLog(@"NULL");
                                 }

        }];

        self.arrayMp3Link = [NSArray arrayWithArray:listUrl];
    }

    dispatch_async(dispatch_get_main_queue(), ^{
        [_tableView reloadData];
        [_hubView hideAnimated];
    });
}); 
```

}

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *LabelCellIdentifier = @"cell";
UITableViewCell *cell;

cell = [tableView dequeueReusableCellWithIdentifier:LabelCellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:LabelCellIdentifier];

}

if (indexPath.row <= [_arrayMp3Link count]) {

    cell.textLabel.text = [_arrayMp3Link objectAtIndex:indexPath.row];

}

NSInteger count = 1;
for (NSInteger i = 0; i < indexPath.section; i++) {
    count += [[tableView dataSource] tableView:tableView numberOfRowsInSection:i];
}
count += indexPath.row;
// dequeue, create and configure...
cell.tag = count;

return cell; 
```

}

// 这里我想要我没有得到的代码。

```
-(void)tableView:(UITableView *)tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:46:39.430

不确定我是否 100% 得到这个问题，但我认为你想做类似于下面的事情......

```
-(void)tableView:(UITableView *)tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
     // Do something with the first row
     if(indexPath.row == 0){
          yourTextView.text = [_arrayMp3Link objectAtIndex:indexPath.row];
     } else {
          // Do something else.
     }

} 
```

# jquery - jQuery 自定义滑块

> ID：12651998
> 
> 赞同：0
> 
> 时间：2012-09-29T10:38:32.947
> 
> 标签：jquery, slider

我有一个在线教程的滑块：http: [//jsfiddle.net/RXpjM/](http://jsfiddle.net/RXpjM/)

好消息是我了解该代码（它是如何工作的等）。问题是现在我想更改“回到开头”选项。正如您现在所看到的，它只是从最后一个（image4）滑到第一个（image1），但它显示了所有其他图像（它从右到左）。我希望它简单地从 image4 转到 image1，就像在 image4 之后还有另一个图像一样。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:41:04.583

我认为你想要的通常被称为`Carousel`

**示例**：http: [//jsfiddle.net/zCe3j/3/](http://jsfiddle.net/zCe3j/3/)