# StackOverflow 问答 14823000-14823999

# python - 为什么暴发户不能运行'source bin/activate'？

> ID：14823001
> 
> 赞同：31
> 
> 时间：2013-02-11T23:38:20.043
> 
> 标签：python, virtualenv, upstart

由于某种原因，暴发户不会激活我的 virtualenv。

这就是我运行它的方式

```
script
    # My startup script, plain old shell scripting here.
    cd path/to/env
    source bin/activate
    ....
end script 
```

手动启动时 virtualenv 运行良好

为什么这不起作用？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-12T00:11:45.100

所以我已经解决了，由于某种原因暴发户不喜欢使用'source'所以我改变了这一行：

```
source bin/activate 
```

到

```
. bin/activate 
```

这行得通，但不知道为什么，如果有人能解释一下，我会很感兴趣

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-07-30T22:41:08.253

`source`是一个 bash 内置命令，但只是一个 posix“特殊”命令。

Upstart`sh -e`在执行脚本部分时运行。

sh shell 不懂`source`，只有`.`

# ios - 使用核心动画在屏幕上移动 UIImage

> ID：14823007
> 
> 赞同：1
> 
> 时间：2013-02-11T23:38:37.853
> 
> 标签：ios, cocoa-touch, core-animation, caanimation

不要发布关于 UIView 动画的答案 我了解 UIView，我正在学习核心动画。我试图让图像向右移动 50 个单位，但我遇到了很多问题。首先，当动画被调用时，图像会跳到一个新的位置，运行，然后跳回原来的位置。我希望它简单地向右移动 50 个单位，停止，如果按下按钮，再次移动。我花了很多时间研究，我似乎无法找到问题所在。我的代码：

```
-(IBAction)preform:(id)sender{

CGPoint point = CGPointMake(imView.frame.origin.x, imView.frame.origin.y);
imView.layer.position = point;

CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position.x"];
anim.fromValue  = [NSValue valueWithCGPoint:point];
anim.toValue    = [NSValue valueWithCGPoint:CGPointMake(point.x + 50, point.y)];
anim.duration   = 1.5f;
anim.repeatCount =1;
anim.removedOnCompletion = YES;
anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
[imView.layer  addAnimation:anim forKey:@"position.x"];
imView.layer.position = point;

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T00:04:03.340

我在您的代码中看到了几个问题。

首先，您要像这样获取帧原点：

```
CGPoint point = CGPointMake(imView.frame.origin.x, imView.frame.origin.y); 
```

虽然这不是一个真正的问题，但你可以简单地这样做：

```
CGPoint point = imView.frame.origin; 
```

问题是您将图层设置`position`为其框架的原点。但默认情况下，位置控制视图的**中心**，框架的原点是它的左上角。您可能只想首先获取图层的位置：

```
CGPoint point = imView.layer.position; // equivalent to imView.center 
```

其次，您正在使用需要`position.x`一个值的键路径，`CGFloat`但您正在提供一个`CGPoint`值。这似乎不会在 iOS 6.1 模拟器中引起问题，但假设它始终有效可能是个坏主意。

第三，您需要了解动画不会**更改**图层的属性！您通常操作的每个层（技术上称为*模型*层）都有一个关联的*表示*层。表示层的属性控制屏幕上的内容。当您更改模型层的属性时，Core Animation 通常会在表示层上自动设置一个动画（从旧值到新值）。这称为隐式动画。A`UIView`抑制其层上的隐式动画。

当表示层上的动画结束并被移除时，表示层的属性恢复为其模型层的值。因此，要使更改永久生效，您需要更新模型层的属性。通常最好先更新模型层的属性*，*然后添加动画，这样你的显式动画就会覆盖隐式动画（如果已创建的话）。

碰巧的是，虽然你可以制作动画`position.x`，但你需要`position`在`model`图层上进行设置以使其粘住。我对此进行了测试：

```
- (IBAction)perform:(id)sender {
    CGPoint point0 = imView.layer.position;
    CGPoint point1 = { point0.x + 50, point0.y };

    CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position.x"];
    anim.fromValue    = @(point0.x);
    anim.toValue  = @(point1.x);
    anim.duration   = 1.5f;
    anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];

    // First we update the model layer's property.
    imView.layer.position = point1;

    // Now we attach the animation.
    [imView.layer  addAnimation:anim forKey:@"position.x"];
} 
```

（请注意，我调用了我`perform:`的方法。原帖中的方法似乎拼写错误。）

如果您想真正了解 Core Animation，我强烈建议您观看 WWDC 2011 的[Core Animation Essentials 视频](https://developer.apple.com/videos/wwdc/2011/?id=421)。它长达一个小时，包含大量有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:01:50.773

这是你需要让它工作的东西。图层上的位置已设置，因此您可以将其用作`fromValue`并修改它以获得`toValue`. 另一个重要的步骤是将图层位置设置为，`endPos`以便在动画结束时，图像视图将保持在正确的位置。

```
-(IBAction)preform:(id)sender
{
    CGPoint startPos = imView.layer.position;
    CGPoint endPos = CGPointMake(point.x + 50, point.y);

    CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position.x"];
    anim.fromValue  = [NSValue valueWithCGPoint:startPos];
    anim.toValue    = [NSValue valueWithCGPoint:endPos];
    anim.duration   = 1.5f;
    anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];

    [imView.layer addAnimation:anim forKey:@"position.x"];
    imView.layer.position = endPos;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T23:45:52.357

跳回是由于您在完成时删除动画

```
anim.removeOnCompletion = NO; 
```

编辑＃3：刚刚复制并尝试了您的代码，这是您所有问题的解决方案，几乎不言自明：

```
CGPoint point = imView.center;
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position.x"];
anim.fromValue  = [NSNumber numberWithFloat:point.x];
anim.toValue    = [NSNumber numberWithFloat:point.x+50.0];//[NSValue valueWithCGPoint:CGPointMake(point.x + 50, point.y)];
anim.duration   = 1.5f;
anim.repeatCount =1;
anim.removedOnCompletion = NO;
anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
anim.fillMode=kCAFillModeForwards;
[imView.layer  addAnimation:anim forKey:@"position.x"];
[sender.layer  addAnimation:anim forKey:@"position.x"];
sender.layer.position=CGPointMake(point.x+50.0,sender.layer.position.y); 
```

即使将 removedOnCompletion 设置为 no，它也会跳回的事实令人头疼。还在玩弄它。

# c# - 如何在 Windows Phone 7 应用程序中解析 XML

> ID：14823008
> 
> 赞同：1
> 
> 时间：2013-02-11T23:38:46.660
> 
> 标签：c#, windows-phone-7, xml-parsing, webservice-client

有人能告诉我如何解析我从 wcf-rest 服务收到的 XML 字符串吗？

我的网络服务器 XML-String 看起来像

```
<WS>
    <Info>
        <Name>Beta</Name>
        <Description>Prototyps</Description>
    </Info>
    <Pages>
        <Page>
            <Name>Custom</Name>
            <Description>toDo</Description>
        </Page>
        ...many other pages...
    </Pages>
 </WS> 
```

我的手机源代码：

```
public void DownloadCompleted(Object sender, DownloadStringCompletedEventArgs e)
{
    if (!e.Cancelled && e.Error == null)
    {
        var answer = XElement.Parse(e.Result).Descendants("WS"); // null
        ...
    }
} 
```

如果我尝试通过 XDocument.Load(e.Result) 解析它，那么我会得到异常：找不到文件。

我只想要信息节点的“唯一”信息以及所有页面节点及其值的列表

**更新** 即使我尝试通过 var item = xdoc.Root.Descendants(); 加载根元素 item 将分配给整个 xml 文件。

**更新 2**似乎根元素中的命名空间出现了问题。带有命名空间的 xdocument 将无法正确解析 web 服务输出。如果我删除名称空间，它工作正常。有人可以向我解释这个问题吗？是否有删除所有命名空间的便捷解决方案？

**更新 3**删除命名空间的便捷方法[1](http://bohu7.wordpress.com/2008/12/11/removing-default-namespaces-from-an-xdocument/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:47:19.870

如果您知道格式不会改变，那么使用非常简单的 XML，您可能会对使用 XPath 感兴趣：

```
var xdoc = XDocument.Parse(e.Result);
var name = xdoc.XPathSelectElement("/WS/Info/Name"); 
```

但是对于多个页面，可能是一些 linq to xml

```
var xdoc = XDocument.Parse(xml);
var pages = xdoc.Descendants("Pages").Single();
var PagesList = pages.Elements().Select(x => new Page((string)x.Element("Name"), (string)x.Element("Description"))).ToList(); 
```

Page 是一个简单的类：

```
public class Page
{
    public string Name { get; set; }
    public string Descrip { get; set; }
    public Page(string name, string descrip)
    {
        Name = name;
        Descrip = descrip;
    }
} 
```

如果您需要更多解释，请告诉我。

还要选择不带 XPath 的信息：

```
var info = xdoc.Descendants("Info").Single();
var InfoName = info.Element("Name").Value;
var InfoDescrip = info.Element("Description").Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:34:03.517

Viktor - [XDocument.Load(string)](http://msdn.microsoft.com/en-us/library/bb343181.aspx)尝试通过提供的文件名加载 XDocument，而不是 XML 元素的字符串表示形式。

你说`var answer = XElement.Parse(e.Result).Descendants("WS"); // null`，但哪一部分是空的？解析的 XElement 还是试图获取后代？如果`<WS>...</WS>`是你的根元素，`.Descendents("WS")`调用会返回根元素吗？根据[XElement.DescendantsAndSelf()](http://msdn.microsoft.com/en-us/library/bb300437.aspx)的文档，我猜不是。您是否尝试过致电：

```
var answer = XElement.Parse(e.Result).Descendants("Info"); 
```

我的一个快速测试表明，以 WS 作为根元素，调用`XElement.Parse(e.Result).Descendants("WS");`没有产生任何结果，而`XElement.Parse(e.Result).Descendants("Info");`产生了`<Info>...</Info>`元素。

# java - 如何使用 Gson 库解析不正确的 JSON

> ID：14823010
> 
> 赞同：1
> 
> 时间：2013-02-11T23:38:53.180
> 
> 标签：java, json, gson

如何使用**Gson**库解析这个不正确的（我认为）JSON。

```
 {
    ......
       "phones":{
           "155193":"5556739386",
           "155194":"5555301828"
       }
     ......
   } 
```

字符串`155193`，并且`155194`是来自服务器的随机值。

需要使用`HashMap`还是有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:12:14.837

For this situation it helped me:

```
 public class ServerResponse {
     ...
     private HashMap<String, String> phones;
     ...
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T06:56:50.667

您的答案肯定是正确的（不要忘记将其标记为已接受！），但我有两个注释以答案的形式。

首先，如果你也可以这样使用：

```
 public class ServerResponse {
     ...
     private Object phones;
     ...
  } 
```

无论如何你都会收到一张地图，当然在这种情况下你需要一个演员表。所以你的解决方案更好。但是，如果服务器向您发送电话列表，它将起作用（当然，您的代码中将有一个类转换异常，而不是`JSONParsingException`

其次，你的**JSON 不是无效**的，如果你看一下[这个](http://www.bodurov.com/JsonFormatter/view.aspx?json=%2520%257B%2520%2520%2522phones%2522%253A%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2522155193%2522%253A%25225556739386%2522%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2522155194%2522%253A%25225555301828%2522%250A%257D%250A%257D)，你会发现它被正确解析了。在这里不起作用的是，您不能按照 POJO 方法进行解析。一种方法就像您回答的那样，另一种可能性是编写一个返回您的适配器..一个地图。所以没什么大不了的，还是让Gson像你那样处理吧。

# javascript - 使用淘汰赛的端到端 MVVM (javascript)

> ID：14823012
> 
> 赞同：0
> 
> 时间：2013-02-11T23:39:15.537
> 
> 标签：javascript, mvvm, model, knockout.js, knockout-mvvm

我是 MVVM 的新手，我想了解，如果您在后端有一个模型，比如说 ac# 库，它正在从数据库或任何其他服务中获取数据。模型将如何通知视图模型。我了解在 MVVM INotifyprovier 中为 WPF 执行此操作（只是在某处阅读），但是基于 Web 应用程序的场景怎么样，java-script 中的 Viewmodel 是否总是必须 ping 模型以识别模型中是否有更改，然后传播到用户界面。我假设视图模型总是必须以 10 分钟左右的设置间隔将 Ajax 请求发送到 asmx 或 api（只是一个示例）。这就是它端到端的工作方式。任何例子都会很棒。

因为其中一个属性是自动 UI 刷新，所以我假设需要定期从服务器询问新数据。我在网上看到的很多例子只是 ViewModel 和 View 之间的交互，但我几乎看不到 Model、ViewModel 和 View 结合在一起的任何东西。

我可以认为，如果使用 SignalR 从服务器向客户端发送 ping，则可以更新 Viewmodel 并因此更新 View。

但是，如果每次您需要从 Sever 询问一组新数据，那么 Knockout 的炒作是怎么回事，Jquery 已经这样做了一段时间，除了声明性绑定的东西，在淘汰赛库中。

感谢有人可以纠正我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:55:21.477

获取新数据取决于您的客户端应用程序，因为服务器没有任何可观察对象的概念。还有一个有用的[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，可以自动将您的 javascript 数据从服务器映射到 observable。这样，当您获取数据时，您不必重新映射数据。

但是，可以通知客户端来自服务器的更改。一种方法是通过 HTML5 WebSockets 对客户端进行服务器推送更改。SignalR 是该任务的一个很好的库候选者。它将打开 WebSockets 连接，以便服务器可以通知客户端更改。您将使用 Service Broker SqlDependency 来触发更新事件通知。一个例子可以在[这里](http://techbrij.com/database-change-notifications-asp-net-signalr-sqldependency)找到。

祝你好运！

这里还有[一个非常好的视频](http://channel9.msdn.com/Events/MIX/MIX11/FRM08)，可以观看关于 knockoutjs 的视频，它可以让您了解该框架。

# android - 安卓开发使用哪种设备屏幕尺寸

> ID：14823013
> 
> 赞同：2
> 
> 时间：2013-02-11T23:39:15.087
> 
> 标签：android, screen-size

因此，我正在考虑使用 Android 设备进行开发，但我不确定应该使用哪种设备尺寸。我很可能会针对智能手机屏幕尺寸进行开发，至少在我的应用程序的初始版本中进行开发，然后再针对更大的屏幕尺寸进行优化。

我现在买不到智能手机，因为我无法通过我的供应商支付手机的全价，所以考虑到这一切，我应该使用像 Nexus 7 等较小的平板电脑还是真的重要. 感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:45:37.427

如果您正在寻找一款涵盖大多数屏幕尺寸和密度的“通用”设备，那么 Nexus 10 是一项不错的投资。使用[此处概述的](https://plus.google.com/u/0/107708120842840792570/posts/cz5TxuoNDfG)`display-size`设置`display-density`，您可以仅使用单个设备模拟几乎任何显示配置。Nexus 7 也是如此，但在较小的范围内，Nexus 10 显示屏的分辨率更高，可以实现更好的覆盖范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:45:52.473

如今，大多数手机都是 XHDPI 和 HDPI。MDPI 手机仍然存在，但并不那么常见。如果钱不是问题，我会说买一部 XHDPI 手机，并使用模拟器来感受布局在不同密度下的外观。

# java - '字段列表'中的 Tomcat6 MySQL 未知列"

> ID：14823015
> 
> 赞同：0
> 
> 时间：2013-02-11T23:39:34.917
> 
> 标签：java, mysql, tomcat6

我正在使用 Tomcat6 和 MySQL 在 RedHat 中工作，我会感谢您对问题的帮助，我有一个连接到我的数据库的 servlet，好吧，我向我的 servlet 发送了一个 sql“字符串”，servlet 执行此代码，我正在打印我的 sql 字符串，像这样

```
"INSERT INTO xsn_core_helix_streams_stats (timestamp,type,client,publish_time,connects,id_stream,server) VALUES('2013/02/11 16:23:27',null,null,null,'1','4',6);" 
```

但我收到了一个例外

```
 "java.sql.SQLException: Unknown column 'server' in 'field list'" 
```

当我描述我的表时，我可以看到该列，当我在控制台中复制和粘贴时，我可以看到“查询正常，影响 1 行（0.03 秒）”为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:03:29.247

尽管来自@paulsm4 和@ilopezluna 的响应，`SERVER`它不是MySQL 中的保留字。参照。[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

因此，我会仔细检查您的表是否`xsn_core_helix_streams_stats`确实有一个名为`server`.

例如，尝试打开 MySQL 客户端，准备好数据库，然后运行`SHOW CREATE TABLE LIKE xsn_core_helix_streams_stats`​​.

我可以通过创建一个*没有*名为 的列的表`server`并在您的示例中尝试 INSERT 语句来重现您报告的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:54:58.840

我的工作台标记了“服务器”这个词，所以也许是一个保留词。尝试更改表中列的名称并查询，然后重试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:34:16.167

我解决了问题，tomcat6 备份了我的servlet 配置文件（Servlet/META-INF/context.xml）并放在/etc/tomcat6/Catalina/localhost，那么问题是这个文件不正确，问候和感谢！ ！

# html - 使用最大宽度时图像不在 IE8 中居中？

> ID：14823020
> 
> 赞同：1
> 
> 时间：2013-02-11T23:40:13.137
> 
> 标签：html, css, internet-explorer-8

我有一个包含图像的表格，但由于某种原因，我无法让某些图像正确居中。当我`max-width:170px`正确应用图像调整大小时，它没有居中。在其他所有浏览器（甚至 IE7）中，一切看起来都不错，但 IE8 却令人窒息。这是 FIDDLE [http://jsfiddle.net/5VT7e/](http://jsfiddle.net/5VT7e/)。

注意：我在 Chrome 中创建了小提琴，但在 IE8 中查看它，我猜 JSFIDDLE 在 IE8 中不起作用。尽管如此，您仍然可以查看所有代码；）

这是问题的屏幕截图：

**问题：** ![在此处输入图像描述](../Images/d6c33b6101528ee68675bec4c8bf2bd1.png)

**期望：** ![在此处输入图像描述](../Images/ec3e9e892d164f152037dfb8a68ab29a.png)

*   第一张图看起来不错
*   第二张图片向右移动
*   第三张图看起来不错
*   第四个图像向右移动
*   第五张图片右移

几乎所有`max-width:170px`影响的图像都向右移动。

谢谢你看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:48:08.783

[这个答案](https://stackoverflow.com/questions/1771176/ie8-non-compatibility-mode-image-with-max-width-and-heightauto)提供了两种可能的解决方案：

1.  设置`width: auto`在您的图像上
2.  **在图像的直接**父元素上提供宽度。

# javascript - 自动检测用户的首选语言和谷歌翻译

> ID：14823022
> 
> 赞同：9
> 
> 时间：2013-02-11T23:40:24.337
> 
> 标签：javascript, internationalization, google-translate

我在我的网站中使用此脚本进行翻译

```
<div id="google_translate_element" align="center"></div>  
<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
        pageLanguage: 'auto',
        autoDisplay: false,
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
    }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

它工作得很好:) 但是当用户进入我的网站时，有没有办法检测用户 ip 并自动翻译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T00:54:49.753

虽然您可以使用基于 IP 的位置检测（请参阅[此答案](https://stackoverflow.com/a/9143618/2016778)），但它既不可靠也不会让您更了解用户的首选语言（例如出国旅行的用户等）。

具有大量国际流量的网站使用各种参数来决定应该以哪种语言呈现内容。其中一些参数：

*   [`Accept-Language`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4)[此处](https://stackoverflow.com/a/3335420/2016778)详细讨论的 HTTP 标头。
*   属性值`window.navigator.language`或`window.navigator.userLanguage`（对于 IE）
*   根据 CLDR 检查基于 IP 的位置检测数据，为您提供该地区的通用语言。

MediaWiki 扩展程序`UniversalLanguageSelector`使用这些因素以及存储的用户偏好来为每个用户提供常用语言列表。见[`getFrequentLanguageList()`](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/extensions/UniversalLanguageSelector.git;a=blob;f=resources/js/ext.uls.init.js;h=b449c7a5f5c3e236a3688f0c822a0735282039e0;hb=HEAD#l73)。

W3C 也有一些[建议](http://www.w3.org/International/questions/qa-when-lang-neg)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-15T02:17:09.347

此脚本仅针对未将英语设置为其主要或唯一语言的人显示翻译下拉框，并**在英语用户查看页面时将其隐藏**-​​ 它是使用`en`谷歌代码中的英文页面编码的。

它仅使用该语言的前 2 个字符来避免检查英语之类的[许多变体](http://www.science.co.il/Language/Locale-codes.asp)`en-US`，`en-tt`等等——它们都以 . 开头`en`。

这可以很容易地适应检测`pageLanguage`并与用户的首选语言进行比较。的使用`navigator.languages`很重要，因为它用于较新的浏览器版本，请参阅[跨浏览器兼容性说明](http://gu.illau.me/posts/the-problem-of-user-language-lists-in-javascript/)

```
<div id="google_translate_element"></div>
<script type="text/javascript">
var userLang = navigator.language || navigator.userLanguage || navigator.languages; 
if (userLang.substr(0,2) != "en"){
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en', layout: 
    google.translate.TranslateElement.FloatPosition.TOP_LEFT}, 'google_translate_element');
   }
 }
else { 
  document.getElementById("google_translate_element").style.display="none";
  }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

# jquery - asp.net中的JQuery微调器提交？

> ID：14823027
> 
> 赞同：-1
> 
> 时间：2013-02-11T23:41:17.997
> 
> 标签：jquery, asp.net

我想在 asp.net 提交上打开 jQuery div 微调器并执行一些业务逻辑并隐藏或关闭微调器？我怎样才能做到这一点？我在常规的 asp.net 应用程序中需要它。

如果您有样品或文章，请分享我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:48:00.257

有一个不错的 jquery 插件叫做 blockui：

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

以下是一些如何在 asp.net 应用程序中使用它的示例：

[ASP.net 按钮 Jquery BlockUI](https://stackoverflow.com/questions/9583588/asp-net-button-jquery-blockui)

[http://encosia.com/using-jquery-to-enhance-aspnet-ajax-progress-indication/](http://encosia.com/using-jquery-to-enhance-aspnet-ajax-progress-indication/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:02:38.197

嘿，您似乎想显示一个加载程序或加载 gif 图像，它应该告诉用户正在发生某些事情并耐心等待！因此，您没有指定您使用的是 Web 表单还是 mvc，对于 Web 表单，您可以使用更新进度，您可以将其与更新面板一起使用，请 参见[此处](http://www.codeproject.com/Articles/18238/The-UpdateProgress-Control-of-ASP-NET-AJAX-Extensi)想使用[ajaxstart 或 ajaxsetup](http://www.jquery4u.com/ajax/jquery-ajax-loading-ajaxstartajaxsetup/)。如果您在 web 表单中使用 jquery 的 ajax 方式，您也可以对 web 表单应用相同的逻辑。但要具体说明你在照顾什么！

# linux - 服务器命令行自动化（更新项目）

> ID：14823028
> 
> 赞同：0
> 
> 时间：2013-02-11T23:41:31.143
> 
> 标签：linux, windows, command-line, ssh, automation

如何自动在远程服务器上运行一些命令？

例如我使用windows机器。我运行 bat 文件。

*   它编译资源（js + css）
*   向 SVN 提交代码
*   通过 ssh 连接到服务器
*   从该服务器上的 SVN 更新（使用我存储在 Windows 上的 SVN 密码）
*   运行一些 sh ​​脚本
*   重启守护进程

如何自动化远程任务？（最后 3 个在远程服务器上运行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:14:17.697

你的意思是自动化？喜欢每天跑步吗？为此，您安排他们。因此，对于前两个项目，您可以按照您提到的那样通过批处理文件来完成。如果你有一个在远程服务器上运行的 php 服务器，你可以在那里创建一个 php 脚本来执行最后 3 个项目。为此，您可以在 Windows 中创建一个类似 hxxp://myserver.com/update.php 的页面（或 hxxp://myserver.com/update.php?password=12345678 以避免其他人执行它）您的批处理文件会做类似的事情：

*   编译资源（js + css）
*   向 SVN 提交代码
*   向 url hxxp://myserver.com/update.php 发出请求，该请求将在服务器端执行剩余项目

使用 php，您可以使用 exec('.sh file') 执行 .sh 命令。

希望这会有所帮助，如果您遇到问题，我可以为您提供 php 脚本。

C

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:25:18.830

您需要做的就是在服务器上创建一个 bash 脚本来执行此操作。只需创建一个文件，复制您运行的每个命令（每行 1 个命令）并保存文件。然后，当您连接到远程服务器时，您可以简单地运行

```
sh /path/to/mybashfile 
```

它将运行所有这些命令。如果您从命令行运行 openssh 客户端，您可以简单地执行

```
ssh user@server "sh /path/to/mybashfile" 
```

但我不确定您在 Windows 上使用的是什么客户端。我很确定你可以用腻子做类似的事情。

如果您想进一步自动化，您可以创建一个 bash 脚本来检查存储库的最新版本，如果它比当前安装的版本更新，请运行这些命令。然后，您可以创建一个 cron 作业，每 N 分钟运行一次该 bash 脚本。

# c - C编程：用户输入一个sentinel值后如何终止程序？

> ID：14823031
> 
> 赞同：1
> 
> 时间：2013-02-11T23:41:58.870
> 
> 标签：c, return, sentinel

所以我首先#define SENTINEL -1

在某个函数中，我设置了一个 if 语句

```
void blahblah(blah)
{
   printf("Enter an integer (-1 to quit)");
   scanf("%d", &value);
   if (value == SENTINEL)
     return;
} 
```

但由于某种原因，它没有像我想要的那样终止程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:45:08.700

return 并不意味着退出，它只是意味着从函数返回......在你的代码中，if 语句是无用的，因为如果 if 语句为 false，函数无论如何都会返回。

您可能想从 blahbalh 返回一个值来表示退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:45:35.773

如果您希望终止整个程序，请替换`return`为`exit(0);`. 另外，请确保`value`is`int`和 not的数据类型`unsigned int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:46:03.043

正常的方法是设置一个标志来导致返回；在 main() - 但您可以使用 exit() 立即从代码的任何部分中止程序。

请注意，如果您使用 exit() 程序将在那里结束并且您不会获得任何您可能想要运行的终止/清理代码。

再次编辑，用错误的语言思考！exit() 需要一个表示返回状态的 int 参数，EXIT_SUCCESS 或 EXIT_FAILURE

我的错！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T23:48:19.313

程序没有理由终止，您只是在 value == SENTINEL 时离开（返回）一个函数。

你的功能也有三个问题；如果 value != SENTINEL 那么您不会返回未定义行为的函数；参数 blah 缺少类型（int blah）；并且 value 应该是全局的，该功能才能正常工作。

# mysql - mysql在错误的架构中触发问题

> ID：14823033
> 
> 赞同：2
> 
> 时间：2013-02-11T23:42:12.640
> 
> 标签：mysql, triggers

**Trigger in wrong schema**是什么意思？

```
DELIMITER $$

CREATE TRIGGER `wordpress_database1`.`insert_user_from_database2` AFTER INSERT ON `wordpress_database2`.`wp_users`
FOR EACH
ROW
BEGIN

  INSERT INTO `wordpress_database1`.`wp_users` ( ID, user_login, user_pass, user_nicename,  user_email, user_url, user_registered, user_activation_key, user_status, display_name)
    VALUES ( New.ID, New.user_login, New.user_pass, New.user_nicename, New.user_email, New.user_url, New.user_registered, New.user_activation_key, New.user_status, New.display_name );
END;$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:46:47.520

触发器需要与您插入的位置相同（即您将在 上创建触发器`wordpress_database2`）。您仍然可以插入到其他模式。通过这个简单的更改，它的整个其余部分应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-03T12:44:32.523

这对我很有帮助：[MySQL 中的模式和数据库之间的区别？](https://www.tutorialspoint.com/difference-between-schema-and-database-in-mysql)：

我引用：*“在 MySQL 中，模式是数据库的同义词。”* .

它们只是文字，但如果您不知道这一点，错误消息可能会令人困惑。

# android - Android 支持库抛出资源未找到异常

> ID：14823035
> 
> 赞同：4
> 
> 时间：2013-02-11T23:42:29.653
> 
> 标签：android, android-support-library

现在从几个用户那里收到了这个崩溃报告。到目前为止，没有人回复我的后续电子邮件，询问他们在应用程序崩溃时在做什么。这对任何人来说都很熟悉吗？

```
USER_COMMENT=
USER_CRASH_DATE=2013-02-11T16:45:01.000-06:00
PACKAGE_NAME=com.bandsintown
APP_VERSION_NAME=3.2.1
ANDROID_VERSION=4.1.2
PHONE_MODEL=Galaxy Nexus
STACK_TRACE=android.content.res.Resources$NotFoundException: Unable to find resource ID #0x10101
at android.content.res.Resources.getResourceName(Resources.java:1668)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4931)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
at dalvik.system.NativeStart.main(Native Method) 
```

是的，堆栈跟踪中没有关于我的应用程序的任何内容，而是与支持库相关。在一次崩溃导致第二次崩溃之前，我遇到过问题，而第二次崩溃是 ACRA 报告的。可能就是这种情况。但我认为如果其他人看到它并找到通用解决方案，这里值得一问。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T11:21:29.533

在 Eclipse 中：转到文件菜单-> 打开文件-> 在工作区中浏览您的项目目录-> 选择 .classpath 文件 openit->

仅保留此文件中的以下条目并删除所有其他条目

```
`<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" path="src"/>
<classpathentry kind="src" path="gen"/>
<classpathentry kind="lib" path="your dir path without space.../extras/android/support /v4/android-support-v4.jar"/>
<classpathentry kind="output" path="bin/classes"/>
 </classpath> 
```

保存文件。然后在 Eclipse-> Package Explorer -> 右键单击​​ Project -> Android tools -> Fix Project Properties。

如果您想再次交叉检查打开的 .classpath 文件并检查其中的更新，这会将所有必需的文件添加到 project 。

成功运行项目:)

# functional-programming - 方案（相当大）：使用列表来定义参数

> ID：14823044
> 
> 赞同：1
> 
> 时间：2013-02-11T23:42:57.927
> 
> 标签：functional-programming, scheme, variadic-functions

所以我是Scheme的新手。我正在尝试使用 ((name: name) (args: args) (body: body)) 形式的规范创建一个定义全局函数的函数，例如

```
 (fn-maker '((name: mult5) (x) (* x 5))) 
```

会让它变得如此全球化，我可以打电话

```
 (mult5 3) 
```

并得到 15。

这是我到目前为止所拥有的：

```
 (define (fn-maker fn-spec)
        (let* (spec (map cdr fn-spec))
              (name (caar spec))
              (args (cadr fn-spec))
              (body (caaddr (cdaddr fn-spec))))
        (lambda (args)
          body))) 
```

我目前主要困惑的是如何让 lambda 使用这些参数。就目前而言，lambda 创建了一个名为“args”的新局部变量，而不是评估 args 后面的列表。有没有解决的办法？我目前的思考过程是，我应该在 args 提供的列表中使用某种形式的 let，但我不确定它会是什么样子，甚至不确定如何构建它。

这是家庭作业，所以我绝对不是在寻找代码（作弊和所有这些），而是寻找正确方向的一点和一些批评。谢谢你。

更新：对于将来发生这种情况的任何人，可以使用一些巧妙的引用非常简单地执行此代码。不需要宏。此外，事实证明，Pretty Big 中的 eval 默认情况下会在全局范围内进行评估。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:02:35.547

有一个名为 Scheme 的过程`eval`，可用于评估您构建的任意源代码。

通常不鼓励使用它（就像在[Javascript](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)和[Ruby](https://stackoverflow.com/questions/637421/is-eval-supposed-to-be-nasty/12139990#12139990)中一样），因为它被多次使用，当有更强大的替代方案可用时，它被用作不安全的捷径。（一个简单的例子是，有人可能会`(eval name)`在全局环境中查找与符号关联的值，其中名称是从一组预定的符号中提取的；在这种情况下，构造一个单独的查找表通常是更好的风格所有感兴趣的符号，而不是为此目的颠覆全球环境。

无论如何，在*某些*Scheme 系统中，`eval`可用于将新定义注入到全局环境中。我必须添加限定符“some”，因为在[R5RS](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_idx_578)中，该`eval`过程需要一个表达式和环境来评估该表达式，并且不需要实现为此目的提供交互式全局环境。（即，`interaction-environment`是一个*可选*程序。）

*下面是*通过`eval`when提供的注入全局变量的说明：`interaction-environment`

 *```
(define (make-it-three name) (eval (list 'define name '3) (interaction-environment)))

;; At the REPL now

> (make-it-three 'x)

> x
3

> (map make-it-three '(a b c))
(#!unspecified #!unspecified #!unspecified)

> (+ a b c)
9 
```

在[Racket](http://docs.racket-lang.org/guide/eval.html)（我认为也是相当大）中，他们不提供`interaction-environment`. 但我认为那里有一个不同的程序可以用来实现这个目标；检查文档。

无论如何，这只是一种尝试对可能会或可能不会将您引向正确方向的策略提供小提示的方式。强调“可能不会”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:08:15.650

您需要一种方法来“导出”在过程中创建的函数定义，以使该定义存在于全局环境之外。到目前为止，您的实现只会返回一个`lambda`表单。提示：有一种方法可以做到这一点（我记得在 Racket 中看到过），但它可能特定于使用的 Scheme 解释器；而且我不确定它是否可以在 Pretty Big 语言中使用。

附带说明 - 如果`fn-spec`参数要接收包含新函数名称和主体的*列表*，请确保在调用时只传递一个参数`fn-maker`，如下所示：

```
(fn-maker '((name: mult5) (x) (* x 5))) 
```

另外，考虑使用宏而不是简单的过程......*

# rsa - 如何在 HSM 中包装 Microsoft RSA 密钥 blob

> ID：14823045
> 
> 赞同：3
> 
> 时间：2013-02-11T23:43:29.337
> 
> 标签：rsa, pkcs#11, hsm, nshield

我需要将 RSAPrivateKey 包装在 HSM 中，以便可以将其发送到 Microsoft CA 进行密钥存档，但我不确定要采取什么方法。

问题是 Microsoft RSA 密钥格式是专有的，似乎不受 pkcs11 或我公司使用的 nCipher HSM 的支持。

[http://msdn.microsoft.com/en-us/library/cc250013.aspx](http://msdn.microsoft.com/en-us/library/cc250013.aspx)

如果这只是一个 RSAPrivateKey，则可以直接在 HSM 中生成密钥对，在 HSM 中加载包装密钥，包装 RSAPrivateKey 并提取包装的密钥字节。显然，由于不支持这种密钥 blob 格式，我需要采取不同的方法。

我的第一个想法是扩展 RSAPrivateKey 并覆盖 getEncoded() 方法以返回此专有密钥格式。我正在使用 IAIK pkcs11 包装器，它为 Java 中的 pkcs11 提供高级 API，并且支持创建供应商定义的密钥类型。但是，供应商定义的密钥接口似乎只是为了方便扩展客户端代码中的内置密钥类型而存在，实际上并不允许修改 HSM 中的密钥编码。

第二个想法是使用 pkcs11 数据对象并将其简单地视为密钥 blob，然后使用包装密钥对其进行加密。这里同样的问题是，为了将私钥字节复制到数据对象中，似乎我需要将私钥字节提取到应用程序代码中，然后从那里创建数据对象，这违背了拥有的全部意义HSM 中的密钥。

我正在寻找这些方法的替代品，或者我忽略了 pkcs11 中的某些功能可以让我这样做？任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:25:06.017

我同意这看起来像是 nShield HSM 不支持的数据格式（尽管可能值得与[支持团队](http://www.thales-esecurity.com/support-landing-page)再次检查）。

假设是这种情况，只有一种方法可以安全地执行此操作 - 必须使用更低级别的 API 来加载私钥并将其传递给在 HSM 中运行的一些定制代码（利用 CodeSafe 技术） ，这将公开密钥材料，将其转换为必要的格式并用包装密钥包装它。

任何其他方法都会导致主机上的密钥暴露。另外，如果您已生成具有合理（默认）权限的密钥，则无论如何都无法在不编写使用管理员卡集的定制代码的情况下公开密钥。

我建议您就该问题联系支持团队。你甚至可以联系到一些友好的顾问，咳咳，他们可以帮助你解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T11:04:47.160

如果这是一种不受支持的专有格式，您可能必须在 HSM 中运行专有代码才能完成此操作。许多 HSM 允许您运行专有代码，但您需要 HSM 提供者的支持才能首先加载代码。此外，在 HSM 中运行您自己的代码可能会破坏安全认证（FIPS 或通用标准）。

否则，您将不得不从 HSM 检索私钥，将其放入安全环境中的正确格式，并使用 HSM 的常规加密工具对其进行包装。这当然会将私钥暴露在 HSM 之外。

您也可以询问微软是否有首选的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:49:53.523

您可能想要做的是使用 PKCS#11 包装器。我有点困惑您是否从 Java 中与 HSM 交互（因为您提到 IAIK 或 .Net，因为您想导出到 Microsoft RSAPrivateKey）。无论如何，PKCS11 包装器（Java 的 IAIK，.Net 的 NCryptoki）将允许您使用[PKCS#11 v2.30](ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-11/v2-30/pkcs-11v2-30b-d6.pdf)与 HSM 进行通信，请确保检查包装器和 HSM 规范中支持的版本，因为版本之间可能存在不兼容性。

PKCS#11 允许您使用 C_GenerateKeyPair 函数在 HSM 中生成 RSA 密钥对。您必须指定一个机制 (RSA_PKCS_KEY_PAIR_GEN) 并提供两个模板，一个用于私钥，一个用于公钥。确保私钥的 CKA_WRAP 属性设置为 true。

要在 HSM 中加载包装密钥，可以将函数 C_CreateObject 与模板结合使用。

然后，您可以使用 C_WrapKey 函数将私有 RSA 密钥与您导入 HSM 的密钥一起包装。首先使用 C_FindObjectsInit、C_FindObjects 和 C_FindObjectsFinal 检索要包装的键和包装键的句柄。然后使用适当的 Mechanism 和两个句柄调用 C_WrapKey 函数。

# c - 在c中添加毫秒

> ID：14823046
> 
> 赞同：-1
> 
> 时间：2013-02-11T23:43:29.103
> 
> 标签：c, time

我正在用 c 编写代码，我需要将毫秒添加到当前时间到目前为止，我有：

current_time = time(NULL); loc_time=localtime(¤t_time);

但是这只在我需要 HH:MM:SS:MM 时给出 HH:MM:SS

假设当地时间是 20:00:00:10。我想添加 10 毫秒并显示它，以便显示 20:00:00:20。我对c相当陌生，因此非常感谢任何帮助。我很困惑，因为时间是 int 格式的类型，并且要添加毫秒，我必须将 .001 秒添加到不是 int 的当前秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:48:20.393

问题是“localtime()”API 只有秒的粒度（不是毫秒）。

尝试[`gettimeofday()`](http://linux.die.net/man/2/gettimeofday)

也可以看看：

*   [以毫秒为单位获取当前时间](https://stackoverflow.com/questions/3756323/getting-the-current-time-in-milliseconds)

如果你在 Windows 上，你也可以试试 QueryPerformanceCounter()：

*   [如何获得毫秒分辨率的 Windows 系统时间？](https://stackoverflow.com/questions/3729169/how-can-i-get-the-windows-system-time-with-millisecond-resolution)

# python - 平台无关的时间计算

> ID：14823052
> 
> 赞同：0
> 
> 时间：2013-02-11T23:43:44.367
> 
> 标签：python, python-2.7

我有一个函数可以高精度地返回与平台相关的时间戳。现在我想从这样的时间戳中减去 5 秒，并正在寻找实现这一目标的最聪明的方法。

这是功能：

```
def get_time():
   """ start timer """
   if sys.platform == "win32":
      return time.clock()
   else:
      return time.time() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:46:41.037

您想使用[`timeit.default_timer`](http://docs.python.org/2/library/timeit.html#timeit.default_timer)，它正是这样做的（为当前平台获取最精确的计时器）。

要减去 5 秒，只需减去 5：

```
import timeit

timeit.default_timer() - 5 
```

给定的时间是一个浮点值，表示秒。

# xml - img 谷歌图表的 src 内的 xslt 循环

> ID：14823053
> 
> 赞同：0
> 
> 时间：2013-02-11T23:44:08.603
> 
> 标签：xml, xslt, google-visualization

我需要使用 xslt 从 xml 创建一个谷歌图表。

我在使用速记之前完成了此操作，如果我只有一个节点值但我需要循环遍历节点，这很好。

```
<img src="http://chart.apis.google.com/chart?
cht=bvg&amp;chs=350x300&amp;chd=t:20,35,10&amp;
chxr=1,0,40&amp;chds=0,40&amp;
chco=ff0000|ffa000|00ff00&amp;
chbh=65,0,35&amp;
chxt=x,y,x&amp;chxl=0:|<xsl:for-each select="node/ROW"><xsl:value-of select="node"/>|</xsl:for-each> ||&amp;chxs=2,000000,12&amp;
chtt=Tasks+on+my+To+Do+list&amp;chts=000000,20&amp;
chg=0,25,5,5" alt=""/> 
```

这就是循环（循环的一个例子）：`<xsl:for-each select="node/ROW"> <xsl:value-of select="node"/> |</xsl:for-each>` 我需要把它放在一些谷歌图表变量中，比如 chxl=...等，可能需要更多的循环来获取其他数据。

现在它只返回语法错误。

如果你有另一种实现方式，那就去吧。我在网上搜索了有关谷歌图表和 xsl 的信息，并在 github 中找到了一个 vage tut 和一个非功能性代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:23:39.960

I'd suggest trying this:

```
<xsl:variable name="cells">
  <xsl:for-each select="node/ROW">
    <xsl:value-of select="concat(node, '|')"/>
  </xsl:for-each>
</xsl:variable>
<img src="http://chart.apis.google.com/chart?
cht=bvg&amp;chs=350x300&amp;chd=t:20,35,10&amp;
chxr=1,0,40&amp;chds=0,40&amp;
chco=ff0000|ffa000|00ff00&amp;
chbh=65,0,35&amp;
chxt=x,y,x&amp;chxl=0:|{$cells} ||&amp;chxs=2,000000,12&amp;
chtt=Tasks+on+my+To+Do+list&amp;chts=000000,20&amp;
chg=0,25,5,5" alt=""/> 
```

# java - 在泽西岛解析中产生媒体类型冲突错误

> ID：14823055
> 
> 赞同：1
> 
> 时间：2013-02-11T23:44:12.787
> 
> 标签：java, jersey

我在我的宁静资源类中定义了以下这两种方法。我正在使用泽西岛。但是当我尝试运行一个单元时它说错误，它们具有相同的媒体类型。我错过了什么吗？

严重：在资源和/或提供程序类中检测到以下错误和警告：严重：产生媒体类型冲突。资源方法 public javax.ws.rs.core.Response com.thomsonreuters.codes.sourcedocweb.resource.DocumentsResource.findDocumentMetadataByCorId(java.lang.String) 和 public javax.ws.rs.core.Response com.thomsonreuters.codes。 sourcedocweb.resource.DocumentsResource.findDocumentMetadata(java.lang.String) 可以产生相同的媒体类型 Feb 11, 2013 5:43:56 PM com.sun.jersey.test.framework.spi.container.inmemory.InMemoryTestContainerFactory$InMemoryTestContainer stop INFO：停止低级 InMemory 测试容器

```
@GET
@Path("/{docId}/metadata")
@Produces(MediaType.APPLICATION_XML)
public Response findDocumentMetadata(@PathParam("docId")
final String docId)
{
    Response response = findMetadataForDocument(docId);

    return response;
}

@GET
@Path("/{corid}/metadata")
@Produces(MediaType.APPLICATION_XML)
public Response findDocumentMetadataByCorId(@PathParam("corid")
final String corid)
{
    Response response = findMetadataForDocument(corid);

    return response;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:56:49.920

我注意到的第一件事是两条路径会发生冲突。Jersey 没有任何参考框架来了解 /1/metadata 是否应该路由到第一种或第二种方法。您可以尝试将路径定义为 /doc/metadata/{docid} 和 /cor/metadata/{corid}。希望这可以帮助。

# asp.net - 如何为客户端和服务器缓存设置不同的缓存过期时间

> ID：14823057
> 
> 赞同：13
> 
> 时间：2013-02-11T23:44:17.110
> 
> 标签：asp.net, asp.net-mvc, caching, outputcache

我想让某些页面有一个 10 分钟的客户端缓存和 24 小时的服务器缓存。原因是如果页面发生变化，客户端将在 10 分钟内获取更新的版本，但如果没有任何变化，服务器只需每天重建一次页面。

问题是输出缓存设置似乎覆盖了客户端设置。这是我的设置：

**自定义 ActionFilterAttribute 类**

```
public class ClientCacheAttribute : ActionFilterAttribute
{
    private bool _noClientCache;

    public int ExpireMinutes { get; set; }

    public ClientCacheAttribute(bool noClientCache) 
    {
        _noClientCache = noClientCache;
    }

    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        if (_noClientCache || ExpireMinutes <= 0)
        {
            filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
            filterContext.HttpContext.Response.Cache.SetValidUntilExpires(false);
            filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
            filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            filterContext.HttpContext.Response.Cache.SetNoStore();
        }
        else
        {
            filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(ExpireMinutes));
        }

        base.OnResultExecuting(filterContext);
    }
} 
```

**网络配置设置**

```
 <outputCacheSettings>
    <outputCacheProfiles>
      <add name="Cache24Hours" location="Server" duration="86400" varyByParam="none" />
    </outputCacheProfiles>
  </outputCacheSettings> 
```

我怎么称呼它：

```
[OutputCache(CacheProfile = "Cache24Hours")]
[ClientCacheAttribute(false, ExpireMinutes = 10)]
public class HomeController : Controller
{
  [...]
} 
```

但是查看 HTTP 标头显示：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html; charset=utf-8
Expires: -1 
```

我怎样才能正确实施呢？它是一个 ASP.NET MVC 4 应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T13:06:46.993

您需要为服务器端缓存和客户端缓存实现自己的解决方案，使用 ClientCacheAttribute 或 OutputCache。以下是您需要自定义服务器端缓存解决方案的原因。

*   **ClientCacheAttribute**将缓存策略设置为 Response.Cache，它是 HttpCachePolicyBase 的类型
*   并且内置的**OutputCache**还将缓存策略设置为 Response.Cache

这里我要强调的是`we don't have collection of HttpCachePolicyBase but we only have one object of HttpCachePolicyBase so we can't set multiple cache policy for given response.`

即使我们可以将 Http Cacheability 设置为 HttpCacheability.ServerAndPrivate 但同样您将在缓存持续时间的其他问题中运行（即客户端 10 分钟和服务器 24 小时）

我建议将**OutputCache**用于客户端缓存，并为服务器端缓存实现您自己的缓存机制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T03:41:45.937

在您的 OutputCache 配置文件中，将位置设置为 ServerAndClient。执行此操作后，您的操作过滤器应正确覆盖输出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-17T17:05:02.153

在 .Net 4.5 下，可以有不同的客户端和服务器缓存策略，而无需编写自定义缓存提供程序：

```
// Set the cache response expiration to 3600 seconds (use your own value here).
HttpContext.Current.Response.Cache.SetExpires(DateTime.UtcNow.AddSeconds(3600));

// Set both server and browser caching.
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.ServerAndPrivate);

// Prevent browser's default max-age=0 header on first request
// from invalidating the server cache on each request.
HttpContext.Current.Response.Cache.SetValidUntilExpires(true);

// Set an HTTP ETag header on the page using a random GUID.
HttpContext.Current.Response.Cache.SetETag(System.Guid.NewGuid()
                                           .ToString().Replace("-", ""));

// Set last modified time.
HttpContext.Current.Response.Cache.SetLastModified(DateTime.UtcNow);

// Now here is the critical piece that forces revalidation on each request!:
HttpContext.Current.Response.Cache.AppendCacheExtension(
    "must-revalidate, proxy-revalidate, max-age=0"); 
```

结果是每次在服务器缓存中重新生成页面时，它都会获得一个新的 ETag。这会导致 If-None-Match 请求将整个页面返回给浏览器。如果浏览器的缓存副本与服务器缓存中生成的相同（相同的 ETag），浏览器会返回 304 Not Modified。

请注意，我在 AppendCacheExtension 中附加的缓存标头都没有与本机缓存发出的标头冲突。每当您尝试修改 .Net 缓存本身发出的缓存标头时，.Net 将始终取代您尝试执行的操作。诀窍是添加新的非冲突标头，而不是尝试更改 .Net 已经发出的内容。最重要的是，您必须附加 max-age 标头。您不能使用 .SetMaxAge()，因为这也设置了服务器缓存的页面副本的最长期限。

这需要相当多的努力才能弄清楚，但它确实有效，至少在 .Net 4.5 中是这样。

# java - DB2 java 连接驱动程序

> ID：14823060
> 
> 赞同：1
> 
> 时间：2013-02-11T23:44:27.970
> 
> 标签：java, db2

我刚刚安装了 DB2 Express-C 版本 10.1（最新的），并尝试连接到 SAMPLE 数据库。我已经通过db2.exe完成了，一切正常。这是我的java代码

```
 String url = "jdbc:db2:SAMPLE";
    String user = "db2admin";
    String password = "db2admin";
    Connection conn = null;
    try {
        // Load the DB2 JDBC Type 2 Driver with DriverManager
        //Class.forName("COM.ibm.db2.jdbc.app.DB2Driver");
        //Driver d = new COM.ibm.db2.jcc.DB2Driver();
        Driver d = new COM.ibm.db2.jdbc.app.DB2Driver();
        if(!d.jdbcCompliant()) System.console().printf("jdbc driver is not ccompliant");
        //DriverManager.registerDriver(new COM.ibm.db2.jdbc.app.DB2Driver());
        DriverManager.registerDriver(d);
        if(!d.acceptsURL(url))
            throw new SQLException("url \"" + url + "\" is not accepted by jdbc driver");
        conn = DriverManager.getConnection(url, user, password);
        conn.setAutoCommit(false);

        /* do some work */
        conn.commit();
        conn.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    } 
```

输出是

```
java.sql.SQLException: url "jdbc:db2:SAMPLE" is not accepted by jdbc driver 
```

问题是什么？我已将带有驱动程序的 .zip 添加到我的库中，以便正确找到它。也许我有一些错误的设置？

# xsd - 如何为 XSD 文件中的子元素添加唯一 ID？

> ID：14823064
> 
> 赞同：1
> 
> 时间：2013-02-11T23:44:47.937
> 
> 标签：xsd

我无法弄清楚如何创建我的 XSD 文件以使子元素具有唯一的 ID。它适用于根元素，但复制此代码并更改值不起作用，所以我认为我做错了什么。这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<flights
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="test.xsd">

    <flight flightid="1">
        <plane planeid="1">Airbus A380-861</plane>
    </flight>

</flights> 
```

这是 XSD 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    elementFormDefault="qualified" 
    attributeFormDefault="unqualified">

    <xs:element name="flights">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="flight" 
                            type="flighttype" 
                            minOccurs='1' 
                            maxOccurs='unbounded' />
            </xs:sequence>
        </xs:complexType>
        <xs:unique name="flightidisunique">
            <xs:selector xpath="flight"/>
            <xs:field xpath="@flightid"/>
        </xs:unique>
    </xs:element>

    <xs:complexType name="flighttype">
        <xs:sequence>
            <xs:element name="plane" 
                        type="planetype" 
                        minOccurs='1' 
                        maxOccurs='unbounded' />
        </xs:sequence>
        <xs:unique name="planeidisunique">
            <xs:selector xpath="plane"/>
            <xs:field xpath="@planeid"/>
        </xs:unique>
        <xs:attribute name="flightid" type="xs:string"/>
    </xs:complexType>

    <xs:complexType name="planetype">
        <xs:sequence>
        </xs:sequence>
        <xs:attribute name="planeid" type="xs:string"/>
    </xs:complexType>

</xs:schema> 
```

为我发布的 XML 创建有效架构的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:54:31.810

以下模式确保`flightid`在所有`flight`元素中是唯一的，并且在同一元素内的`planeid`所有元素中是唯一的：`plane``flight`

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">

  <xs:element name="flights">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="flight" type="flighttype" minOccurs='1' maxOccurs='unbounded'>
          <xs:unique name="planeidisunique">
            <xs:selector xpath="plane"/>
            <xs:field xpath="@planeid"/>
          </xs:unique>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
    <xs:unique name="flightidisunique">
      <xs:selector xpath="flight"/>
      <xs:field xpath="@flightid"/>
    </xs:unique>
  </xs:element>

  <xs:complexType name="flighttype">
    <xs:sequence>
      <xs:element name="plane" type="planetype" minOccurs='1' maxOccurs='unbounded' />
    </xs:sequence>
    <xs:attribute name="flightid" type="xs:string"/>
  </xs:complexType>

  <xs:complexType name="planetype" mixed="true">
    <xs:sequence>
    </xs:sequence>
    <xs:attribute name="planeid" type="xs:string"/>
  </xs:complexType>

</xs:schema> 
```

这种模式的变化在所有元素中都是`planeid`独一无二的：`plane`

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">

  <xs:element name="flights">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="flight" type="flighttype" minOccurs='1' maxOccurs='unbounded'>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
    <xs:unique name="flightidisunique">
      <xs:selector xpath="flight"/>
      <xs:field xpath="@flightid"/>
    </xs:unique>
    <xs:unique name="planeidisunique">
      <xs:selector xpath="flight/plane"/>
      <xs:field xpath="@planeid"/>
    </xs:unique>
  </xs:element>

  <xs:complexType name="flighttype">
    <xs:sequence>
      <xs:element name="plane" type="planetype" minOccurs='1' maxOccurs='unbounded' />
    </xs:sequence>
    <xs:attribute name="flightid" type="xs:string"/>
  </xs:complexType>

  <xs:complexType name="planetype" mixed="true">
    <xs:sequence>
    </xs:sequence>
    <xs:attribute name="planeid" type="xs:string"/>
  </xs:complexType>

</xs:schema> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:35:08.497

想象你想要一个这样的 xml：

```
<flights xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="test.xsd">

    <flight flightid="f1">
        <plane planeid="f1p1">Airbus A380-861</plane>
        <plane planeid="f1p2">Airbus A380-861</plane>
        <plane planeid="f1p3">Airbus A380-861</plane>
        <plane planeid="f1p4">Airbus A380-861</plane>
    </flight>

    <flight flightid="f2">
        <plane planeid="f2p1">Airbus A380-862</plane>
    </flight>
</flights> 
```

您将需要这样的架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="flights">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="flight" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="flight">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="plane" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="flightid" use="required" type="xs:ID"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="plane">
    <xs:complexType mixed="true">
      <xs:attribute name="planeid" use="required" type="xs:ID"/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

为了使您的 id 唯一，这些属性需要类型为**“xs:ID”**，xs:ID 是 NCName，这意味着它是一个名称而不是数字，例如：one 或 a1。**还向节点flight**和**plane**添加了 maxOccurs="unbounded"

 **希望这能回答你的问题。**

# c++ - 使用“ofstream”代码错误写入文本文件

> ID：14823067
> 
> 赞同：2
> 
> 时间：2013-02-11T23:45:02.513
> 
> 标签：c++, fstream, ofstream

在 C++ 中，我目前正在学习使用 ofstream 写入文件（比如说 txt 文件），我决定编写自己的小代码并自己尝试。我对我的代码有疑问，因为它没有按照我的预期运行。

```
#include <iostream>
#include <fstream>
using namespace std;

int main() {
    char opt;
    cout<<"Would you like to write to a new/existing file? [Y/N]\n";
    cin>>opt;

    if(opt=='Y'||opt=='y') {
        ofstream file;
        char filename[50];
        char statement[55];
        cout << "Please enter the name of the file you wish to open:\n";
        cin.getline(filename, 50);
        file.open(filename);
        cout << "Please enter the text you wish to be written on the file:\n";
        cin.getline(statement, 55);
        file << statement;
        file.close();
     }
     else {
         return 1;
     }
     return 0;
} 
```

在代码中，我询问用户是否要写入文件。如果他们输入 Y，它将进入“if 语句”并执行代码，但如果他们输入 N（或其他任何内容），它将导致运行失败。我的问题是，每当我选择说“Y”并尝试写入文件时，它不会让我在它之后“输入”文件名 `cout<<"Please enter the name of the file you wish to open:\n";`. 它立即要求输入要写入文件的文本。仅当我使用 if 语句并询问用户是否要写入文件时才会出现此错误。如果我删除“if 语句”并将“if 语句”中的代码写入 main 本身，而不给用户输入 Y 或 N 的选项，则代码可以正常工作。所以我知道这不是 if 语句中的代码错误，它与我理解这段代码应该如何工作的概念有关！请原谅我的愚蠢，我缺少一些明显的东西，但我似乎找不到原因。

**解决方案：**对于遇到同样问题的任何人，您所要做的就是`cin.ignore();`在`cin.getline();`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:03:15.560

您可以使用 ofstream 的 write 方法，[这里](http://www.cplusplus.com/reference/ostream/ostream/write/)是示例

# c++ - 如何在 Vtk 中用空圆圈绘制散点图

> ID：14823070
> 
> 赞同：0
> 
> 时间：2013-02-11T23:45:09.807
> 
> 标签：c++, vtk

我用 vtk 绘制了一个二维散点图，但是点是完整的圆圈。我想知道如何用空圆圈做散点图吗？我用这个例子来绘制我的散点图[http://www.itk.org/Wiki/VTK/Examples/Cxx/Plotting/ScatterPlot](http://www.itk.org/Wiki/VTK/Examples/Cxx/Plotting/ScatterPlot)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:15:14.127

似乎不可能，至少现在还不可能。我想你正在使用 vtk 5.10

# html - 使用图像作为按钮或链接的问题

> ID：14823071
> 
> 赞同：0
> 
> 时间：2013-02-11T23:45:12.257
> 
> 标签：html, image, button

所以我确信这是一个常见的问题和问题，但我想不出在这里或谷歌上搜索它的好方法，但这就是我想知道的。

当您将图像用于按钮或链接时，图形本身就是圆形或三角形，并且不会填满矩形图像的所有角。有没有办法让图像的那些空白或透明角不成为活动链接的一部分？

基本上，你如何只使图形成为活动链接或按钮，而不是整个 img 元素？如果有人能给我指点一个教程，甚至给我这个问题的名字，我当然会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:50:51.673

这称为图像映射。看看这个：

[http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

# javascript - 剑道 ui 网格中的按钮在移动设备上不起作用

> ID：14823072
> 
> 赞同：0
> 
> 时间：2013-02-11T23:45:36.407
> 
> 标签：javascript, jquery, backbone.js, kendo-ui, kendo-grid

我有一个示例，使用 Backbone.js 添加了一个剑道 ui 网格。在剑道 ui 网格中，我有一个用于删除行的按钮，但这些按钮在移动设备上不起作用。如果我反复按下一个按钮，它有时会起作用。为什么？我在 kendoGrid.columns 中声明了按钮：

```
{
command: [{
     name: "destroy",
     text: "Remove",
     className: "ob-delete"
} 
```

要删除一行并在单击按钮时执行某些操作：

```
$(document).on("click", ".grid tbody tr .ob-delete", function (e) {
    var item = grid.dataItem($(this).closest("tr"));
    var check = confirm("Delete");
    if (check) {
        grid.removeRow($(this).closest("tr"));
    }
}); 
```

[完整示例](http://jsfiddle.net/vicenrele/Thxtr/48/)

编辑：

我用的是剑道ui版本：2012.3.1114

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:11:23.637

移动和点击事件不是最好的朋友！

在此代码中，您将单击具有 .ob-delete 类的 Html 元素，这不会触发 Kendo 的内置单击事件。相反，尝试将您的删除方法实现为本演示中显示的自定义命令：[http ://demos.kendoui.c​​om/web/grid/custom-command.html](http://demos.kendoui.com/web/grid/custom-command.html)

```
 $(document).ready(function () {
                var grid = $("#grid").kendoGrid({
                    dataSource: {
                       pageSize: 10,
                       data: createRandomData(50)
                    },
                    pageable: true,
                    height: 260,
                    columns: [
                        { field: "FirstName", title: "First Name" },
                        { field: "LastName", title: "Last Name" },
                        { field: "Title" },
                        { command: { text: "View Details", click: showDetails }, title: " ", width: "140px" }]
                }).data("kendoGrid");

                wnd = $("#details")
                    .kendoWindow({
                        title: "Customer Details",
                        modal: true,
                        visible: false,
                        resizable: false,
                        width: 300
                    }).data("kendoWindow");

                detailsTemplate = kendo.template($("#template").html());
            });

            function showDetails(e) {
                e.preventDefault();

                var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
                wnd.content(detailsTemplate(dataItem));
                wnd.center().open();
            }
        </script> 
```

或者如果不需要自定义命令，请尝试本演示中显示的默认删除事件。 [http://demos.kendoui.c​​om/web/grid/editing-inline.html](http://demos.kendoui.com/web/grid/editing-inline.html)

# playframework - 通过 macports 安装 Play 2.0

> ID：14823078
> 
> 赞同：2
> 
> 时间：2013-02-11T23:45:48.143
> 
> 标签：playframework, playframework-2.0, osx-mountain-lion, macports

当我做`sudo port install play`我的电脑安装`Play 1.2.5`。如何安装`Play 2.0`使用`macports`？我在用`Mountain Lion`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T02:01:53.650

在对此进行了更多研究之后，[现在看来这是不可能的。](http://www.macports.org/ports.php?by=name&substr=play)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T06:21:10.750

使用任何包管理器来安装 Play 没有任何合理的理由。

事实上，在 MacOS 和其他系统上，安装它的过程只是解压缩下载的文件，并可选择按照[文档](http://www.playframework.com/documentation/2.1.0/Installing)中的说明设置路径。

3个步骤：

*   检查您是否安装了正确版本的 JDK，如果需要，请从 Oracle 网站安装
*   解压二进制文件
*   设置路径，或者...
*   您还可以在`/usr/bin`Play 的可执行脚本中创建符号链接：

    ```
    cd /usr/bin
    sudo ln -s /full/path/tu/unziped-folder/play play 
    ```

# java - java 从命令行导入包

> ID：14823083
> 
> 赞同：1
> 
> 时间：2013-02-11T23:45:53.987
> 
> 标签：java, compiler-errors, jasper-reports

在 Linux 上，我从命令行运行一个 ant 脚本来构建一个 java 项目。我在练习中使用 JasperReports。但我的问题是一般性的。我得到一个编译错误：包 net.sf.jasperreports.engine 不存在 import net.sf.jasperreports.engine.*;

我尝试将 CLASSPATH=path 设置为 JasperReport jar 文件 export CLASSPATH=path 到 jar 文件，然后运行 ​​ant 脚本，同样的错误。

我没有做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:49:56.590

您必须在 ant build*中*管理 ant build 的类路径。请参阅`<javac/>`元素文档，并正确指定类路径。

# actionscript-3 - ItemRenderer 通过 ItemEditor 显示

> ID：14823085
> 
> 赞同：3
> 
> 时间：2013-02-11T23:46:01.810
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

在 mx:datagrid 上，我使用自定义 itemrenderer 和 itemeditor。当单元格处于编辑模式时，Itemeditor 分隔符在 itemeditor 内可见。

所以它并不漂亮，而且很难阅读你写的东西。

在 itemEditor 上，我尝试使用 contentBackgroundColor 并覆盖 updateDisplayList

请参阅下面的 itemEditor 的所有代码

```
 <?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true"

                          creationComplete="mxdatagriditemrenderer1_creationCompleteHandler(event)"
                          focusIn="mxdatagriditemrenderer1_focusInHandler(event)">

    <fx:Script>
        <![CDATA[
            import fr.util.UtilString;

            import mx.controls.DataGrid;
            import mx.controls.dataGridClasses.DataGridColumn;
            import mx.controls.listClasses.BaseListData;
            import mx.core.FlexGlobals;
            import mx.core.UITextField;
            import mx.events.FlexEvent;
            public var htmlModif:String;
            public var beginIndex:int;
            public var endIndex:int;

            protected override function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
            {
                graphics.beginFill(0xFFFFFF); // white
                graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
                graphics.endFill();

                super.updateDisplayList(unscaledWidth, unscaledHeight);
            }

            override public function validateProperties():void
            {
                super.validateProperties();
                if (listData)
                {
                    var dg:DataGrid = DataGrid(listData.owner);

                    var column:DataGridColumn = dg.columns[listData.columnIndex];

                    var htmlText:UITextField = lblData.htmlText as UITextField;

                }

            }

            protected function lblData_focusOutHandler(event:FocusEvent):void
            {
                beginIndex = lblData.selectionBeginIndex;
                endIndex= lblData.selectionEndIndex;
            }

            protected function mxdatagriditemrenderer1_focusInHandler(event:FocusEvent):void
            {
                lblData.editable=true;
            }

            protected function mxdatagriditemrenderer1_creationCompleteHandler(event:FlexEvent):void
            {
                //set cursor postion to end
                lblData.selectionBeginIndex=lblData.htmlText.length;
                lblData.selectionEndIndex=lblData.htmlText.length+1;
                lblData.addEventListener(MouseEvent.CLICK,copyGloss_focusInHandler);

                lblData.setFocus();             
            }

            // ajout de terme venant du gloassaire
            protected function copyGloss_focusInHandler(event:Event):void
            {
                if(FlexGlobals.topLevelApplication.copyFromGloss){
                    if(Clipboard.generalClipboard.hasFormat(ClipboardFormats.TEXT_FORMAT)){ 

                        var textCpb:String = Clipboard.generalClipboard.getData(ClipboardFormats.TEXT_FORMAT) as String; 

                        var ind:int = new UtilString().calculateHtmlPosition(lblData.htmlText, lblData.selectionBeginIndex);
                        lblData.htmlText = lblData.htmlText.substring(0, ind) + textCpb + " "+lblData.htmlText.substring(ind, lblData.htmlText.length);     
                    }
                    htmlModif=lblData.htmlText;                    
                    Clipboard.generalClipboard.clear(); 
                    FlexGlobals.topLevelApplication.copyFromGloss=false;
                }
            }

        ]]>
    </fx:Script>

    <mx:TextArea id="lblData" top="0" left="0" right="0" bottom="0" 
                 htmlText="{dataGridListData.label}" 
                 wordWrap="true"
                 editable="true"
                 contentBackgroundColor="0xFFFFFF"
                 horizontalScrollPolicy="off"
                 creationComplete="htmlModif=lblData.htmlText"
                 change="htmlModif=lblData.htmlText"
                 focusOut="lblData_focusOutHandler(event)"/>
</s:MXDataGridItemRenderer> 
```

数据网格构建

```
<mx:DataGrid id="dgSuiviClini"
verticalGridLines="true"
horizontalGridLines="true"
horizontalScrollPolicy="on"
variableRowHeight="true"
dataProvider="{DP_LISTEREDVCLI}"
editable="true"
focusEnabled="true"
dropEnabled="true"
itemEditBegin="dgSuiviClini_itemEditBeginHandler(event)"
itemEditEnd="getCellInfo(event);"
itemFocusOut="getCellInfo(event)"
 width="100%" height="100%"
rowHeight="20">
<mx:columns>

<mx:DataGridColumn dataField="scRub2" headerText="{sNomCol2}" editable="true" 
width="{iNomCol2}"
id="dgc1" wordWrap="true" visible ="{bcol2Visible}"
itemRenderer="fr.ui.itemRenderer.MultilineHTMLRenderer"
itemEditor="fr.ui.itemRenderer.irCliHtmlEditor"
editorDataField="htmlModif"
editorUsesEnterKey="true" />
 </mx:columns>
</mx:DataGrid> 
```

但在这些情况下，结果是这样的： ![在此处输入图像描述](../Images/c7dc6419f54ada1cd75a290f64cfb6f2.png)

如果你能帮助我，我很高兴。

谢谢

# c# - DataGridView 在行更改时保存更改

> ID：14823091
> 
> 赞同：7
> 
> 时间：2013-02-11T23:46:36.710
> 
> 标签：c#, winforms, datagridview

在将行保留在`DataGridView`.

我已经看到使用该`RowValidated`事件的解决方案，但是，当对行进行排序时，记录会在`RowValidation`事件触发之前被重新使用。我还尝试使用`BindingSource`Current 属性获取行，但当前属性已更改。我相信这同样适用于 RowLeaving。

我已经尝试`RowChanged`直接在数据表上使用该事件，并且确实可以。

我最终使用了该`RowValidation`事件并从数据表 ( 中获取了更改`GetChange())`，但这似乎并不重要。

除了删除我使用了该`UserDeletingRow`事件，但这似乎并不重要。

离开行后保存记录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T03:19:11.847

你试过[`DataGridView.RowValidating Event`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowvalidating.aspx)and[`.IsCurrentRowDirty`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.iscurrentrowdirty.aspx)吗？

```
 private void dataGridView1_RowValidating(object sender, DataGridViewCellCancelEventArgs e)
    {
        if (dataGridView1.IsCurrentRowDirty)
        {
           //Do stuff
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T00:29:46.580

你看过了`.RowLeave`吗？

```
private void dataGridView1_RowEnter(object sender, 
    DataGridViewCellEventArgs e)
{
    for (int i = 0; i < dataGridView1.Rows[e.RowIndex].Cells.Count; i++)
    {
        dataGridView1[i, e.RowIndex].Style.BackColor = Color.Yellow;
    }
}

private void dataGridView1_RowLeave(object sender, 
    DataGridViewCellEventArgs e)
{
    for (int i = 0; i < dataGridView1.Rows[e.RowIndex].Cells.Count; i++)
    {
        dataGridView1[i, e.RowIndex].Style.BackColor = Color.Empty;
    }
} 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowleave.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowleave.aspx)

# javascript - 使用 Knockout.js 创建数据绑定复选框时未选择任何内容

> ID：14823093
> 
> 赞同：2
> 
> 时间：2013-02-11T23:46:42.630
> 
> 标签：javascript, knockout.js

我正在尝试使用 Knockout.js 创建一个复选框列表。列表本身来自数据绑定源，以及列表中的哪些项目被选中。我的模型看起来像这样：

```
var ViewModel = function ()
{
   this.areas = [{AreaId: 1, Name: 'Test 1'}, {AreaId: 2, Name: 'Test 2'}, {AreaId: 3, Name: 'Test 3'}];
   this.AreasImpacted = ko.observableArray([1, 2]);
}; 
```

*现在，我想创建一个带有标签Test 1*、*Test 2*和*Test 3*的复选框列表。我想检查*测试 1*和*测试 2*。我的 HTML 看起来像这样：

```
<span class="areas" data-bind="foreach: areas">
  <label><input type="checkbox" data-bind="value: AreaId, checked: $parent.AreasImpacted" /><span data-bind="text: Name"></span></label>
</span> 
```

这*确实*使用正确的名称绘制每个复选框，并且我可以验证`value`每个复选框的属性是否设置正确，但是没有任何检查！我也试过设置`this.AreasImpacted`为`2`. 当我这样做时，所有 3 个复选框都被选中！

完全糊涂了！

**更新：**

如果我将模型更改为：

```
this.AreasImpacted = ko.observableArray(['1', '2']); 
```

然后事情按预期工作。

如果我不得不猜测，我会说`for-each`绑定正在将每个值转换为字符串。我很好奇这是设计使然，还是 Knockout.js 错误。我希望输入的值是数字，因为这就是我将它绑定到的值。

**提交的错误：**

由于上面的代码不像[记录](http://knockoutjs.com/documentation/checked-binding.html)的那样工作，我在 GitHub 上提交了一个[错误。](https://github.com/SteveSanderson/knockout/issues/838)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:56:54.687

您需要进行一些更改，以检查`AreaId`您正在渲染的区域是否包含在`AreasImpacted`数组中：

```
data-bind="value: AreaId, checked: $parent.AreasImpacted.indexOf(AreaId) >= 0" 
```

请参阅[此小提琴](http://jsfiddle.net/jeroenheijmans/hEd2k/)以获取工作演示。

**注意：**使用此技术，选中或取消选中其中一个绑定复选框将*不会*更新数据源。

或者，您可以使数组成为字符串列表，如下所示：

```
this.AreasImpacted = ko.observableArray(['1', '2']); 
```

请参阅[此小提琴](http://jsfiddle.net/jeroenheijmans/TXhtA/)以进行演示。

* * *

如评论中所述，[KnockoutJS 文档](http://knockoutjs.com/documentation/checked-binding.html)似乎表明 OP 的原始语法应该有效。您甚至可以通过将数组中的项目转换为字符串 ( [demo](http://jsfiddle.net/jeroenheijmans/TXhtA/) ) 来实现它。

KnockoutJS 源代码可以告诉我们为什么会发生这种情况。查看[`checked.js`默认绑定](https://github.com/SteveSanderson/knockout/blob/master/src/binding/defaultBindings/checked.js)以查看将决定是否检查输入的相关代码：

```
element.checked = ko.utils.arrayIndexOf(value, element.value) >= 0; 
```

在这种情况下：

*   `value`是区域 id 的数组（数字，在 OP 的原始代码中）
*   `element`是`<input .../>`复选框 HtmlElement

因此，`element.value`将始终是字符串类型，这就是为什么只有在数组中的项目也是字符串时才会检查复选框的原因。

这是 KnockoutJS 中的*错误*，还是只是一些意外但合乎逻辑的行为：我不确定。

# c# - Backgroundworker 允许 UI 在遍历 Outlook MailItems 时冻结

> ID：14823095
> 
> 赞同：-1
> 
> 时间：2013-02-11T23:46:48.410
> 
> 标签：c#, wpf, outlook, backgroundworker, mailitem

我正在开发一个 WPF 支持工具，它查看共享的 Outlook 邮箱，收集文件夹，在 TabControl 中创建 TabItems 来表示文件夹，然后收集它在过去 14 天的文件夹中找到的 MailItems。每个文件夹可能只有大约十几个 MailItems，所以无论如何都不是很大。

启动时，应用程序遍历每个文件夹的 Mailitems 并将它们添加到 MailItem 列表中，稍后我将添加到相应 TabItem 的 ListBox 的绑定 ObservableCollection 中。

我遇到的问题是 UI 在遍历 Outlook 文件夹中的 MailItems 时会锁定。我添加了一个 Backgroundworker 例程来首先在后台收集邮件，但在此期间 UI 仍然完全没有响应。我不明白为什么这个过程根本不会弄乱用户界面。

我的简化代码如下。请注意，除了在此示例中迭代它们之外，我实际上对 MailItems 没有做任何事情，但它冻结了 UI。为什么？另外值得注意的是，总共有大约 10 个 Outlook 文件夹。创建了一个 TabItem（以 ListBox 作为内容）来表示一个文件夹，因此会导致下面的代码启动——换句话说，在初始化过程中应该有大约 10 个 Backgroundworkers 启动。

有什么建议或想法可以更好地实施吗？理想情况下，我希望应用程序启动并顺利填充显示，而不是挂起并突然显示所有内容。

```
List<MailItem> mailList = new List<MailItem>();

        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += new DoWorkEventHandler(delegate
            {
                Items folderItems = folder.Items.Restrict(filter);

                foreach (MailItem mi in folderItems.OfType<MailItem>())
                {
                    // would normally add to mailList here. 
                }
            });
        worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(delegate
            {
                 // then add to the ObservableCollection of the UI ListBox.
            });

        worker.RunWorkerAsync();
        worker.Dispose(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T02:49:12.690

我不确定这是否会导致您的 UI 锁定，但您不应该`Dispose`在`BackgroundWorker`after调用，因为它会在与 before 和之前`RunWorkerAsync`大致相同的时间运行。您可以调用处理程序（我更喜欢这样做，因为它将所有内容都保存在一个地方）或保存工作人员并稍后在包含类被释放时执行此操作。`DoWork``RunWorkerCompleted``Dispose``RunWorkerCompleted`

# python - 用于在 python 中存储多个图像的高效数据结构

> ID：14823099
> 
> 赞同：0
> 
> 时间：2013-02-11T23:47:19.623
> 
> 标签：python, variables, opencv, data-structures, storage

在 Python 中存储使用 OpenCV 加载的多个图像的好方法是什么？在 C++ 中，它可以简单地使用 Mat 的向量来完成。

如何在 Python 中做到这一点？内置数组 AFAIK 仅适用于简单数据。我应该使用一些向量或类似的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:52:59.733

我不确定你在问什么。像这样制作用户指定的对象图像会有什么问题：

```
from opencv.cv import *
class Image:
    def __init__(self, file):
        image = cvLoadImage (file)
        # whatever else you may need to store or do

list = []
someImg = Image("C:/somefile.png")
list.append(someImg) 
```

然后将它们存储在列表中？这就是我在你的情况下会这样做的方式，但我可能会误解你的问题的细节。

编辑：我也没有真正在 python 中使用过 OpenCV，所以我不确定导入和图像创建是如何工作的，但它似乎是这样的。参考：[这里](https://stackoverflow.com/questions/5002922/how-to-process-image-with-opencv-in-python)或[这里](https://stackoverflow.com/questions/1650568/how-do-i-create-an-opencv-image-from-a-pil-image)

此外，这`numpy.ndarray`是一个很好的选择，因为您似乎指的是使用矩阵（此处为 numpy.ndarrays）的向量（此处为 python 列表），您可能会更舒服。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:01:24.760

当我使用 OpenCV 时，我的选择是使用[numpy](http://www.numpy.org/) ndarrays。它可以在 numpy 数组和 OpenCV Image/Matrix 类之间快速轻松地来回转换，只需要一个薄包装器，并且 numpy 为您提供了大量的数值技巧和库供您使用。

话虽如此，简单地使用 cv 的本机 iplimage 类（从 intel 图像处理库继承的结构）列表不会有任何问题。

# c# - 覆盖方法是否被视为虚拟方法？

> ID：14823101
> 
> 赞同：1
> 
> 时间：2013-02-11T23:47:32.713
> 
> 标签：c#, .net, cil

摘自 Eric Gunnerson 的博客“ [virtual functions are not inlined](http://blogs.msdn.com/b/ericgu/archive/2004/01/29/64717.aspx) ”，但什么才算是虚方法呢？MSDN 将其定义为：

> “当实例方法声明包含虚拟修饰符时，该方法称为虚拟方法。当不存在虚拟修饰符时，该方法称为非虚拟方法。” - [MSDN 来源](http://msdn.microsoft.com/en-us/library/aa645767%28v=vs.71%29.aspx)

严格来说，一个带有override方法的派生类`public override void SomeMethod(){}`“不包含”这个词`virtual`，可以内联吗？

**编辑**：具体来说，问题是被覆盖的方法是否是内联的候选者，因为我提供的两个链接在被覆盖的方法上过于模糊。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:56:36.980

从 C# 4.0 规范的 §1.6.6.4 Virtual、override 和 abstract 方法（您引用的是旧版本）：

> 可以在派生类中*重写虚方法。*当实例方法声明包含`override`修饰符时，该方法会覆盖具有相同签名的继承虚拟方法。虚拟方法声明*引入*了新方法，而覆盖方法声明通过提供该方法的新实现来*专门*化现有继承的虚拟方法。

所以，当你编写一个`override`方法时，你实际上并没有创建一个新方法，你只是重写了一个方法。那个必须是`virtual`，所以你实际调用的方法是虚拟的。

话虽如此，在某些情况下可以内联虚方法：如果所讨论对象的编译时类型是`sealed`，那么毫无疑问要执行什么代码。（我相信 .Net 实际上并*没有*使用这种优化。）

但在其他情况下，虚拟方法不能内联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:00:42.317

覆盖虚拟方法的方法绝对是虚拟的。在许多方面，它们都与它们覆盖的方法相同。他们使用一种叫做[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)的东西。他们在您引用的博客中指出，编译器将优化它所能做的，但由于虚拟/覆盖方法涉及查找，因此无法简化。

# c# - 这可以为 TimeSpan 赋值吗？

> ID：14823105
> 
> 赞同：0
> 
> 时间：2013-02-11T23:48:09.327
> 
> 标签：c#

我必须感谢早期帮助建议“滴答”。现在我几乎进入了我的逻辑，除了一件事，我的数据库中有一个 unix 时间，当我试图转换为实时并执行逻辑时。

对不起，让我再描述一下问题，

我从数据库中提取了四个不同的时间戳（开始，结束，开始1，结束1），从unix转换为实时。我正在使用以下代码进行转换

```
DateTime = Convert.ToDateTime("1/1/1970").AddSeconds(SnapTo5Mins(Convert.ToDouble(UnixDate))).AddHours(GMTOFFset); 
```

这里的问题是，当列中的值为零时，日期时间将返回（1970 年 1 月 1 日）。

例如。我在数据库中的起始值为零，然后它重新运行（1970 年 1 月 1 日）

1.  第 1 步：比较时间戳不等于 1/1/1970（原点时间） 第 2 步：如果不相等，则执行 Break = End.Subtract(Start); 第 3 步：如果相等，则将中断值分配为零或任何值 第 4 步：对 start1 重复第 1、2、3 步 第 5 步：连接两个 break + break1

    ```
     DateTime Origin = new DateTime(1970, 1, 1, 12, 0, 0, 0);
        DateTime Start ="01/01/1970 12:00";
        DateTime End = 01/01/1970 12:00";
        DateTime Start1 ="02/10/2013 12:20";
        DateTime End1 = "02/10/2013 02:20";
        TimeSpan Break;,finalMealBreak1;
        if (Origin.Year != Start.Year)
        {
            Break = End.Subtract(Start);
        }
        else
        {
            Break = //Assign constant value zero 
        }
          if (Origin.Year != Start1.Year)
        {
            Break1 = End1.Subtract(Start1);//break1 value must be 2hrs
        }
        else
        {
            Break1 = //Assign constant value zero
        }
       TimeSpan FinalBreakResult = Break + Break1; (FinalBreakresult value suppose to be 2 hrs ) 
    ```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:52:42.143

不是 100% 确定你想从时间跨度中得到什么，我认为是 0？但是你可以做一些事情来获得价值。

```
TimeSpan.Zero // timespan of 0

DateTime.Now.TimeOfDay // returns a value of the current time in a timespan
                       // obviously also works with any datetime

TimeSpan.FromSeconds(100) // timespan with 100 seconds
                          // There are a few of these, like FromHours, FromDays 
```

编辑：使用您的代码

```
DateTime Origin = new DateTime(1970, 1, 1, 12, 0, 0, 0);
DateTime Start = DateTime.Parse("01/01/1970 12:00:00");
DateTime End = DateTime.Parse("01/01/1970 12:00:00");
DateTime Start1 = DateTime.Parse("02/10/2013 12:20:00");
DateTime End1 = DateTime.Parse("02/10/2013 14:20:00");
TimeSpan Break, Break1;

if (Origin.Year != Start.Year)
{
    Break = End.Subtract(Start);
}
else
{
    Break = TimeSpan.Zero;
}
if (Origin.Year != Start1.Year)
{
    Break1 = End1.Subtract(Start1);//break1 value must be 2hrs
}
else
{
    Break1 = TimeSpan.Zero;
}

TimeSpan FinalBreakResult = Break + Break1;
// Value of FinalBreakResult is 2 hours 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:05:51.190

当然。要添加到@Dan Saltmer 的答案：

```
DateTime then = DateTime.Now;
Thread.Sleep(500);
TimeSpan span = DateTime.Now - then; 
```

# salesforce - 如何找出在 VisualForce 的下一页上选择了哪些复选框？

> ID：14823107
> 
> 赞同：7
> 
> 时间：2013-02-11T23:48:12.160
> 
> 标签：salesforce, visualforce, force.com

我有一个数据表，它遍历一个自定义对象并生成复选框。在第二页上，我想确定哪些复选框已被选中。

在 VisualForce 页面中：

```
 Age <apex:inputText value="{!age}" id="age" />
 <apex:dataTable value="{!Areas}" var="a">
      <apex:column >
      <apex:inputCheckbox value="{!a.name}" /> <apex:outputText value="{!a.name}" />
      </apex:column>
  </apex:dataTable> 
```

在控制器中：

```
 public String age {get; set; }
  public List<Area_Of_Interest__c> getAreas() {
      areas = [select id, name from Area_Of_Interest__c];
      return areas;
  } 
```

在我的第二页上，我可以通过使用检索用户在“年龄”文本框中输入的值`{!age}`。如何检索已选中的复选框？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T20:08:04.010

好的，如果你想用Javascript处理它，使用Pavel的方法，否则使用以下通过控制器来处理。您必须为要跟踪的任何内容创建一个包装类。我不确定它是如何工作的，但是如果你在包装类中命名一个布尔变量“selected”，它就会映射到复选框。下面是代码：

因此，在您的 Visual force 页面中，执行以下操作：

```
<apex:dataTable value="{!Foos}" var="f">
    <apex:column >
        <apex:outputLabel value="{!f.foo.name}" /> <apex:inputCheckbox value="{!f.selected}" />
    </apex:column>
 </apex:dataTable>
 <apex:commandButton action="{!getPage2}" value="go"/> 
```

在您的控制器中，执行以下操作： 1) 使用布尔“selected”创建一个 Wrapper 类，它以某种方式映射到所选的 inputCheckbox：

```
public class wFoo {
    public Foo__c foo {get; set}
    public boolean selected {get; set;}

    public wFoo(Foo__c foo) {
        this.foo = foo;
        selected = false; //If you want all checkboxes initially selected, set this to true
    }
} 
```

2) 声明列表变量

```
public List<wFoo> foos {get; set;}
public List<Foo__c> selectedFoos {get; set;} 
```

3) 定义列表的访问器

```
public List<wFoo> getFoos() {
    if (foos == null) {
        foos = new List<wFoo>();
        for (Foo__c foo : [select id, name from Foo__c]) {
            foos.add(new wFoo(foo));
        }
    }
    return foos;
} 
```

4) 定义处理选中复选框的方法，并将它们放在一个List中，以便在另一个页面上使用

```
public void processSelectedFoos() {
    selectedFoos = new List<Foo__c>();
    for (wFoo foo : getFoos) {
        if (foo.selected = true) {
            selectedFoos.add(foo.foo); // This adds the wrapper wFoo's real Foo__c
        }
    }
} 
```

5) 定义点击提交按钮时将PageReference返回到下一页的方法

```
public PageReference getPage2() {
    processSelectedFoos();
    return Page.Page2;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T04:04:32.557

在我目前的项目中，我遇到了同样的问题。我使用了 apex:pageBlockTable，但我想你可以使用我的代码（我在我的代码中对对象名称进行了一些更改）

```
<apex:pageBlockTable value="{!Areas}" var="areas">
    <apex:column width="25px">
        <apex:facet name="header">
            <input type="checkbox" onClick="selectAll();" />
        </apex:facet>
        <input type="checkbox" id="{!areas.Id}" onClick="saveSelection();" />
    </apex:column>
... some additional columns
</apex:pageBlockTable> 
```

我已将自定义对象 id 放置到 html 中的输入 id 中，它看起来像

```
<input id="003R000000lCIq6IAG" onclick="saveSelection();" type="checkbox">
<input id="003R000000lCIoJIAW" onclick="saveSelection();" type="checkbox"> 
```

saveSelection() 函数写在 javascript 上

```
<script>
var areaIds = [];

function saveSelection() {
    var selectedIds = areaIds.join('');
    $j(':checkbox').each(function(){
        if (this.checked) {
            if (selectedIds.indexOf(this.id) === -1) {
                areaIds.push(this.id);
                selectedIds = selectedIds + this.id;
            }
        } else {
            if (selectedIds.indexOf(this.id) !== -1) {
                for (i=0; i < areaIds.length; i++) {
                    if (areaIds[i] === this.id) {
                        areaIds.splice(i, 1);
                        selectedIds = areaIds.join('');
                    }
                }
            }
        }                      
    });
} 
```

并使用以下代码进行恢复

```
function restoreSelection() {
    contIds = areaIds.join('');
    i = 0;
    $j(':checkbox').each(function(){ if(this.id !== ''){  if(contIds.indexOf(this.id) !== -1){this.checked=true;};}});

} 
```

我在这里使用 jQuery，这意味着您也应该在页面中包含以下代码

```
<apex:includeScript id="JQuery" value="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"/>
... some code
<script>
    window.$j = jQuery.noConflict();
    ... some code
</script> 
```

js也涉及到分页按钮：

```
<apex:panelGrid columns="7">
   <apex:commandButton status="fetchStatus" reRender="results" value="|<" action="{!first}" disabled="{!!hasPrevious}" title="First Page" onClick="saveSelection();" oncomplete="   restoreSelection()"/>
   <apex:commandButton status="fetchStatus" reRender="results" value="<" action="{!previous}" disabled="{!!hasPrevious}" title="Previous Page" onClick="saveSelection();"    oncomplete="restoreSelection()"/>
   <apex:commandButton status="fetchStatus" reRender="results" value=">" action="{!next}" disabled="{!!hasNext}" title="Next Page" onClick="saveSelection();" oncomplete="   restoreSelection()"/>
   <apex:commandButton status="fetchStatus" reRender="results" value=">|" action="{!last}" disabled="{!!hasNext}" title="Last Page" onClick="saveSelection();" oncomplete="   restoreSelection()" />
   <apex:outputText >{!(pageNumber * size)+1-size}-{!IF((pageNumber * size)>noOfRecords, noOfRecords,(pageNumber * size))} of {!noOfRecords}</apex:outputText>
   <apex:outputPanel style="color:#4AA02C;font-weight:bold">
       <apex:actionStatus id="fetchStatus" startText="Fetching..." stopText=""/>
   </apex:outputPanel> 
</apex:panelGrid> 
```

我希望这可以帮助你。

# php - php odbc 驱动程序未声明光标错误（查询在 sql 管理工作室中工作）

> ID：14823113
> 
> 赞同：0
> 
> 时间：2013-02-11T23:48:29.057
> 
> 标签：php, sql-server, odbc, freetds

我有在我的 php 代码中执行的这个查询：

```
SELECT ((SUM(CASE WHEN I.InCompliance=1 AND FI.Status='C' THEN 1 ELSE 0 END)*100) / (SUM(CASE WHEN FI.Status='C' THEN 1 ELSE 0 END))) as result 
FROM tbl_Inspection I,tbl_Facility F,tbl_FacilityInspection FI 
WHERE I.InspectionDate >= '2013-2-01' 
AND I.InspectionDate < '2014-3-01' 
AND I.belongsToFacility=F.FacilityID 
AND I.FacInspId=FI.FacInspId 
AND F.DistrictID=1 
```

它在 mssql 管理工作室中对我来说执行得很好，但我收到了这个错误

> 警告：odbc_exec()：SQL 错误：[unixODBC][FreeTDS][SQL Server]游标未声明。，SQLExecDirect 中的 SQL 状态 37000 在 /srv/www/htdocs/capsdev/includes/phpdbform_db_odbc.php 第 104 行 SELECT ((SUM(CASE WHEN I.InCompliance=1 AND FI.Status='C' THEN 1 ELSE 0 END)*100) / (SUM(CASE WHEN FI.Status='C' THEN 1 ELSE 0 END))) 为结果来自 tbl_Inspection I,tbl_Facility F,tbl_FacilityInspection FI，其中 I.InspectionDate >= '2013-2-01' AND I.InspectionDate <'2014-3-01' AND I.belongsToFacility=F.FacilityID AND I.FacInspId=FI。 FacInspId AND F.DistrictID=1 警告：odbc_fetch_array() 期望参数 1 是资源，在第 114 行的 /srv/www/htdocs/capsdev/includes/phpdbform_db_odbc.php 中给出的布尔值

任何帮助将非常感激。

谢谢，

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:47:20.997

尝试使用显式而不是隐式连接。

就像是：

```
SELECT ((SUM(CASE WHEN I.InCompliance=1 AND FI.Status='C' THEN 1 ELSE 0 END)*100) / (SUM(CASE WHEN FI.Status='C' THEN 1 ELSE 0 END))) as result 
FROM tbl_Inspection I
inner join tbl_Facility F
on I.belongsToFacility=F.FacilityID  
inner join tbl_FacilityInspection FI 
on I.FacInspId=FI.FacInspId 
WHERE I.InspectionDate >= '2013-2-01' 
AND I.InspectionDate < '2014-3-01' 
AND F.DistrictID=1 
```

# windows - 批处理文件错误？

> ID：14823114
> 
> 赞同：1
> 
> 时间：2013-02-11T23:48:40.777
> 
> 标签：windows, batch-file

我的批处理文件中的一个代码出现了一个奇怪的错误“（此时 1 是意外的）”

```
@echo off  
md tmp  
echo made tmp folder  
pause  
for %%a (1,2,3) call Do_asst %%a 
```

我是批处理文件的新手，但还没有找到问题，有人知道为什么它不会调用另一个批处理文件（Do_asst）而是崩溃吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:00:17.327

这应该是：

```
@echo off  
md tmp  
echo made tmp folder  
pause  
for %%a in (1,2,3) do call Do_asst %%a 
```

注意缺少的“in”和“do”...

# mongodb - 限制在 MongoDB 中添加文档字段？

> ID：14823117
> 
> 赞同：3
> 
> 时间：2013-02-11T23:48:47.787
> 
> 标签：mongodb

MongoDB 是否提供任何机制来限制向集合中的文档添加新字段？

我认为最好的方法是使用某种“添加新字段”权限，但似乎 MongoDB 只有两个角色——只读和普通。有没有其他方法可以“锁定”一个集合？

# c# - UpdateSourceTrigger 不工作？

> ID：14823119
> 
> 赞同：2
> 
> 时间：2013-02-11T23:49:00.227
> 
> 标签：c#, wpf

我正在尝试在按下某个键时验证文本框中的文本。这是显示我正在尝试做的最短代码示例：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox FontSize="15" HorizontalAlignment="Left" Name="txtEmail" VerticalAlignment="Top" Width="135"
                 Text="{Binding ValidationRules.EmailAddress, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"/>
    </Grid>
</Window> 
```

“验证规则”类：

```
 class ValidationRules
    {
        string email = "";
        public string EmailAddress
        {
            get
            {
                return email;
            }

            set
            {
                Console.WriteLine("Setting!");
                //Only check if there is any text for now...
                if (String.IsNullOrWhiteSpace(value))
                {
                    throw new Exception();
                }

                email = value;
            }
        }

    } 
```

当我开始在文本框中输入时，即使我使用的是`UpdateSourceTrigger=PropertyChanged`. 我已经完成了我的研究，但我能找到的所有例子都是漫长而令人困惑的。如果您能指出我在验证中遇到的任何其他错误，我也将不胜感激，但如果可能，请尝试用简单的术语来解释，因为我是 WPF 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:06:55.533

这一定是您在哪里设置 DataContext 的问题。

这个例子似乎工作正常：

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
        ValidationRules = new ValidationRules();
    }

    private ValidationRules _validation;
    public ValidationRules ValidationRules
    {
        get { return _validation; }
        set { _validation = value; NotifyPropertyChanged("ValidationRules"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
 }

public class ValidationRules : INotifyPropertyChanged
{
    string email = "";
    public string EmailAddress
    {
        get
        {
            return email;
        }

        set
        {
            Console.WriteLine("Setting!");
            //Only check if there is any text for now...
            if (String.IsNullOrWhiteSpace(value))
            {
                throw new Exception();
            }
            email = value;
            NotifyPropertyChanged("EmailAddress");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }

} 
```

Xaml

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="WpfApplication1.MainWindow"
        Title="MainWindow" Height="125.078" Width="236.441" x:Name="UI" >
    <Grid DataContext="{Binding ElementName=UI}">
        <TextBox FontSize="15" HorizontalAlignment="Left" Name="txtEmail" VerticalAlignment="Top" Width="135"
                 Text="{Binding ValidationRules.EmailAddress, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}"/>
    </Grid>
</Window> 
```

# sql-server - 机器之间传输sql server express

> ID：14823122
> 
> 赞同：0
> 
> 时间：2013-02-11T23:49:23.570
> 
> 标签：sql-server, database, express, transfer, migrate

我对此真的很陌生，所以请原谅这个问题。

我们在服务器上运行 sql server express 2008，该服务器将后端数据库形成为 Access 项目 (apd) 应用程序，该应用程序位于众多客户端计算机上，用户登录由用户名和密码控制。

我们需要停用服务器并希望将数据库转移到新机器上，然后将客户端应用程序更改为指向新服务器。

我们认为我们已经解决了重新指向问题，但在如何将数据库“锁、库存和桶”转移到运行 sql server express 的新机器上也需要一些帮助。

任何建议将不胜感激。提前致谢。哈夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:03:00.370

1.  在新服务器上安装 Sql Server 2008 Express
2.  确保您可以从服务器外部的 SSMS 连接到它
3.  在旧服务器上，备份您的数据库并创建一个 .bak 文件（您可以从 SSMS 执行此操作，右键单击您的数据库）
4.  将 .bak 文件移动到新服务器的文件系统
5.  在 SSMS 中，恢复新数据库（右键单击服务器名称 -> 恢复）
6.  更新 Sql Server 用户访问权限，以便您的连接字符串用户有权访问该数据库
7.  更新应用程序中的相关连接字符串以引用新的数据库服务器（IP 地址更改？服务器名称更改？等）

# c# - 如何获取来自不同用户回复的一个电子邮件链的通用 Outlook mailitem ConversationID

> ID：14823129
> 
> 赞同：3
> 
> 时间：2013-02-11T23:50:05.570
> 
> 标签：c#, outlook-addin

我正在用 C# 开发一个 OUTLOOK 2010 插件。此插件将根据对话创建活动。例如，一个用户创建新电子邮件，其他用户回复、转发或抄送，将此电子邮件链视为一个会话线程。这些电子邮件具有相同的 mailItem.ConversationID。基于这个对话ID，我的程序生成了一个活动，并将对话ID链接到可以在这个电子邮件链中的每封电子邮件中看到的活动。在我的机器上一切正常（我在同一个电子邮件链中回复、转发、抄送，它得到相同的会话 ID）。但是，当其他用户回复电子邮件触发我的程序生成活动时，它会生成不同的 ConversationID（相同的电子邮件链）。

我的问题是： 1.ConversationID 仅在本地有效？就像不同用户机器上的同一个email Chain，conversationID不一样？2.只要用户使用相同版本的OUTLOOK，是否有一个电子邮件链的通用mailitem conversationID？

```
var mailItem = this.OutlookItem as OutlookNS.MailItem;

        if (mailItem.ConversationID != null )
        {
            OutlookHelper.Conversation_Index = mailItem.ConversationIndex;
            OutlookHelper.Conversation_Topic = mailItem.ConversationTopic;
            OutlookHelper.Current_ConversationID = mailItem.ConversationID;
            CreateActivity(mailItem.ConversationTopic,mailItem.ConversationID);
        } 
```

我已经尝试过 EntryID，这个属性一直在变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:19:37.003

我自己想通了。同一电子邮件链中的所有电子邮件都具有相同的 ConversationIndex 前 44 个字符。每次有新的回复者回复此邮件时，ConversationIndex 都会附加一个新的 ramdon 生成的 44 个字符的字符串。它是为使用不同机器的用户应用的通用身份。但是当这封邮件的主题发生变化时，会生成一个全新的 44 个字符的 ConversationIndex。ConversationID 仅在本地工作以跟踪同一电子邮件链中的电子邮件

# time - 时间复杂度解释

> ID：14823130
> 
> 赞同：0
> 
> 时间：2013-02-11T23:50:08.483
> 
> 标签：time, binary, complexity-theory

有人可以解释一下如何找到这个算法的时间复杂度，我认为它的 O(logN) 因为二进制分裂，但我不确定

```
 int findRotationCount(int a[], int sizeOfArray) //O(logN)
    {
        int start = 0;
        int endValue = sizeOfArray -1;

        while(start<endValue)
        {
            if(a[start] < a[endValue])
                return endValue+1;
            else
            {
                int mid = (start+endValue)/2;

                if(a[start]<=a[mid] && a[mid+1]<=a[endValue])
                    return mid+1;
                else if(a[start]<=a[mid])
                    start = mid+1;
                else
                    endValue = mid;
            }
        }
        return -1;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:55:28.660

你是对的，每个循环`while`将范围缩小`start`到`endValue`（大约）一半大小，所以它是`O(log n)`. 寻找例如二分搜索的分析，如果您需要更多详细信息，它具有类似的结构。

# python - 不知道为什么我的存储过程在 pyodbc 和 SQL Server 之间不起作用

> ID：14823132
> 
> 赞同：4
> 
> 时间：2013-02-11T23:50:43.937
> 
> 标签：python, sql-server-2008, pyodbc

我对 Python (2.7) 很陌生，对 pyodbc 帮助不大。我有一个调用存储过程的脚本：

```
sql = "exec gen_all.dbo.rpt_trinity_total '" + startDate + "', '"  + endDate + "'"

print sql
dbCursor.execute(sql)   
rows = dbCursor.fetchall()

for row in rows:
    print row[0], row[1] 
```

在存储过程结束时，我返回了传入的日期，只是为了确保在设置参数时调用 SP。一切看起来都应该正常工作，但是当我查看应该由 SP 填充的表时，里面什么都没有。如果我在管理控制台中运行 SP，它就可以正常工作。

[我尝试了这里](https://stackoverflow.com/questions/7824161/passing-parameters-to-stored-procedures-using-pyodbc)发现的解决方案，即：

```
dbCursor.execute("{call gen_all.dbo.rpt_trinity_total(?,?)}", (startDate),(endDate)) 
```

但给了我同样的结果，什么都没有。SP 本身非常简单，TRUNCATE 和 INSERT，使用 SELECT，基于传递的日期。

只是想知道是否有人可以对此提供一些见解。谢谢一堆。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T05:33:09.413

我怀疑问题是您没有提交连接。`pyodbc` [默认情况下禁用自动提交](http://code.google.com/p/pyodbc/wiki/FAQs)以满足 Python DB API 规范。尝试设置`conn.autoCommit = True`或呼叫`conn.commit()`您的连接。

# facebook - 由于登录对话授权后重定向中缺少“状态”参数，CSRF 检查失败

> ID：14823135
> 
> 赞同：-2
> 
> 时间：2013-02-11T23:50:54.783
> 
> 标签：facebook, oauth-2.0, facebook-oauth

我正在使用[Facebook 登录对话框](http://developers.facebook.com/docs/reference/dialogs/oauth/)登录我的网站（使用[PHP SDK](https://github.com/facebook/facebook-php-sdk)），但它总是在新用户第一次授权应用程序时失败，而在他们第二次尝试时成功。

我发现`state`在用户授权我的应用程序后，该参数没有在重定向 url 中传回给我，这导致我的应用程序中的 CSRF 检查失败（在[`getCode()`](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L690)SDK 中）。对于它的价值，该`code`参数包括在内。

但是，如果他们第二次点击对话链接，它会按预期工作 - 不需要进一步的授权点击，并且重定向 url 是正确的，同时带有`state`和`code`参数。

所以我的问题是：

**`state`授权后如何找出导致重定向丢失的原因？**

作为参考，我的对话链接如下所示：

```
https://www.facebook.com/dialog/oauth?client_id=MY_CLIENT_ID&redirect_uri=http%3A%2F%2Fwww.mysite.com%2Fconnect&state=4f246904818d682a742c59cbbced829c&scope=email%2Cuser_likes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:24:18.147

正如 Igy 所说，这是 Facebook 方面的一个错误，现已修复：[https ://developers.facebook.com/bugs/587975411230466](https://developers.facebook.com/bugs/587975411230466)

# r - R语言：if和else语句（循环）

> ID：14823136
> 
> 赞同：4
> 
> 时间：2013-02-11T23:51:03.867
> 
> 标签：r, function, loops, if-statement

我正在对 R 语言进行循环编码，该代码涉及两个函数。如果值为半径，则应运行周期函数而不是半径函数，依此类推。

我使用课堂上的笔记进行编码，但我认为这是错误的。我没有收到任何警告，但如果我在控制台上这样做：

```
R<-98
orbit(R) 
```

我会收到这条消息：

```
Error in orbit(R) : attempt to apply non-function 
```

这是我的功能代码：

```
# Two functions: period and radius
# If a value you input is a period (in minutes), radius function should be used (radius(R))
# If a value you input is a radius (in km), period function should be used (period(R))
#   R is radius in km or period in minutes

orbit <- function(R){
    G <-6.673*10^-11
    M <- 5.972*10^24 # in kg

    if(R == 98){
            omega <- 2*pi/R # pr is period for one rotation

            Radi <- (G*M/omega^3)(1/3)
            print(Radi)
        }
    else {

        Peri <- 2*pi*sqrt(R^3/G*M)
        print(Peri)

    }

} 
```

我不认为我完全理解 if 和 else 语句。有人为我解释一下吗？另外for语句和if语句有什么区别？

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:57:22.067

这一行的问题

```
Radi <- (G*M/omega^3)*(1/3) 
```

您缺少`*`操作的地方

`if/else statement`允许您的程序根据某些条件决定执行哪些代码。就像在您的代码中一样，您有两个代码块，第一个是：

```
omega <- 2*pi/R # pr is period for one rotation
Radi <- (G*M/omega^3)(1/3)
print(Radi) 
```

*仅*当某些条件为真时才要执行`R == 98`，否则您将执行另一个代码块。

`for statement`当您想多次重复执行一段代码时使用。假设您要打印来自 的数字，写... 100 次`1-100`是不可行的！`print(1)` `print(2)`

你用一个简单的`for`循环来做到这一点，例如

```
for(i in 1:100){
   print(i)
} 
```

# jenkins - xcode slave 现在报告 HTTP 响应代码 400

> ID：14823137
> 
> 赞同：1
> 
> 时间：2013-02-11T23:51:05.687
> 
> 标签：jenkins, xcodebuild, cloudbees

在通过 CloudBees 上的 java -jar jenkins-cli.jar 执行我的 xcode slave 之前从未遇到过问题。我在控制台窗口中收到以下错误响应

```
WILs-MacBook-Pro:tmp WPANNELL$ java -jar jenkins-cli.jar -s https://ventana.ci.cloudbees.com -i ~/.ssh/id_rsa customer-managed-slave -fsroot ~/jenkins -labels xcode -executors 4 -name mobile-slave

Enter passphrase for /Users/WPANNELL/.ssh/id_rsa:

Exception in thread "main" java.io.IOException: Server returned HTTP response code: 400 for URL: https://ventana.ci.cloudbees.com/cli
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at hudson.cli.FullDuplexHttpStream.<init>(FullDuplexHttpStream.java:77)
    at hudson.cli.CLI.connectViaHttp(CLI.java:155)
    at hudson.cli.CLI.<init>(CLI.java:139)
    at hudson.cli.CLIConnectionFactory.connect(CLIConnectionFactory.java:68)
    at hudson.cli.CLI._main(CLI.java:438)
    at hudson.cli.CLI.main(CLI.java:373)
WILs-MacBook-Pro:tmp WPANNELL$ 
```

你以前见过这样的回应吗？

# html - 在 css 中使用文本溢出

> ID：14823142
> 
> 赞同：1
> 
> 时间：2013-02-11T23:51:30.620
> 
> 标签：html, css

```
<div id="wrap">
    <p style="text-overflow:ellipsis;width:100%;"> Pope Benedict XVI becomes the first pontiff to resign in nearly 600 years, saying his health is deteriorating.</p>
</div> 
```

这是html。

当它的大小超过其容器的大小时，我想制作一个以 ... 结尾的文本。我从[这个](http://www.quirksmode.org/css/textoverflow.html)例子中学到了，但它对我不起作用。[我创建了一个小提琴供您在这里](http://jsfiddle.net/Borutf/BTCeY/3/)尝试。

当文本超过大小时，我想实际有多行，然后以...结尾。那可能吗？无论如何，我只有一条线有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:56:26.713

您需要将`white-space`&`overflow`样式放在 上`<p>`，而不是上`<div>`（实际上，您只需要将`overflow`in 移入，但最好将它们放在一个类中而不是分开，因为它们在这种情况下会一起出现）：

```
#wrap {
    width: 200px;
    background-color: red;
}

.ellipsis-overflow {
    text-overflow: ellipsis;
    width: 100%;   
    white-space: nowrap;
    overflow: hidden;
} 
```

```
<div id="wrap">
    <p class="ellipsis-overflow"> Pope Benedict XVI becomes the first pontiff to resign in nearly 600 years, saying his health is deteriorating.</p>
</div> 
```

看到它[在这里工作](http://jsfiddle.net/Lp7nU/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:56:47.920

如果您删除 P 标签，它将起作用，或者将您的样式放在 P 标签上。

[http://jsfiddle.net/BTCeY/11/](http://jsfiddle.net/BTCeY/11/)

```
<div id="wrap">
    Pope Benedict XVI becomes the first pontiff to resign in nearly 600 years, saying his health is deteriorating. Pope Benedict XVI becomes the first pontiff to resign in nearly 600 years, saying his health is deteriorating.
</div>

#wrap{
    width:200px;
    height: 200px;
    background-color:red;
    overflow:hidden;
    text-overflow: ellipsis;
    white-space:nowrap;
    padding: 20px;
} 
```

# android - Android SearchDialog - 禁用拼写检查/建议？

> ID：14823144
> 
> 赞同：2
> 
> 时间：2013-02-11T23:51:42.023
> 
> 标签：android, android-searchmanager

我在我的 Android 应用程序中使用[SearchDialog 。](http://developer.android.com/guide/topics/search/search-dialog.html#SearchDialog "搜索对话框")有没有办法强制禁用自动完成/拼写检查/建议？我的搜索确实不需要它——我的用户将要搜索的大多数词都不存在于字典中。

我在 google 或 stackoverflow 上找不到答案。

在我的 AndroidManifest.xml 中：

```
<activity
    android:name=".MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

    <meta-data
        android:name="android.app.searchable"
        android:resource="@xml/searchable" />
</activity> 
```

然后我打电话`onSearchRequested()`

# php - 如何在站点范围内应用配置文件？

> ID：14823146
> 
> 赞同：0
> 
> 时间：2013-02-11T23:51:51.980
> 
> 标签：php, web, configuration-files

我正在修改一个网站，我想为其添加一个配置文件，以便在将网站移动到另一台服务器时，我只需要更改一次数据库信息等环境参数。但我不知道如何为整个站点应用配置文件。我尝试使用 include_once() 并使用关键字 global 将其设为全局，但它仅适用于当前文件。如果我不使用 define() 将这些参数设为常量，还有其他方法可以实现吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:04:08.513

您可以创建一个类`Config`并将配置参数存储为[Class Constants](http://php.net/manual/en/language.oop5.constants.php)。然后在你需要的任何地方包含这个类，或者使用[Autoload it](http://php.net/manual/en/language.oop5.autoload.php)。

```
class Config {
    const databaseUsername = "user123";
    const databasePassword = "pass456";
}

echo Config::databaseUsername;
echo Config::databasePassword; 
```

但根据我的经验，`define()`效果很好，除非您需要存储更复杂的数据类型（例如数组）。

为避免在任何地方包含配置文件，您可以`auto_prepend_file`在[PHP.ini](http://php.net/manual/en/ini.core.php)中进行设置，但我个人认为此解决方案晦涩难懂，因为对于其他开发您的代码的开发人员来说，自动包含 PHP 文件并不明显。

# list - Prolog-将列表与列表列表相乘

> ID：14823147
> 
> 赞同：1
> 
> 时间：2013-02-11T23:51:55.973
> 
> 标签：list, prolog, multiplication

我正在尝试使用这两个谓词来模拟矩阵与向量的乘积：

```
eva([], [], []).
eva([A|A1], [W], [Res|R1]) :-
    vectormultiplication(A, W, Res),
    eva(A1, W, R1).

vectormultiplication([A], [W], [A*W]).
vectormultiplication([A|A1], [W|W1], [A*W|Out1]) :-
    vectormultiplication(A1, W1, Out1). 
```

其中`[A|A1]`in eva 是矩阵（或列表列表），`[W]`是向量（列表），并且`[Res|R1]`是结果乘积。`vectormultiplication`应该将列表中的每个列表与向量相乘`W`。然而，这种策略只会产生错误的反应。有什么明显的地方我做错了，阻止我得到想要的产品吗？我目前正在使用 SWI Prolog 5.10 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:56:32.730

嗯，你的第一个问题是你认为自己`A*W`会做任何事情。在 Prolog 中，这只是创建表达式，与or`A*W`没有区别，没有涉及，不会发生实际的算术归约。这是我一眼就看到的唯一真正的问题。`*(A,W)``foo(A, W)``is/2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:54:25.393

除了 Daniel (+1) 证明的以外，您还有 2 个其他问题：here a cleaned source

```
eva([], _, []).  % here [] was wrong
eva([A|A1], W, [Res|R1]) :- % here [W] was wrong
    vectormultiplication(A, W, Res),
    eva(A1, W, R1).

vectormultiplication([A], [W], [M]) :-
    M is A*W.
vectormultiplication([A|A1], [W|W1], [M|Out1]) :-
    M is A*W,
    vectormultiplication(A1, W1, Out1). 
```

测试：

```
?- eva([[1,2],[3,5]],[5,6],R).
R = [[5, 12], [15, 30]] 
```

处理列表时，如果可用，值得使用[maplist](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29)

```
eva(A, W, R) :-
    maplist(vectormultiplication1(W), A, R).

vectormultiplication1(W, A, M) :-
    maplist(mult, A, W, M).

mult(A, W, M) :-
    M is A*W. 
```

注意我改变了vectormultiplication1的参数顺序，因为在那个循环中向量是一个“常数”，并且maplist将参数附加到“展开”。

# php - 未在缓存视图上添加面包屑

> ID：14823148
> 
> 赞同：8
> 
> 时间：2013-02-11T23:52:14.143
> 
> 标签：php, cakephp, caching, breadcrumbs, cakephp-2.3

在我的布局 default.ctp 我有

```
<!--nocache-->
  <?php echo $this->Html->getCrumbs(' / ', 'Home'); ?>
<!--/nocache--> 
```

在一个名为 rules.cpt 的视图中，我有

```
<!--nocache--><?php $this->Html->addCrumb('Rules', '/rules'); ?><!--/nocache--> 
```

当第一次打开（未缓存的）视图时，面包屑会根据需要呈现。对于每一个额外的（缓存的）渲染，只会`Home`显示。

从控制器中删除缓存时

```
// public $cacheAction = array('home' => 120, 'rules'  => 36000); 
```

一切正常。

为什么不`addCrumb()`叫？我测试添加`<?php echo time(); ?>`到相同`nocache`的工作块（即在每个页面渲染时调用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:34:30.677

问题来源似乎是拨打电话的顺序。

在我的初始版本`<?php echo $this->Html->getCrumbs(' / ', 'Home'); ?>`中`<?php $this->Html->addCrumb('Rules', '/rules'); ?>`，只要视图没有被缓存，就可以正常工作。

一旦它们被缓存在只有作品`addCrumb`被调用**之前** `getCrumbs`。

这只是部分回答了我的问题。因为`getCrumbs`在我的布局中使用，`.ctp`所以无法更改顺序。

*我将此作为答案而不是作为我的问题的注释发布，因此没有人会获得我在问题中已经写过的东西的赏金；）如果您可以为剩余的问题提供解决方案或知道这是否是 Cake 中的错误，我很高兴为您提供赏金。*

# java - 将 Lucene CharArraySet 转换为字符串集的最优雅的方法是什么？

> ID：14823153
> 
> 赞同：0
> 
> 时间：2013-02-11T23:52:44.237
> 
> 标签：java, lucene

我正在尝试从 Lucene 4.0 中检索法语停用词列表。唯一可用的方法是`FrenchAnalyzer.getDefaultStopSet()`返回一个 CharArraySet。我需要将其转换为字符串集。

我快速而肮脏的工作代码如下所示：

```
Set<String> stopWords = new HashSet<String>();
for (String stopWord : FrenchAnalyzer.getDefaultStopSet().toString().split(", ")) {
    stopWords.add(stopWord);
}; 
```

并返回：

```
[eues, serais, fûtes, serait, eussions, est, étant, pour, avez, on, avions, ceci, serez, avec, moi, ou, eue, mon, son, eussiez, aurez, notre, nos, avais, avait, soi, une, seraient, eûmes, aurais, aurait, ait, fûmes, du, eusse, étées, serions, des, aurions, [lui, fût, seront, sois, seriez, serons, soit, eût, aie, avons, ces, cet, de, eut, eus, ma, me, eusses, furent, eux, fus, fut, eu, leurs, d, ayez, les, aviez, c, n, auront, l, aurons, m, j, un, fussiez, elle, nous, t, eûtes, tu, s, soyez, ne, sans, en, et, es, y, étée, même, seras, cette, auraient, sommes, te, aux, quels, soyons, êtes, étais, quelles, était, étés, celà , leur, aies, ta, serai, fusse, fussions, auras, fussent, votre, se, auriez, aurai, le, étiez, sa, ce, tes, été, ses, toi, vous, la], sera, aient, par, étions, ici, pas, sur, avaient, ayant, ont, mes, quelle, étaient, ton, que, qu, eurent, vos, qui, fusses, mais, as, dans, il, à, au, je, ai, sont, quel, aura, soient, suis, ayons, ils, eussent] 
```

我尝试使用迭代器：

```
Iterator iter = FrenchAnalyzer.getDefaultStopSet().iterator();
while(iter.hasNext()) {
    Object stopWord = iter.next();
    stopWords.add(stopWord.toString());
} 
```

但它返回一个加密集：

```
[[C@2fb3f8f6, [C@464c4975, [C@6fc5f743, [C@5705b99f, [C@26ee7a14, [C@5a9e29fb, [C@b41b571, [C@47315d34, [C@3e110003, [C@210a6ae2, [C@82a6f16, [C@70cb6009, [C@575fadcf, [C@1342a80d, [C@7f09fd93, [C@58ecb281, [C@1a84da23, [C@165973ea, [C@4ac9131c, [C@6fb000e7, [C@34fbb7cb, [C@603b1d04, [C@630045eb, [C@159b5217, [C@5975d6ab, [C@ac980c9, [C@a94884d, [C@5557c2bd, [C@16ba8602, [C@1b016632, [C@36b8bef7, [C@744a6cbf, [C@1c93d6bc, [C@509df6f1, [C@7d26f75b, [C@80d3d6f, [C@2b76e552, [C@7825d2b2, [C@3c1d332b, [C@38dda25b, [C@6cb8, [C@7f2ad19e, [C@5328f6ee, [C@51b48197, [C@4e17e4ca, [C@2acdb06e, [C@32ef2c60, [C@f01a1e, [C@5e7808b9, [C@2a9df354, [C@2b275d39, [C@b6e39f, [C@46b8c8e6, [C@36ff057f, [C@7290cb03, [C@16bdb503, [C@288051, [C@502cb49d, [C@5a5e179a, [C@50c4fe76, [C@4229ab3e, [C@266bade9, [C@45d64c37, [C@5ef4f44a, [C@29c56c60, [C@6719dc16, [C@35549f94, [C@44b01d43, [C@5ece2187, [C@3f77b3cd, [C@6766afb3, [C@596e1fb1, [C@76f8968f, [C@14d6a05e, [C@6ef137d, [C@2087c268, [C@67d225a7, [C@7b2be1bd, [C@79df8b99, [C@2dec8909, [C@3b835282, [C@4bbd7848, [C@423e5d1, [C@76497934, [C@48ee22f7, [C@4ed1e89e, [C@19e3118a, [C@851052d, [C@54281d4b, [C@1bbb60c3, [C@1f4384c2, [C@21a80a69, [C@2d5253d5, [C@4ce32802, [C@939b78e, [C@79a5f739, [C@1d807ca8, [C@2393385d, [C@79de256f, [C@c0b76fa, [C@2abe0e27, [C@604e280c, [C@2fcac6db, [C@e4ac00c, [C@23d256fa, [C@38b5dac4, [C@2b2d96f2, [C@3a6ac461, [C@6910fe28, [C@488e32e7, [C@2adb1d4, [C@676bd8ea, [C@32bf7190, [C@2c41d05d, [C@509f5011, [C@a39ab89, [C@39e87719, [C@332611a7, [C@1572e449, [C@418c56d, [C@78dc6a77, [C@25fa1bb6, [C@20c1f10e, [C@7ad81784, [C@6513cf0, [C@29e97f9f, [C@9c0ec97, [C@2b5ac3c9, [C@2d342ba4, [C@4a8c1dd9, [C@1d3c468a, [C@3782da3d, [C@25595f51, [C@4d865b28, [C@4c5e176f, [C@15a62c31, [C@1cb8deef, [C@d8d9850, [C@380e28b9, [C@7df17e77, [C@3da99561, [C@2df6df4c, [C@2efb56b1, [C@68e6ff0d, [C@33010058, [C@69945ce, [C@53ebd75b, [C@3d9360e2, [C@351e1e67, [C@2705d88a, [C@2993a66f, [C@e80d1ff, [C@52c05d3b, [C@3a64c34e, [C@6bdab91, [C@4ce2cb55, [C@77fddc31, [C@1be1a408, [C@20b9b538, [C@43462851, [C@30ec4a87, [C@4b0ab323, [C@74b23210]] 
```

类的 Javadoc：[FrenchAnalyzer](https://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/all/org/apache/lucene/analysis/fr/FrenchAnalyzer.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:01:31.903

尝试这个：

```
Iterator iter = FrenchAnalyzer.getDefaultStopSet().iterator();
while(iter.hasNext()) {
    char[] stopWord = (char[]) iter.next();
    stopWords.add(new String (stopWord));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:02:12.210

看起来该方法返回`Set<char[]>`，所以你应该做的第一件事是输入你的迭代器，然后从 char 数组构建一个 String 。使用 foreach 循环也可以简化您的代码：

一个简单的实现是：

```
for (char[] chars : (Set<char[]>)FrenchAnalyzer.getDefaultStopSet()) {
    stopWords.add(new String(chars, "UTF-8"));
} 
```

# performance - 从 AVL 树中获取中位数？

> ID：14823157
> 
> 赞同：4
> 
> 时间：2013-02-11T23:53:04.760
> 
> 标签：performance, algorithm, data-structures, median, avl-tree

如果您有 AVL 树，从中获取中位数的最佳方法是什么？中位数将被定义为排序列表中索引为 ceil(n/2)（索引从 1 开始）的元素。

所以如果列表是

```
1 3 5 7 8 
```

中位数是 5。如果列表是

1 3 5 7 8 10

中位数为 5。

如果可以扩充树，我认为最好让每个节点都知道子树的大小（节点数），（即1 + left.size + right.size）。使用这个，我能想到的最好的方法是使中位数搜索 O(lg n) 时间，因为您可以通过比较索引来遍历。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-22T18:08:21.137

如果您需要优化中值查询，则增强 AVL 树以存储子树大小通常是这里的最佳方法。它需要时间 O(log n)，非常快。

如果您要计算中位数很多次，您可能会使用增广树并缓存中位数，以便您可以在 O(1) 时间内读取它。每次进行插入或删除时，您可能需要重新计算时间 O(log n) 的中位数，这会稍微减慢速度，但不会影响渐近成本。

另一种选择是将双向链表通过树中的节点串接，以便您可以在恒定时间内从节点导航到其后继或前任。如果你这样做，那么你可以存储一个指向中间元素的指针，然后在插入或删除时，根据需要将指针向左或向右移动。如果您删除中位数本身，您可以随意向左或向右移动指针。这不需要任何扩充并且可能会更快一些，但它会在每个节点中添加两个额外的指针。

希望这可以帮助！

# java - Windows 上的 Java Unicode 问题

> ID：14823160
> 
> 赞同：0
> 
> 时间：2013-02-11T23:53:26.797
> 
> 标签：java, windows, netbeans, unicode, codepages

当我在 Netbeans 中运行我的应用程序时，一切正常 - 我可以读/写 unicode 文本和文件名，但是当我通过双击或使用 java -jar test.jar 运行 jar 时，我只会得到奇怪的符号......

这是一个已知的问题？我使用 jdk 1.7 但用它构建 1.6 字节代码...

在此先感谢您的帮助：D

编辑：我不是在谈论标准输出 - 该应用程序读取和写入文件并具有 GUI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:25:17.530

如果我从终端 System.getProperty("file.encoding") 运行应用程序，则会输出 cp152，但如果我从 Netbeans 运行它，则会产生 UTF-8。这个： java -Dfile.encoding=UTF-8 -jar XY.jar 解决了我的问题，但我不喜欢这个解决方案......

# open-source - 如果我的项目包含其他开源库，我如何使我的项目开源？

> ID：14823162
> 
> 赞同：-1
> 
> 时间：2013-02-11T23:53:36.453
> 
> 标签：open-source, licensing

我想发布一个软件项目，本质上是一个网站，然后把它放到 GitHub 上。我使用了几个开源库 (PHP) 来创建这个网站。如何提供对其他库的正确归属？

我的目标是邀请其他开发人员为该项目做出贡献，修改代码以供自己使用，从他们自己的域运行修改后的网站，并理想地提高所有人的价值和功能。我不希望其他开发人员出售代码，也不出售他们的代码版本。我的项目使用什么许可证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:29:34.343

我认为您需要执行以下操作：

*   将您的源代码上传到在线公共存储库，并在您的源中添加一个包含许可证信息的 license.txt 文件。

*   您可以在您的网站上为您的源代码中使用的第三方脚本提供额外的免责声明/信用。

关于选择的许可证，我认为这取决于第三方脚本许可证。

例如：如果您使用的第三方脚本是在 GPL 许可下发布的，那么您也必须在 GPL 下发布它，但我并不是说所有许可都需要这个。这正是 GPL 许可证所要求的。

[GPL](http://en.wikipedia.org/wiki/GNU_General_Public_License)是最常见的许可证。

但是您可能也想看看[知识共享许可证](http://en.wikipedia.org/wiki/Creative_Commons_licenses)。

编辑：- 我刚刚发现了一些可以帮助您选择许可证的东西，请参见下面的链接： [http ://creativecommons.org/choose/](http://creativecommons.org/choose/)

编辑＃2：-根据我的研究和知识共享。[不建议为软件使用 CC 许可证](http://wiki.creativecommons.org/Frequently_Asked_Questions#Can_I_apply_a_Creative_Commons_license_to_software.3F)。

* * *

## 有用的网址

[http://opensource.org/faq](http://opensource.org/faq)

[http://www.fsf.org/](http://www.fsf.org/)

[http://www.gnu.org/licenses/gpl-faq.html](http://www.gnu.org/licenses/gpl-faq.html)

[http://www.gnu.org/licenses/license-list.html](http://www.gnu.org/licenses/license-list.html)

[http://www.gnu.org/licenses/gpl-howto.html](http://www.gnu.org/licenses/gpl-howto.html)

# asp.net - ASP.NET 托管 WCF 服务，需要增加 MaxStringContentLength，但是怎么做呢？

> ID：14823164
> 
> 赞同：0
> 
> 时间：2013-02-11T23:53:42.333
> 
> 标签：asp.net, wcf, maxstringcontentlength

我的 ASP.NET 服务器正在提供一组由我的 WPF 客户端使用的 WCF 服务。一切正常，直到字符串字段的长度超过 8K。现在这会在 ASP.NET 服务器上生成以下异常...

> 反序列化 Project.ModelType 类型的对象时出错。读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额。

我已在 WPF app.config 上将*MaxStringContentLength*的值增加到 64K，但这并没有解决问题。所以我想我也需要在 ASP.NET 端增加这个值。但是我在 web.config 中没有任何值可以更改！这是我的 web.config 来显示这个......

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms name=".ASPXFTOAUTH"
             timeout="10"
             slidingExpiration="true"
             cookieless="UseCookies"/>
    </authentication>

    <membership>
      <providers>
        <clear/>
      </providers>
    </membership>

    <customErrors defaultRedirect="~/Error.htm" mode="RemoteOnly">
      <error statusCode="404" redirect="~/404.aspx" />
    </customErrors>
  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
                               multipleSiteBindingsEnabled="true" />
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

那么如何更新服务器以指示更高的*MaxStringContentLength*值？我的服务的 app.config 看起来像这样......

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_IAccess" closeTimeout="00:01:00"
               openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
               allowCookies="false" bypassProxyOnLocal="false"
               hostNameComparisonMode="StrongWildcard"
               maxBufferSize="131072" maxBufferPoolSize="524288" maxReceivedMessageSize="131072"
               messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
               useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="65536" maxArrayLength="16384"
                      maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <security mode="None">
          <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
          <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>

  <client>
    <endpoint binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_IAccess" 
              contract="AccessService.IAccess"
              name="BasicHttpBinding_IAccess" />
  </client>
</system.serviceModel> 
```

有任何想法吗？

**更新：**

我的服务是通过有一个类“Access.svc”来定义的

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Access : IAccess
{
    // ...IAccess method implementations
} 
```

...具有以下标记...

```
<%@ ServiceHost Language="C#" Debug="true" 
                Service="Ecotech.AMS.WebServer.Access" 
                CodeBehind="Access.svc.cs" %> 
```

...如评论中所述，web.config 中的服务没有任何具体内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:38:24.670

尝试通过项目的右键菜单单击“添加服务引用”。这样做会将必要的配置信息添加到您的 web.config 文件中。

完成此操作后，您可以`maxReceivedMessageSize`在绑定上设置属性。这样做将最准确地反映您在 WCF 服务方面所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:58:58.187

您需要处理的地方是web config，您需要添加可以设置数据大小的服务行为。比如像这样，

```
<behaviors>
      <serviceBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>

      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors> 
```

如果这不起作用，请在此处发布您的网络配置。希望对您有所帮助。

# ruby - RubyMine 与 rbenv gemset

> ID：14823168
> 
> 赞同：1
> 
> 时间：2013-02-11T23:54:01.210
> 
> 标签：ruby, rubymine, rbenv, rbenv-gemset

RubyMine 处理 rvm gemset 功能，但经过一些研究后看起来它不适用于 rbenv gemset 插件。

我是否应该使用相同的*~/.gemrc*文件来指定 GEM PATH 以指示 rbenv gemset？还有其他方法可以使用 RubyMine 和 rbenv gemsets？还是在使用 RubyMine 时应该安装其他 gem？最佳做法是什么？

感谢您提供有关此问题的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:41:43.140

请投票支持此功能请求：

*   [RUBY-12839](http://youtrack.jetbrains.com/issue/RUBY-12839)支持 rbenv-gemset

# yaml - 将动态内容传递给 Middleman 中的模板

> ID：14823169
> 
> 赞同：4
> 
> 时间：2013-02-11T23:54:09.387
> 
> 标签：yaml, middleman

我正在使用 Middleman 构建一个静态站点，其中包含所有客户最近项目的投资组合部分。作品集部分将以 3 X 3 画廊的方式显示项目缩略图，单击时，将在灯箱中打开其对应的 html 页面。

灯箱内页面的布局是相同的，所以不是标记每个单独的页面，我认为有一种方法可以让 Middleman 使用 [a link.

这是我的 config.rb 文件中的内容

```
###
# Page options, layouts, aliases and proxies
###

# A path which all have the same layout
with_layout :popup do
  page "/projects/*"
end

# Proxy (fake) files
# page "/this-page-has-no-template.html", :proxy => "/template-file.html" do
#   @which_fake_page = "Rendering a fake page with a variable"
# end
data.projects.details.each do |pd|
  proxy "/projects/#{pd[:client_name]}.html", "/projects/template.html", locals: { project: pd }, ignore: true
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T11:34:02.857

好的，经过一番挖掘，我发现了下面的两篇文章，它们帮助我理解了动态页面在中间人中的工作方式。（不幸的是，没有很多文档，动态页面的中间人示例非常基础）

[http://benfrain.com/understanding-middleman-the-static-site-generator-for-faster-prototyping/](http://benfrain.com/understanding-middleman-the-static-site-generator-for-faster-prototyping/) [http://forum.middlemanapp.com/discussion/134/best-way-to-use-yaml-相同的html，但参数驱动的数据固定/p1](http://forum.middlemanapp.com/discussion/134/best-way-to-use-yaml-same-html-but-parameter-driven-data-fixed/p1)

我的解决方案...

data/projects.yml（包含项目详细信息）

```
details:
  - client: "Company X"
    title: "Company X Event"
    video_url: ""
    logo: 
      - "logo_companyx.gif"
    image_path: "/img/projects/companyx"
    total_images: 10
    content: "<p>Blah blah blah</p>"
    responsibilities: 
      "<li>Something</li>
      <li>Some task</li>" 
```

配置.rb：

```
data.projects.details.each do |pd|
    proxy "/projects/#{pd[:client]}.html", "/projects/template.html", :layout => false, :locals => { :project => pd }, :ignore => true
end 
```

上面代码片段的技巧是通过代理使用 locals 将整个项目数据对象传递给模板，并将布局设置为 false，这样它就不会继承默认的站点布局（因为我 - 或者客户宁愿 - 想要显示这些在灯箱弹出窗口中）

该过程的最后一步是创建 /projects/template.html.erb（在源文件夹中），在模板顶部声明以下内容

```
<% p = locals[:project] %> 
```

这允许我输出 template.html.erb 中 p 对象的每个属性。

例如：

```
<%= p[:title] %> 
```

我希望这对某人有所帮助，因为我花了几天的时间在网上玩耍，并在网上搜索了很多例子或提示。

# javascript - Coffescript，类似 Jaml 的模板引擎

> ID：14823170
> 
> 赞同：0
> 
> 时间：2013-02-11T23:54:23.183
> 
> 标签：javascript, backbone.js, coffeescript, template-engine, jaml

我只是在为我的主干视图试验各种 javascript 模板引擎（客户端）......

我发现了这个旧项目：[https ://github.com/edspencer/jaml](https://github.com/edspencer/jaml)

这对我来说似乎很好，因为我不必像其他模板引擎（如把手或下划线..）那样使用长字符串块

问题是 Jaml 真的已经过时了，而且似乎没有继任者......

有人有新资源要分享吗？

和往常一样，我很抱歉我的英语不好：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:03:30.493

[Haml-coffee](https://github.com/netzpirat/haml-coffee)可能正是您想要的。它也适用于 Backbone。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:59:23.797

用于 javascript 的最常见的“haml 样式”模板引擎可能是[jade](http://jade-lang.com/)。

由于您是咖啡脚本的粉丝，您可能会感兴趣的另一个是[CoffeeKup](http://coffeekup.org/)。

# javascript - 测试字符串是否包含带有整数的括号

> ID：14823172
> 
> 赞同：3
> 
> 时间：2013-02-11T23:54:25.797
> 
> 标签：javascript, regex

我想测试javascript中的字符串是否包含带有整数的普通括号

```
var str="(12) this is a test";
var pat=/(([\d]+))/;
if (pat.test(str)) 
    alert("true"); 
```

工作正常，但当字符串看起来像这样时它也会返回 true

```
var str="12) test";
var str="(12 test"; 
```

这应该返回false。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T23:56:46.020

转义括号`\`：

```
/\([\d]+\)/.test(str); 
```

# ruby-on-rails - 不一致的rails gem错误

> ID：14823174
> 
> 赞同：1
> 
> 时间：2013-02-11T23:54:39.760
> 
> 标签：ruby-on-rails, rake

每次我运行 rake 命令或启动服务器（脚本/服务器）时，我都会收到 gem install 错误；

```
Missing these required gems:
  image_science  >= 0
  youtube_it  >= 0 
```

但是，如果我忽略这一点（安装了 gem）并重试，那么在第二次或第三次尝试时，它会正常工作，没有错误。

似乎可能有多个 rails 或 rake 安装，但`which rails`只显示 '/usr/bin/rails'`which rake`

我想知道我的应用是否可能在不同的地方有不同的要求？那可能吗？

Rails 版本是 2.3.15

**编辑**
更多输出

```
You're running:
  ruby 1.8.7.358 at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
  rubygems 1.8.24 at /Library/Ruby/Gems/1.8, /Users/<snip>/.gem/ruby/1.8,     /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8 
```

提前致谢。

# c# - TFS 2010 API：无法从 ProjectCollection 服务器获取 IBuildServer

> ID：14823175
> 
> 赞同：2
> 
> 时间：2013-02-11T23:54:45.570
> 
> 标签：c#, tfs, tfsbuild

我正在尝试推广现有的放置，并且需要在将放置文件夹部署到目标环境之前验证给定的内部版本名称/编号是否有效（状态和质量）。

基于这样的博客（[http://www.woodwardweb.com/dotnet/tfs_build_api_b.html](http://www.woodwardweb.com/dotnet/tfs_build_api_b.html)）我正在尝试像这样连接到我的构建服务器但没有成功：

```
string tfsProjectCollectionUrl = @"http://collectionServer:8080/tfs/collection";
var tfs = TeamFoundationServerFactory.GetServer(tfsProjectCollectionUrl); 
tfs.EnsureAuthenticated();

IBuildServer tfsBuildServer = tfs.GetService<IBuildServer>();
//tfsBuildServer == null 
```

我有两台服务器，Collection 和 Build。构建时的 TFS 管理控制台显示“为 collectionServer\collection 配置了构建服务”。不知道我在这里缺少什么。

* * *

更新：
我利用了我的 MSDN 支持资源，因为这有点时间紧迫，并通过将这些操作提取到外部程序集取得了一些进展。我获取收藏的方法似乎很好，只是住在 CodeActivity 本身并不快乐。现在，CodeActivity 调用此外部程序集并返回我的 dropPathToPromote 或如果不满足状态和质量条件则抛出异常。

这在测试工具工作流中运行良好，但在飞行中却不行。我在执行构建的前 6-7 秒内收到此错误：
`Could not load file or assembly 'MyTFSAPICallingAssembly.dll, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.`

新程序集包含在我的自定义程序集 VCS 文件夹中，以供构建控制器获取，代理临时文件夹使用这些 dll（所有外部程序集和我的自定义程序集）进行更新，新的构建定义呈现包含此 CodeActivity 的流程模板无一例外，并且引用我的根自定义程序集的其他构建定义执行没有失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:00:39.363

好吧，我觉得自己像个菜鸟。我放置 TFS API 代码的程序集上的平台被标记为“x86”，而调用 CodeActivity 程序集是“任何 CPU”。一旦修复，构建执行得很好。我仍然有一些辅助构建失败需要清理，但看起来我的问题已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:16:23.490

您应该从 projectcollection 获取服务

```
TfsTeamProjectCollection tfs = new TfsTeamProjectCollection(new Uri(@"http://collectionServer:8080/tfs/collection"));
IBuildServer buildServer = (IBuildServer)tfs.GetService(typeof(IBuildServer)); 
```

# c# - Ninject MVC 请求的上下文绑定

> ID：14823176
> 
> 赞同：3
> 
> 时间：2013-02-11T23:54:46.910
> 
> 标签：c#, dependency-injection, ninject

我有一个不寻常的情况，将服务注入 ASP.NET MVC 控制器。Controller 提供了一个单一的动作来渲染页面上的侧边栏菜单，并且注入到 Controller 中的服务是创建侧边栏内容的工厂。动作用`[ChildActionOnly]`属性修饰：侧边栏只能在渲染另一个动作时被渲染。

困难在于我想根据请求的页面（=控制器）注入侧栏工厂抽象的不同实例。以前，我使用一种抽象工厂来执行此操作，它使用控制器名称字符串来确定要使用哪个具体工厂实现的不优雅的实现；我现在已将其移至适当的抽象工厂，因此需要将工厂类型的选择移至其他地方。

我的 Ninject 绑定目前非常简单地定义为：

```
Kernel.Bind<ISideBarFactory>().To<FooSideBarFactory>().InRequestScope();
Kernel.Bind<ISideBarFactory>().To<DefaultSideBarFactory>().InRequestScope(); 
```

随着我添加更多控制器，我将添加更多第一行的实例。我希望看到这个工作的方式是：

*   `/foo/action`收到请求
    *   Ninject 绑定`ISideBarFactory`并`FooSideBarFactory`注入`SideBarController`
*   `/bar/action`收到请求
    *   Ninject 绑定`ISideBarFactory`并`BarSideBarFactory`注入`SideBarController`
*   `/baz/action`收到请求
    *   不`BazSideBarFactory`存在，所以 Ninject 绑定`ISideBarFactory`到默认实现`DefaultSideBarFactory`，并注入到`SideBarController`

我在[Contextual Binding](https://github.com/ninject/ninject/wiki/Contextual-Binding)上查阅了 Ninject wiki 页面，这似乎是我*原则上想要的*，但我还没有发现任何明显可以实现我的目标的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:03:30.360

您可以将读取路线数据与[Contextual-Binding 结合使用](https://github.com/ninject/ninject/wiki/Contextual-Binding)

**捆绑**

```
// default binding - used if none of the conditions is met
kernel.Bind<IService>()
    .To<DefaultService>()

kernel.Bind<IService>()
    .To<BasicService>()
    .When(x=> IsRouteValueDefined("controller", "Service"));

kernel.Bind<IService>()
    .To<ExtraService>()
    .When(x=> IsRouteValueDefined("controller", "ExtraService")); 
```

**`IsRouteValueDefined()`方法**

*当定义并指定`routeValue`路由键等于路由键的路由值或 is时返回 true `null`。*

```
public static bool IsRouteValueDefined(string routeKey, string routeValue)
{
    var mvcHanlder = (MvcHandler)HttpContext.Current.Handler;
    var routeValues = mvcHanlder.RequestContext.RouteData.Values;
    var containsRouteKey = routeValues.ContainsKey(routeKey);
    if (routeValue == null)
        return containsRouteKey;
    return containsRouteKey && routeValues[routeKey].ToString().ToUpper() == routeValue.ToUpper();
} 
```

# ruby-on-rails - 命名约定错误？

> ID：14823178
> 
> 赞同：2
> 
> 时间：2013-02-11T23:54:49.387
> 
> 标签：ruby-on-rails, unit-testing

我以前从未使用过单元测试，但只使用过 Rspec。所以也许这里有一些愚蠢的错误。

我有`CountriesController`：

```
class CountriesController < ApplicationController

  def create
    @country = Country.new(params[:country])

    respond_to do |format|
      if @country.save
        format.html { redirect_to(@country, :notice => 'Country was successfully created.') }
        format.xml  { render :xml => @country, :status => :created, :location => @country }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @country.errors, :status => :unprocessable_entity }
      end
    end
  end
end 
```

并对其进行测试`countries_controller_test.rb`：

```
class CountriesControllerTest < ActionController::TestCase
  should_not_respond_to_actions :new => :get, :destroy => :get

  setup do
    @country = countries(:one)
  end

  test "should create country" do
    assert_difference('Country.count') do
      post :create, :country => @country.attributes.merge({ :code => Time.now.to_s })
    end

    assert_redirected_to country_path(assigns(:country))
  end
  ...
end 
```

据我所知的命名约定，一切对我来说都很好，但我得到了一个错误：

```
1) Error:
test_should_create_country(CountriesControllerTest):
RuntimeError: @controller is nil: make sure you set it in your test's setup method. 
```

这里可能有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:03:21.383

测试的@controller 应该来自哪里？如果它是由 ActionController::TestCase 创建的，那么您可能想在自己的设置函数中调用超类的设置？

# python - 矢量化 numpy 函数可以使用缓冲区作为输出吗？

> ID：14823183
> 
> 赞同：3
> 
> 时间：2013-02-11T23:55:06.070
> 
> 标签：python, numpy

我可以获得一个 numpy 向量化函数来使用缓冲区对象作为结果，而不是创建一个由该对象返回的新数组吗？

我想做这样的事情：

```
fun = numpy.vectorize(lambda x: x + 1)
a = numpy.zeros((1, 10)
buf = numpy.zeros((1, 10)
fun(a, buf_obj = buf) 
```

与

```
fun = numpy.vectorize(lambda x: x + 1)
a = numpy.zeros((1, 10)
buf = fun(a) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:15:06.100

不是 for `vectorize`，但大多数 numpy 函数采用的`out`参数正是你想要的。

您要使用什么功能`numpy.vectorize`？ `vectorize`当您尝试“矢量化”计算时，几乎总是错误的解决方案。

在上面的示例中，如果您想就地执行操作，可以通过以下方式完成：

```
a = numpy.zeros((1, 10))
a += 1 
```

或者，如果你想有点冗长，但完全按照你的例子做：

```
a = numpy.zeros((1, 10))
buf = numpy.empty_like(a)
numpy.add(a, 1, out=buf) 
```

`numpy.vectorize`必须为数组中的每个元素调用一个 python 函数。因此，与对整个数组进行操作的 numpy 函数相比，它具有额外的开销。通常，当人们提到“向量化”表达式以获得加速时，他们指的是从基本 numpy 函数的构建块构建表达式，而不是使用`vectorize`（这肯定会令人困惑......）。

* * *

*编辑：*根据您的评论，`vectorize`确实适合您的用例！（除了安全/沙盒问题之外，编写“光栅计算器”是一个非常完美的用例。）

另一方面，[`numexpr`](http://code.google.com/p/numexpr/)如果您不介意额外的依赖，它可能更合适。

它更快并且需要一个`out`参数。

# cocoa-touch - UITableViewCell 内的 MKMapView

> ID：14823185
> 
> 赞同：5
> 
> 时间：2013-02-11T23:55:13.403
> 
> 标签：cocoa-touch, uitableview, mkmapview

我有一个带有 UITableViewCells 的 UITableView，其中包含一个 MKMapView。

问题：如果表格单元格被选中，然后移动地图，你会看到地图视图全是白色的，你只会看到“合法”标签。

有谁之前经历过这个吗？

![截屏](../Images/2be25198c17392d971c4f29fbfb12cbf.png)

这是整个代码：

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.table.backgroundColor = [UIColor clearColor];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return 5;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 70;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    MKMapView *map = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, 220, 70)];

    MKCoordinateSpan span = MKCoordinateSpanMake(0.01, 0.01);
    CLLocationCoordinate2D logCord = CLLocationCoordinate2DMake(47.606, -122.332);
    MKCoordinateRegion region = MKCoordinateRegionMake(logCord, span);
    [map setRegion:region animated:NO];

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"aaaa"];
    [cell.contentView addSubview:map];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:39:24.823

我有过这种经历。

在我的情况下，如果它的 tableView 或单元格具有 backgroundColor 并且其单元格具有灰色或蓝色选择样式并且该单元格通过出队回收，则地图会变成这样的白色。

我认为地图不会像这样变白，如果

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:08:21.400

我也经历过这种情况。

在推送/弹出另一个详细视图控制器后触摸我的地图时，我的地图有白色背景。TableView 还没有配置颜色/背景，一切都是默认的。

```
 cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

……确实有帮助。

# powershell - 如何在 Powershell 中更改我的类型的单个成员的格式？

> ID：14823186
> 
> 赞同：1
> 
> 时间：2013-02-11T23:55:21.023
> 
> 标签：powershell, powershell-3.0

我有一组 C# 类，每个类都有一个或两个 ulong 成员。Powershell 默认将这些输出为 10 基数，但我想将它们显示为带有 0x 前缀的十六进制数字。我试图弄清楚如何使用 .ps1xml 文件来做到这一点。

我尝试的第一件事是添加一个 types.ps1xml 文件，该文件添加一个与我要替换的同名的脚本属性。如果我给它一个不同的名称（即添加一个新成员），但如果我使用与现有名称相同的名称，则会使 ISE 崩溃，如下所示：

```
<Members>
    <ScriptProperty>
        <Name>ForeignId</Name>
        <GetScriptBlock>'0x{0:x16}' -f $this.ForeignId</GetScriptBlock>
    </ScriptProperty>      
</Members> 
```

我认为这是一个无限递归问题。

也许我真正想做的是改变格式！所以我开始考虑制作一个 format.ps1xml 并使用`<FormatString>`，但现在看来我需要完全定义格式。我必须指定我想要的每个成员，并且我必须为我可能想要的所有视图执行此操作。嗯，这是很多工作..

我只想更改单个成员的格式而不添加新成员。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:05:09.977

几天前碰到这个。也许有用？

[http://poshoholic.com/2008/07/05/essential-powershell-define-default-properties-for-custom-objects/](http://poshoholic.com/2008/07/05/essential-powershell-define-default-properties-for-custom-objects/)

# python - 如何将 wxPython 应用程序转换为作为无头 unix 作业运行？

> ID：14823192
> 
> 赞同：1
> 
> 时间：2013-02-11T23:55:45.210
> 
> 标签：python, linux, wxwidgets

我目前在 linux 机器上运行 2.8.9.1 的 wx。

我正在开发的应用程序最初是为在 MS Windows 上运行而编写的。我们计划将部分核心逻辑移植到 linux 并作为进程运行。

问题是linux盒子是无头的。我们不会有 X-windows 环境。但是现有的代码库是以与 wx 层紧密耦合的方式编写的。

例如，我有几个类是 wx.EvtHandler 的子类

我可能可以一个一个地重写它们，但它确实不理想。

在新的 wx Pheonix 中，有一个 [AppConsole 类](http://wxpython.org/Phoenix/docs/html/AppConsole.html#appconsole)似乎能够在没有 X-Windows 的情况下启动事件循环。但是它在我的本地版本的 wx 中不可用。

最终目标是**在 cron 作业中运行代码**

我基本上是在寻找一些关于如何解决这个问题的建议/指示。最好避免尽可能多的重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:03:43.550

一种方法是使用本地显示器。[`Ssh`](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1)进入您的服务器，并可选择`-X`将显示重定向到您的工作站

```
ssh -X server 
```

然后在您的服务器上启动应用程序，它将自动使用您工作站的显示器。

对于 Windows，例如存在[Xming](http://de.wikipedia.org/wiki/Xming)或[Cygwin](http://de.wikipedia.org/wiki/Cygwin)。

作为替代方案，您可以使用[`Xvfb`](http://en.wikipedia.org/wiki/Xvfb)提供无头 X 服务器。然后，您可以使用`xvfb-run`as启动您的应用程序

```
xvfb-run my_wx_application 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:56:15.973

事实证明，重写并不算太糟糕。

我的代码中只有三个对 wx 对象的依赖

1) 子类化 wx.EvtHandler

2) wx.CallLater

3) wx.CallAfter

所以第一种情况需要重新实现

另一个可以很容易地用threading.Timer替换。

# silverlight - Silverlight Telerik RadCombobox 内 RadGridView 绑定问题

> ID：14823197
> 
> 赞同：0
> 
> 时间：2013-02-11T23:56:09.447
> 
> 标签：silverlight, telerik

我在 radgridview 的列中绑定了一个可编辑的（您可以输入它以将项目添加到选项列表中）radcombobox。它不会引发绑定错误，但不会更新绑定属性（Model.Remarks）

这是课程

```
 public class NotamRemarkList : List<string>
    {
        public NotamRemarkList()
        {
            Add("Precision approaches are down; higher weather minimums apply.");
            Add("Due to runway closure, approaches available have higher minimums.");
            Add("All approaches are down; weather must be VFR.");
            Add("Long runway is closed; issue if the other runways are wet.");
            Add("Runway shortened; issue if wet.");
            Add("Airport will be closed at the time we are scheduled in.");
            Add("Runway lights are inoperative; night flights prohibited.");
        }

    }

 public class NotamViewModel
     { 
        [DataMember]
         public string NewStatus { get; set; }

        [DataMember]
         public Notam Model { get; set; }

        [DataMember]
         public string NotamGroup { get; set; }

        [DataMember]
         public int NotamCount { get; set; }

        [DataMember]
         public DateTime? EarliestNotamDepartureTime { get; set; } // min_dep_datetime

        [DataMember]
         public string RadioButtonGroupName { get; set; }
     }

public class Notam

 {         
         [DataMember]
         public string Remarks { get; set; }

         [DataMember]
         public string TripNumber { get; set; } 

        [DataMember]
         public string ArrivalDeparture { get; set; } 
} 
```

这是我为该列尝试的 xaml - 第一个使用单元格模板，第二个尝试在列中执行所有操作

```
 <telerik:GridViewDataColumn Header="Remarks" IsFilterable="False" IsSortable="False" IsReadOnly="False" Width="430">
                    <telerik:GridViewDataColumn.CellTemplate>
                        <DataTemplate>
                            <telerik:RadComboBox SelectedValue="{Binding Model.Remarks, Mode=TwoWay}" ItemsSource="{StaticResource NotamRemarkList}" IsEditable="True"/>
                        </DataTemplate>
                    </telerik:GridViewDataColumn.CellTemplate>
                </telerik:GridViewDataColumn>

                <telerik:GridViewComboBoxColumn SelectedValueMemberPath="Model.Remarks" UniqueName="colRemarks"  IsComboBoxEditable="true" IsFilterable="False" IsSortable="False"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:16:40.477

```
 public class Notam:INotifyPropertyChanged
{
    private string _remarks;
    [DataMember]
    public string Remarks
    {
     get {return _remarks;}
      set{
          _remarks=value ;
          if (PropertyChanged != null)
              PropertyChanged(this, new PropertyChangedEventArgs("Remarks"));
      }
}

    [DataMember]
    public string TripNumber { get; set; }

    [DataMember]
    public string ArrivalDeparture { get; set; }

    public event PropertyChangedEventHandler PropertyChanged;
} 

<telerik:RadComboBox SelectedValue="{Binding Model.Remarks, Mode=TwoWay}" SelectedValueMemberPath="Model.Remarks" ItemsSource="{StaticResource NotamRemarkList}" IsEditable="True"/> 
```

我希望这将有所帮助。

# jquery - jQuery 媒体查询：特定设备宽度上的条件函数（也适用于调整大小）

> ID：14823202
> 
> 赞同：3
> 
> 时间：2013-02-11T23:56:42.030
> 
> 标签：jquery, responsive-design, media-queries

我有一个流畅的网格布局。我需要一些列（不太必要——比如 Twitter 更新）在较小的分辨率上是“隐藏的”，在点击它的标题时是“显示的”。

这是我到目前为止所拥有的：

**HTML**

```
<div id="wrapper">

    <div class="toggle">
         <h2>Heading</h2>
         This content is visible always
    </div>

    <div class="toggle-small">
         <h2 class="toggle-small-heading">Heading</h2>
         <div class="toggle-small-content">
              This content is hidden on max-width 600px. You can reveal it by clicking the heading.
         </div>
    </div>

    <div class="toggle-small">
         <h2 class="toggle-small-heading">Heading</h2>
         <div class="toggle-small-content">
              This content is hidden on max-width 600px. You can reveal it by clicking the heading.
         </div>
    </div>

</div> 
```

**查询**

```
// D E F I N E   T H E   F U N C T I O N

function ToggleSmall () {
     // CONDITIONALS
    // Clickable heading
    var ToggleSmallVar = $('#wrapper').find('.toggle-small-heading');
    // Content to toggle
    var ToggleSmallCol = $('#wrapper').find('.toggle-small-content');
    // FUNCTION
    // Content to toggle - hide it to be shown on click
    $(ToggleSmallCol).addClass('none');
    // Toggle function
    $(ToggleSmallVar).click(function () {
        // Find col to toggle
        var ToggleSmallColTarget = $(this).closest('.toggle-small-section').find('.toggle-small-col'); 
                    // Toggle the DIV
        $(ToggleSmallColTarget).slideToggle('slow');
    });
}

// C A L L   T H E   F U N C T I O N

$(document).ready(function () {
if ($(window).width() < 681) {
    ToggleSmall();
}
}); 
```

它在加载时**工作**，但我尝试让它在窗口调整大小时“响应”工作：在小于 681 的分辨率上执行 ToggleSmall() 函数并在更大的分辨率上停止它。

我试图在“resize”事件上绑定函数（例如[jQuery 作为 resize 上的媒体查询](https://stackoverflow.com/questions/14369944/jquery-behave-like-media-queries-when-resizing-browser)），但由于某种原因，“切换”执行了 3-4 次（文档多次“准备好”？）。

我发现了一些其他的解决方案——主要是定义一个变量——但到目前为止都没有。我也是一个 jQuery 新手，所以也许我错过了一些东西。：） 有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T15:31:09.060

有人建议使用“计时器”事件侦听器来规范 javascript 的行为和处理

[来自Curt Howard 示例](http://www.venveo.com/articles/view/quick-tip-jquery-media-queries)的复制粘贴：

```
var delay = (function(){
    var timer = 0;
    return function(callback, ms){
        clearTimeout (timer);
        timer = setTimeout(callback, ms);
    };
})();

$(function() {
    var pause = 100;
    // will only process code within delay(function() { ... }) every 100ms.

    $(window).resize(function() {
        delay(function() {
            var width = $(window).width();
            if( width >= 768 && width <= 959 ) {
                // code for tablet view
            } else if( width >= 480 && width <= 767 ) {
                // code for mobile landscape
            } else if( width <= 479 ) {
                // code for mobile portrait
            }
        }, pause );
    });

    $(window).resize();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T00:42:20.047

如果您使用此功能`$(window).resize(function() {});`，则无需将其放在 document.ready 中。我要做的是尝试操作 CSS，因为无论如何，当它缩小时，你无法真正看到隐藏部分的动画。

这是js。

```
$(window).resize(function() {
var pageWidth = $(window).width(); 

    if( $(window).width()< 681){

        //call my function
        //myfunction();

    $('#styleSmaller').attr('href','../css/siteSMALLER.css');
    }
    }); 
```

然后你有你的链接`<head>`

```
 <link type="text/css" rel="stylesheet" href="" id="styleSmaller"/> 
```

# html - 在搜索表单上的某些浏览器上，搜索按钮被推到新行

> ID：14823209
> 
> 赞同：1
> 
> 时间：2013-02-11T23:56:55.003
> 
> 标签：html, css, vbulletin

特别是在手机和平​​板电脑上面临的问题是左上角未对齐的蓝色搜索图标。不知道如何解决这个问题。

**截屏**

![在此处输入图像描述](../Images/a3cc22efd682485e475314aeb7259bed.png)

居住：

[www.talkjesus.com](http://www.talkjesus.com)（在平板电脑或手机上查看，在桌面上工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:16:29.623

**在 main-rollup.css 中，将 css 类从**

```
.globalsearch input.textbox {
   height: 22px;
   width: 218px;
   border: none;
   font-size: 13px;
} 
```

**到**

```
.globalsearch input.textbox {
   height: 22px;
   width: 212px;
   border: none;
   font-size: 13px;
} 
```

注意文本框的缩短宽度。我相信它会将搜索按钮推到某些浏览器上的新行。

**或者，您可以像这样放置按钮：**

*   在表单上设置“位置：相对”css
*   设置“位置：绝对；右：0px；顶部：0px；” 在搜索按钮上
*   调整搜索按钮的“右”和“上”css，直到它位于正确的位置

# python - 获取曲线边缘闭合形状的近似顶点（用于计算质心和其他属性）

> ID：14823210
> 
> 赞同：2
> 
> 时间：2013-02-11T23:57:00.170
> 
> 标签：python, shapes, curve, polygons, centroid

我正在寻找具有弯曲边缘的二维封闭不规则形状的轮廓，然后计算（a）形状区域的重心（质心）和（b）形状*周长*的重心（即例如，紧紧缠绕在形状外部的电线的质心）。我对 Python 和 Matlab 的熟练程度达到了初学者的水平。

(a) 和 (b) 很容易给定多边形的顶点：多边形面积的质心由[此处的等式](http://en.wikipedia.org/wiki/Centroid#Centroid_of_polygon)给出，多边形周长的质心只是所有线段中点的平均值，由线加权段的长度。我已经编写了一些函数来做到这一点。

我遇到的麻烦是从我知道如何绘制带有弯曲边缘的封闭形状的任何方式中获取/近似这些顶点。到目前为止，我想出的最佳解决方案是使用类似 this[`matplotlib`的脚本](https://stackoverflow.com/a/7705852/2060238)来绘制弯曲的形状，然后调用`path.to_polygons()`，它将 Path 对象转换为多边形 - 但这样做的分辨率低得惊人，因此产生的近似值很差（对于我的目的来说太差了——我想相当精确地计算这些质心）。

因此，我希望 (i) 找到某种方法来提高`.to_polygons`（大约 10 倍）的分辨率，这对我的目的来说是令人满意的，或者 (ii) 完全尝试一些新策略。一种选择是使用 Adob​​e Illustrator 之类的工具绘制形状，然后通过一些插件或图像处理工具箱获得它们的顶点的近似值（但我不知道如何做这两件事）。另一种方法是使用一些工具箱/库来绘制形状，该工具箱/库已经具有用于查找区域和周长的质心的内置功能（我见过一些有前者，但没有后者）。但我敢肯定，还有很多其他的选择我没有考虑过。

# php - 使用 UPDATE SQL 激活 PHP 帐户

> ID：14823213
> 
> 赞同：0
> 
> 时间：2013-02-11T23:57:41.223
> 
> 标签：php, sql, security

好的，我有此代码可以发送电子邮件帐户验证链接

```
 $verifyemail = $clean['email'];
      $to = $verifyemail;
      $subject = 'Virtual Pierz Close | Verify Your Account';
      $message = "Thanks for registering with VPC, on clicking the verification link       below, your account will be confirmed, you can then go ahead buy Virtual Properties,   donating £5 each time to the worthwhile charity.

      http://www.cambrianvacation.co.uk/vpc/registered.php?
      email='$verifyemail'&hash='$hash1' ";

    $headers = 'From:noreply@cambrianvacation.co.uk'; // Set from headers  
    mail($to, $subject, $message, $headers); 
```

然后我有这段代码，它试图通过在数据库中设置 active = 1 来激活帐户，这将成为登录时访问控制逻辑的一部分，没有 active = 1，就没有登录，以及其他保护

```
 if(isset($_GET['email']) && !empty($_GET['email']) AND isset($_GET['hash']) &&    !empty($_GET['hash'])){  
  // Verify data  

  $accountemail = $_GET['email'];
  $accounthash = $_GET['hash'];
   }
    $accountActive = 1;
    $notactive = 0;
    $username = '';
    $password2 = '';
    $username = 'xxxxxxx';
    $password2 = 'xxxxxxx';

    $db1 = new PDO('mysql:host=localhost;dbname=xxxxxxxxxxxxx', $username,   $password2, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));

   $db1->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
   $db1->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
   try{
   $search = $db1->prepare("SELECT email, hash, active FROM users WHERE email = :email     AND hash= :hash AND active = :active");
   $search->bindParam(':email', $accountemail);
   $search->bindParam(':hash', $accounthash);
   $search->bindParam(':active', $notactive);
   $search->execute();
   $colcount = $search->columnCount();

   }catch(PDOException $e) {
  $e->getMessage();
  } 
       print_r($colcount);
       if($colcount === 3){

      //try{
          $update = $db1->prepare("UPDATE users SET active=:active WHERE email=:email AND hash=:hash AND active = :active");
          $update->bindParam(':active', $accountActive);
          $update->bindParam(':email', $accountemail);
          $update->bindParam(':hash', $accounthash);
          $update->bindParam(':active', $notactive);
          $update->execute();

      //}catch(PDOException $e) {
      // $e->getMessage();
      //} 
```

但是我无法更新活动列。

我还考虑过使用 GET['email'] 可能会受到语义 url 攻击，但是如果没有匹配的哈希，逻辑不会激活帐户，这是用 crypt() 随机生成的...... ...如果有人能看到代码中的任何安全漏洞，请告诉我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:13:29.830

您的新参数未正确绑定，请更改：

```
$update = $db1->prepare("UPDATE users SET active=? WHERE email=? AND hash=? AND active = ?"); 
```

至：

```
$update = $db1->prepare("UPDATE users SET active=:active WHERE email=:email AND hash=:hash"); 
```

**编辑 - 完整更新代码：**

```
 $update = $db1->prepare("UPDATE users SET active=:active WHERE email=:email AND hash=:hash");
      $update->bindParam(':active', $accountActive);
      $update->bindParam(':email', $accountemail);
      $update->bindParam(':hash', $accounthash);
      $update->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:15:24.117

你能做的，是根本不包括“电子邮件”。

您可以尝试通过执行以下操作生成 url：

```
$secret = "1032940fdjsjdkf#@$!@#%djsfisd";
$hash = md5($email.$secret);
$url = "http://www.cambrianvacation.co.uk/vpc/registered.php?hash=".$hash; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:16:29.420

真的没有理由在这里进行两个单独的查询。为什么不只使用一个查询来根据哈希和电子邮件更新记录并且活动 = 0？如果修改的行数 = 1，那么你成功了，否则你失败了。您可能并不关心它失败的原因，因为从安全角度来看，向用户指出更新失败的原因（即错误的电子邮件、错误的哈希、已经活跃的用户等）会很糟糕。

话虽如此，您的问题实际上在于您的更新使用`?`样式绑定，而您正在使用`bindParam()`样式`:param`绑定。这将不起作用，因为准备好的语句中不存在这些值。

所以只需使用这一个查询：

```
UPDATE users SET active = 1 WHERE email = :email AND hash = :hash AND active = 0 
```

显然，如果您认为要更改活动/非活动的值，那么也可以随意使用参数，但我猜您可能希望将其视为仅具有允许值的布尔样式 tinyint 字段0 和 1，所以在那里进行参数化确实没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T00:17:02.093

在更新查询中，您使用的是“？” 对于参数，但随后您尝试将它们设置为使用 bindParam() 命名。你应该使用

```
$update->execute(array($accountActive, $accountemail, $accounthash, $notactive)); 
```

或者这样修改更新查询：

```
$update = $db1->prepare("UPDATE users SET active=:active WHERE email=:email AND hash=:hash"); 
```

# regex - Grep 不使用锚标签

> ID：14823218
> 
> 赞同：1
> 
> 时间：2013-02-11T23:58:28.533
> 
> 标签：regex, unix, grep

我试图找到每个单词`/usr/dict/words`的字符与我的名字匹配的单词。我认为这会起作用：

```
cat /usr/dict/words | grep "^[mason]\+$" 
```

但它不打印任何东西。

话虽如此，当我跑步时：

```
cat /usr/dict/words | grep -v [A-Zbcdefghijlkpqrtuvwxyz] 
```

我得到了正确的输出。我真的很困惑。这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:04:15.423

鉴于您没有查看`/usr/share/dict/words`，我假设您不在 linux 上。鉴于这`+`是对 的非标准扩展`grep`，我猜`grep`您正在使用的 无法识别`+`。尝试：

```
 grep '^[mason][mason]*$' /usr/dict/words 
```

或者

```
grep -E '^[mason]+$' /usr/dict/words 
```

# postgresql - PostgreSQL 类型方法

> ID：14823221
> 
> 赞同：1
> 
> 时间：2013-02-11T23:58:58.163
> 
> 标签：postgresql

如何在 PostgreSQL 中创建类型方法？
让我们以以下类型为例：

```
create type Employee as (
name varchar(20),
salary integer) 
```

我该怎么做呢？

```
create method giveraise (percent integer) for Employee
begin
set self.salary = self.salary + (self.salary * percent) / 100;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:22:02.373

您在评论中被告知，Postgres 没有类型方法。

但是，Postgres 支持使用单个参数执行函数的[**属性表示法。**](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-EXPRESSIONS-FUNCTION-CALLS)这看起来几乎完全像类型的方法。考虑这个简单的例子：

```
CREATE OR REPLACE FUNCTION raise10(numeric) 
RETURNS numeric LANGUAGE sql AS 'SELECT $1 * 1.1'; 
```

称呼：

```
SELECT (100).raise10; 
```

结果：

```
 raise10
---------
   110.0 
```

一个**主要限制**是这只适用于**单个参数**。没有办法传递额外的参数，比如`percentage`变量 raise。

也适用于复合类型。有关此相关答案中“计算字段”的更多信息：
[将常见查询存储为列？](https://stackoverflow.com/questions/11165450/store-common-query-as-column/11166268#11166268)

为了更进一步，甚至可以`UPDATE`在行上调用 an 并保持更改：

```
CREATE TABLE employee (
  name text PRIMARY KEY,
  salary numeric);

INSERT INTO employee VALUES 
  ('foo', 100)
 ,('bar', 200);

CREATE OR REPLACE FUNCTION giveraise10(employee)
RETURNS numeric AS
$func$
  UPDATE employee
  SET    salary = salary * 1.1   -- constant raise of 10%
  WHERE  name = ($1).name
  RETURNING salary;
$func$ LANGUAGE sql; 
```

称呼：

```
SELECT *, e.giveraise10 FROM employee e; 
```

结果：

```
 name | salary | giveraise10
------+--------+-------------
 foo  |    100 |       110.0
 bar  |    200 |       220.0 
```

[**->sqlfiddle**](http://sqlfiddle.com/#!12/dfc47/1)
显示`SELECT`的 pre-UPDATE 值`salary`，但该字段实际上已更新！

```
SELECT *, e.giveraise10 FROM employee e;

 name | salary 
------+--------
 foo  |  110.0 
 bar  |  220.0 
```

使用这种诡计是否明智由您决定。有更有效和更透明的方式来更新表。

# vagrant - 一起使用 dotcloud 和 vagrant

> ID：14823226
> 
> 赞同：1
> 
> 时间：2013-02-11T23:59:31.900
> 
> 标签：vagrant, dotcloud

有没有人考虑过一起使用 dotcloud 和 vagrant ？如果能够在 dotcloud 应用程序中键入“vagrant up”并从 dotcloud.yml 文件中读取 vagrant 并创建一个本地环境，该环境将反映您执行“dotcloud push”时的样子，那就太好了。

我有一个半工作版本，但它不是自动的。您只需在同一个文件夹中创建 dotcloud.yml 和 Vagrantfile，并且设置脚本略有不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:40:57.917

我认为您可以使用的最接近的东西是[http://docker.io](http://docker.io)

# email - 如何在 Heroku 上使用 Mandrill 处理入站电子邮件？

> ID：14823227
> 
> 赞同：10
> 
> 时间：2013-02-11T23:59:36.237
> 
> 标签：email, heroku

我看到的所有文档和指南都指向直接使用 Mandrill，而不是通过 Heroku。

如何添加入站电子邮件地址和 webhook？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T01:02:28.060

我认为您需要查看[有关处理入站电子邮件的 Mandrill 文档](http://help.mandrill.com/entries/21699367-Inbound-Email-Processing-Overview)。

由此看来，在 Heroku 中执行此操作并没有什么特别之处 - 只要您的站点中有一个网页来处理入站消息，所有配置都使用 Mandrill 仪表板完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:36:02.517

您是否查看过有关在 Heroku 中使用 Mandrill 插件的文档？此处提供了多种语言的示例：

[https://devcenter.heroku.com/articles/mandrill](https://devcenter.heroku.com/articles/mandrill)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-18T08:55:42.383

直接将 Mandrill 与 Heroku 一起使用非常简单。您只需要在 Mandrill 中设置一个 STMP 用户名和密码：Your_Mandrill_Account >> Settings >> SMTP & API Credentials

主机 smtp.mandrillapp.com 端口 587 SMTP 用户名 your_user SMTP 密码 your_pass

您还需要创建一个新的 API。添加域，并为您的电子邮件创建或重复使用模板。

完成此操作后，您唯一需要做的就是在您的应用程序中创建您的电子邮件，然后使用您刚刚创建的 mandrill 设置发送它。看看 Mandrill API [https://mandrillapp.com/api/docs/messages.html#method=send](https://mandrillapp.com/api/docs/messages.html#method=send)

Java 中也有一些项目可以用作包装器，因此对 Mandrill 用户来说更容易。[https://github.com/cribbstechnologies/Java-Mandrill-Wrapper/blob/master/src/it/java/com/cribbstechnologies/clients/mandrill/it/MessagesTest.java](https://github.com/cribbstechnologies/Java-Mandrill-Wrapper/blob/master/src/it/java/com/cribbstechnologies/clients/mandrill/it/MessagesTest.java)。我想您可能会使用任何语言的示例

# android - Android - 如何从父活动完成子活动

> ID：14823231
> 
> 赞同：0
> 
> 时间：2013-02-11T23:59:52.347
> 
> 标签：android, android-intent, android-activity

我有一个第一个活动A，我开始一个新的活动B：

`intent.setClass(A.this, B.class);`

现在，在某些事件之后，我想从 A 完成 B（A 包含一个正在运行的线程）。

我怎么能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:05:44.550

1.  您可以从 A 向 B 发送广播消息
2.  在这些术语中，您是否需要使用 B 作为 Activity 实例？可能更好的选择是将 B 创建为对话框？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:01:49.440

你没有。当`Activity`内存资源不足时，将由操作系统完成。

此外，单击后退按钮会调用`finish()`当前活动并显示后台堆栈中的顶部活动，因此您可能已经完成了子活动。

# c# - 使用字符串的字典 TKey 索引器

> ID：14823234
> 
> 赞同：2
> 
> 时间：2013-02-12T00:00:15.107
> 
> 标签：c#, dictionary, indexer

我有`IDictionary<TKey, TValue>`一`TKey`堂课。我可以添加使用带有`String`值而不是 a的索引器的功能`TKey`吗？

```
public class MyClass {
  public string Name { get; set; }
}

....

//dict is a IDictionary<MyClass, object> 
dict.Add(new MyClass { Name = "Foo" }); 
```

目前我正在使用 Linq 来访问这些值，`Name`但我更喜欢这样的东西：

```
//This call returns the variable I added above
object value = dict["Foo"]; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:05:53.107

您可以根据您的班级创建自己的词典班级。

```
public class MyClass
{
    public string Name { get; set; }

    // You may want to implement equality members on your class so that 
    // the dictionary treats the Name value as the key correctly.
}

public class MyClassDictionary<TValue> : Dictionary<MyClass, TValue>
{
    public TValue this[string val]
    {
        get
        {
            return base[Keys.First(x => x.Name == val)];
        }
    }
} 
```

然后，您可以随意使用它。

```
MyClassDictionary<string> instance = new MyClassDictionary<string>();

instance.Add(new MyClass() { Name = "testkey" }, "test value");

Debug.WriteLine(instance["testkey"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:16:17.003

这可能是解决您的问题的好方法，如果使用`Name`定义相等性对于一般来说是有意义的`MyClass`，而不仅仅是在这个特定的字典中：

```
public class MyClass
{
    public string Name { get; set; }
    public override int GetHashCode()
    {
        return Name.GetHashCode();
    }
    public override bool Equals(object other)
    {
        return this.Name == ((MyClass)other).Name;
    }
} 
```

然后你的字典只是由`MyClass`对象索引。如果您有显式`string`而不是`MyClass`实例，则可以像这样获取字典的值：

```
dict[new MyClass { Name = "Foo" }] 
```

您还可以添加：

```
public static implicit operator MyClass(string s)
{
    return new MyClass { Name = s };
} 
```

和索引如：

```
dict["Foo"] 
```

同样，只有在一般情况下才这样做`MyClass`，而不仅仅是在这个特定的字典中使用。如果是针对这个特定的字典，请尝试其他解决方案。

# c++ - 朋友函数无法访问类变量

> ID：14823238
> 
> 赞同：0
> 
> 时间：2013-02-12T00:00:40.723
> 
> 标签：c++, namespaces, friend

我认为友元函数可以访问类变量，就像我尝试在 << 函数中执行 vx、vy、vz 一样。但它不编译。它说它无法在这些行解析标识符。

我也在尝试学习如何使用命名空间。即使我在实现文件中使用了命名空间 vec，我仍然必须在所有内容之前包含 Vector:: 那么有什么意义呢？

头文件：

```
#ifndef VECTOR_H
#define VECTOR_H

namespace vec {

    class Vector {
    private:
        double x, y, z;

    public:
        Vector(double, double, double);
        friend std::ostream& operator<<(std::ostream&,  const Vector&);

    };

}

#endif  /* VECTOR_H */ 
```

.cpp 文件：

```
#include "Vector.h"
#include <iostream> 
using namespace vec;

//Constructor
Vector::Vector(double x1 = 0, double y1 = 0, double z1 = 0) {
    x = x1;
    y = y1;
    z = z1;
}

//Operators
std::ostream& operator<<(std::ostream& out, const Vector& v) {
    out<<"<"<<v.x<<", "<<v.y<<", "<<v.z<<">";
    return out;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:02:45.823

Friend 函数不是成员函数，并且`operator<<`必须不是成员才能拥有`ostream`. 将其更改为免费功能：

```
std::ostream& operator<<(std::ostream& out, Vector v) {
              ^^ no qualification 
```

我也会通过 const 引用而不是值来获取向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:16:13.590

您的朋友函数属于命名空间 vec 并且必须这样定义。

将其更改为：

```
std::ostream &vec::operator << (std::ostream &out , const Vector &v) { //etc 
```

# .htaccess - htaccess 从单数目录重定向到复数目录

> ID：14823240
> 
> 赞同：0
> 
> 时间：2013-02-12T00:00:45.897
> 
> 标签：.htaccess

我将非常感谢所有可以帮助重定向以下示例的人：

从

```
www.example.com/topic/123/ 
```

至

```
www.example.com/topics/123/ 
```

我尝试了许多模式、条件、教程……但没有结果

在我看来，下一个应该可以工作，但不幸的是它没有

```
RewriteRule ^topic/(.*)/$ /topics/$1 [L,R=301] 
```

# assembly - 获取 CALL 的微操作

> ID：14823243
> 
> 赞同：3
> 
> 时间：2013-02-12T00:01:24.770
> 
> 标签：assembly, microcoding

我试图了解如何在微操作中编写获取周期，以便 CPU 获取 32 位的 CALL 指令。

```
MAR is 16 bits wide
MDR is 8 bits wide
PC is 16 bits wide
IR is 16 bits wide
Temp registers are 16 bits wide 
```

我的问题源于指令是 32 位的事实，高 16 位代表操作码，低 16 位代表我们要跳转到的目标地址。

获取周期是这样的：

```
MAR <- PC

MDR <- M(MAR)

IR <- MDR opcode

MAR <- MDR address

PC <- PC + 1 
```

由于 MDR 只有 8 位宽，我们如何调整这个获取周期以考虑整个操作码和每个 16 位宽的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T14:52:24.930

我假设处理内存的小端架构。另外我假设其中一个寄存器称为 SP 并且是一个堆栈指针，向下增长。PC、TEMP、IR的高低部分可以独立访问。

```
/* FETCH................ */
MAR <- PC
PC <- PC+1
MDR <- M(MAR)  ;low 8 bits of opcode
IRlow <- MDR

MAR <- PC
PC <- PC+1
MDR <- M(MAR)  ;high 8 bits of opcode
IRhigh <- MDR

/* DECODE AND EXECUTE................ */
if MDR is opcode for CALL...
MAR <- PC
PC <- PC+1
MDR <- M(MAR)  ;low 8 bits of destination
TEMPlow <- MDR

MAR <- PC
PC <- PC+1
MDR <- M(MAR)  ;high 8 bits of destination
TEMPhigh <- MDR

SP <- SP-1
MAR <- SP
MDR <- PChigh
M(MAR) <- MDR  ;store hi part of next instruction in stack

SP <- SP-1
MAR <- SP
MDR <- PClow
M(MAR) <- MDR  ;store low part of next instruction in stack

PC <- TEMP    ;update PC to jump to the called address 
```

# asp.net - 带有下拉选择器的 ASP.net C# 本地化 - 不更改语言

> ID：14823246
> 
> 赞同：0
> 
> 时间：2013-02-12T00:01:36.920
> 
> 标签：asp.net, localization

我已经用我的两个资源文件实现了以下内容，一个用于英语（LocalStrings），一个用于德语（de-DE）。当我更改下拉菜单时，它不会更改语言。没有错误被引发，不是由 Visual Studio 或 Firebug 引发的。**有什么建议吗？**

* * *

```
 <%@ Page Language="C#" AutoEventWireup="false" CodeFile="Default.aspx.cs" Inherits="_Default" uiculture="auto" Culture="auto:de-DE" %>

    <!DOCTYPE html>

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head id="Head1" runat="server">
        <title></title>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>

        </div>
            <asp:Label ID="Label1" runat="server" meta:resourcekey="Label1" Text="<%$ Resources:LocalStrings, LastName %>"></asp:Label>
            <br />
            <br />
            <asp:DropDownList ID="DropDownList1" runat="server">
                <asp:ListItem Value="LocalStrings">English</asp:ListItem>
                <asp:ListItem Value="de-DE">German</asp:ListItem>
            </asp:DropDownList>
        </form>
    </body>
    </html> 
```

代码隐藏

```
 using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Threading;
        using System.Web;
        using System.Web.UI;
        using System.Web.UI.WebControls;
        using System.Globalization;

        public partial class _Default : System.Web.UI.Page
        {
           protected void Page_Load(object sender, EventArgs e)
        {

        }
        protected override void InitializeCulture()
        {
            string cult = Request.Form["DropDownList1"];

            if (cult != null)
            {
                String selectedLanguage = cult;
                UICulture = selectedLanguage;
                Culture = selectedLanguage;

                Thread.CurrentThread.CurrentCulture =     CultureInfo.CreateSpecificCulture(selectedLanguage);
                Thread.CurrentThread.CurrentUICulture = new CultureInfo(selectedLanguage);
                }
                base.InitializeCulture();

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:52:30.020

解决了

资源文件的格式为 ResourceName.culture.resx

在 App_GlobalResources 文件夹中创建一个名为 Main.resx 的资源文件。这是用于默认文化（即 Invariant ）

然后创建资源文件 Main.en-US.resx

这就是美国文化的所有资源都将存在的地方，依此类推。

```
Main.resx  
Main.en.resx  
Main.en-US-resx  
Main.en-AU.resx  
Main.fr.resx  
Main.fr-FR.resx  
etc. 
```

要从网页访问它，请使用语法

```
<%$ Resources:Main, Email %> 
```

不要担心文化，系统会解决的。它将首先完全匹配（ en-US ），然后根据文化父级（ en ）、父级父级（ Invariant ）进行匹配。

更改“主要”的名称以满足您的需要

# ruby - Ruby 参数错误

> ID：14823251
> 
> 赞同：1
> 
> 时间：2013-02-12T00:02:12.640
> 
> 标签：ruby, argument-passing

如果我硬编码下面的变量**max**，我的程序运行没有问题。如果我传入一个参数，max 设置正确但会抛出和错误。这是为什么？

```
max = ARGV[0].to_i

# Ask user for first guess
puts "I am thinking of a number between 1 and " + max.to_s + "."
print "Make your guess: "
guess = gets.chomp.to_i 
```

抛出错误：**`gets'：没有这样的文件或目录（Errno::ENOENT）**

注意：错误是通过将**gets**更改为**STDIN.gets**来修复的，但是为什么在没有参数的情况下我的程序可以正常工作？

此外，有没有办法将gets的默认行为更改为整个文件的**STDIN.gets ？**也许在程序顶部有一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:07:48.237

`Kernel.gets`有一些有趣的行为可以解释您的问题：

[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-gets](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-gets)

具体来说，它的行为取决于是否`ARGV`为空，如果它*不*为空，那么它的行为将与`STDIN.gets`. 如果您不想`STDIN.gets`显式使用，则可以`max = ARGV.shift`在调用之前使用删除该元素`gets`。

解决你的最后一个问题：强制`gets`' 行为匹配的最佳方法`STDIN.gets`可能`ARGV`是在做任何其他事情之前确保它是空的，并确保它保持这种状态。但是，继续简单地使用`STDIN.gets`“只是为了确定”可能更明智。在这种情况下，可能出现异常和令人惊讶的行为，几乎总是最好尽可能明确地编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:08:26.047

你应该使用：

`STDIN.gets`

尝试获取用户输入时。

# jquery - 悬停时淡入背景图像

> ID：14823256
> 
> 赞同：1
> 
> 时间：2013-02-12T00:02:29.137
> 
> 标签：jquery, html, fadein

我试图弄清楚是否可以在 div 的背景图像中淡入淡出，我目前有一个功能可以在悬停时显示相关 div 的背景图像，但是显示/隐藏有点苛刻我想要它改为淡入/淡出，但不知道该怎么做。

这是我的代码：

```
jQuery(document).ready(function(){
    jQuery(".thumbnail").hover(function(){
        var imgurl = jQuery(this).data("hoverimage");
        jQuery(this).css("background-image", "url(" + imgurl + ")");
    }, function(){
        jQuery(this).css("background-image", "");
    });
}); 
```

这个函数只是在 mouseenter 上显示背景图像并在 mouseleave 上再次隐藏它，是否可以在将鼠标悬停在相关 div 上时淡入淡出，而在离开 div 时淡出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:11:58.200

您不能仅淡入背景图像。您可以做的是淡入具有相同偏移量且具有背景图像（甚至是图像元素本身）的元素。只需添加另一个具有您想要的图像的元素`position: fixed`（如果父是相对的，则添加绝对元素）。

```
$("#hasbg").append($("<div>").css({
    position: 'fixed',
    top: $("#hasbg").offset().top,
    left: $("#hasbg").offset().left,
    display: 'none',
    background: 'url(http://static.adzerk.net/Advertisers/bd294ce7ff4c43b6aad4aa4169fb819b.jpg)',
    width: $("#hasbg").width(),
    height: $("#hasbg").height()
}).attr('id', 'isbg')).on('mouseenter', function () {
    console.log($("#isbg").length);
    $("#isbg").stop().fadeIn();
}).on('mouseleave', function () {
    $("#isbg").stop().fadeOut();  
}); 
```

[http://jsfiddle.net/ExplosionPIlls/nenf3/](http://jsfiddle.net/ExplosionPIlls/nenf3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:37:32.603

这相当棘手，我的印象是 $(".blah").animate({}) 具有颜色属性，但事实并非如此（好吧，至少据我所知）。

您可能会在这里找到出路：（`http://api.jquery.com/fadeIn/`最后一个代码片段）。

# c#-4.0 - 使用 SetInputToWaveFile 的语音识别过早结束

> ID：14823261
> 
> 赞同：0
> 
> 时间：2013-02-12T00:03:08.393
> 
> 标签：c#-4.0, speech-recognition

我想对音频文件进行语音识别。

我的代码非常基础，源自[这里](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.setinputtowavefile.aspx)。问题在于，即使某些波形文件长达数小时，它也会在几秒钟后过早地停止每个波形文件。

如何让它扫描整个文件？

```
namespace Stimmenerkennung
{
    public partial class Form1 : Form
    {
        //...
        Thread erkennung;
        bool completed;

        private void Form1_Load(object sender, EventArgs e)
        {
            erkennung = new Thread(erkennen);
            erkennung.Start();
        }

        void erkennen()
        {
            using (SpeechRecognitionEngine recognizer =
               new SpeechRecognitionEngine())
            {

                // Create and load a grammar.
                Grammar dictation = new DictationGrammar();
                dictation.Name = "Dictation Grammar";

                recognizer.LoadGrammar(dictation);

                // Configure the input to the recognizer.
                recognizer.SetInputToWaveFile(@"REC01.wav");

                // Attach event handlers for the results of recognition.
                recognizer.SpeechRecognized +=
                  new EventHandler<SpeechRecognizedEventArgs>(recognizer_SpeechRecognized);
                recognizer.RecognizeCompleted +=
                  new EventHandler<RecognizeCompletedEventArgs>(recognizer_RecognizeCompleted);

                // Perform recognition on the entire file.
                db("Starting asynchronous recognition...");
                recognizer.RecognizeAsync();
                while (!completed)
                {
                    //fs((int)(100 / recognizer.AudioPosition.TotalSeconds * recognizer.AudioPosition.Seconds));
                    db(recognizer.AudioState.ToString());
                    Thread.Sleep(100);
                }
            }
        }

        // Handle the SpeechRecognized event.
        void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
        {
            if (e.Result != null && e.Result.Text != null)
            {
                db(e.Result.Text);
            }
            else
            {
                db("  Recognized text not available.");
            }
        }

        // Handle the RecognizeCompleted event.
        void recognizer_RecognizeCompleted(object sender, RecognizeCompletedEventArgs e)
        {
            if (e.Cancelled)
            {
                db("  Operation cancelled.");
            }
            if (e.InputStreamEnded)
            {
                db("  End of stream encountered.");
            }
            completed = true;
        }

        void db(string t)
        {
            this.textBox1.Invoke((MethodInvoker)delegate
            {
                textBox1.Text = textBox1.Text + Environment.NewLine + t;
                //textBox1.Text = t;
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:22:18.457

您可以通过静音将文件拆分为几秒钟的块，然后将块分别提供给识别器。然后，您可以将结果组合成一个字符串。

您可以使用任何语音活动检测实现来执行拆分，一个简单的基于能量的 VAD 计算帧能量就足够了。

[您可以在CMUSphinx](http://cmusphinx.sourceforge.net) projet中找到一些现有的 VAD 实现

# python - 如何删除引用类的方法和R中的对象

> ID：14823263
> 
> 赞同：1
> 
> 时间：2013-02-12T00:03:10.493
> 
> 标签：python, r, rpy2

这将是一个很长的问题。所以，请原谅我

我有以下场景，我想最好给出一个伪代码来更好地解释事情

一个 python 文件说**test.py**

```
def test(i):
    from rpy2.robjects import r
    r.source('r_file.R')
    r.call_function(with some arguments)

    #Some Operations
    del r 
```

文件：**r_file.R**

```
rm(list=ls(all=TRUE))

#some global variables
#some reference class

#creating an object of reference class
call_function = function(some arguments)
{
    Do some processing
    call few methods on a reference class

    call some more methods and do some operations

    rm(list=ls(all=TRUE))
    gc()

    return(0)

} 
```

在 python 中对函数 test 的调用发生在 'i' 的某些值上，即函数被调用为 i 的某些值，它总是大于 1，即函数从**main**被多次调用。因此，我们不止一次地获取 R 文件。每次调用 python 函数时，我都想要一个新的 R 解释器。因此，每次调用该函数时我都会导入 r 并删除 rpy2 对象。

在 r 函数“call_function”中，我调用了一些方法，这些方法又创建了引用类对象。

在 R 代码中，我在代码开头以及函数 some_function 退出时使用 rm。

鉴于这种背景，我现在面临的问题是 rm 没有删除代码中的任何引用类，我不断收到这样的警告

```
In .removePreviousCoerce(class1, class2, where, prevIs) :
  methods currently exist for coercing from "Rev_R5" to "envRefClass"; they will be replaced 
```

在这里，Rev_R5 是一个参考类。我不希望这种情况发生，有没有办法使用 rm 删除与引用类相关的所有**方法**、**对象？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T01:50:14.747

从 R 的全局环境中删除所有对象并不意味着您回到了新启动的 R 进程（类和方法定义可能会保留，正如您所发现的那样）。

可以考虑R 函数，例如`removeClass()`、`removeMethod()`或`removeGeneric`过程相对较快）。

由于无法终止和重新启动嵌入式 R（限制来自 R，而不是 rpy2），因此您必须启动和停止嵌入 R 的 Python 进程。

一种方法是使用 Python 包`multiprocessing`（包含在 Python 的标准库中）。一个额外的好处是这些过程可以并行运行。

[以Doug Hellmann 的优秀教程](http://www.doughellmann.com/PyMOTW/multiprocessing/basics.html)为基础的简单示例：

```
import multiprocessing

def R_worker(i):
    """worker function"""

    print('Worker %i started' % i)
    from rpy2.robjects import r
    r.source('r_file.R')
    r.call_function(with some arguments)

    #Some Operations
    del r
    return

if __name__ == '__main__':
    jobs = []
    for i in range(5):
        p = multiprocessing.Process(target = R_worker, args=(i,))
        jobs.append(p)
        p.start() 
```

# android - 当用户在 4.2 中通过滑动动作结束应用程序时使用什么事件？

> ID：14823264
> 
> 赞同：1
> 
> 时间：2013-02-12T00:03:13.357
> 
> 标签：android, android-lifecycle

我想知道我们如何管理用户进入正在运行的应用程序列表并将应用程序滑开的事件。它似乎没有触发通过`onDestroy()`，我还没有找到任何关于它的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:17:00.327

> 我想知道我们如何管理用户进入正在运行的应用程序列表并将应用程序滑开的事件。

没有“事件”。您的进程已终止。

> 它似乎没有触发通过 onDestroy() 并且我还没有找到任何关于它的文档。

当进程终止时，不需要调用任何生命周期方法，当用户通过从最近的任务列表中滑动进程来摆脱您的进程时，似乎也不会调用任何生命周期方法。

# java - Android - 如何在文件列表中显示文件类型图标？

> ID：14823266
> 
> 赞同：1
> 
> 时间：2013-02-12T00:03:20.920
> 
> 标签：java, android, listview, android-arrayadapter

我正在将目录的内容加载到列表中，并且在文件名旁边我想要该文件类型的图标，5 种可能的类型。我已经看到了将图标添加到字符串列表而不是动态数据的示例。如何修改下面的代码以添加图标？我已将文件保存在 drawable-hdpi 中。

```
private void getFiles(File[] files){
            items = new ArrayList<String>();
            items.add(getString(R.string.goto_root));
            for(File file : files){
                String filename = file.getName().toString();
                String filenameArray[] = filename.split("\\.");
                String extension = filenameArray[filenameArray.length-1];
                Log.d("Extension", extension);
                items.add(file.getPath());
            }
            ArrayAdapter<String> fileList = new ArrayAdapter<String>(this,R.layout.list_item, items);
            setListAdapter(fileList);
        }

<?xml version="1.0" encoding="utf-8"?>
<TextView android:id="@+id/row"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

# python - python argparse 中的整数参数抛出错误“invalid int value”，需要路径

> ID：14823275
> 
> 赞同：0
> 
> 时间：2013-02-12T00:03:54.970
> 
> 标签：python, argparse

我正在尝试使用一个整数作为 argparse 中的位置参数。给出了以下完整的 python 脚本（取自[本](http://docs.python.org/2/howto/argparse.html)教程）：

```
 #!/usr/bin/env python
   import argparse
   parser = argparse.ArgumentParser()
   parser.add_argument("square", help="display a square of a given number",
                    type=int)
   args = parser.parse_args()
   print args.square**2 
```

当我将此脚本称为

```
 > script.py 3 
```

结果我得到

```
 error: argument square: invalid int value: 'C:\\home\\dev\\freqana\\3' 
```

`argparse`显然这里需要一个文件系统路径，但为什么呢？肯定设置`type`为.`int`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:41:06.940

代码是正确的。我在 python 2.7 上运行了你的程序并得到了预期的答案：

```
> script.py 3
9 
```

你在运行正确的代码吗？cat (linux) 或键入 (windows) script.py 以确保您拥有最新版本，然后在 python 下显式运行以确保您没有在路径上选择不同的 script.py (python script.py 3)

# javascript - 如果标记的位置是使用 Google 地图 api 或 gmaps.js 在屏幕上显示的位置，如何加载标记

> ID：14823278
> 
> 赞同：0
> 
> 时间：2013-02-12T00:04:12.780
> 
> 标签：javascript, google-maps-api-3, maps, google-maps-markers, area

我有一堆要动态添加到地图的标记。

当地图加载时，我从数据库中获取此标记作为 json 对象并将它们放置在地图上

我拥有的地图位于 div`300px x 300px`中。

我要解决的问题是我只想加载地图可见部分的标记。

我知道每个标记的`lat`和`long`，所以问题是我如何找到屏幕上显示的区域，也许是`lat`和`long`范围。

如果我平移我想要更新的地图，以便我可以显示更多标记......

不确定这是否有意义:)

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:11:25.110

观察`bounds_changed`地图的事件。当它触发时，您可以使用地图的`contains`- 方法`bounds`（由返回`mapInstance.getBounds()`）过滤标记。

# ios - UITextView中的不同颜色

> ID：14823280
> 
> 赞同：1
> 
> 时间：2013-02-12T00:04:18.010
> 
> 标签：ios, objective-c, cocoa-touch, nsstring

我尝试在我的 UITextView 中添加不同颜色的字符串。我写了这段代码

```
NSMutableAttributedString* attString =
   [[NSMutableAttributedString alloc]initWithString:view.text]; //view is my UITextView
[attString addAttribute:(NSString*)kCTForegroundColorAttributeName 
                  value:[UIColor greenColor] 
                  range:(NSRange){attString.length-8, 8}];
view.attributedText = attString; 
```

也许是不正确的属性，你能告诉我什么属性改变了文本的颜色吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:14:20.460

尝试使用`NSForegroundColorAttributeName`而不是`kCTForegroundColorAttributeName`.

[*NSAttributedString 属性键*](https://developer.apple.com/documentation/foundation/nsattributedstringkey?language=objc)

# c - 返回的不兼容类型

> ID：14823283
> 
> 赞同：3
> 
> 时间：2013-02-12T00:04:39.620
> 
> 标签：c, debugging, pointers

对不起，如果这是一个过于简单的问题。我只是非常沮丧。

编译时，我收到以下错误：

```
sll.c:129: error: incompatible types in return 
```

这是我文件顶部的结构定义，可能有必要了解发生错误的函数：

```
struct string_linked_list {
   char *s;
   struct string_linked_list *next;
};

typedef struct string_linked_list SLL; 
```

这是返回错误的函数。我编写了这个函数来简单地构建一个用于测试目的的单例列表。

```
SLL makeSingleton()
{
    SLL * new= (SLL *) malloc( sizeof(SLL));
    char*sp = strdup("test");
    new->s = sp;
    new->next = NULL;
    return new;
} 
```

你知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T00:05:57.817

您需要指定返回类型：

```
SLL* makeSingleton()
{ 
```

如果你不指定这个，在 C 中，函数将默认返回 int。

* * *

编辑：

鉴于您的新编辑，问题是您需要返回 type `SLL*`，而不是`SLL`：

```
SLL* makeSingleton() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:09:28.997

在您的程序中，返回类型是一个指针，因此，程序的足迹应该是`SLL* makeSingleton`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T00:11:13.720

该函数具有 int 的*隐式*返回类型，当您返回 SLL* 时，还尽量避免将变量命名为“new”

# java - 从java中的二进制文件读取时将小端转换为大端

> ID：14823284
> 
> 赞同：2
> 
> 时间：2013-02-12T00:04:51.460
> 
> 标签：java, windows

现在我有一个程序，我必须从二进制文件中读取数字。数字是小端的，我必须转换成 java 代码的大端。我没有得到任何东西。所以任何人都可以发布我该怎么做。求求你了，谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:12:45.647

Read it using nio and a `ByteBuffer` on which you'll have done `.order(ByteOrder.LITTLE_ENDIAN)`.

[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:09:19.257

Looks like Guava has beta support for it.

[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/LittleEndianDataInputStream.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/LittleEndianDataInputStream.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T00:11:43.247

Appache commons has a LittleEndianInputStream, since years

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T00:47:41.377

到目前为止的答案很好，但我不得不承认，这些天我在 .NET 中花费的时间比在 java 中花费的时间更多。

但是，我确实觉得除了其他人在这里提出的答案之外，实际上可能值得发布一个答案来描述小端和大端之间的区别。

通常，当我看到这样的问题时，人们并没有意识到这实际上是一个非常简单的任务，只需要大约 5 分钟就可以完成。

Endiness 是关于给定数字的字节实际存储在二进制文件中的顺序。

让我们举一个 16 位“短整数”的简单示例（可以受此影响的最小大小）

如果您停止以“字节”的形式考虑这一点，那么您会立即看到 16 位实际上等于 2 个字节。

现在，如果您开始将这些字节分解为最低和最高顺序，您实际上会得到一个低位字节和一个高位字节。

如果我们想象一下，我们有值 511，它由 2 个字节表示

```
1 
```

和

```
256 
```

为什么？

数字中的位位置是 2 的幂，如果你从右到左遍历 2 的幂的位，你会得到：

```
128  64  32  16  8  4  2  1 
```

如果将所有这些列加在一起，您会看到可以得到的最大值是 255

当所有位都已满时，您必须进入下一位，因此为了获得 511 我们必须拥有

```
256  128  64  32  16  8  4  2  1 
```

通过拆分成字节的扩展，它真的变成了

```
1 | 128  64  32  16  8  4  2  1 
```

与 | 表示两个 8 位字节之间分割的字符。

或以图形形式

```
-------------
|  1  | 255 |
------------- 
```

我不会深入研究二进制，否则我最终会偏离主题，但是那里有很多不错的参考资料，例如 Wikipedia 上的这个：

[http://en.wikipedia.org/wiki/Binary_number](http://en.wikipedia.org/wiki/Binary_number)

*回到我们的字节......*

当您将这些字节写入文件时，您可以先写入 1，然后再写入 255，也可以先写入 255，然后再写入 1

如果你先写 1，那么这就是所谓的“Big Endian”，因为你先写两个字节的最大（最高）值。

如果你先写 255，那么你先写两个值中最小的（较低的），因此命名为“Little Endian”

## 你如何从一种转换到另一种？

这真的很容易，如果这些值作为“Little Endian”值存储在文件中，那么您基本上需要执行以下操作：

```
Read One Byte into A
Read One Byte into B
Make 16 bit Result = (B << 8) + A 
```

如果它作为“Big Endian”值存储在文件中

```
Read One Byte into A
Read One Byte into B
Make 16 bit Result = (A << 8) + B 
```

其他数字类型也很简单，取一个普通的 32 位整数......

分解它等于 4 , 8 位字节

```
-----------------
| 4 | 3 | 2 | 1 |
----------------- 
```

其中 1 为最低，4 为最高。

在**“Little Endian”**中，字节将按如下方式存储在文件中：

```
-----------------
| 1 | 2 | 3 | 4 |
----------------- 
```

将其读回：

```
Read One Byte into A
Read One Byte into B
Read One Byte into C
Read One Byte into D
Make 32 bit Result = (D << 24) + (C << 16) + (B << 8) + A 
```

在**“大端”**中：

```
-----------------
| 4 | 3 | 2 | 1 |
----------------- 
```

将其读回：

```
Read One Byte into A
Read One Byte into B
Read One Byte into C
Read One Byte into D
Make 32 bit Result = (A << 24) + (B << 16) + (C << 8) + D 
```

所以你看，只要你知道如何读取单个字节（在任何语言中）你真的不需要任何额外的例程或库调用，你只需要一点左移......

*对于那些好奇的人*：

写一个 32 位整数为

**“小端”**：

```
Make R = 32 bit integer to store
Make 8 bit Value A = R AND 255
Make 8 bit Value B = (R >> 8) AND 255
Make 8 bit Value C = (R >> 16) AND 255
Make 8 bit Value D = (R >> 24) AND 255
Write A as byte to file
Write B as byte to file
Write C as byte to file
Write D as byte to file 
```

**“大端”**：

```
Make R = 32 bit integer to store
Make 8 bit Value A = R AND 255
Make 8 bit Value B = (R >> 8) AND 255
Make 8 bit Value C = (R >> 16) AND 255
Make 8 bit Value D = (R >> 24) AND 255
Write D as byte to file
Write C as byte to file
Write B as byte to file
Write A as byte to file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-03T18:42:54.517

您可能在代码中做错了什么。我最近写了一篇关于如何读写二进制文件以及如何转换字节序的博客文章。将数据读入字节后，您需要调用 flip()

```
FileChannel fc = (FileChannel) Files.newByteChannel(Paths.get(filename), StandardOpenOption.READ);
ByteBuffer byteBuffer = ByteBuffer.allocate((int)fc.size());
byteBuffer.order(ByteOrder.LITTLE_ENDIAN);
fc.read(byteBuffer);
byteBuffer.flip(); 
```

[http://pulasthisupun.blogspot.com/2016/06/reading-and-writing-binary-files-in.html](http://pulasthisupun.blogspot.com/2016/06/reading-and-writing-binary-files-in.html)

# ios - 可以在块中使用 self 的 ivar（而不是使它们成为属性）

> ID：14823286
> 
> 赞同：8
> 
> 时间：2013-02-12T00:04:59.857
> 
> 标签：ios, objective-c, cocoa-touch

这段代码：

```
__weak VeryCool *weakSelf = self;
something.changeHandler = ^(NSUInteger newIndex) {
    if (newIndex == 0) {
        [weakSelf.options removeObjectForKey:@"seller"];
    }
}; 
```

警告我找不到属性选项。这是真的，因为 options 是一个 ivar，但没有声明为属性。是否有可能以某种方式从 weakSelf 获得选项而不将其声明为属性？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-12T00:10:11.367

对于直接 ivar 访问，请使用`->`. 例如：

```
__weak VeryCool *weakSelf = self;
something.changeHandler = ^(NSUInteger newIndex) {
    if (newIndex == 0) {
        VeryCool* strongSelf = weakSelf;
        if (strongSelf)
            [strongSelf->options removeObjectForKey:@"seller"];
    }
}; 
```

重要的是检查它`strongSelf`是非的`nil`，因为直接访问实例变量会因`nil`指针而崩溃（这与使用接收器调用方法不同`nil`，属性访问只是方法调用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T00:07:25.873

直接取消引用弱指针来获取 ivar 是不可能的；`nil`由于自动行为引起的竞争条件，试图这样做是编译器错误。

KVC 将为您获取 ivar，但是：

```
[weakSelf valueForKey:@"options"] 
```

这将查找具有相同名称的访问器方法。如果没有找到，它将依靠获取 ivar 本身。

由于消息的接收者`valueForKey:`是弱引用，`nil`如果对象已被释放，则消息将发送无操作。因此，您不必再次重新分配`self`以手动说服 AutomaticRC 执行您想要的操作。

# php - 将变量传递给数组索引

> ID：14823289
> 
> 赞同：0
> 
> 时间：2013-02-12T00:05:22.100
> 
> 标签：php, arrays, debugging, multidimensional-array, indexing

这就是我所拥有的

```
foreach ( $post_formats as $format ) {
    if ( $options['show_post_formats'][$format] == 0 ) {
        $format = 'post-format-' . $format;
        array_push( $hide, $format );
    }
} 
```

它工作正常......但是在我调试时给了我一个未定义的索引：错误，因为它希望 $format 的值用引号引起来。我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:07:55.217

由于您不确定索引是否存在，您只需使用 !empty() 并检查数组键是否存在。

```
<?php 
foreach ( $post_formats as $format ) {
    if (!empty($format) && array_key_exists($format, $options['show_post_formats']) && $options['show_post_formats'][$format] == 0 ) {
        $format = 'post-format-' . $format;
        array_push( $hide, $format );
    }
}
?> 
```

# javascript - 如何在此脚本中自定义延迟？

> ID：14823290
> 
> 赞同：3
> 
> 时间：2013-02-12T00:05:26.663
> 
> 标签：javascript, jquery

这段代码似乎负责我网站上的图像滑块（目前不在线）。我想自定义幻灯片之间的延迟。我尝试将末尾的“5000”更改为“10000”或“900000”或其他任何内容，但它没有任何效果。我究竟做错了什么？

```
function slideSwitch() {
var $active = $('#slideshow IMG.active');

if ( $active.length == 0 ) $active = $('#slideshow IMG:last');

// use this to pull the images in the order they appear in the markup
   var $next = $active.next().length ? $active.next() : $('#slideshow IMG:first');
// uncomment the 3 lines below to pull the images in random order

// var $sibs  = $active.siblings();
// var rndNum = Math.floor(Math.random() * $sibs.length );
// var $next  = $( $sibs[ rndNum ] );

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
    .addClass('active')
    .animate({opacity: 1.0}, 1500, function() {
        $active.removeClass('active last-active');
    });
}

$(function() {
    setInterval( "slideSwitch()", 5000 ); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:40:47.633

`**[LIVE DEMO](http://jsbin.com/ekesaw/5/edit)**`

```
var $img = $('#slideshow').find('img');
var C = 0;                    // COUNTER
var N = $img.length ;         // NUMBER OF IMAGES
var intv;                     // INTERVAL

$img.hide().eq( C ).show();   // PREPARE VISIBILITIES

function slideSwitch() {
  intv = setInterval(function(){
    $img.stop().fadeTo( 500, 0 ).eq( ++C % N ).stop( 1 ).fadeTo( 500, 1 );   
  },2000);
}

slideSwitch();                // RUN

// PAUSE ON MOUSEENTER :)   
$('#slideshow').on('mouseenter mouseleave', function( e ){
  var isMEnt = e.type=='mouseenter' ? clearInterval(intv) : slideSwitch();               
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:14:26.427

我想你应该拿走括号

喜欢：

```
setInterval( "slideSwitch", 5000 ); 
```

试试看

# c++ - 对于 std::generate，传递的函数可以使用索引吗？

> ID：14823291
> 
> 赞同：2
> 
> 时间：2013-02-12T00:05:30.113
> 
> 标签：c++, vector

一个问题有点难以表达，所以我将使用一个例子。假设我这样做：

```
generate(myvec.begin(), myvec.end(), func()) 
```

我可以拥有它，以便 func() 可以读取生成的索引：

```
int func()
{
   if(index<2)
       return 1;
   else
       return 2;
} 
```

这样`myvec[0]=1, myvec[1]=1, myvec[2]=2, myvec[3]=2,..., myvec[N]=2`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T00:15:43.947

简短的回答是“不，不直接”。它可以创建自己的变量来跟踪索引，但是（在这种情况下）根本无法访问索引本身。

在这种情况下，我几乎可以肯定只使用`std::fill`两次：

```
std::fill_n(myVec.begin(), 2, 1);
std::fill(myVec.begin()+2, myVec.end(), 2); 
```

更短，更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T00:09:55.230

是的，如果您使用函数对象作为生成器（正如 juan 指出的那样，这个解决方案是否能保证按标准工作是值得怀疑的！谨慎行事并使用 Jerry 的方法。）：

```
class mygenerator {
 public:
  mygenerator() : hits(0) {}

  int operator()() {
      hits++; 
      return (hits <= 2 ? 1 : 2);
  }

 private:
  int hits;
} 

...

mygenerator mg1;
std::generate(myvec.begin(), myvec.end(), mg1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:11:27.660

```
class funkygen 
{
  int index;

public:
  funkygen() 
    : index(0)
  { }

  int operator()() 
  { 
    if(t < 2)
      t++;

    return t; 
  }
};

/* other code */

funkygen f;

std::generate(myvec.begin(), myvec.end(), f); 
```

正如 juanchopanza 在对另一个答案的评论中指出的那样，`vec`不能保证以特定的顺序访问的元素。唯一的保证是每个项目都将被访问一次。

# java - 如何在 Wicket 1.5 中禁用序列化？

> ID：14823293
> 
> 赞同：6
> 
> 时间：2013-02-12T00:05:39.213
> 
> 标签：java, wicket

我想在我的 Wicket 应用程序中关闭序列化并将所有页面/会话信息存储在 RAM 中。我的应用程序的用户数量很少（通常为 1 个）；我不需要集群部署；我需要在请求之间缓存一些不可序列化的数据。

有没有办法让 Wicket 不会自动尝试序列化我的页面/会话？[我在https://cwiki.apache.org/confluence/display/WICKET/Page+Storage](https://cwiki.apache.org/confluence/display/WICKET/Page+Storage)尝试了使用 HttpSessionDataStore 的建议，但没有效果。我仍然得到这样的堆栈跟踪：

```
SEVERE: Error serializing object class com.prosc.safetynet.Administer [object=[Page class = com.prosc.safetynet.Administer, id = 0, render count = 1]]
org.apache.wicket.util.io.SerializableChecker$WicketNotSerializableException: Unable to serialize class: com.prosc.safetynet.SafetyNetSession$1
Field hierarchy is:
  0 [class=com.prosc.safetynet.Administer, path=0]
    java.lang.Object org.apache.wicket.Component.data [class=org.apache.wicket.model.CompoundPropertyModel]
      private java.lang.Object org.apache.wicket.model.CompoundPropertyModel.target [class=com.prosc.safetynet.SafetyNetSession$2]
        final com.prosc.safetynet.SafetyNetSession com.prosc.safetynet.SafetyNetSession$2.this$0 [class=com.prosc.safetynet.SafetyNetSession]
          private java.lang.Object com.prosc.safetynet.SafetyNetSession.tryAndSerializeMeBitch [class=com.prosc.safetynet.SafetyNetSession$1] <----- field that is not serializable
    at org.apache.wicket.util.io.SerializableChecker.internalCheck(SerializableChecker.java:395)
    at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:374)
    at org.apache.wicket.util.io.SerializableChecker.checkFields(SerializableChecker.java:655)
    at org.apache.wicket.util.io.SerializableChecker.internalCheck(SerializableChecker.java:578)
    at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:374)
    at org.apache.wicket.util.io.SerializableChecker.checkFields(SerializableChecker.java:655)
    at org.apache.wicket.util.io.SerializableChecker.internalCheck(SerializableChecker.java:578)
    at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:374)
    at org.apache.wicket.util.io.SerializableChecker.checkFields(SerializableChecker.java:655)
    at org.apache.wicket.util.io.SerializableChecker.internalCheck(SerializableChecker.java:578)
    at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:374)
    at org.apache.wicket.util.io.SerializableChecker.checkFields(SerializableChecker.java:655)
    at org.apache.wicket.util.io.SerializableChecker.internalCheck(SerializableChecker.java:578)
    at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:374)
    at org.apache.wicket.util.io.SerializableChecker.writeObjectOverride(SerializableChecker.java:724)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
    at org.apache.wicket.serialize.java.JavaSerializer$CheckerObjectOutputStream.writeObjectOverride(JavaSerializer.java:258)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
    at org.apache.wicket.serialize.java.JavaSerializer.serialize(JavaSerializer.java:77)
    at org.apache.wicket.pageStore.DefaultPageStore.serializePage(DefaultPageStore.java:368)
    at org.apache.wicket.pageStore.DefaultPageStore.storePage(DefaultPageStore.java:146)
    at org.apache.wicket.page.PageStoreManager$PersistentRequestAdapter.storeTouchedPages(PageStoreManager.java:383)
    at org.apache.wicket.page.RequestAdapter.commitRequest(RequestAdapter.java:171)
    at org.apache.wicket.page.AbstractPageManager.commitRequest(AbstractPageManager.java:94)
    at org.apache.wicket.page.PageManagerDecorator.commitRequest(PageManagerDecorator.java:68)
    at org.apache.wicket.page.PageAccessSynchronizer$2.commitRequest(PageAccessSynchronizer.java:281)
    at org.apache.wicket.Application$2.onDetach(Application.java:1598)
    at org.apache.wicket.request.cycle.RequestCycleListenerCollection$3.notify(RequestCycleListenerCollection.java:99)
    at org.apache.wicket.request.cycle.RequestCycleListenerCollection$3.notify(RequestCycleListenerCollection.java:97)
    at org.apache.wicket.util.listener.ListenerCollection$1.notify(ListenerCollection.java:119)
    at org.apache.wicket.util.listener.ListenerCollection.reversedNotify(ListenerCollection.java:143)
    at org.apache.wicket.util.listener.ListenerCollection.reversedNotifyIgnoringExceptions(ListenerCollection.java:113)
    at org.apache.wicket.request.cycle.RequestCycleListenerCollection.onDetach(RequestCycleListenerCollection.java:95)
    at org.apache.wicket.request.cycle.RequestCycle.onDetach(RequestCycle.java:603)
    at org.apache.wicket.request.cycle.RequestCycle.detach(RequestCycle.java:542)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:287)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:244)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:210)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:870)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:685)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T11:32:02.533

您可以实现自己的 IPageStore，将页面保存在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:26:05.083

我无法评论特定于 Wicket 的任何内容，但一般来说，Http 的全部意义`Session`在于存储`Serializable`请求之间的状态（以及在集群环境中，以允许将该状态复制到集群中的多个节点以提供冗余节点故障事件）。如堆栈跟踪所示，将*未* `Serializable`放入其中的内容通常被视为错误。如果有任何类型的配置选项可以改变这一点，我会有些惊讶（尽管可能有；正如我所说，我不能真正评论 Wicket 方面的事情）。

如果您不需要真正的持久性并且数据不是特别大/复杂，一个简单的替代方法是仅使用页面上的隐藏表单字段来跟踪相关状态。

但是如果你想要的是内存缓存，为什么不实现你自己的呢？这样做很简单：

```
public class SessionCache {
    private static final Map<String, Map<String, Object>> CACHE = Collections.synchronizedMap(new HashMap<String, Map<String, Object>>());

    public static Object getAttribute(String sessionId, String attribName) {
        Map<String, Object> attribs = CACHE.get(sessionId);
        if (attribs != null) {
            synchronized(attribs) {
                return attribs.get(attribName);
            }
        }

        return null;
    }

    public static void setAttribute(String sessionId, String attribName, Object attribValue) {
        Map<String, Object> attribs = CACHE.get(sessionId);
        if (attribs == null) {
            attribs = new HashMap<String, Object>();
            CACHE.put(sessionId, attribs);
        }

        synchronized(attribs) {
            attribs.put(attribName, attribValue);
        }
    }

    public static void destroySession(String sessionId) {
        CACHE.remove(sessionId);
    }

    public static void createSession(String sessionId, boolean force) {
        if (force || ! CACHE.containsKey(sessionId)) {
            CACHE.put(sessionId, new HashMap<String, Object>());
        }
    }
} 
```

请注意，您需要将其挂钩到 Wicket 的会话生命周期中，以便旧会话在过期时被删除。否则，您的手会逐渐出现内存泄漏。从文档看来，您可以`registerUnboundListener()`在[HttpSessionStore](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/session/HttpSessionStore.html)类上使用来完成此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:35:18.470

这是我根据 svenmeier 的回答提出的解决方案。我确信这不是 100% 正确的，但它在我的测试中运行良好：

```
package com.prosc.wicket;

import org.apache.wicket.Application;
import org.apache.wicket.DefaultPageManagerProvider;
import org.apache.wicket.page.IManageablePage;
import org.apache.wicket.page.IPageManagerContext;
import org.apache.wicket.pageStore.IDataStore;
import org.apache.wicket.pageStore.IPageStore;
import org.apache.wicket.pageStore.memory.HttpSessionDataStore;
import org.apache.wicket.pageStore.memory.PageNumberEvictionStrategy;

import java.io.Serializable;
import java.util.HashMap;
import java.util.Map;

/**
 * This class disables Wicket's serialization behavior, while still retaining session and page data in memory (so back button will work).
 * This will run out of memory under heavy load; but it's very convenient for low volume web applications.
 * To disable serialization in your application, call this code:
 * <pre>
 *     setPageManagerProvider( new NoSerializePageManagerProvider( this, getPageManagerContext() ) );
 * </pre>
 */
public class NoSerializePageManagerProvider extends DefaultPageManagerProvider {
    private IPageManagerContext pageManagerContext;

    public NoSerializePageManagerProvider( Application application, IPageManagerContext pageManagerContext ) {
        super( application );
        this.pageManagerContext = pageManagerContext;
    }

    @Override
    protected IDataStore newDataStore() {
        return new HttpSessionDataStore( pageManagerContext, new PageNumberEvictionStrategy( 20 ) );
    }

    @Override
    protected IPageStore newPageStore( IDataStore dataStore ) {
        return new IPageStore() {
            Map<String,Map<Integer,IManageablePage>> cache = new HashMap<String, Map<Integer, IManageablePage>>();

            public void destroy() {
                cache = null;
            }

            public IManageablePage getPage( String sessionId, int pageId ) {
                Map<Integer, IManageablePage> sessionCache = getSessionCache( sessionId, false );
                IManageablePage page = sessionCache.get( pageId );
                if( page == null ) {
                    throw new IllegalArgumentException( "Found this session, but there is no page with id " + pageId );
                }
                return page;
            }

            public void removePage( String sessionId, int pageId ) {
                getSessionCache( sessionId, false ).remove( pageId );
            }

            public void storePage( String sessionId, IManageablePage page ) {
                getSessionCache( sessionId, true ).put( page.getPageId(), page );
            }

            public void unbind( String sessionId ) {
                cache.remove( sessionId );
            }

            public Serializable prepareForSerialization( String sessionId, Object page ) {
                return null;
            }

            public Object restoreAfterSerialization( Serializable serializable ) {
                return null;
            }

            public IManageablePage convertToPage( Object page ) {
                return (IManageablePage)page;
            }

            private Map<Integer, IManageablePage> getSessionCache( String sessionId, boolean create ) {
                Map<Integer, IManageablePage> sessionCache = cache.get( sessionId );
                if( sessionCache == null ) {
                    if( create ) {
                        sessionCache = new HashMap<Integer, IManageablePage>();
                        cache.put( sessionId, sessionCache );
                    } else {
                        throw new IllegalArgumentException( "There are no pages stored for session id " + sessionId );
                    }
                }
                return sessionCache;
            }
        };
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-04T07:16:55.680

我想改进杰西的答案。下面是 IPageStore 的线程安全实现，具有内部“最近最少插入”缓存（每个会话最多保留 5 个最近访问的有状态页面）：

```
public class CustomPageStore implements IPageStore {

private static final Logger logger = LoggerFactory.getLogger(CustomPageStore.class);

private static final int MEDIAN_OF_NUMBER_OF_SESSIONS = 6000;

private ConcurrentMap<String, CustomLinkedHashMap<Integer, IManageablePage>> cache = new ConcurrentHashMap<>(MEDIAN_OF_NUMBER_OF_SESSIONS);

@Override
public void destroy() {
    cache.clear();
}

@Override
public IManageablePage getPage(final String sessionId, int pageId) {
    final Map<Integer, IManageablePage> sessionCache = getSessionCache(sessionId);
    final RequestCycle requestCycle = RequestCycle.get();
    if (sessionCache == null) {
        logger.warn("Missing cache. SessionId: {}, pageId: {}, URL: {}", sessionId, pageId, requestCycle == null ? StringUtils.EMPTY : requestCycle.getRequest().getUrl());
        return null;
    }

    final IManageablePage page;
    //noinspection SynchronizationOnLocalVariableOrMethodParameter
    synchronized (sessionCache) {
        page = sessionCache.get(pageId);
    }

    if (page == null && logger.isDebugEnabled()) {
        logger.debug("Missed page. SessionId: {}, pageId: {}, URL: {}", sessionId, pageId, requestCycle == null ? StringUtils.EMPTY : requestCycle.getRequest().getUrl());
    }

    return page;
}

@Override
public void removePage(final String sessionId, int pageId) {
    final Map<Integer, IManageablePage> sessionCache = getSessionCache(sessionId);
    if (sessionCache != null) {
        //noinspection SynchronizationOnLocalVariableOrMethodParameter
        synchronized (sessionCache) {
            sessionCache.remove(pageId);
        }
    }
}

@Override
public void storePage(final String sessionId, IManageablePage page) {
    final LinkedHashMap<Integer, IManageablePage> sessionCache = getOrCreateSessionCache(sessionId);
    final int pageId = page.getPageId();
    //noinspection SynchronizationOnLocalVariableOrMethodParameter
    synchronized (sessionCache) {
        if (sessionCache.containsKey(pageId)) {
            // do this to change insertion order and update least inserted entry
            sessionCache.remove(pageId);
            sessionCache.put(pageId, page);
        } else {
            sessionCache.put(pageId, page);
        }
    }
}

@Override
public void unbind(final String sessionId) {
    cache.remove(sessionId);
}

@Override
public Serializable prepareForSerialization(String sessionId, Object page) {
    return null;
}

@Override
public Object restoreAfterSerialization(Serializable serializable) {
    return null;
}

@Override
public IManageablePage convertToPage(final Object page) {
    return (IManageablePage) page;
}

@Nullable
private Map<Integer, IManageablePage> getSessionCache(final String sessionId) {
    return cache.get(sessionId);
}

@Nonnull
private CustomLinkedHashMap<Integer, IManageablePage> getOrCreateSessionCache(final String sessionId) {
    return cache.computeIfAbsent(sessionId, s -> new CustomLinkedHashMap<>());
}

/** Mimics "least recently inserted" cache */
private static class CustomLinkedHashMap<K, V> extends LinkedHashMap<K, V> {

    /** use this parameter to control memory consumption and frequency of appearance of PageExpiredException */
    private static final int MAX_PAGES_PER_SESSION = 5;

    @Override
    protected boolean removeEldestEntry(final Map.Entry<K, V> eldest) {
        return size() > MAX_PAGES_PER_SESSION;
    }
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-08T14:09:09.043

我想改进约翰尼的答案，他改进了杰西的答案:)

*   这是整体`IPageManagerProvider`，不仅仅是`IPageStore`
*   `store.unbind(sessionId)`通过在会话解除绑定时调用来释放内存
*   也适用于 Wicket 7.x

```
public class NoSerializationButCachingPageManagerProvider implements IPageManagerProvider {

    private static final Logger LOGGER = LoggerFactory.getLogger(NoSerializationButCachingPageManagerProvider.class);

    private final Application application;

    public NoSerializationButCachingPageManagerProvider(final Application application) {
        this.application = Args.notNull(application, "application");
        LOGGER.info("Pages don't get serialized, but in-memory cached.");
    }

    @Override
    public IPageManager get(IPageManagerContext pageManagerContext) {
        final IPageStore store = new NoSerializationButCachingPageStore();
        final IPageManager manager = new PageStoreManager(application.getName(), store, pageManagerContext);
        /*
         * session unbind must call store.unbind() to free memory (prevents memory leak)
         */
        application.getSessionStore().registerUnboundListener((String sessionId) -> store.unbind(sessionId));
        return manager;
    }

} 
```

```
class NoSerializationButCachingPageStore implements IPageStore {

    private static final Logger LOGGER = LoggerFactory.getLogger(NoSerializationButCachingPageStore.class);

    private static final int MEDIAN_OF_NUMBER_OF_SESSIONS = 100;

    private final ConcurrentMap<String, CustomLinkedHashMap<Integer, IManageablePage>> cache = new ConcurrentHashMap<>(MEDIAN_OF_NUMBER_OF_SESSIONS);

    @Override
    public void destroy() {
        cache.clear();
    }

    @Override
    public IManageablePage getPage(final String sessionId, final int pageId) {
        LOGGER.info("getPage. SessionId: {}, pageId: {}", sessionId, pageId);
        final Map<Integer, IManageablePage> sessionCache = getSessionCache(sessionId);
        final RequestCycle requestCycle = RequestCycle.get();
        if (sessionCache == null) {
            LOGGER.warn("Missing cache. SessionId: {}, pageId: {}, URL: {}", sessionId, pageId, requestCycle == null ? "" : requestCycle.getRequest().getUrl());
            return null;
        }

        IManageablePage page;
        // noinspection SynchronizationOnLocalVariableOrMethodParameter
        synchronized (sessionCache) {
            page = sessionCache.get(pageId);
        }

        if (page == null && LOGGER.isDebugEnabled()) {
            LOGGER.debug("Missed page. SessionId: {}, pageId: {}, URL: {}", sessionId, pageId, requestCycle == null ? "" : requestCycle.getRequest().getUrl());
        }

        return page;
    }

    @Override
    public void removePage(final String sessionId, final int pageId) {
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("removePage. SessionId: {}, pageId: {}", sessionId, pageId);
        }
        final Map<Integer, IManageablePage> sessionCache = getSessionCache(sessionId);
        if (sessionCache != null) {
            // noinspection SynchronizationOnLocalVariableOrMethodParameter
            synchronized (sessionCache) {
                sessionCache.remove(pageId);
            }
        }
    }

    @Override
    public void storePage(final String sessionId, final IManageablePage page) {
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("storePage. SessionId: {}, pageId: {}, cache-size: {}", sessionId, page.getPageId(), cache.size());
        }
        final LinkedHashMap<Integer, IManageablePage> sessionCache = getOrCreateSessionCache(sessionId);
        final int pageId = page.getPageId();
        // noinspection SynchronizationOnLocalVariableOrMethodParameter
        synchronized (sessionCache) {
            if (sessionCache.containsKey(pageId)) {
                // do this to change insertion order and update least inserted entry
                sessionCache.remove(pageId);
                sessionCache.put(pageId, page);
            } else {
                sessionCache.put(pageId, page);
            }
        }
    }

    /**
     * @param sessionId
     */
    @Override
    public void unbind(final String sessionId) {
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("unbind/cache-remove. SessionId: {}", sessionId);
        }
        cache.remove(sessionId);
    }

    @Override
    public Serializable prepareForSerialization(final String sessionId, final Serializable page) {
        return null;
    }

    @Override
    public Object restoreAfterSerialization(final Serializable serializable) {
        return null;
    }

    @Override
    public IManageablePage convertToPage(final Object page) {
        return (IManageablePage) page;
    }

    private Map<Integer, IManageablePage> getSessionCache(final String sessionId) {
        return cache.get(sessionId);
    }

    private CustomLinkedHashMap<Integer, IManageablePage> getOrCreateSessionCache(final String sessionId) {
        return cache.computeIfAbsent(sessionId, (final String s) -> new CustomLinkedHashMap<>());
    }

    /**
     * Mimics "least recently inserted" cache
     */
    private static class CustomLinkedHashMap<K, V> extends LinkedHashMap<K, V> {

        private static final long serialVersionUID = 1L;
        /**
         * use this parameter to control memory consumption and frequency of appearance of PageExpiredException
         */
        private static final int MAX_PAGES_PER_SESSION = 3;

        @Override
        protected boolean removeEldestEntry(final Map.Entry<K, V> eldest) {
            return size() > MAX_PAGES_PER_SESSION;
        }
    }
} 
```

# c# - 尝试通过按钮单击事件将数据添加到 sql 数据库时捕获 SqlException 抛出错误无效语法

> ID：14823296
> 
> 赞同：1
> 
> 时间：2013-02-12T00:05:52.240
> 
> 标签：c#, sql, winforms, ado.net

我正在为一个学校项目开发一个应用程序，但在将数据添加到 sql 数据库时遇到了麻烦。计划是用户将单击一个按钮来“添加”数据，这将打开一个带有各种文本框的新表单，用于输入数据。满意后，用户单击“添加详细信息”，然后将这些信息添加到 sql 数据库中。问题是 try catch 不断返回错误，我不知道为什么，对于有新眼光的人来说，这可能是一个简单的解决方法。代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace CarsULike
{
public partial class AddCust : Form
{
    public AddCust()
    {
        InitializeComponent();
    }

    private void AddCust_Load(object sender, EventArgs e)
    {

    }

    private void AddCustBtn_Click(object sender, EventArgs e)
    {
        if (FirstNameTxtBox.Text == "")
        {
            MessageBox.Show("Please enter a First Name");
        }
        else if (SurnameTxtBox.Text == "")
        {
            MessageBox.Show("Please enter a Surname");
        }
        else if (TitleTxtBox.Text == "")
        {
            MessageBox.Show("Please enter a Title");
        }
        else if (Address1TxtBox.Text == "")
        {
            MessageBox.Show("Please enter an address");
        }
        else if (TownCityTxtBox.Text == "")
        {
            MessageBox.Show("Please enter a Town/City");
        }
        else if (PostCodeTxtBox.Text == "")
        {
            MessageBox.Show("Please enter a Postcode");
        }
        else
        {
            //stores the values entered as variables
            string firstName = FirstNameTxtBox.Text;
            string surname = SurnameTxtBox.Text;
            string title = TitleTxtBox.Text;
            string address1 = Address1TxtBox.Text;
            string address2 = Address2TxtBox.Text;
            string townCity = TownCityTxtBox.Text;
            string postCode = PostCodeTxtBox.Text;
            string mobPhone = MobPhoneTxtBox.Text;
            string homePhone = HomePhoneTxtBox.Text;
        }

        //establishes a connection with the database
        SqlConnection connection = new SqlConnection(@"Data Source=Lee-PC\SQLEXPRESS; Initial Catalog=CarsULike_P116274;Integrated Security=True");
        SqlCommand cmd = new SqlCommand();
        //SqlDataReader datareader;
        string sql;

        try
        {
            // this query is for insertion into the Customer table
            sql = "INSERT INTO Customer (FirstName, Surname, Title, AddressLine1, AddressLine2, TownCity, PostCode, EmailAddress, MobilePhoneNo, HomePhoneNo)";
            sql += String.Format("VALUES, @FirstName, @Surname, @Title, @AddressLine1, @AddressLine2, @TownCity, @PostCode, @EmailAddress, @MobilePhoneNo, @HomePhoneNo)");

            cmd = new SqlCommand(sql, connection);
            cmd.CommandText = sql;
            cmd.CommandType = CommandType.Text;

            cmd.Parameters.AddWithValue("@FirstName", FirstNameTxtBox.Text);
            cmd.Parameters.AddWithValue("@Surname", SurnameTxtBox.Text);
            cmd.Parameters.AddWithValue("@Title", TitleTxtBox.Text);
            cmd.Parameters.AddWithValue("@AddressLine1", Address1TxtBox.Text);
            cmd.Parameters.AddWithValue("@AddressLine2", Address2TxtBox.Text);
            cmd.Parameters.AddWithValue("@TownCity", TownCityTxtBox.Text);
            cmd.Parameters.AddWithValue("@PostCode", PostCodeTxtBox.Text);
            cmd.Parameters.AddWithValue("@EmailAddress", MobPhoneTxtBox.Text);
            cmd.Parameters.AddWithValue("@MobilePhoneNo", HomePhoneTxtBox.Text);
            cmd.Parameters.AddWithValue("@HomePhoneNo", HomePhoneTxtBox.Text);

            connection.Open(); //opens connection
            cmd.ExecuteNonQuery(); //writes to the database
            MessageBox.Show("Details Added", "Successful");
        }

        catch (SqlException ex)
        {
            throw new Exception("Error adding details", ex);

        }
        finally
        {
            connection.Close(); // Close connection
        }
    }

    private void CancelAddCustBtn_Click(object sender, EventArgs e)
    {
        this.Close();   // Close current form
    }
} 
```

我环顾四周，但似乎找不到我要找的东西..或者我只是不知道我在找什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:07:49.403

**改变**

```
"VALUES, @FirstName, @Surname, @Title, @AddressLine1, @AddressLine2, @TownCity, @PostCode, @EmailAddress, @MobilePhoneNo, @HomePhoneNo)" 
```

**到**

```
"VALUES ( @FirstName, @Surname, @Title, @AddressLine1, @AddressLine2, @TownCity, @PostCode, @EmailAddress, @MobilePhoneNo, @HomePhoneNo)" 
```

将逗号更改为 open-paren。

可能还有其他错误，但这绝对是一个。

此外，您可能需要调整您的 catch 语句以确保您看到的是准确的 sql 错误。通常，SQL 异常（或内部异常）会给您一个很好的线索，让您了解 SQL 代码有什么问题，或者连接字符串是否有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:10:35.673

在这部分

> `"VALUES, @FirstName`

您没有打开稍后关闭的括号，这就是错误。

# python - 使用正则表达式匹配 html 链接元素中的 url

> ID：14823298
> 
> 赞同：0
> 
> 时间：2013-02-12T00:05:56.987
> 
> 标签：python, regex

我正在尝试提取其中包含并匹配两个标签的 URL，这些标签具有关闭以及打开/未关闭的带有 href 的标签。

这就是正则表达式：

```
<(\w+)\s[^<>]*?href=[\'"]([\w$-_.+!*\'\(\),%\/:#=?~\[\]!&@;]*?)[\'"].*?>((.+?)</\1>)? 
```

以下是一些示例数据：

```
<link href='http://blah.net/message/new/?stopemails.aspx?id=5A42FDF5' /><table><tr><td>
<a href='http://blah.net/message/new/'>Click here and submit your updated information </a> <br><br>Thanking you in advance for your attention to this matter.<br><br>

Regards, <br>
Debbi Hamilton
</td></tr><tr><td><br><br></td></tr></table> 
```

并将其放入[http://re-try.appspot.com/](http://re-try.appspot.com/)或[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)（是的，我知道它是针对 java 的）产生的正是我想要得到的: 标记、href 文本、带有结束标记的封闭文本以及封闭文本本身。

也就是说，当我在我的 python 应用程序中使用它时，最后两组（带标签的封闭文本和本身封闭的文本）总是`None`. 我怀疑它与具有反向引用的组中的组有关：((.+?))？

```
另外，我应该提到我专门使用：
    matcher = re.compile(...)
    matcher.findall（数据）

```

但是这些群体`None`同时出现在`matcher.search(data)`和`matcher.match(data)`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:15:55.060

恕我直言，你想做的很傻，你不应该做。

也就是说，它似乎对我有用（我的意思是给出非无结果）：

```
>>> reg = r'<(\w+)\s[^<>]*?href=[\'"]([\w$-_.+!*\'\(\),%\/:#=?~\[\]!&@;]*?)[\'"].*?>((.+?)</\1>)?'
... 
>>> d = """
<link href='http://blah.net/message/new/?stopemails.aspx?id=5A42FDF5' /><table><tr><td>
<a href='http://blah.net/message/new/'>Click here and submit your updated information </a> <br><br>Thanking you in advance for your attention to this matter.<br><br>
Regards, <br>
Debbi Hamilton
</td></tr><tr><td><br><br></td></tr></table>
"""
>>> 
>>> re.findall(reg, d)
[('link', 'http://blah.net/message/new/?stopemails.aspx?id=5A42FDF5', '', ''), 
('a', 'http://blah.net/message/new/', 'Click here and submit your updated information </a>', 'Click here and submit your updated information ')] 
```

我的猜测是您在制作正则表达式时忘记使用原始字符串，即

```
>>> reg = '<(\w+)\s[^<>]*?href=[\'"]([\w$-_.+!*\'\(\),%\/:#=?~\[\]!&@;]*?)[\'"].*?>((.+?)</\1>)?'
... 
>>> re.findall(reg, d)
[('link', 'http://blah.net/message/new/?stopemails.aspx?id=5A42FDF5', '', ''), 
('a', 'http://blah.net/message/new/', '', '')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:39:59.710

```
pat = ('<'
       '(\w+)\s[^<>]*?'
       'href='
       '([\'"])'
       '([\w$-_.+!*\'(\),%/:#=?~[\]!&@;]*?)'
       '(?:\\2)'
       '.*?'
       '>'
       '((.+?)</\\1>)?') 
```

你只需要放`\\1`或`r'...'`像 DSM 一样

请注意，我对您的模式进行了微小的修改：有两个`!`
写作`[\]`而不是`\[\]`因为正则表达式机制很明显，`[`在第一个之后`[`是一个简单的字符
，对于`(\)`

请注意，我做了一组`([\'"])`并在最后放置`(?:\\2)`了相同的 内容

# android - Android：TableLayout 行未通过 XML 居中

> ID：14823302
> 
> 赞同：2
> 
> 时间：2013-02-12T00:06:02.503
> 
> 标签：android, xml, layout

我正在尝试在 Android 中使用 XML 将表格行居中，但我遇到了一个问题，即对于我的两行仅包含两个按钮的行来说，它向右偏了一点点。这是我的代码，我有它的外观截图

```
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center">
        <ImageView
            android:id="@+id/hiragana_multiple_choice_main_image"
            android:gravity="center" 
            android:layout_width="fill_parent"
            android:layout_height="match_parent"/>
    </TableRow>
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:padding="30dp">
        <Button
            android:id="@+id/hiragana_multiple_choice_button_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1" />
        <Button
            android:id="@+id/hiragana_multiple_choice_button_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1" />
    </TableRow>
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="30dp"
        android:gravity="center">

        <Button
            android:id="@+id/hiragana_multiple_choice_button_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1" />

        <Button
            android:id="@+id/hiragana_multiple_choice_button_4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1" />
    </TableRow>
</TableLayout> 
```

[http://www.ptrprograms.com/multiple_choice_offset.png](http://www.ptrprograms.com/multiple_choice_offset.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:32:23.600

尝试使用 LinearLayout 而不是 tablelayout，它会将其固定为居中，并使用 fillparent 和包装内容以获得最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:10:35.060

试试这些方法......

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="65dp"
        android:src="@drawable/ic_launcher" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginTop="59dp"
        android:layout_toLeftOf="@+id/imageView1"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/imageView1"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/button1"
        android:layout_below="@+id/button1"
        android:layout_marginTop="68dp"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button3"
        android:layout_alignBottom="@+id/button3"
        android:layout_alignLeft="@+id/button2"
        android:layout_alignParentRight="true"
        android:text="Button" />

</RelativeLayout> 
```

# css - 输入和输入的CSS大纲不同：focus

> ID：14823303
> 
> 赞同：6
> 
> 时间：2013-02-12T00:06:02.987
> 
> 标签：css, html

我遇到了一个盒子及其相关的 CSS 轮廓样式的问题。当框聚焦时，它应该有一个蓝色轮廓（工作）。在表单验证中，如果出现问题，将添加 .error 类，将轮廓和背景颜色更改为红色（不起作用）

在焦点上，我有一种风格：

```
input, select {
    font-size: 10pt;
    border: solid 1px #9598a0;
    padding: 2px;
}

input:focus{
    background: #EFF5FF;
    color: black;
    outline: solid 2px #73A6FF;
} 
```

对于错误：

```
input.error:focus, .error {
    outline: 2px solid red;
    background: rgb(255,240,240);
} 
```

问题是没有焦点的轮廓在输入框的外侧，而焦点的轮廓在框的内侧，所以当你点击它时元素会跳转（CHROME）。

请看这张图片：

![在此处输入图像描述](../Images/8252f36966ca0c4d63b1bd0d9cc4bf68.png)

一是专注，二是不专注有错误，三是有错误有专注。请注意无焦点如何导致边框扩展到对象之外。

有没有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-26T17:11:42.757

尝试明确设置[轮廓偏移。](https://developer.mozilla.org/en-US/docs/Web/CSS/outline-offset)任何有效的（参见语法部分）值都应该这样做，但对于在元素内移动轮廓，可以应用负值，例如：

[JSFiddle](https://jsfiddle.net/lapinek/bdLc2276/)

```
input {
    background: #EFF5FF;
    outline: solid 2px #73A6FF;
    outline-offset: -2px;
}

input.error {
    outline: 2px solid red;
    background: rgb(255,240,240);
} 
```

尽管您询问的是 Chrome，但请注意 IE 不支持 outline-offset 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T01:37:08.217

将每个更改`outline`为`border`并给基本`input`选择器一个透明的边框（例如也可以是灰色的），因为它不会在 et Voilá 周围推送第二个输入：）（[更新的 JSFiddle](http://jsfiddle.net/NoahWetjen/wHz8A/3/)）

```
input{
    font-size: 10pt;
    border: solid 1px #9598a0;
    padding: 2px;
    border: solid 2px transparent;
}
input:focus{
    background: #EFF5FF;
    color: black;
    border: solid 2px #73A6FF;
}

input.error:focus{
    border: 2px solid red;
    background: rgb(255,240,240);
}

.error {
    border: 2px solid red;
    background: rgb(255,240,240);
} 
```

# android - 为什么我的异常处理程序不会捕获 Android SQLite 插入错误？

> ID：14823304
> 
> 赞同：19
> 
> 时间：2013-02-12T00:06:08.270
> 
> 标签：android, sqlite, exception-handling

我第一次使用 SQLite，并试图学习它的异常处理，所以我在我的测试应用程序中强制插入错误。发生异常，我看到它已写入 Eclipse LogCat 输出窗口。但是它不会被代码捕获。我在这里看到了关于确保使用正确的异常类型的其他问题，并认为我做对了。知道我错过了什么吗？

在我的主要活动中的以下语句中，`myTable`是一个扩展我自己`AbstractDbAdapter`的类（它有一个`DatabaseHelper`扩展类`SQLiteOpenHelper`）。

```
try {
    myTable.create("dupkey");
}
catch (android.database.sqlite.SQLiteConstraintException e) {
    Log.e(TAG, "SQLiteConstraintException:" + e.getMessage());
}
catch (android.database.sqlite.SQLiteException e) {
    Log.e(TAG, "SQLiteException:" + e.getMessage());
} 
catch (Exception e) {
    Log.e(TAG, "Exception:" + e.getMessage());
} 
```

示例堆栈跟踪：

```
Error inserting id="dupkey" last_seen_ts=1360624732 first_seen_ts=1360624732 android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
  at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
  at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1582)
  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
  at com.myCompany.testApp.myTable_DbAdapter.create(myTable_DbAdapter.java:51) 
```

和`myTable`类`AbstractDbAdapter`：

```
公共类 myTable_DbAdapter 扩展 AbstractDbAdapter {

    私有静态最终字符串 DATABASE_TABLE = "myTable";

    // 列名 -- ContentValues() 的键
    公共静态最终字符串 KEY_ID = "id";
    公共静态最终字符串 KEY_FIRST_SEEN = "first_seen_ts";
    公共静态最终字符串 KEY_LAST_SEEN = "last_seen_ts";

    公共 myTable_DbAdapter（上下文 ctx）{
        超级（ctx）；
    }

    公共长创建（字符串ID）{
        long firstSeen = System.currentTimeMillis() / 1000; // SQLite 时间戳以秒为单位

        内容值参数 = 新的内容值（）；
        args.put(KEY_ID, id);
        args.put(KEY_FIRST_SEEN, firstSeen);
        args.put(KEY_LAST_SEEN, firstSeen); // 默认为 firstSeen 用于新条目

        返回 mDb.insert(DATABASE_TABLE, null, args);
    }
}

公共抽象类 AbstractDbAdapter {

    protected static final String TAG = "AbstractDbAdapter";

    受保护的 DatabaseHelper mDbHelper = null;
    受保护的 SQLiteDatabase mDb = null;

    受保护的静态最终字符串 TABLE_CREATE_MYTABLE =
        "创建表我的表(" +
        " id text 主键不为空" +
        ", first_seen_ts 整数不为空" +
        ", last_seen_ts 整数不为空" +
        ");";

    protected static final String DATABASE_NAME = "myDB";
    受保护的静态最终 int DATABASE_VERSION = 1;

    受保护的最终上下文 mCtx；

    受保护的静态类 DatabaseHelper 扩展 SQLiteOpenHelper {

        DatabaseHelper（上下文上下文）{
            超级（上下文，DATABASE_NAME，空，DATABASE_VERSION）；
        }

        @覆盖
        公共无效onCreate（SQLiteDatabase db）{
            // 注意：SQLite 每个表需要一个 execSQL
            db.execSQL(TABLE_CREATE_MYTABLE);
        }

        @覆盖
        公共无效 onUpgrade（SQLiteDatabase db，int oldVersion，int newVersion）{
            Log.w(TAG, "将数据库从版本" + oldVersion + "升级到" + newVersion + "，破坏现有数据。");
            db.execSQL("如果存在 myTable 则删除表");
            onCreate(db);
        }
    }

    公共 AbstractDbAdapter（上下文 ctx）{
        这个.mCtx = ctx;
    }

    公共 AbstractDbAdapter open() 抛出 SQLException {
        mDbHelper = 新的数据库助手（mCtx）；
        mDb = mDbHelper.getWritableDatabase();
        返回这个；
    }

    公共无效关闭（）{
        如果（mDb！= null）{
            mDb.close();
            mDb = 空；
        }
        如果（mDbHelper！= null）{
            mDbHelper.close();
            mDbHelper = null;
        }
    }

}

```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-12T01:12:20.110

我在这里找到了答案：[SQLiteConstraintException 未捕获](https://stackoverflow.com/questions/3421577/try-catch-problem/4900738#4900738)

SQLiteDatabase.insert() 方法不会引发异常。哦！

对于像我这样的其他 SQLite 新手，如果您想在插入数据库时​​捕获异常，请使用 SQLite.insertOrThrow() 方法。它会抛出一个异常，然后您可以捕获并处理该异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-15T20:20:02.297

虽然不是 100% 与该问题相关，但我在使用 Room 时遇到了类似的问题，Google 为我的搜索返回了这个问题。在 Room 的情况下，似乎没有抛出可捕获的异常，并且 insertOrThrow() 不存在。在审查[https://developer.android.com/reference/kotlin/androidx/room/OnConflictStrategy#ABORT:kotlin.Int](https://developer.android.com/reference/kotlin/androidx/room/OnConflictStrategy#ABORT:kotlin.Int)时，许多选项都被贬值了，但我在这里选择了 OnConflictStrategy.IGNORE 因为这将返回 -1 如果有一个问题。

干杯。

# jquery - 使用jQuery向左/向右滑动div

> ID：14823305
> 
> 赞同：37
> 
> 时间：2013-02-12T00:06:13.393
> 
> 标签：jquery

我在多个地方发现以下代码可以向左/向右滑动：

```
$('#hello').hide('slide', {direction: 'left'}, 1000); 
```

但是，我无法让它工作。这是我正在尝试的简约测试：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
    $(document).ready(function() {
        $("#test").click(function() {
            $('#hello').hide('slide', {direction: 'left'}, 1000);
        });
    });
   </script>
</head>
<body>
    <article >
        <div id="hello">
            Hello       
        </div>
        <p><span id="test">Test</span>
    </arcticle>
</body> 
```

我在 Chrome 和 Safari 中尝试过，但它不起作用。

问题是什么？是否有其他工作方法可以左右滑动？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-12T00:20:15.587

您可以在不使用 jQueryUI 的情况下轻松获得该效果，例如：

```
$(document).ready(function(){
    $('#slide').click(function(){
    var hidden = $('.hidden');
    if (hidden.hasClass('visible')){
        hidden.animate({"left":"-1000px"}, "slow").removeClass('visible');
    } else {
        hidden.animate({"left":"0px"}, "slow").addClass('visible');
    }
    });
}); 
```

试试这个工作小提琴：

[http://jsfiddle.net/ZQTFq/](http://jsfiddle.net/ZQTFq/)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-02-12T00:08:37.640

`$('#hello').hide('slide', {direction: 'left'}, 1000);`需要 jQuery-ui 库。见[http://www.jqueryui.com](http://www.jqueryui.com)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-21T10:42:56.007

最简单的方法是使用[jQuery](http://jquery.com/)和[animate.css](https://daneden.github.io/animate.css/)动画库。

**Javascript**

```
/* --- Show DIV --- */
$( '.example' ).removeClass( 'fadeOutRight' ).show().addClass( 'fadeInRight' );

/* --- Hide DIV --- */
$( '.example' ).removeClass( 'fadeInRight' ).addClass( 'fadeOutRight' ); 
```

**HTML**

```
<div class="example">Some text over here.</div> 
```

很容易实现。只是不要忘记在标题中包含 animate.css 文件:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-20T08:40:19.783

```
$(document).ready(function(){
$("#left").on('click', function (e) {
        e.stopPropagation();
        e.preventDefault();
        $('#left').hide("slide", { direction: "left" }, 500, function () {
            $('#right').show("slide", { direction: "right" }, 500);
        });
    });
    $("#right").on('click', function (e) {
        e.stopPropagation();
        e.preventDefault();
        $('#right').hide("slide", { direction: "right" }, 500, function () {
            $('#left').show("slide", { direction: "left" }, 500);
        });
    });

})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<div style="height:100%;width:100%;background:cyan" id="left">
<h1>Hello im going left to hide and will comeback from left to show</h1>
</div>
<div style="height:100%;width:100%;background:blue;display:none" id="right">
<h1>Hello im coming from right to sho and will go back to right to hide</h1>
</div>
```

```
$("#btnOpenEditing").off('click');
$("#btnOpenEditing").on('click', function (e) {
    e.stopPropagation();
    e.preventDefault();
    $('#mappingModel').hide("slide", { direction: "right" }, 500, function () {
        $('#fsEditWindow').show("slide", { direction: "left" }, 500);
    });
}); 
```

它会像魅力一样工作，看看演示。

# bash - bash (sed/awk?) 在文件中查找行并打印上面 3 行的内容？

> ID：14823306
> 
> 赞同：0
> 
> 时间：2013-02-12T00:06:23.440
> 
> 标签：bash, awk

我想在 txt 文件中找到一行，然后在找到的行上方插入字符串 3 行

输入：

```
aaa
bbb
ccc
ddd
eee
fff 
```

我想查找“eee”，然后在其上方打印“WWW”3 行。输出：

```
aaa
WWW
bbb
ccc
ddd
eee
fff 
```

我正在使用 awk，只能在“eee”上方打印“WWW”1 行，而不是 3：

```
awk '/eee/{print "WWW"} 4' file.txt 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:28:26.493

单程：

```
awk '{a[NR]=$0;}/eee/{a[NR-3]="www\n" a[NR-3];}END{for(i=1;i<=NR;i++)print a[i];}' file 
```

# android - 如何处理白标平台移动应用程序的部署？

> ID：14823310
> 
> 赞同：6
> 
> 时间：2013-02-12T00:06:39.530
> 
> 标签：android, ios, deployment, maintenance

我正在开发一种产品，该产品将部署到许多不同的组织（理想场景，几十个）。系统的每次部署（由 iOS 和 Android 的原生应用程序组成）将涉及以下内容：

*   特定于组织的品牌（即新皮肤）
*   与组织的身份验证系统和用户数据库集成
*   一些自定义功能取决于组织的需求

换句话说，核心功能在所有部署中都将保持不变，但每个实例看起来会有所不同，会连接到不同的身份验证系统，并启用/禁用某些功能。

**我的问题：**管理我们的 2 个移动代码库（iOS 和 Android）以最大限度地减少重复并简化部署过程的最佳策略是什么？

我们正在讨论的三个解决方案是：

1.  创建一个跨所有实例共享的核心库（作为子项目/库项目或 git 子模块），并在顶部添加一个带有品牌和任何配置细节的薄层。

2.  维护一个具有核心功能的 Git 分支，并为每个包含附加代码的部署创建一个新分支。

3.  做一些完全不同的事情，stackoverflow 上一些更聪明的人建议。

你觉得哪个听起来最好？提前感谢您的任何反馈！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:55:37.283

我会考虑的一种方法是**依赖注入**。

在 Android 上，如果您使用诸如 Square 的[Dagger](http://square.github.com/dagger/)之类的依赖注入工具，您可以简单地创建一个`@Module`类来提供组件并将其注入到您的应用程序中。这样，您可以将每个白标签客户端的逻辑维护为单独的组件，并且在编译时，将通过`@Module`类中的引用选择特定组件。

这也是测试应用程序的好方法，它可以避免大量样板代码。

Square 还提供了以下会谈中的重要信息：

[Dagger：适用于 Android 和 Java 的快速依赖注入器](http://www.infoq.com/presentations/Dagger)

[工程优雅：Square Stack 的秘密](http://www.infoq.com/presentations/Square)

iOS 也有类似的框架，一个是[Objection](http://objection-framework.org/)。

**框外选项：**

是否要求移动客户端必须直接与白标服务器对话？如果没有，您可能需要考虑使用自己的服务器作为白标服务器的代理。这会将所有业务逻辑移到您的服务器上，支持您的所有客户端。

我对此没有任何经验，但一个看似有希望的选择是Google 正在开发的[J2ObjC](https://code.google.com/p/j2objc/)。

```
J2ObjC is an open-source command-line tool from Google that translates
Java code to Objective-C for the iOS (iPhone/iPad) platform. This tool
enables Java code to be part of an iOS application's build, as no editing
of the generated files is necessary. The goal is to write an app's non-UI
code (such as data access, or application logic) in Java, which is then
shared by web apps (using GWT), Android apps, and iOS apps. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:04:01.017

我们处于类似的情况（我们有一个带有 Android 和 iOS 代码库的白标应用程序平台），我们将把我们的原生代码库转移到 C# 实现。我们将使用[MonoTouch](http://xamarin.com/monotouch) / [Mono for Android](http://xamarin.com/monoforandroid)。实际上，我从上周开始就开始研究这个（我一直在问一些关于 SO 的问题以弄清楚一些 Mono 基础知识）。

这实际上是您的选项 1，但每个平台都将基于 C# 代码构建（如果需要，可以选择与“本机”代码库进行交互）。

Mono 应该使我们能够在平台之间共享 30-50% 的代码（目前是 iOS 和 Android，未来可能是 Windows Phone）。从我的一点经验来看，性能似乎不错（记住：很多人也使用[MonoGame](http://monogame.codeplex.com)来创建[高性能游戏](http://tirania.org/slides/AltDevConf-2012-Mono.pdf)，我认为 Unity 也将 Mono 用于 3D 游戏）。对我个人而言，这也是附加值。我仍然希望有朝一日能够制作游戏，并且对“严肃”应用程序的 Mono 框架的一些基本经验将降低将 MonoGame 框架用于游戏应用程序的障碍。

这种设置的好处是您可以将所有代码（Android、iOS、Windows Phone）保存在一个解决方案中。创建一个核心“库”项目（模型、服务调用等）并为每个平台创建另一个项目。每个特定平台项目都将具有适当的 UI，并具有真正的原生体验。

有关如何使用 Mono 创建多平台应用程序的印象，[请阅读此处的简短介绍](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Building_Cross_Platform_Applications)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:15:28.447

如果您不依赖本机 GUI 使用 Unity3d，请制作具有所有主要功能的自己的 Unity 包（并将其开发为适用于所有平台的单个应用程序），对于任何部署应用程序，您都必须制作新的 Unity 项目并将此包导入其中，自定义它（可能是通过替换资源和编辑配置）。（如果您需要升级核心功能，您需要再次简单地导入新版本的核心包到交付的项目）。

或使用您的选项 1：

1.  C++ 核心库
2.  可以为所有应用程序单独的资源包（可能是自动化和模块配置也在这里）
3.  Android-Java、iOs-Objective-C全平台原生UI实现

# javascript - on/off for css selectors

> ID：14823336
> 
> 赞同：0
> 
> 时间：2013-02-12T00:09:52.490
> 
> 标签：javascript, html, css

I have, for example, this CSS rules:

```
<style>
table {background:red;}
div {background:green;}
</style> 
```

and the following HTML, calling a JS function:

```
<table onclick="turnItsCSS(on/off)"><tr><td>123</td></tr></table> 
```

Is it possible for `turnItsCSS()` to toggle CSS rules for tables?

All I figured is to parse `innerHTML` in `document head`, but it doesn't seem to be sufficient.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:11:29.323

In jQuery you can use the [`.addClass()`](http://api.jquery.com/addClass/) or [`.removeClass()`](http://api.jquery.com/removeClass/) (or more simply, the [`.toggleClass()`](http://api.jquery.com/toggleClass/) function)

So, say you have a table:

```
<a href="#" id="addClass">Add CSS</a>
<table id="the_table">
    <tr>
        <td>Hello, World</td>
    </tr>
</table> 
```

And you have the following CSS:

```
.table_red {
    color: red;
} 
```

In your jQuery, you could have:

```
$("#addClass").click(function() {
    $("#the_table").addClass(".table_red");

    // Check if the class is active, and remove it for a toggle.
    // or use the .toggleClass() function.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:17:41.917

这是在 css 文件之间切换的好方法：

```
<button onclick="$('[rel=stylesheet]').attr('href','http://www.example.com/css/menu_red.css')">red</button>

<button onclick="$('[rel=stylesheet]').attr('href','http://www.example.com/css/menu_black.css')">black</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:25:04.930

您可以使用 jQuery 或 JavaScript 在 JavaScript 中动态更改对象样式您可以通过 id 或类名获取元素并设置样式

```
var obj = getElementById("idName");
obj.style.width = "300px"; 
```

或者

```
var obj = getElementsByClassName("classname")[0]; //return array with with all elements with same class
obj.style.width = "300px"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T00:25:53.710

这是一个使用 HTML5 的示例，不幸的是，我认为 < IE10 不支持它。

HTML

```
<table onclick="this.classList.toggle('on');"><tr><td>123</td></tr></table> 
```

CSS

```
.on { 
    background-color:red;
} 
```

[http://jsfiddle.net/sGKgV/](http://jsfiddle.net/sGKgV/)

**查看[https://stackoverflow.com/a/196038/1156119](https://stackoverflow.com/a/196038/1156119)以全面了解其他技术。**

# javascript - Bookmarklet/javascript to post to message board?

> ID：14823339
> 
> 赞同：0
> 
> 时间：2013-02-12T00:10:17.273
> 
> 标签：javascript, bookmarklet

I'm looking for a way to post to a message board via a bookmarklet, to make the process easier when doing so from a smartphone. Is this even possible?

This would be a message board that I am already a logged in member of. This would be for an ongoing thread where I am posting status updates and do not need to actually visit the page when posting.

The end goal would be to use this with the Drafts app for iPhone, so I can quickly type out an update and then post it to the specific thread.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:46:53.900

简单的方法：检查用于提交帖子的留言板上的表单代码。找到表单操作和表单变量。Bookmarklet 然后可以将表单变量直接提交给表单操作。

如果简单的方法被一些障碍或复杂性阻塞，可以尝试如下两步过程。

1.) 在带有数据的页面上运行小书签并导航到留言板（可能在新选项卡中），但首先将数据附加到 URL 哈希。喜欢`http://someforumsite.tld/topic1#title=abc&body=xyz`

2.) 在论坛网站上再次运行小书签，从哈希中读取数据，将其输入到页面上的表单中，然后提交表单。

# unit-testing - 相当于 FakeItEasy 中 JustMock 的 ReturnsCollection()？

> ID：14823340
> 
> 赞同：2
> 
> 时间：2013-02-12T00:10:19.557
> 
> 标签：unit-testing, linq-to-sql, fakeiteasy, justmock

使用[JustMock](http://www.telerik.com/products/mocking.aspx)，我可以像这样轻松地在 Linq to SQL 中模拟带有列表的 DataContext 表，其中一个 IEnumerable 通过 ReturnsCollection() 代替每个 DataContext 的表，允许我插入假数据：

```
[TestMethod]
public void ShouldGetManagersByHireDate()
{
   var context = Mock.Create<MyDataContext>();
   Mock.Arrange(()=> context.Employees).ReturnsCollection(GetFakeEmployees());
   Mock.Arrange(() => context.Managers).ReturnsCollection(GetFakeManagers());

   var repository = new EmployeeRepository(context);
   var managers = repository.GetManagersByHireDate(new DateTime(2002, 1, 1), DateTime.Now);

   Assert.AreEqual(1, managers.Count());
   Assert.AreEqual(1, managers.FirstOrDefault().ID);
}

private IEnumerable<Employee> GetFakeEmployees()
{
    return new List<Employee> { 
        new Employee { ID = 1, HireDate = new DateTime(2004, 12, 1) }, 
        new Employee { ID = 2, HireDate = new DateTime(2006, 7, 1) }, 
        new Employee { ID = 3, HireDate = new DateTime(2009, 3, 1) } 
    };
}

private IEnumerable<Manager> GetFakeManagers()
{
    return new List<Manager> { 
        new Manager { ID = 1 }
    };
} 
```

这将是正在测试的方法：

```
public IQueryable<Employee> GetManagersByHireDate(DateTime start, DateTime end)
{
    return  from e in context.Employees
            join m in context.Managers on e.ID equals m.ID
            where e.HireDate >= start && e.HireDate <= end
            select e;
} 
```

我正在寻找某种方式来执行相同的魔法，让我可以`IEnumerable<T>`代替`Table<T>`用于测试 Linq to SQL 的目的，最好是在 FakeItEasy 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:34:57.713

Linq to SQL 并不是使用开源工具测试的最简单的东西。希望这种方法对您有用。

FakeItEasy 没有与 JustMock 的 ReturnCollection 完全相同的方法，它允许您模拟 ITable 以返回 IEnumerable。您拥有的一种选择是创建一个类似于[此处](http://goo.gl/UhGCp)所示的 MockableTable 。然后填充你的表，你可以有类似的东西

```
private ITable<Employee> GetFakeEmployees() {
    List<Employee> sampleData = /* fill it up with employees */
    var employeeTable = new MockableTable<Employee>(null, sampleData.AsQuerable());                 
    return employeeTable;
} 
```

此外，FakeItEasy 不会拦截 DataContext 上的 Employees 属性，因为它是具体类上的非虚拟属性。您可以创建一个简单的自定义基类并让 MyDataContext 类直接从中派生。

```
public abstract class CustomDataContext : DataContext, ICustomDataContext {
}

public interface ICustomDataContext {
    ITable<Employee> { get; }
} 
```

这里的要点是利用接口进行模拟。然后在您的测试方法中，您将拥有：

```
[TestMethod]
public void ShouldGetManagersByHireDate() {
   var context = A.Fake<ICustomDataContext>();
   A.CallTo(()=> context.Employees).Returns(GetFakeEmployees());

   var repository = new EmployeeRepository(context);
   var managers = repository.GetManagersByHireDate(new DateTime(2002, 1, 1), DateTime.Now);

   Assert.AreEqual(1, managers.Count());
   Assert.AreEqual(1, managers.FirstOrDefault().ID);
} 
```

我实际上并没有编译这个，但概念应该是稳定的。依赖抽象将使您的代码更易于测试和模拟。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:37:54.727

我使用 FakeItEasy 完成此操作的方法是向 DataContext 添加一个接口，并将其用作我的 repos 中的依赖项。例如

```
public interface IMyDataContext : IDisposable
{
    IQueryable<Employee> Employees { get; }

    // etc.
}

public partial class MyDataContext: IMyDataContext
{
    IQueryable<Message> IMyDataContext.Employees
    {
        get { return this.Employees; }
    }

    // etc.
}

public class EmployeeRepository
{
    public EmployeeRepository(IMyDataContext context)
    {
        // etc.
    }
} 
```

在我的测试中：

```
var context = A.Fake<IMyDataContext>();
A.CallTo(() => context.Employees).Returns(new[] { new Employee { Name = "John", Name = "Fred" }.AsQueryable());
var repository = new EmployeeRepository(context) 
```

我认为不需要任何考虑`ITable`。

# vba - 如何在 UDF 中使用由查询调用的静态成员？

> ID：14823347
> 
> 赞同：1
> 
> 时间：2013-02-12T00:11:17.803
> 
> 标签：vba, ms-access, static-members

我有一个查询，其中一个值由 UDF 返回：

```
select name,coord,convertCoord(coord) from testTable; 
```

`convertCoord()`使用`Regex`和`MatchCollection`对象返回其值：

```
Dim re As New RegExp
Dim mtch As Match
Dim matches As MatchCollection

Function convertCoord(str As String) As String

re.Pattern = "(find|this)pattern"
Set matches = re.Execute(str)
If matches.Count > 0 Then
    Set mtch = matches(1)
    convertCoord = mtch.Value
Else
    convertCoord = ""
End If

End Function 
```

我正在尝试加快查询速度，我想知道是否有办法制作 , 的一个实例`re`，`mtch`并且`matches`每次调用`convertCoord()`. 如果我理解正确，查询中的每个结果行都会调用`convertCoord()`，它会重复构造和破坏所有对象，并且所有这些对象的创建都会减慢查询速度。

还是它们已经是静态的，因此只构造了一次，因为我已经在函数之外声明了它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:33:36.280

声明时可以使用`Static`关键字`RegExp`。但是，您只能在过程（函数或子例程）中使用它。如果您尝试将其用于模块级变量，则会触发编译器错误。

我认为您不需要声明*mtch*和*匹配*项，`Static`因为您不想将它们的值从一个函数调用保留到下一个函数调用。我也不明白为什么它们应该是模块级变量，所以我将它们设置为函数的本地变量。

```
Function convertCoord(str As String) As String
Static re As RegExp
Dim mtch As Match
Dim matches As MatchCollection

If re Is Nothing Then
    Debug.Print "RegExp Is Nothing"
    Set re = New RegExp
    re.pattern = "(find|this)pattern"
Else
    Debug.Print "RegExp active"
End If

' insert code which uses the RegExp

End Function 
```

使用您的查询测试类似的功能。在您确认它只打印一次*“RegExp Is Nothing”*之后，您可能会想要丢弃这些`Debug.Print`语句。:-)

# jquery - JQuery JSON replace character in a loop

> ID：14823353
> 
> 赞同：2
> 
> 时间：2013-02-12T00:11:38.270
> 
> 标签：jquery, ajax, json

I'm creating a website and needed some help with this JSON file. I've managed to get it to display on the webpage and need to replace certain characters with images. I'm new to web programming and would appreciate a few tips.

This is my JQuery code:

```
$.ajax({
  url:'hall.json',dataType:'json',
  success: function(d) {
    for (var i=0;i<d.seats.length;i++){
    vr = "</br>"
        $('.layout').append(d.seats[i] + vr);}
    }
}); 
```

The code in the JSON file is as follows:

```
{"seats":["00000000000000000011111111111111000000000000000000","0000000000000001111111111111111aaa0000000000000000","00000000000000aa111111111111111aaaaa00000000000000","00000000000001111111111111111111111111000000000000","000000000aa00aaaaaaaaaaaaaaaaaaaaaa1100aa000000000","00000001111001111111111111111111111100111100000000","00000aaaaaa0011aaaaaaaaa11111111aaa1100aaaaaa00000","00001111111001111111111111111111111100111111100000","000aaaaaaa110011111111111111111111110011aaaaaaa000","00111111111100111111111111111111111001111111111000","00aaaaa1111110011111111111111111111001111aaaaaaa00","11111111111100111111111111111111111001111111111110","0aaaaaaaaaaaa001111111111111111111100aaaaaaaaaaaa0","01111111111110011111111111111111110011111111111100","00000000000000001111111111111111110000000000000000","01111111111111001111111111111111100111111111111100","01111111111111001111111111111111110011111111111110","01111111111111001111111111111111100111111111111100","00a11111111111100111111111111111100111111111111a00","00111111111111100111111111111111001111111111111000","00011111111111110011111111111111001111111111111000","00111111111111100111111111111111001111111111111000","00011111111111110011111111111111001111111111111000","00011111111111110011111111111110011111111111110000","0000000111a111111001111a1111a110011111111110000000","00000000111111110011111111111110011111111000000000","00000000001111111001111111111110011111110000000000","00000000000000111001111111111100111000000000000000"],"rows":["DD","CC","BB","AA","Z","Y","W","V","U","T","S","R","Q","P","N","M","L","K","J","H","G","F","E","DC","B","A"],"seatPrice":["                  00000000000000                  ","               0000000000000000000                ","              0000000000000000000000              ","             0000000000000000000000000            ","         00  000000000000000000000000  00         ","       0000  00000000000000000000000  0000        ","     000000  000000000000000000000000  000000     ","    0000000  00000000000000000000000  0000000     ","   000000000  0000000000000000000000  000000000   ","  0000000000  000000000000000000000  0000000000   ","  00000000000  00000000000000000000  00000000000  ","000000000000  000000000000000000000  000000000000 "," 000000000000  00000000000000000000  000000000000 "," 000000000000  0000000000000000000  000000000000  ","                000000000000000000                "," 0000000000000  00000000000000000  0000000000000  "," 0000000000000  000000000000000000  0000000000000 "," 0000000000000  00000000000000000  0000000000000  ","  0000000000000  0000000000000000  0000000000000  ","  0000000000000  000000000000000  0000000000000   ","   0000000000000  00000000000000  0000000000000   ","  0000000000000  000000000000000  0000000000000   ","   0000000000000  00000000000000  0000000000000   ","   0000000000000  0011111111100  0000000000000    ","       0000000000  111111111111  0000000000       ","        00000000  1111111111111  00000000         ","          0000000  111111111111  0000000          ","              000  00000000000  000               "],"priceLookup":[10,20]} 
```

I am trying to replace "0" with a specific image and the same for "1" and "a" Also I'm not sure if I have done it correctly but to replace the commas with a new line I used the `<br>` tag. Is that the correct thing to do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:21:02.493

如果您的代码正在运行，并且您唯一需要的是将文本替换为图像，您可以执行以下操作

```
$.ajax({
  url:'hall.json',
  dataType:'json',
  success: function(d) {
    var html = "";
    for (var i=0;i<d.seats.length;i++){
        var seat = d.seats[i];
        // Could use a single replace instead of three different calls but I
        // don't know what you need for each image, so optimization's up to you
        seat = seat.replace(/1/g, "<img src='1.png' />");
        seat = seat.replace(/a/g, "<img src='a.png' />");
        seat = seat.replace(/0/g, "<img src='0.png' />");
        html += seat + "< br />";
    }
    $('.layout').append(html);}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:20:23.397

你可以这样做：

```
$.getJSON('hall.json', function(data) {
    var $layout = $('.layout');  // Cache it
    var seats = data.seats;

    for (var i = 0; i < seats.length; i++) {
        var seat = seats[i];

        for (var j = 0; j < seat.length; j++) {
            var char = seat.charAt(j);

            $('<img />', {
                src: 'images/' + char + '.png',
                alt: char
            }).appendTo($layout);
        }

        $layout.append('<br />');
    }
}); 
```

这将替换`X`为`<img src="images/X.png" alt="X" />`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:23:58.193

您应该将每个 JSON 元素视为一个数组，而不是替换`,`为`<br>`每个循环添加它

```
$.ajax({
 url:'hall.json',dataType:'json',
 success: function(d) {
  for (var i=0;i<d.seats.length;i++){
vr = "</br>";

var currentLength  = d.seats[i].length; 
for(var j = 0; j < currentLength; j++) 
{
       if(d.seats[i][j] == '0')
       // do something 
       else 
       // do something else
}

        $('.layout').append(d.seats[i] + vr);}
    }
}); 
```

你应该阅读更多关于 JSON 、数组和 JavaScript 的内容

我希望这可以帮助:)

# rally - Rally 自定义报告可见性

> ID：14823359
> 
> 赞同：1
> 
> 时间：2013-02-12T00:12:21.377
> 
> 标签：rally

我创建了一个自定义报告，它显示在我的“报告”选项卡上。我怎样才能将这个公开给项目中的每个人，以便他们可以在他们的工作区中看到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:26:22.437

没有办法只与一部分用户共享它。对于只对一小部分用户有用的自定义应用程序，我们经常做的是让管理员共享它，然后让用户子集复制它，然后让管理员取消共享它。请注意，我们采用此解决方案将有限数量的共享仪表板保存到与所有团队相关的应用程序和报告中。此解决方案的问题在于，使用新功能升级应用程序具有挑战性。尽管如此，如果您受限于共享仪表板的数量，我想我会提到一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:07:23.563

为了与其他用户共享应用程序，您需要工作区或订阅管理员权限。

[https://prod.help.rallydev.com/create-custom-pages#share](https://prod.help.rallydev.com/create-custom-pages#share)

# c# - Mutex.waitOne 在特定机器上总是返回 False

> ID：14823362
> 
> 赞同：2
> 
> 时间：2013-02-12T00:12:50.360
> 
> 标签：c#, .net, service, mutex

我在这里完全被难住了。我有一大段代码依赖互斥锁来保护它。当我在我的开发机器和测试机器上运行这段代码时，它工作正常。但是当我把它推到生产机器上时它失败了。

但这是踢球者，它曾经可以工作，我没有对这个特定的块进行任何代码更改。但是等等还有更多！我有第二个进程，它使用完全相同的代码块，它工作得很好！

互斥体声明如下：

```
Mutex _mutex = new Mutex(false, "SendTextMessage_11A52B63-4FC6-46DF-B72C-C45B225D4143"); 
```

使用它的代码块是这样的：

```
 public override void ForwardTextMessagesToDevice()
    {
        Trace.WriteLine("Here1");
        if (!_mutex.WaitOne(30000))
        {
            Trace.WriteLine("Here2");
            Trace.WriteLine(String.Format("return mutex ForwardTextMessage: {0} {1}", this.Name, DateTime.Now));
            return; 
        }
        try
        {
            Trace.WriteLine("Here3");
            ScheduledReports();
        }
        finally
        {
            Trace.WriteLine("Here4");
            _mutex.ReleaseMutex();
        } 
```

跟踪输出是这样的：

```
Here1
Here2
return mutex ForwardTextMessage: Method 2/11/2013 3:59:06 PM
Here1
Here2
return mutex ForwardTextMessage: Method 2/11/2013 4:00:06 PM 
```

互斥锁似乎立即被锁在门外。我的印象是互斥锁只在线程之间共享，并且在进程退出时被销毁，所以共享同一个互斥锁的两个独立进程应该是好的，对吧？此外，如果应用程序在互斥锁释放之前崩溃，是否会导致这种行为？

编辑：我差点忘了。以前我的应用程序随机崩溃了，我不得不强行退出它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:15:46.817

> 互斥锁似乎立即被锁在门外。我的印象是互斥锁只在线程之间共享，并且在进程退出时被销毁，所以共享同一个互斥锁的两个独立进程应该是好的，对吧？

不会。 *命名*的 Mutex 实例在所有进程之间共享。另一个进程可以锁定互斥锁。

从[您正在使用的 Mutex 构造函数](http://msdn.microsoft.com/en-us/library/01985e8f%28v=vs.80%29.aspx)的文档中：

> 互斥体有两种类型：本地互斥体和命名系统互斥体。如果使用接受名称的构造函数创建 Mutex 对象，则它与该名称的操作系统对象相关联。命名系统互斥锁在整个操作系统中都是可见的，并且可以用来同步进程的活动。

至于你的第二个问题：

> 此外，如果应用程序在互斥锁释放之前崩溃，是否会导致这种行为？

[Mutex](http://msdn.microsoft.com/en-us/library/01985e8f%28v=vs.80%29.aspx)的文档对此进行了介绍：

> 如果线程在拥有互斥锁时终止，则称该互斥锁被放弃。互斥体的状态设置为已发出信号，并且下一个等待线程获得所有权。如果没有人拥有该互斥体，则会发出该互斥体的状态信号。从 .NET Framework 2.0 版开始，在获取互斥锁的下一个线程中会引发 AbandonedMutexException。在 .NET Framework 2.0 版之前，没有引发异常。

在应用程序终止的情况下，互斥体应标记为已放弃。尝试获取`Mutex`应该提高`AbandonedMutexException`.

# python - 是否可以使用 Python 的 argparse 重建命令行？

> ID：14823363
> 
> 赞同：4
> 
> 时间：2013-02-12T00:13:07.567
> 
> 标签：python, subprocess, argparse

我有一个 Python 脚本，它读取一个包含对其他工具的命令行调用的文件。我想在调用该工具之前修改此调用的选项。例如，我可能会转换：

```
my_util --input file1.txt --option1 red --option2 blue 
```

...对此：

```
my_util --input file1_001.txt --option1 red --option3 green 
```

（更准确地说，我会将论点作为列表处理。）

我认为使用该[`argparse`](http://docs.python.org/2.7/library/argparse.html)模块将是执行此操作的最简单方法：我可以根据需要解析参数、更改、添加或删除选项，然后重建命令行。

但是我该如何做最后一步呢？鉴于[`Namespace`](http://docs.python.org/2.7/library/argparse.html#argparse.Namespace)返回的对象[`parse_args()`](http://docs.python.org/2.7/library/argparse.html#argparse.ArgumentParser.parse_args)，我可以轻松地重建命令行选项列表，例如可以传递给[`subprocess.Popen()`](http://docs.python.org/2.7/library/subprocess.html#popen-constructor)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:38:07.383

命名空间对象只是一个简单的对象子类，因此您可以使用以下命令将值作为 dict 取出`vars`：

```
>>> parser = argparse.ArgumentParser()
>>> parser.add_argument('--foo')
>>> args = parser.parse_args(['--foo', 'BAR'])
>>> vars(args)
{'foo': 'BAR'} 
```

或者您可以直接分配给一个类并将参数作为类变量获取：

```
>>> class C(object):
...     pass
...
>>> c = C()
>>> parser = argparse.ArgumentParser()
>>> parser.add_argument('--foo')
>>> parser.parse_args(args=['--foo', 'BAR'], namespace=c)
>>> c.foo
'BAR' 
```

使用这些结构中的任何一个来测试/替换参数并将结果传递给`Popen`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-23T14:25:34.710

我知道这是一个老问题，但我刚刚遇到了同样的问题。我意识到我所需要的只是一种迭代 Action 对象的方法。不幸的是，ArgParser 本身并没有公开内部列表。但是，这些对象是由 返回的`add_argument()`，所以我可以构建自己的列表。好吧，在`actions.append()`我看来，每次调用都输入太多，所以我将所有选项存储在一个元组中：

```
def add_argument(*args, **kwargs):
    return (args, kwargs)

parser = argparse.ArgumentParser()
options = (
    add_argument('--verbose', action='store_true'),
    add_argument('--author'),
    add_argument('--subject', required=True),
    add_argument('--cache', nargs='?'),
    add_argument('files', nargs=''),
)
actions = []
for (args, kwargs) in options:
    actions.append(parser.add_argument(*args, **kwargs))
args = parser.parse_args() 
```

至此，选项被解析到 中`args`，所有`argparse.Action`对象都存储在`actions`列表中。然后我可以遍历这个列表并重建这样的选项：

```
cmdline = []
for action in actions:
    value = getattr(args, action.dest)
    if action.required or value != action.default:
        if action.option_strings:
            cmdline.append(action.option_strings[0])
        if action.nargs is None:
            cmdline.append(value)
        elif action.nargs == '?':
            if value != action.const:
                cmdline.append(value)
        elif action.nargs != 0:
            cmdline += value 
```

在我的具体情况下，我还想从命令行中删除一些选项。为此，我只是通过调用`parser.add_argument()`而不是通过`options`元组单独添加它们。

# c++ - Qt OpenGL Update Unusably Slow

> ID：14823364
> 
> 赞同：7
> 
> 时间：2013-02-12T00:13:10.963
> 
> 标签：c++, qt, opengl, animation, qt5

I can't seem to get Qt5 to update my scene at a meaningful rate. My scene is a 512x512 textured rectangle. The rate I am getting is about 1 frame per second (!).

In my constructor

```
 aTimer.setSingleShot(false);
   aTimer->setTimerType(Qt::PreciseTimer);
   connect(&aTimer,SIGNAL(timeout()),this,SLOT(animate()));
   aTimer.start(50);
   setAutoFillBackground(false); 
```

and

```
void GLWidget::animate()
{
//Logic for every time step
updateGL();
} 
```

Is there a way to set priority? Am I doing something totally, wrong? Is there some sort of intrinsic update limitation in Qt, and its certainly not on the order of 1 FPS? My theory is that Qt is ignoring my calls to actually update the screen.

I have tried

1.  to insert a `QCoreApplication::processEvents();` but this doesn't help
2.  Call update on the parent widget, and run the timer from the parent
3.  Create a function called animate() that ran `forever{}` and call update from within it
4.  The `wigglywidget` example seems to work, which hints to me that QT OpenGL is somehow collapsing frames, ignoring my calls to update. Is there a heuristic that controls this?

**Minimal Code to Recreate**

(The version is a bit different, being modeled after the wigglywidget class, but has the exact same problem)

```
git clone https://bitbucket.org/FunFarm/qtcapturesoftware.git 
```

**glwidget.h**

```
/****************************************************************************/

#ifndef GLWIDGET_H
#define GLWIDGET_H

#include <QGLWidget>
#include <QtOpenGL/qglshaderprogram.h>
#include <QTimer>
#include <math.h>
#include "time.h"
#include <assert.h>
#include <random>

class GLWidget : public QGLWidget
{
    Q_OBJECT

public:
    GLWidget(QWidget *parent = 0);
    ~GLWidget();
    void addNoise();
protected:
    void initializeGL();
    void paintGL();
    void timerEvent(QTimerEvent *event);
    void resizeGL(int width, int height);
private:
    QBasicTimer timer;
    QPoint lastPos;
    GLuint textures[6];
    QVector<QVector2D> vertices;
    QVector<QVector2D> texCoords;
    QGLShaderProgram program1;
    int vertexAttr1;
    int vertexTexr1;
    //
    int heightGL;
    int widthGL;
    //
    GLubyte* noise;
    //
    QTimer* aTimer;
    //
};
#endif 
```

**glwidget.cpp**

```
#include <QtWidgets>
#include <QtOpenGL>
#include "glwidget.h"

#ifndef GL_MULTISAMPLE
#define GL_MULTISAMPLE  0x809D
#endif

GLWidget::GLWidget(QWidget *parent)
    : QGLWidget(QGLFormat(QGL::SampleBuffers), parent)
{
    setAutoFillBackground(false);
    aTimer = new QTimer();
    timer.start(30, this); // 30 fps?
}
void GLWidget::timerEvent(QTimerEvent *event)
{
    addNoise();
    update();// Doesn't matter which update function I call, this is the one from the wigglywidget example
}
 GLWidget::~GLWidget(){}
void GLWidget::initializeGL()
{
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_MULTISAMPLE);
    static GLfloat lightPosition[4] = { 0.5, 5.0, 7.0, 1.0 };
    glLightfv(GL_LIGHT0, GL_POSITION, lightPosition);
    QGLShader *vshader1 = new QGLShader(QGLShader::Vertex, this);
    const char *vsrc1 =
            "attribute vec2 coord2d;   \n"
            "attribute mediump vec4 texCoord;\n"
            "varying mediump vec4 texc;\n"
            "void main()                  \n"
            "{                            \n"
            "   gl_Position = vec4(coord2d, 0.0, 1.0); \n"
            "   texc = texCoord;\n"
            "}                          \n";
    vshader1->compileSourceCode(vsrc1);

    QGLShader *fshader1 = new QGLShader(QGLShader::Fragment, this);
    const char *fsrc1 =
            "uniform sampler2D texture;\n"
            "varying mediump vec4 texc;\n"
            "void main(void)\n"
            "{\n"
            "    gl_FragColor = texture2D(texture, texc.st);\n"
            "}\n"                                                  ;
    fshader1->compileSourceCode(fsrc1);

    program1.addShader(vshader1);
    program1.addShader(fshader1);
    program1.link();
    vertexAttr1 = program1.attributeLocation( "coord2d");
    vertexTexr1 = program1.attributeLocation( "texCoord");

    // Create the vertex buffer.
    vertices.clear();
    float u=1;
#define AVEC -u,u
#define BVEC -u,-u
#define CVEC u,u
#define DVEC u,-u
    vertices << QVector2D(AVEC);
    vertices << QVector2D(BVEC);
    vertices << QVector2D(CVEC);
    vertices << QVector2D(BVEC);
    vertices << QVector2D(DVEC);
    vertices << QVector2D(CVEC);
    // Create the texture vertex buffer
#define TAVEC 0,1
#define TBVEC 0,0
#define TCVEC 1,1
#define TDVEC 1,0
    texCoords << QVector2D(TAVEC);
    texCoords << QVector2D(TBVEC);
    texCoords << QVector2D(TCVEC);
    texCoords << QVector2D(TBVEC);
    texCoords << QVector2D(TDVEC);
    texCoords << QVector2D(TCVEC);
    QPixmap aMap(":/images/testmap.jpg");
    assert(aMap.width());
    heightGL = aMap.height();
    widthGL = aMap.width();
    textures[0] =bindTexture(aMap,GL_TEXTURE_2D,GL_LUMINANCE);
    noise = (GLubyte*) calloc(1*widthGL*heightGL,sizeof(GLubyte));//GL_RGB8
    memset(noise,100,1*widthGL*heightGL);
    //
}
void GLWidget::addNoise()
{
    std::default_random_engine e((unsigned int)(time(0)));
    GLubyte c = e()%256;
    assert(noise);
    for (int i = 0; i<heightGL;i++)
    {
        for(int j =0;j<widthGL;j++)
            noise[i*widthGL+j]= c;
    }
}

void GLWidget::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    //
    //

    program1.bind();
    program1.setUniformValue("texture", 0);
    program1.enableAttributeArray(vertexAttr1);
    program1.enableAttributeArray(vertexTexr1);
    program1.setAttributeArray(vertexAttr1, vertices.constData());
    program1.setAttributeArray(vertexTexr1, texCoords.constData());
    glBindTexture(GL_TEXTURE_2D, textures[0]);
    glTexSubImage2D(GL_TEXTURE_2D,0,0,0,
                    widthGL,heightGL,GL_LUMINANCE,GL_UNSIGNED_BYTE, //lets hope these are correct
                    noise);
    glDrawArrays(GL_TRIANGLES, 0, vertices.size());
    program1.disableAttributeArray(vertexTexr1);
    program1.disableAttributeArray(vertexAttr1);
    program1.release();
}

void GLWidget::resizeGL(int width, int height)
{
    int side = qMin(width, height);
    glViewport((width - side) / 2, (height - side) / 2, side, side);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-0.5, +0.5, -0.5, +0.5, 4.0, 15.0);
    glMatrixMode(GL_MODELVIEW);

} 
```

**main.cpp**

```
/****************************************************************************/
#include <QApplication>
#include <QDesktopWidget>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    //cameraView cV;
    //cV.show();
    GLWidget mW;
    mW.show();
    return a.exec();
} 
```

**test.pro**

```
HEADERS       = glwidget.h \
    cameraview.h
SOURCES       = glwidget.cpp \
                main.cpp \
    cameraview.cpp
QT           += opengl widgets

CONFIG += console
CONFIG += c++11

# install
target.path = $$[QT_INSTALL_EXAMPLES]/qt_OpenGL_3x/02_First_Triangle
sources.files = $$SOURCES $$HEADERS $$RESOURCES $$FORMS 02-first-triangle.pro
sources.path = $$[QT_INSTALL_EXAMPLES]/qt_OpenGL_3x/02_First_Triangle
INSTALLS += target sources

simulator: warning(This example might not fully work on Simulator platform)

FORMS += \
    cameraview.ui

RESOURCES += \
    images.qrc

OTHER_FILES += 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T00:46:10.297

我克隆了存储库并对代码进行了一些更改以帮助您调试问题。首先，在**std::cout**`paintGL()`开头打印一条消息：

 **```
void GLWidget::paintGL()
{
   static int xyz = 0;
   std::cout << "PaintGL begin " << xyz << std::endl; 
```

和末尾的另一条消息`paintGL`。之后，增加计数器变量：

```
 program1.release();

   std::cout << "PaintGL end " << xyz << std::endl;
   xyz++;
} 
```

这种方法清楚地表明，`paintGL()`由于在 2 秒内打印到控制台的消息量，每秒调用近 30 次：

```
PaintGL begin 0
PaintGL end 0
PaintGL begin 1
PaintGL end 1
...
...
PaintGL begin 60
PaintGL end 60
PaintGL begin 61
PaintGL end 61 
```

所以可以放弃定时器有问题的理论。**计时器很好**，您确实在每秒绘制 30 个计时器左右的窗口。

问题可能出在代码中的其他地方。由于您仅在存储库中共享了应用程序的一部分，因此恐怕我无法为您提供任何进一步的帮助。

**编辑**：

我注意到里面`addNoise()`有一个随机数生成器。如果您期望绘图在每次`paintGL()`调用时根据其他方法生成的数字而改变，您会感到失望。

当前实现的数字生成机制对毫秒变化不敏感，因此`addNoise()`在同一秒内的所有调用都将生成相同的数字，这反过来又会在您的窗口上绘制相同的东西一整秒。这就解释了为什么绘图每秒只更改一次。

为了解决这个问题，我建议看看：

*   [在 Windows 和 Linux 中从毫秒开始随机种子](https://stackoverflow.com/q/3645504/176769)
*   [每毫秒随机数？](http://forums.devshed.com/c-programming-42/random-numbers-every-millisecond-49871.html)**

# android - Get default email address from playstore app

> ID：14823369
> 
> 赞同：2
> 
> 时间：2013-02-12T00:13:22.320
> 
> 标签：android

I would like to get default email address selected in play store programmatically? I know how to get email address details from account manager but not specifically from play store app? Is this possible?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:17:30.143

*用户在Play 商店*中使用的电子邮件帐户应与设备的 Google 帐户相同，您可以通过以下方式获取：

```
Account[] accounts = accountManager.getAccountsByType("com.google"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T04:50:40.340

```
static String getEmail(Context context) {
    AccountManager accountManager = AccountManager.get(context); 
    Account account = getAccount(accountManager);

    if (account == null) {
      return null;
    } else {
      return account.name;
    }
}
private static Account getAccount(AccountManager accountManager) {
    Account[] accounts = accountManager.getAccountsByType("com.google");
    Account account;
    if (accounts.length > 0) {
      account = accounts[0];      
    } else {
      account = null;
    }
    return account;
} 
```

来源：[https ://stackoverflow.com/a/2556540/950427](https://stackoverflow.com/a/2556540/950427)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T10:51:41.490

如果您想获取当前配置为播放商店帐户的帐户邮件ID的名称。请使用它。我在这里仅用于电子邮件名称，但您可以从帐户对象中获取帐户的所有信息，例如类型，描述

```
 Pattern emailPattern = Patterns.EMAIL_ADDRESS; 
        Account[] accounts =        AccountManager.get(this).getAccountsByType("com.google");
        for (Account account : accounts) {
            if (emailPattern.matcher(account.name).matches()) {
                primaryEmailID = account.name;

            }
        } 
```

# c++ - 带有字符数组的 C++ Deque 实现

> ID：14823372
> 
> 赞同：0
> 
> 时间：2013-02-12T00:13:37.727
> 
> 标签：c++, arrays, char, deque

但是将字符放入双端队列的 .h 文件中的循环似乎完全按照我的预期工作。关于 ABottom 的任何建议，或者为什么流行音乐不起作用？

文件 1：

```
// Kevin Shaffer TwoStackKAS.h

#include<iostream> 
#include<string>
#include<vector>

#ifndef TWOSTACKKAS_H_
#define TWOSTACKKAS_H_

using namespace std;

class TwoStacks {
    char elements[];
    int Abottom, Bbottom;
    int AtopSpace, BtopSpace;
    int totalSize;

public:
    TwoStacks(int maxAdds) {
        totalSize = 2*maxAdds +1;
        char elements[totalSize]; 
        const int Bbottom = totalSize-1; //bottom for both stacks!
        const int Abottom = 0;
        AtopSpace= 0; 
        BtopSpace = totalSize-1; //top for both stacks! 
        cout<<"Stack Size: "<<totalSize<<endl;
    }

    virtual bool empty() const { 
        return Abottom == AtopSpace && Bbottom==BtopSpace;
    }

    virtual bool full() const { return AtopSpace==BtopSpace;}
    virtual int stackSize() {
        cout<<Abottom<<" Abottom"<<endl;
        return (AtopSpace - Abottom +Bbottom -BtopSpace);
    }

    virtual char popA() {
        if (empty()){    
            cerr << "Attempting to pop Empty stack!"<< endl;
            return ' ';    //prepare EmptyQexceptiin    
        } else {
            cout << elements[--AtopSpace] << " testpopA"<< endl;
            return elements[--AtopSpace];
        }
    }

    virtual char popB() {    
        if (empty()){    //later EmptyQException
            cerr <<"Attempting to pop an empty stack!" << endl;
            return ' ';        
        } else {
            //cout <<elements->at(++BtopSpace) << endl;
            cout << elements[++BtopSpace] << " test"<< endl;
            return elements[++BtopSpace];

        }
    }

     virtual void pushB(char newItem){    
        elements[BtopSpace--] = newItem;
    }

     virtual void pushA(char newItem){    
        elements[AtopSpace++] = newItem;
    }

    virtual string toString() const {
        string out = "";
        for (int i = 0 ; i<=Bbottom; i++) {
            out += elements[i];}
        return out;
    }
};  

#endif 
```

和文件2：

```
/** Kevin Shaffer
 * Given an input string, reverse each half of the string; 
 * pivot on the middle element if it exists.
 * uses double ended stack in twoStackKAS.h*/

#include<string>
#include "TwoStackKAS.h"
#include<iostream>
#include<string>

using namespace std;
int main (int argc, char* argv[]){
    if (argc<=1){return 0;}
    string word = argv[1];
    int length = word.size();                   // gets length of word
    int half = length/2;
    TwoStacks* sd = new TwoStacks(length/2);
    //cout<<sd->stackSize()<<endl;
    for(int i = 0; i < length/2; i++){  
        sd->pushA(word[i]);
        cout << word[i] << endl;
    }

    for(int i = length; i >= length/2; i--){   //Second half of word
        sd->pushB(word[i] );     //has been pushed 
        cout << word[i] << endl; //in reverse order. 
    } 
    //cout << word << endl;

    //Recombine word 
    if(length%2==1){ word = word[length/2];}
    else{ word = "";}
    cout<<sd->stackSize()<<endl;
    string leftHalf; string rightHalf;
    string myWord; //new word (shuffled)
    for(int i=0; i< half; i++) {
        leftHalf +=  sd->popA();
        rightHalf += sd->popB();
    }
    //cout<<"Stack: "<<sd->toString()<<endl;
    cout << rightHalf << endl;
    cout << leftHalf << endl;
    myWord = leftHalf + word + rightHalf;
    cout<<myWord<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-07T09:48:37.520

ABottom 没有增长......它从未初始化！看看你的构造函数。您没有分配 Abottom，而是定义了一个新变量来掩盖成员变量。你这样做多次。

而且由于 VS2015 实际上不接受`char elements[];`：“不允许不完整类型”，因此使用 std::string 而不是 char* 可能更好

一个更好的构造函数是这样的。

```
class TwoStacks
{
private:
    // totalSize has to be assigned before assigning dependent variables
    int totalSize;
    string elements;
    int Abottom, Bbottom;
    int AtopSpace, BtopSpace;

public:
    TwoStacks(int maxAdds)
        : totalSize(2 * maxAdds + 1)
        , elements(totalSize, ' ')
        , Abottom(0)
        , Bbottom(totalSize - 1)
        , AtopSpace(0)
        , BtopSpace(totalSize - 1)
    {
        // preferably don't cout in a constructor
        cout << "Stack Size: " << totalSize << endl;
    } 
```

# python - Python：识别创建生成器的生成器函数

> ID：14823373
> 
> 赞同：2
> 
> 时间：2013-02-12T00:13:42.620
> 
> 标签：python, generator, yield, python-3.3

给定一个生成器对象，是否可以识别用于创建它的函数？

```
def gen_func():
    yield

gen = gen_func()

// From `gen`, how do I get a reference to `gen_func` ? 
```

我正在实现一个装饰器，用于装饰带有附加属性的生成器函数。稍后我需要从生成器本身访问该属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:14:10.177

你真正要求的东西不可能以一种干净的方式实现，既因为生成器对象无法访问它们的生成器函数，又因为无法在生成器上创建新属性。

但是你想要达到的目标可能*是*可能的。这是一个示例装饰器，它将生成器包装在迭代器对象中，并向迭代器对象添加自定义属性：

```
def add_stuff(f):
    def replacement(*args, **kwargs):
        gen = f(*args, **kwargs)
        class FakeGenerator(object):
            def __iter__(self):
                return self
            def next(self):
                return gen.next()
        fakegen = FakeGenerator()
        fakegen.foo = "whatever"
        fakegen.generator_function = f
        return fakegen
    return replacement

@add_stuff
def gen_func():
    yield

gen = gen_func()
print gen
print gen.foo 
```

# twitter - 推特标签中允许使用哪些字符？

> ID：14823376
> 
> 赞同：21
> 
> 时间：2013-02-12T00:14:09.220
> 
> 标签：twitter, hashtag

在开发包含 twitter 客户端的 iOS 应用程序时，我必须允许用户生成主题标签（可以在应用程序的其他地方创建，而不仅仅是在推文正文中）。

我想确保任何此类主题标签对 twitter 有效，因此我想对输入的值进行错误检查以查找无效字符。请记住，用户可能来自非英语国家。

我知道通常的限制，例如不以数字开头的主题标签，也没有特殊的标点符号，但我想知道是否有一个已知的列表，列出技术上允许在主题标签中的所有其他字符（即国际字符）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-09T11:30:49.390

Karl，正如您正确指出的那样，任何语言中的任何单词都可以是有效的 twitter 标签（只要它符合许多基本标准）。因此，您要求的是有效国际单词字符的列表。我确信有人在某处编制了这样的列表，但使用它并不是实现您最初目标的最有效方法：确保给定的主题标签对 twitter 有效。

我相信，您正在寻找的是一个可以匹配*Unicode 范围内*所有单词字符的正则表达式。这样的表达式将不依赖于您的语言环境，并且会匹配现代排版中可以作为单词一部分出现的所有字符。

您没有指定您正在使用哪种语言编写应用程序，因此我无法帮助您实现特定于语言的实现。但是，基本方法如下：

1.  检查是否有任何括号表达式或字符类已经支持您的语言中的*Unicode 字符范围*。如果是，那么使用它们。

2.  检查是否存在可以为您的语言启用*Unicode 字符范围*支持的正则表达式修饰符。

大多数现代语言以非常相似的方式实现正则表达式，其中很多都大量借鉴了 Perl，所以我希望下面的两个例子能让你走上正轨：

**珀尔：**

使用 POSIX 括号表达式（例如：、、、`[[:alpha:]]`等`[[:allnum:]]`）`[[:digit:]]`，因为与字符类（例如：）相比，它们可以让您更好地控制要匹配的字符`\w`。

`/u`模式匹配时使用修饰符启用 Unicode 支持。在这个修饰符下，ASCII 平台实际上变成了 Unicode 平台；因此，例如，`\w`将匹配 Unicode 中超过 100,000 个单词字符中的任何一个。

有关详细信息，请参阅 Perl 文档：

*   [http://perldoc.perl.org/perlre.html#Character-set-modifiers](http://perldoc.perl.org/perlre.html#Character-set-modifiers)
*   [http://perldoc.perl.org/perlrecharclass.html#POSIX-Character-Classes](http://perldoc.perl.org/perlrecharclass.html#POSIX-Character-Classes)

**红宝石：**

使用 POSIX 括号表达式，因为它们包含非 ASCII 字符。例如，/\d/ 仅匹配 ASCII 十进制数字 (0-9)；而 /[[:digit:]]/ 匹配 Unicode Nd 类别中的任何字符。

有关更多信息，请参阅 Ruby 文档：

*   [http://www.ruby-doc.org/core-2.1.1/Regexp.html#class-Regexp-label-Character+Classes](http://www.ruby-doc.org/core-2.1.1/Regexp.html#class-Regexp-label-Character+Classes)

**例子：**

给定一个标签列表，以下正则表达式将匹配所有以单词字符（包括国际单词字符）开头的标签，后跟至少一个其他单词字符、数字或下划线：

```
 m/^#[[:alpha:]][[:alnum:]_]+$/u     # Perl

    /^#[[:alpha:]][[:alnum:]_]+$/       # Ruby 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-21T21:21:22.100

Twitter 允许使用字母、数字和下划线。

我通过他们的 API 生成推文来检查这一点。例如，发推文

> 哈希标签测试#foo[bar

导致“#foo”被标记为哈希标签，“[bar”被标记为未格式化的文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-02T15:20:03.440

只想补充一点，除了字母数字字符和下划线之外，您显然可以在 Twitter 主题标签中使用 em dash，例如`#COVIDー19`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T00:17:53.340

好吧，对于初学者来说，您不能在主题标签 (##hash) 中使用 #。

以下指南引用自[Twitter 的帮助中心](https://support.twitter.com/articles/49309-what-are-hashtags-symbols)：

> *   人们在推文中的相关关键字或短语（无空格）之前使用井号符号 # 来对这些推文进行分类，并帮助它们更容易地在 Twitter 搜索中显示。
> *   单击任何消息中带有井号标签的单词会显示所有其他标有该关键字的推文。
> *   标签可以出现在推文中的任何位置——开头、中间或结尾。
> *   变得非常流行的带有标签的词通常是热门话题。
>     示例：在下面的推文中，@eddie 包含了#FF 标签。用户将此创建为“关注星期五”的简写，这是一种每周传统，用户推荐其他人应该在 Twitter 上关注的人。你会在星期五看到这个。
> 
> **正确使用主题标签：**
> 
> *   如果您在公共帐户上使用主题标签发布推文，则搜索该主题标签的任何人都可以找到您的推文
> *   不要#spam #with #hashtags。不要过度标记单个推文。（最佳做法建议每条推文使用不超过 2 个主题标签。）
> *   仅在与主题相关的推文上使用主题标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-04T02:47:52.860

我有同样的问题要在 golang 中实现。似乎允许带有 [[:alpha:]] 的字符只是英文字母，并且不能将此语法用于其他语言字符。相反，我可以为此目的使用 \p{L} 。

我对 \p{L} 的测试[在这里](https://play.golang.org/p/ULKWfGXZb-7)。* 阿拉伯语、希伯来语、印地语...等尚未确认。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-08-05T08:46:30.750

只允许字母和数字成为主题标签的一部分。如果除这些字符之外的字符跟在`#`开头和字母或数字之后，此时主题标签将被切断。

如果用户输入的不是字母或数字，我建议您的用户界面通过更改输入字段的文本颜色来向用户表明这一点。

# php - Jqgrid 不加载 XML 数据

> ID：14823380
> 
> 赞同：1
> 
> 时间：2013-02-12T00:14:31.673
> 
> 标签：php, jquery, xml, jqgrid

我试图在没有成功的情况下使用 JqGrid。我已经[在 trirand 阅读了这篇 wiki 帖子，](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:first_grid)并且我完成了该页面上的所有步骤。

我试过使用我搜索过的其他例子，但我一直有同样的错误。我真的不知道为什么，这非常令人沮丧。

当我查看 HTML 时，表（mysql）不显示。就像我的代码不接受来自 PHP 代码的 XML 数据一样。我正在使用 Appserv。

HTML 代码 ( *myfirstgrid.html* ):

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>My First Grid</title>
        <link rel="stylesheet" type="text/css" media="screen" href="css/ui-lightness/jquery-ui-1.8.2.custom.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

        <style type="text/css">
            html, body {
                margin: 0;
                padding: 0;
                font-size: 75%;
            }
        </style>

        <script src="/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="/i18n/grid.locale-en.js" type="text/javascript"></script>
        <script src="/jquery.jqGrid.min.js" type="text/javascript"></script>

        <script type="text/javascript">
        $(function(){ 
            $("#list").jqGrid({
                url:'example.php',
                datatype: 'xml',
                mtype: 'GET',
                colNames:['Inv No','Date', 'Amount','Tax','Total','Notes'],
                colModel :[ 
                    {name:'invid', index:'invid', width:55}, 
                    {name:'invdate', index:'invdate', width:90}, 
                    {name:'amount', index:'amount', width:80, align:'right'}, 
                    {name:'tax', index:'tax', width:80, align:'right'}, 
                    {name:'total', index:'total', width:80, align:'right'}, 
                    {name:'note', index:'note', width:150, sortable:false} 
                ],
                pager: '#pager',
                rowNum:10,
                rowList:[10,20,30],
                sortname: 'invid',
                sortorder: 'desc',
                viewrecords: true,
                gridview: true,
                caption: 'My first grid'
            }); 
        }); 
        </script>
    </head>
    <body>
        <table id="list"><tr><td/></tr></table> 
        <div id="pager"></div> 
    </body>
</html> 
```

PHP 脚本（*example.php*）：

```
<?php 
    include ("conexion.php");

    $page = 1;
    $limit = 10;
    $sidx = 'tax';
    $sord = 'asc';

    $result = mysql_query("SELECT COUNT(*) AS count FROM invheader"); 
    $row = mysql_fetch_array($result,MYSQL_ASSOC); 
    $count = $row['count']; 

    if( $count > 0 && $limit > 0) { 
        $total_pages = ceil($count/$limit); 
    } else { 
        $total_pages = 0; 
    }

    if ($page > $total_pages) $page=$total_pages;

    $start = $limit*$page - $limit;

    // if for some reasons start position is negative set it to 0 
    // typical case is that the user type 0 for the requested page 
    if($start <0) $start = 0; 

    // the actual query for the grid data 
    $SQL = "SELECT invid, invdate, amount, tax,total, note FROM invheader ORDER BY    $sidx $sord LIMIT $start , $limit"; 
    $result = mysql_query( $SQL ) or die("Couldn't execute query.".mysql_error()); 

    // we should set the appropriate header information. Do not forget this.
    //header("Content-type: text/xml;charset=utf-8");

    $s = "<?xml version='1.0' encoding='utf-8'?>";
    $s .=  "<rows>";
    $s .= "<page>".$page."</page>";
    $s .= "<total>".$total_pages."</total>";
    $s .= "<records>".$count."</records>";

    // be sure to put text data in CDATA
    while($row = mysql_fetch_array($result,MYSQL_ASSOC))
    {
        $s .= "<row id='". $row['invid']."'>";
        $s .= "<cell>". $row['invid']."</cell>";
        $s .= "<cell>". $row['invdate']."</cell>";
        $s .= "<cell>". $row['amount']."</cell>";
        $s .= "<cell>". $row['tax']."</cell>";
        $s .= "<cell>". $row['total']."</cell>";
        $s .= "<cell><![CDATA[". $row['note']."]]></cell>";
        $s .= "</row>";
    }
    $s .= "</rows>";

    echo $s;
?> 
```

这是来自 PHP 脚本的 XML 结果（为了便于阅读，XML 被缩进。服务器返回 xml 没有换行符）：

```
<?xml version='1.0' encoding='utf-8'?>
<rows>
    <page>1</page>
    <total>1</total>
    <records>3</records>
    <row id='1'>
        <cell>1</cell>
        <cell>0000-00-00</cell>
        <cell>0.00</cell>
        <cell>0.00</cell>
        <cell>0.00</cell>
        <cell><![CDATA[note]]></cell>
    </row>
    <row id='2'>
        <cell>2</cell>
        <cell>2001-01-10</cell>
        <cell>103.00</cell>
        <cell>45.00</cell>
        <cell>149.00</cell>
        <cell><![CDATA[This is record 1]]></cell>
    </row>
    <row id='3'>
        <cell>3</cell>
        <cell>2001-02-10</cell>
        <cell>104.00</cell>
        <cell>46.00</cell>
        <cell>151.00</cell>
        <cell><! [CDATA[This is record 2]]></cell>
    </row>
</rows> 
```

这些是我的问题：

1.  为什么我的数据没有显示在 HTML 中？
2.  如果问题是 XML 数据，那么检查 XML 是否有效的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:49:20.760

好的，我找到了解决方案。我广泛修改了我的代码。

问题是这样的：

```
 include ("conexion.php"); 
```

出于某种原因，如果您在其他文档中有连接参数，则本文档在此部分的标题之前发送了标题：

```
 header("Content-type: text/xml;charset=utf-8"); 
```

所以你需要在你的网格 php 文档中设置这个参数，并确保你在这一行中发送了标题。

就是这样……

这么多人有这个问题，也许这就是解决方案。

# sql - 读取文本文件以将数据插入 Oracle SQL 表

> ID：14823382
> 
> 赞同：4
> 
> 时间：2013-02-12T00:15:02.173
> 
> 标签：sql, oracle11g, oracle-sqldeveloper, utl-file

我正在学习 Oracle SQL 开发人员。

我正在做的是从文件夹中逐行读取文本文件。然后将数据插入到 SQL 表中。

我能够编译我的 PROCEDURE，但是，它似乎没有将数据插入到文件中。

```
Create or Replace PROCEDURE Rfile is
f UTL_FILE.FILE_TYPE;
s VARCHAR2(200); 
BEGIN
f := UTL_FILE.FOPEN('C:\Projects\','testdatabinary.txt','R');
  IF UTL_FILE.IS_OPEN(f) THEN
    LOOP
      BEGIN
        UTL_FILE.GET_LINE(f,s);
        IF s IS NULL THEN
          EXIT;
        END IF;
      INSERT INTO DATAINSERT
      (COLUMN1, COLUMN2)
      VALUES
      (s, 'testdatabinary');
      END;
  END LOOP;
  COMMIT;
  END IF;
 END; 
```

我有一个带有两个 varchar(200) 类型 cols 的表 DATAINSERT

我不太确定 PROCEDURE 未将数据插入表的原因

我刚刚检查了错误消息

```
Error starting at line 1 in command:
EXEC Rfile
ORA-29280: invalid directory path
ORA-06512: at "SYS.UTL_FILE", line 41
ORA-06512: at "SYS.UTL_FILE", line 478
ORA-06512: at "SYSTEM.RFILE", line 5 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-16T12:28:44.410

不确定是什么导致了问题。对我来说，它的工作正常是我的示例代码

* * *

--参考网站--https ://community.oracle.com/thread/3633577?start=0&tstart [= 0](https://community.oracle.com/thread/3633577?start=0&tstart=0)

```
 set serveroutput on;
     CREATE or replace DIRECTORY USER_DIR AS '/home/oracle'; 
     GRANT READ ON DIRECTORY USER_DIR TO PUBLIC;

     DECLARE 
        V1 VARCHAR2(200); --32767
        F1 UTL_FILE.FILE_TYPE; 
     BEGIN 
        F1 := UTL_FILE.FOPEN('USER_DIR','temp.txt','R'); 
        Loop
        BEGIN
    UTL_FILE.GET_LINE(F1,V1); 
    dbms_output.put_line(V1);
    EXCEPTION WHEN No_Data_Found THEN EXIT; END;
        end loop;

        IF UTL_FILE.IS_OPEN(F1) THEN
     dbms_output.put_line('File is Open');
        end if;

        UTL_FILE.FCLOSE(F1); 
     END; 
     /
    set serveroutput off; 
```

* * *

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-28T06:28:59.520

您不能像这样直接输入文件打开命令的路径

```
f := UTL_FILE.FOPEN('C:\Projects\','testdatabinary.txt','R'); 
```

您必须使用以下 sql 查询创建目录，而不是直接输入路径

创建或替换 DIRECTORY USER_DIR AS 'C:\PROJECTS\';

然后在文件打开命令中输入目录名。会是这样

```
f := UTL_FILE.FOPEN('USER_DIR ','testdatabinary.txt','R'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T05:39:57.493

第一个过程试图将文件从 PC 加载到服务器中，而在第二个过程中，文件是从服务器到服务器。`UTL_FILE.FOPEN`适用于服务器端 PL/SQL。所以第一个程序不会正确执行......如果你想将文件从 PC 加载到服务器，那么你需要使用任何前端，如 D@K 或 VB。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T08:51:24.350

您在这里犯的错误是使用工作站路径，您实际上需要使用目录路径。

解决此问题的最快方法就是使用**WINSCP**命令。

使用**WINSCP**告诉您目录路径是什么，然后简单地用这个新信息替换代码中的旧路径，一切都应该正常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-20T13:59:30.370

这是非常概念化和棘手的。您可以在下面找到更多概念和详细信息： [https ://ora-data.blogspot.in/2016/11/read-and-writ-text-file-using-UTLFILE.html](https://ora-data.blogspot.in/2016/11/read-and-writ-text-file-using-UTLFILE.html)

当然会有所帮助：

```
create or replace procedure read_file is 
f_line varchar2(2000); 
f utl_file.file_type; 
f_dir varchar2(250); 
fname varchar2(50); 
Comma1 varchar(10); 
Comma2 varchar(10); 
Comma3 varchar(10); 
Comma4 varchar(10); 
Comma5 varchar(10); 
f_empno emp.empno%type; 
f_ename emp.ename%type; 
f_job emp.job%type; 
f_mgr emp.mgr%type; 
f_hiredate emp.hiredate%type; 
f_sal emp.sal%type; 
begin 
f_dir := ‘E:\PLSQL’; 
fname := ‘input.txt’; 
f := utl_file.fopen(‘UTL_FILE_DIR’,fname,’r’); –opening the file using fopen function 
loop 
begin 
utl_file.get_line(f,f_line); 
–using a loop continuously get the file’s content using get_line function exception when no_data_found then 
exit; 
end; 

Comma1 := INSTR(f_line, ‘,’ ,1 , 1); 
Comma2 := INSTR(f_line, ‘,’ ,1 , 2); 
Comma3 := INSTR(f_line, ‘,’ ,1 , 3); 
Comma4 := INSTR(f_line, ‘,’ ,1 , 4); 
Comma5 := INSTR(f_line, ‘,’ ,1 , 5);
–Each field in the input record is delimited by commas. 
–We need to find the location of two commas in the line. 
–and use the locations to get the field from the line. 
f_empno := to_number(SUBSTR(f_line, 1, Comma1-1)); 
f_ename := SUBSTR(f_line, Comma1+1, Comma2-Comma1-1); 
f_job := SUBSTR(f_line, comma2+1, Comma3-Comma2-1); 
f_mgr := to_number(SUBSTR(f_line, comma3+1, Comma4-Comma3-1)); 
f_hiredate := to_date(SUBSTR(f_line, comma4+1, Comma5-Comma4-1),’dd-mon-yyyy’); 
f_sal := to_number(SUBSTR(f_line, comma5+1),’99999′); dbms_output.put_line(f_empno ||’ ‘|| f_ename || ‘ ‘ || f_job || ‘ ‘ || f_mgr ||’ ‘ || f_hiredate||’ ‘|| f_sal); 
insert into emp12 VALUES (f_empno,f_ename,f_job,f_mgr,f_hiredate,f_sal); 
end loop; 
utl_file.fclose(f); 

commit; 

end; 

/ 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-10-08T07:47:44.970

首次登录

用户名：sys 作为 sysdba

密码应与用于用户“系统”的密码相同

现在输入

SQL> 将 UTL_FILE 上的执行权限授予 PUBLIC；

现在使用您要创建过程的任何用户登录

# javascript - JavaScript：如何从字符串数组中选择一个不那么随机的元素。也就是说，某些元素应该更频繁地返回

> ID：14823384
> 
> 赞同：1
> 
> 时间：2013-02-12T00:15:16.023
> 
> 标签：javascript, arrays, string, random

我已经阅读了一些关于从数字数组中选择元素的更高概率和钟形曲线的帖子，但是我有一个我想从中选择的字符串数组。我的网站上有一堆 DIV，我想从一组 6 种颜色中随机着色：

```
var colors = new Array('red', 'orange', 'yellow', 'green', 'blue', 'purple'); 
```

假设我真的很喜欢红色。如何调整以下代码以获取“随机”元素，但让“红色”比其他元素更受青睐？即，我希望它大部分时间都返回“红色”。

```
$('.box').each(function() {

  // Get a "random" color
  var randomColor = colors[Math.floor(Math.random()*colors.length)];

  $(this).css('background-color', randomColor);
}); 
```

我意识到我可以在数组中多次添加“红色”，但我试图避免这种情况。还是有完全不同的方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:23:24.023

您可以创建另一个数组，该数组与充满颜色的数组一样长，并为它们分配概率（即整个数组必须加起来为 1）。从这里生成一个介于 1 和 0 之间的数字，并在您遍历概率数组时从中减去。一旦它达到 0，然后获取该索引并返回对应的颜色。我不擅长 JavaScript，但我会尝试。

```
var colors = new Array('red', 'orange', 'yellow', 'green', 'blue', 'purple');
var probabilities = new Array(0.5 , 0.1, 0.1, 0.1, 0.2);
var prob = Math.random()
var i=0;
for (i=0;i<probabilities.length && prob > 0;i++)
{
prob = prob - probabilities[i];
}
var color = colors[i]; 
```

我相信这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:20:02.947

此外，很难说你有多爱红色，但这里有一种可能的方式：

```
var randomColor = colors[Math.random() > 0.5
    ? Math.floor(Math.random() * colors.length) : 0]; 
```

在这种情况下，红色将以 0.5 的概率被选中，而不是其他颜色。

# android - Android - 从我的项目中获取课程并将其制作成一个 jar

> ID：14823388
> 
> 赞同：1
> 
> 时间：2013-02-12T00:15:26.510
> 
> 标签：android, jar

好的，所以我有一个 android 项目，它工作正常。现在我想将其中的一些类放入一个 jar 中，然后将该 jar 包含在我的项目中。我不确定该怎么做。这些文件中有 R 并且不确定它们是否会影响任何东西。我将 xml 文件保存在原始项目中，所以基本上我想要的只是将 .java 文件放入 jar 中然后引用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:19:20.717

为您的课程创建一个新项目并将其标记为`library`，在eclipse中转到 `Project properties -> Android`然后检查`Is library`

要在新项目中使用您的库，请再次转到 `Project properties -> Android`并单击`Add`按钮并选择您的库。

您可能需要将两个项目放在同一个工作区中。

在您的库中定义的资源文件（即`R`）将可以在您的新项目中访问，因此您可以像在新项目中定义一样使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:21:09.163

您可以创建一个单独的库项目。如果您使用的是命令行，请为项目创建一个目录，cd 到它，然后使用

```
android create lib-project 
```

帮助输出将告诉您此命令所需的标志。

将类移动到库项目后， cd 回到主项目并键入

```
android update project -p . -l <path-to-library-project> 
```

现在当你编译你的主项目时，它也会编译库项目，创建一个 jar 文件，并将它的类导入你的主项目。有关库项目的更多详细信息，请查看[管理项目](http://developer.android.com/tools/projects/index.html)。如果您使用的是 Eclipse，请查看[使用 ADT 从 Eclipse 管理项目](http://developer.android.com/tools/projects/projects-eclipse.html)。

# javascript - 表格里背景变化

> ID：14823390
> 
> 赞同：0
> 
> 时间：2013-02-12T00:15:38.767
> 
> 标签：javascript, jquery, html, css, focus

我正在尝试实现当用户专注于输入时 li 标签改变背景颜色的效果（效果可以在页面底部看到[here](http://secondandpark.com/ "这里")。从看到类似的问题看来，它似乎不能纯CSS，所以我想知道如何在 jquery 中做到这一点（我不知道）。这是我的 HTML：

```
<form class="contact-form" action="" method="post" name="contact-form">  
        <ul>   
            <li>
                <input type="text" name="name" placeholder="NAME" class="test"/>
            </li>
            <li>
                <input type="email" name="email" placeholder="EMAIL" />
            </li>
            <li>
                <textarea name="message" name="message" placeholder="MESSAGE"></textarea>
            </li>
            <li>
                <button class="submit" type="submit">Send</button>
            </li>
        </ul>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:21:09.393

这是如何做到的。它将为具有焦点的表单字段的父 LI 添加背景颜色，退出字段后背景颜色将被移除。

[jsFiddle 上的工作示例](http://jsfiddle.net/htmled/v9BAE/)。

CSS：

```
.selected {
    background: lightYellow;
} 
```

jQuery：

```
$(function () {
    var $form = $(".contact-form"),
        selectedClass = "selected";

    $form.on("focus", "input, textarea", function () {
        $(this).closest("li")
            .addClass(selectedClass);
    });

    $form.on("blur", "input, textarea", function () {
        $(this).closest("li")
            .removeClass(selectedClass);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:25:32.347

您可以在 CSS 语句中使用 :hover 选择器；根本不需要JS..

```
.contact-form ul li { background-color:#000000; }
.contact-form ul li:hover { background-color: #C0C0C0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:33:36.937

这是一个基本的 jquery 版本，它在焦点上激活，例如示例

```
$('.contact-form').on('focus','input,textarea',function() {
    $('.contact-form li').animate({'backgroundColor':'#00FF00'});

    $(this).parent().animate({'backgroundColor':'#FF0000'});
}); 
```

[小提琴](http://jsfiddle.net/JvtkT/)

# c# - 如何以编程方式创建用户控件数组

> ID：14823400
> 
> 赞同：1
> 
> 时间：2013-02-12T00:16:38.130
> 
> 标签：c#, asp.net, user-controls, web-user-controls

如何以编程方式创建一组 Web 用户控件？

我创建了一个网络用户控件。我已经知道如何在 aspx 文件中实现其中一个编码，但是我想知道是否可以从 Page_Init() 或 Page_Load() 事件中的代码中执行此操作。

我已经知道 aspx 页面上的初始化。

```
<%@ Register TagPrefix="uc" TagName="myUsercontrol1" Src="/Controls/myUsercontrol1.ascx" %> 
```

以传统方式，我会做类似的事情：

```
<div id="divMyusercontrols" runat="server">
    <uc:myUsercontrol1 id="ctlTheControl" runat="server" />
</div> 
```

正如我所尝试的那样，我想要做的但不起作用的是：

在.aspx 文件中：

```
<div id="divMyusercontrols" runat="server">
</div> 
```

在后面的代码中，让我们说 Page_Init() 事件如下：

```
String strControl = "<uc:myUsercontrol1 id="ctlTheControl{0}" runat="server" />";
String strHtml = null;
for (int i = 0; i < 5; i++)
     strHtml += String.Format(strControl, i.ToString());
this.divMyusercontrols.InnerHTML = strHtml; 
```

遗憾的是，这段代码不起作用。我意识到我可以简单地手动执行此操作，但我不知道实际计数。我会提前知道的。

更新（显示答案＃3正确代码）：

aspx 文件的 C# 如下。我调用了一个静态 C# 代码，它返回计数。然后我设置一个属性来指示要显示的项目，然后是 for 循环。凉爽的！

```
<%int iCount = MyProject.Items;%>
<%for (int iIndex = 0; iIndex < iCount; iIndex++)%>
<%{ %>
    <div runat="server">
    <uc:myUsercontrol1 id="ctlItem<%=iIndex %>" runat="server" />
    </div>
<%}%> 
```

解决方案（2013-02-12）：我在下面尝试了所有三个答案，遗憾的是在我将一个标记为解决方案之后。获胜的是 Page_LoadControl() 的修改版本。这是有效的代码，是的，我运行了代码。一切正常。

```
// Load an array of controls onto a predefined panel.
for (int iIndex = 0; iIndex < 10; iIndex++)
{
    // Load the control.
    MyProject.Controls.MyControl ctlItem = (MyProject.Controls.MyControl)Page.LoadControl(@"/Controls/MyControl.ascx");

    // Initialize the control.
    ctlItem.MyIndex = iIndex;

    // Add the control to the panel.
    this.pnlItems.Controls.Add(ctlItem);
} 
```

这是固定的aspx代码。

```
<div id="divItems" runat="server" class="divItems">
    <dx:ASPxPanel ID="pnlItems" runat="server" Width="200px">
    </dx:ASPxPanel>
</div> 
```

我试过做，MyProject.Controls.MyControl ctlItem = new MyProject.Controls.MyControl()，但是这不起作用。我有一个空豁免。加载控件有效。

我也匆忙将其标记为解决方案的答案不起作用。运行时设计师抱怨。这是设计师的代码。

```
 /// <summary>
    /// ctlPurchases<%=iIndex %> control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    protected global::MyProject.Controls.MyControl ctlItem<%=iIndex %>; 
```

设计师对 <%...%> 部分不满意。该解决方案还有其他问题。最干净的是使用 Page_LoadControl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:21:20.187

当我想要我的用户控件的多个副本时，我通常遵循以下模式

```
<%for (Counta = 1; Counta <= 10; Counta++) {%>
<div id="divMyusercontrols<%=Counta%>" runat="server">
  <uc:myUsercontrol1 id="ctlTheControl<%=Counta%>" runat="server" />
</div>
<%}%> 
```

上面的代码会给我 10 个嵌套在 10 个 div 元素中的用户控件

# 更新

请注意，我使用了一个在线工具将代码从 VB 转换为 c#，所以我不知道它有多准确。但是我不知道它在 VB 中对我有用。

下面是VB代码进行比较

```
<%for Counta = 1 To 10%>
<div id="divMyusercontrols<%=Counta%>" runat="server">
  <uc:myUsercontrol1 id="ctlTheControl<%=Counta%>" runat="server" />
</div>
<%Next%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:36:56.597

您可以使用 ASP.NET 面板并使用 Page.LoadControl() 吗？

```
for (int i = 0; i < 10; i++)
{
    pnlContent.Controls.Add(Page.LoadControl("ucDemo.ascx"));
} 
```

这是在 C# BTW 中。

或者，如果这些 UserControl 将是数据绑定的，您可以尝试使用 Repeater 控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:27:30.083

我认为您可以在 Page_Load 中执行以下操作：

```
 HtmlGenericControl control = FindControl("divMyusercontrols")
  var myControl = new MyControl();
  for(int i=0; i<numberOfUserControls; i++)
  {
     myControl.ID = "myUniqueID" + i; 
  }
  myControl.Controls.Add(myControl); 
```

# java - 为什么我得到一个无限循环

> ID：14823405
> 
> 赞同：1
> 
> 时间：2013-02-12T00:17:04.090
> 
> 标签：java, file

我刚刚制作了一个程序，它应该扫描文件并计算行数、元音和许多其他内容，但是当我运行它时，它会进入无限循环。我很确定这与 我不太熟悉的`.hasNext()`and方法有关`.hasNextLine()`

```
import java.util.*;
import java.io.*;
/**
 *
 *
 */
public class Wordcount1 {

    public static void main(String[] args) {
        int vowels=0;
        int punctuation=0;
        int sentences=0;
        int words=0;
        int lines=0;
        int alphaNumeric=0;

       try{
       Scanner input = new Scanner(System.in);
       System.out.println("Enter file name: ");

       File file = new File(input.nextLine());
       Scanner fileReader = new Scanner(file);

       while(fileReader.hasNextLine()){
           lines +=1;
       }
       while(fileReader.hasNext()){
           { fileReader.next();
           words +=1;
           }
           String word = fileReader.next();
           for (int i=0; i<word.length();i++){
               char ch= word.charAt(i);
               if(ch=='a'||ch=='e'||ch=='i'||ch=='o'||ch=='u')
                   vowels +=1;
               if((ch=='!'||ch=='.'||ch=='?'))
                   sentences +=1;
               if(Character.isLetterOrDigit(ch))
                   alphaNumeric +=1;
               switch(ch){
                   case ',':
                    punctuation +=1;
                    break;
                   case '[':
                    punctuation +=1;
                    break;
                   case ']':
                    punctuation +=1;
                    break;
                   case ':':
                    punctuation +=1;
                    break;
                   case '`':
                    punctuation +=1;
                    break;
                   case '-':
                    punctuation +=1;
                    break;
                   case '!':
                    punctuation +=1;
                    break;
                   case '_': 
                    punctuation +=1;
                    break;
                   case '(':
                    punctuation +=1;
                    break;
                   case ')':
                    punctuation +=1;
                    break;
                   case '.':
                    punctuation +=1;
                    break;
                   case '?':
                    punctuation +=1;
                    break;
                   case '"':
                    punctuation +=1;
                    break;
                   case ';':
                    punctuation +=1;
                    break;

               }

           }
       }
        System.out.println("The number of words in the file name: " + words);
        System.out.println("The number of lines in the file name: " + lines);
        System.out.println("The number of alphanumeric characters: "
                + "in the file name: " + alphaNumeric);
        System.out.println("The number of sentences in the file name: "
                + sentences);
        System.out.println("The number of vowels in the file name: " + vowels);
        System.out.println("The number of punctuations in the file name: " 
                + punctuation);

       }catch(FileNotFoundException e){
           e.printStackTrace();
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:42:35.400

```
while(fileReader.hasNextLine()){
    lines +=1;
} 
```

在这里，您反复询问文件“是否还有更多行”，但实际上从未使用任何行。所以，它一直在回答“是的，我有更多的行”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:41:55.357

因为您没有`next()`在 fileReader 上调用方法

调用[Scanner.hasNext()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNext%28%29)仅说明它是否有令牌，但不会推进扫描仪：

# javascript - 我在 javascript 中更新了一个数组（键，值）对象

> ID：14823413
> 
> 赞同：4
> 
> 时间：2013-02-12T00:17:56.427
> 
> 标签：javascript, arrays

如何更新数组（键，值）对象？

```
arrTotals[
{DistroTotal: "0.00"},
{coupons: 12},
{invoiceAmount: "14.96"}
] 
```

我想将“DistroTotal”更新为一个值。

我试过了

```
 for (var key in arrTotals) {
        if (arrTotals[key] == 'DistroTotal') {
            arrTotals.splice(key, 2.00);
        }
    } 
```

谢谢 ..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T00:25:09.330

因为听起来您正在尝试使用键/值字典。考虑在这里切换到使用对象而不是数组。

```
arrTotals = { 
    DistroTotal: 0.00,
    coupons: 12,
    invoiceAmount: "14.96"
};

arrTotals["DistroTotal"] = 2.00; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T00:19:21.453

您缺少嵌套级别：

```
for (var key in arrTotals[0]) { 
```

如果您只需要使用那个特定的，那么只需执行以下操作：

```
arrTotals[0].DistroTotal = '2.00'; 
```

如果您不知道带有`DistroTotal`密钥的对象在哪里，或者其中有很多，那么您的循环有点不同：

```
for (var x = 0; x < arrTotals.length; x++) {
    if (arrTotals[x].hasOwnProperty('DistroTotal') {
        arrTotals[x].DistroTotal = '2.00';
    }
} 
```

# .net - 带有 JSON 的 CURL 语句产生服务器错误

> ID：14823416
> 
> 赞同：0
> 
> 时间：2013-02-12T00:18:25.457
> 
> 标签：.net, json, curl, stack-trace

## --更新了堆栈跟踪错误--

我正在努力尝试正确处理以下代码：

```
curl -v -u SD4FWFCF-ASD2-32FD-AF34-F34A4FA4CA34:CO0I0MM0-2349-OIJC-3409-234F098JJ3F4 -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"email":"john.doe@example.com","amountPaid":19.99,"systemName":"test-purchase","recipientPhoneNumber":"5558884321","senderPhoneNumber":"8005551234","deliveryDate":null,"paymentType":5,"scriptValues":[{"key":"fname","value":"john"},{"key":"lname","value":"doe"},{"key":"width","value":"medium"},{"key":"length","value":"large"},{"key":"city","value":"Fairbanks"},{"key":"state","value":"alaska"}]}' -k "https://api.example.com/processorder" -o output.html 
```

每次我运行它时，我都会收到一个`500 Internal Server Error`.

这是该错误的示例：

> “/”应用程序中的服务器错误。
> 
> 序列不包含任何元素
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：序列不包含任何元素
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：序列不包含元素]
> System.Linq.Enumerable.Single（IEnumerable 1 源，表达式2 参数）+248 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod（ControllerContext controllerContext，ActionDescriptor actionDescriptor，IDictionary 1 延续）+640 System. Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList 2 个参数) +312 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +691 System.Web.Mvc.Controller.ExecuteCore() +162`1 source) +371
> System.Linq.Queryable.Single(IQueryable``1 predicate) +590
> Example.Web.Areas.Api.Controllers.ApiController.ProcessOrder(JsonProcessOrder model) in C:\Example.Web\Areas\Api\Controllers\ApiController.cs:1221
> lambda_method(Closure , ControllerBase , Object[] ) +127
> System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`
> `2 parameters) +39
> System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +125 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`
> `1 filters, ActionDescriptor actionDescriptor, IDictionary`
> 
> System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +305 Example.Web.DataController.Execute(RequestContext requestContext) 在 C:\Example.Web\DataController.cs:180
> System.Web.Mvc.<>c_DisplayClassb *。 b* _5() +62
> System.Web.Mvc.Async.<>c_ *DisplayClass1.b* _0() +20
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469 System.Web.HttpApplication。 ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.3；ASP.NET 版本：4.0.3

我试图改变**json**，但我一生都无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:40:51.100

如果不了解有关方法的更多信息，就无法回答这个问题。正如@Abe Meissler 所说，可能会调用一个空序列。

# android - 获取任意点的 HitTestResult

> ID：14823418
> 
> 赞同：3
> 
> 时间：2013-02-12T00:19:00.203
> 
> 标签：android, android-webview, hittest

我希望能够弄清楚 a 中任意 (x,y) 点处的对象是什么`WebView`，最好不会导致页面上的任何更改。我正在为 Android 开发一个可访问性应用程序，其中需要在激活链接之前识别链接的目标；长按链接（遗憾的是）不是一种选择。

`getHitTestResult`基本上是我想要的，但仅适用于当前的“光标节点”。我找不到关于这个“光标节点”的任何文档，但我怀疑它需要一个触摸事件才能出现在目标点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:45:59.403

*不是从一个点找到节点元素的方法*，但如果你想覆盖 webview 上的链接单击事件功能，你可以这样做：

使用 setWebViewClient 方法将[WebViewClient添加到您的 Web 视图。](http://developer.android.com/reference/android/webkit/WebViewClient.html)然后覆盖[shouldOverrideUrlLoading()](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)方法并检查给定的目标**url**

提示：如果它返回 true，则不会加载 url，因为这意味着您的本机应用正在处理它。

代码示例：

```
 webview.setWebViewClient(new WebViewClient() {
         public boolean shouldOverrideUrlLoading(WebView view, String url) {
              if (isUrlGood(url))
                  return false; //the webview can load the url
              else
                  return true; //avoid the webview from loading this url
         }
 }); 
```

# php - PHP：从数据库中填充下拉列表；将结果发送到新查询

> ID：14823424
> 
> 赞同：-1
> 
> 时间：2013-02-12T00:19:26.443
> 
> 标签：php, dynamic, drop-down-menu

我已经发布了一个未回答的问题（[动态填充的下拉列表；$_POST 返回错误](https://stackoverflow.com/questions/14818816/dynamically-populated-drop-down-post-returning-error)），该问题涉及我的案例的具体情况，但它并没有获得太大的吸引力，所以我想我会走另一条路。

有人愿意指导我如何执行这个简单的任务：

我有两张桌子。

我想从一个表的查询结果中填充一个下拉菜单：

我想从此下拉列表中获取 $_POST 并对第二个表执行查询并打印这些结果。

听起来很简单吧？我一直在努力寻找帮助以使其发挥作用。请参阅第一段中的链接以查看我的问题的具体情况，或者如果这是错误的路线，请从广义上指导我如何完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:28:36.737

您想要获得的通常称为“链式选择”，您缺少一个重要的步骤，即 Javascript（或仅使用 jQuery）进行 AJAX 调用以填充第二个选择。

尝试一个简单的教程：使用 PHP / MySQL / AJAX / jQuery 的链式选择框[http://www.blueicestudios.com/chained-select-boxes-using-php-mysql-ajax/](http://www.blueicestudios.com/chained-select-boxes-using-php-mysql-ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:28:43.983

您可以使用`onchange=""`触发 AJAX 请求以根据值进行查询。或使用 jQuery

```
$(document).ready(function() {
    $(".machine_select").change(function(){
        //do ajax and replace response with html() or such
        alert($(this).val());
    });
}); 
```

# java - 如何实现鼠标监听器

> ID：14823425
> 
> 赞同：1
> 
> 时间：2013-02-12T00:19:29.250
> 
> 标签：java, eclipse, actionlistener, mouselistener

我知道在课程开始时您可以编写`implements ActionListener`，然后您必须创建`public void actionPerformed(ActionEvent e)`它才能使其可行。是否可以用 mouseListener 做同样的事情？如果是这样，您必须创建什么方法来代替`actionPerformed`？

编辑：这是我的班级声明：

```
public class Basic_Book extends JFrame implements ActionListener implements MouseListener 
```

这是我旁边显示的错误消息：

*   可序列化类 Basic_Book 未声明 long 类型的静态最终 serialVersionUID 字段

*   令牌“实现”的语法错误，. 预期的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T00:21:49.487

如果您查看[javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseListener.html) .. 有一堆方法`MouseListener`。在其他不实现所有内容的情况下，您可以使用一个`MouseAdapter`which implements`MouseListener`和其他接口，但已经提供了存根方法。

`mouseClicked`等`mouseEntered`。在您编辑之后：

```
class Basic_Book extends JFrame implements ActionListener,MouseListener 
```

使用逗号分隔接口。 `ActionListener`只有`actionPerformed`所以你必须只为 ActionListener 实现， `MouseListener`有 4 个或更多，你需要实现 ALL。或者使用`MouseAdapter`并覆盖必要的方法。

对于`serialVersionUID`，让 Eclipse 为您做这件事。在错误上尝试 ctrl+space 来调用 Eclipse 的智能感知，它会给你一些选项。选择说生成的那个`serialVersionUID`，

我不记得它实际上是如何完成的（但它应该可以工作！手指交叉）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:22:58.757

[官方 Java API 文档](http://docs.oracle.com/javase/7/docs/api/)是任何 Java 程序员的必备工具。特别是，查看[MouseListener 的文档](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)以了解您需要实现哪些方法。

您也可以简单地添加`implements MouseListener`并尝试编译您的类。编译器会很快告诉你需要实现哪些方法。如果您使用的是 Eclipse、NetBeans 或 IntelliJ 等 IDE，您甚至不需要编译代码。每个 IDE 都有自己的方式告诉您需要哪些方法，甚至为您生成方法体。我强烈建议您熟悉一个好的 IDE。它将为您节省大量编写代码的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T00:23:43.930

Like `ActionListener`and`MouseListener`是一个接口，这意味着，是的，您可以以相同的方式实现。

[`MouseListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)定义了您必须实现的五种方法。

*   `mouseClicked(MouseEvent e)`
*   `mouseEntered(MouseEvent e)`
*   `mouseExited(MouseEvent e)`
*   `mousePressed(MouseEvent e)`
*   `mouseReleased(MouseEvent e)`

您确实应该首先查看[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)和[教程](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T00:22:08.940

实际上编译器应该告诉你答案，但应该是 mouseLeave、mouseEnter、mouseHover、mousePressed

# oauth-2.0 - 如何允许用户使用他们的谷歌账户访问[读/写]一个私有融合表

> ID：14823426
> 
> 赞同：3
> 
> 时间：2013-02-12T00:19:41.027
> 
> 标签：oauth-2.0, google-fusion-tables, google-oauth

我正在使用 Fusion 表来存储一些地理数据。我想允许用户使用他们的谷歌账户访问[读/写]这个表。谁能让我知道如何做到这一点？

我尝试使用 OAUTH2.0 [[以此](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)作为参考] 并使用客户端凭据来执行此操作。但是，似乎该表是在用户帐户而不是管理员帐户中创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-29T13:18:38.087

我知道这个问题有点老了，但我想我会为更多的搜索者提供答案。

从根本上说，Google Fusion 可以用作私人数据库，通过绑定到 Google Apps 企业帐户的 Google Apps 服务帐户进行访问。

服务帐户：创建一个应用程序并转到[https://console.developers.google.com/project/[appname]/permissions](https://console.developers.google.com/project/[appname]/permissions)并授予您的应用程序电子邮件地址所有权（在权限部分）；要使用服务帐户（用于 2LO 身份验证），然后单击“创建新客户端 ID”，然后生成将在应用程序中使用的新 P12 密钥，如果您还生成 JSON 密钥，则该密钥中的文本将包含稍后需要的电子邮件地址。

GOOGLE 应用程序：[https](https://admin.google.com/[AppDomain]/AdminHome?fral=1) ://admin.google.com/[AppDomain]/AdminHome?fral= 1 在管理控制台中转到安全并选择“管理 API 客户端访问”。API 客户端名称应取自前面步骤生成的 JSON 文件；范围应与设置服务帐户凭据对象时将在代码中使用的范围相匹配。如果您查看 Google Code Playground ( [https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/) )，您将看到所有可能的 API 范围的确切拼写和设置。对于融合表范围目前是[https://www.googleapis.com/auth/fusiontables](https://www.googleapis.com/auth/fusiontables)

融合表：融合表现在需要业务管理员电子邮件帐户作为编辑器

Everything should now be setup to access a private fusion table from code. Lots of example code at: [https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:14:39.797

**首先要注意：**如果您想在网页上的 Google 地图上可视化这些数据（使用 FusionTablesLayer），您唯一的选择是将您的表格共享为公开。这意味着每个人都有读取权限。没有解决方法。忍受它。

对于写访问：您可以使用 Google Drive API 来设置您的融合表的权限。 [https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert) 您需要先使用您的管理员帐户创建融合表（我认为服务帐户更合适），然后使用权限授予任何人访问权限访问您的页面。

# android - 对没有语言环境的语言的 Android 多语言和少数语言支持

> ID：14823431
> 
> 赞同：1
> 
> 时间：2013-02-12T00:19:57.387
> 
> 标签：android, xml, string, localization, resources

我正在构建一个旨在支持多语言的 Android 应用程序。除了通常的西班牙语、法语、德语等，还有一些没有 Android 语言环境的少数民族语言。

我知道在资源文件夹中提供各种值文件夹的典型解决方案。例如 values_fr 或 values_sp。但是，对于没有语言环境的少数民族语言，这对我没有帮助。

所以我的目标是将多个字符串 xml 文件放入 values 文件夹中。例如：strings-welsh.xml、strings-cornish.xml、strings-gaelic.xml、strings-french.xml 等。

但是，我在执行此操作时遇到问题，因为我收到许多**“资源条目 ## 已完全定义”**错误（其中 ## 是字符串资源的名称）。

那么我可以让编译器停止抱怨，我可以自由调用：**getString(R.strings_welsh.app_name)**或**getStrings(R.strings_french.app_name)**。

我将支持 Android 4.0 (ICS) 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:56:51.707

你应该坚持标准的方式。您可以创建没有提供的静态实例的语言环境。事实上，你可以提供任何你想要的东西；来自[语言环境文档](http://developer.android.com/reference/java/util/Locale.html)：

> 您可以为不存在的语言和国家/地区创建区域设置

使用[构造函数](http://developer.android.com/reference/java/util/Locale.html#Locale%28java.lang.String%29)。

现在我还没有尝试过，但我认为这意味着如果您将正确的字符串放在正确文件夹中的正确文件中，并且您的设备支持这些语言，或者您明确指定区域设置，您应该得到正确的本地化字符串。我不知道您需要哪种语言，但至少对于您提到的那些，这是[两个字母的语言代码](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)：

*   威尔士语：`cy`
*   康沃尔：`kw`
*   盖尔语：`gd`

# javascript - 按钮提交过早

> ID：14823433
> 
> 赞同：0
> 
> 时间：2013-02-12T00:20:05.847
> 
> 标签：javascript, html, button, event-listener

我的按钮提交表单太早了。当我单击我的按钮时，它应该创建一个文本区域，我想在其中写入，然后再次单击按钮以提交它。它确实创建了 textarea，但我从来没有机会写任何东西，因为它在创建 textarea 后立即提交。任何解决方案如何避免这种情况？

Javascript

```
function createEmailField(event) {
    var name = document.getElementById("name").value;
    if (name == "") {
        window.alert("Mata in ditt namn");
    }
    else if (name.search(/^[A-Za-z]+$/) == -1) {
        window.alert("Mata in ett namn med bokstäver");
    }
    else {
        var newDiv = document.createElement("div");
        var br = document.createElement("br");
        newDiv.appendChild(br);
        newDiv.appendChild(document.createTextNode("Hej " + name + "!"));
        var br = document.createElement("br");
        newDiv.appendChild(br);
        newDiv.appendChild(document.createTextNode("Hur når vi dig?"));
        var br = document.createElement("br");
        newDiv.appendChild(br);
        newDiv.appendChild(document.createTextNode("Epost:"));
        var br = document.createElement("br");
        newDiv.appendChild(br);
        var input = document.createElement("input");
        input.setAttribute("type", "text");
        input.setAttribute("id", "email");
        input.setAttribute("name", "email");
        newDiv.appendChild(input);
        var form = document.getElementById("form");
        var callButton = document.getElementById("button");
        form.insertBefore(newDiv, callButton);
        removeEvent(callButton, "click", createEmailField, false);
        addEvent(callButton, "click", createTextArea, false);
        var email = document.getElementById("email");
        email.onkeypress = prevent;
        removeEvent(document.getElementById("name"), "click", createEmailField, false);
    }
}

function createTextArea(event) {
    var email = document.getElementById("email").value;
    if (email == "") {
        alert("Mata in ditt email");
    }
    else if (email.search(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/) == -1) {
        window.alert("Mata in ett korrekt email");
    }
    else {
        var newDiv = document.createElement("div");
        var br = document.createElement("br");
        newDiv.appendChild(br);
        newDiv.appendChild(document.createTextNode("Vad har du för fråga om vår verksamhet?"));
        var br = document.createElement("br");
        newDiv.appendChild(br);
        var textArea = document.createElement("textArea");
        textArea.setAttribute("id", "question");
        textArea.setAttribute("name", "question");
        textArea.cols = "30";
        textArea.rows = "5";
        newDiv.appendChild(textArea);
        var br = document.createElement("br");
        newDiv.appendChild(br);
        newDiv.appendChild(document.createTextNode("Vi kommer att svara dig via: " +   email));
        var br = document.createElement("br");
        newDiv.appendChild(br);
        var form = document.getElementById("form");
        var callButton = document.getElementById("button");
        form.insertBefore(newDiv, callButton);
        removeEvent(document.getElementById("email"), "click", createTextArea, false);
        callButton.setAttribute("type", "submit");
    }
}

function prevent(event) {
    if ((window.event && window.event.keyCode == 13) || (event && event.keyCode == 13))  {
        if (window.event) {
            window.event.returnValue = false;
        } else if (event.preventDefault) {
            event.preventDefault();
        }
    }
}

function init() {
    var callButton = document.getElementById("button");
    addEvent(callButton, "click", createEmailField, false);
    var name = document.getElementById("name");
    name.onkeypress = prevent;
}
window.onload = init; 
```

HTML

```
<h2> Frågeformulär </h2>
<form id="form" method="post" action="http://student.ts.mah.se/da123aht11/echoscript.php">
    <div>
        Vad heter du?... 
        <br /><input type="text" name="name" id="name" /> 
    </div>
    <input type="button" name="skicka" value="Skicka" id="button">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:24:28.800

@DrWooolie 您可能希望使用`event.preventDefault();`这段代码来停止元素的实际行为，在这种情况下为按钮，或者它也可以处理锚点击事件。

[更多信息在这里](http://api.jquery.com/event.preventDefault/)

# jquery - jquery.autoNumeric 插件与 jquery.tools 冲突

> ID：14823436
> 
> 赞同：1
> 
> 时间：2013-02-12T00:20:27.937
> 
> 标签：jquery, jquery-plugins, init

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:28:23.303

如果您的代码是复制粘贴，则在 vMax 行之后有一个额外的大括号：

```
$('#quantity').autonumeric(
 'init',
 {
  aSep: ',',
  aSign: '$',
  vMin: '0.000',
  vMax: '9.000'
                    }
 }
); 
```

请原谅丑陋的格式，不确定在代码块中引起注意的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:56:10.920

经过大量挖掘，原来是 jquery.tools 和 jquery.autonumeric 之间的版本/冲突问题。

升级到最新的 jquery.tools 后问题就消失了:)

感谢您的帮助... jsfiddle 示例帮助我找出原因。

# binding - 返回符号数据时 ZBarMonotouchBinding 错误

> ID：14823442
> 
> 赞同：1
> 
> 时间：2013-02-12T00:21:18.267
> 
> 标签：binding, xamarin.ios, runtime-error, zbar

我正在使用从[sourceforge 上](http://sourceforge.net/p/zbar/patches/29)下载的 ZBarMonotouchBinding v2 。这个版本没有附带 libzbar.a 文件，所以我使用的是绑定 v1 中的 libzbar.a 文件（这可能是我的问题的根源？？）。下载绑定后，我编译并添加了 ZBar.dll 引用到我的示例应用程序。

对于我的示例应用程序中的委托，我使用的是[在 stackoverflow 上](https://stackoverflow.com/questions/10056742/marshalling-a-nsobject-already-within-monotouch-to-a-derived-class-instance)找到的代码。

示例应用程序在显示扫描仪并让它识别条形码时没有问题，但是一旦它识别出条形码并想要将符号数据返回给代理，我就会得到这个异常，而不是让它调用 FinishedPickingMedia 事件在代表中：

```
Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: -[ZBar.ZBarReaderViewController+_ZBarReaderDelegate imagePickerController:didFinishPickingMediaWithInfo:]: unrecognized selector sent to instance 
0xe2a130

MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: -[ZBar.ZBarReaderViewController+_ZBarReaderDelegate imagePickerController:didFinishPickingMediaWithInfo:]: unrecognized selector sent to instance 0xe2a130
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:43
  at Scanner.Application.Main (System.String[] args) [0x00000] in /Users/user/Projects/sample/scanner/Main.cs:16 
```

似乎它没有找到 FinishedPickingMedia 事件，但由于它是据说可以工作的借用代码，我认为这不是编码问题。以防万一这是我正在使用的源代码：

控制器：

```
public class ScannerViewController : ZBarReaderViewController
    {
        public ScannerViewController ()
        {
            this.SupportedOrientations = ZBarOrientation.All;
            this.ShowBarcodeTracker = true;
            this.ShowsZBarControls = true;
            this.ReaderDelegate = new zScannerDelegate();
        }

} 
```

代表：

```
public class zScannerDelegate : ZBarReaderDelegate
    {
        public delegate void ScanResult(string scanstrring);
        public event ScanResult ScannedCode;
        public zScannerDelegate ()
        {
        }
        public override void FinishedPickingMedia (UIImagePickerController picker, NSDictionary info)
        {

            ZBarSymbolSet result = null;

            string retstr = string.Empty;
            foreach (var sresult in info.Values) {
                if (sresult is ZBarSymbolSet) {
                    result = sresult as ZBarSymbolSet;
                    break;
                }
            }
            if (result != null) {
                foreach (var itema in result) {
                    Console.WriteLine (itema.Data);
                    retstr = itema.Data;
                    ScanResult ret = ScannedCode;
                    if (ret != null)
                        ret(retstr);
                }
            }
        }

    } 
```

可能是我不得不从导致问题的绑定的 v1 借用的 libzar.a 文件吗？知道在哪里可以获得 libzar.a 文件的更新版本，或者我可以做些什么来尝试解决这个错误？

我已经研究了一整天，但不幸的是，没有很多代码示例可供 ZBar 和 Monotouch 参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:57:21.413

我不是 100% 确定你的代码有什么问题，对我来说看起来不错。
但是这些绑定的最新版本（以及示例应用程序）现在托管在 github 上，地址为[https://github.com/Its-Tyson/MonoTouch.ZBar](https://github.com/Its-Tyson/MonoTouch.ZBar)

`libzbar.a' 是被包装的实际 iPhone ZBar SDK 库。您可以从[http://zbar.sourceforge.net/iphone/](http://zbar.sourceforge.net/iphone/)获得最新版本（尽管它已经在 v1.2 上使用了很长一段时间，我相信您在 V1 绑定中获得的压缩版本将完全是一样，所以我怀疑这是你问题的根源。）

# django - 可能为空的 appengine django 动态表

> ID：14823445
> 
> 赞同：0
> 
> 时间：2013-02-12T00:21:53.463
> 
> 标签：django, google-app-engine, customization

我有一些代码可以从数据存储中提取项目列表。

它们看起来像这样：

```
class List(db.Model):
  name = db.StringProperty(multiline=True)

class Item(db.Model):
  name = db.StringProperty(multiline=True)
  created = db.DateTimeProperty(auto_now_add=True)
  completed = db.DateTimeProperty(auto_now_add=False) 
```

在 Django 模板中，我希望仅在至少有一个列表元素要显示时有条件地显示表头。我很惊讶这是多么困难。

例如：

```
{% for list in lists %}
   <font size="+2"><b>{{ list.name }}</b></font><br>
   <table><tr><th>&nbsp;</th><th>item</th><th>created</th><th>completed</th></tr>
   {% for item in list.items %}
      {% ifnotequal item.completed None %}
        <tr><td>&nbsp;</td><td>{{ item.name }} </td><td>{{ item.created }} </td><td>{{ item.completed }} </td></tr>
      {% endifnotequal %}
   {% endfor %}
   </table>
{%endfor%} 
```

如果列表中没有任何符合条件的项目，我会得到一张丑陋的空表，如下所示：

```
**todo**
item    completed   delete 
```

我想做类似的事情，在 Django 中设置一个变量，比如

```
{% set first = 1 %} 
```

然后当我要为表格输出至少一项时，执行类似的操作

```
 {% for item in list.items %}
      {% ifnotequal item.completed None %}
         {% if first %}
           <table><tr><th>&nbsp;</th><th>item</th><th>created</th><th>completed</th></tr>
           {% set first = 0 %}
         {% endif %}
       .... do the rest of the stuff
       {% endifnotequal %} 
```

因此，我尝试为 Django 创建一个自定义标签，该标签将在 appengine 中很好地发挥作用，如下所述：

[一种解决方案](http://www.soyoucode.com/2011/set-variable-django-template#comment-3817)

[另一种解决方案](http://daily.profeth.de/2008/04/using-custom-django-template-helpers.html)

并遇到了很多错误，甚至尝试了这些页面上的建议：

[另一个有类似问题的人](http://www.hipatic.com/2012/11/appengine-python-27-django-custom.html)

没有得到任何地方。我正在使用 Python 2.7。这不应该这么难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:52:00.300

这里不需要任何自定义模板标签。

```
{% for list in lists %}
   {% for item in list.items %}
       {% if forloop.first %}     
           <font size="+2"><b>{{ list.name }}</b></font><br>
           <table><tr><th>&nbsp;</th><th>item</th><th>created</th><th>completed</th></tr> 
```

等等

所有这一切都是将标头移动到内部 for 循环中，并仅在第一次迭代时输出。如果列表为空，它将永远不会进入该内部循环，并且永远不会输出标题。

# javascript - jQuery无法将事件处理程序附加到 由 .load 创建

> ID：14823448
> 
> 赞同：2
> 
> 时间：2013-02-12T00:22:10.900
> 
> 标签：javascript, jquery, ajax

第一次问题......我页面上的这个链接

```
<a onclick="$('#mainbody').load('pages/login.php', tester());">Login</a> 
```

生成这个表格

```
<form id="form">
    <b>Email Address:</b> <input type="email" name="usrEmail" placeholder="email address" required><br />
    <b>Password:</b> <input type="password" name="usrPass" placeholder="password" required><br />
    <input type="submit" value="Log in">
</form> 
```

我的 .js 包含这个；

```
function tester(){
    $("#form").submit(function() {
        alert('Handler called.');
        return false;
    }); 
} 
```

...提交表单时没有任何反应。但是，如果我将链接更改为

```
<a onclick="$('#mainbody').load('pages/login.php', function(){$( '#form' ).submit(function() { alert('Handler called.'); return false;});});">Login</a> 
```

...这完美。从功能上讲，我看不出调用命名函数或在回调本身中定义之间有什么区别，但显然浏览器可以！我究竟做错了什么？是语法吗？定时？或者 - 我仍然在使用 jQuery 找到自己的方式 - 是不是因为即使我正在调用一个引用 #form AFTER 的事件处理程序，但首先创建函数的事实忽略了它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:23:25.600

您将调用函数的结果绑定`tester`为回调`.load`（这没什么）。改为这样做：

```
$("#mainbody").load('pages/login.php', tester); 
```

即使用函数*名*作为回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:25:02.470

> 是不是因为即使我调用了一个引用#form AFTER 的事件处理程序，它仍然存在

是的。您应该查看 jQuery 委托方法。

如果你说

```
$("body").delegate("form","submit",function(){
    alert("handeled");
}); 
```

它将在从不同来源加载后工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:31:18.507

由于表单元素不在初始 DOM 中，因此您需要

*   在回调时重新附加它，在加载回调时调用你的函数

*   或让它响应这些变化

    $("#form").die('submit').live('submit',function() { alert('Handler called.'); return false; });

请注意，我删除了该功能

# button - 通过按钮单击将一个添加到第二张工作表中的单元格

> ID：14823449
> 
> 赞同：0
> 
> 时间：2013-02-12T00:22:15.053
> 
> 标签：button, excel, vba

除了非常基本的 Excel 功能之外，我对任何东西都很陌生。我正在尝试构建一个简单的电子表格来帮助保留体育赛事的统计数据。我想要有可以单击的按钮，然后将一个（数值）添加到第二张工作表中的相应单元格。我发现这段代码将为第一张纸上的单个按钮和第二张纸上的单个单元格执行我想要的操作：

```
Sub Player_Pass()
Sheets("Sheets").Range("C4").Value = Sheets("Stats").Range("C4").Value + 1
End Sub 
```

但是我有大约 100 个按钮，似乎为每个按钮创建一个具有不同名称和不同参数的单独模块并不是最优雅的解决方案。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:38:53.717

尝试这个

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    On Error GoTo exitSub
    With Target
    If .Column = 1 Then
    If .Row < 4 Then Exit Sub
    Sheets("Stats").Range("C" & .Row).Value = Sheets("Stats").Range("C" & .Row).Value + 1
    .Offset(0, 3).value = Sheets("Stats").Range("C" & .Row).Value
    .Offset(0, 1).Select
    End If
    End With
exitSub:
End Sub 
```

把它放在你的**“表格”**工作表中

这会将大于第 3 行的第一列单元格变成一个增加 stat 的按钮

只需修改列号和行号即可定位虚拟按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:45:57.997

您可以将所有按钮分配给一个通用宏，然后使用它`Application.Caller`来确定要采取的操作

```
Sub ButtonClicked()
    Dim ac

    ac = Application.Caller
    Debug.Print ac, ActiveSheet.Shapes(ac).TopLeftCell.Address()
    'do some action according to which button was clicked...

End Sub 
```

# javascript - SVG 阻止 Safari 中的点击事件（适用于 Windows），但适用于 Firefox/Chrome

> ID：14823451
> 
> 赞同：0
> 
> 时间：2013-02-12T00:22:20.200
> 
> 标签：javascript, jquery, css, safari, raphael

我正在使用 raphael.js 在我的应用程序（[http://projectmusicquest.appspot.com/static/test.html](http://projectmusicquest.appspot.com/static/test.html)）中做一些背景动画。我最初遇到的问题是确保 svg 在后台，而我的元素和 youtube 视频在前台。我不知道 Safari 和 Chrome/Firefox 之间会导致这种情况的任何差异。谢谢！

更新：我可以通过将 svg 的 x-index 设置为低于 0 来解决这个问题。我失去了一些功能，但我无法找到另一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:55:00.520

您可以放置​​在您的 CSS`svg {pointer-events: none;}`中。

# jquery - Web App 隐藏地址栏触发太晚

> ID：14823452
> 
> 赞同：0
> 
> 时间：2013-02-12T00:22:34.680
> 
> 标签：jquery, url, hide, issue-tracking, address-bar

找到了如何在 SO 上的帖子中隐藏地址栏后，我需要执行此脚本以便**在地址栏滚动出视图后**获取视口高度。

但是 H 和 W 值在滚动发生之前返回，尽管我在 1 秒后调用了 getViewPortSize() 函数。一旦对话框点击确定，地址栏就会滚动！

任何人都可以帮助我按预期工作吗？

```
$(document).ready(function () {
        window.addEventListener("load", function () { if (!window.pageYOffset) { hideAddressBar(); } });
        window.addEventListener("orientationchange", hideAddressBar);

        setTimeout(getViewPortSize(), 1000);

        function getViewPortSize() {
            var viewportWidth = $(window).width();
            var viewportHeight = $(window).height();

            alert('viewportHeight: ' + viewportHeight);
        }
        function hideAddressBar() {
            if (!window.location.hash) {
                if (document.height < window.outerHeight) {
                    document.body.style.height = (window.outerHeight + 50) + 'px';
                }

                setTimeout(function () { window.scrollTo(0, 1); }, 0);
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:00:45.497

找到了这个答案：

替换 setTimeout(getViewPortSize(), 1000);

和：

```
$(window).scroll(function () {
    getViewPortSize()
}); 
```

这样在滚动发生之前不会启动该功能。

# ruby-on-rails - 您将如何为 `Iconv.new("UTF8//IGNORE", ...)` 习语编写测试？

> ID：14823453
> 
> 赞同：5
> 
> 时间：2013-02-12T00:22:42.310
> 
> 标签：ruby-on-rails, ruby, character-encoding, ruby-on-rails-3.2

此 Iconv 惯用语将字符串转码为 UTF-8 并丢弃无法音译的字符：

```
require "iconv"

def normalize(text)
  Iconv.new('UTF-8//IGNORE', 'UTF-8').iconv(text.dup)
end 
```

您实际上将如何为此编写测试？

编辑：我最终简化了问题，因为我意识到尝试在 Rails`# encoding: utf-8`规范文件中测试它的上下文使问题复杂化。所以现在赏金有点傻，但无论如何我都会奖励它，如果有人可以展示我可以完成的测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:42:45.443

[您可以使用#pack](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pack)方法从字节数组构造字符串。这样，您可以轻松生成无效/错误字符串并在测试中使用它。

例子：

```
describe "#normalize" do
  it "should remove/ignore invalid characters" do
    # this "string" equals "Mandados de busca do caso Megaupload considerados inv\xE1lidos - Tecnologia - Sol"
    bad_string = [77, 97, 110, 100, 97, 100, 111, 115, 32, 100, 101, 32, 98, 117, 115, 99, 97, 32, 100, 111, 32, 99, 97, 115, 111, 32, 77, 101, 103, 97, 117, 112, 108, 111, 97, 100, 32, 99, 111, 110, 115, 105, 100, 101, 114, 97, 100, 111, 115, 32, 105, 110, 118, 225, 108, 105, 100, 111, 115, 32, 45, 32, 84, 101, 99, 110, 111, 108, 111, 103, 105, 97, 32, 45, 32, 83, 111, 108].pack('c*').force_encoding('UTF-8')

    normalize(bad_string).should == 'Mandados de busca do caso Megaupload considerados invlidos - Tecnologia - Sol'
  end
end 
```

（对于相当长的测试字符串，我很抱歉，我只是在我的代码中找不到更短的示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T20:44:17.430

在rails中测试这个，即使`#encoding`有一套也是可能的。

只需使用 URL 转义之类的编码步骤：

```
require "iconv"
require "cgi"

def normalize(text)
  Iconv.new('UTF-8//IGNORE', 'UTF-8').iconv(text)
end

puts normalize(CGI.unescape("m%FCstring")) # => mstring 
```

所以你可以写一个断言。

当您使用 ruby​​ 1.9 Iconv 已被弃用，您应该使用`encode`字符串的方法！

# sqlbuddy - SQL Buddy 导出到文件“无法打开文件”

> ID：14823457
> 
> 赞同：4
> 
> 时间：2013-02-12T00:22:50.313
> 
> 标签：sqlbuddy

我在我的电脑上安装了[SQL Buddy](http://sqlbuddy.com/)`localhost`，它在代替 时工作得非常好`phpMyAdmin`，但我遇到的一件事是当我需要导出数据库并选择导出为文件`Output to: text file`时（`The file could not be opened.`

有没有人遇到过这个问题/知道如何解决？我真的很感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:15:06.533

我有同样的问题，我解决了。您必须有一个名为“exports”或“export”的文件夹（在某处了解此内容），我使用第一个名称。在文件夹 sqlbuddy 文件夹中创建它

```
/../sqlbuddy/calvinlough-sqlbuddy-1b38cf4/exports/ 
```

在您的情况下，路径可能不同，但原理是相同的。

之后，您必须授予该文件夹 777 权限。

```
chmod -R 777 /../sqlbuddy/calvinlough-sqlbuddy-1b38cf4/exports/ 
```

OK完成。Sqlbuddy 现在会将您的 sql 库导出到文件中。这可能不是很安全，因此我建议您在每次导出后从服务器中删除 .sql 文件。希望它对你有帮助，因为它对我有帮助。

# actionscript-3 - 菜单 AS3 闪存中的共享后退按钮

> ID：14823460
> 
> 赞同：0
> 
> 时间：2013-02-12T00:23:12.227
> 
> 标签：actionscript-3, flash-cs5

嗨所以我正在制作一个主菜单，我遇到的问题是关于后退按钮。我使用相同的后退按钮来浏览主菜单的子菜单。

我需要知道如何在任何给定时间确定菜单的哪个子菜单处于打开状态，以便我可以将播放头更改为适当的标签，而不是一直返回到原始主菜单标签。

```
 var subMenu:DisplayObject = this.getChildByName("mc_subMultiplayer");
    if (Boolean(this.contains(subMenu))){
        this.gotoAndPlay(49);
    }
    else{
        MovieClip(parent).gotoAndPlay("goBack");
    } 
```

我已经尝试过这种变化无济于事：c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:30:19.323

我认为您需要手动跟踪用户所在的菜单并做出相应的反应。您可以通过几种方式执行此操作，例如对要返回的父菜单的每个子菜单进行硬编码（不推荐）或保留用户按下的菜单按钮列表或堆栈以创建可以回溯的“轨迹”，或者可能只是跟踪一些菜单 ID（同样的想法，但跟踪菜单而不是按钮按下，这可能更清晰和直观）。

# audio - 寻找用于编辑音频文件的音频库

> ID：14823465
> 
> 赞同：0
> 
> 时间：2013-02-12T00:23:38.627
> 
> 标签：audio, editing, beat-detection

所以我一直在谷歌搜索和浏览堆栈溢出，并且找不到任何符合我的音频编辑库规范的东西。我不需要处理实时流，只需处理预先存在的文件。我正在寻找的关键内容：

*   BPM 检测（这似乎是最罕见的一种）
*   改变播放速度而不影响音高
*   将两个文件相加并保存为 mp3
*   改变音量

有人知道执行所有这些的库吗？我真的不在乎它使用什么语言，但 C/C++、C# 或 Java 可能是最好的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:05:47.093

据我所知，没有一个库可以完成所有这些工作，尽管[JUCE](http://rawmaterialsoftware.com/juce.php)或[BASS](http://www.un4seen.com/)可能已经添加了这些功能，所以除了我下面的建议之外，您还应该查看这些功能。

[Aubio](http://aubio.org/)可能是您进行 bpm 检测的最佳选择。用于独立修改音高和速度的最流行的开源库可能是[SoundTouch](http://www.surina.net/soundtouch/)，但如果您需要高质量的东西，您可能会想要获得商业许可。

最后两个要求是微不足道的。除了从文件中读取和写入音频数据之外，没有人提供库来执行这些类型的任务。为此，请查看[libsndfile](http://www.mega-nerd.com/libsndfile/)、[lame](http://lame.sourceforge.net/)和[ffmpeg](http://www.ffmpeg.org/)。

# string - 将 cmdlet 设置为变量而不立即调用它

> ID：14823466
> 
> 赞同：1
> 
> 时间：2013-02-12T00:23:39.667
> 
> 标签：string, variables, powershell

使用一些 cmdlet（例如 Write-Host、Read-Host）会发现这种情况。只是想知道如何绕过它。

例如，我有一个格式化的 Write-Host 字符串，我想将其设置为一个变量。但它会在定义变量后立即调用它。似乎避免它的唯一方法是创建一个函数，这似乎有点矫枉过正。

```
function Test-WriteHost
{
    $inFunction = Write-Host "I'm in a variable!" -BackgroundColor DarkBlue -ForegroundColor Cyan
}

$direct = Write-Host "So am I!" -BackgroundColor DarkBlue -ForegroundColor Cyan

So am I! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T02:37:19.167

你真的不需要一个函数。一个简单的脚本块就可以了：

```
$direct = {Write-Host "So am I!" -BackgroundColor DarkBlue -ForegroundColor Cyan} 
```

你可以调用脚本块：

```
&$direct 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:38:58.660

这里通常要做的事情是使用函数而不是变量。

```
function FormattedWriteHost([string]$message)
{
    Write-Host $message -BackgroundColor DarkBlue -ForegroundColor Cyan
} 
```

然后您可以在闲暇时调用此函数：

```
PS C:\> FormattedWriteHost "I'm in a function!"
I'm in a function! 
```

这并不过分。write-host 不会“返回”任何内容 - 它只是写入输出。您会注意到您的变量实际上是空的。

# objective-c - 通过ios sdk中的NSStream将一个设备发送到另一个设备时音频失真

> ID：14823468
> 
> 赞同：1
> 
> 时间：2013-02-12T00:23:50.610
> 
> 标签：objective-c, audiounit, avcapturesession, avassetwriter

您好，我正在尝试从一台设备录制音频/视频并使用 NSStream 发送到另一台设备，我已经创建了 avcapturesession 并生成了音频/视频数据。视频数据可以很好地发送到另一台设备并正确显示，但音频数据非常扭曲，就像非常机器人和跳跃一样。我从 cmsamplebufferref 获得了 audiobufferlist，并将您重新发送的 2048 字节数据发送到另一台设备

```
 CMBlockBufferRef blockBuffer;
            CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &currentInputAudioBufferList, sizeof(currentInputAudioBufferList), NULL, NULL, 0, &blockBuffer);

      if( captureOutput == _captureAudioOutput ){

            for (int y = 0; y < currentInputAudioBufferList.mNumberBuffers; y++) {
                AudioBuffer audioBuffer = currentInputAudioBufferList.mBuffers[y];
                Float32 *frame = (Float32*)audioBuffer.mData;

                [audiodata appendBytes:frame length:audioBuffer.mDataByteSize];

            }

    [self sendMIxedData:audioData]; // for sending audiodata

}

else {

////// sample buffer to image to NSData

  [self sendMIxedData:audioData:imageData];  // for sending images 

} 
```

另一方面，我再次将数据转换为音频缓冲区列表并使用 AudioUnit 服务进行播放。

```
static OSStatus playbackCallback(void *inRefCon,
                                 AudioUnitRenderActionFlags *ioActionFlags,
                                 const AudioTimeStamp *inTimeStamp,
                                 UInt32 inBusNumber,
                                 UInt32 inNumberFrames,
                                 AudioBufferList *ioData) {

for (int i=0; i < ioData->mNumberBuffers; i++) { 
    AudioBuffer buffer = ioData->mBuffers[0];

    UInt32 size = min(buffer.mDataByteSize, THIS->tempBuffer.mDataByteSize); 
    memcpy(buffer.mData, THIS->tempBuffer.mData, size);
    buffer.mDataByteSize = size; 

}

    return noErr;
} 
```

这里 tempbuffer 是我存储来自 NSInputStream 的传入音频数据的地方。问题是播放的音频非常失真和机械化。我已经在其他项目中测试了 audiounitservices，在该项目中我使用 AudioUnit 服务同时录制和播放音频，并且那里的音频非常清晰。但是通过流发送它就变成了。扭曲的。

此外，当我仅通过流发送音频数据时，它有点清晰，但是当我发送从 avcapturesession 委托接收的图像和音频数据时，音频非常失真。请帮帮我。我做错了什么？我也可以同时而不是在不同时间发送音频/视频数据并在另一边提取吗？

# php - 如何以正确的顺序压缩许多 javascript 文件？

> ID：14823469
> 
> 赞同：0
> 
> 时间：2013-02-12T00:23:55.473
> 
> 标签：php, symfony, twig, assetic

我需要从一个库中压缩很多文件。但其中一个必须先加载。所以我需要做这样的事情：

```
 {% javascripts
        '@MyBundleBundle/Resources/public/js/foo-file.js'
        '@MyBundleBundle/Resources/public/js/(everything except foo-file).js'
        output='js/all.js'
    %} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:50:54.010

尝试以下操作：

```
{% javascripts
    '@MyBundleBundle/Resources/public/js/foo-file.js'
    '@MyBundleBundle/Resources/public/js/*'
    output='js/all.js'
%} 
```

它将合并`@MyBundleBundle/Resources/public/js/`目录中的每个文件，作为`foo-file.js`第一个文件。

# java - Maven 程序集插件从目标下读取静态 HTML 文件的位置

> ID：14823472
> 
> 赞同：0
> 
> 时间：2013-02-12T00:23:58.830
> 
> 标签：java, maven, web-applications, maven-plugin, maven-plugin-development

我有一个项目，它的 pom.xml 有 maven 程序集插件依赖项。它在包装阶段运行。我开发了一个在包阶段之前运行的自定义 maven 插件。我有一个 Web 应用程序，它下面有 src/main/webapp 文件夹和 html 文件。我的maven组件配置如下：

```
 <id>bin</id>
<formats>
    <format>dir</format>
    <format>tar.gz</format>
</formats>

<includeBaseDirectory>false</includeBaseDirectory>

<fileSets>
    <fileSet>
        <directory>src/main/webapp</directory>
        <outputDirectory>${ret}/wwwroot/teo</outputDirectory>
        <includes>
            <include>**/*.*</include>
        </includes>
        <excludes>
            <exclude>**/.idea/**</exclude>
        </excludes>
    </fileSet>
    <fileSet>
        <directory>target/generated-sources</directory>
        <outputDirectory>${ret}/wwwroot/teo</outputDirectory>
        <includes>
            <include>**/*.html</include>
        </includes>
    </fileSet>
</fileSets> 
```

这不是我开发的项目，我不熟悉 maven 程序集插件。我刚刚将我的自定义插件集成到该项目中。但是我应该在目标文件夹下找到 maven 程序集插件读取文件的位置？我将使用我的自定义 maven 插件更改其中的一些 html 文件，而 maven 程序集插件将在其阶段发挥作用。

**目标文件夹下的html文件在哪里？**除了 Maven 程序集生成的文件夹之外似乎没有什么重要的，该插件是否删除了原始文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:05:55.150

`target/generated-sources`通常是 Maven 插件放置在构建过程中创建的源文件的位置。您的 pom 文件中可能还有一些其他插件将这些 HTML 文件放在那里。

# java - Java try-catch 不起作用

> ID：14823473
> 
> 赞同：0
> 
> 时间：2013-02-12T00:23:59.520
> 
> 标签：java, exception

想知道是否有人可以告诉我为什么我的 try-catch 不起作用。当我应该输入一个整数时，我输入了一个字符，并且程序只是异常退出。它与我在另一个程序中编写的 try-catch 相同。不知道为什么它不起作用。:(

```
import java.io.*;
import java.util.*;

public class Lab8FileIO {
    public static void main(String[] args) throws IOException {

    int menuChoice = 0;
    String filename, userInput, choice;
    boolean playAgain = true;
    char response;
    Scanner keyboard = new Scanner(System.in);

    while (playAgain)
    {
        // Display menu and get user selection
        displayMenu();

        do
        {
            try 
            {
                menuChoice = keyboard.nextInt();

                if ((menuChoice < 1) || (menuChoice > 4)) // Make sure user enters a number within the specified range
                    System.out.print("You must enter a number from 1 to 4!");
            } 

            catch (InputMismatchException e) 
            {
                System.out.print("You must enter a number from 1 to 4!");
                keyboard.nextInt();
            }
        } while (menuChoice < 1 && menuChoice > 4);

        // Get input/output filename from user
        System.out.print("\nEnter filename in the format filename.txt: ");
        filename = keyboard.next();

        switch (menuChoice)
        {
        // Write to file
        case 1:
            PrintWriter outputFile = new PrintWriter(filename);

            userInput = getUserInput(); 
            System.out.println("I am writing your input to filename: " + filename + "\n");
            outputFile.println(userInput);
            outputFile.close();
            break;

        // Read from file
        case 2:
            File file = new File(filename); 
            Scanner inputFile = new Scanner(file);

            System.out.println("I am reading from filename: " + filename + "\n");

            while (inputFile.hasNextLine())
            {
                String line = inputFile.nextLine();
                System.out.println(line);
            }
            inputFile.close();
            break;

        // Append to file   
        case 3:
            FileWriter appendFile = new FileWriter(filename, true);

            userInput = getUserInput(); 
            System.out.println("I am appending your input to filename: " + filename + "\n");
            appendFile.write(userInput);
            appendFile.close();         
            break;

        // Exit 
        case 4:
            System.out.println("Goodbye!");
            System.exit(0);
            break;              
        }

        // Ask user to play again
        do
        {
            System.out.print("\nWould you like to continue (Y/N)? ");
            choice = keyboard.next();
            response = Character.toUpperCase(choice.charAt(0));
        } while (response != 'Y' && response != 'N'); // Keep asking until user enters correct response

        if (response == 'Y') // Play again
        {
            playAgain = true;
            System.out.println();
        }

        else if (response == 'N') // Quit
        {
            playAgain = false;
            System.out.println("\nThanks for playing!");
        }
    } 
```

}

```
public static void displayMenu()
    {
        System.out.println("File IO Options:");
        System.out.println("1) Write");
        System.out.println("2) Read");
        System.out.println("3) Append");
        System.out.println("4) Quit");
        System.out.print("What would you like to do: ");
    }

    public static String getUserInput()
    {
        String str;
        Scanner keyboard = new Scanner(System.in);

        System.out.println("Start typing. Hit enter when you're done:");
        str = keyboard.nextLine();

        return str;
    }   
} 
```

这是我得到的错误：

文件 IO 选项：
1) 写入
2) 读取
3) 追加
4) 退出
您想做什么： a
您必须输入一个从 1 到 4 的数字！在 java.util 的线程“main”
java.util.InputMismatchException中出现异常
。 Scanner.throwFor(Scanner.java:840)
在 java.util.Scanner.next(Scanner.java:1461)
在 java.util.Scanner.nextInt(Scanner.java:2091)
在 java.util.Scanner.nextInt(Scanner .java:2050)
在 Lab8FileIO.main(Lab8FileIO.java:41)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T00:28:22.017

您的程序失败，因为在您的`catch`块中，您有`keyboard.nextInt();`一个新的未处理`InputMismatchException`

```
catch (InputMismatchException e) 
 {
   System.out.print("You must enter a number from 1 to 4!");
   // You can remove this line, since it will be called anyways in the next loop iteration
   //keyboard.nextInt();

   // You can artificially set menuChoice = 1; for example for the loop to continue
 } 
```

# python - quickfix 发送时间（字段 52）下降毫秒

> ID：14823474
> 
> 赞同：2
> 
> 时间：2013-02-12T00:24:06.243
> 
> 标签：python, python-2.7, timestamp, quickfix, timestamping

我正在使用 Python API 运行 QuickFix，并使用 FIX4.2 连接到 TT FIX 适配器

我已成功登录并发送市场数据请求。回复很好。在我的消息日志（屏幕日志和文件日志）中，我得到了一个 SendingTime（字段 52），看起来像这样：

52=20130207-02:38:32.212

但是，当我尝试获取此字段并将其打印到终端或文件时，除了删除毫秒之外，一切都是一样的。所以结果总是：

52=20130207-02:38:32

显然这很糟糕。我想不出为什么一开始会出现毫秒，然后在我访问它们时会被丢弃。

也许这是 Python 的产物，它使用 '.' 访问属性。特点？但这似乎很愚蠢，因为 SendingTime 是一个字符串，最后我检查了字符串中允许使用句点。

任何帮助都会很棒，我真的很希望能够将准确的时间戳打印到文件中。

谢谢，

麋鹿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:41:47.200

尝试使用 FieldMap 的`const std::string & getField (int field)`函数提取字段。这会将您的字段作为字符串获取，而无需尝试将其转换为日期类型。我打赌这将保留毫秒，至少在文本上。

抱歉，我不知道为什么 Python 会丢失 ms。我只是对 Python 包装器知之甚少。

**编辑：**不，不是正确的答案。我不知道您没有从标题中提取该字段。（当然，您仍然可以在标题上使用此功能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:29:56.363

我通过指定 getField 函数来查看标题解决了我的问题。所以：

`sendingTime= quickfix.SendingTime()`

`print sendingTime, "\n"`

`message.getHeader().getField(sendingTime)`

`print sendingTime, "\n"`

第一个打印的行将是发送时间，以毫秒为单位（我不知道为什么），它看起来像*52=20130207-02:38:32*

第二个打印行实际上查看*标题*（字段 52 所在的位置）并获取整个字段，它看起来像：

*52=20130207-02:38:32.212*

这解释了为什么当我尝试`message.getField(sendingTime)`时收到**Field not Found**错误。

# c++ - 有没有办法锁定除了一个通过 Qt 之外的所有形式？

> ID：14823475
> 
> 赞同：0
> 
> 时间：2013-02-12T00:24:10.220
> 
> 标签：c++, forms, qt, user-interface, global

我的想法是制作一种登录表单。此 gui 必须是系统中唯一活动的。所以问题是，如何使用 Qt 框架（c++）做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:10:09.460

您可以在 Qt 窗口上调用 showFullScreen() 和 raise()，这将导致您的应用程序接管整个屏幕......但用户仍然可以 Alt-Tab 到另一个应用程序。我认为在 Qt 中您无能为力。您可能不得不下拉并使用某种操作系统级别的 API 来防止这种情况。

# sql - SQL - 计算列中出现的次数

> ID：14823476
> 
> 赞同：3
> 
> 时间：2013-02-12T00:24:13.740
> 
> 标签：sql, sql-server, sql-server-2008

我有一张如下表：

我想计算 PageURL 列中说“ab”和“cd”的出现次数。

```
ID  User  Activity  PageURL  Date
 1  Me    act1      abcd     2013-01-01
 2  Me    act2      cdab     2013-01-02
 3  You   act2      xyza     2013-02-02
 4  Me    act3      xyab     2013-01-03 
```

我想要 2 列...1 用于“ab”计数，1 用于“cd”计数。

在上面的示例中，“ab”的计数为 3，“cd”的计数为 2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T00:27:50.660

就像是：

```
select 
   CountAB = sum(case when PageURL like '%ab%' then 1 else 0 end),
   CountCD = sum(case when PageURL like '%cd%' then 1 else 0 end)
from
  MyTable
where
   PageURL like '%ab%' or
   PageURL like '%cd%' 
```

假设“ab”和“cd”每行只需要计算一次，这是可行的。此外，它可能不是很有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T00:26:27.007

```
select
  (select count(*) as AB_Count from MyTable where PageURL like '%ab%') as AB_Count,
  (select count(*) as CD_Count from MyTable where PageURL like '%cd%') as CD_Count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:37:04.590

```
SELECT total1, total2 
    FROM (SELECT count(*) as total1 FROM table WHERE PageUrl LIKE '%ab%') tmp1,
         (SELECT count(*) as total2 FROM table WHERE PageUrl LIKE '%cd%') tmp2 
```

# gnuplot - 如何计算 Gnuplot 输入文件中的索引数

> ID：14823477
> 
> 赞同：3
> 
> 时间：2013-02-12T00:24:24.993
> 
> 标签：gnuplot

所以我想从一个数据文件中绘制，该文件具有不确定数量的 x 和 y 数据字段（未知但长度恒定）。我想将它们全部绘制在一张图上，但颜色不同。

在不指定索引的情况下，它们都以相同的颜色绘制在一起。

在索引上使用 for 循环或单独编写索引确实将它们用不同的颜色绘制在一起，但程序将不知道要循环多少个索引。

为 for 循环的最大值设置一个非常高的数字是可行的，但是当它用完数据时会发出错误消息。

有什么方法可以操纵 gnuplot 中的数据以得出 for 循环的索引数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T04:48:10.810

如果你有 gnuplot >= 4.6.0，你可以使用`stats`命令：

```
#!/usr/bin/env gnuplot

reset

datafile = 'data.dat'

set terminal png size 600,400
set output 'test.png'

stats datafile

plot for [i=1:STATS_blocks] datafile index (i-1) pt 7 ps 2 title 'record '.i 
```

如果您的数据看起来像这样（用两个空行分隔数据块）

```
1 1

2 2

3 3

4 2

0 3 
```

该脚本将制作这个情节：

![在此处输入图像描述](../Images/2b29798327f614fde5e70e259e19dd3d.png)

这同样适用于具有多个 (x,y) 对的数据块。

# git - Git 多开发人员多分支

> ID：14823479
> 
> 赞同：0
> 
> 时间：2013-02-12T00:24:36.240
> 
> 标签：git, branch

我们已经使用 git 几个月了，每个项目只有一名开发人员在工作。这很棒，我得到了主题分支的概念，发布分支合并和推拉到远程服务器。

但是，当我们有多个开发人员在同一个存储库上工作时，我会感到非常困惑。我有错误消息表明我真的不知道自己在做什么......

那么我要达到什么目标？主要开发人员正在开发存储库或系统 A。他创建了一个“版本 2.0_Alpha”分支，他在本地工作并定期推送到我们的 git 服务器。master 是当前发布的版本。我想帮助他并做一个特定的功能。我基于远程分支“2.0_Alpha”创建了一个本地分支“Feature_15”。我做我的工作，我提交到本地存储库，我的同事继续在他的本地存储库上工作，但也推送到服务器。

当我将更改推送到服务器时，我希望我可以推送我的“Feature_15”。然后我的同事可以继续处理他的代码，当他准备好检查已经完成的事情时，如果一切正常，回到他的分支'Version 2.0_Alpha'并合并到我的'Feature_15'中。

但这不起作用，因为 git 决定让我第一次提取最新的 'Version 2.0_Alpha'，然后我迷失在我的知识和理解中。

有人可以让我知道我是否走在正确的思路上，但只是错过了一些步骤，还是我走错了路。

我们正在使用功能有限的 git-gui，但在需要时很乐意使用 gitExt 或 Git-batch。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:58:43.397

您可能创建了一个跟踪远程分支（版本 2.0_Alpha）的本地分支（Feature_15），而您需要创建一个新的单独分支。如果这是真的，那么您正在尝试将本地分支推送到远程“版本 2.0_Alpha”分支，而不是创建远程“Feature_15”分支，这是错误的，对您不起作用。请参阅[如何停止在 Git 中跟踪远程分支？](https://stackoverflow.com/questions/3046436/how-do-you-stop-tracking-a-remote-branch-in-git)解决这个问题（请注意，您不需要删除本地分支，只需删除跟踪）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:00:42.897

你所说的一切听起来都很好而且正确（至少对我来说）。

如果您遇到一些错误，也许您可​​以准确显示您遇到的错误。

您还可以做几件事，检查提交文件时所在的分支（它将显示在`git status`输出中）。检查提交历史，或者使用一些 GUI 工具（我在 Linux 上使用 gitk，但还有[很多其他](http://git-scm.com/downloads/guis)工具）或通过命令行：

```
git log --graph --pretty=oneline --abbrev-commit --decorate=full --all 
```

您可以将最后的 --all 替换为您想要查看的分支列表，例如：

```
git log --graph --pretty=oneline --abbrev-commit --decorate=full origin/Version 2.0_Alpha origin/Feature_15 
```

使用 git 唯一需要处理的事情是，当您需要将更改推送到自上次拉取后有人已经推送过某些内容的分支时，但只要您和您的同事在不同的分支上工作，这应该不是问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T00:56:41.343

你这样开始

```
A--B--C  Version 2.0_Alpha
       \
        X--Y--Z  Feature_15 
```

然后他做出改变

```
A--B--C--D--E--F
       \
        X--Y--Z 
```

您需要将您的更改重新建立在他的基础上`HEAD`，以便他可以做一个干净的`merge`

```
 A--B--C--D--E--F
                 \
                  X'--Y'--Z' 
```

[**参考**](http://github.com/dchelimsky/rspec/wiki/topic-branches)

# sse - SSE向量化与内存对齐的关系

> ID：14823482
> 
> 赞同：5
> 
> 时间：2013-02-12T00:25:04.633
> 
> 标签：sse, simd

为什么我们需要为 SSE/AVX 对齐内存？

我经常得到的答案之一是对齐的内存负载比未对齐的内存负载快得多。那么，为什么这种对齐的内存加载比未对齐的内存加载要快得多？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T00:32:25.070

这不仅特定于 SSE（甚至 x86）。在大多数架构上，加载和存储需要自然对齐，否则它们要么 (a) 生成异常，要么 (b) 需要两个或更多周期加上一些修复，以便透明地处理未对齐的加载/存储。在 x86 上，(b) 适用于 < 16 字节的数据类型，但 (a) 适用于 SSE 数据类型，除非您明确使用可处理未对齐数据的加载/存储指令的未对齐版本。

您可能想知道：为什么不直接使用这些 SSE 加载/存储指令的未对齐版本而不管对齐方式？答案是这些指令通常比对齐的指令慢得多，因为它们通常按照上述 (b) 的方式运行，这使得它们通常慢 2 倍或更多，除了最近的 Intel CPU，如 Core i7，其惩罚要小得多，但并非无足轻重。

# nuget - 是否可以同时使用本地 NuGet 存储库和远程存储库

> ID：14823487
> 
> 赞同：12
> 
> 时间：2013-02-12T00:25:15.363
> 
> 标签：nuget

我一直在将我们的库项目转换为 NuGet 包并将它们托管在内部 NuGet 源上。这非常有效，并且减少了开发人员重新创建辅助类和“重新发明轮子”的情况。另一个巨大的好处是其他团队现在可以使用我们项目中“已发布”的库。到目前为止，基本上这是一场巨大的胜利。

我们面临的唯一问题是本地构建。我们想做的是在将构建推送到 NuGet 提要之前，在我们的消费项目中测试库。我们遇到了一个问题，因为使用这些库的项目设置为使用本地提要（构建服务器上的包还原允许我们的主干线使用最新的“发布”库构建）。

有没有办法从本地存储库中获取本地构建？我已经开始为创建本地包文件的库执行构建后任务。使用 NuGet.config 我想我应该能够屏蔽某些存储库，然后屏蔽构建服务器上的配置文件。我的理论是，当使用本地构建时，应该选择本地存储库并在构建服务器上使用提要。

这可能吗？还有其他人记录了如何执行此操作吗？

这是我用于创建本地包的构建后任务：

```
 <PropertyGroup>
    <PackOutputDir>$([System.IO.Path]::Combine($(SolutionDir), "..\Prerelease"))</PackOutputDir>
    <BuildSpecCommand>$(NuGetCommand) spec $(ProjectFileName) -force -NonInteractive -Verbosity detailed</BuildSpecCommand>
    <PackCommand>$(NuGetCommand) pack $(ProjectFileName) -OutputDirectory "$(PackOutputDir)"</PackCommand>
  </PropertyGroup>
  <Target Name="AfterBuild" Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <Exec Command="$(BuildSpecCommand)" LogStandardErrorAsError="true" Condition=" '$(OS)' == 'Windows_NT' " />
    <Exec Command="$(PackCommand)" LogStandardErrorAsError="true" Condition=" '$(OS)' == 'Windows_NT' " />
  </Target> 
```

我将此 NuGet.config 放在我们团队项目的根目录中。此文件隐藏在构建服务器上：

```
<configuration>
  <packageSources>
    <add key="NuGet official package source" value="https://nuget.org/api/v2/" />
    <add key="TestSource" value="Source\Prerelease" />
  </packageSources>
  <disabledPackageSources>
    <add key="LocalNuGetFeed" value="LocalNuGetFeed" />
  </disabledPackageSources>
  <activePackageSource>
    <add key="All" value="(Aggregate source)"  />
  </activePackageSource>
</configuration> 
```

这是我放置在一个文件夹中的 NuGet.config，它应该在构建服务器的层次结构中被拾取：

```
<configuration>
  <packageSources>
    <add key="NuGet official package source" value="https://nuget.org/api/v2/" />
    <add key="LocalNuGetFeed" value="http://team2:12345/nuget" />
  </packageSources>
  <disabledPackageSources>
  </disabledPackageSources>
  <activePackageSource>
    <add key="All" value="(Aggregate source)"  />
  </activePackageSource>
</configuration> 
```

**更新** 根据提供的答案，我更改了 nuget.targets 文件。理想情况下，我不想这样做，但如果这是实现我想要完成的目标的最佳方式，那么我可以接受这种类型的编辑。

```
 <ItemGroup Condition=" '$(PackageSources)' == '' And '$Configuration' == 'Release'">
    <PackageSource Include="https://nuget.org/api/v2/" />
    <PackageSource Include="http://team2:12345/nuget/" />
  </ItemGroup>
  <ItemGroup Condition=" '$(PackageSources)' == '' And '$Configuration' != 'Release'">
    <PackageSource Include="https://nuget.org/api/v2/" />
    <PackageSource Include="C:\temp\NuGet\Prerelease" />
  </ItemGroup> 
```

这里的想法是使用之前发布的库项目的构建任务，以便将它们的包输出到磁盘上的临时文件夹。上面的代码应该在那些项目的 nuget.targets 文件中，当开发人员在他们的本地机器上工作时，我们需要立即对库更新进行任何更改，但是构建服务器只会在期间与我们的本地提要对话团队建设过程。

它是否正确？

*另一个想法......* 在与同事讨论后，我们想出了另一个在实践中可能更有效的解决方案。我们决定在 AvalonDock 项目上对其进行建模。当您下载源代码并打开该项目的解决方案时，您不仅会看到构建 UI 控件的代码，还会看到一个使用所述控件的所有功能的示例项目。

他的想法是，在我们的库项目中，代码只是 C# 库，单元测试应该足够有效以涵盖任何问题。推送这些库的构建也是封闭的，这意味着只有在构建（和测试）完成时才应用签入。

对于 UI 控件，他指出了上述 AvalonDock 的示例。包括一个利用所有控制的项目应该可以缓解大多数问题。由于对 UI 控件的单元测试是有限的，因此开发人员仍然有责任在提交代码和开始构建过程之前检查测试项目中的控件。

这种方法的普遍看法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T07:33:36.203

您绝对可以一次使用多个存储库。这里的重要部分是您需要定义您希望它们使用的顺序。还原/安装包时，NuGet 将首先查找第一个存储库，如果未找到，它将扫描第二个存储库，依此类推。

如果您需要本地存储库优先于“已发布”存储库，则需要**确保本地存储库是列表中的第一个**。

乍一看，您的方法看起来不错，尽管您也可以使用`.nuget\NuGet.targets`NuGet 包还原随附的文件来寻求 MSBuild 解决方案（无需这些配置修改）。通过将它们添加到元素中来定义您的提要`<PackageSources>`，然后（可能基于构建配置调试 | 发布）您可以切换要在`<RestoreCommand>`.

# c++ - 从 CHtmlView 调用 javascript 或设置元素焦点

> ID：14823488
> 
> 赞同：0
> 
> 时间：2013-02-12T00:25:15.757
> 
> 标签：c++, mfc, visual-c++-6

我有一个 CHtmlView 实例，它总是会加载一个已知页面。页面上有一个编辑框元素，我希望能够以编程方式将键盘焦点设置为元素以响应串行事件。不幸的是，我一直在使用 Visual Studio 6，并且发现文档难以阅读。

我可以获得视图的 IHTMLDocument2 接口，但不能获得 IHTMLDocument3。我正在寻找的是有关如何从 CHtmlView 端调用 javascript 或将窗口中的焦点设置为特定元素的一些指导。

如果有人知道任何例子，他们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:28:21.813

我认为这篇[好文章](http://www.codeguru.com/cpp/i-n/internet/browsercontrol/article.php/c6175/Creating-an-Internet-Explorer-Helper-Class.htm)应该是你的起点。有一个如何填写表格的例子

# vba - 修订：将 7 层 If Then 语句转换为 VBA

> ID：14823491
> 
> 赞同：-1
> 
> 时间：2013-02-12T00:25:27.330
> 
> 标签：vba, excel

非常感谢您的所有反馈。我能够获得一些咨询帮助，以弄清楚如何以更易读的格式编写 launguge。我的公式仍然无法正常工作。

这是我的 VBA 代码：

```
'ENVIRONMENTAL - RIDER BERKLEY SURETY GROUP PREMIUM
    Range("EnviroBerkley_Grand_Total").Select
         '->>>>>>>>>>> InsertRows ---- >>>>>>>>>>>>>
          iRow = ActiveCell.Row
          getRows = 7
          nRows = getRows
          i = iRow - 1 'first row for insertion
          Rows(i & ":" & i + nRows - 1).Insert
         '<<<<<<<<END Insert Rows----------<<<<<<<<<<
    Range("EnviroBerkley_Grand_Total").Select
    ActiveCell.Offset(-15, 0).Rows("1:7").EntireRow.Select
    Selection.Copy
    ActiveCell.Offset(7, 0).Range("A1").Select
    ActiveSheet.Paste
    ActiveCell.Select
    Application.CutCopyMode = False
    ActiveCell.FormulaR1C1 = "Rider"
    ActiveCell.Offset(1, 0).Range("A1").Select
    Range("EnviroBerkley_Grand_Total").Select
    ActiveCell.Offset(-7, 2).Range("A1").Select

'FIRST 100,000 (100)
ActiveCell.FormulaR1C1 = _
    "=IF(EnviroCalculate_Premium_Using_Bond_Amount=""Y"",IF(R[-1]C[-2]<>""Original"",(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))-((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2,0))," & _
    "(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,(Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)*R11C2,100))),IF(ActiveCell.Offset(R[-1]C[-2])<>""Original"",(IF((((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000," & _
    "(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))-((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2,0)),(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)*R11C2,100))))"
ActiveCell.Offset(1, 0).Range("A1").Select

'NEXT 400,000 (400)
ActiveCell.FormulaR1C1 = _
    "=IF(EnviroCalculate_Premium_Using_Bond_Amount=""Y"",IF(R[-2]C[-2]<>""Original"",(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>500000,0,(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))" & _
    "-(Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2))),(IF((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C)*R11C2)<100000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>500000,400,((((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)" & _
    "-1000)*R11C2))))),IF(R[-2]C[-2]<>""Original"",(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>500000,0,(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))" & _
    "-(Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2))),(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>500000,400," & _
    "(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)-1000)*R11C2))))))"
ActiveCell.Offset(1, 0).Range("A1").Select

'NEXT 2,000,000 (2000)
ActiveCell.FormulaR1C1 = _
    "=IF(EnviroCalculate_Premium_Using_Bond_Amount=""Y"",IF(ActiveCell.Offset(R[-3]C[-2])<>""Original"",(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<500000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>2000000,0," & _
    "(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))-(Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2))),(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<500000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>500000,2000," & _
    "(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)-5000)*R11C2))))),IF(R[-3]C[-2]<>""Original"",(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<500000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>2000000,0," & _
    "((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))-(Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2))),(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>500000,2000," & _
    "((((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)-1000)*R11C2))))))"
ActiveCell.Offset(1, 0).Range("A1").Select

'NEXT 2,500,000 (2500)
ActiveCell.FormulaR1C1 = _
    "=IF(EnviroCalculate_Premium_Using_Bond_Amount=""Y"",IF(R[-4]C[-2]<>""Original"",(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<2000000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>5000000,0,(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))" & _
    "-(Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2))),(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<2000000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>5000000,2500,((((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)-20000)*R11C2)))))," & _
    "IF(R[-4]C[-2]<>""Original"",(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<2000000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>2500000,0,(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))-(Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-3]C))" & _
    "/1000)*R11C2))),(IF((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>2500000,2500,((((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)-1000)*R11C2))))))"
ActiveCell.Offset(1, 0).Range("A1").Select

'NEXT 2,500,000 (2500)
ActiveCell.FormulaR1C1 = _
    "=IF(EnviroCalculate_Premium_Using_Bond_Amount=""Y"",IF(ActiveCell.Offset(R[-5]C[-2])<>""Original"",(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<5000000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>7500000,0,(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))" & _
    "-(Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2))),(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<5000000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>7500000,2500,((((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C)/1000))-50000)*R11C2)))))," & _
    "IF(R[-5]C[-2]<>""Original"",(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<5000000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>7500000,0,((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))-(Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-3]C))/1000)*R11C2)))," & _
    "(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<100000,0,IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>5000000,2500,((((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))/1000)-1000)*R11C2))))))"
ActiveCell.Offset(1, 0).Range("A1").Select

'OVER 7,500,000 (7500)
ActiveCell.FormulaR1C1 = _
    "=IF(EnviroCalculate_Premium_Using_Bond_Amount=""Y"",IF(R[-6]C[-2]<>""Original"",(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<7500000,0,IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>7500000,(((Range(EnviroBondAmountGrandTotal)..ActiveCell.Offset(R[-2]C))" & _
    "-(Range(EnviroBondAmountGrandTotal)..ActiveCell.Offset(R[-3]C))-*R11C2)/1000),(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))-(EnviroBondAmountGrandTotal.ActiveCell.Offset(R[-3]C))*R11C2)/1000)))),(IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<7500000,0," & _
    "IF(((Range(EnviroBondAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>7500000,((((Range(EnviroBondAmountGrandTotal).Select.ActiveCell.Offset(R[-2]C))*R11C2)-7500000)/1000))))),IF(R[-6]C[-2]<>""Original"",(IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)<7500000,0," & _
    "IF(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)>7500000,(((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))-(Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-3]C))*R11C2)/1000),(((Range(EnviroContractAmountGrandTotal).Select.ActiveCell.Offset(R[-2]C))-(Range(EnviroContractAmountGrandTotal).Select.ActiveCell.Offset(R[-3]C))" & _
    "*R11C2)/1000)))),IF(((Range(EnviroContractAmountGrandTotal).Select.ActiveCell.Offset(R[-2]C))*R11C2)<7500000,0,IF(((Range(EnviroContractAmountGrandTotal).Select.ActiveCell.Offset(R[-2]C))*R11C2)>7500000,((((Range(EnviroContractAmountGrandTotal).ActiveCell.Offset(R[-2]C))*R11C2)-7500000)/1000)))))"
ActiveCell.Offset(1, 0).Range("A1").Select 
```

我也尝试过写成 IF 语句：

```
 'ENVIRONMENTAL - RIDER BERKLEY SURETY GROUP PREMIUM
    Range("EnviroBerkley_Grand_Total").Select
         '->>>>>>>>>>> InsertRows ---- >>>>>>>>>>>>>
          iRow = ActiveCell.Row
          getRows = 7
          nRows = getRows
          i = iRow - 1 'first row for insertion
          Rows(i & ":" & i + nRows - 1).Insert
         '<<<<<<<<END Insert Rows----------<<<<<<<<<<
    Range("EnviroBerkley_Grand_Total").Select
    ActiveCell.Offset(-15, 0).Rows("1:7").EntireRow.Select
    Selection.Copy
    ActiveCell.Offset(7, 0).Range("A1").Select
    ActiveSheet.Paste
    ActiveCell.Select
    Application.CutCopyMode = False
    ActiveCell.FormulaR1C1 = "Rider"

ActiveCell.Offset(1, 0).Range("A1").Select
Range("EnviroBerkley_Grand_Total").Select
ActiveCell.Offset(-7, 2).Range("A1").Select

 'FIRST 100,000 (100)
ActiveCell.Select
    If EnviroCalculate_Premium_Using_Bond_Amount = "Y" Then
        If ActiveCell.Offset.Range(-1, -2) <> "Original" Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then ActiveCell = 0
                If ((Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) - Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then
                ElseIf (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) / 1000) * R11C2 Then ActiveCell = 100
        If (ActiveCell.Offset(-1, -2)) <> "Original" Then
            If (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then
                If (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) - Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-3, 0) / 1000) * R11C2 Then ActiveCell = 0
            If (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then
                ElseIf (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) / 1000) * R11C2 Then ActiveCell = 100
    End If
    End If
    End If
    End If
    End If
    End If
    End If
ActiveCell.Offset(1, 0).Range("A1").Select

'NEXT 400,000 (400)
ActiveCell.Select
    If EnviroCalculate_Premium_Using_Bond_Amount = "Y" Then
        If ActiveCell.Offset(-2, -2) <> "Original" Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 500000 Then ActiveCell = 0
                ElseIf ((Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) - Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 500000 Then ActiveCell = 400
                ElseIf (((Range("EnviroBondAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
        If ActiveCell.Offsett(-2, -2) <> "Original" Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 500000 Then ActiveCell = 0
                ElseIf (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) - (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 100000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 500000 Then ActiveCell = 400
                ElseIf (((Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
    End If
    End If
    End If
ActiveCell.Offset(1, 0).Range("A1").Select

'NEXT 2,000,000 (2000)
ActiveCell.Select
    If EnviroCalculate_Premium_Using_Bond_Amount = "Y" Then
        If ActiveCell.Offset(-3, -2) <> "Original" Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 500000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 2000000 Then ActiveCell = 0
                ElseIf ((Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) - Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 500000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 2000000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroBondAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
        If ActiveCell.Offsett(-3, -2) <> "Original" Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 500000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 2000000 Then ActiveCell = 0
                ElseIf (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) - (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 500000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 2000000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
    End If
    End If
    End If
ActiveCell.Offset(1, 0).Range("A1").Select
'NEXT 2,500,000 (2500)
ActiveCell.Select
    If EnviroCalculate_Premium_Using_Bond_Amount = "Y" Then
        If ActiveCell.Offset(-3, -2) <> "Original" Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 2000000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 5000000 Then ActiveCell = 0
                ElseIf ((Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) - Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 2000000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 5000000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroBondAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
        If ActiveCell.Offsett(-3, -2) <> "Original" Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 2000000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 5000000 Then ActiveCell = 0
                ElseIf (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) - (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 2000000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 5000000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
    End If
    End If
    End If
ActiveCell.Offset(1, 0).Range("A1").Select
'NEXT 2,500,000 (2500)
ActiveCell.Select
    If EnviroCalculate_Premium_Using_Bond_Amount = "Y" Then
        If ActiveCell.Offset(-3, -2) <> "Original" Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 5000000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 7500000 Then ActiveCell = 0
                ElseIf ((Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) - Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 5000000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 7500000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroBondAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
        If ActiveCell.Offsett(-3, -2) <> "Original" Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 5000000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 7500000 Then ActiveCell = 0
                ElseIf (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) - (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 5000000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 7500000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
    End If
    End If
    End If
ActiveCell.Offset(1, 0).Range("A1").Select

'OVER 7,500,000 (7500)
ActiveCell.Select
    If EnviroCalculate_Premium_Using_Bond_Amount = "Y" Then
        If ActiveCell.Offset(-3, -2) <> "Original" Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 7500000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 7500000 Then ActiveCell = 0
                ElseIf ((Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) - Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) < 2000000 Then ActiveCell = 0
                If (Range("EnviroBondAmountGrandTotal").Select.ActiveCell.Offset(-2, 0) * R11C2) > 5000000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroBondAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
        If ActiveCell.Offsett(-3, -2) <> "Original" Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 7500000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 7500000 Then ActiveCell = 0
                ElseIf (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) - (Range("EnviroContractAmountGrandTotal").Select.ActiveCell.Offset(-3, 0)) / 1000) * R11C2 Then
            If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) < 7500000 Then ActiveCell = 0
                If (Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) * R11C2) > 7500000 Then ActiveCell = 2000
                ElseIf (((Range("EnviroContractAmountGrandTotal").ActiveCell.Offset(-2, 0) / 1000) - 1000) * R11C2) Then
    End If
    End If
    End If
ActiveCell.Offset(1, 0).Range("A1").Select 
```

无论我做什么，我都无法在活动单元格中返回值。从前一行复制的任何公式都保留下来，我似乎无法正确获取公式。

帮助！！！！请！！！！

这是我写的第一个宏。我正在尝试自学，但遇到了一个又一个的障碍。

干杯，金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:34:59.447

工作代码：

```
Dim rngCalculateBy As Range
Dim rngContractGrandTotal As Range
Dim rngBondGrandTotal As Range
Dim rngBerkleyGrandTotal As Range
Dim rngWorkTimeCal As Range
Dim rngContractInThousand As Range
Dim rngEnviroCalculate_Premium_Using_Bond_Amount As Range
Dim lngMultiplier As Long
Dim blnCalcUsingBond As Boolean, blnOrig As Boolean

'SETS THE CALCULATIONS
Set rngContractGrandTotal = Range("EnviroContractAmountGrandTotal")
Set rngBondGrandTotal = Range("EnviroBondAmountGrandTotal")
Set rngBerkleyGrandTotal = Range("EnviroBerkley_Grand_Total")
Set rngWorkTimeCal = Range("EnviroWorkTimeCalculation")
Set rngContractInThousand = Range("EnviroContractAmountInThousands")
Set rngMultiplier = Range("EnviroClientPercofParticipation")
Set rngEnviroCalculate_Premium_Using_Bond_Amount = Range("EnviroCalculate_Premium_Using_Bond_Amount")
'BOOLEAN - CALCULATE USING BOND AMOUNT IFEnviroCalculate_Premium_Using_Bond_Amount = "Y"
If Range("EnviroCalculate_Premium_Using_Bond_Amount").Value = "Y" Then
blnCalcUsingBond = True
Else
blnCalcUsingBond = False 'This sets to False as default
End If

'BOOLEAN - CALCULATE USING ORGINAL FORMULAS OR RIDER FORMULAS
blnOrig = False
If Range("EnviroBerkley_Grand_Total").Offset(-8, 0).Value = "Original" Then
blnOrig = True
End If

'IF STATEMENT - SETS THE RANGE TO CALCULATE OFF EITHER BOND AMOUNT OR CONTRACT AMOUNT
If blnCalcUsingBond = True Then
    Set rngCalculateBy = rngBondGrandTotal
Else
    Set rngCalculateBy = rngContractGrandTotal
End If

Dim lngDifference As Long
Dim lngDifference2 As Long
Dim lngResult As Long
Dim lngResult2 As Long

'SETS THE CALCULATIONS
    lngResult = rngCalculateBy.Offset(-2, 0).Value
    lngResult2 = rngCalculateBy.Offset(-3, 0).Value 'SETS lngResult2
    lngDifference = lngResult * rngMultiplier
    lngDifference2 = ((lngResult - lngResult2) / 1000)

'CELL 1 - FIRST 100,000 (100)
Range("EnviroContractAmountInThousands").Select
ActiveCell.Offset(-7, 0).Range("A1").Select
If blnCalcUsingBond = True And blnOrig = False Then
    ElseIf lngDifference > 100000 Then ActiveCell = 0
       Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
If blnCalcUsingBond = False And blnOrig = False Then
    ElseIf lngDifference > 100000 Then ActiveCell = 0
       Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
ActiveCell.Offset(1, 0).Range("A1").Select
'CELL 2 - NEXT 400,000 (400)
If blnCalcUsingBond = True And blnOrig = False Then
        ElseIf lngDifference < 100000 Then ActiveCell = 0
        ElseIf lngDifference > 500000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
If blnCalcUsingBond = False And blnOrig = False Then
        ElseIf lngDifference < 100000 And lngDifference > 500000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
ActiveCell.Offset(1, 0).Range("A1").Select
'CELL 3 - NEXT 2,000,000 (2000)
If blnCalcUsingBond = True And blnOrig = False Then
        ElseIf lngDifference < 500000 Then ActiveCell = 0
        ElseIf lngDifference > 2000000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
If blnCalcUsingBond = False And blnOrig = False Then
        ElseIf lngDifference < 500000 Then ActiveCell = 0
        ElseIf lngDifference > 2000000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
ActiveCell.Offset(1, 0).Range("A1").Select
'CELL 4 - NEXT 2,500,000 (2500)
If blnCalcUsingBond = True And blnOrig = False Then
        ElseIf lngDifference < 2000000 Then ActiveCell = 0
        ElseIf lngDifference > 5000000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
If blnCalcUsingBond = False And blnOrig = False Then
        ElseIf lngDifference < 2000000 Then ActiveCell = 0
        ElseIf lngDifference > 5000000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
ActiveCell.Offset(1, 0).Range("A1").Select
'CELL 5 - NEXT 2,500,000 (2500)
If blnCalcUsingBond = True And blnOrig = False Then
        ElseIf lngDifference < 5000000 Then ActiveCell = 0
        ElseIf lngDifference > 7500000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
If blnCalcUsingBond = False And blnOrig = False Then
        ElseIf lngDifference < 5000000 Then ActiveCell = 0
        ElseIf lngDifference > 7500000 Then ActiveCell = 0
                Else: ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
ActiveCell.Offset(1, 0).Range("A1").Select
'CELL 6 - OVER 7,500,000 (7500)
If blnCalcUsingBond = True And blnOrig = False Then
        ElseIf lngDifference < 7500000 Then ActiveCell = 0
        ElseIf lngDifference > 7500000 Then ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
If blnCalcUsingBond = False And blnOrig = False Then
        ElseIf lngDifference < 7500000 Then ActiveCell = 0
        ElseIf lngDifference > 7500000 Then ActiveCell.Formula = lngDifference2 * rngMultiplier
End If
ActiveCell.Offset(1, 0).Range("A1").Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:00:07.373

这应该让你开始。您不需要选择/使用 ActiveCell。从示例中您所做的计算并不是特别清楚 - 您需要修改 Select 语句并添加更多变量：

```
Sub Test()

Dim iRow As Integer, getrows As Integer
Dim rngGrandTotal As Range, rngCalculateBy As Range
Dim lngMultiplier As Long
Dim lngBondResult As Long, lngResult2 As Long
Dim blnCalcUsingBond As Boolean, blnOrig As Boolean

'###Set range "EnviroBerkley_Grand_Total" to a variable and use a with statement to simplify:
Set rngGrandTotal = Range("EnviroBerkley_Grand_Total")
 'ENVIRONMENTAL - RIDER BERKLEY SURETY GROUP PREMIUM
    With rngGrandTotal
        '->>>>>>>>>>> InsertRows ---- >>>>>>>>>>>>>
        iRow = .Row
        getrows = 7
        i = iRow - 1 'first row for insertion
        Rows(i & ":" & i + getrows - 1).Insert
        '<<<<<<<<END Insert Rows----------<<<<<<<<<<
        Offset(-15, 0).Rows("1:7").EntireRow.Copy
        .Offset(7, 0).Range("A1").Select
        ActiveSheet.Paste
        Application.CutCopyMode = False
        .Value = "Rider"
        .Offset(-7, 2).Range("A1").Select
    End With

'###Set Multiplier  to R11C2
Set lngMultiplier = Cells(11, 2).Value

'###Set boolean value = I guess if you don't calculate using bond, you calculate using contract?
blnCalcUsingBond = False 'Set to False as default
If EnviroCalculate_Premium_Using_Bond_Amount = "Y" Then blnCalcUsingBond = True

'###See if 'Original' - not sure where you're using this
If rngGrandTotal.Offset(-1, -2).Value = "Original" Then blnOrig = True

'###Set whichever range you're calculating by to a range variable
If blnCalcUsingBond = True Then
    Set rngCalculateBy = Range("EnviroBondAmountGrandTotal")
Else
    Set rngCalculateBy = Range("EnviroContractAmountGrandTotal")
End If

    '###Calculate lngResult (which is rngCalculateBy.Offset(-2,0) * R11C2)
    lngResult = rngCalculateBy.Offset(-2, 0).Value * lngMultiplier
    '###Calculate lngResult2 (which is rngCalculateBy.Offset(-3,0) * R11C2)
    lngResult2 = rngCalculateBy.Offset(-3, 0).Value * lngMultiplier

    '###You now have the 2 numbers that you're calculating with.
    'Looks like you now need to do more calculations (I can't work out what they are from your example)
    'Define more long variables at the top of the Sub and calculate now e.g.
        'Dim lngDifference as Long
        'lngDifference = ((lngresult - lngResult2) / 1000) * lngMultiplier
    '###When all calculations are done, use a select statement to go through the results and set rngGrandTotal to a value
    Select Case lngResult
        Case Is < 100000
            rngGrandTotal.Value = "100"
        Case 100000 To 399999
            rngGrandTotal.Value = "400"
        Case 400000 To 1999999
            rngGrandTotal.Value = "2000"
        '###Etc... you can do Case is >= 7500000
        '###You can also nest If statements in the Case statements if needed
    End Select

End Sub 
```

# .net - Windows 桌面应用程序的现代 UI 的正确方法是什么？

> ID：14823493
> 
> 赞同：8
> 
> 时间：2013-02-12T00:25:43.040
> 
> 标签：.net, visual-studio-2010, winapi, user-interface, mfc

我有一个具有广泛 C++ 模型的现有应用程序，我想将它连接到一个漂亮的现代 Windows 7 或 8 UI。我们应用程序的当前（古老）UI 是在早期的 Windows XP / 95/98 时代使用纯 Win32 API 开发的。我们的代码目前正在通过 Visual Studio 2010 编译/链接。

Windows 上似乎有很多不同的开发 API“标准”：Win32、MFC、ATL、COM 和 .NET。在过去的 14 年里，我的工程师几乎一直在拖微软的路线：在 2001 年，它是“MFC 已死——我们必须迁移到 ATL”（我们没有）。然后“.NET 将替换 MFC”（它似乎没有）。

所以现在我们准备好转储旧的 UI 代码。使用一组可靠且高效的标准会很好，而且我们可以快速创建 UI。撇开 QT 不谈（我在 stackoverflow 上阅读了很多争论不休的优点和缺点）：

1) Windows 7 和 8 的现代 UI 开发方法是使用 MFC 还是 .NET？

2) 对于 .NET 方法（假设有充分的理由选择 .NET），我们可以将我们的 C++ 模型代码 UNMANAGED 与 .NET 应用程序一起使用吗？

3) 是否必须在 Visual Studio 2012 中进行开发，即使我们的应用最初不是为 Metro 外观设计的？

4) 是否有任何其他 Microsoft 工具包应考虑用于桌面应用程序开发？

斯蒂芬

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T10:42:12.810

看看我在 2011 年给出的[这个](https://stackoverflow.com/a/7430571/11449)答案。我认为它今天仍然有效；考虑到最近从微软转向 C​​++，也许更是如此。我不确定 MFC 中有多少对 win8 的额外支持，但如果您没有完全切换到 Metro（我想您不会；如果您有“产品”，则需要支持较旧的 Windows至少，什么，5年？），这并不重要。

我还没有看到一个感觉像 C++ 一样“可靠”的 .Net/WPF 应用程序（是的，我意识到这些在技术上是正交的，但实际上，谁用 C++ 构建了 .Net UI？）。我理解人们为什么要离开 MFC；这并不是说我不了解它的消极面。IMO，归根结底是：您对快速发展的重视程度如何？对于某些应用程序（业务线、寿命短的产品），上市时间和做出改变的速度比“扎实”地设计更重要。对于其他（专业工具、系统软件）而言，创建具有良好用户体验的可靠软件更为重要。我还没有看到在更“现代”的框架中执行此操作的生产软件（而不是“技术演示”）；MFC（或者我应该说' win api 通过 C++' 使用，但 MFC 在这方面有足够的优势让积极因素胜过消极因素）应用程序（仍然）（通常）是最好的工具。国际海事组织。

最后要考虑的一件事是您的开发人员。如果他们已经为 MFC 编程 15 年，那么他们可能会将自己的职业生涯编程到一个角落。如果你坚持继续使用 MFC，你可能会疏远他们。您必须权衡其中的业务风险与技术考虑因素（我从您的问题中得到您是企业主的问题）。如果您希望私下进行，请随时与我联系以进行后续讨论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T00:33:22.810

1.  您可以采用任何一种方法。但是，.NET 在用户界面设计中更为常见，如果您需要灵活的用户界面，它具有许多优势（在更快的开发方面）。

2.  是的。C++/CLI 可以很好地将本机代码与 .NET 用户界面联系起来。

3.  不，您可以在 VS2010 中执行此操作。话虽如此，VS 2012 确实有很多优势，尤其是在使用 C++ 时。升级可能是有益的。

4.  我会看看[WPF](http://msdn.microsoft.com/en-us/library/ms754130.aspx)。新的 Windows 8 用户界面可能很有趣，但可能难以与您以前的代码库一起使用。此外，它不适用于较旧的操作系统。根据我的经验，WPF 是最好的，目前正在改进的选项（.NET 4.5 中有许多改进），它支持将现有代码库与新的用户界面技术混合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T09:03:58.000

一个非常容易说的解决方案是将整个 C++ 代码移植到 .NET 的 C# 或 C++/CLI，然后将其与 WPF 接口。这可能很复杂，但是，您可以享受完全在 .NET 中轻松编码的乐趣（最好使用 3.5 SP1 和 Visual Studio 2010）。

您还可以将现有代码连接到 .NET，以通过 COM Interop 使用 WPF。COM Interop 本质上将 .NET 组件注册为系统中的 COM 组件。当它被调用时，CLR 执行代码执行和编组以供您的程序调用（更多信息 - msdn.microsoft.com/en-us/library/zsfww439(v=vs.80).aspx）。

最后一种方法是转储 MFC 并直接调用 Windows (Win32) API。Windows API 比其他方法更容易在您的代码中使用。在现代 Windows API 中，GDI+（图形设备接口）在 DirectX（DWM 和 DXGI）之上实现，可以通过 COM 轻松扩展，是 WPF 和现代 UI 的一种可行的替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T18:22:15.477

没有人应该创建基于 MFC 和 Win32 的新项目。Windows 现代 UI 和统一 API 是未来。我不认为 .Net 是每个应用程序的答案，尤其是对于具有大量 C++ 本机代码的项目。我们知道微软正在开发统一的 API。我希望这是这个问题的答案。

# java - 下面的 JAVA 代码会遇到什么同步问题？

> ID：14823494
> 
> 赞同：2
> 
> 时间：2013-02-12T00:25:47.750
> 
> 标签：java, synchronization, thread-safety

[该页面](http://www.cafeaulait.org/course/week11/22.html)的作者提到，下面的第二个代码示例存在同步问题，但该代码在 100 次中可以运行大约 99 次。我无法看到该页面中两个程序的操作差异。

* * *

结合前两者的更通用的解决方案是将字段的值复制到局部变量中，然后仅更改局部变量。该字段在方法内保持不变。例如，

```
public class Counter {

  int count = 0;

  public void count() {
    int count = this.count;
    int limit = count + 100;
    while (count++ != limit) System.out.println(count); 
  }

} 
```

请注意局部变量 count 如何隐藏字段计数，以及 this 关键字如何用于引用阴影之外的字段计数。

当方法完成后不需要将更改的变量保存回字段时，此技巧主要有用。以下保存了状态，但仍然存在不太明显的同步问题。

```
public class Counter {

  private int count = 0;

  public void count() {
    int count = this.count;
    int limit = count + 100;
    while (count++ != limit) System.out.println(count);
    this.count = count; 
  }

} 
```

事实上，这可能比原来的例子更糟糕，因为它会在 100 次中工作 99 次。如果你没有在源代码中发现它，这里的错误很难确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:30:21.023

问题在于修改 to`this.count`不是原子的。

假设有两个线程正在调用此函数，并且`this.count`当前设置为`0`.

线程 1 加载`0`到其本地`count`，然后开始将其递增到`101`（不像`100`以前认为的那样，因为它`count`在达到限制后再递增一次，使用`count++ != limit`）。

与此同时，线程 2 进入并*仍然*`this.count`设置为，因此它抓住它并开始递增到.*`0``101`*

 *在某个时刻，它们都到达了这条线`this.count = count`（顺序无关紧要），它们*都*设置`this.count`为 101。

最后*应该*设置的是`202`（我认为 - 当然它应该在某个地方的`200`标记附近）。

代码的第一位有效的原因是因为它实际上并没有尝试更改`this.count`值，因此不可能出现竞争条件。*

# php - WAMP 在回显 dirname(__FILE__) 时显示绝对路径

> ID：14823495
> 
> 赞同：0
> 
> 时间：2013-02-12T00:25:49.983
> 
> 标签：php, apache, path

我这样做了：

```
echo dirname(____FILE____) 
```

它一直显示为完整的绝对路径

```
C:/Program Files (x86)/VertrigoServ/www/dir/file.php 
```

这是为什么？我希望它显示

```
dir/file.php 
```

我正在使用 WAMP，它是 Windows 上的 Apache。

顺便说一句，调用`$_SERVER['DOCUMENT_ROOT']`做同样的事情 - 它显示完整路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:34:19.617

尝试：

```
$webPath = str_replace($_SERVER['DOCUMENT_ROOT'], '', str_replace('\\', '/', __FILE__)); 
```

它将采用文件的绝对路径并删除它的文档根部分，这应该为您留下来自文档根的路径和文件绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T09:51:37.727

尽管您没有说明，但如果您使用的是 wordpress，我通过以下方式解决了这个问题：

```
file(bloginfo('home_url').'<path-to-file-without-leading-slash>') 
```

# python - Urllib2 没有读取页面上的所有 html

> ID：14823499
> 
> 赞同：0
> 
> 时间：2013-02-12T00:26:09.657
> 
> 标签：python, urllib2

我正在尝试简单地撤销页面的 html（它是一个工作的东西，所以很遗憾我无法提供链接），但是只返回了 html 的一部分。此站点上的其他页面似乎按预期工作。

我知道 urllib2 不处理 javascript（[urllib2 不返回完整网页](https://stackoverflow.com/questions/9516933/urllib2-not-returning-full-webpage)），但是当我在 Firefox 浏览器中禁用 javascript 时，页面会正确加载。

然后我在这篇文章中尝试了@Jed Smith 和@John Weldon 的答案（[urllib2 not retrieving entire HTTP response](https://stackoverflow.com/questions/1824069/urllib2-not-retrieving-entire-http-response)），但没有成功。我确实使用`urllib2.build_opener(proxy, urllib2.HTTPCookieProcessor(self.cj)).open(url)`而不是`urllib2.urlopen(url)`代理和 cookie，不确定这是否有所作为。

返回的 html 似乎在源代码的第 803 行被随机截断，总共有 1634 行。

有没有办法获取所有的html代码？

# html - 找出元素是哪个nth-child

> ID：14823500
> 
> 赞同：4
> 
> 时间：2013-02-12T00:26:10.430
> 
> 标签：html, css, css-selectors

我正在为电子商务商店编辑静态框架的 CSS。我不能编辑很多，但我一直在使用 nth-child 来定位 CSS 中的某些元素。问题是很多动态生成的 div、表和 span 没有类或 ID 选择器。该框架是建立在表格上的，所以有很多这样的 CSS 选择器：

```
.sample_CSS_class table:nth-child(5) table 
```

这是 div 下的第五个表中包含的具有“sample_CSS_class”类的表的目标。不过，这可能需要很多时间。我必须进入 Google Chrome Inspector（或 Firebug）并展开源代码，然后从那里倒计时。有这么多代码，我可能会犯错误，而且只需要一段时间。

我想知道是否有人知道使用 Firebug 或 Google Chrome Inspector（或任何其他可用的工具）之类的元素的第 n 个子编号的有效方法。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T00:30:44.870

在 Chrome 中，您可以使用*Copy XPath*上下文菜单项来执行此操作：

![XPath 的东西](../Images/91ded781004b3dc07431e20a4113c028.png)

它会给你一个 XPath 选择器，如下所示：

```
//*[@id="sidebar"]/div[4]/div/div[13] 
```

`div[13]`就像`div:nth-child(13)`。*如果 Chrome 有一个Copy CSS*选项，那就太好了，但由于某种原因它没有。也许有人会进行扩展。

# asp.net-mvc - MVC 中的自动完成

> ID：14823501
> 
> 赞同：0
> 
> 时间：2013-02-12T00:26:12.103
> 
> 标签：asp.net-mvc, autocomplete

我想做一个自动完成的文本框。但它会有点不同。让我解释..

我的 util 类中有一个静态方法。我从那里填充组合框..比如

这里是cs代码

```
public class MyUtil
{
   public static List<ProfessionList> GetProfessionList()
    {
       var liste= EntityHelper.GetProfessionList(false); 
        var profList = new List<ProfessionList>();

        foreach (KeyValuePair<int, string> profession in liste)
profList.Add(new ProfessionList(){
                                  Profession = profession.Value,
                                  ProfessionID = profession.Key
                                  });
        }               
        return profList;
    }
} 
```

公共类 ProfessionList { public int ProfessionID { get; 放; } 公共字符串专业 { 得到；放; } }

和 html 方面

```
@Html.DropDownList("cmbProfessions", new SelectList(MyUtil.GetProfessionList(),
"ProfessionID", "Profession")) 
```

所以它工作得很好。我想使用相同的方法在文本框中自动完成。我不想使用任何 ajax 函数或类似的..

我的cs代码在这里

```
 public static List<SpecificTagList> GetSpecificTagList()
    {

        var list = EntityHelper.GetSpecificTagList();
        var tagList = new List<SpecificTagList>();
        foreach (string s in list)
        tagList.Add(new SpecificTagList(){SpecificTag = s});

        return tagList;

    }

public class SpecificTagList
{
public string SpecificTag { get; set;}    
} 
```

并在 html

```
 @Html.TextBox("txtSpecific", new { autocomplete = new
 SelectList(MyUtil.GetSpecificTagList(), "SpecificTag", "SpecificTag") }) 
```

我知道那行不通。因为 TextBox(name, value) 需要一些值.. 那么我如何在没有任何 ajax 函数的情况下获得该列表..？

ps：我的 util 类不是从控制器派生的.. 只是一个类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:18:40.533

我用乔纳森先生的方式解决了我的问题。谢谢你。

```
<script type="text/javascript">

$(function () {

    var specifiList=[];
    $('#hiddenspecif').find('option').each(function () {

        specifiList.push($(this).val());
    });

    $('#c2').autocomplete({
        source: specifiList
    }
    );

});   
</script>

@Html.TextBox("c2");

@Html.DropDownList("hiddenspecif",
new SelectList(MyUtil.GetSpecificTagList(),"SpecificTag","SpecificTag"),
new {style="display:none"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:36:37.140

我假设您在某个地方涉及到一些您刚刚决定不提及的客户端代码——您将需要一些。HTML 不支持自动完成。

如果您不想使用 AJAX，则使用列表填充隐藏控件并在 JavaScript 中实现某种自动完成功能

# java - 使用 spring security 找不到 AuthenticationProvider

> ID：14823504
> 
> 赞同：1
> 
> 时间：2013-02-12T00:26:44.773
> 
> 标签：java, spring, maven, spring-security, jersey

我一直在尝试使用他们的 x509 证书通过 LDAP 对用户进行身份验证，但似乎无法使其正常工作。我声明了一个身份验证提供程序，但我仍然收到一个错误，提示没有提供程序。

这是我调试的输出：

```
INFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 1 of 8 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG: o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
DEBUG: o.s.s.w.c.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: null. A new one will be created.
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 2 of 8 in additional filter chain; firing Filter: 'customX509AuthenticationFilter'
DEBUG: m.d.CustomX509AuthenticationFilter - Checking secure context token: null
DEBUG: m.d.CustomX509AuthenticationFilter - X.509 client authentication certificate: [removed to save space]
DEBUG: m.d.CustomX509PrincipalExtractor - Subject DN is 'CN=Last.First.M.1234567890, OU=GROUP1, O=ORG, C=US'
DEBUG: m.d.CustomX509PrincipalExtractor - Extracted Principal name is '1234567890'
DEBUG: m.d.CustomX509AuthenticationFilter - X.509 client authentication certificate: [removed to save space]
DEBUG: m.d.CustomX509AuthenticationFilter - preAuthenticatedPrincipal = 1234567890, trying to authenticate
DEBUG: m.d.CustomX509AuthenticationFilter - Cleared security context due to exception
org.springframework.security.authentication.ProviderNotFoundException: No AuthenticationProvider found for org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationToken
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:196) ~[spring-security-core-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doAuthenticate(AbstractPreAuthenticatedProcessingFilter.java:115) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:85) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:6.0.29]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.29]
    at com.thetransactioncompany.cors.CORSFilter.doFilter(CORSFilter.java:205) [cors-filter-1.3.2.jar:na]
    at com.thetransactioncompany.cors.CORSFilter.doFilter(CORSFilter.java:266) [cors-filter-1.3.2.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:6.0.29]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.29]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) [catalina.jar:6.0.29]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [catalina.jar:6.0.29]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [catalina.jar:6.0.29]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [catalina.jar:6.0.29]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [catalina.jar:6.0.29]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) [catalina.jar:6.0.29]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857) [tomcat-coyote.jar:6.0.29]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) [tomcat-coyote.jar:6.0.29]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) [tomcat-coyote.jar:6.0.29]
    at java.lang.Thread.run(Thread.java:679) [na:1.6.0_22]
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 3 of 8 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 4 of 8 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 5 of 8 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
DEBUG: o.s.s.w.a.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 6 of 8 in additional filter chain; firing Filter: 'SessionManagementFilter'
DEBUG: o.s.s.w.s.SessionManagementFilter - Requested session ID E34E30E0411B02EFA37B41BCBA282041 is invalid.
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 7 of 8 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
DEBUG: o.s.security.web.FilterChainProxy - /x509 at position 8 of 8 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
DEBUG: o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /x509; Attributes: [hasRole('user')]
DEBUG: o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
DEBUG: o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@6b207925, returned: -1
DEBUG: o.s.s.w.a.ExceptionTranslationFilter - Access is denied (user is anonymous); redirecting to authentication entry point
org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83) ~[spring-security-core-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ...

DEBUG: o.s.s.w.s.HttpSessionRequestCache - DefaultSavedRequest added to Session: DefaultSavedRequest[https://192.168.56.67/cert/x509]
DEBUG: o.s.s.w.a.ExceptionTranslationFilter - Calling Authentication entry point.
DEBUG: o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
DEBUG: o.s.s.w.c.HttpSessionSecurityContextRepository - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
DEBUG: o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed 
```

这是我的spring-security.xml：

```
<http entry-point-ref="http403" use-expressions="true">
    <intercept-url pattern="/**" access="hasRole('user')" />
    <custom-filter position="PRE_AUTH_FILTER" ref="x509Filter" />
</http>

<global-method-security secured-annotations="enabled" />

<authentication-manager alias="authManager">
    <authentication-provider ref="daoAuthenticationProvider" />
</authentication-manager>

<beans:bean id="http403" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint" />

<beans:bean id="x509Filter" class="CustomX509AuthenticationFilter">
    <beans:property name="authenticationManager" ref="authManager" />
    <beans:property name="principalExtractor">
        <beans:bean class="CustomX509PrincipalExtractor" />
    </beans:property>
</beans:bean>

<beans:bean id="daoAuthenticationProvider" class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <beans:constructor-arg>
        <beans:ref bean="authenticator" />
    </beans:constructor-arg>
    <beans:constructor-arg>
        <beans:ref local="populator" />
    </beans:constructor-arg>
    <beans:property name="hideUserNotFoundExceptions" value="false" />
</beans:bean>

<beans:bean id="authenticator" class="org.springframework.security.ldap.authentication.BindAuthenticator">
    <beans:constructor-arg>
      <beans:ref local="contextSource" />
    </beans:constructor-arg>
    <beans:property name="userSearch">
      <beans:ref local="userSearch" />
    </beans:property>
 </beans:bean>

<beans:bean id="contextSource" class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
    <beans:constructor-arg value="ldap://localhost:389/dc=my,dc=domain" />
    <beans:property name="userDn" value="cn=manager,dc=my,dc=domain" />
    <beans:property name="password" value="password" />
</beans:bean>

<beans:bean id="populator" class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
    <beans:constructor-arg index="0">
        <beans:ref local="contextSource" />
    </beans:constructor-arg>
    <beans:constructor-arg index="1" value="ou=roles" />
    <beans:property name="groupRoleAttribute" value="cn" />
    <beans:property name="groupSearchFilter" value="(member={0})" />
    <beans:property name="rolePrefix" value="none" />
    <beans:property name="convertToUpperCase" value="false" />
    <beans:property name="searchSubtree" value="false" />
</beans:bean>

<beans:bean id="userSearch" class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
    <beans:constructor-arg index="0" value="ou=people" />
    <beans:constructor-arg index="1" value="(uid={0})" />
    <beans:constructor-arg index="2">
        <beans:ref local="contextSource" />
    </beans:constructor-arg>
</beans:bean>

<beans:bean id="userDetailsService" class="org.springframework.security.ldap.userdetails.LdapUserDetailsService">
    <beans:constructor-arg>
        <beans:ref local="userSearch" />
    </beans:constructor-arg>
    <beans:constructor-arg>
        <beans:ref local="populator" />
    </beans:constructor-arg>
</beans:bean> 
```

我无法弄清楚为什么会抛出错误，并且已经做了很多研究试图找到问题的根源。任何帮助将不胜感激。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T08:50:34.983

在技​​术层面上，问题在于您的身份验证过滤器与您的身份验证提供程序不兼容：您`CustomX509AuthenticationFilter`创建了一个`PreAuthenticatedAuthenticationToken`，并将其发送到配置`LdapAuthenticationProvider`为进行处理，但该提供程序仅支持`UsernamePasswordAuthenticationToken`s。

您也许可以通过`CustomX509AuthenticationFilter`创建一个来解决这个问题`UsernamePasswordAuthenticationToken`，但我猜这里似乎存在一些概念问题。

如果客户端提供了有效的 x509 证书，您不应该只信任它而无需进一步的 LDAP 身份验证吗？即使您想要这个额外的步骤，您从哪里获得 LDAP 绑定操作的密码？你是从证书中提取出来的吗？如果是这样，这不会为您提供任何额外的安全性，因为如果有人拥有证书，无论是否使用 LDAP，他们都将获得身份验证。

**詹姆斯发表评论后更新：**

似乎您从 LDAP 需要的只是证书标识的用户的角色信息，在这种情况下，您不需要针对 LDAP 对其进行身份验证。您只需使用已在`contextSource`. 尝试以下操作：

1.  把你包裹`LdapUserDetailsService`在一个`UserDetailsByNameServiceWrapper`
2.  而不是`LdapAuthenticationProvider`configure a`PreAuthenticatedAuthenticationProvider`将能够处理`PreAuthenticatedAuthenticationToken`您发出的`CustomX509AuthenticationFilter`.
3.  将包裹好的`LdapUserDetailsService`注入`PreAuthenticatedAuthenticationProvider`。

这将确保使用 LDAP 提供的所有信息填充 Authentication 对象。然后后续过滤器可以根据用户授予的权限（在 LDAP 中定义的组成员身份）对请求进行授权。

# android - 视图方法，当视图元素第一次显示在屏幕上时调用？

> ID：14823507
> 
> 赞同：0
> 
> 时间：2013-02-12T00:27:04.057
> 
> 标签：android

我需要从 View 的方法中得到正确的坐标。getLocationOnScreen (locationOnScreen)。但是在 View.onCreate() 方法中创建了视图。我可以通过什么方法获得视图相对于 Activity 的正确位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T02:07:21.603

```
final ViewTreeObserver vto = myView.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    public void onGlobalLayout() {
        // ...
        vto.removeGlobalOnLayoutListener(this);
    }
} 
```

来自：[我如何在我的活动中测量所有视图的时刻？](https://stackoverflow.com/questions/9150454/how-do-i-hook-a-moment-when-all-views-are-measured-in-my-activity)

# asp.net-web-api - WebApi 调用中的转义字符

> ID：14823509
> 
> 赞同：0
> 
> 时间：2013-02-12T00:27:21.527
> 
> 标签：asp.net-web-api

我有一个非常奇怪的问题，因为我无法发布任何带有句点的文本。这是我的 ajax 调用的网址：

```
url = 'BIReports/SaveReport/' + reportDescription; 
```

如果 reportDescrption 中有句点，则不会发布。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:50:50.363

如[Phil Haack 的博客](http://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx)中所述，您可能想尝试设置`relaxedUrlToFileSystemMapping`为`true`.

```
<configuration>
  <system.web>
    <httpRuntime relaxedUrlToFileSystemMapping="true"/>

    <!-- ... your other settings ... -->
  </system.web>
</configuration> 
```

# java - 使用递归打印倒数然后向上的对称整数序列

> ID：14823511
> 
> 赞同：0
> 
> 时间：2013-02-12T00:27:37.483
> 
> 标签：java, recursion, sequence

我刚开始通过阅读一本书并完成练习来自学java。书中的一个练习是让我编写一个使用递归打印对称整数序列的方法。例如：

```
writeSequence(1); //prints 1 
writeSequence(2); //prints 1 1
writeSequence(3); //prints 2 1 2
writeSequence(4); //prints 2 1 1 2
writeSequence(5); //prints 3 2 1 2 3
writeSequence(6); //prints 3 2 1 1 2 3 
```

到目前为止，我的解决方案使用了两种方法实现，看起来不是很优雅：

```
public class Client {

    public static void main(String[] args) {
            writeSequence(1);
            writeSequence(2);
            writeSequence(3);
            writeSequence(4);
            writeSequence(5);
            writeSequence(6);
    }

    public static void writeSequence(int num) {

        writeSequence( (int) Math.round(num/2.0), "desc", true);
        if (num % 2 == 0) {
            writeSequence( (int) Math.round(num/2.0), "asc", true);
        } else {
            writeSequence( (int) Math.round(num/2.0), "asc", false);
        }
    }

    public static void writeSequence(int num, String direction, Boolean show_one) {
        if (num < 1) {
            throw new IllegalArgumentException("less than 1");
        } else if (num == 1) {
            if (show_one) {
                System.out.print(1 + " ");
            }
        } else {
            if (direction.equals("desc")) {
                System.out.print(num + " ");
                writeSequence(num-1, direction, show_one);
            } else {
                writeSequence(num-1, direction, show_one);
                System.out.print(num + " ");
            }
        }
    }

} 
```

我的问题是：如何仅使用必须采用 ONE 参数的 ONE 方法来解决此问题？现在，我正在实现两种方法，但我只想实现一种来解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:35:25.977

我可能正在阅读与您相同的书，而我发现了这一点。我无法用一种方法做到这一点，但我想我还是会发布代码以显示不同的方式。

```
public static void writeSequence(int n) {

    int num = (int)Math.round(n / 2.0);
    String flag = "";
    if (n % 2 == 0) {
        flag = "even";
    } else {
        flag = "odd";
    }
    System.out.println(writeSequence(num, flag));
}

private static String writeSequence(int n, String flag) {
    if (n < 1) {
        throw new IllegalArgumentException("less than one");
    } else if (n == 1 && flag.equals("odd")) {
        return "1";
    } else if (n == 1 && flag.equals("even")) {
        return "1 1";
    } else { 
        return n + " " + writeSequence(n - 1, flag) + " " + n;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:31:38.970

这是关于如何只编写一个带有一个参数的递归方法的提示。

在递归方法中的递归调用之前和之后打印您的号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T05:22:36.773

我知道这是一篇旧帖子，但我刚刚在 praticeit 上解决了这个问题，这是我的解决方案

```
public void writeSequence(int n) {
    if (n < 1) throw new IllegalArgumentException();
    if (n==1) System.out.print(1);
    else if (n==2) System.out.print("1 1");
    else {
        System.out.print((n+1)/2+ " ");
        writeSequence(n-2);
        System.out.print(" "+(n+1)/2);
    }
} 
```

# xslt - XSLT：获取月份缩写

> ID：14823513
> 
> 赞同：1
> 
> 时间：2013-02-12T00:27:42.187
> 
> 标签：xslt, xslt-1.0

我有一个代表日期的字符串，格式如下

2010-12-03 =“yyyy-mm-dd”

我想使用 XSLT 并找到一种方法来提取月份并获取其月份缩写。

转换后它应该显示为“ **DEC** ”，因为 12 月是第 12 个月。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T03:07:33.497

您可以将其添加到您的 XSLT：

```
<xsl:variable name="months" select="'  JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC'" /> 
```

然后在任何需要月份缩写的地方使用：

```
substring($months, substring(date, 6, 2) * 3, 3) 
```

where`date`将是对您的节点的引用，其中包含日期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T03:28:35.120

**这是一个简短的演示，如何智能高效地执行此操作：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:param name="pMonthNames">
  <name><short>JAN</short>January</name>
  <name><short>FEB</short>February</name>
  <name><short>MAR</short>March</name>
  <name><short>APR</short>April</name>
  <name><short>MAY</short>May</name>
  <name><short>JUN</short>June</name>
  <name><short>JUL</short>July</name>
  <name><short>AUG</short>August</name>
  <name><short>SEP</short>September</name>
  <name><short>OCT</short>October</name>
  <name><short>NOV</short>November</name>
  <name><short>DEC</short>December</name>
 </xsl:param>

 <xsl:variable name="vMonthNames" select=
     "document('')/*/xsl:param[@name='pMonthNames']/*"/>

 <xsl:template match="t">
     <xsl:value-of select="$vMonthNames[position()=substring(current(),6,2)]/short"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>2010-12-03</t> 
```

**产生了想要的正确结果：**

```
DEC 
```

# spring - Spring @Transactional 在包装方法上的使用

> ID：14823514
> 
> 赞同：0
> 
> 时间：2013-02-12T00:27:45.333
> 
> 标签：spring, hibernate, transactions, transactional

我需要将@Transactional 注释添加到第二种方法吗？我认为不是，但真的不确定。

```
@Transactional
public void addUser(User u) {
    u.setCreationDate(new Date());
    userDAO.addUser(u);
}

// should I add @Transactional annotation here?
public User addUser(String name, String surname) {
    User user = new User();
    user.setName(name);
    user.setSurname(surname);
    this.addUser(user);
    return user;
}

// DAO method
public void addUser(User u) {
    entityManager.persist(u);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T03:40:05.770

您需要将`@Transactional`注释添加到`public User addUser(String name, String surname)`方法中，否则该方法将以非事务方式执行。

`@Transactional`使用代理机制来实现事务支持，只有当你从第二个对象调用方法时才会调用它（即如果你在同一个类中调用一个方法，它不会经过代理系统，所以它总是使用调用者事务运行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:41:43.817

两者都是不同的方法，因为签名是不同的，因此需要添加 @Transactional 注释。如您所知，spring 正在处理代理对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:12:02.067

`@Transactional`如果您使用默认设置，则不需要注释包装器方法 。中的`PROPAGATION`设置`@Transactional`定义了事务范围。默认传播设置为`PROPAGATION_REQUIRED`.

有关详细信息，请参阅[此处](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-propagation)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T01:55:56.393

在您的情况下，它将产生类似的结果。不同之处在于，如果您将 @Transactional 放在上面，`public User addUser(String name, String surname)`您将在事务的上下文中创建一个新用户。如果你不这样做——事务只会在你的代码执行时开始`public void addUser(User u)`

# javascript - 有没有办法在 NetBeans 或其他 IDE 中为导入的 JavaScript 完成代码？

> ID：14823515
> 
> 赞同：2
> 
> 时间：2013-02-12T00:27:49.413
> 
> 标签：javascript, web-applications, netbeans, code-completion

我开始通过开发 webapp 来学习 java 脚本。我专门使用谷歌地图 API。来自 Java/C++/C# 桌面开发背景，我发现使用 Google 提供的导入代码进行编程非常令人沮丧，而无法使用代码完成“购买选项”。有什么办法可以在 Netbeans 或其他 IDE 中实现这一点（我愿意学习一个新的 IDE 来学习一门新语言）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:25:00.507

代码完成通常是编译语言的一个特性。在编译语言中，对象将具有哪些方法是预先确定的，因此 IDE 向您显示选项是非常可行的。

这在像 javacsript 这样的语言中要困难得多。考虑以下代码

```
a = {}
a.foo = function(){ console.log("test1");};
a.bar = function(){ console.log("test2");};
a.bar(); 
```

您将需要在该代码的每一行使用不同的自动完成功能，具体取决于已添加到 a.

您确实获得了解释语言的好处，而编译语言则没有，您可以拥有实时解释器。

如果您安装节点（或在浏览器中打开控制台），您可以有一个交互式提示，您可以在命令行中编写代码。在那种情况下，您确实会获得自动竞争，因为实际上有一个实时运行的软件实例。

这里有一个权衡。在编辑器中编写时记住函数名称并没有太多帮助，但是能够`"at,b".split(",");`在命令行中键入并立即查看结果也非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:31:09.060

Visual Studio 具有 javascript 自动完成功能（他们称其为“IntelliSense”），但您来自 C# 背景，所以我原以为您会知道这一点。

[http://msdn.microsoft.com/en-us/library/vstudio/bb385682.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb385682.aspx)

编辑：我不知道智能感知在 Visual Studio 2012 中的先进程度，但在早期版本中，您通常会使用 `vsdoc.js`包含您需要的所有信息的文件。例如，这是某人为 Google Maps API 3 制作的文件：http: [//gmapvsdoc.codeplex.com/releases/view/41099](http://gmapvsdoc.codeplex.com/releases/view/41099)

# flash - 以全屏方块显示

> ID：14823517
> 
> 赞同：0
> 
> 时间：2013-02-12T00:27:55.517
> 
> 标签：flash, flash-cs5, flash-cs4, flashdevelop

在 Flash AS3 中，我创建了 25 个带有事件的正方形（当您单击其中一个以全屏显示的正方形时）它在中间的正方形上工作（这很正常，因为它在中间）但对于另一个它超过了屏幕...我怎样才能将它们全部显示在同一个中间？

```
package  {
import flash.display.*;
import flash.events.*;
import gs.*;
import flash.text.TextField;

public class Fenetre extends MovieClip {
    var mc:MovieClip;
    var bol:Boolean;

    public function Fenetre(pX,pY,largeur) {
        mc = new MovieClip(); // Instanciation de l'objet MovieClip
        mc.x = pX; // Détermination de sa positon en X
        mc.y = pY; // Détermination de sa positon en Y
        addChild(mc); // Affichage de l'objet mc
        mc.graphics.beginFill(0xFFFFFF); 
        mc.graphics.lineStyle(.1,255);//épaisseur contour, couleur de contour
        mc.graphics.drawRect(-largeur/2,-largeur/2,largeur,largeur);

        mc.graphics.endFill();
        mc.scaleX = mc.scaleY = .166; //.5=0.5
        //
        mc.buttonMode = true;
        mc.addEventListener(MouseEvent.CLICK,onClique);
    }
    private function onClique(e:MouseEvent):void {
        bol=!bol;
        if(bol){
            TweenLite.to(mc,1,{scaleX:1,scaleY:1,onComplete:plein_ecran()});
        }
        else {
            TweenLite.to(mc,1,{scaleX:.166,scaleY:.166});
        }
    }
    private function plein_ecran(){
        var num:int=MovieClip(parent).numChildren-1;
        MovieClip(parent).setChildIndex(this,num);
    }
    private function decharger(){
        //trace("decharger");
    }
    public function createTextField(x:Number, y:Number, width:Number, height:Number, nbre:int):TextField {
        var result:TextField = new TextField();
        result.x = x;
        result.y = y;
        result.width = width;
        result.height = height;
        result.text = nbre.toString();
        addChild(result);
        return result;
    }
} 
```

}

我在主类中显示我的方块：

```
package  {
import flash.display.*;
import flash.text.TextFieldAutoSize;

[SWF(width=600,height=600)]
public class Main extends MovieClip {
    var fenetre:Fenetre;
    var xml:charge_xml;
    var milieuX,milieuY:int;
    var i,j,k,l,maxX,maxY:int;

    public function Main() {
        milieuX=milieuY=5;
        xml=new charge_xml();
        j=5;
        l=0;
        for(j=0;j<milieuY;j++) { // Gère les positions en X
            for(i=0; i<milieuX;i++) { // Gère les positions en Y et X - Remplissement des cases
                l++;
                fenetre = new Fenetre(100*i+100,100*j+100,600);
                fenetre.createTextField(100*i+100,100*j+100,20,20,l);
                addChild(fenetre);
            }
        }
    }
} 
```

}

对不起我的英语不好 ！我是法国人 ... ！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:05:31.647

快速解决您的问题的方法是在补间其 scaleX 和 scaleY 属性的同时将正方形补间到**中心位置**，然后在正方形变回小尺寸时返回其**原始位置。**您只需要对您的`Fenetre`班级进行一些小改动：

*   首先，在类变量中存储正方形的原始位置：

    ```
    public class Fenetre extends MovieClip {
      private var mc:MovieClip;
      private var bol:Boolean;
      private var x0:Number;
      private var y0:Number;

      public function Fenetre(pX:Number,pY:Number,largeur:uint) {

        x0 = pX;
        y0 = pY;
        //rest of your code is the same...

      } 
    ```

*   然后，在您的`Mouse.CLICK`听众身上，在中间位置和后面之间进行补间。我认为您需要在开始补间**之前**更改子索引，而不是`onComplete`：

    ```
    private function onClique(e:MouseEvent):void {
       bol=!bol;

       if(bol){
        plein_ecran();
        TweenLite.to(mc,1,{scaleX:1,scaleY:1,x: mc.width/2, y: mc.height/2});
       }
       else {
        TweenLite.to(mc,1,{scaleX:.166,scaleY:.166, x:x0, y:y0 });
       }
    } 
    ```

# android - matcher.match() 函数错误

> ID：14823518
> 
> 赞同：2
> 
> 时间：2013-02-12T00:28:01.877
> 
> 标签：android, opencv

我正在尝试使用 FAST FeatureDetector 来检测我的手机摄像头拍摄的视频的关键点。当我尝试运行 matcher.match(descriptor1,descriptor2,matches) 时，出现错误。

这是我的代码：

```
private Mat bgMat; //contains the first frame taken by the camera
private Mat fgMat; //contains the second frame
private MatOfKeyPoint keypoints1;
private MatOfKeyPoint keypoints2;
private Mat descriptor1;
private Mat descriptor2;

public void onCameraViewStarted(int width, int height) {
    Log.v("DEBUG","Width = " + width + ", height = " + height);
    mRgba = new Mat(height, width, CvType.CV_8UC4);
    bgMat = new Mat(height, width, CvType.CV_8UC4);
    fgMat = new Mat(height, width, CvType.CV_8UC4);
    mGrayMat = new Mat(height, width, CvType.CV_8UC1);
    descriptor1 =new Mat(height, width, CvType.CV_8U);  //I have changed the way to                                                  
descriptor2 =new Mat(height, width, CvType.CV_8U);  //initialize descriptor1 & 2
}

FeatureDetector FAST = FeatureDetector.create(FeatureDetector.FAST);

keypoints1 = new MatOfKeyPoint();
keypoints2 = new MatOfKeyPoint();
//descriptor1 =new Mat();
// descriptor2 =new Mat();
matches= new MatOfDMatch();

FAST.detect(bgMat, keypoints1);
FAST.detect(fgMat, keypoints2);
DescriptorExtractor Extractor = DescriptorExtractor.create(DescriptorExtractor.ORB);
Extractor.compute(bgMat, keypoints1, descriptor1);
Extractor.compute(fgMat, keypoints2,descriptor2);

DescriptorMatcher matcher =DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE);             
matcher.match(descriptor1,descriptor2, matches);
Features2d.drawMatches(bgMat, keypoints1, fgMat, keypoints2, matches, inputFrame); 
```

这是我的 logcat 输出：

```
02-11 13:00:25.926: E/cv::error()(16153): OpenCV Error: Assertion failed (type == src2.type() && src1.cols == src2.cols && (type == CV_32F || type == CV_8U)) in void cv::batchDistance(cv::InputArray, cv::InputArray, cv::OutputArray, int, cv::OutputArray, int, int, cv::InputArray, int, bool), file /home/oleg/sources/opencv/modules/core/src/stat.cpp, line 1803
02-11 13:00:25.926: W/dalvikvm(16153): threadid=11: thread exiting with uncaught exception (group=0x415eb2a0)
02-11 13:00:25.926: E/AndroidRuntime(16153): FATAL EXCEPTION: Thread-3281
02-11 13:00:25.926: E/AndroidRuntime(16153): CvException [org.opencv.core.CvException: /home/oleg/sources/opencv/modules/core/src/stat.cpp:1803: error: (-215) type == src2.type() && src1.cols == src2.cols && (type == CV_32F || type == CV_8U) in function void cv::batchDistance(cv::InputArray, cv::InputArray, cv::OutputArray, int, cv::OutputArray, int, int, cv::InputArray, int, bool)
02-11 13:00:25.926: E/AndroidRuntime(16153): ]
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.features2d.DescriptorMatcher.match_1(Native Method)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.features2d.DescriptorMatcher.match(DescriptorMatcher.java:437)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at com.example.cvcamt.MainActivity.onCameraFrame(MainActivity.java:152)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.android.CameraBridgeViewBase.deliverAndDrawFrame(CameraBridgeViewBase.java:283)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at org.opencv.android.NativeCameraView$CameraWorker.run(NativeCameraView.java:144)
02-11 13:00:25.926: E/AndroidRuntime(16153):    at java.lang.Thread.run(Thread.java:856) 
```

我尝试更改 Mat 类型（当前为 CV_8UC4）并更改其他提取器和其他匹配器，但情况仍然没有改变。

描述符属性的日志：

```
02-16 23:56:08.770: V/DEBUG(24163): descriptor1 = Mat [ 240*320*CV_8UC1, isCont=true,     isSubmat=false, nativeObj=0x5e42e298, dataAddr=0x5f713010 ], descriptor2 = Mat [ 240*320*CV_8UC1, isCont=true, isSubmat=false, nativeObj=0x5e42e2d8, dataAddr=0x5f726010 ] 
```

非常感谢任何帮助，谢谢！

# xcode - xcode 从 4.5.1 更新到 4.6

> ID：14823519
> 
> 赞同：0
> 
> 时间：2013-02-12T00:28:10.447
> 
> 标签：xcode, xcode4, updates

嗨，我是 Xcode 的新手，想知道如何执行从 v4.5.1 到 v4.6 的更新。是否有必要在我的 Mac 上卸载当前的 xcode 才能升级我的 xcode？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:30:40.923

无需卸载 Xcode 的实际版本。只需打开 Mac App Store，Xcode 的“更新”选项卡上就会出现更新。玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:30:51.193

单击 mac App Store 图标。当您启动应用商店时，您应该会看到需要的软件更新。单击软件更新并找到 xcode。只需单击它即可更新它。无需卸载当前版本。

# apache-pig - 加载任意空白分隔文件的最佳代码

> ID：14823520
> 
> 赞同：0
> 
> 时间：2013-02-12T00:28:21.157
> 
> 标签：apache-pig

我想知道是否有人可以对以下内容进行改进。

我遇到了以空格分隔的文件，其中空格分隔符的数量和类型可能因行而异，甚至在一行内的字段之间也可能不同，如下所示：

whiteSpaceDelimitedFields.txt：

```
f11     f12 f13 ...
f22 f22  f23 ...
f32  f32    f33 ... 
```

对于这种空白的一般情况，我使用以下 PIG 代码片段（如下面的输出所示）：

```
grunt> A = LOAD 'whiteSpaceDelimitedFields.txt' USING TextLoader() AS (line:chararray);
grunt> B = FOREACH A GENERATE FLATTEN(STRSPLIT(line, '\\s+')) AS (f0:type, f1:type, ...);
grunt> DUMP B;

(f11,f12,f13)
(f22,f22,f23)
(f32,f32,f33)
grunt> 
```

我想这种转换发生在 map() 方法中（而不是在记录阅读器中动态发生——尽管我不确定）；但无论如何，对于这种经常发生的情况，PIG 是否有改进？也许是装载机的建议？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:54:47.677

如果您不想创建自定义加载器，可以查看 Piggybank 的[MyRegExLoader](http://pig.apache.org/docs/r0.10.0/api/org/apache/pig/piggybank/storage/MyRegExLoader.html)：

```
REGISTER '/my_pig_home/contrib/piggybank/java/piggybank.jar'
A = LOAD 'data.txt' USING org.apache.pig.piggybank.storage.MyRegExLoader(
  '(\\S+)\\s+(\\S+)\\s+(\\S+)') as 
  (field1:chararray, field2:chararray, filed3:chararray);

dump A;
(f11,f12,f13)
(f22,f22,f23)
(f32,f32,f33) 
```

# ruby-on-rails - 将值从视图传递给助手

> ID：14823525
> 
> 赞同：0
> 
> 时间：2013-02-12T00:28:38.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, helper

我有以下表格：

```
projects
users
projects_users <- relational table 
```

在视图中，我循环浏览所有项目，并根据用户与它的关系（所有者、成员、而不是成员）将它们呈现为具有不同类（以及链接或未链接）的一个和一个。

这很好用，除了第 3 行的 if 语句，我在其中检查用户是否是成员。'check_if_member' 可以在项目助手中找到（见下文）。发生的情况是我收到以下错误消息：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

...这（如果我没记错的话）意味着“@project.id”或“current_user.id”都是零。在这种情况下，我很确定它是 nil 的 @project.id，并且它实际上没有传递给助手。

如果我是对的，我该如何将它传递给助手？如果我错了，那有什么问题？

**风景：**

```
1\.  <% @projects.each do |project| %>
2\.      <div class="project_container">
3\.          <% if check_if_member %>
4\.              <% if project.user_id == current_user.id %>
5\.                  <div class="users_project label label-success">
6\.                      Owner
7\.                  </div>
8\.              <% else %>
9\.                  <div class="not_users_project label label-info">
10\.                     Member
11\.                 </div>
12\.             <% end %>
13\.             <div class="project_name_div">
14\.                 <%= link_to (project.title), project_path(project) %><br />
15\.             </div>
16\.         <% else %>
17\.             <div class="project_name_div">
18\.                 project.title <br />
19\.             </div>
20\.         <% end %>
21\.     </div>
22\. <% end %> 
```

**帮手：**

```
module ProjectsHelper
    def check_if_member
        if ProjectsUser.where("project_id = ? AND user_id = ?", @project.id, current_user.id)
            return true
        else
            return false
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:30:39.847

显式传递

```
def check_if_member project, user
    ProjectsUser.where("project_id = ? AND user_id = ?", project.id, user.id).count > 0
end 
```

然后

```
<% if check_if_member(project, current_user) %> 
```

# java - Spring Prototype 作用域 bean，用于配置的设计模式

> ID：14823527
> 
> 赞同：0
> 
> 时间：2013-02-12T00:29:02.037
> 
> 标签：java, spring, vaadin

我有一个 spring 应用程序，我正在使用 Vaadin 编写 Web UI。为此，我使用了[Spring Vaadin 集成](https://vaadin.com/directory#addon/springvaadinintegration)工具。

所以我正在扩展 Vaadin 类来定制和使用它们。例如，我有我的主要 UI 类，它是一个原型。（应该为用户打开的每个浏览器窗口实例化一个新窗口。）

```
@Component
@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)
public class MainUI extends UI {

@Autowired
private GameMapView gameMapView;

@Override
protected void init(VaadinRequest request) {

        final VerticalLayout layout = new VerticalLayout();
        layout.setMargin(true);
        setContent(layout);

        gameMapView.configureGameMapView();
        layout.addComponent(gameMapView);
   }
} 
```

然后导入我的 GameMapView，它也是一个原型组件，并扩展 VerticalLayout，然后我有一个 GameMap 原型组件，它扩展了 GridLayout。

现在，当我使用 GameMap 类时，我需要为它配置一个维度和一个中心图块位置。（所以它可以设置它有多大，以及它正在查看哪些图块。）它还需要使用我的一项服务从数据库中获取要显示的正确图块。

我想做的是将这些传递给构造函数，如下所示：

```
@Component
@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)
public class GameMap extends GridLayout {

    @Autowired
    private LandTileService lts;

    public GameMap(int dimension, int xcoor, int ycoor) {
        super();
        this.setWidth(80, Unit.PERCENTAGE);
        this.setHeight(80, Unit.PERCENTAGE);

//START configuration

        this.setRows(dimension);
        this.setColumns(dimension);

        [use the land tile service and coordinates etc.]
   //END configuration
    }
} 
```

但问题是你不能在 spring bean 的构造函数中使用自动装配的 spring bean，你也不能使用带有自动装配的 spring bean 的重载构造函数。

现在，我通过创建一个配置方法来解决这个问题，我只在我的 spring 原型类上调用一次，然后再使用它们，但这似乎是一个糟糕的解决方案。有没有更好的方法来解决这个问题？我希望能够强制 x、y 和 z 参数必须先传递给 Spring Component 游戏地图，然后才能开始使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:42:11.017

*但问题是你不能在 spring bean 的构造函数中使用自动装配的 spring bean，你也不能在 autowired spring bean 中使用重载的构造函数。*

默认情况下，字段自动装配发生在构造 bean 之后，因此它在构造函数上不可用。

但是，您可以通过在 beans 配置文件中指定它来使用构造函数自动装配：

```
<beans:beans xmlns="..."  default-autowire="constructor">
</beans:beans> 
```

然后你可以从构造函数注入你的bean

```
@Service
public class FooService {
} 
```

```
@Service
public class CowService {

   FooService fooService;

   //FooService will be injected when CowService bean is constructed
   public(FooService fooService) {
     this.fooService = fooService;
   }
} 
```

*现在，我通过创建一个配置方法来解决这个问题，我只在我的 spring 原型类上调用一次，然后再使用它们，但这似乎是一个糟糕的解决方案。有没有更好的方法来解决这个问题？*

在您的情况下，我要做的是创建一个工厂单例类“GameMapFactory”。将其作为 bean 放置，您可以将其注入任何您需要的地方。该类将有一个方法“createGameMap(int dimension, int xcoord, int ycoord)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:36:25.853

您可以实现一个接口（如果您愿意，也可以实现一个注释），它将在设置属性（如果有）后触发一个方法执行一次。

您还可以将属性标记为 @Required 。. . 关于构造函数注入，我不确定您到底面临什么问题。. . （自从我使用 Spring 以来已经有一段时间了）。

这是[API 文档](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/InitializingBean.html)

# c++ - 编译器错误，说明从某类型的表达式中对某类型的引用和某某类型的引用无效初始化*

> ID：14823528
> 
> 赞同：3
> 
> 时间：2013-02-12T00:29:05.890
> 
> 标签：c++, compiler-errors

我有一个函数原型

```
test(something &) 
```

我正在做

```
something *ss = new something(); 
```

我说

```
test(ss) 
```

编译器抱怨说从表达式 something * 初始化类型 something& 的引用。

但不是 new 返回地址并且 ss 必须指向该地址！所以如果测试期待一个参考，它不是 ss 代表一个参考吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:31:24.617

您的函数需要一个普通`something`对象。您不需要在这里使用指针：

```
something ss;

test(ss); 
```

当您的函数签名看起来像`f(T&)`时，这意味着它接受对`T`对象的引用。当签名为`f(T*)`时，表示它接受一个指向*对象*`T`的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:29:41.630

您的函数需要一个对 的引用`something`，并且您正在向它传递一个指向的*指针*`something`。您需要取消引用指针：

```
test(*ss); 
```

这样，该函数将引用指向的对象`ss`。如果你有一个`something`对象，你可以将它直接传递给：

```
something sss;
test(sss); // test takes a reference to the sss object. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:40:54.497

您对变量的[引用和地址感到困惑。](http://en.wikipedia.org/wiki/Reference_%28C++%29)

如果你的函数原型是：

```
test(something &) 
```

你可以调用它`something object`：

```
something ss;
test(ss); 
```

你可以调用它`something pointer`：

```
 something *ss = new something();
 test(*ss); 
```

如果您的功能是：

```
test(something *) 
```

您可以致电：

```
something *ss = new something();
test(ss); 
```

# php - jQuery AJAX 函数设置 PHP $_SESSION 变量，单个复选框

> ID：14823532
> 
> 赞同：0
> 
> 时间：2013-02-12T00:29:32.660
> 
> 标签：php, jquery, ajax

我和阿贾克斯的第一次郊游。我正在尝试捕获单个复选框的值，如果选中，则将 PHP $_SESSION 变量设置为 true。

在 HTML 我有这个。

```
 <input type="checkbox" name="agree" id="agree"/>
and the js is this....not sure what to put in the AJAX data params??
    $(document).ready(function() {
            $('#agree').click(function(){ 
                $.ajax({
                    url: 'agree.php',
                    type: 'GET',
                    data: { agreement:"checked" } //NOT Sure ABout this??
                });      
        })
    }); 
```

和 PHP，伪代码可能是因为它不工作..

```
if($_GET['agreement'] == 'checked') {
$_SESSION['hm-agreement'] = true;
     } else {
$_SESSION['hm-agreement'] = false; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:41:05.840

您需要检查是否选中了装箱，无论您向 php 文件发送什么，您的代码现在都将会话变量设置为 true。

还使用了 get 与 ajax 的简写，更少的代码

HTML

```
<input type="checkbox" name="agree" id="agree"/> 
```

JS

```
$(document).ready(function() {
    $('#agree').click(function(){ 
        $.get('agree.php','agreement=' + ( this.checked ? 1 : 0 ) });
    })
}); 
```

PHP

```
session_start();
if($_GET['agreement']) {
    $_SESSION['hm-agreement'] = true;
} else {
    $_SESSION['hm-agreement'] = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:33:05.543

AJAX 调用似乎很好。也许您应该在 PHP 脚本中添加一些调试，并使用 Firebug 或其他开发工具进行查看。

不要忘记在脚本**开头**`start_session()`使用您的 PHP脚本。如果省略此调用，则会话对象不存在。

# java - 我的程序不在 Windows 8 上创建目录，但它在 Windows 7 上创建

> ID：14823537
> 
> 赞同：3
> 
> 时间：2013-02-12T00:29:47.030
> 
> 标签：java, windows-8, directory, save, mkdirs

即使我保存的文件夹不存在，我的游戏在 Windows 7 上也能很好地执行和保存。我使用了以下代码（大致）：

```
new File("Data/Saves").mkdirs(); 
```

当我将它发送给使用 Windows 8 的朋友时出现了问题。他说 Data 文件夹无处可寻，并且没有保存任何内容。显然是个大问题。是否存在兼容性问题或解决方法？它甚至是操作系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:16:20.320

尝试使用至少给出的字符串在您的路径`new File(".").getCanonicalPath();`之前，我认为它对我有用，但我目前无法访问任何 Win8 系统......</p>

# windows - 在具体的 Chrome 窗口中设置 browserAction 图标

> ID：14823539
> 
> 赞同：0
> 
> 时间：2013-02-12T00:30:04.597
> 
> 标签：windows, google-chrome, google-chrome-extension, icons, browser-action

我想在不同的窗口中设置不同的 browserAction 图标。我为此找到的唯一方法是：

[http://developer.chrome.com/extensions/browserAction.html#method-setIcon](http://developer.chrome.com/extensions/browserAction.html#method-setIcon)

但这不需要上下文。它会更改每个窗口中的图标。我知道这是有可能的，因为 adBlock 就是这样做的。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:36:25.337

这是我的解决方案，希望对您有所帮助：

```
function setIcon(state, getIconNameCallback) {

    // we need to set the icon globally first, 
    // to avoid blinking to default icon

    chrome.windows.getLastFocused(null, function(window) {
        chrome.tabs.getSelected(null, function(tab) {
            chrome.browserAction.setIcon({
                'path': getIconNameCallback(state, tab.url)
            });
        });
    });

    // then we must set the icon for each tab,
    // without that the extension wont behave
    // properly with multiple windows

    chrome.tabs.query({}, function(tabs) {
        for (var i = 0; i < tabs.length; i++) {
            chrome.browserAction.setIcon({
                'path': getIconNameCallback(state, tabs[i].url), 
                'tabId': tabs[i].id
            });
        }
    });

} 
```

# javascript - 在 wysiHTML5 中“锁定”部分 HTML

> ID：14823540
> 
> 赞同：4
> 
> 时间：2013-02-12T00:30:05.283
> 
> 标签：javascript, html, wysiwyg, wysihtml5

我在我的代码库中使用[https://github.com/xing/wysihtml5](https://github.com/xing/wysihtml5)作为编辑器，我想“锁定”部分代码使其不可编辑，如下所示：

```
<form>
<textarea id="wysihtml5-textarea" placeholder="Enter your text ..." autofocus>

<div>Some Editable Text here :) </div>

<div class="lockedForEditing" contenteditable="false">YOU CAN'T EDIT ME!!!</div>

<div>Some More editable code here </div>

</textarea>
</form> 
```

有谁知道这是否可能？到目前为止，我已经尝试了几种方法，但都没有成功。我也没有在文档中看到任何内容。如果这是不可能的，你知道有可能的类似编辑器吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-24T10:51:34.087

插入后，您必须使块“锁定”。有几个问题需要处理：

## 1\. 插入锁定元件

我假设，它将通过 insertHTML 命令。

```
editor.composer.commands.exec('insertHTML', lockedhtml);
$(editor.composer.iframe).contents().find('.lockedForEditing').attr('contenteditable', 'false'); 
```

## 2\. 关于 wysihtml 的初始化

即锁定元素在文本区域的内容中。首先，您需要将“lockedForEditing”类添加到 wysihtml 规则中的白名单。然后在作曲家初始化后，您需要锁定元素。

```
editor.on('load', function(){
   $(editor.composer.iframe).contents().find('.lockedForEditing').attr('contenteditable', 'false');
}); 
```

## 3.防止contenteditable命令影响锁定元素的内容

如果用户选择了 composer 中的所有文本并对其进行样式设置，即使 contenteditable 属性为 false，您锁定的元素的内容也会受到影响。因此，您需要使用 CSS 使锁定元素内的文本不可选择

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

一个谦虚的建议，您可能更喜欢为锁定元素保留的部分标签，而不是使用 div 标签作为锁定元素。

# meteor - 如何动态更改 Meteor 中的背景图像？

> ID：14823541
> 
> 赞同：1
> 
> 时间：2013-02-12T00:30:15.167
> 
> 标签：meteor

我是新来的流星和模板系统有点挣扎。

我想根据我的数据库中变量的状态变化来更改流星中 .body css 类的背景图像属性。

这是一个有两个玩家的排行榜应用程序（来自示例），当 Joe 的分数 > 0 时，背景图像应该是 joe.png，否则它是 jack.png。

谢谢你的提示 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T02:45:54.170

在 (isClient) 块中添加这个

```
Meteor.autorun(function() {
    if(Players.findOne({name:"Joe"}).score > 0) {
        $('body').css('background-image','url(/joe.png)');
    }
    else
    {
        $('body').css('background-image','url(/jack.png)');
    }
} 
```

基本上 Meteor.autorun 将在其中使用的反应变量`Players`在这种情况下发生变化时运行该函数。所以当你的玩家数据库发生变化时，它会运行这段代码。

# c# - 如何在 C# 中检查 youtube url

> ID：14823544
> 
> 赞同：0
> 
> 时间：2013-02-12T00:30:22.913
> 
> 标签：c#

我想检查给定的 URL a 是否链接到`http://youtube.com`.

我知道有很多各种缩短版本的链接（例如`http://youtu.be`），所以我所追求的是一种解析 URL 并查看它是否以`http://youtube.com`.

几个示例输入是：

```
http://www.youtube.com/v/[videoid]
http://www.youtu.be/watch?v=[videoid] 
```

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T01:09:17.543

您可以执行`HEAD`请求：

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://www.youtu.be/Ddn4MGaS3N4");
request.Method = "HEAD";
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse()) {
    Console.WriteLine("Does this resolve to youtube?: {0}", response.ResponseUri.ToString().Contains("youtube.com") ? "Yes" : "No");
} 
```

似乎工作正常。不确定边缘情况，但似乎可以完成这项工作。

（**注意**：这里没有错误检查，例如 404 错误等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-20T19:31:28.820

```
 bool isYoutube = false;

                    string host = new Uri(url).Host;
                    if (host == "youtube.com" || host == "youtu.be")
                    {
                        isYoutube = true;
                    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T01:04:58.700

首先，您可能必须检查 youtube 的主机名是什么（我只是假设它是[http://youtube.com](http://youtube.com)），但是在您拥有之后，以下代码将满足您的要求；

```
 using System.Net;

 IPHostEntry host = Dns.Resolve(theInputHostName);
 if (host.HostName == "http://youtube.com")
      // it resolves to youtube, do something. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T01:10:08.680

如果您想知道给定的 URL 是否重定向（使用状态代码`301`/ `302`）到 YouTube URL，您可以直接使用`WebClient`/ `HttWebRequest`/whatever 并检查响应，或者`HttpWebRequest.AllowAutoRedirect`手动禁用并遍历所有重定向（检查状态代码，然后检查`Location`HTTP标题）。

# php - 设置最大分页链接

> ID：14823554
> 
> 赞同：0
> 
> 时间：2013-02-12T00:31:22.823
> 
> 标签：php, html, pagination

我有一个可以产生数千个结果的大型数据库，我需要限制分页链接的数量，比如 9 个链接，前 4 页在一侧，然后是当前页面，然后是 4 个下一页。

例如：14|15|16|17| **18** |19|20|21|22 有谁知道我如何做到这一点？谢谢

```
if (isset($_GET["page"])) 
  { 
    $page  = $_GET["page"];
  } 
    else 
  { 
    $page=1; 
  };

$start_from = ($page-1) * 10;
$message =  "SELECT * FROM document WHERE email='$_SESSION[email]' ORDER BY id DESC LIMIT $start_from , 10";

          // echo  results

         // make page links for results

  $sql = "SELECT id FROM document WHERE email = '$_SESSION[email]'";
  $rs_result = $db->query($sql);
  $total_records = $rs_result->num_rows;
  $total_pages = ceil($total_records / 10);

  if($rs_result->num_rows >10) {

$page = "<p class = 'page'>";
  for ($i=1; $i<=$total_pages; $i++) 
 {
   $page .="<a href='results.html?page=".$i."'>".$i."</a> ";
 }
   $page .="</p>";
   echo $page;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:40:57.090

只需使用基本数学来计算循环中使用的起始页和结束页：

```
$page_range_offset = 4;    
$page_start = $page - $page_range_offset;    
if ($page_start < 1) {
    $page_start = 1;
}    
$page_end = $page + $page_range_offset;
if ($page_end > $total_pages) {
    $page_end = $total_pages;
}

for ($i=$page_start; $i<=$page_end; $i++) {
   $page .="<a href='results.html?page=".$i."'>".$i."</a> ";
} 
```

# android - Android：声明静态位图？是还是不是？

> ID：14823556
> 
> 赞同：3
> 
> 时间：2013-02-12T00:31:26.727
> 
> 标签：android, static, bitmap, declaration

最近有人评论了我的代码，我在其中声明了以下内容：

```
private Bitmap splashBackground;
private Bitmap lightDot;
private static Bitmap scaledBackground;
private static Bitmap scaledLightDot; 
```

他们建议我不要声明 satic 位图。

但是，我已经尝试了所有方法，除非我将它们声明为静态，否则我的代码不起作用。

此外，“public static Bitmap createScaledBitmap (Bitmap src, int dstWidth, int dstHeight, boolean filter)”似乎出现在官方 Android 开发者网站上，所以我对我应该做什么和不应该做什么感到有点困惑。

任何指针将不胜感激 - 谢谢

编辑：澄清：

当我从声明中删除静态时，当我到达我的 onDraw() 方法时，缩放位图为空。（我在 initialise() 方法中创建缩放位图对象，一旦创建，它就是有效的（即，不为空）-但随后在 onDraw 处似乎变为空，除非我将其声明为静态。

我正在从我的活动类中调用我的 initialise() 方法。

编辑：根据要求提供更多代码。

我的 OnCreate 方法：如您所见，我将屏幕高度和宽度传递过来，以便创建缩放位图

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        displaySplashScreen= new SplashScreen(this);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // set View
        setContentView(new SplashScreen(this));
        WindowManager w = getWindowManager();   
        Display d = w.getDefaultDisplay();
        int width=d.getWidth();
        int height=d.getHeight();
        displaySplashScreen.initialise(width, height);
} 
```

我的初始化方法：

```
 public void initialise(int w, int h)
 {       
     //Get width and height (passed in from Activity)

     vwidth=w;
     vheight=h;

     //Create pre-scaled bitmaps

    scaledBackground = Bitmap.createScaledBitmap(splashBackground,  vwidth, vheight, true);
    scaledLightDot = Bitmap.createScaledBitmap(lightDot, vwidth, vheight, true);

 } 
```

我还可以补充一点，如果我以相同的方式使用标准变量（比如 int number;）并将其设置为 initalise（number = 5;），那么在我的初始化方法中 number 仅等于 5。如果我从 onDraw() 记录它，它总是会反复返回'0'！真是莫名其妙。

到目前为止谢谢大家，如果需要更多代码，请告诉我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:55:44.500

这一行是错误的：

```
 // set View
    setContentView(new SplashScreen(this));        // This line is wrong. 
```

应该是这样的：

```
 // set View
    setContentView(displaySplashScreen);        // displaySplashScreen is created earlier. 
```

您被创建了两个`SplashScreen`. 您应该继续使用相同的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T02:39:45.857

一般来说，使用`static`for `Bitmap`s 是一个非常糟糕的主意。这有很多很好的理由，主要与避免内存泄漏有关。

> 此外，“public static Bitmap createScaledBitmap (Bitmap src, int dstWidth, int dstHeight, boolean filter)”似乎出现在官方Android开发者网站上......

这不是一个`static Bitmap`. 这是对类方法的方法调用。静态不一样，返回类型 ( `Bitmap`) 不是静态的。这意味着该方法是静态的，不需要调用实例。它将返回一个位图以放置在您选择的适当变量中。

> 我`initialise()`从我的活动课程中调用我的方法。

这种说法是非常无益的。从课堂上的*哪个位置*调用它？它在`onCreate()`, `onStart()`, `onResume()`, 其他一些自定义方法中吗？您选择在何时何地做某些事情会对它们的成功程度产生巨大影响。

> ...但是除非我将其声明为静态，否则在 onDraw 似乎变为空。

这可能有几个可能的原因，并且由于我们没有您的任何代码，因此确实没有合格的答案。这里有一些事情要看。

*   这可能是因为 Activity 正在重新创建。
*   这也可能是因为实际上调用了一些*看似无关的方法。*这可能是您手动将其设置为`null`.
*   这可能是由于`createScaledBitmap()`方法使用不当造成的。
*   由于内存不足，位图可能会被回收（这实际上比人们想象的更频繁地发生）

**编辑：查看您的代码后**

这看起来可能是罪魁祸首。上面，你有...

```
displaySplashScreen= new SplashScreen(this); 
```

下面，您添加...

```
setContentView(new SplashScreen(this)); 
```

这意味着您正在创建***两个***启动画面。您在不使用时获得空指针的一个原因`static`可能是因为您使用的更远...

```
displaySplashScreen.initialise(width, height); 
```

但是由于您的 contentView 设置为***新***的SplashScreen，因此您实际上并没有使用该视图。要解决此问题，请确保您正在与***同一个***视图对象交谈。IE

```
setContentView(displaySplashScreen); 
```

这至少可以确保您看到的是同一个对象。根据正在发生的其他事情，您可能需要重新组织一下。例如，

```
setContentView(displaySplashScreen); 
```

...可能必须出现在下面...

```
 displaySplashScreen.initialise(width, height); 
```

这是您可能不得不玩弄的东西，但我没有看到任何其他立即指示的东西。请注意，首先解决空指针异常通常会导致代码中出现更多错误。坚持到底，按顺序解决每个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T03:22:17.407

如果没有您的代码，您似乎正在多次使用您的视图。可能在视图的两个实例中，或者可能正在重新创建相同的视图（活动重新启动）。在第一次，initialize() 在 onDraw() 之前被调用，使你的静态 Drawable 被初始化并且有效。第二次， onDraw()在 initialize()*之前*运行（当 Drawable 为静态时有效）。这很可能是由于您膨胀了视图并随后调用了 initialize() （这意味着视图已经在布局中）。IE

```
public void onCreate(Bundle savedInstanceState) {
  setContentView(R.layout.mylayout); //the view is added to layout, onDraw() may be called
  MyView view = (MyView)findViewById(R.id.myview);
  view.initialize();  //initializing the drawable from null
  //no guarentee that initialize was called before onDraw()
} 
```

当您的 Drawable 是静态的时，这运行正常，因为当绘制第二个视图时，*它使用的是由第一个视图初始化的同一个 Drawable*。删除静态时，需要确保始终在 onDraw() 之前调用初始化。

与其从您的活动中调用initialize()，不如从视图的构造函数中调用它？我经常使用以下模式：

```
public class MyView extends View {

  private Bitmap splashBackground;
  private Bitmap lightDot;
  private Bitmap scaledBackground;
  private Bitmap scaledLightDot;

  public MyView(Context context) {
    super(context);
    init();
  }

  public MyView(AttributeSet attr, Context context) {
    super(attr, context);
    //parse attr for xml attributes
    init();
  }

  private void init() {
    splashBackground = getResources().getDrawable(R.drawable.splash_background);
    lightDot = getResources().getDrawable(R.drawable.light_dot);
    scaledLightDot = Bitmap.createScaledBitmap(lightDot, getDPI(32), getDPI(32), false);
  }

  public void onSizeChanged(int width, int height) {
    scaledBackground =  Bitmap.createScaledBitmap (splashBackground, width, height, false);
  }

  /**
   * Convert pixel value to device independent pixels (DPI)
   * @params pixels  Value for pixel size for MDPI screens
   */
  private int getDPI(int pixels) {
    return (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, pixels, getResources().getDisplayMetrics());
  }

  public void onDraw(Canvas canvas) {
    //non-static drawables are guaranteed to be not-null
    canvas.draw(scaledBackground, 0, 0, null);
    canvas.draw(scaledLightDot, 10, 10, null);
  }
} 
```

你会准备好的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T01:10:25.033

我投反对票，这是一个静态变量

```
private Bitmap splashBackground;
private Bitmap lightDot;
private static Bitmap scaledBackground;
private static Bitmap scaledLightDot; 
```

这是一个静态方法

```
public static Bitmap createScaledBitmap (Bitmap src, 
     int dstWidth, int dstHeight, boolean filter) 
```

静态变量通常声明为常量，如果您有一个类，则该变量属于类而不是对象

```
public class car {
      private static colorOfCar;
      private numberOfDoor;
} 
```

假设您有一辆汽车，并且当您从汽车类创建对象保时捷和法拉利时，您有 2 个变量 colorOfCar 和 numberOfDoor 如果您更改门的数量，那么您的保时捷对象和法拉利对象中的 numberOfDoor 将是不同的，但是如果您更改 colorOfCar 保时捷对象和法拉利对象 colorOfCar 都会更改，因为 colorOfCar 是属于类而不是对象的静态对象。

我希望你能理解我的解释。如果您发现我的回答对您有帮助，请投票并接受我的回答，如果您有任何其他问题，请随时在评论中提问，谢谢 :)

# java - JFrame 程序中的按钮错误

> ID：14823557
> 
> 赞同：0
> 
> 时间：2013-02-12T00:31:30.690
> 
> 标签：java, swing, compilation, jframe, joptionpane

所以我有这个 Java 项目，它基本上应该是一个临时数据库。它使用 GUI 存储学生，询问他们的姓名、3 个测试分数，并根据该信息将它们存档，然后如果我需要再次访问它们，JFrame 具有允许我循环浏览我已经拥有的学生的按钮添加。出于某种原因，我不断收到以下编译错误：

```
 aveScoreButton.addActionListener(new AveScoreListener());

    previousButton.addActionListener(new PreviousListener());

    nextButton.addActionListener(new NextListener());

    firstButton.addActionListener(new FirstListener());

    lastButton.addActionListener(new LastListener()); 
```

我稍后在程序中调用了这些监听器：//响应点击平均分数按钮

```
 private class AveScoreListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            if (model.size() == 0){

                JOptionPane.showMessageDialog(TestScoresView.this, "No Student Available");

                return;

            }

            int ave = model.getClassAverage();

            JOptionPane.showMessageDialog(TestScoresView.this, "The Average Score is " + ave);
        }

    }

    // Responds to a click on the < Button

    private class PreviousListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.previous();

            displayInfo();

        }
    }

    // Responds to a click on the > Button

    private class NextListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.next();

            displayInfo();

        }
    }

    // Responds to a click on the << Button

    private class FirstListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.first();

            displayInfo();

        }
    }

    // Responds to a click on the >> Button

    private class LastListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.last();

            displayInfo();

       }
   } 
```

然而，ActionListener 在底部找不到这些，并导致找不到符号错误。谁能帮我这个？

PS。抱歉，如果我弄错了这样的术语，我对 Java 比较陌生，不知道所有东西都叫什么。请在您认为合适的任何地方纠正我！

//------------- 整个代码

这是一个 4 部分计划

```
Student:
package student;

// Case Study 9.1: Student classes

public class Student {

private String name;
private int[] tests;

// Default: Name is "" and 3 scores are 0

public Student(){
    this("");
}

// Name is nm and 3 scores are 0
public Student(String nm){
    this(nm, 3);
}

// Name is nm and n scores are 0
public Student(String nm, int n){
    name = nm;
    tests = new int[n];
    for (int i = 0; i < tests.length; i++)
        tests[i] = 0;
}
// Name is nm and scores are in t
public Student(String nm, int[] t){
    name = nm;
    tests = new int[t.length];
    for (int i = 0; i < tests.length; i++)
        tests[i] = t[i];
}

// Builds a copy of s
public Student(Student s){
    this(s.name, s.tests);
}

public int getNumberOfTests(){
    return tests.length;
}

public void setName (String nm){
    name = nm;
}

public String getName (){
    return name;
}

public void setScore (int i, int score){
    tests[i - 1] = score;
}

public int getScore (int i){
    return tests[i - 1];
}

public int getAverage (){
    int sum = 0;
    for (int score : tests)
        sum += score;
    return sum / tests.length;
}

public int getHighScore(){
    int highScore = 0;
    for (int score : tests)
        highScore = Math.max (highScore, score);
    return highScore;
}

public String toString(){
    String str = "Name:     " + name + "\n";
    for (int i = 0; i < tests.length; i++)
    str += "test " + (i + 1) + ": " + tests[i] + "\n";
    str += "Average: " + getAverage();
    return str;
}

// Returns null if there are no errors else returns
// an appropriate error mesage.
public String validateData(){
    if (name.equals ("")) return "SORRY: name required";
    for (int score : tests){
        if (score < 0 || score > 100){
            String str = "SORRY: must have "+ 0
                    + " <= test score <= " + 100;
            return str;
        }
    }
    return null;
} 
```

}

测试分数模型：

```
package student;

// Case Study 9.1: TestScoresModel class

public class TestScoresModel{

private Student[] students;             // Array of Students
private int indexSelectedStudent;       // Position of current student
private int studentCount;               // Current number of students

public TestScoresModel(){

    // Initializes the data
    indexSelectedStudent = -1;
    studentCount = 0;
    students = new Student[10];
}

// Mutator methods for adding and replacing students

public String add(Student s){
    if (studentCount == students.length)
        return "SORRY: student list is full";
    else{
        students[studentCount] = s;
        indexSelectedStudent = studentCount;
        studentCount++;
        return null;
    }
}
public String replace(Student s){
    if (indexSelectedStudent == -1)
        return "Must add a student first";
    else{
        students[indexSelectedStudent] = s;
        return null;
    }
}

// Navigation Methods

public Student first(){
    Student s = null;
    if (studentCount == 0)
        indexSelectedStudent = -1;
    else{
        indexSelectedStudent = -1;
        s = students[indexSelectedStudent];
    }
    return s;
}

public Student previous(){
    Student s = null;
    if (studentCount == 0)
        indexSelectedStudent = -1;
    else{
        indexSelectedStudent
                = Math.max (0, indexSelectedStudent -1);
        s = students[indexSelectedStudent];
    }
    return s;
}

public Student next(){
    Student s = null;
    if (studentCount == 0)
        indexSelectedStudent = -1;
    else{
        indexSelectedStudent
                = Math.min (studentCount - 1, indexSelectedStudent + 1);
        s = students[indexSelectedStudent];
    }
    return s;
}

public Student last(){
    Student s = null;
    if (studentCount == 0)
        indexSelectedStudent = -1;
    else{
        indexSelectedStudent = studentCount -1;
        s = students[indexSelectedStudent];
    }
    return s;
}

// Accessors to observe data

public Student currentStudent(){
    if (indexSelectedStudent == -1)
        return null;
    else
        return students[indexSelectedStudent];
}

public int size(){
    return studentCount;
}

public int currentPosition(){
    return indexSelectedStudent;
}

public int getClassAverage(){
    if (studentCount == 0)
        return 0;
    int sum = 0;
    for (int i = 0; i < studentCount; i++)
        sum += students[i].getAverage();
    return sum / studentCount;
}

public Student getHighScore(){
    if (studentCount == 0)
        return null;
    else{
        Student s = students[0];
        for (int i = 1; i < studentCount; i++)
            if (s.getHighScore() < students[i].getHighScore())
                s = students[i];
        return s;

    }
}

public String toString(){
    String result = "";
            for (int i = 0; i < studentCount; i ++)
                result = result + students[i] + "\n";
    return result;
} 
```

}

观点（我遇到的问题

```
// Solution to Project 9.9

package student;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TestScoresView extends JFrame{

// >>>>>>>>> The Model <<<<<<<<<

// Declare the Model
private TestScoresModel model;

// >>>>>>>>> The View <<<<<<<<<

// Declare and instantiate the window objects.

private JButton     addButton       = new JButton("Add");

private JButton     modifyButton    = new JButton("Modify");

private JButton     firstButton     = new JButton("<<");

private JButton     previousButton  = new JButton("<");

private JButton     nextButton      = new JButton(">");

private JButton     lastButton      = new JButton(">>");

private JButton     highScoreButton = new JButton("Highest Score");

private JButton     aveScoreButton  = new JButton("Class Average");

private JLabel      nameLabel       = new JLabel("Name");

private JLabel      test1Label      = new JLabel("Test 1");

private JLabel      test2Label      = new JLabel("Test 2");

private JLabel      test3Label      = new JLabel("Test 3");

private JLabel      averageLabel    = new JLabel("Average");

private JLabel      countLabel      = new JLabel("Count");

private JLabel      indexLabel      = new JLabel("Index");

private JTextField  nameField       = new JTextField("");

private JTextField  test1Field      = new JTextField("0");

private JTextField  test2Field      = new JTextField("0");

private JTextField  test3Field      = new JTextField("0");

private JTextField  averageField    = new JTextField("0");

private JTextField  countField      = new JTextField("0");

private JTextField  indexField      = new JTextField("-1");

//Constructor

public TestScoresView(TestScoresModel m){

    model = m;

    // Set attributes of fields

    averageField.setEditable(false);

    countField.setEditable(false);

    indexField.setEditable(false);

    averageField.setBackground(Color.white);

    countField.setBackground(Color.white);

    indexField.setBackground(Color.white);

    // Setup panels to organize widgets and

    // add them to the window

    JPanel northPanel = new JPanel();

    JPanel centerPanel = new JPanel(new GridLayout(5, 4, 10, 5));

    JPanel southPanel = new JPanel();

    Container container = getContentPane();

    container.add(northPanel, BorderLayout.NORTH);

    container.add(centerPanel, BorderLayout.CENTER);

    container.add(southPanel, BorderLayout.SOUTH);

    // Data Access Buttons

    northPanel.add(addButton);

    northPanel.add(modifyButton);

    northPanel.add(highScoreButton);

    northPanel.add(aveScoreButton);

    // Row 1

    centerPanel.add(nameLabel);

    centerPanel.add(nameField);

    centerPanel.add(countLabel);

    centerPanel.add(countField);

    // Row 2

    centerPanel.add(test1Label);

    centerPanel.add(test1Field);

    centerPanel.add(indexLabel);

    centerPanel.add(indexField);

    // Row 3

    centerPanel.add(test2Label);

    centerPanel.add(test2Field);

    centerPanel.add(new JLabel(""));

    centerPanel.add(new JLabel(""));

    // Row 4

    centerPanel.add(test3Label);

    centerPanel.add(test3Field);

    centerPanel.add(new JLabel(""));

    centerPanel.add(new JLabel(""));

    // Row 5

    centerPanel.add(averageLabel);

    centerPanel.add(averageField);

    centerPanel.add(new JLabel(""));

    centerPanel.add(new JLabel(""));

    // Navigation buttons

    southPanel.add(firstButton);

    southPanel.add(previousButton);

    southPanel.add(nextButton);

    southPanel.add(lastButton);

    // Attach listeners to buttons

    addButton.addActionListener(new AddListener());

    modifyButton.addActionListener(new ModifyListener());

    highScoreButton.addActionListener(new HighScoreListener());

    aveScoreButton.addActionListener(new AveScoreListener());

    previousButton.addActionListener(new PreviousListener());

    nextButton.addActionListener(new NextListener());

    firstButton.addActionListener(new FirstListener());

    lastButton.addActionListener(new LastListener());

    // Other attachments will go here (excercise)

    // Set window attributes

    setTitle("Student Test Scores");

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    pack();

    setVisible(true);

}

// Updates fields with info from the model

private void displayInfo(){

    Student s = model.currentStudent();

    if (s == null){

        nameField.setText("");

        test1Field.setText("0");

        test2Field.setText("0");

        test3Field.setText("0");

        averageField.setText("0");

        countField.setText("0");

        test3Field.setText("-1");
    } else {

        nameField.setText(s.getName());

        test1Field.setText("" + s.getScore(1));

        test2Field.setText("" + s.getScore(2));

        test3Field.setText("" + s.getScore(3));

        averageField.setText("" + s.getAverage());

        countField.setText("" + model.size());

        indexField.setText("" + model.currentPosition());

    }

}

// Creates and returns new Student from field info

private Student getInfoFromScreen(){

    Student s = new Student(nameField.getText());

    s.setScore(1, Integer.parseInt(test1Field.getText()));

    s.setScore(2, Integer.parseInt(test2Field.getText()));

    s.setScore(3, Integer.parseInt(test3Field.getText()));

    return s;
}

// >>>>>>>>> The Controller <<<<<<<<<<

// Responds to a click on the Add button

private class AddListener implements ActionListener{

    public void actionPerformed(ActionEvent e){

        // Get inputs, validate, and display error and quit if invalid

        Student s = getInfoFromScreen();

        String message = s.validateData();

        if (message !=null){

            JOptionPane.showMessageDialog(TestScoresView.this, message);

            return;

        }

        // Attempt to add student and display error or update fields

        message = model.add(s);

        if (message !=null) { 

            JOptionPane.showMessageDialog(TestScoresView.this, message);
        }

        else {
            displayInfo();
        }

    }
}

// Responds to a click on the Modify Button

private class ModifyListener implements ActionListener{

    public void actionPerformed(ActionEvent e){

        if (model.size() == 0){

            JOptionPane.showMessageDialog(TestScoresView.this, "No Student Available");

            return;

        }

        // Get inputs, validate, and display error and quit if invalid

        Student s = getInfoFromScreen();

        String message = s.validateData();

        if (message !=null){

            JOptionPane.showMessageDialog(TestScoresView.this, message);

            return;

        }

        // Attempt to add student and display error or update fields

        message = model.replace(s);

        if (message !=null) {

            JOptionPane.showMessageDialog(TestScoresView.this, message);
        }

        else {
            displayInfo();
        }

    }
}

// Responds to a click on the Highest Score button

private class HighScoreListener implements ActionListener{

    public void actionPerformed(ActionEvent e){

        if (model.size() == 0){{

            JOptionPane.showMessageDialog(TestScoresView.this, "No Student is Available");

            return;

        }

        Student s = model.getHighScore();

        JOptionPane.showMessageDialog(TestScoresView.this, s.toString());

     }
 }

 // Responds to a click on the Average Score Button

    private class AveScoreListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            if (model.size() == 0){

                JOptionPane.showMessageDialog(TestScoresView.this, "No Student Available");

                return;

            }

            int ave = model.getClassAverage();

            JOptionPane.showMessageDialog(TestScoresView.this, "The Average Score is " + ave);
        }

    }

    // Responds to a click on the < Button

    private class PreviousListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.previous();

            displayInfo();

        }
    }

    // Responds to a click on the > Button

    private class NextListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.next();

            displayInfo();

        }
    }

    // Responds to a click on the << Button

    private class FirstListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.first();

            displayInfo();

        }
    }

    // Responds to a click on the >> Button

    private class LastListener implements ActionListener{

        public void actionPerformed(ActionEvent e){

            model.last();

            displayInfo();

        }
    } 
```

}

}

然后运行它的应用程序：

```
package student;

public class TestScoresApp {

public static void main(String[] args){
    TestScoresModel model = new TestScoresModel();
    new TestScoresView(model);
}

} 
```

编译器错误：

C:\Users----\Documents\Java\Student\src\student\TestScoresView.java:183：错误：找不到符号

aveScoreButton.addActionListener(new AveScoreListener()); 符号：AveScoreListener 类 位置：TestScoresView 类

C:\Users----\Documents\Java\Student\src\student\TestScoresView.java:185：错误：找不到符号

previousButton.addActionListener(new PreviousListener()); 符号：类 PreviousListener 位置：类 TestScoresView

C:\Users----\Documents\Java\Student\src\student\TestScoresView.java:187：错误：找不到符号

nextButton.addActionListener(new NextListener()); 符号：NextListener 类 位置：TestScoresView 类

C:\Users\Eric\Documents\Java\Student\src\student\TestScoresView.java:189：错误：找不到符号

firstButton.addActionListener(new FirstListener()); 符号：FirstListener 类 位置：TestScoresView 类

C:\Users----\Documents\Java\Student\src\student\TestScoresView.java:191：错误：找不到符号

lastButton.addActionListener(new LastListener()); 符号：LastListener 类 位置：TestScoresView 类

5 个错误

C:\Users----\Documents\Java\Student\nbproject\build-impl.xml:915：执行此行时出现以下错误：C:\Users----\Documents\Java\Student\nbproject \build-impl.xml:307：编译失败；有关详细信息，请参阅编译器错误输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:08:29.137

这是因为括号错误

1.  删除类 HighScoreListener - *`if (model.size() == 0){`**{*** - 中 if 循环的额外括号（大约行号：355。额外括号以粗体标记）
2.  删除文件中的最后一个括号 - 大约行号：447

# python - Heroku 上的 Flask：对于大量 POST 数据，request.form 速度非常慢？

> ID：14823559
> 
> 赞同：5
> 
> 时间：2013-02-12T00:31:44.900
> 
> 标签：python, post, heroku, flask, gunicorn

我在 Heroku 上运行一个 Flask 应用程序，使用 gunicorn 和 eventlet 工作人员。我的应用程序上的一个特定路由经常接收带有一些相当大的字段的 POST 数据（x-www-form-urlencoded）——最多大约 500KB。

这在本地运行时工作正常，但在 Heroku 上，对该路由的请求需要 5 到 30 秒才能完成——并且几乎 100% 的时间都花在了第一次访问 request.form 上：

```
t = time.time()
action = str(request.form['action'])
dt = time.time() - t  # Often 10 seconds or more! 
```

Newrelic 慢速请求跟踪也证实了这一点。数据库操作在这里或那里有几毫秒，然后是 Python 代码中的大量时间，显然花在等待一些 i/o 上，因为报告的 CPU 时间通常不到一毫秒。

我完全无法在本地环境中使用我在生产中使用的相同 gunicorn/eventlet 设置来重现这一点。即使是内置的调试 WSGI 服务器也能以闪电般的速度处理这些请求。

有人知道可能出了什么问题吗？是 Flask 的问题，还是我需要联系 Heroku 支持的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T23:48:41.527

我想我弄清楚到底发生了什么。TL;DR 在服务器端实际上并没有很慢，我只是被 Newrelic 报告的响应时间误导了！

我尝试在 dotCloud 的沙箱上运行与@AllanAnderson 建议的相同的代码。我首先创建了一个简化的测试用例：一个简单的 HTML 表单，其中预先加载了大约 900KB 数据的几个隐藏字段，以及一个视图函数，除了从 request.form 字典中读取之外什么都不做，并使用测量每次访问的经过时间时间。时间（）。

在 Heroku 上，结果如下所示：

```
5.87100 seconds: read field "p1": 786432 bytes
0.00019 seconds: read field "p2": 131072 bytes
0.00003 seconds: read field "p3": 12288 bytes
0.00001 seconds: read field "p4": 1024 bytes 
```

在 dotCloud 上：

```
0.00096 seconds: read field "p1": 786432 bytes
0.00019 seconds: read field "p2": 131072 bytes
0.00003 seconds: read field "p3": 12288 bytes
0.00001 seconds: read field "p4": 1024 bytes 
```

然而，这两个测试在我的浏览器中似乎花费了相同的时间......现在你可能已经猜到了这个“问题”的真正答案。:-)

事实证明，Heroku 上的 gunicorn 在收到标头后立即执行视图功能，并且对 request.form 的第一次访问被阻止，直到收到请求的其余部分。因此，Newrelic 看到了所有这些非常慢的响应时间，这实际上只是通过糟糕的网络连接上传 POST 数据的结果。dotCloud 的设置显然只是等到收到整个请求。

这使得 Newrelic 的指标不那么有用，但它实际上并不是最终用户体验的问题。

# ruby-on-rails - 升级到 Rails 3.2.12 和 json 1.7.7 后 Heroku 上的 Redactor-rails gem 问题

> ID：14823561
> 
> 赞同：1
> 
> 时间：2013-02-12T00:31:49.220
> 
> 标签：ruby-on-rails, heroku, redactor

由于最近的 Rails 安全问题，我升级了一些我使用的 gem。

将我的应用程序推送到 heroku 后，我看到一个错误（推送正常，但应用程序永远不会停止崩溃）：

```
2013-02-12T00:12:49+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/redactor-rails-0.3.3/lib/redactor-rails.rb:30:in `document_model': uninitialized constant RedactorRails::Document (NameError)
2013-02-12T00:12:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/redactor-rails-0.3.3/app/controller/redactor_rails/documents_controller.rb:2:in `<class:DocumentsController>'
2013-02-12T00:12:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/redactor-rails-0.3.3/app/controller/redactor_rails/documents_controller.rb:1:in `<top (required)>'
2013-02-12T00:12:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-02-12T00:12:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:438:in `each' 
```

当我在本地运行应用程序时，我没有看到这个问题。在本地，我使用的是 ruby​​ 1.9.3-p194，但看起来 Heroku 使用的是 Ruby 1.9.1。

关于如何解决这个问题的任何想法？

谢谢，林戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:07:06.707

如果您使用的是 0.3.3 redactor-rails，请运行以下命令

```
rails generate redactor:install 
```

这应该产生额外的，

> app/uploaders/redactor_rails_document_uploader.rb
> 
> 应用程序/模型/redactor_rails/document.rb

别的，

在您的 Gemfile 中将 redactor-rails 限制为 0.3.2 的早期版本

```
gem 'redactor-rails', '0.3.2' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T03:43:14.880

您可以添加`ruby "1.9.3"`到您的 Gemfile 并使用 Ruby 1.9.3（我认为是 374 补丁...）。有关更多信息，请参见此处：[https ://devcenter.heroku.com/articles/ruby-versions](https://devcenter.heroku.com/articles/ruby-versions)

更新：这实际上看起来像 Redactor-Rails gem 的错误：[https ://github.com/SammyLin/redactor-rails/issues/44](https://github.com/SammyLin/redactor-rails/issues/44)

# c++ - Friend 函数无法访问类变量，也无法理解 Namespaces

> ID：14823562
> 
> 赞同：1
> 
> 时间：2013-02-12T00:31:50.430
> 
> 标签：c++, namespaces, friend

我认为友元函数可以访问类变量，就像我尝试在 << 函数中执行 vx、vy、vz 一样。但它不编译。它说它无法在这些行解析标识符。

我也在尝试学习如何使用命名空间。即使我在实现文件中使用了命名空间 vec，我仍然必须在所有内容之前包含 Vector:: 那么有什么意义呢？

头文件：

```
#ifndef VECTOR_H
#define VECTOR_H

namespace vec {

    class Vector {
    private:
        double x, y, z;

    public:
        Vector(double, double, double);
        friend std::ostream& operator<<(std::ostream&,  const Vector&);

    };

}

#endif  /* VECTOR_H */ 
```

.cpp 文件：

```
#include "Vector.h"
#include <iostream> 
using namespace vec;

//Constructor
Vector::Vector(double x1 = 0, double y1 = 0, double z1 = 0) {
    x = x1;
    y = y1;
    z = z1;
}

//Have also tried adding vec:: and Vector:: before operator<< here.
std::ostream& operator<<(std::ostream& out, const Vector& v) {
    out<<"<"<<v.x<<", "<<v.y<<", "<<v.z<<">";
    return out;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:46:30.910

我相信部分问题是您的 vec.h 没有`#include <iostream>`，因此该`std::ostream`文件中的类型无法识别，并且由于该部分是在 vec.cpp 主要部分之前编译的，因此无法识别您的函数。

您还需要将您`operator<<`的名称放入`vec`. 毕竟，您已经在该命名空间中请求了一个友元函数。

通过这两项更改，您的代码将使用`gcc -Wall -Wextra -O2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:34:16.107

您的编译错误可能与以下问题有关：

*   默认参数仅用于函数声明而不是函数定义，您正在做相反的事情。
*   此外，在 Vector.cpp 中，您应该将类​​成员函数定义包装在命名空间中，而不是调用`using directive`.

尝试：

矢量.h

```
#include <iostream>
class Vector {
    private:
        double x, y, z;

    public:
        Vector(double x1 = 0, double y1 = 0, double z1 = 0);
                        ^^              ^^             ^^
        friend std::ostream& operator<<(std::ostream&,  const Vector&);

    }; 
```

向量.cpp

```
namespace vec
{
   Vector::Vector(double x1, double y1, double z1)
   :x(x1), y(y1), z(z1)
   {
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:36:12.937

`friend std::ostream& operator<<`声明出现在命名空间中，`vec`因此定义应以 . 作为前缀`vec::`。您的评论说您尝试过 - 也许您对 billz 文档的其他错误消息感到困惑，但您应该恢复`vec::operator<<`或用`namespace vec { ... }`.

这会产生如下错误：

```
ns.cc: In function `int main()':
ns.cc:26: error: ambiguous overload for 'operator<<' in 'std::cout << w'
ns.cc:19: note: candidates are: std::ostream& operator<<(std::ostream&, const vec::Vec&)
ns.cc:10: note:                 std::ostream& vec::operator<<(std::ostream&, const vec::Vec&) 
```

# java - Java While循环跳过行，而是每2个循环执行一次

> ID：14823563
> 
> 赞同：1
> 
> 时间：2013-02-12T00:31:54.407
> 
> 标签：java, loops

我正在编写一个作业程序，该程序应该读取未指定数量的 0-100 分数（最多 100 分）并在 -1 或输入任何负数后停止。我已将其放入 Do While 循环中，该循环设置为在通过 Scanner 拉入 -1 时终止。该循环有一个计数器，用于跟踪循环已通过多少次，一个加法器将所有输入行加在一起以稍后计算平均值，以及一个在检查后将输入值发送到数组的方法查看数字是否为-1。而不是这样做，循环仅每 2 个循环递增计数器，-1 只会在偶数循环数上终止循环，否则它将等到下一个循环终止。这完全让我感到困惑，我不知道它为什么会这样做。有人可以指出错误吗？提前致谢！这就是我到目前为止所拥有的。

```
import java.util.Scanner;

public class main {

//Assignment 2, Problem 2
//Reads in an unspecified number of scores, stopping at -1\. Calculates the average and 
//prints out number of scores below the average.
public static void main(String[] args) {

    //Declaration
    int Counter = 0;    //Counts how many scores are
    int Total = 0;      //Adds all the input together
    int[] Scores = new int[100]; //Scores go here after being checked
    int CurrentInput = 0; //Scanner goes here, checked for negative, then added to Scores
    Scanner In = new Scanner(System.in);

    do {
        System.out.println("Please input test scores: ");
        System.out.println("Counter = " + Counter);
        CurrentInput = In.nextInt();
        Scores[Counter] = CurrentInput;
        Total += In.nextInt();
        Counter++;          
    } while ( CurrentInput > 0);

    for(int i = 0; i < Counter; i++) {
        System.out.println(Scores[i]);
    }

    System.out.println("Total = " + Total);

    In.close();

}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T00:33:43.147

```
 CurrentInput = In.nextInt();
    Scores[Counter] = CurrentInput;
    Total += In.nextInt(); 
```

您正在调用两次`In.nextInt()`，即，您在每次循环迭代中读取两行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:51:04.127

```
CurrentInput = In.nextInt();
Scores[Counter] = CurrentInput;
Total += CurrentInput; 
```

改用这个。

# jquery - 是否可以有两个文档准备功能

> ID：14823569
> 
> 赞同：1
> 
> 时间：2013-02-12T00:32:24.883
> 
> 标签：jquery

我必须使用准备好的文档两次，这是撕开代码以使菜单正常工作后的唯一方法是否有更好的方法来实现它或有什么问题供将来参考？导致菜单无法正常工作的是 ol 手风琴。没有在 html 中作为 a 工作，并且无法在切换菜单下方或上方加载它 - 单击 div ....

我写错了吗？

```
$(document).ready(function () {
            $('ol').accordion();
        });

$(document).ready(function() {
// TOGGLE MENU ~ CLICK DIV
    $('div.logo_menu').click(function() {
    $('#logo_menu ul').show('medium');
    return false;
  });

    $('#logo_menu a').click(function() {
    $(this).parents('ul').not('#logo_menu').hide('slow');
    return false;
  });

    $('#logo_menu ul').mouseleave(function() {
    $(this).hide('slow');
  });

// TOGGLE MENU ~ CLICK aHREF
/*
$('a.drop').hover(function(e) {
    $(this).next("div").slideDown('slow');
    console.log('div clicked');
    e.preventDefault();
    return false;
});
    $('li.mainmenudrop').mouseleave(function() {
    $(this).children("div").slideUp('medium');
  });
});*/  

// EXPAND PAGE
    $('.accordionButton').click(function() {
        //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
        $('.accordionContent').slideToggle(500,'easeInOutQuad');
        //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
        if($(this).next().is(':hidden') == true) {
            //OPEN THE SLIDE
            $(this).next().slideToggle(500,'easeInOutQuad');
         } 
     });
    $('.accordionContent').hide();

$.extend($.easing,
 {
     easeInOutQuad: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t + b;
        return -c/2 * ((--t)*(t-2) - 1) + b;
    },
    easeOutCirc: function (x, t, b, c, d) {
        return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
    },
    easeInOutElastic: function (x, t, b, c, d) {
        var s=1.70158;var p=0;var a=c;
        if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
        if (a < Math.abs(c)) { a=c; var s=p/4; }
        else var s = p/(2*Math.PI) * Math.asin (c/a);
        if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
        return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
    }

    });
//EXPAND PAGE DIV CONTENT SLIDE
$(".tab_item").mouseover(function() {
            var $this = $(this);
            $this.parent().find(".moving_bg").stop().animate({
                left: $this.position()['left']
            }, { duration: 500 });
    });
var TabbedContent = {
    current: {i:null, obj:null},
    init: function() {
        $(".tab_item").click(function() {
            var $this = $(this);
            TabbedContent.slideContent($this);
        });
        TabbedContent.current.i = 0;
        TabbedContent.current.obj = $(".tabslider li").eq(0);
    },
    slideContent: function($obj) {
        var $container = $obj.closest(".tabbed_content");
        var $tabslider = $container.find(".tabslider");
        var i = $obj.index() - 1;
        var $lis = $tabslider.find("li");
        $new = $lis.eq(i);
        if(i === TabbedContent.current.i) {
            return;
        }
        $lis.hide().filter($new.add(TabbedContent.current.obj)).show();
        var margin_1 = (i > TabbedContent.current.i) ? 0 : -$new.width();
        var margin_2 = (i < TabbedContent.current.i) ? 0 : -$new.width();
        $tabslider.stop().css({
            marginLeft: margin_1 + "px"
        }).animate({
            marginLeft: margin_2 + "px"
        }, 800);
        TabbedContent.current.i = i;
        TabbedContent.current.obj = $new;
    }
}
TabbedContent.init();

// BIG BOX SEARCH LEAVE
$(".searchbox").blur(function() {
    var searchbox = this,
        searchbox_val = $.trim( this.value );
    if (searchbox_val.length > 0) {
        $(searchbox).addClass("blur");
        return true;
    } else {
        $(searchbox).removeClass("blur");
        return false;
    }
});

// SELECT BOX LEAVE 
$(".selectlist").blur(function() {
    var selectlist = this,
        selectlist_val = $.trim( this.value );
    if (selectlist_val.length > 0) {
        $(selectlist).addClass("blur");
        return true;
    } else {
        $(selectlist).removeClass("blur");
        return false;
    }
});
/* TEXT AREA EXPAND */
$('#textareae').elastic();
/* END */

});
/* ALERT BOXES AND DIALOGS (Can Use: Name, ClassName = elements + Val.[0]/ Id = element, NO [0].
--------------------------------*/
function check_searchdomain_input() { // ALERT - Domain Search       
    var searchdomain_val = document.getElementById("searchdomain");
    if (searchdomain_val.value.length > 0) {
    return true;
    } else {
    $( "#dialog_domainsearch" ).dialog();
    return false;
    }
}

function check_menudomain_input() { // ALERT -  Menu domain search   
    var menudomain_val = document.getElementById("menudomain");
    if (menudomain_val.value.length > 0) {
    return true;
    } else{
    $( "#dialog_domainsearch" ).dialog();
    return false;
    }
}

function check_login_input() { // ALERT Login - Enter username       
    var login_val = document.getElementsByName("username");
    if (login_val[0].value.length > 0) {
    return true;
    } else {
    $( "#dialog_login" ).dialog();
    return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:43:45.827

所以这不起作用？

```
$(document).ready(function() {
$('ol').accordion();
// TOGGLE MENU ~ CLICK DIV
$('div.logo_menu').click(function() {
$('#logo_menu ul').show('medium');
return false;
//all the rest 
```

# android - ADK eclipse中的这个指标是什么

> ID：14823570
> 
> 赞同：2
> 
> 时间：2013-02-12T00:32:27.090
> 
> 标签：android, eclipse, adk

关于 ADK 和 Eclipse 的快速问题，eclipse 右下角的这个指示器看起来像一个永远不会消失的进度条是什么？我的通常说“161 中的 81”并弹跳但永远不会消失。

抱歉，我知道这是一个非常基本的问题，但我很好奇它的用途。

干杯，

![在此处输入图像描述](../Images/0afc62562baba8821ff4bcb0718812d9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:25:03.053

它基本上显示了堆状态；垃圾桶图标用于垃圾收集。如果单击该图标，则系统将运行以下代码

```
System.gc();
System.runFinalization(); 
```

要关闭它，首选项 -> 常规 -> 取消选中“显示堆状态”复选框。

# linux - TCP 协议的代理

> ID：14823572
> 
> 赞同：0
> 
> 时间：2013-02-12T00:32:48.303
> 
> 标签：linux, networking, tcp

我的公司正在两台服务器之间通过 TCP 使用私有协议，现在他们询问我们是否可以侦听此协议并尝试阻止它的一些消息。

我正在考虑使用[Simpleproxy](http://sourceforge.net/projects/simpleproxy/)，但我不确定如何用这个来收听协议，而且我不确定这个实现有多健壮。

有什么实现或设计我可以用来做这件事吗？

这个想法是我需要在服务器和客户端之间的中间并传递/转发消息，除非我向服务器发送失败响应，因为我有一些特定的规则不接受消息。

服务器将是 Linux。

假设有 server1 将连接到 server2，我的服务器将被命名为 middle_server，因此 server1 将更改其配置并连接到我，然后 middle_server 将发送到 server2，然后 middle_server 将接收来自 server2 的响应并发送它返回 server1 如下图所示，

```
server1 --ask--> middle_server --ask---> server2
server2 --response--> middle_server --response---> server2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:04:37.520

我不确定是否有任何实际的包可以做你想做的事，但你应该能够使用 iptables 来阻止使用 string 模块的特定字符串。如果字符串碰巧在多个数据包中被分解，我不太确定这将如何工作，但你可以试一试。

[关于使用 iptables 过滤 http 请求的 stackexchange 问题](https://unix.stackexchange.com/questions/28851/iptables-to-block-https-websites)

# database-design - 复合键的垂直分区

> ID：14823575
> 
> 赞同：0
> 
> 时间：2013-02-12T00:33:12.947
> 
> 标签：database-design, composite-key

我必须每天跟踪不同资源组合的价值。因此，执行此操作的表可能如下所示：

```
CREATE TABLE `data` (
  `id` INT UNSIGNED NULL PRIMARY KEY AUTO_INCREMENT,
  `datetime` DATETIME NOT NULL,
  `res1` INT UNSIGNED NOT NULL,
  `res2` INT UNSIGNED NOT NULL,
  `res3` INT UNSIGNED NOT NULL,
  `res4` INT UNSIGNED NOT NULL,
  `res5` INT UNSIGNED NOT NULL,
  `value` DECIMAL(10,0) NOT NULL,
  UNIQUE INDEX `datetime_res1_to_res5` (`datetime`, `res1`, `res2`, `res3`, `res4`, `res5`)
) 
```

其中`res1`through to`res5`是它们各自表的外键。

该表将包含很多行——将轻松破解 2000 万行。

我很好奇的是我是否应该将外键组合放入一个单独的表中，这样我就有两个这样的表：

```
CREATE TABLE `data` (
  `id` INT UNSIGNED NULL PRIMARY KEY AUTO_INCREMENT,
  `datetime` DATETIME NOT NULL,
  `superKeys_id` INT UNSIGNED NOT NULL,
  `value` DECIMAL(10,0) NOT NULL,
  UNIQUE INDEX `datetime_superKeys_id` (`datetime`, `superKeys_id`)
)

CREATE TABLE `superKeys` (
  `id` INT UNSIGNED NULL PRIMARY KEY AUTO_INCREMENT,
  `res1` INT UNSIGNED NOT NULL,
  `res2` INT UNSIGNED NOT NULL,
  `res3` INT UNSIGNED NOT NULL,
  `res4` INT UNSIGNED NOT NULL,
  `res5` INT UNSIGNED NOT NULL,
  UNIQUE INDEX `res1_to_res5` (`res1`, `res2`, `res3`, `res4`, `res5`)
) 
```

哪里`data`。`superKeys_id`是 的外键`superKeys`。`id`.

这将显着减小表的大小。但由于我不知道的原因，我不确定这是否是一个坏主意。显然，选择将需要一个连接来获取数据的细分，这会增加一点开销，但我不认为这会是一个问题。

在我的实际情况中，其中一个资源是 user_id 并且我经常需要对用户的值求和，所以我可能会保留这样一个列`data`而不是为了不让它成为`superKeys`表的一部分加入每个查询。然后，仅当我需要对其他资源的值求和时才使用连接，这些资源将不那么频繁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:41:44.900

它不会减少*数据*的大小。您必须在一个表中存储 2000 万行数据，在另一个表中存储 2000 万行超级键。

五个整数是 40 个字节。乘以 2000 万--800 兆字节，加上一个日期时间列和一个小数。整张桌子可以放入我*上网本*的 RAM 中。

保留表“数据”。删除代理键。

# iphone - NSMutableDictionary + NSMutableArray 崩溃

> ID：14823579
> 
> 赞同：0
> 
> 时间：2013-02-12T00:33:24.883
> 
> 标签：iphone, objective-c, nsmutablearray, nsmutabledictionary

我有一个名为“myScheduleFullDictionary”的 NSMutableDictionary，设置如下：

```
 KEY             VALUE
"Day 1"         An NSMutableArray of NSMutableDictionaries
"Day 2"         An NSMutableArray of NSMutableDictionaries
"Day 3"         An NSMutableArray of NSMutableDictionaries 
```

等等

我正在尝试解析它 - 基本上抓住其中一个 MutableArrays 作为其中一个键的值。这是我的代码：

```
// First I make a mutableCopy of the entire Dictionary:
NSMutableDictionary *copyOfMyScheduleDictionary = [myScheduleFullDictionary mutableCopy];

// Next I grab & sort all the KEYS from it:
NSArray *dayKeysArray = [[copyOfMyScheduleDictionary allKeys] sortedArrayUsingSelector:@selector(compare:)];

// I set up an NSMutableArray to hold the MutableArray I want to grab: 
NSMutableArray *sessionsInThatDayArray = [[NSMutableArray alloc] init];

// Then I iterate through the KEYs and compare each to the one I'm searching for:
for (int i = 0; i < [dayKeysArray count]; i++) {

    NSString *currentDayKey = [dayKeysArray objectAtIndex:i];        
    if ([currentDayKey isEqualToString: targetDayString]) {
        NSLog(@"FOUND MATCH!!!");

        // I log out the NSMutableArray I found - which works perfectly:
        NSLog(@"found array is: %@", [copyOfMyScheduleDictionary objectForKey:currentDayKey]);

        // But when I try to actually grab it, everything crashes:
        sessionsInThatDayArray = [copyOfMyScheduleDictionary objectForKey:currentDayKey];
        break;
    }
} 
```

我得到的错误是：

```
-[__NSDictionaryM name]: unrecognized selector sent to instance 0x1c5fb2d0 
```

不知道为什么将“名称”指出为“无法识别的选择器”。“名称”是我声明并正在使用的“会话”类的 NSString 属性 - 这可能*以*某种方式相关吗？

有什么见解吗？

编辑：

这是我的“SessionObject”类定义：

```
@interface SessionObject : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *speaker;
@property (nonatomic, strong) NSString *location;
@property (nonatomic, strong) NSDate *startTime, *endTime;
@property (nonatomic, strong) NSString *notes;
@property (nonatomic, strong) NSString *dayOfConference;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:16:10.833

```
-[__NSDictionaryM name]: unrecognized selector sent to instance 0x1c5fb2d0 
```

这意味着您正在尝试调用`name`where`NSMutableDictionary`您应该在 class 的对象上调用它`SessionObject`。检查您调用类似`myObject.name`or的行`[myObject name]`，看看是否`myObject`属于 type`SessionObject`和 not `NSMutableDictionary`。

这里`__NSDictionaryM`表示`NSMutableDictionary`类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T19:06:30.763

我不确定你的错误来自哪里 - 但你在那里做什么？你为什么不写

```
sessionsInThatDayArray = [myScheduleFullDictionary objectForKey:targetDayString]; 
```

？？？这就是 NSDictionary 的用途——你不需要手动搜索，你只需调用方法来查找密钥。取而代之的是，您复制了字典，提取了所有键，对键进行了排序，逐个遍历它们直到找到它-然后调用了 objectForKey ！！！

除此之外，在调试器中为所有 Objective-C 异常设置断点。当调用有问题的代码时它会停止，所以不需要大海捞针。

# opengl - 3D 数学 - 仅将位置保持在一定码数内

> ID：14823582
> 
> 赞同：5
> 
> 时间：2013-02-12T00:33:40.403
> 
> 标签：opengl, 3d, unity3d, linear-algebra

我试图从大量职位中确定如何显着缩小我的名单。

现在我有大约 3000 个位置（x，y，z），我想基本上保持彼此相距最远的位置（我不需要保持 100 个位置都在 2 码半径范围内） ）。

除了使用蛮力方法和字面上进行 3000^2 比较之外，有没有人知道如何进一步缩小这个列表？

我对如何从数学角度处理这个问题有点困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T00:51:41.727

好吧，我不记得这个算法的名字了，但我会告诉你一个有趣的技术来处理这个问题。我假设在 3D 环境中存在点的半随机散射。

**简单版：分而治之**

1.  将您的空间划分为 3D 立方体网格。每个立方体的每边都是 X 码。
2.  声明一个多维数组 [x,y,z]，这样您的网格中的每个立方体都有一个元素。
3.  数组的每个元素都应该是一个顶点或对顶点 (x,y,z) 结构的引用，并且每个元素都应该默认为 NULL
4.  遍历数据集中的每个顶点，确定顶点落在哪个立方体中。
    *   如何？好吧，您可能会假设 (5.5, 8.2, 9.1) 顶点属于 MyCubes[5,8,9]，假设 X（立方体边长）的大小为 1。注意：我只是将小数/浮点数截断为确定哪个立方体。
5.  检查该相关立方体是否已被顶点占用。检查： If MyCubes[5,8,9] == NULL then (inject my vertex) else (什么也不做，扔掉！当场拍下，伙计)

**让我们节省一些内存**

这将一次性为您提供一个非常简化的数据集，但代价是可能会占用大量内存。

那么，如何在不使用太多内存的情况下做到这一点呢？

我会使用一个哈希表，这样我的键就是上面示例中的 Grid-Cube 坐标 (5,8,9)。

```
 If MyHashTable.contains({5,8,9}) then DoNothing else InsertCurrentVertex(...) 
```

现在，您将拥有一个内存使用量最少的一次性解决方案（没有具有潜在大量空立方体的巨大数组。成本是多少？好吧，设置结构/类的编程时间，以便您可以执行 .包含 HashTable 中的操作（或您的语言等效项）

**嘿，我的结果很厚实！**

没错，因为我们得到了适合任何立方体的第一个结果。平均而言，我们将实现顶点之间的 X 分离，但正如您现在所知道的，一些顶点仍然会彼此靠近（在立方体的边缘）。

那么，我们该如何处理呢？好吧，让我们回到顶部的数组方法（内存密集型！）。

除了只检查一个顶点是否已经在有问题的立方体中，还可以执行其他检查：

```
 If Not ThisCubeIsTaken()
    For each SurroundingCube
      If not Is_Your_Vertex_Sufficiently_Far_Away_From_Me()
         exit_loop_and_outer_if_statement()
      end if
    Next
    //Ok, we got here, we can add the vertex to the current cube because the cube is not only available, but the neighbors are far enough away from me
 End If 
```

我想你可能会看到它的美妙之处，因为如果你有一个 3D 数组，就很容易得到相邻的立方体。

如果您像这样进行一些平滑处理，您可能可以强制执行“如果使用 0.25X，则不要添加”策略或其他内容。您不必太严格即可获得明显的平滑效果。

**还是太粗了，我要顺滑**

在此变体中，我们将更改是否允许顶点驻留在立方体中的限定操作。

```
 If TheCube is empty OR if ThisVertex is closer to the center of TheCube than the Cube's current vertex
    InsertVertex (overwrite any existing vertex in the cube
 End If 
```

请注意，我们不必为此执行邻居检测。我们只是针对每个立方体的中心进行优化。

如果您愿意，可以将此变体与之前的变体合并。

**作弊模式**

对于这种情况下的某些人，您可以简单地从数据集中随机选择 10%，这将是一个足够好的简化。但是，它会非常厚实，一些点非常接近。从好的方面来说，最多需要几分钟。我不推荐它，除非你是原型。

# tomcat - 如何在不重新启动 Tomcat 的情况下更改 HTML/JS/CSS？

> ID：14823584
> 
> 赞同：18
> 
> 时间：2013-02-12T00:33:51.233
> 
> 标签：tomcat, tomcat7

是否可以配置 Tomcat，使其在开发时在单独的位置查找我的“webapp”目录？

我的 git 源代码在一个目录中，而 tomcat 安装在另一个目录中。我不想每次对 CSS 或 Javascript 进行简单更改时都必须在两个地方进行更改，或者手动复制文件，或者重新构建/部署。

* * *

**编辑**- 2013 年 2 月 21 日

不幸的是，这些建议都没有奏效，我怀疑这可能是因为我没有提供足够的信息来说明我是如何布置的。

我在我的主目录（我在 Mac 上）的一个名为“开发”的目录中安装了 Tomcat。

```
/Users/dbrogdon/Development/apache-tomcat-7.0.35 
```

我旁边有我的 git 源。

```
/Users/dbrogdon/Development/myproject 
```

在 myproject 目录中，我的实际 Web 文件位于：

```
/Users/dbrogdon/Development/myproject/application/appname/src/main/webapp 
```

当我编译时，我将 appname.war 放入

```
/Users/dbrogdon/Development/apache-tomcat-7.0.35/webapps 
```

根据该更新信息，我应该在 my`conf/server.xml`或中提供什么作为我的 docBase `conf/Catalina/localhost/appname.xml`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:51:00.583

在您的tomcat 安装中，在“conf”目录下，您将找到一个文件server.xml。在该文件中搜索标签“主机”。你会发现类似

```
<Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"> 
```

**将appbase**更改为您的 Web 应用程序目录的父文件夹。假设您的应用程序“myapp”目录位于 c:\git\source 下，将 appBase 设置为“c:\git\source”

重启你的tomcat。现在，您的 tomcat 将**在**“c:\git\source”中查找它必须部署的所有 Web 应用程序，而不是**webapps**

链接到描述**appbase**使用 的 tomcat 配置[http://tomcat.apache.org/tomcat-7.0-doc/config/host.html](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html)

> 此虚拟主机的 Application Base 目录。这是一个目录的路径名，其中可能包含要部署在此虚拟主机上的 Web 应用程序。**您可以指定绝对路径名**， **或相对于 $CATALINA_BASE 目录的路径名**。有关自动识别和部署 Web 应用程序的更多信息，请参阅自动应用程序部署。**如果未指定，**将使用 默认的*webapps*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:24:37.600

做你期待的事情的可能方法

*   配置 Apache Web 服务器以提供静态内容并将动态内容路由到 Tomcat 服务器。这是使用 mod jk 连接器完成的，该连接器将 JSP 请求代理到 tomcat，但通过传递此代理来提供静态内容，如图像、js 等

完成使用`worker.properties`

```
<Location *>
SetHandler jakarta-servlet
SetEnvIf REQUEST_URI \.(html|png|gif|jpg|css|js)$ no-jk
</Location> 
```

这可能是不可取的，因为它会改变您的所有部署架构

*   Zenil 提出的在您的 conf 中配置 server.xml 的解决方案

限制将是部署在您的 tomcat 中的所有应用程序都将从`D:/newWebApps`. 这可能不符合您的目的，因为您只需要将源存储库中的应用程序与您的 tomcat 映射。

*   我认为在给定的情况下，以下内容更适合您

创建文件`applicationName.xml`并定义以下内容

```
<?xml version="1.0" encoding="UTF-8"?>
<Context docBase="D:\newWebApps" path="/js/*" /> 
```

并将此文件放在您的`\conf\Catalina\localhost`目录中。tomcat 会自动选择这个

现在您可以通过以下方式访问它

```
http://servername:8080/applicationName/js/anything.js 
```

有关在 tomcat 默认目录之外设置 docBase 的更多详细信息，请参阅此[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T17:20:14.877

You can use a local Apache server, and rewrite the HTML/CSS/JS/ files to be picked up from a separate location.

See this question for an example how to rewrite JS files: [HOWTO: rewrite requests for images, css and js to different folders for each application?](https://stackoverflow.com/questions/1056287/howto-rewrite-requests-for-images-css-and-js-to-different-folders-for-each-app)

Now you can configure Apache to go to Tomcat for the tomcat URLs, but perform these rewrites in the apache config and css/js/html files can be picked up from a different folder entirely.

You might be able to use this Tomcat Filter: [http://tuckey.org/urlrewrite/](http://tuckey.org/urlrewrite/), though you would still need an apache web server to host the static files, you could use Tomcat to access the main tomcat URLs and add redirects to your apache instance for all the static files. This saves having to configure mod_jk or something with Apache.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T15:54:59.457

更新 server.xml 并修改应用程序的“主机”，有两个目的：

**1）**指向您的 git 源目录，以便 tomcat 从中启动您的应用程序。这将避免必须在两个地方进行更改或复制更改。

**需要更改**：更新应用程序的“主机”并将“appBase”设置为您的 git 源目录。

```
<Host name="localhost"  appBase="/Users/dbrogdon/Development/myproject/application/appname/src/main/webapp"
            unpackWARs="true" autoDeploy="true"> 
```

**2)**添加一个单独的位置来提供您的静态内容。这将帮助您避免每次更改 css/js 时重新启动 tomcat

**需要更改**：添加上下文以提供您的 js 和 css

```
<Host name="localhost"  appBase="/Users/dbrogdon/Development/myproject/application/appname/src/main/webapp"
            unpackWARs="true" autoDeploy="true">
    <Context docBase="/Users/dbrogdon/Development/myproject/application/appname/src/main/webapp/js/" path="/js/*" />
    <Context docBase="/Users/dbrogdon/Development/myproject/application/appname/src/main/webapp/css/" path="/css/*" />
</Host> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-12T17:19:33.127

如果我正确理解了这个问题，您只希望 tomcat 的 webapps/MY_WEBAPP 指向您签出 git 存储库的内部，这样您就可以“一次”修改它们。假设您只是在编辑静态资源，我认为 tomcat 不会缓存它们，因此您可以通过创建从 tomcat 的 webapps/ 到您的 git 文件夹位置的符号链接来摆脱困境。或者从 webapps/x/y 符号链接回到你的 git 等效文件夹（甚至是特定文件）。

我也听说过tomcat可以“热交换”JSP类和静态的，所以如果它是相关的：[how to enable hot deploy in tomcat](https://stackoverflow.com/questions/32459047/how-to-enable-hot-deploy-in-tomcat/46715425)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T17:18:21.977

通过定义额外的上下文应该可以使用单独的位置。请参阅[http://www.coderanch.com/t/474965/Tomcat/Deploying-application-webapps-tomcat](http://www.coderanch.com/t/474965/Tomcat/Deploying-application-webapps-tomcat)和[http://tomcat.apache.org/tomcat-6.0-doc/config/context.html](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-12T00:56:24.443

在IDE中打开git源码时，添加tomcat服务器后，可以配置tomcat的'Runtime Environment'引用到你的tomcat目录下的那个。

# module - Verilog 模块警告

> ID：14823586
> 
> 赞同：0
> 
> 时间：2013-02-12T00:33:53.907
> 
> 标签：module, warnings, verilog

我写了一个 4 位的多路复用器作为输入，1 位作为输出。我有几种方法，使用案例，如果等，但我不断收到此错误：

```
WARNING:PhysDesignRules:367 - The signal <A<2>_IBUF> is incomplete. The signal
   does not drive any load pins in the design.
WARNING:Par:288 - The signal A<2>_IBUF has no load.  PAR will not attempt to route this signal.
WARNING:Par:283 - There are 1 loadless signals in this design. This design will cause Bitgen to issue DRC warnings. 
```

当我在我的电路设计卡（Basys）中编程时，一切正常，但分配给 A[2] 的开关不起作用，这是我的模块：

```
module Multi_4_1(
    input [3:0] A,
    input [1:0] S,
    output Z
    );

     wire w1, w2;

     Multi_2_1 a(.A(A[0]), .B(A[1]), .SEL(S[0]), .F(w1));
    Multi_2_1 b(.A(A[2]), .B(A[3]), .SEL(S[1]), .F(w2));
     Multi_2_1 c(.A(w1), .B(w2), .SEL(S[1]), .F(Z));

endmodule

module Multi_2_1(
    input A,
    input B,
    input SEL,
    output F
    );

     assign F = (~SEL&A)|(SEL&B);

endmodule 
```

这是我将终端分配给卡的地方，但是我已经在另一个项目中尝试过它，它工作正常

```
NET "A[3]" LOC ="B4";   # sw3
NET "A[2]" LOC ="K3";
NET "A[1]" LOC ="L3";   # sw1
NET "A[0]" LOC ="P11";  # sw0, el de la derecha

NET "S[0]" LOC ="G3";   # sw4
NET "S[1]" LOC ="F3";   # sw5

NET "Z" LOC ="M5";   # L0, el de la derecha 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:47:52.177

您的多路复用器设计不正确。

这是你的真值表：

```
S=00 => Z=A[0]
S=01 => Z=A[1]
S=10 => Z=A[3]
S=11 => Z=A[3] 
```

因此 A[2] 永远不能成为输出，因此它被“卸载”，您的综合工具会警告您这一点。您可能打算让 Mux b 使用`sel(S[0])`.

# reporting-services - 查询驱动的 SSRS 矩阵行和列

> ID：14823587
> 
> 赞同：3
> 
> 时间：2013-02-12T00:34:04.650
> 
> 标签：reporting-services, matrix, group-by

有没有办法创建一个数据表/矩阵，其中行和列组是从一个单独的查询/数据集而不是主报告数据驱动的？

以“Person”的构造为例，其列： - name - gender - marital_status

我希望矩阵的列始终包含所有“性别”，并且无论查询条件如何，行始终包含所有“婚姻状况”，并且行/列的交集是记录的总计数。

例如，查询可能是`select * from person where name = 'aaron'`

返回的所有记录都是“男性”，但我仍然想包含“女性”列（其中“女性”列中的所有计数均为 0）

我希望输出看起来像：

```
Marital Status:  ~ Male ~ Female
Single ~ 5 ~ 0
Married ~ 8 ~ 0
Defacto ~ 2 ~ 0
... 
```

我不想做一个虚拟查询，例如：

```
select 'male' as gender, null as name, null as marital_status
union all 
select 'female' as gender, null as name, null as marital_status
union all
select * from person where [ ...  criteria] 
```

如果可能的话，最好有 3 个数据集来驱动矩阵......

*   “行数据”包含`select distinct marital_status from person`
*   "ColumnData" 包含`select distinct gender from person`, 和
*   “MainData”包含`select * from person where [...criteria]

有没有办法让矩阵控件对行/列组使用单独的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:36:23.100

为什么这么难？想得更容易...在 SQL 中创建查询，如下所示：

```
WITH
Gender AS
(
    SELECT 1 AS GenderID, 'Male' AS GenderName
    UNION ALL
    SELECT 2 AS GenderID, 'Female' AS GenderName
),
MartialStatus AS
(
    SELECT 1 AS MartialStatusID, 'Single' AS MStatus
    UNION
    SELECT 2 AS MartialStatusID, 'Married' AS MStatus
),
Persons AS
(
    SELECT 1 AS PersonID, 'John' AS Name, 1 AS GenderID, 2 AS MartialStatusID
    UNION ALL
    SELECT 2 AS PersonID, 'Linda' AS Name, 2 AS GenderID, 1 AS MartialStatusID
    UNION ALL
    SELECT 3 AS PersonID, 'Mike' AS Name, 1 AS GenderID, 1 AS MartialStatusID
    UNION ALL
    SELECT 4 AS PersonID, 'Jenna' AS Name, 2 AS GenderID, 1 AS MartialStatusID  
)
SELECT Gender.GenderName, MartialStatus.MStatus, Persons.PersonID, Persons.Name
FROM Gender
CROSS JOIN MartialStatus
LEFT JOIN Persons ON Persons.GenderID = Gender.GenderID AND 
                     Persons.MartialStatusID = MartialStatus.MartialStatusID 
```

产生结果：

```
Male    Single   3      Mike
Female  Single   2      Linda
Female  Single   4      Jenna
Male    Married  1      John
Female  Married  NULL    NULL 
```

然后在矩阵映射列和行中的 BIDS 中： ![在此处输入图像描述](../Images/314a1cc1c7d23180ff50039b1a20de5b.png)

`=IIF(Sum(Fields!PersonID.Value) IS Nothing, 0, Sum(Fields!PersonID.Value))`如果我们没有人员，这里的表达式用于打印 0。你得到你想要的结果：

![在此处输入图像描述](../Images/c859f3dda0c9cdef699ba2bf5a1d28b5.png)

这将更容易和更好的性能。

# c# - SharePoint 2010：如何从自定义计时器作业访问任何列表？

> ID：14823590
> 
> 赞同：2
> 
> 时间：2013-02-12T00:34:22.770
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-list, sharepoint-timer-job

我正在用 C# 开发一个**SharePoint 2010 计时器作业**，它更新从 SQL 数据库中检索到的员工状态（无论他们当前是否有空或不在工作）信息，以便更新并存储在员工 SharePoint 列表中（所需的方法是能够访问我选择的任何列表，而不仅仅是一个指定/硬编码的列表）。我创建了一个 SharePoint 空项目，其唯一功能是使用我的事件接收器类在 FeatureActivated 和 FeatureDeactived 方法中使用自定义代码的计时器作业。计时器作业类的 Execute 方法使用 SqlClient 获取数据并将其存储到一个字典对象中，该字典对象的键值为员工 ID，值为状态。然后使用该字典检索员工 SharePoint 列表中的员工记录并更新状态。

**我的问题是**，无论我为计时器作业选择什么范围，我都无法访问我想要的任何 SharePoint 列表。我已经尝试使用 SPWeb 和 SPSite 对列表的 URL 进行硬编码，几乎任何东西。我已经检查了我的站点的站点集合，并且我有 2 个站点集合（“/”、“testsitecollection”），而第二个根本没有使用。

例如" **SPWeb** web = site.OpenWeb(); **SPList** list = web.Lists["Employees"];

[抛出异常：“在http://www.mysite](http://www.mysite)找不到列表“员工” ”

我想知道是否有人对此事有任何意见。在源代码方面，我遵循了网络上的许多示例，例如：[http ://www.andrewconnell.com/blog/articles/CreatingCustomSharePointTimerJobs.aspx](http://www.andrewconnell.com/blog/articles/CreatingCustomSharePointTimerJobs.aspx)

我在 Web 上找到的所有示例，用于在前端站点上更新自定义计时器作业列表，例如任务列表。

感谢任何添加输入的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T04:33:32.563

我有同样的问题，我发现它对我有用：您应该重新启动 OWSTimer.exe（控制面板中的窗口服务--> 管理工具--> 服务）。您可能正在应用更改，但 Sharepoint 计时器服务尚未获取最新代码

# java - java tie break 中用于删除重复元素的优先级队列

> ID：14823591
> 
> 赞同：-1
> 
> 时间：2013-02-12T00:34:30.080
> 
> 标签：java, priority-queue

如果 中有多个具有相同值的元素，`PriorityQueue`则从队列中删除哪个元素被弹出？弹出这些相同元素是否有任何特定顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:41:47.010

没有具体的顺序。Javadoc 指定：

> 如果多个元素以最低值绑定，则头部是这些元素之一——绑定被任意打破。

# symfony - Symfony2 选择选择 ajax

> ID：14823592
> 
> 赞同：4
> 
> 时间：2013-02-12T00:34:37.230
> 
> 标签：symfony, symfony-2.1, symfony-forms

目前我还没有找到任何全面的答案.. 我想了解如何根据另一个选择的选择来更改选择选项。例如。类别一对多子类别

我从 Category 和 SubCategory 中选择一个选项选择内容更改。你能帮我一把吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:35:58.897

首先，您需要使用路由 url 将控件传递给使用 jquery 的操作，例如

```
 $('# category id').change(function(){
                 var Id =  $('#category id').val();          
                 var url = Routing.generate('route_to_retrieve_subcategory', { 'Id': Id  });

                $.post(url, 
                { 'Id': Id  
                },function(data){
                  $('#subcategoryId').html(data);
                 },"text");
            }
        }); 
```

在控制器中

```
/**
     * @Route("subcategory/{Id}",name="route_to_retrieve_subcategory" )
     * @Template()
     */
    public function getSubcategoryAction($Id)
    {
          //code
         return new Response($subcategoryList, 200);

    } 
```

注意：路由必须在 routing.yml 文件中列出

```
route_to_retrieve_subcategory:
    pattern: /route_to_retrieve_subcategory/{Id}
    defaults: {_controller: YourBundle:YourController:getSubcategory}
    options:
        expose: true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:31:53.283

最后我决定使用这种方法：javascript：

```
$('select[name*="[category][category]"]').prop('selected', true).change(function(){
             var Id =  $(this).val();          
             var url = Routing.generate('route_to_retrieve_subcategory');

            $.post(url, 
            { 'idCat': Id  
            }, function(results){
                var sub = $('select[name*="[category][category]"]').parent().find('select[name*="[subCategory][]"]');
                sub.empty();
                $.each(results , function(key, value) { 
                    sub
                    .append($("<option></option>")
                    .attr("value",value.id)
                    .text(value.subCategory)); 
                });

       });
    }); 
```

控制器：

```
public function getSubcategoryAction(Request $request)
{
      $Id = $request->get('idCat');
      $em = $this->getDoctrine()->getManager();
      $entities = $em->getRepository('MyBusinessBundle:SubCategories')->findSubCategories($Id);
      $output = array();
      foreach ($entities as $member) {
          $output[] = array(
              'id' => $member->getId(),
              'subCategory' => $member->getSubCategory(),
          );
      }

      $response = new Response();
      $response->headers->set('Content-Type', 'application/json');
      $response->setContent(json_encode($output));
      return $response;
} 
```

路线：

```
route_to_retrieve_subcategory:
pattern: /route_to_retrieve_subcategory
defaults: { _controller: "MyBusinessBundle:ajax:getSubcategory" }
options:
    expose: true 
```

我宁愿不通过课程传参，感觉没有意义！

非常感谢 shrujan shetty 的灵感。

# time - 加法时间复杂度解释

> ID：14823596
> 
> 赞同：1
> 
> 时间：2013-02-12T00:35:54.573
> 
> 标签：time, complexity-theory

如果我有 O(logN) 的东西并将其添加到 O(1) 的东西中，整体复杂性仍然是 logN 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:45:29.123

通常大 O 表示法是一个近似值。例如，您可能会说`logN`实际复杂度为`4logN + 7`. 这仍然被认为是`logN`时间，因为主要因素是`N`变化的行为。

如果你有一些算法是`N^2 + logN`，那么最重要的项是`N^2`并且`logN`随着增加而迅速变得不重要`N`......在这种情况下，你可以简单地说它是`O(N^2)`因为它描述了算法的特征时间复杂度。

所以这取决于你的需求。如果您只需要描述算法的性质，那么`logN`就足够了。如果您需要对其中的每个部分进行完全分类或与相似但优化的算法进行比较，则添加所有术语。

# iphone - 尝试复制时 JSONKit 无效争论

> ID：14823601
> 
> 赞同：1
> 
> 时间：2013-02-12T00:36:29.763
> 
> 标签：iphone, ios6, jsonkit

我正在使用 JSONKit 作为 NSMutableDictionary 解析 JSON 数据。

```
NSString *str = [[NSString alloc] initWithData:self.responseData encoding:NSUTF8StringEncoding];

NSMutableDictionary *jsonResponse = [self.responseData objectFromJSONData];

NSMutableDictionary *newData = [[NSMutableDictionary alloc] init];
[newData addEntriesFromDictionary:[jsonResponse mutableCopy]]; 
```

当我这样做时，我收到此错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSMutableDictionary addEntriesFromDictionary:]: dictionary argument is not an NSDictionary' 
```

我试图找出导致此问题的原因。根据我的其他经验，我知道 jsonResponse 是 JKArray 的一个对象。

我需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:57:35.890

尝试以下操作：

```
id object = [self.responseData objectFromJSONData];
NSLog(@"%@", [object class]); 
```

您的响应很可能是一个数组而不是字典。

* * *

如果您真的想将数组转换为字典，您可以使用自定义键执行以下操作：

```
NSArray *array = [self.responseData objectFromJSONData];
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObject:array forKey:@"posts"]; 
```

如果您可以向我展示您的数组的内容，也许会有一些更好的选择。

# php - Facebook 编码技术

> ID：14823603
> 
> 赞同：0
> 
> 时间：2013-02-12T00:36:54.780
> 
> 标签：php, facebook, filesystems

为了了解一点 Facebook 和他们的编码技术，我查看了他们的源代码。这是我发现的一件事：

```
<link rel="stylesheet" href="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yN/r/JUrfX0ucXVq.css" />
<link rel="stylesheet" href="https://fbstatic-a.akamaihd.net/rsrc.php/v2/y2/r/gpxPzqCou0g.css" />
<link rel="stylesheet" href="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/OWwnO_yMqhK.css" /> 
```

我的问题是关于 Facebook 如何组成他们的目录结构和文件名。显然，css 文件的名称不是为了可读性。这些随机文件名背后有什么原因吗？有人可以提供有关此的任何信息吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:39:36.907

CSS 文件被赋予随机文件名以防止浏览器缓存它们。

当浏览器缓存一个资源时，它会下载该文件并将其保存在用户的计算机上，以防止同一个文件被多次下载。问题是，如果您更改 CSS 文件并保持文件名相同，浏览器将继续使用该文件的缓存版本，并且不会下载更新的版本。通过为 CSS 文件提供唯一名称，浏览器将被迫下载它们。

这类似于对 CSS 文件执行此操作：

```
<link rel="stylesheet" href="style-v1.css" />
<link rel="stylesheet" href="style-v2.css" />
<link rel="stylesheet" href="style-v3.css" />
... 
```

# html - 灯箱位置

> ID：14823608
> 
> 赞同：3
> 
> 时间：2013-02-12T00:37:48.073
> 
> 标签：html, css

我有一个很好用的灯箱代码！您单击一个按钮，然后会出现黑屏和内容框的叠加。`white_content`我想知道是否有一种方法可以根据用户向下滚动页面的距离使灯箱或下面的 CSS 出现在屏幕上。

基本上，我想让它`white_content`出现在可视屏幕的中间。

**[http://s1309.beta.photobucket.com/user/mievan123/library/Light%20Box](http://s1309.beta.photobucket.com/user/mievan123/library/Light%20Box)**

*   第一张图片显示了以页面为中心的灯箱，这就是我想要的。我一直滚动到页面底部。

    [您也可以在http://www.green-panda.com/solutions.html](http://www.green-panda.com/solutions.html)看到它的实际效果

*   第二张图片显示了页面上几乎看不到的灯箱。如您所见，我向上滚动了一点。当我在那个位置时，红色轮廓是我希望灯箱移动到的位置。

* * *

屏幕录制是否有助于使这个问题更清楚？

下面提供了我的所有代码：

**我的灯箱 CSS**

```
.black_overlay{
    display: none;
    position: fixed;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 100%;
    background-color: black;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=80);
}

.white_content {
    display: none;
    position: absolute;
    top: 50%;
    left: 25%;
    width: 50%;
    height: 50%;
    padding: 16px;
    border: 16px solid green;
    background-color: white;
    z-index:1002;
    overflow: auto;
} 
```

**打开灯箱的脚本**

```
<p align="right">
    <a href="javascript:void(0)" 
       class="button" 
       onclick="document.getElementById('light').style.display='block';
                document.getElementById('fade').style.display='block'"
    >Contact Us</a>
</p> 
```

**实际的灯箱编码**

```
<div id="light" class="white_content">
    This is the lightbox content. 
    <a href="javascript:void(0)" 
       onclick = "document.getElementById('light').style.display='none';
                  document.getElementById('fade').style.display='none'"
    >Close</a>
</div>
<div id="fade" class="black_overlay"></div> 
```

**[JSFiddle](http://jsfiddle.net/Asustaba/474h4/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T01:19:26.477

您不能以百分比为中心的宽度和高度*（至少在不使用 JS 的情况下）*。

但是，您**可以**设置静态高度和宽度并将其居中，如下所示：

使用`top: 50%; left: 50%;`和静态，负上边距和左边距，应该是元素宽度/高度的一半。

```
.white_content {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    margin: -182px 0 0 -182px;
    width: 300px;
    height: 300px;
    padding: 16px;
    border: 16px solid green;
    background-color: white;
    z-index: 1002;
    overflow: auto;
} 
```

**[JSFiddle](http://jsfiddle.net/NoahWetjen/474h4/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:27:55.670

我在[这里为您创建了一个演示](http://jsfiddle.net/siddharthp28/Ym72u/embedded/result/)。我相信这将帮助你实现你想要的。

以下是我在演示中使用的代码：

```
 /* This parent can be any width and height */
.block {
  text-align: center;
}

/* The ghost, nudged to maintain perfect centering */
.block:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

/* The element to be centered, can
   also be of any width and height */ 
.centered {
  display: inline-block;
  vertical-align: middle;
  width: 300px;
} 
```

# haskell - 什么haskell数据结构来存储可变树

> ID：14823611
> 
> 赞同：1
> 
> 时间：2013-02-12T00:38:23.083
> 
> 标签：haskell, dom, data-structures, tree, ioref

我正在考虑用haskell编写一个浏览器。中央数据结构将是表示文档的可变树。除了使用完全由 iorefs 组成的树之外，还有更好的解决方案吗？

我希望避免这样的事情：（`data DomNode = DomNode TagName NodeProperties (IORef DomNode) [IORef DomNode]`标签，属性，父母，孩子）

问题是 javascript 可以保留树中节点的引用，它可以改变（添加子节点、修改属性）它引用的任何节点，以及遍历它的父节点。

**编辑：**

我意识到您需要以某种方式使用可变状态 - 因为您可以保留对从树中删除或在树中移动的节点的引用。如果你通过基于树结构的东西引用了元素，那么这个引用将是无效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:56:25.013

通常的 Haskell 方法是使用不可变的树，并让诸如此类的操作`addChild`返回一个新的、修改过的树，而不是触及现有的树。

在不知道你实际上想用这棵树*做什么*的情况下，我建议这可能是最简单和最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T02:30:11.670

javascript 使用可变引用进行操作是很自然的，因此您迟早必须引入它们（不一定`IORef`是 s，也许是某种位于状态 monad 中的查找表）。

如果对 DOM 的大部分操作都将通过 javascript 执行，那么最好选择自然的数据结构。

不要试图仅仅为了纯度本身而使用纯数据结构。否则，您将完成手工制作的 RAM 仿真 :) 您的任务对我来说是必不可少的，那么为什么不使用 haskell 提供的所有命令式功能呢？

正如 Niklas B. 建议的那样，我不认为拉链对你有很大帮助。通常它们只有一个“光标”，您可以在其中进行变异。（AFAIK 理论上任何数量的游标都是可能的，但实际上它几乎不可用）

# c# - 按其中的对象列表对对象列表进行排序

> ID：14823612
> 
> 赞同：1
> 
> 时间：2013-02-12T00:38:37.860
> 
> 标签：c#, c#-4.0, linq-to-objects

我有家庭对象：id、FirstName、Lastname、Fees[]

费用是对象包含金额描述

home 对象包括 Fees 数组

我有房屋清单，每个房屋都有费用数组/清单

我需要根据费用总额对房屋进行分类

```
List <home> h = new List <home>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T01:17:04.377

假设您有这样的对象结构：

```
class Home
{
    public string Name { get; set; }
    public Fee[] Fees { get; set; }
}

class Fee
{
    public int Amount { get; set; }
} 
```

您可以使用以下语句对其进行排序：

```
var orderedHomes = homes.OrderBy(x => x.Fees.Sum(y => y.Amount)); 
```

# mysql - MySQL 2表，插入前查询

> ID：14823616
> 
> 赞同：2
> 
> 时间：2013-02-12T00:39:06.413
> 
> 标签：mysql

我很困惑，这就是我所拥有的。

两张桌子，一张是临时的，一张是永久的。

```
 table  Temptable:   
 city , state          //- has a list of 20 citys and states

 table  Permtable: 
  city , state          //- has hundreds of citys and states 
```

我想做两件事：

1.  我想使用 Temptable 中的城市和州并查询 Permtable 以查看它是否已经包含该城市和州。如果不是，我希望它添加它。

2.  如果它在城市和州有匹配，我希望它播放 c:\sound.wav 然后我希望它添加到

允许的。

我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:43:25.030

这将告诉您 TempTable 中存在或不存在哪些记录：

```
SELECT T.City, T.State, CASE WHEN P.State IS NULL THEN 'DOES NOT EXIST' ELSE 'DOES EXIST' END
FROM TempTable T
   LEFT JOIN PermTable P ON T.City = P.City AND T.STate = P.State 
```

您可以像这样插入 PermTable 中不存在的那些记录：

```
INSERT INTO PermTable
SELECT T.City, T.State
FROM TempTable T
   LEFT JOIN PermTable P ON T.City = P.City AND T.STate = P.State
WHERE P.State IS NULL 
```

不确定您播放声音的要求，然后添加它没有意义（因为它已经存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:02:30.417

由于这里没有要运行的代码，请查询 temptable 的城市和州，然后查询 SELECT COUNT(id) FROM permtable WHERE city='$tempcity' AND state='$tempstate'。

然后在您的查询中使用 mysqli_num_rows 以查看是否找到任何匹配项。

```
$q= "SELECT COUNT(*) FROM temptable WHERE city='$tempcity' AND state='$tempstate'";
$r = @mysqli_query($dbc, $q);

if(mysqli_num_rows($r) != 0) {
echo "<embed src =\"sound.wav\" hidden=\"true\" autostart=\"true\"></embed>";
}
else { 
//Do your other stuff.
} 
```

这真的取决于你如何设置你的桌子。如果您有“州”列和“城市”列，其中“城市”类似于“达拉斯-奥斯汀-胡斯廷-圣安东尼奥”，那么您将不得不查询“州”，将“城市”的值分解为一个数组，运行一段时间以检查数组中的 $tempcity，如下所示：

```
$q = "SELECT city FROM permtable WHERE state='$tempstate'";
$r = @mysqli_query($dbc, $q);
$row = mysqli_fetch_array($r, MYSQLI_ASSOC);

if (mysqli_num_rows($r) == 1) { //STATE MATCH

$cityCheck = explode("-", $row['city']);
$i = 0;
$count = count($cityCheck);
$goodMatch = 0;

while ($i < $count) { //find out if user already voted on post
if ($cityCheck[$i] == $tempcity) { 
$goodMatch = 1;
} //City State match
else { } //City does not match with state, continue while loop.
$i++;
} //END WHILE

else { } //STATE DID NOT MATCH

if ($goodmatch) {
echo "<embed src =\"sound.wav\" hidden=\"true\" autostart=\"true\"></embed>";
}
else {} 
```

# impactjs - 用户输入缩写 - ImpactJS

> ID：14823619
> 
> 赞同：1
> 
> 时间：2013-02-12T00:39:18.277
> 
> 标签：impactjs

所以在我的最终状态下，我想让用户输入他们的姓名首字母。我已经设置了一个包含所有字母的数组，触发选择一个字母和 font_draw，但我似乎看不到，但我收到一个错误，说我的函数未定义。有任何想法吗？

```
 userInitials: function(){
        io_clear();
        a = 0
        l[0] = " "
        l[1] = "a"
        l[2] = 'b'
        l[3] = 'c'
        l[4] = 'd'
        l[5] = 'e'
        l[6] = 'f'
        l[7] = 'g'
        l[8] = 'h'
        l[9] = 'i'
        l[10] = 'j'
        l[11] = 'k'
        l[12] = 'l'
        l[13] = 'm'
        l[14] = 'n'
        l[15] = 'o'
        l[16] = 'p'
        l[17] = 'q'
        l[18] = 'r'
        l[19] = 's'
        l[20] = 't'
        l[21] = 'u'
        l[22] = 'v'
        l[23] = 'w'
        l[24] = 'x'
        l[25] = 'y'
        l[26] = 'z'
        str = ""

        if(ig.input.pressed('up')){             
            if (a>26){
                a+= 1;
            }else{
                a = 0;
            }
        }

        if(ig.input.pressed('down')){
            if (a<0){
                a -= 1;
            }else{
                a = 26;
            }
        }

        this.font_draw(x,y,str+'['+1[a]+'] ');

        if(ig.input.pressed('space')){
            str += l[a];
        }
    },

    draw:function(){
        if(this.gameOver){
            this.font.draw(userInitials, ig.system.width/2, 95, ig.Font.ALIGN.CENTER);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:07:57.380

当你调用你想要使用的函数时`'this'`。

如果没有当前对象，' `this`' 指的是全局对象。在 Web 浏览器中，这就是“<code>window”——顶级对象，它代表文档、位置、历史记录和一些其他有用的属性和方法。

如果你正在调用一个函数，'<code>this' 仍然是全局对象：

因此，`this.userInitials()`将起作用：

```
this.font.draw(this.userInitials(), ig.system.width/2, 95, ig.Font.ALIGN.CENTER); 
```

# centos - Centos 6 64位上的pdftotext？

> ID：14823620
> 
> 赞同：2
> 
> 时间：2013-02-12T00:39:19.800
> 
> 标签：centos, hosting, pdftotext, xpdf, centos6

我有一个 HostGator VPS 服务器，并且希望能够运行（[http://www.foolabs.com/xpdf/download.html](http://www.foolabs.com/xpdf/download.html)）`pdftotext`的一部分。`xpdf`

在我的 Mac 上测试后，它运行良好，所以我将它安装在我的 VPS 服务器上。

我按照安装说明进行操作，一切都完美无缺：

> 1.  将可执行文件（xpdf、pdftotext 等）复制到 /usr/local/bin。
>     
>     
> 2.  将手册页（*.1 和 *.5）复制到 /usr/local/man/man1 和 /usr/local/man/man5。
>     
>     
> 3.  将 sample-xpdfrc 文件复制到 /usr/local/etc/xpdfrc

然后我测试了它：

```
root@*** [~]# pdftotext
pdftotext: /lib64/libc.so.6: version `GLIBC_2.11' not found (required by pdftotext) 
```

如您所见，它找不到`/lib64/libc.so.6`. `/lib64/libc.so.6`但是，是否存在，如下所示：

```
root@*** [~]# /lib64/libc.so.6
GNU C Library stable release version 2.5, by Roland McGrath et al.
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.
Compiled by GNU CC version 4.1.2 20080704 (Red Hat 4.1.2-52).
Compiled on a Linux 2.6.9 system on 2012-03-19.
Available extensions:
        The C stubs add-on version 2.1.2.
        crypt add-on version 2.1 by Michael Glad and others
        GNU Libidn by Simon Josefsson
        GNU libio by Per Bothner
        NIS(YP)/NIS+ NSS modules 0.19 by Thorsten Kukuk
        Native POSIX Threads Library by Ulrich Drepper et al
        BIND-8.2.3-T5B
        RT using linux kernel aio
Thread-local storage support included.
For bug reporting instructions, please see:
<http://www.gnu.org/software/libc/bugs.html>. 
```

然后我联系了 HostGator，他们告诉我它无法在我的服务器上运行，因为它找不到`/lib64/libc.so.6`，因此在 Centos 6 64 位上不可用。

如果这确实是真的，是否有任何替代方法可以`pdftotext`在此服务器上进行简单快速的转换？是否`pdftotext`可以针对不同的版本进行编译，或者我使用权限错误地安装了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-03-01T23:24:11.720

这些命令都不起作用：

```
yum install xpdf
yum install poppler-utils 
```

xpdf 无论如何都会安装 poppler-utils 这将导致这个 pdftotext

> pdftotext 版本 0.26.5 版权所有 2005-2014 The Poppler Developers - [http://poppler.freedesktop.org](http://poppler.freedesktop.org) 版权所有 1996-2011 Glyph & Cog, LLC

这不是您想要的版本。你想要这个：

> pdftotext 4.03 版 [www.xpdfreader.com] 版权所有 1996-2021 Glyph & Cog, LLC

这需要访问[www.xpdfreader.com](http://www.xpdfreader.com)，然后单击“下载”。使用此页面中的最新版本来设置较新的 pdftotext 命令。

我实际上自己编译了源代码：

```
cd /tmp
wget https://dl.xpdfreader.com/xpdf-4.03.tar.gz
tar -xf xpdf-4.03.tar.gz
cd xpdf-4.03
mkdir build
cmake -DCMAKE_BUILD_TYPE=Release 
```

如果成功，您应该看到：

> -- 配置完成 -- 生成完成 -- 构建文件已写入：/tmp/xpdf-4.03

然后只需键入：

```
make 
```

它应该以：

> [100%] 构建目标 pdftotext

然后输入

```
make install 
```

现在，当您键入 pdftotext 时，您应该会看到：

> pdftotext 4.03 版 [www.xpdfreader.com] 版权所有 1996-2021 Glyph & Cog, LLC

注意：我为 pdftotext 4.03 版编写了所有代码。我花了一段时间才意识到 4.03 和 0.26 产生了截然不同的结果。

# ruby - 安装 gems Windows 8 时出错

> ID：14823627
> 
> 赞同：0
> 
> 时间：2013-02-12T00:39:59.760
> 
> 标签：ruby, windows, gem

在 Windows 8 上安装 ruby​​ 后出现以下错误，我已经卸载了几次，触发了 gem cleanup 等命令，删除了 .gem 文件夹，ruby 文件夹，环境变量，但似乎没有任何效果。

这是我遇到的错误的日志

```
ruby 1.9.3p385 (2013-02-06) [i386-mingw32]

C:\Users\david>gem update
Updating installed gems
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
SocketError: getaddrinfo: No such host is known.  (http://rubygems.org/lates
t_specs.4.8.gz)

C:\Users\david>gem install compass
ERROR:  Could not find a valid gem 'compass' (>= 0) in any repository
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
SocketError: getaddrinfo: No such host is known.  (http://rubygems.org/lates
t_specs.4.8.gz)

C:\Users\david>gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2013-02-06 patchlevel 385) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/Ruby193/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/Ruby193/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/Ruby193/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/Ruby193/lib/ruby/gems/1.9.1
     - C:/Users/david/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/

C:\Users\david>gem -v
1.8.24

C:\Users\david>ruby -v
ruby 1.9.3p385 (2013-02-06) [i386-mingw32]

C:\Users\david> 
```

# sql-server - SQL Server 导入和导出向导中的源类型 200？

> ID：14823628
> 
> 赞同：18
> 
> 时间：2013-02-12T00:40:01.483
> 
> 标签：sql-server, type-conversion, ssms-2012

我正在尝试使用 SQL Server 导入和导出向导将数据从服务器中的一个数据库导入到另一台服务器中的新表中。（SQL Server 管理工作室 2012）

在向导中，我选中了“编写查询以指定要传输的数据”，SQL 语句返回的数据包含以下四列：

```
+-----------------------------------------------------------------------------+
| ID(varchar(100))  |  Title(text)  |  Description(text)  |  IsActive(tinyint)|
+-----------------------------------------------------------------------------+ 
```

我想将新表的类型更改为

```
+----------------------------------------------------------------------------------------+
| ID(varchar(4))  |  Title(varchar(200))  |  Description(varchar(2000))  |  IsActive(bit)|
+----------------------------------------------------------------------------------------+ 
```

因此，在“列映射”页面（在“**选择源表和视图**”页面中，我单击了“**编辑映射...”），**我将目标类型更改为上述类型。然后，单击“下一步”后，在“查看数据类型映射”页面中，出现“ `Found 3 unknown column type conversion(s). You are only allowed to save the package`”

数据类型映射显示以下信息：

```
icon    Source Column    Source Type    Destination Column    Destination Type    Convert
----------------------------------------------------------------------------------
error   ID               200            ID                    varchar
error   Title            200            Title                 varchar
error   Description      201            Description           varchar
warning IsActive         tinyint        IsActive              bit 
```

即使我不更改“**编辑映射...** ”页面中的数据类型，我也会收到相同的错误。

我不明白“200”在数据类型的上下文中是什么意思，如何将这些数据导入到不同服务器的新表中？

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-27T16:08:43.357

通过一些实验，此错误似乎仅在您将查询作为源时才会发生。接受的答案对我不起作用，因为复制到平面文件会导致同样的错误。

为了解决这个问题，我将我的查询放入一个`View`then selected`Copy From one or more Tables Or Views`而不是`Write a query...`.

之后我正常通过向导，我的数据通过没有错误

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-16T07:26:21.540

不幸的是，这是一个BUG。请参阅（并投票）下面的链接：

--> [SQL Server 导入导出向导无法识别 Varchar 和 NVarchar](http://connect.microsoft.com/SQLServer/feedback/details/775897/sql-server-import-and-export-wizard-does-not-recognise-varchar-and-nvarchar)

和

-->[当源是查询时，SQL 2012 SP1 中的 DTSWizard 不再识别 nvarchar/varchar 数据类型](https://connect.microsoft.com/SQLServer/feedback/details/772761/dtswizard-in-sql-2012-sp1-no-longer-recognizes-nvarchar-varchar-data-types-when-source-is-a-query)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-06T23:13:03.590

一个长期的解决方案（除了微软修复它）（或者他们已经有了？）也是来自发布的答案的一些链接。

在受影响的机器上，有一个 xml 文件，它为每种转换类型定义了一个代码到值的映射。
导致失败的“200”和“201”所看到的是缺少映射
......好吧，它不应该作为“200/201”出现，但正如它所做的那样，我们希望它被映射

如果您愿意使用此类配置，可以手动插入它。

这是我得到答案的地方，在页面下方： [http ://social.msdn.microsoft.com/Forums/sqlserver/en-US/97ff1f01-c02a-4c9a-b867-8eaecc464cfb/2012-sp1-no -longer-recognizes-common-data-types?forum=sqlintegrationservices](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/97ff1f01-c02a-4c9a-b867-8eaecc464cfb/2012-sp1-no-longer-recognizes-common-data-types?forum=sqlintegrationservices)

映射文件位于 C:\Program Files (x86)\Microsoft SQL Server\110\DTS\MappingFiles\
（或等效文件）

每种类型的源到目标转换都有一个。

要在 SQL Server 之间切换，请查看
MSSQLToSSIS10.XML
MSSql9ToMSSql8.xml
MSSql10ToMSSql9.xml

你看到的地方

```
<!-- varchar -->
<dtm:DataTypeMapping >
    <dtm:SourceDataType>
        <dtm:DataTypeName>varchar</dtm:DataTypeName>
    </dtm:SourceDataType>
    <dtm:DestinationDataType>
        <dtm:CharacterStringType>
            <dtm:DataTypeName>DT_STR</dtm:DataTypeName>
            <dtm:UseSourceLength/>
        </dtm:CharacterStringType>
    </dtm:DestinationDataType>
</dtm:DataTypeMapping> 
```

添加“200”映射以匹配，以便您最终得到

```
<!-- varchar -->
<dtm:DataTypeMapping >
    <dtm:SourceDataType>
        <dtm:DataTypeName>varchar</dtm:DataTypeName>
    </dtm:SourceDataType>
    <dtm:DestinationDataType>
        <dtm:CharacterStringType>
            <dtm:DataTypeName>DT_STR</dtm:DataTypeName>
            <dtm:UseSourceLength/>
        </dtm:CharacterStringType>
    </dtm:DestinationDataType>
</dtm:DataTypeMapping>
<dtm:DataTypeMapping >
    <dtm:SourceDataType>
        <dtm:DataTypeName>200</dtm:DataTypeName>
    </dtm:SourceDataType>
    <dtm:DestinationDataType>
        <dtm:CharacterStringType>
            <dtm:DataTypeName>DT_STR</dtm:DataTypeName>
            <dtm:UseSourceLength/>
        </dtm:CharacterStringType>
    </dtm:DestinationDataType>
</dtm:DataTypeMapping> 
```

以相同的方式修复 nvarchar 和任何其他人！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-12T03:15:53.003

我敢打赌，无法使用向导将文本列插入 varchar 列。根据表的大小，您可以通过 SSMS 将源导出到 csv，然后再导入。那应该可以，但是如果您要导入多个表，则可以添加链接服务器。然后你可以像这样限定旧表或新表：

```
insert into [new_server].database.dbo.tablename
select * from old_table 
```

我知道 SQL2000 对创建链接服务器来说是一件痛苦的事情，尽管我猜你正试图从中导出，因为你有文本列。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-18T19:46:50.827

我可以通过在 SQL 中将字符字段转换为 char(##)，然后将目标数据类型更改为 varchar(##) 来解决此问题。这些字段在使用前可能需要修剪，但导入有效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-15T17:58:25.583

这是[错误](https://connect.microsoft.com/SQLServer/feedback/details/772761/dtswizard-in-sql-2012-sp1-no-longer-recognizes-nvarchar-varchar-data-types-when-source-is-a-query#details)，刚刚在[SQL SERVER 2012 SP2](http://www.microsoft.com/en-us/download/details.aspx?id=43351)中修复。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-18T08:25:38.113

你真的不需要对配置、视图或其他东西做任何摆弄。只需保存 SSIS 包并通过在资源管理器中双击它来执行它。这将启动“执行包实用程序（ManagementStudio 文件夹中的 DTExecUI.exe），它应该运行包而不会出错。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-26T04:20:20.910

最快的解决方案是使用导入/导出向导将数据导出到同一数据库（源）中的新表。然后从新表中导出数据。不知何故，导入/导出向导在创建新表时发挥了他的魔力（不是真的）。感谢 Jyoti 结束了使用导入/导出向导的痛苦。

# ruby-on-rails - git push heroku master 需要永远

> ID：14823629
> 
> 赞同：2
> 
> 时间：2013-02-12T00:40:03.870
> 
> 标签：ruby-on-rails, ruby, git, heroku

我正在使用基于 Ubuntu 12.04（ruby 1.9.2p290 和 rails 3.1.0）的 VM，我的应用程序在本地运行良好。我正在使用 git，当我尝试`git push heroku master`它不起作用时：

`git push heroku master`

我得到：“计数对象：435，完成。压缩对象：100％（215/215），完成。写入对象：100％（435/435），73.35 KiB，完成。总计435（增量171），重用435（三角洲 171) "

而且它永远不会完成，所以它不会向heroku推送任何东西。终端永远待命。我是heroku的新手，如果问题很明显，我很抱歉:)

操作系统信息：

> 工作 [1]+ 运行 git push heroku master &
> 
> ps -x
> 
> PID TTY 状态时间命令
> 
> 1078？Ssl 0:00 gnome 会话 --session=ubuntu
> 
> 1135 ? Sl 0:00 /usr/bin/VBoxClient --clipboard
> 
> 1147？Sl 0:00 /usr/bin/VBoxClient --display
> 
> 1154 ? Sl 0:00 /usr/bin/VBoxClient --seamless
> 
> 1162 ? Sl 0:19 /usr/bin/VBoxClient --draganddrop
> 
> 1167？Ss 0:00 /usr/bin/ssh-agent /usr/bin/dbus-launch --exit-with-s
> 
> 1171？S 0:00 /usr/bin/dbus-launch --exit-with-session gnome-sessio
> 
> 1172 ? Ss 0:01 //bin/dbus-daemon --fork --print-pid 5 --print-addres
> 
> 1246？Sl 0:00 /usr/bin/gnome-keyring-daemon --start --components=se
> 
> 1250 ? Sl 0:02 /usr/lib/gnome-settings-daemon/gnome-settings-daemon
> 
> 1329 ? S 0:00 /usr/lib/gvfs/gvfsd
> 
> 1334 ? sl 0:00 /usr/lib/gvfs//gvfs-fuse-daemon -f /home/ubuntu/.gvfs
> 
> 1401 ? Sl 0:03 元城
> 
> 1417 ? S 0:00 /usr/lib/i386-linux-gnu/gconf/gconfd-2
> 
> 1421 ? 小号
> 
> 1426 ? Sl 0:01 unity-2d-panel
> 
> 1427 ? Sl 0:07 unity-2d-shell
> 
> 1430 ? S 0:00 /usr/lib/pulseaudio/pulse/gconf-helper
> 
> 1447 ? Sl 0:01 /usr/lib/bamf/bamfdaemon
> 
> 1450 ? Sl 0:00 /usr/lib/gnome-settings-daemon/gnome-fallback-mount-h
> 
> 1453 ? Sl 0:02 鹦鹉螺-n
> 
> 1455 ? Sl 0:00 /usr/lib/policykit-1-gnome/polkit-gnome-authenticatio
> 
> 1457 ? Sl 0:00 蓝牙小程序
> 
> 1468 ? Sl 0:00 nm-小程序
> 
> 1482 ? S 0:00 /usr/lib/gvfs/gvfs-gdu-volume-monitor
> 
> 1500？Sl 0:00 /usr/lib/gvfs/gvfs-afc-volume-monitor
> 
> 1504 ? S 0:00 /usr/lib/gvfs/gvfs-gphoto2-volume-monitor
> 
> 1518 ? S 0:00 /usr/lib/gvfs/gvfsd-trash --spawner :1.9 /org/gtk/gvf
> 
> 1521？Sl 0:01 /usr/lib/unity/unity-panel-service
> 
> 1523 ? Sl 0:00 /usr/lib/dconf/dconf-service
> 
> 1539？Sl 0:00 /usr/lib/indicator-datetime/indicator-datetime-service
> 
> 1541？Sl 0:00 /usr/lib/indicator-printers/indicator-printers-service
> 
> 1543 ? Sl 0:00 /usr/lib/indicator-messages/indicator-messages-service
> 
> 1545 ? Sl 0:00 /usr/lib/indicator-session/indicator-session-service
> 
> 1547？Sl 0:00 /usr/lib/indicator-application/indicator-application-
> 
> 1549？Sl 0:00 /usr/lib/indicator-sound/indicator-sound-service
> 
> 1574 ? S 0:00 /usr/lib/geoclue/geoclue-master
> 
> 1591？S 0:00 /usr/lib/ubuntu-geoip/ubuntu-geoip-provider
> 
> 1597？Sl 0:00 /usr/lib/gnome-disk-utility/gdu-notification-daemon
> 
> 1603 ? S 0:00 /usr/lib/gvfs/gvfsd-元数据
> 
> 1609？Sl 0:00 /usr/lib/indicator-appmenu/hud-service
> 
> 1620 ? Sl 0:00 /usr/lib/unity-lens-applications/unity-applications-d
> 
> 1622？Sl 0:00 /usr/lib/unity-lens-files/unity-files-daemon
> 
> 1624 ? Sl 0:00 /usr/lib/unity-lens-music/unity-music-daemon
> 
> 1626？Sl 0:00 /usr/bin/python /usr/lib/unity-lens-video/unity-lens-
> 
> 1653？Sl 0:00 /usr/bin/zeitgeist-daemon
> 
> 1661？Sl 0:00 心灵感应指示器
> 
> 1668？Sl 0:00 /usr/lib/zeitgeist/zeitgeist-fts
> 
> 1672？Sl 0:00 时代精神-datahub
> 
> 1676？S 0:00 /bin/cat
> 
> 1682 ? Sl 0:00 /usr/lib/telepathy/mission-control-5
> 
> 1701 ? Sl 0:00 gnome 屏幕保护程序
> 
> 1703 ? Sl 0:00 /usr/bin/python /usr/lib/unity-scope-video-remote/uni
> 
> 1728 ? Sl 0:05 侏儒终端
> 
> 1734 ? S 0:00 gnome-pty-helper
> 
> 1738 分/2 Ss 0:00 bash
> 
> 1796 年？Sl 0:00 更新通知
> 
> 1954 pts/2 S 0:00 git push heroku master
> 
> 1955 pts/2 S 0:00 ssh git@heroku.com git-receive-pack 'polar-island-471
> 
> 1959 分/2 R+ 0:00 ps -x

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-19T10:20:43.260

您对 Heroku 的推送可能会超时的原因有很多。以我的经验，最常见的原因是由于站点大小，而站点大小是指 3 件事：您的 git 存储库的大小，您的站点被推送到 Heroku 的大小（git 存储库 - 忽略的文件），以及您使用的宝石的大小。Heroku 在容纳大型站点（或长时间运行的进程，就此而言）并不是特别强大，如果您变得太大，您可能会导致您的推送挂起/超时并且间歇性地，这可能会令人困惑。

**.git 文件夹** 我的网站变得无法解释地大，并且随着时间的推移，我在项目根目录中的 .git 文件夹已经增长到 600mb。谢天谢地，我注意到 heroku deploy 聊天中的一个警告，警告我我的 git repo 太大了。无论如何，由于该文件夹是由 git 在幕后管理的，我最终开始了一个新的 git repo 并将我的代码移到它上面，这使我的网站缩小了 90%。

**.slugignore** 另一个导致我的站点变得足够大而导致超时的陷阱是允许将日志、我的临时目录和我的 solr 索引目录等内容包含在项目中。在我的 .slugignore 文件中排除所有这些文件夹后，推送变得非常快。是的，您可以使用 .gitignore 获得相同的基本效果，但有些事情我喜欢通过 git 管理，但在推送到 heroku 时忽略。这时候 .slugignore 就派上用场了。

**gems** 通过完成上述步骤，我将网站缩小到合理的大小，但仍然偶尔会出现超时。然后我意识到宝石也会影响您的网站大小。所以我从我的 gemfile 中删除了一些未使用的 gem，我能够将我的 slug 编译时间从 900+ 秒减少到 250 秒，我的整体部署时间从 15+ 分钟（经常超时）减少到 10 分钟以下。不必为每次部署等待这么长时间并冒一半时间超时的风险，真是一种解脱。

根据您的特定设置，任何或所有这些因素都会真正伤害您。就我而言，我做错了一切。但是，即使您没有超时，您可能仍希望尽可能地修剪您的站点以缩短部署时间。

**如何让 heroku 不烂** [http://www.stormconsultancy.co.uk/blog/development/6-ways-to-get-more-bang-for-your-heroku-buck-while-making-your-rails-网站超级活泼/](http://www.stormconsultancy.co.uk/blog/development/6-ways-to-get-more-bang-for-your-heroku-buck-while-making-your-rails-site-super-snappy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T15:36:59.077

原因是，我的连接速度很慢。这是我智能手机的接入点。

# javascript - 查看 div 是否包含一个或多个输入的单词 (Javascript)

> ID：14823631
> 
> 赞同：1
> 
> 时间：2013-02-12T00:40:18.393
> 
> 标签：javascript, search, html, contains

我想检查是否有任何 div 包含在输入字段中输入的所有单词。但是，目前我陷入了这样一种情况，即一旦输入一个空格，它就会重新开始，因此有点像 OR 运算符而不是 AND 运算符。谁能把我推向正确的方向？非常感谢！

这是我到目前为止所拥有的：

```
<div class="search">aa ab ac ad</div>
<div class="search">ab ba bb bc</div>
<div class="search">bb cc dd ee</div>

<script>
function search(query) {
var divs= document.getElementsByTagName('div');
var words = query.toLowerCase().split(" ");

 for (var h = 0, len = divs.length; h < len; ++h) {
  for (var i = 0; i < words.length; i++) {

   if (divs[h].innerHTML.indexOf(words[i]) == -1) {
    divs[h].style.backgroundColor = '#fff';
   }
   else {
    divs[h].style.backgroundColor = '#ddd';
   }

  }
 }

}
</script>

<input type="text" onkeyup="search(this.value);"> 
```

* * *

显然我不是很清楚。我很抱歉。

我需要在 Javascript 中使用什么方向才能使其查找 div 是否包含 AND words[0] AND words[1] AND words[2] 等（因此，以任何随机顺序）？

现在，当发生拆分时，该功能将从头开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:58:30.963

还需要检查每个查询词的长度：

```
<div class="search">aa ab ac ad</div>
<div class="search">ab ba bb bc</div>
<div class="search">bb cc dd ee</div>

<script>
function search(query) {
var divs= document.getElementsByTagName('div');
var words = query.toLowerCase().split(" ");

 for (var h = 0, len = divs.length; h < len; ++h) {
  for (var i = 0; i < words.length; i++) {

  if (words[i].length > 0 && divs[h].innerHTML.indexOf(words[i]) >= 0) {
    divs[h].style.backgroundColor = '#ddd';
    break;
   }
   else {
    divs[h].style.backgroundColor = '#fff';
   }
  }
 }
}
</script>

<input type="text" onkeyup="search(this.value);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:57:40.387

试试我的代码：

**HMTL：**

```
<div class="search">
   <div>aa cC abcc ac ad</div>
   <div>ab ba bb bcc</div>
   <div>bb cc dd ee cc</div>
</div>

<span>Search: </span><input type="text"> 
```

**CSS：**

```
div{ 
  border:solid 1px #1e2a29; 
  margin-bottom:10px;
  padding:5px;
  width:auto;
}

.matched{
  background-color:#f8dda9; 
  border:1px solid #edd19b;
  margin:-1px;
  border-radius:2px;
}

input[type="text"]{
  margin-left:10px;
} 
```

**Javascript：**

```
 $(document).ready(function(){
$('.search > div ').each(function(i, el){
    $(this).data('originalText', $(this).html());
});

$('input').keyup(function(e){
     var _val = $(this).val();
     var _span = '<span class="matched" >$1</span>';
    $('.search  div ').each(function(i, el){            
            var _originalVal = $(el).data('originalText');
            var re = new RegExp('('+_val+')', "ig");
            if(_val.length > 1 && re.test(_originalVal) >=0  ){                    
                $(el).html(_originalVal.replace(re, _span));                    
             }else{
                $(el).html(_originalVal);
            }   
    });
 });
}) 
```

见[演示](http://jsfiddle.net/ducwidget/8Mdbz/6/)

# ios - 有没有办法在 iOS 和/或 Mac OS X 上的 UTF-16 代码单元和 UTF-32 代码单元索引之间进行转换？

> ID：14823633
> 
> 赞同：0
> 
> 时间：2013-02-12T00:40:50.547
> 
> 标签：ios, macos, unicode

我已经获得了将属性应用于字符串的范围。挑战在于范围以 UTF-32 代码单元提供。

是 1 个 UTF-32 代码单元，但 NSString 将其视为长度 2，因为它是两个 UTF-16 代理对字符的组合字符。

另一方面，^ิ 是 2 个 UTF-32 代码单元，NSString 也将其视为长度为 2。

我可以找到在非组合和组合之间转换的简单方法。在 UTF-16 和字素之间——但不是在 16 到 32 个代码单元之间。

我认为问题与询问相同：是否有一种简单的方法可以从 Mac OS X 和/或 iOS 上的其他组合字符中检测代理对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T03:36:56.937

的抽象`NSString`是UTF-16“字符”。如果你想要 UTF-32，那么从 Cocoa 的角度来看，它不再是一个字符串；它是一个数据缓冲区。所以，你要找的是：

```
NSData* utf32Data = [someString dataUsingEncoding:NSUTF32StringEncoding];
uint32_t* utf32 = (uint32_t*)[utf32Data bytes];
NSUInteger count = [utf32Data length] / sizeof(utf32[0]); 
```

然后遍历数组的`count`元素。`utf32`

* * *

`NSString`这是用于转换范围的未经测试的类别：

```
@interface NSString (UTF32Range)

- (NSRange) rangeFromUTF32Range:(NSRange)range;

@end

@implementation NSString (UTF32Range)

- (NSRange) rangeFromUTF32Range:(NSRange)range
{
    NSUInteger len = self.length;
    NSUInteger i = 0;
    while (i < range.location && i < len)
    {
        unichar u = [self characterAtIndex:i];
        if (CFStringIsSurrogateHighCharacter(u))
        {
            range.location++;
            i++;
        }
        i++;
    }
    while (i < range.length && i < len)
    {
        unichar u = [self characterAtIndex:i];
        if (CFStringIsSurrogateHighCharacter(u))
        {
            range.length++;
            i++;
        }
        i++;
    }

    return range;
}

@end 
```

# c++ - 连接前的 WinSock 绑定导致 WSAEADDRNOTAVAIL - 请求的地址在其上下文中无效

> ID：14823635
> 
> 赞同：1
> 
> 时间：2013-02-12T00:40:51.203
> 
> 标签：c++, winsock

我需要使用 WinSock 从特定的本地网卡打开一个套接字。我问了这个问题并在[这里](https://stackoverflow.com/questions/14697963/tcp-ip-connection-on-a-specific-interface)得到了答案。总之，答案建议你先绑定到本地接口，然后调用connect。

但是，当我这样做时，我得到一个 WSAEADDRNOTAVAIL (10049) “请求的地址在其上下文中无效。”。为什么是这样？

假设下面的示例代码是在本地机器 192.168.1.3 上运行的应用程序的一部分，并且正在尝试连接到远程服务器 192.168.1.4。我已经检查并仔细检查了本地和远程地址是否正确。我可以 ping 两种方式（从本地到远程和远程到本地）。

我已经为本地尝试了 0 以外的端口；没有不同。如果我在连接之前删除绑定，它就会起作用，但我无法指定网络接口。

那么，知道为什么我不断收到 WSAEADDRNOTAVAIL 吗？

```
addrinfo localhints = {0};
localhints.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV;
localhints.ai_family = AF_INET;
localhints.ai_socktype = SOCK_STREAM;
localhints.ai_protocol = IPPROTO_TCP;

addrinfo *localaddr = NULL;
getaddrinfo("192.168.1.3", "0", &localhints, &localaddr);
bind(s, localaddr->ai_addr, localaddr->ai_addrlen);
freeaddrinfo(localaddr);

addrinfo remotehints = {0};
remotehints.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV;
remotehints.ai_family = AF_INET;
remotehints.ai_socktype = SOCK_STREAM;
remotehints.ai_protocol = IPPROTO_TCP;

addrinfo *remoteaddr = NULL;
getaddrinfo("192.168.1.4", "12345", &remotehints, &remoteaddr);
connect(s, remoteaddr->ai_addr, remoteaddr->ai_addrlen);
freeaddrinfo(remoteaddr); 
```

**编辑**：此示例代码故意没有错误检查，以便可以以最有效的方式传达我的意图。

**编辑 2**：绑定到 192.168.1.3 会导致连接失败。绑定到 127.0.0.1 有效。是的，我 100% 确定 192.168.1.3 是正确的本地 IP。

**编辑3**：对！一时兴起，我在家用 PC 上试用了测试应用程序，它运行良好。所以，至少代码确实有效，问题肯定与我的工作电脑有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:00:00.693

好的，事实证明@claptrap 是对的。

我禁用了我的防火墙，但我不知道，我们的 IT 部门还有一些其他防火墙功能紧密集成到企业病毒扫描程序中（我无法卸载或禁用）。一旦我设法让 IT 暂时禁用它，一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:04:22.440

调用 API 函数时始终检查错误代码，例如：

```
addrinfo localhints = {0};
localhints.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV;
localhints.ai_family = AF_INET;
localhints.ai_socktype = SOCK_STREAM;
localhints.ai_protocol = IPPROTO_TCP;

addrinfo *localaddr = NULL;
int ret = getaddrinfo("192.168.1.3", "0", &localhints, &localaddr);
if (ret == 0)
{
    ret = bind(s, localaddr->ai_addr, localaddr->ai_addrlen);
    freeaddrinfo(localaddr);

    if (ret == 0)
    {
        addrinfo remotehints = {0};
        remotehints.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV;
        remotehints.ai_family = AF_INET;
        remotehints.ai_socktype = SOCK_STREAM;
        remotehints.ai_protocol = IPPROTO_TCP;

        addrinfo *remoteaddr = NULL;
        ret = getaddrinfo("192.168.1.4", "12345", &remotehints, &remoteaddr);
        if (ret == 0)
        {
            ret = connect(s, remoteaddr->ai_addr, remoteaddr->ai_addrlen);
            freeaddrinfo(remoteaddr);

            if (ret == 0)
            {
                // connect succeeded...

                // can use getsockname() here to discover which port was actually bound to, if needed.
                // On some OS versions, bind() does not perform the actual binding immediately,
                // connect() does the actual binding instead since it can make more informed choices based on the target address being connected to...
            }
            else
            {
                // connect failed...
            }
        }
        else
        {
            // getaddrinfo() failed
        }
    }
    else
    {
        // bind failed
    }
}
else
{
    // getaddrinfo() failed...
} 
```

代码实际上能走多远？

# html - 可以减少跨度/内联元素内容及其边框之间的空白吗？

> ID：14823639
> 
> 赞同：0
> 
> 时间：2013-02-12T00:41:04.857
> 
> 标签：html, css

我有一些内联文本标记为跨度。我已经给 span 一个底部虚线边框（以将其与超链接区分开来），但是 span 内容和边框之间的距离有点太大了。有没有办法减少它？

我已经尝试过对边距/填充进行归零/否定（完全应该是一个词）以及减少元素的行高，但没有运气。当然，减少内联跨度的行高可能不起作用。

### CSS

```
body {
    margin: 10px;
}

span.test {
    color: orange;
    border-bottom: 1px dashed orange;
} 
```

[**jsFiddle**](http://jsfiddle.net/JxmEu/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:45:50.183

我已经设法通过结合使用`display: inline-block;`和`line-height: 1em;`

当然，如果你需要的不是这个，那就降低行高。

[http://jsfiddle.net/JxmEu/1/](http://jsfiddle.net/JxmEu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:46:24.940

将显示更改`.test`为`inline-block`。然后，您可以更改其`line-height`. 减小`line-height`将向上移动边框，而不会影响字体大小或周围的文本。

[http://jsfiddle.net/ExplosionPIlls/JxmEu/2/](http://jsfiddle.net/ExplosionPIlls/JxmEu/2/)

# html - float right 中的文本显示在左侧

> ID：14823643
> 
> 赞同：3
> 
> 时间：2013-02-12T00:41:25.230
> 
> 标签：html, css-float, text-align

我在显示以下代码时遇到了麻烦。我关心将 分为`<div class="contectCode">`两个`<div class="left">`和`<div class="right">`。所以，switch的一些case应该显示在左边，一些显示在右边。

```
<?php

        $xml = simplexml_load_file("Profiles.xml");

        foreach($xml->children() as $Developer){ 
        echo '<div class="contectCode" style="height: 260px;">';

            echo '<div class="left" style="width:365px;">';
            echo '<b>' . $Developer['name'] . '</b>';
            echo '</div><br/>';

            echo '<div class="left"  style="width:365px; float:left; text-align:left;">';
            echo '<p><b><i>Communications with you</i></b></p>';
            echo '</div>';

            echo '<div class="right" style="width:365px; float:right; text-align:left;">';
            echo '<p><b><i>Communications with other developers </i></b></p>';
            echo '</div>';
            foreach($Developer->children() as $factor){

                switch ($factor->getName()){

                    case "trust":
                        echo '<div class="left" style="width:365px; float:left; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>You have selected (trusted) him to help you ' . $factor . ' times</p><br/>';
                        else
                            echo '<p>You have selected (trusted) her to help you ' . $factor . ' times</p><br/>';
                        echo '</div>';
                        break;
                    case "response":
                        echo '<div class="left" style="width:365px; float:left; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>He hes responded to your help request ' . $factor . ' times</p><br/>';
                        else
                            echo '<p>She has responded to your help request ' . $factor . ' times</p><br/>';
                        echo '</div>';
                        break;
                    case "indegreeOutdegree":
                        echo '<div class="left" style="width:365px; float:left; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>He has helped you to complete your code ' . $factor . ' times</p><br/>';
                        else
                            echo '<p>She has helped you to complete your code ' . $factor . ' times</p><br/>';
                        echo '</div>';
                        break;
                    case "recommended":
                        echo '<div class="left" style="width:365px; float:left; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>He has been recommended to you by others ' . $factor . ' times</p><br/>';
                        else
                            echo '<p>She has been recommended to you by others ' . $factor . ' times</p><br/>';
                        echo '</div>';
                        break;
                    case "trustG":
                        echo '<div class="right" style="width:365px; float:right; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>He has been selected (trusted) by others ' . $factor . ' times</p><br/>';
                        else 
                            echo '<p>She has been selected (trusted) by others ' . $factor . ' times</p><br/>';
                        echo '</div>';
                        break;
                    case "responseG":
                        echo '<div class="right" style="width:365px; float:right; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>He has responded to others requests ' . $factor . ' times</p><br/>';
                        else 
                            echo '<p>She has responded to others requests ' . $factor . ' times </p><br/>';
                        echo '</div>';
                        break;
                    case "indegreeOutdegreeG":
                        echo '<div class="right" style="width:365px; float:right; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>He has helped other developers ' . $factor . ' times</p><br/>';
                        else
                            echo '<p>She has helped other developers ' . $factor . ' times</p><br/>';
                        echo '</div>';
                        break;
                    case "recommendedG":
                        echo '<div class="right" style="width:365px; float:right; text-align:left;">';
                        if($Developer['gender'] == "Male")
                            echo '<p>He has been recommended to help by others ' . $factor . ' times</p><br/>';
                        else
                            echo '<p>She has been recommended to help by others ' . $factor . ' times</p><br/>';
                            echo '</div>';
                            break;
                }
            }

            echo '</div>';
        }

       ?> 
```

如果输出显示来自左右 div 的案例，则它运行良好。但是，如果输出在右侧 div 中显示案例，则会将它们向左移动。我想将它们显示在右侧而不是右侧。

那么，我该怎么做呢？

CSS是

```
.contectCode
{
font-size:15px;
line-height:24px;
margin-left:13px;
margin-right:13px;
border-style:solid;
border-width:2px;
border-color:#000066;
padding:10px;
margin-top:5px;
margin-bottom:10px;
}

.left
{
float:left;
width:60%;
}

.right
{
float:left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:46:18.560

怎么样 ：

```
.right
{
    float:left;
    text-align:right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:35:36.213

Ghadeer - 我可能在你的帖子中遗漏了一些东西，但我把你的 HTML 示例和 CSS 都拿走了，然后把它扔进了一个带有附加渲染的快速页面（在 Chrome v24 中，用颜色来显示布局）。在您的两个 HTML 示例中，右侧 div 中的文本与 div 的左侧对齐，因为`text-align:left`在您的内联样式中。

如果您想要右对齐的文本，请考虑`text-align:right`在您的`.right`CSS 选择器中添加，并从`<div class="right">...</div>`元素中删除您的内联样式。

无论如何，这样维护起来要容易得多！

在旁注中，考虑到您正在逐字生成 HTML，为什么首先要有任何内联样式？看起来这些样式更适合放置在您的样式表中。

![两个 HTML 示例的呈现](../Images/134f85d3dab06eba7ef4c147c13ddac6.png)

# android - eclipse上新的android应用程序项目和新的android示例项目的区别

> ID：14823647
> 
> 赞同：5
> 
> 时间：2013-02-12T00:41:48.230
> 
> 标签：android

我是 Android 世界的新手。只是想知道eclipse上新的android应用程序项目和新的android示例项目有什么区别。当我单击新的 android 示例项目时，它会直接向我显示 Android API 级别显示。显示屏显示“此目标没有样本”，如果我选择任何 API 级别，这是真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:56:21.843

新的 android 示例项目允许您访问您需要从 android 管理器下载的 SDK 提供的示例项目。所以在 Eclipse 上转到->Android SDK 管理器->打开包详细信息后，您可以找到**SDK 示例**（每个 API 级别都有示例，您可以获得最新的目标，该目标将向后兼容到特定的 API 级别）。安装你需要的那些。然后，您将在新的 android 示例项目下找到目标的示例。

新的 android 项目用于在不使用示例的情况下启动新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:50:38.943

Android 示例项目为您提供了演示 android 功能（例如，Accelerometer、ApiDemos、ContactManager 等）的演示项目，您可以运行这些项目并检查其工作方式的代码。

从外观上看，您还没有安装 Android 示例。检查 Android SDK 管理器并检查“Samples for SDK”。

# jquery - 无法将ajax发布到IE10

> ID：14823649
> 
> 赞同：1
> 
> 时间：2013-02-12T00:42:03.233
> 
> 标签：jquery, ajax, internet-explorer, internet-explorer-10

我无法让 ajax 在 IE10 中工作。无论我尝试多少次/方式/框架，都没有任何效果。它总是返回一个空字符串。

```
<html>
<head>
    <script type="text/javascript" src="jquery-1-9-1.js"></script>
</head>
<body>
<br/>
<a onclick="doit()">go</a>
<script>
    function doit()
    {
    var myData = { "key": "value" };
    $.ajax({
        url: "myhandlepage.php",
        data: myData,
        dataType: 'json',
        type: 'POST',
        contentType: 'application/x-www-form-urlencoded',
        success: function (data) { alert("OK = " + data.eric); },
        error: function (data, status) { alert("FAILED:" + status); }
    });
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:46:02.760

可能的答案：[http ://bugs.jquery.com/ticket/12790#comment:28](http://bugs.jquery.com/ticket/12790#comment:28)

这似乎是 IE10 和 POST 请求的问题。因此，可能根本无法解决此问题。这意味着如果人们开始使用 IE10，将会有很多损坏的 ajax 网站！

> 这似乎是 IE10 上 POST 请求的普遍问题，我们无法控制，因此无需在此票证中发布进一步的反馈。这是该问题的 Microsoft 票证；请注意，您需要创建一个登录才能查看：
> 
> [http://connect.microsoft.com/IE/feedback/details/771016](http://connect.microsoft.com/IE/feedback/details/771016)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:54:11.777

**更新**（2/27/13）：

Microsoft 已发布适用于 Win 7 的 IE 10 最终版本。更新包括重要修复：[Internet Explorer 10 Arrives on Windows 7](http://www.webmonkey.com/2013/02/internet-explorer-10-arrives-on-windows-7/)

* * *

可能是您要发送的数据。尝试以下修订，您可以离开`contentType`：

```
function doit()
{
var myData = { key: "value" }; //plain object
$.ajax({
    url: "myhandlepage.php",
    data: myData,
    dataType: 'json',
    type: 'POST',
    success: function (data) { alert("OK = " + data.eric); },
    error: function (data, status) { alert("FAILED:" + status); }
});
} 
```

从[jquery 文档](http://api.jquery.com/jQuery.ajax/)：

> > contentType（默认值：'application/x-www-form-urlencoded; charset=UTF-8'）

另外，明确操作系统和IE10版本。

从[错误报告](http://bugs.jquery.com/ticket/12790#comment:22)：

> > 这只是 Windows 7 桌面上的问题。Windows 8 中的 IE10 工作正常。

# delphi - 如何更新 Delphi 对象检查器？

> ID：14823656
> 
> 赞同：8
> 
> 时间：2013-02-12T00:42:24.890
> 
> 标签：delphi

继我最近发布的这个问题之后：[可以在多个组件上执行组件编辑器吗？](https://stackoverflow.com/questions/14802371/can-a-component-editor-be-executed-on-multiple-components)

我为一个新组件创建了一个 ComponentEditor，该组件在执行时会显示一个 TOpenDialog 来选择一个配置文件。加载文件时，我读取数据并将值复制到调用组件（`Component`因为这是一个 TComponentEditor）。

没有任何问题，除了对象检查器没有更新以反映新更改的值 - 它仅在单击设计器中的组件时更新。

这似乎没什么大不了的，但我需要 Object Inspector 以某种方式更新自身，以便我可以看到属性已成功更改（无需将焦点切换回控件）。

那么，有没有办法让 Delphi 知道它应该更新/刷新对象检查器？一世

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T01:17:01.890

根据需要修改组件后，您的组件编辑器需要调用该`IDesigner.Modified()`方法，例如：

```
procedure TMyComponentEditor.ExecuteVerb(Index: Integer);
var
  Dlg: TOpenDialog;
begin
  ...
  Dlg := TOpenDialog.Create(nil);
  try
    ...
    if Dlg.Execute then
    begin
      ...
      Designer.Modified;
    end;
  finally
    Dlg.Free;
  end;
  ...
end; 
```

# jquery - 现在如何检测浏览器是否是基于 webkit 的引擎 $.browser 已被弃用？

> ID：14823657
> 
> 赞同：1
> 
> 时间：2013-02-12T00:42:33.563
> 
> 标签：jquery, browser, webkit, cross-browser, deprecated

我想用 Javascript 检测浏览器的渲染引擎（在这种情况下是 webkit），但是`$.browser`已经被弃用了，所以我想知道你现在是怎么做的？

我已经看到了很多检测单个浏览器的替代品，但是我正在寻找一个特定的替代品`$.browser.webkit`

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:47:44.607

您可以使用仅限 Webkit 的媒体查询来定位它：

```
@media screen and (-webkit-min-device-pixel-ratio: 0) {
    body {
        font-size: 200px;
        color: red;
    }
} 
```

# javascript - 如何测试 iframe 是否可以访问顶部而不抛出“不安全的 JavaScript 尝试...”错误？

> ID：14823660
> 
> 赞同：2
> 
> 时间：2013-02-12T00:42:58.523
> 
> 标签：javascript, google-chrome, iframe

我正在开发一个小部件，它的行为会略有不同，具体取决于它是否呈现在可以访问顶部的 iframe 中。

我需要一个好方法来测试框架是否可以访问顶部。我可以用一个简单的 try/catch 块来做到这一点，问题是 Chrome 似乎总是在控制台中显示“不安全的 JavaScript 尝试使用 URL 访问框架”错误，即使调用包含在 try/catch 中。请参见此处的示例：

[http://jsfiddle.net/XbS9J/](http://jsfiddle.net/XbS9J/)

```
try {
    var ___loc = top.location.toString();
    console.log('top is accessible');
} catch (e) {
    console.log('top is not accessible');
} 
```

有什么方法可以测试从 iframe 访问 top 并且在无法访问 top 的过程中不会让 chrome 抛出错误？这在其他浏览器中似乎很好，但 chrome 很烦人。

# java - 合并排序是否有节省空间的实现？

> ID：14823661
> 
> 赞同：3
> 
> 时间：2013-02-12T00:43:18.343
> 
> 标签：java, mergesort, space-complexity, space-efficiency

我刚刚编写了这个合并排序的工作版本：

```
static int[] merge(int[] first, int[] second){
    int totalsize = first.length + second.length;
    int[] merged_array = new int[totalsize];
    int i = 0, firstpointer = 0, secondpointer = 0;
    while(i < totalsize){
        if(firstpointer == first.length){
            merged_array[i] = second[secondpointer];
            ++secondpointer;
        }
        else if(secondpointer == second.length){
            merged_array[i] = first[firstpointer];
            ++firstpointer;
        }
        else if(first[firstpointer] < second[secondpointer]){
            merged_array[i] = first[firstpointer];
            ++firstpointer;
        }
        else{
            merged_array[i] = second[secondpointer];
            ++secondpointer;
        }
        ++i;
    }
    return merged_array;
}

static int[] mergesort(int[] array){

    if(array.length == 1){
        return array;
    }
    else{
        int length = array.length;
        int[] first = Arrays.copyOfRange(array, 0, (int) length / 2);
        int[] second = Arrays.copyOfRange(array, (int) length / 2, length);
        return merge(mergesort(first), mergesort(second));
    }

} 
```

但是，如果您注意到，我使用 copyOfRange 函数创建一个新数组，该数组是父数组某个部分的副本。java中是否有比这更节省空间的合并排序实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:05:43.400

重复：[如何使用归并排序算法就地排序？](https://stackoverflow.com/questions/2571049/how-to-sort-in-place-using-the-merge-sort-algorithm)

总结：是的，有内存高效的合并排序，但它们要么 a) 非常复杂，要么 b) 不省时：O(n^2 log n)

基本上，不要打扰。实际上，您节省的内存并不多，如果您真的想要，只需使用快速排序即可。

# android - 无法理解 Android 自定义可绘制状态

> ID：14823667
> 
> 赞同：6
> 
> 时间：2013-02-12T00:44:00.630
> 
> 标签：android

我是 Android 开发的新手，我正在编写一个小应用程序来了解它是如何工作的。我已经完成了所有工作，但目前我对自定义可绘制状态一无所知……让我用一些示例代码来解释一下。

这是我的 attrs.xml，我在其中声明了一个名为“oddMonth”的属性，它是布尔值：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="DayView">
        <attr name="oddMonth" format="boolean"/>
    </declare-styleable>
</resources> 
```

然后我有一个自定义视图：

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.calendar.DayView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="90dp"
    android:background="@drawable/dayview_state" >
    <TextView android:id="@+id/day_number"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:paddingRight="3dp" />  
</com.example.calendar.DayView> 
```

所以我放了一行“android:background="@drawable/dayview_state"”，它指的是文件dayview_state.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" xmlns:easycalendar="http://schemas.android.com/apk/res/com.example.calendar">

    <item easycalendar:oddMonth ="true" android:drawable="@drawable/customborder_odd" />
    <item easycalendar:oddMonth ="false" android:drawable="@drawable/customborder_even"/>

</selector> 
```

到目前为止......据我所知......我在 attrs.xml 中定义了一个属性。此属性表示我的自定义视图的状态。根据此属性的布尔值，我的应用程序将加载两个不同的 xml 之一（在此不重要），每个都定义一个不同的可绘制对象。所以最后一步是构建我的自定义类！以下是该课程的摘录：

```
public class DayView extends RelativeLayout {
    private static final int[] STATE_ODD_MONTH = { R.attr.oddMonth };
    private boolean mOddmonth = true;

    public DayView(Context mContext, AttributeSet attrs) {
        super(mContext, attrs);
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        if (mOddmonth) {
            final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
            mergeDrawableStates(drawableState, STATE_ODD_MONTH);

            return drawableState;
        } else {
            return super.onCreateDrawableState(extraSpace);
        }
    }

    public boolean isOddMonth() {
        return mOddmonth;
    }

    public void setOddMonth(boolean oddMonth) {
        if (mOddmonth != oddMonth) {
            mOddmonth = oddMonth;

            refreshDrawableState();
        }
    }
} 
```

好的...所以我在这里有一个私有变量 mOddMonth，带有 getter 和 setter。用于在其他地方扩展此视图的构造函数。另一个私有变量：

```
private static final int[] STATE_ODD_MONTH = { R.attr.oddMonth }; 
```

这是一个仅由一个 int 值组成的数组，它是对 attrs.xml 中定义的属性 oddMonth 的引用。和继承的方法：

```
@Override
    protected int[] onCreateDrawableState(int extraSpace) {
        if (mOddmonth) {
            final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
            mergeDrawableStates(drawableState, STATE_ODD_MONTH);

            return drawableState;
        } else {
            return super.onCreateDrawableState(extraSpace);
        }
    } 
```

我无法真正“深入”理解......好吧，在我看来，如果局部变量 mOddMonth 为真，我会添加一个状态，否则不是。所以......我的代码只有在我用以下内容替换我的 dayview_state.xml 时才有效：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" xmlns:easycalendar="http://schemas.android.com/apk/res/com.example.calendar">

    <item easycalendar:oddMonth ="true" android:drawable="@drawable/customborder_odd" />
    <item android:drawable="@drawable/customborder_even"/>

</selector> 
```

这样，如果有状态，则加载第一个布局，否则将加载第二个布局。但是国家的价值呢？在我的代码中，我没有为这个变量/属性设置值....我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T19:47:00.377

我建议您改写您的问题 b/c 在我阅读您对@kcoppock 答案的评论之前，您不清楚您在问什么，即-

> “我想要做的（或者我认为我应该做的）是根据我的自定义视图的实际状态在代码中的某个位置设置这个值，然后强制它再次渲染......或者我不应该？”

**在任何时候，您都可以使用View.getDrawableState**查询视图以获取它的可绘制状态。

如果基于此，你想重新渲染你的drawable，那么你有几个选择。

首先你可以调用**Drawable.invalidateSelf**。但是您很少需要这样做，因为通常您的可绘制对象被设置为视图的背景可绘制对象，它会在 draw 方法中自动为您绘制（不是 onDraw，这是您绘制的内容）。因此，在这种情况下，您需要做的就是使视图无效（**view.invalidate**），它会自动重绘您的背景可绘制对象（因此获取可绘制状态的更改）。

如果你使用你的drawable不是作为背景而是作为你的主图，那么你在**onDraw**中绘制你的drawable 。一个简单的 myDrawable.draw(canvas) 就足够了。但请记住使用 vall view.invalidate 来触发 onDraw 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:00:08.797

你是对的；您需要在构造函数中使用 AttributeSet 变量分配该值：

```
TypedArray values = context.obtainStyledAttributes(attrs, STATE_ODD_MONTH);
boolean isOddMonth = values.getBoolean(R.attr.oddMonth, false);
mOddmonth = isOddMonth;
values.recycle(); 
```

我相信这应该可以解决问题。我通常在 attrs.xml 中使用可声明样式的标签，而不是硬编码 int[]，但我相信它应该可以同样工作。

# c# - 无法为泛型类型创建 TypeConverter

> ID：14823669
> 
> 赞同：19
> 
> 时间：2013-02-12T00:44:02.643
> 
> 标签：c#, visual-studio-2010, asp.net-web-api, asp.net-4.0, typeconverter

我想`TypeConverter`为一个泛型类创建一个，如下所示：

```
[TypeConverter(typeof(WrapperConverter<T>))]
public class Wrapper<T> 
{

   public T Value 
   {
      // get & set 
   }

   // other methods

}

public class WrapperConverter<T> : TypeConverter<T>
{

   // only support To and From strings
   public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
   {
      if (sourceType == typeof(string))
      {
         return true;
      }
      return base.CanConvertFrom(context, sourceType);
   }

   public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
   {
      if (destinationType == typeof(string))
      {
         return true;
      }
      return base.CanConvertTo(context, destinationType);
   }

   public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
   {
      if (value is string)           
      {
         TypeConverter converter = TypeDescriptor.GetConverter(typeof(T));
         T inner = converter.ConvertTo(value, destinationType);
         return new Wrapper<T>(inner);
      }
      return base.ConvertFrom(context, culture, value);
   }

   public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
   {
      if (destinationType == typeof(System.String))
      {
         Wrapper<T> wrapper = value as Wrapper<T>();
         TypeConverter converter = TypeDescriptor.GetConverter(typeof(T));
         return converter.ConvertTo(wrapper.Value, destinationType);
      }   
      return base.ConvertTo(context, culture, value, destinationType);
   }
} 
```

问题在于您不能在此行中使用泛型，这是不允许的：

```
[TypeConverter(typeof(WrapperConverter<T>))]
public class Wrapper<T> 
```

我的下一个方法是尝试定义一个可以处理任何`Wrapper<T>`实例的单个非泛型转换器。反射和泛型的混合让我难以理解如何同时**实现**和`ConvertTo`方法`ConvertFrom`。

例如，我的 ConvertTo 看起来像这样：

```
public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
{
   if (destinationType == typeof(System.String)           
       && value.GetType().IsGenericType)
   {

       // 1\.  How do I enforce that value is a Wrapper<T> instance?

       Type innerType = value.GetType().GetGenericArguments()[0];

       TypeConverter converter = TypeDescriptor.GetConverter(innerType);

       // 2\.  How do I get to the T Value property?  Introduce an interface that Wrapper<T> implements maybe?
       object innerValue = ??? 

       return converter.ConvertTo(innerValue, destinationType);

   }
   return base.ConvertTo(context, culture, value, destinationType);
} 
```

我遇到`ConvertFrom`了最大的问题，因为我无法知道将传入的字符串转换为哪个 Wrapper 类。

我已经创建了几个用于 ASP.NET 4 Web API 框架的自定义类型和 TypeConverters，这也是我需要使用它的地方。

我尝试的另一件事是在运行时分配我的通用版本转换器，如此处所示[，](http://www.kinlan.co.uk/2006/10/assigining-typeconverter-to-class-you.html)但 WebAPI 框架不尊重它（这意味着从未创建转换器）。

最后一点，我使用的是 .NET 4.0 和 VS 2010。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-20T13:16:27.470

我通过创建一个可以处理从我的泛型类派生的所有类型的单个转换器解决了这个问题。通过捕获构造函数中的信息解决了了解 ConvertFrom 中的通用 arg T 的大问题，如下所示。

```
public MyGenericConverter(Type type)
{
    if (type.IsGenericType 
        && type.GetGenericTypeDefinition() == typeof(MyGenericClass<>)
        && type.GetGenericArguments().Length == 1)
    {
        _genericInstanceType = type;
        _innerType = type.GetGenericArguments()[0];
        _innerTypeConverter = TypeDescriptor.GetConverter(_innerType);            
    }
    else
    {
        throw new ArgumentException("Incompatible type", "type");
    }
} 
```

我花了很长时间才发现 .NET 基础结构会反射性地调用此构造函数重载（如果已定义）。它不是记录在案的 TypeConverter 类的一部分。

希望这一切对下一个人有所帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-12-14T00:24:22.077

尽管@tcarvin 的回答非常有趣——它适用于 .NET Framework 4.6.1 并且从我[在代码中](https://github.com/dotnet/corefx/blob/a10890f4ffe0fadf090c922578ba0e606ebdd16c/src/System.ComponentModel.TypeConverter/src/System/ComponentModel/ReflectTypeDescriptionProvider.ReflectedTypeData.cs#L214)看到的它也应该适用于 .NET Core，但有一个替代解决方案使用`TypeDescriptionProviderAttribute`它不依赖于该实现他描述的细节（构造函数接受类型的参数`Type`）。

有：

```
public class FooTypeConverter<T> : TypeConverter { ... }

public class FooTypeDescriptor : CustomTypeDescriptor
{
    private Type objectType;

    public FooTypeDescriptor(Type objectType)
    {
        this.objectType = objectType;
    }

    public override TypeConverter GetConverter()
    {
        var genericArg = objectType.GenericTypeArguments[0];
        var converterType = typeof(FooTypeConverter<>).MakeGenericType(genericArg);
        return (TypeConverter)Activator.CreateInstance(converterType);
    }
}

public class FooTypeDescriptionProvider : TypeDescriptionProvider
{
    public override ICustomTypeDescriptor GetTypeDescriptor(Type objectType, object instance)
    {
        return new FooTypeDescriptor(objectType);
    }
} 
```

您只需要将 TypeDescriptionProviderAttribute 应用于目标类，例如：

```
[TypeDescriptionProvider(typeof(FooTypeDescriptionProvider))]
public class Foo<T> { } 
```

进而

`TypeDescriptor.GetConverter(typeof(Foo))`将按预期工作。

# c++ - Qt，在构造函数之外修改小部件属性的问题

> ID：14823670
> 
> 赞同：0
> 
> 时间：2013-02-12T00:44:03.447
> 
> 标签：c++, qt

我想知道是否有人可以告诉我这里到底发生了什么。我已经包含了一个简单配置对话框的头文件和实现文件。问题出在 updateAutoSaveGroupBox 插槽中，我无法访问或更改页面上小部件的任何属性。IE 如果未选中复选框，我想禁用某些小部件，但是当我尝试设置它们时，我会遇到读取访问冲突。任何有关此事的帮助将不胜感激。这两行中存在问题（已注释掉，因此它将暂时运行而不会引发异常）。

```
//autoSaveLabel->setDisabled(autoSaveIsEnabled);
//autoSaveSpinBox->setDisabled(getAutoSaveIsEnabled()); 
```

configWidget.h

```
class EnigmaConfigGeneralEnvironmentWidget : public QWidget
{
Q_OBJECT
public:
explicit EnigmaConfigGeneralEnvironmentWidget(QWidget *parent = 0);
~EnigmaConfigGeneralEnvironmentWidget();

signals:
void setAutoSaveIsEnabledSignal(bool autoSaveIsEnabled);

public slots:
void setAutoSaveIsEnabled(bool autoSaveIsEnabled){_AutoSaveIsenabled = autoSaveIsEnabled;}
bool getAutoSaveIsEnabled(){return _AutoSaveIsenabled;}

void updateAutoSaveGroupBox(bool autoSaveIsEnabled);

private:
void makeConnections();
void readSettings();
void writeSettings();
void createMainWidget();

QGroupBox *uiGroupBox;
QStringList localList;
QLabel *localLabel;
QComboBox *localeComboBox;
QHBoxLayout *localSelectionHLayout;
QGroupBox *systemGroupBox;
QCheckBox *autoSaveCheckBox;
QLabel *autoSaveLabel;
QSpinBox *autoSaveSpinBox;
QHBoxLayout *autoSaveHLayout;

bool _AutoSaveIsenabled;
}; 
```

配置小部件.cpp

```
#include "enigmaconfiggeneralenvironmentwidget.h"

#include <QtWidgets>

EnigmaConfigGeneralEnvironmentWidget::EnigmaConfigGeneralEnvironmentWidget(QWidget *parent) :
QWidget(parent)
{
makeConnections();
readSettings();

createMainWidget();
}

EnigmaConfigGeneralEnvironmentWidget::~EnigmaConfigGeneralEnvironmentWidget()
{
writeSettings();
}

void EnigmaConfigGeneralEnvironmentWidget::makeConnections()
    {connect(this,SIGNAL(setAutoSaveIsEnabledSignal(bool)),this,SLOT(setAutoSaveIsEnabled(bool))    );
connect(this,SIGNAL(setAutoSaveIsEnabledSignal(bool)),this,SLOT(updateAutoSaveGroupBox(bool))    );
}

void EnigmaConfigGeneralEnvironmentWidget::readSettings()
{
QSettings settings;
settings.beginGroup(tr("UI.Config.Environment.General"));
bool autoSaveIsEnabled = settings.value("autoSaveIsEnabled",bool(true)).toBool();
setAutoSaveIsEnabledSignal(autoSaveIsEnabled);
settings.endGroup();
}

void EnigmaConfigGeneralEnvironmentWidget::writeSettings()
{
QSettings settings;
settings.beginGroup(tr("UI.Config.Environment.General"));
settings.setValue("autoSaveIsEnabled",getAutoSaveIsEnabled());
settings.endGroup();
}

void EnigmaConfigGeneralEnvironmentWidget::createMainWidget()
{
localList.append(tr("Danish - ???"));
localList.append(tr("English - Australia"));
localList.append(tr("English - Canada"));
localList.append(tr("English - USA"));
localList.append(tr("English - UK"));
localList.append(tr("Finnish - Finland"));
localList.append(tr("French - Canada"));
localList.append(tr("French - France"));
localList.append(tr("Norwegian - ???"));
localList.append(tr("Swedish - ???"));

uiGroupBox = new QGroupBox();
uiGroupBox->setTitle(tr("UI Settings"));

localLabel= new QLabel();
localLabel->setText(tr("Select a language: "));

localeComboBox = new QComboBox();
localeComboBox->addItems(localList);

localSelectionHLayout = new QHBoxLayout(uiGroupBox);
localSelectionHLayout->addWidget(localLabel);
localSelectionHLayout->addWidget(localeComboBox);

systemGroupBox = new QGroupBox();
systemGroupBox->setTitle(tr("System Settigns"));

autoSaveCheckBox = new QCheckBox();
autoSaveCheckBox->setText(tr("Auto-Save Enabled: "));
autoSaveCheckBox->setChecked(getAutoSaveIsEnabled());
        connect(autoSaveCheckBox,SIGNAL(clicked(bool)),this,SIGNAL(setAutoSaveIsEnabledSignal(bool)));
autoSaveLabel = new QLabel(this);
autoSaveLabel->setText(tr("Auto-Save Interval is Every: "));

autoSaveSpinBox = new QSpinBox();
autoSaveSpinBox->setSuffix(tr("Mins."));
autoSaveSpinBox->setAccelerated(true);

autoSaveHLayout = new QHBoxLayout(systemGroupBox);
autoSaveHLayout->addWidget(autoSaveCheckBox);
autoSaveHLayout->addWidget(autoSaveLabel);
autoSaveHLayout->addWidget(autoSaveSpinBox);

QVBoxLayout *vLayout = new QVBoxLayout(this);
vLayout->addWidget(uiGroupBox);
vLayout->addWidget(systemGroupBox);
}

void EnigmaConfigGeneralEnvironmentWidget::updateAutoSaveGroupBox(bool autoSaveIsEnabled)
{
qDebug() << "debug " << autoSaveIsEnabled;
//autoSaveLabel->setDisabled(autoSaveIsEnabled);
//autoSaveSpinBox->setDisabled(getAutoSaveIsEnabled());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:52:41.437

发现它：

```
void EnigmaConfigGeneralEnvironmentWidget::readSettings()
{
QSettings settings;
settings.beginGroup(tr("UI.Config.Environment.General"));
bool autoSaveIsEnabled = settings.value("autoSaveIsEnabled",bool(true)).toBool();
setAutoSaveIsEnabledSignal(autoSaveIsEnabled);
settings.endGroup();
} 
```

你在`void setAutoSaveIsEnabledSignal(bool)`这里打电话（信号），而不是`void setAutoSaveIsEnabled(bool)`（实际的二传手）。因此，成员变量仍未初始化。

提醒自己：不要将信号命名为设置器，使用例如`void autoSaveIsEnabledChanged(bool)`

# python - 链接Scrapy后的问题

> ID：14823671
> 
> 赞同：0
> 
> 时间：2013-02-12T00:44:13.413
> 
> 标签：python, scrapy

试图让我的网络爬虫抓取从网页中提取的链接。我正在使用 Scrapy。我可以用我的爬虫成功地提取数据，但不能让它爬。我相信问题出在我的规则部分。Scrapy 新手。感谢您提前提供帮助。

我正在抓取这个网站：

```
http://ballotpedia.org/wiki/index.php/Category:2012_challenger 
```

我试图关注的链接在源代码中如下所示：

```
/wiki/index.php/A._Ghani 
```

或者

```
/wiki/index.php/A._Keith_Carreiro 
```

这是我的蜘蛛的代码：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import CrawlSpider,Rule

from ballot1.items import Ballot1Item

class Ballot1Spider(CrawlSpider):
   name = "stewie"
   allowed_domains = ["ballotpedia.org"]
   start_urls = [
       "http://ballotpedia.org/wiki/index.php/Category:2012_challenger"
   ]
   rules =  (
       Rule (SgmlLinkExtractor(allow=r'w+'), follow=True),
       Rule(SgmlLinkExtractor(allow=r'\w{4}/\w+/\w+'), callback='parse')
   )

 def parse(self, response):
   hxs = HtmlXPathSelector(response)
   sites = hxs.select('*')
   items = []
   for site in sites:
       item = Ballot1Item()
       item['candidate'] = site.select('/html/head/title/text()').extract()
       item['position'] = site.select('//table[@class="infobox"]/tr/td/b/text()').extract()
       item['controversies'] = site.select('//h3/span[@id="Controversies"]/text()').extract()
       item['endorsements'] = site.select('//h3/span[@id="Endorsements"]/text()').extract()
       item['currentposition'] = site.select('//table[@class="infobox"]/tr/td[@style="text-align:center; background-color:red;color:white; font-size:100%; font-weight:bold;"]/text()').extract()
       items.append(item)
   return items 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:55:05.567

您所追求的链接仅存在于此元素中：

```
<div lang="en" dir="ltr" class="mw-content-ltr"> 
```

因此，您必须限制 XPath 以防止无关链接：

```
restrict_xpaths='//div[@id="mw-pages"]/div' 
```

最后，您只想关注看起来像 的链接`/wiki/index.php?title=Category:2012_challenger&pagefrom=Alison+McCoy#mw-pages`，因此您的最终规则应如下所示：

```
rules = (
    Rule(
        SgmlLinkExtractor(
            allow=r'&pagefrom='
        ),
        follow=True
    ),
    Rule(
        SgmlLinkExtractor(
            restrict_xpaths='//div[@id="mw-pages"]/div',
            callback='parse'
        )
    )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:00:11.600

您正在使用带有回调的CrawlSpider `parse`，[scrapy 文档明确警告它将阻止 crawling](http://scrapy.readthedocs.org/en/0.16/topics/spiders.html#crawling-rules)。

将其重命名为类似的名称`parse_items`，您应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T00:49:36.317

`r'w+'`是错误的（我认为您的意思是`r'\w+'`）并且`r'\w{4}/\w+/\w+'`看起来也不正确，因为它与您的链接不匹配（它缺少前导`/`）。你为什么不试试`r'/wiki/index.php/.+'`呢？不要忘记`\w`不包括`.`和其他可以作为文章名称一部分的符号。

# serial-port - UART 3 Will Not Accept 5th Byte

> ID：14823674
> 
> 赞同：4
> 
> 时间：2013-02-12T00:44:33.633
> 
> 标签：serial-port, pic24

The chip in question is PIC24FJ256GB210

It is a 100-Pin TQFP form factor

We have an embedded system with two microprocessors.

The two microprocessors use a UART to communicate Which is (according to me) mapped to UART #3 on the PIC24\.

I place 4 bytes into UART #3\. All goes well. The 5th byte will not go in.

I say FIFO backup.

My local hardware expert says that if I turn off flow control that the bytes will go out no matter what.

Is this true ? I've never heard that one before. I thought it was a hardware signal on the other side; i.e., a read signal has to occur on the other side before the FIFO buffer would allow room on this side.

His definition of "turn off flow control" is for me to not use PPS (Peripheral Pin Select) to map either the RTS (Request to Send) or CTS (Clear To Send) pins to their corresponding physical pin on the board.

I did that. Result: no change; the FIFO buffer still fills up. The "#UTXBF" bit never clears after the fourth byte goes in.

I have the schematic diagram with physical pins numbered and labeled.

I have the source code and MpLab showing the executable down at the register level, right at the assembly language instructions themselves.

I am mapping the pins of UART #3 exactly and identically to the manner that I am mapping UART #2 and UART #1, and both of those other two work perfectly.

While the numbers are different, the instruction sequences are identical. The numbers match the pins.

I am debugging this for the third time, watching each bit in each register and comparing them against the manual to make sure that I have the correct corresponding numbers in the correct bit positions in the correct special function registers.

This is from MpLab's disassembler window where the opcodes show exactly which bits are set and cleared.

```
 206CC1     mov.w #0x6cc,0x0002            Mov     #Uart_3_Tx_PPS_Output_Register, W1              ;This is the register we want
 21C002     mov.w #0x1c00,0x0004           Mov     #Uart_3_Tx_Or_In_Bit_Pattern, W2                ;These are the bits we want on
 2C0FF3     mov.w #0xc0ff,0x0006           Mov     #Uart_3_Tx_And_Off_Bit_Pattern, W3              ;These are the bits we want off

 780211     mov.w [0x0002],0x0008          Mov     [W1], W4                                        ;The existing pattern
 618204     and.w 0x0006,0x0008,0x0008     And     W3, W4, W4                                      ;Turn existing bits off
 710204     ior.w 0x0004,0x0008,0x0008     Ior     W2, W4, W4                                      ;Turn Desired bits on
 780884     mov.w 0x0008,[0x0002]          Mov     W4, [W1]                                        ;And that's all there is to it 
```

After execution, `RPOR6` (which is the `Uart_3_Tx_PPS_Output_Register`) contains `0x1C06`

This is from the inc file that is used to create the masks and patterns. (I try to avoid hard coding numbers in the source files which have the actual instructions.)

```
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;                                                                                         ;;
 ;;                                                                                         ;;
 ;;    Map UART # 3 Tx Pin                                                                  ;;
 ;;                                                                                         ;;
 ;;    Docs for this are: Manual DS39975A                                                   ;;
 ;;                                                                                         ;;
 ;;    Find "TABLE 2: COMPLETE PIN FUNCTION DESCRIPTIONS FOR 100-PIN DEVICES"               ;;
 ;;    in Manual DS39975A, Page 8, where We find the secret PIC Pin Names for               ;;
 ;;    the actual physical pin numbers                                                      ;;
 ;;                                                                                         ;;
 ;;    TABLE 10-4: SELECTABLE OUTPUT SOURCES (MAPS FUNCTION TO OUTPUT)                      ;;
 ;;    Page 160, We find the output function numbers                                        ;;
 ;;                                                                                         ;;
 ;;                                                                                         ;;
 ;;                                                                                         ;;
 ;;                                   PIC     Associated             Output                 ;;
 ;;    Circuit           Physical     PIN     Control       Actual   Func.                  ;;
 ;;    Function          Pin          NAME    Reg           Bits     Number                 ;;
 ;;    ------------      ------       -----   -------       ----     -----                  ;;
 ;;                                                                                         ;;
 ;;    UART #3, TX       Pin 23       RP13    RPOR6         3F00     28         Output      ;;
 ;;                                                                                         ;;
 ;;                                                                                         ;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
```

I combined that knowledge with these notes from the family data sheet to create the constants with meaningful names.

```
 .Equiv  Uart_3_Tx_PPS_Output_Register,  RPOR6           ;Register 10-35, Page 177
    .Equiv  Uart_3_Tx_Reg_Control_Bits,     0x3F00          ;Look for "RP13R" in the big include file               ;;;DEBUG DEBUG Date: 2013-02-05  Time: 20:47:02  
    .Equiv  Uart_3_Tx_Output_Func_Number,   28              ;From Table 10-4, P. 160

    .Equiv  Uart_3_Tx_And_Off_Bit_Pattern,                  ~(Uart_3_Tx_Reg_Control_Bits)
    .Equiv  Uart_3_Tx_Or_In_Bit_Pattern,                    ( Uart_3_Tx_Output_Func_Number << RP13R0 ) 
```

From the File: "p24FJ256GB210.inc" (no quotes)

```
 ;----- RPOR6 Bits -----------------------------------------------------
         .equiv RP12R0,  0x0000
         .equiv RP12R1,  0x0001
         .equiv RP12R2,  0x0002
         .equiv RP12R3,  0x0003
         .equiv RP12R4,  0x0004
         .equiv RP12R5,  0x0005
         .equiv RP13R0,  0x0008    ;;; <<<<<----- RP13 is in the right place
         .equiv RP13R1,  0x0009
         .equiv RP13R2,  0x000A
         .equiv RP13R3,  0x000B
         .equiv RP13R4,  0x000C
         .equiv RP13R5,  0x000D 
```

After all is said and done, with or without `RTS` or `CTS` enabled, the PIC on the other side of the UART apparently never sees the first byte that I put in on this side.

Does anyone see anything where I put the wrong bit in the wrong place ?

At this moment, I cannot confidently answer yes or no to this question: Is the UART #3 TX function correctly connected to physical Pin 23 on a 100-Pin TQFP configured PIC24FJ256GB210 ?

Thanks a ton if you can identify what's going on here.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:43:04.520

Here is where I found the error and the answer to the problem

Look at special function register `U3STA`

Look for the bit `UTXEN`

It must be set.

If not, you will fill the FIFO and clog it up after the 4th byte.

The `UTXEN` is bit #10\. The assembler and compiler will probably change it to #2 in the next higher numbered byte.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:14:55.557

There is a errata issued from MicroChip about this behaviour on PIC24 microcontroller. refer: [http://ww1.microchip.com/downloads/en/DeviceDoc/80522c.pdf](http://ww1.microchip.com/downloads/en/DeviceDoc/80522c.pdf).

Page 4 of the document indicates that:

```
Module: UART (TX Buffer)
If the transmit buffer is filled sequentially with
four characters, the characters may not be
transmitted in the correct order. 
Work around
Do not completely fill the buffer before transmit-
ting data; send three characters or less at a
time. 
```

Another work arround is suggested by a developer to use the TRMT flag instead, refer to: [http://www.microchip.com/forums/m622420-print.aspx](http://www.microchip.com/forums/m622420-print.aspx)

Hope it helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:28:50.343

> My local hardware expert says that if I turn off flow control that the bytes will go out no matter what.

Yes, that's true. But that takes time, serial ports are very slow. Getting one byte transmitted from the fifo takes an *eternity*, about a millisecond at 9600 baud. Which is why UARTs are normally fed from a larger buffer by an interrupt handler.

# css - 如何在未浮动的 div 中浮动 div？

> ID：14823675
> 
> 赞同：1
> 
> 时间：2013-02-12T00:44:38.273
> 
> 标签：css, html, styles

我对 div 有一个简单的问题。如何在一个未浮动的 DIV 中浮动 3 个 DIV？

这是我的代码：

```
<div style="margin:0 auto;width:1240px;border:1px solid #000000;">
    <div style="width:200px;height:50px;float:left;border:1px solid #000000;">
        test    
    </div>
    <div style="width:200px;height:50px;float:left;border:1px solid #000000;">
        test    
    </div>
    <div style="width:200px;height:50px;float:left;border:1px solid #000000;">
        test    
    </div>
</div> 
```

我想在这个父 DIV 中浮动子 DIV，或者在不浮动的情况下使它们居中... display:inline-block 不适用于子 div，因为它们的高度不同，一个 div 是图像...所以我认为最好的方法是浮动它们并优化边距......在这种情况下，我希望父 div 在屏幕上居中，所以我使用 margin:0 auto 而不是 float 但这会导致子 div 不拉伸父 div，它显示为一条细线。

您可以测试我创建的小提琴以了解问题：http: [//jsfiddle.net/tQpM5/](http://jsfiddle.net/tQpM5/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:52:50.233

你需要的是给父 div:`overflow:hidden;`这样它就可以包含它的子 div。

子 div 将浮动在彼此旁边，但是当您重新调整浏览器大小时，它们会浮动在彼此下方，为避免这种情况，您可以给父 div 一个`min-width`.

要使父 div 居中，您可以给它一个`margin-left:auto; margin-right:auto;`，但是您必须指定一个宽度，以便它不会拉伸并占用其所有可用宽度。

既然您选择使用 float 而不是`inline-block`，那么唯一剩下的就是`margins`像您说的那样处理。

[演示](http://jsfiddle.net/nQXJr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:53:08.100

如果我理解正确，你想在同一行居中 3 个框：

```
.wrapper{
  margin:0 auto;
  text-align:center;
  vertical-align: top;
}

.box{
  width:200px;
  height:50px;
  display:inline-block;
  text-align:left;
} 
```

HTML：

```
<div class="wrapper">
  <div class="box"> 1 </div>
  <div class="box"> 2 </div>
  <div class="box"> 3 </div>
</div> 
```

[演示](http://jsfiddle.net/pNLtd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T00:53:33.383

由于所有子 div 的宽度都小于父 div 的宽度，因此它们自然应该并排排列。尝试给每个子 div 一个位置：relative; 边距：自动。这样他们应该以父母为中心

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T00:57:50.153

父 div 显示为一条线，因为它的内容是浮动的，将其高度设置为 1px。要解决此问题，您需要清除此元素之后的浮动。通常称为clearfix。

```
.clearfix:after {
  clear: both;
  content: "";
  display: table;
} 
```

然后你可以像往常一样漂浮孩子。我在父级上使用了 margin: auto 使其居中。

看这个演示：

[http://jsfiddle.net/c2NjZ/](http://jsfiddle.net/c2NjZ/)

有关清除修复的旧浏览器支持的说明，请参见：

[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T00:58:30.980

容器 div 的浮点数和它的子 div 的浮点值（或没有浮点数）是相互独立的，您只需要在关闭父 div 之前清除子 div：

```
<style type="text/css">
.clearfloat {clear:both;height:0;font-size:1px;line-height:0px;}
</style>

<div class="parent">
    <div class="child" style="float:left;">
        Hi
    </div>
    <div class="child" style="float:right;">
        There
    </div>
    <br class="clearfloat">
</div> 
```

更新您的示例：http: [//jsfiddle.net/tQpM5/2/](http://jsfiddle.net/tQpM5/2/)

# ruby-on-rails - Rails 中的 NoMethodError

> ID：14823676
> 
> 赞同：0
> 
> 时间：2013-02-12T00:44:45.883
> 
> 标签：ruby-on-rails, routes, nomethoderror

我正进入（状态

```
NoMethodError in ProjectsController#edit
undefined method `projects' for
#<User:0x28356d8>`app/controllers/projects_controller.rb:154:in `correct_user' 
```

参数是：`{"user_id"=>"1", "id"=>"1"}`

中的违规行`projects_controller`是：`@project = current_user.projects.find_by_id(params[:id])`作为

```
def correct_user
   @project = current_user.projects.find_by_id(params[:id])
   redirect_to show_user_path if @project.nil?
end 
```

我的 projects_controller#edit 方法是：

```
def edit
  @project = Project.find(params[:id])
  @project.current_step = @project.first_step
  @user = current_user
end 
```

这是由一个按钮触发的，

```
<%= link_to image_tag('img_blank.png'), edit_user_project_path(current_user), :class => "btn_edit_project" %> 
```

HTML 输出为：

```
<a class="btn_edit_project" href="/users/1/projects/1/edit"><img src="/assets/img_blank.png" alt="Img_blank"></a> 
```

我的路线文件包含以下内容：

```
resources :users do
  resources :projects
end 
```

并`rake routes`显示：

```
edit_user_project GET    /users/:user_id/projects/:id/edit(.:format)      projects#edit 
```

这个问题不断以不同的形式浮出水面，但从未退出得到解决。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:47:23.810

感谢@jvnill 的回答...

用户和项目之间的关联是一对一的。用户`has_one :project`和项目`belongs_to :user`。正如@jvnill 指出的那样，没有必要限定查找，`.find_by_id(params[:id])`因为 user_id 只会在项目表中出现一次，Rails 可以找到它。

# javascript - 将对象属性混合到对象数组中

> ID：14823679
> 
> 赞同：1
> 
> 时间：2013-02-12T00:45:06.657
> 
> 标签：javascript, underscore.js

在不以任何方式修改 arr 的情况下混合 from `extra`into的值的最有效方法是什么？使用：plain javascript、下划线、lodash（下划线兼容）、jquery 或 lodash，按优先顺序排列。`arr``result`

```
arr = [
  {name: "A"},
  {name: "B"},
  {name: "C"},
] 
```

.

```
extra = {
  "B": value1
  "C": value2
} 
```

.

```
result == [
  {name: "A"},
  {name: "B", extra: value1},
  {name: "C", extra: value2},
] 
// true ! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:48:52.740

```
for (var x = 0; x < arr.length; x++) {
    if (arr[x].hasOwnProperty('name')) {
       if (extra.hasOwnProperty(arr[x].name)) {
           arr[x].extra = extra[arr[x].name];
       }
    }
} 
```

外部`hasOwnProperty`可能是矫枉过正。

[http://jsfiddle.net/Y3Abe/2/](http://jsfiddle.net/Y3Abe/2/)

# ruby-on-rails - 什么是 Ruby on Rails 导入结构化逗号分隔文件然后创建记录 Activerecord 的方式

> ID：14823683
> 
> 赞同：0
> 
> 时间：2013-02-12T00:45:28.667
> 
> 标签：ruby-on-rails, ruby, fastercsv

我有一个结构化的逗号分隔文件，它有两种记录类型。不同的记录由标题条目区分：H 或 P。文件格式如下：

```
"H","USA","MD","20904"
"P","1","A","Female","W"
"P","2","A","Male","H" 
```

我想导入文件，然后使用导入的数据创建 activerecord 模型。我使用的方法是创建一个包含字段数、对象名称和列数的字段映射。

然后我利用现场地图

$field_map =

```
{
  'H'   =>
    {
      :count => 4,
      :object => :Header,
      :cols => [:record_type, :country_id, :state, :zip]
    },

  'R'   =>
    {
      :count => 4,
      :object => :RaceData,
      :cols => [:record_type, :household_size, :gender, :race]
    }
} 
```

然后我使用 FastCSV 导入文件并使用 case 语句来说明文件将如何转换，然后在 activerecord create 语句中使用。

```
FasterCSV.foreach(filename) do |row|
    tbl_type = row[0]
    tbl_info = $field_map[tbl_type]

   unless (tbl_info.nil?)
     field_no = tbl_info[:count]
     object = tbl_info[:object]
     columns = tbl_info[:cols]
     record_type = new_record[:record_type]
     case record_type
         when "H"
         factory_build_h_record(new_record)
         when "P"
         factory_build_p_record(new_record)
     end
   end
 end 
```

由于篇幅限制，总结了上面的代码。我的方法工作得很好，但是我对 ruby​​ 很陌生，而且我总是对最佳实践和“真正的”Ruby 做事方式感兴趣。我很想听听更有经验的程序员如何解决这个问题。感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:10:40.693

我建议`gem 'roo'`

[您在这里](http://railscasts.com/episodes/396-importing-csv-and-excel)有一个示例源代码，但我宁愿观看 10 分钟[视频](http://railscasts.com/episodes/396-importing-csv-and-excel)

# c++ - cin 创建数组但忽略 CIN 上的某些符号

> ID：14823685
> 
> 赞同：-1
> 
> 时间：2013-02-12T00:45:30.223
> 
> 标签：c++, arrays, matrix, cin, ignore-case

例如，我希望输入一组 6 个数字。但是用户将以这种格式输入它们。

[1 2 3 4 5 6]

有没有办法设计它，以便 [ ] 被忽略或不放入我创建的数组中？

就像如果要输入 1 2 3 4 5 6 一切都会好起来的。如果我要输入 [1 2 3 4 5 6] 显然我会遇到问题。有没有办法定义 [] 应该被忽略甚至不输入到输入数组中？

下面我使用重载运算符，其中我输入了信息。前两个值只是我的二维数组的维度。因此，如果我要输入 [2 2 5 3 5 3] 它只会输入 2 2 之后的值，这些值是我设置的数组的大小。但我需要处理这些符号`[ ]`，以免它们发生冲突。解决此问题的最佳方法是什么？

```
friend istream& operator>>(istream& is, Array<T> &array)
{
    int rowX, colY;
    is >> rowX;
    is >> colY;

    array.create(rowX, colY);

    for(int i = 0; i<array.numRowX(); i++)
        for(int j = 0; j<array.numColY(); j++)
        {
            T data;
            is >> data;
            array.setarray(i, j, data);
        }

    return is;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:50:30.880

您可以使用变量来读取要忽略的输入。如果你只是跳过单个字符，这样的事情应该可以工作：

```
char ignoreChar;

is >> ignoreChar; // Should be a '['

// for loop goes here

is >> ignore; // Shoudl be a ']' 
```

您可能需要添加 if 语句以确保忽略的字符实际上是您所期望的。

或者，您可以将整行作为字符串读取并从那里提取您想要的信息。这称为字符串解析。

# jquery - 引导弹出窗口中的 Ajax

> ID：14823686
> 
> 赞同：3
> 
> 时间：2013-02-12T00:45:32.837
> 
> 标签：jquery, symfony, twitter-bootstrap, jquery-post

我被这个问题困住了，我真的不知道为什么它不起作用。

如果我在引导程序的弹出框之外使用此代码，它可以工作，但是一旦我在弹出框内使用它，它就不再工作了。我的意思是，如果表单是从弹出框提交的，它就像一个普通表单一样，对新页面收费，而不是像 AJAX 脚本一样。

```
 $("#share-popover").submit(function(){
              //get the url for the form
              var url=$("#form_search").attr("action");
              alert($("#search-value").val());

              //start send the post request
               $.post(url,{
                   formName:$("#search-value").val(),
                   other:"attributes"
               },function(data){
                    if(data.responseCode==200 ){           
                        $('#output').html(data.greeting);
                        $('#output').css("color","red");
                    }
                   else if(data.responseCode==400){ //bad request
                       $('#output').html(data.greeting);
                       $('#output').css("color","red");
                   }
                   else{
                      alert("An unexpeded error occured.");
                   }
               });
              return false;
           }); 
```

按钮 ：

```
 <button id="share-dropdown" style="margin-right:5px" class="btn btn-warning pull-right" type="button" rel="popover" data-placement="bottom" data-html="true"><i class="icon icon-plus icon-white"></i> Share</button> 
```

JS：

```
 $('#share-dropdown').popover({ 
            html : true,
            content: function() {
              return $("#share-popover").html();
            }
        }); 
```

内容的HTML：

```
<div id="share-popover" style="display: none">
  <form id="form_search" action="{{ path('weezbook_site_ajax_search') }}" method="POST">
    <input id="search-value" type="text" value="Book title, authors, isbn" class="share-input" name="search-value" />
    <input type="submit"  />
  </form> 
```

我将它与 Symfony2 一起使用，我的控制器返回 JSON。

我真的不明白为什么它在盒子外面而不是里面工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:48:21.460

**编辑：**

我没有尝试，但是替换`.submit()`应该`$(document).on('submit', '#share-popover', function() {});`可以工作，因为内容是在渲染 dom 之后加载的，所以当时我无法使用 .submit() 。

* * *

我真的不知道为什么，但是用另一种方法替换 .submit() 方法可以解决问题。

这是我所做的更改：

```
<input id="search-value" type="text" placeholder="Book title, authors, isbn" class="share-input" name="search-value" onkeypress="return runScript(event)" />

function runScript(e) {
  if (e.keyCode == 13) {
    ...
    return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:59:07.090

当您与您一起工作时，`json`您必须`post`像这样指定它

```
$.post(url,{ data: something   },function(data){some process},

 'json');// define the type as json 
```

# ruby-on-rails - 从 activerecord-import gem 运行导入时 Postgres 抛出错误

> ID：14823690
> 
> 赞同：0
> 
> 时间：2013-02-12T00:46:11.573
> 
> 标签：ruby-on-rails, postgresql, activerecord-import

我在开发中切换到 Postgres，现在以下错误打破了一个测试用例：

```
PG::Error: ERROR:  column "id" of relation "assets_content_nodes" does not exist
:           SELECT pg_get_serial_sequence($1, $2) 
```

同样的错误发生在开发和生产环境中，但它不是一个显示停止器并且不影响导入。assets_content_nodes 是一个连接表，我宁愿不添加“id”列。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:00:23.887

这在[activerecord-import -v0.3.1](https://github.com/zdennis/activerecord-import)（或者可能是更早的版本，但在 0.2.11 及更早版本中被破坏）中已修复。您不再需要`id`表格上的列来进行导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:42:43.977

你也可以试试[`Upsert`](https://github.com/seamusabshere/upsert)。

如果您要进口宠物：

```
require 'csv'
require 'upsert'
u = Upsert.new Pet.connection, Pet.table_name
CSV.foreach('pets.csv', headers: :first_row) do |row|
  selector = { name: row['name'] }
  setter = row
  u.row selector, setter
end 
```

我的测试表明它比`activerecord-import`. 由于它是“更新插入”，因此如果该过程被中断并且您从头开始重新开始，通常是可以的。

# python - 使用 getattr 获取方法的对象引用

> ID：14823691
> 
> 赞同：3
> 
> 时间：2013-02-12T00:46:11.780
> 
> 标签：python, function, object, reference, getattr

说，我有以下被`class`称为`Test``method``start`

```
>>> class Test:
...     def __init__(self, *args, **kwargs):
...         pass
...     def start(self):
...         pass
... 
```

现在，我有一个独立的`function`名为`func`

```
>>> def func():
...     print 'this is a func and not a method!!!'
... 
>>> 
```

[1] 现在，`t.start`是属于`method`的一个`instance of __main__.Test``0xb769678c`

```
>>> t = Test()
>>> t.start
<bound method Test.start of <__main__.Test instance at 0xb769678c>>
>>> 
```

[2] `func`是`function`属于哪个位置的`0xb767ec6c`

```
>>> func
<function func at 0xb767ec6c>
>>> 
```

现在，我们可以使用 builtin来提取`__module__`from`t.start`和。不出意外，和属于同一个ie`func``__module__``func``t.start``module``__main__`

```
>>> func.__module__
'__main__'
>>> t.__module__
'__main__'
>>> 
```

[3] 现在，让我们将`__module__`for存储`t.start`在一个变量中`obj`

```
>>> obj = __import__(t.start.__module__)
>>> obj
<module '__main__' (built-in)>
>>> 
```

现在，我`getattr()`用来获取函数的`func`句柄如下，输出是[2]`<function func at 0xb767ec6c>``func``getattr()``identical`

```
>>> print getattr(obj, 'func')
<function func at 0xb767ec6c>
>>> 
>>> print getattr(__import__('__main__'), 'func')
<function func at 0xb767ec6c>
>>> 
```

### 问题：

我如何使用和模块名称 [3] 来获取应该是 [1]`getattr()`的句柄`Test.start``<bound method Test.start of <__main__.Test instance at 0xb769678c>>`

当我尝试使用`getattr()`时，`'t.start'`我得到以下`Traceback`

```
>>> print getattr(obj, 'Test.start')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'Test.start'
>>> 
>>> 
>>> print getattr(__import__('__main__'), 'Test.start')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'Test.start'
>>> 
```

换句话说，我有两个数据。他们是

1.  `__import__('__main__')`
2.  刺`'Test.start'`

现在，我如何获得应该是`t.start`（注意这里）的句柄`instance``<bound method Test.start of <__main__.Test instance at 0xb769678c>>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T03:49:20.827

我不确定我是否理解您的问题，但我认为这可以满足您的要求：

```
class Test:
    def __init__(self, *args, **kwargs):
        pass
    def start(self):
        pass

def func():
    print('this is a func and not a method!!!')

t = Test()

module = __import__(t.start.__module__)

print(vars(module)['Test'].start)
print(vars(module)['func'])
print(vars(module)['t'].start) 
```

(Python 3) 输出：

```
<function Test.start at 0x00E52460>
<function func at 0x00E524F0>
<bound method Test.start of <__main__.Test object at 0x008DF670>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:57:16.147

```
obj = __import__(t.start.__module__)    

test_class = getattr(obj, 'Test')

print getattr(test_class, 'start') 
```

我不确定您是否直接从模块中需要它（或者即使可能）：/

您还可以使用：

```
obj = __import__(t.start.__module__)

print obj.__dict__["Test"].__dict__["start"] 
```

但你`getattr()`这么要求...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T04:26:23.937

我想知道你为什么写`obj = __import__(t.start.__module__)`
我认为它是为主模块保留一个名称，以便有可能通过**getattr()**函数获取模块名称空间中的对象作为模块的属性。

我通知你，你不必这样做。 **globals()**是一个字典，表示主空间的全局命名空间。然后可以写，比如`globals()["func"]`获取对象**func**

我还通知您，除了 with 之外，还有另一种方法可以在对象**N**的名称空间中`getattr(N,"xyz")`获取对象**xyz** ，这要归功于它的名称，它是通过方法： 提供对对象**N的名称空间的访问权限****`xyz``__dict__``N.__dict__`**

 ***** * *

我想知道您的问题是否不在于 Python 的细微之处导致您出错。

在您的问题中，在您写的地方和您写`t.__module__`的另一个地方`t.start.__module__`。
对于这两种情况，结果是相同的，等于`"__main__"`

但是，
1) **t**没有 name 属性`__module__`
2) **t**甚至没有 name 属性`start`！
如果你打印`t.__dict__`，你会看到结果是`{ }` ！

**start**并不真正属于实例**t**的命名空间，因为它实际上属于**Test的命名空间**

以下代码证明了这些肯定：

```
class Test:
    def __init__(self, *args, **kwargs):
        pass
    def start(self):
        pass

y = Test()
y.ku = 102

print 'y.__dict__',y.__dict__
print 'Test.__dict__',Test.__dict__ 
```

结果

```
y.__dict__ {'ku': 102}
Test.__dict__ {'start': <function start at 0x011E11B0>,
'__module__': '__main__',
'__doc__': None,
'__init__': <function __init__ at 0x011E1170>} 
```

.

这个引用解释了表达式`t.__module__` 和`t.start.__module__` 给出答案的原因：

> 类**实例**具有作为字典实现的命名空间，这是搜索属性引用的**第一个位置**。
> 如果在那里找不到属性，并且实例的**类**具有该名称的属性，则使用类属性继续搜索。
> 
> [http://docs.python.org/2/reference/datamodel.html#index-55](http://docs.python.org/2/reference/datamodel.html#index-55)

因此：
1) **t**没有 name 的属性，然后 Python 在**t**`__module__`的类中搜索它 2) **t**没有 name 的属性，然后 Python 在**t**的类中搜索它 ****`start`****

 ******.

好吧，所以，Python 到**t**的类中查找 和 的值`t.__module__`上面引用`t.start.__module__`
所描述的这种机制可以通过以下代码观察到：

```
class Test:
    def __init__(self, *args, **kwargs):
        pass
    def start(self):
        pass

t = Test()

print 'getattr(t,"start")'
print getattr(t,"start")

# result is
getattr(t,"start")
<bound method Test.start of <__main__.Test instance at 0x011DF288>> 
```

我的意思是 Python 回答**t**的名称为`"start"`Test.start **的**属性，而不是**t.start**！

.

因此，从事实来看`t.start.__module__`，`"__main__"`在我看来，您可能认为 **t.start**属于模块命名空间，因此您应该能够编写类似的东西`getattr(obj,"func")`来获取对象**start**

但这是错误的。
您在模块的全局命名空间 = 命名空间中找不到方法**start**（我编写了 METHOD），因为它位于**Test**的命名空间中。作为一种方法，你必须通过实例或类或通过类本身来获得它。

* * *

还有一件事。
我精确：方法，因为我相信方法**t.start**是基于一个与它不同的功能，它**位于****模块的命名空间**中。实际上，方法是指向实例和此全局命名空间函数的指针的包装器：

> 如果您仍然不了解方法的工作原理，那么查看实现也许可以澄清问题。当引用不是数据属性的实例属性时，将搜索其类。如果名称表示作为函数对象的有效类属性，则通过将实例对象和刚刚在抽象对象中找到的函数对象打包（指向）来创建方法对象：这就是方法对象。当使用参数列表调用方法对象时，从实例对象和参数列表构造一个新的参数列表，并使用这个新的参数列表调用函数对象。
> 
> [http://docs.python.org/2/tutorial/classes.html#method-objects](http://docs.python.org/2/tutorial/classes.html#method-objects)

好吧，我想强调的是，似乎某个函数（而不是方法）存在于某处，而方法基于该函数。

我相信这个函数位于模块命名空间中，这就是为什么`Test.__dict__["start"]`
给出
`<function start at 0x011E40F0>`
while
`getattr(Test,"start")`
和`getattr(t,"start")`
give
`<unbound method Test.start>`
而`<bound method Test.start of <__main__.Test instance at 0x011DF530>>`
没有本地化绑定和未绑定方法的原因。

因此，在我看来，就我对文档的正确理解而言（顺便说一句，我发现它并没有很好地解释这些要点）方法是一个包装器，并且基于**模块中的一个真实函数namespace**，这就是为什么`t.start.__module__`和`Test.start.__module__`是`"__main__"`

当我们打印它们时，模块名称空间中存在一个没有出现在模块属性中的函数似乎有点奇怪`globals()`：

```
class Test:
    def __init__(self, *args, **kwargs):
        pass
    def start(self):
        pass

def func():
    print 'this is a func and not a method!!!'

t = Test()

print '* globals()["func"]'
print globals()["func"]
print id(globals()["func"])
print "===================================="
print '* Test.__dict__["start"]'
print Test.__dict__["start"]
print id(Test.__dict__["start"])
print '----------------------------------------------'
print '* getattr(Test,"start")'
print getattr(Test,"start")
print id(getattr(Test,"start"))
print '----------------------------------------------'
print '* getattr(t,"start")'
print getattr(t,"start")
print id(getattr(t,"start"))
print "===================================="
print globals() 
```

结果

```
* globals()["func"]
<function func at 0x011C27B0>
18622384
====================================
* Test.__dict__["start"]
<function start at 0x011DEFB0>
18739120
----------------------------------------------
* getattr(Test,"start")
<unbound method Test.start>
18725304
----------------------------------------------
* getattr(t,"start")
<bound method Test.start of <__main__.Test instance at 0x011DF418>>
18725304

{'__builtins__': <module '__builtin__' (built-in)>,
'__package__': None,
't': <__main__.Test instance at 0x011DF418>,
'func': <function func at 0x011C27B0>,
'Test': <class __main__.Test at 0x011DC538>,
'__name__': '__main__',
'__doc__': None} 
```

但事实是，我们确实看到了一个`Test.__dict__["start"]`函数，其地址 18739120 与绑定和未绑定方法的地址 18725304 不同。
此外，我看不出还有哪种解释可以解释所暴露的全部事实。

事实上，没有收到任何指定名称的函数不会出现在模块命名空间中，这并不奇怪。
它是一个内部函数，是 Python 所必需的，不是程序员可以使用的，仅此而已。

* * *

关于**func**，使用您使用的所有方法：

```
class Test:
    def __init__(self, *args, **kwargs):
        pass
    def start(self):
        pass

def func():
    print 'this is a func and not a method!!!'

t = Test()
print 'func --->',func
print id(func)

print '\nobj = __import__(t.start.__module__)  done\n'
obj = __import__(t.start.__module__)

print '* globals()["func"]'
print globals()["func"]
print id(globals()["func"])
print '* obj.__dict__["func"]'
print obj.__dict__["func"] 
print "* getattr(obj, 'func')"
print getattr(obj, 'func')
print "* getattr(__import__('__main__'), 'func')"
print getattr(__import__('__main__'), 'func') 
```

结果

```
func ---> <function func at 0x011C2470>
18621552

obj = __import__(t.start.__module__)  done

* globals()["func"]
<function func at 0x011C2470> # <== address in hexadecimal
18621552                      # <== address in decimal
* obj.__dict__["func"]
<function func at 0x011C2470>
* getattr(obj, 'func')
<function func at 0x011C2470>
* getattr(__import__('__main__'), 'func')
<function func at 0x011C2470> 
```

.

现在使用以下方法分解您的方法`obj`：

```
class Test:
    def __init__(self, *args, **kwargs):
        pass
    def start(self):
        pass

print 'Test.start -->',Test.start
print id(Test.start)
print '----------------------------------------------'
print '* Test.__dict__["start"]'
print Test.__dict__["start"]
print id(Test.__dict__["start"])

print '* getattr(Test,"start")'
print getattr(Test,"start")
print id(getattr(Test,"start"))
print '\n'

print 't.start -->',t.start
print id(t.start)
print '----------------------------------------------'
print '* t.__dict__["start"]'
try:
    print t.__dict__["start"]
    print id(t.__dict__["start"])
except KeyError as e:
    print 'KeyError :',e

print '* getattr(t,"start")'
print getattr(t,"start")
print id(getattr(t,"start")) 
```

结果

```
Test.start --> <unbound method Test.start>
18725264
----------------------------------------------
* Test.__dict__["start"]
<function start at 0x011E40F0>
18759920
* getattr(Test,"start")
<unbound method Test.start>
18725264

t.start --> <bound method Test.start of <__main__.Test instance at 0x011DB940>>
18725264
----------------------------------------------
* t.__dict__["start"]
KeyError : 'start'
* getattr(t,"start")
<bound method Test.start of <__main__.Test instance at 0x011DB940>>
18725264 
```

直到现在，我很少使用`getattr( )`.

我意识到这些结果`getattr( )`以特定方式给出结果：属性**start**被描述为一个方法，根据它是通过实例还是通过类获得的绑定或未绑定。

但是，仅`__dict__`提供有关对象真实属性的精确信息。
因此，我们看到**start**并不真正在实例的命名空间中，而只是在类的命名空间中。
当它作为命名空间的元素时，它被描述为一个函数，而当它`Test.__dict__` 作为一个属性通过时，它被描述为一个方法`getattr( )`。在最后一种情况下没有给出地址。

**vars( )**函数的使用给出了相同的结果。**********

# gradle - Gradle 下载超时/重试

> ID：14823694
> 
> 赞同：1
> 
> 时间：2013-02-12T00:46:29.857
> 
> 标签：gradle, ivy

我在一个不稳定的网络上（或者有某种代理或病毒检查器），所以我的 gradle 依赖项下载（外部模块依赖项 mavenCentral()）有时会挂起。

本地仓库会有所帮助，但是是否有任何超时和重试设置？

下载开始，然后挂起，并在默认套接字超时后超时，

我可以用 wget 模拟这个

> wget -d [http://repo1.maven.org/maven2/org/apache/santuario/xmlsec/1.5.2/xmlsec-1.5.2-sources.jar](http://repo1.maven.org/maven2/org/apache/santuario/xmlsec/1.5.2/xmlsec-1.5.2-sources.jar) Wget 1.11.4 在 Windows-MSVC 上创建的调试输出。
> 
> --2013-01-23 13:52:01-- [http://repo1.maven.org/maven2/org/apache/santuario/xmls](http://repo1.maven.org/maven2/org/apache/santuario/xmls) ec/1.5.2/xmlsec-1.5.2-sources.jar 解析repo1 .maven.org... 秒 0.00, 68.232.34.223 缓存 repo1.maven.org => 68.232.34.223 连接到 repo1.maven.org|68.232.34.223|:80... 秒 0.00，已连接。创建套接字 352。释放 0x003311d0（新引用计数 1）。
> 
> ---请求开始--- GET /maven2/org/apache/santuario/xmlsec/1.5.2/xmlsec-1.5.2-sources.jar HTTP/1.0 User-Agent: Wget/1.11.4 Accept: */* Host: repo1.maven.org 连接：保持活动
> 
> ---请求结束--- HTTP 请求已发送，等待响应... ---响应开始--- HTTP/1.0 200 OK 接受范围：字节 内容类型：应用程序/java-archive 日期：星期三，1 月 23 日2013 12:52:01 GMT 最后修改时间：星期一，2012 年 5 月 14 日 08:47:03 GMT 服务器：ECAcc (lhr/4ABA) X-Cache：HIT 内容长度：577534 连接：保持活动
> 
> ---response end--- 200 OK 注册套接字 352 以供持久重用。长度：577534 (564K) [application/java-archive] 保存到：`xmlsec-1.5.2-sources.jar.1'
> 
> 5% [=> ] 33,328 --.-K/s eta 17m 52s ^

我希望它更快地超时并重试下载，

# android - Android 联系人表更新但未保存到 SIM

> ID：14823703
> 
> 赞同：2
> 
> 时间：2013-02-12T00:47:53.860
> 
> 标签：android, android-contacts, updates

我正在尝试更新与 SIM 上的联系人关联的电话号码。我可以更新数据表的行，但更改不会传播到 SIM。更新后我将数据行转储出去；_ID 仍然相同，电话 (data1) col 有新的电话号码。当我重新启动手机时，该条目具有旧值。联系人的原始联系人号码已增加 1。关于如何使更改在 SIM 中持久存在的任何想法？（是的，我知道有些文档说不支持访问 SIM。但通讯录应用程序可以做到这一点 - 应用程序必须有一种方法来更新 SIM 卡。）可能有拼写错误 - 我必须（重新）输入在这里手动编码。

这是我用来更新行的代码。

```
String rawId = "87"; // provided by caller; hardcoded here for brevity
String num = "212-222-3333";   // new phone #

ContentResolver cr = ...get actvity's resolver...

Uri uri = ContactsContract.Data.CONTENT_URI;

ContentValues cv = new ContentValues();
cv.put(ContactsContract.CommonDataKinds.Phone.Number, num);

String select = ContactsContract.Data.RAW_CONTACT_ID " + " = " + rawId + " and " +
    ContactsContract.Data.MIMETYPE + " = '" + 
        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_ITEM + "'";
String[] selectArgs = {};

cr.update(uri, cv, select, selectArgs); 
```

捕获异常和其他细节省略。

感谢您提供任何线索！

# python - 在列表 python 列表中查找 [max,min] 值

> ID：14823705
> 
> 赞同：-1
> 
> 时间：2013-02-12T00:48:18.247
> 
> 标签：python, list, max, min

所以我有一个列表列表

```
alist = [[distance1,delta-angle1,object1],[distance2,delta-angle2,object2], [distance3,delta-angle3,object3],...] 
```

我想最大化“距离”并最小化“delta-angle”，这是每个元素的前两个元素`list`并`alist`返回该特定列表。

警告：`distance`将是一个浮点数，`delta-angle`以度为单位（-180:180）

目标是选择具有“最直”角度的最长距离，而不仅仅是最长或“最直”（也称为最小化角度变化）

编辑：我无法上传图片，所以这是一个链接。

[http://imgur.com/a/b6KWM#YqGxdlu](http://imgur.com/a/b6KWM#YqGxdlu)

在这种特殊情况下，我想避免“回到原来的位置”。如第二张图所示

图 2

第三张图像是理想的——因为我还没有想到更好的方式来说明这一点：最小化当前方位角的变化（哪个 delta-angle 是`alist`已经存储的）并最大化`distance`可用的或长度线段（在下图中由边界上的端点表示）

图片 3 [http://imgur.com/a/b6KWM#YqGxdlu](http://imgur.com/a/b6KWM#YqGxdlu)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:14:18.477

即使经过澄清，您的规则仍然模棱两可。在编写该规则之前，您需要弄清楚要实施什么规则。

如果规则足够简单，您应该能够编写一个返回值越高匹配越好的函数。在这种情况下，您可以将该函数作为`key`to传递`max`（或者您可以`sorted`、 or`heapq.nlargest`等​​，具体取决于您的实际用例）。

例如，如果规则只是“具有最大 X 分量的对象是最好的”，正如 Blckknght 所说，那就是`distance*cos(angle)`. 当然，除了你可能想要最大的正或负 X 分量，所以它实际上是`abs(that)`. 所以：

```
def best(alist):
    return max(alist, key=lambda dao: abs(dao[0] * math.cos(dao[1])) 
```

（因为 的每个元素`list`都是`list`of ，所以`distance, angle, object`我称每个元素为 ，距离等也是）`dao``dao[0]`

如果您不知道如何将规则变成单键功能怎么办？

好吧，如果你可以编写一个比较函数，比较两个`dao`三元组并返回更大的一个，你可以用[`functools.cmp_to_key`](http://docs.python.org/2/library/functools.html#functools.cmp_to_key)它把它变成一个`key`函数。但实际上，您可以编写`cmp`函数但不能编写`key`函数的情况并不常见。

如果你需要更复杂的东西，你总是可以预先过滤列表，或者装饰-排序-取消装饰等。

例如，在评论中，您说：

> 最大的效用来自于 -90:0:90 范围内的长线，而无论距离有多长，其他一切都几乎没有效用。

这是模棱两可的，但我们可以解释它的一种方式是：

*   如果有任何对象的角度在 [-90, 90] 范围内，请从这些对象中选择最长的。
*   否则，选择角度最小的对象。

我*可以*把它写成一个关键函数，但是让我们假装我不知道怎么做，并且想让一切都变得明确。为它编写一个键函数是微不足道的`longest`——就像`dao[0]`键一样。编写一个关键函数`smallest angle`也很简单——那就是`abs(dao[1])`. 所以：

```
def best(alist):
    acutes = [[d, a, o] for [d, a, o] in alist if abs(a) <= 90]
    if acutes:
        return max(acutes, key=lambda dao: dao[0])
    else:
        return min(alist, key=lambda dao: abs(dao[1])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:03:09.873

```
alist = [[0,0,'b'],[-30,50,'a'],
         [45,63,'d'],[100,170,'d'],
         [-2,15,'p']]

def mM(L):
    x,y,_ = zip(*L)
    return (min(x),max(y))

print mM(alist) 
```

结果

```
(-30, 170) 
```

# php - CodeIgniter 表单验证回调函数对路由器可见

> ID：14823706
> 
> 赞同：0
> 
> 时间：2013-02-12T00:48:21.337
> 
> 标签：php, forms, codeigniter, validation, controller

谁能告诉我是否有办法使用 CodeIgniter 中的 form_validation 库回调到控制器的实用程序函数？我有一个名为的函数`check_database`，它是在 form_validation 的函数中设置的回调`set_rules`函数......问题是它是我的控制器中的一个函数，它使它作为一种方法对路由器可见。

我可以导航到`index.php/controller/check_database`它，它会尝试呈现一个页面，而不是出现 404 错误。我已经尝试通过在函数名称前加上下划线来使其成为实用函数，但该`set_rules`函数似乎不喜欢`callback__check_database`.

无论如何我可以将回调函数指定为实用函数...或隐藏非实用函数对 CodeIgniter 中的路由器可见？这似乎应该是完全可能的......或者我什至应该`form_validation`在`Controller`课堂上使用？

甚至官方指南也使用控制器中的回调函数（[http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)），所以如果我去`form/username_check`控制器不会尝试渲染一些东西基于该函数的输出？...我猜它不仅仅是 404。

**更新**：目前我将回调设置为`callback__check_database`，并将我的函数定义为实用函数（`_check_database`）。这似乎可行，但是我目前无法确定，因为我短暂地显示了一个屏幕，在它重新路由回我的登录页面之前，它似乎有某种 PHP 错误。我正在努力寻找一种方法来捕获该错误。

# php - 使用 jQuery 从同一 php 上的 json 数组中获取匹配的数据

> ID：14823707
> 
> 赞同：0
> 
> 时间：2013-02-12T00:48:35.673
> 
> 标签：php, jquery, ajax, cakephp

我是 jquery 的新手。在我当前的 cakephp 页面中，网址是：

```
http://localhost/ultimate/admin/treatments/add 
```

我有一个 json 数组：`<?php $json = $this->Js->object($matchs);?>`内容有：`'[{"Type":{"name":"Items 1","price":"15","duration":"10"}},{"Type":{"name":"Items 2","price":"30","duration":"25"}}]'`

现在我有了一个名称：Items 1，如何使用 Jquery 从 json 数组中获取价格并更新到一个输入区域。

像这样的东西，但我不知道：

```
$(document).ready(function(){
    $('#treatment_foo').change(function(){

        $.ajax({
            url: 'add',
            data: 
            dataType: 'json',
            cache: false,
            success: function(result) {
        $('#fee_foo').val($('#treatment_foo').val());
      },

        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:58:16.083

```
success: function(result) {
   $('#fee_foo').val( result[0].Type.price );
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:07:48.633

您还可以使用`getJson`jQuery 函数。

**像**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    (function($)
    {
        $.getJSON(URL,
        {
            params1: "value",
            params2: "value"
        },
        function(result)
        {
            $.each(result.Type, function(i,item)
            {
                console.log(item.name);
                console.log(item.price);
                console.log(item.duration);
                if ( item.name == 'Item 1' ) return;
            });
        });
    });

</script>
```

如您所见，您可以循环`json`显示结果并根据需要进行比较，
Cheers...随时
提问。

# c# - 在类级别变量上使用 using 语句是不好的做法吗？

> ID：14823710
> 
> 赞同：9
> 
> 时间：2013-02-12T00:49:24.640
> 
> 标签：c#, scope, using

我有类似于以下的代码。

```
class MyController
{
    [ThreadStatic] private DbInterface db;

    public void ImportAllData()
    {
        using (db = new DbInterface())
        {
            var records = PullData();
            PushData(records);
        }
    }

    private DbRecord[] PullData()
    {
        return db.GetFromTableA();
    }

    private void PushData(DbRecord[] records)
    {
        db.InsertIntoTableB(records);
    }
} 
```

替代方案维护起来要麻烦得多。

```
class MyController
{
    public void ImportAllData()
    {
        using (var db = new DbInterface())
        {
            var records = PullData(db);
            PushData(records, db);
        }
    }

    private DbRecord[] PullData(DbInterface db)
    {
        return db.GetFromTableA();
    }

    private void PushData(DbRecord[] records, DbInterface db)
    {
        db.InsertIntoTableB(records);
    }
} 
```

据我所知，我的第一个实现：

*   是线程安全的（假设`DbInterface`是线程安全的），
*   防止任何其他进程接触`db`变量，并且
*   即使`db`在异常期间，也将始终释放 ensure。

`using`在具有类范围的变量上使用语句是不好的做法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T00:51:59.863

就个人而言，我更喜欢你的第二种选择。

第一个设计的问题在于您有效地为设计添加了不必要的耦合。您的`PullData`和`PushData`方法不能单独使用 - 它们*需要*首先调用对设置和正确清理变量的调用`ImportAllData`或其他方法。`db`

第二个选项虽然代码*稍微*多一些（虽然不多），但使每个方法的意图都非常清晰。每个方法都知道它需要处理`DbInterface`传入它的外部实例。将来被滥用的可能性很小或根本没有。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T00:52:02.193

您的第一个变体暴露`db`在由`using`块管理的范围之外。这打开了意外副作用的可能性。例如，另一种方法可能会使用甚至丢弃 db. 如果您或后来的维护者忘记了隐式合约，`db`甚至忘记了代码中的拼写错误，这可能会发生。

我不会使用第一个变体。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T00:58:47.843

这是一个替代方案：

```
sealed class MyImporter
{
    private readonly DbInterface db;

    public MyImporter(DbInterface db)
    {
        this.db = db;
    }

    public void ImportAllData()
    {
        var records = PullData();
        PushData(records);
    }

    private DbRecord[] PullData()
    {
        return db.GetFromTableA();
    }

    private void PushData(DbRecord[] records)
    {
        db.InsertIntoTableB(records);
    }
} 
```

在这种情况下，保持引用是类责任的一个明确部分。它现在也将处置责任推给了用户。这种更明确的构造减少了向“控制器”添加附加功能的诱惑，这是您的第一种方法从长远来看可能会变坏的原因。本质上，我们将 Import 函数重构为一个单独的类，以便共享字段访问不再是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T01:15:04.500

这就是构造的用途。我会小心地将 using 放入属性中，因为约定规定属性访问是轻量级的，并且当用户认为他们只是在访问一个变量时，他们不一定想要触发创建 - 处置周期。

然而，下面关于代码结构的注释很重要——如果你想进行一次导入，它就变成了用户需要了解的设置步骤。如果您可以设想不同的访问模式，则依赖注入设置允许用户控制连接的创建和处置。

# ajax - 从 JQuery 向 Web API 进行 POST 时出现问题

> ID：14823711
> 
> 赞同：4
> 
> 时间：2013-02-12T00:49:33.580
> 
> 标签：ajax, jquery, asp.net-web-api

我有一个带有以下 POST 方法的 web api

```
public HttpResponseMessage Post([FromBody]string package) 
```

我有一个使用`HttpCLient`没有问题的控制台应用程序。当我尝试通过 拨打电话时`jQuery`，我得到`null`了包变量。

这是我现在拥有的代码：

```
$.ajax({
        url: 'http://localhost:8081/api/Package/',
        type: 'POST',
        data: JSON.stringify(message),       
    contentType: "application/json;charset=utf-8",
        success: function (data) {
            alert(data.length);

        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert('Status: '+xhr.status+', Error Thrown: '+thrownError);

        }
    }); 
```

“消息”变量是一个包含两个属性的复杂模型。

我可能做错了什么？

我会感谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:26:11.210

There might be an issue with binding the value to the response sent to the server

try sending the data as

```
$.ajax({
        url: 'http://localhost:8081/api/Package/',
        type: 'POST',
        data: { package : JSON.stringify(message) }        
        datatype: 'json',
        success: function (data) {
            alert(data.length);

        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert('Status: '+xhr.status+', Error Thrown: '+thrownError);

        }
    }); 
```

*I am assuming that your* `JSON.stringify(message)` *returns a string value*

**updated**

```
 public HttpResponseMessage Post([ModelBinder]string package) 
```

allowing package to bind from everywhere instead of just body did it for me.

# c# - 高效滚动最大和最小窗口

> ID：14823713
> 
> 赞同：13
> 
> 时间：2013-02-12T00:49:53.177
> 
> 标签：c#, performance

我想有效地计算滚动最大值和最小值。这意味着比每次窗口移动时从所有正在使用的值重新计算最大值/最小值更好。

这里有一篇帖子问了同样的问题，有人发布了一个解决方案，其中涉及某种堆栈方法，该方法应该根据其评级起作用。但是，我这辈子都找不到了。

任何帮助将不胜感激找到解决方案或帖子。谢谢你们！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T00:59:59.013

您要使用的算法称为**升序最小值** [（C++ 实现）](http://people.cs.uct.ac.za/~ksmith/articles/sliding_window_minimum.html#sliding-window-minimum-algorithm)。

要在 C# 中执行此操作，您将需要一个[双端队列](http://en.wikipedia.org/wiki/Deque)类，并且在 NuGet 上存在一个名为[Nito.Deque](http://nuget.org/packages/Nito.Deque/)的好的类。

我已经使用 Nito.Deque 编写了一个快速的 C# 实现，但我只是简单地检查了它，并且是从我的脑海中完成的，所以它可能是错误的！

```
public static class AscendingMinima
{
    private struct MinimaValue
    {
        public int RemoveIndex { get; set; }
        public double Value { get; set; }
    }

    public static double[] GetMin(this double[] input, int window)
    {
        var queue = new Deque<MinimaValue>();
        var result = new double[input.Length];

        for (int i = 0; i < input.Length; i++)
        {
            var val = input[i];

            // Note: in Nito.Deque, queue[0] is the front
            while (queue.Count > 0 && i >= queue[0].RemoveIndex)
                queue.RemoveFromFront();

            while (queue.Count > 0 && queue[queue.Count - 1].Value >= val)
                queue.RemoveFromBack();

            queue.AddToBack(new MinimaValue{RemoveIndex = i + window, Value = val });

            result[i] = queue[0].Value;
        }

        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T01:01:51.960

这是一种更有效的方法。您仍然需要*偶尔*计算该值，但除了某些退化数据（不断减小的值）之外，在此解决方案中已将其最小化。

我们将自己限制在最大限度以简化事情，但也很容易扩展到最低限度。

您只需要以下内容：

*   窗口本身，最初是空的。
*   当前最大值 ( `max`)，最初为任何值。
*   当前最大值 ( `maxcount`) 的计数，最初为零。

这个想法是使用`max`和`maxcount`作为保存当前最大值的缓存。缓存有效的地方，只需要返回里面的值，非常快的常量时间操作。

如果在请求最大值时缓存无效，它会填充缓存然后返回该值。这比上一段中的方法慢，但是一旦缓存再次有效，后续对最大值的请求将使用该更快的方法。

以下是您为维护窗口和相关数据所做的工作：

1.  获取下一个值`N`。

2.  如果窗口已满，则删除最早的条目`M`。如果 maxcount 大于 0 且`M`等于`max`，则递减`maxcount`。一旦`maxcount`达到 0，缓存是无效的，但我们不需要担心，直到用户*请求*最大值（在那之前重新填充缓存没有意义）。

3.  添加`N`到滚动窗口。

4.  如果窗口大小现在为 1（即`N`当前唯一的条目），则设置`max`为`N`和`maxcount`1，然后返回步骤 1。

5.  如果`maxcount`大于 0 且`N`大于`max`，则设置`max`为`N`和`maxcount`为 1，然后返回步骤 1。

6.  如果`maxcount`大于 0 且`N`等于`max`，则递增`maxcount`。

7.  回到步骤 1。

现在，在进行窗口管理的*任何*时候，您都可以请求最大值。这是一个单独的操作，与窗口管理本身不同。这可以按顺序使用以下规则来完成。

1.  如果窗口为空，则没有最大值：引发异常或返回一些合理的哨兵值。

2.  如果`maxcount`大于 0，则缓存有效：只需 return `max`。

3.  否则，需要重新填充缓存。浏览整个列表，`max`按照`maxcount`下面的代码片段进行设置。

* * *

```
set max to window[0], maxcount to 0
for each x in window[]:
    if x > max:
        set max to x, maxcount to 1
    else:
        if x == max:
            increment maxcount 
```

* * *

您主要维护最大值的缓存并且*仅*在需要时重新计算这一事实使得这比在添加条目时简单地重新计算更有效。

对于一些明确的统计数据，我创建了以下 Python 程序。它使用大小为 25 的滑动窗口并使用从 0 到 999 的随机数（您可以使用这些属性来查看它们如何影响结果）。

首先是一些初始化代码。注意`stat`变量，它们将用于计算缓存命中和未命中：

```
import random

window = []
max = 0
maxcount = 0
maxwin = 25

statCache = 0
statNonCache = 0 
```

然后根据我上面的描述向窗口添加数字的功能：

```
def addNum(n):
    global window
    global max
    global maxcount
    if len(window) == maxwin:
        m = window[0]
        window = window[1:]
        if maxcount > 0 and m == max:
            maxcount = maxcount - 1

    window.append(n)

    if len(window) == 1:
        max = n
        maxcount = 1
        return

    if maxcount > 0 and n > max:
        max = n
        maxcount = 1
        return

    if maxcount > 0 and n == max:
        maxcount = maxcount + 1 
```

接下来，从窗口返回最大值的代码：

```
def getMax():
    global max
    global maxcount
    global statCache
    global statNonCache

    if len(window) == 0:
        return None

    if maxcount > 0:
        statCache = statCache + 1
        return max

    max = window[0]
    maxcount = 0
    for val in window:
        if val > max:
            max = val
            maxcount = 1
        else:
            if val == max:
                maxcount = maxcount + 1
    statNonCache = statNonCache + 1

    return max 
```

最后，测试工具：

```
random.seed()
for i in range(1000000):
    val = int(1000 * random.random())
    addNum(val)
    newmax = getMax()

print("%d cached, %d non-cached"%(statCache,statNonCache)) 
```

*请注意，每次*向窗口添加数字时，测试工具都会尝试获取最大值。在实践中，这可能是不需要的。换句话说，这是生成的随机数据的最坏情况。

* * *

出于伪统计目的运行该程序几次，我们得到（为报告目的进行格式化和分析）：

```
 960579 cached,  39421 non-cached
 960373 cached,  39627 non-cached
 960395 cached,  39605 non-cached
 960348 cached,  39652 non-cached
 960441 cached,  39559 non-cached
 960602 cached,  39398 non-cached
 960561 cached,  39439 non-cached
 960463 cached,  39537 non-cached
 960409 cached,  39591 non-cached
 960798 cached,  39202 non-cached
=======         ======
9604969         395031 
```

所以你可以看到，对于随机数据，平均只有大约 3.95% 的情况会导致计算命中（缓存未命中）。绝大多数使用缓存的值。这应该比每次插入窗口时都必须重新计算最大值要好得多。

会影响该百分比的一些因素是：

*   窗口大小。更大的大小意味着缓存命中的可能性更大，从而提高了百分比。例如，将窗口大小加倍几乎可以将缓存未命中率减半（达到 1.95%）。
*   可能值的范围。此处选择较少意味着窗口中更有可能发生缓存命中。例如，将范围从 减少`0..999`到`0..9`减少缓存未命中（0.85%）有很大的改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:03:36.850

我假设您所说的“窗口”是指一个`a[start]`到的范围`a[start + len]`，并且`start`沿着移动。考虑最小值，最大值相似，并且移动到窗口`a[start + 1]`到`a[start + len + 1]`。那么窗口的最小值只有在（a）`a[start + len + 1] < min`（一个较小的值进来）或（b）`a[start] == min`（刚刚剩下的最小值之一；重新计算最小值）时才会改变。

另一种可能更有效的方法是用第一个窗口填充优先级队列，并使用每个进入/离开的值进行更新，但我认为这并没有好得多（优先级队列不适合“挑选从中间取出随机元素”（推进窗口时需要做的事情）。而且代码会复杂得多。最好坚持简单的解决方案，直到*证明*性能不可接受，并且该代码负责用于（大部分）资源消耗。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-25T09:35:51.393

在昨天写了我自己的算法并要求改进之后，我被推荐到这里。事实上，这个算法更优雅。我不确定它是否提供恒定速度计算，无论窗口大小如何，但无论如何，我测试了性能与我自己的缓存算法（相当简单，并且可能使用与其他人提出的相同想法）。缓存速度提高了 8-15 倍（使用 5,50,300,1000 的滚动窗口进行测试，我不需要更多）。以下是秒表和结果验证的替代方案。

```
static class Program
{
    static Random r = new Random();
    static int Window = 50; //(small to facilitate visual functional test). eventually could be 100 1000, but not more than 5000.
    const int FullDataSize =1000;
    static double[] InputArr = new double[FullDataSize]; //array prefilled with the random input data.

    //====================== Caching algo variables
    static double Low = 0;
    static int LowLocation = 0;
    static int CurrentLocation = 0;
    static double[] Result1 = new double[FullDataSize]; //contains the caching mimimum result
    static int i1; //incrementor, just to store the result back to the array. In real life, the result is not even stored back to array.

    //====================== Ascending Minima algo variables
    static double[] Result2 = new double[FullDataSize]; //contains ascending miminum result.
    static double[] RollWinArray = new double[Window]; //array for the caching algo
    static Deque<MinimaValue> RollWinDeque = new Deque<MinimaValue>(); //Niro.Deque nuget.
    static int i2; //used by the struct of the Deque (not just for result storage)

    //====================================== my initialy proposed caching algo
    static void CalcCachingMin(double currentNum)
    {
        RollWinArray[CurrentLocation] = currentNum;
        if (currentNum <= Low)
        {
            LowLocation = CurrentLocation;
            Low = currentNum;
        }
        else if (CurrentLocation == LowLocation)
            ReFindHighest();

        CurrentLocation++;
        if (CurrentLocation == Window) CurrentLocation = 0; //this is faster
        //CurrentLocation = CurrentLocation % Window; //this is slower, still over 10 fold faster than ascending minima

        Result1[i1++] = Low;
    }

    //full iteration run each time lowest is overwritten.
    static void ReFindHighest()
    {
        Low = RollWinArray[0];
        LowLocation = 0; //bug fix. missing from initial version.
        for (int i = 1; i < Window; i++)
            if (RollWinArray[i] < Low)
            {
                Low = RollWinArray[i];
                LowLocation = i;
            }
    }

    //======================================= Ascending Minima algo based on http://stackoverflow.com/a/14823809/2381899 
    private struct MinimaValue
    {
        public int RemoveIndex { get; set; }
        public double Value { get; set; }
    }

    public static void CalcAscendingMinima (double newNum)
    { //same algo as the extension method below, but used on external arrays, and fed with 1 data point at a time like in the projected real time app.
            while (RollWinDeque.Count > 0 && i2 >= RollWinDeque[0].RemoveIndex)
                RollWinDeque.RemoveFromFront();
            while (RollWinDeque.Count > 0 && RollWinDeque[RollWinDeque.Count - 1].Value >= newNum)
                RollWinDeque.RemoveFromBack();
            RollWinDeque.AddToBack(new MinimaValue { RemoveIndex = i2 + Window, Value = newNum });
            Result2[i2++] = RollWinDeque[0].Value;
    }

    public static double[] GetMin(this double[] input, int window)
    {   //this is the initial method extesion for ascending mimima 
        //taken from http://stackoverflow.com/a/14823809/2381899
        var queue = new Deque<MinimaValue>();
        var result = new double[input.Length];

        for (int i = 0; i < input.Length; i++)
        {
            var val = input[i];

            // Note: in Nito.Deque, queue[0] is the front
            while (queue.Count > 0 && i >= queue[0].RemoveIndex)
                queue.RemoveFromFront();

            while (queue.Count > 0 && queue[queue.Count - 1].Value >= val)
                queue.RemoveFromBack();

            queue.AddToBack(new MinimaValue { RemoveIndex = i + window, Value = val });

            result[i] = queue[0].Value;
        }

        return result;
    }

    //============================================ Test program.
    static void Main(string[] args)
    { //this it the test program. 
        //it runs several attempts of both algos on the same data.
        for (int j = 0; j < 10; j++)
        {
            Low = 12000;
            for (int i = 0; i < Window; i++)
                RollWinArray[i] = 10000000;
            //Fill the data + functional test - generate 100 numbers and check them in as you go:
            InputArr[0] = 12000;
            for (int i = 1; i < FullDataSize; i++) //fill the Input array with random data.
                //InputArr[i] = r.Next(100) + 11000;//simple data.
                InputArr[i] = InputArr[i - 1] + r.NextDouble() - 0.5; //brownian motion data.

            Stopwatch stopwatch = new Stopwatch();
            stopwatch.Start();
            for (int i = 0; i < FullDataSize; i++) //run the Caching algo.
                CalcCachingMin(InputArr[i]);

            stopwatch.Stop();
            Console.WriteLine("Caching  : " + stopwatch.ElapsedTicks + " mS: " + stopwatch.ElapsedMilliseconds);
            stopwatch.Reset();

            stopwatch.Start();
            for (int i = 0; i < FullDataSize; i++) //run the Ascending Minima algo
                CalcAscendingMinima(InputArr[i]);

            stopwatch.Stop();
            Console.WriteLine("AscMimima: " + stopwatch.ElapsedTicks + " mS: " + stopwatch.ElapsedMilliseconds);
            stopwatch.Reset();

            i1 = 0; i2 = 0; RollWinDeque.Clear();
        }

        for (int i = 0; i < FullDataSize; i++) //test the results.
            if (Result2[i] != Result1[i]) //this is a test that algos are valid. Errors (mismatches) are printed.
                Console.WriteLine("Current:" + InputArr[i].ToString("#.00") + "\tLowest of " + Window + "last is " + Result1[i].ToString("#.00") + " " + Result2[i].ToString("#.00") + "\t" + (Result1[i] == Result2[i])); //for validation purposes only.

        Console.ReadLine();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T02:58:38.640

我建议维护一个支持`getMin()`或的堆栈`getMax()`。

这可以通过两个堆栈来完成，并且只花费恒定的时间。

仅供参考：[https ://www.geeksforgeeks.org/design-a-stack-that-supports-getmin-in-o1-time-and-o1-extra-space/](https://www.geeksforgeeks.org/design-a-stack-that-supports-getmin-in-o1-time-and-o1-extra-space/)

# android - 安卓，谷歌驱动API。文件夹搜索/插入 java.lang.IllegalArgumentException：无法创建 com.google.abaae 类的新实例

> ID：14823715
> 
> 赞同：2
> 
> 时间：2013-02-12T00:50:06.077
> 
> 标签：android, google-drive-api

我在 android 应用程序中使用 Google Drive API。当应用程序由 debug.keystore 签名时效果很好。但是，如果我通过生产密钥对其进行签名，我会遇到奇怪的异常。

搜索和创建文件夹的代码：

```
com.google.api.services.drive.Drive.Files.List request = 
    service.files().list()
        .setQ("'" + folderId + "' in parents " +
            "and mimeType='application/vnd.google-apps.folder' " +
            "and trashed=false " +
            "and title='" + title + "'");
FileList files = request.execute();
if (files.getItems().size() == 0) {
    ParentReference parentReference = new ParentReference();
    parentReference.setId(folderId);
    parent.add(parentReference);
    File body = new File();
    body.setTitle(title);
    body.setMimeType("application/vnd.google-apps.folder");
    body.setParents(parent);
    File file = service.files().insert(body).execute();
    folderId = file.getId();
} else {
    folderId = files.getItems().get(0).getId();
} 
```

FileList 文件 = request.execute(); -- 执行方法给出异常：

> java.lang.IllegalArgumentException：无法创建类 com.google.abaae 的新实例，因为它没有可访问的默认构造函数

所以这部分代码不能搜索和插入文件夹。**仅当应用程序由生产密钥签名时**才会出现此异常。使用调试密钥，它可以完美运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:11:28.063

解决了。Proguard 是“没有可访问的默认构造函数”的原因

> ProGuard 工具通过删除未使用的代码并用语义模糊的名称重命名类、字段和方法来缩小、优化和混淆您的代码。
> 
> ProGuard 仅在您以发布模式构建应用程序时运行

[ProGuard](http://developer.android.com/tools/help/proguard.html)

# jquery - Jquery 1.9 在表单中选择跨度标签

> ID：14823716
> 
> 赞同：-1
> 
> 时间：2013-02-12T00:50:17.823
> 
> 标签：jquery

我有一个回调函数，它是对我的服务器的 ajax 调用的一部分。当数据返回给回调函数时，该函数需要将信息发布到位于调用表单标签内的跨度标签中。

我知道这条线是不正确的，但我把它留在那里，希望它能解释我的意图。我正在寻求帮助以查找从表单中选择 span 标签的语法。

```
$form.find("UpdateMessage").replaceWith(data.processingMessage); 
```

-

```
var ajaxUpdateWaitTime = function () {
    var $form = $(this);

    var options = {
        url: $form.attr('action'),
        type: $form.attr('method'),
        data: $form.serialize()
    };

    $.ajax(options).done(function (data) {

        $form.find("UpdateMessage").replaceWith(data.processingMessage);
        $form.children("UpdateMessage").effect('highlight');
    });

    return false;
}; 
```

如果有帮助，这里是标记。

```
<input type="button" data-ucw-updateWaitTimeButton="@facility.Id" value="Edit" />
                    <form method="post" action=@Url.Action("UpdateWaitTime", "Facilities") data-ucw-updateWaitTimeForm="@facility.Id" style="display:none" >
                        <input type="hidden" value="@facility.Id" />
                        <input type="text" value="0" style="width:15px" />
                        <input type="submit" value="Update Wait Time" />
                        <span class="UpdateMessage"></span>
                    </form> 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:08:26.297

经过大量挖掘和测试，这似乎有效。

```
var $formId = $form.attr('id');
var $spanTag = $('form#' + $formId + '> span.updateMsg.updateMsg'); 
```

# android - Spring 中的 Quartz，就像 Android 中的调度程序一样？

> ID：14823717
> 
> 赞同：2
> 
> 时间：2013-02-12T00:50:27.583
> 
> 标签：android, scheduling

我搜索了很多。但我无法得到解决方案。在 Spring 中，`Quartz`被用作重复特定任务的调度程序。同样在 android 中，什么是调度程序可用于在特定时间间隔重复执行任务。我需要一个 Android 调度程序，并且我想避免内存泄漏。我有 5 种不同类型的设置。都有更新间隔时间选项。所以我想根据间隔时间从服务器获取信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:52:36.243

如果在您的 Activity 或服务中运行，请使用[`Timer`](http://developer.android.com/reference/java/util/Timer.html)and [`TimerTask`](http://developer.android.com/reference/java/util/TimerTask.html)。

此外，还有[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)扩展时间表，以及 Commonware 对[`WakefulIntent`](https://github.com/commonsguy/cwac-wakeful).

# javascript - 如何在列表中动态生成输入字段，然后从所述字段中检索文本？

> ID：14823722
> 
> 赞同：1
> 
> 时间：2013-02-12T00:50:50.280
> 
> 标签：javascript, ajax, jquery

我正在填充输入字段列表以允许用户输入多个位置。（我找到了一种填充列表的方法，但我认为它可能不是正确的方法，因为我才刚刚开始，我想我最好学会做正确的事）。我这样填充列表：

```
function addLocationBox(){
    $('#InputBoxesList').append('<li><input type="text" /><input type="button" value ="Add Location"  onclick="addLocationBox();"/></li>')
} 
```

当用户填写完字段并稍后在页面中按下提交按钮时，我需要知道如何检索他们输入的文本。有什么建议么？我是 javascript 的新手，所以也欢迎任何额外的指针:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:12:37.083

您可以使用`.each()`在输入之间循环。

假设您想`POST`使用 Ajax 和 JQuery 输入值。只有输入，而不是文本区域或选择，对于示例来说更容易。

首先，您需要文本输入和一个字符串变量来存储数据。在这个字符串中，我经常首先存储`value`我提交的内容。它在服务器端很有用。

```
var $inputs    = $("input").not("input[type=submit]"),
    submitval  = $("input[type=submit]").val(),
    datastring = "submit="+submitval; 
```

然后，您使用`.each()`循环输入并在数据字符串中附加名称/值：

```
$inputs.each(function() {
  var $this = $(this),
      name  = $this.attr("name"),
      val   = $this.val();

      datastring += "&"+name+"="+val;    
}); 
```

您现在有一个可以像这样发布的数据字符串，例如 form.php ：

```
$.ajax({
  type: "POST",
  data: datastring,
  url: "form.php",
  success: function(data) {
    // your success handler
  }, 
  error: function() {
    // your error handler
  }   
}); 
```

这不是剪切和粘贴解决方案，而是一种通用的方法。

它不会处理文本区域、复选框、选择等。
它不会处理多个表单。
它不会在发布之前检查数据。

所以谨慎使用。

# android - Android MapFragment 运行时错误 - 找不到类“maps.jk”

> ID：14823723
> 
> 赞同：5
> 
> 时间：2013-02-12T00:51:02.800
> 
> 标签：android, android-fragments, android-maps-v2, supportmapfragment, mapfragment

我正在使用 SupportMapFragment 并取得了圆满成功。我一点问题都没有。

但是，在我的应用程序运行时出现错误。我在 Gingerbread 手机上运行，​​它有最新的 GooglePlay。另请注意，我正在使用 SupportMapFragment 和其他支持类来满足蜂窝之前的需求。

```
Could not find class 'maps.j.k', referenced from method maps.y.ae.a` 
```

一旦我扩大我的观点，错误就会发生。

```
inflater.inflate(R.layout.fragment_map, container, false); 
```

我的布局文件（fragment_map.xml）：

```
<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" /> 
```

堆栈跟踪（发生错误时）：

```
Thread [<1> main] (Suspended)   
<VM does not provide monitor information>   
PhoneLayoutInflater(LayoutInflater).inflate(int, ViewGroup, boolean) line: 322  
MapsFragment.onCreateView(LayoutInflater, ViewGroup, Bundle) line: 90   
MapsFragment(Fragment).performCreateView(LayoutInflater, ViewGroup, Bundle) line: 1460  
FragmentManagerImpl.moveToState(Fragment, int, int, int, boolean) line: 911 
FragmentManagerImpl.moveToState(int, int, int, boolean) line: 1088  
BackStackRecord.run() line: 682 
FragmentManagerImpl.execPendingActions() line: 1444 
FragmentManagerImpl$1.run() line: 429   
FragmentActivity$1(Handler).handleCallback(Message) line: 587   
FragmentActivity$1(Handler).dispatchMessage(Message) line: 92   
Looper.loop() line: 150 
ActivityThread.main(String[]) line: 4277    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 839  
ZygoteInit.main(String[]) line: 597 
NativeStart.main(String[]) line: not available [native method] 
```

我的 Fragment 类（包含 SupportMapFragment）

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);

    View v = inflater.inflate(R.layout.fragment_maps, container, false);
    return v;
} 
```

如此处所述，我在清单中拥有所有必需的[权限](https://developers.google.com/maps/documentation/android/start)。

它没有引起任何问题，但我很好奇它的含义。我没有找到任何答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:21:17.873

这是使用支持片段[https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw的 google maps api V2 快速入门指南](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

这可能会帮助您解决[无法实例化 android.gms.maps.MapFragment的问题](https://stackoverflow.com/questions/13719263/unable-instantiate-android-gms-maps-mapfragment)

希望这些有帮助。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T01:26:27.717

如果您要覆盖`SupportMapfragment`并创建自己的片段类，为什么要`android:name="com.google.android.gms.maps.SupportMapFragment"`在活动 xml 中使用。

请改用 com.your.package.your.supportmapfragment。你需要使用`class="com.google.android.gms.maps.SupportMapFragment"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:44:54.790

```
android:name="com.google.android.gms.maps.SupportMapFragment" 
```

用。。。来代替

```
class="com.google.android.gms.maps.SupportMapFragment" 
```

# android - Android ListView 刷新

> ID：14823728
> 
> 赞同：7
> 
> 时间：2013-02-12T00:51:31.153
> 
> 标签：android, android-listview, simplecursoradapter, onresume, notifydatasetchanged

我有一个`Listview`从 sqlite 数据库中提取和显示数据的方法。DB 第一列中的数据显示在 中`ListView`，单击时，`Activity`开始显示与第一列关联的列的其余部分。编辑数据时，`ListView`需要更新以反映这一点，但除非重新启动应用程序，否则它不会显示更新。

我试过打电话，`notifyDataSetChanged()`用`startActivityForResult()`我的`onResume()`方法，但没有奏效。我应该使用什么方法来完成`ListView`当前代码中的更新？

我知道`SimpleCursorAdapter`可以使用 a 并且我试图实现该代码但没有成功。我是新手，需要实际代码来了解需要做什么。

```
public class LoginList extends Activity implements OnClickListener, OnItemClickListener {
    private ListView loginList;
    private Button webLogin;

    private ListAdapter loginListAdapter;

    private ArrayList<LoginDetails> loginArrayList;

    @Override 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.login_listview);
        loginList = (ListView)
        findViewById(R.id.loginlist);
        loginList.setOnItemClickListener(this);

        webLogin = (Button)
        findViewById(R.id.button3);
        webLogin.setOnClickListener(this);

        loginArrayList = new ArrayList<LoginDetails>();
        loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
        loginList.setAdapter(loginListAdapter);
    }

    @Override
    public void onClick (View v) {
        Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
        startActivity(webLoginIntent);
    }

    public List<String> populateList () {
        List<String> webNameList = new ArrayList<String>();

        dataStore openHelperClass = new dataStore (this);

        SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

        Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);

        startManagingCursor(cursor);

        while (cursor.moveToNext()) {
            String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
            String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
            String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
            String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
            String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

            LoginDetails lpDetails = new LoginDetails();

            lpDetails.setsName(sName);
            lpDetails.setwUrl(wUrl);
            lpDetails.setuName(uName);
            lpDetails.setpWord(pWord);
            lpDetails.setlNotes(lNotes);

            loginArrayList.add(lpDetails);
            webNameList.add(sName);
        }

        sqliteDatabase.close();
        return webNameList;
    }

    @Override
    protected void onResume() {
        super.onResume();

        loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
        loginList.setAdapter(loginListAdapter);  

    }

@Override
    public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
        Toast.makeText(getApplicationContext(), "Selected ID :" + arg2, Toast.LENGTH_SHORT).show();

        Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);
        LoginDetails clickedObject = loginArrayList.get(arg2);

        Bundle loginBundle = new Bundle();
        loginBundle.putString("clickedWebSite",clickedObject.getsName());
        loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
        loginBundle.putString("clickedUserName",clickedObject.getuName());
        loginBundle.putString("clickedPassWord",clickedObject.getpWord());
        loginBundle.putString("clickedNotes",clickedObject.getlNotes());

        updateDeleteLoginInfo.putExtras(loginBundle);

        startActivityForResult(updateDeleteLoginInfo, 0);   
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T03:36:31.260

这正是 a[`Loader`](http://developer.android.com/reference/android/content/Loader.html)的伟大之处。我建议您创建一个[`SimpleCursorAdapter`](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)将 DB 绑定到 UI（`ListView`在这种情况下），一个[`ContentProvider`](http://developer.android.com/reference/android/content/ContentProvider.html)与 DB 交互，以及一个[`CursorLoader`](http://developer.android.com/reference/android/content/CursorLoader.html)监视 DB 的更改，并在必要时更新 UI。`Loader`它将处理所有数据库更改并`ListView`通过简单地更新您的适配器来更新您的。这似乎需要大量的工作，但一旦配置完成，功能就非常强大，并且将贯穿整个 Android 生命周期。

这些教程应该会有所帮助：

*   [https://developer.android.com/training/load-data-background/index.html](https://developer.android.com/training/load-data-background/index.html)
*   [http://www.vogella.com/articles/AndroidSQLite/article.html#background_loader](http://www.vogella.com/articles/AndroidSQLite/article.html#background_loader)
*   [https://github.com/browep/AndroidCursorLoaderTutorial](https://github.com/browep/AndroidCursorLoaderTutorial)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T17:01:42.813

**编辑**

```
private ArrayList<LoginDetails> loginArrayList = new ArrayList<LoginDetails>();;

@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.login_listview);
    loginList = (ListView)
    findViewById(R.id.loginlist);
    loginList.setOnItemClickListener(this);

    webLogin = (Button)
    findViewById(R.id.button3);
    webLogin.setOnClickListener(this);

    loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,loginArrayList );
    loginList.setAdapter(loginListAdapter);
    populateList();
}

@Override
public void onClick (View v) {
    Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
    startActivity(webLoginIntent);
}

public void populateList () {
    loginListAdapter.clear();
    loginArrayList.clear();
    dataStore openHelperClass = new dataStore (this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()) {
        String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
        String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
        String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
        String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
        String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

        LoginDetails lpDetails = new LoginDetails();

        lpDetails.setsName(sName);
        lpDetails.setwUrl(wUrl);
        lpDetails.setuName(uName);
        lpDetails.setpWord(pWord);
        lpDetails.setlNotes(lNotes);

        loginArrayList.add(lpDetails);
        webNameList.add(sName);
    }
    loginListAdapter.notifyDatasetChanged();
    sqliteDatabase.close();
} 
```

* * *

您正在失去对列表视图的引用，即为什么您的列表没有更新......

在您的代码中进行此修改。1\. 声明时初始化您的 ArrayList（全局）。

```
ArrayList loginArrayList = new ArrayList<LoginDetails>(); 
```

1.  直接给Adapter设置assign list(onCreate)

    loginListAdapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, loginArrayList);

2.  呼入。`populateList()`_`onCreate()`

3.  在您`populateList()`而不是将数据添加到新列表中添加到与您的适配器关联的现有列表中，即`loginArrayList`

如果您的列表是全新的调用`adapter.clear()`并且`loginArrayList.clear()`在`populateList()`将数据添加到`loginArrayList`. 将数据添加到`loginArrayList`调用后`adapter.notifyDataSetChanged()`

**这应该工作...**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T02:06:51.700

如果您手动创建适配器的支持数据（在这种情况下，您使用的是 ArrayAdapter - 这在很多情况下是完全可以接受的），那么当数据库更改时，您需要重新查询数据库，重新创建数据集，更改适配器的支持数据集，并告诉列表数据集已更改。

实现此目的的一种方法可能是广播一个意图，让您的活动知道执行上述步骤（通过使用 BroadcastReceiver 捕获该意图）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T18:24:16.367

试试这个代码

在公共区域添加变量：`List<String> arrayList = new ArrayList<String>();`

并在 onCreate() 中添加：

```
 arrayList = populateList(); 
```

//然后像这样在适配器中添加变量

```
loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, arrayList ); 
```

在 onResume() 这段代码：

```
@Override
protected void onResume() {
    super.onResume();

    loginArrayList.clear();

    arrayList.clear();

    arrayList = populateList();

    loginListAdapter.notifyDataSetChanged()

} 
```

让我们知道你是否解决了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T01:41:53.967

我的推荐。

1.  不要循环加载您的列表。如果它是一个包含所有字符串的简单列表。尝试使用`SimpleCursorAdapter`and 将使您的应用程序更快更短的代码。
2.  更新数据库后，您要做的就是查询数据库以`Cursor`获取`Adapter`. `swapCursor(newCursor)`. 这将在保持滚动位置的同时更新您的列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T03:04:15.897

这是我的示例代码，用于编辑每一行以及列表视图的数据库，希望对您有所帮助

首先创建我创建一个适配器名称“ListAdapterItem.java”

```
 import java.util.ArrayList;
     import java.util.HashMap;

     import android.content.Context;
     import android.view.LayoutInflater;
     import android.view.View;
     import android.view.ViewGroup;
     import android.widget.BaseAdapter;
     import android.widget.RelativeLayout;
     import android.widget.TextView;

     public class ListAdapterItem extends BaseAdapter {

private ArrayList<HashMap<String, Object>> list;
private Context context;
private RelativeLayout ll;
// used to keep selected position in ListView
private int selectedPos = -1; // init value for not-selected
private TextView label,label_id;
String name,id;

public ListAdapterItem (Context context,ArrayList<HashMap<String, Object>> list) {
    this.list = list;
    this.context = context;
}
public void setSelectedPosition(int pos) {
    selectedPos = pos;
    // inform the view of this change
    notifyDataSetChanged();
}
public int getSelectedPosition() {
    return selectedPos;
}
public View getView(int position, View convertView, ViewGroup parent) {
    ll = (RelativeLayout) LayoutInflater.from(this.context).inflate(R.layout.data_list_item, null);
    // get text view
    label = (TextView) ll.findViewById(R.id.txtview_country_name);
    label_id=(TextView) ll.findViewById(R.id.txtview_id);

    id=list.get(position).get("Id").toString();
    name = list.get(position).get("Name").toString();

    label.setText(name);
    label_id.setText(id);
    return ll;
}
public int getCount() {
    return this.list.size();
}
public Object getItem(int position) {
    return position;
}
public long getItemId(int position) {
    return position;
}
} 
```

这是我的 data_list_item

```
 <?xml version="1.0" encoding="utf-8"?>
            <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:padding="5dp">
                 <TextView
                    android:id="@+id/txtview_id"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_margin="8dp"
                    android:layout_marginRight="2dp"
                    android:textColor="@android:color/black"
                    android:textSize="22dp"
                    android:visibility="invisible"/>
                <TextView
                    android:id="@+id/txtview_country_name"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_margin="8dp"
                    android:layout_marginRight="2dp"
                    android:textColor="@android:color/black"
                    android:textSize="22dp" />

            </RelativeLayout> 
```

和主类“Main.java”

```
 public class Main extends Activity implements OnClickListener {

                    String name;
                    SQLiteDatabase db;
                    Cursor cursor;

                    private ProgressDialog progressDialog;

                    public ListAdapterItem list_adapter;
                    private ArrayList<HashMap<String, Object>> lst_data;
                    private HashMap<String, Object> hm;
                    private ListView listview;
                    private String list_id;
                    private int counter_id,selectedPosition;
                    private View selectedView;

                    public void onCreate(Bundle savedInstanceState) {
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.main_layout);
                        lst_data = new ArrayList<HashMap<String, Object>>();
                        listview = (ListView) findViewById(R.id.list);
                        new FetchDB().execute();
                        }
                    private class FetchDB extends AsyncTask<String, Void,ArrayList<HashMap<String, Object>>> {
                        protected void onPreExecute() {
                            progressDialog = ProgressDialog.show(Main.this,"Fetching Data", "Loading,Please wait...", true);
                        }

                        protected ArrayList<HashMap<String, Object>> doInBackground(String... lstStrings)throws IllegalArgumentException {
                            try {
                                db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
                                cursor = db.rawQuery("SELECT * FROM person WHERE Id <> ''",null);

                                if (cursor != null && cursor.getCount() > 0) {

                                    if (cursor.moveToFirst()) {
                                        do {
                                            hm = new HashMap<String, Object>();
                                            hm.put("Id",cursor.getInt(cursor.getColumnIndex("Id")));
                                            hm.put("Name", cursor.getString(cursor.getColumnIndex("Name")));
                                            lst_data.add(hm);

                                        } while (cursor.moveToNext());
                                    }// end of cursor.moveToFirst()
                                    cursor.close();
                                }

                            } catch (Exception e) {
                                e.getMessage();
                            }
                            db.close();// database close
                            return lst_data;
                        }// end of doInbackgournd

                        @Override
                        protected void onPostExecute(ArrayList<HashMap<String, Object>> result) {
                            progressDialog.dismiss();
                            list_adapter = new ListAdapterItem(Main.this,result);
                            listview.setAdapter(list_adapter);
                            listview.setOnItemClickListener(new OnItemClickListener() {

                                public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
                                    list_adapter.setSelectedPosition(arg2);
                                    selectedPosition = arg2;
                                    selectedView = arg1;
                                    list_id=((TextView) selectedView.findViewById(R.id.txtview_id)).getText().toString();
                                }

                            });
                        }
                    }// end of FetchDBTask
                        private class SaveTask extends AsyncTask<String, Void,ArrayList<HashMap<String, Object>>> {
                        @Override
                        protected void onPreExecute() {
                            progressDialog = ProgressDialog.show(Main.this,"Saving Data", "Loading,Please wait...", true);
                        }
                        protected ArrayList<HashMap<String, Object>> doInBackground(String... arg0)throws IllegalArgumentException {
                            counter_id++;
                            name = editext_name.getText().toString();

                            hm = new HashMap<String, Object>();
                            hm.put("Id",counter_id);
                            hm.put("Name",name);
                            lst_data.add(hm);
                            saveDB();
                            return lst_data;
                        }// end of doInbackgournd

                        protected void onPostExecute(ArrayList<HashMap<String, Object>> result) {
                            progressDialog.dismiss();
                            list_adapter = new ListAdapterItem(Main.this,result);
                            listview.setAdapter(list_adapter);
                            listview.setOnItemClickListener(new OnItemClickListener() {
                                public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
                                    list_adapter.setSelectedPosition(arg2);
                                    selectedPosition = arg2;
                                    selectedView = arg1;
                                    list_id=((TextView) selectedView.findViewById(R.id.txtview_id)).getText().toString();

                                }
                            });

                        }

                    }// end of saveTask
                    public void saveDB(){
                        String sql;
                        db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
                        // create table if not e exist
                        db.execSQL("CREATE TABLE IF NOT EXISTS person(Name VARCHAR ,Id INT(3));");
                        sql = "SELECT * FROM person WHERE Id="+list_id; //selected or click row in list item
                        Cursor cursor = db.rawQuery(sql, null);

                        if (cursor.moveToFirst()) {
                            String sqlUpdate = "UPDATE person SET Name=? WHERE Id="+db_id;
                            db.execSQL(sqlUpdate, new Object[] {db_name});
                            cursor.close();
                            db.close();// database close
                        } else {// empty insert
                            String sqlInsert = "INSERT INTO person VALUES (?,"+null+")";
                            db.execSQL(sqlInsert, new Object[] {db_name,db_address,db_phone,db_email,db_license,db_comments,db_company,db_policy,db_phone_insurance,vehc_year,vehc_make,vehc_model,vehc_license,vehc_vinnum,vehc_color,db_position });
                            cursor.close();
                            db.close();// database close

                        }
                    }
                    //Edit by row
                    private class EditData extends AsyncTask<String, Void,ArrayList<HashMap<String, Object>>> {
                        protected void onPreExecute() {
                            progressDialog = ProgressDialog.show(Main.this,"Saving Data", "Loading Please wait...", true);
                        }
                        protected ArrayList<HashMap<String, Object>> doInBackground(String... id)throws IllegalArgumentException {
                            name = editext_name.getText().toString();

                            hm = new HashMap<String, Object>();
                            hm.put("Id",counter_id);
                            hm.put("Name",name);

                            lst_data.set(selectedPosition, hm); //specific row update
                            list_id=Integer.parseInt(edit_counter);
                            saveDB();

                            return lst_data;
                        }// end of doInbackgournd
                        protected void onPostExecute(ArrayList<HashMap<String, Object>> result) {
                            progressDialog.dismiss();
                            list_adapter = new ListAdapterItem(Main.this,result);
                            listview.setAdapter(list_adapter);

                        }
                    }
                } 
```

和 main_layout.xml

```
 <?xml version="1.0" encoding="utf-8"?>
            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent"                    
                android:orientation="vertical" >

                <ListView
                    android:id="@+id/list"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:background="@android:color/transparent"
                    android:cacheColorHint="#00000000"
                    android:dividerHeight="2dp"
                    android:paddingTop="8dp"
                    android:transcriptMode="normal" />

            </LinearLayout> 
```

在列表视图中的每个列表行中指定您的 ID 希望这能回答您的问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T18:41:37.500

我认为在 while 块之前的 populate() 方法中，您应该调用 loginListAdapter.notifyDataSetChanged() 和 loginListAdapter.clear(); 这将清除适配器并通知它新的数据列表。

该块将如下所示：

```
 loginListAdapter.notifyDataSetChanged();
 loginListAdapter.clear();
 while (cursor.moveToNext()) {
        String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
        String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
        String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
        String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
        String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

        LoginDetails lpDetails = new LoginDetails();

        lpDetails.setsName(sName);
        lpDetails.setwUrl(wUrl);
        lpDetails.setuName(uName);
        lpDetails.setpWord(pWord);
        lpDetails.setlNotes(lNotes);

        loginArrayList.add(lpDetails);
        webNameList.add(sName);
    } 
```

我刚刚进行了编辑，因为您调用通知和清除的顺序不正确。清除必须在通知之后发生，这正是我从我的经验中得到的，除非适配器不会重绘列表。

# jquery - 使用 Jquery 从组中更改不同的属性

> ID：14823731
> 
> 赞同：1
> 
> 时间：2013-02-12T00:51:39.687
> 
> 标签：jquery, ajax

我为显示一堆用户帖子的页面实现了类似的系统。一切正常，但是在用户按下它后，我无法让类似的图像发生变化。我有一个名为 likeSystem 的函数，当用户单击时触发：（从返回的 json 数组格式化）

```
<img src='img/star.png' id='like"+data.id+"' height='24' 
onClick='likeSystem("+data.id+",1);'/> // 1 indicates type of post. 
```

这样所有的触发和响应数据都会从 ajax 中返回并通过它发送。

```
function likeSystem (postid,type) {
  ///working ajax call here.....and then....
  var imagechange = "#like" + postid; 
  if(data==1) 
      {
        //Like successful     
     $(imagechange).attr("src","img/unstar.png");            
      }
   else 
      {
        //unlike successful                
     $(imagechange).attr("src","img/star.png");
      } 
```

所以我遇到的问题是在正确的帖子上将星形图像更改为未星形图像，反之亦然。我尝试设置我自己的变量 imagechange，它是 like 和 postid 的组合，但它没有工作？

任何人都知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:59:22.117

让它工作 $("#like" + postid).attr("src","img/unstar.png");

# c++ - C++ 标准措辞：“通过范围内的所有迭代器”是否暗示顺序性？

> ID：14823732
> 
> 赞同：26
> 
> 时间：2013-02-12T00:51:40.200
> 
> 标签：c++, c++11, standards, std

[这个 SO 问题](https://stackoverflow.com/questions/14823291)引发了关于标准的讨论`std::generate`和保证。特别是，您可以使用具有内部状态的函数对象并依赖于`generate(it1, it2, gen)`调用`gen()`、存储结果、再次`*it`调用、存储等，还是可以从后面开始，例如？`gen()``*(it + 1)`

标准（n3337，§25.3.7/1）这样说：

> 效果：第一个算法调用函数对象`gen`并通过 range 中的所有迭代器分配 gen 的返回值`[first,last)`。第二种算法调用函数对象 gen 并通过范围内的所有迭代器分配 gen 的返回值，`[first,first + n)`如果`n`为正，则它不执行任何操作。

似乎没有顺序可以保证，特别是因为其他段落有更强的措辞，例如`std::for_each`（*效果：适用`f`于取消引用范围内每个迭代器的结果`[first,last)`，从 first 开始并继续到`last - 1`。*如果我们从字面上理解，它只是虽然保证开始`first`和结束`last`- 不保证两者之间的顺序）。

**但是：**[Microsoft](http://msdn.microsoft.com/en-us/library/k0ctd768%28v=vs.110%29.aspx)和[Apache 的 C++ 标准库](http://stdcxx.apache.org/doc/stdlibref/generate.html)都在其文档页面上提供了要求按顺序进行评估的示例。libc++ (in `algorithm`) 和 libstdc++ (in `bits/stl_algo.h`) 都以这种方式实现它。`generate`此外，如果没有此保证，您将失去很多潜在的应用程序。

当前的措辞是否暗示顺序性？如果不是，这是委员会成员的疏忽还是故意的？

（我很清楚，没有多少人可以在不只是推测或讨论的情况下对这个问题提供有见地的答案，但以我的拙见，根据 SO 指南，这并不会使这个问题“不具建设性”。）

* * *

感谢@juanchopanza 指出这个问题并让我参考关于`for_each`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T10:55:19.847

在[LWG475](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#475)的讨论中，`std::for_each`是比较的`std::transform`。需要注意的是“`transform`不保证调用其函数对象的顺序”。所以，是的，委员会意识到标准中缺乏顺序保证。

对非顺序行为也没有相反的要求，因此 Microsoft 和 Apache 可以自由使用顺序评估。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T11:34:31.083

在标准没有指定算法排序的任何地方，您都应该假设实现可以利用它来实现并行性。论文[n3408](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3408.pdf)讨论了并行化的选项，并指出了[Thrust](http://thrust.github.com/)库，它既是标准算法的可用并行重新实现，也是算法中并行性未来标准化的概念验证。

查看 Thrust 的实现，只要迭代器类别是随机访问，它就会在并行循环中`generate`调用。`gen`正如您所观察到的，这与标准一致，因此您不应假设它`generate`始终是顺序的。（例如，线程安全`std::rand`可以有效地用于`generate`并且不需要顺序调用。）

唯一保证顺序调用的算法是`numeric`; 如果您的代码依赖于顺序调用，您应该使用`iota`. `generate`调整现有的生成器：

```
template<typename F> struct iota_adapter {
   F f;
   operator typename std::result_of<F()>::type() { return f(); }
   void operator++() {}
};
template<typename F> iota_adapter<F> iota_adapt(F &&f) { return {f}; } 
```

用于：

```
#include <numeric>
#include <iostream>

int main() {
   int v[5], i = 0;
   std::iota(std::begin(v), std::end(v), iota_adapt([&i]() { return ++i; }));
   for (auto i: v) std::cout << i << '\n';
} 
```

# actionscript-3 - 如何将变量传递给新的孩子？[闪光AS3]

> ID：14823736
> 
> 赞同：0
> 
> 时间：2013-02-12T00:51:50.523
> 
> 标签：actionscript-3, class, instance-variables, addchild

代码很好地说明了这个问题，我已经把所有不相关的东西都删掉了。

**游戏开始时创建2-4个亲属**

```
function createInitialKinsmen()
{
    for (var k:int = 1; k < 3 + Math.round(Math.random() * 2; k++)
    {
        if (k == 1)
        {
            createKinsmen(0);
            trace ("player");
        }
        else
        {
            createKinsmen(1);
            trace ("starting kinsmen");
        }
    }
} 
```

**亲属创造功能**

```
function createKinsmen(arrivalTypeVar:int)
{
    var newKinsmen = new kinsmen;
    listPanel.kinsmenDivider.addChild(newKinsmen);
    totalKinsmen++;
    totalKinsmenAlive++;
    newKinsmen.name = "kinsmen" + totalKinsmen;
    newKinsmen.arrivalType = arrivalTypeVar;
} 
```

**亲属班**

```
public class kinsmen extends MovieClip
{
    var arrivalType:int;
    function kinsmen()
    {
        trace(this.name);
        if (this.arrivalType = 0)
        {
            trace("player");
        }
        if (this.arrivalType = 1)
        {
            trace("starting kinsmen");
        }
    }
} 
```

输出应该说：

```
kinsmen1
player
player
kinsmen2
starting kinsmen
starting kinsmen
kinsmen3
starting kinsmen
starting kinsmen
kinsmen4
starting kinsmen
starting kinsmen 
```

而是说：

```
kinsmen1
player
player
kinsmen2
player
starting kinsmen
kinsmen3
player
starting kinsmen
kinsmen4
player
starting kinsmen 
```

这意味着没有传递*arrivalType变量。*似乎可以传递硬编码的变量，因此目前我在 kinsmen 电影剪辑中有一个带有 alpha 0 的正方形，它的 x 位置决定了构造函数中到达类型的值，*但这*肯定不是一个好习惯，是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:42:43.660

我认为您只想修改`kinsmen`类的构造函数以接受`arrivalType`和的参数`name`。

您当前正在做的是构造一个新`kinsmen`对象，然后在该对象上设置`arrivalType` 和`name`。因此，当构造函数代码运行时，`arrivalType`是 an 的默认值，`int`即 0。

在类中像这样修改您的构造函数`kinsmen`：

```
function kinsmen(arrivalType:int, name:String)
{
    this.name = name;
    this.arrivalType = arrivalType;
    if (this.arrivalType == 0)
    {
        trace("player");
    }
    if (this.arrivalType == 1)
    {
        trace("starting kinsmen");
    }
} 
```

并修改您的`createKinsmen()`函数，使其将值传递`arrivalType` 给构造函数方法，而不是在创建对象后设置`arrivalType`and ：`name`

```
function createKinsmen(arrivalTypeVar:int)
{
    totalKinsmen++;
    totalKinsmenAlive++;
    var newKinsmen = new kinsmen(arrivalTypeVar, "kinsmen" + totalKinsmen);
    listPanel.kinsmenDivider.addChild(newKinsmen);
} 
```

# css - 如何更改默认引导流体网格 12 列装订线宽度

> ID：14823742
> 
> 赞同：25
> 
> 时间：2013-02-12T00:52:30.947
> 
> 标签：css, twitter-bootstrap, sass, less

我想知道是否有任何已知的**简单解决方案可以在****流体**默认 12 网格引导系统（2.3.0）上更改排水沟。

我不熟悉 LESS，但如果这是答案，还请描述如何更改。萨斯也一样。

请注意，将排水沟宽度更改**一半**或**四分之一**是完全可以接受的，例如，如果这样可以使事情变得更简单。

必须达到以下目标：

1.  将来必须能够更新引导程序。这意味着不编辑实际的引导文件。
2.  所有其他对象都应保留功能。
3.  一定很简单。不到 10 行 CSS。例如，添加的类或其他东西。

我在整个 Stack Overflow 上进行了搜索，但仍然不知道如何去做这样的事情。据我所知，**下载自定义的 Bootstrap 只会呈现非流体网格的自定义排水沟宽度**。我以前编写过自己的流体网格系统，所以我理解数学，但我担心可能会产生后果，如果可以共享任何关于类覆盖的已知问题，这将是有帮助的。

我保证在应得的地方给予信任。

更新：

如尤达的回答中所述，更改较少的变量是可行的方法。有没有人有改变这些较少变量的经验？例如，我认为必须更改的变量如下：

```
// Fluid grid
// -------------------------
@fluidGridColumnWidth:    percentage(@gridColumnWidth/@gridRowWidth);
@fluidGridGutterWidth:    percentage(@gridGutterWidth/@gridRowWidth);

// 1200px min
@fluidGridColumnWidth1200:     percentage(@gridColumnWidth1200/@gridRowWidth1200);
@fluidGridGutterWidth1200:     percentage(@gridGutterWidth1200/@gridRowWidth1200);

// 768px-979px
@fluidGridColumnWidth768:      percentage(@gridColumnWidth768/@gridRowWidth768);
@fluidGridGutterWidth768:      percentage(@gridGutterWidth768/@gridRowWidth768); 
```

如何改变这样的事情？也许：

```
@fluidGridGutterWidth768:      percentage(1.5); 
```

如果有人以前这样做过，我将不胜感激朝正确的方向推动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T00:59:21.317

最简单的方法可能是使用 Twitter Bootstrap 提供的可定制下载。更改 @fluidGridGutterWidth 变量以满足表单中的需要。[从这里下载较少的文件](https://github.com/twbs/bootstrap)。您可以从 github bootstrap 项目访问 variable.less 文件，然后更改这段代码：

```
 // Fluid grid
// -------------------------
@fluidGridColumnWidth:    percentage(@gridColumnWidth/@gridRowWidth);
@fluidGridGutterWidth:    percentage(@gridGutterWidth/@gridRowWidth); // <= this one 
```

起初我以为您可以访问的文件较少，然后我意识到您正在使用网站上的自定义 gui。只需下载较少的文件，然后进行更改。然后编译less文件给你一个css文件或使用less进行开发。您可以使用 css 或 min.css 进行部署。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-21T02:44:49.920

我想你可能想多了。更改 LESS 变量的问题在于它会更改所有排水沟。因此，如果我喜欢 15px 的装订线来安排整体布局，但希望该网格内的表单的装订线为 5px，它将无法正常工作。

只需创建 2 个 css 类来覆盖您想要更改装订线的区域。

在“行”级别应用它。

```
.row-5-gutter{
    margin-left: -5px;
    margin-right: -5px;
} 
```

在“列”级别应用它。

```
.col-5-gutter{
    padding-left: 5px;
    padding-right: 5px;
} 
```

演示：http: [//jsfiddle.net/tg7Ey/](http://jsfiddle.net/tg7Ey/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T12:55:16.363

我也在为这个问题寻找一个简单的解决方案。我的目标是使用简单的 CSS，而不是 LESS。这个答案和我发现的任何其他答案一样，基于编译 LESS 或使用 bootstrap 的在线编译器。所以我试图找到自己的解决方案。

阅读文档，您会发现有关装订线宽度的以下内容： 列通过填充创建装订线（列内容之间的间隙）。该填充通过 .rows 上的负边距在第一列和最后一列的行中偏移。

基于此，我尝试了以下方法：

```
.container {padding-left:1px;padding-right:1px;}
.row {margin-left:-1px;margin-right:-1px;}
.row > div {padding-left:1px;padding-right:1px;} 
```

从现在开始，排水沟宽度只有 2 像素。我的下一个问题是，我的预期宽度是奇数。我的解决方案是删除左侧的填充和边距，并将它们完全放在右侧：

```
.container {padding-left:0;padding-right:5px;}
.row {margin-left:0;margin-right:-5px;}
.row > div {padding-left:0;padding-right:5px;} 
```

现在我有一个 5 像素的排水沟宽度。

我没有在您可以使用引导程序的所有可能情况下对此进行测试。特别是您必须注意在容器 div 内的 row-div 内仅使用 column-div。但就我而言，这是一个非常有效的解决方案，无需接触引导程序的原始源代码或使用 LESS 编译器。

# ios6 - 当用户平移和移动地图时，如何将 MKAnnotation 视图图像固定在地图的中心（iOS 6）？

> ID：14823746
> 
> 赞同：2
> 
> 时间：2013-02-12T00:53:05.120
> 
> 标签：ios6, mapkit, mkannotationview

使用 iOS 6 MapKit，我想定义一个 MKAnnotation（例如 pin，或自定义），当用户移动地图时，它保持固定在地图视图的中心。一旦用户停止移动地图，我希望能够读取注释的新坐标。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:17:00.567

最简单的方法是简单地将您的自定义 UIView 作为子视图添加到您的 MKMapView。这意味着当您的用户移动地图时，它将保持不动。您很可能必须通过触摸事件，以便用户可以在您的自定义视图上移动，但稍后会担心。

当您的地图视图停止移动时，获取其中心坐标。MKMapView 可以根据其中心等 [mapView centerCoordinate] 计算其坐标；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-06T20:16:18.063

我知道这有点旧，但我推荐你[DSCenterPinMapView](https://github.com/steve123s/DSCenterPinMapView)

它是一个自定义的 MapView，带有动画和可自定义的中心图钉，可用于在地图中选择位置。

您应该安装 Pod，然后，作为您的问题的解决方案，您应该实施委托，以便您可以获得 pin 掉落的位置。

```
pinMapView.delegate = self

extension MyViewController: DSCenterPinMapViewDelegate {

    func didStartDragging() {
        // My custom actions
    }

    func didEndDragging() {
        // My custom actions
        selectedLocation = pinMapView.mapview.centerCoordinate
    }

} 
```

# android - Android Eclipse - 如何添加 youtube 视频

> ID：14823752
> 
> 赞同：1
> 
> 时间：2013-02-12T00:53:40.180
> 
> 标签：android

我想在我的页面上添加一个 youtube 视频。我下载了视频并将其添加到 res-> raw 文件夹中。该视频标记为 minecraft_trailer.mp4。我在 javascript 页面中遇到错误，我无法弄清楚它是什么。请帮忙。

```
package com.treacheryofimages.www;

import android.app.Activity;
import android.os.Bundle;
import android.widget.VideoView;

public class OtherActivity7 extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.other7);
    }

    VideoView vv = (VideoView)this.findViewById(R.id.videoView1);
    String fileName = "android.resource://" + getPackageName() + "/" + 
    R.raw.minecraft_trailer;
    vv.setVideoURI(Uri.parse(minecraft_trailer));
    vv.start();
  }
} 
```

错误来自 vv.setVideoURI(Uri.parse(minecraft_trailer)); 线

我说不出它是什么。它可能是（）里面的东西。另外，那些（）里面应该有什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:11:39.590

`minecraft_trailer`调用时传递了错误的变量`vv.setVideoURI();`

它应该是`vv.setVideoURI(Uri.parse(fileName ));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:36:18.007

看一下这个 ：

```
VideoView vd = (VideoView) findViewById(R.id.VideoView);

Uri uri = Uri.parse("android.resource://"+getPackageName() + "/"+R.raw.video);

mc = new MediaController(this);
vd.setMediaController(mc);

vd.setVideoURI(uri);
vd.start(); 
```

# jakarta-ee - 如何有效地实现连接池？

> ID：14823754
> 
> 赞同：2
> 
> 时间：2013-02-12T00:53:57.113
> 
> 标签：jakarta-ee, jdbc, datasource, connection-pooling

我连接到数据库的代码使用 BasicDataSource 如下，参考[Ans](https://stackoverflow.com/questions/7496391/difference-between-basicdatasource-and-poolingdatasource)我想我的代码创建一个到数据库 ONCE 的物理连接，然后提供池连接。我的问题是，我的代码是否提供池连接？如果提供，我应该将代码的连接部分保留在以下方法中还是在构造函数中以提供有效的池？以及类状态的注释应该如何？@有状态？

```
 // Connection section start
        BasicDataSource bs = new BasicDataSource();
        PreparedStatement ps = null;
        Connection con = null;
        try {
            bs.setDriverClassName("com.mysql.jdbc.Driver");
            bs.setUrl("jdbc:mysql://localhost/myDb");
            bs.setUsername("root");
            bs.setPassword("");
            con = bs.getConnection();
            System.out.println("Connecting");
        // Connection section end

            ps = con.prepareStatement("Select *"
                    + " from Client WHERE Username = ? ");
            ps.setString(1, username);
            ResultSet r = ps.executeQuery();
            if (r.next()) {
                con.close();
                return "true";
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:22:05.653

`BasicDataSource`实现连接池。但是，如果您每次都创建一个新池，那么它是没有用的。一次创建数据源并在任何地方重用它。

通常，在 Java EE 中，您*注入*数据源。也就是说，容器为您管理数据源。在 bean 中注入数据源非常简单

```
@Resource
private DataSource movieDatabase; 
```

请参阅[此示例](http://tomee.apache.org/examples-trunk/injection-of-datasource/README.html)。不过，配置数据源取决于您使用的容器。相同的数据源可用于有状态和无状态 bean。

# sql-server - 如何解决 SSRS 中的“'=' 附近的语法错误”错误？

> ID：14823757
> 
> 赞同：3
> 
> 时间：2013-02-12T00:54:11.807
> 
> 标签：sql-server, reporting-services, ssrs-2008

我在 SSRS 中收到以下错误：

```
An error occurred during local report processing.
An error has occurred during report processing.
Query execution failed for dataset 'Dataset1'.
incorrect syntax near '=' 
```

在此错误之前，我收到一个抱怨参数顺序的错误（“必须将参数号 3 和后续参数传递为 '@name = value'，在使用了 '@name = value' 形式之后，所有后续参数必须是以'@name = value'的形式传递。）..我通过改变参数的顺序来解决这个问题（基本上我把开始/结束日期放在其他参数之后）。

```
exec [dbo].[prc_RPT_Select_BI_Completes_Data_View_tst]

@AccountIDs  = NULL,
@ClientIDs  = NULL,
@SupplierIDs  = NULL,
@FromDate = '19001010',      
@ToDate = '19001110',
@CompleteType = NULL,
@SourceType = NULL,
@SurveyStatus = NULL,
@IsSupplierUser = NULL 
```

![在此处输入图像描述](../Images/db6a6b7dcd1d07b54da17370549b3d76.png)

我该如何解决这个问题？将存储过程的事实。整个过程中的动态sql都会影响这个吗？

另外，当我在 SSMS 中手动运行它时：

```
exec [dbo].[prc_RPT_Select_BI_Completes_Data_View_tst] '20121010', '20121011', null,null,null,null,null,null 
```

然后它工作正常。所以它可能与SSRS有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:07:47.993

原来的错误并没有抱怨参数的顺序。相反，它声明（有点神秘）在调用过程时不应该混合位置参数和命名参数。

现在有两个可能导致新错误的原因：

1.  您在调用语句中有错字。
2.  您在程序本身中有错字。

尝试获取发送到数据库的确切语句并在 SSMS 中手动运行它。那应该告诉你更多。我确实注意到您在两个示例中使用了不同的参数值。

如果您无法解决此问题，请运行 SQL Server Profiler 跟踪，捕获已启动的存储过程语句和已完成的存储过程语句以及运行报告时的用户错误。在那里，您应该能够看到导致错误的确切语句。

# android - GLES20.glGetAttribLocation() 返回 -1

> ID：14823758
> 
> 赞同：4
> 
> 时间：2013-02-12T00:54:12.947
> 
> 标签：android

我无法让我的 Android OpenGL ES 2.0 应用程序正常工作。我有一个与那里的几个教程非常相似的“三角形”类。在“draw”函数中，mPositionHande 在以下代码行之后为 -1：

```
mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition"); 
```

下面是具有着色器代码等的整个三角形类。有什么想法可能导致这种情况吗？抱歉，我是 OpenGL 编程的新手，所以也许这是一个愚蠢的问题。

```
public class Triangle {

private final String vertexShaderCode =
    // This matrix member variable provides a hook to manipulate
    // the coordinates of the objects that use this vertex shader
    "uniform mat4 uMVPMatrix;" +

    "attribute vec4 vPosition;" +
    "void main() {" +
    // the matrix must be included as a modifier of gl_Position
    "  gl_Position = uMVPMatrix * vPosition;" +
    "}";

private final String fragmentShaderCode =
    "precision mediump float;" +
    "uniform vec4 vColor;" +
    "void main() {" +
    "  gl_FragColor = vColor;" +
    "}";

private final FloatBuffer vertexBuffer;
private final int mProgram;
private int mPositionHandle;
private int mColorHandle;
private int mMVPMatrixHandle;

// number of coordinates per vertex in this array
static final int COORDS_PER_VERTEX = 3;
public float triangleCoords[];

private final int vertexCount = 3; //triangleCoords.length / COORDS_PER_VERTEX;
private final int vertexStride = COORDS_PER_VERTEX * 4; // 4 bytes per vertex

// Set color with red, green, blue and alpha (opacity) values
float color[] = { 0.5f, 1.0f, 0.5f, 1.0f };
float edgeColor[] = { 0.0f, 0.0f, 0.0f, 1.0f };

public Triangle(float[] vertices) {
    this.triangleCoords = vertices;

    // initialize vertex byte buffer for shape coordinates
    ByteBuffer bb = ByteBuffer.allocateDirect(
            // (number of coordinate values * 4 bytes per float)
            triangleCoords.length * 4);
    // use the device hardware's native byte order
    bb.order(ByteOrder.nativeOrder());

    // create a floating point buffer from the ByteBuffer
    vertexBuffer = bb.asFloatBuffer();
    // add the coordinates to the FloatBuffer
    vertexBuffer.put(triangleCoords);
    // set the buffer to read the first coordinate
    vertexBuffer.position(0);

    // prepare shaders and OpenGL program
    int vertexShader = MyRenderer.loadShader(GLES20.GL_VERTEX_SHADER,
                                               vertexShaderCode);
    int fragmentShader = MyRenderer.loadShader(GLES20.GL_FRAGMENT_SHADER,
                                                 fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // create OpenGL program executables

}

public void draw(float[] mvpMatrix) {
    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's vPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

    // Enable a handle to the facet vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
                                 GLES20.GL_FLOAT, false,
                                 vertexStride, vertexBuffer);

    // get handle to fragment shader's vColor member
    mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

    // Set color for drawing the facet
    GLES20.glUniform4fv(mColorHandle, 1, color, 0);

    // get handle to shape's transformation matrix
    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    MyRenderer.checkGlError("glGetUniformLocation");

    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);
    MyRenderer.checkGlError("glUniformMatrix4fv");

    // Draw the facet
    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, vertexCount);
    //If edge mode
    //GLES20.glUniform4fv(mColorHandle, 1, edgeColor, 0);
    //GLES20.glLineWidth(2.0f);
    //GLES20.glDrawArrays(GLES20.GL_LINE_STRIP, 0, vertexCount);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
} 
```

}

# java - Spring MVC，从服务层的安全上下文中获取主体

> ID：14823761
> 
> 赞同：17
> 
> 时间：2013-02-12T00:54:34.117
> 
> 标签：java, spring, spring-mvc, spring-security

1.  在spring控制器中获取主体作为参数`Principal principal`然后将其传递给服务层而不是立即在服务层中获取主体有什么好处`SecurityContextHolder.getContext().getAuthentication().getPrincipal()`？
2.  什么是在服务层中获取主要详细信息而不在任何地方检查 null 对象的最佳方法`getAuthentication()`（`getPrincipal()`类似于自定义包装器）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T09:47:40.820

1.  *   您的服务 API 将更易于使用。您将直接看到对主体的依赖，因此您不会在主体不存在的环境中错误地调用某些服务方法。
    *   一般来说，对 SpringSecurity 代码的依赖更少意味着在迁移到新的 Spring Security 版本时问题更少。
    *   您将能够在不存在 Spring Security 的环境中重用您的服务层。
2.  准备一些包装类（例如 AuthenticationService）。向其中添加 getPrincipal() 方法。实施您的检查。在直接调用 SecurityContextHolder 的任何地方注入 AuthenticationService。

# ios - 核心数据注释 - 修复缺失的删除传播

> ID：14823762
> 
> 赞同：11
> 
> 时间：2013-02-12T00:54:35.317
> 
> 标签：ios, objective-c, xcode, core-data

我有一个运行良好的程序。没有崩溃，没有错误或任何东西，但是在删除 NSManagedObject 时，控制台中会出现以下消息。

```
Core Data: annotation: repairing missing delete propagation for to-one relationship 
```

然后，关于这种关系的一些细节。

再一次，这不会使应用程序崩溃并且程序按预期继续运行，但这仍然让我担心。我应该对此做些什么，还是可以从 Core Data 获得一些注释？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-03T10:27:21.357

您应该采取更好的删除策略。

1.  转到您的 .xcdatamodeld，选择相关关系

2.  使用反向关系选择您的实体和关系

3.  选择对删除规则执行的操作

    ![在此处输入图像描述](../Images/f064319f6bc8c74ee0a763539c9c3f90.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-01T14:40:18.337

我遇到了同样的问题并且它消失了，只要我为有问题的关系添加了一个**反比关系**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T14:11:57.210

删除托管对象后必须保存上下文。

删除某些内容后：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSError *error;
if (![appDelegate.managedObjectContext save:&error]) {
    NSLog(@"Error in Appdelegate>getLocalVersionAddFirstVersion");
} 
```

> 就像在保存上下文之前不会将新对象保存到存储中一样，在保存上下文之前不会从存储中删除已删除的对象。（[苹果文档](http://developer.apple.com/library/Mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdCreateMOs.html)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-28T09:36:11.113

对我来说，这是一个稍微不同的问题：有一个**孤儿检测**在保存时立即删除了新创建的对象，因为我忘记将新的父关系添加到`isOrphan()`函数中。奇怪的是，它导致了这个错误......

# android - 向我的项目添加许可库的问题

> ID：14823763
> 
> 赞同：1
> 
> 时间：2013-02-12T00:54:38.780
> 
> 标签：android, gson, android-lvl

按照[设置许可](http://developer.android.com/google/play/licensing/setting-up.html)“将 LVL 创建为库项目”中的说明进行操作。

我按照非常模糊的说明创建了库项目，因为我已经在 SDK 管理器中安装了 LVL 库。下面粘贴的控制台日志（在 SO 中粘贴东西太难了）抱怨（我认为）两个 android-support-v4.jar 文件（一个在我的项目中，另一个在我的 libs 项目中）不匹配.

现在我对 GSON 的所有东西的导入都是无效的，导致了几十个错误。

我的目标是姜饼 2.33。

是什么造成了所有这些损害？

```
2013-02-11 17:30:22 - com.deanblakely.PSActivity] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-02-11 17:30:22 - com.deanblakely.PSActivity] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-02-11 17:30:22 - com.deanblakely.PSActivity] All versions of the libraries must be the same at this time.
[2013-02-11 17:30:22 - com.deanblakely.PSActivity] Versions found are:
[2013-02-11 17:30:22 - com.deanblakely.PSActivity] Path: D:\_DBAWorkspace\LVLLib\libs\android-support-v4.jar
[2013-02-11 17:30:22 - com.deanblakely.PSActivity]  Length: 385685
[2013-02-11 17:30:22 - com.deanblakely.PSActivity]  SHA-1: 48c94ae70fa65718b382098237806a5909bb096e
[2013-02-11 17:30:22 - com.deanblakely.PSActivity] Path: D:\_DBAWorkspace\com.deanblakely.PSActivity\libs\android-support-v4.jar
[2013-02-11 17:30:22 - com.deanblakely.PSActivity]  Length: 349252
[2013-02-11 17:30:22 - com.deanblakely.PSActivity]  SHA-1: 612846c9857077a039b533718f72db3bc041d389
[2013-02-11 17:30:22 - com.deanblakely.PSActivity] Jar mismatch! Fix your dependencies
[2013-02-11 17:30:25 - com.deanblakely.PSActivity] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-02-11 17:30:25 - com.deanblakely.PSActivity] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-02-11 17:30:25 - com.deanblakely.PSActivity] All versions of the libraries must be the same at this time.
[2013-02-11 17:30:25 - com.deanblakely.PSActivity] Versions found are:
[2013-02-11 17:30:25 - com.deanblakely.PSActivity] Path: D:\_DBAWorkspace\LVLLib\libs\android-support-v4.jar
[2013-02-11 17:30:25 - com.deanblakely.PSActivity]  Length: 385685
[2013-02-11 17:30:25 - com.deanblakely.PSActivity]  SHA-1: 48c94ae70fa65718b382098237806a5909bb096e
[2013-02-11 17:30:25 - com.deanblakely.PSActivity] Path: D:\_DBAWorkspace\com.deanblakely.PSActivity\libs\android-support-v4.jar
[2013-02-11 17:30:25 - com.deanblakely.PSActivity]  Length: 349252
[2013-02-11 17:30:25 - com.deanblakely.PSActivity]  SHA-1: 612846c9857077a039b533718f72db3bc041d389
[2013-02-11 17:30:25 - com.deanblakely.PSActivity] Jar mismatch! Fix your dependencies
[2013-02-11 17:34:32 - com.deanblakely.PSActivity] Found 2 versions of android-support-v4.jar in the dependency list,
[2013-02-11 17:34:32 - com.deanblakely.PSActivity] but not all the versions are identical (check is based on SHA-1 only at this time).
[2013-02-11 17:34:32 - com.deanblakely.PSActivity] All versions of the libraries must be the same at this time.
[2013-02-11 17:34:32 - com.deanblakely.PSActivity] Versions found are:
[2013-02-11 17:34:32 - com.deanblakely.PSActivity] Path: D:\_DBAWorkspace\LVLLib\libs\android-support-v4.jar
[2013-02-11 17:34:32 - com.deanblakely.PSActivity]  Length: 385685
[2013-02-11 17:34:32 - com.deanblakely.PSActivity]  SHA-1: 48c94ae70fa65718b382098237806a5909bb096e
[2013-02-11 17:34:32 - com.deanblakely.PSActivity] Path: D:\_DBAWorkspace\com.deanblakely.PSActivity\libs\android-support-v4.jar
[2013-02-11 17:34:32 - com.deanblakely.PSActivity]  Length: 349252
[2013-02-11 17:34:32 - com.deanblakely.PSActivity]  SHA-1: 612846c9857077a039b533718f72db3bc041d389
[2013-02-11 17:34:32 - com.deanblakely.PSActivity] Jar mismatch! Fix your dependencies 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:05:36.820

正如日志猫所说，有两个不同版本的支持库。请将项目中的 android-support-v4.jar 库替换为库项目中的 android-support-v4.jar 文件，这样您的项目和依赖库项目中将拥有相同版本的兼容库文件。为此，**在 Package Explorer 中**：

*   转到库项目的 libs 文件夹 --> 右键单击​​ android-support-v4.jar --> 选择“复制”
*   转到您的项目->右键单击libs文件夹->选择“粘贴”->单击“是”以覆盖现有文件。
*   清理你的项目

# java - 如何使用 equals 方法比较不同类中的对象数组

> ID：14823764
> 
> 赞同：0
> 
> 时间：2013-02-12T00:54:47.423
> 
> 标签：java, arrays, object, equals

```
public boolean equals(Object obj) {
    boolean result = false;
        if (obj instanceof Recipe) {
           Recipe that = (Recipe) obj;
            if(this.getName().equals(that.getName())){

            for (int cnt = 0; cnt < I.length; cnt++) {
                if (I[cnt].getName().equals(that.getName())) {

                result = (this.getName() == that.getName());
        }
             }
    }
    }
    return result;

} 
```

我可以比较食谱的名称，一旦它们相等，我需要逐一比较成分，但我不知道如何进行比较。我知道我需要一个 for 循环，我添加了它来比较所有成分，但在那之后该怎么做。我真的很感激任何类型的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:25:06.190

List equals 检查以相同顺序对相等对象的引用，这可能是您需要的。如果是这样，请考虑 Arrays.asList，它为您提供了引用数组的列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:01:38.810

覆盖配方中的equals（），因为它看起来你正在尝试，

那么你必须比较Recipe的每个字段

但是你应该发布Recipe字段的来源

# ios - UIViewcontroller 图像尺寸

> ID：14823770
> 
> 赞同：0
> 
> 时间：2013-02-12T00:55:47.233
> 
> 标签：ios

我想在我的主视图控制器的中心显示一个 png 图像。我必须使用 UIImageView 还是只将图像添加到视图本身？我不想覆盖整个视图，而只是在中间有一个相当大的图像。对于所有 iOS 设备（支持 iOS 6.0 及更高版本），图像的理想尺寸是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:59:19.493

最简单的方法是像你说的那样使用 UIImageView 。有一些方法可以操纵其他类来显示图像，但总体而言代码更多，看起来更令人困惑。至于理想的尺寸，它取决于图像的纵横比和视图的其余部分。

# java - 允许空值的 BigDecimal 的 Java 数学库

> ID：14823772
> 
> 赞同：26
> 
> 时间：2013-02-12T00:55:52.947
> 
> 标签：java, bigdecimal

是否有具有 BigDecimal 基本操作的 BigDecimal 库，它允许空值？

出于数学目的，Null 应被视为 0。

我不想对可能的空值进行所有空值检查。

您要么永远不允许在数据库、应用程序中使用空值，要么查看并初始化所有内容，`new BigDecimal(0)`或者对可空值的每次使用执行空检查。

就像是：

```
public static BigDecimal add(final BigDecimal value, final BigDecimal augend)
{
    if (value == null)
        return augend;
    else if (augend == null)
        return value;
    else
        return value.add(augend);
}

public static BigDecimal multiply(final BigDecimal value, final BigDecimal multiplicand)
{
    if (value == null || multiplicand == null)
        return null;

    return value.multiply(multiplicand);
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-12T01:11:52.847

保存编码，只是不允许数据库中有空值。将默认值设为零。

至于`new BigDecimal(0)`：不，使用`BigDecimal.ZERO`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-03-20T14:19:54.297

我有一个类似的问题（虽然与数据库无关，只需要总结几个 nullable `BigDecimal`s）。没找到任何库，只好自己写如下函数：

```
public static BigDecimal add(BigDecimal... addends) {
    BigDecimal sum = BigDecimal.ZERO;
    if (addends != null) {
        for (BigDecimal addend : addends) {
            if (addend == null) {
                addend = BigDecimal.ZERO;
            }
            sum = sum.add(addend);
        }
    }
    return sum;
} 
```

在 Java 8 中也是如此：

```
public static BigDecimal add(BigDecimal... addends) {
    if (addends == null) {
        return BigDecimal.ZERO;
    }
    return Arrays.stream(addends)
            .filter(Objects::nonNull)
            .reduce(BigDecimal.ZERO, BigDecimal::add);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T01:10:03.580

我想我没有看到库检查 null 的意义。当然，库不会抛出 NPE，但调用者最终将不得不检查它。您的上述乘法的调用者会做什么？它不能只使用输出。它必须先检查返回的值是否在某个时刻为空，然后才能对该值执行任何操作。

此外，对于我曾经编写过的任何应用程序，null 都与零有很大不同。我不想使用将 null 视为零的。

如果您的要求是您的数据库中不允许空值，我会在写入数据库之前检查您的 DAO 层中的空值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-07T10:35:11.387

如果列表包含空元素，它不等于空......所以这是一个测试所有案例及其实现的单元测试：

```
 @ParameterizedTest
    @MethodSource("shouldSumBigDecimalsParams")
    void shouldSumBigDecimals(BigDecimal expectedSum, BigDecimal first, BigDecimal second) {
        BigDecimal sum = bigDecimalsSum(first, second);
        assertThat(sum).isEqualTo(expectedSum);
    }

    private static Stream<Arguments> shouldSumBigDecimalsParams() {
        return Stream.of(
            Arguments.of(new BigDecimal("1010"), new BigDecimal("1000"), BigDecimal.TEN),
            Arguments.of(new BigDecimal("1000"), new BigDecimal("1000"), null),
            Arguments.of(BigDecimal.TEN, null, BigDecimal.TEN),
            Arguments.of(BigDecimal.ZERO, null, BigDecimal.ZERO),
            Arguments.of(BigDecimal.ZERO, BigDecimal.ZERO, null),
            Arguments.of(BigDecimal.ZERO, BigDecimal.ZERO, BigDecimal.ZERO),
            Arguments.of(null, null, null)
        );
    } 
```

实施：

```
static BigDecimal bigDecimalsSum(BigDecimal... bigdecimals) {
    if (Arrays.stream(bigdecimals).allMatch(Objects::isNull)) {
        return null;
    }
    return Arrays.stream(bigdecimals)
            .filter(Objects::nonNull)
            .reduce(BigDecimal.ZERO, BigDecimal::add);
} 
```

# ruby-on-rails - Rails I18n 在 Heroku 上无法正常工作

> ID：14823773
> 
> 赞同：0
> 
> 时间：2013-02-12T00:56:01.717
> 
> 标签：ruby-on-rails, heroku, rails-i18n

I18n 在本地按预期工作，但在 heroku 上却没有。即使浏览器设置为 pt-BR，它也始终显示英文。我们在前置过滤器中设置语言环境：

```
class ApplicationController < ActionController::Base
  before_filter :set_locale

    private

  def set_locale
    I18n.set_preferred_locale(env.http_accept_language)
  end
end

module I18n
  class << self
    def set_preferred_locale(http_accept_language)
      locale = http_accept_language.preferred_language_from(I18n.available_locales)

      if locale.present?
        I18n.locale = locale
        I18n.default_locale = locale  #added based on some stackflow answer about heroku and I18n
      end
    end
  end
end 
```

我已通过记录器确认 I18n.locale 在视图中具有正确的值 (pt-BR)，但翻译仍以英语提供。

我也尝试过直接设置为“pt-BR”作为测试，但仍然得到相同的结果：

```
class ApplicationController < ActionController::Base
   before_filter :set_locale

   private

   def set_locale
      I18n.locale = 'pt-BR'
   end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:58:52.773

原来我设置得很好。问题是我的 pt-BR.yml 中有一个字节顺序标记。显然 heroku 不能用它们加载语言文件 - [heroku not loading language file](https://stackoverflow.com/questions/7868309/heroku-not-loading-language-file)。

我使用 vim 删除标记：

```
:set nobomb
:w 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T21:52:24.093

为我工作，我打开了任何文件并用 nobomb 保存

# ios - 如何使用 stringWithFormat 正确填充字符串

> ID：14823777
> 
> 赞同：6
> 
> 时间：2013-02-12T00:56:29.467
> 
> 标签：ios, objective-c, stringwithformat

我希望能够使用空格右对齐字符串。我必须能够使用该`stringWithFormat:`方法。

到目前为止，我已经尝试了推荐的格式，但它似乎不起作用：`[NSString stringWithFormat:@"%10@",@"test"]`.

我希望这会返回一个包含六个空格后跟“test”的字符串，但我得到的只是没有空格的“test”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T01:10:57.123

似乎`stringWithFormat`忽略了`%@`格式说明符的大小调整请求。但是，`%s`说明符可以正常工作：

```
NSString *test = @"test";
NSString *str = [NSString stringWithFormat:@"%10s", [test cStringUsingEncoding:NSASCIIStringEncoding]];
NSLog(@"'%@'", str); 
```

这打印`' test'`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T01:11:06.417

它是 C 风格的格式。%nd 表示宽度为 n。

检查以下代码。

```
NSLog(@"%10@",[NSString stringWithFormat:@"%10@",@"test"]);
NSLog(@"%@",[NSString stringWithFormat:@"      %@",@"test"]);
NSLog(@"%10@", @"test");
NSLog(@"%10s", [@"test" cStringUsingEncoding:[NSString defaultCStringEncoding]]);
NSLog(@"%10d", 1);

NSString *str = @"test";
int padding = 10-[str length]; //6
if (padding > 0) 
{
   NSString *pad = [[NSString string] stringByPaddingToLength:padding withString:@" " startingAtIndex:0];
   str = [pad stringByAppendingString:str];
}
NSLog(@"%@", str); 
```

# javascript - 如何在开发中禁用 Meteor JS 中的热代码推送？

> ID：14823783
> 
> 赞同：4
> 
> 时间：2013-02-12T00:57:08.013
> 
> 标签：javascript, meteor

我正在使用 Tincr ( [http://tin.cr/](http://tin.cr/) ) 来利用 Chrome 的代码热交换功能。但是，现在我需要在每次保存文件时禁用 Meteor 刷新页面，因为由于 chrome 热交换，代码已经在浏览器的运行时环境中更新。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T01:08:27.037

我找到了答案。在您不想导致重新加载的文件或文件夹的末尾添加一个“~”。

# android - Android：如何从 Observer/Receiver 获取事件和日历 ID 以删除 CalendarContract.EVENT

> ID：14823789
> 
> 赞同：2
> 
> 时间：2013-02-12T00:57:56.717
> 
> 标签：android, events, broadcastreceiver, android-calendar, contentobserver

我目前正在开发一个将日历事件添加到用户选择的日历的应用程序。用户可以使用我的应用程序或另一个日历应用程序来编辑事件。我现在正在尝试编写一个在后台工作并监听事件或实例更改的接收器或观察者。我基本上希望我的应用程序知道何时删除事件或事件实例，以便我可以清理应用程序数据库中的一些数据，特别是当事件或实例从另一个日历应用程序中删除时。我在想我可以使用意图过滤器在清单文件中注册一个观察者。我使用广播接收器找到了以下示例，它似乎在大多数情况下都有效，但是我想知道如何获取 calendarId、eventId 甚至可能是要删除的事件的 instanceId。有任何想法吗？

```
<receiver android:name=".calendar.CalendarChangeReceiver">
    <intent-filter>
      <action android:name="android.intent.action.PROVIDER_CHANGED"/>
      <data android:scheme="content"/>
      <data android:host="com.android.calendar"/>
    </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:10:01.033

不幸的是，对于内容观察者，您无法获得有关更改内容的任何详细信息。您获得的唯一信息是更改的内容 Uri（如果可用），这仅来自 API 16： [onChange(boolean, android.net.Uri)](https://developer.android.com/reference/android/database/ContentObserver.html#onChange%28boolean,%20android.net.Uri%29)

# django - Django 管理模板覆盖在生产环境中不起作用

> ID：14823790
> 
> 赞同：4
> 
> 时间：2013-02-12T00:57:59.327
> 
> 标签：django, django-templates, overriding, admin

像[这个问题](https://stackoverflow.com/questions/11793890/custom-django-admin-templates-not-working)一样，我的管理员覆盖在我的生产环境中不起作用，但它们在我的开发环境中（相同的 django 版本）。我已经尝试在 settings.py 中重新排序 INSTALLED_APPS 元组而没有任何变化（是上面链接的问题的答案）。这是我构建项目的方式：

```
/WebDJ/ # project dir
    +devices # unrelated app, but it uses templates (see below)
    +sales
        __init__.py
        admin.py
        models.py  # has Customer and Transaction model classes
    +templates
        +admin
            +sales
                +Customer
                    change_form.html
                +Transaction
                    change_form.html
        +devices # lots of templates under here that work fine
        404.html
        500.html 
```

还：

```
TEMPLATE_DIRS = ('/WebDJ/templates',) 
```

在 settings.py 中设置。设备应用程序中的模板很好。没有加载的是管理目录中的覆盖 - 因此客户和交易的更改表单添加了一些额外的东西（覆盖“after_field_sets”块）。

同样，它适用于我的开发环境（使用 PyCharm），但不适用于我的生产环境。有任何想法吗？我真的被这个难住了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T22:46:01.817

答：在我的生产机器上，显然它不喜欢“客户”和“交易”，尽管这是模型的确切名称 - 它需要“客户”和“交易”。

# random - 如何每小时选择一次随机时间

> ID：14823792
> 
> 赞同：1
> 
> 时间：2013-02-12T00:58:14.253
> 
> 标签：random, time

假设我想每小时运行一次任务，但在一小时内的可变时间运行。它不一定是真正随机的。例如，我只是不想在每小时的最开始做这件事。我只想每小时做一次。

这消除了几种明显的方法，例如随机睡 30 到 90 分钟，然后再睡。该任务有可能（而且很可能）连续运行多次，睡眠时间不超过 30 分钟。

我正在考虑的方法是这样的：每小时对一小时的 Unix 时间戳进行哈希处理，然后将结果修改为 3600。将结果添加到一小时的 Unix 时间戳，这就是任务应该运行的时刻。在伪代码中：

```
while now = clock.tick; do
  // now = a unix timestamp
  hour = now - now % 3600;
  hash = md5sum(hour);
  the_time = hour + hash % 3600;
  if now == the_time; then
    do_the_work();
  end
end 
```

我确信这会满足我的要求，但我认为把这个问题抛出去看看其他人有什么想法会很有趣！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:05:21.207

在接下来的一小时内工作，只需在该小时内随机选择一分钟。

也就是说，为*下一个*间隔选择一个随机时间进行工作；如果工作已从前一个间隔结转，则这可能与当前间隔（小时）相同。

“睡觉时间”只是到那时为止的时间。如果随机时间在现在之前，这也可以在结转情况下“立即”执行：这将确保每小时选择一个随机时间*，*除非工作需要超过一个小时。

不要让它变得比它必须的更复杂 - 没有理由在`random`这里散列或以其他方式搞砸。这就是“企业”解决方案（如 SharePoint 计时器（带有每小时计划））的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:11:04.143

我已经部署了我建议的解决方案，并且运行良好。例如，每分钟一次，我从我正在监视的进程中采样一些信息，但我在一分钟内的不同时间进行采样。我在 Go 代码中创建了一个 Timestamp 类型的方法，称为 RandomlyWithin，如下所示：

```
func (t Timestamp) RandomlyWithin(dur Timestamp, entropy ...uint32) Timestamp {
    intervalStart := t - t % dur
    toHash := uint32(intervalStart)
    if len(entropy) > 0 {
        toHash += entropy[0]
    }
    md5hasher.Reset()
    md5hasher.Write([]byte{
        uint8(toHash >> 24 & 255),
        uint8(toHash >> 16 & 255),
        uint8(toHash >> 8 & 255),
        uint8(toHash & 255)})
    randomNum := binary.BigEndian.Uint32(md5hasher.Sum(nil)[0:4])
    result := intervalStart + Timestamp(randomNum)%dur
    return result
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:05:06.800

1.  安排您的任务（使用 cron 等）在每小时的顶部运行。

2.  在你的任务开始时，随机睡眠一段时间，从 0 到 (60 - (*你的任务的估计运行时间*+*一个软糖因素*)) 分钟。

3.  如果您不希望您的任务同时运行两次，您可以使用 pid 文件。该任务可以在睡眠后检查此文件并等待当前正在运行的任务完成，然后再重新开始。

# java - 序列化反序列化订单信息

> ID：14823794
> 
> 赞同：0
> 
> 时间：2013-02-12T00:58:22.770
> 
> 标签：java, serialization, deserialization

在我的一次采访中，面试官给了我一个场景，我通过 FTP 获取一个文件，其中存储了订单信息，每个字段用逗号分隔。我需要使用**Serialization**将此信息存储在 Order 类的对象中。

文件格式：orderId,securityName,Buy/Sell,OrderType,Qty,Price

```
Class Order
{
    int orderId;
    String securityName;
    ....

} 
```

我想在这里提一下，该文件是由其他应用程序生成的，我们必须使用该应用程序生成的文件。我很困惑我该怎么做，因为那里没有进行编组所以我如何解组数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:00:56.773

1.  读取 CSV 文件以获取 Order 对象的列表。
2.  使用序列化将包装对象存储在文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:26:43.823

从技术上讲，您将使用***反序列***化将文件数据存储到对象中。练习的重点是认识到您可以通过在类中实现以下方法来实现对象的自定义序列化/反序列化：

```
 private void writeObject(java.io.ObjectOutputStream stream)
     throws IOException;

private void readObject(java.io.ObjectInputStream stream)
     throws IOException, ClassNotFoundException; 
```

在您的特定情况下，您将实现该`readObject`方法，从逗号分隔值文件中读取，并使用获得的值填充对象的实例。就像是：

```
class Order implements Serializable {
    private static final long serialVersionUID = -6730370200519884700L;

    // Instance variables, Constructors, Getters/Setters

    private void readObject(ObjectInputStream stream) {
        // obtain data from stream and use
    }
} 
```

很明显，***这是伪代码***，但它应该让您知道从哪里开始。

# javascript - 单击大表中的单元格并将该单元格的内容插入表单域

> ID：14823800
> 
> 赞同：1
> 
> 时间：2013-02-12T00:59:05.937
> 
> 标签：javascript, jquery, forms

我有一个包含许多用户可填写字段的表单。用户需要在从包含大数据表的弹出窗口中选择的那些字段中输入一个数字。

例如，一个字段可能会显示“税率”。用户将（最好）单击（空的）“税率”输入字段，这将显示大数据表。用户将（最好）单击该表中的一个值，然后关闭该表并使用该值填充输入字段。

我希望（真的希望）是我不必为表格中的每个单元格创建某种特殊的 id 以便将数字传递回表单字段，因为表格很大，我希望以普通的旧`<tr><td>1.234</td></tr>`格式创建它们。

我闻到了 jQuery，但我不熟悉如何实现它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:29:43.087

这是一个使用 jQueryUI 对话框的非常基本的演示，可以帮助您入门：

HTML：

```
Rate:<input type="text" id="rate_input" />
<div id="dialog" title="Click a value to fill input and close dialog">
    <table id="rates" border="1" width="100%">
        <tr>
            <td>Value 1</td>
            <td>Value 2</td>
            <td>Value 3</td>
        </tr>
    </table>
</div> 
```

jQuery：

```
$(function(){    
    $('#dialog').dialog({
        autoOpen: false,
        width: 400
    });

    $('#rate_input').click(function () {
        $('#dialog').dialog('open');
    });

    $('#rates td').click(function () {
        $('#rate_input').val($(this).text());
        $('#dialog').dialog('close');
    });
}); 
```

演示：http: [//jsfiddle.net/5jMqJ/](http://jsfiddle.net/5jMqJ/)

# php - CakePHP：无法加载配置文件

> ID：14823803
> 
> 赞同：1
> 
> 时间：2013-02-12T00:59:12.893
> 
> 标签：php, apache, cakephp, twitter-bootstrap, osx-mountain-lion

我正在尝试从我的山狮计算机上的 svn checkout 启动并运行一个 cakephp 项目。

我更改了所有缓存写入权限，但现在我遇到了最后一个致命错误，它不允许应用程序运行。

```
Fatal error: Uncaught exception 'ConfigureException' with message 'Could not load configuration file: /Users/mike/cake2cribs/cake2cribs/app/Config/core-production.php' in /Users/mike/cake2cribs/cake2cribs/lib/Cake/Configure/PhpReader.php:77 
```

> 堆栈跟踪：#0 /Users/mike/cake2cribs/cake2cribs/lib/Cake/Core/Configure.php(267): PhpReader->read('core-production') #1 /Users/mike/cake2cribs/cake2cribs/app /Config/core.php(287): Configure::load('core-production') #2 /Users/mike/cake2cribs/cake2cribs/lib/Cake/Core/Configure.php(76): include('/Users /mike/cak...') #3 /Users/mike/cake2cribs/cake2cribs/lib/Cake/bootstrap.php(146): 配置::bootstrap(true) #4 /Users/mike/cake2cribs/cake2cribs/app /webroot/index.php(81): include('/Users/mike/cak...') #5 {main} 抛出 /Users/mike/cake2cribs/cake2cribs/lib/Cake/Configure/PhpReader.php on第 77 行

它在 webroot 内的 index.php 内的这一行上失败

```
 if (!include ('Cake' . DS . 'bootstrap.php')) {
    $failed = true;
} 
```

关于可能是什么原因的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:49:34.120

我从来没有安装过 Ubuntu，我一直只是下载源代码并将其放在我的 webroot 中。无论如何，cake 总是希望有一个名为 core.php 的文件，其中包含所有配置信息。也许 Ubuntu 安装只需要 core-production.php，所以您可能只需要复制 app/Config 中的 core.php 文件并将其重命名为 core-production.php。

# c# - Ninject 中的泛型和属性绑定

> ID：14823810
> 
> 赞同：2
> 
> 时间：2013-02-12T01:00:07.830
> 
> 标签：c#, asp.net-mvc-3, ninject, nopcommerce

我正在寻找一种将设置合并到我的 webapp (asp mvc) 中的好方法。我在 NopCommerce 中遇到了一个非常好的实现。NopCommerce 使用名称和值将值存储在数据库表中。名称派生自类和属性名称（例如 customersettings.settingname1）

可以在以下问题中找到 NopCommerce 使用设置的确切方式：[了解如何从数据库加载 Nop Commerce 设置](https://stackoverflow.com/questions/10667075/understanding-how-nop-commerce-settings-are-loaded-from-the-database)

NopCommerce 使用 Autofac 作为 DI 框架来绑定`Settings`如下`ConfigurationProvider`（我是正确的）。

```
return RegistrationBuilder
                .ForDelegate((c, p) => c.Resolve<IConfigurationProvider<TSettings>>().Settings)
                .InstancePerHttpRequest()
                .CreateRegistration(); 
```

在适当的类中，您现在可以`ClientSettings`用作参数，它会自动填充数据库中的数据。

我真的很喜欢这个实现，因为它非常灵活。然而问题是我正在使用 Ninject。我已经尝试了几件事来获得正确的绑定，但似乎找不到正确的实现。有谁知道如何让它工作？

**编辑**：

我找到了一种`ClientSettings`直接绑定的方法：

```
kernel.Bind<ClientSettings>()
      .ToMethod(ctx => ctx.Kernel.Get<IConfigurationProvider<ClientSettings>>().Settings)
      .InRequestScope(); 
```

但是有没有办法做到这一点？

```
kernel.Bind<ISettings>()
      .ToMethod(ctx => ctx.Kernel.Get<IConfigurationProvider<ISettings>>().Settings)
      .InRequestScope(); 
```

**编辑 2**

我想我已经接近了，但仍然遇到一些问题。我创建了一个自定义绑定生成器：

```
public class SettingsBindGenerator : IBindingGenerator
{
    static readonly MethodInfo BuildMethod = typeof(SettingsBindGenerator).GetMethod(
        "BuildRegistration",
        BindingFlags.Static | BindingFlags.NonPublic);      

    public IEnumerable<IBindingWhenInNamedWithOrOnSyntax<object>> CreateBindings(Type type, IBindingRoot bindingRoot)
    {
        var obj = typeof (object).IsAssignableFrom(type);
        if (type != null && typeof(ISettings).IsAssignableFrom(type))
        {
            var buildMethod = BuildMethod.MakeGenericMethod(type);
            var methodResult = buildMethod.Invoke(null, new object[]{bindingRoot});
            var castedResult = methodResult as IBindingWhenInNamedWithOrOnSyntax<object>;
            yield return castedResult;
        }
    }

    static IBindingWhenInNamedWithOrOnSyntax<TSettings> BuildRegistration<TSettings>(IBindingRoot bindingRoot) where TSettings : ISettings, new()
    {
        return bindingRoot.Bind<TSettings>().ToMethod(
            ctx => ctx.Kernel.Get<IConfigurationProvider<TSettings>>().Settings);
    }
} 
```

这适用于 99%。但是，出于某种原因，buildMethod.Invoke 返回一个 BindingConfigurationBuilder，而不是 IBindingWhenInNamedWithOrOnSyntax。因此， castedResult 始终为 NULL。有人知道如何纠正这个问题吗？

**最后编辑**

我不知道为什么，但突然它起作用了！很高兴我终于弄明白了。谢谢雷莫！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:02:14.037

你有几个选择：

1.  像 NopCommerce 一样进行操作并扫描设置类并使用反射从您的第一次编辑中调用注册方法。
2.  使用约定扩展注册所有`ISettings`使用自定义绑定生成器实现的类[https://github.com/ninject/ninject.extensions.conventions/wiki/Projecting-Services-to-Bind](https://github.com/ninject/ninject.extensions.conventions/wiki/Projecting-Services-to-Bind)
3.  使用约定扩展来注册所有实现`ISettings`绑定所有接口的类。并向 Ninject 添加一个自定义 IActivationStrategy ，它会像 NopCommerce 一样分配属性。

# java - Android 无法在 AlertDialog 上获取消息对象

> ID：14823812
> 
> 赞同：5
> 
> 时间：2013-02-12T01:00:40.840
> 
> 标签：java, android

我正在尝试在 AlertDialog 中设置消息的链接文本颜色。但是当我尝试 findViewById 时，我的应用程序崩溃了。我究竟做错了什么？我是否需要在活动的 XML 中包含消息？

```
final AlertDialog d =  new AlertDialog.Builder(new ContextThemeWrapper(SplashPage.this, R.style.Theme_Sherlock_Light_Dialog))
            .setIcon(android.R.drawable.ic_dialog_info).setTitle(getString(R.string.termsTitle))
                //.setView(message).setCancelable(false)
                .setMessage(Html.fromHtml(getString(R.string.terms))).setCancelable(false)
                .setPositiveButton(getString(R.string.accept), new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialogInterface, int i) {
                        app.setTermsAccepted(true);
                        dialogInterface.dismiss();

                        Intent intent = new Intent(SplashPage.this, LoginPage.class);
                        startActivity(intent);
                    }
                }).create();

        //FAILING: TextView TV = (TextView)d.findViewById(android.R.id.message);
        //TV.setLinkTextColor(Color.MAGENTA); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T03:49:12.157

我查看了 AlertDialog 文档，似乎当您调用它的方法时，它会搜索您在**其**onStart 方法中处理的 XML（[http://developer.android.com/reference/android/app/Dialog.html# findViewById%28int%29](http://developer.android.com/reference/android/app/Dialog.html#findViewById%28int%29)）。相反，只需调用您的*活动的*findViewById 方法（例如，如果这是在活动类中，只需调用：

```
TextView TV = (TextView) findViewById(android.R.id.message); 
```

应该管用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T21:06:07.510

如果您使用的是 DialogFragment，则可以在 DialogFragment.onStart() 方法之后访问它，这在之前的答案中没有解决。

```
@Override
public void onStart() {
super.onStart();
    final TextView textView = (TextView) getDialog().findViewById(android.R.id.message);
    //Do something!
} 
```

# jakarta-ee - 过期后如何重新填充缓存？

> ID：14823816
> 
> 赞同：1
> 
> 时间：2013-02-12T01:01:14.670
> 
> 标签：jakarta-ee, caching, jboss7.x, infinispan

我一直在阅读有关 infinispan ... 我只需要使用普通的香草缓存，没有集群，没有二级休眠缓存。

我知道过期后，缓存中的对象将被销毁，我不明白的是如何在这些对象被销毁之前刷新它们。我检查了事件，但没有看到类似的情况。

我的目标是拥有一个在给定时间内保存 JPA 结果查询的 Map，然后不时刷新结果。此缓存是只读的，不需要钝化或存储条目。

那么，如何在缓存过期之前将新值放入缓存中呢？我猜 infinispan 应该提供一种方法来做到这一点，还是我错过了什么？也许这个逻辑应该用EJB中的`@Scheduler`计时器来实现。`@Singleton`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:32:53.893

如果您不希望缓存中的内容永远过期，请为缓存设置负的*timeToLive*，它们将永远保留。或者，如果您需要某些东西只有在 5 秒内未使用时才过期，则将*maxIdle*设置为 5 秒。在该键的每次读取（*cache.get()*）时，*maxIdle*开始时间都会被重置，因此只要足够频繁地使用它们，它们就永远不会离开缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:11:35.070

我对缓存有一个不好的想法。

缓存项有一个过期时间，因此要检查给定实体是否存在，如果不存在则表示它已过期，因此是时候再次加载该给定值了。所以不需要实现定时器。此外，当给定项目过期时，缓存将“自行清除”。

# sql - 如何在matlab中调用.sql函数？

> ID：14823817
> 
> 赞同：-2
> 
> 时间：2013-02-12T01:01:25.890
> 
> 标签：sql, matlab

我在 linqpad 中编写代码并将其保存为 test.sql 然后我想从 matlab 调用查询。我应该怎么办？有人建议使用 result=runsqlscript(connect,'test.sql') 但它没有用。matlab中不存在函数runsqlscript。如果有人可以帮助我，我将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T18:34:50.723

同意上述，这是最简单的方法，检查版本并使用数据库工具箱。添加对脚本调用的简单“检查”是使用接口连接到您的数据，并在导入数据按钮上使用下拉“生成 sql 脚本”为您的 sql 构建 Matlab“包装器”。如果错误消息看起来模棱两可，这很有用

# c++ - 创建舍入函数

> ID：14823822
> 
> 赞同：0
> 
> 时间：2013-02-12T01:01:39.847
> 
> 标签：c++, function, rounding

试图做一些真正简单的事情，但这让我非常头疼。

我需要编写一个函数，将 double 参数的值四舍五入到 n 指定的小数位数。

我已经完成了大部分操作，但由于某种原因，结果 = ..... 仅计算舍入算法的第一行（见下文）

结果不是对数字进行四舍五入，而是将小数点移动 n 指定的位数。我的代码如下：

```
#include <iostream>
#include <cmath>
using namespace std;

double round(double x, int n)

{

double result;

result = 

x * pow(10, n);

x = x + 0.5;

x = floor(x);

x = x / pow(10, n);

 return result;

}

int main()

{

cout << round(-2.9, 0) << endl;

cout << round(-2.59, 1) << endl;

cout << round(.0059, 2) << endl;

cout << round(1.23467, 3) << endl;

cout << round(9.999999, 4) << endl;

return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:05:09.757

你的`round()`回报`result = x * pow(10, n)`，你还期待什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:06:08.060

您可能会通过以下方式获得更好的结果：

```
double round(double x, int n) {
    x = x * pow(10, n);
    x = x + 0.5;
    x = floor(x) / pow(10, n);

    return x;
} 
```

问题是在原始代码中，您分配了，但随后使用而不是`result = x * pow(10, n);`继续执行所有其余操作。 `x``result`

您还可以结合一些语句来减少方法中的行数，甚至可以使用单行语句，例如`return floor(x * pow(10, n) + 0.5) / pow(10, n);`. 并不是说这一定更好，但是当您所做的只是数学时，您不需要*在*自己的行上执行每个操作。

# algorithm - 是否有更适合 CISC 或 RISC 的算法或某些编程风格？

> ID：14823824
> 
> 赞同：0
> 
> 时间：2013-02-12T01:01:50.557
> 
> 标签：algorithm, x86, arm, mips, processor

似乎两者都用于各种原因，ARM用于功耗，x86用于其扩展功能。

我仍然很好奇，因为我的计算机科学文化有点空洞，像 x86（或它们的前辈）这样的 CISC 芯片的真正目的是什么。

如果他们有 RISC，我们的计算机会更好吗（例如，如果微软将其内核和工具链移植到 RISC，如 MIPS 或 ARM）？或者它是不可能完成的任务？

我正在阅读 CISC 的目的是能够更接近高级语言，我觉得这很奇怪。英特尔和微软之间是否达成了专注于 x86 的协议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T07:22:03.267

呜呜呜呜呜呜呜呜呜呜呜呜

# java - 如果spring mvc中的principal为null，则将用户重定向到登录页面

> ID：14823828
> 
> 赞同：2
> 
> 时间：2013-02-12T01:01:59.913
> 
> 标签：java, spring-mvc, spring-security

**如果在服务**层（任何地方）`SecurityContextHolder`中发现主体为空，如何将用户重定向到登录页面？我想它应该是一些拦截器或过滤器。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:29:49.110

当请求进入服务层时，Security Context 应该已经由您的安全过滤器链中配置的过滤器之一填充。如果未填充，则意味着安全过滤器链未正确配置，或者请求 URL 不受任何已配置过滤器链的保护。检查该`pattern`属性是否存在`http`于您的安全配置中的元素上，以及它是否与请求 URL 匹配。

负责处理未经身份验证的请求的过滤器`ExceptionTranslationFilter`将调用配置`AuthenticationEntryPoint`来启动身份验证过程。默认命名空间配置 ( `<security:http auto-config="true"...`) 设置此过滤器`LoginUrlAuthenticationEntryPoint`，将用户重定向到登录页面。**

# bash - for 使用 Bash 遍历目录中的特定文件

> ID：14823830
> 
> 赞同：28
> 
> 时间：2013-02-12T01:02:13.593
> 
> 标签：bash, for-loop

在一个目录中，您有一些不同的文件 - `.txt`，`.sh`然后计划没有`.foo`修饰符的文件。

如果你`ls`的目录：

```
blah.txt
blah.sh
blah
blahs 
```

如何告诉 for 循环仅使用文件而不进行`.foo`修改？所以在上面的例子中对文件 blah 和 blahs “做一些事情”。

基本语法是：

```
#!/bin/bash
FILES=/home/shep/Desktop/test/*

for f in $FILES
do
    XYZ functions
done 
```

如您所见，这有效地循环了目录中的所有内容。如何排除`.sh`,`.txt`或任何其他修饰符？

我一直在玩一些 if 语句，但我真的很好奇我是否可以选择那些未修改的文件。

也有人可以告诉我这些没有 .txt 的纯文本文件的正确术语吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-12T01:10:06.823

```
#!/bin/bash
FILES=/home/shep/Desktop/test/*

for f in $FILES
do
if [[ "$f" != *\.* ]]
then
  DO STUFF
fi
done 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-18T21:55:01.510

如果你想让它更复杂一点，你可以使用 find-command。

对于当前目录：

```
for i in `find . -type f -regex \.\\/[A-Za-z0-9]*`
do
WHAT U WANT DONE
done 
```

解释：

```
find . -> starts find in the current dir
-type f -> find only files
-regex -> use a regular expression
\.\\/[A-Za-z0-9]* -> thats the expression, this matches all files which starts with ./
(because we start in the current dir all files starts with this) and has only chars
and numbers in the filename. 
```

[http://infofreund.de/bash-loop-through-files/](http://infofreund.de/bash-loop-through-files/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T01:05:59.083

可以使用负通配符吗？过滤掉它们：

```
$ ls -1
a.txt
b.txt
c.png
d.py
$ ls -1 !(*.txt)
c.png
d.py
$ ls -1 !(*.txt|*.py)
c.png 
```

# c++ - C++ 如何在可移植代码中处理 tr1 和非 tr1 命名空间？

> ID：14823832
> 
> 赞同：2
> 
> 时间：2013-02-12T01:02:35.630
> 
> 标签：c++, boost, namespaces, tr1, typetraits

在尝试维护 TR1 和非 TR1 工具链之间的可移植代码时，是否有一种规范的方法来处理出现的命名空间问题？

我有一个 VC++2010 项目`#include <type_traits>`。我还有一个 LLVM 3.0 编译器可以很好地处理这个问题。这允许我使用模板，例如：

```
std::enable_if<typename>
std::is_enum<typename> 
```

但是，我还需要在 Xcode 4.5 clang 编译器上构建和维护此代码：

```
$ /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang --version
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix 
```

这个编译器似乎没有包含文件，而是有一个 . 然而，这给我带来了问题，因为命名空间已从 std:: 更改为 __gnu_cxx::，这意味着我必须使用：

```
__gnu_cxx::__enable_if<typename> 
```

不知何故，我能够确定符号的定义`__GLIBCXX__`足以确定我应该使用一个还是另一个（甚至不确定这是正确的方法，但现在它在我正在使用的编译器之间工作）。

所以我可以求助于使用预处理器宏：

```
#ifdef __GLIBCXX__
# include <tr1/type_traits>
# define ENABLE_IF __gnu_cxx::__enable_if
#else
# include <type_traits>
# define ENABLE_IF std::enable_if
#endif 
```

但这似乎更像是一种黑客攻击，而不是一个适当的解决方案。（其实我试过这个还是不行，因为尝试使用`__gnu_cxx::__enable_if`会导致这个错误：

```
error: too few template arguments for class template '__enable_if' 
```

*   进一步挖掘表明，这个版本的 enable_if 实际上采用了两个模板参数。我现在很迷茫......）

我想过做类似的事情：

```
#ifdef __GLIBCXX__
# include <tr1/type_traits>
namespace __gnu_cxx = foo; 
#else
# include <type_traits>
namespace std = foo;
#endif

... foo::enable_if< ... > 
```

但是，这不起作用，因为模板`enable_if`在一个命名空间中调用，但`__enable_if`在另一个命名空间中调用。

我确定我不是第一个处理这个问题的人 - 有人可以指出解决这个问题的行业最佳实践吗？还是我应该只使用 Boost 代替？

有一个类似的问题（我认为），但[这里](https://stackoverflow.com/a/7095608/143397)只有部分答案。有更好的选择吗？

编辑：我试过这个，用`<boost/type_traits.hpp>`：

```
#include <boost/type_traits.hpp>

template <typename ValueType>
class Extractor <ValueType, typename boost::enable_if<boost::is_enum<ValueType>::value>::type> {
 public:
  ValueType extract(double value) {
    return static_cast<ValueType>(static_cast<int>(value));  // cast to int first, then enum, to satisfy VC++2010
  }
};

enum MyEnum { Enum0, Enum1 };
Extractor<MyEnum> e;
MyEnum ev = e.extract(1.0); 
```

但是，这给了我 Xcode 4.5 中的以下编译器错误：

```
error: expected a qualified name after 'typename'
  class Extractor <ValueType, typename boost::enable_if<boost::is_enum<ValueType>::value>::type> {
                                                                                           ^
error: unknown type name 'type' 
```

因此，std::enable_if 和 boost::enable_if 似乎不兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:47:40.600

我会回答我自己的问题，因为我确实使用了一些东西`boost::enable_if_c`（请注意，替换为`std::enable_if`is `boost::enable_if_c`， not `boost::enable_if`）。

```
#include <boost/utility/enable_if.hpp>
#include <boost/type_traits/is_enum.hpp>

// this would work except one of my environments doesn't contain <complex> so it's
// too inclusive. Better (for me) to use the more specific includes above.
// #include <boost/type_traits.hpp>  

template <typename ValueType>
class Extractor <ValueType, typename boost::enable_if_c<boost::is_enum<ValueType>::value>::type> {
 public:
  ValueType extract(double value) {
    return static_cast<ValueType>(static_cast<int>(value));  // cast to int first, then enum, to satisfy VC++2010
  }
}; 
```

但是，我仍然很想知道是否有比求助于 Boost 更好的方法来处理这个问题。

# mysql - MySQL左连接使用单行

> ID：14823835
> 
> 赞同：3
> 
> 时间：2013-02-12T01:02:49.553
> 
> 标签：mysql, sql

我有以下表格：

```
mysql> select * from `empresas`;
+----+-------+-----------+-------+------------+----------------+
| id | tipo  | logotipo  | nome  | grupo      | cnpj           |
+----+-------+-----------+-------+------------+----------------+
|  8 | Lazer | troll.jpg | Teste | Pespi Cola | 99999313412312 |
+----+-------+-----------+-------+------------+----------------+

mysql> select * from `empresas_contatos`;
+----+---------+------------+--------------+------------+
| id | empresa | rotulo     | email        | telefone   |
+----+---------+------------+--------------+------------+
|  1 |       8 | Principal  | x@xxx.co.co  | 5112121212 |
|  2 |       8 | Financeiro | fin@y.net    | 5012121212 |
+----+---------+------------+--------------+------------+ 
```

我想同时使用左连接，如下所示：

```
mysql> select `e`.`nome`, `e`.`grupo`, `c`.* from `empresas` `e` 
    -> left join `empresas_contatos` `c` on
    -> `c` . `empresa` = `e` . `id`;
+-------+------------+------+---------+------------+-------------+------------+
| nome  | grupo      | id   | empresa | rotulo     | email       | telefone   |
+-------+------------+------+---------+------------+-------------+------------+
| Teste | Pespi Cola |    1 |       8 | Principal  | x@xxx.co.co | 5112121212 |
| Teste | Pespi Cola |    2 |       8 | Financeiro | fin@y.net   | 5012121212 |
+-------+------------+------+---------+------------+-------------+------------+ 
```

问题在于，以这种方式，查询会重复`empresas`字段，例如`grupo`, `nome`（实际表比示例大！）。

我想知道如何在一行中接收所有数据。结果应该是这样的：

```
+-------+------------+------+---------+------------+-------------+------------+-------------+------------+
| nome  | grupo      | id   | empresa | rotulo     | email1      | telefone1  | email2      | telefone2  |
+-------+------------+------+---------+------------+-------------+------------+-------------+------------+
| Teste | Pespi Cola |    1 |       8 | Principal  | x@xxx.co.co | 5112121212 | fin@y.net   | 5012121212 |
+-------+------------+------+---------+------------+-------------+------------+-------------+------------+ 
```

如果有第三`empresas_contatos`行，查询将返回`email3`, `telefone3`...

我可以使用 GROUP_CONCAT()，但我很想为此找到解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:19:29.727

您实际上是在尝试做一个`PIVOT`. 这里的问题是我们需要行标识符来`PIVOT`反对。这就是我介绍按您的 empresa 列分组的行号的地方。

所以这样的事情应该可以工作，但你需要知道潜在列的最大数量。但是，这应该可以帮助您入门：

```
select g.empresa,
  MAX(CASE WHEN rownum = 1 THEN g.email END) Email1,
  MAX(CASE WHEN rownum = 2 THEN g.email END) Email2,
  MAX(CASE WHEN rownum = 1 THEN g.telefone END) Phone1,
  MAX(CASE WHEN rownum = 2 THEN g.telefone END) Phone2
from (
    select id,empresa,email,telefone,
        @running:=if(@previous=empresa,@running,0) + 1 as rownum,
        @previous:=empresa
    from empresas_contatos t
      JOIN (SELECT @running:= 0) r
      JOIN (SELECT @previous:= 0) s
) g 
GROUP BY g.empresa 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/b19fa/1)。

顺便说一句-看起来您的 rotulo 列也需要与重复项相同的逻辑。

这是一个更实用的工作示例来满足您的需求——我删除了 empresas_contatos.id，但如果您需要，只需添加另一个 MAX CASE：

```
select e.nome, e.grupo, g.empresa,
  MAX(CASE WHEN rownum = 1 THEN g.rotulo END) Rotulo1,
  MAX(CASE WHEN rownum = 2 THEN g.rotulo END) Rotulo2,
  MAX(CASE WHEN rownum = 1 THEN g.email END) Email1,
  MAX(CASE WHEN rownum = 2 THEN g.email END) Email2,
  MAX(CASE WHEN rownum = 1 THEN g.telefone END) Phone1,
  MAX(CASE WHEN rownum = 2 THEN g.telefone END) Phone2
from (
    select id,empresa,email,telefone,rotulo,
        @running:=if(@previous=empresa,@running,0) + 1 as rownum,
        @previous:=empresa
    from empresas_contatos t
      JOIN (SELECT @running:= 0) r
      JOIN (SELECT @previous:= 0) s
) g JOIN empresas e on g.empresa = e.id
GROUP BY e.nome, e.grupo, g.empresa 
```

还有更多[小提琴](http://sqlfiddle.com/#!2/fdeac/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:51:12.927

这样做的原因是什么？运行此查询后如何使用数据？您是否将其导入电子表格或以其他方式处理？

对数据进行后处理以达到您想要的效果可能会更容易。

# php - 发送 HTTP 418 我是茶壶

> ID：14823839
> 
> 赞同：7
> 
> 时间：2013-02-12T01:04:01.730
> 
> 标签：php, http

我有一个网络服务器，我想在某些情况下获得 HTTP 状态代码 418 'I'm a teapot'，我确信我会使用 if 语句，但我似乎无法让它跳闸，有什么帮助吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-12T01:15:43.647

```
<?php
header("HTTP/1.1 418 I'm a teapot");
?>
<html>
<h1>418 I'm a teapot</h1><br>
<p>The HTCPCP Server is a teapot. The responding entity MAY be short and stout.</p>
</html> 
```

将导致：

# 418我是个茶壶

HTCPCP 服务器是一个茶壶。响应实体可能矮而粗壮。

# c++ - 将 std::string 转换为 c 字符串数组

> ID：14823840
> 
> 赞同：1
> 
> 时间：2013-02-12T01:04:18.220
> 
> 标签：c++

我正在尝试找到一种将字符串转换为 c 字符串数组的方法。因此，例如我的字符串是：

```
std::string s = "This is a string." 
```

然后我希望输出是这样的：

```
array[0] = This
array[1] = is
array[2] = a
array[3] = string.
array[4] = NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T01:21:41.823

您正在尝试将字符串拆分为字符串。尝试：

```
 #include <sstream>
 #include <vector>
 #include <iostream>
 #include <string>

 std::string s = "This is a string.";

  std::vector<std::string> array;
  std::stringstream ss(s);
  std::string tmp;
  while(std::getline(ss, tmp, ' '))
  {
    array.push_back(tmp);
  }

  for(auto it = array.begin(); it != array.end(); ++it)
  {
    std::cout << (*it) << std:: endl;
  } 
```

或查看此[拆分](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:19:55.257

使用 Boost 库函数 'split' 将字符串拆分为基于分隔符的多个字符串，如下所示：

```
#include <boost/algorithm/string.hpp>
std::vector<std::string> strs;
boost::split(strs, "string to split", boost::is_any_of(" ")); 
```

然后遍历`strs`向量。

这种方法允许您指定任意数量的分隔符。

请参阅此处了解更多信息：http: [//www.boost.org/doc/libs/1_48_0/doc/html/string_algo/usage.html#id3115768](http://www.boost.org/doc/libs/1_48_0/doc/html/string_algo/usage.html#id3115768)

这里有很多方法：[Split a string in C++?](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-12T01:19:47.757

以你为例。

该数组不是字符数组，而是字符串数组。

好吧，实际上，字符串是一个字符数组。

```
//Let's say:
string s = "This is a string.";
//Therefore:
s[0] = T
s[1] = h
s[2] = i
s[3] = s 
```

但根据你的例子，

我想你想拆分文本。（用空格作为分隔符）。

您可以使用字符串的拆分功能。

```
string s = "This is a string.";
string[] words = s.Split(' ');
//Therefore:
words[0] = This
words[1] = is
words[2] = a
words[3] = string. 
```

# ruby-on-rails - Redis：查找范围和无序集的交集

> ID：14823841
> 
> 赞同：4
> 
> 时间：2013-02-12T01:04:19.730
> 
> 标签：ruby-on-rails, redis

我有一个有序的集合 - 我已经通过 gem 'redis' 评分并添加到我的 redis 数据库中的项目，如下所示：

```
Item.each { |item|
  $redis.zadd("scores", item.score, item.id)
} 
```

以及一组带有基于标签 ID 的键的项目。

```
Tag.each { |tag|
  tag.items.each { |item|
     $redis.sadd("tag_#{tag.id}", item.id)
  }
} 
```

我正在尝试获取得分为**x 或更高**的所有项目，并将其与具有特定标签的所有项目相交。我不需要对结果进行排序。我不确定我是否需要首先使用有序集，但这似乎是一种存储和检索结果的有效方法。

使用 Redis 找到范围和集合的交集的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:22:28.043

关键是排序集命令也接受普通集作为参数。所以你可以先与集合相交，然后使用普通范围命令根据分数进行过滤。

**例子：**

```
# Populate some sorted set and set
./redis-cli zadd scores 1 a 2 b 3 c 4 d 5 e 6 f 7 g 8 h
(integer) 8
./redis-cli sadd tag_1 a c d g h
(integer) 5

# Here you need to use a weight clause to avoid altering the score
./redis-cli zinterstore res 2 scores tag_1 weights 1 0
(integer) 5

# Now fetch the expected items (here we want items with score >= 4)
./redis-cli zrangebyscore res 4 +inf withscores
1) "d"
2) "4"
3) "g"
4) "7"
5) "h"
6) "8"

# Finally drop the temporary result
./redis-cli del res
(integer) 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:06:09.740

我不知道先获得一个范围，然后再相交的方法。但是，您可以做的是对集合进行交集，然后进行范围：

```
ZINTERSTORE items_with_tag_foo 2 items tag_foo AGGREGATE MAX
ZRANGEBYSCORE items_with_tag_foo 17 +inf 
```

# linq - 使用 LINQ 根据连接列表中的值从列表中选择值

> ID：14823844
> 
> 赞同：0
> 
> 时间：2013-02-12T01:04:35.793
> 
> 标签：linq, join

我有一个涉及一组单元的模型。每个单元都有一组数字。我正在编写一个提供程序方法，它返回包含任何给定数字的单位列表。

查询中涉及到两个表——`Units`表和`NumberUnits`表。该`NumberUnits`表将 链接`Units`到`Numbers`（但由于我们已经知道所需的数字，我们对它们不感兴趣）。

我目前有这个：

```
var a =  (from units in DataProvider.Units
    join numUnits in DataProvider.NumberUnits on units.Id equals numUnits.Unit
    where numbers.Contains(numUnits.Number)
    select units); 
```

`numbers`我们正在搜索的数字列表在哪里。我想返回在数字列表中找到的任何`Unit`内容`NumberUnit`，但这没有返回任何内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:49:57.547

看来我只是个白痴。这工作得很好，结果我有一些数据问题，其中很大一部分应该在 numberunits 表中包含条目的单位没有。

# asp.net-mvc - 避免 TempData MVC

> ID：14823855
> 
> 赞同：2
> 
> 时间：2013-02-12T01:05:44.193
> 
> 标签：asp.net-mvc

我已经阅读了关于 SO 的大部分问答，他们似乎都使用 TempData 作为重定向到带有“表单已保存/感谢您做任何事情”等消息的操作的问题的答案。

我知道您可以使用 cookie 和会话来执行此操作。问题是我想避免会话，因此它下面的 TempData 只使用会话。

所以，问题 - 您如何避免重复插入并将各种消息发送到其他操作而不依赖 Session/Cookies/Querystrings 并添加到混合隐藏字段中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:38:36.090

1）避免重复的唯一方法是在插入之前先实际查询数据库。

2）为了避免会话等，我能想到的唯一其他方法是将数据保存到数据库并连接一些用户ID。

3）我会推荐一个带有ajax回发的javascript（mvvm框架是一个不错的选择）解决方案。这不仅可以阻止用户进行整页回发，还可以让您感觉它同时是一个快速且响应迅速的应用程序。您可以以更直接的方式向用户发送消息，并指出错误所在等等。

# jquery - 如何为所有表单设置一个 invalidHandler？

> ID：14823860
> 
> 赞同：3
> 
> 时间：2013-02-12T01:06:52.783
> 
> 标签：jquery, jquery-validate

我有几个共享相同的无效处理程序的表单，有没有办法将其设置为网站所有表单的标准 invalidHandler ？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T01:58:03.313

像这样的东西？

```
$(document).ready(function() {

    jQuery.validator.setDefaults({ 
        invalidHandler: function(form, validator) {
           // your custom function
        },
        // any other options to set as default
    });

}); 
```

[http://docs.jquery.com/Plugins/Validation/Validator/setDefaults#defaults](http://docs.jquery.com/Plugins/Validation/Validator/setDefaults#defaults)

# c - 如何使用 XADD 增加内存中的值？

> ID：14823861
> 
> 赞同：1
> 
> 时间：2013-02-12T01:06:53.203
> 
> 标签：c, assembly, x86, mutex, atomic

我正在尝试编写一个简单的接口来原子地增加一些值。我尝试执行以下操作（在 C 中）

```
void foo()
{
    int counter = 0;
    assembly_xadd(&counter);
    printf("counter is %d\n");
} 
```

> > 计数器为 0

这是我的汇编代码，我不确定我是否正确使用 xadd：

```
.global assembly_xadd

assembly_xadd:

    PUSHL %ebp
    MOVL %esp,%ebp
    PUSHL %edi  

    MOVL $0x1,%eax                                                    
    MOVL 0x8(%ebp),%edi                                               
    XADDL  %edi,%eax                             

    MOVL %edi,%eax    

    POPL %edi
    MOVL %ebp,%esp
    POPL %ebp
    RET 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:32:34.647

你想要的是`XADDL %eax, (%edi)`. 请记住，使用气体语法，目标始终是第二个值，并且您要更改地址处的内存`%edi`。相反，您将地址加一`%edi`并将其存储在 %eax 中。一般来说，`xadd`有两个寄存器是没有用的（原子内存访问明智的），因为寄存器操作总是原子的。

您正在做的`MOVL 0x8(%ebp),%edi`是将 32 位整数的地址移动到`%edi`. 另外，如果你想返回原始值，这是我假设`MOVL %edi,%eax`的，你不应该这样做`MOVL %edi,%eax`。`%eax`已经包含 的先前值`(%edi)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:38:05.180

看看Linux内核中的原子变量实现，在[`include/arch/x86/include/asm/atomic.h`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/x86/include/asm/atomic.h;h=722aa3b0462448fc5442cd4c72a485fc23cbf5f8;hb=HEAD)（链接是3.8-rc7中的版本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:32:58.267

xadd[在这里](https://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/x86/include/asm/cmpxchg.h;h=8d871eaddb6677d7fccad7972593b7f36b81617c;hb=HEAD)用内联汇编器实现。

除非您的整个程序是汇编程序，否则您可能需要内联，因为即使调用单独函数的代码空间开销也大于 xadd 占用的空间。如果您在汇编中编写整个程序（因为受虐狂？不合理的空间限制？）您可能只想直接使用 xadd 。当然，在某些情况下，汇编函数是一个合理的想法，例如，如果您想将其链接到 Perl 或 Python 代码中（但如果您不是非常非常小心，这本身可能会产生危险的后果)，或者如果您需要在某处传递函数指针。但即便如此，我还是会实现内联汇编器，然后在 C 中创建函数部分。

# jquery - jQuery Fancybox 灯箱插件未在灯箱中打开

> ID：14823862
> 
> 赞同：0
> 
> 时间：2013-02-12T01:06:56.077
> 
> 标签：jquery, fancybox, lightbox

我已经尝试将 jQuery 灯箱插件[Fancybox](http://fancyapps.com/fancybox/)安装到我的网站：http: [//s361608839.websitehome.co.uk/101d/html_new/index.html](http://s361608839.websitehome.co.uk/101d/html_new/index.html)

当您单击顶部导航中的比较音乐选项时，它意味着在灯箱中打开 - 但我只是让新窗口打开 HTML。

```
<a class="fancybox" rel="group" href="compare-music.html"><b>Compare Music Options</b></a> 
```

我真的不知道 jQuery，所以我无法观察到任何 JS 错误，所以我想知道这里是否有任何大师知道我需要做什么来确保它在灯箱插件中打开？

非常感谢，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:18:00.950

改变这个：

```
 $(".fancybox").fancybox(); 
```

对此：

```
 $(".fancybox").fancybox({
     type: 'iframe'
    }); 
```

第 335 行（源代码）

如果你想在 iframe 中打开它，

# php - 如何在插件开发过程中获取站点名称？

> ID：14823863
> 
> 赞同：1
> 
> 时间：2013-02-12T01:07:34.477
> 
> 标签：php, wordpress

我正在开发我的第一个 wordpress 插件，我需要获取站点名称。

[文档](http://codex.wordpress.org/Function_Reference/get_current_site)说要使用功能`get_current_site_name( $current_site )`。

这是我的脚本

**我的插件.php：**

```
$site_data = get_current_site_name( $current_site ); 
```

但尚未定义 get_current_site_name() 函数。

`$current_site`如文档中所写，也没有全局变量。

我还尝试添加一个 wp_loaded 操作，让 wordpress 完全加载，但这没有帮助。

```
function myfunction() {
     global $current_site;
     $site_data = get_current_site_name( $current_site );
}
add_action('wp_loaded', 'myfunction');

//Fatal error:  Call to undefined function get_current_site_name() in ... 
```

我做错了什么？

谢谢

**更新：**

这个网站有一个错误，当我尝试在我的问题顶部写**hello**时，它会自动删除它。所以我在这里写 - 大家好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T01:13:55.820

该功能仅在[网络模式下](http://codex.wordpress.org/Create_A_Network)可用。它将返回站点的名称（您在创建站点时使用的名称），**而不是您在 options 中设置的标题**。

您可能想使用[`get_bloginfo('name')`](http://codex.wordpress.org/.Function_Reference/get_bloginfo). 这个返回站点标题。是的，我知道，不一致的命名，全局变量......它是 WP :)

# sql - 为什么加入集合中的别名限制

> ID：14823869
> 
> 赞同：0
> 
> 时间：2013-02-12T01:09:04.373
> 
> 标签：sql

据我所知，至少在 SQL Server 中，我们不能使用来自用于连接该表的集合中的表的别名。

在一个例子中：

```
CREATE TABLE A (A1 int, A2 int)
CREATE TABLE B (B1 int, B2 int)
SELECT a.A2
FROM
  A as a
INNER JOIN
  (SELECT * FROM B as b WHERE b.B1=a.A1) b2 ON b2.B2=a.A2 
```

该查询将导致**错误**，因为在集合中使用了别名*a*，该集合将连接到别名引用的表 ( *A* )。

在 SQL Server 中，这可以使用*CROSS APPLY*来解决，或者可以通过重写查询来解决。（这**不是**我的问题）。

我的问题是：**为什么存在这个限制？**，为什么不让使用别名作为 SQL Server *CROSS APPLY*呢？

我的第一个猜测是：并行性。如果我们可以限制这一点，则似乎连接的每个集合总是可以并行计算然后连接。但这只是一个猜测。它可以更灵活，让我使用连接集之间的别名和计算依赖关系，就像我猜想的那样*CROSS APPLY*。

也许没有原因:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T01:26:07.017

由于标准 SQL 的范围规则，存在限制。子句中的一个表`from`只是不知道另一个表*中发生了什么。*请记住，SQL 是一种*描述性*语言而不是*过程性*语言。子句中表的顺序`from`与处理它们的实际顺序完全没有必然关系。

此限制不适用于`SELECT`、`WHERE`和`HAVING`子句，因为`FROM`首先评估子句。

至于`cross apply`与a相同或不同`join`。编写连接的方法有很多种，显式`join`语法只是其中一种。相关子查询、`select`s 中的嵌套查询、`exists`带有子查询和`in`带有子查询的查询都在执行一些关系连接操作的变体。它们的表达方式不同。

with 子查询的使用`cross apply`通常也是连接的类型。在某些情况下，可能存在非常复杂的查询以及嵌套使用 windows 函数的情况，在这种情况下，可能无法将查询重写为显式连接。不过，在大多数情况下，我都能做到。

# android - Android 3-level-ExpandableListView 仅在第三级不显示行

> ID：14823872
> 
> 赞同：5
> 
> 时间：2013-02-12T01:09:23.250
> 
> 标签：android, expandablelistview

我需要为 android 实现一个 3-level-ExpandableListView。我已经将 ExpListView 作为另一个 ExpListView 的子项完成了。两个可展开的列表已经显示并且还可以展开。但是只能看到第2级，如果我点击第2级分组行，箭头变为展开状态，但是第3级的行是看不到的。认为外部 ExpListView 需要刷新以获得第三级行的空间，并且可能还需要重新计算行数。

在 stackoveflow 上的类似问题上，最多只有一个示例的链接，我不理解/无法适应我的实现的解决方案。

链接是这样的：http: [//mylifewithandroid.blogspot.de/2011/02/3-level-expandable-lists.html](http://mylifewithandroid.blogspot.de/2011/02/3-level-expandable-lists.html)

有没有更简单的解决方案，或者任何人都可以用简单的方式解释它。上面链接中的代码对我没有帮助。

解释我到目前为止所做的事情：我在 ExpandableListView 和 getGroupView() 上设置了 BaseExpandableListAdapter 我正在使用 layoutInflater 并编写了一个 ViewHolder ，它为每一行保存一个 TextView （作为第一级文本）。在 getChildView() 中，我在第二个 ViewHolder 中使用了另一个 ExpandableListView。在那个 ExpListView 上，我还设置了一个 BaseExpandableListAdapter 并为此适配器实现了 getGroupView() 和 getChildView()。使用 TextView 完成此操作，如为组（作为 2 级文本）和此处的子级（作为 3 级文本）描述的。

如果需要，我明天可以发布一些代码，需要先在这里准备。但是一个好的教程也会帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:20:12.437

尝试在 getChildView() 中使用自定义 expandableListView

```
class YourCustomExpandableListView extends ExpandableListView { 
    public YourCustomExpandableListView (Context context) {
       super(context);     
    }

    protected void onMeasure(int width, int height) {
        /*
         * Adjust height
         */
        height = MeasureSpec.makeMeasureSpec(500, MeasureSpec.AT_MOST);
        super.onMeasure(width, height);
    }  
} 
```

看看[这里](http://developer.android.com/reference/android/view/View.MeasureSpec.html)

也可以在[这里找到完整的解决方案](http://harrane.blogspot.co.uk/2013/04/three-level-expandablelistview.html)

# java - 大数的Java递归斐波那契实现

> ID：14823876
> 
> 赞同：-1
> 
> 时间：2013-02-12T01:09:36.490
> 
> 标签：java, algorithm, recursion, fibonacci

今晚我一直在玩一些代码，我编写了一个非常简单的算法，我认为它对于斐波那契递归和大数字来说是一个非常好的解决方案。我想知道你们对此有何看法，如果您对改进它有任何贡献，请与我们分享……看看下面的代码

```
public class RecursiveFibonacci {

    public void calculateFib(long first, long next, long counter, int n) {
        if(counter == n) {
            return;
        }
        counter++;
        if(first == 0 && next == 0) {
            System.out.println("0");
            calculateFib(0, 1, counter, n);
            return;
        }

        if(first == 0 && next == 1) {
            System.out.println("1");
            calculateFib(1, 0, counter, n);
            return;
        }

        if(first == 1 && next == 0) {
            System.out.println("1");
            calculateFib(1, 1, counter, n);
            return;
        }

        long result = first + next;
        if(result > 1) {
            System.out.println(result);
                calculateFib(next, result, counter, n);
        }
    }

    public RecursiveFibonacci() {
        calculateFib(0, 0, 0, 9999999);
    }

    public static void main(String[] args) {
        new RecursiveFibonacci(); 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:24:12.133

斐波那契数列仅取决于前两个值，您的基本情况是`F(0) = 1`and `F(1) = 1`，并且对于一般情况`F(n) = F(n - 1) + F(n - 2)`。您需要做的就是在计算时记住这些。递归是解决斐波那契数的一种糟糕方法，因为值越高，不必要的调用就越多。你很快就会用完堆栈空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:44:26.983

我认为递归斐波那契也具有非常高的计算复杂度，可能是 O(n!)，而迭代只是 O(n) :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T02:25:04.867

计算第 i 个斐波那契的最佳方法不是递归。您可以使用以下公式：

![在此处输入图像描述](../Images/572df7fbc3a2742b5ec74c7ba2478960.png)

![在此处输入图像描述](../Images/adc9aa972072a12412d5081230d5b1d6.png)

![在此处输入图像描述](../Images/37e30a881c59458a718de8afd23a29d9.png)

phi是黄金比例。然而，斐波那契数的问题与使用方法无关，而与数字的位数有关。它们将变得难以为大数编写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T01:30:15.770

一个问题是，它`calculateFib()`不返回任何计算结果。它只打印结果。因此，更改代码以使其返回结果。

一旦可行，也可以尝试非递归变体，这在实践中更适合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T01:32:23.447

因为 F [9999999]有 ~2089876 位，所以您需要使用[近似值](http://en.wikipedia.org/wiki/Fibonacci_number)。还要考虑[memoization](https://stackoverflow.com/q/1799990/230513)。

# git - Bitbucket：Cygwin 上的 Git - 无法推送到远程存储库

> ID：14823884
> 
> 赞同：4
> 
> 时间：2013-02-12T01:10:43.603
> 
> 标签：git, cygwin, bitbucket, git-push

**Updatedx3（见下文）** 所以我成功地使用了我的 Git Bitbucket 存储库几个月，直到 2012 年 11 月 29 日。直到前几天（2013 年 1 月 24 日），我才尝试再次提交，但无济于事。我在 Cygwin 中重新安装了我的 ssh 服务器，所以我保证我有一个正确的连接。我可以从另一个工作站访问我的服务器，所以我确信这没问题。我还能够使用 ssh 隧道从 Bitbucket 克隆我的存储库而没有问题。但是，当我尝试推送我的更改时（在添加、提交等之后），我得到以下信息：

```
$ git push origin master    
Enter passphrase for key '/home/[User]/.ssh/id_rsa':    
conq: invalid command syntax.    
fatal: The remote end hung up unexpectedly 
```

我搜索了论坛，常见问题解答等无济于事。这是我的 ssh 的输出：

```
$ ssh -T git@bitbucket.org
Enter passphrase for key '/home/[User]/.ssh/id_rsa':
conq: logged in as [username]. 
```

您可以使用 git 或 hg 连接到 Bitbucket。外壳访问被禁用。

而且，对于 ssh -v：

```
$ ssh -v
OpenSSH_5.8p1, OpenSSL 0.9.8r 8 Feb 2011
usage: ssh [-1246AaCfgKkMNnqsTtVvXxYy] [-b bind_address] [-c cipher_spec]
[-D [bind_address:]port] [-e escape_char] [-F configfile]
[-I pkcs11] [-i identity_file]
[-L [bind_address:]port:host:hostport]
[-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]
[-R [bind_address:]port:host:hostport] [-S ctl_path]
[-W host:port] [-w local_tun[:remote_tun]]
[user@]hostname [command] 
```

和 git --version:

```
$ git --version
git version 1.7.5.1 
```

正如我所说，ssh 似乎正在工作，这看起来是别的东西。

--Update-- 这是 ssh -v -T git@bitbucket.org 的输出

```
$ ssh -v -T git@bitbucket.org
OpenSSH_5.8p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: Connecting to bitbucket.org [207.223.240.181] port 22.
debug1: Connection established.
debug1: identity file /home/[User]/.ssh/id_rsa type 1
debug1: identity file /home/[User]/.ssh/id_rsa-cert type -1
debug1: identity file /home/[User]/.ssh/id_dsa type -1
debug1: identity file /home/[User]/.ssh/id_dsa-cert type -1
debug1: identity file /home/[User]/.ssh/id_ecdsa type -1
debug1: identity file /home/[User]/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.8
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 97:8c:1b:f2:6f:14:6b:5c:3b:ec:aa:46:46:74:7c:40
debug1: Host 'bitbucket.org' is known and matches the RSA host key.
debug1: Found key in /home/[User]/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/[User]/.ssh/id_rsa
debug1: Remote: Forced command: conq username:[username]
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: key_parse_private_pem: PEM_read_PrivateKey failed
debug1: read PEM private key done: type <unknown>
Enter passphrase for key '/home/[User]/.ssh/id_rsa':
debug1: read PEM private key done: type RSA
debug1: Remote: Forced command: conq username:[username]
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Authentication succeeded (publickey).
Authenticated to bitbucket.org ([207.223.240.181]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
conq: logged in as [username].

You can use git or hg to connect to Bitbucket. Shell access is disabled.
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2576, received 2984 bytes, in 0.3 seconds
Bytes per second: sent 7759.0, received 8988.0
debug1: Exit status 0 
```

**更新（2013 年 2 月 17 日）：**我搜索了 Bitbucket 网站上的支持页面，但他们只详细说明了如何在 Windows 上使用 GitBash 而不是 Cygwin 设置 Bitbucket。我看到其他人在他们的常见问题解答中遇到了同样的问题，但被提到了 Atlassian 支持。

我开始直接与 Atlassian 支持人员交谈，那个人告诉我查看 Stack Overflow 上的帖子（[Git with SSH on Windows](https://stackoverflow.com/questions/2499331/git-with-ssh-on-windows)）。发布的解决方案不起作用，因此支持代表指示我安装 GitBash 以查看除了 Cygwin 之外是否还有其他问题。我安装了 GitBash 并且能够让它工作，并且可以使用 ssh 或 https 再次推送和克隆。我告诉了代表，他说这是他可以提供的帮助，因为我的问题是我自己的软件。所以我相信我已经将问题缩小到 Cygwin 中的一些机制，这些机制似乎与 SSH 无关，但可能与 git 有关。

**更新（2013 年 2 月 18 日）：** 今天，我确认我也能够从 Cygwin 中提取。所以现在，我只是有推送的问题。我正在考虑将别名映射到 Cygwin 内部的 mysysgit，就像在[Errors cloning git project using Cygwin, msysgit Bash shell works](https://stackoverflow.com/questions/4896814/errors-cloning-git-project-using-cygwin-msysgit-bash-shell-works?rq=1)中一样，但这可能需要比我现在必须尝试的更多时间。仍在寻找使 Git 在 Cygwin 中本地工作的解决方案。

**更新（2013 年 2 月 20 日）：** 我现在在使用 GitBash 推送时遇到了完全相同的错误。在支持页面查看这个垃圾：[https ://bitbucket.org/site/master/issue/4406/invalid-command-synthax](https://bitbucket.org/site/master/issue/4406/invalid-command-synthax)

这似乎是一个反复出现的问题，他们的支持不会直接解决。从表面上看，这自 2012 年 6 月以来一直在进行，没有公布任何决议。如果有人读到这篇文章并能给我一些指导，我将不胜感激。目前，我已经使用 HTTPS 切换到 GitBash。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-13T20:35:27.100

请检查`{project_folder}/.git/config`文件。如果有远程存储库 URL `ssh://`。删除它并尝试推送操作。

```
git push -u origin --all 
```

有效的远程存储库 url

```
url = git@bitbucket.org:{username}/{project-name}.git 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:20:09.390

[https://bitbucket.org/site/master/issue/4218/conq-invalid-repository-syntax](https://bitbucket.org/site/master/issue/4218/conq-invalid-repository-syntax)

[“对于 SSH 问题，请先在https://confluence.atlassian.com/display/BITBUCKET/Troubleshooting+SSH+Issues](https://confluence.atlassian.com/display/BITBUCKET/Troubleshooting+SSH+Issues)尝试我们的故障排除指南。如果您仍然遇到问题，请向 support@bitbucket.org 或[http ://answers.atlassian.com](http://answers.atlassian.com)支持或社区可以帮助解决您的配置问题。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T18:52:35.773

此问题已修复。这是由于某些客户端具有唯一设置的接收包配置。虽然我不知道是什么客户决定设置这个，但许多用户都受到了影响，因为 Bitbucket 的系统并非旨在通过 SSH 处理非连字符的 git 命令语法。Bitbucket 现在已更改此设置以允许 git-receive-pack 和 git receive-pack 工作。

作为参考，请检查您的全局配置，您可能会看到如下内容：

```
remote.origin.receivepack git receive-pack 
```

默认情况下，它未设置，但默认为`git-receive-pack`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T10:55:33.990

我按照这篇博文中的说明进行操作：

[http://blog.cyplo.net/2012/10/25/using-git-in-cygwin-with-bitbucketgithubother-key-reliant-service/](http://blog.cyplo.net/2012/10/25/using-git-in-cygwin-with-bitbucketgithubother-key-reliant-service/)

在我将 .ssh 文件夹的组从 None 更改为 Users 后，它起作用了

chown abudaan：用户 .ssh -R

# php - 从站点“a”登录到 Outlook 发布表单

> ID：14823885
> 
> 赞同：0
> 
> 时间：2013-02-12T01:10:44.153
> 
> 标签：php, html, concrete5

[http://tildencoil.artesiandesign.net/](http://tildencoil.artesiandesign.net/)

这是我遇到问题的网站。我正在尝试从右上角的登录悬停菜单发布到直接单击登录链接的 Outlook 表单。如有必要，我可以提供代码，除非有社区知道的简单方法。如果您需要更多信息，请询问。谢谢你的帮助！我很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:20:23.390

似乎没有 CSRF 令牌（典型的 MS ;p），您可以将值直接发布到 owaauth.dll（未经测试，因为没有登录）。

```
<form action="https://smtp2.tilden-coil.com/owa/auth/owaauth.dll" method="POST">

<input type="hidden" name="destination" value="https://smtp2.tilden-coil.com/owa//">
<input type="hidden" name="flags" value="0">
<input type="hidden" name="forcedownlevel" value="0">

<label for="username">User name:</label>
<input id="username" name="username" type="text"/>
<label for="password">Password:</label>
<input id="password" name="password" type="password">

<input type="submit" value="Submit">
</form> 
```

# parsing - 用 FParsec 解析器组合器表示 epsilon 产生式

> ID：14823887
> 
> 赞同：4
> 
> 时间：2013-02-12T01:10:59.270
> 
> 标签：parsing, f#, fparsec

在 BNF 中表达语法产生式通常很方便，例如

```
A ::= "car"
   |  "bike"
   |  ε 
```

其中 ε 表示一个空的产生式规则；即，非终结符“A”可以扩展为终结符“car”、“bike”或什么都没有。但是，除非我重构我的语法，否则我不清楚如何在 FParsec 中表示这样的语法。我知道“选择”组合器，`<|>`但据我所知，没有“空”组合器。即，返回 true 且不消耗任何输入的组合器。

我已经搜索了 FParsec 文档的高低，但我没有找到任何这样做的东西，这让我感到惊讶，因为这似乎是一个常见的场景。我对 FParsec （以及一般的组合器）相当陌生，所以也许我只是没有使用正确的词。有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T03:18:21.997

我认为杰克的解决方案应该为您解决问题。但是，如果您正在寻找一个表示解析器成功且不消耗任何输入的原语，那么您可能需要`preturn`from `FParsec.Primitives`（参见[`preturn`文档](http://www.quanttec.com/fparsec/reference/primitives.html#members.preturn)）。

如果您正在组合构建某些 AST 值而不是字符串的解析器，这可能会很有用。例如，如果您有一个受歧视的工会：

```
type Vehicle = Car | Bike | Other 
```

您可以使用`pstring "car" >>% Car`and`pstring "bike" >>% Bike`构建返回`Vehicle`值的解析器。然后你可以使用它们组合并使用`<|>`添加一个特殊的（空）案例`preturn`：

```
let parseA = 
  pstring "car" >>% Car <|> 
  pstring "bike" >>% Bike <|>
  preturn Other 
```

该`preturn`操作可能不经常直接使用，但它是基本原语之一（因为它定义了解析器的一元*单元*或*返回*操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:18:11.360

我对 FParsec 不太熟悉——我通常使用 fsyacc——但是如果您使用带有选择组合器的空字符串会发生什么？例如，类似：

```
let parseA = pstring "car" <|> pstring "bike" <|> pstring "" 
```

# css - 如何知道何时应该在块级元素上使用边距或填充？

> ID：14823890
> 
> 赞同：1
> 
> 时间：2013-02-12T01:11:24.047
> 
> 标签：css, block, margin, padding

有人可以给我一些关于何时`padding`或`margin`应该在块级元素上使用的例子吗？

我知道有时添加底部边距会被它下面的元素忽略。例如，如果一个`p`元素的下边距为 ，`20px`而我`p`在它下面的另一个元素的上边距为`20px`，则它不会比没有上边距的情况下移得更远。为什么是这样？我应该主要使用`padding`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:16:23.013

这种边际效应被称为[“边际崩溃”](http://reference.sitepoint.com/css/collapsingmargins)

正式规则在[这里](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)。

简而言之：当您在某些元素上定义边距时，您声明了相邻元素边框之间的最小距离。相邻元素的两个边距的最大值​​用于定位这样的两个布局兄弟。

# python-3.x - 牛顿插值多项式 [python]

> ID：14823891
> 
> 赞同：2
> 
> 时间：2013-02-12T01:11:25.407
> 
> 标签：python-3.x

我正在尝试使用牛顿插值多项式来计算以下数组的有限除法，以确定 x=8 处的 y。数组是

```
x = 0  1  2  5.5  11  13  16  18

y=  0.5  3.134  5.9  9.9  10.2  9.35  7.2  6.2 
```

我拥有的伪代码位于[http://imgur.com/gallery/Lm2KXxA/new](http://imgur.com/gallery/Lm2KXxA/new)。是否有任何可用的伪代码、算法或库可以用来告诉我答案？

我也相信这是如何在 matlab [http://imgur.com/gallery/L9wJaEH/new](http://imgur.com/gallery/L9wJaEH/new)中执行程序。我只是不知道如何在python中做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-03-29T04:19:30.477

尝试这个

```
def _poly_newton_coefficient(x, y):
    """
    x: list or np array contanining x data points
    y: list or np array contanining y data points
    """

    m = len(x)

    x = np.copy(x)
    a = np.copy(y)
    for k in range(1, m):
        a[k:m] = (a[k:m] - a[k - 1])/(x[k:m] - x[k - 1])

    return a

def newton_polynomial(x_data, y_data, x):
    """
    x_data: data points at x
    y_data: data points at y
    x: evaluation point(s)
    """
    a = _poly_newton_coefficient(x_data, y_data)
    n = len(x_data) - 1  # Degree of polynomial
    p = a[n]

    for k in range(1, n + 1):
        p = a[n - k] + (x - x_data[n - k])*p

    return p 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-28T14:04:08.093

这是Python代码。该函数`coef`计算有限除差系数，并且该函数`Eval`评估给定节点处的插值。

```
import numpy as np
import matplotlib.pyplot as plt

def coef(x, y):
    '''x : array of data points
       y : array of f(x)  '''
    x.astype(float)
    y.astype(float)
    n = len(x)
    a = []
    for i in range(n):
        a.append(y[i])

    for j in range(1, n):

        for i in range(n-1, j-1, -1):
            a[i] = float(a[i]-a[i-1])/float(x[i]-x[i-j])

    return np.array(a) # return an array of coefficient

def Eval(a, x, r):

     ''' a : array returned by function coef()
        x : array of data points
        r : the node to interpolate at  '''

    x.astype(float)
    n = len( a ) - 1
    temp = a[n] + (r - x[n])
    for i in range( n - 1, -1, -1 ):
        temp = temp * ( r - x[i] ) + a[i]
    return temp # return the y_value interpolation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-09T08:38:33.280

> 如果您不想使用任何函数定义，那么这里是简单的代码：

```
## Newton Divided Difference Polynomial Interpolation Method

import numpy as np

x=np.array([0,1,2,5.5,11,13,16,18],float)
y=np.array([0.5,  3.134,  5.9,  9.9,  10.2,  9.35,  7.2,  6.2],float)
n=len(x)
p=np.zeros([n,n+1])#creating a Tree table (n x n+1 array)
value =float(input("Enter the point at which you want to calculate the value of the polynomial: "))
# first two columns of the table are filled with x and y data points
for i in range(n):

        p[i,0]=x[i]
        p[i,1]=y[i]

## algorithm for tree table from column 2 two n+1        
for i in range(2,n+1): #column
  for j in range(n+1-i):# defines row
    p[j,i]=(p[j+1,i-1]-p[j,i-1])/(x[j+i-1]-x[j])#Tree Table
np.set_printoptions(suppress=True)## this suppress the scientific symbol(e) and returns values in normal digits

# print(p) ## can check the complete Tree table here for NDDP
b=p[0][1:]#This vector contains the unknown coefficients in the polynomial which are the top elements of each column. 
print("b= ",b)
print("x= ",x)
lst=[] # list where we will append the values of prouct terms

t=1
for i in range(len(x)):
    t*=(value-x[i]) ##(x-x0), (x-x0)(x-x1), (x-x0)(x-x1)(x-x2) etc..
    lst.append(t)
print("The list of product elements ",lst,end = ' ')
## creating a general function
f=b[0]
for k in range(1,len(b)):
  f+=b[k]*lst[k-1] ## important**[k-1]** not k because in list we use one step earlier element. For example for b1 we have to use (x-x0), for b2, we use (x-x0)(x-x1) for b3 we use (x-x0)(x-x1)(x2)
print("The value of polynomial: ","%.3f"%f) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-10T21:40:51.170

@Ledruid 提出的解决方案是最优的。它不需要二维数组。划分差异树在某种程度上类似于 2D 数组。一种更原始​​的方法（可以从中获得@Leudruid 的算法）是考虑一个“矩阵 $F_{ij}$ 对应于树的节点。这样算法就可以了。

```
import numpy as np
from numpy import *

def coeficiente(x,y) :
    ''' x: absisas x_i 
        y : ordenadas f(x_i)'''

    x.astype(float)
    y.astype(float)
    n = len(x)
    F = zeros((n,n), dtype=float)
    b = zeros(n) 
    for i in range(0,n):
        F[i,0]=y[i]

    for j in range(1, n):
        for i in range(j,n):
            F[i,j] = float(F[i,j-1]-F[i-1,j-1])/float(x[i]-x[i-j])

    for i in range(0,n):
        b[i] = F[i,i]

    return np.array(b) # return an array of coefficient

def Eval(a, x, r):

    '''  a : retorno de la funcion coeficiente() 
         x : abcisas x_i
         r : abcisa a interpolar
    '''

    x.astype(float)
    n = len( a ) - 1
    temp = a[n]
    for i in range( n - 1, -1, -1 ):
        temp = temp * ( r - x[i] ) + a[i]
    return temp # return the y_value interpolation 
```

# python - 获取webkit webview当前选中文本的方法是什么？

> ID：14823892
> 
> 赞同：1
> 
> 时间：2013-02-12T01:11:36.493
> 
> 标签：python, webkit, gtk3, textselection, getselection

使用 webkit 1.6 版，我一直在尝试找出类方法/函数来获取当前选定的文本。有 has_selection，但它只返回一个布尔值。

我在 linux mint 上使用 python gtk3 和 webkit 1.6。

如果必须，我会使用 javascript，但我更喜欢 webkit 方法。

我真的不需要听众或信号。一个事件已经创建了一个弹出窗口。我想在弹出窗口中打印选定的文本。

我试过了：

webkit.webview.get_selected_text()

webkit.webview.get_selection()

webkit.webview.selected_text()

webkit.webview.get_property("选定文本")

只是在黑暗中拍摄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:54:27.993

看起来 webkit 没有特殊的方法来获取选定的文本。

目前，gtk 剪贴板可以从 webkit.webview 中的选择中获取文本。

利用：

```
c = Gtk.Clipboard.get(Gdk.SELECTION_PRIMARY)
print c.wait_for_text() 
```

这有点时髦，但它确实有效。

# python - Django 不在旧浏览器中存储会话

> ID：14823895
> 
> 赞同：1
> 
> 时间：2013-02-12T01:11:42.473
> 
> 标签：python, django, internet-explorer, web-applications

我的应用程序（Django 1.3）似乎无法在以下浏览器中存储会话数据：

```
<WSGIRequest
GET:<QueryDict: {}>,
POST:<QueryDict: {}>,
COOKIES:{},
META:{'CSRF_COOKIE': 'dsfdfsdfsdf',
 'HTTP_ACCEPT': '*/*',
 'HTTP_ACCEPT_LANGUAGE': 'en-us',
 'HTTP_CACHE_CONTROL': 'max-age=3600',
 'HTTP_CONNECTION': 'close',
 'HTTP_HOST': 'www.dxxx.com',
 'HTTP_USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)',
 'HTTP_VIA': '1.0 wtp-gd-maya2.iad1:3128 (squid/2.6.STABLE21)',
 'HTTP_X_FORWARDED_FOR': '127.0.0.1, xx.xxx.xx.xx',
 'PATH_INFO': u'xxxxx',
 'QUERY_STRING': '',
 'RAW_URI': 'xxxx',
 'REMOTE_ADDR': ' xx.xxx.xx.xx',
 'REMOTE_PORT': '80',
 'REQUEST_METHOD': 'GET',
 'SCRIPT_NAME': u'',
 'SERVER_NAME': 'www.xxxxx.com',
 'SERVER_PORT': '80',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'SERVER_SOFTWARE': 'gunicorn/0.14.2',
 'gunicorn.socket': <socket._socketobject object at 0x2ac0ec0>,
 'wsgi.errors': <gunicorn.glogging.LazyWriter object at 0x2588650>,
 'wsgi.file_wrapper': <class gunicorn.http.wsgi.FileWrapper at 0x2608668>,
 'wsgi.input': <gunicorn.http.body.Body object at 0x2b47d50>,
 'wsgi.multiprocess': True,
 'wsgi.multithread': False,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}> 
```

会话变量名称中有一个下划线“unique_id”，但我在查看此请求并看到它来自使用 IE6 + WinNT 的人时是否正确？

谁能在这里帮助我，让我知道为什么 Django 在这个浏览器中可能会遇到问题？

谢谢

# r - 为R中的类别分配颜色

> ID：14823896
> 
> 赞同：0
> 
> 时间：2013-02-12T01:11:44.263
> 
> 标签：r, colors, points

我正在尝试将两种颜色分配给我的数据中的两个类别。它们是两个不同的物种。我希望一个物种是蓝色的，另一个是红色的。如果我把它留在 col=species，它会使它们变成黑色和红色。我将其更改为 col=c("red","blue",[species]) 它只显示蓝点，甚至不包括其中的其他物种。

> 情节（前胸背板，重量，pch=16，col=c（“红色”，“蓝色”，[物种]））

如果我最终无法弄清楚，我可以让它变成黑色和红色，这对我来说主要是一种烦恼。我必须弄清楚！

谢谢！

# oracle - Oracle：是否可以准确地连接来自两个不同表的空字段？

> ID：14823901
> 
> 赞同：1
> 
> 时间：2013-02-12T01:12:05.343
> 
> 标签：oracle, null, left-join, nvl

我有四个字段——itemnum、storeloc、binnum 和数量。

我正在尝试选择前三个字段匹配的数据，但 binnum 有时为空。当我对数量进行求和时，由于 NULL binnum，计算不正确。数据库有一个索引，其中只能有一个 itemnum、storeloc 和 binnum 组合，其中 binnum 可以为 NULL。我意识到允许密钥具有 NULL 数据是不好的做法，但我无法控制数据的结构。

我尝试了以下 where 子句：

```
where nvl(b.binnum,0) = nvl(mu.binnum,0)

where b.binnum is null and mu.binnum is null 
```

两者都不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T01:51:06.120

`NVL`用于连接可能具有`NULL`值的字段是执行此操作的典型方法。使用这种查询：

```
WHERE b.itemnum = mu.itemnum
  AND b.storeloc = mu.storeloc
  AND NVL(b.binnum, 0) = NVL(mu.binnum, 0) 
```

假设在任一表中实际上都没有`binnum`值为 的行`0`。如果不是这种情况，总和将被取消。您将加入`binnum`具有`0`价值和`binnum`具有`NULL`价值的人。需要根据您的域定义选择一个您知道永远不会存在的默认值进行比较。即如果`binnum`是`NULL`或大于`0`：

```
WHERE b.itemnum = mu.itemnum
  AND b.storeloc = mu.storeloc
  AND NVL(b.binnum, -1) = NVL(mu.binnum, -1) 
```

# ruby-on-rails - Rails：无法运行应用程序，因为“安装 json (1.7.7) 时发生错误”

> ID：14823906
> 
> 赞同：2
> 
> 时间：2013-02-12T01:12:22.623
> 
> 标签：ruby-on-rails, ruby, json, bundler

今天，我运行了一个半年前一直在使用的应用程序，当我运行命令**bundle update**时，出现以下错误：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/adam/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb 
creating Makefile

make
/usr/bin/gcc-4.2 -I. -I/Users/adam/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/x86_64-darwin10.8.0 -I/Users/adam/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/ruby/backward -I/Users/adam/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1 -I. -DJSON_GENERATOR -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long  -fno-common -pipe -O3 -Wall -O0 -ggdb  -o generator.o -c generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1

Gem files will remain installed in /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/json-1.7.7 for inspection.
Results logged to /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/json-1.7.7/ext/json/ext/generator/gem_make.out
An error occured while installing json (1.7.7), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.7'` succeeds before bundling. 
```

这是 Gemfile 的相关部分：

```
gem "eventmachine", "~> 1.0.0"
gem "json", "~> 1.7.7" 
```

我在 Lion OS X 上运行，我发现这可能有助于更新**Command Line Tool**，但我刚刚将其更新到最新版本，但仍然出现此错误。

你能帮我吗，如何摆脱这个错误？

谢谢

**编辑：** `gem install json -v '1.7.7'`返回：

```
Building native extensions.  This could take a while...
ERROR:  Error installing json:
    ERROR: Failed to build gem native extension.

        /Users/adam/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb
creating Makefile

make
/usr/bin/gcc-4.2 -I. -I/Users/adam/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/x86_64-darwin10.8.0 -I/Users/adam/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/ruby/backward -I/Users/adam/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1 -I. -DJSON_GENERATOR -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long  -fno-common -pipe -O3 -Wall -O0 -ggdb  -o generator.o -c generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1

Gem files will remain installed in /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/json-1.7.7 for inspection.
Results logged to /Users/adam/.rvm/gems/ruby-1.9.2-p290/gems/json-1.7.7/ext/json/ext/generator/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T23:33:48.687

对于 Xcode 4.x：

```
sudo ln -s /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2 
```

对于 Xcode 5.x：

```
export CC=gcc 
```

# javascript - 在 d3 中鼠标悬停时更新线序（z 方向）

> ID：14823910
> 
> 赞同：3
> 
> 时间：2013-02-12T01:13:27.643
> 
> 标签：javascript, d3.js

我是使用 d3 和 JavaScript 的新手，希望能得到一些建设性的反馈。我正在模拟一个练习示例来学习 d3，该示例涉及从两个来源（GISS 和 HAD）绘制 1880-2010 年的气候数据（温度异常）。到目前为止，我已经使用这些数据在 d3 中生成了一个多折线图。代码和数据在这里[https://gist.github.com/natemiller/0c3659e0e6a0b77dabb0](https://gist.github.com/natemiller/0c3659e0e6a0b77dabb0)

在此示例中，数据最初绘制为灰色，但每条线在鼠标悬停时都涂上了不同的颜色。

我想添加两个附加功能。

1.  我想在鼠标悬停时重新排列线条，使鼠标悬停的线条位于顶部，本质上是重新排列线条。我已经读到这需要重新绘制 SVG，我已经尝试了沿着这条线的代码

    ```
    source.append("path")
    .attr("class", "line")
    .attr("d", function(d) { return line(d.values); })
    .style("stroke", "lightgrey")
    .on("mouseover", function() {
      if (active) active.classed("highlight", false);
      active = d3.select(this.parentNode.appendChild(this))
          .classed("highlight", true);
    })
          .style("stroke",function(d) {return color(d.name);})
    .on("mouseout", function(d) {
    d3.select('#path-' + d.name)
    .transition()
    .duration(750)
    .style("stroke", "lightgrey")
    })
    .attr("id", function(d, i) { return "path-" + d.name; }); 
    ```

其中 .on("mouseover"... 代码用于突出显示当前的“鼠标悬停”行。在我的示例中似乎不起作用。所有行最初都突出显示，然后随着鼠标悬停/变为灰色/ mouseout. 如果有人可以帮助我确定如何更新我的代码，以便我可以重新排序 mouseover 上的行，那就太好了！

1.  我一直在尝试标记线条，这样当线条或其标签被鼠标悬停在线条上时，标签颜色就会更新。我已经使用 id 进行了一些操作，但到目前为止，我无法同时获得文本和线条来改变颜色。我已经设法 1\. 将鼠标悬停在线条上并更改文本的颜色，2\. 将鼠标悬停在文本上并更改线条的颜色，2\. 将鼠标悬停在线条上并更改线条，但不能同时拥有线条和文本当它们中的任何一个被鼠标悬停时改变颜色。这是一段作为开始的代码（使用 ids），但并不完全有效，因为它只指定了路径，而不是文本和路径。我已经尝试将它们都添加到 d3.select('#path-','#text-'...，以及对此的变体，但它似乎不起作用。

    ```
    source.append("path")
    .attr("class", "line")
    .attr("d", function(d) { return line(d.values); })
    .style("stroke", "lightgrey")
    .on("mouseover", function(d){
    d3.select(this)
    .style("stroke",function(d) {return color(d.name);});
    })
    .on("mouseout", function(d) {
    d3.select('#path-' + d.name)
    .transition()
    .duration(750)
    .style("stroke", "lightgrey")
    })
    .attr("id", function(d, i) { return "path-" + d.name; });

    source.append("text")
    .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 15]}; })
    .attr("transform", function(d) { return "translate(" + x(d.value.date) + "," + y(d.value.temperature) + ")"; })
    .attr("x", 5)
    .attr("dy", ".35em")
    .style("stroke", "lightgrey")
    .on("mouseover", function(d){
    d3.select('#path-' + d.name)
    .style("stroke",function(d) {return color(d.name);});
     })
    .on("mouseout", function(d) {
    d3.select('#path-' + d.name)
    .transition()
    .duration(750)
    .style("stroke", "lightgrey")
    })
    .text(function(d) { return d.name; })
    .attr("font-family","sans-serif")
    .attr("font-size","11px")

    .attr("id", function(d, i) { return "text-" + d.name; }); 
    ```

我非常感谢您的帮助。我是 d3 和这个帮助服务的新手。目前这是一个陡峭的学习曲线，但我希望这个示例和代码相当清晰。如果它不让我知道如何使它变得更好，我可以重新发布问题。

非常感谢，

内特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:20:00.887

Chris Viau 在 d3 Google 小组上为这个问题提供了一个很好的答案。 [https://groups.google.com/forum/?fromgroups=#!topic/d3-js/-Ra66rqHGk4](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/-Ra66rqHGk4)

诀窍是选择路径的 g 父级以与其他路径重新排序：

this.parentNode.parentNode.appendChild(this.parentNode);

这会将当前选择的容器“g”附加到所有其他“g”之上。

我发现这在许多其他情况下也很有用。

谢谢克里斯！

# c# - 如何在 C# 中从 post 方法传递/读取值

> ID：14823911
> 
> 赞同：0
> 
> 时间：2013-02-12T01:13:41.457
> 
> 标签：c#, .net, post

大家好，我是 C# 的新手，我正在尝试将一些隐藏字段发布到表单中，我尝试了所有找到的方法，但我似乎无法将参数发送到 aspx 表单，这些是我尝试过的编码的一部分

```
using (WebClient client = new WebClient())
        {
            NameValueCollection postData = new NameValueCollection() 
   { 
          { "s_transm", "TEST" },
          { "c_referencia", "TEST" }
   };

           var result =client.UploadValues(Parameters,"POST",postData);
        }
        return true; 
```

另一种是通过 HTTPWebRequest

```
 public bool Pay(string Parameters)
    {
        HttpWebRequest httpWReq =
          (HttpWebRequest)WebRequest.Create(Parameters);
         var encoding = new ASCIIEncoding();
           string postData = string.Format("s_transm=TEST");
           byte[] data = encoding.GetBytes(postData);
           httpWReq.Method = "POST";
           httpWReq.ContentType = "application/x-www-form-urlencoded";
           httpWReq.ContentLength = data.Length;
           using (Stream newStream = httpWReq.GetRequestStream())
           {
             newStream.Write(data,0,data.Length);
              }
        var r =httpWReq.GetResponse();
        return true;
    } 
```

唯一可行的方法是直接在表单上点击客户点击帖子，但我想避免这种情况

```
<input id="Submit1" type="submit" value="submit" /> 
```

这些是我一直试图阅读的

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string s1=Request.QueryString["s_transm"];
        string s4 = Request["s_transm"];
        string s2 = Request.Form["s_transm"];
        string Result = new StreamReader(Request.InputStream).ReadToEnd();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T08:37:54.630

```
void PostMe2(Object sender, EventArgs e)
{
    RemotePost myremotepost = new RemotePost();
    myremotepost.Url = "http://www.jigar.net/demo/HttpRequestDemoServer.aspx";
    myremotepost.Add("field1", "Huckleberry");
    myremotepost.Add("field2", "Finn");
    myremotepost.Post();
}

public class RemotePost
{
    private System.Collections.Specialized.NameValueCollection Inputs = new System.Collections.Specialized.NameValueCollection();
    public string Url = "";
    public string Method = "post";
    public string FormName = "form1";

    public void Add(string name, string value)
    {
        Inputs.Add(name, value);
    }

    public void Post()
    {
        System.Web.HttpContext.Current.Response.Clear();

        System.Web.HttpContext.Current.Response.Write("<html><head>");

        System.Web.HttpContext.Current.Response.Write(string.Format("</head><body onload=\"document.{0}.submit()\">", FormName));
        System.Web.HttpContext.Current.Response.Write(string.Format("<form name=\"{0}\" method=\"{1}\" action=\"{2}\" >", FormName, Method, Url));
        for (int i = 0; i < Inputs.Keys.Count; i++)
        {
            System.Web.HttpContext.Current.Response.Write(string.Format("<input name=\"{0}\" type=\"hidden\" value=\"{1}\">", Inputs.Keys[i], Inputs[Inputs.Keys[i]]));
        }
        System.Web.HttpContext.Current.Response.Write("</form>");
        System.Web.HttpContext.Current.Response.Write("</body></html>");

        System.Web.HttpContext.Current.Response.End();
    }
} 
```

# angularjs - 在 Angular 指令的链接功能中使用 ng-click vs bind

> ID：14823917
> 
> 赞同：67
> 
> 时间：2013-02-12T01:14:38.973
> 
> 标签：angularjs, angularjs-directive

在链接功能中，是否有更“角度”的方式将功能绑定到点击事件？

目前，我正在做...

```
myApp.directive('clickme', function() {   
  return function(scope, element, attrs) {
    scope.clickingCallback = function() {alert('clicked!')};
    element.bind('click', scope.clickingCallback);   
} }); 
```

这是 Angular 的做法还是丑陋的 hack？也许我不应该这么担心，但我是这个框架的新手，想知道“正确”的做事方式，尤其是随着框架的发展。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-12T03:27:13.197

You may use a controller in directive:

```
angular.module('app', [])
  .directive('appClick', function(){
     return {
       restrict: 'A',
       scope: true,
       template: '<button ng-click="click()">Click me</button> Clicked {{clicked}} times',
       controller: function($scope, $element){
         $scope.clicked = 0;
         $scope.click = function(){
           $scope.clicked++
         }
       }
     }
   }); 
```

[Demo on plunkr](http://plnkr.co/edit/EAq92a)

More about directives in [Angular guide](http://docs.angularjs.org/guide/directive). And very helpfull for me was videos from official Angular blog post [About those directives](http://blog.angularjs.org/2012/11/about-those-directives.html).

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-12T01:32:29.297

我认为这很好，因为我见过很多人这样做。

但是，如果您只是在指令中定义事件处理程序，则不必在范围内定义它。跟着就好了。

```
myApp.directive('clickme', function() {
  return function(scope, element, attrs) {
    var clickingCallback = function() {
      alert('clicked!')
    };
    element.bind('click', clickingCallback);
  }
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-24T06:16:41.460

不应该只是：

```
<button ng-click="clickingCallback()">Click me<button> 
```

为什么要编写一个新指令只是为了将单击事件映射到范围内的回调？ng-click 已经为您做到了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-02T19:11:00.097

您应该在指令中使用控制器并在模板 html 中使用 ng-click，如先前的响应所建议的那样。但是，如果您需要对事件（单击）进行 DOM 操作，例如单击按钮，想要更改按钮的颜色左右，则使用 Link 函数并使用元素来操作 dom。

如果您只想在 HTML 元素或任何此类非 dom 操作任务上显示一些值，那么您可能不需要指令，并且可以直接使用控制器。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-10-23T15:44:20.847

在这种情况下，不需要指令。这可以完成工作：

```
<button ng-click="count = count + 1" ng-init="count=0">
  Increment
</button>
<span>
  count: {{count}}
</span> 
```

来源：[https ://docs.angularjs.org/api/ng/directive/ngClick](https://docs.angularjs.org/api/ng/directive/ngClick)

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2014-05-13T11:38:43.370

```
myApp.directive("clickme",function(){
    return function(scope,element,attrs){
        element.bind("mousedown",function(){
             <<call the Controller function>>
              scope.loadEditfrm(attrs.edtbtn); 
        });
    };
}); 
```

这将作为属性**clickme上的 onclick 事件**

# ruby-on-rails-3 - 在 RoR 3.2+ 中，如何创建一个允许全局访问其功能的 js 文件？

> ID：14823918
> 
> 赞同：0
> 
> 时间：2013-02-12T01:14:49.850
> 
> 标签：ruby-on-rails-3

我在 application.js 文件中创建了一个 javascript 函数用于测试目的，但是当我在视图文件中内联使用该函数时，我无法访问它。

应用程序/资产/application.js：

```
//= require jquery
//= require jquery_ujs
//= require_tree .

$(document).ready(function() {
  function test() {
    alert('test');
  }
} 
```

视图/布局/application.html.haml

```
:javascript
  test(); // gives me a Uncaught ReferenceError: test is not defined error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:27:53.110

```
$(document).ready(function() {
  test = function() {
    console.log("foo");
  }
});

// wait for document ready
$(document).ready(function() {
  test();
});

$(document).ready(function() {
  window.test();
}); 
```

这也会失败

```
$(document).ready(function() {
  var test = function() {
    console.log("foo");
  }
}); 
```

这也应该提供一些很好的阅读[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)。

# c - 使用共享内存和信号量实现管道

> ID：14823922
> 
> 赞同：0
> 
> 时间：2013-02-12T01:15:22.897
> 
> 标签：c, signals, pipe, shared-memory, semaphore

我正在尝试使用共享内存和信号量来实现管道（可能我还需要信号来完成我的实现）

我遇到了如何正确设置信号量的算法问题。

假设我已经为管道缓冲区分配了一块共享内存，并为管道的信息分配了一块共享内存（例如管道中有多少字节等......）

1.  我想创建互斥（一次只有一个读取器/写入器使用管道）
2.  如果读者想从空管道中阅读，我应该阻止他，直到作家写东西
3.  与“2”相同，但写入完整管道的作家

我试图寻找答案，但我没有找到任何答案，尽管这似乎是一个常见的练习......

我知道一个名为“有界缓冲区问题”或“消费者生产者问题”的解决方案，其实现方式如下：

有 3 个信号量： mutex - 初始化为 1 full - 初始化为 0 empty - 初始化为 n （虽然 n 是管道中的“字节”数）

消费者代码：

```
wait(full)
wait(mutex)

remove a byte from the pipe

signal(mutex)
signal(empty) 
```

生产者代码：

```
wait(empty)
wait(mutex)

add a byte to the pipe

signal(mutex)
signal(full) 
```

该解决方案中的问题（用作我的问题的解决方案）是在给定时间内，只有一个字节从管道中读取或写入。

在我的问题中 - 实现管道，我不确定作者将写入多少字节。如果他想写'n'个字节，那么他只有在管道中有一个位置时才会写它，如果没有，他会写少于'n'个字节......

这意味着写入者在写入之前必须检查管道中有多少可用空间。这是一个问题 - 因为作者将在没有互斥的情况下触及关键部分（管道的信息）。

所以我想把这部分放在关键部分，但是 - 如果一个作家想写并且管道已经满了 - 我怎么能只让一个读者在里面，然后让作家写更多呢？

我已经糊涂了...

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:25:47.097

没有必要拥有这么多互斥锁或在这段时间内锁定它们。在单一生产者/消费者场景中，生产者无需担心可用空间减少（它是唯一可以用完该空间的空间），消费者也同样如此。因此你的伪代码应该是：

**制片人**

```
while (lock_and_get_free_space() < bytes_to_write)
    wait()
unlock()

write(bytes_to_write)

lock_and_update_free_space() 
```

**消费者**

```
while (lock_and_get_data() < bytes_to_read)
    wait()
unlock()

read(bytes_to_read)

lock_and_update_free_space() 
```

# javascript - 谷歌地图：在折线图标上附加事件

> ID：14823927
> 
> 赞同：0
> 
> 时间：2013-02-12T01:15:53.013
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我有一个页面，我试图在地图上模拟船舶位置。其中一些船位于折线上的某个位置，另一些则位于单点标记处。

对于沿着折线的百分比的船只，我能够正确显示图标。我想做的是将事件完全附加在该图标上，而不是整个多段线上。

我的代码位于 [http://www.cleancruising.com.au/map_allShipLoc2.asp](http://www.cleancruising.com.au/map_allShipLoc2.asp)

我还尝试通过使用 google.maps.geometry.spherical.computeDistanceBetween 来计算船舶位置的 LatLng，但由于它使用球面几何，因此这些点在平面地图上无法正确转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:06:26.713

要计算船舶位置的 LatLng，请参阅[Google Maps API v3 group 中的这个线程](https://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/a6fe7d22d50de69f/caa9c1ebc470daff?lnk=gst&q=geodesic+polyline+projection#caa9c1ebc470daff)，以及其中的[示例](http://www.geocodezip.com/v3_polyline_example_geodesic.html)

[下面是从Mike Williams 的 (v2) epoly 库](http://econym.org.uk/gmap/epoly.htm)修改而来的修改后的 GetPointAtDistance 函数

```
// === A method which returns a GLatLng of a point a given distance along the path ===
// === Returns null if the path is shorter than the specified distance ===
google.maps.Polygon.prototype.GetPointAtDistance = function(metres) {
  // some awkward special cases
  if (metres == 0) return this.getPath().getAt(0);
  if (metres < 0) return null;
  if (this.getPath().getLength() < 2) return null;
  var dist=0;
  var olddist=0;
  for (var i=1; (i < this.getPath().getLength() && dist < metres); i++) {
    olddist = dist;
    dist += this.getPath().getAt(i).distanceFrom(this.getPath().getAt(i-1));
  }
  if (dist < metres) {return null;}
  var projection = this.getMap().getProjection(); 
  if (!projection) {
    alert("no projection");
    return; 
  }
  // Project 
  var p1= projection.fromLatLngToPoint(this.getPath().getAt(i-2));
  var p2= projection.fromLatLngToPoint(this.getPath().getAt(i-1));
  var m = (metres-olddist)/(dist-olddist);
  // alert("p1="+p1+" p2="+p2+" m="+m);
  // Unproject 
  return projection.fromPointToLatLng(new google.maps.Point( p1.x + (p2.x-p1.x)*m, p1.y + (p2.y-p1.y)*m));
} 
```

# php - 使用 MySQL 和 PHP 创建过滤函数

> ID：14823928
> 
> 赞同：4
> 
> 时间：2013-02-12T01:16:01.873
> 
> 标签：php, mysql

嘿，这是我的问题，我正在使用 SQL 查询尝试根据帖子的元数据返回结果。该元数据由用户在用户界面内创建帖子期间输入。我遇到了过滤器问题，它一次只能处理一个变量，但仅此而已（例如：如果选择了主题，它可以正常工作，但是如果选择了主题和媒体，它将不返回任何结果）这里是编码：

```
$db_build_post_filter_WHERE = array();
// Default to avoid errors on WHERE GROUP BY
$db_build_post_filter_WHERE [] = 'cmsp_post.post_id > 0';
//$db_build_post_filter_WHERE [] = 'cmsp_post.post_id = cmsp_post_meta.post_id';
if ( isset( $gnocore_cmsp_build_topic_slug_id_array[$filter_topic] ) ) {
    $db_build_post_filter_WHERE [] = 'post_meta_key = "topic_id" AND post_meta_value = ' . $gnocore_cmsp_build_topic_slug_id_array[$filter_topic];
}
if ( isset( $gnocore_cmsp_build_media_slug_id_array[$filter_media] ) ) {
$db_build_post_filter_WHERE [] = 'post_meta_key = "media_id" AND post_meta_value = ' . $gnocore_cmsp_build_media_slug_id_array[$filter_media];
}
if ( isset( $gnocore_cmsp_build_author_slug_id_array[$filter_author] ) ) {
$db_build_post_filter_WHERE [] = 'post_meta_key = "author_id" AND post_meta_value = ' . $gnocore_cmsp_build_author_slug_id_array[$filter_author];
}   

// PROJECT FILTER ARRAY 
$build_post_filter_array = array();
gnoshare_db_select ('cmsp_post LEFT JOIN cmsp_post_meta ON cmsp_post.post_id = cmsp_post_meta.post_id','cmsp_post.post_id',implode(' AND ',$db_build_post_filter_WHERE) . ' GROUP BY cmsp_post.post_id','cmsp_post.project_id, post_name, cmsp_post.post_id','db_build_post_filter_array_num','db_build_post_filter_array_results');
if ( $db_build_post_filter_array_num > 0 ) {
    foreach ($db_build_post_filter_array_results as $db_build_post_filter_array_result) {
        $build_post_filter_array [$db_build_post_filter_array_result->post_id] = '';
    }
} 
```

我相信我的问题出在“项目过滤器阵列”部分，如果有人能提供帮助，将不胜感激。

干杯

**编辑**：将“AND”更改为“OR”会生成仅显示所有帖子的结果，我认为可以公平地说我的问题在于这行代码，但是我仍然找不到生成结果的方法我'米找。

```
gnoshare_db_select ('cmsp_post LEFT JOIN cmsp_post_meta ON cmsp_post.post_id = cmsp_post_meta.post_id','cmsp_post.post_id',implode(' OR ',$db_build_post_filter_WHERE) . ' GROUP BY cmsp_post.post_id','cmsp_post.project_id, post_name, cmsp_post.post_id','db_build_post_filter_array_num','db_build_post_filter_array_results'); 
```

**编辑**：这是我的表（大致）：

```
+----------+---------------+-----------------+  
| post_id  | post_meta_key | post_meta_value |  
+----------+---------------+-----------------+  
|     1    |   topic_id    |        1        |  
+----------+---------------+-----------------+  
|     1    |   media_id    |        1        |  
+----------+---------------+-----------------+  
|     1    |   author_id   |        2        |  
+----------+---------------+-----------------+  
|     2    |   media_id    |        2        |  
+----------+---------------+-----------------+  
|     2    |   topic_id    |        2        |  
+----------+---------------+-----------------+ 
```

*鉴于*此_示例为真，如果过滤器选择了以下任何一项，我希望我的网页生成帖子一：按主题过滤 1 将仅显示帖子一，按主题 1 过滤，媒体 1 将仅显示帖子 1，按主题 1 过滤媒体 2 将显示一条消息，指出与所选标准不匹配，依此类推。这是否更清楚一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:48:40.357

如果我没记错的话，您应该在过滤器之间使用 OR 并用 () 将它们括起来。就像是：

```
 $db_build_post_filter_WHERE [] = '(cmsp_post.post_id > 0)';
 if ( isset( $gnocore_cmsp_build_topic_slug_id_array[$filter_topic] ) ) {
   $db_build_post_filter_WHERE [] = '(post_meta_key = "topic_id" 
                                     AND post_meta_value = ' . 
                $gnocore_cmsp_build_topic_slug_id_array[$filter_topic].')';
 }
 if ( isset( $gnocore_cmsp_build_media_slug_id_array[$filter_media] ) ) {
   $db_build_post_filter_WHERE [] = '(post_meta_key = "media_id" 
                                    AND post_meta_value = ' . 
               $gnocore_cmsp_build_media_slug_id_array[$filter_media].')';
 }
 //Other conditions

// PROJECT FILTER ARRAY 
$build_post_filter_array = array();
gnoare_db_select ('cmsp_post 
                   LEFT JOIN cmsp_post_meta
                          ON cmsp_post.post_id = cmsp_post_meta.post_id',
                 'cmsp_post_post.post_id',
                 implode(' OR ',$db_build_post_filter_WHERE) . 
                ' GROUP BY cmsp_post.post_id','cmsp_post.project_id, post_name, cmsp_post.post_id','db_build_post_filter_array_num','db_build_post_filter_array_results'); 
```

# c++ - 无法从 C++ 中的文本文件中读取

> ID：14823932
> 
> 赞同：0
> 
> 时间：2013-02-12T01:16:30.853
> 
> 标签：c++, qt, fopen, scanf

这是我的代码。我在 QT 的一个函数中使用它，但是程序退出了，我不知道为什么。

```
int xy;
xy = 0;

QVector<double> x(1000), y(1000);
FILE *file;

char line[1024];
file = fopen("ecg.txt", "r");

while (fgets(line,1024,file) != NULL)
{
    fscanf(file,"%d, %d", &y[xy], &x[xy]);
    xy++;
}

QwtPlotCurve *curve = new QwtPlotCurve;
curve->attach(plot_all[0]);
curve->setData(x,y); 
```

`while`我在线路中遇到分段错误

我的文件每行只有两个双打；它们是成对的坐标。

我检查了我的 x 和 y，结果是`[0; 0; 0; 0; ...0; 0; 0]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T01:20:25.967

您必须将指针传递给`fscanf()`：

```
fscanf(file,"%d, %d", &y[xy], &x[xy]); 
```

此外，由于`x`和`y`是 的向量`double`，因此您需要使用`%lf`来读取值。您还应该检查返回值`fscanf()`以确保成功读取了两个值：

```
if (fscanf(file, "%lf, %lf", &x[xy], &y[xy]) != 2)
    ...handle error... 
```

您需要打开编译警告并修复编译器警告的内容 - 或者获得一个更好的编译器来为您提供此类警告（`g++ -Wall`如果您使用 G++，这是一个好的开始）。

Note, too, that this curious code reads a line into `line`, then reads some numbers direct from the file. Did you mean to write:

```
if (sscanf(line, "%lf, %lf", &x[xy], &y[xy]) != 2)
    ...handle error... 
```

What you've got will have `fgets()` read the first line (assuming nothing longer than 1 KiB), then the `fscanf()` will read the first two numbers on a line, and the next iteration of `fgets()` will read the residue of the line, leaving `fscanf()` to find the numbers on the next line. Unusual, but a feasible scheme.

In a comment, you say that the format on each line is `x``tab``y`; if that's the case and there is no comma separating the values, then you need to remove the comma from the format string:

```
if (sscanf(line, "%lf %lf", &x[xy], &y[xy]) != 2)
    ...handle error... 
```

However, if your crash really is happening in the `while` line, then your problem is almost certainly that the file failed to open. Always check the return from `fopen()` (or any other file-opening function). You can fail to open a file for many, many reasons and blundering on assuming that the file opened when it didn't never leads to happiness.

Also, in C++, it is a good idea to initialize variables as you define them:

```
FILE *file = fopen("ecg.txt", "r");

if (file == 0)
    ...handle error...

QVector<double> x(1000), y(1000);
char line[1024];
int xy = 0; 
```

# file - 隐藏批处理文件中的未知文件

> ID：14823933
> 
> 赞同：0
> 
> 时间：2013-02-12T01:16:33.170
> 
> 标签：file, batch-file, directory, hidden-files

嘿伙计们，我需要知道如何隐藏一个我不知道其名称的文件。

例如，我有 6 个文件夹，名为 1-6，但我认为它们的名称为 af。他们的目录是 C:\users\all users\bond。

我该怎么做呢？

我不需要隐藏文件所在的目录我需要能够进入目录并隐藏其中的文件。

这是我唯一能想到的：

```
@echo off
cd C:\users\all users\bond
attrib +h +s %filename% *
echo.
echo files successfully hidden.
pause
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:02:45.957

您可以遍历文件夹。

该`for`命令可以采用文件夹名称或通配符列表。

```
@echo off
cd /d c:\users\all users\bond
for /d %%D in (FOLDER NAMES GO HERE) do (
    pushd %%D
    attrib +h *.*
    popd
    )
exit /b 
```

如果需要处理当前目录下的*所有*文件夹，放在`*`那里：

```
...
for /d %%D in (*) do (
... 
```

您也可以*不*更改到父目录，而是在`for`循环中指定它（注意掩码周围的引号）：

```
@echo off
for /d %%D in ("c:\users\all users\bond\*") do (
... 
```

同样，您可以省略跳入和跳出每个子目录，而是在`attrib`命令中指定路径。

所以，上面的脚本可以改写成这样：

```
@echo off
for /d %%D in ("c:\users\all users\bond\*") do attrib +h "%%D\*"
exit /b 
```

# java - 当我阅读这个文件时，有人可以帮我在我的代码中添加一个行计数器吗

> ID：14823937
> 
> 赞同：0
> 
> 时间：2013-02-12T01:17:14.043
> 
> 标签：java

我不确定如何添加行计数器，因为如果我做一个 while 语句，例如

```
while (fileReader.hasNextLine()) {
    lines+=1;
    file.nextLine();
} 
```

然后我的其余元音、句子等设置为 0。

我的代码是：

```
Scanner input = new Scanner(System. in );
System.out.println("Enter file name: ");

File file = new File(input.nextLine());

if (file.length() == 0) {
    System.out.println("The input file is empty.");
    System.exit(1);
}

Scanner fileReader = new Scanner(file);

while (fileReader.hasNext()) {
    String word = fileReader.next();

    for (int i = 0; i < word.length(); i++) {
        char ch = word.charAt(i);
        if (ch == 'a' || ch == 'e' || ch == 'i' || ch == 'o' || ch == 'u') vowels += 1;
        if ((ch == '!' || ch == '.' || ch == '?')) sentences += 1;
        if (Character.isLetterOrDigit(ch)) alphaNumeric += 1;
        switch (ch) {
            case ',':
                punctuation += 1;
                break;
            case '[':
                punctuation += 1;
                break;
            case ']':
                punctuation += 1;
                break;
            case ':':
                punctuation += 1;
                break;
            case '`':
                punctuation += 1;
                break;
            case '-':
                punctuation += 1;
                break;
            case '!':
                punctuation += 1;
                break;
            case '_':
                punctuation += 1;
                break;
            case '(':
                punctuation += 1;
                break;
            case ')':
                punctuation += 1;
                break;
            case '.':
                punctuation += 1;
                break;
            case '?':
                punctuation += 1;
                break;
            case '"':
                punctuation += 1;
                break;
            case ';':
                punctuation += 1;
                break;

        }
    }
    words += 1;

}
System.out.println("The number of words in the file name: " + words);
System.out.println("The number of lines in the file name: " + lines);
System.out.println("The number of alphanumeric characters " + "in the file name: " + alphaNumeric);
System.out.println("The number of sentences in the file name: " + sentences);
System.out.println("The number of vowels in the file name: " + vowels);
System.out.println("The number of punctuations in the file name: " + punctuation); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:19:30.233

换行符由字符 '\n' 表示。您可以检查这种情况，就像检查元音、标点符号等一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:43:29.930

使用这组线

```
 String line = fileReader.nextLine();

   for (int i = 0; i < line.length(); i++) {
                 char ch = line.charAt(i);
                 if (ch == 'a' || ch == 'e' || ch == 'i' || ch == 'o' || ch == 'u') vowels += 1;
                 if ((ch == '!' || ch == '.' || ch == '?')) sentences += 1;
                 if (Character.isLetterOrDigit(ch)) alphaNumeric += 1;
                 switch (ch) {
                    // do something

                 }
             }
             lines ++;
             words += line.split(" ").length; 
```

在您的原始代码中，这些单词只不过是行。它们不是这样的词。

# css - 带流体槽的固定宽度柱

> ID：14823945
> 
> 赞同：0
> 
> 时间：2013-02-12T01:18:52.597
> 
> 标签：css, html, grid, fluid-layout

**我知道这可以用 来完成`columns`，但我必须支持 IE。**

我试图得到一个列都是固定宽度的布局，排水沟是流动的。

我无法让它与浮点数一起使用，所以我决定使用合理的`inline-block`项目：

**HTML**

```
<div class="wrapper">
    <div></div>
    <div></div>
    <div></div>
    <!-- more divs... -->
</div> 
```

**CSS**

```
.wrapper {
    text-align: justify;
}

.wrapper div {
    width: 100px;
    display: inline-block;
} 
```

这很好用，但是最后一行`div`s 都向左对齐：http: [//jsfiddle.net/EsHh3/](http://jsfiddle.net/EsHh3/)

我发现的唯一解决方案是添加额外的不必要`div`的 s：http: [//jsfiddle.net/EsHh3/1/](http://jsfiddle.net/EsHh3/1/)

我对此感到不舒服，所以我想知道是否还有其他选择。

* * *

请不要告诉我不要重新发明轮子。我还没有找到任何支持流体排水沟的流体网格系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:26:43.073

对于您想要做的事情，恐怕目前没有仅 CSS 的解决方案，更不用说如果您希望它在 IE8 中工作。

由于您希望 (a) HTML 源代码中的项目作为列表 (b) 可变数量的列取决于可用空间 (c) 列间距取决于容器的宽度我认为您需要的解决方案将有至少使用一点javascript。

考虑其他答案中提出的框架。一个我合作过并且可以做你想做的事是[Masonry](http://masonry.desandro.com/demos/fluid.html)（或付费的大哥 Isotope）。（还有一个非 jQuery 版本的[Masonry](http://vanilla-masonry.desandro.com/demos/fluid.html)）。您必须想出一个功能，当页面调整大小时，重新计算所需的装订线并重新配置框架。根据容器宽度和项目宽度计算 x = 每行可以容纳多少项目，然后将剩余空间除以 x-1。

如果您想坚持在标记中添加额外 DIV 的想法，另一种方法是监听调整大小事件，并`DIV`根据需要根据宽度和每行适合多少项目添加 s。

原始答案，不符合所有标准。

由于您依赖`text-align: justified`最后一行没有扩展到全宽的原因是因为它的末尾没有换行符。因此，为了实现这一点，我们添加了一个带有`wrapper:after {}`规则的额外元素，这也是一个宽度为 100% 的内联块，因此它保证了换行符。

[见小提琴](http://jsfiddle.net/frozenkoi/gXg9C/2/)

CSS最终是这样的：

```
.wrapper {
    text-align: justify;
    width: 380px;
    margin: 0 auto;
}

.wrapper div {
    width: 100px;
    display: inline-block;
}

.wrapper:after {content: ''; width: 100%; display: inline-block; background: pink; height: 2px; overflow: hidden} 
```

请注意，粉红色的背景在那里，以便您可以看到元素的位置。您可能需要使用该额外元素或包装器的边框/边距/填充，以便后面的内容`wrapper`不会获得额外的边距。不幸的是，在 chrome 中，最后一行项目有轻微的错位，可能是因为最后一行`DIV`和假元素之间有额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:23:59.950

嘿，我不知道你为什么想要一个流畅的排水沟，但我有一个[简单的网格示例](http://codepen.io/siddharth-pandey/pen/wzrJn)，你可能想看看，如果你想查看 css，然后单击 codepen 网站上的 SCSS。此外，如果您正在学习，那么这个示例是如何制作自己的网格的一个很好的起点。此外，为了避免自己重新发明轮子，您可能想尝试不同的网格框架。只是谷歌 css 网格框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:24:49.213

你可以试试这个：

```
 .wrapper {
    text-align: justify;
    width: 380px;
    margin: 0 auto;
    moz-column-count: 3;
    -moz-column-gap: 20px;
    -webkit-column-count: 3;
    -webkit-column-gap: 20px;
    column-count: 3;
    column-gap: 20px;
} 
```

[更新网址](http://jsfiddle.net/EsHh3/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T17:24:38.927

这就是我将如何去做：[http ://codepen.io/jeremychurch/pen/wmtJz](http://codepen.io/jeremychurch/pen/wmtJz)

```
.container {
  display: table;
  width: 100%; }
.cell {
  display: table-cell; }
.content {
  width: 15em;
  margin: 0 auto; }

<div class="container">
  <div class="cell">
    <div class="content">
    </div>
  </div>

  <div class="cell">
    <div class="content">
    </div>
  </div>

  <div class="cell">
    <div class="content">
    </div>
  </div>
</div> 
```

# multithreading - 从线程设置 TCL vwait 变量

> ID：14823953
> 
> 赞同：0
> 
> 时间：2013-02-12T01:19:40.313
> 
> 标签：multithreading, tcl, visa

我需要能够设置变量以从线程内部结束 vwait。这是因为我有一个循环，它通常会锁定交互器，因此它运行的任何 GUI 都会锁定，直到它完成。

我希望它像这样的睡眠命令一样运行：

```
global EndSleep
after ${SleepTime_ms} set EndSleep 1
vwait EndSleep 
```

只有当查询设备的 while 循环退出时，我才需要设置 vwait 变量。

这是我目前的代码：

```
 proc ::VISA::Wait {VisaAlias} {
    # Link global variable
    global EndWait

    # Execute commands in a thread so the GUI is not locked while executing
    set Thread [thread::create]
    thread::send ${Thread} [list set VisaAlias ${VisaAlias}]
    thread::send ${Thread} {
        source MolexVisa.tcl

        # Temporarily make new connection with device
        VISA::Connect ${VisaAlias}

        # Query operation complete bit
        VISA::Query ${VisaAlias} "*OPC?"

        # Continue to attempt to read OPC bit until any response is given; typically 1
        while {[string equal [VISA::Read ${VisaAlias}] ""]} {}

        # Destroy temporary connection
        VISA::Disconnect ${VisaAlias}

        # Set vwait variable
        set EndWait 1
    }

    # Wait for thread to end
    vwait EndWait

    # Mark thread for termination
    thread::release ${Thread}
} 
```

目前该线程仍在冻结 GUI。此外，由于线程中的变量和我期望的变量不同，显然它只是永远等待。

任何建议或帮助表示赞赏。我相信我已经用尽了所有其他更实用的方法来完成这项任务，但欢迎提供更多见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:50:22.270

使用`-async`标志`thread::send`。默认情况下，`::thread::send`在脚本执行之前一直阻塞（这在大多数情况下会破坏线程的使用）。

如果你使用`-async`标志，你也可以使用可选的变量参数`thread::send`，`vwait`例如

```
set tid [thread::create {
    proc fib n {
        if {$n == 0 || $n == 1} {return 1}
        return [expr {[fib [expr {$n - 1}]] + [fib [expr {$n - 2}]]}]
    }
    thread::wait
}]
::thread::send -async $tid [list fib $num] result
vwait result
::thread::release $tid
# ... do something with result 
```

这应该可以防止 GUI 冻结。请注意，斐波那契的这种实现并不是最好的，它是“一些昂贵的计算”的占位符。

# objective-c - OS X Web View App - 不会加载本地 .html 网页

> ID：14823955
> 
> 赞同：1
> 
> 时间：2013-02-12T01:19:48.943
> 
> 标签：objective-c, cocoa, webview

我在打开我的应用程序时打开 Google 的 AppDelegate.m 文件中有以下代码。我正在尝试更改它以打开我复制到我的 Xcode 项目中的 .HTML 网页，但它无法正常工作。我正在使用 Xcode 4.5.2。

打开谷歌的代码是：

```
@implementation MDAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];
    [self.webView.mainFrame loadRequest:request];
} 
```

我尝试将其更改为（以便它加载我放在项目文件夹中的 test.html 文件，但应用程序现在只是空白）。我错过了什么？

```
@implementation MDAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"test.html"]];
    [self.webView.mainFrame loadRequest:request];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T02:30:45.833

只要将`test.html`您的项目复制到项目的根目录（确保它也复制到您的最终应用程序包中，嗯？-检查*Build Phases*），您就可以使用以下代码将其加载到您的 Web 视图中：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"];
NSURL* fileURL = [NSURL fileURLWithPath:path];
NSURLRequest* request = [NSURLRequest requestWithURL:fileURL];
[self.webView.mainFrame loadRequest:request]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:28:44.943

`[NSURL URLWithString:@"test.html"]`没有为您的文件创建有效的 URL。试试看：（它来自一个 iOS 项目，但也应该适用于 OS X 应用程序）。我正在使用`loadHTMLString:baseURL:`而不是`loadRequest:`

```
NSString* fileName = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"];
NSString* htmlString = [NSString stringWithContentsOfFile:fileName encoding:NSUTF8StringEncoding error:NULL];
NSURL *baseURL = [[NSBundle mainBundle] bundleURL];
[self.webView loadHTMLString:htmlString baseURL:baseURL]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T02:06:58.043

```
[NSURL URLWithString:@"test.html"] 
```

有你的问题。假设您的`test.html`文件位于应用程序包的资源文件夹中，请改为执行以下操作：

```
[[NSBundle mainBundle] URLForResource:@"test" withExtension:@"html"]; 
```

NSBundle 还有一些其他方法可以轻松创建 URL，以防上面的方法不合适（比如文件在子目录中）。查看[NSBundle 参考页面](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)了解更多信息。

# php - 在 jQuery 中使用页面加载/点击事件链接选择

> ID：14823956
> 
> 赞同：0
> 
> 时间：2013-02-12T01:19:54.357
> 
> 标签：php, jquery, mysql

我正在尝试使用 onclick 事件链接两个选择下拉列表，但收效甚微。这是我迄今为止设法实现的目标。

到目前为止，这是我的代码：

**表单.php**

```
$("#dept").click(function () {
    var dept = $("#dept").val();
    var dataString = 'dept=' + dept
    $.ajax({
        type: "POST",
        url: "process.php",
        data: dataString,
        cache: false,
        success: function (html) {
           $('select.moduleCode').html();
        }
    });
});

Department    
<select name="dept" id="dept">
<option value="<?php echo $loggedin_id; ?>">
<?php echo $_SESSION[$thename]; ?></option>
<option>---------------------------------</option>
<?php
$sql = "SELECT * FROM ts_dept WHERE id<>:id";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':id' => $loggedin_id ) );
$rows = $stm->fetchAll();
foreach ($rows as $row) 
{
  echo '<option value="'.$row['id'].'">
  '.$row['dept'].'
  </option>';
};
?>
</select>

<p>

Module Code
<select name="moduleCode" id="moduleCode">
<option>---------------------------------</option>
</select> 
```

**进程.php**

```
<?php
require_once("../resources/php/connection.php");

$dept_id = $_POST["dept"];

$sql = "SELECT id FROM ts_module WHERE id=:id";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':id' => $dept_id ) );
$rows = $stm->fetchAll();
foreach ($rows as $row) 
{
    echo '<option>'.$row['id'].'</option>';
}
?> 
```

我正在尝试使用基于在**dept下拉列表中所做选择的值填充****moduleCode**下拉列表的**option**（此事件也应在页面加载时启动。但是尽管用户在**dept**下拉列表中进行了选择，**moduleCode**下拉菜单中没有刷新任何内容。我需要对代码进行哪些更改才能解决此问题？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:38:14.377

您的 ajax 调用对 php 的响应没有任何作用，请尝试：

```
$.ajax({
    type: "POST",
    url: "process.php",
    data: dataString,
    cache: false,
    success: function (html) {
       $('#moduleCode').html(html);
    }
}); 
```

我也会更改`$("#dept").click(`，`$("#dept").change(`因此它适用于没有鼠标的用户，因此它仅在更改时加载新数据，而不仅仅是在单击时加载。******

# javascript - jQuery select2 重新格式化 but submits the option ID instead of the value I'm using the select2 jquery plugin to reformat my long select options. Everything works as expected, except when I submit the form the the id value gets saved as the value, inste

> ID：14823958
> 
> 赞同：6
> 
> 时间：2013-02-12T01:20:08.947
> 
> 标签：javascript, jquery, jquery-select2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T12:52:46.293

我在开发人员的帮助下解决了这个问题：[https ://github.com/ivaynberg/select2/issues/852#issuecomment-13478644](https://github.com/ivaynberg/select2/issues/852#issuecomment-13478644)

简而言之，有一个`id:`回调函数处理将返回的 ID 映射到所需的输入值。

# c# - linq 按时间跨度分组

> ID：14823964
> 
> 赞同：0
> 
> 时间：2013-02-12T01:20:28.687
> 
> 标签：c#, .net, linq, entity-framework

如何按时间跨度分组？我要做的是获取总分钟数，并执行从分钟函数获取时间跨度。

最终，我试图获得一个月内花费在特定帐户上的平均时间。我也在考虑尝试找出在特定帐户上花费的总时间。

我觉得我很接近了，但我在 select 语句中尝试的一切似乎都不起作用。

```
period = new DateTime(2013,1,1);
endPeriod = new DateTime(2013,1,1).AddMonths(1).AddDays(-1);
account.AccountNumber = 1455;

var q = from logs in db.logs
where logs.AccountNumber == account.AccountNumber
where logs.StartDateTime > period && logs.StartDateTime < endPeriod
let time = new TimeSpan(logs.ElapsedHours, logs.ElapsedMinutes, 0).TotalMinutes
group logs by time into g
select new {
AvgTime = g.Average(g.Key)

} 
```

此查询当前返回 5 行。它应该只返回 1。我不确定我做错了什么。

有什么建议么？

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:25:10.253

这就是我最终的结果：

```
var result = (from logs in db.logs
         where logs.AccountNumber == 1450
         where logs.StartDateTime > new DateTime(2013,1,1) && logs.StartDateTime < new DateTime(2013,1,31)
         group logs by logs.AccountNumber into g
         select new {
             AvgTime = (g.Sum(h=>h.ElapsedHours) * 60) + g.Sum(h=>h.ElapsedMinutes) / g.Count(),
             TotalTime = (g.Sum(h=>h.ElapsedHours) * 60) + g.Sum(h=>h.ElapsedMinutes)
         }).ToList()
         .Select(x=> new {
            AvgTime = TimeSpan.FromMinutes(x.AvgTime),
            TotalTime = TimeSpan.FromMinutes(x.TotalTime)
         }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:25:45.637

您的查询有点令人困惑-您按值（时间跨度）分组，但显然试图计算*键值*的平均值，而不是每个组中项目的平均值。如果确实如此，请尝试以下操作：

```
period = new DateTime(2013,1,1);
endPeriod = new DateTime(2013,1,1).AddMonths(1).AddDays(-1);
account.AccountNumber = 1455;

var q = from logs in db.logs
where logs.AccountNumber == account.AccountNumber
&& logs.StartDateTime > period && logs.StartDateTime < endPeriod
let time = new TimeSpan(logs.ElapsedHours, logs.ElapsedMinutes, 0).TotalMinutes
group logs by time into g
select new {
Time = g.Key
}

var averageTime = q.Average(i => i.Time); 
```

`g.Key`只会为每个组提供一个值，这就是您看到 5 条记录的原因（我假设您的数据将产生 5 个组）。

# youtube-api - 使用 YouTube API v3 Dotnet 客户端处理重复的 Youtube 视频上传

> ID：14823965
> 
> 赞同：0
> 
> 时间：2013-02-12T01:20:30.823
> 
> 标签：youtube-api, google-api-dotnet-client

首先让我说我不是在问“如何检查以前上传的视频的状态”。我的问题是关于从上传的响应中获取视频的状态。我正在使用 dotnet 客户端，上传完成后，响应是一个`Google.Apis.Youtube.v3.Data.Video`对象。该对象有一个名为的属性`Status`，其中包含以下字段`RejectionReason`：`PrivacyStatus`和`UploadStatus`。问题是只有 PrivacyStatus 和 UploadStatus 有值。RejectionReason 为空。Jeff Posnick 提到过（[在这里查看整个线程](https://stackoverflow.com/questions/9926172/check-duplicate-youtube-api-upload)）

> 作为上传响应的一部分，无法确定视频是否重复，因为 YouTube 在处理视频之前不知道视频是否重复，并且在上传完成后进行处理

这有点奇怪，因为当我在上传后立即发出 video.list 时，API 会返回上传视频的状态。因此，即使视频没有发布，而且 YouTube 似乎仍在索引/处理视频，它已经知道“刚刚上传的视频”的状态。那么为什么它不能将状态作为响应的一部分返回呢？

响应中包含状态很重要，因为如果没有，那么在代码中，每次上传时我们都必须执行两次 API 调用：(1) insertmediaupload 然后 (2) video.list。这是一项非常昂贵的操作，尤其是并非所有上传都是重复的。

**编辑** 作为对 Jeff-Posnick 在下方评论的回应，问题是**“API 是否可以等待几秒钟并检查处理是否完成，然后将状态作为响应的一部分包含在内？”。**

由于我所看到的行为，我提出了这个问题：`That's a bit strange because when I issue a video.list right after the upload the API returns a status for the uploaded video`. 但我一直在使用 API 并得到不一致的结果。我一遍又一遍地上传相同的视频，有时会出现“重复”状态，有时则没有。请注意我采取的步骤，上面的 #1 和 #2。这两个 API 调用之间没有其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:32:24.323

我不确定这里的问题是什么。

您似乎了解 YouTube API 上传工作方式的限制，这些限制仍然适用于 YouTube Data API v3。在`videos.insert()`请求返回响应时，视频的状态是未知的，因为它还没有被处理。实际处理可能会在视频上传后一两秒发生，也可能会在视频上传后几分钟（或更长时间）发生，尤其是对于较大的视频文件。它不是实时完成的，期望 videos.insert() API 调用阻塞等待处理完成是不合理的。

我不同意您的评估，即执行 a`videos.list(id=...,part=status)`是“非常昂贵的操作”。与实际上传视频相比，消耗的带宽量和 YouTube API 配额是最少的。提供一种通过某种回调或推送更新机制独立于调用来传达处理状态的方法会很好`videos.insert()`，但我们目前没有任何可用的东西。你必须投票`videos.list(id=...,part=status)`。

# geb - 在geb中选择单选按钮

> ID：14823969
> 
> 赞同：2
> 
> 时间：2013-02-12T01:21:00.500
> 
> 标签：geb

我在一个带有 ID、值和名称的表单中有 3 个单选按钮。

使用 Geb CSS 选择器，我已经厌倦了单击单选按钮的所有组合，但没有成功！

`testBtn {$("input", ID:"resident", name:"status")}`然后我在规范中尝试了`testBtn.value("My status")`单选按钮`value="My status"`，但标签下一个单选按钮是`"Status"`。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:45:20.807

您可能不想在选择器中使用 id，因为这只会选择一个收音机。要将单选按钮标记为选中，您可以在一组具有给定名称的单选按钮上设置一个值。对于您的示例，这将是：

```
$('input', name: 'status').value('My status') 
```

或者如果您使用内容 DSL：

```
static content = {
    status { $('input', name: 'status') }
}

status = 'My status' 
```

请参阅Geb 中有关[选择单选按钮的部分。](http://www.gebish.org/manual/current/navigator.html#radio)

# php - Codeigniter 更新查询不适用于表单

> ID：14823970
> 
> 赞同：2
> 
> 时间：2013-02-12T01:21:02.203
> 
> 标签：php, mysql, codeigniter, sql-delete

嘿伙计们，我在通过 codeigniter 中的表单运行更新查询时遇到问题。没有返回错误，但查询不会在数据库中更新。应该注意的是，在同一页面上还有另一个表单运行了一个可以正常工作的插入查询。

看法：

```
 <?php
                $modify = array(
                    'id' => 'modify-form', 
                    'class' => ''                       
                );
                echo form_open('main/modify_idea', $modify); 
                $ta_modify = array(
                    'id' => $row->id,
                    'name' => 'ta_modify', 
                    'label' => 'ta_modify', 
                    'placeholder' => $row->idea, 
                    'method' => 'Post'
                ); 
                echo form_textarea($ta_modify); 
                echo form_hidden('facebook_id', $session['id']);
                echo "<div id='button'>"; 
                echo form_submit('submit', 'Post'); 
                echo "</div>";
                echo form_close(); 
            ?> 
```

控制器：

```
public function modify_idea() {
    $this->load->model('idea'); 
    $this->idea->modify_idea(); 
    redirect('main/members'); 
} 
```

模型：

```
public function modify_idea() {
    $data = array( 
        'id' => $this->input->post('id'), 
        'idea' => $this->input->post('ta_modify'), 
        'facebook_id' => $this->input->post('facebook_id')
    );

    $query = $this->db->query("UPDATE idea SET `idea` = ? WHERE `id` =?", array($data['idea'], $data['id'])); 
    return $query; 
} 
```

我使用了以下资源，但仍然没有运气：
[CodeIgniter MySQL query not working](https://stackoverflow.com/questions/4839038/codeigniter-mysql-query-not-working)

[CodeIgniter MySQL Query 不返回任何数据，即使肯定有要返回的数据！](https://stackoverflow.com/questions/3227092/codeigniter-mysql-query-not-returning-any-data-even-though-there-definitely-is)

[http://www.tutorialspoint.com/mysql/mysql-update-query.htm](http://www.tutorialspoint.com/mysql/mysql-update-query.htm)
[https://www.codeigniter.com/userguide3/database/query_builder.html#deleting-data](https://www.codeigniter.com/userguide3/database/query_builder.html#deleting-data)

一如既往，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T07:33:52.040

请将您的帖子值从控制器传递给模型。然后它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:53:53.093

将您的发布数据从控制器传递到模型

更改您的控制器代码：

```
public function modify_idea() {
    $this->load->model('idea');
     $data = array( 
        'id' => $this->input->post('id'), 
        'idea' => $this->input->post('ta_modify'), 
        'facebook_id' => $this->input->post('facebook_id')
    );
    $this->idea->modify_idea($data); 
    redirect('main/members'); 
} 
```

在模型中这样做

```
public function modify_idea($data) {
   $query = $this->db->query("UPDATE idea SET `idea` = ? WHERE `id` =?",  
                           array($data['idea'], $data['id'])); 
   return $query; 
} 
```

# ruby-on-rails - 在 Rails 中使用 unicode 进行 JSON 编码/解码

> ID：14823971
> 
> 赞同：1
> 
> 时间：2013-02-12T01:21:04.913
> 
> 标签：ruby-on-rails, ruby, json, encoding

由于安全错误，我已降级到 Rails ~~2.3.17~~，但现在我无法解码保存到数据库中的 json 字符串，如果它们中有 unicode :(。有没有办法处理这样的字符串它解码正确？

```
e = ActiveSupport::JSON.encode({'a' => "Hello Unicode \u2019"})
ActiveSupport::JSON.decode(e) 
```

给我

```
RangeError: 8217 out of char range
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-2.3.17/lib/active_support/json/backends/okjson.rb:314:in `unquote'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-2.3.17/lib/active_support/json/backends/okjson.rb:251:in `strtok'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-2.3.17/lib/active_support/json/backends/okjson.rb:215:in `tok'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-2.3.17/lib/active_support/json/backends/okjson.rb:178:in `lex'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-2.3.17/lib/active_support/json/backends/okjson.rb:46:in `decode'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-2.3.17/lib/active_support/json/backends/okjson.rb:612:in `decode'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-2.3.17/lib/active_support/json/decoding.rb:14:in `decode'
from (irb):30
from /usr/local/bin/irb:12:in `<main>' 
```

我无法更改第一行，因为它来自数据库。

这曾经奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:14:14.323

您可以在 ActiveSupport 中更改后端 JSON 提供程序。

添加`ActiveSupport::JSON.backend = "JSONGem"`到应用程序初始化程序（我将其添加到 application.rb）。这解决了我在将 activesupport 升级到 3.0.20 后遇到的 unicode 解析问题。

请参阅[导致此更新的漏洞通知](https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-security/1h2DR63ViGo)- 它提到此解决方法也应适用于 2.3.16。

从 Rails 控制台：

```
> ActiveSupport::VERSION::STRING
 => "3.0.20" 
> ActiveSupport::JSON.decode('{"test":"string\u2019"}')
RangeError: 8217 out of char range
> ActiveSupport::JSON.backend = "JSONGem" 
> ActiveSupport::JSON.decode('{"test":"string\u2019"}')
 => {"test"=>"string’"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:30:28.343

[JSON gem](https://rubygems.org/gems/json)将正确处理此问题。

需要注意的是，gem 比其他 JSON 解析器严格得多。例如：

```
{ 'test' : 'value' } 
```

即使看起来不错，这也不是有效的 JSON。

无论出于何种原因，非 UTF-8 精通的 JSON 解析器作为 2.3.16 补丁的一部分发布，这对维护者来说真的很草率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:46:30.947

*   切换到 2.3.15 应该没问题，因为那是修复登陆的时候。
*   诅咒在 Rails 中启动这个项目的开发者
*   开始着手移植到 python post haste

# node.js - 新贵 node.js 工作目录

> ID：14823972
> 
> 赞同：14
> 
> 时间：2013-02-12T01:21:10.237
> 
> 标签：node.js, relative-path, upstart, working-directory

使用 Upstart 启动 Node.js，当尝试访问 Node.js 中的文件时，如果不使用完整路径，它就无法访问它们。我需要它来使用工作目录。

```
start on startup
stop on shutdown

script
        echo $$ > /var/run/mynodeapp.pid
        exec sudo -u mynodeapp node server.js >> /var/log/mynodeapp.sys.log 2>&1
end script

pre-start script
        echo "Starting" >> /var/log/mynodeapp.sys.log
end script

pre-stop script
        rm /var/run/mynodeapp.pid
        echo "Stopping" >> /var/log/mynodeapp.sys.log
end script 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-12T01:21:10.237

解决方案是更改脚本中的目录。就我而言，用户是 mynodeapp，节点文件位于用户目录 (/home/mynodeapp/) 中。

```
script
        chdir /home/mynodeapp/
        echo $$ > /var/run/mynodeapp.pid
        exec sudo -u mynodeapp node server.js >> /var/log/mynodeapp.sys.log 2>&1
end script 
```

我还没有弄清楚 $$ 在 echo 行或 2>&1 上的含义。如果他们知道的话，也许有人可以插话！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-14T10:24:14.500

您应该`chdir`按照 Upstart 文档使用该节：http: [//upstart.ubuntu.com/cookbook/#chdir](http://upstart.ubuntu.com/cookbook/#chdir)

# javascript - 从 iFrame 中将父页面滚动到顶部

> ID：14823973
> 
> 赞同：0
> 
> 时间：2013-02-12T01:21:12.747
> 
> 标签：javascript, html, iframe

我正在尝试从 iFrame 中滚动到父页面的顶部，但它不在同一个域中。当我尝试使用 JavaScript 执行此操作时，它会引发“不安全的 JavaScript 尝试”。有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:22:39.487

可以使用[http://easyxdm.net/wp/](http://easyxdm.net/wp/)中的 easyxdm 库找到解决方案，将指令发送给父级。

抱歉，我没有确切的代码。

# ruby-on-rails - 无法在 Cygwin 上安装 libv8 gem

> ID：14823975
> 
> 赞同：6
> 
> 时间：2013-02-12T01:21:29.737
> 
> 标签：ruby-on-rails, ruby, gem, cygwin, v8

如何安装 libv8 gem？我无法安装 libv8 gem。当我尝试时，我收到以下错误。

```
$ gem install libv8
Building native extensions.  This could take a while...
ERROR:  Error installing libv8:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby.exe extconf.rb
creating Makefile
Using compiler: /usr/bin/g++
which: no gmake in (/usr/local/bin:/usr/bin:/cygdrive/c/WINDOWS/system32:/cygdrive/c/WINDOWS:/cygdrive/c/WINDOWS/System32/Wbem:/cygdrive/c/WINDOWS/system32/WindowsPowerShell/v1.0:/cygdrive/c/Program Files/Microsoft SQL Server/100/Tools/Binn/VSShell/Common7/IDE:/cygdrive/c/Program Files/Microsoft SQL Server/100/Tools/Binn:/cygdrive/c/Program Files/Microsoft SQL Server/100/DTS/Binn:/cygdrive/c/Program Files/Heroku/bin:/cygdrive/c/Program Files/ruby-1.9.2/bin:/cygdrive/c/Program Files/git/bin:/cygdrive/c/Program Files/git/cmd:/cygdrive/c/Program Files/DTN/IQFeed:/cygdrive/c/Program Files/OpenVPN/bin:/cygdrive/c/Program Files/Java/apache-ant-1.8.3/bin:/usr/lib/lapack:/cygdrive/c/Program Files/Notepad++:.:/cygdrive/c/Program Files/Java/android-sdk/platform-tools/:/cygdrive/c/Program Files/Java/android-sdk/tools/:/cygdrive/c/Program Files/Java/jdk1.7.0_03/bin)
In file included from ../src/conversions-inl.h:42:0,
                 from ../src/conversions.cc:32:
../src/platform.h:77:12: error: new declaration ‘int random()’
/usr/include/cygwin/stdlib.h:29:6: error: ambiguates old declaration ‘long int random()’
make[1]: *** [/usr/lib/ruby/gems/1.9.1/gems/libv8-3.11.8.13/vendor/v8/out/ia32.release/obj.target/preparser_lib/src/conversions.o] Error 1 
```

我试着用

```
$ gem install libv8 --pre
Fetching: libv8-3.5.10.beta1.gem (100%)
Building native extensions.  This could take a while...
Successfully installed libv8-3.5.10.beta1
1 gem installed 
```

但`bundle install`还是不会跑。它仍然尝试安装版本 3.11.8.13。

```
Installing libv8 (3.11.8.13) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
```

libv8 gem 不在我的 Gemfile 中。我不知道如何找出试图使用它的东西，但是在搜索时我看到 ruby​​racer 使用 libv8，我确实有

```
group :assets do
  gem 'therubyracer', :platform => :ruby 
```

我什至尝试编辑`/usr/lib/ruby/gems/1.9.1/gems/libv8-3.11.8.13/src/platform.h`文件并注释掉第 77 行：

`//int random();`

但是当我运行时`gem install libv8`，它覆盖了我的更改并且仍然给出了错误。我在 中看到了一个技巧`gem install libv8 --help`，所以我再次编辑了文件并注释掉了第 77 行，并尝试了

```
cd /usr/lib/ruby/gems/1.9.1/gems/libv8-3.11.8.13/vendor/v8
make 
```

但是，这只是给出了不同的错误：

```
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../include/w32api/winsock2.h:56:0,
                 from ../src/win32-headers.h:77,
                 from ../src/platform-win32.cc:31:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../include/w32api/psdk_inc/_fd_types.h:100:2: warning: #warning "fd_set and associated macros have been defined in sys/types.      This can cause runtime problems with W32 sockets"
In file included from ../src/win32-headers.h:80:0,
                 from ../src/platform-win32.cc:31:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../include/w32api/wspiapi.h:26:41: error: expected ‘&gt;’ before numeric constant
../src/platform-win32.cc: In function ‘int random()’:
../src/platform-win32.cc:122:12: error: new declaration ‘int random()’
/usr/include/cygwin/stdlib.h:29:6: error: ambiguates old declaration ‘long int random()’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-19T13:48:57.140

我觉得应该为那些只想让错误消失的人找到一个答案，这样他们就可以继续学习。

It seems that you don't need 'therubyracer' specifically -- you can choose some other javascript engine.

Specifically, open the file `Gemfile`, and change 'therubyracer' to 'therubyrhino'. (If rhino doesn't work, there are more options and advice at: [https://github.com/sstephenson/execjs#readme](https://github.com/sstephenson/execjs#readme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T03:06:03.053

由于您的问题提到了 Cygwin，我假设您是 Windows 用户。目前，没有办法在 Windows 中安装 therubyracer 或 libv8，正如其维护者所说：[therubyracer gem on windows](https://stackoverflow.com/questions/6356450/therubyracer-gem-on-windows)。不幸的是，Windows 不是 Rails 领域。

如果你确实需要 libv8，你可以试试 nodejs。它带有一个二进制文件，适用于所有平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:31:28.700

我刚刚在我的 Win7 开发机器上遇到了同样的问题。它看起来像安装[https://github.com/hiranpeiris/therubyracer_for_windows](https://github.com/hiranpeiris/therubyracer_for_windows)并添加`gem 'therubyracer'`到`Gemfile`排序的东西。

前：

```
$ rails generate
c:/Ruby193/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
(...) 
```

这基本上意味着 Rails 需要`rubyracer`，因此`libv8`.

后：

```
$ rails generate
    SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
    This poses a security threat. It is strongly recommended that you
    provide a secret to prevent exploits that may be possible from crafted
    cookies. This will not be supported in future versions of Rack, and
    future versions will even invalidate your existing user cookies.

    Called from: c:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.

Usage: rails generate GENERATOR [args] [options]
(...) 
```

# actionscript-3 - 格斗游戏 as3，KeyboardEvent.KEY_DOWN 的问题

> ID：14823978
> 
> 赞同：0
> 
> 时间：2013-02-12T01:21:51.997
> 
> 标签：actionscript-3, flash

问题是我在游戏中遇到了战斗机的问题。如果我使用 KEY_DOWN 事件和/或 ENTER_FRAME，当我按住踢或拳按钮时，战斗机会持续对敌人造成伤害，但我希望他要么踢，然后返回静止位置，要么踢并能够保持位置，但只造成一次伤害。这是一些代码：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, enterAttack);
stage.addEventListener(KeyboardEvent.KEY_UP, exitAttack);
stage.addEventListener(Event.ENTER_FRAME, attackYes);
stage.addEventListener(Event.EXIT_FRAME, attackNo);

function enterAttack(evt:KeyboardEvent):void
{
    if (evt.keyCode == 84)
    {
        attack = true;
    }
}
function exitAttack(evt:KeyboardEvent):void
{
    attack = false;
}
function attackYes(evt:Event):void
{
    if (attack)
    {
        hero.gotoAndStop("punch1");

        checkHitRed();
        checkIfDead();
    }
}
function attackNo(evt:Event):void
{
    if (!attack)
    {
        hero.gotoAndStop("still");
    }
} 
```

我试图将监听器移到某个地方，但这总是让战斗机看起来没有进行任何攻击。

有什么办法可以防止按住踢/拳按钮？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:32:25.117

性格状态，分为三种。如下。

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, enterAttack);
stage.addEventListener(KeyboardEvent.KEY_UP, exitAttack);
stage.addEventListener(Event.ENTER_FRAME, onAction);

var characterState:String = "wait"
function enterAttack(evt:KeyboardEvent):void
{
    if (evt.keyCode == 84)
    {
        characterState = "attack";
    }
}
function exitAttack(evt:KeyboardEvent):void
{
    characterState = "attack_ended";
}
function onAction(evt:Event):void
{
    if(characterState == "wait") return;

    if(characterState == "attack")
    {
        hero.gotoAndStop("punch1");

        checkHitRed();
        checkIfDead();
    }
    else if(characterState == "attack_ended")
    {
        hero.gotoAndStop("still");
        //Revert to wait state after the attack termination .
        characterState = "wait";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:36:05.927

You have to devise cooldowns for your abilities, e.g. "kick" can happen only once per 20 frames. So, when the player presses kick button, char does a kick, does damage, and sets the cooldown variable. Enter frame listener starts to decrement the counter, and subsequent kick commands are ignored while the cooldown is active.

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, enterAttack);
stage.addEventListener(Event.ENTER_FRAME, enterFrame);
var kickCooldown:int=0;
function enterAttack(evt:KeyboardEvent):void
{
    if (evt.keyCode == 84)
    {
        if (!kickCooldown) {
            attack = true;
            kickCooldown=15;
        }
    }
}
function enterFrame(evt:Event):void
{
    if (attack)
    {
        hero.gotoAndStop("punch1");
        attack=false; // we have attacked once, now dealing damage
        checkHitRed();
        checkIfDead();
    }
    if (kickCooldown>0) kickCooldown--; // waiting for cooldown end
    else hero.gotoAndStop("still"); // if ends, return hero to "still" posture
} 
```

# .htaccess - htaccess 将文件夹重定向到另一个文件夹（下载）

> ID：14823979
> 
> 赞同：0
> 
> 时间：2013-02-12T01:22:12.760
> 
> 标签：.htaccess, redirect, download

我如何使用 .htaccess 重定向

[http://www.mysite.net/folder](http://www.mysite.net/folder) 1/category/1.zip

至

[http://www.mysite.net/folder1/category/1.zip](http://www.mysite.net/folder1/category/1.zip)

?

注意：文件夹 1 之间包含空格

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:23:52.850

从技术上讲，你甚至不应该在文件夹名称中使用空格，所以我拒绝回答这个问题。但是，在您的任务中，请记住浏览器将请求发送为 example.com/folder%201

# configuration - gwan 使用 $ 和 # 作为目录名称

> ID：14823983
> 
> 赞同：0
> 
> 时间：2013-02-12T01:22:51.560
> 
> 标签：configuration, directory, virtualhost, g-wan

有没有办法改变 gwan 的默认行为，即使用井号字符命名站点和使用美元符号命名虚拟主机。我的许多开发工具在访问文件名中带有 # 和 $ 的目录时都会遇到问题。Shell 脚本有问题，ftp 客户端有问题……我希望有一种方法可以将这些默认字符更改为其他字符。或者我需要对 linux 进行一些更改以使其更友好吗？无论如何，我都不是 linux 专家，但我已经看到几个线程谈论如何不鼓励使用这些字符。

我敢肯定使用这些角色肯定有利有弊，我只是不知道利弊是什么。

*   编辑 *

事实证明，问题只是权限。我的 0.0.0.0_8080 目录及以下是 root:root 我的工具以不同的用户身份登录。我猜我太专注于 $ 和 # 的使用，看不到真正的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:02:12.677

为此，它会破坏 GWAN 最有趣的方面之一：没有配置文件。它会产生一个故障点。

要访问终端上的目录，只需使用 '\' 转义虚拟主机路径的开头，如 cd \$yourvirtualhost.com

这也适用于 sftp 命令。如果您想要一个图形工具，请使用 FileZilla，它非常适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:46:54.357

Paulo 的回答提供了丰富的信息，但我想关闭实际问题，因此答案似乎是您无法更改主机和虚拟主机名的默认字符 $ 或 #。我在问题中描述的问题与 gwan 无关，而是与我自己配置​​错误的用户/组有关。我的 0.0.0.0_8080 目录及以下是 root:root 我的工具以不同的用户身份登录。我猜我太专注于 $ 和 # 的使用，看不到真正的问题。

关注

# android - Android上的直接调用会重启应用

> ID：14823987
> 
> 赞同：3
> 
> 时间：2013-02-12T01:23:59.517
> 
> 标签：android, cordova, plugins, call

我已经成功地在我自己的应用程序上实现了`plugin`基于 Simon 的回答（[在 Android 上使用 PhoneGap 自动呼叫预定义号码）。](https://stackoverflow.com/questions/13233091/call-predefined-number-automatically-on-android-with-phonegap)

但是当我结束通话时，应用程序重新启动，知道我能做什么吗？

这是我的代码

```
package com.phonegap.plugin;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;

import android.content.Intent;
import android.net.Uri;

/**
 * This class echoes a string called from JavaScript.
 */
public class DirectCall extends Plugin {

@Override
public PluginResult execute(String action, JSONArray args, String callbackId) {
    PluginResult.Status status = PluginResult.Status.OK;
    String result = "";

    try {
        if (action.equals("call")) {
            String number = "tel:" + args.getString(0);
            Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number)); 
            this.cordova.getActivity().startActivity(callIntent);
        }
        else {
            status = PluginResult.Status.INVALID_ACTION;
        }
        return new PluginResult(status, result);
    } catch (JSONException e) {
        return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
    }
}

} 
```

我搜索了 android 文档，但没有找到问题的答案。

任何帮助将不胜感激 ：）

# c++ - 重置 C/C++ 预处理器 #line 物理文件/行

> ID：14823996
> 
> 赞同：8
> 
> 时间：2013-02-12T01:24:29.877
> 
> 标签：c++, c, c-preprocessor

我有一个代码生成器，它将获取一些用户编写的代码并将其块嵌入到一个更大的生成文件中。我希望底层编译器在用户代码中存在缺陷时提供良好的诊断，但我也不希望生成的代码中的缺陷在不应该被错误归因于源时。

我打算`#line lineNum "sourceFile"`在每个用户编写的代码块的开头发出指令。但是，一旦我离开用户提供的代码，我找不到任何`#line`提及“重置”技术`__LINE__`并`__FILE__`返回到生成文件中的实际行的指令文档。理想的解决方案类似于 C# 预处理器的`#line default`指令。

我是否只需要跟踪我写了多少行并自己手动重置？还是有更好的方法，我可以传递某种重置指令或哨兵值`#line`来消除与用户代码的关联？

看起来这可能是以前[提出](https://stackoverflow.com/questions/10772342/c-code-insertion-using-antlr-and-the-line-directive)的，尽管那里没有可靠的答案。为了区分这一点，我还要询问 C++11 中缺少答案的情况是否发生了变化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T02:25:09.150

我以前使用过的一种技术是，当我的代码生成器`#`想要重置行指令时，它自己在一行上输出 a，然后使用简单的 awk 脚本对文件进行后处理并将其更改为正确的行指令：

```
#!/bin/awk -f
/^#$/ { printf "#line %d \"%s\"\n", NR+1, FILENAME; next; }
{ print; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T01:54:49.993

是的，您需要跟踪已输出的行数，并且您需要知道要输出到的文件的名称。请记住，您指定的行号是下一行的行号。所以如果到目前为止你已经写了 12 行，你需要 output `#line 14 "filename"`，因为 #line 指令将在第 13 行，所以下一行是 14。

和中的`#line`预处理器指令没有区别。`C``C++`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:56:18.207

假设代码生成器的输入“user.code”包含以下内容：

```
int foo () {
   return error1 ();
}

int bar () {
   return error2 ();
} 
```

假设你想增加它，所以它看起来基本上是这样的：

```
int foo () {
   return error1 ();
}

int generated_foo () {
   return generated_error1 ();
}

int bar () {
   return error2 ();
}

int generated_bar () {
   return generated_error2 ();
} 
```

除非你不想那样。您希望向`#line`生成的代码添加指令，以便编译器消息指示错误/警告是来自用户代码还是来自自动生成的代码。该`#line`指令指示下一行代码的来源（而不是包含该`#line`指令的行）。

```
#line 1 "user.code"
int foo () {
   return error1 ();
}

#line 7 "generated_code.cpp"  // NOTE: This is line #6 of generated_code.cpp
int generated_foo () {
   return generated_error1 ();
}

#line 5 "user.code"
int bar () {
   return error2 ();
}

#line 17 "generated_code.cpp" // NOTE: This is line #16 of generated_code.cpp
int generated_bar () {
   return generated_error2 ();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T05:51:24.240

@Novelocrat，

[我之前在这里](https://stackoverflow.com/questions/10772342/c-code-insertion-using-antlr-and-the-line-directive)问过这个问题，并没有发布可靠的答案，但我发现如果在指向用户代码的自动生成的代码中插入行指令，那么这会使自动生成的代码**难以重新定位**。您必须将自动生成的代码和用户代码保存在编译器可以找到它们以报告错误的位置。我认为最好在生成的代码中简单地插入用户代码的文件名和行号。在好的文本编辑器中，通过将光标放在文件名上，只需几次击键即可跳转到文件中的一行。

例如：在 vim 中，将光标放在文件名上并按下会将`g-f`您带到文件，然后`:42`将您带到出现错误的第 42 行（例如）。

Just posting this bit here, so that someone else coming up with the same questions might consider this alternative too.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T02:02:28.167

你试过什么`__LINE__`，`__FILE__`给你什么？我相信它们是从您的`#line`指令中提取的（如果不是，那有什么意义？）。

（使用 gcc-4.7.2 和 clang-3.1 进行的快速测试证实了我的预感）。

# cocoa - 将鼠标光标约束到行

> ID：14823997
> 
> 赞同：1
> 
> 时间：2013-02-12T01:24:35.883
> 
> 标签：cocoa, events, mouse

我想知道是否可以将鼠标光标准确地限制在一条线上。一般的想法是我想创建一个标尺/法式曲线应用程序，我可以在其中拖出一条线并使用贝塞尔点使其弯曲，然后按住热键将鼠标限制在它上面以便我可以绘画带有 wacom 数位板的 Photoshop 中的类似线。

到目前为止，我尝试过的是以下内容。我现在只是用对角线测试它。虽然它似乎正确地将我的鼠标限制在这条线上，但当我在 photoshop 中画一条线时，看起来有一些鼠标事件在事件之间被调度，这些事件将我的光标“捕捉”到我的对角线。例如，如果我将鼠标快速向上和向右移动，鼠标将向上和向右移动一个事件循环，然后快速回到我的对角线。这显然不适用于绘画目的。是否有一些较低级别的鼠标界面可以用来拦截所有鼠标事件，并可能阻止它们在发送到其他应用程序之前被分派。

```
[NSEvent addGlobalMonitorForEventsMatchingMask:NSMouseMovedMask handler:^(NSEvent * mouseEvent) {
    [self mouseMoved:mouseEvent];
}];
[NSEvent addGlobalMonitorForEventsMatchingMask:NSLeftMouseDraggedMask handler:^(NSEvent * mouseEvent) {
    [self mouseMoved:mouseEvent];
}];

- (void)mouseMoved:(NSEvent *)evt {
    NSLog(@"Mouse moved: %@", NSStringFromPoint([evt locationInWindow]));

    NSPoint mousePos = [evt locationInWindow];

    CGSetLocalEventsSuppressionInterval(0.0f);
    CGWarpMouseCursorPosition(CGPointMake(mousePos.x, mousePos.x));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:18:20.313

您正在寻找[CGEventTap API](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)。

# c# - 在 C# 中创建 Attribute 以表示多个子属性

> ID：14823998
> 
> 赞同：3
> 
> 时间：2013-02-12T01:24:36.600
> 
> 标签：c#

我的一个项目中有以下类型的代码示例...

```
 [Obfuscation(Exclude = true)]
    [UsedImplicitly]
    public DelegateCommand<object> OpenXCommand { get; private set; } 
```

我发现属性给代码添加了很多“噪音”——我也看到它违反了 DRY 原则，因为我可能在一个类中有几个这样的属性，所有属性都具有相同的属性装饰。

**问：有什么方法可以设置代表子属性组合的属性？**

理想情况下，我想要看起来像这样的东西..

```
 [MyStandardCommandAttribute]
    public DelegateCommand<object> OpenXCommand { get; private set; } 
```

我之前没有实现自己的属性，所以我不确定这是否可能。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T01:26:57.367

不，您的一个属性不能同时“是” `Obfuscation`（`UsedImplicitly`C# 中没有多重继承）。

查找例如`UsedImplicitlyAttribute`的代码无法知道`MyStandardCommandAttribute`应该表示的内容`UsedImplicitlyAttribute`（除非您使用所有这些属性控制所有代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T01:46:53.330

不幸的是，在 C# 中没有办法做到这一点。

但是，如果您控制读取这些属性的位置（通过反射），则可以按照*约定*进行。

例如，您可以有一个标记界面，该界面将使用它代理的属性“注释”您的属性（听起来像*meta-attribute*）：

```
public interface AttributeProxy<T> 
  where T : Attribute {}

public class MyStandardCommandAttribute : 
  Attribute, 
  AttributeProxy<ObfuscationAttribute>, 
  AttributeProxy<UsedImplicitlyAttribute> {} 
```

（当然，你也必须匹配正确`AttributeUsage`的s。你不能像这样在代理属性上设置属性。）

现在，您可以更进一步，使用 IL 操作库（如 Mono.Cecil）在编译后步骤中实际适当地传输属性。在这种情况下，即使您不考虑这些属性，它也会起作用。

**更新**：仍然在 reflect-your-own-attributes 场景中，您可以使用以下代码获取代理属性，甚至设置属性值：

```
public interface IAttributeProxy {
  Attribute[] GetProxiedAttributes();
}

public class MyStandardCommandAttribute : Attribute, IAttributeProxy {
  public Attribute[] GetProxiedAttributes() {
    return new Attribute[] {
      new ObfuscationAttribute { Exclude = true },
      new UsedImplicitlyAttribute()
    };
  }
} 
```

在反射代码上使用此扩展方法：

```
public static object[] GetCustomAttributesWithProxied(this MemberInfo self, bool inherit) {
  var attributes = self.GetCustomAttributes(inherit);
  return attributes.SelectMany(ExpandProxies).ToArray();
}

private static object[] ExpandProxies(object attribute) {
  if (attribute is IAttributeProxy) {
    return ((IAttributeProxy)attribute).GetProxiedAttributes().
      SelectMany(ExpandProxies).ToArray(); // don't create an endless loop with proxies!
  }
  else {
    return new object[] { attribute };
  }
} 
```