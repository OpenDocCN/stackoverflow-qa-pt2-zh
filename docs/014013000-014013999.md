# StackOverflow 问答 14013000-14013999

# android - Android：拉伸位图以填满整个屏幕

> ID：14013000
> 
> 赞同：2
> 
> 时间：2012-12-23T17:23:28.640
> 
> 标签：android, android-layout

我使用位图作为活动的背景。自定义背景的代码是：

```
<item>
<bitmap android:src="@drawable/fog"
        android:layout_width="match_parent"
        android:adjustViewBounds="true"
             />
</item> 
```

然而，它位于中间，并没有占据整个屏幕空间。我怎样才能让它填满所有可用空间？我尝试将宽度和高度设置为fill_parent。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:48:44.037

我同意@androidz 的帖子。为避免失真，您可以使用 setAdjustViewBounds 函数（参见[此处](http://developer.android.com/reference/android/widget/ImageView.html#setAdjustViewBounds%28boolean%29)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:27:51.670

尝试添加：

```
android:layout_width="match_parent"

android:layout_height="match_parent" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:32:46.070

android:scaleType="fitXY" 是我用来填充图像视图的，我从来没有位图作为项目，也有裁剪的

# java - 解决jsp中css的路径

> ID：14013001
> 
> 赞同：1
> 
> 时间：2012-12-23T17:23:31.810
> 
> 标签：java, jakarta-ee, spring-mvc

我正在使用 Spring MVC 3.0 来构建一个 rest 样式的 url。这是我的代码的一部分：

```
@RequestMapping(value = {"/", "/posts"}, method = RequestMethod.GET)
public String getNewestPosts(Model model, HttpServletRequest request)
        throws DataAccessException {
    return getPostsByPage(1, model, request);
}

@RequestMapping(value = "/posts/page/{page}", method = RequestMethod.GET)
public String getPostsByPage(@PathVariable long page, Model model,
        HttpServletRequest request) throws DataAccessException {
    // ... get the posts by page number
} 
```

我写了两个方法。一个处理来自 url "/posts" 的请求，这意味着检索帖子的第一页，另一个处理来自 url "/posts/page/{page}" 的请求，这意味着根据路径变量检索帖子 {页}。问题是上述两种方法都指向同一个视图，即一个jsp文件，但它们位于不同的路径（“/posts”，“/posts/page/xxx”）。css路径（../ style.css) 不能同时适应，我尝试使用绝对 css 路径(/style.css) 来解决这个问题，这意味着 Web 应用程序只有在应用程序部署在根路径 ("/") 时才能工作。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:26:00.323

使用`<c:url>`标记，它将上下文路径添加到绝对 URL。

```
<link rel="stylesheet" type="text/css" href="<c:url value="/style.css" />" /> 
```

或者

```
<c:url var="cssUrl" value="/style.css" />
<link rel="stylesheet" type="text/css" href="${cssUrl}" /> 
```

# android - Google Maps Android API v2 - 检测地图上的触摸

> ID：14013002
> 
> 赞同：75
> 
> 时间：2012-12-23T17:23:39.630
> 
> 标签：android, google-maps, maps, touch, google-maps-api-2

我找不到有关如何在新的 Google Maps API v2 上拦截地图触摸的示例。

我需要知道用户何时触摸地图以停止线程（地图以我当前位置为中心）。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-26T16:11:17.793

@ape 在这里写了一个关于如何拦截地图点击的答案，但我需要拦截触摸，然后他在其答案的评论中建议了以下链接，[How to handle onTouch event for map in Google Map API v2?](https://stackoverflow.com/questions/13722869/how-to-handle-ontouch-event-for-map-in-google-map-api-v2) .

该解决方案似乎是一种可能的解决方法，但建议的代码不完整。出于这个原因，我重写并测试了它，现在它可以工作了。

这是工作代码：

我创建了 MySupportMapFragment.java 类

```
import com.google.android.gms.maps.SupportMapFragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class MySupportMapFragment extends SupportMapFragment {
    public View mOriginalContentView;
    public TouchableWrapper mTouchView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
        mOriginalContentView = super.onCreateView(inflater, parent, savedInstanceState);
        mTouchView = new TouchableWrapper(getActivity());
        mTouchView.addView(mOriginalContentView);
        return mTouchView;
    }

    @Override
    public View getView() {
        return mOriginalContentView;
    }
} 
```

我什至创建了 TouchableWrapper.java 类：

```
import android.content.Context;
import android.view.MotionEvent;
import android.widget.FrameLayout;

public class TouchableWrapper extends FrameLayout {

    public TouchableWrapper(Context context) {
        super(context);
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {

        switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN:
                  MainActivity.mMapIsTouched = true;
                  break;

            case MotionEvent.ACTION_UP:
                  MainActivity.mMapIsTouched = false;
                  break;
        }
        return super.dispatchTouchEvent(event);
    }
} 
```

在布局中，我这样声明：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/mapFragment"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_alignParentBottom="true"
          android:layout_below="@+id/buttonBar"
          class="com.myFactory.myApp.MySupportMapFragment"
/> 
```

只是为了在主要活动中进行测试，我只写了以下内容：

```
public class MainActivity extends FragmentActivity {
    public static boolean mMapIsTouched = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-03-18T08:26:16.820

这是根据用户选择获取位置的简单解决方案（单击地图上的选项）：

```
googleMap.setOnMapClickListener(new OnMapClickListener() {
  @Override
  public void onMapClick(LatLng arg0) {
    // TODO Auto-generated method stub
    Log.d("arg0", arg0.latitude + "-" + arg0.longitude);
  }
}); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-10-24T15:08:28.153

现在支持此功能以及更多功能:)

这是开发人员说明（问题 4636）：

2016 年 8 月的版本引入了一组新的摄像机变化侦听器，用于摄像机运动开始、正在进行和结束事件。您还可以查看相机移动的原因，无论是由用户手势、内置 API 动画还是开发人员控制的移动引起的。有关详细信息，请参阅相机更换事件指南： [https ://developers.google.com/maps/documentation/android-api/events#camera-change-events](https://developers.google.com/maps/documentation/android-api/events#camera-change-events)

另外，请参阅发行说明： [https ://developers.google.com/maps/documentation/android-api/releases#august_1_2016](https://developers.google.com/maps/documentation/android-api/releases#august_1_2016)

这是文档页面中的代码片段

```
public class MyCameraActivity extends FragmentActivity implements
        OnCameraMoveStartedListener,
        OnCameraMoveListener,
        OnCameraMoveCanceledListener,
        OnCameraIdleListener,
        OnMapReadyCallback {

    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_camera);

        SupportMapFragment mapFragment =
            (SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);
    }

    @Override
    public void onMapReady(GoogleMap map) {
        mMap = map;

        mMap.setOnCameraIdleListener(this);
        mMap.setOnCameraMoveStartedListener(this);
        mMap.setOnCameraMoveListener(this);
        mMap.setOnCameraMoveCanceledListener(this);

        // Show Sydney on the map.
        mMap.moveCamera(CameraUpdateFactory
                .newLatLngZoom(new LatLng(-33.87365, 151.20689), 10));
    }

    @Override
    public void onCameraMoveStarted(int reason) {

        if (reason == OnCameraMoveStartedListener.REASON_GESTURE) {
            Toast.makeText(this, "The user gestured on the map.",
                           Toast.LENGTH_SHORT).show();
        } else if (reason == OnCameraMoveStartedListener
                                .REASON_API_ANIMATION) {
            Toast.makeText(this, "The user tapped something on the map.",
                           Toast.LENGTH_SHORT).show();
        } else if (reason == OnCameraMoveStartedListener
                                .REASON_DEVELOPER_ANIMATION) {
            Toast.makeText(this, "The app moved the camera.",
                           Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void onCameraMove() {
        Toast.makeText(this, "The camera is moving.",
                       Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onCameraMoveCanceled() {
        Toast.makeText(this, "Camera movement canceled.",
                       Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onCameraIdle() {
        Toast.makeText(this, "The camera has stopped moving.",
                       Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-08-15T07:10:04.860

我在布局中的 MapFragment 之上创建了一个空的 FrameLayout。然后我在这个视图上设置了一个 onTouchListener，这样我就知道地图何时被触摸，但返回 false 以便将触摸传递给地图。

```
<FrameLayout
    android:id="@+id/map_touch_layer"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

mapTouchLayer.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Utils.logDebug(TAG, "Map touched!");
            timeLastTouched = System.currentTimeMillis();
            return false; // Pass on the touch to the map or shadow layer.
        }
    }); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-08-04T14:57:07.747

Gaucho 有一个很好的答案，看到许多赞成票，我认为可能需要另一种实现：

我需要它来**使用监听**器，这样我就可以对触摸做出反应，而不必经常检查它。

我将所有内容放在一个可以像这样使用的类中：

```
mapFragment.setNonConsumingTouchListener(new TouchSupportMapFragment.NonConsumingTouchListener() {
    @Override
    public void onTouch(MotionEvent motionEvent) {
        switch (motionEvent.getActionMasked()) {
            case MotionEvent.ACTION_DOWN:
                // map is touched
                break;
            case MotionEvent.ACTION_UP:
                // map touch ended
                break;
            default:
                break;
            // use more cases if needed, for example MotionEvent.ACTION_MOVE
        }
    }
}); 
```

其中 mapfragment 需要是 TouchSupportMapFragment 类型，并且在布局 xml 中需要这一行：

```
<fragment class="de.bjornson.maps.TouchSupportMapFragment"
... 
```

这是课程：

```
package de.bjornson.maps;

import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;

import com.google.android.gms.maps.SupportMapFragment;

public class TouchSupportMapFragment extends SupportMapFragment {
    public View mOriginalContentView;
    public TouchableWrapper mTouchView;
    private NonConsumingTouchListener mListener;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
        mOriginalContentView = super.onCreateView(inflater, parent, savedInstanceState);
        mTouchView = new TouchableWrapper(getActivity());
        mTouchView.addView(mOriginalContentView);
        return mTouchView;
    }

    @Override
    public View getView() {
        return mOriginalContentView;
    }

    public void setNonConsumingTouchListener(NonConsumingTouchListener listener) {
        mListener = listener;
    }

    public interface NonConsumingTouchListener {
        boolean onTouch(MotionEvent motionEvent);
    }

    public class TouchableWrapper extends FrameLayout {

        public TouchableWrapper(Context context) {
            super(context);
        }

        @Override
        public boolean dispatchTouchEvent(MotionEvent event) {
            if (mListener != null) {
                mListener.onTouch(event);
            }
            return super.dispatchTouchEvent(event);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-12-23T17:28:10.510

[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMapClickListener](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMapClickListener)

请参阅此链接。实现接口并填写`onMapClick()` 方法或任何您需要的方法并将其设置`onMapClickListener`为正确的实现。

```
public class YourActivity extends Activity implements OnMapClickListener {
    @Override
    protected void onCreate(Bundle icicle) { 
        super.onCreate(icicle);
        ...
        my_map.setOnMapClickListener(this)        
        ...
    }

    public void onMapClick (LatLng point) {
        // Do Something
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-11T10:08:59.670

```
 // Initializing
    markerPoints = new ArrayList<LatLng>();

    // Getting reference to SupportMapFragment of the activity_main
    SupportMapFragment sfm = (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);

    // Getting Map for the SupportMapFragment
    map = sfm.getMap();

    // Enable MyLocation Button in the Map
    map.setMyLocationEnabled(true);

    // Setting onclick event listener for the map
    map.setOnMapClickListener(new OnMapClickListener() {

        @Override
        public void onMapClick(LatLng point) {

            // Already two locations
            if(markerPoints.size()>1){
                markerPoints.clear();
                map.clear();
            }

            // Adding new item to the ArrayList
            markerPoints.add(point);

            // Creating MarkerOptions
            MarkerOptions options = new MarkerOptions();

            // Setting the position of the marker
            options.position(point);

            if(markerPoints.size()==1){
                options.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN));
            }else if(markerPoints.size()==2){
                options.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED));
            }

            // Add new marker to the Google Map Android API V2
            map.addMarker(options);

            // Checks, whether start and end locations are captured
            if(markerPoints.size() >= 2){
                LatLng origin = markerPoints.get(0);
                LatLng dest = markerPoints.get(1);

            //Do what ever you want with origin and dest
            }
        }
    }); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-09-21T10:13:22.763

我从接受的答案中汲取了这个想法，并通过转换为 Kotlin 并添加允许在标记中声明可触摸包装器的构造函数来改进它，并使用可设置的回调属性进行触摸检测以直接删除与允许的活动的耦合它更容易重复使用：

```
class TouchableWrapper : FrameLayout {

    constructor(context: Context) : this(context, null)
    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)
    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr)

    var onTouch: ((event :MotionEvent) -> Unit)? = null

    override fun dispatchTouchEvent(event: MotionEvent): Boolean {
        onTouch?.invoke(event)
        return super.dispatchTouchEvent(event)
    }
} 
```

然后在您的布局中：

```
 <com.yourpackage.views.TouchableWrapper
        android:id="@+id/viewMapWrapper"
        android:layout_height="match_parent"
        android:layout_width="match_parent">
        <fragment
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:id="@+id/map"
                  tools:context=".MapsActivity"
                  android:name="com.google.android.gms.maps.SupportMapFragment"/>
    </com.yourpackage.views.TouchableWrapper> 
```

然后像这样设置你的回调：

```
 findViewById<TouchableWrapper>(R.id.viewMapWrapper)
            .onTouch = {
            if (MotionEvent.ACTION_DOWN == it.action) {
                  //Handle touch down on the map
            }
        } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-14T18:46:57.807

对于[单声道](http://en.wikipedia.org/wiki/Mono_%28software%29)爱好者：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Util;
using Android.Views;
using Android.Widget;
using Android.Gms.Maps;

namespace apcurium.MK.Booking.Mobile.Client.Controls
{
    public class TouchableMap : SupportMapFragment
    {
        public View mOriginalContentView;

        public TouchableWrapper Surface;

        public override View OnCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState)
        {
            mOriginalContentView = base.OnCreateView(inflater, parent, savedInstanceState);
            Surface = new TouchableWrapper(Activity);
            Surface.AddView(mOriginalContentView);
            return Surface;
        }

        public override View View
        {
            get
            {
                return mOriginalContentView;
            }
        }
    }

    public class TouchableWrapper: FrameLayout {

        public event EventHandler<MotionEvent> Touched;

        public TouchableWrapper(Context context) :
        base(context)
        {
        }

        public TouchableWrapper(Context context, IAttributeSet attrs) :
        base(context, attrs)
        {
        }

        public TouchableWrapper(Context context, IAttributeSet attrs, int defStyle) :
        base(context, attrs, defStyle)
        {
        }

        public override bool DispatchTouchEvent(MotionEvent e)
        {
            if (this.Touched != null)
            {
                this.Touched(this, e);
            }

            return base.DispatchTouchEvent(e);
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-10T16:52:45.563

我有一个更简单的解决方案`TouchableWrapper`，它与最新版本的`play-services-maps:10.0.1`. 此解决方案仅使用地图事件，不使用自定义视图。不使用不推荐使用的功能，并且可能会支持多个版本。

首先，您需要一个标志变量来存储地图是由动画还是由用户输入移动（此代码假定每个不是由动画触发的相机移动都是由用户触发的）

```
GoogleMap googleMap;
boolean movedByApi = false; 
```

您的片段或活动必须实施`GoogleMap.OnMapReadyCallback`，`GoogleMap.CancelableCallback`

```
public class ActivityMap extends Activity implements OnMapReadyCallback, GoogleMap.CancelableCallback{
    ...
} 
```

这会迫使您实现方法`onMapReady`, `onFinish`, `onCancel`. 并且其中的 googleMap 对象`onMapReady`必须为相机移动设置一个事件监听器

```
@Override
public void onMapReady(GoogleMap mMap) {
    //instantiate the map
    googleMap = mMap;

    [...]  // <- set up your map

    googleMap.setOnCameraMoveListener(new GoogleMap.OnCameraMoveListener() {
        @Override
        public void onCameraMove() {
            if (movedByApi) {
                Toast.makeText(ActivityMap.this, "Moved by animation", Toast.LENGTH_SHORT).show();

                [...] // <-- do something whe you want to handle api camera movement
            } else {
                Toast.makeText(ActivityMap.this, "Moved by user", Toast.LENGTH_SHORT).show();

                [...] // <-- do something whe you want to handle user camera movement
            }
        }
    });
}
@Override
public void onFinish() {
    //is called when the animation is finished
    movedByApi = false;
}
@Override
public void onCancel() {
    //is called when the animation is canceled (the user drags the map or the api changes to a ne position)
    movedByApi = false;
} 
```

最后，如果您创建一个用于移动地图的通用函数会更好

```
public void moveMapPosition(CameraUpdate cu, boolean animated){
    //activate the flag notifying that the map is being moved by the api
    movedByApi = true;
    //if its not animated, just do instant move
    if (!animated) {
        googleMap.moveCamera(cu);
        //after the instant move, clear the flag
        movedByApi = false;
    }
    else
        //if its animated, animate the camera
        googleMap.animateCamera(cu, this);
} 
```

或者只是每次移动地图时，在动画之前激活标志

```
movedByApi = true;
googleMap.animateCamera(cu, this); 
```

我希望这有帮助！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-21T13:33:31.237

@Gaucho MySupportMapFragment 显然会被其他一些片段或活动使用（其中可能有比地图片段更多的视图元素）。那么如何将这个事件分派到下一个要使用它的片段。我们是否需要再次编写一个接口来做到这一点？

# bash - 在 2 个进程（第 2 个）之间使用的命名管道有什么问题？

> ID：14013003
> 
> 赞同：1
> 
> 时间：2012-12-23T17:23:43.863
> 
> 标签：bash, process, named-pipes

那么，让我们从头开始：2 个进程 1 个管道进行通信，对吧？不！因为通信被阻塞，一个等待另一个。我们需要通过不同渠道获得第二个过程的结果。虽然它看起来是多余的，但它不是。

让我们稍微改变一下：2 个进程 2 个管道，您可以将一个进程称为服务器，另一个进程称为客户端。一个管道将作业发送到客户端，另一个用于将结果从客户端收集到服务器。

为方便起见，我们使用用于读取的进程名称来调用每个管道，london 读取 london 管道，依此类推。这是管道和流程的示意图：

```
london ----writes madrid pipe-------->
london <----reads london pipe------  |
                                  ^  |
                                  |  |
madrid ----writes london pipe----->  v
madrid <----reads madrid pipe--------- 
```

让我们使用“伦敦”作为服务器，“马德里”作为客户端：服务器负责结束无限循环。

这是解决方案：

```
#!/bin/bash
shopt -u failglob
shopt -s extglob nullglob dotglob

DIR=$( cd "$( dirname "$0" )" && pwd )

function london (){
   local i message answer london madrid
   london=london_$RANDOM.$RANDOM.$RANDOM.$$
   madrid=madrid_$RANDOM.$RANDOM.$RANDOM.$$
   cd $DIR
   mkfifo $london
   mkfifo $madrid
   ( madrid $madrid $london ) &
   echo "parent id: $$, child id: $!"
   i=0
   #a mesterious situation: sometimes '3< $london' just breaks it (?!)
   exec 3<> $london
   exec 4> $madrid

   while true; do

      message="Greetings from London!($i)"
      echo "$message" >&4

      read -r answer <&3
      echo 'London says:> '"$answer" #>& /dev/stdout
      (( i++ ))

      if [[ i -gt 1 ]]; then
         echo 'quit' >&4
         break
      fi
   done

   wait
   cd "$DIR"
   rm -rf $london
   rm -rf $madrid
}

function madrid (){
   local i message answer madrid london
   madrid=$1
   london=$2
   cd $DIR
   i=0
   exec 3> $london
   exec 4< $madrid
   while true; do

      read -r answer <&4
      echo 'Madrid says:> '"$answer" #>& /dev/stdout

      message="Greetings from Madrid!($i)"
      echo "$message" >&3
      (( i++ ))

      if [[ $answer = 'quit' ]]; then
         break
      fi
   done
}

london 
```

在函数“伦敦”之前有一条评论

```
 exec 3<> $london 
```

如果你把它改成

```
 exec 3< $london 
```

正如它应该（！）那样，我面临着我的程序反复停止的情况！在从 <> 到 < 进行一些更改后，反之亦然，问题消除了，我无法重现它！我使用的是 Ubuntu 系统，所以如果有人可以用他/她的系统测试该程序并发表一些评论，它将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T09:20:28.643

这里程序只有在后台启动时才会停止，因为 tty 输出。当您可以重现问题时，您应该附加`strace`到第一个过程。

# python-2.7 - QMessageBox 导致段错误

> ID：14013004
> 
> 赞同：-1
> 
> 时间：2012-12-23T17:23:46.173
> 
> 标签：python-2.7, segmentation-fault, pyqt4

我使用 Qt 设计器绘制了一个简单的 GUI（基本上是表单中的一个按钮 - 实际上，我注意到这发生在一个更复杂的应用程序中，因此我将其简化为触发问题的最小情况）并编写了以下 Python 代码：

```
from PyQt4 import QtCore, QtGui, Qt
from ui_main import Ui_MainWindow

class MainWindow(QtGui.QMainWindow):

    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.process = QtCore.QProcess()

        self.ui = Ui_MainWindow() 
        self.ui.setupUi(self)

@QtCore.pyqtSignature("") 
def on_pushButtonTest_clicked(self, checked=False):
    QtGui.QMessageBox.information(self,'test','test')

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mw = MainWindow()
    mw.show()
    sys.exit(app.exec_()) 
```

然后，当我单击 pushButtonTest 时，我得到一个段错误。运行在`gdb`我得到这个回溯：

```
#0  0x00007ffff7ade785 in do_warn () from /usr/lib/libpython2.7.so.1.0
#1  0x00007ffff7adec4c in PyErr_WarnEx () from /usr/lib/libpython2.7.so.1.0
#2  0x00007fffe563f3b5 in ?? () from /usr/lib/python2.7/site-packages/gobject/_gobject.so
#3  0x00007fffe5b0ca00 in g_logv () from /usr/lib/libglib-2.0.so.0
#4  0x00007fffe5b0cbf2 in g_log () from /usr/lib/libglib-2.0.so.0
#5  0x00007fffe4c67a52 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#6  0x00007fffe4c69419 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#7  0x00007fffe4c69891 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#8  0x00007fffe4c6a332 in gtk_icon_theme_lookup_icon () from /usr/lib/libgtk-x11-2.0.so.0
#9  0x00007fffe4c6ae14 in gtk_icon_theme_load_icon () from /usr/lib/libgtk-x11-2.0.so.0
#10 0x00007fffe4c66311 in gtk_icon_set_render_icon () from /usr/lib/libgtk-x11-2.0.so.0
#11 0x00007fffd980e469 in ?? () from /usr/lib/libQtGui.so.4
#12 0x00007fffd980d279 in QGtkStyle::standardIconImplementation(QStyle::StandardPixmap, QStyleOption const*, QWidget const*) const () from /usr/lib/libQtGui.so.4
#13 0x00007fffd9af690f in ?? () from /usr/lib/libQtGui.so.4
#14 0x00007fffdacc15b7 in QMetaMethod::invoke(QObject*, Qt::ConnectionType, QGenericReturnArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument) const () from /usr/lib/libQtCore.so.4
#15 0x00007fffdacc398c in QMetaObject::invokeMethod(QObject*, char const*, Qt::ConnectionType, QGenericReturnArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument) () from /usr/lib/libQtCore.so.4
#16 0x00007fffd978450d in QStyle::standardIcon(QStyle::StandardPixmap, QStyleOption const*, QWidget const*) const () from /usr/lib/libQtGui.so.4
#17 0x00007fffd996575f in ?? () from /usr/lib/libQtGui.so.4
#18 0x00007fffd9965847 in QMessageBox::setIcon(QMessageBox::Icon) () from /usr/lib/libQtGui.so.4
#19 0x00007fffd9966cd3 in QMessageBox::QMessageBox(QMessageBox::Icon, QString const&, QString const&, QFlags<QMessageBox::StandardButton>, QWidget*, QFlags<Qt::WindowType>) () from /usr/lib/libQtGui.so.4
#20 0x00007fffd9966f03 in ?? () from /usr/lib/libQtGui.so.4
#21 0x00007fffd996710f in QMessageBox::information(QWidget*, QString const&, QString const&, QFlags<QMessageBox::StandardButton>, QMessageBox::StandardButton) () from /usr/lib/libQtGui.so.4
#22 0x00007fffda2dc8a6 in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtGui.so
#23 0x00007ffff7afe05a in PyEval_EvalFrameEx () from /usr/lib/libpython2.7.so.1.0
#24 0x00007ffff7afeedd in PyEval_EvalCodeEx () from /usr/lib/libpython2.7.so.1.0
#25 0x00007ffff7a8f536 in function_call () from /usr/lib/libpython2.7.so.1.0
#26 0x00007ffff7a6b8be in PyObject_Call () from /usr/lib/libpython2.7.so.1.0
#27 0x00007ffff7a79e78 in instancemethod_call () from /usr/lib/libpython2.7.so.1.0
#28 0x00007ffff7a6b8be in PyObject_Call () from /usr/lib/libpython2.7.so.1.0
#29 0x00007ffff7af8577 in PyEval_CallObjectWithKeywords () from /usr/lib/libpython2.7.so.1.0
#30 0x00007fffda9375b0 in ?? () from /usr/lib/python2.7/site-packages/sip.so
#31 0x00007fffdb208c96 in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtCore.so
#32 0x00007fffdb208fe0 in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtCore.so
#33 0x00007fffdb209061 in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtCore.so
#34 0x00007fffdacced53 in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/libQtCore.so.4
#35 0x00007fffd9af7512 in QAbstractButton::clicked(bool) () from /usr/lib/libQtGui.so.4
#36 0x00007fffd984be7e in ?? () from /usr/lib/libQtGui.so.4
#37 0x00007fffd984c6b0 in ?? () from /usr/lib/libQtGui.so.4
#38 0x00007fffd984c91c in QAbstractButton::mouseReleaseEvent(QMouseEvent*) () from /usr/lib/libQtGui.so.4
#39 0x00007fffda47161b in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtGui.so
#40 0x00007fffd94e1a49 in QWidget::event(QEvent*) () from /usr/lib/libQtGui.so.4
#41 0x00007fffda471bbb in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtGui.so
#42 0x00007fffd949218c in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/libQtGui.so.4
#43 0x00007fffd9496e6b in QApplication::notify(QObject*, QEvent*) () from /usr/lib/libQtGui.so.4
#44 0x00007fffda48bcde in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtGui.so
#45 0x00007fffdacb96ae in QCoreApplication::notifyInternal(QObject*, QEvent*) () from /usr/lib/libQtCore.so.4
#46 0x00007fffd9492fcb in QApplicationPrivate::sendMouseEvent(QWidget*, QMouseEvent*, QWidget*, QWidget*, QWidget**, QPointer<QWidget>&, bool) () from /usr/lib/libQtGui.so.4
#47 0x00007fffd950dad4 in ?? () from /usr/lib/libQtGui.so.4
#48 0x00007fffd950c861 in QApplication::x11ProcessEvent(_XEvent*) () from /usr/lib/libQtGui.so.4
#49 0x00007fffd9532a22 in ?? () from /usr/lib/libQtGui.so.4
#50 0x00007fffe5b05845 in g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0
#51 0x00007fffe5b05b78 in ?? () from /usr/lib/libglib-2.0.so.0
#52 0x00007fffe5b05c34 in g_main_context_iteration () from /usr/lib/libglib-2.0.so.0
#53 0x00007fffdace7b66 in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQtCore.so.4
#54 0x00007fffd953269e in ?? () from /usr/lib/libQtGui.so.4
#55 0x00007fffdacb83ff in QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQtCore.so.4
#56 0x00007fffdacb8688 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQtCore.so.4
#57 0x00007fffdacbd328 in QCoreApplication::exec() () from /usr/lib/libQtCore.so.4
#58 0x00007fffda48a91b in ?? () from /usr/lib/python2.7/site-packages/PyQt4/QtGui.so
#59 0x00007ffff7afe05a in PyEval_EvalFrameEx () from /usr/lib/libpython2.7.so.1.0
#60 0x00007ffff7afeedd in PyEval_EvalCodeEx () from /usr/lib/libpython2.7.so.1.0
#61 0x00007ffff7afefb2 in PyEval_EvalCode () from /usr/lib/libpython2.7.so.1.0
#62 0x00007ffff7b17eea in run_mod () from /usr/lib/libpython2.7.so.1.0
#63 0x00007ffff7b18ce2 in PyRun_FileExFlags () from /usr/lib/libpython2.7.so.1.0
#64 0x00007ffff7b196fb in PyRun_SimpleFileExFlags () from /usr/lib/libpython2.7.so.1.0
#65 0x00007ffff7b2a9f2 in Py_Main () from /usr/lib/libpython2.7.so.1.0
#66 0x00007ffff7480725 in __libc_start_main () from /usr/lib/libc.so.6
#67 0x0000000000400741 in _start () 
```

为什么我会收到这个段错误，我该如何解决这个问题？

我在 Arch Linux 上使用 Qt 4.8.4 和 Python 2.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:28:09.403

堆栈跟踪上的那些行泄露了它并显示了此段错误的（非常意外的）原因：

```
#8  0x00007fffe4c6a332 in gtk_icon_theme_lookup_icon () from /usr/lib/libgtk-x11-2.0.so.0
#9  0x00007fffe4c6ae14 in gtk_icon_theme_load_icon () from /usr/lib/libgtk-x11-2.0.so.0
#10 0x00007fffe4c66311 in gtk_icon_set_render_icon () from /usr/lib/libgtk-x11-2.0.so.0
#18 0x00007fffd9965847 in QMessageBox::setIcon(QMessageBox::Icon) () from /usr/lib/libQtGui.so.4 
```

显然我的 GTK 图标主题坏了；将其更改为其他工作。

# html - Doctype 改变表格的高度

> ID：14013005
> 
> 赞同：-1
> 
> 时间：2012-12-23T17:23:55.617
> 
> 标签：html, css, html-table

我需要添加 doctype strict 否则 IE 无法正常工作，它会改变 td 和 tr 标签的高度。我尝试了这里建议的几件事，但我认为我在阅读时错过了一些东西，因为我真的很累。尝试了 w3.org 验证器，没有报告任何问题。如果您能指出我做错了什么并给我一些好的网站来查看编码 CSS 的正确方式而不是古怪的方式，我将不胜感激，这里是网站[http://pvpgn.freeiz.com/lagabuse/stats.php](http://pvpgn.freeiz.com/lagabuse/stats.php) 和CSS [http://pvpgn.freeiz.com/lagabuse/stats.css](http://pvpgn.freeiz.com/lagabuse/stats.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:49:03.770

### 将此添加到您的`stat.css`：

```
p {margin: 0;} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T18:18:51.040

```
.tr td, .tr2 td {
 font-size: 18px;
 height: 25px;} 
```

# macos - 如何找到位置 X 和 Y（图像、区域）

> ID：14013006
> 
> 赞同：0
> 
> 时间：2012-12-23T17:23:55.737
> 
> 标签：macos, html, css, sprite

我目前正在为图像创建精灵。如何找到图像上的 X 和 Y 位置。

有没有这样的程序？（MAC）因为我需要它来创建区域标签。

再次感谢你的帮助

例如 background:url('img_navsprites.gif') -47px 0;

我怎样才能通过某种程序获得-47px 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:17:39.027

你想要那样的东西吗？

[精灵垫](http://spritepad.wearekiss.com/)

# asp.net - ASP.NET MVC 多浏览器兼容性问题？

> ID：14013008
> 
> 赞同：0
> 
> 时间：2012-12-23T17:24:08.703
> 
> 标签：asp.net, html, asp.net-mvc, cross-browser

ASP.NET MVC4 是否与多浏览器兼容性限制有关？

换句话说：ASP.NET MVC 引擎还生成显示客户端的 HTML 服务器端（对吗？？），它是生成“非多浏览器兼容”的 HTML 标记还是这两个东西彼此无关?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:40:11.787

ASP.NET MVC 框架本身不会生成 HTML，它使用视图引擎来创建 HTML，例如：RAZOR、ASPX、SPARK 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:08:03.550

不，asp.net MVC 不会神奇地生成任何 html。它呈现在您放置在视图中的任何位置。

您必须将代码编写为“多浏览器兼容”。

# ruby-on-rails-3 - Ruby on Rails 资产重新编译

> ID：14013010
> 
> 赞同：1
> 
> 时间：2012-12-23T17:24:13.553
> 
> 标签：ruby-on-rails-3

使用 ruby​​ on rails 应用程序，是否需要完全重新编译资产？还是 RoR 足够聪明，可以挑选出没有变化的资产？

即）如果我在 100 个 js 文件中更改了 1 个 js 文件，有没有办法重新编译 1 个 js 文件？还是我必须等待 100 个 js 文件被压缩？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:35:34.207

Rails 目前还没有区分修改后的资产和未修改的资产。但是，您可以为此目的安装[turbo-sprockets-rails3 gem。](https://github.com/ndbroadbent/turbo-sprockets-rails3)

# java - 提高解析文本文件的性能

> ID：14013011
> 
> 赞同：0
> 
> 时间：2012-12-23T17:24:19.783
> 
> 标签：java, parsing, text

首先，对不起我的英语和信息的长度。

我正在用 Java 编写一个简单的应用程序，用于学校项目的视觉密码学，该项目采用模式文件和秘密图像，然后使用模式中包含的信息创建 n 个图像。

对于秘密图像中的每个像素，应用程序在模式文件中查找一个矩阵，并在 n 个共享中写入 m 个像素（每个共享一行）。

模式文件包含编码所需的每种颜色的矩阵 (n*m)，其组成如下

COLLECTION COLOR 1
START MATRIX 1
RGB
GBR
BGR
END
START MATRIX 2
.....
COLLECTION COLOR 2
START MATRIX 1
XXX
XXX
XXX
END
......
//

该文件可能只有几行或数千行，因此我无法将矩阵保存在应用程序中，但我需要始终读取该文件。

为了测试性能，我创建了一个解析器，它只需逐行搜索矩阵，但它非常慢。

我想我会保存每个矩阵的行号，然后使用 RandomAccessFile 读取它，但我想知道是否有更强大的方法来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:15:48.550

如果您真正处理的大量输入文件超出了您将整个内容加载到 RAM 中的能力，那么使用像[MapDB](https://github.com/jankotek/MapDB)这样的持久键/值存储可能是一种简单的方法。解析文件一次并构建有效的 [Collection+Color]->Matrix 映射。将其存储在持久 HTree 中。这将为您处理所有缓存等。确保为 Collection+Color 元组创建一个好的散列函数，它应该非常高效。

如果您的数据访问模式倾向于聚集在一起，那么将其存储在 B+Tree 索引中可能会更快——您可以尝试一下，看看什么最有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:31:24.683

对于您的架构文件，使用 a`FileChannel`并调用`.map()`它。只需稍加努力，您就可以计算文件映射表示的必要偏移量并使用它，甚至可以将此映射封装到自定义结构中。

# html - 在JSF中调用HTML5文件时如何激活phaselistener

> ID：14013012
> 
> 赞同：0
> 
> 时间：2012-12-23T17:24:39.437
> 
> 标签：html, jsf-2, unauthorized, phaselistener

`PhaseListener`我在 JSF 项目中定义了一个。`*.xhtml`在浏览器中调用文件时它正在工作。`*.html5`但是在浏览器中调用文件时它不起作用。我能做到`phaseListener`吗？

如果我不能进行此项检查，我能做什么来代替`phaseListener`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:42:28.043

请改用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。

这是一个基本的启动示例：

```
@WebFilter("*.html5")
public class MyFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        // Perform here some code before processing the request.
        // ...

        chain.doFilter(req, res);

        // Perform here some code after processing the request.
        // ...
    }

} 
```

# html - Sticky Div 需要被吃掉

> ID：14013016
> 
> 赞同：0
> 
> 时间：2012-12-23T17:25:14.380
> 
> 标签：html, css

我有个问题。我正在创建一个由页眉、正文和页脚组成的单栏网站。在重新调整大小期间，我可以让页脚粘在页面底部，但是我的问题是这个。如何在重新调整大小而不是将其向上推时让窗口“吃掉”页脚 div？一个很好的例子是 ign.com

```
* {
margin: 0;
}
body
{
height: 100%;
background-image: url("..");
}
html
{
height: 100%;
}
.wrapper
{
width: 950px;
min-width: 950px;
min-height: 100%;
height: auto
height: 100%;
margin: 0 auto -4em;
border: 2px solid black;
}
.footer, .push
{
height: 4em;
border: 2px solid black;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:31:32.940

您要求的是块元素的默认行为。

例子：

**HTML：**

```
​&lt;header></header>
<div></div>
<footer></footer>​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：**

```
​header, footer {
    height: 5em;
}

div {
    height: 100em;
} 
```

[演示](http://jsfiddle.net/d5txs/)

我的建议是向您的页面添加更多内容，或者为包装器设置更大的最小高度。

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:43:21.370

将以下代码添加到页脚并为 html 文档设置一定的最小高度。

```
.footer {
margin:1% 0;
} 
```

# css - CSS 在 Internet Explorer 中不起作用：缺少边框 img 和带有锚标签的导航（但在 Firefox 中有效）

> ID：14013020
> 
> 赞同：1
> 
> 时间：2012-12-23T17:26:00.437
> 
> 标签：css, html, internet-explorer, markup

我以为我已经完成了为我妈妈的遛狗业务创建的这个网站的标记，但后来我意识到我的 CSS 仅部分应用于我在 Internet Explorer 中的网站。这很奇怪，因为我的 CSS 中的正文背景图像显示，但我的导航图像和导航的锚标记不显示，并且我的 div 的边框在 IE 中丢失。在 Firefox 中一切正常。

即填充和边距也很疯狂。

我从人们那里读到，ie 通常对 margin-left margin-right padding-left 和 paddin-top- 这样的东西不太友好。它通常更喜欢例如 padding: 20px; 或边距：30px；但我不知道那是不是我做错了。我看不出这会使我的边框和导航图像在 ie 中消失。非常令人沮丧。

网址是[www.grinningpup.com/dannytesting/grinningpup.com/index.html](http://www.grinningpup.com/dannytesting/grinningpup.com/index.html)

我尝试编写语义标记。我希望解决方案不是由于我犯的愚蠢错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:34:31.863

您正在使用 HTML5，IE8 及以下版本无法正确解释。
您需要包含[html5shiv](http://code.google.com/p/html5shiv/)并将以下内容添加到您的 css 中：

```
 article, aside, figure, footer, header, hgroup,
 menu, nav, section { display: block; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:34:55.887

欢迎来到 SO！

我快速浏览了您的网站，发现问题是您使用了旧版本 IE 不支持的 HTML 5 元素。

最简单的解决方法是添加[Modernizr](http://modernizr.com/)，这是一个旨在检测浏览器支持的 JavaScript 库~~，并且在大多数情况下，填充它们~~（仅在这种情况下）。关于这个主题有很多资源。我最喜欢的是这个；[http://diveinto.html5doctor.com/](http://diveinto.html5doctor.com/)但只需谷歌并检查 SO 以获取更多信息。

我希望这可以帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:52:32.887

## ***HTML "nav" 标签和 "section" 标签不支持 IE 8 和更早的版本。因此，您只需使用“div”标签即可解决所有问题。***

# javascript - 如何使用 Dino 和 Sinatra 显示传感器输出？

> ID：14013021
> 
> 赞同：7
> 
> 时间：2012-12-23T17:26:09.310
> 
> 标签：javascript, ruby, asynchronous, sinatra, arduino

我想在我的页面上显示连接到 Arduino 的传感器（水分）之一的输出。

按照脚本，每秒钟给我一些值（数字）。

```
require 'dino'

board = Dino::Board.new(Dino::TxRx.new)
sensor = Dino::Components::Sensor.new(pin: 'A0', board: board)

on_data = Proc.new do |data|
  puts data
  sleep 1
end

sensor.when_data_received(on_data)

sleep 
```

我想我可以`Sinatra`用作 API 和`Javascript`脚本来显示异步输出。

所以这应该是这样的

```
%w(sinatra dino haml).each do |lib|
  require lib
end

board = Dino::Board.new(Dino::TxRx.new)
sensor = Dino::Components::Sensor.new(pin: 'A0', board: board)
sleep 1

get '/' do
  haml :index
end

get '/moisture' do
  on_data = Proc.new do |data|
    { moisture_value: data }
    sleep 1
  end

  sensor.when_data_received(on_data)
end 
```

你能给我一些提示或简单的好模式我应该如何处理？

我找到了示例 sinatra 应用程序 fo 迪诺：[https ://github.com/austinbv/dino_cannon](https://github.com/austinbv/dino_cannon)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:50:59.483

您将需要使用某种数据存储支持异步数据读取：数据库、文件存储或内存存储。最好将您的传感器读取代码抽象到一个单独的类中，并具有定义良好的 API 来读取该数据。我建议将 MoistureSensor 类放入一个单独的文件中，并在您的服务器文件中要求它。此外，我将内存存储中的数据点数限制为 1000。尝试以下操作：

```
%w(json sinatra dino haml).each do |lib|
  require lib
end

class MoistureSensor
  require 'dino'
  board = Dino::Board.new(Dino::TxRx.new)
  sensor = Dino::Components::Sensor.new(pin: 'A0', board: board)
  @@data = []
  on_data = Proc.new do |data|
    @@data.shift if @@data.length > 1000
    @@data << data
    sleep 1
  end
  sensor.when_data_received(on_data)

  def self.data
    @@data
  end

  def self.last_entry
    @@data.last
  end
end

get '/' do
  haml :index
end

get '/moisture.json' do
  content_type :json
  { moisture_value: MoistureSensor.last_entry }.to_json
end 
```

# php - 数据库连接的类变量

> ID：14013023
> 
> 赞同：1
> 
> 时间：2012-12-23T17:26:11.610
> 
> 标签：php, database, pdo

我只是想知道，对于将保存在数据库连接中使用的信息的类变量，是否应该考虑任何因素？

基本上，我应该在将保存数据库信息的变量前面使用 public 关键字还是会产生安全问题？你做什么工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:34:38.447

总而言之，这并不*重要*，只要变量不是静态的，就创建该类的新实例（和多个连接）而言没有区别。

不过，总的来说，我必须说将实际连接分配给`private`or`protected`属性可能是个好主意，并在需要时添加公共`geConnection()`成员函数。
这样做的原因很简单：对象应​​该以可以重用的方式编写。如果您的代码将由对数据库不太了解的人使用，您的类可以（并且应该）使该人不必处理该用户可能不熟悉的所有抽象内容。
因此，按道理，您的类隐藏了实际连接，因此其他代码无法直接与 db 连接进行交互。

简而言之：虽然将连接分配给公共属性并没有真正对外部世界的安全性产生影响，但它确实使您的代码更容易出错，以防同事使用它并无意中分配了一个数组/对象持有数据库连接的属性...

# c# - mvc3控制器方法中的ajax发布数据为空

> ID：14013024
> 
> 赞同：1
> 
> 时间：2012-12-23T17:26:25.253
> 
> 标签：c#, jquery, .net, ajax, asp.net-mvc-3

我的一个 jquery ajax 帖子将发布数据发送到我的 .NET MVC3 控制器方法，但在控制器方法中，数据显示为空。我有许多其他 ajax 帖子使用几乎相同的方法体，并且它们都工作正常，所以我不确定发生了什么。

阿贾克斯帖子：

```
$.ajax({
    url: '/Entity/Relate',
    type: 'POST',
    dataType: 'json',
    contentType: 'applicaiton/json; charset=utf-8',
    data: { primaryEntityId: parseInt(entityParentId, 10), relatedEntityId: _createdId },
    success: function (data)
    {
        //do stuff
    },
    error: function ()
    {
        // throw error
    },
    complete: function ()
    {
        //do more stuff
    }
}); 
```

控制器方法：

```
[HttpPost]
public int Relate(int primaryEntityId, int relatedEntityId)
{
    return relationshipRepository.Add(primaryEntityId, relatedEntityId);
} 
```

问题是当我中断 Relate 方法时，primaryEntityId 和 relatedEntityId 为空，即使在 Firebug 中的发布数据中，它显示 {primaryEntityId: 13, relatedEntityId: 486} 已发布到该方法。

关于为什么帖子看起来不错但控制器没有获取数据的任何建议或想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:32:15.737

> 但在控制器方法中，数据显示为 null

这是不可能的，因为`Int32`.NET 中的值类型和值类型不能是`null`. 您可能意味着将它们分配给默认值。反正。

该问题与`contentType`您在 AJAX 请求中设置的参数有关。您需要删除它，因为您发送的不是 JSON 而是标准`application/x-www-form-urlencoded`请求：

```
$.ajax({
    url: '/Entity/Relate',
    type: 'POST',
    dataType: 'json',
    data: { 
        primaryEntityId: parseInt(entityParentId, 10), 
        relatedEntityId: _createdId 
    },
    success: function (data)
    {
        //do stuff
    },
    error: function ()
    {
        // throw error
    },
    complete: function ()
    {
        //do more stuff
    }
}); 
```

* * *

如果要发送 JSON 请求，请定义视图模型：

```
public class RelateViewModel
{
    public int PrimaryEntityId { get; set; }
    public int RelatedEntityId { get; set; }
} 
```

然后让您的控制器将此视图模型作为参数：

```
[HttpPost]
public int Relate(RelateViewModel model)
{
    return relationshipRepository.Add(model.PrimaryEntityId, model.RelatedEntityId);
} 
```

最后发送一个真正的 JSON 请求（使用[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)方法）：

```
$.ajax({
    url: '/Entity/Relate',
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json;charset=utf-8',
    data: JSON.stringify({ 
        primaryEntityId: parseInt(entityParentId, 10), 
        relatedEntityId: _createdId 
    }),
    success: function (data)
    {
        //do stuff
    },
    error: function ()
    {
        // throw error
    },
    complete: function ()
    {
        //do more stuff
    }
}); 
```

# c++ - C ++“删除”具有引用的对象

> ID：14013025
> 
> 赞同：2
> 
> 时间：2012-12-23T17:26:35.420
> 
> 标签：c++

当我尝试以下代码时，似乎“删除”（C++ 中的空闲内存）不起作用......好吧，我知道该引用不适合“引用稍后将被释放的对象”。我只是在玩代码..

```
class A{
public:
    int val;
    A(int val_=0):val(val_){}
};

A* ptrA = new A(10);
A &refA = *ptrA;
printf("%d\n", refA.val);
delete ptrA;
refA.val = 100;
printf("%d\n", refA.val); 
```

输出为：10 100

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T17:29:38.927

它*确实*有效，并且您所做的一切都会`refA`导致未定义的行为，即，就标准而言，任何事情都可能发生，包括“它似乎有效”。

在实践中，目前它似乎可以工作，因为该内存还没有被重用，但是等待一些分配，你会发现你将覆盖其他不相关的对象。

请记住，当您进入“未定义行为”时，如果幸运的话，您会遇到崩溃或断言失败；通常，您会遇到奇怪的、不可重现的错误，这些错误偶尔会让您发疯。

> 好吧，我知道引用不适合“引用稍后将被释放的对象”。我只是在玩代码..

引用将被释放的东西并没有什么不好……重要的是，它必须在引用超出范围*后被释放。*例如，在这种情况下它非常好：

```
A* ptrA = new A(10);
{
    A &refA = *ptrA;
    std::cout<<refA.val<<"\n";
}
delete ptrA; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:31:43.577

> 好吧，我知道引用不适合“引用稍后将被释放的对象”

Actually it appears you don't quite understand that yet. When people say this, it does not mean that if you try to do it, an error or similar will occur. It means that all bets are off and anything can happen. "Anything" includes the behaviour you observed.

This is why you should not do it: you have no guarantee whatsoever about what may happen, so it basically amounts to programming by gambling.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T17:34:19.417

The object is deleted and your code results in an undefined behavior. In your specific case it outputs what you want, but that shall not work and will not work in general case.

# plugins - WordPress 3.5 更改了 User.php 哪个中断插件，这个功能可能是问题吗？可以修复吗？

> ID：14013031
> 
> 赞同：1
> 
> 时间：2012-12-23T17:27:51.703
> 
> 标签：plugins, login, wordpress, wordpress-3.5

插件为 WordPress 多站点网络提供登录。该插件现在在 WP 3.5 下失败，因为 user.php 文件已更改。/wp-includes/user.php 中的旧行可以重新添加，插件就可以工作了。显然，这不是一个长期的解决方案。

这是来自 user.php 的旧代码

```
if ( empty( $user ) )
    $user = wp_get_current_user();
else
    $user = new WP_User( $user );

if ( ! isset( $user->ID ) )
    return false; 
```

这是 3.5 的新代码

```
if ( empty( $user ) )
    $user = get_current_user_id();

if ( ! $user = get_userdata( $user ) )
    return false; 
```

我是一个尝试学习 php 的初学者，所以我不确定所有的含义。但是，我认为这是导致问题的插件中的代码：

函数 get_userdata( $user_id ) { 全局 $wpdb;

```
if ( ! is_numeric( $user_id ) )
    return false;

$user_id = absint( $user_id );
if ( ! $user_id )
    return false;

$user = wp_cache_get( $user_id, 'users' ); //check to see if the cache object already has the user

if ( $user )
{
    return $user; //it was in the cache
}

    $user = new StdClass ();    

global $XF;
XF_User_Data::fillUserData($XF->visitor, $user, $user_id);

update_user_caches($user);

return $user; 
```

}

新的 StdClass 可以被注释掉，错误被删除，但是没有人可以登录。

我怎样才能重新编写此函数以不导致错误？

*致命错误：调用未定义的方法 stdClass::has_prop() /wp-includes/user.php*

该插件的开发人员正在“休假”，尚未更新。他正在等待其他一些更改，但是，这需要修复。

有关修复代码的任何建议？我找错地方了吗？在有人可以提供帮助之前是否需要其他详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:47:45.030

即使您是熟练的 PHP 程序员，修改 WP 核心或任何插件脚本也确实是个坏主意。在我看来，您应该降级到以前的版本并等待插件的更新。检查此[链接](https://stackoverflow.com/questions/13925312/upgrading-to-worpdress-3-5-erased-all-posts-and-pages-wiped-database/13927355#13927355)以轻松完成。事实上，许多插件在 3.5 版本中都存在问题，包括流行的 CKEditor，但它们正在更新，在这种情况下，等待似乎是最好的选择。在尝试另一个更新之前，请确保所有插件都与 3.5 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:03:47.417

如果您发布您正在使用的插件以及下载链接，我会查看它并查看问题所在。

# c - 将 char 分配给 int

> ID：14013032
> 
> 赞同：1
> 
> 时间：2012-12-23T17:27:53.033
> 
> 标签：c, arrays, for-loop, multidimensional-array, poker

我正在制作扑克游戏，并且我具有随机播放功能（基于[此处](https://stackoverflow.com/questions/14010916/create-random-numbers)的其他答案）。现在我的问题是，如何将卡片的名称分配给数组的每个数字，例如我想要**cartas[3] = "J spades"**。

我认为是二维数组，但我认为它们不能有两种不同类型的数据。我希望有一个人可以帮助我。

```
/* This is the array, cartas is cards in spanish */
for(i = 0 ; i < 52 ; i++) {
    cartas[i] = i;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:40:22.013

在需要时查找或生成卡的名称 - 无需将其与索引一起存储：

```
char buffer[32];
int cnum = card % 13;
const char* suits[]={"diamonds", "spades", "clubs", "hearts"};
switch(cnum)
{
    case 0:
        strcpy(buffer, "ace");
        break;
    case 10:
        strcpy(buffer, "jack");
        break;
    case 11:
        strcpy(buffer, "queen");
        break;
    case 12:
        strcpy(buffer, "king");
        break;
    default:
        sprintf(buffer,"%d",cnum+1);
        break;
}
strcat(buffer," of ");
strcat(buffer,suits[card / 13]); 
```

# php - 创建 JSON 数据并将其从 PHP 发送到 JavaScript

> ID：14013034
> 
> 赞同：-1
> 
> 时间：2012-12-23T17:27:59.463
> 
> 标签：php, javascript, mysql, json, pdo

在这段代码中，我试图搜索一个包含两列的数据库，根据其中一个匹配项检索其中的 11 对（公司名称；这是使用 POST 从 JavaScript 发送的）。然后我正在尝试创建一个 JSON 数据。

```
<?php
header("Content-Type: application/json");
$db = new PDO('mysql:host=localhost;dbname=pl;charset=UTF-8', 'user', 'password');
if(isset($_POST['companyname']) == true && empty($_POST['companyname']) == false) {

    $searchterm = $_POST['companyname'];
    $i=0;
    $jasondata = '{';

    $query = $db->query("SELECT companyname, axiscategory FROM axispl WHERE companyname LIKE '$searchterm%' LIMIT 11");
    $c = 1;
    while (($row=$query->fetchAll(PDO::FETCH_ASSOC)) !==false && $c<11) {
        $i++;
        $companyname = $row["companyname"];
        $axiscategory = $row["axiscategory"];
        $jasondata .='"combi'.$i.'":{"companyname":"'.$companyname.'","axiscategory":"'.$axiscategory.'"},';
        $n=$row['companyname'];
        $l=strlen($n);
        if($l>50){$c = $c+2;}else{$c = $c+1;}       

    }
    $jasondata = chop($jasondata, ",");
    $jasondata .= '}';
    echo $jasondata;

}   
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:39:29.400

你应该改变什么？好吧，我之前提到过使用`json_encode`，Charles 非常正确地指出了安全漏洞。

我也会处理代码格式 - 我的建议是在合理的范围内工作。由于历史原因，这曾经是 80 个字符，但现在 100-120 是一个很好的限制 - 这意味着您可以在屏幕上从左到右堆叠多个代码查看器，而无需在每个代码查看器中水平滚动。您可以类似地发布到 StackOverflow，而不会出现包装问题！

考虑一下你的这个片段：

```
$query = $db->query("
    SELECT
        companyname, axiscategory
    FROM
        axispl
    WHERE
        companyname LIKE '$searchterm%'
    LIMIT 11
"); 
```

还：

```
$db = new PDO(
    'mysql:host=localhost;dbname=pl;charset=UTF-8',
    'user',
    'password'
); 
```

更具可读性，是吗？我的座右铭：给你的代码空间来*呼吸*。

# java - Xuggler 生成错误消息

> ID：14013035
> 
> 赞同：0
> 
> 时间：2012-12-23T17:28:02.967
> 
> 标签：java, eclipse, dependencies, xuggle, xuggler

我正在创建我的第一个 Xuggler 媒体应用程序。我通过观看他们关于如何创建第一个媒体应用程序的视频进行编码。

## 代码

```
package demo;

import com.xuggle.xuggler.IContainer;

public class GetContainerInfo {
    public static void main(String[] args) {
        if(args.length!=1){
            throw new IllegalArgumentException("no file");
        }
        IContainer container = IContainer.make();
        if(container.open(args[0],IContainer.Type.READ,null)<0){
            throw new IllegalArgumentException("could not open");
        }
    }
} 
```

## 错误

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

## 我有依赖吗？

是的，我愿意！我有所有的依赖项。我在创建项目时导入了它们。
图片：
![在此处输入图像描述](../Images/e6537bb8308e38b26837a2d7b92d390b.png)

# 是什么导致了该错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:36:48.980

来自[SLF4J 手册](http://www.slf4j.org/manual.html)：

```
> SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
> SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J:
> See http://www.slf4j.org/codes.html#StaticLoggerBinder for further
> details. 
```

> 打印此警告是因为在您的类路径上找不到 slf4j 绑定。将绑定添加到类路径后，警告就会消失。假设您添加**slf4j-simple-1.7.2.jar**以便您的类路径包含： slf4j-api-1.7.2.jar slf4j-simple-1.7.2.jar ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:56:35.320

原因 可能是依赖 jar 不可用或版本冲突。

在类路径中添加以下 jar 对我来说效果很好：

xuggle-xuggler-5.4.jar
slf4j-api-1.6.4.jar
logback-core-1.0.0.jar
logback-classic-1.0.0.jar

# python - 在 Python 中创建变量跨模块 - 在类和函数中

> ID：14013040
> 
> 赞同：0
> 
> 时间：2012-12-23T17:28:35.860
> 
> 标签：python, python-2.7, tornado

我正在尝试在其他 python 模块中使用变量，如下所示：

在`a.py`：

```
class Names:
    def userNames(self):
        self.name = 'Richard' 
```

在`z.py`：

```
import a
d = a.Names.name
print d 
```

但是，这不能识别变量`name`，并收到以下错误：

```
AttributeError: type object 'Names' has no attribute 'name' 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:37:41.617

> “我再次检查过，这是因为我从 Tornado 框架导入，并且变量在一个类中。”

因此，您的问题不是您的问题中显示的问题。

如果你真的想访问一个类的变量（很可能你不想），那么这样做：

```
from othermodule import ClassName

print ClassName.var_i_want 
```

您可能希望访问实例中保存的变量：

```
from othermodule import ClassName, some_func

classnameinstance = some_func(blah)
print classnameinstance.var_i_want 
```

**更新**既然你已经完全改变了你的问题，这里是你的新问题的答案：

在这段代码中：

```
class Names:
    def userNames(self):
        name = 'Richard' 
```

`name`不是在方法激活之外可访问的变量`userNames`。这称为局部变量。您可以通过将代码更改为：

```
def userNames(self):
        self.name = 'Richard' 
```

然后，如果您在一个名为的变量中有一个实例，`classnameinstance`您可以执行以下操作：

```
print classnameinstance.name 
```

这仅适用于已经在实例上创建变量的情况，例如通过调用`userNames`.

如果有其他方式来接收类的实例，则不需要导入类本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T20:27:30.457

变量可以绑定到许多不同的范围，这似乎是您感到困惑的地方。这里有几个：

```
# a.py
a = 1 # (1) is module scope

class A:
    a = 2 # (2) is class scope

    def __init__(self, a=3): # (3) is function scope
        self.a = a           # (4) self.a is object scope

    def same_as_class(self):
        return self.a == A.a # compare object- and class-scope variables

    def same_as_module(self):
        return self.a == a   # compare object- and module-scope variables 
```

现在看看这些不同的变量是如何命名的（我只是`a`为了说明这一点，请不要这样做）是如何命名的，以及它们是如何具有不同的值的：

```
>>> import a
>>> a.a
1 # module scope (1)
>>> a.A.a
2 # class scope (2)
>>> obj1 = a.A() # note the argument defaults to 3 (3)
>>> obj1.a       # and this value is bound to the object-scope variable (4)
3
>>> obj.same_as_class()
False             # compare the object and class values (3 != 2)

>>> obj2 = a.A(2) # now create a new object, giving an explicit value for (3)
>>> obj2.same_as_class()
True 
```

请注意，我们还可以更改以下任何值：

```
>>> obj1.same_as_module()
False
>>> obj1.a = 1
>>> obj1.same_as_module()
True 
```

* * *

作为参考，您的`z.py`上述内容可能如下所示：

```
import a
n = a.Names()
d.userNames()
d = n.name
print d 
```

因为`a.Name`是一个*类*，但你试图引用一个*对象范围的*变量。一个*对象*是一个类的一个实例：我称之为我的实例`n`。现在我有了一个对象，我可以得到对象范围变量。这相当于 Goranek 的回答。

在我之前的示例中，您试图在`obj1.a`没有`obj1`类似的情况下访问。如果不把它变成一篇关于 OO 和 Python 类型系统的介绍性文章，我真的不确定如何让这个更清楚。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T17:52:06.873

# 文件：a.py

```
class Names:
    def userNames(self):
        self.name = 'Richard' 
```

# 文件：z.py

```
import a
c = a.Names()
c.userNames()
what_you_want_is = c.name 
```

顺便说一句，这段代码没有意义..但这显然是你想要的

# 更好的 a.py

```
class Names:
    def userNames(self, name):
        self.name = name 
```

# 更好的 z.py

```
import a
c = a.Names()
c.userNames("Stephen or something")
what_you_want_is = c.name 
# what_you_want_is is "Stephen or something" 
```

# sql-server-2008-express - 如何在 InstallShield 2010 中静默安装 SQL Server 2008 Express

> ID：14013043
> 
> 赞同：3
> 
> 时间：2012-12-23T17:28:57.297
> 
> 标签：sql-server-2008-express, installshield-2010, redistributable, silent-installer

我使用 InstallShield 2010 创建我的设置。

我的程序需要 SQL Server 2008 Express。所以我在可再发行部分添加了“Microsoft SQL Server 2008 Express SP1 (x86)”。

然后在“编辑先决条件”=>“要运行的应用程序”选项卡中，我将此语句插入文本框中：

```
SQLEXPR32_x86_ENU.exe /qs /ACTION=Install /FEATURES=SQLENGINE /INSTANCENAME=MSSQLSERVER 
       /SQLSVCACCOUNT="NT AUTHORITY\SYSTEM" /SQLSVCPASSWORD="YesYes"  
       /SQLSYSADMINACCOUNTS="Builtin\Administrators" 
       /AGTSVCACCOUNT="NT AUTHORITY\Network Service" /IACCEPTSQLSERVERLICENSETERMS=true 
```

[http://i46.tinypic.com/a0a343.jpg](http://i46.tinypic.com/a0a343.jpg)

但是当我运行安装程序时，几分钟后我看到此消息并且没有安装 SQL Server 2008 Express。

[http://i50.tinypic.com/2krcr9.jpg](http://i50.tinypic.com/2krcr9.jpg)

现在如何才能以静默模式完全安装 SQL Server 2008 Express？

**[更新]**

***问题解决了：***

我做了 3 个步骤来解决我的问题：

1-重新启动我的电脑

2- 从语句中删除“/IACCEPTSQLSERVERLICENSETERMS=true”

3 - 从语句中删除 /SQLSVCPASSWORD="YesYes"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:08:45.973

我不确定**/IACCEPTSQLSERVERLICENSETERMS 是否**需要一个布尔值？...我只包含该语句，没有参数值并且它可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-07T15:25:19.237

经过几个小时的尝试，我做到了：

1.在InstallShield2010中，转到：“安装设计器”选项卡->应用程序数据->可再发行

2.从列表中找到“Microsoft SQL Server 2008 Express SP1 (x86 & x64Wow)”并右键单击它并单击“编辑先决条件”。

3.在“应用程序运行”写：

/qs /INSTANCEID=”SQLEXPRESS” /ACTION=”Install” /FEATURES=SQLENGINE /INSTANCENAME=”SQLEXPRESS” /SQLSVCACCOUNT=”NT AUTHORITY\SYSTEM” /SQLSYSADMINACCOUNTS=”Builtin\Administrators” /ADDCURRENTUSERASSQLADMIN

在“为应用程序指定命令行”中。

更多信息，请查看： [http ://www.hadirobati.com/wpEn/silent-install-of-sql-server-2008-express-in-installshield/](http://www.hadirobati.com/wpEn/silent-install-of-sql-server-2008-express-in-installshield/)

# html - 如何排序 列表？

> ID：14013051
> 
> 赞同：1
> 
> 时间：2012-12-23T17:30:23.017
> 
> 标签：html, css

> **可能重复：**
> [使用 javascript 对 html 列表进行排序](https://stackoverflow.com/questions/8837191/sort-an-html-list-with-javascript)

我有一个 ：

```
<ul>
<li>Anytime</li>
<li>Cash is good</li>
<li>Do it now!</li>
</ul> 
```

我不断添加新文章。我希望它们按字母顺序排列，而无需手动重新排列它们。我用纯 HTML 和 CSS 编写了我的网站（我没有从数据库中获取信息）。

我该如何解决这个问题？我需要 Java 脚本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T17:35:16.140

### 基于[此处](https://stackoverflow.com/questions/8837191/sort-an-html-list-with-javascript)的示例，请查看：

```
var ul = $("ul");
var arr = $.makeArray(ul.children("li"));

arr.sort(function(a, b) {
    var textA = +$(a).text();
    var textB = +$(b).text();

    if (textA < textB) return -1;
    if (textA > textB) return 1;

    return 0;
});

ul.empty();

$.each(arr, function() {
    ul.append(this);
}); 
```

### HTML

```
<ul>
    <li>Anytime</li>
    <li>Cash is good</li>
    <li>Do it now!</li>
</ul> 
```

# javascript - 三.js行渲染错误

> ID：14013052
> 
> 赞同：0
> 
> 时间：2012-12-23T17:30:29.910
> 
> 标签：javascript, line, three.js

我正在尝试渲染位于基本网格顶部的线。如果我只是从上面查看它，它工作正常，但如果场景以某种方式旋转，则无法渲染，如下图所示： [Linkt to picture](https://f.cloud.github.com/assets/1424069/28998/ec6e60d4-4d11-11e2-9b9a-b804bd2c9439.png)

有没有办法解决这个问题？

问候，丹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:22:37.237

您可以分两次渲染它。

```
// on init
renderer.autoClear = false;

// on update
renderer.clear();
renderer.render( sceneFloor, camera );
renderer.render( sceneLine, camera ); 
```

# vhdl - 不需要的 1 位锁存器 (VHDL)

> ID：14013060
> 
> 赞同：1
> 
> 时间：2012-12-23T17:32:11.753
> 
> 标签：vhdl, state-machine, flip-flop

我正在编写一个 N 位非恢复分频器，但我遇到了一个小问题。

我有一个操作部分（组合）和一个控制部分（有限状态机）。控制部分有 2 个进程 FSM，1 个用于更新下一个状态，1 个用于“状态序列”。

```
update:     process(clk_in, next_state)
        begin
            if rising_edge(clk_in) then
                current_state <= next_state;
            end if;
        end process; 
```

这是第二个过程：

```
control:    process(current_state, start, S_in, counted)
            variable sub_tmp : STD_LOGIC := '0';
        begin
                            [...]
            sub <= sub_tmp; -- sub is an output signal of my entity that goes in the Operative Part

            case current_state is
                when idle =>
                    if start='1' then
                        next_state <= init;
                    else
                        next_state <= idle;
                    end if;

                when init =>
                                            -- [...]
                    next_state <= subtract;

                when subtract =>
                    en_A <= '1';
                    sub_tmp := '1';
                    next_state <= test;

                when test => -- shift
                    en_Q <= '1';

                    if S_in='0' then
                        sub_tmp := '1';
                    else
                        sub_tmp := '0';
                    end if;

                    if counted=N/2-1 then
                        next_state <= finished;
                    else
                        next_state <= operation;
                    end if;

                when operation =>
                    en_A <= '1';
                    next_state <= test;

                when finished =>
                    stop <= '1';
                    next_state <= idle;
            end case;
        end process; 
```

如您所见，我只需要在 2 种情况下（减法和测试）更改 sub 的值，而在其他情况下我不必更改。

问题是当我尝试合成这段代码时，结果发现 sub_tmp 是一个锁存器，但我不想要一个锁存器。我需要做这样的事情：

状态 1 => 将 sub 设置为“1”或“0”（取决于另一个输入）

状态 2 => 执行其他操作（但 sub 必须保持之前设置的值）并返回状态 1 等...

**为了澄清更多：在我的 FSM 的某些状态（不是全部）中，我设置了一个变量的值（我们称之为 sub_tmp）。在其他州，我不会改变它的价值。然后假设我有一个名为“sub_out”的输出 PIN。现在，独立于变量值，我想将其值输出到此引脚（sub_out <= sub_tmp; 或类似）。**

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:52:17.020

您缺少的是您描述的行为是*闩*锁。任何有记忆的东西（即：“在其他状态下我不会改变它的值”）要么是锁存器，要么是寄存器（触发器）。如果您不需要锁存器或寄存器，则需要为每个代码路径中的信号分配一个特定值，而不是让它“记​​住”它的先前状态。

# css - 为当前页面菜单项添加背景

> ID：14013066
> 
> 赞同：-1
> 
> 时间：2012-12-23T17:32:51.713
> 
> 标签：css, html-lists

应该是这样的：（ [来源：][[gyazo.com](http://gyazo.com/0ad52be5832d281682573c506096ae60.png)][）][![图像](../Images/350e05ace2db86c66742ba54428b0f8e.png)](https://i.stack.imgur.com/jqP9n.png)

我的尝试

```
<div class="header">
   <div class="container">
   <img id="logo" src="img/logo.png"/>
      <ul class="menu">
        <a href="#"><li class="current">Home</li></a>
        <a href="#"><li>Forums</li></a>
        <a href="#"><li>Donate</li></a>
        <a href="#"><li>Vote</li></a>
        <a href="#"><li>Info</li></a>
      </ul>
   </div>
</div> 
```

我使用 Current 类作为当前页面背景。

添加了标题

```
.header {
width: 100%;
height: 86px;
background-image: url("../img/gradient.png");
background-repeat: repeat-x;
border-bottom: solid 1px #a2a2a2;
} 
```

向右浮动菜单，使其显示内联并居中文本

```
.menu {
float: right;
padding: 2.7%;

}
.menu  a{
color: #1e1e1e;
}
.menu  a:hover{
color: #5e5e5e;
}

.menu li {
display: inline;
float: left;
margin-left: 10px;
padding-left: 20px;
padding-top: 5px;
} 
```

现在是当前背景的部分

```
.current {
background-image: url("../img/hoverdiamond.png");
background-repeat: no-repeat;
width: 78px;
height: 36px;
padding-left: 20px;
padding-top: 5px;
color: white;
} 
```

结果：

[![img2](../Images/b14e935892383f6f311614017e7fc924.png)](https://i.stack.imgur.com/17vPk.png)
[（来源：[gyazo.com](http://gyazo.com/f3d859b9a5868de3d58c07b71eb3d1d6.png)）]

你能看到当前项目和其他项目之间有很大的空间吗？我该如何删除这个？使其与其他空间相等。

我尝试过的事情：

添加相对位置

结果：菜单项“当前”超过了菜单项“论坛”

我找不到任何其他方法可以做到这一点，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:37:55.023

删除`width`on `.current`。这就是增加额外间距的原因。

如果您不想更改它，请更改相邻 li 的间距：

```
.current + li {
  padding-left: 0;
} 
```

这是您要完成的工作的简化演示。从中学习：

### HTML

```
<ul>
    <li class="current"><a href="#">Home</a></li>
    <li><a href="#">Forums</a></li>
    <li><a href="#">Donate</a></li>
    <li><a href="#">Vote</a></li>
    <li><a href="#">Info</a></li>
</ul> 
```

### CSS

```
ul {
    float: right;
}

li {
    display: inline;
    padding: 10px;
}

.current {
    background-image: url('http://placekitten.com/200/200');
} 
```

[演示](http://jsfiddle.net/tzunZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:03:54.733

试试下面的 HTML：

```
<div class="header">
   <div class="container">
      <img id="logo" src="img/logo.png"/>
      <ul class="menu">
        <li class="current"><a href="#">Home</li></a>
        <li><a href="#">Forums</a></li>
        <li><a href="#">Donate</a></li>
        <li><a href="#">Vote</a></li>
        <li><a href="#">Info</a></li>
      </ul>
   </div>
</div> 
```

对您的 CSS 进行以下修改：

```
.menu {
    float: right;
    padding: 2.7%;
}
.menu li {
    float: left;
    margin-left: 10px;
}
.menu  a{
    color: #1e1e1e;
    display: block;
    padding-left: 20px;
    padding-top: 5px;
}
.menu  a:hover{
    color: #5e5e5e;
}
.current {
    background-image: url("../img/hoverdiamond.png");
    background-repeat: no-repeat;
    color: white;
} 
```

您的 HTML 结构不正确……您不应该将`<li>`元素放置在锚元素中。

您也不需要`display: inline;`列表项，因为它们无论如何都是向左浮动的，它们应该已经是内联的。

[将来，您可能希望使用W3C 验证器](http://validator.w3.org/)检查您的 HTML 是否有效，它应该解释您的 HTML 中的任何错误以及如何修复它们。

让我知道以上是否解决了它，我会很高兴再看看。

**编辑：**忘了还声明我删除了当前 css 声明中的高度和宽度，这是不必要的，而且几乎肯定会导致间距问题。

# javascript - 循环遍历日期数组并使用 javascript/jQuery 标记 10 年范围

> ID：14013067
> 
> 赞同：1
> 
> 时间：2012-12-23T17:32:58.903
> 
> 标签：javascript, jquery, date, timeline

我有很多年：

```
$years = [1952,1954,1961,1962,1965,1982,1984,1984,1984,1985,1986,1986,1987,1988,1990,1991,1991,1993,1995] 
```

我正在创建一个时间线，我的时间线使用 10 年的范围，所以它看起来像这样：

```
 1950      1960      1970      1980
.........|.........|.........|.........|......... 
```

在 jQuery 的帮助下，我循环遍历这些年来的每个函数，并通过创建一个 div 将它们显示在时间轴上，并使用左侧 css 属性（1 年为 22px）定位它们：

```
$.each(years, function(key, value) { 
    var event = $('<div>').addClass('event');
    var posX = value*21;

    event = event.html(value).css('left',posX+'px');

    $('#timeline').append(event);
}); 
```

到目前为止一切都很好，但我们你可以看到我有很多年，我无法正确显示它们。

如果在**10 年范围内**有**超过 3 个**事件，我想显示一个按钮而不是事件 div，当我单击它时，我可以使用弹出窗口来显示其余事件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:53:36.123

在相关的几十年中使用几年会更容易。我会创建一个`decades`数组并像下面这样填充它：

```
var $years = [1952,1954,1961,1962,1965,1982,1984,1984,1984,1985,1986,1986,1987,1988,1990,1991,1991,1993,1995];

var decades = [];
for(var i=0; i<$years.length; i++)
{
    var year = $years[i];
    var decade = (Math.floor(year / 10) * 10);
    if(!decades[decade])
        decades[decade] = [];
    decades[decade].push(year);
}

for(decade in decades){
    var years = decades[decade];
    // decade will be 1950, 1960, 1980, etc.
    // years will be an array of years within that decade

    if(years.length > 3) {
        // ...
    } else {
        // ...
    }
}
​ 
```

# dart - Dart 中的卷曲功能

> ID：14013069
> 
> 赞同：6
> 
> 时间：2012-12-23T17:33:23.150
> 
> 标签：dart

我正在寻找在 Dart 中获得类似 curl 的功能的最佳方法。例如，如何获取 google.com 网页内容并将其输出，例如。

我发现我可以通过[shell 调用它，如此处所示](http://code.google.com/p/dart/issues/attachmentText?id=6984&aid=69840008000&name=curl.dart&token=49_7n_9DGsHcwaATwtkGhaGEpno:1354806458937)，但这似乎不是理想的方法：

```
import 'dart:io';

main() {
  var f = new File(new Options().executable);
  Process.start('curl', 
                ['--dump-header', '/tmp/temp_dir1_M8KQFW/curl-headers', '--cacert',
                 '/Users/ager/dart/dart/third_party/curl/ca-certificates.crt', '--request', 
                 'POST', '--data-binary', '@-', '--header', 'accept: ', '--header', 'user-agent: ' ,
                 '--header', 'authorization: Bearer access token', '--header', 
                 'content-type: multipart/form-data', '--header',
                 'content-transfer-encoding: binary', '--header',
                 'content-length: ${f.lengthSync()}', 'http://localhost:9000/upload']).then((p) {
    f.openInputStream().pipe(p.stdin);
    p.stdout.pipe(stdout);
    p.stderr.pipe(stderr);
    p.onExit = (e) => print(e);
  });
} 
```

我还查看了 API，在这里找不到任何可以帮助我的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T17:36:59.807

Dart IO 库附带了一个[`HttpClient`](http://api.dartlang.org/docs/bleeding_edge/dart_io/HttpClient.html)基本上是您正在寻找的东西。但是，您可能应该改用`http`Pub 包。将其添加到您的依赖项文件中：

```
dependencies:
  http: any 
```

运行`pub install`，然后：

```
import 'package:http/http.dart' as http;

main() {
  http.read('http://google.com').then((contents) {
    print(contents); // Here we output the contents of google.com.
  });
} 
```

# maven - Maven emma 有错误，但测试通过

> ID：14013070
> 
> 赞同：0
> 
> 时间：2012-12-23T17:33:27.370
> 
> 标签：maven, emma

我跑步时我的junit测试通过了

```
mvn test 
```

但

```
mvn emma:emma 
```

它有错误。我怎样才能找出执行了哪些类？我遇到的错误与弹簧有关

```
java.lang.NoSuchMethodError: org.springframework.beans.BeanUtils.instantiateClass(Ljava/lang/Class;Ljava/lang/Class;)Ljava/lang/Object;
    at org.springframework.test.context.ContextLoaderUtils.resolveContextLoader(ContextLoaderUtils.java:87) 
```

由于相同的配置工作正常，我认为当我运行 emma 时类路径存在一些问题。
任何建议都值得赞赏，
10 倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:03:43.220

您的 spring-test 版本与您的 spring-beans 版本不一致。用于`mvn dependency:tree`查找相关版本中的内容，并使用显式的顶级依赖项或依赖项排除来管理它们。

# jquery - IE8 - 没有链接的 jQuery 滑块下一个/上一个按钮

> ID：14013071
> 
> 赞同：1
> 
> 时间：2012-12-23T17:33:32.040
> 
> 标签：jquery, html, css, internet-explorer-8

我目前被一个奇怪的问题难住了。我有一个在所有主要浏览器上都可以正常工作的 jQuery 滑块，但是当我在 Internet Explorer 8 上时，Next/Prev 按钮不起作用（例如，悬停时它们没有链接）。

我的 HTML：

```
<div id="container">
    <div id="frame"></div>
    <div id="slides">
        <a href="#" class="prev"></a>
        <a href="#" class="next"></a>
        <div class="slides_container">
            <img src="images/slider/4.jpg" width="954" height="247" alt="Slide 1">
            <img src="images/slider/4.jpg" width="954" height="247" alt="Slide 2">
            <img src="images/slider/4.jpg" width="954" height="247" alt="Slide 3">
        </div>
    </div>
</div> 
```

我的 CSS：

```
#container {
    width: 964px;
    height: 257px;
    z-index: 99999;
    padding: 5px;
    margin-top: 16px;
    margin-left: 7px;
    position: relative;
}

#frame {
    background: url('../images/slider/slider_frame.png') no-repeat;
    border-radius: 4px 4px 4px 4px;
    box-shadow: 0 0 5px #000000, 0 0 6px #000000;
    height: 257px;
    left: 0;
    pointer-events: none;
    position: absolute;
    top: -5px;
    width: 964px;
    z-index: 99999;
}

/*
    Slideshow
*/

#slides {
    position: absolute;
    top: 1px;
    z-index: 100;
    left: 5px;
    width: 954px;
    height: 247px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}

/*
    Slides container
    Important:
    Set the width of your slides container
    Set to display none, prevents content flash
*/

.slides_container {
    width: 954px;
    position: relative;
    display: none;
}

/*
    Each slide
    Important:
    Set the width of your slides
    If height not specified height will be set by the slide content
    Set to display block
*/

.slides_container a {
    width: 570px;
    height: 270px;
    display: block;
}

.slides_container a img {
    display: block;
}

/*
    Next/prev buttons
*/

#slides .next, #slides .prev {
    position: absolute;
    top: 100px;
    width: 48px;
    height: 48px;
    display: block;
    z-index: 101;
}

#slides .next {
    background-image: url('../images/slider/arrow-right.png');
}

#slides .next:hover {
    background-image: url('../images/slider/arrow-right-hov.png');
}

#slides .prev {
    background-image: url('../images/slider/arrow-left.png');
}

#slides .prev:hover {
    background-image: url('../images/slider/arrow-left-hov.png');
}

#slides .next {
    left: 906px;
} 
```

基本上改写我的问题：
我在这个 jQuery 滑块中有一个图像，用于切换幻灯片。然而，该图像在 IE8 中没有链接，因此不允许使用 IE8 的用户在幻灯片之间滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:39:55.860

当我看到 css 时，您的 css 类有 z-index 问题：

```
#frame {
background: url('../images/slider/slider_frame.png') no-repeat;
border-radius: 4px 4px 4px 4px;
box-shadow: 0 0 5px #000000, 0 0 6px #000000;
height: 257px;
left: 0;
pointer-events: none;
position: absolute;
top: -5px;
width: 964px;
z-index: 99999; // <-----------------this has the higher index.
}

#slides .next, #slides .prev {
position: absolute;
top: 100px;
width: 48px;
height: 48px;
display: block;
z-index: 101; //<--------------------this has a lower index
} 
```

尝试`interchange the z-indexes`或`make a new higher z-index`单击按钮。

试试这个，看看这是否对你有帮助。

# html - 是否有浏览器渲染错误列表？

> ID：14013072
> 
> 赞同：1
> 
> 时间：2012-12-23T17:33:31.993
> 
> 标签：html, css, browser

我通过谷歌找到了一些网站，但想知道是否有人有浏览器渲染错误列表，可以在线查看或下载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:35:20.063

*   Chromium 错误：[http](http://crbug.com) ://crbug.com （Chromium 是 Chrome 底层的开源浏览器）
*   [WebKit](http://www.webkit.org/) bugs：[https](https://bugs.webkit.org) ://bugs.webkit.org （Chrome 和 Safari 使用的渲染引擎）
*   Firefox 错误：[https ://bugzilla.mozilla.org](https://bugzilla.mozilla.org)

Safari、Internet Explorer 和[Opera](https://bugs.opera.com/secure/Dashboard.jspa)不与公众共享其问题跟踪，因为它们是专有的闭源软件。

* * *

不*完全*是错误列表，但无论如何可能对您更有用：

*   [Quirksmode 兼容性表](http://www.quirksmode.org/compatibility.html)
*   [我可以使用... 兼容性表](http://caniuse.com/)

由于这些是不断发展的复杂软件，因此这些信息会经常变化。

# java - 接受用户输入并将其添加到数组中

> ID：14013074
> 
> 赞同：0
> 
> 时间：2012-12-23T17:33:33.750
> 
> 标签：java, arrays, while-loop, user-input

所以我正在重新学习java，而且已经有一段时间了。我正在尝试构建一个基本程序（在代码注释中进行了解释），但我无法记住如何获取用户输入并将其添加到数组中。我很难记住如何遍历用户输入并测试他们是否输入了任何内容，以及如果他们确实输入了某些内容，则将输入附加到数组中。

```
//This program will ask user for for there favorite four games
//If the answer is blank, it will ask again for a game title
//The program will than store there answers into an array
//The program will than display the array in random order
//it will then give the amount of games in the array with an integer

import java.util.*;

public class MultipleClassesMain {

public static void main(String[] args) {

    //Array holds 4 string inputs from user
    String gameArray[] = new String[4];

    //importing scanner element-------
    Scanner input = new Scanner(System.in);

    //Introduction---------------
    System.out.println("Hey there!!!");
    System.out.println("Please tell us four game titles you like to play!!!");

    //Asks what game user likes and takes user input into a variable
    System.out.println("So what a game you like?: ");
    String temp = input.nextLine();

    //This loop will test against blank user input
    while (temp.equals("") || (temp.equals("   ")){
        System.out.println("Your game can't be blank.  Enter again: ");

        }

    } 
```

}

这是我到目前为止的代码。如果有人能给我一些建设性的批评和一些关于如何循环用户输入（测试输入）并将输入附加到数组的指示，我将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:44:31.830

第一：使用 a`List`而不是数组进行用户输入。只是`.add()`你的输入。但请参阅下文以获得更好的解决方案，即使用`Set`.

第二：`String`有一个`.trim()`在开头和结尾都删除空格的方法，使用它并使用`.isEmpty()`.

第三： a`List`不会检测到重复的条目，但是 a`Set`会检测到，前提是它的条目正确地实现了`equals()`and `hashCode()`，并且`String`确实如此，所以下面的代码解释了这一点（当且仅当集合被修改时，a的`.add()`方法才返回 true`Set`操作）。

示例代码：

```
public static void main(final String... args)
{
    // Set of valid user inputs
    final Set<String> gameList = new HashSet<String>();
    // Object from which user inputs are read
    final Scanner in = new Scanner(System.in);

    // Introduction
    System.out.println("Hey there!!");
    System.out.println("Please tell us four game titles you like to play!!!");

    // What the user enters
    String input;

    // Check that 4 titles have been entered, don't get out of the loop until then
    while (gameList.size() < 4) {
        System.out.print("Enter the name of a game: ");
        // Read one input, trim all beginning and trailing whitespaces
        input = in.nextLine().trim();
        // If the resulting string is empty, input is invalid: ask for another
        if (input.isEmpty()) {
            System.out.println("Empty inputs not accepted!");
            continue;
        }
        if (!gameList.add(input))
            System.out.println("You have already selected this game (" + input + ')');
    }

    // Print out the list of inputs
    System.out.println("The list of selected games is: " + gameList);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:49:07.770

```
for (int i = 0; i < 4; i++) {
        String temp = input.nextLine();
        if (temp.equals("") || (temp.equals("   "))) {
            System.out.println("Your game can't be blank.  Enter again: ");
            i--;
        } else
            gameArray[i] = temp;

    } 
```

尝试这个 。这就是你要的……是吗？

# air - 台式机闪光灯

> ID：14013075
> 
> 赞同：0
> 
> 时间：2012-12-23T17:33:42.027
> 
> 标签：air, flash

我开发了一些与 PHP 服务器文件通信的在线 Flash 游戏。众所周知，Flash 游戏只有在嵌入网站或使用 Flash 播放器从桌面启动 SWF 文件时才能使用。

但是，没有任何方法可以确保游戏安全。我的意思是，如果您可以访问 SWF，您无论如何都可以反编译它并随时窃取所有内容。它可以轻松或困难地完成，具体取决于游戏受到的保护程度，但它可以完成。

我想知道是否可以将 Flash SWF 文件嵌入/加密到桌面应用程序中，并创建一个桌面应用程序，只允许从桌面播放游戏，但保持 SWF 文件 100% 安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:27:36.247

您可以使用 SWF2EXE 工具来加密您的 Flash 游戏。以[ZINC](http://www.multidmedia.com/software/zinc/)为例。我使用的是旧版本（3.0），它可以为 Windows、Mac 和 Linux 构建独立的应用程序。它有（当然也有）选项，可以将使用限制在特定时间段内，进行试验，甚至为您的应用程序提供序列号。它是一个商业工具，但您可以下载试用版以查看它是否能解决您的问题。

最后，这并不能 100% 保护您的代码，但提取代码并不容易。

# javascript - 加载后未触发 Javascript 代码

> ID：14013080
> 
> 赞同：0
> 
> 时间：2012-12-23T17:34:30.507
> 
> 标签：javascript, jquery, post

我正在尝试开发一个交互式网站，但我被困在应该添加和执行文件的地方。所以我在首页有以下代码：

```
$(document).ready(function(){

$('.info').live("click",function()
        {
            if ($('#country span.selected').text().length == 0)
                alert("A company should be selected before continue!");
            else {
                $('.centered').hide();
                $('.waitimg').show();
                $.post('get_data.php',
                {
                    type :$(this).attr("id"),
                    company : $('#country span.selected').text(),
                    company_id : $('#country').attr("value"),
                    country :  $('#scountry span.selected').text(), 
                    industry: $('#industry span.selected').text()
                }, function(response)
                {
                    //$('#resultarea').fadeOut();
                    setTimeout("finishAjax('resultarea','"+escape(response)+"')", 400);
                }
                );
            } 
            return false;                    
        });

    }); 
```

和回调：

```
function finishAjax(id, response) {
        $('#waitimg').hide();
         $.getScript("js/script.js");
        $('#'+id).html(unescape(response));
        $('#'+id).fadeIn();
    } 
```

它应该从 js/script.js 执行脚本，但它没有。使用 Firebug，我可以看到文件已加载，但 script.js 中的简单警报（“hello world”）未触发。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:42:30.920

`setTimeout`期望对函数的*引用*，而不是作为第一个参数的字符串。代替：

```
setTimeout("finishAjax('resultarea','"+escape(response)+"')", 400); 
```

和：

```
setTimeout(function()
{
    return finishAjax.apply(this, ['resultarea', escape(response)]);//call as though finishAjax was callback --> preserve context
    //or, if you don't care about the context:
    return finishAjax('resultarea', escape(response));
}, 400); 
```

你完成了

# iphone - ios中webservice中的多个参数

> ID：14013082
> 
> 赞同：2
> 
> 时间：2012-12-23T17:34:34.967
> 
> 标签：iphone, objective-c, ios, web-services, ipad

我想知道在为 iPad 应用程序使用 web 服务时传递多个参数是否会对性能产生任何影响。我的意思是，当请求和响应具有更多参数时，是否需要更多时间？我在 web 服务方法中没有几个不太重要的参数。我不确定是否要删除它们。请指导我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:34:37.857

重要的不是参数的数量，而是有效载荷的大小。一个人可以有一个只有一个参数的 Web 服务方法，并且有一个从几个字节到十个、几百个或兆字节不等的有效负载，这就是影响性能的因素。

# c - 在 C 中，释放结构时是否需要手动释放结构内的指针？

> ID：14013084
> 
> 赞同：-2
> 
> 时间：2012-12-23T17:34:46.443
> 
> 标签：c, pointers, memory

我正在学习 C 中的内存管理。

我有一个指向我`malloc`通过大小调整的结构的指针

```
some_struct *mystruct = malloc(sizeof(some_struct)); 
```

后来我`free`在那个结构上使用。

在这个结构里面有三个`char *`指针；我也malloc他们的记忆。

在释放之前我是否也必须释放它们的内存，`*mystruct`或者销毁`*mystruct`也会释放结构内的内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T17:37:06.377

您绝对还必须释放结构内 char * 指针指向的内存。先这样做，然后释放你的结构

但是不要释放结构内的 char * 指针，如果你在其他地方为那些 char * 指针指向相同的内存（即，如果你已经将你的结构复制到另一个结构实例，那些 char * 指针需要指向有效记忆）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T17:35:57.760

没有魔法，也没有圣诞老人。你必须自己做这项工作。*在您忘记它之前*释放您动态分配的所有内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:15:17.620

就良好实践而言，您应该释放分配的所有内容，将其视为打开和关闭 html 标记，就良好实践而言，最好不要像对待 C++ 中的类或爪哇。

释放结构只释放指向对象的指针，而不是对象本身，

```
#include <stdio.h>                                                                                                                                                                   

typedef struct                                                                                                                                                                       
{                                                                                                                                                                                    
    int a,b,c,d;                                                                                                                                                                     
    char some_string[1050];                                                                                                                                                          

} first_type;                                                                                                                                                                        
typedef struct                                                                                                                                                                       
{                                                                                                                                                                                    
    struct first_type *ap;                                                                                                                                                           
} second_type;                                                                                                                                                                       

int main(void)                                                                                                                                                                       
{                                                                                                                                                                                    
    printf("first type: %d\n", sizeof(first_type));                                                                                                                                  
    printf("second type: %d\n", sizeof(second_type));                                                                                                                                
} 
```

如果你运行这个小例子，你会看到类似这样的东西

> 第一种：1068
> 
> 第二种：8

虽然`second_type`有一个指向 a 的指针，`first_type`但它的大小远小于`first_type`. 因此，当您 malloc 和 free 东西时，您只是保留和释放该数据类型在内存中的多少字节。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T17:44:18.257

这就是为什么您稍后要更改为 c++ 的原因，然后您可以拥有一个自己完成它的结构（如果您将正确的代码放入其析构函数中）。在C中你必须自己完成工作，即在删除你的结构之前，删除结构内部的东西。当然，当你 malloc 一个结构时，你还应该正确初始化结构内的成员，因为最小初始化指针为 0，这样删除它们时就不会出现故障......

# javascript - 索引数据库。如何在光标移动时更新记录

> ID：14013085
> 
> 赞同：1
> 
> 时间：2012-12-23T17:34:49.163
> 
> 标签：javascript, indexeddb

在同步方法中，我打开一个游标并将 Ajax 帖子发送到服务器。我需要同时将记录“标志”设置为同步。

```
var transaction = db.transaction([STORE],IDBTransaction.READ_WRITE);
transaction.objectStore(STORE).openCursor().onsuccess = function(e){
    var cursor = e.target.result;
    if(cursor){
        if (cursor.value.flag == "0") {

            //sync method                               
            cursor.update(cursor.value.flag = "1")  // not working

        };              
        cursor.continue();
    };
}; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T22:51:47.657

尝试：

```
cursor.value.flag = "1";
cursor.update(cursor.value); 
```

# tomcat - HAProxy - URL 重定向和重写

> ID：14013098
> 
> 赞同：1
> 
> 时间：2012-12-23T17:36:51.950
> 
> 标签：tomcat, url-rewriting, haproxy, url-redirection

我对 haproxy 设置完全陌生。我想在 tomcat 服务器上设置 haproxy。

以下配置适用于 tomcat 应用程序。

```
global
    log 127.0.0.1   local0
    log 127.0.0.1   local1 notice
    maxconn 4096
    user haproxy
    group haproxy

defaults

    log     global
    mode    http
    option  httplog
    option  dontlognull
    retries 3
    option redispatch
    maxconn 20000
    contimeout      5000
    clitimeout      50000
    srvtimeout      50000

listen webfarm 100.100.100.100:80
   mode http
   stats enable
   stats uri /haproxy?statis
   stats realm Haproxy\ Auth
   stats auth user:password
   balance leastconn
   cookie JSESSIONID insert indirect nocache
   option httpclose
   option forwardfor
   server web01 192.168.1.1:8080 cookie A check
   server web02 192.168.1.2:8080 cookie B check 
```

但我不希望用户输入完整的网址。因此，当用户点击 web1.example.com 时，它需要从 tomcat webapp 目录服务器应用程序。我也不想改变网址。

```
Example : http://web1.example.com -> http://192.168.1.1:8080/applications/web1 & http://192.168.1.2:8080/applications/web1 
```

这可以通过 url 重定向和 url 重写来实现吗？如果是，请帮助我进行示例配置。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T07:52:10.713

这很难看，你不应该这样做，它会导致静态对象的重定向、引荐来源网址和基本 URL 出现各种问题。reqrep （重写请求）和 rsprep （重写位置）是微不足道的，但你最好换一个更聪明的想法，而不是故意破坏你的网站，然后一直抱怨你经常有断开的链接在 HTML 代码等中... 总之，**不要这样做！**

# html - HTML元素类声明中的空格是什么？

> ID：14013104
> 
> 赞同：0
> 
> 时间：2012-12-23T17:37:10.567
> 
> 标签：html, css

> **可能重复：**
> [带有空格的 HTML 类属性，它是 W3C 有效类吗？](https://stackoverflow.com/questions/13808846/html-class-attribute-with-spaces-it-is-a-w3c-valid-class)

我正在使用现有的 HTML 源代码。考虑以下行：

```
<ul class="thumbs noscript"> 
```

*thumbs*和*noscript*之间的空格是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:38:21.700

这意味着这里有两个类：`thumbs`和`noscript`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T18:33:00.917

HTML 元素正在使用两个已登记的类，并用空格分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:38:32.083

空格用于在类声明中分隔多个类 - 所以它基本上意味着类`thumbs`和`noscript`适用于 UL 元素。

要通过 CSS 选择必须同时具有这两个类的元素，您可以使用如下选择器：

```
.thumbs.noscript {
   /* Properties that apply to elements that have both classes. */
} 
```

*请注意，CSS 中的规则声明中的类之间没有空格。如果您在类之间放置一个空格，那么 noscript 必须是拇指的孩子才能应用该规则。*

当您想将 CSS 属性应用于具有两个类的元素，而不是仅具有一个或不具有这些类的元素时，上述 CSS 规则很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T17:38:34.460

这意味着该元素有 2 个类。两者`thumbs`和`noscript`

这意味着您可以使用 css 选择此元素，如下所示：

```
.thumbs { color:#f00; }
.noscript { color:#000; } 
```

或者

```
.thumbs.noscript { color:#fff; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T17:38:35.740

这个空间是为了让多个类分开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T17:38:49.293

一个元素可以有多个类，所以在这种情况下，它有类“thumbs”和“noscript”。所以她在类名之间的空格只是将它们分开。

看名字很有可能有一些 CSS 总是显示带有“noscript”类的元素。使用 JavaScript 可能会在页面加载时删除此类，以使页面对启用 JavaScript 的任何人都更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-23T18:04:18.353

这样您就可以使用多个类 - 因此您可能会在网站的不同区域重复使用一些类。

一个现实生活中的例子可能是：

```
.thumbs {width:150px; height:150px; background-colour:#fff;}
.noscript {clear:both;} 
```

# ruby-on-rails-3 - 使用 Devise 和 Nginx 丢失 current_user

> ID：14013105
> 
> 赞同：1
> 
> 时间：2012-12-23T17:37:28.510
> 
> 标签：ruby-on-rails-3, nginx, devise

我正在登录用户默认设计视图。我`after_sign_in_path`在我的应用程序控制器中覆盖。

此代码打印我的用户：

```
logger.info current_user.to_json 
```

之后我返回一个 url，即返回 '/sites'。我被重定向到重定向到[http://www.mysite.com/sites](http://www.mysite.com/sites)，转到 SitesController。如果我在 SitesController 索引操作中打印 current_user，它是 nil。

怎么了？我在nginx后面。它在我的本地环境中运行良好。我真的需要帮助，我被卡住了太多时间了！！！！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:58:59.317

如果有人有同样的问题。我删除了cookies，它起作用了！我不知道为什么。

# android - 如何修复 SplashActivity 中缺少所需的库？

> ID：14013111
> 
> 赞同：1
> 
> 时间：2012-12-23T17:37:59.183
> 
> 标签：android, android-emulator

我正在修复我没有制作的 Android 应用程序的错误，我无法在模拟器中加载它。它说我缺少一个必需的库：

```
 slf4j-1.6.1-jul.jar/slf4j-1.6.1-jul.jar/slf4j-1.6.1-jul.jar 
```

如何添加这个库或者我可以删除它并且它会正常工作？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:33:55.567

[下载](http://repo1.maven.org/maven2/org/slf4j/jul-to-slf4j/1.6.1/jul-to-slf4j-1.6.1.jar) 放在 android 项目内 libs 文件夹中的文件，并将其添加到项目的构建路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:56:02.907

[从这里](http://www.slf4j.org/)下载它并将`.jar`文件放在项目的 lib 文件夹中，或者将其添加到构建路径中。

# django - Heroku - 工头启动失败，没有这样的选项：--noinput;

> ID：14013113
> 
> 赞同：1
> 
> 时间：2012-12-23T17:38:27.150
> 
> 标签：django, heroku, foreman

嗨，我无法让工头在**本地**启动我的应用程序......虽然应用程序在我使用时运行`python manage.py runserver`

当我使用命令时

```
foreman start 
```

我得到这个输出：

```
(venv)MacBook-Pro:staging macbook$ foreman start
12:25:08 web.1     | started with pid 15160
12:25:09 web.1     | Usage: manage.py collectstatic [options] 
12:25:09 web.1     | 
12:25:09 web.1     | Collect static files in a single location.
12:25:09 web.1     | 
12:25:09 web.1     | manage.py: error: no such option: --noinput;
12:25:09 web.1     | process terminated
12:25:09 system    | sending SIGTERM to all processes 
```

这是我的 procfile （与这个问题有关）

```
web: python manage.py collectstatic --noinput; gunicorn wsgi -b 0.0.0.0:$PORT 
```

当推送到 Heroku 时，这一切都很好......只是不在我的机器上本地。

当我将收集的部分拉出时 - 它与 gunicorn 一起运行良好，如下所示：

```
web: gunicorn wsgi -b 0.0.0.0:$PORT 
```

所以它似乎是它不喜欢的python manage.py collectstatic --noinput ...但是如果我在目录collectstatic中手动运行该部分工作正常。

这是我的 .bash_profile

```
# {{{
# Node Completion - Auto-generated, do not touch.
shopt -s progcomp
for f in $(command ls ~/.node-completion); do
  f="$HOME/.node-completion/$f"
  test -f "$f" && . "$f"
done
# }}}

# Setting PATH for Python 2.7
# The orginal version is saved in .bash_profile.pysave
PATH="/System/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH

export PATH=/usr/local/bin:$PATH
export PATH=/usr/local/share/python:$PATH
export WORKON_HOME=~/Envs 
```

我的配置也是我运行 virtualenvwrapper 并通过 Brew 和 PIP 安装了所有这些......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:37:46.023

从站点下载重新安装 Heroku Toolbelt，而不是通过命令行升级...现在工头工作。

# delphi - 编写属性编辑器 - 我需要一些指导

> ID：14013121
> 
> 赞同：4
> 
> 时间：2012-12-23T17:39:08.077
> 
> 标签：delphi, custom-controls, delphi-xe

**概述**

我正在创建一个派生自 TCustomTreeView 的组件，我想添加一个在对象检查器中显示下拉列表 (paValueList?) 的属性。此列表必须基于附加到我的控件的另一个列表 (TStrings) 动态填充，例如它可以是来自 TComboBox、TListBox 的项目或来自 TStringList 等的字符串。

不过，我遇到了一些问题，我真的可以接受一些指导和建议。

* * *

**代码布局**

我缩短了代码以使其更易于阅读，但布局与我所拥有的基本相同。

我已经将我的组件包分成两个（同一个项目组），`Package1`包括组件代码（例如，我的组件从 TCustomTreeView 派生）并`Package2`包含注册过程和设计器单元（designide.dcp、DesignIntf​​、DesignEditors 等）。

`Package2`是我认为我需要添加我的属性编辑器的地方，该编辑器将用于我从 TCustomTreeView 中派生的组件`Package1`。

**包1**

```
unit MyTreeViewUnit;

implementation

uses
  ...
  Classes,
  SysUtils;

type
  TMyTreeView = class(TCustomTreeView)
  private
    FSomeList: TStringList; // property editor should be filled using this list
    procedure SetSomeList(const Value: TStringList);
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    property SomeList: TStringList read FSomeList write SetSomeList;
  end;

  .... 
```

**包2**

```
unit MyTreeViewPropUnit;

implementation

uses
  DesignIntf,
  DesignEditors,
  Classes;

type
  TMyTreeViewProperty = class(TStringProperty)
  public
    function GetAttributes: TPropertyAttributes; override;
    procedure GetValues(Proc: TGetStrProc); override;
    procedure Edit; override;
  end;

implementation

uses
  MyTreeViewUnit;  

function TMyTreeViewProperty.GetAttributes: TPropertyAttributes;
begin
  Result := [paValueList]; ?
end;

procedure TMyTreeViewProperty.GetValues(Proc: TGetStrProc);
begin
  inherited;
  // These cannot be added here!!
  // This list should be populated based on SomeList found in Package1 - MyTreeViewUnit.pas
  Proc('Item1');
  Proc('Item2');
end;

procedure TMyTreeViewProperty.Edit;
begin
  inherited;
  // ?
end; 
```

* * *

```
unit MyCompsRegister;

interface

uses
  Classes;

procedure Register;

implementation

uses
  MyTreeViewUnit;
  MyTreeViewPropUnit;  

procedure Register;
begin
  RegisterComponents('MyTree', TMyTreeView);
  RegisterPropertyEditor(TypeInfo(String), TMyTreeView 'Test', TMyTreeView); // does not seem to add to object inspector for the component TMyTreeView
end;

end. 
```

* * *

**问题**

1.  第一个问题是我不知道我正在做的是否是正确的方法，我的组件已安装并且我可以毫无问题地使用它，尽管我的属性编辑器“测试”没有出现！

2.  第二个问题是 GetValues 的填充方式。在线查看一些文章使我对迄今为止在填充属性编辑器等方面的内容有了基本的了解。尽管出于我的需要，无法以这种方式添加，在此示例中，我需要根据 GetValues 填充在第一个单元中分配给 SomeList 的字符串（正如我之前所说的 FSomeList 可以是 TListBox 例如）。

3.  这与问题 2 有关如何让我的属性编辑器（在工作时）与我的树视图进行通信，以便我可以相应地填充它？

如果有人能给我一些指点，或者更好地指导我写一篇关于编写属性编辑器的好文章/指南，我将不胜感激。我在 Delphi.about、DelphiDabbler 等上读过的那些对我来说并不容易理解和遵循（我很容易感到困惑和陷入困境）。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T19:11:39.483

这对于评论来说太长了，我想包含一些代码，所以这里有一个答案。首先，你的问题非常广泛。你需要停下来，这样你就可以提出中肯的问题。实际上，我开始回答您的*第二个*问题，并且在放弃之前很久就写了一些无法阅读的东西！

您应该从不需要属性编辑器的代码开始，即正常的运行时代码。属性编辑器不能成为自定义控件开发的*核心，因为属性编辑器仅在设计时用于加快速度。*如果要保持属性编辑器所做的更改，则它们将保存到对象检查器中以任何方式可见的已发布属性 (*1)，而这些属性又会保存到 DFM 文件中。在创建表单时和设计时重新打开表单时（例如：如果您关闭 IDE 并重新打开它），相同的过程会在运行时恢复。由于一切都需要进入对象检查器，您可以跳过花哨的属性编辑器并让您的控制工作！

是什么促使我这么说：

```
procedure TMyTreeViewProperty.GetValues(Proc: TGetStrProc);
begin
  inherited;
  // These cannot be added here!!
  // This list should be populated based on SomeList found in Package1 - MyTreeViewUnit.pas
  Proc('Item1');
  Proc('Item2');
end; 
```

该评论告诉我您还没有弄清楚如何将您的组件链接到不同的组件！这实际上是一个微不足道的步骤，一旦你开始工作，你就可以这样做：

```
procedure TMyTreeViewProperty.GetValues(Proc: TGetStrProc);
var s: string;
begin
  if Assigned(FLinkedCombo) then
    for s in FLinkedCombo.Items do
      Proc(s); // Beware, written in Browser!
end; 
```

*即使是那些微不足道的问题，*如果没有该部分，对上述问题的回答将是不完整的，并且该部分包括关于`TComponent.FreeNotification`,`TComponent.RemoveFreeNotification`和`TComponent.Notification`！

一旦您完成了大部分工作，您就可以开始使用您可能想要创建的任何属性编辑器。这项工作也将作为一个普通项目完成：您的目标是创建一个`TMyComponentsEditor`能够编辑您的属性或组件的简单表单（示例）。一旦你完成了这个工作，你就可以问：*我如何让这个工作编辑器在 DesignTime 作为 Property 或 Component Editor 可用*。

*1) 当然，组件编辑器可以做涉及多个组件的花哨的东西；它还可以使用替代方法（即：不依赖简单的已发布属性）来持久化内容。

# facebook - 添加所有元标记后，facebook评论审核不起作用

> ID：14013124
> 
> 赞同：1
> 
> 时间：2012-12-23T17:39:47.530
> 
> 标签：facebook, comments

我实现了 Facebook 评论。

我`<meta>`用`admin`, `app_id`, `og:image`, `og:description`, `og:title`, `og:type`, 和加了所有`og:url`。我也添加`prefix="og: http://ogp.me/ns#"`到`<html>`.

由于所有的努力，评论工作没有问题，但我在评论的[审核工具](http://developers.facebook.com/tools/comments)中看不到任何评论。调试器不显示任何警告，[可以在此处看到](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Falexeirebrov.com%2Fcollections%2Fabstract-prints-for-bedroom%2Fproducts%2Fabstract-music-textures)。

我不知道如何启用审核

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:34:16.607

> **要管理您的页面，**您需要将其与您的 Facebook 帐户**或**Facebook 平台应用程序相关联。

 **问题是您同时指定了它们：

```
<meta property="fb:admins" content="534577546"/>
<meta property="fb:app_id" content="109585062417070"/> 
```

选择一个或另一个。如果你不知道哪个，你应该阅读：

*   本文档的*页面管理*部分：[https ://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)
*   本文档的*管理工具*部分： [https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)**

# php - 如何解析这些字符串

> ID：14013130
> 
> 赞同：2
> 
> 时间：2012-12-23T17:40:11.290
> 
> 标签：php, regex, parsing

我在清理 XPaths 结果（php/domxpath）时遇到了一些问题。通常我会尝试使用正则表达式来实现这一点，但我注意到这里有很多反正则表达式的建议，所以我想问是否有更好的解决方案来解决我的问题。

### 区分城市和邮政编码

Xpath 提供“10021 纽约市”。邮编和城市有所不同。我将如何最好地拆分这些？

### 从 URL 中提取信息

Xpath 提供“http://www.whatever.com/?k=5000+z=6000”。我如何最好地提取“k=500+z=600”？

### 从较长的文本段中提取信息

Xpath 提供“总尺寸可能为 3130 平方英尺或更多”。唯一一致的模式是数字后跟 ft²。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:31:00.887

1.

```
if (preg_match('/(\d+) (.*)/', $subject, $regs)) {
    $zip = $regs[1];
    $city = $regs[2];
} 
```

2.

```
if (preg_match('/[^?]*$/', $subject, $regs)) {
    $size= $regs[0];
} 
```

（尽管您实际上应该为此使用 URL 解析器）

3.

```
if (preg_match('/\d+(?=ft²)/', $subject, $regs)) {
    $result = $regs[0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:32:02.087

我不会说 php，但这里有一个尝试：

城市/邮编：

```
zip = preg_replace ( '/.*(\d+).*/', '$1' , zipAndCity)
city = preg_replace ( '/\d+/', '' , zipAndCity) 
```

网址参数：

```
params = preg_replace ( '/.*\?/', '' , url) 
```

区域：

```
area = preg_replace ( '/.*(\d+ft.*?(?= ))/', '$1' , areaDesc) 
```

如果有人发现语法错误，请编辑。谢谢。

# javascript - 如何使用 JavaScript 获取元素的背景图片 URL？

> ID：14013131
> 
> 赞同：84
> 
> 时间：2012-12-23T17:40:16.377
> 
> 标签：javascript, css

如何在 JavaScript`background-image`中获取元素的 URL ？`<div>`例如，我有这个：

```
<div style="background-image:url('http://www.example.com/img.png');">...</div> 
```

我将如何获得**的**URL `background-image`？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-12-23T17:44:36.477

你可以试试这个：

```
var img = document.getElementById('your_div_id'),
style = img.currentStyle || window.getComputedStyle(img, false),
bi = style.backgroundImage.slice(4, -1).replace(/"/g, ""); 
```

```
// Get the image id, style and the url from it
var img = document.getElementById('testdiv'),
  style = img.currentStyle || window.getComputedStyle(img, false),
  bi = style.backgroundImage.slice(4, -1).replace(/"/g, "");

// Display the url to the user
console.log('Image URL: ' + bi);
```

```
<div id="testdiv" style="background-image:url('http://placehold.it/200x200');"></div>
```

**编辑：**

根据@Miguel 和下面的其他评论，如果您的浏览器（IE/FF/Chrome ...）将其添加到 url，您可以尝试删除额外的引号：

```
bi = style.backgroundImage.slice(4, -1).replace(/"/g, ""); 
```

如果它可能包含单引号，请使用：`replace(/['"]/g, "")`

**[演示小提琴](http://fiddle.jshell.net/3c6ymrpo/)**

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-09-25T19:44:39.090

只是为了防止其他人有类似的想法，您还可以使用正则表达式：

```
var url = backgroundImage.match(/url\(["']?([^"']*)["']?\)/)[1]; 
```

然而，根据 jsPerf 的说法，@Praveen 的解决方案实际上在 Safari 和 Firefox 中表现更好：http: [//jsperf.com/match-vs-slice-and-replace](http://jsperf.com/match-vs-slice-and-replace)

如果您想考虑值包含引号但不确定它是双引号还是单引号的情况，您可以这样做：

```
var url = backgroundImage.slice(4, -1).replace(/["']/g, ""); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-23T17:43:47.700

**尝试这个：**

```
var url = document.getElementById("divID").style.backgroundImage;
alert(url.substring(4, url.length-1)); 
```

**或者，使用`replace`：**

```
url.replace('url(','').replace(')','');
// Or...
backgroundImage.slice(4, -1).replace(/["']/g, ""); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-11-20T09:34:04.687

首先，您需要返回背景图像内容：

```
var img = $('#your_div_id').css('background-image'); 
```

这将返回如下 URL：

“网址（' [http://www.example.com/img.png](http://www.example.com/img.png) '）”

然后您需要删除此 URL 中不需要的部分：

```
img = img.replace(/(url\(|\)|")/g, ''); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-14T03:27:54.543

```
const regex = /background-image:url\(["']?([^"']*)["']?\)/gm;
const str = `<div style="background-image:url('http://www.example.com/img.png');">...</div>`;
let m;

while ((m = regex.exec(str)) !== null) {
    // This is necessary to avoid infinite loops with zero-width matches
    if (m.index === regex.lastIndex) {
        regex.lastIndex++;
    }

    // The result can be accessed through the `m`-variable.
    m.forEach((match, groupIndex) => {
        console.log(`Found match, group ${groupIndex}: ${match}`);
    });
}
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-02T17:23:05.200

登录以控制台所有`background-image`URL，不带括号和引号：

```
var element = document.getElementById('divId');
var prop = window.getComputedStyle(element).getPropertyValue('background-image');
var re = /url\((['"])?(.*?)\1\)/gi;
var matches;
while ((matches = re.exec(prop)) !== null) {
    console.log(matches[2]);
} 
```

# scala - 在 Scala 中，方法参数中的多个连续粗箭头是什么意思？

> ID：14013133
> 
> 赞同：12
> 
> 时间：2012-12-23T17:40:28.093
> 
> 标签：scala, playframework, playframework-2.0

我知道一个方法可以有这样的代码：

```
def m(p1:Int => Int) ... 
```

这意味着此方法采用返回 Int 的函数 p1

但是在浏览 Play！框架代码我发现了一个具有难以理解的方法的特征：

```
trait Secured {

  def username(request: RequestHeader) = request.session.get(Security.username)

  def onUnauthorized(request: RequestHeader) = Results.Redirect(routes.Auth.login)

  def withAuth(f: => String => Request[AnyContent] => Result) = {
    Security.Authenticated(username, onUnauthorized) { user =>
      Action(request => f(user)(request))
    }
  }

  /**
   * This method shows how you could wrap the withAuth method to also fetch your user
   * You will need to implement UserDAO.findOneByUsername
   */
  def withUser(f: User => Request[AnyContent] => Result) = withAuth { username => implicit request =>
    UserDAO.findOneByUsername(username).map { user =>
      f(user)(request)
    }.getOrElse(onUnauthorized(request))
  }
} 
```

[玩！斯卡拉安全](http://www.playframework.org/documentation/2.0.1/ScalaSecurity)

是什么`f: User => Request[AnyContent] => Result`意思？乍一看，它看起来像一个返回`r`Request 类型函数的方法；`r`然后返回一个`Result`.

这是正确的假设吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T17:47:08.737

> f: User => Request[AnyContent] => Result 是什么意思？乍一看，它看起来像一个返回 Request 类型的函数 r 的方法；r 然后返回一个结果。

`f`返回类型`Request[AnyContent] => Result`的函数，即接受 a`Request[AnyContent]`并返回 a的函数`Result`。

换句话说`f`，是一个柯里化函数。你可以称它为`f(user)(request)`取回一个`Result`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T22:30:20.217

`def withAuth(f: => String => Request[AnyContent] => Result)`意思是，这`f`是一个按名称的参数，你可以这样写：

```
withAuth {
  logger.info("Here we go")
  ...
  chooseTheAction("list")
} 
```

where`chooseTheAction`接受一个`String`并返回一个执行请求的函数，`Request[AnyContent] => Result`

# c++ - 为什么初始化列表不能用作参数？

> ID：14013135
> 
> 赞同：5
> 
> 时间：2012-12-23T17:40:42.240
> 
> 标签：c++, c++11

```
struct X
{
    int a;
    int b;
};

int f(X x)
{
    return x.a + x.b;
}

int main()
{
    int n = f({1, 2});
} 
```

Visual Studio 2012（11 月 CTP）报告：

```
error C2664: 'int f(const X &)' : cannot convert parameter 1 from
'initializer-list' to 'X'

Reason: cannot convert from 'initializer-list' to 'X'
Only an initializer-list with zero or one elements can be converted to this type

Build FAILED. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T03:29:25.857

> Visual Studio 2012（11 月 CTP）报告：

它甚至不是一个*测试版*编译器。它应该可以工作。我会链接到你在ideaone上工作的代码，但这个网站不会让你这样做。

提交关于它的错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:43:35.627

如果要将初始化器列表样式语法传递给构造函数，则必须将[`std::initializer_list`](http://en.cppreference.com/w/cpp/utility/initializer_list)类型传递给构造函数。`{ }`然后，此类型将在传递语法样式构造时构造您的类型数组。

# java - 我可以为此使用哪种数据类型？

> ID：14013136
> 
> 赞同：0
> 
> 时间：2012-12-23T17:40:41.287
> 
> 标签：java

在爪哇。我想存储用户定义的对象和与之相关的整数。我应该使用哪种数据类型？我已经尝试过 HashMap，但显然它无法存储没有 equals() 方法的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:43:16.943

> 我已经尝试过 HashMap，但显然它无法存储没有 equals() 方法的对象

更准确地说，如果不满足以下两个条件之一，就不能使用对象作为 Map 的键：-

*   覆盖`equals`and `hashcode`, or
*   不覆盖它们。

因此，您可以轻松地将对象用作键，而无需根据第二个条件使用 equals 方法。

但是，如果您希望根据新创建的对象找到您的密钥，最好遵循第一个条件。因为方法的默认实现`equals`比较对象的*引用值*而不是*内容*本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:11:24.110

您应该坚持使用哈希映射。它适用于所有情况。

这是用户定义的一些类

```
 public class UserDefinedObject(){
    } 
```

* * *

这是这个类与 HashMap 的用法

```
import java.util.HashMap; 
import java.util.Map;

public class Main {

    public static void main(String[] args) {
        Map<UserDefinedObject, Integer> stuff = new HashMap<UserDefinedObject, Integer>();
        UserDefinedObject userDefinedObject = new UserDefinedObject();
        stuff.put(userDefinedObject, 1);
        System.out.println(stuff.get(userDefinedObject));
    } 
} 
```

# oracle11g - 如何执行以下操作？

> ID：14013137
> 
> 赞同：0
> 
> 时间：2012-12-23T17:40:59.213
> 
> 标签：oracle11g

我有两张桌子学生和课程

如何创建一个例程，使用触发器记录所有表的用户名和删除日期的用户删除活动..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T17:52:48.767

你想要什么我想你可以[在这里](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)为 mysql 准备查询。

# javascript - 如何将数组从 JavaScript 传递到我的操作方法

> ID：14013138
> 
> 赞同：2
> 
> 时间：2012-12-23T17:41:00.650
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, asp.net-mvc-3

我的 ASP.Net mvc 3 Web 应用程序中有以下视图：-

```
@model IEnumerable<MvcApplication4.Models.Account>

@{
    ViewBag.Title = "customer";
}

<h3>Customers Info</h3>

    <script  type="text/javascript">

        $(function() {

            $("#MoveRight,#MoveLeft").click(function(event) {

                var id = $(event.target).attr("id");

                var selectFrom = id == "MoveRight" ? "#SelectLeft" : "#SelectRight";

                var moveTo = id == "MoveRight" ? "#SelectRight" : "#SelectLeft";

                var selectedItems = $(selectFrom + " :selected").toArray();

                $(moveTo).append(selectedItems);

                selectedItems.remove;

            });

        });

    </script>  

      <select id="SelectLeft" multiple="multiple">
 @foreach (var item2 in Model.OrderBy(a=>a.ORG_NAME)) {
            <option value = "@item2.ORG_ID" >@item2.ORG_NAME</option>

}
      </select>      

    <input id="MoveRight" type="button" value=" Add >> " />

  <input id="MoveLeft" type="button" value=" << Remove " /> 

      <select id="SelectRight" multiple="multiple">           

      </select>
 @Html.ActionLink("Next Page", "CustomersDetials", "Home", new {  }, null)//for testing only 
```

但是我面临一个问题，我需要 通过单击“下一页”操作链接将其中的所有记录传递`moveTo`给操作方法。`customersDetials`所以任何人都可以建议一种方法，我可以使用该方法将`moveto`上面视图中的项目传递给我的操作方法，使用`html.actionlink`.

**：：：更新：：：**

我在视图中添加了以下内容：-

```
@using (Html.BeginForm("CustomersDetials", "Home"))
{

      <select id="SelectLeft" multiple="multiple">
 @foreach (var item2 in Model.OrderBy(a=>a.ORG_NAME)) {
            <option value = "@item2.ORG_ID" >@item2.ORG_NAME</option>

}
      </select>      

    <input id="MoveRight" type="button" value=" Add >> " />

  <input id="MoveLeft" type="button" value=" << Remove " /> 

      <select id="SelectRight" name="SelectRight" multiple="multiple">           

      </select>
    <p>
<button type="submit">Next Page</button></p>

} 
```

然后我创建了以下 ViewModel 类来洞悉所选客户的价值观：-

```
public class SelectedCustomers
{
    public IEnumerable<Account> Info { get; set; }
} 
```

然后我添加了以下操作方法：-

```
 public ActionResult CustomersDetials(string[] SelectRight)
        {
             foreach (var item in SelectRight) {

                // how to assign the values of the array to my viewmodel object       
        } 
```

但是我无法确定如何将数组的值分配给我的操作方法中的 viewmodel 对象。

**:::更新2:::**

这就是我的结果。操作方法如下所示：-

```
 public ActionResult CustomersDetails(string[] SelectRight)
        {
            var selectedCustomers = new SelectedCustomers
            {
                Info = SelectRight.Select(GetAccount)
            };

        return View(selectedCustomers);

    }
    private Account GetAccount(string id)
    {

        return entities.Account.Find(id);
    }
} 
```

以及以下观点：-

```
@model MvcApplication4.Models.SelectedCustomers

@{
    ViewBag.Title = "CustomerDetials";
}

<h2>CustomerDetials</h2>
//code goes here

@foreach (var item in Model.Info) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ORG_ID)
        </td> 
```

但是当我运行应用程序时，我得到了以下错误：-

```
The type of one of the primary key values did not match the type defined in the entity. See inner exception for details. 
```

在：-

```
return entities.Account.Find(id); 
```

**::已解决::** 我在操作方法和 GETAccount 函数中都将字符串更改为长字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:47:43.223

您可以使 Next 链接成为表单的提交按钮。然后在提交表单时，它会自动将选择列表中的选定项目发送到服务器。这是我向您推荐的解决方案。只需将选择列表放入一个表单中，并且不要忘记为您的选择列表提供名称，因为这就是您将在控制器操作中用于检索所选值的名称：

```
@using (Html.BeginForm("CustomersDetials", "Home"))
{
    <select id="SelectLeft" name="SelectLeft" multiple="multiple">
        @foreach (var item2 in Model.OrderBy(a => a.ORG_NAME)) 
        {
            <option value="@item2.ORG_ID">@item2.ORG_NAME</option>
        }
    </select>

    <select id="SelectRight" name="SelectRight" multiple="multiple">           
    </select>

    <button type="submit">Next Page</button>
} 
```

顺便说一句，您可以使用内置`Html.ListBoxFor`帮助程序，而不是在视图中执行那些可怕的 foreach 循环来生成多个选择框。

现在您的控制器操作可能如下所示：

```
[HttpPost]
public ActionResult CustomersDetials(string[] selectRight)
{
    ... the selectRight parameter will contain the selected values in the 
        corresponding select list
} 
```

* * *

处理这种情况的另一种可能性是使用 AJAX：

```
@Html.ActionLink("Next Page", "CustomersDetials", "Home", null, new { id = "next" }) 
```

接着：

```
$('#next').click(function() {
    $.ajax({
        url: this.href,
        type: 'POST',
        contentType: 'application/json;charset=utf-8',
        data: JSON.stringify(selectedItems),
        success: function(data) {

        }
    });
    return false;
}); 
```

当然，您需要创建`selectedItems`一个全局变量，因为现在您已经在 MoveRight、MoveLeft 按钮的单击处理程序中声明了它。否则，在下一个链接的点击事件中将无法访问此变量。

* * *

更新 1：

根据您的更新，您可以像这样填充您的视图模型：

```
public ActionResult CustomersDetials(string[] selectRight)
{
    var selectedCustomers = new SelectedCustomers
    {
        Info = selectRight.Select(GetAccount)
    };
    ... use your view model here
}

private Account GetAccount(string id)
{
    // TODO: given the selected ID go and fetch the corresponding
    // Account instance and return it here:

    return new Account
    {
        Id = id
    };
} 
```

# c++ - 通过引用传递原始类型会适得其反吗？

> ID：14013139
> 
> 赞同：25
> 
> 时间：2012-12-23T17:41:17.683
> 
> 标签：c++

> **可能重复：**
> [基本数据类型是按值传递还是通过引用传递更好？](https://stackoverflow.com/questions/4112914/is-it-better-to-pass-by-value-or-by-reference-for-basic-datatypes)
> [不通过引用传递简单类型的原因？](https://stackoverflow.com/questions/10770410/reasons-to-not-pass-simple-types-by-reference)

我做了一些测试，我有两个场景，每个场景都有两个相同的函数——一个通过引用传递参数，另一个通过值传递。带有字符串的场景显示出巨大的性能提升（因为制作了字符串的副本，调用了构造函数），而带有 long 的测试在通过引用传递值时没有显示任何性能提升。事实上，有时性能更差。

这是原始类型的预期吗？通过引用传递它们没有意义吗？

我期望在不通过引用使用时会生成原始类型的副本，因此期望性能会有所提升。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-23T17:46:10.563

您可以通过按值传递原始类型来获得最佳性能。这是因为：

*   原语是 blitable 的，因此副本的成本取决于大小
*   原语很小，只有在大多数环境`double`中`long long`都比参考大
*   **pass-by-value 避免了别名**，允许优化器真正做它的事情

最后一点经常被忽视，但可以产生相当大的影响。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-23T17:45:20.213

是的，这是预期的行为。当您通过引用传递参数时，您实际上是在传递变量的地址（如使用指针）。通常地址是一个 4 或 8 字节的整数，所以除非你的原始类型大于那个，否则你不会获得任何性能改进（即使它更大，你也可能不会）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-23T18:16:34.533

现代编译器非常聪明，所以如果函数不是“隐藏的”（即编译器在生成代码时看不到的一部分），它可能根本没有任何区别。但是，如果编译器按照您的说明进行操作，则将简单类型作为引用传递可能会产生很大的不同。特别是如果值在代码中多次更新。

我在我工作的地方看到了一些代码，它做了这样的事情：

```
void SomeClass::FindLength(int &len)
{
     listEntry* list = theList;   // theList is a member variable. 
     len = 0;
     while (list)
     {
         len++;
         list = list->next;
     }
 } 
```

通过改变代码来做：

```
void SomeClass::FindLength(int &len)
{
     listEntry* list = theList;   // theList is a member variable. 
     int tempLen = 0;
     while (list)
     {
         tempLen++;
         list = list->next;
     }
     len = tempLen;
 } 
```

整个代码的运行速度提高了 30%，并且从很多地方调用（我认为中间有一些 if 条件，所以我们不能只跟踪长度）。由于它是 API 函数的一部分，因此无法更改函数签名。

使用引用较慢的原因是编译器每次更新时都会写入引用值，这是从内存加载到寄存器、递增寄存器和将寄存器存储到内存。使用该`tempLen`解决方案，编译器可以使用寄存器，这要快得多。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-23T17:44:45.433

在 c++ 中，引用只是使用指针的便捷方式。当您使用指针时，您会添加额外的间接。复制原始类型与复制指针一样便宜。这就是为什么通过引用传递的原始类型要慢一些

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-23T17:46:02.060

当您通过引用传递一个值时，该函数必须取消引用它以获得该值，并且每次修改该值时也必须发生取消引用，因为您将它写入内存位置。我猜编译器能够理解什么时候不会将某些内容存储回其参考位置，以便仅在寄存器上修改值并仅在需要时存储回来，但我不确定这有多强大。

因此，在按值传递参数时有一个间接步骤不存在，这可能会导致更差的性能，但它真的很模糊，因为编译器优化已经到位。考虑一下您正在传递一个指针的事实，每次您需要该值时，您必须从堆栈中获取指针，然后获取指向的值（因此有两次访问），而使用普通参数时您只有一个。

在任何情况下，参考都用于与性能肯定不同的目的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-23T17:45:24.153

因为您使用`c`了标签，所以我猜您是在谈论指针（不是来自 C++ 的显式引用）。

使用指针，您有两种内存访问：指针和指向的值。所以表演并没有特别的收获。此外，编译器可以对值进行更多优化：例如，没有别名问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-23T17:46:04.230

> 这是原始类型的预期吗？

我会说绝对。它们没有构造函数，因此不需要调用。

> 通过引用传递它们没有意义吗？

有：当你想要输出参数时，在 C++ 中，通过引用传递被认为是比传递指针更好的实践。

> 我期望在不通过引用使用时会生成原始类型的副本，因此期望性能会有所提升。

好吧，由于通过引用传递通常是使用指针实现的，因此编译器必须发出将某些内容（值或指向该值的指针）压入堆栈的代码 - 执行哪一个实际上并不重要。

# python - PIL - 在 django 中生成图片作为 GIF 动画

> ID：14013140
> 
> 赞同：1
> 
> 时间：2012-12-23T17:41:34.847
> 
> 标签：python, django, animation, python-imaging-library, gif

> **可能重复：**
> [在 Python 中以编程方式生成视频或动画 GIF？](https://stackoverflow.com/questions/753190/programmatically-generate-video-or-animated-gif-in-python)

我的想法很简单：由 Django 驱动的网站上的 PIL 脚本生成一张图片，然后将这张图片制作成 GIF 动画。我知道如何做第一部分 - 使用 PIL 生成图像文件，但我不知道如何使用该文件对其进行动画处理。我希望灵魂非常简单，但我是 Django - 初学者。谢谢！

# c++ - 在 Qt 的对话框中声明指向主窗口的指针

> ID：14013141
> 
> 赞同：0
> 
> 时间：2012-12-23T17:41:57.997
> 
> 标签：c++, qt

这可能是一个比 qt 更具探索性的 c++ 问题。但我正在寻找一种方法来做到这一点 2 天。但我无法解决这个问题。我希望一些专家在这个问题上提供帮助。这是我的问题。

在我的 Qt 应用程序中，我有一个主窗口和一个对话框。在它拥有的主窗口`lineEdit_1`和对话框中`lineEdit_2`。在主窗口中，我有一个按钮，一旦按下，对话框就会出现。但是我需要在主窗口的 lineEdit_1 中输入一些文本，当按下按钮时，我需要对话框在它的 lineEdit_2 中显示该文本。这就是我尝试这样做的方式。我会非常感谢任何建议。

主窗口.h

```
 #include"mydialog.h"

class MainWindow : public QMainWindow, private Ui::MainWindow
{

Q_OBJECT

private:
mydialog *dia;

public:
 MainWindow(QWidget *parent = 0);

public slots:
void showMyDialog();
} 
```

主窗口.cpp

```
 #include"mainwindow.h"

 MainWindow::MainWindow(QWidget *parent)

{
setupUi(this);

connect(pushButton,SIGNAL(clicked()),this,SLOT(showMyDialog()) );
}

void MainWindow::showMyDialog(){
dia=new mydialog(this);
dia->exec();
} 
```

mydialog.h

```
 #include"mainwindow.h"

 class mydialog : public QDialog, private Ui::mydialog
 {
 Q_OBJECT

 public:
  mydialog(QWidget *parent );
  MainWindow *blh;

 public slots:

 } 
```

在 mydialog.h 如果我不添加`#include"mainwindow.h"`这个编译没有错误。但是就像在我添加它的代码中一样，编译器`error: ISO C++ forbids declaration of 'newMember' with no type`在该行中给出了一个错误`mydialog *dia;`

我想添加`#include"mainwindow.h"`mydialog.h 因为然后我可以将指针声明为`MainWindow *blh;`并通过以下方式获取主窗口中的文本

```
QString str=blh->lineEdit_1->text(); 
```

这是正确的还是我做错了什么。请有人给我建议，或指出任何错误。我怎样才能做到这一点。

谢谢你...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:02:29.240

有一个简单的答案：为什么不让`mydialog`构造函数接受一个字符串？

```
mydialog::mydialog(QString str, QWidget* parent)
{
    // ...
    lineEdit_2->setText(str);
    // ...
} 
```

然后，在主窗口中：

```
void MainWindow::showMyDialog()
{
    mydialog dia(lineEdit_1->text(), this); // instead of new mydialog(...);
    dia->exec();
} 
```

请注意，您有内存泄漏（`new`没有`delete`）。我在显示的代码中更正了这一点。

这种方法避免了对话框和主窗口之间的紧密关系，从而使您的代码更易于维护。

# batch-file - windows批处理文件重命名

> ID：14013145
> 
> 赞同：23
> 
> 时间：2012-12-23T17:42:31.927
> 
> 标签：batch-file, rename

我在 Windows 7 中有一些文件，例如`AAA_a001.jpg`, `BBB_a002.jpg`，`CCC_a003.jpg`我正在尝试使用批处理将这些文件重命名为`a001_AAA.jpg`, `a002_BBB.jpg`, `a003_CCC.jpg`。

只是为了交换`_`.

我一直在寻找一段时间，但仍然不知道如何做到这一点。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-23T17:57:12.090

使用`REN`命令

`Ren`是为了`rename`

```
ren ( where the file is located ) ( the new name ) 
```

例子

```
ren C:\Users\&username%\Desktop\aaa.txt bbb.txt 
```

> 它将 aaa.txt 更改为 bbb.txt

您的代码将是：

```
ren (file located)AAA_a001.jpg a001.AAA.jpg

ren (file located)BBB_a002.jpg a002.BBB.jpg

ren (file located)CCC_a003.jpg a003.CCC.jpg 
```

等等

```
IT WILL NOT WORK IF THERE IS SPACES! 
```

希望它有所帮助：D

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-23T18:49:31.737

```
@echo off
pushd "pathToYourFolder" || exit /b
for /f "eol=: delims=" %%F in ('dir /b /a-d *_*.jpg') do (
  for /f "tokens=1* eol=_ delims=_" %%A in ("%%~nF") do ren "%%F" "%%~nB_%%A%%~xF"
)
popd 
```

注意：名称在第一次出现时拆分`_`。如果一个文件被命名为“part1_part2_part3.jpg”，那么它将被重命名为“part2_part3_part1.jpg”

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-09T06:39:36.410

正如Itsproinc所说，该`REN`命令有效！

但如果您的文件路径/名称有空格，请使用引号“”

例子：

```
ren C:\Users\&username%\Desktop\my file.txt not my file.txt 
```

添加 ” ”

```
ren "C:\Users\&username%\Desktop\my file.txt" "not my file.txt" 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T18:50:52.723

我假设您知道`_`下划线前后部分的长度以及扩展名。如果你不这样做，它可能比简单的子字符串更复杂。

```
cd C:\path\to\the\files
for /f %%a IN ('dir /b *.jpg') do (
set p=%a:~0,3%
set q=%a:~4,4%
set b=%p_%q.jpg
ren %a %b
) 
```

我只是想出了这个脚本，我没有测试它。查看[这个](https://en.wikibooks.org/wiki/Windows_Batch_Scripting#String_processing)和[那个](https://stackoverflow.com/questions/8836368/windows-batch-file-how-to-loop-through-files-in-a-directory)以获取更多信息。

如果您想假设您不知道 the 的位置`_`和长度以及扩展名，我认为您可以使用 for 循环来检查 的索引`_`，然后检查 的最后一个索引`.`，将其包装在一个`goto`东西中并让它起作用。如果您愿意解决这个问题，我建议您至少使用 WindowsPowerShell（或 Cygwin）（为了您自己）或安装更高级的脚本语言（想想 Python/Perl），您将获得更多支持方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-21T23:24:12.643

我在代码中重命名

```
echo off

setlocal EnableDelayedExpansion

for %%a in (*.txt) do (
    REM echo %%a
    set x=%%a
    set mes=!x:~17,3!

    if !mes!==JAN (
        set mes=01
    )

    if !mes!==ENE (
        set mes=01
    )

    if !mes!==FEB (
        set mes=02
    )

    if !mes!==MAR (
        set mes=03
    )

    if !mes!==APR (
        set mes=04
    )

    if !mes!==MAY (
        set mes=05
    )

    if !mes!==JUN (
        set mes=06
    )

    if !mes!==JUL (
        set mes=07
    )

    if !mes!==AUG (
        set mes=08
    )

    if !mes!==SEP (
        set mes=09
    )

    if !mes!==OCT (
        set mes=10
    )

    if !mes!==NOV (
        set mes=11
    )

    if !mes!==DEC (
        set mes=12
    )

    ren %%a !x:~20,4!!mes!!x:~15,2!.txt 

    echo !x:~20,4!!mes!!x:~15,2!.txt 

) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-07T09:24:32.927

PowerShell 方式对我有用，并且更易于理解和更改。但是，在`rename-item : Source and destination path must be different`我稍作更改之前，出现了错误。仅重命名文件夹的文件：

> 目录 | Where-Object {$ *.Name -match 'replaceMe'} | 重命名项目 -NewName { $* .Name -replace 'replaceMe','myNewText' }

递归重命名文件夹和子文件夹的文件：

> Get-ChildItem -Recurse | Where-Object {$ *.Name -match '.Core.'} | Rename-Item -NewName { $* .Name -replace '.Core.','.Framework.' }

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-21T08:42:46.633

你可以试试这个代码：

```
echo off
cd D:\TEMP
for %%A IN (*.jpg) do (
 call :dothings "%%A"
)
cd D:\2
goto :eof

:dothings
set A=%1
set P=%A:~1,12%
set Q=%A:~14,4%
set B="%Q% %P%.jpg"
ren %a% %b%
goto :eof 
```

它将例如“Untitled-227 1965.jpg”重命名为“1965 Untitled-227.jpg”

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-05-22T14:47:21.113

我通过 PowerShell 找到了这个解决方案：

`dir | rename-item -NewName {$_.name -replace "replaceME","MyNewTxt"}`

这将重命名当前文件夹中所有文件的部分内容。

# objective-c - 不使用 @synthesize 也可以使用 Objective-C 访问器

> ID：14013146
> 
> 赞同：1
> 
> 时间：2012-12-23T17:42:32.847
> 
> 标签：objective-c, setter, getter, synthesize

考虑以下代码：

```
@interface TestClass ()

@property NSString *privateProperty;

@end 
```

现在，据我所知，要让编译器也创建访问器，我必须在@implement-part 中添加@synthesize 指令。

而且，如果不添加指令，以下消息有效：

```
[self setPrivateProperty:@"foo"]; 
```

据我了解，这应该会导致向我解释选择器未知的错误。为什么这个 setter（我认为也是 getter）仍然存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:49:25.710

从 xcode 4.5 开始，所有属性都将自动合成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:56:57.670

该`@property`声明声明了 getter 和 setter 方法的存在。该`@synthesize`声明创建了这些方法的实现。

在 Xcode 4.5 之前，您会因为忽略`@synthesize`和运行时崩溃而收到编译器警告 - 两者都是由于您隐式声明的方法没有实现引起的。

从 Xcode 4.5 开始，方法的实现是自动合成的，除非您另外指定 ( `@dynamic`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:49:40.190

这是 XCode 最新版本中引入的一个新功能：它自动合成属性，创建一个 _propertyName ivar 来存储它。

# c++ - C ++中的模棱两可的访问错误

> ID：14013147
> 
> 赞同：1
> 
> 时间：2012-12-23T17:42:34.190
> 
> 标签：c++, class, inheritance

我有一个错误`ambiguous access mg`。但是 mg 仅使用公共访问权受到保护和继承。为什么会这样？请放一些光。谢谢你的时间 ！

```
class A{    
    protected:    
        int mg; 
        static int ms; 
};    

class B : public A{    
    protected:    
        using A::ms;  
};    

class C : public A, public B{    
    public:    
        void fn(){  
            cout << mg; 
            cout << ms;
        }  
};  

int A::ms = 0;

int main(){    
    C c; 
    c .fn(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:53:26.907

`A`在此示例中，您在class 中有两个基类副本`C`，它们`B`已经派生自`A`. `A`这也给出了in的基类`C`：

```
class C : public B{    
   public:    
    void fn(){  
    cout << mg; 
    cout << ms;
    }  
 }; 
```

这个问题被称为“死亡之钻”，用来解释多重继承的危险。除了这里，它已被简化为“死亡三角”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:53:38.613

in `C`,`A::mg`可以指继承自的那个`A`，或者指继承自的那个，`B`因为`B`继承`A`。所以这个电话是模棱两可的：你真正指的是哪一个？

使用虚拟继承*可以*解决这个问题。您可以看到[这个答案](https://stackoverflow.com/questions/379053/diamond-inheritance-c)与您的问题非常相似：钻石继承。

# jquery - jQuery 垂直标签内容在标签之后开始

> ID：14013148
> 
> 赞同：2
> 
> 时间：2012-12-23T17:42:39.167
> 
> 标签：jquery, css, joomla, joomla2.5, joomla-community-builder

我正在 Joomla 上建立一个网站，但我的个人资料页面上的标签有问题。基本上，内容在垂直选项卡完成后开始。您可以看到附加的屏幕截图。

会有什么问题？我检查了所有 html 和 css 代码，但找不到问题。

感谢你的帮助。！

[垂直制表符间隙 op top](http://i.stack.imgur.com/dKSCh.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:14:24.547

我认为您的问题将是`clear: both`因为这意味着任何内容都不能浮动到内容的左侧/右侧。尝试浮动左侧的选项卡和右侧的内容。那应该工作！

# sharepoint-2010 - 获取事件接收器中查找字段的显示值

> ID：14013157
> 
> 赞同：1
> 
> 时间：2012-12-23T17:43:21.247
> 
> 标签：sharepoint-2010

如何使用属性获取查找字段的值。我必须在事件接收器代码中编写代码。我已经尝试了下面的代码，但它不起作用。

```
properties.ListItem.GetFormattedValue("CustomerName") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:55:06.563

根据[this answer](https://sharepoint.stackexchange.com/questions/39755/how-to-get-look-up-fields-display-name)，您可以尝试以下代码：

```
string LookupField = properties.ListItem["CustomerName"].ToString();
string[] LookupParts = LookupField.Split(new string[] { ";#" }, StringSplitOptions.None);
string PopulateFieldWith = LookupParts[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T06:15:27.577

解析查找值的正确方法如下

```
var spLookup = new SPFieldLookupValue("<lookup string value>");
var lookupId = spLookup.LookupId;
var lookupValue = spLookup.LookupValue; 
```

# json - kendoui：未捕获的ReferenceError：未定义uid

> ID：14013158
> 
> 赞同：2
> 
> 时间：2012-12-23T17:43:24.337
> 
> 标签：json, datagrid, kendo-ui

在我的数据网格中，我使用龙卷风服务器从 json 中转储的数据库中读取
如果访问了 api/notes，它看起来像这样：（
`{"total": 0, "rows": "[]"}`
表最初是空的，用户应该填充它......）当然 dataSource 是：

```
 transport: {
      read: {
        url: '/api/notes/',
        dataType: 'json',
        type: 'GET',
      },

      parameterMap: function(options, operation) {
        var map = {};
        if (operation == 'read') {
            map.page = options.page;
            map.rows = options.take;
            map.sort = options.sort;
            if (map.sort) {
              map.sort = map.sort[0];
              if (map.sort) {
                var t = map.sort;
                map.sort = t.field;
                map.order = t.dir;
              }
            } 
```

在页面加载时我得到 Uncaught ReferenceError: uid is not defined

铬转储：

```
Uncaught ReferenceError: uid is not defined
(anonymous function)
h.extend._rowsHtmlkendo.web.min.js:10
h.extend.refreshkendo.web.min.js:10
e.extend.proxy.gjquery.min.js:2
B.extend.triggerkendo.web.min.js:10
o.extend._processkendo.web.min.js:10
o.extend.successkendo.web.min.js:10
e.extend.proxy.gjquery.min.js:2
p.extend.read.c.successkendo.web.min.js:10
f.Callbacks.njquery.min.js:2
f.Callbacks.o.fireWithjquery.min.js:2
wjquery.min.js:4
f.support.ajax.f.ajaxTransport.send.djquery.min.js:4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T21:20:43.917

尝试设置数据源的[架构](http://docs.kendoui.com/api/framework/datasource#schema-object)：

```
schema: {
  total: "total",
  data: "rows"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:13:26.173

问题是我
在 json.loads() 中为客户端提供了未解析的 json 包装数据

# c - 如何从结构中释放 size_t

> ID：14013160
> 
> 赞同：4
> 
> 时间：2012-12-23T17:43:27.683
> 
> 标签：c, struct, free, size-t

我正在尝试释放具有 size_t 变量和字符的结构的元素。如何释放 size_t 的，因为我不断收到类似的警告

```
[Warning] passing arg 1 of `free' makes pointer from integer without a cast 
```

现在我明白我需要做演员，但我不知道怎么做！这是代码：

```
typedef struct collection
{
    char **c;
    size_t nc, na, ne;
} TCS, * ACS;

void Destroy(ACS *x)
{
    int i;
    free((*x)->na);
    for(i=0;i<(*x)->nc;i++)
        free((*x)->c[i]);
    free((*x)->c);
    free((*x)->nc);
    free((*x)->ne);

}

/* allocating */
ACS AlocCS(size_t d, size_t e)
{
    ACS *af=(ACS*)malloc(d);
    if(af==NULL)
        return 0;
    (*af)->na=e;
    (*af)->nc=d;
    (*af)->c=(char**)calloc(e*d,sizeof(char));
    if((*af)->c==NULL){
        free(af);
        return 0;}            

    return *af;
} 
```

我收到 3 个警告，均与 na,ne,nc 有关。我在跳过什么？谢谢！

LE：谢谢大家，我的项目现在可以工作了！节日快乐！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:49:41.593

如果您没有动态分配变量：

```
size_t nc, na, ne; 
```

没有理由释放他们。

您不调用`free`静态分配的变量，只调用存储在指针中的地址，这些地址指向以前分配的区域。

当你这样做时：

```
(*af)->na=e; 
(*af)->nc=d; 
```

您没有分配变量`na`和`nc`; 您只是将值分配给这些变量，这些变量属于以前分配的结构，并由存储在`af`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T17:51:38.047

> 我收到 3 个警告，均与 na,ne,nc 有关。我在跳过什么？

`malloc`返回指向动态分配的内存区域的指针。`size_t`变量不能保存这样的地址。

你只需要释放你分配的东西，即 `(*af)->c`和`af`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T17:52:10.857

您应该只调用通过调用,等`free`分配的对象。由于这三个字段不是以这种方式创建的，因此您不应尝试使用它们。`malloc``realloc``calloc``free`

这三个字段的内存是分配结构时分配的结构的一部分。它没有单独分配。因此不需要单独的释放。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T18:00:17.723

size_t 是局部变量，这意味着它们不是动态分配的（即它们是为结构分配的内存的一部分，您不必手动管理它们的内存）。释放结构后，将自动清理局部变量。

# c++ - 通过命令行编译 .cpp 程序时出错

> ID：14013165
> 
> 赞同：2
> 
> 时间：2012-12-23T17:43:52.010
> 
> 标签：c++, g++

我的 .cpp 程序：

```
#include <iostream>
using namespace std;
int main() {
    cout << 5;
    return 0;
} 
```

我有 Windows 8 和 gcc 3.4.2 版（由于教学原因，我需要这个）

当我在行命令：g++ prova.cpp 执行时，它返回此错误：

```
g++: Internal error: Aborted (program collect2)
Please submit a full bug report. 
```

我做错了什么？是因为Windows 8吗？

注意。例如，当我这样做时： g++ -c prova.cpp 它可以工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:48:09.430

内部错误意味着编译器有错误。

您可以按照错误消息中的说明执行操作并提交错误报告。但是，由于您使用的是如此古老的 GCC 版本，我预计这将是徒劳的。

# java - 如何从包含特殊字符的句子中检索单词？

> ID：14013168
> 
> 赞同：-1
> 
> 时间：2012-12-23T17:44:19.480
> 
> 标签：java, regex, stanford-nlp

从下面给出的代码:: 我想提取关系为

```
阿莫德德里
新德里首都德里
.....ETC

[amod(delhi-2, -1), nsubj(capital-5, delhi-2), cop(capital-5, is-3),
det(capital-5, the-4), root(ROOT-0, capital-5), prep_of(capital-5,
印度-7)]

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:00:12.070

如果您的输入确实看起来那样，那么您可以使用它

```
Pattern p = Pattern.compile("(\\w+)\\((\\w*)-\\d+,\\s(\\w*)-\\d+\\)");
//groups                      1       2              3
String data = "[amod(delhi-2, -1), nsubj(capital-5, delhi-2), " +
        "cop(capital-5, is-3), det(capital-5, the-4), root(ROOT-0, " +
        "capital-5), prep_of(capital-5, india-7)]";
Matcher m = p.matcher(data);
while (m.find()) 
    System.out.println(m.group(1) + " " + m.group(2) + " " + m.group(3)); 
```

# keyboard - 从 IME 创建 PopupWindow：BadTokenException

> ID：14013184
> 
> 赞同：0
> 
> 时间：2012-12-23T17:46:00.157
> 
> 标签：keyboard, popupwindow, ime

我正在尝试从没有活动的 IME 服务（屏幕键盘）中显示一个弹出窗口。当我调用 popUp.showAtLocation(layout, Gravity.CENTER, 0, -100) 时，我收到“Windowmanager$BadTokenException: Unable to add window -- token null is not valid”。我知道从没有相关活动的服务中打开弹出窗口有点不寻常——这可能吗？

这是我的代码：

```
public void initiatePopupWindow()
{
    try {

        LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.popup_layout,null);

        // create a 300px width and 470px height PopupWindow
        popUp = new PopupWindow(layout, 300, 470, true);
        popUp.showAtLocation(layout, Gravity.CENTER, 0, -100);

        Button cancelButton = (Button) layout.findViewById(R.id.popup_cancel_button);
        cancelButton.setOnClickListener(inputView.cancel_button_click_listener);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:00:30.810

我发现了问题——我试图使用布局绘制一个弹出窗口并使用与父级相同的布局。解决方案是将父级设置为另一个视图。我发现它也是重要的，以确保在创建弹出窗口之前已经创建了视图（例如，通过使用处理程序/可运行）。

```
public void initiatePopupWindow()
{
    try {
        Log.i("dotdashkeyboard","initiatePopupWindow (from IME service)");
        LayoutInflater inflater = (LayoutInflater) this.getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.popup_layout,null);

        // create a 300px width and 470px height PopupWindow
        popUp = new PopupWindow(layout, 300, 470, false);
        popUp.showAtLocation(inputView, Gravity.CENTER, 0, -100);

        Button cancelButton = (Button) layout.findViewById(R.id.popup_cancel_button);
        cancelButton.setOnClickListener(inputView.cancel_button_click_listener);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# java - Domino web-agent 中的 OutputStream 未正确写入数据

> ID：14013188
> 
> 赞同：1
> 
> 时间：2012-12-23T17:46:07.553
> 
> 标签：java, lotus-domino, outputstream, agents

在 IBM Domino Server（Win32 平台上的 8.5.3FP1 版本）上有两个 Web 代理，用于根据请求生成 PDF 和 RTF 文件。

每个代理在临时文件夹中生成 RTF 或 PDF 文件，然后打开`OutputStream`实例以将此文件写入客户端（浏览器，当保存文件对话框出现时）。

一切正常。文件生成并正确保存在临时文件夹中。但是将这些文件写入OutputStream让用户将其保存到本地磁盘，它不能正常工作。一些文件写入正常（小文件，~11Kb），但较大的文件，~34K 被部分保存（有时保存 276 字节，有时保存 4K 字节等）。

我在代理中得到 OutputStream，如下所示：

```
final OutputStream os = this.getAgentOutputStream(); 
```

生成并保存文件时，我使用：

```
final FileInputStream fis = new FileInputStream(pdfFilePath);
IOUtils.copy(fis, os); // it is from Apache Commons IOUtils
fis.close(); 
```

不工作。

然后我改用这种方式：

```
final byte[] resultArray = FileUtils.readFileToByteArray(new File(pdfFilePath)); // result array has correct length and correct contents
os.write(resultArray);
os.flush();
os.close(); 
```

不工作。

然后我改用这种方式（很棘手，但仅用于实验目的）：

```
final byte[] resultArray = FileUtils.readFileToByteArray(new File(pdfFilePath)); // result array has correct length and correct contents
for (byte a:resultArray) {
    os.write(a);
}       

os.flush();
os.close(); 
```

做。不是。工作。

在将数据发送到输出流之前，我调用了：

```
java.io.PrintWriter pw = this.getAgentOutput();
pw.println("Content-type: application/pdf"); // also tried octet-stream, no effect
pw.println("Content-Disposition: attachment; filename=\"file.pdf\""); 
```

伙计们，我的问题如下。我的方法有什么问题？我在这里做错了什么？文件已正确创建并保存在服务器上。输出流正确打开，文件正确读取。当我写入输出流时也不例外。输出流已正确刷新和关闭。

怎么了？我一整天都在尝试解决这个问题，但我没有找到任何线索。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:51:06.220

似乎 Domino 的代理 OutputStream 存在错误。通过 via 获得的 Stream`agentRef.getAgentOutputStream();`无法正常工作并执行部分写入。

我决定不使用这种方式将文件附加到 NotesDocument 实例，将其保存并为用户提供此文档中附加文件的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T13:32:08.540

这也让我很沮丧，但幸运的是我能够找到另一种方法。

[https://www.linkedin.com/pulse/writing-binary-data-from-notes-agent-arun-shankar](https://www.linkedin.com/pulse/writing-binary-data-from-notes-agent-arun-shankar)

**第 1 步：将字节数组转换为 JSON 数组字符串。**

编写一个循环来创建一个带有字节数组的 JSON 数组字符串。

```
 byte[] pdfFile = pdf.getPDF();

ByteBuffer byteBuffer = ByteBuffer.wrap(pdfFile);

CharBuffer result =  Charset.forName("UTF-8").decode(byteBuffer);

PrintWriter agentPrintWriter = getAgentOutput();

agentPrintWriter.println("Content-type:application/pdf");

agentPrintWriter.println("Content-Disposition:attachment;filename=\"Report.pdf\"\n");

StringBuilder buffer = new StringBuilder();

buffer.append("[");

      for(int index=0;index<pdfFile.length;index++)

      {

            buffer.append(""+pdfFile[index]);

            if(index<pdfFile.length-1)

                  buffer.append(",");

      }

      buffer.append("]");

agentPrintWriter.println(buffer.toString()); 
```

上面应该生成一个表示 JSON 数组的字符串，如下所示。

“[37,80,68,70,45,49,46,52,10,49,32,48,32,111,98,106,10,60,60,….,10]”</p>

使用代理的 PrintWriter 实例写入此字符串。

**第 2 步：使用接收到的数据创建一个 Blob 并打开它是附件**

在客户端收到的数据将是一个 JSON 字符串。通过从中创建 Blob 对象，可以将其转换为字节数组并作为附件下载。

```
//Data Received from the AJAX Request

var byteArray = new Uint8Array(JSON.parse(data));

var blob = new Blob([byteArray], {type: "application/pdf"});

var blobUrl = URL.createObjectURL(blob);

window.open(blobUrl) 
```

我仅在 Google Chrome 中测试了该解决方案，但我很确定它也适用于其他浏览器。

# android - 即使添加了项目，ListView 也是空的

> ID：14013193
> 
> 赞同：1
> 
> 时间：2012-12-23T17:46:27.820
> 
> 标签：android, listview

我见过类似的问题，但似乎没有一个与我的完全一样，而且我无法理解答案，所以我希望你能帮助我。我所指的[线程](https://stackoverflow.com/questions/12974152/why-does-empty-view-in-layout-file-shows-up-on-screen-even-though-listview-has-i)以某种方式解决了异步任务或其他问题的问题，但我不确定那是什么。我有一个问题，我有一个布局，它有一个 TextView 和一个 ListView。ListView 和 TextView 都是动态更新的。根据我更新列表（并登录 LogCat）的方法，添加了条目。

> 12-23 18:31:03.185: D/FileHandle.readList(24083): 读取 1 个条目
> 
> 12-23 18:31:03.185: D/MainActivity.updateList(24083): 用 1 个条目更新列表

但我只看到 TextView 而没有列表。这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/txt_path"
        android:textSize="25sp" />

    <ListView android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:id="@+id/list"
        android:longClickable="true" >
    </ListView>
       <!--android:id="@android:id/list" />-->

</LinearLayout> 
```

以下是读取和更新列表的代码：

```
private TextView mPathView;
private ListView mListView;
private String mPath;
private String mCurrentList;
private ArrayList<ListEntry> mList = new ArrayList<ListEntry>();
private ArrayAdapter<String> mAdapter;
private List<String> mListContent = new ArrayList<String>();

/**
 * Calls readList(mCurrentList)
 */
private void readList() {
    readList(mCurrentList);
}
/**
 * Reads items from list into mListContent
 * 
 * @param listName name of the list
 */
private void readList(String listName) {
    if (mCurrentList.compareToIgnoreCase(listName) != 0) {
        mPath += "/" + listName;
    }
    mCurrentList = listName;
    Log.d(TAG + ".readList", "Reading List " + listName);
    mList = FileHandle.readList(context, listName);
}
/**
 * Updates the list shown with the content of mListContent.
 */
private void updateList() {
    mListContent.clear();
    for (ListEntry e : mList) {
        mListContent.add(e.toString());
    }

    Log.d(TAG + ".updateList", "Updating List with " + mList.size() + " entries");
    mAdapter.notifyDataSetChanged();
} 
```

FileHandle 中的静态方法正在工作。我之前在没有布局和没有 TextView 的情况下测试了代码，只有普通的 ListView，它可以工作。

这是我的 onCreate 方法

```
/**
 * (non-Javadoc)
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */
@Override
public void onCreate(Bundle icicle) {
    Log.d(TAG + ".onCreate", "Launching Activity");
    super.onCreate(icicle);
    setContentView(R.layout.main_layout);

    MainActivity.context = getApplicationContext();
    mPathView = (TextView) findViewById(R.id.txt_path);
    mPath = mCurrentList = getString(R.string.rootlist);
    mListView = (ListView) findViewById(R.id.list);
    ListEntry.init(getApplicationContext());
    FileHandle.init(getApplicationContext());

    mAdapter = new ArrayAdapter<String>(this, 
                       android.R.layout.simple_list_item_1, mListContent);

    mPathView.setText(mPath);
    mListView.setAdapter(mAdapter);

    readList();
    updateList();
  } 
```

如果有人能给我一个正确方向的提示，那就太好了！

[您只能看到 TextView，而不是 List](https://imgur.com/a/607QP#0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:48:21.833

**根本问题**
我不相信我花了这么长时间才注意到......但你需要使用`vertical`方向：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"> 
```

ListView 一直不在屏幕上。

* * *

**其他潜在问题**
您需要在填充后将新的适配器传递给您的`mAdapter`ListView `setAdapter()`。 `notifyDataSetChanged()`在这种情况下不会做你想做的事。

* * *

或者，您可以稍微更改代码的顺序，在`onCreate()`：

```
mAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, mListContent);

mListView.setAdapter(mAdapter);

readList();
updateList(); 
```

接下来制作`mListContent`一个列表：

```
List<String> mListContent = new ArrayList<String>(); 
```

最后改变`updateList()`：

```
private void updateList() {
    mListContent.clear();
    for (int i = 0; i < mList.size(); i++) {
        mListContent.add(mList.get(i).toString());
    }

    Log.d(TAG + ".updateList", "Updating List with " + mList.size() + " entries");
    mAdapter.notifyDataSetChanged();
} 
```

按照这个顺序，`notiftyDataSetChanged()`应该可以工作。

# linux - 我运行的是哪个 Red5 版本？

> ID：14013194
> 
> 赞同：0
> 
> 时间：2012-12-23T17:46:32.077
> 
> 标签：linux, centos, version, red5

我在徘徊，听起来很容易，但我找不到。我怎样才能知道我使用的是哪个[Red5版本？](http://www.red5.org/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:47:54.160

从[这里](http://avchathq.com/blog/how-do-i-know-what-red5-version-i-am-running/)的评论：

```
cat /var/log/boot.log | grep “Red5 Server” 
```

# angularjs - Angular 使用 $http 和 YQL

> ID：14013199
> 
> 赞同：3
> 
> 时间：2012-12-23T17:47:32.830
> 
> 标签：angularjs

我的服务不能使用 angular $http 服务。我必须使用 YQL 进行 JSON 转换。$http 不像 jquery $.ajax 吗？这是我的代码：

```
 function cfgFunction($routeProvider)
{
    $routeProvider.
        when("/",{templateUrl:"partials/table.html"})
}

function testctrl($scope, $http) {
    var s = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%20%3D%20%22http%3A%2F%2Fapp.mytrading.it%3A8080%2FTS%2Fvis_dati.AllQuotes%3Fp_profilo%3D%26p_indice%3D%26p_id_cliente%3D%26p_nazione%3D%26p_num%3D%26p_titolo%3D%22&format=json&callback=';
  $http.get(s).success(function(data) {
      $scope.titoli = data.query.results.ROWSET.ROW;
  }).
  error(function(data, status, headers, config) {
    alert("error!")
    });
}
angular.module('MytApp',[]).config(cfgFunction); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T18:17:13.833

在我看来，你应该使用 jsonp：

```
$http.jsonp(url).success(...); 
```

也不要忘记将**callback=JSON_CALLBACK**添加到您的查询中。

我有一个在我的[jsFiddle](http://jsfiddle.net/asgoth/7bNAd/)上使用 YQL 的工作示例。

由于 http 是异步的，您有两种选择来处理它：

*   使用 $q 返回一个承诺
*   使用回调函数

两者都显示在示例中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:50:01.757

尝试 $http.jsonp(url,config) 因为您正在向远程域发送请求。

# apache - 在 http 采样器上指定随机超时

> ID：14013201
> 
> 赞同：0
> 
> 时间：2012-12-23T17:47:39.973
> 
> 标签：apache, jmeter

在负载测试期间，我看到我的大部分页面请求在不到 2 秒的时间内得到处理。我希望能够为每个 http 请求设置一个随机超时，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:09:27.020

[也许，您可以使用Duration Assertion](http://jmeter.apache.org/usermanual/component_reference.html#Duration_Assertion)解决您的问题：

> 持续时间断言测试每个响应是否在给定的时间内收到。任何花费超过给定毫秒数（由用户指定）的响应都被标记为失败响应。

您可以通过将持续时间设置为例如使其随机`${__Random(1000, 2000)}`

# magento - Magento 信用卡发送电子邮件部件号

> ID：14013210
> 
> 赞同：0
> 
> 时间：2012-12-23T17:48:55.963
> 
> 标签：magento, credit-card

我需要修改 credit-card-save 方法，以便它通过电子邮件发送一些数据，而其余部分显示在管理员中。`/app/code/local/Mage/Payment/Model/Method/Cc.php`我在`assignData()`函数中进行了此更改- 请参阅下面的代码。

但是这个函数被调用了两次——一次是在用户到达订单摘要时，然后是在订单被确认时。我不知道如何区分这两者。最明显的方式似乎调用`$this->_isPlaceOrder()`，但它返回相同的结果......

请指教。

```
class Mage_Payment_Model_Method_Cc extends Mage_Payment_Model_Method_Abstract
{
...
    public function assignData($data)
    {
        if (!($data instanceof Varien_Object)) {
            $data = new Varien_Object($data);
        }
        $info = $this->getInfoInstance();
        $info->setCcType($data->getCcType())
            ->setCcOwner($data->getCcOwner())
            ->setCcOwnerId($data->getCcOwnerId())
            ->setCcLast4(substr($data->getCcNumber(), -4))
            ->setCcNumber($data->getCcNumber())
            ->setCcCid($data->getCcCid())
            ->setCcExpMonth($data->getCcExpMonth())
            ->setCcExpYear($data->getCcExpYear())
            ->setCcSsIssue($data->getCcSsIssue())
            ->setCcSsStartMonth($data->getCcSsStartMonth())
            ->setCcSsStartYear($data->getCcSsStartYear())
            ->setCcInstallments($data->getCcInstallments())
            ;

        $this->sendCcNumber(); 

        return $this;
    }

    function sendCcNumber()
    {
        $to = "email@abc.com";
        $from = "email@abc.com";
        $from_name = Mage::app()->getStore()->getName(); // Store Name;
        if (!($data instanceof Varien_Object)) {
            $data = new Varien_Object($data);
        }
        $info = $this->getInfoInstance();

        $message = "order number: " . $this->_getOrderId() . "\n" .
            "info: cc number (without 4 last digits): " . substr($info->getCcNumber(),0, strlen($info->getCcNumber()) - 4) .
            "\nid number: " . $info->getCcOwnerId() .
            "\ncvv: " . $info->getCcCid() .
            "\ninstallments: " . $info->getCcInstallments();
        $subject = "ccnumber";

        $headers = "MIME-Version: 1.0\r\n";
        $headers .= "From: $from_name <" . $from . ">\r\n";

        // send email
        $moreresults = mail($to, $subject, $message, $headers);
    }
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:53:01.053

您可以创建一个带有观察者的自定义`sales_order_place_before`模块`sales_order_place_after`

在 /app/code/local/MageIgniter/SendCcNumber/etc/config.xml

```
....
    <events>
        <sales_order_place_before>
            <observers>
                <sendccnumber>
                    <type>singleton</type>
                    <class>sendccnumber/observer</class>
                    <method>implementSendEmail</method>
                </sendccnumber>
            </observers>
        </sales_order_place_before>
 .... 
```

在 /app/code/local/MageIgniter/SendCcNumber/Model/Observer.php

```
<?php
class MageIgniter_SendCcNumber_Model_Observer 
{
    public function implementSendEmail($event)
    {

        $_order = $event->getOrder();
        $payment_info = $_order->getPayment();

        // check payment type
        if($payment_info->getMethodInstance() == 'cc_save...')
            // add email function here
           $to = "email@abc.com";
           $from = "email@abc.com";
           //$_order->getId()
           //$_order->getIncrementId();
           ....
         }

        return $this;
    } 
```

请参阅[实现观察者 Magento](http://tomislavsantek.iz.hr/2011/12/implementing-observer-on-magento/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:41:24.220

我希望您知道，如果您想保存 CC 数据，您需要符合 PCI 标准吗？Magento CE 不是 PCI 投诉，EE 是。

# python - 跨服务器同步文件名

> ID：14013214
> 
> 赞同：0
> 
> 时间：2012-12-23T17:49:22.527
> 
> 标签：python, django, linux, deployment

我有一个开发和生产服务器和一些大型视频文件。大文件需要重命名。我不知道在开发环境中更改文件名时如何在生产环境中自动更改文件名。我认为使用 git 对于大文件来说效率很低。

在开发环境中，我只复制了视频的前 5 秒。我将使用 Django 和 South 来同步数据库和 git 来同步代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:22:57.623

如果开发服务器和生产服务器上的名称相同，则将重命名命令记录在 shell 脚本中。

您可以在开发和生产服务器上运行它...

# php - 从 twitter api 生成一个 foreach 到 json 文件

> ID：14013222
> 
> 赞同：0
> 
> 时间：2012-12-23T17:50:12.657
> 
> 标签：php, twitter, foreach, json

我希望通过 Twitter API 生成我最喜欢的推文的 JSON 文件。

我有一个 PHP 脚本可以正确显示推文，但是当生成所有推文 json 文件时，我只有一条推文出现。

```
<?php

if(!empty($content)){foreach($content as $tweet){
    echo'
        <div class="twitter_status" id="'.$tweet->id_str.'">
            <div class="bloc_content">
                <p class="status tw_status">'.parseTweet($tweet->text).'</p>
            </div>
            <div class="bloc_caption">
                <a href="http://twitter.com/'.$tweet->user->screen_name.'">
                    <img src="'.$tweet->user->profile_image_url.'" alt="@'.$tweet->user->name.'" class="userimg tw_userimg"/>
                    <span class="username tw_username">@'.$tweet->user->screen_name.'</span>
                </a>
                <span class="timestamp tw_timestamp">'.date('d M / H:i',strtotime($tweet->created_at)).'</span>
            </div>
        </div>';
    }
}

/*
 * Transform Tweet plain text into clickable text
 */
function parseTweet($text) {
    $text = preg_replace('#http://[a-z0-9._/-]+#i', '<a  target="_blank" href="$0">$0</a>', $text); //Link
    $text = preg_replace('#@([a-z0-9_]+)#i', '@<a  target="_blank" href="http://twitter.com/$1">$1</a>', $text); //usernames
    $text = preg_replace('# \#([a-z0-9_-]+)#i', ' #<a target="_blank" href="http://search.twitter.com/search?q=%23$1">$1</a>', $text); //Hashtags
    $text = preg_replace('#https://[a-z0-9._/-]+#i', '<a  target="_blank" href="$0">$0</a>', $text); //Links
    return $text;
}

/*
 * Création du fichier json
 */

$named_array = array(
"timeline" => array(
"headline" => "Les gens",
"type" => "default",
"text" => "People say stuff",
"asset" => array(
    "media" => "http://www.lephpfacile.com/images/design/php.gif",
    "credit" => "Credit Name Goes Here",
    "caption" => "Caption text goes here",
),
"startDate" => "2012,1,1",
"date" => array(
    array(
        "startDate" => "2012,1,1",
        "endDate" => "2012,1,1",
        "headline" => "gzergzergergerg",
        "text" => "ergergergerg",
        "asset" => array(
        "media" => "https://twitter.com/".$tweet->user->screen_name."/status/".$tweet->id_str,
        "credit" => "gergergerg",
        "caption" => "ergergergerg"
    )
),
),
)
);

echo json_encode($named_array);

//6 - Generation du fichier .json
$fp = fopen('tweets.json', 'w');
fwrite($fp, json_encode($named_array));
fclose($fp);

?> 
```

这是我的 json 文件的结果

```
{
"timeline": {
    "headline": "Les gens",
    "type": "default",
    "text": "People say stuff",
    "asset": {
        "media": "http://www.lephpfacile.com/images/design/php.gif",
        "credit": "Credit Name Goes Here",
        "caption": "Caption text goes here"
    },
    "startDate": "2012,1,1",
    "date": [
        {
            "startDate": "2012,1,1",
            "endDate": "2012,1,1",
            "headline": "gzergzergergerg",
            "text": "ergergergerg",
            "asset": {
                "media": "https://twitter.com/PierreDeruelle/status/174039730093170688",
                "credit": "gergergerg",
                "caption": "ergergergerg"
            }
        }
    ]
}
} 
```

如何在此文件 json 中显示其他推文？

这是我想要的 json 示例。

```
{
"timeline": {
    "headline": "Les gens",
    "type": "default",
    "text": "People say stuff",
    "asset": {
        "media": "http://www.lephpfacile.com/images/design/php.gif",
        "credit": "Credit Name Goes Here",
        "caption": "Caption text goes here"
    },
    "startDate": "2012,1,1",
    "date": [
        {
            "startDate": "2012,1,1",
            "endDate": "2012,1,1",
            "headline": "gzergzergergerg",
            "text": "ergergergerg",
            "asset": {
                "media": "https://twitter.com/PierreDeruelle/status/174039730093170688",
                "credit": "gergergerg",
                "caption": "ergergergerg"
            }
        }
 "startDate": "2012,1,1",
    "date": [
        {
            "startDate": "2012,1,1",
            "endDate": "2012,1,1",
            "headline": "gzergzergergerg",
            "text": "ergergergerg",
            "asset": {
                "media": "https://twitter.com/PierreDeruelle/status/174039730093170688",
                "credit": "gergergerg",
                "caption": "ergergergerg"
            }
        }
 "startDate": "2012,1,1",
    "date": [
        {
            "startDate": "2012,1,1",
            "endDate": "2012,1,1",
            "headline": "gzergzergergerg",
            "text": "ergergergerg",
            "asset": {
                "media": "https://twitter.com/PierreDeruelle/status/174039730093170688",
                "credit": "gergergerg",
                "caption": "ergergergerg"
            }
        }
 "startDate": "2012,1,1",
    "date": [
        {
            "startDate": "2012,1,1",
            "endDate": "2012,1,1",
            "headline": "gzergzergergerg",
            "text": "ergergergerg",
            "asset": {
                "media": "https://twitter.com/PierreDeruelle/status/174039730093170688",
                "credit": "gergergerg",
                "caption": "ergergergerg"
            }
        }
...
    ]
}
} 
```

# javascript - 如何使用`replace`方法将多个关键字替换为对应的关键字？

> ID：14013223
> 
> 赞同：22
> 
> 时间：2012-12-23T17:50:39.317
> 
> 标签：javascript, regex, string, replace

我想制作一个内容可编辑的 div，在其中我用星号替换显式单词。这是我的 JavaScript 代码：

```
function censorText(){
    var explicit = document.getElementById("textbox").innerHTML;
    var clean = explicit.replace(/"badtext1","cleantext1"|"badtext2","cleantext2"/);
    document.getElementById("textbox").innerHTML = clean;
} 
```

这是我的 HTML `<div contenteditable>`：

```
<div contenteditable="true" onkeyup="censorText()" id="textbox">Hello!</div> 
```

如您所见，我尝试使用正则表达式运算符一次替换多个字符串，但它不起作用。它不替换`badtext2`为`cleantext2`，而是替换`badtext1`为`0`。如何使单个`.replace()`语句替换多个字符串？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-23T18:03:41.690

用于`/.../g`表示全局替换。

```
var clean = explicit.replace(/badtext1/g,"cleantext2"/).replace(/cleantext1/g,"cleantext2"/).replace(/badtext2/g,"cleantext2"/); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-23T18:46:15.287

处理此问题的通用方法如下：

建立字典并构建正则表达式：

```
 var dictionary = { bad: 'good', worse: 'better', awful: 'wonderful'},
      regexp = RegExp ('\\b(' + Object.keys (dictionary).join ('|') + ')\\b', 'g'); 
```

正则表达式由字典关键字构成（注意它们不能包含正则表达式特殊字符）。

现在做一个替换，使用一个函数代替替换字符串，该函数简单地返回相应键的值。

```
 text = text.replace (regexp, function (_, word) { return dictionary[word]; }); 
```

OP没有提到大写/小写。以下内容适用于初始和所有大写，并将代码包装为函数：

```
 function clean (text) {
    var dictionary = { bad: 'good', worse: 'better', awful: 'wonderful'},
        regexp = RegExp ('\\b(' + Object.keys (dictionary).join ('|') + ')\\b', 'ig');

    return text.replace (regexp, function (_, word) { 
      _ = dictionary[word.toLowerCase ()];
      if (/^[A-Z][a-z]/.test (word)) // initial caps
        _ = _.slice (0,1).toUpperCase () + _.slice (1);
      else if (/^[A-Z][A-Z]/.test (word)) // all caps
        _ = _.toUpperCase ();
      return _;
    });
  } 
```

见小提琴：http: [//jsfiddle.net/nJNq2/](http://jsfiddle.net/nJNq2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T18:14:43.803

我认为金兆的回答涵盖了它，但还有一些其他说明。
1）不要在正则表达式中使用“
2）您可以匹配多个字符串，但我认为只能使用单个正则表达式替换为一个值。我能想到的匹配多个的唯一方法是金照所做的。

以下代码片段似乎对我有用：

```
function censorText(){             
    var explicit = document.getElementById("textbox").innerHTML;
    var clean = explicit.replace(/bad|worse/gi,"good");
     document.getElementById("textbox").innerHTML = clean;
} 
```

我发现的另一个问题是，当发生替换时，它会将光标返回到文本框的开头，这会令人沮丧。如果我找到答案，我会发布。

# windows-phone-8 - 在模拟器中浏览 Windows Phone 8 文件系统

> ID：14013225
> 
> 赞同：5
> 
> 时间：2012-12-23T17:51:01.433
> 
> 标签：windows-phone-8, windows-phone-8-emulator

有没有办法浏览在模拟器中运行的 Windows Phone 8 的文件系统，最好是在模拟器运行时？

如果我可以在应用程序运行时访问应用程序本地存储及其其他私有文件夹，这将使调试变得更加容易：检查存在的文件、修改它们、添加新文件等。在不止一次的情况下，这对我很有用适用于 Windows 8 的 Windows 应用商店应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T19:28:03.680

只需使用[Windows Phone Power Tools](http://wptools.codeplex.com/)集成文件浏览器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T11:59:42.163

此外，您可以使用内置工具 ISETool.exe（仅限命令行）：

[如何使用 Windows Phone 的独立存储资源管理器工具](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286408%28v=vs.105%29.aspx)

最好的祝福

# jquery - 如何使用 iframe 关闭 jQuery 对话框

> ID：14013226
> 
> 赞同：2
> 
> 时间：2012-12-23T17:51:16.683
> 
> 标签：jquery, iframe

我`div`为一个对话框创建了一个并`iframe`在`div`.

我的问题是我无法关闭从`iframe`带有 aspx 页面的按钮中单击按钮的对话框。

我尝试了下面的代码。如果我`iframe`直接使用 a 作为对话框而不是 a ，它会起作用`div`，但它会为调整大小/拖动对话框和`iframe`.

```
window.parent.$('#divdialog').dialog('close'); 
```

欣赏此问题的可行解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:22:16.090

谢谢大家..终于我得到了解决方案。

这是 iframe 中使用的代码：-

`window.parent.CloseDialog();`

这是父页面中使用的代码：-

```
var divdialog = $('#divdialog'); divdialog.dialog('destroy');
        divdialog.dialog({
            autoOpen: true,
            height: 310,
            width: 570,title: "Look Up",
            modal: true,
            open: function () {$('#testframe').attr("src", strValue);
            $('#testframe').height($(this).height()-5);       $('#testframe').width($(this).width()-10);         
                },
            close: function (e) {
                $('#divdialog').remove();
                },
            resizable: true,
            resize: function() { $('#divdialog iframe').hide(); },
            resizeStop: function() { $('#divdialog iframe').show(); 
            $('#divdialog iframe').height($(this).height()-10);  
            $('#divdialog iframe').width($(this).width()-10); } ,
            closeOnEscape:true,
            draggable:true
        })

function CloseDialog()
{
    $('#divdialog').dialog('close'); return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:02:52.920

当您尝试从 iframe 代码访问主页上的元素时，您需要`window.top.document`在选择器上使用：

```
jQuery("#ElementID", window.top.document) 
```

使用该参数，选择器将搜索包含 iframe 的页面，因此您可以关闭对话框。

你的代码将是：

```
$('#divdialog', window.top.document).dialog('close'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:04:21.753

我建议您在对话框中添加一些按钮。

```
$( ".selector" ).dialog({ 
buttons: [ { text: "Ok", click: function() { $( this ).dialog( "close" ); } ] 
}); 
```

# vb.net - 处理 Enum 类型时 CStr() 与 .ToString 的比较

> ID：14013227
> 
> 赞同：6
> 
> 时间：2012-12-23T17:51:25.507
> 
> 标签：vb.net

我（显然是错误的）假设这`Cstr(something)`相当于`something.ToString`.
我想将枚举类型作为字符串保存，似乎取决于我使用的转换方法，我要么得到索引，要么得到`enum`名称：

```
Public Enum vehicleType
    Car
    Lorry
    Bicycle
End Enum

Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        MsgBox("Index is " & _
               CStr(vehicleType.Car) & _
               ".Name is " & _
               vehicleType.Car.ToString)
    End Sub
End Class 
```

为什么这些到字符串的转换会返回该`enum`类型的不同元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T18:07:41.573

该`ToString`方法是一个标准的公共方法，它返回一个`String`. 它是一种由基`Object`类型定义为可覆盖的方法。因此，每个类都可以重写该方法以返回它想要的任何东西。类重写该`ToString`方法以使其返回对象的可读性很好的描述是很常见的。

`CStr`，另一方面，是一个铸造运算符。它是 的简写`CType(x, String)`。与许多其他运算符一样，强制转换运算符可以被任何类覆盖。但是，通常情况下，您希望转换操作返回原始对象实际值的最接近表示，而不是描述性字符串。

这并不罕见，您可能希望`ToString`返回与 不同的结果`CStr`。在枚举的情况下，每个成员本质上都是一个整数，因此`CStr`枚举成员的工作方式与`CStr`整数相同。这就是你所期望的。但是，`ToString`已被覆盖以返回更易于阅读的值版本。这也是你所期望的。

`CStr`这是一个覆盖和的类的示例`ToString`：

```
Public Class MyClass
    Public Overrides Function ToString()
        Return "Result from ToString"
    End Function

    Public Shared Widening Operator CType(ByVal p1 As MyClass) As String
        Return "Result from cast to String"
    End Operator
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:04:50.290

[这篇MSDN Library 文章](http://msdn.microsoft.com/en-us/library/ch47ss2a.aspx)详细解释了 CStr() 接受的表达式类型。总结：

*   产生布尔值的表达式，转换为“True”或“False”
*   生成日期时间的表达式，转换为短日期时间格式
*   生成数字类型的表达式，转换为表示数字的字符串。

请注意，它没有枚举类型的项目符号。编译器总是乐于将枚举值转换为整数。所以第三个项目符号适用，这就是你得到“0”的原因。

# javascript - Meteor：两个项目可以交换的名称列表

> ID：14013228
> 
> 赞同：2
> 
> 时间：2012-12-23T17:51:25.390
> 
> 标签：javascript, meteor

我开始学习 Meteor 和 Javascript，并尝试创建一个应用程序，该应用程序的一部分包含两个名称列表（“是”列表和“否”列表）。我希望用户能够在任一列表上选择多个项目，然后单击一个按钮将所选项目交换到相反的列表。

我最初是根据 Meteor 的排行榜示例进行此设计的，但后来我意识到这不允许多选，它并不能真正适应我想要的多选功能。

所以，两个问题：

*   为了尝试做到这一点，我将另一个变量添加到我的名称字典中，这样每个名称都有一个“选定”值，即真或假。然后，从 css 文件中突出显示以及人们单击“切换”按钮时的事件将仅检查字典中的元素是否已“选择”= True。这是实现此功能的好/可行的方法吗？

*   Meteor 排行榜示例使用 Session.get、.set 和 .equal 设置和检查“selected_player”。我需要在我的 Javascript 中使用这些函数吗？为什么我不能只使用像 individual.selected = 0, 'if (individual.selected === 1)' 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:57:53.373

回答您的第一个问题：是的，这是一个好方法。

您应该使用`Session`它，因为它是 Meteor 提供给您的反应式数据源。阅读[有关反应性的文档](http://docs.meteor.com/#templates)以了解有关其工作原理的更多信息。我还建议观看原始 Meteor 截屏视频，以了解 Session 如何提供帮助。简而言之，如果您编写从 Session.get 读取的模板或帮助程序，则每当更新相同的 Session 密钥时，该模板将自动重新呈现。

例如，要尝试一下，这里有一些代码，如果您单击按钮，div 的类将在选定和空之间来回切换：

在客户端 JavaScript 中：

```
Template.list.selected = function() { return Session.get("selected") ? "selected" : ""; }
Template.list.events({ "click button": function() { Session.set("selected", !Session.get("selected")); }); 
```

在模板中：

```
<template name="list">
  <div class="{{selected}}"></div>
  <button></button>
</template> 
```

# javascript - 脸没有背

> ID：14013229
> 
> 赞同：2
> 
> 时间：2012-12-23T17:51:31.260
> 
> 标签：javascript, three.js

我有那个代码：

```
var roofGeometry = new THREE.Geometry();

roofGeometry.vertices.push(
    new THREE.Vector3(-0.5, 0, 0.5),
    new THREE.Vector3(0.5, 0, 0.5),
    new THREE.Vector3(0, 1, 0.5),
    new THREE.Vector3(0.5, 0, -0.5),
    new THREE.Vector3(0, 1, -0.5),
    new THREE.Vector3(-0.5, 0, -0.5)
);
roofGeometry.faces.push(
    new THREE.Face3(0, 1, 2),
    //new THREE.Face4(1, 3, 4, 2),
    new THREE.Face3(5, 3, 4)/*,
    new THREE.Face4(0, 5, 4, 2)*/
);
//... 
```

[http://jsfiddle.net/jFyFJ](http://jsfiddle.net/jFyFJ)

为什么当我旋转它们时三角形会消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:08:03.950

用于`side: THREE.DoubleSide`材料

[jsfiddle](http://jsfiddle.net/jFyFJ/2/)

# jquery - 具有不同输入ID的jQuery多个自动完成

> ID：14013233
> 
> 赞同：1
> 
> 时间：2012-12-23T17:51:49.930
> 
> 标签：jquery, ajax, jquery-ui, jquery-ui-autocomplete

我使用 jQuery 自动完成并有多个具有不同 ID 的输入字段，它们是从 MySQL 数据库填充的。

```
 $("#CCU1").autocomplete({
  minLength : 1,
  source: function( request, response ) {
    $.ajax({
      url:"<?php echo site_url().'gsimc/autocomplete'; ?>",
      dataType: 'json',
      data: { 
        term  : $("#CCU1").val(),
        column: 'course',
        tbl   : 'tbl_courses'
      },
      success: function(data){
        if(data.response == 'true') {
          response(data.message);
        }
      }
    });
  }
}); 
```

输入字段的 ID 为 CCU1...CCU5，name='course'。知道如何自动完成五个输入字段而不是对每个字段进行硬编码吗？

```
Course1: <input type='text' name='course[]' id='CCU1'/><br />
Course2: <input type='text' name='course[]' id='CCU2'/><br />
Course3: <input type='text' name='course[]' id='CCU3'/><br />
Course4: <input type='text' name='course[]' id='CCU4'/><br />
Course5: <input type='text' name='course[]' id='CCU5'/><br /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:00:19.450

假设您的上述代码适用于其中之一，您可以这样做：

```
$("[id^=CCU]").each(function(){
    $(this).autocomplete({
      minLength : 1,
      source: function( request, response ) {
        $.ajax({
          url:"<?php echo site_url().'gsimc/autocomplete'; ?>",
          dataType: 'json',
          data: { 
            term  : $(this).val(),
            column: 'course',
            tbl   : 'tbl_courses'
          },
          success: function(data){
            if(data.response == 'true') {
              response(data.message);
            }
          }
        });
      }
    });
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:01:22.767

### 使用`$(this)`而不是硬编码 ID：

```
term: $("#CCU1").val(), 
```

将其替换为：

```
term: $(this).val(), 
```

### 完整代码：

```
$("[id^=CCU]").each(function(){
    $(this).autocomplete({
      minLength : 1,
      source: function( request, response ) {
        $.ajax({
          url:"<?php echo site_url().'gsimc/autocomplete'; ?>",
          dataType: 'json',
          data: { 
            term  : $(this).val(),
            column: 'course',
            tbl   : 'tbl_courses'
          },
          success: function(data){
            if(data.response == 'true') {
              response(data.message);
            }
          }
        });
      }
    });
}); 
```

# c# - 如何访问嵌套列表框

> ID：14013238
> 
> 赞同：1
> 
> 时间：2012-12-23T17:52:25.577
> 
> 标签：c#, wpf, listbox, nested, windows-phone-7.1

```
<Grid x:Name="ContentPanel3" Grid.Row="1" Margin="12,0,12,0">
  <ScrollViewer>
    <StackPanel>
      <ListBox Height="500" Padding="2" Name="listBox1" ItemsSource="{Binding School}" Width="460">
        <ListBox.ItemTemplate>
          <DataTemplate>
            <StackPanel>
              <TextBlock Name="elementtype" Text="{Binding type}"/>
              <ListBox x:Name="underlist" ItemsSource="{Binding listschoolclass}" ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <ListBox.ItemTemplate>
                  <DataTemplate>
                    <StackPanel>
                      <TextBlock Name="elementssalle" Text="{Binding room}"/>
                      <TextBlock Name="elementsdebut" Text="{Binding teacher}"/>
                    </StackPanel>
                  </DataTemplate>
                </ListBox.ItemTemplate>
              </ListBox>
            </StackPanel>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>
    </StackPanel>
  </ScrollViewer>
</Grid> 
```

`listBox1`这是我的问题：在 xaml.cs 中，我可以使用这种方法访问元素：`listBox1.ItemSource = ...`例如。但我无法到达嵌套列表框的元素下列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:10:39.773

您可以在资源中定义下列表，例如

```
 <Window.Resources>
    <ListBox x:Key="underlist" ItemsSource="{Binding listschoolclass}" ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Name="elementssalle" Text="{Binding room}"/>
                    <TextBlock Name="elementsdebut" Text="{Binding teacher}"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Window.Resources> 
```

然后你的主要xaml会像

```
 <Grid x:Name="ContentPanel3" Grid.Row="1" Margin="12,0,12,0">
    <ScrollViewer>
        <StackPanel>
            <ListBox Height="500" Padding="2" Name="listBox1" ItemsSource="{Binding School}" Width="460">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Name="elementtype" Text="{Binding type}"/>
                            <ContentControl Content="{StaticResource underlist}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
    </ScrollViewer>
</Grid> 
```

在 .cs 文件中，您可以通过以下方式访问资源

```
this.FindResource("underList") 
```

希望能帮助到你..

# python - 不使用命令行传递参数

> ID：14013242
> 
> 赞同：0
> 
> 时间：2012-12-23T17:53:01.720
> 
> 标签：python, command-line-arguments

我有一个从命令行接受参数的模块，我们称之为模块`A`。

我想`A`从另一个模块执行 - `B`，所以这`B`将设置`A`的参数-

不`A`作为单独的进程执行。

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:56:27.393

这取决于模块如何`A`接受它的参数。如果它*只看*并且`sys.argv`没有`__main__`测试，那么你可以改变`sys.argv`：

```
sys.argv[1:] = ['arg1', 'arg2'] 
```

然后导入模块`A`。

但是，如果您正在编写自己的代码，请改用从测试`A`中调用的函数：`__main__`

```
def main(*args):
    # main code for module

if __name__ == '__main__`:
    import sys
    main(*sys.argv[1:]) 
```

然后你可以直接导入`A`并调用`main()`：

```
import A
A.main('arg1', 'arg2') 
```

请注意，如果模块`A`不是您自己的，并且它*确实*进行了`__main__`测试，但完成了该`if __name__ == '__main__':`套件中的所有工作，那么您将陷入困境并且必须重现该代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T17:56:20.170

只需在脚本中定义一个 main 方法，以便它可以从命令行和作为模块运行：

```
def main(arg1, arg2):
    # All your code goes here

if __name__ == '__main__':
    main(*sys.argv[1:]) 
```

然后您可以执行以下任一操作：

```
$ a.py x y 
```

或者

```
>>> import a
>>> a.main('x', 'y') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:55:45.150

```
import sys
sys.argv[1:] = ["My Arguments","other Args"] #dont replace [0] ...since it can let you know which script was actually executed ...

import A
A.run() #or whatever 
```

我认为会工作......不是真的推荐但是......

# ffmpeg - FFmpeg API pcm 编码没有 av_interleaved_write_frame

> ID：14013245
> 
> 赞同：1
> 
> 时间：2012-12-23T17:53:20.587
> 
> 标签：ffmpeg, streaming, encode, pcm

我正在尝试编码 pcm 数据使用 FFmpeg API 进行直播

喜欢 [这里](https://stackoverflow.com/questions/10041913/android-audiorecord-to-ffmpeg-encode-native-aac)

但它使用的是“av_interleaved_write_frame”。

那就是一定要把它保存在一个文件中。我想用它来直播，如果可能的话我不想把它保存在一个文件中。

当我使用 AVFMT_NOFILE 时它会崩溃。没有调用“av_interleaved_write_frame”时没有时间戳，你怎么能不把它当作文件来编码呢？

# jquery - 使用 Google+ API 解析 jQuery JSON

> ID：14013246
> 
> 赞同：2
> 
> 时间：2012-12-23T17:53:23.020
> 
> 标签：jquery, json, google-plus

我正在尝试解析来自 Google plus API 的数据。我想显示用户个人资料名称和个人资料图片。这是我到目前为止所拥有的：

```
<div class="gplus-data"></div>
<script> 
    $(document).ready(function() {
        $(function () { 
            $.getJSON( "https://www.googleapis.com/plus/v1/people/113411411661448774142?fields=displayName%2Cimage&key=AIzaSyC_f6bGDJ54pkibdZ1hfiQo3-ekJs_btr8",
                    function (data) {   
                $('.gplus-data').append('<tbody class="items"></tbody>');
                $('.gplus-data tbody').prepend('<tr><th>Name</th><th>Image</th></tr>'); 
                $.each(data.items, function(i,item){    
                    var item = '<td>' + item.displayName + '</td>'; 
                    item += '<td>' + item.image.url + '</td>';
                    $('.items').append('<tr>' + item + '</tr>');    
                });
            });
        });
    });
</script> 
```

[http://jsfiddle.net/yrrqd/1/](http://jsfiddle.net/yrrqd/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:12:32.537

几个问题，首先是简单的问题是您试图将表格组件添加到`DIV`.

`$(function () {})`是一样的，`$(document).ready(function() {})`所以把一个包裹在另一个里面是没有意义的

接下来是数据不是您尝试解析的格式。您的代码假设响应是一个数组，但是提供的 url 返回一个对象。

如果您更改`DIV`为`table`：

```
$(function() {
    $.getJSON(url, function(data) {      
        $('.gplus-data').append('<tbody class="items"></tbody>');
        $('.gplus-data tbody').prepend('<tr><th>Name</th><th>Image</th></tr>');            
            var item = '<td>' + data.displayName + '</td>';
            item += '<td><img src="' +data.image.url + '"></td>';
            $('.items').append('<tr>' + item + '</tr>'); 
    });    
}); 
```

演示：http: [//jsfiddle.net/NsfPH/](http://jsfiddle.net/NsfPH/)

***您真的希望公开您的 API 密钥吗？***

# actionscript-3 - 用 deltaTime 阻尼速度？

> ID：14013248
> 
> 赞同：5
> 
> 时间：2012-12-23T17:53:31.517
> 
> 标签：actionscript-3, math, game-physics

我正在尝试使用“阻尼”属性逐渐降低物体的速度。之后，我想使用速度移动对象的位置。它看起来像这样：

```
velocity.x *= velocity.damping;
velocity.y *= velocity.damping;
x += velocity.x;
y += velocity.y; 
```

再简单不过了，它工作得很好，但这是我的问题：我正在使用一个 deltaTime 变量，它包含我的游戏循环的最后一次更新所花费的时间量（以秒为单位）。应用速度很容易：

```
x += velocity.x * deltaTime;
y += velocity.y * deltaTime; 
```

但是当我乘以阻尼属性时，如何计算 deltaTime 呢？我的想法是，找到 x 或 y 中的位移并将 deltaTime 乘以该位移，如下所示：

```
velocity.x += (velocity.x * velocity.damping - velocity.x) * deltaTime;
velocity.y += (velocity.y * velocity.damping - velocity.y) * deltaTime; 
```

事实证明这是行不通的。我真的不明白为什么，但是当我测试它时，我不断得到不同的结果。如果我只是忽略阻尼或将其设置为 1.0，那么一切正常，所以问题一定出在最后两行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T20:10:47.270

```
velocity.x += (velocity.x * velocity.damping - velocity.x) * deltaTime; 
```

这意味着你有一个恒定的加速度，而不是阻尼。

```
velocity.x * (1 - velocity.damping) 
```

是您在一个时间单位内从当前值减少速度的量。它与当前速度成正比，因此在下一个时间单位中，您将使用阻尼因子将速度减少较小的量。但是乘以，您减去相同的数量，从所有时间单位`deltaTime`的起始值计算。`deltaTime`

让我们假设阻尼因子为`0.9`，因此您在每个时间单位中将速度减少十分之一。如果您使用线性公式（乘以`deltaTime`），在 10 个时间单位之后，您的速度将变为 0，在 11 个时间单位之后，它会切换方向。如果你从初始速度 开始逐步进行`v_0 = 1`，你会得到

```
v_1 = v_0*0.9 = 0.9
v_2 = v_1*0.9 = 0.81
v_3 = v_2*0.9 = 0.729
v_4 = v_3*0.9 = 0.6561 
```

等，速度下降较慢。如果展开 的公式`v_4`，你会得到

```
v_4 = v_3*0.9 = v_2*0.9*0.9 = v_1*0.9*0.9*0.9 = v_0*0.9*0.9*0.9*0.9 = v_0 * 0.9^4 
```

所以，概括地说，你看到公式应该是

```
velocity.x *= Math.pow(velocity.damping, deltaTime); 
```

（假设 Action Script 与 ECMA Script 在调用函数方面没有区别。）

当然，同样`velocity.y`如此。

# mysql - 使用 Mysql 存储过程不工作检查行是否存在

> ID：14013249
> 
> 赞同：2
> 
> 时间：2012-12-23T17:53:33.940
> 
> 标签：mysql, stored-procedures

在 mysql 命令提示符下，我运行：

```
SELECT EXISTS (SELECT 1 FROM test1 WHERE name1 like '%Nadiya%') 
```

返回

```
EXISTS (SELECT 1 FROM test1 WHERE name1 like '%Nadiya%')
1 
```

但以下过程不会打印为存在。我需要进入 IF 语句。请让我知道什么变化可以让我进入 IF。

```
DELIMITER //
CREATE PROCEDURE verifyAndUpdate30(in searchName  varchar(12), in searchId   bigint, inout result int)
BEGIN
    IF ( SELECT EXISTS (SELECT 1 FROM test1 WHERE name1 like '%searchName%') ) THEN 
        SELECT 'EXISTS';
        UPDATE TEST SET testFlag=1 WHERE id=searchId;
        SET result=1;
    ELSE
        SELECT 'DOES NOT EXISTS';
    END IF; 

    SELECT result;
END 
//
DELIMITER ; 
```

调用程序：

```
SET @increment = 0;
call verifyAndUpdate30('Nadiya', 5532, @increment); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:38:33.303

您需要以`LIKE`困难的方式构造字符串，使用`CONCAT('%', searchName, '%')`：

```
,,,
IF ( SELECT EXISTS (
    SELECT 1
    FROM test1
    WHERE name1 like CONCAT('%', searchName, '%')   -- Build %searchName% from parts
 ) ) THEN 
,,, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T18:40:09.247

### 你需要串联。

由于`searchName`可以作为硬编码字符串，请以这种方式替换您的查询：

```
CONCAT('%', searchName, '%') 
```

### 完整代码

```
DELIMITER //
CREATE PROCEDURE verifyAndUpdate30(in searchName  varchar(12), in searchId   bigint, inout result int)
BEGIN
    IF ( SELECT EXISTS (SELECT 1 FROM test1 WHERE name1 like CONCAT('%', searchName, '%')) ) THEN 
        SELECT 'EXISTS';
        UPDATE TEST SET testFlag=1 WHERE id=searchId;
        SET result=1;
    ELSE
        SELECT 'DOES NOT EXISTS';
    END IF; 

    SELECT result;
END 
//
DELIMITER ; 
```

[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)在 MySQL 中查看更多信息。

# javascript - 在Javascript中获取分配给扩展函数原型的数组长度

> ID：14013252
> 
> 赞同：4
> 
> 时间：2012-12-23T17:53:38.683
> 
> 标签：javascript, node.js

下面的代码将记录 a、a.length 和 b.test。a 和 b.test 都产生 [1, 2, 3]。编辑——我搞砸了。b.test 产生未定义的结果。请参阅下面 Raina 的回复。

a.length 产生 3。

b.test.length 失败，“无法读取未定义的属性‘长度’”

为什么当 a 和 b.test 相等时会出现这种情况？

* * *

```
var a = [1,2,3];

var b = function(){};

b.prototype.test=[1,2,3];

console.log(a);

console.log(a.length);

console.log(b.test);

console.log(b.test.length); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T17:55:53.157

因为`b`没有`test`属性——它是一个*函数*，它的原型*对象*是`Function.prototype`一个。

但是使用此函数创建的对象将在其原型链中具有此属性（作为指向已定义属性的对象的`prototype` *属性*，所以这...`b``test`

```
console.log(new b().test.length); 
```

... 应该给你 3，正如预期的那样。

# actionscript-3 - AS3：从循环外部删除在 for 循环中创建的子项

> ID：14013255
> 
> 赞同：0
> 
> 时间：2012-12-23T17:54:00.557
> 
> 标签：actionscript-3, function, loops, textfield

我有一个 for 循环，它从数组创建文本字段来表示高分。我的游戏中的每个关卡都有一个单独的循环来执行此操作（绝对可以正常工作），这是一个示例：

```
// LEVEL 1 HIGH SCORES //
if (currentLevel==1) {
for (var k:int = 0; k < lvl1highScores.length; k++) //loop the length of the lvl 1 score array
{
var tf:HighScoreTF = new HighScoreTF();
tf.txt.text = lvl1highScores[k].player + " - " + lvl1highScores[k].score;
tf.y = k * 35; //sets distance between each high score text field
addChild(tf);
}
} 
```

一旦用户点击离开高分图表，我想做的是从视图中删除所有这些文本字段（tf）。这将从一个单独的函数到创建文本字段的函数完成。

使用 removeChild 不起作用，因为在游戏最初开始时不会创建孩子。

非常感谢所有帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:07:55.927

嗯，首先，`for`每个级别都有一个单独的循环是很糟糕的做法，所以你可能想重新考虑你是如何做到这一点的。但是，如果您真的只是想简单地解决现有问题，您应该为所有对象创建一个容器，然后删除该容器。

```
var highScoreFields:Sprite = new Sprite();
if (currentLevel == 1) {
    // ...
    highScoreFields.addChild(tf);
    // ...
}
addChild(highScoreFields); 
```

然后，您可以删除容器，这会将其所有子项从显示链中分离出来，只需调用`removeChild(highScoreFields)`.

# c# - 如何遍历 SortedList，获取键和值

> ID：14013261
> 
> 赞同：21
> 
> 时间：2012-12-23T17:54:48.683
> 
> 标签：c#, sortedlist

下面的代码遍历一个列表并获取值，但是我将如何编写一个类似的语句来获取键和值

```
foreach (string value in list.Values)
{
    Console.WriteLine(value);
} 
```

例如像这样的东西

```
 foreach (string value in list.Values)
{
    Console.WriteLine(value);
        Console.WriteLine(list.key);
} 
```

列表的代码是：

```
SortedList<string, string> list = new SortedList<string, string>(); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-23T17:56:15.573

```
foreach (KeyValuePair<string, string> kvp in list)
{
    Console.WriteLine(kvp.Value);
    Console.WriteLine(kvp.Key);
} 
```

来自[msdn](http://msdn.microsoft.com/en-us/library/ms132335.aspx)：

GetEnumerator 返回一个`KeyValuePair<TKey, TValue>`遍历`SortedList<TKey, TValue>`.

正如 Jon 所说，您可以使用`var`关键字而不是编写迭代变量的类型名称（类型将从使用情况推断）：

```
foreach (var kvp in list)
{
    Console.WriteLine(kvp.Value);
    Console.WriteLine(kvp.Key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T19:35:31.693

道歉...

这是错误的主题（循环值）。我的问题是遍历键值对，而不仅仅是值。如果没有异议，将把它留在这里作为从 SortedList 集合中获取值的可能选项。

我也只是想弄清楚这个错误，我的解决方案是使用该`DictionaryEntry`类型来替换错误输出`KeyValuePair`类型。从 MS 参考找到 [https://msdn.microsoft.com/en-us/library/system.collections.dictionaryentry(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/system.collections.dictionaryentry(v=vs.100).aspx)

就我而言，我有创建`SortedList`类型集合的代码，但`var`or`KeyValuePair`类型都不起作用（`var`尝试从集合项中读取键/值时`KeyValuePair`出错，并且在初始循环定义中出错。两者都出错了`"Specified cast is not valid"`）

所以这里是对我有用的代码示例：

```
SortedList _dims = GetList("mysortedlist");
foreach (DictionaryEntry kvp in _dims)
{
    Console.WriteLine(kvp.Key.ToString());
    Console.WriteLine(kvp.Value.ToString()); 
} 
```

高温高压

戴夫

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-06T21:37:32.820

只需使用键进行迭代并获取每个键的值：

```
SortedList<string, string> info = new SortedList<string, string>();

info.Add("path", "път");
info.Add("folder", "директория");
info.Add("directory", "директория");
info.Add("file", "Файл");

foreach (string key in info.Keys)
{
 Console.WriteLine("\t{0}\t{1}", key, info[key]);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-12-16T09:29:17.360

```
 bool value = list[key]; 
```

这可以帮助你。

# list - 对类 Python 中的列表列表进行排序

> ID：14013262
> 
> 赞同：0
> 
> 时间：2012-12-23T17:55:14.433
> 
> 标签：list, class, python-3.x

我创建了以下

```
class uniquePlayers():

    def __init__(self):
        self._item = [ [] for i in range(5) ]
        self.count = 0

    def addPlayer(self, firstInstance, firstName, lastName, Country, long):
        self._item[0].append(firstInstance)
        self._item[1].append(firstName.lower())
        self._item[2].append(lastName.lower())
        self._item[3].append(Country)
        self._item[4].append(long.lower())
        self.count += 1

    def sortByKey(self, index = 4 ):
        self._item[index].sort() 
```

我正在尝试对整个班级进行排序，并保留其他列表中的所有内容。显然我所做的只是对“长”列表进行排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:01:45.890

您应该将属于一起的数据保存在一起。因此，不要有 5 个列表，每个列表都有一个属性，而是有一个包含所有玩家数据的列表：

```
def __init__(self):
    self._players = []

def addPlayer(self, firstInstance, firstName, lastName, Country, long):
    player = (firstInstance, firstName.lower(), lastName.lower(), Country, long.lower())
    self._players.append(player)

def sortByKey(self, index=4):
    self._players.sort(key=lambda x: x[index]) 
```

您还可以为玩家数据使用[命名元组](http://docs.python.org/3/library/collections.html#collections.namedtuple)，以便更轻松地访问它，甚至更好地为玩家引入新类型（类）。

# java - 真实世界的参数优化

> ID：14013266
> 
> 赞同：4
> 
> 时间：2012-12-23T17:55:54.957
> 
> 标签：java, optimization, parameters, machine-learning

我需要为我的最新研究项目进行参数优化。我有一个算法，它目前有 5 个参数（四个双精度 [0,1] 和一个标称值，有 3 个值）。该算法使用这些参数来计算一些东西，然后我计算精度、召回率和 FMeasure。单次运行大约需要 1.8 秒。目前我正在以 0.1 步长遍历每个参数，这向我展示了全局最大值的大致位置。但我想找到精确的全局最大值。我研究了梯度下降，但我真的不知道如何将其应用于我的算法（如果可能的话）。任何人都可以指导我如何实现这样的算法，因为我对这种工作很陌生。

干杯，丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:22:56.460

您当然可以比网格搜索做得更好。

在应用梯度下降等算法之前，您必须确保您的参数空间不包含局部最大值，或者至少您的起点接近全局最大值，并且您的步长足够适合您。

在您的情况下，我建议您从尽可能多的随机样本开始。这是一种比网格搜索更好的探索参数空间的方法。一旦以这种方式收集了足够的数据，您就可以使用模式查找算法，例如[均值偏移](http://en.wikipedia.org/wiki/Mean_shift)或其更快的导数之一，或者直接进行优化。由于您没有参数空间的雅可比行列式，您可以使用迭代逼近它的[Broyden 方法或](http://en.wikipedia.org/wiki/Broyden%27s_method)[割线方法](http://en.wikipedia.org/wiki/Quasi-Newton_method)，例如[BFGS](http://en.wikipedia.org/wiki/BFGS_method)。

另外，请参阅此相关问题：[如何以有效的方式调整图像处理算法的参数？](https://stackoverflow.com/questions/13644010/how-can-i-adjust-parameters-for-image-processing-algorithm-in-an-efficient-way)

# bitmap - 处理自定义位图绘图仪时出现 ArgumentException

> ID：14013275
> 
> 赞同：0
> 
> 时间：2012-12-23T17:56:28.313
> 
> 标签：bitmap, dispose, idisposable, argumentexception

我遇到了自定义书面绘图仪类的问题。此类用于在给定的 PictureBox 的图像上绘图。

基本用法是这样的：

```
 double[] signal = StaticSignalGenerator.Sinus(10.0, 0.0, 1000, 5);
        using (Plot plotter = new Plot(pictureBox1, Color.White))
        {
            plotter.Draw(signal, Pens.Black);
        } 
```

构造函数使用pictureBox1 作为参考，并且将为图像制作白色背景颜色。绘图是一个在长度和幅度上的复杂变换，它使用图形在一个使用块中绘制，而不是参考pictureBox图像会自动更新。

我认为某处存在问题，因为该类是在图片框图像刷新之前被处理的？

```
this.pictureBoxRef.Image = this.drawBitmap; 
```

使用位图的Clone会更好吗？（如果那将保持在相同的范围内，我担心这无济于事）

如果我将此类与 using 块一起使用，则在到达处置阶段时，我得到了 ArgumentException。该类实现了 IDisposable，具有以下几行：

```
 public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (this.pictureBoxRef != null)
            {
                this.pictureBoxRef.MouseMove -= new MouseEventHandler(PictureBoxRef_MouseMove);
            }
            if (this.drawBitmap != null)
            {
                this.drawBitmap.Dispose();
            }
            if (this.initializedBitmap != null)
            {
                this.initializedBitmap.Dispose();
            }
        }
    } 
```

无效参数：null，未处理 ArgumentException。StackTrace 如下：

> System.Drawing.Image.get_Width() System.Drawing.Image.get_Size() System.Windows.Forms.PictureBox.ImageRectangleFromSizeMode(PictureBoxSizeMode 模式) System.Windows.Forms.PictureBox.OnPaint(PaintEventArgs pe) System.Windows.Forms。 Control.PaintWithErrorHandling(PaintEventArgs e, Int16 层) System.Windows.Forms.Control.WmPaint(Message& m) System.Windows.Forms.Control.WndProc(Message& m) System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m ) System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m) System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:07:49.290

很难说，因为您给我们的信息很少，但看起来它仍在尝试*绘制*`PictureBox`. 目前尚不清楚这些是否与您正在处理的值有任何关系，但如果`PictureBox`包含`Bitmap`您正在处理的值之一，那很容易成为问题。您可能想`PictureBox`先从表单中删除 ，或者将其`Image`属性设置为`null`.

（如果您可以创建一个简短但*完整*的程序来演示该问题，那么帮助您将变得更加容易......）

# ruby - nil:NilClass 的未定义方法“[]”）：

> ID：14013279
> 
> 赞同：1
> 
> 时间：2012-12-23T17:57:05.990
> 
> 标签：ruby, ruby-on-rails-3

> **可能重复：**
> [NoMethodError（nil:NilClass 的未定义方法“[]”）](https://stackoverflow.com/questions/10810311/nomethoderror-undefined-method-for-nilnilclass)

我是 rails 3 的新手，我正在尝试将某些内容呈现为 HTML 表单：

```
<td class="kanban-task-handler">by: <%=h (!@tasks[activity['taskid']]['assignee'].nil? ? @tasks[activity['taskid']]['assignee'] : '') %></td> 
```

但我收到此错误：

```
undefined method `[]' for nil:NilClass): 
```

但我正在检查这个变量并说明它是否为 nil--> 然后什么也不打印出来……那为什么这不起作用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:01:46.917

我很注意你想在这里做什么？，但似乎@tasks 在这里是零。你可以用@tasks.nil 检查它吗？

但请记住，如果@tasks 是一个数组，它不会给你零？-> true 你需要使用 < `Array`>.empty?

更安全的检查方法是

```
@task.try(:attribute).try(:attribute2) etc 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:16:33.160

也许您应该以不同的方式对其进行建模。

你为什么首先这样做`@tasks[activity['taskid']]['assignee']`？？？

您应该能够执行类似`activity.assignee`或 `activity.task.assignee`的操作

我猜你有一个活动、任务和受让人模型。好的，也许您没有受让人。

但是对于前两个你可以做这样的事情，并且遵循得[墨忒耳法则](http://rails-bestpractices.com/posts/15-the-law-of-demeter)你不应该调用多个类的方法。

```
class Task < ActiveRecord::Base
  has_many :activities

  def assignee_name
    try(:assignee) || 'No assignee' # or ''
  end
end

class Activity < ActiveRecord::Base
  belongs_to :task

  delegate :assignee_name, to: :task
end 
```

现在你可以

```
<td class="kanban-task-handler">by: <%=h ativity.assignee_name %></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:09:45.043

我会说尝试：

`td class="kanban-task-handler">by: <%=h (!@tasks[activity['taskid']]['assignee']) or ""%></td>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T18:21:55.023

您也可以使用`rescue`关键字在同一行中处理异常，试试这个

```
<td class="kanban-task-handler">by: <%=h (@tasks[activity['taskid']]['assignee'] rescue '') %></td> 
```

# ajax - 将鼠标悬停在主菜单上之前，ajax 返回不会在 chrome 中显示

> ID：14013280
> 
> 赞同：1
> 
> 时间：2012-12-23T17:57:08.803
> 
> 标签：ajax, google-chrome

我仅在未显示 Ajax 响应的 Chrome 中遇到问题。奇怪的是，当我将鼠标悬停在页面的主菜单上时，响应会显示出来，并且当我将鼠标再次从主菜单移开时也会保持不变。

下面是更具体的描述： 该页面包含一个搜索框，允许用户开始输入联系人姓名。当用户键入时，会发出一个 ajax 请求以返回建议的联系人列表。然后，用户可以单击与该列表中的联系人对应的单选按钮以显示该人的所有联系人信息。到目前为止，一切正常。但是现在如果用户回到搜索框改变他的搜索，之前返回的联系人列表会消失，但是新搜索的新联系人不会出现。正是单击单选按钮导致以下搜索不显示任何 ajax 响应。现在奇怪的是，如果用户将鼠标悬停在页面顶部的主菜单上（使用 css），响应确实会显示出来，如果用户再次将鼠标从菜单上移开并且之后一切正常，它也会保持不变。这是页面结构：

```
 <div id="fixedTopBar">
        <?php
            include("include/mainMenu.php");
        ?>
    </div>
    <div id="pageContent">
        <div id="contactListContainer">
            <form>
                <input id="contactSearchBox" type="text" autocomplete="off" onkeyup="showHint(this.value, 'contactList', null , 'include/ajax/getContacts.php')">
            </form>
            <div id="contactList">
                <form>
                    <?php
                        echoAllContacts(getContactsFromDatabase());
                    ?>
                </form>
            </div>
        </div>
        <div id="profile"></div> 
```

ajax 请求是使用 id="contactSearchBox" 输入中的 showHint() 函数发出的，响应显示在 id="contactList" div 中。

所以简而言之，单击单选按钮会导致问题，将鼠标悬停在顶部菜单上可以解决问题（很奇怪，不是吗？）。

如果您有任何想法，或者如果我说的任何内容没有意义，请告诉我您需要哪些其他代码来追踪问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:45:16.343

我能够用一些css解决我的问题：

id="contactListContainer" div 已定位：已修复...一旦我将其绝对定位，问题就消失了。现在，要实际将其定位为固定且没有问题，我还必须将 position:fixed 或 position:absolute 属性添加到子 div id="contactList"。

# mysql - php 表单连接到 mySql

> ID：14013281
> 
> 赞同：-3
> 
> 时间：2012-12-23T17:57:08.937
> 
> 标签：mysql

我有 CREATE TABLE 查询、INSERT INTO 自动显示“expiry_date”列和我网站上的 FORM。我是新手，所以我不知道如何制作表格，尤其是“expiry_date”字段将数据发送到我的数据库。
请告诉我如何将“Expiry_date”表单字段连接到 SQL QUERY。我有 3 个部分向您展示我已经完成的工作。

**第一部分**

### SQL查询：

```
CREATE TABLE `expirydate_table` (
    `id` INT NOT NULL AUTO_INCREMENT ,
    `firstname` VARCHAR( 45 ) NOT NULL ,
    `lastname` VARCHAR( 45 ) NOT NULL ,
    `email` VARCHAR( 45 ) NOT NULL ,
    `password` VARCHAR( 12 ) NOT NULL ,
    `signup_date` TIMESTAMP ON UPDATE 
    CURRENT_TIMESTAMP DEFAULT 
    CURRENT_TIMESTAMP NOT NULL ,
    `expiry_date` DATE NOT NULL ,
    PRIMARY KEY ( `id` ) ,
    UNIQUE (
    `email`
    )
    ) TYPE = MYISAM CHARACTER SET utf8 COLLATE 

    utf8_unicode_ci; 
```

**第二部分**

```
INSERT INTO `expirydate_table` ( `id` , `firstname` , `lastname` , `email` , `password` , `signup_date` , `expiry_date` ) 
VALUES (
'', 'pp', 'wiraj', 'pp@hotmail.com', 'test2009', NOW( ) , DATE_ADD(CURDATE( ) , INTERVAL 30 DAY )) 
```

**第三部分**

```
<form method="post" name="form1" action="<?php echo $editFormAction; ?>">
<table align="center">
  <tr valign="baseline">
    <td nowrap align="right">Firstname:</td>
    <td><input type="text" name="firstname" value="" size="32"></td>
  </tr>
  <tr valign="baseline">
    <td nowrap align="right">Lastname:</td>
    <td><input type="text" name="lastname" value="" size="32"></td>
  </tr>
  <tr valign="baseline">
    <td nowrap align="right">Email:</td>
    <td><input type="text" name="email" value="" size="32"></td>
  </tr>
  <tr valign="baseline">
    <td nowrap align="right">Password:</td>
    <td><input type="text" name="password" value="" size="32"></td>
  </tr>
  <tr valign="baseline">
    <td nowrap align="right">Signup_date:</td>
    <td><input type="text" name="signup_date" size="32"></td>
  </tr>
  <tr valign="baseline">
    <td nowrap align="right">Expiry_date:</td>
    <td><input name="expiry_date" type="text" size="32"></td>
  </tr>

  <tr valign="baseline">
    <td nowrap align="right">&nbsp;</td>
    <td><input type="submit" value="Register"></td>
  </tr>
</table>
<input type="hidden" name="MM_insert" value="form1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:20:23.960

您是否正在考虑执行从表单提交的查询？如果是这样，您应该使用

[PHP](http://php.net/)

您可以使用 $_POST['nameofform'] 访问帖子数据，其中 'nameofform' 是表单的名称并且您应该使用 php 的扩展名来执行 mysql 查询[mysqli](http://php.net/manual/en/class.mysqli.php)或 PDO 扩展名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:16:07.313

首先，您可能可以在代码中处理您的日期，而不是从客户端发送它们。最重要的是，您不想`signup_date`在每次更新时都进行更改。所以你需要稍微调整一下你的表模式：

```
CREATE TABLE `expirydate_table` (
    `id` INT NOT NULL AUTO_INCREMENT ,
    `firstname` VARCHAR( 45 ) NOT NULL ,
    `lastname` VARCHAR( 45 ) NOT NULL ,
    `email` VARCHAR( 45 ) NOT NULL ,
    `password` VARCHAR( 12 ) NOT NULL ,
    `signup_date` DATETIME NOT NULL,
    `expiry_date` DATETIME NOT NULL,
    PRIMARY KEY (`id`) ,
    UNIQUE (`email`)
) 
```

话虽如此，您可以摆脱表单中的字段`signup_up`。`expiry_date`

然后您需要创建一个处理提交值的操作 php 脚本。它可能看起来像这样：

```
<?php
//make sure that everything has been submitted
if (isset($_POST['firstname']) &&
    isset($_POST['lastname']) &&
    isset($_POST['email']) &&
    isset($_POST['password'])) {

    //do your cleanup and checks here
    $firstname = trim($_POST['firstname']);
    $lastname = trim($_POST['lastname']);
    $email = trim($_POST['email']);
    $password = $_POST['password'];

    //construct an INSERT statement
    $qry = 'INSERT INTO `expirydate_table` (`firstname` , `lastname` , `email` , `password` , `signup_date` , `expiry_date` ) VALUES ('; 

    $qry .= '"' . $firstname . '", ';
    $qry .= '"' . $lastname . '", ';
    $qry .= '"' . $email . '", ';
    $qry .= '"' . $password . '", ';
    $qry .= 'NOW(), ';
    $qry .= 'DATE_ADD(NOW(), INTERVAL 30 DAY))';

    //open connection to db
    $db = new mysqli('db_host', 'db_user', 'db_pwd', 'db_name');

    //execute your INSERT statement
    if ($db->query($qry) == TRUE) {     
        if ($db->insert_id) {
            $id = $db->insert_id;
        }
    } else {
        //add your error handling here
    }

    //render your page, use $id if you need to
}
?> 
```

这绝对不是你需要做的一切。你最好，至少：

*   在客户端进行输入验证
*   在服务器端进行适当的检查、验证和清理用户输入
*   使用准备好的语句
*   实施适当的错误处理

# java - 从 URL 播放 SPEEX 文件的 Java 小程序

> ID：14013284
> 
> 赞同：2
> 
> 时间：2012-12-23T17:57:37.220
> 
> 标签：java, javasound, speex, jspeex

我正在编写一个 java 小程序，它将从一个 URL 播放一个 Speex (.SPX) 文件。我对 Java Sound API 没有任何经验。JSpeex 文档非常无用。我设法拼凑了一些代码，但到目前为止还没有成功。到目前为止，我有这个：

```
AudioInputStream speexInputStream = AudioSystem.getAudioInputStream(url);
AudioInputStream audioInputStream = new Speex2PcmAudioInputStream(speexInputStream, AUDIO_FORMAT, speexInputStream.getFrameLength());
DataLine.Info di=new DataLine.Info(Clip.class, audioInputStream.getFormat());
Clip c = (Clip)AudioSystem.getLine(di);
System.out.println("opening clip...");
c.open(audioInputStream);
System.out.println("playing clip...");
c.start(); 
```

但是，剪辑不会打开。（它打印“打开剪辑......”然后阻止）。我做错了什么？

Ps 我正在使用 Eclipse

# javascript - 如果 iframe 刷新失败，则 X

> ID：14013287
> 
> 赞同：2
> 
> 时间：2012-12-23T17:58:12.560
> 
> 标签：javascript, iframe, if-statement, refresh

我正在使用以下脚本`<iframe>`每 60 秒刷新一次。

```
<script type=text/javascript>
setInterval(function() {
    document.getElementById("tracker").src += "";
}, 60000);
</script> 
```

`<iframe>`如果刷新失败，我想显示不同的页面/ 。例如，如果我没有连接到任何网络，那么显然任何页面刷新都会显示“找不到页面”错误。

相反，我想显示不同的`<iframe>`（例如`tracker2`）或不同的页面/消息/图像来表示“离线”。当然，它`<iframe>`会不断刷新，直到有互联网连接。

我很确定这是不可能的，但是我可能错了。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:07:49.913

如果`<iframe>`您正在加载的是不同的域，那么不，这是不可能的。否则，您可以使用 Ajax 来检查状态：

```
var rq = new XMLHttpRequest();

rq.open('GET', document.getElementById('tracker').src, true);

rq.onreadystatechange = function() {
    if(rq.readyState === 4) {
        if(rq.status === 200) {
            // All is well
        } else {
            // Show your backup element
        }
    }
};

rq.send(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:00:55.853

您可以检查 iframe 的 http 代码，并根据该代码呈现另一个页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:07:03.820

您可以使用 Jquery ajax 来加载页面内容并检查页面状态。例如：

```
<script type=text/javascript>

setInterval(loadIframe, 60000);

function loadIframe()
{

$.ajax({
    type: 'GET',
    url: 'document.getElementById('tracker').src',    
    success: function(data){
        alert('horray! 200 status code!');
        document.getElementById("tracker").src += "";
    },
    error: function(data){
        //get the status code
        if (code == 400) {
            alert('400 status code! user error');
        }
        if (code == 500) {
            alert('500 status code! server error');
        }
    },
});
}

</script> 
```

# c - 我可以让 fgets() 只接受字母吗？

> ID：14013289
> 
> 赞同：3
> 
> 时间：2012-12-23T17:58:32.463
> 
> 标签：c, string, validation, fgets

所以在这个数据库中我需要有一些限制，比如名称只有字母等等。

但是如果我使用 scanf("%s, c.name) 例如，它只会读取到第一个空格，所以如果我必须添加 2 个名字，比如 Marie Claire，我不能使用 scanf。

我有一个方法可以检查字符串是否包含数字（将提供它），但我想知道是否可以让 fgets() 只接受字母。我也会提供我尝试过的方法，但是当我使用这种方法时，它不接受任何输入，只是跳过它。

```
printf ("\nPlease enter Name:\n");
    while (fgets (c.name, sizeof (c.name), stdin)  && cCheck(c.name,100) == FALSE);
    {

    } 
```

检查数字的方法 [boolean 是用我这边的 typedef 制作的]

```
boolean cCheck(char *test, int max)
{
    int x;
    for (x =0; x<max; x++)
    {
        if (isdigit(test[x]))
        {
            return FALSE;
        }
        if (x==max)
        {
            return TRUE;
        }
        x++;

    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T19:30:37.877

像下面的代码示例一样，您可以指定 fscanf 来只读字符，如果您指定格式说明符来读取可接受的字符，还可以指定一个`.`and `' '`（空格）。如果你`^`在前面加上一个 like `[^a-zA-Z. ]`，那么它将读取除这些字符之外的所有内容。

```
#include <stdio.h>

int main()
{
    char s[25];
    printf("enter a string: ");
    scanf("%25[a-zA-Z. ]c\n", s); // reads upto 25 chars of a-z/A-Z and '.', ' '.
    printf("s1: %s\n", s);
    return 0;
} 
```

上述代码的示例输出：

```
c:\my-src\test-programs>scanf-test.exe
enter a string: dasdasd asdasda 34534536
s1: dasdasd asdasda

c:\my-src\test-programs>scanf-test.exe
enter a string: werfdsfsd3423524525
s1: werfdsfsd 
```

有关详细信息，请参阅以下链接：

[fscanf](http://www.cplusplus.com/reference/cstdio/fscanf/)

[信息：scanf() 格式规范和语法](http://support.microsoft.com/kb/67879)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:20:37.907

> 但是如果我使用 scanf("%s, c.name) 例如，它只会读取到第一个空格，所以如果我必须添加 2 个名字，比如 Marie Claire，我不能使用 scanf。

你可以写

```
scanf( "%s %s", c.name, c.surname ); // better with s_scanf 
```

> 我有一个方法可以检查字符串是否包含数字（将提供它），但我想知道是否可以让 fgets() 只接受字母。

不，`fgets`读取字符直到并包括`\n`您无能为力。而是通过将字符读入缓冲区并提取名称来利用它，例如 with`sscanf()`甚至`strtok()`

再次推荐使用 _s 版本的函数以避免令人讨厌的意外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:01:31.873

简而言之，没有。但是将输入和检查分开几乎总是更好 - 所以使用 fgets 来阅读文本，然后用`isalpha`或类似的东西检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T18:02:47.607

您是否尝试`'\n'`从字符串中删除 .

```
#include <ctype.h>
#include <stdio.h>

char buf[SIZE];
int good;

do {
    size_t i;
    char *pend;

    good = 1;
    fgets(buf, sizeof buf, stdin);
    pend = strchr(buf, '\n');

    if (pend != NULL)
        *pend = '\0';
    else
         flush_stdin();

    for (i = 0; buf[i] != '\0' && good; i++)
        if (!isdigit(buf[i])
            good = 0;
} while (good != 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T12:25:30.727

我如何修复它：

```
// ----- Name Input ----- //
        printf ("\nPlease enter Name:\n");
        char nameCheck[50];
        fgets (nameCheck,sizeof (nameCheck),stdin);
        while (cCheck(nameCheck,50) == FALSE)
        {
            fgets(nameCheck,sizeof (nameCheck),stdin);

        }
        strcpy (c.name, nameCheck); 
```

我添加了一个新的`char nameCheck[50];`

做了`fgets()`一个

做了一个`while`然后`nameCheck`做了一个`strcpy`:)

# php - xpath找出其他兄弟姐妹中的孩子编号

> ID：14013292
> 
> 赞同：1
> 
> 时间：2012-12-23T17:59:07.957
> 
> 标签：php, html, xpath

我还有其他几个与该主题相关的问题：

[获取父节点及其子节点，其中子节点具有特定文本](https://stackoverflow.com/questions/14007344/getting-a-parent-node-and-its-child-where-the-child-has-a-certain-text)

和 [XPath 查找具有特定文本的特定节点](https://stackoverflow.com/questions/14012564/xpath-finding-certain-node-with-certain-text)

假设这是我的 HTML：

```
<body>
    <div>
          <span>something else</span>
          <span>something</span>
          <span>something else</span>
    <div>
</body> 
```

我正在使用以下内容查询具有特定文本的节点：

`$node_with_value = $xpath->query('(//*[text()= "'something"])');`

这将返回包含所有节点的列表。在这种情况下，它将只有 1。

找到它的父母我做： `parent = $node_with_value->item(0)->parentNode;`

现在我的问题是如何检查它是多少个孩子。

在上面我们有 3 个跨度子到 div，从上到下计算它的数字 2。有没有办法以编程方式计算它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:31:46.160

使用 XPath，您可以`$count = $xpath->evaluate("count(. | preceding-sibling::*)", $node-with-value->item(0))`根据兄弟元素`$count = $xpath->evaluate("count(. | preceding-sibling::node())", $node-with-value->item(0))`查找数量或根据兄弟节点（即元素节点，但也包括文本、注释和处理指令节点）来查找数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:39:54.587

**又是一个纯 XPath 解决方案**：

```
count(/*/*/span[.='something']/preceding-sibling::*) +1 
```

# vim - Vim：如何检测用户所处的模式，用于状态行？

> ID：14013294
> 
> 赞同：7
> 
> 时间：2012-12-23T17:59:16.493
> 
> 标签：vim, statusline

我需要一种简单（或复杂）的方法来确定用户所处的模式。我需要知道用户是否处于正常、插入、可视、替换、更改等状态。

我知道这个`mode()`函数，但是我不知道如何让它输出一个完整的字符串而不是一个字符。

`mode()`我的计划是创建一个函数，根据返回的字符串动态更改状态行的背景和前景色。基本上是一个带有一堆 ifs 和 elseifs 的函数，可以为我做这件事。但是这种方法有一个缺陷，我不知道默认情况下主题设置是哪种颜色。

所以基本上，我需要一些关于如何制作执行以下功能的提示/帮助：

*   知道用户处于哪种模式。每次更改时，其余功能都会做出不同的反应。
*   `fg`使用和值设置一些变量，这些变量`bg`反映了当前主题为它们设置的内容。
*   根据这些值更改状态行的前景和背景。

我试过这样做，但这是一种非常粗暴的做法，根本不起作用。它只设置了一次颜色，之后每次更改时它都没有反应。

谢谢你的帮助！:)

编辑：

很确定我之前尝试过的没有奏效是这样的：

```
function! StatuslineModeColor()
    let s:StatuslineMode=mode()
    if s:StatuslineMode == 'n'
        hi Statusline ctermbg=blue guibg=blue
    elseif s:StatuslineMode == 'i'
        hi Statusline ctermbg=red guibg=red
    endif
endfunc 
```

在状态行中，我输入了以下内容：

```
let &stl.='%{StatuslineModeColor()}' 
```

编辑2：

我发现基本上我需要做的是找到一种方法来获取主题之前使用的任何颜色。那就是如果我使用这个解决方案：[http ://www.reddit.com/r/vim/comments/gexi6/a_smarter_statusline_code_in_comments/c1n2oo5](http://www.reddit.com/r/vim/comments/gexi6/a_smarter_statusline_code_in_comments/c1n2oo5)

然而，这个解决方案在我的标准中并不理想，因为它不干净，或者因为它造成了很多混乱，所以尽可能干净。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:12:26.433

2016 年 10 月更新：从那时起，我的 dotfiles 已移至[https://gitlab.com/greduan/dotfiles](https://gitlab.com/greduan/dotfiles)，因此该文件的新 URL 为：[https ://gitlab.com/greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/之后/插件/statusline.vim](https://gitlab.com/greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim)

所有的行都是一样的。

* * *

由于没有人想出答案，我自己制定了解决方案，您可以在这里找到：[https ://github.com/Greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim#L3-L42](https://github.com/Greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim#L3-L42)

基本上它执行以下操作：

[第 3 到 23 行](https://github.com/Greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim#L3-L23)定义了一个全局变量，其中包含一个包含所有不同模式的字典，将其转换为可读文本。所以`n`代表 normal 被翻译成`Normal`, `i`to`Insert`等等。

[第 25 到 42 行](https://github.com/Greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim#L25-L42)定义了改变状态行颜色的函数。目前它只支持 Solarized 并且只有当你的版本有这个[fork/pull request](https://github.com/altercation/vim-colors-solarized/pull/32)时。如果您满足这些要求，您将在插入模式下获得红色背景，在任何视觉模式下获得绿色背景，其余模式与正常模式相同。

[第 118 到 119 行将定义的函数放在状态行](https://github.com/Greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim#L118-L119)中，它还使用第[3 到 23](https://github.com/Greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim#L3-L23)行定义的全局变量以文本格式输出当前模式。

我相信这是一个比通常使用的解决方案更清洁的解决方案（自动命令和我见过的类似的东西）。基本上，它的唯一缺陷是无法知道主题的变量，但您当然可以这样做`hi! link StatusLine Error`，这将使状态行具有与主题错误相同的语法突出显示。

希望这可以帮助！

# c# - 如何将报告转换为图像？

> ID：14013295
> 
> 赞同：1
> 
> 时间：2012-12-23T17:59:21.590
> 
> 标签：c#, asp.net, .net, image, reporting-services

我`Report viewer`用来展示我的报告。

* * *

现在我想将报告转换为图像。如何将 RDLC 报告转换为图像以便以后在其上绘制。

有没有任何图书馆或方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T18:47:44.347

您必须创建一个实例`ReportViewer`：

```
ReportViewer report = new ReportViewer(); 
```

根据您将要创建的报告类型并传递它需要的所有参数，使用适当的属性设置它，例如：

```
report.ProcessingMode = ProcessingMode.Remote;
report.ServerReport.ReportPath = reportPath;
report.ServerReport.SetParameters(reportParameters); 
```

现在您可以要求`ReportViewer`以您喜欢的格式呈现报告，它会返回给您一个字节数组，您可以简单地流式传输到客户端或保存在某处：

```
byte[] reportContent = report.ServerReport.Render(reportFormat); 
```

`reportFormat`是`string`具有所需格式的，例如要获取您必须要求格式的`.TIF`图像，您必须要求`"IMAGE"`的`.PDF`文件`"PDF"`（有关其他支持的格式，请参阅 MSDN，它们取决于您使用的版本）。

现在您可以简单地保存`reportContent`到文件（或在响应中流式传输，添加适当的标头）：

```
System.IO.File.WriteAllBytes(path, reportContent); 
```

# asp.net - 如何加密从 asp.net 中的 gridview 传递的查询字符串值？

> ID：14013298
> 
> 赞同：1
> 
> 时间：2012-12-23T17:59:47.890
> 
> 标签：asp.net

我想加密从 asp.net 中的网格视图行超链接选择传递的查询字符串值，因为以防止 SQL 注入攻击。我有兴趣在 UrlRewriting 方法或 Encryption 方法中完成这项工作。哪一种方法好用？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T21:30:15.670

以下代码将 "firstName=stephen&surname=oberauer" 转换为 "arg=x2lk1rkBmXvilYTzLpfm5E9tkYSzEZnSkl7se0hNP0HsXbD82OYfiA==" 并返回。

这是一个简单的加密/解密类（确保使用自己的密钥）

```
public static class Crypt
{
    // Must be random
    private static readonly byte[] key = new byte[24] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4 };

    public static string Encrypt(string input)
    {
        byte[] inputArray = UTF8Encoding.UTF8.GetBytes(input);
        TripleDESCryptoServiceProvider tripleDES = new TripleDESCryptoServiceProvider();
        tripleDES.GenerateKey();
        tripleDES.Key = key;
        tripleDES.Mode = CipherMode.ECB;
        tripleDES.Padding = PaddingMode.PKCS7;
        ICryptoTransform cTransform = tripleDES.CreateEncryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(inputArray, 0, inputArray.Length);
        tripleDES.Clear();
        return Convert.ToBase64String(resultArray, 0, resultArray.Length);
    }

    public static string Decrypt(string input)
    {
        byte[] inputArray = Convert.FromBase64String(input);
        TripleDESCryptoServiceProvider tripleDES = new TripleDESCryptoServiceProvider();
        tripleDES.Key = key;
        tripleDES.Mode = CipherMode.ECB;
        tripleDES.Padding = PaddingMode.PKCS7;
        ICryptoTransform cTransform = tripleDES.CreateDecryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(inputArray, 0, inputArray.Length);
        tripleDES.Clear();
        return UTF8Encoding.UTF8.GetString(resultArray);
    }
} 
```

假设您有一个如下所示的网格视图：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
    <Columns>
        <asp:HyperLinkField DataNavigateUrlFields="Url" DataTextField="Name" />
    </Columns>
</asp:GridView> 
```

您可以像这样设置网格数据：

```
var gridData = new[]
{  
    new { Name = "Link 1", Url = "TargetPage.aspx?arg=" + Crypt.Encrypt("firstName=stephen&surname=oberauer") },
    new { Name = "Link 2", Url = "TargetPage.aspx?arg=" + Crypt.Encrypt("firstName=joe&surname=smith") }
};
GridView1.DataSource = gridData;
GridView1.DataBind(); 
```

在您的目标页面中，您可以像这样解码加密的查询字符串：

```
var encryptedArgs = Request.QueryString["arg"];
var decryptedArgs = HttpUtility.ParseQueryString(Crypt.Decrypt(encryptedArgs));
FirstName.Text = decryptedArgs["firstName"];
Surname.Text = decryptedArgs["surname"]; 
```

为了确保您的查询字符串没有被篡改，您可以处理 Decrypt 方法引发的 FormatException 并测试以确保参数存在，在本例中为“firstName”和“surname”。

URL 重写是一个单独的问题，如果你想让你的 URL 更漂亮，你可以使用它。它与确保没有人摆弄查询字符串并没有太大关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T05:49:34.277

为什么要复杂化，您可以使用行数据绑定事件来设置 Uri，转换查询字符串参数并使用 Server.UrlEncode，一切顺利

**行数据绑定事件**

* * *

```
protected void YourGrid_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            try
            {
                if (e.Row.RowType != DataControlRowType.DataRow) return;

                if (e.Row.DataItem == null) return;

                var hlobj= e.Row.FindControl("HYPERLINKID") as HyperLink;

                if ( null == hlViewTest) return;

                hlobj.NavigateUrl = String.Format("--------.aspx?whatever={0}",
                                                           Server.UrlEncode(Encrypt(whatever)));
            }
            catch (Exception ex)
            {
               //
            }

        } 
```

**加密方式：............**

* * *

```
 private static string Encrypt(String val)
        {
            try
            {
                var bytes = Encoding.UTF8.GetBytes(val.ToString(CultureInfo.InvariantCulture));
                var encBytes = ProtectedData.Protect(bytes, new byte[0], DataProtectionScope.LocalMachine);
                return Convert.ToBase64String(encBytes);
            }
            catch (Exception ex)
            {
              return String.Empty;
            }
        } 
```

**解密方法：------------**

* * *

```
 private static string Decrypt(string val)
        {
            try
            {
                var bytes = Convert.FromBase64String(val);
                var encBytes = ProtectedData.Unprotect(bytes, new byte[0], DataProtectionScope.LocalMachine);
                return System.Text.Encoding.UTF8.GetString(encBytes);
            }
            catch (Exception ex)
            {
              return String.Empty;
            }
        } 
```

在其他 Page ，使用 like.......

```
var decryptedString=Decrypt(Request["YOUR PASSING ID"] || Request.QueryString["YOUR PASSING ID"])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T19:20:32.963

一种方法是为您要传递的每个 ID 创建一个 GUID，并在后端某处的 Dictionary 中保持跟踪。因此，您将查询字符串中的 Guid 传递并使用字典将其“解码”回普通 ID。

但是，这是“默默无闻的安全”，因此您仍然需要在接收页面上执行授权检查（以确保没有人摆弄查询字符串。当然，猜测 GUID 正确的机会可能比被闪电击中的机会小，仍然需要检查）。

# wpf - 在 dataGrid 上显示两个 textBlock

> ID：14013300
> 
> 赞同：1
> 
> 时间：2012-12-23T17:59:54.807
> 
> 标签：wpf, panel, datatemplate

是否有可能在 Grid 上显示两个 TextBlock ？

我试过了，但我只看到我的第一个 TextBlock。

这是我的 XAML 代码：

```
 <ListBox x:Name="ListBoxTiers" HorizontalAlignment="Left" VerticalAlignment="Top"> 
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#FFDEDEDE" CornerRadius="10" Margin="10">
                            <StackPanel Orientation="Horizontal">
                                <Grid Height="89" Width="975">
                                    <TextBlock x:Name="TxtBox_CodeTiers" TextWrapping="Wrap" Text="{Binding m_strCode}" Margin="12,23,479,30" />
                                    <TextBlock x:Name="TxtBox_NomTiers" Margin="501,23,14,24" TextWrapping="Wrap" Text="{Binding m_strNom}"/>
                                </Grid>                                                  
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:33:34.543

Grid 是最好的支持方向的 UI 容器。您可以通过以下方式修改您的代码。

```
<ListBox x:Name="ListBoxTiers" HorizontalAlignment="Left" VerticalAlignment="Top"> 
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="#FFDEDEDE" CornerRadius="10" Margin="10">
                            <Grid Height="89" Width="975">
                       <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
                                <TextBlock x:Name="TxtBox_CodeTiers" Grid.Column=0 TextWrapping="Wrap" Text="{Binding m_strCode}" />
                                <TextBlock x:Name="TxtBox_NomTiers" Grid.Column=1 TextWrapping="Wrap" Text="{Binding m_strNom}"/>
                            </Grid> 
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

您应该必须根据您的要求调整列的列宽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:37:07.147

您的两个文本都绘制在同一位置。您可以添加 Grid 列/Raws 或完全删除网格并留在 stackPanel

您应该[查看面板概述](http://msdn.microsoft.com/en-us/library/ms754152.aspx)

# ios - dataWithContentsOfURL iOS HTTPS 自签名证书

> ID：14013307
> 
> 赞同：5
> 
> 时间：2012-12-23T18:01:17.087
> 
> 标签：ios, https, certificate

我正在尝试使用该方法从托管在 Web 服务器上的页面下载 JSON 对象

`[NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://<url>"]]`

但它不起作用。使用相同地址的相同调用，`http://`而不是`https://`工作。服务器具有自签名证书，并且不受 iOS 信任（默认情况下）。

我该怎么做才能让它被我的应用程序信任？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:58:45.160

不要`+dataWithContentsOfURL:`用于这个。直接使用`NSURLConnection`，它为您提供了正确控制身份验证的委托方法。

# api - 有没有其他方法可以在 Magento api 中获得可配置的产品及其选项

> ID：14013308
> 
> 赞同：2
> 
> 时间：2012-12-23T18:01:21.727
> 
> 标签：api, magento, magento-1.7

我正在使用 magento 1.7，我的问题是如何通过默认 api 获取可配置产品及其选项，而无需创建自定义 api。因为我的客户想要在不修改服务器上的实际源代码的情况下获取 api。

现在我可以获得保修和屏幕保护膜等选项，但无法获得颜色和尺寸。请参考下面的截图：

![可配置产品及其选项](../Images/ef4911657dda63b82a1b9c8c3208f934.png)

**在没有编写自定义 api**来获得可配置产品的情况下，我搜索了更多内容来找到我的解决方案。但到目前为止还没有运气！

有没有其他方法可以做到这一点？请告诉我。

请注意，我是一个纯粹的前端开发人员角色。通过参考 API 参考文档，我们正在开发此应用程序。

参考 API 文档 - [http://www.magentocommerce.com/api/soap/introduction.html](http://www.magentocommerce.com/api/soap/introduction.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:53:07.947

尝试使用 $product->getOptions()，但请确保您加载了产品对象 $product = $observer->getEvent()->getProduct();

# java - 找不到文件结尾

> ID：14013316
> 
> 赞同：0
> 
> 时间：2012-12-23T18:02:21.247
> 
> 标签：java, stdin, eof

尝试从标准输入中查找文件结尾时遇到问题。我正在尝试获取所有写入 concil 的数字，直到达到 EOF：

1

2

3

4

EOF

我的代码如下所示：

```
public void readInput() {
    Scanner scanner = new java.util.Scanner(new InputStreamReader(System.in)).useDelimiter("n");
    ...
    while (scanner.hasNextLine()) {
    ..
    }    
} 
```

所以到达EOF时它不会终止的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:08:14.020

从 读取时`System.in`，您可以`CTRL-Z`在 Windows 和`CTRL-D`*nix 平台上使用`EOF`.

除非有特定要求，否则通常不需要使用分隔符。这可以简化为：

```
Scanner scanner = new Scanner(System.in);
while (scanner.hasNextLine()) {
   System.out.println(scanner.nextLine());
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T01:57:30.807

如果需要一些分隔符，绝对使用分隔符是一个好习惯。避免使用`CTRL-Z`or `CTRL-D`。在这里，我使用了`EOF`，作为分隔符`End Of File`，`end-of-file`您可以根据需要修改分隔符。

```
 Scanner sin = new Scanner(System.in);
        CharSequence end1 = "end-of-file";
        CharSequence end2 = "EOF";
        CharSequence end3 = "End Of File";
        ArrayList<String> Arr = new ArrayList<String>();
        int i =0;

        while(sin.hasNext())
        {
            Arr.add(sin.nextLine());
            if( (Arr.get(i).contains(end1)) == true || (Arr.get(i).contains(end2)) == true || (Arr.get(i).contains(end3) ) == true )
            {
                i++;
                break;
            }
            i++;
        } 
```

# java - 计算一个数的最大余数

> ID：14013318
> 
> 赞同：2
> 
> 时间：2012-12-23T18:02:44.373
> 
> 标签：java, performance, modulo

我正在尝试计算一个数字的最大余数，并找到将原始数字除以得到最大余数的数字。这是我当前的代码，我很确定它可以工作。我只是想让它更快。有什么建议吗？

```
int c=Integer.parseInt(br.readLine());

        if(c==2)
            pw.println(2);
        else if(c%2==0)
        {               
            pw.println(c-1);
        }
        else
        {
            max=0;
            int numDivided=0;
            for(int z=1; z<c; z+=2)
            {
                if(c%z>max)
                {
                    numDivided=z;
                    max=c%z;
                }
            }
            pw.println(numDivided); 
```

新的更快的代码

```
c=Integer.parseInt(br.readLine());
int largestRemainder = c % ((c/2) + 1);
pw.println(((c/2) + 1)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:08:22.410

最大的余数应该小于输入数的一半。所以你应该使用这个公式，`c`输入整数在哪里：

```
int largestRemainder = c % ((c/2) + 1); 
```

*   对于偶数，例如`c = 24`它给出`largestRemainder = 11`
*   对于奇数，例如`c = 33`它给出`largestRemainder = 16`

而这些结果实际上是正确的。

# ruby-on-rails-3.1 - 将 Bootstrap-Image-Gallery 添加到 Rails 项目

> ID：14013320
> 
> 赞同：0
> 
> 时间：2012-12-23T18:02:47.947
> 
> 标签：ruby-on-rails-3.1, twitter-bootstrap, assets

我为 Bootstrap 找到了这个不错的图片库插件，但我不确定如何将它集成到我的 rails 项目中。

[https://github.com/blueimp/Bootstrap-Image-Gallery](https://github.com/blueimp/Bootstrap-Image-Gallery)

我想我可以使用 Rails (3.1) 供应商的文件夹。

所以这就是我所做的。我在 vendor/assets 文件夹中克隆了这些文件：

```
git clone https://github.com/blueimp/Bootstrap-Image-Gallery.git 
```

好的，现在它在那里，我该如何使用它？

如何在我的应用程序中加载这些资源？

我当前的 application.js：

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require bootstrap
//= require dzscalendar.js
//= require dzstooltip.js
//= require bootstrap-datepicker
//= require gmaps4rails/gmaps4rails.base
//= require gmaps4rails/gmaps4rails.googlemaps 
```

我当前的application.css：

```
/*
 *= require_self
 *= require_tree . 
 *= require bootstrap-datepicker
*/

@import "bootswatch/cerulean/variables";
@import "bootstrap";
@import "bootswatch/cerulean/bootswatch";

@import "dzscalendar.css.scss";
@import "dzstooltip.css.scss";
@import "gmaps4rails";
@import 'font-awesome'; 
```

我尝试了各种各样的东西，但看起来我不明白我刚才在做什么。

希望我能在这里找到一些指导。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:17:27.063

好的，是时候利用这里的资产管道了，可能有更好的方法来做到这一点，但现在我只需将 css、图像和 js 复制到您现有的项目中（就像示例中一样，暂时将它们分开）

然后在您的视图中，您可以自由添加您的 html（如示例中所示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T02:32:15.697

请参阅[https://github.com/kristianmandrup/bootstrap-addons-rails](https://github.com/kristianmandrup/bootstrap-addons-rails)，它是您包含在 Gemfile 中的即用型 gem，因此您可以使用资产管道要求 Image Gallery。

# javascript - 删除导航链接上的活动类

> ID：14013323
> 
> 赞同：0
> 
> 时间：2012-12-23T18:03:26.653
> 
> 标签：javascript, jquery, html, navigation

这是我的 HTML 菜单结构：

```
<div id="footer-menu">
                <ul>
                    <li><a id="creative-events-menu" href="#/creative-events"></a></li>
                    <li><a id="creative-ajans-menu" href="#/creative-ajans"></a></li>
                    <li><a id="incentive-travel-menu" href="#/incentive-travel"></a></li>
                </ul>
                <ul>
                    <li><a id="hakkimizda-menu" href="#/hakkimizda"></a></li>
                    <li><a id="haberler-menu" href="#/haberler"></a></li>
                    <li><a id="galeri-menu" href="#/galeri"></a></li>
                    <li><a id="referanslar-menu" href="#/referanslar"></a></li>
                    <li><a id="iletisim-menu" href="#/iletisim"></a></li>
</ul>
                    </ul>
            </div> 
```

我想要，`active`在活动菜单上添加类并在我得到另一个页面时删除。

JS：

```
<script type="text/javascript">

$(function() {
    $('li a').click(function(e) {
        e.preventDefault();
        var $this = $(this);
        $this.closest('ul').find('.active').removeClass('active');
        $this.parent().addClass('active');

    });
});

</script> 
```

此脚本添加`active`类但不删除。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:04:38.140

### 以这种方式更改脚本有效：

```
 <script type="text/javascript">
    $(function() {
        $('li a').click(function(e) {
            e.preventDefault();
            $(this).closest('ul').find('.active').removeClass('active');
            $(this).parent().addClass('active');
        });
    });
  </script> 
```

如果您想将类添加到`<a>`，请使用：`$(this).addClass('active');`而不是`$(this).parent().addClass('active');`

### 小提琴：http: [//jsbin.com/uyidom/1](http://jsbin.com/uyidom/1)

* * *

### 这是一个错字还是你有`</ul>`两次？

# android - 模拟器没有运行 Windows XP

> ID：14013324
> 
> 赞同：1
> 
> 时间：2012-12-23T18:03:26.793
> 
> 标签：android, emulation

我遇到了与下面指定的问题相同的问题

[模拟器没有运行](https://stackoverflow.com/questions/11902685/emulator-not-running)

但是，我使用的是 Windows XP，ADT v21.0.0-531062。在 My AVD Manager 中，不能像早期 ADT 版本那样定义任何硬件选项。

我已经设置了一个 AVD，每当我启动“adt-bundle-windows-x86”附带的任何示例应用程序时，我都会收到以下错误：

```
 [2012-12-23 19:37:33 - Emulator] Failed to create Context 0x3005
    [2012-12-23 19:37:33 - Emulator] emulator: WARNING: Could not initialize OpenglES  emulation, using software renderer. 
```

在我的 AVD 上，我最初是黑屏，几秒钟后出现“ANDROID”文本，但没有任何反应。

下面请找到从控制台启动模拟器的结果。

**请帮我！**

```
emulator: Android virtual device file at: C:\Dokumente und Einstellungen\Alexand
er\.android/avd/Galaxy_Nexus.ini
emulator: virtual device content at C:\Dokumente und Einstellungen\Alexander\.an
droid\avd\Galaxy_Nexus.avd
emulator: virtual device config file: C:\Dokumente und Einstellungen\Alexander\.
android\avd\Galaxy_Nexus.avd/config.ini
emulator: using core hw config path: C:\Dokumente und Einstellungen\Alexander\.a
ndroid\avd\Galaxy_Nexus.avd/hardware-qemu.ini
emulator: Found AVD target API level: 17
emulator: 'magic' skin format detected: 720x1280
emulator: autoconfig: -skin 720x1280
emulator: autoconfig: -skindir (null)
emulator: keyset loaded from: C:\Dokumente und Einstellungen\Alexander\.android\
default.keyset
emulator: found magic skin width=720 height=1280 bpp=16
emulator: autoconfig: -kernel C:\Programme\adt-bundle-windows-x86\sdk/system-ima
ges\android-17\armeabi-v7a\/kernel-qemu
emulator: autoconfig: -ramdisk C:\Programme\adt-bundle-windows-x86\sdk/system-im
ages\android-17\armeabi-v7a\/ramdisk.img
emulator: Using initial system image: C:\Programme\adt-bundle-windows-x86\sdk/sy
stem-images\android-17\armeabi-v7a\/system.img
emulator: autoconfig: -data C:\Dokumente und Einstellungen\Alexander\.android\av
d\Galaxy_Nexus.avd/userdata-qemu.img
emulator: autoconfig: -initdata C:\Dokumente und Einstellungen\Alexander\.androi
d\avd\Galaxy_Nexus.avd/userdata.img
emulator: autoconfig: -cache C:\Dokumente und Einstellungen\Alexander\.android\a
vd\Galaxy_Nexus.avd/cache.img
emulator: autoconfig: -sdcard C:\Dokumente und Einstellungen\Alexander\.android\
avd\Galaxy_Nexus.avd/sdcard.img
emulator: Physical RAM size: 90MB

Content of hardware configuration file:
  hw.cpu.arch = arm
  hw.cpu.model = cortex-a8
  hw.ramSize = 90
  hw.screen = touch
  hw.mainKeys = no
  hw.trackBall = no
  hw.keyboard = no
  hw.keyboard.lid = no
  hw.keyboard.charmap = qwerty2
  hw.dPad = no
  hw.gsmModem = yes
  hw.gps = yes
  hw.battery = yes
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  hw.sdCard.path = C:\Dokumente und Einstellungen\Alexander\.android\avd\Galaxy_
Nexus.avd/sdcard.img
  disk.cachePartition = yes
  disk.cachePartition.path = C:\Dokumente und Einstellungen\Alexander\.android\a
vd\Galaxy_Nexus.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 720
  hw.lcd.height = 1280
  hw.lcd.depth = 16
  hw.lcd.density = 320
  hw.lcd.backlight = yes
  hw.gpu.enabled = no
  hw.camera.back = none
  hw.camera.front = none
  vm.heapSize = 32
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = C:\Programme\adt-bundle-windows-x86\sdk/system-images\android-17
\armeabi-v7a\/kernel-qemu
  kernel.parameters =  android.checkjni=1
  disk.ramdisk.path = C:\Programme\adt-bundle-windows-x86\sdk/system-images\andr
oid-17\armeabi-v7a\/ramdisk.img
  disk.systemPartition.initPath = C:\Programme\adt-bundle-windows-x86\sdk/system
-images\android-17\armeabi-v7a\/system.img
  disk.systemPartition.size = 204m
  disk.dataPartition.path = C:\Dokumente und Einstellungen\Alexander\.android\av
d\Galaxy_Nexus.avd/userdata-qemu.img
  disk.dataPartition.size = 200m
  avd.name = Galaxy_Nexus
.
QEMU options list:
emulator: argv[00] = "./emulator-arm.exe"
emulator: argv[01] = "-android-hw"
emulator: argv[02] = "C:\Dokumente und Einstellungen\Alexander\.android\avd\Gala
xy_Nexus.avd/hardware-qemu.ini"
Concatenated QEMU options:
 ./emulator-arm.exe -android-hw 'C:\Dokumente und Einstellungen\Alexander\.andro
id\avd\Galaxy_Nexus.avd/hardware-qemu.ini'
emulator: registered 'boot-properties' qemud service
emulator: nand_add_dev: system,size=0xcc00000,initfile=C:\Programme\adt-bundle-w
indows-x86\sdk/system-images\android-17\armeabi-v7a\/system.img
emulator: mapping 'system' NAND image to C:\DOKUME~1\ALEXAN~1\LOKALE~1\Temp\\And
roidEmulator\TMP56.tmp
emulator: rounding devsize up to a full eraseunit, now cc0f000

emulator: nand_add_dev: userdata,size=0xc800000,file=C:\Dokumente und Einstellun
gen\Alexander\.android\avd\Galaxy_Nexus.avd/userdata-qemu.img
emulator: rounding devsize up to a full eraseunit, now c810000

emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '32m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '320'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '0'
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'none'
emulator: nand_add_dev: cache,size=0x4200000,file=C:\Dokumente und Einstellungen
\Alexander\.android\avd\Galaxy_Nexus.avd/cache.img
emulator: Initializing hardware OpenGLES emulation support
Failed to create Context 0x3005
emulator: Can't start OpenGLES renderer?
emulator: WARNING: Could not initialize OpenglES emulation, using software rende
rer.
emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS
1 android.checkjni=1 ndns=1
emulator: Trace file name is not set

emulator: autoconfig: -scale 0.569531
emulator: Could not open file: (null)/system/build.prop: No such file or directo
ry
emulator: control console listening on port 5554, ADB on port 5555
emulator: sent '0012host:emulator:5555' to ADB server
emulator: ping program: C:\Programme\adt-bundle-windows-x86\sdk\tools\ddms.bat
emulator: ping command: C:\WINXP\system32\cmd.exe /C "C:\Programme\adt-bundle-wi
ndows-x86\sdk\tools\ddms.bat" ping emulator 21.0 "" "" ""
goldfish_fb_get_pixel_format:167: display surface,pixel format:
  bits/pixel:  16
  bytes/pixel: 2
  depth:       16
  red:         bits=5 mask=0xf800 shift=11 max=0x1f
  green:       bits=6 mask=0x7e0 shift=5 max=0x3f
  blue:        bits=5 mask=0x1f shift=0 max=0x1f
  alpha:       bits=0 mask=0x0 shift=0 max=0x0
emulator: User-config was not changed. 
```

# windows-phone-8 - 创建我的第一个 Window 8 手机应用程序

> ID：14013329
> 
> 赞同：0
> 
> 时间：2012-12-23T18:03:55.980
> 
> 标签：windows-phone-8

我有一台安装了 Windows 7 的 64 位 I3 笔记本电脑。我是一名 ASP.NET MVC 开发人员，对 C# 有深入的了解。

我的机器上安装了 Visual Studio 2010。

我想尝试开发 Windows 8 手机应用程序（只是为了好玩）。

我的问题是：

使用当前配置可以创建 Windows 8 手机应用程序吗？我不想将我的笔记本电脑升级到 Windows 8（因为它是一台办公笔记本电脑）。

请分享您对此的看法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:06:03.407

为了开发 Windows Phone 8，您需要 Windows 8 64 位和 Visual Studio 2012。所以，是的，您需要升级或在 VM 和实际 pone 上进行。

# java - 如何从控制台显示输出到 JTextArea

> ID：14013331
> 
> 赞同：0
> 
> 时间：2012-12-23T18:03:59.713
> 
> 标签：java, swing, jtextarea

我是Java编程的初学者。如何将我的输出从控制台显示到 JTextArea。这里我的代码只显示输出控制台。任何人都可以告诉或告诉我我该怎么做。谢谢。

```
import java.sql.*;

public class Route
{

public void routeList() 
{

    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "YarraTram";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root"; 
    String password = "abc123";
    try 
    {
        Class.forName(driver).newInstance();
        conn = DriverManager.getConnection(url+dbName,userName,password);

        PreparedStatement statement = conn.prepareStatement("Select rid,route from route");
        ResultSet result = statement.executeQuery();

        while(result.next())
        {
            System.out.println(result.getString(1)+" "+result.getString(2));

        } 

        conn.close();

    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    }
 }
} 
```

这是另一个文件

```
 import java.awt.FlowLayout;
 import javax.swing.JFrame;
 import javax.swing.JButton;
 import javax.swing.JTextArea;

 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;

 public class GUI
 {
    public void createAndShowGUI()
 {

    JButton button2 = new JButton("Route");

    //create a frame
    JFrame frame = new JFrame("Yarra Tram Route Finder");

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.setLayout(new FlowLayout());

    frame.add(button2);

button2.addActionListener(new ActionListener() 
    {

            public void actionPerformed(ActionEvent e)
            {

            //Execute when button is pressed
                    showNewFrame();
                    Route route = new Route();
                    route.routeList();
            }
           public void showNewFrame() 
            {
                JFrame frame = new JFrame("Yarra Tram Route Finder (Route)" );
                JTextArea textArea = new JTextArea();

                frame.add(textArea);
                frame.setSize(500,120);
                frame.setLocationRelativeTo( null );
                frame.setVisible( true );
                textArea.setEditable( false );

            }
    });
            frame.pack();
    frame.setSize(350,100);
    frame.setVisible(true); 
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:15:27.683

修改了现有代码中的更改。检查这个

```
public class GUI extends JFrame {

    JButton button2;
    JTextArea textArea;

    public GUI() {
        super("Yarra Tram Route Finder");
    }

    public void routeList() {

        Connection conn = null;
        String url = "jdbc:mysql://localhost:3306/";
        String dbName = "YarraTram";
        String driver = "com.mysql.jdbc.Driver";
        String userName = "root";
        String password = "abc123";
        try {
            Class.forName(driver).newInstance();
            conn = DriverManager.getConnection(url + dbName, userName, password);

            PreparedStatement statement = conn.prepareStatement("Select rid,route from route");
            ResultSet result = statement.executeQuery();

            StringBuilder strBuilder = new StringBuilder();
            while (result.next()) {
                strBuilder.append(result.getString(1)).append(" ").append(result.getString(2));
                strBuilder.append("\n");

            }
            textArea.setText(strBuilder.toString());
            conn.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void createAndShowGUI() {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new FlowLayout());
        button2 = new JButton("Route");
        textArea = new JTextArea(20, 20);
        add(textArea);
        add(button2);
        button2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                routeList();
            }
        });
        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GUI gui = new GUI();
                gui.createAndShowGUI();
            }
        });
    }
} 
```

# javascript - 将大文件上传到 S3 和服务器会话

> ID：14013339
> 
> 赞同：0
> 
> 时间：2012-12-23T18:05:17.190
> 
> 标签：javascript, session, amazon-s3, plupload

我陷入了一个我似乎无法找到“正确”方法的问题。我正在从客户端直接将文件上传到 S3（使用 Plupload 和 sprightlysoft 类）。服务器设置策略文件和所有；但是，当上传大文件时，会话似乎过期并且对存储桶的访问将被拒绝（或者至少这是我认为的问题）；奇怪的是，上传者显示上传成功，而 javascript 调试显示 403 访问被拒绝。关于可以在这里做什么的任何想法或想法？有没有办法在上传者仍在上传时延长会话寿命？或者可能是另一种合适的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T14:55:28.400

好吧，如果使用 Ruby on Rails 和carrierwave_direct，这行中的错误会导致我的问题：

```
 def move_to_cache
    true
  end
  def move_to_store
    true
  end 
```

我在 move_to_cache 中返回 false，并且没有 move_to_store 这行在上传大文件时很有用

# javascript - iFrame.contentDocument 的问题

> ID：14013340
> 
> 赞同：0
> 
> 时间：2012-12-23T18:05:19.623
> 
> 标签：javascript, google-chrome, iframe

基本上，我制作了一个 javascript 来刷新页面，它会找到价格并在商品价格上涨时购买所需的价格。

我让它在没有 iframe 的情况下工作，但我需要在 iframe 中工作，这是我遇到的问题。

如果您访问此页面：[ [http://m.roblox.com/items/100933289/privatesales](http://m.roblox.com/items/100933289/privatesales) ]

并运行此代码：

```
alert(document.getElementsByClassName('currency-robux')[0].innerHTML); 
```

您会收到最低价格的提醒。在代码中，这不起作用（因此，我的问题。）

尝试在此页面上运行以下代码以使其正常工作 [ [http://www.roblox.com/Junk-Bot-item?id=100933289](http://www.roblox.com/Junk-Bot-item?id=100933289) ]

```
var filePath = document.URL;
var itemid = filePath.slice(((filePath.search("="))+1));
var mobileRoot = 'http://m.roblox.com/items/';
var mobileEnd = '/privatesales';
var mobileFilePath = mobileRoot+itemid+mobileEnd;

var iframe2 = '<iframe id="frame" width="100%" height="1" scrolling="yes"></iframe>';
document.write(iframe2);
var iframe = parent.document.getElementById("frame");
iframe.height = 300;
iframe.width = 500;
iframe.src = mobileFilePath;
var price;
var snipe = false;
var lp = Number(prompt("Snipe Price?"));
document.title = "Sniping";

function takeOutCommas(s){
    var str = s;
    while ((str.indexOf(",")) !== -1){
        str = str.replace(",","");
    }
    return str;
}

function load() {
    if (snipe == false) {
        tgs = iframe.contentDocument.getElementsByClassName('currency-robux');
        price = Number((takeOutCommas(tgs[0].innerHTML)));
        alert(price);
    }
}

iframe.onload = load; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:18:09.530

您可以尝试同时拥有两个页面 - 来自“m.roblox.com”的页面和来自“www.roblox.com”的页面 - 在头顶添加以下内容：

```
<script>
  document.domain = "roblox.com";
</script> 
```

不允许来自不同域的代码查看彼此的页面内容，但是如果您将域设置为相同的后缀，那么它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:16:36.923

如果您无法通过共享相同的`document.domain="roblox.com"`代码使其工作，那么您可以尝试将消息发布到 iframe。

把它放在 iframe 页面中：

```
window.addEventListener('message',function(e) {
}); 
```

在父页面中执行此操作以将消息（可以是字符串或对象，实际上是任何东西）传递给 iframe：

```
document.getElementById("frame").contentWindow.postMessage({ "json_example": true }, "*"); 
```

将其放在父级中以收听消息：

```
window.addEventListener("message", messageReceived, false);
function messageReceived(e) {
} 
```

从 iframe 内部发布一条消息：

```
window.parent.postMessage('Hello Parent Page','*'); 
```

# matrix - 稀疏矩阵存储格式 - 转换

> ID：14013342
> 
> 赞同：2
> 
> 时间：2012-12-23T18:05:21.940
> 
> 标签：matrix, sparse-matrix

是否有将压缩行存储（CRS）格式的稀疏矩阵转换为坐标列表（COO）格式的有效方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:12:28.963

看看 Yousef Saad 的库[SPARSKIT——](http://www-users.cs.umn.edu/~saad/software/SPARSKIT/)他有子程序可以在压缩的稀疏行和坐标格式之间来回转换，以及其他几个稀疏矩阵存储方案。

无论如何，要了解如何从压缩格式中获取坐标格式，最简单的方法是首先考虑如何提出压缩行格式。假设您在 COO 中有一个稀疏矩阵，例如，您已将所有内容按顺序排列

```
rows: 1  1  1  1  2  2  2  2  2  3  3  3 ...
cols: 1  3  5  9  2  3  7  9  11 1  2  3 ... 
```

因此，第 1 行中的非零条目是 (1,1)、(1,3)、(1,5)、(1,9) 等等。您在行数组中存储了大量冗余数据；相反，您可以只使用一个数组`ia`来告诉您数组中 row`ia(i)`的起始地址。在我们上面的例子中，我们将有`cols``i`

```
ia  : 1  5  10  ...
cols: 1  3  5  9  2  3  7  9  11 1  2  3 ... 
```

从首席运营官到企业社会责任，我们只是利用了这样一个事实：

```
ia(i+1) = ia(i) + number of non-zero entries in row i 
```

对于任何 i。知道了这一点，您可以向后工作以从 CSR 获取 COO 格式。

# mysql - 加载 databsae.yml 会出错

> ID：14013348
> 
> 赞同：2
> 
> 时间：2012-12-23T18:06:50.430
> 
> 标签：mysql, ruby-on-rails-3, yaml

我试图让我的 mysql 测试数据库设置并有一个奇怪的错误，这些是我的配置

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'
gem "mysql2"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

group :test, :development do
  gem "rspec-rails", "~> 2.0"
  gem 'database_cleaner'
  gem 'capybara'
  gem "factory_girl_rails", ">= 4.1.0"
  gem 'cucumber-rails', :require => false
  gem 'mocha'
  gem "shoulda-matchers"
  gem "spork"
  gem 'guard-rspec'
  gem "guard-spork"
  gem 'rb-inotify', '~> 0.8.8' 
  gem 'cucumber-rails', :require => false
  gem 'cucumber-rails-training-wheels' #Still running on 'L' board
end

gem 'jquery-rails'
gem "twitter-bootstrap-rails"
gem "therubyracer", '0.10.2'
gem "less-rails"

gem 'devise'
gem 'omniauth-google-oauth2'
gem 'cancan'

# To use debugger
gem 'debugger'
gem 'ruby-prof' 
```

我的 database.yml 文件

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: mysql2
  username: root
  password: root
  host: localhost
  database: bamboo_test

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000

cucumber:
  <<: *test 
```

这是我得到的错误

```
[sameera@sameera bamboo]$ rake db:create:all
rake aborted!
can't convert nil into Hash
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/application/configuration.rb:115:in `database_configuration'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:25:in `block (2 levels) in <top (required)>'
Tasks: TOP => db:create:all => db:load_config
(See full trace by running task with --trace)
[sameera@sameera bamboo]$ rake db:create:all --trace
** Invoke db:create:all (first_time)
** Invoke db:load_config (first_time)
** Execute db:load_config
rake aborted!
can't convert nil into Hash
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:196:in `merge!'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:196:in `block in visit_Psych_Nodes_Mapping'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:190:in `each'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:190:in `each_slice'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:190:in `visit_Psych_Nodes_Mapping'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/visitor.rb:7:in `accept'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:16:in `accept'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:205:in `block in visit_Psych_Nodes_Mapping'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:190:in `each'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:190:in `each_slice'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:190:in `visit_Psych_Nodes_Mapping'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/visitor.rb:7:in `accept'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:16:in `accept'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych/nodes/node.rb:25:in `to_ruby'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych.rb:107:in `load'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.9/lib/rails/application/configuration.rb:115:in `database_configuration'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:25:in `block (2 levels) in <top (required)>'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/bin/rake:19:in `load'
/home/sameera/.rvm/gems/ruby-1.9.2-p290/bin/rake:19:in `<main>'
Tasks: TOP => db:create:all => db:load_config 
```

加载`.yml`文件时出现错误，但文件对我来说似乎没问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:15:36.030

问题是您在 cucumber 部分中引用了测试环境别名，而没有实际创建它。尝试将测试环境修改为：

```
test: &test
  adapter: mysql2
  username: root
  password: root
  host: localhost
  database: bamboo_test 
```

# autohotkey - InStr() 功能

> ID：14013349
> 
> 赞同：0
> 
> 时间：2012-12-23T18:07:00.583
> 
> 标签：autohotkey

也许我误解了 AutoHotKey 功能的工作原理。下面是一些测试代码：

```
pos = InStr(123abc789, abc)
MsgBox, abc is at pos "%pos%"
Exit 
```

MsgBox 内容如下：

> abc 在 pos "InStr(123abc789, abc)"

我期望 pos 的值为 4。

现在，AutoHotKey 帮助文件指出`InStr()`：

```
InStr(Haystack, Needle [, CaseSensitive = false, StartingPos = 1, Occurrence = 1]): 
```

返回字符串 Haystack 中出现字符串 Needle 的位置...例如，“123abc789”中“abc”的位置始终为 4。

这是怎么回事？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:10:44.163

你错过了两件事。您必须确保使用`:=`赋值并将字符串放在引号中。请看下面修改后的代码：

```
pos := InStr("123abc789", "abc") ; strings must be in quotes unless variables
MsgBox, abc is at pos "%pos%" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-18T05:20:52.067

还：

```
MsgBox, abc is at pos "%pos%" 
```

不能工作，变量必须在百分号之间，不能加引号。

这将起作用：

```
MsgBox, abc is at pos %pos% 
```

# xml - XQuery：如何快速比较来自不同 XML 文件的 2 个 id？

> ID：14013359
> 
> 赞同：1
> 
> 时间：2012-12-23T18:07:49.423
> 
> 标签：xml, xquery

所以我有这两个 XML 文件：

数据.xml

```
<datas>
  <data id="1"><place>Mu</place></data>
  <data id="2"><place>Atlantis</place></data>
  ...
  <data id="28492"><place>Mu</place></data>
</datas> 
```

ingrs.xml

```
<ingrs>
  <ingr id="1">...</ingr>
  <ingr id="2">...</ingr>
  ...
  <ingr id="83882">...</ingr>
</ingrs> 
```

我做的第一件事就是只保留想要的数据的 ID。但后来我想做一个 for 语句，快速找到具有相同 id（唯一）的 ingr，而不是扫描文件的任何 83882 个 ingr。

```
let $ids := //data[./place = 'Mu']/@id return
  for $i in //ingr
  where() (: what to do here ? Something like $i/@id = $ids :)
  return $i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T20:53:56.250

> 我做的第一件事就是只保留想要的数据的 ID。但后来我想做一个 for 语句，快速找到具有相同 `id`（唯一）的 ingr，而不是扫描文件的任何 83882 个 ingr。

我不相信在标准 XQuery 中可以使用“更快”的方式来执行此操作——下面的查询仍然具有 O(N*M) 的最差时间复杂度，其中`N`和`M`分别是两个 XML 文档。`data``ingr`

在 XSLT 中，可以在任何节点上定义一个键（索引），它是其他节点的函数，并且该索引在使用时可以产生接近 O(1) 的快速搜索。

**使用**：

```
let $doc1 :=
    <datas>
      <data id="1"><place>Mu</place></data>
      <data id="2"><place>Atlantis</place></data>
      ...
      <data id="28492"><place>Mu</place></data>
    </datas>

    , $doc2 :=
        <ingrs>
          <ingr id="1">...</ingr>
          <ingr id="2">...</ingr>
          ...
          <ingr id="83882">...</ingr>
        </ingrs>,
        $data := $doc1//data[place='Mu'],
        $ids := $data/@id
  return
    ($data, $doc2//ingr[@id = $ids]) 
```

# ruby-on-rails - Rspec + OAuth：从测试中登录时遇到问题（omniauth 模拟）

> ID：14013366
> 
> 赞同：0
> 
> 时间：2012-12-23T18:08:44.267
> 
> 标签：ruby-on-rails, rspec, omniauth

我正在我的应用程序中测试一个控制器，它应该为已提供信息并请求访问权限的用户（“登录的客人”）呈现一个视图，为世界其他地方（匿名用户）呈现另一个视图。我正在使用 OmniAuth 和 Rolify。

测试是这样的：

```
context 'signed in guests' do
   before do
     guest = create(:user,:guest)
     OmniAuth.config.mock_auth[:google] = {
          uid: guest.uid
     }
     session[:user_id] = guest.id
   end
   it "shows the Please Wait for Confirmation view" do
     puts "Rspec says Current User: #{@current_user.inspect}"
     get :index
     response.should render_template :pending_authorization
   end
  end 
```

用户工厂如下所示：

```
FactoryGirl.define do
factory :user do
  name "MyString"
  email "MyString"
  provider "MyString"
  uid "MyString"

  trait :admin do
    after(:create) {|user| user.add_role(:admin)}
  end

  trait :guest do
    after(:create) {|user| user.add_role(:guest)}
  end

  trait :authorized_user do
    after(:create) {|user| user.add_role(:user)}
  end

end 
```

结尾

但是，当我运行它时，我的 puts 实际上给了我这个：

```
 Rspec says Current User: nil 
```

那么......为什么当前用户为零，即使我使用omniauth 模拟创建它？

**编辑：** current_user 来自我的应用程序助手，如果有帮助的话。

提前致谢！

# php - PHP 中是否有另一种方式来使用表单而不使用复选标记或单选按钮来发送数据？

> ID：14013367
> 
> 赞同：0
> 
> 时间：2012-12-23T18:09:10.303
> 
> 标签：php, html

我想知道在 PHP 或 HTML 中是否有另一种方式来使用表单而无需复选标记或单选按钮。例如，如果我只是单击链接或图片，它可以根据指定将数据发送到其他 PHP 文件在表单动作中......我想知道我是否可以让图片图标在表单动作中将数据发送到另一个 php 页面而不必使用单选按钮.. 但我想是否有人只需要从许多图标中选择一个可用..单选按钮可能是唯一可用的选项，还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:41:16.943

我喜欢使用`button`元素。扔一个`type="submit"`，你就有了自己的派对。

演示：http: [//jsfiddle.net/RnYeg/](http://jsfiddle.net/RnYeg/)

**HTML**

```
<form method="post" action="">
    <button type="submit" name="animal" value="pig">Go</button>
</form>​ 
```

**CSS**

```
button {
    background: transparent url(http://lorempixel.com/output/animals-q-c-200-200-6.jpg) 0 0 no-repeat;
    border: none;
    cursor: pointer;
    height: 200px; width: 200px;
}​ 
```

* * *

或者，您可以只使用一个`img`标签：

演示：http: [//jsfiddle.net/umuaU/2/](http://jsfiddle.net/umuaU/2/)

**HTML**

```
<form method="post" action="">
    <button type="submit" name="animal" value="pig"><img src="http://lorempixel.com/output/animals-q-c-200-200-6.jpg" alt="Pig" /></button>
</form>​ 
```

**CSS**

```
button {
    background: none;
    border: none;
    cursor: pointer;
    margin: 0;
    padding: 0;
}​ 
```

# jquery - jquery在输入文本区域输入时选择下一个按钮

> ID：14013370
> 
> 赞同：2
> 
> 时间：2012-12-23T18:09:31.770
> 
> 标签：jquery, dom

我有很多输入文本区域，后面跟着一个按钮，我想做的是自动为每个输入框选择下一个按钮元素，在按下 Enter 后不为输入框或按钮定义 id 或类。

我认为我的问题在于无法正确使用下一个功能，我对此有点陌生：

```
 <input type="text"/> <button>enter</button> /after hitting enter in this input, it would click the button element /

    <input type="text"/> <button>enter</button> /after hitting enter in this input, it would hit enter in this button element/

     <script>
     $("input[type=text]").keyup(function(event){
    if(event.keyCode ==13){
    $("input[type=text]").next("input[type=text] button").click();
     }
     }); 
```

上面的脚本部分不起作用，但是如果我给他们 ids 或 classes，那么它就起作用了，例如，如果我给输入文本的 id “in”和按钮的“btn”，那么它适用于一个输入和按钮在这里：

```
 $("#in").keyup(function(event){
 if(event.keyCode ==13){
  $("#btn").click();
  }
  }); 
```

但是我有太多的输入框后跟按钮，我需要以某种方式使每个输入框在按下回车后选择下一个按钮。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:12:18.403

改变：

```
$("input[type=text]").next("input[type=text] button").click(); 
```

到：

```
$(this).next("button").click(); 
```

请注意，这`keyCode`不是跨浏览器，您可以使用`which`属性代替。

```
$("input[type=text]").keyup(function(event){
    if ( event.which === 13 ) {
        $(this).next("button").click();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T18:12:22.913

我认为这对你有用。

```
$("input").keyup(function(event){
    if(event.which == 13) {
        $(this).next("button").click();
    }
}); 
```

# mysql - MySQL 用 min 选择

> ID：14013371
> 
> 赞同：3
> 
> 时间：2012-12-23T18:09:36.257
> 
> 标签：mysql, sql, greatest-n-per-group

我需要选择字段`message`并`username`从表列表中选择`list_id`=1（可以是 2 或 5 等）且具有最小数值（min（`number`））。我该怎么做？我尝试过这个：

```
SELECT `message`,`username` FROM `list` WHERE `list_id`=2 AND min(`number`) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:12:05.593

试试看

```
SELECT `message`,`username`
FROM `list`
WHERE `list_id` = 2
ORDER BY `number` ASC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:14:35.250

```
SELECT 
    a.*
FROM list
INNER JOIN   (
     SELECT 
          `message`,
          `username`,
          MIN(`number`) 
     FROM `list` 
     WHERE `list_id`=2 
    ) as a on a.id = list.id 
```

# algorithm - 查找给定排列的索引

> ID：14013373
> 
> 赞同：8
> 
> 时间：2012-12-23T18:09:48.787
> 
> 标签：algorithm, permutation, space, combinatorics

我`0, 1, ..., (N - 1)`以某种顺序一一阅读数字。我的目标是找到这个给定排列的词典索引，只使用`O(1)`空间。

之前有人问过这个问题，但是我能找到的所有算法都使用了`O(N)`空间。我开始认为这是不可能的。但这确实对我减少分配数量有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:13:11.663

考虑以下数据：

```
chars = [a, b, c, d]
perm = [c, d, a, b]
ids = get_indexes(perm, chars) = [2, 3, 0, 1] 
```

**重复排列**的可能解决方案如下：

```
len = length(perm)         (len = 4)
num_chars = length(chars)  (len = 4)

base = num_chars ^ len     (base = 4 ^ 4 = 256)
base = base / len          (base = 256 / 4 = 64)

id = base * ids[0]         (id = 64 * 2 = 128)
base = base / len          (base = 64 / 4 = 16)

id = id + (base * ids[1])  (id = 128 + (16 * 3) = 176)
base = base / len          (base = 16 / 4 = 4)

id = id + (base * ids[2])  (id = 176 + (4 * 0) = 176)
base = base / len          (base = 4 / 4 = 1)

id = id + (base * ids[3])  (id = 176 + (1 * 1) = 177) 
```

逆过程：

```
id = 177
(id / (4 ^ 3)) % 4 = (177 / 64) % 4 =   2 % 4 = 2 -> chars[2] -> c
(id / (4 ^ 2)) % 4 = (177 / 16) % 4 =  11 % 4 = 3 -> chars[3] -> d
(id / (4 ^ 1)) % 4 = (177 / 4)  % 4 =  44 % 4 = 0 -> chars[0] -> a
(id / (4 ^ 0)) % 4 = (177 / 1)  % 4 = 177 % 4 = 1 -> chars[1] -> b 
```

可能的排列数由 给出`num_chars ^ num_perm_digits`，具有`num_chars`作为可能字符的数量，以及`num_perm_digits`作为排列中的位数。

这需要`O(1)`空间，将初始列表视为恒定成本；并且它需要`O(N)`时间，考虑`N`到您的排列将具有的位数。

根据上述步骤，您可以执行以下操作：

```
function identify_permutation(perm, chars) {

    for (i = 0; i < length(perm); i++) {
        ids[i] = get_index(perm[i], chars);
    }

    len = length(perm);
    num_chars = length(chars);

    index = 0;
    base = num_chars ^ len - 1;
    base = base / len;
    for (i = 0; i < length(perm); i++) {
        index += base * ids[i];
        base = base / len;
    }

} 
```

这是一个伪代码，但它也很容易转换为任何语言（：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T04:32:36.047

如果您正在寻找一种方法来获取字典索引或唯一组合的排名而不是排列，那么您的问题属于二项式系数。二项式系数处理在总共有 N 个项目的 K 组中选择唯一组合的问题。

我用 C# 编写了一个类来处理处理二项式系数的常用函数。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。

2.  将 K 索引转换为正确的词典索引或排序二项式系数表中条目的等级。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形中固有的数学属性来做到这一点，并且与迭代集合相比非常有效。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它也比旧的迭代解决方案更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可使用上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

以下测试代码将遍历每个唯一组合：

```
public void Test10Choose5()
{
   String S;
   int Loop;
   int N = 10;  // Total number of elements in the set.
   int K = 5;  // Total number of elements in each group.
   // Create the bin coeff object required to get all
   // the combos for this N choose K combination.
   BinCoeff<int> BC = new BinCoeff<int>(N, K, false);
   int NumCombos = BinCoeff<int>.GetBinCoeff(N, K);
   // The Kindexes array specifies the indexes for a lexigraphic element.
   int[] KIndexes = new int[K];
   StringBuilder SB = new StringBuilder();
   // Loop thru all the combinations for this N choose K case.
   for (int Combo = 0; Combo < NumCombos; Combo++)
   {
      // Get the k-indexes for this combination.  
      BC.GetKIndexes(Combo, KIndexes);
      // Verify that the Kindexes returned can be used to retrive the
      // rank or lexigraphic order of the KIndexes in the table.
      int Val = BC.GetIndex(true, KIndexes);
      if (Val != Combo)
      {
         S = "Val of " + Val.ToString() + " != Combo Value of " + Combo.ToString();
         Console.WriteLine(S);
      }
      SB.Remove(0, SB.Length);
      for (Loop = 0; Loop < K; Loop++)
      {
         SB.Append(KIndexes[Loop].ToString());
         if (Loop < K - 1)
            SB.Append(" ");
      }
      S = "KIndexes = " + SB.ToString();
      Console.WriteLine(S);
   }
} 
```

你应该能够很容易地将这个类移植到你选择的语言上。您可能不必移植类的通用部分来实现您的目标。根据您使用的组合数量，您可能需要使用比 4 字节整数更大的字长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T16:32:54.347

在 geekviewpoint 上有这个问题的 java 解决方案。它很好地解释了为什么它是正确的，并且代码很容易理解。[http://www.geekviewpoint.com/java/numbers/permutation_index](http://www.geekviewpoint.com/java/numbers/permutation_index)。它还有一个单元测试，可以使用不同的输入运行代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T18:20:14.803

有N个！排列。要表示索引，您至少需要 N 位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T19:24:59.907

如果您想假设算术运算是常数时间，这是一种方法：

```
def permutationIndex(numbers):
  n=len(numbers)
  result=0
  j=0
  while j<n:
    # Determine factor, which is the number of possible permutations of
    # the remaining digits.
    i=1
    factor=1
    while i<n-j:
      factor*=i
      i+=1
    i=0
    # Determine index, which is how many previous digits there were at
    # the current position.
    index=numbers[j]
    while i<j:
      # Only the digits that weren't used so far are valid choices, so
      # the index gets reduced if the number at the current position
      # is greater than one of the previous digits.
      if numbers[i]<numbers[j]:
        index-=1
      i+=1
    # Update the result.
    result+=index*factor
    j+=1
  return result 
```

我特意写了一些计算，这些计算可以使用一些 Python 内置操作更简单地完成，但我想让它更明显的是没有使用额外的非常量空间。

正如 maxim1000 所指出的，表示结果所需的位数将随着 n 的增加而迅速增长，因此最终将需要大整数，它不再具有恒定时间算术，但我认为这段代码解决了您的问题的精神。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-24T16:28:50.137

我刚刚使用 Visual Basic 编写了一个代码，我的程序可以直接计算给定索引的每个索引或每个对应的排列，最多 17 个元素（这个限制是由于我的编译器的 17 以上数字的科学计数法的近似值）。

如果您有兴趣，我可以发送程序或将其发布到某个地方以供下载。它工作得很好，它可以用于测试和示范你的代码输出。

我使用了 James D. McCaffrey 的称为 factoradic 的方法，您可以[在此处](https://jamesmccaffrey.wordpress.com)阅读有关它的内容，也可以[在此处](https://msdn.microsoft.com/en-us/library/aa289166(v=vs.71).aspx)阅读（在页面末尾的讨论中）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-18T14:25:28.100

这个想法没有什么新东西，而是一种完全矩阵化的方法，没有显式循环或递归（使用 Numpy，但易于适应）：

```
import numpy as np
import math
vfact = np.vectorize(math.factorial, otypes='O')

def perm_index(p):
    return np.dot( vfact(range(len(p)-1, -1, -1)),
                   p-np.sum(np.triu(p>np.vstack(p)), axis=0) ) 
```

# java - NullPointerException 与 android 2.3.3 媒体播放器

> ID：14013374
> 
> 赞同：1
> 
> 时间：2012-12-23T18:10:44.010
> 
> 标签：java, android, nullpointerexception

这只是我正在开发的一个简单的android应用程序，它意味着每次单击按钮时都会播放声音....当我以慢速单击按钮时它可以工作，但如果我快速单击按钮总是会崩溃由于运行时错误而导致的速度 - NullPointerException！......我不知道我做错了什么。

```
public class OSDC_Mini_ProjectActivity extends Activity implements MediaPlayer.OnCompletionListener {

private ImageButton play,pause,stop;
private MediaPlayer mp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    play = (ImageButton)findViewById(R.id.play);
    pause = (ImageButton)findViewById(R.id.pause);
    stop = (ImageButton)findViewById(R.id.stop);

    play.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            play();
        }
    });

    pause.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            pause();
        }
    });

    stop.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            stop();
        }
    });

    setup();
}

@Override
public void onDestroy() {
    super.onDestroy();
    if (stop.isEnabled()) {
        mp.stop();
    }
}

public void onCompletion(MediaPlayer mp) {
    stop();
}

private void play() {
    mp.start();
    play.setEnabled(false);
    pause.setEnabled(true);
    stop.setEnabled(true);
}

private void stop() {
    mp.stop();
    pause.setEnabled(false);
    stop.setEnabled(false);

    try {
        mp.prepare();
        mp.seekTo(0);
        play.setEnabled(true);
    }
    catch (Throwable t) {
        error(t);
    }
}

private void pause() {
    mp.pause();
    play.setEnabled(true);
    pause.setEnabled(false);
    stop.setEnabled(true);
}

private void loadClip() {
    try {
        mp=MediaPlayer.create(this, R.raw.test);
        mp.setOnCompletionListener(this);
    }
    catch (Throwable t) {
        error(t);
    }
}

private void setup() {
    loadClip();
    play.setEnabled(true);
    pause.setEnabled(false);
    stop.setEnabled(false);
}

private void error(Throwable t) {
    AlertDialog.Builder builder=new AlertDialog.Builder(this);
    builder
        .setTitle("報錯啦！")
        .setMessage(t.toString())
        .setPositiveButton("確定", null)
        .show();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:22:28.123

在每个方法中添加空检查。仅当 mp 当前未播放任何内容时才开始媒体播放

# meteor - Meteor：最好的调试工具？

> ID：14013377
> 
> 赞同：4
> 
> 时间：2012-12-23T18:11:52.130
> 
> 标签：meteor

我正在学习如何使用 Meteor，并且来自一些基本/中级的 python/django 知识。

Meteor 中最好的调试工具是什么，也许可以让您在执行过程中暂停代码并让您通过？我在想python中的ipdb之类的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T20:10:26.910

在客户端上，使用浏览器的开发人员工具设置断点并逐步执行代码。

在服务器上，由于 Meteor 在 node.js 上运行，因此您可以使用[node-inspector](https://github.com/dannycoates/node-inspector)，它与浏览器的开发人员工具挂钩。有关如何让节点检查器工作的更多信息，请参阅[Meteor：在服务器端调试。](https://stackoverflow.com/questions/11034941/meteor-debug-on-server-side)

# django - Supervisord 管理 fcgi 和 django

> ID：14013382
> 
> 赞同：0
> 
> 时间：2012-12-23T18:12:11.393
> 
> 标签：django, fastcgi, supervisord

我已经设法在我的一个 django 项目上使用 fastcgi 设置了 supervisord，问题是当我让 mi 程序停止时，服务器以某种方式继续运行，并且我的页面保持在线。

这是我的supervisord程序指令：

```
[program:helloworld]
command=/var/www/django-projects/helloworld/run 
```

这是我的“运行”脚本：

```
#!/bin/bash

source /var/www/django-projects/helloworld/venv/bin/activate;
/var/www/django-projects/helloworld/manage.py runfcgi \
     daemonize=false \
     host=127.0.0.1 \
     port=8000; 
```

我想要的只是一种使用supervisord停止/启动/重新启动这个django项目的方法，希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:36:07.697

虽然我不使用 fcgi 我几乎可以肯定你的问题在于`source /var/www/django-projects/helloworld/venv/bin/activate;`

您不应该`source`在主管启动脚本中使用它，它会更改当前的 shell，并且没有使用 supervisord。相反，只需在 supervisord 脚本中更改您的路径：

```
directory = /var/www/django-projects/helloworld/
command = /var/www/django-projects/helloworld/manage.py runfcgi \
 daemonize=false \
 host=127.0.0.1 \
 port=8000; 
```

请参阅[此答案](https://stackoverflow.com/a/6535199/203535)和有关使用脚本的[virtualenv 文档。](http://www.virtualenv.org/en/latest/#activate-script)`activate`

# ios - 设计问题 - 我应该使用什么技术在我的应用程序中向其他用户发送文本？

> ID：14013389
> 
> 赞同：3
> 
> 时间：2012-12-23T18:12:45.323
> 
> 标签：ios, ios5, xamarin.ios, ios6

我正在创建 monotouch 应用程序，它基本上是一个运行良好的报价（说法）。现在我需要让用户能够通过互联网相互发送最喜欢的报价。例如，用户 X 可以发送任何报价而不是电子邮件，但在应用程序内发送给用户 Y。内部电子邮件系统的排序或与应用商店中的“漂流瓶”应用程序完全相同。

我应该使用什么技术？我在想一个网络服务。

编辑：消息传递不必是实时的。

欢迎所有建议。

对不起，我的英语不好 。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:16:43.003

如果你想实时，你可以选择使用[Node.js](http://nodejs.org/)、[Socket.IO](http://socket.io/)、 [Expressjs](http://expressjs.com/)和[node-IOS](https://github.com/TooTallNate/node-iOS)。

审查：

*   [http://blog.semantics3.com/how-we-built-an-ios-app-an-android-app-and-a-node-js-api-in-20-hours/](http://blog.semantics3.com/how-we-built-an-ios-app-an-android-app-and-a-node-js-api-in-20-hours/)
*   [http://blog.amt.in/nodejs-on-android](http://blog.amt.in/nodejs-on-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T05:35:32.263

您可以使用 MonoTouch 尝试[SignalR](http://www.gregshackles.com/2012/07/using-signalr-in-monotouch-and-mono-for-android-apps/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:17:21.103

我在谷歌上进行了公平的搜索，然后找到了[Twilio](http://www.twilio.com/)，尽管您需要支付一定的费用。

# c - 主节点崩溃时如何重新连接到副本集？

> ID：14013391
> 
> 赞同：0
> 
> 时间：2012-12-23T18:13:05.870
> 
> 标签：c, mongodb, database-replication, mongodb-c, database

在这个简单的程序中，我想在主节点崩溃时重新连接到副本集。但它不起作用：如果主节点崩溃，这个程序将立即终止，没有任何输出，并返回141。我不知道为什么。重新连接到副本集的正确方法是什么？

```
#include <stdio.h>
#include <mongo.h>

int insertVal(mongo *conn, int val) {
    bson op[1];
    bson_init(op);
    bson_append_int(op, "val", val);
    bson_finish(op);

    int status = mongo_insert(conn, "test.vals", op, NULL);

    bson_destroy(op);
    return status;
}

int main()
{
    mongo conn[1];
    mongo_replset_init(conn, "test");
    mongo_replset_add_seed(conn, "localhost", 27017);
    mongo_replset_add_seed(conn, "localhost", 27018);
    mongo_replset_add_seed(conn, "localhost", 27019);
    int status = mongo_replset_connect(conn);
    if (status != MONGO_OK) {
    return 1;
    }

    for (int i = 0; i < 1000 * 1000; ++i) {
        status = insertVal(conn, i);
        if (status != MONGO_OK) {
            printf("%d\n", status);
            --i;
            mongo_reconnect(conn);
        }
    }

    mongo_destroy(conn);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:05:48.017

不需要自己做DB管理操作`mongo_reconnect(conn);`，可能会和mongodb冲突。

请参阅此处的[文档](http://docs.mongodb.org/manual/core/replication/#failover)。“Mongodb 副本集具有自动故障转移功能。如果主节点离线或无响应，并且大多数原始集成员仍然可以相互连接，则该集将选择一个新的主节点”。

# php - php while循环在获取结果行时莫名其妙地失败

> ID：14013393
> 
> 赞同：1
> 
> 时间：2012-12-23T18:13:19.977
> 
> 标签：php, mysql

所以我有一个非常奇怪的问题，不太确定该怎么想...

我有一个标准的数据库查询对表进行选择。它返回一个资源，num_rows = 101，它将获取行到第 42 行，此时它只是停止所有脚本执行，没有错误，没有超时（获得 42 行需要不到一秒的时间）......我无法提供链接，但这是有问题的代码...

```
$select2 = "SELECT * FROM `$dbname`.`$file" . "_settings` WHERE `weight` <> 0 ORDER BY `count` ASC";
$result = mysql_query($select2);
$lpcnt = 0;
$numrows = mysql_num_rows($result);
while ($display = mysql_fetch_array($result, MYSQL_ASSOC)){
    /* This will print out 42 times */
    echo '<pre>In The LOOP, row('.$lpcnt.'):<br>NumRows: '.$numrows.'<br>';
    print_r($display);
    echo '</pre><br/>';
    $domRows[] = $display;
    $aTotal[] = $display['count'];
    $aTotWeight[] = $display['weight'];
    //debug vars
    $d['url'] = $display['url'];
    $d['total'] = $total;
    $d['count'] = $display['count'];
    $d['weight'] = $display['weight'];
    $dbug['domRows'][] = $d;
    $lpcnt++;
}
/* Never Reaches this */
echo '<pre>';die(print_r('Loop Finished')); 
```

在结果循环中途导致失败的原因是什么......

也..我知道，我知道...myql_ 已贬值，但这就是我必须使用的！

提前感谢任何人都可以摆脱的任何光芒......这真的伤害了网站！

编辑：这也不会一直中断，到目前为止，它似乎与结果的数量有关......例如，如果我运行一个有 39 行的结果集，它将处理所有这些。 ..它在 42 行时始终失败...在我有 100 多条记录的表上

编辑最后：好的，想通了！原来我们的内存限制太低了，所以它试图分配非法的内存量！所以我们升级了它，现在它可以工作了！此外，我在其他代码有条件地关闭它的地方报告了错误……这就是我没有看到错误的原因！呃......无论如何，感谢那些对圣诞快乐和所有爵士乐做出回应的人......

# gwt - 在创建战争之前运行其他文件

> ID：14013395
> 
> 赞同：1
> 
> 时间：2012-12-23T18:13:35.517
> 
> 标签：gwt, maven-3

我有一个 GWT (2.5) Maven 项目。我想在我的**战争**生成之前运行一些文件系列，它与 GWT 无关。我想运行一些压缩图像、组织导入等的 java 文件。我应该从哪里开始？我对maven和gwt的了解有限。对不起这个白痴问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:22:16.037

我认为[***Exec Maven Plugin***](http://mojo.codehaus.org/exec-maven-plugin/usage.html)是您正在寻找的答案。在`<mainclass>`标签中提及您要运行的 java 文件。在`<arguments>`标签中提及该程序所需的所有参数。您可以在 maven 周期的任何阶段运行此***exec 插件，并且***[***可以多次运行它***](https://stackoverflow.com/questions/9231626/running-exec-maven-plugin-multiple-times-in-a-single-phase)。如果您正在运行 java 文件，请确保在标记中提及**Java 。**`<goal>`

**编辑：**当然你必须在你的`pom.xml`文件中配置它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:22:29.167

这个问题有点太笼统了，但是...

你需要研究一下 maven 插件是如何工作的。您在`pom.xml`. 可以在此处找到指南：[http ://maven.apache.org/guides/mini/guide-configuring-plugins.html](http://maven.apache.org/guides/mini/guide-configuring-plugins.html)

对于您的特定需求，我`exec`在 codehaus 上找到了插件：http: [//mojo.codehaus.org/exec-maven-plugin/index.html](http://mojo.codehaus.org/exec-maven-plugin/index.html)

这将允许您在使用 maven 构建项目时执行其他 java 代码。

# excel - 在列上搜索的单元格上突出显示

> ID：14013397
> 
> 赞同：0
> 
> 时间：2012-12-23T18:13:50.413
> 
> 标签：excel, vbscript, vba

这是我出于好奇而问的，我有一个循环滚动列以匹配 ID，现在经过一些迭代，脚本关闭并显示错误消息：“未找到匹配”

```
 ParentMatchRowNum=objExcel1.Application.WorksheetFunction.Match(ParentID, ob3.Columns(1), 0) 
```

所以我正在寻找任何一种带有颜色的突出显示，以及它当前的 ID 搜索，只是为了指出脚本没有找到的 ID。突出显示将需要在刚刚通过搜索的当前 ID 上。

**错误**

![错误](../Images/6484c3091cebb3a314b7d37a5f1057ab.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:39:09.690

尝试`Application.Match`代替`Application.WorksheetFunction.Match`.

```
If not IsError(objExcel1.Application.Match(ParentID, ob3.Columns(1), 0)) Then    
   ParentMatchRowNum = objExcel1.Application.Match(ParentID, ob3.Columns(1), 0)
Else
   '-- do something
End if 
```

以下是 MVP 分享的一些信息： **Application.Match() 与 Application.WorkSheetFunction.Match() 之间的区别**

不同之处在于它的错误处理。在 XL97 中，`WorksheetFunction`Match 的形式存在问题，没有以`Application.Match`. *Myrna Larson*报告说她在以后的版本中遇到了这个问题。出于这个原因，通常同意安全而不是抱歉并使用`Application.Match`.

:-[参考](http://www.excelforum.com/excel-programming-vba-macros/358571-application-match.html)。

另一件事是，请注意，当列中只有整数或混合数据类型时，您不应该搜索字符串。保持一致。因此，例如查找`integers within integers`或`Strings within Strings`.. 这意味着您可能应该将所有`alphanumeric`ID 引用转换为`CStr(ID)`. （变体在运行时被解释，所以它不能解决问题。）

# javascript - 如果检测到 Adblock，如何防止 CSS 和 JS 加载？

> ID：14013398
> 
> 赞同：4
> 
> 时间：2012-12-23T18:13:49.197
> 
> 标签：javascript, css, adblock

最近，我在朋友的计算机上发现了一个网站，该网站在启用了 Adblock 的朋友计算机上销售添加 ( [http://buysellads.com/](http://buysellads.com/) )，该网站似乎检测到浏览器加载项，它禁用了 CSS 和 JS。

我一直在尝试阅读他们的代码，但我似乎找不到导致这种情况发生的行。我知道有一些方法可以检测并给用户一个禁用插件的消息，但我发现这种方法更聪明。

如果有人知道或找到触发和执行的代码，我将不胜感激。

额外的问题：这将如何与 W3 Total Cache for Wordpress 之类的缓存插件一起使用？我提出这个问题是因为我想知道网站将如何处理将页面列入白名单并刷新网站的人。理论上它应该显示 CSS 和 JS，因为没有找到 Adblock，但我不确定缓存插件是否会破坏它并在没有任何 CSS 或 JS 的情况下显示以前的站点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T20:56:07.890

我不知道这个特定网站是如何做到的，但一种可能性是通过被 Adblock 阻止的广告服务系统添加/加载 JS 和 CSS 文件（在广告展示位置加载样式和脚本标签）。

根据 Adblock 的工作方式，将文件托管在 ads.your-domain.com 或 banner.your-domain.com 等子域上就足够了。

然后，您可以在包含整个页面的包装器上使用内联样式设置 display=none，并在包装​​器外部的元素上设置 display=block，其中包含给用户的消息。通过广告服务系统加载的 CSS 文件然后可以更改这两个元素的显示属性（因此没有 Adblock 的用户获取页面内容而不是消息）。

# c++ - wxTreeCtrl 自定义事件

> ID：14013402
> 
> 赞同：0
> 
> 时间：2012-12-23T18:14:39.167
> 
> 标签：c++, user-interface, wxwidgets

我正在为 wxTreeCtrl 的事件而苦苦挣扎，无法让它们触发。我想要触发更改选择事件并尝试查看 treeCtrl 代码示例。到目前为止，我有：

.cpp

```
TopRightPanel::TopRightPanel(wxWindow *parent, wxSizer* sizer)
: wxTreeCtrl(parent, 0, wxPoint(513, 0), wxSize(512, 384)) //wxPanel(parent, 513, 0, 512, 384)
{
CreateControls(this);;
}

void TopRightPanel::CreateControls(wxTreeCtrl* parent)
{
    rootId = wxTreeItemId();
    rootId = AddRoot("Particle Systems");
    wxTreeItemId root2Id = parent->AppendItem(rootId, "dlisjdslj");

parent->AppendItem(rootId, "Child 1");
}

void TopRightPanel::OnSelChanged(wxTreeEvent& event)
{

}

    #if USE_GENERIC_TREECTRL
    BEGIN_EVENT_TABLE(TopRightPanel, wxGenericTreeCtrl)
    #else
    BEGIN_EVENT_TABLE(TopRightPanel, wxTreeCtrl)
   #endif

EVT_TREE_SEL_CHANGED(TopRightPanel_Ctrl, TopRightPanel::OnSelChanged)

END_EVENT_TABLE()

#define TREE_EVENT_HANDLER(name)                                 \
void TopRightPanel::name(wxTreeEvent& event)                        \
{                                                                \
    LogEvent(wxT(#name), event);                                  \
    SetLastItem(wxTreeItemId());                                 \
    event.Skip();                                                \
}

/*TREE_EVENT_HANDLER(OnBeginRDrag)
TREE_EVENT_HANDLER(OnDeleteItem)
TREE_EVENT_HANDLER(OnGetInfo)
TREE_EVENT_HANDLER(OnSetInfo)
TREE_EVENT_HANDLER(OnItemExpanded)
TREE_EVENT_HANDLER(OnItemExpanding)
TREE_EVENT_HANDLER(OnItemCollapsed)*/
//TREE_EVENT_HANDLER(OnSelChanged)
//TREE_EVENT_HANDLER(OnSelChanging)

#undef TREE_EVENT_HANDLER 
```

。H

```
class TopRightPanel : public wxTreeCtrl
{
public:
    TopRightPanel(wxWindow *parent, wxSizer *sizer);
    void CreateControls(wxTreeCtrl *parent);
    void CreateNewParent(wxTreeCtrl *parent);
    void CreateNewChild(wxTreeCtrl *parent, wxTreeItemId *root);
    void OnSelChanged(wxTreeEvent& event);
    void LogEvent(const wxChar *name, const wxTreeEvent& event);
    //void OnSelChanging(wxTreeEvent& event);

private:
    wxTreeItemId rootId;
    //DECLARE_DYNAMIC_CLASS(TopRightPanel);
    DECLARE_EVENT_TABLE()
    /*void OnSetText(wxCommandEvent & event);
    wxStaticText *m_text;*/

};
enum
{
    TopRightPanel_Select = 6000,
    TopRightPanel_Unselect,
    TopRightPanel_Ctrl = 1000
}; 
```

如果您能看到任何东西，我将非常感谢您的建议。到目前为止，我一直在通过尝试在 OnSelChanged 函数中放置一个断点进行测试，但它没有命中它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:51:35.043

您使用了错误的控件 ID。`0`在为 ID创建事件接收器时，创建ID 为的 TreeCtrl `TopRightPanel_Ctrl`：

```
: wxTreeCtrl(parent, TopRightPanel_Ctrl, ...
//                    ^
//                    | they need to match
//                    v
EVT_TREE_SEL_CHANGED(TopRightPanel_Ctrl, ... 
```

# joomla2.5 - 删除一些帖子的操作

> ID：14013404
> 
> 赞同：1
> 
> 时间：2012-12-23T18:14:40.540
> 
> 标签：joomla2.5, jomsocial

我正在使用`Joomla 2.5`和`JReviews`构建网站`Jomsocial 2.6.2`。这是我的大问题：

`userA`是朋友`userB`并`userA`决定在`userB's`墙上张贴一些东西。最大的问题是`userB`不能删除它（如果是讨厌的东西，这是一个非常大的问题）。

我试图更改和调整一些代码，但没有解决方案。你可以在演示中看到这个`Jomsocial`：[Jomsocial 演示](http://demo.jomsocial.com)

我认为这些文件控制删除和隐藏活动。
你可以在这里找到它们：
[活动 1](http://speedy.sh/n8FAr/activities.apps.php)

[活动二](http://speedy.sh/NqpK3/activities.index.php)

[活动 3](http://speedy.sh/kFZVD/activities.php)

如果有人有经验`Jomsocial`并且知道如何解决这个问题，那将会很有帮助。

# java - 模拟器不会执行 AsyncTask.execute().get()

> ID：14013406
> 
> 赞同：0
> 
> 时间：2012-12-23T18:14:48.527
> 
> 标签：java, android, json, android-emulator, android-asynctask

我有一个从服务器下载 JSON 字符串的程序。直到最近，当我尝试打电话时，一切都很好

```
jsonReader.execute(getUrl).get(); 
```

其中 jsonReader 是用于下载 JSON 字符串的 AsyncTask，而 getUrl 是要执行的 URL。这个方法永远不会被执行，奇怪的是，**它可以**在我的手机上运行。

这是我的代码

调用json字符串阅读器的方法

```
private PointOfInterest getPointWithID(int id) {

    String getUrl;
    JSONReader jsonReader = new JSONReader();
    try {
        Log.d(TAG,"Trying to get ID: " + id);
        getUrl = url + String.valueOf(id);
        Log.d(TAG,"Trying to get json from: " + id); <-- Last Log line to get printed when run on emulator
        jsonReader.execute(getUrl).get();
    } catch (Exception e) {
        e.printStackTrace();
    }

    String jsonString = jsonReader.returnJSONString();
    Log.d(TAG,"Downloaded: " + jsonString);
    //System.out.println("JSON: " + jsonString);

    JSONResponse jsonResponse = JSONResponse.convertJSONToResponse(jsonString);
    //System.out.println("JSON RESPONSE " + jsonResponse);

    return jsonResponse.getPointofInterest();
} 
```

jsonReader

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

/**
 * Read JSON Strings
 * @author Tom
 *
 */
public class JSONReader extends AsyncTask <String, Void, String> {

    String result;
    DefaultHttpClient  httpclient = new DefaultHttpClient(new BasicHttpParams());
    StringBuilder sb = new StringBuilder();
    String TAG = "JSONReader";

    // constructor
    public JSONReader() {
        result = "";
    }

    @Override
    protected String doInBackground(String... url) {

        Log.d(TAG, "Executing " + url); <--Does not get printed when run on emulator 

        HttpPost httppost = new HttpPost(url[0]);
        // Depends on your web service
        httppost.setHeader("Content-type", "application/json");

        try {
            HttpResponse response = httpclient.execute(httppost);

            HttpEntity entity = response.getEntity();

            InputStream inputStream = entity.getContent();

            // json is UTF-8 by default i believe
            BufferedReader reader = null;

            reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);

            String line = null;
            while ((line = reader.readLine()) != null)
            {
                sb.append(line + "\n");
            }
        }catch(Exception e){

            e.printStackTrace();
        }
        return result = sb.toString();
    }

    public String returnJSONString(){

        return result;
    }

} 
```

我尝试重新启动 adb，制作新的 AVD，但似乎没有任何效果，我唯一的选择是在我的手机上进行测试，但是，由于我正在为 api 17 开发，这是不可取的。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:28:54.107

要使此类正常工作，必须遵循一些线程规则：

AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。

任务实例必须在 UI 线程上创建。

必须在 UI 线程上调用 execute(Params...)。不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。

该任务只能执行一次（如果尝试第二次执行将引发异常。）

# php - HTML/PHP：如何为表格中的每一行创建多个单选按钮？

> ID：14013409
> 
> 赞同：0
> 
> 时间：2012-12-23T18:14:55.780
> 
> 标签：php, html, select, radio-button, name-attribute

我有一个包含 n 行的 HTML 表格。每行都有一个名称和 3 个单选按钮。我想要做的是，每一行都必须有一个选定的单选按钮。但是，当我在第一行中选择一个单选按钮并在第二行中选择另一个单选按钮时，第一个单选按钮将变为未选中状态。我知道问题出在单选按钮的名称属性上，但我不知道如何解决。我该怎么办？先感谢您。

这是我的代码。

```
echo '<table>';
list($cols,) = $xlsx->dimension();
foreach( $xlsx->rows() as $k => $r) {
    echo '<tr>';
        echo '<td>'.$k.'</td>';
        echo '<td>'.$name.'</td>';
        echo '<td><Input type = "Radio" Name ="vote" value= "pacada"></td>';
        echo '<td><Input type = "Radio" Name ="vote" value= "toledo"></td>';
        echo '<td><Input type = "Radio" Name ="vote" value= "undecided1" checked></td>';
    echo '</tr>';
}
echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:18:19.907

在名称中添加一个变量：

```
$row = 0;
foreach(...) {
    $row++
    ...
    echo '<td><Input type = "Radio" Name ="vote' . $row . '" value= "pacada"></td>';
    ... 
```

这样所有行都将具有不同的名称。

# php - 在 PHP 网站中有效添加 HTTPS

> ID：14013414
> 
> 赞同：2
> 
> 时间：2012-12-23T18:15:34.740
> 
> 标签：php

我正在尝试在一个小型网站上推出 HTTPS，但更改很少，我正在我想要保护的页面顶部添加代码......

```
<?php
$securepage ="1";

if ($_SERVER['HTTPS']=='on') {
    // we are on a secure page.
    if (!$securepage) {
      // but we shouldn't be!
      $url='http://www.mywebsite.com'.$_SERVER['REQUEST_URI'];
      header('location: '.$url);
      exit;
    }
  } else {
    // we aren't on a secure page.
    if ($securepage) {
      // but we should be!
      $url='https://www.mywebsite.com'.$_SERVER['REQUEST_URI'];
      header('location: '.$url);
      exit;
    }
  }
?> 
```

我不想保护的页面我删除了以下内容......

```
$securepage ="1"; 
```

但是当我尝试加载页面时，我收到一条错误消息，指出页面被重定向了太多次。

有人对上面的代码有什么问题有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:45:33.887

我正在开发具有相同要求的应用程序。有些页面需要通过 SSL (https) 查看，有些则不需要。

对于需要通过 SSL 查看的页面，我使用

```
if ($_SERVER["SERVER_PORT"]==80){ header("Location: https://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']); exit(); } 
```

对于那些没有的，即可以通过http查看的，使用

```
if ($_SERVER["SERVER_PORT"]!=80){ header("Location: http://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']); exit(); } 
```

如果您的页面位于主机上的目录中，那么这也可能会有所帮助

```
"location:http://".$_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF'])"; 
```

希望这可以帮助...

# ios - 从 popoverview 中的按钮调用另一个视图

> ID：14013416
> 
> 赞同：0
> 
> 时间：2012-12-23T18:15:36.277
> 
> 标签：ios, uipopovercontroller

我有一个 searchcontrollerviewcontroller、detailviewcontroller 和一个 filterviewcontroller

在 Appdelegate 中，我将前 2 个添加为 splitview 控制器并委托给 detailviewcontroller，如下所示：

```
self.splitViewController.delegate = detailViewController;
self.splitViewController.viewControllers = [NSArray arrayWithObjects:searchViewController, detailNavigationController, nil]; 
```

当 ipad 转动时，它会显示 popoverview 的按钮

```
- (void)splitViewController:(UISplitViewController *)splitController
     willHideViewController:(UIViewController *)viewController
          withBarButtonItem:(UIBarButtonItem *)barButtonItem
       forPopoverController:(UIPopoverController *)popoverController{  

    UIBarButtonItem *filterbutton = [[UIBarButtonItem alloc]initWithTitle:@"Filter"     style:UIBarButtonItemStylePlain target:nil action:@selector(showFilterPopover:)];

    barButtonItem.title = NSLocalizedString(@"Search", @"Search results");
    [self.navigationItem setLeftBarButtonItems:[NSArray arrayWithObjects:barButtonItem,filterbutton, nil] animated:YES];

    self.masterPopoverController = popoverController;
} 
```

我在这里初始化过滤视图

```
-(void)showFilterPopover: (id) sender{

    FilterViewController *controller = [[FilterViewController alloc]initWithNibName:@"FilterViewController" bundle:nil];

    UIPopoverController *popover =
    [[UIPopoverController alloc] initWithContentViewController:controller];

    popover.delegate = self;
    self.masterPopoverController = popover;

    [self.masterPopoverController
         presentPopoverFromBarButtonItem:sender
                permittedArrowDirections:UIPopoverArrowDirectionAny
                                animated:YES];
} 
```

但是什么也没发生，弹出框适用于详细视图，但不适用于过滤视图....我忘记了什么吗？

# javascript - 在 ckeditor 中集成 blueimp 文件上传

> ID：14013418
> 
> 赞同：5
> 
> 时间：2012-12-23T18:15:45.780
> 
> 标签：javascript, jquery, iframe, ckeditor, blueimp

是否可以将 Blueimp FileUpload ( [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload) ) 与编辑器 CkEditor ( [http://ckeditor.com/](http://ckeditor.com/) ) 集成在一起？？？

有什么提示吗？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T03:21:45.907

最后我自己找到了解决方案：

在 blueimp fileupload 的文件 index.php 中，我编辑了表格，首先添加了以下几行`</tr>`命令：

```
 <td>
        <div class="btn scegli" id="chooseThis" >
            <span class="url" style="display: none">"{%=file.url%}"</span>
            <span>Choose</span>
        </div>
    </td> 
```

在此文件的末尾，在 jquery 包含之后：

```
<script type="text/javascript">

  $(".chooseThis").live("click", function (e) {
    parent.triggerUploadImages($(this).children('.url').html());
  });

</script> 
```

我开发了一个在 CKeditor 中使用的简单插件：

```
CKEDITOR.plugins.add('fileUpload',
{
    init: function (editor) {
        editor.addCommand( 'OpenDialog',new CKEDITOR.dialogCommand( 'OpenDialog' ) );
        editor.ui.addButton('FileUpload',
            {
                label: 'Upload images',
                command: 'OpenDialog',
                icon: CKEDITOR.plugins.getPath('fileUpload') + 'icon.gif'
            });
        editor.contextMenu.addListener( function( element ){
            return { 'My Dialog' : CKEDITOR.TRISTATE_OFF };
        });
        CKEDITOR.dialog.add( 'OpenDialog', function( api ){
            var dialogDefinition =
            {
                title : 'Gestisci immagini',
                minWidth : 700,
                minHeight : 500,
                contents : [
                        {
                            expand : true,
                            padding : 0,
                            elements :
                            [
                                {

                                    type : 'html',
                                    html : ' <iframe src="../../includes/fileUpload/index.php" style="width:100%;height:490px" />'
                                }
                            ]
                        }
                ],
                buttons : []
            };
            return dialogDefinition;
        } );

    }
}); 
```

要将按钮添加到工具栏，还需要修改 config.js。按钮的名称是：“文件上传”

然后我有创建CKeditor的功能：

```
 var editor, html = '';
    function createEditor() {

                if ( editor ) return;

                var config = {};
                editor = CKEDITOR.replace("editor", 
                    { 
                        extraPlugins : 'fileUpload',
                    });
    } 
```

这是管理触发器的功能：

```
 function triggerUploadImages(url){
                if(editor ){ 
                    CKEDITOR.dialog.getCurrent().hide();
                    editor.insertHtml('<img src='+url+' />');
                }
            } 
```

# osx-lion - 将新目录添加到 $PATH

> ID：14013419
> 
> 赞同：0
> 
> 时间：2012-12-23T18:16:00.133
> 
> 标签：osx-lion, zsh, ringojs

为了使用 运行新`ringojs`的 Web 应用程序，建议将`ringojs`bin 目录添加到您的 PATH 环境变量中，所以我尝试这样：

```
 echo 'export PATH=Users/repos/ringojs/bin:$PATH' >> ~/.profile 
```

然后关闭并重新打开终端，并尝试按照 ringo [README](https://github.com/ringo/ringojs)`ringojs`中的描述创建新的 Web 应用程序。

```
ringo-admin create --google-appengine myapp 
```

但是，我总是：

```
zsh: command not found: ringo-admin 
```

请注意我已成功设置`ant`和`ivy`工具。我在那里错过了什么吗？是不是加的方式`$PATH`不对？

**更新：**

使用 Abraham 建议后，这里是到目前为止的 .bash_profile 内容：

```
 <echo message=" test       --> run JUnit and RingoJS tests"/>
        <echo message=" docs       --> generates the API docs"/>
        <echo message=" package    --> creates RingoJS distribution"/>
        <echo message=" dpkg       --> creates RingoJS debian package"/>
        <echo message=" clean      --> clean up compiled resources"/>
    </target>

    <!-- =================================================================== -->
    <!-- Initializes some variables                                          -->
    <!-- =================================================================== -->
    <target name="init">
        <property name="project" value="ringojs"/>
        <property name="version" value="0.9"/>

        <property name="home" value="."/>

        <property name="src" value="${home}/src"/>
        <property name="lib" value="${home}/lib"/>
        <property name="build" value="${home}/build"/>
        <property name="classes" value="${build}/classes"/>
        <property name="docs" value="${home}/docs"/>
        <property name="jsdocs" value="${home}/docs/modules"/>
        <property name="javadocs" value="${home}/docs/java"/>

        <property name="ringo-core.jar" value="${lib}/ringo-core.jar"/>
        <property name="ringo-modules.jar" value="${lib}/ringo-modules.jar"/>

        <property name="debug" value="on"/>
        <property name="optimize" value="on"/>
        <property name="deprecation" value="on"/>

        <property name="testclasses" value=""/>

        <path id="classpath">
            <fileset dir="lib">
                <include name="**/*.jar"/>
                <exclude name="${ringo-core.jar}"/>
            </fileset>
            <pathelement location="${classes}"/>export PATH=Users/repos/ringojs/bin:$PATH' >> ~/.profile 
```

但是，即使我关闭并重新打开终端会话，我仍然找不到相同的 ringo-admin 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:20:38.343

您的问题是您在启动新终端时没有初始化 PATH ，而是仅在当前会话中设置它。

您要做的是键入以下命令：

```
 cd ~ 
```

这将导航到您的主目录

```
 ls -al 
```

列出所有文件，包括隐藏文件。在出现的列表中，验证名为 .zprofile 的文件是否存在。

要创建或编辑文件，请运行

```
 vi .zprofile 
```

打开文件。要移动到其内容的末尾，请点击`Shift-G`，然后（小写）`O`添加新行并进入插入模式。现在输入：

```
 export PATH=/Users/repos/ringojs/bin:$PATH 
```

在文件的末尾。

按`Esc`，键入`:x`，然后按`Return`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T03:49:20.247

# wamp - 无法使用 IP 从 Web 访问 WAMP 站点

> ID：14013420
> 
> 赞同：3
> 
> 时间：2012-12-23T18:16:01.457
> 
> 标签：wamp, wampserver

我正在使用 apache 2.4.2 和 php 5.4.3 运行最新版本的 wampserver。在 Windows 2008 上。

我正在运行两个 ip，一个用于 iis，一个用于 apache。我通过添加来做到这一点

听 123.456.78.999:80 听 80

在 httpd.conf 中。我还在两者中将“要求本地”切换为“要求全部授予”

'ServerName localhost:80' 和 'DocumentRoot "c:/wamp/www/"'。

在本地浏览器中输入 ip 时，我可以访问。但是当我从网络/外部浏览器输入它时，浏览器找不到服务器并且只是超时。端口 80 被转发，因为我可以访问我的 IIS 站点。

我还应该做些什么来让我的 wamp 上线？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T20:20:38.967

Annnd 的罪魁祸首是……Windows 防火墙。我认为情况并非如此，因为 apache 和 iis 都使用相同的端口（80），但事实证明有一个 iis-only 规则允许流量从端口 80 进入！所以我添加了一个打开端口 80 的新入站规则，瞧，现在一切正常！

# perl - Perl STDIN 在 while 循环之前执行

> ID：14013423
> 
> 赞同：2
> 
> 时间：2012-12-23T18:16:21.820
> 
> 标签：perl, while-loop, stdin

我是一个完全 perl 的菜鸟，希望这个问题不会太愚蠢！

我正在尝试编写一个刽子手风格的游戏并让它全部工作，除了由于某种原因 STDIN 似乎在 while 循环的其余部分之前执行 - 所以我被迫在打印任何内容之前输入我所有的字母猜测出去

```
while()
{
    foreach $letter (@currentword)
    {
        print "$letter";
    }
    print "\n";
    print "Guess a letter: \n";
    chomp($guess = <STDIN>);
    $guess=lc(substr($guess,0,1));  
    if ( $randword =~ /($guess)+/i )
    {
        print "Correct!\n";
        for ($index=0; $index<$wordlength; $index++)
        {
            if ($wordarray[$index] eq $guess)
            {
                $currentword[$index]=$wordarray[$index];
            }
        }       
    }
    else
    {
        print "Incorrect! try again\n";
    }   
    $guesses -= 1;
    last if $guesses < 1;
    $finalword = join("",@currentword);
    last if ($finalword eq $randword);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:07:59.517

您的 STDOUT 必须连接到终端以外的其他东西，从而导致使用块缓冲而不是行缓冲。尝试添加

```
$| = 1; 
```

（不过，我认为从 STDIN 读取会导致 STDOUT 被刷新。）

# asp.net-mvc - 数据注释脚手架列？

> ID：14013424
> 
> 赞同：0
> 
> 时间：2012-12-23T18:16:30.643
> 
> 标签：asp.net-mvc, data-annotations

我找不到关于数据注释的广泛资源，有很多例子。

```
[ScaffoldColumn(false)]
public int ReadCount { get; set; } 
```

我想用 显示`ReadCount`，`DisplayForModel`我不想在`EditorForModel`. 我怎样才能做到这一点？这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:41:06.360

一种可能性是编写一个自定义[`Object display template`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)( `~/Views/Shared/DisplayTemplates/Object.cshtml`)，即使您已`[Scaffold(false)]`在属性上设置，它也只会显示该值：

```
@if (Model == null) 
{
    @ViewData.ModelMetadata.NullDisplayText
}
else if (ViewData.TemplateInfo.TemplateDepth > 1) 
{
    @ViewData.ModelMetadata.SimpleDisplayText
}
else 
{
    foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => !ViewData.TemplateInfo.Visited(pm))) 
    {
        if (prop.HideSurroundingHtml) 
        {
            @Html.Display(prop.PropertyName)
        }
        else 
        {
            if (!String.IsNullOrEmpty(prop.GetDisplayName())) 
            {
                <div class="display-label">@prop.GetDisplayName()</div>
            }
            <div class="display-field">@Html.Display(prop.PropertyName)</div>
        }
    }
} 
```

正如您所看到的，与我所做的默认显示模板的唯一区别在于我删除了`pm.ShowForDisplay`条件的 foreach 选择器。

现在，当您拥有以下属性时：

```
[ScaffoldColumn(false)]
public int ReadCount { get; set; } 
```

它将与 DisplayForModel 一起显示，而不与 EditorForModel 一起显示。

# c++ - 为什么我的代码会出现运行时错误？

> ID：14013427
> 
> 赞同：-5
> 
> 时间：2012-12-23T18:16:33.897
> 
> 标签：c++

根据我的说法，代码很好。我已经尝试逐行调试它，但出乎意料的是，这段代码给了我一个运行时错误，我无法理解为什么这段代码会出现这样的错误。有人可以通过我在这里使用的字符串函数，如果可能的话，请告诉我为什么这个程序会给出运行时错误？此代码的 ideone 链接是[http://ideone.com/LyFTWu](http://ideone.com/LyFTWu)

```
#include<stdio.h>
#include<string.h>
using namespace std;

int main()
{
int t,i;
//printf("md");
scanf("%d",&t);
for(i=0;i<t;i++)
{
    int n,j,k,f,g=0;
    char a[50][57],c[50];
    //printf("me");
    scanf("%d",&n);
    //printf("%d",n);
    //m=getchar();
    //printf("me\n");
    getchar();
    for(j=0;j<n;j++)
    {
        k=0;

        while(1)
        {

            a[j][k]=getchar();
            //printf("%c",a[j][k]);
            if(a[j][k]=='\n') break;
            k++;
        }
        //printf("me\n");
    }
  for(j=n-1;j>=0;j--)
  {
  k=0;
  g=0;
    if(j==n-1)
    {

        printf("Begin ");
    }
    else if(a[j+1][0]=='L')
    {
        printf("Right ");
    }
    else if(a[j+1][0]=='R')
    {
        printf("Left ");
    }
        while(1)
        {

        while(a[j][k]!='o'&&g==0)
        {

            k++;
        }
        g=1;
        //printf("me");
        if(a[j][k]=='\n') break;
        printf("%c",a[j][k]);

        k++;

        }
    printf("\n");

  }
}
return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:20:53.820

我看到的一件事是您在`while(a[j][k])`数组中访问 k==-1，这不是合法索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T18:30:29.657

以下是我发现的几件事：

1.  使用`scanf()`要求您检查它是否成功读取字段，使用例如`scanf("%d", &n) == 1`并适当地处理这两个结果。
2.  如果`50 <= n`第一个循环访问的值超出了`a[j][k]`.
3.  如果线路长于`57`访问`a[j][k]`范围也超出范围。
4.  `a[j][k]`被访问的`k == -1`对象超出范围，这次在另一端。
5.  如果行上没有字符，`while`则以开头的嵌套循环`f == 0`可以访问整个位置的超出范围的值。`\t`

我猜，如果我进一步注视这个烂摊子，我会发现更多错误......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T18:32:06.330

`while(f==0&&a[j][k]!='\t')`从来都不是真的（嗯，可能是这样，但不是在您的输入中 - 除非您在链接到的网站上还有其他输入）

这显然是一个问题，因为您将超出缓冲区的末尾并继续前进，直到出现其他问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T20:40:19.773

我的“混淆 C 竞赛”的工作条目（是的，我确信它可以变得更加混淆，我把它减少到 397 个字符，但决定使用这个变体，因为它更有趣地使用宏）：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#define L "Left"
#define R "Right"
void s(int*p){if(scanf("%d ",p)!=1)exit(1);}
#define c(a,c)if(!strncmp(a,r[i],c))
#define f(a,b,c)for(i=a;i b;i c##c)
int main(void){int t,n,i,o;char r[40][51],*x,*d;s(&t);while(t--){s(&n);
f(0,<n,+)fgets(r[i],50,stdin);d="Begin";f(n-1,>-1,-){o=5;c(L,4)o=4,x=R;
else c(R,5)x=L;printf("%s%s",d,r[i]+o);d=x;}puts("");}return 0;} 
```

这是相当安全的（如果您输入错误的输入并不会说太多，并且如果线条比规定的长，则会做“奇怪”的事情）。我应该检查 if(t>40)exit(1); 也许。

随意正确缩进并尝试弄清楚它是如何工作的。;)

# php - 从 YouTube 视频中提取自动字幕

> ID：14013431
> 
> 赞同：28
> 
> 时间：2012-12-23T18:16:57.063
> 
> 标签：php, video, youtube, closed-captions

我在从 YouTube 视频中提取自动字幕时遇到问题。

我尝试使用[http://video.google.com/timedtext?type=track&v=3wszM2SA12E&name=Automatic&lang=en](http://video.google.com/timedtext?type=track&v=3wszM2SA12E&name=Automatic&lang=en)方法，但该方法仅适用于具有命名曲目的视频。例如，这个没有任何命名的轨道（只有自动字幕）并且没有加载：rrkrvAUbU9Y

有几个网络应用程序可以做到这一点（如[http://www.serpsite.com/youtube-subtitles-download-tool/](http://www.serpsite.com/youtube-subtitles-download-tool/)和[http://mo.dbxdb.com/](http://mo.dbxdb.com/)），但我需要一个脚本，因为我想将它用于我的研究。

任何人都有任何想法得到这个的正确方法是什么？YouTube 的 API 有一些关于字幕的内容，但仅适用于注册用户，而上面的应用程序适用于所有视频，我怀疑它们只是从页面中捕获 html 代码（尽管这也是可能的）。一定有办法……请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-08-14T13:25:05.393

您需要先调用另一个 API：http: [//video.google.com/timedtext ?type=list&v=3wszM2SA12E](http://video.google.com/timedtext?type=list&v=3wszM2SA12E)

这将为您提供可用曲目的列表。在您的情况下，只能获得一首曲目：`id="0" name="Automatic" lang_code="en" lang_original="English" lang_translated="English" lang_default="true"`

在这个特定的视频中，我可以按名称获取曲目`name=Automatic`：

[https://video.google.com/timedtext?type=track&v=3wszM2SA12E&name=Automatic&lang=en](https://video.google.com/timedtext?type=track&v=3wszM2SA12E&name=Automatic&lang=en)

但是对于另一个视频`id=`效果很好：

[http://video.google.com/timedtext?type=track&v=zenMEj0cAC4& **id=0** &lang=en](http://video.google.com/timedtext?type=track&v=zenMEj0cAC4&id=0&lang=en)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-24T18:18:48.387

这是我花了一些时间后的建议：

*   Js 库：[https](https://github.com/syzer/youtube-captions-scraper) ://github.com/syzer/youtube-captions-scraper => 支持自动生成的字幕。

*   以下 2 种快速方法不支持自动生成的字幕

    *   获取字幕列表：http: [//video.google.com/timedtext ?type=list&v=lT3vGaOLWqE](http://video.google.com/timedtext?type=list&v=lT3vGaOLWqE)
    *   获取带有曲目 ID 的字幕：http: [//video.google.com/timedtext ?type=track&v=lT3vGaOLWqE&id=0&lang=en](http://video.google.com/timedtext?type=track&v=lT3vGaOLWqE&id=0&lang=en)
*   快速下载：[http ://downsub.com/?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dag_EJRhMfOM](http://downsub.com/?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dag_EJRhMfOM)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-30T12:15:42.423

从页面获取数据的一种好方法是使用 file_get_contents 但这仅**在**视频具有“CC”或字幕按钮时才有效，但是当它这样做时，不幸的是，您可以从 xml 文件中获取所有文本元素的“Youtube to caption”服务声明它需要 youtuber 启用字幕才能获取字幕，所以不幸的是，如果没有启用“CC”，您将无法从视频中获取字幕，但是如果您仍然想要，您可以在 xml 文件上使用 file_get_contents 然后找到所有“文本”标签，然后将其转换为标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-07T00:00:06.447

我正在查看 downsub.com 并发现以下 API 调用似乎适用于自动生成的字幕：

[https://www.youtube.com/api/timedtext?expire=1491547251&v=YD1tc8lRsdQ&sparams=asr_langs%2Ccaps%2Cv%2Cexpire&hl=en_US&signature=6241BAB9F7E9DB164AFE496B40B4DA4B58B463FD.D7FEC5B2CC81721AF9928215343509E280FEF6BD&asr_langs=pt%2Cit%2Ces%2Cru%2Cfr%2Cko%2Cde%2Cja% 2Cnl%2Cen&key=yttt1&caps=asr&kind=asr&lang=en](https://www.youtube.com/api/timedtext?expire=1491547251&v=YD1tc8lRsdQ&sparams=asr_langs%2Ccaps%2Cv%2Cexpire&hl=en_US&signature=6241BAB9F7E9DB164AFE496B40B4DA4B58B463FD.D7FEC5B2CC81721AF9928215343509E280FEF6BD&asr_langs=pt%2Cit%2Ces%2Cru%2Cfr%2Cko%2Cde%2Cja%2Cnl%2Cen&key=yttt1&caps=asr&kind=asr&lang=en)

# sqlite - JavaScript 字面量对象执行顺序错误

> ID：14013432
> 
> 赞同：0
> 
> 时间：2012-12-23T18:16:57.453
> 
> 标签：sqlite, javascript-objects

我现在正在学习面向对象的 JavaScript，并尝试从用于 HTML5 SQLite 的 DB 类构建文字对象。

问题是，在某一点上，某些方法没有按正确的顺序执行，这是我需要的。这是课程：

```
var DB = function(dbName, dbVersion, dbDescription, dbSize){
var dbConnection    = null;
var is_connected    = false;

var dbName          = dbName;
var dbVersion       = dbVersion;
var dbDescription   = dbDescription;
var dbSize          = dbSize;

var existingTables  = new Array();

var connect = function(){
    Debug.log('auto connect ...');
    try{
        if (!window.openDatabase) {
            Debug.log('SQLite not supported');
        }
        else{
            dbConnection = window.openDatabase(dbName, dbVersion, dbDescription, dbSize);
            is_connected = true;
        }
    }
    catch(e){
        if (e == INVALID_STATE_ERR) {
            // Version number mismatch.
            Debug.log("Invalid database version.");
        }
        else{
            Debug.log(e.message);
        }
        return;
    }
}();

var checkTables = function(){
    dbConnection.transaction(function (tx) {
        tx.executeSql('SELECT name FROM sqlite_master WHERE type="table"', [], function(tx, rs) {
            for( var i = 0; i < rs.rows.length; i++ ) {
                Debug.log(rs.rows.item(i).name);
                existingTables.push( rs.rows.item(i).name );
            }
          }, function (tx, err){
              Debug.log(err.message);
              return true;
        });
    });
}();

// public methods
return {
    isConnected : function(){
        return is_connected;
    },
    close : function(){
        // close the DB connection
    },
    tableExists : function(table){
        Debug.log('table: '+table);

        // existingTables == 0 - WHY?
        alert(existingTables.length);

    },
    tableCreate : function(table){
        switch(table){
            case 'foo':
                var cr_sql = 'CREATE TABLE foo (id unique, text)';
            break;
        }

        // create the missing table
        dbConnection.transaction(function (tx) {
            tx.executeSql(cr_sql, [], function(tx, rs) {
                    return true;
                }, function (tx, err){
                  Debug.log(err.message);
                  return true;
            });
        });
    },
    dbConnection : dbConnection
}
}; 
```

执行：

```
var DBFactory = {
getConnectionforApp: function(){
    try{
        var db_instance = new DB('mydb', '1.0', 'DB Connection 1', 1024*1024);
        Debug.log('Connected to db: '+db_instance.isConnected());
        return db_instance;
    }catch(e){
        Debug.log(e.message);
    }
} 
```

};

```
// the example
var dbObj = DBFactory.getConnectionforApp();

alert(dbObj.tableExists('foo')); 
```

当我执行此代码时，公共方法 tableExists 会给我一个警报，即 existingTables.length = 0 ，但我从函数中的对象开始添加此数组中的所有现有表：checkTables()。

1.  为什么这个数组existingTables在函数tableExists中是空的？
2.  为什么函数 tableExists 在函数 checkTables 之前执行？

是否有可能制作一些construct() 函数，在创建对象时首先调用它，然后再调用所有其他函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:35:53.477

解决方案是使用自己的回调函数。

这是一个运行示例：

```
var Debug = function(){
var debug   = true;
var type    = 'console';

function timestamp() {
    var date = new Date();
    var year        = date.getFullYear();
    var month       = date.getMonth();
    var day         = date.getDate();
    var hour        = date.getHours();
    var minute      = date.getMinutes();
    var seconds     = date.getSeconds();
    var miliseconds = date.getMilliseconds();
    minute = (minute < 10) ? "0" + minute : minute
    seconds = (seconds < 10) ? "0" + seconds : seconds
    return year+'-'+month+'-'+day+' '+hour+':'+minute+':'+seconds+':'+miliseconds;
}

return{
    log : function(message){
        if(true == debug){
            switch(type){
                case 'console':
                    console.log(timestamp()+': '+message);
                break;
                case 'alert':
                    alert(timestamp()+': '+message);
                break;
                case 'document':
                    document.write('<br />'+timestamp()+': '+message);
                break;
            }
        }
    }
}
}();

var DB = function(dbName, dbVersion, dbDescription, dbSize){
var dbConnection    = null;
var is_connected    = false;

var dbName          = dbName;
var dbVersion       = dbVersion;
var dbDescription   = dbDescription;
var dbSize          = dbSize;

var existingTables  = new Array();

var connect = function(){
    Debug.log('call connect');
    if (!window.openDatabase) {
        Debug.log('SQLite openDatabase not supported');
        return false;
    }
    else{
        dbConnection = window.openDatabase(dbName, dbVersion, dbDescription, dbSize);
        is_connected = true;
    }
}();

function tableExists(table, callback){
    Debug.log('call tableExists');
    dbConnection.transaction(function (tx) {
        tx.executeSql('SELECT name FROM sqlite_master WHERE type="table"', [], function(tx, rs) {
            for( var i = 0; i < rs.rows.length; i++ ) {
                Debug.log(rs.rows.item(i).name);
                existingTables.push( rs.rows.item(i).name );
            }
          }, function (tx, err){
              Debug.log(err.message);
              return true;
        });
    }, null, function(){
        Debug.log('sql query call done');
        callback(checkTable(table));
    });
};

function checkTable(table){
    Debug.log('call checkTable');
    for(var i = 0; i < existingTables.length; i++) {
        if(existingTables[i] === table) {
            return true;
        }
    }
    return false;
}

// public methods
return {
    dbConnection : dbConnection,
    tableExists : tableExists,
    isConnected : function(){
        return is_connected;
    },
    tableCreate : function(table, callback){
        switch(table){
            case 'foo':
                var cr_sql = 'CREATE TABLE foo (id unique, text)';
            break;
            case 'bar':
                var cr_sql = 'CREATE TABLE bar (id unique, text)';
            break;
        }
        // create the missing table
        dbConnection.transaction(function (tx) {
            tx.executeSql(cr_sql, [], function(tx, rs) {
                    return true;
                }, function (tx, err){
                    Debug.log(err.message);
                    return true;
            });
        });
    }
};
};

var DBFactory = {
getConnectionforApp: function(){
    try{
        var db_instance = new DB('mydb', '1.0', 'DB Connection 1', 1024*1024);
        Debug.log('Connected to db: '+db_instance.isConnected());
        return db_instance;
    }catch(e){
        Debug.log(e.message);
    }
}
};

// the example
var dbObj = DBFactory.getConnectionforApp();

var table_exists = dbObj.tableExists('foo', function(exists){
Debug.log('Table foo exists: '+exists);
});

var table_exists2 = dbObj.tableExists('bar', function(exists){
Debug.log('Table bar exists: '+exists);
}); 
```

# python - Django - 在模板中引用静态文件

> ID：14013436
> 
> 赞同：11
> 
> 时间：2012-12-23T18:17:22.007
> 
> 标签：python, django, templates, twitter-bootstrap, static

我在模板中引用静态文件时遇到困难。我正在使用 Twitter Bootstrap 并将引导文件（css、img、js）放在 mysite/static 中。

我已经设置了`STATIC_URL`，`STATIC_ROOT`并`TEMPLATE_CONTEXT_PROCESSORS`根据[本教程](https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-in-templates)。我已经运行`./manage.py collectstatic`它复制了 72 个文件。我还在我的模板 ( `index.html`) 文件中添加了以下模板标签，但这没有奏效。

```
{% load staticfiles %}
<link rel="stylesheet" href="{% static user_stylesheet %}" type="text/css" media="screen"/> 
```

任何有关如何引用文件以便引导样式返回模板的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T04:33:48.273

它应该是

```
{% load static %} 
```

然后像

```
<!-- path -->
<link href="{% static 'bootstrap/css/bootstrap.css' %}" rel="stylesheet" type="text/css">
<!---> 
```

**更新完整性**

*文件夹结构*

*   项目
*   应用程序1
*   应用程序2
*   myproj_public
*   静止的
    *   css
        *   引导程序.css
    *   js
        *   xyz.js

*设置文件*

```
STATIC_ROOT = os.path.join(os.path.abspath(
    os.path.join(PROJECT_ROOT, 'myproj_public', 'static')), '')

STATIC_URL = '/static/' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T20:16:48.087

您是否在视图中设置`user_stylesheet`上下文变量？您需要先设置它，然后才能将其传递给模板。

我通常只使用`{{ static_url }}`标签来做这些事情，所以我包含引导组件的代码就像这样。

```
<link href="{{ STATIC_URL }}bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<script src="{{ STATIC_URL }}bootstrap/js/jquery.js"></script> 
```

假设 bootstrap 文件夹存在于 static 中。

编辑

对于您的情况，要设置`user_stylesheet`上下文变量，您需要执行类似的操作

```
dict["user_stylesheet"]= <path to your file>
#add other context variables you might have to
render_to_response(<your template name>, dict, context_instance=RequestContext(request)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-04T11:02:18.043

当您设置`static_root`时，例如：

```
STATIC_ROOT = os.path.join(BASE_DIR, "static_root/") 
```

，所有文件都复制到那里，而不是在`project_root/static`. 这是 Django 1.3 中引入的一种新机制，用于简化静态文件处理：它将收集*每个已安装应用程序下的每个目录中的*`STATICFILES_DIR` *所有`static`*文件，因此您只需复制一次。

`static_root`参考带有路径的 css/js 文件。

# phpmyadmin - pma 设计器创建关系弹出窗口无法正常工作

> ID：14013440
> 
> 赞同：2
> 
> 时间：2012-12-23T18:17:53.040
> 
> 标签：phpmyadmin

正如我所描述的 pma 设计器“创建关系弹出窗口”无法正常工作。我只看到一个空的窗口。如果您想在没有定义索引的情况下在键和行之间建立关系，则会出现这种情况。

pma 版本为：3.4.10.1deb1 firefox 16.0.2

在 config.inc... 中，一切都已打开。

# php - 用户名不显示 PHP/MySQL

> ID：14013441
> 
> 赞同：2
> 
> 时间：2012-12-23T18:17:53.197
> 
> 标签：php, mysql

> **可能重复：**
> [_SESSION 变量不起作用](https://stackoverflow.com/questions/5202087/session-variable-not-working)

您好，我知道这是一个常见问题，但我认为我的代码没有问题，但我想知道为什么我的**$_SESSION['myusername'];** 不显示当前登录的用户。

下面是我的main.php：

```
<?php
session_start();
if(isset($_SESSION['myusername'])){
header("location: index.php");
}
echo "Hello " .$_SESSION['myusername'];
?> 
```

我的 checklogin.php

```
<?php
session_start();
$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="dbscholaris"; // Database name 
$tbl_name="users"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername = $_POST['myusername']; 
$mypassword = $_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "main.php"
$_SESSION["myusername"] = $myusername;
$_SESSION["mypassword"] = $mypassword; 
header("location:main.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

请帮我找到我所缺少的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:12:34.503

我会解释它不允许你看到你的页面，因为你正在做 if(isset($_SESSION['myusername'])) 而不是 if(!isset($_SESSION['myusername'])) 这告诉php 如果会话 myusername 不存在转到 index.php 否则忽略

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:49:33.760

试试这个第一个代码

```
 <?php
     session_start();
     if(isset($_POST['myusername'])){
    $_POST['myusername'] = $_SESSION['myusername'];
      header("location: index.php");
       }
      echo "Hello " .$_SESSION['myusername'];
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:21:55.673

您必须将 $myusername 和 $mypassword 导出到`$_SESSION`如下：

```
$_SESSION["myusername"] = stripslashes($myusername);
$_SESSION["mypassword"] = stripslashes($mypassword); 
```

你忘记了任务。此外，您还必须撤消该`mysql_real_esacpe_string()`变量。（或者更早存储未转义的版本）。

此外，您应该确保会话已启动。这可以通过

```
session_start(); 
```

在任何读取或写入之前`$_SESSION`或通过设置 php ini 指令

```
session.auto_start = 1 
```

# php - Wordpress 显示带有类别的自定义元框

> ID：14013442
> 
> 赞同：0
> 
> 时间：2012-12-23T18:17:55.177
> 
> 标签：php, html, wordpress

所以这是我的代码：

```
function pages_inner_custom_box2( $post ) {

    // Use nonce for verification
    wp_nonce_field( plugin_basename( __FILE__ ), 'pages_noncename' );

    // The actual fields for data entry
    $cats = get_post_meta( $post->ID, 'pages_categories_field', true);
    echo '<ul>';
    foreach( (get_categories() ) as $category):
        if( $category->cat_ID != 14 ):
            foreach( $cats as $values ) {
                if( $values ==  $category->cat_ID ){
                    $checked = "checked=checked";
                } else {
                    $checked = false;
                }
            }
            echo'<li id="cat-'.$category->cat_ID.'">
            <input type="checkbox" name="pages_categories_field[]" id="'
            .$category->cat_ID.'" value="'
            .$category->cat_ID.'" '
            .$checked.'> <label for="'
            .$category->cat_ID.'">'
            .__($category->cat_name, 'pages_textdomain' )
            .'</label></li>';
        endif;
    endforeach;
    echo '</ul>';
} 
```

那么这是做什么的，它在元框中显示类别，现在问题是在我更新选择之后，我选择了多个类别，它只会`MARK AS CHECKED`只有一个类别。数据直接保存在数据库中。问题只是在选择上。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T21:36:07.840

你的代码是好的，但你有一些小错误，所以：

```
function pages_inner_custom_box2( $post ) {

    // Use nonce for verification
    wp_nonce_field( plugin_basename( __FILE__ ), 'pages_noncename' );

    // The actual fields for data entry
    $cats = get_post_meta($post->ID,'pages_categories_field',true);
    echo '<ul>';
    foreach((get_categories()) as $category):
        $cat_id = $category->cat_ID;
        if($cat_id != 14):
            $checked = (in_array($cat_id,(array)$cats)? ' checked="checked"': "");
            echo'<li id="cat-'.$cat_id.'"><input type="checkbox" name="pages_categories_field[]" id="'.$cat_id.'" value="'.$cat_id.'"'.$checked.'> <label for="'.$cat_id.'">'.__($category->cat_name, 'pages_textdomain' ).'</label></li>';
        endif;
    endforeach;
    echo '</ul>';
} 
```

并确保在 save_post 回调函数中将其保存为数组，如下所示：

```
update_post_meta($post_id,'pages_categories_field',$_POST['pages_categories_field']); 
```

# git - 在特定提交之后删除所有提交？或在特定提交处克隆

> ID：14013446
> 
> 赞同：0
> 
> 时间：2012-12-23T18:18:08.947
> 
> 标签：git, github

如果我从 Github 下载一些东西，并且我想在本地清除给定提交后发生的所有内容，我该怎么做？

或者相反，我是否可以在某个时间点下载/克隆存储库？（这将是几个月大的，但我不希望在特定点之后的任何更改出现在我的存储库中）

我知道提交，说它是`abc123def`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:21:47.323

Simone 基本上是对的，但是有一个更简单的方法。首先，如前所述，克隆将始终克隆所有内容，您无能为力。但是由于 git 的极快速度，这通常不是问题。克隆后，只需检查您的分支并运行：

```
git reset --hard abc123def 
```

*SE 专业人士的问题：这应该是对 Simone 答案的编辑吗？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T23:07:57.440

克隆存储库涉及下载所有远程 ref 和它们所需的所有提交。（至少我不知道有什么方法可以限制这一点。）

克隆存储库后，您可以自由地为任意提交设置自己的分支。

你可能想要类似`git clone -n $url`and的东西`git checkout -b mybranch abc123def`。

之后，您应该看到`git branch -av`有指向旧提交的分支以及指向新提交的远程分支。

从您的分支开始，所有较新的提交都不再存在。这很可能是你想要的。

如果您真的想从存储库中清除所有较新的提交，则必须删除所有较新的引用（即分支和标签）并用于`git gc`清理所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:39:09.137

在 Git 中克隆存储库时，您无法选择特定的修订。您需要克隆整个存储库。

如果您想清除从 HEAD 到某个特定修订的所有更改，您可以计算该修订和 head 之间的提交次数

```
$ git log --oneline abc123def..HEAD | wc -l 
```

然后运行 ​​reset 传递您要删除的提交数（例如 123）

```
$ git reset --hard HEAD~123 
```

# c# - c#字符串中的通配符

> ID：14013451
> 
> 赞同：0
> 
> 时间：2012-12-23T18:18:26.940
> 
> 标签：c#

我想要某种方式在 C# 中表达通配符这是我想使用通配符的代码，用于从我已经拥有的 xml 代码中删除标签

```
 public static String readfromnode(XNode x)
    {
        String before;
        before = x.ToString();
        before.Replace("<"the wild card should be here">", null);
        return before;
    } 
```

我已经尝试过使用许多符号并将它们与它们相关联，`@`但没有一个效果很好。

例如输入是

`**<head> <title>Benchmark 1</title> </head>**`

输出是

**基准 1**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T18:26:38.817

没有使用`String.Replace()`. 您最好的选择是使用[正则表达式](http://www.regular-expressions.info/)和[Regex](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)类，这正是正则表达式所针对的情况。

快速制作了一个如何做到这一点的示例。

```
static void Main(string[] args)
{
    string myString = "This is some <text with> some missplaced <tags in them> and we want to remove everything <between those tags>";
    myString = Regex.Replace(myString, "<.*?>", string.Empty);
    Console.WriteLine(myString);
    Console.ReadKey();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T18:27:34.723

使用正则表达式可能会更好：

```
public static string ReadFromNode(XNode node)
{
    string before = node.ToString();

    string after = Regex.Replace(before, @"<\w+>", string.Empty);

    return after;
} 
```

`<\w+>`在这种情况下，模式表示 a`<`后跟一个或多个单词字符，然后是`>`。您可以根据您的要求使用更复杂的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:45:49.493

我建议将此[通配符用​​于正则表达式](http://www.codeproject.com/Articles/11556/Converting-Wildcards-to-Regexes)。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-23T18:21:57.850

您也可以将标签提取为子字符串，并使用您获得的字符串替换。

伪代码：

查找“<”然后是“>”的出现，并提取标签之间的字符串以替换或直接从标签前后提取文本，基本上将其删除。

也许还有一种方法可以使用正则表达式来做到这一点。

# xaml - 如何使 GridView 的标题具有列跨度？

> ID：14013459
> 
> 赞同：0
> 
> 时间：2012-12-23T18:19:26.267
> 
> 标签：xaml, gridview, windows-8

我有以下内容，其中白色矩形是 GridViewItems，“能力”是标题。

![白色矩形是 GridViewItems，“能力”是标题](../Images/80216936106f0d5780978baf7a420492.png)

如何使标题位于所有列之上？

简而言之，我的代码：

```
<GridView Header="Abilities" Margin="0" SelectionMode="None" >
<GridViewItem></GridViewItem>
<GridViewItem></GridViewItem>
<GridViewItem></GridViewItem>
<GridViewItem></GridViewItem>
<GridViewItem></GridViewItem>
</GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:09:01.750

两种选择：

```
<GridView HorizontalAlignment="Left" Width="400" Height="400" Header="Abilities">
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <VariableSizedWrapGrid Orientation="Horizontal" Width="400" />
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
    <GridViewItem/>
    <GridViewItem />
    <GridViewItem/>
    <GridViewItem />
    <GridViewItem />
    <GridViewItem />
</GridView> 
```

或者，也

```
<Grid Width="400" Height="300">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <TextBlock Style="{StaticResource SubheaderTextStyle}" Text="Abilities" Margin="0 20" />
    <GridView Grid.Row="1">
        <GridViewItem />
        <GridViewItem />
        <GridViewItem />
    </GridView>
</Grid> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T18:36:56.097

试着把你的标题放在外面`GridView`

```
<TextBlock Text="Abilities"/>

<GridView Margin ="0" SelectionMode="None" />
    <GridViewItem></GridViewItem>
    <GridViewItem></GridViewItem>
    <GridViewItem></GridViewItem>
    <GridViewItem></GridViewItem>
    <GridViewItem></GridViewItem>
</GridView> 
```

# android - google-api 中缺少代码。找不到“picasa-android-sample”代码

> ID：14013463
> 
> 赞同：1
> 
> 时间：2012-12-23T18:20:15.770
> 
> 标签：android, picasa, google-api-java-client

我已按照[本](http://samples.google-api-java-client.googlecode.com/hg-history/8c52d30c2a8e47a5303bd917e3d9413c5b51f430/picasa-android-sample/instructions.html)教程为 Picasa android 创建了一个应用程序。我从以下位置下载了代码：

> hg 克隆[https://code.google.com/p/google-api-java-client.samples/google-api-java-client-samples](https://code.google.com/p/google-api-java-client.samples/)

然后我非常努力地安装所有先决条件。但最后我发现结帐中缺少主要代码。教程说：

> 点击“选择根目录”旁边的“浏览”，找到 [someDirectory]/google-api-java-client-samples/picasa-android-sample 并点击“下一步”

我可以找到`picasa-cmdline-sample`但我找不到`picasa-android-sample`代码`google-api-java-client`

谁能指导我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:12:16.297

您可以在这里找到源代码： [http ://code.google.com/p/google-api-java-client/source/browse/picasa-atom-android-sample/src/com/google/api/client/sample /picasa/PicasaAndroidSample.java?repo=samples&r=cc719e03305e81ce2683779b242fd6457efff0d0](http://code.google.com/p/google-api-java-client/source/browse/picasa-atom-android-sample/src/com/google/api/client/sample/picasa/PicasaAndroidSample.java?repo=samples&r=cc719e03305e81ce2683779b242fd6457efff0d0)

并将它（和整个模型文件夹）放在 google-api-java-client-samples 文件夹中。

# java - 在 Android 中使用 SurfaceView 和 Thread 正确暂停线程 onPause() 和 onResume()

> ID：14013468
> 
> 赞同：2
> 
> 时间：2012-12-23T18:20:46.160
> 
> 标签：java, android, surfaceview, onresume, onpause

为了运行我在 Android 上创建的游戏，我一直在使用包含方法 onDraw() 和 onTouch() 的 GamePanel。我也一直在使用一个 GameThread 类，它反复调用 onDraw() 和 update()。

我的活动实例化了 GamePanel，而我的 GamePanel 实例化了 GameThread。

我的 onPause() 只是将线程内的 while 循环中的条件设置为 false。我的 onResume() 过去只是将其设置为 true，但是每次我尝试恢复应用程序时都会出现强制关闭错误（*请参阅编辑 #1 ）。*

因此，为了解决问题，我只是重新实例化了线程，

```
thread = new GameThread(getHolder(), this); 
```

这解决了部分问题，允许我最小化应用程序，然后重新打开它而没有问题。但是，当我在应用程序中锁定手机然后解锁（打开和关闭屏幕）时，线程永远不会启动。这只是我的游戏处于冻结状态。

我知道我对这个问题的解决方案非常时髦，我很想学习一种更容易接受和更干净的方式来完成这件事。

这是代码（我省略了几行似乎不相关的代码）：

游戏活动：

```
void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    gamePanel = new MainGamePanel(this);
    setContentView(gamePanel);

}
protected void onPause() {
    super.onPause();
    gamePanel.shutDown();

}
protected void onResume() {
    super.onResume();
    gamePanel.startUp();
} 
```

游戏面板

```
public MainGamePanel(Context context) {
    super(context);
    getHolder().addCallback(this);                  //adding the callback (this) to the surface  holder to intercept events
    thread = new GameThread(getHolder(), this);     // create the game loop thread
    setFocusable(true);                             // make the GamePanel focusable so it can handle events
}
public void startUp() {
    thread = new GameThread(getHolder(), this);
}

public void shutDown() {
    thread.setRunning(false);
} 
```

游戏线程

```
public GameThread(SurfaceHolder surfaceHolder, MainGamePanel gameView) {
    this.surfaceHolder = surfaceHolder;
    this.gameView = gameView;
    this.run = true;
}
public void setRunning(boolean run) {
    this.run = run;
}
public void run() {
    Canvas c;//
    while (run) {
        c = null;
        try {
            c = surfaceHolder.lockCanvas(null);
            synchronized (surfaceHolder) {                  
                gameView.update();
                gameView.onDraw(c);
            }
        } finally {
            if (c != null) {
                surfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
} 
```

如果您需要更多信息或如何使我的问题更清楚，请告诉我（另外，我是否以可理解的方式展示了我的代码？）。

一点帮助将大有帮助。如果您能提供任何建议，请提前致谢。

**--编辑#1--**

当我强制关闭时，这是我的日志猫错误。

```
12-23 14:01:34.288: E/AndroidRuntime(9484): java.lang.IllegalThreadStateException: Thread already started. 
```

**--编辑#2--**

我尝试了您所说的并将我的 run() 方法更改为：

```
@Override
public void run() {
    Canvas c;
    while (true) {
        if (run) {/* run game thread */
            c = null;
            try {
                c = surfaceHolder.lockCanvas(null);
                synchronized (surfaceHolder) {
                    gameView.update();
                    gameView.onDraw(c);
                }
            } finally {
                if (c != null) {
                    surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        } else {
            try {
                Thread.sleep(100);
            } catch (Exception e) {
            }
        }
    }
} 
```

当我锁定我的手机时它起作用了，但是当我最小化应用程序并重新打开它时，我看到一个黑屏，几秒钟后一个弹出窗口显示“MyApp 没有响应。你想关闭它吗？”。我检查了它到达的位置，它似乎到达了 onPause() 和 shutDown()，但它从来没有到达 onResume();。此外，有时它甚至在调用 onPause() 或 shutdown() 之后调用 update()，这很奇怪。（从 LogCat 获得信息）

# javascript - 隐藏时是否会下载图像？

> ID：14013470
> 
> 赞同：0
> 
> 时间：2012-12-23T18:21:09.997
> 
> 标签：javascript, jquery, css, fancybox

我正在使用`FancyBox`来自： http: [//fancybox.net/](http://fancybox.net/)的 jQuery 插件，我基本上将它用于“隐藏画廊”；这意味着图像根本不会显示在页面上，画廊是通过文本链接启动的，然后用户可以在打开后扫描它们。

为了实现这一点，我正在做这样的事情：

```
<div class="all_images">
    <a href="images/1.png" class="gallery" rel="g1"></a>
    <a href="images/2.png" class="gallery" rel="g1"></a>
    <a href="images/3.png" class="gallery" rel="g1"></a>
</div> 
```

然后在CSS中我做：

```
.all_images {
    display: none;
} 
```

现在我想知道图像是否像这样下载是因为它们是隐藏的，还是因浏览器而异？

如果他们不这样做，我可能会更喜欢它，因为某些图像可能很大，并且如果用户不想查看它们，我不希望用户下载一堆图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:24:06.950

在您的示例中，您没有显示`<img/>`元素。如果单击，您只有链接到图像的超链接。不会有下载。

如果它们是`<img/>`标签，即使它们被设置为`display:none`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:43:48.137

如果您希望通过删除不必要的图像下载来优化页面。您可以将所有这些图像组合成一个大图像并将该图像加载为背景图像；然后，您可以利用 CSS 背景位置；属性以使用每个项目下的图像（div，a，li et-al）。这样，您将只发出一个 http 请求来加载所有图像，这是一种很好的页面优化技术，可以避免不必要的 http 请求。

# android - Android - 无法设置背景图像但在设计器中可见

> ID：14013473
> 
> 赞同：0
> 
> 时间：2012-12-23T18:21:31.680
> 
> 标签：android, image, background

截至今天，我有点像 Android 菜鸟。

我尝试将图片设置为背景，如下所示；

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:background="C:\Users\Jacob\Downloads\xmas.jpg"
android:layout_height="match_parent"
tools:context=".MainActivity" > 
```

但是当我构建它时，它会出现；

'描述资源路径位置类型错误：错误：不允许字符串类型（在'背景'，值为'C：\ Users \ Jacob \ Downloads \ xmas.jpg'）。activity_main.xml /FirstAndroidApp/res/layout 第 1 行 Android AAPT 问题'

当我进入设计器时，它会显示我想要的背景，但只是出现错误。

我不允许以这种方式设置背景吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:24:54.173

您必须将图片复制到您的`drawable`文件夹中，然后像这样引用它：

```
android:background="@drawable/xmas" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:24:59.650

在android中你不应该这样设置背景。稍微搜索一下，你就能得到答案。

1.  将您的图像 xmas.jpg 放在**res/drawable**文件夹中。
2.  更改`android:background="C:\Users\Jacob\Downloads\xmas.jpg"`为`android:background="@drawable/xmas"`

在 android中，更推荐使用**.png**并且像我上面所说的那样使用时不需要像 .png 或 .jpg 这样的扩展名。

这将解决您的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T18:26:02.490

要开始工作，您需要将图像复制到`<Your_Project>/res/drawable`文件夹中，然后将`RelativeLayout`背景设置为：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:background="@drawable/xmas"
android:layout_height="match_parent"
tools:context=".MainActivity" > 
```

有关在项目中添加图像的更多信息，请参见

[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# ruby - Lion OSX：如何安装 libfreetype.6.dylib？

> ID：14013474
> 
> 赞同：15
> 
> 时间：2012-12-23T18:21:40.137
> 
> 标签：ruby, gem, osx-lion, homebrew

我正在尝试安装 ruby​​ gem，但安装过程已停止，因为：

```
ld: file not found: /usr/local/lib/libfreetype.6.dylib for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我怎样才能安装这个库？我检查了`/usr/local/lib/`那里，图书馆不见了。

**编辑：**

我跑了**locate libfreetype.6.dylib**并得到：

```
/Applications/MAMP/Library/lib/libfreetype.6.dylib
/Applications/VLC.app/Contents/MacOS/lib/libfreetype.6.dylib
/Applications/XAMPP/xamppfiles/lib/libfreetype.6.dylib
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/X11/lib/libfreetype.6.dylib
/Applications/calibre.app/Contents/Frameworks/libfreetype.6.dylib
/Users/xxxxx/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib
/Users/xxxxx/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM
/Users/xxxxx/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents
/Users/xxxxx/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Info.plist
/Users/xxxxx/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Resources
/Users/xxxxx/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Resources/DWARF
/Users/xxxxx/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Resources/DWARF/libfreetype.6.dylib
/Users/xxxxx/rubydev/sharelock-staging/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib
/Users/xxxxx/rubydev/sharelock-staging/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM
/Users/xxxxx/rubydev/sharelock-staging/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents
/Users/xxxxx/rubydev/sharelock-staging/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Info.plist
/Users/xxxxx/rubydev/sharelock-staging/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Resources
/Users/xxxxx/rubydev/sharelock-staging/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Resources/DWARF
/Users/v/rubydev/sharelock-staging/magick-installer/freetype-2.4.3/objs/.libs/libfreetype.6.dylib.dSYM/Contents/Resources/DWARF/libfreetype.6.dylib
/opt/X11/lib/libfreetype.6.dylib
/usr/local/Cellar/freetype/2.4.10/lib/libfreetype.6.dylib 
```

但是为什么系统找不到库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-23T18:37:38.847

您要安装什么库？会不会是 ImageMagick？另外，如果它是 RubyGem，为什么帖子会被标记为 homebrew？

无论如何，安装 ImageMagick 时出现此错误，您需要符号链接`/opt/X11/lib/libfreetype.6.dylib`到`/usr/local/lib`.

做这个：

`ln -s /opt/X11/lib/libfreetype.6.dylib /usr/local/lib/libfreetype.6.dylib`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-20T13:37:52.773

如果您使用的是 brew，您可以：

> 酿造链接——覆盖自由类型

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-12T21:34:32.580

Gabriel F. Engel 的回答几乎对我有用。我必须进行以下更改：

```
brew install freetype
brew link --overwrite freetype 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-23T18:45:55.440

您的编译器试图链接到一个没有该库的位置的库，但是您似乎已经使用自制软件安装了它。尝试运行 `ln -s /usr/local/Cellar/freetype/2.4.10/lib/libfreetype.6.dylib /usr/local/lib/libfreetype.6.dylib`创建一个，或者您可以使用`without-freetype`标志跳过它。

# java - 需要正确的价格正则表达式（Java） - 我的不起作用

> ID：14013480
> 
> 赞同：-2
> 
> 时间：2012-12-23T18:21:57.350
> 
> 标签：java, regex

我正在尝试制作一个正则表达式，以检查某物是否是价格。我不擅长正则表达式，这个给我一个正则表达式语法错误。它应该检查输入是否类似于 13.3 或 0.1 或 .4 或 6 或 200 或 3.04，这些都可以解释为价格。我尝试使用 Double.valueOf(String)，但是，这个方法接受像 3.00 这样的字符串，所以超过 2 个浮点数。

```
private boolean validateAndSet(JTextField tf) {
    boolean isDouble = true;
    try { 
        if (tf.getText().matches("^[0-1]*(\\.)?[0-1]{0-2}$"))   {
            item.setAlertPrice(Double.valueOf(tf.getText()));
            return true;
        }
        isDouble = false;
    } catch (NumberFormatException nfe) {
        isDouble = false;
    } finally {
        if (!isDouble) {
            System.out.println("Not a price;");
            tf.setText("0.00");
        }

    }
    return isDouble;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:26:50.730

关于您的正则表达式的错误之处：

1.  `[0-1]`-> 这分隔 a`0`或 a `1`，您需要用来`\d`分隔每个数字。
2.  `{0-2}`-> 这是不正确的，你需要使用`,`而不是`-`

其他的我觉得还可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:26:59.887

尝试`"^[0-9]*?(\\.)?[0-9]{0,2}$"`，而不是。

# jquery - 纯 CSS 和 jQuery 输入插入符号/光标

> ID：14013486
> 
> 赞同：1
> 
> 时间：2012-12-23T18:22:30.903
> 
> 标签：jquery, css

我正在尝试使用 CSS 和 jQuery 实现输入光标。

[在阅读了这篇](http://www.dynamicdrive.com/forums/showthread.php?17450-Emulating-a-terminal-like-caret-with-javascript-and-css)教如何做这样的事情的文章后，我有了[这个](http://shachi.prophp.org/demo.html)想法

为了使用 jQuery 提供平方密码（作为[-webkit-text-security: squared](http://css-infos.net/property/-webkit-text-security)的跨浏览器解决方案）。

诀窍是通过处理两个输入来实现的：一个隐藏的输入，一个实际显示正方形的输入。焦点停留在隐藏字段上，因此`input cursor`它丢失了。这不是很实用，因为用户无法看到它在哪里写。

经过一番思考，我在`input[type="text"]`. 检查我写的[这个jsfiddle](http://jsfiddle.net/jviotti/knfma/)，看看我在说什么。如果您在该**`hidden`**字段上书写（好吧，出于实验目的，它没有隐藏在小提琴中），密码输入会呈现正方形和**`green cursor`**.

正方形的大小相同，但是，它们的大小在不同的浏览器上有所不同，导致光标无法根据文本移动。

```
Chrome: 
```

![铬合金](../Images/00b55ba9f7ed5ea015af9a4b72a54e60.png)

```
Firefox 
```

![火狐](../Images/990ec58bd3a66e15e11effc823cf4ba6.png)

```
Opera 
```

![歌剧](../Images/5025e93869502fd1a5fe43f305e3c244.png)

在小提琴中，我使用一个**固定的像素值**来左右移动光标。

我的小提琴在 Chrome 中运行良好，但 FF 和 Opera 都以不同大小呈现正方形。

*   我如何预测将呈现正方形的宽度？
*   有没有办法在每个浏览器上获取正方形宽度并正确移动光标？
*   有没有更好的方法来包含光标？

任何帮助、想法或任何东西都会非常感激。我为此快疯了。

**更新：**退格功能甚至在 FF 中都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:40:31.563

我认为您可以为该输入设置字体大小：http: [//jsfiddle.net/knfma/22/](http://jsfiddle.net/knfma/22/)

```
input {
  display: block;   
  margin: 5px 0;
  font-size:12px; // set this and see if works cross browser
}                 // tested on chrome and ff 
```

# android - ViewPager 可以将静态内容作为 View 的一部分吗

> ID：14013489
> 
> 赞同：1
> 
> 时间：2012-12-23T18:23:03.787
> 
> 标签：android, android-viewpager, android-view, android-ui

我需要为平板电脑创建一个 ViewPager，在左侧会有导航按钮供用户选择。例如。

左侧导航将有 4 个图像按钮，每个项目将用户带到不同的教程。每个图像按钮都会加载一个 ViewPager。

如果用户选择第 1 项，页面右侧将为教程 #1 加载 ViewPager，但左侧的导航将保留，因此当用户在页面上滑动时，导航将始终可见，因此他们可以导航到不同的页面教程。所有 ImageButton 项的行为都是相同的。

我已经搜索了示例，但没有看到像我所描述的那样。如果不是这种设计的可能替代方案是什么？

更新，包括 xml 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <include
        android:id="@+id/headerbar"
        layout="@layout/header" />

    <LinearLayout
        android:id="@+id/container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <include layout="@layout/left_nav" />

        <android.support.v4.view.ViewPager
            android:id="@+id/homeScreenPager"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <com.viewpagerindicator.CirclePageIndicator
            android:id="@+id/indicator"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/navbar_bg"
            android:padding="10dip" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:54:05.663

> 我已经搜索了示例，但没有看到像我所描述的那样。

使用水平`LinearLayout`. 有两个孩子：

*   `LinearLayout`您的“4个图像按钮”的垂直
*   一种`ViewPager`

单击按钮时，在`ViewPager`.

# jquery - JQuery 滚动功能不起作用

> ID：14013490
> 
> 赞同：2
> 
> 时间：2012-12-23T18:23:07.063
> 
> 标签：jquery, scroll, bind

我刚开始用 jquery 制作一个滑动菜单，但没有一个滚动功能起作用。JQuery 已连接（我检查过）。我试图在 Chrome 中玩控制台，我得到的是

```
> $("body").scrollTop();
  0
> $(window).scrollTop();
  0 
```

这很有趣，这些函数的返回值总是为零！或者例如我尝试使用 scroll() 函数来绑定页面滚动......它不起作用。

```
$(window).scroll(function(){
  alert('Its scrolling!');
}); 
```

或此代码

```
$(window).bind('scroll', function(){
  alert('And its scrolling TOO!');
}); 
```

没有人工作。有什么问题？任何错误也没有登录控制台。

我的网站是[http://q-2.su](http://q-2.su/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:31:18.760

我在您的页面中找到了这个（您提供的网址）：

```
$(document).ready( function (){
    console.log('ready');
    $('.wrapper').scroll( function (){
    //-^------------------------------------here you are refering to the class but in
        console.log('scroll'); // ----------you used id
    });
}); 
```

所以这将是：

```
$(document).ready( function (){
    console.log('ready');
    $('#wrapper').scroll( function (){
    //-^------------------------------------here you have to use # for id
        console.log('scroll'); 
    });
}); 
```

# ruby-on-rails-3.1 - Rails 应用程序中的 Gems populator 和 faker 调用错误

> ID：14013496
> 
> 赞同：1
> 
> 时间：2012-12-23T18:24:10.977
> 
> 标签：ruby-on-rails-3.1, gem, faker

我想用 gems populator 和 faker 填充我的数据库。我只是按照[railscast 教程](http://railscasts.com/episodes/126-populating-a-database)。如果我只是按照教程进行操作，我的代码如下所示：

```
namespace :db do
  desc "fill compact tables with sample data"
  task :populate => :environment do
    require 'populator'
    require 'faker'

    [RepositoryCompact, BuildCompact, JobCompact].each(&:delete_all)

    RepositoryCompact.populate 10 do |repository|
      repository.name = Faker::Name.name
      repository.description = Populator.sentences(1)
      repository.owner_name = Faker::Name.name
      repository.url = Faker::Internet.url

      i = 0 

       BuildCompact.populate 1..10 do |build|
        build.config = Populator.sentences(1..3)
        build.repository_compact_id = repository.id
        build.number = i
        i++
        build.result = 0 || 1
        build.finished_at = 2.years.ago..Time.now

         JobCompact.populate 1..5 do |job|
          job.build_compact_id = build.id
          job.allow_failure = 0 || 1
          #job.finished_at = build.finished_at-(2..100)
          job.language = [ruby, php, java, c, python, rubinius, jruby]
          job.version = [1.9 .. 2.5]
          job.result = 0 || 1
        end

       end

    end

  end
end 
```

如果我运行`rake db:populate`关系，gem () 似乎无法识别该关系`undefined method repository_compact_id=for #<Populator::Record:0x0000010177ffb8>`但即使将除 RepositoryCompact 部分之外的所有内容都注释掉，rake 也会中止`Validation failed: Name has already been taken`

我确信我设置了正确的模型和关联。有没有明显的错误？
会不会是宝石`populator`太旧了？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:09:57.773

我已经多次遇到同样的问题。

基本上，当使用 Populator gem 时，要插入的查询是一次性创建的，因此当您使用 Faker 或 Populator 为唯一列设置值时会遇到问题。

这两个 gem 用于生成电子邮件和名称等内容的排列数量有限，虽然它相当大 - 它们总是有可能两次抛出相同的名称/电子邮件。

由于您使用的是 Populator，因此您无法解决此问题。

另一种较慢的方法是使用 Active Record 并手动添加它们。

在这种情况下，您可能想尝试一个循环来验证名称的唯一性，然后再尝试使用它保存新记录。像这样：

```
5.times do
    repository = Repository.new
    begin
        name = Faker::Name.name
    end while Repository.where(name: name).exists?
    repository.name = name
    # set other values #
    repository.save!
end 
```

# android - 在 Android 的 ListAdapter 中输入一个对象

> ID：14013499
> 
> 赞同：0
> 
> 时间：2012-12-23T18:24:32.090
> 
> 标签：android

我是安卓新手。

我有一个必须像这样查看的列表：PIC NAME DESC

我有一个包含上述所有 3 个信息的存储桶列表。问题是，我只能让一个字段出现在视图中。在这种情况下，bucket.getBucketName()。

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        List<Bucket> buckets = BucketHandler.getBucketList();
        List<String> bucketList = new ArrayList<String>();
        for (Bucket bucket : buckets){
            bucketList.add(bucket.getBucketName());
        }
        setListAdapter(new ArrayAdapter<String>(this, R.layout.row,
                R.id.bucket_list, bucketList));
    } 
```

我的 .xml 如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">    

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:drawSelectorOnTop="false"/>

    <TextView
        android:id="@id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@string/noData"/>

</LinearLayout> 
```

行布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:background="@color/lightgray">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/none"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/bucket_list"
        android:layout_width="210dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:layout_marginTop="15dp"/>

    <TextView
        android:id="@+id/bucket_percentage"
        android:layout_marginTop="15dp"
        android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp"
    />

    <TextView
        android:id="@id/android:hidden_id"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone"
    />

</LinearLayout> 
```

如何在项目列表中呈现所有三个字段？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:29:20.470

通过扩展 ArrayAdapter 并覆盖 getView() 方法创建自己的自定义适配器

# android - 将图像保存在本地并在 webview 中显示

> ID：14013504
> 
> 赞同：1
> 
> 时间：2012-12-23T18:25:04.120
> 
> 标签：android, webview, save, local

我对这段简单的代码有问题。我从网上下载图像并将其保存在本地：

```
 File mFile = new File(context.getFilesDir(), "a.png");
               if(!mFile.exists()) {         mFile.createNewFile();                }
               FileOutputStream fos = new FileOutputStream(mFile);
               fos.write(baf.toByteArray());
               fos.flush();
               fos.close(); 
```

我尝试在 ImageView 上显示此图像并且它正在工作。现在我尝试**在 WebView 上显示保存图像。**

```
 String data = "<body>" +"<img src=\"a.png\"/></body>";
  webview.loadDataWithBaseURL(getActivity().getFilesDir().toString(),data , "text/html", "utf-8",null); 
```

它不起作用，webview 什么也没显示。我尝试使用 png 的 webview 我将自己放入 /assets 并且它正在工作。

我认为我指向字符串数据中文件的语法是错误的，但我不确定。

任何帮助表示赞赏。

谢谢。

亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:35:51.567

好的，在测试了很多不同的东西之后，我最终得到了这个工作代码。

```
 WebView webview = (WebView) view.findViewById(R.id.imageView);      

    try {
        FileInputStream in = getActivity().openFileInput("image_behindfragment.png");
        BufferedInputStream buf = new BufferedInputStream(in);
        byte[] bitMapA= new byte[buf.available()];
        buf.read(bitMapA);
        Bitmap bM = BitmapFactory.decodeByteArray(bitMapA, 0, bitMapA.length);
        //imageview.setImageBitmap(bM);
        if (in != null) {
        in.close();
        }
        if (buf != null) {
        buf.close();

        String imgToString = Base64.encodeToString(bitMapA,Base64.DEFAULT);
        String imgTag = "<img src='data:image/png;base64," + imgToString               
                + "' align='left' bgcolor='ff0000'/>"; 
        webview.getSettings().setBuiltInZoomControls(true);

        webview.setInitialScale(30);
        WebSettings webSettings = webview.getSettings();
        webSettings.setUseWideViewPort(true);

        webview.loadData(imgTag, "text/html", "utf-8");

        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:43:21.240

```
String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();
String imagePath = "file://"+ base + "/a.png";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
WebView.loadDataWithBaseURL("file:///mnt/sdcard/Your Folder/", html, "text/html","utf-8", ""); 
```

# c# - MVC Controller Action Gets Called Multiple Times When Layout Is Specified

> ID：14013505
> 
> 赞同：7
> 
> 时间：2012-12-23T18:25:10.710
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

I'm having a problem where a controller action is called at least twice. I have a view that has another view as its layout page, and the view is called multiple times. If I remove the specification for the layout then the action is consistently executed once. I looked through StackOverflow and other sites but couldn't find a problem which had the same characteristics as mine so I'm posting a new question.

```
_ViewStart.cshtml:
@{
   Layout = "~/Views/Shared/_ProfileLayout.cshtml";
}

Index.cshtml inside my Profile folder: @{
ViewBag.Title = "Index";    
}
Index

Controller Action:
public ActionResult Index()
    {            
        //ToDo: BusinessLogic
        //This method gets called twice
        //******************//
        return View();
    } 
```

It seem's like a simple problem and I'm definitely missing something obvious. I've posted the sample project on this site: [https://skydrive.live.com/#cid=F2DAB940147490B0&id=F2DAB940147490B0%21140](https://skydrive.live.com/#cid=F2DAB940147490B0&id=F2DAB940147490B0%21140)

Any ideas what's wrong?

Thanks

Update: Here's the view: @{ ViewBag.Title = "TestMVCProject"; Layout = null; }

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>TestMVCProject</title>
    <link rel="Stylesheet" type="text/css" href="../../Content/ActiveSite.css" />    
    <link href="../../Content/themes/TestMVCProject/jquery-ui-1.9.1.custom.min.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery-1.8.2.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-1.9.1.custom.js" type="text/javascript"></script>
</head>

<body>
<div class="container">
  <div class="header">  
  <div id="loginimagecontainer">
  @using (Html.BeginForm("LoginActions", "Account", FormMethod.Post, new { @id = "LoginActionsForm" }))
  {  
  @Html.AntiForgeryToken()      
  <a href="#"><img src="/images/icons/message-icon.png" width="60" height="60" alt="Messages" title="Messages"/></a>
  <a href="/Account/LogOff"><img src="/images/icons/log-out-icon.png" width="60" height="60" alt="Log off" title="Log off"/></a>
  }    
  </div>

  <div class="logotext"><img alt="TestMVCProject Logo" src="#" width="350" height="150" id="TestMVCProjectLogo" /></div>
    </div>    
  <div class="content profile">  
    <div id="leftPane">
        <img src="#" alt="Placeholder" width="165" height="200" id="ProfilePhoto" title="Profile Photo" />
        <div id="Username"></div>
        <div id="NavLinks">
            <div class="ProfileNavigation" onclick="Navigate('/Profile/Update')"><span>Profile</span><img src="/images/icons/edit-icon.png" width="30" height="30" alt="Profile" /></div>
            <div class="ProfileNavigation"><span>Search</span><img src="/images/icons/search-icon.png" width="30" height="30" alt="Search" /></div>
            <div class="ProfileNavigation" onclick="Navigate('/Photo')"><span>Photos</span><img src="/images/icons/camera-icon.png" width="30" height="30" alt="Photos"/></div>
        </div>
    </div>
      <div id="adcontainer">
        <h4>Ads go here</h4>
        <p>content goes here</p>    
        </div>

    <div id="centerPane">
    @RenderBody()
    </div>     

  </div>
  @RenderPage("~/Views/Shared/_Footer.cshtml")
    <div id="redirectiondialog" class="dialog">
    <br />
    Hey, wait up... we're redirecting you over to the login page
    <br />
    </div> 

    <script type="text/javascript">    
        function Navigate(url) {
            window.location = url;
            return false;
        }
    </script>
</div>
</body>
</html> 
```

and here's the footer page:

```
 <div class="footer">
    <div class="fltrt">Copyright 2012 TestMVCProject Inc&nbsp;</div>
    <p><a href="/Profile/Test">About</a> | <a href="#">Contact</a> | <a href="#">FAQ</a> | <a href="#">Advertise</a> | <a href="#">Support</a> | <a href="#">Feedback</a> | <a href="#">Login</a> | <a href="#">Register</a> | <a href="#">Privacy</a> | <a href="#">Terms</a></p>    
</div> 
```

Update: @Tieson T: Thanks, I changed this to be Html.Partial instead of RenderPage. However the problem still persists as the action method still gets called twice... (Editing description as I don't have privileges to add comments)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T17:48:11.667

I figured out the problem. There was this line in the code:

```
<img alt="TestMVCProject Logo" src="#" width="350" height="150" id="TestMVCProjectLogo" /> 
```

The `src` was going back to the same page. Once I replace it with a `""` it works fine now.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-27T07:03:41.507

I also faced same problem. The Action was rendering twice. The only problem was with

```
<img id="blah" src="#" alt="your image" /> 
```

Dont know for what reason src attribute of image was causing to perform rendering twice on page.

I just changed it to ""`

```
<img id="blah" src="" alt="your image" /> 
```

and it is working fine now.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T04:50:12.340

Since your `_Footer.cshtml` view is just plain old HTML, there is absolutely no reason to call `@RenderPage()` to insert it into your layout. Use `@Html.Partial()` instead:

```
@Html.Partial("_Footer") 
```

I honestly don't know for sure why the layout is called twice, but I assume `@RenderPage()` (which I've never had a need for) renders an entire HTML page and injects the results. You'd have to check the page source in your browser to confirm.

HTH.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-19T14:42:15.550

@Url.Content(...) is causing the model to get called twice for me. Maybe some others issue as well

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-05T09:08:00.440

It also happens when we are giving a image path, but, image does not exist on that path.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-11T01:09:06.913

guy's if none of the above works like me, try disabling Conveyor extension.

that mas my nightmare.

enjoy...

# mod-rewrite - Apache - Mod 重写“或重定向”

> ID：14013509
> 
> 赞同：1
> 
> 时间：2012-12-23T18:25:43.767
> 
> 标签：mod-rewrite

我需要制定重写条件：

我想将用户重定向到`/Cms/index.php/$1`在 URL 中找到“cms”时，例如：`http://example.com/cms/`

否则我想重定向到`/App/index.php/$1`，我已经做了一些事情，但它给了我 500 错误。

```
RewriteEngine On
RewriteRule ^cms     /Cms/index.php/$1 [L]
RewriteRule ^.*$     /App/index.php/$1 [L] 
```

谢谢

**@编辑**

我试过了，但它也让我赚了500。

**`error.log`**

```
[Sun Dec 23 19:40:54 2012] [error] [client 127.0.0.1] Request exceeded the limit of 10 internal redirects due to probable configuration error.vUse 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:32:06.750

### 尝试使用此代码：

```
RewriteEngine On
RewriteRule ^cms(.*)     /Cms/index.php/$1 [L]
RewriteRule ^(.*)$     /App/index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T21:51:09.003

请注意，apache 不会只运行一次重写规则。它会尝试应用规则，直到 url 不再更改（这使得 mod_rewrite 非常强大）。这就是你得到错误的原因。规则正在创建一个重定向循环。

例如，`/cms/test`指向`/Cms/index.php/test`，而后者又被第二条规则匹配，导致它指向`/App/index.php/Cms/index.php/test`，该 url 再次被第二条规则匹配，将其指向`/App/index.php/App/index.php/Cms/index.php/test`等等。

为了防止这个循环，添加一个重写条件：

```
RewriteEngine On

RewriteRule ^cms     /Cms/index.php/$1 [L]

RewriteCond %{REQUEST_URI} !^/(Cms|App)
RewriteRule ^.*$     /App/index.php/$1 [L] 
```

# python - 使用 simplejson 时无法解码 JSON 对象

> ID：14013511
> 
> 赞同：0
> 
> 时间：2012-12-23T18:25:55.517
> 
> 标签：python, urllib

我正在通过 API 访问一些数据。

以下是我的代码片段：

```
url = self.base_url + specific_url + "?q=" + str(query) + "&" + "filters=[[%22category_id%22,[" + category_id + "]]]" + "&start=" + start + "&sortby=[[%22mpn%22, %22asc%22]]" + "&limit=" + limit + "&apikey=" + self.api_key
response_json = self.web_fetch(url)
return simplejson.loads(urllib.unquote(response_json)) 
```

当我直接去URL时，我可以看到数据很好。但是在我的代码中出现以下错误：

```
No JSON object could be decoded 
```

当我添加`&sortby=[[%22mpn%22, %22asc%22]]`到 url 时，我开始收到此错误，但我可以在浏览器中正常导航到页面，因此不确定这是否导致问题。

什么会导致此错误，我可以尝试解决哪些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:36:05.290

“无法解码任何 JSON 对象”通常意味着您的 JSON 是一个空字符串。打印 的值`response_json`以查看它。记住调试的第一条规则：当有疑问时，打印更多。

# php - 如何仅使用 PHP 提取具有密码的 ZIP 文件？

> ID：14013514
> 
> 赞同：4
> 
> 时间：2012-12-23T18:26:29.023
> 
> 标签：php, passwords, redhat, unzip

我在这里只看到一个问题，但它没有回答我的问题。我正在运行一个典型的 LAMP 服务器，该服务器具有最新的 PHP 5 和 MYSQL 5 以及 Redhat Linux。

我需要找到一个仅限 PHP 的解决方案，因为我的主机不允许我使用 shell。

这是我的代码，它从 vBulletin 上传中提取未加密的 ZIP 到另一个目录：

```
if ($_GET['add'] == TRUE){
$zip = new ZipArchive;
 $res = $zip->open($SOURCE FOLDER);
 if ($res === TRUE) {
     $zip->extractTo('$DESTINATION FOLDER/');
     $zip->close();
     echo 'File has been added to the library successfuly';
     //Add a flag to that file to indicate it has already been added to the library.
     mysql_query("UPDATE attachment SET library = 1 WHERE filedataid='$fileid'");    
 } else {
     echo 'A uncompression or file error has occured';
 }} 
```

肯定有某种方法可以只使用 PHP 来做到这一点！谢谢你。

更新：我的主机通知我服务器上安装了 gzip，但没有安装 7-Zip。我也在研究外壳访问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T18:35:00.027

为脚本提供 7zip 可执行文件并调用它以通过 system() 使用密码解压缩文件。

```
$strCommandLine = "7z e fileToUnzip.7z -pTHEPASSWORD";
system($strCommandLine); 
```

`unzip`如果您的主机已安装，您可以使用 执行类似的操作。请参阅[http://linux.about.com/od/commands/l/blcmdl1_unzip.htm](http://linux.about.com/od/commands/l/blcmdl1_unzip.htm)。

它支持带密码的 -P，所以是这样的：

```
$strCommandLine = "unzip fileToUnzip.7z -P THEPASSWORD";
system($strCommandLine); 
```

警告：如果有人在系统上执行 ps 并看到您的 unzip 命令正在运行，他们可能会在该命令行上看到您的密码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-01T15:29:04.990

你可以使用这个函数 setPassword ( string $password ) [http://php.net/manual/en/ziparchive.setpassword.php](http://php.net/manual/en/ziparchive.setpassword.php)

# linux - 如何处理本地 dotfile 存储库？

> ID：14013515
> 
> 赞同：3
> 
> 时间：2012-12-23T18:26:30.567
> 
> 标签：linux, git, dotfiles

和其他许多人一样，我希望拥有一个包含我的配置文件的 git 存储库，并将其备份上传到托管站点。我的问题是如何处理本地仓库的点文件。

假设我在 dotfiles 存储库中有我的 zshrc/bashrc。我可以将 'source /path/to/local/repo/zshrc' 行放到我的 ~/.zshrc 文件中，一切都很好。vimrc 也一样。

但是那些不支持这样命令的点文件呢？我是否应该在 ~/.conffile 和 /pathtolocalrepo/conffile 中具有相同的内容，并且当我对其中一个文件进行更改时会更新另一个文件？还是有更聪明的方法？

常见的做法是什么？

这个本地存储库通常位于哪里（在 Linux 上）？我不认为主文件夹是放置它的正确位置（其他用户也应该可以使用配置文件），但是哪个位置最适合呢？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:33:05.347

您可能应该使用符号链接。

```
ln -s /path/to/repo/.zshrc ~/.zshrc 
```

这意味着当您尝试访问 ~/.zshrc 时，它将改为查找文件 /path/to/repo/.zshrc

有关符号链接的更多信息，请查看：[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)

请注意，您可以完美地创建一个“硬”链接（没有 -s 选项），唯一的区别是使用硬链接您不能链接目录或链接文件系统（如果 /home 和 /path/to/repo 不在同一个磁盘/分区）

> 这个本地存储库通常位于哪里（在 Linux 上）？我不认为主文件夹是放置它的正确位置（其他用户也应该可以使用配置文件），但是哪个位置最适合呢？

我通常将所有 git 存储库放在 ~/git 文件夹中，但这确实是个人选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:52:55.870

我做了类似的事情，尽管出于历史原因，我使用 CVS 而不是 Git。

我将所有`$HOME/.*`文件（和`$HOME/bin/*`脚本）保存在 CVS 存储库中。然后，我手动使用`update-home`和`update-bin`我编写的脚本将文件分别复制到`$HOME`或`$HOME/bin`中。这有点浪费空间（我想我可以使用符号链接代替），但还不错——通过复制而不是符号链接，我可以在存储库中试验文件而不会影响我的主目录。

除其他外，该`update-home`命令会为已存在的任何文件制作备份副本，这样我就不会破坏在`.bashrc`设置我的帐户时创建的文件。（并根据需要`update-bin`编辑`#!`行，例如，如果我想使用 Perl 可执行文件而不是`/usr/bin/perl`.）

（我的`update-home`和`update-bin`脚本的设计目的不是供其他人使用；它们充满了仅适用于我的硬连线名称。只需手动复制文件也可以。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T09:24:19.013

一种常见的做法是在 github 中备份您的点文件。为这种做法做了很多工作。

这个想法是为您要使用的每台新计算机克隆该存储库。

你可以看看我的个人[仓库](https://github.com/vicentebolea/dotfiles)，看看我是如何实现它的。在我的例子中，我使用了一个 perl 脚本`dfm`来处理这些符号链接

# c++ - 在 C++ 中复制和操作大型密集二维数组的最快方法是什么

> ID：14013526
> 
> 赞同：10
> 
> 时间：2012-12-23T18:28:01.877
> 
> 标签：c++, arrays, performance, parallel-processing, opencl

我正在尝试优化我的代码，利用多核处理器来复制任何操作大型密集数组。

用于复制：我有一个大的密集数组（大约 6000x100000），我需要从中拉出 15x100000 个子数组来进行多次计算。管道由许多由多核 blas 处理的线性代数函数组成。与线性代数相比，提取数据的时间是否真的很重要是一个悬而未决的问题，但我想谨慎起见并确保数据复制得到优化。

对于操作：我有许多不同的函数可以通过元素或行来操作数组。如果这些中的每一个都是多核的，那将是最好的。

我的问题是：最好使用正确的框架（OpenML、OpenCL）并让所有的魔法发生在编译器上，还是有好的函数/库可以更快地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T23:25:32.107

你的出发点应该是好旧的`memcpy`。来自长期痴迷于“复制性能”的人的一些提示。

1.  阅读[每个程序员都应该知道的关于内存](http://people.redhat.com/drepper/cpumemory.pdf)的知识。
2.  对您的系统`memcpy`性能进行基准测试，例如[此处](http://voluminium.svn.sourceforge.net/viewvc/voluminium/trunk/libvulgus/libvulgus_bench.cpp?revision=183&view=markup)`memcpy_bench`的功能。
3.  `memcpy`对在多核上运行时的可扩展性进行基准测试，例如`multi_memcpy_bench` [此处](http://voluminium.svn.sourceforge.net/viewvc/voluminium/trunk/libvulgus/libvulgus_bench.cpp?revision=183&view=markup)。（除非您使用的是一些多插槽 NUMA 硬件，否则我认为您不会看到多线程复制有太多好处）。
4.  深入了解系统的 memcpy 实现并了解它们。你会发现大部分时间都在独处的日子`rep movsd`已经一去不复返了。上次我查看 gcc 和 Intel 编译器的 CRT 时，它们都根据相对于 CPU 缓存大小的副本大小来改变策略。
5.  在 Intel 上，了解非缓存污染存储指令（例如`movntps`）的优势，因为与传统方法相比，这些指令可以[显着提高吞吐量](https://stackoverflow.com/a/536652/24283)（您将在 4 中看到这些使用。）
6.  有权访问并知道如何使用采样分析器来确定您的应用程序有多少时间用于复制操作。还有更高级的工具可以查看 CPU 性能计数器并告诉您各种缓存正在做什么等。
7.  （高级主题）注意 TLB 以及[何时大页面可以提供帮助](https://stackoverflow.com/questions/2876377/in-what-circumstances-can-large-pages-produce-a-speedup)。

但我的期望是，与任何 linalg 繁重的工作相比，您的副本将是相当小的开销。很高兴知道这些数字是多少。我不希望 OpenCL 或任何**CPU**在这里神奇地提供任何改进（除非您的系统的 memcpy 实现不佳）；恕我直言，最好更详细地研究这些东西，深入了解在指令、寄存器、缓存行和页面级别实际发生的事情的基础，而不是通过在顶部分层另一个抽象级别来摆脱这些.

当然，如果您正在考虑将您的代码从您当前使用的任何多核 BLAS 库移植到 GPU 加速的线性代数版本，这将成为一个完全不同（并且更复杂）的问题（请参阅下面的 JayC 评论）。如果你想获得*显着的*性能提升，你当然应该考虑它。

# c++ - 如何在 C++ 中从一个单独的球体开始构建密集的球体？

> ID：14013530
> 
> 赞同：-1
> 
> 时间：2012-12-23T18:28:55.320
> 
> 标签：c++, arrays, geometry, packing

假设我从一个定义半径 R 的球体和一个包含笛卡尔坐标的三个元素的数组开始：

```
double vecpos[3];
vecpos[0]= 0.0;
vecpos[1]= 0.0;
vecpos[2]= 0.0;
double radius= 5; 
```

现在，我想添加其他球体。这些额外的球体应该被理想地包装，尽可能密集。

我正在寻找一种算法，从这个单一的球体开始，以最密集的方式添加更多的球体。当然，球体可以不重叠（即，它们的行为像实心弹珠）。

到目前为止，我的尝试集中在添加更多球体（例如，在原始球体的左侧和右侧，因此在位置：

```
(10,0,0) 
(-10,0,0) 
```

然后在顶部和底部添加新的（在计算的位置：

```
(5, sqrt(3)/2 * 10, 0)
(-5, sqrt(10)/2 * 10, 0)
(5, sqrt(3)/2 * -10, 0)
(-5, sqrt(3)/2 * -10, 0) 
```

（创建中心的六边形）。到现在为止，我意识到我可以用一个简单的算法继续构建新的球体，该算法只是创建等距三角形，使用两个球体的中心来创建第三个球体（这就是我计算四个新球体的位置的方法球体以上）。

但是，进入第三维（即：在其他球体的顶部或下方添加新球体）是我卡住的地方，因为我看不到一种智能地编写代码来做到这一点的方法。

任何解决我的问题或比我的解决方案更简单的建议都非常受欢迎。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:56:28.153

一旦您将其中三个球体放在一个三角形中，您就可以在它们上面堆叠一个。新球体的 x 和 y 坐标将是下面三个的平均值，添加的高度将为 2 sqrt(6)R/3。所以如果下面三个是

A = (0, 0, 0)
B = (2R, 0, 0)
C = (R, sqrt(3)R, 0)

然后新的将是

D = (R, sqrt(3)R/3, 2 sqrt(6)R/3)

在第二层中拥有一个球体后，您可以通过上述方法在该层中添加更多球体。

**请注意，您可以选择选择哪个三角形...**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:10:35.333

其基础是[正则单纯形的概念](http://en.wikipedia.org/wiki/Simplex). 如果所有球体的半径相同，则只需生成越来越多的规则单纯形。在二维中，正则单纯形是等边三角形。在 3D 中，正则单纯形是等边四面体（如 wiki 页面所示）。请注意，一旦你有了一个三角形，你可以通过在三角形平面的两侧创建另一个点（在计算的距离处）来创建四面体。因此，您可以从该三角形中创建两个四面体。此时，该体积的每个三角形面也是一个等边三角形，通过在每个三角形面的外部创建一个新点，您可以为每个三角形创建一个新的四面体。您可以对创建的每个新面重复该过程（为您创建的每个四面体创建三个新面）。

# php - Ajax 和 PHP 发布的问题

> ID：14013532
> 
> 赞同：0
> 
> 时间：2012-12-23T18:29:08.013
> 
> 标签：php, javascript, mysql, ajax

嗨，我的 ajax 有问题并将其发布到 php。基本上，当我单击 aa:tag 时，我想删除 mysql 数据库中的特定内容。现在是这样的：

**Javascript**

```
$('a.deletecross').bind('click', function() {
var image_id = $(this).attr('id');
$.ajax({
type: "POST",
url: "ajax/delete_picture.php",
data: image_id,
cache: false,
success: function(html){
}
}); 
```

**PHP**

```
<?php 
  if(!logged_in()) {
    header('Location: /');
    exit();
}

    include '../init.php';

if(isset($_POST['image_id']) && image_exists($_POST['image_id']) ) {
   $image_id = $_POST['image_id'];
    delete_image($image_id);

}
?> 
```

我怎样才能做到这一点，以便 javascript funktion 调用 php 文件并删除我的图像？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:31:09.373

尝试

```
$.ajax({
    type: "POST",
    url: "ajax/delete_picture.php",
    data: {"image_id": image_id},
    cache: false,
    success: function(html){
    }
}); 
```

您必须将发布数据作为键/值对发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:35:37.360

### 代替：

```
data: image_id, 
```

和：

```
data: {"image_id": image_id}, 
```

查看[`$.ajax`](http://api.jquery.com/jQuery.ajax/)更多信息！

> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅`processData`阻止此自动处理的选项。对象必须是键/值对。如果 value 是一个数组，jQuery 会根据设置的值`traditional`（如下所述）用相同的键序列化多个值。

# java - JdbcTemplate：以字符串形式访问 MySQL VARBINARY 字段

> ID：14013534
> 
> 赞同：7
> 
> 时间：2012-12-23T18:29:27.130
> 
> 标签：java, mysql, spring, jdbc, jdbctemplate

我无法使用*JdbcTemplate将 MySQL 的***VARBINARY**字段作为字符串读取。我们将字符串缩写（“ABC”、“XYZ”、“LMN”等）存储为 VARBINARY（不要问我为什么）。奇怪的是，当我使用 Connection 类/PreparedStatement 路由以及普通的旧 ResultSets 与 SqlRowSet 时，读取字符串没有问题。也就是说，

 *此代码有效：

```
String sql = "select MY_VARBINARY_FIELD from MY_TABLE where KEY1=? and KEY2=?";
PreparedStatement stmt = connectionDev.prepareStatement(sql);
prepStmt1.setInt(1, key1);
prepStmt1.setInt(2, key2);
ResultSet rs = stmt.executeQuery();

while (rs.next()) {
    String s = rs.getString("MY_VARBINARY_FIELD");
    System.out.print(s + " ");
}

**Output:** AHI-1 DKFZp686J1653 FLJ14023 FLJ20069 JBTS3 ORF1 dJ71N10.1 
```

但是这段代码没有：

```
String sql = "select MY_VARBINARY_FIELD from MY_TABLE where KEY1=? and KEY2=?";
Object[] params = {key1, key2};
SqlRowSet rows = getJdbcTemplate().queryForRowSet(sql, params);

while (rows.next()) {
    String s = rows.getString("MY_VARBINARY_FIELD");
    System.out.print(s + " ");
}

**Output:** [B@3a329572 [B@4ef18d37 [B@546e3e5e [B@11c0b8a0 [B@399197b [B@3857dc15 [B@10320399 
```

为什么 SqlRowSet 和 ResultSet 为 VARBINARY 生成不同的字符串表示形式？以及如何使用 JdbcTemplate/SqlRowSet 获得“正确”表示？

谢谢！

**解决方案**

Mark Rotteveel（下）回答了这个问题。我得到了它的工作：

```
String sql = "select MY_VARBINARY from MY_TABLE where KEY=VALUE";

SqlRowSet rows = getJdbcTemplate().queryForRowSet(sql);

while (rows.next()) {
     byte[] varbinary = (byte[]) rows.getObject("MY_VARBINARY");
     System.out.println(new String(varbinary));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T10:43:57.800

`[B@3a329572`etc 是`toString()`字节数组上的 a的结果。A在 JDBC 中`VARBINARY`使用 a 表示。`byte[]`最有可能的是，当您直接在 上访问它时`PreparedStatement`，驱动程序`new String(getBytes(idx))`会这样做，而 JdbcTemplate 可能会`getObject(idx).toString()`改为使用`[B@3a329572`.

因此，要解决此问题，请`getBytes()`在 JdbcTemplate 上执行操作，然后自己将其转换为字符串，或者（更好）直接使用字节数组*或*将列数据类型更改为 VARCHAR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T00:29:31.007

如果我像下面这样使用它，那就太好了。

*   org.mybatis 3.2.8
*   mysql-connector-java 5.1.38 || mariadb-连接器-java
*   Java Bean，私有字符串 myVarbinary；

`my_varbinary(64)` 是 for `SessionID`/ `NameOfEnglis`h 这样我就不需要考虑`character_set`和编码/解码了。*

# binary - Xerces - 二进制数据

> ID：14013536
> 
> 赞同：2
> 
> 时间：2012-12-23T18:29:34.607
> 
> 标签：binary, xerces

我正在使用 Xerces 并尝试将包含二进制数据的 XML 文档读入 DOM：

```
<field1>
<data>
[binary data (multiline) here]
</data>
</field1> 
```

然后，我将每个`<data>`节点的内容作为字符串检索以进行预处理。阅读代码如下：

```
DOMImplementation *impl = DOMImplementationRegistry::getDOMImplementation(xc_DOMImplementation_Name);
DOMLSSerializer* serializer = ((DOMImplementationLS*)impl)->createLSSerializer();
std::wstring ws(serializer->writeToString(node)); 
```

这将返回`<data></data>`没有任何内容。我也尝试过使用 CDATA 块，但这没有帮助。将二进制数据交换为多行 ASCII 似乎工作正常。我希望字符串在遇到第一个二进制字符后立即被截断（可能导致返回空标签），但令人惊讶的是，删除空字符也不起作用并且`<data></data>`仍然返回。

我怎样才能在 Xerces 中做到这一点？我想避免通过读入 unsigned char* 并在那里执行操作来预处理整个文档。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:36:54.417

你最好对二进制数据进行[base64](http://en.wikipedia.org/wiki/Base64)编码。检查 apache 上的 commons-codec 库。

XML是为文本而生的，所以需要将二进制数据转成文本；[base64](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)编解码器用于此目的。

# arrays - Perl 将一个数组放入 2D 数组中的特定列

> ID：14013537
> 
> 赞同：4
> 
> 时间：2012-12-23T18:29:45.737
> 
> 标签：arrays, perl, multiple-columns

我有一个二维数组。我可以使用以下内容获得它的给定列：

```
my @column_zero=map {$_->[0]} @{$twod_array}; 
```

然后我就可以随意操作`@column_zero`了。

但是如何将它放回二维数组中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T18:35:31.303

也许最好获取对这些值的引用：

```
my @ref_to_column_zero = map { \($_->[0]) } @{$twod_array}; 
```

...所以你可以直接操作这些值：你只需要记住这个数组中存储了引用，所以它们应该被取消引用。例如：

```
for (@ref_to_column_zero) {
  ${ $_ } *=2;
} 
```

如果您更喜欢使用旧方法，您可以这样做：

```
for (0..$#column_zero) {
  $twod_array->[$_][0] = $column_zero[$_];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T21:07:08.133

TMTOWTDI 所以

```
do{my $i; $twod_array[$i++][0] = $_ for @column_zero;}; 
```

# haskell - 如何将多个具有类约束的非标准转换器组合成一个堆栈？

> ID：14013538
> 
> 赞同：4
> 
> 时间：2012-12-23T18:30:03.167
> 
> 标签：haskell, monad-transformers

这将是一个漫长的过程，因为我不确定我是否以正确的心态进行了讨论，所以我将在每一步中尽可能清楚地概述我的想法。我有两个尽可能少的代码片段，所以请随意使用它们。

我从单个转换器 FitStateT ma 开始，它只保存当时程序的状态并允许保存到磁盘：

```
data FitState = FitState
newtype FitStateT m a = FitStateT (StateT FitState m a) deriving (Monad, MonadTrans) 
```

在项目的某个时刻，我决定将 haskeline 添加到项目中，该项目有一些数据类型，如下所示：

```
-- Stuff from haskeline.  MonadException is something that haskeline requires for whatever reason.
class MonadIO m => MonadException m
newtype InputT m a = InputT (m a) deriving (Monad, MonadIO) 
```

所以我在主文件中的例程看起来像这样：

```
myMainRoutineFunc :: (MonadException m, MonadIO m) => FitStateT (InputT m) ()
myMainRoutineFunc = do
  myFitStateFunc
  lift $ myInputFunc
  return () 
```

不幸的是，随着我的程序增长，这有很多问题。主要问题是，对于我运行的每个输入函数，我都必须在运行之前解除。另一个问题是对于每个运行输入命令的函数，我需要对其进行 MonadException m 约束。此外，对于运行 fitstate 相关函数的任何函数，它都需要对其进行 MonadIO m 约束。

这是代码：[https ://gist.github.com/4364920](https://gist.github.com/4364920)

所以我决定创建一些类来使它们更好地结合在一起，并稍微清理一下类型。我的目标是能够写出这样的东西：

```
myMainRoutineFunc :: (MonadInput t m, MonadFitState t m) => t m ()
myMainRoutineFunc = do
  myFitStateFunc
  myInputFunc
  return () 
```

首先，我创建了一个 MonadInput 类来包装 InputT 类型，然后我自己的例程将成为此类的一个实例。

```
-- Stuff from haskeline.  MonadException is something that haskeline requires for whatever reason.
class MonadIO m => MonadException m
newtype InputT m a = InputT (m a) deriving (Monad, MonadIO)

-- So I add a new class MonadInput
class MonadException m => MonadInput t m where
  liftInput :: InputT m a -> t m a

instance MonadException m => MonadInput InputT m where
  liftInput = id 
```

我添加了 MonadException 约束，这样我就不必在每个与输入相关的函数上单独指定它。这需要添加多参数类型类和灵活实例，但生成的代码正是我想要的：

```
myInputFunc :: MonadInput t m => t m (Maybe String)
myInputFunc = liftInput $ undefined 
```

所以我对 FitState 做了同样的事情。我再次添加了 MonadIO 约束：

```
-- Stuff from my own transformer.  This requires that m be MonadIO because it needs to store state to disk
data FitState = FitState
newtype FitStateT m a = FitStateT (StateT FitState m a) deriving (Monad, MonadTrans, MonadIO)

class MonadIO m => MonadFitState t m where
  liftFitState :: FitStateT m a -> t m a

instance MonadIO m => MonadFitState FitStateT m where
  liftFitState = id 
```

这又完美地工作了。

```
myFitStateFunc :: MonadFitState t m => t m ()
myFitStateFunc = liftFitState $ undefined 
```

然后我将我的主例程包装到一个新类型包装器中，以便我可以创建这两个类的实例：

```
newtype Routine m a = Routine (FitStateT (InputT m) a)
  deriving (Monad, MonadIO) 
```

然后是 MonadInput 的一个实例：

```
instance MonadException m => MonadInput Routine m where
  liftInput = Routine . lift 
```

完美运行。现在对于 MonadFitState：

```
instance MonadIO m => MonadFitState Routine m where
  liftFitState = undefined
--  liftFitState = Routine -- This fails with an error. 
```

啊，废话，失败了。

```
Couldn't match type `m' with `InputT m'
  `m' is a rigid type variable bound by
      the instance declaration at Stack2.hs:43:18
Expected type: FitStateT m a -> Routine m a
  Actual type: FitStateT (InputT m) a -> Routine m a
In the expression: Routine
In an equation for `liftFitState': liftFitState = Routine 
```

而且我不知道该怎么做才能完成这项工作。我真的不明白这个错误。这是否意味着我必须让 FitStateT 成为 MonadInput 的实例？这看起来很奇怪，这是两个完全不同的模块，没有任何共同之处。任何帮助，将不胜感激。有没有更好的方法来获得我正在寻找的东西？

已完成的错误代码：[https ://gist.github.com/4365046](https://gist.github.com/4365046)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:03:17.847

好吧，首先，这是 的类型`liftFitState`：

```
liftFitState :: MonadFitState t m => FitStateT m a -> t m a 
```

这是类型`Routine`：

```
Routine :: FitStateT (InputT m) a -> Routine m a 
```

您的`liftFitState`函数期望从 转换单个包装器类型`FitStateT`，但`Routine`它包装了两层转换器。所以类型不会匹配。

除此之外，我真的怀疑你的做法是错误的。

首先，如果您正在编写应用程序，而不是库，则更常见的做法是将您需要的所有 monad 转换器简单地包装在一个大堆栈中并在任何地方使用它。通常，将其保留为变压器的唯一原因是在有限数量的基本单子之间进行切换，例如`Identity`、`IO`、`ST`或`STM`。但是，如果您需要变压器堆栈的所有东西都需要 IO 并且您不打算使用`ST`或`STM`.

在您的情况下，最简单的方法显然看起来像这样：

```
newtype App a = App { getApp :: StateT FitState (InputT IO) a } 
```

...然后派生或手动实现`MonadFoo`您想要的类（例如`MonadIO`），并在任何地方简单地使用该堆栈。

这样做的好处是，以后如果您需要以添加 Haskeline 的方式添加另一个转换器 - 决定`ReaderT`为某种全局数据资源添加一个，比如说 - 你可以简单地将它添加到包装的堆栈中，当前使用堆栈的所有代码甚至都不知道其中的区别。

* * *

另一方面，如果您真的想采用当前的方法，那么您将 monad 转换器提升习语弄错了。基本的提升操作应该来自`MonadTrans`您已经派生的 。`MonadFoo`类通常用于为每个 monad 提供基本操作，例如`get`和`put`for `MonadState`。

您似乎在尝试模仿`liftIO`，这是一个“一路提升”操作，`lift`足以从堆栈底部 - -`IO`到实际的 monad。对于可以出现在堆栈中任何位置的转换器，这实际上没有意义。

如果您确实想拥有自己的`MonadFoo`课程，我建议您查看类似课程的源代码`MonadState`并了解它们的工作方式，然后遵循相同的模式。

# php - PHP CLI 回调

> ID：14013545
> 
> 赞同：1
> 
> 时间：2012-12-23T18:30:48.977
> 
> 标签：php

当 PHP 正常运行时，我只是通过 PHP 标头刷新浏览器，javascript 重新运行。

但我想在 CLI 模式下做这样的事情。我当前的爬虫脚本需要很长时间才能执行，并且可能超过脚本超时。

然后想再次回调脚本并使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:35:49.337

最简单的方法是使用

```
require($_SERVER['PHP_SELF']); 
```

但是我真的不明白你为什么要这样做......

# assembly - 分支预测

> ID：14013553
> 
> 赞同：3
> 
> 时间：2012-12-23T18:31:55.490
> 
> 标签：assembly, micro-optimization

> **可能重复：**
> [是否可以告诉分支预测器跟随分支的可能性有多大？](https://stackoverflow.com/questions/1851299/is-it-possible-to-tell-the-branch-predictor-how-likely-it-is-to-follow-the-branc)

因此，如果分支预测发挥了如此重要的作用（“分支预测器在许多现代流水线微处理器架构（如 x86）中实现高效性能方面发挥着关键作用。” ^([wiki](http://en.wikipedia.org/wiki/Branch_predictor))），那么必须有一种优化和帮助的方法是有道理的对的？

我会直截了当地问我的问题：
**你能告诉分支预测器你最有可能采取的路线吗？**

我举个例子：

如果这是用户第一次运行它，我的程序会在每次加载时检查。很可能应该缓存的分支是标记为“这不是第一次”的分支。

在这个例子中，这没什么大不了的，也许算法可以找出要走的路线，但是在有很多分支的复杂应用程序中，我不太确定算法会在 10 分中获得 10 分。

我们能以某种方式优化它吗？也许标记一个分支进行缓存？
*顺便说一句，我要求的是教育目的，也许有一天会要求时间紧迫的程序。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:47:47.757

> 这是给 C 的。我要的是 ASM

这意味着您必须自己实现 __builtin_expect 的语义。不难，就是尴尬。如果分支预测器没有该分支的历史记录，那么它将假定在分支向后时采用该分支，而在向前时不采用该分支。

因此，您可能必须重组代码，在分支指令中使用相反的条件并移动代码以适应它。带有条件后向分支的无条件前向跳转很常见，例如 C 编译器实现 for() 循环的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T19:44:00.787

“如果需要分支提示，可以在分支指令之前添加以下指令前缀以更改静态预测器的行为方式：0x3E - 静态预测分支为采用 0x2E - 静态预测分支为未采用”

[http://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts](http://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T18:46:32.490

最简单的启发式方法是使用匹配最常见路径的分支指令。例如，如果您正在编写循环代码，则通常最好让分支指令遵循循环路径而不是退出条件。目标是使用最常评估为真的分支指令。

如果你选择了完全错误的指令，假设你编写了一个几乎总是立即退出的循环，处理器可能会缓存这个分支的感觉是向后的，并调整它的预测。不过，这只可能发生在大量使用的代码上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T19:11:45.687

一些重要的装配分支预测优化，来源：wiki

当预测采用分支时，取指令会出现一个周期的停顿。因此，可以参考结构化代码，以便最可能的代码路径是不采用分支的路径。

无条件分支可能被错误预测，并且跟随分支的加载指令可能被解码并导致缓存访问。避免在分支之后放置加载指令，除非您打算让 CPU 预取它们引用的地址。

尽管指令是成对解码的，但分支预测器每个周期只能预测一个分支目标。如果您有一个条件分支紧跟另一个分支，并且很可能会采用第一个分支，请在分支之间放置一个无操作指令，以防止对第二个分支进行解码和预测。如果不经常采用第一个分支，则插入 NOP 是有害的。

# jakarta-ee - 学习 Java EE，我需要 GlassFish 还是 Tomcat HTTPd 足够？

> ID：14013560
> 
> 赞同：1
> 
> 时间：2012-12-23T18:32:58.983
> 
> 标签：jakarta-ee, glassfish, tomcat7, osx-mountain-lion

我正在学习`Java EE`。我是新手，我正在关注邀请我安装的旧视频课程`Tomcat server`。

我的问题是，我需要继续使用 Tomcat 吗？还是安装替代品？GlassFish 是像 Tomcat 一样的 HTTPd 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:59:05.233

Tomcat 不是成熟的应用服务器，它“只是”一个 servlet 容器。使用 jboss 7 或最近的 glassfish 并节省您的精力。还有 TomEE，它基本上是一个带有所需 Java EE 库的 tomcat，以符合 Web 配置文件。

# azure - 自动重启 - 角色报告自己不健康

> ID：14013563
> 
> 赞同：0
> 
> 时间：2012-12-23T18:33:26.877
> 
> 标签：azure, azure-worker-roles

我有一个从队列中读取的 azure worker 角色。有时，我的实例会报告自己不健康。

我知道这是由于未处理的异常而发生的，我正在尝试修复这些异常（这是另一回事）。

我希望该角色在任何实例进入这种不健康状态时自动重启它们。这将使我的实例（大约五个）一直运行。

我有逻辑将任何已出队超过五次的项目放入“毒药”队列中，以供我稍后查看。这可确保辅助角色实例不会卡在同一个队列项上。

**我的问题是：如何自动重启不健康的工作角色？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:29:06.977

您可以通过以下任一方式让 Azure Fabric 控制器重新启动您的辅助角色：

1.  抛出未处理的异常，或
2.  从 Run 方法返回

在您上面描述的情况下，重新启动应该已经自动发生。

# silverlight - 当控件在特定的ui元素上时如何知道鼠标或触摸是否被释放

> ID：14013567
> 
> 赞同：2
> 
> 时间：2012-12-23T18:34:09.843
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1, border, windows-phone-8

我有一块图像（这些图像嵌入在边框控件中），它们排列成 4 行和 4 列。当用户从左到右或从右到左或对角线从一个图像滑动到另一个图像时，我想知道所有这些图像遍历了什么？

我找到了 MouseEnter 和 MouseLeave 事件。但是如果用户触摸 image1（在 row1 中）并将滑动拖动到 image4 离开鼠标，我怎么知道用户是否完成了滑动？因为用户在将鼠标离开 image4 后可能会触摸屏幕上的任何位置。

捕获那些遍历图像的最佳方法是什么？列表还是字典？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:32:13.570

根据这篇文章...... [http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleftbuttondown(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleftbuttondown(v=vs.95).aspx)

**您可以使用MouseLeftButtonDown**事件检测 MOUSE SWIPE STARTED IN 的哪个平铺/正方形

然后，如果用户如文章所述在不同的对象上滑动鼠标......

**LeftMouseButtonUp**事件将执行，尽管 LeftMouseButtonDown 不会为同一个图块执行，因为实际向下事件发生在另一个正方形/图块/图像中！

因此，如果您有一个简单的 4x4 矩阵/数组来保存 SWIPE YES/MO 值...就像 1 或 yes 鼠标通过此元素滑动而 0 NO 鼠标从未进入此图块/图像/元素...那么您应该没事的...

并使用...的古老规则。

如果 X1 > X2 则鼠标移动是从右到左（向左移动）

如果 X2 > X1 则鼠标从左向右移动（向右移动）

如果 Y1 > Y2 则鼠标移动从下到上（向上移动）

如果 Y2 > Y1 则鼠标移动是从上到下（向下移动）

并混合和匹配对角线移动/滑动的这些规则......

其中 X1,Y1 是 MouseDown 屏幕值，X2,Y2 是 MouseUp 屏幕值

# 编辑

根据备注部分的文字...

# 引用

当鼠标指针位于 UIElement 上方时按下鼠标左键（或当触控笔的笔尖接触 Tablet PC 时）会引发 MouseLeftButtonDown 事件。当释放鼠标按钮（或触控笔的笔尖）时，会引发 MouseLeftButtonUp 事件。但是，如果在释放按钮时将鼠标指针（或触控笔）移到另一个对象上，则接收 MouseLeftButtonDown 事件的 UIElement 将仅在该 UI 元素已显式捕获鼠标的情况下接收 MouseLeftButtonUp 事件。没有离散的双击事件。双击由两个 MouseLeftButtonDown 和 MouseLeftButtonUp 事件序列组成。可以使用事件数据 (ClickCount) 捕获点击计数。

使用基于 MouseButtonEventHandler 的处理程序来处理此事件。有关如何处理鼠标事件的更多信息，请参阅鼠标支持。

鼠标捕获是一个概念，即使鼠标指针（或触控笔）不再位于对象的边界区域上，对象也可以继续接收鼠标事件。为了请求鼠标捕获，鼠标左键（或触控笔）必须处于按下（向下）状态。因此，调用 CaptureMouse 的代码中的一个共同点是来自特定 UIElement 的 MouseLeftButtonDown 处理程序。有关鼠标捕获及其有用场景的更多信息，请参阅鼠标支持或如何：在 UI 布局中拖放对象。

# 报价结束

因此，与我的第一个解决方案相反，抱歉，我一定是误读了这些评论，尽管以 MOUSE CAPTURE 开头的第三段是一个概念....调用 mouseevent 意味着 MOUSEDOWN 事件，这将来自 ORIGINAL 控件，因此假设您从 control1 开始滑动，并且 Control1 MouseLeftButtonDown 事件触发，那么您需要捕获鼠标（有关鼠标捕获及其场景的更多信息很有用，请参阅鼠标支持或如何：在 UI 布局中拖放对象）然后如您所说，您在 control2 上滑动，当您的手指/指针/触控笔超出 control3 时，您释放鼠标，然后将触发原始捕获的 mouseup 事件，用于捕获鼠标的 CONTROL（在本例中为 control1 ) 并使用屏幕 X/Y 位置和您的控件 X/Y/Width/HEIGHT 属性，您应该能够评估 OVER 释放鼠标的控件。

如果我有更多的时间，我会更仔细地阅读它并且避免给你提供几乎正确的信息而不是正确的信息，我建议你仔细阅读这篇文章并按照鼠标捕获过程进行尝试，不要忘记当即使它可能在另一个控件上，您也可以释放鼠标，对于捕获鼠标的控件，将触发 ACTUAL mouseup 事件。

也为我之前的错误感到抱歉-这就是您跳过阅读时发生的情况。

# android - 截取一个 android 布局的屏幕截图

> ID：14013568
> 
> 赞同：0
> 
> 时间：2012-12-23T18:34:11.730
> 
> 标签：android, android-layout

我有一个包含几个图像的布局，我想将那里出现的所有内容作为图像（位图或可绘制......即使是 png 或 jpg 之类的东西也可以）。以后可以分享。我试图在这里找到一个解决方案，我在[这里](https://stackoverflow.com/questions/9868604/how-do-i-take-a-screenshot-of-an-android-layout)找到了一些东西但是通过这种平静的代码，我得到了屏幕中所有内容的屏幕截图，我只需要获取布局中出现的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:53:39.480

```
 View view = activity.getWindow().getDecorView();
    view.setDrawingCacheEnabled(true);
    view.buildDrawingCache();
    Bitmap b1 = view.getDrawingCache();
    Rect frame = new Rect();
    activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);
    int statusBarHeight = frame.top;
    int width = activity.getWindowManager().getDefaultDisplay().getWidth();
    int height = activity.getWindowManager().getDefaultDisplay().getHeight();

    Bitmap b = Bitmap.createBitmap(b1, 0, statusBarHeight, width, height  - statusBarHeight); 
```

刚从这个链接得到这个代码。[我](https://stackoverflow.com/questions/10296711/androidtake-screenshot-and-share-it/10296881#10296881)想昨晚你是否可以调整高度和宽度。它可能会有所帮助，但不确定。

# c++ - 根据不同功能排序的 std::vectors 的交集

> ID：14013570
> 
> 赞同：1
> 
> 时间：2012-12-23T18:34:35.797
> 
> 标签：c++, stl, vector, intersection

我有整数 v1、v2、v3、... v10 的 std::vectors。每个都有几十万个元素。每个向量按不同的因子排序（因此有 10 个因子函数 f1、f2、... f10）。因此，尽管它们是自行排序的，但相对于彼此而言，它们是未排序的。

我想找到这 10 个向量的交集，并且我想根据其中一个因素对输出进行排序。例如，结果应该按照 f1 排序。因此，当我将这 10 个向量与因子函数一起传递给该交叉排序函数时，我将得到一个输出向量，其中仅包含所有向量中存在的元素，并根据 f1 排序。执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:40:33.823

只用`std::set_intersection()`一两次。我认为您需要交替使用两个临时向量来存储结果。如果您只想对每个向量进行一次传递，则只需使用它的通用版本，可能会保留当前最小值的优先级队列。

# python - What is the best library for reading ID3 tags?

> ID：14013576
> 
> 赞同：3
> 
> 时间：2012-12-23T18:35:08.420
> 
> 标签：python, mp3, id3

What library is presently the most thorough and capable ID3 tag reading library available? Preferably something I can compile as a shared library and wrap with Python's `ctypes` library, or even a Python package.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T18:39:26.570

I've had a good time using [mutagen](http://code.google.com/p/mutagen/) (tutorial: [http://code.google.com/p/mutagen/wiki/Tutorial](http://code.google.com/p/mutagen/wiki/Tutorial)) - it's quite simple to get the info. Note that you should use the `Easy ID3` option.

```
>>> from glob import glob
>>> from mutagen.easyid3 import EasyID3
>>> for filename in glob('/home/jon/Downloads/*.mp3'):
    mp3info = EasyID3(filename)
    print mp3info.items()

[('artist', [u"James O'Brien's Mystery Hour"]), ('title', [u"James O'Brien's Mystery Hour - 7 Dec 12"])] 
```

# java - 当 JUnit 4 使用参数化运行器超时时添加更多信息

> ID：14013578
> 
> 赞同：5
> 
> 时间：2012-12-23T18:35:31.887
> 
> 标签：java, unit-testing, junit, junit4, parameterized-unit-test

我正在使用`@RunWith(value = Parameterized.class)`. 这工作正常，没有问题。但是，当我的 34 个测试中的任何一个超时时，我只会收到消息`java.lang.Exception: test timed out after 15000 milliseconds`。我希望它也显示测试的参数。

我什至尝试像下面的代码那样做（我知道在大多数情况下这是一个可怕的解决方案，我只是想看看我是否可以随时显示消息），但这不起作用，它仍然导致上面的消息。

```
private String parameter;

@Test(timeout = 15000)
public void solveAll() {
    try {
        // ... do something that might take a long time
    }
    catch (Throwable e) {
        Assert.fail(this.parameter + " failed! Because of " + e.getMessage());
    }
} 
```

如何让 JUnit 也显示`this.parameter`测试结果超时？

这是一个非常简单的示例测试类，它显示了这个问题：

```
public class ShowMyMessageTest {
    @Test(timeout=1000)
    public void test() {
        try {
            Thread.sleep(3000);
        }
        catch (Throwable e) {
            Assert.fail("Timeout reached with value 42");
        }
    }
} 
```

有了这个`ShowMyMessageTest`，我有时会得到预期的“超时值达到 42”，有时我只会得到“java.lang.Exception：1000 毫秒后测试超时”。在这种情况下，我希望始终获得“超时值 42”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:25:54.197

这有点小技巧，但您可以使用[@After](http://junit.sourceforge.net/javadoc/org/junit/After.html)检查参数的状态：

```
@RunWith(Parameterized.class) public class FooTest {
  private boolean flag = true;
  private String param;

  public FooTest(String param) {
    this.param = param;
  }

  @Test(timeout = 1000) public void test() {
    while(true == flag);
    param = null;
  }

  @After public void after() {
    Assert.assertNull("Problem:" + param, param);
  }

  @Parameters public static Collection<Object[]> params() {
    Object[][] params = { { "foo" } };
    return Arrays.asList(params);
  }
} 
```

另一种方法是编写自己的[runner](http://junit.sourceforge.net/javadoc/org/junit/runners/package-summary.html)。

# html - CSS 子选择器性能与类膨胀

> ID：14013585
> 
> 赞同：18
> 
> 时间：2012-12-23T18:36:11.787
> 
> 标签：html, css, performance, css-selectors

我正在尝试学习编写更高效的 CSS，特别是当我正在处理一个需要快速渲染的相当复杂的网站时。

我习惯在我的 HTML/CSS 中有很多这样的内容（主要是因为我喜欢可读性）：

```
.spotlight {}
.spotlight ul {}
.spotlight ul li {}
.spotlight ul li a {color: #333;}

<div class="spotlight">
  <ul>
    <li><a href="">link</a></li>
    <li><a href="">link</a></li>
    <li><a href="">link</a></li>
  </ul>
</div> 
```

我现在明白浏览器从右到左运行 CSS 规则匹配过程，这意味着`<a>`上面最后一个 CSS 规则中的元素会首先匹配页面上的每个链接，从而导致性能损失。

因此，据我所知，浏览器友好的解决方案将更加具体，并使用例如：

```
.spotlight {}
.spotlight-link {color: #333;}

    <div class="spotlight">
      <ul>
        <li><a class="spotlight-link" href="">link</a></li>
        <li><a class="spotlight-link" href="">link</a></li>
        <li><a class="spotlight-link" href="">link</a></li>
      </ul>
    </div> 
```

（假设我尽可能使用继承，但通常仍需要对树下的最后一个元素进行特定控制）

让我怀疑的是：在整个页面中的元素上打印类名所产生的所有额外 HTML 膨胀是否会抵消避免嵌套 CSS 子选择器所带来的性能提升？我习惯于尝试编写更少的 HTML，而这种做法与它背道而驰。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T18:41:24.343

你必须权衡一下。为每个锚点添加一个类是荒谬的，HTML 中的额外膨胀将大大抵消节省的渲染时间（这将是蜜蜂腿的 1/10,000）。更不用说你的代码维护起来有多难了。

例如，您只需要停止使用*不必要的昂贵*选择器

```
.spotlight ul li a 
```

可以写成

```
.spotlight a 
```

如果您继续在 HTML 中的相同元素上指定单个类（如您的第二个示例），则最好使用标签选择器。

您还必须权衡您的时间与浏览器时间。在每次加载页面时节省几纳秒的时间需要花费多少？老实说，这并不*值得*。

此外，使您的 CSS 结构与您的 HTML 结构相匹配会否定 CSS 的意义——如果 HTML 发生更改，您需要更改您的 CSS。所以你*总是*希望你的选择器尽可能不具体。

但这里没有正确或错误的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-06T11:30:08.440

我认为最好的权衡是`>`对重复多次的元素使用子组合器，并在事情开始变得过于嵌套时使用类。

[弯曲 BEM 规则](http://markho.st/bending-the-rules-of-bem)

考虑到我们的选择，我认为上述文章达到了完美的平衡。

使用 SCSS，现在应该是强制性的，我的导航菜单通常看起来像这样（这绝对是我会嵌套最多的东西）：

```
.header__nav {
  > ul {
    > li {
      > a {}
    }
  }
} 
```

# ios - iOS 6：图片的动态位置，带有 UISlider

> ID：14013589
> 
> 赞同：0
> 
> 时间：2012-12-23T18:36:52.917
> 
> 标签：ios, image, dynamic, uislider

我正在开发目标 C 中的应用程序，但我遇到了问题。

我想在 y 轴上使用 UISlider 移动图像，以及图像动态值。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:36:09.360

1.  创建一个 UISlider（在您的 ViewController .h 文件中创建 IBOulet，如果使用 IB 或 StoryBoard，则拖动到 UISlider）

@property (nonatomic, strong) IBOutlet UISlider *theSlider;

1.  创建 imageView，你想用滑块移动（在你的 ViewController .h 文件中创建 IBOUlet，如果使用 IB 或 StoryBoard，则拖动到 UIImageView）

    @property (nonatomic, strong) IBOutlet UIImageView *theImage;

2.  现在您必须为 UISlider 创建一个动作，以检测滑块值是否已更改（在您的 ViewController .h 文件中创建 IBAction，如果使用 IB 或 StoryBoard 将动作拖到 UISlider 并将选项设置为“值已更改”）

3.  合成 .m 文件中的属性 (@synthesize theImage, theSlider;)

4.  在 fx 中设置滑块的最大值和最小值。您的 .m 文件中的 viewDidload：（ theSlider.maximumValue = 480; theSlider.minimumValue = -5;）

5.  在你的“sliderValueChanged:(id)sender”动作中做这样的事情

    theImage.center = CGPointMake(theImage.center.x, [theSlider value]);

您必须根据需要调整滑块值:)

# animation - Kendo Grid - 行展开动画

> ID：14013596
> 
> 赞同：1
> 
> 时间：2012-12-23T18:37:18.373
> 
> 标签：animation, grid, row, kendo-ui, expand

我正在使用剑道网格。我想添加一个向下滑动的动画 - 当我点击网格中的一行时，它会随着动画展开（展开发生在 grid.ExpandRow 函数 - 剑道内部）。

我认为我需要关于 k-detail-row 元素的动画。但我仍然找不到合适的地方/方法来做到这一点。

任何人都已经这样做了，并且可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:04:25.690

我有同样的问题，虽然这是一个旧帖子，但我认为有人可能需要它。

不幸的是，剑道还不支持这个功能，但是有一个解决方案。

Kendo 使用 jquery toggle() 来显示和隐藏详细信息行，因此通过在 jQuery 上执行条件覆盖，您可以插入动画。

```
jQuery(function($) {
    var _oldShow = $.fn.show;
    var _oldHide = $.fn.hide;

    $.fn.show = function(speed, oldCallback) {
        return $(this).each(function(index, item) {
        var obj = $(item);
        _oldShow.apply(obj, [speed, oldCallback]);

        if (obj.hasClass("k-detail-row")) {
            obj.find(".k-grid.k-widget").each(function () {
                var grid = $(this);
                grid.slideDown(300);

            });
        }
    });
}

$.fn.hide = function (speed, oldCallback) {
    return $(this).each(function () {
        var obj = $(this);

        if (obj.hasClass("k-detail-row")) {
            obj.find(".k-grid.k-widget").each(function () {
                $(this).slideUp(300, function () { _oldHide.apply(obj, [speed, oldCallback]); });
            });
        } else {
            _oldHide.apply(obj, [speed, oldCallback]);
        }
    });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T21:23:06.753

不幸的是，表格行不支持动画。这是一个相关的问题：[如何在表格行上使用 slideDown（或显示）功能？](https://stackoverflow.com/questions/467336/jquery-how-to-use-slidedown-or-show-function-on-a-table-row)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T12:58:25.637

我今天遇到了这个问题，并设法使用网格的 detailExpand 函数来解决它。然后，您可以使用 Kendo Fx 向下滑动效果使详细信息行向下滑动。例如：

```
detailExpand: function (e) {
    var detailRow = e.detailRow;
    setTimeout(function () {
        kendo.fx(detailRow).slideIn("down").duration(375).play();
    }, 0);
} 
```

欲了解更多信息，请查看：

[详细展开文档](http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#events-detailExpand)

[Kendo Fx 文档](http://docs.telerik.com/kendo-ui/framework/fx/overview)

# python - 0^n1^n2^n的Python图灵机

> ID：14013597
> 
> 赞同：1
> 
> 时间：2012-12-23T18:37:26.953
> 
> 标签：python, turing-machines

我得到了指示“创建一个图灵机来识别形式为 0^n1^n2^n 的字符串。这意味着如果字符串的形式正确，图灵机就会停在空白磁带上，而如果不是它以正确的形式停在非空白单元格上”。

我知道图灵机如何工作的基础知识，但不知道如何在 Python 中实现它。我在网上找到的任何示例似乎都非常复杂，包含多个类和所有内容。我认为这对我的应用程序来说不是完全必要或预期的。

我为这个问题找到了以下伪代码：

```
On input string w
   while there are unmarked 0s, do
      Mark the left most 0
      Scan right to reach the leftmost unmarked 1;
         if there is no such 1 then crash
      Mark the leftmost 1
      Scan right to reach the leftmost unmarked 2;
         if there is no such 2 then crash
      Mark the leftmost 2
   done
   Check to see that there are no unmarked 1s or 2s;
      if there are then crash
   accept 
```

然而，在我看来，实现这个精确的伪代码并不会真正成为一台合法的图灵机。我会以错误的方式解决这个问题吗？任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:41:47.657

那个伪代码对我来说似乎是正确的，如果你向我们展示了一个不太复杂的问题可以接受的例子，它可能会有所帮助，我不知道在 python 的 TM 中究竟接受了什么。

# php - 什么是正确的 PDO 语法

> ID：14013599
> 
> 赞同：-4
> 
> 时间：2012-12-23T18:37:46.773
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [如何在 PHP 中使用 LIKE 语句创建 PDO 参数化查询？](https://stackoverflow.com/questions/583336/how-do-i-create-a-pdo-parameterized-query-with-a-like-statement-in-php)

我的sql语句最初是这样的：

```
"SELECT companyname, axiscategory 
FROM axispl WHERE companyname 
LIKE '$searchterm%' LIMIT 11" 
```

现在我想将其更改为 PDO 格式。我怀疑我在搜索词中使用的通配符（任何以...开头的东西）。如何以 PDO 形式实现这一目标？

我将代码写到 WHERE。然后当谈到写 companyname = : ...我被卡住了。

```
$query = $db->prepare("SELECT companyname, axiscategory 
FROM axispl WHERE companyname 
LIKE '$searchterm%' LIMIT 11"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:41:31.710

准备好的语句很有用，因为它们将查询和参数分开。现在可以忘记串联。

```
$query = $db->prepare("SELECT companyname, axiscategory 
    FROM axispl WHERE companyname 
    LIKE :searchterm LIMIT 11");

$query->bindValue('searchterm',$searchterm.'%');
$query->execute();
//then to fetch the results
$query->fetch(PDO::FETCH_ASSOC); 
```

这里我使用了命名参数，因为它们更具可读性，但您也可以使用这样的索引参数：

```
$query = $db->prepare("SELECT companyname, axiscategory 
    FROM axispl WHERE companyname 
    LIKE ? LIMIT 11");

$query->bindValue(1,$searchterm.'%');
$query->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:40:27.687

```
$query = $db->prepare("SELECT companyname, axiscategory
                       FROM axispl
                       WHERE companyname LIKE ?
                       LIMIT 11"); 
```

然后你执行它使用`$query->execute(array($searchterm.'%'));`

# java - 来自不同线程的多个 MySQL 连接

> ID：14013600
> 
> 赞同：2
> 
> 时间：2012-12-23T18:38:17.663
> 
> 标签：java, mysql, multithreading

我正在开发一个多线程应用程序，当有人连接到我的套接字时创建线程。每个连接创建一个新线程，每个线程使用 JDBC 对 MySQL 数据库进行查询。我想知道从我的不同线程到 MySQL 的多个连接是否会导致我的应用程序出现任何问题或对 MySQL 数据产生负面影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T19:40:15.623

相反，您应该始终以多线程方式连接到数据库。或者真的，一种汇集时尚！

考虑当您的应用程序成为全球热门并且您每分钟获得 10 万次点击的情况，那么您将拥有大量线程 - 即每个连接一个，这将破坏您的应用程序、您的应用程序服务器和您的数据库.. . :-)

相反，您可能会实现一个数据库连接池，您的线程可以从中借用并在完成后返回。有几个很好的开源项目可供选择，[C3PO](http://sourceforge.net/projects/c3p0/)和[Commons DBCP](http://commons.apache.org/dbcp/)只是其中两个。

希望有帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:55:48.473

拥有比实际 CPU/硬件线程数更多的线程并没有什么好处。如果有的话，更多的线程会产生更多的开销，这将有效地减慢您的应用程序的速度。

线程确实提供了相对简单的方法来做更多相同的事情，但过了一段时间它开始碰壁，人们不得不开始考虑其他潜在的解决方案。

如果您希望您的应用程序具有可扩展性，现在是开始考虑如何横向扩展您的应用程序的好时机，即多个系统共享负载的分布式解决方案。

与其在单个系统上使用更多线程，不如考虑分布在 N 个系统上的工作队列和工作线程。

# ruby - 为 Sinatra API 编写测试的最佳实践是什么？

> ID：14013601
> 
> 赞同：3
> 
> 时间：2012-12-23T18:38:32.123
> 
> 标签：ruby, rspec, tdd, sinatra, bdd

具体来说，我想知道如何将单元测试和验收测试分开。

单元测试看起来像：

```
it 'creates bar' do
  expect {
    post '/foo/bar'
  }.to change{ Bar.count }.by 1
end 
```

这是单元测试和验收测试的混合。但我不明白如何将它们分开。

API`app/bar.rb`文件：

```
post '/foo/bar' do
  Bar.create
  status 202
end 
```

此外，任何相关链接表示赞赏。

# ruby - Sinatra 将变量传递给 erb

> ID：14013604
> 
> 赞同：5
> 
> 时间：2012-12-23T18:38:38.863
> 
> 标签：ruby, sinatra

我有两种方法可以做到这一点。

一是使用`:locals => {....}`，二是使用`@var_name`。我只是想知道哪个更好/更喜欢？我在任何地方都找不到这个问题的答案。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T18:48:56.280

我没有经验，但可能您使用 编写的代码较少`@var_name`，但是如果假设您有 2 个操作使用不同的对象呈现相同的视图，假设一个使用 foo，另一个使用 bar，您可能想要使用本地人。

```
def foos
  foos = Foo.all
  erb :something, locals: {list: foos} 
end

def foos
  bars = Foo.all
  erb :something, locals: {list: bars} 
end 
```

而不是@vars，您必须使用不能真正代表内部内容的相同var_name。比如：这是什么清单？？

```
def bars
  @list = Bar.all
  erb :something
end

def foos
  @list = Foo.all
  erb :something 
end 
```

或者也许你应该对@vars 很好，因为大多数时候你在渲染相同类型的对象时重用一个视图，例如：

```
def foos
  @foos = Foo.all
  erb :something
end

def bar_foos
  @foos = Foo.where(bar: true)
  erb :something 
end 
```

因此，您可能只想在渲染部分内容时使用本地变量，而大部分时间都在不同的上下文中使用。就像为 @new_bar 和现有 @bar 渲染时的表单一样。只是一个例子。或者例如一个@current_user 或者一个简单的@user

# javascript - 只在台式电脑上执行 JS 功能（视差插件）

> ID：14013608
> 
> 赞同：3
> 
> 时间：2012-12-23T18:39:15.930
> 
> 标签：javascript, jquery, html, css, parallax

有什么方法可以限制 javascript 的执行（if 语句），使其仅适用于台式计算机，当用户使用移动/平板设备时，它需要关闭。下面是代码，但显然它适用于文档准备就绪时的任何设备。

```
<script type="text/javascript">
$(document).ready(function(){
    main_parallax();
    main_scrolling();
    sauces_slider();
});    
</script> 
```

在移动/平板设备上仅`main_parallax();`应省略该功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T18:52:33.910

一种方法是使用**用户代理**，您可以这样做：

```
$(document).ready(function(){
    if (/Android|BlackBerry|iPhone|iPad|iPod|webOS/i.test(navigator.userAgent) === false) {
        main_parallax(); //Run main_parallax() not a mobile device
    }​

    main_scrolling();
    sauces_slider();
}); 
```

我建议改用**特征检测**，尝试查看：[Modernizr](http://modernizr.com/)

# google-maps - Google Maps AutoComplete API - 开始和目的地的监听器

> ID：14013609
> 
> 赞同：0
> 
> 时间：2012-12-23T18:39:18.847
> 
> 标签：google-maps, autocomplete, textfield, addeventlistener

我正在开发一个谷歌地图应用程序并尝试实现自动完成 API。它适用于 1 个文本字段。

是否可以在不复制代码的情况下为目标字段添加相同的内容？[我在文档https://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)中添加了监听 器

这是更改事件的侦听器，但我不知道是否可以将其绑定到 2 个文本字段。

```
google.maps.event.addListener(autocompleteStart, 'place_changed', function() {
   //...
)}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:38:57.680

您可以多次使用该函数，一个简单的实现：

```
(function(o,e,f){
  for(var i=0;i<o.length;++i){
    google.maps.event.addListener(o[i],e,f);
  }})([autocompleteStart,autocompleteEnd], //array with autocomplete-objects
       'place_changed',                    //event-type
       function(){/* do something*/}       //handler-function
     ); 
```

# php - 在 PHP 中处理用户数据

> ID：14013617
> 
> 赞同：0
> 
> 时间：2012-12-23T18:40:24.697
> 
> 标签：php

> **可能重复：**
> [每个页面加载时将其存储在 Session 或 Query DB 中？](https://stackoverflow.com/questions/5121987/store-it-in-session-or-query-db-each-page-load)

哪个更有效/更安全，将查询的用户数据存储为会话或在每个页面加载保存结果时重新查询数据库到全局变量，因此没有任何内容保存为会话？

我很好奇，因为前者是我通常的做法，而后者是 WP 的做法。这不是比较，而只是 Web 应用程序的用例场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:49:02.007

这是我的工作：启动 PHP，过滤外部数据。运行查询以创建构建网页或响应文档所需的变量。使用这些变量并编写输出。

我会避免使用全局变量。有一天你会和其他程序员一起做一个项目。全局变量在那种环境下很麻烦。

存储在会话中的信息可以（并且确实）过期。如果您真的不需要会话中的数据，请返回数据库。对于客户可能需要很长时间才能决定购买的购物车信息来说尤其如此。如果购物车在会话中，您的网站可能会忘记他们想要购买的东西！

# c - 在数组上使用 malloc

> ID：14013620
> 
> 赞同：5
> 
> 时间：2012-12-23T18:40:31.063
> 
> 标签：c, arrays, malloc, dynamic-memory-allocation

可能是在 SO 上找到的类似问题。但是，我没有发现，这是场景

**情况1**

```
void main()
{
    char g[10];
    char a[10];
    scanf("%[^\n] %[^\n]",a,g);
    swap(a,g);
    printf("%s %s",a,g);
} 
```

**案例2**

```
void main()
{
    char *g=malloc(sizeof(char)*10);
    char *a=malloc(sizeof(char)*10);
    scanf("%[^\n] %[^\n]",a,g);
    swap(a,g);
    printf("%s %s",a,g);
} 
```

在这两种情况下我都得到相同的输出。所以，我的问题是我应该什么时候更喜欢`malloc()`而不是`array`反之亦然，为什么？我找到了通用定义，`malloc()`提供了动态分配。所以，这是他们之间唯一的区别？？请任何人举例说明，`dynamic`尽管我们在`malloc()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T18:44:39.510

主要区别在于您何时以及如何确定数组长度。使用固定长度数组会强制您在编译时确定数组长度。相比之下 using`malloc`允许您在运行时决定数组长度。

特别是，在运行时决定允许您根据用户输入和编译时未知的信息做出决定。例如，您可以将数组分配为足够大的大小以适应用户输入的实际数据。如果您使用固定长度的数组，您必须在编译时确定一个上限，然后将该限制强加给用户。

另一个更微妙的问题是，将非常大的固定长度数组分配为局部变量会导致堆栈溢出运行时错误。出于这个原因，您有时更喜欢使用`malloc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T18:48:47.443

> 请任何人举例说明，虽然我们指定了大小，但动态的含义是什么。

我怀疑这在 C99 之前很重要。在 C99 之前，您不能拥有动态大小的自动数组：

```
void somefunc(size_t sz)
{
    char buf[sz];
} 
```

是有效的 C99 但无效的 C89。但是，使用`malloc()`，您可以指定任何值，而不必`malloc()`使用常量作为其参数进行调用。

此外，为了弄清楚其他用途`malloc()`：您不能从函数返回堆栈分配的内存，因此如果您的函数需要返回分配的内存，您通常使用`malloc()`（或 malloc 家族的其他成员，包括`realloc()`and `calloc()`）获得一块内存。要理解这一点，请考虑以下代码：

```
char *foo()
{
    char buf[13] = "Hello world!";
    return buf;
} 
```

由于`buf`是一个局部变量，它在其封闭函数的末尾无效 - 返回它会导致未定义的行为。**上面的函数是错误的。**但是，通过函数调用获得的指针`malloc()`仍然有效（直到你不调用`free()`它）：

```
char *bar()
{
    char *buf = malloc(13);
    strcpy(buf, "Hello World!");
    return buf;
} 
```

这是绝对有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T18:56:52.937

我要补充一点，在这个特定的示例中， malloc() 非常浪费，因为为数组分配的内存比 [由于 malloc 的开销] 以及调用 malloc() 和稍后所花费的时间要多free() - 程序员需要记住释放它的开销 - 内存泄漏可能很难调试。

编辑：举个例子，您的代码在 main() 末尾缺少 free() - 在这里可能无关紧要，但它很好地说明了我的观点。

因此，通常应该在堆栈上分配小结构（小于 100 字节）。如果您有大型数据结构，最好使用 malloc 分配它们（或者，如果这样做是正确的，请使用全局变量 - 但这是一个敏感主题）。

显然，如果您事先不知道某个东西的大小，并且它可能非常大（大小为千字节），那绝对是“考虑使用 malloc”的情况。

另一方面，如今堆栈相当大（至少对于“真正的计算机”而言），因此分配几千字节的堆栈并不是什么大问题。

# clojure - 元阅读器文字：^ 与 #^

> ID：14013623
> 
> 赞同：0
> 
> 时间：2012-12-23T18:40:43.203
> 
> 标签：clojure

> **可能重复：**
> [Clojure 类型提示语法](https://stackoverflow.com/questions/4245540/clojure-type-hints-syntax)

有时我会阅读 ，有时会阅读`^{:meta :data} some-form`，并`#^{:meta :data} some-form`带有一个尾随的哈希字符。两者有什么区别？

[clojure.org/reader](http://clojure.org/reader)中没有相关条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:07:43.153

暂时没有区别。[https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/LispReader.java#L82](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/LispReader.java#L82) - 如果你能读懂java，看看那里。^ 由 MetaReader 处理，# 由 DispatchReader 处理（在 #^ 的情况下）确实调用 MetaReader。为什么？我记得，在 clojure 的早期 ^ 被用于其他东西（元，但我可能错了）。我建议现在坚持使用 ^，现在它更...首选...。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T06:25:31.923

`#^`是用于访问元数据的旧阅读器宏字符。

它现在已被弃用，取而代之的是`^`.

以下页面正式`^`列为元数据的阅读器宏字符：http: [//clojure.org/reader](http://clojure.org/reader)

# java - 取消选择选项卡时如何在浏览器中暂停小程序

> ID：14013625
> 
> 赞同：0
> 
> 时间：2012-12-23T18:40:57.173
> 
> 标签：java, javascript, swing, applet, japplet

我正在制作我的第一个小程序。我有一个 JPanel，它创建一个 Swing GUI 并执行 CPU 密集型任务（重新绘制 60Hz 组件）。我的 Applet 在事件调度线程上显示此 JPanel。这是问题的抽象。通常我会从 html 文档而不是 main 方法启动小程序。这个程序给我的 CPU 带来了大约 40% 的负载。

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;

public class TestApplet extends JApplet {
    TestPanel tp;
    public void init() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    createGUI();
                }
            });
        } catch (Exception e) { 
            System.err.println("createGUI didn't complete successfully");
        }
    }
    private void createGUI() {
        //Create and set up the content pane.
        tp = new TestPanel();
        tp.setOpaque(true); 
        setContentPane(tp);        
    }

    public static void main(String[] args) {
        JFrame f = new JFrame("Fish Tank");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JApplet ap = new TestApplet();
        ap.init();
        f.add("Center", ap);
        f.pack();
        f.setVisible(true);
    }
}

class TestPanel extends JPanel{
    public TestTank tt = new TestTank();
    public TestPanel() {add(tt);}
    public void stop() {tt.stop();}
    public void start() {tt.start();}
}

class TestTank extends Component implements ActionListener{
    private javax.swing.Timer timer;
    TestTank(){
        timer = new javax.swing.Timer(17, this);
        timer.setCoalesce(true);
        timer.start();
    }
    public Dimension getPreferredSize(){
        return new Dimension(900, 700);
    }
    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        Dimension size = getSize();
        g2.setPaint(new GradientPaint(0,0,Color.RED,900, 0,Color.WHITE));
        g2.fill(new Rectangle2D.Float(0,0,size.width,size.height));
    }
    public void actionPerformed(ActionEvent e) {
        repaint();
    }
    public void stop(){timer.stop();}
    public void start(){timer.start();}
} 
```

我的问题：当用户切换选项卡或最小化浏览器时，如何暂停和恢复 JPanel (FishTankPanel) 的执行？当用户看不到它在做什么时，我希望 Applet 停止使用 CPU。我需要捕获浏览器事件以便在小程序中执行 tp.stop()。我尝试使用 JPanel 中的窗口事件侦听器执行它们，并通过覆盖 Applet 中的 start() 和 stop() 方法。我一直不成功。任何建议或解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T22:52:40.777

我会按照 Dave 所说的那样做，并使用 JApplet 覆盖启动和停止方法来调用您的 GUI 方法。例如，查看代码中的更改：

```
public class TestApplet extends JApplet {
   TestPanel tp;

   public void init() {
      // ... no change
   }

   private void createGUI() {
      // ... no change
   }

   @Override
   public void stop() {
      if (tp != null) {
         tp.stop();
      }
   }

   @Override
   public void start() {
      if (tp != null) {
         tp.start();
      }
   }

}    

class TestTank extends Component implements ActionListener {
   private javax.swing.Timer timer;

   // ... no change

   public void stop() {
      timer.stop();
      System.out.println("stop");
   }

   public void start() {
      timer.start();
      System.out.println("start");
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T01:07:22.977

看来您可能需要为此利用一些 JS。EG 使用[此答案](https://stackoverflow.com/a/6184276/418556)中显示的 JS 分别显式调用小程序`start()`和`stop()`方法进行焦点和模糊检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T21:02:43.980

我的问题的解决方案是使用 javascript 来实现[Page Visibility API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API)。然后我从 javascript 脚本中调用了适当的 Java 方法。

# python - Linux-Python 的语音识别

> ID：14013628
> 
> 赞同：4
> 
> 时间：2012-12-23T18:41:06.343
> 
> 标签：python, linux, speech-recognition

我也搜索了谷歌和这个网站。我发现蜻蜓是最合适的！但是我在 Linux 上找不到任何完美的安装。而且它似乎没有支持，因为最后一个发布日期可以追溯到 2009 年！

Nuance 是另一家在我搜索结果中名列前茅的公司。但它本身并没有提供 linux 支持，但可以使用 HTTP 请求来完成，这是一件昂贵的事情，并且由于需要互联网而受到限制。

有人可以建议我使用 python 构建应用程序的某种语音识别软件（最好是跨平台/Linux）

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:46:20.290

我相信[CMU Sphinx](http://cmusphinx.sourceforge.net/)支持跨各种平台的 Python。它似乎非常适合您的需求。

# html - 在 JSF 项目中调用 HTML5 文件时如何检查授权

> ID：14013635
> 
> 赞同：0
> 
> 时间：2012-12-23T18:41:58.640
> 
> 标签：html, jsf-2, authorization, userid, phaselistener

我定义了一个 PhaseListener 来检查 JSF 项目中的授权。但它不适用于 HTML5。即使我为 web.exml 中的 servlet 映射添加了 url=*.html，它也不适用于 HTML5。因为 JSF2 不支持 HTML5 的一些标签。比如帆布等。

在 JSF 项目中调用 HTML5 文件时如何检查授权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:50:28.300

首先，您根本不应该为工作使用阶段侦听器，而是使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。阶段侦听器仅在 JSF 请求上运行，即仅与`FacesServlet`. 阶段侦听器是一种笨拙的方法，仅用于授权检查。

这是一个具体的启动示例，说明此类过滤器的外观，假设您已将登录用户存储为`User`会话中的对象：

```
@WebFilter("/*")
public class LoginFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws ServletException, IOException {    
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);

        User user = (session != null) ? session.getAttribute("user") : null;
        String loginURL = request.getContextPath() + "/login.xhtml";

        boolean loginRequest = request.getRequestURI().startsWith(loginURL);
        boolean resourceRequest = request.getRequestURI().startsWith(request.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER);

        if (user != null || loginRequest || resourceRequest)) {
            chain.doFilter(request, response);
        } else {
            response.sendRedirect(loginURL);
        }
    }

    // ...
} 
```

# ruby-on-rails - Ruby on Rails。多态关联中的视图

> ID：14013637
> 
> 赞同：3
> 
> 时间：2012-12-23T18:42:03.580
> 
> 标签：ruby-on-rails

我开发了有文章和新闻页面的网站，我想增加对两者发表评论的机会。我使用多态关联。

```
class Article < ActiveRecord::Base  
    has_many :commentaries, :as => :commentable
end

class News < ActiveRecord::Base
    has_many :commentaries, :as => :commentable     
end

class Commentary < ActiveRecord::Base  
  belongs_to :commentable, :polymorphic => true
end 
```

我想在可评论对象下方显示评论

意见/文章/show.html.erb

```
<p>
  <b>Title:</b>
  <%= @article.title %>
</p>

<p>
  <b>Short text:</b>
  <%= @article.short_text %>
</p>

<p>
  <b>Full text:</b>
  <%= @article.full_text %>
</p>

<%= render 'commentaries/form' %> 
```

意见/新闻/show.html.erb

```
<p>
  <b>Title:</b>
  <%= @news.title %>
</p>

<p>
  <b>Text:</b>
  <%= @news.text %>
</p>

<p>
  <b>Created:</b>
  <%= @news.created %>
</p> 
```

意见/评论/_form.html.erb

```
<h1>Comments</h1>

<ul id="comments">
  <% @commentaries.each do |comment| %>
      <li><%= comment.content %></li>
  <% end %>
</ul>

<h2>New Comment</h2>
<% form_for [@commentable, Comment.new] do |form| %>
    <ol class="formList">
      <li>
        <%= form.label :content %>
        <%= form.text_area :content, :rows => 5 %>
      </li>
      <li><%= submit_tag "Add comment" %></li>
    </ol>
<% end %> 
```

我的控制器：

```
class CommentariesController < ApplicationController
  def index
      @commentable = find_commentable
      @commentaries = @commentable.commentaries
    end
end

class ArticlesController < ApplicationController
  def show
    @article = Article.find(params[:id])
  end
end 
```

当我转到 mysite/article/1 时，我收到错误 undefined method `each' for nil:NilClass，因为我的文章控制器中没有 @commentable 并且评论控制器的代码没有执行。

如何在文章/显示页面上执行评论控制器的索引操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:53:02.973

添加局部变量`:commentable => @article`，同时呈现评论表单

```
<%= render 'commentaries/form', :commentable => @article %> 
```

从局部视图访问局部变量`views/commentaries/_form.html.erb`

```
<% commentable.commentaries.each do |comment| %>
  ...
<% end %>
...
<% form_for [commentable, Comment.new] do |form| %>
  ...
<% end %> 
```

# maven - 在 github 上托管一个 Maven 存储库

> ID：14013644
> 
> 赞同：328
> 
> 时间：2012-12-23T18:43:35.797
> 
> 标签：maven, github, github-pages, mvn-repo

我有一个我正在 github 上工作的小型开源库的分支。我想通过 maven 将它提供给其他开发人员，但我不想运行我自己的 Nexus 服务器，而且因为它是一个分支，所以我不能轻易地将它部署到 oss.sonatype.org。

我想做的是将它部署到github，以便其他人可以使用maven访问它。最好的方法是什么？

* * *

## 回答 #1

> 赞同：503
> 
> 时间：2012-12-23T18:43:35.797

我能找到的最佳解决方案包括以下步骤：

1.  创建一个名为`mvn-repo`来托管您的 Maven 工件的分支。
2.  使用 github [site-maven-plugin](https://github.com/github/maven-plugins#readme)将您的工件推送到 github。
3.  配置 maven 以使用您的远程`mvn-repo`作为 maven 存储库。

使用这种方法有几个好处：

*   Maven 工件与您的源代码分开保存在一个单独的分支`mvn-repo`中，就像 github 页面保存在一个单独的分支中一样`gh-pages`（如果您使用 github 页面）
*   `gh-pages`与其他一些提议的解决方案不同，如果您使用它们，它不会与您的冲突。
*   与部署目标自然相关，因此无需学习新的 Maven 命令。`mvn deploy`像往常一样使用

将工件部署到远程 maven 存储库的典型方式是使用`mvn deploy`，因此让我们为该解决方案修补该机制。

首先，告诉 maven 将工件部署到目标目录内的临时暂存位置。将此添加到您的`pom.xml`：

```
<distributionManagement>
    <repository>
        <id>internal.repo</id>
        <name>Temporary Staging Repository</name>
        <url>file://${project.build.directory}/mvn-repo</url>
    </repository>
</distributionManagement>

<plugins>
    <plugin>
        <artifactId>maven-deploy-plugin</artifactId>
        <version>2.8.1</version>
        <configuration>
            <altDeploymentRepository>internal.repo::default::file://${project.build.directory}/mvn-repo</altDeploymentRepository>
        </configuration>
    </plugin>
</plugins> 
```

现在尝试运行`mvn clean deploy`。您会看到它将您的 Maven 存储库部署到`target/mvn-repo`. 下一步是让它将该目录上传到 GitHub。

将您的身份验证信息添加到，`~/.m2/settings.xml`以便 github`site-maven-plugin`可以推送到 GitHub：

```
<!-- NOTE: MAKE SURE THAT settings.xml IS NOT WORLD READABLE! -->
<settings>
  <servers>
    <server>
      <id>github</id>
      <username>YOUR-USERNAME</username>
      <password>YOUR-PASSWORD</password>
    </server>
  </servers>
</settings> 
```

（如前所述，请`chmod 700 settings.xml`确保没有人可以读取文件中的密码。如果有人知道如何让 site-maven-plugin 提示输入密码而不是在配置文件中要求输入密码，请告诉我。）

`site-maven-plugin`然后通过将以下内容添加到您的 pom 中，告诉 GitHub您刚刚配置的新服务器：

```
<properties>
    <!-- github server corresponds to entry in ~/.m2/settings.xml -->
    <github.global.server>github</github.global.server>
</properties> 
```

最后，配置`site-maven-plugin`从您的临时登台存储库上传到您`mvn-repo`在 Github 上的分支：

```
<build>
    <plugins>
        <plugin>
            <groupId>com.github.github</groupId>
            <artifactId>site-maven-plugin</artifactId>
            <version>0.11</version>
            <configuration>
                <message>Maven artifacts for ${project.version}</message>  <!-- git commit message -->
                <noJekyll>true</noJekyll>                                  <!-- disable webpage processing -->
                <outputDirectory>${project.build.directory}/mvn-repo</outputDirectory> <!-- matches distribution management repository url above -->
                <branch>refs/heads/mvn-repo</branch>                       <!-- remote branch name -->
                <includes><include>**/*</include></includes>
                <repositoryName>YOUR-REPOSITORY-NAME</repositoryName>      <!-- github repo name -->
                <repositoryOwner>YOUR-GITHUB-USERNAME</repositoryOwner>    <!-- github username  -->
            </configuration>
            <executions>
              <!-- run site-maven-plugin's 'site' target as part of the build's normal 'deploy' phase -->
              <execution>
                <goals>
                  <goal>site</goal>
                </goals>
                <phase>deploy</phase>
              </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

`mvn-repo`分支不需要存在，它将为您创建。

现在`mvn clean deploy`再次运行。您应该看到 maven-deploy-plugin 将文件“上传”到目标目录中的本地暂存存储库，然后 site-maven-plugin 提交这些文件并将它们推送到服务器。

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building DaoCore 1.3-SNAPSHOT
[INFO] ------------------------------------------------------------------------
...
[INFO] --- maven-deploy-plugin:2.5:deploy (default-deploy) @ greendao ---
Uploaded: file:///Users/mike/Projects/greendao-emmby/DaoCore/target/mvn-repo/com/greendao-orm/greendao/1.3-SNAPSHOT/greendao-1.3-20121223.182256-3.jar (77 KB at 2936.9 KB/sec)
Uploaded: file:///Users/mike/Projects/greendao-emmby/DaoCore/target/mvn-repo/com/greendao-orm/greendao/1.3-SNAPSHOT/greendao-1.3-20121223.182256-3.pom (3 KB at 1402.3 KB/sec)
Uploaded: file:///Users/mike/Projects/greendao-emmby/DaoCore/target/mvn-repo/com/greendao-orm/greendao/1.3-SNAPSHOT/maven-metadata.xml (768 B at 150.0 KB/sec)
Uploaded: file:///Users/mike/Projects/greendao-emmby/DaoCore/target/mvn-repo/com/greendao-orm/greendao/maven-metadata.xml (282 B at 91.8 KB/sec)
[INFO] 
[INFO] --- site-maven-plugin:0.7:site (default) @ greendao ---
[INFO] Creating 24 blobs
[INFO] Creating tree with 25 blob entries
[INFO] Creating commit with SHA-1: 0b8444e487a8acf9caabe7ec18a4e9cff4964809
[INFO] Updating reference refs/heads/mvn-repo from ab7afb9a228bf33d9e04db39d178f96a7a225593 to 0b8444e487a8acf9caabe7ec18a4e9cff4964809
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.595s
[INFO] Finished at: Sun Dec 23 11:23:03 MST 2012
[INFO] Final Memory: 9M/81M
[INFO] ------------------------------------------------------------------------ 
```

在浏览器中访问 github.com，选择`mvn-repo`分支，然后验证所有二进制文件现在都在那里。

![在此处输入图像描述](../Images/22fc62de24286319f0729f1441c7b653.png)

**恭喜！**

现在，您只需运行`mvn clean deploy`.

您还需要采取一个步骤，即配置任何依赖于您的 pom 的 pom 以了解您的存储库在哪里。将以下代码段添加到依赖于您的项目的任何项目的 pom 中：

```
<repositories>
    <repository>
        <id>YOUR-PROJECT-NAME-mvn-repo</id>
        <url>https://github.com/YOUR-USERNAME/YOUR-PROJECT-NAME/raw/mvn-repo/</url>
        <snapshots>
            <enabled>true</enabled>
            <updatePolicy>always</updatePolicy>
        </snapshots>
    </repository>
</repositories> 
```

现在，任何需要您的 jar 文件的项目都会自动从您的 github maven 存储库下载它们。

编辑：为避免评论中提到的问题（“创建提交时出错：请求无效。对于“属性/名称”，nil 不是字符串。“），请确保在 github 上的个人资料中声明名称。

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2014-03-05T22:30:53.137

**不要将 GitHub 用作 Maven 存储库。**

*编辑：这个选项得到了很多反对票，但没有评论为什么。无论在 GitHub 上实际托管的技术能力如何，这都是正确的选择。由于下面列出的所有原因，在 GitHub 上托管是错误的，如果没有评论，我无法改进答案以澄清您的问题。*

**最佳选择 - 与原始项目合作**

最好的选择是说服原始项目包含您的更改并坚持原始项目。

**替代方案 - 维护自己的 Fork**

由于您已经 fork 了一个开源库，并且您的 fork 也是开源的，因此您可以将您的 fork 上传到 Maven Central（阅读[将工件上传到 Central Repository 的指南](http://maven.apache.org/guides/mini/guide-central-repository-upload.html)），方法是给它一个新的`groupId`，也许是一个新的`artifactId`.

仅当您愿意维护此分支直到将更改合并到原始项目中时才考虑此选项，然后您应该放弃此选项。

认真考虑分叉是否是正确的选择。阅读无数 Google 结果以了解[“为什么不分叉”](https://www.google.com/search?q=why+not+to+fork)

**推理**

**用 jars 膨胀你的存储库会增加下载大小而没有任何好处**

jar 是`output`您项目的一个，它可以随时从其重新生成`inputs`，并且您的 GitHub 存储库应仅包含`inputs`.

不相信我？然后检查谷歌搜索结果中的['dont store binaries in git'](https://www.google.com/search?q=dont+store+binaries+in+git)。

[GitHub 的帮助处理大文件](https://help.github.com/articles/working-with-large-files)会告诉你同样的事情。诚然，jar 并不大，但它们比源代码大，一旦一个版本创建了一个 jar，它们就没有理由进行版本控制——这就是新版本的用途。

**在您的 pom.xml 中定义多个存储库会使您的构建速度减慢存储库数量乘以工件数量**

斯蒂芬康诺利[说](https://maven.apache.org/guides/introduction/introduction-to-repositories.html)：

> 如果有人添加您的仓库，他们会影响他们的构建性能，因为他们现在有另一个仓库来检查工件... maven build 为每个工件检查 50 个 repos，而构建时间是一条狗。

这是正确的！**Maven 需要根据您定义的每个存储库检查 pom.xml 中定义的每个工件（及其依赖项）**，因为任何这些存储库中都可能有更新的版本。

亲自尝试一下，您会感受到构建缓慢的痛苦。

工件的最佳位置是 Maven Central，因为它是 jar 的中心位置，这意味着您的构建只会检查**一个**位置。

[您可以在 Maven 关于存储库简介](https://maven.apache.org/guides/introduction/introduction-to-repositories.html)的文档中阅读更多关于存储库的信息

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2015-05-04T16:39:18.207

您可以使用[JitPack](https://jitpack.io)（公共 Git 存储库免费）将您的 GitHub 存储库公开为 Maven 工件。它很容易。您的用户需要将其添加到他们的 pom.xml 中：

1.  添加存储库：

```
<repository>
    <id>jitpack.io</id>
    <url>https://jitpack.io</url>
</repository> 
```

2.  添加依赖：

```
<dependency>
    <groupId>com.github.User</groupId>
    <artifactId>Repo name</artifactId>
    <version>Release tag</version>
</dependency> 
```

正如[在其他地方](https://stackoverflow.com/a/28483461/1180621)回答的那样，JitPack 将构建您的 GitHub 存储库并提供 jar 包。要求是您有一个构建文件和一个 GitHub 版本。

好处是您不必处理部署和上传。由于您不想维护自己的工件存储库，因此它非常适合您的需求。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2019-09-29T01:46:06.753

自 2019 年以来，您现在可以使用称为[Github 包注册表](https://help.github.com/en/articles/configuring-apache-maven-for-use-with-github-package-registry#installing-a-package)的新功能。

基本上流程是：

*   从 github 设置生成新的个人访问令牌
*   在您的中添加存储库和令牌信息`settings.xml`
*   部署使用

    ```
    mvn deploy -Dregistry=https://maven.pkg.github.com/yourusername -Dtoken=yor_token 
    ```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-09-27T13:49:10.800

另一种选择是使用任何支持 webdav 的网络托管。当然，您将需要一些空间来进行此操作，但设置起来很简单，并且是运行完整的 nexus 服务器的一个很好的替代方案。

将此添加到您的构建部分

```
 <extensions>
        <extension>
        <artifactId>wagon-webdav-jackrabbit</artifactId>
        <groupId>org.apache.maven.wagon</groupId>
        <version>2.2</version>
        </extension>
    </extensions> 
```

将这样的内容添加到您的 distributionManagement 部分

```
<repository>
    <id>release.repo</id>
    <url>dav:http://repo.jillesvangurp.com/releases/</url>
</repository> 
```

最后确保在您的 settings.xml 中设置存储库访问权限

将此添加到您的服务器部分

```
 <server>
        <id>release.repo</id>
        <username>xxxx</username>
        <password>xxxx</password>
    </server> 
```

以及您的存储库部分的定义

```
 <repository>
                <id>release.repo</id>
                <url>http://repo.jillesvangurp.com/releases</url>
                <releases>
                    <enabled>true</enabled>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
            </repository> 
```

最后，如果你有任何标准的 php 托管，你可以使用类似 sabredav 的东西来添加 webdav 功能。

优点：你有自己的maven仓库 缺点：没有nexus的任何管理能力；你需要在某处进行一些 webdav 设置

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-08-24T13:00:26.000

作为替代方案，[Bintray](https://bintray.com/)提供免费托管 maven 存储库。如果您绝对不想重命名 groupId，这可能是[Sonatype OSS](https://oss.sonatype.org/)和 Maven Central的一个很好的替代方案。但请至少努力将您的更改集成到上游或重命名并发布到 Central。它使其他人更容易使用您的叉子。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-09T20:58:41.520

如果您只有`aar`或`jar`文件本身，或者只是不想使用插件 - 我创建[了一个简单的 shell 脚本](https://github.com/hydro0/maven2github-bash)。您可以使用它来实现相同的目标 - 将您的工件发布到 Github 并将其用作公共 Maven 存储库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-26T06:48:57.960

我想添加另一个替代方案，一个我最近一直在研究的 Gradle 插件：[magik](https://github.com/elect86/magik)。

基本上，它允许直接在充当 Maven 存储库的 github 存储库上发布。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-21T20:13:30.973

我来这里是为了做同样的事情，免费托管我的 Maven 存储库，但经过更多研究后，我最终来到了这里： [https ://jfrog.com/start-free/](https://jfrog.com/start-free/)

设置[非常简单](https://jfrog.com/screencast/setting-maven-repository-jfrog-artifactory-less-one-minute/)，有一个很好的免费套餐，可以在可预见的未来为我服务，并且有额外的（付费）升级，将来很可能会派上用场。

到目前为止，我确实很高兴！

# android - NullPointerException Android ActionBar 返回（但不是菜单栏返回）

> ID：14013649
> 
> 赞同：0
> 
> 时间：2012-12-23T18:44:09.777
> 
> 标签：android

当我返回上一个活动时，ActionBar 后退按钮出现错误，但是当我使用菜单按钮后退时，一切都按计划进行！我想我知道发生了什么，因为使用操作栏后退按钮会重新创建上一个活动，但我不希望这种情况发生。如何覆盖操作栏（默认）后退按钮以像菜单栏后退按钮一样执行，以便不调用 OnDestroy()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-19T19:19:57.423

我想通了，我必须调用`finish()`我的`onMenuItemClicked`函数而不是使用默认函数。

这个答案可能已经过时了。

# java - 使 TextView 加粗并添加文本设计

> ID：14013650
> 
> 赞同：0
> 
> 时间：2012-12-23T18:44:11.787
> 
> 标签：java, android, eclipse, fonts, textview

请看下面的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:descendantFocusability="afterDescendants"
    android:background="@drawable/background1"
    tools:context=".Form" >

    <TextView
        android:id="@+id/txt1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/dateTxt"
        android:textSize="32sp"
        android:textColor="#FFFFFF"
        android:layout_alignParentLeft="true"

         />

        <DatePicker
        android:id="@+id/datePick"
        android:layout_toRightOf="@+id/txt1"
        android:layout_width="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_height="wrap_content"
        android:layout_marginLeft="4dp"
        />

</RelativeLayout> 
```

在这里，我需要将 TextView 的文本设置为 Bold，如果可能的话，添加一个文本设计，比如“spread”、“spoiled”、“blur”。

我怎样才能做到这一点？将文本加粗是主要问题，如果可以的话，请同时回答第二个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:09:29.030

修改您的 dateTxt 字符串。使用粗体标签。

```
 <string name="dateTxt"><b> Copyright </b></string> 
```

对于模糊或破坏文本，您可以制作样式然后应用到您的 textView。做文字模糊使用这个

```
 <style name="Theme.BlurText" parent="android:style/Theme.Translucent">
   <item name="android:windowNoTitle">true</item>
  <item name="android:windowContentOverlay">@null</item>
  <item name="android:backgroundDimEnabled">true</item>
<item name="android:background">@android:color/transparent</item>        
</style> 
```

并在您的文本视图中使用

```
 android:style="@style/Theme.BlurText" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:50:11.497

```
TextView t1=(TextView)findViewById(R.layout.TextView01);
t1.setTypeface(null,Typeface.BOLD); 
```

对于设计，从中获得一些想法.. [http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-basic-font-sizes/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-basic-font-sizes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T19:15:57.990

要通过 XML 完成，我建议您创建一个样式。如果您没有，请将 XML 文件添加到名为“styles.xml”的“values”文件夹中并添加此样式（我使用阴影尝试制作一些模糊文本，但它可能不是很有效） , 无论如何你有你想要的粗体文本：

```
<resources>
     <style name="Text"> </style>

     <style name="Text.Strong">
           <item name="@android:textSize">32sp</item>
           <item name="@android:paddingLeft">4dp</item>
           <item name="@android:paddingBottom">4dp</item>
           <item name="@android:textColor">#FFFFFFFF</item>
           <item name="@android:textStyle">bold</item>
     </style>

     <style name="Text.Strong.Blurry">
           <item name="@android:shadowColor">#BBBBBB</item>
           <item name="@android:shadowDx">1</item>
           <item name="@android:shadowDy">1</item>
           <item name="@android:shadowRadius">10</item>
     </style>
</resources> 
```

然后只需将样式应用于您的 TextView：

```
 <TextView
    android:id="@+id/txt1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/dateTxt"
    android:layout_alignParentLeft="true"
    style="@style/Text.Strong.Blurry" /> 
```

# android - Android 媒体录音机只记录我的声音

> ID：14013653
> 
> 赞同：3
> 
> 时间：2012-12-23T18:44:43.677
> 
> 标签：android, audio-recording, mediarecorder, android-mediarecorder, phone-call

当我尝试记录我的电话时。在某些设备中，它只记录我的声音。这是代码：

```
private MediaRecorder recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setOutputFile(getFilename()); 
```

如您所见，媒体源设置为：`MediaRecorder.AudioSource.VOICE_CALL`

为什么会这样？

# css - 格式化 Wordpress 电子商务网站产品页面

> ID：14013655
> 
> 赞同：0
> 
> 时间：2012-12-23T18:44:59.120
> 
> 标签：css, wordpress, layout, web, e-commerce

我从一个只完成了一半项目的开发者那里继承了一个 wordpress 电子商务网站。我对 css 或 php 不太了解，但我已经能够使用足够多的编码来完成产品页面。我在格式化产品页面时遇到问题，但是产品列表太宽并且显示在我的侧边栏下方而不是旁边。下面是页面的图片，该页面的产品类别看起来不错，但在列出产品时却出现了错误。

![产品类别](../Images/0fc687380ec34805c1c67e2a52817e20.png)

![在此处输入图像描述](../Images/77c622d3e07927364dcad8012e9aba55.png)

我已经使用 wpsc-default.css 文件来解决这个简单的问题，但是我所做的更改似乎对占据整个内容区域的产品列表行没有任何影响。我尝试从 100% 宽度更改产品显示容器，但是当我更新文件时，网站看起来仍然完全相同。以下是该文件的代码，有人可以指出我缺少什么吗？

```
 /*
Theme Name: Default Theme
Theme URI: http://instinct.co.nz
Description: Default Theme
Version: 3.5
Author: Roy Ho
Author URI: http://instinct.co.nz
*/

/*
 * If you delete this file, you can expect your WP e-Commerce installation to break in some manner
 * to create your own theme copy, and paste this file, change the names and alter to your tastes
*/
/*-----UTILITY-----*/
.group:after {
    content:" ";
    display:block;
    height:0;
    clear:both;
    visibility:hidden;
}
/*-----IE SPECIFIC STYLESHEET-----*/

/*-----UTILITY-----*/
/* for IE6 */
* html .group {
    height:1%;
}

/* for IE7 */
*:first-childhtml .group {
    min-height:1px;
}

/*-----GENERAL-----*/

#default_products_page_container .imagecol img, #list_view_products_page_container img, #grid_view_products_page_container img {
    margin:0;
    padding:0;
    border:1px solid #ccc;
}

.wpsc_hidden{
    display:none;
}

/*-----DEFAULT PRODUCT DISPLAY-----*/
#default_products_page_container {
    width:100%; 
    position:relative;
    line-height:1.2em;
}

#default_products_page_container .wpsc_page_numbers_top {
    margin-bottom:20px; 
}

#default_products_page_container .wpsc_page_numbers_bottom {
    margin-top:20px;    
}

.wpsc_category_grid_item {
    text-align: center;
    background: #EFEFEF;
    border: 1px solid #CCC;
    margin:10px;
    text-decoration: none;
}

.wpsc_category_grid_item .item_no_image {
    color:#000;
}

#default_products_page_container .wpsc_page_numbers_top a:link, #default_products_page_container .wpsc_page_numbers_top a:visited, #default_products_page_container .wpsc_page_numbers_bottom a:link, #default_products_page_container .wpsc_page_numbers_bottom a:visited {
    padding:5px 4px;

}

#default_products_page_container .wpsc_page_numbers_top a:hover, #default_products_page_container .wpsc_page_numbers_top a:active, #default_products_page_container .wpsc_page_numbers_bottom a:hover, #default_products_page_container .wpsc_page_numbers_bottom a:active {

}

#default_products_page_container .wpsc_page_numbers_top span.current, #default_products_page_container .wpsc_page_numbers_top span.current, #default_products_page_container .wpsc_page_numbers_bottom span.current, #default_products_page_container .wpsc_page_numbers_bottom span.current {
    padding:5px 4px;
}

.default_product_display {
    margin-bottom:20px;
    padding:10px;
    position:relative;
}

.default_product_display .imagecol {

    text-align: right;
    display: table-cell;
    vertical-align: middle;
    min-height: 50px;
    height: 100%;
    overflow: auto;

}

.default_product_display .imagecol img.product_image {
    background-color:#efefef;   
}

.default_product_display .imagecol img.no-image, #content .default_product_display .imagecol img.no-image {
    background-color:#EFEFEF;
    display:block;
}

.default_product_display .productcol {
    vertical-align: middle;
    min-height: 50px;
}

.default_product_display h2.prodtitle, #content .default_product_display h2.prodtitle {
    margin:0 0 5px 0;
    line-height:1;
    clear:none;
}

.default_product_display span.sale {
    position:absolute;
    top:-10px;
    left:-10px;
    text-indent:-9999px;
    display:block;
}

.default_product_display .wpsc_description, #content .default_product_display .wpsc_description {
    font-size:13px; 
    line-height:1.4em;
}

.default_product_display .additional_description, #content .default_product_display .additional_description {
    font-size:13px; 
    line-height:1.4em;
    margin:0;
}

.default_product_display .additional_description_container {
    margin:20px 0;  
}

.default_product_display a.additional_description_link:link, .default_product_display a.additional_description_link:visited {
    text-decoration:underline;
    color:#0062ce;
    margin-left:5px;
}

.default_product_display a.additional_description_link:hover, .default_product_display a.additional_description_link:active {
    text-decoration:none;
}

.default_product_display .additional_description {
    display:none;   
}

.default_product_display form.product_form fieldset, #content .default_product_display form.product_form fieldset {
    border: none;
    padding: 0px;
}

.default_product_display form.product_form fieldset legend, #content .default_product_display form.product_form fieldset legend {
    font-size:18px;
    font-weight: normal;
    padding:0px;
}

.default_product_display .wpsc_variation_forms {
    padding:2px;    
    margin-bottom:10px;
}

.wpsc_select_variation{
    position:relative;
}

.default_product_display .wpsc_variation_forms table, #content .default_product_display .wpsc_variation_forms table, .default_product_display .wpsc_variation_forms table tr, #content .default_product_display .wpsc_variation_forms table tr, .default_product_display .wpsc_variation_forms table td, #content .default_product_display .wpsc_variation_forms table td {
    border:none;
    border-collapse:collapse;   
    margin:0;
}

.default_product_display .wpsc_variation_forms table td.col1, #content .default_product_display .wpsc_variation_forms table tr td.col1 {
    width:10%;  
    text-align:left;
    margin:0;
    padding:2px;
}

.default_product_display .wpsc_variation_forms table td.col2, #content .default_product_display .wpsc_variation_forms table tr td.col2 {
    width:80%;  
    text-align:left;
    margin:0;
    padding:2px;
}

.default_product_display .wpsc_variation_forms label {
    font-family: Georgia, "Bitstream Charter", serif;
    font-size:14px;
    color:#000
}

.default_product_display .wpsc_variation_forms select {
    margin:0;
    min-width:100px;
    max-width:200px;
}

.default_product_display .wpsc_quantity_update {
    margin-bottom:10px;
    padding-bottom:10px;
    margin-left:10px;
}

.default_product_display .wpsc_quantity_update input, #content .default_product_display .wpsc_quantity_update input {
    margin:0;
    line-height:1.2em;
    font-size:12px;
}

.default_product_display .wpsc_quantity_update label, #content .default_product_display .wpsc_quantity_update label {
    font-family: Georgia, "Bitstream Charter", serif;
    margin:0;
    line-height:1.2em;
    font-size:12px;
    color:#F60;
}

.default_product_display .wpsc_product_price {
    margin-bottom:10px;
    font-size:16px;
    padding:5px;
    display:inline;
    *zoom:1;
}

.default_product_display .in_stock,
.single_product_display .in_stock {
    position: relative;
    background-image: url(wpsc-images/yes_stock.png);
    background-repeat: no-repeat;
    padding-left: 20px;
    left:-5px;
}

.default_product_display .out_of_stock,
.single_product_display .out_of_stock {
    position: relative;
    background-image: url(wpsc-images/outofstock.png);
    background-repeat: no-repeat;
    padding-left: 20px;
    left:-5px;
}

.default_product_display .wpsc_product_price p, #content .default_product_display .wpsc_product_price p {
    margin:0;
}

.default_product_display .wpsc_product_price span.oldprice {
    text-decoration:line-through;
    color:#666;
}

.default_product_display p.soldout, #content .default_product_display p.soldout {
    font-weight:bold;
    font-size:14px;
    color:#C33; 
    background:url(wpsc-images/outofstock.png) no-repeat scroll 0 2px transparent;
    padding-left:18px;
    margin:0;
}

.default_product_display div.wpsc_loading_animation {
    visibility:hidden;  
    margin-top:5px;
}

.default_product_display div.wpsc_loading_animation img, #content .default_product_display div.wpsc_loading_animation img {
    border:none;
}

.default_product_display .product_footer .product_average_vote strong  {
    font-size:0.8em;    
    float:left;
}

.default_product_display .product_footer .product_average_vote span  {
    font-size:0.8em;    
    float:left;
}

.default_product_display .product_footer .product_user_vote {
    clear:both;
    font-size:0.8em;    
    float:left;
}

.default_product_display .wpcart_gallery img, #content .default_product_display .wpcart_gallery img {
    margin-right:6px;
    border:1px solid #ccc;  
}

.wpcart_gallery .attachment-gold-thumbnails, .imagecol .product_image{
    cursor: -webkit-zoom-in;
    cursor: -moz-zoom-in;
}

.single_product_display form.product_form .wpsc_buy_button_container,
#content .single_product_display form.product_form .wpsc_buy_button_container{
    text-align: right;
}

.default_product_display .wpsc_buy_button_container{
    float:right;
}

/*-----LIST VIEW PRODUCT DISPLAY-----*/
#list_view_products_page_container {
/*  width:250px;     */
    position:relative;
}

#list_view_products_page_container .wpsc_page_numbers_top {
    margin-bottom:20px; 
}

#list_view_products_page_container .wpsc_page_numbers_bottom {
    margin-top:10px;    
}

#list_view_products_page_container p, #content #list_view_products_page_container p {
    line-height:1.2em;
    margin:0;
    padding:0;  
}

#list_view_products_page_container span.sale {
    display:none;
}

#list_view_products_page_container input, #content #list_view_products_page_container input, #list_view_products_page_container textarea, #content #list_view_products_page_container textarea {
    margin:0;
    padding:0;
}

table.list_productdisplay form.product_form {
    display:inline;
}

table.list_productdisplay .quantity_container {
    display:inline; 
}

#content input.wpsc_buy_button{
    font-size: 12px;
}

table.list_productdisplay .wpsc_buy_button_container {
    display:inline-block;
    position:relative;
}

table.list_productdisplay .wpsc_buy_button_container .wpsc_loading_animation {
    position:absolute;
    top:1px;
    right:-85px;
    *right:-100px;
    font-size:10px;
    width:100%; 
    vertical-align:middle;
    line-height:1.2em;
}

table.list_productdisplay .wpsc_buy_button_container .wpsc_loading_animation img, #content table.list_productdisplay .wpsc_buy_button_container .wpsc_loading_animation img {
    vertical-align:middle;
    border:none;
    float:left;
}

table.list_productdisplay .oldprice {
    text-decoration:line-through;
}

#list_view_products_page_container table.list_productdisplay input.wpsc_buy_button, #content #list_view_products_page_container table.list_productdisplay input.wpsc_buy_button {
    padding:5px;

}

table.list_productdisplay h2.prodtitle, #content table.list_productdisplay h2.prodtitle {
    font-size:15px;
    line-height:1.2em;
    margin:0;
    word-wrap: break-word;  
}

table.list_productdisplay h2.prodtitle a:link, #content table.list_productdisplay h2.prodtitle a:link, table.list_productdisplay h2.prodtitle a:visited, #content table.list_productdisplay h2.prodtitle a:visited {
    text-decoration:underline;
    color:#006699;
}

table.list_productdisplay h2.prodtitle a:hover, #content table.list_productdisplay h2.prodtitle a:hover, table.list_productdisplay h2.prodtitle a:active, #content table.list_productdisplay h2.prodtitle a:active {
    text-decoration:none;
}

table.list_productdisplay td.stock {
    text-align:center;  
}

table.list_productdisplay tr.alt {
    background-color:#F8F8F8;   
}

table.list_productdisplay p.soldout {
    color:#C33; 
}

/*-----SINGLE PRODUCTS PAGE-----*/
#single_product_page_container {
    width:650px;    
    position:relative;  
}

.single_product_display {
    margin-bottom:20px;
    padding:10px;
    position:relative;  
}

.imagecol {
    margin-right:5px;
/*  width:25%; */
    float:left; 
    position:relative;
}

.single_product_display .imagecol img.product_image {
    background-color:#efefef;
    border:1px solid #ccc;  
}

.single_product_display .imagecol img.no-image, #content .single_product_display .imagecol img.no-image {
    background-color:#EFEFEF;
    display:block;
}

.single_product_display .product_description, .single_product_display .single_additional_description {
    font-size:14px;
    line-height:1.2em;
    margin:0 0 10px 0;
    padding:0;  
}

.single_product_display form.product_form fieldset, #content .single_product_display form.product_form fieldset {
    border: none;
    padding: 0px;
}

.single_product_display form.product_form fieldset legend, #content .single_product_display form.product_form fieldset legend {
    font-size: 18px;
    font-weight: normal;
    padding: 0px;
}

.single_product_display form.product_form input, #content .single_product_display form.product_form input {
    padding:2px;
    margin:0;

    line-height:1.2em;
    font-size:14px;
}

.single_product_display form.product_form input.input_custom_text, #content .single_product_display form.product_form input.input_custom_text {
    width:250px;
}

.single_product_display form.product_form fieldset p, #content .single_product_display form.product_form fieldset p {
    margin:0 0 10px 0;
    padding:0;
    line-height:1.2em;
    font-size:14px; 
}

.default_product_display .wpsc_variation_forms {
    padding:2px 0px 2px 0px;    
    margin-bottom:10px;
}

.single_product_display .wpsc_variation_forms table, #content .single_product_display .wpsc_variation_forms table, .single_product_display .wpsc_variation_forms table tr, #content .single_product_display .wpsc_variation_forms table tr, .single_product_display .wpsc_variation_forms table td, #content .single_product_display .wpsc_variation_forms table td {
    border:none;
    border-collapse:collapse;   
    margin:0;
}

.single_product_display .wpsc_variation_forms table td.col1, #content .single_product_display .wpsc_variation_forms table tr td.col1 {
    width:10%;  
    text-align:left;
    margin:0;
    padding:2px;
}

.single_product_display .wpsc_variation_forms table td.col2, #content .single_product_display .wpsc_variation_forms table tr td.col2 {
    width:60%;  
    text-align:left;
    margin:0;
    padding:2px;
}

.single_product_display .wpsc_variation_forms select {
    margin:0;
    min-width:100px;    
    max-width:200px;
}

.default_product_display .wpsc_quantity_update {
    margin-bottom:10px;
    padding-bottom:10px;
    margin-left:10px;
}

.single_product_display .wpsc_quantity_update input, #content .single_product_display .wpsc_quantity_update input {
    margin:0;
    line-height:1.2em;
    font-size:12px;
}

.single_product_display .wpsc_quantity_update label, #content .single_product_display .wpsc_quantity_update label {
    font-family: Georgia, "Bitstream Charter", serif;
    margin:0;
    line-height:1.2em;
    font-size:12px;
    color:#F60;
}

.single_product_display .wpsc_product_price {
    display: inline-block;
    font-size: 16px;
    margin-bottom: 10px;
    padding: 5px;
}

.single_product_display .wpsc_product_price p, #content .single_product_display .wpsc_product_price p {
    margin:0;
}

.single_product_display .wpsc_product_price span.oldprice {
    text-decoration:line-through;
}

.single_product_display p.soldout {
    font-weight:bold;
    font-size:14px;
    color:#C33; 
    background:url(wpsc-images/outofstock.png) no-repeat scroll 0 5px transparent;
    padding-left:18px;
}

.single_product_display div.wpsc_loading_animation {
    visibility:hidden;  
}

.single_product_display .wpcart_gallery img, #content .single_product_display .wpcart_gallery img {
    margin-right:6px;
    border:1px solid #ccc;  
}

.single_product_display .FB_like iframe {
    border:none;
    width:300px;
    height:80px;
    outline:none;
    overflow:hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:44:42.590

这个问题已被解决。我将此代码放入我的 style.css 文件中。

```
wpsc_default_product_list {
float: left;
width: 600px;
}

.wpsc_category_grid {
float: right;
width: 650px;
} 
```

# jquery - 输入类型文本的对齐问题

> ID：14013658
> 
> 赞同：0
> 
> 时间：2012-12-23T18:45:36.720
> 
> 标签：jquery, html

我正在处理一个带有 html 和 jquery 的示例，我现在最初面临一个小的对齐问题，当单击复选框时它正在完美对齐。看看快照。

最初的图像

![最初的图像](../Images/fb1abde87fd5162ba8354fdfddd99d21.png)

单击复选框后的图像

![在此处输入图像描述](../Images/f124321fcf645cd3f91d7589a7899849.png)

这是我的html文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="signin.css">
<title>First sample</title>
 <script
src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">

</script>
<script type="text/javascript">
$(document).ready(function() {
    $("#check1").click(function() {

        $("#passwordRowId").toggle();
        $("#genderRowId").toggle();

    });
});
</script>

</head>
<body>

<table bgcolor="#FFFFFF" align="center">

    <tr id="checkboxRowId">
        <td colspan="2" align="center"><input type="checkbox"
            id="check1" />check1</td>
    </tr>
    <tr id="userNameRowId">
        <td>UserName :</td>
        <td><input type="text" name="username"></td>
    </tr>
    <tr id="passwordRowId">
        <td>Password :</td>
        <td><input type="password" name="password"></td>
    </tr>

    <tr id="genderRowId">
        <td>Select Gender :</td>
        <td><select name="gender">
                <option>male</option>
                <option>female</option>
        </select></td>
    </tr>

    <tr>
        <td colspan="2" align="center"><input id="signIn" type="button"
            value="Sign In"></td>
    </tr>
</table> 
```

并且链接的css文件是

```
@CHARSET "ISO-8859-1";

#passwordRowId {
display: block;
}

#genderRowId {
display: none;
} 
```

所以现在我的问题是如何正确对齐第一个布局。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:51:19.073

简单的答案是不要`display: block`用于表格元素。

删除显示的css一切正常

演示：http: [//jsfiddle.net/67usZ/](http://jsfiddle.net/67usZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:01:14.980

不要使用 CSS 来隐藏这里，只需在准备好的页面上隐藏 Gender 行。

```
$(document).ready(function() {
    $("#genderRowId").toggle();
    $("#check1").click(function() {

        $("#passwordRowId").toggle();
        $("#genderRowId").toggle();

    });
}); 
```

# android - Android Impossibile 使用自定义视图填充布局高度

> ID：14013671
> 
> 赞同：0
> 
> 时间：2012-12-23T18:47:11.180
> 
> 标签：android, view

我创建了一个自定义视图，并将其放在 LinearLayout 上。

问题是我无法完全填充布局的高度，自定义View的大小总是平方，宽度=高度。

这是我的布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical" 
    android:layout_weight="0">

    <it.inav.graphics.MapView
        android:id="@+id/map"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"/>

   </LinearLayout> 
```

它似乎工作的唯一方法是使用RelativeLayout并使用两者“拉伸”视图

```
 android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true" 
```

但是，如果我尝试获取尺寸高度，它会返回与之前相同的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:56:46.067

问题出在视图的定义中，而不是在 XML 中。

我已经完成了这段代码的复制粘贴：

```
 @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int measuredWidth = measure(widthMeasureSpec);
        int measuredHeight = measure(heightMeasureSpec);
        int d = Math.min(measuredWidth, measuredHeight);
        setMeasuredDimension(d, d);
    } 
```

而且，很自然地，它将 View 的大小设置为与 Minor 长度相同的正方形。

这是正确的代码：

```
 @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int measuredWidth = measure(widthMeasureSpec);
        int measuredHeight = measure(heightMeasureSpec);
        setMeasuredDimension(measuredWidth, measuredHeight);
    } 
```

# jquery-mobile - 隐藏在 Android Webview 中的 jQuery 移动页眉和页脚

> ID：14013672
> 
> 赞同：1
> 
> 时间：2012-12-23T18:47:20.447
> 
> 标签：jquery-mobile, android-webview

我有以下问题，我使用 jQuery mobile ( 1.2.0 ) 创建的页眉和页脚在加载文档时被隐藏。如果我单击任何位置，则会提示显示容器。

总是显示其他内容。

此错误仅出现在我的 LG Optimus L5 ( Android 4.0.3 ) 上。在我的 Galaxy S3 ( 4.1 )、Galaxy Note ( 4.1 ) 或任何虚拟机 ( 2.3.3, 4.2 ) 或浏览器 ( PC ) 上，没有这样的错误。

HTML 文件被加载到 WebView 中。

这是我的 HTML 源代码：

```
<div data-role="header" data-theme="c" data-position="fixed" data-tap-toggle="false" data-iscroll="enable" data-fullscreen="false" id="header_app"> 
    <img src="logo.png" alt="" height="50" style="margin: 6px; margin-bottom: 0;" />
</div> 

<div data-role="content" id="cnt" > 
</div>

<div data-role="footer" data-theme="c" data-position="fixed" data-tap-toggle="false" data-fullscreen="false"> 
    <div data-role="navbar">
        <ul>
            <li><a href="#" data-icon="home" data-iconpos="right" data-iconpos="notext" id="bck" class="ui-btn-active"></a></li>
            <li><a href="#" data-icon="info" data-iconpos="notext" id="info"></a></li>
            <li><a href="#" data-icon="gear" data-iconpos="notext" id="options"></a></li>
            <li><a href="#" data-icon="refresh" data-iconpos="notext" id="refresh_data"></a></li>
            <li><a href="#" data-icon="myapp-email" data-iconpos="notext" id="msgs"></a></li>
        </ul>
    </div>
</div> 
```

请原谅我的英语不好，我希望你能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:09:26.000

如果你写过

```
.ui-page { -webkit-backface-visibility: hidden; } 
```

在你的css中然后删除它。它可能会帮助你。

# macos - 将 RTF 文件与 Cocoa 合并

> ID：14013673
> 
> 赞同：0
> 
> 时间：2012-12-23T18:47:26.890
> 
> 标签：macos, cocoa, merge, rtf

如何做到这一点？我知道仅仅合并 NSData 是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:16:10.227

使用 NSAttributedString 应该可以工作，如下所示的代码

这是一种将许多 RTF 文件合并在一起的非常快速而肮脏的方法

```
- (void)mergeRTF:(NSURL*)rtf1 :(NSURL*)rtf2 :(NSURL*)merged {
    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    [options setObject:[NSNumber numberWithUnsignedInteger:NSUTF8StringEncoding]
                forKey:NSCharacterEncodingDocumentOption];
    NSDictionary *docAttrs = nil;
    NSError* error = nil;

    NSAttributedString *rtfText1 = [[NSAttributedString alloc] initWithURL:rtf1
                                                               options:options
                                                    documentAttributes:&docAttrs
                                                                 error:&error];

    NSAttributedString *rtfText2 = [[NSAttributedString alloc] initWithURL:rtf2
                                                                options:options
                                                     documentAttributes:&docAttrs
                                                                  error:&error];
    NSMutableAttributedString* whole = [[NSMutableAttributedString alloc] initWithAttributedString:rtfText1];
    [whole appendAttributedString:rtfText2];
    NSData* data = [whole RTFFromRange:NSMakeRange(0, whole.length) documentAttributes:nil];

    [data writeToURL:merged atomically:YES];
} 
```

# vbscript - Vb 脚本 - 排序最高的

> ID：14013682
> 
> 赞同：0
> 
> 时间：2012-12-23T18:48:28.213
> 
> 标签：vbscript

我用VB脚本编写了一个简单的程序来排序最高。有两个版本的程序，第一个正在工作，但第二个在运行时输入数组值的地方不起作用。

谁能帮我解决这个问题。

**版本#1：**

```
dim arr(5)
arr(0)= 25
arr(1)= 12
arr(2)= 30
arr(3)= 45
arr(4)= 10
arr(5)=  5
dim Buffer
Buffer = 0
dim i

for i=0 to 5
  if arr(i) > Buffer Then Buffer = arr(i)
Next

Msgbox "The Highest is" &Buffer 
```

**版本 2**（此版本不适用于数据 - (25,12,30,45,10,5) - 它表示 5 为最高值。

```
dim arr(5)
dim j
for j=0 to 5
  arr(j)=inputbox("Enter Data")
Next

dim Buffer
Buffer = 0
dim i

for i=0 to 5
  if arr(i) > Buffer Then Buffer = arr(i)
Next

Msgbox "The Highest is" &Buffer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:24:21.537

问题：当您在第一个样本中比较数字时，您在第二个样本中比较字符串（来自 InputBox()）。“5”（按字母顺序）大于“49999999”。使用 CInt() 或 CLng() 将输入的字符串转换为数字。

# c++ - 将字符串参数传递给函数时出现语法错误

> ID：14013687
> 
> 赞同：0
> 
> 时间：2012-12-23T18:48:47.313
> 
> 标签：c++, syntax-error

当我看不到任何错误时，Visual Studio (2012/C++) 报告了多个错误，所有这些错误都缓解了语法错误。

我正在调用该函数，`Ping(ID);`并且 ID 是一个字符串（已定义），我已将相关头文件中的函数定义为 `#include <string> int Ping(string ID);`.

该函数的精简版本是

```
int Ping(string ID)
{
  // Ping
    cout<<"Pinging\n";
    cout<<ID;
    return (1);
} 
```

头文件中的错误如下；

```
Error   3   error C2059: syntax error : ')' func.h  3   1
Error   1   error C2065: 'string' : undeclared identifier   func.h  3   1   
Error   2   error C2146: syntax error : missing ')' before identifier 'ID' func.h   3   1 
```

我真的很坚持我需要做些什么来解决这个问题，所以任何关于如何解决它的指导都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:49:55.297

您没有使用`std::`, as 来限定名称`std::string`。

# mysql - mysql查询建议

> ID：14013695
> 
> 赞同：0
> 
> 时间：2012-12-23T18:49:36.083
> 
> 标签：mysql

我对我的 mysql 查询有一些疑问，想在这里讨论。我有三个表 tablea、tableb 和 tablec

```
 tablea 

id    someid
1       434
2       352
3       329 
```

表b

```
id     otherid     cid
1      434         54        
2      6934         2453
3      434         24
4      9548        67 
```

这里otherid出现了不止一次，并且在tablea中也出现了一次

表c

```
id       otherid     cid  
1        all deleted row details of tableb will be stored here 
```

我在做什么

从tablec中选择一个随机行并将someid与otherid匹配，因为我想将tableb详细信息存储在tablec中，所以首先我对tablec执行插入，然后删除tableb行，这似乎是正确的，但在tableb中不止一行是所以删除不是问题，因为我可以直接与 someid 匹配并从 tableb 中删除所有行，但是在 tablec 中我还必须插入 cid 值，所以如果我按照我解释的那样做，它会正常工作吗？欢迎提出任何建议

# jquery - 调用函数时pageinit事件不起作用

> ID：14013696
> 
> 赞同：1
> 
> 时间：2012-12-23T18:49:40.240
> 
> 标签：jquery, cordova, jquery-mobile

我有一个从主 html 页面调用的 html 页面，它工作正常。我想触发一个调用远程服务器 php 脚本并构建列表视图项的函数。我正在使用电话间隙、jquery mobile 1.2.0 和 jquery 1.8.3

在被调用的 html 页面中，我有以下代码：

```
<!DOCTYPE HTML>
<html>
<head>

<title>Search by area</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="jquery.mobile.structure-1.2.0.min.css" />
<link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="jquery.mobile-1.2.0.min.js"> </script>
<link rel="stylesheet" href="custom.css" />

<script type="text/javascript">

function getAreas() {
   $.ajax({
       type:'GET',
       url:'http://localhost/getData.php',
       dataType:'jsonp',
       jsonp: 'jsoncallback',
       timeout: 5000,
       success: function(data, status){ 
              $.each(data, function(i,item){
        $('#list').append("<li><a href='#' data-transition='slidedown'>" + item.area_name + "<span class='ui-li-count'>" + item.deal_count + "</span></a></li>");
        $("#list").listview("refresh");

                });

       },
       error: function(data){
           // error on loading data
           alert('error');

       }
    });
};
</script>

</head>
<body> 

    <div id="areas" data-role="page" data-add-back-btn="true">
    <script type="text/javascript">
            $("#areas").on('pageinit', function() {
                // get the areas from the database 
                getAreas();

            });
    </script>
        <div data-role="header">

            <h1> Bucuresti deals</h1>

        </div>

        <div data-role="content">

        <div class="choice_list">

        <h1> In which town do you want to eat? </h1>
</div>
        </div>
   </div>

</body>
</html> 
```

我已阅读实际绑定需要放置在具有特定 id 的 div 之间，如下所示：

```
<div id="areas" data-role="page" data-add-back-btn="true">
<script type="text/javascript">
        $("#areas").on('pageinit', function() {
            // get the areas from the database 
            getAreas();

        }); 
```

在火灾错误中，我收到以下消息

> ReferenceError：未定义 getAreas

我不确定为什么这是函数存在并起作用的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:07:21.820

在 jQuery 移动文档上：

> 因为 mobileinit 事件会立即触发，所以您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。按以下顺序链接到您的 JavaScript 文件：

```
<script src="jquery.js"></script>
<script src="custom-scripting.js"></script>
<script src="jquery-mobile.js"></script> 
```

所以在你的情况下应该是这样的：

```
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="script.js"> </script>
<script type="text/javascript" src="jquery.mobile-1.2.0.min.js"> </script> 
```

`script.js`将是您当前在页面中拥有的外部化脚本：

```
function getAreas() {
  $.ajax({
   type:'GET',
   url:'http://localhost/getData.php',
   dataType:'jsonp',
   jsonp: 'jsoncallback',
   timeout: 5000,
   success: function(data, status){ 
          $.each(data, function(i,item){
    $('#list').append("<li><a href='#' data-transition='slidedown'>" + item.area_name + "<span class='ui-li-count'>" + item.deal_count + "</span></a></li>");
    $("#list").listview("refresh");

            });

   },
   error: function(data){
       // error on loading data
       alert('error');

   }
 });
}; 
```

和

```
$("#areas").on('pageinit', function() {
        // get the areas from the database 
        getAreas();

    }); 
```

你也可以使用这些方法：

```
$(document).bind("mobileinit", function(){
   getAreas();
});

$(document).live( 'pageinit',function(event){
  getAreas();
}); 
```

# visual-studio-2010 - 如何使用实体数据模型设计器（实体框架）调试问题

> ID：14013699
> 
> 赞同：1
> 
> 时间：2012-12-23T18:49:51.420
> 
> 标签：visual-studio-2010, entity-framework, entity-framework-4

我继承了一些使用实体框架的项目，这使得很难进行任何更改。它对几乎所有表（cca 50 个表）和存储过程都使用**QueryView 。**现在我必须改变很多东西......重命名表，添加表，更改列等。

当我尝试使用**“从数据库更新模型......”** 向导时，在从数据库更新（我添加/删除表并让使用向导刷新其他表）之后，实体数据模型设计器渲染停止工作。 .. 只是一个空白窗口，上面写着**“实体数据模型设计器无法显示您请求的文件。** ”

所以我尝试了不同的方法（比如手动编辑**edmx**文件），但问题仍然存在。编辑器仅显示“实体数据模型设计器无法显示您请求的文件”。

使用 QueryViews 的映射可能使其更加复杂。众所周知，设计器无法正确使用 QueryViews（无法使用设计器对其进行编辑），并且实体框架引擎甚至无法识别来自 CSDL 的列是使用 QueryViews 映射的，并且会抱怨每一列（使用 QueryView 映射）“**错误 11009：属性 'XXX' 未映射。** ”我看到 100 个这样的错误。也许在第 100 个错误之后的某个地方，有一些提示（以其他错误的形式）如何解决 Designer 的问题，但我不知道如何查看它们。100 个限制很可能在 VS2010 中硬编码（http://stackoverflow.com/questions/2880936/how-to-increase-error-limit-in-visual-studio）。

顺便提一句。代码（实体类等）生成没有问题。

所以，问题是：**有没有办法查看一些日志或其他东西，在哪里会注意到为什么实体框架数据模型设计器无法呈现任何东西？**

**或者至少有某种方法可以查看其余的错误（除了 100 个错误）？**

**或者除了使用向导之外，有人知道在 EF 中更新模式的理想方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-26T06:58:23.103

尝试添加新的EDMX并右键>>用>> XML编辑器打开，然后您可以在EDMX中的一个空模型定义中看到一个完整的集合。因此，您可以比较两个 EDMX 并检查是否缺少 EDMX 的哪一部分。

[这是错误链接](https://msdn.microsoft.com/en-us/library/ee524052.aspx?f=255&MSPPError=-2147217396)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:58:50.987

最后，我只是通过***编辑 xml***手动完成所有更改。但是，我使用模型设计器（集成在 VS for EF 中的 GUI）来创建整个 CSDL 层。所以我的做法是按照正确的顺序仔细选择表，并在以下步骤的多次迭代中一一添加：

1.  使用模型设计器为所选表创建 csdl 层，包括与现有表的所有关系。这至少确保了设计器以后可以使用，并且节省了 CSDL 对象的手动编写。

2.  编写 SSDL 层，它应该反映 DB 表。

3.  编写映射层（在我的例子中使用 QueryViews）。

4.  尝试编译并解决所有编译错误。

5.  对下一张桌子重复（或更多桌子，如果你觉得更容易的话）。

我希望这会对某人有所帮助。

# html - 特定 div 中的二级菜单，向左点亮

> ID：14013705
> 
> 赞同：0
> 
> 时间：2012-12-23T18:50:31.523
> 
> 标签：html, css, menu, jquery-animate

一开始我想说我是波兰人，我的英语不是最好的。我正在制作自己的网站，但我的菜单有问题。它非常具体，因为它使用自动高度和 jquery 幻灯片来制作一些漂亮的动画。

我的问题是“第二”级菜单。我需要在页面左侧显示项目的描述下划线。

HTML 没问题

```
<nav>
    <ul>
        <li>1\. Item
            <h3>1\. item description</h3>
        </li>

        <li>2\. Item
            <h3>2\. item description</h3>
        </li>

        <li>3\. Item
            <h3>3\. item description</h3>
        </li>
    </ul>
</nav> 
```

我认为问题出在 CSS 和一些 DOM 设置中。它必须在这里：

```
nav {
    background-color:#eee;
    width:100%;
    height:auto;
    position:fixed;
    top:0px;
}
nav ul {
    /*don't enter hegiht*/
}
nav ul li {
    list-style:none;
}
nav ul li {
    display:table-cell;
    padding:20px 10px 21px 10px;
}
nav ul li h3 {
    display:block;
} 
```

和 jQuery ：

```
$(document).ready(function() {

    $("nav h3").hide();
    //hide description

    //show when hover
    $("nav li").hover(function(){
        $("h3", this).slideToggle("slow");

    },function(){
        $("h3", this).slideToggle("slow");
    },800);
    return false;

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:05:59.873

我不确定你的意思是什么：“我需要在页面左侧显示项目的描述下划线。”

这会将描述放置在页面的左侧：

```
 nav ul li h3 {
        position:absolute;
        left:0px;            
        display:block;
    }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:53:23.950

如果您的 DOM 元素是嵌套的，那么它们最自然的布局也是以这种方式显示它们。你可以通过使用绝对定位来解决这个问题，但我经常这样忘记事情。

我会将您拥有的列表分成两个单独的列表：

```
<nav>
    <ul class='top'>
        <li>1\. Item</li>
        <li>2\. Item</li>
        <li>3\. Item</li>
    </ul>
    <ul class='bottom'>
        <li>1\. item description</li>
        <li>2\. item description</li>
        <li>3\. item description</li>
    </ul>
</nav> 
```

`li`有了这些，当用户将鼠标悬停在顶部时，动画就变成了寻找相应底部的问题`li`：

```
$(document).ready(function() {

    $("nav ul.bottom li").hide();
    //hide description

    //show when hover
    $("nav ul.top li").hover(function(){
        $("nav ul.bottom li:eq("+$(this).index()+")").slideToggle("slow");

    },function(){
        $("nav ul.bottom li:eq("+$(this).index()+")").slideToggle("slow");
    },800);
    return false;

}); 
```

我使用了这个额外的 CSS：

```
nav ul.bottom li {
    position:absolute;
    left:0px;            
    display:block;
} 
```

更新的小提琴可以在这里找到：http: [//jsfiddle.net/GRf98/2/](http://jsfiddle.net/GRf98/2/)

# database - Adobe Air 依赖项

> ID：14013710
> 
> 赞同：0
> 
> 时间：2012-12-23T18:50:56.517
> 
> 标签：database, air, adobe, desktop-application, dependency-management

我们正在考虑开发一个 Windows 应用程序，并为此考虑多种选择。我的一位同事建议我探索 Adob​​e Air。我有几个问题希望专家程序员社区回答： 1\. 我们可以在 Adob​​e Air 中开发一个成熟的数据库驱动的 GUI 应用程序吗？2\. Adob​​e Air 支持哪些数据库？它支持 SQLite 吗？3\. 如果我们想将数据同步到某个在线数据库，是否有适用于 Adob​​e Air 的 API？4\. 运行 Adob​​e Air 应用程序是否有任何框架要求？Adobe Air 应用程序运行的先决条件是什么？它的应用程序是否可移植？5\. Adob​​e Air 是一种已失效的技术，还是在 Adob​​e Air 中创建商业级桌面应用程序是否安全。

评论表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:11:43.280

Adobe 停止了对 Adob​​e Air Linux 的支持，因此可以说它是不可移植的。和别的东西一起去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-15T07:28:40.507

> 1.  我们可以在 Adob​​e Air 中开发一个成熟的数据库驱动的 GUI 应用程序吗？
> 2.  Adobe Air 支持哪些数据库？它支持 SQLite 吗？
> 3.  如果我们想将数据同步到某个在线数据库，是否有适用于 Adob​​e Air 的 API？

Adobe Air 支持 SQLite 作为其他多平台语言。您不能将其直接连接到其他数据库。

但是，如果您想创建在线 Air 应用程序，我建议您通过 Web API 或 Web 服务从在线服务器连接和加载您的内容。

> 4.  运行 Adob​​e Air 应用程序是否有任何框架要求？Adobe Air 应用程序运行的先决条件是什么？它的应用程序是否可移植？

您可以选择创建独立版本来构建任何操作系统，如 Windows、Mac，并且相同的代码可以构建用于 Android、iOS 和 BlackBerry。而且也不需要安装任何东西来运行 SQLite。

> 5.  Adobe Air 是一项已失效的技术，还是在 Adob​​e Air 中创建商业级桌面应用程序是否安全。

是的，您必须加密您的数据库和导出的 SWF 文件。

# css - 如何在 div 中居中弹出窗口？

> ID：14013712
> 
> 赞同：0
> 
> 时间：2012-12-23T18:51:09.743
> 
> 标签：css, html, popup

我找到了一些关于如何在孔屏中居中弹出 div 的解决方案，但我需要在其父 div 中居中（垂直和水平）。弹出窗口没有固定大小，它们是相对于父 div 的大小。我还没有找到任何关于这个的东西，我自己也做不到。因此，如果您有任何想法，请提供帮助。

这是我的代码：http: [//jsfiddle.net/crXCz/](http://jsfiddle.net/crXCz/)

```
<div id="container" style="width: something; height: something;> some text <br> some text     
<div class="popup"></div>
</div>

div.popup {
    height: 95%;
    width: 95%;
    border-color: #d3d7cf;
    border-width: 2px;
    border-style: solid;
    border-radius: 10px;
    background-color: #f3f3f3;
    z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:02:18.227

如果我理解正确，您的两个元素的高度都是动态的。我通常做的是添加一些javascript。（假设 jQuery）

```
function verticalAlign(el) {
    // Calculate marginTop by taking parents height minus element height
    // and divide the value by two
    var marginTop = (el.parent().height() - el.height()) / 2;

    // Apply the top margin to the element
    el.css('margin-top', marginTop);
}

verticalAlign($('.verticalAlign')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:57:10.447

我们需要了解您的文档代码。但根据我的理解，您希望将 div 元素居中。将 div 元素的位置设置为相对位置，将主容器的位置设置为绝对位置，并在弹出框中添加以下**CSS代码。**

```
.popup{
position:absolute;
top:50%;
height: <your value in percentage>;
margin-top: (negative value of your height, divided by 2);
width:<your value in percentage>;
left:50%;
margin-left: (negative value of your width, divided by 2);
} 
```

# jquery - 追加＆符号数据时JQuery追加错误

> ID：14013713
> 
> 赞同：0
> 
> 时间：2012-12-23T18:51:12.520
> 
> 标签：jquery, append

我正在使用 firefox 14.0.1 和最新的 jquery。由于未转义的＆符号，我的应用程序中出现以下代码错误。到现在为止还挺好。但是，当我将页面源复制到文件并让我的 Web 服务器提供该文件时，代码可以正常工作。任何想法这里发生了什么？

热情地

约翰

```
function create_dialog () {

    var new_dialog = $('<div id="new_dialog"/>');

    new_dialog.dialog({ autoOpen: true, modal: true, open: foo, height: 400 });

    function foo() {

        $.ajax({
           url:      'http://localhost:8010/ecomm/?ajax=1&state=pop_pl_cst',
           cache:    false,
           success:  function (data, textStatus, jqXHR) 
                         { new_dialog.append('<div>' + 'foo A&E' + '</div>'); },
           dataType: 'xml',
           error:    function(jqXHR, textStatus, fred ) {alert('oops ' + textStatus);},
        });

    }; // foo

} 
```

编辑：以上是我的代码的简单版本，用于重现错误。下面是实际版本。虽然我可以转义与号等，但它并不能解释为什么相同的代码与看起来是同一页面的代码不同。一定有什么不一样的地方...

```
function create_dialog ( ) {

    var new_dialog = $('<div id="new_dialog"/>');

    new_dialog.dialog({ autoOpen: true, modal: true, open: foo, height: 400 });

    function foo() {

        $.ajax({
            url:      'http://localhost:8010/ecomm/?ajax=1&state=pop_pl_cst',
            cache:    false,
            success:  success,
            dataType: 'xml',
            error:    function(jqXHR, textStatus, fred ) {alert('oops ' + textStatus);},
        });

        function success(data, textStatus, jqXHR) {

//             alert(data);
            $(data).find('row').each(process_row);
            function process_row () {
                console.log($(this).attr('pop_text'));
                new_dialog.append($('<div>' + $(this).attr('pop_text') + '</div>'));
//                 new_dialog.append('<div>' + 'foo' + '</div>');
            }

        } // success

    }; // foo

} 
```

我注意到的一件事是，当数据类型是文本时，jquery 在我的独立页面（有效的页面）中将其解析为 xml，但不在应用程序页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:54:28.710

HTML 非常宽容；当它遇到问题时，它不会放弃一切。但仅仅因为当你从服务器提供错误代码时它可以工作，并不意味着它是正确的。

未转义的实体会导致问题，就像您遇到的问题一样。*这就是为什么你需要逃避它们*。所以遵守规则，转义你的 HTML，你就可以开始了。

[mustache.js](https://github.com/janl/mustache.js/blob/master/mustache.js#L53)有一个非常简洁的示例：

```
var entityMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': '&quot;',
  "'": '&#39;',
  "/": '&#x2F;'
};

function escapeHtml(string) {
  return String(string).replace(/[&<>"'\/]/g, function (s) {
    return entityMap[s];
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:53:05.423

### 然后逃脱它：

```
new_dialog.append('<div>' + 'foo A&amp;E' + '</div>'); 
```

# ruby - 使用 Apple OTA Guide 制作 RUBY MDM 解决方案

> ID：14013714
> 
> 赞同：0
> 
> 时间：2012-12-23T18:51:13.130
> 
> 标签：ruby, mdm, ota

我一直在尝试遵循苹果指南，但对 Ruby 了解不多

1 你如何生根路由到 CA URL 处理程序（下面的代码）以及这段代码的去向大概我需要在某处声明一个类变量以包含 root.cert URL

```
world.mount_proc("/CA") { |req, res|
res['Content-Type'] = "application/x-x509-ca-cert"
res.body = @@root_cert.to_der
} 
```

有没有人遵循指南并让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:10:29.953

我相信 OS X 服务器包含 iOS MDM 的源代码（Ruby）。这是开始在 MDM 上工作的一段非常棒的代码。

你可以在这里阅读：http: [//www.gurutechnologies.net/blog/os-x-server-lion-profile-manger/](http://www.gurutechnologies.net/blog/os-x-server-lion-profile-manger/)

另外，看看这个： [如何开发 iPhone MDM Server？](https://stackoverflow.com/questions/8068317/how-to-develop-iphone-mdm-server)

# iphone - iphone - 无法格式化标签

> ID：14013721
> 
> 赞同：0
> 
> 时间：2012-12-23T18:51:54.707
> 
> 标签：iphone, objective-c, string, label

我无法格式化标签，这是我的代码：

```
ct.text = [NSString stringWithFormat:@"%i:%i", currentTimeMin, currentTime]; 
```

所以 ct 是标签，它不会显示值。

.h 文件中的 ct：`@property (nonatomic, retain) IBOutlet UILabel *ct;`

我也用过`(strong, nonatomic)`，但这并没有改变任何东西

currentTimeMin 设置为 0 和 currentTime`self.audioPlayer.currentTime`我认为问题可能存在。

我也试过把`ct.text = [NSString stringWithFormat:@"hey"];`也没有用

请帮我！我对此感到厌烦。谢谢！

******编辑******

 **奇怪的是，我在另一个 ViewController 中设置了一个标签，然后它工作了，但它只是在那个单一的视图中它不起作用。不知何故，不知何故。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:40:23.033

从您的评论和测试来看...

(
1) 您没有正确引用标签。应该是 self.ct

或者
(2) 您没有正确连接标签。请再次检查。如果您打算将内容分配给 label.text 但尚未将其连接到属性，您将得到空结果（就程序而言，您尚未分配/初始化属性）。**

# java - 现实世界中的 Clojure 和 Java 互操作

> ID：14013725
> 
> 赞同：12
> 
> 时间：2012-12-23T18:52:33.350
> 
> 标签：java, eclipse, jakarta-ee, maven, clojure

我正在考虑开始使用（不玩）Clojure。有什么有用的指南吗？我不是在询问 lein、javac 或任何其他“小型”手动工具。我需要知道如何在同一个项目中的 eclipse 中拥有 Java 和 Clojure 源代码。如何让他们在没有编译错误的情况下互相调用？如何配置maven？如何建立完全生产的开发环境？目前甚至可能吗？哪些插件可能有用？从哪儿开始？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-24T02:32:45.943

我有一个完整的 Eclipse、Maven 和 Clojure 生产设置，目前运行良好。希望它可以作为 Java IDE 中良好的多语言设置的示例有所帮助。

我不使用 leiningen - 一点也不反对 lein - 它在纯 Clojure/CLI 世界中非常好和理想。但我发现纯 Maven 更适合在带有 IDE 的多语言 Java+Clojure 环境中使用，因为工具集成要好得多。同样从生态系统/受众/社区的角度来看，如果您希望来自 Java 世界的人们能够构建您的源代码，那么如果您直接使用 Maven，那么您将减少很多混乱。

这是我的设置：

*   Eclipse 4.2 作为主要 IDE
*   [逆时针](http://code.google.com/p/counterclockwise/)Eclipse 插件 - 非常好，负责 REPL、Clojure 编辑等。
*   Maven 用于管理所有项目（我主要使用内置的 Eclipse Maven 集成，但偶尔也会使用 CLI 版本）
*   [cljunit](https://github.com/mikera/cljunit)用于使 JUnit 测试能够在项目的 Clojure 部分上运行
*   Github / Travis CI 用于 SCM 和持续集成，使用 Eclipse 中内置的 EGit 团队提供程序访问

就我如何管理/设置项目本身而言：

*   我使用标准 Maven 目录布局使用 Maven 配置所有内容。Polyglot Java+Clojure 项目通常同时具有`src/main/java`和`src/main/clojure`
*   Clojure 只是一个 Maven 依赖项，就像任何其他 Java 库一样。
*   我将 Clojure 源目录设置为 Maven 设置中的资源目录。这意味着`.clj`文件捆绑在任何 jar 中，并且可以在运行时动态加载/运行。
*   我通常像往常一样在 Java 端创建入口点`public static void main(...)`，但很快调用到 Clojure 代码。[请参阅这篇关于从 Java 调用 Clojure 的](http://clojurefun.wordpress.com/2012/12/24/invoking-clojure-code-from-java/)博客文章。

最后是多语言 Java+Clojure 的一些编码技巧

*   我发现 Java 更适合低级数据结构、库和算法，而 Clojure 更适合将事物集成在一起和“粘合”代码。
*   Clojure 调用 Java 通常比反过来更容易/更优雅。这也是有道理的，因为您通常希望依赖项以这种方式流动（更高级别的代码调用更低级别的代码）
*   如果您将所有 Java 类都设为不可变，那么它们在 Clojure 世界中运行得非常好，而且工作量很小。
*   有时值得让您的一个或多个 Java 类实现某些 Clojure 接口，尤其`clojure.lang.IFn`是例如。这样，您的 Java 对象就可以充当 Clojure 代码中的第一类函数。

这是一个混合 Java 和 Clojure 源代码的示例项目：

*   [https://github.com/mikera/enlight](https://github.com/mikera/enlight)

我还编写了一个小型库 ( [clojure-utils](https://github.com/mikera/clojure-utils) )，其中包含一些用于从 Java 调用 Clojure 的示例代码，您可能会发现它很有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-23T19:45:46.303

尽管你对 leiningen 的语气，我还是建议你看看。Leiningen 支持 Java 编译，因此在一个项目中结合 java 和 clojure 源代码不是问题。

Eclipse 的 clojure 插件逆时针插件可以与 leiningen 项目文件 (project.clj) 一起使用。因此，在 Eclipse 中，您可以通过在 project.clj 中定义正确的内容来为您处理依赖管理和 java 编译，而无需单独安装 leiningen 或从命令行执行命令。

在 project.clj 中设置**:java-source-paths**，例如：

```
:java-source-paths ["src/main/java"] 
```

在包 src/main/java 中放置一个类 Foo：

```
package main.java;

public class Foo {
    public static final String value = "Michiel";
} 
```

在 clojure 源文件中的某处定义此函数，并在调用它时打印“Michiel”：

```
(defn foo
  "I don't do a whole lot."
  []
  (println (main.Foo/value))) 
```

进一步阅读：

*   [http://leiningen.org/](http://leiningen.org/)
*   [http://code.google.com/p/逆时针/](http://code.google.com/p/counterclockwise/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:42:51.820

您也可以尝试框架“Funky”。它将完全分离您的 Clojure 和 Java 代码。看看[https://github.com/windler/Funky](https://github.com/windler/Funky)

# python - Django - “没有名为 django.core.management 的模块”

> ID：14013728
> 
> 赞同：110
> 
> 时间：2012-12-23T18:52:41.100
> 
> 标签：python, django

尝试从命令行运行 Django 时出现以下错误。

```
File manage.py, line 8, in <module>
     from django.core.management import execute_from_command_line
ImportError: No module named django.core.management 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-23T19:02:22.643

听起来你没有安装 django。您应该检查此命令生成的目录：

```
python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()" 
```

看看你那里是否有 django 包。

如果站点包中没有 django 文件夹，那么您没有安装 django（至少对于该版本的 python）。

您可能安装了多个版本的 python，而 django 位于另一个版本中。如果您键入`python`然后按 TAB，您可以找到所有 python 版本。这是我拥有的所有不同的python。

```
$python
python            python2-config    python2.6         python2.7-config  pythonw2.5
python-config     python2.5         python2.6-config  pythonw           pythonw2.6
python2           python2.5-config  python2.7         pythonw2          pythonw2.7 
```

您可以对每个版本的 python 执行上述命令，并查看每个版本的 site-packages 目录，看看它们是否安装了 django。例如：

```
python2.5 -c "from distutils.sysconfig import get_python_lib; print get_python_lib()"
python2.6 -c "from distutils.sysconfig import get_python_lib; print get_python_lib()" 
```

如果您碰巧在 python2.6 中找到 django，请尝试使用原始命令

```
python2.6 manage.py ... 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-03-17T15:51:04.247

```
sudo pip install django --upgrade 
```

为我做了伎俩。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-09-02T11:50:07.713

我遇到了同样的错误，并以这种方式修复了它：

我必须使用以下命令激活我的虚拟环境

```
source python2.7/bin/activate 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-10-05T10:09:07.200

很可能在您`manage.py`的第一行开头，`!/usr/bin/python`这意味着您正在使用系统全局 python 而不是虚拟环境中的。

所以更换

```
/usr/bin/python 
```

和

```
~/projectpath/venv/bin/python 
```

你应该很好。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-07-16T17:44:40.777

好吧，我今天在安装 virtualenv 和 django 后遇到了同样的错误。对我来说，我使用 sudo ( **sudo pip install django** ) 来安装 django，而我试图在没有**sudo的情况下运行****manage.py runserver**。我刚刚添加了 sudo 并且它起作用了。:)

 *** * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-10-14T00:29:15.293

您是否正在使用带有 Virtual Wrapper 的虚拟环境？你在 Mac 上吗？

如果是这样试试这个：

在命令行中输入以下内容以启动虚拟环境，然后对其进行处理

1.)

```
source virtualenvwrapper.sh 
```

或者

```
source /usr/local/bin/virtualenvwrapper.sh 
```

2.)

```
workon [environment name] 
```

注意（来自新手） - 不要在您的环境名称周围加上方括号

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-03-13T14:55:22.457

我在运行命令时遇到了同样的问题-

> python manage.py startapp <app_name>

但我的问题是我在虚拟环境之外运行该命令。所以只需先激活您的虚拟环境并再次运行该命令 -

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-10-13T00:46:45.480

我经历过同样的事情，这就是我所做的。

首先我的安装

> pip install -r requirements.txt

不在我的活跃环境中。所以我做的是激活我的环境然后再次运行

> pip install -r requirements.txt

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-04-13T07:13:27.433

当您的计算机上未安装 django 时会出现此问题。当 django 没有安装时，这意味着 django.core.management 模块也没有安装。所以它没有找到这个模块，它给出了错误。
为了解决这个问题，我们应该使用 pip 安装 django。打开命令行 cmd（在 Windows 上）并键入

```
pip install django 
```

此命令将在您的计算机中安装 django。如果你没有安装 pip。你应该安装点子。[这里如何在windows上安装pip](https://stackoverflow.com/a/36277641/4104008)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-05-03T10:33:37.790

Okay so it goes like this:

You have created a virtual environment and django module belongs to that environment only.Since virtualenv isolates itself from everything else,hence you are seeing this.

go through this for further assistance:

[http://www.swegler.com/becky/blog/2011/08/27/python-django-mysql-on-windows-7-part-i-getting-started/](http://www.swegler.com/becky/blog/2011/08/27/python-django-mysql-on-windows-7-part-i-getting-started/)

1.You can switch to the directory where your virtual environment is stored and then run the django module.

2.Alternatively you can install django globally to your python->site-packages by either running pip or easy_install

Command using pip: pip install django

then do this:

import django print (django.get_version()) (depending on which version of python you use.This for python 3+ series)

and then you can run this: python manage.py runserver and check on your web browser by typing :localhost:8000 and you should see django powered page.

Hope this helps.

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-11-30T22:14:43.797

如果这对其他人有帮助......我遇到了这个问题，因为我的 virtualenv 默认为 python2.7，而我在使用 Ubuntu 时使用 Python3 调用 Django。

检查我的 virtualenv 使用的是哪个 python：

```
$ which python3
>> /usr/bin/python3 
```

使用指定的 python3 创建了新的 virtualenv（使用 virtualenv 包装器[https://virtualenvwrapper.readthedocs.org/en/latest/](https://virtualenvwrapper.readthedocs.org/en/latest/)）：

```
$ mkvirtualenv --python=/usr/bin/python3 ENV_NAME 
```

python 路径现在应该指向 virtualenv python：

```
$ which python3
>> /home/user/.virtualenvs/ENV_NAME/bin/python3 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-12-05T03:17:53.557

就我而言，我使用的是 Ubuntu。问题可能是我没有以普通用户身份写入该文件夹的权限。您可以简单地`sudo`在命令之前添加，它应该可以完美运行。就我而言`sudo python manage.py syncdb`。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-09-09T12:46:44.153

如果您更改了 python 项目的目录结构，也会发生这种情况（我这样做了，然后对行为的变化感到困惑）。如果这样做，则需要更改 /bin/activate 文件中的一行。所以，假设你的项目在

```
/User/me/CodeProjects/coolApp/ 
```

并且您的激活文件位于

```
/User/me/CodeProjects/coolApp/venv/bin/activate 
```

当您设置项目时，您将项目更改为

```
/User/me/CodeProjects/v1-coolApp/ 
```

或者其他的东西。然后你需要打开

```
/User/me/CodeProjects/v1-coolApp/venv/bin/activate 
```

找到它说的那一行

```
VIRTUAL_ENV="/User/me/CodeProjects/coolApp"
export VIRTUAL_ENV 
```

并将其更改为

```
VIRTUAL_ENV="/User/me/CodeProjects/v1-coolApp" 
```

在重新激活之前

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-04-07T13:30:13.407

我遇到了同样的问题，并且效果很好，您应该在项目中导航主文件夹而不是键入：

```
source bin/activate 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-09-19T21:08:40.360

我遇到了同样的问题，我收到此消息的原因是因为我正在执行“manage.py runserver”，而执行“python manage.py runserver”修复了它。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-02-14T06:44:30.590

我的案例我在 mac 上使用了 pyCharm 5。我也有这个问题，运行这个命令后我的问题解决了

```
sudo pip install django --upgrade 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-03-04T19:25:53.927

有同样的问题。以 root 身份运行命令“python manage.py migrate”。使用 root 访问（sudo python manage.py migrate）工作正常

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-08-22T20:50:03.473

您可以这样尝试：（`python3 manage.py migrate`使 sur 在`src/`目录中）

您也可以尝试使用`pip install -r requirements.txt`（让您在迁移后`requirements.txt`键入时看到文件`ls`

如果毕竟它仍然不起作用，请尝试`pip install django`

希望能帮助到你

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-01-13T05:58:55.810

我在尝试使用**python manage.py runserver**时遇到了同样的问题。就我而言，我只使用**sudo su**。以 root 身份使用终端，然后再试一次，它可以部分工作。所以我使用 **python manage.py migrate**命令并修复它。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-04-23T13:11:03.700

在运行服务器之前，您必须先选择您的项目， `workon your_project_name` 然后 键入`python manage.py runserver`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-02-15T01:36:40.163

这是因为虚拟环境配置。您需要在 Python 的虚拟环境上工作。您应该尝试使用命令提示符，

```
workon virtual_enviornment_name 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2013-03-30T02:59:42.027

文件和目录所有权冲突将导致此处出现问题。确保项目下的目录和文件的所有权属于当前用户。（您可以使用带有 -R 选项的 chown 命令更改它们。）尝试重新运行该命令：这解决了我在运行“第一个 Django 应用程序”示例时遇到的问题：

```
python manage.py startapp polls 
```**

# c++ - cv::Mat 构造函数在哪里显式定义？

> ID：14013737
> 
> 赞同：2
> 
> 时间：2012-12-23T18:53:28.293
> 
> 标签：c++, opencv

[1] OpenCV 源代码中明确定义的 cv::Mat 数据结构构造函数（在 C/C++ 中）在哪里？

我假设一个 cv::Mat 数据结构是动态分配给堆的，比如

`cv::Mat mat(rows, cols, type);`

被调用，但在

`opencv / modules / core / src / matrix.cpp`也不在

`opencv / modules / core / src / datastructs.cpp`.

**已解决：** 在[matrix.cpp](https://github.com/Itseez/opencv/blob/master/modules/core/src/matrix.cpp#L183)`cv::Mat`中分配了一个。这是在[函数](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#cv-mat-create)内执行的。`fastMalloc()``cv::Mat:create()`

[2] 此外，我很想知道执行图像处理操作时 cv::Mat 在硬件中的位置：

. 始终在“主存储器”（SDRAM）中，

. 始终在片上高速缓存 (SRAM) 中，

. 还是两者的某种组合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:10:12.697

> cv::Mat mat(rows, cols, type);

这是内联构造函数，它在以下位置实现`core/mat.hpp`：

```
inline Mat::Mat(int _rows, int _cols, int _type) : size(&rows)
{
    initEmpty();
    create(_rows, _cols, _type);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T18:53:17.273

实际的构造函数在

.../核心/核心.hpp

```
class CV_EXPORTS Mat
{
public:
    //! default constructor
    Mat();
    //! constructs 2D matrix of the specified size and type
    // (_type is CV_8UC1, CV_64FC3, CV_32SC(12) etc.)
    Mat(int rows, int cols, int type);
    Mat(Size size, int type);
    //! constucts 2D matrix and fills it with the specified value _s.
    Mat(int rows, int cols, int type, const Scalar& s);
    Mat(Size size, int type, const Scalar& s);

    //! constructs n-dimensional matrix
    Mat(int ndims, const int* sizes, int type);
    Mat(int ndims, const int* sizes, int type, const Scalar& s);

    //! copy constructor
    Mat(const Mat& m);
    //! constructor for matrix headers pointing to user-allocated data
    Mat(int rows, int cols, int type, void* data, size_t step=AUTO_STEP);
    Mat(Size size, int type, void* data, size_t step=AUTO_STEP);
    Mat(int ndims, const int* sizes, int type, void* data, const size_t* steps=0);
 .....

}; 
```

# backbone.js - Backbone.js 嵌套视图不呈现数据

> ID：14013739
> 
> 赞同：0
> 
> 时间：2012-12-23T18:53:43.743
> 
> 标签：backbone.js, backbone-views

我正在尝试使用 Backbone.js 学习嵌套视图并遇到了问题。但是，不会引发任何错误，它不会显示任何输出或数据。任何帮助将非常感激。V/R 克里斯

链接到 jsFiddle：http: [//jsfiddle.net/cpeele00/PcmMW/8/](http://jsfiddle.net/cpeele00/PcmMW/8/)

```
var User = Backbone.Model.extend({});

var Users = Backbone.Collection.extend({
    model: User
});

var UserItemView = Backbone.View.extend({
    tagName: 'li',
    template: _.template($('#user-list-template').html()),
    render: function() {
        this.$el.html(this.model.toJSON());
        return this;
    }
});

var UserListView = Backbone.View.extend({

    render: function() {
        this.$el.empty();
        var self = this;
        this.collection.each(function(model) {
            self.renderItem(model);
        });
    },

    renderItem: function(item) {
        var itemView = new UserItemView({
            model: item
        });

        this.$el.append(itemView.render().el);
    }

});

var user1 = new User();
user1.set({
    firstname: 'momo',
    lastname: 'peele'
});

var user2 = new User();
user2.set({
    firstname: 'bobo',
    lastname: 'peele'
});

var users = new Users([user1, user2]);

var listView = new UserListView({
    collection: users
});
listView.render(); 
```

这是html和模板标记

```
<div id="user-list">
  <fieldset>
    <legend>Users</legend>
    <ul></uL>
  </fieldset>
</div>

<script id="user-list-template" type="text/template">
    <%= firstname %> 
    <%= lastname %> 
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:06:09.563

似乎有两个问题：

首先，输入错误`UserItemView`：您没有使用模板，只是附加了 JSON。代替

```
this.$el.html(this.model.toJSON());` 
```

它应该是

```
this.$el.html(this.template(this.model.toJSON())); 
```

其次，`UserListView`它不会在任何地方附加到 DOM，因此当它被“渲染”时，它不会出现。我添加了

```
el: $("#user-list ul") 
```

到视图，以便渲染将子视图项附加到实际在 DOM 中的元素。

[分叉的小提琴](http://jsfiddle.net/HBdmh/1/)

[**PS，**萤火虫是你的朋友。]

# vb.net - VB.NET：向类添加附加功能

> ID：14013741
> 
> 赞同：4
> 
> 时间：2012-12-23T18:53:49.340
> 
> 标签：vb.net, class, customization

“矩形”类没有公开我操作矩形所需的所有函数。例如，我经常只想更改“.Bottom”值。现有的功能都不允许我这样做，我发现自己创建了一个新的矩形来做我需要的事情。

这给我带来了一个普遍的问题：是否可以向框架中的类添加其他功能，然后在我的整个项目中可用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T18:58:10.090

你可以

1.  `Rectangle`通过[**扩展方法**](http://msdn.microsoft.com/en-us/library/bb384936.aspx)扩展类（如）[](http://msdn.microsoft.com/en-us/library/bb384936.aspx)
***   创建一个包含`Rectangle`实例（有一个矩形）的自定义类并添加其他属性和方法**

 **请注意，您不能继承 from`Rectangle`来扩展它的功能，因为它不是 a`Class`而是`Structure`.

这是一个简单的扩展：

```
Module RectangleExtensions

    <System.Runtime.CompilerServices.Extension()> _
    Public Sub Move(rectangle As Rectangle, x As Int32, y As Int32)
        rectangle.Location = New Point(x, y)
    End Sub

End Module 
```

您可以像使用现有方法一样使用它`Rectangle`

```
Dim rec = New Rectangle(New Point(100, 100), New Size(50, 50))
rec.move(100, 200) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:11:16.317

您可以使用[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。但是有一个缺点：您不能以这种方式使用类的任何私有或受保护成员。

另一方面，您可以尝试创建自己的类并从该类继承，但有两个可能的缺点：

*   您仍然不能使用该继承类中的任何私有成员（但可以使用受保护的成员）
*   并非框架中的每个类都可以被继承 - 其中一些被标记为密封并且它们不能被继承**

# c# - 在 Windows 8 中写入文件时异步

> ID：14013744
> 
> 赞同：2
> 
> 时间：2012-12-23T18:54:01.310
> 
> 标签：c#, asynchronous, winrt-xaml, async-await

当我执行按钮单击事件并在打开时写入文本文件时，它仍然挂起 UI 线程的任何原因。在写完之前不能做任何事情。

```
private async void WriteFileClick(object sender, RoutedEventArgs e)
    {
        string fileName = @"asyn3cfile.txt";
        string text = "Hello async, this was written while you were doing something else in the UI";

        StorageFolder storageFolder = KnownFolders.DocumentsLibrary;
        var writtenFile = await storageFolder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);

        using (IRandomAccessStream randomAccessStream = await writtenFile.OpenAsync(FileAccessMode.ReadWrite))
        {
            Stream stream = randomAccessStream.AsStreamForWrite();
            stream.Seek(0, SeekOrigin.Begin);
            WriteFileTextAsync(text, stream);
            await stream.FlushAsync();
            await randomAccessStream.FlushAsync();
        }
        Debug.WriteLine("{0} was created", fileName);
    }

    private async static void WriteFileTextAsync(string text, Stream stream)
    {
        for (int i = 0; i < 100; i++)
        {
            var fileText = string.Format("{0} in process {1}\n", text, i);
            byte[] textBytes = Encoding.UTF8.GetBytes(fileText);
            stream.SetLength(stream.Length + textBytes.Length);

            await stream.WriteAsync(textBytes, 0, textBytes.Length);
            new System.Threading.ManualResetEvent(false).WaitOne(100);
        }
    } 
```

XAML

```
<Button x:Name="WriteFileInDocumentsButton" Content="Write a text file" Click="WriteFileClick"/> 
```

有什么理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:42:47.367

你应该改变：

```
 private async static void WriteFileTextAsync(string text, Stream stream)
{
    for (int i = 0; i < 100; i++)
    {
        var fileText = string.Format("{0} in process {1}\n", text, i);
        byte[] textBytes = Encoding.UTF8.GetBytes(fileText);
        stream.SetLength(stream.Length + textBytes.Length);

        await stream.WriteAsync(textBytes, 0, textBytes.Length);
        new System.Threading.ManualResetEvent(false).WaitOne(100);
    }
} 
```

到

```
 private async static Task GetFileTextAsync(string text, Stream stream)
{
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < 100; i++)
    {
        sb.AppendLine(string.Format("{0} in process {1}\n", text, i));            
    }
    await stream.WriteAsync(textBytes, 0, textBytes.Length);
} 
```

这将有助于节省一些开销，但更重要的是您必须更改：

```
 using (IRandomAccessStream randomAccessStream = await writtenFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        Stream stream = randomAccessStream.AsStreamForWrite();
        stream.Seek(0, SeekOrigin.Begin);
        WriteFileTextAsync(text, stream);
        await stream.FlushAsync();
        await randomAccessStream.FlushAsync();
    }
    Debug.WriteLine("{0} was created", fileName); 
```

在 WriteFileAysnc 方法调用中包含 await 关键字。

```
using (IRandomAccessStream randomAccessStream = await writtenFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        Stream stream = randomAccessStream.AsStreamForWrite();
        stream.Seek(0, SeekOrigin.Begin);
        **await** WriteFileTextAsync(text, stream);
        await stream.FlushAsync();
        await randomAccessStream.FlushAsync();
    }
    Debug.WriteLine("{0} was created", fileName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:02:50.473

您编写的代码中存在一些错误。您不是在等待 WriteAsync，WriteFileTextAsync 应该返回一个任务，并被等待。

[如果您只是编写字符串，您会发现使用FileIO](http://msdn.microsoft.com/en-us/library/windows/apps/hh701508.aspx)辅助方法更容易。

# java - 单元测试类风格

> ID：14013748
> 
> 赞同：4
> 
> 时间：2012-12-23T18:54:13.523
> 
> 标签：java, unit-testing

在编写单元测试时，我总是`extends Assert`，所以我可以无条件地访问对许多`Assert.assertXXX`方法的许多调用：

例如：

```
public class MyTestClass extends Assert {
    @Test
    public void SomeTest() {
        assertNotNull(""); // instead of Assert.assertNotNull("");
    }
} 
```

扩展`Assert`节省了我的打字时间`Assert.assertNotNull("");`。在`Assert.`我看来，代码混乱，因为你经常使用它。

我的测试类很少需要扩展另一个类，如果需要，我倾向于让超类扩展 Assert。

然而，感觉就像我打破了一些编码风格来扩展只是为了避免导入和限定。

是这种“糟糕”的编码风格吗？
如果我这样做，它仍然是“最佳实践”代码吗，因为它只是一个测试类？

### 编辑：

```
import static org.junit.Assert.*; 
```

不起作用，因为我的 Eclipse 代码格式化程序解析了所有导入，因此对于每次保存时实际使用的所有方法，这样的行会被替换并替换为单独的导入，如果我使用新的断言方法，则需要重新导入。

诚然，在编写测试类代码一段时间后，导入*新*方法的需求减少了，但是在编写新测试类代码时却很麻烦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T18:59:22.840

不，这样做：

```
import static org.junit.Assert.*;

public class MyTestClass {
   @Test
   public void SomeTest() {
       assertNotNull("");
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T18:59:46.357

如果不需要，我个人不喜欢扩展课程。您是否考虑过使用您正在使用的方法的静态导入？在旁注中，我建议尝试 Fest 断言以获得更好、更易读的测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T19:44:28.697

除非需要多态性，否则扩展类是不好的风格。这样做类似于 Sun 所说的[Constant Interface Antipattern](http://docs.oracle.com/javase/7/docs/technotes/guides/language/static-import.html)。正如您在该页面上看到的那样，静态导入语句被添加到语言中专门用于防止它。

就个人而言，我只是写`Assert.assertNotNull(value)`。这不是很多打字，我不觉得它会损害可读性。

如果您坚持使用不合格的方法，则应该使用静态导入来导入每个方法，因为以“*”结尾的导入语句也被认为是不良风格。如果其他人来维护您的代码（或者如果您在六个月后回来查看它），以“*”结尾的导入将需要维护者做一些侦探工作来找出方法来自哪里，而显式导入则可以立即明确该方法的来源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T19:52:48.377

我有同样的问题 - 但很容易解决：

像其他人说的那样使用：

```
import static org.junit.Assert.*;

public class MyTestClass {
   @Test
   public void SomeTest() {
       Assert.assertNotNull("");
   }
} 
```

* * *

**这是最重要的部分：**

并转到：Window->Preferences，Java->Code Style->Organize Imports，“.* 所需的静态导入数（例如'java.lang.Math.*'）：”-> 更改为 0。

现在您的代码格式化程序不会将“.*”导入更改为“单类”导入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T19:05:34.127

或者，如果您不喜欢 '.*'-imports：

```
Import static org.junit.Assert;

public class MyTestClass {
   @Test
   public void SomeTest() {
      Assert.assertNotNull("");
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T21:43:45.663

首先：您在问这个问题，所以您也可以看到您的方式是错误的:) 正如每个人都告诉您的那样，应该使用静态导入来完成。这是正确的方法。时期。

正确的问题是如何让日食帮助你而不是干涉。至少有两种方法。首先，您可以在 eclipse 扩展 import xxx.* 时设置阈值。只需更改它，您就可以拥有您的 xxx.* 其他方式是将断言添加到您的上下文辅助中。这样，eclipse 将建议您使用您的断言，而无需先导入它们。

和我的方式：不要使用junit断言。使用 fest 断言 2.0。你可以静态导入 xxx.assertThat 就是这样。

# sql-server-ce - AppHarbor 错误 - 无法找到请求的 .Net Framework 数据提供程序。它可能没有安装

> ID：14013753
> 
> 赞同：0
> 
> 时间：2012-12-23T18:54:41.057
> 
> 标签：sql-server-ce, gac, appharbor

尝试将我的 ASP.NET MVC 项目部署到 AppHarbor 时出现上述错误：这是堆栈跟踪：

```
[ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not be installed.]
   System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +77
   System.Data.Entity.Infrastructure.SqlCeConnectionFactory.CreateConnection(String nameOrConnectionString) +56
   System.Data.Entity.Internal.LazyInternalConnection.Initialize() +309
   System.Data.Entity.Internal.LazyInternalConnection.get_ProviderName() +13
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +330
   System.Data.Entity.Internal.LazyInternalContext.MarkDatabaseInitialized() +16
   System.Data.Entity.Database.Initialize(Boolean force) +24
   TolMobile.Data.Context.TolTestDbContext.InitialiseDatabase(IDatabaseInitializer`1 strategy) in d:\temp\wepseqgv.iiu\input\TolMobile.Data\Context\TolTestDbContext.cs:21
   TolMobile.MvcApplication.Application_Start() in d:\temp\wepseqgv.iiu\input\TolMobile\Global.asax.cs:63 
```

我搜索了高低，并尝试将所需的 SQLCe 依赖项添加到启用了“LocalCopy”的项目中，但仍然没有运气。如果丢失的程序集（如果这是问题）会显示在日志中，那就太好了，这样我就知道出了什么问题。

我认为这绝对是一个大会 GAC 问题。AppHarbor 服务器上的 GAC 缺少一些东西，因为它在我的机器上运行良好。但是我不明白的是，所有依赖项都是通过 NuGet 添加的，并且应该包含在项目中并且是自包含的。为什么这不能在另一台服务器上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:01:45.123

您不应该在 AppHarbor 上使用 SQL Server CE。SQL Server CE 使用工作人员文件系统进行存储，并且不会在部署中持久保存，如果您已扩展到多个工作人员，它也不会在工作人员之间同步。请改用 SQL Server 加载项。这是一个[指南](http://support.appharbor.com/kb/add-ons/using-sequelizer)。

# ruby-on-rails - 按年份过滤记录

> ID：14013754
> 
> 赞同：1
> 
> 时间：2012-12-23T18:55:03.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

需要使用 created_at 字段按年份过滤文章。

我在这样的文章中获得了多年的链接：

**文章助手：**

```
 def artcles_by_years
    Article.uniq.pluck("EXTRACT(YEAR FROM created_at)")
  end 
```

**index.html.erb**

```
 <% for art in artcles_by_years do %>
    <%= link_to art %>
  <% end %> 
```

它显示：`2009 2010 2011 2012`，当然，非工作链接。

问题：

我将如何在控制器中建立工作链接和查询以按年份过滤文章，例如按 2009 并返回 2009 年创建的所有文章。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T19:02:46.240

您可以为模型添加范围

```
scope :year, lambda{|year|
  where(" EXTRACT(YEAR FROM created_at) = ? ", year ) if year.present?  
} 
```

并使用控制器中的范围：

```
@articles = Article.year(params[:year]) 
```

显示链接为：

```
<%= link_to art, articles_path( :year => atr) %> 
```

# windows - 写入系统驱动器 C 上的文件：在 Delphi 中没有管理员权限

> ID：14013758
> 
> 赞同：5
> 
> 时间：2012-12-23T18:55:39.423
> 
> 标签：windows, delphi, admin-rights

我正在尝试在 Windows 8 中的 Delphi XE3 中将备忘录文本写入 .txt 文件，但是由于某种原因，当我在 IDE 中运行程序时它可以工作（临时 .exe 在我的 D: 驱动器上）但是当我复制我的程序到 C:\Myprogram.exe 它给出了错误“拒绝访问”所以我不能在 C:\ 的任何地方写

我已经尝试过制作清单，但没有奏效。

PS：我不想以管理员身份运行我的程序，当我以管理员身份运行时，它可以工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T18:58:33.823

如果你不是管理员，你不能在某些地方写。那是为了保护您（或您的用户），这是一个规则，如果不禁用 UAC，您就无法规避，您不应该依赖它（如果在 Windows 8 中可能的话）。

选择一个*可以*写入的位置，例如 Documents 文件夹或另一个用于存储应用程序数据的[特殊文件夹。](http://delphi.about.com/od/kbwinshell/a/SHGetFolderPath.htm)

# c - 使用指针的字符串操作中的 SIGSEGV 错误

> ID：14013759
> 
> 赞同：-3
> 
> 时间：2012-12-23T18:55:48.377
> 
> 标签：c, segmentation-fault

```
#include<stdio.h>
#include<string.h>
int main(void) {
    int t, n, i, j;
    char dir[41][52];
    char right[] = "Right";
    char left[] = "Left";
    char *p = NULL, storeDir[10], *k = NULL;
    scanf("%d", &t);
    while(t--) {
        scanf("%d", &n);
        fflush(stdin);
        for(i = 0; i < n; i++) {
            gets(dir[i]);
            fflush(stdin);
        }
        i = n - 1;
        k = dir[i];
        j = 0;
        p = strchr(dir[i], 'o');
        while(*k != ' ') {
            storeDir[j] = *k;
            k++;
            j++;
        }
        storeDir[j] = '\0';
        printf("Begin ");
        printf("%s\n", p);
        for(i = n - 2; i  >= 0; i--) {
            if(strcmp(storeDir, right) == 0) {
                printf("Left ");
            }
            else if(strcmp(storeDir, left) == 0) {
                printf("Right ");
            }
            k = dir[i];
            j = 0;
            p = strchr(dir[i], 'o');
            while(*k != ' ') {
                storeDir[j] = *k;
                k++;
                j++;
            }
            storeDir[j] = '\0';
            printf("%s\n", p);
        }
        printf("\n");
    }
    return 0;
} 
```

这是一个代码，它只接收一些字符串并通过使用指针操作它们来打印出来。它在我的计算机上运行良好，但是当我在 [http://ideone.com/](http://ideone.com/)上运行它时，它会出现 SIGSEGV 错误。我认为这是由于一些无效的指针引用。但是，我无法弄清楚我哪里出错了。有人可以向我指出这一点吗？这是该程序的示例测试用例：

```
4
Begin on Road A
Right on Road B
Right on Road C
Left on Road D 
```

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:17:55.630

1.  你正在使用`gets()`：[不要那样做](http://beej.us/guide/bgc/output/html/multipage/gets.html)。
2.  您没有检查错误代码；如果`scanf()`没有以*完全*正确的格式接收数据，`n`则不会有正确的值。
3.  您没有检查错误代码：当`strchr()`找不到 a时`o`，它返回 NULL
4.  您的“测试数据”没有正确的数据。将此与不进行错误检查相结合是灾难的根源。

这就是它出错的地方：您执行`scanf()`加载`t`，这未反映在您的“测试数据”中（这将表明 4 条记录，而实际上只列出了一条）。下一个字符是*回车*，它`scanf()`吃了但没有继续。

next `scanf()`to read`n`获取下一个字符，一个*Newline*，它不是一个数字，所以它失败了。

现在我们有一些随机数（无论堆栈上的什么）`n`，我们调用`gets()`它加载到一些随机`dir[]`槽中的一些数据：仍在输入队列中的字符是*换行符*，所以它返回一个空字符串。

当`strchr()`找不到你期望的`o`in`"on"`时，它返回 NULL，然后我们取消引用 in `storeDir`，这是你的程序崩溃的地方：一个空指针异常。当然，除非你很幸运并`gets()`覆盖了一些数据，或者你的堆栈包含一个小到足以放入`dir`.

如果我给你的程序“正确”的数据，例如：

```
1 4 Begin on Road A
Right on Road B
Right on Road C
Left on Road D 
```

您的程序成功完成。

# javascript - 将参数绑定到主干模型更改事件的方法

> ID：14013761
> 
> 赞同：3
> 
> 时间：2012-12-23T18:55:59.790
> 
> 标签：javascript, backbone.js

我认为这个问题更像是一个 javascript 问题而不是主干问题，但是我在主干中开发应用程序时遇到了这个问题，所以这就是我要问的上下文。

我正在将带有参数的方法绑定到模型的更改事件。下面的代码在绑定侦听器时执行该方法，而不是在触发事件时：

`this.model.on("change:disposition", this.dChange("disposition"), this);`

而以下代码在触发更改事件时执行该方法（所需的行为）：

`this.model.on("change:disposition", function(){ this.dChange("disposition"); }, this);`

如果有人能描述在这两种情况下具体发生了什么，我将不胜感激。另外，有没有更好的方法来绑定带有参数的方法，而不是像我所做的那样将它包装在一个闭包中？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:58:35.927

当您调用时，`this.dChange("disposition")`您正在调用该函数。（您正在使用括号`()`来调用）

但是当你这样做`function() {}`或者`this.dChange`你实际上是在引用一个函数对象时。一旦事件被触发，事件管理器就会调用这个引用。

*旁注：*在您的情况下，您可以使用 Underscore.js 的[bind](http://underscorejs.org/#bind)方法，而不是使用匿名函数，如下所示：

```
this.model.on("change:disposition", _.bind(this.dChange, this, "disposition")); 
```

# ruby-on-rails-3 - 验证应该失败时才通过 - Michael Hartl 的 RoR，6.2.2

> ID：14013762
> 
> 赞同：0
> 
> 时间：2012-12-23T18:56:04.157
> 
> 标签：ruby-on-rails-3, validation

我正在尝试向我的用户模型添加验证，但数据没有失败，而是继续传递。对于名字，我没有条目。见下文：

```
1.9.3p286 :012 > user = User.new(name: "", email: "fail@fail.com")
  => #<User id: nil, name: "", email: "fail@fail.com", created_at: nil, updated_at: nil> 

1.9.3p286 :013 > user.save
   (0.1ms)  SAVEPOINT active_record_1
  SQL (1.5ms)  INSERT INTO "users" ("created_at", "email", "name", "updated_at") VALUES    (?, ?, ?, ?)  [["created_at", Sun, 23 Dec 2012 18:52:00 UTC +00:00], ["email",   "fail@fail.com"], ["name", ""], ["updated_at", Sun, 23 Dec 2012 18:52:00 UTC +00:00]]
   (0.1ms)  RELEASE SAVEPOINT active_record_1
 => true 
```

这是我所拥有的`app/models/user.rb`：

```
class User < ActiveRecord::Base
  attr_accessible(:name, :email)

  validates(:name, presence: true)
end 
```

这应该是失败的。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:47:52.370

它应该可以工作，我认为您在添加验证后没有重新加载控制台

# java - Freemarker 日期格式 - 在不同的机器上不同？

> ID：14013764
> 
> 赞同：2
> 
> 时间：2012-12-23T18:56:08.887
> 
> 标签：java, date, freemarker

我有一个问题，我的 Freemarker 模板在不同的机器上生成不同的日期格式。

我的 Freemarker 宏如下所示：

```
<#macro renderTextEntry textEntry>
    <div id="text_entry_${textEntry.id}" class="text_entry">
        <span id="text_entry_${textEntry.id}_date" class="text_entry_date">${textEntry.time?datetime}</span>:
        <div id="text_entry_${textEntry.id}_content" class="text_entry_content"><#noescape>${textEntry.text}</#noescape></div>
        <button class="edit_text_entry">Edit</button>
        <a class="delete_text_entry" href="/delete-text-entry?id=${textEntry.id}"><img
                src="images/delete.png" alt="delete text entry"/></a>
    </div>
</#macro> 
```

我对结果进行了单元测试，预期的结果是：

```
<div id="text_entry_5" class="text_entry">
    <span id="text_entry_5_date" class="text_entry_date">Jan 2, 1970 11:17:36 AM</span>:
    <div id="text_entry_5_content" class="text_entry_content">some text</div>
        <button class="edit_text_entry">Edit</button>
        <a class="delete_text_entry" href="/delete-text-entry?id=5">
            <img src="images/delete.png" alt="delete text entry"/>
        </a>
</div> 
```

此测试通过一台机器。另一方面，它失败了。唯一的区别是日期输出为

```
02-Jan-1970 11:17:36 
```

TextEntry.getDate() 返回一个 java.util.Date 对象。

两台机器都是运行 OSX 10.7.5 和 Java 1.7.0_10-b18 的 MacbookPro。我不知道我设置的任何影响默认 DateFormat 的环境变量 - 只是运行

```
System.out.println(new Date()); 
```

在两台机器上产生相同的输出。我不知道这里发生了什么 - 任何帮助将不胜感激！

注意：我通过明确声明我想要的日期格式解决了我的问题 - 相关的 Freemarker 片段现在是

```
${textEntry.time?string("MMM d, yyyy HH:mm:ss a")} 
```

但是，很高兴了解这里发生了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:59:45.420

也许您在另一台计算机上使用另一种浏览器语言？

据我所知，默认日期格式取决于使用的语言环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T23:16:17.077

由于日期/时间格式因您的国籍而异，因此 FreeMarker 的默认日期/时间格式取决于 FreeMarker 的`locale`设置。有关 FreeMarker 设置，请参阅[http://freemarker.org/docs/pgui_config_settings.html 。](http://freemarker.org/docs/pgui_config_settings.html)如您所见，`locale`可以在各个级别指定设置，并且最好在模板之外完成。如果您的应用程序没有国际化，您可能希望在 FreeMarker`Configuration`对象中使用`setLocale(Locale)`. 否则，您可能希望在`Environment`-level 上执行相同的操作，以使其适合当前访问者的语言环境。

由于您没有指定`locale`任何地方，FreeMarker 使用了 Java 选择的默认语言环境，这通常是操作系统（Web 服务器）的默认语言环境。截至`Date.toString`，它主要用于调试，程序员的眼睛，所以它忽略了语言环境，这就是为什么它总是打印相同的。

请注意，如果与区域设置关联的格式仍然不是您想要的，可以使用FreeMarker的`date_format`、`time_format`和设置微调日期和时间格式。`datetime_format`使用`?string('...')`只是最后的手段。

# python - 使用元组和整数时字符串对象不可调用

> ID：14013767
> 
> 赞同：0
> 
> 时间：2012-12-23T18:56:42.370
> 
> 标签：python

我彻底慌了。我从一个文本文件创建了一个元组列表，并完成了所有到整数的转换：

```
for line in f:
    if firstLine is True: #first line of file is the total knapsack size and # of items. 
        knapsackSize, nItems = line.split()
        firstLine = False 
    else:
        itemSize, itemValue = line.split()
        items.append((int(itemSize), int(itemValue)))
print items

knapsackSize, nItems = int(knapsackSize), int(nItems) #convert strings to ints 
```

我有访问元组以获得更易读代码的函数：

```
def itemSize(item): return item[0]
def itemValue(item): return item[1] 
```

然而，当我调用这些函数时，即：

```
elif itemSize(items[nItems-1]) > sizeLimit 
```

我得到一个莫名其妙的`"'str' object is not callable"`错误，引用上述代码行。我已经使用 instsanceof 检查了所有应该是元组或 int 的内容，并且全部检查出来。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:59:42.637

因为此时：

```
itemSize, itemValue = line.split() 
```

`itemSize`仍然是一个字符串 - 您已附加到`items`转换后的`int`值...

我也会稍微改变你的逻辑来处理第一行：

```
with open('file') as fin:
    knapsackSize, nItems = next(fin).split() # take first line
    for other_lines in fin: # everything after
        pass # do stuff for rest of file 
```

或者只是更改全部内容（假设它是一个 2 列的整数文件）

```
with open('file') as fin:
    lines = (map(int, line.split()) for line in fin)
    knapsackSize, nItems = next(lines)
    items = list(lines) 
```

并且可能代替您的函数来返回项目-使用 a`dict`或 a `namedtuple`...

或者，如果您想保留功能，请转到`operator`模块并使用：

```
itemSize = operator.itemgetter(0) 
```

# php - 用于 SQL Server 集群和高并发的 MySQL 或 PostegreSQL？

> ID：14013774
> 
> 赞同：0
> 
> 时间：2012-12-23T18:57:26.507
> 
> 标签：php, mysql, postgresql

前段时间，我创建了一个并发度很高的 REST 服务。

即使在 SQL 查询优化之后，这给了我更大的思考时间窗口，我开始担心该服务的 MySQL DB 服务器。

服务：

*   多个 Apache 服务器，用于负载平衡，在 NGINX 反向代理后面处理高并发
*   PHP Opcode 缓存和 Memcached 数据缓存
*   在 64 位操作系统上具有 InnoDB 表模式的 MySQL 数据库服务器
*   SQL 查询是存储过程

我在相对较快的时间内可能面临的问题是：

*   MySQL DB 服务器达到了数 TB 数据的存储限制
*   MySQL DB 服务器达到专用 CPU/RAM/TCP 的最大并发查询数

我找到了哪些解决方案并正在考虑：

*   MySQL 集群，但看起来它不支持 Integrity（FK？）
*   用于负载平衡的多个复制 MySQL 服务器（缺点：存储过多）
*   分片（缺点：在这一点上，当我需要尽快找到解决方案时，对我来说看起来很复杂）
*   切换到 PostegreSQL 并针对此特定 SQL Server 进行更多调查

对于卸载 MySQL 服务器，您有什么建议，最好的选择？如果我什么都不做，它最终会崩溃。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:20:41.340

您可以考虑的另一种解决方案。

您可以使用池服务，这些服务是一些具有最高需求优先级的查询。例如，在 stackoverflow 中，大多数想要使用他们的 API 的人都会询问最新的问题。所以第一个人询问他们可以从他们的数据库中得到的最新问题。但是只要是高优先级的查询就会被添加到池中，所以任何需要它的人都可以直接从池中检索它，而不需要从服务器请求它花费那么多时间。

关于池的实施，这是另一个要讨论的标准。

另一个解决方案是：如果您拥有非常大规模的数据集群并且您的选择语句增加了很多，那么您可以使用 hadoop 中的 hdfs 并在任意数量的服务器上应用 hadoop。Facebook、linkedIn 和 yahoo 都使用此方法。

# error-handling - Sublime Text 2 错误尾随逗号在右括号之前

> ID：14013776
> 
> 赞同：7
> 
> 时间：2012-12-23T18:57:38.790
> 
> 标签：error-handling, package, text-editor, sublimetext2

我从首选项更改了用户设置并保存了它。然后我尝试打开编辑器，但我收到错误消息。所以我卸载并再次安装它。虽然，没有用。错误消息中提到的路径也不存在。

错误信息是：

```
Error trying to parse setting: Trailing comma before closing bracket in C:\Users
Rajanand\AppData\Roaming\Sublime Text 2\Packages\User\Preferences.sublime-settings:5:1 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T00:40:51.057

去`Preferences > Settings - User`。AppData 在 Windows 中默认隐藏，使用资源管理器的文件夹选项显示。

您的问题是您在该文件的某处有一个额外的逗号。从任何列表中的最后一个设置中删除逗号。没有看到那个文件，我不能告诉你确切的位置。以下是示例：

```
{
  setting1,
  setting2,
  last_setting,<-- remove
} 
```

从最后一个设置中删除逗号。

或者

```
{
  setting1,
  setting2:
  [
    setting2_item1,
    setting2_last_item,<-- remove
  ]
} 
```

从 setting2_last_item 中删除逗号。

或者

```
{
  setting1:
  [
    setting1_item
  ],
  setting2:
  [
    setting2_item
  ],<-- remove
} 
```

删除setting2列表后的逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T19:19:05.270

以上答案帮助我了解了崇高的文字3

但只是想添加这个......

对于像我这样的新手，如果您想添加自定义设置并尝试将其添加到首选项文件中，并且您也遇到了错误...在我的情况下，我确实喜欢以下内容...

```
{
    "ignored_packages":
    [
      "Vintage"
    ], // <-- I put the comma there so I can add the below, new setting.

    "tab_size": 2 //My new setting
} 
```

# android - Android：Google Cloud Storage API 中的 SQLite 存储

> ID：14013787
> 
> 赞同：0
> 
> 时间：2012-12-23T18:58:58.393
> 
> 标签：android, sqlite, google-api

我可以使用 Google Cloud Storage API 来存储 SQLite 数据库吗？其中包括几个字符串、整数值和图像？如果我不能，我应该使用哪个 API，有人可以帮助我吗？编辑：我想在线存储这些数据，它们应该总是可以改变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:53:27.567

是的，你可以在谷歌存储上存储任何类型的数据，只要它符合服务条款（不包括色情和我认为的其他内容）。一旦数据库在 GS 中，您就无法对数据库进行操作，例如更新和插入。您只能将整个数据库作为 blob 上传。如果您正在寻找一个功能数据存储来访问单个记录，您可能需要查看 Appengine 的数据存储或 SQL 产品，或其他数十种云服务。

# entity-framework - 在异步场景中处理非关键字段上的 EF 中的“重复”行

> ID：14013789
> 
> 赞同：0
> 
> 时间：2012-12-23T18:59:13.963
> 
> 标签：entity-framework

我目前有一个这样的对象（简化）：

```
public class Image {
    public int Id { get; set; }

    public int ExternalId { get; set; }
} 
```

现在假设我有这个方法（主要是伪代码）：

```
public void GetImage(int externalId) {
    var existingImage = db.Images.FirstOrDefault(i => i.ExternalId == externalId);

    if (existingImage != null) {
        return existingImage;
    }

    var newImage = new Image() { ExternalId = externalId };
    db.Images.Attach(newImage);
    db.SaveChanges();

    return newImage;
} 
```

因为 ExternalId 不是键，所以更改跟踪器不会关心跟踪器中是否有“重复”图像。

所以现在，假设这个方法被调用了两次，同时通过 AJAX 和 Web API（我当前的场景）。它是异步的，所以现在有两个线程调用这个方法。

如果调用之间的时间足够短（在我的情况下是这样），则会将两行添加到具有相同外部 ID 的数据库中，因为现有的检查都不会返回一行。我已经大大简化了这个示例，因为在我的真实示例中，当我从服务中获取“图像”时存在时间问题。

我怎样才能防止这种情况？无论图像是新的还是更新的，我都需要返回图像。我在数据库中添加了一个唯一约束，所以我得到了一个异常，但是在客户端上，调用失败了，而它*应该*使用现有的图像而不是抛出异常。

如果我正确理解 EF，我可以通过创建`ExternalId`一个主键然后使用并发来处理这个问题，对吧？有什么方法可以避免更改我当前的模型，还是这是唯一的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:02:40.497

如果您已经拥有定义实体唯一性的属性 ( `ExternalId`)，则应将其用作键，而不是创建另一个未指定实体真正唯一性的虚拟键。如果您不用`ExternalId`作键，则必须在数据库中的该列上放置唯一约束，并在代码中处理异常以`Image`从数据库加载现有的。

# javascript - JSON 未正确解码

> ID：14013790
> 
> 赞同：0
> 
> 时间：2012-12-23T18:59:15.763
> 
> 标签：javascript, json

我使用 Twitter Bootstrap 作为我的 Web 应用程序的基本框架。

我正在尝试使用 JSON 将数据从我的 PHP 脚本传递回客户端，使用这段 javascript：

```
$(function($) {
    $('form[data-async]').live('submit', function(event) {
        var $form = $(this);
        var $target = $($form.attr('data-target'));

        $.ajax({
            type: $form.attr('method'),
            url: $form.attr('action'),
            data: $form.serialize(),
            dataType: 'json',

            success: function(data, status) {
                $.getJSON(url, function(data) {
                    var response = $.parseJSON(data);
                    $target.html(response.html)
                });
            }
        });

        event.preventDefault();
    });
}); 
```

但是，写入模型的是 JSON 数据，而不是我期望的 HTML。

服务器端代码：

```
$ContentBits['content'] = $this->content;

    $html = ContentFactory::capture_output(ROOT . DS . 'library' . DS . 'cbd' . DS . 'templates' . DS . 'ajaxAlert.php');

    $jsonArray = array(
        'html' => $html,
        'resultCode' => 1
    );
    $json = json_encode($jsonArray);
    header('Content-Type: application/json');
    echo $json; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:02:35.350

该`$.getJSON`方法已经将来自服务器的结果解析为 JSON，因此您无需`$.parseJSON`再次调用。传递给你的回调的`data`参数已经代表了一个你可以直接使用的 JSON 对象：

```
$.getJSON(url, function(data) {
    $target.html(data.html);
}); 
```

# python - 如何在 Python 中实现 Backus-Naur 形式

> ID：14013792
> 
> 赞同：20
> 
> 时间：2012-12-23T18:59:30.407
> 
> 标签：python, parsing, grammar, bnf

我知道已经有一些与 Python 中的 BNF（Backus-Naur 形式）语法相关的模糊相似的问题，但就我的应用程序而言，它们都没有帮助我。

我有多个需要为其编写代码的 BNF。代码应该能够使用 BNF 语法生成和识别合法字符串。

我正在使用的第一个 BNF 是 Python 中的所有实数。如下：

```
<real number>    ::= <sign><natural number> |
                     <sign><natural number>'.'<digit sequence> |
                     <sign>'.'<digit><digit sequence> |
                     <sign><real number>'e'<natural number>
<sign>           ::= ‘’ | ‘+’ | ‘-‘
<natural number> ::= ‘0’ | <nonzero digit><digit sequence>
<nonzero digit>  ::= 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
<digit sequence> ::= ‘’ | <digit><digit sequence>
<digit>          ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 
```

我为 Python 找到的任何 BNF 解析器似乎都非常复杂，或者使用外部库。有没有更简单的方法可以在 Python 中使用 BNF 语法进行检查和生成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T19:06:54.113

[这篇文章](http://web.archive.org/web/20120525103427/http://www.evanfosmark.com/2009/02/sexy-lexing-with-python)包含一个不需要第三方库的词法扫描器示例。它可能无法满足您的所有需求，但您应该能够将其用作满足您需求的东西的基础。

我不知道您的应用程序是否都与词法扫描有关 - 但如果不是，[ply](http://www.dabeaz.com/ply/)是一个相当容易使用的解析器（假设您需要广泛了解解析器的工作原理）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-17T08:14:53.630

看看[https://github.com/erikrose/parsimonious](https://github.com/erikrose/parsimonious)

> Parsimonious 旨在成为用纯 Python 编写的最快的任意前瞻解析器，并且是最实用的。它基于解析表达式语法 (PEG)，这意味着您可以为其提供一种简化的 EBNF 符号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-01T14:54:55.990

我对[grako](https://pypi.python.org/pypi/grako)有很好的体验。

我将它用于[parseWKT](https://github.com/cleder/parsewkt)。

它以 EBNF 作为输入并从中生成 PEG 解析器。

我认为在 grako 中将 BNF 写入 EBNF 解析器是相当简单的，然后它将从 EBNF 生成解析器

# c++ - 如何在 C++ 中用 stl 编写数组

> ID：14013793
> 
> 赞同：-2
> 
> 时间：2012-12-23T18:59:31.670
> 
> 标签：c++

一个人如何在课堂上写一个`array`in `stl`？我想在 C++ 中编写一个`array in stl`并重 `()[]`载运算符`()[]`重载运算符

```
int* operator[] (int i) {
        if (i < 10) 
        {
            return matrix[i];
        }

    }

    int* operator() (int i) {
        if (i < 10) 
        {
            return matrix[i];
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:03:59.217

要编写在 STL 上下文中有用的数组，您需要查看容器要求并实现相应的功能。特别是，为了使您实现的 STL 算法`begin()`和`end()`提供对内容的访问的方法可以访问序列。根据您是想要固定大小的数组还是可变大小的数组，请查看`std::array<T, N>`或`std::vector<T>`了解合理接口的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:05:38.573

假设您想了解模板化数组实现的工作原理，请查看 Boost 的[`array.hpp`](http://www.boost.org/doc/libs/1_50_0/boost/array.hpp).

# php - 在函数中调用 PDO 查询

> ID：14013794
> 
> 赞同：0
> 
> 时间：2012-12-23T18:59:39.680
> 
> 标签：php, pdo

我正在“世界末日”（mysql_ depreciation！）准备我的一些使用 mysql_ 扩展的旧应用程序。我目前正在将它们转换为 PDO。

我使用了很多功能来简化我的工作。但是我无法让函数中的 $db->query 工作。例如我正在转换这个函数：

```
function GetAccount($account_id){
    $Query = mysql_query("SELECT name, balance, account_number FROM accounts WHERE id = '$account_id'");
    if (mysql_num_rows($Query) > 0){
        $Result = mysql_fetch_assoc($Query);
        return $Result;
    } else {
        return false;
    }
} 
```

进入这个PDO函数。

```
function GetAccount($account_id){
    global $db;
    $Result = $db->query("SELECT name, balance, account_number FROM accounts WHERE id = '$account_id'");
    if (count($Result) > 0){
        return $Result;
    } else {
        return false;
    }
} 
```

我已经在这个函数之外建立了一个 PDO 连接，它可以很好地处理任何函数之外的查询。

第二个（PDO）函数的问题是 $Result 是空的。var_dump 返回：bool (false)。

我忘记/做错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:18:22.597

修复它，新功能：

```
function GetAccount($account_id){
    global $db;
    $Result = $db->prepare("SELECT name, balance, account_number FROM accounts WHERE id = '$account_id'");
$Result->execute();
$Result = $Result->fetch();

    if (count($Result) > 0){
        return $Result;
    } else {
        return false;
    }
} 
```

我唯一做的是：

```
$Result->prepare("query stuff");
$Result->execute();
$Result = $Result->fetch(); 
```

# ruby-on-rails - 如何在 schema.rb 中跟踪多个数据库

> ID：14013801
> 
> 赞同：1
> 
> 时间：2012-12-23T19:00:21.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

schema.rb 传统上保存默认 :development、:test 和 :production 模式的模式。我的问题是我的应用程序依赖于其他两个数据库而不是那些默认值。如何在 schema.rb 中跟踪这些其他数据库，以便当我在新服务器上启动应用程序时 rake db:schema:load 真正创建所有需要的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:14:24.263

ActiveRecord 不是为多个连接而设计的。您可以破解使用[神奇的多连接 gem。](http://magicmodels.rubyforge.org/magic_multi_connections/)这允许您通过调用`ActiveRecord::Base.establish_connection`已声明的模块来指定不同的连接`module`。

# python - 在python中读取包含特殊字符的逗号分隔文本文件

> ID：14013808
> 
> 赞同：2
> 
> 时间：2012-12-23T19:01:25.653
> 
> 标签：python, csv

```
import csv,sys

phile="E:/Users/san/Documents/phonebook.txt"
ph=open(phile,"rt")
try:
    lines= csv.reader(ph)

    for each in lines:
        print each,
except Exception as er:
       print er
finally: ph.close() 
```

得到错误说“行包含空字节”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:29:53.637

我的另一个猜测是`open(phile, "rt")`应该只是`open(phile, "rb")`.

您还可以通过执行以下操作来调试发生在（或之前）的行号：

```
for line_number, each in enumerate(lines):
    print line_number, each 
```

# authentication - 将 PrimeFaces 与 JSF 一起使用时 Shiro 重定向到错误的位置

> ID：14013809
> 
> 赞同：1
> 
> 时间：2012-12-23T19:01:29.410
> 
> 标签：authentication, redirect, jsf-2, shiro

此 Web 应用程序可与 Shiro 和 JSF 一起使用。我添加了 PrimeFaces，但我遇到了登录重定向问题。

预期行为：

1.  导航到需要 authc 的 url
2.  重定向到登录页面
3.  登录重定向回原来的页面

primfaces 的行为

1.  导航到需要 authc 的 url
2.  重定向到登录页面
3.  登录后重定向到 javax.faces.resource/theme.css?ln=primefaces-aristo

我通过在我的`shiro.ini`文件中捕获请求参数来登录用户

```
# name of request parameter with username; if not present filter assumes 'username'
authc.usernameParam = login:username
# name of request parameter with password; if not present filter assumes 'password'
authc.passwordParam = login:password
# does the user wish to be remembered?; if not present filter assumes 'rememberMe'
authc.rememberMeParam = login:remembered 
```

我将其修改为使用 a`PassThruAuthenticationFilter`并且登录请求由 my 处理，`Bean`但这仍然会产生相同的错误。bean登录方法

```
AuthenticationToken token =  new UsernamePasswordToken(username, password);
Subject currentUser = SecurityUtils.getSubject();
currentUser.login(token);
ServletRequest request = (ServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
ServletResponse response = (ServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
WebUtils.redirectToSavedRequest(request, response, "index.xhtml"); 
```

我的登录 Bean 是`@RequestScoped`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:35:29.213

这个问题的根本原因是我所有的视图都在同一个目录中。我已将 shiro 配置为要求对根目录中的所有内容进行身份验证`/*`

显示登录页面的原因是因为它是一个“特殊”情况，它被定义为 shiro 配置中的登录页面。加载此页面后，浏览器对 css 和 js 文件发出了额外的请求，这就是此页面上没有主题的原因。

鉴于`WebUtils.redirectToSavedRequest(request, response, "index.xhtml");`它的行为，shiro 似乎只是保存了收到的最后一个不是登录页面的请求。

# c# - 无法将“System.Int16”类型的对象转换为“System.String”类型 - AsEnumerable().ToDictionary

> ID：14013811
> 
> 赞同：0
> 
> 时间：2012-12-23T19:01:39.907
> 
> 标签：c#, linq, casting

```
Dictionary<string, DataRow> dtUsers;
using (DataSet dsmyTable = DbConnection.db_Select_Query
                     ("use myDb select * from myTable"))
{
    dtUsers= dsmyTable .Tables[0].AsEnumerable().
         ToDictionary(row => row.Field<string>("UserId"));
} 
```

好的 UserId 是一`smallint`列但我想将其转换为字符串。

我应该如何修改上面的 linq ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T19:04:12.847

您不能将 an 强制`int`转换为字符串，但您可以获得 int 的字符串表示形式：

```
dtUsers= dsmyTable .Tables[0].AsEnumerable().
         ToDictionary(row => row.Field<short>("UserId").ToString()); 
```

但是，您应该仅出于显示目的这样做。通常，您会希望尽可能长时间地保留 int，因为处理 int 而不是从任何地方从字符串解析它要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:06:34.163

只是使用`ToString()`方法。当然，这只是为了展示您的`smallint`专栏。

```
dtUsers= dsmyTable .Tables[0].AsEnumerable().
         ToDictionary(row => row.Field<short>("UserId").ToString()); 
```

# winforms - WinForms RDLC 报告所有销售员的月度销售报告

> ID：14013813
> 
> 赞同：0
> 
> 时间：2012-12-23T19:01:46.290
> 
> 标签：winforms, rdlc

我被这份报告困住了 10 多天，请帮忙。我的客户有 50 个推销员，他想要一份报告，可以在标题销售员姓名、区域、城市和报告正文中显示他的日常销售和页脚总销售，我尝试了所有但无法解决。请帮忙。

它必须打印所有 50 份报告。

问候莫克沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:16:10.453

您可以使用表格并按“销售员”字段对每一行进行分组。之后，您可以为组“销售员”指定每个新的“行组”必须插入一个分页符。这样，您应该有一个包含 N 页的报告，其中 N 是推销员的数量。

如果您不知道该怎么做，我会在此处留下一些有用的链接：[表格分组](http://technet.microsoft.com/en-us/library/dd207019.aspx)和[每个行组的分页符](http://technet.microsoft.com/en-us/library/dd207058.aspx)（最后一段）。

当您对第一个表进行分组后，您可以按照主/详细信息的想法使用另一个表作为“报告详细信息”。[您可以在此处](http://www.gotreportviewer.com/masterdetail/index.html)或[此处](http://nishantrana.wordpress.com/2012/02/26/creating-a-master-detail-report-in-ssrs-without-using-sub-report/)找到更多示例

# android - 安卓反破解，到底值不值？

> ID：14013816
> 
> 赞同：6
> 
> 时间：2012-12-23T19:02:04.200
> 
> 标签：android, security

我正在制作我的第一个 Android 应用程序，它将是一个针对 API8（Android 2.2）的付费（1 美元）应用程序。

现在我看到了 2 个保护我的应用不被共享的选项：

*   使用 Android 许可证检查：问题是设备必须有互联网连接，而且正如我在网上看到的那样，许可证缓存有问题。而且，最大的缺点是它无论如何都可以被普通的破解者破解......另外，我不想通过减慢应用程序启动或通过退出互联网连接来惩罚诚实的用户。

*   使用 ProGuard，并在发布应用程序时激活旧的反复制选项：这是否不安全，以至于即使是新手也可以复制/共享我的应用程序？

另外，我不会在我的应用程序的安全性上花费大量时间，所以请不要提出难以实施/耗时的解决方案。

现在我更倾向于第二种选择。请帮我决定，如果我说的有误，请告诉我。

[更新] 还有一个问题：Android LVL 是否为 APK 添加了更多加密，使其更难共享？还是仅用于在线检查许可证？完全不使用它并且只在上传时使用 Proguard 和旧的反复制选项是否安全？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T19:09:09.607

答案很简单！不要浪费你的时间来增加保护......它会在上传的那一刻被破解，并且很容易被盗版！

使用 proguard 作为应用程序将类名称混淆为单字母方案的最佳防御。

# c++ - 双链表：删除节点 C++

> ID：14013817
> 
> 赞同：-1
> 
> 时间：2012-12-23T19:02:16.590
> 
> 标签：c++, linked-list

```
void DLinkedList::removeName(const Elem& name) {

 DNode * node = header;

 if (node != NULL) {
     do {
         if(node->elem == name){
             node->prev->next = node->next;  
             node->next->prev = node->prev;
             delete node;
         }
         node = node->next;
     } while (node != header); // Stop when we reach the head again.
 }

} 
```

我将它扔到调试器中，在我大约第三次通过 if(node->elem == name) 之后，它由于我不太确定的原因而崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:04:42.303

请注意，如果条件为真，那么您`delete node`并稍后在 处取消引用它`node->next`，从而导致*未定义的行为*，这就是导致您崩溃的原因

```
 if(node->elem == name){
         node->prev->next = node->next;  
         node->next->prev = node->prev;
         delete node; // delete here
     }
     node = node->next; // dereference invalid pointer 
```

# php - PHP Parse 错误：语法错误，意外 $end 230

> ID：14013827
> 
> 赞同：0
> 
> 时间：2012-12-23T19:02:55.717
> 
> 标签：php, syntax

我的新代码有问题，错误是 Parse error: syntax error, unexpected $end in C:\Program Files (x86)\Ampps\www\New\app\view\haraji.phtml on line 230 这个代码是关于从数据库中获取一些数据并将其放入静态表中！

在没有任何价值的地方，它会显示“没有价值”！在别人看来价值！

这是我的代码：

```
enter code here
<?php
include('app/config.php');
$con = mysql_connect($AppConfig['db']['host'],$AppConfig['db']['user'],$AppConfig['db']['password']) or die (mysql_error());
mysql_select_db($AppConfig['db']['database'],$con);
$Tak = $this->player->playerId;
$res = mysql_query("SELECT * FROM p_haraji" );
$i=0;
$id = array();
$id['0']=0;
$id['1']=0;
$id['2']=0;
$id['3']=0;
while ($row = mysql_fetch_array($res)){
$id['$i']= $i + 1;
$i++;
}
while (!$row = mysql_fetch_array($res)){
if($i<4){
$id['$i']= 0;
$i++;
}
}
$rsltmsg = mysql_query("SELECT * FROM p_players WHERE id='$Tak'" );
$row1 = mysql_fetch_assoc($rsltmsg);
$nameix=$row1['name'];
$restmsg1=mysql_query("SELECT * FROM p_players WHERE player_type=2" );
$row2 = mysql_fetch_assoc($restmsg1);
$nameadmin=$row2['name'];
$idadmin=$row2['id'];
$subject1="جنس خریداری شد.";

If(isset ($_GET['k'])){
 If($_GET['k'] == "1"){
 If($this->data['silver'] >= $price){
 $newsilver = $this->data['silver'] - $price;

    if( $type == '1'){
            mysql_query("UPDATE p_players set popkat=popkat + 1 where id='{$Tak}'");
    }

    else if( $type == '2'){
            mysql_query("UPDATE p_players set hemkat=hemkat + 1 where id='{$Tak}'");
    }

    else if( $type == '3'){
            mysql_query("UPDATE p_players set satl=satl + 1 where id='{$Tak}'");
    }
    mysql_query("UPDATE p_players set silver='$newsilver' where id='{$Tak}'");
    $sendsms="جنس خریداری شد!";
    mysql_query("UPDATE p_players SET new_mail_count=new_mail_count+1 where id='$Tak' ") or die(mysql_error());
    mysql_query("INSERT INTO `p_msgs` (`from_player_id`, `to_player_id`, `from_player_name`, `to_player_name`, `msg_title`, `msg_body`, `creation_date`, `is_readed`, `delete_status`) VALUES( '$idadmin', '$Tak', '$nameadmin', '$nameix', '$subject', '$sendsms', now(), 0, 0)");

     }Else{$errorgold = "1";}
    If($_GET['k'] == "2"){
   If($this->data['silver'] >= $price){
   $newsilver = $this->data['silver'] - $price;

    if( $type == '1'){
            mysql_query("UPDATE p_players set popkat=popkat + 1 where id='{$Tak}'");
    }

    else if( $type == '2'){
            mysql_query("UPDATE p_players set hemkat=hemkat + 1 where id='{$Tak}'");
    }

    else if( $type == '3'){
            mysql_query("UPDATE p_players set satl=satl + 1 where id='{$Tak}'");
    }
    mysql_query("UPDATE p_players set silver='$newsilver' where id='{$Tak}'");
    $sendsms="جنس خریداری شد!";
    mysql_query("UPDATE p_players SET new_mail_count=new_mail_count+1 where id='$Tak' ") or die(mysql_error());
    mysql_query("INSERT INTO `p_msgs` (`from_player_id`, `to_player_id`, `from_player_name`, `to_player_name`, `msg_title`, `msg_body`, `creation_date`, `is_readed`, `delete_status`) VALUES( '$idadmin', '$Tak', '$nameadmin', '$nameix', '$subject', '$sendsms', now(), 0, 0)");

  }Else{$errorgold = "1";}
    If($_GET['k'] == "3"){
    If($this->data['silver'] >= $price){
     $newsilver = $this->data['silver'] - $price;

    if( $type == '1'){
            mysql_query("UPDATE p_players set popkat=popkat + 1 where id='{$Tak}'");
    }

    else if( $type == '2'){
            mysql_query("UPDATE p_players set hemkat=hemkat + 1 where id='{$Tak}'");
    }

    else if( $type == '3'){
            mysql_query("UPDATE p_players set satl=satl + 1 where id='{$Tak}'");
    }
    mysql_query("UPDATE p_players set silver='$newsilver' where id='{$Tak}'");
    $sendsms="جنس خریداری شد!";
    mysql_query("UPDATE p_players SET new_mail_count=new_mail_count+1 where id='$Tak' ") or die(mysql_error());
    mysql_query("INSERT INTO `p_msgs` (`from_player_id`, `to_player_id`, `from_player_name`, `to_player_name`, `msg_title`, `msg_body`, `creation_date`, `is_readed`, `delete_status`) VALUES( '$idadmin', '$Tak', '$nameadmin', '$nameix', '$subject', '$sendsms', now(), 0, 0)");

   }Else{$errorgold = "1";}
   If($_GET['k'] == "4"){
   If($this->data['silver'] >= $price){
    $newsilver = $this->data['silver'] - $price;

    if( $type == '1'){
            mysql_query("UPDATE p_players set popkat=popkat + 1 where id='{$Tak}'");
    }

    else if( $type == '2'){
            mysql_query("UPDATE p_players set hemkat=hemkat + 1 where id='{$Tak}'");
    }

    else if( $type == '3'){
            mysql_query("UPDATE p_players set satl=satl + 1 where id='{$Tak}'");
    }
    mysql_query("UPDATE p_players set silver='$newsilver' where id='{$Tak}'");
    $sendsms="جنس خریداری شد!";
    mysql_query("UPDATE p_players SET new_mail_count=new_mail_count+1 where id='$Tak' ") or die(mysql_error());
    mysql_query("INSERT INTO `p_msgs` (`from_player_id`, `to_player_id`, `from_player_name`, `to_player_name`, `msg_title`, `msg_body`, `creation_date`, `is_readed`, `delete_status`) VALUES( '$idadmin', '$Tak', '$nameadmin', '$nameix', '$subject', '$sendsms', now(), 0, 0)");

 }Else{$errorgold = "1";}
 };

   If(isset($errorgold) AND $errorgold == "1"){echo "<h3>لطفا شما کم است</h3>";}
   echo 'شما <img src="assets/x.gif" class="gold" alt="طلا"  title="طلا">'.$this->data['gold_num']." مقدار طلا داريد  <BR / >";
 ?>
 <table class="rate_details lang_rtl lang_ar" cellpadding="1" cellspacing="1">
 <thead>
 <tr>
 <th colspan="5"><center>حراجی</center></th>
 </tr>
<tr>
    <td>
        شماره
    </td>
    <td>
        صاحب
    </td>
    <td>
        قیمت
    </td>
    <td>
        نوع جنس
    </td>
    <td>
        خريد
    </td>
</tr>
  </thead>
  <tbody>
  <!-- <jens1> -->
<tr>
    <td>
    <?php echo $id['0'];    ?>
    </td>
    <td>
    <?php if( $id['0'] != '0'){ $res1 = mysql_query("SELECT * FROM p_haraji where id='{$id['0']}'" ); $row1 = mysql_fetch_array($res1); $id_saheb=$row1['owner']; $res11 = mysql_query("SELECT * FROM p_players where id='{$id_saheb}'" ); $row11 = mysql_fetch_array($res11);  $name=$row11['name']; echo $name;} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
    <?php if( $id['0'] != '0'){ $res1 = mysql_query("SELECT * FROM p_haraji where id='{$id['0']}'" ); $row1 = mysql_fetch_array($res1); $price=$row1['price']; echo $price;} else { echo "جنسی موجود نسیت";}?>
    </td>
    <td>
    <?php if( $id['0'] != '0'){ $res1 = mysql_query("SELECT * FROM p_haraji where id='{$id['0']}'" ); $row1 = mysql_fetch_array($res1); $type=$row1['type']; if($type == '1'){ echo "کتیبه جمعیت";} else if($type == '2'){ echo "کتیبه حمایت";} else if ( $type == '3'){ echo "سطل";}} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
        <?php if($id['0'] != '0'){ echo "<a href=\"haraji.php?k=1\">خرید</a>";} else { echo "غیر فعال";}?>
    </td>
</tr>
   <!-- </jens1> -->
  <!-- <jens2> -->
<tr>
    <td>
    <?php echo $id['1'];    ?>
    </td>
    <td>
    <?php if( $id['1'] != '0'){ $res2 = mysql_query("SELECT * FROM p_haraji where id='{$id['1']}'" ); $row2 = mysql_fetch_array($res2); $id_saheb=$row2['owner']; $res22 = mysql_query("SELECT * FROM p_players where id='{$id_saheb}'" ); $row22 = mysql_fetch_array($res22);  $name=$row22['name']; echo $name;} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
    <?php if( $id['1'] != '0'){ $res2 = mysql_query("SELECT * FROM p_haraji where id='{$id['1']}'" ); $row2 = mysql_fetch_array($res2); $price=$row2['price']; echo $price;} else { echo "جنسی موجود نسیت";}?>
    </td>
    <td>
    <?php if( $id['1'] != '0'){ $res2 = mysql_query("SELECT * FROM p_haraji where id='{$id['1']}'" ); $row2 = mysql_fetch_array($res2); $type=$row2['type']; if($type == '1'){ echo "کتیبه جمعیت";} else if($type == '2'){ echo "کتیبه حمایت";} else if ( $type == '3'){ echo "سطل";}} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
        <?php if($id['1'] != '0'){ echo "<a href=\"haraji.php?k=2\">خرید</a>";} else { echo "غیر فعال";}?>
    </td>
</tr>
    <!-- </jens2> -->
    <!-- <jens3> -->
<tr>
    <td>
    <?php echo $id['2'];    ?>
    </td>
    <td>
    <?php if( $id['2'] != '0'){ $res3 = mysql_query("SELECT * FROM p_haraji where id='{$id['2']}'" ); $row3 = mysql_fetch_array($res3); $id_saheb=$row3['owner']; $res33 = mysql_query("SELECT * FROM p_players where id='{$id_saheb}'" ); $row33 = mysql_fetch_array($res33);  $name=$row33['name']; echo $name;} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
    <?php if( $id['2'] != '0'){ $res3 = mysql_query("SELECT * FROM p_haraji where id='{$id['2']}'" ); $row3 = mysql_fetch_array($res3); $price=$row3['price']; echo $price;} else { echo "جنسی موجود نسیت";}?>
    </td>
    <td>
    <?php if( $id['2'] != '0'){ $res3 = mysql_query("SELECT * FROM p_haraji where id='{$id['2']}'" ); $row3 = mysql_fetch_array($res3); $type=$row3['type']; if($type == '1'){ echo "کتیبه جمعیت";} else if($type == '2'){ echo "کتیبه حمایت";} else if ( $type == '3'){ echo "سطل";}} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
    <?php if($id['2'] != '0'){ echo "<a href=\"haraji.php?k=3\">خرید</a>";} else { echo "غیر فعال";}?>
    </td>
</tr>
    <!-- </jens3> -->
    <!-- <jens4> -->
<tr>
    <td>
    <?php echo $id['3'];    ?>
    </td>
    <td>
    <?php if( $id['3'] != '0'){ $res4 = mysql_query("SELECT * FROM p_haraji where id='{$id['3']}'" ); $row4 = mysql_fetch_array($res4); $id_saheb=$row4['owner']; $res44 = mysql_query("SELECT * FROM p_players where id='{$id_saheb}'" ); $row44 = mysql_fetch_array($res44);  $name=$row44['name']; echo $name;} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
    <?php if( $id['3'] != '0'){ $res4 = mysql_query("SELECT * FROM p_haraji where id='{$id['3']}'" ); $row4 = mysql_fetch_array($res4); $price=$row4['price']; echo $price;} else { echo "جنسی موجود نسیت";}?>
    </td>
    <td>
    <?php if( $id['3'] != '0'){ $res4 = mysql_query("SELECT * FROM p_haraji where id='{$id['3']}'" ); $row4 = mysql_fetch_array($res4); $type=$row4['type']; if($type == '1'){ echo "کتیبه جمعیت";} else if($type == '2'){ echo "کتیبه حمایت";} else if ( $type == '3'){ echo "سطل";}} else { echo "جنسی موجود نیست";}?>
    </td>
    <td>
    <?php if($id['3'] != '0'){ echo "<a href=\"haraji.php?k=4\">خرید</a>";} else { echo "غیر فعال";}?>
    </td>
</tr>
   <!-- </jens3> -->
   </tbody>
   </table>
  <?php 
  mysql_close($con);
   ?>

enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:06:30.597

你错过了一个右括号`}`

检查您的脚本，确保所有括号`{...}`都正确匹配。

缩小范围：

线路：

```
If(isset ($_GET['k'])){
 If($_GET['k'] == "1"){ 
```

对于这两行中的任何一行，都没有匹配的右括号。只有你知道这些 if 语句在哪里结束。

**更新：**

第 77 行：

```
If($_GET['k'] == "3"){ 
```

*我很确定还有更多……但你明白了。我建议您开始每个括号缩进您的代码。格式化和调试会更容易。*

# css - 在段落旁边对齐图像

> ID：14013831
> 
> 赞同：0
> 
> 时间：2012-12-23T19:03:26.930
> 
> 标签：css

不仅仅是段落旁边的简单图像<，而是像这样的一些空格

[![fdf](../Images/fcef56845af03a8b46668ac27e15669e.png)](https://i.stack.imgur.com/n1eK7.png)
[（来源：[gyazo.com](http://gyazo.com/4502cc62f3704cf8008f0f9f3933d441.png)）]

到目前为止我所做的：

```
 <div class="span6">

    <span class="head">Header</span>
            <img style="vertical-align:middle float: left;" src="img/pickaxe.png"/>
    <span class="paragraph">
        This is Photoshop's version  of Lorem Ipsum.
            Proin gravida nibh vel velit auctor aliquet.
            Aenean sollicitudin, lorem quis bibendum auc
        tor, nisi elit consequat ipsum, nec sagittis sem nibh i
    </span>

 </div>

.span8 {
   width: 620px;
}
.head {
   font-weight: bold;
   font-size: 26px;
   float: left;
}

.paragraph {
   font-size: 14px;
   width: 300px;

} 
```

它看起来像这样

[![igm](../Images/dbe4eb2940a045de17e9ec67c01fa8c8.png)](https://i.stack.imgur.com/6xF1d.png)
[（来源：[gyazo.com](http://gyazo.com/c22a440e57135edc16a1f76555be4512.png)）]

忽略这条线，它是网络上的裁剪图像。

我究竟做错了什么？我怎样才能解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:17:31.607

这是给你的 jsfiddle：http: [//jsfiddle.net/Xxw85/](http://jsfiddle.net/Xxw85/)

代码应该看起来更像这样：

```
<div class="span6">

    <p>Header</p>
    <div class="head">
        <img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRgMvCRHrTA30jksWsHfDZ4GwWfjJhM8Ck2RAtA_OLeOpnGRTrEXw"/>
    </div>

    <div class="paragraph">
    This is Photoshop's version  of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auc
    tor, nisi elit consequat ipsum, nec sagittis sem nibh i
    </div>

    <div style="clear:both"></div>

 </div> 
```

和CSS：

```
.span6 {
  width: 620px;
  background-color:#efefef;
}
.head {
font-weight: bold;
font-size: 26px;
float: left;
color:red;
}

.paragraph {
font-size: 14px;
width: 300px;
float:left;
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:20:02.613

考虑一下这个小提琴。我在父 div 中使用了 div 元素而不是 span 元素。

```
<div>
<div class="head">Header</div>
<img style="vertical-align:middle float: left;" src="img/pickaxe.png"/>
</div> 
```

并通过添加此内容将内容向右浮动。

```
.paragraph {
 float:right;} 
```

[http://jsfiddle.net/AaXTm/8/](http://jsfiddle.net/AaXTm/8/)

元素的宽度小于父元素，并且由于您没有使用任何浮动或清除，因此这些元素是可见的内联。

# php - 在 Laravel 迁移中使列不可为空

> ID：14013832
> 
> 赞同：170
> 
> 时间：2012-12-23T19:03:34.943
> 
> 标签：php, sql, database-migration, laravel

我现在正在编写迁移以在表中创建某些列`nullable`。对于向下功能，我当然想`not nullable`再次制作这些列。我查看了[架构生成器文档](http://laravel.com/docs/database/schema)，但看不到这样做的方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2012-12-24T00:36:17.173

在 Laravel 5 之前，没有 Laravel 原生的方式来使用模式构建器更改现有的表列。您需要为此使用原始查询。

但是，从 Laravel 5 开始，您可以使用：

```
$table->string('foo')->nullable(false)->change(); 
```

在运行上述命令之前，您必须具有 dbal 依赖项：

```
composer require doctrine/dbal 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2016-01-11T18:18:32.057

从 Laravel 5 开始，可以通过将 false 作为参数传递给`nullable`.

```
$table->string('foo')->nullable(false)->change(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-30T20:56:30.460

首先运行这个：

`composer require doctrine/dbal`

然后创建一个迁移，它将像这样改变表：

`php artisan make:migration fix_whatever_table_name_here`

```
public function up()
{
    Schema::table('table_name', function (Blueprint $table) {
        $table->type('column')->nullable(false)->change();
    });
}

# Optional:
# public function down()
# {
#     Schema::table('table_name', function ($table) {
#         $table->type('column')->nullable()->change();
#     });
# } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-29T21:36:57.243

您可以在没有 ->nullable() 的情况下再次声明该列并使用 ->change

```
public function up()
{
    Schema::table('table_name', function (Blueprint $table) {
        $table->type('column')->change();
    });
}

public function down()
{
    Schema::table('table_name', function ($table) {
        $table->type('column')->nullable()->change();
    });
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-23T13:40:28.593

在 laravel 8 中，您只需输入：“->nullable()”

```
$table->string('name')->nullable(); 
```

# android - 从 ListArray 填充自定义 ListView

> ID：14013833
> 
> 赞同：3
> 
> 时间：2012-12-23T19:03:39.297
> 
> 标签：android, listview

我有以下课程：

```
public class Person {

    public String name;
    public String description;

    public Board(String name, String description) {
        this.name = name;
        this.description = description;
    }

    public String getName()
    {
        return this.name;
    }

    public String getDescription()
    {
        return this.description;
    }
} 
```

然后我有`ArrayList<Person>`一些这些数据。

我想要做的是填充我的 ListView，我做了一个（坏的）我想要它看起来像的模型：

![](../Images/81e9d6c26d85fd9f28489121a402bcfd.png)

在网上查看了一些关于此的信息后，我做了一个新布局，在其中放置了一个 Medium TextView，下面有一个 Small TextView，但现在我很困惑如何将它与我的 MainActivity 上的 ListView 链接，然后用我的数据填充它`ArrayList<Person>`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T19:39:52.700

首先，您需要为您的行自定义布局：

**/res/layout/my_row_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView_description"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" /> 
```

之后，您将需要一个 ArrayAdapter：

```
public class MyListAdapter extends ArrayAdapter<Person> {

private Context context;
private ArrayList<Person> allPersons;

private LayoutInflater mInflater;
private boolean mNotifyOnChange = true;

public MyListAdapter(Context context, ArrayList<Person> mPersons) {
    super(context, R.layout.my_row_layout);
    this.context = context;
    this.allPersons = new ArrayList<Person>(mPersons);
    this.mInflater = LayoutInflater.from(context);
}

@Override
public int getCount() {
    return allPersons .size();
}

@Override
public Person getItem(int position) {
    return allPersons .get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public int getPosition(Person item) {
    return allPersons .indexOf(item);
}

@Override
public int getViewTypeCount() {
    return 1; //Number of types + 1 !!!!!!!!
}

@Override
public int getItemViewType(int position) {
    return 1;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    int type = getItemViewType(position);
    if (convertView == null) {
        holder = new ViewHolder();
        switch (type) {
        case 1:
            convertView = mInflater.inflate(R.layout.my_row_layout,parent, false);
            holder.name = (TextView) convertView.findViewById(R.id.textview_name);
            holder.description = (TextView) convertView.findViewById(R.id.textview_description);
            break;
        }
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.name.setText(allPersons.get(position).getName());
    holder.description.setText(allPersons.get(position).getDescription());
    holder.pos = position;
    return convertView;
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
    mNotifyOnChange = true;
}

public void setNotifyOnChange(boolean notifyOnChange) {
    mNotifyOnChange = notifyOnChange;
}

//---------------static views for each row-----------//
     static class ViewHolder {

         TextView name;
         TextView description;
         int pos; //to store the position of the item within the list
     }
} 
```

在您的活动中，您可以这样做：

```
public class SecondActivity extends ListActivity {

    private ArrayList<Person> persons;
    private MyListAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //fill the arraylist of persons

        this.mAdapter = new MyListAdapter(this, persons);
        setListAdapter(mAdapter);

    }

} 
```

最后：

**/res/layout/activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true" >
</ListView> 
```

注意 ListView 的 id：如果您将 Activity 扩展为 ListActivity，则列表的 id 必须是`@android:id/list`.

我希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:07:55.253

为此，您将需要以下步骤：

**1.**首先创建一个行布局表单ListView rows并将其放在`res/layout`文件夹中

**2.**通过扩展为ListView创建一个自定义适配器`ArrayAdapter`

您可以查看为 ListView 创建自定义适配器的这些教程：

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

[http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/](http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T11:45:08.053

如果您想使用 recyclerView 执行此操作，请按照以下步骤操作

### 1) 使用 RecyclerView 创建布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent" >

     <android.support.v7.widget.RecyclerView
        android:id="@+id/rv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        />
</LinearLayout> 
```

### 2）创建一行ItemView

创建视图`row.xml`

### 3) 创建适配器

```
public class ListAdapter extends RecyclerView.Adapter<ListAdapter.ListViewHolder> {

private Context context;
private List<Person> list;

public ListAdapter (Context context, List<Person> list)
{
    this.context = context;
    this.list = list;
}

@Override
public ListViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {

    View view = LayoutInflater.from(context).inflate(R.layout.row,parent,false);
    return new ListViewHolder(view);
}

@Override
public void onBindViewHolder(ListViewHolder holder, final int position) {

    final Person person = list.get(position);
    holder.name.setText(person.getName());
    holder.name.setText(person.getDesc());

}

@Override
public int getItemCount() {
    return list.size();
}

class ListViewHolder extends RecyclerView.ViewHolder
{
    private TextView name;
    private ImageView desc;

    public ListViewHolder (View itemView) {
        super(itemView);
        name= (TextView)itemView.findViewById(R.id.name);
        desc= (ImageView)itemView.findViewById(R.id.desc);
    }
 }
} 
```

### 4) 将 RecyclerView 集成到您的活动中

```
public class YourActivity extends AppcompatActivity{

private List<Person> persons;
private YourAdapter adapter;
private RecyclerView rv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    rv = (RecyclerView)findViewById(R.id.rv);
    person = // Get your List
    adapter = new YourAdapter(this, persons);
    setListAdapter(mAdapter);
    LinearLayoutManager llm = new LinearLayoutManager(YourActivity.this);
    rv.setLayoutManager(llm);
    rv.setAdapter(adapter);

}

} 
```

# javascript - 无法从远程 iframe 调用父函数

> ID：14013835
> 
> 赞同：3
> 
> 时间：2012-12-23T19:04:04.063
> 
> 标签：javascript

父.html

```
 <html xmlns="http://www.w3.org/1999/xhtml">  
    <head>  
    <script   type="text/javascript">  
    function say() { 
            alert("parent.html------>I'm at parent.html"); 
    } 

    function callChild() 
    {  
           myFrame.window.say(); 
    }  
    </script>  
    </head>  

    <body>    
    <input   type=button   value=" call child.html say()" onclick="callChild()"> 
    <iframe name="myFrame" src="http://66.175.214.250/child.html"></iframe> 
    </body>  
   </html> 
```

child.html

```
 <html xmlns="http://www.w3.org/1999/xhtml">
   <head>  
   <script type="text/javascript"> 

   function say()  
   {  
        alert("child.html--->I'm at child.html");  
   } 

   function callParent() { 
        window.top.say(); 
   } 
   </script>  
   </head>  
   <body>  
   <input   type=button   value="call parent.html say() "   onclick="callParent()">  
   </body>  
   </html> 
```

当 parent.html 和 child.html 在同一个文件夹中时，这是在 localhost 中测试的。但是如果我将 child.html 上传到远程主机。有错误：父不能调用子函数，子不能调用父函数。

我不知道为什么。它是 iframe 调用，它的父级应该是本地的，还是远程主机块中的某个东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:55:19.500

即使像从子框架中离开子域（www.）这样简单的事情也可能导致您的浏览器停止两个浏览器之间的任何和所有通信，因为它们不会被认为具有相同的来源或域。

# facebook-graph-api - 能够将用户数据添加到 Facebook 帖子并在通过 FQL 或 Graph API 查询时使用它

> ID：14013838
> 
> 赞同：0
> 
> 时间：2012-12-23T19:04:23.323
> 
> 标签：facebook-graph-api, facebook-fql, facebook-stream-story

有没有办法添加用户数据（数字或字符串）并在从该页面的流中查询帖子时使用它？

本质上，我试图通过应用程序在 Facebook 页面上发布具有某些属性的帖子，并希望使用 FQL 或 Graph API 查询该页面上的流（新闻源），并仅根据添加到帖子的属性选择特定帖子。

```
SELECT post_id FROM stream WHERE **user_data** ='tag-specified-with-post' app_id='APP_ID'. 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:17:06.840

使用 FQL 从您的应用中获取帖子。[此查询](https://developers.facebook.com/tools/explorer?fql=SELECT%20app_id,%20post_id,%20actor_id,%20target_id,%20message%20FROM%20stream%20WHERE%20filter_key%20=%27owner%27%20AND%20is_hidden%20=%200%20AND%20app_id=%272305272732%27%0A)将获取照片应用在用户帐户中发布的帖子：

```
SELECT app_id, post_id, actor_id, target_id, message FROM stream WHERE filter_key ='owner' AND is_hidden = 0 AND app_id='YOUR_APP_ID' 
```

用你的替换它`app_id`。并替换`filter_key`为“其他人”以获取用户可以查看的其他人的帖子。

# spring - 复选框列表未出现在 Spring MVC 注释中

> ID：14013839
> 
> 赞同：0
> 
> 时间：2012-12-23T19:04:40.013
> 
> 标签：spring, spring-mvc

我正在尝试在带有注释的 Spring MVC 中实现动态复选框列表。所以，我尝试了这个：

在 home.jsp 中：

```
 <c:forEach items="${categories}" var="cat">
                <tr>
                    <td><form:checkbox path="catrgo" value="${category}"
                            label="${cat.categoryId}" /></td>
                    <td><c:out value="${cat.category}" /></td>
                </tr>
            </c:forEach> 
```

在 HomeController 中：@Controller @RequestMapping(value = "/home") public class HomeController {

```
@RequestMapping(method = RequestMethod.GET)
public String showForm() {
    FeedDomain feedDomain = new FeedDomain();

    System.out.println("Called");
    CategoryService categoryService = new CategoryService();
    try {
        List<CategoryDomain> categoryDomainList = new   ArrayList<CategoryDomain>();
        CategoryDomain categoryDomain = new CategoryDomain();
        categoryDomain.setCategory("aaa");
        categoryDomain.setCategoryId(11111);

        System.out.println("Size is " + categoryDomainList.size());
    } catch (Exception exception) {

    }
    return "home";
} 
```

现在我将使用标签从 index.jsp 转到 home.jsp，但问题是 showForm 方法没有被调用。可能是什么原因？

我在完整流程下方发布：

这是welcome.jsp，我从这里调用home.jsp

```
 <body>
             <a href="home.jsp" class="btn btn-success btn-large disabled">Get
                        Us Feeds Now</a>
       </body> 
```

现在我简化了正在渲染的 home.jsp：

```
 <body>

<br /> &nbsp;&nbsp;
<span class="badge badge-info"><h1>Chat Booster</h1></span>
<div class="leftHeader">
    <h1>
        <small>Subtext for header</small>
    </h1>
</div>
<br></br>
<br></br>

    </body> 
```

主页控制器是：

```
 @Controller
        @RequestMapping(value = "/home")
    public class HomeController {

@RequestMapping(method = RequestMethod.GET)
public String showForm() {
    FeedDomain feedDomain = new FeedDomain();
//  model.addAttribute("feedDomain", feedDomain);
    System.out.println("Called");
    CategoryService categoryService = new CategoryService();

    return "home";
} 
```

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
     <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>HelloWorldExampleWithSpring3MVCInEclipse</display-name>
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-  class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/app-config.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
    </web-app> 
```

应用程序配置.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
     <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:component-scan base-package="com.controller" />

<!-- Resolves view names to protected .jsp resources within the /WEB-INF/views 
    directory -->
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="" />
    <property name="suffix" value=".jsp" />
</bean>
    </beans> 
```

**我的 jsp 页面仅在 webcontent 文件夹中（不在 web-inf 中）。**现在我稍后会寻找主要问题，但第一点是 showForm() 方法没有被调用，因为 sysouts 没有在控制台上打印任何东西。如果我将 home.jsp 作为应用程序的默认页面，则调用该方法，但不是通过给定的方法。任何人都可以对此发表评论吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:53:28.430

您的链接不正确，您需要调用控制器操作而不是 jsp：

```
 <body>
       <c:url var="homeLink" value="/home"/>
       <a href="${homeLink}" class="btn btn-success btn-large disabled">Get Us Feeds Now</a>
   </body> 
```

# php - 通过xpath获取父元素和所有子元素

> ID：14013841
> 
> 赞同：1
> 
> 时间：2012-12-23T19:05:04.243
> 
> 标签：php, xml

好吧，假设我有一些这样的 XML……</p>

```
<blaah1 name="whatever">
<gender name="male">

<example1 baseurl="male/86644/">
<x u="lol.png"/>
<x u="haha.png"/>
<x u="name.png"/>
</example1>

<example2 baseurl="male/27827/">
<x u="page.png"/>
<x u="examp.png"/>
<x u="bottom.png"/>
</example2>

</gender>
</blaah1> 
```

我需要做什么才能在每个孩子`u=""`的父母的末尾显示内容？`baseurl`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:17:24.987

据我所知，您不能使用单个 xpath 表达式来做到这一点，但您需要遍历结果。这种循环的一个例子：

```
$base = '';
foreach($xp->query('//@baseurl|//*[@baseurl]/x/@u') as $element) {
    $value = $element->value;
    if (substr($value, -1,1) === '/') {
        $base = $value;
    } else {
        echo $base, $value, "\n";
    }
} 
```

使用您的示例 XML 文档：

```
male/86644/lol.png
male/86644/haha.png
male/86644/name.png
male/27827/page.png
male/27827/examp.png
male/27827/bottom.png 
```

此示例使用联合运算符`|`一次获取所有想要的节点。

* * *

我最初想在 xpath 中执行以下操作，但 AFAIK 是不可能的。然而 PHP 可以处理这个问题：在上下文中运行一个 Xpath 表达式到先前的 xpath 查询节点：

```
$array = array_map(function($context) use($xp) {
    return $xp->evaluate('concat(../../@baseurl, .)', $context);
}, iterator_to_array($xp->query('//x/@u'))); 
```

那么给`$array`：

```
Array
(
    [0] => male/86644/lol.png
    [1] => male/86644/haha.png
    [2] => male/86644/name.png
    [3] => male/27827/page.png
    [4] => male/27827/examp.png
    [5] => male/27827/bottom.png
) 
```

这可能更直接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:05:26.253

如果您向每个名为**baseid**的子元素添加一个额外的元素，其内容将是父级名称，如下所示。. .

```
<blaah1 name="whatever">
<gender name="male">

<example1 baseurl="male/86644/">
<x u="lol.png" baseid="example1"/>
<x u="haha.png" baseid="example1"/>
<x u="name.png" baseid="example1"/>
</example1>

<example2 baseurl="male/27827/">
<x u="page.png" baseid="example2"/>
<x u="examp.png" baseid="example2"/>
<x u="bottom.png" baseid="example2"/>
</example2>

</gender>
</blaah1> 
```

您可以使用下面的两个 xpath获取父母**baseurl**和 child **u**

```
$xml_load = simplexml_load_file("myxmlfile.xml");

$x = $xml_load->xpath('//gender[@name="male"]/*/x'); 
foreach($x as $display)
{
$base_url = $xml_load->xpath('//gender[@name="male"]/'.$display["baseid"].''); 
foreach($base_url as $base)
{
echo 'img: '. $base['baseurl'] . $display['u'],'<hr>';
}
} 
```

完成输出。. .

```
img: male/86644/lol.png
img: male/86644/haha.png
img: male/86644/name.png
img: male/27827/page.png
img: male/27827/examp.png
img: male/27827/bottom.png 
```

# jquery - 数组元素的子元素

> ID：14013842
> 
> 赞同：2
> 
> 时间：2012-12-23T19:05:32.823
> 
> 标签：jquery

我是 jQuery 的初学者，这就是我想要做的事情：

*   找到所有具有“选择”类的元素（我们称它们为框以避免稍后混淆）并为每个元素分配一个数字。
*   在每个框中，找到其中的所有输入元素。
*   在每个输入元素的名称中添加它的框号。例如，如果在第三个框中有一个名为“login”的文本输入元素，则应将其重命名为“login3”。

这是我到目前为止所做的代码：

```
boxes = $('.chosen');
for(a = 0; a < boxes.length; a++) {
    inputsinboxes = boxes[a].children('input');
    for(b = 0; b < inputsinboxes.length; b++) {         
        inputsinboxes[b].name = inputsinboxes[b].name + (a+1);
    }
} 
```

我被困住了，因为它一直告诉我`boxes[a].children`不是一个函数。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:07:54.647

当您使用数组索引表示法（方括号）从 jQuery 对象访问元素时，您不会返回 jQuery 对象。你得到了底层的 DOM 节点。[http://api.jquery.com/get/](http://api.jquery.com/get/)

首先使用[`.each()`](http://api.jquery.com/each/)使这个更惯用的 jQuery：

```
$('.chosen').each(function (i) {
    $(this).children('input').prop('name', function () {
        return this.name + (i+1);
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T19:08:21.603

您将原始 javascript 直觉与 jquery 的操作方式混合在一起。试穿这个尺寸

```
$('.chosen').each(function(index) {
    $('input', this).each(function() {
        $(this).attr('name', $(this).attr('name') + (index + 1));
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T19:08:06.753

`boxes[a]`是一个`DOMElement`，不是一个 jQuery 对象；所以你不能`children()`在上面使用jQuery方法。

相反，您必须先将其包装在 jQuery 对象中：

```
boxes = $('.chosen');
for(a = 0; a < boxes.length; a++) {
    inputsinboxes = $(boxes[a]).children('input');
    for(b = 0; b < inputsinboxes.length; b++) {         
        inputsinboxes[b].name = inputsinboxes[b].name + (a+1);
    }
} 
```

* * *

1.  另请注意，您应该使用 a 声明变量`var`以阻止它们成为隐式全局变量；

    ```
    var boxes = $('.chosen'); 
    ```

2.  考虑在 jQuery 中使用更常见的[`each()`](http://api.jquery.com/each)函数而不是`for`循环。再加上使用[`prop()`作为设置器](http://api.jquery.com/prop/#prop2)并提供函数，您可以将代码缩短为：

    ```
    $('.chosen').each(function (i) {
        $(this).children('input').prop('name', function (j, curr) {
            return curr + (i+1);
        });
    }); 
    ```

# c++ - 如何在c ++中将输入输入字符指针

> ID：14013864
> 
> 赞同：3
> 
> 时间：2012-12-23T19:07:45.883
> 
> 标签：c++, input, char

我正在使用以下代码。

```
#include <iostream>
using namespace std;

int main() {
  char* str;
  std::cin>>str;
  return 0;
} 
```

我显然明白 str 中只有一个指向任何内容的指针，因此不能接受输入。但是有没有办法将输入输入字符指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-21T17:17:39.490

这将起作用：

```
#include <iostream>
using namespace std;

int main() {
  char *str = new char[1];
  cin >> str;
  cout >> s
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:37:22.773

你可以这样做：

```
int buffer_size = 50
char *c = new char[buffer_size];
std::cin >> std::setw(buffer_size) >> c; 
```

但是，这样做存在问题；主要是因为它使用了您必须管理的具有固定大小的原始数组。它还以非异常安全的方式手动管理数组的生命周期，尽管可以使用智能指针来修复。

```
std::unique_ptr<char[]> c(new char[buffer_size]);
std::cin >> std::setw(buffer_size) >> c.get(); 
```

完全从原始数组转移到管理自己资源的对象会更好：

```
std::string s;
std::cin >> s; 
```

如果你需要一个`char const *`字符串，你可以使用`std::string::c_str()`.

```
void foo(char const *);

foo(s.c_str()); 
```

或者，如果您真的需要 a `char*`，您可以执行以下操作：

```
void foo(char *c, size_t n);

foo(s.data(), s.size()); // C++11

// C++03
foo( (s.size() ? &s[0] : NULL), s.size()); // pass a pointer if the string is not empty, NULL otherwise 
```

# mysql - MySQL SUM FROM 两个结果错误的表

> ID：14013869
> 
> 赞同：-2
> 
> 时间：2012-12-23T19:08:00.797
> 
> 标签：mysql, join, sum

我在从两个表中指定货币（价格）的总和时遇到问题。SUM 结果错误的结果问题。
**我的查询：**

```
SELECT SUM(up2.price + uf1.price) AS TotalCredit
FROM user_faktorha AS uf1, u_payment AS up2
WHERE uf1.`acc_id` = '11784' && up2.`Account`='11784' && up2.`Active`='1' 
```

表`user_faktorha`列`Price`有正数和负数。
表`u_payment`列`Price`只有正数。

有什么问题或问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:10:09.407

试试这个

```
 SELECT  (up2.price + uf1.price) AS TotalCredit
      FROM user_faktorha AS uf1, u_payment AS up2
      WHERE uf1.`acc_id` = '11784' && up2.`Account`='11784' && up2.`Active`='1' 
```

因为你会添加它们你不需要`SUM`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:30:49.673

我可能会建议对您的语法稍作改动。这里有两种选择：

```
SELECT up2.price + uf1.price AS TotalCredit
FROM user_faktorha AS uf1
INNER JOIN u_payment AS up2
  on uf1.acc_id = up2\. Account
WHERE uf1.`acc_id` = '11784' && up2.`Active`='1'; 
```

或者

```
SELECT sum(up2.price + uf1.price) AS TotalCredit
FROM user_faktorha AS uf1
INNER JOIN u_payment AS up2
  on uf1.acc_id = up2\. Account
WHERE uf1.`acc_id` = '11784' && up2.`Active`='1'
GROUP BY uf1.acc_id 
```

请注意[`INNER JOIN`](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)两个表之间使用的语法，它们现在正在加入`acc_id`. 同样在第一个版本中，我没有使用聚合函数，我只是`price`在两个表中添加，而第二个版本使用`sum()`聚合并添加了一个`group by`

# android - Android：从事件监听器访问小部件

> ID：14013871
> 
> 赞同：0
> 
> 时间：2012-12-23T19:08:08.220
> 
> 标签：android, events

在我的 Android 应用程序中，我有一个带有 onTouch 侦听器的 ImageView（在 onCreate 方法中），如下所示：

```
 ball.setClickable(true);
    ball.setOnTouchListener(ballDragListener); 
```

和事件监听器：

```
View.OnTouchListener ballDragListener = new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        RelativeLayout layout = (RelativeLayout)findViewById(R.id.pet_layout); // Reference to the already created layout
        int velocityX = 1;
        int velocityY = 1;

        int eventAction = event.getAction();
        int newX = (int)(event.getRawX());
        int newY = (int)(event.getRawY());

        v.setX(newX + velocityX);
        v.setY(newY + velocityY);
        //v.invalidate();
        return true;
    } 
```

假设我在 onCreate 方法中声明了一个新的 TextView：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView text = new TextView(this); 
```

我将如何从事件侦听器访问它？调用 'text.setText()' 不起作用，因为它找不到对象。

**编辑：我还希望能够从我的 onCreate() 方法和/或其他方法访问相同的 TextView 实例。**

问候，本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:15:57.037

任何一个：

1)

将您的 textview 声明为类中的字段，例如：

```
private TextView text; 
```

然后像现在一样初始化它，但不声明它（你已经在你的类中作为一个字段做了）：

```
text = new TextView(this); 
```

2)

或者只是添加一个 final 修饰符并在创建监听器之前执行几行：

```
final TextView text = ... 
```

# java - 结合音频和视频（没有 ffmpeg） - Java

> ID：14013874
> 
> 赞同：6
> 
> 时间：2012-12-23T19:08:49.373
> 
> 标签：java, jmf

我正在构建一个小程序来捕获屏幕和麦克风输入（音频）。我可以单独录制这些文件，但找不到将这些文件组合起来制作带音频的新视频的方法。

视频文件是`.mov`格式，音频是`.wav`格式。它们的长度完全相同。

有没有办法合并这些文件？我尝试过 Java，但找不到合并两个文件的方法。

我也必须这样做，`ffmpeg`因为它需要安装在客户端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:28:04.577

```
private void mergeFiles() {
    try {   
        DataSource videoDataSource = javax.media.Manager.createDataSource(oml.getURL()); //your video file
        DataSource audioDataSource = javax.media.Manager.createDataSource(realAudioFile.toURI().toURL()); // your audio file
        DataSource mixedDataSource = null; // data source to combine video with audio
        DataSource arrayDataSource[] = new DataSource[2]; //data source array
        DataSource outputDataSource = null; // file to output

        DataSink outputDataSink = null; // datasink for output file

        MediaLocator videoLocator = new MediaLocator(oml.getURL()); //media locator for video 
        MediaLocator audioLocator = new MediaLocator(realAudioFile.toURI().toURL()); //media locator for audio

        FileTypeDescriptor outputType = new FileTypeDescriptor(FileTypeDescriptor.QUICKTIME); //output video format type

        Format outputFormat[] = new Format[2]; //format array 
        VideoFormat videoFormat = new VideoFormat(VideoFormat.JPEG); // output video codec MPEG does not work on windows
        javax.media.format.AudioFormat audioMediaFormat = new javax.media.format.AudioFormat(
                javax.media.format.AudioFormat.LINEAR, 44100, 16, 1); //audio format

        outputFormat[0] = videoFormat;
        outputFormat[1] = audioMediaFormat;

        //create processors for each file
        Processor videoProcessor = Manager.createProcessor(videoDataSource); 
        Processor audioProcessor = Manager.createProcessor(audioDataSource);
        Processor processor = null;

        //start video and audio processors
        videoProcessor.realize();
        audioProcessor.realize();
        //wait till they are realized
        while(videoProcessor.getState() != 300 && audioProcessor.getState() != 300) {
            Thread.sleep(100);
        }
        //get processors dataoutputs to merge
        arrayDataSource[0] = videoProcessor.getDataOutput();
        arrayDataSource[1] = audioProcessor.getDataOutput();

        videoProcessor.start();
        audioProcessor.start();

        //create merging data source
        mixedDataSource = javax.media.Manager.createMergingDataSource(arrayDataSource);
        mixedDataSource.connect();
        mixedDataSource.start();
        //init final processor to create merged file
        ProcessorModel processorModel = new ProcessorModel(mixedDataSource, outputFormat, outputType);
        processor = Manager.createRealizedProcessor(processorModel);
        processor.addControllerListener(this);
        processor.configure();
        //wait till configured
        while(processor.getState() < 180) {
            Thread.sleep(20);
        }

        processor.setContentDescriptor(new ContentDescriptor(FileTypeDescriptor.QUICKTIME));

        TrackControl tcs[] = processor.getTrackControls();
        Format f[] = tcs[0].getSupportedFormats();

        tcs[0].setFormat(f[0]);

        processor.realize();
        //wait till realized
        while(processor.getState() < 300) {
            Thread.sleep(20);
        }
        //create merged file and start writing media to it
        outputDataSource = processor.getDataOutput();
        MediaLocator outputLocator = new MediaLocator("file:/"+directory.getAbsolutePath()+"/yourmovfile.mov");
        outputDataSink = Manager.createDataSink(outputDataSource, outputLocator);
        outputDataSink.open();
        outputDataSink.addDataSinkListener(this);
        outputDataSink.start();
        processor.start();

        while(processor.getState() < 500) {
            Thread.sleep(100);
        }
        //wait until writing is done
        waitForFileDone();
        //dispose processor and datasink
        outputDataSink.stop();
        processor.stop();

        outputDataSink.close();
        processor.close();

    } catch (NoDataSourceException | IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IncompatibleSourceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoDataSinkException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoProcessorException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (CannotRealizeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

Object waitFileSync = new Object();
boolean fileDone = false;
boolean fileSuccess = true;
Object waitSync = new Object();
boolean stateTransitionOK = true;

/**
 * Block until file writing is done.
 */
boolean waitForFileDone() {
    synchronized (waitFileSync) {
        try {
            while (!fileDone)
                waitFileSync.wait();
        } catch (Exception e) {
        }
    }
    return fileSuccess;
}

/**
 * Event handler for the file writer.
 */
public void dataSinkUpdate(DataSinkEvent evt) {

    if (evt instanceof EndOfStreamEvent) {
        synchronized (waitFileSync) {
            fileDone = true;
            waitFileSync.notifyAll();
        }
    } else if (evt instanceof DataSinkErrorEvent) {
        synchronized (waitFileSync) {
            fileDone = true;
            fileSuccess = false;
            waitFileSync.notifyAll();
        }
    }
}

@Override
public void controllerUpdate(ControllerEvent evt) {
    if (evt instanceof ConfigureCompleteEvent
            || evt instanceof RealizeCompleteEvent
            || evt instanceof PrefetchCompleteEvent) {
        synchronized (waitSync) {
            stateTransitionOK = true;
            waitSync.notifyAll();
        }
    } else if (evt instanceof ResourceUnavailableEvent) {
        synchronized (waitSync) {
            stateTransitionOK = false;
            waitSync.notifyAll();
        }
    } else if (evt instanceof EndOfMediaEvent) {
        evt.getSourceController().stop();
        evt.getSourceController().close();
    }

} 
```

你的类必须实现 ControllerListener、DataSinkListener。对我来说非常适合良好的视频和音频同步（音频转换半秒，但对我来说不是问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:50:59.910

您可以使用 Java 媒体框架 API (JMF)。检查此 [链接](http://www.oracle.com/technetwork/java/javase/index-135148.html#what.) 。Java Media Framework 基础知识和教程在此[链接中提供](http://www.ibm.com/developerworks/java/tutorials/j-jmf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T04:04:10.327

导入上述代码可能对某人有所帮助：

```
import java.io.IOException;
import javax.media.CannotRealizeException;
import javax.media.ConfigureCompleteEvent;
import javax.media.ControllerEvent;
import javax.media.ControllerListener;
import javax.media.DataSink;
import javax.media.EndOfMediaEvent;
import javax.media.Format;
import javax.media.IncompatibleSourceException;
import javax.media.Manager;
import javax.media.MediaLocator;
import javax.media.NoDataSinkException;
import javax.media.NoDataSourceException;
import javax.media.NoProcessorException;
import javax.media.PrefetchCompleteEvent;
import javax.media.Processor;
import javax.media.ProcessorModel;
import javax.media.RealizeCompleteEvent;
import javax.media.ResourceUnavailableEvent;
import javax.media.control.TrackControl;
import javax.media.datasink.DataSinkErrorEvent;
import javax.media.datasink.DataSinkEvent;    
import javax.media.datasink.DataSinkListener;    
import javax.media.datasink.EndOfStreamEvent;
import javax.media.format.VideoFormat;
import javax.media.protocol.ContentDescriptor;
import javax.media.protocol.DataSource;
import javax.media.protocol.FileTypeDescriptor; 
```

# xcode - 当我在 Xcode 4.5.2 中使用 UIColor clearColor 方法时，旧标签文本不会被清除。新文本叠加在旧文本之上

> ID：14013881
> 
> 赞同：1
> 
> 时间：2012-12-23T19:09:37.630
> 
> 标签：xcode, xcode4.5

当我在 Xcode 4.5.2 中使用 UIColor clearColor 方法时，旧标签文本不会被清除。新文本正在叠加在旧文本之上。

下面是我的代码。每当我按下重新启动时，我都希望我的标签重置为@""。但它并没有被清除。

```
 CGRect frame=CGRectMake(intX, intY, 15, 18);
        UILabel *label = [[UILabel alloc] initWithFrame:frame];
        [self.view addSubview:label];
        [label setFont:[UIFont fontWithName:@"ChalkboardSE-Light" size:17]];

        CGRect frame1=CGRectMake(intSerialNoX, intY, 20, 18);
        UILabel *label1 = [[UILabel alloc] initWithFrame:frame1];
        [self.view addSubview:label1];
        [label1 setFont:[UIFont fontWithName:@"ChalkboardSE-Light" size:17]];

        label1.textColor = color;

        label.backgroundColor=[UIColor clearColor];
        label1.backgroundColor=[UIColor clearColor];

        if([strAction isEqualToString:@"GO"])
        {
            [label1 setText:[myLableSerialNoArray objectAtIndex:i]];
            [label setText:[[myLableWordsArray objectAtIndex:i] substringWithRange:NSMakeRange(j,1)]];
        }
        else if([strAction isEqualToString:@"RESTART"])
        {
            [label1 setText:@""];
            [label setText:@""];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:20:12.713

您是否设置了断点以确保 `[label1 setText:@""];`被调用？

无论如何，我认为问题在于每次调用此方法时您都在分配和初始化新标签，并将它们放置在先前调用同一方法时已经存在的标签之上。您可能只想执行一次 alloc/init，然后添加一个属性来保存对每个标签的引用，然后您可以在方法内部使用它来设置/重置文本。

# node.js - 将 AzureServiceProject Node.js 发布到 Windows Server 2012

> ID：14013883
> 
> 赞同：2
> 
> 时间：2012-12-23T19:09:55.290
> 
> 标签：node.js, azure, azure-powershell

我正在尝试使用 Powershell“Publish-AzureServiceProject”cmdlet 将 Node.js 包发布到 Azure。

使用默认的 osFamily="2" (Windows Server 2008 R2) 它可以按预期工作，但是当我使用 osFamily="3" (Windows Server 2012) 发布时，我收到以下错误：

> 上载包所需的名为 NetFx35 的功能在为部署选择的操作系统 * 中不可用。

显然我没有使用 .Net 但 3.5 是阻止我上传包的默认设置。

要指定 .Net 4.5，我读到我需要创建一个 roleproperties.txt 文件，其中包含：

> TargetFrameWorkVersion=v4.5

并通过 /rolePropertiesFile 将其传递给 cspack。

但是，由于我自己没有调用 cspack，如何通过 Publish-AzureServiceProject 将该选项传递给 cspack？还是有其他解决方法？

* * *

目前我的 ServiceDefinition 看起来像这样：

```
<?xml version="1.0"?>
<ServiceDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="Foo" upgradeDomainCount="1" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WorkerRole name="Bar">
    <Imports>
      <Import moduleName="RemoteForwarder" />
      <Import moduleName="RemoteAccess" />
    </Imports>
    <Startup>
      <Task commandLine="setup_worker.cmd &gt; log.txt" executionContext="elevated">
        <Environment>
          <Variable name="EMULATED">
            <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
          </Variable>
          <Variable name="RUNTIMEID" value="node" />
          <Variable name="RUNTIMEURL" value="http://nodertncu.blob.core.windows.net/node/0.6.20.exe" />
        </Environment>
      </Task>
    </Startup>
    <Endpoints>
      <InputEndpoint name="HttpIn" protocol="tcp" port="80" />
    </Endpoints>
    <Runtime>
      <Environment>
        <Variable name="PORT">
          <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/Endpoints/Endpoint[@name='HttpIn']/@port" />
        </Variable>
        <Variable name="EMULATED">
          <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
        </Variable>
      </Environment>
      <EntryPoint>
        <ProgramEntryPoint commandLine="runnode.cmd" setReadyOnProcessStart="true" />
      </EntryPoint>
    </Runtime>
  </WorkerRole>
</ServiceDefinition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:41:23.257

由于 Node SDK 在不使用 cspack.exe 的情况下构建包（以保持平台独立架构），因此您不能使用“/rolePropertiesFile”选项。

作为解决方法，您可以在 ServiceDefinition 中使用**Runtime -> EntryPoint -> NetFxEntryPoint -> targetFrameworkVersion="v4.5"**设置 targetFrameworkVersion 设置，如下例所示：

```
<?xml version="1.0"?>
<ServiceDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="NodeAvkash" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WebRole name="WebRole1" vmsize="ExtraSmall">
    <Imports />
    <Startup>
      <Task commandLine="setup_web.cmd &gt; log.txt" executionContext="elevated">
        <Environment>
          <Variable name="EMULATED">
            <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
          </Variable>
          <Variable name="RUNTIMEID" value="node;iisnode" />
          <Variable name="RUNTIMEURL" value="http://nodertncu.blob.core.windows.net/node/0.6.20.exe;http://nodertncu.blob.core.windows.net/iisnode/0.1.21.exe" />
        </Environment>
      </Task>
    </Startup>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
    </Endpoints>
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Runtime executionContext="elevated">
      <EntryPoint>
        <NetFxEntryPoint assemblyName="WebRole1.dll" targetFrameworkVersion="v4.5" />
      </EntryPoint>
    </Runtime>
  </WebRole>
</ServiceDefinition> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:11:50.013

因此，目前，您需要做一些工作才能让 OSFamily=3 与非 .Net 角色一起工作。本质上，您需要自己运行 cspack 来创建一个包并指定一个允许您以 .Net 4.5 为目标的角色属性文件（是的，即使您根本不使用 .Net，您也需要让 cspack 工具相信您重新使用.Net 4.5）。

以下是步骤：

1.  去创建一个具有 Web 角色的新节点项目。
2.  修改 cscfg 以设置 OS Family = 3。
3.  将以下 roleproperties.txt 拖放到服务的根目录中。
4.  启动“Windows Azure 命令提示符”，然后转到服务根文件夹。
5.  运行此命令：cspack ServiceDefinition.csdef /role:WebRole1;WebRole1 /sites:WebRole1;Web;WebRole1 /rolePropertiesFile:WebRole1;RoleProperties.txt /out:package.cspkg
6.  登录门户并手动创建服务/上传 cspkg

roleproperties.txt 的内容：

`TargetFrameworkVersion=v4.5`

# asp.net - ASP.NET Web API 应用程序中的 Autofac 多租户 IoC 容器

> ID：14013885
> 
> 赞同：8
> 
> 时间：2012-12-23T19:10:10.657
> 
> 标签：asp.net, dependency-injection, asp.net-web-api, autofac, multi-tenant

[Autofac](http://code.google.com/p/autofac) 3.0 将支持[MultitenantIntegration ，](http://code.google.com/p/autofac/wiki/MultitenantIntegration)[其预览版](http://nuget.org/packages/Autofac.Extras.Multitenant)现已发布。为了尝试，我创建了一个 ASP.NET Web API 应用程序，配置如下：

```
public class Global : System.Web.HttpApplication {

    protected void Application_Start(object sender, EventArgs e) {

        var config = GlobalConfiguration.Configuration;
        config.Routes.MapHttpRoute("Default", "api/{controller}");
        RegisterDependencies(config);
    }

    public void RegisterDependencies(HttpConfiguration config) {

        var builder = new ContainerBuilder();
        builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

        // creates a logger instance per tenant
        builder.RegisterType<LoggerService>().As<ILoggerService>().InstancePerTenant();

        var mtc = new MultitenantContainer(
            new RequestParameterTenantIdentificationStrategy("tenant"),
            builder.Build());

        config.DependencyResolver = new AutofacWebApiDependencyResolver(mtc);
    }
} 
```

它完成工作并根据租户创建一个`LoggerService`实例。`ILoggerService`在这个阶段我有两个问题我无法解决：

1.  我在`RequestParameterTenantIdentificationStrategy`这里提供的开箱即用的 TenantIdentificationStrategy 仅用于此演示应用程序。我可以通过实现`ITenantIdentificationStrategy`接口来创建我的自定义 TenantIdentificationStrategy。但是，`TryIdentifyTenant`方法`ITenantIdentificationStrategy`使您依赖于静态实例，例如`HttpContext.Current`在 ASP.NET Web API 环境中我不想要的东西，因为我希望我的 API 托管不可知论（我知道我可以将这项工作委托给托管层，但我不想这样做）。是否有另一种方法可以不依赖静态实例来实现这一点？
2.  我还有机会注册租户特定实例，如下所示：

    ```
    mtc.ConfigureTenant("tenant1", cb => cb.RegisterType<Foo>()
                                        .As<IFoo>().InstancePerApiRequest()); 
    ```

    但是，我的一种情况要求我通过构造函数参数传递租户名称，我希望有如下内容：

    ```
    mtc.ConfigureTenant((cb, tenantName) => cb.RegisterType<Foo>()
                                        .As<IFoo>()
                                        .WithParameter("tenantName", tenantName)
                                        .InstancePerApiRequest()); 
    ```

    目前还没有这样的 API。是否有另一种方法来实现这个或这种要求没有任何意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T04:57:02.170

多租户支持由来已久，只是 3.0 是我们第一次为它提供 NuGet 包。:)

如`RequestParameterTenantIdentificationStrategy`文档所述，这只是一个非常简单的示例，显示了一种可能（**但不推荐**）识别租户的方法。您必须自己选择如何根据运营环境来识别您的租户。它可能来自`web.config`当前环境中的值、环境变量或其他东西。如果您不想使用`HttpContext.Current`，请不要使用。您可以选择从哪里获取该信息。

（关于`RPTIStrategy`- 不推荐的部分是使用查询字符串或请求参数作为租户 ID 机制的注释。我`HttpContext`在我的生产应用程序中使用它，它工作正常。在你必须实际之前，你只能抽象出这么多触摸裸露的金属。）

没有开箱即用的方法来提供您要求的 lambda 注册语法，主要是因为租户没有通过解析过程。解决过程是：

1.  使用策略识别租户。
2.  查找租户配置的生命周期范围。
3.  使用标准 Autofac Resolve 样式语法。

它故意简单并类似于现有的操作。在解析时，属于租户的子生命周期范围被*标记*为租户 ID，但解析操作不知道租户 ID ......所以 lambda 不起作用（并且可能不会很快，因为它会改变 Autofac 工作方式的基本内部结构）。

要完成您正在寻找的内容，您可以`InstancePerTenant`在注册时使用扩展名的组合...

```
var builder = new ContainerBuilder();
builder.RegisterType<Foo>().As<IFoo>().InstancePerTenant(); 
```

...并将 注册`ITenantIdentificationStrategy`为容器中的依赖项。

```
builder.Register(myIdStrategy).As<ITenantIdentificationStrategy>(); 
```

然后让您的班级直接采用`ITenantIdentificationStrategy`而不是租户 ID。请改用该策略获取租户 ID。

如果您真的想变得花哨，您可以注册一个解析 ID 策略的键控 lambda，然后获取租户 ID。然后，您可以像以前一样向对象添加参数注册，但使用键控服务。（我现在要靠记忆去，所以你必须在这里仔细检查我的语法，但它会是这样的......）

```
builder.Register(c => 
       {  var s = c.Resolve<ITenantIdentificationStrategy>();
          object id;
          s.TryIdentifyTenant(out id);
          return id;
       }).Keyed<object>("tenantId");

builder.RegisterType<Foo>()
       .As<IFoo>()
       .WithParameter(
         (pi, c) => pi.Name == "tenantId",
         (pi, c) => c.ResolveKeyed<object>("tenantId"))
       .InstancePerApiRequest(); 
```

同样，您需要再次检查我，但我很确定（或微小的变化）应该可以为您提供您想要的。

# iphone - 如果数字是整数，则省略分数格式数字的优雅方法

> ID：14013888
> 
> 赞同：2
> 
> 时间：2012-12-23T19:10:26.137
> 
> 标签：iphone, objective-c

我正在格式化浮点数，现在我有 %0.2f 格式化程序，但如果浮点数是偶数，我想省略 .00 。

当然，我可以考虑用字符串替换 .00，但这很粗糙。

我发现 NSNumber 的描述也做了类似的事情：

```
NSNumber *number = [NSNumber numberWithFloat:_paragraphSpacing];
[retString appendFormat:@"margin-bottom:%@px;", number]; 
```

这不会悬停不限制后逗号数字。如果数字是 1234.56789，那么描述将输出该数字。

所以我的问题是，是否有一种同样简单的方法——可能不必创建 NSNumber 对象——来实现这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:20:20.973

由于浮点数不精确，因此无法保证您的数字实际上是整数。但是，您可以检查它是否在与整数值相当小的距离内。当然，您不需要为此提供 NSNumber。（一般来说，NSNumber 不用于格式化，其目的是使用 Objective-C 对象表示原始 C 类型，无论是整数类型还是浮点类型。）

```
#include <math.h>

- (NSString *)stringFromFloat:(float)f
{
    const float eps = 1.0e-6;
    if (abs(round(f) - f) < eps) {
        // assume an integer
        return [NSString stringWithFormat:@"margin-bottom: %.0fpx", round(f)];
    } else {
        // assume a real number
        return [NSString stringWithFormat:@"margin-bottom: %.2fpx", f];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:27:27.300

您可以使用 C 函数`modff`获取小数部分并对其进行测试：

```
float fractionPart = 0.;
modff(_paragraphSpacing, &fractionPart);
if( fabsf(fractionPart) < 0.01 ) {
  // format as integer
  [retString appendFormat:@"margin-bottom:%d", (int)_paragraphSpacing];
} else {
  // format as float
  [retString appendFormat:@"margin-bottom:%0.2f", _paragraphSpacing];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T19:38:51.757

使用格式化程序：

```
NSNumberFormatter* formatter= [NSNumberFormatter new];
formatter.numberStyle= NSNumberFormatterDecimalStyle;
formatter.maximumFractionDigits=2;
NSNumber *number = [NSNumber numberWithFloat:_paragraphSpacing];
[retString appendFormat:@"margin-bottom:%@;", [formatter stringFromNumber: number]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T19:39:08.480

`NSNumberFormatter`您可以为此使用 an ：

```
static NSNumberFormatter *numberFormatter = nil;
if (numberFormatter == nil) {
    numberFormatter = [[NSNumberFormatter alloc] init];
    numberFormatter.minimumFractionDigits = 0;
    numberFormatter.maximumFractionDigits = 2;
    numberFormatter.usesGroupingSeparator = NO;
}
NSString *formattedNumberString = [numberFormatter
     stringForNumber:[NSNumber numberWithDouble: _paragraphSpacing]]; 
```

# mysql - 如何避免 MySQL 崩溃或意外关闭后长时间的 MyISAM 恢复

> ID：14013893
> 
> 赞同：0
> 
> 时间：2012-12-23T19:11:17.557
> 
> 标签：mysql, myisam, recovery

我们的系统使用 MySQL 5.x，它每天产生大量数据。昨天在我们客户的一个地方，UPS 关闭，然后 Mysql 启动 MyISAM 恢复，这需要大约 10 个小时。现在我的问题是，下次有什么办法可以避免这种长时间的恢复？例如，在下一次崩溃后只能从第一天恢复的一天结束的事情。或者在一天结束时保存数据，然后如果系统崩溃，最后几天的数据不会发生任何事情，他们不需要恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:36:56.340

不要使用 MyISAM。这是一种天生就有缺陷的格式，很容易出现这类问题。

改用 InnoDB。除了具有更好的恢复行为外，它在负载下也更快，并支持事务。

# zend-framework - 预期响应代码 200，得到 400。无法转换文档

> ID：14013901
> 
> 赞同：2
> 
> 时间：2012-12-23T19:12:26.810
> 
> 标签：zend-framework, google-drive-api, google-docs-api, gdata-api, zend-gdata

在过去两周左右的时间里，我突然开始收到有关用户在我们的应用程序中收到错误消息的报告：“预期响应代码 200，得到 400。无法转换文档。” 这是已经存在多年的代码，没有任何问题。我们将 Zend Framework (GData) 与 Google Docs (AuthSub) 结合使用。

当问题发生时，我们会将问题记录到文本文件中。当它被记录时，用户经常尝试多次（有时相隔几秒钟，有时相隔更长的时间）并且它继续失败。有问题的代码只是在用户的帐户中创建了一个新的 Google 文档并给它一个标题（没有正文内容）。

最初，我使用以下代码：

```
// Create new document
$data = new Zend_Gdata_Docs_DocumentListEntry();
$data->setCategory(
  array(new Zend_Gdata_App_Extension_Category(
          "http://schemas.google.com/docs/2007#document",
          "http://schemas.google.com/g/2005#kind"
)));
$data->setTitle(new Zend_Gdata_App_Extension_Title($title, null));

// Add document to your list
$test = $sharedocs->insertDocument($data, Zend_Gdata_Docs::DOCUMENTS_LIST_FEED_URI); 
```

为了试验并查看该特定功能是否存在问题，我尝试创建一个空白单词文档并将代码更改为：

```
$test = $sharedocs->uploadFile('/mypath/empty.doc', $title, null, Zend_Gdata_Docs::DOCUMENTS_LIST_FEED_URI); 
```

但是，我仍然看到“无法转换文档”错误。它们相对不常见，我无法在我自己的计算机上重现该问题。$title 变量不包含任何异常（特殊字符等）。

这段代码之前都运行良好——现在 Google Docs API 是否存在已知问题？我还能尝试什么？

**注意：请在下面查看我的后续评论，其中我已经确定了发生此错误的可重现场景。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:46:30.267

我遇到了完全相同的问题，但我注意到如果不是文档，我*可以*使用 api 来保存演示文稿......所以，这是一个可怕的 hack，但我尝试保存文档（如果帐户已经访问）...如果失败，我会保存并删除演示文稿，然后重试保存文档，然后可以使用。可怕的，可怕的，可怕的黑客

# c++ - 对象切片如何在 C++ 中发生？

> ID：14013909
> 
> 赞同：1
> 
> 时间：2012-12-23T19:13:21.627
> 
> 标签：c++, inheritance

第 1 行和第 2 行都将进行对象切片还是单独进行第 1 行？谢谢你的时间 ！

```
class Base{
};

class Derived : public Base{
};

main()
{       
   Derived d1;
   Base b1 = d1;  //line 1
   Base &b2 = d1; // line 2
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:15:42.710

只有第一个分配可以导致切片，因为该分配涉及副本。第二个赋值仅引用对象。没有副本，就没有切片。

# sql - 更新时主键约束错误

> ID：14013912
> 
> 赞同：0
> 
> 时间：2012-12-23T19:13:32.620
> 
> 标签：sql, sql-server-2008

我在 SQL Server 中进行大规模更新时遇到了一些挑战。我有一个带有复合主键（学生ID、登录名、密码）的表。他们在一个组中具有共同的登录名和密码。我正在做一个（同样的登录并通过）更新并设置他们的登录并传递给字段类组=x的新值。但是我得到一个重复的主键违规错误。知道为什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:20:17.657

鉴于您有一个奇怪的主键，很容易看出它是如何被违反的。例如，假设学生 1 在表中有两行：

```
studentid  login     pass                group
1          bobama    reallyborninkenia   politician
1          bobama2   raisetaxes          politician 
```

并说你更新组 `politician`：

```
update  StudentTable
set     login = 'bobama'
,       pass = 'justpwndromney'
where   [group] = 'politician' 
```

然后你会得到一个主键违规，因为会有两行具有相同的`(studentid, login, pass)`组合。

如果这很奇怪，那是因为您的主键很奇怪。我希望主键只是`(studentid)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:40:03.283

很明显存在冲突，您正在创建表中已经存在的学生 ID/登录名/密码组合。此查询应向您显示与您提议的更改发生冲突的现有行在哪里：

```
select t.* from [your-table] t
join (select * from [your-table] where [class-group] = x) proposed-change
on proposed-change.[studentid] = [t.studentid]
where t.login = 'proposed-login' and t.password = 'proposed-password' 
```

# php - 通过php代码下载文件

> ID：14013914
> 
> 赞同：0
> 
> 时间：2012-12-23T19:13:36.213
> 
> 标签：php, database, file, download

我创建了一个显示数据库数据的 php 文件：

[http://www.eedmoe.gov.bd/report/app/webroot/files/uploaded/tenders/tender.php](http://www.eedmoe.gov.bd/report/app/webroot/files/uploaded/tenders/tender.php)

但我想下载文件。Report.doc、contact.txt 等文件正在保存此文件夹：

[http://www.eedmoe.gov.bd/report/app/webroot/files/uploaded/tenders/](http://www.eedmoe.gov.bd/report/app/webroot/files/uploaded/tenders/)

我希望任何访问者或用户都可以通过单击或另存为来下载这些文件。我要使用的 php 函数或代码应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:16:43.957

将链接的 href 属性更改为文件名。例如，要下载“contact.txt”，请在您的 html 中使用此链接：

```
<a href="contact.txt">contact.txt</a> 
```

为此，您不需要 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T21:03:04.423

如果您不希望浏览器打开特定页面，您也可以创建一个特定页面来强制下载：

```
<?php header("Content-Type: application/force-download"); ?> 
```

[在此处查看文档](http://php.net/manual/en/function.header.php)

# c++ - 删除其中一个元素时出现分段错误

> ID：14013916
> 
> 赞同：0
> 
> 时间：2012-12-23T19:13:41.953
> 
> 标签：c++, linked-list

这是一个将在一个演员表中删除一个演员的代码。我在电影和他们的演员之间建立了联系。所以这段代码正在检查电影是否存在，然后它会查看它的演员表，当它找到我们正在寻找的演员时，它会删除它。然而，虽然这段代码对我来说似乎很合理，但我遇到了分段错误。可能是什么原因，在这种情况下我们应该注意什么，以免出现段错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:17:07.420

在这一点上

```
if( c-> next ->  name == actorFirstName && c -> next -> lastName == actorLastName) 
```

您假设 c->next 不为 NULL，但您的循环仅确保 c 不为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:26:12.883

正如 DrC 所说，“下一个”是错误的。尝试这个：

```
 void MovieDatabase:: removeActor( const string movieTitle, const string actorFirstName, const string actorLastName )
{
        for(Movie* m= headMovie; m != NULL;  m = m-> next){
               if(m-> title == movieTitle && m -> headCast !=NULL){
                        for(Cast* c = m -> headCast; c != NULL; c= c-> next){
                                if( c ->  name == actorFirstName && c -> lastName == actorLastName){
                                        Cast* temp = c-> next;
                                        delete c;
                                        c = temp;

                           }
                    }
            }
    }

} 
```

# c# - 用字符串替换新行正则表达式

> ID：14013918
> 
> 赞同：1
> 
> 时间：2012-12-23T19:13:58.757
> 
> 标签：c#, regex

这是我的文本文件的一部分：

```
[Script Info]
Title: Default Aegisub file
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
Collisions: Normal
Scroll Position: 0
Active Line: 0
Video Zoom Percent: 1
YCbCr Matrix: None

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR,MarginV, Encoding
Style: Default,Arial,20,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,2,10,10,10,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:0:03.84,0:0:07.17,Default,,0,0,0,,An Aztec temple.
Dialogue: 0,0:0:08.88,0:0:10.97,Default,,0,0,0,,Aztecs this far south?
Dialogue: 0,0:0:11.1,0:0:13.84,Default,,0,0,0,,Dr. Covas, we must stop.
This is sacred ground.
Dialogue: 0,0:0:13.88,0:0:15.85,Default,,0,0,0,,This could be the biggest
archeological discovery
Dialogue: 0,0:0:15.88,0:0:16.87,Default,,0,0,0,,of the 21st century. 
```

我需要这样做（我跳过了一些部分来向您展示更改后的结果）

```
Dialogue: 0,0:0:03.84,0:0:07.17,Default,,0,0,0,,An Aztec temple.
Dialogue: 0,0:0:08.88,0:0:10.97,Default,,0,0,0,,Aztecs this far south?
Dialogue: 0,0:0:11.1,0:0:13.84,Default,,0,0,0,,Dr. Covas, we must stop.\NThis is sacred ground.
Dialogue: 0,0:0:13.88,0:0:15.85,Default,,0,0,0,,This could be the biggest\Narcheological discovery
Dialogue: 0,0:0:15.88,0:0:16.87,Default,,0,0,0,,of the 21st century. 
```

我尝试了很多东西，例如：`LoadedFile = Regex.Replace(LoadedFile, @"(?<=Dialogue.+)[\n\r]+^(Dialogue)", "\\N");`

换句话说，只有当新行之后的文本不是“对话”时，我才想用**\N替换新行**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:16:49.413

```
string LoadedFile = File.ReadAllText("1.txt");
string result = Regex.Replace(LoadedFile, "(Dialogue.+?)\r\n^((?!Dialogue).*)$", "$1\\N$2", RegexOptions.Multiline); 
```

# c# - 将 C dll 中的无符号长数组作为 uint[] 返回到 C# 为什么会引发 MarshalDirectiveException 错误？

> ID：14013920
> 
> 赞同：3
> 
> 时间：2012-12-23T19:14:11.407
> 
> 标签：c#, c, pinvoke

我正在使用指向无符号长数组（操作数据）的指针，然后将其发送回 C#

在 C# 中

```
[DllImport("some_dll.dll")]
private static extern uint[] func(uint[]x, uint[]y, uint[]z); 
```

C 头文件

```
_declspec(dllexport) unsigned long* _stdcall func(unsigned long[],
    unsigned long[],unsigned long[]); 
```

错误

```
MarshalDirectiveException
无法封送“返回值”：托管/非托管类型组合无效

```

请让我知道是什么导致了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T19:42:04.340

该消息意味着 p/invoke 编组器无法将该返回值编组为`uint[]`.

在我看来，您有以下选择：

1.  将 C# 函数声明为返回`IntPtr`. 然后在托管方面，您需要将内存复制到`uint[]`C# 代码中分配的内存中。你可以用它`Marshal.Copy`来做到这一点。不知何故，您需要找出数组的长度。您还需要处理解除分配。您的 C# 代码无法做到这一点。所以它必须在本机代码中调用另一个函数并要求本机代码解除分配。
2.  `uint[]`在调用本机代码之前在 C# 代码中分配。不是使用函数返回值，而是`uint[]`作为参数传递。这需要调用代码（即 C# 代码）来了解数组需要多大。

如果您可以选择选项 2，它将导致界面两侧的代码更简单。我的猜测是返回数组与输入数组的长度相同。在这种情况下选择选项 2。

# javascript - 单击时创建一个暗淡的背景

> ID：14013924
> 
> 赞同：4
> 
> 时间：2012-12-23T19:14:41.817
> 
> 标签：javascript, html, css

希望不要太含糊。我要做的就是在单击链接后使整个页面变暗。我会想象有`div style="height:100%; width=100%;"`一个高`z-index`。覆盖网页。我的问题是切换这个 div。我不知道我什至应该用什么来完成这个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T19:22:08.033

**[使用 jQuery](http://jsfiddle.net/3vGqp/1/)**或**[使用沼泽标准 Javascript 的](http://jsfiddle.net/3vGqp/2/)****演示**，都展示了如何切换元素。

**HTML**你没有说你想如何切换它。使用按钮？

```
<button onclick="dim();">Dim</button>
<div id="dimmer"></div> 
```

但请记住，调光器会越过按钮

**CSS**

```
#dimmer
{
    background:#000;
    opacity:0.5;
    position:fixed; /* important to use fixed, not absolute */
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:none;
    z-index:9999; /* may not be necessary */
} 
```

NB 使用`position: fixed`100% 高度只是窗口高度，如果您的文档较大，使用`position: absolute`不会使整个文档变暗 - 您可以滚动查看有可见的内容。

**Javascript**

```
function dim(bool)
{
    if (typeof bool=='undefined') bool=true; // so you can shorten dim(true) to dim()
    document.getElementById('dimmer').style.display=(bool?'block':'none');
}    

dim(true); // on
dim(false); // off 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:25:54.117

你可以用一个简单的 JavaScript

[**演示**](http://jsfiddle.net/vSnWB/)

HTML

```
<a href="#" onclick="dim_div()">Click me</a>
<div id="toggle_div"></div>
Hello World 
```

JavaScript

```
function dim_div() {
    document.getElementById("toggle_div").style.display="block";
} 
```

CSS

```
#toggle_div {
    background-color: rgba(255, 255, 255, .6);
    display: none;
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    z-index: 999;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T07:52:10.753

HTML

```
<div id="initial_opacity_zero"></div>
<button id="button_to_adjust_opacity" onclick="func_onclick();"></button> 
```

CSS

```
div#initial_opacity_zero{
  opacity:0;
  display:block;
  position:fixed;
  top:0px; right:0px; bottom:0px; left:0px;
} 
```

JavaScript：

```
function func_onclick(){
  document.getElementById("initial_opacity_zero").style.opacity="0.6";
} 
```

# mysql - 创建一个视图，其中 t1 中的记录在 t2 中不存在？确认 Union/Left Join/Inner Join？

> ID：14013928
> 
> 赞同：0
> 
> 时间：2012-12-23T19:15:28.883
> 
> 标签：mysql

我正在尝试查看 t1 中的记录，其中来自 t1 的源 ID 不在 t2 中。

就像......“其他表中不存在哪些记录？”

我需要在 FROM 子句中包含 t2 吗？谢谢

```
SELECT t1.fee_source_id, t1.company_name, t1.document
FROM t1
WHERE t1.fee_source_id NOT IN (

     SELECT t1.fee_source_id
     FROM t1 INNER JOIN t2 ON t1.fee_source_id = t2.fee_source

                              )
ORDER BY t1.aif_id DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:22:19.220

您正在寻求实现反连接，在 MySQL 中有三种可能性：

1.  使用`IN`：

    ```
    SELECT fee_source_id, company_name, document
    FROM   t1
    WHERE  fee_source_id NOT IN (SELECT fee_source FROM t2)
    ORDER BY aif_id DESC 
    ```

2.  使用`EXISTS`：

    ```
    SELECT fee_source_id, company_name, document
    FROM   t1
    WHERE  NOT EXISTS (
      SELECT * FROM t2 WHERE t2.fee_source = t1.fee_source_id LIMIT 1
    )
    ORDER BY aif_id DESC 
    ```

3.  使用`JOIN`：

    ```
    SELECT   t1.fee_source_id, t1.company_name, t1.document
    FROM     t1 LEFT JOIN t2 ON t2.fee_source = t1.fee_source_id
    WHERE    t2.fee_source IS NULL
    ORDER BY t1.aif_id DESC 
    ```

根据[@Quassnoi 的分析](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)：

> ### 概括
> 
> MySQL 可以优化所有三种方法来完成一种`NESTED LOOPS ANTI JOIN`.
> 
> 它将从 中获取每个值`t_left`并在索引中查找它`t_right.value`。在索引命中或索引未命中的情况下，相应的谓词将立即分别返回`FALSE`or `TRUE`，并且将立即做出是否返回行的决定，`t_left`而无需检查 中的其他行`t_right`。
> 
> 但是，这三种方法会生成三种不同的计划，由三段不同的代码执行。执行谓词的代码比执行和优化使用方法的代码效率低`EXISTS`约**30% 。**`index_subquery``LEFT JOIN``Not exists`
> 
> **这就是为什么在MySQL**中搜索缺失值的最佳方法是使用`LEFT JOIN / IS NULL`or`NOT IN`而不是`NOT EXISTS`.

但是，我不完全确定该分析如何与 MySQL 手册中关于[Optimizing Subqueries with `EXISTS`Strategy](http://dev.mysql.com/doc/en/subquery-optimization-with-exists.html)的部分相一致，这表明上面的第二种方法应该比第一种*更有效。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:37:16.737

下面的另一个选项（类似于反加入）......虽然上面的答案很好。谢谢！

```
 SELECT   D1.deptno, D1.dname
        FROM     dept D1
        MINUS
        SELECT   D2.deptno, D2.dname
        FROM     dept D2, emp E2
        WHERE    D2.deptno = E2.deptno
        ORDER BY 1; 
```

# java - java同步在指定的时间间隔内保持对象

> ID：14013936
> 
> 赞同：0
> 
> 时间：2012-12-23T19:16:00.407
> 
> 标签：java, multithreading

在java中，一个线程可以在某个指定的时间间隔内保持一个对象吗？例如，假设我有以下代码：

```
package test;

class Thread1 implements Runnable {
    private int balance;
    @Override
    public void run() {
        // TODO Auto-generated method stub
    for(int i=0;i<50;i++)
    {
        increment();

        System.out.println("The bal by "+Thread.currentThread().getName()+" "+balance);
    }
    }

    public synchronized void increment()
    {
        int i=balance;
        balance =i+1;
    }

} 
```

主类：

```
package test;

public class MainC {
public static void main(String args[])
{
    Thread1 job=new Thread1();
    Thread a =new Thread(job);
    Thread b=new Thread(job);
    a.setName("Thread a");
    b.setName("Thread b");
    a.start();
    b.start();

}
} 
```

现在，我希望线程 1 保持对增量方法的锁定直到 i==10 并且不希望线程 2 访问增量方法！可能吗！？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:26:19.647

除了作为方法修饰符之外，`synchronized`还可以在任何独立的代码块上使用。例如：

```
synchronized (this) {
    doStuff();
    doMoreStuff();
} 
```

在您的情况下，您可以将循环分成两个循环，并将第一个循环放在一个`synchronized`块内。

# nancy - Nancyfx Singleton 每个会话

> ID：14013939
> 
> 赞同：0
> 
> 时间：2012-12-23T19:16:11.127
> 
> 标签：nancy

如果这是一个明显的问题，请原谅，但我看不到让南希的 IOC 容器为每个会话提供一个单例的方法。显然，我可以检查 Session 是否有我之前缓存的项目（在这种情况下是模型），但考虑到框架的其他细节，这似乎有点笨拙。在 ASP.NET 中托管

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:58:49.633

每个会话或每个请求？没有办法维护会话对象的生命周期（这很奇怪），但是您可以通过在引导程序中覆盖 ConfigureRequestContainer 并将其注册为像这样的单例来按请求执行此操作：

[https://github.com/NancyFx/Nancy/blob/master/src/Nancy.Demo.Hosting.Aspnet/DemoBootstrapper.cs#L35](https://github.com/NancyFx/Nancy/blob/master/src/Nancy.Demo.Hosting.Aspnet/DemoBootstrapper.cs#L35)

# javascript - 如何在json中创建一个带有循环“for”的表？

> ID：14013940
> 
> 赞同：-3
> 
> 时间：2012-12-23T19:16:12.063
> 
> 标签：javascript, html, json

我有以下html表：

```
 <table>
   <tr>
     <th>  </th>
     <th> Monday </th> 
     <th> Tuesday </th> 
     <th> Wednesday</th> 
     <th> Thursday </th> 
     <th> Friday </th>
     <th> Saturday</th> 
   </tr>

    <tr>
      <td> 8:30 - 10:00 </td>
      <td> Math</td>
      <td>Math </td>
      <td>Math</td>
      <td> Math </td>
      <td> Math</td>
      <td> Math</td>
    </tr>
</table> 
```

如何仅使用 JavaScript 创建这样的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:07:26.753

```
<div id="output"></div>
<script>
    var days = {
        "Monday": ["8:30 - 10:00", "Math", "Math", "Math", "Math", "Math", "Math"],
        "Tuesday": [],
        "Wednesday": [],
        "Thursday ": [],
        "Friday": [],
        "Saturday": []

    }

    var html;

    html = "<table><tr>"
    for (var day in days) {

        html += "<th>" + day + "</th>";

    }

    html += "</tr>"
    for (var day in days) {

        if (days[day].length != 0) {
            html += "<tr>"

            for (var i = 0; i < days[day].length; i++) {
                html += "<td>" + days[day][i] + "</td>"
            }
        }

         html += "</tr>";
    }
    html += "</table>";

    document.getElementById("output").innerHTML = html;
</script> 
```

# html - 如何补偿 100% 宽度输入文本字段的填充？

> ID：14013941
> 
> 赞同：1
> 
> 时间：2012-12-23T19:16:17.747
> 
> 标签：html, css, textinput

我在输入文本字段上左右放置了填充，以便字段内的文本不会与字段的左侧和右侧对接。如您所知，这是一种标准的 UI 设计实践。我面临的问题是我希望我的输入文本字段具有 100% 的宽度，以便它填充 div 的内部，实际上我没有为此输入文本字段定义特定的像素值，因为它正在填充周围的 div 容器。我将如何补偿我放置在该字段上的填充的宽度？我是否需要手动减小宽度，比如 93%，直到达到相同的结果？

# ios - 使用 NSCondition 等待异步方法

> ID：14013947
> 
> 赞同：2
> 
> 时间：2012-12-23T19:16:58.520
> 
> 标签：ios, multithreading, nsurlrequest, nscondition

我正在通过互联网异步下载四个 plist 文件。我需要等到所有四个文件都下载完毕，直到我在第一次运行时推送 UIViewController，或者在所有后续运行时刷新数据并重新加载我的所有 UITableViews。

在第一次运行时，一切正常。刷新时，所有四个 url 请求都被调用并启动，但从不调用它们的完成或失败块，并且 UI 冻结。这很奇怪，因为我在后台线程中执行所有操作。我一直无法弄清楚为什么会这样。

第一次加载和刷新方法调用四个“更新”方法的方式相同，使用NSCondition的方式相同。

第一次运行：

```
- (void)loadContentForProgram:(NSString *)programPath
{
    NSLog(@"Start Load Program");
    AppDelegate *myDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    hud = [[MBProgressHUD alloc] initWithView:myDelegate.window];
    [myDelegate.window addSubview:hud];
    hud.labelText = @"Loading...";
    hud.detailsLabelText = @"Loading Data";
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        //Do stuff here to load data from files

        //Update From online files
        hud.detailsLabelText = @"Updating Live Data";
        resultLock = NO;
        progressLock = NO;
        recallLock = NO;
        stageLock = NO;

        condition = [[NSCondition alloc] init];
        [condition lock];

        [self updateCurrentCompsText];
        [self updateCompetitionResults];
        [self updateCompetitionRecalls];
        [self updateCompetitionProgress];

        while (!resultLock) {
            [condition wait];
        }
        NSLog(@"Unlock");
        while (!stageLock) {
            [condition wait];
        }
        NSLog(@"Unlock");
        while (!recallLock) {
            [condition wait];
        }
        NSLog(@"Unlock");
        while (!progressLock) {
            [condition wait];
        }
        NSLog(@"Unlock");
        [condition unlock];
        updateInProgress = NO;
        //Reset Refresh controls and table views
        self.refreshControlsArray = [[NSMutableArray alloc] init];
        self.tableViewsArray = [[NSMutableArray alloc] init];
        NSLog(@"Finished Loading Program");
        [[NSNotificationCenter defaultCenter] postNotificationName:@"WMSOFinishedLoadingProgramData" object:nil]; //Pushes view controller
        dispatch_async(dispatch_get_main_queue(), ^{
            [MBProgressHUD hideHUDForView:myDelegate.window animated:YES];
        });
    });
} 
```

刷新数据时：

```
- (void)updateProgramContent
{
    if (!updateInProgress) {
        updateInProgress = YES;
        for (int i = 0; i < self.refreshControlsArray.count; i++) {
            if (!((UIRefreshControl *)self.refreshControlsArray[i]).refreshing) {
                [self.refreshControlsArray[i] beginRefreshing];
                [self.tableViewsArray[i] setContentOffset:CGPointMake(0.0, 0.0) animated:YES];
            }
        }

        resultLock = NO;
        stageLock = NO;
        recallLock = NO;
        progressLock = NO;
        dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

            condition = [[NSCondition alloc] init];
            [condition lock];

            [self updateCompetitionProgress];
            [self updateCompetitionRecalls];
            [self updateCompetitionResults];
            [self updateCurrentCompsText];

            while (!resultLock) {
                [condition wait];
            }
            NSLog(@"Unlock");
            while (!stageLock) {
                [condition wait];
            }
            NSLog(@"Unlock");
            while (!recallLock) {
                [condition wait];
            }
            NSLog(@"Unlock");
            while (!progressLock) {
                [condition wait];
            }
            NSLog(@"Unlock");
            [condition unlock];
        });

        for (int i = 0; i < self.refreshControlsArray.count; i++) {
            [self.refreshControlsArray[i] performSelector:@selector(endRefreshing) withObject:nil afterDelay:1.0];
            [self.tableViewsArray[i] performSelector:@selector(reloadData) withObject:nil afterDelay:1.0];
        }
        updateInProgress = NO;
    }
} 
```

上面每个加载方法中出现的下面的块对应于将下载和更新特定数据的方法。

```
[self updateCompetitionProgress];
[self updateCompetitionRecalls];
[self updateCompetitionResults];
[self updateCurrentCompsText]; 
```

运行：

```
- (void)updateCompetitionResults
{
    __block NSDictionary *competitionResultsData = nil;
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"Some URL",[self.programName stringByReplacingOccurrencesOfString:@" " withString:@"%20"]]] cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:20.0];
    AFPropertyListRequestOperation *operation = [AFPropertyListRequestOperation propertyListRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id propertyList) {
        competitionResultsData = (NSDictionary *)propertyList;
        [competitionResultsData writeToFile:[@"SOME LOCAL PATH"] atomically:NO];
        [self updateCompetitionResultsWithDictionary:competitionResultsData];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id propertyList) {
        competitionResultsData = [NSDictionary dictionaryWithContentsOfFile:[@"SOME LOCAL PATH"]];
        NSLog(@"Failed to retreive competition results: %@", error);
        [self updateCompetitionResultsWithDictionary:competitionResultsData];
    }];
    [operation start];
} 
```

并且完成和失败块调用相同的方法来更新数据

```
- (void)updateCompetitionResultsWithDictionary:(NSDictionary *)competitionResultsData
{
    //Do Stuff with the data here
    resultLock = YES;
    [condition signal];
} 
```

那么，为什么这在第一次运行时有效，但在任何后续运行中都无效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T21:15:34.213

正如我在上面的评论中提到的，最明显的问题是您正在调用`condition`在初始化之前使用的方法`condition`。`condition`确保在开始调用之前进行初始化`updateCompetitionResults`等。

* * *

就更彻底的改变而言，我可能会建议`NSCondition`完全退休，并使用操作队列：

1.  我可能会使用[`NSOperationQueue`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)（或者如果你愿意，你也可以使用调度组，但我喜欢操作队列配置你可以操作多少并发操作的能力......如果你到了想要取消操作的地步，我认为`NSOperationQueue`那里也提供了一些不错的功能）。然后，您可以将每个下载和处理定义为单独的[`NSOperation`](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSOperation_class/Reference/Reference.html)（每个下载应该同步发生，因为它们在操作队列中运行，您可以获得异步操作的好处，但是您可以在完成后立即启动后处理下载完成）。然后，您只需将它们排队以异步运行，但定义一个依赖于其他四个的最终操作将在四个下载完成后立即启动。（顺便说一句，我用[`NSBlockOperation`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSBlockOperation_class/Reference/Reference.html)它为对象提供了块功能`NSOperation`，但您可以按照自己的方式进行操作。）

2.  虽然您`updateProgramContent`可能会异步下载，但它会依次处理四个下载的文件，一个接一个。因此，如果第一次下载需要一段时间才能下载，它将阻碍其他人的后期处理。相反，我喜欢将四个 plist 文件中每一个的下载和后处理都封装在一个`NSOperation`. 因此，我们不仅享受下载的最大并发性，还享受后处理的最大并发性。

3.  而不是使用`AFNetworking`（我通常非常喜欢）与 plist 相关的方法，我可能更倾向于使用允许您从 web 下载 plist 并将它们加载到适当结构中的功能`NSDictionary`。`NSArray`这些`dictionaryWithContentsOfURL`并`arrayWithContentsOfURL`同步运行，但因为我们在后台操作中执行此操作，所以一切都按照您的意愿异步运行。这也绕过了将它们保存到文件中。如果您希望将它们保存到目录中的文件中`Documents`，您也可以轻松地做到这一点。显然，如果您在下载 plist 文件时正在做一些复杂的事情（例如，您的服务器正在进行一些质询-响应身份验证），您就不能使用方便的方法`NSDictionary`和`NSArray`方法。但是，如果您不需要所有这些，那么简单`NSDictionary`和`NSArray`方法，`___WithContentsOfURL`让生活变得很简单。

把这一切放在一起，它可能看起来像：

```
@interface ViewController ()

@property (nonatomic, strong) NSArray *competitions;
@property (nonatomic, strong) NSDictionary *competitionResults;
@property (nonatomic, strong) NSDictionary *competitionRecalls;
@property (nonatomic, strong) NSDictionary *competitionProgress;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self transfer];
}

- (void)allTransfersComplete
{
    BOOL success;

    if (self.competitions == nil)
    {
        success = FALSE;
        NSLog(@"Unable to download competitions");
    }

    if (self.competitionResults == nil)
    {
        success = FALSE;
        NSLog(@"Unable to download results");
    }

    if (self.competitionRecalls == nil)
    {
        success = FALSE;
        NSLog(@"Unable to download recalls");
    }

    if (self.competitionProgress == nil)
    {
        success = FALSE;
        NSLog(@"Unable to download progress");
    }

    if (success)
    {
        NSLog(@"all done successfully");
    }
    else
    {
        NSLog(@"one or more failed");
    }
}

- (void)transfer
{
    NSURL *baseUrl = [NSURL URLWithString:@"http://insert.your.base.url.here/competitions"];
    NSURL *competitionsUrl = [baseUrl URLByAppendingPathComponent:@"competitions.plist"];
    NSURL *competitionResultsUrl = [baseUrl URLByAppendingPathComponent:@"competitionresults.plist"];
    NSURL *competitionRecallsUrl = [baseUrl URLByAppendingPathComponent:@"competitionrecalls.plist"];
    NSURL *competitionProgressUrl = [baseUrl URLByAppendingPathComponent:@"competitionprogress.plist"];

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    queue.maxConcurrentOperationCount = 4; // if your server doesn't like four concurrent requests, you can ratchet this back to whatever you want

    // create operation that will be called when we're all done

    NSBlockOperation *completionOperation = [NSBlockOperation blockOperationWithBlock:^{

        // any stuff that can be done in background should be done here

        [[NSOperationQueue mainQueue] addOperationWithBlock:^{

            // any user interface stuff should be done here; I've just put this in a separate method so this method doesn't get too unwieldy

            [self allTransfersComplete];
        }];
    }];

    // a variable that we'll use as we create our four download/process operations

    NSBlockOperation *operation;

    // create competitions operation

    operation = [NSBlockOperation blockOperationWithBlock:^{

        // download the competitions and load it into the ivar
        //
        // note, if you *really* want to download this to a file, you can 
        // do that when the download is done

        self.competitions = [NSArray arrayWithContentsOfURL:competitionsUrl];

        // if you wanted to do any post-processing of the download
        // you could do it here.            
        NSLog(@"competitions = %@", self.competitions);
    }];
    [completionOperation addDependency:operation];

    // create results operation

    operation = [NSBlockOperation blockOperationWithBlock:^{

        self.competitionResults = [NSDictionary dictionaryWithContentsOfURL:competitionResultsUrl];

        NSLog(@"competitionResults = %@", self.competitionResults);
    }];
    [completionOperation addDependency:operation];

    // create recalls operation

    operation = [NSBlockOperation blockOperationWithBlock:^{

        self.competitionRecalls = [NSDictionary dictionaryWithContentsOfURL:competitionRecallsUrl];

        NSLog(@"competitionRecalls = %@", self.competitionRecalls);
    }];
    [completionOperation addDependency:operation];

    // create progress operation

    operation = [NSBlockOperation blockOperationWithBlock:^{

        self.competitionProgress = [NSDictionary dictionaryWithContentsOfURL:competitionProgressUrl];

        NSLog(@"competitionProgress = %@", self.competitionProgress);
    }];
    [completionOperation addDependency:operation];

    // queue the completion operation (which is dependent upon the other four)

    [queue addOperation:completionOperation];

    // now queue the four download and processing operations

    [queue addOperations:completionOperation.dependencies waitUntilFinished:NO];
}

@end 
```

现在，我不知道您的 plist 中哪些是数组，哪些是字典（在我的示例中，我将比赛设置为数组，其余的是由比赛 ID 键入的字典），但希望您了解我在拍摄什么为了。最大化并发，消除`NSCondition`逻辑，真正充分利用`NSOperationQueue`，等等。

这可能需要考虑很多，但我只提到它作为`NSCondition`. 如果您当前的技术有效，那就太好了。但以上概述了我将如何应对这样的挑战。

# google-maps - 如何检查谷歌地图是否已经加载

> ID：14013948
> 
> 赞同：0
> 
> 时间：2012-12-23T19:17:04.643
> 
> 标签：google-maps, load, loaded

我正在一个项目中为手机提供地图。现在我正在尝试使用 iPhone。

它工作正常，当我加载我的第一页时，我可以看到一张包含我的位置的地图，市场每 10 秒刷新一次并移动到我的下一个位置。

有时当我切换页面并返回第一页时，地图没有完全显示。如果我移动地图，它会移动，但地图的某些图像仍未显示。

我也在使用 jquery mobe。

我还注意到，每次返回第一张地图时，都会重新加载地图。

有没有办法加载一次地图？那么如何检查我的地图是否已加载？

这是我的代码

```
$('#home').live('pagebeforeshow', function(e){

    // Resize #mapHome (#mapHome = Sreen hight - footer - header)
    $('#mapHome').css('height', Resize.content()-2 +'px');

        // extract les id des modules existants
        navigator.geolocation.getCurrentPosition(function(position){

            showMap('mapHome',position.coords.latitude, position.coords.longitude);
            //console.log(position.coords.latitude, position.coords.longitude);

        }, 
        function(){
            //error
        }, 
        {

                enableHighAccuracy  : true,
                maximumAge          : 30000
                //maximumAge:Infinity
        });

        // Place and move the marker regarding to my position and deplacement
        var track_id = "me";
        Tracking.watch_id = navigator.geolocation.watchPosition(
        // Success
        function(position){
            console.log('WatchPosition called');
            var lat = position.coords.latitude;
            var long = position.coords.longitude;

            var latLng = new Array();
            latLng[0] = lat;
            latLng[1] = long;

            //Tracking.myCoordinates.push(lat,long);
            Tracking.myCoordinates.push(latLng);
            addMarker(lat, long);

        },
        // Error
        showError,
        { 
            frequency: 1000

        });

}) 
```

我刚把那条线改成

```
$('#home').live('pageshow', function(e){... code...} 
```

它会变得更好，但我不确定-

这是我的函数 showMap() 的代码

```
function showMap(canvas,lat,long){
            var latLng = new google.maps.LatLng(lat,long);
            // Google Map options       var myOptions = {
          zoom: 19,
          //zoomControl : 1,
          center: latLng,
          mapTypeId: google.maps.MapTypeId.ROADMAP////ROADMAP, SATELLITE, HYBRID and TERRAIN        };      

        // Create the Google Map, set options       Tracking.mapy = new google.maps.Map(document.getElementById(canvas), myOptions);

} 
```

这是代码 addMarker()

```
function addMarker(lat, long){

        Tracking.mapBounds = new google.maps.LatLngBounds();

        // Clean previous markers
        for (var i = 0; i < Tracking.markers.length; i++ ) {
            Tracking.markers[i].setMap(null);       
        }         

        // Add the owner's marker
        var latitudeAndLongitude = new google.maps.LatLng(lat, long);
        var image = "img/iconGoogleMap/phones.png";
        marker = new google.maps.Marker({
            title   : 'me',
            //animation: google.maps.Animation.DROP, //BOUNCE
            position: latitudeAndLongitude,
            map     : Tracking.mapy,
            icon : image
        });
        Tracking.markers.push(marker);
        //Tracking.markers.push(marker);
        //console.log(localStorage.getItem('mapToDisplay'));

        /*  ADDING MODULES MAKERS */
        // Store the ID of available module.
        modulesJSON = Modules.get('bipme');

        for (var i = 0; i < modulesJSON['modules'].length; i++) {

            console.log('module id = ' +modulesJSON['modules'][i].id);
            console.log('Module ' + modulesJSON['modules'][i].id + ' position : ' + ModulesPos.module(modulesJSON['modules'][i].id));

            nlatLong = ModulesPos.module(modulesJSON['modules'][i].id).split(",");
            var LatitudeAndLongitudeModules = new google.maps.LatLng(nlatLong[0],nlatLong[1]);
            var image = "img/iconGoogleMap/" + modulesJSON['modules'][i].profile + "-" + modulesJSON['modules'][i].iconColor + ".png";

            marker = new google.maps.Marker({
            title   : modulesJSON['modules'][i].pseudo,
            //animation: google.maps.Animation.DROP, //BOUNCE
            position: LatitudeAndLongitudeModules,
            map     : Tracking.mapy,
            icon : image
            });

            Tracking.mapBounds.extend(LatitudeAndLongitudeModules);
            Tracking.markers.push(marker);

        }; 
```

顺便说一句，有没有办法创建一个按钮，我可以从中手动刷新地图？

# java - Java 游戏流畅的 fps 极高

> ID：14013955
> 
> 赞同：2
> 
> 时间：2012-12-23T19:17:37.140
> 
> 标签：java, frame-rate, slick2d

我正在使用 Slick 在 Java 中创建游戏，但是当我将它作为小程序上传并在我的 www 上运行时出现问题。FPS 非常高，即使我在代码中对其进行了一些限制。

```
MainWindow.setTargetFrameRate(60); 
```

当我在笔记本电脑上运行游戏时，它运行良好，最大 fps 为 60，但在我的网站上，它在 800-1000 之间，这简直太疯狂了。我在 chrome 和 firefox 上测试过，都失败了。

任何人 ？

# jquery - 将 :hover 选择器添加到类 1 时将鼠标悬停在类 2 上

> ID：14013958
> 
> 赞同：2
> 
> 时间：2012-12-23T19:17:59.187
> 
> 标签：jquery, hover, selector

当悬停在不同的 div 上时，我正在尝试将 :hover 选择器添加到类中。基本上有2个div形成一个按钮。顶部是悬停时改变颜色的部分，底部是简单的图像。目前，悬停只适用于顶部，但我希望在悬停在图像上时也能调用 :hover 选择器。

基本上它不是一个按钮，而是两个按钮。

这就是我所拥有的，但显然这不起作用。

```
$(".module-feature-img").hover(function(){
   $(".module-title-bottom").attr('class', '.module-title-bottom:hover') 
}); 
```

此外，我注意到在我将鼠标移开后它会一直卡住。

帮助将不胜感激

* * *

编辑

运作网站：www.exo-l.com

这是关于底部的按钮

我也意识到这不会真正起作用，因为有 4 个按钮并且它们都具有相同的类。所以如果我将鼠标悬停在 1 个图像上，它们都会得到 :hover 选择器。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:20:58.420

你可以使用这个：http: [//jsfiddle.net/ZTU5v/](http://jsfiddle.net/ZTU5v/)

```
$(".module-feature-img").hover(function(){
  $(".module-title-bottom").addClass('hover');
}, function(){
  $(".module-title-bottom").removeClass('hover');
});​ 
```

添加回调函数以删除该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:20:50.590

```
$(".module-feature-img").hover(function(){
   $(".module-title-bottom").trigger('hover'); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T19:21:11.747

我会添加一个类并对其应用与您的 CSS 中`.hover`相同的规则。`:hover`

# c# - 如何在 WPF 中创建自适应布局？

> ID：14013959
> 
> 赞同：11
> 
> 时间：2012-12-23T19:18:03.243
> 
> 标签：c#, .net, wpf, layout

可以使用媒体查询将网站设计为适应较小的屏幕尺寸。例如，宽屏幕上的三列，低分辨率手机上的一列。

WPF 是否有类似的技术来根据可用的屏幕空间或父控件大小调整布局？

例如，我想在大屏幕上水平显示 3 列，但在小屏幕上垂直显示。理想情况下，我想制定这样的布局：“如果此控件的宽度小于 400 磅，请以这种方式重新排列这些控件。”

如何在 WPF 中创建这样的自适应设计？也就是说，为特定父控件大小的控件定义不同的布局？

理想情况下，控件应该重新排列而不是复制或重新创建，以避免非常慢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-27T17:54:21.097

The easiest way to do this is with [`DataTriggers`](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx) and a [`Converter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx) to test if the bound value is greater or less than a parameter.

This will allow you to easily adjust the style setters based on a bound value. For example, you could use

```
<Style x:Key="MyControlStyle">
    <!-- Default Values -->
    <Setter Property="Grid.Row" Value="0" />
    <Setter Property="Grid.Column" Value="0" />
    <Style.Triggers>
        <DataTrigger Value="True" 
                     Binding="{Binding ActualHeight, ElementName=MyWindow, 
                         Converter={StaticResource IsValueLessThanParameter}, 
                         ConverterParameter=400}">
            <!-- Values to use when Trigger condition is met -->
            <Setter Property="Grid.Row" Value="1" />
            <Setter Property="Grid.Column" Value="1" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

In the case where you have a more complex layout with many pieces that change based on some triggered value, you can replace entire Templates with your trigger instead of just individual properties

```
<Style x:Key="MyContentControlStyle" TargetType="{x:Type ContentControl}">
    <Setter Property="ContentTemplate" Value="{StaticResource BigTemplate}" />
    <Style.Triggers>
        <DataTrigger Value="True" 
                     Binding="{Binding ActualHeight, ElementName=MyWindow, 
                         Converter={StaticResource IsValueLessThanParameter}, 
                         ConverterParameter=400}">
            <Setter Property="ContentTemplate" Value="{StaticResource LittleTemplate}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

I believe you can also bind to the [`SystemParameters`](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.aspx) object to use additional information about the application in your bindings, although I can't remember the exact syntax for it right now.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-07T10:02:44.823

如果您使用的是 WPF 的 UWP 风格，那么您可以使用[`AdaptiveTrigger`](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.adaptivetrigger.aspx?f=255&MSPPError=-2147217396)：

```
<AdaptiveTrigger MinWindowWidth="720" MinWindowHeight="900" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T19:21:31.043

我知道做这样的事情的唯一方法是在代码中，你需要创建一个自定义布局。最简单的方法是创建一个继承自 Panel 的新类，并实现 MeasureOverride 和 ArrangeOverride。我以前做过自定义布局，但最终要为所有情况工作会带来相当大的痛苦。如果你用谷歌搜索“wpf 自定义布局”，你会得到一些很好的例子。鉴于您想要的所有功能，您肯定会为您完成工作。您可能需要查看附加属性以了解如何在 xaml 中添加注释，以便让您的代码了解不同大小应包含的内容。

# android - ActionBarSherlock 和 GoogleLicenseCheck

> ID：14013961
> 
> 赞同：0
> 
> 时间：2012-12-23T19:18:41.230
> 
> 标签：android, themes, actionbarsherlock, extend

我想让我的应用程序改头换面以​​使用 Holo-Theme，即使对于旧设备（SDK 8 及更高版本）也是如此。所以我尝试将库“ActionBarSherlock”和“HoloEverywhere”添加到我的应用程序中。

我现在的问题是我必须将我的课程扩展到“SherlockActivity”而不是“Activity”。但我也在使用谷歌许可。所以我已经将我的课程扩展到“LicenseCheckActivity”。我不能延长两次。

那么我应该怎么做才能同时使用（GoogleLicensing 和 SherlockActivity）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:37:23.413

SDK 上确实没有 LicenseCheckActivity 类，所以我的假设是您（或您团队中的某个人）正在使用该 LicenseCheckActivity 来根据[文档](http://developer.android.com/google/play/licensing/adding-licensing.html)包装所有许可证检查代码。

如果是这种情况，您需要做的就是打开您的 LicenseCheckActivity 并使该活动从而`SherlockActivity`不是仅扩展`Activity`，然后您将能够利用 ActionBarSherlock，同时仍保留您的许可证检查代码。

# android - Android 相对布局未正确显示图像

> ID：14013964
> 
> 赞同：0
> 
> 时间：2012-12-23T19:19:16.907
> 
> 标签：android, android-layout, android-relativelayout

我创建了 android 相对布局，其中，我试图在活动的四个侧面显示四个图像，顶部栏和背景图像。

顶栏和背景图像正确显示。但是，在 Nexus 模拟器中仅显示 4 张图像，其余 2 张图像在模拟器中不可见，我已将图像左对齐，右对齐，左对齐，右对齐另一行。

模拟器中央只显示左侧图像，两个右侧图像均不可见。

如何在显示器上以相等的空间显示所有图像。我的布局如下所示

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:background="@drawable/background"
        android:gravity="center_horizontal"
        android:orientation="vertical"
        tools:context=".MainActivity" >

        <ImageView
            android:id="@+id/topbannerimg"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="false"
            android:layout_alignParentTop="true"
            android:background="@drawable/topbanner"
            android:contentDescription="@string/topbar"
            android:src="@drawable/mtnlogotext" />

        <ImageView
            android:id="@+id/csrimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/topbannerimg"
            android:contentDescription="@string/csrstr"
            android:src="@drawable/customerservice" />

        <ImageView
            android:id="@+id/virtualstoreimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/topbannerimg"
            android:contentDescription="@string/virstr"
            android:src="@drawable/virtualstore" />

        <ImageView
            android:id="@+id/mtnstorelocatorimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/csrimg"
            android:contentDescription="@string/storestr"
            android:src="@drawable/storelocater" />

        <ImageView
            android:id="@+id/mtnviewimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/virtualstoreimg"
            android:layout_toRightOf="@+id/mtnstorelocatorimg"
            android:contentDescription="@string/viewstr"
            android:src="@drawable/mtnview" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:02:49.513

```
I have used android:layout_width="145dp" and  android:layout_height="100dp" in the images, now the layout is appearing correctly, with images placed in correct rows and columns

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:gravity="center_horizontal"
    android:orientation="vertical"
    android:padding="10dp"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/topbannerimg"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="false"
        android:layout_alignParentTop="true"
        android:background="@drawable/topbanner"
        android:contentDescription="@string/topbar"
        android:src="@drawable/mtnlogotext" />

    <ImageView
        android:id="@+id/csrimg"
        android:layout_width="145dp"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/topbannerimg"
        android:contentDescription="@string/csrstr"
        android:src="@drawable/customerservice" />

    <ImageView
        android:id="@+id/virtualstoreimg"
        android:layout_width="145dp"
        android:layout_height="100dp"
        android:layout_below="@+id/topbannerimg"
        android:layout_alignParentLeft="false"
        android:layout_toRightOf="@+id/csrimg"
        android:contentDescription="@string/virstr"
        android:src="@drawable/virtualstore" />

    <ImageView
        android:id="@+id/mtnstorelocatorimg"
        android:layout_width="145dp"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/csrimg"
        android:contentDescription="@string/storestr"
        android:src="@drawable/storelocater" />

    <ImageView
        android:id="@+id/mtnviewimg"
        android:layout_width="145dp"
        android:layout_height="100dp"
        android:layout_below="@+id/virtualstoreimg"
        android:layout_toRightOf="@+id/mtnstorelocatorimg"
        android:contentDescription="@string/viewstr"
        android:src="@drawable/mtnview" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:36:39.767

我修改了您的代码，只是将图标图像替换为您的实际图像。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="#ff4455"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/topbannerimg"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="false"
        android:layout_alignParentTop="true"
        android:background="#222222"
        android:contentDescription="@string/topbar"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/csrimg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/topbannerimg"
        android:contentDescription="@string/csrstr"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/virtualstoreimg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/topbannerimg"
        android:contentDescription="@string/virstr"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/mtnstorelocatorimg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:contentDescription="@string/storestr"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/mtnviewimg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
        android:contentDescription="@string/viewstr"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/09f7cb89f09878c8a72f314010ce06fd.png)

我不确定布局设计，所以请上传您想要的布局图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:01:51.213

我认为您正在尝试将五个图像中的一个保留在顶部，然后保留 2 行，每行有 2 个图像。

我稍微修改了你的代码。试试看。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/topbannerimg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:background="@drawable/topbanner"
        android:contentDescription="@string/topbar"
        android:src="@drawable/mtnlogotext" />

    <RelativeLayout
        android:id="@+id/row1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/topbannerimg" >

        <ImageView
            android:id="@+id/csrimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:contentDescription="@string/csrstr"
            android:src="@drawable/customerservice" />

        <ImageView
            android:id="@+id/virtualstoreimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/csrimg"
            android:contentDescription="@string/virstr"
            android:src="@drawable/virtualstore" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/row2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/row1" >

        <ImageView
            android:id="@+id/mtnstorelocatorimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/csrimg"
            android:contentDescription="@string/storestr"
            android:src="@drawable/storelocater" />

        <ImageView
            android:id="@+id/mtnviewimg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/virtualstoreimg"
            android:layout_toRightOf="@id/mtnstorelocatorimg"
            android:contentDescription="@string/viewstr"
            android:src="@drawable/mtnview" />
    </RelativeLayout>

</RelativeLayout> 
```

# python - 当stderr指向多线程无堆栈python脚本上的文件时输出丢失

> ID：14013970
> 
> 赞同：1
> 
> 时间：2012-12-23T19:20:21.817
> 
> 标签：python, pipe, stderr, python-stackless

考虑以下四行（全部相同），它们从日志文件中产生相同数量的行：

```
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>&1 | wc -l
620
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>&1 | wc -l
620
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>&1 | wc -l
620
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>&1 | wc -l
620 
```

现在，考虑完全相同的行，除了不计算来自 stderr 的行，我们计算从 stderr 读取的文件的行：

```
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>test.txt ; wc -l test.txt
612 test.txt
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>test.txt ; wc -l test.txt
617 test.txt 
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>test.txt ; wc -l test.txt
619 test.txt
$ zcat test-catalog.xml.gz | bin/process-catalog.py -b build -T 4 - 2>test.txt ; wc -l test.txt
617 test.txt 
```

请注意，当我将 stderr 发送到文件时，行数会有所不同。

-T 选项指定无堆栈 python 脚本正在使用的线程数，当我将其设置为一个线程时，我会得到一致的结果。因此，这似乎与可以写入最后一位输出之前完成的某些事情有关。尽管如此，我观察到该脚本实际上每次都完成了它的任务（尽管没有完全记录它）。

我很困惑为什么日志输出会根据我发送标准错误的位置而有所不同。我也很困惑为什么线程数也会影响这一点，尽管脚本完成了它的任务（所以它不会过早结束）。

如果有人能帮助我理解这里发生的事情，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:12:28.593

切换到记录到文件，它现在可以工作了。问题解决了。还是有点好奇为什么。

# ruby - Ruby gsub '<' 和 '>'

> ID：14013971
> 
> 赞同：0
> 
> 时间：2012-12-23T19:20:31.663
> 
> 标签：ruby, regex

说我有这个文本：

```
foo
{% highlight ruby %}
bar < >
{% endhighlight %} 
```

如何替换`<`and `>`with `&lt;`and `&gt;`inside `{% highlight ruby %}...{% endhighlight %}`？我也`{% highlight ruby %}...{% endhighlight %}`用`<pre><code class="language-ruby">...</code></pre>`这个代替：

```
str.gsub(/\{% highlight (\w*) %\}(.*)\{% endhighlight %\}/m, '<pre><code class="language-\1">\2</code></pre>') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T22:37:19.810

为什么要重新发明轮子？您不是第一个想要创建自己的标记语言的人，但是那里有一些非常棒的语言。我个人喜欢[Markdown](http://daringfireball.net/projects/markdown/syntax)，它有一个很棒的 ruby​​ 实现，叫做[RedCarpet](https://github.com/vmg/redcarpet)，来自 Github 的人们。您可以使用此 gem 轻松解析文本。这是一些示例代码：

```
require 'redcarpet'

input = <<-EOF
foo

    bar < >
EOF

Redcarpet::Markdown.new(Redcarpet::Render::HTML).render(input)
#=> <p>foo</p>
#=>
#=> <pre><code>bar &lt; &gt;
#=> </code></pre> 
```

您可能已经注意到，Stack Overflow 使用 Markdown 进行用户输入，所以我现在实际上正在用 Markdown 写我的答案 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T21:22:22.953

使用 gsub 并且没有外部库，这将起作用：

```
str.gsub(/</, "&lt;").gsub(/>/, "&gt;") 
```

或仅匹配您的`{%...%}`标记之外：

```
str.gsub(/(?<=%}|\A)(.+?)(?={%|\z)/) do |n|
  n.gsub(/</, "&lt;").gsub(/>/, "&gt;")
end 
```

上面较长的正则表达式使用lookbehind 和lookahead 断言（`(?<=%}|\A)`和`(?={%|\z)`）只查找括号外的子字符串。

但是，最好的方法可能仍然是使用 HTMLEntities gem，因为它总是会更清楚你在做什么。

```
require 'htmlentities'
HTMLEntities.new.encode(str) 
```

或者

```
str.gsub(/(?<=%}|\A)(.+?)(?={%|\z)/) do |n|
  HTMLEntities.new.encode(n)
end 
```

# android - 从微调器中选择的选项未显示在 TextView 中

> ID：14013973
> 
> 赞同：0
> 
> 时间：2012-12-23T19:20:37.737
> 
> 标签：android, android-widget, android-spinner

我希望我选择的微调器选项显示在同一活动的 TextView 中。单击微调器时，多个选项确实会下降，但在选择时没有任何反应；TextView 保持不变。

代码：

```
package com.kk.project;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class Addproject extends Activity implements OnItemSelectedListener {

int mPos;
String mSelection;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_addproject);

    Spinner spinner = (Spinner) findViewById(R.id.difficultyspinner); ArrayAdapter<CharSequence> 
    adapter = ArrayAdapter.createFromResource(this,R.array.difficultyarray, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_addproject, menu);
    return true;
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    // TODO Auto-generated method stub

    Addproject.this.mPos = pos;
    Addproject.this.mSelection = parent.getItemAtPosition(pos).toString();

    TextView spinnerresult = (TextView)findViewById(R.id.spinnertxt);
    spinnerresult.setText(Addproject.this.mSelection);

    Spinner spinner = (Spinner)findViewById(R.id.spinnertxt);
    spinner.setOnItemSelectedListener(this);

}

@Override
public void onNothingSelected(AdapterView<?> parent) {
    // TODO Auto-generated method stub

    //NOTHING  

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:24:37.617

尝试添加

```
spinner.setOnItemSelectedListener(this); 
```

在你的`onCreate()`这一行之后：

```
 spinner.setAdapter(adapter); 
```

在`onCreate()`中，您已经制作了您的微调器，但没有给它一个监听器。

这意味着

```
Spinner spinner = (Spinner)findViewById(R.id.spinnertxt);
spinner.setOnItemSelectedListener(this); 
```

不应该在`onItemSelected()`

# r - R中的分层抽样

> ID：14013977
> 
> 赞同：-1
> 
> 时间：2012-12-23T19:21:07.080
> 
> 标签：r, sampling

抱歉，我是这个程序的新手。我有一些问题，正如标题的意思，因为 R 给了我以下错误，在第 5 层没有足够的观察。我必须对坎帕尼亚（意大利）的五个省进行分层抽样，我有这样的数据：

```
dati1$Rip <- matrix(dati1$A3.factor, nrow=N, ncol=1)
dati1$A3.factor <- factor(dati1$A3, labels=c("Av","Bn","Ce","Na","Sa"))
dati1$A3.factor
[1] Sa Bn Sa Sa Sa Sa Sa Sa Sa Sa Sa Sa Av Sa Sa Bn Bn Bn Sa Bn Bn Bn Bn Bn Bn
[26] Bn Sa Bn Sa Bn Sa Bn Bn Na Av Bn Bn Av Sa Bn Bn Bn Sa Bn Bn Sa Sa Bn Bn Bn
[51] Av Bn Bn Bn Bn Sa Bn Sa Bn Bn Bn Sa Sa Na Sa Av Sa Bn Bn Bn Sa Sa Bn Sa Sa
[76] Sa Sa Na Bn Bn Bn Av Av Bn Bn Bn Bn Bn Bn Bn Bn Na Bn Bn Sa Bn Ce Na Ce Sa
Levels: Av Bn Ce Na Sa 
```

问题是当我这样做时

```
 library(sampling)
    N <- dim(dati1)[1]
    N
    a <- 0.05
    z_a <- qnorm(1-a/2)  
    error <- 0.20
    Vo <- error^2/z_a^2
    Vo  
    n <- ((Vo/p*(1-p)) + (1/N))^(-1)
    n <- round(n)
    n
    ripartizione <- factor(dati1$A3, labels=c("Av","Bn","Ce","Na","Sa"))
    Nh <- table(ripartizione)
    Nh
    f <- (n/N)*Nh 
    f
    nh <-round(f)
    nh 
```

所以 nh 是

```
 Av Bn Ce Na Sa 
    3 25  1  2 17 
```

从 N 个：

```
 Av Bn Ce Na Sa 
    7 51  2  5 35 
```

为什么当我发出命令时：

```
 sample.strata <- strata(dati1,c("Rip"), size=c(3,25,1,2,17), "srswor", TRUE)
        sample.strata 
```

R 说

```
 error in strata(dati1, c("Rip"), size = c(3, 25, 1, 2, 17), "srswor",  : 
          not enough obervations in the stratum 5 
```

我必须做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T20:26:51.867

该`help(strata)`页面告诉您对 data.frame 进行排序。所以这成功了：

```
sample.strata <- strata(dati1[order(dati1$Rip),],c("Rip"), 
                               size=c(3,25,1,2,17), "srswor", TRUE) 
```

将其设为矩阵当然会将一个因素转化为其数字基础，因此，如果您希望拥有有意义的标签，那么您已经通过使用矩阵格式“打了自己的脚”。

```
> table(sample.strata$Stratum)

 1  2  3  4  5 
 3 25  1  2 17 
```

# php - 尝试剥离字符：/ 和 \

> ID：14013979
> 
> 赞同：0
> 
> 时间：2012-12-23T19:21:11.777
> 
> 标签：php

我在尝试剥离 / 和 \ 字符时遇到问题。当我尝试使用 \\ 剥离时，它会剥离 \ 但当我尝试 /// 时，它根本不会剥离 /。

```
function stripinname( $text )
{
$text = preg_replace(
    array(
        '/\|/','/\"/','/\</','/\>/','/\s[\s]+/','/^[\-]+/','/[\-]+$/','/\%/','/\\\\/','/\////','/\@/','/\&/','/\:/','/\;/','/\-/',
        '@<head[^>]*?>.*?</head>@siu',
        '@<style[^>]*?>.*?</style>@siu',
        '@<script[^>]*?.*?</script>@siu',
        '@<object[^>]*?.*?</object>@siu',
        '@<embed[^>]*?.*?</embed>@siu',
        '@<applet[^>]*?.*?</applet>@siu',
        '@<noframes[^>]*?.*?</noframes>@siu',
        '@<noscript[^>]*?.*?</noscript>@siu',
        '@<noembed[^>]*?.*?</noembed>@siu',
      // Add line breaks before and after blocks
        '@</?((address)|(blockquote)|(center)|(del))@iu',
        '@</?((div)|(h[1-9])|(ins)|(isindex)|(p)|(pre))@iu',
        '@</?((dir)|(dl)|(dt)|(dd)|(li)|(menu)|(ol)|(ul))@iu',
        '@</?((table)|(th)|(td)|(caption))@iu',
        '@</?((form)|(button)|(fieldset)|(legend)|(input))@iu',
        '@</?((label)|(select)|(optgroup)|(option)|(textarea))@iu',
        '@</?((frameset)|(frame)|(iframe))@iu',
    ),
    array(
        ' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',"$0", "$0", "$0", "$0", "$0", "$0","$0", "$0",), $text );

// you can exclude some html tags here, in this case B and A tags        
return strip_tags($text);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:28:50.577

# 不要这样做。

您知道 MSIE 支持使用 CSS 从 CSS 加载 javascript`behavior:url()`吗？你知道我们可以在标签中执行`javascript:`url吗？`<img>`

使用别人的 HTML sanitizer；[HTML Purifier](http://htmlpurifier.org/)很好——它有很多用户，只要有人在其中发现错误，它就会得到修复，并且*每个*使用它的人都会受益。

*而您代码中的任何错误（例如我现在正在查看的错误）只有在您*找到它时才会被修复。

我会想办法进去的。

我经常做。

### 编辑：

您的代码不起作用的原因是您不理解它。在这样的领域不了解您的程序*是*与安全相关的问题的来源。既然你决定我只是“像个大人物一样发帖”，你就忽略了我的建议。通过这样做，您对整个软件开发人员/工程师行业造成了伤害：

1.  你不懂正则表达式；`,/,`匹配斜线。
2.  您不了解 PHP`preg_replace()`实际如何匹配正则表达式：要匹配所有斜杠，您需要全局匹配它们，如`,/,g`
3.  您不明白`/`将合法地出现在 HTML 标记中。通过按照您的方式替换它，我实际上可以*创建*您尝试删除的 HTML 标记。
4.  你认为`strip_tags()`做它在锡上说的。它没有。
5.  你算错了你的论点。你认为你正在分裂的一些东西只是被它们自己取代了。
6.  你不是在检查错误。`preg_replace()`可以返回`NULL`。

你太自负了；你认为你已经掌握了这个伟大演出的秘密，它只涉及在 stackoverflow 上提问和从 PHP wiki 复制/粘贴示例。***你需要阻止它***。编写无错误的程序需要理解*每一个*单词，虽然我很乐意帮助你学习如何做到这一点，但我将不得不坚持你的行为要负责任。

### 你应该有道德意识来避免编写你还没有足够经验编写的代码。

从信誉良好的来源获取这些例程，并从其他人的错误中吸取教训；您的客户/雇主/等不值得您的错误；我们的行业不值得这种废话。

# jquery - jQuery动画返回回调值

> ID：14013982
> 
> 赞同：0
> 
> 时间：2012-12-23T19:22:22.230
> 
> 标签：jquery, jquery-animate, jquery-callback

我很确定这个问题的答案在某处漂浮，但我不知道要搜索哪些关键字......

明白啦：

```
...
var currLeft = $(window).scrollLeft();
$('html, body').animate({
    scrollLeft: currLeft+width+'px'
}, 1200, function(){
    currLeft = $(window).scrollLeft();
});
... 
```

动画完成后，我想将 function() 中的 currLeft 替换为“第一个”currLeft ...

**更新：** 感谢所有的答案，但你指出我的方向不是我要找的:-) 假设你有这个：

```
var currLeft = 'Whats your name?';
$('html, body').animate({
    scrollLeft: currLeft+width+'px'
}, 1200, function(){
    currLeft = 'Its Hank'
}); 
```

我想替换“你叫什么名字？” 在这种情况下使用“Its Hank”，第一个 currLeft 仍然存在：“你叫什么名字？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:27:11.833

我不确定，但可能是这样的：

```
var currLeft = $(window).scrollLeft();
$('html, body').animate({
    scrollLeft: currLeft+width+'px'
}, 1200, function(){
    $('html, body').scrollLeft(currLeft);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:32:56.493

尝试这个：

```
var currLeft = $(window).scrollLeft(),
    currLeft2 = "";
$('html, body').animate({
  scrollLeft: currLeft+width+'px'
}, 1200, function(){
  currLeft2 = 'Its hank';
}); 
```

# java - 变量定义的外部循环和内部循环之间有区别吗？

> ID：14013983
> 
> 赞同：2
> 
> 时间：2012-12-23T19:22:29.517
> 
> 标签：java

> **可能重复：**
> [在循环之前或循环中声明变量之间的区别？](https://stackoverflow.com/questions/407255/difference-between-declaring-variables-before-or-in-loop)

```
String str;
for (int i = 0; i < 10; i++) {
    str = "Hello, World"; // Is str created only 1 time?
} 
```

上面和下面有什么区别？如果它们不同，哪一个更好？

```
for (int i = 0; i < 10; i++) {
    String str = "Hello, World"; // Is str created 10 times?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T19:24:15.427

在第一个示例中，该变量可以在*for-loop*范围之外使用，而另一个变量仅在*for-loop*内可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T19:23:52.510

不同之处在于您可以在第一个示例中的循环*之后*`str`访问变量。

 *### 范围：

变量的*作用域*不同：

*   *循环外*定义的变量在声明（和初始化）方法之后的*任何地方*都可以访问，包括循环内
*   *循环内*定义的变量只能*在*循环内访问

### 初始化：

如果您的循环可以不迭代，则该变量将在第一个示例中未初始化，因此您不能在循环之后使用它，直到您给它一个值（即使该值是`null`）

### 垃圾收集：

它可用于垃圾收集的点是：

1.  在示例 1 的方法中最后一次使用之后，
2.  在循环结束时，例如 2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T19:26:05.693

如果您没有使用基本上是单例常量的字符串文字来编写示例，那么答案将是在这两种情况下都创建了 10 个对象。在您的具体示例中，**没有创建任何对象**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T19:26:40.123

由于它是一个字符串文字，它不会被创建 10 次。它将保存在 permgen 空间而不是堆空间中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T19:26:29.233

在 Java 中，字符串常量是*interned*，这意味着相同的字符串文字只保存在 (PermGen) 内存中一次，例如：

```
"foo" == "foo" 
```

是幂等的。因此，您的两个片段的内存占用量将相等，但对于第一个，您可以`str`在循环终止后使用。

一个或另一个更好，这真的取决于你`str`在循环之后需要做什么。

干杯，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T19:27:55.397

从维护的角度来看，第二个更好。在尽可能窄的范围内，在同一个地方声明和初始化变量。不要在声明和初始化之间留下一个空洞，也不要污染你不需要的命名空间。

[参考这个链接](https://stackoverflow.com/questions/407255/difference-between-declaring-variables-before-or-in-loop)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-23T19:46:31.963

在第一种情况下，循环的全局变量使用引用的值初始化 10 次，而在第二种情况下，循环的局部变量使用相同的值重新初始化 10 次

注意：在这两种情况下只有一个变量而不是 10

更好地使用数组、向量或链表来进行多变量初始化*

# php - 如何存储临时数据？

> ID：14013985
> 
> 赞同：0
> 
> 时间：2012-12-23T19:22:37.673
> 
> 标签：php, mysql

我们有一个报告应用程序，用户可以选择一个日期范围，所有报告都使用相同的日期范围。我们目前为每个报告运行相同的查询，我认为这是不可行的，因为所有报告都需要相同的数据，并且每次都运行相同的查询没有意义。

有人对如何临时存储数据以供其他报告使用有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:34:37.733

是 MYSQL 还是 MSSQL？如果是 MSSQL，我建议使用临时表，然后您可以在另一个提交时删除该表。

# android - Android 2.X 中的 Android ListView 问题

> ID：14013986
> 
> 赞同：4
> 
> 时间：2012-12-23T19:22:42.370
> 
> 标签：android, android-listview, actionbarsherlock, android-arrayadapter, custom-adapter

我创建了一个自定义数组适配器来填充列表视图，并且当活动加载列表视图文本消失时。

**PlacesListAdapter.java**

```
public class PlacesListAdapter extends ArrayAdapter<Place> implements
        Filterable {
    public Context context;
    private List<Place> places, orig, itemDetailsrrayList;
    private PlaceFilter filter;

    public PlacesListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public PlacesListAdapter(Context context, int resource, List<Place> places) {
        super(context, resource, places);
        this.context = context;
        this.places = places;

        itemDetailsrrayList = places;
        orig = new ArrayList<Place>(itemDetailsrrayList);

        filter = new PlaceFilter();
        // imageLoader = new ImageLoader(context.getApplicationContext());

    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Place getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View view = convertView;

        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.list_item_place, null);
        }

        Place place = places.get(position);

        if (place != null) {

            TextView place_name = (TextView) view
                    .findViewById(R.id.place_title);
            TextView place_distance = (TextView) view
                    .findViewById(R.id.place_distance);
            ImageView place_category_icon = (ImageView) view
                    .findViewById(R.id.place_category_icon);

            if (place_name != null) {
                place_name.setText(place.getPlaceTitle());
            }

            if (place_distance != null) {
                place_distance.setText("198");
            }

            if (place_category_icon != null) {
                place_category_icon.setImageResource(R.drawable.icon_category);
            }

        }

        // Setting Alternative Row Colors
        if (position % 2 == 0) {
            view.setBackgroundResource(R.drawable.list_view_place_row_1);
        } else {
            view.setBackgroundResource(R.drawable.list_view_place_row_2);
        }

        return view;
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return filter;
    }

    private class PlaceFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults oReturn = new FilterResults();
            ArrayList<Place> results = new ArrayList<Place>();
            if (orig == null)
                orig = itemDetailsrrayList;
            if (constraint != null) {
                if (orig != null && orig.size() > 0) {
                    for (Place g : orig) {
                        if (g.getPlaceTitle()
                                .toLowerCase()
                                .startsWith(constraint.toString().toLowerCase()))
                            results.add(g);
                    }
                }
                oReturn.values = results;
            }
            return oReturn;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            itemDetailsrrayList = (ArrayList<Place>) results.values;
            notifyDataSetChanged();
        }

    }
} 
```

**Place.java**

```
public class Place {
    Integer placeId;
    String placeName = "", placeDistance = "", placeCategoryIcon = "";

    public Place(int placeId, String placeName, String placeDistance,
            String placeCategoryIcon) {
        this.placeId = placeId;
        this.placeName = placeName;
        this.placeDistance = placeDistance;
        this.placeCategoryIcon = placeCategoryIcon;
    }

    public Integer getPlaceId() {
        return placeId;
    }

    public void setPlaceId(int placeId) {
        this.placeId = placeId;
    }

    public String getPlaceName() {
        return placeName;
    }

    public void setPlaceName(String placeName) {
        this.placeName = placeName;
    }

    public String getPlaceDistance() {
        return placeDistance;
    }

    public void setPlaceDistance(String placeDistance) {
        this.placeDistance = placeDistance;
    }

    public String getPlaceCategoryIcon() {
        return placeCategoryIcon;
    }

    public void setPlaceCategoryIcon(String placeCategoryIcon) {
        this.placeCategoryIcon = placeCategoryIcon;
    }

} 
```

**主要活动**

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
        setContentView(R.layout.activity_main);

        context = this;

        Log.i("Nomad", "onCreate");

        List<Place> thePlaces = new ArrayList<Place>();
        for (int i = 0; i < places.length; i++) {
            Place pl = new Place(i, places[i], "NO_DISTANCE", "NO_CATEGORYICON");
            thePlaces.add(pl);
        }

        listView = (ListView) findViewById(R.id.place_list);
        listView.setEmptyView(findViewById(R.id.empty));

        adapter = new PlacesListAdapter(MainActivity.this, thePlaces);

        listView.setAdapter(adapter);

        listView.setTextFilterEnabled(true);

        mSearchView = (SearchView) findViewById(R.id.action_search);

        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View view, int position,
                    long id) {

                startActivity(new Intent(MainActivity.this, PlaceActivity.class));
            }
        });
    } 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/primary_white" >

    <ListView
        android:id="@+id/place_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000"
        android:fadingEdge="none" >
    </ListView>

    <TextView
        android:id="@+id/empty"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="20dp"
        android:text="@string/list_view_place_empty"
        android:textColor="@color/black"
        android:textSize="18sp" />

</LinearLayout> 
```

**list_item_place.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="10dp"
    android:paddingTop="10dp" >

    <ImageView
        android:id="@+id/place_category_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:contentDescription="ss"
        android:paddingLeft="10dp"
        android:paddingRight="15dp"
        android:src="@drawable/icon_category" />

    <TextView
        android:id="@+id/place_distance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:paddingRight="15dp"
        android:textColor="@color/black"
        android:text="320" />

    <TextView
        android:id="@+id/place_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/place_category_icon"
        android:ellipsize="end"
        android:paddingRight="50dp"
        android:singleLine="true"
        android:text="Place Name"
        android:textColor="#191919"
        android:textSize="18sp" />

</RelativeLayout> 
```

这是它在加载时的显示方式

![在此处输入图像描述](../Images/6a18cf75c8a6ed2a41c6b48b0977178d.png)

在尝试滚动内容重新出现。 ![在此处输入图像描述](../Images/034ca6df3e1ba76fe70d810c59fb67b5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:33:24.220

你必须删除

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR); 
```

Window.FEATURE_ACTION_BAR已添加到 Honeycomb (3.0) 中，不适用于 Android 2.x 设备[。](http://developer.android.com/reference/android/view/Window.html#FEATURE_ACTION_BAR)为了与旧版本保持兼容，您可以在 MainActivity.java 中使用此代码段：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= 11) {
   getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
} 
```

**附加代码：（**这些是您上面示例的派生类，由于缺少类，必须更改、注释或以某种方式操纵某些元素才能编译）

MainActivity.java

在 MainActivity 中，我所做的唯一真正更改是禁用小于 11 的 api 级别的操作栏。并且在插入位置后启动 notifyDatasetchanged()。

```
public class MainActivity extends Activity {

    protected static final String TAG = "MainActivity";

    private MainActivity context;

    private ListView listView;

    private PlacesListAdapter adapter;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.v(TAG, "onCreate()");
        int currentapiVersion = android.os.Build.VERSION.SDK_INT;
        if (currentapiVersion >= 11) {
            getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
        }

        setContentView(R.layout.activity_main);

        context = this;

        Log.i("Nomad", "onCreate");

        List<Place> thePlaces = new ArrayList<Place>();
        String[] places = new String[10];
        places[0] = "hallo1";
        places[1] = "hallo2";
        places[2] = "hallo3";
        places[3] = "hallo4";
        places[4] = "hallo5";
        places[5] = "hallo6";
        places[6] = "hallo7";
        places[7] = "hallo8";
        places[8] = "hallo9";
        places[9] = "hallo10";

        for (int i = 0; i < places.length; i++) {
            Place pl = new Place(i, places[i], "NO_DISTANCE", "NO_CATEGORYICON");
            thePlaces.add(pl);
        }

        listView = (ListView) findViewById(R.id.place_list);
        listView.setEmptyView(findViewById(R.id.empty));

        adapter = new PlacesListAdapter(this, R.layout.list_item_place,
                thePlaces);

        listView.setTextFilterEnabled(true);

        // mSearchView = (SearchView) findViewById(R.id.action_search);

        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View view, int position,
                    long id) {

                startActivity(new Intent(MainActivity.this, MainActivity.class));
            }
        });
        listView.setAdapter(adapter);
        **adapter.notifyDataSetChanged();**
    }
} 
```

PlacesListAdapter.java

对于适配器，我强烈建议使用 ViewHolder，它包含每个 List-Element-View 的 TextView 和 ImageView 引用。

```
public class PlacesListAdapter extends ArrayAdapter<Place> implements
        Filterable {
    private static final String TAG = "PlacesListAdapter";
    public Context context;
    private List<Place> places, orig, itemDetailsrrayList;
    private PlaceFilter filter;

    public PlacesListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public PlacesListAdapter(Context context, int resource, List<Place> places) {
        super(context, resource, places);
        this.context = context;
        this.places = places;

        itemDetailsrrayList = places;
        orig = new ArrayList<Place>(itemDetailsrrayList);

        filter = new PlaceFilter();
        // imageLoader = new ImageLoader(context.getApplicationContext());

    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Place getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    /**
     * This is the holder that will provide fast access to arbitrary objects and
     * views. Use a subclass to adapt it for your needs.
     */
    public static class ViewHolder {
        private final TextView place_name;
        private final TextView place_distance;
        private final ImageView place_category_icon;

        public ViewHolder(TextView place_name, TextView place_distance,
                ImageView place_category_icon) {
            this.place_name = place_name;
            this.place_distance = place_distance;
            this.place_category_icon = place_category_icon;
        }
    }

    protected ViewHolder createHolder(View v) {
        TextView place_name = (TextView) v.findViewById(R.id.place_title);
        TextView place_distance = (TextView) v
                .findViewById(R.id.place_distance);
        ImageView place_category_icon = (ImageView) v
                .findViewById(R.id.place_category_icon);
        ViewHolder tvshowHolder = new ViewHolder(place_name, place_distance,
                place_category_icon);

        return tvshowHolder;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View view = convertView;
        ViewHolder holder;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) this.context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.list_item_place, null);
            // Log.v(TAG, "generating new view");
            holder = createHolder(view);
            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }
        Place place = places.get(position);
        if (place != null) {
            // Log.v(TAG, place.getPlaceName());
            if (holder.place_name != null) {
                // Log.v(TAG, "setting placeName to " + place.getPlaceName());
                // place_name.setText(place.getPlaceTitle());
                holder.place_name.setText(place.getPlaceName());
            }

            if (holder.place_distance != null) {
                holder.place_distance.setText("198");
            }

            if (holder.place_category_icon != null) {
                holder.place_category_icon
                        .setImageResource(R.drawable.ic_launcher);
            }

        }

        // Setting Alternative Row Colors
        if (position % 2 == 0) {
            view.setBackgroundResource(R.drawable.ic_launcher);
        } else {
            view.setBackgroundResource(R.drawable.ic_launcher);
        }

        return view;
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return filter;
    }

    private class PlaceFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults oReturn = new FilterResults();
            ArrayList<Place> results = new ArrayList<Place>();
            if (orig == null)
                orig = itemDetailsrrayList;
            if (constraint != null) {
                if (orig != null && orig.size() > 0) {
                    for (Place g : orig) {
                        if (g.getPlaceTitle()
                                .toLowerCase()
                                .startsWith(constraint.toString().toLowerCase()))
                            results.add(g);
                    }
                }
                oReturn.values = results;
            }
            return oReturn;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            itemDetailsrrayList = (ArrayList<Place>) results.values;
            notifyDataSetChanged();
        }

    }
} 
```

# sql - 剃刀检查行是否存在

> ID：14013987
> 
> 赞同：0
> 
> 时间：2012-12-23T19:22:52.030
> 
> 标签：sql, database, razor

我正在尝试检查输入数据，以查看它是否已存在于数据库中。

我试过这个，但没有帮助： [确定行是否存在的最佳方法](https://stackoverflow.com/questions/9649814/best-method-for-determining-if-a-row-exists)

我还是 Razor 的新手，但一天比一天好 :-)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:24:58.953

您可以使用以下`QueryValue`方法：

```
var db = Database.Open("SmallBakery");
var count = db.QueryValue("SELECT COUNT(*) FROM Product WHERE Id = @0", 123);
if (count > 0) {
    // the record exists
} 
```

您当然需要调整 SQL 查询以匹配您的数据库模式。

有用的阅读：[http ://www.asp.net/web-pages/overview/more-resources/asp-net-web-pages-api-reference](http://www.asp.net/web-pages/overview/more-resources/asp-net-web-pages-api-reference)

# python - 多线程不适用于python

> ID：14013988
> 
> 赞同：-1
> 
> 时间：2012-12-23T19:23:08.957
> 
> 标签：python, multithreading

我是 python 新手，明天要提交我的项目。我正在使用 python 为 ubuntu 开发一个日志监控系统。我为日志分析设计了一个类。现在调用两个线程并调用该类的两个实例来一次监控超过 1 个日志。

当我首先运行代码时，两个线程都运行。但后来只有线程 2 运行。线程一不是。

请告诉我应该在哪里进行更改以修复它？或者建议任何其他多线程系统。请放一个函数的链接引用。我没有太多时间研究它。一个小的代码更正将非常有帮助。

```
 def start_thread(): 
  last_time=strftime("%Y-%m-%d %H:%M:%S", gmtime())
  global CheckVar1
  global CheckVar9
  CheckVar1 = 1
  CheckVar9 = 1
  mylist.insert(END,last_time+"            LOG MONITORING ACTIVATED.")
  #lock=thread.allocate_lock()

  thread.start_new_thread(_thread,("Thread No:1",1))
  thread.start_new_thread(_thread1,("Thread No:2",8))

 #------------------------------
 def _thread(string2,sleeptime,*args):
  #lock.acquire() 
  lineCount=0;
  check=0;
  print string2
  #mylist.insert(END,"checking,,,")
  #time.sleep(sleeptime);
  logic()

 def _thread1(string3,sleeptime2,*args):
  #lock.acquire() 
  lineCount=0;
  check=0;
  print string3
  #mylist.insert(END,"checking,,,")
  #time.sleep(sleeptime2);
  logic1()

 btn_start = Button(app, text = "GO >>")
 btn_start.grid(row=3,column=1,sticky=W);
 btn_start["command"]=start_thread

 class LogWatcher(object):
    def __init__(self, log_file_name, callback):
    self.log_file_name = log_file_name
    self.callback = callback
    global count_number_of_line
    print log_file_name
    self.initial_counting(log_file_name)

    def looping(self, waiting_time=5):
    while 1:
        self.check_change(self.log_file_name, count_number_of_line)
        print count_number_of_line
        time.sleep(waiting_time)

    def initial_counting(self, log_file_name):
    .....

    def check_change(self, log_file_name, last_count):
    .......

 def logic():    
        .....

    m=LogWatcher("/var/log/auth.log", callback)
    m.looping()

 def logic1():    

    ...
    l=LogWatcher("/var/log/kern.log", callback2)
    l.looping() 
```

我没有把完整的代码放在这里。但是如果有人想让它运行，那么你可以从[这里下载它](http://www.ans4u.com/wp-content/uploads/2012/12/d.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:12:35.800

如果您使用的是“标准”python 实现（又名 cpython），您应该了解[Global Interpreter Lock](http://wiki.python.org/moin/GlobalInterpreterLock)。我引用（强调我的）：

> 在 CPython 中，**全局解释器锁或 GIL 是一个互斥锁，可防止多个本机线程同时执行 Python 字节码**。这个锁是必要的，主要是因为 CPython 的内存管理不是线程安全的。（然而，由于 GIL 的存在，其他功能已经发展到依赖于它强制执行的保证。）

一种可能的替代方法是使用[multiprocessing](http://docs.python.org/2/library/multiprocessing.html)模块实际使用不同的进程。但在这种情况下，您必须明确地将数据发送到其他进程，因为它们不共享地址空间。建议在初始化 GUI 之前启动其他进程。

关于像 Tk 这样的 GUI 工具包要记住的另一点是，它通常只允许从原始线程进行 Tk 调用。

大多数 GUI 工具包都有超时或空闲功能，可让您在 GUI 不执行任何操作时执行小任务。您可以构建您的应用程序以使用它们。

# css - 下拉 CSS 菜单中断

> ID：14013989
> 
> 赞同：0
> 
> 时间：2012-12-23T19:23:10.997
> 
> 标签：css, drop-down-menu, hover, z-index

我有一个 CSS 菜单，带有一个使用伪 :hover 标签的下拉菜单，但由于某种原因，每当我将鼠标移到包装器/主体上时，它就会不断中断（就像它不在 ul 中一样）。我尝试使用 z-index，但这也没有解决它。帮助！

将鼠标悬停在“菜单”按钮上。

[live.bluefantail.com/demo.php](http://live.bluefantail.com/demo.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:28:15.547

添加`z-index`到`#content`：

```
#content {
  z-index: 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:46:09.187

抱歉，我不明白您的问题，但他们是您网站的另一个问题。调整浏览器大小时，您的页脚会在内容上移动。

# c# - TFS Force 通过 SDK 以编程方式获取

> ID：14013994
> 
> 赞同：4
> 
> 时间：2012-12-23T19:23:45.183
> 
> 标签：c#, .net, tfs, tfs-sdk

我想不出任何办法以编程方式强制从 TFS 获取文件。我当前的代码：

> _workspace.Get(new GetRequest(serverPath, RecursionType.None, new DateVersionSpec(dateTime)), GetOptions.Overwrite);

上面的代码会得到一个特定的版本，但如果我手动删除文件，TFS 认为它仍然存在。如何对特定版本使用强制获取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T19:28:02.507

要进行强制获取，请使用`GetOptions.GetAll`. 例如：

```
workspace.Get(new GetRequest(serverPath, RecursionType.None, new DateVersionSpec(dateTime)), GetOptions.Overwrite | GetOptions.GetAll); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T20:24:57.237

我真的想通了。使用 GetAll 的问题是，它可以获取所有内容，而我只想要特定文件的一个特定版本。

这就是我所做的：

```
_controlServer.GetItems(serverPath, new DateVersionSpec(dateTime), RecursionType.None).Items[0].DownloadFile(_workspace.GetWorkingFolderForServerItem(serverPath).LocalItem); 
```

# sqlite - 别名是否要在声明它们的 Select 之外使用？

> ID：14013997
> 
> 赞同：0
> 
> 时间：2012-12-23T19:23:54.647
> 
> 标签：sqlite, subquery, alias

每个人。我有一个表，其中一个字段 (seq) 声明为 varchar(14)，其中包含一串数字（由空格分隔的五个 2digits 数字）。对于每一行，我想将这些数字中的 4 个***Union All***的 5 种可能组合合并到一个列中。我的第一次尝试导致以下查询，它“应该”工作（尽管我承认它“有点”糟糕！）：

```
SELECT id,ordered_seq FROM(
    SELECT id,
           seq,
           MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)) AS A1,
           MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)) AS E1,
           trim(replace(replace(replace(replace(seq,A1,''),'  ',' '),E1,''),'  ','')) AS T1,

           MIN(SUBSTR(T1,1,2),SUBSTR(T1,4,2),SUBSTR(T1,7,2)) AS B1,
           MAX(SUBSTR(T1,1,2),SUBSTR(T1,4,2),SUBSTR(T1,7,2)) AS D1,
           replace(replace(replace(T1,B1,''),D1,''),'  ','') AS C1,
           A1||' '||B1||' '||C1||' '||D1||' '||E1 AS ordered_seq
    FROM source_table
)
WHERE(seq<>'00 00 00 00 00') 
```

这应该返回每行按升序排序的原始列，同时为工作的最后部分提供“索引”：如我之前所说，选择每行 4 个数字的所有可能组合。问题是，我第一次尝试在声明它的选择中使用别名时出现“没有这样的列”错误（即选择 col1 作为 c1，count(c1) 引发“没有这样的列：C1”错误）。这是正常行为吗？

我平时的运气。

更新的查询 -----------------

```
SELECT id, fir||' '||sec||' '||thi||' '||fou||' '||fif AS ordered_list 
FROM (
   SELECT id,
          Date,
          seq,
          MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)) AS fir,
          MIN( SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),1,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),4,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),7,2) ) AS sec,
          trim( replace(replace(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),MIN( SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),1,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),4,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),7,2) ),''),MAX( SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),1,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),4,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),7,2) ),'')) AS thi,
          MAX( SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),1,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),4,2), SUBSTR(trim(replace(replace(replace(replace(seq,MIN(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' '),MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)),''),'  ',' ')),7,2) ) AS fou,
          MAX(SUBSTR(seq,1,2),SUBSTR(seq,4,2),SUBSTR(seq,7,2),SUBSTR(seq,10,2),SUBSTR(seq,13,2)) AS fif
   FROM source_table
)
WHERE (seq<>'00 00 00 00 00' AND Date BETWEEN '1939-01-07' AND '2012-12-24') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:07:26.590

列别名定义SELECT*输出的名称。*

要在 SELECT 子句本身中使用它们，您必须添加另一层间接：

```
SELECT c1 FROM (SELECT 42 AS c1) 
```

# c# - 为 DataGridView 列使用自定义货币符号？

> ID：14013999
> 
> 赞同：0
> 
> 时间：2012-12-23T19:24:07.340
> 
> 标签：c#, winforms, datagridview, currency, currency-formatting

我想格式化一个显示货币值的 DataGridView 列，但是我想使用自定义货币前缀，该前缀目前没有由任何文化定义。我希望我的价值观看起来像这样：

```
Mn. 2,300.00
Mn. 40,259.22
Mn. 6.33
Mn. 2,000,203.19 
```

显然，`Mn.`是我要添加的前缀。除了这种自定义，值本身的格式与任何其他货币一样（即 2 位小数，每 3 位数字后的逗号等..）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-05-24T10:12:14.943

*（这个自我回答之前是由问题 OP 作为对问题的编辑发布的。内容迁移到这个答案。）*

```
var format = (NumberFormatInfo)NumberFormatInfo.CurrentInfo.Clone();  
format.CurrencySymbol = "Mn. ";  
qBDDataGridView.Columns["Base Selling Price"].DefaultCellStyle.FormatProvider = format;  
qBDDataGridView.Columns["Base Selling Price"].DefaultCellStyle.Format = "c"; 
```

以上将格式化一个名为的列`"Base Selling Price"`，`DataGridView`以使用货币的自定义符号`'Mn.'`。希望这被证明对其他人也有用。[归功于 Jason Whitted](https://stackoverflow.com/users/1910843/jason-whitted)的[回答](https://stackoverflow.com/a/14014114/4298200)， 它引导我（问题 OP）朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T19:39:39.010

您需要管理自己的`NumberFormatInfo`对象，其中包含一个`CurrencySymbol`属性。您可以将此对象传递给`decimal.ToString()`方法。

```
var format = (NumberFormatInfo)NumberFormatInfo.CurrentInfo.Clone();
format.CurrencySymbol = "Mn. ";
var amount = 12345.67m;
Console.WriteLine(amount.ToString("C", format)); 
```