# StackOverflow 问答 13910000-13910999

# c++ - 包含和使用声明

> ID：13910000
> 
> 赞同：1
> 
> 时间：2012-12-17T07:31:45.977
> 
> 标签：c++, include, using-directives, using-declaration

```
using ::bb::cascades::Application;

#include <bb/cascades/Application> 
```

这两个声明是什么意思？

是否有任何好的教程可以深入说明 using 指令/声明？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:35:34.553

`#include`是一个前驱指令。它基本上告诉前处理程序获取给定的文件并用`#include`文件内容替换该行。

`using`另一方面，可以在 a `namespace`(structs, enums, functions) 中使用不带`namespace`前缀的名称。在这种情况下`::bb::cascades::Application`，您可以使用 write

```
Application app; 
```

代替

```
::bb::cascades::Application app; 
```

if`::bb::cascades::Application`是一个默认可构造的类。

## *“为什么我需要使用`#include`？”*

为了使用函数或创建对象，编译器必须知道这些事物的结构，例如函数签名或类的成员和方法。这些东西都写在头文件中。让我们看一个非常简单的示例，其中我们提供了一些模块（称为`module`）：

### 模块`module`

```
// MODULE_HPP
// only declarations, no code
namespace module{
    struct dummyStruct{
        void dummyMethod(char);
        char dummyMember;
    };
    double dummyFunc(double);
}; 
```

```
// MODULE_CPP
// actual implementation
namespace module{
    void dummyStruct::dummyMethod(char c){
        dummyMember = c;
    };
    void dummyFunc(double a){
        return a + 1;
    }
}; 
```

如您所见，我们`module`由一个带有成员和方法的结构以及一个简单的函数组成。请注意，我们将所有内容都包装在命名空间中`module`。现在我们有另一个想要使用的程序`module`：

```
#include <iostream>
using module::dummyFunc;

int main(){
    std::cout << dummyFunc(1) << std::endl;
} 
```

这是行不通的，因为编译器不知道 namespace `module`。您需要添加声明，这可以通过使用来完成`#include`（请参阅此答案的第一段）：

```
#include <iostream>
#include "module.hpp"
using module::dummyFunc;

int main(){
    std::cout << dummyFunc(1) << std::endl;
} 
```

^(Note that you'll need to compile both module.cpp and main.cpp, otherwise you'll get linker errors.)

# jquery - 一个页面可以有两个 #(document).ready() 方法吗？

> ID：13910007
> 
> 赞同：0
> 
> 时间：2012-12-17T07:32:26.080
> 
> 标签：jquery

我有一个页面，它有 $(document).ready() 方法。在该方法中，还有一个 div 正在加载另一个页面，并且该页面也具有 $(document).ready() 方法，其中它向元素添加了单击事件侦听器。但它是说不存在任何元素。有人可以帮忙吗？

div页面中的脚本：

```
 <script>
         $(document).ready(function() {
            console.log("Entered into the page");
            var video = document.getElementsByTagName('video')[0];
            console.log("Video id"+video);
            //P.E. style, let video@controls remain set if RS scripting not supported                
            //if(checkReadingSystemSupport()) video.removeAttribute('controls', 0);;
            video.addEventListener('click', function(e){
                    console.log("single click");
                    e.preventDefault();
                    togglePlay();
            }, false);

            video.addEventListener('dblclick', function(e){
                    console.log("Double Clicking");
                    e.preventDefault();
                    toggleControls();
            }, false);    

            video.addEventListener('keyup', function (e) {
                console.log("Key up");
                var k = e ? e.which : window.event.keyCode;
                if (k == 32) {
                    e.preventDefault();
                    togglePlay();
                }
            },false);
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:40:09.493

我会尝试更多类似的东西，使用 jQuery，因为它已经包含在网站上：

```
<script type="text/javascript">
     $(document).ready(function() {
         var video = $('video').first();
         $(document).on({
             click: function(e){
                 e.preventDefault();
                 togglePlay();
             },
             dblclick: function(e){
                e.preventDefault();
                toggleControls();
            },
            keyup: function (e) {
                if (e.which == 32) {
                    e.preventDefault();
                    togglePlay();
                }
            }
        }, video); // <-- delegated event
     });
</script>​​​​​​​​ 
```

正如问题下的评论中所指出的那样，如果 javascript 在加载了 ajax 的页面中，浏览器并不总是执行 javascript，您必须将它也包含在调用页面中，或者提取它从ajax调用的结果并以某种方式执行它。如果您搜索，那么已经有几个答案了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:39:39.710

`$(document.ready)`如果它们在页面源中或链接在外部 Javascript 文件中，则只能进行多个调用。

> 还有一个 div 正在加载另一个页面，并且该页面也有 $(document).ready()

浏览器不执行 ajax 响应中包含的任何 Javascript，这就是为什么`$(document).ready`不调用你的原因。

jQuery`success`为您的 ajax 调用提供事件，因此您可以添加任何想要在调用成功时执行的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:40:18.260

我不确定我是否明白了，但我认为您正在尝试使用不存在的元素。如果是真的，只需使用 jquery 中的 live() 即可。尽量不要使用 eventlistener - 8 以下的 IE 不喜欢它。

编辑：或尝试使用 jquery $getScript()

# php - 使用 htaccess 和 php 的 mp3 带宽限制

> ID：13910010
> 
> 赞同：4
> 
> 时间：2012-12-17T07:32:42.633
> 
> 标签：php, .htaccess, bandwidth-throttling

我正被试图关闭我的网站的机器人和恶意用户摧毁。

我尝试通过将所有对 mp3 文件的请求 mod_rewriting 到一个 php 脚本来制作带宽限制器，该脚本将跟踪每个 ip 并限制每个每小时可以下载多少。这工作得很好，但它给一些用户带来了很多问题，即链接不是指向 mp3 文件的直接链接。

我尝试了各种强制下载标头，但对某些用户有效的方法对其他人无效。

现在，问题是，是否可以保持与 mp3 文件的直接链接，并且每当有人单击 mp3 文件以同时运行允许或拒绝请求的跟踪 php 脚本时？

谢谢！

（服务器没有 mod_bandwidth 或任何其他有用的 mod）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:49:12.313

与其在用户点击链接时同时跟踪使用情况，不如将登录页面设为一个 PHP 脚本来检查用户的 ip 并基于该脚本输出或隐藏链接？如果您的文件存储在一个明显的文件夹中，例如 yoursite/music/artist/song.mp3，您可以为它们创建软链接，这样会混淆路径。在 linux 服务器上，您可以使用 symlink() php 函数创建指向 /music 目录的软链接，并将路径输出为 yoursite/3awE2afeefef4a323/artist/song.mp3 ，它仍然应该是文件的直接链接，例如：

```
<?php
$target = 'music/';
$link = 'a322ewrr323211';
symlink($target, $link);
?>
<html>
<body>
     <a href="a322ewrr323211/artist/song.mp3">link</a>
</body>
</html> 
```

然后在每晚或创建 24 小时后定期删除这些符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:29:44.557

一个`mod_rewrite`解决方案将足够优雅，并且可以保持链接直接。

在您的`.htaccess`中，重写所有`.mp3`指向 PHP 脚本的链接：

```
RewriteEngine on
RewriteRule \.mp3$ download.php 
```

在 PHP 文件中，我们可以提取请求的 URI，验证用户的 IP 并根据验证返回适当的标头。

```
<?php

// Set variables
$requestedFile = trim($_SERVER['REQUEST_URI'], '/');
$ip = $_SERVER['REMOTE_ADDR'];
$protocol = isset($_SERVER['SERVER_PROTOCOL']) ? $_SERVER['SERVER_PROTOCOL'] : 'HTTP/1.0';

// If the file does not exist, throw a 404 error
if (!file_exists($requestedFile)) {
    header($protocol . ' 404 Not Found');
}

// Is the user allowed to download?
function validateDownload($ip) {
    /**
     * Put your IP tracking and validation code here, returning `TRUE`
     * or `FALSE`.
     */

    return TRUE;
}

// Validate and perform appropriate action
$canDownload = validateDownload($ip);

if ($canDownload) {
    header('Content-Disposition: attachment; filename="' . basename($requestedFile) . '"');
    header('Content-type: audio/mpeg');
    readfile($requestedFile);
} else {
    header($protocol . ' 403 Forbidden');
} 
```

现在所有链接都保持直接，并且您将适当的标头返回给用户代理，提示下载或拒绝访问。

# android - android.database.sqlite.SQLiteDiskIOException：磁盘 I/O 错误（代码 1802）

> ID：13910013
> 
> 赞同：3
> 
> 时间：2012-12-17T07:32:46.600
> 
> 标签：android, database

我写了一些用于删除数据库文件夹的代码。它删除数据库但也抛出错误。请建议我如何解决这个问题。

**删除数据库的代码**

```
public void deleteDB() {
        try {
            File db_path = new File(
                    "/data/data/pacakge_name/databases/mydatabase_db.db");
            db_path.delete();
            System.out
                    .println("Database deleted successfully================================");
        } catch (Exception e) {
            // TODO: handle exception
            Log.e("Error==", e.toString());
        }
    }
Cursor cursor = handler.getCategoryData("1");
                        if (cursor.moveToFirst()) {
                            System.out
                                    .println("database has data................................");
                        } else {
                            System.out
                                    .println("database has no data.............................");
                            LiveTVCategoryParser category_parser = new LiveTVCategoryParser();
                            category_parser.category_parser(Splash.this, "1",
                                    "live_root");
                        } 
```

**错误：**

```
android.database.sqlite.SQLiteDiskIOException: disk I/O error (code 1802)
E/AndroidRuntime(  613):    at android.database.sqlite.SQLiteConnection.nativeExecuteForCursorWindow(Native Method)
E/AndroidRuntime(  613):    at android.database.sqlite.SQLiteConnection.executeForCursorWindow(SQLiteConnection.java:838)
E/AndroidRuntime(  613):    at android.database.sqlite.SQLiteSession.executeForCursorWindow(SQLiteSession.java:836)
E/AndroidRuntime(  613):    at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:62)
E/AndroidRuntime(  613):    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:143)
E/AndroidRuntime(  613):    at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
E/AndroidRuntime(  613):    at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:196)
E/AndroidRuntime(  613):    at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:236)
E/AndroidRuntime(  613):    at com.zengamedia.ui.Splash$1.run(Splash.java:51)
E/AndroidRuntime(  613):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T07:42:27.263

您应该在删除 SQLite 文件*之前关闭游标和数据库。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T10:20:41.200

错误代码 1802 是[SQLITE_IOERR_FSTAT](http://sqlite.org/c3ref/c_ioerr_access.html)。我宁愿假设磁盘级别有问题，尝试删除数据库并检查磁盘介质。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T04:37:07.540

当数据库的 CRUD 时调用这个函数

```
public synchronized void checkDBIsOpen() {
        try {
            mydb = dbHelper.getWritableDatabase();
        } catch (Exception e) {
            e.printStackTrace();
            NewsLog.error(TAG, "check database is open or not,excetpion:" + Utility2_1.getErrorInfo(e));
        }
    } 
```

# c++ - C++ 日期时间解析

> ID：13910014
> 
> 赞同：3
> 
> 时间：2012-12-17T07:32:49.470
> 
> 标签：c++, datetime

我用来`strptime`将日期时间字符串解析为`tm`结构。但是我遇到了一个问题：

我有这种格式的日期：

```
Thu Dec 13 23:44:45 MSK 2012 
```

`Thu Dec 13 23:44:45`我用`"%a %b %d %T"`格式字符串解析。但我不明白如何解析年份。我不能只使用`"%a %b %d %T MSK %Y"`，因为我想要独立于语言环境的解析器。

我可以跳过`MSK`单词吗？或者有什么其他方法可以解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:48:33.043

我没有找到答案，所以我编写了自己的日期时间解析器：

```
time_t timeParse(const char *string, struct tm *datetime)
{
    char dn[4], mn[4], ln[4];
    int d, h, m, s, y;
    sscanf(string, "%s %s %d %d:%d:%d %s %d", dn, mn, &d, &h, &m, &s, ln, &y);
    datetime->tm_sec = s;
    datetime->tm_min = m;
    datetime->tm_hour = h;
    datetime->tm_mday = d;
    if (!strcmp(mn, "Jan")) datetime->tm_mon = 0;
    if (!strcmp(mn, "Feb")) datetime->tm_mon = 1;
    if (!strcmp(mn, "Mar")) datetime->tm_mon = 2;
    if (!strcmp(mn, "Apr")) datetime->tm_mon = 3;
    if (!strcmp(mn, "May")) datetime->tm_mon = 4;
    if (!strcmp(mn, "Jun")) datetime->tm_mon = 5;
    if (!strcmp(mn, "Jul")) datetime->tm_mon = 6;
    if (!strcmp(mn, "Aug")) datetime->tm_mon = 7;
    if (!strcmp(mn, "Sep")) datetime->tm_mon = 8;
    if (!strcmp(mn, "Oct")) datetime->tm_mon = 9;
    if (!strcmp(mn, "Nov")) datetime->tm_mon = 10;
    if (!strcmp(mn, "Dec")) datetime->tm_mon = 11;
    datetime->tm_year = y - 1900;
    return mktime(datetime);
} 
```

`tm structure`我手动填写必要字段并`mktime`填写剩余字段：`tm_wday`, `tm_yday`, `tm_isdst`.

你应该这样称呼它：

```
time_t t = timeParse("Thu Dec 13 23:44:45 MSK 2012", &datetime); 
```

# excel - 将报告从 lightswitch 导出到 excel 并尝试在 excel 中创建边框

> ID：13910015
> 
> 赞同：2
> 
> 时间：2012-12-17T07:32:51.307
> 
> 标签：excel, vb.net-2010, visual-studio-lightswitch

我一直在尝试使用电灯开关在 excel 中创建边框。我创建了文档没有问题，并且可以根据需要格式化文档。然而，当谈到将 excel 边框放在 excel 上时，我似乎无法做到正确

```
**Imports System.Runtime.InteropServices.Automation
Imports System.Collections.Specialized**
 **With excel.Range("A5:M6")
                    .Borders(excel.XlBordersIndex.xlInsideVertical).LineStyle = excel.XlLineStyle.xlContinuous
                End With** 
```

有我使用的代码，上面是参考，因为我说一切都很好，没有边界的创建。系统不喜欢 XlBordersIndex “调用 XlBordersIndex 时出错 - 未找到成员。” 有什么我需要参考的吗？我已经用谷歌搜索了很长一段时间，但找不到任何关于 Microsoft Light Switch 的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:08:21.337

它看起来像是`excel`一个变量的名称—— an `Application`， a`Worksheet`或其他具有`Range`属性的东西——它与`Excel`命名空间冲突。也许尝试以下方法之一：

*   将`excel`变量重命名为其他名称
*   通过（大写 E）引用`XlBordersIndex`枚举。`Excel`
*   通过完整的命名空间引用枚举：`System.Runtime.InteropServices.Automation.Excel.XlBordersIndex.xlInsideVertical`

# linux - Linux 命令：在文件内容中查找字符串

> ID：13910016
> 
> 赞同：-4
> 
> 时间：2012-12-17T07:32:55.783
> 
> 标签：linux, command-line

> **可能重复：**
> [是否可以在 linux 中找到包含特定文本的文件？](https://stackoverflow.com/questions/5762611/is-it-possible-to-find-the-file-which-contains-a-specific-text-in-linux)

我想通过 Linux 中的命令行查找文件目录中字符串的位置。
例如，我想查找字符串“isOutOfCircle()”在属于“我的项目”目录的文件中的位置。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:37:28.000

`grep -R 'isOutOfCircle()' "My Project"`

`-R`用于递归搜索。您可能想`man grep`了解更多详细信息。

# php - 返回多个json结果

> ID：13910024
> 
> 赞同：3
> 
> 时间：2012-12-17T07:33:17.423
> 
> 标签：php, zend-framework

我必须输出`$var1`。为此，我使用返回结果

```
sendJson($var1); 
```

这对我来说很好。现在我想传递两个变量`$var1`并`$var2`使用 `sendJson();`. 是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:35:28.800

将它们全部放在一个数组中：

```
sendJson(array($var1, $var2)); 
```

或者如果您不想基于索引来命名它们：

```
sendJson(array('var1' => $var1, 'var2' => $var2)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T07:52:12.673

命名你的数组键：

```
echo json_encode( array (
    'messages' => array(
        'peter' => 'Hello',
        'john'  => 'Hi to you too'
    ),
    'users'     => array (
        'peter', 'john'
    )
)); 
```

然后像这样访问它们：

```
resp.messages.peter
resp.messages.john 
```

或者

resp.users[0], resp.users[1]....等

# android - 使用自定义 ProgressDialog android

> ID：13910028
> 
> 赞同：19
> 
> 时间：2012-12-17T07:33:57.690
> 
> 标签：android, progressdialog

我`ProgressDialog`在我的应用程序中使用自定义，我可以自定义，但我也想删除`progressDialog`. 在`styles.xml`我定义`customDialog`为

```
<style name="AppTheme" parent="android:Theme.Light" />

<style name="CustomDialog" parent="@android:style/Theme.Dialog">
    <item name="android:background">#7BC047</item>
    <item name="android:textColor">#FFFFFF</item>
    <item name="android:windowBackground">@null</item>
     <item name="android:windowFrame">@null</item>
</style> 
```

为了删除父窗口，我设置`windowBackground`为 null 和`windowFrame`null 但它对我不起作用。目前我的自定义进度对话框如下图所示![在此处输入图像描述](../Images/7cc9e45b48e5dfdef57d8e5be8d2eeb6.png)

我正在使用此代码来设置`progressDialog`.

```
 private void showProgressDialog() {
    progressDialog = new ProgressDialog(this,R.style.CustomDialog);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.setMessage("Logging in. Please wait.");
    progressDialog.show();
} 
```

所以，请帮助我解决这个问题，任何帮助都应该非常感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-09-08T07:06:16.417

该答案没有解决问题中所述的问题，但是在搜索如何实现自定义进度对话框时，这是指向 SO 的唯一链接。`Maksym Dybarskyi`也就是说，我在此[链接](https://android-arsenal.com/details/1/1743)上找到了一个很酷且易于使用的自定义进度对话框。

**所有的功劳归于创作者，而不是我。我只是分享**

您需要做的就是将其添加到您的依赖项中：

```
dependencies {
...
   compile 'com.github.d-max:spots-dialog:0.4@aar'
} 
```

然后自定义样式：

```
<style name="Custom" parent="android:Theme.DeviceDefault.Dialog">
    <item name="DialogTitleAppearance">@android:style/TextAppearance.Medium</item>
    <item name="DialogTitleText">Please Wait</item>
    <item name="DialogSpotColor">@android:color/holo_orange_dark</item>
    <item name="DialogSpotCount">8</item>
</style> 
```

最后，在您的代码中执行以下操作：

```
private AlertDialog progressDialog;
progressDialog = new SpotsDialog(mContext, R.style.Custom);

//Am using it in an AsyncTask. So in  my onPreExecute, I do this:
public void onPreExecute() {
  super.onPreExecute();
  progressDialog.show();
  ...
 }

//dismiss in onPostExecute
public void onPostExecute(){
   progressDialog.dismiss();
 } 
```

结果：

[![在此处输入图像描述](../Images/399b3882d691211747771ff73b24f77a.png)](https://i.stack.imgur.com/707a8.png)

**黄点从左到右移动，您可以更改样式中的点数**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-28T10:35:12.810

我知道我很晚才回答，但我会回答任何方式，

```
Dialog dialog = new  Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.dialog_login);
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-25T18:08:30.770

我`ProgressDialog`在我的应用程序中使用自定义。为此，我们必须遵循一些步骤，如下所示。

**step-1** 创建一个xml布局`custom_progress.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:padding="@dimen/dp_size_10"
    android:layout_height="match_parent">
<ProgressBar
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:indeterminateTint="@color/colorPrimary"
    android:layout_centerInParent="true"/>
</RelativeLayout> 
```

**第 2 步** 为此自定义对话框创建一个 java 文件。

```
package com.example.customeprogress;
import android.app.Dialog;
import android.content.Context;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.WindowManager;

public class CustomProgressDialogue extends Dialog {
    public CustomProgressDialogue(Context context) {
        super(context);

        WindowManager.LayoutParams wlmp = getWindow().getAttributes();

        wlmp.gravity = Gravity.CENTER_HORIZONTAL;
        getWindow().setAttributes(wlmp);
        setTitle(null);
        setCancelable(false);
        setOnCancelListener(null);
        View view = LayoutInflater.from(context).inflate(
                R.layout.custom_progress, null);
        setContentView(view);
    }
} 
```

**第 3 步** 在您的活动 java 类中创建此自定义类的对象并将其初始化如下使用对象`show()`或`dismiss()`

> CustomProgressDialogue 对象=新的 CustomProgressDialogue(this);

并使用显示此对话框。

> 对象.show(); 并使用 object.dismiss() 将其解雇；

输出结果。 [看看放在这里](https://i.stack.imgur.com/n5OBQ.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T10:13:59.527

只需在进度对话框的构造函数中检查使用活动名称，

```
 progressDialog = new ProgressDialog(Activity.this,R.style.CustomDialog); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-20T06:26:02.987

在样式上添加这个

```
<item name="android:background">@android:color/transparent</item>

<item name="android:windowBackground">@android:color/transparent</item> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-01T16:04:08.590

将此添加到您的`CustomDialog`in `styles.xml`：

```
<item name="android:alertDialogStyle">@style/CustomAlertDialogStyle</item> 
```

这`style`：

```
 <style name="CustomAlertDialogStyle" >
    <item name="android:bottomBright">@android:color/transparent</item>
    <item name="android:bottomDark">@android:color/transparent</item>
    <item name="android:bottomMedium">@android:color/transparent</item>
    <item name="android:centerBright">@android:color/transparent</item>
    <item name="android:centerDark">@android:color/transparent</item>
    <item name="android:centerMedium">@android:color/transparent</item>
    <item name="android:fullBright">@android:color/transparent</item>
    <item name="android:fullDark">@android:color/transparent</item>
    <item name="android:topBright">@android:color/transparent</item>
    <item name="android:topDark">@android:color/transparent</item>
</style> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-11T12:19:47.560

```
<style name="CustomDialog" parent="Theme.AppCompat.Light.Dialog">
   <item name="android:background">#7BC047</item>
   <item name="android:textColor">#FFFFFF</item>
   <item name="android:windowBackground">@color/colorTransparent</item>
</style> 
```

这为我完成了工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-20T05:53:47.253

这可能不是上述问题的合适答案。但这很有趣，我想在这里添加。

（我无法以我目前的声誉发表评论）

检查此[链接](https://medium.com/mindorks/stop-implementing-the-default-loading-dialog-in-you-android-apps-43c3a85036d6)

原作者正在添加一个 gif 而不是默认加载对话框，我认为如果有改进，那将是一个很好的替代品。

# node.js - 为什么在 express 应用中使用 http.createSever？

> ID：13910030
> 
> 赞同：1
> 
> 时间：2012-12-17T07:34:08.633
> 
> 标签：node.js, express

我在 express api 文档中找到，这就是创建新快递服务器的方式

```
var express = require('express');
var app = express();

app.listen(3000); 
```

它可以正常工作，但是当您默认使用 express 创建一个新应用程序时，它会生成以下代码来创建新服务器

```
 var express = require('express');
 var app = express();
    http.createServer(app).listen(app.get('port'), function(){
      console.log("Express server listening on port " + app.get('port'));
    }); 
```

有人可以解释我为什么在这里使用 http createServer 方法表达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:39:33.950

问题是 Express 在它的核心上使用了 Node 的 http 模块，这就是你创建 Express 应用程序的原因。

检查此以获取更多信息。

[什么是 Node.js 的 Connect、Express 和“中间件”？](https://stackoverflow.com/questions/5284340/what-is-node-js-connect-express-and-middleware)

# sql - 在临时表中插入多个表数据

> ID：13910034
> 
> 赞同：1
> 
> 时间：2012-12-17T07:34:26.877
> 
> 标签：sql, stored-procedures

我有来自多个表的多个记录。我需要将这些记录插入到我稍后传递的临时表中。问题是当我将行插入临时表时，它插入的数据行意味着每列行 id 计数器都会增加。我需要明智地插入数据列。表示每一列（我从差异表中获取记录）rowId 计数器从 1 开始。如果我在第一列中插入数据，我的行 id 计数器为 1-5（如果有 5 行）。如果我触发了从第 6 行插入到临时表中的第二条语句（对于第 2 列）数据。剩余的（1-5）是空值。有什么解决办法。请帮我。任何线索都是可观的。提前致谢！下面是我的程序...

```
alter PROCEDURE procGetPreviousOrderDetails --(@userid nvarchar(100))

AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

declare @recentViewedProduct nvarchar(max)
declare @AccountCreatedDate nvarchar(100)
declare @recentViewedCategories nvarchar(max)
declare @recentOrderProductList nvarchar(max)
declare @dateOflastPurchase nvarchar(max)
declare @shippingMethodList nvarchar(max)
declare @paymentMethodList nvarchar(max)
declare @totalOrderAmount nvarchar(100)
declare @zipCode nvarchar(100)

declare @tblOrderDetails table 
(
    RowId int identity(1,1),
    recentViewedProduct nvarchar(max),
    trailType int,
    AccountCreatedDate nvarchar(100),
    recentViewedCategories nvarchar(max),
    recentOrderProductList nvarchar(max),
    dateOflastPurchase nvarchar(max),
    shippingMethodList nvarchar(max),
    paymentMethodList nvarchar(max),
    totalOrderAmount nvarchar(100),
    zipCode nvarchar(100) 

)

if (select count(@@rowcount) from @tblOrderDetails) > 0   
begin                    
    truncate table tblOrderDetails 
end

 insert into  @tblOrderDetails(recentViewedProduct) select RV.item_name, RV.trail_type    from tblCMRecentlyViewed RV where RV.trail_type in (1, 2) and RV.user_id = '807CF717-9413-4CC3-8982-FF63A6B31906' order by RV.date_added desc
 insert into  @tblOrderDetails(AccountCreatedDate) select d_date_registered from UserObject where g_user_id = '807CF717-9413-4CC3-8982-FF63A6B31906'
  select distinct product_id from OrderFormLineItems where ordergroup_id = (select TOP 1 ordergroup_id from Ordergroup where user_id='807CF717-9413-4CC3-8982-FF63A6B31906' 
order by order_create_date desc)
select TOP 1 order_create_date from Ordergroup where user_id='807CF717-9413-4CC3-8982-FF63A6B31906' order by order_create_date desc
select distinct display_name from  ShipMethods where carrier_ship_method_id = (select distinct ship_method_id from Ordergroup where user_id='328239F8-A983-442C-A9E6-ADC203D5F52B')
select distinct saved_payment_type from OrderFormHeader where ordergroup_id in (select distinct ordergroup_id from Ordergroup where user_id='328239F8-A983-442C-A9E6-ADC203D5F52B')
select SUM(saved_cy_total_total) from Ordergroup where user_id='807CF717-9413-4CC3-8982-FF63A6B31906' 
select distinct u_postal_code from Addresses where g_id = '807CF717-9413-4CC3-8982-FF63A6B31906' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:42:27.897

我会说你这样做是错误的。这些查询中的每一个本身都应该是一个过程。合并数据应该是业务逻辑的责任。

您应该考虑在一个过程中返回 AccountCreatedDate、DateOfLastPurchase 和 TotalOrderAmmount，因为它只有一行，其余的应该有自己的过程。

如果您真的想这样做，您将需要在每个子选择上执行 LEFT JOIN 并在单个查询中执行所有操作。但性能会受到影响：

```
insert into @tblOrderDetails
select u.user_id, u.g_date_registered 
from UserObject u 
left join RV on u.user_id = RV.user_id 
    and RV.trail_type in (1, 2)
left join (
    select user_id, product_id 
    from OrderFormLineItems 
    where ordergroup_id = (
        select TOP 1 ordergroup_id 
        from Ordergroup 
        where user_id='807CF717-9413-4CC3-8982-FF63A6B31906')   
    ) ofli on ofli.user_id = u.user_id
left join (
    select TOP 1 user_id, order_create_date 
    from Ordergroup 
    where user_id='807CF717-9413-4CC3-8982-FF63A6B31906' 
    order by order_create_date desc
    ) og on og.user_id = u.user_id
left join (
    select distinct user_id, display_name 
    from  ShipMethods 
    where carrier_ship_method_id = (
        select distinct ship_method_id 
        from Ordergroup 
        where user_id='328239F8-A983-442C-A9E6-ADC203D5F52B')
    ) sm on sm.user_id = u.user_id
-- etc ...
where u.user_id = '328239F8-A983-442C-A9E6-ADC203D5F52B' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:36:50.980

在您使用第一个 INSERT 插入行后，您必须更新行以更改行中的其他列。这意味着您的临时表必须包含每一行的相关标识信息，以便您可以准确地应用更新。

或者，按照 Patrik Melander 的建议，将 SELECT 语句合并为一个；这意味着您只插入完整的记录。

这两种机制都避免了您遇到的麻烦。

# mysql - 在mysql中显示的行到列只是普通的简单表

> ID：13910037
> 
> 赞同：2
> 
> 时间：2012-12-17T07:34:42.713
> 
> 标签：mysql

> **可能重复：**
> [如何将 mysql 表行显示为列](https://stackoverflow.com/questions/10366023/how-do-i-display-mysql-table-row-as-column)

我有一列天，其中有两行 day1 和 day2，现在我需要将天行显示为两个单独的列。

表名：测试

```
column
 **days**
   day1
   day2 
```

运行查询后应该是这样的：

```
coum1      couml2
day1        day2 
```

在 MySQL 中需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:55:49.807

我注意到我是否真的得到了你想要的'但我认为结果应该是这样的：

```
SELECT days.days as coum1,  days2.days as coum2 from days join days as days2 WHERE days.days = 'day1' AND days2.days = 'day2'; 
```

# gwt - Google Wallet Online Commerce API：无法接收 Masked Wallet 响应

> ID：13910038
> 
> 赞同：2
> 
> 时间：2012-12-17T07:34:53.303
> 
> 标签：gwt, google-api, android-pay

我有几个关于 Google Wallet Online Commerce API 的问题。

1.  我了解该 API 可供 Google 批准的精选商家使用。使用沙盒环境是否也是如此？

2a. 我们如何获取 Online Commerce API 的卖家 ID 和卖家密码？2b。卖家 ID 和卖家密码是否与卖家在沙盒环境中注册时可用的商家 ID 和商家密钥相同？2c。我可以获得有关数字商品钱包 API 的卖家 ID 和卖家密码的详细信息 - 是否也可以将其用于在线商务 API？

1.  我们尝试在 Google Wallet Integration 上进行 POC，我们能够成功使用 createWalletButton API。单击按钮后，系统会要求我登录 Google 电子钱包——这也是成功的。但是检索钱包信息的调用失败。显示以下错误：

哦，哦。有问题。抱歉，Google 电子钱包无法完成您的请求。请返回商户选择其他付款方式，或稍后重试。错误：62 (121217125033+0530)

尝试调用 requestMaskedWallet API 时也会出现相同的错误。请指教。

迅速的回应将是有帮助的，非常感谢。

谢谢， 内哈

# android - 活动在 dialog.show() 上有内存泄漏

> ID：13910041
> 
> 赞同：0
> 
> 时间：2012-12-17T07:35:16.217
> 
> 标签：android, android-asynctask, android-activity, android-memory

我的布局上有后退按钮，每次点击都会调用对话框。单击时，我首先检查进度对话框是否可见，即异步任务是否正在运行，如果是，则比单击是按钮单击对话框时，我正在调用新活动。它工作正常，但我反复收到错误，例如单击此后退按钮时 Activity has Memory Leak。请提出一些解决方法来克服这个问题。这里是片段

```
public class LatestTab extends Activity {

    Activity context;
    ArrayList<String> contentList,slugList,latestData,imgLinks;
    ArrayList<HashMap<String, String>> mylist;
    JSONObject json, obj,img,thumb;
    JSONArray  latest, attachment;
    ImageView bck;
    String shareUrl = "-- url ----";
    String jString;
    ProgressBar showProgress;
    NetworkCheck netCheck;
    File externalFile       = new File(Environment.getExternalStorageDirectory(),"Latest.txt");
    ListView listView;
    String imgStr;

    ImageLoader loader;
    LazyAdapter lazyAdapter;
    String latestUrl = "---url--";
    Bundle bundle;
    boolean isFinish = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        /*this.requestWindowFeature(Window.FEATURE_NO_TITLE);*/
        setContentView(R.layout.activity_latest_tab);

        context     =       this;
        bck         =       (ImageView) findViewById(R.id.bckbtn);
        showProgress=       (ProgressBar)findViewById(R.id.showProgress);
        netCheck    =       new NetworkCheck(context);
        listView    =       (ListView) findViewById(R.id.latestList);
        latestData  =       new ArrayList<String>();
        imgLinks    =       new ArrayList<String>();
        mylist      =       new ArrayList<HashMap<String, String>>();
        contentList =       new ArrayList<String>();
        slugList    =       new ArrayList<String>();

        bundle = getIntent().getExtras();
        if(bundle != null){
            isFinish = bundle.getBoolean("finishAct");
        }
        MyAsyncTask my =    new MyAsyncTask();
        if(netCheck.isNetworkAvailable()){
            showProgress.setVisibility(View.VISIBLE);
            my.execute(latestUrl);
        }else{
            //Toast.makeText(context, "No Internet Connection", Toast.LENGTH_SHORT).show();

            try {
                FileInputStream filename                = null;
                Document xmldoc                         = null;
                DocumentBuilderFactory doc_build_fact   = null;
                DocumentBuilder doc_builder             = null;
                filename = new FileInputStream("/sdcard/MadhuriLatest.txt");

                if(externalFile.exists()){
                    //      Toast.makeText(context, "File Excits", Toast.LENGTH_SHORT).show();
                    FileChannel fc = filename.getChannel();
                    MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
                    jString = Charset.defaultCharset().decode(bb).toString();
                    json = new JSONObject(jString); 
                    latest = json.getJSONArray("posts");
                    imgLinks.clear();
                    latestData.clear();
                    for(int i=0;i<latest.length();i++){

                        HashMap<String, String> map = new HashMap<String, String>();    
                        JSONObject e = latest.getJSONObject(i);

                        String name = e.getString("title_plain");
                        String content = e.getString("content");

                        attachment = e.getJSONArray("attachments");
                        for(int p=0; p<attachment.length();p++){
                            obj = attachment.getJSONObject(p);
                            img = obj.getJSONObject("images");
                            thumb = img.getJSONObject("thumbnail");
                            imgStr = thumb.getString("url");
                        }

                        Log.d("--------------",imgStr);
                        contentList.add(content);
                        String chng = "&#8211;";
                        String  fnl_Str = name.replace(chng, "");
                        latestData.add(fnl_Str);
                        imgLinks.add(imgStr);
                        String slug = e.getString("slug");
                        slugList.add(slug);
                        map.put("id",  String.valueOf(i));
                        map.put("name", fnl_Str);
                        map.put("date", e.getString("date"));

                        mylist.add(map);            
                    }       
                }

                lazyAdapter = new LazyAdapter(context, imgLinks, latestData);
                listView.setAdapter(lazyAdapter);
                lazyAdapter.notifyDataSetChanged();

                listView.setOnItemClickListener(new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              

                        Intent intent=new Intent(context,WebViewActivity.class);
                        intent.putExtra("content", contentList.get(position));
                        intent.putExtra("shareUrl", shareUrl+slugList.get(position));
                        intent.putExtra("tab_value", 1);
                        startActivity(intent);
                        overridePendingTransition(R.anim.lefttorightslide,R.anim.righttoleftslide);

                    }
                });
            }catch(JSONException e)        {
                Log.e("log_tag", "Error parsing data "+e.toString());

            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }catch (Exception e){
                Log.e("Error: ", " "+e.getMessage());
            }
        }

        bck.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                if(showProgress.isShown()){
                    final Dialog dialog = new Dialog(context, android.R.style.Theme_Translucent_NoTitleBar);
                    //final Dialog dialog = new Dialog(LAtestTab.this);
                    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                    /*dialog.getWindow().setBackgroundDrawableResource(R.drawable.alert_box);*/
                    dialog.setContentView(R.layout.alertbox);

                    ImageView yes = (ImageView) dialog.findViewById(R.id.yesbtn);
                    ImageView no = (ImageView) dialog.findViewById(R.id.nobtn);
                    dialog.show();

                    yes.setOnClickListener(new OnClickListener()
                    {
                        @Override
                        public void onClick(View v) 
                        {
                                                            if(isFinish){
                                Intent intent = new Intent(context,MadhuriHomeScreen.class);
                                startActivity(intent);
                                overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);
                                finish();
                            }else{
                                finish();
                            }
                        }
                    });

                    no.setOnClickListener(new OnClickListener()
                    {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            dialog.dismiss();  
                        }
                    });

                }
                else{
                    finish();
                }
            }
        });

    }

    class MyAsyncTask extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> > {

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(
                String... params) {
            // TODO Auto-generated method stub
            int count;
            mylist = new ArrayList<HashMap<String, String>>();
            contentList=new ArrayList<String>();
            slugList=new ArrayList<String>();
            /*json = new JSONObject();*/
            json = JSONfunctions.getJSONfromURL(latestUrl);

            try{

                URL url = new URL(params[0]);
                URLConnection connection = url.openConnection();
                connection.connect();

                // getting file length
                int lenghtOfFile = connection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(), 8192);

                // Output stream to write file
                FileOutputStream output = new FileOutputStream("/sdcard/MadhuriLatest.txt");

                byte data[] = new byte[1024];

                long total = 0;
                while (   ((count = input.read(data)) != -1)  ) {
                    total += count;

                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    /*  publishProgress(""+(int)((total*100)/lenghtOfFile));
                     */
                    // writing data to file
                    output.write(data, 0, count);
                }

                output.flush();
                // closing streams
                output.close();
                input.close();

                latest = json.getJSONArray("posts");
                imgLinks.clear();
                for(int i=0;i<latest.length();i++){ 

                    HashMap<String, String> map = new HashMap<String, String>();    
                    JSONObject e = latest.getJSONObject(i);

                    String name = e.getString("title_plain");
                    String content = e.getString("content");

                    attachment = e.getJSONArray("attachments");
                    for(int p=0; p<attachment.length();p++){
                        obj = attachment.getJSONObject(p);
                        img = obj.getJSONObject("images");
                        thumb = img.getJSONObject("thumbnail");
                        imgStr = thumb.getString("url");
                    }

                    Log.d("--------------",imgStr);
                    contentList.add(content);
                    String chng = "&#8211;";

                    String  fnl_Str = name.replace(chng, "");
                    String slug = e.getString("slug");

                    slugList.add(slug);
                    latestData.add(fnl_Str);
                    imgLinks.add(imgStr);

                    map.put("id",  String.valueOf(i));
                    map.put("name", fnl_Str);
                    map.put("date", e.getString("date"));

                    mylist.add(map);            
                }

            }catch(ConnectionClosedException con){
                Toast.makeText(context, "Connextion Closed", Toast.LENGTH_SHORT).show();
            }catch(ConnectTimeoutException timeOut){
                Toast.makeText(context, "Connextion Time out", Toast.LENGTH_SHORT).show();
                Log.d("******************", "connection time out");
            }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            catch (Exception e){
                Log.e("Error: ", " "+e.getMessage());
            }

            return mylist;
        }

        @Override
        protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

            showProgress.setVisibility(View.GONE);

            lazyAdapter = new LazyAdapter(context, imgLinks, latestData);
            listView.setAdapter(lazyAdapter);
            lazyAdapter.notifyDataSetChanged();

            listView.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              

                    Intent intent=new Intent(context,WebViewActivity.class);
                    intent.putExtra("content", contentList.get(position));
                    intent.putExtra("shareUrl", shareUrl+slugList.get(position));
                    intent.putExtra("tab_value", 1);
                    startActivity(intent);
                    overridePendingTransition(R.anim.lefttorightslide,R.anim.righttoleftslide);

                }
            });

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            showProgress.setVisibility(View.VISIBLE);
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub

            super.onProgressUpdate(values);
            showProgress.setVisibility(View.VISIBLE);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_latest_tab, menu);
        return true;
    }

    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub

        if(isFinish){
            Intent intent = new Intent(context,MadhuriHomeScreen.class);
            startActivity(intent);
            overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);

            finish();
        }else{
            super.onBackPressed();
            overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);

        }

    }

} 
```

这是LogTrace ..

```
12-17 13:00:36.964: E/WindowManager(9512): Activity com.phonethics.example.LatestTab has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2c444278 that was originally added here
12-17 13:00:36.964: E/WindowManager(9512): android.view.WindowLeaked: Activity com.phonethics.madhuridixitnene.DanceTab has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2c444278 that was originally added here
12-17 13:00:36.964: E/WindowManager(9512):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
12-17 13:00:36.964: E/WindowManager(9512):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
12-17 13:00:36.964: E/WindowManager(9512):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
12-17 13:00:36.964: E/WindowManager(9512):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
12-17 13:00:36.964: E/WindowManager(9512):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
12-17 13:00:36.964: E/WindowManager(9512):  at android.app.Dialog.show(Dialog.java:278)
12-17 13:00:36.964: E/WindowManager(9512):  at com.phonethics.example.LatestTab.onClick(LatestTab.java:243)
12-17 13:00:36.964: E/WindowManager(9512):  at android.view.View.performClick(View.java:3534)
12-17 13:00:36.964: E/WindowManager(9512):  at android.view.View$PerformClick.run(View.java:14263)
12-17 13:00:36.964: E/WindowManager(9512):  at android.os.Handler.handleCallback(Handler.java:605)
12-17 13:00:36.964: E/WindowManager(9512):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-17 13:00:36.964: E/WindowManager(9512):  at android.os.Looper.loop(Looper.java:137)
12-17 13:00:36.964: E/WindowManager(9512):  at android.app.ActivityThread.main(ActivityThread.java:4441)
12-17 13:00:36.964: E/WindowManager(9512):  at java.lang.reflect.Method.invokeNative(Native Method)
12-17 13:00:36.964: E/WindowManager(9512):  at java.lang.reflect.Method.invoke(Method.java:511)
12-17 13:00:36.964: E/WindowManager(9512):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-17 13:00:36.964: E/WindowManager(9512):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-17 13:00:36.964: E/WindowManager(9512):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:47:25.010

点击是按钮试试这个。我认为它解决了你的问题

```
yes.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if(isFinish){
            dialog.dismiss();
            dialog=null;
            Intent intent = new Intent(context,MadhuriHomeScreen.class);
            startActivity(intent);
            overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);
            finish();
        } else {
            finish();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:47:32.023

您必须在完成活动之前关闭对话框。

```
yes.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if(isFinish){
           dialog.dismiss();  
           Intent intent = new Intent(context,MadhuriHomeScreen.class);
           startActivity(intent);
           overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);
           finish();
       }else{
           dialog.dismiss();  
           finish();
       }
   }
}); 
```

我希望它会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:47:52.810

退出创建对话框的活动时，您必须关闭对话框。

所以，点击是按钮调用

```
dialog.dismiss(); 
```

然后调用

```
Intent intent = new Intent(context,MadhuriHomeScreen.class);
startActivity(intent); 

overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);
finish(); 
```

不仅是这种情况，而且当您离开当前活动时，请关闭对话框。

# spring - 使用 Hibernate 4 时停止 tomcat 7 服务器的错误

> ID：13910046
> 
> 赞同：5
> 
> 时间：2012-12-17T07:35:47.653
> 
> 标签：spring, hibernate, spring-mvc, tomcat7, hibernate-4.x

我们在 Spring 应用程序中使用了 Hibernate jars。数据持久性由 Java Persistence API 使用 EntityManagerFactory 通过上下文 xml 注入来完成。

当我们切换到 Hibernate 4 时，应用程序在部署到 tomcat 7 时并没有停止。以下是错误。

```
SEVERE: A child container failed during stop
    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to stop component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/applicationName]
        at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
        at java.util.concurrent.FutureTask.get(Unknown Source)
        at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:1179)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1575)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1564)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
    Caused by: org.apache.catalina.LifecycleException: Failed to stop component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/applicationName]
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:236)
                ... 7 more
    Caused by: org.hibernate.HibernateException: registry does not contain entity manager factory: persistence-unit-name
        at org.hibernate.ejb.internal.EntityManagerFactoryRegistry.removeEntityManagerFactory(EntityManagerFactoryRegistry.java:117)
        at org.hibernate.ejb.EntityManagerFactoryImpl.close(EntityManagerFactoryImpl.java:195) 
```

任何人都可以提出停止tomcat的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:45:45.710

You're going to have to post more than just the stacktrace. I would imagine this is stemming from your injection of your EntityManager into one of your beans. Could you post a sample of one of your beans showing your injection?

Should be similar to:

**Config**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:task="http://www.springframework.org/schema/task"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/jee     http://www.springframework.org/schema/jee/spring-jee.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
                           http://www.springframework.org/schema/task    http://www.springframework.org/schema/task/spring-task.xsd
                           http://www.springframework.org/schema/tx      http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">
    <context:annotation-config />

    <context:component-scan base-package="com.company.app.dao" />
    <context:component-scan base-package="com.company.app.service" />

    <task:executor id="taskExecutor" pool-size="5" />
    <task:scheduler id="taskScheduler" pool-size="5" />
    <task:annotation-driven executor="taskScheduler"
                            scheduler="taskScheduler" />

    <jee:jndi-lookup id="dataSource"
                     jndi-name="jdbc/Test" />

    <bean id="jpaDialect"
          class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />

    <bean id="jpaAdapter"
          class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />

    <bean id="entityManager" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource"       ref="dataSource" />
        <property name="jpaVendorAdapter" ref="jpaAdapter" />
        <property name="jpaDialect"       ref="jpaDialect" />
        <property name="packagesToScan" value="com.company.app.model" />
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager"
          p:entityManagerFactory-ref="entityManager" />

    <tx:annotation-driven />
</beans> 
```

**DAO**

```
import com.company.app.model.Job;
import com.company.app.model.JobState;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.criteria.CriteriaBuilder;
import javax.persistence.criteria.CriteriaQuery;
import javax.persistence.criteria.Root;
import java.util.HashSet;
import java.util.Set;
import java.util.UUID;

@Repository
public class JobDao {
    @PersistenceContext
    private EntityManager em;

    @Transactional(propagation = Propagation.REQUIRED)
    public void create(Job job) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Set<Job> readAll() {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Job readById(UUID id) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Set<Job> readByState(JobState state) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public void update(Job job) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public void delete(Job job) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T08:45:26.660

您收到 HibernateException 的一个原因可能是您的应用程序已在 Spring 实际创建的 EntityManagerFactory 上显式调用 close()。

当 Spring 销毁 EntityManagerFactory 的 bean 时，它会在其上调用 close()。Hibernate 在内部维护 EntityManagerFactory 实例的注册表。当 EntityManagerFactory 关闭时，它会从注册表中删除。因此，当 Spring 尝试关闭您的应用程序已经关闭的同一个 EntityManagerFactory 时，Hibernate 会报告它在注册表中找不到它。

# ios - UIView 翻转过渡不起作用

> ID：13910047
> 
> 赞同：0
> 
> 时间：2012-12-17T07:35:49.513
> 
> 标签：ios, uiview, transition, viewflipper

最近我正在做一些类似翻转卡的项目。我在视图控制器中有两个子视图，我想通过单击按钮来翻转子视图。我现在可以实现的是整个视图都在翻转，但我只想要子视图=（请让我知道我的代码有什么问题.....；（谢谢大家

```
- (void)test: (id)sender{
[UIView transitionFromView:firstView
                    toView:secondView
                  duration:0.5f
                   options:UIViewAnimationOptionTransitionFlipFromRight
                completion:^(BOOL finished){
                    /* do something on animation completion */
                }];

}

- (void)viewDidLoad
{
   [super viewDidLoad];
   firstView = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 250, 250)];
   secondView = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 250, 250)];
   firstView.backgroundColor = [UIColor redColor];
   secondView.backgroundColor = [UIColor blueColor];
   UIButton* button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
   button.frame = CGRectMake(0, 0, 25, 25);
   [button addTarget:self action:@selector(test:)forControlEvents:UIControlEventTouchUpInside];
   [self.view addSubview:button];
   [self.view addSubview:secondView];
   [self.view addSubview:firstView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:58:42.643

将另一个视图（我称之为容器）添加到 self.view，并将 firstView 添加到该视图，而不是直接添加到 self.view。您根本不需要添加第二个视图 - 过渡会为您完成。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIView *container = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 250, 250)];
    firstView = [[UIView alloc] initWithFrame:CGRectMake(0,0, 250, 250)];
    secondView = [[UIView alloc] initWithFrame:CGRectMake(0,0, 250, 250)];
    firstView.backgroundColor = [UIColor redColor];
    secondView.backgroundColor = [UIColor blueColor];
    UIButton* button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(0, 0, 25, 25);
    [button addTarget:self action:@selector(test:)forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];
    [container addSubview:firstView];
    [self.view addSubview:container];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:18:41.050

我建议创建一个 UIView 子类（如前面提到的容器），它有两个属性：firstView 和 secondView。然后在该子类中实现一个“翻转”方法，如下所示：

```
- (void)flip
{
    [UIView transitionFromView:_firstView toView:_secondView ...];
} 
```

The reason why whole view is being flipped is because "transitionFromView" looks for a view where it is being called, and does animation there. In your case it is called in viewcontroller, so whole of your view is being flipped. You have to call it in subview, if you want only particular view to be animated.

# java - 按值排序地图

> ID：13910056
> 
> 赞同：2
> 
> 时间：2012-12-17T07:36:56.910
> 
> 标签：java, arrays, sorting, map, hashmap

> **可能重复：**
> [TreeMap 按值排序](https://stackoverflow.com/questions/2864840/treemap-sort-by-value)

请看下面的代码

```
import java.util.HashMap;
import java.util.Map;

public class Mapper
{
    Map mMap;

    public Mapper()
    {
        mMap = new HashMap();
        mMap.put("A",1);
        mMap.put("B",2);
        mMap.put("C",3);
        mMap.put("D",4);
        mMap.put("E",5);
        mMap.put("F",6);

    }
} 
```

如您所见，地图包含 2 种类型的数据。现在我需要按值对其进行排序，如果可能的话，最好按降序排序，否则没问题，正常排序。但是，你知道像下面这样的事情是不可能的

```
Map<String, int> treeMap = new TreeMap<String, int>(mMap); 
```

那么，我该如何排序呢？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:42:50.263

```
Map<String, Integer> mMap = new HashMap<String, Integer>();
        mMap.put("A",1);
        mMap.put("B",2);
        mMap.put("C",3);
        mMap.put("D",4);
        mMap.put("E",5);
        mMap.put("F",6);

private static Map sortByComparator(Map unsortMap) {

        List list = new LinkedList(unsortMap.entrySet());

        // sort list based on comparator
        Collections.sort(list, new Comparator() {
            public int compare(Object o1, Object o2) {
                return ((Comparable) ((Map.Entry) (o1)).getValue())
                                       .compareTo(((Map.Entry) (o2)).getValue());
            }
        });

        Map sortedMap = new LinkedHashMap();
        for (Iterator it = list.iterator(); it.hasNext();) {
            Map.Entry entry = (Map.Entry) it.next();
            sortedMap.put(entry.getKey(), entry.getValue());
        }
        return sortedMap;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:47:25.727

如果要按键排序，请使用 TreeMap。

如果您希望按值对地图进行排序，请创建按值排序的键列表。

您需要一个 Comparator 通过比较相应的值来对键进行排序。

```
public static <K, V extends Comparable<? super V>> List<K> getKeysSortedByValue(Map<K, V> map) {
    final int size = map.size();
    final List<Map.Entry<K, V>> list = new ArrayList<Map.Entry<K, V>>(size);
    list.addAll(map.entrySet());
    final ValueComparator<V> cmp = new ValueComparator<V>();
    Collections.sort(list, cmp);
    final List<K> keys = new ArrayList<K>(size);
    for (int i = 0; i < size; i++) {
        keys.set(i, list.get(i).getKey());
    }
    return keys;
}

private static final class ValueComparator<V extends Comparable<? super V>>
                                     implements Comparator<Map.Entry<?, V>> {
    public int compare(Map.Entry<?, V> o1, Map.Entry<?, V> o2) {
        return o1.getValue().compareTo(o2.getValue());
    }
} 
```

# android - androidscrollview 上下边框空间问题

> ID：13910057
> 
> 赞同：0
> 
> 时间：2012-12-17T07:37:01.447
> 
> 标签：android, layout, scrollview

我的布局是这样的，结果图像如下

```
<RelativeLayout
  android:id="@+id/gamelobby"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:background="@drawable/gamelobby_bg" >

  <TextView
      android:id="@+id/banner"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="@drawable/banner"
      android:gravity="center"
      android:typeface="serif"
      android:textColor="#e3ab15"
      android:text="My Banner"
      android:textSize="22sp"/>
   //my other layout
</RelativeLayout>
</ScrollView> 
```

![在此处输入图像描述](../Images/2ff7289f49db29403bc4793c5b78d0fa.png)

这里的背景不是图像，它是一个可绘制的形状，其 xml 代码如下所示：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item>
    <shape>
      <gradient
        android:angle="45"
        android:startColor="#523c00"
        android:endColor="#100c00"
        android:type="linear" />
    </shape>
  </item>
</selector> 
```

如您所见，顶部屏幕和横幅之间以及右侧横幅和屏幕之间存在间隙。我想删除那些。我搜索了很多，也尝试了很多方法，但都不起作用。任何帮助！！！！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:56:33.760

可能对你有帮助。android:layout_marginTop="-5dip" 和 android:layout_marginLeft="-10dip"

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gamelobby"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/ic_launcher" 
android:layout_marginTop="-2dip"
android:layout_marginLeft="-10dip">
<TextView
  android:id="@+id/banner"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:background="@drawable/ic_launcher"
  android:gravity="center"
  android:text="My Banner"
  android:textColor="#e3ab15"
  android:textSize="22sp"
  android:typeface="serif" />

  //my other layout
 </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:46:22.923

尝试将 layout_margin 和 layout_padding 都设置为“0dp”。我的猜测是您正在从应用程序的主题中获取一些样式。

# windows - 如何从 cmd.exe (Windows XP) 运行程序？

> ID：13910060
> 
> 赞同：1
> 
> 时间：2012-12-17T07:37:25.133
> 
> 标签：windows, cmd

我有时需要从 cmd.exe 运行程序。仅当此程序存在于`C:\WINDOWS\system32`.

所以我只是将文件复制`.exe`到这个文件夹中，直到现在它仍然有效（适用于 Python 和一两个其他应用程序）。但是，我认为这不是正确的方法。当我尝试这个时`php.exe`，我得到一个错误说一些`.dll was not found`。我怀疑它与相对路径有关。

谁能指出正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:45:28.543

根据您的 Windows 版本，您必须找到“环境变量”按钮（在 Windows 7 中，位于“我的电脑”上下文菜单中“属性”内的“高级系统设置”上）；在“系统变量”中应该有一个名为`PATH`. 您可以对其进行编辑并添加要包含的路径，并用`;`. 然后重新启动，它应该可以工作。

通过这种方式，您可以将这些路径包含在`cmd.exe`搜索命令的目录集中。在您的示例中，问题是`php.exe`找到了（因为您在`System32`其中复制了它`PATH`），但`.dll`文件仍在 php 的安装目录中，因此您需要从该目录运行程序或更新您的`PATH`包含.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:48:19.353

您必须移动到包含可执行文件的目录，指定完整路径或将目录添加到 PATH 变量。例如：

更改目录，然后运行：

```
cd C:\MyOtherApp\
programfile.exe 
```

使用完整路径运行文件：

```
C:\MyOtherApp\programfile.exe 
```

或添加到路径：

右键单击我的电脑，然后转到属性选择高级选项卡并转到环境变量。找到一个 PATH 并将您的文件夹添加到其中，用分号 (;) 分隔，例如：

```
[someotherpathsgoesfirst];C:\MyOtherApp\ 
```

[您可以在http://support.microsoft.com/kb/310519/en-us](http://support.microsoft.com/kb/310519/en-us)上阅读有关环境变量的更多信息，特别是在[http://www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)上有关 PATH 环境变量的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:44:19.920

您收到该错误是因为 dll 必须与 .exe 位于同一目录中。运行 exe 的正确方法是浏览到它的目录并从那里运行它。您可以使用“cd 目录”设置新目录，例如：C:\Windows\system32>cd C:\users 将新的活动目录设置为“C:\users”。您可以使用“cd ..”向上一个目录，您可以键入“dir”来获取当前活动目录中的项目列表。我希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T07:45:46.323

当您使用非完整路径时，Windows 会搜索一个名为 PATH 的环境变量。

换句话说， C:\Windows\System32 在 PATH 中，这就是搜索它的原因。将可执行文件移到那里是错误的。导航到可执行文件 ( `cd \path\to\folder`)，或将目录添加到 PATH。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T07:45:55.070

您可能希望将`.exe`文件的路径添加到 PATH 环境变量中。

您可以查看[http://www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)了解详情。

# iis - 在控制台上查看 IIS 日志

> ID：13910074
> 
> 赞同：1
> 
> 时间：2012-12-17T07:39:04.190
> 
> 标签：iis, iis-7

有没有办法像查看 iisexpres.exe 日志一样查看 IIS 日志？我的意思是实时的，在控制台上？问题中最重要的部分当然是“实时”，因为 IIS 缓存日志内容并定期刷新。

米。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:29:44.373

答案实际上取决于您要实现的具体目标，是出于开发目的还是更多用途。没有简单的方法可以实时查看“日志”。但是，我可以想到几个选项：

1.  您可以使用[LogParser](http://www.microsoft.com/en-us/download/details.aspx?id=24659)在命令行中解析日志并使用“netsh http flush logbuffer”强制将日志刷新到文件中。
2.  您可以使用 ETW 跟踪来读取 IIS 跟踪
3.  您可以使用[高级日志记录模块](http://www.iis.net/downloads/microsoft/advanced-logging)并利用它来消费实时事件。

# user-controls - ASP.Net MVC：几乎所有页面都使用的下拉菜单

> ID：13910076
> 
> 赞同：0
> 
> 时间：2012-12-17T07:39:13.287
> 
> 标签：user-controls, asp.net-mvc-4

我正在使用来自数据库的大多数添加/编辑页面中的用户下拉列表。现在，在所有操作中，我将用户放入视图包并在视图中创建下拉列表。这是正确的方法吗？有人可以以一种我可以调用一个用户控件的方式帮助我，并使用正确的名称和值创建下拉列表。或者有人可以建议什么是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:24:28.903

您应该做的是创建一个基本 ViewModel 类，其中包含下拉列表的值。比让所有其他 ViewModel 从基类继承。

比创建一个填充 DropdownMenu 项目列表的 ActionFilter。_Layout 视图中应该有下拉菜单。

[这是一个有效的解决方案](https://stackoverflow.com/questions/13670643/adding-value-to-base-class-property-in-actionfilter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:02:12.000

我正在使用非常基本的样式...我有一个 actionresult 它将下拉项目描述和项目 ID 作为 json 返回...并且我在需要它的所有视图中使用相同...

```
 $(document).ready(function () {
        $.getJSON("@Url.Content("~/contoller/ActionName")", null, function (records) {
                    for (i = 0; i < records.length; i++) {
                        $('#selection_code').append($('<option></option>').text(records[i].Product_Description).attr('ID', records[i].Product_Type_ID));
                    }
                });
}); 
```

selection_code 是我的下拉列表的 id

.. 这也可以通过添加局部视图并将其附加到视图中的 div 来完成，这样当使用局部视图时，我们就可以获得下拉列表！！！

# android - 如何通过 Android 的 ant 构建脚本运行单个测试用例？

> ID：13910077
> 
> 赞同：3
> 
> 时间：2012-12-17T07:39:20.503
> 
> 标签：android, testing, ant, functional-testing

Android 的标准完全支持通过目标`build.xml`在设备和模拟器上执行功能测试用例。`test`但是这个目标总是执行一个测试项目中的所有测试用例；出于调试原因，我如何指示它只运行一个测试用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:13:25.853

您可以使用`adb shell "start instrument -w -e class package_name/class_name package_name/android.test.InstrumentationTestRunner"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:59:27.877

我创建了自己的目标，`custom_rules.xml`从 user674199 的回答中抽象了一点：

```
<target name="test-single" depends="-test-project-check" description="Runs a single test case, given with -DclassToTest=package.path.to.Class">
    <run-tests-helper>
        <extra-instrument-args>
            <arg value="-e" />
               <arg value="class" />
               <arg value="${classToTest}" />
        </extra-instrument-args>
    </run-tests-helper>
</target> 
```

这很好地满足了我的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T06:42:53.087

托马斯的回答有点过时，或者因为错误而无法正常工作：

```
testSingle:
     [echo] Running tests ...
     [exec] /system/bin/sh: ${test.runner}: bad substitution 
```

如果您`test`在 Android SDK 中看到原始目标，`build.xml`您会看到之前设置了一些其他必需的属性，所以这对我来说是一个工作目标：

```
<!-- custom test target to perform specific test only -->
<target
    name="testSingle"
    depends="-test-project-check"
    description="Runs a single test case, given with -DtestClass=package.path.to.Class">

     <property name="test.runner" value="android.test.InstrumentationTestRunner" />
     <property name="tested.project.absolute.dir" location="${tested.project.dir}" />

    <!-- Application package of the tested project extracted from its manifest file -->
     <xpath input="${tested.project.absolute.dir}/AndroidManifest.xml"
             expression="/manifest/@package" output="tested.project.app.package" />

    <run-tests-helper>
        <extra-instrument-args>
           <arg value="-e" />
             <arg value="class" />
              <arg value="${testClass}" />
        </extra-instrument-args>
    </run-tests-helper>
</target> 
```

这是我的运行方式：

> 蚂蚁仪器testSingle -DtestClass=com.company.tests.SomeTest

`com.company.tests.SomeTest`完整的测试类名称在哪里。

# bash - 用于捕获进程 ID 并在存在时将其终止的 Shell 脚本

> ID：13910087
> 
> 赞同：76
> 
> 时间：2012-12-17T07:40:02.713
> 
> 标签：bash, shell, scripting

我试过这段代码，但它不工作

```
#!/bin/sh

#Find the Process ID for syncapp running instance

PID=`ps -ef | grep syncapp 'awk {print $2}'`

if [[ -z "$PID" ]] then
Kill -9 PID
fi 
```

它在 awk 附近显示错误。

请有任何建议。

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-04-09T08:16:49.437

实际上，最简单的方法是传递如下 kill 参数：

```
ps -ef | grep your_process_name | grep -v grep | awk '{print $2}' | xargs kill 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-12-04T20:00:01.717

这对我很有用。

```
PID=`ps -eaf | grep 同步应用程序 | grep -v grep | awk '{打印 $2}'`
如果 [[ "" != "$PID" ]]; 然后
  回声“杀死$PID”
  杀死 -9 $PID
菲

```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-05-26T10:14:24.890

我`pkill`为此使用命令：

```
NAME
       pgrep, pkill - look up or signal processes based on name and 
       other attributes

SYNOPSIS
       pgrep [options] pattern
       pkill [options] pattern

DESCRIPTION
       pgrep looks through the currently running processes and lists 
       the process IDs which match the selection criteria to stdout.
       All the criteria have to match.  For example,

              $ pgrep -u root sshd

       will only list the processes called sshd AND owned by root.
       On the other hand,

              $ pgrep -u root,daemon

       will list the processes owned by root OR daemon.

       pkill will send the specified signal (by default SIGTERM) 
       to each process instead of listing them on stdout. 
```

如果您的代码通过解释器（java、python、...）运行，那么进程的名称就是解释器的名称。您需要使用参数--full。这与命令名称和参数匹配。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-17T07:46:01.367

你可能想写

```
`ps -ef | grep syncapp | awk '{print $2}'` 
```

但我会赞同@PaulR 的回答 -`killall -9 syncapp`是一个更好的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-02T14:04:17.810

[许多 *NIX 系统还具有pkill(1)](http://linux.die.net/man/1/pkill)和[killall(1)](http://linux.die.net/man/1/killall)中的一个或两个，它们允许您按名称杀死进程。使用它们，您可以避免整个解析`ps`问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-08T12:21:44.343

这应该会杀死与您被允许杀死的 grep 匹配的所有进程。

*-9 表示“杀死所有可以杀死的进程”。*

```
kill -9 $(ps -ef | grep [s]yncapp | awk '{print $2}') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-06T09:22:31.363

在某个地方遇到过..认为它简单而有用

可以直接在 crontab 中使用命令，

```
* * * * * ps -lf | grep "user" |  perl -ane '($h,$m,$s) = split /:/,$F
+[13]; kill 9, $F[3] if ($h > 1);' 
```

或者，我们可以将其编写为 shell 脚本，

```
#!/bin/sh
# longprockill.sh
ps -lf | grep "user" |  perl -ane '($h,$m,$s) = split /:/,$F[13]; kill
+ 9, $F[3] if ($h > 1);' 
```

并像这样称呼它为crontab，

```
* * * * * longprockill.sh 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-18T20:00:14.580

```
#!/bin/sh

#Find the Process ID for syncapp running instance

PID=`ps -ef | grep syncapp 'awk {print $2}'`

if [[ -z "$PID" ]] then
--->    Kill -9 PID
fi 
```

不确定这是否有帮助，但“kill”的拼写不正确。是大写的。

尝试“杀死”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-08T09:10:35.913

```
Kill -9 PID 
```

应该

```
kill -9 $PID 
```

看到不同？

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-03-12T22:39:45.943

尝试以下脚本：

```
#!/bin/bash
pgrep $1 2>&1 > /dev/null
if [ $? -eq 0 ]
then
{
    echo " "$1" PROCESS RUNNING "
    ps -ef | grep $1 | grep -v grep | awk '{print $2}'| xargs kill -9
}
else
{
    echo "  NO $1 PROCESS RUNNING"
};fi 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-10-02T13:35:42.103

```
PID=`ps -ef | grep syncapp 'awk {print $2}'`

if [[ -z "$PID" ]] then
**Kill -9 $PID**
fi 
```

# ruby-on-rails - 从 ms word 打开链接

> ID：13910089
> 
> 赞同：0
> 
> 时间：2012-12-17T07:40:11.223
> 
> 标签：ruby-on-rails, redirect, devise

我们有一个由 rails 3.1.8 开发的工具，可以将产品信息导出到 ms word，如果产品线有一些更新，产品所有者可以单击 word 中的链接在我们的应用程序中编辑产品详细信息。

**问题是：当我们点击word中的链接时，它会转到主页而不是编辑页面。**

所以我们使用 devise 在路由中执行身份验证：

```
devise_for :users do
  get "login" => "devise/sessions#new"
  get "logout" => "devise/sessions#destroy"
end 
```

开发日志记录：

```
Started GET "/products/24/edit" for 10.237.133.26 at 2012-12-17 15:24:49 +0800
  Processing by ProductsController#edit as */*
  Parameters: {"id"=>"24"}
Completed   in 4ms

Session: {"as:products"=>{:list=>{}}, "input_device_type"=>"MOUSE", "hover_supported"=>true, "user_return_to"=>"/products/24/edit", "flash"=>#<ActionDispatch::Flash::FlashHash:0x00000006c80540 @used=#<Set: {}>, @closed=false, @flashes={:alert=>"You need to sign in or sign up before continuing."}, @now=nil>, "_csrf_token"=>"xvfpiA69SZas+iHoCy5NQRMOifXtomG3RoLaYvPQsSw="}

Started GET "/users/sign_in" for 10.237.133.26 at 2012-12-17 15:24:49 +0800
 Processing by Devise::SessionsController#new as */*
Rendered devise/shared/_links.erb (0.1ms)
Rendered devise/sessions/new.html.erb within layouts/activescaffold (3.3ms)
Rendered layouts/_header.html.erb (50.0ms)
Rendered layouts/_menu.html.erb (3.4ms)
Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 91ms (Views: 62.7ms | ActiveRecord: 3.3ms)

Started GET "/users/sign_in" for 10.237.133.26 at 2012-12-17 15:24:50 +0800
  Processing by Devise::SessionsController#new as HTML
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 15 LIMIT 1
Redirected to http:// localhost:30033/
Completed 302 Found in 33ms

Session: {"input_device_type"=>"MOUSE", "hover_supported"=>true, "_csrf_token"=>"Pa8zGbsbms4EwRUO4G7MyJFv7ztKe33WICeY7qpYgeQ=", "warden.user.user.key"=>["User", [15], nil], "flash"=>#<ActionDispatch::Flash::FlashHash:0x00000006fec508 @used=#<Set: {}>, @closed=false, @flashes={:alert=>"You are already signed in."}, @now=nil>}

Started GET "/" for 10.237.133.26 at 2012-12-17 15:24:51 +0800
  Processing by WelcomeController#index as HTML
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 15 LIMIT 1
Rendered welcome/index.html.erb within layouts/application (0.0ms)
Rendered layouts/_header.html.erb (3.8ms)
Rendered layouts/_menu.html.erb (3.6ms)
Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 45ms (Views: 14.0ms | ActiveRecord: 4.3ms) 
```

有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:00:20.150

Microsoft Office 有自己的机制来识别链接（即协议发现）。

这需要在 Rails 中以不同方式处理。MS office 使用 OPTIONS http 方法发出请求，然后一直到第一个 200 响应，然后在浏览器窗口中打开相同的 url（在您的情况下为重定向的 url）。

在这里，Devise 会跟踪 session 中的 requested_url，但浏览器会使用登录 url 启动新会话，因此 devise 无法将其重定向回 ms doc 中的链接点击。

这是处理此案的一个很好的解决方案 [http://rails.nuvvo.com/lesson/2318-dealing-with-microsoft-office-protocol-discovery-in-rails](http://rails.nuvvo.com/lesson/2318-dealing-with-microsoft-office-protocol-discovery-in-rails)

# java - 可以在不重建的情况下更改 Android APK 文件中的资源吗？

> ID：13910090
> 
> 赞同：7
> 
> 时间：2012-12-17T07:40:14.560
> 
> 标签：java, android, apk

在我的 android 应用程序中，我只需要在属性文件中进行一些小的更改。

例如：

在我的属性文件中，有针对特定客户的欢迎消息。所以，我必须在我的应用程序中只更改客户端名称。

但问题是，我必须在源代码中这样做，然后每次都必须为每个客户构建。

有什么方法可以直接在**.apk**文件中更改它，而无需再次创建构建。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T07:48:33.580

为此，您必须解压缩打包的 APK，并找到要更改的字符串。该字符串可能已被编码或转换为字节码（Java 字符串）或二进制格式（XML 字符串）。您需要弄清楚这是否已经完成，以及新字符串的外观。然后，您需要获取要替换它的字符串，并在交换它们之前以相同的方式对其进行编码。

完成所有这些后，您必须重新压缩应用程序并运行签名工具并手动压缩对齐，然后才能再次以 apk 格式使用。

坦率地说，这样做比重新编译应用程序需要更长的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:16:18.547

由于您拥有源代码，因此解压缩和重建 APK 似乎是在浪费时间。您应该在原始构建过程中解决此问题。

如果您使用 Eclipse 手动构建 APK 包，那么您应该考虑设置一些自动构建系统（Ant、Maven 等）并提供客户端名称作为构建脚本的参数。

如果您已经在使用 Ant 或 Maven，那么这些工具已经提供了在编译之前将文本文件中的标记替换为属性值的方法。请告诉我们更多有关您的构建环境的信息，以便我们给出更准确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:47:20.130

使用[Android APK 工具](https://ibotpeaches.github.io/Apktool/)。

引用描述

> 它是一个用于逆向工程第三方、封闭、二进制 Android 应用程序的工具。它可以将资源解码为几乎原始的形式，并在进行一些修改后重建它们；

# c# - 为什么从其他表单调用方法时控件不更新

> ID：13910093
> 
> 赞同：0
> 
> 时间：2012-12-17T07:40:20.443
> 
> 标签：c#, winforms

当我从另一个调用方法时，我的`TextBox`和`Label` `Text`属性不会更新`Form`？

这是代码

```
//Form1 Codes
private void treeView1_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    Form2 frm= new Form2 ();
    frm.UpdateText(this.treeView1.SelectedNode.Text.ToString());
    this.Close();
}

//Form2 codes
//show Form1
private void Button1_Click(object sender, EventArgs e)
{
    Form1 Frm = new Form1();
    Frm.ShowDialog();
}

//update Textbox and lable
public void UpdateText(string text)
{
    this.label1.Text = text;
    textBox1.Text = text;
    label1.Refresh();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:16:25.660

您正在创建Form2 的**新实例**（对客户端不可见，因为您没有显示它）并更新它的标签。您需要更新 Form2 现有实例上的标签。因此，您需要将 Form2 的实例传递给您在 Button1_Click 事件处理程序中创建的 Form1。或者（更好的方法）您需要在 Form1 上定义属性并在 Form1 关闭时读取该属性：

Form1 代码

```
public string SelectedValue 
{ 
     get { return treeView1.SelectedNode.Text; }
}    

void treeView1_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
     // this means that user clicked on tree view
     DialogResult = DialogResult.OK;
     Close();
} 
```

Form2 代码

```
private void Button1_Click(object sender, EventArgs e)
{
    using(Form1 frm1 = new Form1())
    {
       if(frm1.ShowDialog() != DialogResult.OK)
          return;

       UpdateText(frm1.SelectedValue);
    }
}

public void UpdateText(string text)
{
    label1.Text = text;
    textBox1.Text = text;
    label1.Refresh();
} 
```

# jquery - QWebView 中的异步 JQuery 请求以加载 XML

> ID：13910095
> 
> 赞同：0
> 
> 时间：2012-12-17T07:40:36.030
> 
> 标签：jquery, ajax, qt, asynchronous, qwebview

该线程遵循我关于[如何在 Qt 可执行文件中嵌入 Web 应用程序的](https://stackoverflow.com/questions/13864465/embed-web-application-as-a-resource-into-c-qt-executable)问题。

我的 Web 应用程序是基于 JQuery 的应用程序，在将其嵌入 Qt 时*我不会对其进行修改。*

[`$.ajax(url [, settings])`](http://api.jquery.com/jQuery.ajax/)在这个应用程序中，我使用该函数异步加载一个 XML 文档。

由于 XML 文件是 Qt 程序的一部分，因此没有 HTTP 服务器来返回该文件。所以看起来ajax请求失败了。

有什么办法可以绕过这个问题吗？

**编辑**

实际上，XML 文件似乎已加载。但是 [ `$.ajax(url [, settings])`] 调用了`error(jqXHR, textStatus, errorThrown)`。

`jqXHR`包含 XML 文档，`textStatus`等于`error`且`errorThrown`为空...

**解决方案**

我终于找到了解决方案：[Read local file from QWebView using Ajax request](https://stackoverflow.com/a/14315897/902025)。希望这可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:00:52.627

我认为 JQuery 和 QWebKit 之间存在一些不兼容问题。

我终于设法使用标准 API 进行 ajax 请求：[XMLHttpRequest](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)。但我没有设法用 JQuery 做到这一点。

# mongodb - Mongodb 中的 explain()：“nscanned”和“nscannedObjects”之间的区别

> ID：13910097
> 
> 赞同：24
> 
> 时间：2012-12-17T07:40:49.873
> 
> 标签：mongodb

我无法在 Mongodb 的解释查询输出中得到“nscanned”和“nscannedObjects”之间的确切区别。

在[MongoDB Explain 文档](http://www.mongodb.org/display/DOCS/Explain)中，我可以阅读：

> **nscanned**检查的项目数（文档或索引条目）。项目可能是对象或索引键。如果涉及“覆盖索引”，则 nscanned 可能高于 nscannedObjects。
> 
> **nscannedObjects**扫描的文档数。

这两个领域有什么不同？更具体地说，当我有一个使用 BtreeCursor （索引）的查询时，这意味着什么，这两个字段有两个不同的值，例如：

```
{
    "cursor" : "BtreeCursor a_1_b_1",
    "isMultiKey" : false,
    "n" : 5,
    "nscannedObjects" : 5,
    "nscanned" : 9, 
    (...)
} 
```

我知道什么是“[覆盖索引”](https://stackoverflow.com/questions/62137/what-is-a-covered-index)。我想确切地了解查询在上面的示例中做了什么。它是否通过 ("scanned") 9 个元素 (nscanned = 9)，其中所有元素都是索引条目并读取 ("examined") 其中只有 5 个 (nscannedObjects = 5) 的值以生成结果集？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-17T08:04:47.187

这意味着：
查询返回 5 个文档 -`n`
从索引中扫描 9 个文档 -`nscanned`
然后从集合中读取 5 个完整文档 -`nscannedObjects`

类似的例子在：
[http ://docs.mongodb.org/manual/reference/method/cursor.explain/#cursor.explain](http://docs.mongodb.org/manual/reference/method/cursor.explain/#cursor.explain)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:58:52.430

如果“光标”是索引 ==> nscanned = 否。如果“光标”是 FullTableScan ==> nscanned = no，则扫描索引的数量。扫描的文件

nscannedObjects ==> 扫描文档的数量

查询时，尽量减少所有计数，即 nscanned 和 nscannedObjects 都是最小值，这意味着您的查询*应该*运行得更快！

# asp.net-mvc-4 - MVC 4 简单成员

> ID：13910103
> 
> 赞同：0
> 
> 时间：2012-12-17T07:41:51.820
> 
> 标签：asp.net-mvc-4, simplemembership

我正在将站点升级到 MVC 4，而新的 simplemembership 正在杀死我。我不确定我是否只是愚蠢，但我似乎无法从存储的 UserId 中获取 UserName。

在具有 asp 成员资格的 mvc 3 中，我在存储 item.CreatedBy Guid 的 Razor 视图中使用了以下内容：- **“@Membership.GetUser(item.CreatedBy).UserName”**

当 itemCreatedBy 现在是 int 时，与 SimpleMembership 一起使用的等效 Razor 语法是什么。

我正在尝试做类似的事情：- **@GetUserNameFromId(item.CreatedBy)**

感激地接受所有帮助和指点。

非常感谢您的时间和帮助

格林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:29:54.223

默认情况下，MVC 4 使用与旧的 MembershipProvider 不兼容的 SimpleMembership。如果您尚未修改帐户控制器和模型，您可以尝试从新的 MVC 3 应用程序复制它并替换 MVC 4 中的现有应用程序，看看是否有帮助。这是我从 [geekswithblogs.net发现的有用链接](http://geekswithblogs.net/Aligned/archive/2012/08/30/mvc-4-authentication.aspx)

# crystal-reports - 如何在水晶报表中为section3设置方向（rtl）

> ID：13910104
> 
> 赞同：1
> 
> 时间：2012-12-17T07:41:52.657
> 
> 标签：crystal-reports

> **可能重复：**
> [Crystal Reports 多列从右到左](https://stackoverflow.com/questions/13910966/crystal-reports-multiple-columns-right-to-left)

我在第 3 节中有 2 个表。但是当桌子被填满时，首先是左边的桌子被填满，然后是右边的桌子。但我希望在开始时填写正确的表格。我应该如何合并这个？ ![在此处输入图像描述](../Images/d53000a689e02d4dd3328379b52cecc7.png)

# jsf-2 - jsf在方法表达式中传递参数在ViewScoped bean中失败

> ID：13910111
> 
> 赞同：0
> 
> 时间：2012-12-17T07:42:37.543
> 
> 标签：jsf-2, el, managed-bean

我有一个 ViewScoped bean 支持的 jsf 页面，其中列出了如下所示的一堆事务

```
<ui:repeat value="#{transactions_byaccount.pageList}" var="item">
            <tr class="dataRow">
                <td class="dataCell cltdtransactionsdatetransaction">
                      <h:outputText value="#{item.datetransaction}" >
                        <f:convertDateTime pattern="EEE dd-MMM-yyyy HH:mm" />
                      </h:outputText>
                </td>
                ...
                ...

                <td colspan="2">
                    <span class="pagerDBspan" style="font-weight: bold;">
                        <h:commandLink action="#{transactions_byaccount.updateCategory('', item)}" >
                            <h:outputText value="Update"></h:outputText>        
                            <f:param name="pageNo" value="#{param.pageNo}" />
                            <f:param name="accountId" value="#{param.accountId}" />
                            <f:param name="sortOrder" value="#{param.sortOrder}" />
                            <f:param name="orderColumn" value="#{param.orderColumn}" />                                                                         
                        </h:commandLink>
                    </span>                                         
                </td> 
```

当用户导航到页面时，该链接将 accountId 作为参数传入，该参数映射到 bean 上的托管属性，如下所示

```
@ManagedProperty("#{param.accountId}")
private int accountId; 
```

此时调用传递 'item' 的方法 #{transactions_byaccount.updateCategory('', item)} 按预期工作。

用户还可以通过选择绑定到上面 accountId 字段的页面上的下拉菜单并单击刷新按钮来更改帐户 ID，该按钮将调用相关 DAO 以获取所选帐户的交易列表。但是，当用户单击按钮调用 #{transactions_byaccount.updateCategory('', item)} 时，我并没有列出新帐户中的项目，而是使用第一个帐户列表中的项目。

看来问题出在 JSF 生命周期的恢复位上。

任何帮助，将不胜感激。如果需要，将添加更多详细信息。

谢谢玛尼

编辑：我的豆子

```
package applogic.transactions;

import java.sql.Connection;
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ViewScoped;
import javax.faces.model.SelectItem;

import applogic.Conns;

import finance.bean.TransactionsListBean;
import finance.dao.AccountsDAO;
import finance.dao.TransactionsDAO;
import finance.daobase.BusinessDAO;
import finance.model.Accounts;
import finance.model.Transactions;
import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

@ManagedBean(name = "transactions_byaccount")
@ViewScoped
public class Transactions_Byaccount extends TransactionsListBean implements Serializable {
    List<Transactions> resultList;

    boolean initialized;

    @ManagedProperty("#{param.accountId}")
    private int accountId;

    public SelectItem[] accountsSelections;

    @ManagedProperty("#{param.sortOrder}")
    private int sortOrder;

    public SelectItem[] sortOrderSelections;

    @ManagedProperty("#{param.orderColumn}")
    private int orderColumn;

    public SelectItem[] orderColumnSelections;

    public Transactions_Byaccount() {
         Connection cons = Conns.getConFinanceDB();
         List<Accounts> accountsList = AccountsDAO.List(cons);
         List<SelectItem> listOfAccountsSelectItems = new
         ArrayList<SelectItem>();

         for( Accounts temp : accountsList ) {
             listOfAccountsSelectItems.add(new SelectItem(temp.getId(), temp.getTitle()));
         }

         accountsSelections = listOfAccountsSelectItems.toArray(new SelectItem[listOfAccountsSelectItems.size()]);

         List<SelectItem> sortOrderList = new ArrayList<SelectItem>();
         sortOrderList.add(new SelectItem(1, "Asc"));
         sortOrderList.add(new SelectItem(2, "Desc"));       
         sortOrderSelections = sortOrderList.toArray(new SelectItem[sortOrderList.size()]);

         List<SelectItem> orderColumnList = new ArrayList<SelectItem>();
         orderColumnList.add(new SelectItem(1, "Transaction Date"));
         orderColumnList.add(new SelectItem(2, "Action Date"));      
         orderColumnList.add(new SelectItem(3, "Reconciled Date"));
         orderColumnSelections = orderColumnList.toArray(new SelectItem[orderColumnList.size()]);
    }

    public String updateCategories(String redirectURL) {
        String result = redirectURL;

        Connection cons = Conns.getConFinanceDB();
        for( Transactions temp : (List<Transactions>)this.getPageList() )
            TransactionsDAO.Update(cons, temp);

        resultList = null;

        if( redirectURL != null && redirectURL.length() == 0 )
            redirectURL = null;

        return redirectURL;
    }

    public String updateCategory(String redirectURL, Transactions arg) {
        String result = redirectURL;

        Connection cons = Conns.getConFinanceDB();
        TransactionsDAO.Update(cons, arg);

        resultList = null;

        if( redirectURL != null && redirectURL.length() == 0 )
            redirectURL = null;

        return result;
    }

    @PostConstruct
    public void refresh() {
        Connection con = Conns.getConFinanceDB();
        resultList = TransactionsDAO.ListByaccount(con, accountId, getCurrentPageNo(), getPageSize(), orderColumn, sortOrder);
        initialized = true;

    }

    public void reload() {
        Connection con = Conns.getConFinanceDB();
        resultList = TransactionsDAO.ListByaccount(con, accountId, getCurrentPageNo(), getPageSize(), orderColumn, sortOrder);
        initialized = true;

    }

    public String reload(String returnUrl) {
        Connection con = Conns.getConFinanceDB();
        resultList = TransactionsDAO.ListByaccount(con, accountId, getCurrentPageNo(), getPageSize(), orderColumn, sortOrder);
        initialized = true;     
        return returnUrl;
    }

    public Object getPageList() {

        return resultList;
    }

    public int getMaxCount() {
        Connection con = Conns.getConFinanceDB();
        int result = TransactionsDAO.CountByaccount(con, accountId);
        return result;
    }

    public int getAccountId() {
        return accountId;
    }

    public void setAccountId(int accountId) {
        this.accountId = accountId;
    }

    public SelectItem[] getAccountsSelections() {
        return accountsSelections;
    }

    public void setAccountsSelections(SelectItem[] accountsSelections) {
        this.accountsSelections = accountsSelections;
    }

    public int getSortOrder() {
        return sortOrder;
    }

    public void setSortOrder(int sortOrder) {
        this.sortOrder = sortOrder;
    }

    public SelectItem[] getSortOrderSelections() {
        return sortOrderSelections;
    }

    public void setSortOrderSelections(SelectItem[] sortOrderSelections) {
        this.sortOrderSelections = sortOrderSelections;
    }

    public int getOrderColumn() {
        return orderColumn;
    }

    public void setOrderColumn(int orderColumn) {
        this.orderColumn = orderColumn;
    }

    public SelectItem[] getOrderColumnSelections() {
        return orderColumnSelections;
    }

    public void setOrderColumnSelections(SelectItem[] orderColumnSelections) {
        this.orderColumnSelections = orderColumnSelections;
    }   

    public boolean isInitialized() {
        return initialized;
    }

    public void setInitialized(boolean initialized) {
        this.initialized = initialized;
    }

    public List<Transactions> getResultList() {
        return resultList;
    }

    public void setResultList(List<Transactions> resultList) {
        this.resultList = resultList;
    }
} 
```

现在我的页面

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en">

<ui:composition template="/WEB-INF/templates/template_main.xhtml">
    <ui:param name="title" value="transactions"></ui:param>

    <ui:define name="operationalbar">
        <div>
            <span>
                <h:selectOneMenu value="#{transactions_byaccount.accountId}" >
                    <f:selectItems value="#{transactions_byaccount.accountsSelections}"/>
                </h:selectOneMenu>
            </span>
            <span>
                <h:commandLink action="#{transactions_byaccount.reload('')}">
                    <h:outputText value="Reload"></h:outputText>
                    <f:param name="pageNo" value="#{param.pageNo}" />
                    <f:param name="accountId" value="#{param.accountId}" />
                    <f:param name="sortOrder" value="#{param.sortOrder}" />
                    <f:param name="orderColumn" value="#{param.orderColumn}" />
                </h:commandLink>
            </span>         
            <span>
                <h:commandLink action="#{transactions_byaccount.updateCategories('')}">
                    <h:outputText value="Update Categories"></h:outputText>
                    <f:param name="pageNo" value="#{param.pageNo}" />
                    <f:param name="accountId" value="#{param.accountId}" />
                    <f:param name="sortOrder" value="#{param.sortOrder}" />
                    <f:param name="orderColumn" value="#{param.orderColumn}" />
                </h:commandLink>        
            </span>
        </div>
    </ui:define>

    <ui:define name="pagingbar">
        <div>
            <span>
                <h:commandLink title="Go to page first page" >
                    <h:outputText value="first"></h:outputText>
                        <f:param name="pageNo" value="#{transactions_byaccount.firstPage}" />
                        <f:param name="accountId" value="#{param.accountId}" />
                        <f:param name="sortOrder" value="#{param.sortOrder}" />
                        <f:param name="orderColumn" value="#{param.orderColumn}" />             
                </h:commandLink>
            </span>
            <span>
                <h:commandLink title="Go to page prev page">
                    <h:outputText value="prev"></h:outputText>
                        <f:param name="pageNo" value="#{transactions_byaccount.prevPage}" />
                        <f:param name="accountId" value="#{param.accountId}" />
                        <f:param name="sortOrder" value="#{param.sortOrder}" />
                        <f:param name="orderColumn" value="#{param.orderColumn}" />
                </h:commandLink>

            </span>
                <ui:repeat value="#{transactions_byaccount.pages}" var="item">
                    <span style="font-weight: #{item == transactions_byaccount.currentPageNo ? 'bold' : 'lighter' }">
                        <h:commandLink>
                            <h:outputText value="#{item}"></h:outputText>
                            <f:param name="pageNo" value="#{item}" />
                            <f:param name="accountId" value="#{param.accountId}" />
                            <f:param name="sortOrder" value="#{param.sortOrder}" />
                            <f:param name="orderColumn" value="#{param.orderColumn}" />

                        </h:commandLink>
                    </span>
                </ui:repeat>                

            <span>
                <h:commandLink title="Go to page next page">
                    <h:outputText value="next"></h:outputText>
                        <f:param name="pageNo" value="#{transactions_byaccount.nextPage}" />
                        <f:param name="accountId" value="#{param.accountId}" />
                        <f:param name="sortOrder" value="#{param.sortOrder}" />
                        <f:param name="orderColumn" value="#{param.orderColumn}" />
                </h:commandLink>
            </span>
            <span>
                <h:commandLink title="Go to page last page">
                    <h:outputText value="last"></h:outputText>
                        <f:param name="pageNo" value="#{transactions_byaccount.lastPage}" />
                        <f:param name="accountId" value="#{param.accountId}" />
                        <f:param name="sortOrder" value="#{param.sortOrder}" />
                        <f:param name="orderColumn" value="#{param.orderColumn}" />

                </h:commandLink>                
            </span>         
        </div>
        <div class="currentPagerIndex">

        </div>
    </ui:define>
    <ui:define name="maincontent">
        <table class="datatable">
            <thead>
                <tr class="headRow">
                    <td>datetransaction</td>
                    <td>description</td>
                    <td>amount</td>
                    <td>Edit</td>
                    <td>Delete</td>
                </tr>
            </thead>
            <ui:repeat value="#{transactions_byaccount.pageList}" var="item">
                <tr class="dataRow">
                    <td class="dataCell cltdtransactionsdatetransaction">
                          <h:outputText value="#{item.datetransaction}" >
                            <f:convertDateTime pattern="EEE dd-MMM-yyyy HH:mm" />
                          </h:outputText>
                    </td>
                    <td class="dataCell cltdtransactionsdescription">#{item.description}</td>
                    <td class="dataCell cltdtransactionsamount">#{item.amount}</td>
                    <td style="width: 45px">
                        <span class="pagerDBspan" style="font-weight: bold;">                   
                            <h:link outcome="transactions_edit" style="font-weight: bold;">
                                <h:outputText value="Edit"></h:outputText>
                                <f:param name="pageNo" value="#{param.pageNo}" />
                                <f:param name="itemId" value="#{item.id}" />
                            </h:link>
                        </span>                 
                    </td>
                    <td style="width: 45px">
                        <span class="pagerDBspan" style="font-weight: bold;">
                            <h:link  outcome="transactions_edit" >
                                <h:outputText value="Delete"></h:outputText>
                                <f:param name="pageNo" value="#{param.pageNo}" />
                                <f:param name="itemId" value="#{item.id}" />
                                <f:param name="deleteFlag" value="true" />                                  
                            </h:link>       
                        </span>                 
                    </td>
                </tr>
                <tr class="dataRow">
                    <td class="dataCell"></td>
                    <td class="dataCell" colspan="2">
                        <h:selectOneMenu value="#{item.fkCategoriesId}" >
                            <f:selectItems value="#{categories_edit.categories}"/>
                        </h:selectOneMenu>
                    </td>
                    <td colspan="2">
                        <span class="pagerDBspan" style="font-weight: bold;">
                            <h:commandLink action="#{transactions_byaccount.updateCategory('', item)}" >
                                <h:outputText value="Update"></h:outputText>        
                                <f:param name="pageNo" value="#{param.pageNo}" />
                                <f:param name="accountId" value="#{param.accountId}" />
                                <f:param name="sortOrder" value="#{param.sortOrder}" />
                                <f:param name="orderColumn" value="#{param.orderColumn}" />                                                                         
                            </h:commandLink>
                        </span>                                         
                    </td>
                </tr>
                <tr>
                    <td class="cssBottomLine" colspan="0"></td>
                </tr>                   
            </ui:repeat>
        </table>
    </ui:define>

    <ui:define name="bottomoperationalbarhost">
    </ui:define>

</ui:composition>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:32:23.900

`#{transactions_byaccount.pageList}`当表单提交的处理过程与显示表单的过程相比发生了不兼容的变化时，就会发生这种情况。

在处理表单提交的新 HTTP 请求期间，JSF 将对其进行重复以查找调用的操作并准备`#{item}`传递它。请注意，这不是在呈现 HTML 表单以供显示的 HTTP 请求期间准备的。

此问题表明您正在`#{transactions_byaccount.pageList}`基于一个过时（或太新）的变量进行初始化，这导致它发生了不兼容的更改。你不应该那样做。您应该重写您的 bean 逻辑，使其在回发时初始化与显示期间完全相同的列表，然后仅在实际调用操作时（因此，在操作方法内部）更改它。

鉴于您使用的是视图范围的 bean，您实际上应该已经设置好，因为它实际上会记住后续请求的所有属性。也许您正在列表的 getter 方法中执行初始化。您根本不应该在 getter 方法中执行业务逻辑。您应该在（后）构造函数或操作方法中执行此操作。

# javascript - 通过 RESTful API 使用 django 和主干进行用户注册

> ID：13910113
> 
> 赞同：1
> 
> 时间：2012-12-17T07:42:49.300
> 
> 标签：javascript, python, django, web-applications, backbone.js

我正在使用 django 和骨干构建一个简单的应用程序，作为我学习（理解 REST API）的一部分。我想创建一个用户注册并使用 json 将这些值传递给 django 后端。有人可以指出一些示例和源代码来使用 django 构建好的 API 并将它们与骨干一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:07:58.030

对于 API，请查看[django-tastypie](http://tastypieapi.org/)和[django-rest-framework](http://django-rest-framework.org/)。这些是我发现的几个活跃且设计良好的 REST API 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:09:36.547

您需要在 django 应用程序中使用 REST 后端才能与骨干网通信。Django 视图被构建为使用 html 响应，但它们也可以使用 json 响应。我不建议尝试构建自己的 json 视图，而是使用 django-tastypie 之类的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:13:06.197

我想说[这是一个很好的例子](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-3-deep-linking-and-application-states/)，他在 JSON api 上使用 model.set 创建新葡萄酒。

例如...看看以下部分：

```
saveWine:function () {
        this.model.set({
            name:$('#name').val(),
            grapes:$('#grapes').val(),
            country:$('#country').val(),
            region:$('#region').val(),
            year:$('#year').val(),
            description:$('#description').val()
        });
        if (this.model.isNew()) {
            var self = this;
            app.wineList.create(this.model, {
                success:function () {
                    app.navigate('wines/' + self.model.id, false);
                }
            });
        } else {
            this.model.save();
        }

        return false; 
```

# asp.net - ClaimsPrincipalPermission - 错误代码

> ID：13910115
> 
> 赞同：0
> 
> 时间：2012-12-17T07:43:00.793
> 
> 标签：asp.net, asp.net-mvc-4, claims-based-identity, claims

我在我的 asp 4.5 网站中使用 ClaimsPrincipalPermission 进行授权。

这工作正常。

但是，当用户尝试调用一个不允许他访问的页面时，返回的错误代码是 500，而不是像 401 这样的错误代码。

这是预期的行为吗？我假设 401 会更多地表达为什么这个页面不能被调用。

还是我有错误？在调试器中，我看到正确抛出了安全异常。

有没有办法改变这种行为？有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:09:55.860

ClaimsPrincipalPermission 引发 SecurityException。您可能想使用与 Web 框架更好地配合的东西......

见这里： http: [//leastprivilege.com/2012/10/26/using-claims-based-authorization-in-mvc-and-web-api/](http://leastprivilege.com/2012/10/26/using-claims-based-authorization-in-mvc-and-web-api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T20:38:25.707

500 错误代码似乎是 SecurityExceptions 的默认响应。

这个推理对我来说很有意义，因为 ASP.NET 不一定知道被拒绝访问的用户，它所知道的只是 SecurityException 被抛出某个地方。您的网站本身可能没有足够的权限来做某事，在这种情况下应该有 500 个。

[异常过滤器](http://msdn.microsoft.com/en-us/library/gg416513%28v=vs.98%29.aspx)是分析未捕获异常并找出您想要返回的 HTTP 代码的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T00:15:04.960

ClaimsPrincipalPermissionAttribute 由 CLR 调用，并在角色检查失败的情况下引发 SecurityException。[在这里](https://kirandhappuri.wordpress.com/2015/01/20/wif-claims-based-authorization/)查看解决方案。

# sap-srm - 我们可以将产品详细信息直接从第三方目录发布到 OCI SAP SRM 吗？

> ID：13910119
> 
> 赞同：1
> 
> 时间：2012-12-17T07:43:18.557
> 
> 标签：sap-srm

我们是一家使用 SAP SRM 的零售商的供应商。零售商正在使用我们的系统下订单，但也希望在他们的 SAP 中输入相同的订单。

我已阅读 SAP 的 OCI（开放目录接口）。 [http://www.attsuppliers.com/downloads/OCI_40_EN20030611.pdf](http://www.attsuppliers.com/downloads/OCI_40_EN20030611.pdf)

据我了解，使用 OCI，我们需要从 SRM（供应商关系模块）服务器发起交易以输入订单。

我理解的流程是：

1.  我们需要为第三方目录配置（一次性过程）
2.  通过指定过滤参数浏览该目录
3.  选择一个产品
4.  使用“返回 URL”在目录中发布专门用于将数据发布到 SRM 服务器的表单
5.  SRM 服务器获取发布的数据并在 SAP SRM 模块中进行订单输入

是否可以直接从第三方目录发起交易并将带有返回 URL 的产品详细信息发布到 SRM 服务器？

不确定返回 URL 是为目录固定还是动态生成。

基本上，我们想要这样的执行流程：

1.  零售商从我们的目录中选择产品
2.  在我们的系统中生成订单
3.  同时我们希望与他们的 SAP 的 SRM 服务器通信并在他们的系统中下订单，而不需要从 SRM 服务器发起交易（即这个订单应该在 SAP 中自动下达）

请提供可能的解决方案或适当的建议。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:22:32.767

我认为您对 OCI 流程的理解是正确的，但您想将另一个流程集成到其中。

进行初始设置后，通常的过程是：

1.  客户调用供应商的OCI目录并选择材料
2.  所选材料（和价格...）以表格形式返回到返回地址 (_HOOK_URL_)。
3.  客户在他的系统中下订单。
4.  订单发送给供应商。这可能是传真……或者在完全集成的 EDI 场景中是[IDOC](http://en.wikipedia.org/wiki/IDoc)（IDOC 类型 ORDERS01 .. ORDERS05）
5.  提供商获取订单 idoc 并通过订单响应确认订单。

在您的情况下：您使用 OCI 在您的系统中下订单，并使用 EDI 连接在 SRM 下订单。最好问问 SRM 他是否支持 EDI 连接。

# javascript - 如何在客户端使用下拉列表？

> ID：13910121
> 
> 赞同：0
> 
> 时间：2012-12-17T07:43:27.367
> 
> 标签：javascript, asp.net, visibility, html-select

我是 Asp.net 的新手

我正在创建具有`DropDown`列表和其他一些控件的网站..

每当我更改下拉选择的索引时，如果它等于其中之一，`Item`那么我想显示控件，如果不等于，那么我想隐藏这些控件...

在这里，我尝试使用此代码，但没有得到...

```
 var selectmenu = document.getElementById("<%=ddlCategory.ClientID%>");
    var chosenoption = selectmenu.options[selectmenu.selectedIndex];
     //Controls which are to hidden or visible
    var strCtrlIds =   "lblOrderNumber,txtOrderNumber,btnGetOrderNumber,lblItemNumber,txtItemNumber,lblReason,txtReason,lblMaterial,txtDescription";
     if (chosenoption.value != "Dry End - Single Stack") {
         debugger;
         ToggleGivenControl(strCtrlIds, false);

     }
     else {
         ToggleGivenControl(strCtrlIds, true);
     }
     /**********************************************************
                    Toggle for Display End- Stack Options
     ************************************************************/

     function ToggleGivenControl(strCtrlIds, blnIsVisible) {
         debugger;
         var ctrls = strCtrlIds.toString().split(",");
         var strCtrlId = '';
         for (var intCnt = 0; intCnt < ctrls.length; intCnt++) {
             strCtrlId = ctrls[intCnt];
             var ctrl = document.getElementById(strCtrlId);
             if (ctrl != null) {
                 if (blnIsVisible) {
                     ctrl.style.display = 'block';
                     ctrl.style.visibility = 'visible';
                     ctrl.focus();
                 }
                 else {
                     ctrl.style.display = 'none';
                     ctrl.style.visibility = 'hidden';
                 } //Else End
             } //If End.
         } //For end.
     } 
```

我的 asp.net 代码是

```
 <asp:DropDown id="ddlCategory" runat="server" />
  <asp:Lable id="lblItem" runat="server" />
  <asp:TextBox id="txtItem" runat="server"/>
 .... 
```

一件事是我使用数据源限制下拉

请问有人能解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:04:06.933

我想像这样。

```
<asp:DropDown id="ddlCategory" runat="server" onchange="OnDropDownListChange();" />    
function OnDropDownListChange(){
   var selectmenu = document.getElementById("<%=ddlCategory.ClientID%>");
  var chosenoption = selectmenu.options[selectmenu.selectedIndex];
 //Controls which are to hidden or visible
 var strCtrlIds =    "<%=lblOrderNumber.ClientID%>,<%=txtOrderNumber.ClientID%>,<%=btnGetOrderNumber.ClientID%>,<%=txtItemNumber.ClientID%>";
 if (chosenoption.value != "Dry End - Single Stack") {
     debugger;
     ToggleGivenControl(strCtrlIds, false);

 }
 else {
     ToggleGivenControl(strCtrlIds, true);
 }
} 
```

# android - 如何获取手机前台显示的应用程序？

> ID：13910122
> 
> 赞同：0
> 
> 时间：2012-12-17T07:43:42.653
> 
> 标签：android, service

我想知道服务中当前手机的界面上显示了哪些活动。

android中有活动堆栈。它是否在系统中有一个全局活动堆栈并提供前台显示的活动信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:15:28.000

```
Context context = null; // FIXME: init with your context.
        ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        List<RunningAppProcessInfo> procInfos = activityManager.getRunningAppProcesses();
        for (int i = 0; i < procInfos.size(); i++) {
            if (procInfos.get(i).importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND) {
                //the current running process
                Log.d("FOREGROUND_Application", procInfos.get(i).processName + "is running on the FOREGROUND");
            }
        } 
```

# ios - ffmpeg 在 iOS 中将 wma 转换为 mp3

> ID：13910128
> 
> 赞同：2
> 
> 时间：2012-12-17T07:44:10.260
> 
> 标签：ios, ffmpeg

我想在 iOS 中将 WMA 文件转换为 MP3。我已经`AVFrame`通过学习这里的示例代码成功地将 WMA 流解析为：http: [//www.inb.uni-luebeck.de/~boehme/using_libavcodec.html](http://www.inb.uni-luebeck.de/~boehme/using_libavcodec.html) 但接下来我不知道如何将其转换`AVFrame`为 MP3 文件，我已经尝试过这样的代码，但它不起作用：

```
AVCodecContext *outCodecContext = NULL;
AVCodec *pCodec = avcodec_find_decoder(AV_CODEC_ID_MP3);
if(pCodec == NULL){
    fprintf(stderr, "out avcodec_find_decoder error\n");
    exit(1);
}

AVCodecContext *pCodecCtx = avcodec_alloc_context3(pCodec);

if(pCodecCtx == NULL){
    fprintf(stderr, "out avcodec_alloc_context3 error\n");
    exit(1);
}

if(avcodec_open2(pCodecCtx, pCodec, NULL) < 0){
    fprintf(stderr, "out avcodec_open error\n");
    exit(1);
}
outCodecContext = pCodecCtx;

do{
    AVPacket packet;
    if(av_read_frame(pFormatCtx, &packet) < 0){
        break;
    }

    int got_frame_ptr;

    if(packet.stream_index==videoStream)
    {   
        avcodec_decode_audio4(pCodecCtx, pFrame, &got_frame_ptr, &packet);
        if(got_frame_ptr)
        {
            AVPacket outPacket;
            int out_got_packet_ptr;
            avcodec_encode_audio2(outCodecContext, &outPacket, pFrame, &out_got_packet_ptr);

            [finalData appendBytes:outPacket.data length:outPacket.size];
            NSLog(@"finalData len: %d", [finalData length]);
        }
    }
    av_free_packet(&packet);

}while(true);

NSString *svfp = [getAppDocumentDirectory() stringByAppendingPathComponent:@"finalData"];
[finalData writeToFile:svfp atomically:YES]; 
```

我总是在控制台中收到一条消息：

```
[mp3 @ 0xa393200] nb_samples (12288) != frame_size (0) (avcodec_encode_audio2) 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T13:12:32.150

你可以试试 swr_convert 这个代码供你参考

```
swr_convert(_swrContext,
                            outbuf,
                            _audioFrame->nb_samples * ratio,
                            (const uint8_t **)_audioFrame->data,
                            _audioFrame->nb_samples); 
```

# mysql - MySQL 从单独的表中获取 count()

> ID：13910134
> 
> 赞同：2
> 
> 时间：2012-12-17T07:44:52.543
> 
> 标签：mysql, sql, join

我正在尝试通过`MySQL`单个查询获取三个不同表中的简单行数。这是我所拥有的：

```
SELECT count(s.`id`) AS c1,
       count(g.`id`) AS c2,
       count(r.`id`) AS c3
  FROM table1 s,
       table2 g,
       table3 r 
```

但这不起作用，我认为它将所有三个总数相乘。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:57:12.837

如果表没有关系并且无法连接，请尝试以下操作：

```
SELECT
  (select count(id) from table1) as c1,
  (select count(id) from table2) as c2,
  (select count(id) from table3) as c3 
```

# c++ - 如何通过单击 HTML 表单按钮在本地运行程序？

> ID：13910135
> 
> 赞同：1
> 
> 时间：2012-12-17T07:44:53.480
> 
> 标签：c++, html, c, web-applications, cgi

我有一个名为“main”的编译 C++ 程序。
我不想从终端运行程序，而是想单击网页上的按钮来运行它。
我该怎么做呢？

* * *

在此示例中，浏览器下载程序而不是运行它。

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>title</title>
</head>
<body>
    <form name="input" action="main" method="post">
        <input type="submit" value="Run Program">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:58:44.977

如果没有本地运行的 Web 服务器，就无法做到这一点。通过点击网页直接启动程序会导致严重的安全问题。

如果您在 Windows 上，并且真的想从 HTML 页面启动可执行文件，那么请考虑使用[HTA](http://en.wikipedia.org/wiki/HTML_Application)（[示例](http://blogs.technet.com/b/heyscriptingguy/archive/2005/10/31/how-can-i-start-an-application-from-an-hta.aspx)）。

**== 编辑 ==**

我刚刚意识到我上面提到的示例显示了一种直接从浏览器启动程序（notepad.exe）的方法。将此代码另存为`test.html`，在 Internet Explorer 中打开它，然后单击按钮：

```
<html> 
<head> 
<script language="VBScript"> 
    Sub RunProgram 
        Set objShell = CreateObject("Wscript.Shell")
        objShell.Run "notepad.exe"
    End Sub
</script> 
</head> 
<body> 
<button onclick="RunProgram">Run Program</button> <p>
</body> 
</html> 
```

您将收到警告，但单击“是”后，记事本将启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:47:46.103

使用 JavaScript：

```
<script type="text/javascript" language="javascript">
        function RunFile() {
        WshShell = new ActiveXObject("WScript.Shell");
        WshShell.Run("c:/windows/system32/notepad.exe", 1, false);
        }
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:14:52.523

如果您打算仅自己使用它，请执行以下操作。创建一个 .run 文件，其中包含要运行的程序的描述。它可能包含以下值：

```
D:\Programs\MyProgram.exe
Parameter1
Parameter2
Parameter3 
```

然后创建一个简单的程序（所谓的 runner），它读取一个运行文件，解析它并调用 CreateProcess() 在其内容中描述的程序。将其与 .run 文件相关联。最后在您的网页中创建一个指向 .run 文件的链接 - 这样您的运行程序将执行其内容。这不需要在您的本地机器上安装网络服务器，但此解决方案不可扩展（例如，除非注册运行程序，否则您的客户将无法使用它）并且并不真正安全。它不应该引发任何系统警告，也不需要在 HTML 中嵌入脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-30T11:18:06.863

您在您的网络服务器中使用 phpsh，并且您调整 pspsh 以直接运行您的/您的程序，而不是返回终端提示符，以便 http://webserver/main 是直接运行主程序的 phpsh 脚本，所以您必须相应地设置您的路径，即 apache用户有权运行应用程序

另一种选择是将c程序编写为cgi并由cgi处理表单

# configuration - 配置公共 ip jboss AS7

> ID：13910138
> 
> 赞同：0
> 
> 时间：2012-12-17T07:45:17.347
> 
> 标签：configuration, jboss7.x

我在 ubuntu 服务器上使用 JBoss AS7 作为我的应用程序服务器。当我尝试使用 localhost 或本地 IP 地址访问我的应用程序时，它工作正常。但我需要使用“公共 ip”运行我的 jboss as7。但是当我提供一个公共 ip 并尝试运行我的应用程序时，它不起作用。

如何配置应用程序以使其在公共 IP 上运行？是否有任何配置文件我应该提到公共 IP 地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:15:11.290

如果您查看[AdminGuide-Interfaces](https://docs.jboss.org/author/display/AS71/Admin+Guide#AdminGuide-Interfaces)，有几种方法可以做到这一点。

最简单的是将绑定地址传递给启动脚本

```
./bin/standalone.sh -b 1.2.3.4 
```

但您也可以静态配置它

```
<interfaces>
    <!-- … -->
    <interface name="public">
        <inet-address value="1.2.3.4">
    </interface>
    <!-- … -->
</interfaces> 
```

# unit-testing - 将多个 VSS 存储库移动到“新”源代码控制，同时添加 TDD 和 CI？

> ID：13910139
> 
> 赞同：0
> 
> 时间：2012-12-17T07:45:17.457
> 
> 标签：unit-testing, version-control, continuous-integration, visual-sourcesafe

更少的问题，更多的建议和建议是“我从哪里开始 TF？”

启动环境：`VS 2010 Pro, C#, VSS 2005, single developer, multple VSS repositories, limited code re-use`

目前我有（大部分是继承的，直到现在还没有时间改变）多个 VSS 存储库，通常带有 C&P 的实用程序/工具类/项目。文档位于网络共享上（我将 BRD、UAT 测试脚本、用于 db 构建的 sql 脚本等都作为“文档”用于此目的）。很少或没有单元测试，也没有 CI/构建自动化。

我即将获得两个新开发者，因此我想改变环境

可能的结束环境：`VS 2010 Pro, C#, Java (not sure of IDE yet), 3 developers, documentation under source control, re-used code, (automated) unit testing, CI builds, incemental revision/build numbers`

我最初的想法是转向 SVN 或类似的、单一存储库、单一“主”解决方案、多个“工作”解决方案。MSTest（因为它内置在 VS2010 中？），通过 CC.Net 或 TeamCity 进行 CI。

我已经阅读了很多关于独立完成这些任务的内容，例如支持/反对每个源代码控制系统的论据，支持/反对将文档添加到源代码控制中的论据，但一次做所有事情都没有！

注意：我们仍然是一个小团队，所以允许一些手工工作，但最好是最少的，而且我们没有预算，所以需要免费或“对小团队免费”！

有人对从哪里开始有建议吗？使用什么工具？如何从 VSS 迁移出去？我应该使用“主”解决方案还是有一个 CI 工具可以为我“留下印象”？例如，查看“实用程序代码”更改是否破坏了其他任何东西的地方？

（脚注：我知道我们仍然需要编写单元测试！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:04:12.347

小型团队（最多 5 名团队成员）的一个不错的选择是 Team Foundation Service：[https ://tfs.visualstudio.com/](https://tfs.visualstudio.com/)

Team Foundation Service 是 Team Foundation Server 的云托管版本。它将为您提供运行项目所需的所有东西，例如可用于持续集成的源代码控制、工作项和自动构建。

Microsoft released a tool that will migrate your repositories to TFS: [Visual Source Safe Upgrade Tool for Team Foundation Server](http://visualstudiogallery.msdn.microsoft.com/867f310a-db30-4228-bbad-7b9af0089282).

I would also advice moving to Visual Studio 2012\. It's a really big improvement on VS2010\. Since you are a small company you probably can apply for [Microsoft BizSpark](http://www.microsoft.com/bizspark/default.aspx). That will give you three years of free software, Azure and support. It can really help you getting started.

Regarding your Documentation question, have a look at the [SSW Rules for better .NET Projects](http://rules.ssw.com.au/SoftwareDevelopment/RulesToBetterDotNETProjects/Pages/default.aspx). Rule 45 mentions how you could store your documentation with your project under source control.

All the other things you mention (Sql scripts, test scripts) should also be under source control. You can add them to a specific folder beneath your solution.

Adding Unit Test to an existing project will be a hassle. [Working Effectively with Legacy Code](https://rads.stackoverflow.com/amzn/click/com/0131177052) is a book that offers some great advice on how to start. If you have no experience with writing unit tests you should first study the subject or hire an external consultant. In the projects I consult on a I see that people start enthusiastically but stop using unit tests because they run into problems.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T01:22:19.880

I was you, 2 years ago. We went with SVN + TeamCity and never looked back. SVN is fully free and TC is effectively free*. Both work beautifully with Java and .Net. You can store and integrate your code onsite with as little as one server. If I were doing it today I might consider GitHub, but for a central repo model, SVN is great.

Regarding the transition out of VSS, [this is sage advice](https://stackoverflow.com/questions/59392/best-way-to-migrate-from-vss-to-subversion). I spent a bunch of time manually converting the old VSS repos to SVN and there was zero practical value in keeping the (lousy, spotty) history around in SVN.

*TC is free for unlimited users and up to 20 build configurations. If you hit that wall, then you'll be realizing enough business value to get $MEGACORP to pony up for the full version.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:47:07.780

If you need:

*   To host your own code (not outside)
*   A free solution for up to 15 users
*   Strong branching and merging (which probably you do not need at the very beginning until you're fully unplugged from the VSS matrix ;) )
*   Ability to work distributed...
*   Excellent Visual Studio integration

Why don't you give a try to ww.plasticscm.com?

Disclaimer: I do work for the company... but still... it should be a good option for you! :) We define ourselves as the DVCS for Windows!

# objective-c - 使用 setAction:(SEL)@selector(start:) 时无法键入 cast @selector 表达式

> ID：13910142
> 
> 赞同：0
> 
> 时间：2012-12-17T07:45:35.650
> 
> 标签：objective-c, ios, cocoa

我正在阅读别人的项目代码，它可以在32位下成功编译，但是当我将项目切换到64位时，就像标题所说的那样有一个错误消息。

代码：

```
[obj setAction:(SEL)@selector(start:)]; 
```

`@selector`我知道is的返回值类型`SEL`和参数`setAction`需要一个`SEL`args，但为什么在64位失败？究竟是什么`SEL`类型？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:52:49.740

它不应该失败，但你根本不需要演员表。`@selector()`表达式已经是 type `SEL`。写吧

```
[obj setAction:@selector(start:)]; 
```

SEL 类型在 C 方面是`struct objc_selector *`. 但是，在 OS X 和 iOS 上是这样吗？由一个 plain 支持`const char *`，它在加载时由链接器和内核统一。

# javascript - 标题更改其位置：[已修复]在 Ipad 中弹出键盘后

> ID：13910154
> 
> 赞同：1
> 
> 时间：2012-12-17T07:46:52.023
> 
> 标签：javascript, html, css, ipad

我正在 Ipad 上测试我的应用程序，我面临的问题是我在我的表单上向下滚动并且我的顶部标题栏是`fixed`所以当我点击`Textbox`顶部标题栏隐藏和我的侧边栏时它也会向下导航`fixed`与 Header 一样也上升了。所以有没有解决这个问题的方法。我发现了很多文章，但其中大多数都是一种 hack 文章，对未来的前景不好，所以任何好的解决方案都会有很大的帮助。

```
.headbar{
 top:0;
 position:fixed;
 width:100%
}

.siderbar {
  top:50px;
  position:fixed;
  width:200px;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T05:10:25.697

have u used `position:relative` ?

to use `position:absolute` you must have to keep pos. absolute div inside pos. relative div.

only then position relative and postion fixed works like:

```
    .outerheader_div{
      position:relative;
    }
    .header_fixed{
      position:absolute;
    }

    .outersidebar_div{
      position:relative;
    }
    .sidebar_fixed{
      position:absolute;
    }

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:43:22.740

我很确定这取决于 ipad 如何以输入为中心。

由于元素是固定的，它们会移动，因为它们固定在那个位置。您应该会发现整个页面移动尝试放入一些 lorem ipsum 并查看是否可以复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:25:56.740

我相信这`position:fixed`就是问题所在。这在移动网络中很奇怪。看看您是否可以使用`position:absolute`and`z-index`来实现 UI。

搜索：“是位置：iOS 设备支持固定”将为您提供有关该主题的大量资源，如果您确实必须使用`fixed`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:22:25.243

如果没有更多信息，很难给出答案。

您在页面上使用 JQuery 吗？如果是这样，您可以尝试添加 **`data-tap-toggle="false"`** 到标题 div。

同样在css中，您应该指定**`left:0;`**固定元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-13T04:19:44.673

这适用于 iOS6，但不幸的是不适用于 iOS7：http: [//jsbin.com/wayurebu/1](http://jsbin.com/wayurebu/1)

该代码适用于固定页眉，但不适用于固定页脚。更改 documentElement.className 和将固定定位元素切换为可见的组合强制渲染引擎重新计算固定视口，并重新定位所有固定元素。

需要 500 毫秒计时器，因为有时在触摸滚动时，滚动事件似乎无法触发。

```
<style>
#fix1, #fix2 { display: none; position: fixed; top: 0; left: 0; height: 1px; width: 1px; z-index: 2;}
.head1 #fix1, .head2 #fix2 { display: block; }
</style>
<div id=fix1></div>
<div id=fix2></div>
<script>
var toggleTimer;
var headerToggle = 0;
$(window).on('scroll', function() {
    function toggle() {
        var toggleit = !(headerToggle++ % 2);
        $(document.documentElement).toggleClass('head1', toggleit);
        $(document.documentElement).toggleClass('head2', !toggleit);
    }
    toggle();
    clearTimeout(toggleTimer);
    toggleTimer = setTimeout(toggle, 500);
});
</script> 
```

# android - 如何检查 SharedPreferences 字符串是否为空或 null *android

> ID：13910156
> 
> 赞同：11
> 
> 时间：2012-12-17T07:47:12.267
> 
> 标签：android

我想检查 SharedPreferences 中的一个字符串，它使用它来存储用户名和密码，所以如果用户名和密码不为空或为空，它将被定向到主页，否则如果用户名和密码为空，它将被定向到登录页面。

这是我检查 SharedPreferences 字符串的**代码**，但它不起作用..

```
if(PreferenceConnector.USERNAME!=null){
    Intent intent = new Intent(MainActivity.this,MainHome_Activity.class);
    startActivity(intent);
} else {
   Intent intent = new Intent(MainActivity.this,LoginFormPegawai_Activity.class);
   startActivity(intent);
} 
```

我尝试使用此代码通过 toast 检查它，在尝试此操作后，我得到 SharedPreferences string is not null or empty..

```
btn_logout_pegawai.setOnClickListener(new OnClickListener() {
     public void onClick(View v) {

      //remove the SharedPreferences string
      PreferenceConnector.getEditor(this).remove(PreferenceConnector.USERNAME)
            .commit();
      PreferenceConnector.getEditor(this).remove(PreferenceConnector.PASSWORD)
            .commit();  

//checking the SharedPreferences  string
         if(PreferenceConnector.USERNAME!=null){
            Toast.makeText(MainHome_Activity.this,"not null", Toast.LENGTH_SHORT).show();       
         }
         else {
           Toast.makeText(MainHome_Activity.this,"null", Toast.LENGTH_SHORT).show();
        }
    }
 }); 
```

如何正确检查 SharedPreferences 字符串是空的还是空的？

谢谢..

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-17T07:56:18.403

做这个：

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
String username = myPrefs.getString("USERNAME",null);
String password = myPrefs.getString("PASSWORD",null); 
```

如果存在用户名和密码，它们将有一个值，否则它们将为空。

```
if (username != null && password != null )
{
    //username and password are present, do your stuff
} 
```

您不必单独检查它们的存在。尝试检索它们的值将自动返回 null （如果不存在）或值（如果存在）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T08:08:52.680

```
public static final String DEFAULT_VALUE = "default";
public static final String ANY_FIELD = "any_field";

SharedPreferences prefs = context.getPreferences(Activity.MODE_PRIVATE);
String text = prefs.getString(ANY_FIELD, DEFAULT_VALUE);
if (text.equals(DEFAULT_VALUE)) {
    //TODO:
} else {
    //TODO:
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T07:53:51.157

试试这个

```
 if(PreferenceConnector.getString("USERNAME")!=null){   
      Intent intent = new 
      Intent(MainActivity.this,MainHome_Activity.class);
      startActivity(intent);
   }
   else 
   {
     Intent intent = new Intent(MainActivity.this,LoginFormPegawai_Activity.class);
     startActivity(intent);
   } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-11T08:59:47.033

```
 if(appSettings.contains(Constants.WEATHER_SUBN_POSTION)) {
        savedSubPostion = appSettings.getInt(Constants.WEATHER_SUBN_POSTION, 0);
 } 
```

首先检查它是否包含该值。

# excel-2007 - PerlNET 和 ExcelDNA

> ID：13910157
> 
> 赞同：1
> 
> 时间：2012-12-17T07:47:12.990
> 
> 标签：excel-2007, excel-dna

内容：Office 2007、ExcelDNA 0.30、ActiveState Perl SDK 3.0、PerlNET

我正在尝试使用 PerlNET 编写 ExcelDNA 加载项。这个想法是写一些可以处理可变数量参数的东西，比如=SUM()。

Perl 代码：

```
#!perl
package AddIn; 

use strict;
use diagnostics; 
use namespace "System";
use PerlNET qw(AUTOCALL);
=for interface
    [interface: pure]
    static double PNSUM(double);
    static double PNSUM(double,double);
    static double PNSUM(double,double,double);
    static double PNSUM(double,double,double,double);
    static double PNSUM(double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
    static double PNSUM(double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double,double);
=cut

sub new {
    my($package) = @_;
    my $self = bless {} => $package;
    return $self;
}

sub PNSUM {
    my $result = 0.0;
    foreach (@_) {
        $result += $_;
    }
    return $result;
}
#~ print SUM(1.9,2.8,3.7,4.6,5.5,6.4,7.3,8.2,9.1); 
```

DNA密码

```
<DnaLibrary Name="Perl NET Demo" RuntimeVersion="v2.0">
  <ExternalLibrary Path="BOPN.DLL" />
</DnaLibrary> 
```

.XLL 文件加载正常，但 PNSUM() 不可见。我究竟做错了什么？

# r - 如何获取geotiff图像

> ID：13910161
> 
> 赞同：7
> 
> 时间：2012-12-17T07:47:20.167
> 
> 标签：r

我想在 R 中有一个 Geotiff 图像。我该怎么做？下面是一个简单的例子。我想制作 Geotiff 格式的绘图。

```
require(gstat)
data(meuse)
coordinates(meuse) = ~x+y
data(meuse.grid)
gridded(meuse.grid) = ~x+y
m <- vgm(.59, "Sph", 874, .04)
# ordinary kriging:
x <- krige(log(zinc)~1, meuse, meuse.grid, model = m)
spplot(x["var1.pred"], main = "ordinary kriging predictions") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T10:49:58.653

将您的 SpatialPixelsDataFrame 转换为栅格并写入：

```
> require(raster)
> r = raster(x["var1.pred"])
> plot(r)
> writeRaster(r,"r.tiff","GTiff") 
```

`plot`是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T05:12:33.960

使用 将 SpatialPixelsDataFrame 直接写入光栅格式[`rgdal`](http://cran.r-project.org/web/packages/rgdal/index.html)，它提供与[GDAL](http://www.gdal.org/)的绑定。您可以使用 GDAL 做很多事情，例如读取和/或写入各种栅格格式、像素类型、进行坐标转换、支持多波段等。

```
require(rgdal)
writeGDAL(x["var1.pred"], "var1_pred.tif") 
```

# algorithm - qsort_b 和 qsort

> ID：13910164
> 
> 赞同：5
> 
> 时间：2012-12-17T07:47:28.837
> 
> 标签：algorithm, objective-c-blocks, qsort

在 Mac 上用 C++ 编写一个演示不同排序算法的程序。我找到了两个快速排序实现，qsort 和 qsort_b。

第一个当然是老式的、随处可见的 qsort。但是有 qsort_b，它接受一个块而不是一个函数。这是我的代码：

```
#include <cstdlib>
#include <cstdio>
#include <iostream>
#include <cstdio>
#include <ctime>

#define DATA 1000000

using namespace std;

int compare(const void* a, const void* b)
{
    return *(int*)a - *(int*)b;
}

int main(int argc, char *argv[])
{
    int* array = new int[DATA];

    srand(time(0));

    for ( int i = 0 ; i < DATA ; ++ i )
    {
        array[i] = rand() % 2147483647;
    }

    clock_t begin = clock();

    qsort(array, DATA, sizeof(array[0]), compare);
    //qsort_b(array, DATA, sizeof(array[0]), ^(const void* a, const void* b) { return *(int*)a - *(int*)b; });

    clock_t end = clock();

    cout << "Time it takes to sort " << DATA << " integers with quicksort: " << end - begin;
} 
```

在这里，我看到了很大的速度差异，是什么导致了所有这些差异。据我了解，块用于并行处理，在这种情况下不会比函数快。没有什么可以并行处理的，是吗？

编辑：heapsort_b()、mergesort_b() 和 qsort_b() 例程就像没有 _b 后缀的相应例程一样，期望比较回调是块指针而不是函数指针。（[来自 BSD 手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/qsort_b.3.html)）

编辑：速度差异。DATA 为 1000000，qsort 在 146832 ns 内完成，qsort_b 在 127391 ns 内完成。考虑到它快 10% 左右，这是一个相对较大的差异。

编辑：我已经编辑了代码，使其可以拥有更大的整数数组。我个人最大的测试结果是 100000000 个整数，28136278 (28s) vs. 23870078 (24s)。这对我来说是一个相当大的不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-23T20:43:56.507

Objective-C`Block`是另一种动物。它可能看起来像`MACRO`（编译前的替换）和 `inline functions`（告诉编译器*“尽最大努力消除函数调用开销”*），但整体结构与这些结构有很大不同。

Block 是**一个对象**，此外，**一个*堆栈*对象**。唯一允许在堆栈中创建的对象（至少没有一些技巧）。

当`Block`在堆栈中创建对象时，编译器添加所有局部变量、块变量、它引用的读/写变量的地址以及指向块可执行代码的指针。因此，即使在开始执行之前，一切都已准备好进行计算，无需任何堆栈操作。

因此，这不是优化问题，而是`Block`. 它没有堆栈变量的**PUSH**和**POP的任何函数调用开销。**

作为您问题的答案，`qsort()`并且`qsort_b()`没有任何算法差异，而是详细的结构，**block vs function**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:25:10.033

对我来说看起来像是优化差异。使用 qsort_b，编译器可能会内联比较，而使用 qsort 则不会。不同之处在于每次比较的函数调用开销。

# c# - 如何使文件通过屏幕可写？

> ID：13910167
> 
> 赞同：-3
> 
> 时间：2012-12-17T07:48:12.920
> 
> 标签：c#, asp.net, digital-handwritting

我有一个生成报告的网络应用程序。

我想让这些报告可以手写`on the screen`。

我的意思是我可以通过屏幕写一些笔记或在这些文件上签名`Light Pen`。

我不知道我应该从哪里开始实现类似的东西或搜索的起点。

我想要一些搜索和库来使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:11:56.903

一般来说，Canvas 可用于使用平板电脑或鼠标在网页屏幕上书写。然后，您将该图像发送回服务器并保存。

阅读有关如何[创建 HTML5 画布绘画应用程序的详细信息](http://dev.opera.com/articles/view/html5-canvas-painting/)

这是一个例子，选择铅笔，然后写。[http://devfiles.myopera.com/articles/649/example5.html](http://devfiles.myopera.com/articles/649/example5.html)

如果你想让它更复杂，那么看看这个库：
[http ://experiments.hertzen.com/jsfeedback/](http://experiments.hertzen.com/jsfeedback/)

正在将您在页面上看到的内容即时转换为画布（图像），然后您可以在其上写为图像，然后您可以发回服务器。

# .net - vb.net 赢得表格的透明度

> ID：13910169
> 
> 赞同：0
> 
> 时间：2012-12-17T07:48:15.997
> 
> 标签：.net, vb.net, winforms, transparency

我想创建一个不可见的表单。唯一可见的项目是图片和用户对其的控制。
我为表单设置了以下设置：
BackColor = 白色
BackgroundImage = none
TransparencyKey = white
FormBorderStyle = none图片

框具有以下设置：
BackColor = transparent
Image =myfile

用户控件设置：
BackColor = 透明
BackgroundImage = none

问题是用户控件透明度清除了它后面的图片框的一部分并显示桌面。我应该怎么做才能看到用户控件而不是桌面后面的图片框。

我无法将图像作为背景图像添加到用户控件，因为它比控件大得多。

谢谢

# php - Ajax 加载幻灯片失败

> ID：13910173
> 
> 赞同：1
> 
> 时间：2012-12-17T07:48:26.267
> 
> 标签：php, ajax, jquery

我正在尝试在滑动 div 上显示文本。要显示的文本是使用 ajax 动态加载的。在加载文本之前，滑块 div 工作正常，但在单击链接并且 div 填充了数据后，滑块停止工作。我不知道如何解决这个问题。现场样品在[这里](http://kinaya1.sammyukavi.com/index2.php)。尝试单击事件之类的链接，然后单击设计，看看会发生什么。我的 html 在这里

```
<div class="coda-slider"  id="slider-id">
                    <div>
                        <?php
                        $counter = 0;
                        for ($x = 0; $x < 8; $x++) {
                            $counter++;
                            ?>
                            <div class="galleryitem">
                                <a href="images/flyer1.png" target="" rel="galleryitem"> <img src="images/flyer<?php echo $counter; ?>.png" alt="Flyer <?php echo $counter; ?>" title="Click to view more"/></a>
                                <!--strong>Flyer</strong-->
                                <span class="description"><strong>Item <?php echo $counter; ?></strong> Simple description..Lorem ipsum dolor sit amet, consectetuer adipiscing elit...<a href="product.php">more</a></span>

                            </div>
                        <?php } ?>
                    </div>

                </div> 
```

我的 ajax 加载器代码在这里。

```
var default_content="";
$(document).ready(function(){
    checkURL();
    $('ul li a').click(function (e){
        checkURL(this.hash);
    });
    //filling in the default content
    default_content = $('#slider-id').html();
    setInterval("checkURL()",250);
});

var lasturl="";
function checkURL(hash)
{
    if(!hash) hash=window.location.hash;
    if(hash != lasturl)
    {
        lasturl=hash;
        if(hash=="")
            $('#slider-id').html(default_content);
        else
            loadPage(hash);
    }
}

function loadPage(url)
{
    url=url.replace('#','');
    $('#loading').css('visibility','visible');
    $.ajax({
        type: "POST",
        url: "load_page.php",
        data: 'page='+url,
        dataType: "html",
        success: function(msg){
            if(parseInt(msg)!=0)
            {

                $('#slider-id').html(msg);
                $('#loading').css('visibility','hidden');
            }
        }

    });

} 
```

我的 php 后端代码在这里。

```
<?php
if (!$_POST['page'])
    die("0");
$page = $_POST['page'];
if ($page == 'design') {
    ?>

    <div>
        <?php
        $counter = 0;
        for ($x = 0; $x < 4; $x++) {
            $counter++;
            ?>
            <div class="galleryitem">
                <a href="images/flyer1.png" target="" rel="galleryitem"> <img src="images/flyer<?php echo $counter; ?>.png" alt="Flyer <?php echo $counter; ?>" title="Click to view more"/></a>
                <!--strong>Flyer</strong-->
                <span class="description"><strong>Item <?php echo $counter; ?></strong> Simple description..Lorem ipsum dolor sit amet, consectetuer adipiscing elit...<a href="product.php">more</a></span>
            </div>
        <?php } ?>
    </div>
    <?php
} else {
    echo 'No lists in that category';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:56:21.207

很可能在您的 ajax 更改为这个

```
$.ajax({
        type: "POST",
        url: "load_page.php",
        data: {'page':url }, /** this is syntax of POST**/
        dataType: "html",
        success: function(msg){
            if(msg.length > 0)
            {

                $('#slider-id').html(msg);
                $('#loading').css('visibility','hidden');
            }
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:01:52.297

我认为你应该做一个获取请求而不是发布。您没有向服务器发布您正在获得的东西（您的滑块内容）。您还必须更改 load_page.php。

查看您的代码，您似乎在添加新内容后没有调用任何滑块函数，您可能应该在成功回调中执行此操作。

```
$.ajax({
        type: "GET",
        url: "load_page.php",
        data: 'page='+url,
        dataType: "html",
        success: function(msg){
            if(parseInt(msg)!=0)
            {
                // guess you have some slider function

                $('#slider-id').html(msg);
                $('#loading').css('visibility','hidden');
                $('#slider-id').slider(); //example of slider function
            }
        } 
```

# php - 如何将任意大小的 Javascript 数组传递给 PHP

> ID：13910174
> 
> 赞同：2
> 
> 时间：2012-12-17T07:48:30.070
> 
> 标签：php, javascript, arrays, web-applications, parameters

我在 Javascript 中有一个具有多种可能大小的数组。我有什么办法可以将它传递给 PHP 文件进行计算？

我想在 html 中使用类似表单的东西

```
<form id="barfoo" action="foobar.php" method="post">
  <input type="hidden" name="foo">
  <input type="hidden" name="bar"> 
  <input type="hidden" name="bam">
</form> 
```

通常，这些输入是字符串。有没有办法让一个数组作为输入来传递？像`fooarray=['abc', 'dbe', '3r']`，或`fooarray=['1','c','4','5']`。在它生成之前，我不知道它的大小。是否可以将其放入表格并通过？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:50:41.707

用于`JSON.stringify(array)`在 JavaScript 中对数组进行编码，然后`$arr=json_decode($_POST['jsondata']);`在 PHP 中使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:51:37.230

将数组编码为 JSON，然后将其插入其中一个隐藏项。这可以在表单`onsubmit`事件中完成。

```
<form id="barfoo" action="foobar.php" method="post" onsubmit="populate()">
<input type="hidden" id="foo" name="foo">
</form>

<script>
var  fooarray=['1','c','4','5'];

function populate()
{
    document.getElementById("foo").value = JSON.stringify(fooarray);
}
</script> 
```

PHP 原生支持使用以下方式解码 JSON [`json_decode()`](http://php.net/manual/en/function.json-decode.php)：

```
$fooArray = json_decode($_POST['foo']);
print_r($fooArray); 
```

# c# - 内存碎片导致的 WCF 中的 OutOfMemoryException

> ID：13910181
> 
> 赞同：1
> 
> 时间：2012-12-17T07:49:00.880
> 
> 标签：c#, asp.net, wcf, tcp, out-of-memory

我做了一个简单的32位测试项目，只是一个计数器功能。客户端创建了几个线程来一直调用该函数。我用了30个线程运行，3分钟后（或者计数到20000），服务器内存碎片（做了一个dump文件，用WinDbg打开，输入！address -summary可以看到空闲的Largest Region by Usage是64kb） ，直接停止客户端调试，服务器可能会抛出OutOfMemoryException。请告诉我发生了什么以及如何解决这个问题。谢谢。

服务器代码：

```
using System;
using System.ServiceModel;

namespace Server
{
    class Program
    {
        static void Main(string[] args)
        {
            var tcpAddress = new Uri("net.tcp://localhost:9998/wcf");
            using (var host = new ServiceHost(typeof(DataProvider), tcpAddress))
            {
                host.AddServiceEndpoint(typeof (IData), new NetTcpBinding(), "");
                host.Opened += delegate { Console.WriteLine("Service is running..."); };
                host.Open();
                Console.ReadLine();
                host.Close();
            }
        }
    }

    [ServiceContract(Namespace = "WCF.Demo")]
    public interface IData
    {
        [OperationContract]
        string GetCounter();
    }

    [ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.PerSession)]
    public class DataProvider : IData
    {
        public int Counter { get; set; }

        public string GetCounter()
        {
            return string.Format(" counter = {0} test test test test test test test test test test test test test test",
                ++Counter);
            //return ++Counter;
        }
    }
} 
```

客户代码

```
using System;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.Threading;

namespace Client
{
    class Program
    {
        private static readonly CancellationTokenSource Cts = new CancellationTokenSource();

        static void Main(string[] args)
        {
            Console.WriteLine("Thread count：");
            var threadCount = int.Parse(Console.ReadLine());
            var cf = new ChannelFactory<IData>(new NetTcpBinding(), 
                new EndpointAddress("net.tcp://localhost:9998/wcf"));
            for (var i = 0; i < threadCount; i++)
            {
                new Thread(() =>
                {
                    var name = Thread.CurrentThread.Name;
                    var proxy = cf.CreateChannel();
                    while (!Cts.Token.IsCancellationRequested)
                    {
                        Thread.Sleep(10);
                        Console.WriteLine("{2}: {0}\t{1}", name, proxy.GetCounter(),
                            DateTime.Now.ToString("HH:mm:ss.fff"));
                    }

                    ((IChannel)proxy).Close();

                }) { Name = "thread " + i, IsBackground = true }.Start();
            }
            Console.Read();
            //Cts.Cancel();
            Thread.Sleep(100);
        }
    }

    [ServiceContract(Namespace = "WCF.Demo")]
    public interface IData
    {
        [OperationContract]
        string GetCounter();
    }
} 
```

# meteor - 如何在 Meteor 的新选项卡或窗口中打开链接

> ID：13910184
> 
> 赞同：13
> 
> 时间：2012-12-17T07:49:17.717
> 
> 标签：meteor

我还没有找到任何有效的方法。我已经尝试了以下所有方法，但无济于事：

*   将属性添加`target="_blank"`到`<a>`
*   添加`target="someName"`到`<a>`
*   网址以`'/'`
*   网址以`Meteor.absoluteUrl()`
*   URL 以`Meteor.absoluteUrl()`删除的`"http://"`开头
*   URL 作为字符串文字，不从模板帮助程序返回
*   `<a>``{{#constant}}`模板中的内部区域
*   `<a>`不在`{{#constant}}`模板区域内
*   `<a>`在任何模板之外的正文中
*   `<a>`附加到浏览器控制台中的正文
*   `window.open([url],[target])`与所有上述组合。

在所有情况下，链接都会在与单击位置相同的选项卡中打开，但不以 开头的 URL 除外`http://`，它会在新选项卡中打开`about:blank`页面。

知道是什么原因造成的，或者如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T17:38:39.817

这似乎是一个错误。我认为 Meteor 应该忽略与`target="_blank"`. [也许您可以在问题跟踪器](https://github.com/meteor/meteor/issues/new)上创建问题

也就是说，我已经成功地解决了这个问题：

*测试.html*

```
<template name="test">
  <a href="/new-window" target="_blank">Open new window</a>
</template> 
```

*测试.js*

```
Template.test.events({
  'click a[target=_blank]': function (event) {
    event.preventDefault();
    window.open(event.target.href, '_blank');
  }
}); 
```

另外，我发现`http://`为外部链接添加作品，例如

```
<a href="http://twitter.com" target="_blank">Open new window</a> 
```

我不确定为什么这些东西对你不起作用。但是，我只在 Chrome 中测试过它们，所以这可能是浏览器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T16:50:47.760

如果使用phonegap。答案在这里 [phonegap 在浏览器中打开链接](https://stackoverflow.com/questions/17887348/phonegap-open-link-in-browser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T18:33:50.580

我肯定来晚了，但是对于那些最终会在这里试图找到解决这个问题的方法的人（比如我），我只想明确地说明一下提到的`window.open([url],[target])`方法，对于那些需要窗口的人而是一个新标签..

第三个参数`window.open`是逗号分隔的规范列表。第二个参数的默认值是`_blank`使新窗口在新选项卡中打开。

`window.open(event.target.href, "", "width=200, height=200");`**应在具有给定尺寸的新窗口**（不是新选项卡）中打开目标 URL 。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-12T12:13:57.647

创建这个全局助手

```
Helpers.addHttp = function (url) {
  if (!/^(f|ht)tps?:\/\//i.test (url)) {
    url = "http://" + url;
  }
  return url;
} 
```

在模板中使用它

```
<a href="{{addHttp url}}" target="_blank">some text</a> 
```

# python - Pymongo find_and_modify - 使用切片

> ID：13910185
> 
> 赞同：0
> 
> 时间：2012-12-17T07:49:23.593
> 
> 标签：python, mongodb, pymongo

我正在尝试在 pymongo 中使用 find_and_modify （我对此很陌生）

以下语法似乎因 pymongo.errors.OperationFailure 而失败 有人可以解释原因

```
posts.find_and_modify(query={'permalink':permalink,'comments':{'$slice':[ordinal,1]}},update={'$inc':{'num_likes':1}},upsert=True) 
```

posts 是一个有效的集合，并且 permalink 是一个适当的字符串，序数是一个 int

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:06:21.387

选项

```
'$slice':[ordinal,1] 
```

不能是查询条件的一部分，因为它定义了返回行为。但根据定义，find_and_modify 函数只处理一条搜索记录。在您的情况下，最好为每个评论记录分配一个 id 并使用 'commentId':ordinal 作为查询中的一个标准。

请参阅[http://docs.mongodb.org/manual/reference/projection/slice/](http://docs.mongodb.org/manual/reference/projection/slice/)和[http://docs.mongodb.org/manual/reference/command/findAndModify/](http://docs.mongodb.org/manual/reference/command/findAndModify/)以供参考。

# wpf - 在 WPF 中存储多个 SQL Server 数据库的连接字符串信息

> ID：13910187
> 
> 赞同：0
> 
> 时间：2012-12-17T07:49:29.277
> 
> 标签：wpf, wpf-4.0

我首先有一个由实体框架代码备份的 wpf 应用程序。该应用程序允许用户创建新数据库并使用 wpf 屏幕处理它们。首先在 Entity Framework 代码中创建新数据库非常简单，这不是问题。但是，我正在努力寻找一种将特定 wpf 客户端与他正在处理的当前数据库相关联的体面方法。数据库连接字符串的构造如下所示。

```
providerConnectionString = "Server=" + serverName + ";" + "Database=" + databaseName +
            "; User Id = userId; Password = password; Persist Security Info=True;"; 
```

正如您在上面看到的，我必须在客户端计算机上的某处存储服务器、数据库名称、用户 ID 和密码，以便在客户端启动 wpf 应用程序时可以选择正确的数据库以供使用。为了增加一些复杂性，如果用户希望使用 wpf 应用程序，他可以从一个数据库切换到另一个数据库。在这种情况下，我将不得不重置上述四个连接字符串参数以指向新数据库。

我不想为 WPF 应用程序提供任何密码保护。上面写的所有内容仅适用于 SQL Server 数据库连接字符串。

因此，总而言之，在可以从 wpf 应用程序动态添加新数据库的情况下，为特定 wpf 客户端存储 sql server 连接字符串信息的最佳方式是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:46:18.767

如何在代码中存储默认连接，然后允许用户在 WPF 应用程序中更改连接详细信息，然后将其存储在独立存储中。因此，连接将针对每个 WPF 客户端用户。或者，如果您必须在第一个实例中设置它 - 检查登录用户，然后找到数据库连接信息，然后将其存储在隔离存储中，以供后续代码访问。

例如向这个对象添加一个键值对

```
IsolatedStorageFile isolatedStorage = IsolatedStorageFile.GetUserStoreForAssembly();

Dictionary<string,string> dict = new Dictionary<string,string>(); 
```

添加到您的字典...

```
IsolatedStorageFile isoStore = 
          IsolatedStorageFile.GetStore( IsolatedStorageScope.User 
          | IsolatedStorageScope.Assembly, null, null );
        Stream stream = new 
          IsolatedStorageFileStream(someFileName, 
          FileMode.Create, isoStore );

        if ( stream != null )
        {
            try
            {
                // Serialize the object into the IsolatedStorage.
                IFormatter formatter = new BinaryFormatter();
                formatter.Serialize( stream, (Dictionary)dict);
            }
            finally
            {
                stream.Close();
            }
        } 
```

# objective-c - reverseGeocodeLocation 存储为 NSString 产生错误

> ID：13910192
> 
> 赞同：1
> 
> 时间：2012-12-17T07:50:10.633
> 
> 标签：objective-c, ios, cllocationmanager, clgeocoder

我正在尝试使用 reverseGeocodeLocation 返回用户的状态。我正在使用此代码从另一个视图中提取用户的位置。

```
NSString *userState =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate     
getAddressFromLocation]; 
```

我收到以下错误：'NSInvalidArgumentException'，原因：'-[PDCAppDelegate getAddressFromLocation]：无法识别的选择器已发送到实例。我在 PDCAppDelegate 中用于返回地址的代码如下。

```
-(NSString *)getAddressFromLocation:(CLLocation *)location {
NSString *address;
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError 
*error)
 {
     if(placemarks && placemarks.count > 0)
     {
         CLPlacemark *placemark= [placemarks objectAtIndex:0];

         NSString *address = [NSString stringWithFormat:@"%@ %@,%@ %@", [placemark 
subThoroughfare],[placemark thoroughfare],[placemark locality], [placemark 
administrativeArea]];

         NSLog(@"%@",address);
     }

 }];

return address;
} 
```

有人知道怎么修这个东西吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:04:28.270

CLGeocoder 方法[`reverseGeocodeLocation:completionHandler:`](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/instm/CLGeocoder/reverseGeocodeLocation%3acompletionHandler%3a)异步运行。这意味着您无法返回地址，`getAddressFromLocation:`因为当您从此方法返回时，根本没有设置地址。

当地理编码器收到地址（或调用导致错误）时，它将运行完成处理程序。您必须在完成处理程序中设置或显示地址。

最简单的方法是发送 NSNotification，但可能不是最好的方法：

```
-(void)getAddressFromLocation:(CLLocation *)location {
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error)
     {
         if (!placemarks) {
             // handle error
         }

         if(placemarks && placemarks.count > 0)
         {
             CLPlacemark *placemark= [placemarks objectAtIndex:0];
             NSString *address = [NSString stringWithFormat:@"%@ %@,%@ %@", [placemark subThoroughfare],[placemark thoroughfare],[placemark locality], [placemark administrativeArea]];

             // you have the address.
             // do something with it.
             [[NSNotificationCenter defaultCenter] postNotificationName:@"MBDidReceiveAddressNotification" 
                  object:self 
                userInfo:@{ @"address" : address }];
         }
     }];
} 
```

# java - HQL 中的括号未转换为 SQL

> ID：13910195
> 
> 赞同：8
> 
> 时间：2012-12-17T07:50:21.520
> 
> 标签：java, hibernate

这是我的 HQL：

```
Query query = createQueryOnCurrentSession("DELETE Email e " +
                "where " +
                "(status = :sent and creationTime <= :creation)" +
                "or " +
                "(status = :error and maxEttempts >= :maxEttempts)"); 
```

这是生成的 SQL：

```
delete from `email` where `status`=? and `creation_time`<=? or `status`=? and `attempts`>=? 
```

问题：为什么括号不在SQL中？我希望它是：

```
delete from `email` where (`status`=? and `creation_time`<=?) or (`status`=? and `attempts`>=?) 
```

可以替代我将在 2 个请求中删除吗？

```
delete from `email` where `status`=? and `creation_time`<=?
delete from `email` where `status`=? and `attempts`>=? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T07:58:13.947

它实际上是一个功能。

由于`and`优先于`or`，hibernate 知道它，并删除括号。

你不需要那些括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:20:19.870

**逻辑运算符 AND 的优先级高于逻辑运算符 OR**

对于运算符优先级，请点击链接

```
http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html
http://msdn.microsoft.com/en-us/library/ms190276.aspx

http://docs.oracle.com/html/A85397_01/operator.htm#997691 
```

# ruby - 正则表达式搜索一个非常大的文件

> ID：13910199
> 
> 赞同：5
> 
> 时间：2012-12-17T07:50:49.163
> 
> 标签：ruby, regex

我需要用正则表达式扫描一个 300MB 的文本文件。

*   读取整个文件并将其放入变量中会占用超过 700MB 的 RAM，然后因“无法分配内存”错误而失败。
*   匹配可以是两行或三行，所以我不能在循环中使用行到行步进。

是否有任何惰性方法可以使用正则表达式进行完整文件扫描而不将其读入单独的变量？

**UPD**

完毕。现在您可以使用此功能按块读取。为您的目标修改它。

```
def prepare_session_hash(fname, regex_string, start=0)
  @session_login_hash = {}
  File.open(fname, 'rb') { |f|
    fsize = f.size
    bsize = fsize / 8
    if start > 0
      f.seek(start)
    end

    overlap = 200

    while true
      if (f.tell() >= overlap) and (f.tell() < fsize)
        f.seek(f.tell() - overlap)
      end
      buffer = f.read(bsize)
      if buffer
        buffer.scan(s) { |match|
          @session_login_hash[match[0]] = match[1]
        }
      else
        return @session_login_hash
      end
    end
  }
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T08:05:59.967

1.  以块的形式遍历文件，而不是逐行遍历文件，其中块是由频繁出现的字符或模式的出现创建的，比如“X”。
2.  “X”是这样的，它永远不会存在于您的正则表达式中，即“X”是您的正则表达式永远不会匹配字符串的位置。
3.  在当前块中匹配您的正则表达式，提取匹配项并继续下一个块。

例子：

```
This is string with multline numbers -2000
2223434
34356666
444564646
. These numbers can occur at 34345
567567 places, and on 67
87878 pages . The problem is to find a good
way to extract these more than 100
0 regexes without memory hogging. 
```

在本文中，假设所需的模式是数字字符串，例如`/d+/s`匹配数字多行，那么您可以选择一个块创建模式，而不是处理和加载整个文件，在这种情况下说 FULL STOP`.`并且只读取和处理直到该模式，然后移动到下一个块。

块#1：

```
This is string with multline numbers -2000
2223434
34356666
444564646
. 
```

块#2：

```
These numbers can occur at 34345
567567 places, and on 67
87878 pages 
```

等等。

编辑：也从评论中添加@Ranty的建议：

> 或者简单地阅读一些行数，比如 20 行。当您在其中找到匹配项时，清除匹配项并附加另外 20 行。无需计算频繁出现的“X”。

# java - 输入流与输出流有何不同？

> ID：13910201
> 
> 赞同：6
> 
> 时间：2012-12-17T07:50:50.023
> 
> 标签：java, inputstream, outputstream

我看到两者都是数据的“流”。在那种情况下，为什么认为它们不同？真的有什么区别？

评论 - 请不要关闭这个问题。这是在面试中可以使人们感到困惑的基本内容。

**更新 1** - 每个人似乎都在说同样的话 - 你从 IS 读取并写入操作系统。所以，它们基本上是一样的。就像有水流过的管道。当您使用该管道中的水时，您将其称为 InputStream，当您将水泵入其中时，它称为输出流。真的那么微不足道吗？

**UPDATE2 -** 如果差异不是那么“大”，那么我们是否可以拥有一个 InAndOutStream 而不必为两个类（InputStream 和 OutputStream）编写代码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T07:52:46.120

它们在概念上是不同的

*   从`InputStream`你读
*   给`OutputStream`你写

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T08:08:56.630

流是您按顺序访问的数据。你可以把它想象成从隧道入口看到的火车，这样你一次只能看到一辆车。或者一串小部件穿过传送带，要求你在每个小部件上拧紧一个螺丝，然后它才能传递给流水线上的下一个必须用锤子敲打它的人，依此类推。或者当您从桥上观看时，木棍顺流而下。

无论它们在内部如何工作，所有流都向使用它们的程序呈现相同的简单模型：流是数据序列。程序使用输入流从源中读取数据，一次读取一项： ![IO 流](../Images/f3a4b219a8b31984f289c2566a4573ee.png)

程序使用输出流将数据写入目标，一次写入一项： ![IO 流](../Images/78e7d969c2d6fb71e4d5f76bf608a037.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T08:39:35.953

> 如果差异不是那么“大”，那么我们是否可以拥有一个 InAndOutStream 而不必为两个类（InputStream 和 OutputStream）编写代码？

除了 ByteArray 类之外，这是不可能的。原因是大多数 Streams 都由系统提供的设备（例如文件或套接字）支持。在文件的情况下，您写入的文件是您从中读取的文件，但在套接字的情况下，您写入的流与您读取的流无关。

恕我直言，即使尝试将它们结合起来也是一个坏主意，因为人们在文本和二进制流之间感到困惑。如果他们可以读写同一个流，我怀疑你会更加困惑。

一般来说，开发人员应该清楚地知道他们是从设备读取还是写入。如果他们不清楚，你肯定会遇到问题。

仅供参考：我已经编写了一个库，它完全按照您在内存流中的建议，如“管道”；）但是，我会说它只适用于专家开发人员，即使这样我也会尽可能地保持接口不同以防止混淆。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T07:52:06.267

您从*读取*，`InputStream`然后*写入*。`OutputStream`这是他们之间的关键区别。

在某些情况下，您需要能够读写。一个这样的例子是流[套接字](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)。Java 库处理此问题的方式是使用一个`InputStream` *和*一个`OutputStream`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-17T08:06:29.670

流的概念并不像您在问题中暗示的那样对称。由于这是 Java，流的读取器和写入器在执行环境中占据完全不同的位置：一个实现流对象，另一个调用它的方法。

因此，由于语言强制模型上的不对称性，Java 中任何 I/O 工具的实现者都需要提前确定是占据流的读取端还是写入端。该设施的用户没有选择权。例如，然后；为了实现一个从用户那里接收数据的 I/O 工具，需要实现一个`OutputStream`（用户会调用它来写入）。

为了实现对称设施，语言需要能够协同执行。在这种情况下，流可以真正具有可读和可写的一面，而试图写入的调用者将屈服于读者，反之亦然。然而，Java 不支持这样的工具。（至少在多线程之外，这对于大多数情况来说显然太重了。）

我希望这让它更清楚一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T07:53:42.330

我最好的选择是保持它们很小，当用户只打算读取流时，为什么要加载用于写入流的函数？不过，这纯粹是基于我的猜测...

编辑：我对word文件很傻，流不仅可以用于文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-19T04:19:21.743

为了避免流之间的混淆，例如html注册表单，进入表单的数据称为input-data，一旦注册成功或失败输出称为out-data。与应用程序通过输入流接收数据的方式相同，应用程序通过输出流发送数据。

以下代码帮助我们避免流之间的混淆：

```
//Standard input: 
Scanner scan = new Scanner(System.in);
String s = scan.next();

//Standard output
System.out.println("Hello World!"); 
```

# javascript - 使用 CSS3 缩放属性检测 IE 中的实际窗口大小

> ID：13910203
> 
> 赞同：0
> 
> 时间：2012-12-17T07:51:00.787
> 
> 标签：javascript, html, internet-explorer, css, doctype

我在这里面临一个奇怪的问题。我知道 IE 在计算窗口的高度和宽度时的行为与其他浏览器完全不同，但我对我的发现感到非常震惊。这是代码..

```
var i = 1; 
setInterval(function() {
    if (i % 2 == 0)
        $("body").css("zoom","0.15");
    else
        $("body").css("zoom","1");
    i++;
    console.log(i+" ("+$(window).width()+" X "+$(window).height()+")");                
},1000 ); 
```

代码非常简单。我正在做的是每隔一秒我使用[CSS3 的缩放](http://www.css3.com/css-zoom/)属性缩放身体并计算窗口的高度和宽度。它只是放大和缩小的主体，而窗口的尺寸保持不变。

现在，当我在 Firefox 中测试此脚本时，每次放大或缩小页面时都会获得统一的窗口尺寸（理想情况）。但是在 IE 中并非如此。它在 (1004 X 358) 到 (6807 X 2500) 之间来回摆动，绝对不会调整窗口大小。当我使用`clientWidth`&时，我得到了相同的读数`clientHeight`。

我还附上了 IE 9 的控制台日志屏幕截图。我想知道是否有任何方法可以在使用`zoom`属性时获得实际的窗口尺寸。欢迎任何建议。

我正在使用以下文档类型

> < !DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 过渡//EN" >

有趣的是，当我使用**< !DOCTYPE HTML>**时，我得到了正确的尺寸，但是缩放不起作用。有什么办法可以得到正确的尺寸和工作变焦？

![在此处输入图像描述](../Images/880ff94733f8ef7cd60b3034642e6645.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:20:10.207

`zoom`不是 CSS3 的属性，而是纯粹的 MS 发明，它相当古老，也意味着他们可以为所欲为。

当您使用`<!DOCTYPE HTML>`触发标准模式时，在较新的 IE 中您需要使用`-ms-zoom`而不是`zoom`.

假设你的测试是正确的，我建议不要试图解决 IE 的错误行为，而是着眼于更大的图景，但为此我需要知道：你为什么需要知道窗口有多大？你为什么用`zoom`？那么真正的 CSS3 属性`transform`呢？

# css - 使用引导程序的网格时，如何使列使用其父级高度的 100%？

> ID：13910208
> 
> 赞同：1
> 
> 时间：2012-12-17T07:51:54.153
> 
> 标签：css, twitter-bootstrap

我想在引导程序中创建一个带有侧边栏和主要内容的布局。我目前正在使用以下 html（也在[这个 jsFiddle](http://jsfiddle.net/EzwHN/)中）：

```
<!DOCTYPE html>
<html>
<head>
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
<style type="text/css">
    #sidebar {
        background-color: lightgreen;
    }
    #footer {
        background-color: lightblue;
    }
</style>
</head>

<body>
<div class="container">
    <div class="row">
        <div class="span4">
            <div id="sidebar">
                <ul>
                    <li><a href="http://www....">Home</a></li>
                    <li><a href="http://www..../faq">Questions</a></li>
                    <li><a href="http://www..../news">News</a></li>
                    <li><a href="http://www..../contact">Contact</a></li>
                </ul>
            </div>

        </div>
        <div class="span8" id="content">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Aenean in purus purus.
                Ut risus lorem, pharetra nec iaculis sit amet, blandit nec turpis.
                Aliquam dapibus orci ac sem viverra semper cursus ante varius.
                Vestibulum iaculis eleifend magna, sit amet blandit nibh dignissim pellentesque.
                Etiam suscipit accumsan tincidunt.
                Sed auctor, orci at pretium commodo, enim dui fermentum nulla, id blandit enim lacus non mi.
                Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
            </p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Aenean in purus purus.
                Ut risus lorem, pharetra nec iaculis sit amet, blandit nec turpis.
                Aliquam dapibus orci ac sem viverra semper cursus ante varius.
                Vestibulum iaculis eleifend magna, sit amet blandit nibh dignissim pellentesque.
                Etiam suscipit accumsan tincidunt.
                Sed auctor, orci at pretium commodo, enim dui fermentum nulla, id blandit enim lacus non mi.
                Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
            </p>

        </div>
    </div>
    <div class="row">
        <div class="span12" id="footer">
            Footer
        </div>
    </div>
</div>
</body>
</html>​ 
```

我想要的是这样的：

![期望的结果](../Images/a410f949f84b616e39f180257fadec5e.png)

然而，我得到的是：

![实际结果](../Images/4ee955c5e427aed601c8082793019407.png)

我该怎么做才能让侧边栏 div 一直向下？理想情况下，无需更改 html（仅更改 css），但如果不可能，我会采取任何措施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:35:22.917

您可以通过使用“填充”元素来实现这一点。

创建两个 CSS 类，一个称为`.filler`（父级），另一个带有伪元素的类称为`.fill::before`：

```
.filler{
    position: relative;   
}

.fill::before{
    content: "";
    position: absolute;
    top:0;
    left: 0;
    width: inherit;
    margin: inherit;
    bottom: 0;
    background-color: lightgreen;
    z-index: -1;
} 
```

然后，您可以将`filler`类添加到`row`元素并将`fill`类添加到`span4`元素：

```
<div class="container">
    <div class="row filler">
        <div class="span4 fill">
            <div id="sidebar">
                <ul>
                    <li><a href="http://www....">Home</a></li>
                    <li><a href="http://www..../faq">Questions</a></li>
                    <li><a href="http://www..../news">News</a></li>
                    <li><a href="http://www..../contact">Contact</a></li>
                </ul>
            </div>
        </div>
    ....
</div> 
```

# oracle - 如何从 SQL 在 Oracle 的序列 ID 字段中插入值？

> ID：13910214
> 
> 赞同：0
> 
> 时间：2012-12-17T07:52:27.623
> 
> 标签：oracle, insert

我想在 Oracle 表中插入一行。我有不能发送`mySeq.nextVal`插入脚本的限制。如果我省略了那个 ID 字段，应用程序会尝试在那里插入 NULL。有一个在插入前使用触发器的解决方案。但我不想使用触发器。

有没有其他方法可以在 Oracle 表的序列字段中插入值？我可以更改 DDL 并将`mySeq.nextVal`ID 字段设置为默认值吗？还是有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:39:47.630

不幸的是，您无法在插入语句中使用 nextval 并且您希望避免触发器在这里是不一致的。如果出于某种原因您不能为此目的在表上放置触发器，则可以在表上创建一个视图并在视图上放置一个“代替”触发器以插入到带有 nextval 的基础表中。我不会推荐它。

# windows-phone - 无法注册 Windows Phone 开发者帐户 - “保存更改时发生了一些事情。再试一次”

> ID：13910215
> 
> 赞同：1
> 
> 时间：2012-12-17T07:52:29.520
> 
> 标签：windows-phone, windows-phone-8

我正在尝试创建一个 Windows Phone 开发人员帐户，但在注册过程中显示“保存更改时发生了一些事情。再试一次”。
我已经尝试过推荐的解决方法
（[http://social.msdn.microsoft.com/Forums/en-US/wpregister/thread/044dfcb3-70f8-46fc-b79f-f654dca66122](http://social.msdn.microsoft.com/Forums/en-US/wpregister/thread/044dfcb3-70f8-46fc-b79f-f654dca66122)）但我不工作，所以没有开发人员为我考虑。这很无奈，sincs没有逻辑错误，只是一条无用的信息。

有没有人有任何想法或其他解决方法？

谢谢

比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:34:34.403

我会找到一个新的解决方法，登录到我的 MSDN 帐户。登录到 MSDN 帐户后，我保持 MSDN 选项卡（更准确地说，“我的帐户”-选项卡）打开，然后尝试在 windows phone 开发人员页面注册 - 成功！

请参阅此链接以获取另一种解决方法（几乎在底部）：[http ://social.msdn.microsoft.com/Forums/en-US/wpregister/thread/044dfcb3-70f8-46fc-b79f-f654dca66122](http://social.msdn.microsoft.com/Forums/en-US/wpregister/thread/044dfcb3-70f8-46fc-b79f-f654dca66122)

最后我有一个 Windows Phone 开发者帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T03:05:53.817

工作很简单！它对我有用。

问题在于电话条目。

如果您来自美国，则在第一个文本框中为 +1，在第二个文本框中为区号为 xxx，在第三个文本框中为剩余的电话号码。

我希望，微软应该在客户端验证中捕捉到这一点，并且想知道即使现在问题仍然存在，没有永久修复或错误处理。

# c# - Win 32 Dll 在 Activex 中工作，但在 C++/c# 测试应用程序中崩溃

> ID：13910217
> 
> 赞同：0
> 
> 时间：2012-12-17T07:52:37.080
> 
> 标签：c#, c++, dll, activex

我已经编写了一个 C++ dll，我必须为此编写一个 C# 包装器。在 Activex 包装器中，c++ 函数工作正常。但是在测试应用程序和 C# 包装器中，代码运行一次，下次我会遇到这样的内存异常。

TestApplication.exe 中 0x0055365a (msvcr80d.dll) 处的未处理异常：0xC0000005：访问冲突写入位置 0x00000001。

堆栈跟踪在 memset 行显示错误，如下所示。

```
VOID Clear () {

    if (byFeature != NULL) {
            memset (this->byFeature, '\0', VF_MAX_FEATURES_SIZE - 1 ); ==> crash at this line 
        this->iFeatureSize = 0;
    }
    else
        this->iFeatureSize = 0;

    this->iMinutiaeCount = 0;
    this->G = 255;

} 
```

我试图在分配它之前清除 byFeature。它在第一个周期正常运行。第二次撞车。

我做对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:12:03.363

这是正在发生的事情。

*   你所拥有的是一个**错误**。
*   你需要的是一个**调试器**。

将其加载到调试器中，在该行上放置一个断点，或者只是运行它，当发生访问冲突时，调试器会告诉你到底哪里出了问题。

# android - 如何在Android中录制后台实时音频？

> ID：13910220
> 
> 赞同：2
> 
> 时间：2012-12-17T07:52:51.173
> 
> 标签：android, audio

在我的应用程序中，我正在录制实时音频并播放它。该进程正在一个线程中工作。在我的代码中，我使用 recorder.setPositionNotificationPeriod(1000); 我发现这个特定的代码在主线程中运行，所以我无法访问其他控件，发现应用程序被卡住了。我应该怎么做才能使此代码在后台工作？

# background-image - QTP 中的背景图像验证

> ID：13910223
> 
> 赞同：1
> 
> 时间：2012-12-17T07:52:58.857
> 
> 标签：background-image, qtp, ui-automation

我`Div`在主页上有一个，我需要将它的背景图像与我将在运行时提供的路径进行比较。

我希望合并一个图像比较的 .dll 文件，但如果有其他更好的选择，那就太好了。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:13:21.043

使用描述性编程方法来验证 BG 图像。

# android - 显示阿拉伯语键盘的 Android 代码

> ID：13910225
> 
> 赞同：0
> 
> 时间：2012-12-17T07:53:12.983
> 
> 标签：android

我正在开发一个应用程序，我必须在单击按钮时更改 Android 键盘。我想展示阿拉伯语键盘。但我的设备没有阿拉伯语。英文键盘显示正常。但我无法显示阿拉伯语键盘。有什么办法可以做到这一点。请分享一些想法。提前致谢。

# oracle-apex - 如何在 Apex 中加载 Flash 图表？

> ID：13910226
> 
> 赞同：1
> 
> 时间：2012-12-17T07:53:13.440
> 
> 标签：oracle-apex

我有两个日期选择器，一个 Go 按钮和一个基于 Flash 的图表。图表中的系列根据日期选择器中的日期从数据库中获取数据，这些日期填充了默认日期。当我按下 Go 按钮时，一切正常：图表加载并按预期显示图形。

我的问题是我希望在加载页面时填充图表，但事实并非如此。该图表仅显示“未找到数据”消息，直到我按下“开始”按钮。

我检查了加载顺序，它是正确的 - 日期选择器在图表之前加载。查看页面事件，我可以清楚地看到情况就是这样。我还添加了一个简单的 HTML 图表，只是为了看看发生了什么，它在加载时被填充，但不是基于 Flash 的图表。

有没有我缺少的配置？甚至可以在加载时填充图表吗？

我在 Oracle 11.2.0.2.0 上使用 Apex 和产品版本 4.0.2.00.07。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:40:11.127

**为了任何遇到此问题的人的利益**

您可能只将默认日期设置为开始和结束日期项目的属性。这将使项目以您指定的默认值呈现在屏幕上，但这些值不会保存在会话状态中，因此在按下 Go 按钮之前，该区域的源 SQL 无法访问这些值。

解决方案是创建两个 Before Header 计算；一个将设置开始日期项目，一个将设置结束日期项目。这将在会话状态中设置开始和结束日期项，以便区域源 SQL 在加载时可以访问它们。确保每个计算中都包含一个条件，以便它们仅在项目的值为 NULL 时设置。

# java - 如何在 RSA 7.5.5.3 中设置 PMD？

> ID：13910229
> 
> 赞同：0
> 
> 时间：2012-12-17T07:53:21.050
> 
> 标签：java, code-analysis, rad

我有 RSA（Rational Software Architect）7.5.5.3，我在我的 IDE 中实现了 findbug。但我需要在我的 RSA 中实现 PMD。所以请告诉我在我的 RSA 中实现这个的程序或方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:07:32.090

根据[此链接](http://sourceforge.net/p/pmd/discussion/188192/thread/61031804#6a03)，您需要使用与您的 RSA 版本所基于的 Eclipse 版本相对应的 PMD for Eclipse 插件版本。根据[Wikipedia](http://en.wikipedia.org/wiki/IBM_Rational_Software_Architect#IBM_Rational_Software_Architect_Versions)，即 Eclipse 3.6*又名*Helios。

除此之外......它只是一个插件，所以你应该能够像其他 Eclipse 插件一样安装它。

* * *

**更新**- 我刚刚注意到您提到了两个不同版本的 RSA。检查第二个链接以找到您*实际*使用的版本的对应关系。

# c# - XML解析错误

> ID：13910234
> 
> 赞同：2
> 
> 时间：2012-12-17T07:53:46.637
> 
> 标签：c#, asp.net

尝试在 C# 中的 Web 应用程序中实现下载功能时出现 XML 解析错误。相同的代码在另一个 Web 表单中运行。

```
SqlConnection cn = new SqlConnection();

cn.ConnectionString =ConfigurationManager.ConnectionStrings["cn"].ConnectionString.ToString();
cn.Open();

String abc = null;

SqlCommand cm = new SqlCommand("select User_ID from Mgmt where S_Name='" + DropDownList1.Text + "'", cn);

SqlDataReader dr = cm.ExecuteReader();

if (dr.Read())
{
    abc = dr.GetString(0).ToString();
}

dr.Close();
cm.Dispose();

String ab = null;

SqlCommand cmd = new SqlCommand("select Result from Result where Clg_ID='" + abc + "'and Student_ID='" + TextBox1.Text + "'", cn);
SqlDataAdapter drr = new SqlDataAdapter(cmd);

DataSet ds = new DataSet();

drr.Fill(ds);

ab = ds.Tables[0].Rows[0][0].ToString();

Response.ContentType = "application/pdf";
Response.AppendHeader("Content-Disposition", "attachment; filename='"+ab+"'");
Response.TransmitFile(Server.MapPath("~/Result/"+ab));
Response.End();

cn.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:03:34.257

经过大量的努力，我得到了自己问题的可能答案。这不是一个准确的答案。我刚换了电脑，然后这个错误就没有了，回到我以前的电脑，错误也得到了解决。我仍然不知道是什么导致了错误以及它是如何解决的。

# c# - 具有异步任务方法的对象列表，所有并发执行

> ID：13910238
> 
> 赞同：4
> 
> 时间：2012-12-17T07:53:52.860
> 
> 标签：c#, concurrency, task-parallel-library, .net-4.5, async-await

鉴于以下情况：

```
BlockingCollection<MyObject> collection;

public class MyObject
{
   public async Task<ReturnObject> DoWork() 
   {       
      (...) 
      return await SomeIOWorkAsync();
   }
} 
```

什么是同时在*集合中的***所有**MyObjects上异步执行**所有**DoWork() 任务的正确/最高效的方法（同时捕获返回对象），但理想情况下具有合理的线程限制（我相信任务工厂/线程池在这里做了一些管理)?

 **** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T07:57:18.407

您可以使用WhenAll 扩展方法。

```
var combinedTask = await Task.WhenAll(collection.Select(x => x.DoWork()); 
```

它将同时启动所有任务并等待所有任务完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T12:03:36.073

`ThreadPool`管理正在运行的*线程*`Task`数，但这对异步s没有多大帮助。

正因为如此，你需要别的东西。一种方法是利用`ActionBlock`TPL 数据流：

```
int limit = …;
IEnumerable<MyObject> collection = …;

var block = new ActionBlock<MyObject>(
    o => o.DoWork(),
    new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = limit });

foreach (var obj in collection)
    block.Post(o);

block.Complete();
await block.Completion; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T14:56:22.907

> 在集合中的所有 MyObjects 上同时（同时捕获返回对象）异步执行所有 DoWork() 任务的正确/最高效的方法是什么，理想情况下具有合理的线程限制

最简单的方法是使用`Task.WhenAll`：

```
ReturnObject[] results = await Task.WhenAll(collection.Select(x => x.DoWork())); 
```

这将调用集合中的`DoWork`所有内容`MyObjects`，然后等待它们全部完成。线程池明智地处理所有限制。

> 如果我想立即捕获每个单独的 DoWork() 返回而不是等待所有项目完成，是否有不同的方法？

是的，您可以使用[Jon Skeet](http://msmvps.com/blogs/jon_skeet/archive/2012/01/16/eduasync-part-19-ordering-by-completion-ahead-of-time.aspx)和[Stephen Toub](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)描述的方法。我的 AsyncEx 库（可通过 NuGet 获得）中有一个[类似的解决方案](http://nitoasyncex.codeplex.com/wikipage?title=TaskExtensions)，您可以像这样使用它：

```
// "tasks" is of type "Task<ReturnObject>[]"
var tasks = collection.Select(x => x.DoWork()).OrderByCompletion();
foreach (var task in tasks)
{
  var result = await task;
  ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:18:30.537

我的评论有点神秘，所以我想添加这个答案：

```
List<Task<ReturnObject>> workTasks =
  collection.Select( o => o.DoWork() ).ToList();

List<Task> resultTasks =
  workTasks.Select( o => o.ContinueWith( t =>
      {
        ReturnObject r = t.Result;
        // do something with the result
      },
      // if you want to run this on the UI thread
      TaskScheduler.FromCurrentSynchronizationContext()
    )
  )
  .ToList();

await Task.WhenAll( resultTasks ); 
```***

# sql - 搜索日期sql错误

> ID：13910239
> 
> 赞同：-1
> 
> 时间：2012-12-17T07:54:00.357
> 
> 标签：sql

我有这个查询来获取两个日期之间的所有数据，如下所示：

```
SELECT *
FROM cashier_trans
WHERE cashier_trans_Customerid LIKE '%kam%'
OR cashier_trans_Date
BETWEEN '2012/12/01'
AND '2012/12/02'
ORDER BY cashier_trans_Customerid, cashier_trans_DocType, cashier_trans_DocId ASC 
```

我从数据库中检索的数据：

```
Name     Date
kam      16/12/2012 
```

为什么我检索日期`16/12/2012`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:56:34.373

查看 where 子句条件：

```
WHERE 
     cashier_trans_Customerid LIKE '%kam%'
  OR  <-------------
     cashier_trans_Date BETWEEN '2012/12/01' AND '2012/12/02' 
```

您显示的数据包含 Name = 'kam' 并因此满足`WHERE`条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:58:34.360

'cashier_trans_Date' 表中的列格式为 'mm/dd/yyyy'。但在查询中，您使用的是 'yyyy/mm/dd' 格式。这会帮助你，

```
SELECT *
FROM cashier_trans
WHERE cashier_trans_Customerid LIKE '%kam%'
OR cashier_trans_Date
BETWEEN '12/01/2012'
AND '12/02/2012'; 
```

除了在'where'子句中你使用'%kam%'。所以很明显你会收到'kam'的记录

# iphone - 如何删除对视图控制器的引用

> ID：13910244
> 
> 赞同：-1
> 
> 时间：2012-12-17T07:54:13.127
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我的 xcode 项目中的一些文件指的是我可能通过 exident 即时制作的视图控制器，而不是它们应该链接的那个。

当我尝试在 xcodes 中导入 StartViewController.h 时，我得到了一个名为“StartViewController”的视图控制器，但导入了错误的视图控制器。

![](../Images/ac60e03568cb98b10a1c87400ad9a670.png)

在右侧，您会看到它应该链接到的视图控制器，在左侧是所有其他视图控制器出于某种原因引用的视图控制器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:59:39.463

备份您需要的，从项目和物理上删除，然后返回备份并尝试编译。

# django - Django：具有多个外键的复杂表单集

> ID：13910245
> 
> 赞同：3
> 
> 时间：2012-12-17T07:54:31.387
> 
> 标签：django, foreign-key-relationship, django-forms

我正在开展一个项目，用户可以在其中对书籍收藏进行投票。我的模型如下所示：

```
class Collection(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=31)

class Book(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=255)
    collection = models.ForeignKey(Collection)

vote_choices = ((-1,'Bad'),
                (0, 'Not good, Not bad'),
                (1,'Good'))

class Vote(models.Model):
    id = models.AutoField(primary_key=True)
    user = models.ForeignKey(User, related_name='votes')
    book = models.ForeignKey(Book)
    vote = models.IntegerField(choices=vote_choices) 
```

我需要为用户显示一个视图，他们可以在其中查看给定集合中的所有书籍并立即为这些书籍投票，因为这比遍历每本书进行投票更加用户友好。所以我需要一个表单集，每个表单都是：一本书和它的投票。

最初我认为这是一个使用表单集的好机会（我以前从未使用过它们，但我习惯使用表单、模型表单），但我在如何创建这个表单集时遇到了困难。

我想使用基于通用类的视图，因为理论上，我可以轻松地创建/更新所有投票，但我不知道如何做到这一点。

现在，我在 Collection 模型和 User (from ) 模型之间没有直接关系`django.contrib.auth.model`，但如果这会让事情变得更容易，我不介意添加一个。我真的不需要一个，因为每个用户都通过投票链接到一本书，每本书都链接到一个集合。

我不确定我应该使用表单集还是只使用常规模型表单。

你会怎么做？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:38:03.477

我建议不要在这种情况下使用 django 表单。还有一些更方便的方法。

### 第一种方式。使用纯 jQuery

扩展您的图书课程：

```
class Book(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=255)
    collection = models.ForeignKey(Collection, related_name='books')

    def get_vote(self, user):
        vote = Vote.objects.filter(book=self, user=user)
        if vote:
            return vote.vote
        else:
            return '' 
```

您的观点（如果您愿意，可以在 CBV 上重写）：

```
def list_collection(request, collection_id):
    collection = Collection.objects.get(pk=id)
    user = request.user
    books = []
    for item in collection.books.all():
        book = {
            'id': item.pk,
            'name': item.name,
            'vote': item.get_vote(user)
        }       
        books.append(book)
    return render_to_response('colleciton.html', {'books': books})

def set_vote(request):
    id = request.GET('id')
    vote = int(request.GET('vote'))
    user = request.user
    book = Book.objects.get(pk=id)
    vote = Vote()
    vote.user = user
    vote.vote = vote
    vote.book = book
    vote.save()
    return HttpResponse() 
```

您的网址：

```
url(r'^list-collection/', 'list_collection', name='list_collection'),
url(r'^set-vote/', 'set_vote', name='set_vote'), 
```

你的 Django 模板：

```
{% extends 'base.html' %}
{% block content %}
    {% for book in collection.books.all %}
        <div class="book" data-id="{{ book.id }}">
            <div class="book-name">{{ book.name]}</div>
            <div class="book-vote" {% if not book.get_vote %}style="display:none"{% endif %}>book.get_vote</div>
            <div class="voting" {% if book.get_vote %}style="display:none"{% endif %}>
                <button class="vote-up"></button>
                <button class="vote-down"></button>
            </div>
        </div>
    {% endfor %}
{% endblock %} 
```

而javascript就像

```
$(document).ready(function(){
    $('.vote-up, .vote-down').on('click', function(e){
            var id, vote, t, book_el;
            e.preventDefault();
            t = $(e.currentTarget);
            book_el = t.parents().parents()
            id = book_el.attr('data-id');
            if t.hasClass('vote-up'){
                vote = 1;
            } else {
                vote = -1;
            }
            book_el.find('.book-vote').show();
            book_el.find('.book-vote').text(vote);
            book_el.find('voting').hide();
            $.get("/set-vote", {vote: vote, id: id});
        }); 
}); 
```

### 第二种方式。使用像 Backbone.js 这样的 JavaScript 框架

它使整个过程变得更加容易。特别是如果您打算向您的应用程序添加一些其他功能。另一方面，Backbone 需要一些时间来学习它。

[阅读文档](http://backbonejs.org/)，[查看教程应用程序 TodoMVC](https://github.com/tastejs/todomvc)或[其他教程](http://arturadib.com/hello-backbonejs/)。也许您会发现它更适合您的任务。

# objective-c - AsyncImageView oncomplete 调整大小

> ID：13910247
> 
> 赞同：0
> 
> 时间：2012-12-17T07:54:43.593
> 
> 标签：objective-c, ios

我可以知道使用从 url 获取后调整图像大小的任何方法`AsyncImageView`吗？这是我到目前为止的代码：

```
NSLog(@"image x:%f y:%f", _imageView.frame.origin.x, _imageView.frame.origin.y);
NSLog(@"image w:%f h:%f", _imageView.frame.size.width, _imageView.frame.size.height);
NSLog(@"image w:%f h:%f", _imageView.image.size.width, _imageView.image.size.height);

_imageView.image = [UIImage imageNamed:@"Placeholder.png"];

//cancel loading previous image for cell
[[AsyncImageLoader sharedLoader] cancelLoadingImagesForTarget:_imageView];

//load the image
_imageView.imageURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@",[AppSetting getPkParkingPhotoPath],[_data objectForKey:@"photo"]]];

_imageView.contentMode = UIViewContentModeScaleAspectFill;

NSLog(@"image x:%f y:%f", _imageView.frame.origin.x, _imageView.frame.origin.y);
NSLog(@"image w:%f h:%f", _imageView.image.size.width, _imageView.image.size.height); 
```

我想获得图像的真实尺寸并调整大小并适合宽度和动态高度。我怎样才能委托`onComplete`方法`AsyncImageView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:37:31.147

尝试使用这个

_imageView.contentMode = UIViewContentModeRedraw;

# mysql - Mysql自定义排序

> ID：13910248
> 
> 赞同：0
> 
> 时间：2012-12-17T07:54:44.380
> 
> 标签：mysql

我有一个包含不同类别的数据库表，其中包含不同的产品，每个类别都有一些优先级。假设 cat-1 有 5 个产品，cat-2 包含 3 个产品，cat-3 包含 3 个产品，cat-4 包含 2 个产品。

在展示产品时，顺序应如下所示。

如果类别具有相同的优先级（假设 cat-1、cat-2 优先级 = 1、cat-3 优先级 = 2、cat-4 优先级 = NULL），则产品将显示如下。

c1p1，c2p1，c1p2，c2p2，c1p3，c2p3，c1p4，c1p5，c3p1，c3p2，c3p3，c4p1，c4p2。

如果类别具有相同的优先级（假设 cat-1、cat-2 优先级 = 1、cat-3 和 cat-4 优先级 = 2），则产品将显示如下。

c1p1，c2p1，c1p2，c2p2，c1p3，c2p3，c1p4，c1p5，c3p1，c4p1，c3p2，c4p2，c3p3。

如果类别具有不同的优先级（假设 cat-1 priority = 2、cat-2 priority = 1、cat-3 priority = 3 和 cat-4 priority = Null），则产品将显示如下。

c2p1，c2p2，c2p3，c1p1，c1p2，c1p3，c1p4，c1p5，c3p1，c3p2，c3p3，c4p1，c4p2。

这里 c = 类别和 p = 产品。

在Mysql中可以进行这种类型的排序吗？请帮忙。

这是数据库表的结构和示例数据-

```
 CREATE TABLE IF NOT EXISTS `categories` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `name` varchar(255) NOT NULL,
    `priority` int(11) DEFAULT NULL,
     PRIMARY KEY (`id`)
   ) ;

   INSERT INTO `categories` (`id`, `name`, `priority`) VALUES
   (1, 'c1', 1),
   (2, 'c2', 1),
   (3, 'c3', 2),
   (4, 'c4', NULL);

   CREATE TABLE IF NOT EXISTS `products` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `category_id` int(11) NOT NULL,
    `name` varchar(255) NOT NULL,
    PRIMARY KEY (`id`)
   ) ;

INSERT INTO `products` (`id`, `category_id`, `name`) VALUES
(1, 1, 'c1p1'),
(2, 1, 'c1p2'),
(3, 1, 'c1p3'),
(4, 1, 'c1p4'),
(5, 1, 'c1p5'),
(6, 2, 'c2p1'),
(7, 2, 'c2p2'),
(8, 2, 'c2p3'),
(9, 3, 'c3p1'),
(10, 3, 'c3p2'),
(11, 3, 'c3p3'),
(12, 4, 'c4p1'),
(13, 4, 'c4p2'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:17:12.723

您可以创建一个具有优先级的表：

```
create table priorities (
  category varchar(255),
  priority int null); 
```

然后您可以通过这种方式选择产品：

```
select
  products.*
from
  products inner join priorities
  on products.category = priorities.category
order by
  priorities.priority is null, -- this to put null values at the end
  priorities.priority,
  products.id                  -- or some other field 
```

**编辑：**这可能是您正在寻找的：

```
select
  products.name
from
  products inner join categories
  on products.category_id = categories.id
order by
  categories.priority is null,
  categories.priority,
  substr(products.name,3),
  categories.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:14:32.103

最后我得到了一个更好的解决方案。我在产品表中添加了一个额外的字段。动机是给每个类别的产品一个序列号。我的最终产品表结构如下所示。

```
CREATE TABLE IF NOT EXISTS `products` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`category_id` int(11) NOT NULL,
`name` varchar(255) NOT NULL,
`sl_no` int(11) NOT NULL,
 PRIMARY KEY (`id`)
);

INSERT INTO `products` (`id`, `category_id`, `name`, `sl_no`) VALUES
(1, 1, 'c1p1', 1),
(2, 1, 'c1p2', 2),
(3, 1, 'c1p3', 3),
(4, 1, 'c1p4', 4),
(5, 1, 'c1p5', 5),
(6, 2, 'c2p1', 1),
(7, 2, 'c2p2', 2),
(8, 2, 'c2p3', 3),
(9, 3, 'c3p1', 1),
(10, 3, 'c3p2', 2),
(11, 3, 'c3p3', 3),
(12, 4, 'c4p1', 1),
(13, 4, 'c4p2', 2); 
```

查询看起来像 -

```
SELECT  `Category`.`id` ,  `Category`.`name` ,  `Category`.`priority` ,    `Product`.`name` ,  `Product`.`category_id` 
FROM  `categories` AS  `Category` 
INNER JOIN  `products` AS  `Product` 
WHERE  `Category`.`id` =  `Product`.`category_id` 
ORDER BY CASE WHEN  `Category`.`priority` IS NULL 
THEN 1 
ELSE 0 
END ASC ,  `Category`.`priority` ASC ,  `Product`.`sl_no` ,  `Product`.`category_id`; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T12:25:13.080

这是根据要求获取序列的间接解决方案。

当我使用 PHP 获取数据时，首先我编写了一个 sql 查询来根据优先级获取数据。

```
SELECT `Category`.`id`, `Category`.`name`, `Category`.`priority` , `Product`.`name`, `Product`.`category_id` FROM `categories` AS `Category` INNER JOIN `products` AS `Product` WHERE `Category`.`id` = `Product`.`category_id` ORDER BY CASE WHEN `Category`.`priority` IS NULL THEN 1 ELSE 0 END ASC, `Category`.`priority` ASC; 
```

然后我做了一个简单的数组操作来得到一个数组，如下所示。

```
array(
(int) 1 => array(
    (int) 0 => array(
        (int) 0 => '1',
        (int) 1 => '6'
    ),
    (int) 1 => array(
        (int) 0 => '2',
        (int) 1 => '7'
    ),
    (int) 2 => array(
        (int) 0 => '3',
        (int) 1 => '8'
    ),
    (int) 3 => array(
        (int) 0 => '4'
    ),
    (int) 4 => array(
        (int) 0 => '5'
    ),
),  
(int) 2 => array(
    (int) 0 => array(
        (int) 0 => '9'
    ),
    (int) 1 => array(
        (int) 0 => '10'
    ),
    (int) 2 => array(
        (int) 0 => '11'
    ),      
),
'' => array(
    (int) 0 => array(
        (int) 0 => '12'         
    ),
    (int) 1 => array(
        (int) 0 => '13'

    )
)
) 
```

对于系列 c1p1、c2p1、c1p2、c2p2、c1p3、c2p3、c1p4、c1p5、c3p1、c3p2、c3p3、c4p1、c4p2。其中数组键是优先级，叶值是产品 ID。

然后我从上面的数组中创建一个 id 字符串，如下所示。

```
 1,6,2,7,3,8,4,5,9,10,11,12,13 
```

最后将查询编写如下。

```
 SELECT * 
 FROM  `products` 
 WHERE  `id` 
 IN ( 1, 6, 2, 7, 3, 8, 4, 5, 9, 10, 11, 12, 13 ) 
 ORDER BY FIELD( id, 1, 6, 2, 7, 3, 8, 4, 5, 9, 10, 11, 12, 13 ); 
```

# android - 需要不可用的共享库 com.sec.android.app.multiwindow；失败（启用多窗口）

> ID：13910249
> 
> 赞同：1
> 
> 时间：2012-12-17T07:54:53.970
> 
> 标签：android

我可以在 Android 开源中实现多窗口支持，即，如果我同步最新的 android 源代码库？还是仅适用于三星 Galexy 注意？

我尝试在清单中添加以下内容

```
 <uses-library 
                    android:required="true" 
            android:name="com.sec.android.app.multiwindow" />
<meta-data android:name="com.sec.an droid.support.multiwindow" android:value="true" />
<meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_W" android:value="632.0dip" />
<meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_H" android:value="598.0dip" />
<meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_W" android:value="632.0dip" />
<meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_H" android:value="598.0dip" /> 
```

并且

```
<category android:name="android.intent.category.MULTIWINDOW_LAUNCHER" 
```

在我的主要活动意图过滤器中。

但这我无法在模拟器或任何其他手机中安装它，我怎样才能使应用程序多窗口启用？那个图书馆是闭源的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:40:09.640

不，这是供应商扩展，仅适用于安装了所需库等的设备。

# smartphone - 它可以从MEID计算到IMEI吗

> ID：13910251
> 
> 赞同：-1
> 
> 时间：2012-12-17T07:55:10.793
> 
> 标签：smartphone, imei

我有智能手机的 MEID 号码，我需要使用任何公式或算法获取与 MEID 对应的 IMEI 号码。可能吗？如果可能，请让我知道正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:47:33.327

我不认为这是可能的。MEID 号码用于识别 CDMA 设备，而 IMEI 号码用于识别 GSM 设备。两者都是单个设备独有的，因此不存在“对应的 IMEI 号码”之类的东西。

但是，一些智能手机的收音机同时支持 CDMA 和 GSM（例如 Sprint/Verizon 的 Apple iPhone 5）。此类设备将同时具有 MEID 号码和 IMEI 号码。

# sql - 无法剪切和转换字符串 - 奇怪的格式

> ID：13910254
> 
> 赞同：0
> 
> 时间：2012-12-17T07:55:23.347
> 
> 标签：sql, sql-server-2005

这个问题与我之前的一个问题几乎相同，可以在[这里找到](https://stackoverflow.com/questions/13376223/how-to-convert-string-to-integer-weird-format)

我有一个名为：`pa_value`保存`varchar`记录的字段现在该字段包含以下记录：

```
 0,5582
 0,6985
 -0,1589
 0,9856
 -0,6589 
```

我使用以下代码得到这些结果：

```
CAST (replace (p7.pa_value ,'%','') AS float (3,0)) as TotalMargin 
```

我要做的是删除所有内容并仅保留 5 个字符（如果字符串前面有 -（减号），则保留 6 个字符）。它应该看起来像这样：

```
 55.82
 69.85
 -15.89
 98.56
 -65.89 
```

我尝试将其转换为 a`float`然后将其转换为`integer`. 我也尝试了该`floor`命令，但不适合我的情况，但没有任何成功。我总是收到语法错误消息。我相信没有办法做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:35:13.403

```
SELECT p7.pa_value=CASE WHEN LEFT( p7.pa_value,1)='-' THEN '-' + 
           CONVERT(varchar(max),CONVERT(float,substring(p7.pa_value,4,4))/100) ELSE 
           CONVERT(varchar(max),CONVERT(float,substring(p7.pa_value,3,4))/100)  END
FROM <table_name> 
```

**正在做什么..**

*   检查起始字符是否为“-”。
*   如果是，则从位置 4 开始提取字符串，否则从位置 3 开始。
*   内部 convert 函数将 string 转换为 float 以进行除法，外部 convert 将结果值改回 varchar 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:09:00.003

如果你知道逗号后面总是有四位数字，你可以使用它，虽然我不相信它是完美的：

```
CONVERT(NUMERIC(9,2), REPLACE(REPLACE(p7.pa_value, '%', ''), ',', '')) / 100 
```

# iphone - 3 个针对 iphone 纵向、横向和 ipad 纵向的媒体查询

> ID：13910255
> 
> 赞同：4
> 
> 时间：2012-12-17T07:55:38.290
> 
> 标签：iphone, css, media-queries, landscape, portrait

我已经尝试了`width`&的不同组合，`device-width`但在 iPhone 上，这个代码永远不会把背景变成红色；

当我有超过 1 个媒体查询时，我遇到了问题。请参阅此[JSfiddle 示例](http://jsfiddle.net/7UGsK/)，除非您删除最后一个媒体查询，否则 div 背景永远不会是绿色

这就是我想要的 3 个不同的媒体查询目标：

> 1.  智能手机和平板电脑（仅限纵向）。这将是我所有用于响应式布局的通用样式的地方
> 2.  宽度：320px - 479px - 这将适用于小屏幕，例如仅纵向的 iphone
> 3.  宽度：480px - 640px - 这将适用于更大的屏幕，例如横向的 iphone 和纵向的 ipad。不是横向的ipad。

请注意，这是针对 HTML 电子邮件的，因此无法使用 JS。

```
@media only screen and (max-width: 640px) {
    body { padding: 10px !important }
}
/* Small screen */
@media only screen and (min-device-width: 320px) and (max-device-width: 479px) {
    body { background: blue !important }
}
/* iPhone landscape and iPad portrait */
@media only screen and (max-device-width: 480px) and (max-device-width: 640px) {
    body { 
       background: red !important 
       -webkit-text-size-adjust:none; 
    }
} 
```

参考：[http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-23T17:33:33.703

您自己的尝试已修改

```
@media only screen and (max-width: 640px) and (orientation: portrait) {
    body { padding: 10px !important }
}

/* Small screen */
@media only screen and (min-device-width: 320px) and (max-device-width: 479px) and (orientation: portrait) {
    body { background: blue !important }
}

/* iPhone landscape and iPad portrait */
@media only screen and (max-device-width: 480px) and (orientation: landscape),
@media only screen and (max-device-width: 640px) and (orientation: portrait)  {
    body { 
       background: red !important 
       -webkit-text-size-adjust:none; 
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T08:07:01.497

媒体查询还支持设备方向。你应该试试

```
@media screen and (orientation:portrait) {
    /* Portrait styles */
}

@media screen and (orientation:landscape) {
    /* Landscape styles */
} 
```

您也可以像这样将它们与宽度结合起来

```
@media screen and (max-device-width : 320px) and (orientation:portrait) {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:01:06.557

看看这个资源，它将为您提供几乎所有内容的媒体查询[http://arcsec.ca/media-query-builder/](http://arcsec.ca/media-query-builder/)，您还需要指定最小宽度。也少了！重要的，肮脏的:)

在你的情况下

```
@media only all and (min-device-width: 320px) and (max-device-width: 480px) {
/* insert styles here */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:05:47.307

响应式电子邮件可能很困难，因为那里有太多的电子邮件客户端，并且对媒体查询的支持可能有限。您可能只想考虑使您的 div 具有百分比流动性，因此它们可以缩放，而不是媒体查询。zurb 的人有一些很棒的模板，它们也可能会有所帮助。[http://www.zurb.com/playground/responsive-email-templates](http://www.zurb.com/playground/responsive-email-templates)

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-02T17:40:49.197

我通过在差异中使用 Om 的解决方案来尝试这个。它对我有用的方式，希望它可以帮助某人

```
@media only screen and (max-device-width:1024px) and (orientation: portrait)     {
    /*style*/    
    }
@media only screen and (max-device-width: 1024px) and (orientation: landscape)  {
    /*style*/
} 
```

# hibernate - 会话工厂的休眠错误

> ID：13910256
> 
> 赞同：0
> 
> 时间：2012-12-17T07:55:40.410
> 
> 标签：hibernate

我有这个`hibernate.cfg.xml`：

```
 <?xml version='1.0' encoding='UTF-8'?>
    <!DOCTYPE hibernate-configuration PUBLIC
              "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
              "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
    <hibernate-configuration>

      <session-factory>

        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <mapping class="iger.User"/>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://localhost/MyAppBase</property>
        <property name="connection.username">root</property>
        <property name="connection.password">root</property>

        <property name="hibernate.hbm2ddl.auto"> create </property>
        <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
        <property name="current_session_context_class">thread</property>
        <property name="hibernate.show_sql">true</property>
      </session-factory>

< /hibernate-configuration> 
```

这是我尝试创建会话的地方

```
SessionFactory factory= new Configuration().configure("iger/hibernate.cfg.xml").buildSessionFactory();
                Session session = factory.openSession();

                session.beginTransaction();
                session.save(regUser);
                session.getTransaction().commit(); 
```

这就是我得到的

> 最后一个原因：元素类型“session-factory”的内容必须匹配“(property*,mapping*,(class-cache|collection-cache) *,event* ,listener*)”。

这是为什么？怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:02:56.137

请发布您的完整信息`hibernate.cfg.xml`：这可能是您的映射中的问题，请查看此[链接](https://forum.hibernate.org/viewtopic.php?f=1&t=954438)

# jquery - jquery colorbox加载页面在按钮点击弹出窗口中

> ID：13910258
> 
> 赞同：0
> 
> 时间：2012-12-17T07:55:42.643
> 
> 标签：jquery, popup

我想在弹出窗口中加载一个 html 页面。我做了一些谷歌，发现 jquery [colorbox](http://www.jacklmoore.com/colorbox)。他们给出的示例使用`anchor tag`但我想在按钮单击时加载弹出窗口。

为彩盒给出的示例

```
<a class='iframe' href="http://wikipedia.com">Outside Webpage (Iframe)</a>

$(document).ready(function(){
     $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
}); 
```

在上面的颜色框示例中，他们在单击链接时在弹出窗口中加载外部页面，但我想在单击按钮时执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:57:47.710

尝试：

```
<input type="button" id="yourButtonId" value="Load Page" />

$(document).ready(function(){
  $("#yourButtonId").on("click", function() {
     $.fn.colorbox({iframe:true, width:"80%", height:"80%"});
     //or
     $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
  });     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:58:20.397

通过将颜色框放在 中`$(document).ready(function(){`，在页面加载时会创建弹出窗口。

只需将单击事件绑定到按钮：

```
$(document).ready(function(){
    $('#yourButtonId').click(function () {
        $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:26:56.197

在按钮单击时绑定此代码：

```
$(".iframe").colorbox({open:true, iframe:true, width:"80%", height:"80%"}); 
```

`$(".iframe")`- 必须有`href`标签

`open:true`- 单击按钮后将打开颜色框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-09T02:58:07.013

使用锚标签并用按钮标签包围文本：

```
 <a class='iframe' href="http://wikipedia.com">
    <button>Outside Webpage (Iframe)</button></a> 
```

# python - 具有无限元素的列表

> ID：13910259
> 
> 赞同：9
> 
> 时间：2012-12-17T07:55:46.933
> 
> 标签：python

我需要对两个单独的**无限**数字列表进行操作，但找不到在 python 中生成、存储和操作它的方法。

考虑到内存和时间的最小使用，任何人都可以建议我一种处理无限算术推进或任何系列的方法以及如何对它们进行操作。

提前感谢大家的建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T07:58:25.230

您正在寻找一个[python 生成器](http://wiki.python.org/moin/Generators)：

```
def infinitenumbers():
    count = 0
    while True:
        yield count
        count += 1 
```

该`itertools`软件包带有一个预构建的[`count`生成器](http://docs.python.org/2/library/itertools.html#itertools.count)。

```
>>> import itertools
>>> c = itertools.count()
>>> next(c)
0
>>> next(c)
1
>>> for i in itertools.islice(c, 5):
...     print i
...
2
3
4
5
6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T07:59:05.110

这就是`iterator`进来的地方。你不能有一个无限的数字列表，但你可以有一个无限的迭代器。

```
import itertools
arithmetic_progression = itertools.count(start,step) #from the python docs 
```

Python2 的文档可以在[这里找到](http://docs.python.org/2/library/itertools.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-23T12:38:49.053

我有另一个 python3 解决方案（阅读 SICP 第 3.5 章）

```
class Stream:
def __init__(self, head, tail):
        self.head = head
        self.tail = tail
        self.memory = None
        self.isDone = False
def car(self):
        return self.head
def cdr(self):
        if self.isDone:
                return self.memory
        self.memory = self.tail()
        self.isDone = True
        return self.memory
def __getitem__(self, pullFrom):
        if pullFrom < 1 or self.memory == []:
                return []
        return [self.car()] + self.cdr()[pullFrom - 1]
def __repr__(self):
        return "[" + repr(self.car()) + " x " + repr(self.tail) + "]"
def map(self, func):
        if self.memory == []:
                return []
        return Stream(func(self.car()), lambda: Stream.map(self.cdr(), func))
def from_list(lst):
    if lst == []:
        return []
    return Stream(lst[0], lambda:
                  Stream.from_list(lst[1:]))
def filter(self, pred):
    if self.memory == []:
        return []
    elif pred(self.car()):
        return Stream(self.car(), lambda: Stream.filter(self.cdr(), pred))
    else:
        return self.cdr().filter(pred)
def sieve(self):
    return Stream(self.car(), lambda: self.cdr().filter(lambda n: n % self.car() > 0).sieve())
def foreach(self, action, pull = None):
    if pull is None:
        action(self.car())
        self.cdr().foreach(action, pull)
    elif pull <= 0:
        return
    else:
        action(self.car())
        self.cdr().foreach(action, pull-1)and run:

a = Stream(0, lambda: a.map((lambda x: x + 1)))
print(a[10]) 
```

返回： `[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`。

但是流是懒惰地评估的，所以：

```
>>> a = Stream(0, lambda: a.map((lambda x: x + 1)))
>>> print(a) 
```

印刷：

`[0 x [...]]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-31T19:41:20.620

要创建一个类似于“可变”无限列表的对象，您可以重载类中的`__getitem__`和`__setitem__`方法：

```
class infinite_list():
    def __init__(self, func):
        self.func = func
        self.assigned_items = {}
    def __getitem__(self, key):
        if key in self.assigned_items:
            return self.assigned_items[key]
        else:
            return self.func(key)
    def __setitem__(self, key , value):
        self.assigned_items[key] = value 
```

然后，您可以使用 lambda 表达式初始化“无限列表”并修改列表中的项目：

```
infinite_thing = infinite_list(lambda a: a*2)

print(infinite_thing[1]) #prints "2"
infinite_thing[1] = infinite_thing[2]
print(infinite_thing[1]) #prints "4" 
```

类似地，可以创建一个“[无限字典](https://stackoverflow.com/a/9812982/975097)”，为每个缺失的键提供一个默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T07:59:13.997

也许生成无限系列的自然方法是使用生成器：

```
def arith(a, d):
   while True:
     yield a
     a += d 
```

这可以像这样使用：

```
print list(itertools.islice(arith(10, 2), 100)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-29T07:20:21.177

你需要 hofs.py

```
def empty(data):
    return data == []

def adjoin(value,data):
    result = [value]
    result.extend(data)
    return result

def map(func, data):
    if empty(data):
        return []
    else:
        return adjoin(func(data[0]), map(func, data[1:]))

def keep(pred, data):
    if empty(data):
        return []
    elif pred(data[0]):
        return adjoin( data[0] , keep(pred, data[1:]))
    else:
        return keep(pred, data[1:]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-29T07:16:59.040

我的解决方案是：

```
from hofs import *
def cons_stream(head,tail):
    return [head,tail,False,False]
def stream_cdr(strm):
    if strm[2]:
        return strm[3]
    strm[3] = strm[1]()
    strm[2] = True
    return strm[3]
def show_stream(stream, num = 10):
    if empty(stream):
        return []
    if num == 0:
        return []
    return adjoin(stream[0], show_stream(stream_cdr(stream), num - 1))
def add_streams(a , b):
    if empty(a):
        return b
    if empty(b):
        return a
    return cons_stream(a[0] + b[0] , lambda : add_streams( stream_cdr(a), stream_cdr(b)))
def stream_filter( pred , stream ):
    if empty(stream):
        return []
    if pred(stream[0]):
        return cons_stream(stream[0], lambda : stream_filter(pred, stream_cdr(stream)))
    else:
        return stream_filter( pred , stream_cdr( stream ))
def sieve(stream):
    return cons_stream(stream[0] , lambda : sieve(stream_filter(lambda x : x % stream[0] > 0 , stream_cdr(stream))))
ones = cons_stream(1, lambda : ones)
integers = cons_stream(1, lambda : add_streams(ones, integers))
primes = sieve(stream_cdr(integers))
print(show_stream(primes)) 
```

复制上面的 Python 代码。当我尝试它时，我得到了 [2, 3, 5, 7, 11, 13, 17, 19, 23, 29] 这是一个无限的素数列表中的 10 个。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2018-09-09T19:24:00.100

我假设您想要一个范围内的无限数列表。我有类似的问题，这是我的解决方案：

```
c = 0
step = 0.0001 # the difference between the numbers
limit = 100 # The upper limit 
myInfList = []
while c <= limit:
    myInfList.append(c)
    c = c + step
print(myInfList) 
```

# android - 快速联系徽章 assignContactFromPhone 在我的应用程序中不起作用

> ID：13910266
> 
> 赞同：2
> 
> 时间：2012-12-17T07:56:11.613
> 
> 标签：android

```
 QuickContactBadge qcb=(QuickContactBadge)findViewById(R.id.quickContactBadge1);
            qcb.assignContactFromEmail("atfata@gmail.com",true);
            qcb.assignContactFromPhone("9994834021",true);  
    qcb.setMode(ContactsContract.QuickContact.MODE_SMALL); 
```

在此代码中，联系人号码无法分配给我的联系人。请建议任何可能的方式来将联系人保存在我的应用程序中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T19:10:51.763

`QuickContact.MODE_SMALL`并非所有 API 都支持，除此之外，您使用`assignContactFromEmail(eml)`and设置了两次联系人`assignContactFromPhone(phn)`，这也可能导致问题。Google Android docs 上有一个很好的例子，它解释了如何做你需要的东西，这里是链接，**转到第 2 步**：

[QuickContactBadge 文档](http://developer.android.com/training/contacts-provider/display-contact-badge.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T23:26:54.397

试试下面的代码 -

```
QuickContactBadge qcb=(QuickContactBadge)findViewById(R.id.quickContactBadge1);
Bundle bundle = new Bundle();
bundle.putString(ContactsContract.Intents.Insert.EMAIL, "email address");
qcb.assignContactFromPhone("9994834021",true, bundle); 
```

您还可以使用适当的键将其他东西放在捆绑包中，例如名称、主要电子邮件等。

# objective-c - NSDictionary 中保存的搜索数组

> ID：13910276
> 
> 赞同：2
> 
> 时间：2012-12-17T07:57:06.307
> 
> 标签：objective-c, ios, nsdictionary

我有一个要求，我有 5 个键存储在一个 NSDictionary 中，对应于我存储了来自不同数组的 5 个值。我的数据结构如下：

字典是 {

```
1 =     (
                {
            SubRegionName = "abc";
            WalkId = 123;
            WalkName = xyz;
        },
        {
        },....
2 =     (
                {
            SubRegionName = "abc";
            WalkId = 123;
            WalkName = xyz;
        },
        {
        },....
3 =     (
                {
            SubRegionName = "abc;
            WalkId = 123;
            WalkName = xyz;
        },
        {
        },....
4 =     (
                {
            SubRegionName = "abc";
            WalkId = 123;
            WalkName = xyz;
        },
        {
        },....
5 =     (
                {
            SubRegionName = "abc";
            WalkId = 123;
            WalkName = xyz;
        },
        {
        },
        ) 
```

我根据一些 Id 说 tempId(1,2,3,4,5) 从 sqlite 获得的上述数据，我想单独使用它们。因为我必须在 tableview 中将 walkName 显示为 cell.textlabel.text 并将 SubregionName 显示为 cell.detailtext.text。

我不知道如何从字典中访问这些数据。谁能建议我正确的方法。

我的代码是：

//**用于数据库查询（从数据库中获取数据）******* *** ** *** ** *** *******

 ***```
-(void)getMainRegions
{
    sqlite3 *walkNameDB;
    if (sqlite3_open([[self databasePath] UTF8String], &walkNameDB) != SQLITE_OK) {
        sqlite3_close(walkNameDB);
        NSAssert(0, @"Failed to open Walk name database");
    }

    NSString *regionQuery = @"SELECT Rid,RName from MainRegions";

    sqlite3_stmt *teststatement = nil;

   // NSLog(@"%d",sqlite3_prepare_v2(walkNameDB,[regionQuery UTF8String], -1, &teststatement, nil));

    if (sqlite3_prepare_v2(walkNameDB,[regionQuery UTF8String], -1, &teststatement, nil) == SQLITE_OK)
    {
        RNameArray = [[NSMutableArray alloc] init];
        RIdArray = [[NSMutableArray alloc] init];

        while( sqlite3_step(teststatement) == SQLITE_ROW )
        {

            NSNumber *RId;
            int temp1 = (int)sqlite3_column_int(teststatement, 0);
            RId = [[NSNumber alloc] initWithInt:temp1];

            char *RNameCharacter;
            RNameCharacter = (char *) sqlite3_column_text(teststatement, 1);
            NSString *RNameString = [[NSString alloc] initWithUTF8String:RNameCharacter];

            [RNameArray addObject:RNameString];
            [RIdArray addObject:RId];

        }

    }
    [self getWalks];
}

-(void)getWalks
{
    sqlite3 *walkNameDB;
    if (sqlite3_open([[self databasePath] UTF8String], &walkNameDB) != SQLITE_OK) {
        sqlite3_close(walkNameDB);
        NSAssert(0, @"Failed to open Walk name database");
    }

    RegionWalksDictionary = [[NSMutableDictionary alloc] init];

    for(regionId in RIdArray)
    {
        regionWalkArray = [[NSMutableArray alloc] init];
        NSString *walkQuery = [[NSString alloc] initWithFormat:@"SELECT Wid,WName,SName from Walks,SubRegions WHERE Walks.Sid=SubRegions.Sid AND Rid = %d",[regionId integerValue] ];

        sqlite3_stmt *walkstatement = nil;

     //   NSLog(@"%d",sqlite3_prepare_v2(walkNameDB,[walkQuery UTF8String], -1, &walkstatement, nil));

        if (sqlite3_prepare_v2(walkNameDB,[walkQuery UTF8String], -1, &walkstatement, nil) == SQLITE_OK)
        {
            while( sqlite3_step(walkstatement) == SQLITE_ROW )
            {
                NSNumber *WId;
                int temp1 = (int)sqlite3_column_int(walkstatement, 0);
                WId = [[NSNumber alloc] initWithInt:temp1];

                char *WNameCharacter;
                WNameCharacter = (char *) sqlite3_column_text(walkstatement, 1);
                NSString *WNameString = [[NSString alloc] initWithUTF8String:WNameCharacter];

                char *SNameCharacter;
                SNameCharacter = (char *) sqlite3_column_text(walkstatement, 2);
                NSString *SNameString = [[NSString alloc] initWithUTF8String:SNameCharacter];

                NSMutableDictionary *tempWalk = [[NSMutableDictionary alloc] init];
                [tempWalk setObject:WId forKey:@"WalkId"];
                [tempWalk setObject:WNameString forKey:@"WalkName"];
                [tempWalk setObject:SNameString forKey:@"SubRegionName"];
                [regionWalkArray addObject:tempWalk];
            }
        }

        [RegionWalksDictionary setObject:regionWalkArray forKey:regionId];
     //   NSLog(@"arr%@",RegionWalksDictionary);

    }

} 
```

// ***** **** 从数据库获取数据的方法到此结束***** ** *** ** *** ** *** ******

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:06:19.907

看起来你有一个`NSDictionary`5 键，在里面你有一个`NSArray`带有单个元素的`NSDictionary`. 虽然我可能错了，试试这个：

```
NSDictionary *dictionaryForKey1 = [[myDictionary objectForKey:@"1"] objectAtIndex:0]; 
```

然后你可以使用这个：

```
NSString *walkName = [dictionaryForKey1 objectForKey:@"WalkName"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:14:55.043

试试这个

```
NSString * walkName = [[parentDic objectForKey:[NSString stringWithFormat:@"%d",indexPath.row]] objectForKey:@"WalkName"];
NSString * SubregionName = [[parentDic objectForKey:[NSString stringWithFormat:@"%d",indexPath.row]] objectForKey:@"SubRegionName"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:23:58.597

试试这个方法...

```
for(id dict in RegionWalksDictionary){

        NSLog(@"WalkId: %@",[[[RegionWalksDictionary objectForKey:dict]objectAtIndex:0]objectForKey:@"WalkId"] );
        NSLog(@"WalkName: %@",[[[RegionWalksDictionary objectForKey:dict]objectAtIndex:0]objectForKey:@"WalkName"] );
        NSLog(@"SubRegionName: %@",[[[RegionWalksDictionary objectForKey:dict]objectAtIndex:0]objectForKey:@"SubRegionName"] );
        NSLog(@"----");

} 
```

* * *

我使用如下（如果这不是结构或您的数据，请评论）

```
NSMutableDictionary *RegionWalksDictionary=[NSMutableDictionary new];
NSMutableArray *regionWalkArray=[NSMutableArray new];
NSMutableDictionary *tempWalk=[NSMutableDictionary new];

[tempWalk setObject:@"wk1" forKey:@"WalkId"];
[tempWalk setObject:@"wkName1" forKey:@"WalkName"];
[tempWalk setObject:@"srName1" forKey:@"SubRegionName"];

[regionWalkArray addObject:tempWalk];

[RegionWalksDictionary setObject:regionWalkArray forKey:@"1"];
[RegionWalksDictionary setObject:regionWalkArray forKey:@"2"];
[RegionWalksDictionary setObject:regionWalkArray forKey:@"3"];

NSLog(@"tempWalkd dict is %@",RegionWalksDictionary); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:02:50.623

啊！现在我明白了——有 5 个长度为 1 的数组

```
NSArray *array1 = dict[@"1];
NSDictionary *details = array1[0];

//print each var
id WalkName = details[@"WalkName"]; 
```***

# algorithm - 保存矩形列表的数据结构？

> ID：13910287
> 
> 赞同：8
> 
> 时间：2012-12-17T07:57:48.147
> 
> 标签：algorithm, sorting, data-structures

我想知道是否有一个好的数据结构来保存轴对齐的非重叠离散空间矩形列表。因此，每个矩形都可以存储为整数 x、y、宽度和高度。只存储这样一个列表很容易，但我也希望能够查询给定的 x,y 坐标是否在任何其他矩形内。

一个简单的解决方案是创建一个散列并用每个矩形开始的散列左下坐标填充它。这不允许我测试给定的 x,y 坐标，因为它会碰到中间的空白空间。另一个答案是在散列表中创建一堆边，用单位正方形覆盖整个矩形。这会为 100 x 100 的矩形创建太多不必要的条目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T08:10:22.727

R-Tree 是可以用的。**R-树是用于空间访问方法的树数据结构**，即用于索引多维信息，例如地理坐标、矩形或多边形。所有矩形的信息都可以以树的形式存储，因此搜索会很容易

[维基百科页面](http://en.wikipedia.org/wiki/R-tree)、[简短的 ppt](http://www.cs.sfu.ca/CourseCentral/454/jpei/slides/R-Tree.pdf)和[研究论文](http://www.sai.msu.su/~megera/postgres/gist/papers/gutman-rtree.pdf)将帮助您理解这个概念。 ![在此处输入图像描述](../Images/612ed5fcb5be122077084666bb8dd690.png)

# python - InnoSetup 后出现 cx_freeze 致命错误

> ID：13910289
> 
> 赞同：2
> 
> 时间：2012-12-17T07:58:16.583
> 
> 标签：python, pygame, inno-setup, importerror, cx-freeze

我正在尝试在 cx_freeze 和 InnoSetup 的帮助下创建一个独立的可执行文件。这是一个非常简单的 Python 脚本，它使用 Pygame 为计时器程序创建图形界面。

我可以直接使用 python.exe 运行脚本，没有任何问题。我还能够使用 cx_freeze 将脚本编译成可执行文件，并且运行它也没有问题。

在我使用 InnoSetup 创建一个独立的可执行文件后，问题就出现了。该程序将无法运行，并在我尝试运行时显示此消息：

![在此处输入图像描述](../Images/6278ede49e103aa437c3e2691e6a2724.png)

有过这个问题经验的人会帮我:)吗？

事实： - 我正在使用 Windows 7 Home Premium 64 位 - 我正在使用 Python 3.2.3 64 位和 Pygame 1.9.2 - 我将 cx_freeze 设置为在编译时不创建 zip 文件夹，因为它会导致 zipimporter 错误。

谢谢！如果我应该提供任何其他信息，请告诉我：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:18:19.173

当您直接从文件夹窗口运行已安装的文件时，它在安装后是否有效？IE。只有在安装程序本身结束或通过创建的快捷方式运行时才会失败？

如果是这样，那么您可能对当前工作目录有一些依赖，您需要修复它或`WorkingDir`适当地设置参数。

如果在您直接运行它时它也失败了，那么您可能无法安装（或检查）某些必需的依赖项——例如，Python 本身。

# javascript - Javascript for循环中的意外标识符

> ID：13910292
> 
> 赞同：2
> 
> 时间：2012-12-17T07:58:33.017
> 
> 标签：javascript, loops, buttonclick

这似乎在 75% 的时间内有效，并且模态函数使用可用的参数执行，但表中每隔几个按钮我就会得到一个 Uncaught SyntaxError: Unexpected identifier。这与关闭不当有关吗？我的谷歌搜索发现这是一个潜在问题，但我无法在我当前的方法中实施任何解决方案。

```
html += '<thead><th>Question</th><th>Answer 1</th><th>Answer 2</th><th>Answer 3</th><th>Answer 4</th></thead>';

        for (var i = 0; i < questions.length; i++) {

            question = questions[i].question;
            questionTitle = question.q;
            answer1title = question.a1;
            answer2title = question.a2;

            html += '<tr><td class="question"><b>'
             + question.q
             + '</b></td><td class="answer1">'
             + question.a1
             + '</td><td class="answer2">'
             + question.a2
             + '</td><td class="answer3">'
             + question.a3
             + '</td><td class="answer4">'
             + question.a4
             + '</td><td class="edit">'
             + '<button onclick="openQuestionModal(\''+questionTitle+'\', \''+answer1title+'\', \''+answer2title+'\')" class="btn btn-small btn-primary" id="questionEdit" type="button">Edit</button>'
             + '</td></tr>';   

        }

        $('#questionsTable').append(html); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:24:24.687

问题是任何`questionTitle`, `answer1title`, or`answer2title`的值中可能有一个单引号，这会破坏您尝试的字符串连接。您需要用转义的单引号替换所有出现的单引号。所以是这样的：

[http://jsfiddle.net/ZYnfc/2/](http://jsfiddle.net/ZYnfc/2/)

```
$(document).ready(function () {
    var par = "I'm the problem";
    var replacer = new RegExp("'", "g");
    var new_btn = $('<button onclick="clicker(\'' + par.replace(replacer, "\\'") + '\');">ASDF</button>');
    $("#main").append(new_btn);
});

function clicker(param) {
    alert(param);
} 
```

您必须以我的示例并将其应用到您的实际代码中，但重点是在函数调用中连接的每个变量的`replace`方法和正则表达式的使用。`replacer`

有更好的方法将 HTML 附加到区域，尤其是在涉及到表格时。我建议使用 jQuery 绑定事件，而不是内联。这是一个不同的主题，与您的问题无关，尽管它本来可以帮助避免它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:01:59.443

可能是您应该在添加到 onclick 属性之前转义字符串：

```
+ '<button onclick="openQuestionModal(\''+ escape(questionTitle)+'\', \''+ escape(answer1title)+'\', \''+escape(answer2title)+'\')" class="btn btn-small btn-primary" id="questionEdit" type="button">Edit</button>' 
```

并使用：

```
unescape('str_to_revert')// to get the data back inside your function. 
```

# android - Android自定义对话框从布局膨胀 - 对齐问题

> ID：13910301
> 
> 赞同：2
> 
> 时间：2012-12-17T07:59:20.237
> 
> 标签：android, android-layout, android-listview, customdialog

我有一个自定义对话框，我从 dialog.xml 膨胀。当我打开对话框时，它看起来如下所示。我在列表视图和它下面的（确定）按钮之间得到了一些空间。我想消除列表视图和它下面的按钮之间的这个空间。我怎样才能做到这一点，？

![在此处输入图像描述](../Images/914b8dabca7443454fc0a0c6862eaae6.png)

对话框.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" >

    <ListView
        android:id="@+id/listViewDialog"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/button1"
        android:layout_below="@+id/ImageView1" >
    </ListView>

    <CheckBox
        android:id="@+id/checkBoxAll"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/listView1"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="15dp"
        android:layout_marginRight="25dp"
        android:layout_marginTop="15dp"
        android:text="" />

    <ImageView
        android:id="@+id/ImageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="15dp"
        android:layout_marginLeft="14dp"
        android:layout_marginTop="15dp"
        android:background="#FFFFBB33"
        android:contentDescription="@string/app_name"
        android:scaleType="center"
        android:src="@drawable/alert_dialog_icon" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="128dp"
        android:layout_height="match_parent"
        android:layout_above="@+id/listViewDialog"
        android:layout_marginBottom="15dp"
        android:layout_marginTop="15dp"
        android:layout_toRightOf="@+id/ImageView1"
        android:gravity="center_vertical"
        android:text="Categories"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_toLeftOf="@+id/checkBoxAll"
        android:text="All"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="OK" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:45:58.740

这真的很容易.. 你有 2 个方法：1）创建根 realtivelayout 以具有 android:layout_height="wrap_cotent"，同时 ListView 具有相同的。这会将所有对话框的大小缩小到右侧（无空格）大小。2）*更多推荐，让根是Linearlayout并给它一些wightsum，然后将其他视图放在这个根中，并给它们一些layout_wight，这样你就知道在任何屏幕分辨率下你都有相同的比例屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:35:24.217

```
maybe try like this:

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:weightSum="100" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/RelativeLayout1"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="15" >

            <CheckBox
                android:id="@+id/checkBoxAll"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/listView1"
                android:layout_alignParentRight="true"
                android:layout_marginBottom="15dp"
                android:layout_marginRight="25dp"
                android:layout_marginTop="15dp" />

            <ImageView
                android:id="@+id/ImageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginBottom="15dp"
                android:layout_marginLeft="14dp"
                android:layout_marginTop="15dp"
                android:background="#FFFFBB33"
                android:contentDescription="@string/app_name"
                android:scaleType="center" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="128dp"
                android:layout_height="match_parent"
                android:layout_above="@+id/listViewDialog"
                android:layout_marginBottom="15dp"
                android:layout_marginTop="15dp"
                android:layout_toRightOf="@+id/ImageView1"
                android:gravity="center_vertical"
                android:text="Categories"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView1"
                android:layout_alignBottom="@+id/textView1"
                android:layout_toLeftOf="@+id/checkBoxAll"
                android:text="All"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <ListView
            android:id="@+id/listViewDialog"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="70" >
        </ListView>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="15" >

            <Button
                android:id="@+id/button1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="OK" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

# android - 执行 doInBackground() 时发生 java.lang.RuntimeException 错误

> ID：13910302
> 
> 赞同：1
> 
> 时间：2012-12-17T07:59:22.957
> 
> 标签：android

我是 android 开发的初学者，在以下代码中出现错误。我正在为 http 请求调用 asyn 方法。执行 doInBackground() 时出现 java.lang.RuntimeException 错误

```
private class PostAlert extends AsyncTask<String, Integer, JSONArray>{

    private ProgressDialog progressDialog;

    @Override
    protected JSONArray doInBackground(String... params) {
        // TODO Auto-generated method stub
        JSONArray menuitemArr = null;
        String url=params[0];

        System.out.println("fsfsddddf"+params[0]);
        ControlDashboard obj = new ControlDashboard();
        try{
        JSONObject aobj = obj.getJSONFromUrl(url);

            JSONObject array = aobj.getJSONObject("alert_list");    
             menuitemArr = array.getJSONArray("array");

        }   
        catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       

        return menuitemArr;
    }

    @Override
    protected void onPostExecute(JSONArray menuitemArr) {
        // TODO Auto-generated method stub
        super.onPostExecute(menuitemArr);
        if (menuitemArr.length() == 0) {
            startActivity(new Intent("com.example.mysampleapp.ABOUT"));
            //Toast.makeText(Alert.this, "No Alerts", Toast.LENGTH_LONG).show();
        }else{
        name = new String[menuitemArr.length()];
        alert = new String[menuitemArr.length()];
        date = new String[menuitemArr.length()];
        for (int i = 0; i < menuitemArr.length(); i++) { 
            // printing the values to the logcat 
            try {
                name[i] =  menuitemArr.getJSONObject(i).getString("name").toString();
                alert[i] = menuitemArr.getJSONObject(i).getString("message").toString(); 
                date[i] = menuitemArr.getJSONObject(i).getString("date").toString();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 

        } 
        ListView list = (ListView) findViewById(R.id.listView3);
        ArrayList<HashMap<String, String>> mylistData = new ArrayList<HashMap<String, String>>();
        String[] columnTags = new String[] {"col1", "col2", "col3"};
        int[] columnIds = new int[] {R.id.alert1, R.id.alert2, R.id.alert3};
        for(int i=0; i<name.length; i++)
        {
         HashMap<String,String> map = new HashMap<String, String>();
             map.put("col1", name[i]);
             map.put("col2", alert[i]);
             map.put("col3", date[i]);
         mylistData.add(map);
        }
        SimpleAdapter arrayAdapter = new SimpleAdapter(Alert.this, mylistData, R.layout.alert_view,columnTags,columnIds);
        list.setAdapter(arrayAdapter);      
        }
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        progressDialog = new ProgressDialog(Alert.this);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressDialog.setMessage("please wait...");
        progressDialog.setCancelable(false);
        progressDialog.setIndeterminate(false);
        progressDialog.setMax(100);
        progressDialog.setProgress(0);
        progressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        //progressDialog.dismiss();
    }

} 
```

运行我的 android 应用程序时出错。

```
12-17 13:22:48.035: W/dalvikvm(1160): threadid=8: thread exiting with uncaught exception (group=0x4001d800)
12-17 13:22:48.045: E/AndroidRuntime(1160): FATAL EXCEPTION: AsyncTask #2
12-17 13:22:48.045: E/AndroidRuntime(1160): java.lang.RuntimeException: An error occured while executing doInBackground()
12-17 13:22:48.045: E/AndroidRuntime(1160):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
12-17 13:22:48.045: E/AndroidRuntime(1160):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-17 13:22:48.045: E/AndroidRuntime(1160):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-17 13:22:48.045: E/AndroidRuntime(1160):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-17 13:22:48.045: E/AndroidRuntime(1160):     at java.util.concurrent.FutureTask.run(FutureTask.java:137) 
```

json请求类：

```
public class ControlDashboard extends Activity {
    public static DefaultHttpClient httpClient;

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            jObj = null;
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:02:44.170

```
 startActivity(new Intent("com.example.mysampleapp.ABOUT")); 
```

或者

```
 ListView list = (ListView) findViewById(R.id.listView3); 
```

在这里，您正在尝试从后台线程访问 UI 元素，这意味着 AsyncTask`doInBackground`是不可能的

解决方案将所有与 ui 相关的代码移入以在完成 `onPostExecute`后更新 ui`doInBackground`

您可以在此处查看执行完成`onPostExecute`后 我们如何更新 UI`doInBackground`

**编辑：** 或者只使用这个 PostAlert AsyncTask 类：

```
private class PostAlert extends AsyncTask<String, Integer, JSONArray>{

        private ProgressDialog progressDialog;

        @Override
        protected JSONArray doInBackground(String... params) {
            // TODO Auto-generated method stub
           JSONArray menuitemArr=null;
            String url=params[0];
            System.out.println("fsfsddddf"+url);

        //  System.out.println("fsfsddddfobj"+obj);
            try{

            JSONObject aobj = obj.getJSONFromUrl(url);
            System.out.println("fsfsf"+aobj);

                JSONObject array = aobj.getJSONObject("alert_list");    
                menuitemArr = array.getJSONArray("array");

            catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }       
            return menuitemArr;
        }

        @Override
        protected void onPostExecute(JSONArray menuitemArr) {
            // TODO Auto-generated method stub

                if (menuitemArr.length() == 0) {
                    startActivity(new Intent("com.example.mysampleapp.ABOUT"));
                    //Toast.makeText(Alert.this, "No Alerts", Toast.LENGTH_LONG).show();
                }else{
                name = new String[menuitemArr.length()];
                System.out.println("name"+name);
                alert = new String[menuitemArr.length()];
                date = new String[menuitemArr.length()];
                for (int i = 0; i < menuitemArr.length(); i++) { 
                    // printing the values to the logcat 
                    name[i] =  menuitemArr.getJSONObject(i).getString("name").toString(); 
                    alert[i] = menuitemArr.getJSONObject(i).getString("message").toString(); 
                    date[i] = menuitemArr.getJSONObject(i).getString("date").toString();
                } 
                ListView list = (ListView) findViewById(R.id.listView3);
                ArrayList<HashMap<String, String>> mylistData = new ArrayList<HashMap<String, String>>();
                String[] columnTags = new String[] {"col1", "col2", "col3"};
                int[] columnIds = new int[] {R.id.alert1, R.id.alert2, R.id.alert3};
                for(int i=0; i<name.length; i++)
                {
                 HashMap<String,String> map = new HashMap<String, String>();
                     map.put("col1", name[i]);
                     map.put("col2", alert[i]);
                     map.put("col3", date[i]);
                 mylistData.add(map);
                }
                SimpleAdapter arrayAdapter = new SimpleAdapter(Alert.this, mylistData, R.layout.alert_view,columnTags,columnIds);
                list.setAdapter(arrayAdapter);      
                } 
            }

            super.onPostExecute(result);
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            progressDialog = new ProgressDialog(Alert.this);
            progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            progressDialog.setMessage("please wait...");
            progressDialog.setCancelable(false);
            progressDialog.setIndeterminate(false);
            progressDialog.setMax(100);
            progressDialog.setProgress(0);
            progressDialog.show();
            System.out.println("fsgsgsg");
        }
        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub
            progressDialog.setProgress(values[0]);  
        }

    }
} 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:02:14.793

您在后台设置 ListAdapter 不应该这样做，因为它是 UI 线程任务。将您的整个代码更改`doInBackground()`为`onPostExecute()`except for `getJsonFromUrl(url)`。`doInBackground()`您可以返回可以从中获取的 jsonobject`onPostExecute()`作为结果参数。您仍然会收到运行时错误，`onPostExecute()`然后您只需正确输入此`listview.setAdapter()`行

```
runOnUIThread(new Runnable(){
public void run()
{

}
}); 
```

我希望它清楚，它会为你工作。

# backwards-compatibility - Automator 生成的应用程序 - 向后兼容性

> ID：13910303
> 
> 赞同：0
> 
> 时间：2012-12-17T07:59:30.423
> 
> 标签：backwards-compatibility, automator

根据我的经验，在 Mountain Lion 上使用 automator 创建的应用程序不适用于 Snow Leopard 机器。但事实并非如此：在 Snow Leopard 上使用 automator 创建的应用程序确实可以在 Mountain Lion 机器上运行。

我正在围绕命令行可执行文件创建一个非常简单的包装器，并且使用 cocoa 似乎有点矫枉过正。我希望该应用程序可以在尽可能多的 OSX 版本上运行，因此向后兼容性是一个问题。

对这件事有什么想法吗？如何确保我的 Mountain Lion Automator 应用程序向后兼容？

# php - 联系表格提交错误

> ID：13910304
> 
> 赞同：0
> 
> 时间：2012-12-17T07:59:36.403
> 
> 标签：php, html, forms, contacts

我已经设置了一个简单的联系表格，但在最后的润色方面遇到了一些麻烦。每当提交表单时，我都会收到一条错误消息。希望有人可以看看我的代码并指出我的错误。谢谢！

（已编辑）忘记提及错误是，一旦提交表单，我将被重定向到错误页面（error.html）而不是成功（contactthanks.php）页面。

HTML：

```
<form method="post" action="contactengine.php">
<label for="Name">Name:</label>
<input type="text" name="Name" id="Name" />

<label for="City">City:</label>
<input type="text" name="City" id="City" />

<label for="Email">Email:</label>
<input type="text" name="Email" id="Email" />

<label for="Message">Message:</label><br />
<textarea name="Message" rows="20" cols="20" id="Message"></textarea>

<input type="submit" name="submit" value="Submit" class="submit-button" />
</form> 
```

PHP：

```
<?php

$EmailFrom = "";
$EmailTo = "MYEMAIL@gmail.com";
$Subject = "";
$Name = Trim(stripslashes($_POST['Name'])); 
$Tel = Trim(stripslashes($_POST['Tel'])); 
$Email = Trim(stripslashes($_POST['Email'])); 
$Message = Trim(stripslashes($_POST['Message'])); 

$validationOK=true;
if (!$validationOK) {
print "<meta http-equiv=\"refresh\" content=\"0;URL=error.html\">";
exit;
}

$Body = "";
$Body .= "Name: ";
$Body .= $Name;
$Body .= "\n";
$Body .= "Tel: ";
$Body .= $Tel;
$Body .= "\n";
$Body .= "Email: ";
$Body .= $Email;
$Body .= "\n";
$Body .= "Message: ";
$Body .= $Message;
$Body .= "\n";

$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

if ($success){
print "<meta http-equiv=\"refresh\" content=\"0;URL=contactthanks.php\">";
}
else{
print "<meta http-equiv=\"refresh\" content=\"0;URL=error.html\">";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:29:02.413

```
$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

if ($success){
print "<meta http-equiv=\"refresh\" content=\"0;URL=contactthanks.php\">";
}
else{
print "<meta http-equiv=\"refresh\" content=\"0;URL=error.html\">";
} 
```

它正在重定向到您的错误页面，因为调用`mail`正在返回`false`（表明电子邮件未被接受传递），而这正是您告诉它在这种情况下执行的操作。

您需要检查服务器上设置的 SMTP。

`sendmail_from`通常要检查的设置`sendmail_path`在您的 PHP.ini 文件中。看到您已经设置了`From`标题，`sendmail_path`可能没有正确设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:27:36.823

查看导致问题的原因

```
ini_set("display_errors", "1"); 
error_reporting(E_ALL);`. 
```

我的猜测是你有错误的 smtp 设置和`mail`功能失败。

# php - 如何使用 curl 而不是 url fopen？

> ID：13910308
> 
> 赞同：-4
> 
> 时间：2012-12-17T07:59:45.150
> 
> 标签：php, curl, fopen

我正在使用以下代码，但`allow_url_fopen`出于安全原因，我的服务器已关闭。如何使用 curl 做到这一点。

```
 $request = array(
                    'method' => $method,
                    'params' => $params,
                    'id' => $currentId
                    );
    $request = json_encode($request);
    $this->debug && $this->debug.='***** Request *****'."\n".$request."\n".'***** End Of request *****'."\n\n";

    // performs the HTTP POST
    $opts = array ('http' => array (
                        'method'  => 'POST',
                        'header'  => 'Content-type: application/json',
                        'content' => $request
                        ));
    $context  = stream_context_create($opts);
    if ($fp = fopen($this->url, 'r', false, $context)) {
        $response = '';
        while($row = fgets($fp)) {
            $response.= trim($row)."\n";
        }
        $this->debug && $this->debug.='***** Server response *****'."\n".$response.'***** End of server response *****'."\n";
        $response = json_decode($response,true);
    } else {
        throw new Exception('Unable to connect to '.$this->url);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:07:47.360

我为此目的编写了一个函数，它可能会对您有所帮助。不过要小心，因为它没有根据您的特定用例进行调整。

```
<?php
/**
 * @param $base     First part of the URL to direct the request to
 * @param $path     Second part of the URL
 * @param $param    Array of parameters to be used for the request
 * @return          The result of the request if successful otherwise false
 */
function request($base = "", $path = "", $param = array()) {
    $ch = curl_init();
    $url = $base . $path;
    if (isset($param["get"])) {
        $getparams = implode("&", $param["get"]);
        $url .= "?" . $getparams;
    }
    if (isset($param["post"])) {
        $postparams = implode("&", $param["post"]);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $postparams);
    }
    if (isset($param["header"])) {
        curl_setopt($ch, CURLOPT_HTTPHEADER, $param["header"]);
    }
    curl_setopt_array($ch, array(
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_URL => $url
    ));
    $response = curl_exec($ch);
    curl_close($ch);
    return $response;
}

$result = request("http://www.iana.org/domains/example/");
var_dump($result);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:48:09.093

```
 $request = array(
                    'method' => $method,
                    'params' => $params,
                    'id' => $currentId
                    );
    $request = json_encode($request);
    $this->debug && $this->debug.='***** Request *****'."\n".$request."\n".'***** End Of request *****'."\n\n";

    // performs the HTTP POST

      $ch = curl_init($this->url);
            curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/json'));
            curl_setopt($ch, CURLOPT_POST, true);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
            $response = json_decode(curl_exec($ch),true);
            curl_close($ch); 
```

这对我有用。

# php - 来自字符串的 PHP 日期时间

> ID：13910313
> 
> 赞同：1
> 
> 时间：2012-12-17T07:59:57.137
> 
> 标签：php, mysql, datetime

在花了 6 个多小时尝试这样做并尝试了许多不同的已发布解决方案之后，我只想问一个确切的问题。

我想让用户以 html 形式输入美国格式的日期和时间。今天的格式`12/16/2012 02:53`使用 24 小时时间格式。

让我们称之为 start_date。

然后我想将包含 start_date 的记录插入到 mysql 数据库中的 datetime 类型字段中。我正在使用 PHP 5.2。我看到的许多解决方案都需要 5.3，而 5.2 的解决方法都没有。

有人可以给我一个确切的例子。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:02:43.533

1.  使用正则表达式或字符串处理从当前格式中提取字段。
2.  以 MySQL 格式创建日期。
3.  插入数据库。

请参见此处：[date_create_from_format 等效于 PHP 5.2（或更低版本）](https://stackoverflow.com/questions/2621433/date-create-from-format-equivalent-for-php-5-2-or-lower)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:07:58.457

实际上，您的日期格式无效，无法插入 mysql 表中，格式必须为 YYYY-mm-dd Hour:min:sec，以便放置在 datetime 字段中。但是如果你使用字段类型作为 varchar 你不需要关心格式。你可以插入任何你想要的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T08:12:36.117

或者你可以依赖 MySQL 解析：

```
SELECT STR_TO_DATE('12/16/2012 02:53', '%m/%d/%Y %H:%i') 
```

注意：这需要两位数的月、日和小时，即 01 - 而不是 1。有关其他格式，请参阅[MySQL 日期](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)格式。

此外，为了使这种方法实用，您必须处理失败的解析尝试：例如，您可以设置 Datetime 列`NOT NULL`，以便在您尝试写入时所有插入或更新都会失败`NULL`（`STR_TO_DATE`将返回`NULL`无效日期）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T08:56:19.560

您可以使用`strtotime()`. 它根据格式解析日期。例如，使用`/`(MM/DD/YYYY) 的日期使用美国格式解析，使用`-`或`.`(DD-MM-YYYY 或 DD.MM.YYYY) 的日期使用欧洲格式解析。[请参阅文档中的第三个注释](http://dk1.php.net/strtotime#refsect1-function.strtotime-notes)。

如果可能的话，你真的应该考虑升级到 5.4。在那里你可以使用非常好的[日期类](http://dk1.php.net/manual/en/class.datetime.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T18:54:02.177

你问了一个例子，还没有人提供，所以这里是：-

```
$start_date = date("Y-m-d H:i:s", strtotime("12/16/2012 02:53"));
echo $start_date; 
```

输出：-

```
2012-12-16 02:53:00 
```

这种格式匹配[MySql DateTime 类型](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)。

[请参阅此处的工作示例，](http://3v4l.org/XdjXB#v430)该示例还演示了它在 PHP 5.2 中的工作原理。

请参阅[strtotime](http://php.net/strtotime)和[date](http://php.net/date)的手册。

# ruby-on-rails - Rails、Backbone、PhoneGap、CORS（Access-Control-Allow-Origin 错误不允许）

> ID：13910315
> 
> 赞同：6
> 
> 时间：2012-12-17T08:00:01.517
> 
> 标签：ruby-on-rails, ajax, cordova, backbone.js, cors

我正在使用backbone.js 和Rails 后端构建一个Phonegap 应用程序。创建新用户时，我收到与 CORS 相关的错误：

我正在（$ python -m SimpleHTTPServer）上运行我的 PhoneGap Web 应用程序，并在（$ rails 服务器）`http://0.0.0.0:8000`上的 webrick 中运行我的 Rails 应用程序。`http://0.0.0.0:3000`

尝试像这样在 Backbone 中创建新的“Spot”时会出现问题（chrome js 控制台）：

```
> s = new App.Models.Spot()
(creates Spot)
> s.save()
(returns error Object)
OPTIONS http://0.0.0.0:3000/spots.json 404 (Not Found) jquery-1.8.2.js:8416
XMLHttpRequest cannot load http://0.0.0.0:3000/spots.json. Origin http://0.0.0.0:8000 is not allowed by Access-Control-Allow-Origin. 
```

这是我的应用程序控制器：

```
def set_access_control_headers
  headers['Access-Control-Allow-Origin'] = 'http://0.0.0.0:8000'
  headers['Access-Control-Request-Method'] = 'POST, GET'
end 
```

我读过很多文章，我能得到的最远的地方是在修改我的 routes.rb 以包含以下内容时：

```
match '*all' => 'application#cor', :constraints => {:method => 'OPTIONS'} 
```

在我的 application_controller.rb

```
def cor
  headers["Access-Control-Allow-Origin"] = "*"
  headers["Access-Control-Allow-Methods"] = %w{GET POST PUT DELETE OPTIONS}.join(",")
  headers["Access-Control-Allow-Headers"] = %w{Origin Accept Content-Type X-Requested-With X-CSRF-Token}.join(",")
  head(:ok) if request.request_method == "OPTIONS"
end 
```

然后添加路由和“cor”方法将允许我进行保存，但是，删除记录时我会遇到同样的错误。

我了解了 CORS 的基本概念，我无法访问与我的请求来源不同的域的服务器。但是我不清楚如何使用 Rails、Backbone、Phonegap 进行设置。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:19:32.437

我已经关注[了这篇文章](http://www.tsheffler.com/blog/?p=428)（“Rails 中的 CORS”部分），它对我有用。

我更改`if request.method == :options`并`if request.method == 'OPTIONS'`添加方法 PUT、DELETE 到`headers['Access-Control-Allow-Methods']`. 在我有 localhost:8080 中插入了“*” `Access-Control-Allow-Origin`（我在 nginx 上运行我的应用程序）。

希望这会有所帮助。

PD：您的应用程序控制器中有过滤器（挂钩）吗？

# c# - 实体框架 5：DbGeography

> ID：13910316
> 
> 赞同：0
> 
> 时间：2012-12-17T08:00:04.323
> 
> 标签：c#, entity-framework, entity-framework-5, spatial

我正在尝试访问我的解决方案中的 DbGreography 数据类型。我已经通过 nuget 安装了 EF5。我已经引用了空间类型应该驻留的 System.Data.Entity。但是，那里似乎没有任何 system.data.spatial 命名空间。

我也在使用 vs.net 2012。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:31:58.087

地理类型在`System.Data.Entity`程序集版本 4.0.0.0 中。如果您的项目在安装 EF5 时针对的是不同的框架，那么您很可能获得了对 3.5.0.0 版本的引用，该版本没有空间类型。确保您的项目以 .NET 4.5 为目标并且您引用了 System.Data.Entity 的 4.0.0.0 版本。

# android - 将 Mat 描述符存储到数据库中

> ID：13910319
> 
> 赞同：3
> 
> 时间：2012-12-17T08:00:27.670
> 
> 标签：android, opencv

我正在 Android 上开发一个图像处理应用程序，它使用OpenCV for Android 中的**SURF 特征描述符。**

我对我的图像进行了图像特征检测，并希望将检测到的特征存储在数据库中。有谁知道如何将带有描述符的 Mat 图像存储到数据库中，我可以在其中检索它以进行处理？

因为从每个图像中获取特征并比较需要大量的处理时间，如果有办法将获取特征存储在 android 的某个地方，那么我可以加快这个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:56:12.043

您可以做的是在存储对象之前将其序列化为字节流。这里有一个很好的Android序列[化教程——Android序列化教程](http://www.jondev.net/articles/Android_Serialization_Example_%28Java%29)

# mysql - 需要有关从两个表转移但复制其他表中的所有详细信息的帮助

> ID：13910320
> 
> 赞同：1
> 
> 时间：2012-12-17T08:00:28.463
> 
> 标签：mysql, sql

我有一个问题，我有两个不同的表格示例

表_数据表_历史。

情况是，当新用户注册表单时，所有详细信息都将插入到 table_data 中，然后如果用户想要添加被提名人，详细信息仍将插入到 table_data 中，它将用该用户替换详细信息，以及有关table_data 中的用户将转移到另一个表调用 table_history。

我的问题是，如何将第一个用户的 table_data 中的所有详细信息转移到 table_history 中？在被提名人信息插入 table_data 之后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:41:20.017

在更新 Table_data 之前，我会执行 INSERT INTO Table_history

```
INSERT INTO Table_history (ColA, ColB, ...) 
VALUES (
(SELECT ColA FROM Table_data WHERE id = ... ),
(SELECT ColB FROM Table_data WHERE id = ... ), 
.... 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:42:18.760

您可以为这种情况创建触发器。

应在表 table_data 上插入后创建触发器。

请参阅以下链接以获取完整参考。 [http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html) 您可能已经使用标识符 OLD 来引用 Table_data 中的当前数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:45:48.760

我不能完全理解你的问题。您可以编写一个数据库触发器来感知用户何时添加被提名人，在插入之前，您可以从 Table_data 表中删除记录并将其插入到触发器逻辑中的 Table_hostory 表中。

# html - 如何在图像上放置画布？

> ID：13910321
> 
> 赞同：0
> 
> 时间：2012-12-17T08:00:37.413
> 
> 标签：html, css

这是我今天的问题，我尝试在 < **img** > 上画一些东西，这是一个结构

```
<div id='...' style='position:relative;'>
  <img id='...' style='posistion:absolute;' />
  <canvas id ='...' style='position:absolute;' />
</div> 
```

css中的img已经

```
-moz-user-select: none;
-khtml-user-select: none;
-webkit-user-drag: none;
-webkit-user-select: none;
user-select: none; 
```

如何在图像上绘制画布？现在它落后了。我不能在画布上使用 z-index。我尝试制作其他 div。它必须是一个img。我应该用别的东西代替画布吗？我可以使用其他 div，但我想绘制的路径并不是很简单，并且当图像更大/更小并且仍然看起来不错时必须调整大小。感谢您的建议，希望每个人都能理解我的英语。

为了更清楚，我想要的是当画布落后时的代码。当我预先不附加画布时，图像就消失了。我想放置一条路径来向用户显示这已被删除，但有时在此屏幕上还有许多其他 div，所以我想将画布放在 IMG 或 img 所在的 DIV 上。它必须在前面，因为当img 很大我们不会看到下的路径。这是一个链接 [https://dl.dropbox.com/u/6421191/canvasbehind.jpg](https://dl.dropbox.com/u/6421191/canvasbehind.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:08:09.060

只需将图像绘制到画布上：

```
<html>
<canvas id ='your_canvas'  width="1000" height="1000"/>
</html>

<script>
window.onload=function(){
var canvas = document.getElementById('your_canvas');
var ctx = canvas.getContext('2d');
var img = new Image();
img.src = (your image source);
ctx.drawImage(img, x_pos,y_pos,width,height);
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:08:33.053

HTML

```
<div id='mydiv' >
  <img id='myimage' src="http://placekitten.com/200/385" />
  <canvas id ='mycanvas'  width="200" height="100" />
</div> 
```

CSS

```
div#mydiv{
    position: relative;
}
#myimage{
     position: relative;
}
#mycanvas{
    position: absolute;
    top: 0;
    left: 0;
    background-color: #333;
} 
```

我认为这就是你正在尝试做的。

在背景上有一张图像并在图像顶部显示画布区域？

我希望我的小示例代码对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:11:53.303

将画布放在 html 中的 img 之前：

```
<div id='...' style='position:relative;'>
<canvas id ='...' style='position:absolute;' />
<img id='...' style='posistion:absolute;' />
</div> 
```

# sql - sql 从同一 SQL 查询中的新列生成新列

> ID：13910324
> 
> 赞同：1
> 
> 时间：2012-12-17T08:00:44.760
> 
> 标签：sql, select, sql-server-2008-r2, case

我有以下 sql 查询

```
SELECT
i.catalogid, i.itemname,
CASE WHEN o.oshippeddate is not null 
          AND  o.oshippeddate between @Date1 AND @Date2
    THEN ISNULL(i.F2,0)
    ELSE 0 END +
CASE WHEN o.oshippeddate2 is not null 
          AND o.oshippeddate2 between @Date1 AND @Date2
    THEN ISNULL(i.F3,0) 
    ELSE 0 END +
CASE WHEN o.oshippeddate3 is not null 
          AND  o.oshippeddate3 between @Date1 AND @Date2
     THEN ISNULL(i.F4,0) 
     ELSE 0 END AS amount, 
    amount*i.ekprice EK,
    amount * (i.unitprice
              - ((i.unitprice/((o.otax/100)+1))
              - o.odiscount-o.oshipcost-o.coupondiscount) VK
FROM orders o 
INNER JOIN oitems i 
ON i.orderid = o.orderid 
```

如果您查看我要选择的最后 2 列，它们是从列数量生成的，它本身是使用 select case 语句生成的新列，我是 sql 新手，我想知道如何让这样的东西工作，所以基本上它说`invalid column name amount`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:11:10.887

在处理查询之前，列数量不存在，所以我建议您使用子查询，然后进行乘法运算

喜欢：

```
SELECT AA.*,(amount*ekprice)  as EK,
        (amount*(unitprice-((unitprice/((otax/100)+1))-odiscount-oshipcost-coupondiscount)) as VK
FROM (
    SELECT
        i.catalogid,i.itemname,i.ekprice,i.unitprice,o.otax,o.odiscount,o.oshipcost,o.coupondiscount
        CASE WHEN o.oshippeddate is not null AND  o.oshippeddate  between @Date1 AND @Date2
             THEN ISNULL(i.F2,0)
             ELSE 0 END +
        CASE WHEN o.oshippeddate2 is not null AND o.oshippeddate2 between @Date1 AND @Date2
             THEN ISNULL(i.F3,0) 
             ELSE 0 END +
        CASE WHEN o.oshippeddate3 is not null AND  o.oshippeddate3 between @Date1 AND @Date2
             THEN ISNULL(i.F4,0) 
             ELSE 0 END AS amount   
    FROM 
        orders o 
        INNER JOIN oitems i ON i.orderid = o.orderid 
)AS AA 
```

编辑：

请记住，如果处理大量数据，这种带有大量 CASE 语句的查询会显着减慢执行速度，因此，如果您在某些 SERVER-CLIENT 环境中使用它，我建议您在客户端进行计算之前被展示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:42:29.137

使用[`CROSS APPLY`](http://msdn.microsoft.com/en-us/library/ms177634.aspx#languageReferenceRemarksToggle "FROM (Transact-SQL) – 备注")：

```
SELECT
    i.catalogid, i.itemname, **x.amount**,
    **x.amount** * i.ekprice EK,
    **x.amount** * (i.unitprice
              - ((i.unitprice/((o.otax/100)+1))
              - o.odiscount-o.oshipcost-o.coupondiscount) VK
FROM orders o 
INNER JOIN oitems i 
ON i.orderid = o.orderid 
**CROSS APPLY (
  SELECT
    CASE WHEN o.oshippeddate is not null 
              AND  o.oshippeddate between @Date1 AND @Date2
        THEN ISNULL(i.F2,0)
        ELSE 0 END +
    CASE WHEN o.oshippeddate2 is not null 
              AND o.oshippeddate2 between @Date1 AND @Date2
        THEN ISNULL(i.F3,0) 
        ELSE 0 END +
    CASE WHEN o.oshippeddate3 is not null 
              AND  o.oshippeddate3 between @Date1 AND @Date2
         THEN ISNULL(i.F4,0) 
         ELSE 0 END AS amount
) x** 
```

[可能与@Jester 建议](https://stackoverflow.com/a/13910444/297408)的 subselect 方法一样有效，这可能会证明更易于维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:25:55.407

使用内部查询，选择您需要的所有列。

```
SELECT catalogid, itemname,
    amount*ekprice EK,
    amount*(unitprice-((unitprice/((otax/100)+1))-odiscount-oshipcost-coupondiscount) VK
FROM (
SELECT
i.catalogid,
i.itemname,
i.ekprice,
i.unitprice,
o.otax,
o.odiscount,
o.oshipcost,
o.coupondiscount,
CASE WHEN o.oshippeddate between @Date1 AND @Date2
     THEN ISNULL(i.F2,0)
     ELSE 0 END +
CASE WHEN o.oshippeddate2 between @Date1 AND @Date2
     THEN ISNULL(i.F3,0) 
     ELSE 0 END +
CASE WHEN o.oshippeddate3 between @Date1 AND @Date2
     THEN ISNULL(i.F4,0) 
     ELSE 0 END AS amount
FROM orders o INNER JOIN oitems i 
ON i.orderid = o.orderid 
) x 
```

此外，您不需要所有这些 null 测试 - 如果列为 null 将不会在任何“之间”，所以我删除了这些。

# android - 安卓接听电话

> ID：13910325
> 
> 赞同：1
> 
> 时间：2012-12-17T08:00:47.153
> 
> 标签：android

android2.3之后我们不能使用java reflect来接听电话。所以找到了另一种方式来acswer：

```
private void answerPhoneHeadsethook(Context context)
{
    // Simulate a press of the headset button to pick up the call
    Intent buttonDown = new Intent(Intent.ACTION_MEDIA_BUTTON);
    buttonDown.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK));
    context.sendOrderedBroadcast(buttonDown, "android.permission.CALL_PRIVILEGED");

    // froyo and beyond trigger on buttonUp instead of buttonDown
    Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);
    buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
    context.sendOrderedBroadcast(buttonUp, "android.permission.CALL_PRIVILEGED");
} 
```

我在里面找到了一些信息`mediaButtonBroadcastReceive`，`AudiaService`但是我没有找到处理事件的直接类。谁能告诉我？

# in-app-billing - 在应用计费 V3 onActivityResult 中未调用

> ID：13910326
> 
> 赞同：4
> 
> 时间：2012-12-17T08:00:54.517
> 
> 标签：in-app-billing

我已经在我的应用程序中实现了新的 IAB，但是当我在两个不同的设备上对其进行测试时，在 Galaxy S3 上的结果是不同的，但在 Galaxy S1 (gt-i9000) 上，购买 onActivityResult 方法后没有调用和应用程序重新启动。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:58:05.567

我遇到了同样的问题，就我而言，原因是我在意图中设置了一个标志，该标志调用了托管购买过程的活动

i.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);

在删除它工作的标志后，我想这是因为当 startIntentSenderForResult 启动购买界面时，活动被破坏，没有保存在历史记录中，并且不知何故没有必要处理 onActivityResult

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:06:50.873

你在使用 TABActivity 吗？如果答案是肯定的，那么程序会有所不同，因为将为父类调用 onActvityResult，这是您扩展 TABActivity 的活动，我不知道为什么，但似乎父类正在关注 onActivityResult。所以您的 startActvityForResult 或 startIntentSenderForResult 代码应该在那个活动中。

我使用此链接并根据我的应用程序进行了一些更改并且它有效

[在 TabActivity 中永远不会调用 onActivityResult](https://stackoverflow.com/questions/11739370/onactivityresult-is-never-called-in-tabactivity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T01:13:43.710

我对这个问题的小精灵使用的是否定的`requestCode`. 这破坏了结果调度机制。

# c# - C# 数据库映射器 - 对象列表

> ID：13910335
> 
> 赞同：0
> 
> 时间：2012-12-17T08:01:58.787
> 
> 标签：c#, mysql, object

我正在使用另一篇文章中提供的示例将数据库查询映射到 C# 对象：

[C# 数据库映射器](https://stackoverflow.com/questions/7858510/c-sharp-database-mapper)

我看不到如何利用它来返回对象列表，任何人都可以提出正确的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:33:14.710

有很多方法可以做到这一点，我建议你使用 linq to SQL

创建 dbml 类见这篇文章[http://blogs.msdn.com/b/charlie/archive/2007/11/19/connect-to-a-sql-database-and-use-the-sql-designer.aspx](http://blogs.msdn.com/b/charlie/archive/2007/11/19/connect-to-a-sql-database-and-use-the-sql-designer.aspx)

然后你可以写这样的东西：

```
var users = new ArrayList();

       using (var db = new DataClasses1DataContext())
        {
            var query = db.USERS
            foreach (var q in query)
            {
                users.Add(q);
            }
        }

       return users; 
```

# visual-studio-2010 - 非 mvc 项目 Visual Studio 中的“添加视图”

> ID：13910337
> 
> 赞同：3
> 
> 时间：2012-12-17T08:02:12.360
> 
> 标签：visual-studio-2010, model-view-controller, asp.net-mvc-4

我有一个解决方案，我有一个 MVC 项目，其中包含我的所有视图和所有其他前端代码。我们还有另一个项目（在同一个解决方案中），我有控制器。

如果我向 mvc 项目添加一个控制器并向这个控制器添加一个 viewresult 函数，我可以右键单击“return view(viewModel);” 并选择“添加视图”。

如果我将此控制器复制到“非 mvc”项目，我不会在右键单击上下文菜单中获得“添加视图”。有没有办法得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:36:13.653

是的 - 您需要将 MVC ProjectTypeGuid 添加到项目文件中。在 Visual Studio 中上传项目，然后右键单击 > 编辑项目文件。检查您的项目中是否有`<ProjectTypeGuids>`标签。它很可能就在`<ProjectGuid>`标签的正下方。我的 MVC 项目中有 3 个 guid，但我不确定到底需要哪些。首先添加所有 3 个，重新加载项目，检查您是否有上下文菜单，然后尝试一次删除一个以隔离需要的内容。我不认为将它们全部留在项目中会损害项目。这是我的项目文件中的标签：

```
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

编辑：不确定这是否会为您提供视图中的上下文菜单，但它会为您提供解决方案资源管理器，右键单击 > 添加视图上下文菜单。

编辑2：是的，它会的，只是试过了。

# asp.net-mvc - 剑道网格中的HTML新行

> ID：13910339
> 
> 赞同：1
> 
> 时间：2012-12-17T08:02:18.263
> 
> 标签：asp.net-mvc, telerik, kendo-ui

我在 mvc 中有一个带有列属性**.Encoded(false)**的剑道网格在 控制器中，我将**Environment.NewLine**替换为

```
 <br> 
```

但是在视图中有一个文本而不是真正的新行。我都试过了：

```
 <br> or <br/> 
```

它也不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T14:50:00.017

最后我自己解决了。在网格中：

```
columns.Bound(m => m.Address).Width(150).Encoded(false).ClientTemplate("#= getHtmlNewLinesString(Address) #"); 
```

在js中：

```
 function getHtmlNewLinesString(text) {
        var regexp = new RegExp('\n', 'g');
        return text.replace(regexp, '<br>');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T02:18:07.100

在这种情况下，过滤器不起作用，因为单元格包含`<br>`.

# c++ - Objective-C 或 Objective C++ 可以处理 C++ 异常吗？

> ID：13910340
> 
> 赞同：8
> 
> 时间：2012-12-17T08:02:23.067
> 
> 标签：c++, objective-c, exception, objective-c++

我有一个用于网络通信的 C++ 库，我需要为 Mac 移植该库，以前这个库用于 Windows C++ 应用程序。

C++ Network Lib 的流程是基于发生错误时的异常，而不是返回错误代码或最后一个错误。

现在因为在 Mac 上我们使用 Objective-C/C++ 来开发应用程序。我需要在 Objective-C/C++ 中有 UI，但用于核心网络功能的库是相同的 C++ 库。

所以我的问题是目标 C 是否能够处理 C++ 调用引发的异常？如果是这样，如何？如果不是，我该如何解决？或者我们是否围绕 C++ Lib 调用编写一个包装器并使用异常并返回错误代码？

求指教，怎么解决。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T16:26:34.580

如果您在 OS X 上使用 iOS 或 64 位运行时，那么一切都可以正常工作。您可以编写 C++ 风格的 try/catch，它会按预期工作，@try/@catch 也一样。请注意，对于 Objective-C 和 C++ 异常，您仍然有两种不同的样式；唯一的统一是a or捕获*所有异常的*[特殊情况](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Exceptions/Articles/Exceptions64Bit.html#//apple_ref/doc/uid/TP40009044-SW3)，Objective-C 或 C++。这对于集中您的清理代码有点用处，但是您可以对异常本身做的所有事情就是再次盲目地@throw。`catch(...)``@catch(...)`

 *但是在任何情况下，[异常都不应该用于 Objective-C](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Exceptions/Articles/ExceptionsAndCocoaFrameworks.html#//apple_ref/doc/uid/TP40009045-SW1)（或 Objective-C++）程序中的流控制。您确实应该努力在 C++ 异常退出相关库时捕获它们，并将它们转换为更合适的机制，例如 NSError。特别是，避免让它们中的任何一个通过任何 Apple 或 3rd 方框架引发——大多数这样的框架对于 Objective-C 异常都不是异常安全的，更不用说 C++ 异常了，因此后果是不确定的（主要是围绕内存泄漏，尽管很多其他故障是可能的）。*

# android - 如何在android中获取最后插入的本机联系人ID

> ID：13910343
> 
> 赞同：2
> 
> 时间：2012-12-17T08:02:30.597
> 
> 标签：android, android-contacts, contactscontract

我必须使用内容解析器获得不同的原始联系人 ID。

```
ContentResolver cr = getContentResolver();
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, 
                    null, null, null, null);

if (cur.getCount() > 0){                    
   while (cur.moveToNext()){                          
        String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));                         
        String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

         System.out.println("id............"+id+"..."+name);                            
 }
} 
```

我是否已将所有联系人插入本机联系人。然后使用上面的代码我得到了所有本机联系人 ID。如何在插入 1 个联系人后一次获取一个 id。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T05:37:28.483

> 替换为

```
cursor.moveToLast(); 
```

您可以轻松获取数据库的最后一个 id

# php - CSS 和 Chrome 的问题

> ID：13910350
> 
> 赞同：0
> 
> 时间：2012-12-17T08:03:12.847
> 
> 标签：php, html, css, google-chrome, firefox

我的客户端在 Firefox 中看起来很棒，但在 Chrome 中看起来有点时髦:(

这是我的一些html代码..来自库存布局

```
<div class="clientinventory">
<div class="objtitle">
<p>Ore Inventory</p>
</div>
<div class="invitemvalue">10</div>
<div class="invitemtxtholder">Copper</div>
<div class="invitemvalue">0</div>
<div class="invitemtxtholder">Iron</div>
<div class="invitemvalue">0</div>
<div class="invitemtxtholder">Gold</div>
<div class="invitemvalue">0</div>
<div class="invitemtxtholder">Platnium</div>
</div> 
```

这是我的一些css代码..来自库存布局

```
.invitemtxtholder {
    margin-top: 5px;
    margin-right: 5px;
    margin-left: 5px;
    background-color: #543C25;
    border: 1px solid #000;
    color: #FFF;
    width: 60px;
    text-align: center;
    float: left;
    clear: left;
}
.invitemvalue {
    clear: right;
    float: right;
    font-style: italic;
    color: #000;
    margin-top: 5px;
    margin-right: 5px;
    margin-bottom: 5px;
    margin-left: 0px;
    width: 65px;
} 
```

**注意：我不允许发布图片，显然是大声笑，所以这里是链接**

[http://www.ultimate-miner.com/UM2/Client.php](http://www.ultimate-miner.com/UM2/Client.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:51:58.780

我可以看出区别。

提交按钮在 Firefox 中向下跳，但在 chrome 中保持内联。

用css向提交按钮添加一些宽度，这将被修复:)

# dll - dll 属性的 CopyToLocal 属性未显示

> ID：13910352
> 
> 赞同：0
> 
> 时间：2012-12-17T08:03:33.310
> 
> 标签：dll, visual-studio-2005

我已将源代码从开发服务器复制到我的本地计算机。但我收到 dll 错误（Ajaxcontroltoolkit dll）。因此，当我尝试将 CopyToLocal 属性设置为 True 时，我看不到 dll 的名为 COpyToLocal 的属性。那么如何修复它。截图如下。

```
 [1]: http://i.stack.imgur.com/7wGya.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:02:03.477

我通过授予 C 盘中临时 asp.net 文件夹的完全权限解决了 dll 问题。希望它可以帮助某人。

# c++ - 模板模板时强制特定重载

> ID：13910355
> 
> 赞同：8
> 
> 时间：2012-12-17T08:03:46.260
> 
> 标签：c++, templates, c++11, metaprogramming

考虑以下代码：

```
#include <iostream>
#include <vector>
#include <type_traits>

// Version A
template<typename T>
void f(const T& x)
{
    std::cout<<"Version A"<<std::endl;
}

// Version B
template<template<typename> class T, typename T1>
void f(const T<T1>& x)
{
    std::cout<<"Version B"<<std::endl;
}

// Main
int main(int argc, char* argv[])
{
    f(double());
    f(std::vector<double>()); // <- How to force the use of version B ?
    return 0;
} 
```

默认情况下，它将产生：

```
Version A
Version A 
```

`Version B`当传递的类型是具有良好形状的模板模板时如何强制使用（我可以添加新版本`f`，我可以添加`std::enable_if`或其他 C++11 类型特征语法，但如果可能的话，我想避免添加帮助器班级） ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T08:06:51.023

`std::vector`不带一个`typename`参数，它需要2个！不要忘记分配器。

因此，使用可变参数模板：

```
template<template<typename...> class T, typename T1>
void f(const T<T1>& x)
{
    std::cout<<"Version B"<<std::endl;
} 
```

现在它可以按您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:24:48.287

正如 Pubby 在[他的回答](https://stackoverflow.com/a/13910390/476681)中解释的那样，std::vector 是一个带有两个参数的模板，因此您的重载函数需要采用更多模板参数。如果您不想使用可变参数模板，则需要设置正确数量的参数：

```
#include <iostream>
#include <vector>
#include <type_traits>

// Version A
template<typename T>
void f(const T& )
{
    std::cout<<"Version A"<<std::endl;
}

// Version B
template<template<typename,typename> class T, typename T1,typename T2>
void f(const T<T1,T2>& )
{
    std::cout<<"Version B"<<std::endl;
}

template<typename T>
void baa(const T&)
{
}

// Main
int main()
{
    f( double() );
    f( std::vector<double>() ); // <- How to force the use of version B ?
} 
```

# ubuntu-11.10 - Tryton 服务器版本不兼容

> ID：13910356
> 
> 赞同：1
> 
> 时间：2012-12-17T08:03:57.217
> 
> 标签：ubuntu-11.10, erp, tryton

我正在尝试将 Tryton 连接到 postgres 数据库。在 Tryton 客户端配置文件中，我使用了以下详细信息：

*   主机名：本地主机
*   端口：8000
*   用户名：管理员

现在，每次我输入上面的详细信息时，数据库标签都会显示：

```
Incompatible version of the server 
```

所以我检查了 Tryton 服务器和客户端版本，我发现了它：

```
tryton = 2.6.0
trytond = 2.0.1 
```

好的，现在我知道 trytond 与我的 tryton 版本不同。我在网上搜索了很多次以找到匹配的客户端和服务器版本，但失败了。

即使在 Ubuntu synaptic 包管理器中，我也找不到真正相同的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:06:03.507

你在用[点子](http://pypi.python.org/pypi/pip)吗？如果没有，请先安装它。这是安装 python 包的最佳工具（据我所知）。

`sudo pip install 'tryton>2.6,<2.7'`使用 pip和 tryton server安装 tryton 客户端`sudo pip install 'trytond>2.6,<2.7'`。这将安装最新系列 2.6 的 tryton 客户端和服务器。要安装不同的版本，只需在命令中更改版本号。

一切顺利！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:11:15.060

您必须使用相同的两个第一个版本号。所以你必须使用2.6系列或2.0系列。在 Ubuntu 上，[最后打包的系列](http://packages.ubuntu.com/search?suite=default&section=all&arch=any&searchon=names&keywords=tryton)是 2.2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:36:00.880

[您可以从http://downloads.tryton.org/2.6/](http://downloads.tryton.org/2.6/)下载 tryton 和相应的 trytond 版本[](http://downloads.tryton.org/2.6/)

# python - 我如何在scrapy python中使用多个请求并在它们之间传递项目

> ID：13910357
> 
> 赞同：54
> 
> 时间：2012-12-17T08:04:00.283
> 
> 标签：python, scrapy

我有`item`对象，我需要将它传递给许多页面以将数据存储在单个项目中

就像我的项目是

```
class DmozItem(Item):
    title = Field()
    description1 = Field()
    description2 = Field()
    description3 = Field() 
```

现在这三个描述在三个单独的页面中。我想做一些类似的事情

现在这适用于`parseDescription1`

```
def page_parser(self, response):
    sites = hxs.select('//div[@class="row"]')
    items = []
    request =  Request("http://www.example.com/lin1.cpp",  callback =self.parseDescription1)
    request.meta['item'] = item
    return request 

def parseDescription1(self,response):
    item = response.meta['item']
    item['desc1'] = "test"
    return item 
```

但我想要类似的东西

```
def page_parser(self, response):
    sites = hxs.select('//div[@class="row"]')
    items = []
    request =  Request("http://www.example.com/lin1.cpp",  callback =self.parseDescription1)
    request.meta['item'] = item

    request =  Request("http://www.example.com/lin1.cpp",  callback =self.parseDescription2)
    request.meta['item'] = item

    request =  Request("http://www.example.com/lin1.cpp",  callback =self.parseDescription2)
    request.meta['item'] = item

    return request 

def parseDescription1(self,response):
    item = response.meta['item']
    item['desc1'] = "test"
    return item

def parseDescription2(self,response):
    item = response.meta['item']
    item['desc2'] = "test2"
    return item

def parseDescription3(self,response):
    item = response.meta['item']
    item['desc3'] = "test3"
    return item 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-17T09:51:04.160

没问题。以下是您的代码的正确版本：

```
def page_parser(self, response):
      sites = hxs.select('//div[@class="row"]')
      items = []

      request = Request("http://www.example.com/lin1.cpp", callback=self.parseDescription1)
      request.meta['item'] = item
      yield request

      request = Request("http://www.example.com/lin1.cpp", callback=self.parseDescription2, meta={'item': item})
      yield request

      yield Request("http://www.example.com/lin1.cpp", callback=self.parseDescription3, meta={'item': item})

def parseDescription1(self,response):
            item = response.meta['item']
            item['desc1'] = "test"
            return item

def parseDescription2(self,response):
            item = response.meta['item']
            item['desc2'] = "test2"
            return item

def parseDescription3(self,response):
            item = response.meta['item']
            item['desc3'] = "test3"
            return item 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-23T19:22:44.913

In order to guarantee an ordering of the requests/callbacks and that only one item is ultimately returned you need to chain your requests using a form like:

```
 def page_parser(self, response):
        sites = hxs.select('//div[@class="row"]')
        items = []

        request = Request("http://www.example.com/lin1.cpp", callback=self.parseDescription1)
        request.meta['item'] = Item()
        return [request]

  def parseDescription1(self,response):
        item = response.meta['item']
        item['desc1'] = "test"
        return [Request("http://www.example.com/lin2.cpp", callback=self.parseDescription2, meta={'item': item})]

  def parseDescription2(self,response):
        item = response.meta['item']
        item['desc2'] = "test2"
        return [Request("http://www.example.com/lin3.cpp", callback=self.parseDescription3, meta={'item': item})]

  def parseDescription3(self,response):
        item = response.meta['item']
        item['desc3'] = "test3"
        return [item] 
```

Each callback function returns an iterable of items or requests, requests are scheduled and items are run through your item pipeline.

If you return an item from each of the callbacks, you'll end up with 4 items in various states of completeness in your pipeline, but if you return the next request, then you can guaruntee the order of requests and that you will have exactly one item at the end of execution.

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-08-29T15:16:55.527

接受的答案总共返回三个项目 [其中 desc(i) 设置为 i=1,2,3]。

如果您想退回单个项目，Dave McLain 的项目确实可以工作，但是它需要`parseDescription1`、`parseDescription2`和`parseDescription3`才能成功并在没有错误的情况下运行才能退回项目。

对于我的用例，一些子请求可能会随机返回 HTTP 403/404 错误，因此我丢失了一些项目，即使我可以部分刮掉它们。

* * *

## 解决方法

因此，我目前采用以下解决方法：不是只在`request.meta`dict 中传递项目，而是传递一个知道接下来要调用什么请求的*调用堆栈。*它将调用堆栈上的下一个项目（只要它不为空），如果堆栈为空，则返回该项目。

request 参数用于在`errback`出错时返回调度程序方法，并简单地继续下一个堆栈项。

```
def callnext(self, response):
    ''' Call next target for the item loader, or yields it if completed. '''

    # Get the meta object from the request, as the response
    # does not contain it.
    meta = response.request.meta

    # Items remaining in the stack? Execute them
    if len(meta['callstack']) > 0:
        target = meta['callstack'].pop(0)
        yield Request(target['url'], meta=meta, callback=target['callback'], errback=self.callnext)
    else:
        yield meta['loader'].load_item()

def parseDescription1(self, response):

    # Recover item(loader)
    l = response.meta['loader']

    # Use just as before
    l.add_css(...)

    # Build the call stack
    callstack = [
        {'url': "http://www.example.com/lin2.cpp",
        'callback': self.parseDescription2 },
        {'url': "http://www.example.com/lin3.cpp",
        'callback': self.parseDescription3 }
    ]

    return self.callnext(response)

def parseDescription2(self, response):

    # Recover item(loader)
    l = response.meta['loader']

    # Use just as before
    l.add_css(...)

    return self.callnext(response)

def parseDescription3(self, response):

    # ...

    return self.callnext(response) 
```

* * *

## 警告

此解决方案仍然是同步的，如果回调中有任何异常，仍然会失败。

有关更多信息，[请查看我写的关于该解决方案的博客文章](http://oliverguenther.de/2014/08/almost-asynchronous-requests-for-single-item-processing-in-scrapy/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-14T09:57:27.170

提供的所有答案都各有利弊。我只是添加了一个额外的，以演示由于代码库（Python 和 Scrapy）**的变化而如何简化它。**我们不再需要使用`meta`而是可以使用`cb_kwargs`（即传递给回调函数的关键字参数）。

所以不要这样做：

```
def page_parser(self, response):
    sites = hxs.select('//div[@class="row"]')
    items = []

    request = Request("http://www.example.com/lin1.cpp",
                      callback=self.parseDescription1)
    request.meta['item'] = Item()
    return [request]

def parseDescription1(self,response):
    item = response.meta['item']
    item['desc1'] = "test"
    return [Request("http://www.example.com/lin2.cpp",
                    callback=self.parseDescription2, meta={'item': item})]
... 
```

我们做得到：

```
def page_parser(self, response):
    sites = hxs.select('//div[@class="row"]')
    items = []

    yield response.follow("http://www.example.com/lin1.cpp",
                          callback=self.parseDescription1,
                          cb_kwargs={"item": item()})

def parseDescription1(self,response, item):
    item['desc1'] = "More data from this new response"
    yield response.follow("http://www.example.com/lin2.cpp",
                          callback=self.parseDescription2,
                          cb_kwargs={'item': item})
... 
```

如果由于某种原因您有多个要使用相同功能处理的链接，我们可以交换

```
yield response.follow(a_single_url,
                      callback=some_function,
                      cb_kwargs={"data": to_pass_to_callback}) 
```

和

```
yield from response.follow_all([many, urls, to, parse],
                               callback=some_function,
                               cb_kwargs={"data": to_pass_to_callback}) 
```

# asp.net - 如何允许用户只输入 0 或 1？

> ID：13910358
> 
> 赞同：0
> 
> 时间：2012-12-17T08:04:03.287
> 
> 标签：asp.net

如何允许用户在文本框中仅输入 0 或 1。我使用的是 C#.net。文本框的最大长度为 1。我想在正则表达式中添加验证表达式。我不想使用 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:05:56.660

如果不使用 JavaScript，您无法在文本框中实现此目的。ASP.NET 是一种服务器端语言，这意味着它只适用于客户端-服务器关系的服务器端。JavaScript 是一种客户端语言，这意味着它直接在用户的浏览器中运行并在用户正在查看的实际页面上运行。

虽然您可以编写 JS 来实际阻止用户在框中输入任何非“0”或“1”的内容，但这会激怒您的用户。您还可以编写客户端和服务器端代码来验证输入并引发错误。

还有一种更好的方法，它不使用 JS 来满足您的需求：使用复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:36:24.013

我通过以下方式理解这个问题：

您不想仅使用 javascript 来防止用户输入 0 或 1 以外的内容，而是可以在客户端和服务器端使用 的**验证器。**

我会使用[`RangeValidator`](http://msdn.microsoft.com/en-us/library/f70d09xt%28v=vs.100%29.aspx)with`Type="Integer"`和适当的`MinimumValue`and`MaximumValue` 来代替。

```
<asp:RangeValidator id="Range1"
           ControlToValidate="TextBox1"
           MinimumValue="0"
           MaximumValue="1"
           Type="Integer"
           EnableClientScript="false"
           Text="The value must be from 0 to 1!"
           runat="server"/> 
```

**注意**：如果输入控件为空，则不调用验证函数并且验证成功。使用`RequiredFieldValidator`控件来防止用户跳过输入控件。

正如其他人所提到的， a`CheckBox`可能更适合此任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:12:42.987

我同意在这种情况下，复选框最适合这项工作。如果您想使用文本框，可能为了将来的可扩展性，那么使用 javascript 是最合适的。如果您绝对必须在 C# 中执行此操作，您可以使用以下内容，但请考虑为此使用 javascript，因为这样会快得多。

```
int value;
bool isValidNumber = (Int32.TryParse(myTextBox.Text, out value) && (value == 0 || value == 1)); 
```

# java - 在两个 Web 应用程序之间共享请求对象

> ID：13910361
> 
> 赞同：-2
> 
> 时间：2012-12-17T08:04:12.780
> 
> 标签：java, tomcat, cross-domain, wurfl

我有两个 Web 应用程序，`WebA`并且`WebB`，部署在不同的 tomcat 上。我想将请求对象从 发送`WebA`到`WebB`。我曾`wurfl`在 WebB 应用程序中用于获取有关浏览器和操作系统等或其他工作的信息。
在 WebA 应用程序上，我想以图形方式显示该数据（就像分析一样）。因此，为此我必须将请求对象传递给 WEBB 应用程序。请建议任何方法以使用相同的会话将请求对象从 WebA 传递到 WebB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:16:50.047

您需要的是一个代理，将所有内容从 webA 传递到 webB。请求对象包含：请求参数、http headers、cookies。您可以尝试自己编写一个简单的代理（在 HttpClient 的帮助下）打开与 webB 的连接并设置所有必要的数据。

# autoit - 如何在 autoit 中读取 Test.csv 文件格式

> ID：13910363
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:04:23.667
> 
> 标签：autoit

我有 test.csv 文件需要使用 autoit 读取所有数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:53:23.483

正如 TeamKiller 所说，您的问题非常模糊，但这里有一个示例代码，可以让您了解如何读取 CSV 文件。

```
#include <GUIConstants.au3>
#include <Array.au3>
#include <File.au3>
#include <String.au3>

Opt("MustDeclareVars", 1)

Global Const $CSVFILE = "C:\Temp\test.csv"
Global Const $DELIM = ";" ;the delimiter in the CSV file
Global $i, $arrContent, $arrLine, $res = 0

$res = _FileReadToArray($CSVFILE, $arrContent)
If $res = 1 Then
    For $i = 1 To $arrContent[0]
        $arrLine = StringSplit($arrContent[$i], $DELIM)
        If IsArray($arrLine) And $arrLine[0]<>0 Then
            _ArrayDisplay($arrLine)
            ; do something with the elements of the line
        Else
            MsgBox(48, "", "Error splitting line!")        
        EndIf
    Next 
Else
    MsgBox(48, "", "Error opening file!")
EndIf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T21:05:49.423

_ParseCSV() 的返回值是二维数组，如

```
$array[1][1] first line first data
$array[1][2] first line second data
$array[3][5] 3rd line 5th data

$array[0][0] gives number of lines
$array[0][1] gives number of data in each line 
```

不需要包含

参数：

1.  文件名
2.  分界线
3.  无法打开文件时显示消息
4.  逻辑真/假跳过文件的第一行

;_ParseCSV("文件名",",","发生错误时的消息",true)

```
Func _ParseCSV($f,$Dchar,$error,$skip)

  Local $array[500][500]
  Local $line = ""

  $i = 0
  $file = FileOpen($f,0)
  If $file = -1 Then
    MsgBox(0, "Error", $error)
    Return False
   EndIf

  ;skip 1st line
  If $skip Then $line = FileReadLine($file)

  While 1
       $i = $i + 1
       Local $line = FileReadLine($file)
       If @error = -1 Then ExitLoop
       $row_array = StringSplit($line,$Dchar)
        If $i == 1 Then $row_size = UBound($row_array) 
        If $row_size <> UBound($row_array) Then  MsgBox(0, "Error", "Row: " & $i & " has different size ")
        $row_size = UBound($row_array)
        $array = _arrayAdd_2d($array,$i,$row_array,$row_size)

   WEnd
  FileClose($file)
  $array[0][0] = $i-1 ;stores number of lines
   $array[0][1] = $row_size -1  ; stores number of data in a row (data corresponding to index 0 is the number of data in a row actually that's way the -1)
   Return $array

EndFunc
Func _arrayAdd_2d($array,$inwhich,$row_array,$row_size)
    For $i=1 To $row_size -1 Step 1
        $array[$inwhich][$i] = $row_array[$i]
  Next
  Return $array
   EndFunc 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-03-12T08:25:23.190

至于解析 CSV 文件，您可能最好使用库（在 AutoIt 中称为用户定义函数），特别是如果您有带有引号字符串（“单元格”/字符串内的逗号）或换行符的复杂 CSV，很难处理。

我可以推荐的最好的是[CSVSplit](https://www.autoitscript.com/forum/topic/155748-csvsplit/)。基本上你有一个函数`_CSVSplit`，它接受一个完整的 CSV 文件（内容，即字符串！）并返回一个二维数组：

```
Local $sCSV = FileRead($sFilePath)
If @error Then ; ....

$aSplitArray = _CSVSplit($sCSV, ",") 
```

然后你可以用这个数组做你想做的一切。显然，*CSVSplit*还提供了“反向”功能，可以将数组再次转为 CSV 字符串，`_ArrayToCSV`.

* * *

最初作为[答案发布在这里](https://stackoverflow.com/a/55115872/5008962)，我认为这是这个问题的副本。

# codeigniter - Codeigniter 中的重定向、POST 和 Flashdata 问题

> ID：13910367
> 
> 赞同：0
> 
> 时间：2012-12-17T08:04:33.450
> 
> 标签：codeigniter, validation, message

我正在开发一个需要一些建议的应用程序。这是问题的详细信息。

```
public function form()
{
    $this->load->helper('inflector');
    $id =   $this->uri->segment(3,0); 

    if($data = $this->input->post()){
        $result =   $this->form_validation->run();
        if($result){
            if($id > 0){
              // here update code
            }else{
                $this->mymodel->insert($data);
                $this->session->set_flashdata('message','The page has been added successfully.');
                $this->redirect =   "mycontroller/index";
                $this->view     =   FALSE;
            }
        }else{
            //$this->call_post($data);
            $this->session->set_flashdata('message','The Red fields are required');
            $this->view     =   FALSE;
            $this->redirect =   "mycontroller/form/$id";
        }
    }else{

        $row    =   $this->mymodel->fetch_row($id);
        $this->data[]=  $row;
    }
}

public function _remap($method, $parameters)
{
    if (method_exists($this, $method))
    {
        $return =   call_user_func_array(array($this, $method),$parameters);
    }else{
        show_404();
    }

    if(strlen($this->view) > 0)
    {
        $this->template->build('default',array());

    }else{
        redirect($this->redirect);
    }   
} 
```

在这里，您可以看到我如何尝试在验证失败时重新加载页面。现在的问题是我必须在视图表单上显示闪存数据，该数据仅在重定向后可用，并且我需要显示由于 post 变量丢失而在重定向时未显示的验证错误。如果我不使用重定向，则无法显示 flashdata，而只能显示验证错误。我希望将这两种功能结合在一起。我什至尝试过像这样再次创建 POST

```
public function call_post($data)
{
    foreach($data as $key => $row){
        $_POST[$key]    =   $row;
    }   
} 
```

我在表单方法中注释掉了。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:54:55.923

这是一个想法。

我认为您可以将验证错误消息添加到闪存数据中。像这样的东西应该工作：

> $this->session->set_flashdata('validation_error_messages',validation_errors());

注意对validation_errors 函数的调用。这有点不合常规，但我认为它应该有效。只需确保代码在语句之后执行，`$this->form_validation->run();`以确保表单验证库生成验证错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:29:04.850

好吧，我几乎没有什么不同的方法，希望对您有所帮助

```
 mycontroller extend CI_Controller{

      function _remap($method,$params){
         switch($method){
            case 'form':
                   $this->form($params);
            break;
            default:
                    $this->index();
            break;
         }
      }

      function form(){
          $this->load->helper('inflector');
          $id =   $this->uri->segment(3,0); 

          $this->form_validation->set_rules('name','Named','required|trim');
          $this->form_validation->set_rules('email','email','required|valid_email|trim');

          // if validation fails and also for first time form called
          if(!$this->form_validation->run()){
                   $this->template->build('default',array());
           }
           else{ // validation passed
               $this->save($id)
           }

      }

       function save($id = 0){
           $data = $this->input->post();
          if($id == 0){
            $this->mymodel->insert($data);
            $this->session->set_flashdata('message','The page has been added successfully.');
            $this->redirect =   "mycontroller/index";
            $this->view     =   FALSE;
        }else{
            // update the field
            $this->session->set_flashdata('message','The Red fields are required');
        }

        redirect("mycontroller/index");

       }

   } 
```

你的表单/默认视图应该是这样的

```
<?
    if(validation_errors())
      echo validation_errors();
    elseif($this->session->flashdata('message'))
       echo $this->session->flashdata('message'); 

    echo form_open(uri_string());// post data to same url
    echo form_input('name',set_value('name'));
     echo form_input('email',set_value('email'));
     echo form_submit('submit');
     echo form_close(); 
```

如果您在此处发布任何问题，请尝试一下。

# ios - 验证阿拉伯语的名字和姓氏

> ID：13910368
> 
> 赞同：1
> 
> 时间：2012-12-17T08:04:38.573
> 
> 标签：ios, ios4, uitextfield, multilingual

在我的应用程序中，A 支持阿拉伯语。对于注册，我们有名字、姓氏、电子邮件 ID 和密码。

我正在验证名字和姓氏，如下所示

```
-(BOOL)isValidDisplayName {
    NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLKMNOPQRSTUVWXYZ"] invertedSet];

    if ([self rangeOfCharacterFromSet:set].location != NSNotFound) {

        return NO;
    }

    if ([self length] < 3) {

        return NO;
    }
    return YES;
}

-(BOOL)isValidLastName {
    NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLKMNOPQRSTUVWXYZ"] invertedSet];

    if ([self rangeOfCharacterFromSet:set].location != NSNotFound) {

        return NO;
    }

    if ([self length] < 1) {

        return NO;
    }
    return YES;
} 
```

上述验证适用于英语。那么我应该如何验证名字和姓氏的阿拉伯语输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:09:00.207

如果您想检查这两个字段是否仅包含字母字符，那么可能要测试的是反转[`[NSCharacterSet letterCharacterSet]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html#//apple_ref/occ/clm/NSCharacterSet/letterCharacterSet)而不是您自己的字母字符集硬编码，但仅限于英文字母。

# c# - C#在两个图像之间的变化像素上绘制

> ID：13910371
> 
> 赞同：0
> 
> 时间：2012-12-17T08:04:50.477
> 
> 标签：c#

例如，我有图 1 和图 2，它们的尺寸相同，只是图 2 在左上角有一个正方形。如何比较两张图片获取颜色已更改的每个像素的位置，然后绘制到每个像素？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:18:43.740

我最近一直在玩图像，这就是我一直在做的事情：

```
using System.Drawing;
using System.Drawing.Imaging;

// Open your two pictures as Bitmaps
Bitmap im1 = (Bitmap)Bitmap.FromFile("file1.bmp");
Bitmap im2 = (Bitmap)Bitmap.FromFile("file2.bmp");

// Assuming they're the same size, loop through all the pixels
for (int y = 0; y < im1.Height; y++)
{
    for (int x = 0; x < im1.Width; x++)
    {
        // Get the color of the current pixel in each bitmap
        Color color1 = im1.GetPixel(x, y);
        Color color2 = im2.GetPixel(x, y);

        // Check if they're the same
        if (color1 != color2)
        {
            // If not, generate a color...
            Color myRed = Color.FromArgb(255, 0, 0);
            // .. and set the pixel in one of the bitmaps
            im1.SetPixel(x, y, myRed);
        }
    }
}
// Save the updated bitmap to a new file
im1.Save("newfile.bmp", ImageFormat.Bmp); 
```

这可能不是你想要做的，但希望能给你一些关于如何开始的想法。

# html - 在平板电脑上运行的基于 Web 的应用程序的好例子？

> ID：13910376
> 
> 赞同：0
> 
> 时间：2012-12-17T08:05:22.053
> 
> 标签：html, layout, mobile

有谁知道任何基于 Web 的应用程序的好例子，这些应用程序使用一种在普通浏览器和平板电脑上都运行良好的布局/代码库？我所知道的最好的与移动设备兼容的 Web 应用程序（app.ft.com、google-services）在从移动设备访问它时会切换到完全不同的代码库。

我们正在开发基于 Web 的应用程序，但希望避免构建移动版本（尽可能），而是专注于使普通 Web 应用程序尽可能与移动设备兼容，以保持代码库简单的。

我正在寻找适用于两个世界的导航和结构的良好示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:09:50.910

我只是建议使用[jQuery Mobile](http://jquerymobile.com/)，它还支持包括 Internet Explorer 7 在内的 Web 浏览器。

我最近使用一个在桌面浏览器和手机上运行的代码库构建了一个 Web 应用程序，还使用[​​PhoneGap Build](https://build.phonegap.com/)构建了适用于 Android 和 iOS 的可安装应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:34:22.093

查看[bootstrap](http://twitter.github.com/bootstrap/)这是一个 HTML 5 框架，它结合了响应式设计，以确保任何使用它的网站在所有设备上看起来都很棒。

# linux - 如何修复错误：-march= 开关和 -mtune= 开关的错误值（本机）？

> ID：13910385
> 
> 赞同：3
> 
> 时间：2012-12-17T08:06:10.120
> 
> 标签：linux, gcc, compiler-errors, makefile, cmake

我正在编译这里提供的库：[http](http://www.robots.ox.ac.uk/~vgg/software/fastann/) ://www.robots.ox.ac.uk/~vgg/software/fastann/ ，但是

```
bash-3.2$ PREFIX=/usr/local/ cmake . && make                                    
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
 -Wall -O2 -g3 -msse2 -march=native -fno-exceptions -fno-rtti
--- Prefix = /usr/local/
-- Configuring done
-- Generating done
-- Build files have been written to: /path/to/dir
[ 14%] Building CXX object CMakeFiles/fastann.dir/dist_l2.cpp.o
/path/to/dir/dist_l2.cpp:1: error: bad value (native) for -march= switch
/path/to/dir/dist_l2.cpp:1: error: bad value (native) for -mtune= switch
make[2]: *** [CMakeFiles/fastann.dir/dist_l2.cpp.o] Error 1
make[1]: *** [CMakeFiles/fastann.dir/all] Error 2
make: *** [all] Error 2
bash-3.2$ 
```

这只是提供的说明中的第一步，我不知道下一步该往哪里看。有人可以告诉我这个错误到底是什么，以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:32:52.137

切换到使用`gcc`等于或大于 4.2 的版本。

`gcc`的 4.2 版本引入了`native`行军。

* * *

利用

```
gcc --version 
```

获取`gcc`的版本信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T10:07:43.667

> 如何修复错误：-march= 开关和 -mtune= 开关的错误值（本机）？

问题出在`-march=nartive`. 根据[GCC 邮件列表中的](https://gcc.gnu.org/ml/gcc-help/2007-08/msg00244.html)Ian Lance Taylor 的说法（Ian 是 GCC 开发人员之一）：

> 问题是驱动程序代码不工作，错误是 gcc 不能`-march=native`正确处理 [ ]。gcc 中有一些代码可以处理驱动程序代码失败，它适用于`-mtune=native`，但不适用于`-march=native`.
> 
> 驱动程序代码应该更改为`-march=native`适用 `-march=XXX`于您的 CPU。代码在 `gcc/config/i386/driver-i386.c`.

所以解决方法是避免使用`-march=native`; 并使用 (1)`-m32`或`-m64`，或 (2) use `-march=cpu-type`，其中`cpu-type`是GCC 手册的[3.17.15 Intel 386 和 AMD x86-64 选项中列出的选项之一。](https://gcc.gnu.org/onlinedocs/gcc-4.8.2/gcc/i386-and-x86-64-Options.html)该列表很广泛，包括`pentium`、和。`pentium2``pentium3``pentium4`

# visual-studio-2010 - Test iteration setting in loadtest using vs 2010

> ID：13910389
> 
> 赞同：2
> 
> 时间：2012-12-17T08:06:35.033
> 
> 标签：visual-studio-2010, settings, load-testing

I wanted to test my application for 250 concurrent users, I have some doubts about the load test setting.

What should be the correct setting to achieve the above...

1.  I have set the Max user count as 250 and test iteration in run setting as 1, So will it send 250 virtual request ???

    or

2.  I have to set the Max user count as 250 and test iteration in run setting as 250

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T14:10:08.127

Here are some explanations about load test settings:

1.  In the `Constant Load Pattern` you set how the load test will create your virtual users.
    *   If you Set `Pattern = Constant` then visual studio will create 250 virtual users without meaning that you need them. So if you have 250 users and only 10 `Tests Iterations`, only 10 users will send a request
    *   If you set `Pattern = Step` you set an initial number of virtual users and they are increased at each test iteration by the `Step User Count`. Again, you may create more users form those you will actually need.
2.  In the `Run Settings` there are 2 basic settings you should focus:
    *   The `Test Iterations`, which describes the total number of requests (tests) that will be executed from all the virtual users. So, if you set this value 500 and you have a Constant Pattern of 250 virtual users, then each user will send 2 requests. Perhaps some will send 3 and some others 1, but the total tests (requests) will be 500.
    *   The `Use Test Iterations` setting which describes whether the test should be executed according to the `Test Iterations` settings (previous scenario) or according to the `Run Duration` setting. If you set this property to `false`, then all virtual users will try to execute as many requests/test as they can in the `Test Duration` time.

So, answering to your questions:

> I have set the Max user count as 250 and test iteration in run setting as 1, So will it send 250 virtual request ???

No, it will send only one request. Set the `Test Iterations` = 250 if you want 250 total tests .

> I have to set the Max user count as 250 and test iteration in run setting as 250

This will send 250 total tests but it doesn't mean that they will be concurrent. The 250 virtual user will not created at once, it depends of their initial number. So, if you want 250 concurrent tests you must set the Pattern = Constant.

# android - Android GridLayout 行索引

> ID：13910395
> 
> 赞同：3
> 
> 时间：2012-12-17T08:07:11.137
> 
> 标签：android, checkbox, toast, grid-layout

我有一个设计布局，如下面的代码，我想为每个复选框编写一个代码，以便在选中时向我显示所选行的索引，但我不知道如何从我的网格布局中动态获取此属性，而不是通过在 Toast.makeText() 中手动键入索引。如果您在这个问题上帮助我，我将不胜感激。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:columnCount="5"
  android:rowCount="4" 
  android:orientation="horizontal" 
  android:background="#FF1354"
  android:id="@+id/Grd">
  <TextView android:text=" R 1, C 1 " 
       android:background="@drawable/border" />

  <TextView 
      android:text=" R 1, C 2 "
       android:background="@drawable/border"/>

  <TextView android:text=" R 1, C 3 "
       android:background="@drawable/border" />

  <TextView android:text=" R 1, C 4 "
      android:background="@drawable/border" />

  <CheckBox 
      android:id="@+id/chk1"
      android:text=""
     style="?android:attr/starStyle"  />

  <TextView android:text=" R 2, C 1 "
      android:background="@drawable/border" />

  <TextView android:text=" R 2, C 2 "
      android:background="@drawable/border" />

  <TextView android:text=" R 2, C 3 "
      android:background="@drawable/border" />

  <TextView android:text=" R 2, C 4 "
       android:background="@drawable/border" />

  <CheckBox
      android:id="@+id/chk2"
       android:text=""
   style="?android:attr/starStyle"  />

  <TextView android:text=" R 3, C 1 "
       android:background="@drawable/border" />
  <TextView android:text=" R 3, C 2 "
      android:background="@drawable/border" />

  <TextView android:text=" R 3, C 3 "
       android:background="@drawable/border" />

  <TextView android:text=" R 3, C 4 " 
      android:background="@drawable/border"/>

  <CheckBox 
      android:id="@+id/chk3"
      android:text=""
       style="?android:attr/starStyle"/>

  <TextView android:text=" R 4, C 1 "
    android:background="@drawable/border" />

  <TextView android:text=" R 4, C 2 "
      android:background="@drawable/border" />

  <TextView android:text=" R 4, C 3 "
       android:background="@drawable/border" />

  <TextView android:text=" R 4, C 4 "
      android:background="@drawable/border" />

  <CheckBox 
      android:id="@+id/chk4"
      android:text=""
      style="?android:attr/starStyle" />

</GridLayout> 
```

这是我的代码：

```
package com.example.hiiiiiiiiiiiiii;

import com.example.mynewtestoftablecheck.MyNewTestTableCheck;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.CheckBox;
import android.widget.GridLayout;
import android.widget.GridView;
import android.widget.Toast;

public class Hiiiiiiiiiiiiiiiiiiiiiiii extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hiiiiiiiiiiiiiiiiiiiiiiii);

      CheckBox chk1=(CheckBox)findViewById(R.id.chk1);
      chk1.setOnClickListener(new View.OnClickListener() {
          GridLayout Grd=(GridLayout)findViewById(R.id.Grd);

        @Override
        public void onClick(View arg0) {
            {
                if (((CheckBox) arg0).isChecked()) {
                    Toast.makeText(Hiiiiiiiiiiiiiiiiiiiiiiii.this,
                               "1st Row checked", Toast.LENGTH_LONG).show();
                }
                else
                {
                    Toast.makeText(Hiiiiiiiiiiiiiiiiiiiiiiii.this,
                            "1st Row Unchecked", Toast.LENGTH_LONG).show();
        }
                }

            }
        });

      CheckBox chk2=(CheckBox)findViewById(R.id.chk2);
      CheckBox chk3=(CheckBox)findViewById(R.id.chk3);
      CheckBox chk4=(CheckBox)findViewById(R.id.chk4);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_hiiiiiiiiiiiiiiiiiiiiiiii, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:15:29.773

网格.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:columnCount="5"
  android:rowCount="4" 
  android:orientation="horizontal" 
  android:background="#FF1354"
  android:id="@+id/Grd">
</GridLayout> 
```

单独 item_grid.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

  <TextView android:text=" R 1, C 1 " 
       android:background="@drawable/border" />

  <TextView 
      android:text=" R 1, C 2 "
       android:background="@drawable/border"/>

  <TextView android:text=" R 1, C 3 "
       android:background="@drawable/border" />

  <TextView android:text=" R 1, C 4 "
      android:background="@drawable/border" />

  <CheckBox 
      android:id="@+id/chk1"
      android:text=""
     style="?android:attr/starStyle"  />

</LinearLayout> 
```

接下来是自定义 grig 适配器

```
public class GridviewAdapter extends BaseAdapter {

    private Activity activity;
    ArrayList<HashMap<String, String>> mapList;

    public GridviewAdapter(Activity activity,
            ArrayList<HashMap<String, String>> mapList_) {
        super();
        this.mapList = mapList_;
        this.activity = activity;

    }

    public int getCount() {
        // TODO Auto-generated method stub
        return mapList.size();
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public static class ViewHolder {
        public ImageView imgViewFlag;
        public TextView txtViewTitle;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder view;
        LayoutInflater inflator = activity.getLayoutInflater();

        if (convertView == null) {
            view = new ViewHolder();
            convertView = inflator.inflate(R.layout.item_grid, null);

            view.txtViewTitle = (TextView) convertView
                    .findViewById(R.id.myImageViewText);

            convertView.setTag(view);
        } else {
            view = (ViewHolder) convertView.getTag();
        }

        view.txtViewTitle.setText("NAME");

        return convertView;
    } 
```

在你的活动中

```
adapter = new GridviewAdapter(this, mapList);
        // Set custom adapter to gridview
        gridView = (GridView) findViewById(R.id.gvMain);
        gridView.setNumColumns(GridviewAdapter.rowCount);
        gridView.setAdapter(adapter);

        gridView.setSelector(android.R.color.transparent);
        // gridView.setColumnWidth(GridviewAdapter.returnDisplayMetrics(this));

        gridView.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

            }
        }); 
```

# android - android我如何在POST请求中发送带有1key的数组

> ID：13910406
> 
> 赞同：1
> 
> 时间：2012-12-17T08:08:12.100
> 
> 标签：android, arrays, post

您好，我是 android 新手，我正在尝试仅使用 1 个键（将被称为项目）将字符串数组（包含剧集标题）发送到服务器，我尝试使用

```
nameValuePairs.add(new BasicNameValuePair("items", "EpTitle1")); 
```

但是对于 1 个值字符串而不是字符串数组只需要 1 个键，我希望该值是数组，我发现[使用 POST android 发送 php 数组](https://stackoverflow.com/questions/9117532/sending-php-array-with-post-android)，但在他的示例中是 b.toString(); 只发送 className 而不是我的数组。任何提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:15:04.467

只是一个疯狂的猜测：这是否有效（假设 arrayOfValues 是一个包含您的项目的字符串数组）？

```
for(String value: arrayOfValues){
    nameValuePairs.add(new BasicNameValuePair("items[]",value));
} 
```

这是您将 HTML 中的数据数组发送到 PHP 服务器的方式。

# c++ - (void*)& 是什么意思

> ID：13910408
> 
> 赞同：1
> 
> 时间：2012-12-17T08:08:22.180
> 
> 标签：c++, pointers

我有一段代码说

```
clock.start();
for (unordered_map <uint32_t,HostTraffic>::iterator internalIPItr = hostTraffic.begin();
     internalIPItr != hostTraffic.end();
     ++internalIPItr)
  {
     if (!pgBulkInserter.insert(NULL, internalIPItr -> first,
                                internalIPItr -> second.inboundFlows,
                                (void*)&(internalIPItr -> second.outboundPortIPs),
                                internalIPItr -> second.roles)) {
        return -1;
     }
     clock.incrementOperations();
  } 
```

我的问题是我不明白

```
(void*)&(internalIPItr -> second.outboundPortIPs). 
```

你可以认为`for(....)`是

```
for (int internalItr = beginning -> end) 
```

其中 的 类型`internalItr`是`unordered_map`并`internalItr->second`给出 的实例`HostTraffic`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:10:31.713

`internalIPItr->second.outboundPortIPs`由给出的指向 的地址的指针`&`被转换为`void*`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:09:51.713

您正在传递一个指向`internalIPItr->second.outboundPortIPs`一个函数的指针，该函数需要`void*`.

接受的`&`地址`internalIPItr->second.outboundPortIPs`（即给你一个指向它的指针）。 `(void*)`将该指针转换为`void`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:12:15.567

`internalPltr`是一个指向结构的指针，它有一个名为的成员`second`，它有一个名为`outboundPortIPs`. `&`(addressof) 运算符返回其内存地址，然后将该`(void *)`地址强制转换（执行显式类型转换）为 void 指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T08:15:02.250

已经回答的是它的作用（返回 a `void*`）

但是你应该预先警告这种类型的转换称为“类型双关语”，它被认为是未定义的行为。（虽然，它适用于我所知道的所有编译器，并设置或取消设置了适当的编译选项。）

# android - 如何修复我的应用程序的 android 源代码中的错误？

> ID：13910411
> 
> 赞同：0
> 
> 时间：2012-12-17T08:08:40.877
> 
> 标签：android, apache-httpclient-4.x

我有一个疯狂的问题。我有一个 IIS7，我需要通过 POST 发布公式，还需要通过 NTLM 进行身份验证，所有这些东西都需要通过 SSL 连接。到目前为止，我设法将它连接到服务器并发布我的数据。

在 POST 之后，我将获得成功的 302 响应，它将我重定向到第二页。DefaultHttpClient 连接到网络服务器进行身份验证并发布数据。到目前为止一切正常。但是现在客户端关闭了连接并打开了第二个连接（这种行为对我来说很重要）但这不是我的问题。在第二个连接上，客户端忘记了如何在 IIS 上进行身份验证，并因 401 身份验证错误而中断。

到目前为止，我可以看到这是[DefaultHttpClient 源中的](https://issues.apache.org/jira/browse/HTTPCLIENT-1224?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)一个固定错误，但 Android 似乎使用了这个库的旧版本。如何修复似乎存在于世界上每台安卓设备上的错误？

以下是我通讯的相关部分：

```
POST /login/ HTTP/1.1
Content-Length: 21
Content-Type: application/x-www-form-urlencoded
Host: example.com
Connection: Keep-Alive
Cookie: ASPSESSION...

[the post data]

HTTP/1.1 401 Unauthorized
Content-Type: text/html
Server: Microsoft-IIS/7.5
WWW-Authenticate: NTLM
Content-Length: 1344

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
...
</html>

POST /login/ HTTP/1.1
Content-Length: 21
Content-Type: application/x-www-form-urlencoded
Host: example.com
Connection: Keep-Alive
Cookie: ASPSESSION...
Authorization: NTLM ABC...==

[the post data]

HTTP/1.1 401 Unauthorized
Content-Type: text/html; charset=us-ascii
Server: Microsoft-HTTPAPI/2.0
WWW-Authenticate: NTLM ABC...DEF
Content-Length: 341

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<HTML><HEAD><TITLE>Not Authorized</TITLE>...</HTML>

POST /login/ HTTP/1.1
Content-Length: 21
Content-Type: application/x-www-form-urlencoded
Host: example.com
Connection: Keep-Alive
Cookie: ASPSESSION...
Authorization: NTLM ABC...DEF

[the post data]

HTTP/1.1 302 Moved Temporary
Cache-Control: private,no-cache
Pragma: no-cache
Content-Length: 31
Content-Type: application/json; Charset=UTF-8
Expires: Fri, 07 Dec 2012 07:01:00 GMT
Location: /login/step2.asp
Server: Microsoft-IIS/7.5
Set-Cookie: [...] path=/login/; HttpOnly;
Persistent-Auth: true

[some response] 
```

--- 现在连接是否关闭并打开第二个 https 连接 ---

```
GET /login/step2.asp HTTP/1.1
Host: example.com
Connection: Keep-Alive
Cookie: ASPSESSION...

HTTP/1.1 401 Unauthorized
Content-Type: text/html
Server: Microsoft-IIS/7.5
WWW-Authenticate: NTLM
Content-Length: 1344 
```

---然后连接再次关闭---

你知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:28:26.297

为什么不直接获取新版本的库`DefaultHttpClient`并将其包含在您的项目中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:11:13.200

好吧，这不是解决方案，只是解决我的问题，但这可能会有所帮助。我在我自己处理重定向的地方覆盖了这个`createClientRequestDirector`函数。`DefaultHttpClient`

连接关闭的原因是我使用主机名，所以我连接到 IP 而不是主机名。结果是客户端在重定向时查看是否可以通过比较源 URL 和目标 URL 来重用连接。因此，它将`https://www.example.com/`与`https://127.0.0.1/`哪个失败进行比较，并关闭连接。

我的解决方案是我自己检查这部分。如果主机名和 IP 匹配，我将返回最后使用的 IP。结果是连接可以重用，我没有在上面链接的bug中运行。

# vba - 我如何在不使用批处理文件（CMD + VBA）的情况下让这个 VBA 运行这个脚本

> ID：13910412
> 
> 赞同：0
> 
> 时间：2012-12-17T08:08:40.230
> 
> 标签：vba, excel, batch-file

我想知道如何在不使用 Excel VBA 上的批处理文件的情况下运行这一小段代码

```
 @echo off >summary.txt (
  for %%F in (*chkpackage*) do findstr /l %1 "%%F" nul||echo %%F:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A
) 
```

我只想使用 vba 或只运行 cmd 行来运行这行代码

谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:55:08.070

[从您的其他问题](https://stackoverflow.com/questions/13814994/put-batch-file-command-into-vba-excel)更改此行：

```
If fle.Name Like "*chkpackage.log" Then 
```

至：

```
If fle.Name Like "*chkpackage*" Then 
```

# java - 在 JAXB 编组中使用 BigDecimal

> ID：13910413
> 
> 赞同：12
> 
> 时间：2012-12-17T08:08:41.953
> 
> 标签：java, rest, jaxb, marshalling

我有一个带有 JAXB 字段注释的 REST Web 服务。例如，

```
@XmlAccessorType(XmlAccessType.PROPERTY)
public class MyClass{
  private BigDecimal sum;
  //+ getter and setter
} 
```

如果字段“sum”包含大值，例如1234567890.12345，则编组为1.23456789012345E9 如何编写仅编组该类的规则？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T08:19:57.403

创建适配器

```
puclic class BigDecimalAdaptor implements XmlAdapter<String, BigDecimal> 
```

并用于`(XmlAccessType.FIELD)`访问

```
@XmlJavaTypeAdapter(BigDecimalAdaptor.class)
private BigDecimal sum; 
```

和`(XmlAccessType.PROPERTY)`访问

```
@XmlJavaTypeAdapter(BigDecimalAdaptor.class)  
public getSum()
{
   return sum;
} 
```

适配器可以像

```
public class BigDecimalAdapter extends XmlAdapter<String, BigDecimal>{

    @Override
    public String marshal(BigDecimal value) throws Exception 
    {
        if (value!= null)
        {
            return value.toString();
        }
        return null;
    }

    @Override
    public BigDecimal unmarshal(String s) throws Exception 
    {
       return new BigDecimal(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:17:28.057

您编写 an`XmlAdapter<String, BigDecimal>`并用它注释 sum 的 getter `@XmlJavaTypeAdapter(BigDecimalStringAdapter.class)`：。

# ruby-on-rails-3.2 - 在activeadmin中对父菜单项进行排序

> ID：13910416
> 
> 赞同：1
> 
> 时间：2012-12-17T08:08:53.583
> 
> 标签：ruby-on-rails-3.2, activeadmin

我有一个菜单，有多个 :parent 项目。使用 :priority 我可以在下拉菜单中对项目进行排序。

如何对我的主菜单父项进行排序？我正在使用最新版本的 activeadmin

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:47:16.347

我用 hack 帮助自己，我发现：

如果将以下内容放入 config/initializers/active_admin.rb 的设置块中。

它使用第一个可显示的子菜单项的优先级来指示父项的排序优先级。

```
 class ::ActiveAdmin::Views::TabbedNavigation
    def priority_for(item)
      child_item = item.children.detect { |child| display_item?(child) }
      child_item ? child_item.priority : item.priority
    end
    private :priority_for

    # Returns an Array of items to display
    def displayable_items(items)
      items.select do |item|
        display_item? item
      end.sort { |i1, i2| priority_for(i1) <=> priority_for(i2) }
    end
  end 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-08T13:48:22.043

您可以在默认的活动管理员初始化程序中实现相同的目的，无需黑客攻击：

```
config.namespace :admin do |admin|
  admin.build_menu do |menu|
    menu.add label: "My first item", priority: 1
    menu.add label: "My second item", priority: 2
    menu.add label: "My third item", priority: 3
  end
end

# config/initializers/active_admin.rb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T15:47:41.017

在 ActiveAdmin v=0.4.4 上，这个修改后的版本对我来说是一个初始化程序：

```
class ::ActiveAdmin::Views::TabbedNavigation
  def priority_for(item)
    item.children.map(&:priority).min || item.priority
  end

  private :priority_for

  def menu_items
    menu.items.sort { |i1, i2| priority_for(i1) <=> priority_for(i2) }
  end
end 
```

# jquery - 开发多屏 Web 界面——例如 Bloomberg 终端

> ID：13910421
> 
> 赞同：9
> 
> 时间：2012-12-17T08:09:15.910
> 
> 标签：jquery, web-applications, jquery-plugins, multiscreen

我正在寻找构建一个需要多屏界面的基于 Web 的应用程序。

为了使这成为可能，我正在寻找以下内容：

1.  任何使这成为可能的前端库——例如 jQuery 插件。
2.  我应该看的任何设计模式。
3.  任何成功的基于 Web 的多屏界面的开源实现。

![在此处输入图像描述](../Images/e3d262c6c453ed4bba26ee9099a6f259.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-05T15:04:48.670

看看[https://golden-layout.com/](https://golden-layout.com/)，它内置了对弹出组件到新浏览器窗口的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-14T13:30:00.533

您应该研究 Composite 和 Decorator 模式。事实上，GoF 书籍（Design Patters、Gamma 等人）中的案例研究（Lexi 文字处理器）是高度相关的——建立 UI 元素的层次结构，这些元素可能包含也可能不包含其中的小部件集合。

案例研究为这种 UI 设计提供了一个很好的起点，并涵盖了许多您可能不会考虑的事情。

# javascript - 当子元素悬停在父元素之上时，如何为父元素和子元素分配不同的行为？

> ID：13910422
> 
> 赞同：2
> 
> 时间：2012-12-17T08:09:16.360
> 
> 标签：javascript, css, event-handling, onclick, overlays

# 长话短说

请在[此处](http://dl.dropbox.com/u/8743819/reducedtestcase/overlaysandclickevents/src/dooverlay.html)查看演示。

我有一些`div.story-in-myworks`

在每个内部`div.story-in-myworks`，有一个`div.pageimage-div-overlay`控制每个覆盖的`div.story-in-myworks`。

每个`div.pageimage-div-overlay`里面都有一个`a.btn-storysetting`负责隐藏和显示的`div.storysettings_talkbubble_left`。

`a.btn-storysetting`和都是`div.storysettings_talkbubble_left`的子元素`div.pageimage-div-overlay`。

这是一个片段：

```
<div class="img-holder story-in-myworks " rel="91" style="background: url('img/01d-0.jpg?1353745136') no-repeat; background-size: cover; border: 1px solid #DCDDDE">
            <div class="pageimage-div-overlay">
                <a class="btn-storysetting" href="#"><span></span></a>
                <div class="storysettings_talkbubble_left settings-bubble border-radius-5 hidden talkbubble-padding"> 
```

基本问题是当我点击 div.story-in-myworks 或 div.pageimage-div-overlay 时我想要不同的行为，这不会影响点击事件处理程序`a.btn-storysetting`

# 我想要完成的

1.  当光标移动到任何一个`div.story-in-myworks`时，覆盖出现在那个`div` **（完成）**
2.  当光标移动到任何一个时`div.story-in-myworks`，一个图像（`btn-storysetting12x12.png`）出现在右上角**（完成）**
3.  当左键单击 时`btn-storysetting12x12.png`，图像旁边会出现一个气泡。**（完毕）**
4.  当气泡出现时，所选内容`div.story-in-myworks`继续呈现叠加外观**（完成）**
5.  气泡出现后，然后左键单击文档中的其他任何位置，气泡关闭并`div.story-in-myworks`恢复正常，没有覆盖**（完成）**
6.  气泡出现后，光标可以离开气泡，并且气泡保持可见，并且选定的覆盖`div.story-in-myworks`仍然存在。**（完毕）**
7.  当一个气泡打开 1`div.story-in-myworks`然后光标打开`btn-storysetting12x12.png`ANOTHER`div.story-in-myworks`时，前一个气泡消失，对应的叠加层被隐藏，但当前选择的`div`现在有叠加层，气泡出现为当前选择的`div` **（完成）**
8.  在不更改前 7 种行为中的任何一种的情况下，我希望能够单击`div.story-in-myworks`导致另一种行为的行为，例如导航到另一个网页。

请注意，那些标记**（完成）**已完成。请在[此处](http://dl.dropbox.com/u/8743819/reducedtestcase/overlaysandclickevents/src/dooverlay.html)查看演示。

# 我尝试并得到的结果

我尝试做 8，但规则 2 - 7 将立即被打破。

# 我需要的

一种在不破坏其他任何东西的情况下满足所有 8 个要求的方法。

# 常见问题

1.  这是您的完整应用程序吗？

不。我做了一个简化的测试用例，我去掉了尽可能多的不必要的代码来解释我的问题，而不会影响问题陈述。

您可以通过注意到演示中对话气泡内的链接没有样式来判断。

# 披露

1.  [我在这里](http://css-tricks.com/forums/discussion/21193/how-to-assign-different-behavior-to-parent-and-child-elements-when-child-is-hovering-on-top-of-paren#Item_1)的 css-tricks.com 上交叉发布了同样的问题，以引起对我的问题的更多关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:39:33.597

下面的链接描述了如何识别点击事件的来源并相应地执行。

[关联](https://stackoverflow.com/questions/5092675/how-to-cancel-click-event-of-container-div-trigger-when-click-elements-which-ins)

这段代码似乎可以工作，虽然我还没有弄清楚为什么它在第一次加载时会触发两次。

```
$(".story-in-myworks").mouseenter(function(e){
    var currentStory = $(this);

    $(this).click(function(e){
        if ($(e.target).hasClass('pageimage-div-overlay'))
            alert('test');

        if ($(e.target).hasClass('btn-storysetting')){
            alert('test2');

        }
    });
}); 
```

# c - 什么可能导致 glEnable(GL_LIGHT0) 崩溃 glDrawElements？

> ID：13910424
> 
> 赞同：1
> 
> 时间：2012-12-17T08:09:33.047
> 
> 标签：c, opengl

我将 3 个数组指针传递给 opengl：

```
glColorPointer() 
glNormalPointer() 
glVertexPointer() 
```

一切正常，但是当我尝试通过 glEnable(GL_LIGHT0);

glDrawElements 刚刚崩溃，我认为正常有问题吗？我的正常来自这个文件：

```
1.000000 1.000000 -1.000000 0.000000 0.000000 -1.000000
1.000000 -1.000000 -1.000000 0.000000 0.000000 -1.000000
-1.000000 -1.000000 -1.000000 0.000000 0.000000 -1.000000
1.000000 0.999999 1.000000 -0.000000 0.000000 1.000000
-1.000000 1.000000 1.000000 -0.000000 0.000000 1.000000
-1.000000 -1.000000 1.000000 -0.000000 0.000000 1.000000
1.000000 1.000000 -1.000000 1.000000 -0.000001 -0.000000
1.000000 0.999999 1.000000 1.000000 -0.000001 -0.000000
0.999999 -1.000001 1.000000 1.000000 -0.000001 -0.000000
1.000000 -1.000000 -1.000000 -0.000000 -1.000000 -0.000000
0.999999 -1.000001 1.000000 -0.000000 -1.000000 -0.000000
-1.000000 -1.000000 1.000000 -0.000000 -1.000000 -0.000000
-1.000000 -1.000000 -1.000000 -1.000000 0.000000 -0.000000
-1.000000 -1.000000 1.000000 -1.000000 0.000000 -0.000000
-1.000000 1.000000 1.000000 -1.000000 0.000000 -0.000000
1.000000 0.999999 1.000000 0.000000 1.000000 0.000000
1.000000 1.000000 -1.000000 0.000000 1.000000 0.000000
-1.000000 1.000000 -1.000000 0.000000 1.000000 0.000000
-1.000000 1.000000 -1.000000 0.000000 0.000000 -1.000000
0.999999 -1.000001 1.000000 -0.000000 0.000000 1.000000
1.000000 -1.000000 -1.000000 1.000000 0.000000 0.000000
1.000000 1.000000 -1.000000 1.000000 0.000000 0.000000
0.999999 -1.000001 1.000000 1.000000 0.000000 0.000000
-1.000000 -1.000000 -1.000000 -0.000000 -1.000000 0.000000
-1.000000 1.000000 -1.000000 -1.000000 0.000000 -0.000000
-1.000000 1.000000 1.000000 0.000000 1.000000 0.000000 
```

前3个是顶点位置，后3个是正常的，我有问题：

1.  当我平移、旋转或缩放网格时，法线会发生变化吗？

2.  启用照明可能导致 glDrawElements 崩溃的原因是什么？

3.因为我的法线来自文件，并且已经规范化，我必须调用 glEnable(GL_NORMALIZE) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:27:42.903

当 glDrawElements 尝试访问您的内存时，您可能将无效参数传递给 glNormalPointer 导致访问冲突。旧的固定函数逐顶点光照代码仅在启用光照时使用法线。

关于您的其他问题：旋转网格时必须旋转法线。平移和缩放不影响法线。这是由固定功能管道（我想您正在使用）自动完成的，并且只需要在编写自定义顶点着色器或在 CPU 上旋转网格时手动完成。glEnable(GL_NORMALIZE) 仅在缩放网格时才需要，否则可以放弃此功能。

# java - Activiti 设计器安装问题

> ID：13910426
> 
> 赞同：0
> 
> 时间：2012-12-17T08:09:35.257
> 
> 标签：java, liferay, liferay-6, activiti

我正在使用 Eclipse indigo（Indigo Service Release 1）。

[当我试图通过http://activiti.org/designer/update](http://activiti.org/designer/update)安装 Activiti 插件时。

它给出了以下错误。

帮助我..提前谢谢

由于依赖项冲突，无法完成安装。正在安装的软件：Activiti Eclipse BPMN 2.0 Designer 5.10.0 (org.activiti.designer.feature.feature.group 5.10.0) 当前安装的软件：SwitchYard Editor 0.5.0.v20120713-1659-H145-Final (org.switchyard. tools.editor.feature.feature.group 0.5.0.v20120713-1659-H145-Final) 一次只能安装以下之一：Graphiti UI (Incubation) 0.8.2.v20120215-0845 (org.eclipse.graphiti .ui 0.8.2.v20120215-0845) Graphiti UI (孵化) 0.8.0.v20110606-1453 (org.eclipse.graphiti.ui 0.8.0.v20110606-1453) Graphiti UI (孵化) 0.8.1.v20110829-1438 (org.eclipse.graphiti.ui 0.8.1.v20110829-1438) Graphiti UI (Incubation) 0.9.1.v20120919-0732 (org.eclipse.graphiti.ui 0.9.1.v20120919-0732) 不能满足依赖：来自： Activiti Eclipse BPMN 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:00:28.233

您有两个 Graphiti 依赖项，或者设计者正在尝试添加其中之一：

Graphiti UI（孵化）0.8.1.v20110829-1438 Graphiti UI（孵化）0.9.1.v20120919-0732

您只能拥有两者之一，因此您应该删除其中之一。

# c++ - int 向量可以创建的最大整数项数

> ID：13910428
> 
> 赞同：2
> 
> 时间：2012-12-17T08:09:42.307
> 
> 标签：c++

我有一个整数向量

```
std::vector<int> somevec 
```

可以通过以下方式查询 int 的限制

```
std::numeric_limits<int>::min() and std::numeric_limits<int>::max() 
```

我可以创建一个大小超过 std::numeric_limits::max() 的向量，即

```
can somevec.size() > std::numeric_limits<int>::max() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T08:14:03.107

`std::vector`使用`size_type`成员进行索引，通常与`int`. 因此，使用：

```
std::numeric_limits<std::vector<int>::size_type>::max() 
```

所以理论上，是的，有`somevec.size()`可能大于`std::numeric_limits<int>::max()`.

但是，`std::vector`也有一个通常小于此数量的最大大小，您可以像这样查询它：

```
somevec.max_size(); 
```

# selenium - selenium webdriver中的迭代器

> ID：13910433
> 
> 赞同：0
> 
> 时间：2012-12-17T08:10:05.207
> 
> 标签：selenium

当我在 Google 搜索中键入“测试”时，我需要从自动下拉列表中收集所有选项。

收集后需要打印到控制台。

注意：不要按**ENTER**按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:51:16.627

看起来像家庭作业 =) 它应该是这样的：

```
 WebElement searchField = driver.findElement(By.name("q"));
    searchField.sendKeys("test");
    List<WebElement> resultList = driver.findElements(By.xpath("//div[@class='gsq_a']/table/tbody/tr/td/span"));
    for (WebElement resultItem : resultList){
        System.out.println(resultItem.getText());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T08:19:46.397

使用此代码：

```
WebElement searchField = driver.findElement(By.name("q"));

searchField.sendKeys("test");

Thread.sleep(2000);

List <WebElement> rows = driver.findElements(By.cssSelector("table[class='gssb_m'] > tbody > tr "));

for (WebElement resultItem : rows){

   System.out.println(resultItem.findElement(By.cssSelector("td > div > table > tbody > tr > td:nth-of-type(1)")).getText());

} 
```

# android - 滑动抽屉动画

> ID：13910439
> 
> 赞同：0
> 
> 时间：2012-12-17T08:10:42.633
> 
> 标签：android, animation, opacity, slidingdrawer

我需要在滑块打开时降低滑动抽屉背景的不透明度，并在关闭时增加不透明度。

尝试在滑块打开/关闭时更改背景 SlidingDrawer.OnDrawerOpenListener/SlidingDrawer.OnDrawerCloseListener ，这不是我想要的。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:58:22.267

这是一个例子，试试这个：

褪色效果与`TransitionDrawable`

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.Layout);
layout.setBackgroundResource(R.drawable.translate);
TransitionDrawable transition = (TransitionDrawable) layout.getBackground();
transition.startTransition(5000); 
```

此代码为您提供从黄色到白色（原始颜色）的褪色效果。

**翻译.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
   <transition xmlns:android="http://schemas.android.com/apk/res/android">
          <!-- The drawables used here can be solid colors, gradients, shapes, images, etc. -->
          <item android:drawable="@drawable/new_state" />
          <item android:drawable="@drawable/original_state" />
   </transition> 
```

**新状态.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape   xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
    <solid android:color="#FFFFA7"/>
</shape> 
```

**original_state.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape   xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
    <solid android:color="#FFFFFF"/>
</shape> 
```

# c++ - c ++检查变量以解决越界问题

> ID：13910440
> 
> 赞同：3
> 
> 时间：2012-12-17T08:10:42.307
> 
> 标签：c++, c, memory, certificate

我使用了一些函数，这个函数返回 LPWSTR 类型的变量 (wchar_t*)

在调试器中，我查看此变量并看到错误“0x2e（地址 0x2e 越界）”，当我对其变量进行一些操作时，我的程序终止了。

我无法更改被调用函数，我没有它的 src 代码。

我的问题是：c/c++ 语言是否具有在调用错误变量之前检查情况的功能？我尝试尝试/捕获块，但没有帮助。

请原谅我的英语并感谢您的帮助

编辑：

有错误的代码片段

```
PCERT_EXTENSION pCe = CertFindExtension(szOID_CRL_DIST_POINTS, pCertInfo->cExtension, pCertInfo->rgExtension);
    if (pCe) {
        PCRL_DIST_POINTS_INFO pCrlDistPointsInfo = NULL;
        PCRL_DIST_POINT *pCrlDistPointsPtr = NULL;
        PCRL_DIST_POINT pCrlDistPoints = NULL;
        DWORD pdwCrlDistPoints = sizeof (CRL_DIST_POINTS_INFO);

        if (!CryptDecodeObjectEx(X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,
                szOID_CRL_DIST_POINTS,
                pCe->Value.pbData,
                pCe->Value.cbData,
                CRYPT_DECODE_ALLOC_FLAG,
                (PCRYPT_DECODE_PARA) NULL,
                &pCrlDistPointsInfo,
                &pdwCrlDistPoints)) {
            printf("\n\nCannot decode CRL URL.\n\n");
        }

        if (pCrlDistPointsInfo) {

            pCrlDistPointsPtr = (PCRL_DIST_POINT*) pCrlDistPointsInfo->rgDistPoint;

            if (pCrlDistPointsPtr && pCrlDistPointsInfo->cDistPoint > 0) {

                findCDP = true;
                fwprintf(pFile, L"^^"); 
                for (int i = 0; i < pCrlDistPointsInfo->cDistPoint; i++) {

                    pCrlDistPoints = &pCrlDistPointsInfo->rgDistPoint[i];

                    if (pCrlDistPoints) {

                        LPWSTR str = (LPWSTR) pCrlDistPoints->DistPointName._empty_union_.FullName.rgAltEntry->_empty_union_.pwszURL;

                        //printf("last error= 0x%08X", GetLastError());
                        fwprintf(pFile, str);//PROGRAM TERMINATED HERE!!!
                        fwprintf(pFile, L";");

                    }
                    printf("%d\n",i);
                }

            }

            free(pCrlDistPointsInfo);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:15:10.800

不，它没有。如果您设置一个指向无效内存位置的指针，则对该位置的对象的每次访问都是未定义的行为。最有可能发生的是崩溃或某种内存损坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T08:19:36.080

如果一个指针有 value `0x0000002e`，它只能意味着两件事：

*   返回该代码的错误。如果你不能解决这个问题，你就不走运了......
*   未定义的指针值和错误原因以其他方式返回，例如通过修改引用参数。但是在我的书中返回未定义的值而不是空指针仍然算作一个错误。

另一方面，`'.'`准确地说，0x2e 听起来像 ASCII 字符，所以您确定您正在查看指针值而不是指向的字符串吗？

后期编辑：查看代码，似乎涉及工会。那么崩溃的一个可能原因是，您正在访问错误的工会成员。在 C 联合中，所有成员/字段都在相同的内存位置，它们重叠。换句话说，联合一次只能保存一个值，并且您需要以某种方式知道哪个值，例如从初始化联合值的函数文档中，或者通过一些告诉类型的额外变量（C中的常见模式是具有包含类型字段和联合字段的结构）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:24:22.877

Windows 具有检查地址是否正确的功能。但是......依赖这个是不好的做法，因为不能保证如果指针指向正确的地址，这就是你想要的地址。

windows中的函数有：IsBadReadPtr、IsBadWritePtr和IsBadCodePtr。我强烈建议只在调试代码（例如断言）中使用这些函数，并且永远不要在发布可执行文件中依赖它。

如果您的应用程序设计正确并且可以正常工作，那么您永远不应该依赖这些 Windows 功能。

# javascript - 在引导选项卡中加载谷歌地图，修复显示空白

> ID：13910443
> 
> 赞同：1
> 
> 时间：2012-12-17T08:10:58.813
> 
> 标签：javascript, jquery, google-maps, twitter-bootstrap

**更新** 我已经尝试实施 wf 的解决方案，但错误仍然存​​在。您可以在这里查看一个实时示例 --> [http://www.opohills.com/taipei-rentals/apollo_a.php](http://www.opohills.com/taipei-rentals/apollo_a.php)

向下滚动并单击“位置”选项卡

我正在尝试在引导选项卡中加载谷歌地图。我遇到了这里讨论的同样的问题，并且在 SA 上也很广泛——

[https://github.com/twitter/bootstrap/issues/2330](https://github.com/twitter/bootstrap/issues/2330)

* * *

修复方法是在单击选项卡时添加回调，以加载地图。我正在尝试实现这一点，但没有成功。错误仍然存​​在（当左上角仅显示地图的 1/8 时。）当我打开检查元素时，地图填满并且工作正常（我猜是因为检查元素正在重新读取 javascript）

下面是我的javascript，因为这是我第一次真正尝试它，我确定我做错了什么——

```
 <script type="text/javascript">

    var map,
        marker = new google.maps.Marker({
                   position: new google.maps.LatLng(25.041483, 121.553984),
                   draggable: true,
                   title: 'Opo Apartment' }),
        infoWindow = new google.maps.InfoWindow({content: 'Apollo Apartment'});

        $('#location').on('show', function(e) {
          if( map == undefined) {  

            map =    new google.maps.Map(
                     document.getElementById('map-canvas'), 
                      { zoom: 14,
                        center: new google.maps.LatLng(25.041483, 121.553984),
                        mapTypeId: google.maps.MapTypeId.ROADMAP })
          }
          marker.setMap(map);
          infoWindow.open(map, marker);
        })

  </script>​ 
```

您对此有何看法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T07:41:39.063

我对其进行了修复，但将其保存在不同的 div 中，远离选项卡，并在单击某个选项卡时显示它。你可以去同一个网站看代码

```
$(document).ready(function(){

  var map,
      marker = new google.maps.Marker({
                 position: new google.maps.LatLng(25.041483, 121.553984),
                 draggable: true,
                 title: 'Opo Apartment' }),
      infoWindow = new google.maps.InfoWindow({content: 'Apollo Apartment'});

  $('#location').on('show', function(e) {
    if( map == undefined) {  

      map =    new google.maps.Map(
               document.getElementById('map-canvas'), 
                { zoom: 14,
                  center: new google.maps.LatLng(25.041483, 121.553984),
                  mapTypeId: google.maps.MapTypeId.ROADMAP })
    }
    document.getElementById("largemap").style.display="block";

    google.maps.event.trigger(map, 'resize');
            marker.setMap(map);
    infoWindow.open(map, marker);
  })
  $('.tabclick').on('show', function(e) {
    document.getElementById("largemap").style.display="none";

  })

}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:31:12.493

你试过这样吗？

```
$('#location').on('show', function(e) {
  if( map == undefined) {  

    map =    new google.maps.Map(
             document.getElementById('map-canvas'), 
              { zoom: 14,
                center: new google.maps.LatLng(25.041483, 121.553984),
                mapTypeId: google.maps.MapTypeId.ROADMAP })
  }
  marker.setMap(map);
  infoWindow.open(map, marker);

  google.maps.event.addListenerOnce(map, "bounds_changed", function() {
    google.maps.event.trigger(map, "resize");
  });
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-25T22:00:05.640

感谢[https://github.com/twbs/bootstrap/issues/2330中的 alexxB](https://github.com/twbs/bootstrap/issues/2330)

我使用 Cake、Bootstrap 3.0 和 Jquery 1.11。首先检查 jquery 函数是否触发了任何函数以丢弃 javascript 问题，然后添加它。

```
 $('a[href="#my_id_tab_map"]').on('shown.bs.tab', function(e)
    {
        google.maps.event.trigger(map, 'resize');
    }); 
```

# java - Java 如何有效地检查 ArrayIndexOutOfBounds？

> ID：13910445
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:11:18.807
> 
> 标签：java, arrays, runtime-error, runtimeexception

Java 使用什么机制来有效地检查我尝试访问的数组元素是否越界。我认为可以做到的一种方法是在内存中的数组之前放置元数据。但是每次检查时的 if 语句在时间上是非常低效的。那么它实际上是如何做到的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:15:37.910

由于[Oracle 与 Google 之战，这是一段非常有名的代码：](http://www.highorbit.com/blog/274-oracle-vs-google-java-code-stolen-)

```
private static void rangeCheck(int arrayLen, int fromIndex, int toIndex) {
    if (fromIndex > toIndex)

        throw new IllegalArgumentException("fromIndex(" + fromIndex +
                   ") > toIndex(" + toIndex+")");

    if (fromIndex < 0)
        throw new ArrayIndexOutOfBoundsException(fromIndex);

    if (toIndex > arrayLen)
        throw new ArrayIndexOutOfBoundsException(toIndex);

} 
```

此方法在内部调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:16:27.797

如下简单检查就可以了，

```
 int[] a = new int[2];

if (a.size >= index )
 System.out.println("Item " + a[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:25:06.787

如 JVM 7 规范中所述，它似乎确实检查了每个`*aload`, etc. 指令的边界。`*astore`

> 如果 index 不在 arrayref 引用的数组的范围内，则 (*astore,*aload,etc) 指令将引发 ArrayIndexOutOfBoundsException

但它的实际完成方式是特定于实现的。

# objective-c - Ad Hoc 分发 UI 慢

> ID：13910447
> 
> 赞同：0
> 
> 时间：2012-12-17T08:11:29.543
> 
> 标签：objective-c, ios, xcode, cocoa

我在模拟器上运行我的代码，Iphone 5 与 xcode 连接得很好。当我部署到 Iphone 4s 设备时，滚动滞后，点击滞后一秒。

这些是我的部署步骤。1\. 在包括我的 iphone 4s 设备的苹果开发者网站上创建配置文件。2\. 导入 XCode 管理器 - Provision。3\. 将代码签名设置为分发。4\. 通过电子邮件分发。5\. 双击 IPA 将应用程序安装到设备上。

有什么原因导致缓慢？

# vba - 将 Excel 连接到 Access - VBA

> ID：13910450
> 
> 赞同：3
> 
> 时间：2012-12-17T08:11:55.753
> 
> 标签：vba, ado

执行以下代码时出现“未定义用户定义的类型”错误，并且

> “objCon 作为 ADODB.Connection”

在第一行突出显示。我正在尝试通过 VBA 代码设置从 Excel 到 Access 的连接。感谢您的任何建议！

```
Private objCon As ADODB.Connection
Private rstRec As ADODB.Recordset
Private strQry

Sub Connect()
   Dim strConn As String

   Set objCon = New ADODB.Connection
   objCon.Mode = adModeReadWrite

      If objCon.State = adStateClosed Then
         strConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & "C:\DB\Db.accdb;Persist Security Info=False;"
         objCon.ConnectionString = strConn
         objCon.Open
      End If
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T08:36:42.433

您可以执行以下操作之一

```
set objCon  = CreateObject("ADODB.Connection")
set rstRec = CreateObject("ADODB.Recordset") 
```

或者在 VBA Editor Tools-->Reference-->Add`Microsoft ActiveX Data Object X.Y Library`

# mysql - 提高mysql查询的准确性

> ID：13910455
> 
> 赞同：1
> 
> 时间：2012-12-17T08:12:21.147
> 
> 标签：mysql, join

有什么方法可以提高以下查询的准确性？

```
SELECT DISTINCT a.localgeo, a.foreigngeo, b.lat, b.lng, c.lat, c.lng
FROM tbl_correlateddata a
JOIN tbl_geodetail b ON a.localgeo = b.code
JOIN tbl_geodetail c ON a.foreigngeo = c.code 
```

我正在访问带有 2 个国家/地区代码的表格

```
localgeo|foreigngeo
--------------------
JP      |AD
JP      |AD
US      |HK
AD      |JP
HK      |US
AD      |JP
CN      |US 
```

并尝试用另一个表中的经度和纬度值填充它

```
code|lat|lng
------------
JP  |1  |2
US  |3  |3
HK  |1  |4
AD  |3  |4
CN  |4  |4 
```

结果看起来像这样

```
localgeo|lat|lng|foreigngeo |lat|lng|
------------------------------------
JP      |1  |2  |AD         |3  |4
US      |3  |3  |HK         |1  |4
HK      |1  |4  |US         |3  |3
AD      |3  |4  |JP         |1  |2
CN      |4  |4  |US         |3  |3 
```

但查询需要很多时间。有什么办法可以加快这个速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:27:38.647

问题是您对所有字段都使用了 distinct，而您没有这样做`()`，而且这需要很长时间。尝试仅对一列使用 distinct

像这样

```
 SELECT DISTINCT (a.localgeo), a.foreigngeo, b.lat, b.lng, c.lat, c.lng
    FROM tbl_correlateddata a 
    JOIN tbl_geodetail b 
      ON a.localgeo = b.code 
    JOIN tbl_geodetail c 
      ON a.foreigngeo = c.code 
```

编辑：

```
 SELECT DISTINCT a,b,c FROM t 
```

大致相当于：

```
 SELECT a,b,c FROM t GROUP BY a,b,c 
```

所以你应该这样做

```
 SELECT a.localgeo, a.foreigngeo, b.lat, b.lng, c.lat, c.lng
    FROM tbl_correlateddata a 
    JOIN tbl_geodetail b 
      ON a.localgeo = b.code 
    JOIN tbl_geodetail c 
      ON a.foreigngeo = c.code
     GROUP BY a.localgeo ,a.foreigngeo 
```

# salesforce - Salesforce Apex 编程语言是否支持函数参数？

> ID：13910457
> 
> 赞同：1
> 
> 时间：2012-12-17T08:12:33.463
> 
> 标签：salesforce, apex-code

只是想确认 Salesforce Apex 是否不支持 Java 和其他语言等参数？

例如：

它是一个简单的函数，带有 Java 中的参数。而且，Salesforce Apex 不支持这种语法。我对吗？

```
public int mult(int x, int y)
{
   return x * y;
} 
```

Salesforce 可以将参数从 Javascript 或 Visualforce 页面传递到 Apex，但是，我从来没有在 Apex 语言的函数/类中看到参数，所以只是想确保它。如果 Salesforce 有函数和参数，那么我们可以编写更多具有高效结构的顶点代码。

由 2012-12-18 添加 ============================
感谢 Gerard Sexton，它有效。

示例代码：

```
公共类 MyClass {
    公共整数 mult(整数 x, 整数 y)
    {
        返回 x * y；
    }
}

MyClass m = new MyClass();

System.debug(m.mult(3,4));

```

结果是**12**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:20:02.567

Apex 确实支持方法参数。

[这是定义类方法的文档](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#CSHID=apex_classes_defining.htm%7CStartTopic=Content/apex_classes_defining.htm%7CSkinName=webhelp)。

```
public class MyClass {
    public static integer mult(integer x, integer y)
    {
        return x * y;
    }
} 
```

这些方法只能在 APEX 中访问和使用。要使用从 Visualforce 页面传入的数据，请[参阅这些文档](http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_methods.htm)以获取示例。

在 visualforce 示例中，它们`searchText`用作类实例属性，但在标准编程语言中，我们会将其作为方法参数传入。

# recursion - VHDL递归组件/实体

> ID：13910461
> 
> 赞同：6
> 
> 时间：2012-12-17T08:12:40.143
> 
> 标签：recursion, configuration, vhdl

我希望这是可能的。我希望能够编写这样的递归代码：

```
entity myEntity
    generic (
      size : natural  -- a power of 2
    )
    port (
       -- whatever
    );
end;

architecture structural of myEntity is
begin
    smallerEntity : entity component.myEntity(structural)
        generic map (
            size => size/2
        );
        port map ( 
            ... 
        );
end; 
```

所以每个架构都会实例化一个较小的版本。但是，在通用“大小”的某个值下，我希望有不同的实现。

这可以通过配置完成吗？如果是这样，怎么做？

至于为什么我希望能够做到这一点——这样我就可以构建可重用的代码来计算 FFT/DCT 和类似的转换。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T10:15:07.637

您**可以**在 VHDL 中使用递归。但是您需要将您的实例化封装在一个`if-generate`语句中。就像是：

```
recursive_structure : if size/2 > 0 generate 
    smallerEntity : entity <library_name>.myEntity(structural)
        generic map (
            size => size/2
        )
        port map ( 
            ... 
        );
end generate recursive_structure; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:54:56.093

我使用如下函数：

```
-- convert natural to min vector length
function min_len_uns(arg : natural) return natural is       
begin 
     case arg is

         when 1 | 0 =>
            return 1;
         when others =>
            return 1 + min_len_uns(arg/2);
     end case;
end; 
```

# reporting-services - 获取 SSRS 报告地图中两点之间的距离

> ID：13910466
> 
> 赞同：0
> 
> 时间：2012-12-17T08:13:13.453
> 
> 标签：reporting-services, ssrs-2008, bing-maps, reporting-services-map

我创建了一个 SSRS 报告，其中我使用地图和 bing 地图。我也使用地图中的点图层。我怎样才能获得地图中2点之间的距离？好心劝告...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T08:15:41.770

以下函数为您提供***两个地理坐标之间的距离（以千米为单位）***

```
 CREATE FUNCTION dbo.fnCalcDistanceKM(@lat1 FLOAT, @lat2 FLOAT, @lon1 FLOAT, @lon2 FLOAT)
    RETURNS FLOAT 
    AS
    BEGIN

        RETURN ACOS(SIN(PI()*@lat1/180.0)*SIN(PI()*@lat2/180.0)+COS(PI()*@lat1/180.0)*COS(PI()*@lat2/180.0)*COS(PI()*@lon2/180.0-PI()*@lon1/180.0))*6371
    END 
```

以下函数为您提供***两个地理坐标之间的距离（以英里为单位）***

```
create function [dbo].[fnCalcDistanceMiles] (@Lat1 decimal(8,4), @Long1 decimal(8,4), @Lat2 decimal(8,4), @Long2 decimal(8,4))
returns decimal (8,4) as
begin
declare @d decimal(28,10)
-- Convert to radians
set @Lat1 = @Lat1 / 57.2958
set @Long1 = @Long1 / 57.2958
set @Lat2 = @Lat2 / 57.2958
set @Long2 = @Long2 / 57.2958
-- Calc distance
set @d = (Sin(@Lat1) * Sin(@Lat2)) + (Cos(@Lat1) * Cos(@Lat2) * Cos(@Long2 - @Long1))
-- Convert to miles
if @d <> 0
begin
set @d = 3958.75 * Atan(Sqrt(1 - power(@d, 2)) / @d);
end
return @d
end 
```

## 用法：

```
select [dbo].[fnCalcDistanceKM](13.077085,80.262675,13.065701,80.258916) 
```

[参考](https://stackoverflow.com/a/22476600/730807)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:14:07.743

如果您知道两个点的操作系统坐标（纬度和经度），您可以使用一些毕达哥拉斯来计算它：

```
SQRT(((lat1 - lat2) * (lat1 - lat2)) + ((long1 - long2) * (long1 - long2))) 
```

这将计算 X 轴和 Y 轴上两点之间的差异，这两个点成为赤道三角形的两条短边，最长边，斜边，是您要计算的距离。所以它变成了两个已知边的平方相加得到斜边的平方，它的平方根给你距离。

# css - 不规则的 div 背景，具有响应式布局

> ID：13910467
> 
> 赞同：0
> 
> 时间：2012-12-17T08:13:19.673
> 
> 标签：css, background-image

我有以下图像：

[http://i47.tinypic.com/219zkl.png](http://i47.tinypic.com/219zkl.png)

这需要作为 Foundation 框架中 .four-columns div 的背景。div 标题需要在黑色丝带中，内容在下面的框中。

我遇到的问题是让背景在浏览器中调整网格大小时正常运行。我不想仅仅为这个背景编写大量的媒体查询。我试过使用 background-size:cover 属性，但这会导致它在手机上看起来非常像素化，并且在平板电脑尺寸上没有正确覆盖 div。我也试过绝对定位，但也没有用。

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:24:57.487

这个背景太简单了，无法使用图像。只需使用纯 CSS。

如果您无法制作有角度的边框，这里有一个简单的教程> [http://www.howtocreate.co.uk/tutorials/css/slopes](http://www.howtocreate.co.uk/tutorials/css/slopes)

# java - 集合与数组性能明智

> ID：13910470
> 
> 赞同：5
> 
> 时间：2012-12-17T08:13:32.680
> 
> 标签：java

您能否让我知道**性能方面**为什么**Array**比**Collection**更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T08:15:42.393

它不是。这实际上取决于您对容器的使用。

某些算法可能在数组上以 O(n) 运行，在另一个集合类型（实现 Collection 接口）上以 O(1) 运行。

*   例如，考虑移除一个项目。在这种情况下，即使是本机类型，数组的执行速度也会比链表及其方法调用慢（在某些 VM 上无论如何都可以内联）：它在 O(n) VS O(1) 中运行列表
*   考虑搜索一个元素。对于数组，它在 0(n) 中运行，而对于树，它在 0(n) 中运行。

一些 Collection 实现使用数组来存储它们的元素（我认为是 ArrayList），因此在这种情况下性能不会有显着差异。

您应该花时间优化您的算法（并利用各种可用的集合类型），而不是担心数组 VS 集合的优缺点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T08:28:37.880

许多集合是数组的包装器。这包括 ArrayList、HashMap/Set、StringBuilder。对于优化的代码，操作的性能差异很小，除非您遇到更适合该数据结构的操作，例如查找 Map 比查找数组快得多。

对基本上是原语的集合使用泛型可能会更慢，不是因为集合更慢，而是额外的对象创建和缓存使用（因为所需的内存可能更高）这种差异通常太小而无所谓，但如果你担心这个您可以使用 Trove4J 库，它们是基元数组而不是对象数组的包装器。

集合速度较慢的地方是当您使用它们不适合的操作时，例如随机访问 LinkedList，但明智的编码可以避免这些情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:19:51.327

基本上，因为数组是 Java 中的原始数据结构。对它们的访问可以直接转换为本地内存访问指令，而不是方法调用。

尽管如此，数组在所有情况下都会严格胜过集合并不是很明显。如果您的代码引用了集合变量，其中运行时类型可以在 JIT 时单态地知道，Hotspot 将能够内联访问方法，并且在它们很简单的地方，可以同样快，因为无论如何基本上没有开销。

然而，许多集合的访问方法本质上比数组引用更复杂。例如，`HashMap`无论 Hotspot 对它进行了多少优化，a 都不会像简单的数组查找那样高效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T08:25:45.043

你无法将两者进行比较。ArrayList 是一个实现，Collection 是一个接口。Collection 接口可能有不同的实现。

在实践中，选择实现作为对数据的简单访问。如果您需要遍历所有元素，通常使用 ArrayList。哈希表，如果您需要按键访问。

只有在进行测量后才应考虑性能。然后很容易更改实现，因为集合框架具有像 Collection 接口这样的通用接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T08:26:28.257

问题是使用哪一个以及何时使用？

**数组**基本上是固定大小的元素集合。数组的缺点是它不可调整大小。但是如果你清楚你的元素大小，它的恒定大小会提供效率。因此，当您知道可用的元素数量时，最好使用数组。

**收藏**

**ArrayList**是另一个可调整元素数量的集合。因此，如果您不确定集合中的元素数量，请使用 ArrayList。但是在使用 ArrayList 时需要考虑一些事实。

*   ArrayLists 不同步。因此，如果有多个线程访问和修改列表，则可能需要在外部处理同步。

*   ArrayList 在内部实现为数组。因此，每当添加一个新元素时，就会创建一个由 n+1 个元素组成的数组，然后将所有 n 个元素从旧数组复制到新数组，然后将新元素插入到新数组中。

*   添加 n 个元素需要时间。

*   isEmpty、size、iterator、set、get 和 listIterator 操作
    需要相同的时间，与您访问的元素无关。

*   只有对象可以添加到 ArrayList

*   允许空元素

如果需要向 ArrayList 添加大量元素，可以使用 ensureCapacity(int minCapacity) 操作来确保 ArrayList 具有所需的容量。这将确保在添加所有元素时仅复制一次 Array，并提高将元素添加到 ArrayList 的性能。此外，在 1000 个元素的中间插入一个元素需要您向上或向下移动 500 个元素，然后在中间添加元素。

使用 ArrayList 的好处是访问随机元素很便宜，并且不受 ArrayList 中元素数量的影响。但是在尾巴的头部或中间添加元素是昂贵的。

**Vector**与 ArrayList 类似，不同之处在于它是同步的。它提供了一些其他好处，例如它具有初始容量和增量容量。因此，如果您的向量的容量为 10，增量容量为 10，那么当您添加第 11 个元素时，将创建一个包含 20 个元素的新向量，并将这 11 个元素复制到新向量中。因此，添加第 12 到第 20 个元素不需要创建新向量。

默认情况下，当向量需要增加其内部数据结构的大小以容纳更多元素时，内部数据结构的大小会增加一倍，而对于 ArrayList，大小只会增加 50%。所以ArrayList在空间上比较保守。

**LinkedList**更加灵活，允许您从集合的两侧插入、添加和删除元素 - 它可以用作队列甚至双端队列！LinkedList 在内部不使用数组。LinkedList 是一个节点序列，它们是双链接的。每个节点都包含标题，实际存储对象的位置，以及指向下一个或前一个节点的两个链接或指针。LinkedList 看起来像一条链条，由手拉手的人组成。您可以将人员或节点插入该链或删除。链接列表允许在恒定时间内在列表中的任何点进行节点插入/删除操作。

所以在链表中插入元素（无论是在头部还是尾部或中间）并不昂贵。此外，当您从头部检索元素时，它很便宜。但是当你想随机访问链表的元素或访问链表尾部的元素时，操作就很繁重了。因为，要访问第 n+1 个元素，您需要解析前 n 个元素才能到达第 n+1 个元素。

链表也不同步。因此，修改和读取列表的多个线程需要在外部同步。

因此，选择使用哪个类来创建列表取决于需求。当您需要在列表末尾添加元素并随机访问元素时，可以使用 ArrayList 或 Vector（如果您需要同步） - 访问操作多于添加操作。而当您需要从列表的头部或中间进行大量添加/删除（元素）操作并且您的访问操作相对较少时，应该使用 LinkedList。

# c# - elasticsearch 使用 NEST：如何使用文档版本控制？

> ID：13910473
> 
> 赞同：2
> 
> 时间：2012-12-17T08:13:54.650
> 
> 标签：c#, elasticsearch, nest

我正在使用 elasticsearch 并通过 NEST 驱动程序从 C# 访问它。我需要对通过 NEST 驱动程序添加和更新的文档进行一些并发控制。[这](http://www.elasticsearch.org/blog/2011/02/08/versioning.html "这里")是相应弹性搜索功能的链接，但我无法找到有关如何将文档版本控制与 NEST 驱动程序一起使用的任何信息。

我试图设置一个[映射](http://mpdreamz.github.com/NEST/indices/put-mapping.html "映射")，希望“_version”属性将从索引文档中反序列化（不序列化），但没有运气。

有没有人能够做我想做的事？这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:49:39.490

`_version`是一个元数据属性，您可以使用它访问它，`result.DocumentsWithMetaData`它公开一个`IEnumerable<Hit<YourDto>>`并且`Hit<YourDto>>`具有一个`.Version`属性。

如果没有指定，Elasticsearch 会自动增加版本号。

您可以在索引此处查看测试时指定自己的预期版本： [https ://github.com/Mpdreamz/NEST/blob/master/src/Nest.Tests.Unit/Core/Versioning/VersioningTests.cs](https://github.com/Mpdreamz/NEST/blob/master/src/Nest.Tests.Unit/Core/Versioning/VersioningTests.cs)

从 ES 文档中，我无法找到有关如何在`GET`和`Script Update`API 上指定预期版本的提及。必须深入研究以绝对确定那里不需要它。

[不支持http://www.elasticsearch.org/blog/2011/02/08/versioning.html](http://www.elasticsearch.org/blog/2011/02/08/versioning.html)`op_type`上提到的创建，也将在下一个版本中使用。

# java - 使用 * 创建 Java 正则表达式

> ID：13910477
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:14:32.203
> 
> 标签：java, regex

我必须使用正则表达式检查文件名的格式。有些文件名将包含以下格式：

```
*_*_*.key 
```

问题是任何字符串都将匹配 *，因此具有格式的文件名`*_*_*_*_*_*_*.key`也将匹配上面提到的正则表达式。

我正在考虑计算下划线（_）的数量，但是有没有办法使用正则表达式进行检查？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:18:14.803

使用这个正则表达式`^([^_]_)+[^_]\.key$` ，`+`你可以写下破折号的数量 fe`{2}` 正则表达式将是`^([^_]_){2}[^_]\.key$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:16:05.657

使用[否定字符类](http://www.regular-expressions.info/charclass.html#negated)来匹配除下划线以外的任何内容：

```
^[^_]+_[^_]+_[^_]+\.key$ 
```

仅当您希望允许零个字符时才使用 `*`而不是。`+`

```
^[^_]*_[^_]*_[^_]*\.key$ 
```

# javascript - javascript中的函数在调用时不起作用

> ID：13910486
> 
> 赞同：0
> 
> 时间：2012-12-17T08:15:13.560
> 
> 标签：javascript

我有一个 javascript 代码，它通过删除它的第一行和最后一行来工作。

请看一下[JSFiddle](http://jsfiddle.net/subTZ/59/)

对于想在这里看到它的人，这是我的html：

```
<input id="search" onclick="search()" type="button" value="Search"/> 
```

我的 javascript ：

```
 function search() {
var search = document.getElementById('search');

var int = setInterval(function() {
    if (search.value.length == 6)
        search.value = 'Searchi';
    else if (search.value.length == 7)
        search.value = 'Searchin';
    else if (search.value.length == 8)
    search.value = 'Searching';
    else {
        search.value= 'Search';
            }
    //clearInterval( int ); // at some point, clear the setInterval
}, 500);

} 
```

我希望该功能仅在单击按钮时才起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:23:46.577

您`jQuery`在 jsfiddle.net 中选择了默认情况下会导致站点将您的整个代码包装在`document.ready`处理程序中。

结果是您的`search`函数成为该包装器中的本地函数，而不是 DOM0`onclick`处理程序所需的全局变量。

将 jsfiddle 选项设置为“no wrap (body)”和“No-Library (pure js)”以关闭该功能。

# mysql - 当我发出“01%”之类的信号时，我没有收到警告

> ID：13910491
> 
> 赞同：3
> 
> 时间：2012-12-17T08:15:35.603
> 
> 标签：mysql

在此触发器之后，如果我在 foo.x 中插入 5，我不会收到警告

```
\d $
CREATE TRIGGER `tri` BEFORE INSERT ON `foo` FOR EACH ROW
BEGIN
    IF NEW.bar = 5 THEN
        SIGNAL SQLSTATE '01002' SET MESSAGE_TEXT = 'MSG';
    END IF;
END$\d ;

INSERT INTO `foo` values (5); 
```

> 1 行受影响

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:25:00.913

如[MySQL 5.5.8 (2010-12-03, General Availability) 中的更改中所述](http://dev.mysql.com/doc/refman/5.5/en/news-5-5-8.html)：

> ### 已修复的错误
> 
> `[ deletia ]`
> 
> *   成功完成后未清除触发器引发的警告。现在，根据 SQL 标准，如果触发器成功完成，则会清除警告。（[错误＃55850](http://bugs.mysql.com/bug.php?id=55850)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:31:55.753

您确定触发器已创建吗？我有两个错误。

尝试改用此语句 -

```
SIGNAL SQLSTATE '01002' SET MESSAGE_TEXT = 'MSG'; 
```

*   '010002' -> '01002'
*   TEXT_MESSAGE -> MESSAGE_TEXT

[信号语法](http://dev.mysql.com/doc/refman/5.5/en/signal.html)。

# html - 避免使用向上或向下键的键盘更改单选按钮选择

> ID：13910495
> 
> 赞同：0
> 
> 时间：2012-12-17T08:15:43.607
> 
> 标签：html, selection

我有 5 个单选按钮。如果我按向上或向下关键字按钮选择第一个单选按钮后，单选按钮选择将改变。如何避免通过键盘更改收音机选择？使用谷歌浏览器我没有这个问题，这个问题只发生在 Firefox 或 Internet Explorer 中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<div id="wrap">
<input type="radio" name="radio" id="radio" value="radio" />
<input type="radio" name="radio" id="radio2" value="radio" />
<input type="radio" name="radio" id="radio3" value="radio" />
<input type="radio" name="radio" id="radio4" value="radio" />
<input type="radio" name="radio" id="radio5" value="radio" />
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:24:07.163

我解决了我的问题。我使用了一个 jQuery 插件来创建自定义单选框和复选框。例如： http: [//line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons](http://line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons)

# android - 从安卓手机获取所有电话簿数据

> ID：13910498
> 
> 赞同：0
> 
> 时间：2012-12-17T08:15:47.547
> 
> 标签：android, optimization, query-optimization

我对应用程序开发不是很有经验，但我必须编写一个应用程序来读取所有电话簿数据并将其保存到 xml 文件中。

我当前的版本正在我的手机上运行（只有 150 个联系人）。但是当我在有几千个联系人的设备上运行它时，应用程序变得非常慢。当我单击一个按钮时，需要将近一分钟才能显示新屏幕。

我想我的应用程序的结构不是很好。这就是我目前读取所有数据的方式：

私人无效xmlPart2（XmlSerializer序列化程序）{

```
try {

  ContentResolver contentr = getContentResolver();
  Cursor cursor = contentr.query(
      ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

  if (cursor.getCount() > 0) {

    while (cursor.moveToNext()) {

      String id = cursor.getString(cursor
          .getColumnIndex(ContactsContract.Contacts._ID));

      serializer.startTag(null, "Contact");
      serializer.attribute(null, "ID", id);

      Cursor emailCur = contentr.query(
          ContactsContract.CommonDataKinds.Email.CONTENT_URI,
          null,
          ContactsContract.CommonDataKinds.Email.CONTACT_ID
              + " = ?", new String[] { id }, null);

      serializer.startTag(null, "Emails");

      while (emailCur.moveToNext()) {

        String email = emailCur
            .getString(emailCur
                .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

        String emailtype = emailCur
            .getString(emailCur
                .getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

        this.appendNode(serializer, "Email", email, emailtype);
      }

      serializer.endTag(null, "Emails");
      emailCur.close();

      if (Integer
          .parseInt(cursor.getString(cursor
              .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

        Cursor pCur = contentr
            .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                null,
                ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                    + " = ?", new String[] { id },
                null);

        serializer.startTag(null, "Numbers");

        while (pCur.moveToNext()) {

          String phonenumber = pCur
              .getString(pCur
                  .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
          String phonetype = pCur
              .getString(pCur
                  .getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

          this.appendNode(serializer, "Number", phonenumber,
              phonetype);
        }

        serializer.endTag(null, "Numbers");

        pCur.close();

      }

      serializer.endTag(null, "Contact");
    }
  }

  cursor.close();

} catch (IOException e) {
  e.printStackTrace();
} 
```

}

这只是代码的一部分。在当前代码中，我阅读了以下字段：姓名、地址、电子邮件、组织、便笺、即时通讯工具、网站、昵称和电话号码。

有没有办法优化它？因为它也应该在 API 级别 11 以下工作，所以我不能使用 CursorLoader。

我感谢每一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:16:41.147

请在新线程中运行联系人阅读代码。然后调用加载警报（进度条）。联系人获取后，调用处理程序隐藏警报并使用捆绑包将数据传递到下一个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:58:33.000

您应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，也许您想使用[ProgressDialog向用户显示进度](http://developer.android.com/reference/android/app/ProgressDialog.html)

# php - 如何为文本区域添加价值

> ID：13910501
> 
> 赞同：0
> 
> 时间：2012-12-17T08:15:56.063
> 
> 标签：php, ajax

> **可能重复：**
> [如何为 html <textarea> 添加默认值？](https://stackoverflow.com/questions/6007219/how-to-add-default-value-for-html-textarea)

我正在使用 ajax 将数据从表单发送到数据库，并且我有问题：

```
<input class="input" type="text" name="do_kogo" id="odbiorca" size="25" value="<?php print $odbiorca; ?>" />
<input class="input" id="temat" type="text" name="temat" size="25" value="<?php print $temat; ?>"/>
<textarea id="tresc_area" name="tresc" cols="45" rows="10" ></textarea> 
```

如您所见，我正在将值更改为 php 等效值，但我不知道如何更改 textarea 的值以放在那里`<?php print $tresc; ?>`如果有人知道如何执行此操作，请帮助我。我会很感激的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:16:47.450

您可以在`<textarea>`开始和结束标签之间添加值。

```
<textarea id="tresc_area" name="tresc" cols="45" rows="10" ><?php print $tresc; ?></textarea> 
```

# c# - 如何在 Visual Studio 中为 C# 生成的类添加默认命名空间

> ID：13910504
> 
> 赞同：0
> 
> 时间：2012-12-17T08:16:12.053
> 
> 标签：c#, asp.net, asp.net-mvc

当我将 C# 类添加到项目时，该类具有一些默认命名空间，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text; 
```

当我向项目添加一些新类时，我想添加一些默认命名空间。例如，当我向项目添加新类时，我有以下生成的命名空间`Visual Studio`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MyCompany.Namespace1;
using MyCompany.Namespace2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T17:47:08.833

您正在寻找[Visual Studio 项模板](http://msdn.microsoft.com/en-us/library/vstudio/ms247069%28v=vs.100%29.aspx)。您可以创建一个新的项目模板，其中包含您想要的任何样板代码，然后将该项目模板分发给您的团队成员。

# php - 如何在读取文件之前确定 file_get_contents 结构？

> ID：13910505
> 
> 赞同：1
> 
> 时间：2012-12-17T08:16:11.207
> 
> 标签：php, meta-tags

我正在尝试从搜索后传递的 URL 结果中获取元信息。我一直在使用 OpenGraph 库和 PHP 的本机`get_meta_tags`函数来检索元标记。

我的问题是当我阅读恰好是`.m4v`扩展的 URL 的内容时。该程序试图读取该文件的内容，但它太大了（更不用说，完全没用，因为它都是垃圾）并且我的程序拒绝放开它。因此，我被卡住了，直到程序抛出超时错误并继续前进。

如果文件太大，有什么方法可以停止读取文件的内容？我尝试`file_get_contents()`使用该`maxlen`参数，但它似乎仍然阅读了整个页面。在我深入挖掘文件以获取元数据之前，如何快速确定文件是否带有标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:11:00.030

[get_headers()](http://php.net/manual/en/function.get-headers.php)是您需要的，您可能感兴趣的响应中有一个**Content-Type**和**Content-Length 。您可能想要：**

```
$headers=get_headers($url,1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:23:13.667

使用 php`filesize($yourFile);`查找文件大小（以字节为单位）：

```
$size = filesize($yourFile);
if ($size < 1000) {
    $string = file_get_contents($yourFile);
} 
```

# asp.net - Amazon AWS 上托管的 ASP.NET WebForms 站点中的 Response.Redirect 和 Page.ResolveUrl 问题

> ID：13910506
> 
> 赞同：0
> 
> 时间：2012-12-17T08:16:15.090
> 
> 标签：asp.net, .net, amazon-web-services

我已经将一个 ASP.NET WebForms 站点部署到 Amazon AWS 到以下链接（'webapp' 只是一个虚拟名称，我没有包含真实的 url）

[http://webapp.elasticbeanstalk.com](http://webapp.elasticbeanstalk.com)

我的问题是，无论我在哪里使用 Response.Redirect 进行重定向（例如 Response.Redirect('~/Page.aspx') 或使用 Page.ResolveUrl 创建一个链接（例如 Page.ResolveUrl('~/Page.aspx' )，网址变成

[http://webapp.elasticbeanstalk.com/webapp_deploy/Page.aspx](http://webapp.elasticbeanstalk.com/webapp_deploy/Page.aspx)

但我希望它很简单：

[http://webapp.elasticbeanstalk.com/Page.aspx](http://webapp.elasticbeanstalk.com/Page.aspx)

我的猜测是该站点位于亚马逊服务器上名为“webapp_deploy”的文件夹中，并且主页符号“~”被映射到“webapp_deploy”。

这是一个已知问题还是我做错了什么？是否有任何解决方法...我需要在 AWS 控制台中更改某些内容吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:34:03.040

默认情况下，您的 Web 应用程序将部署到 webappname_deploy，但您可以在项目属性中更改它。

*   在解决方案资源管理器中，右键单击 Web 项目并选择“属性”。
*   在属性窗格中，转到“Package/Publish Web”选项卡。
*   在该选项卡上，有一个标有“要在目标服务器上使用的 IIS 网站/应用程序名称”的表单字段：
*   删除 webappname_deploy，所以它只会说“默认网站/”

然后，您的 Web 应用程序将部署到 IIS 默认网站的根目录。

# android - 运行并行 AsyncTask

> ID：13910508
> 
> 赞同：25
> 
> 时间：2012-12-17T08:16:23.973
> 
> 标签：android, background, android-asynctask

我的应用程序中有一个 SplashActivity，它在我启动应用程序时使用 AsyncTask 做一些事情。

我还创建了另一个从服务器下载数据的 AsyncTask。现在，在我关闭我的应用程序后，AsyncTask 仍在下载数据。

但是当我再次启动我的应用程序时，我的 SplashActivity 的 AsyncTask 不会执行其后台（doInBackground 函数），直到我的下载器 AsyncTask 完成，并且我的应用程序被挂起。

所以我的问题是我们不能并行运行两个 AsyncTask 吗？两个 AsyncTask 都是不同的并且做自己的事情。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-17T09:07:55.970

Honeycomb 版本中的 AsyncTask 发生了变化。旧版本有一个 10 个线程的线程池，因此您可以并行运行 10 个任务。但是对于 Honeycomb 及更高版本，默认是串行执行器，它会一个接一个地执行任务。但是你可以通过一个`ThreadPoolExecutor`执行：

```
 if (Build.VERSION.SDK_INT >= 11) {
     //--post GB use serial executor by default --
     task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
   } else {
     //--GB uses ThreadPoolExecutor by default--
     task.execute();
   } 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-12-17T08:26:28.910

您将需要使用 a`thread pool Executor`来执行`AsyncTask`. 默认实现使用在单个线程上运行的串行执行器

所以创建一个[ThreadPoolExecutor](http://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html)然后使用

AsyncTask 的[executeOnExecutor](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29)而不仅仅是执行方法

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-05T02:43:00.093

另一种选择是使用支持 v.4 库中的[AsyncTaskCompat](https://developer.android.com/reference/android/support/v4/os/AsyncTaskCompat.html)。

```
AsyncTaskCompat.executeParallel(new AsyncTask<Void, Void, Object>() {
    @Override
    protected Object doInBackground(Void... params) {
        // do your parallel task here
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        // and fetch result
    }
}); 
```

# java - 将参数传递给 Java 线程

> ID：13910512
> 
> 赞同：7
> 
> 时间：2012-12-17T08:16:39.947
> 
> 标签：java, multithreading, runnable

```
Thread t = new Thread(new Runnable() { public void run() {} }); 
```

我想以这种方式创建一个线程。如果可能的话，如何将参数传递给`run`方法？

**编辑**：要具体说明我的问题，请考虑以下代码段：

```
for (int i=0; i< threads.length; i++) {
    threads[i] = new Thread(new Runnable() {public void run() {//Can I use the value of i in the method?}});
} 
```

根据乔恩的回答，它不会起作用，因为`i`它没有被声明为`final`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T08:19:25.300

不，该`run`方法从来没有任何参数。您需要将初始状态放入`Runnable`. 如果您使用的是匿名内部类，则可以通过 final 局部变量来实现：

```
final int foo = 10; // Or whatever

Thread t = new Thread(new Runnable() {
    public void run() {
        System.out.println(foo); // Prints 10
    }
}); 
```

如果您正在编写命名类，请向该类添加一个字段并将其填充到构造函数中。

或者，您可能会发现这些课程对`java.util.concurrent`您有更多帮助（`ExecutorService`等） - 这取决于您要做什么。

编辑：要将上述内容放入您的上下文中，您只需要循环中的最终变量：

```
for (int i=0; i< threads.length; i++) {
    final int foo = i;
    threads[i] = new Thread(new Runnable() {
         public void run() {
             // Use foo here
         }
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T08:36:26.870

您可以创建一个接受您的参数的自定义线程对象，例如：

```
public class IndexedThread implements Runnable {
    private final int index;

    public IndexedThread(int index) {
        this.index = index;
    }

    public void run() {
        // ...
    }
} 
```

可以这样使用：

```
IndexedThread threads[] = new IndexedThread[N];

for (int i=0; i<threads.length; i++) {
    threads[i] = new IndexedThread(i);
} 
```

# ios - iOS：[UIApplication schedulelocalnotification] 和相关的本地通知操作方法线程安全吗？

> ID：13910516
> 
> 赞同：3
> 
> 时间：2012-12-17T08:16:49.633
> 
> 标签：ios

我的应用程序有时需要安排近 64 个本地通知，这将在 iPhone4 上阻塞我的主线程近 1 秒。我想在一个单独的线程上执行此操作，这些线程的本地通知操作方法是否`UIApplcation`安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:25:29.377

不要这么认为，因为文档没有明确说明它，而且 UIKit 通常在很大程度上不是线程安全的

但值得一试：D主线程只有一个dispatch_async；）

--- 也许可以选择单独安排它们并在两者之间运行主循环

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T08:26:33.707

有两件事在起作用，线程安全和从后台线程调用 UIKit。一些 UIKit 代码根本不喜欢从后台线程调用，如果你尝试这样做会抛出异常（比如为 a 设置新内容`UITextView`）。换句话说，代码中有这样的东西：

```
NSParameterAssert([NSThread isMainThread],
    @"This method must be called from the main thread."); 
```

然后是线程安全，即。如果代码可以从后台线程调用，它的编写方式可能仍然会导致错误：

```
- (void) doA {
    for (id item in allItemsArray) {
        // do something
    }
}

- (void) doB {
    [allItemsArray addObject:@"foo"];
} 
```

现在，如果同时一个线程调用`-doA`和另一个线程调用`-doB`，您的应用程序将因异常而崩溃，因为您更改了`allItemsArray`枚举它的时间。

所以第一个问题是是否可以在后台线程上调用通知方法。我会说他们可以。在这种情况下，您可以简单地从后台队列安排所有通知：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    for (int i=0; i<64; i++) {
        // schedule notification
    }
}); 
```

您不需要关心线程安全，除非您的应用程序的另一部分同时安排其他本地通知。如果有，您可以创建一个单独的队列来序列化所有通知调用代码，或者您必须确保这些方法确实是线程安全的（在这种情况下，我没有可提供的权威资源）。

# android - 配置更改时纵向锁定屏幕

> ID：13910520
> 
> 赞同：1
> 
> 时间：2012-12-17T08:17:01.613
> 
> 标签：android, landscape-portrait

我有一个带有布尔值的简单活动。当且仅当该布尔值为假时（当然，仅当屏幕改变方向时），我希望它从纵向变为横向。

我试过这个：

```
 @Override
    public void onConfigurationChanged(final Configuration newConfig) {
        super.onConfigurationChanged((listening) ? getListeningConfiguration(newConfig)
                : newConfig);
        setContentView(R.layout.medidor);
        preconfigureLayout();
    }

    public Configuration getListeningConfiguration(final Configuration c) {
        c.orientation = Configuration.ORIENTATION_PORTRAIT;
        return c;
    } 
```

但它根本行不通。

除非我告诉它可以更改，否则如何强制活动保持纵向状态？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T09:21:36.847

在活动标签的清单文件中添加

```
 android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait" 
```

这将使您的活动保持纵向模式。然后使用您的代码更改方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T08:18:52.037

只需调用它以使其保持纵向：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

那*应该*可以解决问题

# objective-c - DynamoDB - 项目未上传

> ID：13910521
> 
> 赞同：0
> 
> 时间：2012-12-17T08:17:01.847
> 
> 标签：objective-c, ios, amazon-web-services, amazon-dynamodb

我是新手`DynamoDB`，我想用它来存储我将与 S3 对象匹配的键字符串。这是我上传字符串的代码：

```
AmazonCredentials *amazonCreds = [[AmazonCredentials alloc] initWithAccessKey:ACCESS_KEY_ID withSecretKey: SECRET_KEY];

AmazonDynamoDBClient *dClient = [[AmazonDynamoDBClient alloc] initWithCredentials: amazonCreds];

[dClient setEndpoint: [AmazonEndpoints s3Endpoint:AP_SOUTHEAST_1 secure: YES]];

NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                          [[DynamoDBAttributeValue alloc] initWithS: req.key],
                          @"QuoteKey",
                          nil];

DynamoDBPutItemRequest *dReq = [[DynamoDBPutItemRequest alloc] initWithTableName:@"TestQuotesTable" andItem: [dict mutableCopy]];
DynamoDBPutItemResponse *dRes = [dClient putItem: dReq]; 
```

但是当我去控制台并进入表格时，该项目没有上传....我的代码有问题吗？当我第一次创建表时`DynamoDB`，默认键/属性名称是“QuoteKey”，所以一切都应该没问题。

我的代码有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:42:12.477

您将客户端的终端节点设置为 S3 终端节点，而不是 DynamoDB。您将要替换：

```
[dClient setEndpoint: [AmazonEndpoints s3Endpoint:AP_SOUTHEAST_1 secure: YES]]; 
```

具有以下内容：

```
[dClient setEndpoint: [AmazonEndpoints ddbEndpoint:AP_SOUTHEAST_1 secure: YES]]; 
```

# wix - 安装后应用程序未到达程序和功能

> ID：13910530
> 
> 赞同：1
> 
> 时间：2012-12-17T08:17:44.327
> 
> 标签：wix, windows-installer, wix3.6, wix-extension, wixlib

我已经为网站应用程序制作了一个安装程序。它已成功构建，并且在注册表和 IIS 中有条目。但它没有在卸载程序和功能中注册。我必须手动从注册表和 IIS 中删除。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:53:44.617

如果您创建了 MSI 安装程序，但在“程序和功能”中看不到条目，​​则表示您启用了 SYSTEMCOMPONENT 属性（将您的应用程序隐藏在那里）。

要检查它，请转到注册表并通过 GUID 找到您的应用程序： `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{YOUR_GUID}`并查找`SystemComponent`带有 value 的键`1`。如果存在，则可以通过`0`在 WiX 中禁用或将此属性设置为值来解决问题。

# java - 保存图像的正确方法是什么（文件上传）

> ID：13910534
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:18:11.463
> 
> 标签：java, tomcat, web-applications, file-upload

我正在尝试将图像保存在我的网络应用程序目录之外。我已经在共享上托管了我的应用程序。所以我有一个根文件夹来部署我的项目。我怎样才能在我的 webapp 之外创建一个目录，以便我可以在上面上传我的图像。如果我重新部署我的应用程序，那么这些图像不会丢失。

例如。我得到了根空间，并将所有构建文件夹都粘贴在上面。如果我重新部署我的应用程序，我希望上传文件夹不会丢失。

```
fileSystemPath= "/files"; 
 try{                
     File destFile  = new File(fileSystemPath, thempicFileName);
         FileUtils.copyFile(thempic, destFile);
         String path=fileSystemPath+"/"+thempicFileName; 
```

使用上面的代码，在 D 驱动器（*我当前的工作目录*）中创建了一个文件夹，并且在我的 db 文件中存储了类似的内容`/files/smg.png`如果我尝试使用`<img src="/files/smg.png"/>`我的 jsp 页面访问该图像，那么我将无法显示该图像。

**项目和文件的确切位置**.. 使用上面的代码，我的图像保存在`D:\myprojectDir\files`其中，我的项目位置是`D:\myprojectDir\projectfolder`

该项目正在STRUTS2中开发

请建议我必须以哪种方式编写代码，以便我可以在 jsp 上接收我的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:23:38.900

您不能从浏览器直接访问您的 web 应用程序的其他任何内容（甚至有些文件夹受到保护）。想象一下，如果可以的话，会出现什么样的安全漏洞。

不过，您可以编写一个“代理”servlet/JSP，它从您的文件系统中读取一个文件并将其返回给浏览器。您可能需要确保正确访问您的 tomcat 用户，并在使用 selinux 时授予它访问权限。

但是请不要在没有充分理由的情况下这样做，并且所有检查您只访问您打算访问的路径（因此，请检查没有人向您传递类似的文件`../../mySecrectAccountPasswords.txt`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:26:30.523

您可以将图像存储在服务器应用程序可访问的任何位置。

您必须打开文件并使用您放入 jsp 中的特定 servlet 的 url 将流发送到响应。

这是 Spring 的一个示例：

```
 File file = new File(...);
            Resource resource = new FileSystemResource( file );

            HttpHeaders headers = new HttpHeaders();
            headers.setContentType( MediaType.IMAGE_JPEG );

            return new ResponseEntity<Resource>( resource, headers,
                    HttpStatus.OK ); 
```

已编辑：您在 Google 中有很多示例搜索：“将图像流式传输到 http 响应”。

# python - python 正则表达式帮助：匹配 '"icon":"' AND '.png",' 之间的所有文本

> ID：13910539
> 
> 赞同：1
> 
> 时间：2012-12-17T08:18:23.460
> 
> 标签：python, regex

我正在尝试在字符串中删除此模式的所有结果。

```
,"icon":"Art\/2DArt\/SkillIcons\/passives\/evadepercentage.png"
,"icon":"Art\/2DArt\/SkillIcons\/passives\/evadepercentage.png"
,"icon":"Art\/2DArt\/SkillIcons\/passives\/evade.png"  
,"icon":" [[ anything could be here ]] .png"

txt = re.sub('"icon":"(.*).png",','',txt) 
```

## 我的尝试：

```
import re

txt = '{21435,"icon":"Art\/2DArt\/SkillIcons\/passives\/newevadepercentage.png",false,true,"Leather and Steel",false,[],["24% increased Evasion Rating and Armour"],439,2,10,0,0,0,[]},{50054,"icon":"Art\/2DArt\/SkillIcons\/passives\/shieldblock.png",false,false,"Shield Block",false,[],["2% additional Shield Block Chance"],440,1,4,0,0,0,[24083]},{44207,"icon":"Art\/2DArt\/SkillIcons\/passives\/barricade.png",false,true,"Shield Mastery",false,[],["4% additional Shield Block Chance","20% increased Defences from equipped Shield"],440,1,0,0,0,0,[59281]},{59281,"icon":"Art\/2DArt\/SkillIcons\/passives\/shieldblock.png",false,false,"Shield Block",false,[],["2% additional Shield Block Chance"],440,1,2,0,0,0,[50054]}'

txt = re.sub('"icon":"(.*).png",','',txt)

print txt 
```

## 输出：

```
{21435,false,false,"Shield Block",false,[],["2% additional Shield Block Chance"],440,1,2,0,0,0,[50054]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:21:59.967

怎么样 ：-

```
txt = re.sub('"icon":"(.*?).png",','',txt) 
```

做一个非贪婪匹配。

**测试：-**

```
 C:\>python st.py
{21435,false,true,"Leather and Steel",false,[],["24% increased Evasion Rating and Armour"],439,2,10,0,0,0,[]},
{50054,false,false,"Shield Block",false,[],["2% additional Shield Block Chance"],440,1,4,0,0,0,[24083]},
{44207,false,true,"Shield Mastery",false,[],["4% additional Shield Block Chance","20% increased Defences from equipped Shield"],440,1,0,0,0,0,[59281]},
{59281,false,false,"Shield Block",false,[],["2% additional Shield Block Chance"],440,1,2,0,0,0,[50054]} 
```

# android - 循环遍历两个视图以检查是否相等

> ID：13910544
> 
> 赞同：1
> 
> 时间：2012-12-17T08:19:06.143
> 
> 标签：android, android-edittext, android-view

我有两个相同的视图和许多editTexts。一方面，在editTexts 中填充了预定义的答案（但未向用户显示）。在第二种情况下，用户从所有空白的 editTexts 开始，然后填写它们以尝试使它们与预定义的答案相同。

所以我想遍历用户的视图，将其与预定义的视图进行检查，直到发现不等式，在这种情况下，该方法将返回 false。

我的代码如下。在 onCreate 我有一个 buttonListener （当用户准备好检查答案时） btnSolution.setOnClickListener(new View.OnClickListener() {

```
 @Override
        public void onClick(View v) {
            if(checkAnswer() == true){
                Toast.makeText(getBaseContext(), "all good!", Toast.LENGTH_LONG).show();
            }
            else {
                Toast.makeText(getBaseContext(), "no good", Toast.LENGTH_LONG).show();
            }
        }
    }); 
```

然后将 checkAnswer() 方法定义如下

```
 public boolean checkAnswer() {
      final int ROW_COUNT = 15;
      final int COL_COUNT = 10;
      final String ROWS[] = {"R1","R2","R3","R4","R5","R6","R7","R8","R9","R10","R11","R12","R13","R14","R15"};
      final String COLS[] = {"C1","C2","C3","C4","C5","C6","C7","C8","C9","C10"};

      for(int i=0; i<ROW_COUNT; i++) {
          for(int j=0; j<COL_COUNT; j++) {
              String a = ROWS[i];
              String b = COLS[j];
              int editTextBaseId = getResources().getIdentifier("box" + a + b, "id", getPackageName());
              int editTextAnswerId = getResources().getIdentifier("boxA" + a + b, "id", getPackageName());
              EditText editTextBase = (EditText)findViewById(editTextBaseId);
              EditText editTextAnswer = (EditText)findViewById(editTextAnswerId);
              String textBase = editTextBase.getText().toString();
              String textAnswer = editTextAnswer.getText().toString();
              if(textBase.equals(textAnswer)) {
              }
              else {
                  return false;
              }               
          }
      }        
      return true;         
   } 
```

不幸的是，当我尝试运行它时，我的 LogCat 中出现了崩溃和以下错误

```
12-17 00:05:02.075: E/SKIA(16370): FimgApiStretch:stretch failed 
```

有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:32:16.657

这本身并不是一个错误。我猜您正在使用三星作为您的目标设备，如果是这样，请不要担心。

另一方面，也许最好只比较字符串。所有这些 findViewById 都是无效的。

查看您的代码：

```
EditText editTextAnswer = (EditText)findViewById(editTextAnswerId); 
```

您是否在相同的布局中拥有两个视图，而带有答案的视图被隐藏了？我的意思是，如果您的活动内容为空白 editTexts 的视图，则无法找到带有答案的 editText，因为它位于其他 xml 中（假设您将其作为不同的 xml）。

# ruby - 如何搜索具有在同一节点中定义的命名空间的节点

> ID：13910545
> 
> 赞同：4
> 
> 时间：2012-12-17T08:19:05.690
> 
> 标签：ruby, nokogiri

如果祖先节点定义了命名空间，我可以使用它们：

```
> Nokogiri::XML(<<-XML
<?xml version='1.0' encoding='UTF-8'?>
<package xmlns="http://www.idpf.org/2007/opf" version="2.0" unique-identifier="bookid">
  <metadata xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:opf="http://www.idpf.org/2007/opf">
    <dc:creator opf:role="aut">John Doe</dc:creator>
  </metadata>
</package>
XML
> xml.at_xpath("//dc:creator[@opf:role='aut']", xml.at_xpath("//xmlns:metadata").namespaces).text
 => "John Doe" 
```

但是，我应该如何处理以下 XML？

```
> Nokogiri::XML(<<-XML
<?xml version='1.0' encoding='UTF-8'?>
<package xmlns="http://www.idpf.org/2007/opf" version="2.0" unique-identifier="bookid">
  <metadata>
    <dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:opf="http://www.idpf.org/2007/opf" opf:role="aut">John Doe</dc:creator>
  </metadata>
</package>
XML
> xml.at_xpath("//dc:creator[@opf:role='aut']", xml.at_xpath("//xmlns:metadata").namespaces).text
Nokogiri::XML::XPath::SyntaxError: Undefined namespace prefix: //dc:creator[@opf:role='aut'] 
```

我认为`xml.remove_namespaces!`或文字名称空间参数`at_xpath`是最后的手段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T00:08:27.080

要以编程方式收集所有命名空间，请使用`Document#collect_namespaces`.

```
xml = Nokogiri::XML(xmldata)

ns = xml.collect_namespaces

puts xml.at('//dc:creator[@opf:role="aut"]', ns).text 
```

输出：

```
John Doe 
```

# javascript - 如何将img src保存到本地磁盘

> ID：13910552
> 
> 赞同：1
> 
> 时间：2012-12-17T08:19:42.463
> 
> 标签：javascript, html, css

我在 html 文件中有一个 img 代码：

```
<span style="display:inline">
        <img NAME="anImage" height="250" src="https://chart.googleapis.com/chart?" alt="">
       </span> 
```

在上面，`<img>`网页中显示了一个，现在我想添加一个按钮，当单击该按钮时，会弹出一个系统“另存为”对话框，然后将此 img 保存到本地磁盘。

```
 <input id="saveImage" type="button" value="save image"></input>
   <script type="text/javascript">
    .............
   </script> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:30:07.390

你想要的是图像的默认浏览器行为。如果你想要一个额外的按钮，你可以触发图像的上下文菜单事件：

给你的图片一个 id，让它与原生 javascript 一起工作！

```
var ev
  , image = document.getElementById('your-image-id')
  , button = document.getElementById('saveImage');

button.onclick = function () {
  if (document.createEvent) { // means this is no ie-browser
    ev = document.createEvent('HTMLEvents');
    ev.initEvent('contextmenu', true, false);
    image.dispatchEvent(ev);
  } else {
    image.fireEvent('oncontextmenu');
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:25:28.027

此代码允许用户单击 ID 为 saveImage 的按钮以下载文件 example.jpg

```
$('#saveImage').click(function() {

window.location.assign('http://localhost/example.jpg');

}); 
```

# java - JAX-WS 调度请求设置 Content-Type

> ID：13910562
> 
> 赞同：6
> 
> 时间：2012-12-17T08:20:52.147
> 
> 标签：java, web-services, client, jax-ws

我正在尝试使用服务/调度机制发布 JAX-RS 资源。问题是传出请求的 Content-Type 被锁定为`text/xml`. 例如，我看不到将其更改为其他类型的方法`application/xml`。

RESTfull Web 服务仅使用`application/xml`和`application/json`。这是我使用的代码：

```
public static void main(String[] args) {
    QName qName = new QName("GREETINGS");

    Service service = Service.create(qName);
    service.addPort(qName, HTTPBinding.HTTP_BINDING, "http://localhost:8081/gf-ws-1/resources/greetings");

    // change headers of the outgoing request
    Map<String, Object> headers = new HashMap<String, Object>();
    headers.put("Content-Type", Arrays.asList(new String[] {"application/xml"}));
    headers.put("Accept", Arrays.asList(new String[] {"zoo"}));
    headers.put("foo", Arrays.asList(new String[] {"bar"}));

    Dispatch<Source> dispatch = service.createDispatch(qName, Source.class, Service.Mode.PAYLOAD);
    dispatch.getRequestContext().put(MessageContext.HTTP_REQUEST_METHOD, "POST");
    dispatch.getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, headers);

    dispatch.invokeOneWay(new StreamSource(new StringReader("<?xml version='1.0' encoding='UTF-8'?><greeting><value>Hello World!</value></greeting>")));

    // get the response code: [HTTP/1.1 415 Unsupported Media Type] because of content type
    System.out.println(((Map<String, Object>) dispatch.getResponseContext().get(MessageContext.HTTP_RESPONSE_HEADERS)).get(null));
} 
```

`Accept`header 被修改为，header 添加了 value `zoo`，但保持不变。我想我可以使用过滤器并根据某些条件修改，甚至基于 foo 标头，但这似乎违反直觉。`foo``bar``Content-Type``Content-Type`

以下是请求的所有标头：

```
POST /gf-ws-1/resources/greetings HTTP/1.1
Accept: zoo
Content-Type: text/xml
foo: bar
User-Agent: Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown
Host: localhost:8080
Connection: keep-alive
Content-Length: 86 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-06T23:09:27.787

如果要自定义整个消息，则必须使用 Service.Mode.MESSAGE 而不是 Service.Mode.PAYLOAD。

Content-Type 是与消息相关的属性。

# windows - 测试自动化：如何模拟电源故障/机器崩溃？

> ID：13910565
> 
> 赞同：7
> 
> 时间：2012-12-17T08:21:17.997
> 
> 标签：windows, testing, automated-tests

我有一个依赖于 SQLite3 的 delphi 应用程序，这是一个宣传为防崩溃的数据库引擎。

到目前为止，我能够使我的整个应用程序防崩溃，但现在我需要模拟残酷的机器重启/电源故障。

显然，为了进行这个测试，每天残酷地重启我的机器 100 次是疯狂的/不切实际的，所以......

**我想知道是否有办法以编程方式/以自动化方式使用 VirtualBox（或类似的东西）模拟电源故障**？

任何其他方法/想法都会受到欢迎，我的目标是确保我的用户数据永远不会损坏。

PS。此问题适用于 Windows XP 或更高版本

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T14:29:40.207

在虚拟盒主机上运行它应该可以解决问题

VBoxManage controlvm (vmname) 重置/关机

> VBoxManage controlvm (vmname) 重置对虚拟机的影响与在真实计算机上按下“重置”按钮的效果相同：虚拟机冷重启，这将立即重启并再次启动客户操作系统。虚拟机的状态没有预先保存，数据可能会丢失。（这相当于在 GUI 的“Machine”菜单中选择“Reset”项。）
> 
> VBoxManage controlvm (vmname) poweroff 对虚拟机的影响与在真实计算机上拉电源线的效果相同。同样，VM 的状态没有预先保存，数据可能会丢失。（这相当于在GUI的“机器”菜单中选择“关闭”项或按下窗口的关闭按钮，然后在对话框中选择“关闭机器”。）

# wordpress - Wordpress XMLRPC (wp.newPost) - 无法正确格式化 post_date

> ID：13910574
> 
> 赞同：0
> 
> 时间：2012-12-17T08:22:12.007
> 
> 标签：wordpress, datetime, xml-rpc

```
 $content = array(
        'post_title' => $title,
        'post_content' => $body,
        'post_status' => 'publish', 
        'post_date' => $pub_date //What's the proper format for the date here?
    )

    $params = array(0,$this->settings['username'],$this->settings['password'],$content);
    $request = xmlrpc_encode_request('wp.newPost',$params);
    $this->Curl->post($this->controller->rpc_url,$request); 
```

我已经为 post_date 格式尝试了许多不同的变体，但都没有奏效。以下是我已经尝试过的所有组合，但它们都不起作用：

```
1) $pub_date = date('Y-m-d H:i:s', time());
2) $pub_date = time();
3) $pub_date = new IXR_Date(time());
4) $pub_date = date('c',time());
5) $datetime = new DateTime('2010-12-30 23:21:46');
   $pub_date = $datetime->format(DateTime::ISO8601); 
```

似乎我测试了所有可能的解决方案，但每当我尝试包含 post_date 时它仍然不想发布。有人可以帮忙吗，我真的坚持这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:18:17.373

弄清楚了：

```
 $publish_date = '20121217T01:47:03Z' //this is the proper format for datetime 
  xmlrpc_set_type($publish_date, 'datetime'); //xmlrpc_set_type must be used on above date so that XML passes it properly as <dateTime.iso8601> instead of <string>

    $content = array(
        'post_title' => $title,
        'post_content' => $body,
        'post_status' => 'publish', 
        'post_date' => $publish_date);

    $params = array(0,$this->settings['username'],$this->settings['password'],$content);
    $request = xmlrpc_encode_request('wp.newPost',$params);
    $this->Curl->post($this->controller->rpc_url,$request); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T17:37:16.430

您可以使用 WordPresse Core 上提供的代码：

```
require '/ROOT/maaal/wp-includes/class-IXR.php';

$timestamp = time(); // Or some value you calculated somewhere
$xmlrpc_date = new IXR_Date($timestamp); 
```

**PS**：$time 可以是 PHP 时间戳或 ISO 时间戳。

# python - 找出会话中有多少未提交的项目

> ID：13910576
> 
> 赞同：0
> 
> 时间：2012-12-17T08:23:01.957
> 
> 标签：python, sqlalchemy

我开发了一个解析大量数据的应用程序，但是如果我在解析完所有数据后提交数据，它会消耗太多内存。但是，我不能每次都提交它，因为它会花费太多的硬盘 I/O。

因此，我的问题是如何知道会话中有多少未提交的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:35:49.957

您可以使用[session.new](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.new)。它是刚刚创建的和未提交的对象的集合。[session.dirty](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.dirty)也很有用。引用文档：

```
# pending objects recently added to the Session
session.new

# persistent objects which currently have changes detected
# (this collection is now created on the fly each time the property is called)
session.dirty

# persistent objects that have been marked as deleted via session.delete(obj)
session.deleted

# dictionary of all persistent objects, keyed on their
# identity key
session.identity_map 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-14T21:21:28.413

您可以使用`session.new`,`session.dirty`和`session.deleted`结合**通过**事件系统跟踪刷新（导致 .new、.dirty 和 .deleted 被重置）来跟踪未提交的更改。有关详细信息，请参阅此处的对话：[https ://groups.google.com/forum/#!topic/sqlalchemy/eGxpQBChXQw](https://groups.google.com/forum/#!topic/sqlalchemy/eGxpQBChXQw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:46:03.150

这是一个典型的缓冲案例。如果磁盘 I/O 过多（或者您不喜欢它导致长时间暂停等），请尝试一个相当大的块并减少它，或者如果您的配置文件在 I/O 调用中显示过多的 CPU 时间，则增加它。

要实现，请使用一个数组，每次“写入”您将一个项目附加到数组中。有一个单独的“刷新”函数来编写整个事情。您检查的每个追加，如果它已达到最大大小，请将它们全部写入并清除数组。最后，调用flush函数写入部分填充的数组。

# google-chrome - Google Chrome for IOS 6 ajax 文件上传进度事件不起作用

> ID：13910580
> 
> 赞同：5
> 
> 时间：2012-12-17T08:23:12.473
> 
> 标签：google-chrome, ios6, xmlhttprequest, progress-bar, ajax-upload

我在适用于 ios6 的 Google Chrome 上的 xmlhttprequest 文件上传进度事件有问题。代码已经在所有桌面浏览器和 Safari(ios 6) 上运行。在谷歌浏览器（ios 6）中上传mov文件也存在问题，尝试上传时我得到文件大小= 0。有什么解决方案吗？

这是我的代码的一部分

```
var xhr = new XMLHttpRequest();
var eventSource = xhr.upload;

xhr.addEventListener("load", this.onUploadComplete(uploadInfo));
xhr.addEventListener("error", this.onUploadError(uploadInfo));
xhr.addEventListener("abort", this.onUploadAbort(uploadInfo));

// changing Url  for preventing ajax call caching( Android , IOS 6)
var ts = Date.now(), rquery = /\?/, rts = /([?&])_=[^&]*/,
ret = uploadUrl.replace( rts, "$1_=" + ts );
uploadUrl = ret + ( ( ret === uploadUrl ) ? ( rquery.test( uploadUrl ) ? "&" : "?" ) + "_=" + ts : "" );

xhr.open('POST', uploadUrl, true);  
eventSource.onprogress = this.onUploadProgress(uploadInfo);
xhr.setRequestHeader("Content-Type", "multipart/form-data");

xhr.setRequestHeader('X-FILE-NAME', file.name);
xhr.send(file); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-02T23:25:37.683

这是 iOS 上 Chrome 的一个已知错误，它不支持进度更新。更多细节在这里：[https ://github.com/blueimp/jQuery-File-Upload/wiki/Browser-support](https://github.com/blueimp/jQuery-File-Upload/wiki/Browser-support)

另外，我已将错误报告给官方错误跟踪器，您可以在[此处查看最新更新](https://code.google.com/p/chromium/issues/detail?id=284039)

2016 年更新：已修复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:27:48.903

我使用plupload遇到了同样的问题。但是，它仅在允许用户选择多个文件时发生。关闭此功能后，chrome 会正确上传文件。

我还没有找到允许多个文件上传的问题的解决方案。

# jquery - jquery将值插入另一个标签或属性

> ID：13910583
> 
> 赞同：-3
> 
> 时间：2012-12-17T08:23:24.867
> 
> 标签：jquery

我确实喜欢创建一个代码，它将**IMAGE的****REL**的url 提供给**A href**。有可能这样做吗？

 ****这就是我的想法。

```
<img src="root/folder/image/path.jpg" rel="url-link.php"> 
```

然后我确实想获取**REL**值并将其传递给

```
<a href="url-link.php" target="_parent"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:29:01.987

你想这样[做](http://jsfiddle.net/yaK25/)

```
​jQuery(document)​.ready(function(){
  var rel = jQuery('img').attr('rel');   
    jQuery('a').attr('href',rel);
  });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:25:30.797

`rel`从您的 img中获取属性：

```
var rel = $('#yourImg').attr('rel');
$('#yourATag').attr('href', rel); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:25:58.223

试试这个：

```
$('a').attr('href',$('img').attr('rel')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T08:26:06.093

试试这个：

```
var rel = $('img').attr('rel');
$('a').attr('href',rel); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T08:26:22.707

您可以使用以下方式访问该属性`.attr()`：

```
var $img = $('#your_img_tag');

var $a = $('<a />', {
    href: $img.attr('rel'),
    target: '_parent'
}); 
```****

# c++ - 具有可变数量参数的函数

> ID：13910584
> 
> 赞同：0
> 
> 时间：2012-12-17T08:23:34.247
> 
> 标签：c++

我的程序中有一个函数来计算给定目录中的文件数。该函数将输入参数作为目录的名称和文件名的扩展名（必须在目录中计算的文件类型）。

我想让它通用，以便函数的调用者可以指定任意数量的文件扩展名，这些文件扩展名可以作为输入参数，然后计算具有这些扩展名的特定文件。

```
void getNames(string dirName,  string fileExtension1, string fileExtension2, string fileExtension3){

vector<string> fileNames = //do some operations

if(fileType == fileExtension1 || fileType==fileExtension2....){
//increase count
}

return fileNames;
} 
```

如何更改此函数以使其接受任意数量的参数，然后在函数内部使用相同的参数来计算文件数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T08:25:52.223

最简洁的方法是传入一个扩展向量

```
void getNames(string dirName, const vector<string>& fileExtensions) 
```

现在你`if`将在一个`for`循环中

```
for(int i = 0; i<fileExtensions.size();i++){

    if(fileType == fileExtension[i]){
        //increase count
        break;// this might be needed to ensure no multiple positives? depending on what you want to do.
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:43:02.833

在您的代码中，您有基于类型的决策：

```
if(fileType == fileExtension1 || fileType==fileExtension2....){
//increase count
}

return fileNames;
} 
```

如果您将有很多文件类型和函数在它们上进行操作，那么每次您需要一些特定于文件类型的操作时，您最终都会得到大量基于类型的决策逻辑（如果您是这种类型，那么就这样做，否则如果您是.. .)。

由于该函数基于“fileType”（扩展名）对“fileName”执行某些操作，因此您可以考虑将两者封装到类 File 中，因为每个文件都有名称和扩展名。然后，您的函数将对一组 File 对象进行操作。如果文件对象集是您在很多地方都在处理的东西，您可以定义一个类，例如 FileSet，然后可以使用向量、列表或任何存储文件的容器来实现该类。这样，您最终将得到一个带有单个参数的函数，例如`const FileSet&`，其余代码将由 File 类处理。无论如何，这不是一个明确的答案，我只建议考虑你的代码的 OOdesign。

# ios - 使用相同的按钮播放/暂停

> ID：13910585
> 
> 赞同：1
> 
> 时间：2012-12-17T08:23:37.607
> 
> 标签：ios, objective-c, audio, playback, resume

如何`play/Pause`使用相同的代码制作按钮。

```
- (IBAction)min:(id)sender 
{
  NSString *path = [[NSBundle mainBundle] pathForResource:@"1min" ofType:@"mp3"];
  AVAudioPlayer *theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
                  theAudio.delegate = self;
                  theAudio.numberOfLoops = -1;
                  [theAudio play];
                  [[NSUserDefaults standardUserDefaults] setObject:@"-" forKey:@"music"]; 
} 
```

如何通过同一个按钮恢复？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T08:30:42.533

使用它来识别按钮状态：

在 .h 文件中进行`theAudio`声明：

```
AVAudioPlayer *theAudio; 
```

在您的方法中：

```
UIButton *button = (UIButton *)sender;

button.selected = !button.selected;

if(button.selected)
{
   // Play
   NSString *path = [[NSBundle mainBundle] pathForResource:@"1min" ofType:@"mp3"];
   theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
   theAudio.delegate = self;
   theAudio.numberOfLoops = -1;
   [theAudio play];
   [[NSUserDefaults standardUserDefaults] setObject:@"-" forKey:@"music"];
}
else
{
  // Pause
  [theAudio pause];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:30:10.277

创建一个布尔值，例如`buttonIsPlayButton`. 如果按钮是播放按钮，则在开始时将其设置为 true。然后当按下按钮时，将其设置为 false。每次按下按钮时，您都应该根据布尔值更改图像。

# sql - 使用 .extra() 的 django 出现错误“对于作为表达式一部分的 SELECT 只允许一个结果”

> ID：13910588
> 
> 赞同：0
> 
> 时间：2012-12-17T08:23:47.417
> 
> 标签：sql, django

我正在尝试使用`.extra()`查询返回超过 1 个结果的位置，例如：

`'SELECT "books_books"."*" FROM "books_books" WHERE "books_books"."owner_id" = %s' % request.user.id`

我收到一个错误：`only a single result allowed for a SELECT that is part of an expression`

使用 sqlite3 在开发服务器上尝试。有人知道如何解决这个问题吗？还是我的查询有误？

编辑：

我正在使用[django-simple-ratings](https://github.com/coleifer/django-simple-ratings)，我的模型是这样的：

```
class Thread(models.Model):
    #
    #
    ratings = Ratings() 
```

我想显示每个`Thread`的评分以及用户是否已经评分。对于 2 个项目，它将命中 6 次，实际命中 1 次，`Thread`访问 2次`ratings`。查询：

```
 threads = Thread.ratings.order_by_rating().filter(section = section)\
                .select_related('creator')\
                .prefetch_related('replies')

    threads = threads.extra(select = dict(myratings = "SELECT SUM('section_threadrating'.'score') AS 'agg' FROM 'section_threadrating' WHERE 'section_threadrating'.'content_object_id' = 'section_thread'.'id' ",) 
```

然后我可以打印每个`Thread`人的评分，而不需要更多地访问数据库。对于第二个查询，我添加：

```
 #continue from extra 
   blahblah.extra(select = dict(myratings = '#####code above####',
                                voter_id = "SELECT 'section_threadrating'.'user_id' FROM 'section_threadrating' WHERE ('section_threadrating'.'content_object_id' = 'section_thread'.'id' AND 'section_threadrating'.'user_id' = '3') ")) 
```

硬编码`user_id`. 然后当我在这样的模板上使用它时：

```
{% ifequal threads.voter_id user.id %}
#the rest of the code 
```

我收到一个错误：`only a single result allowed for a SELECT that is part of an expression`

如果还不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:55:38.120

问题出在查询中。通常，当您编写子查询时，它们**必须**只返回 1 个结果。所以一个像这样的子查询`voter_id`：

```
select ..., (select sectio_threadrating.user_id from ...) as voter_id from .... 
```

无效，因为它可以返回多个结果。如果你确定它总是返回一个结果，你可以使用`max()`or`min()`聚合函数：

```
blahblah.extra(select = dict(myratings = '#####code above####',
                             voter_id = "SELECT max('section_threadrating'.'user_id') FROM 'section_threadrating' WHERE ('section_threadrating'.'content_object_id' = 'section_thread'.'id' AND 'section_threadrating'.'user_id' = '3') ")) 
```

这将使子查询始终返回 1 个结果。

删除该硬代码，您希望在此处检索什么 user_id？也许您不能仅使用 SQL 减少到 1 个用户。

# asp.net-mvc - 在 MVC 2 项目中带前缀的 Spark 视图引擎性能？

> ID：13910594
> 
> 赞同：1
> 
> 时间：2012-12-17T08:24:25.510
> 
> 标签：asp.net-mvc, asp.net-mvc-2, spark-view-engine

我在我的 MVC 2 项目中使用火花视图引擎。默认情况下，Spark 标签是不合格的，没有前缀。我的问题是：在我的 web.config 文件中添加前缀是否可以获得性能？换句话说，火花文件是否使用前缀编译得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:25:01.713

使用前缀编译不会更快或更慢。

Spark 不仅输出 HTML，而且同样能够输出有效的 XML，在后一种情况下，您经常需要限定标签以维护有效的 XML。

这些都不会影响编译时间。但是，无论如何，建议您为生产环境[预编译](http://sparkviewengine.com/documentation/precompiling)视图以提高性能。

# jquery - 如何使用 ajax 使 Twitter Bootstrap Collapse 在动态加载的 html 上工作

> ID：13910596
> 
> 赞同：10
> 
> 时间：2012-12-17T08:24:41.833
> 
> 标签：jquery, twitter-bootstrap

我正在使用**ajax**调用加载 html，这个 html 有**Bootstrap Collapse**。问题是**折叠不起作用**，如果单击它将展开但不会再次折叠。

为了检查我是否做错了什么，我将相同的代码放在静态页面上（不是使用 ajax 加载的），它工作正常。所以它似乎只与动态加载的html有关。

我尝试使用手动启用折叠

```
$(".collapse").collapse() 
```

但仍然是同样的问题。

我想我需要使用 jquery 的`live() / on()`方法，因为 html 是动态的，但不确定我该如何调用`$(".collapse").collapse()`，因为我认为它只适用于事件，还是我需要做的其他事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T09:54:01.853

我建议你打电话

```
 $(".collapse").collapse() 
```

附加动态html后，在ajax的成功函数内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T10:57:08.200

我的解决办法是：

```
 $('.collapse').on('show', function () {
    var $this = $(this);
    if($this.attr('data-href'))
    {
        $this.html($.getJSON($this.attr('data-href'),function(data){
            $this.html(data.html);
            $this.removeAttr('style');
        }));
    }
    }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-02T19:15:31.313

只需在 ajax 成功事件上执行此操作。

```
$('[data-toggle="collapse"]').click(function(e){
      e.preventDefault();
      var target_element= $(this).attr("href");
      $(target_element).collapse('toggle');
      return false;
}); 
```

# c# - 如何获取在 IE 中打开的网页的 XML 代码（不使用 WebRequest）？

> ID：13910599
> 
> 赞同：0
> 
> 时间：2012-12-17T08:25:02.640
> 
> 标签：c#, html, xml

我正在尝试从已在 IE 中打开的 wabpage 获取 XML 文本。由于目标页面的安全性（带有证书等的冗长无聊的故事），不允许 Web 请求。我使用方法遍历所有打开的页面，如果发现与页面的 URI 匹配，我需要获取它的 XML。前段时间我需要在**body**标签之间获取一个HTML代码。我对**IHTMLDocument2**使用了这样的方法：

```
private string GetSourceHTML()
{            
    Regex reg = new Regex(patternURL);
    Match match;
    string result;
    foreach (SHDocVw.InternetExplorer ie in shellWindows)
    { 
        match = reg.Match(ie.LocationURL.ToString());
        if (!string.IsNullOrEmpty(match.Value))
        {
            mshtml.IHTMLDocument2 doc = (mshtml.IHTMLDocument2)ie.Document;
            result = doc.body.innerHTML.ToString();
            return result;
        }                
    }
    result = string.Empty;
    return result;            
} 
```

所以现在我需要获取目标页面的完整 XML 代码。我用谷歌搜索了很多，但没有发现任何有用的东西。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:00:03.103

你试过这个吗？它应该获得 HTML，希望您可以将其解析为 XML？

*   [检索 HTML 源代码](http://www.codeproject.com/Articles/8923/Retrieving-the-HTML-source-code)

# javascript - facebook登录脚本停止工作

> ID：13910608
> 
> 赞同：0
> 
> 时间：2012-12-17T08:25:36.107
> 
> 标签：javascript, facebook

我不知道我的脚本发生了什么，它运行良好，然后它突然不返回电子邮件（返回未定义），但名字、姓氏和用户名工作正常。

这是代码

```
 <script type="text/javascript">

      // initialize the library with the API key

      FB.init({  appId: 'XXXXXXXXXX',status: true, cookie: true, xfbml: true, oauth: true });

      function login() {
          FB.login(function (response) {
              if (response.authResponse) {
                  console.log('Welcome!  Fetching your information.... ');

                  FB.api('/me', function (response) {

                      console.log('Good to see you, ' + response.name + '.email :' + response.email);
                      console.log('Good to see you, ' + ",gender:" + response.gender + "another : " + response.first_name);
                      console.log('Good to see you, ' + response.username + '.last_name :' + response.last_name);
                    //  console.log('Good to see you, ' + response);
                  }, { scope: 'email' });
              } else {
                  console.log('User cancelled login or did not fully authorize.');
              }
          });
      }
  </script> 
```

我没有改变任何东西，可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:32:15.560

要获取电子邮件，`{ scope: 'email' }`需要传递给[`FB.login`](https://developers.facebook.com/docs/reference/javascript/FB.login/)，而不是作为参数传递给`FB.api`。

```
FB.login(function (response) {
   ...
}, { scope: 'email' }); 
```

# opengl - glReadPixel 像素颜色

> ID：13910611
> 
> 赞同：2
> 
> 时间：2012-12-17T08:25:47.910
> 
> 标签：opengl, sdl

```
void render(){
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glBegin(GL_QUADS);
glColor3f( 0, 255, 0 ); //color it green
glVertex3f( -100, 0,  100  );
glVertex3f( -100, 0, -100  );
glVertex3f( 100,  0, -100 );
glVertex3f( 100,  0, 100 );
glEnd();

int tmpx, tmpy;
GLint pixel_color[3];
SDL_GetMouseState(&tmpx, &tmpy);

glReadPixels(tmpx, win_width - tmpy, 1, 1, GL_RGB, GL_INT , &pixel_color[0]);
printf("PIXEL: %d - %d - %d\n", pixel_color[0], pixel_color[1], pixel_color[2]);

SDL_GL_SwapBuffers();
} 
```

使用上面的渲染代码，我试图获取鼠标指向的像素的 rgb 颜色。平面颜色为全绿色 (255)，但 glReadPixels 返回的值是 2147483647 而不是 255。

我已经尝试过更改类型，但它从未返回我期望的值。如何让它返回由 glColor 设置的相同值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:36:05.000

改变

```
GLint pixel_color[3]; 
```

至

```
GLubyte pixel_color[3]; 
```

和改变

```
glReadPixels(tmpx, win_width - tmpy, 1, 1, GL_RGB, GL_INT , &pixel_color[0]); 
```

至

```
glReadPixels(tmpx, win_width - tmpy, 1, 1, GL_RGB, GL_UNSIGNED_BYTE , &pixel_color[0]); 
```

# objective-c - NSNotificationCenter removeObserver：在 dealloc 和线程安全中

> ID：13910613
> 
> 赞同：6
> 
> 时间：2012-12-17T08:25:54.173
> 
> 标签：objective-c, memory-management, automatic-ref-counting, nsnotificationcenter

我正在使用 ARC，我正在调用`[[NSNotificationCenter defaultCenter] removeObserver:someObserver];`观察者的`dealloc`.

来自[NSNotificationCenter 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

> 确保在 notifyObserver 或 addObserver:selector:name:object: 中指定的任何对象被释放之前调用此方法（或 removeObserver:name:object:）。

NSNotificationCenter 不保留观察者。

Q1：`NSNotificationCenter`线程安全吗？

如果观察者被释放（并从通知中心删除观察者），另一个线程同时发布通知。

我遇到随机崩溃，我怀疑是这种情况。

Q2：这种情况可能吗？

Q3：它会导致`EXC_BAD_ACCESS`？

Q4：那么，调用`[[NSNotificationCenter defaultCenter] removeObserver:someObserver];`观察员安全`dealloc`吗？

Q5：如果不安全，我应该在哪里打电话`removeObserver:`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-05T00:13:19.160

我自己只是偶然发现了这个问题：我在发送过程中收到了一个通知（这总是发生在主线程中），而对象正在从后台线程中释放。我通过简单地`removeObserver`在主线程中执行并等待来修复它：

```
- (void)removeNotificationCenterObserver
{
    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
    [notificationCenter removeObserver:self];
}

- (void)dealloc
{
    [self performSelectorOnMainThread:@selector(removeNotificationCenterObserver) withObject:self waitUntilDone:YES];
} 
```

这会一直等到当前运行循环周期结束并在下一个运行循环周期开始时执行此消息。这可确保任何仍在运行的功能都将完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T22:11:02.917

我想知道同样的事情，但我找不到它的记录。这就是我认为正在发生的事情。

`removeObserver:`不是你想要的线程安全的。

考虑以下情况。在线程 A 上执行代码时释放对观察者的最后一个引用。线程 A 将调用观察者的`dealloc`方法。同时，被观察对象`[NSNotificcationCenter postNotificationName:object:]`从线程 B 执行 a。这导致了不可避免的竞争条件。也就是说，当您的对象在其方法中时，通知将*在飞行中。*`dealloc`

```
- (void)init {
    ...
    [[NSNotificcationCenter defaultCenter] addObserver:self
                                              selector:@selector(callback:)
                                                  name:@"whatever"
                                                object:nil];
    ...
}

- (void)dealloc {

    // If the observed object posts the notification on thread B while 
    // thread A is here, there's a race! At best, thread B will be
    // in callback: while thread A is here in dealloc. That's probably
    // not what you expect. The worst case is that thread B won't make
    // make it to callback: until after thread A completes the dealloc
    // and the memory has been freed. Likely crash!

    [[NSNotificationCenter defaultCenter] removeObserver:self];

    // If the observed object does the post when thread A is here,
    // you'll be fine since the observation has been removed.
} 
```

对于只观察其他主线程对象的主线程对象来说，这不是问题，因为根据定义，您无法进入我描述的线程 A 和 B 场景。

对于多线程情况，保证您避免该问题的唯一方法是确保观察在观察者的引用计数达到 0**之前**停止。如果其他人负责观察者的生命周期（即您有任何类型的`term`或`close`方法） ， 这很简单。如果没有，我不知道解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T12:51:14.347

是的，`NSNotificationCenter`不保留观察者，但它的调度表中仍然有一个指向它的指针。

Q1：引用 Apple 文档

> 定期通知中心在发布通知的线程上发送通知。分布式通知中心在主线程上传递通知。有时，您可能需要在由您而不是通知中心确定的特定线程上传递通知。例如，如果在后台线程中运行的对象正在侦听来自用户界面的通知，例如窗口关闭，您希望在后台线程而不是主线程中接收通知。在这些情况下，您必须捕获在默认线程上传递的通知并将它们重定向到适当的线程。

Q2,3：是的。

Q4,5：AFAIK 它是安全的，除非你偶然发现循环引用。我通常在`-viewWillAppear:`/中`-viewWillDisappear:`为 UIViewControllers 和`-init`/`dealloc`为其他类添加/删除。

# java - 如何使用转换 jar (flagstone) 在 SWF 中嵌入影片剪辑

> ID：13910615
> 
> 赞同：0
> 
> 时间：2012-12-17T08:25:57.637
> 
> 标签：java, video, flash, transform

自从过去 2 天以来，我一直被困在一个小问题上。我正在尝试从图像创建电影，并且电影将具有单独的开始和结束图像。声音将在第一张图像之后开始，并将在结束图像之前继续。根据声音的长度，将中间图像（总数不固定）设置为帧率。我想拥有特定固定持续时间的第一张和最后一张图像，以及取决于音频长度的中间图像。现在，由于帧速率是由声音的长度决定的，长度越大意味着帧速率越小，因此第一次和最后一次的时间较长。为了解决这个问题，我认为我应该创建一个单独的影片剪辑（用于开始和结束图像）并添加到原始影片中。但是我' 我不能这样做？请让我知道如何将影片剪辑添加到主影片。我正在使用来自石板的转换 api。

# jsf-2 - JSF2 中的 setFocus (Mojarra)

> ID：13910619
> 
> 赞同：2
> 
> 时间：2012-12-17T08:26:10.803
> 
> 标签：jsf-2

我想在页面加载时将焦点设置在 JSF2(Mojarra) 中的 commandButton 字段上。如何在不使用 Javascript 的情况下实现这一点？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:25:35.950

> *如何在**不**使用 Javascript 的情况下实现这一点？*

这只有在浏览器支持 HTML5 时才有可能。然后，您可以使用新的 HTML5`autofocus`属性，以便最终得到

```
<input type="submit" value="Submit" autofocus="true" /> 
```

`<h:commandButton>`JSF组件不支持此属性。`<h:commandButton autofocus="true">`JSF本身也不支持向 JSF 组件添加任意属性，它会被完全忽略。您基本上需要创建一个支持新属性的自定义标签/组件。

无论如何，您也可以使用自定义[`RenderKit`](http://docs.oracle.com/javaee/6/api/javax/faces/render/RenderKit.html)来编写不受支持的属性。JSF 实用程序库[OmniFaces](http://omnifaces.org)从 1.3 版开始就是[`Html5RenderKit`](http://showcase.omnifaces.org/renderkits/Html5RenderKit)为了这个目的。

```
<h:commandButton value="Submit" autofocus="true" /> 
```

同样，这仅适用于支持 HTML5`autofocus`属性的浏览器。

# html - JSON 或 HTML：哪个输出性能更好？

> ID：13910635
> 
> 赞同：0
> 
> 时间：2012-12-17T08:27:43.000
> 
> 标签：html, ruby, json, performance

我正在考虑通过将渲染移至客户端来提高网站性能。当前堆栈是：`(router, sphinx, db) + HTML`。我正在考虑将其更改为：`(router, sphinx, db) + JSON`.

所有客户端都运行 i7 处理器，他们不太关心客户端渲染性能。我们还有客户端应用程序可以连接到 resful JSON API（这里不讨论客户端与服务器端渲染）。

1) 在服务器上渲染大约需要 20% 的时间（80% 用于路由、sphinx、db）。我听说输出 JSON 大约需要输出 HTML 一半的时间，所以我认为这将是 10% 的改进，而这 10% 可以用于数据处理。我说得对吗？

2) 我相信一台服务器 10% 的改进意味着，为了让一个拥有 100 台物理服务器的大型应用程序获得相同数量的性能，我们需要少 10% 的服务器：在这种情况下是 90 台而不是 100 台。这是正确的吗？

3) 如何在 Ruby 中获得最佳性能以输出 JSON 而不是任何其他格式？

4) 以日常场景为例，如果我们输出 JSON 而不是 HTML，性能会有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:07:26.367

1, 2) 可能是的，但可能有许多因素可能导致性能提升低于您的预期。就像，如果瓶颈是 IO，并且由于 HTML 创建可能受 CPU 限制，那么减少 CPU 负载只会让 CPU 更加空闲。真正找出答案的唯一方法是在运行并行请求处理时拥有可靠的基准，并获得硬数字。

此外，花时间开发客户端渲染可能比仅仅支付更多服务器容量更昂贵......摩尔定律仍然成立，为这么小的改进进行这种优化可能不值得开发成本。 .. 可能更好地将这些开发资源集中在可以增加收入的事情上，而不是试图节省少量资金。

3) JSON 生成可能使用本机库，而 HTML 生成发生在 Ruby 脚本代码中。在低级操作中，本机代码通常比解释（而非 JIT 编译）代码快 1-2 个数量级。它的级别越高，差距越小，因此如果“生成 JSON”是高级操作，那么从 Ruby 或从编译语言代码调用它同样快。

4）好吧，我不确定我是否理解这个问题，但请参阅答案 1,2 ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:37:25.543

请参阅[http://openmymind.net/2012/5/30/Client-Side-vs-Server-Side-Rendering/](http://openmymind.net/2012/5/30/Client-Side-vs-Server-Side-Rendering/) 也许这会对您有所帮助

为您找出特定情况的最佳方法是实施它并进行测试。您可以使用 new relic 和 google 分析（也许还有其他）来查看客户端性能和渲染时间和体验

# javascript - 使用 servlet 注释作为 url 时的 HTTP 状态 404

> ID：13910638
> 
> 赞同：0
> 
> 时间：2012-12-17T08:28:17.170
> 
> 标签：javascript, jakarta-ee, browser, web, ejb-3.1

我的js代码是这样的：

```
window.location.href = "servletAnnotation?"+paramString; 
```

servletAnnotation 是一个 webservlet 注释。Firefox 和 Chrome 都运行成功。IE 显示 HTTP 状态 404。为什么 IE 无法识别 url？我怎样才能使它成功运行？

# python - 忽略标签主体的 Python XML 解析

> ID：13910642
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:28:29.013
> 
> 标签：python, xml, linux

我想在 python 中解析一个 XML 文件并断言一些标签顺序。我已经开始了`ElementTree`。这是我的代码：

```
import xml.etree.ElementTree as ET
tree = ET.parse('test.xml')
root = tree.getroot() 
```

这是`test.xml`：

```
<a>
<b>
for (i=0; i<10; i++){
    k++;
}
</b>
</a> 
```

问题是，解析器卡在`for statement`了以下错误：

```
xml.parsers.expat.ExpatError: not well-formed (invalid token): line 3, column 12 
```

我需要解析器忽略标签的主体（忽略任何内容`<b></b>`）。有没有办法这样做？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:33:28.740

您的 XML 标记是无效的 XML 标记！

您需要将有问题的文本包含在 CDATA 部分中。

[http://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

# android - Android 键盘建议 - 不显示数字

> ID：13910643
> 
> 赞同：1
> 
> 时间：2012-12-17T08:28:28.823
> 
> 标签：android, android-softkeyboard

我想为 Android 键盘启用建议。目前我已经通过设备启用了它。我应该在哪里编写代码以启用相同的功能？

而且，在建议中是否有可能添加数字？如果不是建议至少看到我输入的数字？我想要这个，因为文本框被键盘覆盖，我无法看到我正在输入的文本。那么，是否可以启用建议，使我输入的每个单词都在建议窗口中可见？

正如您在下面看到的，在我在键盘上键入后，数字 1234 出现了。但是在设备上，此建议不会出现。

![截图](../Images/57b60c23d3255522bb2456970578bc7c.png)

图像应该出现在正上方。

# f# - 未定义命名空间或模块“Lab2”

> ID：13910644
> 
> 赞同：2
> 
> 时间：2012-12-17T08:28:30.390
> 
> 标签：f#, f#-interactive

我查看了许多类似的问题，并在谷歌上搜索了几个小时，但我一无所获。

我正在尝试从我的 Program.fs 文件访问我的 Tree.fs 文件中的二叉树模块，并且在资源管理器窗口中，我已按照几乎所有其他文件中的建议将 Tree.fs 文件移到 Program.fs 文件上方类似的问题，但这直到对我不起作用。

我的 Tree.fs 文件

```
namespace Lab2

type Elem = System.IComparable

type Tree = E | T of Tree * Elem * Tree

module BinaryTree =
    let emptyTree = E

    let rec add = function
                    | x, E -> T(E, x, E)
                    | x, T(a, y, b) when x < y -> T(add(x, a), y, b)
                    | x, T(a, y, b) when y < x -> T(a, y, add(x, b))
                    | _, s -> s

    let rec addList = function
                        | [], T(a, y, b) -> T(a, y, b)
                        | x::xs, T(a, y, b) when x < y -> addList(xs, T(add(x, a), y, b))
                        | x::xs, T(a, y, b) when y < x -> addList(xs, T(a, y, add(x, b)))
                        | _, s -> s

    let rec preorder = function
                        | T(a, y, b) when a <> E -> y::preorder a
                        | T(a, y, b) when b <> E -> y::preorder b
                        | _ -> []

    let rec inorder = function
                        | T(a, y, b) when a <> E -> y::inorder a
                        | T(a, y, b) when b <> E -> y::inorder b
                        | _ -> []

    let rec postorder = function
                        | T(a, y, b) when b <> E -> y::preorder b
                        | T(a, y, b) when a <> E -> y::preorder a
                        | _ -> []

    let rec treeToString = function
                            | T(a, y, b) when a <> E -> "(node " + y.ToString() + treeToString a
                            | T(a, y, b) when b <> E -> y.ToString() + treeToString b + ")"
                            | _ -> "Empty" 
```

我的 Program.fs 文件

```
module Lab2.Program

open Lab2.BinaryTree

let tree = addList([5; 2; 1; 6; 7], emptyTree);;

let inorder_tree = inorder(tree);;

let char_tree = addList(['e';'b';'a';'f';'g'], emptyTree);;

let inorder_char_tree = inorder(char_tree);;

let print = treeToString(char_tree);; 
```

我试过不在我的两个文件中使用 Lab2 命名空间，而是只使用两个文件作为模块，但这仍然给我同样的错误。

我的代码中没有蓝线或红线，在调试之前没有错误

该错误仅发生在以下行

```
let tree = addList([5; 2; 1; 6; 7], emptyTree);; 
```

所以在调试时它看起来像这样

```
Program.fs(66,6): error FS0039: The namespace or module 'Lab2' is not defined
> val inorder_tree : Elem list = []
> val char_tree : Tree = E
> val inorder_char_tree : Elem list = []
> val print : string = "Empty" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:53:14.160

如果您编译并运行该项目，则没有错误。根据您的结果，我猜您手动将两个文件的内容复制到 F# Interactive 中，除了带有命名空间和模块声明的第一行。在这种情况下，`Lab2`F# Interactive 不知道命名空间，因此会出现错误消息。一个快速的解决办法是改变

```
open Lab2.BinaryTree 
```

到

```
open BinaryTree 
```

它适用于两者`fsc`，`fsi`因为`Program`和`BinaryTree`模块共享父命名空间`Lab2`。

但是，您在运行项目和在 F# Interactive 中执行项目之间感到困惑。一个常见的解决方案是创建一个`Tree.fsx`文件并在其中加载相应的模块：

```
#load "Tree.fs"    
open Lab2.BinaryTree

let tree = addList([5; 2; 1; 6; 7], emptyTree);;
let inorderTree = inorder(tree);;
let charTree = addList(['e';'b';'a';'f';'g'], emptyTree);;
let inorderCharTree = inorder(charTree);;
let print = treeToString(charTree);; 
```

# java - 如何在java中将16位、tiff、灰度图像转换为32位、tiff、灰度图像？

> ID：13910645
> 
> 赞同：1
> 
> 时间：2012-12-17T08:28:30.740
> 
> 标签：java, image

我正在使用 netbeans 平台在 java 中制作 DesktopApp。在我的应用程序中，我使用了 16 位、tiff、灰度图像并对该图像进行了处理。现在，我想使用 16 位、tiff、灰度图像（或 16 位图像的数据）制作 32 位、tiff、灰度图像。那么如何在 java 中将 16 位图像转换为 32 位图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:04:41.077

您需要做的是将其通过图像处理器对象，然后对其进行校准。可能是这样的：

```
import java.awt.*;
import java.awt.image.*;
import ij.*;
import ij.gui.*;
import ij.measure.*;

/** converting  an ImagePlus object to a different type. */
public class ImageConverter {
    private ImagePlus imp;
    private int type;
    private static boolean doScaling = true;

    /** Construct an ImageConverter based on an ImagePlus object. */
    public ImageConverter(ImagePlus imp) {
        this.imp = imp;
        type = imp.getType();
    }

    /** Convert your ImagePlus to 32-bit grayscale. */
    public void convertToGray32() {
        if (type==ImagePlus.GRAY32)
            return;
        if (!(type==ImagePlus.GRAY8||type==ImagePlus.GRAY16||type==ImagePlus.COLOR_RGB))
            throw new IllegalArgumentException("Unsupported conversion");
        ImageProcessor ip = imp.getProcessor();
        imp.trimProcessor();
        Calibration cal = imp.getCalibration();
        imp.setProcessor(null, ip.convertToFloat());
        imp.setCalibration(cal); //update calibration
    }

    /** Set true to scale to 0-255 when converting short to byte or float
        to byte and to 0-65535 when converting float to short. */
    public static void setDoScaling(boolean scaleConversions) {
        doScaling = scaleConversions;
        IJ.register(ImageConverter.class); 
    }

    /** Returns true if scaling is enabled. */
    public static boolean getDoScaling() {
        return doScaling;
    }
} 
```

这样，您的校准图像将设置为 32 位，无论输入是什么。不过记得导入正确的罐子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:07:45.487

如果您的 TIFF 作为 BufferedImage 加载，您可以通过以下方式减少它：

```
BufferedImage convert(BufferedImage image) {

    ColorSpace colorSpace = ColorSpace.getInstance(ColorSpace.CS_GRAY);

    ColorModel colorModel = new ComponentColorModel(
        colorSpace, false, false, Transparency.OPAQUE,
        DataBuffer.TYPE_USHORT);

    BufferedImageOp converter = new ColorConvertOp(colorSpace, null);
    BufferedImage newImage =
        converter.createCompatibleDestImage(image, colorModel);
    converter.filter(image, newImage);

    return newImage;
} 
```

# json - 任何将返回预设 JSON 字符串的模拟工具？

> ID：13910650
> 
> 赞同：2
> 
> 时间：2012-12-17T08:28:55.503
> 
> 标签：json, backbone.js

我想要一个可以模拟 RESTFul 服务器的工具，它应该返回我为特定 URL 映射的预设 JSON 数据。

例如：如果我调用 [http://ccccc.com/api/users](http://ccccc.com/api/users) ，模型工具应该以 JSON 格式返回用户（我已经预设）。

当我使用骨干网或 jquery 创建客户端代码以使用 ajax 调用取回模型时，这可能很有用。

对这种样机工具有什么建议吗？

注意：创建一个读取传入 GET url 并从文件中读取预设 JSON 并将其输出为 JSON 字符串的 servlet 是可能的。但我正在寻找一种可以为我做这件事的工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T08:56:00.800

[Sinon.js](http://sinonjs.org/)是您正在寻找的。特别是[sinon.fakeServer](http://sinonjs.org/docs/#fakeServer) API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T16:58:11.743

[https://github.com/homerquan/kakuen](https://github.com/homerquan/kakuen)

只需编辑文本文件即可模拟 RESTful Web 服务，例如，

GET_ *#book#123#authors.json ==> GET /book/123/authors POST* _#book@id=123.json ==> POST /book?id=123

对于 json，支持基于模式的模型，例如在 sample_server/mocks/GET__#search@q=js.json 例如，

```
"@KAKUEN_ITEM(offset)": {
    "@KAKUEN_TYPE": "natural",
    "@KAKUEN_PARAM": {
        "min": 1,
        "max": 20
    }
} 
```

将被抵消：12

# ffmpeg - 将 RTSP 与计算机时间同步

> ID：13910655
> 
> 赞同：1
> 
> 时间：2012-12-17T08:29:17.617
> 
> 标签：ffmpeg, h.264, rtsp, libav

我成功地使用 libav 从 RTSP 网络源接收视频流。关键是我需要将我的计算机时间与视频捕获同步，这意味着我需要知道我的计算机的哪个日期时间对应于第一帧（pts = 0）。我的 API 调用如下：

```
av_register_all()
avcodec_register_all()
avformat_network_init()
avformat_open_input()
avformat_find_stream_info()
av_read_play()
loop
  av_init_packet()
  av_read_frame()
  [...]
  av_free_packet
end loop 
```

通过上面的调用，我成功读取了帧，但我确实需要知道如何知道与第一帧相对应的确切绝对日期时间，因为它的 pts 为 0。也许我可以使用 time() 函数或 GetSystemTime （我正在使用 Windows）在上述两个调用之间，但并不真正知道 libav 是如何工作的。

# android - Android WebView__使用与透明背景的HTML5视频标签冲突？

> ID：13910656
> 
> 赞同：2
> 
> 时间：2012-12-17T08:29:27.057
> 
> 标签：android, video, webview

我正在尝试在 Android 上制作一个浏览器，它扩展了 WebView 类。

**我的浏览器有两个功能：**

**1.可以播放html5视频标签。** （我启用了 HardwareAccelerate 和 setWebChromeClient，它在 Android 4.0 上运行良好。）

**2.浏览器必须有透明背景。** （在 Android 4.0 上，仅 setBackground(0) 是不够的。我还必须使用 setLayerType(LAYER_TYPE_SOFTWARE, null)。）

但是当我使用 setLayerType(LAYER_TYPE_SOFTWARE, null) 时，视频标签无法播放。这意味着 setLayerType(LAYER_TYPE_SOFTWARE, null) 禁用 HardwareAccerlarate 因此视频标签无法工作。

那么我可以考虑在 Android 4.0 上，这两个功能是冲突的吗？有什么解决方法吗？

```
//set BackGroundColor
setBackgroundColor(Color.argb(0, 0, 0, 0));
if(android.os.Build.VERSION.SDK_INT>=11){
    setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);
}

//set WebChromeClient
setWebChromeClient(new WebChromeClient()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:41:24.250

我不得不说，似乎没有人像我一样遇到过这个问题。所以我认为我的问题中提到的两个功能确实是相互矛盾的。

# ios - iOS - 键盘不显示

> ID：13910657
> 
> 赞同：0
> 
> 时间：2012-12-17T08:29:39.827
> 
> 标签：ios, keyboard, uitextfield

这是一个有点奇怪的错误。

我有一个登录屏幕，它接受两个内部的用户名和密码`UITableViewCells`。当应用程序首次加载时，此屏幕工作正常。

它加载另一个允许用户注销的屏幕 - 这将重新加载原始屏幕并且用户能够再次登录（或使用不同的用户名和密码）。

*如果用户再次*注销，原来的屏幕会出现，但`UITextFields`与用户名和密码相关的屏幕*将不起作用*。 `textFieldDidBeginEditing`没有被调用 - 即使它在前两次尝试中被成功调用。

“加载屏幕” .XIB 文件每次都会重新加载 - 所以我根本不明白为什么第三次会导致问题？

任何建议将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:56:33.407

对我来说，这看起来像是时间问题。它可能在更改（转换）视图时发生。一些你的文本字段不能成为第一响应者。

我会检查谁是第一响应者？

您可以在注销之前尝试为负责注销的视图调用 resignFirstResponder 吗？

另一个问题可能是您的手指没有完全触摸文本字段而是表格视图单元格。

你实现了 tableView:didSelectRowAtIndexPath: 吗？

# android - Android SOAP 客户端中的 CXF WSS4j 拦截器

> ID：13910658
> 
> 赞同：3
> 
> 时间：2012-12-17T08:29:41.463
> 
> 标签：android, soap, cxf, interceptor, wss4j

我正在使用 ksoap2 库在 Android 手机上制作一个肥皂客户端，我需要使用类似 cxf 的 WSS4J 拦截器之类的东西，如下代码：

```
private WSS4JInInterceptor securityInInterceptor;
private WSS4JOutInterceptor securityOutInterceptor;
Object result = null;

/* Other code */

Client cxfClient = ClientProxy.getClient(result);
/* this is interceptors */
cxfClient.getOutInterceptors().add(securityOutInterceptor);
cxfClient.getInInterceptors().add(securityInInterceptor); 
```

任何人都可以建议我如何在 Android 上制作这个（可能使用 ksoap2 库或其他库）？或者，有人知道适用于 Android 的 cxf 版本吗？谢谢！

# eclipse - eclipse中的日志文件中的错误

> ID：13910660
> 
> 赞同：0
> 
> 时间：2012-12-17T08:29:47.063
> 
> 标签：eclipse, logfiles

请看我之前的问题：

[下载后Eclipse不工作](https://stackoverflow.com/questions/13909468/eclipse-is-not-working-after-download)

我删除了 config 文件夹，当我按下 eclipse 是一个新的创建一个新的和不同的问题：

在日志文件上出现这样的问题：

```
!ENTRY org.eclipse.osgi 4 0 2012-12-17 10:27:25.247
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

这是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:05:48.570

尝试将此添加到`config.ini`文件的末尾。

```
Dosgi.bundles=org.eclipse.equinox.common@2:start,org.eclipse.update.configurator@3:start,org.eclipse.core.runtime@ 
```

**编辑：**

进一步的参考[就在这里](http://www.volker-wegert.de/en/node/65#comment-197)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:14:23.993

最后我解决了这个问题：

我在配置文件中添加了 JVM 的位置。

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
C:\Program Files\Java\jdk1.7.0_07\bin\javaw.exe
-vmargs
-Xms40m
-Xmx512m 
```

谢谢大家的帮助

# php - FB API Cookie 标头错误

> ID：13910661
> 
> 赞同：0
> 
> 时间：2012-12-17T08:29:52.053
> 
> 标签：php, cookies, http-headers, facebook-php-sdk

我有以下代码：

```
require '../lib/facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
'appId'  => '143944345745133',
'secret' => 'xxxxxxxx',
'cookie' => true,
));

$user = $facebook->getUser();

if ($user) {
   try {
      $user_profile = $facebook->api('/me');
   } catch (FacebookApiException $e) {
      $user = 0;
   }
} 
if ($user) { 
  setcookie('loggedUserId', $user, time()+36000);
  setcookie('loggedUserName', $user_profile['name'], time()+36000);
} else {
  setcookie('loggedUserId', '', time()-3600);
  setcookie('loggedUserName', '', time()-3600);
} 
```

我在我的 php 错误日志文件中得到错误：

```
[17-Dec-2012 06:11:34 UTC] There exists a cookie that we wanted to clear that we 
couldn't clear because headers was already sent. Make sure to do the 
first API call before outputing anything. 
```

请帮我修复它。结果用户体验是我登录后需要重新加载页面才能真正登录。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:33:28.140

您的代码中的某些内容在调用 setcookie 之前会输出某些内容。它可能是一条调试消息。甚至在打开 <?php 标记之前有一个空行。

# java - 如何使用 Java FX 面板在 Web 视图中突出显示给定的单词

> ID：13910665
> 
> 赞同：0
> 
> 时间：2012-12-17T08:30:04.957
> 
> 标签：java, javafx, javafx-2

我正在使用 JAVA FX 控件在 java swing 中显示 html 网页现在我想在 javaFx 的帮助下使用 JFXPanel 在 webview 中突出显示给定的单词。要显示 html 页面，我使用以下代码。

```
 public class abc extends JFrame
  {
   JFXPanel fxpanel;
   Container cp; 
  public abc()
   {
    cp=this.getContentPane();
    cp.setLayout(null);
    fxpanel= new JFXPanel();
    cp.add(fxpanel);
    fxpanel.setBounds(600,200,400,500);
    Platform.runLater(new Runnable())
    {

   public void run()
   {
     init Fx(fxpanel);
   }}
   );

   }

   public static void main(String args[])
    {
    abc frm= new abc();
   frm.show();
    }

    private static void initFX(final JFXPanel fxpanel) 
     {
       Group group = ne Group();
       Scene scene= new Scene(group);
       fxpanel.setScene(scene);
      WebView webview= new WebView();
      group.getChildren().add(webview);
     webview.setMinSize(500,500);
     webview.setMaxSize(500,500);
     eng=webview.getEngine();
     File file= new File("d:/new folder/abc.html");
     try
     {
     eng.load(file.toURI().toURL().toString());
     }
    catch(Exception ex)
    {
     ex.printStackTrace();
     }

     }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:10:02.170

JavaFX Web 引擎能够在`JavaFX`和之间建立通信`JavaScript`。因此，您可以使用 JavaScript 选择 HTML 页面中的单词并从 JavaFX 执行该脚本。

* * *

[网页浏览](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)

[JavaFX <-> JavaScript](https://blogs.oracle.com/javafx/entry/communicating_between_javascript_and_javafx)

# c# - 自定义 WF4 活动：为什么 DoubleClick 中的 e.Handled = true 不会停止冒泡

> ID：13910669
> 
> 赞同：0
> 
> 时间：2012-12-17T08:30:26.743
> 
> 标签：c#, xaml, workflow-foundation-4, workflow-activity, activitydesigner

你好，我正在使用可以自行嵌套的自定义 WF4 活动。我要捕捉双击事件，所以我重写了 OnPreviewMouseDoubleClick 方法。我的问题是，当活动在另一个活动中并且双击到内部活动时，对它们都调用了双击。我设置了 e.Handled = true 但它不起作用。如何停止在父活动上执行双击事件。

这是我的代码示例：

ActivityDesigner1.xaml

```
<sap:ActivityDesigner x:Class="ActivityDesignerLibrary1.ActivityDesigner1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
    xmlns:sapv="clr-namespace:System.Activities.Presentation.View;assembly=System.Activities.Presentation">
    <Grid>
        <sap:WorkflowItemsPresenter Items="{Binding Path=ModelItem.Activities}">
            <sap:WorkflowItemsPresenter.SpacerTemplate>
                <DataTemplate>
                    <Label HorizontalAlignment="Center" Content="Drop activity here." FontStyle="Italic" Foreground="DarkGray" />
                </DataTemplate>
            </sap:WorkflowItemsPresenter.SpacerTemplate>
        </sap:WorkflowItemsPresenter>
    </Grid>
</sap:ActivityDesigner> 
```

ActivityDesigner1.xaml.cs

```
using System.Windows;
using System.Windows.Input;

namespace ActivityDesignerLibrary1
{
    public partial class ActivityDesigner1
    {
        public ActivityDesigner1()
        {
            InitializeComponent();
        }

        protected override void OnPreviewMouseDoubleClick(MouseButtonEventArgs e)
        {
            e.Handled = true;
            base.OnPreviewMouseDoubleClick(e);
            MessageBox.Show(this.GetHashCode().ToString());   
        }
    }
} 
```

CodeActivity1.cs

```
using System;
using System.Activities;
using System.Activities.Statements;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace ActivityDesignerLibrary1
{
    [Designer(typeof(ActivityDesigner1))]
    public sealed class CodeActivity1 : CodeActivity
    {
        private Sequence innerSequence = new Sequence();

        public Collection<Activity> Activities
        {
            get
            {
                return this.innerSequence.Activities;
            }
        }

        protected override void Execute(CodeActivityContext context)
        {
            throw new NotImplementedException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:02:40.710

Makus 链接中的备注继续如下：

想要处理鼠标双击的控件作者应该在 ClickCount 等于 2 时使用 MouseLeftButtonDown 事件。这将导致 Handled 的状态在元素树中的另一个元素处理事件的情况下适当地传播。

所以我创建了这个解决方法：

```
using System.Windows;
using System.Windows.Input;
using System.Activities.Presentation;
using System.Windows.Media;

namespace ActivityDesignerLibrary1
{
    public partial class ActivityDesigner1
    {
        public ActivityDesigner1()
        {
            InitializeComponent();
        }

        protected override void OnPreviewMouseDown(MouseButtonEventArgs e)
        {
            if (e.ClickCount == 2)
            {
                FrameworkElement fe = e.OriginalSource as FrameworkElement;
                if (fe != null)
                {
                    object original = fe.DataContext;
                    ActivityDesigner baseActivityDesigner = original as ActivityDesigner;
                    if (baseActivityDesigner == null)
                    {
                        baseActivityDesigner = this.ActivityDesignerFinder((DependencyObject)e.OriginalSource);
                    }

                    if (baseActivityDesigner != null)
                    {
                        MessageBox.Show(baseActivityDesigner.GetHashCode().ToString());
                        e.Handled = true;
                    }
                }
            }
        }

        private ActivityDesigner ActivityDesignerFinder(DependencyObject dependencyObject)
        {
            while (dependencyObject != null)
            {
                if (dependencyObject is ActivityDesigner)
                {
                    return (ActivityDesigner)dependencyObject;
                }

                dependencyObject = VisualTreeHelper.GetParent(dependencyObject);
            }

            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:36:13.813

您是否尝试过为处理的属性使用静态布尔值？我记得在拖放时遇到了同样的问题，并以这种方式解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:39:28.540

MSDN 为您解答： [link](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.mousedoubleclick.aspx)

Quote: 尽管此路由事件 ( `Control.MouseDoubleClick Event`) 似乎遵循通过元素树的冒泡路由，但它实际上是由每个 UIElement 沿元素树引发的直接路由事件。如果在 MouseDoubleClick 事件处理程序中将 Handled 属性设置为 true，则路由中的后续 MouseDoubleClick 事件将在 Handled 设置为 false 的情况下发生。对于希望在用户双击控件时得到通知并在应用程序中处理事件的控件使用者来说，这是一个更高级别的事件。

# c++ - 设计问题：枚举或函数或其他

> ID：13910671
> 
> 赞同：0
> 
> 时间：2012-12-17T08:30:36.893
> 
> 标签：c++, function, pointers, enums

我有一个设计问题：

对于某些命令，我​​有以下整数集，例如：

```
addition = {2,3,4,5}
subtraction = {3,6,9} 
```

其中 add 的优先级 > sub 的优先级。

所以我创建了一个像

```
class Command{
    int priority;
    public:
    bool operator <(const Command &com);
    bool isInSet(int); 
    // i donot want this to be int , 
    // may be tommorrow i go for strings or char.
    // How to do this. AND
    void execute(int); // should it be here?
}; 
```

因为这些命令对数据结构进行操作。

如果每个命令都知道如何执行自身，即命令本身是否应该有一个函数。

如果 execute() 进入命令内部，它将如何访问数据结构？所以 Command 也应该有一个指向这个 DS 的指针。

或者应该是一对，但类 Execution 需要指向 DS 的指针。

还是应该像 Command 向我发送一些枚举，然后我将其切换为执行类似的操作

```
 enum {PUSH, POP};

while(!commands[i].isInSet(3))
    ++i;

switch(comands[i].getName())
{
    case PUSH:
            // operations on DS i have all of them in this scope. :)
    case POP:
            ...
} 
```

我应该怎么办 ？

有没有其他好的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:49:23.920

我不确定我是否能很好地理解您的问题，但是：

> 如果每个命令都知道如何执行自身，即命令本身是否应该有一个函数。

我想是的。我会将命令的逻辑包含在类的方法中。你想使用不同的结构，所以我会创建一个抽象基类，作为数据类型的接口。该命令将接受指向基类的指针并使用接口对其执行操作。

> 如果 execute() 进入命令内部，它将如何访问数据结构？所以 Command 也应该有一个指向这个 DS 的指针。

是的，我认为这完全没问题。

> 还是应该像 Command 向我发送一些枚举，然后我将其切换为执行类似的操作

如果您要在很多地方打开开关，我认为您应该避免使用它。如果它只在一个地方 - 也许没关系。但一般来说，我会避免这种方法，因为它使添加新类型变得困难。您忘记了一个开关，然后调试了几个小时。

# git - GitLab 从 Symfony2 项目的提交中排除了一些文件夹

> ID：13910673
> 
> 赞同：1
> 
> 时间：2012-12-17T08:30:43.443
> 
> 标签：git, symfony, windows-7, repository, gitlab

出于某种原因，GitLab 忽略了 Symfony2 项目中我的“供应商”文件夹中某些文件夹的内容。我已经删除了整个项目中的所有 .gitignore 文件，除了根文件夹中的一个文件，我在其中插入了一行说明应该包含整个供应商文件夹的行：

```
!vendor/* 
```

但是，仍然不是 vendor 中的所有文件都与 repo 同步。因此，团队成员彼此之间的同步不足，配置显然开始失败。

有人对如何解决这个问题有任何想法吗？

我在 Windows7 机器上使用[http://git-scm.com](http://git-scm.com)作为客户端。

# jquery - 按数据搜索过滤

> ID：13910675
> 
> 赞同：2
> 
> 时间：2012-12-17T08:30:59.170
> 
> 标签：jquery, search, filter, selector

我尝试使用 jQuery/HTML 选择器来过滤数据，例如

```
$("li[data-filter*='keyword']") 
```

但这不能过滤并得到相同的结果**“keyword1 keyword2”**和**“keyword2 keyword1”**，你明白吗？

我给你演示..

**HTML：**

```
<input>

<li data-filter="apple pie gummi bears gummi bears john">
    Apple pie gummi bears gummi bears John
</li>

<li data-filter="oat cake chocolate bar chupa chups dessert tootsie">
    Oat cake chocolate bar chupa chups dessert tootsie
</li>
<li data-filter="jujubes cookie sugar plum lemon drops candy">
    Jujubes cookie sugar plum lemon drops candy
</li> 
```

**jQuery :**

```
var filter_timer;
$("input").keypress(function() {
    clearTimeout(filter_timer);
    filter_timer=setTimeout(function(){
        filter();
    },500);
});

function filter() {

var keyword = $("input").val();

if($("li[data-filter*='"+keyword+"']").length) {
    $("li").animate({opacity:0.4}).css({"text-decoration":"line-through"});
    $("li[data-filter*='"+keyword+"']").animate({opacity:1}).css({"text-decoration":"blink"});
}else{
    $("li").animate({opacity:1},function(){$("li").removeAttr("style")});}
} 
```

**游乐场：http:** [//jsfiddle.net/9eaXD/](http://jsfiddle.net/9eaXD/)

**当我搜索apple pie**和**pie apple**或**apple gummi pei**时，如何获得相同的结果

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:40:46.137

属性选择器无法完成您尝试做的事情。`[data-filter*="apple pie"]`仅匹配其`data-filter`属性*恰好*包含string 的元素`apple pie`。

您应该`.filter()`改用：

```
$("input").keypress(function() {
    var keywords = $(this).val().split(' ');

    $('li').removeClass('matched');
    $("li[data-filter]").filter(function() {
        var filters = $(this).data('filter').split(' ');

        for (var i = 0; i < keywords.length; i++) {
            var keyword = keywords[i];

            if (filters.indexOf(keyword) == -1) {
                return false;
            }
        }

        return true;
    }).addClass('matched');
});​ 
```

**演示：http: [//jsfiddle.net/9eaXD/8/](http://jsfiddle.net/9eaXD/8/)**

`filters`您可以通过在页面加载时为每个元素创建数组来进一步优化这一点：

```
$("li[data-filter]").filter(function() {
    var $this = $(this);

    $this.data('filter', $this.data('filter').split(' '));
}); 
```**

# objective-c - 编译器在调用 sortedArrayUsingComparator 时抱怨类型不匹配

> ID：13910679
> 
> 赞同：2
> 
> 时间：2012-12-17T08:31:21.010
> 
> 标签：objective-c, objective-c-blocks

```
static NSArray *topologicallySortedReadableTypes;
static dispatch_once_t pred;

dispatch_once(&pred, ^{
    topologicallySortedReadableTypes = [self readableTypes];
    topologicallySortedReadableTypes = [topologicallySortedReadableTypes sortedArrayUsingComparator:^(id type1, id type2) {
        if (type1 == type2) return (NSComparisonResult)NSOrderedSame;
        if (UTTypeConformsTo((CFStringRef)type1, (CFStringRef)type2)) return (NSComparisonResult)NSOrderedAscending;
        if (UTTypeConformsTo((CFStringRef)type2, (CFStringRef)type1)) return (NSComparisonResult)NSOrderedDescending;
        // the problem is right here
        return ((NSUInteger)type1 < (NSUInteger)type2) ? (NSComparisonResult)NSOrderedAscending : (NSComparisonResult)NSOrderedDescending;
    }];
}); 
```

这是苹果提供的textedit最新版本的源代码，适用于10.7。由于苹果没有提供 10.8 的源代码，所以它在 10.8 下应该可以正常工作。但它给出了一个错误，即 **当块文字具有未指定的返回类型时，返回类型'NSInteger'（又名'long'）必须匹配先前的返回类型'NSComparisonResult'（又名'enum NSComparisonResult'）。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:02:20.037

我猜编译器现在对块返回类型更加严格/困惑。这个[相关问题](https://stackoverflow.com/questions/13324079/return-type-nscomparaisonresult-after-the-xcode-update)建议将显式返回类型添加到比较块：

```
topologicallySortedReadableTypes = [topologicallySortedReadableTypes
    sortedArrayUsingComparator:^NSComparisonResult(id type1, id type2) {…}]; 
```

# xmonad - 如何将电子邮件/jabber 通知添加到 xmobar 状态栏？

> ID：13910683
> 
> 赞同：0
> 
> 时间：2012-12-17T08:31:46.057
> 
> 标签：xmonad

我在我的电脑上使用 xmonad+xmobar。我缺少状态栏上的通知。May'be 是集成它或为此准备好的插件的方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T11:30:57.317

最简单的就是在状态栏中部署一个系统托盘。

您可以使用其中之一：

*   托盘：[https ://github.com/sargon/trayer-srg](https://github.com/sargon/trayer-srg)
*   stalonetray：[http ://stalonetray.sourceforge.net/](http://stalonetray.sourceforge.net/)
*   ...

# iphone - ios google map api上的REQUEST_DENIED

> ID：13910686
> 
> 赞同：0
> 
> 时间：2012-12-17T08:32:01.813
> 
> 标签：iphone, objective-c, ios, google-maps

我在用

```
-(void) getRouteData :(double)startPointLatitude :(double)startPointLongitude :(double)stopPointLatitude :(double)stopPointLongitude{

    NSString *url = @"http://maps.apple.com/maps/api/directions/json?";

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];

    [request setHTTPMethod:@"POST"];
    [request setTimeoutInterval:15];

    NSString *postString;

    postString = [@"" stringByAppendingFormat: @"origin=%f,%f&destination=%f,%f&sensor=true&mode=driving", startPointLatitude, startPointLongitude, stopPointLatitude, stopPointLongitude];

    NSLog(@"%@%@",url, postString);

    [request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

    Boolean isDataGet = false;

    if (theConnection) {
        NSData * data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
        NSString *result = [NSString stringWithFormat:@"%@", [self hexToString:data]];

        NSLog(@"result = %@", result);

    }

} 
```

在谷歌地图上绘制路径初始点和最终点，但我得到了

```
{
   "routes" : [],
   "status" : "REQUEST_DENIED"
} 
```

此外，当我添加 api 密钥时，它也不起作用。（我也启用了 Places API）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:53:04.447

我通过这个功能解决了问题

```
-(void) getRouteData :(double)startPointLatitude :(double)startPointLongitude :(double)stopPointLatitude :(double)stopPointLongitude{

    NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&sensor=true&mode=driving", startPointLatitude, startPointLongitude, stopPointLatitude, stopPointLongitude];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:apiUrlStr]];

    [request setTimeoutInterval:15];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

    Boolean isDataGet = false;

    if (theConnection) {
        NSData * data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
        NSString *result = [NSString stringWithFormat:@"%@", [self hexToString:data]];

        NSLog(@"result = %@", result);

    }

} 
```

# sql-server-2008 - 使用 xp_cmdshell 创建 csv 文件

> ID：13910689
> 
> 赞同：0
> 
> 时间：2012-12-17T08:32:12.807
> 
> 标签：sql-server-2008, powershell-2.0

```
EXEC xp_cmdshell 'bcp "select *  from 
CRM_V7_REF_MBC_V3_25_Jan_2012.dbo.MBC_CONSUMER_INF" QUERYOUT 
"\\192.168.5.135\Temp Share\\DataWithParams.csv" -c -t$ -r#  -T -S192.168.5.170' 
```

得到下面提到的错误：

```
SQLState = S1000, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Unable to open BCP host data-file
NULL 
```

我能够在本地机器上生成文件。

# javascript - 鼠标悬停播放声音

> ID：13910692
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:32:34.137
> 
> 标签：javascript

这是我的代码的链接：http: [//jsbin.com/ebadic/1/edit](http://jsbin.com/ebadic/1/edit)

它来自我在这里找到的演示：

[http://www.html5rocks.com/en/tutorials/casestudies/jamwithchrome-interaction/](http://www.html5rocks.com/en/tutorials/casestudies/jamwithchrome-interaction/)

它创建了 6 个吉他弦。我想做的是在将鼠标悬停在 6 个琴弦中的一根上时播放声音 - 每个琴弦都有不同的声音，或者每个琴弦都有一个向上/向下倾斜的声音

当我将鼠标悬停在单个字符串上时，我的代码已经播放了声音，但问题是它为每个字符串播放相同的声音。如何让它为每个字符串播放不同的声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:40:26.203

如果你想有预定义的声音文件，它可以这样工作：

```
//Javascript:
function playSound( url ){   document.getElementById("sound").innerHTML="<embed src='"+url+"' hidden=true autostart=true loop=false>";} 
```

# javascript - 如何防止页面重定向但仍提交表单

> ID：13910699
> 
> 赞同：3
> 
> 时间：2012-12-17T08:33:19.300
> 
> 标签：javascript, php, jquery

我的表格是这样的：

```
<form action="http://example.com/test.php" method="post">
.....
<input type="submit" class="submit" />
</form> 
```

当用户单击提交按钮时，我想弹出一个窗口，上面写着“您已提交信息...”，信息将传递到 test.php 页面。

我应该为此使用jQuery吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T08:39:24.860

如果你愿意，你可以不使用 AJAX 来做到这一点，而且你甚至不需要 jQuery。您需要在页面的某处放置一个 IFRAME（甚至是隐藏的），并通过向 iframe 添加一个 TARGET 来修改您的表单。

```
<iframe name="formSending"></iframe>
<form action="http://example.com/test.php" method="post" target="formSending">
.....
<input type="submit" class="submit" />
</form> 
```

在您的 test.php 文件中，您应该在末尾（或处理后）有一行，如下所示：

```
<script>alert('you have submitted the information....');</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T08:40:19.817

您可以使用[ajax](http://api.jquery.com/jQuery.ajax/)来实现这一点。尝试这样的事情：

```
<form action="http://example.com/test.php" method="post">
<input type="text" name="name" />
<input type="text" name="email" />
<input type="text" name="phone" />
<textarea name="message"></textarea>
<input type="submit" class="submit" onclick="formSubmit(event)" />
</form>

function formSubmit(e){

         e.preventDefault(); //This will prevent the default click action.

        // Create DataString
        var dataString = '&name=' + $('input[name=name]').val() +
                         '&email=' + $('input[name=email]').val() +
                         '&phone=' + $('input[name=phone]').val() +
                         '&message=' + $('textarea[name=message]').val() +

        $.ajax({
            type: "POST",
            url: "http://example.com/test.php",
            data: dataString,
            success: function() {
                alert('Form Successfully Submitted');
            },  
            error: function() {
                alert('There was an error submitting the form');
            }   
        }); 
        return false; // Returning false will stop page from reloading.
    }   
} 
```

在您的 test.php 文件中，您可以获取值，`$_POST`因为 ajax 将使用我们创建的 dataString 来发送 POST 值，所以在您的 test.php 文件中。

```
$name = $_POST['name']
$email = $_POST['email']
$phone = $_POST['phone']
$mssg = $_POST['message'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:28:31.023

Yon 可以为您的表单提交创建一个事件，例如

```
 var html_custom ='';
    $(document).ready(function(){
        $('#btn_submit').click(function(){
          html_custom+= "Name : " + $('#name').val();
          html_custom+= "Email : " + $('#email').val();
          html_custom+= "<a href='javascript:void(0);' id='form_submit'>Submit</a>";
          //now populate this custom html on the div which is going to be shown as pop up.
        });
       $('#form_submit').click(function(){
          $('form').submit();
        });

    }); 
```

和改变

```
 <input type="submit" class="submit" /> 
```

至

```
 <input type="button" class="submit" name="btn_submit" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-13T14:48:10.903

这是一个非常简单的技巧： - 将您的表单放入其他文件中。- 在您当前的页面上将该文件加载到 iframe 中。- 您将获得有关表单操作的提交数据。

在使用 javascript 从您的操作提交表单后，您将能够访问父窗口，反之亦然。

# c# - 从通用列表创建字符串

> ID：13910703
> 
> 赞同：0
> 
> 时间：2012-12-17T08:34:07.880
> 
> 标签：c#

我正在尝试从列表中的值创建一个字符串；我想要实现的是更新查询中使用的 SQL 语法：

```
UPDATE TABLE SET COLUMN1 =X WHERE COLUMN2 IN ('A','B','C') 
```

（A、B、C 是我列表中的项目。）我怎样才能做到这一点？

我试过：

```
string commaSeparatedList = _list.Aggregate((a, x) => a + ", " + x); 
```

但它会创建没有撇号的列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T08:40:23.460

您也可以改用[String.Join 方法](http://msdn.microsoft.com/en-us/library/system.string.join.aspx)：

```
string commaSeparatedList = string.Join(",", _list.Select(s => "'" + s + "'")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T08:36:09.550

如果您的代码除了撇号之外的内容完全符合您的要求，只需粘贴一个

```
.Select(s => "'" + s + "'") 
```

`_list`和之间`.Aggregate...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:36:50.363

```
string commaSeparatedList = "'"+_list.Aggregate((a, x) =>  a + "','" + x )+"'"; 
```

# c++ - c++错误：矩阵类的重新定义

> ID：13910704
> 
> 赞同：0
> 
> 时间：2012-12-17T08:34:10.380
> 
> 标签：c++

我一直在努力编译这段代码。我正在尝试实现一个简单的 Matrix 类以用于另一个计算。

到目前为止，我遇到以下两个错误：来自编译器：

```
g++ -g -Wall -c main.cpp
In file included from main.cpp:19:0:
    Matrix.hh:2:7: error: redefinition of ‘class Matrix’
    Matrix.hh:2:14: error: previous definition of ‘class Matrix’ 
```

我没有看到任何明显的重新定义。请帮忙

谢谢

以下是支持文件：

矩阵.hh：

```
// Matrix class of variable size
class Matrix {

private:
    int n_rows;
    int n_cols;
    double *array;

public:
    // Constructors
    Matrix(); // default constructor
    Matrix(int rows, int cols); // two-argument constructor
//  Matrix(const Matrix &arr); // copy constructor

    // Destructor
    ~Matrix();

    // Mutators
//  void add(Matrix m2);
//  void subtract(Matrix m2);
    void setelem(int r, int c, double val);

    // Accessors
    int getrows();
    int getcols();
    double getelem(int r, int c);
    bool equals(Matrix m2);
    char display();
    int WriteToArray(double *CopyOfArray);

}; 
```

矩阵.cc：

```
#include "Matrix.hh"
#include <cassert>
#include <math.h>
#include <string.h>
#include <stdio.h>

// CONSTRUCTORS
// default constructor
Matrix::Matrix() {
    n_rows = 0;
    n_cols = 0;
    array = NULL;
}

// two-argument constructor
Matrix::Matrix(int rows, int cols) {
    n_rows = rows;
    n_cols = cols;
    array = new double[rows * cols];

    for (int i = 0; i < n_rows; i++) {
        for (int j = 0; j < n_cols; j++) {
            array[i * n_cols + j] = 0;
        }
    }
}

/* copy constructor*/
//Matrix::Matrix(const Matrix &arr)  {
//  n_rows = arr.n_rows; // find proper size
//  n_cols = arr.n_cols; // find proper size
//  array = new double[n_rows * n_cols]; // allocate a deep-copy
//  for (int i = 0; i < n_rows; i++) {
//      for (int j = 0; j < n_cols; j++) {
//          array[i * n_cols + j] = arr.array[i * n_cols + j];
//      }
//  }
//  arr=&array;
//}

// DESTRUCTOR
Matrix::~Matrix() {
    assert(array[1]!=0);
    int ii=0;
    printf("array values in ~\n");
    for(ii=0;ii<n_rows;ii++){
        printf("%e\n",array[ii]);
    }
    delete[] array; // free up memory
}

// MUTATORS
// adds a second matrix to this matrix object
void Matrix::add(Matrix m2) {
    assert (m2.n_rows == n_rows); // assert dimensions match
    assert (m2.n_cols == n_cols); // assert dimensions match
    for (int i = 0; i < n_rows; i++) {
        for (int j = 0; j < n_cols; j++) {
            array[i * n_cols + j] = array[i * n_cols + j] + m2.array[i *n_cols + j];
        }
    }
}

// subtracts a second matrix to this matrix object
void Matrix::subtract(Matrix m2) {
assert (m2.n_rows == n_rows); // assert dimensions match
assert (m2.n_cols == n_cols); // assert dimensions match
for (int i = 0; i < n_rows; i++) {
    for (int j = 0; j < n_cols; j++) {
        array[i * n_cols + j] = array[i * n_cols + j] - m2.array[i *n_cols + j];
        }
    }
}

// change an element in the matrix
void Matrix::setelem(int r, int c, double val) {

    array[r * n_cols + c] = val;
}

// ACCESSORS
// get number of rows
int Matrix::getrows() {
    return n_rows;
}

// get number of columns
int Matrix::getcols() {
    return n_cols;
}

// get value of element at specified row, col
double Matrix::getelem(int r, int c) {
    printf("getelem value: %e\n", array[r*n_cols+c]);
    return array[r * n_cols + c];
}

// test if two matrices are equal
bool Matrix::equals(Matrix m2) {
    // if dimensions not equal, matrices not equal
    if (m2.n_rows != n_rows || m2.n_cols != n_cols) { 
        return false;
    }

    // test equality element by element
    for (int i = 0; i < n_rows; i++) {
        for (int j = 0; j < n_cols; j++) {
            if (array[i * n_cols + j] != m2.array[i * n_cols + j]) {
                return false; // if one val not equal, matrices not equal
            }
        }
    }

    return true; // has checked all vals, matrices match
}

char Matrix::display() {
    // Print out the contents of this matrix m2:
    char string[100], temp[1];
    int n;
    for(int r = 0; r < n_rows; r++) {
      for(int c = 0; c < n_cols; c++) {
        printf("Element (%d, %d) =  %e, \n", r,c,array[r * n_cols + c]);

      }
    }
    printf("\n");
    return *string;
}

int Matrix::WriteToArray(double *CopyOfArray){
    int i=0;
    while(i<n_rows){
        *(CopyOfArray+i)=array[i*n_cols];
        i++;
    }
    return *CopyOfArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:44:59.943

`#include`在 C 和 C++ 头文件中使用“守卫”来防止重新定义是常见的做法。

例如，在您的情况下：

```
#ifndef MATRIX_H
#define MATRIX_H

class Matrix {
   // [...]
};

#endif 
```

这种结构意味着如果`#include "Matrix.hh"`在一个源文件（及其`include`d 文件）中出现多次，`class Matrix`则只定义一次。

一些 C 和 C++ 实现提供了非标准指令`#pragma once`（如评论中所建议的那样）。该指令插入到头文件的顶部，将确保该文件只包含一次。出于可移植性的原因，我更喜欢上面演示的构造。

# objective-c - 非 GC 应用程序中的内存管理 OS X __block 变量分配

> ID：13910705
> 
> 赞同：0
> 
> 时间：2012-12-17T08:34:18.050
> 
> 标签：objective-c, macos, cocoa, memory-management, objective-c-blocks

我有一个`non-gc OS X`应用程序。在这个应用程序中，我试图从块内将一个对象分配给一个块变量。然后这个对象被另一个线程从它所在的数组中清除。我假设因为它是一个`non-gc`应用程序，`block_byref`结构正在设置`BLOCK_NEEDS_FREE`标志，并且 dispose 辅助函数正在清理对象。副本足够安全吗？

```
- (void)assignFromArray
{
  __block NSObject iWantToKeep = nil;

  [myArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)
  {
    if([[obj stringVar] isEqualToString:MyStringConst])
    {
       iWantToKeep = [obj copy];
       *stop = YES;
    }
  }];

/* Assume here that the array has been cleaned up by another thread
 * and all the objects in it have been released.
 *
 * Was a copy safe enough to survive the block_byref dispose
 * and the array objects being dealloc'd so that it can be accessed here?
 */
   NSLog(@"%@", [iWantToKeep stringVar]);

  //I only need it briefly, so it can be cleaned up here
  [iWantToKeep autorelease];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:38:02.713

是的，这非常有效。您只需确保在丢弃数组之前制作副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:51:06.267

您需要在为其`iWantToKeep`分配新值之前释放，否则您将泄漏。

我不知道你为什么要`copy`ing 对象。我假设你需要复制的行为。该对象只需要保留（`copy`做 a `retain`）。

> 副本是否足够安全以在 block_byref 处置中幸存下来

此时`iWantToKeep`变量仍在范围内。所以它是可用的。

> 并且数组对象被释放以便可以在这里访问？

该数组不会“释放”其元素。它释放它们。由于我们保留了我们想要的对象，我们拥有它并且可以使用它。

> 这里假设数组已经被另一个线程清理干净，并且其中的所有对象都已被释放。

这似乎不安全。如果这种情况发生得稍早一点，在迭代中，并且数组在迭代时被修改或释放，就会发生不好的事情。

# windows-phone-8 - Windows Phone 8 http 请求

> ID：13910707
> 
> 赞同：0
> 
> 时间：2012-12-17T08:34:55.273
> 
> 标签：windows-phone-8

我想知道是否有某种方法可以获取用户正在浏览的 Urls，例如在用户按下 go 或 enter 后以某种方式读取浏览器地址栏。

我知道我可以使用 WebClient() 获取网页内容，但这不是我想要的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:09:58.380

WP8 中没有支持的 API 可用于实现此目的，您无法从您的应用程序访问预加载应用程序的内部。如果您在应用程序中使用 Web 浏览器控件，则可以访问 Web 浏览器导航事件的导航信息。这是您访问网络相关数据的唯一方式。

# css - CSS 过渡不起作用

> ID：13910709
> 
> 赞同：0
> 
> 时间：2012-12-17T08:35:01.780
> 
> 标签：css

我试图让导航栏中的子菜单出现过渡。但这行不通。我正在使用的 css 代码是这样的-

```
#navigation li ul {
   display: none; 
   width: auto;
   position: absolute;
   margin: 0;
   padding: 0;
   background-color: #F87217;
    -webkit-transition: 0.7s;
    -moz-transition: 0.7s;
    -o-transition: 0.7s;
    transition: 0.7s;   
}

#navigation li:hover ul {
    display: block;
} 
```

我怎样才能使过渡工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:42:29.057

你不能过渡`display`。尝试转换`height`或`opacity`改为：

```
#navigation li ul {
   display: block; 
   width: auto;
   height: 0;
   opacity: 0; /* optional */
   /* other attributes */
    -webkit-transition: 0.7s;
    -moz-transition: 0.7s;
    -o-transition: 0.7s;
    transition: 0.7s;   
}

#navigation li:hover ul {
    height: auto;
    opacity: 1; /* optional */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:42:49.370

当您使用 display none 时，该项目不会呈现......所以您将永远无法悬停它。正如[Jan Dvorak](https://stackoverflow.com/users/499214/jan-dvorak)所说，使用身高可能是一个更好的选择。但也不能悬停高度为 0 的项目。

我建议使用透明度。

```
#navigation li ul {
opacity: 0;
...
}
#navigation li:hover ul {
    opacity: 1;
} 
```

# fedora - Mysql 没有启动 Fedora Core 15

> ID：13910711
> 
> 赞同：-2
> 
> 时间：2012-12-17T08:35:28.073
> 
> 标签：fedora, mysql

非常垃圾的问题。我对 Linux 很陌生。我使用命令`mysql`从[http://www.if-not-true-then-false.com/2010/install-mysql-on-fedora-centos-red-hat-rhel/](http://www.if-not-true-then-false.com/2010/install-mysql-on-fedora-centos-red-hat-rhel/)`yum --enablerepo=remi install mysql mysql-server`安装。显示安装成功。但是当我尝试启动mysql服务`cd /etc/init.d/mysqld start`时，它显示`bash: cd: /etc/init.d/mysqld: No such file or directory`。请帮我。提前致谢

编辑：我尝试运行`mysqladmin -u root -p status`产生以下内容： `Uptime: 107 Threads: 1 Questions: 2 Slow queries: 0 Opens: 33 Flush tables: 1 Open tables: 26 Queries per second avg: 0.018`但`localhost/phpmyadmin`显示`404`错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:36:45.027

尽量`/etc/init.d/mysqld start`不`cd`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:39:14.417

你有两个选择：

> /etc/init.d/mysqld 启动

或者

> 服务 mysqld 启动

# java - 我的 java corba 聊天应用程序中出现“org.omg.CORBA.COMM_FAILURE：vmcid：SUN 次要代码：208 已完成：可能”错误的原因是什么

> ID：13910718
> 
> 赞同：4
> 
> 时间：2012-12-17T08:35:58.977
> 
> 标签：java, chat, corba

我一直在尝试运行 java corba 聊天应用程序参考：- [https://github.com/ehl/TalkCat](https://github.com/ehl/TalkCat)

当我第一次运行命名服务 id nameserv.bat 时，会弹出错误

> org.omg.CORBA.COMM_FAILURE：vmcid：SUN 次要代码：208 完成：可能
> 
> 命名服务激活！！
> 
> IOR：空

错误导致这行编码

**org.omg.CORBA.Object obj = orb.resolve_initial_references("NameService");**

我已经尝试了许多 java corba 聊天应用程序所有的应用程序都以这个错误结束，并且这条线所有的应用程序接缝都有这个相同的编码错误这个错误是什么我该如何解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:47:57.753

如果主机名或端口号不匹配，您可能会收到此错误。run_oss_client.bat/sh 文件的参数中的主机名和端口号应与Java IDL Name Server 匹配。

虽然 AS10G R2 中没有 run_oss_client 脚本，但您可以在注意到另一个 Report 在同一台机器上运行后轻松解决。它是：**在同一台机器上重用现有的命名服务端口。**

请尝试以下方法。

修改**$ORACLE_HOME/reports/conf/rwnetwork.conf**让它使用同一服务器上的其他命名服务端口号。

```
<discoveryService>
  <namingService name="Cos" host="127.0.0.1" port="14021"/>
</discoveryService> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:18:16.757

首先启动`tnameserver`命令提示符，然后在程序中启动名称服务器。

这是运行 tnameserve 的命令：`tnameserv -ORBInitialPort 1050`。

# entity-framework - 实体框架代码首先在数据访问层

> ID：13910726
> 
> 赞同：1
> 
> 时间：2012-12-17T08:36:14.917
> 
> 标签：entity-framework, c#-4.0, architecture, entity-framework-4, entity-framework-4.1

我在我的项目中使用 N 层架构。在数据访问层，我首先使用实体​​框架代码。当我在 DAL 中填充对象、处理上下文并将对象传输到业务层时，导航属性变为空。如果我不处置上下文，我没有问题，但我的问题是处置上下文好吗？如果是，当我将对象转移到下一层（业务）时，如何解决问题，使导航属性不会变为空。我在数据访问层的代码：

```
public List<DomainObject.ContractCenter> GetAll()
{
    try
    {
        List<ContractCenter> contractCenters = new List<ContractCenter>();
        using (var context = new DBContext())
        {
            contractCenters = context.ContractCenters.ToList();
        }

        return contractCenters;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:03:51.253

`DbContext`只要您的“工作单元”处于活动状态，就应该保持活动状态。例如，如果您正在制作一个 Web 应用程序，它应该在请求开始时创建，最迟在请求结束时处理。

在您的情况下，`DbContext`应该保持活动状态，直到您完成填充域模型，否则正如您所提到的，正在[延迟加载](http://www.nileshgule.com/2010/09/entity-framework-part-8-lazy-loading.html)的导航属性将是。`null`通过在填充模型时处理来“分离”实体的缺点`DbContext`是您丢失了实体的状态跟踪，并且当您想要保存数据时需要自己执行此操作。

如果您没有*很多*域逻辑，我会将其直接添加到您的代码优先 POCO 实体中。这样，您仍然可以进行状态跟踪。

我建议使用 IoC 容器来管理您的`DbContext`. 以及存储库或您用于数据访问的任何东西的生命周期。也许与[工作单元模式](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)相结合。有很多可供选择，我最喜欢的一些是

*   [统一](http://unity.codeplex.com/)
*   [忍者](http://www.ninject.org/)
*   [自动法](http://code.google.com/p/autofac/)

有很多关于使用 IoC 容器管理生命周期的好教程，谷歌它！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:44:18.953

要回答您的问题：

> 处理上下文好吗？

是的，上下文应该尽可能短（如果您有可能重组项目并实施更清洁的架构，请参阅@khillang 关于 UnitOfWork 和 IOC 的回答）。

> 将对象转移到下一层时如何解决问题

您需要预先加载相关的集合（导航属性）：

```
public List<DomainObject.ContractCenter> GetAll()
{
    try
    {
        using (var context = new DBContext())
        {
            return context.ContractCenters.
                           Include(c => c.YourChildCollection1).
                           Include(c => c.YourChildCollection2).
                           ...
                           ToList();
        }
    }
} 
```

# android - 在 monodroid 中旋转多次时活动失败

> ID：13910727
> 
> 赞同：0
> 
> 时间：2012-12-17T08:36:15.577
> 
> 标签：android, rotation, xamarin.android

在我的 monodroid 应用程序中，我有一个用户可以旋转它的活动。当我多次背靠背旋转它时，会导致此错误：

```
 12-17 11:58:40.367: E/WindowManager(2115): Activity myapp.myActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405bc398 that was originally added here
12-17 11:58:40.367: E/WindowManager(2115): android.view.WindowLeaked: Activity myapp.myActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405bc398 that was originally added here
12-17 11:58:40.367: E/WindowManager(2115):  at android.view.ViewRoot.<init>(ViewRoot.java:275)
12-17 11:58:40.367: E/WindowManager(2115):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
12-17 11:58:40.367: E/WindowManager(2115):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
12-17 11:58:40.367: E/WindowManager(2115):  at android.view.Window$LocalWindowManager.addView(Window.java:430)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.Dialog.show(Dialog.java:288)
12-17 11:58:40.367: E/WindowManager(2115):  at myapp.myActivity.n_onCreate(Native Method)
12-17 11:58:40.367: E/WindowManager(2115):  at myapp.myActivity.onCreate(PropertyShowActivity.java:77)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3242)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.ActivityThread.access$1600(ActivityThread.java:132)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1037)
12-17 11:58:40.367: E/WindowManager(2115):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 11:58:40.367: E/WindowManager(2115):  at android.os.Looper.loop(Looper.java:143)
12-17 11:58:40.367: E/WindowManager(2115):  at android.app.ActivityThread.main(ActivityThread.java:4196)
12-17 11:58:40.367: E/WindowManager(2115):  at java.lang.reflect.Method.invokeNative(Native Method)
12-17 11:58:40.367: E/WindowManager(2115):  at java.lang.reflect.Method.invoke(Method.java:507)
12-17 11:58:40.367: E/WindowManager(2115):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-17 11:58:40.367: E/WindowManager(2115):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-17 11:58:40.367: E/WindowManager(2115):  at dalvik.system.NativeStart.main(Native Method)
12-17 11:58:40.377: W/MapActivity(2115): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@40626398 
```

我不知道这是为了什么。有谁能够帮助我？

在上述错误之前我也有这个信息：

```
Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@40626398 
```

回收地图对象。将目标 GC 堆从 33.796MB 限制到 32.000MB 395280 字节的外部分配对于此进程来说太大。VM 不允许我们将 395280 字节的 Clamp 目标 GC 堆从 33.789MB 分配到 32.000MB

我的活动中有一些使用通用图像加载器加载的图像是因为它们吗？如果它是真的我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:56:31.713

您可能在某处创建了内存泄漏。检查您是否没有存储对 Gui 对象的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:27:12.970

您似乎在 OnCreate() 方法中创建了一个 Dialog（或从 Dialog 派生的类）。Dialog 使用泄漏的内部类 PhoneWindow。旋转设备时，活动会贯穿整个生命周期，您应该在那里清理对话框。建议的地方是 OnPause() 方法：

```
protected override void OnPause()
{
   base.OnPause();

   if (this.dlg != null)
      this.dlg.Dismiss();
} 
```

活动生命周期在此处描述： [https ://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:11:48.350

如果您不更改布局或需要重新配置/重新加载控件或布局，您可能需要考虑添加如下属性更改：

```
[Activity(Label = "MyActivity", Icon = "@drawable/MyActivity", Theme = "@style/AppTheme"
                , ConfigurationChanges = Android.Content.PM.ConfigChanges.Orientation)] 
```

Android.Content.PM.ConfigChanges.Orientation属性通知**Activity**任何方向更改都需要手动处理。因此，如果您只是希望视图在不重新启动活动的情况下旋转，那么进行该属性更改应该可以解决您的问题。

如果您需要更改布局或需要对方向更改采取操作，则需要覆盖**OnConfigurationChanged**方法。

可以在[Xamarin 文档站点](http://docs.xamarin.com/Android/Guides/Application_Fundamentals/Handling_Rotation)上找到有关此过程的更多信息。查看*“防止活动重启”*部分。

# android - 横向模式下的警报对话框按钮位置更改

> ID：13910729
> 
> 赞同：0
> 
> 时间：2012-12-17T08:36:20.830
> 
> 标签：android, button, alert

*警报对话框*的**按钮**在更改为横向模式时正在**更改位置。**也就是说，在纵向模式下，按钮可以正常，然后取消，在横向模式下，取消然后确定。使用警报框默认按钮，而不是任何自定义布局。这在 ICS 设备中注意到了，有人可以帮忙吗？

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:12:29.547

这听起来像是 Android 中的一个缺陷，所以除了报告它之外，您可能无能为力。您可以制作一个自定义对话框来正确布置它，但需要做更多的工作。***

# visual-studio - 在 RDLC 报告中隐藏一行而不禁用代码执行

> ID：13910735
> 
> 赞同：0
> 
> 时间：2012-12-17T08:36:58.757
> 
> 标签：visual-studio, ssrs-2008, reporting-services, rdlc

如何在不禁用该行的代码执行的情况下隐藏 .rdlc 报告中的一行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:14:44.973

使用该`Visibility.Hidden`物业。单击详细信息行句柄以选择整个详细信息行，展开可见性属性并在隐藏属性中输入将隐藏该行的表达式。例如，如果您想在 MyField 为零时隐藏该行，您可以输入：

```
=IIF(Fields!MyField.Value = 0, True, False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:19:15.150

使用表格过滤器。数据将在执行后提取过滤。

但是我认为没有必要这样做，除非。

# android - Android GridView 捏缩放

> ID：13910736
> 
> 赞同：6
> 
> 时间：2012-12-17T08:37:01.800
> 
> 标签：android, gridview, zooming, pinch

我正在尝试实现捏合手势以放大/缩小 Android 中的 GridView。我已经在网上搜索了一段时间，并且找到了多个答案，但归根结底是创建一个自定义 GridView 并为此 GridView 设置一个手势侦听器。但我找不到任何关于如何做到这一点的示例或教程。

所以我真的在寻找一个例子或一些东西来让我朝着正确的方向前进。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T15:11:34.427

尝试查看[https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)库。不是 GridView，但我认为基础是相同的。

# spring - 没有为 GET 请求调用 @Controller

> ID：13910737
> 
> 赞同：1
> 
> 时间：2012-12-17T08:37:16.183
> 
> 标签：spring, spring-mvc

我正在尝试在我的 Web 应用程序中对带注释的控制器使用 Spring 3 MVC 支持。我的配置如下：

**1- web.xml：**

```
 <servlet>  
    <servlet-name>dispatcher</servlet-name>  
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>    
</servlet>

<servlet-mapping>  
    <servlet-name>dispatcher</servlet-name>  
    <url-pattern>/springmvc/*</url-pattern>  
</servlet-mapping> 
```

**2- applicationContext.xml：**我的网页直接在 webapp 文件夹下

```
 <context:component-scan base-package="com.myapp" />
    <mvc:annotation-driven />
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/"/>
        <property name="suffix" value=".jsp"/>
    </bean> 
```

**3-控制器：**

```
@Controller
@RequestMapping("/test.jsp")
public class Test{

    @RequestMapping(method = RequestMethod.GET)
    public String get() {
        System.out.println("######## GET METHOD FOR test.jsp ########");
        return "test.jsp";
    }

} 
```

注意：我在**ServletContextListener中加载****applicationContext** ，如下所示：

 **```
ApplicationContext context = new ClassPathXmlApplicationContext(
                    "classpath:spring/config/applicationContext.xml"); 
```

请告知如何解决这个问题，谢谢。

我还有另一个问题，如果可以让调度程序 servlet 调度特定的 jsp 页面，而不是应用程序中的所有页面，因为并非我的所有 jsp 页面都有控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:41:46.453

web.xml 中的调度程序 servlet 名称是`dispatcher`. 在这种情况下，Spring 尝试加载 dispatcher-servlet.xml ( `servlet_name-servlet.xml`)。而您已经在`applicationContext.xml`. 将其重命名为`dispatcher-servlet.xml`.

或者你也可以通过在 servlet 中设置 init-param 让 Spring 读取 applicationContext。例如：

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/springmvc/*</url-pattern>
</servlet-mapping> 
```

关于你的第二个问题，你可以使用spring的`view-controller`映射来直接渲染视图。

```
<mvc:view-controller path="demo/flot" view-name="demo/flot"/> 
```

阅读：[17.15.5 配置视图控制器](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:44:46.450

更改`return "test.jsp"`为`return test`. 您的返回字符串将添加`prefix`和`suffix`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:34:24.607

解决如下：

```
<listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
            <param-value>
             classpath:spring/config/applicationContext.xml
        </param-value>
    </context-param>

    <servlet>  
        <servlet-name>spring</servlet-name>  
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>    
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:spring/config/dispatcherServlet.xml</param-value>
       </init-param>
    <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>  
        <servlet-name>spring</servlet-name>  
        <url-pattern>/myapp/*</url-pattern>  
    </servlet-mapping> 
```**

# android - Play 商店国家分布（出版）

> ID：13910740
> 
> 赞同：4
> 
> 时间：2012-12-17T08:37:35.700
> 
> 标签：android, publishing

经过 10 个月的开发，我准备发布我的第一个应用程序！！！我正在查看发布清单，任何人都可以确认在您发布应用程序后是否可以修改国家/地区分布。

我想只在美国做一个有限的发布，然后扩展到其他国家。那可能吗？顺便说一句，我的应用程序是免费的。

[http://developer.android.com/distribute/googleplay/publish/preparing.html#countries](http://developer.android.com/distribute/googleplay/publish/preparing.html#countries)

谢谢！

-L

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:40:34.747

是的，发布后可以修改。

唯一不能修改的有两点：

1.  应用程序包名称
2.  付费状态 - 您不能让付费应用免费，也不能让免费应用付费。您可以调整付费应用的价格。

# flash - preventCaching 究竟可以为 uploadify 做什么？

> ID：13910741
> 
> 赞同：1
> 
> 时间：2012-12-17T08:37:38.633
> 
> 标签：flash, apache-flex, uploadify

简单的问题： **为什么我们需要避免缓存uploadify swf文件？**

最近玩了很多uploadify，flash免费版除了加载速度都很棒，因为我的页面有几个不同的uploadify实例并且每个实例的初始化变慢，然后我意识到设置**preventCaching**的默认值uploadify 设置为 true 以便在加载 flash 时生成随机字符串。所以我想看看我是否可以关闭该功能。

然而，文档本身并没有提到为什么需要这样做，我在谷歌上做了很多，但没有找到任何关于它的运气。人们似乎只是永远保留默认值而不更改它。

我尝试将其设置为**false**以便浏览器可以从缓存中加载闪存，目前我看不到任何差异，但我只是担心如果某些浏览器可能有一些我可能不知道的问题怎么办，我们的 QA 资源有限，因此无法通过每个浏览器对其进行测试，所以想知道是否有人遇到将**preventCaching**设置为**false的任何问题**

有没有相关经验的？打开任何评论。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:39:50.627

这并不能回答您的问题，但是我花了太多时间来处理uploadify。最后，我放弃了它并切换到[plupload](http://www.plupload.com/)，这似乎好多了

看看他们的官方论坛就知道了。这是一个垃圾邮件屋。版主没看。这个项目是一匹死马......

# ios - 将 uiview 捕获到 uiimage 时，掩码不起作用

> ID：13910742
> 
> 赞同：12
> 
> 时间：2012-12-17T08:37:42.620
> 
> 标签：ios, uiview, uiimage, calayer, mask

我有一个`UIView`我想保存为`UIImage`. 我使用 来执行此操作`UIGraphicsBeginImageContext`，并且可以正常工作。但是，当我将蒙版应用于 (view/layer.mask) 中的图像时，我捕获的图像`UIGraphicsBeginImageContext`是错误的（在运行应用程序时蒙版有效，但在尝试`UIImage`从 a获取 a 时无效`UIView`）。有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-18T19:37:54.783

如果我理解正确，您希望从 UIView 层创建一个 UIImage，而该层被屏蔽。我假设您希望目标 UIImage 具有透明背景。

我没有遇到任何问题，我有一个演示项目，你可以看看：

[https://bitbucket.org/reydan/so_imagemask](https://bitbucket.org/reydan/so_imagemask)

您首先需要按下**Mask**按钮。它将从包中加载一个蒙版图像（黑白）并将其设置为上面 UIView 容器的图层蒙版。

然后，您可以按下将 UIView 容器渲染为 UIImage 的**Copy Image**按钮，然后将其设置为下面的目标图像视图以查看结果。

我还将在这里发布两种方法：

```
- (IBAction)onMask:(id)sender {

    UIImage* maskImage = [UIImage imageNamed:@"star.png"];
    UIImageView* maskImageView = [[UIImageView alloc] initWithImage:maskImage];
    maskImageView.contentMode = UIViewContentModeScaleAspectFit;
    maskImageView.frame = _mainContainerView.bounds;

    _mainContainerView.layer.mask = maskImageView.layer;
}

- (IBAction)onCopyImage:(id)sender {

    UIGraphicsBeginImageContextWithOptions(_mainContainerView.bounds.size, FALSE, [[UIScreen mainScreen] scale]);
    [_mainContainerView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    _destImageView.image = img;
} 
```

**编辑**

显然`renderInContext:`在 IOS6 上不使用掩码（正如在 SO 上所说的那样）。我的解决方案是手动将蒙版应用于图像。蒙版取自图层的蒙版属性并在上下文中渲染，因此我们在转换/内容模式/等方面没有任何问题。

这是更新的源代码（也可以在 bitbucket 上找到）：

```
- (IBAction)onCopyImage:(id)sender {

    // Get the image from the mainImageView
    UIGraphicsBeginImageContextWithOptions(_mainContainerView.bounds.size, FALSE, [[UIScreen mainScreen] scale]);
    [_mainContainerView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // Use the next block if targeting IOS6
    {
        // Manually create a mask image (taken from the mask layer)
        UIGraphicsBeginImageContextWithOptions(_mainContainerView.bounds.size, TRUE, [[UIScreen mainScreen] scale]);

        CGContextRef ctx = UIGraphicsGetCurrentContext();
        CGContextSetFillColorWithColor(ctx, [UIColor whiteColor].CGColor);
        CGContextFillRect(ctx, _mainContainerView.bounds);

        [_mainContainerView.layer.mask renderInContext:ctx];
        UIImage * maskimg = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        // Create a image mask from the UIImage
        CGImageRef maskRef = maskimg.CGImage;
        CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                            CGImageGetHeight(maskRef),
                                            CGImageGetBitsPerComponent(maskRef),
                                            CGImageGetBitsPerPixel(maskRef),
                                            CGImageGetBytesPerRow(maskRef),
                                            CGImageGetDataProvider(maskRef), NULL, false);

        // Apply the mask to our source image
        CGImageRef maskedimg= CGImageCreateWithMask(img.CGImage, mask);

        // Convert to UIImage so we can easily display it in a UIImageView
        img = [UIImage imageWithCGImage:maskedimg scale:img.scale orientation:img.imageOrientation];

        CGImageRelease(mask);
        CGImageRelease(maskedimg);
    }

    _destImageView.image = img;

} 
```

**编辑** 请检查 bitbucket 上的最新项目，因为它包含最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T09:41:57.173

这是一些示例代码，我用于将 UIView 作为 UIImageView 并为此应用蒙版图像。

```
 * UIView --> UIImageView --> With Mask images . 
```

我一直使用 UIView 来绘图所以为此，

**将 UIView（绘制区域）分配给 UIImageView 。**

```
-(UIImage*) imageRepresentation
{
    [EAGLContext setCurrentContext:context];
    UIImageView* upsideDownImageView=[[UIImageView alloc] initWithImage: [self upsideDownImageRepresenation]];

    upsideDownImageView.transform=CGAffineTransformScale(upsideDownImageView.transform, 1, -1);

    UIView* container=[[UIView alloc] initWithFrame:upsideDownImageView.frame];
    [container addSubview:upsideDownImageView];
    UIImage* toReturn=nil;

    UIGraphicsBeginImageContext(container.frame.size);

    [container.layer renderInContext:UIGraphicsGetCurrentContext()];

    toReturn = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //[upsideDownImageView release];
    upsideDownImageView = nil;
    container = nil;
    //[container release];
    return toReturn;
} 
```

* * *

* * *

```
-(UIImage*) upsideDownImageRepresenation
{
    int imageWidth = CGRectGetWidth([self bounds]);
    int imageHeight = CGRectGetHeight([self bounds]);

    //image buffer for export
    NSInteger myDataLength = imageWidth* imageHeight * 4;

    // allocate array and read pixels into it.
    GLubyte *tempImagebuffer = (GLubyte *) malloc(myDataLength);

    glReadPixels( 0, 0, imageWidth, imageHeight, GL_RGBA, GL_UNSIGNED_BYTE, tempImagebuffer);

    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, tempImagebuffer, myDataLength, ProviderReleaseData);

    // prep the ingredients
    int bitsPerComponent = 8;

   int bitsPerPixel = 32;
    int bytesPerRow = 4 * imageWidth;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGImageAlphaPremultipliedLast;

    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef imageRef = CGImageCreate(imageWidth, imageHeight, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    // then make the uiimage from that
    UIImage *myImage =  [UIImage imageWithCGImage:imageRef] ;

    CGDataProviderRelease(provider);
    CGImageRelease(imageRef);
    CGColorSpaceRelease(colorSpaceRef);

    return myImage;
} 
```

现在您有了**UIView 的 UIImageView 表示。**

> 现在让我们用蒙版效果来制作它。

```
 UIGraphicsBeginImageContextWithOptions(imageView.bounds.size, NO, 1.0); //imageView is wt we got by converting the UIIVew.
        [self.imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
// Add the mask Images even if want any UILabels etc ..
        [imageView.image drawInRect:CGRectMake(0, 0, 703, 315)];
        [maskImages.image drawAtPoint:CGPointMake(10, 10) blendMode:kCGBlendModeNormal alpha:0.2];
        [lblAckNo drawTextInRect:CGRectMake(320, 230,100,50)];

        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();// image with all of your effort.
        [[UIColor redColor] set];

         UIGraphicsEndImageContext(); 
```

# c# - 验证布尔条件时出错

> ID：13910744
> 
> 赞同：0
> 
> 时间：2012-12-17T08:37:58.067
> 
> 标签：c#

我在面板上添加了一个用户控件并将用户控件中的组合框的属性设置为公共，我想验证这一点，但我一直单击它显示表单的按钮。什么问题，当我通过按钮动态添加多个组合框时如何验证。

```
bool tat;
public bool val2()
{
    foreach (Control item in panel1.Controls.OfType<ComboBox>())
    {
        if (item.Text == string.Empty)
        {
            tat = true;
        }
        else
        {
            tat = false;
        }
    }

    return tat;
}

private void button2_Click(object sender, EventArgs e)
{
    bool valo = val2();

    if (!valo)
    {
        Form4 fp = new Form4();
        fp.Show();
    }
    else
    {
        MessageBox.Show("error");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:42:49.603

您正在做的是通过循环*覆盖*`tat`每次的值，例如：

```
ComboBox1    "Hello"   tat = false
ComboBox2    Empty     tat = true
ComboBox3    "World"   tat = false again!
             Return:   false 
```

*如果任何*组合框为空，我假设您想返回 true ；您可以按如下方式修改您的功能：

```
public bool val2()
{
    foreach (Control item in panel1.Controls.OfType<ComboBox>())
    {
        if (item.Text == string.Empty)
        {
            // We know one is empty so we must return true.
            return true;
        }
    }
    // We know none are empty so we can return false.
    return false;
} 
```

或者由于您已经在使用 LINQ，您可以使用

```
public bool val2()
{
    return panel1.Controls.OfType<ComboBox>().Any(cb => cb.Text == String.Empty);
} 
```

这将做完全相同的事情。

* * *

编辑：看起来您的*控件*`ComboBox`不是的*直接*子级`panel1`，而是在某种自定义用户控件中。因此，您将需要类似的东西

```
return panel1.Controls
    .OfType<YourCustomUserControlType>()
    .Select(uc => uc.NameOfYourComboBox)
    .Any(cb => cb.Text == String.Empty); 
```

因此，该`OfType`行现在选择您的自定义用户控件，该`Select`行获取您的用户控件之一并找到`ComboBox`，并且该`Any`行检查它们是否都有值。

原始风格的替代品：

```
public bool val2()
{
    foreach (YourCustomUserControlType item in 
        panel1.Controls.OfType<YourCustomUserControlType>())
    {
        ComboBox cb = item.NameOfYourComboBox;
        if (cb.Text == string.Empty)
        {
            // We know one is empty so we must return true.
            return true;
        }
    }
    // We know none are empty so we can return false.
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:47:10.020

问题是您要决定`val2`每个组合框的值。可能最后一个组合框有一个值，因此显示的是表单而不是消息框。如果您希望结果`true`仅在*所有*组合框都具有选定值时，您需要寻求如下解决方案：

假设所有组合框都有选定的值。只要只有*一个* 没有值，就返回`true`；

```
public bool val2()
{
    foreach (Control item in panel1.Controls.OfType<ComboBox>())
    {
        if (String.IsNullOrEmpty(item.Text))
            return true;
    }
    return false;
}

private void button2_Click(object sender, EventArgs e)
{

    bool valo = val2();

    if (!valo)
    {
        Form4 fp = new Form4();
        fp.Show();
    }
    else
    {
        MessageBox.Show("error");

    }
} 
```

# c++ - 模板时强制特定的重载

> ID：13910747
> 
> 赞同：3
> 
> 时间：2012-12-17T08:38:31.030
> 
> 标签：c++, templates, c++11, metaprogramming

这个问题如下：[模板模板时强制特定重载](https://stackoverflow.com/q/13910355/882932)

考虑以下代码：

```
#include <iostream>
#include <vector>
#include <array>
#include <type_traits>

// Version A
template<typename T>
void f(const T& x)
{
    std::cout<<"Version A"<<std::endl;
}

// Version B
template<typename... T1, template<typename...> class T>
void f(const T<T1...>& x)
{
    std::cout<<"Version B"<<std::endl;
}

// Version C
template<typename T1, typename TN, template<typename, TN...> class T, TN... N>
void f(const T<T1, N...>& x)
{
    std::cout<<"Version C"<<std::endl;
}

// Main
int main(int argc, char* argv[])
{
    f(double());
    f(std::vector<double>());
    f(std::array<double, 3>()); // <- How to force the use of Version C ?
    return 0;
} 
```

默认情况下，它将产生（使用 GCC 4.7.1）：

```
Version A
Version B
Version A 
```

`Version C`当传递的类型是具有良好形状的模板时，如何强制使用（我可以添加新版本`f`，我可以添加`std::enable_if`或其他 C++11 类型特征语法，但如果可能的话，我想避免添加辅助类) ?

注意：这个技巧应该适用于每个整数类型 TN...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:49:51.307

不能在模板实参推导中推导出非类型模板实参的类型。这在标准中有明确规定：

> ### 14.8.2.5 从类型推导模板参数 [temp.deduct.type]
> 
> 13 - 不能从非类型模板参数的类型推导出模板类型参数。
> 14 - [示例：
> 
> ```
> template<class T, T i> void f(double a[10][i]);
> int v[10][20];
> f(v); // error: argument for template-parameter T cannot be deduced 
> ```
> 
> —结束示例]

这有效：

```
// Version C
template<typename T1, template<typename, size_t...> class T, size_t... N>
void f(const T<T1, N...>&) {
    std::cout<<"Version C"<<std::endl;
} 
```

# iphone - 如何检测用户选择不允许 MKMapView for iphone

> ID：13910748
> 
> 赞同：5
> 
> 时间：2012-12-17T08:38:31.420
> 
> 标签：iphone, ios, mkmapview, cllocationmanager

我创建了一个使用 mapview 的应用程序。对于我使用`MKMapKit`图书馆的地图。当用户在警报窗口上选择“允许”按钮时，一切正常。但我想检测用户何时选择“不允许”。我找到了大多数开发人员使用的委托

`(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error`

但委托没有被调用。

也许我错过了一些东西。在我的头文件（.h）中，我已经实现了`MKMapViewDelegate`. 还有什么我需要做的吗？

我需要添加一些额外的类`CLLocationManager`吗？

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T08:45:24.967

为了监视位置服务授权状态的变化，您需要实现获得类似的`CLLocationManagerDelegate`方法`locationManager:didChangeAuthorizationStatus:`

```
-(void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {

    if (status == kCLAuthorizationStatusDenied) {
        // permission denied
    }
    else if (status == kCLAuthorizationStatusAuthorized) {
        // permission granted
    }
} 
```

有关可能的授权状态及其描述的完整列表，您可以查看[CLAuthorizationStatus](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)的官方文档。

**编辑**

您可能已经有了 的实例`CLLocationManager`，我们称之为`locationManager`。然后为了实现你的委托，你让你的类符合`CLLocationManagerDelegate`协议（你可以在类的头文件中声明它——这不是强制性的，但它会为你提供一些静态检查工具）并将其分配给如下`delegate`属性：`locationManager`

```
locationManager.delegate = self; //assuming that self is gonna be the delegate 
```

如果您按照说明做了所有事情，您的控制器将在每次授权更改时被调用，如文档所述：

> 每当应用程序使用位置服务的能力发生变化时，都会调用此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:44:30.777

你可以试试这个：

```
if(![CLLocationManager locationServicesEnabled])
{
    // alert location services denied
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T07:10:05.957

```
// in appdelegate put thecode

-(void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {

    if (status == kCLAuthorizationStatusDenied)
     {
        //location denied, handle accordingly
         NSLog(@"Dont allow");

    }
    else if (status == kCLAuthorizationStatusAuthorized)
    {
        NSLog(@"Allow");
        //hooray! begin startTracking
    }

} 
```

// 每当你检查

```
- (IBAction)showMapBtnPressed:(id)sender {

    if([CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied)
    {
        NSLog(@"Dont allow");

    }else
    {
        NSLog(@" allow");
    }

} 
```

# c - *ptr[10] 和 (*ptr)[10] 之间的区别

> ID：13910749
> 
> 赞同：17
> 
> 时间：2012-12-17T08:38:44.500
> 
> 标签：c, pointers

对于以下代码：

```
 int (*ptr)[10];
    int a[10]={99,1,2,3,4,5,6,7,8,9};
    ptr=&a;
    printf("%d",(*ptr)[1]); 
```

它应该打印什么？我期待这里的垃圾值，但输出是`1`.
（为此我得出结论，以这种方式初始化指针数组，即`ptr[10]`开始按顺序指向元素`a[10]`）。

但是这个代码片段呢：

```
int *ptr[10];
int a[10]={0,1,2,3,4,5,6,7,8,9};
*ptr=a;
printf("%d",*ptr[1]); 
```

它给出了分段错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T08:39:56.270

`int *ptr[10];`

这是一个由 10 个`int*`指针组成的数组，不像你想象的那样，一个指向 10 `int`s数组的指针

`int (*ptr)[10];`

这是一个指向 10 个数组的指针`int`

我相信`int *ptr;`两者都可以指向一个数组，但是给定的形式只能指向一个 10 `int`s的数组

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T08:45:57.190

```
int (*ptr)[10]; 
```

是一个指向 10 个整数数组的指针。

```
int *ptr[10]; 
```

是一个包含 10 个指针的数组。

**段错误的原因：**

*ptr=a; printf("%d",*ptr[1]);

在这里，您正在分配指向元素的`a`数组`ptr`地址`a[0]`。这相当于：`*ptr=&a[0];`

但是，当您打印时，您访问`ptr[1]`的是一个未初始化的指针，它是未定义的行为，因此会产生段错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T08:40:14.023

`int(*)[10]`是指向具有 10 个成员的 int 数组的指针。即它指向`int a[10]`.

`int *[10]`整数指针数组在哪里

```
#include <stdio.h>
int main()
{

int *ptr[10];
int a[10]={0,1,2,3,4,5,6,7,8,9};

printf("\n%p  %p", ptr[0], a);

*ptr=a; //ptr[0] is assigned with address of array a.

printf("\n%p  %p", ptr[0], a); //gives you same address

printf("\n%d",*ptr[0]); //Prints zero. If *ptr[1] is given then *(ptr + 1) i.e ptr[1] is considered which is uninitialized one.

return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T08:42:30.967

int (*p)[10] 意味着 p 现在是一个指向大小为 10 的整数数组的指针。

int *p[10] 表示 p 是一个由 10 个整数指针组成的数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-15T07:07:11.980

`int (*p)[10]`是指向每行中包含 10 个整数的数组的指针，即可以有任意数量的行。基本上它可以用来指向一个二维数组，并且可以通过递增来访问维度`i`，这与这里访问`*(p+i)[10]`的相同。`a[i][10]``'i=1,2,3...'``1,2,3.. rows`

其中，`int *p[10]`是一个由 10 个整数指针组成的数组。

如果数组是二维的，例如

`b[2][10]={{0,1,2,3,4,5,6,7,8,9},{10,11,12,13,14,15,16,17,18,19}};` 基本上， `(*ptr)[10] // where the higher dimension index is omitted i.e, 2`可以用作指向数组的二维指针（每行包含 10 个元素，即第一维），如`(*ptr)[10] = &b`. 在`printf("%d",(*ptr)[1]);`as provided中，与对第一个维度的计算结果`(*ptr)`相同，即值为 0。同样，要访问数组的第二个维度，表达式将是或或给出第二个维度的第一个元素，即 10。`*(ptr+0)``b[0][0]``b[1][0]``**(ptr+1)``*(ptr+1)[0]``*(*(ptr+i)+j); // where i=1 and j=0`

我已经回答了很长时间，所以很容易理解。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-21T18:12:42.227

仅有的两个用例`(*ptr)[10]`是：

*   使用二维数组时；
*   typedef 固定长度数组。

由于第一个案例已经在上面由 Sreeharsha Punyasamudram 解释过，我将解释更奇特的用例。

```
 #include <stdio.h>

typedef int arr1d10[10];
typedef int arr2d3[3][3];

void test1d0(arr1d10 *arr)
{
    /* This is the same as the case with function test1d1(). */
    printf("Element: %d\n", (*arr)[0]);
}

void test1d1(int (*arr)[10])
{
    /* As arr is a pointer to an array of 10 integers, pointer arithmetic will work with the size of an array of 10 integers, i.e. 
       when you increment arr it will increment by sizeof(arr1d10), which is 40 bytes.
       That's why when you dereference it, you can't simply do arr[1], because it will increment arr by 40 bytes forward.
       Also when dereferencing it, because it thinks it points to a whole array it will give you that array - it's address.
       This is another reason you can't do just arr[i], because those will be just addresses.
       The correct way is to dereference it once(*arr)), to get the address (think of implicitely casting to int*) and then you can do as usually (*arr)[1]).
    */
    printf("Element: %d\n", (*arr)[1]);
}

void test2d0(arr2d3 *arr2d)
{
    /* This is a little more complicated, but the principle is the same as above. */
    printf("Element: %d\n", (*arr2d)[0][0]);
}

void test2d1(int (*arr2d)[3][3])
{
    printf("Element: %d\n", (*arr2d)[0][1]);
}

int main(void)
{
    arr1d10 arr1d = {0, 1, 2};
    arr2d3 arr2d = { {0,1},{2,3},{3,4}};
    int (*p1d)[10] = &arr1d; 
    int (*p2d)[3][3] = &arr2d;

    printf("********** PRINT 1D array **********\n");
    test1d0(&arr1d);
    test1d1(&arr1d);
    test1d0(p1d);
    test1d1(p1d);

    printf("********** PRINT 2D array **********\n");
    test2d0(&arr2d);
    test2d1(&arr2d);
    test2d0(p2d);
    test2d1(p2d);

    return 0;
} 
```

# mongodb - 随机排序

> ID：13910751
> 
> 赞同：15
> 
> 时间：2012-12-17T08:38:49.290
> 
> 标签：mongodb, mongodb-query

关于如何从集合中获取随机文档的问题已经被问过很多次，并且有关于这个主题的建议。

我需要的是从集合中获取几个随机文档，更糟糕的是 - 这些文档必须符合某些标准（我的意思是经过过滤）。例如，我有一组文章，其中每篇文章都有一个“主题”字段。用户选择一个他感兴趣的主题，我的数据库必须以随机顺序每次显示相应的文章。

显然，之前讨论的 hack 对我没有帮助。实现我想要的唯一方法是查询仅获取 id 的相应主题：

```
var arr = db.articles.find({topic: 3}, {_id:1}).toArray(); 
```

然后根据接收到的文档数量生成随机数字序列，然后使用随机数作为该数组的索引从数组中获取文档 id，最后向 mongodb 发出另一个请求以获取具有这些随机选择的 id 的文档。

如您所见，这似乎有点太慢了，特别是如果第一次查询返回的文章太多:)

所以我认为可能有一些 mongodb 命令根据它们在索引中的位置通过索引键获取文档。关键是我可以像这样创建覆盖的复合索引：

```
db.articles.ensureIndex({topic: 1, _id:1}); 
```

现在我的查询只需要扫描索引中右 _ids 的连续行。如果我可以通过那些“_ids”位置从集合中请求文档，那么我可以在一个请求中完成整个事情！就像是：

```
var cursor = db.articles.find({topic:3, $indexKeyPosition: {$in: myRandomSequence}}); 
```

有谁知道这些功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-20T15:46:32.550

现在，你应该可以使用[`$sample`](https://docs.mongodb.org/master/reference/operator/aggregation/sample/#pipe._S_sample)聚合功能了。

示例（未经测试）：

```
db.articles.aggregate([
    { $match : { topic : 3 } },
    { $sample : { size: 3 } }
]) 
```

但是请注意，它可能会多次返回同一个文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T08:53:32.983

> 所以我认为可能有一些 mongodb 命令根据它们在索引中的位置通过索引键获取文档。关键是我可以像这样创建覆盖的复合索引：

不，MongoDB 中没有这样的功能，尽管能够随机化结果集是个好主意。同时这里有一个 JIRA：[https ://jira.mongodb.org/browse/SERVER-533](https://jira.mongodb.org/browse/SERVER-533)

由于无法从索引位置进行选择，因此它可以使用索引并因此进行单次往返，因此您别无选择，只能打开多个游标。

当前的解决方案取决于结果集中有多少文档。

如果您的结果集中有少量文档，您可以轻松解决此问题`skip(rand())`，`limit(1)`但是您必须注意这两者`skip()`并且`limit()`不能有效地使用索引。

这并不意味着它会扫描整个 Btree 它意味着它会扫描到你`skip()`。

这意味着，如果您的结果集变大并且`rand()`数量变得很大，您将看到严重的性能问题，就像许多人一样。

可能解决此问题的一种好方法是维护：

*   `0`和之间的 rand() 字段值`1`
*   或增量 ID 字段（[http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)）

并使用该新字段“跳过”使用其余查询，例如：

```
var arr = db.articles.find({topic: 3, rand: rand()}, {_id:1}).limit(7).toArray(); 
```

`0`将使用to 的`1`想法得到 7 个随机行。

这种随机排序能力依赖于不断变化的数据集来帮助在排序中创建随机性。当然，如果结果集是连续静态的，这将不起作用。

至于使用batchSize，它在这里变得无关紧要，事实上通常也是如此。例如，您使用 BatchSize 来获取所有结果的逻辑并不完全有意义，因为 BatchSize 通常具有 16MB 的绝对最大大小。这意味着，如果您的文件很大，您可能无法获得您认为的单次往返。

这也只规定服务器将一次发送所有这些数据，它并不表示放置在服务器上的工作量，只是一次通过网络发送的数据量。

因此，考虑到您必须使用多个游标（我推荐的方式）来执行此操作，您可以运行：

```
var arr = db.articles.find({topic: 3, rand: {$gte:rand()}}).sort({rand:1}).limit(1); 
```

几次，或者无论你需要多少次，都会重复。这与游标的正常迭代没有太大区别，只要您拥有正确的索引，应该会非常快。

还有另一种方法，但我不推荐它。你可以运行一个 MR，比如说，每小时一次或者创建另一个集合的东西，`_id`这`rand()`意味着你可以执行我展示的第一个查询：

```
var arr = db.articles.find({topic: 3, rand: rand()}, {_id:1}).limit(7).toArray(); 
```

并且真的得到7个随机记录，因为`rand()`会，当然会有所不同。但这不是实时的，对于大型数据集上的服务器也不是很好，因此我不推荐这样的事情。

### 编辑

还有另一种方式。使用自动递增的 id，您可以执行一个`$or`语句来一次挑选出 7 `rand()`s。然而，这引入了另一个问题，删除。

如果您删除任何行，您可能会遇到`rand()`不存在的行，因此不会返回任何行。由于不维护自动递增的 id 以对抗删除服务器端，因此您必须自己执行此操作。这不是一件容易或可扩展的事情。

要添加到此`$or`语句中不能`limit()`ed on 子句，这意味着您无法通过执行 sub select type`$or`来解决此问题，以使 MongoDB 仅`$or`使用`$gte`.

这同样适用于`rand()`between`0`和`1`。`$or`如果你可以限制子句，这将适用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T08:46:11.730

您可以（如在分页中）计算有多少文档与查询匹配。然后使用 skip(random_value) 和 limit(1) 进行 N 次查询。

```
db.collection.count({field:value,field2:value2})

db.collection.find({field:value,field2:value2}).skip(n).limit(1) 
```

如果集合为查询建立索引，它必须很快。

# php - 如何通过 htaccess 将任何 QUERY_STRING 发送到我的 index.php

> ID：13910752
> 
> 赞同：0
> 
> 时间：2012-12-17T08:38:55.377
> 
> 标签：php, .htaccess

我想发送用户在我的域中键入的所有地址 url

QUERY_STRING 到根目录到文件 index.php

带参数 url=QUERY_STRING

例如，如果用户类型`www.mydomain.com/abc/123`

这将是`www.mydomain.com/index.php/?url=abc/123`

我的 htaccess 代码不发送参数 url 我不知道为什么：

```
# Use PHP5 Single php.ini as default
AddHandler application/x-httpd-php5s .php

RewriteEngine On

RewriteCond %{QUERY_STRING} ^(.*)$
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

我的 php 文件：

```
<?php

    if ($GET['url']){
        $url = $GET['url'];
        echo ($url.'<br />');
    }
?>
we are in root directory. 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:59:35.070

我建议将`[NE]`标志添加到您的 RewriteRule

```
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L,NE] 
```

这将确保您的问号不会被转义。

我对您的 RewriteCond 条件感到有些困惑。正则表达式应匹配任何可能的字符串，包括空字符串，因此条件应始终通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:40:42.247

它在`$_SERVER`：`$_SERVER['QUERY_STRING']`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:42:14.067

您是否*需要*将其设为查询字符串参数？否则，只需将他的请求重定向到 index.php 并`$_SERVER['REQUEST_URI']`在 php 中使用，它将包含原始请求的路径。

这是一个适用的`.htaccess`规则：

```
DirectoryIndex index.php

RewriteEngine on

RewriteCond %{REQUEST_FILENAME}  -d
RewriteRule  ^.*$  -  [L]

RewriteCond %{REQUEST_FILENAME}  -f
RewriteRule  ^.*$  -  [L]

RewriteRule ^.*$    index.php [L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T08:51:07.427

```
 RewriteEngine on

 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f

 RewriteRule ^(.*)$    index.php?url=$1 [L,QSA] 
```

它会工作..

# c# - 停止计时器，直到方法完成

> ID：13910763
> 
> 赞同：0
> 
> 时间：2012-12-17T08:40:01.807
> 
> 标签：c#, .net, timer

有人可以帮我停止计时器，直到方法“Utils.ItsTimeToRemind(remind.FormTag);” 完成了吗？然后重新开始...

```
public static Timer TIMER; 

public TimerClass()
{
    TimerCallback callback = new TimerCallback(Tick);
    TIMER = new Timer(callback, null, 0, 1000);
}

static public void Tick(Object stateInfo)
{
    List<RemindObject> remList = Utils.Reminds;
    foreach (RemindObject remind in remList)
    {
        if (remind.reminTime.CompareTo(DateTime.Now) < 0)
        {
            Utils.ItsTimeToRemind(remind.FormTag);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:43:12.387

您可以`timer`在`Utils.ItsTimeToRemind`方法中传递对 的引用，因此它将变为：

`Utils.ItsTimeToRemind(remind.FormTag, ref timer);`

然后，您可以停止`timer`该方法。

```
public void ItsTimeToRemind(var, ref timer)
{
    timer.Stop();

    //Method stuff

    timer.Start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:58:34.453

Neil Knight 的解决方案有一个小问题 - 最好在一个`try-catch`块中启动/停止计时器。如果抛出异常，您可以确保计时器将重新启动：

```
using System.Timers.Timer;

private static Timer timer; 

static public void Tick(Object stateInfo)
{
    try
    {
        timer.Stop();

        List<RemindObject> remList = Utils.Reminds;
        foreach (RemindObject remind in remList)
        {
            if (remind.reminTime.CompareTo(DateTime.Now) < 0)
            {

                Utils.ItsTimeToRemind(remind.FormTag);
            }
        }
    }
    catch(Exception ex)
    {
        // log exception, etc
    }
    finally
    {
        timer.Start();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:43:00.763

您可以只使用不同的计时器，例如这个[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)，它允许您设置 Enabled = false （您可以在输入你的 Tick （或任何你想叫它的名字）方法，然后做你的工作，然后在你的 Tick 方法结束时设置 Enabled = true。

# java - 带有子类的 Java 抽象类

> ID：13910771
> 
> 赞同：-4
> 
> 时间：2012-12-17T08:40:30.740
> 
> 标签：java, abstract-class

```
 abstract class Shape{
       final int b = 20;
       public void display(){
         System.out.println("This is display method");
       }
       abstract public void calculateArea();
    }

    class Rectangle extends Shape{
       public static void main(String args[]){
          Rectangle obj = new Rectangle();
          obj.display();
         //obj.b=200;
      }
    } 
```

当我执行此代码时，它输出“这是显示方法”，但在子类中我为子类创建对象并调用父类方法。为什么它调用父类方法。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:43:22.003

1）`b`在`final`父类中。你不能改变价值。你会在这里得到编译错误。
2)`public void calculateArea()`子类中没有方法。你也会在这里得到编译错误
3）在你的代码中，方法`void display()`没有被覆盖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:51:07.797

它编译吗？（伊利亚完全正确）

顺便说一句，它正在调用父方法，因为您没有在子类中覆盖它。

```
abstract class Shape {

    [...]

    public void display() { System.out.println("Parent"); }

}

public class Rectangle extends Shape {

   [...]

    @Override
    public void display() { System.out.println("Child"); }

    public static void main(String[] args)
    {
        new Rectangle().display();

    }

} 
```

这输出：

```
Child 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:52:39.963

o/p 没有错。[矩形http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)可以访问 shape 的公共方法

# ios - 从 iTunes 安装后使用选项或自定义 URL 方案启动应用程序

> ID：13910772
> 
> 赞同：7
> 
> 时间：2012-12-17T08:40:30.543
> 
> 标签：ios, url-scheme, launching-application, itunes-store, custom-url

当他/她从 iTunes Store 的链接安装应用程序时，是否可以将用户导航到我们应用程序的特定屏幕。

假设我通过电子邮件将我们的应用程序的链接分享给了某个朋友，如果该应用程序已经安装在他/她的设备上，那么我们的应用程序将通过自定义 url 方案启动，但如果尚未安装应用程序，那么他将被重定向到iTunes 商店以及将在应用程序首次运行时使用的附加参数，在成功安装应用程序后，应该启动在 iTunes 链接参数中传递的选项。

步骤： URL 点击应用程序-->应用程序未安装，因此在 safari 中打开它->服务器将重定向到应用程序的 iTunes 链接以及作为附加参数的启动选项-->转到 iTunes 下载并安装应用程序->启动应用程序通过 LaunchOptions 或 Custom URL Scheme --> Process Launch Options 并导航到适当的屏幕

# opencv - 在任何地方运行基于 gpu-opencv 的应用程序

> ID：13910773
> 
> 赞同：1
> 
> 时间：2012-12-17T08:40:33.090
> 
> 标签：opencv

怎么可能有一个可执行文件（基于启用了 CUDA 支持的 opencv 2.4.3）运行时检查 CUDA 是否存在并调度是否使用来自 opencv 的 gpu 或 cpu 算法？

基于 gpu-opencv 的应用程序 simple 不会在没有 CUDA 的机器上启动（需要 cudart、nvcuda dll）。

[提示](https://github.com/martijnberger/clew)为 OpenCL 做了这个技巧。

# spring - JBoss7.1.1.Final 持久化问题

> ID：13910775
> 
> 赞同：0
> 
> 时间：2012-12-17T08:40:35.193
> 
> 标签：spring, postgresql, jpa, jsf-2, jboss7.x

我已将在 jboss6 中完美运行的现有 Web 应用程序配置到 jboss7 中。但是当我将它配置为 JBoss 7 时，我得到了这个异常，但我找不到解决方案。这是 JBoss7 中的错误还是我的配置有什么问题？

**JBoss7 控制台：**

```
Calling "C:\jboss-as-7.1.1.Final\bin\standalone.conf.bat"
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: C:\jboss-as-7.1.1.Final

  JAVA: C:\Program Files\Java\jdk1.6.0_22\bin\java

  JAVA_OPTS: -XX:+TieredCompilation -Dprogram.name=standalone.bat -Xms64M -Xmx512M -XX:MaxPermSize=256M -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djava.net.prefe
rIPv4Stack=true -Dorg.jboss.resolver.warning=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.server.default.config=standalone.xml

===============================================================================

13:19:59,358 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
13:19:59,525 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
13:19:59,593 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
13:20:00,820 INFO  [org.xnio] XNIO Version 3.0.3.GA
13:20:00,820 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
13:20:00,833 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
13:20:00,841 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
13:20:00,865 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
13:20:00,906 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class org.postgresql.Driver (version 9.0)
13:20:00,944 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
13:20:00,945 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
13:20:00,975 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
13:20:00,967 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
13:20:01,033 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
13:20:01,076 INFO  [org.jboss.as.connector] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
13:20:01,152 INFO  [org.jboss.as.naming] (MSC service thread 1-4) JBAS011802: Starting Naming Service
13:20:01,166 INFO  [org.jboss.as.security] (MSC service thread 1-1) JBAS013100: Current PicketBox version=4.0.7.Final
13:20:01,193 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]
13:20:01,432 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-1) Starting Coyote HTTP/1.1 on http--127.0.0.1-8080
13:20:01,478 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-3) JBoss Web Services - Stack CXF Server 4.0.2.GA
13:20:01,804 INFO  [org.jboss.as.remoting] (MSC service thread 1-4) JBAS017100: Listening on /127.0.0.1:9999
13:20:01,805 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-2) JBAS015012: Started FileSystemDeploymentService for directory C:\jboss-as-7.1.1.Final\standalone\deployments
13:20:01,808 INFO  [org.jboss.as.remoting] (MSC service thread 1-4) JBAS017100: Listening on /127.0.0.1:4447
13:20:01,826 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment myweb.war
13:20:01,926 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) JBAS010400: Bound data source [java:jboss/datasources/MywebDS]
13:20:01,956 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "myweb.war"
13:20:04,847 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry activation.jar in "/C:/jboss-as-7.1.1.Final/bin/content/myweb.war/WEB-INF/lib/com.springsource.javax
.mail-1.4.0.jar"  does not point to a valid jar for a Class-Path reference.
13:20:05,100 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Tomcat6InjectionProvider:org.apache.catalina.util.DefaultA
nnotationProcessor' for service type 'com.sun.faces.spi.injectionprovider'
13:20:05,104 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Jetty6InjectionProvider:org.mortbay.jetty.plus.annotation.
InjectionCollection' for service type 'com.sun.faces.spi.injectionprovider'
13:20:05,111 INFO  [org.jboss.as.pojo] (MSC service thread 1-3) JBAS017000: Found legacy bean/pojo namespace: urn:jboss:bean-deployer:2.0 - might be missing some xml features (potential exceptions).
13:20:05,297 INFO  [org.jboss.as.jpa] (MSC service thread 1-3) JBAS011401: Read persistence.xml for MywebPU
13:20:06,135 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) JBAS011402: Starting Persistence Unit Service 'myweb.war#MywebPU'
13:20:06,261 INFO  [org.hibernate.annotations.common.Version] (MSC service thread 1-1) HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
13:20:06,266 INFO  [org.hibernate.Version] (MSC service thread 1-1) HHH000412: Hibernate Core {4.0.1.Final}
13:20:06,268 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-1) HHH000206: hibernate.properties not found
13:20:06,269 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-1) HHH000021: Bytecode provider name : javassist
13:20:06,285 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-1) HHH000204: Processing PersistenceUnitInfo [
        name: MywebPU
        ...]
13:20:06,331 WARN  [org.jboss.modules] (MSC service thread 1-1) Failed to define class org.springframework.scheduling.quartz.QuartzJobBean in Module "deployment.myweb.war:main" from Service Modu
le Loader: java.lang.LinkageError: Failed to link org/springframework/scheduling/quartz/QuartzJobBean (Module "deployment.myweb.war:main" from Service Module Loader)
        at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:396)
        at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243)
        at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73)
        at org.jboss.modules.Module.loadModuleClass(Module.java:517)
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.6.0_22]
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632) [rt.jar:1.6.0_22]
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616) [rt.jar:1.6.0_22]
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) [rt.jar:1.6.0_22]
        at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327)
        at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391)
        at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243)
        at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73)
        at org.jboss.modules.Module.loadModuleClass(Module.java:517)
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getPackagesInJar(HibernateAnnotationScanner.java:171)
        at org.hibernate.ejb.Ejb3Configuration.addScannedEntries(Ejb3Configuration.java:489) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:851) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:596) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:72) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_22]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_22]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_22]
Caused by: java.lang.NoClassDefFoundError: org/quartz/Job
        at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.6.0_22]
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632) [rt.jar:1.6.0_22]
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616) [rt.jar:1.6.0_22]
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) [rt.jar:1.6.0_22]
        at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327)
        at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391)
        ... 36 more
Caused by: java.lang.ClassNotFoundException: org.quartz.Job from [Module "deployment.myweb.war:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        ... 42 more

13:20:06,445 WARN  [org.jboss.modules] (MSC service thread 1-1) Failed to define class com.myweb.security.util.schedule.OrderExpireSchedule in Module "deployment.myweb.war:main" from Servi
ce Module Loader: java.lang.LinkageError: Failed to link com/myweb/security/util/schedule/OrderExpireSchedule (Module "deployment.myweb.war:main" from Service Module Loader)
        at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:396)
        at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243)
        at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73)
        at org.jboss.modules.Module.loadModuleClass(Module.java:517)
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getPackagesInJar(HibernateAnnotationScanner.java:171)
        at org.hibernate.ejb.Ejb3Configuration.addScannedEntries(Ejb3Configuration.java:489) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:851) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:596) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:72) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_22]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_22]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_22]
Caused by: java.lang.NoClassDefFoundError: org/springframework/scheduling/quartz/QuartzJobBean
        at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.6.0_22]
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632) [rt.jar:1.6.0_22]
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616) [rt.jar:1.6.0_22]
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) [rt.jar:1.6.0_22]
        at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327)
        at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391)
        ... 20 more
Caused by: java.lang.ClassNotFoundException: org.springframework.scheduling.quartz.QuartzJobBean from [Module "deployment.myweb.war:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        ... 26 more

13:20:06,535 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.persistenceunit."myweb.war#MywebPU": org.jboss.msc.service.StartException i
n service jboss.persistenceunit."myweb.war#MywebPU": Failed to start service
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_22]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_22]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_22]
Caused by: java.lang.RuntimeException: error trying to scan <jar-file>: vfs:/C:/jboss-as-7.1.1.Final/bin/content/myweb.war/WEB-INF/classes/
        at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:854)
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:596)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:72)
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        ... 3 more
Caused by: java.lang.RuntimeException: JBAS011431: Could not load entity class 'com.myweb.security.util.schedule.OrderExpireSchedule' with PersistenceUnitInfo.getClassLoader()
        at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getPackagesInJar(HibernateAnnotationScanner.java:175)
        at org.hibernate.ejb.Ejb3Configuration.addScannedEntries(Ejb3Configuration.java:489)
        at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:851)
        ... 9 more
Caused by: java.lang.ClassNotFoundException: com.myweb.security.util.schedule.OrderExpireSchedule from [Module "deployment.myweb.war:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        at org.jboss.as.jpa.hibernate4.HibernateAnnotationScanner.getPackagesInJar(HibernateAnnotationScanner.java:171)
        ... 11 more

13:20:06,605 INFO  [org.jboss.as] (MSC service thread 1-1) JBAS015951: Admin console listening on http://127.0.0.1:9990
13:20:06,607 ERROR [org.jboss.as] (MSC service thread 1-1) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 7526ms - Started 313 of 552 services (161 services failed or missing depe
ndencies, 77 services are passive or on-demand)
13:20:06,811 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "myweb.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jbo
ss.persistenceunit.\"myweb.war#MywebPU\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"myweb.war#MywebPU\": Failed to start service"}}
13:20:07,164 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment myweb.war in 352ms
13:20:07,166 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.persistenceunit."myweb.war#MywebPU": org.jboss.msc.service.StartException in service jboss.persistenceunit."myweb.war
#MywebPU": Failed to start service

13:20:07,171 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" =>
{"JBAS014671: Failed services" => {"jboss.persistenceunit.\"myweb.war#MywebPU\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"myweb.war#MywebPU\"
: Failed to start service"}}}} 
```

我的`persistence.xml`档案

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
          <persistence-unit name="MywebPU" transaction-type="JTA">
                    <provider>org.hibernate.ejb.HibernatePersistence</provider>
                    <jta-data-source>java:jboss/datasources/MywebDS</jta-data-source>

                    <class>com.myweb.entity.Account</class>
                    <class>com.myweb.entity.Users</class>
                    <class>com.myweb.entity.Authorities</class>
                    <class>com.myweb.entity.Country</class>
                    <class>com.myweb.entity.ExpiredOrders</class>

                    <properties>
                              <property name="hibernate.connection.driver_class" value="org.postgresql.Driver" />
                              <property name="hibernate.connection.pool_size" value="5" />
                              <property name="hibernate.show_sql" value="false" />
                              <property name="hibernate.format_sql" value="false" />
                              <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup" />
                              <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect" />
                              <property name="hibernate.hbm2ddl.auto" value="update" />
                    </properties>

          </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:07:41.887

从您的堆栈跟踪来看，JBoss 似乎找不到石英库。尝试将它包含在您的 war 文件中，因为 JBoss 7 默认不包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:41:35.477

根据您的例外情况，您是否错过了`com.myweb.security.util.schedule.OrderExpireSchedule`配置`persistence.xml`？

# ruby-on-rails - Resque 没有找到 ffmpeg

> ID：13910781
> 
> 赞同：2
> 
> 时间：2012-12-17T08:41:24.380
> 
> 标签：ruby-on-rails, ruby, ffmpeg, resque, god

我正在使用 resque 来排队一些编码作业。我有工人负责这些工作并进行一些转码。问题`system "mencoder .."`工作正常，但未`system "ffmpeg .."`找到抛出，与`system "qt-faststart .."` 我安装 mencoder 使用`sudo apt-get install`. ffmpeg 和 qt-faststart 是从源代码构建的。所以 mencoder 在 /usr/bin 中，另外两个在 /usr/local/bin 中。因此，我尝试的下一件事是在系统命令中使用完整路径，这也返回未找到。然后我将 ffmpeg 和 qt-faststart 复制到 /usr/bin.. 仍然得到“未找到” 我的工作代码独立运行，但是当上帝运行它时，ffmpeg 和 qt-fasstart 无法执行。是的，我已将上帝配置为观看 resque。现在，我不知道还能尝试什么！有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:12:01.520

显而易见和最简单的方法只是给出系统方法的完整路径。像这样

```
system("/usr/local/bin/ffmpeg") 
```

但实际上这首先不应该作为一个问题存在，尤其是你说应对无济于事。

尝试从 resque perform 方法打印 ENV['PATH']

它可能有助于理解问题是什么，当然要确保 ffmpeg 位于 /usr/local/bin/

```
which ffmpeg 
```

# javascript - 在其他 div 上动态隐藏 div

> ID：13910782
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:41:33.470
> 
> 标签：javascript, ajax

```
<script type="text/javascript">
    function bookRetr(str) {
        if (str == "") {
            document.getElementById("more-info").innerHTML="";
            return;
        } 

        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("more-info").innerHTML=xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET","showbook.php?id="+str,true);
        xmlhttp.send();
    }
</script>

<div class="bookProp" id="one" onClick="bookRetr(this.id)">
    <div class="booknoHolder" id="in">&nbsp;01&nbsp;</div>
</div>

<div class="bookProp" id="two" onClick="bookRetr(this.id)">
    <div class="booknoHolder" id="in">&nbsp;02&nbsp;</div>
</div>

<div class="bookProp" id="three" onClick="bookRetr(this.id)">
    <div class="booknoHolder" id="in">&nbsp;03&nbsp;</div>
</div> 
```

该脚本运行良好并完成了我想要的工作，加载书籍信息并将它们加载到 id `more-info`。`booknoHolder` 但是当我单击div 类时，我还想隐藏/删除div 类`bookProp`。我尝试了一些 jQuery 代码，但没有任何效果。值得一提的是，div 类`bookProp`实际上是由 PHP while 循环生成的，因此条目的数量是动态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:44:01.240

您说您正在使用 jQuery，但我在您的代码中没有看到任何 jQuery。但是如果你想在 jQuery 中隐藏一些元素，你可以这样做：

```
$('.booknoHolder').hide(); 
```

如果您想`booknoHolder`在单击 a 时隐藏元素`bookProp`，只需执行以下操作：

```
$(function() {
    $('body').on('click', '.bookProp', function() {
        $(this).find('.booknoHolder').hide();
    });
}); 
```

你可以在这里找到更多信息：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:49:56.847

对于 jQuery 解决方案，试试这个：

```
<script type="text/javascript">
    function bookRetr(str) {
        // Get the HTML via AJAX
        $.get('showbook.php?id=' + str, function(html) {
            $("#more-info").html(html);
        });

        // Assuming .bookProp is appended inside #more-info
        $('#more-info').on('click', '.bookProp', function() {
            $('.booknoHolder', $(this)).hide();
        });
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:52:38.620

```
function bookRetr(str) {
        if (str == "") {
            document.getElementById("more-info").innerHTML="";
            return;
        } 

        $("#" + str + " .booknoHolder").hide();
        ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T08:56:59.823

这个方法有用吗

```
xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("more-info").innerHTML=xmlhttp.responseText;
                if(str=="one") { 
                document.getElementById("one").style.display="block";
                document.getElementById("two").style.display="none";
                document.getElementById("three").style.display="none";
}
                if(str=="two") { 
 document.getElementById("one").style.display="none";
                document.getElementById("two").style.display="block";
                document.getElementById("three").style.display="none";
}
                if(str=="three") {
 document.getElementById("one").style.display="none";
                document.getElementById("two").style.display="none";
                document.getElementById("three").style.display="block";
 }
            }
        } 
```

# jquery - 带有 JScrollpane 的 JQGrid：滚动条跳来跳去

> ID：13910784
> 
> 赞同：0
> 
> 时间：2012-12-17T08:41:39.183
> 
> 标签：jquery, jqgrid, jquery-jscrollpane

我正在使用一个 JQGrid，它里面有一个 Jscrollpane。网格有分页。

当我选择 10 或 20 条记录并向下滚动网格时，即使我使用鼠标滚轮插件滚动，滚动条也会跳到顶部。它总是在顶部，它只是不会下降。

如果我使用普通滚动条，一切正常。我已经尝试过`maintainPosition:true`，`false`但即便如此，滚动条始终位于顶部。

```
gridComplete: function(){
                var table_header = $('#gbox_list').find('.ui-jqgrid-hbox').css("position","relative");
            $('#gbox_list').find('.ui-jqgrid-bdiv').bind('jsp-scroll-x', function(event, scrollPositionX, isAtLeft, isAtRight){
          table_header.css('right', scrollPositionX);
         }).jScrollPane({
             showArrows: true, 
            autoReinitialise: true,            
        horizontalDragMaxWidth: 30,
        verticalDragMaxHeight: 30,  
        maintainPosition:false
      });
            }, 
```

[工作模式](http://jsfiddle.net/F24XM/)

继续使用滚动条并尝试选择 5///10///20 条记录...您会注意到错误。

每次更改内容时，我都需要滚动条在重新初始化时位于顶部和左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:06:02.970

我做了三件事来让它工作。

1.  `jScrollPane`没有从 jqGrid 的`gridComplete`函数内部初始化，所以我把它移到了脚本的末尾。
2.  然后我`jScrollPane`针对`$('div.ui-jqgrid-bdiv')`.
3.  我注释掉了`autoReinitialise: true`。

将其放在脚本的末尾并注释掉`gridComplete`.

```
$('div.ui-jqgrid-bdiv').jScrollPane({
  showArrows: true, 
  //autoReinitialise: true,            
  horizontalDragMaxWidth: 30,
  verticalDragMaxHeight: 30,     
  maintainPosition:false
}); 
```

# node.js - sequelizejs ( nodejs orm ) 无法同步模型

> ID：13910789
> 
> 赞同：0
> 
> 时间：2012-12-17T08:42:04.767
> 
> 标签：node.js, sequelize.js

我有这部分代码我想同步它，但不能

```
this.sequelizeCon = new this.sequelize('mydb', 'root', '', {
  host: "127.0.0.1",
  port: 3306
})
var revision = this.sequelizeCon.define("revision",{
  version :{
    type:this.sequelize.INTEGER,
    primaryKey:true,
    allowNull:false
  }
})

revision.sync(); 
```

我得到了这个错误响应

```
[TypeError: Object [object Object] has no method 'apply'] 
```

谁能告诉我我的代码有什么问题..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-09T16:58:27.583

```
var Sequelize = require('sequelize').Sequelize;

var dbConnector = function () {
    const DB_NAME = 'spring'
    const DB_USER = 'root'
    const DB_PASSWORD = ''

    var sequelize = new Sequelize(DB_NAME, DB_USER, DB_PASSWORD,
        {
            host: "127.0.0.1",
            port: 3306,
            dialect: 'mysql'
        }
    );
    var revision = sequelize.define("revision", {
        version: {
            type: Sequelize.INTEGER,
            primaryKey: true,
            allowNull: false
        }
    })
    revision.sync()
};

dbConnector() 
```

```
"mysql2": "^2.2.5",
"sequelize": "^6.5.0", 
```

# mpmovieplayercontroller - 音量控制 - 使用 AVFoundation、MPMovieController 的 http straming 文件的 UI 滑块

> ID：13910790
> 
> 赞同：0
> 
> 时间：2012-12-17T08:42:04.250
> 
> 标签：mpmovieplayercontroller, avfoundation, xcode4.5, uislider, avplayer

我是 ios 开发的新手。我已经开始开发一个带有播放/暂停和音量控制的简单收音机应用程序。

使用 X 代码 4.5

最初，我习惯于`AVFoundation,AVPlayer & MPMoviePlayerController`流式传输 http 广播 [ .m3u 互联网链接。]

设法让播放和暂停使用上述框架/.h 文件。

`(UISlider)`无论我从上面使用什么框架，我一直遇到音量控制问题。

播放/暂停/音量控制`(UISlider)`适用于 mp3 等物理文件。

我只遇到 HTTP 流/文件的问题 - URL 参考..

有人可以帮助我了解如何`UISlider(VolumeControl)`开始工作吗？

任何建议，建议非常感谢。

PS：我不想使用 Web View，因为它是一个广播应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:35:14.043

您可以使用[MPVolumeView](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html)进行音量控制。

例如：

```
MPVolumeView *volumeView = [[MPVolumeView alloc] initWithFrame:mpVolumeViewParentView.bounds];
[mpVolumeViewParentView addSubview: volumeView]; 
```

# algorithm - 网络导航模式挖掘/网络聚类算法/网络流量聚类方法

> ID：13910797
> 
> 赞同：2
> 
> 时间：2012-12-17T08:42:18.217
> 
> 标签：algorithm, machine-learning, artificial-intelligence, cluster-analysis, graph-algorithm

我有以下问题：

我有一个表示为顶点 v0、v1、...、vN 的网页列表。

我有图表 g0、g1、...、gM，它们有边缘列表，显示用户在访问网站期间访问的页面，例如：

1.  g0: (v3, v44) ; (v44, v5)
2.  g1: (v3, v44) ; (v44, v5) ; (v5, v7)
3.  ...
4.  GM：...

我希望使用这些数据来开发网页访问模式集群。

我正在寻找： 1\. 可以帮助我解决这个问题的算法的论文、博客等。2.开源代码，解决这个问题的代码片段。

提前致谢。

笔记：

我知道并使用图聚类算法。我正在寻找特定于这个应用程序的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:33:19.853

看起来您的数据实际上包括用户、网页和其他网页之间的超边缘以及时间因素。有一些关于张量分解的研究可能会解决这些类型的问题，但最好放弃其中一个边缘维度和/或时间分量以利用更好研究的方法。

这里有两种可能的方法：

1.  您可以只查看网页之间的边缘并使用随机块模型分析点击链接。Eric Xing 在这方面做了一些有趣的工作： [http](http://www.cs.cmu.edu/~epxing/papers/2009/fu_song_xing_icml09.pdf) ://www.cs.cmu.edu/~epxing/papers/2009/fu_song_xing_icml09.pdf 。

2.  您可以只查看不同用户访问了哪些网页（丢弃网页之间的链接）并使用协同过滤（http://www2.research.att.com/~volinsky/netflix/）或协同聚类方法（谷歌“coclustering”）。

# sql - 如何在代表层次结构的表中找到最高记录（在 TSQL 中）？

> ID：13910798
> 
> 赞同：0
> 
> 时间：2012-12-17T08:42:19.603
> 
> 标签：sql, sql-server, tsql, hierarchy

想象一个如下表：

**表：**人

**字段：** ID、FullName、ParentID

ParentID 再次引用 Person 表中的 ID。

**问题：** 对于上面给出的示例，我如何在 TSQL 中查询以找到 ID = 7 的 Person 的最高父级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:56:47.680

您将使用公用表表达式并执行递归查询，直到找到最顶层的父项，如下所示：

```
DECLARE @id INT
SET @id = 5 

CREATE TABLE #tmp (id INT , ParentId INT)
INSERT INTO #tmp VALUES(1,0)
INSERT INTO #tmp VALUES(2,1)
INSERT INTO #tmp VALUES(3,2);
INSERT INTO #tmp VALUES(4, 3);
INSERT INTO #tmp VALUES(5,4);

    WITH parent AS
    (
        SELECT id, parentId  from #tmp WHERE id = @id
        UNION ALL 
        SELECT t.id, t.parentId FROM parent
        INNER JOIN #tmp t ON t.id =  parent.parentid
    )

    SELECT TOP 1 id FROM  parent
    order by id asc

DROP TABLE #tmp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:56:04.050

如果想测试那个查询应该没问题！

```
WITH  abcd
            AS (
                  -- anchor
                SELECT  id, FullName, ParentID,
                        FullName AS "Path"
                FROM    Person
                WHERE   ParentId IS NULL
                UNION ALL
                  --recursive member
                SELECT  p.id, p.FullName, p.ParentID,
                        CAST((a.path + '/' + p.FullName) AS VARCHAR(1000)) AS "Path"
                FROM    Person AS p
                        JOIN abcd AS a
                          ON p.ParentId = a.id
               )
    SELECT * FROM abcd 
```

# workflow - Unable to confirm if isEnabled in extended FinishActivity in Tridion UI/UX

> ID：13910818
> 
> 赞同：6
> 
> 时间：2012-12-17T08:43:30.007
> 
> 标签：workflow, tridion, siteedit

I am trying to catch the FinishActivity in the UI/UX when a user selects the option from a Page or Component.

Using the standard method of adding the extended command in the relevant config file I am able to add the interface and catch the isAvailable method using the scripts shown below.

```
Tridion.Extensions.CheckTitleOnFinishActivitySE = function Commands$CheckTitleOnFinishActivitySE() {
    Tridion.OO.enableInterface(this, "Tridion.Cme.Commands.CheckTitleOnFinishActivitySE");
    this.addInterface("Tridion.Web.UI.Editors.SiteEdit.Commands.FACommand", ["CheckTitleOnFinishActivitySE", $const.AllowedActions.FinishActivity]);
}; 
```

```
Tridion.Extensions.CheckTitleOnFinishActivitySE.prototype._isAvailable = function (selection) {
    var response = Tridion.Web.UI.Editors.SiteEdit.Commands.FinishActivity.prototype._isAvailable(selection);
}; 
```

However, when I attempt to reuse the exisitng isEnabled function:

```
Tridion.Extensions.CheckTitleOnFinishActivitySE.prototype.isEnabled = function (selection) {
    var response = Tridion.Web.UI.Editors.SiteEdit.Commands.FinishActivity.prototype._isEnabled(selection);
}; 
```

or even copying the existing code from the siteedit function itself (which I'd obviously rather not do)

```
Tridion.Extensions.CheckTitleOnFinishActivitySE.prototype.isEnabled = function (selection) {
    return (selection && selection.getProperty && selection.getProperty("isSEPage")) && 
        this.callBase("Tridion.Cme.Command", "_isEnabled", [selection]);
}; 
```

I receieve the following error:

> Can't execute the command "FinishActivity" on [tcm:8-349-131200]. Reason: not enabled.

I can force the state to enabled by using just **return true** from the **isEnabled** function but I'd rather inherit/reuse the existing check to cater for current and future scenarios...

I can confirm the _*isAvailable* is caught and returns true and that the required function to extend is *isEnabled* and not _*isEnabled* (adding the latter alone or in addition to *isEnabled* has no effect)

Any advice would be splendid!

Thanks in advance.

## Update - debug addition

So, I added the following into my extended isEnabled to track the difference between the response on the *selection* object in my isEnabled 'v' the default isEnabled:

The 'workflow.js' shows the value if the isSEPage property as true - but when checked directly in my function it's false. It reads consistent then that when called from my isEnabled into the original it then returns false also. I don't understand what could happen to the selection or that I'd be dealing with a different selection object/context?

Updated extended isEnabled with debug scripts:

```
Tridion.Extensions.CheckTitleOnFinishActivitySE.prototype.isEnabled = function (selection) {

    $log.message('myfile.js::FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = ' + selection.getProperty("isSEPage"));

    $log.message('myfile.js::FinishActivity.prototype.isEnabled ==> checking calling original...');
    var response = Tridion.Web.UI.Editors.SiteEdit.Commands.FinishActivity.prototype._isEnabled(selection);
    $log.message('myfile.js::FinishActivity.prototype.isEnabled ==> ' + response);

    $log.message('myfile.js::FinishActivity.prototype.isEnabled ==> checking using copied code from original...');
    return (selection && selection.getProperty && selection.getProperty("isSEPage")) &&
        this.callBase("Tridion.Cme.Command", "_isEnabled", [selection]);

}; 
```

Output (workflow.js represents the original workflow value for the same evaluation)

> workflow.js:FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = true myfile.js::FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = undefined myfile.js::FinishActivity.prototype.isEnabled ==> checking calling original... workflow.js:FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = undefined myfile.js::FinishActivity.prototype.isEnabled ==> undefined myfile.js::FinishActivity.prototype.isEnabled ==> checking using copied code from original... Can't execute the command "CheckTitleOnFinishActivitySE" on [tcm:8-349-131200]. Reason: not enabled.

## More debug

I see that in the original CME workflow script there is no *isEnabled* function at all?

I added the following to the extended isEnabled scipt:

```
Tridion.Extensions.CheckTitleOnFinishActivitySE.prototype.isEnabled = function (selection) {

    $log.message('myfile.js::FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = ' + selection.getProperty("isSEPage"));
    $log.message('Tridion.Web.UI.Editors.SiteEdit.Commands.FinishActivity.prototype._isEnabled(selection) = ' + Tridion.Web.UI.Editors.SiteEdit.Commands.FinishActivity.prototype._isEnabled(selection));

$log.message('this.callBase("Tridion.Cme.Command", "_isEnabled", [selection]) = ' + this.callBase("Tridion.Cme.Command", "_isEnabled", [selection])); 
```

resulting in:

> myfile.js::FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = undefined Editor_v6.1.0.55920.269_.aspx:7175 workflow.js:FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = undefined Editor_v6.1.0.55920.269_.aspx:7175 Tridion.Web.UI.Editors.SiteEdit.Commands.FinishActivity.prototype._isEnabled(selection) = undefined Editor_v6.1.0.55920.269_.aspx:7175 this.callBase("Tridion.Cme.Command", "_isEnabled", [selection]) = false

Although the original (SiteEdit) is still being executed prior to my script and returns

> workflow.js::FinishActivity.prototype._isEnabled::selection.getProperty("isSEPage") = true

I'm wondering if the Tridion SiteEdit isEnabled is being checked on selection of the option to FinishActivity and my extension is being executed when the FinishActivity action itself is instantiated. I'm looking further but if anyone sees anything in the iterim that would be great!

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:12:33.883

OK! So the *Tridion SiteEdit* instance of **isEnabled** is executed when the user selects the icon to trigger the *ShowActivityStartedPopup* Command.

My **isEnabled** is triggered when the *FininshActivity* option is selected by the user.

Can anyone see a quicker way I could have gotten to this conclusion... or if this conclusion is not correct...

Thanks

# sql-server-2008 - 您如何获得 SQL Server 2008 中一整组查询的汇总统计信息

> ID：13910823
> 
> 赞同：4
> 
> 时间：2012-12-17T08:44:03.147
> 
> 标签：sql-server-2008, performance

我正在尝试为我在 SQL Server 2008 中的数据库上进行的操作调整一些机制。

为了选择我经常使用的问题的最佳方法`SET STATISTICS IO ON`，但是当我将一长串语句与另一个语句进行比较时，它并不是很方便。

因此，例如，我怎么知道 T-SQL 语句所需的全部读/写，如下所示：

```
WHILE @i < 1000
BEGIN
 <some statements>
 SET @I = @I + 1
END 
```

感谢您的帮助（请原谅我英语不好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:21:23.563

如何使用动态管理视图[sys.dm_exec_query_stats](http://msdn.microsoft.com/en-us/library/ms189741%28v=sql.100%29.aspx)而不是`SET STATISTICS IO`？

```
IF EXISTS (SELECT * FROM sys.tables WHERE name = 'Read_and_Write') 
  DROP TABLE Read_and_Write

CREATE TABLE Read_and_Write (
  RowID INT NOT NULL,
  RowValue CHAR(2000)
) 

CHECKPOINT
GO
DBCC DROPCLEANBUFFERS
GO
DBCC FREEPROCCACHE 
GO

INSERT Read_and_Write (RowID, RowValue) 
SELECT TOP 10000
  ROW_NUMBER() OVER (ORDER BY (SELECT 1)),
  'X'
FROM sys.all_objects s1 CROSS JOIN sys.all_objects s2 

SELECT COUNT(*)
FROM Read_and_Write
WHERE RowID <= 500

SELECT 
  cast( (select [processing-instruction(q)] = 
  case when [sql_handle] is null then ''
       else (substring(s.text,(q.statement_start_offset + 2) / 2,
     (case when q.statement_end_offset = -1 
           then len(convert(nvarchar(max),s.text)) * 2
           else q.statement_end_offset
      end - q.statement_start_offset) / 2))
  end for xml path('') ) as xml) AS sql_text,
  last_worker_time,
  last_elapsed_time,
  last_logical_reads,
  last_physical_reads,
  last_logical_writes,
  last_rows,
  p.query_plan
FROM sys.dm_exec_query_stats q
CROSS APPLY sys.dm_exec_sql_text([sql_handle]) s
CROSS APPLY sys.dm_exec_query_plan ([plan_handle]) p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:01:33.597

您可以创建一个表变量，并在其中跟踪代码部分执行时的持续时间。

例如：

```
DECLARE @Tracking TAABLE
(
    ID int IDENTITY (1, 1) PRIMARY KEY NOT NULL,
    TheStep varchar(50),
    Start datetime,
    End datetime
)

DECLARE
    @TheStep varchar(50),
    @Start datetime,
    @End datetime

-- first block of code to track

SET @TheStep = 'Grab data from MyTable.'
SET @Start = getdate()

SELECT * FROM MyTable

SET @End = getdate()

INSERT INTO @Tracking (TheStep, Start, End)
SELECT @TheStep, @Start, @End

-- reset variables for next batch of commands to measure
SELECT @TheStep = NULL, @Start = NULL, @End = NULL

-- after all is said and done, display the results along with duration (ms) for each.
SELECT TheStep, DATEDIFF(ms, Start, End)
FROM @Tracking 
```

# css - 如何居中定位？

> ID：13910824
> 
> 赞同：1
> 
> 时间：2012-12-17T08:44:03.830
> 
> 标签：css, button, center

我正在尝试修复一个页面按钮。我不是专业人士，但在这里；

```
body {
    width:100%;
    height:100%;
    background:#181516;
    overflow:hidden;
    position:absolute;
}

.bg {    
    background:url(../images/entrance.jpg) no-repeat center center ; 
    height:100%;
    z-index:1;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

还有按钮；

```
.door {
    display:inline-block;
    width:170px;
    margin-top:22%;
} 
```

但是在更小或更大的屏幕上，按钮可以随心所欲：D

它必须固定成一个正方形。后面的图片是一个小门。并且按钮必须在那扇门内...... MArgin 或 padding px 或 % 总是相同的。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:44:12.320

如果我理解正确，即您希望拥有一个始终位于屏幕中央的 div。

基本上我这样做的方法是将其绝对定位，并且距离屏幕的顶部和左侧 50%。然后 div 的左上角在中心，为了解决这个问题，我使用 div 大小的一半作为负边距来定位将其移回中心。

所以基本上如下：

> .door{ 位置：绝对；
> 最高：50%；
> 左：50%；
> 宽度：170px；
> 高度：200px；
> 左边距：-85px；
> 边距顶部：-100px；
> 背景颜色：#fff;
> }

# android - ViewPager + FragmentStatePagerAdapter + 方向改变

> ID：13910826
> 
> 赞同：12
> 
> 时间：2012-12-17T08:44:13.743
> 
> 标签：android, caching, android-viewpager, adapter, fragment

我有一个小问题：我有一个带有一些页面的 ViewPager，我使用 FragmentStatePagerAdapter 来处理数据。例如，在纵向中，ViewPager 有 20 页，而在横向中，ViewPager 只有 10 页。因此，在方向更改时，我创建了一个具有不同数据的新适配器。

这里稍微解释一下原因：我显示一张纵向图像和两张横向图像，但总是计数。如果我有 10 张图片要显示，我有 10 张纵向和 5 张横向（总是两张）。

但是现在我有一个奇怪的错误：当我在索引 5 上的横向并转动设备时，ViewPager 的当前页面设置为 10。如果我再次将其转回，我在第 5 页。如果我现在滑动 ViewPage 到页面10 从不调用适配器的 getItem 方法，ViewPage 向我显示一张纵向图片，而不是横向的两张。这怎么可能发生？适配器或 ViewPager 中是否有缓存？在 Activity 的 onCreate 中，一切都是新创建的，适配器以及 ViewPager 的数据（只是带有路径的字符串）。那么知道如何解决这个非常可怕的“功能”吗？

下面是一些代码：

创建：

```
 mViewPagerAdapter = new ReaderPageViewAdapter(getSupportFragmentManager(), getBaseContext(), mCurrentDocument.mPages, getResources()
                .getConfiguration().orientation);
    mPageReader = (ReaderViewPager) findViewById(R.id.pager);
    mPageReader.setAdapter(mViewPagerAdapter); 
```

适配器getItem：

```
 public Fragment getItem(final int index) {
        final PageInfo pageInfo = mPages.get(index);
        final PageFragment pageFragment = (PageFragment) PageFragment
                .instantiate(mContext, pageInfo.mClss.getName(), pageInfo.mArgs);
        return pageFragment;
    } 
```

如果您需要更多东西，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-29T08:41:27.257

您可以覆盖 FragmentActivity onSaveInstanceState() 而不是在方法中调用 super.onSaveInstanceState()。

```
@Override
protected void onSaveInstanceState(final Bundle outState) {
    // super.onSaveInstanceState(outState);
} 
```

**不使用** `mViewPager.setSaveEnabled(false);`

它最终导致了大内存泄漏。每次改变方向后，它都会将 Fragments 放入 FragmentManager 的数组中，并且从不清理它。因此，在多次更改方向后，它的内存使用量会超过 100mb。我认为使用 onSaveInstanceState 方法是一种更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-25T16:24:36.283

我也出现了这个问题，我找到了原因。

屏幕旋转时，`FragmentManager`将保留您所有活动托管的片段，它不会删除片段如果使用`FragmentStatePagerAdapter`，您可以使用`FragmentManager.getFragments()`来检查片段的数量。

示例：活动有 4 个片段，经过 4 次方向更改后，列表`FragmentManager.getFragments()`大小将为**20**！

我找到了一些解决方案：

1.  不要调用`super.onSaveInstanceState()`你的Activity，但这似乎不是一个好的解决方案，Fragments 无法保存状态和恢复。

2.  使用`FragmentPagerAdapter`而不是`FragmentStatePagerAdapter`. 但是方向改变后，`ViewPager`托管的片段被空白（其他人有同样的问题吗？）。但我可以删除所有碎片`Activity.onCreate`来修复它。像这样：

    ```
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        FragmentManager fm = getSupportFragmentManager();
        List<Fragment> fragments = fm.getFragments();
        if (fragments != null) {
            FragmentTransaction transaction = fm.beginTransaction();
            for (Fragment fragment : fragments) {
                transaction.detach(fragment).remove(fragment);
            }
            transaction.commitNowAllowingStateLoss();
        }
        ... 
    ```

    但是`Fragment.onCreateView()`叫了两次。

我仍在寻找完美的解决方案：D

编辑：
我终于解决了这个问题，这是因为我的 ViewPager 是在 onStart 之后添加的。当运行到 onStart 时，`FragmentManager`会尝试恢复碎片状态。我追踪到`FragmentManager`，有这些代码：

[com/android/support/support-fragment/24.2.1/support-fragment-24.2.1-sources.jar!/android/support/v4/app/FragmentManager.java](https://i.stack.imgur.com/sKpa4.jpg)

检查高亮线，`f.mContainerId`实际上是我的 ViewPager id。然后它会尝试将片段视图添加到 ViewPager，在我的情况下， ViewPager 尚未添加，所以它将被空白，但片段状态是`ATTACHED`。而在`FragmentPagerAdapter.instantiateItem()`，如果添加了片段，它只是做`attach`片段，但片段已经附加，所以它什么都不做:(

我将 ViewPager 添加到活动布局 XML，它是固定的。

快乐编码：D

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T10:18:05.067

只需您在 viewPager.setonpagechangelistener 中使用并实现要求代码应用您的应用程序，

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# spring - 使用 Spring 集成从 imap 读取电子邮件不起作用

> ID：13910827
> 
> 赞同：0
> 
> 时间：2012-12-17T08:44:28.200
> 
> 标签：spring, imap, spring-integration

我正在尝试[一个例子](http://blog.solidcraft.eu/2011/04/read-emails-from-imap-with-spring.html)。在示例中，它被提及为使用 spring-integration 2.0.3，但我得到了 NullPointerExcpetion 并且为了解决它，我遵循了[这里提到的](https://stackoverflow.com/questions/11647547/null-pointer-exception-spring-integration-messaging)内容。但是如果我使用 spring-integration 2.1，那么我认为它需要 spring 3.0。

**问题：** 是否有可能拥有 Spring 2.5 版并使用从 imap 读取电子邮件的 spring-integration？

以下是我项目中设置的maven依赖：

```
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
        <version>2.5.6</version>
    </dependency>
...
<dependency>
<groupId>org.springframework.integration</groupId>
<artifactId>spring-integration-core</artifactId>
<version>2.1.3.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.integration</groupId>
    <artifactId>spring-integration-mail</artifactId>
    <version>2.1.3.RELEASE</version>
</dependency> 
```

**弹簧组件.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:mail="http://www.springframework.org/schema/integration/mail"
xmlns:int="http://www.springframework.org/schema/integration"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
    http://www.springframework.org/schema/integration/mail
    http://www.springframework.org/schema/integration/mail/spring-integration-mail-2.1.xsd 
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <util:properties id="javaMailProperties">
    <prop key="mail.imap.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
    <prop key="mail.imap.socketFactory.fallback">false</prop>
    <prop key="mail.store.protocol">imaps</prop>
    <prop key="mail.debug">false</prop>
</util:properties>

<mail:inbound-channel-adapter id="imapAdapter"
                                  store-uri="imaps://<username>:<password>@imap.googlemail.com:993/INBOX"                                    
                                  channel="recieveEmailChannel"                                         
                                  should-delete-messages="false"
                                  should-mark-messages-as-read="true"                                     
                                  auto-startup="true"
                                  java-mail-properties="javaMailProperties">
    <int:poller fixed-delay="5" time-unit="SECONDS"/>
</mail:inbound-channel-adapter>

<int:channel id="recieveEmailChannel">        
    <int:interceptors>
        <int:wire-tap channel="logger"/>
    </int:interceptors>
</int:channel>

<int:logging-channel-adapter id="logger" level="DEBUG"/>

<int:service-activator input-channel="recieveEmailChannel" ref="emailReceiverService" method="receive"/>

<bean id="emailReceiverService" class="com.mycompany.DefaultEmailReceiverUtilService">
</bean> 
```

EmailNotificationTest.java

```
public class EmailNotificationTest extends
    AbstractDependencyInjectionSpringContextTests

{

public static final String SOURCE_VERSION_ID = "$Id$";

    //Who ever wants to run this testcase ,Please uncomment this method
   protected String[] getConfigLocations()
    {
         return new String[]
        { "classpath:META-INF/spring/component.xml" };
    }

public void testSimpleEmailNotification()
{

}
} 
```

如果我运行我的测试用例，我会收到以下异常：

org.springframework.beans.factory.BeanDefinitionStoreException：从类路径资源 [META-INF/spring/component.xml] 解析 XML 文档时出现意外异常；嵌套异常是 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:420) 中的 java.lang.NoClassDefFoundError: org/springframework/scheduling/support/PeriodicTrigger。 XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342) at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310) at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java: 143）在 org.springframework.beans.factory.support.AbstractBeanDefinitionReader。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:28:46.233

我没有找到一个简单的 Spring Integration --> Spring 版本表。这是你可以做的：

*   去[https://repository.jboss.org/nexus/index.html#nexus-search;quick~spring-integration-core](https://repository.jboss.org/nexus/index.html#nexus-search;quick~spring-integration-core)
*   选择任何版本
*   转到右下方容器中的“Maven 依赖项”选项卡
*   点击“解决”链接

您将立即看到需要哪个 Spring 版本。例如，使用 Spring Integration 2.0.0，您会看到它依赖于 Spring 3.0.5。

# visual-studio-2012 - 我必须将源代码 .cs 文件放到 VS 2012 Express 的 App_Code 文件夹中吗？

> ID：13910830
> 
> 赞同：0
> 
> 时间：2012-12-17T08:44:40.630
> 
> 标签：visual-studio-2012

在我看来，所有源代码 .cs 文件都必须放在 App_Code 文件夹中。但在示例“Wingtip Toys” [http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/introduction-and-overview](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/introduction-and-overview) 我找到了一些源代码 .cs 文件放在 Logic 文件夹中，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T22:17:03.160

（我知道这是 9 个月前问过的，但这是我对后代的回答。）

App_Code 文件夹用于 ASP .NET 2.0 引入的“网站”类型项目。据我所知，在 Visual Studio 中，关于如何构建 Web 应用程序（网站与 Web 应用程序）存在一些争论。

在“网站”项目中，所有代码都保留在其文件夹中，并且 IIS 动态编译。您放入 App_Code 文件夹中的任何内容都将成为强类型。

“Web App”项目不使用 App_Code 文件夹，因为所有代码都是在部署之前编译的。您可以将 .cs 文件放在任何地方，它们的工作方式相同。

这是一个很好的链接，解释了差异：http: [//msdn.microsoft.com/en-us/library/dd547590.aspx](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

# ios - 在 iOS 上阅读 Wifi 信息

> ID：13910841
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:45:33.037
> 
> 标签：ios, networking, network-programming

我想阅读有关我的网络、路由器地址 wifi 加密的信息，但不是密码，以及更多信息。在我的 iPhone 上的应用程序中。有人知道我该如何处理吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:48:56.447

你可以看看[这个](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)，苹果官方的关于可达性库的文档。

有一些示例可以向您展示这是如何工作的。

# android - Android - 裁剪后的图像放大了很多，看起来很模糊

> ID：13910842
> 
> 赞同：0
> 
> 时间：2012-12-17T08:45:33.383
> 
> 标签：android, android-intent, crop

我正在使用以下代码裁剪从相机拍摄的图像：

```
Intent intent = new Intent("com.android.camera.action.CROP");              
intent .setDataAndType(outputFileUri, "image/*");
intent.putExtra("outputX",600);
intent.putExtra("outputY", 600);
intent.putExtra("aspectX", 1);
intent.putExtra("aspectY", 1);
intent.putExtra("scale", true);
intent.putExtra("return-data", false); 
startActivityForResult(intent, 2); 
```

我的问题是：

1.  图像裁剪在某些设备上运行良好，在某些设备上应用程序崩溃。那么如何处理这种情况？

2.  另一件事是裁剪后的图像缩放过多并且变得模糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:54:11.537

太大的照片会导致崩溃，请参阅[如何裁剪大照片](http://www.androidworks.com/crop_large_photos_with_android)。

# javascript - Javascript onkeyup 延迟函数调用

> ID：13910844
> 
> 赞同：3
> 
> 时间：2012-12-17T08:45:36.390
> 
> 标签：javascript, events, timer, dom-events

我想创建一个触发`onkeyup`事件的 Javascript 函数，它的任务是调用一个主解析器函数，但前提是至少 x 毫秒内没有触发任何键，`x`函数参数在哪里。

例如：

我们有html代码：

```
<body>
    <input type="text" id="suggestion" onkeyup="callMe(200);"/>
</body> 
```

和 Javascript 类似：

```
<script type="text/javascript">
    function callMe(ms)
    {
        //wait at least x ms then call main logic function
        // e.g. doMain();
        alert("I've been called after timeout"); //for testing purposes
    }
</script> 
```

因此，在我输入时，除非您在至少 x 毫秒内不输入任何内容，否则不会调用警报。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T08:52:42.957

您可以使用计时器，您还需要每次清除之前的计时器。

为此，最好使用“包装器”功能：

```
<input type="text" id="suggestion" onkeyup="DelayedCallMe(200);"/> 
```

和 JavaScript：

```
var _timer = 0;
function DelayedCallMe(num) {
    if (_timer)
        window.clearTimeout(_timer);
    _timer = window.setTimeout(function() {
        callMe(num);
    }, 500);
} 
```

这将在最后一个按键事件后 500 毫秒执行函数。

[现场测试用例](http://jsfiddle.net/5FPtz/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:58:09.503

```
<input type="text" id="suggestion" onkeyup="callMe(200);"/>
<script>
    var to;
    function callMe(ms) {
       clearTimeout(to);
       to = setTimeout(function(){
           alert("I've been called after timeout");
       }, ms);
    }
</script>

​ 
```

[演示](http://jsfiddle.net/4Q3Jk/1)

# xml - 如何将两个 xml 对象与 xslt 进行比较？

> ID：13910857
> 
> 赞同：0
> 
> 时间：2012-12-17T08:46:55.073
> 
> 标签：xml, xslt

我想比较一个 XML 文件中的两个 XML 节点，比较是差异并写摘要。

这是我的xml数据：

```
<AuditLog>
   <OldValue>
      <ProcessCategory>
         <CategoryId>3</CategoryId>
         <ChildCategories />
         <Created>2012-12-13T11:39:30.747</Created>
         <Name>New category name</Name>
         <ParentCategory />
      </ProcessCategory>
   </OldValue>
   <NewValue>
     <ProcessCategory>
        <CategoryId>3</CategoryId>
        <ChildCategories />
        <Created>2012-12-13T11:39:30.747</Created>
        <Name>Old Category name</Name>
        <ParentCategory />
     </ProcessCategory>
   </NewValue>
</AuditLog> 
```

我需要这样的结果：

属性类别名称的差异，旧值：“旧类别名称”，新值：“新类别名称”

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:18:36.660

您可以遍历所有属性并比较它们的值。如果对象的结构不是更嵌套，那么在您的示例中，这应该有效：

```
 <xsl:template match="/">
      <xsl:for-each select="AuditLog">

        <xsl:call-template name="for">
          <xsl:with-param name="i">0</xsl:with-param>
          <xsl:with-param name="max" select="count(OldValue/*/*)" />
        </xsl:call-template>

      </xsl:for-each>
    </xsl:template>

  <xsl:template name="for">
    <xsl:param name="i" />
    <xsl:param name="max" />

    <xsl:variable name="oldValue" select="OldValue/*/*[$i]" />    
    <xsl:variable name="newValue" select="NewValue/*/*[$i]" />
    <xsl:variable name="prop" select="name(OldValue/*/*[$i])" />

    <xsl:if test="not($newValue=$oldValue)">
      <Changed Property="{$prop}" oldValue="{$oldValue}" newValue="{$newValue}" />
    </xsl:if>

    <xsl:if test="$i &lt; $max">
      <xsl:call-template name="for">
        <xsl:with-param name="i" select="$i+1" />
        <xsl:with-param name="max" select="$max" />
      </xsl:call-template>
    </xsl:if>

  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:08:00.370

自从我编写 XSLT 以来已经有一段时间了，所以 XPATH 可能已关闭，但试试这个：

```
<xsl:if test="not(OldValue/ProcessCategory/Name=NewValue/ProcessCategory/Name">
    Old Name: <xsl:value-of select="OldValue/ProcessCategory/Name"/>
    New Name: <xsl:value-of select="NewValue/ProcessCategory/Name"/>
</xsl:if> 
```

# php - 如何防止网站受到不需要的系统生成的 HTTP 调用

> ID：13910858
> 
> 赞同：3
> 
> 时间：2012-12-17T08:46:58.873
> 
> 标签：php, http

我有一个动态 php 页面，它将用户选择的 pol 选项更新为 DB。有时我的 Apache 服务器仅通过调用此页面而超载（意味着有人正在使用脚本循环调用它）你能帮我防止这种情况吗？

我计划这样做：

1.  对于内存缓存中的每个请求，我都会保留 no of request 作为计数器（键：md5（用户 Ip），值：计数器）
2.  如果计数器在 10 秒内超过 10，我将阻止该用户。

但是将 IP 保留为密钥是行不通的，因为许多组织对其所有员工系统都使用单个互联网 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:03:51.820

与大多数民意调查一样，您需要一种方法来确保用户只能投票一次。有几种方法可以确保只投一票。

*   需要注册用户（最安全最安全）
*   每个 IP 一票（多个用户在同一 IP 上的问题）
*   每个 IP 每 xx 分钟一票（更好地防止超载，但不是假票）
*   防止自动提交的验证码（我喜欢这个，[http://www.webappers.com/2011/03/03/a-draggable-jquery-captcha-system-with-jquery-ui/](http://www.webappers.com/2011/03/03/a-draggable-jquery-captcha-system-with-jquery-ui/)）
*   pol中的隐藏代码，只能使用一次。每次你生成一个 pol，生成一个要使用一次的代码。没有代码、错误代码或使用代码是没有投票权。有点像隐藏的验证码。更用户友好但不太安全。

这完全取决于您要防止什么。如果它只是超载，但人们可以投票不止一次，那么你有更多的选择。如果您只想允许每个用户进行一次投票，那么只有注册系统是安全的。尽管当然有人可以创建一个以上的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:52:20.260

虽然我通常讨厌 Captcha 的......你可以尝试在你的网站上实现一个。您甚至可以让 Captcha 仅在来自同一 IP 的 X 票后显示，这样公众甚至都不会看到它。

# ios - 核心数据迁移示例

> ID：13910861
> 
> 赞同：2
> 
> 时间：2012-12-17T08:47:11.170
> 
> 标签：ios, core-data

我已经阅读了名为[*Core Data Model Versioning and Data Migration Programming Guide*](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)的文档。但我仍然没有得到很多这方面的技能。所以我想发布一个我遇到的例子。

我有两个实体`Rule`和`Instance`. `Rule`有一个名为 的属性`identifier`。 `Instance`还有一个名为`identifier`.

每个`Rule`都有一个唯一的标识符，每个实例都`identifier`与其中之一相同`Rules`。`Rule`这就像和`Instance`（应该是）之间的多对多关系。

在我的数据模型的新版本中，我想在 和 之间建立一对多的关系`Rule`，`Instance`我该如何进行迁移？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T06:51:52.857

我已经想通了。首先，在创建持久存储协调器时设置这些选项：

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                             nil];

    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType 

configuration:nil URL:storeURL options:options error:&error])
{
   //other code handle error
} 
```

使用 Xcode 创建映射模型，设置其源版本和目标版本。

创建一个 NSEntityMigrationPolicy 的子类，命名它`MyPolicy`，覆盖方法。

```
-(BOOL)createRelationshipsForDestinationInstance:(NSManagedObject *)dInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError **)error 
```

调用此方法时，所有 managedObjects 都已在目标上下文中创建，但它们的关系不是。在此方法中，检查 dInstance 是什么实体，并为其建立关系。

使用 Xcode，在您的映射模型中，将 ENTITY MAAPPINGS 命名`InstanceToInstance`的映射策略设置为`MyPolicy`。

此方法将为每个 Instance 对象调用一次。对于我的问题，我应该这样做：

```
-(BOOL)createRelationshipsForDestinationInstance:(NSManagedObject *)dInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError **)error{
    NSError *superError = nil;
    BOOL mappingSuccess = [super createRelationshipsForDestinationInstance:dInstance entityMapping:mapping manager:manager error:&superError];
    if ([dInstance.entity.name isEqualToString:@"Rule"]){
        Instance *instance = (Instance*)dInstance;
        NSFetchRequest *fetch = [[NSFetchRequest alloc] initWithEntityName:@"Instance"];
        fetch.predicate = [NSPredicate predicateWithFormat:@"identifier == %@",instance.identifier];
        NSArray *result = [manager.destinationContext executeFetchRequest:fetch];
        Rule *rule = [result objectAtIndex:0];
        instance.rule = rule;
    }
    return YES;
} 
```

然后，应用程序启动时将创建 Rule 和 Instance 之间的关系。

还要注意，由 NSEntityMigrationPolicy 的子类创建的关系不需要在 xcode 的迁移策略编辑窗口中设置值表达式，只需将其留空即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T09:12:46.053

看来您可以使用轻量级迁移来进行关系更改。

创建新版本后，只需更改或添加关系。

有关更多详细信息，请查看此处[LightweightMigration](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)

您需要做的就是在您的委托中将选项添加到您的 persistentStoreCoordinator 方法。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

  if (persistentStoreCoordinator != nil) {
    return persistentStoreCoordinator;
  }

  NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentsDirectory] stringByAppendingPathComponent: @"YOURDB.sqlite"]];

  // handle db upgrade
  NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
  [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
  [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

  NSError *error = nil;
  persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
  if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
    // Handle error
  }

  return persistentStoreCoordinator;
} 
```

然后，在您更改模型并将其选择为活动后，只需重新安装您的应用程序。就这样。

# android - Android：搜索框设计

> ID：13910862
> 
> 赞同：0
> 
> 时间：2012-12-17T08:47:12.213
> 
> 标签：android, android-layout, android-edittext, autocompletetextview

我想在我的应用程序中设计一个搜索框，如下所示：
![搜索图标](../Images/f0147031b8006aa2b65e3bce00830732.png)

当我点击它时，它应该展开如下：

![搜索框](../Images/a37b99ad2af955e76202c36e75eda25f.png)

但是，我不知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:54:27.760

你应该使用`RelativeLayout`& 设置 ImageView align_parent_top & align_parent_right 或者如果你使用`LinearLayout`那么你可以这样尝试：---

```
<LinearLayout
    android:id="@+id/ll_my_profile"
    android:layout_width="fill_parent"
    android:layout_height="45dp"
    android:layout_marginLeft="10dp"
     android:clickable="true"
    android:layout_marginRight="10dp"
    android:background="@drawable/txt_box_bg"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/my_profile"
        android:layout_width="0dip"
        android:layout_height="45dp"
        android:layout_weight="1"
        android:gravity="left"
        android:hint="My Profile"
        android:padding="10dp"
        android:textColor="#000000"
        android:textSize="18dp" />

    <ImageView
        android:id="@+id/img_for_setting"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right|center_vertical"
        android:background="@drawable/arrow" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:52:31.787

你试过移动 Jquery 实用程序吗？做到这一点应该不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:05:09.703

根据您的应用程序中搜索框的使用方式，[在 ActionBar 中使用操作视图](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)可能最适合。这是 Google 建议的在 Activity 中包含可扩展的响应式搜索框的方法。

对于 SDK 11 之前的 Android 版本，您可以使用兼容性库[ActionBarSherlock](http://actionbarsherlock.com/)实现所有相同的功能。虽然我自己没有在 ActionBarSherlock 中使用过可扩展的搜索栏，但看起来这里可以使用 SearchView。

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:05:47.900

创建线性布局。将其背景设置为完整的编辑框图像。在该线性布局内添加一个编辑框和按钮。将按钮的背景设置为 android:background="@drawable/searchbtn"。将编辑框的背景设置为无图像（透明图像）。完成。

# ios - 需要有关资产库的帮助

> ID：13910865
> 
> 赞同：0
> 
> 时间：2012-12-17T08:47:32.320
> 
> 标签：ios, alassetslibrary

我正在使用此代码从我的设备中检索所有图像，但它没有返回结果

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if(result != NULL) {
            NSLog(@"See Asset: %@", result);
            [_assets addObject:result];
            // Here storing the asset's image URL's in NSMutable array urlStoreArr
            NSURL *url = [[result defaultRepresentation] url];
            [_urlStoreArr addObject:url];
        }
    };

    void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop)
    {
        if(group != nil)
        {
            [group enumerateAssetsUsingBlock:assetEnumerator];
        }
    };

    _urlStoreArr = [[NSMutableArray alloc] init];
    _assets = [[NSMutableArray alloc] init];
    _library = [[ALAssetsLibrary alloc] init];

    [_library enumerateGroupsWithTypes:ALAssetsGroupAlbum
                           usingBlock:assetGroupEnumerator
                         failureBlock: ^(NSError *error) {
                             NSLog(@"Failure");
                         }];

    [self UploadImagesToServer];

}

-(void) UploadImagesToServer
{
    for (int i=0; i<[_urlStoreArr count]; i++)
    {
        // To get the each image URL here...

        NSString *str = [_urlStoreArr objectAtIndex:i];
        NSLog(@"str: %@",str);

        // Need to upload the images to my server..
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:58:44.560

您在`_urlStoreArr`初始化之前使用它。

当您定义块时，它们采用您在块中使用的变量的当前局部值。

因此，在`assetEnumerator`您正在使用的块中，`_urlStoreArr`但直到稍后在代码中才初始化它。

我假设这`_urlStoreArr`是一个 iVar，因为它有一个前导下划线。如果您使用 ARC，则 iVar 被初始化为`nil`，因此您的`assetEnumerator`块正在向 发送消息`nil`。这在 Objective-C 中是合法的，但它只是返回`nil`.

您有两种选择来解决此问题。

1.  移动块`_urlStoreArr = [[NSMutableArray alloc] init];`定义上方的声明`assetEnumerator`
2.  首选方式 - 不要直接使用 iVar，使用属性语法。即而不是`[_urlStoreArr addObject:url];`尝试`[self.urlStoreArr addObject:url];`。这是因为在使用属性访问时，您没有使用`_urlStoreArr`定义时的当前值，而是使用块运行时的值，即在 iVar 初始化之后。

# wpf - WPF重复图像背景

> ID：13910867
> 
> 赞同：4
> 
> 时间：2012-12-17T08:47:44.027
> 
> 标签：wpf, background

我使用 C# 和 WPF 构建我的项目。在我的应用程序中，我使用了一个小尺寸的图像（25x25）作为我的应用程序背景。我从互联网上找到了一些示例，当我尝试时，我的应用程序的背景就像 imageA。但我想做的是我的背景就像 imageB。有谁知道如何使它像imageB？

我的 WPF 代码片段：

```
<Grid>
    <Grid.Background>
        <VisualBrush TileMode="Tile" Viewport="0.8,0.8,0.1,0.1"  AlignmentX="Left" AlignmentY="Top">
            <VisualBrush.Visual>
                <Image Source="/Wpf_Customer;component/bg.jpg"></Image>
            </VisualBrush.Visual>
        </VisualBrush>
    </Grid.Background>

    <RadioButton Content="Graph" Name="dsad" FontSize="15" ></RadioButton>

</Grid> 
```

图片A：

![在此处输入图像描述](../Images/219f7f743ca4c726851c316b1b585a9a.png)

图B：

![在此处输入图像描述](../Images/97c61923726e1617859fd14b6d806425.png)

**编辑：**

图像C：

![在此处输入图像描述](../Images/782d0fc3e6cc37e122109cea4d751771.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T13:32:38.617

试试看

```
 <ImageBrush x:Key="SimpleBitmap" ImageSource="Assets\BitmapImage.png" TileMode="FlipY"      Stretch="Uniform"AlignmentY="Top" Viewport="0,0,10,10" ViewportUnits="Absolute" /> 
```

其中 BitmapImage 宽度 = 10，BitmapImage 高度 = 10

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:53:01.960

您是否尝试将`Stertch`图像元素的属性设置为`UniformToFill`？

**更新：**是的，它很蹩脚，我的错......实际上，如果我正确理解你的任务，你不需要使用 VisualBrush。这应该足够了：

```
<Grid.Background>
    <ImageBrush ImageSource="/Wpf_Customer;component/bg.jpg"/>
</Grid.Background> 
```

# plugins - npapi plugin_invoke 函数返回字符串值垃圾字符

> ID：13910869
> 
> 赞同：1
> 
> 时间：2012-12-17T08:47:46.740
> 
> 标签：plugins, safari, npapi, firebreath

npapi代码：

```
bool plugin_invoke(NPObject *obj, NPIdentifier methodName, const NPVariant *args, uint32_t argCount, NPVariant *result) {
NPUTF8 *name = browser->utf8fromidentifier(methodName);
if(strcmp(name, plugin_method_name_getAddress) == 0){
    NPString password;
    if(argCount > 0) {
        password = NPVARIANT_TO_STRING(args[0]);
    }
    const char * StringVariable = password.UTF8Characters;
    char* npOutString = (char *)malloc(strlen(StringVariable+1));
    if (!npOutString)
        return false;
    strcpy(npOutString, StringVariable);
    STRINGZ_TO_NPVARIANT(npOutString, *result);
    browser->memfree(name);
    return true;
}
return false; 
```

}

html代码：

```
function run() {
    var plugin = document.getElementById("pluginId");
    var passwordBeforEncryption =  document.getElementById("passwordFeild");
    if(plugin){
        var value = plugin.getAddress("hello, just test it");
            alert(value);
    }else{
        alert("plugin is null");
    } 
```

}

正确的结果应该是：“hello, just test it”，但有时会返回“hello, just test itÿÿÿÿ”。它只是有时不是所有时间！

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:25:28.590

错误不在您的 html 中，您应该看到**NPString**结构。

```
typedef struct _NPString {
    const NPUTF8 *UTF8Characters;
    uint32_t UTF8Length;
} NPString; 
```

成员**UTF8Length**表示你的字符串的长度，所以你应该这样做：

```
const char * StringVariable = password.UTF8Characters;
char* npOutString  = (char*)browser->memalloc(password.UTF8Length+1);
if (!npOutString) {
    return false;
}
memcpy(npOutString  , password.UTF8Characters, password.UTF8Length);
npOutString[password.UTF8Length] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T23:30:47.467

看起来您分配的内存不正确：

```
char* npOutString = (char *)malloc(strlen(StringVariable+1)); 
```

应该：

```
char* npOutString = (char *)malloc(strlen(StringVariable)+1); 
```

纠正长度。

但是，为了让浏览器能够释放内存，您应该使用：

```
char* npOutString = (char *)NPN_MemAlloc(strlen(StringVariable)+1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:38:38.450

好的，喜欢答案！在 html 代码中：

```
var value = plugin.getAddress("hello, just test it"); 
```

应该是这样的：

```
var value = plugin.getAddress("hello, just test it\0"); 
```

在字符串结尾需要“\0”

# c++ - C++ 大型内存对象集合好吗？

> ID：13910873
> 
> 赞同：2
> 
> 时间：2012-12-17T08:47:49.957
> 
> 标签：c++, oop

我正在编写一个 C++ 应用程序来分析 IATA SSIM 格式的航班时刻表。航空业组织 IATA 指定用于在系统之间传输时刻表的文件布局标准，“SSIM”文件包含有关时刻表的信息，以及一家或多家航空公司的所有相应航班。

我设计了一个包含 Flight 对象集合的 Schedule 对象。输入文件中通常有 2,000 到 20,000 个航班，结果对象的大小最多约为 50MB。到目前为止，我读入了平面文件，并创建了生成的 Schedule 对象，然后对其进行分析/操作以用于报告目的。

我的问题是 - 从设计的角度来看是否可以这样做，即。当我报告它时，应用程序是否将所有航班和计划对象保留在内存中？另一种方法是将飞行对象序列化在磁盘上，并且仅在我需要它们时处理内存中的活动记录。这将减少已用内存的大小，但从编码的角度来看显然更麻烦。

我知道对此没有“标准”方法，但我想知道人们对管理内存中非常大的对象的看法是什么。这是相当标准还是次优设计？我的偏好是将所有内容都保存在内存中，并在不求助于序列化的情况下处理对象。

谢谢大家皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:50:49.587

如果您可以将它们全部保存在内存中而不会出现问题，那么就这样做 - 其他一切都将是过早的优化。

要记住的重要一点是将算法和数据结构解耦，以便您以后可以切换到不同的策略，而无需重写应用程序逻辑。如果您的算法在航班列表上的迭代器上运行，那么您可以稍后更改这些迭代器的逻辑（从内存读取，从磁盘读取），而无需修改您的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:57:48.203

仅使用内存的一个主要问题是，如果系统崩溃（无论出于何种原因，不一定是代码错误），那么所有被操纵的对象数据都将丢失。如果您的处理速度快于您可以承受的风险。

如果你想提供一个稳定的系统，它应该是可扩展的，因为你永远不知道你的 20K 航班数据何时会变成 200 万航班数据，你的算法可能需要哪些额外的数据结构（更多的内存空间）等等。对于此类系统，首选存储机制来存储您的系统状态，以防您需要在发生故障后从处理的中间开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:09:22.373

磁盘慢得要命，并且不断地加载/卸载将非常复杂。如果你的内存没有用完，而且现在 50MB 对于很多平台来说肯定不是很多，那么请将它们全部保存在内存中。

# java - Lucene 中的多词查询

> ID：13910874
> 
> 赞同：1
> 
> 时间：2012-12-17T08:47:51.107
> 
> 标签：java, lucene

例如： Lucene 文档中有一个列“ *description* ”。假设“*描述*”的内容是[ `hello foo bar`]。我想要一个查询 [ `hello f`]，那么文档应该被命中，[ `hello ff`] 或 [ `hello b`] 不应该被命中。

我使用编程方式来创建`Query`，例如`PrefixQuery`，`TermQuery`被添加到`BooleanQuery`，但它们没有按预期工作。`StandardAnalyzer`用来。

测试用例：

a): `new PrefixQuery(new Term("description", "hello f"))`-> 0 命中

b): `PhraseQuery query = new PhraseQuery(); query.add( new Term("description", "hello f*") )`-> 0 命中

c): `PhraseQuery query = new PhraseQuery(); query.add( new Term("description", "hello f") )`-> 0 命中

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:09:48.253

它不起作用，因为您将多个术语传递给一个`Term`object 。如果您希望找到所有搜索词的前缀，则需要：

1.  使用您的分析器标记输入字符串，它会将您的搜索文本“hello f”拆分为“hello”和“f”：

    TokenStream tokenStream = analyzer.tokenStream(null, new StringReader(searchText)); CharTermAttribute termAttribute = tokenStream.getAttribute(CharTermAttribute.class);

    列出标记 = new ArrayList(); while (tokenStream.incrementToken()) { tokens.add(termAttribute.toString()); }

2.  将每个令牌放入`Term`需要放入的对象中，然后全部`PrefixQuery`放入`PrefixQueries``BooleanQuery`

编辑：例如像这样：

```
BooleanQuery booleanQuery = new BooleanQuery();

for(String token : tokens) {        
    booleanQuery.add(new PrefixQuery(new Term(fieldName, token)),  Occur.MUST);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:32:28.977

索引时尝试过 Ngram 或 EdgeNgram？

[http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/analysis/ngram/NGramTokenizer.html](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/analysis/ngram/NGramTokenizer.html)

# java - 如何在 Heroku 上使用 Proximo 修复 java.net.BindException？

> ID：13910888
> 
> 赞同：5
> 
> 时间：2012-12-17T08:48:58.643
> 
> 标签：java, heroku, proximo

我已经在 Heroku 上安装了 Proximo 插件，并且在将命令添加到现有命令之前，我从 Java 中得到了一个 BindException。这就是我的前置命令的外观：`web: bin/proximo sh target/bin/webapp`一旦我删除 Proximo 部分 ( `bin/proximo`)，应用程序就会启动而没有错误。

这是完整的堆栈跟踪。我错过了什么？

```
Exception in thread "main" java.net.BindException: Cannot assign requested address
 at sun.nio.ch.Net.bind0(Native Method)
 at sun.nio.ch.Net.bind(Net.java:344)
 at sun.nio.ch.Net.bind(Net.java:336)
 at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:199)
 at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
 at org.eclipse.jetty.server.nio.SelectChannelConnector.open(SelectChannelConnector.java:162)
 at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:297)
 at org.eclipse.jetty.server.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:240)
 at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:58)
 at org.eclipse.jetty.server.Server.doStart(Server.java:270)
 at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:58) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:42:20.280

请记住，您只能使用 Heroku 在 $PORT 变量中提供的端口。

所以：

```
web: bin/proximo [your existing command] 
```

需要包括这个，例如：

```
web: bin/proximo [your existing command] -p $PORT 
```

或者您需要指定运行 Web 进程的端口的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T15:29:21.790

proximo 包装器不适用于 Java。您必须在应用程序的初始化中添加一些自定义代码，而不是使用包装器。

```
URL proximo = new URL(System.getenv("PROXIMO_URL"));
String userInfo = proximo.getUserInfo();
String user = userInfo.substring(0, userInfo.indexOf(':'));
String password = userInfo.substring(userInfo.indexOf(':') + 1);

System.setProperty("socksProxyHost", proximo.getHost());
Authenticator.setDefault(new ProxyAuthenticator(user, password)); 
```

和

```
private class ProxyAuthenticator extends Authenticator {
  private final PasswordAuthentication passwordAuthentication;

  private ProxyAuthenticator(String user, String password) {
    passwordAuthentication = new PasswordAuthentication(user, password.toCharArray());
  }

  @Override
  protected PasswordAuthentication getPasswordAuthentication() {
    return passwordAuthentication;
  }
} 
```

该解决方案已在[本文](http://blog.palominolabs.com/2014/02/20/using-proximo-as-a-socks-proxy-in-java/index.html)中全面介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:53:51.133

它与使用端口 9999 的另一个进程有关。在 Windows 上，运行命令：

```
netstat -a -n | find "LIST" 
```

它应该列出任何占用端口的东西。当然，您必须在任务管理器中手动杀死这些程序。如果这仍然不起作用，请替换该行：

```
serverSocket = new ServerSocket(9999); 
```

和：

```
InetAddress locIP = InetAddress.getByName("192.168.1.20");
serverSocket = new ServerSocket(9999, 0, locIP); 
```

将 127.0.0.1 与您的实际 IP 地址一起使用。

# android - 视图的 getHeight() 为 Android 中的纵向和横向提供相同的结果

> ID：13910889
> 
> 赞同：1
> 
> 时间：2012-12-17T08:49:00.353
> 
> 标签：android, screen-orientation

对于我的应用程序，我使用的是手风琴布局，其中我有三个面板，并且我正在尝试将面板（texview）大小设置为适合设备高度的大小。当屏幕方向发生变化时，这不起作用。我的视图大小在横向时不会根据设备的高度而变化。请帮助我。

这是我的代码

```
if(layoutView.getId() == R.id.Advertitletext)
{
    openLayout = panel1;
    v = panel1.getVisibility();

    hideThemAll();
    if(v != View.VISIBLE)
    {
        panel1.setVisibility(View.VISIBLE);
        params = advertoutput.getLayoutParams();
        params.height = parentLinear.getHeight()-msgrecvtitle.getHeight()-msgsenttitle.getHeight()-mLogCheck.getHeight()-PearActivity.peartabs.getHeight();
        advertoutput.setLayoutParams(params);
    }

} 
```

这是我的 onConfiguration() 方法

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        ViewTreeObserver observer = parentLinear.getViewTreeObserver();
        observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            @Override
            public void onGlobalLayout() {

                parentLinear.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                if(openLayout==panel1){
                    params = advertoutput.getLayoutParams();
                    params.height = parentLinear.getHeight()-msgrecvtitle.getHeight()-msgsenttitle.getHeight()-mLogCheck.getHeight()-PearActivity.peartabs.getHeight();
                    advertoutput.setLayoutParams(params);
                }
                else if(openLayout == panel2){
                    params = msgrecvoutput.getLayoutParams();
                    params.height = parentLinear.getHeight()-adverttitle.getHeight()-msgsenttitle.getHeight()-mLogCheck.getHeight()-PearActivity.peartabs.getHeight();
                    msgrecvoutput.setLayoutParams(params);

                }else   if(openLayout == panel3){
                    params = msgsentoutput.getLayoutParams();
                    params.height = parentLinear.getHeight()-adverttitle.getHeight()-msgrecvtitle.getHeight()-mLogCheck.getHeight()-PearActivity.peartabs.getHeight();
                    msgsentoutput.setLayoutParams(params);
                }

            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:11:21.500

如果您在`AndroidManifest`文件中包含需要系统来处理方向更改：

```
android:configChanges="orientation" 
```

你应该在里面实现你的代码`onConfigurationChanged()`，否则它应该在里面`onResume()`（因为活动被暂停然后恢复并且不再调用 onCreate 。

# pandas - 从 Pandas 调用 R 时出错

> ID：13910891
> 
> 赞同：1
> 
> 时间：2012-12-17T08:49:06.737
> 
> 标签：pandas, rpy2

我只是按照本教程： http: [//pandas.pydata.org/pandas-docs/dev/r_interface.html](http://pandas.pydata.org/pandas-docs/dev/r_interface.html) 当我输入：

```
import pandas.rpy.common as com 
```

它给出以下错误消息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "D:\Python\Lib\site-packages\pandas\rpy\common.py", line 11, in <module>
    from rpy2.robjects.packages import importr
ImportError: No module named packages 
```

如何解决？

熊猫 0.8.1 + Python 2.6 + R 2.12.2 + rpy2 2.0.8 + window-xp

# facebook - 通过“Facebook OAUTH 2.0”流程添加作为多个 FB 页面管理员的 Facebook 帐户？

> ID：13910893
> 
> 赞同：0
> 
> 时间：2012-12-17T08:49:22.573
> 
> 标签：facebook, oauth

我开发了一个应用程序，可以发布和阅读用户管理的页面的墙。我通过 oAuth Process 获得访问令牌。当用户只有一个页面的管理员时，这很有效。但是当他是多个页面的管理员时，我不确定在批准应用程序之前/之后的 oAuth 过程中如何要求用户选择特定页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:34:03.060

> 但是当他是多个页面的管理员时，我不确定在批准应用程序之前/之后的 oAuth 过程中如何要求用户选择特定页面。

你不能。Facebook 目前实现`manage_pages`权限的方式，用户只能让您访问他们管理的**所有页面（或完全拒绝）[1]**

一旦用户授予您该权限，您就可以阅读`/userid/accounts`并获取他们*所有*页面的列表（对于开发人员，可能还有应用程序）。您必须遍历这些，才能为您正在寻找的特定页面选择访问令牌。

* * *

[1] 这是相当愚蠢的。作为用户，我只想让应用程序访问特定页面，而不是所有页面。尤其是当您是许多页面的管理员时，如果该应用程序应该只能访问一个页面，您可能会觉得不得不授予应用程序访问所有页面的权限不太舒服。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T10:51:21.680

我找到了一种方法。我将用户作为管理员的所有页面绑定为单选框列表，并要求他选择要与我们的应用程序连接的页面。这样，用户感觉他可以控制他管理的多个页面。我知道这是一个延迟的回复，虽然我在我的应用程序中实现了这么长时间，但从来没有比以前迟到，我想通过添加我的解决方案来结束这个讨论

# android - android中的异步Http服务器

> ID：13910895
> 
> 赞同：2
> 
> 时间：2012-12-17T08:49:28.003
> 
> 标签：android, http, core

我正在 Android 中实现一个异步 HTTP 服务器。我正在使用链接[http://hc.apache.org/httpcomponents-core-ga/examples.html](http://hc.apache.org/httpcomponents-core-ga/examples.html)（异步 HTTP 服务器）中的代码。在编译它时，我收到以下错误并且应用程序崩溃：

```
java.lang.IncompatibleClassChangeError:org.apache.http.params.SyncBasicHttpParams 
```

在行中

```
HttpParams params = new SyncBasicHttpParams(); 
```

请告诉我原因以及如何解决？

我正在使用来自 httpcomponents-core-4.3-alpha1 的罐子。 ![在此处输入图像描述](../Images/1205381c5fe6f97c8c021ec1e2bd3898.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:51:09.633

这个线程可能有一个答案的开始：[Android 1.6 中捆绑了哪个版本的 Apache HTTP 客户端？](https://stackoverflow.com/questions/2618573/what-version-of-apache-http-client-is-bundled-in-android-1-6)

实际上，您收到的错误表明您使用的 SyncBasicHttpParams 类与 android 中提供的 HttpParams 类不兼容。您应该尝试将您的 apache 库降级到 4.0.X，如线程中所示。

# php - PHP CSV 编码不是 utf-8

> ID：13910897
> 
> 赞同：1
> 
> 时间：2012-12-17T08:49:38.033
> 
> 标签：php, csv, utf-8, character-encoding, iso-8859-1

我正在使用 PHP 生成一个 CSV 文件并将其保存在硬盘上（我不想下载）。数据库字符集是`utf8_general_ci`并且其中有像度数符号 ( `°`) 这样的字符，它们在 PHPmyadmin 中完美显示。这些字符需要保存在 CSV 文件中。我所做的一切都是在 UTF-8 中，但文件是用 encoding 保存的`ISO-8859-1`。如果我开始使用该函数，当我在 excel 或任何其他文本编辑器中将其转换回时`utf8_encode`，其他字符会显示 ( )。我不知道出了什么问题，我花了几个小时来追踪它，但没有成功。`Â``UTF-8`

我试图`SET NAMES utf8`确定它是`UTF-8`，但这只会导致更多奇怪的字符并且没​​有`UTF-8`编码。使用 MySQLi 也是`set_charset`如此。将标头作为`Content-type:text/html;charset=UTF-8`CSV 仍然没有 utf-8 作为默认编码，也没有任何这些组合。

一些代码：

```
header("Content-type:text/html;charset=UTF-8");
$rMysqli = new mysqli("localhost", "user", "pass", "database");
$rCSV = fopen("test_".time().".csv", 'w');

$aCSVdata = array($var1, $var2, $var3);
fputcsv($rCSV, $aCSVdata, ",", "\"");

fclose($rCSV); 
```

这几乎就是所有正在发生的事情。只是普通的 CSV 数据，只有特殊字符，例如`°`和`Ø`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T10:57:00.893

...长篇大论的评论短...

Microsoft Office在编码方面是**最差的。**它**臭名昭著**。

（即一切都很好，除了 Excel。）

# swing - JFrame：仅允许固定大小或全屏 JFrame

> ID：13910898
> 
> 赞同：1
> 
> 时间：2012-12-17T08:49:46.860
> 
> 标签：swing, resize, jframe

我正在开发固定大小的 Swing 应用程序，但现在我需要允许用户切换到全屏模式。我不想允许自定义调整 JFrame 的大小以不重构所有组件的大小和人员 - 仅全屏。因此，在全屏模式下，我需要调整 1 jTabbedPane 的大小并移动一些其他组件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:02:34.153

最简单的方法是使用允许调整大小的[布局管理器。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

否则，将[ComponentListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ComponentListener.html)添加到 JFrame。编写该`componentResized`方法，以便任何调整 JFrame 大小的尝试都会重置原始大小。

除非您对该应用程序的受众有限，否则不同的用户具有不同的全屏尺寸。

# mongodb - MongoDb - 在两个集合中“加入”或 $

> ID：13910902
> 
> 赞同：3
> 
> 时间：2012-12-17T08:50:00.037
> 
> 标签：mongodb, aggregation-framework

假设我有 2 个集合：

```
> db.fellas.findOne()
{
    "_id" : 123
    "women" : [
        1,
        12,
        34
    ]
}

> db.women.findOne()
{ "_id" : 12, "busty" : 1 } 
```

有些女人属于某个家伙，但有些不属于。在上面的案例中，这个女人确实属于那个家伙。

我如何找到所有不属于任何男人的女人？我尝试使用 $unwind 来做到这一点，但没有运气。我的意思是，我不知道我应该进一步做什么。

你的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:24:23.210

您可以使用如下函数：

```
db.women.find().forEach(function(w){
  if( !db.fellas.findOne({ women:{$in:[w._id]} }) )
    printjson(w); 
)} 
```

还有另一种方式，即mapreduce。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:57:07.657

您不能使用聚合框架来做到这一点，因为它涉及两个不同的集合。您必须获取每个女性 ID，并在女性系列的小伙子系列中找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T12:53:34.937

听起来聚合框架不支持连接。这可以通过 Hadoop、Apache Pig 和 MongoDb+Hadoop 连接器来完成（我已经完成了）。Apache Pig 提供了一种高级语言，可以很容易地连接多个数据源。它转化为在 Hadoop 集群中运行的 map-reduce 作业。

# windows - 在 for 循环中从文件名中提取子字符串

> ID：13910905
> 
> 赞同：0
> 
> 时间：2012-12-17T08:50:03.920
> 
> 标签：windows, batch-file

我正在尝试在当前文件夹中获取文件名的子字符串。稍后我会将这些作为参数传递给某个命令，但就目前而言，我什至无法让 echo 工作：

```
setlocal EnableDelayedExpansion

for %%f in (*.mvx) do (
  set a=%%f
  echo %a%
  echo %%a%%
  echo %a:~3,8%
)
endlocal
pause 
```

产生以下结果：

```
C:\1>(
set a=xx-20121213-mvl-0005.mvx
 echo
 echo %a%
 echo ~3,8
)
ECHO is on.
%a%
~3,8 
```

最后一个应该为案例返回“20121213”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:53:50.257

您需要使用延迟扩展来回显您的变量，因为您已将它们设置在一个`for`循环中。

您已经包含了启用它的行，您只需要将`%`'s 变成`!`'s

```
setlocal EnableDelayedExpansion

for %%f in (*.mvx) do (
  set a=%%f
  echo !a!
  echo !a:~3,8!
)
endlocal
pause 
```

***更新***

要将整个脚本放在一行 cmd 命令中，您可以使用

```
cmd /v:on /c "for %f in (*.mvx) do set a=%f && echo !a! && echo !a:~3,8! && pause" 
```

# c# - 如何使用 C# 与 Chrome（Chrome 扩展）进行通信？

> ID：13910906
> 
> 赞同：6
> 
> 时间：2012-12-17T08:50:07.197
> 
> 标签：c#, google-chrome, communication

我想创建一个可以在我的 C# 应用程序和扩展之间进行通信的桥梁。
这是我真正想要的解释：我创建了一个扩展，它将获取 HTML 元素的详细信息。
但是每次我启动 Chrome 时都会启动。除了这样做，有什么方法可以向我的 chrome 扩展发送消息以获取 HTML 元素详细信息，然后将其发送回 C# 应用程序？

我可以使用“XMLHttpRequest”将信息传递给 C#，但问题是，它是在我的页面加载时开始的。

让我向你解释我想要什么：

1.  当我打开我的 chrome 时，我的扩展程序将自动启动，并且我的 background.cs（背景页面）也将启动。（这里我想要一些客户端-服务器类型的通信）

2.  使用我的 C# 应用程序，我会将一些数据发送到 chrome 扩展（例如 StartFetchingDocument）

3.  一旦我的扩展收到此消息（即 StartFetchingDocument），那么我的扩展应该将 contect-sctipt.js 注入所选选项卡。

我知道将数据发送回 C# 所需的其余部分，但在这里我只停留在这一阶段 - 如何将数据从 C# 发送到我的扩展程序（背景页面）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T13:29:42.463

嗯...可能有更好的方法，但一种简单的方法可能是在您的 c# 应用程序中打开一个[HttpListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)并从扩展程序中与它进行通信，如下所示：

```
var listener = "http://localhost:60024/";

function getCommand(){

    var postData = { 
        "action": "getCommand" 
    };

    $.post( listener, postData, function(response){
        //Parse response and do whatever c# wants
    });
}

function send(data){

    var postData = {
        "action" : "send",
        "data": data
    };

    $.post(listener, postData);
}

setInterval(getCommand, 1000); 
```

在示例中，我使用了 jQuery.post，它可以添加到扩展上下文中，但如果您更喜欢它，可以使用 XMLHttpRequest。在 c# 方面：

```
using System;
using System.Net;

namespace HttpListenerTEst
{
    class Program
    {
        private static HttpListener _listener;

        static void Main(string[] args)
        {
            _listener = new HttpListener();
            _listener.Prefixes.Add("http://localhost:60024/");
            _listener.Start();
            _listener.BeginGetContext(new AsyncCallback(Program.ProcessRequest), null);

            Console.ReadLine();
        }

        static void ProcessRequest(IAsyncResult result)
        {
            HttpListenerContext context = _listener.EndGetContext(result);
            HttpListenerRequest request = context.Request;

            //Answer getCommand/get post data/do whatever

            _listener.BeginGetContext(new AsyncCallback(Program.ProcessRequest), null);
        }
    }
} 
```

在 ProcessRequest 函数中，您可以读取发布数据或发回某些内容。

获取帖子数据：

```
 string postData;
        using (var reader = new StreamReader(request.InputStream, request.ContentEncoding))
        {
            postData = reader.ReadToEnd();
            //use your favourite json parser here
        } 
```

并通过以下方式发回一些东西：

```
 string responseString           = "This could be json to be parsed by the extension";

        HttpListenerResponse response   = context.Response;
        response.ContentType            = "text/html";

        byte[] buffer                   = System.Text.Encoding.UTF8.GetBytes(responseString);
        response.ContentLength64        = buffer.Length;
        Stream output                   = response.OutputStream;

        output.Write(buffer, 0, buffer.Length);
        output.Close(); 
```

只是一些快速的头脑风暴，期待更好的想法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:52:28.357

[如果您在远程调试的调试模式下启动chrome](https://developers.google.com/chrome-developer-tools/docs/remote-debugging) ，然后您可以通过指定的端口连接到它，您也许可以做到这一点，但这有点麻烦。

您可以尝试研究 Adob​​e Brackets 是如何做到的，但我觉得这是相同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:01:31.793

大多数谷歌浏览器扩展都是用 HTML、CSS 或 Javascript 编写的。然后，将您的扩展目录捆绑到`.crx`Chrome 扩展文件中就像运行一个简短的[`Python script`](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/tools/extensions/chromium_extension.py?revision=14872&content-type=text/plain&pathrev=14872). 但是，C# 可以翻译成 Javascript，您可以为扩展编写自己的业务逻辑。看着[`Script#`](http://scriptsharp.com/)

# apache-flex - 如何在flex中创建一个浮动的水平滚动条？

> ID：13910912
> 
> 赞同：0
> 
> 时间：2012-12-17T08:50:27.123
> 
> 标签：apache-flex, scrollbar

我有一个包含许多行和列的高级数据网格。当我想到达网格中的最后一列时，我必须在页面底部移动以进行水平滚动。我认为浮动单杠可以解决这个问题。有谁知道如何在**flex中创建一个****浮动滚动条。**

# c++ - “\”转义序列的目的是什么？

> ID：13910913
> 
> 赞同：10
> 
> 时间：2012-12-17T08:50:31.927
> 
> 标签：c++, c

> **可能重复：**
> [允许 `?` 转义的理由是什么？](https://stackoverflow.com/questions/11241313/what-is-the-rationale-in-allowing-to-be-escaped)

如果我能做到这一点：

```
string i = "'"; 
```

为什么这样做：

```
string i = "\'"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T08:51:14.580

如果你想要一个字符文字，你需要它：

```
char apos = '\''; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T08:52:11.867

如果你需要一个`'`字符，你需要它：

```
char c = '\''; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T09:25:11.133

我认为这只是为了字符常量和字符串文字之间的一致性。

该语言*可能*需要将包含单个撇号的字符串文字写成`"'"`而不是写成`"\'"`，将包含双引号的字符常量写成写成`'"'`而不是写成`'\"'`。（当然`"'"`，`'"'`两者都是完全有效的。）

允许但不要求`'`在字符串文字和`"`字符常量中进行转义，使语言更加灵活一点，让字符串文字和字符常量使用相同的转义集，并且没有特别的危害。

至于为什么你*应该*使用一种或另一种形式，这取决于你。使用您更喜欢的任何形式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T11:34:09.970

假设如果您想从服务器端为锚点生成 html，显然您将使用 string.format，如下所示...

```
 X = string.Format("<a href=\"tel:{0}\" onclick=\"Javascript: goog_report_conversion({1}); return false;\">{0}</a>", displayText, sRegPhone); 
```

我们需要在 anchor 中为函数调用和 href 加上双引号，但在服务器的语句中使用如下所示会出错。

```
 "<a href="tel:{0}""></a> 
```

因此，为了克服这个问题，我们使用转义序列，它反过来在服务器端转义（不会考虑）下一个文字到 \ ，但会在输出区域或客户端与跳过的文字一起生成......如下所示

```
<a onclick="Javascript: goog_report_conversion(2818669180); return false;" href="tel:(281) 866-9180">(281) 866-9180</a> 
```

所以它主要用于转义即将到来的文字......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T08:55:32.690

就像 Kerrek 所说，如果你想要文字字符而不是评估的字符，你可以转义字符。例如，"\"" 或正则表达式中的文字括号。它使解释器不会将转义字符评估为除实际字符值之外的任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T10:29:51.080

用简单的英语，我可以说该语言的作者必须使用一些特殊字符来编译代码

所以为了让程序员使用这个字符，他们使用了使用“/”的方法

它在几乎所有语言中盛行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T11:32:31.773

`\`是用于转义“特殊字符”的字符。这意味着什么？

这意味着解析器在遇到某些字符时会做一些*神奇的事情。*这些*神奇的东西*是解析过程中的状态变化。状态的改变类似于：现在你输入一个字符串文字，现在你转到下一行，现在你留下一个字符常量等等。

选择“\”字符是为了抑制其前面字符的*神奇含义*。因此`\`，行尾的 a 将抑制其含义，例如，允许在编辑器中的多行上构造宏，但被预处理器视为 1 lexem（预处理器使用换行符作为分隔符） .

如果您在 a 前面`"`加上 a `\`，它将抑制其字符串文字开始或结束的含义，与 . 相同`'`。

还召集了只忽略`\`前面的*非魔法字符（没有魔法时你不能压制魔法）。*所以写“\'”不是问题。在`'`字符串文字中没有神奇的含义，转义被简单地忽略了。您可以在字符串文字中的任何字符前面`\`没有问题（当然数字以及`x`八进制、十进制和十六进制字符除外）。

# java - 使用 Executors.newFixedThreadPool() 的内存泄漏

> ID：13910919
> 
> 赞同：7
> 
> 时间：2012-12-17T08:51:07.267
> 
> 标签：java, multithreading, performance, jakarta-ee, jms

我在独立环境中使用 Spring3.1。

（此问题与 Spring 无关。它在独立环境中的行为也相同。）

我实现了一个从主题接收消息的侦听器。消息速率非常高（大约 20/30 m/s）。

有些消息可能比其他消息需要更多的处理时间。

侦听器使用相同的实例，这意味着如果一条消息处理时间过长，它会严重影响我们的性能。

我们考虑过使用自己的对象池而不是使用相同的侦听器实例，但后来我发现了**Executors** (java.util.concurrent.Executors)。

因此，对于收到的每条消息，都会为其分配一个不同的线程。这将确保我们的侦听器实例可以自由地并行处理消息。

```
private ExecutorService  threadPool = Executors.newFixedThreadPool(100);
    @Override
    public void onMessage(final Message msg)
    {
        Runnable t = new Runnable()
        {
            public void run()
            {
                onSessionMessage(msg);
                log.trace("AbstractSessionBean, received messge");
            }
        };
        threadPool.execute(t);
    } 
```

这似乎解决了我们的性能问题。但是在使用 jconsole 监控应用程序之后，我们现在面临着巨大的内存泄漏。

堆内存使用量随时间显着增加。

所以我尝试用 FixedThreadPool 大小数字“玩”一点。仍然有大量内存使用：

![在此处输入图像描述](../Images/4dc59dc85ec5a986e4b6db7275703b7f.png)

知道如何解决这个问题吗？还有其他想法可以解决我的关键问题吗？

![执行 GB 后的 jconsole](../Images/a55ea8a54a18b4044b8443037868a9b4.png)

![jconsole 整体视图](../Images/051a06bdda802e1bb698323ac5b5d268.png)

运行堆转储后，我遇到了两个问题嫌疑人：

![头部转储](../Images/3fd263c2a5edc54f61e03b3c15638830.png)

谢谢，雷。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-10T11:31:04.943

我相信你遇到的问题是线程池没有释放它的资源。完成提交或执行后，您需要调用 threadPool.shutdown()。这将等到任务完成后再终止线程，然后可以进行垃圾收集。

来自官方 Java api 网站：

“应关闭未使用的 ExecutorService 以允许回收其资源。” [https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown()](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown())

或者，您可以使用 newCachedThreadPool() “创建一个线程池，根据需要创建新线程，但在可用时将重用以前构造的线程”，请参阅[https://docs.oracle.com/javase/7/docs/api /java/util/concurrent/Executors.html](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)

当我遇到这个问题时，我使用了 newFixedThreadPool() 和关闭选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:12:11.873

我认为您对内存泄漏没有任何问题，至少我无法从您的 jconsole 图表中看到它。没有主要的 GC 收集。因此，似乎只有越来越多的对象分配给了终身（老）代。为确保内存泄漏，您应该执行 GC，然后比较分配的内存。如果您发现泄漏，您可以使用 jmap 或可视化工具（标准 JDK 工具）进行堆转储。在此堆转储之后，可以使用[MAT](http://www.eclipse.org/mat/)进行分析。在进行堆转储之前，最好执行 GC 以减小堆转储文件的大小。

一些注意事项：

*   线程数不应显式影响堆内存。[复习下一个java 内存结构](http://4.bp.blogspot.com/-sP7by9zlbVQ/TaZ5LIfRxdI/AAAAAAAAAmg/diXDFa64OTo/s1600/MemoryStructure.png)可能对您有用。所以线程需要堆栈内存而不是堆。
*   一般来说，为不重的对象创建缓存不是一个好主意，因为 GC 工作算法。
*   另外我认为您应该考虑[缓存线程池](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29)或根据服务器硬件校准 ThreadPoolSize 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:12:23.677

使用 ExecutorService 后，您需要停止线程池，因为它是相同的资源，如文件或数据库或其他任何需要显式释放的资源。ExecutorService 有方法 shutdown() 和 shutdownNow() 可以在 finally 块中用于垃圾收集。

```
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

class SimpExec {
  public static void main(String args[]) {
    CountDownLatch countDownLatch = new CountDownLatch(5);
    CountDownLatch CountDownLatch2 = new CountDownLatch(5);

    ExecutorService eService = Executors.newFixedThreadPool(2);

    eService.execute(new MyThread(countDownLatch, "A"));
    eService.execute(new MyThread(CountDownLatch2, "B"));

    try {
      countDownLatch.await();
      CountDownLatch2.await();

    } catch (InterruptedException exc) {
      System.out.println(exc);
    }
      finally{

        eService.shutdown(); // This is the method we use to avoid memory Leaks.
        // eService.shutdownNow(); // -do-
       }
  }
}

class MyThread implements Runnable {
  String name;

  CountDownLatch latch;

  MyThread(CountDownLatch c, String n) {
    latch = c;
    name = n;
    new Thread(this);
  }

  public void run() {
    for (int i = 0; i < 5; i++) {
      latch.countDown();
    }
  }
} 
```

如果忘记关闭，就会发生内存泄漏，这也像 JVM 不会正常关闭的流，因为默认的 Executors 不会创建守护线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-24T08:09:06.980

只是一个建议，但如果您每秒创建 30 条消息，并且计算机（即使并行处理）处理这 30 条消息的时间比 1 秒长，那么您提交的任务队列将无法控制地增长。如果队列大小大于设定的数量，您应该确保没有提交任何任务并稍等片刻。每个 Message 对象都使用内存，我认为这可能是您的问题。缓存线程池不能解决这个问题。

你可以很简单地通过打印出你的队列大小来测试它。不知道这是否已经解决了......

# opengl-es - GLES2.0 glUnifrom2f 和 glUniform4f

> ID：13910920
> 
> 赞同：0
> 
> 时间：2012-12-17T08:51:07.653
> 
> 标签：opengl-es

为什么 glUniform2f(xxx, x, y) 的行为与 glUniform4f(xxx, x, y, 0, 1) 不同；z=0, w=1 不是默认值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:44:49.687

[glUniform](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glUniform.xml)的OpenGL ES 2.0 参考说：

> 命令中指定的数字应与指定统一变量的数据类型中的组件数相匹配（例如，1 表示 float、int、bool；2 表示 vec2、ivec2、bvec2 等）。

也没有提到默认值。您遇到的可能是未定义的行为 - 结果可能在不同的驱动程序、驱动程序版本、平台等上有所不同。

# wpf - Visual Studio 设计视图包含黄色警告图标？

> ID：13910921
> 
> 赞同：24
> 
> 时间：2012-12-17T08:51:08.780
> 
> 标签：wpf, visual-studio, xaml

我在 Visual Studio 中创建了一个 WPF 项目，其中包含一个`MainWindow`. 这会通过 XAML “导入”其他用户控件。显示`MainWindow`带有警告图标和以下文本。不幸的是，我没有英文翻译，但它的意思是这样的：

> 本文档包含一个或多个已更改的控件。重建项目以在设计视图中显示更改。

[![在此处输入图像描述](../Images/c0f37a4c61b6050bfc53bcf9de14c17b.png)](https://i.stack.imgur.com/ciwlL.png)

重建完整的解决方案没有帮助。但是，这些警告没有任何效果。

我怎样才能摆脱这些警告？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-18T07:49:34.727

我尝试过 Asryaels 解决方案，如下所示：

1.  打扫
2.  重建
3.  保存所有文件
4.  关闭 Visual Studio
5.  启动 Visual Studio
6.  打扫
7.  重建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T13:34:13.927

遇到同样的问题时，关闭解决方案，删除 /bin 中的 Debug 和 Release 文件夹并重新启动解决方案似乎有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T18:05:53.380

我尝试了 Asryaels 解决方案，但它对我不起作用。

您是否切换了平台目标？当我在平台目标下有项目时发生这种情况：任何 CPU 并切换到 x64。当我切换回任何 CPU 警告不再显示并且控制正常工作。

如果您确实切换了平台目标，请转到配置管理器并创建一个新的活动解决方案平台，并为您的项目将调试/发布设置为项目的当前平台目标。为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-10T19:19:38.027

当 ContentControl 中的控件发生更改时，就会发生这种情况。您必须重建解决方案以“更新”ContentControl 中的内容。

```
<ContentControl Grid.Row="0">
    <view:View_UserControl_TitleBar/>
</ContentControl> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-28T02:57:40.823

就我而言，我有一个用户控件库项目，该项目在编译期间出现错误。但是这些错误没有出现，因为我处于发布模式。因此更改为调试模式并且错误可见，因此我可以更正它们。之后，项目正确构建，黄色标记消失。

# php - 在 php web 环境中设置全局计时器

> ID：13910923
> 
> 赞同：-2
> 
> 时间：2012-12-17T08:51:30.257
> 
> 标签：php

我正在尝试在 PHP 中创建一个函数来计算所有用户使用函数的次数。

如果这个函数已经被使用了 30 次，那么它应该阻塞访问几分钟，然后将计数器重置为 0。

这在PHP中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:59:04.430

如果所有使用都发生在单个进程中，这不是问题，甚至是微不足道的。您只需使用全局或静态计数器变量并将其递增。只要进程正在运行，您就可以访问该值。

但是，我假设您正在谈论 Web 环境，并且 php 函数是 http 服务器执行的脚本的一部分？对不起，但你没有提到...

在那种情况下，事情会变得更加复杂，因为它不再是一个单一的过程。您需要某种持久存储。典型场景为此使用数据库、文件或共享内存。这些允许不同的进程访问共享的计数器值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:56:03.553

如果您仍然使用数据库，我会说最简单的方法是增加数据库表中的值。您还可以在同一步骤中存储时间戳。之后的下一个调用函数可以轻松读取（增加的）值。如果您没有数据库，您也可以使用文本/XML 文件。

# iphone - iPhone sdk 如何在 UITableView 中添加具有第一个和最后一个数组计数的 UIButton？

> ID：13910928
> 
> 赞同：2
> 
> 时间：2012-12-17T08:51:40.493
> 
> 标签：iphone, ios, uitableview, uibutton

`UIButton`我只需要在`UITableView`我的第一个和最后一个数组计数中添加一个。我发现我们可以使用`tableFooterView`, 在我们的表格视图下方添加取消按钮。但是我怎样才能在我的 tableview 上实现这一点，并且只使用第一个和最后一个数组值呢？这是我的代码，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath
{ 

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //Adding a UIButton in last row

    NSInteger lastSectionIndex = [editTable numberOfSections] - 1;
    NSLog(@"lastSectionIndex:%d",lastSectionIndex);

    // Then grab the number of rows in the last section
    NSInteger lastRowIndex = [editTable numberOfRowsInSection:lastSectionIndex] - 1;
    NSLog(@"lastRowIndex:%d",lastRowIndex);

    // Now just construct the index path
    NSIndexPath *pathToLastRow = [NSIndexPath indexPathForRow:lastRowIndex inSection:lastSectionIndex];
    NSLog(@"last index:%@",pathToLastRow);

    if (pathToLastRow.row == lastRowIndex) 
    {
        NSLog(@"row enters");

        checkButton1 = [UIButton buttonWithType:UIButtonTypeCustom];
        [checkButton1 setFrame:CGRectMake(200, 0, 168, 168)];
        [checkButton1 addTarget:self
                         action:@selector(customActionPressed:)
               forControlEvents:UIControlEventTouchDown];
        [checkButton1 setBackgroundImage:[[UIImage imageNamed:@"Up Arrow.jpg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:0.0] forState:UIControlStateNormal];
        editTable.tableFooterView = checkButton1;
        [cell addSubview:checkButton1]; 
    } 
```

现在我在我的表格视图的每个单元格中收到按钮。如何仅将按钮提供给我的第一行和最后一行数组值？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:55:19.477

将您的 if 条件更改为，

```
if ((lastSectionIndex == indexPath.section && lastRowIndex == indexPath.row ) || (indexPath.section == 0 && indexPath.row == 0 ))
{ 
```

它看起来像这样，

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        UIButton *checkButton1 = [UIButton buttonWithType:UIButtonTypeCustom];
        checkButton1.tag = 100;//not recommended, I would suggest to use custom UITableViewCell class and add this button as subview inside its init method
        [checkButton1 setFrame:CGRectMake(200, 0, 168, 168)];
        [checkButton1 addTarget:self
                     action:@selector(customActionPressed:)
           forControlEvents:UIControlEventTouchDown];
        [checkButton1 setBackgroundImage:[[UIImage imageNamed:@"Up Arrow.jpg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:0.0] forState:UIControlStateNormal];
        [cell addSubview:checkButton1]; 
    }

   //Adding a UIButton in last row
   NSInteger lastSectionIndex = [editTable numberOfSections] - 1;
   NSLog(@"lastSectionIndex:%d",lastSectionIndex);

   // Then grab the number of rows in the last section
   NSInteger lastRowIndex = [editTable numberOfRowsInSection:lastSectionIndex] - 1;
   NSLog(@"lastRowIndex:%d",lastRowIndex);

   // Now just construct the index path
   NSIndexPath *pathToLastRow = [NSIndexPath indexPathForRow:lastRowIndex inSection:lastSectionIndex];
   NSLog(@"last index:%@",pathToLastRow);

   UIButton *checkButton1 = (UIButton *)[cell viewWithTag:100];//not recommended, I would suggest to use custom UITableViewCell class and add this button as subview inside its init method
   if ((lastSectionIndex == indexPath.section && lastRowIndex == indexPath.row ) || (indexPath.section == 0 && indexPath.row == 0 ))
    {
       checkButton1.hidden = NO;
    } else {
       checkButton1.hidden = YES;
    } 
```

您不必`checkButton1`在 .h 文件中声明。如上所示，使其成为局部变量。然后您可以设置隐藏属性以在不同的单元格中隐藏/显示。除了执行上述操作之外，您还可以在自定义`UITableViewCell`类中创建此按钮并将隐藏属性设置为`cell.checkButton1.hidden = YES`. 您需要为此进行子类化`UITableViewCell`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:58:20.723

而不是在 CellforRow 中创建 Button 您可以在 ViewDidload 中创建并将其附加到表格的 FooterView 中。

```
UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [aButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [aButton setTitleColor:[UIColor colorWithWhite:0.0 alpha:0.56] forState:UIControlStateDisabled];
    [aButton setBackgroundImage:[[UIImage imageNamed:@"test.png"] stretchableImageWithLeftCapWidth:kButtonSliceWidth topCapHeight:0] forState:UIControlStateNormal];
    [aButton setTitle:@"Click me" forState:UIControlStateNormal];
    [aButton.titleLabel setFont:[UIFont boldSystemFontOfSize:kFontSize14]];
    [aButton setFrame:CGRectMake(10.0, 15.0, 300.0, 44.0)];
    [self.tableView setTableFooterView:aButton]; 
```

你可以为 headerview 做同样的事情。否则你可以使用`Viewforheader`方法

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{        
    UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0,0, 320, 44)] autorelease]; // x,y,width,height

    UIButton *reportButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];    
    reportButton.frame = CGRectMake(80.0, 0, 160.0, 40.0); // x,y,width,height
    [reportButton setTitle:@"rep" forState:UIControlStateNormal];
    [reportButton addTarget:self 
                     action:@selector(buttonPressed:)
           forControlEvents:UIControlEventTouchDown];        

    [headerView addSubview:reportButton];
    return headerView;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:20:20.637

You should add first button to your table view Header And other button should be added to your footer view Secion of tableView

# php - php preg_match() 多种模式

> ID：13910929
> 
> 赞同：2
> 
> 时间：2012-12-17T08:51:44.977
> 
> 标签：php, preg-match

在多个模式的情况下，可以在同一数组索引下返回 preg_match 的结果。我的意思是我有以下 preg_match 什么是检查不同子字符串 ( `'&q'`, `'?q'`, `'&keywords'`) 上的出现。

```
preg_match('/&q=(.+?)(&|$)|\?q=(.+?)(\&|$)|\&keywords=(.+?)(\&|$)/', urldecode($test_string), $matches); 
```

我想看看所有出现在`$matches[1]`to 下的情况都可以排除以下`if`语句。

```
if($matches){   
            if ($matches[1] != ''){
              $query_p = mysql_escape_string($matches[1]);      
            } elseif ($matches[3] != ''){   
              $query_p = mysql_escape_string($matches[3]);      
            } elseif($matches[5] != ''){
              $query_p = mysql_escape_string($matches[5]);
            }
         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:58:40.437

简化您的正则表达式并将所有非预期捕获组转换为正则表达式中的非捕获组，如下所示：

```
/[?&](?:q|keywords)=([^&]+)(?:&|$)/ 
```

**或者**使用[parse_str](http://php.net/manual/en/function.parse-str.php)函数来解析查询字符串。

# asp.net - 弹出窗口仅第一次打开的原因是什么

> ID：13910931
> 
> 赞同：0
> 
> 时间：2012-12-17T08:51:57.053
> 
> 标签：asp.net, vb.net, jquery

我有一个奇怪的问题，我无法理解为什么会这样。

我通过 jquery ajax 在网格视图的行单击上调用了一个页面 - 备注（比如说）。然后我将该页面（作为响应）绑定到一个 div - dvRemarks（比如说）。这个 div 在弹出窗口中打开。

弹出窗口仅第一次打开，效果很好。但是当我第二次点击时，数据会响应，但这一次弹出窗口没有打开。问题仅与弹出窗口有关，但我不明白为什么会这样？

当我再次刷新页面时，它再次仅打开 Ist 时间。

下面是jQuery： -

```
jQuery(function() {
            // Remarks          
            jQuery('#<%=dvRemarks1.ClientID %>').dialog({
                autoOpen: false,
                width: 600,
                modal: true
            });
            // Remarks Link
            jQuery('#lnkDialog').click(function() {
                jQuery('#<%=dvRemarks1.ClientID %>').dialog('open');
                return false;
            });
         }); 
```

以下是我在点击时调用的函数：-

```
function Call_Ajax(id)
    {   
        var d = new Date();
        var n = d.getMilliseconds();
        var parameters="id=" + id;
                $.ajax({
                      type: "POST",
                      url: "Remark.aspx",
                      data: {id:id, n:n},
                      success: function(response) {
                            $('#<%=dvRemarks.ClientID %>').html(response);
                            $("#lnkDialog").click();
                        },
                        error: function() {
                            alert('Some problem has been occured.');
                        }
                 });
     } 
```

下面是我绑定响应的 div - dvRemarks

```
<div id="dvRemarks1" runat="server" style="display: none;" title="Enter Remarks">
        <div id="dvRemarks" runat="server">
        </div>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:33:05.080

对此不确定，但请尝试以下一项。

```
jQuery(function() {
        // Remarks          
        jQuery('#<%=dvRemarks1.ClientID %>').dialog({
            autoOpen: false,
            width: 600,
            modal: true,  //Calling destroy on close function might help
            close: function() {
                        $(this).dialog("destroy");
                }
        });
        // Remarks Link
        jQuery('#lnkDialog').click(function() {
            jQuery('#<%=dvRemarks1.ClientID %>').dialog('open');
            return false;
        });
     }); 
```

尝试将 ajax 调用更改为

```
function Call_Ajax(id)
{   
    var d = new Date();
    var n = d.getMilliseconds();
    var parameters="id=" + id;
            $.ajax({
                  type: "POST",
                  url: "Remark.aspx",
                  data: {id:id, n:n},
                  success: function(response) {
                        $('#<%=dvRemarks.ClientID %>').empty().html(response); //empty function may be of some help here
                        $("#lnkDialog").click();
                    },
                    error: function() {
                        alert('Some problem has been occured.');
                    }
             });
 } 
```

# asp.net - WebRequest 在 Asp.net 服务器端执行时失败，但从 Windows 应用程序执行时通过

> ID：13910941
> 
> 赞同：2
> 
> 时间：2012-12-17T08:52:33.020
> 
> 标签：asp.net, .net, iis, httpwebrequest

**IIS 8 和 Windows 8**

我有下面的示例代码，我试图检查一个 url 是否存在，当我从控制台应用程序运行时它工作正常，获得响应，但是当从服务器端 ASP.net 页面执行时，它会抛出套接字异常。

示例代码：

```
try
            {
                Uri uri = new Uri("HTTPS://test");
                WebRequest http = HttpWebRequest.Create(uri);
                HttpWebResponse response = (HttpWebResponse)http.GetResponse();
                Stream stream = response.GetResponseStream();
            }
            catch (UriFormatException sds)
            {
            }
            catch (IOException sdsd)
            {
            } 
```

错误：连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接的主机没有响应，建立连接失败

在这方面的任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T02:46:12.267

如果没有更多信息，我的猜测是 asp.net 应用程序在一个没有足够权限访问网络资源的帐户下运行。您可以尝试更改运行 asp.net 应用程序的帐户或模拟具有网络访问权限的用户。

# outlook - 未知的 SMTP 主机：smtp.outlook.com

> ID：13910944
> 
> 赞同：1
> 
> 时间：2012-12-17T08:52:39.057
> 
> 标签：outlook, smtp, jakarta-mail

我做了一个需要发送电子邮件的应用程序。它以前工作过，但是当我今天想运行它时，它抛出了一个`java.net.UnknownHostException: smtp.outlook.com`. 它曾经在星期五工作，outlook 配置有什么变化吗？

这是我的代码：

```
 Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smpt.host", "smtp.outlook.com");
    props.put("mail.smtp.port", "587");
    props.put("mail.smtp.starttls.enable", "true");

    Session session = Session.getInstance(props, null);
    try {
        transport = session.getTransport("smtp");
        try {
            transport.connect("smtp.outlook.com", username, wachtwoord);
        } catch (MessagingException ex) {
            ex.printStackTrace();
        }
    } catch (NoSuchProviderException ex) {
        ex.printStackTrace();
    } 
```

它抛出以下错误：

```
javax.mail.MessagingException: Unknown SMTP host: smtp.outlook.com;
  nested exception is:
    java.net.UnknownHostException: smtp.outlook.com
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1932)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at retourberichten.VerstuurEmail.SendEmail.VerstuurTest(SendEmail.java:143)
    at retourberichten.StartApplicatie.App.main(App.java:46)
Caused by: java.net.UnknownHostException: smtp.outlook.com
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:288)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:231)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900)
    ... 5 more
java.lang.IllegalStateException: Not connected 
```

非常感谢任何帮助，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T12:41:41.440

SMTP 服务器应该是 smtp.live.com 而不是 smtp.outlook.com

[http://www.groovypost.com/howto/outlook.com-settings-pop3-smtp-imap/](http://www.groovypost.com/howto/outlook.com-settings-pop3-smtp-imap/)

# linux - 超慢 /usr/bin/env 调用

> ID：13910948
> 
> 赞同：1
> 
> 时间：2012-12-17T08:52:44.690
> 
> 标签：linux, cluster-computing

我在一个计算集群上工作，我有一个非常奇怪的 /usr/bin/env 行为......总之，它工作得非常慢。在头节点上：

```
$ time /usr/bin/env which
<which output>

real    0m0.025s
user    0m0.001s
sys     0m0.001s 
```

在计算节点上：

```
$ qsub -I                                                                                                                
qsub: waiting for job 176620.scyld.localdomain to start
qsub: job 176620.scyld.localdomain ready

-bash-3.2$ time which
<which output>

real    0m0.003s
user    0m0.000s
sys     0m0.003s

-bash-3.2$ time /usr/bin/env /usr/bin/which

<which output>
real    0m0.003s
user    0m0.000s
sys     0m0.003s

-bash-3.2$ time /usr/bin/env which
<which output>

real    5m0.003s
user    0m0.001s
sys     0m0.001s 
```

*ps ax*报告这个：

```
12884 pts/3    S+     0:00 /usr/bin/env which 
```

打印使用横幅需要 5 分钟。任何想法为什么会发生这种情况？

**编辑1：**

关于哪个的附加信息：

```
-bash-3.2$ type -a which
which is /usr/bin/which
-bash-3.2$ file /usr/bin/which
/usr/bin/which: ELF 64-bit LSB executable, AMD x86-64, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), stripped
-bash-3.2$ echo $PATH
/bin:/usr/bin:/home/gusev/.rvm/bin:/home/gusev/bin 
```

**编辑 2**

我已经`strace`，`/usr/bin/env which`它卡在

```
execve("/bin/which", ["which"], [/* 47 vars */] 
```

现在运行一个平原

```
/bin/which 
```

也卡住了，但这个文件不存在：

```
-bash-3.2$ ls /bin/which
ls: /bin/which: No such file or directory 
```

`/bin`安装在 NFS 上：

```
-bash-3.2$ mount | grep bin
10.54.0.1:/bin on /bin type nfs (nolock,nonfatal)
10.54.0.1:/usr/bin on /usr/bin type nfs (nolock,nonfatal) 
```

所以这可能是一个网络问题......

**编辑3：**

`which which`工作得很好：

```
-bash-3.2$ time which which
/usr/bin/which

real    0m0.002s
user    0m0.000s
sys     0m0.002s 
```

的输出`strace -e trace=execve /usr/bin/env which`是

```
execve("/usr/bin/env", ["/usr/bin/env", "which"], [/* 47 vars */]) = 0
execve("/bin/which", ["which"], [/* 47 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/bin/which", ["which"], [/* 47 vars */]) = 0
<which output> 
```

**编辑4：**

挂起时间总是 5 分钟。看起来这是某种默认值超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:38:13.207

导致问题的可能是`which`命令，而不是`env`命令。

由于您看到的结果非常不同

```
time /usr/bin/env /usr/bin/which 
```

对比

```
time /usr/bin/env which 
```

您的 中可能还有另一个`which`命令`$PATH`，也许在`/usr/local/bin`or中`$HOME/bin`。`type -a which`告诉你什么？你`$PATH`看起来像什么？

请注意，它`which`可以是 shell 脚本或可执行文件。如果它是一个 shell 脚本，请尝试获取它的副本并添加`set -x`以查看它在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:00:41.133

此问题以及[您之前的问题](https://stackoverflow.com/questions/13759588/how-to-fix-usr-bin-env-agrument-processing)中描述的问题似乎是由于`execve`需要很长时间才能返回您的计算笔记造成的。路径中的目录是 NFS 安装的事实可能是一个促成因素。

通过运行命令`strace`，我们看到`env`使用重复调用`execve`来探测每个路径中是否存在命令：

```
[me@home]$ echo $PATH
/home/me/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/me/work/bin

[me@home]$ strace -e execve /usr/bin/env which
execve("/usr/bin/env", ["/usr/bin/env", "which"], [/* 53 vars */]) = 0
execve("/home/me/bin/which", ["which"], [/* 53 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/lib/lightdm/lightdm/which", ["which"], [/* 53 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/local/sbin/which", ["which"], [/* 53 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/local/bin/which", ["which"], [/* 53 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/sbin/which", ["which"], [/* 53 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/bin/which", ["which"], [/* 53 vars */]) = 0 
```

正如您在上面的评论中确认的那样，`which which`不会遇到同样的问题，那是因为它使用`stat`而不是`execve`探测路径：

```
[me@home]$ strace -e execve,stat /usr/bin/which which
execve("/usr/bin/which", ["/usr/bin/which", "which"], [/* 53 vars */]) = 0
stat("/home/me", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat(".", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat("/home/me/bin/which", 0x7fff79ae8760) = -1 ENOENT (No such file or directory)
stat("/usr/lib/lightdm/lightdm/which", 0x7fff79ae8760) = -1 ENOENT (No such file or directory)
stat("/usr/local/sbin/which", 0x7fff79ae8760) = -1 ENOENT (No such file or directory)
stat("/usr/local/bin/which", 0x7fff79ae8760) = -1 ENOENT (No such file or directory)
stat("/usr/sbin/which", 0x7fff79ae8760) = -1 ENOENT (No such file or directory)
stat("/usr/bin/which", {st_mode=S_IFREG|0755, st_size=946, ...}) = 0
/usr/bin/which 
```

恐怕无法提供任何建议来解决根本问题，但与此同时，您可以通过以下方式解决该问题：

1.  使用命令的完整路径而不是`env`为您解析它们。
2.  如果您真的想使用`env`，请尽可能重新排序`$PATH`以最小化搜索。例如：

    ```
    PATH=/usr/bin:$PATH /usr/bin/env which   # place most likely path first 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:17:04.323

最后，我发现我有一个很长的`PATH`环境变量。并且可能它以某种方式影响`execve`了 NFS 共享的调用。

因此，我将一堆可执行文件移到了一个signle 目录中，并用`PATH`一个条目替换了其中的许多条目。从那以后我没有遇到任何问题。

# postgresql - Postgresql order by - 丹麦语字符被扩展

> ID：13910949
> 
> 赞同：1
> 
> 时间：2012-12-17T08:52:51.087
> 
> 标签：postgresql, sql-order-by

我正在尝试在 sql 查询中使用“order by”语句。但是由于某种原因，丹麦特殊字符被扩展而不是评估它们的值。

```
SELECT roadname FROM mytable ORDER BY roadname 
```

结果：

*   阿比伦登
*   Æblerosestien
*   艾格恩阿勒 1

中间的结果应该是最后一个。

语言环境设置为丹麦语，因此它应该知道丹麦语特殊字符的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T11:48:59.423

你的数据库的排序规则是什么？（您可能还想提供您正在使用的 PostgreSQL 版本）使用 psql 中的 "\l" 来查看。

比较和对比：

```
steve@steve@[local] =# select * from (values('Abildlunden'),('Æblerosestien'),('Agern Alle 1')) x(word)
order by word collate "en_GB";
     word      
---------------
 Abildlunden
 Æblerosestien
 Agern Alle 1
(3 rows)

steve@steve@[local] =# select * from (values('Abildlunden'),('Æblerosestien'),('Agern Alle 1')) x(word)
order by word collate "da_DK";
     word      
---------------
 Abildlunden
 Agern Alle 1
 Æblerosestien
(3 rows) 
```

数据库排序规则是在您创建数据库集群时根据您当时设置的语言环境设置的。如果您通过包管理器（例如 apt-get）安装 PostgreSQL，那么它很可能取自系统默认语言环境。

您可以覆盖在特定列甚至特定表达式中使用的排序规则（如上面示例中所做的那样）。但是，如果您没有指定任何内容（可能），则将使用数据库默认值（它本身是在创建数据库时从模板数据库继承的，并且在创建集群时模板数据库排序规则是固定的）

如果您想在`da_DK`整个过程中使用默认排序规则，并且它当前不是您的数据库默认设置，那么您最简单的选择可能是转储数据库，然后删除并重新创建集群，将排序规则指定为`initdb`（或`pg_createcluster`您使用的任何工具创建服务器）

顺便说一句，这个问题的措辞不好。PostgreSQL 并没有忽略“特殊”字符，它正确地将“Æ”扩展为“AE”——这是英语的正确规则。最后整理“Æ”实际上更像是未本地化的行为。

整理文档：[http ://www.postgresql.org/docs/current/static/collat​​ion.html](http://www.postgresql.org/docs/current/static/collation.html)

# wpf - 任何依赖属性的响应式用户界面

> ID：13910958
> 
> 赞同：0
> 
> 时间：2012-12-17T08:53:22.363
> 
> 标签：wpf, system.reactive, reactiveui

我有两个文本框和 ReactiveUI 的简单 WPF 应用程序。我尝试使用 WhenAny 查找第一个文本框的依赖属性

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        RxApp.DeferredScheduler = DispatcherScheduler.Current;
        InitializeComponent();
        Text1.WhenAny(i => i.Text, i => i.Value).Subscribe(_ => SomeMethod());

    }

    void SomeMethod()
    {
        MessageBox.Show("Boom!");
    }

} 
```

我的表格代码是

```
<Window x:Class="TestObservable.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"></ColumnDefinition>
        <ColumnDefinition Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <TextBox Name="Text1" Grid.Column="0"></TextBox>
    <TextBox Name="Text2" Grid.Column="1"></TextBox>

</Grid> 
```

但是当我更改 TextBox 文本时，它不会显示给我

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:22:21.100

试试这个：

```
this.WhenAny(x => x.Text1.Text, x => x.Value); 
```

如果它不起作用，我相信你被 ReactiveUI 4.1 中的一个错误所困扰。升级到 4.2（几天前发布）可能会修复它。

# javascript - JavaScript 中的反射

> ID：13910962
> 
> 赞同：8
> 
> 时间：2012-12-17T08:53:43.080
> 
> 标签：javascript, reflection

我一直在研究 JavaScript 中反射的可能性。我已经有一个简单的反射器，可以列出对象/函数的成员，如下所示：

```
window["Foo"] = {
    "Bar": {
        "Test": function () {
            this.x = 32;
            this._hello = "Hello World";
            this._item = 123.345;

            this.hello = function() {
                alert("hello");
            };

            this.goodbye = function() {
                alert("goodbye");
            }
        }
    }
}

$(document).ready(function () {
    var x = new Foo.Bar.Test();
    Reflect(new Foo.Bar.Test());
});

function Reflect(obj) {
    for (var item in obj) {
        $("body").append(item + "(" + typeof obj[item] + ") = " + obj[item] + "<br />");
    }
} 
```

**结果：**

> x(数字) = 32
> 
> _hello(string) = 你好世界
> 
> _item(number) = 123.345
> 
> 你好（函数）=函数（）{警报（“你好”）；}
> 
> 再见（函数）=函数（）{警报（“再见”）；}

我挑战的下一部分是构建可以反映（如果可能）对象名称和对象路径的东西。

使用这个例子：...

```
var x = new Foo.Bar.Test(); 
```

如何从 x 反映“测试”？例如：

```
ReflectName(x); //returns "Test"; 
```

另外我怎样才能反映到x的路径？例如：

```
ReflectPath(x) //returns Foo.Bar.Test 
```

是否可以使用 JavaScript 完成这两件事？我对此进行了研究，到目前为止还没有设法提出任何可行的解决方案。

我不想要一个需要硬编码对象/函数的名称和路径的解决方案，因为这会破坏使用反射的意义。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T10:23:28.310

JavaScript 中没有类（尽管由于我不知道的原因模仿 Java 的代码风格，你可能认为有一些）。 `Foo.Bar.Test`不是指`Test`在命名空间中注册的类`Foo.Bar`，而是指作为某个对象的属性分配的函数，该`Test`对象被分配为某个对象的属性`Bar`，称为`Foo`.

您不能像“给我`7`分配了数字的所有变量”那样进行反思，因此您不能列出所有包含`Test`其属性之一的对象。

这实际上很好并且开辟了新的可能性，但一开始可能会令人困惑。

顺便说一句，由于 JavaScript 中没有类，我相信术语*反射*不是很幸运。`new Foo()`并不是说“创建 Foo 的新实例”，而是“创建一个新对象并在该对象的上下文中执行函数，`Foo`最后返回它。是的`new`，如果你想在 JavaScript 中做更高级的事情，这个关键字很混乱, 永远不要相信你的 Java/C# 经验。JavaScript 伪造 Java（我想不会吓到新手并让他们快速做简单的事情），但它非常不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T10:39:33.583

这在 JavaScript 中是不可能的。（为了更深入地了解 JavaScript 的类型系统，我推荐阅读[这篇](https://web.archive.org/web/20150211073056/http://vijayan.ca:80/blog/2012/02/21/javascript-type-model/)文章。）

您可以做的最好的近似是[查询*静态*JSON 结构](http://jsonselect.org/#docs)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-23T03:22:34.787

回答你的第一个问题

```
function ReflectName(obj) { return obj.__proto__.constructor.name } 
```

第二个问题有点困难，需要对定义进行更多设置。

这里的回答要好一些：[Javascript objects: get parent](https://stackoverflow.com/questions/2980763/javascript-objects-get-parent)

# crystal-reports - Crystal Reports 多列从右到左

> ID：13910966
> 
> 赞同：1
> 
> 时间：2012-12-17T08:53:53.347
> 
> 标签：crystal-reports, alignment

我用 C# win 形式编写了一个程序。我用过水晶报表。我想从右到左设置 Crystal Reports 多列。

下图。

![在此处输入图像描述](../Images/87c5ee257c55911075b848161d4df734.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T11:52:04.567

为此使用交叉表。你只需从左到右分配

为此，请使用此链接。 [http://www.codeproject.com/Articles/142064/Step-by-Step-Creation-of-Crystal-Report-using-its](http://www.codeproject.com/Articles/142064/Step-by-Step-Creation-of-Crystal-Report-using-its)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T19:10:43.020

设置单列方向：在section3(details)中右击IFieldObject(列)：选择“格式化对象”。然后你就知道该怎么做了。祝你好运！

# html - 有什么方法可以控制 MVC 3 自定义助手类生成的 HTML 格式？

> ID：13910970
> 
> 赞同：1
> 
> 时间：2012-12-17T08:54:12.800
> 
> 标签：html, asp.net-mvc-3

我正在使用 MVC 3 进行 Web 开发，在这里当我使用自定义帮助程序类创建 HTML 时，它看起来非常难看。

例如：如果我使用助手构建一个列表，它会给我如下结果：

```
<ul>
<li>some link 1</li>
<li>some link 2</li>
<li>some link 3</li>
<li>some link 4</li>
</ul> 
```

我需要的是，格式化 HTML 如下：

```
<ul>
   <li>some link 1</li>
   <li>some link 2</li>
   <li>some link 3</li>
   <li>some link 4</li>
</ul> 
```

是否有任何本机方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:11:20.520

这无关紧要，因为这只影响您渲染标记的人类读者。我不会否认拥有可读的 HTML 是有用的，但是你能证明花多少时间来让这部分“正确”是合理的？

对此有两个主要解决方案：

### 第一个 - 处理生成的 HTML

使用这种方法，您可以`MvcHtmlString`从辅助函数中获取返回值，然后通过 HTML 格式库运行生成的 HTML 片段。这种方法会很慢，因为它必须渲染未缩进的 HTML，然后解析和分析它，然后重新渲染它。如果您使用大量库来重新格式化代码，或者如果您将其发送到外部库进行处理（例如 HtmlTidy 可执行文件），预计它会为您的页面加载时间增加 10 毫秒。

### 第二个 - 修复 HTML 助手

当然，最好的方法是重新实现您的 HTML 帮助程序，以便缩进代码。幸运的是 HTML Helpers 不会太复杂。复制生成的源代码（使用反射器）并不难，然后将其粘贴到具有正确缩进的新辅助方法中。

当然，这是假设整体`<ul>`及其所有`<li>`元素是由单个 Helper 调用生成的，而不是您自己在视图文件中省略缩进。

# python - 使用静态类变量为对象分配索引

> ID：13910975
> 
> 赞同：0
> 
> 时间：2012-12-17T08:54:29.653
> 
> 标签：python, instantiation

我有一个代表要保存在集合中的对象的类。我希望类本身记住它创建了多少，以便在您调用`SetObject()`并`__init__()`创建一个新对象时，该对象接收一个唯一索引。也许是这样的

```
class SetObject(object):
  # static class variable 
  object_counter = 0

  def __init__(self, params):
    self.params=params
    self.index = self.get_index()

  def get_index(self):
    object_counter += 1
    return object_counter-1

a = SetObject(paramsa)
b = SetObject(paramsb)
print a.index
print b.index 
```

会产生

```
0
1 
```

或类似的东西。目前，这种方法似乎给出了“分配前引用的变量”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:57:00.057

你需要写：

```
 def get_index(self):
     SetObject.object_counter += 1
     return SetObject.object_counter-1 
```

否则只有当 object_counter 是一个全局变量时它才会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:11:42.357

您需要使用对类的引用来引用它的变量；您也许可以使用类方法（使用`@classmethod`装饰器），但实际上没有必要。

更好地`itertools.count()`用于获得一个万无一失的“静态”计数器；然后无需重新分配回类属性：

```
import itertools

class SetObject(object):
   object_counter = itertools.count().next

   def __init__(self, params):
       self.params=params
       self.index = self.object_counter() 
```

（上面的代码假定 Python 2；在 Python 3 上，迭代没有`.next`方法，您需要`functools.partial(next, itertools.count())`改用）。

因为计数器是一个迭代器，我们根本不需要赋值`SetObject.object_counter`。子类可以根据需要提供自己的计数器，也可以复用父类的计数器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:57:59.977

线

```
object_counter += 1 
```

翻译成

```
object_counter = object_counter + 1 
```

当您在作用域内（例如在函数内）分配一个变量时，Python 假定您想要创建一个新的局部变量。因此它标记`object_counter`为本地，这意味着当您尝试获取其值（添加一个）时，您会收到“未定义”错误。

要修复它，告诉 Python 在哪里查找`object_counter`. 通常，您可以为此使用`global`or`nonlocal`关键字，但在您的情况下，您只想在类中查找它：

```
self.__class__.object_counter += 1 
```

# java - 如何确保实用静态方法的线程安全？

> ID：13910976
> 
> 赞同：83
> 
> 时间：2012-12-17T08:54:36.853
> 
> 标签：java, oop, thread-safety, static-methods, utility

是否有任何通用方式或规则退出，我们可以通过它来确保在任何应用程序的各种实用程序类中专门使用的静态方法的线程安全。这里我要特别指出Web Applications的线程安全。

众所周知，以不可变对象为参数的静态方法是线程安全的，而可变对象则不是。

如果我有一个用于某些操作的实用程序方法，`java.util.Date`并且该方法接受 的实例`java.util.Date`，那么该方法将不是线程安全的。那么如何在不改变参数传递方式的情况下使其线程安全呢？

```
public class DateUtils {

    public static Date getNormalizeDate(Date date) {
        // some operations
    }   
} 
```

类也是`javax.faces.context.FacesContext`可变的吗？将此类的实例传递给此类静态实用程序方法是否线程安全？

这个类的列表，其实例可以或不能作为参数传递，可能很长；那么在编写此类实用程序类的代码时，我们应该记住哪些要点呢？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-17T09:09:52.697

> 众所周知，以不可变对象为参数的静态方法是线程安全的，而可变对象则不是。

我会对此提出异议。传递给方法的参数存储在堆栈中，这是每个线程的习惯用法。

如果您的参数是可变对象，例如 a`Date`那么您需要确保其他线程不会在其他地方同时修改它。但这是与您的方法的线程安全无关的另一件事。

您发布的方法是线程安全的。它不维护任何状态，仅对其参数进行操作。

*我强烈建议您阅读[Java Concurrency in Practice](http://www.javaconcurrencyinpractice.com/)或一本专门讨论 Java 线程安全的类似书籍。这是一个复杂的主题，无法通过一些 StackOverflow 答案适当地解决。*

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-17T09:07:16.820

由于您的类不包含任何成员变量，因此您的方法是无状态的（它只使用局部变量和参数），因此是线程安全的。

调用它的代码可能不是线程安全的，但这是另一个讨论。例如，Date 不是线程安全的，如果调用代码读取了另一个线程写入的 Date，则必须在 Date 写入和读取代码中使用适当的同步。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-10-05T16:23:55.033

给定 JVM 的结构，局部变量、方法参数和返回值本质上是“线程安全的”。但是实例变量和类变量只有在你适当地设计你的类时才会是线程安全的。更多[在这里](http://www.javaworld.com/article/2076747/core-java/design-for-thread-safety.html)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-05-15T12:14:14.633

我看到很多答案，但没有一个真正指出原因。

所以可以这样想，每当创建一个线程时，它都会用自己的堆栈创建（我猜创建时堆栈的大小是~2MB）。所以发生的任何执行实际上都发生在这个线程堆栈的上下文中。创建的任何变量都存在于堆中，但它的引用存在于堆栈中，但不存在于线程堆栈中的静态变量除外。

您进行的任何函数调用实际上都被推入线程堆栈，无论是静态的还是非静态的。由于完整的方法被压入堆栈，因此发生的任何变量创建都存在于堆栈中（同样例外是静态变量）并且只能由一个线程访问。

所以所有的方法都是线程安全的，直到它们改变了一些静态变量的状态。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-17T09:04:17.087

我建议在方法启动后立即创建该（可变）对象的副本，并使用副本而不是原始参数。

像这样的东西

```
public static Date getNormalizeDate(Date date) {
    Date input = new Date(date.getTime());
    // ...
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-01-21T16:09:16.127

这就是我的想法：想象一个 CampSite（这是一个静态方法）。作为一个露营者，我可以在我的背包中带入一堆对象（这是在堆栈上传递的参数）。CampSite 为我提供了一个放置帐篷和露营炉等的地方，但如果 CampSite 所做的唯一事情是允许我修改自己的对象，那么它是线程安全的。CampSite 甚至可以凭空创建东西 ( `FirePit firepit = new FirePit();`)，这些东西也是在堆栈上创建的。

在任何时候，我都可以带着我的背包里的所有物品消失，并且任何其他露营者都可以出现，完全按照他们上次消失时所做的事情。此 CampSite 中的不同线程将无法访问在其他线程中创建的 CampSite 堆栈上的对象。

假设只有一个 campStove（CampStove 的一个对象，而不是单独的实例）。如果想象一下我正在共享一个 CampStove 对象，那么就会考虑多线程。我不想打开我的campStove，消失然后在其他露营者将其关闭后重新出现 - 我会永远检查我的热狗是否已完成，但永远不会。您必须在某个地方放置一些同步……在 CampStove 类中，在调用 CampSite 的方法中，或者在 CampSite 本身中……但就像[Duncan Jones](https://stackoverflow.com/a/13911150/289037)所说，“那是另一回事”。

请注意，即使我们在*非*静态 CampSite 对象的单独实例中露营，共享一个 campStove 也会有相同的多线程考虑。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-12T07:57:00.747

我们将举一些例子来看看静态方法是否是线程安全的。

示例 1：

```
public static String concat (String st1, String str2) {
return str1 + str2
} 
```

现在上面的方法是线程安全的。

现在我们将看到另一个不是线程安全的示例。

示例 2：

```
 public static void concat(StringBuilder result, StringBuilder sb, StringBuilder sb1) {
    result.append(sb);
    result.append(sb1);
    } 
```

如果您看到这两种方法都非常原始，但仍然一种是线程安全的，另一种则不是。为什么？两者有什么区别？

实用程序中的静态方法是否易于非线程安全？很多问题对吧？

现在每件事都取决于您如何实现方法以及您在方法中使用的对象类型。您是否使用线程安全对象？这些对象/类是可变的吗？

如果您在示例 1 中看到 concat 方法的参数是 String 类型，它是不可变的并且按值传递，因此该方法是完全线程安全的。

现在在示例 2 中，参数是可变的 StringBuilder 类型，因此其他线程可以更改 StringBuilder 的值，这使得该方法可能是非线程安全的。

这又不是完全正确的。如果您使用局部变量调用此实用程序方法，那么您永远不会遇到与线程安全相关的任何问题。因为每个线程都使用自己的局部变量副本，所以您永远不会遇到任何线程安全问题。但这超出了上述静态方法的范围。这取决于调用函数/程序。

现在实用程序类中的静态方法是一种正常的做法。那么我们该如何避免呢？如果您看到示例 2，我正在修改第一个参数。现在，如果你想让这个方法真正线程安全，那么你可以做一件简单的事情。要么使用非可变变量/对象，要么不更改/修改任何方法参数。

在示例 2 中，我们已经使用了可变的 StringBuilder，因此您可以更改实现以使静态方法线程安全，如下所示：

```
public static String concat1(StringBuilder sb, StringBuilder sb1) {
StringBuilder result = new StringBuilder();
result.append(sb);
result.append(sb1);
return result.toString();
} 
```

再次回到基础知识，请始终记住，如果您使用的是不可变对象和局部变量，那么您离线程安全问题还有很长的路要走。

来自北极（[https://nikhilsidhaye.wordpress.com/2016/07/29/is-static-method-in-util-class-threadsafe/](https://nikhilsidhaye.wordpress.com/2016/07/29/is-static-method-in-util-class-threadsafe/)）感谢**Nikhil Sidhaye**这篇简单的文章

# javascript - 谷歌地图行车路线：javascript 值的替代？

> ID：13910977
> 
> 赞同：0
> 
> 时间：2012-12-17T08:54:41.740
> 
> 标签：javascript, google-maps-api-3

在stackoverflow的某个地方，我发现了这个（由我稍微修改）来呈现来自谷歌地图的基本驾驶说明：

```
<!DOCTYPE html>
<html> 
<head> 
   <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
   <title>Google Maps API v3 Directions Example</title> 
   <script type="text/javascript" 
           src="http://maps.google.com/maps/api/js?sensor=false&language=de"></script>
</head> 
<body style="font-family: Arial; font-size: 12px;"> 
   <div style="width: 600px;">
     <div id="map" style="width: 500px; height: 400px; float: left;"></div> 
     <div id="panel" style="width: 500px; float: left;"></div> 
   </div>

   <script type="text/javascript"> 

     var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();

     var map = new google.maps.Map(document.getElementById('map'), {
       zoom:7,
       mapTypeId: google.maps.MapTypeId.ROADMAP
     });

     directionsDisplay.setMap(map);
     directionsDisplay.setPanel(document.getElementById('panel'));

     var request = {
       origin: 'An der Alster 1, Hamburg', 
       destination: 'Albada 1, Cala Llombards, Mallorca',
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       }
     });
   </script> 
</body> 
</html> 
```

我已经稍微修改了示例以适合我的 Kindle 屏幕 - 现在，因为我的 JavaScript 真的很糟糕 - 我如何更新它以在顶部有两个文本框来询问`origin`和`destination`，也许还有两个单选框让我选择`travelMode`(`DRIVING`和)的值`WALKING`？

谢谢！

* * *

完整的复制粘贴答案：

```
<!DOCTYPE html>
<html> 
<head> 
   <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
   <title>Google Maps API v3 Directions Example</title> 
   <script type="text/javascript" 
           src="http://maps.google.com/maps/api/js?sensor=false&language=de"></script>
</head> 
<body style="font-family: Arial; font-size: 12px;"> 

Start:<input type="text" id="start"><br>
Ende: <input type="text" id="end"><br>
<div>
<select id="mode" onchange="calcRoute();">
  <option value="DRIVING">Auto</option>
  <option value="WALKING">zu Fuß</option>
</select><br>
<input type="button" value="Los" onclick="calcRoute();">
</div>
<br>

   <div style="width: 600px;">
     <div id="map" style="width: 400px; height: 400px; float: left;"></div> 
     <div id="panel" style="width: 400px; float: left;"></div> 
   </div>

   <script type="text/javascript"> 

     var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();

     var map = new google.maps.Map(document.getElementById('map'), {
       zoom:7,
       mapTypeId: google.maps.MapTypeId.ROADMAP
     });

     directionsDisplay.setMap(map);
     directionsDisplay.setPanel(document.getElementById('panel'));

     var request = {
       origin: '', 
       destination: '',
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       }
     });

     function calcRoute() {
  var selectedMode = document.getElementById("mode").value;
  var start = document.getElementById("start").value;
  var end = document.getElementById("end").value;
  var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.TravelMode[selectedMode]
  };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
  });
}
   </script> 
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:23:32.433

请参阅下面的标记和代码，这些标记和代码从文本框以及下拉框的旅行模式中获取输入 -

**HTML-**

```
Start:<input type="text" id="start">
End:<input type="text" id="end">
<div>
<strong>Mode of Travel: </strong>
<select id="mode" onchange="calcRoute();">
  <option value="DRIVING">Driving</option>
  <option value="WALKING">Walking</option>
  <option value="BICYCLING">Bicycling</option>
  <option value="TRANSIT">Transit</option>
</select>
</div> 
```

**Javascript-**

```
function calcRoute() {
  var selectedMode = document.getElementById("mode").value;
  var start = document.getElementById("start").value;
  var end = document.getElementById("end").value;
  var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.TravelMode[selectedMode]
  };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
  });
} 
```

# sql-server - 在特定时间间隔后终止 SSIS 包

> ID：13910985
> 
> 赞同：2
> 
> 时间：2012-12-17T08:55:48.273
> 
> 标签：sql-server, sql-server-2008, ssis

我们正在使用 Windows 任务计划程序计划 SSIS 包。计划任务每​​小时都会创建一个新的包实例并开始执行。我们需要确保在下一次执行开始之前终止前一个实例。是否可以在特定时间间隔后从包内本身终止包执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:14:25.357

在 Windows 任务计划程序中，如果您转到任务的“设置”选项卡，则会有一个复选框，其中包含“如果任务运行时间超过：则停止任务”选项。

将此设置为所需的时间间隔，任务计划程序将在指定时间过去后终止进程。

![任务计划程序中的设置示例](../Images/24b0e0ad5cf11f58451c2059ad6eb805.png)

# javascript - 如何使用名称属性获取文本框的值

> ID：13910989
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:55:58.590
> 
> 标签：javascript, jquery

如何在 jquery 中使用 name 属性而不是 id 属性获取框值谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T08:59:36.130

尝试这个

```
$('input[name="hello"]').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:59:59.950

```
<input type="text" name="textfield123" value="something" />

<script>
var valueoftextfield = document.getElementsByName('textfield123')
</script> 
```

你需要这样的东西吗？

# javascript - Node.js express post 参数始终未定义

> ID：13910991
> 
> 赞同：1
> 
> 时间：2012-12-17T08:56:01.600
> 
> 标签：javascript, html, forms, node.js, express

我对 Node.js 开发还很陌生，而且我知道已经有几个这样的堆栈溢出问题，不幸的是，似乎没有一个能解决我的问题。所以我觉得我能做的就是问我的问题

所以我将 Node.js 与 Express 和 Jade 视图引擎一起使用。

我的一些代码基于这篇文章：[http ://howtonode.org/express-mongodb](http://howtonode.org/express-mongodb)

无论如何，这就是我所拥有的

节点应用程序：

```
var express = require('express');
var home = require('./routes/home');
var d3demo = require('./routes/d3demo');
var PersonProvider = require('./public/javascripts/personProvider').PersonProvider;
var personProvider = new PersonProvider('localhost', 27017);
var LinkProvider = require('./public/javascripts/linkProvider').LinkProvider;
var linkProvider = new LinkProvider('localhost', 27017);

var http = require('http');
var path = require('path');
var app = express();

//=============================================================================
//    EXPRESS SETUP
//=============================================================================
app.configure(function(){
  app.set('port', process.env.PORT || 2000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  //app.use(require('connect').bodyParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function () {
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function () {
    app.use(express.errorHandler());
});

//=============================================================================
//    ROUTING
//=============================================================================
app.get('/home', function (req, res) {
    home.homeGet(req, res, commonHelper, personProvider, linkProvider);
});

app.post('/home', function (req, res) {
    home.homePost(req, res, personProvider);
});

var server = http.createServer(app);

server.listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

这是 Home 路线

```
/*
 * GET home page.
 */

exports.homeGet = function(req, res, commonHelper, personProvider, linkProvider){
        commonHelper.seedData(personProvider, linkProvider, function() {
        res.render('home');
    });
};

exports.homePost = function (req, res, personProvider) {

    var newUserEmail = req.body.email;
    console.log(req.body.length);

    //console.log(x);

    //var email = req.param('Email');
    console.log("/Home posted Email :" + newUserEmail);

    personProvider.save({
        //email: req.param('Email'),
        email: newUserEmail,
    }, function (error, docs) {
        if(error == null) {
            res.redirect('/d3demo');
        } else {
            res.render('home');
        }
    });

}; 
```

这就是玉观

```
extends layout

block head
  link(rel='stylesheet', href='/stylesheets/home.css')
  script(src='/javascripts/home.js')

block content
  form(method='post', id='homeForm', action='http://localhost:2000/home')
    div(id='dialog', title='error', style='display:none;')
      p You need to supply a valid email
    div(id='NewDetailsArea')
      p Enter your email address, and then click enter 
      | <input type="text" id="email" class="email"></input>
      div#homeSubmit
        input(type='submit', value='Enter', id='enterEmail') 
```

哪个被渲染到这个

```
<form method="post" id="homeForm" action="http://localhost:2000/home">
  <div id="dialog" title="error" style="display:none;">
    <p>You need to supply a valid email</p></div>
    <div id="NewDetailsArea">
      <p>Enter your email address, and then click enter </p>
      <input type="text" id="email" class="email">
      </input><div id="homeSubmit"><input type="submit" value="Enter" id="enterEmail">
    </div>
  </div>
</form> 
```

所以问题：

那么问题其实很简单。函数内

homePost = 函数 (req, res, personProvider)

我希望能够获得“电子邮件”表单字段的值

我试过 req.param('email'), req.body.email 我试过标准 express.bodyParser() 和 connect （有人在另一个答案中提到）一个 require('connect').bodyParser() ，但是我得到的只是未定义的。

另外，如果我尝试使用 console.log(req.body) 我得到未定义

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:36:10.227

您需要`name`为电子邮件输入提供一个属性。这`name`是提交表单时发送的内容：

```
<input type="text" id="email" name="email" class="email"> 
```

# spring - Jboss 7 - Spring - 使用 Jboss TransactionManager

> ID：13910994
> 
> 赞同：0
> 
> 时间：2012-12-17T08:56:06.030
> 
> 标签：spring, hibernate, jboss

使用：Jboss 7.1.1、Hibernate 3.6.9、Spring 3.0.1。

我尝试从 Spring Transaction Manager 切换：

```
 <bean id="transactionManager"  
              class="org.springframework.orm.jpa.JpaTransactionManager">
         <property name="entityManagerFactory" ref="entityManagerFactory" />
         <property name="dataSource" ref="dataSource" />
    </bean> 
```

对 Jboss 事务管理器：

```
 <!-- search for transaction managers -->
 <tx:jta-transaction-manager/> 
```

使用**org.springframework.orm.jpa.JpaTransactionManager**一切正常，但如果我删除“transactionManager”bean并添加“”，我会收到以下错误：

```
javax.persistence.TransactionRequiredException: no transaction is in progress 
```

我在服务器日志中发现以下内容：

```
08:40:58,382 INFO  [org.hibernate.transaction.TransactionFactoryFactory] (MSC service 
            thread 1-1) Using default transaction strategy (direct JDBC transactions)
08:40:58,383 INFO  [org.hibernate.transaction.TransactionManagerLookupFactory] (MSC 
            service thread 1-1) No TransactionManagerLookup configured (in JTA 
            environment, use of read-write or transactional second-level cache is not 
            recommended) 
```

那是什么意思？我的应用程序现在是否使用**java:jboss/TransactionManager**？我必须在 Jboss 上配置一些东西吗？

applicationContext.xml 片段：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="xxx" />
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceXmlLocation" value="classpath*:META-  
             INF/persistence.xml" />
    <property name="jpaVendorAdapter">
        <bean          
             class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="databasePlatform" 
             value="org.hibernate.dialect.SQLServerDialect" />
            <property name="showSql" value="false" />
            <property name="generateDdl" value="false" />
        </bean>
    </property>
</bean>

<tx:jta-transaction-manager/>

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"> 
    <property name="jndiName" value="${database.jndi.path}" /> 
```

persistence.xml 片段：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"      
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         version="2.0"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
         http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="xxx" transaction-type="RESOURCE_LOCAL">
  <!-- a lot of <class>com.MyClass</class> -->
   <properties>
        <property name="jboss.as.jpa.managed" value="false"/>
        <property name="hibernate.dialect" 
        value="org.hibernate.spatial.dialect.sqlserver.SqlServer2008SpatialDialect"/>
    </properties>
</persistence-unit> 
```

persitence.xml 中的“RESOURCE_LOCAL”可能是错误的？

域.xml：

```
 <datasource jta="true" jndi-name="java:jboss/datasources/myName" pool-name="myName" use-ccm="true">
                    <connection-url>jdbc:sqlserver://10.100.0.91:1433;databaseName=db;user=myUser;password=myPassword</connection-url>
                    <driver-class>com.microsoft.sqlserver.jdbc.SQLServerDriver</driver-class>
                    <driver>mssql</driver>
                    <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                    <pool>
                        <min-pool-size>10</min-pool-size>
                        <max-pool-size>20</max-pool-size>
                        <prefill>true</prefill>
                    </pool>
                    <security>
                        <user-name>myName</user-name>
                        <password>myPassword</password>
                    </security>
                    <validation>
                        <validate-on-match>false</validate-on-match>
                        <background-validation>false</background-validation>
                    </validation>
                    <statement>
                        <share-prepared-statements>false</share-prepared-statements>
                    </statement>
                </datasource> 
```

--EDIT-- 现在我改变了我的applicationContext.xml 和persistence.xml！

applicationContext.xml 片段：

```
 <jee:jndi-lookup id="my_unit" jndi-name="java:jboss/my_unit" />

<tx:jta-transaction-manager/>

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"> 
    <property name="jndiName" value="${database.jndi.path}" />
</bean> 
```

persistence.xml 片段：

```
?xml version="1.0" encoding="UTF-8" standalone="no"?> 
```

http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

```
 <jta-data-source>java:jboss/datasources/wtb</jta-data-source>

    <properties>
        <property name="hibernate.transaction.manager_lookup_class"
            value="org.hibernate.transaction.JBossTransactionManagerLookup" />

        <property name="hibernate.dialect"
            value="org.hibernate.spatial.dialect.sqlserver.SqlServer2008SpatialDialect" />
    </properties>

</persistence-unit> 
```

现在我在部署时遇到以下异常：

```
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: my_unit] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    ... 3 more
Caused by: org.hibernate.HibernateException: Dialect class not found: org.hibernate.spatial.dialect.sqlserver.SqlServer2008SpatialDialect
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:76)
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:64)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:176)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)
    ... 9 more
Caused by: org.hibernate.service.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.spatial.dialect.sqlserver.SqlServer2008SpatialDialect]
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:141)
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:73)
    ... 20 more
Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.spatial.dialect.sqlserver.SqlServer2008SpatialDialect
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$1.findClass(ClassLoaderServiceImpl.java:99)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) [rt.jar:1.6.0_32]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) [rt.jar:1.6.0_32]
    at    
 org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
    ... 21 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T05:28:07.423

你在你的`applicationContext`：

```
<tx:annotation-driven /> 
```

在你的方法中：

```
@Transaction
public void store(Message message){...} 
```

# java - 在sql中查找上个月数据的最后一天

> ID：13910998
> 
> 赞同：0
> 
> 时间：2012-12-17T08:56:18.447
> 
> 标签：java, mysql

```
String sql= "select amount,\n"+ "Temperature,\n"+ "Density\n"+
    "from sheet\n"+ "where Code=? and product=? and and month(date)=? && year(date)=? ";

PreparedStatement stmt=DBConnectionDATABASE.prepareStatement(sql);

try {
    stmt.setString(1, get.Code());
    stmt.setString(2, get.Product());
    stmt.setInt(3, get.month());
    stmt.setInt(4, get.Year()); 
```

如何使用数据找到上个月的最后一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:05:12.177

1.  比较日期与更少：`where ... date<?`
2.  将参数设置为下个月的月初，可以根据得到的月份和年份来计算，见[Calendar](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)
3.  按日期降序对查询进行排序：`where ... order by date desc`
4.  如果您真的只想要最后一个条目而不是限制查询：`where ... order by ... limit 1`

整个查询可能如下所示：

```
select amount, Temperature, Density from sheet where Code=? and product=? and date < ? order by date desc limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:12:14.627

String sql= "select amount,\n"+ "Temperature,\n"+ "Density\n"+ "from sheet\n"+ "where Code=? and product=? and day(date)=? and month( date)=? && year(date) =?" 并设置参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:12:55.573

获取上个月的最后一天

```
 SELECT DATE_SUB( CURDATE( ) , INTERVAL DAYOFMONTH( CURDATE( ) ) 
DAY ) AS  'last_date'
FROM dual 
```

然后 last_date 作为您的查询字符串日期参数

String sql= "select amount,\n"+ "Temperature,\n"+ "Density\n"+ "from sheet\n"+ "where Code=? and product=? and date=?";

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:13:54.967

整数年 = 2012；整数月 = 1；整数天 = 0；cal.set（年、月、日）；
日期日期 = cal.getTime();

将此日期设置为您的查询，这将给出 2012 年 1 月 31 日

如果你给month = 2，它将给出2012年2月29日，依此类推

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T09:23:48.817

使用这个查询

```
select max(date) from sheet where date between ? and ? 
```

这将返回日期范围之间的最大日期

然后

```
select * from sheet where date=(select max(date) from sheet where date between ? and ?); 
```

我很清楚使用聚合函数是不道德的，`group by`但在这种情况下它是有效的。