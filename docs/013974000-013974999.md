# StackOverflow 问答 13974000-13974999

# mysql - 如何处理 MySQL 排名列中的平局

> ID：13974000
> 
> 赞同：2
> 
> 时间：2012-12-20T14:11:10.790
> 
> 标签：mysql, sql-update

我想根据总分列对我的条目进行排名，但如果分数相同，我需要有联系。下面的查询成功排名，但即使出现平局，排名也会上升。

这是我当前的查询：

```
SET @r=0; UPDATE table SET rank= @r:= (@r+1) WHERE `complete` = 1 ORDER BY score DESC; 
```

我一直在阅读大量帖子，但没有在 UPDATE 中找到这样做的解释。

```
+----+-----------+-------------+-------------+
| id | lName     | score       | rank        |
+----+-----------+-------------+-------------+
|  1 | Rosebrock |          50 |           5 |
|  2 | Kolley    |          58 |           3 |
|  3 | Bartley   |          11 |           6 |
|  4 | Bell      |          58 |           4 |
|  5 | Daugherty |          63 |           2 |
| 85 | Harp      |          78 |           1 |
+----+-----------+-------------+-------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:51:20.773

```
create table scores (
  id INT NOT NULL AUTO_INCREMENT,
  score INT NOT NULL,
  rank INT NOT NULL DEFAULT 0,
  PRIMARY KEY (id)
) ENGINE=InnoDB;

INSERT INTO scores (score) VALUES (1), (20), (10), (25), (10), (20);

SET @rank=0, @score=-100;

UPDATE scores 
SET rank=IF(@score=(@score:=score), @rank, @rank:=@rank+1)
ORDER BY score; 
```

同样在这里：[http ://sqlfiddle.com/#!2/90c3b/2/0](http://sqlfiddle.com/#!2/90c3b/2/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:49:32.107

有关在 MySQL 中实现密集排名的一些想法，请参阅此问题/答案：

[MySQL 相当于 ORACLES rank()](https://stackoverflow.com/questions/1320173/mysql-equivalent-of-oracles-rank)

# c - 使用双指针的二维数组实现

> ID：13974001
> 
> 赞同：8
> 
> 时间：2012-12-20T14:11:11.277
> 
> 标签：c, multidimensional-array, double-pointer

请考虑以下代码：

```
#include <stdio.h>
#include <stdlib.h>

#define NUM_ARRAYS     4
#define NUM_ELEMENTS   4
#define INVALID_VAL   -1

int main()
{
   int index            = INVALID_VAL;
   int array_index      = INVALID_VAL;
   int **ptr            = NULL;

   ptr = malloc(sizeof(int*)*NUM_ARRAYS);

   if (!ptr)
   {
      printf ("\nMemory Allocation Failure !\n\n");
      exit (EXIT_FAILURE);
   }

   for (index=0; index<NUM_ARRAYS; index++)
   {
      *(ptr+index) = malloc(sizeof(int)*NUM_ELEMENTS); 

      if (!*(ptr+index))
      {
         printf ("\nMemory Allocation Failure !\n");
         exit (EXIT_FAILURE);
      }
   }

   /* Fill Elements Into This 2-D Array */
   for (index=0; index<NUM_ARRAYS; index++)
   {
      for (array_index = 0; array_index<NUM_ELEMENTS; array_index++)
      {
         *(*(ptr+index)+array_index) = (array_index+1)*(index+1);
      }
   }

   /* Print Array Elements */
   for (index = 0; index<NUM_ARRAYS; index++)
   {
      printf ("\nArray %d Elements:\n", index);
      for (array_index = 0; array_index<NUM_ELEMENTS; array_index++)
      {
         printf (" %d ", *(*(ptr+index)+array_index));
      }
      printf ("\n\n");
   }

   return 0;
} 
```

我的代码没有问题。它工作正常。

```
Output:

Array 0 Elements:
 1  2  3  4 

Array 1 Elements:
 2  4  6  8 

Array 2 Elements:
 3  6  9  12 

Array 3 Elements:
 4  8  12  16 
```

我有一个关于指针算术的问题：

`*(ptr+0)`= 指向 COMPLETE BLOCK（第一个数组）
`*(ptr+1)`的指针 = 指向 COMPLETE BLOCK（第二个数组）的指针。

但什么是：`(*ptr+1)`？

GDB 输出：

```
(gdb) p *(*ptr+1)
$1 = 2
(gdb) p *(*ptr+2)
$2 = 3
(gdb) p *(*ptr+3)
$3 = 4
(gdb) p *(*ptr+4)
$4 = 0 
```

我对此感到困惑。请给我一些解释来解决这个疑问。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T14:45:51.163

```
 (*ptr)      (*ptr+1)     (*ptr+2)
                                   |            |            |
             __________      ______v____________v____________v____________
  ptr------>|   *ptr   |--->|  *(*ptr)   |  *(*ptr+1)  |*(*ptr+2) |       |
            |__________|    |____________|_____________|__________|_______|
 (ptr+1)--->| *(ptr+1) |     ____________ _____________ __________________
            |__________|--->|*(*(ptr+1)) |*(*(ptr+1)+1)|          |       |
            |          |    |____________|_____________|__________|_______|
            |__________|          ^             ^
                                  |             |
                              *(ptr+1)     *(ptr+1)+1 
```

具有双指针的二维数组，这意味着您有一个主数组，主数组的元素是指向子数组的指针（或地址）。如上图所示

所以如果你定义了一个双指针作为这个二维数组的指针，让我们说`int **ptr`

`ptr`指向包含指向子数组的指针的主数组也是如此。`ptr`指向主数组，这意味着`ptr`指向主数组的第一个元素，因此`ptr + 1`指向主数组的第二个元素。

`*ptr`这意味着`ptr`指向的第一个元素的内容。它是一个指向子数组的指针。指向第一个子数组的指针也是如此`*ptr`（子数组是 的数组`int`）。所以`*ptr`指向第一个子数组中的第一个元素。`*ptr + 1`指向第一个子数组中第二个元素的指针也是如此

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-20T14:18:35.050

`*(ptr+i)`等于`ptr[i]` 并且 `*(ptr+1)`是`ptr[1]`。

您可以将二维数组视为数组数组。

*   `ptr`指向完整的二维数组，所以`ptr+1`指向下一个二维数组。

* * *

下图中 `ptr`是二维的，列数是`3`

Kerrek SB先生制作的原图，[在这里](https://stackoverflow.com/questions/12674094/array-to-pointer-decay-and-passing-multidimensional-arrays-to-functions?answertab=oldest#tab-top)，你也应该检查！

```
+===============================+==============================+====
|+---------+----------+--------+|+----------+---------+--------+|
||ptr[0,0] | ptr[0,1] | ptr[0,2]|||ptr[1,0] |ptr[1,1] | ptr[1,2]|| ...
|+---------+----------+--------+++----------+---------+--------++ ...
|            ptr[0]             |           ptr[1]              |
+===============================+===============================+====
   ptr 
```

`*(*ptr+1) = *( ptr[0] + 1 ) = ptr[0][1]`

了解以下内容：

`ptr`点完成二维。

`*ptr = *(ptr + 0) = ptr[0]`那是第一行。

~~`*ptr + 1 = ptr[1]`表示第二行~~

`*(*ptr+1) = *(*(ptr + 0) + 1 ) = *(ptr[0] + 1) = ptr[0][1]`

```
Array 0 Elements:
1  2  3  4 
```

和 GDB 输出：

```
(gdb) p *(*ptr+1)
$1 = 2 
```

这是正确的`2`，可以使用`ptr[0][1]`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-17T16:22:00.973

使用指针创建二维数组、赋值和访问数组元素的最简单方法。

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
int i,j;
int row,col;
printf("Enter the values for row and col:\n");
scanf("%d%d",&row,&col);
int **arr=(int**)malloc(row*(sizeof(int*)));
for(i=0;i<row;i++)
{
    *(arr+i)=(int*)malloc(sizeof(int)*col);
            //You can use this also. Meaning of both is same.
            //arr[i]=(int*)malloc(sizeof(int)*col);
}
for(i=0;i<row;i++)
for(j=0;j<col;j++)
{
    arr[i][j]=0;
}
for(i=0;i<row;i++)
{
    for(j=0;j<col;j++)
    {
        printf("%d ",arr[i][j]);
    }
    printf("\n");
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T14:15:06.553

除非您输入错误，否则`(*ptr + 1)`相当于`*(ptr + 0) + 1`which 是指向第一个块中的第二个元素的指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-05T19:24:12.207

`*ptr + 1`是地址`ptr[0][1]`

因为，我们知道

```
ptr[0][1] == *(*(ptr+0)+1) 
```

现在把＆符号放在两边

```
&ptr[0][1] == &*(*(ptr+0)+1) 
```

你知道带星号的和号就像加号和减号一样吗？他们被取消。所以这变成

```
&ptr[0][1] == (*(ptr+0)+1) 
```

这与

```
&ptr[0][1] == *(ptr+0)+1 
```

这又是一样的

```
&ptr[0][1] == *ptr+1 
```

这是我的第一个声明。

# data-warehouse - 如何使用自然键创建事实表

> ID：13974004
> 
> 赞同：2
> 
> 时间：2012-12-20T14:11:29.467
> 
> 标签：data-warehouse, etl, fact, surrogate-key, natural-key

我们有一个包含四个维度表和一个事实表的数据仓库设计：

*   dimUser id、电子邮件、名字、姓氏
*   dimAddress id, 城市
*   dimLanguage id，语言
*   dimDate id、startDate、endDate
*   factStatistic id、dimUserId、dimAddressId、dimLanguageId、dimDate、loginCount、pageCalledCount

我们的问题是：我们要构建包括计算统计信息（取决于 userId、日期范围）和填充外键的事实表。

但是我们不知道如何，因为我们不了解如何使用自然键（根据我们阅读的文献，这似乎是我们问题的解决方案）。

我相信一个自然键是 userId，它在所有计算维度数据的 ETL 作业中都是必需的。

但是有很多困难：

*   在 ETL 作业 load() 中，我们使用 INSERT IGNORE INTO 进行批量插入以删除重复项 => 我们不知道生成的代理键
*   如果我们创建元数据（包括一组维度名称、代理键、自然键），由于重复消除，这将不起作用

问题似乎是重复消除策略。有更好的方法吗？

我们使用的是 MySQL 5.1，如果它有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T02:38:29.210

如果您的事实表正在跟踪每个用户的登录和页面调用，那么您应该有一组源表来跟踪这些事情，您将从那里加载事实表数据。我可能会以每个用户/登录日期一行的粒度构建事实表 - 如果可能的话，甚至更低以保留原子数据。

在这里，您将拥有一个具有两个维度的事实表 - 用户和日期。您也可以将地址和语言作为事实的维度保存，但这些实际上只是用户的属性。

您的维度应具有代理键，但也应具有可用的源“业务”或“自然”键 - 作为维度本身的属性，或通过您同事建议的映射表。使用映射表并没有“错误”——当有多个来源时，它确实使事情变得更容易。

如果您将业务键存储在映射表中，或者作为属性存储在维度中，那么对于要加载的每一行，实际上是针对 dim 或映射表进行简单查找（通常通过连接）以获取代理键为用户（然后从用户那里得到用户的“当前”地址/语言来坚持事实）。日期维度通常有一个以 YYYYMMDD 或其他“自然”格式存储的代理键 - 您可以从您正在加载到事实中的源记录上的日期信息生成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:49:33.087

不要强制单个查询，尝试在单独的查询中加载数据并在某些提供程序中混合数据...

# java - 带有java线程的android

> ID：13974007
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:11:45.933
> 
> 标签：java, android, multithreading

我正在尝试创建一个从 Button 开始的简单线程，但出现了问题。这是代码：

```
 b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            SendInfo si = new SendInfo();
            si.start();
            error.setText(si.getError());

        }
    }); 
```

这是线程代码：

```
package com.example.android.location;

public class SendInfo extends Thread
{
    private String error;

    public void run()
    {
        this.error = "working";
    }
    public String getError(){
        return this.error;
    }   
} 
```

由于某种原因，第一个代码块中的错误实例保持为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:16:43.417

你有一场比赛。

通话后`start()`：

1）您的代码继续并`getError`在线程运行之后返回 null 和之后。

或者

2）线程运行并完成`getError`并将返回“工作”。

在你的情况下 1) 正在发生。

更新：实际上理论上在选项 2 期间，您可能无论如何都无法将“工作”作为返回值。这是由于内存/线程可见性。同步对错误变量的访问，或者在这种情况下只是声明该字段 volatile 修复了该问题（但不是您的原始问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:15:34.997

不能保证线程在此行之后开始

`si.start();`

所以你不能只是`error`希望它按预期设置。你的帖子看起来不像。

此外，在方法上同步是明智的，以防止令人讨厌的指令重新排序。

一个整体解决这个问题的方法是在主线程上创建一个[处理程序](http://developer.android.com/reference/android/os/Handler.html)，并在你的线程完成执行后向它发送一条消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:16:07.167

您应该更好地使用 ASyncTask 而不是 Thread。

# delphi - 动态数组是否支持非零下限（为了 VarArrayCreate 兼容性）？

> ID：13974022
> 
> 赞同：4
> 
> 时间：2012-12-20T14:12:39.007
> 
> 标签：delphi, delphi-xe2, dynamic-arrays, variant

我将维护并移植到 Delphi XE2 一堆非常旧的 Delphi 代码，这些代码充满了[VarArrayCreate](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Variants.VarArrayCreate)构造，以伪造具有不为零的下限的动态数组。

使用[Variant](http://docwiki.embarcadero.com/RADStudio/XE3/en/Variant_Types)类型的缺点是：

*   比原生数组慢很多（代码做了很多复杂的财务计算，所以速度很重要）
*   类型不安全（尤其是意外使用了错误的`var...`常量，并且 Variant 系统开始进行不需要的转换或舍入时）

[如果我可以使用动态数组](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Dynamic_Arrays)，两者都可能变得没有意义。

变体数组的好处是它们可以有非零的下限。

我记得动态数组过去总是从零的下限开始。

这仍然是真的吗？换句话说：*是否可以让动态数组从不同于零的边界开始*？

作为一个特定案例的前后示例的说明（单维，但代码中充满了多维数组，除了[varDouble之外，代码还使用了](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/System_varDouble.html)[TVarData](http://docwiki.embarcadero.com/Libraries/XE3/en/System.TVarData)允许使用的各种其他`varXXX`数据类型）：

```
function CalculateVector(aSV: TStrings): Variant;
var
  I: Integer;
begin
  Result := VarArrayCreate([1,aSV.Count-1],varDouble);
  for I := 1 to aSV.Count-1 do
    Result[I] := CalculateItem(aSV, I);
end; 
```

`CalculateItem`函数`Double`返回。界限是从`1`到`aSV.Count-1`。

当前的替换是这样的，用 Result 的空间零元素来改进编译时间检查：

```
type
  TVector = array of Double;
function CalculateVector(aSV: TStrings): TVector;
var
  I: Integer;
begin
  SetLength(Result, aSV.Count); // lower bound is zero, we start at 1 so we ignore the zeroth element
  for I := 1 to aSV.Count-1 do
    Result[I] := CalculateItem(aSV, I);
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:14:06.523

动态数组的下限总是`0`. 因此，对于所有动态数组都`low(A)`等于。`0`这甚至适用于空动态数组，即`nil`.

从[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Dynamic_Arrays)中：

> 动态数组总是整数索引，总是从 0 开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T21:59:15.000

已经回答了您的直接问题，我还为您提供了一个通用类的开始，您可以在移植中使用它。

```
type
  TSpecifiedBoundsArray<T> = class
  private
    FValues: TArray<T>;
    FLow: Integer;
    function GetHigh: Integer;
    procedure SetHigh(Value: Integer);
    function GetLength: Integer;
    procedure SetLength(Value: Integer);
    function GetItem(Index: Integer): T;
    procedure SetItem(Index: Integer; const Value: T);
  public
    property Low: Integer read FLow write FLow;
    property High: Integer read GetHigh write SetHigh;
    property Length: Integer read GetLength write SetLength;
    property Items[Index: Integer]: T read GetItem write SetItem; default;
  end;

{ TSpecifiedBoundsArray<T> }

function TSpecifiedBoundsArray<T>.GetHigh: Integer;
begin
  Result := FLow+System.High(FValues);
end;

procedure TSpecifiedBoundsArray<T>.SetHigh(Value: Integer);
begin
  SetLength(FValues, 1+Value-FLow);
end;

function TSpecifiedBoundsArray<T>.GetLength: Integer;
begin
  Result := System.Length(FValues);
end;

procedure TSpecifiedBoundsArray<T>.SetLength(Value: Integer);
begin
  System.SetLength(FValues, Value);
end;

function TSpecifiedBoundsArray<T>.GetItem(Index: Integer): T;
begin
  Result := FValues[Index-FLow];
end;

function TSpecifiedBoundsArray<T>.SetItem(Index: Integer; const Value: T);
begin
  FValues[Index-FLow] := Value;
end; 
```

我认为这是很明显的。我考虑使用 a`record`但我认为这是行不通的。这取决于值类型语义`FLow`和引用类型语义的混合`FValues`。所以，我认为在这里上课是最好的。

当您修改`Low`.

毫无疑问，你想扩展它。你会添加一个`SetBounds`，一个副本，一个副本等等。但我认为您可能会发现它很有用。它当然展示了如何制作一个看起来非常像具有非零下限的数组的对象。

# mysql - MySQL，删除旧数据，在线更改计算机时钟时间

> ID：13974024
> 
> 赞同：0
> 
> 时间：2012-12-20T14:12:49.477
> 
> 标签：mysql, maintenance, delete-row

我设计了一种从 MySQL 表中删除旧数据的机制。

表中的每一行都包括当前日期测量，我正在删除相对于当前日期较旧的记录块。

我们的产品计划部署并成为更大系统的一部分。在生产中假设计算机的时钟与其自身一致（我使用 current_date() 作为检索当前日期的函数）是否合理？

由于夏季/冬季时间的变化，我确实支持时钟的微小变化，但是，较大的变化（超过一周）可能会导致删除不同的数据而不是最旧的数据（如果时钟将被删除，即使是当前数据也可能被删除）向后移动到最低日期以下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:08:56.353

假设您有标准的保护措施，例如与时间服务器同步，时钟应该有点可靠，并锁定以防止意外更改。

但是，为了减轻任何潜在的损害，请考虑添加另一个表来记录删除记录的每个日期。

如果您的进程每周运行一次，那么它将检查此表以确保当前日期在它上次运行的一周内。这可确保您不会跳过任何几周，将潜在的“意外”损失限制在一周内。根据需要调整窗口。

如果检查失败，需要用户干预才能让事情回到正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:18:53.910

我认为这是一个坏主意，您不应该依赖用户的系统时间，例如，如果他们更改它会怎样。

一个更好的主意是将 MySQL 服务器的时间作为“中央数据源”，如始终基于`now()`MySQL 服务器上的当前时间 () 存储，然后也基于该时间进行修剪。

这意味着即使服务器的时间设置错误，所有查询都会偏移一个偏移量，代表相同的时间段，而不是不匹配。

# c# - RadGrid 覆盖 EntityDataSource 排序

> ID：13974026
> 
> 赞同：1
> 
> 时间：2012-12-20T14:12:54.843
> 
> 标签：c#, asp.net, sorting, telerik, radgrid

预先：

我正在使用一个无法更改的静态数据库，因为它被外部软件使用。

如果它不是“1”或“6”，我将数据库值从 StatusTypeId 映射到这些值之间的值。背景：支持票务系统

客户应该只看到 StatusTypeIds 1、3 和 6。1（打开）、3（工作中）、6（关闭）

所以我手动更改了网格值，现在正在进行正确的排序。

在 EntityDataSource 上执行的初始排序表达式工作正常，直到使用网格的排序功能。然后，无论我手动截取，排序都做错了。

EntityDataSource 的初始排序：

```
<asp:EntityDataSource ID="DefectsDataSource" runat="server" 
ConnectionString="name=*" DefaultContainerName="*" 
EnableFlattening="False" EntitySetName="Defects" Select="it.[DefectId], it.[Name], it.[StatusTypeId]"  
OrderBy="(CASE WHEN it.[StatusTypeId] <> 1 AND it.[StatusTypeId] <> 6 THEN 2 ELSE it.[StatusTypeId] END)"/> 
```

是否可以从 Grid（SortCommand 事件）中获取请求的排序顺序并将 EntityDataSource 的 OrderBy 属性设置为正确排序？我试过了，但它被忽略了。

SortCommand 事件的实现：

```
 protected void SortCommand(object sender, GridSortCommandEventArgs e)
    {
        if (e.SortExpression == "StatusTypeId")
        {
            string sortExpression = (e.NewSortOrder == GridSortOrder.Ascending) ? "ASC" : e.NewSortOrder == GridSortOrder.Descending ? "DESC" : "";
            this.DefectsDataSource.OrderBy = string.Format("(CASE WHEN it.[StatusTypeId] <> 1 AND it.[StatusTypeId] <> 6 THEN 2 ELSE it.[StatusTypeId] END) {0}", sortExpression);
            this.RadGrid.Rebind();
        }
    } 
```

我希望有足够的信息来帮助我。如果我错过了什么，请问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T07:42:16.150

我已经解决了这个问题，通过使用 ObjectContext.Entity.ToList()[.OrderBy()] 手动设置来自 RadGrid 的 DataSource 并对反射和属性映射进行手动排序：

```
public static Dictionary<string, PropertyInfo> ColumnMapper = new Dictionary<string, PropertyInfo>
                                                                   {
                                                                       {"StatusTypeId", typeof(Defects).GetProperty("CustomerStatus*") },
                                                                       {"DefectId", typeof(Defects).GetProperty("DefectId") },
                                                                       {"Name", typeof(Defects).GetProperty("Name") }
                                                                   }; 

* Thats the Custom Column from above. 
```

将 MasterTemplateView.AllowCustomSorting 设置为 True 并使用以下代码对 Page_Load() 和 SortCommand 进行排序：

```
protected new void Page_Load(object sender, EventArgs e)
{
   var exp = this.RadGrid.MasterTableView.SortExpressions; 
   if (exp.Count == 0)
   {
      this.SortGrid(new GridSortExpression { FieldName = "DefectId", SortOrder = GridSortOrder.Ascending});
   }
   else
   {
      this.SortGrid(exp[0]);
   }
}

protected void SortCommand(object sender, GridSortCommandEventArgs e)
{
    this.SortGrid(new GridSortExpression { FieldName = e.SortExpression, SortOrder = e.NewSortOrder });
}

private void SortGrid(GridSortExpression e)
{
    IOrderedEnumerable<Defects> bindingList = null;
    var defects = DataAccessLayer.GetLoadedSet<Defects>().ToList();
    if (Defects.ColumnMapper.ContainsKey(e.FieldName))
    {
        var prop = Defects.ColumnMapper[e.FieldName];
        switch (e.SortOrder)
        {
        case GridSortOrder.Ascending:
            bindingList = defects.OrderBy(src => prop.GetValue(src, null));
            break;
        case GridSortOrder.Descending:
            bindingList = defects.OrderByDescending(src => prop.GetValue(src, null));
            break;
        case GridSortOrder.None:
            bindingList = defects.OrderBy(src => src.DefectId);
            break;
        }
    }
    this.RadGrid.DataSource = bindingList;
} 
```

# spring-mvc - 如何避免初始化 Spring 默认的 RequestMappingHandlerMapping？

> ID：13974027
> 
> 赞同：3
> 
> 时间：2012-12-20T14:12:53.923
> 
> 标签：spring-mvc

为了实现我们的请求映射版本控制解决方案，我将自己的解决方案实现`RequestMappingHandlerMapping`为它的子类。我覆盖了`registerHandlerMethod()`和`lookupHandlerMethod()`。关键概念是一个请求映射可以出现多次，但各种实现存储在不同的 Java 包中。我的新类根据 servlet 路径的第一个路径元素（即版本号）从正确的包中选择所需的版本。在寻找正确的请求映射处理程序之前删除该版本。

这就是我将它编织到 Spring 中的方式：

```
import javax.inject.Inject;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;

@Configuration
public class VersioningWebMvcConfigurationSupport extends WebMvcConfigurationSupport {

  private VersioningRequestMappingHandlerMapping requestMappingHandlerMapping;

  @Override
  @Bean
  public RequestMappingHandlerMapping requestMappingHandlerMapping() {
    requestMappingHandlerMapping.setOrder(0);
    requestMappingHandlerMapping.setInterceptors(getInterceptors());
    return requestMappingHandlerMapping;
  }

  @Inject
  public void setRequestMappingHandlerMapping(VersioningRequestMappingHandlerMapping requestMappingHandlerMapping) {
    this.requestMappingHandlerMapping = requestMappingHandlerMapping;
  }

} 
```

恕我直言，我的 applicationContext.xml 的重要部分：

```
 <context:annotation-config />
  <context:mbean-export />
  <context:component-scan base-package="..." />
  <mvc:annotation-driven /> 
```

*如果你想让我在那里寻找其他线路，请告诉我。*

我的问题是我的代码运行正确，重复项处理得当。但是，原始的 (?)`RequestMappingHandlerMapping`仍然被初始化。由于重复的请求映射，该失败。

我怎样才能避免这种情况？在我看来，我的网络应用程序在没有默认`RequestMappingHandlerMapping`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:17:52.907

不太确定，但标签`<mvc:annotation-driven />`可能正在`RequestMappingHandlerMapping`您的 webapp 中注册。

Spring MVC 文档提到，如果您使用 MVC 命名空间，则默认启用 RequestMappingHandlerMapping：

> Spring 3.1 为 @RequestMapping 方法引入了一组新的支持类，分别称为 RequestMappingHandlerMapping 和 RequestMappingHandlerAdapter。建议使用它们，甚至需要它们来利用 Spring MVC 3.1 中的新功能并继续前进。默认情况下，新的支持类从 MVC 命名空间启用，并使用 MVC Java 配置，但如果两者都不使用，则必须显式配置。

来源：[文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-methods)

所以我怀疑你必须去掉那个`<mvc:annotation-driven />`标签才能禁用`RequestMappingHandlerMapping`.

# soap - 当服务器不可用时 gsoap 客户端调用阻塞

> ID：13974028
> 
> 赞同：4
> 
> 时间：2012-12-20T14:12:59.820
> 
> 标签：soap, gsoap

我正在寻找一种方法来检测 gsoap Web 服务是否可用。不幸的是，当服务离线时，客户端 gsoap 调用阻塞很长时间。将soap.recv_timeout 和soap.send_timeout 设置为零无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-09T13:29:03.473

这有点晚了，但我终于找到了（我认为是）通过源代码偷偷摸摸的更好的答案（为什么他们不记录这个，我不知道）：

寻找“soap.connect_timeout”。当我将此设置为 3 时，当 Web 服务不可用时，它会按预期在 3 秒后超时。

在“服务不可用”的情况下，上面的 recv_timeout 和 send_timeout 对我不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:41:56.253

我很确定通过将soap.recv_timeout 和soap.send_timeout 设置为0 意味着没有超时。尝试将此变量设置为 1（1 表示 1 秒）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T15:30:35.767

我来到这里寻找相同问题的解决方案，并认识到将 recv_timeout 设置为 0 的错误部分，但我已将其设置为 20 并且仍然没有超时，所以我按照第二个帖子并使用了 connect_timeout，它确实像我一样工作故意的。

# selenium - 使用 selenium webdriver C# 在搜索结果页面中存在链接/文本

> ID：13974036
> 
> 赞同：1
> 
> 时间：2012-12-20T14:13:17.183
> 
> 标签：selenium, selenium-webdriver

我正在使用 Selenium Webdriver 使用 C# 进行自动化测试。

我将尝试通过一个例子来解释我的问题。

我在一些搜索网站（例如 www.google.com）中搜索特定术语并获得几页结果。

现在，我试图通过遍历所有搜索结果页面来定位搜索结果中特定链接/文本的存在。

希望有人能帮助我度过这个难关。

提前致谢。

编辑

下面是我的一些代码：

```
static void Main(string[] args) { 
     IWebDriver d1 = new FirefoxDriver(); 
     d1.Navigate().GoToUrl("cocodle.com/";); 
     IWebElement e1 = d1.FindElement(By.Name("q")); 
     e1.SendKeys("Selenium"); 
     IWebElement e2 = d1.FindElement(By.Name("sa")); e2.Submit(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:57:06.357

您可以尝试查找要迭代的元素列表。

`ReadOnlyCollection<IwebElement> elements = driver.FindElements(By.tagname("a")); foreach (IWebElement element in elements) { if (element.Text.equals("Searched text")); // Perform Acrion on }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:56:08.477

我不确定这种语法是否正确，但这又如何呢？

```
IWebElement e3 = d1.FindElement(By.Link("4")); e3.Click(); 
```

再次不确定语法，但我希望你明白这一点。这是一种非常原始的方法，只有在页面上有一个带有文本“4”的链接时才有效。但由于这是一个谷歌搜索结果，它不容易自动化。

# excel - Excel 动态范围变化（没有逻辑）

> ID：13974046
> 
> 赞同：0
> 
> 时间：2012-12-20T14:14:02.623
> 
> 标签：excel, vba, excel-2013

一个令人困惑的。我正在使用动态范围

```
=OFFSET('EA OPs'!A4,0,0,COUNTA('EA OPs'!$A:$A)-1,96) 
```

我已将其分配给`rOps`NAME MANAGER。然后，我尝试将数据透视表源更改为`rOps`. 单击进入随机单元格。在 NAME MANAGER 中单击返回，它已更改为：

```
=OFFSET('EA OPs'!G3,0,0,COUNTA('EA OPs'!$A:$A)-1,96) 
```

然后

```
=OFFSET('EA OPs'!G24,0,0,COUNTA('EA OPs'!$A:$A)-1,96) 
```

看似随意。虽然它似乎靠近我点击的单元格？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:31:35.180

您需要`A4`用美元符号锚定并使其成为绝对参考。否则，它与任何处于活动状态的单元格相关：

```
=OFFSET('EA OPs'!$A$4,0,0,COUNTA('EA OPs'!$A:$A)-1,96) 
```

命名范围总是以这种方式运行，这很有用。例如，当 A2 处于活动状态时，您可以创建一个名为“CellAbove”的范围并将其设置为“=A1”。然后，您可以在任何单元格的公式中使用它，例如，`=CellAbove/2'，结果将是上一行单元格的值除以 2。

# vb.net - 首次调用 SetupDiGetDeviceInterfaceDetail 将始终失败并显示 ERROR_INVALID_USER_BUFFER

> ID：13974047
> 
> 赞同：0
> 
> 时间：2012-12-20T14:14:02.590
> 
> 标签：vb.net

我对此有点疯狂，我已经花了几个小时来找到问题，所以我想我需要一些 WinAPI 大师:) 我使用 VB .NET，所以请善待 :)

尝试与某个 USB 设备通信并在 SetupDiGetDeviceInterfaceDetail() 步骤中，对函数的（第一次）调用将失败并显示 ERROR_INVALID_USER_BUFFER。第二个电话现在没有意义了:)问题是为什么？DeviceInfoTable 句柄是正确的，因为我在其他几个函数中成功使用了它，并且在每次调用后我都测试了 Err.LastDllError。

我认为 InterfaceDataStructure 也是正确的，因为否则 SetupDiEnumDeviceInterfaces() 将失败。我怀疑 dll 导入或结构的声明不正确。

```
 If Not SetupDiGetDeviceInterfaceDetail(DeviceInfoTable, InterfaceDataStructure, Nothing, 0, StructureSize, Nothing) Then

        ErrorStatus = Err.LastDllError ' <-- always 0x6F8, ERROR_INVALID_USER_BUFFER

    End If 
```

以下是声明

```
 Dim DeviceInfoTable As IntPtr = INVALID_HANDLE_VALUE
        Dim InterfaceDataStructure As SP_DEVICE_INTERFACE_DATA = New SP_DEVICE_INTERFACE_DATA
        Dim InterfaceIndex As Integer = 0
        Dim ErrorStatus As Integer = 0

        Dim DevInfoData As SP_DEVINFO_DATA = New SP_DEVINFO_DATA

        Dim dwRegType As Integer
        Dim dwRegSize As Integer

        Dim DetailedInterfaceDataStructure As SP_DEVICE_INTERFACE_DETAIL_DATA = New SP_DEVICE_INTERFACE_DETAIL_DATA
        Dim StructureSize As Integer = 0

    'Structures declarations
    <StructLayout(LayoutKind.Sequential, Pack:=1)> _
   Public Structure SP_DEVINFO_DATA
        Public cbSize As UInteger
        Public InterfaceClassGUID As Guid
        Public DevInst As UInteger
        Public Reserved As IntPtr
    End Structure

    <StructLayout(LayoutKind.Sequential, Pack:=1)> _
    Public Structure SP_DEVICE_INTERFACE_DATA
        Public cbSize As UInteger
        Public InterfaceClassGuid As Guid
        Public Flags As UInteger
        Public Reserved As IntPtr
    End Structure

    <StructLayout(LayoutKind.Sequential, Pack:=1)> _
    Public Structure SP_DEVICE_INTERFACE_DETAIL_DATA
        Public cbSize As UInteger
        <MarshalAs(UnmanagedType.ByValTStr, SizeConst:=256)> Public DevicePath As String
    End Structure

    <DllImport("setupapi.dll",
    CharSet:=CharSet.Auto,
    SetLastError:=True)> _
    Public Shared Function SetupDiGetDeviceInterfaceDetail(ByVal hDevInfo As IntPtr,
                                                           ByRef deviceInterfaceData As SP_DEVICE_INTERFACE_DATA,
                                                           ByRef deviceInterfaceDetailData As SP_DEVICE_INTERFACE_DETAIL_DATA,
                                                           ByVal deviceInterfaceDetailDataSize As Int32,
                                                           ByRef RequiredSize As Int32,
                                                           ByRef deviceInfo As SP_DEVINFO_DATA) As Boolean 
```

首先十分感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:56:30.673

```
If Not SetupDiGetDeviceInterfaceDetail(..., Nothing, 0, StructureSize, Nothing) 
```

您在这里为基本的 VB.NET 使用而苦苦挣扎，关键字*Nothing*并不意味着您希望它做的事情。api 函数想要你做的是传递一个空指针。IntPtr. 零。那*可能*是Nothing，但在这种情况下不是。您将参数类型声明为结构。它们是**值类型**。在值类型的情况下，没有什么别的意思，它意味着“默认值”。所以你实际上在这里传递了一个指向结构的指针，一个零初始化的结构。该功能对此不满意并告诉您。

当您使用这些 pinvoke 声明时，您不能传递 IntPtr.Zero。您可以作弊并声明函数的*重载*，它使用不同的参数类型。像这样：

```
<DllImport("setupapi.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
Public Shared Function SetupDiGetDeviceInterfaceDetail(
   ByVal hDevInfo As IntPtr,
   ByRef deviceInterfaceData As SP_DEVICE_INTERFACE_DATA,
   ByVal mustPassIntPtrZero As IntPtr,
   ByVal mustPassZero As Int32,
   ByRef RequiredSize As Int32,
   ByVal mustPassIntPtrZero2 As IntPtr) As Boolean 
```

现在您可以第一次调用该函数：

```
If Not SetupDiGetDeviceInterfaceDetail(..., IntPtr.Zero, 0, StructureSize, IntPtr.Zero) 
```

您应该使用返回的RequiredSize 通过 Marshal.AllocHGlobal() 分配内存。将返回的指针作为 deviceInterfaceDetailData 参数传递。现在必须将其声明为 ByVal IntPtr。并在调用后使用 Marshal.PtrToStructure() 将其转换为结构。是的，Pack 在 64 位操作系统上是一个问题。

通过使用 CharSet:=CharSet.Auto 声明结构来修复字符串问题，这样您将获得 Unicode 转换而不是 Ansi 转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:01:18.853

现在我想通了，实际上工作了一半 :) 也许有人可以照亮我。

至少在 VB .NET 2010 上，SetupDiGetDeviceInterfaceDetail() 不会将 NULL（也就是什么都没有）作为参数，所以我必须首先传递一些虚拟的东西：

```
 DetailedInterfaceDataStructure.cbSize = 6

    SetupDiGetDeviceInterfaceDetail(DeviceInfoTable, InterfaceDataStructure, DetailedInterfaceDataStructure, 1000, StructureSize, DevInfoData) 
```

cbSize 必须为 <> 0，在 32 位系统上必须为 6（4 用于 DWORD，2 用于以空字符结尾的宽字符串）。1000 它只是一个大数字，因此 SetupDiGetDeviceInterfaceDetail() 甚至不会返回 ERROR_INSUFFICIENT_BUFFER

现在第二遍应该得到真正的东西：

```
 SetupDiGetDeviceInterfaceDetail(DeviceInfoTable, InterfaceDataStructure, DetailedInterfaceDataStructure, StructureSize, StructureSize, Nothing) 
```

它不会返回任何系统错误，但路径只是一个反斜杠字符“\”，这不好......它应该是一个有效的 USB 路径

“\\?\usb#vid_01E5&pid_00A2#5&1d4952dc&0&2#{18d0A210-85D2-........”

任何人都可以帮助我吗？...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:06:34.237

是的，我在 VB 上苦苦挣扎，因为我来自纯 C99 和 MCU 的汇编程序 :) 事实上，经过几个小时的错误，我在 C# 中得到了一些片段，它就像一个魅力，但我必须知道为什么不工作VB :) 我终于解决了，部分喜欢你的建议

我用另一个重载了 SetupDiGetDeviceInterfaceDetail()，只是为了接受一个指向某个非托管缓冲区的 ptr：

```
<DllImport("setupapi.dll",
 CharSet:=CharSet.Auto,
 SetLastError:=True)> _
Public Shared Function SetupDiGetDeviceInterfaceDetail(ByVal hDevInfo As IntPtr,
                                                       ByRef deviceInterfaceData As SP_DEVICE_INTERFACE_DATA,
                                                       ByVal deviceInterfaceDetailData As IntPtr,
                                                       ByVal deviceInterfaceDetailDataSize As Int32,
                                                       ByRef RequiredSize As Int32,
                                                       ByRef deviceInfo As SP_DEVINFO_DATA) As Boolean
End Function

Now the problem was I used ByRef deviceInterfaceDetailData As IntPtr instead of ByVal deviceInterfaceDetailData As IntPtr, was my mistake from VB's quite simple perspective.

Indeed, now I can pass some unmanaged buffer at 2'nd call of SetupDiGetDeviceInterfaceDetail()

    Dim PUnmanagedDetailedInterfaceDataStructure As IntPtr = IntPtr.Zero

    PUnmanagedDetailedInterfaceDataStructure = Marshal.AllocHGlobal(StructureSize) 
    DetailedInterfaceDataStructure.cbSize = 6 ' cbSize = 4 bytes for DWORD + 2 bytes for Unicode null terminator
    Marshal.StructureToPtr(DetailedInterfaceDataStructure, PUnmanagedDetailedInterfaceDataStructure, False) ' Copy the contents of the structure, to an unmanaged memory space

    SetupDiGetDeviceInterfaceDetail(DeviceInfoTable, InterfaceDataStructure, PUnmanagedDetailedInterfaceDataStructure, StructureSize, StructureSize, DevInfoData) 
```

这终于奏效了。我期待一些挣扎的要点：）我在互联网上看到了很多类似的线程，但没有一个可以完全解决。

祝大家圣诞节快乐

# jquery - 检测插件所需的最低 jQuery 版本

> ID：13974048
> 
> 赞同：4
> 
> 时间：2012-12-20T14:14:04.243
> 
> 标签：jquery, jquery-plugins, version

假设您编写了一些 jQuery 或 jQuery 插件。有没有办法检查运行代码需要哪个（最小）版本的 jQuery？

# c# - msbuild 中的默认平台

> ID：13974051
> 
> 赞同：3
> 
> 时间：2012-12-20T14:14:09.113
> 
> 标签：c#, windows, configuration, tfs, msbuild

我的解决方案`App.sln`只指定了配置`Debug|x86`和`Release|x86`. 在我的计算机中构建此解决方案时，它可以正常工作，但是在其他开发人员的计算机中构建时，它会引发错误，指出解决方案中不存在配置`Release|x64`。问题是我在调用 msbuild 时从未设置平台。像这样：

`msbuild.exe App.sln`

计算机具有相同的配置（x86、WinXP）。

如何在系统范围内强制执行或设置平台？

**编辑 2012-12-20：** 我们不可能更改所有项目以允许两个平台甚至任何 CPU。我们只发布 x86 二进制文件（由于与外部库的兼容性）。问题基本上是是否有设置平台的全局变量。

**编辑 2012-12-21：** Vlad L 回答了使用所需平台强制构建的正确方法。但万一其他人发现了同样的问题，我在 TFS 中创建了一个新的工作区，它解决了这个问题。进一步调查后，我发现这是工作区中的缓存错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:30:06.480

1)`msbuild.exe /property:Configuration=Debug;Platform=x64 App.sln`

2) 鼠标右键解决方案-> 属性-> 配置属性-> 按钮配置管理器。为所有项目设置复选框，然后您可以一次为所有项目创建新配置或更改现有配置或目标平台（在 Visual Studio 2012 中检查）

# visual-studio-2010 - 在不同的服务器上构建控制器和测试代理将不起作用

> ID：13974053
> 
> 赞同：0
> 
> 时间：2012-12-20T14:14:15.200
> 
> 标签：visual-studio-2010, automated-tests, coded-ui-tests, regression-testing

我们有一台带有构建控制器的服务器、一台带有测试代理的服务器和一台安装了 Visual Studio 2010 Ultimat 的服务器。当我们排队一个测试以在控制器上构建并在代理上运行时，
测试 (cuit) 会在控制器上构建和运行。

代理已连接到控制器，一切似乎都已连接且正常。必须有一个我们遗漏的小细节或一些错误的配置。我们尝试在控制器上添加一个新代理，并且代理上的“测试代理状态”在线并连接到控制器。放置文件夹可从所有内部具有已完成构建的服务器访问。

任何想法将不胜感激。

比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-17T14:04:13.383

添加到您的解决方案 *.testsettings 并在角色选项卡远程执行中设置并输入代理的名称。在构建定义中，在运行设置下设置 *.testsettings。

# batch-file - 如何使用批处理将单个空格键写入 txt 文件

> ID：13974058
> 
> 赞同：5
> 
> 时间：2012-12-20T14:14:31.533
> 
> 标签：batch-file, echo

我需要使用批处理将单个空格键添加到文本文件

但是以下dosnt工作

```
ECHO  >C:\txt.txt 
```

这会产生文本 Echo is (off) 代替？？？

我正在使用 Windows 批处理

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:04:38.577

`echo`正在打印文本“ECHO if off”，因为您没有为其提供任何参数。如果您键入`echo /?`使用说明，您将看到此行为已定义：“键入不带参数的 ECHO 以显示当前回声设置”。因此，在您的情况下，回声设置为关闭。

如果您想在没有换行符和回车的情况下使用空格字符，您很可能需要使用`set`. 如果您使用的是 Windows XP，这应该很容易。

## 视窗

```
>txt.txt ( <nul set /p "= " ) 
```

如果您运行的是 Vista 或更高版本，它会有点棘手，因为 Windows 会在 set 命令上去掉前导空格。

## Windows Vista 或更高版本

您需要创建一个退格字符，然后打印：

```
:: Create a backspace character
for /f %%A in ('"prompt $H &echo on &for %%B in (1) do rem"') do set BS=%%A

<nul set /p=%BS% > txt.txt 
```

请注意，这实际上并不打印空格，而是打印退格字符。我不太确定这是否适合你，但我想不出更简单的方法。否则，您可能最好使用其他一些脚本语言，例如 python 或 powershell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:16:30.707

1.  回显一个空格（+ 换行符）

    ```
    ECHO. > C:\txt.txt 
    ```

    请注意，这也会输出*回车加换行符*（回车）。所以你的文件将变成 3 个字节。

2.  或者，您可以使用 0 字节创建文件

    ```
    fsutil file createnew c:\txt.txt 1 
    ```

    只是这不会添加空格，而是添加 0 字符。

3.  或者，您可以创建一个带有单个空格的文件，然后将其复制到`txt.txt`每次需要包含空格的位置。

4.  使用外部工具，例如`echon.exe`来自[这个 zipfile](http://www.netikka.net/tsneti/pc/link/tsbat.zip)（[来自这个站点](http://www.netikka.net/tsneti/info/tscmd015.htm)）。它模仿`echo -n`，就像它在 Linux 中可用一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-18T04:06:08.897

SET /P 不仅在 Vista 及更高版本上不打印前导空格，也无法打印前导空格`=`。

以下是适用于从 XP 开始的所有现代 Windows 版本的代码：

```
@echo off
setlocal enableDelayedExpansion
for /f %%A in ('copy /Z "%~dpf0" nul') do set EOL=%%A^

:: The above two empty lines are critical - DO NOT REMOVE
<nul set /p "=x!EOL! " >temp.tmp
findstr /v $ temp.tmp >file.txt
del temp.tmp 
```

上述技术可以扩展为支持打印几乎任何不带换行符的字符串，但有一些例外：

*   字符串不能包含回车符

*   XP FINDSTR 会将大多数控制字符和许多扩展的 ASCII 字符显示为点。请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)了解更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-18T06:36:43.360

要使用 Win Vista 或更高版本创建单个空间，您不能再使用该`SET/P`命令（如 dbenham 所述）。

但是你可以使用`copy`命令

```
@echo off
setlocal EnableDelayedExpansion
call :createSub
call :echoWithoutLinefeed "=hello"
call :echoWithoutLinefeed " world"
exit /b

:echoWithoutLinefeed
> txt.tmp (echo(%~1!sub!)
copy txt.tmp /a txt2.tmp /b > nul
type txt2.tmp
del txt.tmp txt2.tmp
exit /b

:createSub
copy nul sub.tmp /a > nul
for /F %%a in (sub.tmp) DO (
   set "sub=%%a"
)
del sub.tmp
exit /b 
```

首先，文本是简单的输出，`ECHO`但最后在appends`SUB`之前附加了一个字符。`ECHO``CR LF`

并且`copy inputfile /a outputfile /b`所有字符都被复制到第一个`SUB`字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-18T06:55:04.220

以下是 32 位 Windows 的两种方法：

此方法直接使用十六进制 20（空格）创建文件：

```
@echo off
(for %%v in (E100''20 Nfile.tmp RCX 01 W Q) do @echo %%v)|debug >nul
ren file.tmp "file with a single space.txt" 
```

这一个从 file.tmp 文件中删除两个尾随字符

```
@echo off
set f=file.tmp
echo. >%f%
(for %%v in (E100''83''E9''02 L103 P N%f% W103 Q) do echo %%v)|debug %f% >nul
ren %f% "file with a single space.txt" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-18T08:01:48.353

这将适用于 Vista 和更高版本，任何位数。

```
@echo off
(
echo -----BEGIN CERTIFICATE-----
echo IA==
echo -----END CERTIFICATE-----
)>file.tmp
certutil -decode file.tmp "file with a single space.txt" >nul
del file.tmp 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-04T22:54:36.680

这是在不创建临时文件的情况下创建单字节单空间文件的方法。

```
cmd /d /c (prompt=$S) ^& cmd /d /k <nul >SingleSpace.txt 
```

# javascript - 如何将 CSS 样式表转换为内联 CSS 样式？

> ID：13974060
> 
> 赞同：2
> 
> 时间：2012-12-20T14:14:42.363
> 
> 标签：javascript, css, node.js

在发送 HTML 格式的电子邮件和/或让纯粹主义者的头脑爆炸时，没有什么比大量的内联样式更好的了。我已经找到了一些工具可以根据具体情况执行此操作，但我希望能够以编程方式将其作为我的 node.js 应用程序正常处理的一部分。

那么，我怎样才能使用服务器端 JavaScript 来实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:16:44.030

[我编写了一个名为Styliner](https://github.com/SLaks/Styliner)的 Node.js 模块，它正是这样做的。

# r - 在 R 中具有离散值的 For 循环

> ID：13974061
> 
> 赞同：2
> 
> 时间：2012-12-20T14:14:45.493
> 
> 标签：r

我有一个具有以下形式的离散值增加的向量：

```
a<-c(1,2,5,7,8,9,10,15,19...) 
```

我想运行一个遍历 a 的值的 for 循环。

我试过了：

```
for (i in 1:a) 
```

但这忽略了缺少值，并且还会查看 3、4 等。

我也试过：

```
for (i in 1:unique(a)) 
```

但这会产生以下错误：

```
In 1:unique(a) :
 numerical expression has 1350 elements: only the first used 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:15:56.403

试试这个：

```
for ( i in a ) 
```

`a`已经是一个向量。`1:N`您通常在循环中看到的构造`for`用作创建从 1 到 N 的整数向量的简写形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T19:21:41.363

蒂姆指出了解决这个问题的正确方法。但是，根据您所做的尝试，您可能还想查看`?seq`并查看`?seq_along`

`1:a` 并且`1:unique(a)`都取向量中的第一个元素`a`（或`unique(a)`）并将其用作序列中的“上限”。（只要 的第一个元素`a`可以强制转换为整数）。

例如

```
 a <- c("7", "hello", "world")
  1:a   # same as 1:7
  # [1] 1 2 3 4 5 6 7

  a <- c("hello", "7", "world")
  1:a   # same as 1:"hello"
  # ERROR 
```

如果您使用`seq_along(a)`，它将为您提供 a 的每个元素的索引。（如果您需要将该索引用于其他计算，则很有用）

```
 for (i in seq_along(a))
    cat(a[[i]], "\t is the", i,"element.\n")

 # hello     is the 1 element.
 # 7         is the 2 element.
 # world     is the 3 element. 
```

# batch-file - 批处理文件从目录和子目录中提取文件

> ID：13974063
> 
> 赞同：0
> 
> 时间：2012-12-20T14:14:56.280
> 
> 标签：batch-file, batch-processing

我有一个批处理文件，它将日期附加到所有 CSV 文件的文件名中。我只希望提取一个目录中的 CSV 文件，而没有子目录。它似乎正在运行所有子目录。

我目前在批处理文件中有此代码

```
:: copy files
For /f "delims=" %%a in ('Dir /A:-D /b /s "%LOCALDIR%"*.csv 2^>nul') do If exist "%%a" (
COPY "%%a" "%LOCALDIR%%dtt%-%%~na.csv"
DEL "%%a"
) 
```

我已经尝试摆脱代码中的 /s ，但是在我要查找的目录中没有找到任何文件。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:07:05.177

为什么不只使用一个简单的循环呢？

```
pushd %LOCALDIR%
for %%A in (*.csv) do ren "%%~A" "%dtt%-%%~A"
popd 
```

或者对于一个班轮

```
for %%A in (%LOCALDIR%\*.csv) do ren "%%~A" "%dtt%-%%~A" 
```

如果路径中有空格，请记住使用该`usebackq`选项。

# sql - TSQL FOR XML EXPLICIT - 向元素添加属性

> ID：13974068
> 
> 赞同：1
> 
> 时间：2012-12-20T14:15:09.237
> 
> 标签：sql, xml, tsql

我有一个使用 FOR XML EXPLICIT 的 SQL 查询：

```
declare @address table
(
    AddressID int,
    AddressType varchar(12),
    Address1 varchar(20),
    Address2 varchar(20),
    City varchar(25)
)    
insert into @address
select 1, 'Home', 'abc', 'xyz road', 'RJ' union all
select 2, 'Office', 'temp', 'ppp road', 'RJ' union all
select 3, 'Temp', 'eee', 'olkiu road', 'CL'

SELECT
    1 AS Tag,NULL AS Parent,
    0 AS 'AddressCollection!1!Sort!hide',
    NULL AS 'AddressCollection!1!',
    NULL AS 'Address!2!AddressID',
    NULL AS 'Address!2!AddressType!Element',
    NULL AS 'Address!2!Address1!Element',
    NULL AS 'Address!2!Address2!Element',
    NULL AS 'Address!2!City!Element'
UNION ALL
SELECT
    2 AS Tag,1 AS Parent,AddressID * 100,NULL,
    AddressID,AddressType, Address1, Address2, City
    FROM @address
ORDER BY [AddressCollection!1!Sort!hide]
FOR XML EXPLICIT 
```

XML 结果是：

```
<AddressCollection>
  <Address AddressID="1">
    <AddressType>Home</AddressType>
    <Address1>abc</Address1>
    <Address2>xyz road</Address2>
    <City>RJ</City>
  </Address>
  <Address AddressID="2">
    <AddressType>Office</AddressType>
    <Address1>temp</Address1>
    <Address2>ppp road</Address2>
    <City>RJ</City>
  </Address>
  <Address AddressID="3">
    <AddressType>Temp</AddressType>
    <Address1>eee</Address1>
    <Address2>olkiu road</Address2>
    <City>CL</City>
  </Address>
</AddressCollection> 
```

如何向元素添加属性？我已经正确地将它们添加到父标签上，但我不知道如何将它们添加到元素标签中。

我需要这样的东西：

```
<AddressCollection>
  <Address AddressID="1">
    <AddressType>Home</AddressType>
    <Address1>abc</Address1>
    <Address2>xyz road</Address2>
    <City status="modified">RJ</City>
  </Address>
  <Address AddressID="2">
    <AddressType status="modified">Office</AddressType>
    <Address1>temp</Address1>
    <Address2>ppp road</Address2>
    <City>RJ</City>
  </Address>
  <Address AddressID="3">
    <AddressType>Temp</AddressType>
    <Address1 status="modified">eee</Address1>
    <Address2>olkiu road</Address2>
    <City>CL</City>
  </Address>
</AddressCollection> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:39:59.953

简单地抛弃显式并使用 xml path(), root() 模型来代替：

恕我直言，XML 显式是一个彻头彻尾的痛苦。除非出于某种原因您被迫使用它，否则我不会使用它。您可以通过更少的学习 XML Path 或 XML Auto 完成更多工作。

```
declare @address table
(
    AddressID int,
    AddressType varchar(12),
    Address1 varchar(20),
    Address2 varchar(20),
    City varchar(25)
)    
insert into @address
select 1, 'Home', 'abc', 'xyz road', 'RJ' union all
select 2, 'Office', 'temp', 'ppp road', 'RJ' union all
select 3, 'Temp', 'eee', 'olkiu road', 'CL'

select *
from @address
for xml path('Address'), root('AddressCollection')

-- for even more control and fun:

select
    AddressID as "MainInfo/@ID"
,   AddressType as "MainInfo/@Type"
,   Address1 + ' ' + Address2 as "Address/*"
,   City as "Address/*"
from @Address
for xml path('Address'), root('AddressCollection') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:48:59.037

更正解决方案的最后一部分：

```
select
AddressID as "MainInfo/@ID"
,   AddressType as "Address/@Type"
,   Address1 + ' ' + Address2 as "Address/*"
,   City as "City/*"
from @Address
for xml path('Address'), root('AddressCollection') 
```

# gnu-screen - 在 .screenrc 中设置环境变量

> ID：13974069
> 
> 赞同：10
> 
> 时间：2012-12-20T14:15:09.867
> 
> 标签：gnu-screen

我正在尝试编写一个 .screenrc 文件，可用于为特定项目的开发设置 - 它会启动几个屏幕，cd 到正确的位置，在编辑器中打开正确的文件，并设置一些测试所需的环境变量。

我无法让环境设置工作..我试过把它放进去``~/.screenrc`：

```
setenv PATH ~/src/my_proj/bin/:$PATH 
```

这不起作用，我认为问题是在`screen`sets之后`PATH`，常规的 shell 初始化脚本会启动并在我身上进行更改。

我不想禁用常规的 shell 初始化脚本。shell初始化`setenv` *后*有什么方法可以制作屏幕吗？或者，屏幕可以将变量设置为只读吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-12T03:04:55.923

我会用一些 bash 魔法来代替。尝试将这样的内容添加到您的`~/.screenrc`文件中：

```
screen -t "window" bash -ic 'PATH=~/src/my_proj/bin/:$PATH bash' 
```

有关更多详细信息并使用此设置为新创建的窗口设置`Ctrl-a Ctrl+c`或`Ctrl-a c`查看我对不同帖子的回答：[https ://stackoverflow.com/a/21717641/1413849](https://stackoverflow.com/a/21717641/1413849)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-14T17:26:36.083

对我来说这条线

```
setenv PATH /home/someuser/bin:$PATH 
```

在 screenrc 文件中成功了。

我认为 '~' 到 '/home/someuser' 的扩展是特定于 bash 的，并且在 screenrc 中不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-11T15:28:19.923

一旦 shell 进程启动，就`screen`无法更改环境变量，也无法将环境变量设为只读（值存储在每个进程的内存中，每个进程都可以完全访问它们） .

（嗯，可能有一些丑陋的特定于系统的方法来做，但这是类 Unix 系统旨在阻止你做的事情。）

您需要修改 shell 的初始化脚本，使其保留现有值`$PATH`，可能会添加到它，而不是将其设置为某个新值而忽略其现有值。

如果您想有条件地执行此操作，您可以测试是否存在`$STY`，仅当 shell（或任何其他进程）在 下运行时才设置`screen`。

此外，`screen`' 的`setenv`命令似乎无法识别该`~`字符。我尝试添加一个类似于`setenv`临时的`screenrc`，并`$PATH`包含一个文字`~`字符。`bash`似乎可以识别 中的`~`语法`$PATH`，但其他 shell 不能。替换`~`by `$HOME`，它`screen`确实可以识别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T06:33:43.387

对我来说，我只是将环境设置为`~/.bash_profile`或`~/.bashrc`

```
case $TERM in
screen*)
  export PS1='[\u:screen \w]\$ '
  ;;
*)
  export PS1='[\u \w]\$ '
  ;;
esac 
```

它奏效了，享受它。

# mongodb - 在 MongoDB 中创建地理空间索引时出错

> ID：13974081
> 
> 赞同：0
> 
> 时间：2012-12-20T14:15:59.037
> 
> 标签：mongodb, geospatial

我有一个集合（“停止”），其中包含从 CSV 导入的 14000 条记录。每条记录中都包含一些地理空间数据，我已将其转换为数组，因此每个记录基本上如下所示：

```
{
  _id: ...,
  // other fields
  "loc": [
    153.019073,
    -27.467834
  ]
} 
```

当我运行`db.stops.ensureIndex({ loc: '2d' })`它给出错误：

> 需要位置对象，位置数组的格式不正确

我想其中一个领域出了点问题，但我不知道是哪一个。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:30:41.410

问题是有一条记录没有正确导入（可能是文件末尾的空行）。

为了找到它（后来删除它），我使用了[`$where`](http://docs.mongodb.org/manual/reference/operators/#_S_where)运算符：

```
db.stops.find({ $where: 'typeof this.loc[0] != "number"' }) 
```

# perl - 删除第一个制表符和最后一个分号之间的所有内容

> ID：13974083
> 
> 赞同：0
> 
> 时间：2012-12-20T14:16:04.730
> 
> 标签：perl

我有一个文件，其行是这样的：

```
EF457507|S000834932     Root;Bacteria;"Acidobacteria";Acidobacteria_Gp4;Gp4
EF457374|S000834799     Root;Bacteria;"Acidobacteria";Acidobacteria_Gp14;Gp14
AJ133184|S000323093     Root;Bacteria;Cyanobacteria/Chloroplast;Cyanobacteria;Family I;GpI
DQ490004|S000686022     Root;Bacteria;"Armatimonadetes";Armatimonadetes_gp7
AF268998|S000340459     Root;Bacteria;TM7;TM7_genera_incertae_sedis 
```

我想打印第一个标签和最后一个分号之间的任何东西，就像那样

```
EF457507|S000834932     Gp4
EF457374|S000834799     Gp14
AJ133184|S000323093     GpI
DQ490004|S000686022     Armatimonadetes_gp7
AF268998|S000340459     TM7_genera_incertae_sedis 
```

我尝试使用正则表达式，但它不起作用，有没有办法使用 Linux、awk 或 Perl 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:22:09.760

你可以使用`sed`：

```
sed 's/\t.*;/\t/' file

## This matches a tab character '\t'; followed by any character '.' any number of
## times '*'; followed by a semicolon; and; replaces all of this with a tab 
## character '\t'.

sed 's/[^\t]*;//' file

## Things inside square brackets become a character class. For example, '[0-9]' 
## is a character class. Obviously, this would match any digit between zero and
## nine. However, when the first character in the character class is a '^', the
## character class becomes negated. So '[^\t]*;' means match anything not a tab
## character any number of times followed by a semicolon. 
```

或者`awk`：

```
awk 'BEGIN { FS=OFS="\t" } { sub(/.*;/,"",$2) }1' file

awk '{ sub(/[^\t]*;/,"") }1' file 
```

结果：

```
EF457507|S000834932     Gp4
EF457374|S000834799     Gp14
AJ133184|S000323093     GpI
DQ490004|S000686022     Armatimonadetes_gp7
AF268998|S000340459     TM7_genera_incertae_sedis 
```

* * *

根据下面的评论，“删除最后一个分号后的所有内容”，使用`sed`：

```
sed 's/[^;]*$//' file

## '[^;]*$' will match anything not a semicolon any number of times anchored to 
## the end of the line. 
```

或者`awk`：

```
awk 'BEGIN { FS=OFS="\t" } { sub(/[^;]*$/,"",$2) }1' file

awk '{ sub(/[^;]*$/,"") }1' file 
```

# ios - 如何通过 AFNetworking 客户端发送带有空格的字符串？

> ID：13974085
> 
> 赞同：0
> 
> 时间：2012-12-20T14:16:14.377
> 
> 标签：ios, afnetworking

> **可能重复：**
> [URL 编码一个 NSString](https://stackoverflow.com/questions/8088473/url-encode-a-nsstring)

我正在尝试发送带有空格的字符串，例如：

```
stack exchange 
```

经过

```
[[ApiClient sharedClient] getPath:[NSString stringWithFormat:@"/search/?q=%@", @"stack exchange"] parameters:nil success:^ ... 
```

但我越来越

```
Error Domain=NSURLErrorDomain Code=-1000 "bad URL" 
```

这个怎么卖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:23:24.113

您将要对您的 url 参数进行编码。

```
// Add this to your class or universal class to be used
// Encode a string to embed in an URL.
NSString *encodeToPercentEscapeString(NSString *string) {
    return (__bridge NSString *)
    CFURLCreateStringByAddingPercentEscapes(NULL,
                                            (CFStringRef) string,
                                            NULL,
                                            (CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                            kCFStringEncodingUTF8);
}

// now you can encode your parameters before adding to your url
NSString *urlParam = @"My custom text";

urlParam = encodeToPerecentEscapeString(urlParam);

// now you can use urlParam in any url parameter requirement 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:35:20.393

不久前我做了一个示例项目，展示了在 ObjC 中转义字符串的不同方法。它[在 github 上](https://github.com/Keithbsmiley/NSStringEscapeTest/blob/master/StringEscapeTest/KSAppDelegate.m)

我最终使用了这样的东西：

```
NSString *escapedString = (NSString *)CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef) myString, NULL, CFSTR("!*()$&`:<>[]{}\"+#@/;=?\\^|~'%%,."), kCFStringEncodingUTF8)); 
```

这似乎涵盖了我能找到的所有边缘情况。

# wpf - 如果数据绑定与默认值相同，则由单选按钮组成的自定义控件不检查单选按钮

> ID：13974086
> 
> 赞同：0
> 
> 时间：2012-12-20T14:16:16.590
> 
> 标签：wpf, data-binding, entity-framework-4, custom-controls

我创建了一个自定义控件，它只是三个单选按钮，以及一个可以是 、 或 之一的类型`Answer`属性。单击单选按钮会更改属性，或者更改属性应该会更改选择了哪个单选按钮。被实现为 DependancyProperty，因此我可以使用它执行数据绑定（源是 EF4 实体的属性）。`string``"Yes"``"No"``"N/A"``Answer``Answer``Answer`

这一切都很好，除了在一种特殊情况下 - 当数据库中列的值与`DependencyProperty.Register()`调用中指定的默认值匹配时。在这种情况下，控件显示时没有选中*任何*单选按钮！

我已经关闭了调试器跳过属性设置器的选项，并且我知道`SetChecks`() 正在被调用，并且应该将`IsChecked`单选按钮的属性设置为 true。

如果我更改属性的默认值，则该值将变为未检查的值……`MyId`只是为了识别我在调试器中查看的特定控件，因为我的视图中有多个这些控件。

首先是`.cs`代码：

```
public partial class YesNoNotApplicableRadio : UserControl, INotifyPropertyChanged {
    public string MyId {
        get;
        set;
    }

    public static readonly DependencyProperty AnswerProperty = DependencyProperty.Register(
        "Answer",
        typeof(string),
        typeof(YesNoNotApplicableRadio),
        new FrameworkPropertyMetadata("N/A",
            FrameworkPropertyMetadataOptions.BindsTwoWayByDefault,
            new PropertyChangedCallback(AnswerPropertyChanged),
            new CoerceValueCallback(CoerceAnswer)
            ),
        new ValidateValueCallback(ValidateAnswer)
        );

    public static bool ValidateAnswer(Object value) {
        string s = value as string;
        if (s == null)
            return true;
        s = s.Trim().ToUpper();
        if (s.Equals("YES") || s.Equals("NO") || s.Equals("N/A") || s.Equals(""))
            return true;
        return false;
    }

    public static void AnswerPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
        YesNoNotApplicableRadio o = d as YesNoNotApplicableRadio;
        string val = (string)e.NewValue;
        SetChecks(o, val.Trim().ToUpper());
    }

    private static void SetChecks(YesNoNotApplicableRadio selector, string val) {
        selector.YesRadio.IsChecked = false;
        selector.NoRadio.IsChecked = false;
        selector.NaRadio.IsChecked = false;
        if (val.Equals("YES"))
            selector.YesRadio.IsChecked = true;
        else if (val.Equals("NO"))
            selector.NoRadio.IsChecked = true;
        else if (val.Equals("N/A") || val.Equals(""))
            selector.NaRadio.IsChecked = true;
    }

    private void Radio_Click(object sender, RoutedEventArgs e) {
        if ((bool)YesRadio.IsChecked)
            Answer = "Yes";
        else if ((bool)NoRadio.IsChecked)
            Answer = "No";
        else
            Answer = "N/A";
    }

    public static Object CoerceAnswer(DependencyObject d, Object baseValue) {
        YesNoNotApplicableRadio o = (YesNoNotApplicableRadio)d;
        string s = baseValue as string;
        if (s == null)
            return ("N/A");
        else
            return (s);
    }

    public string Answer {
        get { return ((string)GetValue(AnswerProperty)); }
        set { SetValue(AnswerProperty, value); NotifyPropertyChanged("Answer"); }
    }

    public YesNoNotApplicableRadio() {
        InitializeComponent();
        Guid groupGuid = System.Guid.NewGuid();
        YesRadio.GroupName = groupGuid.ToString();
        NoRadio.GroupName = groupGuid.ToString();
        NaRadio.GroupName = groupGuid.ToString();

    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string name) {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
} 
```

这是`.xaml`：

```
<UserControl x:Class="RovingAuditEntry.Controls.YesNoNotApplicableRadio"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="30" d:DesignWidth="130">
    <StackPanel Orientation="Horizontal" Margin="5">
        <RadioButton Content="Yes" Height="16" Name="YesRadio" Click="Radio_Click" />
        <RadioButton Content="No" Height="16" Name="NoRadio" Margin="5,0,0,0" Click="Radio_Click" />
        <RadioButton Content="N/A" Height="16" Name="NaRadio" Margin="5,0,0,0" Click="Radio_Click" />
    </StackPanel>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:05:01.733

我想出了一个解决方案，尽管它可能不是正确的。控件的有效输入是`null`、空字符串、`"Yes"`、`"No"`和`"N/A"`（任意大小写）。我的强制函数将转换`null`并将空字符串转换为`"N/A"`. `Register()`通过将传递给函数的默认值从 更改`"N/A"`为`""`，它现在可以工作了。

仍在寻找更好的答案，但在没有答案的情况下，我会接受自己的答案。

# php - 堆栈跟踪一个mysql错误

> ID：13974091
> 
> 赞同：1
> 
> 时间：2012-12-20T14:16:38.307
> 
> 标签：php, debugging

我有一个应用程序，其中我们有一个自定义数据库抽象类。这一切都经过精心调整，效果很好。

我们最近为文件和数据库添加了更好的错误日志记录，用于查询和连接错误。

我们发现自己想要的一件事是能够对调用中涉及的文件进行跟踪。IE 删除旧代码等。

我们已经使用了一些输出缓冲，使用 debug_print_backtrace()，但不满意这放置在日志中的杂乱无章的输出。

任何人都遇到过一个很好的处理程序，它使终端日志阅读变得漂亮？

此外，该应用程序是相当遗留的代码，查询非常混合到视图和输出中。如果查询失败而不重新编写应用程序，是否有任何安全的方法可以强制重定向到 /error.php 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:48:02.037

你问了几个不同的问题。

首先，你看过[debug_backtrace()](http://php.net/manual/en/function.debug-backtrace.php)吗？它提供了大量信息，并使您能够控制日志中信息的外观和数量。当然，您必须做一些工作才能将信息输入日志，但它应该可以很好地完成工作。

关于在不重写应用程序的情况下重定向到 error.php 页面，您必须重写一些内容。理论上，您可以修改抽象类以在失败时重定向用户。话虽如此，我认为这不是进行此类手术的最佳场所。如果是我，我宁愿抽象类返回一个异常并让应用程序包含所有面向用户的逻辑来处理它。否则，您最终会创建一个有漏洞的抽象，这最终可能会成为未来需要解决的更多技术债务。

# php - PHP，二维数组中的值始终为 1

> ID：13974095
> 
> 赞同：1
> 
> 时间：2012-12-20T14:16:53.593
> 
> 标签：php, arrays, firebug, multidimensional-array

> **可能重复：**
> [PHP - 为什么连接的 print_r 打印顺序不正确？](https://stackoverflow.com/questions/9243584/php-why-is-a-concatenated-print-r-printed-out-of-order)

以下是一段代码，其中 $input 的格式`S:2:0;M:7:9;L:4:9;XL:6:0;XXL:6:9`被解析并存储到 2d 数组中.. 通过以下代码

```
 $stock_data = explode(';', $input);
    foreach($stock_data as $value) {
        $value = explode(':', $value);

        if (!empty($value[0])) {

            $temp_size = $value[0];
            $stock[$value[0]] = array('winkel' => $value[1], 'distributeur' => $value[2]);

            fb('afetr array val = '.$temp_size.' = its val -|'. print_r($stock[$temp_size]['distributeur']).'|',FirePHP::INFO);
        }
    }

    return $stock; 
```

`print_r($stock[$temp_size]['distributeur']`or中的值`print_r($stock[$temp_size]['winkel']`始终为 1，即使稍后我尝试 print_r 整个数组`$stock`，它也只有 1。

我试图`print_r()`按原样显示数组，这里出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:21:26.247

那是因为[这就是`print_r`返回](http://php.net/manual/en/function.print-r.php)。如果您希望它返回字符串，请添加第二个参数：

```
print_r($stock[$temp_size]['distributeur'], true) 
```

# jquery - 在 buttonclick 上调用 jQuery

> ID：13974101
> 
> 赞同：8
> 
> 时间：2012-12-20T14:17:41.803
> 
> 标签：jquery

当我单击一个按钮时，我试图运行一些 jQuery 代码，但我什至无法使最简单的示例工作。

我的 jQuery 代码是这样的：

```
<script src="scripts/jquery-1.4.1.js"></script>
<script>
    $('#btn').click(function() {
        alert("Hello");
    });

</script> 
```

我的html看起来像这样

```
<div>
    <input id="btn" type="button" value="button" />
</div> 
```

但是当我单击按钮时，什么也没有发生。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-20T14:18:34.253

将代码包装在 document.ready 函数中

```
$(function(){
    $('#btn').click(function() {
        alert("Hello");
    });
}); 
```

或将您的脚本代码放在正文标记的末尾

在绑定事件处理程序之前，您需要等待元素在页面加载时可用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:20:30.847

尝试以下

```
$(function(){
    $('#btn').on('click', function(){
       alert('click event');
    });
}); 
```

如果这不起作用，请确保您包含正确的 jquery。

如果您不确定，请尝试以下操作。

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T14:19:07.387

尝试在 DOM 加载后绑定事件。

```
$(document).ready(function() {
    $('#btn').click(function() {
        alert("Hello");
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T14:18:42.813

试试你的功能：

```
$(document).ready(function() {
  // Your code
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-17T09:25:18.450

准备好后尝试使用文档进行编码

```
$(document).ready(function() {
  $('#btn').click(function() {
    alert("Hello");
  });
}); 
```

# android - 签署 apk 后 Activity 的 ClassNotFoundException

> ID：13974103
> 
> 赞同：5
> 
> 时间：2012-12-20T14:17:43.160
> 
> 标签：android, classnotfoundexception

当我在测试我的应用程序的调试版本时——没关系。在我为 Google Play 版本签名后——它开始为 FC，但有以下例外：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.wiagames.guitartuner/com.wiagames.guitartuner.activities.MainActivity}: java.lang.ClassNotFoundException: com.wiagames.guitartuner.activities.MainActivity
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.wiagames.guitartuner.activities.MainActivity
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974) 
```

显现：

```
 <application android:label="@string/app_name"
                 android:icon="@drawable/ic_launcher">

        <activity android:name=".activities.MainActivity"
                  android:label="@string/app_name"
                  android:configChanges="orientation|keyboardHidden"
                  android:theme="@style/AppTheme">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
                  android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

    </application> 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:12:27.690

你能发布你的应用程序清单文件吗？

我怀疑活动的声明不正确。

它应该如下所示：

```
<activity android:name="com.wiagames.guitartuner.activities.MainActivity" /> 
```

或者如果你已经有一个包声明，那么它应该像这样：

```
<activity android:name=".activities.MainActivity" /> 
```

请注意，您需要在名称值中使用前导句点（即“.”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:54:26.160

如果你得到 ClassNotFoundException 你必须编写 Activity 所在的包

> ```
>  activity android:name="com.wiagames.guitartuner.activities.MainActivity" 
> ```

您的 Android Manifest.xml 应如下所示：

```
 <activity android:name="com.wiagames.guitartuner.activities.MainActivity"
              android:label="@string/app_name"
              android:configChanges="orientation|keyboardHidden"
              android:theme="@style/AppTheme">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

</application> 
```

# javascript - d3 将直方图卡在轴上

> ID：13974105
> 
> 赞同：0
> 
> 时间：2012-12-20T14:18:01.057
> 
> 标签：javascript, d3.js

嗨，我用 d3 库制作了这个直方图：[jsFiddle](http://jsfiddle.net/metry/6fDmr/)
它是可缩放的，所以你也可以平移它。但我希望直方图至少粘在 xAxis 上，这样你就不能平移到负值。我已经通过限制域进行了尝试，什么对轴有效，但不影响条形。

```
redraw {
...
xScale.domain()[0] = xScale.domain()[0] < 0 ? 0 : xScale.domain()[0];
xScale.domain()[1] = xScale.domain()[1] > data.length ? data.length : xScale.domain()[1];
yScale.domain()[0] = yScale.domain()[0] < 0 ? 0 : yScale.domain()[0];
yScale.domain()[1] = yScale.domain()[1] > d3.max(data) ? d3.max(data) : yScale.domain()[1];
svg.select(".x.axis").call(xAxis);
svg.select(".y.axis").call(yAxis);
vis.selectAll(".bar").attr("transform", "translate(" + zoombie.translate() + ")scale(" + zoombie.scale() + ")");
} 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:33:40.970

我对 d3 不是很熟悉，但[这个](https://stackoverflow.com/a/10127733/623546)先前的答案应该给你足够的解释来做你正在寻找的东西。

[这](http://bl.ocks.org/2368837)是所有这些解释的结果

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:07:19.293

在短期内，这就是我们得到的。首先，*除了*宽度之外，您的可视化的所有属性都是根据比例定义的。您首先需要解决这个问题，这样您就不必依赖向条形添加比例和平移转换来生成所需的缩放效果。有几种方法。最好使用[序数比例](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-ordinal)，但同样是短顺序。我们将编写一个函数来代替：

```
function barWidth(d, i) {
  return (xScale(i + 1) - xScale(i)) * (data.length / (data.length + 1))
} 
```

进入您的 vis 并用该函数替换您手动计算的宽度。

接下来，我怀疑这不是您正在寻找的，但它会让您大部分时间到达那里，将您的缩放定义更改为*不*包括`yScale`

```
var zoombie = d3.behavior.zoom().x(xScale).scaleExtent([1, 100]).on("zoom", redraw); 
```

这样做是让 zoombie 表现得像一个平底锅。现在重绘：

```
function redraw() {
  svg.select(".x.axis").call(xAxis);
  vis.selectAll("rect.bar")
      .attr('width', barWidth)
      .attr('x', function(d, i) { return xScale(i); });
} 
```

你有一个平移条形图。现在，在允许*一些*垂直纬度进行平移方面，这是可能的，但使其工作更加复杂，而且当你放大到条形图的顶部时你会做什么？

# iphone - 如何制作我正在写交换信息的 2 个应用程序？

> ID：13974107
> 
> 赞同：0
> 
> 时间：2012-12-20T14:18:02.037
> 
> 标签：iphone, ios, ipad, core-data

我正在编写的一个应用程序如何访问由我编写的另一个应用程序存储或创建的数据？基本上他们如何相互交流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:23:49.963

您可以使用自定义 url 方案：

这是一个简单的例子：

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:27:57.390

几个选项：

*   URL 方案。您可以通过将数据编码为 URL 来发送数据并打开其他应用程序
*   你自己的服务器。您有一个集中式/云服务器，它代表了两个应用程序使用的“真相”
*   iCloud。多个应用程序可以访问相同的 iCloud 数据（这对于键值存储来说确实如此，我很确定对于核心数据同步也是如此）

# unity3d - 以异步方法在对象上加载材料

> ID：13974108
> 
> 赞同：1
> 
> 时间：2012-12-20T14:18:08.590
> 
> 标签：unity3d

我想使用线程/异步在某些对象上加载一些材料，但我现在尝试过的东西不起作用：

```
Thread d = new Thread(new ThreadStart(loadMethod));
d.Start(); 
```

材料根本没有加载。

如何在不影响应用程序流程的情况下将材质加载到对象上？现在它有点冻结1-2秒。

# preferenceactivity - 如何从preferenceActivity中检索选择

> ID：13974109
> 
> 赞同：0
> 
> 时间：2012-12-20T14:18:08.837
> 
> 标签：preferenceactivity

(安卓 2.2)

我正在尝试检索 PreferenceActivity 中设置的值。尽管活动本身正确存储/调用了该值，但我无法弄清楚如何自己检索设置值（例如，将其显示在 textView 中）。此代码没有给出错误，但是值 0 显示在 Spel.java 的 textView1 中，而不是 PrefsManager 首选项（在 NumberPickerPreferenceActivity 中）中的实际/当前值。

如何使正确的值显示在 textView1 那里？

另外：onSharedPreferenceChanged（在 NumberPickerPreferenceActivity 中）不显示 toast 消息（没有弹出，没有记录）。什么问题，如何解决？

这是 NumberPickerPreferenceActivity 类：

```
package mypackage.tabnavui;

import mypackage.R;
import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.preference.PreferenceManager;
import android.util.Log;
import android.widget.Toast;

public class NumberPickerPreferenceActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener {
    private static final String TAG = NumberPickerPreferenceActivity.class.getSimpleName();
    private SharedPreferences prefs;
    public static int aantalBanen;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        PreferenceManager preferenceManager = getPreferenceManager();
        preferenceManager.setSharedPreferencesMode(MODE_PRIVATE);
        preferenceManager.setSharedPreferencesName("numberPicker.preferences");

        addPreferencesFromResource(R.xml.preferences);

        prefs = PreferenceManager.getDefaultSharedPreferences(this);
    }

    public int prefsAantalBanen() {
        prefs = PreferenceManager.getDefaultSharedPreferences(this);
        return prefs.getInt( "AANTAL_BANEN", 0 );
    }

    public int getAantalBanen() {
        aantalBanen = prefsAantalBanen();
        return aantalBanen;
    }

    @Override
    protected void onResume() {
        super.onResume();
        prefs.registerOnSharedPreferenceChangeListener(this);
    }

    @Override
    protected void onPause() {      
        super.onPause();
        prefs.unregisterOnSharedPreferenceChangeListener(this);
    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
            String key) {
        int selectedNumber = prefsAantalBanen();
        Log.d(TAG, "Number selected: " + selectedNumber);
        Toast t = Toast.makeText(this, "Number selected: " + selectedNumber, Toast.LENGTH_SHORT);
        t.show();
    }    

} 
```

这是 Spel.java，我想在其中显示选择/存储在 ReferenceActivity 中的值，请参见方法 toonClickHandler：

```
 package mypackage.tabnavui;

    import mypackage.tabnavui.R;
import mypackage.Controls2.MyGestureDetector;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.GestureDetector;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.AbsListView;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

import java.util.ArrayList;

    public class Spel extends Activity implements NumberPickerDialog.OnNumberSetListener {
        private static final String TAG = Spel.class.getSimpleName();

        private GestureDetector gestureDetector;
        private TextView textView1; 

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            gestureDetector = new GestureDetector(new MyGestureDetector());

            // Use a custom layout file
            setContentView(R.layout.spel);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.menu_sample_picker, menu);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            if (item.getItemId() == R.id.menu_dialog_item) {
                NumberPickerDialog dialog = new NumberPickerDialog(this, -1, 2);
                dialog.setTitle(getString(R.string.dialog_picker_title));
                dialog.setOnNumberSetListener(this);
                dialog.show();

                return true;
            } else if (item.getItemId() == R.id.menu_preferences_item) {
                startActivity(new Intent(this, NumberPickerPreferenceActivity.class));
                return true;
            }

            return super.onOptionsItemSelected(item);
        }

        public void toonClickHandler(View v) {
            textView1 = (TextView) this.findViewById(R.id.textView1);
            int aantalBanen = NumberPickerPreferenceActivity.aantalBanen;
            textView1.setText(String.valueOf(aantalBanen));

        }

        public void onNumberSet(int number) {
            Log.d(TAG, "Number selected: " + number);
            Toast t = Toast.makeText(this, "Number selected: " + number, Toast.LENGTH_SHORT);
            t.show();
        }       

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_right);
        }

        class MyGestureDetector extends SimpleOnGestureListener {
              private static final int SWIPE_MAX_OFF_PATH = 200;
              private static final int SWIPE_MIN_DISTANCE = 50;
              private static final int SWIPE_THRESHOLD_VELOCITY = 200;

            @Override
            public boolean onDown (MotionEvent e) {
                return true;
            }

              @Override
              public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
                   if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                       return false;
                   // left to right swipe and right to left swipe
                   if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                     && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                        // left swipe
                        Toast t = Toast.makeText(Spel.this, "Left swipe", Toast.LENGTH_LONG);
                        t.show();
                        // startActivity(Tabs3.tab3);
                        startActivityForResult(Tabs3.tab3, 500);
                        overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_left);
                        return true;
                   } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                     && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                        // right swipe
                        Toast t = Toast.makeText(Spel.this, "Right swipe", Toast.LENGTH_LONG);
                        t.show();
                        // startActivity(Tabs3.tab1);
                        startActivityForResult(Tabs3.tab1, 500);
                        overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_right);
                        return true;
                   }
                   return false;
              }    
        }

    } 
```

和preferences.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<PreferenceScreen xmlns:picker="http://schemas.android.com/apk/res/mypackage.tabnavui"
                  xmlns:android="http://schemas.android.com/apk/res/android">

    <nl.computerhuys.tabnavui.NumberPickerPreference
            android:key="AANTAL_BANEN"
            android:title="Aantal banen"
            android:summary="Number picker as a preference"
            picker:defaultValue="2"
            picker:startRange="0"
            picker:endRange="12" />

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:24:20.517

在这里找到它：[如何从 Android 中的 PreferenceActivity 获取 SharedPreferences？](https://stackoverflow.com/questions/2614719/how-do-i-get-the-sharedpreferences-from-a-preferenceactivity-in-android?rq=1)

在 NumberPickerReferenceActivity 中：替换

```
preferenceManager.setSharedPreferencesMode(MODE_PRIVATE); 
```

经过

```
preferenceManager.setSharedPreferencesMode(MODE_WORLD_READABLE); 
```

并更换

```
prefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

经过

```
prefs = getSharedPreferences("numberPicker.preferences", MODE_WORLD_READABLE); 
```

使吐司和日志工作

在拼写中：

```
int aantalBanen = getSharedPreferences("numberPicker.preferences", MODE_WORLD_READABLE).getInt( "AANTAL_BANEN", 0 );
textView1.setText(String.valueOf(aantalBanen)); 
```

在 textView1 中显示存储的值

# vba - Excel 中的数据未正确删除

> ID：13974110
> 
> 赞同：1
> 
> 时间：2012-12-20T14:18:09.757
> 
> 标签：vba, excel, excel-2003

我正在研究一个 Excel VBA，它需要给定的时间范围，提取数据，删除某些参数之外的额外数据，然后按机器“铆工 01 - 铆工 22”对数据进行排序。然后使用排序的数据创建图表。当我让用户单击提交按钮时，所有数据都应该被删除。此外，当表单关闭并重新打开时，每次都会清除数据。（我已经完成了这种冗余来尝试清除剩余的数据）。但是由于某种原因，当我打开表格时，错误的列中有剩余数据，我的图表有一个超过 41,000 的条形图。

我正在粘贴我的代码，希望有人能给出答案。我是 VBA 的新手，所以我确信我并没有按照应有的方式做所有事情，所以如果我输入的内容是愚蠢的或不必要的，请随时告诉我。

```
Private Sub Submit_Button_Click()

Dim cn As Object
Dim rs As Object
Dim strFile As String
Dim strCon As String
Dim strSQL As String
Dim s As String
Dim i As Integer, j As Integer

''Access database

strFile = "S:\IT\Databases\Main_BE.mdb"

''This is the Jet 4 connection string, you can get more
''here : http://www.connectionstrings.com/excel

strCon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strFile & ";"

''Late binding, so no reference is needed

Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")

cn.Open strCon

'Rough idea
StartDate = Sheet1.[C5]
EndDate = Sheet1.[C10]

ModStartDate = StartDate - 1
ModEndDate = EndDate - 1

strSQL = "SELECT * FROM Work_Orders " _
        & "WHERE Repair_Start_Date >= #" & ModStartDate & "# " _
        & "AND Repair_Start_Date <= #" & EndDate & "# " _
        & "ORDER BY Repair_Start_Date, Repair_Start_Time"

'strSQL = "SELECT * FROM Work_Orders " _
 '       & "WHERE Repair_Start_Date Between(" & ModStartDate & "+TimeSerial(17,30,0) And (" & EndDate & "+TimeSerial(17,29,0))"

rs.Open strSQL, cn

'Deletes all contents to J500 each time

Sheet3.Range("A4:K5000").Delete True

''Pick a suitable empty worksheet for the results

Worksheets("Raw Data").Cells(4, 1).CopyFromRecordset rs

Worksheets("Raw Data").Range("H4:H5000").NumberFormat = "hh:mm AM/PM"

Sheet3.[L3] = "=Counta(H4:H500)"

Dim Counter As Integer

Counter = Sheet3.[L3] + 3

Dim CompareTime As String

CompareTime = Sheet3.Cells(4, 8)

'Do While ((Sheet3.[G4] = ModStartDate) And (TimeNo("9:30 PM") > TimeNo(CompareTime)))

    'Worksheets("Raw Data").Range("A4:L4").Select
    'Sheet3.[A4].EntireRow.Delete Shift:=xlUp
    'Worksheets("Raw Data").Cells(1, 1).Select

'Loop

Dim StringTime As String

StringTime = Sheet3.Cells(Counter, 8)

'If ((TimeNo(StringTime) > TimeNo("9:30PM")) And (Sheet3.Cells(Counter, 7) = EndDate)) Then

 '   Sheet3.[L4] = "True"
'Else

 '   Sheet3.[L4] = "False"

'End If

Do While ((TimeNo(StringTime) > TimeNo("9:29 PM")) And (Sheet3.Cells(Counter, 7) = EndDate))

    Sheet3.Cells(Counter, 7).EntireRow.Delete
    Counter = Counter - 1

Loop

With Sheet3
    Sheet2.Range("A9:K5000").Delete True
    Sheet2.Range("A9:K5000").Delete True
    Sheet2.Range("A9:K5000").Delete True
    .AutoFilterMode = False
    With .Range("F2:J500")
        .AutoFilter Field:=1, Criteria1:="Riveter 01"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("A10")
        .AutoFilter Field:=1, Criteria1:="Riveter 02"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("F10")
        .AutoFilter Field:=1, Criteria1:="Riveter 03"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("K10")
        .AutoFilter Field:=1, Criteria1:="Riveter 04"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("P10")
        .AutoFilter Field:=1, Criteria1:="Riveter 05"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("U10")
        .AutoFilter Field:=1, Criteria1:="Riveter 06"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("Z10")
        .AutoFilter Field:=1, Criteria1:="Riveter 07"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("AE10")
        .AutoFilter Field:=1, Criteria1:="Riveter 08"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("AJ10")
        .AutoFilter Field:=1, Criteria1:="Riveter 09"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("AO10")
        .AutoFilter Field:=1, Criteria1:="Riveter 10"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("AT10")
        .AutoFilter Field:=1, Criteria1:="Riveter 11"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("AY10")
        .AutoFilter Field:=1, Criteria1:="Riveter 12"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("BD10")
        .AutoFilter Field:=1, Criteria1:="Riveter 13"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("BI10")
        .AutoFilter Field:=1, Criteria1:="Riveter 14"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("BN10")
        .AutoFilter Field:=1, Criteria1:="Riveter 15"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("BS10")
        .AutoFilter Field:=1, Criteria1:="Riveter 16"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("BX10")
        .AutoFilter Field:=1, Criteria1:="Riveter 17"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("CC10")
        .AutoFilter Field:=1, Criteria1:="Riveter 18"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("CH10")
        .AutoFilter Field:=1, Criteria1:="Riveter 19"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("CM10")
        .AutoFilter Field:=1, Criteria1:="Riveter 20"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("CR10")
        .AutoFilter Field:=1, Criteria1:="Riveter 21"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("CW10")
        .AutoFilter Field:=1, Criteria1:="Riveter 22"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("DB10")

    End With
    .AutoFilterMode = False
End With

With Sheet2
    .[B4] = "=SUM(D10:D500)"
    .[G4] = "=SUM(I10:I500)"
    .[L4] = "=SUM(M10:M500)"
    .[Q4] = "=SUM(S10:S500)"
    .[V4] = "=SUM(X10:X500)"
    .[AA4] = "=SUM(AC10:AC500)"
    .[AF4] = "=SUM(AH10:AH500)"
    .[AK4] = "=SUM(AM10:AM500)"
    .[AP4] = "=SUM(AR10:AR500)"
    .[AU4] = "=SUM(AW10:AW500)"
    .[AZ4] = "=SUM(BB10:BB500)"
    .[BE4] = "=SUM(BG10:BG500)"
    .[BJ4] = "=SUM(BL10:BL500)"
    .[BO4] = "=SUM(BQ10:BQ500)"
    .[BT4] = "=SUM(BV10:BV500)"
    .[BY4] = "=SUM(CA10:CA500)"
    .[CD4] = "=SUM(CF10:CF500)"
    .[CI4] = "=SUM(CK10:CK500)"
    .[CN4] = "=SUM(CP10:CP500)"
    .[CS4] = "=SUM(CU10:CU500)"
    .[CX4] = "=SUM(CZ10:CZ500)"
    .[DC4] = "=SUM(DE10:DE500)"

End With

''Tidy up
rs.Close
Set rs = Nothing
cn.Close
Set cn = Nothing

End Sub

Public Function TimeNo(Time As String) As Long

'**************************************
' Name: A Compare Time Function (like you can compare dates in VB)
' Description:This will allow you to compare times. I noticed that there is a 'Date' type in VB, but no 'Time' type. So if you want to compare Dates you are fine, but for Time comparisons you are a bit stuffed. This is very simple, and will allow you to convert times into numbers so that you can make easy comparisons with them.
' By: Proxy Avoidance
'
'This code is copyrighted and has' limited warranties.Please see http://www.Planet-Source-Code.com/vb/scripts/ShowCode.asp?txtCodeId=63363&lngWId=1'for details.'**************************************

' This is the sort of code that makes you think 'Why didnt I think of that?!?
'
' EG:
' IF TimeNo("21:55:32") < TimeNo("20:40:12") Then
' msgbox "WHOOO!"
' end if
'
' The code is also cross-compatible with different time formats...
'
' IF TimeNo("21:55:32") < TimeNo("8:40PM") Then
' msgbox "WHOOO!"
' end if

TimeNo = CLng(Replace(Format(Time, "hhnnss"), ":", ""))
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:31:12.250

我最终使用：

```
Sheet3.Range("A10:L1000").Delete True
Sheet2.Range("A9:DF1000").Clear
Sheet4.Range("A9:EK1000").Clear 
```

我只对第一个做了删除，看看是否有任何区别，但我看不到。

# java - java：地图动物园，选择什么

> ID：13974115
> 
> 赞同：8
> 
> 时间：2012-12-20T14:18:31.660
> 
> 标签：java, map, hashmap, hashtable, linkedhashmap

我对 Java 世界很陌生（因为我正在用 C/C++ 编写初级语言）。我在我的应用程序中使用地图。由于`java.util.Map`是抽象的，我需要实例化它的实现。通常我`HashMap`像这样使用：

```
Map<String, MyClass> x = new HashMap<>(); 
```

但是在 java 文档中，我发现了许多其他实现，例如`TreeMap`, `LinkedHashMap`,`HashTable`等。我想知道我是否可以继续盲目地使用或者这些实现之间`HashMap`存在任何**重要**差异。`Map`

要点的简短列表就可以了。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T14:21:00.087

*   不用管它`Hashtable`，它是 Java 1.0 的遗物；
*   `HashMap`由于 O(1) 查找和仅依赖于`equals`和，因此是通用默认值`hashCode`，保证为所有 Java 对象实现；
*   `TreeMap`为您提供对映射条目的排序迭代（以及更多内容—请参阅`NavigableMap`），但需要比较策略并且插入和查找速度较慢 - O(logN) - 比`HashMap`;
*   `LinkedHashMap`迭代条目时保留插入/访问顺序。

`SortedMap`实现提供了一些很棒的特性，比如`headMap`和`tailMap`. `NavigableMap`实现为假定排序键的操作提供了更多具有出色性能的功能。

更远的地方还有`java.util.concurrent`map 实现，比如`ConcurrentHashMap`，它们提供了出色的并发性能和原子 get/put 操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:24:22.510

*   `HashMap`几乎一直使用它。请注意，您的对象需要正确实现`equals`和`hashCode`方法。不保存广告订单。
*   `HashTable`永远不要使用它。
*   `LinkedHashMap`相同`HashMap`但保存插入顺序。开销大。
*   `TreeMap`支持自然排序。但是插入工作在 O(logn) 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T14:24:43.173

*   [Hashtable](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)是[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)的线程安全版本，你不应该再使用它了。相反，您应该使用[ConcurrentHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)这是线程安全映射的新实现
*   [TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)主要用于对键进行排序时，它实现了[SortedMap](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)接口。put/get 性能为 O(logn)。
*   如果您需要线程安全的[SortedMap ，则使用](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)[ConcurrentSkipListMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)
*   当您要按插入顺序迭代键时使用[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)

我主要使用`HashMap`或者`ConcurrentHashMap`如果我需要它是线程安全的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T14:22:42.250

当然，每张地图之间都有重要的区别。这完全取决于你想要做什么。如果你记得`HashMap`当你有一个糟糕的散列函数时，a 变得非常无用（参见低效）。`LinkedHashMap`是`HashMap`由双向链表支持的，因此您可以对其进行迭代。当然，您会吃掉与链表相关的开销。 `TreeMap` 保持元素有序，所以你会吃掉开销。 `HashTable`是一个同步的集合，通常会避免。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-28T23:18:18.120

> 这些 Map 实现之间的任何重要区别

是的，在选择`Map`.

*   **并发**
    你会[跨线程](https://en.wikipedia.org/wiki/Thread_safety)操作这个映射吗？
*   **NULL**
    你想接受还是拒绝[NULL 指针](https://en.wikipedia.org/wiki/Null_pointer)作为键和/或值？
*   **排序**
    您是否希望按某种顺序放置地图条目，例如排序顺序或原始插入顺序？你想支持[`SortedMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/SortedMap.html)/[`NavigableMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/NavigableMap.html)接口吗？
*   **不可修改**
    您是否希望地图被冻结，拒绝接受或删除条目？
*   **Identity**
    是否想根据[引用相等或对象相等](https://en.wikibooks.org/wiki/Java_Programming/Comparing_Objects)比较键？
*   **效率当您的密钥是**[枚举](https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)
    时，您想利用非常快的性能和非常少的内存吗？
*   **文字**
    您想要在一行代码中方便地声明*和填充地图吗？*
*   **旧版**
    您想避免使用在现代[Java 集合框架](https://en.wikipedia.org/wiki/Java_collections_framework)之前创建的[旧版](https://en.wikipedia.org/wiki/Legacy_system)地图吗？

`Map`这是我制作的图表，比较了与 Java 11 捆绑的十种实现中的每一种的特性。

[![表格比较了与 Java 11 捆绑的 <code>Map</code> 的十种实现的特性。](../Images/5cd165380fda5ffc78293552cfb3323d.png)](https://i.stack.imgur.com/GbUq3.png)

# javascript - 使用 jquery 隐藏小数点

> ID：13974118
> 
> 赞同：0
> 
> 时间：2012-12-20T14:18:39.573
> 
> 标签：javascript, jquery, mootools

我见过很多问题，但似乎没有一个问题对此有答案。我迫切需要这种帮助。我托管在 Magentogo 上，因此无法访问核心文件，但是在 jquery 的帮助下，我想从我的商店中隐藏 .00。例如，我的代码看起来像这样。卢比项目的价格。也是在 HTML 中无法粘贴为

```
 <div class="price-block"
              <p> The price of this item is 
                <span class="price" id="oldprice">
                     <span class="WebRupee"> Rs. </span>3,795.00             </span></p>
              </span>

                </div>

                <script>

                     $('#price-block').html($('#price-block').html().replace(".00",""));

                </script>

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:22:37.990

你有它作为你的 div 中的一个类

```
<div class="price-block" // <-- also missing > 
```

使用类选择器`.`

```
$('.price-block') 
```

[http://jsfiddle.net/WBsjA/](http://jsfiddle.net/WBsjA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:38:04.980

这是一种方法。由于您的价格没有包含在其自己独特的 HTML`<span>`中以便于定位和替换，因此您需要解析父元素，将子节点与文本节点分开，然后重新构建它：

```
var newval;    
$('.price').each(function(j, pr) {
    // trick to remove the webRupee element for later
    var $webRupee = $(pr).find('.WebRupee').remove().wrap('<div>').parent().html();
    $(pr).contents().each(function(i, el) {
        if (el.nodeType === 3 && el.nodeValue.match(/\.00/)) {
           newval = el.nodeValue.replace(/\.00/, '');
        }
    });
    $(pr).html($webRupee + newval);
}); 
```

[http://jsfiddle.net/mblase75/r2V6r/](http://jsfiddle.net/mblase75/r2V6r/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:39:19.377

我认为您需要循环每个`.price-block`而不是尝试在整个代码垫上运行一次。

```
$('.price-block').each(function(){
    $(this).html($(this).html().replace(".000","").replace(".00","").replace(".0",""));
}); 
```

您还需要修复您的 HTML 标记

```
<div class="price-block">
    <p> The price of this item is 
        <span class="price" id="oldprice">
             <span class="WebRupee"> Rs. 3,795.000</span>
        </span>
    </p>
</div> 
```

[http://jsfiddle.net/daCrosby/XK48G/](http://jsfiddle.net/daCrosby/XK48G/)

# php - 有效地替换模式，但不是在被屏蔽时

> ID：13974125
> 
> 赞同：1
> 
> 时间：2012-12-20T14:18:55.860
> 
> 标签：php, regex

某种形式的 Wiki 格式使用户可以轻松地避免使用 HTML：`**bold** oder //italic//`例如。我正在寻找一种有效的方法来用 HTML 代码替换此类格式化代码，同时保留被“”屏蔽的内容。例子：

```
Replace **this** but do ''not touch **this**'' 
```

在多个步骤中执行此操作将非常容易：

```
preg_match('/(''|**)(.*?)\\1/', ...
if ($match[0] === "''") {
  // Do not touch, further replacements will follow
} else {
  // Replace by HTML
} 
```

PHP preg_replace() 函数对于替换多个模式非常有效，因为当使用数组进行模式/替换时，我只会调用一次并避免调用开销。例子：

```
preg_replace(
  array(
    '/\\*\\*(.*?)\\*\\*',
    '/__(.*?)__/',
    '/\\/\\/(.*?)\\/\\/'
  ),
  array(
    '<strong>\\1</strong>',
    '<u>\\1</u>',
    '<i>\\1</i>'
  ),
  $s
) 
```

顺便说一句：这个函数每次将被调用大约 100 到 1000 次，创建一个动态页面 - 因此我需要一些效率。

所以我的问题是：有没有办法在正则表达式+替换中对掩码进行编码，我可以像在后一个示例中那样与 preg_replace() 一起使用？当然，嵌套格式应该仍然是可能的。

我在这里找到的是一种**删除**东西的方法（[Condition inside regex pattern](https://stackoverflow.com/questions/5283269/condition-inside-regex-pattern)），但我不能将其应用于我的问题，因为替换自然会留下不需要的 void 标签对：

```
preg_replace(
  array(
    '/(\'\'(.*?)\'\')|(__(.*?)__)/',
    '/(\'\'(.*?)\'\')|(\\*\\*(.*?)\\*\\*)/',
    '/\'\'(.*?)\'\'/'
  ),
  array(
    '\\1<u>\\4</u>',
    '\\1<strong>\\4</strong>',
    '\\1'
  ),
  $s
);

// Leaves a void <u></u> and <strong></strong> for each masked section 
```

注意：“”必须在除最后一个替换之外的每个替换中保留下来，否则部分将被提前取消屏蔽。因此 \1 替换。

当然，我终于可以去掉所有的空标签，但这对我来说似乎很愚蠢。而且我很确定，我只是看不到明显的...

感谢您的任何建议！

# android - 循环中的两个方法

> ID：13974126
> 
> 赞同：0
> 
> 时间：2012-12-20T14:18:56.187
> 
> 标签：android

```
private void cameraOn() {
            // TODO Auto-generated method stub
            camera = Camera.open();
             parameters = camera.getParameters();
             parameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
             camera.setParameters(parameters);
        }
private void cameraOff() {
            // TODO Auto-generated method stub
             parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
             camera.setParameters(parameters);
             camera.release();
             camera = null;
        }
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent finis = new Intent (v.getContext(), MainActivity.class);
    startActivityForResult(finis, 0);
        } 
```

我有这两种方法和按钮，我希望这两种方法每秒都在一个循环中工作，直到我按下按钮中断循环并转到另一个屏幕。这些方法用于打开和关闭闪光灯。所以我希望闪光灯一直闪烁，直到我按下按钮。我尝试使用线程，但我无法在一秒钟内完成所有方法的工作，所以我希望有人能帮助我。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:34:03.543

我敢肯定你可以使用某种计时器对象，但我会做类似的事情：

```
long lastTime = 0;
boolean torchIsOn = false;

long currentTime = System.currentTimeMillis();
if (currentTime - lastTime >= 1000) {
    if (torchIsOn) {
        cameraOff();
        torchIsOn = false;
    } else {
        cameraOn();
        torchIsOn = true;
    }
    lastTime = currentTime;
} 
```

这只是我的想法，所以希望它有效。;)

# android - Android 4.2.1 错误的字距调整（间距）

> ID：13974129
> 
> 赞同：10
> 
> 时间：2012-12-20T14:19:07.263
> 
> 标签：android, user-interface, kerning, android-4.2-jelly-bean

使用`Canvas`and`drawText()`方法时，我在 Android 4.2.1 上看到了不同的渲染。

4.2以下：

![在此处输入图像描述](../Images/1e8335ebf28f423767468a528eb4de7f.png)

对于 Android 4.2.1 (Nexux 7) 我得到：

![在此处输入图像描述](../Images/775026ef07365dda8ca14e939ba439a4.png)

正如你所看到的文本*消费*非常紧张。似乎是 4.2.1 中引入的字距调整问题。用于绘制文本的 Paint 并没有什么特别之处：

```
titlePaint = new Paint();
titlePaint.setAntiAlias(true);
titlePaint.setColor(0xffffffff);
titlePaint.setTextSize(0.125f);
titlePaint.setTypeface(Typeface.defaultFromStyle(Typeface.BOLD));
titlePaint.setTextAlign(Align.CENTER);
titlePaint.setLinearText(true); 
```

如果我不使用`titlePaint.setLinearText(true)`，我会在 4.2.1 上得到一个奇怪的结果，如您所见：

[Nexus 7 上的 Android 4.2：canvas.drawText() 无法正常工作](https://stackoverflow.com/questions/13941270/android-4-2-on-nexus-7-canvas-drawtext-not-working-correctly)

**编辑：**

这种奇怪的行为已报告给 Android 团队：[http](http://code.google.com/p/android/issues/detail?id=39755) ://code.google.com/p/android/issues/detail?id=39755但它仍然不是“官方”问题。

**编辑（2）：**

一些谣言声称问题是 textSize < 1.0f ...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T16:02:52.597

解决方法，我目前正在使用：

```
scalePaint.setTextSize(1.5f); 
```

然后，在 onDraw 方法中：

```
canvas.save();
canvas.scale(0.01f, 0.01f);
canvas.drawText(""+i, 0.5f*100, 0.8f*100, scalePaint);                  
canvas.restore(); 
```

正如你所看到的，我正在重新调整文本的位置，所以它应该是它应该在的位置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-20T20:13:30.427

在接受为我的具体问题提出解决方法的唯一回复后，我回答了我自己的问题。这可能是一个“不错”和“确定”的解决方案：

```
public static void drawTextOnCanvasWithMagnifier(Canvas canvas, String text, float x, float y, Paint paint) {
        if (android.os.Build.VERSION.SDK_INT <= 15) {
            //draw normally
            canvas.drawText(text, x, y, paint);
        }
        else {
            //workaround
            float originalTextSize = paint.getTextSize();
            final float magnifier = 1000f;
            canvas.save();
            canvas.scale(1f / magnifier, 1f / magnifier);
            paint.setTextSize(originalTextSize * magnifier);
            canvas.drawText(text, x * magnifier, y * magnifier, paint);
            canvas.restore();
            paint.setTextSize(originalTextSize);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:40:07.497

这是 Android 中的一个错误，虽然它已经提交给错误跟踪器，但您可能希望在那里 +1 以引起注意：[问题 39755](http://code.google.com/p/android/issues/detail?id=39755)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-19T08:00:23.777

使用此功能正确绘制`word wrap`,`new line break`和`text alignment`特征 -

```
static void drawTextWithStaticLayout(Canvas canvas, float x, float y, String text, int wrapWidth, TextPaint paint,Layout.Alignment alignment) {
    if (android.os.Build.VERSION.SDK_INT <= 15) {
        StaticLayout sl = new StaticLayout(text,paint, wrapWidth, alignment,1.0f,0.0f,false);
        sl.draw(canvas);
    }
    else {
        float originalTextSize = paint.getTextSize();
        final float magnifier = 1000f;
        canvas.save();
            canvas.translate(x,y);
            canvas.scale(1f / magnifier, 1f / magnifier);
            paint.setTextSize(originalTextSize * magnifier);
            StaticLayout sl = new StaticLayout(text,paint, (int)magnifier*wrapWidth, alignment,1.0f,0.0f,false);
            sl.draw(canvas);
        canvas.restore();
        paint.setTextSize(originalTextSize);
    }
} 
```

# c# - ListBox VirtualizingStackPanel.VirtualizationMode="Recycling" 在 Windows Phone 7.5 中不起作用

> ID：13974133
> 
> 赞同：4
> 
> 时间：2012-12-20T14:19:19.893
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1

在我正在开发的 Windows Phone 7.5 应用程序中，我遇到了一些性能问题。我有一个`ListBox`正在使用`VirtualizationMode="Recycling"`的和一个`DataTemplate`. 除了性能不佳之外，它似乎工作正常。在进行一些性能分析时，我看到，当我滚动列表时，多达 62% 的 CPU 被用于创建我放置在`DataTemplate`. 我理解的重点`VirtualizationMode="Recycling"`是重新使用所有的`UIElements`，`ListBox`而不需要创建新的实例或处理旧的实例，所以我希望这正是不应该发生的事情。

这是相关的 XAML：

```
<ListBox ItemsSource="{Binding EpisodeRows}" toolkit:TiltEffect.SuppressTilt="True" Margin="12,0" VirtualizingStackPanel.VirtualizationMode="Recycling">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid VerticalAlignment="Top" Height="111" VirtualizingStackPanel.VirtualizationMode="Recycling" >
                <StackPanel Orientation="Horizontal" Visibility="{Binding TilesVisibility}">
                    <landerGame:LevelTileUserControl PartText="{Binding PartText_1}" ScoreText="{Binding ScoreText_1}" Star1Visibility="{Binding Star1Vi
                    <landerGame:LevelTileUserControl PartText="{Binding PartText_2}" ScoreText="{Binding ScoreText_2}" Star1Visibility="{Binding Star1Vi
                    <landerGame:LevelTileUserControl PartText="{Binding PartText_3}" ScoreText="{Binding ScoreText_3}" Star1Visibility="{Binding Star1Vi
                    <landerGame:LevelTileUserControl PartText="{Binding PartText_4}" ScoreText="{Binding ScoreText_4}" Star1Visibility="{Binding Star1Vi
                    <landerGame:LevelTileUserControl PartText="{Binding PartText_5}" ScoreText="{Binding ScoreText_5}" Star1Visibility="{Binding Star1Vi
                    <landerGame:LevelTileUserControl PartText="{Binding PartText_6}" ScoreText="{Binding ScoreText_6}" Star1Visibility="{Binding Star1Vi
                </StackPanel>
                <TextBlock VerticalAlignment="Top" Text="{Binding EpisodeTitleText}" Style="{StaticResource PhoneTextExtraLargeStyle}" Margin="0,0,0,5" 
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这是滚动列表时我的性能分析结果的屏幕截图： ![性能分析结果](../Images/830f4caf0336285aacd8962e673c06ee.png)

这是列表的样子（这是游戏的关卡选择）： ![级别选择](../Images/d00f36d263bb0d6a934cb10ecc5d2648.png)

我环顾四周，发现任何解决`VirtualizationMode="Recycling"`似乎不起作用的文章。在这一点上，任何见解都将不胜感激。

**编辑：**我已经上传了这个项目的完整相关代码，任何人都想在这里尝试一下：http: [//maketag.net/landerGame.rar](http://maketag.net/landerGame.rar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:38:34.623

这很难测试，因为您没有提供有关用户控件的任何信息。

我建议远离 a ，`ListBox`因为您在此处尝试模拟的行为实际上是[WrapPanel](http://phone.codeplex.com/)。

由于您向每个`ListBox`项目添加如此多的用户控件的方式，我猜它会导致性能下降。如果您切换到 a`WrapPanel`然后绑定到您的项目集合，您可能会获得更好的性能，因为每个项目都将被虚拟化，而不必尝试一次虚拟化六个项目（这可能不起作用）。

**编辑：**查看您的代码，我认为您可以进行一些更改以提高性能。首先，摆脱`ListBox`并使用`ItemsControl`这样的：

```
<controls:Pivot Title="LANDER GAME">
    <!--Pivot item one-->
    <controls:PivotItem Header="Episodes">
        <ScrollViewer>
            <ItemsControl ItemsSource="{Binding EpisodeRows}" toolkit:TiltEffect.SuppressTilt="True" Margin="12,0">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid VerticalAlignment="Top" Height="111" >
                            <StackPanel Orientation="Horizontal" Visibility="{Binding TilesVisibility}">
                                ...
                            </StackPanel>
                            <TextBlock VerticalAlignment="Top" Text="{Binding EpisodeTitleText}" Style="{StaticResource PhoneTextExtraLargeStyle}" Margin="0,0,0,5" Visibility="{Binding TitleVisibility}" />
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </controls:PivotItem> 
```

我要做的就是摆脱硬编码`PartText_1`的`PartText_2`变量类型。只需创建一个项目列表，并`ItemsControl`在您的其他项目控件中添加另一个。

只是摆脱`ListBox`它使它变得更加顺畅。我还删除了它，`VirtualizingStackPanel.VirtualizationMode="Recycling"`因为它在开始时会导致性能下降，一旦加载它看起来更流畅。

# jquery - Jquery ui 对话框立即关闭，无需任何用户操作

> ID：13974136
> 
> 赞同：0
> 
> 时间：2012-12-20T14:19:29.743
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog

第一个对话效果很好。这是我正在使用的方法：

HTML `<div>`：

```
<div id="newarticle-form" title="Cr&eacute;ation nouvel article">
    <form id="newarticleform" method="post" action="articles/ajout">
    <fieldset>
        <label for="validite" class="label-class">Date de validit&eacute;</label>
        <input type="text" name="validite" id="validite" size="10" maxlength="10" class="text input-class" />
        <label for="libelle" class="label-class">Libell&eacute;</label>
        <input type="text" name="libelle" id="libelle" size="50" maxlength="100" class="text input-class" />
        <label for="email" class="label-class">Description</label>
        <input type="text" name="description" id="description" value="" size="50" maxlength="250" class="text input-class" />
        <label for="pu" class="label-class">Prix unitaire</label>
        <input type="text" name="pu" id="pu" value="" size="10" maxlength="10" class="text input-class" />
    </fieldset>
    </form>
        <p class="validateTips"></p>
</div> 
```

Javascript jquery ui 对话框：

```
$(function() {  
    $( "#newarticle-form" ).dialog({
        autoOpen: false,
        height: 'auto',
        width: 700,
        modal: true,
        resizable:false,
        buttons: {
                "Ajouter article": function() {
                        .... here is the preparation of the submit ....

            $("#newarticleform").submit();
                 $(this).dialog("close");
            },

               "Fermer": function() {
                   $(this).dialog( "close" );
               }
            }
    });

 $("#New") //The button to open the dialog
    .click(function() {
        $("#newarticle-form").dialog("open");

    });
}); 
```

它运作良好！

此页面有第二个 jquery ui 对话框。当我使用相同的方法（但不是相同的 id）添加它时，此对话框会在大约一秒钟后打开并关闭。

为什么 ？

# c# - 如何使用 ninject 注入会话对象属性？

> ID：13974137
> 
> 赞同：1
> 
> 时间：2012-12-20T14:19:34.373
> 
> 标签：c#, ninject

我有一个服务对象，可以对特定患者进行一些工作。

```
public class PatientDxService
{
    public Patient Patient { get; set; }

    public PatientDxService(Patient patient)
    {
        this.Patient = patient;
    }
} 
```

我的服务接受一个 Patient 对象，如上所示。

我有一个`SessionManager`对象，它具有获取会话患者的属性。我想给病人注射。

```
Bind<PatientDxService>().ToConstructor(x => new PatientDxService(x.Inject<ISessionManager>().Patient));

Bind<ISessionManager>().To<SessionManager>().InSingletonScope(); 
```

以上对我不起作用。我真的不想注入`ISessionManager`，因为如果我想使用 Web 范围之外的服务，那就没有意义了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:23:24.003

将 ISessionManager 注入您的服务而不是患者。然后在构造函数中（或者更好的是，您实际使用患者的地方），从会话中请求患者。

```
public class PatientDxService
{
    private readonly ISessionManager _session;

    public PatientDxService(ISessionManager session)
    {
        this._session = session;
    }

    public void DoStuff()
    {
        var patient = _session.GetPatient();
        ...
    }
} 
```

# backbone.js - 如何在我的主干视图中绑定 bootstrap typeahead 的数据源？

> ID：13974142
> 
> 赞同：2
> 
> 时间：2012-12-20T14:19:39.617
> 
> 标签：backbone.js, twitter-bootstrap, bootstrap-typeahead

我有一个骨干观点。我想在搜索文本字段中发生的每次更改中从服务器设置引导输入的数据源。我怎样才能做到这一点？？这是我的搜索视图

```
window.SearchByChoiceView = Backbone.View.extend({

initialize: function () {
    this.model = new SearchByChoiceModel();
    this.render();
},

render: function () {
    $(this.el).empty().html(this.template(this.model.toJSON()));
    return this;
},

});

window.SearchByChoiceModel = Backbone.Model.extend({

initialize: function () {     
},

defaults: {
    id: 1,
    SearchKeyword: "",
    "tags": new Array()

}
}); 
```

这是我的搜索字段：

```
 <input type="text"  required placeholder="search" class="input-span3" id="SearchKeyword" title= "Search Keyword" name="SearchKeyword" value="<%= SearchKeyword %>" style="margin: 0 auto;" data-provide="typeahead" data-items="4"> 
```

请任何人帮助。我是一个有骨气的初学者。也许这很容易，但对我来说很难处理。我已经尝试了很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:15:31.157

我相信你可以做到这一点：

```
$( '.typeahead' ).typeahead( {
    source : typeAhead.people.pluck( 'name' )
  } );
}); 
```

其中“typeAhead.people”是您的集合实例。在你的情况下

```
myApp.myCollection.pluck( 'SearchKeyword' ) 
```

JS宾：

[http://jsbin.com/upigej/1/edit](http://jsbin.com/upigej/1/edit)

# php - 调用 fpassthru 时更改标头中的 Content-Type

> ID：13974144
> 
> 赞同：1
> 
> 时间：2012-12-20T14:19:48.443
> 
> 标签：php, header, amazon-web-services

当用户单击指向由 Amazon AWS 提供的图像的链接时，我试图强制浏览器显示下载对话框。我有以下 PHP 脚本来执行此操作，这主要是有效的。但是，它在生成乱码网页的 iPad 上却失败了。尽管将标头中的 Content-Type 设置为“image/jpeg”，但生成的文件显示为 CSV，这可能是导致 iPad 上出现问题的原因（而桌面浏览器正在更正正确的类型）。

如果我在 Content-Type 显示为 JPEG`die()`之前放置了一个。`fpassthru($fp)`

如何确保我的 Content-Type 正确设置并以 JPEG 格式交付？

```
$urlComponents = parse_url($url); // where URL is the URL to the image on AWS
if (!isset($urlComponents['path'])) {
    die();
}
$pathParts = pathinfo($urlComponents['path']);
if (!isset($pathParts['basename'])) {
    die();
} else {
    $image = $pathParts['basename'];
}

$fp = fopen($url, 'rb');

header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$image");
header("Content-Type: image/jpeg");
header("Content-Transfer-Encoding: binary");

fpassthru($fp);

fclose($fp); 
```

该代码基于 PHP.net 网站[http://php.net/manual/en/function.fpassthru.php](http://php.net/manual/en/function.fpassthru.php)上给出的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:03:31.677

fpassthru 没有设置标题，所以问题出在之前或之后（后控制器代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:51:07.957

我应该提一下，在标头名称和分号之前的值之前有一个空格与没有标头一样好。并将默认为 text/html 例如

```
header('Content-type : image/jpeg'); //will not work. will default to text/html
header('Content-type: image/jpeg'); //will work 
```

它也是内容类型而不是内容类型！字段名称区分大小写

> 4.2 消息头
> 
> HTTP 头字段，包括 general-header（第 4.5 节）、request-header（第 5.3 节）、response-header（第 6.2 节）和 entity-header（第 7.1 节）字段，遵循与第 7.1 节中给出的相同的通用格式RFC 822 [9] 的 3.1。每个标头字段由一个名称后跟一个冒号（“：”）和字段值组成。**字段名称不区分大小写。**

[超文本传输​​协议——HTTP/1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)：

显然，您要确保在设置标头之前没有其他输出。输出缓冲是确保您不向浏览器打印任何内容的好方法。

# vb.net - 如何使用 Activator.CreateInstance 实例化外部类？

> ID：13974145
> 
> 赞同：0
> 
> 时间：2012-12-20T14:19:48.573
> 
> 标签：vb.net, instantiation, late-binding

我有一个应用程序，我想实例化一个完全在应用程序之外的类，可能在以后由第三方编写。所以类不能知道，但类中的接口是已知的。所以我想使用后期绑定。

在我的代码（VB.NET）中，我有以下内容：

```
Dim a As Object
a = Activator.CreateInstance("MyNameSpace.CustomClass", "")
MsgBox(a.Name) 
```

我在第二行遇到一个异常： `Could not load file or assembly 'MyNameSpace.CustomClass' or one of its dependencies. The system cannot find the file specified.`即使程序集与可执行文件位于同一文件夹中。我不能使用 Type.GetType() 因为调用程序集不知道该类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:26:37.267

您需要[CreateInstanceFrom](http://msdn.microsoft.com/en-us/library/system.activator.createinstancefrom.aspx)方法。

```
 var typeReference = Activator.CreateInstanceFrom(assemblyPath, 
                                                       fullyQualifiedClassName); 
```

但是，对我来说，MEF 将是一个更好的解决方案，因为您可以在界面上绑定 Import/Export。

# xml - 模式 xml 中的模式与枚举

> ID：13974148
> 
> 赞同：4
> 
> 时间：2012-12-20T14:20:02.320
> 
> 标签：xml, xsd, schema

我有一个只能有两个值的属性。
用什么比较好？
图案？

```
<xsd:attribute name="sex">
    <xsd:simpleType>
        <xsd:restriction base="xsd:string">
            <xsd:pattern value="male|female" />
        </xsd:restriction>
    </xsd:simpleType>
</xsd:attribute> 
```

还是枚举？

```
<xsd:attribute name="sex">
    <xsd:simpleType>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="male"></xsd:enumeration>
            <xsd:enumeration value="female"></xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>
</xsd:attribute> 
```

如果没有差异，我将使用模式（少一行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:57:44.633

两者都是合法的 XSD，似乎都不会对 XSD 简单类型的任何符合甚至部分符合的实现造成问题，我预计需要大量数据和非常精确的测量来检测它们之间的任何速度差异。那么问题是“哪个更好？” 本质上相当于一个问题“阅读模式的人更容易理解哪一个？”

这是一个只有你能回答的问题。

对于它的价值，我会观察到使用枚举的公式可以提供有关每个值的含义或预期用法的文档；可能正是出于这个原因，我通常在这种情况下使用枚举。（“男性”和“女性”的值看起来很简单，但在某些模式中，像这样的枚举还需要包含“未知”和“拒绝状态”的值，用户可能需要关于何时使用的指导使用哪个值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T13:50:56.020

另一件需要注意的事情（就差异而言）是枚举可以进一步编码。也就是说，你可以有一个带有id和value的枚举。认为“价值”与您期望在典型下拉列表中看到的内容相似。ID用于标识系统的价值。所以每个枚举都有一个 ID->Value 对。

现在考虑这一点，如果您使用 XSLT 为屏幕快速呈现您的 xml，您可以编写该 xslt 以便它可以相应地解析和设置下拉列表。然而，如果你使用模式串，你将很难分开它。

最后，我曾使用过许多应用服务器技术（如 WAS/JBOSS、TOMCAT、.NET/C#、ESB，如 Tibco、WMB、WPS、WESB、ALBPM、Datapower 等），它们中的每一种在它们的方式上都有一些细微差别做xml验证。注意边界条件验证（null vs空白值vs，无标签，vs标签+ xsi：nil = true）仅举几例。对于某些技术，XML 枚举也属于这一类。他们只是不能很好地支持它（取决于您所谈论的技术）。例如，根据我的经验，我发现 JBOSS 6.0 在验证模式中基于模式的限制方面存在问题。（这只是我的经验，我知道一些 JBOSS 爱好者会来对此提出异议，但是嘿，这不会改变我现在的经验是不是......:)

我不喜欢枚举或模式的地方在于，您现在正在架构中定义业务/系统约束。鉴于您将重用您的模式来发展架构，如果要添加新的允许值，它将导致更新现有接口和 WSDLS 的方式进行大量返工。我的解决方案通常涉及在我的解决方案的初始阶段进行允许的值验证。这允许所有集成层假定进入集成层的消息在其内容中是/必须是有效的。

我希望这对某人有帮助...

# javascript - 通过 JS 添加热键，不包括 textarea / input 内的区域，并在按下 Ctrl、Alt 或 Shift 时跳过

> ID：13974151
> 
> 赞同：1
> 
> 时间：2012-12-20T14:20:28.740
> 
> 标签：javascript

我尝试将其用于一个简单的热键功能，该功能会对某些键的按键做出反应，但如果您在具有给定 ID 的框中进行编辑，则不会。不幸的是，现在热键总是被禁用。我一直收到 alert() :(

文本字段在例如[http://tyrant.40in.net/kg/news.php?id=160#comments](http://tyrant.40in.net/kg/news.php?id=160#comments)

在文本区域内它可以工作，但我的脚本无法识别，无论我是在文本区域内还是在外部（单击文本区域并单击外部也无济于事）。

请帮我。

我还尝试通过选择 (!$('#tfta_1 #search')) 而不是 $('html') 以另一种方式来执行此操作，这样当您使用这些 ID 时，热键将不起作用。不幸的是，这并没有起作用。

编辑：js还必须检查crtl、alt、shift以避免解释

```
// Hotkeys (listen to keyboard input)
$('html').keypress(
    function(event){

        // is cursor at the beginning / end of edit box
        var textInput = document.getElementById("tfta_1"), val = textInput.value;
        var isAtStart = false, isAtEnd = false;
        if (typeof textInput.selectionStart == "number") {
            // Non-IE browsers
            isAtStart = (textInput.selectionStart == 0);
            isAtEnd = (textInput.selectionEnd == val.length);
        } else if (document.selection && document.selection.createRange) {
            // IE branch
            textInput.focus();
            var selRange = document.selection.createRange();
            var inputRange = textInput.createTextRange();
            var inputSelRange = inputRange.duplicate();
            inputSelRange.moveToBookmark(selRange.getBookmark());
            isAtStart = inputSelRange.compareEndPoints("StartToStart", inputRange) == 0;
            isAtEnd = inputSelRange.compareEndPoints("EndToEnd", inputRange) == 0;
            }
        // combine information -> is cursor in edit box?
        var eb = isAtStart + isAtEnd;
        // if in comment box
        if ( eb ) {
            // do nothing
            alert('You are in the comment box');
        }
        // if key 'p' is pressed
        else if (event.which == 112){
            // open profile page
            window.location = home + 'profile.php';
        }
        // if key 'q' is pressed
        else if (event.which == 113){
            // open quests overview
            window.location = home + 'quests.php';
        }
        // if key 'r' is pressed
        else if (event.which == 114){
            // open raids overview
            window.location = home + 'raids.php';
        }
        // if key 'f' is pressed
        else if (event.which == 102){
            // open fraction tracker
            window.location = home + 'factiontracker.php';
        }       
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:31:51.237

你需要检查[`event.target`](https://developer.mozilla.org/en-US/docs/DOM/event.target)财产。

```
if ('textarea' == event.target.tagName.toLowerCase()) {
    return;
} 
```

或者：

```
if ($(event.target).is('textarea')) {
    return;
} 
```

至于修饰键，请参见[event.shiftKey](https://developer.mozilla.org/en-US/docs/DOM/event.shiftKey)、[event.ctrlKey](https://developer.mozilla.org/en-US/docs/DOM/event.ctrlKey)和[event.altKey](https://developer.mozilla.org/en-US/docs/DOM/event.altKey)。

# php - 使用 php 将 Google Maps 多边形覆盖保存到 oracle

> ID：13974153
> 
> 赞同：1
> 
> 时间：2012-12-20T14:20:30.300
> 
> 标签：php, javascript, google-maps-api-3, oracle10g

我正在按照谷歌地图的教程将叠加层保存到 mysql：[https](https://developers.google.com/maps/articles/phpsqlinfo_v3) ://developers.google.com/maps/articles/phpsqlinfo_v3但我无法使用 Oracle 实现它。如果有人可以指出我的错误，这是我到目前为止的代码：

```
function savePolygons(){
    for (var i = 0; i < createdShapes.length; i++){

        var nom_zone  = document.getElementById('nom_zone_' + createdShapes[i].id).value;
        alert(nom_zone)
        var couleur = createdShapes[i].fillColor;
        alert(couleur)
        var code_cs = '711';
        var shapeid_export = createdShapes[i].id;
        alert(shapeid_export)
        var geometry = createdShapes[i].getPath().getArray();
        alert(geometry)
        var url1 = "oracle_savePolygons.php?nom_zone=" + nom_zone + "&couleur=" + couleur + "&code_cs=" + code_cs + "&shapeid_export=" + shapeid_export + "&geometry=" + geometry;
        downloadUrl(url1, function(data, responseCode){
          if (responseCode == 200 && data.length <= 1) {
            infowindow.close();
          }
        });
    }
}

function downloadUrl(url1, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
     if (request.readyState == 4) {
        request.onreadystatechange = doNothing;
        callback(request.responseText, request.status);
     }
  };

  request.open('GET', url1, true);
  request.send(null);
 }

 function doNothing() {} 
```

有 oracle_savePolygons.php 的 php 代码，我在 localhost 上使用 EasyPHP：

```
<?php
require("oracle_dbinfo.php");

$nom_zone =$_GET['nom_zone'];
$shapeid_export = $_GET['shapeid_export'];
$code_cs = $_GET['code_cs'];
$couleur = $_GET['couleur'];
$geometry = $_GET['geometry'];

$conn = oci_connect($username, $password, $database);

$query = oci_parse($conn, 'INSERT INTO test1 (shapeid, nom_zone, code_cs, couleur, geometry) VALUES (:nom_zone, :shapeid_export, :code_cs, :couleur, :geometry)';
oci_bind_by_name($query, ":nom_zone", $nom_zone);
oci_bind_by_name($query, ":shapeid_export", $shapeid_export);
oci_bind_by_name($query, ":code_cs", $code_cs);
oci_bind_by_name($query, ":couleur", $couleur);
oci_bind_by_name($query, ":geometry", $geometry);

oci_execute($query);
oci_commit($conn);
?> 
```

我找到了另一种解决方案：

```
function savePolygons(){
   for (var i = 0; i < createdShapes.length; i++){
    var nom_zone  = escape(document.getElementById('nom_zone_' + createdShapes[i].id).value);
    var couleur = escape(createdShapes[i].fillColor);
    var code_cs = escape('711');
    var shapeid_export = escape(createdShapes[i].id);
    var geometry = createdShapes[i].getPath().getArray();
    var url1 = "oracle_savePolygons.php?nom_zone=" + nom_zone + "&couleur=" + couleur + "&code_cs=" + code_cs + "&shapeid_export=" + shapeid_export + "&geometry=" + geometry;
    window.location.href = url1 ;
   }
} 
```

它可以工作，但我想知道使用 window.location.href 是否是一个安全的解决方案。在 test1 表的 oracle GEOMETRY CLOB var 中插入几何数组时，我也遇到了问题。我有一个 oci_execute 错误，我不知道为什么。4000 字节的 varchar 对多边形几何来说是否足够大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:47:56.170

我使用下一个代码来获取坐标，然后将它们传递给一个字段以在表单中处理它。

```
function draw() { 
 if (drawingManager <= 0) then 

var drawingManager = new google.maps.drawing.DrawingManager({
      drawingMode: google.maps.drawing.OverlayType.POLYGON,
      drawingControl: true,
      drawingControlOptions: {
        position: google.maps.ControlPosition.TOP_CENTER,
        drawingModes: [
         // google.maps.drawing.OverlayType.MARKER,
          //google.maps.drawing.OverlayType.CIRCLE,
          google.maps.drawing.OverlayType.POLYGON,
         // google.maps.drawing.OverlayType.POLYLINE,
         // google.maps.drawing.OverlayType.RECTANGLE
        ]
      },
      markerOptions: {
        icon: 'images/beachflag.png'
      },
      polygonOptions: {
        fillColor: '#1E90FF',
        fillOpacity: 0.4,
        strokeWeight: 2,
        clickable: true,
        editable: true,
        zIndex: 1
      }
    });

    var coord_listener = google.maps.event.addListener(drawingManager, 'polygoncomplete', function (polygon) {
    var coordinates = (polygon.getPath().getArray());

    alert(coordinates);
    grabarPoligonoMysql(coordinates);
    window.poly = polygon;
});

    drawingManager.setMap(map);

} 

function PassPolygonToField(coordinates) {
//here I pass the coords to the form field and then I insert the form into a mysql database.
document.getElementById('myField').value = (coordinates);

} 
```

# iphone - 从 Ad Hoc 构建访问 iPhone 应用程序日志或将项目构建转移到另一台机器

> ID：13974155
> 
> 赞同：0
> 
> 时间：2012-12-20T14:20:32.847
> 
> 标签：iphone, xcode, logging, adhoc

我正在使用 Xcode 4.5.2 开发 iPhone 应用程序，当我通过 Xcode 在设备或模拟器中运行该应用程序时，日志显示在 Xcode 控制台中。

我的问题是，当我构建一个 Ad Hoc 分发版本并将应用程序安装在设备上并从设备上运行它时，有没有办法查看日志输出？我需要远程技术支持该应用程序，并希望在其他地方的测试人员能够查看日志。

问题二，是否可以构建项目并导出构建，将其导入另一台机器上的 Xcode 并从 Xcode 执行而不构建？这将解决问题，因为测试人员将能够从 Xcode 运行应用程序并因此查看日志。

问题是我使用的是 Sencha Touch，这对于测试人员来说设置起来并不容易，以便他可以在本地构建项目。简而言之，我需要测试人员访问日志输出，以便他可以通知我，而无需在 Xcode 中构建项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:14:13.360

问题一，答案一：如果你使用 NSLog 并且你不能在代码中更改它，那么就无法在设备上看到日志输出。但是，在没有 XCode 的情况下，也可以在调试输出窗口中看到相同的日志输出。下载适用于 Mac 或 Windows的（免费）[iPhone 配置实用程序。](http://www.apple.com/support/iphone/enterprise/)连接设备后，您可以选择设备并切换到控制台选项卡以查看所有调试输出消息，包括您的应用程序之一。

问题一，答案二：如果你可以修改日志代码，我强烈建议你使用日志框架。它们中有很多，它们允许您将日志行保存到文件中，将它们上传到服务器或让用户通过电子邮件发送它们等等。等等。功能各不相同。两个示例是[CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack)和[SNLog](https://www.assembla.com/wiki/show/snlog)，但您很可能会找到另一个更适合您需求的示例。

问题二：是的，有可能，但是您发送应用程序的人需要开发人员证书（或者我猜您不想提供的临时证书的密钥）才能安装应用程序在他的手机上。您应该使用的格式是 xcarchive。从 Xcode 中选择产品 -> 存档。归档完成后，管理器将打开并选择您的新归档。选择分发 -> 导出为 XCode 存档。您将生成的 xcarchive 发送给您的测试人员，当他单击它（安装了 XCode）时，它会将您编译的应用程序作为存档导入 XCode 管理器中，与您看到的方式完全相同。然后您的测试人员仍然需要在安装到他的设备上之前对其进行签名（通过选择分发/保存以进行 Ad Hoc 部署）。

# c# - VS2010 发布预处理指令

> ID：13974158
> 
> 赞同：1
> 
> 时间：2012-12-20T14:20:42.003
> 
> 标签：c#, compiler-construction, c-preprocessor, preprocessor-directive

使用 ClickOnce 发布项目时，在构建项目时是否有可用的预处理器指令？如果没有，是否有可以提供此功能的构建脚本或宏？

例子：`#if PUBLISHING ... #endif`

# ruby - 重新安装 ruby gems

> ID：13974160
> 
> 赞同：3
> 
> 时间：2012-12-20T14:20:55.700
> 
> 标签：ruby, rubygems

如没有要加载的文件中提到的那样，如何重新安装 RubyGems [- ruby​​gems (LoadError)](https://stackoverflow.com/questions/2896485/no-such-file-to-load-rubygems-loaderror)？

运行 Mac OS X 10.8.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T05:45:08.030

### 直接从源头下载。

我在尝试获得`gem update --system`或`gem install rubygems-update`正常工作时遇到了巨大的麻烦。

唯一可行的方法是**直接从源下载并覆盖旧版本的 RubyGems。**

1.  只需在[此处下载最新](http://rubygems.org/pages/download) *版本（撰写本文时为 2.0.3）*。

2.  将下载的存档解压缩`cd`到生成的目录中。

3.  使用 运行设置`ruby setup.rb`。（您可能需要为此使用`sudo`，但不要先尝试。）

都好！

J.P

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T14:26:20.127

下载最新版本：

```
wget http://... 
```

解压文件：

```
tar xzvf ruby-... 
```

并安装它：

```
cd ruby-...
./configure
make
make install 
```

为了控制，`ruby --version`

# f# - Visual Studio 2012 中 F# 的 Intellisense 无法正常工作

> ID：13974161
> 
> 赞同：3
> 
> 时间：2012-12-20T14:20:57.700
> 
> 标签：f#, visual-studio-2012, intellisense

准确地说，当我按下时它会弹出自动完成框`<ctrl-space>`。然而，大约 500 毫秒后，弹出窗口消失。这种情况无时无刻不在发生。当我切换到 VB.Net 项目的 C# 时，智能感知弹出窗口没有问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T07:41:00.103

我找到了一个解决方法，以防其他人遇到这个问题。

在您的 F# 解决方案中添加一个 C# 类库。它叫什么并不重要。我称我为 IntellisenseFix。忽略该项目并继续编辑您的 F# 项目，但现在智能感知工作正常。

如果从项目中删除 C# 类库，则智能感知将停止工作。

它不必有意义，它只需要工作:)

# sql - SELECT 查询物料清单

> ID：13974164
> 
> 赞同：1
> 
> 时间：2012-12-20T14:21:01.923
> 
> 标签：sql, sql-server-2008

我们的物料清单表有 3 个主要列：零件编号、父零件和级别代码（0 表示没有父项，3 表示子项的子项等）。

我试图基于单个部分进行查询并获取其所有子项及其子项，依此类推。

它看起来很简单，但我一直在努力解决这个问题。任何人都有他们可以提供的解决方案？

与往常一样，我感谢您的帮助。

**根据 Randy 的要求，这里有更多信息：**

PARPRT = 父 COMPRT = 组件

在屏幕截图中，所有组件都是“101002”物料清单的一部分。

稍后在表格下方，您将看到 COMPRT 中的每个组件都列在 PARPRT 列中，以及构成每个组件的组件。

我想在 BOM 中查询 '101002' 并且不仅获得 COMPRT 中 PARPRT = '101002' 的 4 个部分，而且还获得它们的 COMPRT 等等。

![截屏](../Images/703f5604e6c1169ce132d65bedfe9020.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:25:16.997

感谢那些建议 CTE 的人。这正是我想要的。

这是经过反复试验后我得到的查询。

> 使用 PartDatabase
> 去
> 声明 @TheSinglePart CHAR(30) = '100001';
> 
> WITH BOM (PARPRT_02, COMPRT_02, QTYPER_02)
> AS
> (
> -- 锚成员定义
> SELECT e.PARPRT_02, e.COMPRT_02, e.QTYPER_02
> FROM dbo.Product_Structure AS e
> WHERE e.PARPRT_02 = @TheSinglePart
> UNION ALL
> -- 递归成员定义
> SELECT e .PARPRT_02, e.COMPRT_02, e.QTYPER_02
> FROM dbo.Product_Structure AS e
> INNER JOIN BOM AS d
> ON e.PARPRT_02 = d.COMPRT_02
> )
> 
> SELECT *
> FROM BOM;

# oracle - num_buckets (dba_tab_col_statistics)

> ID：13974165
> 
> 赞同：1
> 
> 时间：2012-12-20T14:21:03.077
> 
> 标签：oracle, oracle10g

在查看我的表 (m_CURRENT) 的 dba_tab_col_statistics 时，我注意到 TNE 列的 num_buckets 值在一个数据库上为 75，在另一个数据库上为 254。DB是Oracle 10g。

这似乎是两个表之间的主要区别。有没有办法让两个数据库都匹配 num_bucket 值？

我有一个删除语句，在一个数据库上速度很快，而在另一个数据库上速度很慢。我知道查询计划在两个数据库上可能不同的原因有很多。经过大量分析，我怀疑让慢速查询数据库具有相同的 num_bucket 设置可以确保我的删除语句在索引 TNE_idx 上执行 range_scan（快速）而不是 fast_full_scan（在这种情况下慢）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:22:35.830

I want to follow up, DazzaL's answer was very informative, but I was wrong, the buckets did not make a difference. I could have saved a lot of time by running
`explain plan for delete blah blah blah`

then

`select * from table(dbms_xplan.display)` and focusing on the right step id.

I zeroed in on step id 5 where a index fast full scan was being used when I should have started on step 2 where the two database plans were different. I saw the fast database doing nested loop anti join and the slow database doing a merge join anti. Once I added the (undocumented?) hint `NL_AJ` with no parameters in the subquery, the desired fast index_range_scan was used.

As I write this I wonder if the bucket number matching was important, but I don't have the time to retest. It ain't broke, so I will not touch it!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:54:34.677

你如何收集两个数据库的统计数据，你有一个常规的统计数据收集脚本吗？您可以一次性完成此操作以仅在该列上收集直方图：

```
begin
dbms_stats.gather_table_stats(user,'M_CURRENT', 
          method_opt=>'for columns TNE size 254', cascade=>false, 
           granularity=>'ALL', degree=>8);
end;
/ 
```

size 参数将设置存储桶（如果不同值的数量少于该数量，则结果将更少）。

上面没有指定estimate_pct，因此将采样一个较小的值群体而不是100%。如果您想要 100%，则在 estimate_pct 参数中指定*），但如果您有常规脚本，则稍后可能会被覆盖。

* 您可以通过比较 dba_tab_col_statistics 上的 sample_size 与 dba_tables 上的 num_rows 来检查当前样本大小

# uitableview - 将 MvxBindableTableViewCell 的附件绑定到布尔值

> ID：13974166
> 
> 赞同：3
> 
> 时间：2012-12-20T14:21:18.553
> 
> 标签：uitableview, xamarin.ios, mvvmcross

我坚持如何将 MvxBindableTableViewCell 的附件绑定到布尔值。

我将表的 ItemsSource 绑定到 ViewModel 中的列表，显示了一个不错的可点击项目列表。

但是我希望单元格的附件（UITableViewCellAccessory.Checkmark）仅在标记此对象时显示。通过标记我的意思是模型中的布尔值设置为真。

有谁知道怎么绑定手机的配件吗？

编辑：我可以根据模型的布尔值显示附件，但它没有绑定。

```
protected override UITableViewCell GetOrCreateCellFor(UITableView tableView, NSIndexPath     indexPath, object item)
    {
        UITableViewCell cell = tableView.DequeueReusableCell(CellIdentifier);
        if (cell == null)
            cell = new PlotsTableViewCell(UITableViewCellStyle.Subtitle, CellIdentifier);

        Plot p = (Plot)item;
        if (p.Done)
            cell.Accessory = UITableViewCellAccessory.Checkmark;
        return cell;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:15:09.400

我认为您可能可以在您的 PlotsTableViewCell 中执行此操作。

如果您声明一个自定义单元格，那么您可以在运行时在该单元格中进行绑定。

您可以在以下位置看到一个示例：[https](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch/Cells/SessionCell2.cs) ://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch/Cells/SessionCell2.cs会话显示：

![细胞](../Images/b5524e57fc03791514e361398868f507.png)

您可以看到该单元格提供了公共属性，例如：

```
public string RoomText
    {
    get { return Label2.Text; }
    set { if (Label2 != null) Label2.Text = value; }
    } 
```

然后提供绑定文本，例如：

```
 'RoomText':{'Path':'Item.Session','Converter':'SessionSmallDetails','ConverterParameter':'SmallDetailsFormat'}, 
```

要将附件绑定到 Bool，您应该能够执行以下操作：

```
public bool IsDone
    {
    get { return Accessory == UITableViewCellAccessory.Checkmark; }
    set 
    {
        if (value) 
        {
            Accessory = UITableViewCellAccessory.Checkmark; 
        }
        else 
        {
            Accessory = UITableViewCellAccessory.None; 
        }
    }
    } 
```

带文字：

```
 'IsDone':{'Path':'Done'}, 
```

* * *

作为一种高级技术，您还可以在自定义绘制的按钮中使用自定义图像，而不是在您的单元格中使用附件。要了解如何执行此操作，请查看该会议示例中的属性是如何绑定的 - 请参阅[https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20CirriousConference](https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch/Bindings)`IsFavorite`中的两种自定义绑定[/Cirrious.Conference.UI.Touch/Bindings](https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch/Bindings)

# image-processing - 如何测试分割算法的准确性？

> ID：13974167
> 
> 赞同：12
> 
> 时间：2012-12-20T14:21:18.740
> 
> 标签：image-processing, computer-vision, image-segmentation

我正在处理图像分类问题。在分类之前，应该对图像进行分割。我尝试了几种方法。我的问题是“我如何测试分割的准确性？”。我计划根据像素差异将最终的二值图像与正确的二值图像进行比较，以获得成功率。有没有更有效的方法来比较两个二进制图像的边缘，而不是这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:30:19.220

通常的做法是使用物体正确位置的总面积与检测到的物体落入正确位置的面积之比。

如果您的区域不均匀，它将类似于（检测到的区域中与地面实况匹配的像素）/地面实况分割中的像素总数。

在下图中：count(gray)/(count(black+gray))

![在此处输入图像描述](../Images/a29743b56287300206733266ad1ffb82.png)

您应该考虑的一个衡量标准也是检测区域与地面实况区域的比率，因为您可能有一个覆盖整个图像的检测，并且上述公式的准确度得分为 100%。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T07:28:44.697

测量图像分割的质量是计算机视觉社区中深入研究的主题。

可以看到[这种](http://www.wisdom.weizmann.ac.il/~alpertsh/paper/AlpertGBB07.pdf "魏茨曼分割评估数据集")适合二值分割的方法。[这种](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/bsds/ "伯克利分割")方法也适用于多段，也适用于边界精度。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-21T07:40:31.537

我认为当你想评估你的分割结果时，应该使用多种措施。准确度（正确分割区域与地面实况的比率）不够。因为您的分割也可能涵盖不在基本事实中的区域。因此，我建议您可以使用以下措施来评估您的分割结果：

1.  真阳性率：在您分割的所有区域上的正确分割区域。
2.  误报率：不在基本事实中但在您分割的所有区域的结果中的区域。
3.  准确性
4.  F1 分数：综合衡量标准（请参阅：[http](http://en.wikipedia.org/wiki/F1_score) ://en.wikipedia.org/wiki/F1_score ）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-10T05:45:13.257

您可以使用 jaccard_similarity_score 如下所示：http://scikit-learn.org/stable/modules/generated/sklearn.metrics.jaccard_similarity_score.html[但是](http://scikit-learn.org/stable/modules/generated/sklearn.metrics.jaccard_similarity_score.html) 对于图像需要将图像展平以将其转换为一维

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-13T21:08:10.747

如果在完美覆盖该区域的 1000 个小片段中检测到地面实况对象，您会有多高兴？

# c# - 如何在 .NET 中创建独立的 XML 节点？

> ID：13974168
> 
> 赞同：0
> 
> 时间：2012-12-20T14:21:19.133
> 
> 标签：c#, .net, xml

如何在 .NET 中创建独立的 XML 节点？

我有一个 XMLElement 类型，我试图为其设置一个值，但由于该类的构造函数受到保护，它不会让我这样做。

这就是我目前正在做的事情：

```
 XmlDocument xmldoc = new XmlDocument();
        XmlElement foo = xmldoc.CreateElement("", "foo"); ;
        XmlElement bar = xmldoc.CreateElement("", "bar"); ; 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:26:14.183

如果您使用 System.Xml.Linq 中的 XElement 而不是 System.Xml 中的旧 XmlElement，它可以让您非常轻松地做到这一点：

```
new XElement("foo") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:24:13.137

我过去做过这个：

```
 System.Xml.XmlDocument doc = new System.Xml.XmlDocument();

            XmlElement fundsElement = doc.CreateElement("funds");
            doc.AppendChild(fundsElement); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:26:19.090

您使用的是 .NET 3.5 或更高版本吗？

```
using System.Xml.Linq;

var element = new XElement("foo", "bar");
Console.WriteLine(element.ToString()); 
```

输出：

```
<foo>bar</foo> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:26:28.490

你可以试试这个

```
 public XElement ToXml()
 {
   XElement element = new XElement("Song",
                    new XElement("", "foo"),
                    new XElement("", "bar"));

   return element;
} 
```

# locale - JDK Locale 类处理希伯来语 (he)、意第绪语 (yi) 和印度尼西亚语 (id) 的 ISO 语言代码

> ID：13974169
> 
> 赞同：16
> 
> 时间：2012-12-20T14:21:24.420
> 
> 标签：locale, java

[`Locale`](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)使用以下任一语言代码实例化对象时： `he`，`yi`并且`id`不保留其值。

例如：

```
Locale locale = new Locale("he", "il");
locale.getLanguage(); // -> "iw" 
```

是什么原因造成的，有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T14:21:53.720

Locale 类不会对您输入的内容进行任何检查，但它会将某些语言代码替换为其旧值。从[文档中](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)：

> ISO 639 不是一个稳定的标准；它定义的一些语言代码（特别是“iw”、“ji”和“in”）已经改变。此构造函数接受旧代码（“iw”、“ji”和“in”）和新代码（“he”、“yi”和“id”），但 Locale 上的所有其他 API 将仅返回旧代码。

这是构造函数：

```
public Locale(String language, String country, String variant) {
    this.language = convertOldISOCodes(language);
    this.country = toUpperCase(country).intern();
    this.variant = variant.intern();
} 
```

这是神奇的方法：

```
private String convertOldISOCodes(String language) { 
    // we accept both the old and the new ISO codes for the languages whose ISO 
    // codes have changed, but we always store the OLD code, for backward compatibility 
    language = toLowerCase(language).intern(); 
    if (language == "he") { 
        return "iw"; 
    } else if (language == "yi") { 
        return "ji"; 
    } else if (language == "id") { 
        return "in"; 
    } else { 
        return language; 
    }
} 
```

它创建的对象是不可变的，因此无法解决此问题。该类也是`final`，因此您无法扩展它，并且它没有要实现的特定接口。让它保留这些语言代码的一种方法是围绕这个类创建一个包装器并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-27T17:10:02.147

Java 对希伯来语语言环境的处理似乎**在 Java 17 中发生了变化**。它似乎是为了遵守 ISO_639-1 语言代码标准。

除非属性 ' *java.locale.useOldISOCodes* ' 设置为*true*，否则 Java 现在将希伯来语语言环境默认为 'he' 以遵守 ISO_639-1。这意味着您将成功加载名为“ *messages_he.properties* ”的希伯来语资源包，其中包含“iw”或“he”语言代码构建的语言环境。' *messages_iw.properties* ' 资源被取消优先级并且只有在相应的'he' 资源不存在时才会被加载。

这是朝着正确方向迈出的一步，迟到总比没有好，因为在希伯来语资源包的命名策略中不需要更多的诡计和魔法。只需使用“他”ISO 代码。

我最近在[希伯来语的语言环境代码/参考其他语言环境代码中回答了这个问题？](https://stackoverflow.com/questions/8202406/locale-code-for-hebrew-reference-to-other-locale-codes/70882234#70882234). 我提供了一个带有基本资源包的小示例类，它演示了新行为。

# javascript - 使用 jQuery 为 div 分配 100% 的高度

> ID：13974176
> 
> 赞同：1
> 
> 时间：2012-12-20T14:21:41.237
> 
> 标签：javascript, jquery

我有一个类似的[问题](https://stackoverflow.com/questions/1128226/problem-using-jquery-to-animate-div-to-100-height)

我想将 div 设置为 100% 高度的 css 属性。这似乎不起作用：

```
$("#somediv").css('height', '100%'); 
```

除了向下/向上滑动之外，还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:22:53.133

只需将 div 设置为窗口的高度

```
$("#somediv").height($(window).height()); 
```

如果你不这样做，你需要所有的父元素都有一个明确的高度设置才能使用`height: 100%;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:25:02.840

```
var somediv = $("#somediv");
somediv.css('height', somediv.parent().height()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:28:50.903

您可以像这样使用父高度：

```
$("#somediv").css('height', $("#somediv").parent().height()); 
```

或者在 div 上放一个 id 就可以得到高度

```
$("#divtogethigger").css('height', $("#iddivheight").parent().height()); 
```

如果你想动画它：

```
$('#somediv').animate({
    height: $(this).parent().height()
  }, 5000, function() { 
    // Animation complete.
  }); 
```

# visual-studio - 在 Visual C++ 中嵌入 Python 和运行时错误 R6034

> ID：13974177
> 
> 赞同：0
> 
> 时间：2012-12-20T14:21:41.177
> 
> 标签：visual-studio, python-2.7, python-embedding, mayavi

所以在过去一周左右的时间里，我一直在尝试将 python 脚本嵌入到 C 中。我已经在连续的阶段完成了这项工作。对于我的第一次尝试，我会从 C 调用我的 python 脚本，并在我的 python 脚本中生成一个 2D 颜色图。这部分工作得很好。我的下一步是在我的 python 脚本中实现 3D 视觉效果（更多的是 3D 表面）。我通过使用 mayavi2 完成了这项工作。现在，当我在没有嵌入的情况下运行我的 python 脚本（即使用 IDLE）时，它可以正常工作，同时生成 2D 和 3D 视觉效果。但是，当我尝试将脚本嵌入 CI 时，会出现运行时错误：R6034。我应该说我正在使用python2.7（我下载了python（x，y））并且我正在使用Visual Studio 2012。
我想知道是否有人遇到过这个问题并且可能知道如何解决这个问题。

# python - 解包需要长度为 44 python 的字符串参数

> ID：13974178
> 
> 赞同：2
> 
> 时间：2012-12-20T14:21:44.580
> 
> 标签：python, tcp, garbage-collection, ip, packet

我有用于获取数据包的 while 循环

```
unpackedData = struct.unpack("!BBHHHBBH4s4sHH4s4s4sHH4s", data[:44]) 
```

此行抛出异常

> 解包需要长度为 44 python 的字符串参数

但是在使用调试器后，我注意到它发生在几个循环之后，我认为这是因为缓存已满。

有没有办法清除 python 缓存或销毁对象或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:26:13.193

我最好的猜测是，在您的 while 循环中，您`data`每次将字符串缩短 44 个字符，但是，44 不会均匀地划分您的原始字符串，因此在最后一次迭代中，您会留下一段字符串长度少于 44 个字符。

python 不会抱怨切片，它只是返回一个小于您预期的字符串。例如：

```
print len("foo"[:500])  #3
print "foo"[:500]       #foo 
```

# .net - 是否可以从 GDI+ ExternalException 获得有意义的错误消息？

> ID：13974181
> 
> 赞同：1
> 
> 时间：2012-12-20T14:21:53.897
> 
> 标签：.net, gdi+

我正在为网站开发图像上传功能，并且在上传这些图像时对它们进行一些处理，因此我正在使用`System.Drawing.Image`和其他相关类。

最终，我将位图数据加载到 中`MemoryStream`，从那里获取我的`System.Drawing.Image`然后调用[`Image.Save(string path, ImageFormat format)`](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx).

我发现一些 JPEG 会抛出一个`System.Runtime.InteropServices.ExternalException`永远有用的错误消息

> GDI+ 中出现一般错误。

检查文档中的`Image.Save`状态`ExternalException`会在何时抛出

> 图像以错误的图像格式保存。
> -或 -
> 图像已保存到创建它的同一文件中。

图像是有效的 JPEG；Preview、Paint、Paint.NET、Photoshop、Chrome 和 IE 都可以毫无怨言地打开文件。我的代码甚至毫无怨言地打开了文件。

我试过保存有和没有指定的文件，`ImageFormat`但我得到了相同的结果。

该代码适用于加载其他 JPEG 文件。

**有没有办法获得有关为什么抛出异常的更多信息？**

* * *

更新

我担心我们可能会偏离主题（主题是，是否有可能从 GDI+ ExternalException 中得到一个有用的错误）所以我不会发布我遇到的错误的重现，因为最终我不是要求修复该错误。

我认为它们在寻找一种方法来从近乎无用的“GDI+ 中的通用错误”转变为有用且有意义的错误方面具有重要价值。

# c - fread 相同的文件，但返回不同的结果

> ID：13974182
> 
> 赞同：1
> 
> 时间：2012-12-20T14:21:54.437
> 
> 标签：c, windows, fread

今天看了一篇名为“a bug of fread?”的博文，没找到原因，就贴在这里，等哪位高手。

首先，程序的目的是读取文件（readme.txt）并打印内容，我用Visual Studio 2010对其进行了测试。

自述文件的内容是：

```
1234;
abcd;
ABCD; 
```

自述文件的十六进制值为：

> 31 32 33 34 3b 0d 0a 61 62 63 64 3b 0d 0a 41 42 43 44 3b

这是代码：

```
#include <stdio.h>
#include <string.h>

#define BUF_SIZE 1024

int main()
{
    FILE *fp = NULL;
    int rcnt = 0;

    char rbuf[BUF_SIZE];

    fp = fopen("readme.txt", "r");
    if (NULL == fp)
    {
        printf("fopen error.\n");
        return -1;
    }

    printf("--------------------------\n");
    memset(rbuf, 0, BUF_SIZE);
    fseek(fp, 0, SEEK_SET);
    rcnt = fread(rbuf, 1, BUF_SIZE, fp);
    printf("read cnt = %d\n", rcnt);
    printf("%s\n", rbuf);

    return 0;
} 
```

这样一个简单的代码，预期的结果是：

```
--------------------------
read cnt = 17
1234;
abcd;
ABCD; 
```

总共 17 个计数包括 15 个字符和 2 个“\n”。
但我得到了以下结果：

```
--------------------------
read cnt = 17
1234;
abcd;
ABCD;D; 
```

PS：如果用“rb”调用fopen函数，或者如果将宏BUF_SIZE定义得更小，我得到了正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:34:29.963

`fread()`不返回 NUL 终止的字符串，但`printf("%s")`要求 NUL 终止的字符串。

**您必须在读取**缓冲区的末尾添加一个 '\0' : `rbuf[rcnt] = '\0'`。并记住读取比缓冲区大小少一个字节，以便为 NUL 字节留出空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:30:18.437

我认为将*二进制*读取 API 与文本文件一起使用`fread()`是错误的。默认模式（如果你只是说）是文本。*`"r"`*

 *请注意，`FILE *`文本模式下的 I/O 通常会进行行终止转换，因此您可以假装行`\n`以实际上可能以物理结尾的方式结束`\r\n`（就像您的那样）。

这种转换可能会在某处引入混乱；这就是为什么切换到二进制模式使其再次工作的原因，因为在二进制模式下不会发生这种转换。*

# jquery - jQuery：使用分离功能后如何重置下拉字段

> ID：13974183
> 
> 赞同：0
> 
> 时间：2012-12-20T14:21:55.830
> 
> 标签：jquery

我正在使用下面的代码在我的下拉字段中隐藏某些选项。

为什么当我单击第一个单选按钮时，它可以工作，但对其他单选按钮不起作用，然后意识到我需要在单击另一个单选按钮后将下拉菜单重置为其原始选项。

我的应用程序有一个单选按钮组，您单击该组几个单选按钮，然后根据单选按钮的值，运行下面的 IF 语句之一。

使用分离功能后，如何将下拉字段重置为原始内容或完整内容？

我已经尝试过这些，但它们不起作用：

```
$('#3547').find('option:first').attr('selected', 'selected'); 
document.getElementById('3547').selectedIndex = 0; 
document.getElementById('3547').reset(); 
```

**代码：**

```
var oldoptions = []; 
 if (typeVal == "Art")
         {      
             $('fieldset#section-417').show();
 thisval = 'Art -';
$("#3547").append(oldoptions);  
    oldoptions = $("#3547 option:not(:contains(" + thisval + "))").detach();
}
 if (typeVal == "Chrome")
         {      
             $('fieldset#section-417').show();
 thisval = 'Chrome -';
$("#3547").append(oldoptions);  
    oldoptions = $("#3547 option:not(:contains(" + thisval + "))").detach();
}
 if (typeVal == "Web")
         {      
             $('fieldset#section-417').show();
 thisval = 'Web -';
$("#3547").append(oldoptions);  
    oldoptions = $("#3547 option:not(:contains(" + thisval + "))").detach();
} 
```

**重新澄清所需的功能：**

我想在过滤掉一些选项之前恢复原来在下拉列表中的所有选项，因此例如：加载时，下拉列表包含 12 个选项。选中“ART”单选后，下拉菜单中仅显示 4 个项目。例如，当我单击另一个单选按钮“Chrome”时，我希望将原来的 12 个选项恢复到下拉列表中，以便过滤器代码可以再次运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:31:38.623

不确定周围的代码，但从这个片段中，您似乎总是分配一个空数组`oldoptions`，然后将其附加到选择中（即，您实际上没有附加任何内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:28:09.023

要选择一个选项，您应该使用：

```
.attr('selected', true) 
```

CSS ID 不应以数字开头。也许那也使您的浏览器感到困惑。

# android - 列表 到字符串缓冲区

> ID：13974192
> 
> 赞同：0
> 
> 时间：2012-12-20T14:22:12.240
> 
> 标签：android, string, list

我创建了一个列表的实现，所以我想将它传递给一个字符串缓冲区变量，如果有人可以给我一个例子，这可能是可能的，也可能不是。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:40:28.727

不确定您到底想在那里做什么，但您可以将列表中的内容附加到`StringBuffer`例如

```
public static void addToStringBuffer(StringBuffer buffer, List<?> list) {

    if (buffer == null || list == null)
        return;

    for (Object object : list) {
        buffer.append(object);
    }

} 
```

或者如果你想让它们用逗号分隔

```
public static void addToStringBuffer(StringBuffer buffer, List<?> list) {

    if (buffer == null || list == null)
        return;

    boolean addSeparator = false;

    for (Object object : list) {
        if (addSeparator) {
            buffer.append(", ");
        } else {
            addSeparator = true;
        }
        buffer.append(object);
    }

} 
```

或使用[`TextUtils#join`](http://developer.android.com/reference/android/text/TextUtils.html#join%28java.lang.CharSequence,%20java.lang.Iterable%29)

```
String result = TextUtils.join(", ", list); 
```

但这并没有增加`StringBuffer`

而且除非你需要同步`StringBuffer`使用[`StringBuilder`](http://developer.android.com/reference/java/lang/StringBuilder.html)

# android - 关闭在后台运行的活动

> ID：13974197
> 
> 赞同：1
> 
> 时间：2012-12-20T14:22:25.933
> 
> 标签：android, android-activity

我设计了一个应用程序，它有许多活动，一个活动从广播接收器调用并运行，如何关闭与应用程序相关的正在运行的活动或如何使用应用程序的新活动关闭其他活动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:57:38.670

最后我找到了解决方案，它是简单的**设置标志**

```
Intent i1 = new Intent(context, Your class name);  
i1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // <= USE THIS
startActivity(i1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:32:19.833

权限：

```
 <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.GET_TASKS" />
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" /> 
```

代码

```
ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(100);
for (ActivityManager.RunningTaskInfo taskInformation : taskInfo) {
    if (yourApplicationPackageName.equalsIgnoreCase(taskInformation.baseActivity.getClassName())) {
        String pack = taskInformation.baseActivity.getClassName().substring(0, taskInformation.baseActivity.getClassName().lastIndexOf("."));
        am.killBackgroundProcesses(pack);
    }
} 
```

# regex - REGEX - 组合语句中的嵌套量词

> ID：13974198
> 
> 赞同：1
> 
> 时间：2012-12-20T14:22:25.593
> 
> 标签：regex

希伯来语中的姓氏可以是英文格式，它只是字母的常规组合，如“Smith”、“Camp”、“Jack”等，也可以是中间有空格的两个单词的组合，如“Ben David”、“Bar Yohay”、“Yom Tov”。我试图创建一个正则表达式，它允许第一种格式 - 至少两个字母长的姓氏，或第二种格式 - 由两个单词组成的姓氏，每个单词长两个或多个字母，中间有一个空格中间。这是我想出的：

## (^[az]{2,}$)|((^[az]{2,}$)(^[ ]$)(^[az]{2,}$))

（我知道它不允许使用大写字母）出于某种原因，它确实允许使用第一种格式的名称，例如 Smith 和 Jerry，但不允许使用第二种格式的名称。是不是中间空格的格式有问题？对于正则表达式专业人士来说，这应该是一件容易的事。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:29:02.880

您可以将您的正则表达式简化为

```
^[a-z]{2,}(?: [a-z]{2,})?$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:24:43.673

您正在滥用锚点（`^`和`$`）。它们分别匹配字符串的开头和结尾。你真正想要的是：

```
(^[a-z]{2,}$)|(^([a-z]{2,})([ ])([a-z]{2,})$) 
```

此外，您可以将表达式简化为：

```
^[a-z]{2,}$|^[a-z]{2,} [a-z]{2,}$ 
```

除非您特别需要捕获组。

或者（所以你只需要一对锚）：

```
^(?:[a-z]{2,}|[a-z]{2,} [a-z]{2,})$ 
```

`(?:...)`是非捕获组，需要限制交替的范围。

# c# - 为什么这个 AJAX 调用会返回整个页面内容？

> ID：13974202
> 
> 赞同：4
> 
> 时间：2012-12-20T14:22:41.573
> 
> 标签：c#, jquery, asp.net, ajax, webmethod

我正在尝试调用在我的一个 aspx 页面文件中找到的以下 webmethod：

```
[WebMethod]
public static string GetReportDetails()
{
    var reportDetails = DataAccess.Database().GetBusinessInterestReportDetails(HttpContext.Current.User.Identity.Name);
    var json = BusinessInterestReport.GetJson(reportDetails); 
    return json;
} 
```

这是我用来调用 webmethod 的 javascript：

```
 $.ajax({
      type: 'POST',
      url: 'SummaryReport.aspx/GetReportDetails',
      dataType: 'json',
      success: function (data) {
           alert(data);
      },
      error: function (jqXHR, textStatus, errorThrown) {
           alert('An error has occured: ' + errorThrown);
      }
 }); 
```

进行此 ajax 调用的 javascript：

```
$('.reportOption').click(function (e) {
    $.ajax({
      type: 'POST',
      url: 'SummaryReport.aspx/GetReportDetails',
      dataType: 'json',
      success: function (data) {
           alert(data);
      },
      error: function (jqXHR, textStatus, errorThrown) {
           alert('An error has occured: ' + errorThrown);
      }
 });
}) 
```

配置`ScriptModule`已经在`web.config`. 断点甚至没有在 webmethod 上被击中，而是返回了整个页面的内容。知道是什么原因造成的吗？

编辑：使用 Chrome 的调试控制台，我发现了这个错误：

```
[ArgumentException: Unknown web method GetReportDetails.
Parameter name: methodName]
   System.Web.Script.Services.WebServiceData.GetMethodData(String methodName) +516665
   System.Web.Handlers.ScriptModule.OnPostAcquireRequestState(Object sender, EventArgs eventArgs) +168
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +68
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +75 
```

为什么它不选择方法名称？我还启用了 PageMethods 使用`<asp:ScriptManager ID="smMain" runat="server" EnablePageMethods="true" />`

PS 刚刚意识到我是从 iFrame 中调用它的。这可能与问题有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:53:15.093

我认为您需要明确添加`contentType`，因为它的默认值是`application/x-www-form-urlencoded; charset=UTF-8`，这不是您想要的。

所以你可能想稍微修改一下你的 jQuery 代码。

```
$.ajax({
  type: "POST",
  contentType: "application/json; charset=utf-8",
  url: "SummaryReport.aspx/GetReportDetails",
  dataType: "json",
  success: function (data) {
      alert(data);
  },
  error: function (jqXHR, textStatus, errorThrown) {
      alert('An error has occured: ' + errorThrown);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:34:28.080

从您的方法中删除`static`关键字。`GetReportDetails`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:03:00.707

不要在您的 Web 方法中编写管道代码（JSON 序列化/反序列化）。只需获取/返回模型（.NET POCO 对象）：

```
[WebMethod]
public static string GetReportDetails()
{
    var reportDetails = DataAccess.Database().GetBusinessInterestReportDetails(HttpContext.Current.User.Identity.Name);
    return reportDetails;
} 
```

然后消费：

```
$.ajax({
    type: 'POST',
    url: 'SummaryReport.aspx/GetReportDetails',
    contentType: 'application/json',
    success: function (data) {
        // the actual object will be inside data.d
        var reportDetails = data.d;
        // Now you could directly use the properties of your model
        // For example if your ReportDetails .NET type had a string property
        // called FooBar you could directly alert(reportDetails.FooBar);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert('An error has occured: ' + errorThrown);
    }
}); 
```

注意事项：

*   我们已经明确指定了`contentType: 'application/json'`向 web 方法指示我们想要使用 JSON 作为传输机制
*   我们已经摆脱了该`dataType: 'json'`属性，因为 jQuery 足够智能，可以使用 Content-Type 响应标头并自动解析`data`传递给`success`回调的参数。

我还建议您阅读这篇关于[`consuming ASP.NET PageMethods directly from jQuery`](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:37:10.500

修复。事实证明，在 aspx 文件的顶部缺少继承属性。

所以现在我有：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="SummaryReport.aspx.cs" MasterPageFile="~/MasterPages/SummaryReports.Master"
Inherits="Web.SummaryReport"
    %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-24T10:39:51.383

我想根据我在这个问题上的经验在这里贡献一个补充。如果您使用的是内容页面或母版页，则无法通过访问该页面来调用 WebMethod，而是添加一个 web 服务页面并使用它，请参阅它与我一起使用的此链接。 [http://forums.asp.net/post/5822511.aspx](http://forums.asp.net/post/5822511.aspx)

我复制到这里

继承 System.Web.Services.WebService

```
<WebMethod()> _
Public Function MyFunction() As String
    Return "Hello World"
End Function 
```

然后您可以从母版页或内容页调用 webmethod，如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
    function MyFunction() {
        var request = $.ajax({
            type: 'POST',
            url: 'HelloWord.asmx/MyFunction',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (serverdata) {
                alert("Done  " + serverdata);
            },
            error: function (error) {
                alert("error  ");
            }
        });
        return false;
    }
</script> 
```

请务必取消注释：Web 服务页面中的 System.Web.Script.Services.ScriptService 行，因为在创建页面时会对其进行注释

# sql - 从 (+)= 查询到左外连接的 SQL 转换

> ID：13974204
> 
> 赞同：1
> 
> 时间：2012-12-20T14:22:43.373
> 
> 标签：sql, oracle, left-join, outer-join

**转换前查询**

```
SELECT w.tech AS tech,
       w.wpcddate AS job_date,
       w.corp AS corp,
       w.house AS house_number,
       w.cust AS cust_number,
       h.zipcode AS zipcode
  FROM fsm_m_wipmaster w,
       fsm_m_zipmaster z,
       fsm_m_housemaster h,
       fsm_m_custmaster c
 WHERE c.corp(+) = w.corp
   AND c.house(+) = w.house
   AND c.cust(+) = w.cust
   AND h.corp(+) = w.corp
   AND h.house(+) = w.house
   AND h.cust(+) = w.cust
   AND z.corp(+) = w.corp
   AND z.zipbeg IS NULL
   AND h.zipcode IS NOT NULL
   AND w.tech IS NOT NULL
ORDER BY w.corp; 
```

**转换后查询**

```
SELECT w.tech AS tech,
       w.wpcddate AS job_date,
       w.corp AS corp,
       w.house AS house_number,
       w.cust AS cust_number,
       h.zipcode AS zipcode
  FROM fsm_m_housemaster h
       LEFT OUTER JOIN
       fsm_m_custmaster c
      ON h.cust = c.cust
     AND h.corp_seq = c.corp_seq
     AND h.house = c.house
       LEFT OUTER JOIN
       fsm_m_wipmaster w
      ON h.cust = w.cust
     AND h.house = w.house
     AND h.corp_seq = w.corp_seq
       LEFT OUTER JOIN fsm_m_zipmaster z
      ON h.corp_seq = z.corp_seq AND z.zipbeg IS NULL
 WHERE w.tech IS NOT NULL
ORDER BY w.corp; 
```

我似乎对为什么转换后的查询没有返回与之前的查询相同的结果。我知道我在这里遗漏了一些愚蠢的东西有人能发现明显的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:53:13.183

原始查询仅包含一个外部联接，因为`(+)`尚未在相关表的所有条件上使用该外部联接。

因此，使用较新的连接语法的正确重写是：

```
SELECT w.tech AS tech,
    w.wpcddate AS job_date,
    w.corp AS corp,
    w.house AS house_number,
    w.cust AS cust_number,
    h.zipcode as zipcode
FROM fsm_m_wipmaster w 
JOIN fsm_m_zipmaster z   ON z.corp = w.corp AND z.zipbeg is null
JOIN fsm_m_housemaster h ON h.corp = w.corp AND h.house = w.house AND h.cust = w.cust AND h.zipcode is not null
LEFT OUTER JOIN fsm_m_custmaster c  ON c.corp = w.corp AND c.house = w.house AND c.cust = w.cust
WHERE w.tech IS NOT NULL
ORDER BY w.corp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:29:27.360

尝试 ：

```
SELECT w.tech AS tech,
  w.wpcddate AS job_date,
  w.corp AS corp,
  w.house AS house_number,
  w.cust AS cust_number,
  h.zipcode as zipcode
FROM fsm_m_wipmaster w
LEFT OUTER JOIN fsm_m_zipmaster z ON w.corp = z.corp
LEFT OUTER JOIN fsm_m_housemaster h ON w.corp = h.corp AND w.house = h.house AND w.cust = h.cust
LEFT OUTER JOIN fsm_m_custmaster c ON w.corp = c.corp AND w.house = c.house AND w.cust = c.cust 
WHERE w.tech IS NOT NULL 
AND z.zipbeg IS NULL
AND h.zipcode IS NOT NULL
ORDER BY w.corp; 
```

似乎您倒置`JOINs`了：在第一个查询中，它`fsm_m_wipmaster`是位于左侧的表`LEFT OUTER JOIN`（因此`(+)`在连接字段上）。

看到[这个](http://www.dba-oracle.com/tips_oracle_left_outer_join.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:29:43.130

一个原因可能是修改后的查询引用了一个名为`z.corp_seq`and的字段`h.corp_seq`，但原始查询没有：

```
left outer join fsm_m_zipmaster z on  h.corp_seq = z.corp_seq  and z.zipbeg is null 
```

试试这个：

```
left outer join fsm_m_zipmaster z on  h.corp = z.corp  and z.zipbeg is null 
```

# c# - 通过 Rest c# httpClient 创建 jira 问题

> ID：13974208
> 
> 赞同：5
> 
> 时间：2012-12-20T14:22:55.963
> 
> 标签：c#, rest, jira, dotnet-httpclient

我在 atlassian [https://answers.atlassian.com/questions/79902/using-httpclient-c-to-create-a-jira-issue-via-rest-generates-bad-request-response](https://answers.atlassian.com/questions/79902/using-httpclient-c-to-create-a-jira-issue-via-rest-generates-bad-request-response)上阅读了一个答案，其中一个用户通过以下代码创建了一个 JIRA 问题。我对其进行了调整，但通过使用自建类问题得到了一个错误`ObjectContent`

```
Http.HttpContent content = new Http.ObjectContent<Issue>(data, jsonFormatter); 
```

编译器不会接受它。有人知道为什么吗？

```
 public string CreateJiraIssue()
        {

            string data= @"{ ""fields"": { 
                                ""project"":
                   {
                       ""key"": ""HELP""
                   },
                                ""summary"": ""Test Ticket"",
                                ""description"": ""Creating of an issue using project keys and issue type names using the REST API"",
                                ""issuetype"": {
                                    ""name"": ""Ticket""
                                },
                                ""assignee"": { ""name"": ""user"" }
                            }
            }";
            string postUrl = "https://xxx.jira.com/rest/api/2/";
            System.Net.Http.HttpClient client = new System.Net.Http.HttpClient();
            client.BaseAddress = new System.Uri(postUrl);
            byte[] cred = UTF8Encoding.UTF8.GetBytes("username:password");
            client.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("Basic", Convert.ToBase64String(cred));
            client.DefaultRequestHeaders.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue("application/json"));
            System.Net.Http.Formatting.MediaTypeFormatter jsonFormatter = new System.Net.Http.Formatting.JsonMediaTypeFormatter();

            System.Net.Http.HttpContent content = new System.Net.Http.ObjectContent<Issue>(data, jsonFormatter);
            System.Net.Http.HttpResponseMessage response = client.PostAsync("issue", content).Result;
            if (response.IsSuccessStatusCode)
            {
                string result = response.Content.ReadAsStringAsync().Result;
                return result;
            }
            else
            {
                return response.StatusCode.ToString();
            } 
```

并使用

```
namespace IOnotification_System
{
    public class Issue
    {
        public Fields fields { get; set; }
        public Issue()
        {
            fields = new Fields();
        }
    }

    public class Fields
    {
        public Project project { get; set; }
        public string summary { get; set; }
        public string description { get; set; }
        public Assignee assignee { get; set; }
        public IssueType issuetype { get; set; }
        public Fields()
        {
            project = new Project();
            issuetype = new IssueType();
        }
    }

    public class Project
    {
        public string key { get; set; }
    }

    public class IssueType
    {
        public string name { get; set; }
    }
     public class Assignee
    {
        public string name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:38:54.030

**编辑**

该消息清楚地表明 System.Net.Http.ObjectContent() 的第一个参数需要一个 Issue 对象。我希望在那之后有另一条消息说不可能从字符串转换为问题。

您正在将字符串传递给需要一个问题对象的方法。格式化程序用于将问题对象转换为 Json 字符串。

您已经有了字符串，因此尝试转换它是没有意义的。如果您有要转换为 Json 字符串的问题实例，则仅需要格式化程序。您可以使用[StringContent](http://msdn.microsoft.com/en-us/library/system.net.http.stringcontent.aspx)类并使用其[Headers](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent.headers.aspx)属性添加尚未在客户端上设置的任何标头，例如：

```
var content=new StringContent(data); 
```

**原来的**

错误信息是什么，您使用的是什么类型的项目？[System.Net.Http.Formatting](http://msdn.microsoft.com/en-us/library/system.net.http.formatting.mediatypeformatter%28v=vs.108%29.aspx)命名空间是 ASP.NET Web API 的一部分。您是在构建 ASP.NET 应用程序、控制台应用程序还是其他东西？

除非您正在构建 ASP.NET 站点，否则此代码将不起作用。如果您唯一的问题是如何解析 Json 请求，只需使用另一个 Json 反序列化类。[Json.NET](http://james.newtonking.com/projects/json-net.aspx)是一个非常流行的选择。

在任何情况下，都没有理由使用 Json 类将字符串转换为包含完全相同字符串的 HttpContent 对象。您可以使用[StringContent](http://msdn.microsoft.com/en-us/library/system.net.http.stringcontent.aspx)类并使用其[Headers](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent.headers.aspx)属性添加尚未在客户端上设置的任何标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:38:43.067

以下是魔术：

```
var content = new StringContent(data, Encoding.UTF8, "application/json"); 
```

# c# - 使用 gmail 地址通过 Postal 发送电子邮件

> ID：13974210
> 
> 赞同：2
> 
> 时间：2012-12-20T14:23:04.360
> 
> 标签：c#, .net, asp.net-mvc-3, gmail, postal

[我正在尝试使用Postal](http://aboutcode.net/postal/)从我的 Gmail 帐户发送电子邮件：

```
dynamic email = new Email("Appointment");
email.To = "sergiotapia@outlook.com";
email.Send(); 
```

我得到这个错误：

> System.Net.Mail.SmtpException：{“SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.7.0 必须首先发出 STARTTLS 命令。

任何想法我需要做些什么来发送这封电子邮件？

这是我的 web.config 设置：

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="Network" from="asdf@adsf.ly.com">
        <network host="smtp.gmail.com" port="587" defaultCredentials="false" userName="asdf@adsf.ly" password="asdf" />
        </smtp>
    </mailSettings>
</system.net> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T14:24:02.600

正如错误明确指出的那样，Gmail 仅接受 SSL 连接。

添加`enableSsl="true"`到您的配置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:25:33.820

当您尝试发送邮件时，您应该使用安全连接。在你的配置中试试这个；

```
enableSsl="true" 
```

[`Problems sending mail`](http://support.google.com/mail/bin/answer.py?hl=en&answer=78775)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-06T10:12:41.093

我遇到了同样的问题。但现在通过使用此配置修复

```
<system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="dotnet1235@gmail.com">
        <network host="smtp.gmail.com" port="587"
                 defaultCredentials="false"
                 userName="dotnet1235@gmail.com"
                 password="bla_bla"
                 enableSsl="true"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

我按照这个博客上的步骤[http://fat-night.blogspot.com/2014/09/c-postal-mvc-5-menggunakan-gmail-mail.html](http://fat-night.blogspot.com/2014/09/c-postal-mvc-5-menggunakan-gmail-mail.html)

# ios - GL_APPLE_shader_framebuffer_fetch gl_lastFragData

> ID：13974218
> 
> 赞同：6
> 
> 时间：2012-12-20T14:23:27.070
> 
> 标签：ios, opengl-es, opengl-es-2.0, glsl

Apple 引入了一个名为 GL_APPLE_shader_framebuffer_fetch 的新着色器扩展，它允许完全可编程的混合。还有一个解释功能的 wwdc 视频。这是wwdc 2012的视频513。

可悲的是，这个扩展对我不起作用。

F 着色器：

```
#extension GL_APPLE_shader_framebuffer_fetch : require

varying lowp vec4 colorVarying;

void main(void) {
    gl_FragColor = gl_lastFragData[0] + vec4(colorVarying.x, colorVarying.y, colorVarying.z, 1.0);
} 
```

调试输出：不支持扩展“GL_APPLE_shader_framebuffer_fetch”

试图在带有 6.0 的实际 iPad 上的 iOS 6.0 iPad Simulator 'n 上运行它

怎么可能？我需要做什么才能真正使用这个扩展？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T15:03:00.990

Try`GL_EXT_shader_framebuffer_fetch`它在 Beta 中被调用`GL_APPLE_shader_framebuffer_fetch`，但在最终版本中被重命名（根据[iOS6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS6.html)）。

# database - SQL Server 2008 - 是否可以将一个表中的主键与另一个表中的通用字段相关联？

> ID：13974219
> 
> 赞同：0
> 
> 时间：2012-12-20T14:23:29.570
> 
> 标签：database, sql-server-2008, tsql, class-table-inheritance

我目前正在从事一项工作，在尝试关联两个表时遇到问题，其中一个表由于泛化而成为子类。

表 A 有一个主键 StaffID，我想将其与通用表（表 B）中的外键相关联。表 B 的超类（表 C）具有 staffID 字段，因此泛化应该将其从表 C 带到表 B。

但是，当使用图表视图设置 FK 关系时，当我查看下拉字段时，我只能看到表 B 中的属性，而没有看到超类（表 C）属性，因此看不到人员 ID。

为了给情况提供更多的上下文，有两种类型的人员，一种可以在泛化的所有表中创建数据，因此通过人员ID直接链接到超类，但是另一种类型的人员只能将数据添加到其中一个子类。

```
 Super Class C
                 (staffID)

Sub Class D                     Sub Class B(FK) ----------- table A (PK)
                                                              (staffID) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:37:10.783

我不确定我是否理解你的问题。但是为了设置*从*B*到*C 的外键引用，列 C.staffID 必须是主键，或者必须具有 UNIQUE 约束。

[这个 SO 答案](https://stackoverflow.com/a/5471265/562459)可能会给您一些有用的指导。

# jquery - jQuery Mobile：以编程方式显示 ajax 加载器

> ID：13974221
> 
> 赞同：2
> 
> 时间：2012-12-20T14:23:40.873
> 
> 标签：jquery, ajax, html, css, jquery-mobile

我使用 ajax 请求加载内容，并且可能需要一些时间才能加载所有内容（图像和文本）并显示在页面上。

我想在 ajax 调用开始时显示一个加载微调器，并在所有内容真正存在时隐藏它。

它尝试了这样的事情，但它不起作用：

```
$(this).ajaxStart(function() {
 $.mobile.loading('show');
});

$(this).ajaxStop(function() {
 $.mobile.loading('hide');
}); 
```

*更新*：

加载器现在正在旋转，但是当浏览器最终呈现所有内容时，我仍然需要一个事件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:29:39.450

或者您可以将其添加到 ajax 调用中：

```
beforeSend: function() {
    $.mobile.showPageLoadingMsg(true);
},
complete: function() {
    $.mobile.hidePageLoadingMsg();
} 
```

# sap - 使用 TransactionID 时 SAP JCo RETURN 表为空

> ID：13974223
> 
> 赞同：5
> 
> 时间：2012-12-20T14:23:46.550
> 
> 标签：sap, bapi, jco

我正在使用 JCo 库来访问 SAP 标准 BAPI。好吧，除了当我使用 TID (TransactionID) 时返回表始终为空之外，一切都正常工作。

当我只是删除 TID 时，我得到的 RETURN 表中充满了警告等。但不幸的是，我需要将 TID 用于事务性 BAPI，否则不会提交更改。

**为什么使用 TID 时 RETURN TABLE 为空？**

**或者我必须如何提交对事务 BAPI 的更改？**

这里是 BAPI 访问的伪代码：

```
import com.sap.conn.jco.*;
import org.apache.commons.logging.*;

public class BapiSample {

    private static final Log logger = LogFactory.getLog(BapiSample.class);
    private static final String CLIENT = "400";
    private static final String INSTITUTION = "1000";
    protected JCoDestination destination;

    public BapiSample() {
        this.destination = getDestination("mySAPConfig.properties");
    }

    public void execute() {
        String tid = null;
        try {
            tid = destination.createTID();
            JCoFunction function = destination.getRepository().getFunction("BAPI_PATCASE_CHANGEOUTPATVISIT");

            function.getImportParameterList().setValue("CLIENT", CLIENT);
            function.getImportParameterList().setValue("INSTITUTION", INSTITUTION);
            function.getImportParameterList().setValue("MOVEMNT_SEQNO", "0001");
            // Here we will then all parameters of the BAPI....
            // ...
            // Now the execute
            function.execute(destination, tid);
            // And getting the RETURN Table. !!! THIS IS ALWAYS EMPTY!
            JCoTable returnTable = function.getTableParameterList().getTable("RETURN");
            int numRows = returnTable.getNumRows();
            for (int i = 0; i < numRows; i++) {
                returnTable.setRow(i);
                logger.info("RETURN VALUE: " + returnTable.getString("MESSAGE"));
            }
            JCoFunction commit = destination.getRepository().getFunction("BAPI_TRANSACTION_COMMIT");
            commit.execute(destination, tid);
            destination.confirmTID(tid);
        } catch (Throwable ex) {
            try {
                if (destination != null) {
                    JCoFunction rollback = destination.getRepository().getFunction("BAPI_TRANSACTION_ROLLBACK");
                    rollback.execute(destination, tid);
                }

            } catch (Throwable t1) {
            }
        }
    }

    protected static JCoDestination getDestination(String fileName) {
        JCoDestination result = null;
        try {
            result = JCoDestinationManager.getDestination(fileName);
        } catch (Exception ex) {
            logger.error("Error during destination resolution", ex);
        }
        return result;
    }
} 
```

**更新 10.01.2013：**我终于能够得到两者，返回表填充和输入提交。解决方案是两者都做，没有 TID 的提交，获取 RETURN 表，然后再次使用 TID 提交。

非常非常奇怪，但也许是 JCo Commits 的正确用法。**谁可以给我解释一下这个？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-13T09:12:25.827

我能够同时获得 RETURN 表填充和输入提交。

解决方案是两者都做，**没有 TID 的提交**，获取 RETURN 表，然后**再次使用 TID 提交**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T09:56:30.153

你不应该调用execute方法2次，它会增加序列号你应该在JCoContext类中使用begin和end方法。

如果在流程开始时调用 begin 方法，数据将被更新并返回消息。这是示例代码。

```
 JCoDestination destination = JCoDestinationManager.getDestination("");
  try
  {
      JCoContext.begin(destination);
      function.execute(destination)
      function.execute(destination)
  } 
  catch (AbapException ex)
  {
         ...
  } 
  catch (JCoException ex)
  {
         ...
  }  
  catch (Exception ex)
  {
         ...
  }
  finally
  {
      JCoContext.end(destination);
  } 
```

您可以参考此 URL 的更多信息。 [http://www.finereporthelp.com/download/SAP/sapjco3_linux_32bit/javadoc/com/sap/conn/jco/JCoContext.html](http://www.finereporthelp.com/download/SAP/sapjco3_linux_32bit/javadoc/com/sap/conn/jco/JCoContext.html)

# javascript - 点击时图像切换（功能）

> ID：13974225
> 
> 赞同：0
> 
> 时间：2012-12-20T14:23:51.890
> 
> 标签：javascript, jquery, html, click, toggle

我有一段 javascript 代码在切换时将#slidingDiv 向下移动。无论如何我可以在其中添加交换图像吗？我需要一个名为#clicktoggleimage 的图像来在同一函数中的图像“/images/show-less-arrow.jpg”和“/images/show-more-arrow.jpg”之间交换。

```
<script type="text/javascript">

$(document).ready(function() {

$("#slidingDiv").hide();
$(".show_hide").show();

$('.show_hide').click(function() {
    $("#slidingDiv").slideToggle(500);
    $('html,body').animate({
      scrollTop: $("#slidingDiv").offset().top + $('window').height()
    }, 1000);
});
});

</script> 
```

非常感谢

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:29:04.537

您可以像这样切换图像`src`：

```
$(document).ready(function() {
    var image = document.getElementById('clicktoggleimage');

    $("#slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function() {
        $("#slidingDiv").slideToggle(500);
        $('html,body').animate({
            scrollTop: $("#slidingDiv").offset().top + $('window').height()
        }, 1000);
        // New code here:
        image.src = (image.src.indexOf('show-more') > -1")
            ? image.src.replace("show-more", "show-less")
            : image.src.replace("show-less", "show-more");
    });
}); 
```

（该`? :`位是一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#JavaScript)，简写为:)

```
if(image.src == "/images/show-less-arrow.jpg"){
    image.src = "/images/show-more-arrow.jpg"
}else{
    image.src = "/images/show-less-arrow.jpg"
} 
```

**编辑：**

现在`src`将根据当前是否`src`包含更改`'show-more'`。如果是，`'show-more'`则替换为`'show-less'`，反之亦然。

**或者，**

[看看精灵。](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:41:44.970

您可以在 click 函数中更新图像的 src 属性。像这样的东西应该工作：

```
<script type="text/javascript">

$(document).ready(function() {

$("#slidingDiv").hide();
$(".show_hide").show();

$('.show_hide').click(function() {

    var srcless "/images/show-less-arrow.jpg";
    var srcmore = "/images/show-more-arrow.jpg";

    if($('#clicktoggleimage').attr("src") == srcless){
        $('#clicktoggleimage').attr("src",srcmore);
    }else{
        $('#clicktoggleimage').attr("src",srcless)
    }

    $("#slidingDiv").slideToggle(500);

    $('html,body').animate({
      scrollTop: $("#slidingDiv").offset().top + $('window').height()
    }, 1000);
});
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:33:54.153

使用属性的另一种方式

**HTML**

```
<img id="foo" src="/../img/logo.png">
<button id="btn">Flip</button> 
```

**JavaScript**

```
$("#btn").on("click", function() {
    $("#foo").attr("src", function(a,b){ 
        return (b === "/../img/logo.png") ? "http://www.google.com/textinputassistant/tia.png" : "/../img/logo.png";
    }); 
});​ 
```

示例：http: [//jsfiddle.net/AY2xX/](http://jsfiddle.net/AY2xX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:28:09.483

我建议使用`jQuery.toggleClass()`在元素上切换 CSS 类。然后定义 CSS 以使用精灵作为该元素的背景图像。您可以编写 JavaScript 来交换图像，但这种方式更干净，最终也更容易。

```
$('.show_hide').click(function() {

    // add this
    $(this).toggleClass("isShown");

    $("#slidingDiv").slideToggle(500);
    $('html,body').animate({
        scrollTop: $("#slidingDiv").offset().top + $('window').height()
    }, 1000);
}); 
```

CSS

```
.show_hide {
    background: url('images/showHideSprite.png') no-repeat 0px 0px;
}

.show_hide.isShown {
    /* change offset on sprite to show only the "shown" image */
    background-position: 20px 0px;
} 
```

# uitableview - AFNetworking - 滚动 UITableView 时在图像上淡化动画

> ID：13974226
> 
> 赞同：9
> 
> 时间：2012-12-20T14:23:52.723
> 
> 标签：uitableview, uiimageview, afnetworking, uianimation

我有一个表格视图，它使用来自 AFNetworking 的延迟加载和占位符图像来显示图像。我正在尝试完成一种在加载时从占位符淡入图像的方法。我的代码在这里有效，但如果在滚动表格时加载图像，一切看起来都很奇怪并且表格停止滚动。具有相同效果的水平滚动条也会发生同样的事情。

这是我在 cellForRowAtIndexPath 中使用的代码

```
 [cell.hotelImage setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:hotelImageUrl]]
                  placeholderImage:[UIImage imageNamed:@"placeholder.png"]
                           success:^(NSURLRequest *request , NSHTTPURLResponse *response , UIImage *image ){

                               if (request) {
                                   //Fade animation
                                   [UIView transitionWithView:self.view
                                                     duration:1.0f
                                                      options:UIViewAnimationOptionTransitionCrossDissolve
                                                   animations:^{
                                                       [cell.hotelImage setImage:image];
                                                   } completion:NULL];

                               }

                           }
                           failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){

                           }
 ]; 
```

一旦图像在缓存中，我正在使用 if(request) 来避免动画。

提前谢谢了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T23:30:26.873

而不是 self.view 试试这个 cell.hotelImage 这将工作:)

```
 [UIView transitionWithView:cell.hotelImage
   duration:1.0f
   options:UIViewAnimationOptionTransitionCrossDissolve
   animations:^{[cell.hotelImage setImage:image];} 
 completion:NULL]; 
```

# c# - 如何在 NetworkStream 字节数组中放置分隔符？

> ID：13974228
> 
> 赞同：7
> 
> 时间：2012-12-20T14:23:55.010
> 
> 标签：c#, .net, networkstream

我正在建立一种在服务器和客户端之间进行通信的方式。我目前的工作方式是，流的第一个字节将包含一个指示即将到来的内容，然后查找该请求的类，我可以确定请求的长度：

```
stream.Read(message, 0, 1)

if(message == <byte representation of a known class>)
{
    stream.Read(message, 0, Class.RequestSize);
} 
```

我很好奇如何处理类大小未知的情况，如果在读取已知请求后数据已损坏。

我在想我可以在流中插入某种分隔符，但由于一个字节只能在 0-255 之间，我不知道如何去创建一个唯一的分隔符。我想在流中放置一个模式来表示消息的结尾吗？我如何确定这种模式足够独特，不会被误认为是实际数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:27:35.633

对此有不同的做法。一种选择是首先发送类名的长度和可能的整个数据包的长度（例如，总是第一个字节）。这样您就可以读取该字节，然后再读取 n 个字节以获取类名。

通过这种方法，您最终不会阅读恶意客户端发送给您的*大量*内容，目的是对您的应用程序进行 DoS，并且您可以快速确定您的阅读内容是否足以处理数据包，或者它是否尚未完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:29:05.020

有一些低级字节特别用作分隔符。文本开始和文本结束的（十六进制）值分别为 0x02 和 0x03。你有标题开始加上传输结束，0x01和0x04；你可以使用这些。

# .htaccess - 从 .htaccess 更改版本会影响性能

> ID：13974231
> 
> 赞同：0
> 
> 时间：2012-12-20T14:24:03.807
> 
> 标签：.htaccess, web-hosting

我正在使用 hostgator Web 服务器来托管我的网站。要在我的网络服务器上使用 php 5.3，我需要将我的 .htaccess 编辑为

```
AddType application/x-httpd-php53 .php 
```

我只是想知道这样做是否会影响网络服务器的性能。我应该使用默认版本 5.2 还是使用重写继续使用 5.3。

# android - android将麦克风录制到ByteArray而不保存音频文件

> ID：13974234
> 
> 赞同：13
> 
> 时间：2012-12-20T14:24:15.937
> 
> 标签：android

对不起，我的英语不好 ：（

我为android应用程序启动我的项目，这个应用程序录制麦克风，如果我单击开始录制按钮，应用程序获取麦克风并将其写入文件，当我单击停止时，文件保存到SD卡中。

项目代码：

***输出文件***

```
OUTPUT_FILE = Environment.getExternalStorageState() + "/myaudio.3gp"; 
```

***开始录制***

```
public void startRecord() throws IOException{
    if (recorder != null)
    {
        recorder.release();
    }
    File outFile = new File(OUTPUT_FILE);
    if (outFile.exists())
    {
        outFile.delete();
    }

    recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setOutputFormat(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(OUTPUT_FILE);
    recorder.prepare();
    recorder.start();
} 
```

***停止录制***

```
public void stopRec(){
    recorder.stop();
} 
```

***PlaySound 录制文件***

```
public void playRecFile() throws IOException{
    mediaPlayer = new MediaPlayer();
    mediaPlayer.setDataSource(OUTPUT_FILE);
    mediaPlayer.prepare();
    mediaPlayer.start();

} 
```

我想获取录制的语音并将其放入变量 ByteArray 并在不将音频文件保存到 SD 卡的情况下播放

我有一个我想要的项目，但它是用 actionscript 3 编写的

```
import flash.media.*;
import flash.events.*;
import flash.utils.ByteArray;

var ch:SoundChannel
var mic:Microphone = Microphone.getMicrophone();

mic.addEventListener(SampleDataEvent.SAMPLE_DATA, micSampleDataHandler);
mic.addEventListener(ActivityEvent.ACTIVITY,onAct);

function onAct(evt:ActivityEvent):void
{
    trace(evt.activating,mic.activityLevel);
    if (!evt.activating)
    {
        if (soundBytes.length)
        {
            timerHandler();
        }
    }
}

var soundBytes:ByteArray = new ByteArray();
var soundO:ByteArray = new ByteArray();

function micSampleDataHandler(event:SampleDataEvent):void
{
    trace(event.data.length,event.data.bytesAvailable, soundBytes.length);
    while (event.data.bytesAvailable)
    {
        var sample:Number = event.data.readFloat();
        soundBytes.writeFloat(sample);
    }
}

function timerHandler():void
{
    mic.removeEventListener(SampleDataEvent.SAMPLE_DATA, micSampleDataHandler);
    soundBytes.position = 0;
    soundO.writeBytes(soundBytes);
    soundO.position = 0;
    soundBytes.position = 0;
    soundBytes.length=0;

    var sound:Sound= new Sound();
    sound.addEventListener(SampleDataEvent.SAMPLE_DATA, playbackSampleHandler);
    ch=sound.play();
    ch.addEventListener(Event.SOUND_COMPLETE,onSC)
    trace("OUTPUT",soundO.bytesAvailable);

}
function onSC(evt:Event):void
{
    trace("SOUND_COMPLETE");
}
function playbackSampleHandler(event:SampleDataEvent):void
{
    trace("SAMPLE_DATA: ",soundO.bytesAvailable)
    for (var i:int = 0; i < 8192; i++)
    {
        if (soundO.bytesAvailable < 4)
        {
         break;
        }
        var sample:Number = soundO.readFloat();
        event.data.writeFloat(sample);
        event.data.writeFloat(sample);      
    }
    if (soundO.bytesAvailable < 4 && soundO.position!==0)
    {
        mic.addEventListener(SampleDataEvent.SAMPLE_DATA, micSampleDataHandler);
        soundO.position=0
        soundO.length = 0;

        trace("END
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-03-12T17:13:31.453

# **看看这个答案！它与`MediaRecorder`not完全一致`AudioRecord`**

尝试使用以下解决方案将音频录制到字节数组中`MediaRecorder`：

```
 // Byte array for audio record
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    ParcelFileDescriptor[] descriptors = ParcelFileDescriptor.createPipe();
    ParcelFileDescriptor parcelRead = new ParcelFileDescriptor(descriptors[0]);
    ParcelFileDescriptor parcelWrite = new ParcelFileDescriptor(descriptors[1]);

    InputStream inputStream = new ParcelFileDescriptor.AutoCloseInputStream(parcelRead);

    MediaRecorder recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.AMR_NB);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(parcelWrite.getFileDescriptor());
    recorder.prepare();

    recorder.start();

    int read;
    byte[] data = new byte[16384];

    while ((read = inputStream.read(data, 0, data.length)) != -1) {
        byteArrayOutputStream.write(data, 0, read);
    }

    byteArrayOutputStream.flush(); 
```

我将此代码包装起来`AsyncTask`以开始执行。

另外，不要忘记运行以下代码来停止录制：

```
 recorder.stop();
    recorder.reset();
    recorder.release(); 
```

转换`byteArrayOutputStream`为`byte[]`使用`byteArrayOutputStream.toByteArray()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T14:33:27.340

使用以下类将 Recorded Mic 数据作为字节数组获取。您将获得数据作为缓冲区..尝试使用它..希望这会对您有所帮助..

```
class AudioRecordThread implements Runnable {
        @Override
        public void run() {
            int bufferLength = 0;
            int bufferSize;
            short[] audioData;
            int bufferReadResult;

            try {
                bufferSize = AudioRecord.getMinBufferSize(sampleAudioBitRate, 
                        AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);

                if (bufferSize <= 2048) {
                    bufferLength = 2048;
                } else if (bufferSize <= 4096) {
                    bufferLength = 4096;
                }

                /* set audio recorder parameters, and start recording */
                audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleAudioBitRate, 
                        AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferLength);
                audioData = new short[bufferLength];
                audioRecord.startRecording();
                Log.d(LOG_TAG, "audioRecord.startRecording()");

                isAudioRecording = true;

                /* ffmpeg_audio encoding loop */
                while (isAudioRecording) {
                    bufferReadResult = audioRecord.read(audioData, 0, audioData.length);

                    if (bufferReadResult == 1024 && isRecorderStart) {
                        Buffer realAudioData1024 = ShortBuffer.wrap(audioData,0,1024);

                    *********************************** 
                        recorder.record(realAudioData1024);
                        ***********************************

                    } else if (bufferReadResult == 2048 && isRecorderStart) {
                        Buffer realAudioData2048_1=ShortBuffer.wrap(audioData, 0, 1024);
                        Buffer realAudioData2048_2=ShortBuffer.wrap(audioData, 1024, 1024);
                        for (int i = 0; i < 2; i++) {
                            if (i == 0) {
        ***********************************                     
        recorder.record(realAudioData2048_1);
        ***********************************                      

                            } else if (i == 1) {
***********************************
recorder.record(realAudioData2048_2);
***********************************

                            }
                        }
                    }
                }

                /* encoding finish, release recorder */
                if (audioRecord != null) {
                    try {
                        audioRecord.stop();
                        audioRecord.release();

                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    audioRecord = null;
                }

                if (recorder != null && isRecorderStart) {
                    try {
                        recorder.stop();
                        recorder.release();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    recorder = null;
                }
            } catch (Exception e) {
                Log.e(LOG_TAG, "get audio data failed:"+e.getMessage()+e.getCause()+e.toString());
            }

        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T14:28:14.127

**我想获取录制的语音并将其放入变量 ByteArray 并在不将音频文件保存到 SD 卡的情况下播放**

使用[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)类将麦克风中的音频抓取到一个数组中，然后将其输入到[AudioTrack](http://developer.android.com/reference/android/media/AudioTrack.html)中。

# image - 尝试将图像添加到 GWT 模块

> ID：13974245
> 
> 赞同：0
> 
> 时间：2012-12-20T14:24:53.847
> 
> 标签：image, gwt

GWT 新手在这里。

我想在加载模块时将图像添加到我的 UI。我有以下代码

```
public void onModuleLoad()
{
    Image widget = new Image("images/AU-wp5.jpg");
    RootPanel.get("").add(widget);
} 
```

但是在调用 RootPanel.get("").add(widget); 时我得到一个空指针 图像存在于我的 /images 文件夹中。我的 get("") 方法中的 "" 字符串是否必须匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:29:13.160

是的。您必须将参数设置为 html 中元素的 id。

```
get("divid").add(widget); 
```

有关更多信息，请阅读[javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/RootPanel.html#get%28java.lang.String%29)

# xml - 如何在不替换单个空格的情况下修剪 XSLT 中的空间？

> ID：13974247
> 
> 赞同：17
> 
> 时间：2012-12-20T14:24:58.030
> 
> 标签：xml, xslt, xpath

该函数`normalize-space`用单个空格替换空格序列并修剪提供的字符串。我怎样才能只修剪字符串而不替换空格？有专有解决方案`orcl:left-trim`，但我正在寻找非专有解决方案。

**例子：**

```
<xsl:value-of select="trim(/Car/Description)"/> 
```

应该转

```
<car>
  <description>  To get more information look at:     www.example.com </description>
</car> 
```

进入

```
"To get more information look at:     www.example.com" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T14:49:33.280

仅使用 xslt 1.0 模板的解决方案：

```
<xsl:variable name="whitespace" select="'&#09;&#10;&#13; '" />

<!-- Strips trailing whitespace characters from 'string' -->
<xsl:template name="string-rtrim">
    <xsl:param name="string" />
    <xsl:param name="trim" select="$whitespace" />

    <xsl:variable name="length" select="string-length($string)" />

    <xsl:if test="$length &gt; 0">
        <xsl:choose>
            <xsl:when test="contains($trim, substring($string, $length, 1))">
                <xsl:call-template name="string-rtrim">
                    <xsl:with-param name="string" select="substring($string, 1, $length - 1)" />
                    <xsl:with-param name="trim"   select="$trim" />
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$string" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:if>
</xsl:template>

<!-- Strips leading whitespace characters from 'string' -->
<xsl:template name="string-ltrim">
    <xsl:param name="string" />
    <xsl:param name="trim" select="$whitespace" />

    <xsl:if test="string-length($string) &gt; 0">
        <xsl:choose>
            <xsl:when test="contains($trim, substring($string, 1, 1))">
                <xsl:call-template name="string-ltrim">
                    <xsl:with-param name="string" select="substring($string, 2)" />
                    <xsl:with-param name="trim"   select="$trim" />
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$string" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:if>
</xsl:template>

<!-- Strips leading and trailing whitespace characters from 'string' -->
<xsl:template name="string-trim">
    <xsl:param name="string" />
    <xsl:param name="trim" select="$whitespace" />
    <xsl:call-template name="string-rtrim">
        <xsl:with-param name="string">
            <xsl:call-template name="string-ltrim">
                <xsl:with-param name="string" select="$string" />
                <xsl:with-param name="trim"   select="$trim" />
            </xsl:call-template>
        </xsl:with-param>
        <xsl:with-param name="trim"   select="$trim" />
    </xsl:call-template>
</xsl:template> 
```

测试代码：

```
<ltrim>
    <xsl:call-template name="string-ltrim">
        <xsl:with-param name="string" select="'   &#10;   test  '" />
    </xsl:call-template>
</ltrim>
<rtrim>
    <xsl:call-template name="string-rtrim">
        <xsl:with-param name="string" select="'    &#10;    test  &#10;  '" />
    </xsl:call-template>
</rtrim>
<trim>
    <xsl:call-template name="string-trim">
        <xsl:with-param name="string" select="'    &#10;    test  &#10;  '" />
    </xsl:call-template>
</trim> 
```

输出：

```
<test>
    <ltrim>test  </ltrim>
    <rtrim>   
    test</rtrim>
    <trim>test</trim>
</test> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-02T07:11:20.980

normalize-space(actualSting) - 这样就可以了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T14:39:36.767

**使用[FXSL](http://fxsl.sf.net)（用于 XSLT 函数式编程的开源库，完全用 XSLT 编写）可以简单地编写**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:import href="trim.xsl"/>

  <xsl:output method="text"/>
  <xsl:template match="/*/description">
    '<xsl:call-template name="trim">
        <xsl:with-param name="pStr" select="."/>
    </xsl:call-template>'
  </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<car>
  <description>  To get more information look at:     www.example.com </description>
</car> 
```

**产生了想要的正确结果：**

```
'To get more information look at:     www.example.com' 
```

* * *

**[`trim`](http://fxsl.cvs.sourceforge.net/viewvc/fxsl/fxsl-xslt2/f/func-trim.xsl?revision=1.1&view=markup&sortby=file)模板如何**工作？

它修剪左前导空格，然后反转生成的字符串并修剪其前导空格，然后最终反转生成的字符串。

* * *

**二、XPath 2.0 解决方案**：

**使用**：

```
replace(replace(/*/description, '^\s*(.+?)\s*$', '$1'), '^ .*$', '') 
```

**这是一个基于 XSLT - 2.0 的验证：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     "<xsl:sequence 
      select="replace(replace(/*/description, '^\s*(.+?)\s*$', '$1'), '^ .*$', '')"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（上图）时，将评估 XPath 表达式并将此评估的结果复制到输出：**

```
 "To get more information look at:     www.example.com" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-26T15:46:24.440

XSLT1 的一个非常简短的解决方案：

```
<xsl:template name="trim">
            <xsl:param name="str"/>

            <xsl:choose>
                <xsl:when test="string-length($str) &gt; 0 and substring($str, 1, 1) = ' '">
                    <xsl:call-template name="trim"><xsl:with-param name="str"><xsl:value-of select="substring($str, 2)"/></xsl:with-param></xsl:call-template></xsl:when>
                <xsl:when test="string-length($str) &gt; 0 and substring($str, string-length($str)) = ' '">
                    <xsl:call-template name="trim"><xsl:with-param name="str"><xsl:value-of select="substring($str, 1, string-length($str)-1)"/></xsl:with-param></xsl:call-template></xsl:when>
                <xsl:otherwise><xsl:value-of select="$str"/></xsl:otherwise>
            </xsl:choose>
        </xsl:template> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-08-27T18:46:44.547

如果中间没有空格，则可以简单地使用：

```
translate(/Car/Description,' ','') 
```

# ruby-on-rails - 为什么我的 ruby 测试没有找到访问？

> ID：13974249
> 
> 赞同：2
> 
> 时间：2012-12-20T14:25:06.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capybara, minitest

我正在使用 minitest 和 rails 和 capybara，下面的测试给了我这个错误......

```
 undefined method `visit' for #<Page:0x007f8bf3697630>
    STDERR:
    Exception `NoMethodError' at /Users/trace/.rvm/gems/ruby-1.9.3-p194@application.1/gems/activemodel-3.1.8/lib/active_model/attribute_methods.rb:385:in `method_missing'
    /Users/trace/.rvm/gems/ruby-1.9.3-p194@application.1/gems/activerecord-3.1.8/lib/active_record/attribute_methods.rb:60:in `method_missing'
    /Users/trace/.rvm/gems/ruby-1.9.3-p194@application.1/gems/capybara-2.0.1/lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
    test/support/utilities.rb:2:in `sign_in_user'
    test/integration/pages_intergration_test.rb:12:in `block (4 levels) in <top (required)>'
    /Users/trace/.rvm/gems/ruby-1.9.3-p194@application.1/gems/mocha-0.9.12/lib/mocha/integration/mini_test/version_201_to_202.rb:27:in `run' 
```

这是我的文件`test/integration/pages_intergration_test.rb`

```
require "minitest_helper"

describe "Pages integration" do
  let(:page) { FactoryGirl.create(:page }

  describe "Page Management tool" do

    describe "Visiting a page" do
      let(:user) { FactoryGirl.create(:user)}
      it "Should see the welcome message" do
        sign_in_user(admin_user)
        should have_content("Welcome")
      end
    end
  end
end 
```

和我的档案`test/support/utilities.rb`

```
def sign_in_user(user)
  visit root_path
  fill_in "EMAIL ADDRESS",    with: user.email
  fill_in "PASSWORD",         with: user.password
  click_button "SIGN IN"
end 
```

这是我的 minitest.rb ...以防万一我在这里做错了什么

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)

require "minitest/autorun"
require "minitest/rails"
require "minitest/rails/capybara"
require "active_support/testing/setup_and_teardown"
require 'turn'

require 'factory_girl'

Dir[Rails.root.join("test/support/**/*.rb")].each {|f| require f}

Dir.glob(File.dirname(__FILE__) + "/factories/*").each do |factory|
  require factory
end

require 'database_cleaner'
DatabaseCleaner.strategy = :truncation

class MiniTest::Rails::ActiveSupport::TestCase
  before :each do
    DatabaseCleaner.start
  end

  after :each do
    DatabaseCleaner.clean
  end
end

class IntegrationTest < MiniTest::Spec
  include Rails.application.routes.url_helpers
  include Capybara::DSL

  register_spec_type(/integration$/, self)

  before :each do
    DatabaseCleaner.start
  end

  after :each do
    DatabaseCleaner.clean
    Capybara.reset_sessions!
    Capybara.use_default_driver
  end
end

class HelperTest < MiniTest::Spec
  include ActiveSupport::Testing::SetupAndTeardown
  include ActionView::TestCase::Behavior
  register_spec_type(/Helper$/, self)

  before :each do
    DatabaseCleaner.start
  end

  after :each do
    DatabaseCleaner.clean
  end
end 
```

关于问题的任何想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:57:43.177

Capybara 的最新版本（2.0 分支）有一些需要考虑的变化。这是[变更日志](https://gist.github.com/3980553)中的相关部分（相关段落以粗体显示）：

> 值得注意的是，我们将 Capybara 假设您的规范在 RSpec 中运行的 :type 更改为 :feature （以前是 :request）。规格/功能的最新版本。或者，您可以使用 Capybara Feature DSL（功能而不是描述），它应该可以在没有任何额外调整的情况下工作。**如果您看到诸如未定义方法访问之类的错误，那么您可能遇到了这个问题。**如果您将模块包含在 :request 规范中，您可能需要将其更改为 :feature。

因此，有可能将其更改`describe`为`feature`可以纠正问题。

# android - 在滚动视图中时，LinearLayout 的背景会消失，具体取决于 linearLayout 的高度

> ID：13974253
> 
> 赞同：0
> 
> 时间：2012-12-20T14:25:16.913
> 
> 标签：android, android-fragments, scrollview, android-linearlayout

**解决** 了这个问题是通过在不同的平板电脑上调试我的应用程序来“解决”的。我使用的第一台平板电脑是三星 Tab 2 10.1。现在我使用的是三星 Note 10.1，它运行良好。我很乐意从遇到相同问题的任何人那里获得一些反馈，以了解更多信息。

**发布** 这是我在这个论坛上的第一篇文章。我正在为 android 开发一个应用程序，我正面临一个**具有挑战性的问题**。我还没有找到与这个问题相关的任何帖子，因为我不知道如何解决它，所以我决定在这里解释一下。假设这是我给你的圣诞礼物；）

好的，这就是我要做的。基本上，我用这个 xml 文件填充了一个片段：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >
    <ScrollView
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" >
        <LinearLayout
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:orientation="vertical" >
            <LinearLayout style="@style/LayoutDetailsStep" >
                <TextView
                   style="@style/textkey"
                   android:text="Name:" />
                <TextView
                   android:id="@+id/name"
                   style="@style/editkey" />
            </LinearLayout>
            <LinearLayout style="@style/LayoutDetailsStep" >
                <TextView
                   style="@style/textkey"
                   android:text="Description:" />
                <TextView
                   android:id="@+id/description"
                   style="@style/editkey" />
            </LinearLayout>
            <LinearLayout style="@style/LayoutDetailsStep" >
                <TextView
                   style="@style/textkey"
                   android:text="SOP:" />
                <WebView
                   android:id="@+id/sop"
                   style="@style/editkey" />
            </LinearLayout>
            <LinearLayout style="@style/LayoutDetailsStep" >
                <TextView
                   style="@style/textkey"
                   android:text="Notes:" />
                <TextView
                   android:id="@+id/notes"
                   style="@style/editkey" />
            </LinearLayout>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

所以基本上，我的片段由一个 ScrollView 组成，该 ScrollView 由 4 个 LinearLayouts 组成，每个包含一个 TextView 和一个 TextView/WebView。我将样式*LayoutDetailsS​​tep*应用于每个 LinearLayout 这是这个：

```
 <style name="LayoutDetailsStep"  >
     <item name="android:layout_width">fill_parent</item>
     <item name="android:layout_height">wrap_content</item>
     <item name="android:orientation">horizontal</item>
     <item name="android:background">@drawable/round_border</item>
     <item name="android:layout_marginLeft">20dp</item>
     <item name="android:layout_marginRight">20dp</item>
     <item name="android:layout_marginTop">5dp</item>
     <item name="android:layout_marginBottom">5dp</item>
 </style> 
```

该样式包含一个背景 *round_border* 这是这个：

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
        <corners android:radius="20dp"/>
        <padding android:left="10dp" android:right="10dp" android:top="10dp" android:bottom="10dp" />
        <solid android:color="#ffffffff" />
        <stroke android:width="3dp" android:color="#000000"/>
    </shape> 
```

当一切顺利时，我有一堆漂亮的 4 LinearLayout 和漂亮的圆形边框。只要 LinearLayout 中的项目很小，一切都很好。它看起来像这样：[正常时的图像](http://www.hostingpics.net/viewer.php?id=204790Screenshot20121221094503.jpg)。

当项目大于片段本身的大小时，就会出现问题。**当 WebView/TextView 的高度（两者都有问题）大于 Fragment 的高度时，背景消失**。它看起来像这样：[背景消失了](http://www.hostingpics.net/viewer.php?id=857140Screenshot20121221094534.jpg)

在实践中，TextView 非常小，并且不会发生此问题。但是我可以显示比较大的WebView，这会导致背景消失，这意味着WebView的LinearLayout周围没有圆形边框。 **我坚持认为它不是特定于 WebView，如果 TextView 足够大，我也会遇到同样的问题。**

如果有人知道发生了什么...我很乐意阅读您的建议：D

戈尔达克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:26:04.320

显然它已在 4.0.4 中修复。

# excel - VBA：下载文件

> ID：13974255
> 
> 赞同：0
> 
> 时间：2012-12-20T14:25:18.140
> 
> 标签：excel, file, vba, download

我正在尝试从 Internet 下载 Excel 文件，然后从中提取数据。问题是我没有收到任何错误，但下载的文件只有 1kb 大小。提取位有效，但文件为空。实际文件大小为 350KB。

```
 Sub ExtractDataTest()

    Dim FileNum As Long
    Dim FileData() As Byte
    Dim MyFile As String
    Dim WHTTP As Object

    On Error Resume Next
        Set WHTTP = CreateObject("WinHTTP.WinHTTPrequest.5")
        If Err.Number <> 0 Then
            Set WHTTP = CreateObject("WinHTTP.WinHTTPrequest.5.1")
        End If
    On Error GoTo 0

    MyFile = "http://enhanced1.sharepoint.hs.com/teams/"

    WHTTP.Open "GET", MyFile, False
    WHTTP.Send
    FileData = WHTTP.ResponseBody
    Set WHTTP = Nothing

    If Dir("C:\xampp\htdocs\test", vbDirectory) = Empty Then MsgBox "No folder exist"

    FileNum = FreeFile
    Open "C:\xampp\htdocs\test\DE_TrackingSheet.xlsx" For Binary Access Write As #FileNum
        Put #FileNum, 1, FileData
    Close #FileNum

    Dim FilePath$, Row&, Column&, Address$

 'change constants & FilePath below to suit
     '***************************************
    Const FileName$ = "DE_TrackingSheet.xlsx"
    Const SheetName$ = "Open"
    Const NumRows& = 50
    Const NumColumns& = 20
    FilePath = ("C:\xampp\htdocs\test\")
     '***************************************

    DoEvents
    Application.ScreenUpdating = False
     If Dir(FilePath & FileName) = Empty Then
        MsgBox "The file " & FileName & " was not found", , "File Doesn't Exist"
        Exit Sub
        End If
    For Row = 1 To NumRows
        For Column = 1 To NumColumns
            Address = Cells(Row, Column).Address
            Cells(Row, Column) = GetData(FilePath, FileName, SheetName, Address)
            Columns.AutoFit
        Next Column
    Next Row
    ActiveWindow.DisplayZeros = False
End Sub

Private Function GetData(Path, File, Sheet, Address)
    Dim Data$
    Data = "'" & Path & "[" & File & "]" & Sheet & "'!" & _
    Range(Address).Range("A1").Address(, , xlR1C1)
    GetData = ExecuteExcel4Macro(Data)
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:21:29.900

这可能是数据是二进制的事实；

```
....
WHTTP.Open "GET", MyFile, False
WHTTP.Send

Set strm = CreateObject("ADODB.Stream")
With strm
    .Type = 1
    .Open
    .Write WHTTP.ResponseBody
    .SaveToFile "C:\null\df.xlsx", 2 '//2==overwrite
End With
Set WHTTP = Nothing 
```

# bash - $GEM_PATH 通常设置在哪里？

> ID：13974256
> 
> 赞同：7
> 
> 时间：2012-12-20T14:25:19.010
> 
> 标签：bash, gem, rvm

$GEM_PATH 设置在哪里？

它显然是这样设置的：

```
echo $GEM_PATH
/Users/snowcrash/.rvm/gems/ruby-1.9.2-p318:/Users/snowcrash/.rvm/gems/ruby-1.9.2-p318@global 
```

但这不是我所期望的，例如

```
[app (master)]$ grep GEM_PATH ~/.bash_profile
[app (master)]$ grep GEM_PATH ~/.bashrc
[app (master)]$ 
```

编辑

也不在这里：

```
vim config/environment.rb 

# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
Accounts::Application.initialize! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:33:35.587

**（已编辑）**其他一些需要检查的地方`GEM_PATH`：

*   `config/environment.rb`
*   `/etc/profile`
*   `/etc/profile.d`
*   `/etc/bashrc`

另见：[http ://www.linuxfromscratch.org/blfs/view/6.3/postlfs/profile.html](http://www.linuxfromscratch.org/blfs/view/6.3/postlfs/profile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:11:49.780

当您加载默认红宝石`source /path/to/rvm/scripts/rvm`，并设置其他设置默认红宝石数量`GEM_HOME`，`GEM_PATH`以及`PATH`

# linux - Eclipse 错误弹出窗口的背景颜色

> ID：13974257
> 
> 赞同：2
> 
> 时间：2012-12-20T14:25:22.920
> 
> 标签：linux, eclipse

当您从 Eclipse 中将鼠标悬停在源代码编辑器中的错误上时，它将显示一个小的覆盖层，建议如何修复它。这对于导入类非常有用，我经常使用它。然而，在 Linux 上，配色方案是可怕的，它在深灰色背景上的蓝色字迹很薄，而且它的边界无法阅读。

如何从 Eclipse 中解决这个问题？到目前为止，我看到的所有“解决方案”都涉及修改您的 gtk 主题。这有点荒谬（为什么我要破坏其他所有东西来修复一个错误的程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:02:49.027

第一个建议 -`Ctrl-Shift-O`用于插入正确的导入。然后稍后，设置`On Save Actions`为自动插入正确的导入。然后，当您编写新代码时，它`Ctrl-S`还会自动再次编译代码并向您显示任何编译问题！非常有帮助。

第二 - 使用[Eclipse 主题！](http://eclipsecolorthemes.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:46:08.257

我终于找到了解决方案，我想我会把它贴在这里，以防其他人发现它有用。

我创建了一个自定义 gtkrc 文件，其中包含以下内容

```
style "eclipse-tooltips"
{
    xthickness  = 8
    ythickness  = 4

    bg[NORMAL]    = {0.8, 0.8, 0.8}
    fg[NORMAL]    = {0.0, 0.0, 0.0}
    bg[SELECTED]  = {0.8, 0.8, 0.8}
}
widget "gtk-tooltip*"       style "eclipse-tooltips" 
```

然后开始使用 Eclipse

```
GTK2_RC_FILES=/path/to/custom/gtkrc eclipse 
```

# jquery - 在弹出窗口关闭之前重置 jQuery Mobile 选择菜单

> ID：13974260
> 
> 赞同：1
> 
> 时间：2012-12-20T14:25:36.867
> 
> 标签：jquery, select, mobile, initialization, reset

这是场景 - 我有两个 jQuery Mobile 弹出窗口，其中只有一个在给定时间显示（而另一个可能尚未显示）。这些弹出窗口中的每一个都有给定不同的虚拟类的 jQuery Mobile 选择，以帮助我找到它们。我需要做的是 - 在弹出窗口关闭之前（我通过 popup('close') 以编程方式这样做）我想重置选择以显示它们的第一个值（这是默认值）。容易，我想。刚发出

```
$('.selector').val(0).selectmenu('refresh') 
```

但是，这样做会导致错误无法在初始化之前调用 selectmenu 的方法。我想这是因为“其他”弹出窗口也具有相同类的选择，并且它们当时还没有被初始化。

对另一个选择使用不同的虚拟类并不是一个真正的选择，因为我对两个密切相关的弹出窗口使用相同的事件处理代码。

我也试过

```
$(popupid).find('.selector').val(0).selectmenu('refresh') 
```

但结果相似。当然，有一种可靠的方法可以获取给定类的所有子项并对其进行处理！我以为我只是用 find 做的，但看起来事实并非如此。另一种选择是确定在初始查询后返回的每个项目是否已初始化，但这似乎也不太容易。我非常感谢对此提供一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:51:14.687

我似乎已经养成了回答自己问题的习惯！这是解决方案

回顾一下

*   您定义了两个或多个弹出窗口，并且每个弹出窗口都使用一个或多个选择，这些选择被设置为
*   一个。大屏幕上的 jQuery Mobile 选择和 b。小屏幕上的 MobiScroll 选择
*   通过虚拟类声明可以轻松识别选择
*   当弹出窗口关闭时，您要确保选择返回显示他们的第一个选项

为了更具体，这里有一个例子

```
<div data-role='popup' id='p_taqa1618A'>
  <select id = 'r_taqa1618A' class='sppp' data-role='none' data-mini='true'>
   <option value='1'>One</option>
   <option value='2'>Two</option>
   <option value='3'>Three</option>
   <option value='4'>Four</option>
   <option value='5'>Five</option>
  </select>
  //other controls inside this popup 
```

```
<div data-role='popup' id='p_taqa1618B'>
  <select id = 'r_taqa1618A' class='sppp' data-role='none' data-mini='true'>
   <option value='1'>Eins</option>
   <option value='2'>Zwei</option>
   <option value='3'>Drei</option>
   <option value='4'>Vier</option>
   <option value='5'>Funf</option>
  </select>
  //other controls inside this popup 
```

在任何给定时间，只有 taqa1618A 或 taqa1618B 这两个弹出窗口之一将打开。在那个时候，另一个可能已经或可能没有以前打开和关闭。

最后一句话的结果是天真地尝试通过重置选择

$('.sppp').val('1').selectmenu('refresh') 将不起作用 - jQuery 会抱怨您正在尝试刷新尚未初始化的选择菜单。在小屏幕上使用的滚动版本也可以。所以这是可行的解决**方案**。

在以编程方式关闭弹出窗口之前，您发出

```
if (600 < $(window).width())
{
 $(popid).find('.sppp').filter('select').val('1').selectmenu('refresh');
} else
{
 $(popid).find('.sppp').filter('select').scroller('setValue','1',true);
} 
```

其次是

```
$(popid).popup('close'); 
```

这里有许多微妙的问题，但最需要指出的可能是这一点——升级后的控件最终可能会创建具有相同类的其他元素。例如，当 HTML 选择被升级为 jQuery Mobile 选择菜单时，jQM 添加一个具有相同类的跨度 - 在本例中为 sppp。

这就是为什么您需要通过 filter('select') 过滤 find('.sppp') 结果的原因

我在执行此操作的过程中发现了一个有趣的事实，这很可能是一个 jQM 错误 - 最后一行

```
$(popid).popup('close') 
```

即使提供的 popid 是错误的，它也能正常工作。

# asp.net - 没有数据时，Detailsview 不显示文本框

> ID：13974268
> 
> 赞同：0
> 
> 时间：2012-12-20T14:26:23.897
> 
> 标签：asp.net, ms-access, detailsview

我使用 DetailsView 仅用于插入数据，用于选择、更新和删除我使用 Gridview。因此，当表中没有数据时，我看不到插入新数据的文本框，如何解决这个问题？任何帮助表示赞赏！

详情查看代码

```
 <asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" DefaultMode="Insert" OnItemInserted= "Inserted" 
              AutoGenerateInsertButton="True" CellPadding="4" DataKeyNames="Name, Software, License Number" AutoGenerateRows="true" 
              DataSourceID="AccessDataSource1" ForeColor="#333333" 
        GridLines="None">
              <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
              <CommandRowStyle BackColor="#E2DED6" Font-Bold="True" />
              <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
              <FieldHeaderStyle BackColor="#E9ECF1" Font-Bold="True" />
              <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
              <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
              <EditRowStyle BackColor="#999999" />
              <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
          </asp:DetailsView>
</asp:Panel>

<asp:AccessDataSource ID="AccessDataSource1" runat="server" 
        DataFile="~/App_Data/Test.mdb"
         SelectCommand="SELECT * FROM [Softwares]"               
         InsertCommand = "INSERT INTO Softwares ([Name],[Softwares],[License Number],[Software Version],[Expiration Date],[Notes]) 
         VALUES ([WhichName],[WhichSoft],[WhichLice],[WhichSoftVer],[WhichExp],[WhichNotes])"           
        UpdateCommand="UPDATE [Softwares] SET [Software Version] = ?,
           [Expiration Date] = ?,[Notes] = ? WHERE [Name]=? AND [Softwares] = ? AND [License Number] = ? "                
            DeleteCommand = "DELETE FROM [Softwares] WHERE [Name]=? AND  [Softwares] = ? AND [License Number] = ?" >          

            <InsertParameters>
                   <asp:Parameter Name="Name" Type="String" />
                    <asp:Parameter Name="Softwares" Type="String" />
                     <asp:Parameter Name="License Number" Type="String" />
                      <asp:Parameter Name="Software Version" Type="String" />
                       <asp:Parameter Name="Expiration Date" Type="String" />
                       <asp:Parameter Name="Notes" Type="String" />
            </InsertParameters>

            <UpdateParameters>   
                    <asp:Parameter  Name="Software Version"  Type="String"/>
                    <asp:Parameter  Name="Expiration Date"  Type="String"/>
                    <asp:Parameter  Name="Notes"  Type="String"/>
                    <asp:Parameter  Name="Name" Type="String" />
                    <asp:Parameter  Name="Softwares"  Type="String"/>
                    <asp:Parameter  Name="License Number"  Type="String"/>                                                               
                </UpdateParameters>

            <DeleteParameters>
                    <asp:Parameter  Name="Name" Type="String" />
                    <asp:Parameter  Name="Softwares"  Type="String"/>
                    <asp:Parameter  Name="License Number"  Type="String"/> 
                </DeleteParameters>                     
    </asp:AccessDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:39:24.113

这是一个很好的教程。按照本教程，您应该能够获得所需的一切。

[http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/using-templatefields-in-the-detailsview-control-cs](http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/using-templatefields-in-the-detailsview-control-cs)

# java - 注册服务并寻找服务

> ID：13974271
> 
> 赞同：3
> 
> 时间：2012-12-20T14:26:30.970
> 
> 标签：java, osgi

我是 OSGI 新手，我想了解如何注册服务？它总是通过`BundleContext`object in`Activator`吗？有没有其他可用的方法？

假设我有一个接口`IService`，并且有两个实现`ServiceImpl1`，并且`ServiceImpl2`在同一个包中，我将它们注册如下。

```
context.registerService(IService.class.getName(), new ServiceImpl1(), props);
context.registerService(IService.class.getName(), new ServiceImpl2(), props); 
```

但令人困惑的是我如何专门要求特定的服务实现？

```
serviceImplObject = (IService) dictionaryServiceTracker.getService();</pre> 
```

我不确定在这种情况下我会得到哪种实现。另外我没有看到任何选项来设置我需要什么类型的服务实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:30:56.067

以声明方式注册和使用服务有其他选择。您可以使用[声明式服务 (DS)](http://wiki.osgi.org/wiki/Declarative_Services)或[蓝图服务](http://www.ibm.com/developerworks/opensource/library/os-osgiblueprint/)。还有其他的，但这些是实际规范的一部分。

至于您当前使用的程序化方法。您必须在注册时使用属性，并在创建跟踪器时使用过滤器。

```
Map<String, String. prop1 = new HashMap<String, String>();
prop1.put("name", "primary");
context.registerService(IService.class.getName(), new ServiceImpl1(), prop1);

Map<String, String. prop2 = new HashMap<String, String>();
prop1.put("name", "secondary");
context.registerService(IService.class.getName(), new ServiceImpl2(), props); 
```

现在进行查找。

```
ServiceTracker primaryTracker = new ServiceTracker(bundleContext, "(&(objectClass=my.service.Service)(name=primary))", null);
ServiceTracker secondaryTracker = new ServiceTracker(bundleContext, "(&(objectClass=my.service.Service)(name=secondary))", null); 
```

**（关于排名的更新 - 感谢 Neil）** 如果没有过滤器，您将根据其排名和服务 ID 获得服务。如果您在动态环境中运行（这些服务正在停止和重新启动），那么每次查找服务时可能会获得不同的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:26:26.547

这是注册服务的简单方法。它使用声明式服务和 bnd 提供的注释：

```
@Component
public class ServiceImpl implements IService {
    // ...
} 
```

现在 ServiceImpl 类将被实例化并作为服务发布。对于使用服务，它看起来像这样（在最简单的情况下）：

```
@Component
public class ServiceImpl2 {
    // ...

    @Reference
    public void setFoo(IService foo) {
        // ..
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T08:16:29.930

切勿使用活化剂。带有注释的 DS 组件（参见 Neil 的回答）是迄今为止 OSGi 中的最佳实践。此外，DS 不再需要服务跟踪器。如果我必须再做一次 OSGi，就没有激活器，没有服务跟踪器，只有 DS。

现在关于服务选择。最糟糕的 OSGi 组件是那些想聪明并选择特定实现的组件。如果你对 IService 有依赖，那么你不应该关心你得到了什么实现。如果您确实需要 Impl1，请指定对 Impl1 的依赖项。如果您尝试做出这些决定，您的组件的可重用性就会大大降低。通过删除这种代码，我在公司中显着提高可重用性的次数令人惊讶。

DS 最酷的方面之一是它允许部署者（控制盒子的人）决定哪些服务应该绑定到谁。由于这些人对他们的世界有更多的了解，因此您作为开发人员将其留给他们。

在 DS 中控制服务绑定的 OSGi 机制是通过配置管理。您可以为组件注册的服务设置引用（依赖项）和排名（或属性）的目标过滤器。因此，对于 DS，这成为一个可配置的决定。

同样，我强烈建议终止所有这些选择代码，除非进行选择的信息确实是您域的一部分。在这种情况下，获取所有服务并在绑定方法中过滤它们。

# ssis - SSIS 中的事务

> ID：13974272
> 
> 赞同：1
> 
> 时间：2012-12-20T14:26:31.443
> 
> 标签：ssis

我需要在包级别进行交易。我的包中有嵌套序列容器，如果我的控制流中的任何任务失败，我希望我的包回滚。实现这一点的最佳解决方案是什么。我知道如何设置事务“支持”/“必需”等，但谁能帮我弄清楚什么是最好的设置，尤其是当我有嵌套序列容器并希望我的包作为一个事务运行时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:25:08.330

除非我遗漏了什么，否则您只需要`TransactionOption=Required`在包级别和`Supported`所有任务上进行设置。

# asp.net - 自定义输出缓存提供程序

> ID：13974275
> 
> 赞同：1
> 
> 时间：2012-12-20T14:26:47.883
> 
> 标签：asp.net, asp.net-mvc, utc, outputcache

我通过`OutputCacheProvider`在 ASP.NET MVC 应用程序中实现类来创建自定义输出缓存提供程序。

在以下方法中，

```
public override object Add(string key, object entry, DateTime expiryDate)
{
   // 
}

public override void Set(string key, object entry, DateTime expiryDate)
{
  //
} 
```

是`expiryDate`UTC 还是服务器时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:29:33.783

[根据 msdn](http://msdn.microsoft.com/en-us/library/system.web.caching.outputcacheprovider.add.aspx)，它是一个**utcExpiry**

（OutputCacheProvider.Add 方法）

```
public abstract Object Add(
    string key,
    Object entry,
    DateTime utcExpiry
) 
```

# elasticsearch - 在 Elasticsearch 中建模父/子关系（产品/产品变体）

> ID：13974277
> 
> 赞同：4
> 
> 时间：2012-12-20T14:26:49.340
> 
> 标签：elasticsearch

使用 ES（或 Solr）对产品变体进行建模让我大吃一惊

考虑（人为的例子）：

*   不同的产品（比如 T 恤）
*   每个产品都有一组属性（productid、name、desc、brand、color、popularity）
*   每个产品都有一组具有属性的产品变量（productvariantid（productid++size 的组合）、productid、size、availability、price）

这似乎是产品和产品变体之间的标准父/子关系。所以我想在ES中这样建模。

我希望能够做到以下几点：

*   A. 查询产品变量（并返回所有属性）。无需返回 product-properties，productvariant 属性就足够了。

*   B. 每个用户查询都受到限制，因此每个产品最多匹配 1 个 productvariant（在上面的示例中，这意味着我们限制 productvariant.size）

*   C. 过滤价格。

*   D. 过滤产品的某些特性

*   E. 按价格订购

*   F. 对产品属性的排序，如受欢迎程度，或 2 的组合。

*   G. productvariant.price 的方面

*   H. 产品的多个属性方面（父级）

使用父/子文档和`has_parent`ES 执行此操作：**AE + G**是可能的。

但是，**F**和**H**怎么样？我已经研究`_scope`了方面（尽管我承认我并没有 100% 理解可能性）和所有其他想到的东西，但我没有看到一个明显的解决方案来显示产品属性的方面并且能够与 一起按它们排序`has_parent`。

我已经尝试过其他东西（在纸上） - has_child -> 运气不好需要返回变体信息 - 嵌入式文档（产品内部的变体）并返回具有所有变体的整个产品。只是感觉很笨拙。此外，我很确定我不能以这种方式考虑/订购价格。

非常感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T20:46:43.790

我在墙上撞了很长时间，试图让类似的计划奏效。我的方案是产品/供应商关系（由多个供应商销售的单一产品，可能不同的描述/价格/可用性）。

ES 中的 Parent->Child 映射现在不是很健壮或易于使用。即使你得到了一些工作，你也会很快遇到边缘情况，这实际上是不可能的，因为 ES 不支持它。

我认为您最好的选择是自己管理父->子映射并将文档存储在自己的索引中。产品有一个 ID，然后作为 Product_ID 存储在 ProductVariant 文档中。这实际上是 ES 在内部存储父->子关系的方式。

在实践中，您查询“顶级”索引（产品），然后使用 Product_ID 字段上的过滤器对 ProductVariant 的索引执行第二次查询。

维护起来有点麻烦，但灵活得多。至少在 ES 获得更好的 Parent->Child 能力之前

# python - igraph：为什么 add_edge 函数比 add_edges 慢？

> ID：13974279
> 
> 赞同：8
> 
> 时间：2012-12-20T14:26:59.353
> 
> 标签：python, igraph

我很惊讶：

```
import igraph
import random, time
start_time = time.time()
G = igraph.Graph(directed = True)
G.add_vertices(10000)
for i in range(30000):
   G.add_edge(random.randint(0,9999), random.randint(0,9999))
print "done in " + str(int(time.time() - start_time)) + " seconds" 
```

返回在 63 秒内完成

尽管

```
import igraph
import random, time
start_time = time.time()
G = igraph.Graph(directed = True)
G.add_vertices(10000)
edges = []
for i in range(30000):
    edges += [(random.randint(0,9999), random.randint(0,9999))]
G.add_edges(edges)
print "done in " + str(int(time.time() - start_time)) + " seconds" 
```

返回在 0 秒内完成。项目中有人知道为什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T16:01:07.890

原因是 igraph 在 C 层使用索引边列表作为其数据结构。索引可以在恒定时间内查询特定顶点的邻居。如果您的图形很少更改，这很好，但是当修改操作比查询频繁得多时，它会成为一种负担，因为每当您添加或删除一条边时，您都必须更新索引。因此，每次调用`add_edge`都会使 igraph 重新索引其内部数据结构。好处是，如果您无论如何都必须重建索引，您也可以使用`add_edges`大致相同的成本添加许多边。因此，在您的第一个代码示例中，您重建索引 30000 次，而在第二个示例中，您只重建一次索引。

顺便说一句，使用`Graph.Erdos_Renyi(n=10000, m=30000)`.

# python - python-2.7 timeit 函数崩溃

> ID：13974280
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:27:03.180
> 
> 标签：python, crash, ipython, timeit

出于某种原因，Python-2.7`timeit`函数在以下示例中崩溃：

```
a,b = 0,0
timeit a=b                  # ok: 10000000 loops, best of 3: 50.9 ns per loop
timeit if a==a+b: pass      # ok:  1000000 loops, best of 3: 129 ns per loop
timeit a=a+b                # crashes!

Traceback (most recent call last):
UnboundLocalError: local variable 'a' referenced before assignment 
```

显然，我可以分配给（第一个示例），我可以`a`比较（第二个示例），那么为什么我不能运行第三个示例？！？！当然，正在计时的声明本身就是完美的……`a``a+b`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:32:35.327

`timeit`实际上是一个函数，但是一些 python 解释器可以让你用一个**语句**的语法来使用它，比如`IPython`, 但它实际上是一个函数。

因此，`a==a+b`它实际上将`a`and`b`视为全局变量，因此没有错误，因为它可以获取全局`a`and `b`。

但是`a=a+b`它被认为`a`是局部变量并且`b`仍然是全局的，所以它会引发错误，因为一旦 python 在函数中看到赋值，它就会认为它是一个局部变量。

它相当于：

```
In [7]: def func1():
    a==a+b
   ...:     

In [8]: def func():
    a=a+b
   ...:     

In [9]: dis.dis(func1)
  2           0 LOAD_GLOBAL              0 (a)
              3 LOAD_GLOBAL              0 (a)
              6 LOAD_GLOBAL              1 (b)
              9 BINARY_ADD          
             10 COMPARE_OP               2 (==)
             13 POP_TOP             
             14 LOAD_CONST               0 (None)
             17 RETURN_VALUE        

In [10]: dis.dis(func)
  2           0 LOAD_FAST                0 (a)   # but there's nothing to load, so Error
              3 LOAD_GLOBAL              0 (b)
              6 BINARY_ADD          
              7 STORE_FAST               0 (a)
             10 LOAD_CONST               0 (None)
             13 RETURN_VALUE        

In [11]: func()     #same error as yours
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)

UnboundLocalError: local variable 'a' referenced before assignment 
```

# mysql - 在另一列上排名一列

> ID：13974281
> 
> 赞同：7
> 
> 时间：2012-12-20T14:27:09.387
> 
> 标签：mysql, sql, ranking

我有一张表格：

```
userid  rank  name
-------------------
1       4     raj
1       90    frank
1       100   neeta
1       123   liz
2       2     liz
2       20    neeta
2       23    frank
2       222   raj 
```

我需要把它转换成

```
userid  min_rank  next_min_rank
-------------------------------
1       raj       frank
2       liz       neeta 
```

我一直在网上搜索这个问题很长时间，但找不到解决方案。

能否请你帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:06:05.467

不是最优雅的。但是试一试。

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/f7586f/3)

询问：

```
select b.userid, x.name1, b.name  as name2
from ranks b
join 
(
select a.userid, min(a.rank), a.name as name1
      from ranks a
      group by a.userid
) as x
on x.userid = b.userid
where (b.userid, b.rank, b.name) not in
(
select a.userid, min(a.rank), a.name
      from ranks a
      group by a.userid
)
group by b.userid
; 
```

结果：

```
USERID  NAME1   NAME2
1       raj     frank
2       liz     neeta 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:38:49.580

此查询将为每个用户选择最低排名和下一个排名：

```
select s.userid, s.min_rank, min(users.rank) as next_rank
from (
  select userid, min(rank) as min_rank
  from users
  group by userid) s left join users
  on users.userid = s.userid and s.min_rank<users.rank
group by s.userid 
```

ant 这将显示名称：

```
select t.userid, t1.name, t2.name
from (
  select s.userid, s.min_rank, min(users.rank) as next_rank
  from (
    select userid, min(rank) as min_rank
    from users
    group by userid) s left join users
    on users.userid = s.userid and s.min_rank<users.rank
  group by s.userid ) t
  left join users t1 on t.userid=t1.userid and t.min_rank=t1.rank
  left join users t2 on t.userid=t2.userid and t.next_rank=t2.rank 
```

结果是：

```
1  raj  frank
2  liz  neeta 
```

如果可能有多个用户具有相同的排名，这取决于您要如何处理这种情况，您可以添加以下内容：

```
group by t.userid 
```

只显示其中之一。也许你也可以`GROUP_CONCAT(t1.name), GROUP_CONACT(t2.name)`在选择上使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:26:39.947

这确实对我有用相同的数据

```
SELECT  N1.USERID AS USERID,N1.NAME AS MIN_RANK, N2.NAME AS NEXT_RANK 
FROM (SELECT USERID,NAME FROM TABLE1 WHERE RANK IN(SELECT  Min(Table1.rank) AS MinOfrank FROM Table1 GROUP BY Table1.UserID))  N1,
(SELECT USERID,NAME FROM TABLE1 WHERE RANK IN (SELECT Min(RANK) AS Expr1 FROM TABLE1 WHERE (TABLE1.rank) Not In (SELECT MIN(RANK) FROM TABLE1 GROUP BY USERID)  GROUP BY USERID))  N2 
WHERE
N1.USERID=N2.USERID; 
```

希望能帮助到你！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:38:44.523

尝试这个：

```
select a.userid , a.name minRank, 
       (select name from usertable where userid =a.userid and rank>a.rank 
        order by rank limit 1) nextMinRank
From (Select userid, name ,rank from usertable order by rank) as a
Group by userid, rank 
```

# javascript - 选项卡上的光标 - Javascript - 立即字段

> ID：13974283
> 
> 赞同：0
> 
> 时间：2012-12-20T14:27:10.697
> 
> 标签：javascript, html, extjs, user-interface

我必须修改现有的 html / javascript 代码才能将光标移动到下一个字段。

这是字段的顺序

文本框 1
文本框 2日期框
1
列表 1
文本框 3

当我在文本框 2 中输入文本并按 Tab 键时，光标会转到文本框 3。

我相信这是默认情况下的工作方式。有没有办法我们可以使用 HTML 标签或其他东西来控制它，使光标转到紧跟在 Textbox 2 之后的字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:31:11.413

你想要这个[`tabindex`属性](http://www.w3schools.com/tags/att_global_tabindex.asp)。将每个元素的选项卡索引设置为与您希望用户循环浏览它们的顺序相对应的值。

# php - 如何在 PHP 中将所有环境变量作为数组获取？

> ID：13974285
> 
> 赞同：15
> 
> 时间：2012-12-20T14:27:12.527
> 
> 标签：php, environment-variables

标题说了算。我想将此与[proc_open](https://www.php.net/manual/en/function.proc-open.php)一起使用，以将一些变量附加到当前环境。

```
$current_env = get_all_env_vars_magically();
$env = array_merge($current_env, $new_vars);
$ph = proc_open($command, array(1 => array('pipe', 'w')), 
    $pipes, dirname(__FILE__), $env); 
```

编辑：`$_ENV`默认为空/未填充。`$_SERVER`包含的远不止环境变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-12-31T09:03:10.623

从 PHP7.1 开始，现在可以省略 varname 来检索所有环境变量的关联数组。

试试`getenv()` [https://3v4l.org/fkFoR](https://3v4l.org/fkFoR)

PHP 文档：[https ://www.php.net/manual/en/function.getenv.php](https://www.php.net/manual/en/function.getenv.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-27T09:34:14.090

尝试`getenv()`它获取环境变量的值。

仅当配置指令`$_ENV`的值包含时才会创建数组。如果不可用，请用于检索环境变量：`variables_order``E``$_ENV``getenv( )`

`$path = getenv('PATH')`;

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-12-20T14:30:44.833

认为你必须使用 $_ENV 参数

# android - 如何以编程方式设置gridview的高度android

> ID：13974289
> 
> 赞同：16
> 
> 时间：2012-12-20T14:27:24.780
> 
> 标签：android, android-layout, gridview

我想在我的应用程序中以编程方式设置我的**Gridview**的高度。

有什么方法可以实现吗？

我只想从代码中更改两个特殊情况下的gridview高度。

**编辑：**

```
<fragment
     android:id="@+id/mygridview"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_margin="10dip"
     class="com.myapp.android.MyGridViewClass" /> 
```

MyGridViewClass 扩展了填充 Gridview 的 Fragment。

```
 <GridView
    android:id="@+id/mygridview_container"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dip"
    android:columnWidth="90dp"
    android:gravity="center_vertical|center_horizontal"
    android:horizontalSpacing="1dp"
    android:numColumns="3"
    android:scrollbars="vertical"
    android:stretchMode="spacingWidthUniform"
    android:verticalSpacing="5dp" /> 
```

在 myGridViewClass`onViewCreated`中，我使用代码为 gridview 充气，

```
gridView = (GridView)getView().findViewById( R.id.mygridview_container);
gridAdapter = new MyCustomAdapter(context, list);
gridView.setAdapter(gridAdapter); 
```

每当创建视图时，我都必须检查 gridview 中的项目数并相应地设置高度。

当我尝试为 gridview 设置 layoutParams() 时，我得到了这个异常。

```
android.view.InflateException: Binary XML file line #89: Error inflating class fragment 
```

其中第 89 行对应片段 class="com.myapp.android.MyGridViewClass" 中的这一行

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-21T09:52:38.357

使用它，因为您想保留当前`layoutParams`：

```
ViewGroup.LayoutParams layoutParams = yourGridview.getLayoutParams();
layoutParams.height = 50; //this is in pixels
yourGridview.setLayoutParams(layoutParams); 
```

编辑：如果要输入高度`dp`而不是像素，请将`dp`数量转换为像素：

```
public static int convertDpToPixels(float dp, Context context){
    Resources resources = context.getResources();
    return (int) TypedValue.applyDimension(
            TypedValue.COMPLEX_UNIT_DIP,
            dp, 
            resources.getDisplayMetrics()
    );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:25:32.577

我认为这应该有效：

```
GridView gridView = (GridView)findViewById(...);
ViewGroup.LayoutParams lp=new ViewGroup.LayoutParams(width,height);
gridView.setLayoutParams(lp); 
```

# jbpm - jBPM 由于外部事件而暂停流程

> ID：13974300
> 
> 赞同：0
> 
> 时间：2012-12-20T14:27:38.883
> 
> 标签：jbpm, bpmn

我有一个在 jBPM 中制作的流程，并且我已经在其中实现了持久性。下一步是让流程在给定进程处停止，并在队列中等待，直到外部实体给出答案，这样流程才能从该流程正常继续。

到目前为止，我对该主题的研究使我与一些概念混淆了一些概念，例如 WorkItemHandler、中间捕获事件和外部事件。

谁能告诉我这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:57:34.180

您走在正确的轨道上，您需要使用异步工作项处理程序来表示该行为。基本上，只要 executeWorkItem() 方法完成，Async WorkItemHandler 就不会自动完成 WorkItem。当外部通知进来时，您需要使用 workItem.getId() 才能使用 ksession.getWorkItemManager().complete(id, params) 方法完成它。

请注意，您需要在应用程序的某个位置保留待完成的工作项 ID，这取决于您的情况以及您存储数据的方式。

希望能帮助到你！干杯

# android - Android在加载后获取微调器值？

> ID：13974302
> 
> 赞同：0
> 
> 时间：2012-12-20T14:27:47.783
> 
> 标签：android, android-spinner

加载微调器后，我想获取微调器中设置的微调器值

我知道如何获取选定的值，但是第一次加载是在第一次加载时及时获取空值我想在第**一次**加载时获取选定的值

> 微调部分

```
 ArrayAdapter<String>spinnertimeadapter= new ArrayAdapter<String>(AirportChekActivity.this, android.R.layout.simple_spinner_item,flighttime);
                spinnertimeadapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                timespinner.setAdapter(spinnertimeadapter);

                String time;
                timespinner.setOnItemSelectedListener(new OnItemSelectedListener() {
                    public void onItemSelected(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {

                        String timeselected=timespinner.getSelectedItem().toString();

                          Calendar now = Calendar.getInstance();    
                          hour=now.get(Calendar.HOUR_OF_DAY);
                          Log.e("hourrr","-->"+hour);

                          if(hour>=0 && hour<=2)
                          {
                              timespinner.setSelection(0);

                          }
                          else if(hour>=3 && hour<=5)
                          {
                              timespinner.setSelection(1);

                          }

                          else if(hour>=6 && hour<=8)
                          {
                              timespinner.setSelection(2);

                          }
                          else if(hour>=9 && hour<=11)
                          {
                              timespinner.setSelection(3);

                          }
                          else if(hour>=12 && hour<=14)
                          {
                              timespinner.setSelection(4);

                          }
                          else if(hour>=15 && hour<=17)
                          {
                              timespinner.setSelection(5);

                          }
                          else if(hour>=18 && hour<=21)
                          {
                              timespinner.setSelection(6);

                          }
                          else if(hour>=22 && hour<=24)
                          {
                              timespinner.setSelection(7);

                          }

                        stime=timespinner.getSelectedItem().toString();

                        if(timeselected.equals("12:00AM To 3:00AM"))
                        {
                            time="0";
                        }
                        else if(timeselected.equals("3:00AM To 6:00AM"))
                        {
                            time="3";
                        }
                        else if(timeselected.equals("6:00AM To 9:00AM"))
                        {
                            time="6";
                        }
                        else if(timeselected.equals("9:00AM To 12:00PM"))
                        {
                            time="9";
                        }
                        else if(timeselected.equals("12:00PM To 3:00PM"))
                        {
                            time="12";
                        }
                        else if(timeselected.equals("3:00PM To 6:00PM"))
                        {
                            time="15";
                        }
                        else if(timeselected.equals("6:00PM To 9:00PM"))
                        {
                            time="18";
                        }
                        else if(timeselected.equals("9:00PM To 12:00AM"))
                        {
                            time="21";
                        }
                    }
                    public void onNothingSelected(AdapterView<?> arg0) {

                    }
                }); // time spinner complete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:36:41.107

尝试更改加载时间。请在单击事件中的 on create no 中使用以下行。

**现在日历 = Calendar.getInstance();
小时=now.get(日历.HOUR_OF_DAY); Log.e("hourrr","-->"+hour);**

所以只有你最初得到 null ......

# java - 触摸图表会显示一些虚线选择矩形

> ID：13974303
> 
> 赞同：0
> 
> 时间：2012-12-20T14:27:48.640
> 
> 标签：java, android, teechart

我有一个`TChart`. 如果我触摸屏幕，则会显示一个虚线选择矩形。我知道我可以将其更改为缩放或平移。如何完全禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:15:39.780

虚线矩形实际上是 InChart ZoomStyle 的缩放矩形。从 TopLeft 到 BottomRight 绘制矩形以进行缩放，从 BottomRight 绘制到 TopLeft 以取消缩放。

请看一下“教程 8 - 缩放和滚动”，“如何使用触摸屏缩放和滚动”部分解释了这一切。教程随安装一起提供。

请注意，最近修复了一个影响 FullChart ZoomStyle 的错误。它应该在下一个维护版本中得到纠正。

# html - 表格右下方的 HTML 额外单元格，用于显示总数

> ID：13974305
> 
> 赞同：0
> 
> 时间：2012-12-20T14:27:55.343
> 
> 标签：html, css

我在带背景的 div 中有一张桌子。我想添加一个单元格，其中包含一列中所有值的总和，作为一个额外的单元格粘贴到右侧表格的底部（右列是带有数字的列）。这应该在没有我之前的列单元格删除我的背景的情况下发生。为清楚起见，我添加了示例模板的图片。

![](../Images/b276a416bc870678405dbfeb0e28e4b6.png)

现在我的问题是，是否存在 HTML 预定义标签或选项以在一行右侧仅添加一个单元格，或者我是否必须使用 colspan=3 为前面的 td 标签设置样式，具有透明背景、无边框等...得到这个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:32:30.703

您的具体问题的答案是否定的。没有办法创建一个不是完美矩形的表格。但是，正如其他人所指出的那样，您可以设计一张桌子以获得您想要的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:32:27.167

没有预定义的 HTML 标记供您使用。您提到的解决方案是最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:30:50.577

您可以为单元格设置 colspan=3 和 text-align right

# c# - 如何使用 C# 建立数据库（SQL）连接？

> ID：13974308
> 
> 赞同：0
> 
> 时间：2012-12-20T14:28:01.340
> 
> 标签：c#, asp.net, sql, database

我想建立一个数据库连接以使用 C# 接收客户的详细信息。我正在使用 sql-server 2008 和 Visual Studio 2010 .....

这是这段代码：

```
<asp:Textbox id="TxtBox1" runat="server" />
<asp:Textbox id="TxtBox2" runat="server" />
<asp:Button id="Button1" runat="server" Onclick="Button1_Click" /> 
```

和代码隐藏：

```
protected void Button1_Click(Object sender,EventArgs e)
{
string Text1=TextBox1.Text;
string Text2=TextBox2.Text;
string connectionString="Data Source=servername;InitialCatalog=DataBaseNameUserID=sa;  Password=YourPassword;"

SqlConnection sqlConnection=new SqlConnection(connectionString);

string insertStatement="INSERT INTO TableName(column1,column2) VALUES Txtb1+","+Txtb2";

SqlCommand sqlCommand=new SqlCommand(insertStatement,sqlConnection);

try
{
sqlConnection.Open();
sqlCommand.ExecuteNonQuery();

}
finally
{
sqlConnection.Close();
}

} 
```

我已经在其中创建了 data.mdf 文件我已经创建了包含字段的表，但是我收到连接尚未建立错误任何人都可以帮助我解决我的问题吗？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:33:39.313

这个连接字符串是错误的。

```
string connectionString="Data Source=servername;InitialCatalog=DataBaseNameUserID=sa;" + 
                        "Password=YourPassword;" 
```

应该

```
string connectionString="Data Source=servername;InitialCatalog=DataBaseName; UserID=sa;" + 
                        "Password=YourPassword;" 
```

但是，切勿在您的应用程序中使用 sa 用户。使用 Management Studio 创建新用户或更好地使用集成安全性。

您的代码的其余部分也应该以这种方式编写

```
using(SqlConnection sqlConnection=new SqlConnection(connectionString))
{
     string insertStatement="INSERT INTO TableName(column1,column2) VALUES (@col1, @col2)";
     SqlCommand sqlCommand=new SqlCommand(insertStatement,sqlConnection);
     sqlCommand.Parameters.AddWithValue("@col1", Text1);
     sqlCommand.Parameters.AddWithValue("@col2", Text2);
     sqlConnection.Open();
     sqlCommand.ExecuteNonQuery();
} 
```

*   使用[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=VS.80%29.aspx)正确关闭和处置您的 SqlConnection
*   在 sql 命令中使用[参数化查询](http://www.c-sharpcorner.com/uploadfile/puranindia/parameterized-query-and-sql-injection-attacks/)来避免解析问题和[Sql 注入攻击](http://www.unixwiz.net/techtips/sql-injection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:33:40.547

使用连接字符串如下：

```
connectionString="Data Source=ServerAddress;Initial Catalog=DataBaseName;Integrated Security=SSPI;User ID=Domain\Username;Password=Password;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:36:02.810

此代码无法编译。您需要在此行中添加分号：

```
string connectionString="Data Source=servername;InitialCatalog=DataBaseNameUserID=sa;  Password=YourPassword;" 
```

像这样：

```
string connectionString="Data Source=servername;InitialCatalog=DataBaseNameUserID=sa;  Password=YourPassword;"; 
```

您还需要更改此行：

```
string insertStatement="INSERT INTO TableName(column1,column2) VALUES Txtb1+","+Txtb2"; 
```

对此：

```
string insertStatement = "INSERT INTO TableName(column1,column2) VALUES " + Text1 + ", " + Text2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:40:46.157

连接字符串本身可能是问题所在，windows 有一种简单的方法来创建可以测试的有效连接字符串，然后将其复制到您的应用程序中。几个月前我[在这里](http://www.megustaulises.com/2012/04/how-to-create-connection-string.html)写过它：

应用提示：

*   正如 asawyer 所指出的，不要使用 sa 帐户，创建一个可以访问所需数据库的登录名。

*   使用[using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)语句

例子：

```
using (SqlConnection connection = new SqlConnection(connectionString))  
    {  
      //here you open and execute the command
    } 
```

*   用户参数化查询以避免 sql 注入。[这是一篇好文章](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

# android - 从线程得到 NullPointerException

> ID：13974316
> 
> 赞同：1
> 
> 时间：2012-12-20T14:28:26.457
> 
> 标签：android, multithreading, nullpointerexception

我正在写一个小安卓游戏。它应该显示我作为 ImageButtons 实现的 4 只动物的随机序列。用户必须记住这个序列并在之后重复它。

我现在的问题是图像按钮如何可见的正确时机。

我得到了以下 NullPointerException 并且不知道为什么。也许有人可以帮忙！？

这是我的主要活动：

```
package lichtenberger.paul;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.widget.ImageButton;
import android.widget.TextView;

public class Game extends Activity {

    int Reihenfolge[] = new int[40];

    Random generator = new Random();

    public final int CAT = 0;
    public final int MAN = 1;
    public final int BIRD = 2;
    public final int SHEEP = 3;
    public Handler handler;
    public Thread AnimalThread;
    {for(int i = 0; i<40; i++)Reihenfolge[i]=generator.nextInt(4);}

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game);

        final ImageButton cat = (ImageButton)findViewById(R.id.catButton);
        final ImageButton sheep = (ImageButton)findViewById(R.id.sheepButton);
        final ImageButton man = (ImageButton)findViewById(R.id.manButton);
        final ImageButton bird = (ImageButton)findViewById(R.id.birdButton);
        final TextView score = (TextView)findViewById(R.id.scoreNTV);

        handler = new Handler(){

            @Override

            public void handleMessage(Message msg){

                switch (msg.what) {
                case 0:
                    cat.setVisibility(1);
                    man.setVisibility(0);
                    bird.setVisibility(0);
                    sheep.setVisibility(0);
                    break;
                case 1:
                    man.setVisibility(1);
                    bird.setVisibility(0);
                    sheep.setVisibility(0);
                    cat.setVisibility(0);
                    break;
                case 2:
                    bird.setVisibility(1);
                    sheep.setVisibility(0);
                    cat.setVisibility(0);
                    man.setVisibility(0);
                    break;
                case 3:
                    sheep.setVisibility(1);
                    cat.setVisibility(0);
                    man.setVisibility(0);
                    bird.setVisibility(0);
                    break;
                }

            }
        };          
            ShowSequence show = new ShowSequence();
            Thread showSeq = new Thread(show);
            showSeq.start();

        };

} 
```

我的线程类：

```
package lichtenberger.paul;   

public class ShowSequence extends Game implements Runnable{    
    @Override
    public void run() {                 
        show();
    }

    private void show() {

        for(int i = 0; i<40; i++){
        switch (Reihenfolge[i]) {
        case 0:
                try {
                // this pauses the Thread: Alternative to doing stuff...
                Thread.sleep(2000);

                handler.sendEmptyMessage(CAT);
                } catch (InterruptedException e) {
                e.printStackTrace();}
                break;

        case 1:
            try {
                // this pauses the Thread: Alternative to doing stuff...
                Thread.sleep(2000);

                handler.sendEmptyMessage(MAN);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            break;

        case 2:
            try {
                // this pauses the Thread: Alternative to doing stuff...
                Thread.sleep(2000);

                handler.sendEmptyMessage(BIRD);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            break;

        case 3: 
            try {
                // this pauses the Thread: Alternative to doing stuff...
                Thread.sleep(2000);

                handler.sendEmptyMessage(SHEEP);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        default:
            break;
        }
    }
}} 
```

和我的 LogCat：

```
12-20 15:20:34.974: ERROR/AndroidRuntime(598): FATAL EXCEPTION: Thread-75
12-20 15:20:34.974: ERROR/AndroidRuntime(598): java.lang.NullPointerException
12-20 15:20:34.974: ERROR/AndroidRuntime(598):     at lichtenberger.paul.ShowSequence.show(ShowSequence.java:50)
12-20 15:20:34.974: ERROR/AndroidRuntime(598):     at lichtenberger.paul.ShowSequence.run(ShowSequence.java:10)
12-20 15:20:34.974: ERROR/AndroidRuntime(598):     at java.lang.Thread.run(Thread.java:856) 
```

编辑：

一个活动中的整个代码不起作用：

```
package lichtenberger.paul;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.widget.ImageButton;
import android.widget.TextView;

public class Game extends Activity {

    int Reihenfolge[] = new int[40];

    Random generator = new Random();
    public ImageButton cat;
    public ImageButton man;
    public ImageButton bird;
    public ImageButton sheep;
    public TextView score;
    private static Handler handler;
    public final int CAT = 0;
    public final int MAN = 1;
    public final int BIRD = 2;
    public final int SHEEP = 3;
    public Runnable showAnimal;
    public Thread AnimalThread;
    {for(int i = 0; i<40; i++)Reihenfolge[i]=generator.nextInt(4);}

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game);

        setupUI();
        showSequence();
        initHandler();
    }

    public void showSequence() {

                showAnimal = new showAnimal();
                AnimalThread = new Thread(showAnimal);
                AnimalThread.start();

    }

    public void setupUI() {

        cat = (ImageButton)findViewById(R.id.catButton);
        sheep = (ImageButton)findViewById(R.id.sheepButton);
        man = (ImageButton)findViewById(R.id.manButton);
        bird = (ImageButton)findViewById(R.id.birdButton);
        score = (TextView)findViewById(R.id.scoreNTV);

    }

    private void initHandler() {
        handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                switch (msg.what) {
                case CAT:
                    cat.setVisibility(1);
                    man.setVisibility(0);
                    bird.setVisibility(0);
                    sheep.setVisibility(0);
                    break;
                case MAN:
                    man.setVisibility(1);
                    bird.setVisibility(0);
                    sheep.setVisibility(0);
                    cat.setVisibility(0);
                    break;
                case BIRD:
                    bird.setVisibility(1);
                    sheep.setVisibility(0);
                    cat.setVisibility(0);
                    man.setVisibility(0);
                    break;
                case SHEEP:
                    sheep.setVisibility(1);
                    cat.setVisibility(0);
                    man.setVisibility(0);
                    bird.setVisibility(0);
                    break;
                }
            }
        };

    }

    class showAnimal implements Runnable {
        public void run() {
            show();
        }

        private void show() {

            for(int i = 0;i<40;i++){

            switch (Reihenfolge[i]) {

            case 0:
                try {
                    // this pauses the Thread: Alternative to doing stuff...
                    Thread.sleep(2000);

                    handler.sendEmptyMessage(CAT);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                break;

            case 1:
                try {
                    // this pauses the Thread: Alternative to doing stuff...
                    Thread.sleep(2000);

                    handler.sendEmptyMessage(MAN);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                break;

            case 2:
                try {
                    // this pauses the Thread: Alternative to doing stuff...
                    Thread.sleep(2000);

                    handler.sendEmptyMessage(SHEEP);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                break;
            case 3:
                try {
                    // this pauses the Thread: Alternative to doing stuff...
                    Thread.sleep(2000);

                    handler.sendEmptyMessage(BIRD);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                break;
            }
        }
    }

}
} 
```

感谢帮助 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:42:38.160

问题是您有 2 个单独的对象 - 该实例`Game`具有非空处理程序。`ShowSequence`以及带有 null 处理程序的实例。你不应该继承`ShowSequecne`自`Game`. 它不会自动获取 all`Game`的变量，您应该按照@harism 的建议制作`ShowSequence`in 的内部类。`Game`或者您必须`ShowSequence`在构造函数中显式设置所有变量，或者在创建它之后立即设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:39:58.487

保罗，

您是否尝试过使“处理程序”变量**volatile**？您可以从工作线程（即运行“ShowSequence”可运行文件）访问此变量，而无需使用同步（**synchronized**关键字）。尽管您甚至可能想考虑添加某种形式的同步（我没有仔细阅读您的代码来做出决定），但您至少应该确保从一个线程对“处理程序”的写入对其他线程是可见的。volatile 限定符是实现此目的的一种方式。

祝你好运！

PS：ShowSequence 扩展了游戏？哪个又扩展了Activity？我认为您还需要检查此继承树..不确定您是否想要这个..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:47:35.800

我不会从游戏中获取 ShowSequence，您可以将处理程序作为参数传递

//活动

```
ShowSequence show = new ShowSequence(handler);
            Thread showSeq = new Thread(show);
            showSeq.start(); 
```

// 线程类

```
public class ShowSequence implements Runnable{
Handler handler = null;

public ShowSequence(handler){
      this.handler = handler;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T18:22:12.020

实际的问题是我在调试时发现的另一个问题。所有图片同时出现的原因是在很短的时间内启动线程。我通过在 showSequence 方法的每个循环之后更改延迟时间来解决这个问题。

所以这是我现在的完整课程：

```
package lichtenberger.paul;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.widget.ImageButton;
import android.widget.TextView;

public class Game extends Activity {

    int Reihenfolge[] = new int[40];

    Random generator = new Random();

    public final int CAT = 0;
    public final int MAN = 1;
    public final int BIRD = 2;
    public final int SHEEP = 3;
    public final int PAUSE = 4;
    public final int ALL = 5;
    public int Zug = 40;
    public int time = 0;
    public Handler handler;
    public Thread AnimalThread;
    public ImageButton cat;
    public ImageButton man;
    public ImageButton bird;
    public ImageButton sheep;

    {for(int i = 0; i<40; i++)Reihenfolge[i]=generator.nextInt(4);}

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game);

        cat = (ImageButton)findViewById(R.id.catButton);
        sheep = (ImageButton)findViewById(R.id.sheepButton);
        man = (ImageButton)findViewById(R.id.manButton);
        bird = (ImageButton)findViewById(R.id.birdButton);
        final TextView score = (TextView)findViewById(R.id.scoreNTV);

        handler = new Handler(){

            @Override

            public void handleMessage(Message msg){

                switch (msg.what) {
                case CAT:
                    cat.setVisibility(View.VISIBLE);
                    man.setVisibility(View.INVISIBLE);
                    bird.setVisibility(View.INVISIBLE);
                    sheep.setVisibility(View.INVISIBLE);

                    break;
                case MAN:
                    man.setVisibility(View.VISIBLE);
                    bird.setVisibility(View.INVISIBLE);
                    sheep.setVisibility(View.INVISIBLE);
                    cat.setVisibility(View.INVISIBLE);

                    break;
                case BIRD:
                    bird.setVisibility(View.VISIBLE);
                    sheep.setVisibility(View.INVISIBLE);
                    cat.setVisibility(View.INVISIBLE);
                    man.setVisibility(View.INVISIBLE);

                    break;
                case SHEEP:
                    sheep.setVisibility(View.VISIBLE);
                    cat.setVisibility(View.INVISIBLE);
                    man.setVisibility(View.INVISIBLE);
                    bird.setVisibility(View.INVISIBLE);

                    break;

                case PAUSE:
                    sheep.setVisibility(View.INVISIBLE);
                    cat.setVisibility(View.INVISIBLE);
                    man.setVisibility(View.INVISIBLE);
                    bird.setVisibility(View.INVISIBLE);

                case ALL:
                    sheep.setVisibility(View.VISIBLE);
                    cat.setVisibility(View.VISIBLE);
                    man.setVisibility(View.VISIBLE);
                    bird.setVisibility(View.VISIBLE);
                 }

            }
        };

        time = 0;
        Zug = 40;
        showGameSeq(time, Zug); 
        }

    public int showGameSeq(int time, int Zug) {
        ShowSequence show;
        Thread showSeq;
        int x = 0;

        for(int i = 1; i<=Zug; ++i, ++x){

                if(Reihenfolge[i-1]!=Reihenfolge[i-1]){

                    show = new ShowSequence(Reihenfolge[i-1], time);
                    showSeq = new Thread(show);
                    showSeq.start();
                    time = time + 1000;}

                else{
                    show = new ShowSequence(Reihenfolge[i-1], time);
                    showSeq = new Thread(show);
                    showSeq.start();
                    time = time + 1000;

                    show = new ShowSequence(PAUSE, time);
                    showSeq = new Thread(show);
                    showSeq.start();
                    time = time + 500;

                }
            }

        if(x==Zug){ 
        show = new ShowSequence(ALL, time);
        showSeq = new Thread(show);
        showSeq.start();
        }else{};

        return time;
    };

    private class ShowSequence implements Runnable{

        int which;
        int time;

        public ShowSequence(int which, int time) {
            this.which = which;
            this.time = time;
        }

        @Override
        public void run() {

            show();

        }

        private void show() {

                switch (which) {
                case CAT:

                    handler.sendEmptyMessageDelayed(CAT, time);
                    break;
                case MAN:

                    handler.sendEmptyMessageDelayed(MAN, time);
                    break;
                case BIRD:

                    handler.sendEmptyMessageDelayed(BIRD, time);
                    break;
                case SHEEP:

                    handler.sendEmptyMessageDelayed(SHEEP, time);
                    break;

                case PAUSE:

                    handler.sendEmptyMessageDelayed(PAUSE, time);
                    break;

                case ALL:

                    handler.sendEmptyMessageDelayed(ALL, time);
                    break;

                }
        }
        }
        } 
```

感谢所有启发我的解决方案的人！！！:)

# c - shell脚本中是否有函数的前向声明-bash

> ID：13974318
> 
> 赞同：0
> 
> 时间：2012-12-20T14:28:28.580
> 
> 标签：c, bash, shell

> **可能重复：**
> [bash 中的前向声明？](https://stackoverflow.com/questions/13588457/forward-declarations-in-bash)

我在一个 shell 脚本源文件中有很多函数，其中一个调用另一个函数，所以我总是必须以正确的顺序放置函数。

没有像我们在 C/C++ 中那样在 shell 脚本中前向声明函数之类的东西吗？

**编辑**：或者，有没有办法实现它？

# java - 如何在 ThreadFactory 中创建线程期间访问 Runnable？

> ID：13974319
> 
> 赞同：0
> 
> 时间：2012-12-20T14:28:31.803
> 
> 标签：java, threadpool

我有一个`ThreadPoolExecutor`我用自定义创建的`ThreadFactory`. 当我调用`execute()`传递 my 的方法时，会使用我的自定义创建`Runnable`一个新的. 问题是我找不到访问.`Thread``ThreadFactory``Runnable`

例如，我有一个`Job`实现`Runnable`. 在里面`Job`，我有一个`A`我想在`newThread()`我的自定义方法中访问的属性`ThreadFactory`。问题是我不能将`Runnable`传递的参数转换为，`Job`因为它不是`Job`实例，它是类的实例`ThreadPoolExecutor.Worker`，而这个类是`private`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:35:32.263

您误用或误解了线程池的作用。创建线程和提交/运行任务的过程是完全解耦的。线程池决定何时创建新线程，它可能与提交的任何新任务完全无关。

最后请记住，一个线程很可能在多个`Runnable`s 中重用。

# jsf-1.2 - 创建我自己的 ViewHandler 为进一步请求返回 404 错误

> ID：13974321
> 
> 赞同：4
> 
> 时间：2012-12-20T14:28:37.967
> 
> 标签：jsf-1.2

我有一个`URL`这样的 http:/myDomain/ **myWAR/myServletReceiver**

我不希望最终用户知道我的 WAR 文件名或 Servlet 接收器名称。所以，我想我会将这个 URL 个性化为 http:/myDomain/ **MyAccount 之**类的东西。

我在下面添加了一段代码来实现这一点。

创建了我自己的包。代码如下。

```
package myOwnPackage
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;
import javax.faces.application.ViewHandler;
import javax.faces.context.FacesContext;
import com.sun.facelets.FaceletViewHandler;

public class DynamicViewHandler extends FaceletViewHandler{

    public DynamicViewHandler(ViewHandler parent) {

        super(parent);
        System.out.println("Entered into DynamicViewHandler");
    }

    public String getActionURL(FacesContext context, String viewId) {
        System.out.println("Inside getActionURL");

        ExpressionFactory expressionFactory = context.getApplication().getExpressionFactory();
        ValueExpression valueExpression = expressionFactory.createValueExpression(context.getELContext(), viewId, String.class);
        String result = (String) valueExpression.getValue(context.getELContext());

        System.out.println("Value of Result is:" +result);

            //I am in the beginning steps and just want to print the value of "result" for each response
        return result;
    }

} 
```

我注册了这个`faces-config.xml`

```
<application>
<view-handler>myOwnPackage.FaceletViewHandler</view-handler>
<state-manager>org.jboss.portletbridge.application.PortletStateManager</state-manager>
</application> 
```

当我点击我的应用程序时，我的 Servlet 重定向到的欢迎页面是`/jsp/html/index.xhtml`.

因此，在日志中，我得到了低于打印的值。

```
Entered into DynamicViewHandler

Value of Result is:/jsp/html/index.xhtml 
```

页面中还有其他链接`index.jsf`。当我单击其他链接时，我在浏览器上收到以下错误消息（而不是转到`/jsp/html/secondPage.jsf`）

`http:/myDomain/jsp/html/index.html not found (404) error.`

我肯定错过了我的东西`DynamicViewHandler`，`faces-config.xml`而且可能更多。

我在这里还缺少什么？

另外，我想映射`jsp/html/secondPage.jsf`到`/MyAccount`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:00:42.370

用于显示不同的 URL 而不是您的原始 URL。

方法一：

你有一个文件名 pretty-config.xml。

使用此文件，您可以显示除真实补丁之外的不同 url。

例子：

通过这两行简单的配置，用户在浏览器 URL 和输出 HTML 中看到：pattern="/mySite/"，但服务器实际上正在渲染资源：/faces/sites/mySite.jsf 的实际位置服务器上的页面。

你可以在[这里找到信息 http://ocpsoft.org/prettyfaces/](http://ocpsoft.org/prettyfaces/)

方法2：作为BalusC关于SO的建议

PrettyFaces 仅适用于 JSF。您需要[Rewrite](http://ocpsoft.org/rewrite/)（仍处于测试阶段；如今[Tuckey 的 URLRewriteFilter](http://code.google.com/p/urlrewritefilter/)是最好的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:27:55.867

选项 1：- 如果您使用 httd 服务，您可以使用 mod_rewrite 选项更改 url 模式 [http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

选项2：-

正如 jubinPatel 所说， [UrlRewriteFilter](http://tuckey.org/urlrewrite/) 是更改 url 模式的最佳选择。

[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)

# powershell - 根据上次修改的顺序使用带有序列号的 Powershell 重命名文件

> ID：13974322
> 
> 赞同：0
> 
> 时间：2012-12-20T14:28:45.733
> 
> 标签：powershell, file-rename

我现在在一个文件夹中有 2600 张图像，我想用 1.jpg、2.jpg、3.jpg 等的序列号启动器重命名。我想先从最旧的文件开始，然后按上述方式重命名它们。

一个文件可以是 qwe01.jpg 最后修改时间 01.05.2012 下一个文件可以是 ewe202.jpg 最后修改时间 05.05.2012 等等...

我希望这些根据修改日期以正确的顺序重命名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:53:35.233

这没有完全测试，但它应该工作：

```
$count = 1; Get-ChildItem -file | Sort-Object LastWriteTime | %{$newName = '{0}{1:00}.{2}' -f $_.basename, $count, $_.extension; Rename-Item $_ -NewName $newName; $count++} 
```

# delphi - 为什么编译器会为我的泛型函数参数抱怨“不兼容的类型”？

> ID：13974326
> 
> 赞同：4
> 
> 时间：2012-12-20T14:28:53.823
> 
> 标签：delphi, generics, parameter-passing, delphi-2009

我在使用泛型时遇到问题。我不知道如何传递`OnCallbackWrapper`给`CallbackWrapper`程序。我在以下示例中收到“不兼容的类型”错误：

```
unit uTest;

interface

uses
  Generics.Defaults;

type
  TGenericCallback<T> = procedure(Fields: T);

type
  TSpecificFields = record
    A: Integer;
    B: Integer;
    C: Integer;
  end;

const
  SpecificFields: TSpecificFields =
  (A: 5; B: 4; C: 3);

procedure CallbackWrapper(GenericCallback: TGenericCallback<TSpecificFields>);

implementation

procedure CallbackWrapper(GenericCallback: TGenericCallback<TSpecificFields>);
begin
  GenericCallback(SpecificFields);
end;

procedure OnCallbackWrapper(const Fields: TSpecificFields);
begin
  Assert(Fields.A = 5);
  Assert(Fields.B = 4);
  Assert(Fields.C = 3);
end;

procedure Dummy;
begin
  CallbackWrapper(OnCallbackWrapper); //Incompatible types here
end;

end. 
```

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:36:22.513

您声明的类型按值接收其参数。

```
TGenericCallback<T> = procedure(Fields: T); // no const 
```

您传递的函数标有`const`。

```
procedure OnCallbackWrapper(const Fields: TSpecificFields); // const parameter 
```

因此编译器拒绝您尝试传递的参数不匹配。你需要让双方匹配。例如：

```
TGenericCallback<T> = procedure(const Fields: T); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T14:36:00.847

```
procedure OnCallbackWrapper( Fields: TSpecificFields);
begin
  Assert(Fields.A = 5);
  Assert(Fields.B = 4);
  Assert(Fields.C = 3);
end; 
```

或将声明更改为

```
 TGenericCallback<T> = procedure(const Fields: T); 
```

按值传递参数的过程与通过引用传递参数的过程不兼容。[参考](http://docwiki.embarcadero.com/RADStudio/XE3/en/Parameters_%28Delphi%29)

# javascript - 用javascript停止窗口大小的动画？

> ID：13974328
> 
> 赞同：0
> 
> 时间：2012-12-20T14:29:01.630
> 
> 标签：javascript, jquery, scroll

嘿，我没有使用 javascript 的经验，但基本上我想在我使用 iphone 或 ipad 等小型设备时阻止这种情况发生，因为我使用的是 twitter 引导程序，一旦它进入移动设备，这一切都变得疯狂了，有没有一旦窗口大小超过 480 像素，如何停止它？

```
 <script type="text/javascript">
    $(function() {
        var offset = $("#lol").offset();
        var topPadding = 55;
        $(window).scroll(function() {
            if ($(window).scrollTop() > offset.top) {
                $("#lol").stop().animate({
                    marginTop: $(window).scrollTop() - offset.top + topPadding
                });
            } else {
                $("#lol").stop().animate({
                    marginTop: 0 
                });
            };
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:30:49.523

通过“窗口大小”我假设你的意思是宽度：

```
$(window).scroll(function() {

   if(this.innerWidth > 480) {
       //your code
   }

}); 
```

# dojo - 交换 dojox.mobile.Carousel 小部件时处理事件

> ID：13974337
> 
> 赞同：1
> 
> 时间：2012-12-20T14:29:25.970
> 
> 标签：dojo, mobile-website, dojox.mobile

当用户“选择”轮播项目时，dojo 移动文档为您提供了一种监听 ant 事件的方法：http: [//dojotoolkit.org/reference-guide/1.8/dojox/mobile/Carousel.html#handling-the-event - 当A-Carousel-item-IS选择](http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/Carousel.html#handling-the-event-when-a-carousel-item-is-selected)

但是我需要在过渡时执行操作。有办法处理吗？

还有什么地方我可以找到小部件的所有“可处理事件”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:21:29.707

正如您在[API Doc](https://dojotoolkit.org/api/)中所读到的，有一些`event`s 已实现。不幸的是，它们似乎都不符合您的确切要求。

只有`onNextBtnClick(e)`and`onPrevBtnClick(e)`似乎朝着你的方向前进。

还有一个`handleViewChanged(view)`- 方法，但我认为这不是指它本身，`Carousel`而是指它所呈现的设备（比如从纵向模式到横向模式等等）。但由于它没有很深入的记录，我无法确切地说出它的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:18:28.947

您可以订阅在任何视图转换到时发出的 Dojo 主题“/dojox/mobile/viewChanged”，并检查该视图是否是 Carousel 的子视图，如下所示：

```
require(["dojo/topic"], function(topic){
    topic.subscribe("/dojox/mobile/viewChanged", function(view){
        if(view.getParent() === myCarousel){
            // a new view inside my carousel has been transitioned to
            ...
        }
    });
}); 
```

或者，您实际上可以连接到 handleViewChanged 方法，因为 Carousel 在内部订阅“/dojox/mobile/viewChanged”并调用 handleViewChanged。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T14:24:39.220

在了解了有关 Dojo 的更多信息后，我意识到我没有正确处理这个问题。

创建一个继承自 carousel 的新模块。那么您需要做的就是覆盖handleViewChanged 方法（确保调用this.inherited），然后在其中做一些事情。

# angularjs - 表单 post 和 $http.post() 之间的区别

> ID：13974340
> 
> 赞同：4
> 
> 时间：2012-12-20T14:29:30.773
> 
> 标签：angularjs

我正在向后端服务器发布帖子，该服务器是一个 openid 身份验证库。当我有一个简单的表单，它的动作指向服务器 url 时，它就可以工作。

但是，当我使用 $http.post 方法时它失败了。我已经比较了标头并将内容类型更改为 url-form 编码。这解决了部分问题，但来自服务器的重定向仍然失败。

关于导致这种行为的常规形式 post 和 angular 的 $http.post 之间有什么区别的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:58:12.827

> **但来自服务器的重定向仍然失败。**

服务器重定向不应该返回到前端，因为 ajax 请求会给你它到达的最终页面的 http 状态代码。因此，如果您通过 ajax 请求的页面正在重定向到另一个页面，它将为您提供 200 状态。[您可以阅读此http://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send-method](http://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send-method)的 w3c 草案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:45:21.857

如果您真的想看到差异，我建议您设置一个免费工具，例如[Fiddler](http://www.fiddler2.com/fiddler2/)。然后，您可以在请求离开和/或到达时查看请求，并查看每个差异。

但是，理论上，只有您在表单标签或 $http.post 调用中设置的任何差异。我假设他们都在使用 POST。一个可能使用与另一个不同的内容类型（表单标签上的 enctype）......比如“multipart/form-data”或“application/x-www-form-urlencoded”与“application/json”。 ..这是一个关键部分，它告诉服务器您正在发送什么类型的数据。如果服务器期待一种类型并获得另一种类型，那可能是您失败的原因。

但是，如果没有看到您的代码，很难说。

# json - Appcelerator 框架以不同方式处理 JSON

> ID：13974342
> 
> 赞同：1
> 
> 时间：2012-12-20T14:29:36.763
> 
> 标签：json, post, titanium, titanium-mobile

Appcelerator 框架是否以不同的方式处理 JSON，或者我是否遗漏了一些简单的东西？

钛 json -

```
 var params = {
    user: {
        email: email.value,
        password: password.value
    },
    commit: "Sign In"
}; 
```

产生这个作为输出 -

```
 Parameters: {"user"=>"{email=123saurabhjain@gmail.com, password=96e79218965eb72c92a549dd5a330112}"} 
```

但我需要这样的输出 -

```
Parameters: {"user"=>{"email"=>"abcdefgh@gmail.com", "password"=>
FILTERED]"}, "commit"=>"Sign in"} 
```

在前一个输出中，

1)`email`和`password`字段不在双引号中。

2)和字段`=>`没有分配符号。相反，我得到了字段的标志。`email``password``=`

这是怎么回事，因为我的 json 似乎是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:12:45.657

尝试这个：

```
var params= {
    user: {
        email: email.value,
        password: password.value
    },
    commit: "Sign In"
}; 
```

然后像这样发送：

```
loginReq.send(JSON.stringify(params)); 
```

# php - php mysql 插入/更新字段名显示

> ID：13974346
> 
> 赞同：0
> 
> 时间：2012-12-20T14:29:52.627
> 
> 标签：php, mysql, sql, database, insert

我的数据库中有一个问题，在我有一个更新表或插入的 php 脚本中有一个字段名“show”，即使我将其更改为“showz”，所有内容都对字段名“show”有效！我认为这是一个小故障，这是 php 代码的一部分！

```
mysql_query("INSERT INTO db.table (mid, name, show) VALUES ('".$row['mid']."',     '".$row['name']."', '".$row['show']."') ON DUPLICATE KEY UPDATE name = '".$row['name']."',  show = '".$row['show']."'"); 
```

我试图把展示的东西放在“展示”中`show`，“展示”没有任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:32:40.503

那是因为`show`它是一个保留字（如`insert`,`update`等`order`）。您可以在此处阅读有关保留字的信息：[MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

为了使用保留字作为字段名，您需要使用反引号 (`) 将其转义，如下所示：

```
mysql_query("INSERT INTO db.table (mid, name, `show`) VALUES ('".$row['mid']."',     '".$row['name']."', '".$row['show']."') ON DUPLICATE KEY UPDATE name = '".$row['name']."',  `show` = '".$row['show']."'"); 
```

这告诉 mysql 将其视为一个字段，而不是在其保留字含义中使用它。

我发现总是用反引号转义我的表和字段名称是一种很好的做法，如下所示：

```
mysql_query("INSERT INTO `db`.`table` (`mid`, `name`, `show`) VALUES ('".$row['mid']."',     '".$row['name']."', '".$row['show']."') ON DUPLICATE KEY UPDATE `name` = '".$row['name']."',  `show` = '".$row['show']."'"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T14:33:16.837

AS show是[MySQL的保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)，如果用作表名或列名，需要用反引号(`)括起来

```
`show` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T14:33:37.997

您正在使用保留关键字使用反引号

[**表 9.2。MySQL 5.0.96 中的保留字**](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

![在此处输入图像描述](../Images/adf2d15fa5b42c731bc0cd9bd4ba808e.png)

所以像这样使用

```
`show` 
```

而是在反引号中扭曲所有冒号名称是一个好方法

```
mysql_query("INSERT INTO `db`.`table` (`mid`, `name`, `show`) VALUES ('".$row['mid']."',     '".$row['name']."', '".$row['show']."') ON DUPLICATE KEY UPDATE `name` = '".$row['name']."',  `show` = '".$row['show']."'"); 
```

* * *

**笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958)

# backbone.js - 如何检查服务器上是否存在骨干模型

> ID：13974347
> 
> 赞同：3
> 
> 时间：2012-12-20T14:29:56.207
> 
> 标签：backbone.js, model

如果我做

```
var model = new Model({ id : 'someNewId'});
model.fecth(); 
```

然后我得到一个具有默认值的模型，因为服务器上不存在“someNewId”概念的模型。

确保服务器上确实存在模型的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:41:33.957

这实际上取决于您的服务器配置。通常，RESTful 服务会返回 HTTP 错误代码 404 以指示未找到资源。

```
model.fetch({
    success: function(model, response, options) {
        //model exists and is now populated
    },

    error: function(model, xhr, options) {
        if(xhr.status === 404) {
            //model was not found
        } 
        else {
            //some other error
        }
    }
} 
```

# signalr - 遍历 SignalR 客户端

> ID：13974349
> 
> 赞同：0
> 
> 时间：2012-12-20T14:29:58.437
> 
> 标签：signalr, signalr-hub, signalr.client

我对 SignalR 很陌生。我试图寻找解决方案但没有成功。有没有办法遍历 SignalR 中的客户端？也就是说，我需要检查每个客户端的状态，并根据它来决定做什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:36:59.550

我不确定是否有更简单的方法。但我实现它的方式是创建一个静态列表，每次用户连接时，我都会将它们添加到该列表中。并在断开连接时删除用户。

# javascript - 旋转后将图像放入 div

> ID：13974350
> 
> 赞同：4
> 
> 时间：2012-12-20T14:30:02.650
> 
> 标签：javascript, jquery, image, html, css

```
<div id="homePage"
        style="position: relative; margin: 0px; width: 320px; height: 420px;">
        <img id="userImg" src="images/5.jpg" width="100%"
            height="100%" onclick="imageClick()"
            style=" z-index: -1; margin: 0px;   "/>
</div>

<script type="text/javascript">

$(document).ready(function() {
$('#userImg').css('transform', 'rotate(90deg)');

});

</script> 
```

图像在旋转之前适合 div，旋转后它会超出边界，如何将旋转后的图像适合 DIV 尺寸。

**旋转前**

![在此处输入图像描述](../Images/867e6354f2f47335fc027fc9e749f407.png)

**旋转后**

![在此处输入图像描述](../Images/f8c9c6f4c34ad1da16fcd0d97945051b.png)

谢谢，，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:38:25.297

试试下面的。获取图片的宽度和高度，并在旋转后更改尺寸。

```
var w= $('#homePage').width();
var h= $('#homePage').height();
console.log(w);
console.log(h);
$('#userImg').css('transform', 'rotate(90deg)');
$('#homePage').height(h);
$('#homePage').width(w); 
```

​</p>

# android - 异步任务 - 强制关闭

> ID：13974356
> 
> 赞同：1
> 
> 时间：2012-12-20T14:30:26.630
> 
> 标签：android, android-asynctask, forceclose

此调用在以下位置完成`onCreate`：

```
new retreive().execute(); 
```

该类`asyncTask`如下所示：

```
class retreive extends AsyncTask<Void,Void,Void>{
    ProgressDialog dialog = new ProgressDialog(busDisp.this);

    @Override
    protected void onPreExecute(){
        this.dialog.setMessage("Retreiving Bus Routes...");
        this.dialog.show();
        this.dialog.setCancelable(false);
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        busRouteJsonParsing();
        this.dialog.dismiss();
        return null;
    }

    @Override
    protected void onPostExecute(Void voids){
            setContentView(R.layout.buses);
            stop1.setText(Integer.valueOf(stopsCtr[0]).toString()+" stops");
            stop2.setText(Integer.valueOf(stopsCtr[1]).toString()+" stops");
            stop3.setText(Integer.valueOf(stopsCtr[2]).toString()+" stops");
            stop4.setText(Integer.valueOf(stopsCtr[3]).toString()+" stops");
            dur1.setText(dur[0]);
            dur2.setText(dur[1]);
            dur3.setText(dur[2]);
            dur4.setText(dur[3]);
            this.dialog.dismiss();
    } 
```

`onClicks`在这之后有8个`PostExecute`

这是日志：

```
12-20 19:55:57.701: E/WindowManager(982): Activity com.example.Try1.busDisp has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@418b7ad8 that was originally added here
12-20 19:55:57.701: E/WindowManager(982): android.view.WindowLeaked: Activity com.example.Try1.busDisp has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@418b7ad8 that was originally added here
12-20 19:55:57.701: E/WindowManager(982):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
12-20 19:55:57.701: E/WindowManager(982):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
12-20 19:55:57.701: E/WindowManager(982):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
12-20 19:55:57.701: E/WindowManager(982):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
12-20 19:55:57.701: E/WindowManager(982):   at android.view.Window$LocalWindowManager.addView(Window.java:537)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.Dialog.show(Dialog.java:278)
12-20 19:55:57.701: E/WindowManager(982):   at com.example.Try1.busDisp$retreive.onPreExecute(busDisp.java:249)
12-20 19:55:57.701: E/WindowManager(982):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
12-20 19:55:57.701: E/WindowManager(982):   at android.os.AsyncTask.execute(AsyncTask.java:511)
12-20 19:55:57.701: E/WindowManager(982):   at com.example.Try1.busDisp.onCreate(busDisp.java:91)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.Activity.performCreate(Activity.java:4465)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
12-20 19:55:57.701: E/WindowManager(982):   at android.os.Handler.dispatchMessage(Handler.java:99)
12-20 19:55:57.701: E/WindowManager(982):   at android.os.Looper.loop(Looper.java:137)
12-20 19:55:57.701: E/WindowManager(982):   at android.app.ActivityThread.main(ActivityThread.java:4441)
12-20 19:55:57.701: E/WindowManager(982):   at java.lang.reflect.Method.invokeNative(Native Method)
12-20 19:55:57.701: E/WindowManager(982):   at java.lang.reflect.Method.invoke(Method.java:511)
12-20 19:55:57.701: E/WindowManager(982):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
12-20 19:55:57.701: E/WindowManager(982):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
12-20 19:55:57.701: E/WindowManager(982):   at dalvik.system.NativeStart.main(Native Method) 
```

我在第 249 行受到逼迫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:07:24.910

你不应该 `this.dialog.dismiss();`在你的 doinbackground 进程中使用。UI 更新在异步任务 Doinbackground 进程中不起作用。所有 UI 更新仅适用于 Post Execute 和 PreExecute ..

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:00:17.743

您没有在片段中包含行号`onPreExecute()`，`onPreExecute()`但`onCreate()`崩溃`AsyncTask`发生仍然可以轻松访问它。

在对话框上设置完所有其他内容后，您还应该调用`show()`last ，这样您就可以避免在它可见时更改它的状态。

# javascript - 如何在 document.addEventListener() 中调用类函数

> ID：13974360
> 
> 赞同：3
> 
> 时间：2012-12-20T14:30:41.537
> 
> 标签：javascript, event-handling, dom-events

当我加载一个我正在调用的页面时`addEventListener`，`deviceReady`我`addEventListener`想在其中调用一个类中的函数。请参见以下示例：

示例类

```
var HomePageModel = function(){

    this.initModule = function(){
    //doing some process;
    };
}; 
```

我想`initModule`在`addEventListener`.

像

```
document.addEventListener("deviceready", HomePageModel.initModule, false); 
```

是否可以在类外调用类函数`eventlistener` ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:31:47.347

您首先需要一个实例：

```
document.addEventListener("deviceready", new HomePageModel().initModule, false); 
```

请注意，如果您的`initModule`方法使用`this`，它将不起作用，因为`this`将设置为触发事件的元素。为避免这种情况，您可以创建一个绑定到固定值的新函数`this`：

```
var model = new HomePageModel();
var boundFn = model.initModule.bind(model);
document.addEventListener("deviceready", boundFn, false); 
```

最后，您始终可以使用包装函数作为事件处理程序，并从那里调用您的模块初始化程序（不知道为什么您没有考虑过）：

```
document.addEventListener("deviceready", function(){
    new HomePageModel().initModule();
}, false); 
```

# jquery - 谷歌地图获取路线

> ID：13974362
> 
> 赞同：0
> 
> 时间：2012-12-20T14:30:44.553
> 
> 标签：jquery, jquery-ui, google-maps, jquery-mobile, google-maps-api-3

我正在使用这段代码来获取两个位置之间的方向，但这段代码只是显示地图并且不绘制任何方向。

```
$('#map_canvas').gmap({ 
    'center': new google.maps.LatLng(32.498467,74.542126) 
});
$('#map_canvas').gmap('loadDirections', 'panel', { 
    'origin': new google.maps.LatLng(32.498467,74.542126), 
    'destination': new google.maps.LatLng(29.070574,76.112457), 
    'travelMode': google.maps.DirectionsTravelMode.DRIVING 
}); 
```

等待帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:40:28.850

这是我一直使用的代码：
它在地图上显示路线，在#info div 中显示方向信息

```
<form id="route">                      
   <label>Address: <input type="text" id="addr" /></label>
   <button id="route">Calculate route</button>
</form>
<div id="map_canvas"></div>
<div id="info"></div> 
```

```
$(function(){
   var center = new google.maps.LatLng(32.498467,74.542126);
   var map = new google.maps.Map(document.getElementById("map_canvas"),{
      center: center,
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
   });
   var m = new google.maps.Marker({map:map,position:center});
   var dD = new google.maps.DirectionsRenderer({map:map,panel:$('#info')[0]});

   $('#route').submit(function(ev){
      var addr = $('#addr').val();
      var ds = new google.maps.DirectionsService();
      ds.route({
         origin:addr,
         destination:center,
         region:'at',
         travelMode: google.maps.TravelMode.DRIVING
      },function(result,status){
      // if(status == google.maps.DirectionsStatus.OK){
            dD.setDirections(result);  
            $('#info').fadeIn(200);             
      // }
      });
      ev.preventDefault();
   });
}); 
```

# python - 如何使用新值更新 MongoDB 中的字段

> ID：13974365
> 
> 赞同：0
> 
> 时间：2012-12-20T14:30:53.307
> 
> 标签：python, mongodb, pymongo

我正在尝试浏览集合中的记录，其中坐标字段中没有经度/纬度信息。使用 Google 的`geocode()`方法，我选择具有位置信息的记录以转换为坐标，然后更新该`coordinates`字段中的新值，这本来是以前`null`的 .

使用该`find()`方法，我得到了相关的记录，但是这段代码似乎没有被执行，即没有用坐标信息更新记录。这是代码：

```
cursor = coll.find(
                {"$and": [
                            {"coordinates":  {"$type":10}}, 
                            {"place": {"$ne": None}}
                    ]}, 
            {"coordinates": 1, "place": 1, "time_normal": 1, "_id": 1}, tailable = True, timeout = False)

while cursor.alive:
    counter=0
    g = geocoders.Google()
    try:
        doc = cursor.next()
        current_id = doc['_id']
        counter+=1
        print doc  
        placeName = doc['place']['full_name']
        loc = g.geocode(placeName)
        coll.update({"_id" : current_id},{"$set": {"coordinates": loc[1]}})
        print doc          
        time.sleep(0.15)                            
    except (ValueError, geocoders.google.GQueryError):
        pass

    except StopIteration:
        break 
```

我不明白为什么该字段没有被更新。我注意到`print counter`返回 0。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:51:44.833

几件事：

您可以`find`稍微简化您的查询，以删除`$and`在查询选择器中包含多个字段的自然“和”它们：

```
cursor = coll.find(
    {
        {"coordinates":  {"$type":10}},
        {"place": {"$ne": None}}
    }, 
    {"coordinates": 1, "place": 1, "time_normal": 1, "_id": 1}, 
    tailable = True, timeout = False) 
```

但这不应该引起任何问题，而且您的`update`通话看起来不错。但是，不要期望`doc`被`update`调用修改，因为它是调用时文档外观的快照`find`。您需要`find_one({"_id": current_id})`在此时致电以查看更新结果。

如果它看起来仍然没有更新，请查看更新`loc[1]`前的内容，以确保它是您所期望的。

**更新**

问题很可能是您正在尝试更新导致文档大小增加的上限集合。根据[文档](http://docs.mongodb.org/manual/core/capped-collections/#recommendations-and-restrictions)，这将导致更新失败。

# prolog - 如何将一个字符串附加到 SWI Prolog 中第三个字符串中的另一个字符串？

> ID：13974374
> 
> 赞同：2
> 
> 时间：2012-12-20T14:31:35.973
> 
> 标签：prolog, declarative

在这个程序之前，我在下面的例子中看到过元素 X 是否属于字符串 L。

这个例子的代码如下：

```
member2(X, [X|_]).
member2(X,[_|T]):- member2(X,T). 
```

我有一个表示基本情况的事实（如果 X 元素在列表的头部，则它属于列表），并且如果元素 X 不是头部，则使用该规则在列表的尾部递归搜索。 ..

这个版本对我来说非常晦涩难懂，有人建议我以这种方式查看它以了解它是如何工作的：

```
member2(X, [X|_]).
member2(X,Y):- Y = [_|T],
               member2(X,T). 
```

所以意思就更清楚了：

我有一个代表基本情况的事实（如果 X 元素位于列表的头部，则它属于列表）。

规则说我必须证明两件事：

1) Y = [_|T] 这是真的，因为匿名变量 _ 与任何东西统一

2）递归搜索尾列表中的元素X

好的，现在我在理解这个新练习时遇到了问题，我必须编写一个 SWI Prolog 程序，给定两个字符串，将第二个字符串连接到第三个字符串中的第一个字符串

解决方案是：

```
myappend([], L, L).
myappend([X|L1], L2, [X|L]) :- myappend(L1,L2,L). 
```

我有一些问题要理解它是如何工作的

我知道事实代表基本情况：当第一个参数是 void 列表 [] 而第二个参数是非 void 列表时，第一个参数和第二个参数的连接是第二个参数列表（这等于第三个参数）

该规则表示第一个参数不是空列表的一般情况......所以我认为当这种情况发生时，它会删除 L1 参数的头部（第一个列表的头部），直到这是一个空列表 [] ，所以我将有基本情况，第三个参数统一到第二个......然后做回溯......

但是我很难理解该规则是如何运作的：

```
myappend([X|L1], L2, [X|L]) :- myappend(L1,L2,L). 
```

我正在尝试做类似前面示例的操作，并将其翻译成更通俗易懂的逻辑形式，因为这种方式对我来说非常不清楚……但我不知道该怎么做……我该怎么做

这个规则背后的逻辑是什么？这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:04:03.577

```
myappend([], L, L).

myappend([X|L1], L2, [X|L]) :- myappend(L1,L2,L). 
```

第二条规则的更长版本：

```
myappend(L1, L2, Concat) :- 
    L1 = [HeadL1|RestL1], Concat = [HeadConcat|RestConcat], 
    HeadL1 = HeadConcat,
    myappend(RestL1,L2,RestConcat). 
```

第一条规则意味着，如果第一个列表为空，则连接的列表与第二个列表相同。

第二条规则意味着，最终列表将由第一个列表的第一个元素`X`以及一个由第一个列表和第二个列表`L`的其余部分连接而成的列表组成。请注意，第一个参数只有在它是一个列表并且它不为空时才能统一，这是由于 的约束。`L1``L2``[X|L1]`

您可以将谓词视为测试第一个、第二个和第三个参数是否具有第一个和第二个连接的关系是第三个参数。由于在 Prolog 中提取列表的头元素既简单又高效，因此上面的解决方案挑选出第一个元素，匹配它们（`[X|L1]`和`[X|L]`）并测试其余元素是否满足串联关系。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-27T01:15:19.870

串联（[ ]，L，L）。

串联（[X | L1]、L2、[X | L]）：- 串联（L1、L2、L）。

在这里，我们在现有列表的末尾添加元素/列表。

连接（现有列表，元素，[现有列表|元素]）

1 -> 如果列表为空，则连接列表将是第二个列表。以第二个语句为例：现有列表 = [1,2]
添加元素 3

连接（[X|L1]，L2，[X|L]）：- 连接（L1，L2，L）。

连接 ([1|2], 3, [1|x]):-

连接 ([2],3,[2|y]):- (x= [2|y];)

连接 ([], 3, 3)。(y = 3;)

因此最终列表变为 [1,2,3]。

# memory - 具有 cudaHostAllocPortable 的 cudaHostAlloc 内存在不同的线程中不可写

> ID：13974376
> 
> 赞同：0
> 
> 时间：2012-12-20T14:31:39.193
> 
> 标签：memory, memory-management, cuda, access-violation, memcpy

我正在尝试使用工作线程写入 CUDA 主机内存（我在主线程中创建）。代码非常简单。我用

```
unsigned char* _new;
cudaHostAlloc(&_new, _size, cudaHostAllocPortable); 
```

并将指针 _new 传递给另一个线程。但是，该线程在尝试写入时会创建内存冲突

```
memcpy(_new, _source, _size); 
```

或者

```
cudaMemcpy(_new, _source, _size, cudaMemcpyHostToHost); 
```

当我`_new = new unsigned char[_size];`在同一个线程中使用或复制数据时，它可以工作。

有谁知道为什么会发生这种情况以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:13:14.650

经过一个漫长而累人的夜晚，我终于发现了它的问题所在！

写入主线程内存的线程是在 cuda 分配调用之后启动的。因此，一旦线程启动，它并没有意识到这个区域有一些可写的内存，这导致了内存冲突。

为了解决这个问题，我将分配调用移到了线程的 run() 方法中。像这样，当两个线程都处于活动状态时，就会分配内存。固定的！

# php - 从 twitter API 发送直接消息

> ID：13974378
> 
> 赞同：6
> 
> 时间：2012-12-20T14:31:43.170
> 
> 标签：php, twitter

我正在尝试通过 API 通过直接消息向我自己和另一位员工发送内部服务器通知。我已经完成了 dev.twitter 上的 API 设置，并下载了[abraham 的 twitteroauth](https://github.com/abraham/twitteroauth)库。

我需要在哪里寻找直接从服务器发送消息（通过我的帐户），而不必每次都使用浏览器登录？我上次使用 twitter API 是在 oauth 之前，所以已经过去了一段时间。

**tl;dr**需要通过 twitter 发送直接消息而不看到这个![推特按钮](../Images/a0815a7d76039f6940ca47cd7c60fe28.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T16:29:58.713

[您可以从dev.twitter.com](https://dev.twitter.com/apps)上的应用页面获取您的个人令牌并使用它，而无需`Sign in with Twitter`.

在您的应用页面下的部分`OAuth settings`获取：

*   消费者钥匙
*   消费者的秘密

在`Your access token`得到：

*   访问令牌
*   访问令牌秘密

检查访问级别是否为`Read, write, and direct messages`。否则在`Settings`选项卡中更改它并重新创建您的访问令牌（选项卡底部有一个按钮`Details`）。

然后在 php

```
require('Abrahams library');

// Get everything you need from the dev.twitter.com/apps page
$consumer_key = 'APP KEY';
$consumer_secret = 'APP SECRET';
$oauth_token = 'YOUR TOKEN';
$oauth_token_secret = 'YOUR TOKEN SECRET';

// Initialize the connection
$connection = new TwitterOAuth($consumer_key, $consumer_secret, $oauth_token, $oauth_token_secret);

// Send a direct message
$options = array("screen_name" => "theGuyIWantToDM", "text" => "Hey that's my message");
$connection->post('direct_messages/new', $options); 
```

# git - 如何自动确定交互式变基的最佳提交？

> ID：13974381
> 
> 赞同：3
> 
> 时间：2012-12-20T14:31:47.977
> 
> 标签：git, git-rebase, git-interactive-rebase

我经常使用“修复！”，“壁球！” 和“rebase -i”来清理、纠正或只是摆弄最近的、未推动的历史。我想找到一种方法让 Git 自动选择哪个提交对交互式 rebase 最有意义，这样我就可以定义一个别名来进行快速交互式 rebase。

我认为在这种情况下最好的提交将是最近的祖先：

*   出现在任何其他分支（本地或远程）
*   有不止一个父母
*   没有父母

第一个条件确保我不会重写可能影响其他人的提交。第二个确保我不会尝试“通过”合并来变基，这绝对不是我想要的。第三个只是一个健全性检查。

所以问题是，我如何使用 Git 找到那个提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:43:36.410

不完全是您要查找的内容，但是在`git rebase`没有给出起点的情况下调用将使 rebase 从上游分支开始，这在大多数情况下是一个完美的选择。进一步变基会导致您重写已发布的历史记录，这绝不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:14:05.260

所以它并不漂亮，但这就是我想出的。

```
#! /bin/sh

commit=$(git rev-parse HEAD)

while [ "$(git log --format="%p" -1 $commit | wc -w)" -eq 1 ] \
      && [ "$(git branch --all --contains $commit | wc -l)" -eq 1 ]
do
    commit=$(git rev-parse "$commit^")
done

echo $commit 
```

我确信有一种更简单、更强大的方法可以实现这一点，但它似乎可以满足我的要求。非常欢迎提出建议和改进。（例如，最好只使用 Git 管道而不是依赖`wc`.）

# javascript - 在requireJS中执行后备链接时如何创建标志

> ID：13974386
> 
> 赞同：0
> 
> 时间：2012-12-20T14:32:03.697
> 
> 标签：javascript, requirejs

我有这段代码：

```
var skin = "christmas";

    requirejs.config({

    paths: {
        languagesLocal : [
            BaseUrl +  skin + '/js/languagesLocal',
            BaseUrl +  "default" + '/js/languagesLocal'

        ]
    }
}); 
```

我想要一个变量来告诉我执行了哪个链接。

就像是`isFallbackLinkWasExecuted == true`

我怎样才能做到这一点？或执行代码以防触发后备链接。

# php - 在不重新加载页面的情况下更新 div

> ID：13974388
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:32:06.050
> 
> 标签：php, html

我想`check`在不重新加载页面的情况下每 4 秒更新一次 div。我怎么做？

```
<?php 

include 'admin/db.php'; /*including database config*/
$result = mysql_query("SELECT * FROM player ORDER BY id");
while($row = mysql_fetch_array($result))
  {?>
    <div align = "center">
      <table border = "1px">
        <tr>
          <th>Name</th>
          <th>Run</th>
          <th>Bowl</th>
          <th>Strike Rate</th>
          <th>4's</th>
          <th>6's</th>
        </tr>
        <tr>
          <div id = 'check'>
           <td><?=$row['name'];?></td>
           <td><?=$row['run'];?></td>
           <td><?=$row['bowl'];?></td>
           <td><?=$row['sr'];?></td>
           <td><?=$row['numberofFours'];?></td>
           <td><?=$row['numberofsixes'];?></td>
          </div>
        </tr>
      </table>
    </div>
<?php 
}
mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:34:09.057

你必须使用一些 javasrcipt 来实现类似的东西。您可以使用 Ajax 连接到服务器、获取数据和更新页面。

如果您需要异步执行此操作，则应通过（例如）Web 套接字实现长轮询。我已经重读了您的问题，长轮询绝对是您所追求的。

这应该是一个好的开始[如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:45:50.067

就像这里提到的其他帖子一样，您需要使用 AJAX（异步 Javascript 和 XML）技术来实现这一点。下面是一个简单的例子，说明如何做到这一点。

```
var xhr = new XMLHttpRequest();
xhr.open('POST', url, false);
xhr.onreadystatechange = function() {
    if( xhr.readyState === 4 && xhr.status === 200 ) {
        console.log(xhr.responseText);
    }
};
xhr.send("some=data"); 
```

[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

在服务器上，当将初始数据发送到浏览器时，将其与时间戳一起发送，并通过每个 XHR 请求将所述时间戳发送回服务器。

同时在服务器上，如果生成了新内容（行），您将需要更新时间戳。当客户端向服务器发送请求时，检查两个时间戳以查看它们是否相等，如果不相等则将数据发送回客户端并更新 UI。

现在你有一些工作要做。我还将将您链接到一个“长轮询”示例（来自 SO），因为它*应该可以*帮助您编写需要编写的大部分代码。

[如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:33:57.420

在互联网上查看 javascript ajax。

一个使用 jQuery 的简单示例（您不必**使用**）：

```
$.post(someURL, somePostData, function(dataReturned){
    //do something with dataReturned
}); 
```

# python - 如何使用 with 关闭此函数中的文件？

> ID：13974390
> 
> 赞同：0
> 
> 时间：2012-12-20T14:32:10.067
> 
> 标签：python, optimization, file-io

我有以下功能。该程序查看每个文件并将所有 4 个文件中出现的行打印到一个新文件中。我试过`file1.close()`了，但我收到关于关闭集合的错误？我想我可以使用一个`with`语句，但不知道该怎么做，我对编程很陌生。

```
def secretome():
    file1 = set(line.strip() for line in open(path + "goodlistSigP.txt"))
    file2 = set(line.strip() for line in open(path + "tmhmmGoodlist.txt"))
    file3 = set(line.strip() for line in open(path + "targetpGoodlist.txt"))
    file4 = set(line.strip() for line in open(path + "wolfPsortGoodlist.txt"))
    newfile = open(path + "secretome_pass.txt", "w")
    for line in file1 & file2 & file3 & file4:
        if line:
            newfile.write(line + '\n')
    newfile.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:37:47.163

我建议通过将您的集合生成提取到一个函数中来消除重复：

```
def set_from_file(path):
    with open(path) as file:
        return set(lines.strip() for line in file)

def secretome():
    files = ["goodlistSigP.txt", "tmhmmGoodlist.txt", "targetpGoodlist.txt", "wolfPsortGoodlist.txt"]
    data = [set_from_file(os.path.join(path, file)) for file in files]
    with open(path + "secretome_pass.text", "w") as newfile:
        newfile.writelines(line + "/n" for line in set.union(*data) if line) 
```

请注意，您正在代码中进行交集，但您谈论想要一个联合，所以我`union()`在这里使用。还有几个[列表推导/生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:51:18.320

这似乎是一种非常复杂的方法。我建议像我在这里给出的例子。

```
import fileinput
files = ['file1.txt','file2.txt','file3.txt','file4.txt']  
output = open('output.txt','w')

for file in files:
    for line in fileinput.input([file]):
        output.write(line)
    output.write('\n')

output.close() 
```

此代码创建一个包含文件的列表（用所需的文件路径替换名称），创建一个文件来存储每个文件的输出，然后使用 fileinput 模块简单地遍历它们以逐行遍历每个文件，打印每个行到输出文件。'output.write('\n')' 确保下一个文件行的打印从输出文件的新行开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:38:29.127

采取与我原来的方向完全不同的方向（Lattyware 击败了我）：

你可以定义一个函数：

```
def file_lines(fname):
    with open(fname) as f:
         for line in f:
             yield line 
```

现在您可以使用它`itertools.chain`来迭代您的文件：

```
import itertools
def set_from_file(path):
    filenames = ("name1","name2","name3",...)  #your input files go here
    lines = itertools.chain.from_iterable(itertools.imap(file_lines,filenames))
    #lines is an iterable object.  
    #At this point, virtually none of your system's resources have been consumed
    with open("output",'w') as fout:
         #Now we only need enough memory to store the non-duplicate lines :)
         fout.writelines(set( line.strip()+'\n' for line in lines) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:38:16.793

您可以将其放入生成器中：

```
def closingfilelines(*a):
    with open(*a) as f:
        for line in f:
            yield f 
```

并在您当前使用的地方使用它`open()`。

在生成器运行时，文件保持打开状态，如果生成器耗尽，则将其关闭。

如果生成器对象是`.close()`d 或已删除，也会发生同样的情况 - 在这种情况下，生成器会遇到`GeneratorExit`异常，这也会导致`with`子句被保留。

# regex - Google+ 如何解析帖子中的网址？

> ID：13974393
> 
> 赞同：5
> 
> 时间：2012-12-20T14:32:20.163
> 
> 标签：regex, parsing, url, text-parsing

[Google+](http://plus.google.com)似乎使用 The-King-of-URL-Regexes 来解析用户帖子中的傻瓜。它不需要协议，并且可以忽略标点符号。例如：如果我发布“我喜欢 plus.google.com。”，该网站会将其转换为“我喜欢[plus.google.com](http://plus.google.com) ”。因此，如果有人知道可以解析带有和不带有协议的 URL 并且擅长忽略标点符号的正则表达式，请回答。

我不认为这个问题是骗人的，因为我看到的所有类似问题的答案似乎都需要 URL 中的协议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:35:44.993

这是一个更完整的（完整的 URL）实现。请注意，它不完全符合 RFC 3986，缺少一些 TLD，允许一些非法国家 TLD，允许删除协议部分（如原始 Q 中所要求的），并且还有一些其他缺陷。好处是它非常简单，比许多其他实现短得多，并且完成了超过 95% 的工作。

```
#!/usr/bin/perl -w
# URL grammar, not 100% RFC 3986 but pretty good considering the simplicity.
# For more complete implementation options see:
#   http://mathiasbynens.be/demo/url-regex
#   https://gist.github.com/dperini/729294
#   https://github.com/garycourt/uri-js (RFC 3986 compliant)
#
my $Protocol = '(?:https?|ftp)://';
# Add more new TLDs for completeness
my $TLD = '(?:com|net|info|org|gov|edu|[a-z]{2})';
my $UserAuth = '(?:[^\s:@]+:[^\s@]*@)';
my $HostName = '(?:(?:[-\w]+\.)+?' . ${TLD} . ')';
my $Port = '(?::\d+)';
my $Pathname = '/[^\s?#&]*';
my $Arg = '\w+(?:=[^\s&])*';
my $ArgList = "${Arg}(?:\&${Arg})*";
my $QueryArgs = '\?' . ${ArgList};
my $URL = qr/
    (?:${Protocol})?    # Optional, not per RFC!
    ${UserAuth}?
    ${HostName}
    ${Port}?
    (?:${Pathname})?
    (?:${QueryArgs})?
/sox;

while (<>) {
    while (/($URL)/g) {
         print "found URL: $&\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:50:22.293

一个合理的策略是使用正则表达式来匹配以点开头的顶级域 (TLD)，然后运行已知主机表查找或 DNS 查询作为对可疑主机名字符串的验证步骤。

例如，这是一个使用 perl 演示策略第一部分的会话：

```
$ cat hostname-detector
#!/usr/bin/perl -w
# Add more country/new TLDs for completeness
my $TLD = '(?:com|net|info|org|gov|edu)';
while (<>) {
    while (/((?:[-\w]+\.)+?$TLD)/g) {
         print "found hostname: $&\n";
    }
}

$ ./hostname-detector
"I like plus.google.com."
found hostname: plus.google.com

a sentence without a hostname.

here's another host: free.org
found hostname: free.org

a longer.host.name.psu.edu should work too.                    
found hostname: longer.host.name.psu.edu

a host.with-dashes.gov ...
found hostname: host.with-dashes.gov 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:54:13.203

@arielf

在我看来，以下行：

```
my $HostName = '(?:(?:[-\w]+\.)+?' . ${TLD} . ')'; 
```

应该这样修复：

```
my $HostName = '(?:(?:[-\w]+\.)+' . ${TLD} . ')'; 
```

否则，输入[http://www.google.com](http://www.google.com)被解析为

```
found URL: http://www.go
found URL: ogle.com 
```

# ios - rightBarButtonItem，leftBarButtonItem 问题

> ID：13974394
> 
> 赞同：0
> 
> 时间：2012-12-20T14:32:23.693
> 
> 标签：ios, cocoa-touch, uinavigationbar

我有一个 UITableViewController，我想要一个左导航按钮，而不是右导航按钮。rightBarButtonItem 是灰色的，我不能删除，也不能添加左边的。我想我有点困惑，不明白如何在 IB 中做到这一点。我附上了一些我认为显示我的问题的屏幕截图。

我的结果，但我想要左侧的主页图标：

![在此处输入图像描述](../Images/4c15b02e1c9c5d8d846362df9bf72480.png)

IB是如何设置的：

![在此处输入图像描述](../Images/6c96159977403ddfc478b231c4a9708a.png) ![在此处输入图像描述](../Images/bd211601199b28f9d82312478279df21.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:48:57.207

不要在界面生成器上添加任何条形按钮项，以编程方式创建按钮，

如果要将左键用作后退键，请使用：

```
UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithImage:yourImage style:UIBarButtonItemStyleBordered target:nil action:nil];
self.navigationItem.backBarButtonItem = btn; 
```

如果您有自己的方法，请编写一个`yourMethod:`函数

```
UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithImage:yourImage style:UIBarButtonItemStyleBordered target:self action:@selector(yourMethod:)];
self.navigationItem.leftBarButtonItem = btn; 
```

如果您不使用 ARC，请不要忘记释放按钮

# gem - LoadError：没有要加载的文件——机械化

> ID：13974397
> 
> 赞同：7
> 
> 时间：2012-12-20T14:32:32.510
> 
> 标签：gem, mechanize

有什么建议为什么这不起作用？

```
[app (master)]$ gem install mechanize
Successfully installed mechanize-2.5.1
1 gem installed
[app (master)]$ rails c
Loading development environment (Rails 3.2.8)
1.9.2p318 :001 > require 'mechanize'
LoadError: no such file to load -- mechanize 
```

我已经尝试过其他一些 Stack Overflow 答案，比如删除其他版本的 ruby​​，但到目前为止还没有运气。

运行 OS X 10.8.2。

编辑 1

我刚刚删除了 rvm、Ruby 的所有版本（除了系统版本）和所有 gem，然后重新开始。所以，我现在应该有一个干净的系统，但我遇到了同样的问题。

编辑 2

Rails 的新版本是 3.2.3 并收到类似的消息：

```
$ rails c
Loading development environment (Rails 3.2.3)
irb(main):001:0> require 'mechanize'
LoadError: cannot load such file -- mechanize 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:35:53.193

键入`which ruby`并更改顶部的路径`script/rails`以匹配上一个命令返回的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:05:19.157

尝试这样做：

```
export PATH=/opt/local/bin:/opt/local/sbin:$PATH 
```

在您将要运行命令的同一 shell 中执行此操作。希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T13:33:24.937

我发现答案更简单，更愚蠢。在我的 gem 文件中，我从资产组中删除了“sass-rails”。我仍然不知道为什么这会在生产中失败并在我的测试环境中工作 - 此外，我没有使用 Sass，而只是使用常规的 CSS 文件......

# javascript - 使用变量获取 json 对象

> ID：13974400
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:32:41.660
> 
> 标签：javascript, jquery, json, variables

是否可以使用变量来获取 JSON 对象？这是我正在尝试做的一个例子：

```
var test = "json_category";
alert(json.test); 
```

我没有选择这样做`json.json_category`，所以这不是一个选择。我需要使用变量来表示字符串。我只是不确定该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:34:36.680

我*认为*您正在寻找以下内容：

```
var foo = {
    'bar': 'baz';
  },
  key = 'bar';

alert(foo[key]); // baz 
```

可以使用括号表示法 ( `['property']`) 或使用点表示法 ( )来引用对象`.property`；这两个都是有效的：

```
foo['bar'] // baz
foo.bar    // baz 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T14:33:18.223

你正在尝试写

```
alert(json[test]); 
```

# python - PYTHON - 无法识别scrapy startproject 命令

> ID：13974402
> 
> 赞同：4
> 
> 时间：2012-12-20T14:32:53.643
> 
> 标签：python, scrapy

环境 Windows 7 (64) Python 2.7.3 (32) pip install scrapy

我的路径设置为 C:\Python27;C:\Python27\Scripts

安装所有依赖库（lxml、openssl、pywin32、twisted、zope）后，当我 pip install scrapy 时不再出现错误，因此所有内容似乎都根据需要安装

问题：

如果我尝试从 python 目录开始

```
C:\Python27>  scrapy startproject new
'scrapy' is not recgonized as an internal command or external... 
```

如果我尝试从脚本目录开始

```
C:\Python27\Scripts>  scrapy startproject new
'python' is not recgonized as an internal command or external... 
```

如果我尝试从文件夹开始，我想制作新的刮

```
C:\Python27\new>  scrapy startproject new
'scrapy' is not recgonized as an internal command or external... 
```

路径肯定设置正确并且工作正常，否则我将无法使用 pip install、virtualenv 等。 Scrapy startproject 只是 python 操作我有这个问题

请帮助什么可以阻止它看到“scrapy startproject”命令？

更新：

尝试为“只是我”当前用户重新安装 python273 (32)，而不是所有用户，现在已经取得了进展。现在我可以调用scrapy命令，但只有当我在python27目录中明确声明完整路径时。见下文

这不起作用

```
C:\> C:\Python27\Scripts\scrapy version
'python' is not recognized as an internal or external command,
operable program or batch file. 
```

这行得通！

```
C:\> cd python27

C:\Python27> C:\Python27\Scripts\scrapy version
Scrapy 0.16.3 
```

这不起作用

```
C:\Python27> cd scripts

C:\Python27\Scripts> scrapy version
'python' is not recognized as an internal or external command,
operable program or batch file. 
```

什么会导致只有在 python 目录中才需要使用完整路径才能让scrapy 正常工作？

终于能够调用“scrapy startproject”命令，该命令可以工作并生成文件，但在我弄清楚之前我永远不会能够调用“scrapy crawl”命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:50:50.030

添加到此解决方案中，确保环境变量中没有空格。这只是为我解决了这个问题。

例如`C:\Python27;C:\Python27\Scripts NOT C:\Python27; C:\Python27\Scripts`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:40:30.883

菜鸟错误——毕竟我的 PATH 有问题

我看到很多代码示例将路径设置为 set PATH %PATH% .... 并认为这个 PATH 是场景的占位符。我在那里输入 Python

FIX - 我编辑了路径以包含...

对于系统环境变量：

```
Variable name: Path 
Variable value: C:\Python27;C:\Python27\Scripts 
```

重新启动命令提示符，现在一切正常，scrapy 命令按预期工作，可以在主 python 文件夹之外调用，而无需 scrapy 文件的完整目录路径

谢谢 Talvalin，我终于通过你最后的建议找到了这个路径，看看它实际上在读什么

# assembly - 不使用 NEG 指令对 AX 中的字进行 2 的补码

> ID：13974417
> 
> 赞同：1
> 
> 时间：2012-12-20T14:33:34.220
> 
> 标签：assembly, x86, x86-16

如何在`AX`不使用`NEG`指令的情况下找到单词的 2 补码。

这是我尝试的方法：

```
NOT AX
ADC AX, 0x0001 
```

我没有任何方法可以验证我的答案，有什么方法可以运行这些 asm 指令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:44:20.207

我不知道你需要做什么，但无论如何`not`，`inc`做这项工作：

```
not ax
inc ax 
```

# xna - 如何在不模糊图形的情况下全屏绘制？

> ID：13974418
> 
> 赞同：1
> 
> 时间：2012-12-20T14:33:33.810
> 
> 标签：xna

屏幕尺寸为 320x240 - 当全屏显示时，精灵会变得模糊 - 我想以复古（块状）风格显示。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:02:54.830

当调用`Begin()`你的精灵批次时，使用带有点过滤的采样器状态：要么`SamplerState.PointWrap`要么`SamplerState.PointClamp`.

# android - 使用平台证书签名会撤销 WRITE_EXTERNAL_STORAGE

> ID：13974427
> 
> 赞同：2
> 
> 时间：2012-12-20T14:33:52.837
> 
> 标签：android, apk

在[此讨论](http://groups.google.com/group/Android-DevPhone-Updating/tree/browse_frm/month/2010-04?_done=/group/Android-DevPhone-Updating/browse_frm/month/2010-04?&&pli=1)之后，我使用从制造商处收到的特定设备的专有平台证书签署了我正在开发的系统应用程序。我签名如下：

```
java -jar out/host/linux-x86/framework/signapk.jar \
     build/target/product/security/platform.x509.pem \
     build/target/product/security/platform.pk8 \
     Launcher-unsigned.apk \
     Launcher-unsigned.apk
zipalign -f 4 Launcher-signed.apk Launcher.apk 
```

我的启动器具有各种权限：

```
<uses-permission 
    android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
[snip]
<uses-permission
    android:name="android.permission.SET_PREFERRED_APPLICATIONS"
    tools:ignore="ProtectedPermissons" /> 
```

我在清单中包括：

```
<manifest [...]
    android:sharedUserId="android.uid.system" > 
```

以前我的应用程序可以成功写入 SD 卡，但无法设置首选应用程序（[我的代码与此类似](https://stackoverflow.com/a/12618533/154306)），它现在不再抛出 SecurityException，而是写入 SD 卡会抛出 FileNotFoundException 并显示一条消息权限被拒绝。

如果我的应用程序获得了一些受保护的权限，但失去了一些其他权限，会发生什么情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T00:42:11.950

[Ricardo Cerqueira](https://plus.google.com/115049428938715274412)（CyanogenMod 开发人员）非常乐意通过 Google+ 私下回复我：

> 根据设计，系统用户不能写入外部存储。它实际上是唯一被禁止这样做的用户。

# jquery - 如果加载了某些图像，则播放声音

> ID：13974441
> 
> 赞同：-3
> 
> 时间：2012-12-20T14:34:43.763
> 
> 标签：jquery

我有一个声音文件，我希望只有在加载我页面上的某个图像时才能听到他的声音。

我该怎么办？

我需要在准备好的文件中添加什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:36:21.423

包括[`ImagesLoaded()`](https://github.com/desandro/imagesloaded)插件。

**HTML**

```
<audio id="my_sound">
  <source src="horse.mp3" type="audio/mpeg">
  <source src="horse.ogg" type="audio/ogg">

  Your browser does not support this audio format.
</audio> 
```

**jQuery**

```
var audio = document.getElementById('my_sound');

$('img#my_image').imagesLoaded(function(e) {
    audio.play();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:44:47.753

***[jsBin 演示](http://jsbin.com/izunin/2/edit)***

HTML：

```
<img class="alertSound" src="img.jpg" /> 

<audio id="imgLoadedSound" src="loaded.ogg">
  Your browser does not support the <code>audio</code> element.
</audio> 
```

JS：

```
$('img.alertSound').load(function(){
     $('#imgLoadedSound').get(0).play();
}); 
```

或者更好： ***[JsBin 演示](http://jsbin.com/izunin/6/edit)***

```
$(function() {

    function imgIsLoaded() {

      var audio = new Audio('loaded.ogg');
      var img = new Image().src = this;
      img.onload = function(){
        audio.play();
      };

    }

    $('img.alertSound').each(function() {
        if( this.complete ) {
            imgIsLoaded.call( this );
        } else {
            $(this).one('load', imgIsLoaded);
        }
    });

}); 
```

# java - 使用 Maven 项目的依赖项构建？

> ID：13974442
> 
> 赞同：0
> 
> 时间：2012-12-20T14:34:58.653
> 
> 标签：java, maven, netbeans, deployment

我在 NetBeans 中有一个 Maven 项目，它具有各种依赖项，允许我绘制一些 3D 图表/图形（JOGL、Gluegen 和 JZY3D）。如果我从 NetBeans 运行项目，这些工作正常，但是当我将项目构建到 JAR 文件中时，我得到以下...

```
Exception in thread "Building 3D Scatter Plot" java.lang.UnsatisfiedLinkError: no gluegen-rt in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.jogamp.common.jvm.JNILibLoaderBase.loadLibraryInternal(JNILibLoaderBase.java:442) 
```

这是 Maven/NetBeans 没有构建具有所有正确依赖项的 JAR 的问题，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:43:27.060

对于本机库的依赖项，该库必须在您的系统属性中或在系统属性`PATH`中列出。`java.library.path`您可以将其作为参数传递给 java 进程，如下所示：`java -Djava.library.path=/path/to/dir`

我认为您在 Netbeans 之外进行操作时可能会遗漏这部分内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:56:24.860

在我看来，它正在搜索一个 dll (gluegen-rt.dll)，它应该在 java 库路径中。

您可以添加一个 dll 依赖项（您需要在您的 repo 或 Nexus 中手动添加它）：

```
<dependency>
    <groupId>gluegen-rt</groupId>
    <artifactId>gluegen-rt</artifactId>
    <type>dll</type>
</dependency> 
```

# c# - FNV Hash 的 C# 实现

> ID：13974443
> 
> 赞同：9
> 
> 时间：2012-12-20T14:34:59.767
> 
> 标签：c#, .net, hash, fnv

我有很多情况需要在 C# 中访问一个体面的散列算法，从覆盖`GetHashCode`到对数据执行快速比较/查找。

我发现 FNV 哈希是一种非常简单/好/快速的哈希算法。但是，我从未见过 C# 实现的好例子。

FNV-1a哈希算法的核心如下：

```
 hash = OFFSET_BASIS
 foreach (object value in object) 
 {
     hash = hash ^ value.GetHashCode()
     hash = hash * FNV_PRIME
 } 
```

所以，当我覆盖`GetHashCode`一个类时，我最终会做类似的事情：

```
public static class FNVConstants
{
    public static readonly int OffsetBasis = unchecked((int)2166136261);
    public static readonly int Prime = 16777619;
}

public override int GetHashCode()
{
    int hash = Constants.FNVConstants.OffsetBasis;
    hash = (hash ^ EntityId.GetHashCode()) * Constants.FNVConstants.Prime;
    hash = (hash ^ FromDate.GetHashCode()) * Constants.FNVConstants.Prime;
    hash = (hash ^ ToDate.GetHashCode()) * Constants.FNVConstants.Prime;
    return hash;
} 
```

人们对此有何看法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T14:45:47.783

您可以将此添加到您的`FNVConstants`课程中

```
public static int CreateHash(params object[] objs)
{
    return objs.Aggregate(OffsetBasis, (r, o) => (r ^ o.GetHashCode()) * Prime);
} 
```

然后像这样称呼它

```
public override int GetHashCode()
{
    return FNVConstants.CreateHash(EntityId, FromDate, ToDate);
} 
```

# wpf - 如何将控件放置在网格布局面板中的任意位置？

> ID：13974444
> 
> 赞同：0
> 
> 时间：2012-12-20T14:34:59.627
> 
> 标签：wpf, windows-8

是否可以在网格布局面板中的任意位置放置控件？

还是应该使用 Canvas 布局面板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:57:15.953

如果您不使用 的行和列功能，`Grid`则只需使用 a `Canvas`，否则您可以使用`LayoutTransform`,`RenderTransform`或`Margin`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:36:06.070

使用 Canvas 并随机化控件的 Left 和 Top 属性。

# maven - Maven exec 插件 - 执行 python 脚本

> ID：13974445
> 
> 赞同：16
> 
> 时间：2012-12-20T14:35:03.233
> 
> 标签：maven, python-2.7, exec-maven-plugin

我在 Win 7 上使用 maven 来构建应用程序。我使用 exec 插件来调用 python 脚本。

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <executions>
            <execution>
                <id>create-dir</id>
                <phase>process-classes</phase>
                <goals>
                    <goal>exec</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <executable>src/main/upgrade/create.py</executable>
            <arguments>
                <argument>ChangeSet.txt</argument>
            </arguments>
        </configuration>
    </plugin> 
```

构建项目时出现以下错误。

```
Embedded error: Cannot run program "pathToScript/create.py" CreateProcess error=193, %1 is not a valid Win32 application 
```

我确实安装了 python 并将其添加到 %PATH 变量中。

如何修复它以使其独立于操作系统平台工作？

。：-编辑-：。

# 工作代码片段

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <executions>
            <execution>
                <configuration>
                    <executable>python</executable>
                    <workingDirectory>src/main/upgrade/</workingDirectory>
                    <arguments>
                        <argument>createChangeSet.py</argument>
                    </arguments>    

                </configuration>
                <id>python-build</id>
                <phase>prepare-package</phase>
                <goals>
                    <goal>exec</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T17:36:13.590

在 Windows 中，该脚本不可执行。可执行文件是 python 解释器，脚本是它的参数，所以将`<executable>path to your python interpreter</executable>`脚本作为`<argument>`. 我希望同样适用于任何平台，但我不是 Python 专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T19:32:34.953

只是想在新版本的 exec-maven-plugin 中添加它，配置标签​​必须放在执行标签之后才能工作。

如上面的工作片段：

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <executions>
            <execution>
                <id>python-build</id>
                <phase>prepare-package</phase>
                <goals>
                    <goal>exec</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
           <executable>python</executable>
           <workingDirectory>src/main/upgrade/</workingDirectory>
           <arguments>
                <argument>createChangeSet.py</argument>
           </arguments>    
        </configuration>
    </plugin> 
```

# bash - 将变量传递到 ssh 会话中

> ID：13974450
> 
> 赞同：0
> 
> 时间：2012-12-20T14:35:21.827
> 
> 标签：bash, ssh

我是 bash 脚本的新手，所以请耐心等待。我有一个脚本可以执行一些本地操作，然后通过 ssh 进入服务器以在那里执行脚本。这是main.sh：

```
read -p "Comment: " yn
Echo $yn
ssh user@whatever.com << EOF
  cd public_html/subdir/
  sh db/push.sh
EOF 
```

服务器上的文件（push.sh）执行以下操作：

```
mysqldump -u user -ppassw dbname > db/db_sync.sql
git commit  -am "$yn"
git push 
```

所以基本上我需要通过 ssh 传递到 push.sh 中的值 $yn（这是用户输入）。如果我将“读取”放在 ssh 代码块中，它只会跳过它。

任何帮助将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:40:10.570

你能试试下面的吗？

客户端：

```
read -p "Comment: " yn
Echo $yn
ssh maikelva@maikelvanhees.com << EOF
  cd public_html/hackerfit/
  sh db/push.sh "$yn"
EOF 
```

服务器端：

```
mysqldump -u user -ppassw dbname > db/db_sync.sql
git commit  -am "$1"
git push 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:52:14.197

尝试：

```
read -p "Comment: " yn
echo $yn
ssh user@whatever.com << EOF
  cd public_html/subdir/
  yn="$yn" sh db/push.sh
EOF 
```

无需更改whatever.com 端脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:44:53.477

是的，我同意戴夫 G 的观点。

将其作为参数提供，因为 $yn 已由本地 shell 扩展

# jquery - 数据表集成失败并出现错误“Uncaught TypeError: Object [object Object] has no method 'dataTable'”

> ID：13974452
> 
> 赞同：0
> 
> 时间：2012-12-20T14:35:26.740
> 
> 标签：jquery, jquery-ui, datatable

我想将 DataTables 用于我们表的各种功能。我无法解决问题。

我的代码是：

```
<script type="text/javascript" src="<%=Constants.JSROOTURL%>jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.dataTables.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="//datatables.net/download/build/jquery.dataTables.nightly.js"></script>

<script type="text/javascript">
    var jq = jQuery.noConflict();
    jq(document).ready( function(){
        jq("#results").dataTable();
    });
</script> 
```

错误说：

```
Uncaught TypeError: Object [object Object] has no method 'dataTable' imageValidation.html:234
(anonymous function) imageValidation.html:234
n jquery.min.js:2
o.fireWith jquery.min.js:2
e.extend.ready jquery.min.js:2
c.addEventListener.B 
```

任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:41:01.180

剪掉你的`script`标签的第一个 2 （评论是作为一个例子，它们实际上应该被**删除**）：

```
<!--
<script type="text/javascript" src="<%=Constants.JSROOTURL%>jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.dataTables.js"></script> 
-->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="//datatables.net/download/build/jquery.dataTables.nightly.js"></script> 
```

您不应该加载和重新加载库，这可能会搞砸......

此外，使用每晚构建的插件通常不是一个好主意......在生产中可能有问题，只需使用`http://datatables.net/download/build/jquery.dataTables.js`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:40:52.350

第二次加载 jQuery 时，所有插件都消失了。删除再次加载 jQuery 的第三个标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T03:44:01.253

不要使用 Jquery 的 CDN 版本。下载 Jquery 和数据表插件。这是示例

```
<!doctype html>
 <html>
  <head>
   <title>jQuery datagrid</title>

   <style type="text/css" title="currentStyle">
        @import "css/jquery.dataTables.css";
    </style>

   <script src="js/jquery.js"></script>
   <script  src="js/jquery.dataTables.js"></script>
   <script>
     $(document).ready(function() {
         $('#example').dataTable();
       } );
  </script>

</head>
  <body>
    <div id="dvContent">
     <table id="example">
        <thead>
            <tr><th>One</th><th>Two</th></tr>
       </thead>
        <tbody>

        </tbody>
     </table>
    </div>

 </body> 
```

# dynamic - 使用 Moq 模拟果园动态类型

> ID：13974456
> 
> 赞同：2
> 
> 时间：2012-12-20T14:35:33.527
> 
> 标签：dynamic, moq, orchardcms

我想知道是否有人对在 Orchard 中模拟某些 Clay 功能的有效方法有任何建议？我已经创建了一个包装器接口，`IClayWrapper`我包装了一些更复杂的动态调用。不幸的是，这些包装方法需要返回动态对象，所以我仍然遇到问题。这是一个小例子：

```
public interface IClayWrapper : IDependency
{
    dynamic BuildClipCreateViewModel(string projectTitle, string moduleTitle, dynamic clipForm);
}

public class WhenViewingCreateClip : GivenAClipController
{
    private IEnumerable<ContentItem> queryResults;

    protected override ClipController Establish_context()
    {
        var queryResults = new List<ContentItem>
        {
            new ContentItem(),
            new ContentItem(),
        };
        ClayWrapperMock.Setup(x => x.BuildLookupListFromQuery(queryResults, "Create")).Returns(It.IsAny<dynamic>());
    }
} 
```

我目前面临的问题是 Moq 返回此错误：

> 设置：Microsoft.CSharp.RuntimeBinder.RuntimeBinderException：“ `Moq.Language.Flow.ISetup<Aqovia.Module.MotionGallery.Infrastructure.IClayWrapper,object>`”不包含“ `Returns`”的定义

基本上，它将`Returns`方法从 Moq 更改为动态调用，这是我在尝试包装 Clay 材料之前面临的主要问题之一。我还尝试引入具有类似结果的假形状工厂。有没有人找到一种有效的方法来测试这些东西？除了不测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:13:51.783

重点是什么？模拟动态对象是荒谬的，因为您可以比模拟更容易地构建它们，这就是动态语言中通常没有模拟框架的原因：您不需要它们。只需使用真正的粘土对象。

您可能还想知道 Clay 不会随 Orchard 1.7 一起提供。

# javascript - 函数 onkeydown 上的 setInterval

> ID：13974461
> 
> 赞同：0
> 
> 时间：2012-12-20T14:35:43.763
> 
> 标签：javascript, html, setinterval

我想执行空格键（键码 32）并多次运行 setInterval。但现在我只能让空格键工作 1 次。

我想打破 setInterval。当我再次输入空格键时， setInterval 应该再次运行。

```
document.onkeydown = function onkeydown(event) {

  if (event.keyCode == 65) {
    if (PosPlayN >= 150) {
      PosPlayN -= 5;
    }       
  }

  if (event.keyCode == 68) {
    if (PosPlayN <= 200) {
      PosPlayN += 5;
    }
  }

  if (event.keyCode == 32) {

    var jump = setInterval(jumplp, 5);

    function jumplp() {

      if (jumpcheck <= 30) {
        PosPlayN -= 2;
      }

      if (jumpcheck >= 31 && jumpcheck <= 60) {
        PosPlayN += 2;
      }

      if (jumpcheck >= 60) {
        // ----- I want to exit setInterval here -----
      }

      jumpcheck+=1;
    }
  }

  if (event.keyCode == 17) {
    pGo = 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:45:12.077

```
if(jumpcheck >=60){
    clearInterval(jump);
} 
```

# php - 传递可变大小的表格

> ID：13974462
> 
> 赞同：4
> 
> 时间：2012-12-20T14:35:44.450
> 
> 标签：php, javascript, jquery, ajax

我有一个从 MySQL 数据库填充的可变大小（长度）的表单。有 4 个字段构成用于创建按钮的信息（id、button#、name 和 price）。提交表单后，我想将所有值保存到 MySQl db 并使用成功消息更新页面底部的 div。对于我所有其他页面，我使用了类似...

```
xmlhttp.open("GET","myfile.php?a="+val1+"&b="+val2+"&c="+val3+"&d="+val4,true);
xmlhttp.send(); 
```

PHP 文件保存数据并为 div 生成消息。并写入 div...

```
document.getElementById("txtHint").innerHTML=xmlhttp.responseText; 
```

这适用于我的所有其他页面，但由于我不知道会有多少字段，我无法对 xmlhttp.open 语句进行硬编码。

我是 ajax 和 jQuery 的新手，我知道必须有一种方法可以轻松地做到这一点，但我一直无法让任何工作。有人告诉我我可以用这个

```
$.each($('#yourform').serializeArray(), function() { console.log(" <" +this.name+ '>' + this.value + "</" + this.name + "> " ); }); 
```

它确实打印出每个表单元素，但不确定如何将此信息获取到我的 PHP 文件以及如何为 div 生成返回消息。再次，我是 ajax 和 jquery 的新手，所以如果我也能得到一些解释，我相信这将有助于我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:47:44.577

希望这可以帮助：

```
$('form').submit(function() {
    $.post("myfile.php", $(this).serialize(), function(response) {
        console.log(response);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:03:33.233

这样的事情呢？[http://jsfiddle.net/r0k3t/e6W3Z/](http://jsfiddle.net/r0k3t/e6W3Z/)如您所见，您可以添加任意数量的字段，它们都会被转储到 qString 中。

```
$('#yourform').submit(function() {
    var qString = "";
    $('#yourform input[type=text]').each(function() {
       qString += $(this).attr("id") + "=" + $(this).val() + "?";
    });
    console.log(qString);
    return false;
}); 
```

From you question is appears that you can grab the values of the button because you do that elsewhere. Once you are happy with the query string you can use .post as Joe Brown suggested.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:50:09.107

您可以分配变量名称，例如 a00 到 a99、b00 到 b99 等，这些名称在 POST 请求中发送到服务器。然后只需在服务器端检查已设置哪些值，然后进行相应处理。

这有点粗糙，但它应该工作。

# wpf - 使用 ScrollViewer 以编程方式将图像添加到 StackPanel

> ID：13974467
> 
> 赞同：1
> 
> 时间：2012-12-20T14:36:05.027
> 
> 标签：wpf, xaml, c#-4.0

我的代码在目录中搜索包含图像，然后将它们加载到可滚动面板中。

```
foreach (FileInfo item in di.GetFiles())
        {
            if (item.Extension.ToLower().Contains("tif")){

                Image im = new Image();
                im.Height = 93; im.Width = 90;

                im.Margin =new Thickness( imLeft,217,0,0);
                im.Name = "Image" + imLeft.ToString();
                im.MouseLeftButtonDown += im_MouseLeftButtonDown;
                imLeft += 91;
                BitmapImage myBitmapImage = new BitmapImage();

                myBitmapImage.BeginInit();
                myBitmapImage.UriSource = new Uri(item.FullName);

                myBitmapImage.DecodePixelWidth = 200;
                myBitmapImage.EndInit();
                //set image source
                im.Source = myBitmapImage;
                im.Visibility = Visibility.Visible;
                SP1.Children.Add(im);

            }
        } 
```

执行此代码后，我看到滚动出现但图像不可见？在调试时，我看到每一行都使用正确的参数正确执行。所以，我的问题是为什么图像是不可见的？

谢谢你。

这是我的 XAML：

```
<ScrollViewer Margin="0,216,0,9" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Hidden" Name="myScrollViever" >
        <StackPanel Height="90" HorizontalAlignment="Left" Name="SP1" VerticalAlignment="Top" Orientation="Horizontal" 
                    CanHorizontallyScroll="True" ForceCursor="False" SnapsToDevicePixels="True" OverridesDefaultStyle="True" >
        </StackPanel>

  </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:02:57.193

您的图像的上边距为 217，其中 StackPanel 高度仅设置为 90。因此图像位于可见区域之外。

在不设置任何边距的情况下尝试您的解决方案，尤其是在不增加左边距的情况下。这就是 StackPanel 所做的，它在水平方向上并排放置图像，因为您已经设置了`Orientation="Horizontal"`.

* * *

无论如何，更好的解决方案是将 StackPanel 替换为 ListBox 并简单地将图像添加到[Items](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.items.aspx)集合中：

```
<ListBox x:Name="list">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding}" Width="90" Margin="1,0,0,0"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

在代码中，您只需添加如下图像：

```
string directory = ...
foreach (var file in Directory.GetFiles(directory).Where(f => f.EndsWith(".tif")))
{
    // list.Items.Add(new BitmapImage(new Uri(file)));
    // or just add the filename, a default type converter will convert it into an ImageSource
    list.Items.Add(file);
} 
```

* * *

下一步可能是创建一个具有`ImagePaths`类型属性的视图模型对象，`ObservableCollection<string>`并将 ListBox 的[ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource%28v=vs.110%29.aspx)绑定到该属性。

# wcf - WCF 和客户端和服务之间的共享引用库

> ID：13974470
> 
> 赞同：3
> 
> 时间：2012-12-20T14:36:09.377
> 
> 标签：wcf, visual-studio-2012, client-server, asp.net-4.5

Visual Studio 和 SvcUtil 可用于生成代理代码以与服务集成。在 VS 2010 及之前的版本中，如果您想维护共享类型的跨层引用库，则会出现问题。这迫使一些变通方法来解决数据合约类型的等价问题以及无法正确使用本地类型的问题。

问题的 URL 参考： [WCF 客户端代码生成 - “重用引用程序集中的类型”问题](http://blogs.msdn.com/b/distributedservices/archive/2010/02/04/wcf-client-issue-with-reuse-types-from-referenced-assemblies.aspx?wa=wsignin1.0)

我正在使用 Visual Studio 2012、ASP.NET 4.5、C# 代码

我的问题：“在 VS 2012 中是否修复了跨程序集类型的重用？” 我现在正在移植一些代码，但也担心这个错误可能会抬头。我可以运行测试用例，但如果有人已经有答案会更快。根据我的经验，如果您似乎无法在线找到答案（谷歌搜索并不断获得 2011 - 问题仍然存在），则可能没有修复。

我的目标：允许我未来的开发团队在整个公司 .Net 应用程序层和层中重用相同的类型库 [Presentation (Website, Mobile App layer - server side, ...), Domain (Services, Business Logic Layer, Data Access层）]。我想确保一些一致性和代码重用。代码将在每一层中尽可能“松散耦合”，但类型将通过参考程序集来确保。同样，我希望代码能够支持第三方的外部集成。因此，我需要从 DataContractAttribute 修饰类型构造所有代理类型以用于面向外部的服务，并为我的服务器端应用程序维护引用类型。

我会在这里遇到任何泥潭吗？上面链接的问题解决了吗？请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:09:11.723

您报告的存在于*引用程序集中重用类型*选项中的错误发生是因为通过指定重用 VS 调用带有 /r 标志的引擎盖下的 svcutil.exe。

但是，svcutil.exe 用于`DataContractSerializer`帮助生成代码，不幸的是，在解析服务合同时，它[有一套相当严格的规则。](http://msdn.microsoft.com/en-us/library/ms733112.aspx)

因此，除非您为 XSD 提供服务并遵守这组规则，否则 svcutil.exe 将切换为使用`XmlSerializer`不支持 /r 标志（或重用）的 . 因此，您将无法重用类型。

如果您可以引用实际的服务合同类型（通过二进制引用），这是一个更好的解决方案，因为您可以一起取消服务引用。您还可以使用[WSCF.blue](http://wscfblue.codeplex.com/)来生成服务合同，因为它有自己的自定义序列化程序并支持类型的重用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T01:02:43.847

在我的情况下，WebService 和 WebApp 都引用了包含域实体的相同程序集。自然地，每个实体都用 DataContractAttribute 装饰，但是当使用 WebService 公开的端点在 WebApp 中生成 ServiceReference 时`Reuse Type in Referenced Assemblies`，VS2012 似乎忽略了这一点，这导致了本地程序集中的类型的额外副本。然后（经过几个小时的反复试验）我在 WebService 中的接口的 ServiceContractAttribute 中添加了一个命名空间参数。添加后，重新解析的 ServiceReference 开始根据需要引用我的`shared`DataContract 类型。

```
 [ServiceContract(Namespace="http://www.example.com/Demo.WebService/")]
 public interface IConfigurationService { ..methods here.. } 
```

# c++ - 在 VS C++ 项目中创建目录

> ID：13974471
> 
> 赞同：0
> 
> 时间：2012-12-20T14:36:14.823
> 
> 标签：c++, visual-studio-2010, visual-studio

我正在处理一个现有的 C++（非托管）项目，该项目在目录等中结构整齐。荒谬的问题：如何直接从 VS 2010 创建一个新目录？我能看到的唯一相关选项是添加一个新过滤器，但这不会添加一个新目录（我确实检查过）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:40:53.207

在解决方案资源管理器的顶部，您应该有“显示所有文件”选项。这是解决方案资源管理器窗格顶部的一个小图标。如果这样做，右键单击“添加新项目”菜单选项现在将包含“新文件夹”而不是“新过滤器”。

如果您更喜欢过滤器视图（有时将目录中的文件分组到过滤器中很方便），那么您始终可以在添加新项目时创建目录作为该位置的浏览按钮的一部分。

# java - 使用 xslt 1 更改命名空间

> ID：13974473
> 
> 赞同：1
> 
> 时间：2012-12-20T14:36:17.820
> 
> 标签：java, xml, xslt, xslt-1.0

我在这方面遇到的麻烦比我应该做的要多，并且无法找到似乎正确的解决方案：

我想简单地使用 xslt 1.0 更改 XML 文档的名称空间 - 与 java 应用程序一起使用，使用 javax.xml.transform。

这是我的 xml 文档：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Root xmlns="http://namespace1.org" type="Document" version="V2_2">
    <Content>
        <Text>asdf</Text>
    </Content>
</Root> 
```

这就是它在转换后的样子：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Root xmlns="http://namespace2.org" type="Document" version="V2_2">
    <Content>
        <Text>asdf</Text>
    </Content>
</Root> 
```

这是我的 xslt 代码：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns="http://namespace2.org">

  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="*">
     <xsl:element name="{local-name()}" namespace="http://namespace2.org">
        <xsl:apply-templates select="node()|@*"/>
     </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

这是我在转换后得到的实际输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns0:Root xmlns:ns0="http://namespace2.org">2012-11-02T15:39:46.05+01:00DocumentV2_2<ns1:Content xmlns:ns1="http://namespace2.org">
  <ns2:Text xmlns:ns2="http://namespace2.org">asdf</ns2:Text>
 </ns1:Content>
</ns0:Root> 
```

有很多前缀添加的方法，这是我不想要的。

通过使用以下 xlst，我已经能够摆脱 ns+increment 前缀：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns="http://namespace2.org"
 xmlns:cmp="http://namespace2.org"
 exclude-result-prefixes="cmp">

  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="*">
     <xsl:element name="cmp:{name()}" namespace="http://namespace2.org">
       <xsl:copy-of select="@*"/>
       <xsl:apply-templates/>
     </xsl:element>
 </xsl:template>

</xsl:stylesheet> 
```

产生以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<cmp:Root xmlns:cmp="http://namespace2.org" type="Document" version="V2_2">
 <cmp:Content>
  <cmp:Text>asdf</cmp:Text>
 </cmp:Content>
</cmp:Root> 
```

但我无法摆脱“cmp”前缀。

有什么想法可以实现所需的输出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:54:47.173

**这种通用转换**（适用于任何 XML 文档，并且新命名空间作为全局/外部参数传递）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pNewNS" select="'http://namespace2.org'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*">
  <xsl:element name="{name()}" namespace="{$pNewNS}">
   <xsl:copy-of select="namespace::*[not(name() = '')]"/>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{name()}">
   <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>

 <xsl:template match="@*[namespace-uri()=namespace-uri(/*)]">
  <xsl:attribute name="{name()}" namespace="{$pNewNS}">
   <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Root xmlns="http://namespace1.org" type="Document" version="V2_2">
    <Content>
        <Text>asdf</Text>
    </Content>
</Root> 
```

**产生想要的正确结果：**

```
<Root xmlns="http://namespace2.org" type="Document" version="V2_2">
   <Content>
      <Text>asdf</Text>
   </Content>
</Root> 
```

# ruby - 删除 ruby 的版本

> ID：13974479
> 
> 赞同：0
> 
> 时间：2012-12-20T14:36:25.480
> 
> 标签：ruby, rvm

为了让 gem 正常工作，按照 SO 的建议，我删除了旧版本的 ruby​​，如下所示：

```
$ which -a ruby
/Users/snowcrash/.rvm/rubies/ruby-1.9.2-p318/bin/ruby
/Users/snowcrash/.rvm/bin/ruby
$ rm /Users/snowcrash/.rvm/bin/ruby 
```

然而，几个小时后我又试`which -a ruby`了一次，这个文件又回来了：

```
/Users/snowcrash/.rvm/bin/ruby 
```

有什么建议吗？

运行 Mac OS X 10.8.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:49:57.160

我认为您只删除了存根或符号链接。它可能会指向上面安装的另一个红宝石，在更长的路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:09:13.867

我认为您的 RVM 安装很混乱，因为您试图以不受支持的方式删除 Ruby。

RVM 为您管理您的红宝石，并且在 RVM 之外对其中的红宝石做事是很容易理解的，这真的会搞砸它。换句话说，不要在线条之外着色。

照原样，我会`~/.rvm`使用`rm -rf ~/.rvm`并重新安装 RVM 并让它重新安装您想要的红宝石，然后不理会内部结构，直到您真正了解 RVM 的工作原理和管理安装。

而且，当您按照建议使用简单的命令（如 ）删除某些内容的所有版本时`which ruby`，要非常怀疑。Ruby 安装不仅仅是解释器。此外，某些系统（如 Mac OS）会安装 Ruby 供自己使用，删除 Apple 安装的系统版本可能会破坏应用程序。重新安装这些版本真的很痛苦，所以在删除属于某种语言的文件时要小心谨慎，除非你真的知道自己在做什么。

# xpages - 移动页面中的数据视图未找到对预期移动页面的 pageName 引用

> ID：13974482
> 
> 赞同：0
> 
> 时间：2012-12-20T14:36:42.467
> 
> 标签：xpages, dataview, xpages-ssjs, xpages-extlib

我有一个具有多个移动页面的单页应用程序。我有一个以另一个移动页面为目标的视图级移动页面，如下所示：

```
<xe:appPage id="viewPage" pageName="viewPage" preload="true"
        resetContent="true">
        <xe:djxmHeading id="viewPageHeading" back="Back"
            label="Search Results" moveTo="homePage">
        </xe:djxmHeading>
        <xe:dataView rows="7" id="dataView1" pageName="#documentPage"
            openDocAsReadonly="true">
            <xe:this.summaryColumn> 
```

另一个移动页面是“documentPage”，但是单击条目时出现以下错误：

dojox.mobile.View#performTransition：找不到目标视图：null

如果我将 pageName 引用更改为“documentPage”，例如：

```
<xe:dataView rows="7" id="dataView1" pageName="documentPage"
            openDocAsReadonly="true"> 
```

然后我得到一个 404 item not found 错误，就好像它正在应用程序中寻找一个额外的 xpage。

有什么想法可以成功定位到预期的移动页面？

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:11:28.633

这是“XPages Extension Library Demo”中的一个（缩短的）示例：

```
<xe:singlePageApp id="singlePageApp1" selectedPageName="dataView">
    .
    .
    .
    <xe:appPage resetContent="false" id="dataView" pageName="dataView" preload="true">
        <xe:djxmHeading id="mHeader8" label="Data View" back="Home" moveTo="home"></xe:djxmHeading>
        <xe:dataView id="dataView2" var="viewEntry"
            binding="#{viewStateBean.dataIterator}" collapsibleRows="true"
            collapsibleDetail="true" pageName="#document" columnTitles="true"
            rows="10">
            <xe:this.data>
                <xp:dominoView var="view1" viewName="AllThreadsByDate"
                    expandLevel="2">
                </xp:dominoView>
            </xe:this.data>
            .
            .
            .
        </xe:dataView>
    </xe:appPage>

    <xe:appPage id="document" pageName="document" resetContent="true" preload="true">
        <xe:djxmHeading id="mHeader8" label="Document" back="Back" moveTo="dataView" />
        <xp:panel>
            <xp:this.data>
                <xp:dominoDocument var="document1" formName="Contact" />
            </xp:this.data>
            .
            .
            .
        </xp:panel>
    </xe:appPage>
</xe:singlePageApp> 
```

网址从

```
XPagesExt853.nsf/mobileDemo.xsp#dataView 
```

至

```
XPagesExt853.nsf/mobileDemo.xsp#document&databaseName=XPagesExt853.nsf&documentId=454167BB5B230578C1257AD30048E761&action=editDocument 
```

# r - Sampling fixed number of instances from population in R

> ID：13974488
> 
> 赞同：2
> 
> 时间：2012-12-20T14:36:59.610
> 
> 标签：r

I have a variable that contains some numbers which change throughout the program.

e.g.:

```
a<-c(1,2,4,6,5) 
```

I would like to take a fixed number of samples (3) every time:

```
sample(a,3,replace=FALSE) 
```

In some cases it could be that a < 3 in such cases I get the following error:

> Error in sample(a, 3, replace = FALSE, prob = c(weights)) : cannot take a sample larger than the population when 'replace = FALSE'

Is there a way to sample such that if a<3 than it takes as much as it can? For example, if a=2 and sample size should be 3 then it only takes 2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:46:32.340

```
sample(a, min(length(a), 3), replace=FALSE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:43:30.150

You could add a control `if` statement before you sample to check the length of your `a` and adjust `my.size` accordingly.

```
> my.size <- 3
> a <- 1:3
> if (length(a) <= 3)  { 
>     my.size <- length(a)
>     message(paste("Sampling size was reduced to ", my.size, ".", sep = ""))
> }
Sampling size was reduced to 2.
> my.size
[1] 2
> sample(a, size = my.size, replace=FALSE)
[1] 1 2 
```

# css - 根据视口固定位置侧边栏（流体布局）

> ID：13974490
> 
> 赞同：0
> 
> 时间：2012-12-20T14:37:05.557
> 
> 标签：css, css-position, fluid-layout

在 CSS 流体布局中，所有 div 都使用百分比。但是，我需要我的侧边栏有一个固定的位置。

例子：

```
<aside style="width:25%; float:left; position:fixed;">
    aside content
</aside>
<div style="width:75%; float:left;">
    main content    
</div> 
```

我真正想做的是使侧边栏根据视口保持特定的宽度。例如，如果视口在 1000 到 1200 像素之间，我需要它是 300 像素宽。

另一种选择：当它的父 div （我知道我在上面的示例中没有提到父 div）大于 1000 像素时，我也希望它是 300 像素宽。

我想这需要一些 JS 来完成，但在 JS 方面我*完全是个白痴*，所以非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:41:45.580

尝试：

```
@media only screen and (max-device-width: 1024px) { div#sidebar { width: 300px; }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:55:51.333

尝试**CSS 媒体查询**

例子

```
@media all and (min-width:1000px) and  (max-width:1200px)
{
  // css 
}

@media all and (min-width:300px) and (max-width:1000px)
{
   // css 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T01:42:58.243

看起来像重复：[Bootstrap 流体布局 - 侧边栏的固定宽度](https://stackoverflow.com/questions/9589333/bootstrap-fluid-layout-fixed-width-of-sidebar)

我在那里的回答：

我认为你看起来像这样：

```
<div class="sidebar span4">
    this is my fixed sidebar
</div>
<div class="main">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span2">this is fluid</div>
            <div class="span3 offset1">yeah!</div>
            <div class="span6">Awesome!</div>
        </div>
        <div class="row-fluid">
            <div class="span6">1 half</div>
            <div class="span6">2 half</div>
        </div>
    </div>
</div> 
```

为了您的方便，这里有一个小提琴：http: [//jsfiddle.net/TT8uV/2/](http://jsfiddle.net/TT8uV/2/)

作为一般说明：

> 您不需要将引导程序用作“主容器”，因此您可以将侧边栏与网格系统并排放置（如引导程序流体和响应式）。这样您就可以对侧边栏进行***很多***控制，而不会影响实际内容。

希望对你有效。

# objective-c - NSCollectionView 中的居中项目

> ID：13974492
> 
> 赞同：3
> 
> 时间：2012-12-20T14:37:09.943
> 
> 标签：objective-c, center, osx-mountain-lion, nscollectionview, nscollectionviewitem

我正在为 OS X 的应用程序开发一个简单的画廊，默认情况下，a 的项目`NSCollectionView`在左边，我如何让它的项目以它的宽度居中？像这张图片：[![iPhoto](../Images/6abc116564abea13ead31d592f6e4c54.png)](https://i.stack.imgur.com/KATmi.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:19:16.303

设置您的原型视图以包含 NSImageView 的实例（假设这是您用来显示图片的），它是原型视图本身的大小。设置图像视图，使其与原型视图一起调整大小。然后，使用属性检查器，将对齐设置为中心。

# perl - 使用批处理程序进行地理编码

> ID：13974494
> 
> 赞同：1
> 
> 时间：2012-12-20T14:37:17.533
> 
> 标签：perl, geocoding, batch-processing

有没有办法从地址获取和存储纬度和经度？
我工作的客户需要用地理信息丰富他们的主数据库。显然，数据库包含数百万个地址。

出于这个原因，我想实现一个批处理过程，例如在 perl 中。事实上，我找到了几个 CPAN 模块，但我对它们在上述上下文中使用的合法性有一些疑问。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:26:19.023

通过 REST 的地理编码 API 通常受到速率限制（也由于法律原因）。您可以使用 OpenStreetMap 地理编码器，它的限制较少，并且具有维护的 CPAN 模块[Geo::Coder::Many::OSM](https://metacpan.org/module/Geo%3a%3aCoder%3a%3aMany%3a%3aOSM)。如果远程 API 速度对您来说还不够，可以部署本地开源地理编码器：http: [//www.gisgraphy.com/](http://www.gisgraphy.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:37:42.520

如果城市级别的粒度适合您，请检查[Geonames](http://www.geonames.org/)。您可以离线使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:48:06.803

我在[SmartyStreets](http://smartystreets.com)工作，我们提供批量地理编码服务。一般来说，100 万个地址不到一个小时，而且我们之前已经有人通过我们的系统运行了 1.8 亿+。（您还可以在此过程中验证地址是否存在。）

我们没有像谷歌那样的总屋顶级数据（但对于大多数应用程序来说，它已经足够好了，直到我们可以像谷歌一样改进我们的数据）。没有 TOS 限制您可以进行的查询数量或您可以进行地理编码的地址数量。它有列表上传和 API 两种风格。

# java - Android通过USB发送数据

> ID：13974499
> 
> 赞同：2
> 
> 时间：2012-12-20T14:37:31.500
> 
> 标签：java, android, usb

我需要创建一个将平板电脑连接到 USB 的应用程序。然后，平板电脑将连接到 SQL Server 2008 以更新数据。据我了解，数据将在平板电脑中获取，保存在平板电脑中（我假设我将使用 SQLite 来保存数据），当平板电脑连接到网络中的计算机时，它将更新数据库在 SQL Server 中，它具有的新数据在 SQL Server 表中尚不可用。当然，我确实考虑过做一个 Web 服务，因为这是最简单的方法。但该公司不想在网络中注册平板电脑，因此无法通过无线方式发送数据。

我的问题是，有人知道如何在我的应用程序中使用 USB 连接吗？我已经搜索和搜索，发现没有办法做到这一点。我看到了一些关于 ADK 的东西，但我认为这不是我想要的。我只想通过 USB 从 Android 平板电脑传输数据。我可能需要做一些 Java 应用程序，它可以读取通过 USB 发送的数据，然后将其插入 SQL Server。

任何帮助或建议将不胜感激。谢谢你。

# ruby-on-rails-3 - 删除链接表中没有 id 的 has_many through 关系

> ID：13974500
> 
> 赞同：0
> 
> 时间：2012-12-20T14:37:38.237
> 
> 标签：ruby-on-rails-3, model, has-many

我想删除两个模型 Project 和 Language 之间的关系。这两个模型通过一个链接表链接，该表还存储额外的参数（is_default，...）

我的模型是

```
class Project < ActiveRecord::Base
    has_many :links
    has_many :languages, :through => :links
    # ...
end
class Link < ActiveRecord::Base
    belongs_to :project
    belongs_to :language
end
class Language < ActiveRecord::Base
    has_many :links
    has_many :projects, :through => :links
    # ...
end 
```

我在项目控制器中试过这个：

```
 # Removes a languages associated to a project (links table)
  def remove_language
    lang = current_project.links.where("language_id = ?", params[:id])
    current_project.links.delete(lang) if lang

    redirect_to project_path(current_project), notice: 'Language has been removed from project.' 
  end 
```

但我收到以下错误：

```
ActiveRecord::UnknownPrimaryKey in ProjectsController#remove_language
Unknown primary key for table links in model Link. 
```

我的 routes.rb 包含

```
resources :projects
match 'projects/remove_language/:id' => 'projects#remove_language'
match 'projects/add_language/:id' => 'projects#add_language' 
```

我用这个打电话给我的控制器：

```
link_to "Remove", :controller => :projects, :action => :remove_language, :id => a.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:24:17.037

尝试这个：

```
link = current_project.links.find_by_language_id(params[:id])
link.destroy 
```

# android - 在 ImageView 中动态改变图像

> ID：13974504
> 
> 赞同：0
> 
> 时间：2012-12-20T14:37:46.100
> 
> 标签：android, android-asynctask, adapter

我有一个带有片段的 viewPager 活动。它启动 asyncTask 以下载有关六个缩略图的信息，并在 postExecute 上创建我的图像类的六个对象，其中信息和位图对象为空。创建对象时，它会下载图像。构造函数：

```
 public MyImage(String name, String owner, String time, String date,
        String total_rate, String votes, String description) {
    //this.thumbnail = BitmapFactory.
    Log.d(TAG, "Created image object");
    this.name = name;
    this.owner = owner;
    this.time = time;
    this.date = date;
    this.total_rate = Double.valueOf(total_rate);
    this.votes = votes;
    this.description = description;

    downloadThumbnail();
} 
```

该片段中有一个带有六个缩略图的 gridView。我可以为其设置默认图像或progressDialog，但是下载图像后如何更改它？设置监听器？PS我不太了解适配器，可能存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:27:44.867

您可以按如下方式添加回调：首先实现一个类：AsyncImageLoader public class AsyncImageLoader {

```
 public Drawable loadDrawable(final String imageUrl, final ImageCallback imageCallback) {
         final Handler handler = new Handler() {
             public void handleMessage(Message message) {
                 imageCallback.imageLoaded((Drawable) message.obj, imageUrl);
             }
         };
         new Thread() {
             @Override
             public void run() {
                 //TODO SOMETHING
                 ......
             }
         }.start();
         return null;
     }

public interface ImageCallback {
         public void imageLoaded(Drawable imageDrawable, String imageUrl);

     } 
```

然后你可以这样做： AsyncImageLoader asyncImageLoader = new AsyncImageLoader(); ...... Drawable cachedImage = asyncImageLoader.loadDrawable(imageUrl,new ImageCallback() { public void imageLoaded(Drawable imageDrawable, String imageUrl) {

```
 }
        }); 
```

# c# - 将字符串转换为运算符？

> ID：13974506
> 
> 赞同：3
> 
> 时间：2012-12-20T14:37:54.557
> 
> 标签：c#, .net, string

> **可能重复：**
> [.NET 中是否有字符串数学评估器？](https://stackoverflow.com/questions/355062/is-there-a-string-math-evaluator-in-net)

有没有办法在不检查`"+", "-", "*", "/"`然后传递值的情况下转换操作员代码？

```
using System;

namespace ConsoleApplication1
{
    class Program
    {
        private static void Main(string[] args)
        {
            string operator = "+";
            int inputOne = 2;
            int inputTwo = 5;

            Console.WriteLine(Result(inputOne, inputTwo, operator));
            Console.ReadLine();
        }

        public static string Result(int one, int two, string computeOperator)
        {
            if (computeOperator == "+")
            {
                return (one + two).ToString();
            }

            if (computeOperator == "-")
            {
                return (one - two).ToString();
            }

            //and so on...

            return "0";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:40:15.793

**不**，不是你想要的方式。根据定义，[字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)不能转换为运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:44:53.570

您的问题类似于[c# 中词法分析器的示例示例](https://stackoverflow.com/questions/5598288/example-sample-of-lexical-analyzer-in-c-sharp)。您可以尝试使用其中一种词法分析器，但除非您要解析大量文本，否则可能不值得。

作为参考，这可能是该答案中最相关的链接......

[Lucene 文本分析器 - C# | 代码项目](http://www.codeproject.com/KB/cs/lucene_analysis.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:44:07.887

根本**没有**。但是您可以使用[Eval进行计算](http://msdn.microsoft.com/en-us/library/4hx47hfe.aspx)

# c# - 如何获取控件的 GUID

> ID：13974507
> 
> 赞同：1
> 
> 时间：2012-12-20T14:37:54.040
> 
> 标签：c#, winforms

我有一个`Checkbox`数组。我把它放在一个`Listview`. 我`CheckedChanged`为他们设置了事件处理程序。事件`CheckedChanged`成功触发，我想从发送者对象获取控件的 GUID。如何获取 GUID？

```
_ckeckBox[i].CheckedChanged += new EventHandler(frmMain_CheckedChanged);

void frmMain_CheckedChanged(object sender, EventArgs e)
{ 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:51:28.237

正如评论员所提到的，sender 参数告诉您哪个控件正在调用事件：

```
void frmMain_CheckedChanged(object sender, EventArgs e)
{ 
  CheckBox cb = sender as CheckBox;
  if (cb != null) {
    MessageBox.Show("Checked " + cb.Name);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:07:45.823

```
 void frmMain_CheckedChanged(object sender, EventArgs e)
        {
            CheckBox chk = (CheckBox)sender;
            if (chk != null && chk.Tag != null && !string.IsNullOrEmpty(chk.Tag.ToString()))
            {
                NodeManager.UpdateNodeActive(chk.Tag.ToString(), chk.Checked);

                _isCheckUncheckQueued = true;
                ProcessQueuedNodeList();
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:46:09.977

没有这样的“控制指南”..

您可以使用他的唯一 ID 确定调用了哪一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:54:28.903

您可以使用`Name`Win 表单中的属性来确定选中哪个复选框。

# php - Symfony2 - 在 Netbeans 上自动安装资产

> ID：13974509
> 
> 赞同：2
> 
> 时间：2012-12-20T14:38:07.380
> 
> 标签：php, html, css, symfony, assets

现在，当我测试我的应用程序时，我需要在 netbeans 上运行命令：

```
assets:install 
```

我讨厌一遍又一遍地做事……因为 symfony2 需要运行这个命令来将修改后的文件放在正确的路径中。

有没有办法运行该命令或更改配置文件？

使用 --symlink 我收到此消息：

```
 [InvalidArgumentException]                                                                                            
  The symlink() function is not available on your system. You need to install the assets without the --symlink option. 
```

解决了！

我的 Windows 版本 (XP) 不支持 --symlink。我找到了一个适用于 Windows 的 Link shell 扩展，可以做到这一点。这是程序和文档，非常容易使用！

[链接外壳扩展](http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html#introduction)

谢谢大家，这非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:35:57.600

您可以使用命令`--symlink`上的开关`assets:install`：

```
$ php app/console assets:install -h
Usage:
 assets:install [--symlink] [--relative] target

Arguments:
 target      The target directory (usually "web")

Options:
 --symlink   Symlinks the assets instead of copying it
 --relative  Make relative symlinks

Help:
 The assets:install command installs bundle assets into a given
 directory (e.g. the web directory).

 php app/console assets:install web

 A "bundles" directory will be created inside the target directory, and the
 "Resources/public" directory of each bundle will be copied into it.

 To create a symlink to each bundle instead of copying its assets, use the
 --symlink option:

 php app/console assets:install web --symlink 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T23:43:58.660

你是对的，`--symlink`论点是你的解决方案。

假设您使用的是 Windows，您需要做的是从以管理员级别权限运行的命令窗口执行命令。您可以在谷歌上搜索如何为您的操作系统执行此操作，因为在不同版本的 Windows 上有更好的方法，并且您没有说明您使用的是什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T10:36:29.330

解决了！

我的 Windows 版本 (XP) 不支持 --symlink。我找到了一个适用于 Windows 的 Link shell 扩展，可以做到这一点。这是程序和文档，非常容易使用！

[链接外壳扩展](http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html#introduction)

谢谢大家，这非常有帮助。

# c# - 以另一种形式将字符串从datagridview传递到文本框

> ID：13974510
> 
> 赞同：2
> 
> 时间：2012-12-20T14:38:07.940
> 
> 标签：c#, winforms

我已经设置了 2 个表单，其中一个加载了一个 datagridview，用户单击视图以选择他们想要的值。我可以在与 datagridview 相同的表单上的消息框中获取显示的值但是，当我尝试将其传递给另一个表单时，它显示为 NULL。我如何让它在文本框中显示。这是我的代码。当我调试代码时，它首先正确地传递值，但是当它完成运行时，它显示为空值。我已经尝试了许多不同的方法来尝试在不同的类上使用公共变量来做到这一点。

带有文本框的表格一

```
 public void FillTextBoxes(object sender, EventArgs e, string SupplierID)
    {
        supplierVO _SupplierVo = new supplierVO();
        ListOfSuppliers _ListOfSuppliers = new ListOfSuppliers();
        SupplierID = _ListOfSuppliers.SupplierCode;                                   
        MessageBox.Show(SupplierID);
        txtSupplierCode.Text = SupplierID;         
    } 
```

带有 dataGridView 的 Form2

```
 // Links to the user double click of the datagrid
    public void SelectGridInformation (object sender, EventArgs e)
    {   
        ChangeSupplierInfo _ChangeSupplerInfo = new ChangeSupplierInfo();

        supplierVO _SupplierVO = new supplierVO();

        Int32 selectedRowCount = dataGridView1.Rows.GetRowCount(DataGridViewElementStates.Selected);

        string SelectedSupplierID = dataGridView1.SelectedCells[0].Value.ToString();

        SupplierCode = SelectedSupplierID;

        _SupplierVO.SupplierCode = SelectedSupplierID;

        _ChangeSupplerInfo.FillTextBoxes(sender, e, SelectedSupplierID);

        this.Close();
    } 
```

我一直在尝试使用 Get 和 Set 属性来做到这一点，这里是代码示例。

```
 public string SupplierCode
    {
        get
        {
            return _SupplierCode;
        }
        set
        {
            _SupplierCode = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:08:35.903

我不确定我们是否在考虑同样的事情，但看看这个。你有 Form1 在哪里是 DataGridView 和 Form2 在哪里是你的 TextBox。

所以让我们在 Form1 中创建 Form2 ...

```
Form2 form2 = new Form2();
form2.show(); 
```

...并获取 DataGridView 的选定单元格

```
form2.value = getDataGridValue(); 
```

然后，让我们在 Form2 中声明属性，我们将向其传递用户选择的值。

```
private string _value;

public string value
{
    get { return _value; }
    set
    {
      _value = value;
      OnPropertyChanged(_value);
    }
} 
```

请注意，我们正在使用 INotifyPropertyChanged，因此请将此声明包含在 Form2 中

```
public partial class Form2 : Form, INotifyPropertyChanged 
```

创建公共事件

```
public event PropertyChangedEventHandler PropertyChanged; 
```

并在我们的用户单击 DataGridView 中的某些内容的任何地方提起它

```
protected void OnPropertyChanged(string value)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(value));
        }
    } 
```

然后在 Form2Load 上订阅您的新活动

```
private void Form2_Load(object sender, EventArgs e)
{
   PropertyChanged += new PropertyChangedEventHandler(Form2_PropertyChanged);
} 
```

做这些事情

```
void Form2_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
   this.InvokeIfRequired((value) => textBox1.Text = value, e.PropertyName);
} 
```

对我来说它工作正常，我在 Form1 上的 DataGridView 中选择值并在 Form2 上的 TextBox 中获取这个值，但正如我所说，我不确定我们是否在考虑同样的事情......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:37:07.917

如果您在 Form2 中只需要字符串 SupplierID，则在 Form2 中创建一个供应商 ID 变量

```
private String supplierID; 
```

独立于该数据的目的为该变量创建一个属性

然后为 Form2 创建一个新的自定义构造函数

```
public void Form2(String supplierid)
{
    this.supplierID = supplierid;
} 
```

在 Form1 中，当您创建 Form2 的实例时，只需使用您的自定义构造函数

```
//somwhere in Form1
Form2 frm2 = New Form2(SelectedSupllierID)
frm2.ShowDialog() //… 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:01:40.690

此代码中的以下行是您的问题。

```
public void FillTextBoxes(object sender, EventArgs e, string SupplierID)
{
    supplierVO _SupplierVo = new supplierVO();
    ListOfSuppliers _ListOfSuppliers = new ListOfSuppliers();
    SupplierID = _ListOfSuppliers.SupplierCode;   //This line is the problem.                                
    MessageBox.Show(SupplierID);
    txtSupplierCode.Text = SupplierID;         
} 
```

您正在从方法的参数中获取 SupplierID。你为什么用空值更新供应商ID。当您创建 ListOfSuppliers 的新对象时，该类中的 SupplierCode 为空，并且您正在为您的 SupplierID 分配一个空值。

我也看不到变量_ListOfSuppliers 的用途？？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T16:24:01.013

由于某种原因，您无法通过`string`创建表单来传递`New Instance`

试试这个..在您`Form1`尝试通过此代码显示 Form2 时。

```
 using (var f = new Form2
                        {
                            Owner = this
                        }) f.ShowDialog(); 
```

那么在`Form2`事件中，它应该是这样的

```
 Form1 f0 = this.Owner as Form1; //_ChangeSupplerInfo 

    supplierVO _SupplierVO = new supplierVO();

    Int32 selectedRowCount = dataGridView1.Rows.GetRowCount(DataGridViewElementStates.Selected);

    string SelectedSupplierID = dataGridView1.SelectedCells[0].Value.ToString();

    //SupplierCode = SelectedSupplierID;

    //_SupplierVO.SupplierCode = SelectedSupplierID;

    f0.FillTextBoxes(SelectedSupplierID);

    this.Close(); 
```

并从`Form1`

```
 public void FillTextBoxes(string SupplierID)
    {
        supplierVO _SupplierVo = new supplierVO();
        ListOfSuppliers _ListOfSuppliers = new ListOfSuppliers();
        //SupplierID = _ListOfSuppliers.SupplierCode;                                   
        MessageBox.Show(SupplierID);
        txtSupplierCode.Text = SupplierID;         
    } 
```

# c - 从消息队列中读取（如果为空则非阻塞）

> ID：13974512
> 
> 赞同：4
> 
> 时间：2012-12-20T14:38:10.797
> 
> 标签：c, linux, message-queue, sysv-ipc

我正在写消息队列

```
if (msgsnd(q, &msg, sizeof(message), slaves_list[to]) == -1) 
```

和阅读

```
if (msgrcv(q, &msg, sizeof(message), id, 0) == -1) 
```

但是如果这个队列是空的呢？如何检查？如果没有什么我想在循环中执行下一条指令

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:42:53.400

使用`IPC_NOWAIT`. 从[文档](http://pubs.opengroup.org/onlinepubs/7908799/xsh/msgrcv.html)中：

> 如果`(msgflg & IPC_NOWAIT)`为非零，则调用线程将立即返回，返回值为`-1`且 errno 设置为`[ENOMSG]`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T14:43:07.293

对 msgflg 参数使用 IPC_NOWAIT：http: [//man7.org/linux/man-pages/man2/msgsnd.2.html](http://man7.org/linux/man-pages/man2/msgsnd.2.html)

IPC_NOWAIT 如果队列中没有请求类型的消息，则立即返回。系统调用失败，errno 设置为 ENOMSG。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T11:31:08.910

您可以使用检查队列是否为空

```
ipcs 
```

linux终端中的命令。

它将显示您创建的队列。

# ruby-on-rails - Rails 活动管理表单 - 嵌套模型

> ID：13974515
> 
> 赞同：1
> 
> 时间：2012-12-20T14:38:19.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, activeadmin, nested-forms

我想使用单个 Active Admin 表单创建以下两个模型类：

```
class User < ActiveRecord::Base
    has_one :profile
    attr_accessible :email, :profile, :profile_attributes
    accepts_nested_attributes_for :profile
end

class Profile < ActiveRecord::Base
    belongs_to :user
    attr_accessible :name, :user_id
end 
```

以下是我如何使用 Active Admin 将两个模型嵌套在一个“创建用户”表单中：

```
form do |f|
      f.inputs "User Fundamentals" do
        f.input :email
      end

      #f.inputs "User Profile", :for => :profile do |profile_form|
      f.inputs :name => "User Profile", :for => [f.object.profile || Profile.new] do |profile_form|
        profile_form.input :name
      end
      f.buttons
end 
```

表格显示得非常好。但是单击“创建”后，出现以下错误：

```
ActiveRecord::AssociationTypeMismatch in Admin::UsersController#create

Profile(#70204018617440) expected, got ActiveSupport::HashWithIndifferentAccess(#70204014589500) 
```

这是请求参数的样子：

```
{"utf8"=>"✓",
 "authenticity_token"=>"...",
 "user"=>{"email"=>"user@test.com",
 "profile"=>{"name"=>"my name"}},
 "commit"=>"Create User"} 
```

这是跟踪：

```
activerecord (3.2.9) lib/active_record/associations/association.rb:204:in `raise_on_type_mismatch'
activerecord (3.2.9) lib/active_record/associations/has_one_association.rb:8:in `replace'
activerecord (3.2.9) lib/active_record/associations/singular_association.rb:17:in `writer'
activerecord (3.2.9) lib/active_record/associations/builder/association.rb:51:in `block in define_writers'
activerecord (3.2.9) lib/active_record/attribute_assignment.rb:94:in `block in assign_attributes'
activerecord (3.2.9) lib/active_record/attribute_assignment.rb:93:in `each'
activerecord (3.2.9) lib/active_record/attribute_assignment.rb:93:in `assign_attributes'
activerecord (3.2.9) lib/active_record/base.rb:497:in `initialize'
inherited_resources (1.3.1) lib/inherited_resources/base_helpers.rb:52:in `new'
inherited_resources (1.3.1) lib/inherited_resources/base_helpers.rb:52:in `build_resource'
activeadmin (0.5.1) lib/active_admin/resource_controller/callbacks.rb:15:in `build_resource'
inherited_resources (1.3.1) lib/inherited_resources/actions.rb:31:in `create'
activeadmin (0.5.1) lib/active_admin/resource_controller/actions.rb:48:in `create'
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.9) lib/active_support/callbacks.rb:447:in `_run__1741973691692741514__process_action__12141427009768339__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.9) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:601:in `call'
omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
sass (3.2.3) lib/sass/plugin/rack.rb:54:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.9) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__1872540156051940127__call__3542490292744583204__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.9) lib/rails/engine.rb:479:in `call'
railties (3.2.9) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service' 
```

我试图解决这个问题很长一段时间（添加了accepts_nested_attributes_for等），但似乎无法找出可能导致这种情况的原因。因此，任何帮助将不胜感激！谢谢！

更新：我的路线：

```
batch_action_admin_users POST   /admin/users/batch_action(.:format)              admin/users#batch_action
                          admin_users GET    /admin/users(.:format)                           admin/users#index
                                      POST   /admin/users(.:format)                           admin/users#create
                       new_admin_user GET    /admin/users/new(.:format)                       admin/users#new
                      edit_admin_user GET    /admin/users/:id/edit(.:format)                  admin/users#edit
                           admin_user GET    /admin/users/:id(.:format)                       admin/users#show
                                      PUT    /admin/users/:id(.:format)                       admin/users#update
                                      DELETE /admin/users/:id(.:format)                       admin/users#destroy 
```

更新 2：这是我的 routes.rb 文件：

```
MyApp::Application.routes.draw do
    resources :users
    resources :profiles
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:17:56.367

终于设法解决了这个烦人的问题。这就是我的做法。

在迁移中，我将 user_id 的 t.integer 更改为 t.references 用户：

```
class CreateProfiles < ActiveRecord::Migration
  def change
     create_table :profiles do |t|
        t.references :user
        t.string :name
        t.timestamps
     end
  end
end 
```

最重要的是，我在我的用户和个人资料模型中添加了以下几行：

```
class User < ActiveRecord::Base
  has_one :profile
  accepts_nested_attributes_for :profile
  attr_accessible :email, :profile
  alias_method :subtest=, :subtest_attributes= # <-- THIS is the new addition
end 
```

现在它就像一个魅力:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:31:57.590

好的，我认为这可能有效，

```
 resources :users do
 resources :profiles
 end 
```

# java - Android Java 语法错误

> ID：13974530
> 
> 赞同：0
> 
> 时间：2012-12-20T14:39:20.170
> 
> 标签：java, android, sqlite, android-sqlite

我正在使用 sqlite 编写一个小型应用程序。
调试器说有语法错误。我试过但我找不到它在哪里。

> 12-20 14:13:40.353: E/SQLiteLog(2329): (1) 靠近 ",": 语法错误
> 
> SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase$CursorFactory, String, String[], String, CancellationSignal) line: 1317
> SQLiteDatabase.rawQuery(String, String[]) line: 1253
> TemporaryDatabase.EntryGiris(int, String, int, int, int, int, int, int, int, int, int) 行：125

这是代码：

```
public class TemporaryDatabase {
......

    String entryGirisSQL="SELECT "+C_ID
                        +" FROM harcamalar WHERE "+C_YIL+"="
                        +yilsql+","+C_AY+"="+aysql;
    Cursor  cursor=ourDatabase.rawQuery(entryGirisSQL, null);   
    int index=cursor.getColumnIndex(C_ID);
    if(index>=0)
        ourDatabase.update(DB_TABLE, cv, "c_id="+index, null);
    else ourDatabase.insert(DB_TABLE, null, cv);
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:43:33.493

问题在于您的 SQL 查询。

```
SELECT "+C_ID+" FROM harcamalar WHERE "+C_YIL+"="+yilsql+","+C_AY+"="+aysql; 
```

SQL 不支持将逗号作为`WHERE`子句的一部分。您需要使用`AND`和`OR`组合多个表达式。根据您的尝试，我假设您希望两者都满意。因此，您应该使用`AND`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:43:28.933

```
getDataHesaplaSQL="SELECT * FROM harcamalar WHERE "+C_YIL+"="+yilsql+","+C_AY+"="+aysql; 
```

嗯，逗号在 where 子句中似乎不合适。你不是说`" AND "`或`"OR"`吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T14:43:25.283

```
String entryHesaplaSQL="SELECT c_id FROM harcamalar WHERE "+C_YIL+"="+yilsql+","+C_AY+"="+aysql; 
```

是错误的，WHERE 子句没有，在它们有“AND”或“OR”的条件之间

# neo4j - 如果远程数据库关闭，Neo4j graphDatabaseService 会在上下文初始化时爆炸

> ID：13974533
> 
> 赞同：0
> 
> 时间：2012-12-20T14:39:34.690
> 
> 标签：neo4j, spring-data-neo4j, spring-data-graph

当 Neo4j 配置被初始化，并且远程数据库没有运行时，服务器将不会启动......

```
 <neo4j:config graphDatabaseService="graphDatabaseService" />
    <bean id="graphDatabaseService class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
    <constructor-arg index="0" value="http://220.10.25.24:7474/db/data/" /> 
    </bean> 
```

当服务器没有运行时，有没有办法优雅地停止或停止它的创建？

这是一个更大的应用程序中的一个模块，我无法启动应用程序 b/c Neo4j 已停止运行..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:19:44.753

不确定那里有一个好的钩子，也许您可​​以在 [https://github.com/neo4j/java-rest-binding](https://github.com/neo4j/java-rest-binding)中提出一个问题，以公开异常或某种检查方法来确定 neo4j 服务器是否还活着?

# jquery - Jquery 比较两个变量，看它们是否匹配，但一个超出范围？

> ID：13974535
> 
> 赞同：1
> 
> 时间：2012-12-20T14:39:36.403
> 
> 标签：jquery, variables, compare, match

对于一个小型益智/记忆游戏，我想比较两块拼图。如果它们相同（具有相同的字母），我想提醒（'匹配'）。我认为我的方法是正确的，但现在其中一个变量似乎超出了范围，因为我不知道我应该把它放在我的代码中的哪个位置。所以现在它返回第二块，但第一块保持未定义。你能帮我吗？非常感谢！

单击 shuffle & show，然后单击 2 件，您将看到“未定义”语句。我想知道为什么它不起作用，什么使它起作用以及为什么：P

**HTML**

```
<button id="shuffle">Show and Shuffle</button>

<div id="container">
   <div class="choices"><div class="letter">A</div></div>
   <div class="choices"><div class="letter">B</div></div>
   <div class="choices"><div class="letter">C</div></div>
   <div class="choices"><div class="letter">A</div></div>
</div> 
```

**JS**

```
var amountofclicks = 0;
var firstcard = false;
var secondcard = false;

$('#shuffle').bind('click', function() {

    var divs = $("div.choices").get().sort(function() {
        return Math.round(Math.random());
    }).slice(0, 16);

    $(divs).appendTo(divs[0].parentNode).show();

});

$('.choices').bind('click', function() {

    if (amountofclicks < 2) {
        amountofclicks++;
        $(this).unbind('click');
        if (amountofclicks == 1) {
            firstcard = true;
            var txt = $(this).find('.letter').text();

        }

        if (amountofclicks == 2) {
            secondcard = true;

            var txt2 = $(this).find('.letter').text();
            alert(txt + ' ' + txt2);

        }

    }

}); 
```

[**有问题的 JSFIDLLE**](http://jsfiddle.net/QxSxh/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:42:13.503

您需要将`txt`变量移到函数之外，以便在第二次单击时读取它。像这样的东西：

```
var amountofclicks = 0;
var firstcard = false;
var secondcard = false;
var txt; // store here 
```

然后，您需要`var`从最初设置值的行中删除 ：

```
if (amountofclicks == 1) {
    firstcard = true;
    txt = $(this).find('.letter').text(); // note: 'var' removed
} 
```

[**工作小提琴**](http://jsfiddle.net/QxSxh/2/)

* * *

使用难看的外部变量的另一种方法是`data`在具有第一张卡值的容器上设置一个属性，如下所示：

```
if (amountofclicks == 1) {
    firstcard = true;
    $("#container").data('first-letter', $(this).find('.letter').text());
}

if (amountofclicks == 2) {
    secondcard = true;

    var txt = $("#container").data('first-letter');
    var txt2 = $(this).find('.letter').text();
    alert(txt + ' ' + txt2);
} 
```

[**示例小提琴**](http://jsfiddle.net/QxSxh/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:04:51.230

你的第一段代码似乎没问题。第二块没有。它可以变得更容易

```
var amountofclicks = 0;
var firstcard = false;
var secondcard = false;

$('#shuffle').bind('click', function() {

  var divs = $("div.choices").get().sort(function() {
    return Math.round(Math.random());
  }).slice(0, 16);

  $(divs).appendTo(divs[0].parentNode).show();

});

var firstChoise = null;

$('.choices').bind('click', function() {
  var $self = $(this);
  if (firstChoise == null) {
     firstChoise = $self.find('.letter').html();
  } else if (firstChoise == $self.find('.letter').html()) {
    alert('Choise: 2x'+firstChoise);
    firstChoise = null;
  } else {
    alert('Choise: 1x'+firstChoise+' 1x'+$self.find('.letter').html());
    firstChoise = null;
  }
});​ 
```

[http://jsfiddle.net/czGZZ/1/](http://jsfiddle.net/czGZZ/1/)

# c++ - C++中的打印百分比

> ID：13974536
> 
> 赞同：3
> 
> 时间：2012-12-20T14:39:53.707
> 
> 标签：c++, percentage

> **可能重复：**
> [C++ int float 问题](https://stackoverflow.com/questions/5456801/c-int-float-problem)

我只是想计算和打印一个百分比，虽然计算中使用的变量显示正确，但最终百分比一直显示为“0”。这是代码：

```
 int iWageredTot = iBet * 4 * iGames;
    cout<<"Total Won: "<<iBankRoll<<endl;
    cout<<"Wagered total: "<<iWageredTot<<endl;
    float iPercent;
    iPercent = iBankRoll / iWageredTot;
    cout<<iPercent<<"% edge\n"<<endl; 
```

这是输出：

```
Total won: -770
Wagered Total: 4000
0% edge 
```

我尝试使用 int、float 和 double。我错过了什么？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:40:38.270

也许

```
iPercent = (float)iBankRoll / iWageredTot; 
```

如果`iBankRoll`和`iWageredTot`被声明为`int`,`iBankRoll / iWageredTot`也将是一个`int`which 将被转换为`float`，但如果它最初是`0`，你最终会得到一个`float`0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:41:56.943

您需要将 的操作数之一转换`/`为浮点类型，否则将执行整数除法。您目前也只是在计算一个分数。如果你想要一个百分比，你需要乘以 100。

```
iPercent = (static_cast<float>(iBankRoll) / iWageredTot) * 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:42:33.473

您正在执行（看起来像）整数除法，然后将该操作的结果分配给浮点数。这就是浮点数为零的原因。

要更正此问题，请改为执行浮点运算：

```
iPercent = (float)iBankRoll/(float)iWageredTot; 
```

# c++ - 模板模板代码不起作用

> ID：13974555
> 
> 赞同：6
> 
> 时间：2012-12-20T14:41:02.897
> 
> 标签：c++, templates

我正在使用 gcc/4.7，我需要在模板函数（或成员函数）中使用模板模板参数实例化一个类。我收到以下错误

```
test.cpp: In function 'void setup(Pattern_Type&)':
test.cpp:17:34: error: type/value mismatch at argument 1 in template parameter list for 'template<template<class> class C> struct A'
test.cpp:17:34: error:   expected a class template, got 'typename Pattern_Type::traits'
test.cpp:17:37: error: invalid type in declaration before ';' token
test.cpp:18:5: error: request for member 'b' in 'a', which is of non-class type 'int' 
```

通过注释代码片段中标记的两行代码运行，因此 A a 可以在“main”中实例化，但不能在“setup”中实例化。我认为其他人也会对此感兴趣，并且我很高兴了解代码不起作用的原因。这是代码

```
struct PT {
  template <typename T>
  struct traits {
    int c;
  };
};

template <template <typename> class C>
struct A {
  typedef C<int> type;
  type b;
};

template <typename Pattern_Type>
void setup(Pattern_Type &halo_exchange) {
  A<typename Pattern_Type::traits> a; // Line 17: Comment this
  a.b.c=10; // Comment this
}

int main() {
  A<PT::traits> a;

  a.b.c=10;

  return 0;
} 
```

感谢您的任何建议和修复！毛罗

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T14:50:12.663

您需要标记`Pattern_Type::traits`为模板：

```
A<Pattern_Type::template traits> a; 
```

这是必需的，因为它依赖于模板参数`Pattern_Type`。

你也不应该`typename`在那里使用，因为`traits`它是一个模板，而不是一个类型。

# c# - 使用便携式库的 POST/PUT 请求

> ID：13974558
> 
> 赞同：2
> 
> 时间：2012-12-20T14:41:10.953
> 
> 标签：c#, .net-4.0, portable-class-library

我们创建了一个可移植类库项目来为我们的 ASP.NET Web Api Rest 服务编写一个客户端/包装器/代理项目。

我会直截了当地说：似乎我们不能执行具有正文的 POST/PUT 请求。

```
var dataBytes = Encoding.UTF8.GetBytes(data);

var requestHandle = request.BeginGetRequestStream(ar =>
{
    using (var stream = request.EndGetRequestStream(ar))
    {
        stream.Write(dataBytes, 0, dataBytes.Length); // Exception thrown here
    }
}, null); 
```

一旦我尝试写入请求，我就会得到一个异常：

> 请求被中止：连接意外关闭。

过了一会儿，我发现 stream.CanWrite 是假的，所以它是不可写的，这几乎意味着我们不能对 body 做任何 POST 请求。

有人可以在这里帮助我们并告诉我们应该如何执行 POST 请求吗？我在这里找到了另一个帖子，答案是看看 RestSharp 但这似乎也不起作用，因为它不支持便携式库。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:27:16.797

这看起来不像是特定于可移植类库的问题。如果您在特定于平台的库中运行相同的代码，我预计它会以同样的方式失败。所以我希望问题出在您创建或使用 HttpWebRequest 的方式上，或者可能是服务器端的问题。

您在哪个平台上运行它并遇到故障？

您可能想查看[Async Targeting Pack](http://nuget.org/packages/Microsoft.Bcl.Async/)（[更多信息](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)）。这将添加异步和等待支持以及一些扩展方法，例如 GetRequestStreamAsync()，因此您将能够使用以下代码（在异步方法内）：

```
using (var stream = await request.GetRequestStreamAsync())
{
    stream.Write(dataBytes, 0, dataBytes.Length);
} 
```

行为应该是相同的，所以我不希望这本身会解决你的问题。

# process - 无法找到 ssas 属性键，即使它存在并且不是由于重复

> ID：13974559
> 
> 赞同：29
> 
> 时间：2012-12-20T14:41:19.573
> 
> 标签：process, ssas, runtime-error, cube

前几天对事实表和维度表中的表/列名进行了一些更改后，我试图重建我的多维数据集。

进程多维数据集操作不断返回以下错误消息：

> 处理时找不到属性键：表：'MyFactTableName'，列：'MyDimensionKey'，值：'SomeValue'。该属性是“MyDimensionKey”。

类似问题的其他答案涉及具有重复值的属性，以及属性值在 Dimension 或 Fact 表中为空或缺失的情况。

示例相关帖子是：

*   [ssas维度处理键未找到错误](https://stackoverflow.com/questions/12544323/ssas-dimension-processing-key-not-found-error)
*   [找不到密钥错误](https://stackoverflow.com/questions/9738803/key-not-found-error)

在我的案例中没有重复值，并且 Fact 或 Dimension 表中都没有缺少属性值。

谢天谢地，这篇文章中的信息[解决](http://www.sqlservercentral.com/Forums/Topic1219713-17-1.aspx)了我的问题。

建议是自己处理受影响的Dimension，然后处理受影响的度量值组。

知道为什么会发生这种情况，我怎么能重现这个？我想知道这样我下次可以避免它，或者在部署升级到生产环境时它不会在糟糕的时候再次弹出。

在此先感谢您的帮助。

编辑：我使用的是 SSAS-2008，在尝试从 BIDS-2008 中处理多维数据集时发生错误。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-05T12:26:23.753

发生这种情况是因为您的度量值组是在相关维度之前处理的。SSAS 遇到用于与多维数据集维度相关的外键，但维度本身不知道该键。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-05-18T08:40:36.340

此错误的根本原因：事实表中存在一些键，而维度表中不存在该键（理想情况下不应如此）尝试以下步骤：

1.  在处理度量组之前处理您的维度

2.  如果您的“SomeValue”为 0，则尝试在维度表中添加默认（第 0 行）并在 Fact 表中尝试放入 ISNULL(MyDimensionKey,0)

3.  如果以上 2 个解决方案不起作用，请尝试以下操作：右键单击您的多维数据集数据库，转到“进程”>>“更改设置” b。转到“维度键错误”选项卡 c。选中“使用自定义错误配置”单选按钮 d。选中“忽略错误计数”单选按钮。对于“找不到密钥”，请选择“忽略错误”。同样对于“不允许空键”也选择“忽略错误”e。单击确定并尝试处理您的多维数据集

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-26T14:24:42.393

我遇到了类似错误的问题，原因是我已将表名称更改为具有相同名称的视图，但 DSV 或尺寸无法自动调整此更改。

所以我不得不手动更新每个维度属性后面的字段。

可以在每个维度属性的属性中完成：Source>>KeyColumns>>"Attribename">>Source>>TableID, columnID

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T02:21:46.503

我遇到的是我的基础数据库中有两条记录，“ABC”和“abc”，Distinct 子句使它们成为 1（“ABC”）记录，因为我的 sql 服务器不区分大小写，但 SSAS 服务是在我的情况下区分大小写，因此属性值“abc”在处理多维数据集时找不到它的键。HIH

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-09T20:41:51.927

测试一下，让我们从像这样的 Dimension 开始：

![方面](../Images/1235a64e901a6c417107e398e2f154f6.png)

这是我的解决方案：

![在此处输入图像描述](../Images/4cbfa5b16df503c8997b57b548b3bad7.png)

# javascript - jquery jcarousel如何添加控制按钮

> ID：13974574
> 
> 赞同：8
> 
> 时间：2012-12-20T14:42:14.447
> 
> 标签：javascript, jquery, carousel

我目前正在一个使用 Sorgilla jquery jcarousel 的网站上工作，有两个滑块一起工作。

```
var carousel_2;
jQuery(document).ready(function() {
jQuery('#right-carousel').jcarousel({
    start: 1, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:3,
    vertical:true,

    itemFirstInCallback: {
    onBeforeAnimation: function(carousel, item, index, action) {
        if (carousel_2) {
            carousel_2[action]();
        }

            }
        }
    });
});

jQuery(document).ready(function() {
jQuery('#mycarousel').jcarousel({
    start: 3, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:3,
    vertical:false,
    buttonNextHTML: null,
    buttonPrevHTML: null,
    initCallback: function(c) {
    carousel_2 = c;
}
}); 
```

});

这可以正常工作，但我想知道是否可以使用我正在使用的设置添加外部控件。不幸的是，我对 jquery 很陌生，所以还在学习。

我想做的是在轮播下面添加按钮，就像分页一样，这里有一个例子...... [http://truelogic.org/multicarousel.php](http://truelogic.org/multicarousel.php) 或[http://www.skyports.com](http://www.skyports.com)

这是我在 [http://hartyinternational.hailstormcommerce.com/上工作的网站](http://hartyinternational.hailstormcommerce.com/)

理想情况下，如果我能让那些分页按钮与上面类似，那就太好了。

我在旋转木马下面设置了这个 css。

```
.jcarousel-pagination {
width:100px;
height:40px;
position:absolute;
right:100px;
bottom:0px;
background:#000;

}

.jcarousel-pagination a {
font-size: 75%;
text-decoration: none;
padding: 0 5px;
margin: 0 0 5px 0;
border: 1px solid #fff;
color: #eee;
background-color: #4088b8;
font-weight: bold; 
} 
```

这是一些文档... [http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/)

我正在考虑将此代码添加到内部的函数中，`initCallback:`但不确定如何使其工作或如何告诉它哪个按钮代表什么幻灯片...

```
 jQuery('.jcarousel-pagination a').bind('click', function() {
            carousel.scroll(jQuery.jcarousel.intval(jQuery(this).text()));
            return false;
            }); 
```

任何帮助都会很棒，我知道这是一个普遍的问题，但我不知道从哪里开始谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:20:13.737

在临时网页上复制/粘贴以下代码，确保 Javascript 页面指向它们所在的文件夹，这应该可以工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="../style.css" rel="stylesheet" type="text/css" />
<!--
  jQuery library
-->
<script type="text/javascript" src="../lib/jquery-1.4.2.min.js"></script>
<!--
  jCarousel library
-->
<script type="text/javascript" src="../lib/jquery.jcarousel.min.js"></script>
<!--
  jCarousel skin stylesheet
-->
<link rel="stylesheet" type="text/css" href="../skins/tango/skin.css" />
<title>Untitled Document</title>
<style type="text/css">

/**
 * Additional styles for the controls.
 */
.jcarousel-control {
    margin-bottom: 10px;
    text-align: center;
}

.jcarousel-control a {
    font-size: 75%;
    text-decoration: none;
    padding: 0 5px;
    margin: 0 0 5px 0;
    border: 1px solid #fff;
    color: #eee;
    background-color: #4088b8;
    font-weight: bold;
}

.jcarousel-control a:focus,
.jcarousel-control a:active {
    outline: none;
}

.jcarousel-scroll {
    margin-top: 10px;
    text-align: center;
}

.jcarousel-scroll form {
    margin: 0;
    padding: 0;
}

.jcarousel-scroll select {
    font-size: 75%;
}

#mycarousel-next,
#mycarousel-prev {
    cursor: pointer;
    margin-bottom: -10px;
    text-decoration: underline;
    font-size: 11px;
}

</style>

<script type="text/javascript">

// for #mycarousel
function mycarousel_initCallback(carousel) {
    jQuery('.jcarousel-control a').bind('click', function() {
        carousel.scroll(jQuery.jcarousel.intval(jQuery(this).text()));
        return false;
    });
};
// end for #mycarousel

// for #right-carousel
function right_carousel_initCallback(carousel) {
    jQuery('.jcarousel-control-right a').bind('click', function() {
        carousel.scroll(jQuery.jcarousel.intval(jQuery(this).text()));
        return false;
    });
};
// end for #right-carousel

jQuery(document).ready(function() {

var carousel_2;

jQuery('#right_carousel').jcarousel({
    start: 1, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:3,
    vertical:true,
    initCallback: right_carousel_initCallback,
    itemFirstInCallback: {
    onBeforeAnimation: function(carousel, item, index, action) {
        if (carousel_2) {
            carousel_2[action]();
                                                                                                      }
                                }
                                      }
         });

jQuery('#mycarousel').jcarousel({
    start: 3, // Configuration goes here
    wrap: "circular",
    scroll: 1,
    auto:3,
    vertical:false,
    initCallback: mycarousel_initCallback,
    buttonNextHTML: null,
    buttonPrevHTML: null,

});

});
</script>

</head>

<body>

<div id="mycarousel" class="jcarousel-skin-tango">
    <div class="jcarousel-control">
      <a href="#">1</a>
      <a href="#">2</a>
      <a href="#">3</a>
      <a href="#">4</a>
      <a href="#">5</a>
      <a href="#">6</a>
      <a href="#">7</a>
      <a href="#">8</a>
      <a href="#">9</a>
      <a href="#">10</a>
    </div>

    <ul>
      <li><img width="75" height="75" src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" alt="" /></li>
    </ul>

    <div class="jcarousel-scroll">
      <form action="">
        <a href="#" id="mycarousel-prev">&laquo; Prev</a>
        <select>
          <option value="1">Scroll 1 item per click</option>
          <option value="2">Scroll 2 items per click</option>
          <option value="3">Scroll 3 items per click</option>
          <option value="4">Scroll 4 items per click</option>
          <option value="5">Scroll 5 items per click</option>
        </select>
        <a href="#" id="mycarousel-next">Next &raquo;</a>
      </form>
    </div>

  </div>

</div>

<!-- second one -->

<div id="right_carousel" class="jcarousel-skin-tango">
    <div class="jcarousel-control-right">
      <a href="#">1</a>
      <a href="#">2</a>
      <a href="#">3</a>
      <a href="#">4</a>
      <a href="#">5</a>
      <a href="#">6</a>
      <a href="#">7</a>
      <a href="#">8</a>
      <a href="#">9</a>
      <a href="#">10</a>
    </div>

    <ul>
      <li><img width="75" height="75" src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" alt="" /></li>
      <li><img width="75" height="75" src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" alt="" /></li>
    </ul>

    <div class="jcarousel-scroll">
      <form action="">
        <a href="#" id="mycarousel-prev">&laquo; Prev</a>
        <select>
          <option value="1">Scroll 1 item per click</option>
          <option value="2">Scroll 2 items per click</option>
          <option value="3">Scroll 3 items per click</option>
          <option value="4">Scroll 4 items per click</option>
          <option value="5">Scroll 5 items per click</option>
        </select>
        <a href="#" id="mycarousel-next">Next &raquo;</a>
      </form>
    </div>

  </div>

</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:35:24.870

实际上他们使用这个功能来旋转

```
 jQuery(document).ready(function() {
    $('.lnkDot').click(function(){alert(1)
        var img = jQuery(this).attr('id');
        var id = img.substring(img.length-1);

        var currId = currentDot;
        var i = 0;
        var start= 0;
        var stop = 0;

        if (parseInt(currId) < parseInt(id)) {
            start = currId;
            stop = id;
        }
        else {
            start= id;
            stop = currId;
        }
        for (i = start; i<= stop; i++) {
            actionFromDot = true;

            var carousel = jQuery('#mycarousel').data('jcarousel');
            carousel.next();

        }
        currentDot = id;

        return false;
    });
}); 
```

他们所做的是，当他们点击分页时，他们会获取当前元素的 id 并获取数字 (var id = img.substring(img.length-1);)。

一旦他们获得了他们将拥有的数字`start`和`end`要旋转的位置（他们从全局变量计算的起始位置`currentDot`）。

后来make点击的id是`currentDot`

像这样更改您的分页链接。

```
<a href="#" id='page1' class='lnkDot'>1</a>
<a href="#" id='page2' class='lnkDot'>2</a>
<a href="#" id='page3' class='lnkDot'>3</a> 
```

# ruby-on-rails - 从控制器参数中保存 Rails 模型？

> ID：13974577
> 
> 赞同：1
> 
> 时间：2012-12-20T14:42:30.733
> 
> 标签：ruby-on-rails, ruby, activerecord, activemodel

我尝试了 User.create(params)，但这表明“控制器”和“动作”不能批量分配。我可以排除这些属性，但是有没有更简单的方法来编组我需要的属性？

一些示例似乎表明我可以使用 params[:user]，但如果我希望帖子只是用户对象，params[:user] 看起来就像是 nil。

所以我用 {username: 'blah', password: 'blah'} 发布，用户名和密码在参数中，但不是参数 [:user]。

```
class UsersController < ApplicationController
  def create
    user = User.create(params[:user])
    if user.save
      render :json => user, :status => :created
    else
      logger.error user.errors
      render :json => {:status => :error, :errors => user.errors}, :status => :bad_request
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:00:30.503

在 Rails 项目中有一个约定，表单元素以某种方式命名（使用表单助手会自动为您执行此操作）：

```
<input type='text' name='user[username]'>
<input type='text' name='user[username]'> 
```

当它们发布到控制器时，它们将转换为参数哈希：

```
params = {
  :user => {
    :username => 'whatever',
    :password => 'somepass'
  }
} 
```

由于路由的工作方式，控制器、操作、id（如果适用）或任何自定义路由部分的键值对被添加到此参数哈希中。

```
params.merge!({
  :controller => 'users',
  :action     => 'create'
}) 
```

如果`params[:user]`对您来说是 nil，您可能需要更改表单以符合约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:59:27.843

尝试`User.create(request.request_parameters)`或`User.create(JSON.parse(request.body.read))`。

# c# - 有没有办法在 Eclipse 中为 .vb 和 .cs 文件进行语法着色？

> ID：13974579
> 
> 赞同：1
> 
> 时间：2012-12-20T14:42:34.770
> 
> 标签：c#, eclipse, eclipse-plugin, syntax-highlighting

> **可能重复：**
> [是否有](https://stackoverflow.com/questions/2952973/is-there-an-eclipse-c-sharp-highlight-code-completion-plugin)
> [支持 .Net Framework4.0 的 Eclipse C# Highlight、Code Completion 插件 Eclipse IDE、C# 和 VB.Net 插件](https://stackoverflow.com/questions/7299872/eclipse-ide-c-sharp-and-vb-net-plugins-that-supports-net-framework4-0)

我对 eclipse 太上瘾了，几乎所有事情都用它。是否有一个插件可以让我在 Eclipse 中为 dotnet .vb 和 .cs 文件进行语法着色？我不是想建立项目或执行任何事情。只是为了查看带有语法着色的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:47:42.583

看看[Emonic](http://emonic.sourceforge.net/)插件。

> Emonic 代表 Eclipse 单声道集成。它是一个 Eclipse 插件，允许您使用 Mono 或 Microsoft .NET 构建 C# 程序。

![在此处输入图像描述](../Images/e26904746bc810646cd13e1718676a4d.png)

# php - 如何让 php/apache 使用 AT 守护进程安排任务

> ID：13974580
> 
> 赞同：1
> 
> 时间：2012-12-20T14:42:35.657
> 
> 标签：php, linux, apache, centos

有没有办法让 php 脚本（apache 用户）使用 AT 守护进程安排任务？

我想将任务从我的 php 脚本传递到 atd，如下所示：

```
exec( "echo 'date > /some/dir/date.txt' | at now + 1 minute > /dev/null &" ); 
```

当我从命令行（root）运行 php 脚本时，一切都很好，但是，当我通过 http 请求运行脚本时，永远不会创建 at 作业。

我知道 apache 没有 shell 访问权限，有什么可用的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:03:53.003

`exec()`不使用外壳，因此您不能使用管道等。

使用反引号，`shell_exec()`或者`system()`改为使其工作。

```
shell_exec("echo 'date > /some/dir/date.txt' | at now + 1 minute"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:22:34.180

如果您的脚本在其下运行的帐户（Apache 或 cgi 用户）没有 shell 访问权限，则 at 将无法工作，因为稍后将尝试运行不正常的 shell（如 /bin/bad）来运行该命令。

检查您是否可以执行任何操作：

```
$output = array();
exec('whoami',$output);
print_r($output); 
```

如果这确实有效，您可以尝试类似（伪代码）：

```
write "date > /some/dir/date.txt" in /tmp/atcmd
exec("/usr/bin/at -f /tmp/atcmd now + 1 minute"); 
```

所以你需要： - 稍后在其中运行命令的 shell - php 内的权限以运行 exec 函数 - 没有由 /etc/at.{deny,allow} 创建的问题

这基本上意味着（我猜）你需要一个在 php-cgi 中运行的 PHP 切换到一个“真实”帐户。

我现在唯一能想到的其他解决方案是在网络服务器上创建您需要的脚本，并使用 wget 在您有权访问的机器上运行 at 作业。

```
echo "wget -q http://myserver.mydomain/my/atscript"  | at now + 1 minute 
```

人们实际上将此类构造用于类似 cron 的行为。嘿，我什至可以在我的托管服务上为类似的东西设置一个服务:-)

# entity-framework - 如何从 EF5 中的特定关系中删除级联删除

> ID：13974588
> 
> 赞同：1
> 
> 时间：2012-12-20T14:43:03.083
> 
> 标签：entity-framework

我在 EF5 中有一个代码优先模型（我认为 - VS2012 中的最新版本）并且我在初始化数据库时遇到错误： -

在表 '...' 上引入 FOREIGN KEY 约束 '...' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束

我想保留删除级联的默认约定，但针对该特定关系将其删除。我尝试使用 modelbuilder.Entity.HasMany.HasForeignKey.WillCascadeOnDelete(False) 覆盖 OnModelCreating，但是当我这样做时，我收到一个错误，即外键已经存在。

# sql - 对三个表求和

> ID：13974591
> 
> 赞同：1
> 
> 时间：2012-12-20T14:43:08.323
> 
> 标签：sql, sum

我想从 3 个表中得到 2 个总和：

```
tbl_header
id   id_quotation   description
1    1              descr_1
2    2              descr_2

tbl_body
id   id_quotation   id_item  item_cost
1    1              1        400
2    1              2        300

tbl_money
id   id_quotation   amount
1    1              200
2    1              300
3    2              100 
```

所以我需要 1 个查询来从 tbl_head `SUM(tbl_body.item_cost) WHERE tbl_body.id_quotation = 1`（在本例中为 400+300=700）和`SUM(tbl_money.amount) WHERE id_quotation=1`（在本例中为 200+300=500）获取描述。`Id_quotation`是所有表中的相同字段。

我用这个查询做到了：

```
select    head.description,
          sum(body.item_cost) as sum_1,
          (select   sum(money.amount)
           from     tbl_money money
           where    money.idquotation=head.idquotation
           GROUP BY money.id_quotation) as sum_2
FROM      tbl_body as body,
          tbl_header as head
WHERE     head.id_quotation=body.id_quotation
GROUP BY  head.description 
```

现在我想消除内部查询`select sum(money.amount) from ...`并将其替换为类似`SUM(money.amount)`但我总是得到记录 3 次所以总和是三倍大。不起作用的查询是：

```
SELECT        head.description,
              Sum(body.item_cost) AS sum_1,
              sum(money.amount) as sum_2
FROM          (tbl_header head
               INNER JOIN tbl_body body
               ON head.id_quotation=body.id_quotation)
  INNER JOIN  tbl_money money
  ON          head.id_quotation=money.id_quotation
WHERE         head.id_person=1
  AND         money.id_quotation=body.id_quotation
GROUP BY      head.description; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:31:50.680

您的方法很好，尽管我会将子查询放在`from`子句中并修复连接以使用正确的连接语法。有一个技巧可以做你想做的事。虽然我不推荐，但我会告诉你：

```
select    head.description,
          sum(body.item_cost)/count(distinct money.id) as sum_1,
          sum(money) / count(distinct money.id) as sum_2
FROM      tbl_body body join
          tbl_header head
          on head.id_quotation=body.id_quotation join
          tbl_money
          on money.idquotation = head.idquotation
GROUP BY  head.description 
```

也就是说，除掉重复项的计数。我只会为最快和最脏的查询这样做。

推荐的方式是在join之前对money表做summary：

```
select    head.description,
          sum(body.item_cost) as sum_1,
          sum(money) as sum_2
FROM      tbl_body body join
          tbl_header head
          on head.id_quotation=body.id_quotation join
          (select idquotation, SUM(money) as money
           from tbl_money
           group by idquotation
          ) money
          on money.idquotation = head.idquotation
GROUP BY  head.description 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:44:26.910

```
select min(header.description), SUM(body3.item_cost), SUM(money.amount)
from tbl_header header
    left outer join tbl_body body on header.id_quotation = body.id_quotation
    left outer join tbl_body body1 on body1.id< body.id
    left outer join tbl_body body2 on body2.id> body.id
    left outer join tbl_money money on money.id_quotation = header.id_quotation and body1.id is null
    left outer join tbl_body body3 on body3.id_quotation=header.id_quotation and body2.id is null
where header.id_quotation = 1 
group by header.id_quotation 
```

# javascript - jQuery Isotope 插件 - 添加内联“显示：无” - 无法弄清楚为什么

> ID：13974594
> 
> 赞同：0
> 
> 时间：2012-12-20T14:43:22.647
> 
> 标签：javascript, jquery, css, jquery-plugins, jquery-isotope

我正在尝试将同位素添加到我的新 Wordpress 主题中。问题是它不会显示，因为某些东西正在向主同位素包装器添加内联 (display:none) 样式。

它看起来像这样：

```
 <div id="container" class="photos clearfix isotope" style="position: relative; overflow: hidden; display: none;"> 
```

我刚刚在我的样式表中添加了以下 CSS 覆盖：

```
.isotope {
  display:block !important;
} 
```

有没有更好的方法来解决这个问题？我觉得这是一个俗气的解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:52:18.160

```
/* EXPANDED BOX */ 
```

.item-content { 显示：无；/* 为了可用性，你可以删除它 */ }

# git - 从 git 中删除文件

> ID：13974595
> 
> 赞同：0
> 
> 时间：2012-12-20T14:43:24.003
> 
> 标签：git

我知道我可以从跟踪中删除文件并将其删除`git rm <file>`

或者如果我想保留文件并将其从跟踪中删除，我可以使用`git rm --cached <file>`

但是当我将它推送到存储库并且其他人从中提取时，这会产生什么影响？这是有道理的，`git rm --cached <file>`只是将其从每个人的跟踪中删除，并且他们的目录中仍然有文件，但是呢`git rm <file>`，它只是从跟踪其他用户中删除文件还是会在他们拉动后删除实际文件?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:02:13.733

区别在于：

```
rm <file> 
```

这只会从**工作树**中删除文件。

```
git rm <file> 
```

这将从**工作树**和**索引**中删除文件（通过您的文字进行跟踪）。

```
git rm --cached <file> 
```

这只会从**索引**中删除文件。

如果你从索引中删除文件，并推送你的提交，那么结果是一样的，文件将被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:51:16.920

它也会为他们删除该文件。实际上这两种情况都会发生 - 无论您是否使用`--cached`，因为您最终提交的内容将是同一件事：删除文件。

# php - php 中的 show('...') 是什么？

> ID：13974601
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:43:30.247
> 
> 标签：php

我讨厌问什么可能是一个简单的问题，但我对 php 还是很陌生，并且在学习的过程中。我遇到了一个带有这个片段的 php 文件，它似乎与 include() 做同样的事情，但我找不到关于它的文档。

```
<?php show('header'); ?> 
```

是习惯还是我不够努力？如果它是自定义的，我如何找到可以定义它的位置，以便更好地理解它。据我所知，没有使用任何框架。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T14:44:19.263

这是一个自定义函数。如有疑问.. 始终检查[http://php.net](http://php.net)

如果您想在您的代码中找到它，只需运行以下代码（如果是 UNIX 用户）：

```
grep "function show(" . -ir 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:44:21.790

那是在您拥有的某个文件中定义的一些自定义函数。

PHP 手册中的任何地方都**没有**定义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:50:09.127

不，它不是预定义的。它是自定义的。一个预定义的名称以显示名称开头，显示当前文件的来源

```
 <?php
/* some code here */

show_source(__FILE__);    
?> 
```

# java - 将 JOptionPane 与 Xtend 一起使用

> ID：13974603
> 
> 赞同：0
> 
> 时间：2012-12-20T14:43:35.677
> 
> 标签：java, swing, joptionpane, xtend

我意识到这可能是一个非常愚蠢的问题，但是如何将 JOptionPane 与 Xtend 一起使用？我无法弄清楚，我一直在努力让它工作一段时间。

`JOptionPane.showMessageDialog(getContentPane(), message);`似乎不起作用。

Eclipse 给了我这个错误：`The method or field JOptionPane is undefined for the type MyClassName`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:09:34.383

在 Xtend 中通过双冒号访问静态方法或字段：

```
JOptionPane::showMessageDialog(..) 
```

有关详细信息，请参阅[文档](http://www.eclipse.org/xtend/documentation.html#staticAccess)。

# packaging - BB Web Works 在打包应用程序时给出错误为“在任何扩展中找不到错误功能（blackberry.pin .memo）”

> ID：13974605
> 
> 赞同：1
> 
> 时间：2012-12-20T14:43:38.373
> 
> 标签：packaging, blackberry-webworks

我是 BlackBerry Web Works 的新手。我正在按照开发站点上给出的开发说明进行操作。打包应用程序时，我在命令提示符中收到此错误：“[ERROR] 功能无法在任何扩展中找到（blackberry.pin .memo )”。

在进行此步骤之前，我已经创建了带有 config.xml 和 index.html 的项目文件夹以及应用程序组件的 zip 文件。现在尝试打包应用程序。但我收到如下错误：

![在此处输入图像描述](../Images/bca004c4aa9691dbe0047efa0d697147.png)

请帮我找出这个错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:05:25.510

经过大量的搜索和类比，我终于得到了解决方案。

当我们在 config.xml 中添加了一些我们没有在我们的应用程序中使用的功能，或者当我们使用相同的功能但未在 config.xml 的“功能”标签中定义时，会发生此错误。“spinner”、“sms”等也是同样的情况。

在我的情况下，这是因为“备忘录”，我在 config.xml 中定义但没有在我的应用程序中使用任何联系人功能。所以它产生错误，如“在任何扩展中找不到功能（黑莓。pin .memo )”。

# c# - 错误：找不到“异步”修饰符所需的所有类型。您的目标是错误的框架版本，还是缺少对程序集的引用？

> ID：13974610
> 
> 赞同：13
> 
> 时间：2012-12-20T14:43:55.780
> 
> 标签：c#, windows-phone-7, visual-studio-2012, async-await, .net-framework-version

我的电脑有以下配置：

*   视窗 8
*   视觉工作室 2012
*   .NET 框架 4.5

我的项目配置是：

*   WP 7.1
*   银光4.0
*   .NET 框架 4.0
*   CTP ASYNC（安装，使用 async 和 await 关键字）

该项目是在 WP7.1 的 Windows 7 机器上使用 VS2010 编写的。现在我已经将 PC 升级到 Windows 8 并安装了 VS2012。

然而，该项目抱怨“异步”修饰符。

找不到“异步”修饰符所需的所有类型。您的目标是错误的框架版本，还是缺少对程序集的引用？

知道如何解决这个问题吗？

谢谢你！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-20T15:22:39.623

有一个更新版本的异步目标包支持 Silverlight 4。在 NuGet 中搜索[Microsoft.BCL.Async](http://nuget.org/packages/Microsoft.Bcl.Async)`install-package Microsoft.Bcl.Async –pre` ，或在包管理器控制台中运行。该软件包支持 SL4、WP 7.1+ 和便携式库（是的！）

[您将在 BCL 团队的博客Using async/await without .NET Framework 4.5](http://blogs.msdn.com/b/bclteam/archive/2012/10/19/using-async-await-without-net-framework-4-5.aspx)中找到详细说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:55:50.670

从您下载的页面：

> 面向 Windows 应用商店应用程序的 .NET Framework 4.5 或 .NET 的项目不需要此目标包。只有面向 Silverlight 5 和 .NET Framework 4.0 的项目才需要它。不支持较早的平台版本。

升级到 Silverlight 5？

# html5-video - video.js 的 MP4 文件 - 规范

> ID：13974612
> 
> 赞同：1
> 
> 时间：2012-12-20T14:44:05.953
> 
> 标签：html5-video, mp4, video.js

在我的 Web 应用程序中，我使用 video.js 来处理所有视频 MP4 文件。我必须为我的视频提供商指定 MP4 文件的详细信息。我想通过这种格式处理 FF、chrome、IE8/9 和 iPad。您能否定义一组视频 MP4 文件详细信息，以确保 video.js 可以处理这种格式（例如：编解码器、视频/音频格式、视频格式配置文件）？我不知道它是否会有所帮助，但我使用 mediainfo (http://mediainfo.sourceforge.net/en) 检查 MP4 文件的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T00:36:14.583

包括视频 js 网站上提供的默认代码应该足以支持您拥有的 mp4 文件（特别是“type='video/mp4'”），但是，如果您打算支持 Firefox，这不会足够。FF 不支持 mp4 文件类型，因此您需要对 ogv 或 webm 进行编码。FF 提供了一个插件，可以在 firefogg.org 提供帮助

希望这可以帮助。

# http - JavaME HttpConnection - ConnectionNotFoundException

> ID：13974615
> 
> 赞同：1
> 
> 时间：2012-12-20T14:44:10.713
> 
> 标签：http, java-me, connection, midlet

尝试使用任何 url 建立 HttpConnection 时出现问题。

尝试查找它，但没有运气。我正在使用它附带的 NetBeans 7.2.1 和 JavaMe SDK 3.2；赢得 7 x64。任何帮助表示赞赏。

我的代码：

```
public void connect() {
        HttpConnection c = null;
        InputStream is = null;
        StringBuffer sb = new StringBuffer();
        try {
            c = (HttpConnection) Connector.open("http://www.google.com");
            is = c.openInputStream(); 
            int ch = 0;
            for (int ccnt = 0; ccnt < 150; ccnt++) { 
                ch = is.read();
                if (ch == -1) {
                    break;
                }
                sb.append((char) ch);
            }
        } catch (IOException x) {
            x.printStackTrace();
        } finally {
            try {
                is.close();
                c.close();
            } catch (IOException x) {
                x.printStackTrace();
            }
        }
    } 
```

运行后，我收到以下错误：

```
javax.microedition.io.ConnectionNotFoundException: error 10049 in socket::open
at com.sun.midp.io.j2me.socket.Protocol.open0(), bci=0
at com.sun.midp.io.j2me.socket.Protocol.connect(), bci=184
at com.sun.midp.io.j2me.socket.Protocol.open(), bci=216
at com.sun.midp.io.j2me.socket.Protocol.openPrim(), bci=4
at com.sun.midp.io.j2me.http.Protocol.createConnection(), bci=41
at com.sun.midp.io.j2me.http.Protocol.connect(), bci=41
at com.sun.midp.io.j2me.http.Protocol.streamConnect(), bci=164
at com.sun.midp.io.j2me.http.Protocol.startRequest(), bci=7
at com.sun.midp.io.j2me.http.Protocol.sendRequest(), bci=33
at com.sun.midp.io.j2me.http.Protocol.sendRequest(), bci=3
at com.sun.midp.io.j2me.http.Protocol.openInputStream(), bci=6
- hello.HelloMIDlet.connect(HelloMIDlet.java:308)
- hello.HelloMIDlet.startApp(HelloMIDlet.java:262)
at javax.microedition.midlet.MIDletTunnelImpl.callStartApp(), bci=1
at com.sun.midp.midlet.MIDletPeer.startApp(), bci=5
at com.sun.midp.midlet.MIDletStateHandler.startSuite(), bci=261
at com.sun.midp.main.AbstractMIDletSuiteLoader.startSuite(), bci=38
at com.sun.midp.main.CldcMIDletSuiteLoader.startSuite(), bci=5
at com.sun.midp.main.AbstractMIDletSuiteLoader.runMIDletSuite(), bci=144
at com.sun.midp.main.AppIsolateMIDletSuiteLoader.main(), bci=26
TRACE: <at java.lang.NullPointerException:   0>, startApp threw an Exception
java.lang.NullPointerException:   0
 - hello.HelloMIDlet.connect(HelloMIDlet.java:321)
 - hello.HelloMIDlet.startApp(HelloMIDlet.java:262)
at javax.microedition.midlet.MIDletTunnelImpl.callStartApp(), bci=1
at com.sun.midp.midlet.MIDletPeer.startApp(), bci=5
at com.sun.midp.midlet.MIDletStateHandler.startSuite(), bci=261
at com.sun.midp.main.AbstractMIDletSuiteLoader.startSuite(), bci=38
at com.sun.midp.main.CldcMIDletSuiteLoader.startSuite(), bci=5
at com.sun.midp.main.AbstractMIDletSuiteLoader.runMIDletSuite(), bci=144
at com.sun.midp.main.AppIsolateMIDletSuiteLoader.main(), bci=26
java.lang.NullPointerException:   0
- hello.HelloMIDlet.connect(HelloMIDlet.java:321)
- hello.HelloMIDlet.startApp(HelloMIDlet.java:262)
at javax.microedition.midlet.MIDletTunnelImpl.callStartApp(), bci=1
at com.sun.midp.midlet.MIDletPeer.startApp(), bci=5
at com.sun.midp.midlet.MIDletStateHandler.startSuite(), bci=261
at com.sun.midp.main.AbstractMIDletSuiteLoader.startSuite(), bci=38
at com.sun.midp.main.CldcMIDletSuiteLoader.startSuite(), bci=5
at com.sun.midp.main.AbstractMIDletSuiteLoader.runMIDletSuite(), bci=144
at com.sun.midp.main.AppIsolateMIDletSuiteLoader.main(), bci=26 
```

# ios - 自定义钛中搜索栏的取消按钮

> ID：13974616
> 
> 赞同：1
> 
> 时间：2012-12-20T14:44:11.633
> 
> 标签：ios, titanium, appcelerator, titanium-mobile, searchbar

我正在做一个钛项目。我需要一个自定义的搜索栏，如下所示。

![设计文件](../Images/a90b0b31e4c4147bec2baf7ae9ed8bac.png)

但是当我创建搜索栏时，它看起来像；

![输出](../Images/3e0a613f244d272cde6c8c924fbc8afe.png)

我想更改取消按钮的图像。我搜索了很多自定义钛搜索栏，但找不到任何解决方案。

我正在通过以下方式创建搜索栏：

```
var searchLocation = Ti.UI.createSearchBar({ 
    showCancel:true,
    height:55,
    top:45,
    width:'102%',
    backgroundImage:"../../Images/bg_search.png",
    borderRadius:'5'
}); 
```

* * *

然后我尝试了一些不同的东西。

1.  我创建了一个视图、一个没有取消按钮的搜索栏和一个自定义按钮。
2.  将搜索栏添加到该视图
3.  在该搜索栏的右侧添加了按钮。

    ```
    //holder view
    var searchHolder = Ti.UI.createView({
       height   : 55,
       width    : '100%',
       top      : 45,
       backgroundImage:"../../Images/bg_header@2x.png",
       layout   : 'horizontal'
    });

    //search bar
    var serLocation = Ti.UI.createSearchBar({
       height:55,
       top:0,
       width:'85%',
       backgroundImage:"../../Images/bg_header@2x.png"
    });

    //Calendar button
    var calButton = Ti.UI.createButton({
       height   : 45,
       width    : 45,
       backgroundImage:"../../Images/nav_calendar.png"
    });

    searchHolder.add(serLocation);
    searchHolder.add(calButton ); 
    ```

它运行良好。

但我正在寻找任何替代解决方案。是否有任何内置方法可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:37:22.767

没有针对此的内置方法。您的工作解决方案是最好的解决方案。

# c# - 为什么我不能在 BindingSource 上暂停绑定？

> ID：13974617
> 
> 赞同：0
> 
> 时间：2012-12-20T14:44:13.067
> 
> 标签：c#, .net, data-binding, datatable

首先，有问题的代码：

```
public virtual void grid_RefreshFetchData(Object sender, RefreshEventArgs e)
{
    C1DBGrid g = (C1DBGrid)sender;
    if (g.RefreshUseResult)
    {
        DataTable dtNew = FetchRawData(e.Argument);
        dt_Patch(dtNew, e.Argument);
        g.BindingSource.SuspendBinding();
        ((DataTable)g.BindingSource.DataSource).Clear();
        ((DataTable)g.BindingSource.DataSource).Merge(dtNew);
        g.BindingSource.ResumeBinding();
    }
} 
```

您看到的是一个事件处理程序，该处理程序是从最终启动的后台线程调用的，因为 Windows 窗体需要数据。网格对象（它是一个 ComponentOne TrueDBGrid）由该表单拥有，并且我们设置了事件以允许表单告诉网格请求新数据。该调用导致此处理程序，其目的是请求底层数据类获取包含记录的 DataTable，然后将该表与网格的 BindingSource（它是相同模式的 DataTable）合并。

我的问题：当调用 Merge() 方法将新数据合并到网格的（新清空的）BindingSource（同样是 DataTable 本身）中时，会引发大量异常。每个异常实例实际上是三个异常：一个 System.Reflection.TargetInvocationException 后跟一对 System.InvalidOperationExceptions。这导致性能非常差，这是我必须纠正的。

我明白发生了什么。在表单上，​​我们使用控件的 Text 属性将 TextBox 控件绑定到网格的 BindingSource。每次将行合并到 BindingSource 时都会触发此绑定。最后一部分没有被观察到，这有点猜测，但绝对数量的异常表明这是正确的假设。那，以及当我注释掉所有绑定时，性能显着提高的事实。

所以我要求的是帮助理解我如何暂停这个绑定触发器。如您所见，我在事件处理程序中有几行试图在 BindingSource 上挂起它。

我也已经尝试过了：

```
g.SuspendBinding(); 
```

它没有任何区别。事实上，我已经尝试在等式的两端暂停绑定，在表单和线程刷新中，但总是所有尝试都没有结果。

你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:56:44.277

这可能是您的问题（取自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.suspendbinding.aspx)）。

> 使用 SuspendBinding 并防止在调用 ResumeBinding 之前将更改推送到数据源，但实际上不会阻止任何事件的发生。使用复杂数据绑定的控件（例如 DataGridView 控件）根据更改事件（例如 ListChanged 事件）更新其值，因此调用 SuspendBinding 不会阻止它们接收对数据源的更改。因此，此 SuspendBinding 和 ResumeBinding 设计用于与简单绑定控件（如 TextBox 控件）一起使用。或者，如果通过将 RaiseListChangedEvents 属性设置为 false 来抑制 ListChanged 事件，则可以在复杂的绑定方案中使用这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:04:38.897

就其价值而言，hack 方法似乎确实很成功。我不是很喜欢它，但我也看不到任何不涉及手动绑定全谱控制的替代方法。

我有幸拥有基于我们从 Form 派生的类的所有 Windows 窗体。所以在那里，我设计了两种方法：SuspendBinding() 和 ResumeBinding()。

这是我所做的一个示例：

```
private List<KeyValuePair<String, Binding>> _savedBindings = new List<KeyValuePair<String, Binding>>();

private delegate void InvokeSuspendBinding();
public void SuspendBinding()
{
    if (InvokeRequired)
    {
        Invoke(new InvokeSuspendBinding(SuspendBinding));
        return;
    }

    foreach (DictionaryEntry entry in ChildControls)
    {
        if (entry.Value is Control && ((Control)entry.Value).DataBindings.Count > 0)
        {
            for (Int32 i = 0; i < ((Control)entry.Value).DataBindings.Count; i++)
            {
                _savedBindings.Add(new KeyValuePair<String, Binding>(entry.Key as String, ((Control)entry.Value).DataBindings[i]));
                ((Control)entry.Value).DataBindings.RemoveAt(i);
            }
        }
    }
}

private delegate void InvokeResumeBinding();
public void ResumeBinding()
{
    if (InvokeRequired)
    {
        Invoke(new InvokeResumeBinding(ResumeBinding));
        return;
    }

    foreach (DictionaryEntry entry in ChildControls)
    {
        foreach (KeyValuePair<String, Binding> kvp2 in _savedBindings)
        {
            if (kvp2.Key.Equals(entry.Key))
                ((Control)entry.Value).DataBindings.Add(kvp2.Value);
        }
    }

    _savedBindings.Clear();
} 
```

请注意，循环中引用的成员 ChildControls 是我们表单类的成员，它是递归循环的结果，该循环返回控件名称和控件对象的哈希表。

# python - 算法只执行所有情况的 12%

> ID：13974624
> 
> 赞同：2
> 
> 时间：2012-12-20T14:44:35.997
> 
> 标签：python, algorithm, random, probability

我有一个函数，我想让它只在我调用它的 12% 的情况下执行操作。

我已经写了一个有效的函数，但它不够准确。

Python 中的示例：

```
# probability to execute the function is 50%
percent_probability = 50

frequency = 100 / percent_probability

r = random.randint(1, frequency)

if r == 1:
   my_function() 
```

这适用于 10%、20% 等百分比，但不适用于 33%，因为它是四舍五入的。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:46:44.173

我会用`random.random()`这个，像这样：

```
if random.random() < anz_prozent_wahrscheinlichkeit / 100.:
   execute my function() 
```

这使用浮点数学，因此不限于整数百分比（例如，`anz_prozent_wahrscheinlichkeit = 0.1`可以正常工作）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T14:46:32.333

这应该可以解决问题：

```
r = random.randrange(0, 100)
if r < 12:
    my_function() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T14:46:30.120

最简单的方法是获取一个介于 0 和 1 之间的随机数，`random.random()`并检查它是否小于 0.12。这是一种通用方法（它也适用于带小数部分的百分比……）。

# android - android listView中的MultiSelect不起作用

> ID：13974627
> 
> 赞同：0
> 
> 时间：2012-12-20T14:44:41.347
> 
> 标签：android, listview, multi-select

我正在尝试使用自定义适配器和多选来制作 listView。我的适配器如下所示：

```
public class MusicPopupListAdapter extends BaseAdapter {

Cursor cursor;
Context context;
public MusicPopupListAdapter(Context context) {
    this.context = context;
    Uri uri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    String[] cursor_cols = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ARTIST,
            MediaStore.Audio.Media.ALBUM,
            MediaStore.Audio.Media.TITLE,
    };
    String where = MediaStore.Audio.Media.IS_MUSIC + "=1";
    cursor = context.getContentResolver().query(uri, cursor_cols, where, null, null);
}

@Override
public int getCount() {
    return cursor.getCount();
}

@Override
public Track getItem(int position) {
    cursor.moveToPosition(position);
    Track track = new Track();
    track.id = cursor.getLong(cursor.getColumnIndex(MediaStore.Audio.Media._ID));
    track.album = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM));
    track.artist = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST));
    track.title = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.TITLE));
    return track;
}

@Override
public long getItemId(int position) {
    Track track = getItem(position);
    return track.id;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    RowHandler handler;
    if (convertView == null) 
    {
        convertView = LayoutInflater.from(context).inflate(R.layout.row, parent, false);
        handler = new RowHandler();
        handler.artist = (TextView) convertView.findViewById(R.id.artist);
        handler.album = (TextView) convertView.findViewById(R.id.album);
        handler.title = (TextView) convertView.findViewById(R.id.title);
        convertView.setTag(handler);
    }
    else
        handler = (RowHandler)convertView.getTag();
    Track track = getItem(position);
    handler.artist.setText(track.artist);
    handler.album.setText(track.album);
    handler.title.setText(track.title);
    return convertView;
}

public static class Track {
    long id;
    String artist;
    String album;
    String title;
}

public static class RowHandler {
    TextView artist;
    TextView album;
    TextView title;
} 
```

作为行的布局，我使用扩展的相对布局：

```
public class CheckableRelativeLayout extends RelativeLayout implements Checkable {

boolean checked = false;
public CheckableRelativeLayout(Context context) {
    super(context);
}

public CheckableRelativeLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CheckableRelativeLayout(Context context, AttributeSet attrs, int style)
{
    super(context, attrs, style);
}

@Override
public boolean isChecked() {
    return checked;
}

@Override
public void setChecked(boolean checked) {
    this.checked = checked;
}

@Override
public void toggle() {
    checked=!checked;
} 
```

在调试中我看到， setChecked 正在调用，但总是带有错误值。

我将 listView 的选择模式设置为 ListView.CHOICE_MODE_MULTIPLE。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:21:58.010

我找到了解决方案。问题出在弹出窗口上。默认情况下，弹出窗口是在非聚焦模式下创建的。解决方案是设置弹出窗口focusable = true。

# c - 如何在不使用 C 中的 sizeof 的情况下找到指针的大小

> ID：13974628
> 
> 赞同：-2
> 
> 时间：2012-12-20T14:44:43.103
> 
> 标签：c, sizeof

> **可能重复：**
> [如何在不使用 sizeof 的情况下找到变量的大小](https://stackoverflow.com/questions/1393394/how-to-find-the-size-of-a-variable-with-out-using-sizeof)

使用 C，我们可以在不使用 sizeof 运算符的情况下以某种方式找到指针的大小吗？虽然我在谷歌搜索时在很多地方发现了这个问题，但我找不到任何答案。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T14:49:42.663

这是您可以使用的一个小而合法的技巧：

```
int *unused = NULL;
int **ptr = &unused;
printf("%tu\n", ((char*)(ptr+1))-(char*)ptr); 
```

下面是它的工作原理：

*   回想一下，添加`N`到指针会增加`N`所指向类型大小的倍数；因此`(ptr+1)`增加`sizeof(int*)`了“原始”价值`ptr`
*   `sizeof(char)`is always `1`，因此转换为`char*`可以让您减去“原始”值；结果是操作`sizeof`相加的`(ptr+1)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:55:57.963

```
#define MY_SIZEOF_VAR(x) ((int)((char*)(&(x)+1)-(char*)&(x)))
#define MY_SIZEOF_TYPE(x) ((int)((char*)((x*)0+1)-(char*)0)) 
```

这远不如真实的东西好。你可能更喜欢它是一个无符号整数，但你不能太挑剔！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:46:45.840

您可以检查您使用的架构。如果是 32 位架构，则指针大小为...32 位，即 4 字节。64bit arch 有 64bit, 8b 指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T14:47:02.323

编辑：嗯，我想有一个。`sizeof()`不过还是比较容易。如果可以，请使用它。否则，请使用上面的@dasblinkinlight 答案。

如果没有 sizeof，就无法不可知地找到类型平台的大小。我不明白你为什么不想使用它。但是，如果您愿意让您的代码复杂而糟糕，并且依赖于平台，您可以添加预处理器语句来检查编译器和目标体系结构，并据此从已知值中找到值。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-20T15:01:00.657

使用指针算法和铸造

```
#include <stdio.h>

struct person {
  int age, salary;
  char name[12];
  char address[6][20];

      };

typedef struct person EMPLOYEE;

main() {
EMPLOYEE a;
EMPLOYEE *x,*y;

x=&a;
y=x+1;
printf ("pointer arith %d\n", (int)((int)y-(int)x));
printf ("sizeof %ld\n", sizeof(a));
} 
```

# javascript - 我应该如何在 d3js 中使用嵌套数据

> ID：13974640
> 
> 赞同：2
> 
> 时间：2012-12-20T14:45:14.740
> 
> 标签：javascript, d3.js

我想使用作为可变长度列表数组的数据。例如，汽车列表，每辆车都有以前的车主列表。我正在考虑绘制类似于堆叠水平条形图的东西。我将绘制每个矩形，而不是使用堆栈。

不确定我是否应该使用某种形式的嵌套数据。

在第一组回复后编辑：我并不是真的在看如何在视觉上表示它。在我看到的 d3 中，输入数据始终是一维线性数组。假设我想使用作为列表数组的数据，我该怎么做。假设数据是这样的： [make: "Chevy", {owners: [{name:"Mike"}, {name: "Parthiban"}]}, make: "Ford", {ownwers: [{name: " Selvi"}, {name: "John"}, {name: "Ramkrishnan"}]}] 对于每个品牌，我将它们视为一个数据元素。但是，然后我想为每个品牌的所有者处理数据。

我现在不想使用标准布局。

另请注意，数据不是一个干净的 mxn 矩阵。它是一个可变长度列表的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:55:49.017

我不确定我是否了解您的数据结构，但对于层次结构，您可以尝试使用[pack layout](https://github.com/mbostock/d3/wiki/Pack-Layout)。您可以让每辆车将其以前的车主放在其中，您可以根据您想要的标准调整它们的大小。

这是[官方示例](http://bl.ocks.org/4063530)，这是[我使用它制作](http://improve.ro/sandbox/politicians/v1.1/)的东西（[源代码在这里](https://github.com/cimi/infographic-politicians)）。

# python - networkx：在边缘绘制文本

> ID：13974643
> 
> 赞同：11
> 
> 时间：2012-12-20T14:45:23.380
> 
> 标签：python, networkx, graph-theory, directed-graph, control-flow

对于我的论文，我需要绘制一些概率控制流图。即在边缘描绘概率的控制流图。

我发现图形工具似乎非常有用，因为它可以使用现有图形的深层副本，而且我的图形非常相似。

所以我的问题是，是否有可能在边缘/旁边绘制边缘属性（或一些字符串）？如果不可能或非常复杂，在这种情况下是否有更好的工具？

**编辑：** 我需要有向边，甚至可以在 2 个节点之间创建循环并具有不同的值。这也有可能吗？所以我可以看到这两个值？到目前为止，我可以看到具有 2 向边的有向图，但它只有一个值。

所以例如在networkx中（参考Hooked）它看起来像：

```
G = nx.MultiDiGraph()
G.add_edge(0,1)
G.add_edge(1,0)
labels = {(0,1):'foo', (1,0):'bar'} 
```

这样 'foo' 和 'bar' 都是可见的，并且您可以看到它们连接到哪个方向。

但是当 networkx 呈现它时，我得到了 1 个带有 1 个标签的双向边。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-03T14:36:24.957

您可以使用 graph_draw() 函数的“edge_text”选项使用[图形工具](http://graph-tool.skewed.de)在边缘旁边绘制文本：

```
from graph_tool.all import *

g = Graph()
g.add_vertex(4)
label = g.new_edge_property("string")
e = g.add_edge(0, 1)
label[e] = "A"
e = g.add_edge(2, 3)
label[e] = "foo"
e = g.add_edge(3, 1)
label[e] = "bar"
e = g.add_edge(0, 3)
label[e] = "gnat"

graph_draw(g, edge_text=label, edge_font_size=40, edge_text_distance=20, edge_marker_size=40, output="output.png") 
```

![在此处输入图像描述](../Images/2fa394e32d2ee435c4593b3d7b156afe.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-20T14:52:17.270

```
import networkx as nx   

# Sample graph
G = nx.Graph()
G.add_edge(0,1)
G.add_edge(1,2)
G.add_edge(2,3)
G.add_edge(1,3)

labels = {(0,1):'foo', (2,3):'bar'}

pos=nx.spring_layout(G)

nx.draw(G, pos)
nx.draw_networkx_edge_labels(G,pos,edge_labels=labels,font_size=30)

import pylab as plt
plt.show() 
```

![在此处输入图像描述](../Images/063eeb00d4fda3e970f1ce4ff536e685.png)

**编辑：**如果您需要带有边缘标签的多向图，我认为您不能完全在`networkx`. 但是，您可以在 python 中完成大部分操作，并使用另一个程序进行渲染和布局：

```
import networkx as nx

G = nx.MultiDiGraph()
G.add_edge(0,1, label='A')
G.add_edge(1,0, label='B')
G.add_edge(2,3, label='foo')
G.add_edge(3,1, label='bar')   
nx.write_dot(G, 'my_graph.dot') 
```

我使用[graphviz](http://www.graphviz.org/)将其转换为图像。在我的 Unix 机器上，我从命令行运行它

```
dot my_graph.dot -T png > output.png 
```

这提供了您正在寻找的所需输出。请注意，graphviz 有[很多方法可以自定义视觉外观](http://www.graphviz.org/Gallery.php)。上面的例子简单地产生：

![在此处输入图像描述](../Images/5855a53314cb5043cb29913e4b88a051.png)

# javascript - 选择刚刚单击的项目的下一个兄弟

> ID：13974644
> 
> 赞同：5
> 
> 时间：2012-12-20T14:45:24.487
> 
> 标签：javascript, jquery

我有一个`ul`包含图像的。这些图像是从 twitter 获取并`ul`动态附加到的个人资料图像。一旦用户单击任何图像，我还需要在它旁边缓存图像的节点（下一个兄弟）。我尝试使用如下`next()`选择器，但控制台中记录的是我不理解的消息。这是代码：

```
$("ul#container").on("click", "img", function(){
  var nextImage = $(this).next();
  console.log(nextImage);
} 
```

以下是控制台中记录的内容：

> [prevObject: p.fn.p.init[1], context: , 选择器: ".next ()"]

你能帮我理解我做错了什么吗？谢谢阅读！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:47:34.097

没有错。

这就是 Chrome 现在记录 jQuery 对象的方式。

现在去玩玩吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:09:15.013

尝试：

```
$("ul#container").on("click", "img", function(){
  var nextImage = $(this).next().get(0);
  console.log(nextImage);
} 
```

或者

**[试试这个 Chrome 插件](https://chrome.google.com/webstore/detail/consolelog-output-real-ht/jnfjicjapkamepnbiplhcjhcjccmegna)**

# java - 从 java 中使用 Tesseract

> ID：13974645
> 
> 赞同：33
> 
> 时间：2012-12-20T14:45:26.007
> 
> 标签：java, ocr, tesseract

我正在尝试在 java 中构建一个示例应用程序，它将读取图像文件并输出从图像中提取的文本。我发现[Tesseract](http://code.google.com/p/tesseract-ocr/)项目似乎很有希望，但是它是用 c++ 编写的。为了使用它，我应该简单地从我的 java 应用程序中将它作为命令行运行`Runtime.exec(...)`吗？还是有更好的解决方案，也许是 JAR？此外，这只是一个示例应用程序，从可扩展性的角度来看，将其作为命令行应用程序运行是否值得关注？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-04-08T11:32:28.660

现在 tesseract 由 javacv 项目提供，这是一个比使用 Tess4J 更好的选择，因为所需要的只是向您的 pom 文件添加一个依赖项，然后您的平台的本机库将被下载并自动为您链接javacv tesseract 版本。

我在这里创建了一个示例 maven 项目 - [https://github.com/piersy/BasicTesseractExample](https://github.com/piersy/BasicTesseractExample)

还有一个示例 gradle 项目 - [https://github.com/piersy/BasicTesseractExampleGradle](https://github.com/piersy/BasicTesseractExampleGradle)

为了在我的 ubuntu 机器上工作，我需要更新我的 libstdc++6 安装

我通过运行以下命令实现了这一点，尽管仅安装 libstdc++6 可能对您有用。

```
sudo add-apt-repository ppa:ubuntu-toolchain-r/test 
sudo apt-get update
sudo apt-get install libstdc++6 
```

请注意，gradle 项目不执行自动安装，但仍然比使用 Tess4J 简单得多

javacv 项目在这里 - [https://github.com/bytedeco/javacpp-presets/tree/master/tesseract](https://github.com/bytedeco/javacpp-presets/tree/master/tesseract)

javacv 人的大道具，只希望我早点找到这个，因为它可以为我节省一周的时间让 tess4j 在多个平台上工作！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-26T19:24:45.083

我在我的 java 代码中使用了 tesseract 项目。你需要做的就是

1.  获取 tesseract 的 tess4j jni 包装器。
2.  在您的 ide 中打开 tess4j proj 并将源包和库添加到您自己的
    项目中。
3.  编写为 tesseract 类创建实例的代码，然后将其用于
    执行 OCR。

请查看此[http://tphanout.com/?p=18](http://tphangout.com/?p=18)

它提供了有关如何构建 Java 项目以读取图像并使用 tesseract OCR API 将其转换为文本的说明。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-27T20:52:53.730

您是否尝试过 tess4j：[http](http://tess4j.sourceforge.net/) ://tess4j.sourceforge.net/ 。

它是用于 windows 的 tesseract 的 JNI 包装器。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-13T04:59:03.340

我已经分叉了[Basic Git Repo](https://github.com/piersy/BasicTesseractExample)并对其进行了更新，以便它可以与 Tesseract-ocr 版本 (4.xx) 和 bytedeco javacpp-presets 版本 (1.4.3) 兼容。

**[Basic TesseractExampleVer4](https://github.com/asmmahmud/BasicTesseractExampleVer4)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-02T09:16:16.710

刚试过[https://github.com/piersy/BasicTesseractExample](https://github.com/piersy/BasicTesseractExample)

[![这是一个截图](../Images/2d4c4530b64522fd419d91fe805d91f3.png)](https://i.stack.imgur.com/jvrU9.png)

看起来它有效，只使用一个依赖项：

```
<dependency>
      <groupId>org.bytedeco.javacpp-presets</groupId>
      <artifactId>tesseract</artifactId>
      <version>3.03-rc1-0.11</version>
</dependency>
```

在这里： [https ://github.com/bytedeco/javacpp-presets/tree/master/tesseract](https://github.com/bytedeco/javacpp-presets/tree/master/tesseract)

干杯科拉多

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-30T12:10:14.637

我使用了这个[如何使用 Appium 测试 Toast 消息？](http://www.qaautomated.com/2017/12/how-to-test-toast-messages-using-appium.html)

有了这个

```
 <dependency>
        <groupId>net.sourceforge.tess4j</groupId>
        <artifactId>tess4j</artifactId>
        <version>3.2.1</version>
    </dependency> 
```

# activemq - 从队列中删除的消息

> ID：13974647
> 
> 赞同：1
> 
> 时间：2012-12-20T14:45:35.360
> 
> 标签：activemq, blockingqueue

我使用 BlockingQueue 实现通过队列中的服务处理我的事件。但是，如果服务器出现故障，则该队列中的所有事件都将被删除，因此我缺少要处理的事件。（我正在寻找一些内部数据库，服务器可以在其中存储来自队列的事件/消息，如果服务器再次关闭和启动，它可以加载所有事件/消息以再次处理，而无需手动干预）。

对此有任何帮助。我不确定是否应该使用 Apache ActiveMQ。我正在使用 apache servicemix。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:09:19.913

我无法回答如何使用 BlockingQueue 执行此操作。

但是 ActiveMQ 有两个特性可以让你受益：

[持久队列](http://activemq.apache.org/what-is-the-difference-between-persistent-and-non-persistent-delivery.html)，您可能还想查看[持久队列](http://activemq.apache.org/how-do-durable-queues-and-topics-work.html)

它有一个内置数据库，可以在后台执行此操作，并且即使代理或消费者必须重新启动，消息也可以保留在队列中。

# javascript - 处理 SQL 时出错：0 PhoneGap SQL

> ID：13974648
> 
> 赞同：1
> 
> 时间：2012-12-20T14:45:43.530
> 
> 标签：javascript, sql, html, cordova

我尝试并从这里复制代码：http: [//luthfihariz.wordpress.com/2011/10/23/android-sqlite-phonegap-jquerymobile/](http://luthfihariz.wordpress.com/2011/10/23/android-sqlite-phonegap-jquerymobile/) 为了成功使用我正在研究的示例来学习这一点。我有一个指向我在 pastebin 上的完整 index.html 的链接。

请纠正我并帮助我找到这个错误。

[在此处链接到 Pastebin](http://pastebin.com/L63Np7E4)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T18:18:31.943

我没有太多时间，马上就是圣诞节了 :) 但是.. :) 我确实用你的代码作为初学者写了一个工作示例。

使用 Cordova 版本 2.2.0 使用 PhoneGap 进行编译 我确实在 android 设备上对其进行了测试，我确实在这里和那里更改了一些东西，但我使用了来自[这里](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)的代码作为参考。

```
document.addEventListener("deviceready", onDeviceReady, false);

var db = "";

function populateDB(tx) {
    tx.executeSql('DROP TABLE IF EXISTS SoccerPlayer');
    tx.executeSql('CREATE TABLE IF NOT EXISTS SoccerPlayer (Name TEXT NOT NULL, Club TEXT NOT NULL)');
    tx.executeSql('INSERT INTO SoccerPlayer(Name,Club) VALUES ("Alexandre Pato", "AC Milan")');
    tx.executeSql('INSERT INTO SoccerPlayer(Name,Club) VALUES ("Van Persie", "Arsenal")');
}

function queryDB(tx) {
    tx.executeSql('SELECT * FROM SoccerPlayer', [], querySuccess, errorCB);
}

function querySuccess(tx,result){
        var playerlist = document.getElementById("SoccerPlayerList");
        var players = "";
        alert("The show is on");
        var len = result.rows.length;
        for (var i=0; i<len; i++){
            alert(result.rows.item(i).Name + result.rows.item(i).Club);
            players = players + '<li><a href="#"><p class="record">'+result.rows.item(i).Name+'</p><p class="small">Club '+result.rows.item(i).Club+'</p></a></li>';
        }   

        playerlist.innerHTML = players;
        $("#SoccerPlayerList").listview("refresh");
}

function errorCB(err) {
    alert("Error processing SQL: "+err.code);
}

function successCB() {
    db.transaction(queryDB, errorCB);
}

function onDeviceReady() {
    db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(populateDB, errorCB, successCB);
} 
```

# c# - 启动进程时出现 System.ComponentModel.Win32Exception - 找不到文件，但文件存在

> ID：13974653
> 
> 赞同：9
> 
> 时间：2012-12-20T14:45:54.393
> 
> 标签：c#, exception, file-access, file-not-found, win32exception

我正在尝试为我的自动启动创建一个管理器。它应该读取一个 XML 文件，然后以自定义延迟启动我的程序。例如：

```
<startup id="0">
    <name>Realtek Audio Manager</name>
    <process arguments="-s">C:\Program Files\Realtek\Audio\HDA\RtkNGUI64.exe</process>
    <delay>5</delay>
</startup> 
```

`C:\Program Files\...\RtkNGUI64.exe -s`这将在 5 秒后运行指定的进程 ( )。

现在，其中三个程序无法启动，给我一个`System.ComponentModel.Win32Exception`：“Das System kann die angegebene Datei nicht finden。” （“系统找不到指定的文件。”）

但是 XML 解析正确，我要启动的文件位于我在 XML 文件中指定的位置。

问题仅涉及以下三个文件：
Intel HotkeysCmd - C:\Windows\System32\hkcmd.exe
Intel GFX Tray - C:\Windows\System32\igfxtray.exe
Intel Persistance - C:\Windows\System32\igfxpers.exe

我认为问题出在文件的位置：它们都位于 C:\Windows\System32 中，而所有其他工作程序都位于外部 (C:\Program Files, C:\Program Files (x86) , D:\程序文件, `%AppData%`)

我是否必须授予我的程序某种访问权限才能在 C:\Windows\System32 中启动程序？我该怎么做？

如果没有，我收到这些程序错误的原因可能是什么？

编辑 - 我的代码：

```
delegate(object o)
{
    var s = (Startup) o;
    var p = new System.Diagnostics.Process
                {
                    StartInfo =
                        new System.Diagnostics.ProcessStartInfo(s.Process, s.Arguments)
                };
    try
    {
        s.Process = @"C:\Windows\System32\igfxtray.exe"; // For debugging purposes
        System.Diagnostics.Process.Start(s.Process);
        icon.ShowBalloonTip(2000, "StartupManager",
                            "\"" + s.Name + "\" has been started.",
                            System.Windows.Forms.ToolTipIcon.Info);
    }
    catch (System.ComponentModel.Win32Exception)
    {
        icon.ShowBalloonTip(2000, "StartupManager",
                            "\"" + s.Name + "\" could not be found.",
                            System.Windows.Forms.ToolTipIcon.Error);
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T16:45:08.267

显然，您使用的是 64 位版本的 Windows。c:\windows\system32 和 c:\program 文件目录受制于称为“文件系统重定向”的功能。这是一个 appcompat 功能，它有助于确保 32 位进程不会尝试使用 64 位可执行文件。它们将被*重定向*到 c:\windows\syswow64 和 c:\program 文件 (x86)。

因此，当您尝试在 c:\program files\realtek\etcetera 中启动文件时，您的 32 位程序将被重定向到 c:\program files (x86)\realtek\etcetera。一个不存在的目录，kaboom。igfxtray.exe 的相同成分

您需要更改程序的平台目标，以便它可以作为本机 64 位进程运行并避免您现在遇到的重定向问题。项目 + 属性，构建选项卡，将“平台目标”设置更改为 AnyCPU。

# android - Android 中的 runOnUiThread 与 Looper.getMainLooper().post

> ID：13974661
> 
> 赞同：114
> 
> 时间：2012-12-20T14:46:19.790
> 
> 标签：android

谁能告诉我在Android的UI线程上使用`runOnUiThread()`和`Looper.getMainLooper().post()`执行任务之间是否有区别？

我唯一能确定的是，由于 runOnUiThread 是一个非静态的 Activity 方法，`Looper.getMainLooper().post()`当你需要在一个看不到 Activity 的类（例如接口）中编写一些东西时会更方便。

我不是在寻找关于是否应该在 UI 线程上执行某些事情的讨论，我知道有些事情不能，很多事情不应该，但是，有些事情（比如启动 AsyncTask）必须执行从 UI 线程。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-12-20T15:00:51.807

从后台线程调用时，以下行为相同：

*   使用`Looper.getMainLooper()`

    ```
    Runnable task = getTask();
    new Handler(Looper.getMainLooper()).post(task); 
    ```

*   使用`Activity#runOnUiThread()`

    ```
    Runnable task = getTask();
    runOnUiThread(task); 
    ```

唯一的区别是当您从 UI 线程执行此操作时，因为

```
public final void runOnUiThread(Runnable action) {
    if (Thread.currentThread() != mUiThread) {
        mHandler.post(action);
    } else {
        action.run();
    }
} 
```

会检查当前Thread是否已经是UI线程，然后直接执行。将其作为消息发布将延迟执行，直到您从当前 UI 线程方法返回。

还有第三种`Runnable`在 UI 线程上执行的方法是[`View#post(Runnable)`](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)- 即使从 UI 线程调用，这种方法也将始终发布消息。这很有用，因为这将确保`View`在执行代码之前已正确构造并具有布局。

# android - 清单中声明的 接收器是否启动应用程序进程和应用程序类？

> ID：13974662
> 
> 赞同：0
> 
> 时间：2012-12-20T14:46:20.883
> 
> 标签：android, process, broadcastreceiver

在我的一个应用程序中，我使用了应用程序 (MyApplication) 的子类和添加到清单中的广播接收器 (MyBroadcastReceiver)。BroadcastReceiver 注册动作**android.intent.action.PACKAGE_ADDED**和**android.intent.action.PACKAGE_REPLACED**。

在设备上添加或替换 APK 时会触发这些意图。应用程序本身在安装过程中没有显示，所以我的问题是：应用程序子类会与应用程序进程一起启动吗？

这是代码：

**显现：**

```
<application
    ...
    android:name=".MyApplication" >

    ...

    <receiver
        android:name=".MyBroadcastReceiver" >
        <intent-filter>
            <action
                android:name="android.intent.action.PACKAGE_ADDED" />
            <action
                android:name="android.intent.action.PACKAGE_REPLACED" />
            <data
                android:path="xxx.yyy.zzz"
                android:scheme="package" />
        </intent-filter>
    </receiver>
</application> 
```

**我的应用程序：**

```
public class MyApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();

        Log.d(this.getClass().getName(), "onCreate");

        // ...
        }

    @Override
    public void onTerminate() {
        // ...

        super.onTerminate();
    }
} 
```

**我的广播接收器：**

```
public class MyBroadcastReceiver extends BroadcastReceiver {

    public static final String TAG = "xxx.yyy.zzz.MyBroadcastReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent != null && intent.getDataString() != null) {
            if (intent.getDataString().contains("xxx.yyy.zzz")) {
                if (intent.getAction().equals(Intent.ACTION_PACKAGE_ADDED)) {
                    Log.d(this.getClass().getName(), "onReceive(Package added)");

                    // ...
                } else if (intent.getAction().equals(Intent.ACTION_PACKAGE_REPLACED)) {
                    Log.d(this.getClass().getName(), "onReceive(Package replaced)");

                    // ...
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:51:06.760

> Application 子类会与应用程序进程一起启动吗？

是的。该`Application`对象应该在您的`BroadcastReceiver`实例被创建和调用之前被创建`onReceive()`。

# python - Google App Engine SDK：系统时间与计算机时间不同

> ID：13974667
> 
> 赞同：2
> 
> 时间：2012-12-20T14:46:39.977
> 
> 标签：python, google-app-engine, datetime

在 Google App Engine 中，我用来`nowTime = datetime.datetime.now()`获取系统时间。但是，我发现它与计算机系统时间不同。例如，`nowTime`是`2012-12-20 14:44:30.910192`，但我的计算机系统时间是`2012-12-20 22:44`。有八小时的差异。是因为时区吗？Google App Engine SDK 从哪里获得时间？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:01:30.993

请参阅[http://timezones.appspot.com/](http://timezones.appspot.com/) - GAE 时区将始终在 中`UTC`，这就是您看到 8 小时差异的原因。根据网站：

> 运行时的 TZ 环境变量设置为 UTC，并且无法更改。例如 time.time() 和 datetime.datetime.now() 返回的时间戳将始终采用 UTC。同样，数据存储中的日期时间属性将始终作为 UTC 存储和返回。
> 
> 您可以使用 astimezone() 方法更改内存中日期时间的时区。如果没有设置 datetime 的 tzinfo 成员，您首先需要使用 replace() 方法将其设置为 UTC tzinfo。

您还可以[在此处](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#datetime)查看它的文档，以及如何进行特殊处理的示例。

# java - 无法使用 jpcap 打开设备

> ID：13974673
> 
> 赞同：1
> 
> 时间：2012-12-20T14:47:14.740
> 
> 标签：java, winpcap, jpcap

我无法使用 jpcap 库打开找到的网络设备。我已经安装了 winpcap 并在 system32 和 syswow64 中有 jpcap.dll。以下教程代码在尝试打开设备时崩溃。崩溃日志：

```
PacketCapture: loading native library jpcap.. ok
net.sourceforge.jpcap.capture.CaptureDeviceOpenException: Error opening adapter: The system cannot find the device specified. (20)
    at net.sourceforge.jpcap.capture.PacketCapture.open(Native Method)
    at net.sourceforge.jpcap.capture.PacketCapture.open(PacketCapture.java:57)
    at networksnifferdesktop.NetworkSnifferDesktop.<init>(NetworkSnifferDesktop.java:26)
    at networksnifferdesktop.NetworkSnifferDesktop.main(NetworkSnifferDesktop.java:40)
Java Result: 1 
```

在调试中我可以看到`m_device`设置为：

```
"\Device\NPF_{EC5226CF-3F55-4148-B40E-1FC3F8BB3398}   Realtek PCIe GBE Family Controller" 
```

在以下代码中：

```
package networksnifferdesktop;

import net.sourceforge.jpcap.capture.*;
import net.sourceforge.jpcap.net.*;

public class NetworkSnifferDesktop
{
    private static final int INFINITE = -1;
    private static final int PACKET_COUNT = 10;

    // BPF filter for capturing any packet
    private static final String FILTER = "";

    private PacketCapture m_pcap;
    private String m_device;

    public NetworkSnifferDesktop() throws Exception
    {
        // Step 1:  Instantiate Capturing Engine
        m_pcap = new PacketCapture();

        // Step 2:  Check for devices
        m_device = m_pcap.findDevice();

        // Step 3:  Open Device for Capturing (requires root)
        m_pcap.open(m_device, true);

        // Step 4:  Add a BPF Filter (see tcpdump documentation)
        m_pcap.setFilter(FILTER, true);

        // Step 5:  Register a Listener for Raw Packets
        m_pcap.addRawPacketListener(new RawPacketHandler());

        // Step 6:  Capture Data (max. PACKET_COUNT packets)
        m_pcap.capture(PACKET_COUNT);
    }

    public static void main(String[] args)
    {
        try
        {
            NetworkSnifferDesktop example = new NetworkSnifferDesktop();
        }
        catch (Exception e)
        {
            e.printStackTrace();
            System.exit(1);
        }
    }
}

class RawPacketHandler implements RawPacketListener
{
    private static int m_counter = 0;

    public void rawPacketArrived(RawPacket data)
    {
        m_counter++;
        System.out.println("Received packet (" + m_counter + ")");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:04:15.213

`"\Device\NPF_{EC5226CF-3F55-4148-B40E-1FC3F8BB3398} Realtek PCIe GBE Family Controller"`，如果你的字面意思是一个字符串，它的第一个字符是“\Device”中的“D”，最后一个字符是“Controller”中的“r”，那么它*不是*有效的 WinPcap 设备名称字符串。

`"\Device\NPF_{EC5226CF-3F55-4148-B40E-1FC3F8BB3398}"`将是一个有效的设备名称字符串。

通过查看 Jpcap 源，该`findDevice`方法似乎*没有*返回有效的设备名称字符串。它被记录为返回“描述网络设备的字符串”；它返回的是一个包含设备名称字符串、换行符、两个空格和设备供应商描述字符串的字符串。 [这已被报告为 Jpcap 错误](http://sourceforge.net/tracker/?func=detail&aid=1057039&group_id=27207&atid=389768)。

我建议您扫描字符串以查找第一个空白字符（“空白”包括空格和换行符），并使用作为传递给打开例程的设备名称，直到但不包括那个白色-空格字符。（如果找不到空白字符，请使用整个字符串。）

# java - Java调用子类方法

> ID：13974675
> 
> 赞同：2
> 
> 时间：2012-12-20T14:47:19.523
> 
> 标签：java, arraylist, superclass

当我尝试创建一个类的实例并将其添加到我的数组列表中时，我无法调用子项中定义的方法。

我如何使这项工作？

**列表类**：

```
import java.util.*;
public class List {
  private ArrayList<Person> persons;
  public List(){
    persons = new ArrayList<Person>();
  }
  public void addAssistant(){
    Person person = new Assistant();
    persons.add(person);
    if(person instanceof Assistant){
      person.assist();
    }
  }
} 
```

**人物类**：

```
public class Person {
  public Person(){}
} 
```

**助理班**：

```
public class Assistant extends Person {
  public Assistant(){}
  public void assist(){
     System.out.println("I am assisting!");
  }
} 
```

编译器：行：person.assist(); 在 List 类的 addAssistant() 方法中。

编译器错误：编译器找不到符号 - 方法辅助（）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:49:28.967

你需要一个明确的演员：

```
if(person instanceof Assistant){
  ((Assistant)person).assist();
} 
```

但是，我认为这种类型的逻辑通常应该被劝阻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:50:19.497

你必须把你`Person`变成`Assistant`这样的：

```
if(person instanceof Assistant){
  ((Assistant)person).assist();
} 
```

我认为这种类型的转换表明存在缺陷的应用程序设计。

[只是一个旁注：]

您应该使用接口而不是具体的实现。所以你应该替换这个：

```
private ArrayList<Person> persons; 
```

有了这个：

```
private List<Person> persons; 
```

如果您希望您`Person`的 s 完成他们的特定工作并且`Assistant`s 的工作有帮助，那么您可以通过在`Person`

```
public abstract void doYourWork(); 
```

你可以实现它`Assistant`：

```
@Override
public void doYourWork(){
    // doing something
} 
```

在这种情况下，您不必显式地转换您的`Person`对象。

如果 Person 没有任何具体的实现，您可以将其设为接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:50:40.777

您需要进行强制转换以使用子类方法

```
if(person instanceof Assistant){
  ((Assistant)person).assist();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T14:51:59.233

Person 类没有定义辅助方法，因此您必须显式转换为 Assistant 类，例如

```
if(person instanceof Assistant){
  ((Assistant)person).assist();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T15:23:03.557

我会这样编码

```
public void addAssistant(){
    Assistant assistant = new Assistant();
    assistant.add(person);
    assistant.assist();
} 
```

将自己从您最近创建的对象实际上是助手的知识中抽象出来是没有意义的。

从具体类型中抽象出自己是减少两段代码之间耦合的好方法，并且它对于做多态之类的好事情是必要的......但是在这个特定的例子中，您向我们展示了您已经与助手紧密耦合（在事实上你只是在上面两行实例化它）。

另一种可能的实现方式是使用多态性，您可以通过将assist() 方法添加到Person 的接口来实现。

```
public class Person {
  public Person(){}

  public void assist() {
     //I'm a just a person who doesn't assist anywhere
  }
} 
```

通过这样做，您将能够做您正在尝试的事情：

```
public void addAssistant(){
    Person person = new Assistant();
    persons.add(person);
    person.assist();     
} 
```

但是我不建议这样做，主要是因为您将开始用未正确放置在那里的职责填充您的 Person 接口。这完全是设计问题，您需要为您的特定问题选择更好的（当然也是最舒适的）解决方案。

好运克劳迪奥

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T14:51:00.783

设计语言的方式`Java`，这不会编译（正如您所想的那样）。这样想，所有的助手都是人，但不是所有的人都是助手。如果您使用显式强制转换，您可以做您想做的事情（正如 NPE 在他的回答中提到的那样）。

# function - 为什么 Powershell 认为我正在尝试返回一个对象 [] 而不是一个 DataTable？

> ID：13974676
> 
> 赞同：11
> 
> 时间：2012-12-20T14:47:25.213
> 
> 标签：function, powershell, return-value

我有以下 PS 功能：

```
function GetBuildData {
    [System.Data.SqlClient.SqlConnection] $conn = New-Object System.Data.SqlClient.SqlConnection
    [System.Data.SqlClient.SqlCommand] $cmd = New-Object System.Data.SqlClient.SqlCommand
    [System.Data.SqlClient.SqlDataAdapter] $adapter = New-Object System.Data.SqlClient.SqlDataAdapter
    [System.Data.DataTable] $dt = New-Object System.Data.DataTable

    try {
        [string] $connStr = "myConnectionString"

        $conn.ConnectionString = $connStr
        $cmd.Connection = $conn
        $cmd.CommandText = "SELECT * FROM TestTable"

        $conn.Open

        $adapter.SelectCommand = $cmd

        $adapter.Fill($dt)

        $conn.Close
    }
    catch [system.exception]
    {
        Write-Host $_
    }
    finally {
        $adapter.Dispose
        $cmd.Dispose
        $conn.Dispose
    }

    return $dt
} 
```

为简洁起见，大部分功能已被删除。我遇到的问题是当我像这样调用函数时：

`[System.Data.DataTable] $buildData = GetBuildData`

我收到以下错误：

> 无法将“System.Object[]”类型的“System.Object[]”值转换为“System.Data.DataTable”类型。

为什么当很明显 $dt 变量是 DataTable 时，Powershell 认为我想要返回一个 object[] 数组？

编辑：

我已经仔细检查过，`$dt`确实包含数据。例如，Rows.Count 的数量是预期的 1。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-22T00:19:23.790

我不知道人们提出的其他问题，但我可以想到两个可能的原因，为什么你会返回一个`Object[]`.

1.  可能是您在函数的其他地方有未捕获的输出。在您的情况下，`Fill`返回一个`int`. 尝试将其添加到函数调用的末尾：

    ```
    | Out-Null 
    ```

    例如，

    ```
    $adapter.Fill($dt) | Out-Null 
    ```

    如果任何语句返回一个值并且您没有捕获它，则输出将包含在您的返回值中，并且由于此时您将有多个返回值，PowerShell 会将它们全部填充到一个数组中。

2.  另一种可能性是 PowerShell 将返回的各种集合转换为`Object[]`s。使用`,`运算符返回未损坏的值：

    ```
    return , $dt 
    ```

    创建一个仅包含后面值的`,`数组。据我猜测，这会导致 PowerShell 自动展开最外层的数组并保留该值，因为实际的返回值现在是一个仅包含单个值的数组。

    `return`实际上是可选的，因为未捕获的值包含在返回值中。

    昨天我自己也碰到了这个。我一生都无法弄清楚为什么有人会认为默默地转换`Object[]`为有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:10:18.110

您发布的内容确实存在一些问题。由于您使用 显式创建了一个 DataTable 对象`New-Object System.Data.DataTable`，因此没有理由也将其强制转换为具有 的 DataTable 类型`[System.Data.DataTable]`。调用函数时也是如此。您正在返回一个 DataTable 对象，这就是您将得到的。此外，如果您确实想指定变量类型，则类型标识符和变量名称之间不应有空格。无论如何，这些问题不会导致您看到的行为。我运行了这段代码：

```
function GetBuildData {
    $dt = New-Object System.Data.DataTable
    $column1 = New-Object system.Data.DataColumn 'Col1'
    $column2 = New-Object system.Data.DataColumn 'Col2'
    $dt.columns.add($column1)
    $dt.columns.add($column2)
    $row = $dt.NewRow()
    $row.col1 = '1'
    $row.col2 = '2'
    $dt.rows.add($row)

    return $dt
}

$buildData = GetBuildData
$buildData
Col1                                                                     Col2
----                                                                     ----
1                                                                        2 
```

它工作得很好。我怀疑导致您的问题的位可能是您为简洁而排除的位。快捷方式很少，而且您很少从部分数据中获得准确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:27:51.780

一个促成因素是您实际上并没有调用 open 和 close 方法，而是引用它们。PowerShell 正在输出对这些方法以及数据表的引用（由于连接未打开，我想实际上并未填充数据表）。

您需要在打开/关闭方法中包含括号，如下所示：

```
$conn.Open()
...
$conn.Close() 
```

您还需要注意返回值的方法（.Add() 方法为此而臭名昭著），您不会通过分配给变量或通过管道传递到空值来使用这些方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T04:46:14.160

您只需要取消所有未分配给变量的点命令

```
function GetBuildData {
    [System.Data.SqlClient.SqlConnection] $conn = New-Object   System.Data.SqlClient.SqlConnection
    [System.Data.SqlClient.SqlCommand] $cmd = New-Object System.Data.SqlClient.SqlCommand
    [System.Data.SqlClient.SqlDataAdapter] $adapter = New-Object System.Data.SqlClient.SqlDataAdapter
    [System.Data.DataTable] $dt = New-Object System.Data.DataTable

    try {
        [string] $connStr = "myConnectionString"

        $conn.ConnectionString = $connStr
        $cmd.Connection = $conn
        $cmd.CommandText = "SELECT * FROM TestTable"

        [void]$conn.Open

        $adapter.SelectCommand = $cmd

        $adapter.Fill($dt)

        [void]$conn.Close
    }
    catch [system.exception]
    {
        Write-Host $_
    }
    finally {
         [void]$adapter.Dispose
         [void]$cmd.Dispose
         [void]$conn.Dispose
    }

    $dt
} 
```

至于你的问题*为什么？*... 阅读 Keith Hill 的博客：[powershell 函数如何返回工作](http://www.vistax64.com/powershell/107328-how-does-return-work-powershell-functions.html)

# php - mysql pdo 事务和会话存储

> ID：13974680
> 
> 赞同：5
> 
> 时间：2012-12-20T14:47:33.937
> 
> 标签：php, mysql, transactions, pdo, persistent-connection

我很难确定我的网络应用程序的最佳解决方案是什么，该应用程序在每个会话中多次访问（主要是读取）相同的用户数据。

我应该在打开新会话时一次将所有用户数据（大约 40 个字段）检索到 $_SESSION，还是应该保持持久 PDO（mysql）连接并在每次脚本执行时仅从数据库中查询我需要的参数？

**还：**

在同一事务中一次读取/更新大量字段（使用自定义查询）或一个接一个（使用通用查询的自定义组合）在性能上会有很大差异吗？例如

```
$dbh = new PDO("mysql:host=localhost;dbname",$dbuser,$dbpass,array(PDO::ATTR_PERSISTENT => true));

$fieldlist='';
foreach ($fields as $i=>$field){
    $fieldlist.=$field['name'].':field'.$i.',';
}
rtrim($fieldlist,',');
$dbh->prepare("UPDATE user SET ".$fieldlist." WHERE name=:name");
foreach ($fields as $i=>$field){
    $stmt->bindValue(':field'.$i, $field['value'], PDO::PARAM_STR);
}
$stmt->bindValue(':name', $name, PDO::PARAM_STR);
$stmt->execute();

$dbh = null; 
```

对比

```
$dbh = new PDO("mysql:host=localhost;dbname",$dbuser,$dbpass,array(PDO::ATTR_PERSISTENT => true));

$dbh->beginTransaction();

foreach($fields as $field){
    $stmt=$dbh->prepare("UPDATE user SET ".$field['name']."=:field WHERE name=:name");
    $stmt->bindValue(':field', $field['value'], PDO::PARAM_STR);
    $stmt->bindValue(':name', $name, PDO::PARAM_STR);
    $stmt->execute();
}

$dbh->commit();

$dbh = null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:44:26.057

> 性能会不会有很大差异

我会说常识上有区别。
为什么要一个一个地重复，而你可以一次做呢？是否有任何理由为同一任务编写更多代码？
看来你是在寻找麻烦，而不是他们真正所在的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:02:50.823

无法完成。即使你能做到这一点，这也是一个坏主意。您将创建一个具有大量并发打开连接的情况，这些连接将超过您的最大连接数。

我不确定为什么您必须使用相同的数据不断更新会话。只需将数据一次放入会话中，即可完成。

如果您正在处理大型数据集，您可能需要考虑缓存。这将减少数据库负载。您可以使用 memcached。这将提高性能，它允许您指定要缓存的资源和数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:56:42.030

您应该将数据保留在会话中。

您不能安全地保持会话中的任何处理程序 - 在您的情况下是数据库连接 - 因为下一个请求的标识符可能不同。此外，保持开放的连接以防万一可能不是最好的做法。

如果您以任何方式加载数据，只需保持会话 - 如果您每次查询它，您将使用至少相同数量的内存，但会执行数据库查询，因此与仅保留数据相比性能会更差。如果您需要在每个请求中刷新数据，只需使用新连接即可，不要尝试将连接处理程序保留在会话中。

# r - 如何根据特定条件过滤行？

> ID：13974687
> 
> 赞同：0
> 
> 时间：2012-12-20T14:47:49.700
> 
> 标签：r, filter, rows

我有一个示例文件如下：

```
GENES Samp1 Samp2 Samp3 Samp4 Samp5 Samp6 Samp7 Samp8
g1    0.000 0.000 0.000 0.000 0.010 0.000 0.022 0.344
g2    0.700 0.000 0.000 0.000 0.000 0.000 0.000 0.000
g3    0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000
g4    0.322 0.782 0.000 0.023 0.000 0.000 0.000 0.345
g5    0.010 0.000 0.333 0.000 0.000 0.000 0.011 0.000
g6    0.000 0.000 0.010 0.000 0.000 0.000 0.000 0.000 
```

如果行（基因）列表具有“2 个或更多样本”且值为“0.010 或更多”，我需要检索它。所以我应该得到如下结果列：

```
GENES
g1
g4
g5 
```

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:56:19.693

这是一种可能的方法：

```
DF <- read.table(text=
"GENES Samp1 Samp2 Samp3 Samp4 Samp5 Samp6 Samp7 Samp8
g1 0.000 0.000 0.000 0.000 0.010 0.000 0.022 0.344
g2 0.700 0.000 0.000 0.000 0.000 0.000 0.000 0.000
g3 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000
g4 0.322 0.782 0.000 0.023 0.000 0.000 0.000 0.345
g5 0.010 0.000 0.333 0.000 0.000 0.000 0.011 0.000
g6 0.000 0.000 0.010 0.000 0.000 0.000 0.000 0.000",header=T,sep=' ')

rows <- sapply(1:nrow(DF),FUN=function(i){sum(DF[i,2:ncol(DF)] >= 0.01) >= 2})
subSet <- DF[rows,]

> subSet
  GENES Samp1 Samp2 Samp3 Samp4 Samp5 Samp6 Samp7 Samp8
1    g1 0.000 0.000 0.000 0.000  0.01     0 0.022 0.344
4    g4 0.322 0.782 0.000 0.023  0.00     0 0.000 0.345
5    g5 0.010 0.000 0.333 0.000  0.00     0 0.011 0.000 
```

或类似的：

```
subSet <- DF[apply(DF,1,function(x){sum(tail(x,-1) >= 0.01) >= 2}),] 
```

或这个：

```
subSet <- DF[rowSums(DF[,2:ncol(DF)] >= 0.01) >= 2,] 
```

如您所见，有很多方法可以做到这一点:)

# c# - WPF MVVM 中数据库事务的任务、BackgroundWorkers 还是新线程？

> ID：13974694
> 
> 赞同：1
> 
> 时间：2012-12-20T14:48:34.380
> 
> 标签：c#, wpf, mvvm, task

我有一个与数据库通信的小型 MVVM 应用程序。在完成后更新 UI 的后台线程中执行数据库事务的标准方法是什么（如果有）？我应该使用 BackgroundWorkers、TPL 还是实现自己的线程？目前我有一个静态类，具有以下后台工作方法：

```
public static void RunAsync(Action backgroundWork, Action uiWork, Action<Exception> exceptionWork) {

    var uiContext = TaskScheduler.FromCurrentSynchronizationContext();

    // The time consuming work is run on a background thread.
    var backgroundTask = new Task(() => backgroundWork());

    // The UI work is run on the UI thread.
    var uiTask = backgroundTask.ContinueWith(_ => { uiWork(); },
        CancellationToken.None,
        TaskContinuationOptions.OnlyOnRanToCompletion,
        uiContext);

    // Exceptions in the background task are handled on the UI thread.
    var exceptionTask = backgroundTask.ContinueWith(t => { exceptionWork(t.Exception); },
        CancellationToken.None,
        TaskContinuationOptions.OnlyOnFaulted,
        uiContext);

    // Exceptions in the UI task are handled on on the UI thread.
    var uiExceptionTask = uiTask.ContinueWith(t => { exceptionWork(t.Exception); },
        CancellationToken.None,
        TaskContinuationOptions.OnlyOnFaulted,
        uiContext);

    backgroundTask.Start();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:37:30.010

您可以使用`async`/ `await`，这将为您提供更自然的语法：

```
public static async Task RunAsync(Action backgroundWork, Action uiWork, Action<Exception> exceptionWork)
{
  try
  {
    // The time consuming work is run on a background thread.
    await Task.Run(backgroundWork);

    // The UI work is run on the UI thread.
    uiWork();
  }
  catch (Exception ex)
  {
    // Exceptions in the background task and UI work are handled on the UI thread.
    exceptionWork(ex);
  }
} 
```

或者更好的是，只需替换`RunAsync`为代码本身，而不是

```
T[] values;
RunAsync(() => { values = GetDbValues(); }, () => UpdateUi(values), ex => UpdateUi(ex)); 
```

你可以说：

```
try
{
  var values = await Task.Run(() => GetDbValues());
  UpdateUi(values);
}
catch (Exception ex)
{
  UpdateUi(ex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:57:57.793

那么你可以使用任何这些技术。不过，我总是会在单独的线程上运行它们。重要的是线程操作在适当的时候被编组回 UI 线程。如果在 .net 4.5 中，我的偏好是使用任务或异步等待

# java - Java 无法访问子类重新定义方法中的顶级属性

> ID：13974703
> 
> 赞同：5
> 
> 时间：2012-12-20T14:49:18.947
> 
> 标签：java, generics, inheritance

在我的顶级课程中，我有以下工作就像一个魅力：

```
public class TestA<E extends Test>
{
      List<Vector<E>> list;
      String name, location;

      TestA(String name, String location)
      {
            this.name = name;
            this.location = location;
            list = new ArrayList<Vector<E>>();
      }

      void populate(Test[] arr)
      {
            for(Vector<E> vk : list)
            {
                  // Code here...
            }
      }

}     

class OrderedTest<E extends Test> extends TestA {

      OrderedTest(String name, String location)
      {
            super(name, location);
      }

      void populate(Test[] arr)
      {
            for(Vector<E> vk : list) // ERROR: Cannot convert from element Object to Vector<E>
            {
                  // Code here... 
            }
      }

} 
```

当我尝试在我的子类中扩展 populate() 时，我基本上只需要在这里使用相同的方法，我想要订购的东西，所以我将在快速排序方法中提取每个 Vector，但除了以下问题之外我没有遇到任何其他问题：`// ERROR: Cannot convert from element Object to`

编辑：我应该为 TestA 实现迭代器吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T14:54:42.303

如编码所示，“E”作为通用参数的两种用法是独立且不连贯的。`Vector<E>`在一类中并不意味着与另一类中的相同`Vector<E>`。

将子类声明更改为：

```
class OrderedTest<E extends Test> extends TestA<E> 
```

并且超类声明中的 E 与 OrderedTest 中的 E 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:01:37.670

你声明了一个 Generic

```
class TestA<E> 
```

定义 List< Vector< E >> > 类型的字段，意味着向量将包含 E 类型的元素，这也意味着如果不定义 E，则在子类化 TestA 的实例化时，Vector 将是 Vector。

子类也是泛型定义为：

```
class OrderedTest<E extends Test> extends TestA 
```

重用字母“E”定义此泛型不会将其绑定到父类。那就是说您没有定义父类 E 类型，这就是为什么它是 Object （默认类型）。

如果要将父类泛型类型定义为与子类相同，则必须将其定义为：

```
class OrderedTest<E extends Test> extends TestA<E> 
```

请注意，此处的字母“E”与父“E”参数没有任何联系，并且可以是任何字母，因为它是 OrderedTest 类的参数，您只是决定使用此类型参数来定义父亲类型参数也是。所以你可以做例如：

```
class OrderedTest<T extends Test> extends TestA<T> 
```

重要的是使用将定义给子类的类型属性定义父类类型属性，这样您就可以访问期望相同数据类型的列表字段。

# .htaccess - htaccess - URL 重写 - 删除斜杠，但不从文件中删除

> ID：13974713
> 
> 赞同：1
> 
> 时间：2012-12-20T14:49:41.830
> 
> 标签：.htaccess, redirect, url-rewriting

我使用 PHP。

**一个工作的 htaccess 文件**

```
RewriteEngine On
RewriteBase /folder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule .*[^/]$ $0/ [L,R=301]
RewriteCond $1 !^(index\.php)
RewriteRule ^(.+)$ index.php/$1 [L] 
```

查看带有# 注释的行。取消注释时，它会将重定向添加到斜杠。我使用[toroPHP](http://toroweb.org/)的 URL 重写。

**我想改写为结尾斜线**

*   我想从重写的 URL 重定向到结束斜杠，就像上面的代码一样。
*   我不想从真实文件中结束斜线，比如 jquery.js、style.css。

**示例（2012 年 12 月 21 日更新）**

*   `/category/test`应该`/category/test/`
*   `http://www.test.com/myjsfile.js`应该`http://www.test.com/myjsfile.js`

**问题**

*   如果我使用上面未注释的代码，它会为所有 url 添加一个结尾斜杠，包括 javascript 文件和 css 文件。
*   我只希望重写的网址以斜杠结尾。

**问题**

可以用htaccess完成吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:38:25.047

htaccess 几乎是正确的。然而，`REQUEST_FILENAME`需要在每个重写规则之前，而不仅仅是在第一个之前。

**这有效**

```
RewriteEngine On
RewriteBase /folder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .*[^/]$ $0/ [L,R=301]

RewriteCond $1 !^(index\.php)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php/$1 [L] 
```

# oracle-apps - 处理日期必须在 Oracle Incentive Compensation 的开放期内

> ID：13974714
> 
> 赞同：0
> 
> 时间：2012-12-20T14:49:44.840
> 
> 标签：oracle-apps

我们在 Manage Transacations --> Create 中的薪酬经理职责屏幕上遇到错误

当我们尝试创建新交易时，我们收到错误“处理日期必须在开放期间内”。

虽然我们已经设置了会计计算器的主分类帐以及开放期间，并且在处理日期中选择的日期在指定的开放期间内，但我们仍然面临这个错误另外，如何知道我们的运营单位已附加到那个特定的分类帐。如果我们可以确认选择的 OU 与我们定义了开放期间的分类帐相关联。可能是这个原因还是有其他原因。请帮忙。 ![在此处输入图像描述](../Images/50c9048cf8e33efc05f2630a6a964e4f.png)![在此处输入图像描述](../Images/1e63978c3fb7a23c91187b000fe30449.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:45:52.953

请检查 OIC 是否开放补偿期。

导航：

薪酬管理器 > 设置 > 维护薪酬期间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:06:18.457

谢谢大家。我错过了一般参数设置。Incentive Compensation Administrator Configuration Workbench > Application Parameters > Go To Task > Setup General Parameters And Yes 之后我必须打开 vijay bhamidipati 提到的补偿期

# regex - 在查找中排除文件类型的正则表达式

> ID：13974716
> 
> 赞同：0
> 
> 时间：2012-12-20T14:49:50.573
> 
> 标签：regex, find

我很陌生，正则表达式对我来说一直很棘手。我希望有人可以快速为我纠正这个问题，甚至可以告诉我为什么这不是我认为应该这样做的（目标是排除某些类型的文件）：

```
find . -type f \( -name "*" ! -name "*\.(vm | jar | class | htm | html | jpg | gif)$" \) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:57:24.987

我不熟悉 find 命令语法，但是要匹配具有给定扩展名的文件，您需要：

```
".*\.(vm|jar|class|htm|html|jpg|gif)$" 
```

删除空格并在开头添加点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:58:15.640

看起来问题是关于 Unix shell 的......

无论如何，在我更了解的正则表达式方面，我认为您必须删除表达式中的空格：

```
"\.(vm|jar|class|html?|jpg|gif)$" 
```

我不保证您的命令本身的有效性...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:35:57.490

我很确定**find**默认会查找每个名称，因此这里不需要额外的“ **-name "*"** ”。

在正则表达式方面，您似乎已经找到了您正在寻找的答案，但您可能仍然想知道**find**有一个**OR**标志（-or 或 -o），当正则表达式导致您时，它可以使事情变得更容易烦恼：

```
find . -type f ! \( -name "*.vm" -o -name "*.jar" -o -name ".class" \) 
```

不利的一面是，显然要写更长的时间……

记得看一下[man find](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)。

祝你好运

# iphone - 如何从 Facebook 获取带有参数性别、用户喜欢、用户生日的好友列表，

> ID：13974729
> 
> 赞同：0
> 
> 时间：2012-12-20T14:50:11.200
> 
> 标签：iphone, ios, facebook

我已经尝试过本网站[https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/](https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)上的教程，但我无法让它工作 - 也许我犯了一个错误。

也许其他人有一些其他教程 - 一步一步或源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T01:13:14.747

工具栏隐藏了表格视图中的第一个条目存在错误。教程中的修复不是将工具栏添加到 tableview。在这种情况下，它被添加为 UITableView 部分标题视图。来吧，再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:58:13.803

尝试在这个 SO 问题中找到的解决方案：

[Facebook iOS SDK - 获取好友列表](https://stackoverflow.com/questions/6638955/facebook-ios-sdk-get-list-of-friends)

祝你好运！

# javascript - Raphael JS 翻转图像

> ID：13974730
> 
> 赞同：0
> 
> 时间：2012-12-20T14:50:12.413
> 
> 标签：javascript, raphael, transform

我有以下代码：

```
image1Rect.animate({
    transform: "S-0.025,1"
}, 1000, 'easeOut', function () {
    image1Rect.hide();
    image1Ref.show();
    image1Ref.scale(0.025, 1);
    image1Ref.animate({
        transform: "S1,1"
    }, 1000, 'easeOut');
}); 
```

我试图减少 to 的 X 比例，`image1Rect`然后`0.025`当完成后增加`image1Ref`from `0.025`to的比例`1`X。我正在尝试使用附加转换来做到这一点，但由于这对我不起作用，我不得不使用不推荐使用的函数 scale on`image1Ref`首先将其比例 X 减小到`0.025`.

理想情况下，我想使用附加的转换来做到这一点，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:10:41.473

它是由负整数引起的

```
transform: "S-0.025,1" 
```

负整数会导致图像在该轴上翻转。

使用变换：“S0.025,1”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T16:53:47.157

尝试使用矩阵作为变换的一部分：

```
var R = this.paper; 
```

*循环路径*

```
R.path(blah blah).attr(blah blah).transform("m1,0,0,-1,0,0"); 
```

*结束循环*

* * *

“m”代表矩阵，第4位“-1”代表图像翻转。那个地方的“1” - （y轴位置）将是一个正常的“路径”指示，查看。请记住，您将不再在屏幕上看到您的图像，因为它已在包含 div 的上方重绘。据我所知，它使用 div 的顶部边缘作为其枢轴。

顺便说一句，其他地方代表图像的某种形式的“倾斜”，如果您只想翻转它，这并不有趣。

要查看我的图像，我必须使用 viewBox 定位并放大它，如下所示：

```
R.setViewBox(0,-575,200,200); 
```

# javascript - 计算距离，包括 KmlLinestring 的高程/地形数据

> ID：13974733
> 
> 赞同：2
> 
> 时间：2012-12-20T14:50:23.927
> 
> 标签：javascript, computational-geometry, google-earth-plugin

Google 地球桌面应用程序同时显示一行`map length`和`ground length`一行。

在 Google 地球插件中，我想做类似的事情，即我希望在考虑地形的情况下确定`ground length`镶嵌的 。`KmlLineString`

我可以这样做吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T07:58:01.200

如果你使用[earth-api-utility-library](http://earth-api-utility-library.googlecode.com) ，你当然可以很容易地得到长度。使用它你可以做到。

```
var length = (new geo.Path(linestring)).distance(); 
```

当然，这种方法没有考虑地形 - 但在尝试使用高程梯度计算距离之前，您应该注意一些注意事项。

首先，在大多数情况下，地形距离和直接距离之间的差异很小。事实上，许多高质量的 GPS 接收器在计算距离时根本不考虑海拔的任何变化。

其次，地面高度是最不可靠的数据之一。使用基于高程的梯度来确定距离通常会比使用简单的“如乌鸦飞”测量产生*更大的距离测量不准确。*

牢记这一点，如果您仍然想这样做，那么一种方法将如下所示。

1.  在某些点（比如每 10 米）对线串进行采样。
2.  获取每个点的地面高度。
3.  将每个点转换为笛卡尔坐标
4.  依次计算每个笛卡尔点之间的角距离。

您可以通过两种方式提高这种方法的精度，一种是提高采样率（比如每米），另一种是对结果应用平滑程序。

对于更粗略的版本，您可以循环遍历`KmlLinestring` 本身的坐标，而不是在某个设定距离处重新采样。您将使用坐标的纬度、经度来获取每个点的地面高度。然后，您将根据这些数据（纬度、经度、海拔 => X、Y、Z）构建笛卡尔坐标，并计算出它与下一个点之间的角距离......等等。

类似以下想法的东西应该可以工作 - 尽管它是在这里写的并且未经测试！

```
var EARTH_RADIUS = 6378135; // approximate in meters 

var degreestoRadians = function(degrees) {
  return degrees * Math.PI / 180;
}

var arcLength = function(point1 , point2) {   
  var length = Math.sqrt(Math.pow(point1.X-point2.X, 2) 
               + Math.pow(point1.Y-point2.Y, 2) 
               + Math.pow(point1.Z-point2.Z, 2));
  var angle = 2 * Math.asin(length/2/EARTH_RADIUS);
  return EARTH_RADIUS * angle;
}

var sphericalToCartesian = function(latitude, longitude, altitude) {
  var phi = degreestoRadians(latitude);
  var theta = degreestoRadians(longitude);
  var rho = EARTH_RADIUS + altitude;
  return {
    X: Math.cos(phi) * Math.cos(theta) * rho,
    Y: Math.cos(phi) * Math.sin(theta) * rho,
    Z: Math.sin(phi) * rho
  }
}

var topographicDistance = function(linestring) {
  var coordinates = linestring.getCoordinates(); //KmlCoordArray
  var last = null;
  var distance = 0;
  for(var i = 0; i < coordinates.length; i++) {
     var coord = coordinates.get(i); //KmlCoord
     var lat = coord.getLatitude();
     var lng = coord.getLongitude();
     var alt  = ge.getGlobe().getGroundAltitude(lat, lng);
     var latest = sphericalToCartesian(lat, lng, alt);
     if(last != null) {
       distance += arcLength(last, latest);
     } 

     last = latest;
  }

  return distance;
} 
```

你会像这样使用它......

```
var distance = topographicDistance(yourLinestring); 
```

# java - 如何在 Java 中查询 XML

> ID：13974734
> 
> 赞同：2
> 
> 时间：2012-12-20T14:50:22.857
> 
> 标签：java, xml, jakarta-ee

在 .net 中，我会使用 LINQ to XML 来使用 linq 查询 xml 文档。Java EE中是否有类似的东西？

我有一个大型 xml 文件，其中包含我需要用于级联下拉列表的州、城市、城镇名称。所以我正在寻找检索这些数据的最佳方法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:52:55.197

您可以使用[XPath](http://www.w3.org/TR/xpath/)使用[javax.xml.xpath选择相关数据](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-summary.html)

这是一种更标准的方式，您将能够`XPath`在许多编程语言中使用相同的表达式（与 LINQ 不同）

[您也可以在此处](http://www.liquid-technologies.com/xpath-tutorial.aspx)看到 XPath 的一个很好的示例。

# c++ - 在某些像素openCV上绘制矩形

> ID：13974735
> 
> 赞同：0
> 
> 时间：2012-12-20T14:50:24.480
> 
> 标签：c++, opencv

我正在尝试定位框架的某些区域，该框架位于 Ycbcr 颜色空间中。我必须根据它们的 Y 值选择这些区域。

所以我写了这段代码：

```
Mat frame. ychannel;
VideoCapture cap(1);
int key =0;
int maxV , minV;
Point max, min;
while(key != 27){
     cap >> frame;
     cvtColor(frame,yframe,CV_RGB_YCrCb); // converting to YCbCr color space 
     extractChannel(yframe, yframe, 0); // extracting the Y channel 
     cv::minMaxLoc(yframe,&minV,&maxV,&min,&max);
     cv::threshold(outf,outf,(maxV-10),(maxV),CV_THRESH_TOZERO);
/**
Now I want to use :
cv::rectangle()
but I want to draw a rect around any pixel (see the picture bellow)that's higher than (maxV-10) 
and that during the streaming 
**/
     key = waitKey(1);
} 
```

我画了这幅画，它有助于理解我要做什么。

![在此处输入图像描述](../Images/d1716a09b2426ca4f69fd5a770452174.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:21:34.917

一旦你应用了你的阈值，你最终会得到一个包含多个 的二进制图像`connected components`，如果你想在每个组件周围绘制一个矩形，那么你首先需要检测这些组件。

OpenCV 函数[findContours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#findcontours)就是这样做的，将您的二进制图像传递给它，它将为您提供一个点向量的向量，这些点跟踪图像中每个组件的边界。

```
cv::Mat binaryImage;
std::vector<std::vector<cv::Point>> contours;

cv::findContours(binaryImage, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE) 
```

然后你需要做的就是找到每组点的[边界矩形并将它们绘制到你的输出图像上。](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#boundingrect)

```
for (int i=0; i<contours.size(); ++i)
{
    cv::Rect r = cv::boundingRect(contours.at(i));
    cv::rectangle(outputImage, r, CV_RGB(255,0,0));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:53:26.987

您必须找到每个[连接的组件](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=contours#cv.FindContours)，并绘制它们的边界框。

# hbase - HBASE - 针对行键选择不同的查询

> ID：13974736
> 
> 赞同：4
> 
> 时间：2012-12-20T14:50:26.290
> 
> 标签：hbase, arrow-keys

我有一个名为“users”的 hbase 表，rowkey 由三部分组成：

1.  用户身份
2.  消息ID
3.  时间戳

行键看起来像：`${userid}_${messageid}_${timestamp}`

鉴于我可以散列用户 ID 并使字段的长度固定，无论如何我可以执行 SQL 查询之类的查询：

```
select distinct(userid) from users 
```

如果 rowkey 不允许我这样查询，这是否意味着我需要创建一个仅包含所有用户 ID 的单独表？我想如果我做这样的事情，当我插入一条记录时它就不再是原子的了，因为我正在处理两个没有事务的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:09:39.730

您可以这样做，但作为 map/reduce 作业而不是直接查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:47:10.153

你可以使用 HashSet 来做到这一点。像这样的东西：

```
public Set<String> getDistinctCol(String tableName,String colFamilyName, String colName)
   {
    Set<String> set = new HashSet<String>();
    ResultScanner rs=null;
    Result r = null;
    String s = null;
    try 
    {
        HTable table = new HTable(conf, tableName);
        Scan scan = new Scan();
        scan.addColumn(Bytes.toBytes(colFamilyName),Bytes.toBytes(colName));
        rs = table.getScanner(scan);
        while((res=rs.next()) != null)
        {
            byte [] col = res.getValue(Bytes.toBytes(colFamilyName+":"+colName));                
            s = Bytes.toString(col);
            set.add(s);
        }
    } catch (IOException e) 
    {
        System.out.println("Exception occured in retrieving data");
    }
    finally
    {
        rs.close();
    }
    return set; 
```

*col 在您的情况下是用户 ID。

高温高压

# android - 来自列表视图行的Android多个AsyncTasks单击

> ID：13974739
> 
> 赞同：0
> 
> 时间：2012-12-20T14:50:41.250
> 
> 标签：android, android-asynctask

我在使用自定义适配器多次单击 ListView 时遇到问题。

我很好地捕捉到了 onClick 事件，问题是我需要在调用 web 服务的每一行点击上启动一个 AsyncTask。它是相同的 AsyncTask，只是参数不同。

如果用户快速单击多行，则仅触发最后一个 AsyncTask 并且仅更新该行。

处理 onClick() 的代码

```
myListView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
        {
            Item item = (Item) mylLstView.getAdapter().getItem(position);           

            //execute AsyncTask
        }
    }); 
```

我的异步任务

```
private class CheckItemInOrOutTask extends AsyncTask<Context, Void, Boolean>
{
    private int position;
    Item singleItem;

    public CheckItemInOrOutTask(int position, Item singleItem)
    {
        this.position = position;
        this.singleItem = singleItem;
    }

    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();           
    }

    @Override
    protected Boolean doInBackground(Context... params) 
    {
        try 
        {
            HttpClient client = HttpUtil.getHttpClient();
            String reqString = "Items?action=checkin";

            HttpPost post = HttpUtil.makePost(reqString);       

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("item_id", singleItem.getId()));

            nameValuePairs.add(new BasicNameValuePair("type_id", singleItem.getTypeId()));              

            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));               

            HttpResponse response = client.execute(post);
            int statusCode = response.getStatusLine().getStatusCode();

            if (statusCode == 200) 
            {           
                String result = HttpUtil.responseToString(response);    
                JSONObject jsonItem = new JSONObject(result);
                Item item = new Item(); 

                // parse json
                // set item properties          

                itemList.set(position,item);                    
            }               
        }
        catch (Exception e)
        {
            return false;
        }   

        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) 
    {
        super.onPostExecute(result);    

        //if (result) 
        {
            updateAdapter();                            
        }       
    }       
} 
```

有人可以解释一下吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:01:18.490

发现不是 AsyncTask 是罪魁祸首。这是因为我正在重用我的 HttpClient。

# jquery - 如何在 Chrome 中控制台记录一个 jQuery DOM 元素？

> ID：13974740
> 
> 赞同：16
> 
> 时间：2012-12-20T14:50:43.103
> 
> 标签：jquery, google-chrome, logging

我曾经能够做到`console.log(somejQueryObj);`，它会将对象中的所有 DOM 元素记录在一个数组中，我可以单击这些元素并转到检查器。

现在它做了这样的事情：

> [prevObject: p.fn.p.init[1], context: , 选择器: ".next ()"]

这会让[很多人](https://stackoverflow.com/q/13974644/561731)感到困惑。

如何使 Chrome 记录它用于记录 jQuery 元素的方式？

[这是一个小提琴示例](http://jsfiddle.net/maniator/MmrRr/)

* * *

我在：

> 谷歌浏览器 23.0.1271.97（官方版本 171054）m

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T15:18:34.080

**更新：**我制作了一个 jQuery 插件来恢复旧式日志记录：[jquery.chromelog](https://github.com/pimvdb/jquery.chromelog)。

* * *

您可以创建一个小函数来在一行上记录所有元素：

```
$.fn.log = function() {
  console.log.apply(console, this);
  return this;
}; 
```

用法：

```
$("...").log(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T15:00:03.703

要为每个元素执行此操作以便您可以将鼠标悬停在它上面，请尝试以下操作：

```
$("div").each(function(){console.log(this)})​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T14:53:25.170

```
console.log($(...)[0]); 
```

是另一种方式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T15:01:05.650

我找到了一个*解决方案*，可以在需要时单独记录它们（但如果它是 BIG 选择器，它可能会使日志混乱）：

[http://jsfiddle.net/maniator/ya7As/](http://jsfiddle.net/maniator/ya7As/)

```
var log = function($selector) {
    $selector.each(function() {
        console.log(this);
    });
};
log($('selector'))​; 
```

# javascript - 如何找到正确的 Json 对象

> ID：13974741
> 
> 赞同：2
> 
> 时间：2012-12-20T14:50:41.360
> 
> 标签：javascript, jquery, json

我是 Json 的新手，并试图加载 Json 对象的一部分。结构是：

```
{
  "Monday": {
    "title": "Magic Monday",
    "text": "On Magic Monday, all the food disappears.",
    "image": "images/special.jpg",
    "color": "red"
  },

  "Tuesday": {
    "title": "Twofer Tuesday",
    "text": "Two vegetables for the price of one!.",
    "image": "images/special.jpg",
    "color": "green"
  }
} 
```

我有一个变量 weekDay，我将使用它来查找正确的对象。找到后，我想在我的 HTML 中使用 title 和 text 的值。

到目前为止，我有代码：

```
$.getJSON('data/specials.json', function (data) {
  $.each(data, function (entryIndex, entry) {
    var html = '<h4>' + entry['title'] + '</h4>';
    html += '<p>' + entry['text'] + '</p>';
    $('#details').append(html);
  });
}); 
```

但我不知道，如何仅从具有正确工作日的对象中获取标题和文本。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:52:06.973

如果你有

```
var weekDay = "Tuesday"; 
```

那么你可以简单地使用

```
var entry = data[weekDay]; 
```

接着

```
var title = entry.title; 
```

或者

```
var title = entry['title']; 
```

[本文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)说明如何访问对象属性。

# javascript - ExtJS 名称未定义错误

> ID：13974743
> 
> 赞同：1
> 
> 时间：2012-12-20T14:50:47.367
> 
> 标签：javascript, extjs, extjs4

我有`TypeError: name is undefined`一个 ExtJS 应用程序。它发生在以下行：

```
win = Ext.create('Ext.window.Window',cfg); 
```

`cfg`一长串的属性在哪里。它只发生在某些情况下，我想知道是否有人对我如何追踪错误原因有任何想法`cfg`？也许使用 Firebug 或其他一些调试工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T15:01:45.210

如果`xtype`无法从`ClassManager`. 所以你应该检查你是否有错字`cfg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:45:44.137

当错误发生时，您应该能够查看调用堆栈，并使用 firebug 和 chrome 开发工具查看它在哪里失败......

# jquery - Kendo UI 自动完成数据源问题

> ID：13974751
> 
> 赞同：2
> 
> 时间：2012-12-20T14:51:19.633
> 
> 标签：jquery, json, autocomplete, kendo-ui

我有几个自动完成所有设置和使用定义为变量的相同数据源工作。但是我不确定如何让我的组自动完成工作，因为这有可能具有多个值。

这是我的数据源：

```
UsersDataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: "/_layouts/handlers/Users.ashx",
            dataType: "json",
            type: "get",
            cache: false
        }
    }
}); 
```

此 json 的示例如下所示（注意组）：

```
[{"Id":"USERNAME","Type":"External","Name":"Jim Jones","Email":"jjones@email.com","Address":"1600 Penn Ave","Organization":"Company ABC","Notes":"User Notes","Groups":["Group A","Group B","Group C","Group D"]}] 
```

我设置的所有其他自动完成功能都可以使用以下代码正常工作：

```
$("#SearchAddress").kendoAutoComplete({
    placeholder: "Address",
    dataTextField: "Address",
    dataValueField: "Address",
    dataSource: UsersDataSource
}); 
```

我不太确定如何让这些团队工作......任何建议都将不胜感激。

**编辑：我创建了一个[jsfiddle](http://jsfiddle.net/nlarkin/mjD5H/)来说明这个问题**

**编辑：小提琴再次更新**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:11:00.717

您应该指定第二个自动完成绑定到数组的`Groups`字段：`peoples`

```
$("#SearchGroup").kendoAutoComplete({
    placeholder: "Group",
    dataSource: {
        data: peoples[0].Groups,
    }
}); 
```

[http://jsfiddle.net/pSMtt/4/](http://jsfiddle.net/pSMtt/4/) ​</p>

以下是获取所有组的方法：

```
var groups = [];

for (var i = 0; i < peoples.length; i++) {
    for (var j = 0; j < peoples[i].Groups.length; j++) {
       groups.push(peoples[i].Groups[j]);
    }
}

$("#SearchGroup").kendoAutoComplete({
    placeholder: "Group",
    dataSource: {
        data: groups,
    }
}); 
```

# ruby-on-rails - 添加自定义参数以作为 json 传递

> ID：13974754
> 
> 赞同：1
> 
> 时间：2012-12-20T14:51:27.317
> 
> 标签：ruby-on-rails, json, titanium, parameter-passing, titanium-mobile

我正在使用 post 方法将参数发送到我的 rails 服务器，使用钛中的此代码-

```
if (email.value != '' && password.value != '')
{
    loginReq.open("POST","http://192.168.0.187:3000/users/sign_in");
    var params = {
        email: email.value,
        password: password.value
    };
    loginReq.send(params);
} 
```

在 Rails 服务器端，我在控制台上得到这个输出 -

```
Parameters: {"password"=>"[FILTERED]", "email"=>"abcdefgh@gmail.com"} 
```

但我需要这样的输出 -

```
Parameters: {"user"=>{"email"=>"abcdefgh@gmail.com", "password"=>
FILTERED]"}, "commit"=>"Sign in"} 
```

如何添加`user`参数如上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:54:22.740

我不一定看到其中的价值，但你可以改变这个：

```
var params = {
    email: email.value,
    password: password.value
}; 
```

对此：

```
var params = {
    user: {
        email: email.value,
        password: password.value
    },
    commit: "Sign In"
}; 
```

这会给你你正在寻找的输出。

# java - 不同 RDBMS 上的 NamedParameterJDBCTemplate 和函数语法

> ID：13974757
> 
> 赞同：2
> 
> 时间：2012-12-20T14:51:41.343
> 
> 标签：java, sql-server, spring, jdbc

我需要同时支持 Oracle 和 SQL Server。我在两个数据库中都命名`get_current_date`了完全相同的程序。现在我有一个查询：

```
SELECT col1, col2 FROM table WHERE colDate < get_current_date() 
```

这在 Oracle 中运行良好，但`dbo.`在 SQL Server 中执行时缺少前缀。

Spring应该能够处理吗？我还有什么其他选择？我认为没有必要自己确定数据库类型。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:19:04.200

[每个 JDBC 驱动程序都应该支持 JDBC 函数转义（在第 13.4.1 节中定义并在JDBC 4.1 规范](http://download.oracle.com/otndocs/jcp/jdbc-4_1-mrel-spec/index.html)的附录 D 中列出）。对于`CURRENT_DATE`它是`CURRENT_DATE`或`CURRENT_DATE()`。

您可以在查询中将其称为

```
SELECT col1, col2 FROM table WHERE colDate < {fn CURRENT_DATE} 
```

您可以查询特定驱动程序支持的功能列表[`DatabaseMetaData.getTimeDateFunctions()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getTimeDateFunctions%28%29)

顺便说一句：这假设您只需要数据库的当前日期。这不是在查询中调用用户定义函数的通用解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:54:08.717

> Spring应该能够处理吗？

-->`get_current_date()`是数据库方法/过程（可能是数据库或您的自定义），因此它依赖于数据库，Spring 不会处理这个问题。

> 我还有什么其他选择？

--> 好吧，您可以将当前日期放在代码中的查询中，这样它将独立于您使用的数据库。就像是 ：

```
String sql = "SELECT col1, col2 FROM table WHERE colDate < " + new Date(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:05:48.853

如何在 java 中获取当前日期，例如：

```
Calendar cal = Calendar.getInstance();
currentDate = cal.getTime();

and then you do:

SELECT col1, col2 FROM table WHERE colDate < currentDate 
```

# c++ - 函数式编程中纯函数的缺点

> ID：13974760
> 
> 赞同：4
> 
> 时间：2012-12-20T14:51:46.880
> 
> 标签：c++, haskell, functional-programming, imperative-programming

函数式编程中的纯函数是没有副作用的函数。其含义之一是它不能改变输入参数的值。这可以被视为内存利用率的劣势吗？
例如，假设我有一个函数，它只接受一个列表并在其中添加另一个元素。在 C++ 中，它可能很简单

```
 void addElem(std::vector& vec, int a)
{
    vec.insert(a);
} 

```

这个函数显然不会使用比传递对象已经占用的更多内存。
但是在 Haskell 中也会出现这样的情况。

```
addElem :: [Int] -> Int -> [Int]
addElem xs a = xs ++ [a]

```

现在在这个计算中，因为 xs 没有改变它的值。所以我是否正确地说，有时该函数将消耗 xs 的内存双倍大小，一个用于 xs，另一个用于返回值。或者以某种方式延迟调用确保实际上 xs 仅通过在最后添加一个元素来返回？
我知道 Monad 是一种可以产生副作用的方法。但是 Monad 可以用来简单地修改输入并返回它的值吗？
也可以将 xs ++ [a] 更改为 a:xs 消耗更少的内存吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T15:00:51.090

纯度意味着函数不能进行破坏性更新，所以如果

```
xs ++ [a] 
```

已全面评估，`xs`必须制作一份副本。如果延迟生成并且没有在其他任何地方引用，则可能会在恒定空间中发生这种情况`xs`，因此可以在创建时对其进行垃圾收集。或者它可能需要一个副本`xs`- 但纯度允许两个列表的单元格指向相同的数据，因此不需要复制数据，只需复制脊椎（由最终的缺点修改）。但如果制作了副本，旧值`xs`仍然可用。

> 也可以将 xs ++ [a] 更改为 a:xs 消耗更少的内存吗？

是的，可以简单地重用`xs`，只需要创建一个新的列表单元格并让它的尾指针指向`xs`。

来自评论：

> 我不希望 C++ 函数是纯的。我希望它改变输入的状态。这就是我想成为问题的重点。

在这种情况下，您需要一个*不纯*的函数/动作。这对于某些数据结构是可能实现的，但对于列表，必须重新复制/构造单元。但是向 a 添加元素`std::vector<T>`也可能需要重新分配。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T14:59:36.673

是的，纯 FP 可能比命令式编程更占用内存，但这取决于您编写程序的方式以及编译器的智能程度。Haskell 编译器尤其具有非常强大的优化器，并且可能能够将纯 FP 代码转换为可重用分配内存的非常高效的机器代码。但是，这需要编写好的 FP 代码，因为即使是最聪明的编译器也不会包含优化来处理那些只模拟具有表面相似 FP 结构的命令式程序的程序。

请注意，您的 C++ 示例无效。如果你的意思是

```
v[0] = a;  // assuming v.size() > 0 
```

那么这不会做任何分配。如果你的意思是

```
v.append(a); 
```

那么这可能会或可能不会分配，具体取决于`v`.

> 或者以某种方式延迟调用确保实际上 xs 仅通过在最后添加一个元素来返回？

取决于表达式在其上下文中的实现和使用。当`xs ++ [a]`被完全评估时，它会复制整个列表`xs`。如果它被部分评估，它可能会在 none 和`len(xs)`.

> 也可以将 xs ++ [a] 更改为 a:xs 消耗更少的内存吗？

是的，这将其从 O(n) 最坏情况更改为 O(1) 最坏情况分配/额外内存使用。时间复杂度也是如此。在 Haskell 中处理列表时，永远不要追加到末尾。如果这是您需要的，请使用[差异列表](http://www.haskell.org/haskellwiki/Difference_list)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T15:45:14.430

我认为您的两个示例之间的相关区别在于数据结构的选择，而不是纯粹与不纯的问题本身。

您可以在这两种方法中使用单链表，也可以在两种方法中使用具有恒定时间更新的数组。在纯粹的情况下，对数据结构的更新可能会在*语义上*进行复制，但这并不一定意味着它会在*物理*上这样做。

例如，绳索是不可变数组的一种变体，它允许恒定时间连接。您还可以通过在内部使用写时复制方案来获得具有恒定时间功能更新的不可变数组抽象（其中 a.set(i, x) 语义上返回副本），该方案仅在您实际访问时才执行物理副本创建新版本后的*旧*版本（即，如果您利用纯数据结构的持久性能力，这在不纯的情况下不可用）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T15:08:13.550

> 现在在这个计算中，因为 xs 没有改变它的值。所以我是否正确地说，有时该函数将消耗 xs 的内存双倍大小，一个用于 xs，另一个用于返回值。

不必要。拥有不可变数据的优点是可以共享。所以编译器可以在这种情况下通过共享 xs 来优化。所以大小将与 c++ 的情况相同。

> 或者以某种方式延迟调用确保实际上 xs 仅通过在最后添加一个元素来返回？

懒惰只是意味着在实际需要该值时进行评估，它并不能保证更少的内存使用。另一方面，由于懒惰而创建的 thunk 可能会使用更多内存。

> 我知道 Monad 是一种可以产生副作用的方法。但是 Monad 可以用来简单地修改输入并返回它的值吗？

你说对了一部分。Monad 用于编写具有副作用的代码。您可以很好地使用可变向量并编写与 IO monad 中的 c++ 示例非常相似的代码。

> 也可以将 xs ++ [a] 更改为 a:xs 消耗更少的内存吗？

这取决于编译器，但我认为它会复制整个列表并在最后添加元素。（我不是这方面的专家）。

您始终可以分析您的代码并检查内存消耗，这是学习这一点的最佳方式。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-20T15:01:03.767

[**ab·stract·tion [ab-strak-shuh n]**](http://dictionary.reference.com/browse/abstraction?s=t)

> 除了具体的现实、特定的对象或实际实例之外，将某物视为一般品质或特征的行为。

[**权衡**](http://www.merriam-webster.com/dictionary/tradeoff)

> 平衡所有无法同时实现的因素

[**泄漏抽象**](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)

> 在某种程度上，所有重要的抽象都是泄漏的。

函数式编程可以被视为一种抽象，并且由于所有抽象都泄漏，因此需要做出一些权衡。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T15:03:25.813

不同的语言有不同的常用习语，实现者努力使这些习语尽可能有效。我*不会*假设因为某些东西在 C++ 中需要额外的开销，所以在另一种语言中也是如此，就像我不会假设另一种语言中最有效的习语在 C++ 中最有效一样。

话虽如此：我目前正在开发一个我们经常返回的大型高性能应用程序，`std::vector`我们还没有发现这是一个问题。像 NRVO 和移动语义这样的东西最终意味着这在 C++ 中也可以非常有效。

# jquery - 无法从 JSON 提要呈现事件

> ID：13974766
> 
> 赞同：2
> 
> 时间：2012-12-20T14:52:09.063
> 
> 标签：jquery, fullcalendar

更新：

非常感谢您的回复，我现在有这个代码：

```
 success: function (data) {

      $.each(data, function (id, event)

      var test = data.approved
      if (test == "1") {
          alert('approved')
      }

      );
  } 
```

这是我的 JSON 示例：

{"id":"174","title":"John Smith","start":"2013-04-03 00:00:00","end":"2013-04-05 00:00:00 ","fullname":"John Smith","approved":"1"}, {"id":"175","title":"John Smith","start":"2012-12-25 00: 00:00","end":"2012-12-27 00:00:00","fullname":"John Smith","approved":"0"}, {"id":"176","标题":"约翰·史密斯","开始":"2012-12-28 00:00:00","结束":"2012-12-28 00:00:00","全名":"约翰·史密斯" ,"批准":"1"}, {"id":"177","title":"John Smith","start":"2012-12-29 00:00:00","end":"2012-12-29 00:00:00","fullname":"John Smith","approved":"0"}, {"id ":"178","title":"John Smith","start":"2012-12-21 00:00:00","end":"2012-12-22 00:00:00","全名":"约翰·史密斯","批准":"1"}

如果事件已在 JSON 中获得批准，您能否告知我如何获得批准的警报？

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:07:06.000

您应该能够像这样访问数据 -

```
success: function(data) {    
    var event = data.approved;
    if(event == "1") {
        // do stuff 
    }
} 
```

这是应该工作的代码 -

```
success: function(data) {
    $.each(data, function() {
        $.each(this, function(k, v) {
            if((k == 'approved') && (v == '1')) {
                alert('approved!')
            } 
        });
    });
} 
```

看看这个[来自 AJAX Success 的 JSON 结果的 jQuery 循环？](https://stackoverflow.com/questions/733314/jquery-loop-over-json-result-from-ajax-success)

# django - 安装 Pinax，我的部署文件夹在哪里？

> ID：13974771
> 
> 赞同：2
> 
> 时间：2012-12-20T14:52:31.403
> 
> 标签：django, deployment, pinax

我正在尝试设置 Pinax，但我对所涉及的所有内容（Django、Pinax、网络服务器等）都很陌生。我正在关注[http://pinax.readthedocs.org/en/latest/gettingstarted.html](http://pinax.readthedocs.org/en/latest/gettingstarted.html)

当我使用以下方法生成项目时：

```
(mysite-env)$ pinax-admin setup_project -b basic mysite 
```

我得到的目录结构是：

```
apps      __init__.py   manage.py     settings.pyc  urls.py
dev.db    __init__.pyc  requirements  static        urls.pyc
fixtures  locale        settings.py   templates     wsgi.py 
```

据我所知，缺少**部署**文件夹（当您与此处显示的目录结构进行比较时：http: [//pinax.readthedocs.org/en/latest/starterprojects.html](http://pinax.readthedocs.org/en/latest/starterprojects.html)）。它似乎还没有影响任何东西，但它让我感到紧张。发生了什么事，我缺少部署文件夹的事实是否会在未来引起问题？

我正在运行 Ubuntu 并使用 python 2.7。我对 Windows 7、python 2.6 有同样的行为

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:09:17.520

新的 Django 版本使旧的 pinax 几乎毫无用处。现在 Django 支持项目模板，Pinax 被分成几个较小的项目，涉及启动项目（例如[pinax-project-account](https://github.com/pinax/pinax-project-account)）和应用程序（例如[django-user-account](https://github.com/pinax/django-user-accounts)）。

当前使用 pinax 的方法是选择一个启动项目，然后运行类似：

`$ django-admin.py startproject --template=https://github.com/pinax/pinax-project-account/zipball/master <project_name>`

然后安装要求：

`$ pip install -r requirements.txt`

这将使用 starter-project 作为模板创建一个新的 Django 项目，其中已经包含一些应用程序（如 django-user-account）和模板（带有引导程序！）。该项目已准备好运行，并且已经包含一系列功能（如用户注册、登录和管理）。

此外，Django 已经稍微改变了项目目录结构，所以现在看起来不再是那样了。

# php - 倒计时 php jquery post ajax

> ID：13974779
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:53:01.097
> 
> 标签：php, jquery, mysql

我正在设计一个网站，里面有一个小游戏。每个参与的用户有 99 分钟的时间来完成它，否则我们会显示游戏结束状态。到目前为止，这是我使用 jQuery post 所做的。

我已经能够显示计时器。在 PHP 中，我已将目标时间设置为`99*60`秒，但我无法将开始时间设置为 0，因为我将在这些值与倒计时值之间做出差异。

此外，由于每个用户都可以退出页面，因此我希望能够存储他们离开的时间。我所能做的就是在他们注销时将倒计时值（比如 5845）存储在数据库中。尽管我尝试在每次调用 jQuery 帖子时更新表格，但这只会让情况变得更糟。

这是我的 jQuery：

```
function countdown() {
  var i = (new Date().getTime() / 1000) + (99 * 60);

  setTimeout(function () {
    $.post(\'countdown.php\',{target:i},function(data){
      $('#countdown').html(data);
    });
    countdown();
  },1000);
}

countdown(); 
```

这是PHP：

```
if (!empty($resm['Countdown']) || $resm['Countdown'] >= 0) {
  $target = (99 * 60);
  $countdown = ($target - $current);
  $_SESSION['currenttime'] = $countdown;
  $hours = floor($countdown / 3600);
  $min = floor($countdown / 60);
  $r_min = floor(($countdown - ($hours * 3600)) / 60);
  $sec = floor($countdown - ($min * 60));
  if ($min == 0) {
    echo $target.'   '.$current.'  '.$countdown;
    echo '<br/>'.$min.' minutes '.$sec.' seconds left';
  } else {
    echo 'Time Over';
    $sql = "UPDATE bs10000099 SET Upgradedlevel='2',Activated='2',Countdown='5940' WHERE        MemberID='$memberid'";
    mysql_query($sql);
  }
} 
```

我不知道如何设置开始时间或如何防止`countdown()`在刷新页面上重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:40:28.823

我不确定您想要什么样的安全性，但是从 Javascript 获取时间并不是真正安全的，因为 JS 从计算机而不是服务器获取时间。

以您的示例为例，我可以玩游戏，等到还剩 10 分钟，然后在我的桌面上回滚时间，它就会重置。或者回滚一年，还剩 100000 分钟！

我建议你使用服务器时间。

这是我要做的：

测试开始时，获取 UNIX 时间 + 90 分钟。这会给你最后的时间。

**PHP**

```
 if (!isset($_SESSION['end'])) {
        $_SESSION['end'] = strtotime("+90 minutes");
    }

    $remaining = $_SESSION['end'] - time();

    if ($remaining > 0) {
        echo json_encode(array(
            "remaining" => $remaining
        ));
    } else {
        // finished! write code here. 
    } 
```

然后，您可以执行一个简单的 $.getJSON() 来获取剩余的秒数并显示它。

由于您保留了“结束”时间，因此即使用户离开，计时器也会继续。

# jquery - jquery tabslideout 插件并想检测 div 何时滑入和滑出

> ID：13974780
> 
> 赞同：4
> 
> 时间：2012-12-20T14:53:05.680
> 
> 标签：jquery, tabslideout

我正在使用 jquery tabslideout 插件。它很好，但我想检测 tabslideout 插件何时滑入和滑出。如果我能检测到，那么我可以调用另一个例程。我不知道如何在 tabslideout div 滑入和滑出时进行捕捉。所以请指导我。谢谢

这是我的代码

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
<script src="http://tab-slide-out.googlecode.com/files/jquery.tabSlideOut.v1.3.js"></script>

<script type="text/javascript">
$(function(){
$('.slide-out-div').tabSlideOut({
    tabHandle: '.handle',                     //class of the element that will become your tab
    pathToTabImage: 'images/contact_tab.gif', //path to the image for the tab //Optionally can be set using css
    imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
    imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
    tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
    speed: 300,                               //speed of animation
    action: 'click',                          //options: 'click' or 'hover', action to trigger animation
    topPos: '200px',                          //position from the top/ use if tabLocation is left or right
    leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
    fixedPosition: false                      //options: true makes it stick(fixed position) on scroll
});

});

</script>

<style type="text/css">
.slide-out-div {
  padding: 20px;
  width: 250px;
  background: #ccc;
  border: 1px solid #29216d;
 }      
 </style>

 <div class="slide-out-div">
    <a class="handle" href="http://link-for-non-js-users.html">Content</a>
    <h3>Contact me</h3>
    <p>Thanks for checking out my jQuery plugin, I hope you find this useful.
    </p>
    <p>This can be a form to submit feedback, or contact info</p>
 </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T15:58:16.783

该插件无法通知您它已经发生，但是我已经修改了插件以允许您这样做。

我对插件的更改是添加了一个回调函数（您可以在选项中提供一个）以在动画完成后运行。

这是一个[例子](http://jsfiddle.net/EKsFE/3/)

唯一的改变是提供一个在滑入或滑出时调用的函数。像这样

```
$(function(){
        $('.slide-out-div').tabSlideOut({
            tabHandle: '.handle',                     //class of the element that will become your tab
            pathToTabImage: 'http://wpaoli.building58.com/wp-content/uploads/2009/09/contact_tab.gif', //path to the image for the tab //Optionally can be set using css
            imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
            imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
            tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
            speed: 300,                               //speed of animation
            action: 'click',                          //options: 'click' or 'hover', action to trigger animation
            topPos: '200px',                          //position from the top/ use if tabLocation is left or right
            leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
            fixedPosition: false,                      //options: true makes it stick(fixed position) on scroll
            onSlideOut: function() {
                alert('Opened');
            },
            onSlideIn: function() {
                alert('Closed');
            }
        });

    }); 
```

请注意，您将需要使用我在 JsFiddle 上修改的版本。

*希望这可以帮助*

**更新**

Op 要求提供有关我对插件所做更改的更多信息。

首先，我添加了两个新属性到默认设置，它们是空函数。

```
onSlideOut: function() {},
onSlideIn:  function() {} 
```

然后我将该值放入代码中 animate 方法的回调中。

```
//Square Bracket for emphasis only
obj.animate({top:'-' + properties.containerHeight}, settings.speed,[settings.onSlideIn]).removeClass('open'); 
obj.animate({top:'-3px'},  settings.speed,[settings.onSlideOut]).addClass('open'); 
```

然后，用户可以提供他们自己的方法实现来覆盖默认值。

如果您需要更多的钩子来处理代码，那么您可以考虑查看触发和侦听自定义事件来代替使用回调。

# html - UTF-8 编码仅适用于 index.html？

> ID：13974781
> 
> 赞同：1
> 
> 时间：2012-12-20T14:53:08.023
> 
> 标签：html, unicode, utf-8, character-encoding

我在这里有一个奇怪的问题，我无法弄清楚。我有两个页面：`index.html`和`index2.html`. `utf-8`字符编码在中可以正常工作，但`index.html`在`index2.html`. 例如以下段落：

> 前 Fleet Foxes 鼓手 Josh Tillman 独立出击（在加入 Foxes 之前，他已经是一名歌手/词曲作者），并在专业上将自己重新命名为“John Misty 神父”。</p>

约翰·米斯蒂神父周围的引语完美显示，`index.html`但显示为带有问号的菱形`index2.html`。两个页面都有这个元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我什至可以将完全相同的源代码复制并粘贴`index.html`到`index2.html`其中，但它仍然无法正常工作。我需要将某些内容放入 .htaccess 文件中吗？我已经检查了两个 .html 文件的权限是否相同。我不知道还有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:58:24.030

如果结果显示*Unicode*替换字符 �，这意味着正在读取文档的任何内容都试图将其解释为 Unicode（通常是 UTF-8），但遇到了在该编码中无效的字节序列。

换句话说：浏览器正在尝试做正确的事情，文档实际上不是 UTF-8 编码的。检查编辑器中的设置。

# c# - PInvoke，带有指针到指针参数的函数调用

> ID：13974790
> 
> 赞同：-1
> 
> 时间：2012-12-20T14:53:43.927
> 
> 标签：c#, pointers, struct, pinvoke

我在这里创建一个新问题，因为我现在知道如何提出这个问题，但我仍然是 PInvoke 的新手。

我有一个 C API，其中包含以下结构：

```
 typedef union pu
    {
        struct  dpos   d;
        struct  epo    e;
        struct  bpos   b;
        struct  spos   c;
     } PosT ;

    typedef struct dpos
    {
        int     id;                       
        char    id2[6];      
        int     num;
        char    code[10];
        char    type[3];
     } DPosT ; 
```

以及以下 API 函数：

```
 int addPos(..., PosT ***posArray,...) 
```

我在 C 中这样称呼它的方式：

```
 int main(int argc, const char *argv[])
    {
        ...
        PosT  **posArray = NULL;
        ...

        ret_sts = addPos(..., &posArray, ...);
        ...
    } 
```

addPos() 内部的内存将被分配给 posArray 并且它也将被填充。使用 calloc 的分配是这样的：

```
 int addPos(..., PosT ***posArray, ...)
    {
         PosT **ptr;
         ...
         *posArray = (PosT **) calloc(size, sizeof(PosT *));
         *ptr = (PosT *)calloc(...);
         ...
         (*posArray)[(*cntr)++] = *ptr;
         ...

         /* Population */
         ...
      } 
```

我有另一个函数将被调用以释放该内存。

现在我想在 C# 中做同样的事情，

我在我的 C# 类中创建了这个：

```
 [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
    public struct DPositionT
    {
       public int Id;

       [MarshalAs(UnmanagedType.LPStr, SizeConst = Constants.Id2Len)]
       public string Id2;

       public int Num;

       [MarshalAs(UnmanagedType.LPStr, SizeConst = Constants.CodeLen)]
       public string Code;

       [MarshalAs(UnmanagedType.LPStr, SizeConst = Constants.TypeLen)]
       public string type;
    }

    [System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Explicit )]
    struct PosT
    {
        [System.Runtime.InteropServices.FieldOffset(0)]
        DPosT d;
    }; 
```

我只定义了 d，因为我只打算在我的客户端代码中使用这个联合成员。

现在为了调用 addPos() 我应该如何创建和传递 posArray ？

非常感激你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:52:43.843

需要注意的真正重要的事情之一是，来自 PostT*** 的第三个 * 只是为了提供将分配的指针返回给调用者的可能性。这意味着实际上类型是 PostT** 并且在 C# 参数中必须声明为`ref`或`out`修饰符。

您提供的片段不完整，但说明了一些事情：

```
 *posArray = (PosT **) calloc(size, sizeof(PosT *)); // A

     *ptr = (PosT *)calloc(...);   // B1
     ...
     (*posArray)[(*cntr)++] = *ptr;  // B2 
```

在 (A) 一个数组中，创建了 PosT*，然后在 (B1)+(B2)中，该数组的**一些**单元被初始化为**一些**未公开大小的新数组。请注意，对于您的代码片段，第一个“一些”和第二个“一些”可能不相关。

此外，这些数组的大小是未知的，除了可能来自参数的最上面的“大小”。

这意味着从 C# 的角度来看，您想要实际接收的数据结构是“PosT[][]”，因此 P/Invoke 签名将如下所示：

```
[...]
... addPos(..., out PosT[][] posArray, ....) 
```

因此，即使在 C# 中，它也是由参数返回的二维锯齿状数组，就像在 C/C++ 中一样。

但是，与 C 中可以有指向非特定数据块的松散指针不同，在 C# 中，**每个数组都必须具有精确已知的长度**。由于您可能知道“大小”，因此您可以告诉编组器第一个维度的大小是多少。

如果外部“大小”是一个常数：

```
[...]
... addPos(..., [MarshalAs(SizeConst=100)]out PosT[][] posArray, ....) 
```

或者，如果它通过参数传递：

```
[...]
... addPos(int size, ...., [MarshalAs(SizeParamIndex=0)]out PosT[][] posArray, ....) 
```

当然假设“大小”确实是第一个参数。

但是，所有这些**都没有**指定内部数组的大小。更重要的是，使用您提供的代码片段，这些内部数组**的长度可能会有所不同**。让我玩一下您提供的代码片段：

```
 *posArray = (PosT **) calloc(size, sizeof(PosT *)); // A

     (*cntr) = 0

     for(int idx = 0; idx<size; ++idx)
     {
         *ptr = (PosT *)calloc(5+40*(*cntr));   // B1

         (*posArray)[(*cntr)++] = *ptr;  // B2
     } 
```

更糟糕的是，您的代码段甚至没有显示内部数组是否唯一，因此您的代码段也允许这样做：

```
 *posArray = (PosT **) calloc(size, sizeof(PosT *)); // A

     (*cntr) = 0

     *ptr = (PosT *)calloc(5);   // B1
     *ptr2 = (PosT *)calloc(25);

     for(int idx = 0; idx<size / 2; ++idx)
     {
         (*posArray)[(*cntr)++] = *ptr;  // B2
         (*posArray)[(*cntr)++] = *ptr2;
     } 
```

请注意，这里我只分配了 2 个内部数组，并且我将外部数组的所有单元格设置为指向这两个内部数组之一 - 外部数组可能有 500 个单元格，但只有 2 个内部单元格。这也是完全正确的数据结构，并且可以使用您的代码段。

在这两种情况下，都没有很好的方式告诉 .Net Marshaller 这种数据结构的布局。您必须将外部数组作为指针数组获取：

```
[...]
... addPos(int size, ...., [MarshalAs(SizeParamIndex=0)]out IntPtr[] posArray, ....) 
```

您可以将其想象为将 (PosT**) 转换为 (void*) ，然后在程序中的某个位置，您必须手动将这些不同的 IntPtrs 解压缩为适当长度的 PosT[]。当然，您实际上必须以某种方式猜测正确的长度。

以下是如何从 IntPtr 读取结构数组：[Getting Array of struct from IntPtr](https://stackoverflow.com/questions/6747112/getting-array-of-struct-from-intptr)

编辑：

啊，我完全忘记了，当然，在 C# 方面，你可以将参数作为原始指针获取，所以`out PosT[][] posarray`你不能只是`PosT*** posarray`- 但是这个**需要**你在签名中添加“不安全”修饰符C# 端的“addPos”函数。这里有一些关于 unsafe 修饰符的入门：

[http://www.codeproject.com/Articles/1453/Getting-unsafe-with-pointers-in-C](http://www.codeproject.com/Articles/1453/Getting-unsafe-with-pointers-in-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:31:14.240

**[更新]** 好的，我这里已经有了一些进展，

我无法让它工作，当我传递它时， `out IntPtr[]` 就像从非托管代码返回时一样，它会引发异常。但是我遇到了这个[链接](https://stackoverflow.com/questions/2402978/get-an-array-of-structures-from-native-dll-to-c-sharp-application)，所以我尝试使用它来传递它 `out IntPtr` ，这似乎有效。至少现在我找回了指针。我现在需要开始着手编组这一切，以便从中得到我需要的东西。

# visual-c++ - OLE Word 自动化中的搜索和替换 - 如何覆盖页眉和页脚？

> ID：13974792
> 
> 赞同：10
> 
> 时间：2012-12-20T14:53:52.530
> 
> 标签：visual-c++, com, mfc, ole, office-automation

我有一个完美的工作功能来查找和替换 word 文档中的文本变量。

```
HRESULT CMSWord::FindReplace( CString szVar, CString szText, bool bOnlyOnce/*=false*/ )
{
    if(m_pWApp==NULL || m_pActiveDocument==NULL) return E_FAIL;
    IDispatch *pDocApp;
    {  
        VARIANT result;
        VariantInit(&result);
        OLEMethod(DISPATCH_PROPERTYGET, &result, m_pActiveDocument, L"Application", 0);
        pDocApp= result.pdispVal;
    }
    IDispatch *pSelection;
    {
        VARIANT result;
        VariantInit(&result);
        OLEMethod(DISPATCH_PROPERTYGET, &result, pDocApp, L"Selection", 0);
        pSelection=result.pdispVal;
    }
    IDispatch *pFind;
    {
        VARIANT result;
        VariantInit(&result);
        OLEMethod(DISPATCH_PROPERTYGET, &result, pSelection, L"Find", 0);
        pFind=result.pdispVal;
    }
    OLEMethod(DISPATCH_METHOD, NULL, pFind, L"ClearFormatting",0);

    szText.Replace(_T("\r\n"), _T("\v")); 
    COleVariant sVariable(szVar);
    COleVariant sReplaceText(szText);
    COleVariant replace((long)2);
    COleVariant varBoolTrue;
    varBoolTrue.boolVal = true;
    COleVariant varBoolFalse;
    varBoolFalse.boolVal = false;
    COleVariant wdContinue((long)1);
    bool bFound=false;
    IDispatch *pExecute = NULL;
    {
        for(;;) {
            VARIANT result;
            VariantInit(&result);

            if(OLEMethod(DISPATCH_METHOD, &result, pFind, L"Execute", 8, wdContinue, varBoolTrue, varBoolFalse, varBoolFalse, varBoolFalse, varBoolTrue, varBoolFalse, sVariable)==S_OK) {
                pExecute=result.pdispVal;
                if(!pExecute) break;
                bFound = true;
                if(szText.IsEmpty()) DeleteChar(false);         else SetSelectionText(szText);
            }
            else break;
            if(bOnlyOnce) break;
        }
    }
    pDocApp->Release();
    pSelection->Release();
    pFind->Release();
    if(!bFound) return E_FAIL;
    else return S_OK;
} 
```

问题是，这段代码不会触及页眉或页脚中的任何文本。

也许 pFind 执行方法有一个参数？

老实说，我从星期一开始就一直在研究这个问题。我的搜索结果最多的是VB、C#、.NET和VBA文档，但是关于VC++ OLE的文档很少，几行代码，但没什么帮助。我什至开始创建和翻译一些 Word 宏，但没有任何效果。

在 Stack Overflow 上，我发现了许多与此主题相关的问题。其中一些看起来很有希望，但似乎他们正在使用一些我不知道的框架，如果我要求提供示例代码或链接，人们没有任何回应。

如果有人能帮我解决这个问题，那就太好了，我非常感谢有关 OLE Word 自动化一般主题的文档和代码的链接（除了这个 codeproject 文章）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T20:34:35.190

这是一个在标题中搜索和替换的 Delphi 函数。我知道这是一个 C++ 问题，但您可以从函数中看到您需要做什么。

我总是发现在工作中做某事的最简单方法是使用 MacroRecorder 并查看 word 是如何做到的，然后从您的应用程序中调用该代码。

我很遗憾你用 C++ 进行 COM 编程

```
Procedure Find_ReplaceText(find, ReplaceWith: String; Header : Boolean = false);
var
    tmpText: String;
    spos , epos : Integer;
begin
    {Start on first page.}
    fWordApp.Selection.Goto(wdGoToPage,wdGotoFirst);
    {Extra code is needed if I'm trying to replace text in the header}
    if Header then
    begin
        fWordApp.ActiveWindow.ActivePane.View.SeekView := wdSeekCurrentPageHeader;

        If fWordApp.Selection.HeaderFooter.IsHeader = False Then
        begin
            fWordApp.ActiveWindow.ActivePane.View.SeekView := wdSeekCurrentPageHeader;
        end;

        tmpText := fWordApp.ActiveDocument.sections.item(1).Headers.item(wdHeaderFooterPrimary).Range.text;
        spos := pos('[' ,tmptext);
        epos := pos(']' , tmpText);

        tmptext := copy(tmptext,1, spos);
        tmptext := tmptext + ReplaceWith + ']';
        fWordApp.ActiveDocument.sections.item(1).Headers.item(wdHeaderFooterPrimary).Range.text := tmptext;
        fWordApp.ActiveWindow.ActivePane.View.SeekView := wdSeekMainDocument;
    end
    else
    begin
        fWordApp.Selection.Find.Text := find;
        fWordApp.Selection.Find.Execute;
        fWordApp.Selection.typeText(' ');
        fWordApp.Selection.InsertAfter(ReplaceWith);
    end;

end; 
```

# eclipse - 有关 PDE 编程的一般问题

> ID：13974793
> 
> 赞同：0
> 
> 时间：2012-12-20T14:53:53.560
> 
> 标签：eclipse, eclipse-pde

这里有两个简短但希望是好的问题：

1.  何时使用插件以及何时使用片段？

2.  什么是无头 PDE 构建以及何时使用（以及何时不使用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:39:14.627

片段用于您想要扩展或更改插件的功能时。片段不能单独存在，它需要一个父插件。片段的典型示例是本地化插件，即将字符串更改为其他语言。然后片段将改变插件的功能，用片段的内容替换资源或代码。

[更多细节在这里](http://wiki.eclipse.org/FAQ_What_is_a_plug-in_fragment?) [教程在这里](http://www.vogella.com/articles/EclipseFragmentProject/article.html)

无头部分意味着您在没有 gui 的情况下进行构建，即通过命令行或 jenkins/hudson 等工具进行构建。PDE 代表插件开发环境。总之就是给Ant增加了一些任务，你可以使用plugin.xml中定义的资源和依赖来构建。另一种方法是在 Ant 构建文件中再次定义类路径、源等。

我在一些项目中使用过它，并且很难正确设置，但它是构建 Eclipse 插件或产品的最佳方式。我们想使用相对路径进行构建，但遇到了重大问题。在您的项目中越早设置连续的无头 PDE 构建，它就越容易配置。

[更多信息在这里](http://owenou.com/2010/09/19/how-to-set-up-and-run-pde-build.html)

# lex - 即使有合适的标志，Flex 也不会删除 yyunput

> ID：13974796
> 
> 赞同：2
> 
> 时间：2012-12-20T14:54:04.083
> 
> 标签：lex, flex-lexer

我正在用

```
%option nounput 
```

选项和使用命令行

```
flex --nounput 
```

和 flex 版本 2.5.35。

但是，cpp 输出仍然包含该行

```
#define unput(c) yyunput( c, (yytext_ptr)  ) 
```

这会导致 g++ 出现编译问题，因为未使用 unput。

有没有办法以“干净”的方式解决这个问题？两种肮脏的方式是显而易见的：

1.  以某种无用的方式使用 unput。
2.  使用一些脚本从生成的 cpp 文件中自动删除该行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-22T19:47:24.393

（我试图将此问题标记为“问题不再可重现”，但该标志已超时/老化。[我正在回答它，以免它仍然是一个悬而未决的问题。](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

正如@akond 所述：

> 我没有遇到这个问题。我使用的版本是相同的（flex 2.5.35）。`%option nounput`对我有用。

我也在 2.5.4 版本上试过这个，可以确认没有问题。该选项`--nounput`不再被认可或[记录](http://westes.github.io/flex/manual/Index-of-Scanner-Options.html)；但是，`%option nounput` [手册中的内容仍然存在](http://westes.github.io/flex/manual/Scanner-Options.html)。

cpp 输出仍然包含该行`#define unput(c) yyunput( c, yytext_ptr )`，但这似乎不会对我产生任何 g++ 错误。您是否正在使用`-pedantic-errors`或其他类似的选项？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-22T16:45:32.957

好的程序，但严重过时的文档。

我发现版本 2.6.4 接受名词输入选项并且做正确的事。

# php - PHP：Zend_Soap_Server 缺少命名空间

> ID：13974802
> 
> 赞同：0
> 
> 时间：2012-12-20T14:54:21.290
> 
> 标签：php, zend-framework, soap

我的 WSDL 中有以下定义

```
<wsdl:types>
    <xs:schema targetNamespace="http://tryme.limes2.dev/interface/interface/schemas/types" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:l2="http://tryme.local.dev/interface/interface/schemas/types">
        <xs:element name="AuthDataResponse">
            <xs:annotation>
                <xs:documentation>The response for authorization requests.</xs:documentation>
            </xs:annotation>
            <xs:complexType>
                <xs:all>
                    <xs:element ref="l2:SuccessResponse" minOccurs="1" maxOccurs="1">
                        <xs:annotation>
                            <xs:documentation>Success result.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="token" type="xs:string" minOccurs="1" maxOccurs="1">
                        <xs:annotation>
                            <xs:documentation>The token required for all actions.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                </xs:all>
            </xs:complexType>
        </xs:element>
        <xs:element name="SuccessResponse">
            <xs:complexType>
                <xs:all>
                    <xs:element name="message" type="xs:string" minOccurs="1" maxOccurs="1">
                        <xs:annotation>
                            <xs:documentation>The message returned by the server.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="success" type="xs:boolean" minOccurs="1" maxOccurs="1">
                        <xs:annotation>
                            <xs:documentation>Success result.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                </xs:all>
            </xs:complexType>
        </xs:element>
... 
```

（WSDL 由 IBM Enterprise Architect 生成）

Zend_Soap_Server 在 WSDL 模式下运行并接受输入。我编写了一个小的 PHP 函数，它应该需要一个 AuthDataRequest 并返回一个 AuthDataResponse 对象，带有一个令牌（字符串）和 SuccessResponse 对象。

我从服务器得到的响应是：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tryme.local.dev/interface/interface/schemas/types">
   <SOAP-ENV:Body>
      <ns1:AuthDataResponse>
         <SuccessResponse>
            <message/>
            <success>true</success>
         </SuccessResponse>
         <token>xVzSFnC5LmqJ4sNG</token>
      </ns1:AuthDataResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

哪个失败了 SoapUIs Schema Compliance 测试，因为它给出了*SuccessResponse*而不是*ns1:SuccessResponse*。这里到底出了什么问题？您需要任何其他信息吗？

亲切的问候， tim3trick

# package - 为自托管源下载 NuGet 包

> ID：13974809
> 
> 赞同：4
> 
> 时间：2012-12-20T14:54:44.610
> 
> 标签：package, feed, nuget

NuGet 网站上有一篇很棒的文章，用于托管您自己的 NuGet 源。在我们的案例中，我们是一家 IT 商店，需要在将软件包提供给我们的开发人员之前对其进行全面审查，因此我们希望托管我们自己的提要，以提供“已批准的软件包”。文章忽略的一件事是如何拉下用于托管的 nuget 包。因此，例如，如果我们想要托管 EntityFramework 5.0.0，以便我们的开发人员可以使用它，我们如何在不使用 NuGet 的情况下获取包，因为策略会阻止 NuGet 通过防火墙访问主机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:28:25.077

假设您没有完全脱离 nuget.org，您可以使用[ProGet](http://inedo.com/proget/download)来托管您的网络提要。由于 ProGet 允许您创建多个提要并连接到其他 NuGet 提要，因此您可以创建一个提要，例如“NuGet Cached”，然后是“开发人员”提要，并为两个提要指定相同的包存储位置。诀窍是在“NuGet Cached”提要上设置到 nuget.org 的连接器，然后使用“拉取包”功能将托管的 NuGet 包下载到本地提要。

这样，开发人员将设置 Visual Studio（或他们用来获取包的任何工具）以指向“开发人员”提要，该提要仅包含您明确下拉的包（因为两个提要都将包存储在同一位置）。您还可以向“NuGet Cached”提要添加拒绝权限，这样他们就根本无法连接到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:31:06.927

您可能可以尝试[http://www.myget.org](http://www.myget.org)或使用任何其他软件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:00:11.923

1.  创建一个主机服务器（听起来像你有，但如果不是，它正在安装和托管[NuGet.Service](http://nuget.org/packages/NuGet.Server)）。
2.  通过访问主机确认它正在工作（应该看到一个非常简单的仪表板，上面写着 Nuget 服务号等）
3.  打开 VisualStudio 选项，“包管理器”->“包源”
4.  在此处添加您的内部主机（可能类似于`http://internalsvr/nuget`）

然后，您应该能够从本地源安装软件包。此外，您可以将东西推送到那里，或者将包放在`~/packages/`目录中，它们将自动在服务中列出。

# c++ - 如何正确使用 boost async_write 和 boost const_buffers 向量？

> ID：13974811
> 
> 赞同：7
> 
> 时间：2012-12-20T14:54:59.117
> 
> 标签：c++, vector, boost-asio

我无法在这里正确地制作这条线：

```
boost::asio::async_write(serialPort, 
                         boost::asio::buffer(
                         boost::asio::buffer_cast<const void*>(vector_.front()),
                         boost::asio::buffer_size(vector_.front()))) 
```

`vector_`拥有多个`boost::asio::const_buffers`

```
std::vector<boost::asio::const_buffer> vector_; 
```

这些东西有效，但我很确定有一种更优雅的方法可以做到这一点，如果没有，我想从有更多经验的人那里得到。

那么，这个解决方案可以改进吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:05:51.723

我想你正在寻找这个：

```
boost::asio::async_write(serialPort, make_buffer(vector_.front()) ); 
```

其中`make_buffer`定义为：

```
template<typename TBuffer>
boost::asio::buffer make_buffer(TBuffer & data)
{
   auto buf = boost::asio::buffer_cast<const void*>(data);
   auto size= boost::asio::buffer_size(data);
   return boost::asio::buffer(buf, size);
} 
```

顺便说一句，这是一个通用功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T18:05:52.677

优雅的方法是将缓冲区直接传递给`boost::asio::buffer`. 它的一个[重载](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/buffer/overload3.html)采用 single`boost::asio::const_buffer`并返回一个可以在 中使用的类型[`boost::asio::async_write`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_write.html)，因为它符合 [`ConstBufferSequence`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/ConstBufferSequence.html)概念的要求。

```
boost::asio::async_write(serialPort, boost::asio::buffer(vector_.front())); 
```

作为一般规则，应用程序永远不需要使用[`boost::asio::buffer_cast`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/buffer_cast.html).

# php - PECL/Memcache 和 PECL/Memcached

> ID：13974818
> 
> 赞同：2
> 
> 时间：2012-12-20T14:55:18.667
> 
> 标签：php, mysql, memcached, pecl

我在我的 PHP 设置中安装了两个 PECL，当我这样做时，`php -V`我可以看到它们都在运行。在我的`/etc/php5/conf.d/`文件夹中，这两个 PECL 都已启用。当我检查`phpinfo`时，我才知道`PECL/Memcache`它被使用了，因为它有分配的端口号`11211`。两种 PECL 在文件中都有自己的配置，`.ini`但只使用了一个。我知道我们不能同时使用两个，但我想一次测试两个 PECL。我的问题是如何在不删除任何人的情况下测试这些 PECL，只需更改设置。我想在决定使用什么之前测试 Memcache 并禁用它并测试 Memcached。有什么方法可以在不删除的情况下完成它？

目前我正在使用[PhpMemcachedAdmin](http://code.google.com/p/phpmemcacheadmin/)来检查 Memcached，它仍处于测试阶段和错误状态。如果有人可以向我推荐其他更好的工具，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T01:32:10.770

您可以同时激活两个扩展。两者都是连接到 Memcached**服务器**`PECL Memcache`的`PECL Memcached`PHP**客户端**。

 **关于利弊

如前所述，Memcached 建立在由 memcached 服务器团队维护的[libmemcached之上。](http://libmemcached.org/libMemcached.html)人们说它更好，但我无法验证这一点。

PECL memcache 仍然具有更好的 PHP 会话支持。

[我在这里](http://code.google.com/p/memcached/wiki/PHPClientComparison)找到了（有点旧，但大部分仍然有效）比较表

**编辑**

PHP 正在使用任一扩展连接到 Memcached 服务器。以下是一些使用示例

***PHP中的PECL Memcached使用示例***

[PECL Memcached 类参考](http://php.net/manual/de/class.memcached.php)

```
// create PECL memcached Object
$m = new Memcached();

// add a server, connection is established lazily as far as I know
$m->addServer( 'localhost', 11211 );

// set values, those are written into your server's memory using the memcached server
$m->set( 'integer', 1 );
$m->set( 'intIncrement', 1 );
$m->set( 'intDecrement', 1 );
$m->set( 'string', 'I am a string' );
$m->set( 'array', array( 'a', 'b', 'c' ) );

// increment
$m->increment( 'intIncrement' );

// decrement
$m->decrement( 'intDecrement' );

// get values again
var_dump ( $m->get( 'integer' ) );
var_dump ( $m->get( 'intIncrement' ) );
var_dump ( $m->get( 'intDecrement' ) );
var_dump ( $m->get( 'string' ) );
var_dump ( $m->get( 'array' ) );

// delete values
$m->delete( 'integer' );
$m->delete( 'intIncrement' );
$m->delete( 'intDecrement' );
$m->delete( 'string' );
$m->delete( 'array' );

// close connection
$m->close(); 
```

***PHP中的PECL Memcache使用示例***

[PECL Memcache 类参考](http://php.net/manual/en/class.memcache.php)

这可以在同一个 PHP 脚本中！

```
// create PECL memcache object
$m = new Memcache;

// connect to the memcached server
$m->connect('localhost', 11211);

// set values
$m->set( 'integer', 1 );
$m->set( 'intIncrement', 1 );
$m->set( 'intDecrement', 1 );
$m->set( 'string', 'I am a string' );
$m->set( 'array', array( 'a', 'b', 'c' ) );

// increment
$m->increment( 'intIncrement' );

// decrement
$m->decrement( 'intDecrement' );

// get values again
var_dump ( $m->get( 'integer' ) );
var_dump ( $m->get( 'intIncrement' ) );
var_dump ( $m->get( 'intDecrement' ) );
var_dump ( $m->get( 'string' ) );
var_dump ( $m->get( 'array' ) );

// delete values
$m->delete( 'integer' );
$m->delete( 'intIncrement' );
$m->delete( 'intDecrement' );
$m->delete( 'string' );
$m->delete( 'array' );

// close connection
$m->close(); 
```

您还可以将对象存储到 memcached 中，查看这篇关于[对象序列化](http://php.net/manual/en/language.oop5.serialization.php)和[魔术类方法](http://php.net/manual/en/language.oop5.magic.php) `__sleep`的文章以及`__wakeup()`PHP

如您所见，PECL Memcached 和 Memcache 这两个客户端的基本用法非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T23:42:34.767

没有任何特定的方法可以做到这一点。我必须删除其中一个配置的符号链接才能使用其他配置。而不是删除整个`.ini`文件，只删除符号链接听起来是可行的选择，因为删除符号链接`pecl`变得不活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T01:09:00.830

我一定错过了“不能同时使用两者”的部分。谁给你这个主意的？它们是两个独立的扩展，具有不同的功能/对象。

跳过上述内容，memcached 使用起来要好得多，因为它实现了比 memcache 扩展更多的功能（cas 是我最近使用并想到的其中之一）。

第二件事：持久连接？为什么要这么做？Memcache 可以支持很多连接，它就是为此而构建的。不需要持久连接。我们在同一个 memcached 服务器上的点击次数超过 2k，在生产应用程序中没有问题。

PS：“当我检查 phpinfo 时，我才知道 PECL/Memcache 被使用，因为它具有分配的端口号 11211”是错误的。没有与扩展关联的端口。php 扩展本身并不是一个守护进程/服务（尽管您绝对可以在 php 中构建一个）。实际上，11211 更有可能是 memcache 服务器的默认端口，而不是实际端口。**

# java - 使用 Hibernates SQLQuery 在日期范围之间搜索文档

> ID：13974824
> 
> 赞同：1
> 
> 时间：2012-12-20T14:55:48.847
> 
> 标签：java, sql, date, timezone, timestamp

我有一个包含剪辑列表的数据库。每个剪辑都有一个 startTime 和一个 endTime，两个时间戳都带有时区。我想要做的是获取时间范围内的所有剪辑（开始 - 结束）。我的 java 程序中有两个 Date 类型的对象，我从 hibernate 创建了一个 SQL 查询：

```
select * from clips where (start_time IN(?,?) or end_time IN(?,?)) and clips.mediaid=? order by clips.id ASC 
```

我使用 SQLQuery 的 setDate(int arg0, Date arg1) 方法设置了 Date 参数，但是当我执行时，我只在日期范围（ start - end ）至少相差一整天时才得到结果。就好像结果 sql 查询完全忽略了时差，只比较日期（年、月、日）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:02:15.793

我认为应该是

```
(start_time >= ? and end_time <= ?) 
```

# c# - 通过 COM 从 C++ 解决方案调试 C# dll

> ID：13974829
> 
> 赞同：7
> 
> 时间：2012-12-20T14:56:04.190
> 
> 标签：c#, c++, visual-studio-2010, com, .net-2.0

我有一个 C++ 解决方案。启动项目是一个exe。在解决方案中，有许多为 COM 互操作注册的 C# dll（针对 .NET Framework 2.0）。当我在 C# 代码中放置一个断点时，我得到空心红色断点`"No native symbols in symbol file"`

我尝试`Project Property Pages -> Debugging -> Debugger Type`在调用 COM 方法的启动项目上设置为 Mixed。

我已经检查过了`Debug -> Windows -> Modules`。它已加载我的 dll，符号状态为`"No native symbols in symbol file"`.

这不是世界末日，因为如果我这样做了`Debug -> Start Without Debugging`，那么`Debug -> Attach to Process`，就改变`Attach To:`了`Managed (v2.0, v1.1, v1.0) code, Native code`。然后我在 C++ 代码和 C# 代码中都设置了断点。

所以我有我的解决方法，但我认为我是否可以通过附加到进程来做到这一点 - 我应该能够通过调试来做到这一点。

我怎样才能通过做来击中我的 C# 断点`Debug -> Start Debugging`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T18:36:21.047

通过执行以下操作，我能够从 VS2008 中的 C++ 项目中调试我的 C# dll：

在 C++ 项目的属性中，转到配置属性 -> 调试。将“调试器类型”设置为混合。“附加”应设置为否。

在您的 C# 项目属性中，在“调试”选项卡中，将“启动外部程序”设置为 C++ 项目的可执行文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-14T14:57:07.327

我知道它有点旧，但我找到了解决这个问题的实用方法。

我在使用使用 C# COM-Object 的 C++ 应用程序时遇到了同样的问题。我在 C++ 和 C# 端尝试了 Visual Studio 中的几个设置。在我尝试手动启动调试器之前没有任何帮助。

您可以使用

```
Debugger.Launch(); 
```

在 C# DLL 上手动启动调试器。我知道这不是最好的，而是一种实用的方法。在以后的生产环境中，您必须删除调试器启动功能:)。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:40:25.233

我不确定这是否会有所帮助，但我们经常使用 C# 和 C++。我发现这可以通过将 C++ 项目和 C# 项目放在同一个解决方案中并在 C# 项目中启用“本机调试”来实现。然后我能够在调试时在它们之间来回跳转。

# javascript - 无法在 Chrome 中的 TinyMCE 版本 > 3.4.5 中编辑文本框内容

> ID：13974830
> 
> 赞同：1
> 
> 时间：2012-12-20T14:56:07.820
> 
> 标签：javascript, google-chrome, tinymce

在 TinyMCE 版本 3.4.6 及更高版本中，我无法编辑 TinyMCE 中的文本。但在 TinyMCE 3.4.5 及更低版本中，这是完美的。有什么改变？如何在最新版本的 TinyMCE 中编辑它们？

在 Firefox 和 Opera 中一切正常！

**例子：**

3.4.5： http: [//fiddle.tinymce.com/f4caab](http://fiddle.tinymce.com/f4caab)

3.4.6： http: [//fiddle.tinymce.com/e4caab](http://fiddle.tinymce.com/e4caab)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:26:36.923

此提交中出现错误：[https ://github.com/tinymce/tinymce/commit/e26e02920b07e3195cf4873bf95796e87d769177](https://github.com/tinymce/tinymce/commit/e26e02920b07e3195cf4873bf95796e87d769177)

我已经在错误跟踪器上留下了评论。等待解决方案：[http ://www.tinymce.com/develop/bugtracker_view.php?id=5657](http://www.tinymce.com/develop/bugtracker_view.php?id=5657)

# ruby - 已知版本的 ruby - rvm list known

> ID：13974831
> 
> 赞同：0
> 
> 时间：2012-12-20T14:56:17.333
> 
> 标签：ruby, rvm

> **可能重复：**
> [删除 ruby​​ 版本](https://stackoverflow.com/questions/13974479/deleting-versions-of-ruby)

我正在尝试卸载单个版本的 ruby​​。此列表中的第二个：

```
which -a ruby
/Users/snowcrash/.rvm/rubies/ruby-1.9.2-p318/bin/ruby
/Users/snowcrash/.rvm/bin/ruby 
```

但是，当我运行时：

```
rvm remove 
```

我得到：

```
Really? remove all? See "rvm list known" and limit the selection to something more sane please :) 
```

所以，运行：

```
rvm list known 
```

显示完整的版本列表。但是，这些都不是我要删除的，即 /Users/snowcrash/.rvm/bin/ruby

例如

```
# MRI Rubies
[ruby-]1.8.6[-p420]
[ruby-]1.8.7[-p358]
[ruby-]1.8.7-head
[ruby-]1.9.1[-p431]
[ruby-]1.9.2-p180
[ruby-]1.9.2-p290
[ruby-]1.9.2[-p318]
[ruby-]1.9.2-head
[ruby-]1.9.3-preview1
[ruby-]1.9.3-rc1
[ruby-]1.9.3-p0
[ruby-]1.9.3[-p125]
[ruby-]1.9.3-head
ruby-head

# GoRuby
goruby

# TheCodeShop - MRI experimental patches
tcs

# JRuby
jruby-1.2.0
jruby-1.3.1
jruby-1.4.0
jruby-1.6.5
jruby-1.6.5.1
jruby-1.6.6
jruby[-1.6.7]
jruby-head

# Rubinius
rbx-1.0.1
rbx-1.1.1
rbx-1.2.3
rbx-1.2.4
rbx[-head]
rbx-2.0.testing

# Ruby Enterprise Edition
ree-1.8.6
ree[-1.8.7][-2012.02]

# Kiji
kiji

# MagLev
maglev[-head]
maglev-1.0.0

# Mac OS X Snow Leopard Or Newer
macruby[-0.10]
macruby-nightly
macruby-head

# IronRuby -- Not implemented yet.
ironruby-0.9.3
ironruby-1.0-rc2
ironruby-head 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:15:53.503

你缺乏 rvm 的知识：

```
$ rvm list
...
=* ruby-1.9.3-p327 [ x86_64 ]
...

$ rvm alias list
default => ruby-1.9.3-p327 
```

现在可以删除列表中的内容：

```
$ rvm remove 1.9.3 
```

什么是别名必须作为别名删除：

```
$ rvm alias delete default 
```

所有这些信息都可以在 rvm 网站上找到 => [https://rvm.io](https://rvm.io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:05:32.807

啊哈 - 想通了：

```
rvm uninstall all 
```

有趣的是，这会删除除我要删除的版本**之外的所有版本！**

```
which -a ruby
/Users/snowcrash/.rvm/bin/ruby 
```

# php - 使用 mysqli 调用方法连接到数据库

> ID：13974835
> 
> 赞同：1
> 
> 时间：2012-12-20T14:56:19.247
> 
> 标签：php, mysql, mysqli

嗨，我正在尝试在我的 PHP 脚本中从 MySQL 迁移到 MySQLi，我有这个系统类，它具有连接到我需要时调用的数据库的函数，使用如下简单方法：

```
Sys::database_connect(); 
```

该函数的实际代码是：

```
function database_connect(){
    require 'conf.php';//configuration file with database variables (sql_)
    mysql_connect($sql_serv, $sql_user, $sql_pw) OR die('ERRO!!! não ligou a base de dados');
    mysql_select_db($sql_bd);
} 
```

调用该函数后，我可以毫无问题地查询数据库。

但是如果我把它放在 sys 类中，我不能对 mysqli 做同样的事情：

```
function database_connect(){
    require 'conf.php';

    $mysqli = new mysqli($sql_serv, $sql_user, $sql_pw, $sql_bd);
        if (mysqli_connect_errno()) {
        printf("Ligação à Base de dados falhou: %s\n", mysqli_connect_error());
        exit();
    }
} 
```

当我调用 Sys::database_connect();

它连接到数据库，但我无法查询我是否习惯了我想要的简单方法，就像我对普通 MySQL 所做的那样，如果有人能解释我做错了什么或者为什么我不能那样做...

先感谢您; 费尔南多·安德拉德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:02:06.513

您以后的查询必须使用连接到数据库时创建的 mysqli 连接标识符。所以把它保存到你的系统类的一个属性中，以后再使用它。

```
function database_connect(){
    require 'conf.php';

    $mysqli = new mysqli($sql_serv, $sql_user, $sql_pw, $sql_bd);
    if (mysqli_connect_errno()) {
        printf("Ligação à Base de dados falhou: %s\n", mysqli_connect_error());
        exit();
    }

    Sys::$dbConn = $mysqli;
} 
```

然后稍后

```
function query( $sql ) {
    Sys::$dbConn->query( $sql );
    // error handling etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:03:49.900

我为 mysqli 数据库类写了一个扩展

```
class database extends mysqli {
    function __construct() {
        parent::__construct('host', 'user', 'password', 'database');
        if(mysqli_connect_error()) {
            die('Connect error ('.mysqli_connect_errno().')'.mysqli_connect_error());
        }
        parent::query("SET NAMES 'utf8'");
}

function query($query) {
        $result = parent::query($query);
        if(!$result) {
            echo "<strong>MySQL error</strong>: ".$this->error."<br />QUERY: ".$query;
            die();
        }
        if(!is_object($result)) {
            $result = new mysqli_result($this);
        }
        return $result;
    }
} 
```

所以连接数据库是 $db = new database() 执行查询是 $db->query(YOUR QUERY);

# android - 在 Android 中使用 FFmpeg 时出现 Android NDK 错误？

> ID：13974839
> 
> 赞同：0
> 
> 时间：2012-12-20T14:56:38.227
> 
> 标签：android, android-ndk, ffmpeg

嗨，我正在使用 FFmpeg 库。我使用了来自[appunite](https://github.com/appunite/AndroidFFmpeg)的代码。我在 Eclipse 中同时导入了 FFmpegLibrary 和 FFmpegExample。

但是，当我尝试使用 Android NDK 和 Cygwin 生成 .so 文件时，我收到以下错误消息。

```
Android NDK: ERROR:jni/yuv2rgb/Android.mk:ffmpeg-prebuilt: LOCAL_SRC_FILES points to a missing file
Android NDK: Check that jni/ffmpeg-build/armeabi/libffmpeg.so exists  or that its path is correct
/cygdrive/D/AndroidNDK/android-ndk-r8c/build/core/prebuilt-library.mk:43: *** Android NDK: Aborting    .  Stop. 
```

如果有人成功使用了这个库。请指导我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:00:27.570

基本上问题出在 ffmpeg lib。我无法在 Windows 7 上编译 ffmpeg lib。我切换到 Ubuntu 并尝试[了 AppUnite](https://github.com/appunite/AndroidFFmpeg)，在花了这么多小时后它正在工作。

# asp.net-mvc - 使用 FluentValidation 根据类型更改验证

> ID：13974843
> 
> 赞同：3
> 
> 时间：2012-12-20T14:57:03.720
> 
> 标签：asp.net-mvc, asp.net-mvc-3, nopcommerce, fluentvalidation

我有一个像这样的简单模型：

```
[Validator(typeof(EntryModelValidator))]
public class EntryModel : BaseNopEntityModel
{
  public virtual string ProductActionValue { get; set; }
} 
```

我正在使用 FluentValidation 来验证模型的保存。问题是当用户在表单上保存值时，在某些情况下 ProductActionValue 需要保存为 int（它当然总是保存为字符串，但它需要可解析为 int）。

我有以下验证规则，可确保值不为空：

```
 RuleFor(x => x.ProductCriteriaValue)
            .NotEmpty()
            .WithMessage(localizationService.GetResource("Common.FieldRequired")); 
```

我尝试添加以下规则以验证为 int：

```
 RuleFor(x => Int32.Parse(x.ProductCriteriaValue))
            .GreaterThanOrEqualTo(1)
            .When(x => (ProductCriteriaTypes)x.ProductCriteriaTypeId == ProductCriteriaTypes.ProductCreatedGreaterThanXDays || (ProductCriteriaTypes)x.ProductCriteriaTypeId == ProductCriteriaTypes.ProductCreatedLessThanXDays)
            .WithMessage(localizationService.GetResource("Common.FieldRequired")); 
```

但这只会引发 FluentValidation 运行时错误。有没有办法做到这一点？

提前感谢艾尔

更新以反映 AHMAD 的解决方案：

```
 {
        RuleFor(x => x.ProductCriteriaValue)
            .Must(BeANumber)
            .WithMessage(localizationService.GetResource("Common.FieldRequired"));
   }

    private bool BeANumber(string value)
    {
        int result;
        if (Int32.TryParse(value, out result))
        {
            return result >= 1;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:08:33.120

您可以使用[谓词验证器（又名 Must）](http://fluentvalidation.codeplex.com/wikipage?title=Validators&referringTitle=Documentation&ANCHOR#Predicate)：

```
RuleFor(x => x.ProductCriteriaValue)
    .Must(x => Int32.Parse(x.ProductCriteriaValue) >= 1)
    .When(x => (ProductCriteriaTypes)x.ProductCriteriaTypeId == ProductCriteriaTypes.ProductCreatedGreaterThanXDays || (ProductCriteriaTypes)x.ProductCriteriaTypeId == ProductCriteriaTypes.ProductCreatedLessThanXDays)
    .WithMessage(localizationService.GetResource("Common.FieldRequired")); 
```

当然，这是假设解析不会失败。将`ProductCriteriaValue`永远是一个数字并解析好？如果是这样，这没关系。否则，您可能希望通过使用`Int32.TryParse`和更改谓词来更好地检查这一点，如下所示：

```
 .Must(x =>
    {
        int result;
        if (Int32.TryParse(x.ProductCriteriaValue, out result))
        {
            return result >= 1;
        }
        return false;
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:56:21.567

[我在这里](https://stackoverflow.com/a/13970791/1882637)回答了一个类似的问题，它对同一视图模型使用单独的验证器类。此外，请注意，您可以使用 2 个验证器类的基类来包含通用规则，以避免重复验证规则。

# c++ - Qt 程序编译失败/存在运行时错误（IDE：CodeBlocks/QtCreator）

> ID：13974845
> 
> 赞同：1
> 
> 时间：2012-12-20T14:57:05.767
> 
> 标签：c++, qt, codeblocks

我是 Qt 的新手。虽然我已经安装了 4.8.3 很长时间，但我昨天开始编写我的第一个 Qt 程序。我在 windows 环境下，并为我的 C++ 代码使用 CodeBlocks。

我按照 Qt 编程这本书，并尝试重现书中的示例。第二章出现了问题，当时需要单独编译。我从来没有用 CodeBlocks 成功地单独编译过，这次也不例外：我仍然收到“对 XXX 的未知引用”。

我试图在网上找到所有指令，但我仍然无法解决它（设置 qmake、链接等）特别是当我使用 qmake 并将 makefile 标记为自定义文件时，每当我编译我的程序时，CodeBlocks 告诉我该项目还没有建成；当我单击“是”构建程序时，弹出相同的“尚未构建”通知，并重复该过程。

我曾经怀疑我的 Qt 出了问题，所以我将其删除并安装了最新的（即 Qt5.0）。但我无法使用它，因为 CodeBlocks 只支持 Qt4，而我的编译器不支持 Qt5。

所以我尝试下载“旧的”，4.8.4。后来发现连单文件程序都编译不出来（我是说整个项目只有一个.cpp文件，没有自定义头文件）。我尝试了默认的 CodeBlock qt 程序，它是这样的：

```
 #include <QApplication>
    #include <QFont>
    #include <QPushButton>

    int main(int argc, char* argv[])
    {
        QApplication app(argc, argv);
        QPushButton quit("Quit");
        quit.resize(75, 30);
        quit.setFont(QFont("Times", 18, QFont::Bold));
        QObject::connect(&quit, SIGNAL(clicked()), &app, SLOT(quit()));
        quit.show();
        return app.exec();
    } 
```

只是一个非常标准的。它应该可以编译，并且可以编译，但情况更糟：程序永远无法运行，因为它在执行后立即发生运行时错误（错误代码：0xC0000005 或 -1073741819）这是我的问题 1：我没有线索，有什么可以我怎么解决问题？我不介意删除我的 CodeBlocks 和 Qt 并在它们工作时重新安装，但我已经尝试过了，但没有用。

我的第二个问题：（解决了）然后我尝试使用Qt Creator。当我编译上面显示的简单程序时，我收到很多关键字“unwind_resume”的错误 - 谁能告诉我如何解决它？（网上评论建议运行qtvar.bat，但没有帮助；有人建议构建调试库，我尝试过但由于内存不足而意外停止？）

我的第三个问题：（发现它相当多余，因为它在上面讨论过，所以我删除了它）

（我应该首先感谢真正阅读我的帖子的人。我不得不说，虽然提供的信息可能不足以找到解决方案，但我所知道的就是这些。）

更新 - 更多信息：实际上我对 CodeBlocks 也有类似的未定义参考。但是我很懒，所以我只是将所有 .dll 文件从 qt 文件夹复制到 SysWOW64；昨天程序确实编译并运行了，但是在我今天重新安装 qt 和 codeblocks 后程序因运行时错误而崩溃，即使我也复制了新的 .dll 文件。说清楚点：如果我将 .dll 文件复制到 SysWOW64，Codeblocks 可以编译程序，但现在程序崩溃了，不像昨天程序运行正常。）

更新 - 现在问题是运行时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:02:34.120

好的，让我们在这里回顾一下，并停止在评论后连接评论。

对于您的第一个问题，我们清除了任何先前编译的构建文件夹，只留下所需的文件，即：`.cpp`文件、`.h/hpp`文件和`.pro`文件（以及您可能需要的任何资源文件，本示例并非如此）。

*然后从终端/cmd手动*编译你可以构建项目：

```
qmake.exe -project <PATH_TO_NEEDED_FILES>
qmake
make 
```

现在，关于运行时错误的第二个问题和`Entry Point Not Found`......好吧，我一无所知。谷歌了一下，我发现`Entry Point`错误的最常见原因`Qt`是链接到旧版本的 dll：

[入口点错误 1](http://qt-project.org/forums/viewthread/17171)

[入口点错误 2](http://www.qtcentre.org/threads/15810-Procedure-entry-point-not-located)

[入口点错误 3](http://www.qtforum.org/article/20931/entry-point-not-found.html)

在第二个链接中，通过将 Qt 路径设置为 Windows 中的第一个路径来解决问题`PATH`。也许这有帮助。

希望有经验的朋友帮忙！！

# php - PHP在最大执行时间后停止而没有任何错误

> ID：13974857
> 
> 赞同：1
> 
> 时间：2012-12-20T14:57:52.410
> 
> 标签：php, apache

我在 Apache（Windows 上的 XAMPP Server 1.6.6.a）上运行 PHP 应用程序，并在某些服务器重新启动后出现奇怪的行为。脚本挂起，但我不知道在哪里，因为 PHP 错误日志让我不知道它到底挂在哪里。我在 PHP 端找到了问题，因为 Apache 没有给我错误日志，并且页面在 60 秒后停止加载（与 PHP 最大执行时间匹配 = 60，而不是 Apache 超时 = 300）。

这是相关的 php.ini：

```
max_execution_time = 60
error_reporting  =  E_ALL
ignore_repeated_errors = Off
ignore_repeated_source = Off
error_log = "C:\xampp\apache\logs\phperror.log" 
```

这是httpd.conf：

```
Timeout 300
ErrorLog logs/error.log
LogLevel debug 
```

我该怎么做才能让 PHP 告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:01:40.537

放入以下负载：

```
trigger_error("Script reached line " . __LINE__, E_USER_NOTICE); 
```

在代码中的各个点找出代码停止的位置。

# magento - Magento - 目录价格规则仅适用于某些产品

> ID：13974858
> 
> 赞同：0
> 
> 时间：2012-12-20T14:57:54.250
> 
> 标签：magento, product, catalog, rule

我只想对某个类别应用目录价格规则。这在一定程度上起作用。该类别有 109 种产品，但我只能在 109 种产品中的 20 种产品的前端看到降价。其余不变。

这可能是什么原因？如果我手动编辑产品，则会应用价格规则，但必须为 80 多种产品执行此操作有点太多了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:36:19.520

当有定价规则时，Magento 有一种奇怪的方式来存储和索引定价。

尝试每隔几分钟左右运行一次 cron 作业。

# visual-studio-2010 - 无法在 VS Crystal Reports 中求和公式

> ID：13974869
> 
> 赞同：0
> 
> 时间：2012-12-20T14:58:46.827
> 
> 标签：visual-studio-2010, crystal-reports, sum

所以我试图在视觉工作室水晶报告中总结一个公式，但仅限于组级别。

我有合同与 Ancillary_Charge 的一对多关系。我试图总结 Contract.Cost，但也显示每个 ancillary_charge。因此，我将 CONTRACT.ID 设置为一个组，并将每个辅助费用设置为详细信息。

以下是我的 ChargePrice 公式

```
if ({@IsZero} or {@ShowPrice} = false) then 0 else {CONTRACT.CONTRACT_COST} 
```

IsZero 的公式

```
({PAYMENT_TYPE.ID} = 1) and IsNull({CHARGE_STATUS.PAYMENT_STATUS}); 
```

ShowPrice 的公式确定它是否处于组级别并返回 true 或 false

```
Global booleanvar thingy;
Global booleanvar otherthingy;

if (isNull({@Previous}) and thingy = false) then
  thingy := true
else
  thingy := false;

if otherthingy then
  thingy := true;
otherthingy := false;

if (isNull({@Previous}) = false and next({CONTRACT.ID})<>{CONTRACT.ID}) then
  otherthingy := true;

thingy 
```

当我尝试对 ChargePrice 求和时，它告诉我“无法汇总此字段”。

为什么？否则我可以做我想做的事，即只在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:57:18.227

与其让水晶做求和，不如自己做。

创建两个额外的公式

**fml重置**

```
Global NumberVar Total;
Total:=0; 
```

**fml显示**

```
Global NumberVar Total;
Total 
```

将您的费用价格公式更改为

```
Global NumberVar Total;
if ({@IsZero} or {@ShowPrice} = false) then 
0;
else 
Total:=Total+{CONTRACT.CONTRACT_COST}; 
```

将 fmlReset 放置在您的页面报告标题中或在您想要重置总计时。将 fmlDisplay 放在要显示总数的位置。

# android - 在特定视频中打开图库，不播放

> ID：13974880
> 
> 赞同：1
> 
> 时间：2012-12-20T14:59:19.480
> 
> 标签：android, video, gallery, mediarecorder

我有一个也可以录制视频的相机应用程序。（我在三星 S3 上开发）

我希望能够在最后录制的视频上打开画廊。

我使用这段代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(file.getAbsolutePath()), "video/3gpp");
startActivity(intent); 
```

该代码的问题是视频立即开始，当它结束时画廊活动关闭。

我希望能够在不播放视频的情况下打开视频，就像在我的三星 S3 中一样。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:10:49.430

要打开特定图像，我们可以使用这个 .. 和它的工作。

所以请检查您的要求。希望这会帮助你..

```
import java.io.File;
import android.app.Activity;
import android.content.Intent;
import android.media.MediaScannerConnection;
import android.media.MediaScannerConnection.MediaScannerConnectionClient;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class SDCARD123Activity extends Activity implements MediaScannerConnectionClient{
    public String[] allFiles;
private String SCAN_PATH ;
private static final String FILE_TYPE="image/*";

private MediaScannerConnection conn;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    File folder = new File("/sdcard/Photo/");
    allFiles = folder.list();
 //   uriAllFiles= new Uri[allFiles.length];          
    for(int i=0;i<allFiles.length;i++)
    {
        Log.d("all file path"+i, allFiles[i]+allFiles.length);
    }
  //  Uri uri= Uri.fromFile(new File(Environment.getExternalStorageDirectory().toString()+"/yourfoldername/"+allFiles[0]));

    SCAN_PATH=Environment.getExternalStorageDirectory().toString()+"/Photo/"+allFiles[0];
    System.out.println(" SCAN_PATH  " +SCAN_PATH);

    Log.d("SCAN PATH", "Scan Path " + SCAN_PATH);
    Button scanBtn = (Button)findViewById(R.id.scanBtn);
    scanBtn.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
        startScan();
    }});
    }
    private void startScan()
    {
    Log.d("Connected","success"+conn);
    if(conn!=null)
    {
    conn.disconnect();
    }
    conn = new MediaScannerConnection(this,this);
    conn.connect();
    }
@Override
public void onMediaScannerConnected() {
    Log.d("onMediaScannerConnected","success"+conn);
    conn.scanFile(SCAN_PATH, FILE_TYPE);    
}
@Override
public void onScanCompleted(String path, Uri uri) {
    try {
        Log.d("onScanCompleted",uri + "success"+conn);
        System.out.println("URI " + uri);             
        if (uri != null) 
        {
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(uri);
        startActivity(intent);
        }
        } finally 
        {
        conn.disconnect();
        conn = null;
        }
       }
} 
```

# row - JavaFX - TableView，如何向控件添加新行？

> ID：13974884
> 
> 赞同：2
> 
> 时间：2012-12-20T14:59:28.637
> 
> 标签：row, tableview, javafx-2, add

有谁知道如何将新行（以添加全新数据）添加到 TableView - 直接添加到控件？编辑很容易，但是如何添加新数据呢？

我认为这应该不是问题（正如我从其他 prog. 语言中知道的那样），但在整个互联网上，我只发现一年前发布的这个相关主题仍然没有得到回答。在 JavaFX 中这样做是不可能的吗？

[JavaFX 2 TableView直接在控件上插入行](https://stackoverflow.com/questions/9088213/javafx-2-tableview-inserting-rows-directly-on-the-control?answertab=votes#tab-top)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:54:23.670

TableView 由一个[项目列表](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html#getItems%28%29)支持，在项目列表中添加一个新条目，该条目对应的行将显示在 TableView 中。

```
tableView.getItems().add(new Item()); 
```

# node.js - 如何重定向到本地护照错误页面

> ID：13974885
> 
> 赞同：1
> 
> 时间：2012-12-20T14:59:30.037
> 
> 标签：node.js, passport.js

[使用passport-local](https://github.com/jaredhanson/passport-local)时，如何在（示例数据库）错误时重定向到自定义页面并显示消息。这是代码：

```
passport.use(new LocalStrategy({ 
  passReqToCallback: true 
  }, function( req, username, password, done ) {
    done({error:'mycustomerrormessage'});
  }
)); 
```

路由看起来像：

```
app.post('/auth/local', passport.authenticate('local', { 
    successRedirect: '/', 
    failureRedirect: '/', 
    failureFlash: true 
})); 
```

发生错误时，url 停留`/auth/local`，`[object Object]`内容令人讨厌。

如果我打电话

```
done( null, false, { message: "error message"}) 
```

比护照重定向到`/`，我可以发送消息，但是如果我使用第一个非参数调用函数并对该错误执行某些操作，`flash`我该如何设置重定向？`verify``null`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T02:40:03.727

根据 express 文档，您可以配置错误处理中间件，如下所示：

```
app.use(function(err, req, res, next){
  console.error(err.stack);
  res.send(500, 'Something broke!');
}); 
```

四个参数签名表明这是一个错误处理定义。

请参阅[http://expressjs.com/guide.html#error-handling](http://expressjs.com/guide.html#error-handling)

# php - Zend Framework 2 - Doctrine 2 - 如何在 Windows 下使用命令行

> ID：13974888
> 
> 赞同：1
> 
> 时间：2012-12-20T14:59:35.783
> 
> 标签：php, doctrine-orm, command-line-interface, zend-framework2

我发现这个[网站](http://wildlyinaccurate.com/useful-doctrine-2-console-commands)列出了几个有趣`Doctrine`的 CLI 命令。

我设置了一个 Doctrine 模型类，就像其中一个教程中[描述的那样。](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)

但我仍然想知道如何使用 CLI 命令。Zend 或 Doctrine 如何知道我的类在哪里以及 Windows 如何知道我的 Doctrine 可执行文件位于我的项目库中？

有谁知道如何使用这些 CLI 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:24:59.157

Doctrine cli 基于 symfony 控制台包。

如果你使用 composer 进行安装，请查看`vendor/bin`目录。你会`.bat`在那里找到学说 cli 的文件。

# sql - 单行子查询返回多行 oracle

> ID：13974889
> 
> 赞同：4
> 
> 时间：2012-12-20T14:59:52.930
> 
> 标签：sql, oracle

我有如下三个表：

**测试**

```
 +--------------+--------+
    | Test_Case_ID | Status |
    +--------------+--------+
    |           10 | PASS   |
    |           20 | FAIL   |
    |           30 | FAIL   |
    +--------------+--------+ 
```

**缺点**

```
 +-----------+
    | Defect_ID |
    +-----------+
    |       500 |
    |       400 |
    +-----------+ 
```

和**链接1**

```
 +--------------+-----------+
    | Test_Case_ID | Defect_ID |
    +--------------+-----------+
    |           20 |       500 |
    |           30 |       500 |
    |           30 |       400 |
    +--------------+-----------+ 
```

我正在尝试以下查询

```
select 
test.test_case_id,
test.status,
case when test.status = 'FAIL' then 
(select link1.defect_id 
from link1 
where 
test.test_case_id = link1.test_case_id) 
end as defect1_id
from test test 
```

我收到以下错误“错误 12/20/2012 10:05:17 AM 0:00:00.093 Toad for Data Analysts: ORA-01427: single-row subquery returns more than one row 1 78”

有没有办法从链接表中检索“30”的记录？因为我想显示测试用例 30 由于缺陷 500 和 400 而失败。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:10:54.440

链接表中有两行的值为“30”。这是你的问题。

你想要这些行中的哪一行？

要修复子查询，您可以说`select max(link1.defect_id)`或添加`and rownum = 1`到`where`子句。

你想要的可能更复杂。这个版本怎么样，它将缺陷连接成一个字符串：

```
select t.test_case_id, t.status,
       listagg(cast(l.defect_id as varchar(32)) within group (order by l.defect_id) as defects
from test t left join
     link1 l
     on t.test_case_id = l.test_case_id
group by t.test_case_id, t.status 
```

您没有指定 Oracle 的版本。如果`listagg`不可用，那么`wm_concat`可能是。 [这](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)是关于在 Oracle 中聚合中连接字符串的不同方法的参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:12:58.467

您是否考虑过使用 a`JOIN`而不是子查询：

```
select 
  t.test_case_id,
  t.status,
  case when t.status = 'FAIL' then l.defect_id  
    end as defect1_id
from test t
left join link1 l
  on t.test_case_id = l.test_case_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/2c339/2)

这将返回两条记录，然后您可以决定在最终结果中返回哪个项目。

结果：

```
| TEST_CASE_ID | STATUS | DEFECT1_ID |
--------------------------------------
|           20 |   FAIL |        500 |
|           30 |   FAIL |        500 |
|           30 |   FAIL |        400 |
|           10 |   PASS |     (null) | 
```

根据您的评论，如果您使用的是 Oracle 11g，那么您可以使用该`LISTAGG()`函数将记录合并为一行：

```
select 
  t.test_case_id,
  t.status,
  case 
    when t.status = 'FAIL' 
    then listagg(l.defect_id, ', ')
          within group (order by l.defect_id)
  end as defect1_id
from test t
left join link1 l
  on t.test_case_id = l.test_case_id
group by t.test_case_id, t.status 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/2c339/3)

结果：

```
| TEST_CASE_ID | STATUS | DEFECT1_ID |
--------------------------------------
|           10 |   PASS |     (null) |
|           20 |   FAIL |        500 |
|           30 |   FAIL |   400, 500 | 
```

# java - Java中的特征值和对应的EigenVector

> ID：13974890
> 
> 赞同：1
> 
> 时间：2012-12-20T14:59:53.500
> 
> 标签：java, eigenvector, eigenvalue, jama

给定一个矩阵，我对特征值和相应的特征向量感兴趣。

使用 Jama，我可以获得特征值和特征向量，但两者之间的相关性没有定义：我想将每个特征向量映射到相应的特征值。

你能推荐我这样做的方法吗？我试图自己实现它，但它变得讨厌。

谢谢 ：）

* * *

我试图寻找一个授权的答案，但现在，根据我进行的实验和观察，特征向量和 evigenValues 似乎是对应的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:39:43.160

通常它们以相应的顺序呈现。但是您始终可以将特征向量乘以矩阵并查看它应用于向量的乘数。这也是你的直接特征值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:30:55.947

我通过邮件向 Weka 的开发人员询问了上述问题，他们确认了假设 -

特征向量确实以与特征值相同的顺序提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:24:53.220

使用[哈希图](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)来存储它们？鉴于问题有点模糊，我不确定这个答案是否相关。

# php - 点击帖子并重定向到主页

> ID：13974891
> 
> 赞同：0
> 
> 时间：2012-12-20T14:59:54.193
> 
> 标签：php, wordpress, .htaccess

当我点击我网站上的帖子网址时 - >它会将我重定向到主页。事实上，地址随着帖子名称而改变，但它显示主页。

网站网址：[http ://www.as-bidud.co.il/](http://www.as-bidud.co.il/)

我知道您会将网站语言视为问题，但要查看该问题 - 单击滑块上的“阅读更多 \ קרא עוד”按钮。

当我将主题切换到二十一点时 - 一切正常。

我在function.php中找不到问题

*   我已经关掉了插件，一一打开，没有发现问题
*   我认为问题来自自定义帖子类型 UI 插件，但......不是

页面网址工作正常。

.htacess：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

Single.php 文件：

```
<?php get_header(); ?>
<?php if(have_posts()) : ?> <?php while(have_posts()) : the_post(); ?>
<div id="main" class="sub-page">
            <div id="page-view">
                <h1 class="page-title"><span><?php wp_title ( '', true,'left' ); ?></span></h1>
                <div class="page-content">
                   <p><?php the_content(); ?></p>

                         <?php  endwhile;  ?>  
                          <?php endif; ?>   

        <?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:17:09.690

我的天啊。5个小时。将 Single.php 更改为 single.php 需要 5 小时。小写。就这样。

# php - 将 paypal 按钮与自定义表单集成，并在单击该按钮时将客户信息保存到数据库中

> ID：13974899
> 
> 赞同：1
> 
> 时间：2012-12-20T15:00:09.763
> 
> 标签：php, mysql, database, paypal

我创建了一个包含多个字段的订单（代码如下所述）。现在我要做的是将贝宝的“立即购买”按钮与此表单集成！由于我是这里的新手，我不知道如何完成同样的事情！如您所见，表单有一个常规的“提交”按钮，需要将其替换为 paypal 的立即购买。

我想弄清楚的另一件重要的事情是如何在完成付款后通过单击“立即购买”按钮将客户输入的数据保存到数据库中。任何帮助，将不胜感激。

我的自定义表格：

```
<!-- FORM DIV STARTS HERE -->
<div id="order-form">
<form name="orderform" id="orderform" action="" method="">

<!-- PERSONAL INFORMATION BLOCK-->

<legend class="form-header">Personal Information</legend>
<fieldset class="order-form-line">
<span class="req">Name:*</span> <input type="text" name="customername" id="customername" class="required letterswithbasicpunc" style="margin-left:78px;"/><br />
<div class="help">Enter your full name such as "John Smith"</div>
<span class="req">Email:*</span> <input type="text" name="customeremail"  class="required email" style="margin-left:82px;" /><br />
<div class="help">Enter a valid email such as "johnsmith@gmail.com"</div>
Website: <input type="text" name="customersite" class="url" style="margin-left:72px;" />
<div class="help">Enter url like "http://www.yoursitename.com"</div> 
</fieldset>

<!-- ORDER INFORMATION BLOCK-->

<legend class="form-header">Order Description</legend>
<fieldset class="order-form-line">
<div class="formbuttons">
<span class="req new">Content Type:*</span>
<input type="checkbox" name="webcontent" class="required" /> Article
<input type="checkbox" name="webcontent" /> Review
</div>
<div class="formbuttons2">
<span class="req new">Content Tone:*</span>
<input type="checkbox" name="contenttone" class="required" /> Professional 
<input type="checkbox" name="contenttone" /> Friendly
</div> 
Keyword(s): <input type="text" name="keys" class="" style="margin-left:51px;" /><br />
<div class="help">You can enter keywords in a comma-separated format</div>
Description: <div class="areatxt"><textarea rows="5" cols="31">Your description goes here</textarea></div>
<div class="help">Describe if you have any other requirements</div>
Audience: <input type="text" name="audience" class="" style="margin-left:66px;" />
<div class="help">You can provide info on your target audience</div>
</fieldset>

<!-- PAYMENT DETAILS BLOCK -->

<legend class="form-header">Payment Details</legend>
<fieldset class="order-form-line modified">
<span class="req">No. of Words:*</span> <input type="text" name="wordsno"  id="wordsno"  class="required digits" value="0" style="margin-left:31px; text-align:center;" /> <br />
<div class="help">Enter (only digits) your per word requirement such as "500" for  five-hundred word articles</div>
<span class="req">Quantity:*</span> <input type="text" name="wordsqty" id="wordsqty" class="required digits" value="0" style="margin-left:60px;text-align:center;" /> <br />
<div class="help">Enter (only digits) the total number of articles you need such as "10" for ten articles</div>
 Unit Price: <input type="text" name="wordsunitprice" value="$0.02" disabled="disabled" style="margin-left:64px;text-align:center;" /><br />
<div class="help">This is the "per word" cost</div>
Total Cost: <input type="text" name="wordstotalcost" id="wordstotalcost" value="$0.00" disabled="disabled" style="margin-left:59px;text-align:center;" /><br />
<div class="help">This reflects the total amount you would have to pay. It multiplies the 'unit price' with the result we get multiplying 'no. of words' and 'quantity'</div>
<input type="submit" value="Submit" />

</fieldset>
</form>
</div><!-- FORM DIV ENDS HERE --> 
```

所以我的确切问题是： -

(1) 现在如何用 paypal 购买替换自定义表单的常规 html 提交按钮？注意：“客户支付的金额”将动态传递给贝宝的购买。

(2) 如果他想将整个客户信息保存到数据库中，他会怎么做？这应该在收到贝宝端的付款确认后发生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:31:55.403

如果您想让事情尽可能简单，我会选择[PayPal Payments Standard](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/wp_standard_overview)。您可以在您的 PayPal 帐户中的 Merchant Services 选项卡下创建“立即购买”按钮代码，或者您可以使用[购物车上传](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/cart_upload)方法并自己构建它，这是我的建议。

基本上，您只需创建一个新表单，其中包含一堆隐藏字段来表示您将发送到 PayPal 的数据，然后您可以使用任何类型的提交按钮。PayPal 提供了[您可以使用的所有标准变量的列表](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables)。

要将订单数据输入您自己的数据库（或发送定制的电子邮件收据、与第三方网络服务交互等），我建议使用[即时付款通知 (IPN)](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)。该系统将所有交易数据发布到您在服务器上的侦听器脚本。您可以随心所欲地处理这些数据，而且这一切都是实时发生的。

# javascript - 交叉过滤器中的对数图

> ID：13974900
> 
> 赞同：0
> 
> 时间：2012-12-20T15:00:11.447
> 
> 标签：javascript, d3.js, crossfilter

我正在使用交叉过滤器将各种数据列表绘制成直方图。一些项目的值比其他项目高很多，我热衷于以对数方式绘制直方图。

在调用 reduceSum 后，有没有办法可以将所有总和的项目计数转换为对数值？我很想添加类似的东西

```
Math.log(d.count) / Math.LN10; 
```

进入以下：

```
var crossfiltered_data = crossfilter(data),
    all = crossfiltered_data.groupAll(),
    item_labels = crossfiltered_data.dimension(function(d) { return d.name; }),
    items_group = hour.group().reduceSum(function(d) {
        return d.count
    }),
    charts = [
        barChart(on_range_change)
            .dimension(item_labels)
            .group(items_group)
          .x(d3.scale.linear()
            .domain([domain_start, domain_end])
            .rangeRound([0, 240])),
    ],
    chart = d3.selectAll(target)
        .data(charts)
        .each(function(chart) { 
            chart   .on("brush", renderAll)
                    .on("brushend", renderAll);
        }),
    render = function(method) {
            d3.select(this).call(method);
    },
    renderAll = function(event) {
        chart.each(render);
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:45:45.213

为什么不只使用对数刻度进行输出？见[`d3.scale.log`](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-_log)。假设您在`barChart`crossfilter 页面上使用 ，您只需[将此行](https://github.com/square/crossfilter/blob/gh-pages/index.html#L377)更改为使用对数刻度而不是线性刻度。

# java - IntellIj 索引器花费的时间太长。有什么选择吗？

> ID：13974904
> 
> 赞同：2
> 
> 时间：2012-12-20T15:00:15.080
> 
> 标签：java, search, intellij-idea

我使用过 IntellIJ 9 到 12 Ultimate，但总是对搜索需要多长时间（Ctrl-Shft-F）感到惊讶。如果文件被索引，它不应该很快（不到 2 秒）吗？要么我的 IntelliJ 设置不正确，要么索引根本不提供此功能。

我搜索了 JetBrains PlugIn Repository，但找不到可行的插件。有“搜索和替换”插件，但这不是我所指的。有“导航”但也不是一回事。

有人知道在 IntelliJ 中索引项目和搜索的方法吗？示例可以是“在项目中的任何位置查找字符串‘模块’”。今天，我认为这需要很长时间，大约。30-45 秒。足够长的时间来分散我的注意力并忘记我为什么要寻找它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:46:14.593

那很奇怪。尝试使项目中的缓存无效。我建议的下一步是检查您的硬盘性能。在 SSD 上移动您的项目应该会提高您的速度。

此外，如果项目很大，请尝试增加 IntelliJ 的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:09:02.267

搜索时请选中“仅全词”选项。只有当它打开时，IDEA 才会使用 index.html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T19:03:45.203

更改构建设置后尝试重新加载项目一次。IntelliJ 为项目构建中的每个更改索引 jars（您也可以配置它们）。

尝试通过关闭并重新打开 IntelliJ 以更快地对其进行索引来重新加载 IntelliJ。

每次我更改 POM 依赖项时，我都会重新加载它以使其更快。我正在使用社区版。

# wicket-1.6 - 如何在检票口中使 ListView 的整行可点击

> ID：13974907
> 
> 赞同：2
> 
> 时间：2012-12-20T15:00:21.597
> 
> 标签：wicket-1.6

**是否可以在检票口中使ListView**的整行可点击？我看过这个[例子](https://stackoverflow.com/questions/10796342/making-entire-row-of-a-wicket-datable-clickable)，但我需要一个可滚动的表格而不是分页。这就是为什么我要使用**ListView**，在单击表格的任何行时，该行的内容应显示在表格下方以进行编辑。

谢谢，

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:20:49.303

本质上是相同的方式，您必须将模型传递给列表视图...

```
//in ListView class
protected void populateItem(final ListItem<T> item) {

    item.add(new AjaxEventBehavior("onclick") {
    @Override
    protected void onEvent(AjaxRequestTarget target) {
                T object=item.getModelObject();     
                //do some stuff or a callback, besides you can use ajax 
    }
    });

} 
```

# firefox-addon-sdk - 测试是否安装了附加 sdk firefox 扩展

> ID：13974912
> 
> 赞同：0
> 
> 时间：2012-12-20T15:00:40.017
> 
> 标签：firefox-addon-sdk

我的问题是在主题上。我需要能够测试是否安装了基于附加 sdk 的扩展，以便以编程方式打开它。我该怎么做？基本上，我有一个 JS 脚本检查用户的网络浏览器，如果安装了我的扩展，我想重定向到一个特定的 url，这将启动扩展的打开。我通过 XUL 扩展阅读了这一点，向任何图像添加 contentaccessible=yes 并在加载时测试它给了我们答案，但似乎我们无法使用基于附加 sdk 的...

任何想法 ？

无论如何感谢您阅读我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:49:16.510

您应该查看 AddonManager 的文档：

[https://developer.mozilla.org/en-US/docs/Addons/Add-on_Manager/AddonManager](https://developer.mozilla.org/en-US/docs/Addons/Add-on_Manager/AddonManager)

这是您可以用来开始的代码片段：

```
const { Cu } = require("chrome");

let AddonManager = Cu.import("resource://gre/modules/AddonManager.jsm").AddonManager;

AddonManager.getAddonsByTypes(["extension"], function(addons) {
    var addonData = [];

    for (let i in addons) {
        let cur = addons[i];
        addonData.push({
            id: cur.id.toString(),
            name: cur.name,
        });
    };
    console.log(JSON.stringify(addonData, null, '   '));
}); 
```

~~我也在 Add-on Builder 上托管了这段代码：~~

[https://builder.addons.mozilla.org/package/44810/latest/](https://builder.addons.mozilla.org/package/44810/latest/)

**编辑： Builder 已停产，将在一个月内下线。**

# mysql - 在一对多表结构中选择一对一关系

> ID：13974913
> 
> 赞同：3
> 
> 时间：2012-12-20T15:00:45.667
> 
> 标签：mysql

我有三个 MySql 表：-

*   tbl_part - 包含具有 part_id 的部件列表
*   tbl_product - 包含带有 product_id 的产品列表
*   tbl_part_to_product - 包含零件和产品之间的一对多关系（part_id & product_id）

我正在尝试做两件事：-

1.  选择所有只有一个部件的产品。
2.  查找所有仅具有特定零件的产品，因为**只有**零件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:05:25.577

```
SELECT
*
FROM
tbl_part part
INNER JOIN tbl_part_to_product p2p ON part.part_id = p2p.part_id
INNER JOIN tbl_product prod ON p2p.product_id =prod.product_id
WHERE part.name = 'whatever'
GROUP BY prod.product_id
HAVING COUNT(*) = 1 
```

要选择只有一个部分的所有产品，只需删除 WHERE 子句。

如果您不想加入零件表：

```
SELECT
*
FROM
tbl_product prod
INNER JOIN tbl_part_to_product p2p ON p2p.product_id =prod.product_id
GROUP BY prod.product_id
HAVING COUNT(*) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:22:50.313

让我们解决这两个问题：

选择所有只有一个部件的产品。

```
SELECT tbl_product.*
FROM
tbl_product product
INNER JOIN tbl_part_to_product ptop ON ptop.product_id = product.product_id
GROUP BY product.product_id
HAVING COUNT(ptop.part_id) = 1 
```

查找所有仅具有特定零件的产品，因为只有零件。

```
SELECT tbl_product.*
FROM
tbl_product product
INNER JOIN tbl_part_to_product ptop ON ptop.product_id = product.product_id
INNER JOIN tbl_part part ON ptop.part_id = part.part_id
WHERE part.part_name = 'some name'
GROUP BY product.product_id
HAVING COUNT(ptop.part_id) = 1 
```

如果您从任一查询中得到 GROUPing 错误，则需要将所有 tbl_product 字段添加到 GROUP。

# maven - Maven：打包“兄弟”项目

> ID：13974914
> 
> 赞同：2
> 
> 时间：2012-12-20T15:00:49.287
> 
> 标签：maven, dependency-management, onejar

我正在处理大量彼此密切相关的项目，并寻找一种方法来使用良好的 Maven 配置来减少维护开销。

我目前正在处理的一个场景是同一个“公司项目”中的一组几个小项目，其中大多数依赖于其他项目，每个项目都有一个很大的外部依赖项列表。

为了让它更干净，我创建了一个父 pom，将它们全部设置为模块，并在父的 dependencyManagement 部分中创建了一个大的依赖项列表，允许我删除项目 pom 中的大部分版本标签。

对我来说，下一个阶段是通过使用一些插件（例如 one-jar 或 assembly）来减少生成的 jar 的数量，以便从其中一个包含所有其他项目的项目中获取一个 signle jar。然而，这导致我有一个巨大的 jar，里面有大量的外部库，其中大部分已经由运行环境提供。我知道将`<scope>provided</scope>`标签添加到外部依赖项的声明中可以完成这项工作，但我想避免在我的 pom.xml 中使用几十个这样的标签。

所以问题是：

*   有没有办法定义默认范围，所以我`compile`只能在我想要包含的库中使用范围？

然后，而不是这样：

```
<dependencyManagement>
    <dependency>
        <groupId>any.external</groupId>
        <artifactId>lib</artifactId>
        <version>1.0</version>
        <scope>provided</scope> <!--Skip Inclusion-->
    </dependency>
    <dependency>
        <groupId>any.external</groupId>
        <artifactId>cool-lib</artifactId>
        <version>1.0</version>
        <scope>provided</scope> <!--Skip Inclusion-->
    </dependency>
    <dependency>
        <groupId>another.external</groupId>
        <artifactId>lib</artifactId>
        <version>1.0</version>
        <scope>provided</scope> <!--Skip Inclusion-->
    </dependency>
    <dependency>
        <groupId>my.company</groupId>
        <artifactId>some-dependency</artifactId>
        <version>1.0</version>
    </dependency>
</dependencyManagement> 
```

我可以拥有这个（请注意，当我们只有 10 个内部项目要包含但超过 100 个外部库时，差异就会出现）：

```
<dependencyManagement>
    <dependency>
        <groupId>any.external</groupId>
        <artifactId>lib</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>any.external</groupId>
        <artifactId>cool-lib</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>another.external</groupId>
        <artifactId>lib</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>my.company</groupId>
        <artifactId>some-dependency</artifactId>
        <version>1.0</version>
        <scope>compile</scope><!-- Include It! -->
    </dependency>
</dependencyManagement> 
```

*   或者更好：也许我跳过了一些东西，并且已经有一种方法可以告诉 maven：“仅包括当前项目中生成的 jars”？请记住，所有模块都是“兄弟”，作为同一父模块的模块包含在内，并且同时编译。

提前谢谢了！卡尔斯

# java - Apache Tomcat6：是否可以自动检测新版本的战争、下载和重新部署？

> ID：13974918
> 
> 赞同：0
> 
> 时间：2012-12-20T15:01:02.867
> 
> 标签：java, playframework, tomcat6, war, auto-update

我想生成一个在 tomcat 服务器中运行的“自动更新”应用程序。这里有一个更好的解释：

1.  在 Windows 上运行的 Play Framework 1.2x 应用程序大战（爆炸）（可悲..）

2.  [Tomcat 从http://www.somewebsource.com/app.zip](http://www.somewebsource.com/app.zip)（或任何扩展名）检查新版本

3.  Tomcat 每天凌晨 1 点检查服务器，如果有新版本，tomcat 将下载文件（取消部署旧文件？）并自动部署。

我已经在网上搜索过这个，但我找不到我应该看的“关键字”。

我的应用程序在多台机器上运行，我希望在没有任何人工交互的情况下更新它们。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:15:44.790

编写一个 cronjob 并部署。只需几行脚本代码，您就可以完成。

# java - 在 Javascript 中使用 Resourcebundle 属性

> ID：13974921
> 
> 赞同：0
> 
> 时间：2012-12-20T15:01:08.473
> 
> 标签：java, javascript, dojo, special-characters, resourcebundle

我在一个 Java EE Web 应用程序上工作，该应用程序结合使用 Dojo 和纯 javascript 作为前端。

我们发现，当在 javascript 中使用 ResourceBundle 属性时，在某些情况下它们最终会破坏代码。具体来说，当属性包含引号（单引号和双引号）和转义序列（\n、\s ...）时，就会发生这种情况。

解决方案似乎是包含额外的转义字符。例如，当在 Js 警报中使用 \n 以正确呈现换行符时，需要在前面加上一个斜杠 (\\n)，如果没有转义，引号会出于明显的原因提前截断内容。

到目前为止，我们对上述问题的解决方案是在属性文件本身中添加额外的转义字符。但这是我们想要摆脱的东西。看起来这可能是一个普遍存在的问题，我想听听专家们如何解决这个问题。

当前使用情况：`key=A newline is represented with \\n and this \" is within quotes \".`

设想用途：`key=A newline is represented with \n and this " is within quotes ".`

PS：我们通常使用`<fmt:message>`标签在前端访问这些值并在 javascript 中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:01:24.990

考虑使用 StringUtils。如果有一种方法可以像您一样转义输入。

[http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeJava(java.lang.String)](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeJava%28java.lang.String%29)

# objective-c - 使用 ARC 在 iOS6 中定义一个结构

> ID：13974923
> 
> 赞同：1
> 
> 时间：2012-12-20T15:01:14.197
> 
> 标签：objective-c, struct, automatic-ref-counting

简单的问题：我学习了 C++ 和 struct 的语法。所以我想在我的 iOS 应用程序中使用结构来存储数据，但 ARC 不允许通常使用结构，我的问题有什么解决方案吗？

```
struct fruit {
    int a;
}; 
```

_

```
{
struct fruit apple;
apple.a = 1;
return 0;
} 
```

例如，是否有可能用 NSMutableArray 解决这个问题？顺便说一句，我必须在哪里定义它？.m 文件还是 .h 文件？

问候 CTS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:08:58.720

当然，即使在 ARC 中，也允许在 Objective-C 中使用结构。您指定的结构应该绝对没有问题：

```
struct fruit {
    int a;
}; 
```

ARC 出现的唯一问题是包含 Objective-C 对象的结构，因为 ARC 不知道它必须如何管理这些对象。但是，您可以使用`__unsafe_unretained`, 让编译器知道“你知道，你在做什么”：

```
struct foo {
    __unsafe_unretained NSString *bar;
}; 
```

`bar`在这种情况下只是一个指针，而不是强引用，由 ARC 管理。Apple 建议在这些情况下尽可能使用简单的类。

# jquery - 在jQuery-ui Datepicker中突出显示每个月的第一天

> ID：13974924
> 
> 赞同：3
> 
> 时间：2012-12-20T15:01:17.413
> 
> 标签：jquery, jquery-ui, date, jquery-ui-datepicker

我不得不为 jQuery datepicker 对我的 CSS 进行一些修改。不幸的是，在此过程中，我设法突出了每个月的第一天。我需要寻找什么房产？我必须从今天的日期中删除样式以执行其他 CSS。我已经能够做到。但我不想要这种副作用......

这是我添加的行：

```
.ui-datepicker-current .ui-datepicker-today .ui-state-highlight { background: transparent !important;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:09:51.273

您可以[`beforeShowDay`](http://api.jqueryui.com/datepicker/#option-beforeShowDay)为此使用事件。此事件的主要功能是启用或禁用日历上的特定日期。但是，它也可用于为特定日期分配特殊类别：

```
$(".datepicker").datepicker({
    beforeShowDay: function(date) {
        return [true, date.getDate() == 1 ? "first-class" : ""];
    }
}); 
```

# [演示在这里](http://jsfiddle.net/salman/Fs6uu/)

# javascript - 当他们选择同名的文件时，不会触发 Javascript 文件输入 onchange

> ID：13974925
> 
> 赞同：4
> 
> 时间：2012-12-20T15:01:21.193
> 
> 标签：javascript, html, file-upload

我的网页中有一个文件输入，允许用户上传图像。

我进行了设置，以便当他们选择图像时，会触发文件输入的更改事件并向他们显示图像的预览。

有时，一旦他们看到预览，他们想在本地稍微调整一下图像（例如，使用绘画来裁剪它）。然后他们点击 save in paint 并点击文件输入并再次选择文件。

问题是当他们再次选择文件时，即使图像数据已更改并且如果他们尝试将文件上传到我的服务器，则不会触发输入的更改事件，并且使用旧的图像数据。

有什么方法可以检测用户何时实际选择文件，而不是何时发生文件输入更改事件，以便我可以很好地处理这种情况？

编辑：请注意，每次用户选择图像时，我都可以删除并重新创建文件输入，这很有效，但这意味着文件输入显示“未选择文件”，这让用户感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T17:08:17.003

一个简单的解决方案是执行以下操作：

```
this.input.addEventListener('click', function() {
    this.value = '';
}, false); 
```

这会导致在用户选择文件时触发更改事件，因为打开文件浏览弹出窗口的初始单击会清除输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T08:01:24.723

```
this.input.bind('click', function() {
    this.value = '';
}, false); 
```

而不是弃用的`.addEventListener()`尝试`.bind()`

# javascript - 清除后，localStorage 会记住以前的值

> ID：13974926
> 
> 赞同：6
> 
> 时间：2012-12-20T15:01:22.140
> 
> 标签：javascript, backbone.js, local-storage

所以，这有点奇怪。我正在使用 Backbone 和 Backbone.localStorage 将远程数据保存到本地存储以进行缓存。很标准的东西。

当我`localStorage.clear()`在整个商店上运行 a 时，所有值都将被永久清除，除了具有值字符串数组的键。它在第一次检查时被清除，但是当存储再次保存时，`Backbone.LocalStorage.sync('create', model);`以前的值又回到了那里。

当然，如果我在 Chrome 开发者工具中手动删除密钥，它就会消失并且不会重新填充。就好像`localStorage.clear()`调用仍然用字符串数组缓存键一样。我已经确认它最初在应用程序启动时被清除。

我将在编辑时在此处发布一些代码和屏幕截图，但实际上它非常标准，除了这些值在重新填充密钥后仍然存在。这里有什么想法吗？

编辑：很多有趣的代码：

收藏：

```
app.DiagnosisCollection = Backbone.Collection.extend({
    model: DiagnosisModel,
    localStorage: new Backbone.LocalStorage('diagnosis'),

    save: function(model) {
        Backbone.LocalStorage.sync('create', model);
    }
}); 
```

模型：

```
app.DiagnosisModel = Backbone.Model.extend({

    urlRoot: app.ApiRoot,
    url: app.DiagnosisApi,

    initialize: function(options) {
        if(!options.query) {
            throw 'query must be passed to diagnosisModel';
        }

        this.local = false;
        this._query = options.query;
    },

    sync: function(method, model, options) {
        var diagnosisKey = localStorage.getItem('diagnosis');
        var index, diagnosisStore;

        if(diagnosisKey) {
            diagnosisKey = diagnosisKey.split(',');
        }

        index = _.indexOf(diagnosisKey, this._query);

        if(index !== -1) {
            diagnosisStore = localStorage.getItem('diagnosis' + '-' + diagnosisKey[index]);
        }

        if(diagnosisStore) {
            this.local = true;
            options.success(JSON.parse(diagnosisStore));
        }
        else {
            this.local = false;
            var fetchUrl = this.urlRoot + this.url + this._query;
            $.getJSON(fetchUrl, function(data, textStatus) {
                if(textStatus !== 'success') {
                    options.error();
                }
                options.success(data);
            });
        }
    }
});

return app.DiagnosisModel; 
```

完成工作的控制器功能：

```
 var self = this;

        // Create a new collection if we don't already have one
        // The save function puts it in local storage
        if(!this.diagnosisCollection) {

            this.diagnosisCollection = new DiagnosisCollection();

            this.diagnosisCollection.on('add', function(diagModel) {
                this.save(diagModel);
            });
        }

        var diagModel = new DiagnosisModel({
            query: diagId
        });

        diagModel.fetch({
            success: function() {
                var diagView = new DiagnosisView({
                    model: diagModel
                });

                if(!diagModel.local) {
                    self.diagnosisCollection.add(diagModel);
                }

                self._switchPage(diagView);
            },
            error: function() {
                console.error("Diag Model Fetch Failed");
                Backbone.history.navigate('503', { trigger: true });
            }
        }); 
```

顺便说一句，`localStorage.clear()`通话是在应用程序启动中。它执行 API 调用以查看服务器上的版本是否已更改。如果版本发生了变化，那么我们核对 localStorage。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T12:30:28.110

而不是`localStorage.clear()`，使用：

```
localStorage.removeItem('userInfo'); 
```

我在我的主干应用程序中遇到了同样的问题，我用这种方式清除了这些值。

Ps：是的，您需要一一指定所有本地存储变量..:(..但这很好用。

# c# - Infragistics WebDataGrid 按列名从选定行中获取值：VB.net 到 C# 的转换

> ID：13974934
> 
> 赞同：1
> 
> 时间：2012-12-20T15:01:42.853
> 
> 标签：c#, infragistics, vb.net-to-c#

我正在将带有 VB.NET 代码隐藏的网站转换为 C#。我遇到的唯一真正问题是在`RowSelectionChanged`事件中按列名从 Infragistics WebDataGrid 行获取数据。

示例 VB.NET 代码：

```
If Me.WebDataGrid1.Behaviors.Selection.SelectedRows(0).DataItem("Status").ToString <> "Released" Then
        '"Status" is the column name
End If 
```

我认为将其更改为这个几乎可以做到，但无济于事。

```
if (this.WebDataGrid1.Behaviors.Selection.SelectedRows[0].DataItem["Status"].ToString() != "Released") { 
        //do stuff
} 
```

具体来说，我得到的错误是，`Cannot apply indexing with [] to an expression of type 'object'`我非常肯定的是指的是该`DataItem["Status"]`部分。

如何从名称指定的列的选定行中获取值？

更新：我找到了一个解决方案，在下面的答案中，但它可能会做得更好。如果出现更好的答案，我很乐意接受不同的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:43:37.633

[我在这里](http://www.infragistics.com/community/forums/t/56404.aspx)找到了一个可行的解决方案，但感觉相当迂回。

```
GridRecord selectedRow = e.CurrentSelectedRows[0];
DataRowView dataItem = (DataRowView)selectedRow.DataItem;
DataRow dataRow = dataItem.Row;
object[] valueArray = dataRow.ItemArray;
int columnIndex = WebDataGrid1.Columns["Status"].Index;
string statusValue = selectedRow.Items[columnIndex].Value.ToString();

if (statusValue != "Released") {
    //do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T22:04:37.037

您的 C# 行中缺少的只是将 this.WebDataGrid1.Behaviors.Selection.SelectedRows[0].DataItem 转换为 DataRowView。例如以下将起作用：

```
if (((DataRowView)this.WebDataGrid1.Behaviors.Selection.SelectedRows[0].DataItem)["Status"].ToString() != "Released")
{
        //do stuff
} 
```

请注意，以下内容可能更易于阅读：

```
DataRowView drv = (DataRowView) this.WebDataGrid1.Behaviors.Selection.SelectedRows[0].DataItem;
if (drv["Status"].ToString() != "Released")
{
    //do stuff
} 
```

我假设您要转换的 VB 代码工作正常，因为未设置 Option Strict，因此不需要显式完成 Object 和 DataRowView 之间的转换。

# android - 如何将转换字符串写入文档对象

> ID：13974936
> 
> 赞同：2
> 
> 时间：2012-12-20T15:01:44.187
> 
> 标签：android, xml-parsing, sax, android-xml, saxparseexception

我有一个包含 xml 内容的字符串，如下所示：

```
String xml = "<item_list>" +
                "<category id='2' name='categoryName'>" +
                   "<item id='41' name='item1' />" +
                "</category>" +
             "</item_list>)"; 
```

我想将其转换为 Document 对象。这是我的代码：

```
Document doc = null;
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
StringReader sr = new StringReader(xml);
InputSource is = new InputSource(sr);
doc = builder.parse(is); 
```

当我运行它时，我得到下一个错误：

```
org.xml.sax.SAXParseException: Unexpected token (position:TEXT )@1:139 in java.io.InputStreamReader@40fa7860) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:10:01.837

将您的 xml 字符串更改为：

```
String xml = "<?xml version='1.0' encoding='UTF-8'?>" +
                "<item_list>" +
                "<category id='2' name='categoryName'>" +
                   "<item id='41' name='item1' />" +
                "</category>" +
             "</item_list>"; 
```

`<?xml version='1.0' encoding='UTF-8'?>`目前，您的字符串中缺少 xml 文档标题

有关我们如何在 android 中创建 xml 文档的更多帮助，请参阅本教程：

[http://xjaphx.wordpress.com/2011/10/27/android-xml-adventure-create-write-xml-data/](http://xjaphx.wordpress.com/2011/10/27/android-xml-adventure-create-write-xml-data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:03:59.913

`"</item_list>)";`

那个括号不应该在那里。

# transactions - 尝试更改 SQL Server CE 事务隔离级别时出错

> ID：13974940
> 
> 赞同：0
> 
> 时间：2012-12-20T15:02:00.927
> 
> 标签：transactions, sql-server-ce, isolation-level

我想根据文档更改与 SQL Server CE (3.5) 的连接的事务隔离级别：http: [//msdn.microsoft.com/en-us/library/ms171885 (v=SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms171885(v=SQL.105).aspx)

所以我发送以下声明：

```
SET TRANSACTION ISOLATION LEVEL READ COMMITTED 
```

我得到这个错误：

> 解析查询时出错。[令牌行号= 1，令牌行偏移量= 5，错误令牌= TRANSACTION]

我的陈述有什么问题？

# javascript - 如何使用 Stylus CSS 生成随机颜色？

> ID：13974942
> 
> 赞同：3
> 
> 时间：2012-12-20T15:02:08.907
> 
> 标签：javascript, css, node.js, express, stylus

我使用 Express for Node.js，我使用的 CSS 引擎是 Stylus。手写笔很棒，但我似乎无法弄清楚如何传递颜色变量或以其他方式生成随机颜色。我尝试将 javascript API 用于手写笔，但我只是让自己感到困惑，并且可能使事情过于复杂。

```
var stylus = require('stylus');

app.use(stylus.middleware({
  src: __dirname + '/public',
  compile: function (str, path) {
    var mylib = function(style) {
      style.define('randomColor', function () {
        return '#5f5'; // temporary color just to see if it's working.
      });
    };
    return stylus(str).use(mylib);
  }
})); 
```

然后在我的手写笔表中我这样做：

```
mainColor = randomColor() 
```

但是，我收到以下错误：

> 预期 RGB 或 HSL 值，得到一个字符串 #5f5

我一生都无法弄清楚如何将颜色变量从javascript正确传递到手写笔表中。

## 编辑：

这是我的 app.js 文件：[https](https://gist.github.com/4345823)
://gist.github.com/4345823 这是我的 Stylus 文件：[https ://gist.github.com/4345839](https://gist.github.com/4345839)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-29T08:33:06.933

我知道这是一个非常晚的答案，但值得记录的东西永远不应该被忽视 - 正如您所发现的，问题是 Stylus 正在接收一个字符串，而它应该接收一个 RGB 或 HSL 颜色节点。

Stylus 中的字符串看起来像这样：`'text'`，当它们被编译为 CSS 时，它们会按原样编译。您需要呈现纯 CSS 文本，而不是字符串。

Stylus 有一个内置函数，可用于将该字符串转换为纯 CSS 文本：`unquote()`

所以你可以简单地从

mainColor = randomColor()

至

mainColor = unquote(randomColor())

然而，如果你想保持你的 Stylus 干净，你可能想要使用 Stylus JavaScript API 的`nodes`对象。如果您将函数从 JavaScript 传递到 Stylus，请考虑返回 Stylus 节点而不是原始数据类型的最佳实践：

```
style.define('randomColor', function () {
  var randomNum = function() { return Math.floor(Math.random() * 255 + 1); },
      r = randomNum(),
      g = randomNum(),
      b = randomNum();
  return new stylus.nodes.RGBA(r, g, b, 1); // random RGB node.
}); 
```

遗憾的是，关于 Stylus Nodes 的文档并不多，但您*真正*需要的参考资料就是[this](https://github.com/stylus/stylus/tree/master/lib/nodes)。它包含所有可用的节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:06:07.877

您可以通过生成随机颜色

```
 var col =  rgb(‘ + 
              (Math.floor(Math.random() * 256)) 
             + ‘,’ + (Math.floor(Math.random() * 256)) 
             + ‘,’  + (Math.floor(Math.random() * 256)) + ‘) ; 
```

或者

```
function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.round(Math.random() * 15)];
    }
    return color;
} 
```

并将十六进制转换为 rgb

```
function hexToRgb(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:07:47.117

我最终为一组颜色生成了类，并使用 javascript 定期随机更改类。

```
// css.styl

colors = 0 30 60 90 120 150 180 210 240 270 300 330

for hue, index in colors
  color = hsl(hue, 100%, 75%)
  .bodyColor{index}
    color: lighten(color, 55%) !important
    //background-color: darken(color, 97%) !important
  .borderColor{index}
    border-color: darken(color, 65%) !important
  a.linkColor{index}, a.linkColor{index}:visited
    color: lighten(color, 85%)
  .containerColor{index}
    background-color: color !important
  a.buttonColor{index}
    color: darken(color, 75%) !important
    background-color: lighten(color, 25%)
  a.buttonColor{index}:hover
    background-color: darken(color, 50%)
    color: lighten(color, 85%) !important 
```

* * *

```
// animateColor.js

(function ($) {

  $(document).bind('initialize', function (e) {
    if (!e.firstLoad) return;

    var colorIndex = 3,
      delay = 10,
      items = [
        { element: 'body', cssClass: 'bodyColor' },
        { element: '#banner', cssClass: 'borderColor' },
        { element: 'a', cssClass: 'linkColor' },
        { element: '.translucentFrame', cssClass: 'containerColor' },
        { element: 'a.button', cssClass: 'buttonColor' }
      ];

    $(document).data('colorItems', items);

    (function changeColors() {
      items.forEach(function (item) {
        $(item.element).removeClass(item.cssClass + colorIndex);
      });

      colorIndex = Math.floor(Math.random()*11);
      $(document).data('colorIndex', colorIndex);

      items.forEach(function (item) {
        $(item.element).addClass(item.cssClass + colorIndex);
      });

      setTimeout(changeColors, delay * 1000);
    })();
  });

})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-29T01:09:41.007

我知道这已经非常晚了，但我通过谷歌偶然发现了这一点，我找到的最简单的解决方案是这样做：

```
random(min, max)
  return floor( math(0, "random") * max + min )
randomColorChannel()
  return random(0, 255)
randomColor()
  return rgb(randomColorChannel(), randomColorChannel(), randomColorChannel()) 
```

# web-services - 来自 WSDL 的 AXIS 客户端使操作返回类型为 void

> ID：13974946
> 
> 赞同：1
> 
> 时间：2012-12-20T15:02:18.853
> 
> 标签：web-services, soap, axis, soapheader

我的存根中的代码正在设置以下属性：

```
 oper.setReturnType(org.apache.axis.encoding.XMLType.AXIS_VOID);
    oper.setStyle(org.apache.axis.constants.Style.WRAPPED);
    oper.setUse(org.apache.axis.constants.Use.LITERAL); 
```

响应结构如下：

```
<SOAP-ENV:Envelope><SOAP-ENV:Body><ns1:JCardViewSoapResponse0 xsi:type="ns1:JCardViewSoapResponse0"></ns1:JCardViewSoapResponse0></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

当我进行网络服务调用时，我得到一个异常：

org.xml.sax.SAXException：SimpleDeserializer 在尝试反序列化的某些东西中遇到了一个子元素，这不是预期的。

有任何想法吗？

# java - Tomcat、Jetty 或其他网络服务器将 Java 应用程序作为服务运行

> ID：13974947
> 
> 赞同：0
> 
> 时间：2012-12-20T15:02:34.850
> 
> 标签：java, perl, tomcat, webserver, jetty

我有一个从 Windows 上的 perl 脚本执行的 Java 应用程序。perl 脚本从另一个应用程序调用，并给出 XML 消息并期望 XML 响应。高级架构（餐巾式）如下：

```
---------------           ---------------              ------------
- Windows App - XML -->   - perl script - STDOUT -->   - Java App -
--------------- XML <--   --------------- STDIN  <--   ------------ 
```

我可以控制 perl 脚本和 Java 应用程序。我想在处理 XML 命令和构建 XML 响应时保持 Java 应用程序运行。我正在考虑使用[procrun](http://commons.apache.org/daemon/procrun.html)并可能通过套接字设置进程间通信。在开始讨论之前，我想知道在这种情况下修改 Java 应用程序以在像 Tomcat 这样的 Web 服务器上运行是否过大或合适？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:11:21.717

听起来有点矫枉过正，因为您不需要（或者至少您没有说明为什么应该在这种类型的服务器上运行 java 应用程序的任何原因）。

无论如何，如果您需要高性能、分布式架构或想要在其他一些应用程序之间共享 Java 应用程序（就像它是一个 Web 服务一样），它在技术上应该是可能的并且会有一些好处。

您还应该考虑到您的 java 应用程序将在多个线程中执行，因此任何共享数据（如单例或静态变量）可能需要调整为可重入。根据您编写应用程序的方式，这可能需要花费大量时间。

# javascript - Plupload 过滤器问题

> ID：13974949
> 
> 赞同：3
> 
> 时间：2012-12-20T15:02:42.550
> 
> 标签：javascript, jquery-ui, plupload

我正在尝试使用带有 plupload 的过滤器，如下所示：

```
filters: [
            { title: "RAR Files", extensions: "rar" }

        ], 
```

但是当我浏览文件时，它会显示所有类型的文件；但是，当我用 zip 替换 rar 时，它只显示 zip 文件；我尝试阅读有关该问题的信息并阅读它是非 mime 注册的文件扩展名错误？但我认为 rar 是一个很常见的扩展名，不是吗？请任何人向我解释一下...这是一个完整的代码演示[http://jsfiddle.net/VjeTk/58/](http://jsfiddle.net/VjeTk/58/)

即使指定了过滤器，是否也可以强制浏览对话框始终显示所有文件扩展名...

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:29:16.620

看起来这是一个 MIME 的东西；我在 Plupload 上找到了答案；如果有人面临类似的问题。直到提出适当的解决方案；您可以使用帖子中提到的任何一种方法。

[http://www.plupload.com/punbb/viewtopic.php?pid=9604#p9604](http://www.plupload.com/punbb/viewtopic.php?pid=9604#p9604)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T07:02:40.743

此行为取决于使用的运行时。HTML5 运行时会遇到此问题，而 Flash 和 SilverLight 则不会。因此，为了尽量减少问题的影响，您可以优先使用它们：

```
new plupload.Uploader({
    runtimes : 'silverlight,flash,html5,gears,browserplus',
    filters: [ { title: "RAR Files", extensions: "rar" } ],
    ...
}); 
```

HTML5 仍然可以使用，但至少 Flash 和 SilverLight 在可用时会受到青睐。

# ios - 当我使用 Core-Plot 在 y 轴上仅显示间隔时如何保持 x 轴可见

> ID：13974954
> 
> 赞同：2
> 
> 时间：2012-12-20T15:02:53.970
> 
> 标签：ios, plot, core-plot, axis-labels

当我在 y 轴上只显示一个间隔时，我还想在屏幕上看到 x 轴。当间隔从 0 开始显示时，x 轴是可见的，所以我认为我应该使用 yRange 将 x 轴向上移动，但我不知道该怎么做。

这是我设置 xRange 和 yRange 的部分。对于 y 轴，我搜索要显示的最小值和最大值。

```
 CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
[xRange expandRangeByFactor:CPTDecimalFromCGFloat(1.1f)];
plotSpace.xRange = xRange;
//CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
//[yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.2f)];
//plotSpace.yRange = yRange;

cpd = [CPDStockPriceStore sharedInstance];
NSMutableArray *arr = cpd.prices;
minY = 10000;
maxY = 0;
for (unsigned i = 1; i < [arr count]; i++){
    if([[arr objectAtIndex:i] intValue] < minY) minY = [[arr objectAtIndex:i]intValue];
    if([[arr objectAtIndex:i] intValue] > maxY) maxY = [[arr objectAtIndex:i]intValue];
}

CGFloat yMin = 100*((minY-200)/100);
CGFloat yMax = 100*((maxY+200)/100);  // should determine dynamically based on max price

plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(yMin) length:CPTDecimalFromFloat(yMax)]; 
```

这是我配置轴的部分：

```
-(void)configureAxes {

// 1 - Create styles
CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
axisTitleStyle.color = [CPTColor whiteColor];
axisTitleStyle.fontName = @"Helvetica-Bold";
axisTitleStyle.fontSize = 12.0f;
CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
axisLineStyle.lineWidth = 2.0f;
axisLineStyle.lineColor = [CPTColor whiteColor];
CPTMutableTextStyle *axisTextStyle = [[CPTMutableTextStyle alloc] init];
axisTextStyle.color = [CPTColor whiteColor];
axisTextStyle.fontName = @"Helvetica-Bold";
axisTextStyle.fontSize = 11.0f;
CPTMutableLineStyle *tickLineStyle = [CPTMutableLineStyle lineStyle];
tickLineStyle.lineColor = [CPTColor whiteColor];
tickLineStyle.lineWidth = 2.0f;
CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];
tickLineStyle.lineColor = [CPTColor blackColor];
tickLineStyle.lineWidth = 1.0f;
// 2 - Get axis set
CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;
// 3 - Configure x-axis
CPTAxis *x = axisSet.xAxis;
x.title = @"Ziua Lunii";
x.titleTextStyle = axisTitleStyle;
x.titleOffset = 15.0f;
x.axisLineStyle = axisLineStyle;
x.labelingPolicy = CPTAxisLabelingPolicyNone;
x.labelTextStyle = axisTextStyle;
x.majorTickLineStyle = axisLineStyle;
x.majorTickLength = 4.0f;
x.tickDirection = CPTSignNegative;
CGFloat dateCount = [[[CPDStockPriceStore sharedInstance] datesInMonth] count];
NSMutableSet *xLabels = [NSMutableSet setWithCapacity:dateCount];
NSMutableSet *xLocations = [NSMutableSet setWithCapacity:dateCount];
NSInteger i = 0;

for (NSString *date in [[CPDStockPriceStore sharedInstance] datesInMonth]) {
    CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:date textStyle:x.labelTextStyle];
    label.rotation = M_PI/4;
    CGFloat location = i++;
    label.tickLocation = CPTDecimalFromCGFloat(location);
    label.offset = x.majorTickLength;
    if (label) {
        [xLabels addObject:label];
        [xLocations addObject:[NSNumber numberWithFloat:location]];
    }
}
x.axisLabels = xLabels;
x.majorTickLocations = xLocations;
// 4 - Configure y-axis
CPTAxis *y = axisSet.yAxis;
y.title = @"Pret";
y.titleTextStyle = axisTitleStyle;
y.titleOffset = -50.0f;
y.axisLineStyle = axisLineStyle;
y.majorGridLineStyle = gridLineStyle;
y.labelingPolicy = CPTAxisLabelingPolicyNone;
y.labelTextStyle = axisTextStyle;
y.labelOffset = 23.0f;
y.majorTickLineStyle = axisLineStyle;
y.majorTickLength = 4.0f;
y.minorTickLength = 2.0f;
y.tickDirection = CPTSignPositive;

// Here is the problem. I think I have to use minY here, instead of 50 or 100 as values, in order to see the x-axis on the screen, but I don't exactly know how. 

NSInteger majorIncrement = 100;
NSInteger minorIncrement = 50;
CGFloat yMax = maxY;  // should determine dynamically based on max price
NSMutableSet *yLabels = [NSMutableSet set];
NSMutableSet *yMajorLocations = [NSMutableSet set];
NSMutableSet *yMinorLocations = [NSMutableSet set];
for (NSInteger j = minorIncrement; j <= yMax; j += minorIncrement) {
    NSUInteger mod = j % majorIncrement;
    if (mod == 0) {
        CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%i", j] textStyle:y.labelTextStyle];
        NSDecimal location = CPTDecimalFromInteger(j);
        label.tickLocation = location;
        label.offset = - y.majorTickLength - y.labelOffset;
        if (label) {
            [yLabels addObject:label];
        }
        [yMajorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:location]];
    } else {
        [yMinorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:CPTDecimalFromInteger(j)]];
    }
}
y.axisLabels = yLabels;
y.majorTickLocations = yMajorLocations;
y.minorTickLocations = yMinorLocations;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T01:30:12.250

如果您总是希望轴在同一位置交叉，请设置`orthogonalCoordinateDecimal`：

```
x.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0); 
```

如果您希望轴保持在屏幕上的同一位置，无论其他轴范围是什么，请使用约束：

```
x.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

# ruby-on-rails - 如何在集成测试中检查 AJAX 调用的数量？

> ID：13974959
> 
> 赞同：7
> 
> 时间：2012-12-20T15:03:08.073
> 
> 标签：ruby-on-rails, ajax, testing

我有一个远程表单，它在 AJAX 请求正在进行时禁用提交按钮。我想检查一下，如果我强调单击按钮，将不会执行其他 AJAX 请求。我如何在集成测试中检查这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:00:53.460

您可以使用 jquery 检查活动的 ajax 调用

```
$.active 
```

如果您使用 capybara 进行集成测试

```
page.evaluate_script('$.active').should be <= 1 
```

可能是一个解决方案。

正如您可能不知道何时发生调用，辅助函数可能会解决问题

```
def test_until(seconds=5)
  start_time = Time.now
  while (Time.now - start_time) <= seconds do
    yield
    sleep 0.05
  end
end 
```

可以这样称呼

```
test_until do
  page.evaluate_script('$.active').should be <= 1
end 
```

因此，如果有多个活动的 ajax 调用，您测试 5 秒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:24:55.277

保留全局或静态变量。在 Ajax 调用的函数中增加变量并检查变量的值。它不应该超过一个，保证 Ajax 调用只进行一次。

如果您正在进行自动化测试，这将为您提供有关检查活动 ajax 调用次数和其他内容的更多信息。

[http://hedleyproctor.com/2012/07/effective-selenium-testing/](http://hedleyproctor.com/2012/07/effective-selenium-testing/)

希望这可以帮助。谢谢你。

# sql - 在更新语句中使用当前行

> ID：13974966
> 
> 赞同：3
> 
> 时间：2012-12-20T15:03:31.153
> 
> 标签：sql, sql-update, row-number, inner-query

我想要做的是以下几点：我有一个有多位作者的表`SingleAuthor`。此表有时会多次包含同一作者。我想要做的是更新表格并添加作者特定编号。例如：

> sat_name -> sat_rowNumber
> Freddy -> 1
> Author2 -> 2
> Freddy -> 1 AnotherOne
> -> 3

我已经有了给我这个结果的查询：

`SELECT ROW_NUMBER() OVER( ORDER BY sat_name),
sat_name
FROM SingleAuthor
GROUP BY sat_name`

然而问题是，我想在`sat_rowNumber`列中插入这些数据。我带着查询走了这么远：

```
UPDATE SingleAuthor SET sat_rowNumber = (   SELECT newTable.numb 
                                            FROM(
                                                SELECT ROW_NUMBER() OVER( ORDER BY sat_name) as numb, sat_name 
                                                FROM SingleAuthor  
                                                GROUP BY sat_name) AS newTable 
                                            WHERE newTable.sat_name =) -- the current row in the to be updated table 
```

我想要做的是将`SingleAuthor`表更新`sat_rowNumber`到`newTable.numb`当前行`sat_name`等于`sat_name`.`newTable`

关于如何在更新语句中引用要更新的表的任何见解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:14:47.447

你的问题的答案是：

```
where newTable.sat_name = SingleAuthor.sat_name 
```

它将引用外部表，因为子查询中的表超出范围。但是，如果这是一个问题，您可以给子查询中的一个不同的别名。

我认为您可以更有效地编写查询：

```
with toupdate as (
    select sa.*, dense_rank() over (order by sat_name) as newVal
    from SingleAuthor sa
)
update toupdate
    set sat_RowNumber = newval 
```

该`dense_rank()`函数完全按照您`row_number()`对聚合值所做的操作。

# iphone - NSAttributedString with UILabel (ios 6): 使用行高属性和来自 IB 的属性

> ID：13974968
> 
> 赞同：0
> 
> 时间：2012-12-20T15:03:33.337
> 
> 标签：iphone, ios, cocoa-touch, ios6, nsattributedstring

我有一个多行 UILabel，它的动态文本是我希望格式化的。我需要做的唯一格式化是增加行高，以便一个标签中两行的高度差异更大。

问题 1：如何通过 NSAttributedString 进行操作？我尝试过，但格式非常“非 UIKit”，因此令人困惑，文档非常有限。

问题 2：我可以看到属性文本可以通过 Interface Builder 添加，但这当然是针对静态文本的。有什么方法可以让我在 IB 中设置属性，然后通过代码提供文本，因为我希望对所有文本而不是部分文本进行格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:25:39.013

在界面生成器中，您可以设置自定义属性/属性。您可以在 UILabel 上添加一个添加属性 CSSStyle 的类别。然后在 setCSSStyle 中，您将获取当前在文本上的 NSString，将其更改为 NSAttributedString 并通过 setAttributedText 进行设置。

要转换您放入此属性的 CSS 样式，您将使用像我的 DTCoreText 这样的框架，或者如果这对您来说很大，那么您可以简单地使用一个快速&肮脏的 CSS 解析器（我在 DTCoreText 中的 NSScanner 上构建了一个）并进行转换您需要 NSAttributedString 属性的属性。

想一想，您可能希望在这样的属性上设置一个 HTML 字符串，因为这样您就可以以不同的方式格式化不同的单词。DTCoreText 有一种将 HTML 转换为 NSAttributedString 的方法，然后您将再次通过标准设置器进行设置。

# php - Zend Framework 2 - 注释表单不起作用

> ID：13974969
> 
> 赞同：3
> 
> 时间：2012-12-20T15:03:37.890
> 
> 标签：php, forms, model, zend-form, zend-framework2

感谢[@Hikaru-Shindo](https://stackoverflow.com/a/13968158/1331671)，我研究了`AnnotationForms`哪个似乎是最好的解决方法`ModelForms`。[但是这里](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.quick-start.html#using-annotations)显示的示例对我不起作用。

```
use Zend\Form\Annotation\AnnotationBuilder;

$builder = new AnnotationBuilder();
$form    = $builder->createForm('User'); 
```

看着这段代码，我想`AnnotationBuilder`知道在哪里可以找到这个用户表单。特别是因为在 def 形式的注释中有一个小写的“用户”

```
@Annotation\Name("user") 
```

我将表单定义代码放入“MyModule/Form/UserForm.php”，将较低的代码放入我的控制器中。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T15:14:39.480

这可能是您的用户实体（缩写版本）的实体（和表单定义）：

```
namespace Application\Entity;
use Doctrine\ORM\Mapping as ORM;
use Zend\Form\Annotation as Form;

/**
 * @ORM\Entity
 * @ORM\Table(name="application_user")
 * @Form\Name("user")
 * @Form\Hydrator("Zend\Stdlib\Hydrator\ObjectProperty")
 */
class User
{

    /**
     * @var int
     * @ORM\Id @ORM\Column(name="id", type="integer")
     * @ORM\GeneratedValue
     * @Form\Exclude()
     */
    protected $id;

    /**
     * @var string
     * @ORM\Column(name="user_name", type="string", length=255, nullable=false)
     * @Form\Filter({"name":"StringTrim"})
     * @Form\Validator({"name":"StringLength", "options":{"min":1, "max":25}})
     * @Form\Validator({"name":"Regex", "options":{"pattern":"/^[a-zA-Z][a-zA-Z0-9_-]{0,24}$/"}})
     * @Form\Attributes({"type":"text"})
     * @Form\Options({"label":"Username:"})
     */
    protected $username;

    /**
     * @var string
     * @ORM\Column(name="email", type="string", length=90, unique=true)
     * @Form\Type("Zend\Form\Element\Email")
     * @Form\Options({"label":"Your email address:"})
     */
    protected $email;

} 
```

并使用这种形式：

```
use Zend\Form\Annotation\AnnotationBuilder;

$builder = new AnnotationBuilder();
$form    = $builder->createForm('Application\Entity\User');
// Also possible:
// $form = $builder->createForm(new Application\Entity\User()); 
```

因此构建器需要定义类的完全限定名称。您使用注释设置的名称是表单的名称，例如用于创建表单的 id 属性。

如果你有一个 use 语句，你也可以绑定命名空间：

```
use Zend\Form\Annotation\AnnotationBuilder;
use Application\Entity\User;

$builder = new AnnotationBuilder();
$form    = $builder->createForm('User');
// Also possible:
// $form = $builder->createForm(new User()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T17:26:32.623

有同样的问题。解决方案是令人费解的。我花了很长时间才知道。问题出在注释代码的第一行。

```
/** 
```

此行通常用于注释您的注释代码，但几乎所有人都将其留空。通常没有问题，但这会以某种方式导致表单注释出现问题。您应该添加一些注释、添加空格或将第一行代码向上移动。所以：

```
/** Some comment to make this annotation work
/** (<-- a space) 
```

或者这样开始：

```
/** @ORM\Column(type="string") 
```

不要问我为什么会这样，在网上某处找到了解决方案。据我了解，该错误已被报告。

# javascript - 关系解析查询返回错误响应

> ID：13974977
> 
> 赞同：0
> 
> 时间：2012-12-20T15:04:05.870
> 
> 标签：javascript, relational, parse-platform

我有一个[parse.js](https://www.parse.com/)查询，它返回表 (tableA) 中的所有行，它按预期工作；但我只希望返回的行包含指向另一个表（tableB）中的一行的指针，其中一个字段（'Amount'）大于指定的数字。查询布局如下：

```
var tableA = Parse.Object.extend('tableA');
var minSalary = 200;
var q = new Parse.Query(tableA);
q.include('tableB');
q.greaterThan('Amount',minSalary); 
```

如果我包含最后一行，我得到的结果是'0'。我已经尝试了所有方法，包括点表示法：`q.include('tableB.Amount')`，并且 tableA 中有几行应该被检索到。

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:57:10.787

最后一行，greaterThan，被应用于'tableA'。听起来您想将此应用于 tableB 中的对象。您想在此处使用 innerQuery 。

```
var tableA = Parse.Object.extend("tableA");
var tableB = Parse.Object.extend("tableB");

var innerQuery = new Parse.Query(tableB);
innerQuery.greaterThan("Amount", salary);

var query = new Parse.Query(tableA);
query.include("tableB");
query.matchesQuery("tableB", innerQuery); 
```

# ruby-on-rails - rails：使用 :order 对 has_many 进行排序由于时间戳排序而无法正常工作

> ID：13974982
> 
> 赞同：4
> 
> 时间：2012-12-20T15:04:28.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-list

我有一个 Rails 模型，假设用户与 Post 有很多关系。Post 包含一个名为 position 的属性，用于存储位置（acts_as_list gem）。位置存储用户帖子列表中的位置（顺序不是由于创建/修改帖子）。此外，帖子存储了时间戳（`t.timestamps`在迁移中）

所以我在 User.rb 中定义了以下内容：

```
has_many :post, :order => "position", :dependent => :destroy 
```

但是，当我这样做时`User.first.posts`，帖子不是按位置排序的。我已经检查过，正在查询的 sql 包含以下内容：

```
ORDER BY post.created_at DESC, position 
```

所以 created_at 仍在使用中。

如何按位置排序而不使用 created_at 属性？

提前致谢！

**解决方案** 我在 Post 中定义了一个默认范围，该范围正在创建不希望的订单。

问题解决了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:08:17.857

您可以使用[默认范围](http://apidock.com/rails/ActiveRecord/Base/default_scope/class)：

```
class Post < ActiveRecord::Base
  scope :by_position, order("position ASC")
  default_scope by_position
  #...
end 
```

然后`@user.posts`应该返回一个按位置（ASC）排序的列表。

此外，以下内容应该对您有用：（复数 on `post`）

```
has_many :posts, :dependent => :destroy, :order => "posts.position ASC" 
```

# php - 基于类别的时事通讯电子邮件？Magento CE 1/6/2

> ID：13974988
> 
> 赞同：1
> 
> 时间：2012-12-20T15:04:57.607
> 
> 标签：php, mysql, magento, magento-1.6

有没有人知道我如何根据客户订购的类别向客户发送时事通讯电子邮件？例如，我想每月向购买了检查手套的客户发送一封电子邮件，以补充他们的供应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:56:57.583

这是一种解决方法：

1）获取所有（最近的）订单

```
 $orders = Mage::getModel('sales/order')->getCollection()->addAttributeToFilter('created_at', '2012-04-16 15:56:33'); 
```

注意：替换`'2012-04-16 15:56:33'`为正确的日期和时间戳。

2) 获取产品的订单

```
foreach($orders as $order):
    // let's get some the order info
    $orderData = $order->getData();
    // extract the order ID from the order objecj (so we can load the whole order)
    $orderId = $orderData['entity_id'];
    // extract the customer's ID (so that we can find out customer's email)
    $customerId = $orderData['customer_id'];
    // load the customer by ID
    $customer = Mage::getModel('customer/address')->load($customerId)->getData();
    // get customer's email address
    $customerEmail = $customer['email'];
    // load the full order (so that we can get a list of product's ordered
    $fullOrder = Mage::getModel('sales/order')->load($orderId);
    // extract the products from the order
    $products = $fullOrder->getAllItems();
endforeach; 
```

3）找出产品来自哪个类别

```
foreach ($products as $product):
    // let's get an object with the ordered product's data
    $productInfo = $product->getData();
    // extract the product ID (so that we can load the product)
    $prodId = $productInfo['item_id'];
    // load the product
    $product = Mage::getModel('catalog/product')->load($prodId);
    // get all (names of) categories that this product is associated with
    $categories = $product->getCategoryCollection()->addAttributeToSelect('name');
endforeach; 
```

4）向这些客户发送特定模板（请参阅此问题的第一个答案中的代码）[在 Magento 中以编程方式发送电子邮件失败](https://stackoverflow.com/questions/5595202/sending-e-mail-programmatically-in-magento-is-failing)

希望这有帮助

# jsf - 可以在不按“enter”键的情况下为“p:inputText”执行“valueChangeListener”吗？

> ID：13974989
> 
> 赞同：5
> 
> 时间：2012-12-20T15:05:01.493
> 
> 标签：jsf, jsf-2, primefaces

我想在用户更改文本并且 inputText 失去焦点（onchange）时执行`valueChangeListener`。`p:inputText`这可能吗？现在它只在我按回车后执行。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T15:41:04.893

该`valueChangeListener`方法需要调用表单提交。这是服务器端事件，而不是客户端事件。只是更改和模糊输入默认情况下根本不会提交表单。带上一个`<p:ajax>`来做魔术。

```
<p:inputText value="#{bean.inputValue}" valueChangeListener="#{bean.inputChanged}">
    <p:ajax />
</p:inputText> 
```

但是，尽管[您没有说明您认为这是正确解决方案的具体功能需求，但](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)我只想提一下，`valueChangeListener`对于您心目中的工作而言，这往往是错误的工具。改为使用`<p:ajax listener>`。

```
<p:inputText value="#{bean.inputValue}">
    <p:ajax listener="#{bean.inputChanged}" />
</p:inputText> 
```

请注意，这将使得通过 EL 2.2 传递方法参数成为可能，这将立即回答[您的另一个问题（实际上很差）](https://stackoverflow.com/questions/13975026/possible-to-pass-pinputtext-parameters-via-f-param)可能存在的潜在功能需求。

```
<p:inputText value="#{bean.inputValue}">
    <p:ajax listener="#{bean.inputChanged('arg1', 'arg2')}" />
</p:inputText> 
```

另请注意，如果您实际上对输入的值感兴趣，这可能根本不是解决方案；您可以直接访问该`inputValue`属性。

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener)

# java - Java NIO 的另一个绊脚石

> ID：13974991
> 
> 赞同：1
> 
> 时间：2012-12-20T15:05:12.913
> 
> 标签：java, nio

蔚来的另一个绊脚石

我有一个小型服务器，它可以在 Windows 下运行，而不能在 Red Hat 下运行。这个想法是：

*   带有 ServerSocketChannel 和 Selector 的主线程
*   当它接受一个连接时，它会创建一个带有 SocketChannel 的事件
*   事件被提供给队列
*   每个 Worker 线程都有自己的 Selector 和 DB Connection
*   Worker 线程从 Queue 中获取 Event，在其中设置 Selector 和 DB Connection，并调用 Event 的 getProcessed 方法
*   事件读取 SocketChannel（总是很好），在 DB 中做一些事情（总是很好）并写入 SocketChannel（在 Windows 下工作，在 Red Hat 下不工作）

代码是：

```
public void processWriting()
throws Exception {
    sk = client.register(selector, SelectionKey.OP_WRITE);

    String s = "HTTP/1.1 301 Moved Permanently\r\n" +
    "Location: " + resolution +  "\r\n";

    writeBuffer = ByteBuffer.wrap(s.getBytes("US-ASCII"));

    LOGGER.trace("1\. limit::" + writeBuffer.limit());
    LOGGER.trace("1\. position::" + writeBuffer.position());
    LOGGER.trace("1\. remaining::" + writeBuffer.remaining());

    for (;;) {
        selector.select(500);
        // write once
        for (Iterator<SelectionKey> it = selector.selectedKeys().iterator();
                it.hasNext();) {
            SelectionKey key = it.next();
            it.remove();

            if (key.isValid() && key.isWritable()) {
                // write
                client.write(writeBuffer);
            }
        }

        // check all written out
        if (!writeBuffer.hasRemaining()) {
            break;
        }

        // check time
        if (params.getTimeout() < processingTime()) {
            break;
        }
    }

    LOGGER.trace("2\. limit::" + writeBuffer.limit());
    LOGGER.trace("2\. position::" + writeBuffer.position());
    LOGGER.trace("2\. remaining::" + writeBuffer.remaining());

    if (writeBuffer.hasRemaining()) {
        throw new Exception("writing failed");
    }
    writeBuffer = null;
} 
```

日志输出为：

```
2012-12-20 18:06:13,113 [TRACE] Thread-4:: bg.nalis.pidresolver.Event:: 1\. limit::137 
2012-12-20 18:06:13,113 [TRACE] Thread-4:: bg.nalis.pidresolver.Event:: 1\. position::0 
2012-12-20 18:06:13,113 [TRACE] Thread-4:: bg.nalis.pidresolver.Event:: 1\. remaining::137 
2012-12-20 18:06:13,113 [TRACE] Thread-4:: bg.nalis.pidresolver.Event:: 2\. limit::137 
2012-12-20 18:06:13,113 [TRACE] Thread-4:: bg.nalis.pidresolver.Event:: 2\. position::137 
2012-12-20 18:06:13,113 [TRACE] Thread-4:: bg.nalis.pidresolver.Event:: 2\. remaining::0 
```

我将不胜感激任何意见和建议。

# mono - 在 GTK# 小部件上设置字体

> ID：13974999
> 
> 赞同：1
> 
> 时间：2012-12-20T15:05:34.500
> 
> 标签：mono, monodevelop, gtk#

我想通过更改字体类型来更改按钮或菜单条目的样式。如何做到这一点，因为 GTK# 小部件上没有类似“Gtk.Button.Font”的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:41:55.173

使用[ModifyFont](http://docs.go-mono.com/index.aspx?link=M%3aGtk.Widget.ModifyFont%28Pango.FontDescription%29)方法。根据链接页面上的示例：

```
button1.ModifyFont(FontDescription.FromString("Courier 16")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T21:30:01.197

而不是`button1.ModifyFont`,`button1.Child.ModifyFont`在我的情况下工作。