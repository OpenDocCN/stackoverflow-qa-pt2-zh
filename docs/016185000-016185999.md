# StackOverflow 问答 16185000-16185999

# windows-mobile - 从 windows mobile 应用程序访问 Cloud sql server

> ID：16185004
> 
> 赞同：0
> 
> 时间：2013-04-24T06:37:08.500
> 
> 标签：windows-mobile, compact-framework, cloud

我开发了一个带有`SQL Compact Database`. 现在我想使用遥控器`Cloud server`。

我试过了，无法连接到服务器。 **应用程序错误说**，

> xxxxx.exe 中出现本机异常。选择退出，然后重新启动这个程序......
> 
> 在错误详细信息部分，
> 
> 异常代码：0xc0000005 异常地址：0x03fa5938 读取：0x00000000

我尝试过使用另一台远程服务器（不是云服务器），它运行良好。问题是连接到云服务器时。云服务器已启动并运行。

*我也在 Device Emulator 和 Windows mobile 6 中进行测试。*

# java - Java - 更好的模型来保存对象（集合）

> ID：16185005
> 
> 赞同：1
> 
> 时间：2013-04-24T06:37:09.160
> 
> 标签：java, collections

考虑以下情况

1）我需要将 Location 类的对象（在我的应用程序中定义）与所有用户（在我的应用程序中定义）对象一起保存为集合，如下所示

```
HashMap<Location, Collection<Person>> 
```

并且数据像下面一样存储在 HashMap 中（作为对象，我提到名称以进行解释）

```
Location1 - User1, User2, User3
Location2 - User2, User3
Location3 - User1 
```

现在在上面的示例中，在哈希图中，User1、User2 和 User3 的冗余副本存储在每个位置内。这是在集合中保存一对多关系数据的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:39:06.950

没有“冗余”。所有的 hashmap 存储都是对同一个对象的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:52:00.533

A`Person`是对对象的引用。当您将它传递给类似的方法时，`add()`或者`put()`您正在给它一个引用的副本（即使在 64 位 JVM 上通常也是 32 位）

这意味着您的收藏可以具有相同参考的“冗余”副本，但鉴于您希望在多个地方提供该参考，我看不出有解决办法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T06:48:50.933

包含在 Person1 中的信息仅存储一次，除非您执行了明确复制该对象的操作（例如，通过使用 clone() 方法，如果已实现）

通常，将像 person1 这样的对象添加到多个集合中不应使一个全新的对象与第一个对象相同并将其放入集合中。发生了什么是对保存在不同集合中的人员对象的多个*引用。*与整个新对象的大小相比，每个引用都很小，虽然您可能对同一个对象有多个引用，但由该 Person 对象管理的信息（例如姓名、电子邮件等）只存储一次。

因此：您对集合所做的一切都很好，它不会创建对象的多个副本。

（java中没有指针，但如果你曾经研究过一种允许它们的语言，这个想法是相似的，因为多个较小的指针可以指向一个大对象）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:43:20.863

There is no need of `HashMap`.You can have `User` contained in `Location` class as it suits your requirement perfectly.

```
public class Location {
    private Set<User> users = new HashSet<User>();

    public boolean addUser(User user) {
        return users.add(user);
    }

    public boolean remove(User user) {
        return users.remove(user);
    }

    public Set<User> getAll() {
        return Collections.unmodifiableSet(users);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T06:49:08.553

```
public class Location {
    private Set<User> users = new HashSet<User>();

    public boolean addUser(User user) {
        return users.add(user);
    }

    public boolean remove(User user) {
        return users.remove(user);
    }

    public Set<User> getAll() {
        return Collections.unmodifiableSet(users);
    }
} 
```

与 Amit 的回答相同，只需将 a`Set<User>`与您的`Location`. 然后，您应该另外使用 an`ArrayList<Location>`来存储您的所有`Locations`. 正如 Arjun 所指出的，没有冗余（重复的用户对象）。什么时候没有冗余？当每个`User`Object 只创建一次，然后添加到多个 Collections 中。这是因为对 的引用*实际上*`User`存储在 Collection 中。这就是 Java 中“按值传递引用”的含义。例如，在 List 的 add 方法中，您可能会调用`add(User)`，但 Java 在后台所做的是传递列表的引用（想想内存位置）的副本`User`反对列表。所以 List 实际上并不直接存储用户对象，但是，它位于内存中的某个地方。

# asp.net - 如何在水晶报表中使用聚合函数生成表格的列？

> ID：16185011
> 
> 赞同：0
> 
> 时间：2013-04-24T06:37:43.627
> 
> 标签：asp.net, c#-4.0, dataset, aggregate-functions, crystal-reports-2008

我想使用表格生成水晶报告。

该表有 4 列，其值是通过在另一个表上执行`SUM()`函数和`WHERE`子句生成的。

我怎样才能将这些`SUM()`字段作为列？

表的架构如下：

```
 MainTable(pk,Amount,Mode)
 DataTable(Column1,Column2,Column3,Column4) 
```

这里

```
Column1 = SUM(Amount) from MainTable WHERE Mode = 011
Column2 = SUM(Amount) from MainTable WHERE Mode = 012
Column2 = SUM(Amount) from MainTable WHERE Mode = 100
Column2 = SUM(Amount) from MainTable WHERE Mode = 030 
```

我不知道如何生成 DataTable 以便在 Crystal 报表中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:23:44.280

无需 2 生成表只需通过水晶报表交叉表向导。

# python - Word：使用 Python 删除表格和标题之间的行

> ID：16185014
> 
> 赞同：0
> 
> 时间：2013-04-24T06:37:54.253
> 
> 标签：python, ms-word, pywin32, win32com

我有一个场景，其中有一个像**“调用树：”**这样的标题/常量文本出现在整个 Word 文档中，然后有一些行，一旦行结束，就会有一个**Table**。所以我希望使用 python/win32 组件删除表格和标题/常量文本**“调用树：”之间的行。**

例如 ：

**输入是：**

```
...

Call Tree :

Line 1 ...

Line 2 ...

....

....

....

....

Line N ....

Table # 1

..... 
```

**输出是**（即表和“调用树”之间的所有行都被删除）：

```
...

Call Tree :

Table # 1

..... 
```

我不确定，是否有任何方法可以在常量文本（即“调用树”和表格）之间选择多行。我知道，可以使用以下方法选择行和删除：

```
..

    app = win32com.client.DispatchEx("Word.Application")
    app.Visible = 0
    app.DisplayAlerts = 0

    # select a Text
    app.Selection.Find.Execute("TEXT TO BE SELECTED")
    #  extend it to end
    app.Selection.EndKey(Unit=win32com.client.constants.wdLine,Extend=win32com.client.constants.wdExtend)

    # check what has been selected
    app.Selection.Range()

    # and then delete it
    app.Selection.Delete()

.. 
```

但我不确定，如何使用这个标准来选择这样的多行。

对此有任何想法/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:45:02.207

您可以在使用 MoveRight 和 EndKey 找到文本后遍历行，然后可以使用属性 Tables 测试选择是否为表格。有点像

```
import win32com.client as com
from win32com.client import constants as wcons

app = com.Dispatch('Word.Application')
# Find the text
app.Selection.Find.Execute('Call Tree',
        False, False, False, False, False,
        True, wcons.wdFindContinue, False,
        False,False,)
# Extend the selection to the end
app.Selection.EndKey(Unit=wcons.wdLine)
while True:
    # Move the selection to the next character
    app.Selection.MoveRight(Unit=wcons.wdCharacter, Count=1)
    # And Select the whole line
    app.Selection.EndKey(Unit=wcons.wdLine, Extend=wcons.wdExtend)
    # If I hit the table...
    if app.Selection.Tables.Count:
        print "Table found... Stop"
        # I leave the loop
        break
    # Otherwise delete the selection
    print "Deleting ...",app.Selection.Text
    app.Selection.Delete()
    # And delete the return
    app.Selection.TypeBackspace() 
```

我建议先尝试使用宏在 word 中执行您想要的操作（如果您不熟悉 VBA，请尝试记录宏），然后将代码转换为 Python。

# iphone - kCVReturnPixelBufferNotOpenGLCompatible 错误

> ID：16185027
> 
> 赞同：0
> 
> 时间：2013-04-24T06:38:44.363
> 
> 标签：iphone, ios

我正在获取视频帧并使用函数 CVPixelBufferCreateWithPlanarBytes() 从视频帧中提取的两个平面数组创建一个 PixelBuffer，我已经检查了从 CVPixelBufferRef pixelBuffer =CMSampleBufferGetImageBuffer(sampleBuffer) 生成的像素缓冲区，并且创建的像素缓冲区是相同的，但是当我创建使用 CVOpenGLESTextureCacheCreateTextureFromImage() 的纹理返回错误 -6683，请任何人帮我找出这里出了什么问题，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T06:43:14.747

我没有通过 CVPixelBufferCreateWithPlanarBytes() 创建 cvpixelbufferref，而是尝试通过 CVPixelBufferCreate() 创建它，然后像这样手动复制副本，

```
baseaddrY=CVPixelBufferGetBaseAddressOfPlane(pixelBuffer,0);
baseaddrUV=CVPixelBufferGetBaseAddressOfPlane(pixelBuffer,1);

memcpy(baseaddrY,dataY,sizeofY);
memcpy(baseaddrUV,dataUV,sizeofUV); 
```

这将创建 cvpixelbufferref。这是安东对问题的回答，[CVOpenGLESTextureCacheCreateTextureFromImage 返回错误 6683](https://stackoverflow.com/questions/12646273/cvopenglestexturecachecreatetexturefromimage-returns-error-6683)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:54:27.133

根据文档，此错误的原因是：

“由于不支持的缓冲区大小、像素格式或属性，像素缓冲区与 OpenGL 不兼容。”

所以这意味着两件事中的一件：

1：当您设置纹理缓冲区时，您使用的是 OpenGLES 不支持的像素格式，调用时：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, w, h, 0, GL_BGRA_EXT, GL_UNSIGNED_BYTE, data); 
```

2：如果我没记错的话，是因为视频帧图像格式与 OpenGLES 实现不兼容。如果它来自设备相机，我相信它的 YCbCr 并且必须转换为 RGB / RGBA 的图像。

请记住，对于各种图像格式，每个像素也有不同的位数。所以检查iOS支持哪些我认为大多数来自Khronos规范，我主要使用RGBA_8888来保证质量）。尽管上面的示例适用于我在不使用 PVRTC 时倾向于使用的任何 PNG

这显示了如何获取帧并使用 CGImage 将其转换为 iOS 上的 OpenGLES 友好格式，您可以将其用作纹理。

[在纹理中转换 UIImage](https://stackoverflow.com/questions/14362868/convert-an-uiimage-in-a-texture)

# c++ - 为什么子类的非覆盖实例方法中的“this”类型是父类型？

> ID：16185028
> 
> 赞同：0
> 
> 时间：2013-04-24T06:38:48.700
> 
> 标签：c++, inheritance

我的 C++ 有点生疏，我对以下示例感到困惑。这个例子很短，所以我认为它会比我的解释更清楚，这里是：

```
template <class T>
struct Table
{
    T getCell()
    {
        T c;
        c.setTable(this);
    }
};

struct MyTable;

struct Cell
{
    void setTable(MyTable *tbl)
    {

    }
};

struct MyTable : public Table<Cell>
{

};

int main(int argc, char *argv[])
{

    MyTable t;
    t.getCell();
} 
```

请参阅[http://ideone.com/1MhVNc](http://ideone.com/1MhVNc)进行测试，编译器说：

```
prog.cpp: In instantiation of ‘T Table<T>::getCell() [with T = Cell]’:
prog.cpp:30:15:   required from here
prog.cpp:7:9: error: invalid conversion from ‘Table<Cell>* const’ to ‘MyTable*’ [-fpermissive]
prog.cpp:15:10: error:   initializing argument 1 of ‘void Cell::setTable(MyTable*)’ [-fpermissive]
prog.cpp:8:5: warning: no return statement in function returning non-void [-Wreturn-type] 
```

我会天真地认为，由于它是调用**getCell的***MyTable*实例，因此**getCell**调用上下文中的“this”将具有*MyTable*类型。

 *****显然不是这样，这是为什么呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T06:44:38.367

没有。`static type`确实是`Table<Cell>`。由于您没有虚拟方法，因此您甚至无法访问`dynamic type`.`MyTable`

考虑一下：基类将为直接构造或作为派生类型的所有实例`Table<Cell>`生成相同的代码。`getCell`那么它如何取决于类型`MyTable`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:47:53.377

> 我会天真地认为，因为它是调用 getCell 的 MyTable 实例，所以在 getCell 调用的上下文中的“this”将具有 MyTable 类型。

编译器应该如何知道`MyTable`它何时编译`Table`？

> 显然不是这样，这是为什么呢？

因为不可能。

`this`是封闭类的类型。*****

# reporting-services - Servicestack 和 Sql Server 报告服务和快照

> ID：16185031
> 
> 赞同：1
> 
> 时间：2013-04-24T06:39:02.407
> 
> 标签：reporting-services, servicestack, snapshot

我正在研究将 ssrs 与 servicestack 集成，但由于我使用的是新的 razor 版本，因此在我的项目中没有对任何 asp.net 或 mvc 程序集的引用，因此无法在 aspx 文件中托管，并且我想保持这种状态。如果可能的话，我还希望避免部署到专用的 ssrs 报告服务器。

我突然想到，在某些情况下（缺少视图等）由 servicestack 呈现的快照视图可能会满足所需的角色，并且想知道是否有任何方法可以自定义呈现的 html？走这条路有意义吗？如果我只是花时间为我想要报告的每个实体（以及它们的所有附属子实体）创建自定义视图会更好吗？

# c# - 日期时间本地化。任何标准/最佳实践

> ID：16185034
> 
> 赞同：2
> 
> 时间：2013-04-24T06:39:07.437
> 
> 标签：c#, asp.net-mvc, datetime, localization, timezone

我唯一知道的是，DateTime 应始终以 UTC 存储，但在显示或获取输入时，它必须是登录用户的本地时间。

这是为了缓解时区问题。

任何标准/最佳实践，我必须触及已经开发的代码库的最小部分？

在收到请求时，我可以使用 ModelBinders (Asp.Net MVC)。但是我应该拦截什么来修改 DateTime 类型，同时呈现响应？

任何帮助将不胜感激 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:04:14.427

如果您的系统有用户，一个好主意是针对这些用户设置文化代码。

这样，在您的基本控制器上，您可以覆盖执行的操作并在线程上设置用户的文化。就像是：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
        if (currentUser != null) //user your user object
        {
            Thread.CurrentThread.CurrentCulture = new CultureInfo(currentUser.Culture);
            Thread.CurrentThread.CurrentUICulture = new CultureInfo(currentUser.Culture);
        }
        else
        {
            Thread.CurrentThread.CurrentCulture = new CultureInfo("en-GB");
            Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-GB");
        }
} 
```

然后，每当您使用`DateTime`对象时，都可以使用[`ToShortDateString`](http://msdn.microsoft.com/en-gb/library/system.datetime.toshortdatestring.aspx)：

```
string localistedDate = yourDate.ToShortDateString(); 
```

或者如果你不想要短格式，你可以使用`ToString`你自己的格式，在线程上传递文化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:39:10.890

由于您要存储 UTC 时间，因此您还需要使用`TimeZoneInfo`类或[NodaTime](https://code.google.com/p/noda-time/)将其转换为用户时区，具体取决于您拥有的时区信息类型。

根据您的方案，您可能希望使用标准 IANA/Olson 时区数据库，而不是 Microsoft Windows 数据库。有关详细信息，请参阅[TimeZone 标记 wiki](https://stackoverflow.com/tags/timezone/info)。

# sql-server - 关键字“VIEW”附近的语法不正确

> ID：16185036
> 
> 赞同：4
> 
> 时间：2013-04-24T06:39:29.627
> 
> 标签：sql-server, sql-server-2005

当我运行以下书面程序时，出现以下错误。这有什么问题？

**错误 ：**

> 消息 156，级别 15，状态 1，过程 tbv21Setup，第 11 行关键字“VIEW”附近的语法不正确。

**

```
CREATE PROCEDURE tbv21Setup

AS
BEGIN

    CREATE VIEW Cust_Address_View AS
        SELECT customer.individual_id   individual_id,
          customer.tb_customer_id   customer_id,
          customer.customer_category_lkp    customer_category_lkp,
          ADDRESS.postal_code   postal_code
        FROM CUSTOMER
        INNER JOIN INDIVIDUAL
        ON (CUSTOMER.individual_id = INDIVIDUAL.individual_id)
        JOIN
          (SELECT address_id ,
            a.individual_id ,
            postal_code ,
            obsolete_flag ,
            tb_modified_date
          FROM address a
          INNER JOIN
            (SELECT individual_id,
              MAX(ISNULL((tb_modified_date),('01/01/1900'))) AS max_tb_modified_date
            FROM ADDRESS
            WHERE obsolete_flag = 0
            GROUP BY individual_id
            ) AS xa
          ON (xa.individual_id                   = a.individual_id
          AND xa.max_tb_modified_date            = ISNULL((a.tb_modified_date),('01/01/1900')))
          WHERE a.obsolete_flag                  = 0
          ) AS ADDRESS ON (ADDRESS.individual_id = INDIVIDUAL.individual_id)
        AND customer.customer_category_lkp       =
          (SELECT lookup_id
          FROM lookup
          WHERE lookup_category_name = 'customer_category'
          AND code_string            ='prospect'
          )
        AND customer.obsolete_flag   =0
        AND ADDRESS.postal_code NOT IN ('UNKNOWN','unknown','U','u',' ','');

    ALTER TABLE tb_customer_attribute 
    ADD  tb_customer_attribute_id UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
                obsolete_flag int,
                revision_number int;

    CREATE TABLE tb_comm_hist_xfer (
        tb_comm_hist_xfer_id binary(16) NOT NULL,
        tb_old_customer_id int NOT NULL,
        tb_customer_id int NULL,
        date_entered datetime NOT NULL
    );

    --Logger table
    CREATE TABLE TBLogger (logDate DATETIME, logSQL VARCHAR(MAX), logRows INT, errKode INT);

    --Create a parameter table in CRB/STAGE database which will hold a row for crb/stage db prefix.
    CREATE TABLE crb_parameter (stgdb_prefix VARCHAR(255));

    INSERT INTO crb_parameter values ('tommydev1.dbo');
    --uncomment the below line and comment the above line in PRODUCTION
    --INSERT INTO crb_parameter values ('tb_stage.dbo');

END 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T06:44:49.647

无法在 sp 中创建 DDL，只能批量创建。否则尝试动态 SQL -

```
CREATE PROCEDURE tbv21Setup

AS
BEGIN

    EXEC sp_executesql N'

    CREATE VIEW Cust_Address_View AS
        SELECT customer.individual_id   individual_id,
          customer.tb_customer_id   customer_id,
          customer.customer_category_lkp    customer_category_lkp,
          ADDRESS.postal_code   postal_code
        FROM CUSTOMER
        INNER JOIN INDIVIDUAL
        ON (CUSTOMER.individual_id = INDIVIDUAL.individual_id)
        JOIN
          (SELECT address_id ,
            a.individual_id ,
            postal_code ,
            obsolete_flag ,
            tb_modified_date
          FROM address a
          INNER JOIN
            (SELECT individual_id,
              MAX(ISNULL((tb_modified_date),(''01/01/1900''))) AS max_tb_modified_date
            FROM ADDRESS
            WHERE obsolete_flag = 0
            GROUP BY individual_id
            ) AS xa
          ON (xa.individual_id                   = a.individual_id
          AND xa.max_tb_modified_date            = ISNULL((a.tb_modified_date),(''01/01/1900'')))
          WHERE a.obsolete_flag                  = 0
          ) AS ADDRESS ON (ADDRESS.individual_id = INDIVIDUAL.individual_id)
        AND customer.customer_category_lkp       =
          (SELECT lookup_id
          FROM lookup
          WHERE lookup_category_name = ''customer_category''
          AND code_string            =''prospect''
          )
        AND customer.obsolete_flag   =0
        AND ADDRESS.postal_code NOT IN (''UNKNOWN'',''unknown'',''U'',''u'','' '','''');'

EXEC sp_executesql N'

    ALTER TABLE tb_customer_attribute 
    ADD  tb_customer_attribute_id UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
                obsolete_flag int,
                revision_number int;

    CREATE TABLE tb_comm_hist_xfer (
        tb_comm_hist_xfer_id binary(16) NOT NULL,
        tb_old_customer_id int NOT NULL,
        tb_customer_id int NULL,
        date_entered datetime NOT NULL
    );

    CREATE TABLE TBLogger (logDate DATETIME, logSQL VARCHAR(MAX), logRows INT, errKode INT);

    CREATE TABLE crb_parameter (stgdb_prefix VARCHAR(255));

    INSERT INTO crb_parameter VALUES (''tommydev1.dbo'');'

END 
```

**更新：**

```
CREATE PROCEDURE tbv21Setup

AS
BEGIN

    EXEC sp_executesql N'

    IF EXISTS(
        SELECT 1 
        FROM dbo.sysobjects 
        WHERE id = OBJECT_ID(''dbo.Cust_Address_View'')
    ) DROP VIEW dbo.Cust_Address_View;

    CREATE VIEW dbo.Cust_Address_View AS
        SELECT customer.individual_id   individual_id,
          customer.tb_customer_id   customer_id,
          customer.customer_category_lkp    customer_category_lkp,
          ADDRESS.postal_code   postal_code
        FROM CUSTOMER
        INNER JOIN INDIVIDUAL
        ON (CUSTOMER.individual_id = INDIVIDUAL.individual_id)
        JOIN
          (SELECT address_id ,
            a.individual_id ,
            postal_code ,
            obsolete_flag ,
            tb_modified_date
          FROM address a
          INNER JOIN
            (SELECT individual_id,
              MAX(ISNULL((tb_modified_date),(''01/01/1900''))) AS max_tb_modified_date
            FROM ADDRESS
            WHERE obsolete_flag = 0
            GROUP BY individual_id
            ) AS xa
          ON (xa.individual_id                   = a.individual_id
          AND xa.max_tb_modified_date            = ISNULL((a.tb_modified_date),(''01/01/1900'')))
          WHERE a.obsolete_flag                  = 0
          ) AS ADDRESS ON (ADDRESS.individual_id = INDIVIDUAL.individual_id)
        AND customer.customer_category_lkp       =
          (SELECT lookup_id
          FROM lookup
          WHERE lookup_category_name = ''customer_category''
          AND code_string            =''prospect''
          )
        AND customer.obsolete_flag   =0
        AND ADDRESS.postal_code NOT IN (''UNKNOWN'',''unknown'',''U'',''u'','' '','''');'

EXEC sp_executesql N'

    ALTER TABLE dbo.tb_customer_attribute 
    ADD  tb_customer_attribute_id UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
                obsolete_flag int,
                revision_number INT;

    IF EXISTS(
        SELECT 1 
        FROM dbo.sysobjects 
        WHERE id = OBJECT_ID(''dbo.tb_comm_hist_xfer'')
    ) DROP TABLE dbo.tb_comm_hist_xfer;

    CREATE TABLE dbo.tb_comm_hist_xfer (
        tb_comm_hist_xfer_id binary(16) NOT NULL,
        tb_old_customer_id int NOT NULL,
        tb_customer_id int NULL,
        date_entered datetime NOT NULL
    );

    IF EXISTS(
        SELECT 1 
        FROM dbo.sysobjects 
        WHERE id = OBJECT_ID(''dbo.TBLogger'')
    ) DROP TABLE dbo.TBLogger;

    CREATE TABLE dbo.TBLogger (logDate DATETIME, logSQL VARCHAR(MAX), logRows INT, errKode INT);

    IF EXISTS(
        SELECT 1 
        FROM dbo.sysobjects 
        WHERE id = OBJECT_ID(''dbo.crb_parameter'')
    ) DROP TABLE dbo.crb_parameter;

    CREATE TABLE dbo.crb_parameter (stgdb_prefix VARCHAR(255));

    INSERT INTO dbo.crb_parameter VALUES (''tommydev1.dbo'');'

END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:50:10.707

提示：直接创建视图而不是使用存储过程。

[使用存储过程创建视图](https://stackoverflow.com/questions/7712702/creating-a-view-using-stored-procedure)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:41:02.190

您不能在过程中创建视图。

所以你可以先单独创建一个视图，如下所示：

```
CREATE VIEW Cust_Address_View AS
        SELECT customer.individual_id   individual_id,
          customer.tb_customer_id   customer_id,
          customer.customer_category_lkp    customer_category_lkp,
          ADDRESS.postal_code   postal_code
        FROM CUSTOMER
        INNER JOIN INDIVIDUAL
        ON (CUSTOMER.individual_id = INDIVIDUAL.individual_id)
        JOIN
          (SELECT address_id ,
            a.individual_id ,
            postal_code ,
            obsolete_flag ,
            tb_modified_date
          FROM address a
          INNER JOIN
            (SELECT individual_id,
              MAX(ISNULL((tb_modified_date),('01/01/1900'))) AS max_tb_modified_date
            FROM ADDRESS
            WHERE obsolete_flag = 0
            GROUP BY individual_id
            ) AS xa
          ON (xa.individual_id                   = a.individual_id
          AND xa.max_tb_modified_date            = ISNULL((a.tb_modified_date),('01/01/1900')))
          WHERE a.obsolete_flag                  = 0
          ) AS ADDRESS ON (ADDRESS.individual_id = INDIVIDUAL.individual_id)
        AND customer.customer_category_lkp       =
          (SELECT lookup_id
          FROM lookup
          WHERE lookup_category_name = 'customer_category'
          AND code_string            ='prospect'
          )
        AND customer.obsolete_flag   =0
        AND ADDRESS.postal_code NOT IN ('UNKNOWN','unknown','U','u',' ',''); 
```

然后根据您的要求在程序中使用此视图

或使用动态 SQL：

```
CREATE PROCEDURE tbv21Setup

AS
BEGIN

    EXEC sp_executesql N'

    CREATE VIEW Cust_Address_View AS
        SELECT customer.individual_id   individual_id,
          customer.tb_customer_id   customer_id,
          customer.customer_category_lkp    customer_category_lkp,
          ADDRESS.postal_code   postal_code
        FROM CUSTOMER
        INNER JOIN INDIVIDUAL
        ON (CUSTOMER.individual_id = INDIVIDUAL.individual_id)
        JOIN
          (SELECT address_id ,
            a.individual_id ,
            postal_code ,
            obsolete_flag ,
            tb_modified_date
          FROM address a
          INNER JOIN
            (SELECT individual_id,
              MAX(ISNULL((tb_modified_date),(''01/01/1900''))) AS max_tb_modified_date
            FROM ADDRESS
            WHERE obsolete_flag = 0
            GROUP BY individual_id
            ) AS xa
          ON (xa.individual_id                   = a.individual_id
          AND xa.max_tb_modified_date            = ISNULL((a.tb_modified_date),(''01/01/1900'')))
          WHERE a.obsolete_flag                  = 0
          ) AS ADDRESS ON (ADDRESS.individual_id = INDIVIDUAL.individual_id)
        AND customer.customer_category_lkp       =
          (SELECT lookup_id
          FROM lookup
          WHERE lookup_category_name = ''customer_category''
          AND code_string            =''prospect''
          )
        AND customer.obsolete_flag   =0
        AND ADDRESS.postal_code NOT IN (''UNKNOWN'',''unknown'',''U'',''u'','' '','''');'

IF EXISTS(select * from sys.objects where name='Cust_Address_View')
drop view Cust_Address_View 
EXEC sp_executesql N'

    ALTER TABLE tb_customer_attribute 
    ADD  tb_customer_attribute_id UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
                obsolete_flag int,
                revision_number int;

    CREATE TABLE tb_comm_hist_xfer (
        tb_comm_hist_xfer_id binary(16) NOT NULL,
        tb_old_customer_id int NOT NULL,
        tb_customer_id int NULL,
        date_entered datetime NOT NULL
    );

    CREATE TABLE TBLogger (logDate DATETIME, logSQL VARCHAR(MAX), logRows INT, errKode INT);

    CREATE TABLE crb_parameter (stgdb_prefix VARCHAR(255));

    INSERT INTO crb_parameter VALUES (''tommydev1.dbo'');'

END 
```

# android - Kindle Fire HD 上用于图像的 ACTION_GET_CONTENT 使用文件方案而不是内容方案返回数据

> ID：16185037
> 
> 赞同：2
> 
> 时间：2013-04-24T06:39:38.617
> 
> 标签：android, kindle-fire

我面临一个奇怪的问题。我的应用程序中有一个表单，用户将在其中输入一些详细信息，然后选择图像。按下提交后，将触发电子邮件意图，该意图将创建一个电子邮件草稿，其中用户的输入粘贴在邮件正文中，并将他选择的图像附加到电子邮件中。

我有一些适用于 Kindle Fire 1st Gen 以及其他 Android 设备的代码。但同样不适用于 Fire HD-7。

这是触发图像选择意图的代码。

`Intent intent = new Intent(); intent.setType("image/*"); intent.setAction(Intent.ACTION_GET_CONTENT); intent.addCategory(Intent.CATEGORY_OPENABLE); startActivityForResult(Intent.createChooser(intent, "Select Media"), SELECT_MEDIA);`

在 1st Gen Fire 这工作正常并返回： **content:///mnt/sdcard/Download/naturewallpapers252862529.jpg**

但在 Fire HD-7 上，它返回： **file:///mnt/sdcard/Android/data/com.amazon.photos/files/Pictures/Shared/naturewallpapers252862529 (7).jpg**

这是最令人恼火的事实：

案例 1）在 HD-7 上，如果我从图库中选择图像，它会在“ **/mnt/sdcard/Android/data/com.amazon.photos/files/Pictures/Shared/** ”中创建所选图像的副本并返回此路径这不适用于我的代码来创建带有附件的电子邮件意图。此外，每次我选择相同的图像时，它都会为相同的图像创建一个带有 (1)、(2) 等的新副本。

案例 2）在 HD-7 上，如果我从**ES 文件资源管理器**中选择图像，那么一切正常。它返回**content:///mnt/sdcard/Download/naturewallpapers252862529.jpg** uri，其中 content:// 方案与从图库中选择的 file:// 相对。

我真的没有任何线索来解决这个问题。挣扎了一个多星期了。

任何帮助，任何线索都非常感谢。谢谢，约格什。

# php - 使用 GET 将 PHP 变量传递到另一个 PHP 页面

> ID：16185041
> 
> 赞同：-1
> 
> 时间：2013-04-24T06:39:53.687
> 
> 标签：php, javascript

这里可能有一些很简单的东西我错过了，但我似乎无法弄清楚。

我正在尝试使用 GET 将 PHP 变量“$session”从一个 PHP 页面传递到另一个 PHP 页面。GET 显示在新 URL 中，但该值未传递到页面，以便我可以检索它。下面是相关代码。

在 Index.php 主页面上。

```
<div class="mapgroup">
  <table>
    <tr>
       <td></td>
       <td id="refreshKML" ></td>
       <?php echo "<td><a href='3D-Earth.php?session=$session' title='Full Size Google Earth' target='_blank' >Click here</a> for full size Google Earth</td>"; ?>
    </tr>
  </table>
  <div id="map3d"></div>
</div> 
```

使用 GET 将“$session”变量传递给 3D-Earth.php，并且正确的值显示在 URL 中。但是，当我尝试使用以下方法检索变量时：

```
<?php
  $session = $_GET["session"];
?> 
```

然后尝试创建一个javascript变量：

```
<script>
  var session = <?php echo $session; ?>;
</script> 
```

我将使用它来连接以下字符串：

```
var href = 'http://localhost/satellites/' + session + '/master.kml'; 
```

什么都没有通过。

我感谢任何人可以提供的任何帮助。提前致谢。

此外，我在 3D-Earth.php 页面底部插入了以下代码，以验证 GET 是否通过。

```
 <div>
    <table><p style='color:white;' >Hello " <?php echo $session; ?> " world!</p></table>
  </div> 
```

结果是一个空字符串，显示： Hello " " World! 有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:40:57.933

试试这样：

```
var session = '<?php echo $session; ?>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:15:36.053

我建议停止使用可能与 php 保留字冲突的名称，如“会话”。也许这不是这里的问题，但避免了许多其他问题和困惑。

同样在javascript中将回声放在引号中：

```
 var session = '<?php echo $session; ?>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:22:11.217

你试过把这段代码

```
 <script>
  var session = <?php echo $session; ?>;
  </script> 
```

在此代码下？？

```
 <?php
  $session = $_GET["session"];
 ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:41:33.417

You should put a single quotes around your variable like this

```
var session = '<?php echo $session; ?>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T06:46:30.050

正如上面的答案所说，当你想在javascript中使用它时，你必须在php语句周围加上单引号。所以 var session = 'php 语句'; 是正确的方法。

# python - 在 Python 中使用正则表达式搜索并返回一个值

> ID：16185042
> 
> 赞同：1
> 
> 时间：2013-04-24T06:40:05.697
> 
> 标签：python, regex

我正在尝试编写一个程序来扫描视频，找到音频和字幕可用的语言，然后将这些发现用于输入。

目前，我正在用这个生成输出：

```
with open('output.txt', 'wt') as output_f:
    p = subprocess.Popen(command, stdout=output_f, stderr=output_f) 
```

这是我需要的扫描文本。

```
 + audio tracks:
    + 1, Japanese (aac) (2.0 ch) (iso639-2: jpn)
  + subtitle tracks:
    + 1, English (iso639-2: eng) (Text)(SSA) 
```

所以我需要找出日语前面的数字，但只有在“音轨”之后

同样，我需要找到英文前面的数字，但只有在“字幕轨道”之后

我很确定我需要使用正则表达式来做到这一点，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:58:55.290

您在这里并不真的需要正则表达式 - 无论如何，对我来说使用其中一个似乎太复杂了。

这是一些常规解析：

```
with open('output.txt', 'wt') as output_f:
    parseTracks = False
    lines = tuple(output_f)
    for line in lines:
        if 'audio tracks' in line:
            parseTracks = True
        if parseTracks:
            if 'Japanese' in line:
                theNumber = int(''.join([char for char in line if char in '1234567890'])) 
```

字幕也是一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:56:33.383

你可以这样做：

```
>>> import re
>>> audio_regex = re.compile(r'\+ audio tracks:\n\s*\+ (?P<number>\d+), (?P<lang>\w+)')
>>> subtitle_regex = re.compile(r'\+ subtitle tracks:\n\s*\+ (?P<number>\d+), (?P<lang>\w+)')
>>> text = '''
...   + audio tracks:
...     + 1, Japanese (aac) (2.0 ch) (iso639-2: jpn)
...   + subtitle tracks:
...     + 1, English (iso639-2: eng) (Text)(SSA)
... '''
>>> match = audio_regex.search(text)  #find the first match
>>> match.group('number')
'1'
>>> match.group('lang')
'Japanese'
>>> audio_regex.findall(text)   #find all matches
[('1', 'Japanese')]
>>> subtitle_regex.findall(text)
[('1', 'English')] 
```

根据文件的格式调整上面的正则表达式或多或少灵活（例如，如果不是单个空格，您可以有更多空格，您可以替换空格`\s+`以匹配一个或多个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:55:39.553

这将起作用（与 .findall() 一起使用）：

```
(?<=subtitle tracks:\n)\s+\+\s(\d+)
(?<=audio tracks:\n)\s+\+\s(\d+) 
```

检查某个前缀（包括换行符），然后使用空格并选择“+”后的数字

# google-chrome - 使用 chrome 扩展获取所有窗口中所有选项卡的 url

> ID：16185044
> 
> 赞同：22
> 
> 时间：2013-04-24T06:40:15.520
> 
> 标签：google-chrome, url, google-chrome-extension, tabs

chrome扩展是否可以使用chrome扩展获取所有选项卡中的所有URL？

我使用此代码获得了当前选项卡的 url

```
chrome.tabs.getSelected(null, function(tab) {
    tabUrl = tab.url;
    alert(tabUrl);
}); 
```

我们需要 manifest.json 文件中的以下权限

```
"permissions": [
    "tabs"
] 
```

我的问题是找出所有标签中的 URL 吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-24T07:01:02.607

你可以这样做：

```
chrome.windows.getAll({populate:true},function(windows){
  windows.forEach(function(window){
    window.tabs.forEach(function(tab){
      //collect all of the urls here, I will just log them instead
      console.log(tab.url);
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-17T15:27:25.897

使用[chrome.tabs.query](https://developer.chrome.com/extensions/tabs#method-query)方法，你也可以简单地做，

```
 chrome.tabs.query({},function(tabs){     
    console.log("\n/////////////////////\n");
    tabs.forEach(function(tab){
      console.log(tab.url);
    });
 }); 
```

# java - 使用Java读取excel文件

> ID：16185047
> 
> 赞同：1
> 
> 时间：2013-04-24T06:40:23.520
> 
> 标签：java, excel, odbc

我正在尝试使用 Java API 阅读 excel。它正在抛出错误。

代码如下 -

```
 Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
      conn = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Excel Driver (*.xls)};DBQ=D:\\SelFrame\\Business_Script\\Controller.xls");   
      stmt = conn.createStatement(); 
```

错误如下——

```
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified
java.lang.NullPointerException
java.lang.NullPointerException 
```

环境使用 -

```
JDK 1.7 (64 bit)
O/S = Win 7 (64 bit)
MS office = 32 bit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:53:23.920

将您的连接字符串更改为以下内容。

```
conn = DriverManager.getConnection("jdbc:odbc:DBQ"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:33:26.117

使用 Apache POI - Microsoft 文档的 Java API。它节省了我一天前的时间。

[http://poi.apache.org/](http://poi.apache.org/)

检查这篇文章：http: [//viralpatel.net/blogs/java-read-write-excel-file-apache-poi/](http://viralpatel.net/blogs/java-read-write-excel-file-apache-poi/)

# iphone - 在显示之前获取键盘的大小

> ID：16185051
> 
> 赞同：1
> 
> 时间：2013-04-24T06:40:37.270
> 
> 标签：iphone, ios, objective-c

我想得到键盘的大小，我这样做如下：

```
- (void)viewDidLoad
{
    ....

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:)  name:UIKeyboardWillShowNotification object:nil];

    ....
}

//I can get the size here
- (void)keyboardWillShow:(NSNotification *)notification 
{

    NSDictionary *userInfo = [notification userInfo];
    NSValue* aValue = [userInfo objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardRect = [aValue CGRectValue];
} 
```

但是现在，我想在显示键盘之前获取大小（在调用“keyboardWillShow”方法之前）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:55:33.867

实际上`- (void)keyboardWillShow:(NSNotification *)notification;`方法在键盘显示之前被触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:54:21.283

正如您从[此处](https://stackoverflow.com/questions/4213878/what-is-the-height-of-ipads-onscreen-keyboard)的一个答案中看到的那样，这实际上取决于键盘的类型以及您所使用的设备。您还应该记住，将来键盘可能会发生变化，因此您应该依靠传递给它的字典来`NSNotification`确定它的确切大小。

# vb.net - .NET 设计器在继承的控件中将阴影属性设为只读

> ID：16185058
> 
> 赞同：2
> 
> 时间：2013-04-24T06:40:55.120
> 
> 标签：vb.net, winforms, controls, overriding

我正在尝试创建自定义控件来为应用程序的设计提供一些一致性。但是，当我使用只读的替代方法隐藏属性时，我会在构建时遇到设计器错误。现在我可以删除设计器文件中有问题的代码行并继续构建和运行我的应用程序，但首先这很烦人，其次它告诉我我一定做错了什么！

这是一个覆盖 datagridview 的控件示例

```
Class standardDataGridView
Inherits DataGridView

Public Sub New()
    MyBase.New()
    Me.RowHeadersVisible = False
    MyBase.SelectionMode = DataGridViewSelectionMode.FullRowSelect
    MyBase.MultiSelect = False
    Me.ReadOnly = True
    Me.BackgroundColor = Color.White
    Me.AllowUserToDeleteRows = False
    Me.AllowUserToResizeRows = False
    Me.AllowUserToAddRows = False
End Sub

Public Shadows ReadOnly Property SelectionMode As DataGridViewSelectionMode
    Get
        Return MyBase.SelectionMode
    End Get
End Property

Public Shadows ReadOnly Property MultiSelect As Boolean
    Get
        Return MyBase.MultiSelect
    End Get
End Property

End Class 
```

在将其中一个控件添加到窗体后或更改任何属性后的第一次构建中，Visual Studio 会将以下几行添加到设计器文件中：

```
Me.standardDataGridView1.MultiSelect = False
Me.standardDataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect 
```

这会导致以下构建错误

```
Property 'MultiSelect' is 'ReadOnly'.
Property 'SelectionMode' is 'ReadOnly' 
```

正如我所说的......我可以删除 Visual Stuido 添加的行，然后继续，但是我哪里出了问题来得到这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:56:53.320

尝试告诉表单设计器不要序列化这些属性：

```
Imports System.ComponentModel

<DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)> _
Public Shadows ReadOnly Property SelectionMode As DataGridViewSelectionMode
  Get
    Return MyBase.SelectionMode
  End Get
End Property

<DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)> _
Public Shadows ReadOnly Property MultiSelect As Boolean
  Get
    Return MyBase.MultiSelect
  End Get
End Property 
```

确保重建您的解决方案。

# php - Facebook Graph API PHP 以页面形式对页面上的帖子发表评论

> ID：16185062
> 
> 赞同：3
> 
> 时间：2013-04-24T06:41:05.260
> 
> 标签：php, facebook, facebook-graph-api, facebook-comments

我正在使用下面的代码作为页面发布到我的 Facebook 页面

```
$post_id = $facebook->api("/$page_id/feed","post",$args); 
```

我想对我创建的帖子发表评论。我不知道该怎么做。但是根据一些研究，我尝试了下面的代码，但没有成功。

```
$comment_id = $facebook->api("/$post_id/comments?message='This is m message'"); 
```

**$comment_id**的**echo**或**print_r**不会返回任何内容。

 **我怎样才能完成它，即使用 PHP 的 Facebook 图形 API 在我的 Facebook 页面上发布评论？请引导我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:46:54.980

试试这样的，

```
$facebook ->api('/'.$post_id.'/comments', 
 'post', 
    array(
      'access_token' => $your_access_token_variable,
      'message' => 'Your message',
    )
); 
```**

# android - 从左到右和从右到左滑动图像

> ID：16185065
> 
> 赞同：3
> 
> 时间：2013-04-24T06:41:25.003
> 
> 标签：android

我正在开发一个应用程序，我想在其中添加可以从左到右和从右到左滑动的图像，如下图所示。那个内部的白色游戏图像应该从左到右移动，反之亦然。

![在此处输入图像描述](https://i.stack.imgur.com/icfsZ.png)

到目前为止我所做的是，我可以将单个图像从左向右移动，反之亦然，但我想设置背景图像，就像上面的圆形黑色背景一样。

这是我的代码：

```
imageView.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        int eid = event.getAction();
        switch (eid) {
        case MotionEvent.ACTION_MOVE:

            RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) imageView.getLayoutParams();
            int x = (int) event.getRawX();
            mParams.leftMargin = x - 50;
            imageView.setLayoutParams(mParams);

            break;

        default:
            break;
        }
        return true;
    }
}); 
```

**编辑**

我试图通过设置我的布局 xml 来管理背景图像，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="49dp"
        android:background="@drawable/set_user_profile_back"
        android:paddingLeft="10dp"
        android:paddingRight="10dp" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/hello_world"
            android:src="@drawable/next" />
    </RelativeLayout>

</RelativeLayout> 
```

但是现在我面临图像尺寸的问题，图像尺寸减小了如何解决这个问题以及如何修复图像移动的起点和终点。

![在此处输入图像描述](https://i.stack.imgur.com/nerI1.png)

任何想法和建议将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T08:02:54.957

你能试试这段代码吗

```
public class MainActivity extends Activity {

Button b1;
ImageView logo;
float width;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b1 = (Button) findViewById(R.id.button1);
    logo = (ImageView) findViewById(R.id.logo);

    Display display = getWindowManager().getDefaultDisplay();
    width = display.getWidth();
    final Animation posX = new TranslateAnimation(0, width - 50, 0, 0);
    posX.setDuration(1000);
    posX.setFillAfter(true);

    b1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            logo.startAnimation(posX);
            logo.setVisibility(View.VISIBLE);
        }
    });
}} 
```

# highcharts - Row names are overlapping

> ID：16185067
> 
> 赞同：0
> 
> 时间：2013-04-24T06:41:35.920
> 
> 标签：highcharts, highstock

I have created scatter plot [http://jsfiddle.net/ashwinp/4aDQ2/1/](http://jsfiddle.net/ashwinp/4aDQ2/1/)

Here row names are are overlapping on each other?and point start drawing from middle of the row name.Why cant we start with the beginning of the row name?

Can i know how to solve this?

Here is the code

```
var InfluenceCnt=0;
var QResiduals=[];
var XLables=[];
var HottelingT2=[];
var EllipseChartData;
var EllipseShift;
QResiduals.push('0.5356899');
QResiduals.push('0.3356899');
QResiduals.push('0.6356899');
QResiduals.push('0.2356899');
QResiduals.push('0.8356899');
QResiduals.push('0.2356899');
QResiduals.push('0.4356899');
QResiduals.push('0.4356899');
QResiduals.push('0.4356899');
QResiduals.push('0.2356899');
QResiduals.push('0.2356899');
QResiduals.push('0.5356899');
QResiduals.push('0.8356899');
QResiduals.push('0.9356899');
QResiduals.push('0.5356899');
QResiduals.push('0.7356899');
QResiduals.push('0.2356899');
QResiduals.push('0.1356899');
QResiduals.push('0.0356899');
QResiduals.push('0.5356899');
QResiduals.push('0.8356899');
QResiduals.push('0.7356899');

HottelingT2.push('0.1')
HottelingT2.push('0.2');
HottelingT2.push('0.3');
HottelingT2.push('0.4');
HottelingT2.push('0.5');
HottelingT2.push('0.6');
HottelingT2.push('0.4')
HottelingT2.push('0.5');
HottelingT2.push('0.3');
HottelingT2.push('0.2');
HottelingT2.push('0.6');
HottelingT2.push('0.7');
HottelingT2.push('0.8')
HottelingT2.push('0.9');
HottelingT2.push('0.2');
HottelingT2.push('0.3');
HottelingT2.push('0.5');
HottelingT2.push('0.5');
HottelingT2.push('0.7')
HottelingT2.push('0.8');
HottelingT2.push('0.9');
HottelingT2.push('0.4');
HottelingT2.push('0.5');
HottelingT2.push('0.6');

XLables.push('abc')
XLables.push('bdef');
XLables.push('ceff');
XLables.push('ddds');
XLables.push('edf');
XLables.push('fdf');
XLables.push('abc')
XLables.push('bdef');
XLables.push('ceff');
XLables.push('dddsert');
XLables.push('edf');
XLables.push('fdf');
XLables.push('abcert')
XLables.push('bdefert');
XLables.push('ceffert');
XLables.push('retret');
XLables.push('edfert');
XLables.push('fdfret');
XLables.push('bdefert');
XLables.push('ceff');
XLables.push('ddds');
XLables.push('edf');
XLables.push('fdf');

$(function () {
             $(document).ready(function () {        
                 Highcharts.setOptions({
                     global: {
                         useUTC: false
                     }
                 });
  // Ellipse Plot
          EllipseChartData = new Highcharts.Chart({
                     chart: {
                         renderTo: 'EllipseContainer',
                         type: 'scatter',
                         marginRight: 10,
                         zoomType: 'xy',
                         events: {
                             load: function () {                             

                                 // set up the updating of the chart each second
                                EllipseSeries = this.series[0];                                
                                  setInterval(function () {                                    
                                    EllipseShift = EllipseSeries.data.length > 20;                         

                                    if (!isNaN(QResiduals[InfluenceCnt]) &&  $.isNumeric(QResiduals[InfluenceCnt]) && typeof (QResiduals[InfluenceCnt]) != "undefined") {  //alert(QResiduals[InfluenceCnt]); 
                                         var x = HottelingT2[InfluenceCnt], // current time 
                                             y = parseFloat(QResiduals[InfluenceCnt]);    
                                         InfluenceCnt++;                                                                          
                                         EllipseSeries.addPoint([x,y], true, EllipseShift);                                         
                                       }                                     
                                 }, 1000);
                             }
                         }
                     },
                     title: {
                         text: 'Ellipse Plot'
                     },
                     xAxis: {
                         title: {
                             text: 'Sample'
                         },
                         categories:XLables,
                         plotLines: [{                           
                            value:2.5,
                            color: 'red',
                            dashStyle: 'shortdash',
                            width: 2,
                            label: {
                                text: ''
                            }
                         }]
                     },
                     yAxis: {
                         title: {
                             text: ''
                         },
                         plotLines: [{                            
                            value: 0.4,
                            color: 'red',
                            dashStyle: 'shortdash',
                            width: 2,
                            label: {
                                text: ''
                            }
                         }]
                     },
                     tooltip: {
                         formatter: function () {
                             return '<b>' + this.series.name + '</b><br/>X: ' +
                        this.x + '<br/> Y: ' +
                        Highcharts.numberFormat(this.y, 2);
                         }
                     },
                     legend: {
                         enabled: false
                     },
                     exporting: {
                         enabled: true
                     },
                    series: [{
                        name: 'Ellipse Plot',
                        data: []
                    }]
                 });

             });

         }); 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:46:39.393

The problem is that you are using categories, so Highcharts won't prevent any overlapping. I advice to use standard xAxis with formatter, take a look: [http://jsfiddle.net/TEDBG/](http://jsfiddle.net/TEDBG/)

```
 xAxis: {
                     allowDecimals: false,
                     labels: {
                          formatter: function() {
                              return XLables[this.value];
                          }
                     }       
                 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:15:44.223

您的宽度有限，因此标签重叠，因为“没有空间”包含“边距/填充”。您可以尝试将 HTML 设为 true：http://api.highcharts.com/highcharts#xAxis.labels.useHTML [，](http://api.highcharts.com/highcharts#xAxis.labels.useHTML)然后将 formatter() [http://api.highcharts.com/highcharts#xAxis.labels.formatter](http://api.highcharts.com/highcharts#xAxis.labels.formatter)与 ie 一起使用

```
return '<div class="ownlabel">'+this.value+'</div>'; 
```

然后使用您自己的 CSS 样式定义“自己的标签”。

# android - 即使调用 onDestroy() 后，Activity 实例仍然存在

> ID：16185069
> 
> 赞同：12
> 
> 时间：2013-04-24T06:41:40.483
> 
> 标签：android, android-activity, android-service

我将在 mainUI 线程上创建的处理程序`Activity`传递给执行某些网络操作的线程，当我获得结果时，我使用处理程序将结果发送回活动。

当我浏览这些链接时，这种方法存在内存泄漏问题：
[Inner ClassHandler Memory Leak](http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html)
[Android Developers](https://groups.google.com/forum/?fromgroups=#!msg/android-developers/1aPZXZG6kWk/lIYDavGYn5UJ)

所以我已经实现`WeakReference`并保持活动实例使用`WeakReference`. `Activity`但是即使在活动被破坏后，我仍然看到实例还活着。

我创建了一个`Handler`内部活动并将活动实例作为对处理程序的弱引用传递。
到我`Handler`在 10 秒后回复发送给它的消息时，`Activity`已被销毁。但是弱引用仍然有`Activity`实例，我看到`Toast`, after`Activity`被破坏了。

是不是有些地方我的理解有误？
有人可以解释如何处理传递给处理程序的消息，但 UI 不存在吗？

```
import java.lang.ref.WeakReference;

import android.os.Handler;
import android.os.Message;

public abstract class SingleParamHandler <T> extends Handler
{
private WeakReference<T> mActivityReference;

public SingleParamHandler(T activity) {
    mActivityReference = new WeakReference<T>(activity);
}

@Override
public void handleMessage(Message msg) {
    if (mActivityReference.get() == null) {
        return;
    }
    handleMessage(mActivityReference.get(), msg);
}

protected abstract void handleMessage(T activity, Message msg);

}

import android.app.Activity;
import android.os.Bundle;
import android.os.Message;
import android.widget.Toast;

public class MainActivity extends Activity {

MyHandler<MainActivity> handler;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);
    handler = new MyHandler<MainActivity>(this);
    new Thread(new MyRunnable(handler)).start();
}

public void onDestroy() {
    super.onDestroy();
    System.out.println("######## Activity onDestroy() ###### ");
}

private class MyRunnable implements Runnable {
    private Handler mHandler;
    public MyRunnable(Handler handler) {
        mHandler = handler;
    }

    public void run() {
        try {
            Thread.sleep(10000);
            mHandler.sendMessage(Message.obtain(handler, 1));
        } catch ( Exception e) {
            e.printStackTrace();
        }
    }
}

private static class MyHandler<T> extends SingleParamHandler<T> {

    public MyHandler(T activity) {
        super(activity);
    }

    @Override
    public void handleMessage(T act, Message msg) {
        if(msg.what == 1) {
            Toast.makeText((MainActivity)act, "Called after activity destroyed", Toast.LENGTH_LONG).show();;
        }
    }
}

} 
```

根据**获得的回复**，我在这里更新答案。你可以按照你喜欢的方式去做。但这是一种方式。

在 SingleParamHandler 中添加了以下函数

```
public void clear() {
    mActivityReference.clear();
} 
```

在活动 onDestroy()

```
public void onDestroy() {
    super.onDestroy();
    System.out.println("######## Activity onDestroy() ###### ");
    handler.clear();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:25:12.610

你不需要`WeakReference`这里。可以只包含对的`Handler`引用`Activity`。在活动中`onDestroy()`，只需调用一个方法来设置对to`MyHandler`的引用。签入。`Activity``null``null``handleMessage()`

另一种选择是：在活动的`onDestroy()`调用中，一个方法会中断睡眠线程，以便它在发送消息之前关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:58:54.210

如果不需要，Android 不能保证真的会从内存中删除一个对象。换句话说，Activity 对象即使在`onDestroy()`被调用后也可以保留在内存中（如果有足够的可用内存）。另一方面，如果没有足够的内存，不能保证`onDestroy()` *会被调用；*恰恰相反，Android 可以在调用`onPause()`您当前的 Activity 后终止您的整个进程（取决于 Android 版本）。

我认为为了你的目的，有一条更好的路可以走。您可能想要做的是将活动*附加*、*分离*并可能*重新附加*（例如，在配置更改时）您的服务。不要希望垃圾收集器为您完成工作。相反，明确地提出来。

子类化和`Activity`覆盖生命周期方法以及让您的服务知道现在谁负责。当然，这只是一种尽力而为的方法，因为不能保证某些回调，但这仅在某些不危险的情况下才重要。例如，您的 Activity 不会与您的 Service 分离，但它可能会在之后立即被杀死。但是您的服务要么在同一个进程中运行，因此它会同时被杀死。或者它在不同的进程中运行，但随后 Android 会注意到连接断开，并且可能会也可能不会终止服务；如果没有，那么您需要做的就是以一种健壮的方式实现它，以便能够处理连接丢失。`startActivity()``startActivityForResult()``onPause()`

**更新**

阅读您的评论后：您是对的，我没有具体解决这个问题。

> 我正在弄清楚如何避免将消息发送到在被销毁的活动中创建的处理程序

鉴于您上面的代码，并假设您真的只想`Toast`用 Activity 显示 s ，只要它存在，以下方法应该会有所帮助。

*   如果您`Thread`应该为多个活动提供服务，请对其进行扩展，以便活动可以在创建后向线程注册。如果您`Thread`只提供一个，请在您的 ( 's) 构造中将引用与引用一起`Activity`传递。`Activity``Handler``Thread``Runnable`
*   在您`Thread`通过 发送消息之前`Handler`，请检查`activity.isDestroyed()`。如果 Activity 没有被销毁，则发送消息。如果 Activity 被销毁，则不要发送消息。
*   根据您的 Thread 是否应该为多个 Activity 提供服务，要么退出它的`Runnable`方法，`run()`要么设置它的`Activity`引用（`null`如果它发现Activity`Activity`已被销毁）。

这应该可以修复您的上述代码。但是，如果您的场景增长，其他方法可能更合适。

# asp.net - 我可以使用 webservice.vb 从 gprs 获取信息并将信息存储到数据库中吗？

> ID：16185071
> 
> 赞同：0
> 
> 时间：2013-04-24T06:41:47.510
> 
> 标签：asp.net, vb.net, web-services

我正在开发一个使用 VB.Net 从设备接收数据的 ASP.Net 网站。

该设备会将数据发送到放置网站的服务器。

我的问题是：我可以在 WebService VB.Net 中编写脚本以从设备获取值并将相同的信息存储到 Web 服务器数据库中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:45:29.410

我的建议是有一个单独的 Windows 服务来轮询或响应来自设备的 I/O 中断，并将该信息推送到数据库中。

然后，您的网站将简单地从数据库中提取该信息并显示它。

# java - RabbitMQ Memory Usage grows too high

> ID：16185072
> 
> 赞同：3
> 
> 时间：2013-04-24T06:41:59.547
> 
> 标签：java, memory, memory-management, erlang, rabbitmq

I am experiencing a problem with rabbitmq 2.8.5\. There are 3 queues that messages are published to and they are consumed relatively quickly by the consumers. So the queues aren't big at all. There are 3 exchanges one for each queue. However the memory on rabbitmq continues to grow.

I tried running two different commands to understand what was happening to the memory however rabbitmq would hang when i run them.

```
rabbitmqctl eval '[[{pid, R}, M | process_info(R)] || {M, R} <- 
lists:sublist(lists:reverse(lists:sort([{process_info(P, memory), P} || 
P <- erlang:processes()])), 10)].'

'lists:sublist(lists:reverse(lists:sort([{process_info(Pid,memory), Pid, 
sys:get_status(Pid,infinity)} || Pid <- [element(7, Q) || Q <- 
rabbit_amqqueue:list()]])), 10).' 
```

I then tried to observe the memory usage on the erlang vm that rabbitmq is running on and it 9235 (I think its in bytes).

So if the queues and exchanges aren't large and Erlang Ram is far below that of rabbitmq what could be the cause?

As the Memory usage continues to grow it eventually reaches the max memory water mark and no more publishing can occur.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:07:47.850

也许您应该检查每条消息的大小作为有效负载。所有消息都将存储在内存中。

如果太大，最好重新设计消息。

# php - PHP str_replace 斜杠和引号

> ID：16185075
> 
> 赞同：2
> 
> 时间：2013-04-24T06:42:04.927
> 
> 标签：php

我从 db 调用了我的数据，其中包含`'`诸如之类的单词，`company's`并且一些单词显示为 like `company\\\\\'s`，尽管我具有将所有这些特殊字符替换为正常字符的功能，但诸如此类`company\'s`的措辞仍然存在。有什么合适的方法可以正确替换各种特殊字符吗？

```
function chrEncode($data) {
    $data = str_replace('â€™', '&#39;' ,$data);
    $data = str_replace('Ã©', 'é' ,$data);
    $data = str_replace('â€', '-' ,$data);
    $data = str_replace('-œ', '&#34;' ,$data);
    $data = str_replace('â€œ', '&#34;' ,$data);
    $data = str_replace('Ãª', 'ê' ,$data);
    $data = str_replace('Ã¶', 'ö' ,$data);
    $data = str_replace('â€¦', '...' ,$data);
    $data = str_replace('-¦', '...' ,$data);
    $data = str_replace('â€“', '–' ,$data);
    $data = str_replace('â€²s', '’' ,$data);
    $data = str_replace('-²s', '’' ,$data);
    $data = str_replace('â€˜', '&#39;' ,$data);
    $data = str_replace('-˜', '&#39;' ,$data);
    $data = str_replace('-“', '-' ,$data);
    $data = str_replace('Ã¨', 'è' ,$data);
    $data = str_replace('ï¼ˆ', '(' ,$data);
    $data = str_replace('ï¼‰', ')' ,$data);
    $data = str_replace('â€¢', '&bull;' ,$data);
    $data = str_replace('-¢', '&bull;' ,$data);
    $data = str_replace('Â§ï‚§', '&bull;' ,$data);
    $data = str_replace('Â®', '&reg;' ,$data);
    $data = str_replace('â„¢', '&trade;' ,$data);
    $data = str_replace('Ã±', 'ñ' ,$data);
    $data = str_replace('Å‘s', 'ő' ,$data);
    $data = str_replace('\\\"', '&quot;' ,$data);
    $data = str_replace("\r", '<br>' ,$data);
    $data = str_replace("\\r", '<br>' ,$data);
    $data = str_replace("\n", '<br>' ,$data);
    $data = str_replace("\\n", '<br>' ,$data);
    $data = str_replace("\\\'", '&#39' ,$data);
    $data = str_replace("'", "&#39" ,$data);

    return $data;
} 
```

请指教，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:45:33.937

有一个内置的php函数[stripslashes](http://php.net/manual/en/function.stripslashes.php)

```
echo stripslashes($data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:46:10.117

您可以使用 preg_replace 删除所有特殊字符，如下所示：

```
 preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $String); 
```

或仅用于斜杠：

```
$str = 'h///e/ll\\o\\//\\';
str_replace(array('\\', '/'), '', $str); // output hello 
```

另一种解决方案： - 创建一个干净的功能

```
 function clean($string) {
        $string = str_replace('', '-', $string); // Replaces all spaces with hyphens.
        return preg_replace('/[^A-Za-z0-9\-]/', '', $string); // Removes special chars.
     } 
```

**用法：-**

```
echo clean('a|"bc!@£de^&$f g'); 
```

将输出：`abcdef-g`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:45:31.707

[需要stripslashes](http://php.net/manual/en/function.stripslashes.php)来摆脱斜线......

```
$str = "Is your name O\'reilly?";

// Outputs: Is your name O'reilly?
echo stripslashes($str); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T06:43:57.310

您可以使用`mysql_real_escape_string()`函数 when`insert`或`update`，并且您不必替换特殊字符，例如`'`,`quot`等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T06:43:58.493

这是特殊字符你需要像这样用额外的反斜杠来转义它们

```
str_replace("\\","", $data); 
```

# android - 使用进度条加载 Android 图像

> ID：16185077
> 
> 赞同：1
> 
> 时间：2013-04-24T06:42:13.537
> 
> 标签：android, urlimageviewhelper

我的应用程序使用 url 加载图像。我尝试使用库[UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)。有用。但我想添加一个旋转进度条。所以我尝试修改进度条的一部分。问题是当我尝试运行我的应用程序时，只有在某些图像上才会出现进度条，然后在 iamge 已经加载时消失。在某些图像上，它继续显示..这是添加我的进度条控件的正确位置吗？

```
 final Runnable completion = new Runnable() {
              @Override
              public void run() {
                  assert (Looper.myLooper().equals(Looper.getMainLooper()));
                  Bitmap bitmap = loader.result;
                  Drawable usableResult = null;
                  if (bitmap != null) {
                      usableResult = new ZombieDrawable(url, mResources, bitmap);
                  }
                  if (usableResult == null) {
                      clog("No usable result, defaulting " + url);
                      usableResult = defaultDrawable;
                      mLiveCache.put(url, usableResult);
                  }
                  mPendingDownloads.remove(url);
  //                mLiveCache.put(url, usableResult);
                  if (callback != null && imageView == null)
                      callback.onLoaded(null, loader.result, url, false);
                  int waitingCount = 0;
                  for (final ImageView iv: downloads) {
                      // validate the url it is waiting for
                      final String pendingUrl = mPendingViews.get(iv);
                      if (!url.equals(pendingUrl)) {
                          clog("Ignoring out of date request to update view for " + url + " " + pendingUrl + " " + iv);
                          continue;
                      }
                      waitingCount++;
                      mPendingViews.remove(iv);
                      if (usableResult != null) {
  //                        System.out.println(String.format("imageView: %dx%d, %dx%d", imageView.getMeasuredWidth(), imageView.getMeasuredHeight(), imageView.getWidth(), imageView.getHeight()));
                          iv.setImageDrawable(usableResult);
  //                        System.out.println(String.format("imageView: %dx%d, %dx%d", imageView.getMeasuredWidth(), imageView.getMeasuredHeight(), imageView.getWidth(), imageView.getHeight()));
                          // onLoaded is called with the loader's result (not what is actually used). null indicates failure.
                      }
                      if (callback != null && iv == imageView)
                          callback.onLoaded(iv, loader.result, url, false);
                  }
                  clog("Populated: " + waitingCount);

  //                if(imageView.isShown())
  //                    if(progressBar != null) progressBar.setVisibility(View.GONE);
              }
          };

          if (file.exists()) {
              try {
                  if (checkCacheDuration(file, cacheDurationMs)) {
                      clog("File Cache hit on: " + url + ". " + (System.currentTimeMillis() - file.lastModified()) + "ms old.");

                      final AsyncTask<Void, Void, Void> fileloader = new AsyncTask<Void, Void, Void>() {
                          @Override
                          protected Void doInBackground(final Void... params) {
                              loader.onDownloadComplete(null, null, filename);
                              return null;
                          }
                          @Override
                          protected void onPostExecute(final Void result) {
                              completion.run();
                          }
                      };
                      executeTask(fileloader);
                      return;
                  }
                  else {
                      clog("File cache has expired. Refreshing.");
                  }
              }
              catch (final Exception ex) {
              }
          }

          for (UrlDownloader downloader: mDownloaders) {
              if (downloader.canDownloadUrl(url)) {
                  downloader.download(context, url, filename, loader, completion);
                  return;
              }
          }

          imageView.setImageDrawable(defaultDrawable);
  //        if(imageView.isShown())
  //            if(progressBar != null) progressBar.setVisibility(View.GONE);
      } 
```

如果有人熟悉这个库，你能帮助实现我的目标吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:55:59.027

在这种情况下，我倾向于使用[ASyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)而不是 Runnable。ASyncTask 专门为此目的而设计，并包含直接在 UI 线程 ( 和 ) 上运行`onProgressUpdate()`的`onPreExecute()`方法`onPostExecute()`。这些方法非常适合根据需要显示、隐藏和更新进度条。

本[教程](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)应该为您提供一个相当好的起点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T07:08:21.407

ASyncTask 是您正在寻找的，只要有资源获取或渲染，如 UI 组件和图像等，ASYNCTask 就是答案，但是当您正在寻找数据获取时，请始终使用可运行线程。

类 ImageFetch 扩展 AsyncTask {

```
 private final ProgressDialog dialog = new ProgressDialog(this.context);
    @Override
    protected void onPreExecute() {
          this.dialog.setMessage("Fecthing Image");
          this.dialog.setTitle("Please Wait");
          this.dialog.setIcon(R.drawable."Any Image here");
          this.dialog.show();
    }

    @Override
    protected Void doInBackground(Void... voids) {
      // Put your Image Fetching code here

    }
    @Override
    protected void onPostExecute(Void aVoid) {
         if (this.dialog.isShowing()) {
             this.dialog.dismiss();

 }
} 
```

然后在 Activity 代码中像这样 new ImageFetch().execute();

你完成了。

# tomcat - Solr indexing in Typo3 giving error

> ID：16185080
> 
> 赞同：0
> 
> 时间：2013-04-24T06:42:37.710
> 
> 标签：tomcat, typo3, solr4, lampp

While I am trying to index pages I am getting error in the solr admin screen

```
=====================================================
`11:20:50   SEVERE  SolrCore    org.apache.solr.common.SolrException: ERROR: [doc=f6baa2fb88804967909bd23e6e25f770facd1cce/pages/1608/0/0/0] unknown field 'site'
11:20:51    WARNING     XMLLoader   Unknown attribute id in add:allowDups
11:20:51    WARNING     XMLLoader   Unknown attribute id in add:overwritePending
11:20:51    WARNING     XMLLoader   Unknown attribute id in add:overwriteCommitted
11:20:51    SEVERE  SolrCore    org.apache.solr.common.SolrException: ERROR: [doc=f6baa2fb88804967909bd23e6e25f770facd1cce/pages/1607/0/0/0] unknown field 'site'
11:33:31    SEVERE  SolrCore    org.apache.solr.common.SolrException: undefined field type
11:33:31    SEVERE  SolrCore    org.apache.solr.common.SolrException: Unknown commit parameter 'waitFlush'`
=====================================================

```

The typo3 developer logs show the following:

```
====================================================

    /opt/lampp/steriauk/typo3conf/ext/solr/classes/indexqueue
    /class.tx_solr_indexqueue_pageindexer.php

    tx_solr_indexqueue_Item Object
    (
    [indexQueueUid:protected] => 45992
    [rootPageUid:protected] => 1
    [type:protected] => pages
    [indexingConfigurationName:protected] => pages
    [changed:protected] => 1366715241
    [indexingProperties:protected] => Array
    (
    )

    [indexingPropertiesLoaded:protected] => 1
    [hasIndexingProperties:protected] => 
    [recordUid:protected] => 209
    [record:protected] => Array
    (
    [uid] => 209
    [pid] => 205
    [t3ver_oid] => 0
    [t3ver_id] => 0
    [t3ver_wsid] => 0
    [t3ver_label] =>`
==================================================== 

```

I have configured the solr extension and set up looks good as per the 'Status Report' page on typo3 admin, but the errors appear and nothing gets indexed.

Could somebody suggest if there anything I am missing in setting up the solrconfig.xml and schema.xml file. Actually these are located in my solr home which is in '/var/solr../../example/solr/collection1/conf' and '/opt/lampp/htdocs/../../ext/../solr/resources/conf/' . I am confused about which of the configs is used and how solr extension in typo3 talks to the solr search engine via tomcat.

I am using:

SOLR 4.2.0 Solr extension 2.8.2 Lampp: 1.8.1 Tomcat 6

Please let me know if you need any other information as I am new to these technologies and need to set it up urgently.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T10:21:54.073

据我所知，solr 扩展还不支持 SOLR 4.x。

在要求内，以下版本是最新支持的：SOLR3.6

查看： http: [//forge.typo3.org/projects/extension-solr/wiki/Supported_Solr_versions](http://forge.typo3.org/projects/extension-solr/wiki/Supported_Solr_versions)

# php - 将 jquery 日期选择器添加到 php 列表

> ID：16185082
> 
> 赞同：0
> 
> 时间：2013-04-24T06:42:51.813
> 
> 标签：php, jquery

我有一个 mysql 数据库表，其中包含错误代码、日期和邮件地址。

我下面的脚本根据屏幕截图显示了一个基本列表，

![脚本显示如下](https://i.stack.imgur.com/gval8.png)

我希望能够按日期过滤，我希望使用 jquery 日期选择器。

这个想法是，只显示日期与 jquery 日期选择器中的日期匹配的条目。

用于显示列表的 php 代码：

```
 <?php

// Add  Logo
$image = "logo.png";
$width = 300;
$height = 280;
echo '<img src="'.$image.'" style=width:"' . $width . 'px;height:' . $height . 'px;">';

// Make a MySQL Connection
mysql_connect("localhost", "username", "password") or die(mysql_error());
mysql_select_db("pmta_reporting") or die(mysql_error());

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM address")
or die(mysql_error());

echo "<table border='1'>";
echo "<tr> <th>Error</th> <th>Date</th> <th>Mail Address</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
        // Print out the contents of each row into a table
        echo "<tr><td>";
        echo $row['code'];
        echo "</td><td>";
        echo $row['date'];
        echo "</td><td>";
        echo $row['address'];
        echo "</td></tr>";
}

echo "</table>";
// disconnect from the database

    mysql_close();
?> 
```

我用于日期选择器的代码是

```
<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>jQuery UI Datepicker - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
       $(function() {
          $( "#datepicker" ).datepicker();
       });
   </script>
  </head>
  <body>
     <p>Date: <input type="text" id="datepicker" /></p>
  </body>
</html> 
```

如何将 jquery 日期选择器添加到脚本中，以便当用户选择日期时，页面上显示的结果仅显示用户选择的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:55:45.457

在 datepicker 字段中更改值时，使用 GET 变量重新加载 url `date`：

```
$( "#datepicker" ).change(function(){
   window.location.href = window.location.href + '?date=' + $(this).val();
}) 
```

在 php 中，如果提供了 get 变量，则在查询中添加 where 语句：

```
$query = "SELECT * FROM address"
if (isset( $_GET['date']) && ($date = $_GET['date'])){
  $query .= " WHERE date = '$date'";
}
$result = mysql_query($query) 
```

笔记！这不会防止sql注入！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:02:02.190

这写起来有点复杂，所以请原谅我没有写一个例子，但我会给你一个如何做到这一点的好主意。首先，您应该创建一个单独的 PHP 文件，该文件仅返回表，并`POST`为用于过滤`SQL`查询结果的日期获取一个可变参数。接下来，在作为 datepicker的字段上使用`jQuery`'s以使用数据参数中的 set 对返回数据的文件进行调用，并将其加载到指定的.`.change()``input``$.ajax``$('#datepicker').val()``PHP``<div>`

您可以在这里阅读更多信息：http `$.ajax`: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:02:43.990

可能效率不高，但您可以这样做。

```
$("#date").datepicker({"dateFormat": "yy-mm-dd"});

$("#date").change(function() {
    var date_from_date_picker = $(this).val();
    $('td.date').each(function() {
        if ($(this).text() != date_from_date_picker) {
            $(this).parent().hide();
        } else {
            $(this).parent().show();
        }
    });
}); 
```

[在http://jsfiddle.net/djhPN/2/](http://jsfiddle.net/djhPN/2/)工作演示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T07:18:17.987

在您的 HTML 中：

```
<body>
  <form method="get" action="yourphpscript">
    <p>Date: <input type="text" name="date" id="datepicker" /></p>
    <input type="submit" value="Search" />
  </form>
</body> 
```

在您的 PHP 中，您可以使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)，这样您就可以使用准备好的语句和参数化查询来保护您免受 SQL 注入。

查看这篇文章以获取更多信息： [PDO 和 mysqli 示例](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

您还可以使用函数“mysql_real_escape_string($bad_variable)”转义错误的 sql

我将调整 Joel Harkes 的代码，使其也能对抗 SQL 注入：

```
$query = "SELECT * FROM address"
if (isset( $_GET['date']) && ($date = mysql_real_escape_string($_GET['date']))){
  $query .= " WHERE date = '$date'";
}
$result = mysql_query($query) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T07:24:51.920

您想使用 ajax 来加载这样的内容。

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
   $(function() {
      $( "#datepicker" ).datepicker();
   });

   jQuery(document).ready(function() {
    $("#datepicker").change(function(){

    var new_date = $(this).val();

    jQuery.ajax({
      type: "POST",
      url: "http://www.url.php",
      data: { date:new_date },
      success: function( data ) {
               $('#displaycontent').val(data);
                }
       });
    });
  });
</script>

</head>
<body>
  <p>Date: <input type="text" id="datepicker" /></p>
  <div id="displaycontent"> </div>
</body>
</html> 
```

和 ajax 文件是 ex。url.php 是这样的。

```
// Add  Logo
$image = "logo.png";
$width = 300;
$height = 280;
echo '<img src="'.$image.'" style=width:"' . $width . 'px;height:' . $height . 'px;">';

// Make a MySQL Connection
mysql_connect("localhost", "username", "password") or die(mysql_error());
mysql_select_db("pmta_reporting") or die(mysql_error());

$newdate = $_REQUEST['date'];

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM address WHERE date=".$newdate) or die(mysql_error());

echo "<table border='1'>";
echo "<tr> <th>Error</th> <th>Date</th> <th>Mail Address</th> </tr>";
 // keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>";
    echo $row['code'];
    echo "</td><td>";
    echo $row['date'];
    echo "</td><td>";
    echo $row['address'];
    echo "</td></tr>";
}

echo "</table>";
 // disconnect from the database

 mysql_close();
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T09:28:55.493

好的，做了一些改变。我在目录中创建了 2 个文件。

index.php - 这包含日期选择器和提交

file2.php - 这包含数据库查询和表。

```
<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>jQuery UI Datepicker - Default functionality</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <script>
            $(function() {
                $( "#datepicker" ).datepicker(({ dateFormat: "yy-mm-dd" }));
            });
        </script>
    </head>
    <body>
        <form action="file2.php" method="post">
            <p>Date: <input type="text" name="datepicker" id="datepicker" /></p>
            <div id="displaycontent"> </div>
            <input type="submit" value="Submit" />
        </form>
    </body>
</html> 
```

然后 file2.php 看起来像这样：

```
<?php

// Make a MySQL Connection
mysql_connect("localhost", "username", "password") or die(mysql_error());
mysql_select_db("databasename") or die(mysql_error());
$newdate = $_POST['datepicker'];

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM table_name WHERE date='$newdate'") or die(mysql_error());

echo "<table border='1'>";
echo "<tr> <th>Error</th> <th>Date</th> <th>Mail Address</th> </tr>";
 // keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>";
    echo $row['code'];
    echo "</td><td>";
    echo $row['date'];
    echo "</td><td>";
    echo $row['address'];
    echo "</td></tr>";
}

echo "</table>";
 // disconnect from the database

 mysql_close();
?> 
```

这允许我按日期过滤。

感谢大家的贡献

# android - Android：使用 QRGen lib 生成二维码时出错

> ID：16185083
> 
> 赞同：0
> 
> 时间：2013-04-24T06:42:56.600
> 
> 标签：android, qr-code

我正在尝试使用生成 QRCode 图像`QRGen library`。

我已将文件导入`qrgen-1.0.jar`我的项目。

我知道这个问题是重复的。我通过此[链接引用了以下代码](https://stackoverflow.com/questions/15221775/error-when-using-qrgen-library-to-generate-qr-code)

```
public Bitmap qrBitmapFromString(String qrText){
    ByteArrayOutputStream out = QRCode.from(qrText).to(ImageType.PNG).withSize(300, 300).stream();
    byte[] data = out.toByteArray();
    Bitmap bmp = BitmapFactory.decodeByteArray (data,0,data.length, null);
    return bmp; 
} 
```

但我收到以下错误。

```
04-24 11:48:57.138: E/AndroidRuntime(824): FATAL EXCEPTION: main
04-24 11:48:57.138: E/AndroidRuntime(824): java.lang.NoClassDefFoundError:           net.glxn.qrgen.QRCode
04-24 11:48:57.138: E/AndroidRuntime(824):  at com.example.barcodeexample.QRCodeGeneratorActivity.onCreate(QRCodeGeneratorActivity.java:34)
04-24 11:48:57.138: E/AndroidRuntime(824):  at android.app.Activity.performCreate(Activity.java:5008)
04-24 11:48:57.138: E/AndroidRuntime(824):  at     android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-24 11:48:57.138: E/AndroidRuntime(824):  at    android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-24 11:48:57.138: E/AndroidRuntime(824):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-24 11:48:57.138: E/AndroidRuntime(824):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-24 11:48:57.138: E/AndroidRuntime(824):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-24 11:48:57.138: E/AndroidRuntime(824):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 11:48:57.138: E/AndroidRuntime(824):  at android.os.Looper.loop(Looper.java:137)
04-24 11:48:57.138: E/AndroidRuntime(824):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-24 11:48:57.138: E/AndroidRuntime(824):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 11:48:57.138: E/AndroidRuntime(824):  at java.lang.reflect.Method.invoke(Method.java:511)
04-24 11:48:57.138: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-24 11:48:57.138: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-24 11:48:57.138: E/AndroidRuntime(824):  at dalvik.system.NativeStart.main(Native Method) 
```

我已经进口了

```
import net.glxn.qrgen.QRCode;
import net.glxn.qrgen.image.ImageType; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T18:42:24.667

2.0-SNAPSHOT 应该解决这个问题[https://oss.sonatype.org/content/repositories/snapshots/net/glxn/qrgen/android/2.0-SNAPSHOT/](https://oss.sonatype.org/content/repositories/snapshots/net/glxn/qrgen/android/2.0-SNAPSHOT/)

[https://github.com/kenglxn/QRGen](https://github.com/kenglxn/QRGen)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:27:15.140

最后，我发现并遵循了对我来说效果很好的东西。

1.  右键单击您的项目
2.  进入构建路径
3.  配置构建路径
4.  去订购和出口
5.  检查您的 OnBarcode 库
6.  清理你的项目

认为这可能会帮助像我这样的人。

谢谢。

# android - Accessing data in mysql database android

> ID：16185084
> 
> 赞同：0
> 
> 时间：2013-04-24T06:43:01.573
> 
> 标签：android, android-arrayadapter, android-sqlite

I have successfully added data in my `ArrayClass` from the `Database` below

```
public class DBHelper {

    private final String DATABASE_PATH = "/data/data/../databases/";
    private final String DATABASE_NAME = "...sqlite";
    private final static int DATABASE_VERSION = 1;

    private Context context;
    private SQLiteDatabase database = null;
    OpenHelper openHelper=null;
    StringBuilder query =null;
    Cursor cursor=null;

    ArticlesTable articlesTable=new ArticlesTable();
    DestinateurTable destinataireTable = new DestinateurTable();

    public static DBHelper dbHelper = null;

    private DBHelper(Context context) {

    this.context = context;
    openHelper = new OpenHelper(this.context);
    this.database = openHelper.getWritableDatabase();

    try {

        createDataBase();
        openDataBase();

    } catch (IOException e) {

        e.printStackTrace();
    }

    }
    public static DBHelper getInstance(Context context)
    {
    if(dbHelper == null)
        dbHelper = new DBHelper(context);
    return dbHelper;
    }

   public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DATABASE_PATH + DATABASE_NAME;
    database = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException
    {
    openHelper.getReadableDatabase();
    if(getDBAlreadyCopiedToDeviceOnceFlag(context) == false){
        try {
        copyDataBase();
        setDBAlreadyCopiedToDeviceOnceFlag(context);
        } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Error copying database");
        }
    }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    @SuppressWarnings("unused")
    private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DATABASE_PATH + DATABASE_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = context.getAssets().open(DATABASE_NAME);

    // Path to the just created empty db
    String outFileName = DATABASE_PATH + DATABASE_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

    }

    private class OpenHelper extends SQLiteOpenHelper
    {

        @SuppressWarnings("unused")
        SQLiteStatement insertStmt;

        public OpenHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            // TODO Auto-generated method stub
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            // TODO Auto-generated method stub
        }
    }

    public void setDBAlreadyCopiedToDeviceOnceFlag(Context ctx)
    {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putBoolean("isDBAlreadyCopiedToDeviceOnce", true);
        editor.commit();
    }

    public boolean getDBAlreadyCopiedToDeviceOnceFlag(Context ctx)
    {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);
        boolean isDBAlreadyCopiedToDeviceOnce = prefs.getBoolean("isDBAlreadyCopiedToDeviceOnce", false);
        return isDBAlreadyCopiedToDeviceOnce; 
    }

    ////////////////////////////
    //// Write your methods here
    ////////////////////////////

    public ArrayList<Article> getArticlesList(){
        ArrayList<Article> items=new ArrayList<Article>();

        try
        {
            query = new StringBuilder();
            query.append("select * from "+articlesTable.TABLE_NAME);

            cursor=this.database.rawQuery(query.toString(),null);
            if (cursor.moveToFirst())
            {
                do
                {
                    Article a=new Article();

                    a.enseigne=cursor.getString(cursor.getColumnIndex(articlesTable.ENSEIGNE));
                    a.tel=cursor.getString(cursor.getColumnIndex(articlesTable.TEL));
                    a.fax=cursor.getString(cursor.getColumnIndex(articlesTable.FAX));
                    a.latitude=cursor.getString(cursor.getColumnIndex(articlesTable.LATITUDE));
                    a.longitude=cursor.getString(cursor.getColumnIndex(articlesTable.LONGITUDE));

                    a.adresse1=cursor.getString(cursor.getColumnIndex(articlesTable.ADRESSE1));
                    a.adresse2=cursor.getString(cursor.getColumnIndex(articlesTable.ADRESSE2));
                    a.adresse3=cursor.getString(cursor.getColumnIndex(articlesTable.ADRESSE3));
                    a.adresse4=cursor.getString(cursor.getColumnIndex(articlesTable.ADRESSE4));
                    a.adresse5=cursor.getString(cursor.getColumnIndex(articlesTable.ADRESSE5));
                    a.adresse6=cursor.getString(cursor.getColumnIndex(articlesTable.ADRESSE6));

                    a.horaires1=cursor.getString(cursor.getColumnIndex(articlesTable.HORAIRE1));
                    a.horaires2=cursor.getString(cursor.getColumnIndex(articlesTable.HORAIRE2));
                    a.horaires3=cursor.getString(cursor.getColumnIndex(articlesTable.HORAIRE3));
                    a.horaires4=cursor.getString(cursor.getColumnIndex(articlesTable.HORAIRE4));
                    a.horaires5=cursor.getString(cursor.getColumnIndex(articlesTable.HORAIRE5));
                    a.horaires6=cursor.getString(cursor.getColumnIndex(articlesTable.HORAIRE6));
                    a.horaires7=cursor.getString(cursor.getColumnIndex(articlesTable.HORAIRE7));

                    items.add(a);

                    System.out.println("added_items:"+items);
                }
                while (cursor.moveToNext());
            }
            if (cursor != null && !cursor.isClosed())
            {
            cursor.close();

            }
        }
        catch(SQLiteException e){

            e.printStackTrace();
            return null;
        }

        return items;
    }
    //--here
    public boolean addArticle(Article a){
        this.database.beginTransaction();

        try{

            ContentValues contentValues=new ContentValues();

            contentValues.put(articlesTable.ENSEIGNE, a.enseigne);
            contentValues.put(articlesTable.TEL, a.tel);
            contentValues.put(articlesTable.FAX, a.fax);

            contentValues.put(articlesTable.LATITUDE, a.latitude);
            contentValues.put(articlesTable.LONGITUDE, a.longitude);
            contentValues.put(articlesTable.ADRESSE1, a.adresse1);
            contentValues.put(articlesTable.ADRESSE2, a.adresse2);
            contentValues.put(articlesTable.ADRESSE3, a.adresse3);
            contentValues.put(articlesTable.ADRESSE4, a.adresse4);
            contentValues.put(articlesTable.ADRESSE5, a.adresse5);
            contentValues.put(articlesTable.ADRESSE6, a.adresse6);

            contentValues.put(articlesTable.HORAIRE1, a.horaires1);
            contentValues.put(articlesTable.HORAIRE2, a.horaires2);
            contentValues.put(articlesTable.HORAIRE3, a.horaires3);
            contentValues.put(articlesTable.HORAIRE4, a.horaires4);
            contentValues.put(articlesTable.HORAIRE5, a.horaires5);
            contentValues.put(articlesTable.HORAIRE6, a.horaires6);
            contentValues.put(articlesTable.HORAIRE7, a.horaires7);

            this.database.insert(articlesTable.TABLE_NAME,null,contentValues);
        this.database.setTransactionSuccessful();
        }catch(Exception e){
            e.printStackTrace();
            return false;
        }finally{
            this.database.endTransaction();
        }
        return true;
    }

    public boolean deleteArticle(String id){
        try
        {
            String query="delete from " + articlesTable.TABLE_NAME+" where "+articlesTable.NOM+"='"+id+"'";
            this.database.execSQL(query);
        }
        catch(SQLiteException e){
            e.printStackTrace();
            return false;
        }
        return true;
    } 
```

In the code above, `Article a=new Article();` is a class holding values as below:

```
public class Article {
    public String enseigne, type,nom,latitude,longitude,
    tel,fax,adresse1,adresse2,adresse3,adresse4,adresse5,
    adresse6,horaires1,horaires2,horaires3,horaires4,horaires5,
    horaires6,horaires7 ;
} 
```

In my `MainActivity.class` in `onCreate()` method. I want to print name. How can i achieve this.
In `MainActivity.class` i initialize a `Article` like follows `Article a = new Article();` then call `a.name` but this isn't the way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:54:27.400

您正在使用创建一个新实例`Article a = new Article()`，因此所有`String`变量都`null`用于新对象。

在`MainActivity`调用`DbHelper`类方法`getArticlesList()`并获取`ArrayList`该方法`returns`。然后你可以使用`nameOfArrayList.get(position).name`和其他...

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:54:46.083

1）在您的 onCreate() 中，您将要实例化您的 DBHelper 类

```
DBHelper dbhelper = new DBHelper(); 
```

2) 在 onCreate() 你会调用 getArticlesList()

```
ArrayList<Article> mArticles = dbhelper.getArticlesList(); 
```

3）当你想使用一篇文章时，只需通过索引抓取你想要的任何一个：

```
Article = mArticles.get(x); 
```

这应该正是您所需要的。

# r - 雄辩地改变R中的许多栅格单元值

> ID：16185085
> 
> 赞同：4
> 
> 时间：2013-04-24T06:43:02.977
> 
> 标签：r, gis, spatial, raster

我有一个 Landfire Existing Vegetation 数据集 ( [http://www.landfire.gov/](http://www.landfire.gov/) )，我已将其投影并裁剪到我的研究地点。栅格有大约 12,000,000 个像元。像元值代表特定的植被类型，值范围为 16:2200。所有这些值都没有出现在我的研究区域中（即值从 20 跃升至 1087）。

由于我的目的可以将许多像素值归为一个分类（例如，将不同的灌木群落归为一类），我想将栅格的值重置为更简单的值（1:11）。这将有助于按植被类型从其他栅格轻松提取数据，并便于绘制分类图。我有一个工作代码，但需要大量输入才能更改我需要更改的所有 61 个值。这是我所做的：

```
#===============================
############Example#############
#===============================

library(raster)
r <- raster(nrows=30, ncols=10, xmn=0, xmx=10)
r[] <- rep(10:19, 30)

r.omance <- function(x){
            x[x==10] <- 1; x[x==11] <- 1; x[x==12] <- 1
            x[x==13] <- 1; x[x==14] <- 1; x[x==15] <- 1

            x[x==16] <- 2; x[x==17] <- 2; x[x==18] <- 2
            x[x==19] <- 2
            return(x)}

reclass <- calc(r, fun = r.omance) 
```

有谁知道更简单的方法来解决这个问题？您可以想象输入会更改 61 个值，特别是因为 x[x==16:20] <- 1 会产生错误，因此必须单独输入每个值。正如我所说，我的代码有效。但我只想成为一个更好的 R 编码器。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T06:55:27.863

你可以使用`%in%`：

```
x %in% c(1,4,3:10) 
```

这个：

```
x[x==10] <- 1; x[x==11] <- 1; x[x==12] <- 1
x[x==13] <- 1; x[x==14] <- 1; x[x==15] <- 1 
```

将减少为：

```
x[x %in% 10:15] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-22T02:52:55.223

我会使用重新分类功能

```
library(raster)
r <- raster(nrows=30, ncols=10, xmn=0, xmx=10)
r[] <- rep(10:19, 30)
rc <- matrix(c(10,15,1,16,19,2), ncol=3, byrow=TRUE)
x <- reclassify(r, rc, right=NA) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T06:53:41.083

您将使用`&`逻辑运算符节省一些打字时间，例如

```
x[ x >= 10 & x <= 15 ] <- 1
x[ x >= 16 & x <= 19 ] <- 2 
```

# ios - 验证多个文本字段并使屏幕上的其他控件处于非活动状态

> ID：16185087
> 
> 赞同：0
> 
> 时间：2013-04-24T06:43:04.230
> 
> 标签：ios

我的屏幕上有多个文本字段。我收到一个名为验证所有文本字段的 JSON 响应。我真正想要的是，只要用户不在正常值的范围内，我就应该能够为这些文本字段设置验证。我为此准备了一个逻辑：代码如下

```
 - (BOOL)textFieldShouldEndEditing:(UITextField *)textField;{
// Here we are checking if TextField is not equals to blank then we are performing 
 validations here.
if (![textField.text isEqualToString:@""]) {
    NSLog(@"%@",textField.UID);
    NSPredicate * predicate = [NSPredicate predicateWithFormat:@"column_name == %@",
     textField.UID];
    NSArray * arr = [[NSArray alloc] init];
    arr = [arr_vitalvalidations filteredArrayUsingPredicate:predicate];
    for (int i=0; i < [arr count]; i++) {
        NSString * str_maxValue = [[arr objectAtIndex:i] valueForKey:@"max_value"];
        NSString * str_minValue = [[arr objectAtIndex:i] valueForKey:@"min_value"];
        if ([textField.text floatValue] > [str_maxValue floatValue] || [textField.text 
       floatValue] < [str_minValue floatValue]) {
            NSString * str_message = [[arr objectAtIndex:i]
        valueForKey:@"message_note"];
            str_message = [str_message stringByReplacingOccurrencesOfString:@"%1" 
        withString:str_minValue];
            str_message = [str_message stringByReplacingOccurrencesOfString:@"%2" 
        withString:str_maxValue];
            DisplayAlert(str_message)

            [textField becomeFirstResponder];
            return NO;

        }
    }

}
return YES; 
```

}

此代码实际上使其他文本字段处于休眠状态，因为现在我无法切换到其他文本字段，直到我将正确的值放入第一个文本字段中。我的屏幕上也有其他控件，但它们工作正常。例如，一个段控制器将高度的值（以厘米为单位）更改为英尺。该段控制器仍在工作，并且正确地更改了我必须阻止的值。此外，在按下返回按钮以离开此屏幕时，此代码显示警报消息 4 次。请帮我解决这个问题。一点帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:48:01.353

给你的屏幕一些图像。另外，你会因为用户没有输入正确的字段而限制用户交互吗？

PS：我无法发表评论，这就是为什么我将其作为答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:01:10.257

为了解决您的问题，请尝试这样，它会帮助您，但我不知道它是否正确。取一个全局变量并更新值并在 textFieldShouldEndEditing 方法中比较该值并根据需要执行操作。

```
-(IBAction)backBtnAction:(id)sender{
    NSLog(@"close down ");
    n=10;
    [textfield resignFirstResponder];

} 
```

用下面的行替换你的条件

```
if (![textField.text isEqualToString:@""] & n!=10) 
```

# javascript - Javascript - 清除间隔和 setinterval 范围

> ID：16185088
> 
> 赞同：0
> 
> 时间：2013-04-24T06:43:06.990
> 
> 标签：javascript, ajax, scope, setinterval, clearinterval

我有一些显示进度条的 AJAX，`setInterval()`用于获取脚本的当前进度。我的问题是，当进度达到 100% 时，我似乎无法杀死它。我不确定这是否与范围有关，但我的处理程序是全局的，所以我不知道为什么它不起作用。这是我所拥有的：

```
function showLog(){
    document.getElementById('log').style.display = "block";
    clearInterval(inth);
    return false;
}

function startAjax(){
    var inth = setInterval(function(){
        if (window.XMLHttpRequest){ xmlhttpp=new XMLHttpRequest();}else{ xmlhttpp=new ActiveXObject("Microsoft.XMLHTTP"); }
        xmlhttpp.onreadystatechange=function(){
            if(xmlhttpp.readyState==4 && xmlhttpp.status==200){
                document.getElementById("sbar").innerHTML=xmlhttpp.responseText;
            }
        }
        xmlhttpp.open("POST","scrape.php",true);
        xmlhttpp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        var sitelist = document.getElementById('website').value;
        var par = "website="+sitelist;
        xmlhttpp.send(par);
    }, 5000);
    return false;
} 
```

为什么 clearInterval 不起作用？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:44:32.417

这是一个范围问题，`var inth`将函数外部声明为全局变量。并`inth = setInterval(...)`在`startAjax`函数中使用。

正如您在问题中所说，您的处理程序是全球性的。但变量本身不是，所以不能在函数作用域外访问。

# paypal - Chained payments and refunds

> ID：16185093
> 
> 赞同：10
> 
> 时间：2013-04-24T06:43:35.633
> 
> 标签：paypal, payment, chained

I have a question regarding chained payments and refunds. We are developing an application that sets up a chained payment, with ourselves as the primary receiver and the provider of the service as the secondary receiver. We provide a mechanism for the secondary receiver to refund the complete payment.

What we want to know is what happens when the secondary receiver has no funds in their paypal account? From testing this in the sandbox and from what we've read, it seems that the secondary receiver component of the refund becomes pending (we assume, as funds are pulled down from an associated bank account). Three things:

1.  Has the primary receiver paid the refund in full and is now waiting to get the payment from the secondary receiver. Implying that, at this point in time, the primary receiver is out of pocket?

2.  What happens if funds cannot be pulled down from the secondary receivers associated bank account?

3.  What happens if we attempt a refund from an unverified user with no funds in their paypal account? Once again, does the primary receiver pay the refund in full and hope to collect the secondary receivers portion when they do have funds?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T20:29:49.880

Extrapolating from [the documentation](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APRefund):

1.  The primary receiver does not initiate a refund until it receives the secondary receiver's refund.
2.  If the funds cannot be pulled down from the secondary receiver's bank account (or the secondary user has no bank account linked) the refund request is cancelled.

The documentation is explicit in saying that it refunds the secondary to the primary before initiating a refund from the primary. Lack of documentation to the contrary suggests they handle the rest of the problems in this situation the same way they handle other refund problems.

# php - How to get specific part in MySql with group by?

> ID：16185095
> 
> 赞同：0
> 
> 时间：2013-04-24T06:43:39.147
> 
> 标签：php, mysql, group-by

I have a problem with SQL query, and I will try to explain what I want to do. This is my query which returns some result rows.

```
SELECT 
sck.sckid,
sck.prid,
sck.paid,
sck.sckcen,
sum(scd.scdkiek) as count_of_goods,
min(scn.scndat) as `date`
FROM sck 
INNER JOIN scd ON scd.sckid = sck.sckid
INNER JOIN scn ON scn.scnid = scd.scnid
INNER JOIN sandeliai ON sandeliai.paid = sck.paid
WHERE sck.prid = 1376 GROUP BY sckid 
```

And this query returns "Table 1" of results:

Table 1:

```
sckid    |    prid    |    sckcen    |    count_of_goods    |      date     |
123      |    1376    |    10009     |          0           |   2012-12-31  |
124      |    1376    |    10007     |          15          |   2013-01-25  |
125      |    1376    |    10005     |          0           |   2013-02-13  |
126      |    1376    |    10000     |          18          |   2013-03-15  | 
```

But I need just one row with all data grouped by `prid`, and I wrote this query:

```
SELECT 
sck.sckid,
sck.prid,
sck.paid,
sck.sckcen,
sum(scd.scdkiek) as count_of_goods,
min(scn.scndat) as `date`
FROM sck 
INNER JOIN scd ON scd.sckid = sck.sckid
INNER JOIN scn ON scn.scnid = scd.scnid
INNER JOIN sandeliai ON sandeliai.paid = sck.paid
WHERE sck.prid = 1376 GROUP BY prid 
```

Then I get one row with this data in table:

Table 2:

```
sckid    |    prid    |    sckcen    |    count_of_goods    |      date     |
123      |    1376    |    10009     |          23          |   2012-12-31  | 
```

It's seems all correct, but in `date` field I need to return most earlier date from table one, which have count_of_goods > 0, so for me need this result:

Table 3:

```
sckid    |    prid    |    sckcen    |    count_of_goods    |      date     |
123      |    1376    |    10009     |          23          |   2013-01-25  | 
```

So any ideas how can I get result like in Table 3?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:56:04.647

我认为我最初回来的答案可能过于复杂。假设 scd.scdkiek 是数字而不是 id，那么你可以通过简单地改变 INNER JOIN 标准来得到你想要的，即

```
SELECT 
    sck.sckid,
    sck.prid,
    sck.paid,
    sck.sckcen,
    scn.scndat,
    SUM(scd.scdkiek) AS count_of_goods
FROM sck 
INNER JOIN scd 
    ON scd.sckid = sck.sckid
    AND scd.scdkiek > 0
INNER JOIN sandeliai 
    ON sandeliai.paid = sck.paid
INNER JOIN scn 
    ON scn.scnid = scd.scnid
WHERE sck.prid = 1376 
GROUP BY 
    sck.prid 
```

失败了，尽管我会考虑使用子查询。子查询将计算每行的 count_of_goods。然后，外部查询将使用它来决定是否将该行的日期设置为 NULL。MIN(...somedate...,NULL) 将返回日期。这反过来意味着您应该获得该行上的 count_of_goods 不为 NULL 的最短日期。

当您查找 count_of_goods > 0 的日期时，子查询按日期分组。

当然，这只是一种选择，可能还有其他更有效的方法，但我相信这会如你所愿

```
SELECT
    sck.sckid,
    sck.prid,
    sck.paid,
    sck.sckcen,
    SUM(d.count_of_goods) AS count_of_goods,
    MIN(IF(d.count_of_goods>0,d.scndat,NULL)) AS `date`
FROM (
    -- Get the data and group it by date
    SELECT 
        sck.sckid,
        sck.prid,
        sck.paid,
        sck.sckcen,
        scn.scndat,
        SUM(scd.scdkiek) AS count_of_goods
    FROM sck 
    INNER JOIN scd ON scd.sckid = sck.sckid
    INNER JOIN sandeliai ON sandeliai.paid = sck.paid
    INNER JOIN scn ON scn.scnid = scd.scnid
    WHERE sck.prid = 1376 
    GROUP BY 
        sck.prid, -- may not really be needed
        scn.scndat
) AS d
GROUP BY d.prid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:11:41.947

尝试使用`having`，类似

```
SELECT 
sck.sckid,
sck.prid,
sck.paid,
sck.sckcen,
sum(scd.scdkiek) as count_of_goods,
min(scn.scndat) as `date`
FROM sck 
INNER JOIN scd ON scd.sckid = sck.sckid
INNER JOIN scn ON scn.scnid = scd.scnid
INNER JOIN sandeliai ON sandeliai.paid = sck.paid
WHERE sck.prid = 1376 GROUP BY prid HAVING count_of_goods > 0; 
```

这应该适合你。这可能会跳过一些 count = 0 的行，我认为这应该没问题（只是我个人的看法）。

请将此作为起点，而不是作为最终解决方案。

**编辑：**使用别名更新 sum(...)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:34:39.267

现在我的问题不是很合乎逻辑我尝试在我的问题中结合两个查询，然后我得到一个很好的答案，这是我的解决方案：

```
SELECT 
sck.sckid,
sck.prid,
sck.paid,
sck.sckcen,
sum(scd.scdkiek) as count_of_goods,
(SELECT 
scn.scndat
FROM sck 
INNER JOIN scd ON scd.sckid = sck.sckid
INNER JOIN scn ON scn.scnid = scd.scnid
WHERE sck.prid = 1376 GROUP BY sck.sckid having sum(scd.scdkiek) > 0 ORDER BY scn.scndat LIMIT 1) as `date`
FROM sck 
INNER JOIN scd ON scd.sckid = sck.sckid
INNER JOIN scn ON scn.scnid = scd.scnid
WHERE sck.prid = 1376 GROUP BY prid; 
```

# sql - 由于 datediff 函数介于两者之间的日期问题

> ID：16185099
> 
> 赞同：1
> 
> 时间：2013-04-24T06:43:47.460
> 
> 标签：sql, database, sql-server-2005, join

我有以下查询：

```
SELECT   
  datediff(d, 0, sauda_date),
  Scrip_Code,
  SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty   ELSE 0 END) AS BuyQty, 
  SUM(CASE WHEN Buy_sell = 1 THEN Market_Rate ELSE 0 END) AS BuyRate, 
  SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) AS BuyAmount,
  SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) AS SellQty, 
  SUM(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS SellRate,
  (CASE WHEN SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) >
             SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) THEN 'BF' 
      ELSE 'BT' END ) as TradeType, 
  SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END) AS SellAmount, 
  SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) - 
  SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) as NETQTY,
  SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) - 
  SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)as NetAmt,
  SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END) - 
  SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) as PNLAmt 
FROM tradeFile 
where Inst_Type = 'FUTIDX' 
   OR Inst_Type='FUTSTK' 
  and Sauda_Date = convert(datetime,'1 Mar 2013') 
group by Scrip_Code, ExpiryDate, datediff(d,0,sauda_date) 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/IPfZk.jpg)

此查询用于按日期计算 Buy_Qty,Sell_Qty 的总和。[参考此任务：[无法在查询结果中获取单个日期](https://stackoverflow.com/questions/16168218/not-able-to-get-individual-date-in-query-result)

但是我们可以看到 datediff(d,0,sauda_date) 列（即第一列）给了我一些结果，但我想在这个结果中添加 sauda_date 作为日期。

我应该在此查询中进行哪些更改。

我通过在查询中直接添加 sauda_date 进行了尝试，但它给了我错误。

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:33:31.130

如果您`GROUP BY`在查询中使用 a ，那么（在 T-SQL 的情况下）在查询的字段部分中，您只能使用来自`GROUP BY`或聚合函数 ( `SUM`, `COUNT`,....) 的字段。所以你不能只添加`sauda_date`. 您应该使用聚合函数添加它。例如`MIN(sauda_date)`. 或者您可以将其添加到 GROUP BY 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:20:46.763

不确定您的结果要求..

如果您将其按列表分组，只需在选择列表中添加 sauda_date 就不会出错，我已经尝试过 belwo 及其工作。

```
Select datediff(d,0,f.Date), 
       sum(f.price), 
      f.OrderID,
       f.Date
from test f
group by f.Date,OrderID,datediff(d,0,f.Date) 
```

否则，您可以使用自我加入在您的键列上仅获取 sauda 日期加入主要结果

# asp.net-mvc-4 - Kendo UI Grid 显示 [object Object]

> ID：16185101
> 
> 赞同：2
> 
> 时间：2013-04-24T06:43:51.840
> 
> 标签：asp.net-mvc-4, kendo-grid

我有一堂课

```
public class LookupClass {
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我在另一堂课中引用过的

```
public class Sampleclass {
    public int Id { get; set; }
    public LookupClass LookupEntry { get; set; }
} 
```

显示在 KendoUI 网格中

```
@(Html.Kendo().Grid<SampleClass>()
    .Name("SomeGrid")
    .Columns(cols => {
         cols.Bound(o => o.LookupEntry).Title("Lookup Column")  // Displays [object Object]
         cols.Bound(o => o.LookupEntry.Name) // displays name correctly
    }
    .DataSource(datasource => 
         // leaving this out since the data is seems to be loading correctly.
    )
) 
```

显示网格时，它只显示“查找列”列中单元格中的值的 [object Object]。我已经让编辑器模板正常工作（因为没有必要，所以省略了代码，基本上是从[这里](http://docs.kendoui.com/documentation/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/editor-templates)复制的）和保存/加载工作（为简单起见省略了），但我似乎无法弄清楚如何从 Lookup 显示 Name 属性班级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T00:10:01.340

找到了一个 KendoUI 示例，展示了如何执行此操作（[http](http://demos.kendoui.com/web/grid/editing-custom.html) ://demos.kendoui.c​​om/web/grid/editing-custom.html ）

基本上你必须使用 ClientTemplate 来显示你想要显示的属性

```
@(Html.Kendo().Grid<SampleClass>()
    .Name("SomeGrid")
    .Columns(cols => {
         cols.Bound(o => o.LookupEntry).ClientTemplate("#=LookupEntry.Name#").Title("Lookup Column") 
    }
) 
```

附带说明，如果您尝试创建新记录，则会产生关于找不到 LookupEntry 的错误（不记得确切的消息）。在列出的示例中，模型部分中还有一些内容显示了如何设置默认对象。

# php - 使用 0123456789、8888888888、9999999999 等模式限制电话号码

> ID：16185104
> 
> 赞同：0
> 
> 时间：2013-04-24T06:43:54.857
> 
> 标签：php, validation

我需要使用以下模式限制电话号码：

```
0123456789, 
1111111111, 
2222222222, 
3333333333, 
4444444444, 
etc. 
```

我正在尝试用 PHP 来实现。

到目前为止，我想出了创建一个数组并在其中搜索以限制该手机号码。

有没有更好的方法来做同样的事情？

可能是一个正则表达式，也可能是 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:59:07.463

如果您不想像您提到自己那样不断更新一长串数字以进行检查，那么您基本上想要进行*模式检测*/*模式识别*。

根据您以前的知识，这可能是微不足道的，也可能是非常复杂的。

可以在这里找到一个小的开始......但是关于这个主题有很多非常厚的书；）

[http://en.wikipedia.org/wiki/Pattern_recognition](http://en.wikipedia.org/wiki/Pattern_recognition)

所以“最简单”的方法可能是使用数组查找。缺点是您必须事先知道要列入黑名单的每个号码。一种中间方法是拥有一组您检查的无效格式的正则*表达式*，而不是在数组中包含实际数字。

因此，您可以使用正则表达式涵盖以下内容

*   简短的数字
*   数字变长
*   只有相同数字的数字

ETC

根据可用的系统和地理位置，实际上可能可以对一些已知的数字数据库进行某种查找。但这可能会导致未列出的数字出现误报。

对于一个全局的、动态的、工作的系统来说，保持查找数组和对数据库进行查找都可能被证明变得非常难以处理，因为要保持工作支持的已知数据源的数量可能会增长到难以处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:47:31.177

如果您需要阻止特定的电话号码，您可以这样做：

```
$numberToTest = [...]; // this is your user input number to test

$notAllowed = array(
  '0123456789',
  '1111111111',
  '2222222222',
  // and so on
);

if(in_array($numberToTest, $notAllowed)) {
  // NOT VALID
}
else {
  // VALID
} 
```

要匹配所有数字，如 1111111111、2222222222 等，您可以这样做：

```
if(preg_match('/^(\d)\1{9}$/', $numberToTest)) {
  // NOT VALID
}
else {
  // VALID
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:13:24.980

带有正则表达式的 Javascript。当号码在受限列表中时，isRestricted 设置为 true：

```
var number = "0123456789";
var isRestricted = number.match( /0123456789|1111111111|2222222222|3333333333|4444444444/g ) != null; 
```

我确信 regexps 与 PHP 的使用方式与使用[preg_match](http://php.net/manual/en/function.preg-match.php)的方式几乎相同。

# python - 数据存储中的一对一和多对多关系？

> ID：16185106
> 
> 赞同：0
> 
> 时间：2013-04-24T06:43:57.693
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有如下所示的用户和项目模型。

```
class User(db.Model):
    first_name = db.StringProperty(required=True)
    last_name = db.StringProperty(required=True)
    email_address = db.StringProperty(required=True)

class Project(db.Model):
    name = db.StringProperty(required=True)
    time_required = db.IntegerProperty(required=True)
    manager = db.ReferenceProperty(User, collection_name='project_manager')
    members = db.ListProperty(db.Key) 
```

这是项目管理应用程序。一些要点

1.  每个项目只能有一名经理（一对一）
2.  一个用户可以管理多个项目（一对多）
3.  项目可以有许多团队成员。我认为这可以通过 ListProperty 来完成。

我不知道如何继续，我也是数据存储和数据库设计的新手。

# ajax - 使用 jquery 将选定的行发布到 Django 1.5 视图

> ID：16185107
> 
> 赞同：1
> 
> 时间：2013-04-24T06:43:58.310
> 
> 标签：ajax, django, post, view, selectable

我有一个包含多个表的表`<tr>`，每个表都有一个 PK 作为 ID。我要将这些`<tr>`发布到 Django 1.5 视图，但我不知道如何正确发送数据。

我已经制作了这个 javascript 函数，它发布成功，但我不知道如何发送 selected_rows 的 id，以及如何在基于类的 Django 视图中检索它们。

```
function update() {
    var selected_rows = $(".ui-selected");
    $.ajax({
        type: "POST",
        url: "/confirm/",
        data: { name: "selected_rows" },
        success: function(data) {
            selected_rows.addClass('success');
        }
    });
} 
```

我猜 Django 视图类似于

```
class ConfirmView(TemplateView):
    def post(self, queryset=None):
        return HttpResponse("POST") 
```

我也试过

```
function update() {
    var selected_rows = $(".ui-selected");
        selected_rows.each(function() {
            $.ajax({
            type: "POST",
            url: "/confirm/",
            data: { id: $(this).attr("id") },
            success: function(data) {
                $(this).addClass('success');
            }
        });
    });
} 
```

和

```
class ConfirmView(TemplateView):
    def post(self, queryset=None):
        if self.request.POST['id']:
            ModelName.objects.filter(pk=self.request.POST['id']).update(is_confirmed=True)
        return HttpResponse("POST") 
```

但我想最好处理同一个数据库查询中的所有行，而不是像上面那样拆分它们。但是如果我像上面那样拆分它们，我可以检查它们是否更新成功，所以这样可能更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:03:00.763

你需要做：

```
data: { name: selected_rows }  //Do not put selected_rows in quotes 
```

另外你为什么在这里使用 TemplateView，它没有给你任何优势。您只需要创建一些东西并发送 ajax 将处理的响应。您可以在此处使用功能视图。

如果您使用基于类的视图，则您的签名`post`有一个错误：

它应该是：

```
def post(self, request, *args, **kwargs):
    name = request.POST['name'] 
```

# amazon-cloudformation - 如何使用 CloudFormation 在 IAM 中设置用户名和组名？

> ID：16185109
> 
> 赞同：15
> 
> 时间：2013-04-24T06:43:58.873
> 
> 标签：amazon-cloudformation, amazon-iam

我创建了一个 CloudFormation 模板，并且我想创建 IAM 用户，为此我使用了这个 JSON 字符串：

```
"CFNUser" : {
  "Type" : "AWS::IAM::User",
  "Properties" : {
    "LoginProfile": {
      "Password": { "Ref" : "AdminPassword" }
    }
  }
}, 
```

然后对于我使用的组：

```
"CFNUserGroup" : {
  "Type" : "AWS::IAM::Group"
}, 
```

创建堆栈后，我得到以下信息：

> 用户名 - IAMUsers-CFNUser-E1BT342YK7G6
> 
> 组名 - IAMUsers-CFNUserGroup-1UBUBRYALTIMI

所以我的问题是，如何在这里设置用户名？组名也一样？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-27T16:16:05.397

After talking with one of the AWS support, at this time of writing, it is not possible to specify your own username and group name in IAM using CloudFormation template :-(

Maybe there's a reason why they do not allow user to do this...anyway it's good thing that I have answer to this question and I will be glad if someone find this useful.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-21T09:00:08.873

亚马逊从 2016 年 7 月 20 日起增加了支持。 [https://aws.amazon.com/about-aws/whats-new/2016/07/aws-cloudformation-adds-support-for-aws-iot-and-additional-updates /](https://aws.amazon.com/about-aws/whats-new/2016/07/aws-cloudformation-adds-support-for-aws-iot-and-additional-updates/)

```
{
  "Type": "AWS::IAM::User",
  "Properties": {
    "Groups": [ String, ... ],
    "LoginProfile": LoginProfile Type,
    "ManagedPolicyArns": [ String, ... ],
    "Path": String,
    "Policies": [ Policies, ... ],
    "UserName": String
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-25T23:40:07.033

对于组，它是 GroupName 属性：

```
 "CFNUserGroup" : {
       "Type" : "AWS::IAM::Group",
       "Properties": {
          "GroupName": "My_CFN_User_Group"
        }
     }
```

# android - 如何始终在后台运行应用程序以在android中显示通知

> ID：16185111
> 
> 赞同：0
> 
> 时间：2013-04-24T06:44:10.560
> 
> 标签：android, json, service, notifications

每当任何新数据进入服务器时，我都会尝试显示通知。但我面临一个问题。它仅在我打开活动时显示通知。但它不是在后台运行。我正在使用服务在后台运行该功能。谁能告诉我如何始终在后台运行此应用程序，如果应用程序也关闭了？

我在主要活动的 onCreate 方法中调用服务，如下所示：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dashboard);
    startService(new Intent(this, ReviewUpdateService.class));
      .....
      } 
```

在 ReviewUpdateService.class 我写了这段代码：

```
 public class ReviewUpdateService extends IntentService{

private Notification.Builder earthquakeNotificationBuilder;
public static final int NOTIFICATION_ID = 1;
public static String QUAKES_REFRESHED = "com.example.androidhive.QUAKES_REFRESHED";
private String user_id;
JSONObject jsonData;
private static String share_pref_file = "json_file";    

JSONArray service_notification;
int no_of_notify;

  public ReviewUpdateService() {
        super("ReviewUpdateService");
  }

  private AlarmManager alarmManager;
  private PendingIntent alarmIntent;

public void onCreate() {
    super.onCreate();
    alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
    SharedPreferences prefs = getSharedPreferences(share_pref_file,
            Context.MODE_PRIVATE);
    String strJson = prefs.getString("jsondata", "");

    if (!strJson.equals("")) {
        try {
            jsonData = new JSONObject(strJson);
            user_id = jsonData.getString(LoginActivity.KEY_UID);                
        } catch (JSONException e) {

            e.printStackTrace();
        }
    }

    String ALARM_ACTION = ReviewAlarmReceiver.ACTION_REFRESH_DASHBOARD_ALARM;
    Intent intentToFire = new Intent(ALARM_ACTION);
    alarmIntent = PendingIntent.getBroadcast(this, 0, intentToFire, 0);

    earthquakeNotificationBuilder = new Notification.Builder(this);
    earthquakeNotificationBuilder
        .setAutoCancel(true)
        .setTicker("New Review detected")
        .setSmallIcon(R.drawable.icon_1);
}
 public void refreshEarthquakes(String formattedDate) {
        // Get the XML
        //URL url;
     UserFunctions userFunctions =  new UserFunctions();;
        try {           
                 Log.d("user_id", user_id);
                JSONObject json_city = userFunctions
                    .getNotification(user_id, formattedDate);
            if(json_city!=null){
        {
                try {
                    String notify_get_id = json_city.getString(LoginActivity.KEY_NO_NOTIFY);
                    no_of_notify = Integer.parseInt(notify_get_id);
                    service_notification = json_city
                            .getJSONArray(LoginActivity.KEY_SERVICE_NOTIFY);
                } catch (JSONException e) {

                    e.printStackTrace();
                }
            }
                }

            if(service_notification!=null)
            {

            // looping through all item nodes <item>
            for (int i = 0; i < service_notification.length(); i++) {

                try {
                    JSONObject c = service_notification.getJSONObject(i);                                                   
                    String dealer = c.getString("Dealer Rater");
                    String google = c.getString("Google+ Local");
                    String car = c.getString("Cars.com");
                    String edmunds = c.getString("Edmunds.com");
                    String yelp = c.getString("Yelp");
                    String yahoo = c.getString("Yahoo! Local");
                    String insider = c.getString("Insider Pages");
                    String city = c.getString("City Search");   
                    int dealer2 = Integer.parseInt(dealer);
                    int google2 = Integer.parseInt(google);
                    int car2 = Integer.parseInt(car);
                    int edmunds2 = Integer.parseInt(edmunds);
                    int yelp2 = Integer.parseInt(yelp);
                    int yahoo2 = Integer.parseInt(yahoo);
                    int insider2 = Integer.parseInt(insider);
                    int city2 = Integer.parseInt(city);
                    String service_unit1 = "Dealer Rater";
                    String service_unit2 = "Google+ Local";
                    String service_unit3 = "Cars.com";
                    String service_unit4 = "Edmunds.com";
                    String service_unit5 = "Yelp";
                    String service_unit6 = "Yahoo! Local";
                    String service_unit7 = "Insider Pages";
                    String service_unit8 = "City Search";
                    if(dealer2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit1);
                        }
                    }else if(google2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit2);
                        }
                    }else if(car2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit3);
                        }
                    }else if(edmunds2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit4);
                        }
                    }else if(yelp2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit5);
                        }
                    }else  if(yahoo2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit6);
                        }
                    }else if(insider2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit7);
                        }
                    }else if(city2 > 0 ) {
                        if(no_of_notify > 0){
                            broadcastNotification(no_of_notify,service_unit8);
                        }
                    }

                } catch (JSONException e) {

                    e.printStackTrace();
                }
                }
             }  
      //  }
        }

        finally {
        }
      }

    @Override
    protected void onHandleIntent(Intent intent) {

        int updateFreq = 60;    
         Calendar calender = Calendar.getInstance();
            System.out.println("Current time => "+calender.getTime());

            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm");
            String formattedDate = df.format(calender.getTime());
            Log.d("time", formattedDate);
            int alarmType = AlarmManager.ELAPSED_REALTIME_WAKEUP;
            long timeToRefresh = SystemClock.elapsedRealtime() +
                                 updateFreq*60*1000;
            alarmManager.setInexactRepeating(alarmType, timeToRefresh, updateFreq*60*1000, alarmIntent);

        refreshEarthquakes(formattedDate);
        sendBroadcast(new Intent(QUAKES_REFRESHED));

    } 
     private void broadcastNotification(int no_of_review, String service_name ) {
            Intent startActivityIntent = new Intent(this, DashboardActivity.class);
            PendingIntent launchIntent =
              PendingIntent.getActivity(this, 0, startActivityIntent, 0);

            earthquakeNotificationBuilder
              .setContentIntent(launchIntent)
              .setContentTitle( no_of_review+" "+"new review is there" )
              .setContentText(service_name);

            if (no_of_review > 10) {
              Uri ringURI = 
                RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

              earthquakeNotificationBuilder.setSound(ringURI);
            }

            double vibrateLength = 100*Math.exp(0.53*no_of_review);
            long[] vibrate = new long[] {100, 100, (long)vibrateLength };
            earthquakeNotificationBuilder.setVibrate(vibrate);

            int color;
            if (no_of_review < 2)
              color = Color.GREEN;
            else if (no_of_review < 5)
              color = Color.YELLOW;
            else
              color = Color.RED;

            earthquakeNotificationBuilder.setLights(
              color, 
              (int)vibrateLength, 
              (int)vibrateLength);

            NotificationManager notificationManager 
              = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

            notificationManager.notify(NOTIFICATION_ID,
              earthquakeNotificationBuilder.getNotification());
          }

        } 
```

在一个接收器方法中，我添加了一个这样的类：

```
 public class ReviewAlarmReceiver extends BroadcastReceiver{

public static final String ACTION_REFRESH_DASHBOARD_ALARM = "com.example.androidhive.ACTION_REFRESH_EARTHQUAKE_ALARM";

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Intent startIntent = new Intent(context, ReviewUpdateService.class);
    context.startService(startIntent);
} 
```

}

在 Android.manifest 文件中，我进行了如下修改：

```
 .........
  <service android:enabled="true"
    android:name=".ReviewUpdateService"/>

  <receiver android:name=".ReviewAlarmReceiver">
       <intent-filter>
            <action android:name="com.example.androidhive.ACTION_REFRESH_EARTHQUAKE_ALARM" />
       </intent-filter>
   </receiver>
  ........ 
```

我不知道运行的问题是什么。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:10:25.847

使用带有 Timer 方法的简单服务来执行您的操作，并且每当您的服务完成操作时，然后使用

```
 public static final String CUSTOM_INTENT = "packagename.activityname"
         Intent broadcastIntent=new Intent();
        broadcastIntent.setAction( CUSTOM_INTENT);
        broadcastIntent.putExtra(value,"name");// put data to send to your activity
        sendBroadcast( broadcastIntent ); 
```

在使用广播接收器的主要活动中接收来自服务的意图，例如

```
 @Override
  public void onReceive(Context context, Intent intent) {
   try {

    updateUI(intent);//write your ui update code in definition of this method
} catch (Exception e) {
// TODO Auto-generated catch block
        e.printStackTrace();
    }       
           }
             };

   public void UpdateUI(Intent intent){
       String value= intent.getExtras().getString("name");
//rest of operation perform for updation of notification here
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:53:49.450

试试这个 - 在里面`oncreate`的新线程中启动服务`mainactivity`，如果设备关闭，你可以注册接收器以`onbootup`完成`broadcastreceiver`并在接收器的 onreceive mtd 内启动服务。

# debugging - RubyMine 5.4 调试器超时，但调试控制台显示已连接

> ID：16185113
> 
> 赞同：1
> 
> 时间：2013-04-24T06:44:20.267
> 
> 标签：debugging, rubymine

我对 Rails 项目中备受关注的“如何让 ruby​​mine 调试工作”有一个转折。在 RubyMine 中选择“Run/Debug 'myproject'”会弹出一个标题为“connecting to the debugger”的对话框，该对话框可能会在 10 秒后失败（超时）。但是，在调试控制台中，一旦我调用运行/调试，就会有一条信息性消息从“（i）断开连接”变为“（i）连接”。超时后，这会变回“（i）断开连接”连接是否真的发生但RubyMine不知道？

编辑：我应该注意，我能够连接到在 RubyMine 之外手动启动的调试服务器（rdebug-ide），并且我的计算机系统（Mac OS X）有一个名称，并且控制台中没有显示任何错误。 ..RubyMine 只是在自动启动调试服务器时无法连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T11:34:48.817

解决了！我的主机名莫名其妙地设置为“localhost”。我通过命令行将其更改为其他内容

```
sudo hostname new-name 
```

RubyMine 调试器现在连接并立即启动。谷歌表示让主机名返回“localhost”是一种常见的 Mac OS X 条件。我想建议 JetBrains 团队对此进行检查并向用户发出警告通知，以避免将来在 Mac OS X 上出现此类问题。或者只是重写内部调试器连接代码，以免受到这种情况的影响。感谢 CrazyCoder 的建议。

# jsf - 如何屏蔽 url 并编写我们自己的 URL JSF

> ID：16185114
> 
> 赞同：0
> 
> 时间：2013-04-24T06:44:23.437
> 
> 标签：jsf, servlets

我想掩盖我的 JSF 网址，以进行定制。
例如：

```
If url is :  http://localhost:8080/myapp/mypages/index.xhtml

I want to mask it as :  http://localhost:8080/MyApp/Home 
```

我想对我的应用程序的所有网址都这样做。

对不起，如果这是重复的问题，！如果在 JSF 问题上有任何类似的问题，请指出我会删除这个问题。

# charts - SSRS 重叠柱形图

> ID：16185115
> 
> 赞同：1
> 
> 时间：2013-04-24T06:44:24.313
> 
> 标签：charts, reporting-services

目前我有以下图表： ![在此处输入图像描述](https://i.stack.imgur.com/PUiPA.jpg)

它目前包含一列（蓝色一列）和一个范围列（白色一列）。但我真正需要的是一个如下所示的图表：

![在此处输入图像描述](https://i.stack.imgur.com/kogsY.jpg)

所以白色列应该与蓝色列重叠。我尝试将范围列更改为普通列并更改了“CustomAttribute”PointWidth，但无法使我的图表看起来像所需的图表。

有人知道该怎么做吗？谢谢

* * *

@glh：我知道，它目前看起来像这样（将白色范围更改为列）： ![在此处输入图像描述](https://i.stack.imgur.com/PUiPA.jpg)

*ANGEFALLEN* = 蓝色栏 *EINGEPLANTV1* = 白色栏

问题是白柱现在就在蓝柱的右边。 ![在此处输入图像描述](https://i.stack.imgur.com/kogsY.jpg)

如果我更改图表数据的顺序，蓝色列就在白色列的右边。但我需要白色列位于蓝色列的后面，如主帖/问题的第二张图片所示。

**跟进 25.04.2013：**

图表应如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/pu5gH.jpg)

我需要**将**1/3 的白色柱子移到蓝色柱子后面，这样 2/3 的白色柱子仍然可见。蓝色列必须位于前景中，而白色列必须位于背景中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T20:48:41.467

**重叠系列：**

将“重叠”系列更改为“范围柱”图表类型。这将允许您将两个系列叠加在一起。

执行此操作后，您会注意到该系列将获得两个值下拉列表：

![具有多个值下拉列表的范围列系列](https://i.stack.imgur.com/X7x9R.jpg)

将“低”下拉菜单设置为值为 0 的表达式。

将“高”下拉菜单设置为您想要表示的值。

**偏移系列位置：**

我实际上不确定这在 SSRS 中是否可行。但是，您可以使用分层系列的宽度来实现类似的效果。

![系列列宽](https://i.stack.imgur.com/wR9E0.jpg)

根据您想要的效果，将系列的 PointWidth 属性（在 CustomAttributes 下）设置为大于或小于默认的 0.08。

这是我放在一起的一个快速模型。这并不完全是您想要的，但也许它会让您的创意脑汁源源不断。

![在此处输入图像描述](https://i.stack.imgur.com/T4Gpm.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:48:50.660

您应该能够在值框中拖动值，否则会有一个蓝色的向上或向下箭头来更改数据的显示顺序。请参阅下面的示例，了解您在选择图表数据时将看到的内容。

![在此处输入图像描述](https://i.stack.imgur.com/H5xYZ.jpg)

# vb.net - 多重调用功能无法正常工作

> ID：16185116
> 
> 赞同：1
> 
> 时间：2013-04-24T06:44:25.187
> 
> 标签：vb.net, call, procedure

这是我移除玩家卡并将其添加到弃牌堆的通用子。然后生成一个数字并代表我的数量整数数组中的一张卡片。

此处的抓取变量表示正在播放的抓取卡中的值，然后防守方可以防御抓取，然后如果他们同时拥有阻挡和抓取，则可以抓住进攻方。我的代码中的从 1 到 3 的变量代表了该过程中的不同步骤。Grab 1 逻辑将其设置为移除防御者阻挡卡。Grab 2 移除防守者的抢牌， Grab 3 移除违规者的抢牌。

抓取 1 或移除块卡可以正常工作，以及抓取 3。但是由于某种原因，抓取 2 无法正常工作。取而代之的是，它替换了该块两次的卡槽。Grab 1 移除了块，并且出于某种原因，grab 2 正在移除替换。

```
Private Sub GrabFromDeckAndDiscard()
        'ReDeclare CheckBox Array for Private sub
        Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5}

        CardCheckBoxArray(NumberArrayStorageForSpecialCards Mod 5).Checked = False
        If Grab = 1 Then
            'set checks to the number in the number array set for block
            Checks = DodgeBlockDisarmDialog.CheckGrabs
        ElseIf Grab = 2 Then
            'set checks to the number in the number array set for grab
            GrabGone = (T * 5)
            Do Until GrabGone = (T * 5) + 4 Or Player1HandGroup(NumberArray(GrabGone)).ID = 19
                MsgBox(GrabGone)
                If Player1HandGroup(NumberArray(GrabGone)).CardNameString = "Grab" Then
                    Checks = GrabGone
                End If
                GrabGone += 1
            Loop
        ElseIf Grab = 3 Then
            'set checks to number that will remove offending players grab
            PlayerTemp2 = T
            T = DodgeBlockDisarmDialog.PlayerTemp
            Checks = NumberArrayStorageForSpecialCards
        End If
        'Discard
        Player1HandGroup(NumberArray(Checks)).QuantityInteger(T) -= 1
        'Add Card to Discard Pile
        DiscardGroup(NumberArray(Checks)).QuantityInteger(0) += 1
        'Shuffle Deck from Discard Pile if Deck is out of cards
        Call DiscardPile()
        'Reset Number Generator, unless weapon isn't discard
        Call RandomNumberGenerator()

        If DeckGroup(Number).QuantityInteger(0) > 0 Then
            DeckGroup(Number).QuantityInteger(0) -= 1
            'Select the Player depending value of T
            Player1HandGroup(Number).QuantityInteger(T) += 1

            NumberArray(Checks) = Number

            If Grab <> 3 Then
                For FillCheckBoxes As Integer = 5 * T To (5 * T) + 4
                    CardCheckBoxArray(FillCheckBoxes Mod 5).Text = Player1HandGroup(NumberArray(FillCheckBoxes)).CardNameString
                Next
            End If
        End If

        'Remove Defending players block card
        If Grab = 1 Then
            Grab = 2
            Call GrabFromDeckAndDiscard()
            Exit Sub
            'Remove defending players Grab card
        ElseIf Grab = 2 Then
            Grab = 3
            Call GrabFromDeckAndDiscard()
            Exit Sub
            'Remove offenders Grab card
        ElseIf Grab = 3 Then
                Grab = 0
                GrabInPlace = False
                T = PlayerTemp2
                Exit Sub
        End If

        Call SpecialCards()

    End Sub 
```

# linux - ifconfig eth0:1 192.168.3.1 网络掩码 255.255.255.0 返回 SIOCSIFFLAGS：无法分配请求的地址

> ID：16185119
> 
> 赞同：0
> 
> 时间：2013-04-24T06:44:30.360
> 
> 标签：linux, ifconfig

我正在使用“ifconfig eth0:1 192.168.3.1 netmask 255.255.255.0”在 eth0 上设置别名 IP。但是有一个错误弹出窗口：SIOCSIFFLAGS：无法分配请求的地址 SIOCSFNETMASK：无法分配请求的地址

ifconfig 的版本是：net-tools 1.60 ifconfig 1.42 (2001-04-13)

该错误是由 ifconfig 源代码中的 ioctl() 函数引起的： /* 设置某个接口标志。*/ static int set_flag(char *ifname, short flag) { struct ifreq ifr;

```
safe_strncpy(ifr.ifr_name, ifname, IFNAMSIZ);
if (ioctl(skfd, SIOCGIFFLAGS, &ifr) < 0) {
fprintf(stderr, _("%s: unknown interface: %s\n"), 
    ifname, strerror(errno));
return (-1);
}
safe_strncpy(ifr.ifr_name, ifname, IFNAMSIZ);
ifr.ifr_flags |= flag;
**if (ioctl(skfd, SIOCSIFFLAGS, &ifr) < 0) {
perror("SIOCSIFFLAGS");
return -1;
}**
return (0); 
```

}

我的问题是，谁能帮助解释为什么 ioctl(skfd, SIOCSIFFLAGS, &ifr) 返回无法分配请求的地址 (errno=99)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T05:17:31.957

虽然没有人回答这个问题，但我想我已经找到了根本原因。

net\ipv4 中的 devinet.c 给了我一些信息。

# java - 缓冲阅读器仅读取文本文件中的第一行？

> ID：16185120
> 
> 赞同：0
> 
> 时间：2013-04-24T06:44:30.530
> 
> 标签：java, text-files, bufferedreader

![输出看起来像](https://i.stack.imgur.com/lXrBa.jpg)

在这里，我尝试使用缓冲阅读器读取文本文件并在数据库中创建表，但缓冲阅读器仅从我的文本文件中读取名字。我可以知道我的代码有什么问题...它在 MySQL 中运行良好，但在 SQL Server 中它只读取名字。

文本文件：[http ://textuploader.com/?p=6&id=vrQs9](http://textuploader.com/?p=6&id=vrQs9)

完整代码：

```
import com.mysql.jdbc.Connection;
import com.mysql.jdbc.DatabaseMetaData;
import com.mysql.jdbc.Statement;
import java.io.*;
import java.awt.*;
import java.util.*;
import javax.swing.*;
import java.awt.event.*;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.table.*;
import java.sql.DriverManager;
import java.sql.ResultSet;

public class Stackq extends AbstractTableModel {

Vector<String> data;
Vector columns;

public Stackq() {

    String line;
    data = new Vector<String>();
    columns = new Vector();
    int count = 0;

    try {
        FileInputStream fis = new FileInputStream("D:/joy/text/registration.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fis));
        StringTokenizer st1 = new StringTokenizer(br.readLine(), "\t");
        while (st1.hasMoreTokens()) {
            columns.addElement(st1.nextToken());
            count++;
        }
        while ((line = br.readLine()) != null) {
            StringTokenizer st2 = new StringTokenizer(line, "\t");
            for (int i = 0; i < count; i++) {
                if (st2.hasMoreTokens()) {
                    data.addElement(st2.nextToken());
                } else {
                    data.addElement("");
                }
            }
        }
        br.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
 }

public void setValueAt(Object value, int row, int col) {
    data.setElementAt((String) value, col);
    fireTableCellUpdated(row, col);
}

public boolean isCellEditable(int row, int col) {
    //if (4 == col){

    return true;
}
//else {
// return false;
// }
//}

//public void insertData(Object[] values){
// data.add(new Vector());
//for(int i =0; i<values.length; i++){
//((Vector) data.get(data.size()-1)).add(values[i]);
//}
//fireTableDataChanged();
// }
public void removeRow(int row) {
    data.removeElementAt(row);
    fireTableDataChanged();
}

public int getRowCount() {
    return data.size() / getColumnCount();
}

public int getColumnCount() {
    return columns.size();
}

public Object getValueAt(int rowIndex, int columnIndex) {
    return (String) data.elementAt((rowIndex * getColumnCount())
            + columnIndex);
}

public String getColumnName(int i) {
    return (String) columns.get(i);
}

public static void main(String args[]) {

    Stackq model = new Stackq();

    JTable table = new JTable();

    table.setModel(model);
    JScrollPane scrollpane = new JScrollPane(table);
    JPanel panel = new JPanel();
    panel.add(scrollpane);
    JFrame frame = new JFrame();
    frame.add(panel, "Center");
    frame.pack();
    frame.setVisible(true);

    StringBuffer sbTableData = new StringBuffer();
    for (int row = 0; row < table.getRowCount(); row++) {
        for (int column = 0; column < table.getColumnCount(); column++) {
            sbTableData.append(table.getValueAt(row, column)).append("\t");
        }
        sbTableData.append("\n");

    }
    System.out.println(sbTableData);

    try {

    PrintWriter f = new PrintWriter(new BufferedWriter(new FileWriter("D:/joy/text/registration6.txt", true)));

        //f.println(sbTableData+"\t"+"n");

        f.close();

    } catch (IOException e) {
        e.printStackTrace();
    }
    String readstr1 = null;

    int row = table.getRowCount();

    int column = table.getColumnCount();

    for (int j = 0; j < row; j++) {

        for (int i = 0; i < column; i++) {

  //System.out.println(table.getValueAt(j, i));
            readstr1 = (String) table.getValueAt(j, i);
 //System.out.println(readstr);

        }

    }

    try {
        // FILE READ AND TABLE CREATE
        String tname = "example11199";
        String dbname = "DB";
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        java.sql.Connection conn = DriverManager.getConnection("jdbc:sqlserver://localhost:1433;user=SOFTWARE\joy;databaseName=DB;integratedSecurity=true;");
        java.sql.Statement stmt = conn.createStatement();
        // stmt=conn.createStatement();
     //System.out.println("connect");
     //System.out.println(readstr1);
        FileInputStream fstr = new FileInputStream("D:/joy/text/registration6.txt");
        // Get the object of DataInputStream
        DataInputStream inn = new DataInputStream(fstr);
        BufferedReader brr = new BufferedReader(new InputStreamReader(inn));

        String readstr;
        java.sql.DatabaseMetaData dmd = conn.getMetaData();
        while ((readstr = brr.readLine()) != null) //DatabaseMetaData dmd = (DatabaseMetaData) conn.getMetaData();
        //while(readstr!=null)
        {
            ResultSet rs = dmd.getTables(null, "DB", "example11199", null);
            //set not null column
            if (String.valueOf(readstr).contains("NO")) {
                readstr = readstr.replaceAll("NO", "not null");
            } else if (String.valueOf(readstr).contains("YES")) {
                readstr = readstr.replaceAll("YES", "");
            }
            if (String.valueOf(readstr).contains("PRIMARY")) {
                readstr = readstr.replaceFirst("PRIMARY", "primary key");
            }
            System.out.println("replace string " + readstr);

            int k = 1;
            if (!rs.next()) {
                stmt.executeUpdate("CREATE TABLE " + tname + "(" + readstr + ")");

            } else {
                //System.out.println(readstr);
                stmt.executeUpdate("ALTER TABLE " + tname + " ADD(" + readstr + ")");
                System.out.println("altered");

            }

        }
        brr.close();
        inn.close();
    } catch (Exception e) {
    }

    }
    } 
```

已编辑，现在文本文件的所有内容都已打印，但最后在这里给出 null ： System.out.println("replace string" + readstr); 所以我无法创建具有空值的表。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:08:41.700

您正在重新创建您读取一行的表格。我认为这只适用于一次，所以它只读取第一行。

您似乎有一堆文本在传递和更改表格，以便在您尝试创建表格之前只读取文件行。我怀疑您想在尝试更改/创建表之前阅读整个文件。

顺便说一句，到处都进行格式化可能会使检查代码变得更加困难。我建议您在 IDE 中使用格式化程序，您应该能够看到您的代码将如何循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T00:48:26.657

```
 while ((readstr = brr.readLine()) != null) //DatabaseMetaData dmd = (DatabaseMetaData) conn.getMetaData();
    //while(readstr!=null)
    {
        ResultSet rs = dmd.getTables(null, "DB", "example11199", null);
        //set not null column
        if (String.valueOf(readstr).contains("NO")) {
            readstr = readstr.replaceAll("NO", "not null");
        } else if (String.valueOf(readstr).contains("YES")) {
            readstr = readstr.replaceAll("YES", "");
        }else if (String.valueOf(readstr).contains("PRIMARY")) {
            readstr = readstr.replaceFirst("PRIMARY", "primary key");
        }
        System.out.println("replace string " + readstr); 
```

尝试修复最后一个 if 语句再次检查它，它会工作。

# android - appengine 连接的 android 项目在到达时死亡

> ID：16185123
> 
> 赞同：12
> 
> 时间：2013-04-24T06:44:40.273
> 
> 标签：android, google-app-engine, google-cloud-endpoints, gae-eclipse-plugin

我正在按照[教程](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)进行操作；好吧，它实际上很基本，所以那里真的什么都没有。但是当我创建项目时，android 部分没有编译。Eclipse 抱怨无法解决导入问题。例如，在`com.myapp.deviceinfoendpoint`部分下面有一条读取行

```
import com.myapp.deviceinfoendpoint.Deviceinfoendpoint;
import com.myapp.deviceinfoendpoint.Deviceinfoendpoint.Builder;
import com.myapp.deviceinfoendpoint.model.DeviceInfo; 
```

有谁知道如何解决这一问题？也许这是一个构建路径问题，但没有关于如何设置构建路径的说明。

我正在使用 mac osx 山狮和日食朱诺

以下文件夹上也有红十字：

*   端点库/libdeviceinfoendpoint-v1/deviceinfoendpoint/deviceinfoendpoint-v1-生成源

*   /myapp/endpoint-libs/libmessageEndpoint-v1/messageEndpoint/messageendpoint-v1-generated-source

*   /myapp/endpoint-libs（和子文件夹）

和以下文件夹：

*   GCMIntentService.java

*   注册活动.java

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:50:09.380

是的，这也发生在我身上。发生这种情况的原因是因为某些方式（不确定是它的 Eclipse 还是 GAE 插件）中的类`endpoint-libs/libdeviceinfoendpoint-v1/deviceinfoendpoint/deviceinfoendpoint-v1-generated-source`

从预期的结构中移出：

```
./deviceinfoendpoint-v1-generated-source
    |- com
       |-myapp
           |- deviceinfoendpoint
               |- Deviceinfoendpoint.java 
```

无效结构：

```
./deviceinfoendpoint-v1-generated-source
    |- com
       |-google
           |- api
               |- services
                   |- com.myapp.deviceinfoendpoint
                       |- Deviceinfoendpoint.java 
```

理论上这不应该发生。但是，它确实如此！:-)

尝试重新生成客户端库，或尝试手动修复它们。

[更新：再次重新生成客户端库无济于事。要么尝试命令行模式。

**或者有点困难的方法手动完成**

1.  将包的所有内容移动`com.google.api.services/com.myapp/`到`com.myapp/`.
2.  搜索替换所有出现的“com.google.api.services”。在所有生成的 java 源文件中。

我试过了，它奏效了。]

* * *

PS：您可能想知道 Google Endpoints 目前正在经历一些中断。您可能需要等待一段时间才能对其进行测试。密切关注这个问题：[https ://code.google.com/p/googleappengine/issues/detail?id=9214](https://code.google.com/p/googleappengine/issues/detail?id=9214)

更新：参考向 Google 报告的此问题可能会有所帮助：[https ://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=117](https://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=117)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T19:06:42.723

最简单的解决方案是在向导的**默认位置**创建项目。然后它就可以工作了（在撰写本文时，它并没有使用）。您可以将它移动到您想要的任何地方。

![在此处输入图像描述](https://i.stack.imgur.com/IFgya.png)

您**可以**在不同的文件夹中创建它，但您必须：

*   编辑 descriptor.json 文件中的 modulePath 条目以删除额外的路径（在我的例子中将 com/test 更改为 com/）。
*   删除 java 构建路径中的错误生成源文件夹。
*   将正确的生成源文件夹添加到 java 构建路径中。

这是没有意义的，但为了完整性而包含在此处。我承认我不知道我在 descriptor.json 文件中做了什么，但它为我解决了这个问题。

# c# - 如何获取可选参数的默认值？

> ID：16185124
> 
> 赞同：2
> 
> 时间：2013-04-24T06:44:43.780
> 
> 标签：c#, constructor, default-value, optional-parameters

我有一个带有可选参数的构造函数。**我想要一个表达式**来调用该构造函数而不提供可选参数（我的意思是让对象使用参数的默认值构造）。

我在这里阅读*[表达式树可能不包含使用可选参数的调用或调用，](https://stackoverflow.com/questions/12413583/an-expression-tree-may-not-contain-a-call-or-invocation-that-uses-optional-argum)*这是不可能的。

我是说

```
var ctorInfo = getIt;
var f = Expression.Lambda<Func<T>>(Expression.New(ctorInfo)).Compile(); 
```

失败`System.TypeInitializationException`。

好的，我将传递默认值。但是如何获取参数的默认值呢？

```
ctorInfo.GetParameters().Select(?? 
```

*动机：学习目的，没有实际应用。*

**编辑：**编辑了*表达式树*标签，因为它不在构建表达式的上下文中，通常也有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:58:22.800

根据[以下文档`ParameterInfo.RawDefaultValue`](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.rawdefaultvalue.aspx)：

```
ctorInfo.GetParameters().Select( p => p.RawDefaultValue ); 
```

希望能帮助到你

编辑：更正属性，因为：

> 此属性 [DefaultValue] 仅在执行上下文中使用。在仅反射上下文中，请改用 RawDefaultValue 属性。

# javascript - 在 ASP.NET MVC 中动态加载脚本文件

> ID：16185128
> 
> 赞同：1
> 
> 时间：2013-04-24T06:45:04.663
> 
> 标签：javascript, asp.net-mvc, dynamic, partial-views

我正在使用 ASP.NET MVC。我有一个视图，可以在一个部分中加载部分视图的内容。

问题是局部视图中有一些脚本引用。因此，当我在主页中加载该部分视图的内容时，脚本标签会被删除以保护视图免受脚本注入攻击。

我尝试了不同的方法来过滤部分页面内容中的脚本标签并分别加载主题，但我没有成功。

例如，我尝试过滤脚本标签并将它们附加到主页的头部，如下所示：

```
 var scripts = $(content).filter('script'); 
 $(scripts).each(function() {
 $('head').append($(this)); 
```

我还尝试使用 $.getscript 加载这些脚本。该函数可以很好地执行，但它们不会出现在 chrome 开发人员工具的页面资源中。而且我不能在这些脚本中使用函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:22:13.347

您可以将脚本的所有引用移动到主视图，也可以使用 $.ajax "dataType as script" 动态加载脚本：

[http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

```
$.ajax({
  dataType : 'script',
  url : 'http://example.com',
  success : function() {
  console.log(a);
  }
}); 
```

# dynamics-crm-2011 - 创建案例时更新另一个实体的插件代码 mscrm 2011

> ID：16185132
> 
> 赞同：2
> 
> 时间：2013-04-24T06:45:12.763
> 
> 标签：dynamics-crm-2011, dynamics-crm

我是插件新手。我的问题是，创建案例后，我需要将案例 ID 更新到分类帐中。连接这两者的是leadid。在我的情况下，我将潜在客户重命名为呼出电话。

这是我的代码。我不知道它是否正确。希望你们能帮助我，因为它给了我错误。我设法注册它。构建和注册没有问题，但是当创建案例时，它给了我错误。

```
using System;
using System.IO;
using System.ServiceModel;
using System.ServiceModel.Description;
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Query;
using Microsoft.Xrm.Sdk.Messages;
using Microsoft.Xrm.Sdk.Client;
using System.Net;
using System.Web.Services;

/*
 * Purpose: 1) To update case number into lejar
 *         
 * Triggered upon CREATE message by record in Case form.
 */
namespace UpdateLejar
{
    public class UpdateLejar : IPlugin
    {
        /*public void printLogFile(String exMessage, String eventMessage, String pluginFile)
        {
            DateTime date = DateTime.Today;
            String fileName = date.ToString("yyyyMdd");
            String timestamp = DateTime.Now.ToString();

            string path = @"C:\CRM Integration\PLUGIN\UpdateLejar\Log\" + fileName;
            //open if file exist, check file..
            if (File.Exists(path))
            {
                //if exist, append
                using (StreamWriter sw = File.AppendText(path))
                {
                    sw.Write(timestamp + " ");
                    sw.WriteLine(pluginFile + eventMessage + " event:  " + exMessage);
                    sw.WriteLine();
                }

            }

            else
            {
                //if no exist, create new file
                using (StreamWriter sw = File.CreateText(path))
                {
                    sw.Write(timestamp + " ");
                    sw.WriteLine(pluginFile + eventMessage + " event:  " + exMessage);
                    sw.WriteLine();
                }
            }
        }*/

        public void Execute(IServiceProvider serviceProvider)
        {

            ITracingService tracingService = (ITracingService)serviceProvider.GetService(typeof(ITracingService));
            IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));

            IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

            //for update and create event
            if (context.InputParameters.Contains("Target") &&
                context.InputParameters["Target"] is Entity)
            {
                // Obtain the target entity from the input parmameters.
                Entity targetEntity = (Entity)context.InputParameters["Target"];

                // Verify that the entity represents a connection.
                if (targetEntity.LogicalName != "incident")
                {
                    return;
                }

                else
                {
                    try
                    {

                        //triggered upon create message
                        if (context.MessageName == "Create")
                        {
                            Guid recordid = new Guid(context.OutputParameters["incidentid"].ToString());

                            EntityReference app_inc_id = new EntityReference();
                            app_inc_id = targetEntity.GetAttributeValue<EntityReference>("new_outboundcalllid");
                            Entity member = service.Retrieve("new_lejer", ((EntityReference)targetEntity["new_outboundcallid"]).Id, new ColumnSet(true));
                            //DateTime createdon = targetEntity.GetAttributeValue<DateTime>("createdon");

                            if (app_inc_id != null)
                            {
                                if (targetEntity.Attributes.Contains("new_outboundcallid") == member.Attributes.Contains("new_outboundcalllistid_lejer"))
                                {

                                    member["new_ringkasanlejarid"] = targetEntity.Attributes["incidentid"].ToString();
                                    service.Update(member);
                                }
                            }

                        }

                        tracingService.Trace("Lejar updated.");
                    }

                    catch (FaultException<OrganizationServiceFault> ex)
                    {
                        //printLogFile(ex.Message, context.MessageName, "UpdateLejar plug-in. ");
                        throw new InvalidPluginExecutionException("An error occurred in UpdateLejar plug-in.", ex);
                    }

                    catch (Exception ex)
                    {
                        //printLogFile(ex.Message, context.MessageName, "UpdateLejar plug-in. ");
                        tracingService.Trace("UpdateLejar: {0}", ex.ToString());
                        throw;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T17:04:39.397

请检查，

是否包含属性的实体。

检查并尝试：

```
if (targetEntity.Contains("new_outboundcallid"))
((EntityReference)targetEntity["new_outboundcallid"]).Id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:24:57.343

```
member["new_ringkasanlejarid"] = targetEntity.Attributes["incidentid"].ToString(); 
```

new_ringkasanlejarid 的类型是什么？您正在为其设置一个字符串。如果 new_ringkasanlejarid 是实体引用，这可能会导致问题。

您可能想分享错误详细信息或跟踪日志，我们所能做的就是假设问题所在。

# java - String.replaceFirst 性能与算法替换

> ID：16185134
> 
> 赞同：2
> 
> 时间：2013-04-24T06:45:15.437
> 
> 标签：java

假设我想用“zzz”替换字符串中第一次出现的“yyy”。String.replaceFirst 似乎是一个完美的解决方案

```
str = str.repaceFirst("yyy", "zzz"); 
```

但是有性能问题吗？以下解决方案在性能方面有什么不同吗？

```
int i = s.indexOf("yyy");
if (i != -1) {
    str = str.substring(0, i) + "zzz" + s.substring(i + 3);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:50:35.297

我写[了一些代码](https://gist.github.com/nhahtdh/5450481#file-test_15187583-java)来测试性能。请使用适当的参数在您的盒子上运行它来测试它。命令行接受一个`double`从 0 到 1 的值，表示测试输入与插入`"yyy"`子字符串的比率。

## 方法

**生成5000个长度为50、100、500、1000等的随机字符串**。**5000 个字符串中的一部分****在随机位置**插入序列“yyy” 。（由于生成方法，字符串将只包含一个实例，`"yyy"`如果有的话，但我认为这不是问题）。对于（字符串长度）和（方法）的每种组合，我运行测试**30**次并取平均值。

测试了以下 3 种方法：

1.  `replaceFirst`：

    ```
    public static String replaceFirstApproach(String input) {
        return input.replaceFirst("yyy", "zzz");
    } 
    ```

2.  `substring`：

    ```
    public static String substringApproach(String input) {
        int i = input.indexOf("yyy");

        if (i != -1) {
            input = input.substring(0, i) + "zzz" + input.substring(i + 3);
        }

        return input;
    } 
    ```

3.  用于`StringBuilder`构造输出字符串：

    ```
    public static String appendStringBuilder(String input) {
        int i = input.indexOf("yyy");

        if (i != -1) {
            StringBuilder output = new StringBuilder(input.length());
            output.append(input, 0, i).append("zzz").append(input, i + 3, input.length());
            return output.toString();
        } else {
            return input;
        }
    } 
    ```

## 结果

该程序在 JVM 7、Windows 7 上运行。这些数字是处理 1 批 5000 个随机字符串的平均时间（以**微秒**为单位）。

在插入子字符串的**0%处**`"yyy"`

```
       长度 | 50 100 500 1000 5000
--------------|------------------------------------ --------------------
 替换优先 | 17389 22718 74194 137285 629438
    子串 | 4429 7246 13421 18069 78920
字符串生成器 | 4604 5615 11509 19093 79366

```

插入子字符串的**25%**`"yyy"`

```
       长度 | 50 100 500 1000 5000
--------------|------------------------------------ --------------------
 替换优先 | 18531 24959 78211 146956 692992
    子串 | 5250 6764 18994 27959 113805
字符串生成器 | 5768 8609 23857 45789 205580

```

插入子字符串的**50%**`"yyy"`

```
       长度 | 50 100 500 1000 5000
--------------|------------------------------------ --------------------
 替换优先 | 19833 27648 90932 162558 760558
    子串 | 6007 8848 21909 37415 154959
字符串生成器 | 7075 12095 37765 70038 327171

```

插入子字符串的**75%**`"yyy"`

```
       长度 | 50 100 500 1000 5000
--------------|------------------------------------ --------------------
 替换优先 | 20318 28387 95967 176051 845799
    子串 | 6840 9940 27469 47218 198464
字符串生成器 | 8794 13272 50498 94644 470656

```

插入子字符串的**100%**`"yyy"`

```
       长度 | 50 100 500 1000 5000
--------------|------------------------------------ --------------------
 替换优先 | 22984 31302 103640 192179 892965
    子串 | 7846 11494 37093 58544 258356
字符串生成器 | 11113 24499 66164 121784 592664

```

## 结论

的方法`replaceFirst`总是最慢的。当`"yyy"`未找到子字符串时，它比其他 2 种方法慢 3-10 倍。当`"yyy"`可以找到子字符串时，它仍然比`substring`接近慢 3 倍，`StringBuilder`接近 1.5 倍。

`+`使用and连接字符串的方法比可以找到子字符串且字符串很长时`substring`快 2 倍。`StringBuilder``"yyy"`

不过，这里的用例非常本地化。尽管该`substring`方法更快，但除非您进行密集的字符串处理，否则收益微不足道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:56:51.477

通常最重要的是编写清晰简单的代码。就您的性能和必须维护代码的人而言，第一个选项是最好的。

如果您确定这被调用的频率足够高并且意味着您花费的时间太长，那么您可能会考虑使用更复杂的编码。除非你测量过它有多大的不同，否则我认为这只是一个猜测。在这种情况下，第二行可能是一个选项。

顺便说一句，可能有更快的方法，例如使用 StringBuilder 而不是根据您的上下文创建 String 。

# php - PHP 未设置和销毁的会话自行启动

> ID：16185136
> 
> 赞同：0
> 
> 时间：2013-04-24T06:45:22.957
> 
> 标签：php, html, session, login, logout

我的 php 代码在这里遇到了一点问题......你能帮帮我吗？问题是，当我在我的 logout.php 中取消设置和销毁会话时，它在我第一次加载我的其他一些页面时起作用.. 但是当我立即刷新时，会话再次启动，我真的不明白? 因为我有我的页面来查找具有特定名称的会话。这是我的代码：

**登录.php：**

```
<?php session_start();
//Get username and password
$email = $_POST['email'];
$password = $_POST['password'];

//Sorting special characters away, with exception of "-" and "."
stripslashes($email);
$email = preg_replace('/[^A-Za-z0-9@\.\-]/','', $email);

//Getting the password from the database
$link = mysqli_connect("****", "****", "****", "****");
if (mysqli_connect_errno($connect)) 
{
    echo "Connection Failed!";
    mysqli_close($connect);
}
$sql = "SELECT * FROM admins WHERE email = '". $email . "'";
if ($result = mysqli_query($link, $sql))
{
    while ($row = mysqli_fetch_row($result))
    {
        $db_password = $row[2];
    }
    mysqli_free_result($result);

}
mysqli_close($connect);

//Compare DB-password to entered password
if ($db_password == $password)
{
    $_SESSION['admin'] = $email;
    header("Location: ../index.php");
    exit();
}
header("Location: index.php");
exit();
?> 
```

**注销.php：**

```
if(!isset($_SESSION['admin']))
{
    header("Location: ../index.php");
    exit();
}
else
{
    session_unset();
    session_destroy();
    echo '<h1>You have been succesfully logged out!</h>';
    exit();
} 
```

**索引.php：**

```
if (isset($_SESSION['admin']))
{
    echo '<div id="admin"><br>
    <h3>'.$_SESSION["admin"].'</h3>
    <a href="http://www.mysite.com/admin"><span>Admin panel</span></a><br>
    <a href="http://www.mysite.com/admin/logout.php"><span>Log out</span></a>
    </div>';
} 
```

是的，我得到了`session_start()`在我的每一页上都名列前茅。

`$_SESSION['admin']`正如您在 index.php 中看到的，如果设置了，我希望编写一些代码。当我在 logout.php 中销毁会话并转到 index.php 时，它会在我第一次加载页面时工作。但是 ii 刷新，代码又出现了，这意味着会话一定是重新设置了，不知何故！但我不知道为什么？请帮忙！

编辑：我现在已经把 login.php 的整个代码。其他 2 页的其余部分是纯 HTML。我发布的是我所有的 PHP 代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:51:47.300

这可能是因为 PHPSESSID cookie。只需从浏览器中删除 PHPSESSID cookie 即可尝试

```
if(!isset($_SESSION['admin']))
{
    header("Location: ../index.php");
    exit();
}
else
{
    session_unset();
    session_destroy();
    setcookie('phpsessid','value',time()-1);  
    echo '<h1>You have been succesfully logged out!</h>';
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:01:36.333

刷新后，您的以下条件满足：

```
if ($db_password == $password) 
```

连接建立，会话被创建，你从 login.php 被重定向到 index.php。

改变这个条件，你的脚本就可以工作了

# php - 通过具有非 gmail 域的 gmail 帐户发送 PHP 电子邮件

> ID：16185141
> 
> 赞同：1
> 
> 时间：2013-04-24T06:45:40.947
> 
> 标签：php, phpmailer

我一直在尝试通过具有非 gmail 域的 gmail 帐户发送 PHP 电子邮件，但电子邮件地址已在 gmail.com 注册。电子邮件不会通过此帐户发送，但是当我提供具有@gmail.com 的帐户时，电子邮件会被传输，但不会发送到非 gmail 电子邮件地址。我一直在使用的代码是 php mailer 代码。

```
function smtpmailer($to, $from, $from_name, $subject, $body) {   
    global $error;  
    $mail = new PHPMailer();  // create a new object  
    $mail->IsSMTP(); // enable SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only  
    $mail->SMTPAuth = true;  // authentication enabled
    $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for Gmail  
    $mail->Host = 'smtp.gmail.com';
    $mail->IsHTML(true);
    $mail->Port = 465;   
    $mail->Username = GUSER;    
    $mail->Password = GPWD;             
    $mail->SetFrom($from, $from_name);  
    $mail->Subject = $subject;  
    $mail->Body = $body;  
    $mail->AddAddress($to);
    if(!$mail->Send()) {  
        $error = 'Mail error: '.$mail->ErrorInfo;
        return false;  
    } else {  
        $error = 'Message sent!';  
        return true;  
    } 
```

有人可以建议我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T19:07:17.467

您应该在您的 gmail 帐户中注册发送邮件的应用程序：

1.  在 gmail 帐户的浏览器中启动会话。
2.  在打开会话的同一浏览器中，转到[https://accounts.google.com/b/0/DisplayUnlockCaptcha](https://accounts.google.com/b/0/DisplayUnlockCaptcha)
3.  在您要启用的所需服务器中发送执行您的 php 的邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:07:45.023

尝试使用主机：

```
$host = "ssl://smtp.gmail.com"; 
```

# hibernate - 无法解析配置：hibernate.cfg.xml；即使我提供了正确的 dtd 路径，系统也找不到指定的文件

> ID：16185143
> 
> 赞同：1
> 
> 时间：2013-04-24T06:45:41.940
> 
> 标签：hibernate

我收到这个错误-

如何解决这个-

```
log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main" org.hibernate.HibernateException: Could not parse configuration: hibernate.cfg.xml
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1542)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1476)
    at com.javatpoint.mypackage.StoreData.main(StoreData.java:14)
Caused by: org.dom4j.DocumentException: C:\Users\kamlesh\workspace\empdetails\hibernate-configuration-3.0.dtd (The system cannot find the file specified) Nested exception: C:\Users\kamlesh\workspace\empdetails\hibernate-configuration-3.0.dtd (The system cannot find the file specified)
    at org.dom4j.io.SAXReader.read(SAXReader.java:484)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1532)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:05:47.520

它在文档类型中吗？那是一个网址。

使用斜杠`/`而不是反斜杠`\`（即使在 Windows 上）。

# c# - 用第二个库组件替换一个库组件，以完全删除第一个库组件

> ID：16185144
> 
> 赞同：1
> 
> 时间：2013-04-24T06:45:49.597
> 
> 标签：c#, .net, dll

我在 .NET 中有一个 Windows 应用程序，它使用两个库（命名为 LB1 和 LB2）。这两个库都是第三方库。现在我的客户希望我用 LB2 组件替换 LB1 组件，以便完全删除 LB1 组件。（可能是为了削减成本）

我需要检查是否可以使用 LB2 实现使用 LB1 实现的控件/方法/其他功能。

我怎样才能做到这一点？

1.  手动（我试过但我花了很长时间才识别出几个控件）
2.  通过任何工具。

另外，如果我能弄清楚 LB1.Component1 可以用 LB2.Component2 替换，那么我该如何更改整个代码？

1.  手动（单独更换每个控件需要很长时间）
2.  通过任何工具或脚本

希望我的问题很清楚，如果没有，请发表评论，我会尝试详细说明。

**编辑**：客户端已经确认，对于 LB1 中的每个控件，LB2 中都有一个镜像副本，但不知道确切的映射（名称）。这是我必须识别的。如果我必须手动完成，那么我需要处理什么？

**编辑 2**：我使用反射并知道我的两个组件都有一个名称相似的类（名为 NCombo 和 Combo）。两者都有很长的描述。我能知道这些类是相同的吗？我的意思是，如果 NCombo 的对象有一些功能，那么我可以使用 Combo 的对象实现相同的功能。对象已在多个地方使用，因此通过运行应用程序检查每个功能将非常困难。有什么办法知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:49:07.037

是的，你的问题很清楚......

您只需要手动完成所有操作。

例如：LB1 有一些控制，但 LB2 没有同样的控制或事件。您需要手动检查并搜索正确的控件和事件。

据我所知，没有任何工具可以这样做。如果它也可用，它不会做到 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:53:21.383

您必须比较两者并确保 LB2 提供与 LB1 相同的功能。这是预先的分析步骤，是的，这需要时间，但它也将帮助您了解您在做什么以及是否可行。基于此，您可以决定下一步。

如果它们提供相同的功能，下一步可能是更换控件，可能重写代码并花足够的时间确保一切按预期工作。这称为**重构**。当然，这是一项手动工作——尽管您可以编写自动化测试。

如果它们不提供相同的功能，您必须决定下一步是什么。

# php - 如何检索网站名称？

> ID：16185145
> 
> 赞同：0
> 
> 时间：2013-04-24T06:45:51.020
> 
> 标签：php, html, title

我想知道是否有办法从 URL 中获取网站的名称。我知道你可以解析一个 URL 来获取一个域名，但是由于就代码而言，站点名称没有标准化，我对此表示怀疑。

如何使用它的一个例子是说我链接到纽约时报的一篇文章。我可以将文章的标题链接到文章页面。然后我可能希望在文章标题旁边显示来源“纽约时报”。如果我可以自动生成它，那将非常方便。

仅仅获取页面标题是行不通的，因为这通常会给您文章标题，或者，如果您要链接到其他类型的页面，您可能会得到一些字符串，例如“如何检索网站名称？ - 堆栈溢出”。我只想获得其中的“堆栈溢出”部分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:51:14.663

您可以尝试应用程序名称属性：

```
<meta name="application-name" content="The New York Times" /> 
```

还

```
<meta name="application-name" content="CNN"/> 
```

不是每个站点都会有这个，但你可以从这里开始，检查打开的图形标签 ( [http://ogp.me](http://ogp.me) ) 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:49:46.567

如果你想解析 url，你可以试试这个函数：

```
$parsedUrl = parse_url($url);
$host = $parsedUrl['host']
echo $host; 
```

这将为您提供一个关联数组，其中`host`关键是您要查找的内容。

见： http: [//php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:09:41.290

您所说的“站点名称”不是链接的一部分，它是该链接返回的 HTML 代码的一部分。

如果要获取站点标题，则应使用 CURL 检索链接内容，然后解析返回的 HTML 以获取该部分中标签的内容。

可能这将比您可以获得的好处更昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:13:49.010

您将需要使用[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)解析 DOM 树：

```
<?php
function GetTitle($url)
{
    $dom = new DOMDocument;
    @$dom->loadHTMLFile($url); // @ supresses warnings

    // try to get meta application-name
    foreach ($dom->getElementsByTagName("meta") as $meta)
    {
        $metaName = $meta->attributes->getNamedItem("name");
        if (strtolower($metaName->nodeValue) == "application-name")
        {
            $metaContent = $meta->attributes->getNamedItem("content");
            if ($metaContent != NULL)
                return $metaContent->nodeValue;
        }
    }

    // title fallback:
    foreach ($dom->getElementsByTagName("title") as $title)
        return $title->nodeValue;

    return NULL;
}

print(GetTitle("http://www.nytimes.com/"));
?> 
```

首先，`GetTitle()`寻找`<meta name="application-name">`标签。如果未找到，它将回退并返回页面标题。

此外，您应该传递基本 url。Fe 如果你有这个 url: `http://stackoverflow.com/questions/16185145/how-to-retrieve-website-names/16185654#16185654`，你应该去掉除了`http://stackoverflow.com`使用[parse_url](http://php.net/manual/en/function.parse-url.php)之外的所有东西：

```
$parsedUrl = parse_url($url);
GetTitle($parsedUrl["scheme"] + "://" + $parsedUrl["host"]); 
```

# javascript - TypeError：Application.registerInjection 不是函数

> ID：16185146
> 
> 赞同：2
> 
> 时间：2013-04-24T06:45:55.313
> 
> 标签：javascript, ember.js

我是 ember.js 的新手并试图了解 ember，但现有示例“使用 Ember.js 构建应用程序”不起作用，我面临一些`TypeError`类似的问题`TypeError: Application.registerInjection is not a function`，我包含了脚本

```
<script src="js/libs/jquery-1.9.1.js"></script>
<script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
<script src="js/libs/ember-1.0.0-rc.3.js"></script>
<script src="js/libs/ember-data-latest.js"></script> 
```

我不明白如何解决它，有人可以帮助我吗？

我的 app.js 代码是

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
revision: 12,
adapter: 'DS.FixtureAdapter'
});

App.Router.map(function() {
  this.resource('posts');
  this.resource('about');
});

App.PostRoute = Ember.Route.extend({
model: function() {
    return App.Post.find();
}
});

App.Post = DS.Model.extend({
title: DS.attr('string'),
author: DS.attr('string'),
intro: DS.attr('string')    
});

App.Post.FIXTURES = [{
id: 1,
title: "Ember leaning",
author: "Anand",
intro: "Write dramatically less code with Ember's Handlebars integrate templates    that update automatically when the underlying data changes."
}, {
id: 2,
title: "A framework for creating ambitious web application",
intro: "Don't waste time making trivial choices. Ember.js incorporates common idioms so you can focus on what makes your app special, not reinventing the wheel."
}]; 
```

我的 index.html 代码是

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ember Starter Kit</title>
   <link rel="stylesheet" href="css/normalize.css">
   <link rel="stylesheet" href="css/bootstrap.min.css">
   <link rel="stylesheet" href="css/style.css">
</head>
<body>

 <script type="text/x-handlebars">
 <div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="#">Bloggr</a>
      <ul class="nav">
        <li>{{#linkTo 'posts'}}Posts{{/linkTo}}</li>
        <li>{{#linkTo 'about'}}About{{/linkTo}}</li>
      </ul>
  </div>
 </div>

{{outlet}}    
 </script>

 <script type="text/x-handlebars" id="posts">
 <div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">
      <table class="table">
        <thead>
          <tr>
            <th>Recent Post</th>
          </tr>
        </thead>
        {{#each model}}
        <tr>
          <td>
            <a href="#">{{title}}<small class="muted"> by {{Author}}</small></a>
          </td>
        </tr>
        {{/each}}
      </table>
    </div>
    <div class="span9">
    </div>
  </div>      
 </div>
 </script>

 <script type="text/x-handlebars" id="about">
 <div class='about span12 hero-unit'>
   <p>IDEX Solution&#8217;s aims to provide solutions for Linux Platform, located in Gandhidham, Gujarat. Here at IDEX,  we provide services to small / medium businesses and home users who want to enjoy the power of Linux.
  </p>
  <p>Whilst as a company, we were formed in Jan 2004, Company&#8217;s founder is working on Linux since 1995\. We use Linux in everyday of our lives on our Laptops, Desktops and Servers.
  </p>
  <p>We specialize in providing Tailor Made Software Solutions for our clients in very affordable prices. Since we use all Open Source Software, which help us to keep our prices very low, so our clients can enjoy this benefit. Visit our <a href="http://idexindia.com/products">Products</a> page for more information on our existing products, we also provide other services as well, kindly visit our <a href="http://idexindia.com/services">Services</a> page for more information.
  </p>
</div>
</script>

<script src="js/libs/jquery-1.9.1.js"></script>
<script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
<script src="js/libs/ember-1.0.0-rc.3.js"></script>
<script src="js/libs/ember-data-latest.js"></script>
<script src="js/app.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T18:51:57.170

首先，您应该从控制台中的错误消息中注意到问题出在“ember-data-latest.js”中。您不需要发布所有应用程序代码。其次，在 GitHub 上找到的 ember-data-latest.js 不是最新的 ember 最新更改。您可以在这里找到应该可以使用的 ember-data 版本：

[http://builds.emberjs.com.s3.amazonaws.com/ember-data-latest.js](http://builds.emberjs.com.s3.amazonaws.com/ember-data-latest.js)

# javascript - 当新数据提交到数据库时，使用 AJAX 更新 Rails 应用程序页面

> ID：16185148
> 
> 赞同：0
> 
> 时间：2013-04-24T06:46:01.933
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3

我有一个应用程序，在 /index 上有一个表。该表充满了来自数据库的记录。还有另一个第三方服务向该应用程序“发布”并创建新的数据库记录。我想在 /index 页面上使用 AJAX 显示此记录，而无需刷新页面。

来自第三方服务的新记录以每分钟 2 条的速度出现。所以我想在我的javascript中使用一个计时器循环（30秒）来实现这个，它将在/get_latest_leads发出一个get，并定义一个控制器操作get_latest，它会在最后30秒内输入/更新记录。然后使用 ids（检查重复条目，以防有任何重复条目）。在客户端，我将使用 javascript 将这些新记录预先添加到表中。

**控制器**

```
# GET /leads
  # GET /leads.json
  def index
    @leads = Lead.find(:all, :conditions => {:is_valid => true}, :order => "id DESC").paginate(:per_page => 30, :page => params[:page])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @leads }
      format.js
    end
  end

  def get_latest
    logger.info "in get_latest"
    @leads = Lead.where('updated_at > ?', Time.now - 30.seconds)
    @leads.each { |lead|
      logger.info "#{lead.name}"
    }
    respond_to do |format|
      format.json { render json: @leads }
    end
  end 
```

**路线.rb**

```
 get 'get_latest_leads', :to => 'leads#get_latest', as: :get_latest_leads 
```

**index.js.erb**

```
alert("here1");
setInterval(
  function(){
    new Ajax.Request('get_latest_leads' + '.json', {
      alert("here2");
      method: 'get',
      onSuccess: function(transport){
        var leads = transport.response.responseJSON;
        // insert the last checked time into <div id='time'></div>
        // $('time').innerHTML = records.time;
        // loop over response JSON and do what you want with the data
        leads.each(function(lead){
          $$('table#leads').insert({
            top: '<tr><td>'+lead.attribute+'</td></tr>';
          });
        });
      }
    });
  },
  30000
); 
```

问题是我的 js 根本没有被调用，浏览器/服务器端也没有错误。当我在 /get_latest_leads.json 上从浏览器发出手动请求时，它会以 JSON 格式获取最新的潜在客户。但我的 js 没有调用它。你能告诉我出了什么问题吗？

**更新：**

我按照[此处](https://stackoverflow.com/questions/6167805/using-rails-3-1-where-do-you-put-your-page-specific-javascript-code)的说明将应用程序树中的 js 移动到 assets/javascripts/leads/index.js

这使呼叫成功，现在我确实每 30 秒收到一次警报，这意味着该功能正在运行。但是，现在我收到“未定义未捕获的引用错误 ajax”。

# unicode - 列出包含 Unicode 符号的目录名称无法正常工作

> ID：16185150
> 
> 赞同：2
> 
> 时间：2013-04-24T06:46:13.697
> 
> 标签：unicode, common-lisp, clisp, pathname

我正在尝试将所有子目录的列表写入文件，但子目录名称中的 unicode 符号被问号替换。我在 Windows XP 上使用 CLISP 2.49。

这是代码的简短版本：

```
(let ((*pathname-encoding* (ext:make-encoding :charset 'charset:utf-8
                                              :line-terminator :dos)))
    (with-open-file (stream "folders.txt"
                     :direction :output
                     :if-exists :overwrite
                     :if-does-not-exist :create
                     :external-format (ext:make-encoding :charset 'charset:utf-8
                                                         :line-terminator :dos))
       (format stream "~A~&" (directory ".\\*\\")))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:22:19.673

## 你做错了什么

您应该知道这[`*pathname-encoding*`](http://www.clisp.org/impnotes/encoding.html#path-enc)是一个[SYMBOL-MACRO](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/mac_define-symbol-macro.html)，而不是一个变量。正如[CLISP](http://www.clisp.org)手册中的注释所说，

> 提醒：您必须对[SYMBOL-MACRO使用](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/mac_define-symbol-macro.html)[EXT:LEETF/EXT:LETF*](http://www.clisp.org/impnotes/macros3.html#letf)； [LET/LET*](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/speope_letcm_letst.html)将不起作用！

所以，你需要做的是

```
(ext:letf ((*pathname-encoding* charset:utf-8)) ...) 
```

（无论如何都会忽略`line-terminator`模式`*pathname-encoding*`）。

## 例子

```
$ touch 'идиотский файл'
$ ls
идиотский файл
$ LANG=C ls
?????????????????? ????????
$ LANG=C clisp -q -norc 
> *pathname-encoding* 
#<ENCODING CHARSET:ASCII :UNIX>
> *default-file-encoding* 
#<ENCODING CHARSET:ASCII :UNIX>
> *terminal-encoding* 
#<ENCODING CHARSET:ASCII :UNIX>
> (letf ((*pathname-encoding* charset:utf-8))
    (with-open-file (o "foo" :direction :output :external-format charset:utf-8) 
      (format o "~A~%" (directory "*"))))
NIL
> (quit)
$ cat foo
(/home/sds/tmp/z/идиотский файл /home/sds/tmp/z/foo) 
```

## 调试您的特定问题

在任何情况下，CLISP 都不会打印或返回`?`它无法处理的字符 - 它会发出错误信号（尝试省略其中一个编码规范，您将得到一个错误`Invalid byte #xD0 in CHARSET:ASCII conversion`- from`write`或 from `directory`）。

因此问题出在边界上：

*   要么操作系统给出 CLISP 问号而不是 unicode（因为它认为 CLISP 无法处理 i18n）
*   或者 CLISP 生成的文件被低级 OS 层错误地保存
*   或者您用于查看文件的工具无法显示 unicode 字符

（只有最后一个选项似乎是合理的）。

你可以做的是：

1.  从删除编码规范开始 - 你得到转换错误吗？检查默认的编码*位置*`*pathname-encoding*`（对于像&c这样的符号宏来说，这是花哨的 Lisp 词）
2.  确保`*pathname-encoding*`是`utf-8`并尝试类似的东西`(coerce (pathname-name (car (directory "*"))) 'list)`- 在我上面的例子中我看到了`(#\CYRILLIC_SMALL_LETTER_I ...)`；您是否像我一样看到 unicode 字符，或者您看到了`#\?`吗？
3.  试试`cygwin`( `ls`, `ls | od`, `ls > foo; cat foo | od`) 看看它是否可以捕获非 ASCII 字符。

# ruby-on-rails-3.2 - Ruby on rails 3.2 接受_nested_attributes 验证

> ID：16185151
> 
> 赞同：0
> 
> 时间：2013-04-24T06:46:14.903
> 
> 标签：ruby-on-rails-3.2, nested-forms, nested-attributes

我正在开发一个 ruby​​ on rails 3.2 应用程序，我需要验证一个具有嵌套属性的表单。在我的模型中，我有这个

```
班员
    attr_accessible :email, :password ......等
    has_many :purchase_informations, :dependent => :destroy
    Accept_nested_attributes_for :purchase_informations, :allow_destroy => true
**结尾**

类采购信息
    属于_to：成员
    attr_accessor :same_billing
结尾

```

以下是表单数据：

```
{ members: 
     { purchase_informations_attributes: 
          { 0: 
               { information_type: "billing",
                 title: "Mr",
                 first_name: "",
                 last_name: "",
                 cuhk_no: "",
                 organization: "",
                 address: "",
                 zip_code: "",
                 country: "Hong Kong",
                 telephone: "",
                 mobile: "", fax: "",
                 email: "asdasdasda", id: "27"
              },
           1: 
              { information_type: "shipping",
                title: "Mr",
                first_name: "",
                last_name: "",
                cuhk_no: "",
                organization: "",
                address: "",
                zip_code: "",
                country: "Hong Kong",
                telephone: "",
                mobile: "",
                fax: "",
                email: "",
                id: "28"
              }
         }
     } 
} 
```

请帮我验证属性是否为空白。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:51:33.093

你好，你可以试试这个：

```
 accepts_nested_attributes_for : purchase_informations, :reject_if => :all_blank 
```

或在您的表单中放置一个 :required => true 函数

```
<%= f.input :name, :required => true %> 
```

# asp.net - Paypal NVP API - SetExpressCheckout、GetExpressCheckoutDetails 和 DoExpressCheckoutPayment

> ID：16185154
> 
> 赞同：0
> 
> 时间：2013-04-24T06:46:29.153
> 
> 标签：asp.net, paypal

`SetExpressCheckout`我想将 Paypal express checkout 集成到我自己的电子商务网站中，`GetExpressCheckoutDetails`为此我正在考虑使用`DoExpressCheckoutPayment`API 方法。

但我不确定我是否可以使用我的个人（不是商业/商家）贝宝账户来接受使用来自网站的 Express Checkout 付款。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:09:57.620

您可能想使用 Premiere 或 Business 帐户。您将无法使用个人帐户。

# c# - 按下回车键时禁止点击按钮

> ID：16185156
> 
> 赞同：0
> 
> 时间：2013-04-24T06:46:39.880
> 
> 标签：c#, javascript, asp.net

我的主页顶部有一个搜索框，当我尝试在内容页面上提交表单时，主页上的搜索按钮会在按 Enter 时执行。当我在我的内容页面文本字段中输入并按 Enter 键时，它甚至会这样做。

表单似乎有问题，因为我只使用一个填充整个母版页的表单，但我似乎无法创建多个表单。

也许我可以用javascript删除我的搜索按钮上的回车功能，谁知道呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:50:09.080

如果你使用 jquery，你可以这样做：

```
$('#myButton').removeAttr("onenter"); 
```

如果您使用 onclick 事件执行操作，则为“onclick”。

希望这可以帮助 ！再见 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:51:29.220

尝试使用 Jquery 处理。

1.  更改按钮类型提交到按钮。
2.  写在body keypress jquery上，检查是否有一些值并且keycode是13然后做AJAX调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:32:03.430

您的确切问题是当您在内容页面上按 Enter 时，您的母版页的提交按钮正在执行。

为此，您无需禁用按钮单击。只需在面板中添加内容页面控件和提交按钮，并将面板`DefaultButton`属性分配给内容页面上的提交按钮 ID。

因此，当您在母版页上按 Enter 时，搜索框代码将执行，当您在内容页面上按 Enter 时，内容页面的提交按钮代码将执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:46:34.317

要禁用该按钮，您可以使用 jQuery 执行以下操作：

```
jQuery('input').attr('disabled', 'disabled'); 
```

# r - 如何使用 R 在散点图中显示误差线

> ID：16185158
> 
> 赞同：-3
> 
> 时间：2013-04-24T06:46:46.037
> 
> 标签：r, scatter-plot, standard-error

所以我有类似的数据

```
Value   Number
3   1.5
6   1.67
9   1.7
12  1.6
15  1.7
18  1.8
21  1.9
24  1.98
27  1.98
30  1.8
33  1.84
36  1.5
39  1.7
42  1.9
45  1.9
48  2.0
51  1.21
54  1.4
57  2.34
60  2.5
63  2.1
66  1.77 
```

我将如何制作带有标准误差线的散点图....我查了一下，它似乎是这样的

```
errbar(df$Value, df$Number, yplus, yminus, cap = 0.015,
       xlab= deparse(substitute(x)),
       ylab= deparse(substitute(y))) 
```

但是我不熟悉yplus，yminus？和deparse？？还有其他方法可以做到这一点吗？我尝试使用 ggplot 并使用 install.packages(ggplot2) 下载它，但 R 一直说它找不到它并用这段代码尝试过

```
> ggplot(data=dataset,aes(x=df$Value,y=df$Number,colour=Code,linetype=Group,ymin=Mean-SE,ymax=Mean+SE)) 
Error: could not find function "ggplot"
> + geom_line()
Error: could not find function "geom_line"
> + scale_x_continuous(breaks=c(1,2))
Error: could not find function "scale_x_continuous"
> + scale_linetype_manual(values=c(2,1))
Error: could not find function "scale_linetype_manual"
> + geom_point()
Error: could not find function "geom_point"
> + geom_errorbar(width=.1,position='dodge')
Error: could not find function "geom_errorbar" 
```

另外，我应该如何在一张图中用相同的 x 轴值绘制 2 个散点图并显示误差线？谢谢大家...任何建议都会被重视

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:52:37.393

您看到的错误是因为该`ggplot2`包尚未加载。添加`library(ggplot2)`到脚本将解决此问题。这当然是假设`ggplot2`软件包已安装。如果没有，请使用它`install.packages("ggplot2")`来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:30:19.253

或者，您可以使用 R 的`gplots`包，它非常好且易于处理（至少在我看来）。

```
# Required package
library(gplots)

# Sample data
x <- seq(3, 66, 3)
y <- c(1.5, 1.67, 1.7, 1.6,  1.7,  1.8,  1.9,  1.98,  1.98,  1.8,  1.84,  
       1.5,  1.7,  1.9,  1.9,  2.0,  1.21,  1.4,  2.34,  2.5,  2.1,  1.77)
xy <- data.frame(x, y)

# Plotting
plotCI(x, y, 
       uiw = .5, gap = 0, pch = 22, pt.bg = "green") 
```

当然，你必须用你的错误向量替换`uiw`参数`liw`。

干杯，弗洛里安

# log4j - 当新的一天到来时，将日期时间附加到日志文件

> ID：16185161
> 
> 赞同：0
> 
> 时间：2013-04-24T06:47:09.387
> 
> 标签：log4j

我目前正在为我的日志文件使用以下 log4j 属性。但问题是，如果该特定类没有任何活动，日志文件名仍然会变为`mylogfile.log`是否创建于 2013 年 4 月 20 日。

对我来说，我有另一个进程`mylogfile.log.2013-04-24` 每天早上检查日志文件扩展名示例和进程（昨天的日志文件）。所以现在没有任何活动，并且在 2013 年 4 月 20 日创建的日志文件仍然使用名称`mylogfile.log`而不是`mylogfile.log.2013-04-24`.

如何设置 log4j.properties 以创建日志文件以在新的一天开始时添加日期。实际上，我正在使用 DailyRollingFileAppender。

这是我当前的设置。

```
log4j.logger.MyLog=DEBUG, mylog

log4j.appender.mylog=org.apache.log4j.DailyRollingFileAppender
log4j.appender.mylog.Threshold=DEBUG
log4j.appender.mylog.File=${myproject.log.dir}/mylogfile.log
log4j.appender.mylog.DatePattern='.'yyyy-MM-dd
log4j.appender.mylog.layout=org.apache.log4j.PatternLayout
log4j.appender.mylog.layout.ConversionPattern=%d{HH:mm:ss},%m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:56:11.733

我相信内置的附加程序不支持这一点（至少在 Log4J 1.2 中不支持）

[但是，您可以查看其他外部附加程序，例如http://www.simonsite.org.uk/](http://www.simonsite.org.uk/)中的TimeAndSizeRollingAppender ，文件滚动在时间到达时完成，而不是在发送第一个日志事件时完成。

# node.js - 为什么我的 req.user 在加载时总是为空？

> ID：16185164
> 
> 赞同：3
> 
> 时间：2013-04-24T06:47:23.677
> 
> 标签：node.js, session, express, passport.js

我已经苦苦挣扎了几天，并且取得了一些不错的进展，但是我无法让我的会话内容正常工作。

我已成功使用 Passport 通过 Facebook 进行身份验证。当我使用 FB 按钮单击登录时，会话已完美加载，并且我的 req.user 对象已准备就绪，但在我看来，我应该只需要这样做一次。

我知道护照可以保存一个cookie。我查了一下，发现它有效。

我正在尝试检测用户是否已经在加载我的索引页面时登录，但是当我加载页面时 req.user 对象始终为空，并且我的 passport.deserializeUser 方法永远不会被调用来加载它（如果我点击登录到 FB 按钮，它确实被调用）。

所以我的问题是，你如何在页面加载时告诉护照以检查 cookie 并加载用户会话（如果有的话）？

* * *

**更新**- 好的，所以对于那些在以后发现这个问题的人，我只是想回顾一下我在这里学到的东西（感谢那些发表评论的人）。希望它会帮助其他人。

我习惯了不管服务器如何都存在的 .NET cookie。Node.js 和护照不在同一个前提下工作。默认情况下，node.js 使用内存存储来保持其会话。当您在终端/命令行中关闭节点时（每次更改服务器代码时都必须这样做），memorystore cookie 信息将被重置，因此与之相关的任何 cookie 都没有意义。

为了解决这个问题，我安装了 Redis ( [http://cook.coredump.me/post/18886668039/brew-install-redis](http://cook.coredump.me/post/18886668039/brew-install-redis) ) 并将它作为我的商店 ( [http://www.hacksparrow.com/use-redisstore-而不是-of-memorystore-express-js-in-production.html](http://www.hacksparrow.com/use-redisstore-instead-of-memorystore-express-js-in-production.html)）。

这将在我计划的生产服务器 Azure 上运行，所以一切都很好。

* * *

好的，这里有一些代码。我不知道要放什么零件...

**这是 server.js**

```
/**
* Module dependencies.
*/

var express = require('express')
, app = express()
, partials = require('express-partials')
, http = require('http')
, server = http.createServer(app)
, io = require('socket.io').listen(server)
, routes = require('./routes')
// facebook
, passport = require('passport')
, facebookStrategy = require('passport-facebook').Strategy
// custom stuff
, urlCommand = require('./middleware/UrlCommand')
, azureCommand = require('./middleware/AzureCommand')
, userCommand = require('./middleware/UserCommand');

// Ports
var port = process.env.port;

if (isNaN(port))
  port = 3000;

server.listen(port);

//allows the use of Layouts
app.use(partials());

passport.serializeUser(function(user, done) {
  done(null, user.RowKey);
});

passport.deserializeUser(function (id, done) {
    console.log("deserialize");
    userCommand.findByID(id, function (err, user) {
        done(err, user);
    });
});

// Configuration
app.configure(function () {
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.session({ secret: 'SECRET!' }));
    app.use(express.methodOverride());
    app.use(passport.initialize());
    app.use(passport.session());  
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Facebook
passport.use(new facebookStrategy({
    clientID: CLIENT,
    clientSecret: "SECRET",
    callbackURL: "http://localhost:3000/auth/facebook/callback" //DEV
},
  function (accessToken, refreshToken, profile, done) {
      userCommand.findOrCreate(profile.id, profile.name.givenName,   profile.name.familyName, profile.emails[0].value, accessToken, function (error, user) {
          return done(null, user);
      });
  }
));

// Routes
app.get('/', routes.index);
app.get('/auth/facebook', passport.authenticate('facebook', { scope: 'email' }));
app.get('/auth/facebook/callback', passport.authenticate('facebook', { successRedirect:   '/',
                                                                   failureRedirect: '/login' }));

// Sockets
io.sockets.on('connection', function (socket) {
    // when the client emits 'sendURL', this listens and executes
    socket.on('sendURL', function (data) {
        console.log('sendURL called: ' + data);
        urlCommand.AddURL(data);

        // we tell the client to execute 'processURL'
        io.sockets.emit('urlComplete', data);
    });
});

console.log("Express server listening on port %d in %s mode", port, app.settings.env); 
```

**index.js**

```
exports.index = function (req, res) {
    console.log(req.user); // ALWAYS NULL
    res.render('index', { title: 'Express' })
}; 
```

**用户命令**

```
var azureCommand = require('../middleware/AzureCommand');
var tableService = azureCommand.CreateTableService();

function findByID(id, callback) {
    console.log('FindByID');

    tableService.queryEntity('user', 'user', id, function (error, entity) {
        console.log('Found him: ' + entity.Email);
        callback(error, entity);
    });
}

function findOrCreate(id, first, last, email, accessToken, callback) {
    var user = {
        PartitionKey: 'user'
        , RowKey: id
        , First: first
        , Last: last
        , Email: email
        , AccessToken: accessToken
   }

    tableService.insertEntity('user', user, function (error) {
        callback(null, user);
    });
}

exports.findByID = findByID;
exports.findOrCreate = findOrCreate; 
```

**这是我输出会话时显示的输出日志...**

```
node server.js
info  - socket.io started
Express server listening on port 3000 in development mode
{ cookie:
   { path: '/',
     _expires: null,
     originalMaxAge: null,
     httpOnly: true },
  passport: {} 
}
debug - served static content /socket.io.js 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T22:03:12.240

问题出在你的`serializeUser`和`deserializeUser`功能上。

正如您所注意到的，当您单击 FLogin 按钮时，`deserializeUser`它是第一次也是唯一一次调用 - 实际上它是使用`id`之前由`serializeUser`函数返回的 a 调用的。如果此时无法通过`id`提供的用户找到用户，`passport.user`则不会保存到会话中。

因此，`passport.deserializeUser`根本不会调用以下请求，因为`express.session`没有填写`req.session`护照的用户 ID。

**总结一下**：您需要检查您的`serializeUser`返回值是否`id`可以被您的`deserializeUser`.

仅供参考：经过身份验证的用户的正确`req.user`对象应如下所示：

```
{ 
   cookie: { path: '/', _expires: null,  originalMaxAge: null, httpOnly: true },
   passport: { user: 51772291b3367f0000000001 } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:37:24.437

好吧，首先你应该发布一些代码，因为问题可能在任何地方。

比查看漂亮的文档[http://passportjs.org/guide/](http://passportjs.org/guide/)

尽管护照通过 github 给你带来了很多例子。

如果您想拥有一个具有不同身份验证方法的完整示例，您应该访问[https://github.com/madhums/nodejs-express-mongoose-demo](https://github.com/madhums/nodejs-express-mongoose-demo)

# c++ - 如何使用注册表中的 CurrentVersion\Run 键为特定用户自动启动程序？

> ID：16185165
> 
> 赞同：4
> 
> 时间：2013-04-24T06:47:26.383
> 
> 标签：c++, windows, registry, 64-bit, autostart

我有一个 32 位应用程序，它写入：

> HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Run

我的应用程序路径，以便在当前用户登录时启动它。这适用于 32 位系统（即应用程序自动启动）。

我知道在 64 位系统上，注册表重定向开始发挥作用。所以，我搜索：

> HKEY_CURRENT_USER\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run

但是 CurrentVersion 子键不存在（但 Wow6432Node 键存在）！所以，我手动创建了它，我的应用程序正确地写入了注册表（我进入注册表并检查。条目在那里）。但是，当当前用户登录时，应用程序没有自动启动。有人能告诉我为什么吗？

顺便说一句，如果我使用 HKEY_LOCAL_MACHINE 分支，这一切都很好。但是，我希望这是特定于用户的。

### 为什么我不只是使用启动文件夹？

当 UAC 启用并设置为始终通知时，这根本不起作用（即我的应用程序不会自动启动）。不，我不能禁用 UAC。我要求我的应用程序在启用 UAC 并设置为始终通知的情况下运行良好。

如果有人能告诉我原因，我会很高兴忘记我需要使用注册表（我讨厌注册表）。

### 后备选项（最后的手段）：

我将使用任务计划程序 API 来执行此操作。**但是，只有在绝对没有其他方法**的情况下，我才会这样做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:56:28.317

`HKEY_CURRENT_USER`在 32 位和 64 位应用程序之间共享（没有重定向和 Wow6432Node 密钥）。这是[受 WOW64 影响的注册表项](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384253%28v=vs.85%29.aspx)的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T20:58:23.167

无法从用户的 Run 键或 Startup 文件夹启动需要提升的可执行文件。请参阅UAC 团队博客[中的用户登录路径中的高程现在被阻止。](http://blogs.msdn.com/b/uac/archive/2006/08/23/715265.aspx)

最好的解决方案可能是将可执行文件配置为不需要提升。然后，它可以仅在实际需要时启动自身的提升副本。或者，您可以将服务用于需要提升的任务，如果您需要能够代表没有管理员权限的用户执行提升的任务，这是唯一的好方法。

另一种选择是，因为您可以使用 HKLM 成功启动该进程，所以它会为所有用户启动，但如果它不是您想要的用户，则立即退出。

# c# - 选中 ComboBox 项后如何从 GridView 中的相邻列获取值？

> ID：16185169
> 
> 赞同：0
> 
> 时间：2013-04-24T06:47:42.513
> 
> 标签：c#, javascript, gridview, telerik

我有一个关于 ASP.Net GridView 控件中的 Telerik RadComboBox 的问题。

请在下面找到我的代码片段：

```
<asp:UpdatePanel ID="papPanel" runat="server">
    <ContentTemplate>
        <asp:GridView ID="gvTestGrid" runat="server" AutoGenerateColumns="false" OnRowDataBound="gvTestGrid_RowDataBound">
            <Columns>
                <asp:TemplateField HeaderText="Column1">
                    <ItemTemplate>
                        <asp:Label ID="lblValue" runat="server" Text='<%# Bind("Col1")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Column2">
                    <ItemTemplate>
                        <telerik:RadComboBox ID="rcbItem" runat="server" CheckBoxes="true" AutoPostBack="false"
                            OnClientItemChecked="rcbItemOnClientItemChecked">
                            <items>
                                <telerik:RadComboBoxItem Value="1" Text="Item A" />
                                <telerik:RadComboBoxItem Value="2" Text="Item B" />
                                <telerik:RadComboBoxItem Value="3" Text="Item C" />
                                <telerik:RadComboBoxItem Value="3" Text="Item D" />
                                <telerik:RadComboBoxItem Value="3" Text="Item E" />
                                <telerik:RadComboBoxItem Value="3" Text="Item F" />
                            </items>
                        </telerik:RadComboBox>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我的 GridView 中有 2 列，我想在同一行的“Column2”上触发 OnClientItemChecked 事件时使用 JavaScript 或 jQuery 从“Column1”中获取值。

![在此处输入图像描述](https://i.stack.imgur.com/Qi6S5.jpg)

例如，在第 1 行的 ComboBox 控件上检查值后，我想获得值“1”。

请帮忙，在先谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:29:25.403

请查找此控制集[Telerik](http://demos.telerik.com/aspnet-ajax/combobox/examples/programming/clientevents/defaultcs.aspx)的在线演示， 或者您可以尝试以下示例：

```
 function onItemChecked(sender, args) {
            var checked = args.get_item().get_checked();
            *var rowIndex=sender.parentNode.parentNode.rowIndex; //please debug your code to find YOUR rowIndex*
            **var rowIndex=sender._element.parentNode.parentNode.parentNode.parentNode.rowIndex //wish this code works**
            var gdview=document.getElementById("<%=gvTestGrid.ClientID %>");
            var value=gdview.rows(rowIndex).cells(0).innerText;
       } 
```

# ole - ABAP OLE - 检查 OLE 对象是否受密码保护

> ID：16185174
> 
> 赞同：0
> 
> 时间：2013-04-24T06:48:14.957
> 
> 标签：ole, abap

因此，我想打开一个受密码保护的 excel 文件，提示用户输入密码，但我想在提示用户之前检查该文件是否确实需要密码。

我目前的方法是这样并且确实有效。

```
CREATE OBJECT app 'EXCEL.APPLICATION'.
CALL METHOD OF app 'WORKBOOKS' = workbook.
CALL METHOD OF workbook 'OPEN'
  EXPORTING
  #1 = arch               "filename
  #2 = 0                  "Update links
  #3 = 0                  "ReadOnly
  #4 = 1                  "Format
  #5 = gv_password.       "password

 IF sy-subrc NE 0.

  CALL METHOD OF app 'QUIT'.
  FREE OBJECT app. FREE OBJECT workbook.
  CLEAR: app, workbook.
  CREATE OBJECT app 'EXCEL.APPLICATION'.

  gv_password = <user_entered_password>

  CALL METHOD OF app 'WORKBOOKS' = workbook.

  CALL METHOD OF workbook 'OPEN'
    EXPORTING
    #1 = arch               "filename
    #2 = 0                  "Update links
    #3 = 0                  "ReadOnly
    #4 = 1                  "Format
    #5 = gv_password.       "password

ENDIF. 
```

这基本上尝试使用空白密码打开 excel 文件，如果失败会提示用户。不过，这不是一个特别快速或优雅的解决方案。有没有更好的办法？也许在尝试打开之前直接检查属性？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:56:26.450

根据以下信息，您无法在打开 Excel 文件之前判断它是否受密码保护：[http ://www.mrexcel.com/archive/General/2130.html](http://www.mrexcel.com/archive/General/2130.html)

在那次讨论中，他们基本上是在暗示你已经在做什么。但是，最后一张海报确实建议将密码传递给不受密码保护的文件没有任何效果，因此您始终可以抢先传递密码作为替代方案（取决于您的应用程序的逻辑）。

# android - 如何将webservice SOAP响应保存到android SD卡中的xml？

> ID：16185177
> 
> 赞同：0
> 
> 时间：2013-04-24T06:48:22.387
> 
> 标签：android, soap, download, sd-card

我有一个来自应用程序 aspnet 的 SOAP Web 服务，但不知道如何在我的设备的 sdcard 上生成一个文件以供将来阅读。

步骤是什么？

我用 ksop2 阅读了网络服务？
生成响应 SOAP 服务的 xml 文件？
我把这个生成的xml文件记录在sdcard里？

我读了这篇[如何在 android SD 卡中保存对 xml 的 KSOP2 响应？](https://stackoverflow.com/questions/13913001/how-to-save-ksop2-response-to-xml-in-android-sd-card)

但我不明白，因为代码不完整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:23:38.400

您如何处理 SOAP 响应？如果您要从中创建对象，我会使用 db4o 而不是 SOAP Xml 来保存它们。你的东西已经被解析了，使用 db4o 非常愉快:)

# php - 传递输入类型文件数组

> ID：16185191
> 
> 赞同：0
> 
> 时间：2013-04-24T06:49:24.310
> 
> 标签：php, arrays, post, file-upload

我尽力研究如何将输入类型文件数组传递到另一个 php 页面。但是每次我将价值从一页发布到另一页时，我都会陷入困境。

我在页面 cityaddinfo.php 上写了这段代码，提交时指向页面 cityadd.php

```
 <form method="POST" action="cityadded.php?city=<?php echo $city?>">

        <tr>
            <td>
            <?php
                $quecityimage=mysql_query("SELECT * FROM `city_image` WHERE city_id=$city");
                echo "<b>city images</b><br>";

                while($cityimage=mysql_fetch_assoc($quecityimage))
                {
                    $pathcity=$cityimage['path'];
                    echo "<img src='$pathcity' width=\"400px\" height=\"200px\"/><br><br>";

                }
            ?>

            </td>
        </tr>
        <tr>            
             <td>
            <p class="clone">  File:
            <input type="file" name="f_name[]" size="10" style="font-family: arial; font-size: 22px;"/>
            <p>
            <a href="#" class="add" rel=".clone">Add More</a>
            </p>
            </td>
        </tr>

        <tr>
            <td>
            <input type="submit" value="submit" name="submit">  
            </td>
        </tr> 
```

cityadd.php 代码：

```
 <?php
     echo $_GET['city'];
   if(isset($_POST['submit']))
   {
   $a= $_POST['f_name'];
     foreach($a as $img)
     {
       echo $img;
     }
   }
   ?> 
```

代码回显仅是一种输入类型文件名的名称。即使我添加了多个文件。任何人都可以帮我解决如何在其他页面上发布这个输入文件数组吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:54:05.590

你有很多错误，

1.  `$a= $_POST['f_name'];`你不能像这样访问文件字段，你应该使用它`$_FILES`。

2.  当您想使用表单上传文件时，您应该具有`enctype="multipart/form-data"`表单属性，我也没有看到。我认为你需要学习一些基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:53:21.910

对文件使用 $_FILES 而不是 $_POST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:58:29.713

将此添加到您的表单中：

```
enctype="multipart/form-data" 
```

例子：

```
<form method="POST" action="cityadded.php?city=<?php echo $city?>" enctype="multipart/form-data"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:00:01.853

您需要在表单标签中设置 enctype = "multipart/form-data" 。您可以使用 $_FILES 而不是 $_POST 访问 PHP 脚本中的文件。

**HTML：**

```
<input type="file" name="file_sent" size="10" style="font-family: arial; font-size: 22px;"/> 
```

**在 PHP 页面上，您可以使用以下命令访问相同的页面**

```
 $_FILES["file_sent"]["name"] - the name of the uploaded file
    $_FILES["file_sent"]["type"] - the type of the uploaded file
    $_FILES["file_sent"]["size"] - the size in kilobytes of the uploaded file
    $_FILES["file_sent"]["tmp_name"] - the name of the temporary copy of the file stored on the server
    $_FILES["file_sent"]["error"] - the error code resulting from the file upload 
```

编辑：我不明白为什么您希望在 HTML 页面的文件字段中具有其他属性。我认为这些属性不适用于文件字段。即使他们这样做，也将它们移动到样式表中。

参考这个。 [http://php.net/manual/en/features.file-upload.multiple.php](http://php.net/manual/en/features.file-upload.multiple.php) 您需要使用索引来访问它们，因为您正在传递一个文件元素数组。

# freebsd - 从 FreeBSD 上的 GUID 获取 MAC 地址/接口名称？

> ID：16185193
> 
> 赞同：1
> 
> 时间：2013-04-24T06:49:35.737
> 
> 标签：freebsd, ethernet

有什么方法可以从 FreeBSD 上的 GUID 获取 MAC 地址/接口名称？是否有任何系统调用可以做到这一点？我到处搜索，但找不到任何信息。你能帮忙吗？

提前非常感谢。

最好的问候，马克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T18:40:03.507

注意：在 Windows 世界之外，GUID 被称为 UUID。

启动脚本`/etc/rc.d/hostid`首先尝试从 SMBIOS 获取 UUID。如果失败，它会转向`uuidgen`程序生成 UUID。该程序使用[`uuidgen`](http://www.freebsd.org/cgi/man.cgi?query=uuidgen&apropos=0&sektion=2&manpath=FreeBSD%209.1-RELEASE&arch=default&format=html)系统调用。正如您在手册页中看到的，UUID 的最后 6 字节块是系统物理网络接口之一的硬件地址。

**请注意**，如果不存在接口，则使用*随机*组播地址！所以 UUID 不一定包含硬件地址。

SMBIOS 和`uuidgen`UUID 通常都使用第一个板载以太网芯片的硬件地址。

获取接口名称和硬件地址的最简单方法可能是使用 SIOCGIFSTATUS ioctl，就像`status()`在[`ifconfig`](http://svnweb.freebsd.org/base/release/9.1.0/sbin/ifconfig/ifconfig.c?revision=243808&view=markup).

# xml - 如何从搜索中删除结果？

> ID：16185194
> 
> 赞同：-1
> 
> 时间：2013-04-24T06:49:36.483
> 
> 标签：xml, search, google-search-api

我们有一个使用 google 自定义搜索 api（可在此处找到：[https](https://developers.google.com/custom-search/docs/xml_results?hl=en) ://developers.google.com/custom-search/docs/xml_results?hl=en ）的网站来搜索我们网站中的页面。问题是某些页面已被删除，但仍显示在搜索中。我怎样才能删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T15:48:12.910

事实证明，找到的大部分页面都在 google 抓取的 sitemap.xml 页面中引用。我能够使用谷歌网站管理员工具调试这个问题（以防其他人有同样的问题）。大部分结果都被删除了。仍有一些结果可能包含搜索到的关键字，但这是一个足够好的解决方案。

# python - OpenERP fields.function() 解释

> ID：16185195
> 
> 赞同：6
> 
> 时间：2013-04-24T06:49:37.973
> 
> 标签：python, xml, openerp

我从 stock.py 文件和行号 163 中获得了此代码

```
'complete_name': fields.function(_complete_name, type='char', size=256, string="Location Name",
                    store={'stock.location': (_get_sublocations, ['name', 'location_id'], 10)}), 
```

请在上面的字段中给我一个关于下面**商店属性的解释。**

我们可以使用`fields.function(`type='many2one' 吗？如果可以请在 openerp 7 中给我一个参考示例代码或示例模型类

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T05:20:01.243

'store'=True 将字段的值存储在数据库中。一旦存储，功能字段功能将不会再次执行。

但是，如果“存储”的值是一个字典，那么 ( `key of the dictionary will be a model name and value will a tuple with list of ids, list of field name and 10-i dont know:-(`) 模型中指定为字典键的任何更改/更新，并且更改/更新在元组中指定的 id 中，并且更改或更新在指定的字段名称中在列表中然后将加载功能字段的功能并将新数据保存在数据库中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:55:31.070

`fields.function`您可以从这里获取有关信息：

1.  [功能字段。](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/field_type.html#functional-fields)
2.  [功能字段说明。](http://bazaar.launchpad.net/~openerp/openobject-server/7.0/view/head:/openerp/osv/fields.py#L843)

您可以在插件中找到许多示例。

希望这会帮助你。

# asp.net - 如何从会员课程返回？

> ID：16185197
> 
> 赞同：0
> 
> 时间：2013-04-24T06:49:44.110
> 
> 标签：asp.net, .net, security

我需要继承**"Membership Class"**。这样我就可以通过登录控件和数据库“员工”来验证用户。此外，我必须使用创建用户向导创建新用户，并且详细信息必须存储在“员工”数据库中。为此，我必须在成员资格类中实现**CREATE_USER()**方法。但是该`CREATE_USER()`方法的返回类型是**MembershipUser**。

如果是返回类型，方法应该返回什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:56:50.540

请参阅：[如何：示例成员资格提供程序实施](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

检查此代码段

```
public override MembershipUser CreateUser(string username,
             string password,
             string email,
             string passwordQuestion,
             string passwordAnswer,
             bool isApproved,
             object providerUserKey,
             out MembershipCreateStatus status)
    {
      ValidatePasswordEventArgs args = 
        new ValidatePasswordEventArgs(username, password, true);

      OnValidatingPassword(args);

      if (args.Cancel)
      {
        status = MembershipCreateStatus.InvalidPassword;
        return null;
      }

      if (RequiresUniqueEmail && GetUserNameByEmail(email) != "")
      {
        status = MembershipCreateStatus.DuplicateEmail;
        return null;
      }

      MembershipUser u = GetUser(username, false);

      if (u == null)
      {
        DateTime createDate = DateTime.Now;

        if (providerUserKey == null)
        {
          providerUserKey = Guid.NewGuid();
        }
        else
        {
          if ( !(providerUserKey is Guid) )
          {
            status = MembershipCreateStatus.InvalidProviderUserKey;
            return null;
          }
        }

        OdbcConnection conn = new OdbcConnection(connectionString);
        OdbcCommand cmd = new OdbcCommand("INSERT INTO Users " +
              " (PKID, Username, Password, Email, PasswordQuestion, " +
              " PasswordAnswer, IsApproved," +
              " Comment, CreationDate, LastPasswordChangedDate, LastActivityDate," +
              " ApplicationName, IsLockedOut, LastLockedOutDate," +
              " FailedPasswordAttemptCount, FailedPasswordAttemptWindowStart, " +
              " FailedPasswordAnswerAttemptCount, FailedPasswordAnswerAttemptWindowStart)" +
              " Values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", conn);

        cmd.Parameters.Add("@PKID", OdbcType.UniqueIdentifier).Value = providerUserKey;
        cmd.Parameters.Add("@Username", OdbcType.VarChar, 255).Value = username;
        cmd.Parameters.Add("@Password", OdbcType.VarChar, 255).Value = EncodePassword(password);
        cmd.Parameters.Add("@Email", OdbcType.VarChar, 128).Value = email;
        cmd.Parameters.Add("@PasswordQuestion", OdbcType.VarChar, 255).Value = passwordQuestion;
        cmd.Parameters.Add("@PasswordAnswer", OdbcType.VarChar, 255).Value = EncodePassword(passwordAnswer);
        cmd.Parameters.Add("@IsApproved", OdbcType.Bit).Value = isApproved;
        cmd.Parameters.Add("@Comment", OdbcType.VarChar, 255).Value = "";
        cmd.Parameters.Add("@CreationDate", OdbcType.DateTime).Value = createDate;
        cmd.Parameters.Add("@LastPasswordChangedDate", OdbcType.DateTime).Value = createDate;
        cmd.Parameters.Add("@LastActivityDate", OdbcType.DateTime).Value = createDate;
        cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 255).Value = pApplicationName;
        cmd.Parameters.Add("@IsLockedOut", OdbcType.Bit).Value = false;
        cmd.Parameters.Add("@LastLockedOutDate", OdbcType.DateTime).Value = createDate;
        cmd.Parameters.Add("@FailedPasswordAttemptCount", OdbcType.Int).Value = 0;
        cmd.Parameters.Add("@FailedPasswordAttemptWindowStart", OdbcType.DateTime).Value = createDate;
        cmd.Parameters.Add("@FailedPasswordAnswerAttemptCount", OdbcType.Int).Value = 0;
        cmd.Parameters.Add("@FailedPasswordAnswerAttemptWindowStart", OdbcType.DateTime).Value = createDate;

        try
        {
          conn.Open();

          int recAdded = cmd.ExecuteNonQuery();

          if (recAdded > 0)
          {
            status = MembershipCreateStatus.Success;
          }
          else
          {
            status = MembershipCreateStatus.UserRejected;
          }
        }
        catch (OdbcException e)
        {
          if (WriteExceptionsToEventLog)
          {
            WriteToEventLog(e, "CreateUser");
          }

          status = MembershipCreateStatus.ProviderError;
        }
        finally
        {
          conn.Close();
        }

        return GetUser(username, false);      
      }        
      else
      {
        status = MembershipCreateStatus.DuplicateUserName;
      }

      return null;
    } 
```

/// //
// MembershipProvider.GetUser(string, bool) //

```
public override MembershipUser GetUser(string username, bool userIsOnline)
{
   OdbcConnection conn = new OdbcConnection(connectionString);
   OdbcCommand cmd = new OdbcCommand("SELECT PKID, Username, Email, PasswordQuestion," +
        " Comment, IsApproved, IsLockedOut, CreationDate, LastLoginDate," +
        " LastActivityDate, LastPasswordChangedDate, LastLockedOutDate" +
        " FROM Users WHERE Username = ? AND ApplicationName = ?", conn);

  cmd.Parameters.Add("@Username", OdbcType.VarChar, 255).Value = username;
  cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 255).Value = pApplicationName;

  MembershipUser u = null;
  OdbcDataReader reader = null;

  try
  {
    conn.Open();

    reader = cmd.ExecuteReader();

    if (reader.HasRows)
    {
      reader.Read();
      u = GetUserFromReader(reader);

      if (userIsOnline)
      {
        OdbcCommand updateCmd = new OdbcCommand("UPDATE Users " +
                  "SET LastActivityDate = ? " +
                  "WHERE Username = ? AND Applicationname = ?", conn);

        updateCmd.Parameters.Add("@LastActivityDate", OdbcType.DateTime).Value = DateTime.Now;
        updateCmd.Parameters.Add("@Username", OdbcType.VarChar, 255).Value = username;
        updateCmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 255).Value = pApplicationName;

        updateCmd.ExecuteNonQuery();
      }
    }

  }
  catch (OdbcException e)
  {
    if (WriteExceptionsToEventLog)
    {
      WriteToEventLog(e, "GetUser(String, Boolean)");

      throw new ProviderException(exceptionMessage);
    }
    else
    {
      throw e;
    }
  }
  finally
  {
    if (reader != null) { reader.Close(); }

    conn.Close();
  }

  return u;      
} 
```

有关详细信息，请参阅文档：[实现成员资格提供程序](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)

[创建自定义成员资格提供程序的示例代码](https://stackoverflow.com/questions/9263537/sample-code-for-creating-custom-membership-provider)

# java - JNA java.lang.UnsatisfiedLinkError 和找不到指定的模块

> ID：16185200
> 
> 赞同：3
> 
> 时间：2013-04-24T06:50:01.353
> 
> 标签：java, java-native-interface, native, jna

我正在组合一个 jar，它可以让我调用仅对本地人可用的命令（jar 使用本地人而不是实际程序）。现在我遇到了一个问题，每当我加载 DLL 时。这是错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Unable to load library 'myDLL.dll': The specified module could not be found.

at com.sun.jna.NativeLibrary.loadLibrary(NativeLibrary.java:194)
at com.sun.jna.NativeLibrary.getInstance(NativeLibrary.java:283)
at com.sun.jna.Library$Handler.<init>(Library.java:142)
at com.sun.jna.Native.loadLibrary(Native.java:368)
at com.sun.jna.Native.loadLibrary(Native.java:353)
at src.NativeBridgeJar.<clinit>(NativeBridgeJar.java:6)
at src.Main.main(Main.java:6) 
```

我不知道这个错误的原因是什么。我确保将本机库路径设置为带有本机的文件夹。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:50:17.937

A) 调用时[`Native.loadLibrary()`](http://twall.github.io/jna/3.5.2/javadoc/com/sun/jna/Native.html#loadLibrary%28java.lang.String,%20java.lang.Class%29)，您可以提供简写名称（“myDll”）、文件名（“myDll.dll”）或共享库的绝对路径（“c:/users/me/myDll.dll”） .

B) 如果您不提供库的绝对路径，您可以通过指定来告诉它在何处加载 DLL `jna.library.path`，或使其可用`java.library.path`（在[`NativeLibrary`javadoc](http://twall.github.io/jna/3.5.2/javadoc/com/sun/jna/NativeLibrary.html)中描述了其他选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:53:49.407

您应该向 JVM 显示您的 dll 位置。可以用`-Djava.library.path=pathToDll`VM 参数来完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T10:59:37.247

在将 .dll 文件放入 C:\Windows\System32 之前，我遇到了同样的问题，因为它是一个 C++ DLL，并且依赖于该文件夹中的 Kernel32.dll 和 MSVCR100.dll。这似乎奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-10T13:37:05.493

除了使用`-Djava.library.path=pathToDll`或`System.setProperty("jna.library.path","pathToDll");`确保在您的 Windows 中安装了特定的 Visual C++ xxxx Redistributable Package 来设置 dll 的路径（bcs 应该已经使用特定的 VisualStudio xxxx 构建了 Windows 本机库）

# powershell - 如果 VM-Name 在 vm.txt 中，则执行

> ID：16185202
> 
> 赞同：0
> 
> 时间：2013-04-24T06:50:02.943
> 
> 标签：powershell

如果 vm.txt 文件中存在 vm-name，则应启动 Powershell 脚本。例子：

```
get-vm | foreach-object -process {
If ($_.Name --matches one of the entries in the .txt File) {
execute this part }
else { execute this part } 
```

vm.txt 文件：server01 server02 server03

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:57:55.610

目前尚不清楚 vm 文件是在一行中包含所有名称还是在其自己的一行中包含每个名称。前者使用 -match，后者将 -match 替换为 -contains。

```
$content = Get-Content vm.txt

get-vm | 
where-object { $_.Name -match $content } | 
foreach-object {  'execute this part'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:06:27.010

使用`-contains`运算符检查名称列表是否包含特定名称：

```
$vmlist = Get-Content vm.txt

Get-VM | % {
  if ( $vmlist -contains $_.Name ) {
    # execute this part
  } else {
    # execute that part
  }
} 
```

# javascript - 在焦点上保持文本框中的默认值

> ID：16185207
> 
> 赞同：-3
> 
> 时间：2013-04-24T06:50:12.360
> 
> 标签：javascript, html

我在默认值“DE”的网站上创建了一个输入字段（文本）。现在我遇到了以下问题。

```
<input type="text" id="iban" value="DE" /> 
```

当用户在文本框中单击时，不应删除默认值“DE” **，**用户应仅在文本框中的默认值后添加数字。所以我正在寻找一个 js 函数，它将文本框的默认值设为只读。用户不应删除默认值。

如果这是可能的，它是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:59:19.460

您不能将值的一部分设为只读...但是如果您想使用一个简单的解决方案（没有 javascript），您可以使用两个输入：

```
<input type="text" id="iban-prefix" value="DE" readonly/><input type="text" id="iban-value"/> 
```

使用 css 排列它们，并在您的服务器端连接这两个值。

或者 ：

javascript 解决方案：在您的表单上使用“onsubmit”事件调用 javascript 函数来检查用户输入的值中是否存在“DE”前缀，如果没有，则添加“DE”前缀。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:07:30.757

无需使用 JavaScript。简单的 HTML 和 CSS 就可以很好地完成这项工作。

移动`DE`到`<span>`您左侧的a 中`<input>`：

```
<span class="iban">DE</span><input type="text" id="iban" /> 
```

然后定位`<span>` *内部*：`<input>`

```
span.iban
{
    position: relative;
}

input#iban
{
    margin-left: -25px;
    padding-left: 25px;
} 
```

上面的代码产生：

![](https://i.stack.imgur.com/eV3h1.png)

这是一个[JSFiddle](http://jsfiddle.net/NUqsn/)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-24T07:02:39.893

你可以试试这个jQuery：

```
$(document).ready(function() {
    $("#iban").keydown(function(event) {

            if (event.keyCode < 48 || event.keyCode > 57 || event.keyCode == 46 || event.keyCode == 8) {
                event.preventDefault(); 
            }   

    });
}); 
```

我在这里找到它：[https ://snipt.net/GerryEng/jquery-making-textfield-only-accept-numeric-values/](https://snipt.net/GerryEng/jquery-making-textfield-only-accept-numeric-values/)

编辑：并修改它以**防止退格和删除键**。

[一个工作小提琴](http://jsfiddle.net/cbsCy/2/)

希望能帮助到你！

# mongodb - 计算具有相同数组字段的文档

> ID：16185214
> 
> 赞同：1
> 
> 时间：2013-04-24T06:50:42.333
> 
> 标签：mongodb, many-to-many

我是 mongo 的新手，我真的不知道如何咬这个：

假设我们在`owners`集合中有这个模式：

```
{
    _id: ObjectId,
    name: "name",
    cars: [ObjectId, ObjectId, ObjectId, ...]
} 
```

数组中的 _ids`cars`与其他集合相关的位置，例如`cars`.
现在，每个车主都可以拥有多辆汽车，而且每辆汽车都可以拥有多个车主（只是多对多关系）。

例如

```
[
{'_id':'1', 'name':'Mr. A', cars: ['1','2',3',4',5'] },
{'_id':'2', 'name':'Mr. B', cars: ['6'] },
{'_id':'3', 'name':'Mr. C', cars: ['1','2'] },
{'_id':'4', 'name':'Mr. D', cars: ['2',3',5','6','7'] },
{'_id':'5', 'name':'Mr. E', cars: ['6'] }
] 
```

问题是如何查看A先生与哪些车主共享汽车。
A先生如何得到这样的结果：

```
[
{'owner_id': '3', 'cars': 2},
{'owner_id': '4', 'cars': 3}
] 
```

我尝试使用聚合框架，但我看不到这样做的方法。

* * *

**编辑**
我写了这个函数，但我不知道它是否正确

```
function (owner)
{
    ret = {}
    owner.cars.forEach(function (car) {
        db.owners.find({cars: car}).forEach(function(own2){
            if(own2._id == owner._id){
                return;
            }
            if(ret[own2._id.str] !== undefined){
                ret[own2._id.str] += 1;
            }
            else{
                ret[own2._id.str] = 1;
            }
        });
    });
    return ret
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:55:26.313

我会用 2 个查询来做到这一点。它将要求您在调用代码中存储一个临时变量（我将其命名为“汽车”）。它应该看起来像这样：

```
var cars = db.owners.findOne({'name':'Mr. A'}, {cars:1})

var shared = db.owners.find({'name':{ '$ne': 'Mr. A'}, 'cars': {'$in':cars}}, {'name':1}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:40:12.387

如果您只关心与 A 先生共享的所有者，您可以尝试以下操作：

首先，拿到A先生拥有的汽车：

```
var cars = db.owners.findOne({'name':'Mr. A'}) 
```

然后对不包括 A 先生的与 A 先生相似的车主进行聚合。

```
db.owners.aggregate(
  {'$match':{$and : [{'cars':{'$in':cars}},{'name':{'$ne':'Mr. A'}}]}},
  {'$unwind':'$cars'},
  {'$group':{'_id':'$_id','owner_id':'$_id','cars':{$sum:1}}}
) 
```

我尚未测试上述查询，但我鼓励您尝试一下。

# c# - C# Process.MainWindowHandle 总是返回 IntPtr 零

> ID：16185217
> 
> 赞同：16
> 
> 时间：2013-04-24T06:51:03.613
> 
> 标签：c#, process, intptr, window-handles

这是我的代码：

```
 using (Process game = Process.Start(new ProcessStartInfo() { 
        FileName="DatabaseCheck.exe",
        RedirectStandardOutput = true,
        CreateNoWindow = true,
        UseShellExecute = false }))
        {
            lblLoad.Text = "Loading";
            int Switch = 0;

            while (game.MainWindowHandle == IntPtr.Zero)
            {
                Switch++;
                if (Switch % 1000 == 0)
                {
                    lblLoad.Text += ".";
                    if (lblLoad.Text.Contains("...."))
                        lblLoad.Text = "Loading.";

                    lblLoad.Update();
                    game.Refresh();
                }
            } 
```

问题是，game.MainWindowHandle 总是 IntPtr.Zero。我需要找到运行过程的IntPtr来确认游戏是由启动器启动的，所以我让游戏发送它是IntPtr，如果没问题让启动器响应。但为此，我必须具体了解运行进程的 IntPtr。

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-24T07:20:29.763

主窗口是当前具有焦点的进程打开的窗口（TopLevel 窗体）。您必须使用该`Refresh`方法刷新 Process 对象以***获取当前主窗口句柄（如果它已更改***）。

您只能获取`MainWindowHandle`在本地计算机上运行的进程的属性。MainWindowHandle 属性是唯一标识与进程关联的窗口的值。

**仅当进程具有图形界面时，该进程才具有与其关联的主窗口**。如果关联进程没有主窗口，则 MainWindowHandle 值为零。对于已隐藏的进程，即在任务栏中不可见的进程，该值也为零。这可能是在任务栏最右侧的通知区域中显示为图标的进程。

*如果您刚刚启动一个进程并想使用它的主窗口句柄，请考虑使用 WaitForInputIdle 方法让进程完成启动，确保已创建主窗口句柄。否则会抛出异常。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-27T07:46:48.710

```
while (!proc.HasExited)
{
    proc.Refresh();
    if (proc.MainWindowHandle.ToInt32() != 0)
    {
        return proc.MainWindowHandle;
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-06T04:01:46.833

一种解决方法是枚举所有顶级窗口并检查它们的进程ID，直到找到匹配项...

```
 [DllImport("user32.dll")]
    public static extern IntPtr FindWindowEx(IntPtr parentWindow, IntPtr previousChildWindow, string windowClass, string windowTitle);

    [DllImport("user32.dll")]
    private static extern IntPtr GetWindowThreadProcessId(IntPtr window, out int process);

    private IntPtr[] GetProcessWindows(int process) {
        IntPtr[] apRet = (new IntPtr[256]);
        int iCount = 0;
        IntPtr pLast = IntPtr.Zero;
        do {
            pLast = FindWindowEx(IntPtr.Zero, pLast, null, null);
            int iProcess_;
            GetWindowThreadProcessId(pLast, out iProcess_);
            if(iProcess_ == process) apRet[iCount++] = pLast;
        } while(pLast != IntPtr.Zero);
        System.Array.Resize(ref apRet, iCount);
        return apRet;
    } 
```

# ios - 如何在ios中设置用户对FBLoginview的读取权限？

> ID：16185218
> 
> 赞同：5
> 
> 时间：2013-04-24T06:51:04.257
> 
> 标签：ios, objective-c, facebook, facebook-graph-api, ios6

我使用 Facebook SDK 并`FBLoginView`登录 Facebook 并获得了基本用户信息，但我需要更多权限`email`，例如`birthday`. 如何添加权限？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T09:54:11.370

```
FBLoginView *loginView = [[FBLoginView alloc] init];
loginView.readPermissions = @[@"email", @"user_likes"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T07:17:13.210

尝试这个：

```
 - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

             NSArray *permissions = [[NSArray alloc] initWithObjects: @"email", nil];
                 return [FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:allowLoginUI completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
             [self sessionStateChanged:session state:state error:error];
                 }];
    } 
```

用 调用此方法`YES`，您可以授予不同的权限，例如

```
[[NSArray arrayWithObjects:
                            @"email",
                            @"user_birthday",
                            @"user_likes",
                            @"user_location",
                            @"user_photos",
                            @"read_stream",
                            @"publish_stream",
                            @"publish_actions",
                            @"status_update",
                            @"user_about_me",
                            @"read_friendlists",
                            @"friends_about_me",
                            @"friends_birthday",
                            @"friends_photos",
                            nil] retain]; 
```

# google-app-engine - M/S 到 HRD 迁移别名

> ID：16185231
> 
> 赞同：0
> 
> 时间：2013-04-24T06:51:38.810
> 
> 标签：google-app-engine

我目前正准备将基于 Master/Slave 的应用程序迁移到 High Replication Datastore。[官方文档](https://developers.google.com/appengine/docs/adminconsole/migration?hl=en)指出“*作为最后一步，您将使旧应用程序 ID 成为新应用程序 ID 的“别名””，*但我在 GAE dash 中找不到任何功能。

谁能解释这一步是如何工作的？是自动的还是手动的？如果它是自动的，那么如果出现问题，您如何恢复到原始 app-id 并删除别名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:17:06.963

您的应用程序的原始 URL 仍然有效，但 App Engine 使用新应用程序而不是旧应用程序处理您的请求。所以***old-app.appspot.com***像***new-app.appspot.com***一样工作。

这是在迁移过程结束时自动完成的。

对于问题，您需要通过生产工单联系 Google。

# android - 如何通过点击按钮打开新页面？

> ID：16185237
> 
> 赞同：-5
> 
> 时间：2013-04-24T06:51:47.900
> 
> 标签：android

我是一个编程菜鸟，我在试图弄清楚如何创建另一个页面并能够点击主页上的按钮来访问新页面时遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:00:05.417

为此，您需要了解Android中的[活动](http://developer.android.com/reference/android/app/Activity.html)知识以及用于交互活动通信的[Intent知识。](http://developer.android.com/reference/android/content/Intent.html)之后，您将必须学习[手势](http://developer.android.com/design/patterns/gestures.html)及其在 Android 中的[实现。](http://www.vogella.com/articles/AndroidGestures/article.html)

请注意：这可能是您的第一个问题。这就是为什么你不会理解你得到的反对票。阅读 Stack Overflow 的 about 页面，了解该网站的全部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:13:41.487

只需为您的按钮设置 Onclicklistener。在 Onclick() 上，使用 Intent 移动到你的下一个活动。活动，这里的意思是视图，根据你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T18:26:13.683

如果你想要的话，对于 Xamarin

[Xamarin 意图](https://developer.xamarin.com/recipes/android/fundamentals/intent/)

像这样

```
menu.Click += delegate
        {
            var intent459 = new Intent(this, typeof(MenuTopActivity));
            StartActivity(intent459);
        }; 
```

# c# - 无法使用 HTMLElementCollection 单击提交按钮？

> ID：16185239
> 
> 赞同：0
> 
> 时间：2013-04-24T06:51:53.113
> 
> 标签：c#

```
<fieldset><b>&nbsp;</b><button id="submit" class="googleCheckPosButt" 
   onclick="docSubmit()">CHECK</button></fieldset>
</form> 
```

这是一个网页的源代码，我试图将数据放入表单并提交，但我成功地将数据输入到网页的文本字段中，但我无法点击它

```
theElementCollection = 
            webBrowser1.Document.GetElementsByTagName("input");
foreach (HtmlElement curElement in theElementCollection)
{
        if (curElement.GetAttribute("id").Equals("submit"))
        {
           curElement.InvokeMember("click");                   
        }
} 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:00:07.733

我认为您的查询永远不会获得提交按钮。您需要将其更改为：

```
theElementCollection = 
            webBrowser1.Document.GetElementsByTagName("button"); 
```

* * *

对于您在评论中提到的问题，您可能应该使用[WebBrowser.DocumentCompleted](http://msdn.microsoft.com/en-IN/library/system.windows.forms.webbrowser.documentcompleted.aspx)事件来单击按钮。

# php - zend framework 2 发送邮件太慢（google smtp server）

> ID：16185240
> 
> 赞同：1
> 
> 时间：2013-04-24T06:51:54.360
> 
> 标签：php, apache, zend-framework2

我正在开发一个项目，我需要向一些用户发送通知，我正在使用带有 zend 框架 2 Zend/Mail 库的 smtp 设置。我已经打开了 tls 并在 php.ini 设置中打开了 ssl。

问题是通知太慢了，通常当 5 个或更多用户同时使用该应用程序时，我会收到超时错误。

我可以使用任何配置使这封电子邮件更快地发送吗？

让我知道是否有一些配置可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:54:45.370

为什么不将电子邮件添加到队列并实际从不同的进程发送呢？如果邮件在提交后 1 分钟发送，我认为不会有问题。

当您等待第三方系统时，它们总是存在风险。因此，我尝试通过在单独的进程中运行这些东西来最大程度地减少对 3rd 方系统的等待

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:33:19.123

如果我必须打赌，我敢打赌你的 SMTP 服务器有很多延迟。你说你正在使用谷歌的 SMTP，我不熟悉，但这将是一个遥远的服务器（相对于你的网络上的喜欢和 SMTP 框）。最重要的是，您说您正在通过 SSL 运行 SMTP。SSL 是一个复杂的协议，在连接建立之前会进行很多握手。这意味着您的服务器和 SMTP 服务之间的网络延迟会随着两台机器进行 SSL 握手对话而成倍增加。总的来说，这不是一个很好的设置。

某种工作队列会有所帮助。因此，您的 Web 绑定流程只是将一些工作放在某个队列上，而一些工作人员会尽力跟上。你可以在 PHP 中实现类似的东西（你可以考虑使用类似 gearman 或 beanstalkd 的东西来提供实际的队列）。

但是还有另一个非常专业的选择。只需使用您本地的 sendmail（假设您使用的是 unix 类型的机器）。Sendmail（以及各种插入式替代 MTA）维护自己的队列。这些东西已经存在了很多年，而且非常坚固。您也可以将 MTA 配置为通过当前的 SMTP 设置传递邮件。

不同之处在于，您的 PHP 脚本不是与远程 SMTP 服务器对话，它只是与一个本地服务对话，该服务只接收邮件，将其排队，并在几乎没有时间的情况下返回。它将邮件保留在队列中，直到它能够设法通过 SMTP 发送它。

普通的旧本地 sendmail 将大大有助于您解决问题。如果您使用的是 Windows 服务器，我不确定您的选择是什么。至少，必须有一个可以运行的本地 SMTP 服务器，该服务器可以配置为通过 SSL 将所有邮件中继到 google。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:37:14.850

我知道我在家使用的 ISP 实际上根本不允许我发送电子邮件。找出停止工作的原因是非常令人沮丧的一天。最终我找到了它，并意识到如果我在家，我就会收到超时错误，但如果我在办公室，它会发送正常。

# java - CipherOutputStream 无法写入 ByteArrayOutputStream

> ID：16185245
> 
> 赞同：2
> 
> 时间：2013-04-24T06:52:09.817
> 
> 标签：java, arrays

我正在尝试加密/解密文件，但我遇到了`ByteArrayOutputStream`and的问题`CipherOutputStream`。我可以`encrypt`存档，但不能成为`decrypt`文件。我尝试在 CipherOutputStream 之前关闭 Stream。但是 ByteArrayOutputStream 对象保持为零，并且在 CipherOutputStream 之后不包含任何字节。有任何想法吗？非常感谢。

```
public static void encryptOrDecrypt(int mode, OutputStream os, InputStream is, String key) throws Throwable {

    IvParameterSpec l_ivps;
    l_ivps = new IvParameterSpec(IV, 0, IV.length);

    DESKeySpec dks = new DESKeySpec(key.getBytes());
    SecretKeyFactory skf = SecretKeyFactory.getInstance("DES");
    SecretKey desKey = skf.generateSecret(dks);
    Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding"); 

    if (mode == Cipher.ENCRYPT_MODE) {
        cipher.init(Cipher.ENCRYPT_MODE, desKey,l_ivps);    
        CipherInputStream cis = new CipherInputStream(is, cipher);
        doCopy(cis, os);
    } else if (mode == Cipher.DECRYPT_MODE) {
        cipher.init(Cipher.DECRYPT_MODE, desKey,l_ivps);            
        CipherInputStream cis = new CipherInputStream(is, cipher);                  
        doCopy(cis, os);
        System.out.println("Decrypted");
    }
}

public static void doCopy(InputStream is, OutputStream os) throws IOException {
    byte[] bytes = new byte[64];
    int numBytes;
    System.out.println("doCopy Step1");
    System.out.println("is: "+is.read(bytes));
    while ((numBytes = is.read(bytes)) != -1) {
        os.write(bytes, 0, numBytes);
        System.out.println("doCopy Step2");
    }
    os.flush();
    os.close();
    is.close();
}

public static void writeFile(InputStream in){
    try {
        String strContent;          
        BufferedReader bReader = new BufferedReader(new InputStreamReader(in));
        StringBuffer sbfFileContents = new StringBuffer();
        String line = null;

        while( (line = bReader.readLine()) != null){
            sbfFileContents.append(line);
        }
        System.out.println("File:"+sbfFileContents);            
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException ioe){

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:55:47.723

```
os.close();

CipherOutputStream cos = new CipherOutputStream(os, cipher); 
```

您正在刷新和关闭输出流，然后在其中使用它`CiptherOutputStream`

在此之前创建`CiptherOutputStream`。

# android - 如何在带有旋转的圆形视图中设置图像？

> ID：16185246
> 
> 赞同：-2
> 
> 时间：2013-04-24T06:52:10.283
> 
> 标签：android

我想在圆形视图中设置图像如下。它也应该像轮子一样旋转。那么如何在android中设置这种类型的动画？ ![在此处输入图像描述](https://i.stack.imgur.com/ZerwW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:15:14.587

请参阅此示例，您将找到符合您要求的 Android 3D Carousel 示例。

![在此处输入图像描述](https://i.stack.imgur.com/dz808.png)

**更新**：

```
http://stackoverflow.com/q/5503892/1218762![enter image description here][1]

http://www.codeproject.com/Articles/146145/Android-3D-Carousel 
```

# iphone - Coverflow 不适用于 Web 服务数据

> ID：16185248
> 
> 赞同：0
> 
> 时间：2013-04-24T06:52:25.127
> 
> 标签：iphone, ios

在我的应用程序中，我想显示coverflow过程，我从网上获得了代码，使用默认数组时它工作正常，但是在使用json Webservices时它不会连续显示图像，它只显示一个图像，我希望所有图像都是连续显示。这是示例代码，

```
- (void)viewDidLoad
{

    NSString *Categor=@"http://hrmsiphone.atrity.info:7006/HRMSService.svc/
    GetEmployeeDesignationByLocation/Date=%@,AP=%@,Unit=%@,Location=%@";

Date = @"2013-04-24";

AP = @"A";
Unit = @"A-UNIT-FULLSHOES";
Location = @"Unit";
NewDic2 = [Array objectAtIndex:0];

 NSString *Category = [NSString stringWithFormat:Categor,Date,AP,Unit,Location];

dispatch_sync(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL:  kLatestURL];
    [self performSelectorOnMainThread:@selector(fetchedData:)
                           withObject:data
                        waitUntilDone:YES];
});

 - (void)fetchedData:(NSData *)responseData
   {

NSError* error;
NSDictionary* json = [NSJSONSerialization
                      JSONObjectWithData:responseData

                      options:kNilOptions
                      error:&error];
NSArray* Increment  = [ json  objectForKey:@"GetEmployeeDesignationByLocationResult"];

self.Details2 = Increment;

NSLog(@"Index: %@",Increment);

}
 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{
return [Details2 count];

}

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
      (NSIndexPath *)indexPath
  {
static NSString *simpleTableIdentifier = @"AttenEmpPhto";

AttenEmpPhto *cell = (AttenEmpPhto *)[tableView    
dequeueReusableCellWithIdentifier:simpleTableIdentifier];      
if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"AttenEmpPhto" owner:self     

    cell = [nib objectAtIndex:0];

}

self.NewDic1=[self.Details2 objectAtIndex:indexPath.row];

cell.Name.text = [NSString stringWithFormat:@"%@",  [self.NewDic1 objectForKey:    
 @"Employee_Name"]];            

UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
UIImage *image = [UIImage imageNamed:@"003923_full.jpg"];
imageView.image = image;
cell.backgroundView = imageView;

NSString    *imageURL=@"http://hrmsiphone.atrity.info:7006/HRMSService.svc/
GetEmpImage/EmployeeNo=%@";
NSLog(@"Image: %@", imageURL);

NSString *empImage = [NSString stringWithFormat:imageURL,[self.NewDic1 objectForKey:  
@"Employee_No"]];

NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:empImage]];

  covers = [NSMutableArray arrayWithObjects:[UIImage imageWithData:imageData],nil];

NSLog(@"Image: %@", covers);

 NSLog(@"Image: %@", imageData);

coverflow = [[TKCoverflowView alloc] initWithFrame:CGRectMake(0, 50, 500, 300)];
coverflow.coverflowDelegate = self;
coverflow.DataSource = self;
[self.view addSubview:coverflow];
[coverflow setNumberOfCovers:10];

return cell;
}
  - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)
  interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

        #pragma Coverflow delegate methods
  - (void) coverflowView:(TKCoverflowView*)coverflowView coverAtIndexWasBroughtToFront:
     (int)index{
NSLog(@"Front %d",index);
        }

- (TKCoverflowCoverView*) coverflowView:(TKCoverflowView*)coverflowView coverAtIndex:
   (int)index
 {

TKCoverflowCoverView *cover = [coverflowView dequeueReusableCoverView];

if(cover == nil){
    // Change the covers size here
    cover = [[TKCoverflowCoverView alloc] initWithFrame:CGRectMake(0, 0, 224, 
            300)];     
    cover.baseline = 224;

}

cover.image = [covers objectAtIndex:index % [covers count]]; 
```

这里 [covers count] 返回 1 ，但我需要 2(EmployeeNo - 1 & 3)

```
 NSLog(@"CC: %lu", (unsigned long)[covers count] );
 NSLog(@"CM: %@", cover.image );

return cover;

}
   - (void) coverflowView:(TKCoverflowView*)coverflowView coverAtIndexWasDoubleTapped:
(int)index{

TKCoverflowCoverView *cover = [coverflowView coverAtIndex:index];
if(cover == nil) return;
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:cover 
    cache:YES];
[UIView commitAnimations];

//  NSLog(@"Index: %d",index);
}

 - (void)didReceiveMemoryWarning
     {
[super didReceiveMemoryWarning];

   } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T09:59:53.533

```
- (UIImage *)defaultImage {
    return [UIImage imageNamed:@"default.jpg"];
}

```

使用这个来设置默认图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:44:00.917

删除该行

```
covers = [NSMutableArray arrayWithObjects:[UIImage imageWithData:imageData],nil]; 
```

并添加行

```
if (covers == nil) {
   covers = [[NSMutableArray alloc] init];
}
[covers addObject:[UIImage imageWithData:imageData]]; 
```

# android - Android 标记自定义信息窗口

> ID：16185254
> 
> 赞同：3
> 
> 时间：2013-04-24T06:52:39.260
> 
> 标签：android, google-maps-android-api-2, marker, infowindow

我正在使用谷歌地图 V2。

我需要在 custom 中显示`ListView`(custom `ListView`with Image) `InfoWindow`。我试过了，只在 中获得了成功`View`，问题是我无法获得该`listItemClick`事件。

```
googleMap.setInfoWindowAdapter(new InfoWindowAdapter() {

@Override
public View getInfoWindow(Marker arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public View getInfoContents(Marker arg0) {
    View v = getLayoutInflater().inflate(R.layout.infowindow, null);
    try{
        String[] names = {"The Mayfair (D22) Condominium, For Rent","The Mayfair (D22) Condominium, For Rent","The Mayfair (D22) Condominium, For Rent","The Mayfair (D22) Condominium, For Rent"};
        Log.d("f", names.toString());
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(PropertyMapList.this, R.layout.info_row_view, R.id.textView1, names);
        Log.d("d", adapter.getCount()+"");
        ListView list = (ListView) v.findViewById(R.id.listView1);
        list.setAdapter(adapter);
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(
                    AdapterView<?> arg0,
                    View arg1, int arg2,
                    long arg3) {
                Log.d("position:", arg2+"");
            }
        });
    }catch (Exception e) {
        e.printStackTrace();
    }
    return v;
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-06T06:54:37.127

最后我自己通过这个代码集成得到了一个成功的答案。

您可以在 Play 商店中找到该应用

[https://play.google.com/store/apps/details?id=com.stp.stproperty&hl=en](https://play.google.com/store/apps/details?id=com.stp.stproperty&hl=en)

标记 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:orientation="vertical" android:background="@drawable/marker_bg" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="300dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="7dp"
        android:layout_marginLeft="5dp"
        android:layout_marginBottom="20dp"
        android:layout_marginRight="5dp" >

    </ListView>

</RelativeLayout> 
```

和 listview 自定义布局（带箭头图像的文本）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="90dp"
    android:orientation="vertical"
    android:gravity="center_vertical"
    android:background="@drawable/marker_selecter" >

    <RelativeLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <TextView
            android:id="@+id/ProeprtyName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="5dp"
            android:layout_toLeftOf="@+id/RightArrow"
            android:textColor="@color/list_textcolor"
            android:textSize="16sp" />

        <ImageView
            android:id="@+id/RightArrow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="3dp"
            android:layout_centerInParent="true"
            android:src="@drawable/detaildisclosure" />
    </RelativeLayout>
</RelativeLayout> 
```

向地图添加标记

```
// Set title for marker here, with the help of this title we can customize easily and change lat and long values, icon as weel to your code
googleMap.addMarker(new MarkerOptions()
    .title(infoTitle.get(index))
    .position(new LatLng(Double.parseDouble(lanAndLat.get(index).split("\\$")[0]), Double.parseDouble(lanAndLat.get(index).split("\\$")[1])))
    .icon(BitmapDescriptorFactory.fromBitmap(icon))); 
```

将标记 onclicklistener 设置为：

```
googleMap.setOnMarkerClickListener(new OnMarkerClickListener() {

    @Override
    public boolean onMarkerClick(Marker arg0) {

        drawCustomMarker(arg0.getPosition().latitude, arg0.getPosition().longitude, arg0.getTitle(),0);
        return true;
    }
}); 
```

将自定义标记声明为全局变量（从视图中清除并重新创建它会有所帮助）

```
CustomMarker = getLayoutInflater().inflate(R.layout.infowindow, null); 
```

自定义标记绘图功能。我为我的用例做了它。请根据您的要求定制

```
private void drawCustomMarker(Double latitude, Double longitude, String title, int propertyId){
    try{
        int selectedMarkerIndex = -1; // On-select from list-view this needs to be highlighted in marker as selected
        mapinnerLayout.removeView(CustomMarker);
        googleMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(latitude, longitude)));

        // I am passing title as string with # separated values to access

        String[] names = title.split("\\#");
        ArrayList<MarkerAdapterClass> markerClass = new ArrayList<MarkerAdapterClass>();
        for(int i=0;i<names.length;i++){
            // this is custom class for my own use if you want you can change this class 
            MarkerAdapterClass classObj = new MarkerAdapterClass();
            String[] data = names[i].split("\\|");
            int pId = Integer.parseInt(data[1]);
            if(pId==propertyId){
                selectedMarkerIndex = i;
            }
            classObj.setpropertyTitle(data[0]);
            classObj.setid(pId);
            classObj.setitemIndex(Integer.parseInt(data[2]));
            markerClass.add(classObj);
        }
        CustomMarker.setVisibility(View.VISIBLE);
        MarkerInfoAdapter adapter = new MarkerInfoAdapter(PropertyMapList.this, markerClass, districtView);
        final ListView list = (ListView) CustomMarker.findViewById(R.id.listView1);
        list.setAdapter(adapter);
        if(selectedMarkerIndex>=0){
            adapter.setSelected(selectedMarkerIndex);
            list.setSelection(selectedMarkerIndex);
        }
        int height = getMarkerInfoHeight(markerClass.size(), list);
        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(450,height);
        layoutParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
        layoutParams.setMargins(0, mapinnerLayout.getHeight()/2 - (height+30), 0, 0);
        mapinnerLayout.addView(CustomMarker, layoutParams);

    }catch(Exception e){
        //e.printStackTrace();
    }
} 
```

`mapinnerLayout`是一个相对布局（地图的容器）

我正在使用它来支持 10 和 7 英寸平板电脑。设备和纵向到横向的高度和宽度会有所不同。我在这里计算：

```
public int getMarkerInfoHeight(int size, ListView view){
    int height = 90;
    int Orientation = PropertyMapList.this.getResources().getConfiguration().orientation;
    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    int deviceheight = displaymetrics.heightPixels;
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    lp.setMargins(5, 3, 5, 12);
    if(Orientation == Configuration.ORIENTATION_LANDSCAPE && deviceheight <= 700){
        if(size > 1){
            height = 190;
            lp.setMargins(5, 3, 5, 25);
        }
    }else{
        if(size == 2){
            height = 190;
            lp.setMargins(5, 3, 5, 25);
        }else if(size > 2){
            height = 285;
            lp.setMargins(5, 3, 5, 35);
        }
    }
    view.setLayoutParams(lp);
    return height;
} 
```

标记适配器：

```
public class MarkerInfoAdapter extends BaseAdapter {
    private static ArrayList<MarkerAdapterClass> propertyNames;
    private LayoutInflater mInflater;
    int selectedPosition = -1;
    private ListView parentAdapter;
    Context context;
    public MarkerInfoAdapter(Context context, ArrayList<MarkerAdapterClass> results, ListView parentAdapter) {
        propertyNames = results;
        this.parentAdapter = parentAdapter;
        mInflater = LayoutInflater.from(context);
        this.context = context;
    }
    @Override
    public int getCount() {
        return propertyNames.size();
    }

    @Override
    public Object getItem(int position) {
        return propertyNames.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }
    static class ViewHolder {
        TextView Name;
        ImageView image;
    }
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        try{
            if(convertView==null)
            {
                convertView=mInflater.inflate(R.layout.marker_row_view, null);
                holder=new ViewHolder();
                holder.Name=(TextView)convertView.findViewById(R.id.ProeprtyName);
                holder.image=(ImageView)convertView.findViewById(R.id.RightArrow);
                convertView.setTag(holder);
            }
            else
            {
                holder=(ViewHolder)convertView.getTag();
            }
            holder.Name.setText(propertyNames.get(position).getpropertyTitle());
            if(selectedPosition == position){
                convertView.setBackgroundResource(R.drawable.blue_marker_bg);
                ((TextView)convertView.findViewById(R.id.ProeprtyName)).setTextColor(Color.WHITE);
                convertView.setMinimumHeight(80);
            }else{
                convertView.setBackgroundResource(R.drawable.directories_list_bg);
                ((TextView)convertView.findViewById(R.id.ProeprtyName)).setTextColor(Color.BLACK);
                convertView.setMinimumHeight(80);
            }
            ((TextView)convertView.findViewById(R.id.ProeprtyName)).setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    setSelected(position);
                    if(context.getClass().getSimpleName().equals("PropertyMapList")){
                        ((PropertyListAdaptor)parentAdapter.getAdapter()).setSelected(propertyNames.get(position).getitemIndex());
                    }else{
                        ((FavoriteListAdapter)parentAdapter.getAdapter()).setSelected(propertyNames.get(position).getitemIndex());
                    }
                    parentAdapter.setSelection(propertyNames.get(position).getitemIndex());
                }
            });
        }catch (Exception e) {
            e.printStackTrace();
        }

        return convertView;
    }
    public void setSelected(int position) {
        selectedPosition = position;
        notifyDataSetChanged();
    }
} 
```

标记适配器类

```
public class MarkerAdapterClass {
    private int id;
    private String propertyTitle;
    private int itemIndex=0;

    public String getpropertyTitle() {
        return propertyTitle;
    }
    public void setpropertyTitle(String title) {
        this.propertyTitle = title;
    }
    public int getitemIndex() {
        return itemIndex;
    }
    public void setitemIndex(int itemIndex) {
        this.itemIndex = itemIndex;
    }
    public int getid() {
        return this.id;
    }
    public void setid(int id) {
        this.id = id;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T06:55:26.173

绘制的信息窗口不是实时视图。视图在返回时呈现为图像（使用`View.draw(Canvas)`）

检查[文件](https://developers.google.com/maps/documentation/android/marker#info_window_click_events)

# c# - 转换列表 到字节[]

> ID：16185255
> 
> 赞同：0
> 
> 时间：2013-04-24T06:52:43.287
> 
> 标签：c#, type-conversion, gtk#

我使用 Gtk#，我需要转换`List<Byte[]>`为`Byte[]`. 我在[这里](https://stackoverflow.com/questions/4868113/convert-listbyte-to-one-byte-array)找到了此操作的示例，但它是 .NET Framework 的示例，当我尝试通过 Gtk# 执行此操作时，出现一些编译错误：

> “类型`System.Collections.Generic.List<byte[]>' does not contain a definition for`SelectMany' 并且找不到扩展方法`SelectMany' of type`System.Collections.Generic.List'（您是否缺少 using 指令或程序集引用？）（CS1061）”。

如何解决此错误或我可以使用其他 Gtk# 的转换方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:02:11.647

确保：

1.  您正在使用 .NET 框架 3.5 或更高版本。
2.  您有对 System.Core 的引用。
3.  您的代码文件顶部有“使用 System.Linq”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:58:45.517

IEnumerable 的扩展是后来的 .net 框架版本的一部分，Gtk# 可能没有它们，或者它们可能使用另一个名称。

一个简单的（不确定是否有更简单的方法）方法是计算数组需要的总大小并将其初始化为该大小。然后循环遍历列表并将每个 byte[] 中的数据放入新的 byte[] 中，方法是跟踪您在数组中的距离。

```
private static Byte[] ConvertList(List<Byte[]> list)
    {
        int totalLength = 0;

        foreach (byte[] b in list)
        {
            totalLength += b.Length;
        }

        byte[] result = new byte[totalLength];

        int currentPosition = 0;

        foreach (byte[] byteArray in list)
        {
            foreach (byte b in byteArray)
            {
                result[currentPosition] = b;
                currentPosition++;
            }
        }

        return result;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:52:36.500

```
private static Byte[] ConvertList(List<Byte[]> list)
    {
        List<Byte> tmpList = new List<byte>();
        foreach (Byte[] byteArray in list)
            foreach (Byte singleByte in byteArray)
                tmpList.Add(singleByte);
        return tmpList.ToArray();
    } 
```

几乎是另一个代码示例的较短版本。针对 .Net Framework 2.0 进行测试

# javascript - jQuery Autocomplete() 在 Struts 中不起作用

> ID：16185257
> 
> 赞同：0
> 
> 时间：2013-04-24T06:52:44.027
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试实现 jQuery 自动完成功能。但它不工作。我的代码如下。

```
$(".autoinputName").keyup(function(){
  var input=$("#autoinput").val();

// if(input.length >2){

     $.get("ajaxForm.do?input="+input,function(response){

         var data=response.numbers;

          data_array=data.split(",");

         $( "#autoinput" ).autocomplete({
            source: data_array 
        });
     });//end of get function
  //}
});

<input id="autoinput" class="autoinputName" /> 
```

我正在从动作类中获取 data_array、data_array = 一、二、三的值。你能建议我如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:25:54.373

使用[autocomplete](http://jqueryui.com/autocomplete/)的[source](http://api.jqueryui.com/autocomplete/#option-source)属性发出 ajax 请求

```
$(function(){

  $(".autoinputName").autocomplete({
      source : function(request, callback) {
          $.get("ajaxForm.do", {
              input : request.term,
              dataType: 'json'
          }, function(response) {
              var data = response.numbers;
              var data_array = data.split(",");
              callback(data_array)
          });
      }
  });

}); 
```

演示：[Plunker](http://plnkr.co/edit/qrdCLDrjhNfdb0BDBuJo?p=preview)

# ios - iOS：调整 UIWebView 的高度 - 奇怪的行为

> ID：16185258
> 
> 赞同：2
> 
> 时间：2013-04-24T06:52:52.927
> 
> 标签：ios, xcode, uiwebview, scrollview

我有个问题。在`Xcode`我有一个`ViewController`嵌入视图>`ScrollView`并且滚动视图内部是一个 UIWebView。

应用程序读取一些 XML 数据并将格式化的文本粘贴到`UIWebView`. 之后`UIWebView-Element`是另一个元素，所以我必须动态调整高度`UIWebView`。

加载视图后一切都很好，但是当我点击屏幕时，视图会重新`scrollview`调整其故事板高度。

为什么 ？

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView
{
aWebView.scrollView.scrollEnabled = NO;    // Property available in iOS 5.0 and later
CGRect frame = aWebView.frame;

frame.size.width = 280;       // Your desired width here.
frame.size.height = 1;        // Set the height to a small one.

aWebView.frame = frame;       // Set webView's Frame, forcing the Layout of its embedded     scrollView with current Frame's constraints (Width set above).

frame.size.height = aWebView.scrollView.contentSize.height;  // Get the corresponding         height from the webView's embedded scrollView.

aWebView.frame = frame;       // Set the scrollView contentHeight back to the frame itself.

NSLog(@"size: %f, %f", aWebView.frame.size.width, aWebView.frame.size.height);

// Position URL Label
CGRect frame_label = fachmesseDetailWebsite.frame;
NSLog(@"x: %f", frame_label.origin.x);
NSLog(@"y: %f", frame_label.origin.y);
frame_label.origin.y=aWebView.frame.size.height+115;//pass the cordinate which you want
frame_label.origin.x= 20;//pass the cordinate which you want
fachmesseDetailWebsite.frame= frame_label;
NSLog(@"x: %f", frame_label.origin.x);
NSLog(@"y: %f", frame_label.origin.y);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:09:26.813

每当您更改框架时，您都必须重新加载 webview，然后只有 webview 框架会改变您放在那里的任何内容，否则它不会影响 webview。

```
[webview reload]; 
```

编辑：这个工作

```
UIWebView *web=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 100, 100)];

    NSString* html = [NSString stringWithFormat:@"<html><head><style>a { color: #db5226; text-decoration: none; font-weight: bold; } body { padding: 0; margin: 0; font-size:45px;font-family: Helvetica;text-align:left; color:black; } </style></head<body>%@</body></html>",@"helow"];
    [web loadHTMLString:html baseURL:nil];
    [self.view addSubview:web]; 
```

# javascript - 字母数字的正则表达式，没有空格和 9 个字符输入？

> ID：16185261
> 
> 赞同：1
> 
> 时间：2013-04-24T06:53:04.270
> 
> 标签：javascript, asp.net, regex, validation

我用过

```
"^[a-zA-Z0-9]*$" 
```

对于字母数字没有空格它的工作

现在我必须限制只允许 9 个字符，而不是更多，而不是更少，只有 9

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T06:54:36.250

您可以使用花括号来设置重复限制：

```
"^[a-zA-Z0-9]{9}$" 
```

这只会匹配字符类中的模式恰好重复 9 次的字符串。

请注意，您还可以使用它来将重复限制在一个范围内。此示例仅匹配字符类模式重复 3 到 5 次的字符串：

```
"^[a-zA-Z0-9]{3,5}$" 
```

您可以省略第二个数字，但保留逗号以指定*最小*重复次数，因此该数字将匹配“至少 5”：

```
"^[a-zA-Z0-9]{5,}$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:14:56.443

最简单的方法是将范围验证器与正则表达式验证器一起使用。或使用 James Allardice 解决方案，它也可能对您有所帮助。但我会建议使用 Range Validator 以及您的正则表达式[单击](http://msdn.microsoft.com/en-us/library/bk58fdzx%28v=vs.100%29.aspx)

# mongodb - 在 mongodb c# 驱动程序中设置 DateTimeSerializationOptions.Defaults 的新方法是什么？

> ID：16185262
> 
> 赞同：5
> 
> 时间：2013-04-24T06:53:10.587
> 
> 标签：mongodb, mongodb-.net-driver, datetime-format

我正在使用这条线来设置日期时间默认值。

```
DateTimeSerializationOptions.Defaults = DateTimeSerializationOptions.LocalInstance; 
```

我收到这个警告。 **'MongoDB.Bson.Serialization.Options.DateTimeSerializationOptions.Defaults' 已过时：'使用所需选项创建并注册 DateTimeSerializer。**'

但我找不到改变它的例子......我怎样才能改变这种过时的用法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T18:38:19.423

像这样注册日期/时间序列化程序：

```
BsonSerializer.RegisterSerializer(typeof(DateTime), DateTimeSerializer.LocalInstance); 
```

请注意，一旦序列化程序已经注册，您就无法注册序列化程序。此外，驱动程序在第一次需要时为每种类型创建一个默认序列化程序。因此，您需要在第一次调用驱动程序以读取或写入数据*之前调用此代码。*

# javascript - 获取有关本地机器的信息

> ID：16185263
> 
> 赞同：0
> 
> 时间：2013-04-24T06:53:13.817
> 
> 标签：javascript, asp.net, asp.net-mvc-3, silverlight

我有一个 MVC3 项目，需要知道有关本地机器的信息，例如 RAM、处理器、计算机名称、系统类型。是否可以使用 JS 获取此信息，或者可以使用哪种技术（网络）来获取此信息。我知道这可以通过silverlight来完成。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:38:34.620

您将在此处获得更多信息[http://social.msdn.microsoft.com/Forums/en-US/silverlightnet/thread/087ba8cc-f0e0-4497-aeb0-b79e35d832b8/](http://social.msdn.microsoft.com/Forums/en-US/silverlightnet/thread/087ba8cc-f0e0-4497-aeb0-b79e35d832b8/)

# xslt - 如何使用 XSLT2.0 在日志中显示当前时间

> ID：16185268
> 
> 赞同：0
> 
> 时间：2013-04-24T06:53:36.383
> 
> 标签：xslt, xslt-1.0, xslt-2.0

如何使用 XSLT-2.0 在日志中显示当前时间/日期。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:59:21.567

日期函数原生可用

```
<xsl:value-of  select="current-dateTime()"/> 
```

还有 current-date() 和 current-time()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:24:14.900

如果您想显示在​​样式表执行过程中变化的日期时间，那么您需要注意执行顺序是完全不可预测的，因此实际的时间戳将毫无意义。你可以得到惊喜，例如做

```
<xsl:variable name="start" select="java:timestamp()"/> 
```

在开始，然后

```
<xsl:variable name="end" select="java:timestamp()"/> 
```

然后输出$end - $start，发现结果是否定的，因为变量是在第一次引用的时候求值的。

因此，您可以通过调用扩展函数来获取系统时间戳（详细信息取决于您的处理器），但您需要小心您的要求。

# testing - 为什么边界分析要指定最小单位？

> ID：16185272
> 
> 赞同：0
> 
> 时间：2013-04-24T06:53:38.403
> 
> 标签：testing, boundary

《高级软件测试指南》一书提到，应该始终知道 BVA 的最小增量。

但我不明白为什么：

10 - 20 边界值 9,10 和 20,21。

10.0 - 20.0 边界值 9.9,10.0 和 20.0,20.1

我的意思是，如果由于缺少 = 或不正确的关系运算符而导致错误，则该值是否大 1 或 0.1 都没有关系。知道尽可能少的单位有什么意义，你能给我举一个真正重要的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:28:31.667

1 和 0.1 之间存在差异：您的第一种情况显示整数，而第二种情况显示小数。

因此，如果您使用 9.9 的值测试 10-20 范围，您可能会收到数据类型错误（小数而不是整数，或浮点数而不是字节）。通过这样做，您可以测试数据类型，而不是测试范围。该测试也很重要，但与边界分析不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:43:57.703

您在医院有一台机器测量温度。如果温度超过 98.6 度超过 10 分钟，机器会提醒医生。您检查 98、98.6、99。此人的体温在 98.9 保持几个小时。这是一个问题吗？不知道！我不是医生！

一个更好的问题可能是你为什么不尽可能精确。如果要求规定 >60，并且允许保留 2 个小数位，为什么要测试 61 而不是 60.01？

故障不一定在操作员身上。某处可能存在舍入或截断问题。去问问任何会计师，在每天几亿笔交易中，1.00 美元到 1.10 美元之间的意义何在。

# html - 如何拥有静态页面布局

> ID：16185273
> 
> 赞同：1
> 
> 时间：2013-04-24T06:53:40.417
> 
> 标签：html, css, layout, browser, web

下面是我的代码，它是页面布局。但是如果我们调整浏览器的大小，它会不断变化。

我们如何才能拥有静态页面布局。

```
<head>
<style> 
body, html { margin:0; padding:0; } 

#wrap { width:100%; height:100%; } 

#header { width:100%; height:15%; text-align:center; border-bottom-style:solid; border-width:thin; background-color:lightyellow; } 

</style> 
</head> 
<body> 
<div id="wrap"> 
    <div id="header"> 
    <br><br><br> 
    <label for="tb2">textbox2</label><input type="text" name="tb2" size="30" maxlength="30" id="tb2"> 
    <input type="submit" name="search" value="search"> 
    </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:43:02.817

您可以使用响应式设计来更改网站的样式。例如，“全尺寸”显示将为您的主容器使用 1000 像素的宽度。较小的屏幕尺寸（例如 iPad）可能会设置 600 像素的宽度。移动设备可以使用 300px。ETC...

在你的CSS中它会像这样......

```
#yourPageContainer{width:1000px;}
#otherElements{background-color:#afa;}

@media screen and (max-width:500px){    
    #yourPageContainer{width:500px;}
    #otherElements{background-color:#aaf;}
}

@media screen and (max-width:300px){
    #yourPageContainer{width:300px;}
    #otherElements{background-color:#faa;}
} 
```

这里的关键是根据屏幕大小为容器设置绝对宽度。

我在这里创建了一个示例[http://jsfiddle.net/kxRtv/](http://jsfiddle.net/kxRtv/) - 尝试调整浏览器窗口的大小，看看会发生什么......

这个网站可能会提供一些灵感 - [http://mediaqueri.es/](http://mediaqueri.es/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:54:53.827

不要对宽度和高度属性使用百分比，而是使用绝对值（如`px`, `em`）。

`#wrap { width:100px; height:100px; }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T06:55:06.177

您`%`用于定义高度和宽度，因此请改用`px`,`em`因为如果您使用`%`它们是相对于您的视口分辨率的，请`px`改用

```
<style>
div {
   width: 100px;
   margin: auto;
}
</style>

<div></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T07:53:39.563

I've encountered screen resolution problem before and this solved my problem.

*   If you want your website to dynamically changing whenever your screen resolution change you can use % in your css to all your page, containers, wrappers etc. so that it will adjust on any screen resolution. (*problem: This destroys your web design whenever the screen resolution is big*)

*   The best solution I find so far and I think other professional websites also is doing is to make your width static or fixed(use .px or .em) and just let your page get on the center. This will preserve the design you made on your page and everything will stay and looks as it is.

    In your CSS just add this line on your page ,containers, wrappers etc.

    **margin:0 auto;**

    and your site will be centered to any screen resolution. For more examples and to read more about it check this reference [How to Center a Website With CSS](http://buildinternet.com/2008/11/how-to-center-a-website-with-css/). If you want to test different screen resolutions without changing your actual screen resolution you could try it [here](http://quirktools.com/screenfly/).

    Hope this helps :)

# android-intent - 无法使用非法参数异常启动服务

> ID：16185274
> 
> 赞同：0
> 
> 时间：2013-04-24T06:53:40.690
> 
> 标签：android-intent, salesforce, android-service

我正在从另一个活动 UserStatus 调用我的服务 MyServices，但该应用程序正在强制关闭。

这是我的用户状态活动：

```
import java.util.HashMap;

import org.json.JSONArray;

import com.salesforce.androidsdk.rest.RestRequest;
import com.salesforce.androidsdk.rest.RestResponse;
import com.salesforce.androidsdk.rest.RestClient.AsyncRequestCallback;
import com.salesforce.samples.templateapp.MyServices;

import android.os.Bundle;
import android.provider.Settings;
import android.support.v4.app.FragmentActivity;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.Switch;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ToggleButton;
import android.location.*;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;

public class UserStatus extends FragmentActivity {

    ToggleButton statusToggle;

     // Creating Toggle button to monitor the stauts of donor

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_status);
        statusToggle = (ToggleButton) findViewById(R.id.toggleButton1);
        final TextView infoText;

        infoText = (TextView) findViewById(R.id.textInfo);

        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        final boolean gpsEnabled = lm
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        statusToggle
                .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {

                        if (isChecked) {
                            statusToggle.setTextOn("On");
                            Toast.makeText(getApplicationContext(),
                                    "Toggle is on", Toast.LENGTH_LONG).show();

                            if (!gpsEnabled) {
                                new EnableGPSDialogFragment().show(
                                    getFragmentManager(), "OK");
                        }
                            Log.v("X","before myservices");
                            //Starting service if the toggle is in checked state.
                            startService(new Intent(getBaseContext(),
                                MyServices.class));
                            //Intent in1 = new Intent(UserStatus.this,GPSUpdate.class);

                            //startActivity(in1);

                            } 
                        else {
                            statusToggle.setTextOff("Off");
                            Toast.makeText(getApplicationContext(),
                                    "Toggle is off", Toast.LENGTH_LONG).show();
                            //Stopping service if the toggle is not in checked state.                           
                            stopService(new Intent(getBaseContext(),
                                    MyServices.class));
                        }
                    }
                });
    }

    //Opening GPS settings if GPS is not enabled
    private void enableLocationSettings() {
        Intent settingsIntent = new Intent(
                Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(settingsIntent);
    }

    private class EnableGPSDialogFragment extends DialogFragment {
        public Dialog onCreateDialog(Bundle SavedInstanceState) {
            return new AlertDialog.Builder(getActivity())
                    .setTitle(R.string.enable_GPS)
                    .setMessage(R.string.enable_GPS_dialog)
                    .setPositiveButton(R.string.enable_GPS,
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    enableLocationSettings();

                                }

                            }).create();
        }
    }

} 
```

* * *

我的服务类：

```
import java.util.HashMap;

import com.salesforce.androidsdk.rest.RestClient;
import com.salesforce.androidsdk.rest.RestRequest;
import com.salesforce.androidsdk.rest.RestResponse;
import com.salesforce.androidsdk.rest.RestClient.AsyncRequestCallback;

import android.app.Service;
import android.content.Context;

import android.content.Intent;
import android.location.GpsStatus.Listener;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MyServices extends Service implements LocationListener {
    RestClient client;
    double plat;
    double plong;
    int Two_Min=2*60*1000;

    public int onStartCommand(Intent intent, int flags, int startId) {

        Toast.makeText(this, "Location Updation has started", Toast.LENGTH_LONG)
                .show();
        Log.v("X","Response:in onStartCommand()");
        LocationListener ll1 = null;

        LocationManager lm1 = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
           Location location = lm1.getLastKnownLocation(LocationManager.GPS_PROVIDER);
           Log.v("X",
                    "Response: "+location);

            Log.v("X",
                    "Response:After creating lm and ll ");

            lm1.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll1);
            Log.v("X",
                    "Response:After lm1.requestLocationUpdates ");

        return START_STICKY;

    }

    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Location Updation has stoped", Toast.LENGTH_LONG)
                .show();
    }
......there is code here but have omitted it to reduce the code length........
} 
```

* * *

logcat 显示以下错误：

```
04-24 11:25:00.412: E/AndroidRuntime(8338): FATAL EXCEPTION: main
04-24 11:25:00.412: E/AndroidRuntime(8338): java.lang.RuntimeException: Unable to start service com.salesforce.samples.templateapp.MyServices@413d52e8 with Intent { cmp=com.salesforce.samples.templateapp/.MyServices }: java.lang.IllegalArgumentException: listener==null
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2403)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.app.ActivityThread.access$1900(ActivityThread.java:127)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1221)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.os.Looper.loop(Looper.java:137)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.app.ActivityThread.main(ActivityThread.java:4448)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at dalvik.system.NativeStart.main(Native Method)
04-24 11:25:00.412: E/AndroidRuntime(8338): Caused by: java.lang.IllegalArgumentException: listener==null
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.location.LocationManager.requestLocationUpdates(LocationManager.java:451)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at com.salesforce.samples.templateapp.MyServices.onStartCommand(MyServices.java:51)
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2386)
04-24 11:25:00.412: E/AndroidRuntime(8338):     ... 10 more 
```

请提出代码有什么问题...如果需要，会将剩余的代码放在 MyServices 中...提前多谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:05:01.077

根本原因是：

```
04-24 11:25:00.412: E/AndroidRuntime(8338): Caused by: java.lang.IllegalArgumentException: listener==null
04-24 11:25:00.412: E/AndroidRuntime(8338):     at android.location.LocationManager.requestLocationUpdates(LocationManager.java:451) 
```

在您的代码中，您已将参数传递`null`给`LocationListener`该方法。

```
 LocationListener ll1 = null;
...
        lm1.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll1); 
```

您可以创建`LocationListener`如下示例的实例：

```
 Log.v("X","Response:in onStartCommand()");
LocationListener ll1 = new LocationListener() {

    public void onStatusChanged(String provider, int status, Bundle extras) {
                //Put code to handle status change here
    }

    public void onProviderEnabled(String provider) {
                //Put code to handle when a provider is enabled
    }

    public void onProviderDisabled(String provider) {
                //Put code to handle when a provider is disabled
    }

    public void onLocationChanged(Location location) {
                //Put code to handle change in location
    }
}; 
```

# oracle - 在 where 子句中的 Oracle 集合

> ID：16185277
> 
> 赞同：8
> 
> 时间：2013-04-24T06:53:50.623
> 
> 标签：oracle, collections

我在 oracle 代码块中使用集合，因为没有表变量（如在 MS SQL Server 中）。

```
DECLARE
    TYPE I_NAME IS TABLE OF NVARCHAR2(512);     
    I_ITEMNAME      I_NAME := I_NAME(); 
BEGIN 
```

我正在使用“BULK COLLECT INTO I_ITEMNAME”来填充收藏。
我想在 SELECT 查询的 WHERE 子句中使用此集合，但找不到执行此操作的方法。目前我正在使用 FOR 循环并一项一项地获取项目。
我如何在 WHERE 子句中直接使用集合，例如

> 从 TBL 中选择 * I_ITEMNAME 中的 COL？

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T07:28:13.167

您不能在 SQL 子句中使用本地声明的集合：

```
declare
    type i_name is table of nvarchar2(512);
    i_itemname i_name := i_name();
    c number;
begin
    select distinct owner bulk collect into i_itemname from all_objects;
    dbms_output.put_line(i_itemname.count);
    select count(*) into c
    from all_tables
    where owner in (select * from table(i_itemname));
    dbms_output.put_line(c);
end;
/

    where owner in (select * from table(i_itemname));
                                        *
ERROR at line 10:
ORA-06550: line 10, column 41:
PLS-00642: local collection types not allowed in SQL statements
ORA-06550: line 10, column 35:
PL/SQL: ORA-22905: cannot access rows from a non-nested table item
ORA-06550: line 8, column 5:
PL/SQL: SQL Statement ignored 
```

但是如果它是在模式级别声明的，你可以这样做，本质上是让 SQL 知道类型，而不仅仅是 PL/SQL：

```
create type i_name is table of nvarchar2(512);
/

Type created.

declare
    i_itemname i_name := i_name();      
    c number;
begin 
    select distinct owner bulk collect into i_itemname from all_objects;
    dbms_output.put_line(i_itemname.count);
    select count(*) into c from all_tables
    where owner in (select * from table(i_itemname));
    dbms_output.put_line(c);
end;
/

No errors.
18
128

PL/SQL procedure successfully completed. 
```

您还可以加入`table`构造而不是使用子查询：

```
...
    select count(*) into c
    from table(i_itemname) t
    join all_tables at on at.owner = t.column_value;
... 
```

我不太清楚你是什么东东。（如果您没有将集合用于其他任何用途，最好只加入原始数据，但我认为集合存在是有原因的）。

* * *

正如@haki 在评论中提到的，你也可以这样做：

```
...
    select count(*) into c
    from all_tables
    where owner member of (i_itemname);
... 
```

...只要`i_name`和您比较的列是[相同的类型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions006.htm#sthref1966)。在我的示例中，它找到零行，因为我试图与 进行比较`nvarchar2`，`varchar2`但如果重新定义`i_name`为，则会找到匹配项`varchar2(512)`。在你的情况下大概`tab.col`是`nvarchar2`无论如何。

# c - 如何在 X11 中检测所有应用程序中的鼠标点击事件？

> ID：16185286
> 
> 赞同：2
> 
> 时间：2013-04-24T06:54:23.677
> 
> 标签：c, x11

我正在使用“XGrabPointer”来获取活动窗口中发生的鼠标点击事件。但我的要求是全局检测点击，即在 X11 桌面上的任何应用程序中。XGrabPointer 会阻止活动窗口，因此我无法移动到其他应用程序并检测鼠标单击事件。

以下是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <X11/keysym.h>

int main(int argc, char **argv)
{
  Display *display;
  XEvent xevent;
  Window window;
  int grb;
  int scr;

  if( (display = XOpenDisplay(NULL)) == NULL )
    return -1;

  unsigned int t_new=0,t_prev=0,t_diff=0;
  scr = DefaultScreen(display);
  window = RootWindow(display, scr);

  while(1) {
    XGrabPointer(display,
                 window,
                 True,
                 PointerMotionMask | ButtonPressMask | ButtonReleaseMask,
                 GrabModeAsync,
                 GrabModeAsync,
                 None,
                 None,
                 CurrentTime);

    XAllowEvents(display,AsyncPointer, CurrentTime);
    XNextEvent(display, &xevent);

    switch (xevent.type) {
      case MotionNotify:{
        printf("motion event\n");
        break;
      }
      case ButtonPress:{
        switch (xevent.xbutton.button) {
          case 1:
            printf("Left Click\n");
            t_prev=t_new;
            printf("Click Occured      : [%d, %d]\n",
                   xevent.xbutton.x_root,
                   xevent.xbutton.y_root);
            break;
          case 2:
            printf("Grabed\n");
            printf("Middle Click\n");
            break;
          case 3:
            printf("Right Click\n");
            break;
          case 4:
            printf("Grabed\n");
            printf("Scroll UP\n");
            break;
          case 5:
            printf("Scroll Down\n");
            break;
        }
        break;
      }
    }
  }
  XUngrabPointer(display,CurrentTime);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-21T05:48:04.397

也找不到有关如何在后台收听鼠标事件的答案。用鼠标抓取是不可能的，而且您将无法点击程序之外的任何地方。

所以解决方案是读取 linux 的`/dev/input/mice`设备以获取原始鼠标输入（我们想要按钮单击），当发生低级事件时，我们查询 X 服务器以获取鼠标位置（不能以这种方式从 X 查询鼠标按键）。

```
Display *display;
Window root_window;
XEvent event;

display = XOpenDisplay(0);
root_window = DefaultRootWindow(display);

int fd, bytes;
unsigned char data[3];

const char *pDevice = "/dev/input/mice";

// Open Mouse
fd = open(pDevice, O_RDWR);
if (fd == -1) {
    printf("ERROR Opening %s\n", pDevice);
    return -1;
}

int left, middle, right;
while (1) {
    // Read Mouse
    bytes = read(fd, data, sizeof(data));

    if (bytes > 0) {
        left = data[0] & 0x1;
        right = data[0] & 0x2;
        middle = data[0] & 0x4;

        XQueryPointer(
                display,
                root_window,
                &event.xbutton.root,
                &event.xbutton.subwindow,
                &event.xbutton.x_root,
                &event.xbutton.y_root,
                &event.xbutton.x,
                &event.xbutton.y,
                &event.xbutton.state
            );

        printf("x=%d, y=%d, left=%d, middle=%d, right=%d\n", event.xmotion.x, event.xmotion.y, left, middle, right);
    }
} 
```

样本输出

```
x=470, y=969, left=1, middle=0, right=0
x=470, y=969, left=0, middle=0, right=0
x=467, y=969, left=0, middle=4, right=0
x=463, y=969, left=0, middle=0, right=0
x=444, y=971, left=0, middle=0, right=2
x=441, y=971, left=0, middle=0, right=0 
```

# iphone - 如何获取主包的图像形式资源的路径

> ID：16185287
> 
> 赞同：8
> 
> 时间：2013-04-24T06:54:26.937
> 
> 标签：iphone, swift, xcode, ios6

我有一个 iPhone 应用程序，我在其中将`images`目录（组）添加到`Resources`（组）中。我想访问`images`. 我需要该图像的路径，因此我创建了如下代码。

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"myImage1" ofType:@"png" inDirectory:@"images"];
NSLog(@"%@", imagePath); 
```

结果 ：

```
(null) 
```

我也试过这段代码

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"myImage1" ofType:@"png"]; 
```

但是这段代码给了我`(null)`结果。

`myImage1`的路径是`Resources/images/myImage1.png`

我不知道是什么问题。请提出一些修复建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T10:57:25.507

通过以下方法添加图像解决了我的问题。

*   右键单击 xcode 中的项目并选择`Add Files to "project name"`.
*   从计算机本地磁盘中选择您的图像文件。
*   在弹出窗口中确保选择`Copy items into destination group's folder`和`Create Folder References for any added folders`和`Add to targets`。
*   单击`Add`。

然后使用下面的代码，我可以检索我的图像。

对于**Objective-C**版本

```
[[NSBundle mainBundle] pathForResource:@"imageName" ofType:@"png"]; 
```

适用于**Swift 4.0**版本

```
Bundle.main.path(forResource: "imageName", ofType: "png") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T07:02:19.653

为了灵魂……

转到：目标->“构建阶段”->“复制捆绑资源”然后在此处添加该特定文件。

清理项目并运行。有用。

并且还看到...

[NSBundle pathForResource inDirectory 给出 nil](http://iphonedevsdk.com/forum/iphone-sdk-development/31256-nsbundle-pathforresource-indirectory-gives-nil.html)

## 并检查...

```
NSString *path = [[NSBundle mainBundle] resourcePath];
NSFileManager *fm = [NSFileManager defaultManager];
NSError *error = [[NSError alloc] init];
NSArray *directoryAndFileNames = [fm contentsOfDirectoryAtPath:path error:&error]; 
```

打印此 directoryAndFileNames 的所有值并检查您的文件名是否存在于其中......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T07:03:19.290

首先检查主 Bundle 中是否有名称为 name 的文件。

当**没有具有这样名称的文件**时，它给出**null**。

# android - 检索系统日期和时间？

> ID：16185303
> 
> 赞同：0
> 
> 时间：2013-04-24T06:55:19.503
> 
> 标签：android, textview

作为一个初学者项目（我是编程新手），我想制作一个简单的应用程序，它会显示四个 TextView：当前时间（小时和分钟）、日期、月份日期和年份。它看起来相对简单，我研究了一下，下面的代码就是我想出的。谁能解释为什么我的应用程序强制关闭？我在可用权限列表中没有看到任何关于读取系统时间的内容。提前致谢。（注意：这是我使用的唯一类和布局。）

MainActivity.java：

```
package press.linx.calendar;

import android.os.Bundle;
import android.app.Activity;
import android.text.format.Time;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView day = (TextView)findViewById(R.id.day);
    TextView month = (TextView)findViewById(R.id.month);
    TextView year = (TextView)findViewById(R.id.year);
    TextView time = (TextView)findViewById(R.id.Time);

    Time today = new Time(Time.getCurrentTimezone());
    today.setToNow();

    day.setText(today.monthDay);             // Day of the month (0-31)
    month.setText(today.month);              // Month (0-11)
    year.setText(today.year);                // Year 
    time.setText(today.format("%k:%M:%S"));  // Current time
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

 } 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/day"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="89dp"
    android:layout_marginTop="32dp"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/Time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/day"
    android:layout_marginRight="74dp"
    android:layout_marginTop="96dp"
    android:text="TextView" />

<TextView
    android:id="@+id/month"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/day"
    android:layout_below="@+id/Time"
    android:layout_marginLeft="38dp"
    android:layout_marginTop="71dp"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/year"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/month"
    android:layout_below="@+id/month"
    android:layout_marginTop="64dp"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:15:45.430

我明白你的错误。

`today.monthDay`给出一个整数值，当你在 a 中设置 this 时，`TextView`它会搜索带有 that 的资源`id`。你一定会得到一个`Resources$NotFoundException`.

试试这个：

```
day.setText("" + today.monthDay);             // Day of the month (0-31)
month.setText("" + today.month);              // Month (0-11)
year.setText("" + today.year);                // Year 
time.setText("" + today.format("%k:%M:%S"));  // Current time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:15:43.807

您可以将 Java util 和 SimpleDateFormat 和 Date 用于相同目的：

```
long time = System.currentTimeMillis();

// Day of the month (0-31)
SimpleDateFormat sdf = new SimpleDateFormat("d");
String day = sdf.format(new Date(time));
day.setText(day);

// month
sdf = new SimpleDateFormat("M");
String month = sdf.format(new Date(time));
month.setText(month);

// year
sdf = new SimpleDateFormat("y");
String year = sdf.format(new Date(time));
year.setText(year);

// time
sdf = new SimpleDateFormat("K:mm:ss a");
String time = sdf.format(new Date(time));
time.setText(time); 
```

所有时间字符串格式都可以在[http://developer.android.com/reference/java/text/SimpleDateFormat.html#SimpleDateFormat(java.lang.String)](http://developer.android.com/reference/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T07:04:38.343

使用此 java utils 方法检索系统当前日期和时间。

```
Time dtNow = new Time();
dtNow.setToNow();
String sytem_time_date = dtNow.format("%Y-%m-%d %H:%M:%S"); //use single text view to show 
```

# java - 普通接口和MBean接口的区别

> ID：16185310
> 
> 赞同：1
> 
> 时间：2013-04-24T06:55:42.843
> 
> 标签：java, interface, jmx

我怀疑普通接口和MBean接口之间的区别。

```
public interface TryMBean
{
    // method declaration
}

public class Try implements TryMBeans
{
    // method definition
} 
```

这看起来像一个普通的界面，但为此我们可以使用 jConsole 进行监控。我的疑问是，有什么区别以便我们可以监视它，以及如何了解何时使用普通接口以及何时使用 MBean。我是 JMX 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:01:32.947

`MBean`接口是常规接口*。*但它的定义遵循一些约定，比如它的名字。MBean 接口的名称应该以`MBean`. [此外，它按照标准 MBean 文档](http://docs.oracle.com/javase/tutorial/jmx/mbeans/standard.html)中描述的一些规则定义其操作和属性

基本上，如果您想创建一个可与 JMX 控制台一起使用的 MBean，您必须遵守这些规则。还有其他一些方法可以更动态地创建 MBean，它们遵循一些其他规则，例如，如果您使用 Spring JMX，则可以基于“常规”接口动态生成 MBean。

# python - Create new folders using python

> ID：16185317
> 
> 赞同：3
> 
> 时间：2013-04-24T06:56:00.003
> 
> 标签：python

I am trying to create folders using the following code. Something is not correct and leads to error:

"TypeError: 'str' object is not callable"

```
import os, sys

a= [4,3,2,1]
print len(a)
for idx in range (len(a)):

    newpath = r'E:\test\tool\folder_%s'(idx) 
    if not os.path.exists(newpath): os.makedirs(newpath) 
```

Using os.makedirs I can create folders. However, I am not able to suffix those folders in a loop. Any ideas can be helpful. Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:58:20.593

```
import os, sys

a= [4,3,2,1]
print len(a)
for idx in range (len(a)):

    newpath = ((r'E:\test\tool\folder_%s') % (idx)) 
    if not os.path.exists(newpath): os.makedirs(newpath) 
```

Try that, if it helps, accept the answer, if not leave a comment and I'll delete it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:58:18.393

```
newpath = r'E:\test\tool\folder_%s' % (idx) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:01:48.970

I think the preferred way to make strings is to use the format method.

```
newpath = 'E:\test\tool\folder_{0}'.format(idx) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-12T04:46:48.743

This code will create the folder with name client_1001-test to client_1500-test

```
import os, sys

for i in range(1001, 1500):
    newpath = ((r'/tmp/fileSet/client_%s-test') % (i)) 
    if not os.path.exists(newpath): os.makedirs(newpath) 
```

# batch-file - 从特定行中删除最后一个字符

> ID：16185322
> 
> 赞同：0
> 
> 时间：2013-04-24T06:56:33.230
> 
> 标签：batch-file, character

我想创建一个批处理文件，该文件通过目录中的 txt 文件和其中包含 #EXTINF 的每一行，删除最后 15 个字符..

基本上，如果可能的话，我想从任何长于某个数字的行中修剪最后 15-20 个字符。出于某种原因，我有一个软件，如果线路太长，它会搞砸数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:14:01.703

**对于一个文件：**

```
@Echo OFF

(For /F "Usebackq Tokens=*" %%# in ("MyFile.txt") Do (
    Echo "%%#" | FIND /I "#EXTINF" 1>NUL && (
        Set "Line=%%#"
        Call Set "Line=%%Line:~0,-1%%"
        Call Echo %%Line%%
    ) || (
        Echo %%#
    )
))>"MyNewFile.txt"

Pause&Exit 
```

**对于所有文件：**

```
@Echo OFF

For %%@ in (*.txt) DO (

    (For /F "Usebackq Tokens=*" %%# in ("%%@") Do (

        Echo "%%#" | FIND /I "#EXTINF" 1>NUL && (
            Set "Line=%%#"
            Call Set "Line=%%Line:~0,-1%%"
            Call Echo %%Line%%
        ) || (
            Echo %%#
        )

    ))>"%%@_New.txt"
)

Pause&Exit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:38:18.510

GnuSed 是比批处理更好的文本编辑工具。这是针对单个文件

```
@echo off
sed "s/^\(.*#EXTINF.*\).$/\1/" "filein.txt" >"fileout.txt" 
```

对于多个文件（将从 fileone.txt 生成 fileone.new.txt）

```
@echo off
for /f "delims=" %%a in ('dir *.txt /b') do sed "s/^\(.*#EXTINF.*\).$/\1/" "%%a" >"%%~na.new%%~xa" 
```

# jquery - 删除列表中项目后的元素，jQuery - 第 2 部分

> ID：16185329
> 
> 赞同：1
> 
> 时间：2013-04-24T06:56:47.920
> 
> 标签：jquery, css

我有一个这样的代码块：

```
<span class="main_container">
    <span id=".." class=".." position="1"...> </span>
    <span id=".." class=".." position="2"...> </span>  
    <span id=".." class=".." position="3"...> </span>
    <span id=".." class=".." position="4"...><img class="remove_it" scr="images/remove.png" /> </span>
    <span id=".." class=".." position="5"...> </span>
    <span id=".." class=".." position="6"...> </span>
</span> 
```

基本上我希望一旦`remove_it`单击图像，`span`删除包含它的元素（图像）以及它`span elements`下面的所有其他元素。在这种情况下，4,5 和 6 处的元素。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:58:39.273

我建议：

```
$('.remove_it').click(function(){
    $(this).parent().nextAll('span').add(this.parentNode).remove();
}) 
```

[JS 小提琴演示](http://jsfiddle.net/wsTnY/1/)。

另外，作为附录，如果您使用自定义属性，您还可以在它们前面加上`data-`, ，以便至少它们在 HTML5 文档类型中有效。

将答案编辑为正确的`this`答案`this.parentNode`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:01:58.673

您可以通过使用该[`.nextAll()`](http://api.jquery.com/nextAll/)功能来实现这一点。

**HTML**

```
<p id="1">1</p>
<p id="2">2</p>
<p id="3">3</p>
<p id="4">4</p>
<p id="5">5</p>
<p id="6">
    6
    <span id="click">Click</span>
</p>
<p id="7">7</p>
<p id="8">8</p> 
```

**JavaScript**

```
$("#click").on("click", function() {
    var $parent = $(this).parent();
    $parent.nextAll().remove();
    $parent.remove();
}); 
```

[JSF](http://jsfiddle.net/s56dS/)中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T06:59:07.743

使用 parent()、[nextAll()](http://api.jquery.com/nextall/)、[addBack()](http://api.jquery.com/addBack/) ...

试试这个

```
$('.remove_it').click(function(e){
   $(this).parent().nextAll('span').addBack().remove();
}); 
```

# performance - 通过 TCP 隧道传输 HTTP 的性能改进

> ID：16185340
> 
> 赞同：0
> 
> 时间：2013-04-24T06:57:08.950
> 
> 标签：performance, http, tcp, keep-alive, loopback

我有一个设计要求，需要通过底层 TCP 网络模块进行 HTTP 通信

> **[HTTP_CLIENT<--->LOCAL_TCP_PSEUDOSERVER]---------TCP/IP--------[LOCAL_TCP_PSEUDOSERVER<--->HTTP_SERVER]**

1.  HTTP 客户端与本地运行的 TCP 伪服务器对话
2.  这个伪服务器与 TCP 伪服务器通信，后者又与 HTTP_SERVER 通信

***整体功能按预期工作正常，但性能太低。***

经过一些研究，我会提供一些解决方案，以下是相同的

a) HTTP 是请求响应包有小数据包。该数据必须通过 TCP 传输，默认情况下启用 Nagle 算法因此我们应用**TCP_NODELAY**禁用 Nagle 算法，以便将小数据包无延迟地传递到远程主机。

b)**使用 HTTP keep-alive**。这将使 TCP 套接字打开，以便可以在不建立新连接的情况下发出另一个请求。

**更新查询：简而言之，http 代理服务器如何如此高效地工作？**

仅供参考：这是我提到的信息

[优化 HTTP：保持活动和流水线](http://www.igvita.com/2011/10/04/optimizing-http-keep-alive-and-pipelining/)

[设计问题 - 使用 Winsock 通过 TCP 发送小数据段](http://support.microsoft.com/kb/214397)

[HTTP/1.1、CSS1 和 PNG 的网络性能影响](http://conferences.sigcomm.org/sigcomm/1997/papers/p102.pdf)

[HTTP 流水线 - 移动领域的重要内容](http://www.guypo.com/mobile/http-pipelining-big-in-mobile/)

上述实验在一定程度上提高了性能，但我想还有很大的改进空间。方法是否正确？此外，还有哪些其他参数可能会影响性能？

**更新 2**

考虑 ABEF。AB , EF 是本地环回连接，其中 A 是 http 客户端，B 是伪服务器。E 是伪服务器，F 是 HTTP 服务器。BE 是简单的 TCP 套接字通信。

*AB、EF通信是环回并重用同一个端口*

整数 = 1; setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on)); bind(s, (struct sockaddr *) &sin, sizeof (sin));

AF 之间的性能总体上很慢

请分享您的宝贵意见

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:27:23.000

您可以拥有*N*层代理，而不会承受*N*倍的延迟。显然，您的“伪服务器”的设计和实现严重错误。没有理由自己写，而且根据我在这里和其他类似论坛中看到的内容来看，大多数尝试过它的人似乎都对其进行了完整的哈希处理。

这些“伪服务器”实际上只是 HTTP 代理，没有理由不使用适当的代理，例如 Apache Squid 甚至 Apache HTTPD。

如果您发布一些代码，您可能会得到一些详细的评论。

# java - 在java中将YBR_Full图像转换为RGB

> ID：16185345
> 
> 赞同：0
> 
> 时间：2013-04-24T06:57:29.057
> 
> 标签：java, rgb, bytebuffer

我可以获得包含 YUV 值的字节数组并在其[上执行相同的方法（混淆 YUV NV21 转换为 RGB](https://stackoverflow.com/questions/12469730/confusion-on-yuv-nv21-conversion-to-rgb?lq=1)）以获取表示 RGB 的 int 值数组，然后我尝试将此数组转换为 ByteBuffer 所以我可以在 JLabel 中查看。但我能看到的是红色、绿色和蓝色的独立垂直列？我的架构哪里出了问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:02:15.777

您需要创建 Image 并使用您的 array 设置它的值，然后在 Jlabel 中显示图像

像这样 ：

```
 byte[] imageInByte;////////////this byte array contain your RGB
    InputStream in = new ByteArrayInputStream(imageInByte);
    BufferedImage bImageFromConvert = ImageIO.read(in); 
```

然后你可以`bImageFromConvert`在 JLabel中显示

像这样 ：

```
 JLabel jLabel = new JLabel(new ImageIcon(bImageFromConvert )); 
```

# c# - 无法将匿名方法转换为类型“System.Windows.Threading.DispatcherPriority”，因为它不是委托类型

> ID：16185346
> 
> 赞同：1
> 
> 时间：2013-04-24T06:57:30.810
> 
> 标签：c#, wpf, delegates

我想编译这个 WPF 代码并得到这个错误。

```
public void SetContentObject(Type contentType)
        {
            this.Dispatcher.BeginInvoke(delegate(Type input) //Error here <-
            {
                object obj = Activator.CreateInstance(input);
                this.Content = obj;//this.Content declared as object
            }, new object[]
            {
                contentType
            });
        } 
```

**编辑1：**

使用 .NET 3.5。4.0 不允许

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:59:17.040

Dispatcher.BeginInvoke() 方法应该传递不带参数的委托（参见[http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)）。您可以传递您的参数，在您的 anaimous 方法之外声明它。更新

```
public void SetContentObject(Type contentType)
    {
        Type input;
        Dispatcher.BeginInvoke(new Action(delegate
        {
               object obj = Activator.CreateInstance(input);
               this.Content = obj;               

        }), new object[]
        {
            contentType
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:02:38.867

您可能会对 Invoke 和 BeginInvoke 感到困惑：

```
public void Invoke(Action callback, DispatcherPriority priority)

//no priority is allowed below.
public DispatcherOperation BeginInvoke(Action a) 
```

# javascript - 如何验证文本框以限制用户输入 | 特点

> ID：16185356
> 
> 赞同：0
> 
> 时间：2013-04-24T06:58:04.363
> 
> 标签：javascript, validation, restriction

我已经放置了一个文本区域，我想对其进行限制..

只有特殊字符 | 不应允许在文本区域输入，因为我正在使用 | 拆分函数中的字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:41:46.453

你可以这样做：

`Script`：

```
function alpha(e) {
  var k = (evt.which) ? evt.which : event.keyCode
  return ((k > 64 && k < 91) || (k > 96 && k < 123) || k == 8 || k == 32 || (k >= 48 && k <= 57));
} 
```

`HTML`：

```
<input type="text" id="id" onkeypress="return alpha(event);" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:08:20.853

在您的文本框中调用此 javascript 函数

```
function isSpclChar(){
var iChars = "|";
if(document.qfrm.q.value.indexOf(iChars) != -1) {

 alert ("This special character is not allowed.");
 return false; 
```

}

}

如果您不想在文本框中允许特殊字符

然后使用

```
 var iChars = "!@#$%^&*()+=-[]\\\';,./{}|\":<>?"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:12:25.970

先检查这个链接

[如何使用 jquery 阻止或限制输入字段中的特殊字符？](https://stackoverflow.com/questions/895659/how-do-i-block-or-restrict-special-characters-from-input-fields-with-jquery)

你需要在这里做相反的事情，只需寻找匹配'|'

```
$('input').bind('keypress', function (event) {
    var regex = new RegExp("^[a-zA-Z0-9]+$");
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    var patt=/|/g;
    var result=patt.test( key ) ;
    if (!result) {
       event.preventDefault();
       return false;
    }
}); 
```

# java - 随机数存储在数组列表中并从中选择

> ID：16185358
> 
> 赞同：0
> 
> 时间：2013-04-24T06:58:06.107
> 
> 标签：java, arrays, random, arraylist

我正在尝试创建一个程序来生成随机数并存储到`arraylist`. 同时获取存储做的号码`multiply`。

我已经存储了生成的号码，但我如何实际获得我想要的号码。对于这个例子，我试图得到`3rd number`，我错过了哪一步？

```
public class arraylist {

    public static void main(String[] args) {

        List<Integer> list = new ArrayList<Integer>();
        Random rand = new Random();

        int numtogen;
        int third;
        Scanner scan = new Scanner(System.in);
        System.out.println("How many number do you want to generate: ");
        numtogen = scan.nextInt();
        System.out.println("What number do you want to multiply with the third number: ");
        third = scan.nextInt();

        HashSet<Integer> generated = new HashSet<Integer>();

        // Prevent repeat
        for (int x = 1; x <= numtogen; ++x) {
            while (true) {
                // generate a range from 0-100
                int ranNum = rand.nextInt(100);

                if (generated.contains(ranNum)) {

                    continue;
                } else {
                    list.add(ranNum);
                    System.out.println("Number " + x + "=" + " = " + ranNum);
                    break;
                }

            }

        }
        int numinlist;
        while (!list.isEmpty()) {

            // Integer[] numlist= numbinlist.hasNextInt;

            // int answer = numlist[2]*third;
            // System.out.println("Answer to first number  = "+answer);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:01:15.580

您可以将非重复数字的生成更改为：

```
Set<Integer> generated = new LinkedHashSet<Integer>();
// Prevent repeat
while (generated.size() < numtogen) {
    generated.add(rand.nextInt(100));
}
List<Integer> list = new ArrayList<Integer>(generated); 
```

我会在了解您的实际问题并知道答案后立即编辑此答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T07:02:33.700

如果您想获得第三个生成的号码，请尝试以下操作：

```
int number = list.get(2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:16:32.740

改变这个：

```
for (int x = 1; x <= numtogen; ++x) {
    while (true) {
        // generate a range from 0-100
        int ranNum = rand.nextInt(100);

        if (generated.contains(ranNum)) {

            continue;
        } else {
            list.add(ranNum);
            System.out.println("Number " + x + "=" + " = " + ranNum);
            break;
        }
     }
 } 
```

至：

```
for (int x = 1; x <= numtogen; ++x) {
    // generate a range from 0-100
    int ranNum = rand.nextInt(100);
    if (generated.contains(ranNum)) {
        continue;
    } else {
        list.add(ranNum);
        System.out.println("Number " + x + "=" + " = " + ranNum);
    }
} 
```

然后，访问第三个数字所需要做的就是：

```
int answer = (list.get(2) * third); 
```

# c++ - 如何在 Eclipse 上调试 mavenized C++ 项目？

> ID：16185359
> 
> 赞同：0
> 
> 时间：2013-04-24T06:58:08.850
> 
> 标签：c++, eclipse, maven

我已经在 Eclipse 上调试了 C++ 项目，但是当我尝试在 Eclipse 上调试添加断点并启动调试模式的 mavenized C++ 项目时，流程不会在断点处停止并立即退出。此外，我确保我的项目的调试配置在 Eclipse 上运行良好。在构建时是否有一种方法或选项可以在 Maven 上指定，以便我的可执行文件启用调试？

我看了类似的问题，没有找到合适的解决方案。

# android - 在android中播放嵌入html问题的mp3文件

> ID：16185360
> 
> 赞同：2
> 
> 时间：2013-04-24T06:58:11.240
> 
> 标签：android

使用以下代码录制 mp3 音频并将其嵌入 html 时，音频不会在浏览器中播放：

```
 mRecorder = new MediaRecorder();
                    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                    mRecorder.setOutputFile("filepath");
                    mRecorder.prepare();
                    mRecorder.start();
                    addRecordingToMediaLibrary();

protected void addRecordingToMediaLibrary() {
    ContentValues values = new ContentValues(4);
    long current = System.currentTimeMillis();
    //values.put(MediaStore.Audio.Media.TITLE,audiofile.getName());
    values.put(MediaColumns.DATE_ADDED, (int) (current / 1000));
    values.put(MediaColumns.MIME_TYPE, "audio/3gpp");
    values.put(MediaColumns.DATA, audiofile.getAbsolutePath());
    ContentResolver contentResolver = getContentResolver();

    Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    Uri newUri = contentResolver.insert(base, values);

    sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, newUri));

 } 
```

但是，如果我将其更改为

```
 mRecorder = new MediaRecorder();
                    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
                    mRecorder.setOutputFile("filepath");
                    mRecorder.prepare();
                    mRecorder.start();
                    addRecordingToMediaLibrary(); 
```

声音在浏览器中播放，但干扰很大。

即用 MPEG_4 替换 outputformat，用 AudioEncoder.AAC 替换 AudioEncoder

任何人都可以建议哪种格式最适合嵌入到 android 中的 html 吗？

# html - 使用指南针加载图像失败

> ID：16185361
> 
> 赞同：0
> 
> 时间：2013-04-24T06:58:15.427
> 
> 标签：html, css, sass, compass-sass

我目前正在使用 Django 框架做网站。但是，我在使用 SASS 加载图像时遇到了问题。我的代码在这里。（这是部分 scss 代码）

```
@import "compass/css3/images";
body {
       #site-footer{

      @include background-image(url('/static/main/images/continue.png'),
                                    linear-gradient(left, $left-color, $left-
                                    color 49%, $right-color 51%, $right-color));

   }
} 
```

我在指南针中使用“**背景图像**”。
问题是图像无法加载到网页。我认为可能需要将图像路径设置到某处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:40:20.723

您的代码确实编译正确：

```
body #site-footer {
  background-image: url("/static/main/images/continue.png"), -webkit-linear-gradient(left, #ff0000, #ff0000 49%, #0000ff 51%, #0000ff);
  background-image: url("/static/main/images/continue.png"), -moz-linear-gradient(left, #ff0000, #ff0000 49%, #0000ff 51%, #0000ff);
  background-image: url("/static/main/images/continue.png"), -o-linear-gradient(left, #ff0000, #ff0000 49%, #0000ff 51%, #0000ff);
  background-image: url("/static/main/images/continue.png"), linear-gradient(to right, #ff0000, #ff0000 49%, #0000ff 51%, #0000ff);
} 
```

问题可能是您提供了不正确的路径。

请手动检查图像是否可用：

[http://example.com/static/main/images/continue.png](http://example.com/static/main/images/continue.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:28:00.870

这可能是由于在 config.rb 中将 relative_assets 设置为 false。尝试将其更改为 true。

# node.js - 如何使用 socket.io 获取用户的 IP 地址？

> ID：16185362
> 
> 赞同：0
> 
> 时间：2013-04-24T06:58:15.920
> 
> 标签：node.js, socket.io

在我的节点应用程序中，我需要使用 socket.io 获取用户的 IP 地址。我尝试了下面的代码，但直到我得到 127.0.0.1。我怎样才能获得我的 IP 地址。

1.

```
 var io = require("socket.io").listen(server);

    io.sockets.on("connection", function (socket) {
    var address = socket.handshake.address;
    console.log("New connection from " + address.address + ":" + address.port);
 } 
```

2.

```
 var io = require('socket.io').listen(80);
     io.sockets.on('connection', function (socket) {
     var endpoint = socket.manager.handshaken[socket.id].address;
     console.log('Client connected from: ' + endpoint.address + ":" + endpoint.port);
  }); 
```

3.

```
 var socket = io.listen(server);
       socket.on('connection', function(client){
          var ip_address = client.connection.remoteAddress;
       }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-03T02:25:18.890

试试这个，这对我有用。

```
Var client = require('socket.io').listen(8080).sockets;

client.on('connection',function(socket){ 
var clientIpAddress= socket.request.socket.remoteAddress;
}); 
```

# liquibase - 如何通过比较两个现有的变更日志文件生成 ChangelogFile

> ID：16185367
> 
> 赞同：1
> 
> 时间：2013-04-24T06:58:22.623
> 
> 标签：liquibase

我正在使用 Liquibase 工具来维护 MySQL 服务器中的数据库版本

在这里，我为数据库生成 changeLogFile

一周后，我想将现有的 changeLogFile 与同一个数据库进行比较。

在这里，我需要了解上周在数据库中所做的更改。

或者

是否可以比较两个 changeLogFiles？

# powershell - 如何防止我的脚本等待用户输入

> ID：16185377
> 
> 赞同：0
> 
> 时间：2013-04-24T06:58:56.870
> 
> 标签：powershell, powershell-remoting

我正在编写一个使用 psexec 在远程计算机上运行的代码，在某些代码点它停止并等待用户按 Enter 以继续，这只发生在远程！当我使用本地它很好时，我如何防止这种情况并保持我的代码“滚动”？

代码：

```
param(
[Parameter(ParameterSetName='database')] [string]$database,
[Parameter(ParameterSetName='file')] [string]$file,
[Parameter(ParameterSetName='server')] [string]$server,
[Parameter(ParameterSetName='mailbox')] [string]$mailbox,
[Parameter(ParameterSetName='all')] [switch]$all,
[string]$filename 
```

)

```
if($mailbox) { $mailboxes = @(Get-Mailbox $mailbox) } ----->#it stop after this function# 
```

# c# - 使用扩展方法代替 C# 中的内置方法

> ID：16185386
> 
> 赞同：0
> 
> 时间：2013-04-24T06:59:12.790
> 
> 标签：c#

一些内置方法对我不起作用，我正在为我的应用程序使用旧版本的 .NetFramework，它没有一些新方法。因此，我正在尝试创建覆盖内置方法的扩展方法。但我面临一些问题。这是代码：

```
using System; 
using System.IO; 
using System.Net;
using System.Xml;
using System.Text;  
using System.Collections.Generic;
namespace API{
public static class Retrive 
{               
    // some variables

    public static void CopyTo(this Stream input, Stream output)///Extension method
    {

        byte[] buffer = new byte[32768];  
        int read;

        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write (buffer, 0, read);
        }
    }   

    public static void Main ()
    {
          string url = "https://";          
          string baseURL = "";   
          string authenticateStr = "";

        try 
        {
            ///
            }

        catch (WebException e) 
        {
            using (WebResponse response = e.Response) 
            {
                ////
            }
        }
    }  // end main()
}  // end class 
```

}//结束命名空间

我遇到的错误是

> 1) 扩展方法必须定义在顶级静态类中；'Retrive' 是一个嵌套类。

我不明白为什么“检索”类变得嵌套。

> 2) 扩展方法必须定义在非泛型静态类中

如何解决这些问题？请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:11:59.573

非通用静态类意味着您正在创建一个不使用模板的类。

例如 List 是一个通用类，但 MemoryStream 或很多类不是通用的。

嵌套类答案已在此线程中给出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T07:04:27.860

尝试在任何其他类中保留“static void Main()”。我的意思是除了你试图用来创建扩展的那个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T07:05:16.397

看起来您的主要方法也在 Retriev 类中。我建议为扩展方法创建一个单独的类，如下所示：

```
public static class ExtMethods 
{
  public static void CopyTo(this Stream input, Stream output)///Extension method
  {
    byte[] buffer = new byte[32768];  
    int read;
    while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
    {
       output.Write (buffer, 0, read);
    }
  }  
} 
```

# magento - 服务器移动后 Magento 错误 404

> ID：16185387
> 
> 赞同：1
> 
> 时间：2013-04-24T06:59:14.570
> 
> 标签：magento

我希望这里有人可以提供帮助。我花了几天时间浏览论坛和谷歌结果无济于事:(基本上我有一个朋友正在为他们开发一个magento网站，但从事开发的公司已经让他们跑了一年多。因为其中，我的朋友问我是否可以把它移到我的共享主机上继续开发，然后一旦完成，就移到他们自己的 VPS 上。下面是我做过的事情的列表：

1.  将所有文件移至共享主机

2.  将 .sql 文件导入新数据库

3.  将 .xml 更改为新的数据库名称和密码等

4.  将数据库更改为指向相关 IP 地址进行开发，而不是之前的开发 url（朋友不拥有之前使用的 url）

5.  根据移动magento的在线说明删除了所有缓存和其他临时文件。

6.  重新索引缓存和索引管理。

完成此操作后，网站加载正常，直到我想导航到类别或产品页面等，然后我得到一个全屏 404，而不是 magento 的 404。如果我手动将 index.php 添加到 url 的中间，页面将加载。如果我禁用 SEO 重写，那么显然一切正常（当然，除了手动创建到图像中的任何链接等）。这让我相信这是重写的问题，所以我将 .htaccess 中的重写 url 更改为指向谷歌，当我点击一个类别等时，这确实将我引导到谷歌。所以我知道问题不是重写不起作用。然后，我发现一个站点表明在某些数据库位置导入将 0 替换为 1 的数据库可能会出现问题，但是我检查了这一点，一切正常。

我知道在搬家之前一切都很好，因为我正在为我的朋友开发网站，同时它还在原始服务器上（长话短说，那些被付钱做事的人不是，所以我在做，但是他们拒绝让 ftp 访问能够更改皮肤中的故障）

相关的magento版本是1.501

此外，我已经在我的共享主机上成功安装了一个 magento，所以我知道该主机与 magento 兼容。

我认为另外一件事证明 apache 重写是有效的（我被告知很多他们不可能！，我什至与托管公司核实以确保超级确定）：如果我修改 .htaccess 从index.php 到[http://ip.ip.ip.ip/~example/index.php](http://ip.ip.ip.ip/~example/index.php)然后类别开始工作！！然而，这不是一个解决办法，因为无论我怎样都无法让其他链接正常工作，例如：在几个页面上，我将类别重定向到“登陆页面”，然后有一个描述和一个图片，然后点击带您进入产品页面。这些链接现在不起作用！！！

如果有人能给我任何我需要寻找的想法，我将不胜感激。

非常感谢您的阅读。

哦，错误日志中也没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:17:16.320

感谢您的建议，但是我找到了解决方案。Magento 显然不喜欢从 ip 地址后跟一个文件夹运行。我已经为它分配了一个临时域名，一切都在 100% 运行

# javascript - 最佳实践 - 使用 display:none 在文档中预先编写 HTML，还是使用 JS 创建？

> ID：16185391
> 
> 赞同：6
> 
> 时间：2013-04-24T06:59:21.637
> 
> 标签：javascript, jquery, html

我正在开发一个大型 HTML5 应用程序，我真的很想知道这个问题。我将有很多对话框和选项卡将通过用户交互打开。

我想知道最佳实践是什么——在 HTML 文档中使用 display:none 编写所有对话框和选项卡，或者在用户每次进行相关交互时使用 JS 或 jQuery 动态创建这些 HTML 部分。

在性能、易于开发、可读性等方面有什么更好的？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:21:38.077

我会尽量解决这个问题。

1 - 正如我在评论中所说，避免内联样式。首先，这是因为内联样式会破坏 DRY。不得不一遍又一遍地重复同样的事情对于维护和开发来说是非常不利的，因为一旦你不得不在大约 100 个地方更改代码，而不是更改代码。

2 - 避免内联样式也有利于可访问性，一些屏幕阅读器和搜索引擎爬虫基于 css 选择器进行索引工作和阅读工作，因此使用内联样式将迫使他们忽略或误解事物。

3 - 作为开发人员工作时，很容易“只是为了好玩”来做内联样式，但你实际上在做的是混合关注点。HTML 是内容，CSS 是设计。将这两者混合通常会导致头痛，并使我作为开发人员的工作在你感到痛苦之后，因为我不知道样式是什么以及如何。

现在，进入性能。

当您使用内联样式时，您告诉浏览器的内容基本上是“嘿，对于每个页面页面视图都将这些样式应用于所有这些元素。” 现在，这变得非常明显，为什么这是不好的。您无法缓存和存储您的 css，并且基本上每次都强制浏览器重新呈现您的样式。使用外部 CSS 文件实际上会帮助您加快网站速度，因为浏览器会缓存它。

这就是css部分。

你问过的javascript。

正如我所说，用 css 隐藏东西并用 javascript 显示。现在你为什么要这样做而不是把所有东西都拉进去？好吧，你可以两者都做。如果您只是一个网络浏览器体验，那么您可以做任何一个，没关系。我自己更喜欢在 DOM 中包含内容，因为它与内容有关，如果你是一个大型应用程序，有几十个 ajax 调用只会使维护变得更加困难。我相信如果你必须 ajax 确保它是重要的并且是合乎逻辑的，而不仅仅是为了踢球（我认为这适用于只有你有 jQuery 和纯 javascript 供你使用）。

例如，如果您正在使用backbone.js，它基于视图并将某种形式的“MVC”引入您的前端，使您能够拥有可以从服务器拉入内容的带有子视图的视图。

希望对做出决定有所帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:03:46.963

我想说这取决于您的应用程序有多少选项卡以及这些选项卡有多大。

*   选项卡内的大内容意味着应用程序在启动时需要很长时间才能加载并消耗大量内存。如果是这种情况，我想根据需要加载它们。
*   选项卡内的小内容将快速加载，因此在单击选项卡时一次加载所有内容以提高性能。

不要忘记在互联网连接速度较慢的旧计算机上运行一些测试，以查看您的应用程序的行为方式。不是每个人都拥有最新最快的硬件。

# ios - 如何从 iOS 的 epub 格式中提取 txt

> ID：16185396
> 
> 赞同：0
> 
> 时间：2013-04-24T06:59:34.657
> 
> 标签：ios, text, epub, extraction

我想从 epub 文件中为我的文本到语音 iOS 应用程序提取文本。

如果我可以在 iOS 设备中使用一些库来做到这一点，那就太好了，但我也想知道它是否应该在服务器端处理。

有谁知道如何做到这一点？

例如，Voice Dream 从 epub 格式中提取文本。 [http://www.voicedream.com/?page_id=134](http://www.voicedream.com/?page_id=134)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T10:15:10.273

ePub 是一个带有 XML 清单的 ZIP 文件，其中包含摘要（和一些元数据）并引用一组 HTML（查看规范以了解所有详细信息：http: [//idpf.org/epub](http://idpf.org/epub)）如果您想要在设备上执行此操作，您很可能必须编写自己的代码：打开 zip，在清单中找到您的方式来定位您的文本，然后删除所有 HTML 标记以获得纯文本。如果你可以在服务器端做，那就更容易了：你可以使用处理 ePub（和许多其他格式）的 Apache Tika ( [http://tika.apache.org/](http://tika.apache.org/) )。

很难更精确，因为您没有解释如何获得 epub 以及如何选择 epub 的哪个部分将被定位...

# jquery - Gmap3 jquery 插件的某种预加载器

> ID：16185397
> 
> 赞同：0
> 
> 时间：2013-04-24T06:59:34.700
> 
> 标签：jquery, google-maps, jquery-gmap3

我正在使用 gmap3 jquery 插件在谷歌地图上显示对象。在加载时，地图上显示了欧洲，然后（我想当所有标记都加载后）地图切换到我的位置（俄罗斯萨马拉）。我可以在地图加载时显示某种预加载器吗？您可以在此处查看真实示例：[http](http://www.roomas.ru) : //www.roomas.ru 按“Показать на карте”选项卡查看地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:13:25.670

您可以显示“正在加载...”之类的标签，并在地图准备好时将其隐藏。我使用了地图标签。

来源： [https ://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/maplabel/src/maplabel.js?r=300](https://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/maplabel/src/maplabel.js?r=300)

参考：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/maplabel/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/maplabel/docs/reference.html)

用法：

```
var myLatlng = new google.maps.LatLng(0,0);
var myOptions = {
  zoom: 2,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  navigationControl: true,
  mapTypeControl: true,
  scaleControl: true,
  draggable: true,
      streetViewControl:true,
      scrollwheel: false
}

map = new google.maps.Map($("#YOUR_MAP_CONTAINER_ID")[0], myOptions);

mapLabel = new MapLabel({
      text: 'Loading...',
      position: new google.maps.LatLng(map.getCenter().lat(),map.getCenter().lng()),
      map: map,
      fontSize: 35,
      strokeWeight:3,
      fontColor:'#003762',
      align: 'center'
});

mapLabel.set('position', new google.maps.LatLng(map.getCenter().lat(),map.getCenter().lng())); 
```

要在需要时隐藏标签：

```
mapLabel.set('text',''); 
```

# python - MongoDB -> 大型数据集的设计决策

> ID：16185400
> 
> 赞同：0
> 
> 时间：2013-04-24T06:59:48.377
> 
> 标签：python, mongodb, database, nosql

这是我的问题。我有 50 个城市（a,b,....），每个城市最多包含 4000 个地址（a1,a2,... 或 b1,b2,...），每个地址都包含一个包含 10.000 个的列表-40.000 个时间序列数据。

什么是存储/查询这些数据的最有效方法是我的想法：

```
{'a': city1,
    'a1': {
        'name': 'name1',
        '...':  ....,
         ....
        'list': [{ here are 10.000-40.000 timeseries datasets}]
    }
    'a2': {
        'name': 'name2',
        '...':  ....,
        ....
        'list': [{ here are 10.000-40.000 timeseries datasets}]
    }
    ....
    ....
}
{'b': city2,
    'b1': {
        'name': 'name2',
        '...':  ....,
         ....
        'list': [{ here are 10.000-40.000 timeseries datasets}]
     }
     ...
     ...
} 
....
.... 
```

或者将城市和地址一起存储在一个地方并将所有时间序列数据集存储在另一个地方更好（使用一些密钥来识别地址和城市）。或者你还有什么好主意吗？大多数查询将关注（sry -> 英语不好？）所有地址和所有城市的 TimeSeries - 数据集（其中 500 到 1500 个）。

一点点数学：50 个城市 * 4000 个地址 *（10.000 到 40.000 个数据集）= 2.000.000.000 到 8.000.000.000 个条目 -> 所以我们可能会对数据库进行分片（在我的示例中，分片键是城市）。

我们使用 python 和 pymongo 来访问数据库。

# wordpress - 如何从 wordpress 管理面板中的添加用户页面中删除网站字段？

> ID：16185407
> 
> 赞同：2
> 
> 时间：2013-04-24T07:00:12.047
> 
> 标签：wordpress, wordpress-theming

我现在无法从 wordpress 仪表板添加用户页面中删除网站字段。有人请建议什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-06T16:13:30.633

也许这可以帮助你：

```
function hide_website_krotedev(){
  echo "\n" . '<script type="text/javascript">jQuery(document).ready(function($) {
    $(\'label[for=url], input#url\').hide();
  }); 
  </script>' . "\n";
}
add_action('admin_head','hide_website_krotedev'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:50:11.647

如果要删除用户配置文件中的 Twitter 字段，则应将以下代码添加到`functions.php`文件中。

```
function modify_contact_methods($profile_fields) {

    // Remove profile fields
    unset($profile_fields['twitter']);

    return $profile_fields;
}
add_filter('user_contactmethods', 'modify_contact_methods',10,1); 
```

不幸的是，目前没有简单的方法来删除网站字段，您可以随时将其隐藏，`jQuery`但这当然有点混乱。

我希望对您有所帮助，还可以在此处查看 stackexchange 网站以了解 WordPress 问题：[http ://wordpress.stackexchange.com](http://wordpress.stackexchange.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T13:43:54.663

The User profile Website field [seems to be hard-coded in user-edit.php](https://wordpress.stackexchange.com/questions/94963/removing-website-field-from-the-contact-info), so you shouldn't remove it. But you **can** hide it with CSS. Add this code to your functions.php file:

```
function remove_website_row_wpse_94963_css()
{
    echo '<style>tr.user-url-wrap{ display: none; }</style>';
}
add_action( 'admin_head-user-edit.php', 'remove_website_row_wpse_94963_css' );
add_action( 'admin_head-profile.php',   'remove_website_row_wpse_94963_css' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-20T00:13:15.033

我更改了 kroteDev 的答案，改为隐藏行而不是单个字段。

```
function hide_website_field(){
    // Hide the website field on the admin Add New User form
    echo "\n" . '<script type="text/javascript">jQuery(document).ready(function($) {
        $(\'label[for=url]\').parent().parent().hide();
    }); 
    </script>' . "\n";
}
add_action('admin_head','hide_website_field'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-24T07:09:11.730

以下代码可用于删除您添加到 $restricted 数组的菜单。

```
function remove_menus () {
global $menu;
$restricted = array(__('Dashboard'), __('Posts'), __('Media'), __('Links'), __('Pages'), __('Appearance'), __('Tools'), __('Users'), __('Settings'), __('Comments'), __('Plugins'));
end ($menu);
while (prev($menu)){
    $value = explode(' ',$menu[key($menu)][0]);
    if(in_array($value[0] != NULL?$value[0]:"" , $restricted)){unset($menu[key($menu)]);}
}
}
  add_action('admin_menu', 'remove_menus'); 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2013-04-29T06:31:45.097

**去 wp-admin/user-edit.php**

> 评论这段代码

```
<tr>
    <th><label for="url"><?php _e('Website') ?></label></th>
    <td><input type="text" name="url" id="url" value="<?php echo esc_attr($profileuser->user_url) ?>" class="regular-text code" /></td>
</tr> 
```

# linux - 推荐的电子邮件客户端来阅读/应用 git 补丁？

> ID：16185408
> 
> 赞同：7
> 
> 时间：2013-04-24T07:00:15.780
> 
> 标签：linux, git, email

我花了很多时间阅读和应用通过 git-format-patch/git-send-email 发送的补丁，我想知道如何改进我的工作流程。可以肯定的是，有比 GMail 或 Thunderbird 更方便的工具可以做到这一点。

我的邮件来自 IMAP 服务器，所以我在解决方案方面相当灵活。基于文本或 GUI 的客户端都很好，即使是网络邮件，如果他们做得对的话。基本上，我正在寻找一个好的通用电子邮件客户端，它能够轻松导出 git 补丁而不会破坏它们。它必须在 Linux 下可用。

加分项：

*   类似 GMail 的对话线程
*   补丁突出显示（例如，绿色表示新行，红色表示删除行，...）
*   能够查看应用于给定代码库的补丁（外部工具可以，只要它们可以从客户端本身调用）。

我很惊讶没有找到类似的问题，因为这似乎是 git 和电子邮件的常见用法。感谢您的建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T08:35:23.567

这个故事分为三部分：

*   高亮补丁格式：例如 Thunderbird 有一个[Colored Diffs](https://addons.mozilla.org/en-us/thunderbird/addon/colored-diffs/)插件。其他流行的电子邮件客户端可能有类似的附加组件。
*   导出使用以下格式的补丁`git format-patch`：在您的 Thunderbird 或您拥有的文件夹中创建一个本地文件夹。使用拖放或右键单击上下文菜单或任何适合您的方式将任何电子邮件复制到该文件夹​​。这会将电子邮件从 IMAP 服务器下载到您的本地计算机。
*   应用本地电子邮件文件夹中的所有补丁：使用您的 homedir 找到本地文件夹（我的 Thunderbird 将其存储在 中`~/.thunderbird/*.default/Mail/Local Folders/<Folder name>`）。使用 .一次性应用所有本地导出电子邮件中的所有补丁`git am`。然后是你正常的 Git 工作流程：你检查结果、合并东西、挑选东西、扔掉东西，然后做你已经知道的一切。

# python - 拥有超过 100 万粉丝的 Twitter 用户

> ID：16185410
> 
> 赞同：-2
> 
> 时间：2013-04-24T07:00:20.533
> 
> 标签：python, api, twitter

100万粉丝以上的推特用户如何查找推特ID？我正在使用python。我尝试使用 twitter 的流媒体 API，并对用户拥有超过 100 万粉丝的推文进行过滤。但我的努力是如火如荼，因为我永远无法找到那些我无法访问其实时推文的用户。

请帮助我记住超出速率限制的各种瓶颈。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:35:57.707

如果您只想要一些拥有超过 100 万粉丝的 Twitter 用户，请在此处查看 Twitter 上的已验证 ID 列表：[https](https://twitter.com/verified/following) ://twitter.com/verified/following 。

您可以轻松检索此列表并检查每个用户的关注者数量。

# javascript - 只需要一个 div 在每个会话中显示一次

> ID：16185411
> 
> 赞同：0
> 
> 时间：2013-04-24T07:00:22.407
> 
> 标签：javascript, html, web, splash-screen

我试图弄清楚如何让某个 div 每次有人访问我的网站时显示一次。我已经看到了两种使用 javascript 和 php 的方法，但没有成功。

这是我的代码，我希望（如果可能的话）#spinner div（以及其中的所有内容）在每个会话中显示一次。

```
<body>
****This part would only be displayed once****
<div id="spinner" style="display: none;">
<div class="sketch">
<canvas id="canvas" width="1280" height="224"></canvas>
<script>var canvas = document.getElementById('canvas')
  , context = canvas.getContext('2d')
  , img = new Image()
  , w
  , h
  , offset
  , glitchInterval;

img.src = 'http://www.bccustommade.com/images/loading.png';
img.onload = function() {
  init();
window.onresize = init;
};

var init = function() {
clearInterval(glitchInterval);
canvas.width = w = window.innerWidth;
offset = w * .1;
canvas.height = h = ~~(175 * ((w - (offset * 2)) / img.width));
glitchInterval = setInterval(function() {
    clear();
    context.drawImage(img, 0, 110, img.width, 175, offset, 0, w - (offset * 2), h);
    setTimeout(glitchImg, randInt(250, 1000));
}, 500);
};

var clear = function() {
context.rect(0, 0, w, h);
context.fill();
};

var glitchImg = function() {
for (var i = 0; i < randInt(1, 13); i++) {
    var x = Math.random() * w;
    var y = Math.random() * h;
    var spliceWidth = w - x;
    var spliceHeight = randInt(5, h / 3);
    context.drawImage(canvas, 0, y, spliceWidth, spliceHeight, x, y, spliceWidth, spliceHeight);
    context.drawImage(canvas, spliceWidth, y, x, spliceHeight, 0, y, x, spliceHeight);
}
};

var randInt = function(a, b) {
return ~~(Math.random() * (b - a) + a);
};</script>
</div>
<div class="loading">
    <div class="loading-dot"></div>
    <div class="loading-dot"></div>
    <div class="loading-dot"></div>
<div class="loading-dot"></div>
</div>
</div>
****This part would only be displayed once**** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:17:28.003

写入这些内容，直到某个会话的值为 true。并在显示后将会话值设置为 true。

我不熟悉 PHP 语法，但页面逻辑会这样。

```
if(session contains key "first_time" && session["first_time"] == false){

 print "your code here";
 // set session value to true
 session["first_time"] = true;

} 
```

如果您希望在所有页面上显示此页面，请将此页面包含在每个 PHP 页面中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:34:56.380

您需要通过 javascript 调用此 php 脚本或直接在 javascript 中读取 PHP vars，但我建议使用某种后端调用。

```
<?php 
session_start();

if(!isset($_SESSION['spinner']) {
    // Render content
}

// Continue with page or other sutff
?> 
```

# javascript - 如何从条件下拉列表中获取值？

> ID：16185416
> 
> 赞同：0
> 
> 时间：2013-04-24T07:00:45.313
> 
> 标签：javascript, jquery, drop-down-menu

我正在为我的问题再次寻求帮助。这只是我的条件下拉列表的延续。

```
<select name="dropdownmain" id="" title="">
    <option value="dropdownmain1">dropdownmain1</option>
    <option value="dropdownmain2">dropdownmain2</option>
    <option value="dropdownmain3">dropdownmain3</option>
    <option value="dropdownmain4">dropdownmain4</option>
</select>

//if selected dropdownmain1 this dropdown will display
<select name="dropdownmain1" id="" title="">
    <option value="dropdownmain1-submenu1">dropdownmain1-submenu1</option>
    <option value="dropdownmain1-submenu2">dropdownmain1-submenu2</option>
    <option value="dropdownmain1-submenu3">dropdownmain1-submenu3</option>
    <option value="dropdownmain1-submenu4">dropdownmain1-submenu4</option>
</select>

//if selected dropdownmain2 this dropdown will display
<select name="dropdownmain2" id="" title="">
    <option value="dropdownmain2-submenu1">dropdownmain2-submenu1</option>
    <option value="dropdownmain2-submenu2">dropdownmain2-submenu2</option>
    <option value="dropdownmain2-submenu3">dropdownmain2-submenu3</option>
    <option value="dropdownmain2-submenu4">dropdownmain2-submenu4</option>
</select>

//if selected dropdownmain3 this dropdown will display
<select name="dropdownmain3" id="" title="">
    <option value="dropdownmain3-submenu1">dropdownmain3-submenu1</option>
    <option value="dropdownmain3-submenu2">dropdownmain3-submenu2</option>
    <option value="dropdownmain3-submenu3">dropdownmain3-submenu3</option>
    <option value="dropdownmain3-submenu4">dropdownmain3-submenu4</option>
</select>

//if selected dropdownmain4 this dropdown will display
<select name="dropdownmain4" id="" title="">
    <option value="dropdownmain4-submenu1">dropdownmain4-submenu1</option>
    <option value="dropdownmain4-submenu2">dropdownmain4-submenu2</option>
    <option value="dropdownmain4-submenu3">dropdownmain4-submenu3</option>
    <option value="dropdownmain4-submenu4">dropdownmain4-submenu4</option>
</select>

**im using this js code**

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$('select[name!="dropdownmain"]').hide();
$('select[name="' + $('select[name="dropdownmain"]').val() + '"]').show();
$('select[name="dropdownmain"]').change(function(){
    $('select[name!="dropdownmain"]').hide();
    $('select[name="' + $(this).val() + '"]').show();
});
});//]]>  

</script> 
```

单击按钮时如何获取所选下拉列表的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:12:29.437

**给子菜单一个通用的类名！**，并**给主选择一个ID！**

jQuery 代码可以简化为：

```
$('#dropdownmain').change(function() {
    $('.submenu').hide();
    $('.submenu[name="' + $(this).val() + '"]').show();
}); 
```

[http://jsfiddle.net/samliew/jKUBb/](http://jsfiddle.net/samliew/jKUBb/)

然后获取所选子菜单项的值：

```
$('.submenu').change(function() {
    alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:07:30.980

可能是这样的（如果我明白你想要什么）：

```
$("#button").click(function() {
    var selected = $('select[name="dropdownmain"]').val();
    alert($('select[name="' + selected + '"]').val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:07:35.870

`$('select[name="' + $('select[name="dropdownmain"]').val() + '"]').val()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:08:50.867

利用：

```
var e = document.getElementsByName("dropdownmain")[0];
var strUser = e.options[e.selectedIndex].value; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:09:55.853

如果要从当前显示的选择中获取所有值：

```
 $("select:visible").each(function() {
    console.log( $(this).attr('name') + " have value : " +   $(this).val() );               
  }); 
```

这是一个工作示例：http: [//jsfiddle.net/GAe7D/1/](http://jsfiddle.net/GAe7D/1/)

# c - 将图像内容注入 webkit 加载

> ID：16185421
> 
> 赞同：2
> 
> 时间：2013-04-24T07:01:09.157
> 
> 标签：c, webkit, gtk, webkitgtk

在我的 WebKitGTK+ 小部件中，我想用我**在内存中**保存的不同图像数据透明地替换 HTML 页面的一些图像。

根据[http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-resource-request-starting](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-resource-request-starting)的文档，我已经连接到这个信号，它允许更改请求 URI，但我真正想要的是保持不变，但产生我自己的回应。

我尝试填写 WebKitWebResource 参数，并填写来自 WebKitNetworkRequest 的 SoupMessage 响应，但无济于事。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:49:41.503

想出了一种方法：用“data:image/jpeg;base64,[inline data]”替换请求 URL。

会为我做的。

# objective-c - 如何通过 CIFilter 在 Core 图像中更改最小值或最大值？

> ID：16185424
> 
> 赞同：2
> 
> 时间：2013-04-24T07:01:20.250
> 
> 标签：objective-c, image-processing, ios6, grayscale, cifilter

我在 iOS 中绘制了几个灰度图像。灰度图像的值有最小值和最大值，即在 [41,244] 范围内的 8 位值。

我想更改最小值或最大值。我想知道如何在[此列表](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/CoreImaging/ci_concepts/ci_concepts.html#//apple_ref/doc/uid/TP30001185-CH2-TPXREF101)中设置过滤器以更改最小值以及如何在[此列表](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/CoreImaging/ci_concepts/ci_concepts.html#//apple_ref/doc/uid/TP30001185-CH2-TPXREF101)中设置过滤器以更改最大值？

也许下面的绘图会很好看：

[1。读取原始灰度数据] -> [2\. 创建 CGImageRef] -> [3\. 在 GPU 中加载参考]

到现在为止，iOS 6 可以在 GPU 中实时应用过滤器。在 1 或 2 上操作对我来说非常慢，因为我应该在一秒钟内绘制 100 个图像。所以我需要在 GPU 中使用 CIFilter。我知道如何过滤图像。但是什么过滤器可以完成我的工作？

一些示例代码对我有好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T03:57:47.840

CIToneCurve 应该适合这种事情。

```
- (UIImage*) applyToneCurveToImage:(UIImage*)image
{
    CIContext* context = self.context;
    CIImage* ciImage = [[CIImage alloc] initWithImage:image];

    CIFilter*   filter =
        [CIFilter filterWithName:@"CIToneCurve"
                   keysAndValues:
                kCIInputImageKey, ciImage,
                  @"inputPoint0",[CIVector vectorWithX:0.00 Y:0.3]
                 ,@"inputPoint1",[CIVector vectorWithX:0.25 Y:0.4]
                 ,@"inputPoint2",[CIVector vectorWithX:0.50 Y:0.5]
                 ,@"inputPoint3",[CIVector vectorWithX:0.75 Y:0.6]
                 ,@"inputPoint4",[CIVector vectorWithX:1.00 Y:0.7]
                 ,nil];

    CIImage* result = [filter valueForKey:kCIOutputImageKey];

    CGImageRef cgImage = [context createCGImage:result
                                            fromRect:[result extent]];
    UIImage* filteredImage = [UIImage imageWithCGImage:cgImage];
    CGImageRelease(cgImage);
    return filteredImage;
} 
```

`self.context`可以是 CPU 或 GPU (EAGL) 上下文。这些点描述了色调曲线。X 是输入值，Y 是输出值。在此示例中，我们正在减小斜率，从而降低对比度。你也可以保持斜率不变，但切断极端，从而减少你的最大值和最小值。

以下是在 iPad mini 上处理 100 张图像的一些测量结果（每个设置平均有四个读数）。您会看到 GPU 不是灵丹妙药，大约 60-65% 的时间都在专注于移动图像数据。这些示例以 UIImage 开头和结尾。我用 CGImage 得到了非常相似的结果。

```
 57x57px png  640x800px jpeg
 UIImage->CIImage->UIImage (no filtering)      
                       CPU    0.57s        2.83s   
                       GPU    0.36s        2.83s    
 UIImage->CIImage->CIFilter->UIImage
                       CPU    0.75s        4.38s    
                       GPU    0.58s        4.32s 
```

**更新**

对于窗口范围之外的输入值为零的[窗口和电平](http://blogs.mathworks.com/steve/2006/02/17/all-about-pixel-colors-window-level/)调整，您希望实现如下效果：

![在此处输入图像描述](https://i.stack.imgur.com/zQK9h.png)

```
CGFloat w;  //window
CGFloat l;  //level

              @"inputPoint0",[CIVector vectorWithX:0.0   Y:0.0]
             ,@"inputPoint1",[CIVector vectorWithX:l-w/2 Y:0.0]
             ,@"inputPoint2",[CIVector vectorWithX:l+w/2 Y:1.0]
             ,@"inputPoint3",[CIVector vectorWithX:l+w/2 Y:0.0]
             ,@"inputPoint4",[CIVector vectorWithX:1.0   Y:0.0] 
```

在实践中，这是行不通的。这些点描述了一条样条曲线，它在方向急剧变化（例如 bcd）时表现不佳。（此外，c 点和 d 点（2 和 3）不能共享相同的 x 值，因此在任何情况下您都必须稍微增加一点，以便 dx = cx*1.01）

如果您使用多步过滤器，您可以获得结果。第一个过滤器使用`CIToneCurve`适当（这是正确的窗口/级别算法，而不会尝试将最大级别降低到零）。

![在此处输入图像描述](https://i.stack.imgur.com/bkA5L.png)

```
 CIFilter*   filter =
        [CIFilter filterWithName:@"CIToneCurve"
                   keysAndValues:
                kCIInputImageKey, ciImage,
              @"inputPoint0",[CIVector vectorWithX:0.0   Y:0.0]
             ,@"inputPoint1",[CIVector vectorWithX:l-w/2 Y:0.0]
             ,@"inputPoint2",[CIVector vectorWithX:l     Y:0.5]
             ,@"inputPoint3",[CIVector vectorWithX:l+w/2 Y:1.0]
             ,@"inputPoint4",[CIVector vectorWithX:1.0   Y:1.0] 
```

我们制作过滤器的副本，因为我们将在最后一步再次需要它：

```
 filter2 = [filter copy]; 
```

应用 CIColorControls 过滤器以最大化结果的对比度和亮度

```
 filter = [CIFilter filterWithName:@"CIColorControls"
                            keysAndValues:kCIInputImageKey,
                    [filter valueForKey:kCIOutputImageKey], nil];

        [filter setValue:[NSNumber numberWithFloat:-1]
                  forKey:@"inputBrightness"];
        [filter setValue:[NSNumber numberWithFloat:4]
                  forKey:@"inputContrast"]; 
```

现在分色到 1 位调色板

```
 filter = [CIFilter filterWithName:@"CIColorPosterize"
                             keysAndValues:kCIInputImageKey,
                     [filter valueForKey:kCIOutputImageKey], nil];

        [filter setValue:@2 forKey:@"inputLevels"]; 
```

反转结果

```
 filter = [CIFilter filterWithName:@"CIColorInvert"
                            keysAndValues:kCIInputImageKey,
                    [filter valueForKey:kCIOutputImageKey], nil]; 
```

现在我们使用这个结果作为窗口/水平图像的掩码，以便所有最大白色级别都减少到黑色。

```
 filter = [CIFilter filterWithName:@"CIDarkenBlendMode"
                            keysAndValues:kCIInputImageKey,
                    [ filter valueForKey:kCIOutputImageKey], nil];

        [filter setValue:[filter2 valueForKey:kCIOutputImageKey]
                  forKey:@"inputBackgroundImage"]; 
```

原来的

![在此处输入图像描述](https://i.stack.imgur.com/XxEV9.png)

过滤器1`CIToneCurve`

![在此处输入图像描述](https://i.stack.imgur.com/COney.png)

过滤器2`CIColorControls`

![在此处输入图像描述](https://i.stack.imgur.com/EfPKT.png)

过滤器3`CIColorPosterize`

![在此处输入图像描述](https://i.stack.imgur.com/30I7M.png)

过滤器4`CIColorInvert`

![在此处输入图像描述](https://i.stack.imgur.com/ksvM1.png)

过滤器5`CIDarkenBlendMode`

![在此处输入图像描述](https://i.stack.imgur.com/ZN9rU.png)

如果您查看 Brad Larson's [`GPUImage`](https://github.com/BradLarson/GPUImage)，您应该会发现它`GPUImageLuminanceThresholdFilter`会更好地替换过滤器 2->5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:42:52.117

对于 CIFilter 中的每个效果，我们都有最小值和最大值。我们可以在代码中修复该值，否则如果您想修复绘图，我们通过使用`UISlider`给定最小值和最大值的滑块作为该过滤器的范围来完成它，然后我们可以对该滑块进行操作，因此当用户移动时效果也会自动更改。

# sql - 在sql中动态更改列名

> ID：16185425
> 
> 赞同：0
> 
> 时间：2013-04-24T07:01:22.407
> 
> 标签：sql, sql-server-2008, multiple-columns

我有这样的查询结果：

```
Date       User1 User2 User3 ....
----------------------------------
1/1/2000   55     78    98   ...
1/1/2001   26     33    56   ...
1/1/2002   88     67    12   ... 
```

列数未知，因为它是数据透视查询的结果。

我想将列的名称更改为如下所示：

```
Date    User1 (blue)  User2 (green)  User3(brown) 
```

颜色是我从另一个表中检索到的信息。

我怎样才能做到这一点？

谢谢

编辑：这是查询。

```
 DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(C.Name)  
                    from [History]

            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')
set @query = 'SELECT [Date],' + @cols +' 
             from 
             (
                select [Date], Name, Value
                from [History]

             ) x
            pivot 
            (
                max(value)
                for Name in (' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:48:25.283

[SQL小提琴](http://sqlfiddle.com/#!6/93dbc/8)

**架构设置**：

```
create table history (date datetime, name varchar(10), value int);
insert history values
 ('20130101', 'user1', 123),
 ('20130101', 'user2', 124),
 ('20130101', 'user3', 125),
 ('20130102', 'user1', 223),
 ('20130102', 'user3', 223),
 ('20130103', 'user2', 323);

create table colours (name varchar(10), colour_name varchar(10));
insert colours values
 ('user1', 'blue'),
 ('user2', 'green'),
 ('user3', 'brown'); 
```

**查询**：

```
DECLARE @scols nvarchar(max),
        @cols AS NVARCHAR(MAX),
        @query AS NVARCHAR(MAX);

select @cols = STUFF((
  SELECT ',' + QUOTENAME(C.Name)  
  from (select distinct name from [History]) C
  ORDER BY C.Name
  FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'');

select @scols = STUFF((
  SELECT ',' + QUOTENAME(Name) + ' AS ' + QUOTENAME(colour_Name)  
  from (select distinct c.name, x.colour_name
        from [History] C
        JOIN colours x on x.name = c.name) y
  ORDER BY Name
  FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'');

set @query = '
    SELECT [Date],' + @scols +' 
    from (
        select [Date], Name, Value
        from [History]
         ) x
    pivot 
         (
        max(value)
        for Name in (' + @cols + ')
         ) p ';

-- print @query --<< uncomment this line to see the query that gets generated
exec (@query); 
```

**[结果](http://sqlfiddle.com/#!6/93dbc/8/0)**：

```
|                           DATE |   BLUE |  GREEN |  BROWN |
-------------------------------------------------------------
| January, 01 2013 00:00:00+0000 |    123 |    124 |    125 |
| January, 02 2013 00:00:00+0000 |    223 | (null) |    223 |
| January, 03 2013 00:00:00+0000 | (null) |    323 | (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:05:20.833

```
select Date, User1 as blue,User2 as green,User3 as brown from tableName 
```

使用这样的查询。

使用 ' `as`' 关键字更改列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:45:55.003

获取映射您可以使用旧列名的查找表到新列名，例如

```
CREATE TABLE colname(
  oldname varchar(20),
  newname varchar(20)
)

insert into colname values ( 'user1','user1 (blue)');
insert into colname values ( 'user2','user2 (green)'); 
```

然后您可以构建一个使用此映射的 sql 语句

```
declare @sq varchar(2000)
set @sq ='select date'
select @sq = @sq +  ',' + oldname + ' as [' + newname +']' from colname
set @sq = @sq + 'from ( existing query goes here ) ' 
select @sq 
```

当@sq 中的 sql 看起来不错时，您可以将最后一个选择替换为

```
exec ( @sq ) 
```

运行查询

# java - 有没有 cassandra 的全文搜索 API？

> ID：16185435
> 
> 赞同：2
> 
> 时间：2013-04-24T07:02:02.587
> 
> 标签：java, full-text-search, cassandra

我安装了 cassandra（在 ubuntu 上），我认为它既方便又好。但我并没有构建一个完整的应用程序，而且我希望我必须提供诸如全文搜索之类的东西，甚至像搜索建议之类的东西（使用 AJAX）。我知道有 API:s 可以执行诸如“搜索建议”之类的功能（例如，JQuery 加上对您的数据的一些 http 访问可以使用 AJAX 进行搜索建议）所以现在我想知道我们是否必须为 cassandra 构建自己的搜索 API，或者是否有已经有一些可用了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:02:26.950

不幸的是，使用 vanilla Cassandra 确实没有一个好的方法，因此您将使用额外的搜索工具，例如[Solr](http://lucene.apache.org/solr/)。DataStax 有一个产品（DataStax 企业版）将 Cassandra 与 Solr 紧密集成（用于搜索）。这是[DSE 下载](http://www.datastax.com/docs/datastax_enterprise2.0/search/dse_search_start)页面的链接。您可以在您的 DEV 环境中免费试用。他们还有一个[关于如何在 Solr 中获取简单列族索引的教程](http://www.datastax.com/docs/datastax_enterprise2.0/search/dse_search_start)。

否则，您也可以自行将 Cassandra 与 Solr 集成。但是 DSE 的好处是他们负责 Cassandra/Solr 的集成。此外，DSE 目前在 Cassandra 1.1.x 上（我忘记了确切的版本），所以如果您需要使用 1.2.x，无论如何您都必须自己与 Solr 集成。

# php - 在 mysql (Inno Db) 中锁定和取消锁定表行

> ID：16185443
> 
> 赞同：1
> 
> 时间：2013-04-24T07:02:26.020
> 
> 标签：php, mysql, zend-framework

如果一个用户读取/写入特定表行。

同时，如果其他用户来读/写该特定行。那么他将无法执行该过程。

一旦第一个用户释放该行，则只有第二个用户可以访问它。

我如何在mysql中实现它？

我可以使用 Lock & Unlock Table，但它会显式锁定整个表

是否有其他解决方案，以便可以按行锁定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:06:42.067

MySQL MyISAM 支持`table-level locking`. 更改为`InnoDB` 发动机`row-level locking`

锁定类型由数据库本身隐含。您无需执行任何操作来强制行级锁定或表级锁定。

> MySQL 对 InnoDB 表使用行级锁定，以支持多个会话同时写入访问，使其适用于多用户、高并发和 OLTP 应用程序。MySQL 对 MyISAM、MEMORY 和 MERGE 表使用表级锁定，一次只允许一个会话更新这些表，使其更适合只读、多读或单用户应用程序。

它被称为[内部锁定](https://dev.mysql.com/doc/refman/5.5/en/internal-locking.html)，其中锁定在 MySQL 服务器中执行

有关**[如何锁定一行以供读取的更多信息](http://dev.mysql.com/doc/refman/5.5/en/innodb-locking-reads.html)**

# javascript - HTML5 运动跟踪使用

> ID：16185445
> 
> 赞同：3
> 
> 时间：2013-04-24T07:02:30.287
> 
> 标签：javascript, html, video, canvas

我正在研究 HTML5 运动跟踪，目前我正在使用绘图上下文的方法 drawImage 来捕获当前帧并在其上添加“跟踪器”对象。

您可以在此处查看示例代码：

```
ctx.drawImage(video, 0, 0);

    var cat = new Image();
    cat.src = 'cat.png';
    cat.onload = function() {
        ctx.drawImage(cat, 150, 190);
    } 
```

但我的解决方案也应该支持 Safari iOS 浏览器，但这是来自浏览器的文档：

> 注意：iOS 目前不支持将视频作为画布 drawImage() 方法的来源。

[http://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/HTML-canvas-guide/PuttingVideoonCanvas/PuttingVideoonCanvas.html](http://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/HTML-canvas-guide/PuttingVideoonCanvas/PuttingVideoonCanvas.html)

所以他们提出了以下解决方案：

> 使用视频作为 drawImage() 的源涉及大量系统资源。一般来说，视频最好使用 video 元素显示，而不是 canvas 元素。要在移动视频上合成画布文本或动画，最好在画布后面使用视频元素——视频通过画布的透明背景显示，而无需在画布本身上显示视频的开销。

跟随对象的坐标来自 JSON 文件（我有每一帧的信息），这里是一帧的 JSON 内容：

```
"frames": {
    "0": [{
        "i": 0,
        "x": 686.356,
        "y": 192.797
    },
    {
        "i": 2,
        "x": 1036.4,
        "y": 194.135
    },
    {
        "i": 3,
        "x": 566,
        "y": 113.5
    },
    {
        "i": 4,
        "x": 357,
        "y": 98
    }], 
```

（这里我关注 4 个对象）

所以我在想，有什么更好的方法？捕获每一帧并在画布上添加以下对象，或使用透明画布并仅绘制以下对象。

如果我的解释不好，您可以查看以下视频：[http ://codeazur.com.br/stuff/motiontracking/](http://codeazur.com.br/stuff/motiontracking/)

“跟随对象”是指橙色项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:26:28.733

可能是一个简单的决定！

这是一个正确的工作工具的例子：视频标签用于视频和画布标签用于绘图。

由于每个帧都有 json 坐标，因此在后台播放视频并将橙色跟踪器放在视频顶部的画布上。

您可以使用视频指标将帧与跟踪图同步。我假设您已经拥有解决方案的这一部分，但无论如何这里是对视频指标的参考：[http ://wiki.whatwg.org/wiki/Video_Metrics](http://wiki.whatwg.org/wiki/Video_Metrics)

# assembly - 这个 x86-64 代码中的 lea 有什么作用？

> ID：16185446
> 
> 赞同：4
> 
> 时间：2013-04-24T07:02:30.457
> 
> 标签：assembly, x86-64

这些是函数的前四行。我知道前两行在堆栈中创建了一个新框架，基本上是“设置”行。lea 指令有什么作用？

```
40148e: 48 83 ec 18    sub    $0x18,%rsp
401492: 48 89 f2       mov    %rsi,%rdx
401495: 48 8d 4e 04    lea    0x4(%rsi),%rcx
401499: 48 8d 46 14    lea    0x14(%rsi),%rax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:14:07.173

`lea`，加载有效地址，将计算出的“内存地址”放入结果寄存器。所以在这里，`rcx = rsi + 4`和`rax = rsi + 0x14`。

顺便说一句，第二行看起来不像是设置堆栈帧的代码的一部分，它`rsi`是使用 System V AMD64 调用约定时的第二个参数。

# c++ - WM_MOUSEWHEEL 停止滚动？

> ID：16185450
> 
> 赞同：0
> 
> 时间：2013-04-24T07:02:39.510
> 
> 标签：c++, events, window, mouse

我如何知道用户是否停止滚动鼠标滚轮？目前，在我的 WinProc 函数下，c++

```
 case WM_MOUSEWHEEL:
if((int)wParam > 0)
  //scroll forward
else if((int)wParam < 0)
  //scroll backward 
```

我看看msdn网站。如果鼠标滚轮停止，我找不到将触发的事件。我该如何解决。

WM_MBUTTONUP, WM_MBUTTONDOWN 处理鼠标滚轮的点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:07:51.727

`WM_MOUSEWHEEL`为每个谨慎的滚动事件传递消息。当用户停止滚动时，消息停止到达。这里的所有都是它的。

鼠标滚轮消息与鼠标按钮向下/向上消息对没有任何类似之处。这是因为滚轮滚动与按钮按下是完全不同的动作。

# jquery - 如何用jquery舍入两个输入的总和

> ID：16185455
> 
> 赞同：1
> 
> 时间：2013-04-24T07:02:57.973
> 
> 标签：jquery, function, rounding

我有这个功能：

```
function doCalc() {
  var total = 0;
  $('tr').each(function() {
      $(this).find('span.amount').html($('input:eq(0)', this).val() * $('input:eq(1)', this).val());
  });    
} 

$(this).keyup(doCalc); 
```

例如，如果我乘以 12 * 1.90 它总是显示 22.799999999999997 如何将其格式化为 22.80 ？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:05:26.767

```
var num = 5.56789;
var n=num.toFixed(2); 
```

n 的结果将是：5.57

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T07:05:06.163

您可以使用`toFixed`

```
var test = 10.231;
alert(test.tofixed(test))

returns 10.23 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T07:06:05.520

您可以将结果乘以 100，然后除以 100。

或者你也可以使用 result.toFixed(2);

# visual-c++ - 如何在背景减法器模型中使用捕获的视频播放和检测对象？

> ID：16185456
> 
> 赞同：1
> 
> 时间：2013-04-24T07:02:58.180
> 
> 标签：visual-c++, opencv, image-processing

每个人。！我正在使用opencv2.4.2。实际上我正在做对象检测项目。我尝试使用 BackgroundSubtractorMOG 模型。但我无法从我的电脑加载视频文件。在实时运行时，下面的分段代码可以正常工作。我已经实现了使用帧差分方法进行对象检测。现在我想从背景中分割整个对象。我有静态背景。所以任何人都可以在下面的代码中帮助我如何从捕获的视频中分割对象。还如何加载视频文件？谢谢你。

*   ```
     #include "stdafx.h"
          #include "opencv2/imgproc/imgproc.hpp"
           #include "opencv2/highgui/highgui.hpp"
           #include "opencv2/contrib/contrib.hpp"
           #include "conio.h"

          #include "time.h"
          #include "opencv/cvaux.hpp"
          #include "opencv2/core/core.hpp"
          #include "opencv2/calib3d/calib3d.hpp"

          using namespace std;
          using namespace cv;
      int main(int argc, char** argv)
     {
    //IplImage* tmp_frame;
    //std::string arg = argv[1];
    //VideoCapture capture();
          cv::VideoCapture cap;

           /*CvCapture *cap =cvCaptureFromFile("S:\\offline object detection                 database\\SINGLE PERSON Database\\video4.avi");
          if(!cap){
            printf("Capture failure\n");
             return -1;
            }

            IplImage* frame=0;
            frame = cvQueryFrame(cap);           
             if(!frame)
    return -1;*/

         bool update_bg_model = true;

        if( argc < 2 )
        cap.open(0);
        else
        cap.open(std::string(argv[1]));

        if( !cap.isOpened() )
       {
        printf("can not open camera or video file\n");
        return -1;
       }

        Mat tmp_frame, bgmask;

        cap >> tmp_frame;
        if(!tmp_frame.data)
        {

        printf("can not read data from the video source\n");
        return -1;
        }

         namedWindow("video", 1);
        namedWindow("segmented", 1);

        BackgroundSubtractorMOG bgsubtractor;

        for(;;)
       {
        //double t = (double)cvGetTickCount();
        cap >> tmp_frame;
        if( !tmp_frame.data )
            break;
        bgsubtractor(tmp_frame, bgmask, update_bg_model ? -1 : 0);
        //t = (double)cvGetTickCount() - t;
        //printf( "%d. %.1f\n", fr, t/(cvGetTickFrequency()*1000.) );
        imshow("video", tmp_frame);
        imshow("segmented", bgmask);
        char keycode = waitKey(30);
        if( keycode == 27 ) break;
        if( keycode == ' ' )
            update_bg_model = !update_bg_model;
         }

          return 0;
         } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:35:27.787

opencv 中的视频加载对我有用。要加载视频，您可以尝试这样的事情。捕获帧后，您可以在循环中进行处理，也可以调用单独的函数。

```
std::cout<<"Video File "<<argv[1]<<std::endl;

cv::VideoCapture input_video(argv[1]);

namedWindow("My_Win",1);

Mat cap_img;

while(input_video.grab())
{
   if(input_video.retrieve(cap_img))
   {
     imshow("My_Win", cap_img);
     /* Once you have the image do all the processing here */
     /* Or Call your image processing function */
     waitKey(1);

   }
} 
```

或者你可以做点什么

```
int main(int argc, char*argv[])
{

    char *my_file = "C:\\vid_an2\\desp_me.avi";
    std::cout<<"Video File "<<my_file<<std::endl;
    cv::VideoCapture input_video;

    if(input_video.open(my_file))
    {
         std::cout<<"Video file open "<<std::endl;
    }
    else
    {
        std::cout<<"Not able to Video file open "<<std::endl;

    }
    namedWindow("My_Win",1);
    namedWindow("Segemented", 1);
    Mat cap_img;
    for(;;)
    {
         input_video >> cap_img;
         imshow("My_Win", cap_img);
          waitKey(0);
    }
   return 0;
 } 
```

# web-services - 如何从现有的 Web 应用程序创建 Web 服务？

> ID：16185458
> 
> 赞同：0
> 
> 时间：2013-04-24T07:03:04.247
> 
> 标签：web-services, servlets, axis2

问候，我是 java 中 WebService 的新手。我想将 webService 添加到现有项目中，该项目只是在 Mvc2 中构建并在阅读了很多文章后感到困惑，有人说，使用 saaj 创建服务，其他人说使用任何外部库，如 Axis2创建网络服务或有人说使用注释并创建用于映射的 xml。

```
 public void doPost(HttpServletRequest request, HttpServletResponse response)throws ServletException, IOException {
    String Id = request.getParameter("Id").trim();
    String TD = request.getParameter("TD").trim();
    String Amount = request.getParameter("Amount").trim();
    String Bank = request.getParameter("Bank").trim();
    String NBank = request.getParameter("NBank").trim();
    ApplicationStatus app = new ApplicationStatus(Id, TD, Amount, Bank,NBank);
    ApplicationStatusDA operation= new ApplicationStatusDA();
    int result =operation.insert(app);
    if(result==1)
     {
       System.out.Println("Saved");
     }
   } 
```

当我尝试使用 Axis2 时，它会显示错误

> 服务类“controller.ApplicationStatusCTR”不符合 JAX-RPC 1.1 规范的一项或多项要求，并且可能无法正确部署或运行​​。服务类“controller.ApplicationStatusCTR”上的方法“doGet”使用 JAX-RPC 规范不支持的数据类型“javax.servlet.http.HttpServletRequest”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“controller.ApplicationStatusCTR”上的方法“doGet”使用 JAX-RPC 规范不支持的数据类型“javax.servlet.http.HttpServletResponse”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“controller.ApplicationStatusCTR”上的方法“doPost”使用 JAX-RPC 规范不支持的数据类型“javax.servlet.http.HttpServletRequest”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“controller.ApplicationStatusCTR”上的方法“doPost”使用 JAX-RPC 规范不支持的数据类型“javax.servlet.http.HttpServletResponse”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“控制器”上的方法“服务”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“controller.ApplicationStatusCTR”上的方法“getServletConfig”使用 JAX-RPC 规范不支持的数据类型“javax.servlet.ServletConfig”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“controller.ApplicationStatusCTR”上的方法“getServletContext”使用 JAX-RPC 规范不支持的数据类型“javax.servlet.ServletContext”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。方法 ” 该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“controller.ApplicationStatusCTR”上的方法“service”使用 JAX-RPC 规范不支持的数据类型“javax.servlet.ServletResponse”。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。服务类“controller.ApplicationStatusCTR”上的方法“init”被重载。JAX-RPC 1.1 规范的第 5.5.5 章允许重载方法，但是，一些符合 JAX-RPC 1.1 的工具可能不允许重载方法，或者可能生成带有重载操作的 WSDL，这与 WS-I Basic Profile 的规则 R2304 相悖. 服务类“controller.ApplicationStatusCTR”的方法“log”被重载。JAX-RPC 1.1 规范的第 5.5.5 章允许重载方法，但是，一些符合 JAX-RPC 1.1 的工具可能不允许重载方法，或者可能生成带有重载操作的 WSDL，这与 WS-I Basic Profile 的规则 R2304 相悖.

现在请指导我遵循哪种方法来创建 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:22:09.397

该错误告诉您不支持 Object 的类型。请参阅[http://docs.oracle.com/javaee/1.3/tutorial/doc/JAXRPC2.html](http://docs.oracle.com/javaee/1.3/tutorial/doc/JAXRPC2.html)（这只是一个示例，您实际上应该查看适用于您正在使用的 JAX-RPC 版本的文档）

# django - 发送激活邮件-Django

> ID：16185463
> 
> 赞同：2
> 
> 时间：2013-04-24T07:03:21.440
> 
> 标签：django, email, django-models, django-views

我正在创建一个非活动用户，并希望向他们发送电子邮件以激活那里的帐户，例如我们创建帐户时发送的一个 django-registration。

这是我的意见.py

```
user = User.objects.create_user(userName, userMail,userPass)
 user.is_active=False
 user.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:54:49.990

您应该查看有关[发送电子邮件](https://docs.djangoproject.com/en/dev/topics/email/)的专题指南。基本上，您只需`django.core.mail`在创建用户实例后使用组件发送包含所有必要信息的激活电子邮件。

重要的是，该电子邮件包含有关用户应该如何激活其帐户的更多信息。这样`django-registration`做的方式是它具有与`User`指定唯一标识符的实例相关联的单独模型，该标识符将在激活视图中用于标识应该激活哪个用户帐户，即创建一个`GET`请求以`http://foo/accounts/activate/550e8400-e29b-41d4-a716-446655440000`激活用户帐户关联的 UUID。

尽管有些过时（即没有基于类的视图），但还有一些其他复杂的细节可以`django-registration`提供彻底和完善的解决方案，因此我建议您花足够的时间查看来自[官方存储库](https://github.com/ubernostrum/django-registration)和盗版并复制所有必要的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T01:00:35.950

基本上在用户注册后，您要设置 user.is_active=False。

然后，您将带有用户信息（例如，id）的 URL 发送到用户的电子邮件。

当用户点击链接时，会触发一个激活函数。在激活函数中，它首先根据 URL（id）提取用户信息。然后可以通过调用 user.objects.get(id=id) 来查询用户对象。之后，您可以设置 user.is_active=True 并保存用户。

这是发送电子邮件的代码： from email.mime.text import MIMEText from email.mime.multipart import MIMEMultipart

```
 fromaddr='your email address' #(Gmail here)
    username='your user name'
    password='your password'
    def send_email(toaddr,id):
        text = "Hi!\nHow are you?\nHere is the link to activate your
        account:\nhttp://127.0.0.1:8000/register_activate/activation/?id=%s" %(id)
        part1 = MIMEText(text, 'plain')
        msg = MIMEMultipart('alternative')
        msg.attach(part1)
        subject="Activate your account "
        msg="""\From: %s\nTo: %s\nSubject: %s\n\n%s""" % (fromaddr,toaddr,subject,msg.as_string())
        #Use gmail's smtp server to send email. However, you need to turn on the setting "lesssecureapps" following this link:
        #https://www.google.com/settings/security/lesssecureapps
        server = smtplib.SMTP('smtp.gmail.com:587')
        server.ehlo()
        server.starttls()
        server.login(username,password)
        server.sendmail(fromaddr,[toaddr],msg)
        server.quit() 
```

您可能还想检查一下：[https](https://github.com/JunyiJ/django-register-activate) ://github.com/JunyiJ/django-register-activate 希望对您有所帮助！

# testing - 在我的情况下使用 Selenium IDE 或 Selenium Webdriver？

> ID：16185472
> 
> 赞同：1
> 
> 时间：2013-04-24T07:04:13.923
> 
> 标签：testing, selenium, ide, webdriver

我是 Selenium 的新手，我被要求创建一个测试用例，我需要在其中从 xls 或记事本等外部获取数据，并将其包含在测试用例中，因此无需任何手动输入，整个测试用例就可以运行。但是我尝试了许多在谷歌上找到的不同方法，但我无法执行此操作。我想知道是否可以使用 Selenium IDE 或 Selenium Webdriver。我不了解 Java，所以我避免使用 Selenium webdriver，但是请建议我。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:30:46.437

我对网络驱动程序一无所知，但您可以使用 selenium ide 读取 xml 文件，只需按照步骤 1\. 将 js 文件附加到您的 selenium 核心扩展中（在选项菜单中） 2\. 现在重新启动 firefox 并复制此示例代码

```
<tr><td>forXml</td>
<td>file:///C:/Users/path/filename.xml</td>
<td></td></tr><tr><td>open</td><td>http://www.google.co.uk</td><td></td></tr><tr><td>type</td>
<td>q</td>
<td>${phrase}</td></tr><tr>
<td>click</td>
<td>btnG</td>
<td></td></tr><tr><td>endForXml</td>
<td></td>
<td></td></tr> 
```

示例 xml 数据

```
<testdata>
    <vars phrase="bbc news"/>
    <vars phrase="computers"/>
    <vars phrase="mobile phones"/>
    <vars phrase="insurance &amp; loans"/>
</testdata> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:52:59.400

可能在 IDE 本身内是可能的，但我相信不了解 Java 的问题是完全避免它的一个*糟糕*的借口。

带有 Selenium WebDriver API 的 Java 将为您提供更多的**灵活性**、**可靠性**和更多的**可能性**。

如果你花时间学习 Java**和**WebDriver API，你会很高兴你做到了，它会给你更多的知识和经验，你可以在未来使用，甚至提升你的职业生涯。

# java - 我是否需要为列设置自动增量才能生成身份工作

> ID：16185473
> 
> 赞同：1
> 
> 时间：2013-04-24T07:04:16.510
> 
> 标签：java, mysql, hibernate

这是我的 hbm 文件

```
<hibernate-mapping>
    <class name="com.quiz.online.Quiz" table="quiz" catalog="test">
        <id name="questionid" type="long">
            <column name="questionid" />
            <generator class="identity" />
        </id>
         ... 
```

我已经设置了身份生成器，但是当我使用此代码将值插入数据库时

```
public String insertQuestion(String question,String answer1,String answer2,String answer3,String answer4,String correctanswer,String reason)
    {
        JSONObject obj=new JSONObject();
        try {
            Quiz quiz=new Quiz();
            quiz.setQuestion(question);
            quiz.setAnswer1(answer1);
            quiz.setAnswer2(answer2);
            quiz.setAnswer3(answer3);
            quiz.setAnswer4(answer4);
            quiz.setCorrectanswer(correctanswer);
            quiz.setReason(reason);

            QuizDAO dao=new QuizDAO();
            Transaction tx= dao.getSession().beginTransaction();
            dao.save(quiz);
            tx.commit();

            obj.put("status", "success");
        } catch (Exception e) {
            try {
                e.printStackTrace();
            JSONObject objexp=new JSONObject();
            objexp.put("status", "failure");
            return objexp.toString();
            } catch (Exception e2) {
                e.printStackTrace();
            }
        }
        return obj.toString();
    } 
```

它失败了，因为`questionid`is `null`。

所以它给出了以下异常。

```
org.hibernate.exception.GenericJDBCException: could not insert: [com.quiz.online.Quiz]
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:126)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:114)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:64)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2176)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2656)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
    at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:563)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:551)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:547)
    at com.quiz.online.QuizDAO.save(QuizDAO.java:36)
    at com.quiz.services.DbUtil.insertQuestion(DbUtil.java:28)
    at com.quiz.services.Questions.insertQuestions(Questions.java:19)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$TypeOutInvoker._dispatch(EntityParamDispatchProvider.java:138)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:154)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:543)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:502)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:493)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:308)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:314)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:239)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.sql.SQLException: Field 'questionid' doesn't have a default value
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1078)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4120)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2503)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2664)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2815)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2458)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2375)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2359)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:94)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:57 
```

当我在数据库中设置自动增量时，它正在工作。所以为了发电机工作，`identity`我需要设置`autoincrement``MySQL`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:22:56.547

您是否尝试过按照以下手册中的讨论进行`generator class="identity"`更改：http: [//docs.jboss.org/hibernate/core/3.3/reference/en/html/mapping.html#mapping-generated](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/mapping.html#mapping-generated)`generator class="increment"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:25:23.047

我很确定 MySQL 不支持身份。或者，更好地说，身份在 MySQL 中称为自动增量。正如此处引用的[http://lists.mysql.com/mysql/6442](http://lists.mysql.com/mysql/6442)，您应该使用自动增量。

# wordpress - 用于延迟加载的 Wordpress get_post_meta 图像宽度

> ID：16185476
> 
> 赞同：1
> 
> 时间：2013-04-24T07:04:32.410
> 
> 标签：wordpress, post, get, meta

我正在尝试在 Wordpress 中延迟加载图像页面 - 我已经尝试过这些插件，但它们似乎都不起作用（我只想在某些页面上延迟加载图像。）

所以我现在正在尝试使用插件来做到这一点 - [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

此插件需要 img 标签中的图像宽度和高度。

```
 <img data-original=“img/example.jpg” src=“img/grey.gif” width=“640” height=“480”&gt; 
```

我正在附加来自自定义字段的图像，例如

```
 <img src="<?php echo get_post_meta($post->ID, 'img1', true); ?>"> 
```

是否可以从 get_post_meta 获取图像的宽度和高度

我看过 wp_get_attachment_image_src 但我看不到如何使用它 get_post_meta

======

更新

======

```
 <?php
        $attachments = get_children( 
        array(
                    'post_parent' => $post->ID, 
            'post_status' => 'inherit', 
            'post_type' => 'attachment', 
            'post_mime_type' => 'image', 
            'order' => ASC, 
            'orderby' => 'menu_order ID'
            )
        );

    ?>

    <?php
        foreach ( $attachments as $attachment_id => $attachment ) {

            $image_attributes = wp_get_attachment_image_src( $attachment );

    ?>      
            <img src="<?php echo $image_attributes[0];?>" width="<?php echo $image_attributes[1];?>" height="<?php echo $image_attributes[2];?>">

    <?php       

        }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:32:31.150

最好使用 Wordpress 媒体库支持。您可以通过以下方式获取所有附加到帖子的图像：

```
<?php $attachments = get_children( 
    array('post_parent' => $id, 
        'post_status' => 'inherit', 
        'post_type' => 'attachment', 
        'post_mime_type' => 'image', 
        'order' => ASC, 
        'orderby' => 
        'menu_order ID') ); ?> 
```

`$id`当前的帖子 ID在哪里。然后使用附加图像的 ID，您可以简单地使用：

```
<?php foreach ( $attachments as $attachment_id => $attachment ) {
    (...)
}?> 
```

遍历图像 ID，以及

```
<?php wp_get_attachment_image_src($attachment_id, $size, $icon);> 
```

描述：[http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)，它不仅允许您获取图像的 url，还可以获取它的宽度和高度。

整个代码可以包装在一个简码函数中以便于使用;)。

# r - 通过R中的函数传递字符串

> ID：16185480
> 
> 赞同：2
> 
> 时间：2013-04-24T07:04:35.680
> 
> 标签：r, function, path

我有以下功能：

```
example_Foo <- function( ...,FigureFolder){

  # check what variables are passed through the function  
  v_names <- as.list(match.call())
  variable_list <- v_names[2:(length(v_names)-2)] 

  # create file to store figures
  subDir <- c(paste(FigureFolder,"SavedData",sep = "\\"))

} 
```

显然这只是函数的开始，但我已经遇到了一些问题。在这里，我试图定义我最终希望保存结果的目录。使用该函数的一个例子是：

```
weight <- c(102,20,30,04,022,01,220,10)
height <- c(102,20,30,04,022,01,220,10)

catg <- c(102,20,30,04,022,01,220,10)
catg <- matrix(height,nrow = 2)

FigureFolder <- "C:\\exampleDat"

# this is the function
example_Foo(catg,FigureFolder) 
```

这会产生以下错误：

```
Error in paste(FigureFolder, "SavedData", sep = "\\") : 
  argument "FigureFolder" is missing, with no default 
```

我猜这是由于函数不知道'FigureFolder'是什么，我的问题是如何通过函数传递这个字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:07:40.487

因为您不使用命名参数，所以该`FigureFolder`参数被放入`...`. 只需使用：

```
example_Foo(catg, FigureFolder = FigureFolder) 
```

此外：

```
example_Foo <- function( ...,FigureFolder){

  # check what variables are passed through the function  
  v_names <- as.list(match.call())
  variable_list <- v_names[2:(length(v_names)-2)] 

  # create file to store figures
  subDir <- c(paste(FigureFolder,"SavedData",sep = "\\"))

} 
```

也可以替换为：

```
example_Foo <- function( ...,FigureFolder){

  # check what variables are passed through the function  
  variable_list = list(...)

  # create file to store figures
  subDir <- c(paste(FigureFolder,"SavedData",sep = "\\"))

} 
```

或者更简单：

```
example_Foo <- function(variable_list, FigureFolder){
  # create file to store figures
  subDir <- c(paste(FigureFolder,"SavedData",sep = "\\"))

} 
```

保持你的代码简单可以让你更容易阅读（也为你自己）并且更容易使用和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:07:33.517

您需要为 FigureFolder 提供一个值，例如

```
example_Foo(catg,FigureFolder="FigureFolder") 
```

# c# - 在 Docx 文件中有效地找到最近发生变化的段

> ID：16185484
> 
> 赞同：0
> 
> 时间：2013-04-24T07:04:55.010
> 
> 标签：c#, ms-word

我正在开发一个应用程序备份 Docx 文件。对于初始备份，我将整个文件复制到目标，但下次我想执行增量备份，即我只想备份 Docx 文件中发生更改的那段。我需要找到最有效的方法来做同样的事情。如果我在这方面得到任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:10:36.203

**DOCX**文件与以前使用文件扩展名**DOC**的 Microsoft Word 程序不同，因为DOCX 文件使用文本或二进制格式来存储文档，而 DOCX 文件基于**XML**并使用**ZIP**压缩来存储文档。较小的文件大小。换句话说，DOCX 文件是一组使用 ZIP 压缩的 XML 文件。

如果您可以使用[ZipFile](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)剖析并判断哪个文件真正被更改，然后仅增量保存 VCS 中的更改，这可能会有所帮助。

# php - mysqli 行数总是给我一个错误

> ID：16185485
> 
> 赞同：0
> 
> 时间：2013-04-24T07:04:55.597
> 
> 标签：php

嗨，我正在检查 fetch 数组是否会给我 0 行数据，所以我使用 num_row() 但我总是给我一个错误

```
Warning: mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given in C:\xampp\htdocs\PostImages\displayImages.php on line 8 
```

这是我使用的代码

```
<?php
$con = mysqli_connect('127.0.0.1', 'root', '', 'test');

$id = mysqli_real_escape_string($con,$_REQUEST['id']);
$query = "SELECT image_posts FROM ratepicture WHERE id = ".$id."";
$image = mysqli_query($con, $query);

if(mysqli_num_rows($image) == 0)
{
$queryError = "SELECT image FROM error_pictures WHERE id = 1";
$error = mysqli_query($con, $queryError);
$error = mysqli_fetch_assoc($error);
$error = $error['image'];
echo $error;
}else
{
$image = mysqli_fetch_assoc($image);
$image = $image['image_posts'];
echo $image;
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:07:10.537

```
... expects parameter 1 to be mysqli_result, boolean given in ... 
```

几乎*总是*由查询失败引起的，因为[`mysqli_query()`失败时返回 false](http://php.net/manual/en/mysqli.query.php)。

您需要检查您的线路/查询：

```
$query = "SELECT image_posts FROM ratepicture WHERE id = ".$id.""; 
```

诸如：

*   你*有*桌子`ratepictures`/视图吗？
*   它有`image_posts`专栏吗？
*   的转义值是`$id`多少？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:08:34.183

使用它来检查查询错误

```
$image = mysqli_query($con, $query) OR die(mysqli_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:07:00.497

你混淆了变量。

```
$id = mysqli_real_escape_string($con,$_REQUEST['id']);
$query = "SELECT image_posts FROM ratepicture WHERE id = ".$id."";
$rs = mysqli_query($con, $query);
if(mysqli_num_rows($rs) == 0) {

    $sql = "SELECT image FROM error_pictures WHERE id = 1";
    $rs = mysqli_query($con, $sql);
    $row = mysqli_fetch_assoc($rs);
    $image = $row['image'];
    echo $image;

} 
```

不知道为什么要使用 1 个单变量 ( `$error`) 来应用于所有返回值。奇怪的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:07:42.627

如果用 if (isset($image)) 包装 num 行

$image 为空可能会失败

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:08:44.117

尝试将查询更改为此

```
$query = "SELECT image_posts FROM ratepicture WHERE id = '".$id."'"; 
```

# c# - 单元测试失败，说找不到“Microsoft.VisualStudio.QualityTools.UnitTesting.Silverlight”程序集

> ID：16185487
> 
> 赞同：3
> 
> 时间：2013-04-24T07:04:57.723
> 
> 标签：c#, silverlight, unit-testing, mstest

单元测试（MS 测试框架）在编写它的系统中成功运行，但在其他系统中失败并抛出以下错误：

> “单元测试适配器抛出异常：无法加载文件或程序集 'Microsoft.VisualStudio.QualityTools.UnitTesting.Silverlight, Version=5.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。系统找不到文件指定的..”

'Microsoft.VisualStudio.QualityTools.UnitTesting.Silverlight' 已作为参考添加到我的项目中，但测试用例仍然失败。我是否缺少任何其他参考？需要帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T10:05:10.037

该问题通过使用`gacutil -i <path of the dll>`.

例如：

```
C:\Program Files (x86)\Microsoft SDKs\Silverlight\v5.0\Toolkit\dec11\Testing>gacutil -i Microsoft.VisualStudio.QualityTools.UnitTesting.Silverlight.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T01:22:32.413

我不同意上面的答案，即使 OP 已经标记了它，请检查这个线程： http: [//www.devexpress.com/Support/Center/Question/Details/Q286983](http://www.devexpress.com/Support/Center/Question/Details/Q286983)
**但是我们的 Silverlight 程序集和框架程序都不应该被添加给 GAC。** 所以卸载你在 GAC 中安装的程序集。我希望这会有所帮助。

# c# - C# HTMLElementCollection 抛出 InvalidCastException

> ID：16185499
> 
> 赞同：1
> 
> 时间：2013-04-24T07:05:36.483
> 
> 标签：c#, .net

**编辑：这个问题的一部分已经在其他地方得到了回答，但我觉得这个线程提供了更多信息，可能很容易知道**

标题几乎说明了一切，但这里有更多信息：

我有一个函数，它使用全局 WebbBowser 对象的 HTMLdocument 来搜索特定对象（即文本框）。当找到对象时，它会被赋予一个值。

该函数如下所示：

```
 public static void Set_Elements_Input(string element_name, string value)
    {
        HtmlElementCollection hec = _wb.Document.GetElementsByTagName("input");

        foreach (HtmlElement he in hec)
        {
            if (he.GetAttribute("name") == element_name)
            {
                he.SetAttribute("value", value);
            }
        }
    } 
```

由于某些情况，我无法在我的编程环境中进行调试。所以我必须运行生成的 .exe 来查看它是否有效。它没有。

我的程序崩溃并且崩溃报告指出崩溃是由 InvalidcastException 引起的。

在 MessageBox.Show() 方法的帮助下，我设法找到了一切顺利的地方：

```
 MessageBox.Show("I got here!");
       HtmlElementCollection hec = _wb.Document.GetElementsByTagName("input");
       MessageBox.Show("I didn't get here!"); 
```

这让我觉得很奇怪，因为我看不出这怎么会引发 InvalidCastException。我知道 foreach 可以使用强制转换，但我的程序似乎永远不会到达该代码。那，而且 HTMLElementCollection 是 HTMLElements 的集合，所以我看不出这将如何处理 InvalidCastException。也许当集合为空时，但我认为有一个不同的例外。

比我想象的要多，也许是因为我正在使用线程并且我必须使用调用。但是[http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelementcollection.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelementcollection.aspx)说 HtmlElementCollections 是线程安全的（或者与它无关？）。那，并且函数是静态的，所以我什至不确定我是否可以调用。

长话短说，到底是怎么回事？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:19:52.010

也许在这里找到了答案[Threading and webbrowser control](https://stackoverflow.com/questions/12386071/threading-and-webbrowser-control)：

```
_wb.Invoke(new Action(() => {

    HtmlElementCollection hec = _wb.Document.GetElementsByTagName("input");

    foreach (HtmlElement he in hec)
    {
        if (he.GetAttribute("name") == element_name)
        {
            he.SetAttribute("value", value);
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:21:25.920

我认为您正在尝试将 HTMLElement 转换为集合。只是一个猜测。你不妨试试

```
HtmlElement hec = _wb.Document.GetElementsByTagName("input"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:21:34.763

我认为你的`foreach`原因。`foreach`不得不投去工作`IEnumerable`。如果它是由集合实现的，则使用**var** in`foreach`将从中获取类型。`IEnumerable<T>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:30:39.813

好的，所以我查看了答案，并设法解决了问题。由于某种原因，线程是问题所在。尽管 HTMLElementsCollection 是线程安全的，但 WebBrowser 类不是，所以我不得不调用它：

```
 public static void Set_Elements_Input(string element_name, string value)
    {
        if (_wb.InvokeRequired)
        {
            _wb.Invoke(new Action(() => { Set_Elements_Input(element_name, value); }));
        }
        else
        {
            HtmlElementCollection hec = _wb.Document.GetElementsByTagName("input");

            foreach (HtmlElement he in hec)
            {
                if (he.GetAttribute("name") == element_name)
                {
                    he.SetAttribute("value", value);
                }
            }
        }
    } 
```

但是有人知道为什么原始代码会抛出 InvalidCastException 吗？

# function - XSLT 2.0 中的时间格式

> ID：16185501
> 
> 赞同：1
> 
> 时间：2013-04-24T07:05:43.163
> 
> 标签：function, xslt

我使用 xslt 2.0 和 Java(Saxon-HE)。Saxon-HE 不支持 xslt 日期时间格式。我有 current-date() 和 current-time() 函数，我需要以下格式 time(17 ：31），日期（03/06）。请帮助我并提出任何建议。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:18:48.760

请尝试以下转换：

```
<?xml version='1.0'?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xsl:output method="text"/>
<xsl:template match="test">
    <xsl:variable name="currenttime" select="current-dateTime()" as="xs:dateTime"/> 
    <xsl:value-of select="format-dateTime($currenttime,'[H]')"/><xsl:text>:</xsl:text><xsl:value-of select="format-dateTime($currenttime,'[m]')"/>
    <xsl:text>&#10;</xsl:text>
        <xsl:value-of select="format-dateTime($currenttime,'[M]')"/><xsl:text>/</xsl:text><xsl:value-of select="format-dateTime($currenttime,'[D]')"/>
</xsl:template>
</xsl:stylesheet> 
```

# tcp - 客户端套接字连接存在限制

> ID：16185502
> 
> 赞同：0
> 
> 时间：2013-04-24T07:05:45.907
> 
> 标签：tcp, windows-xp, client

我在 unix(OSX) 机器上使用 kqueue 制作了一个 tcp/ip echo 服务器。它旨在打开 100 个 tcp/ip 端口并每个端口接受 4000 个客户端。我使用 15 台其他机器建立了大约 230,000 个连接。（每个进程 4000 个连接，每盒 4 个进程）

似乎服务器可以接受更多，但问题出在客户端。建立很多连接是有限制的。如 Windows XP - 3000, Windows7 & Unix - 16384 ..

限制对吗？我错了吗？我想在单个客户端上建立尽可能多的连接，例如 500,000 / 机器。

我怎么能克服？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:14:46.810

> 我想在单个客户端上建立尽可能多的连接，例如 500,000 / 机器。

你不能。TCP 连接由元组 {protocol, source address, source port, target address, target port} 标识。这五个元素中有四个是固定的。剩下的元素，源端口，最多只能有 65535 个不同的值，因为端口号有 16 位，不能为零。

因此，您对同一客户端的 500,000 次连接的预期过于乐观了大约 10 倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:20:45.940

您可以在客户端机器上配置多个 IPv4 地址。在客户端上运行的进程应该接收源 IP 地址作为参数，并将连接套接字绑定到它。因此，使用 10 个 IP 地址，您可以轻松达到 400000 个连接。

# html - 粘性页脚。html

> ID：16185503
> 
> 赞同：1
> 
> 时间：2013-04-24T07:05:50.260
> 
> 标签：html, css, footer

我有这个非常简单的页脚：

```
.footer{
    width:100%;
    background-color:#333;
    height:100px;
    position: absolute;  
    bottom: 0px; 
} 
```

这个容器：

```
.container{
    position:relative;
    height:100%;
    width:980px;
    margin:0px auto;
} 
```

容器的（内容）高度为 100%，因此它基于您从搜索查询中获得的结果数量。我希望页脚始终贴在容器下方。当你没有结果时，我只想把它放在屏幕底部。

我试图给容器一个填充底部容器的高度并改变位置，但它没有帮助。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:07:41.320

尝试这个：

```
.footer{ width:100%; background-color:#333; height:100px; position: fixed;
bottom: 0px; } 
```

用固定改变绝对位置

**[演示](http://jsfiddle.net/5dGVf/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T07:14:57.397

请参阅此[CSS 以使 HTML 页面页脚以最小高度保持在页面底部](https://stackoverflow.com/questions/643879/css-to-make-html-page-footer-stay-at-bottom-of-the-page-with-a-minimum-height)

和[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)
我希望这对你有所帮助。

# java - Castor Marshaling :: 无效的 XML 字符

> ID：16185504
> 
> 赞同：0
> 
> 时间：2013-04-24T07:05:52.243
> 
> 标签：java, xml, marshalling, castor

我正在使用**castor** API 将对象转换为 XML。

我得到以下异常

> 原因：org.xml.sax.SAXException：字符 '' 是无效的 XML 字符。

我知道正确的方法是更正来源，但是有很多这样的无效字符。

在另一个论坛中，有人建议在编组它们之前对 java 对象内容进行编码，然后对输出进行解码（`Base64`）。该方法看起来很麻烦，并且不适合解决方案。

我需要一种在编组过程中跳过这些字符的方法，并且生成的 XML 应该包含这些字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:28:55.390

```
 /**
     * This method ensures that the output String has only
     * valid XML unicode characters as specified by the
     * XML 1.0 standard. For reference, please see
     * <a href="http://www.w3.org/TR/2000/REC-xml-20001006#NT-Char">the
     * standard</a>. This method will return an empty
     * String if the input is null or empty.
     *
     * @param in The String whose non-valid characters we want to remove.
     * @return The in String, stripped of non-valid characters.
     */
    public String stripNonValidXMLCharacters(String in) {
        StringBuffer out = new StringBuffer(); // Used to hold the output.
        char current; // Used to reference the current character.

        if (in == null || ("".equals(in))) return ""; // vacancy test.
        for (int i = 0; i < in.length(); i++) {
            current = in.charAt(i); // NOTE: No IndexOutOfBoundsException caught here; it should not happen.
            if ((current == 0x9) ||
                (current == 0xA) ||
                (current == 0xD) ||
                ((current >= 0x20) && (current <= 0xD7FF)) ||
                ((current >= 0xE000) && (current <= 0xFFFD)) ||
                ((current >= 0x10000) && (current <= 0x10FFFF)))
                out.append(current);
        }
        return out.toString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T20:51:32.907

如果您希望生成的 XML 包含这种

> 字符原样

，那么 XML 1.1 规范可能会有所帮助。Castor 可以配置为使用自定义`org.exolab.castor.xml.XMLSerializerFactory`和 `org.exolab.castor.xml.Serializer`实现编组到 XML 1.1：

```
package com.foo.castor;
......

import org.exolab.castor.xml.BaseXercesOutputFormat;
import org.exolab.castor.xml.Serializer;
import org.exolab.castor.xml.XMLSerializerFactory;
import org.xml.sax.DocumentHandler;

import com.sun.org.apache.xml.internal.serialize.OutputFormat;
import com.sun.org.apache.xml.internal.serialize.XML11Serializer;

@SuppressWarnings("deprecation")
public class CastorXml11SerializerFactory implements XMLSerializerFactory {

    private static class CastorXml11OutputFormat extends BaseXercesOutputFormat{

        public CastorXml11OutputFormat(){
            super._outputFormat = new OutputFormat();
        }
    }

    private static class CastorXml11Serializer implements Serializer {

        private XML11Serializer serializer = new XML11Serializer();

        @Override
        public void setOutputCharStream(Writer out) {
            serializer.setOutputCharStream(out);
        }

        @Override
        public DocumentHandler asDocumentHandler() throws IOException {
            return serializer.asDocumentHandler();
        }

        @Override
        public void setOutputFormat(org.exolab.castor.xml.OutputFormat format) {
            serializer.setOutputFormat((OutputFormat)format.getFormat());
        }

        @Override
        public void setOutputByteStream(OutputStream output) {
            serializer.setOutputByteStream(output);
        }

    }

    @Override
    public Serializer getSerializer() {
        return new CastorXml11Serializer();
    }

    @Override
    public org.exolab.castor.xml.OutputFormat getOutputFormat() {
        return new CastorXml11OutputFormat();
    }

} 
```

在`castor.properties`全局文件中

```
org.exolab.castor.xml.serializer.factory=com.foo.castor.CastorXml11SerializerFactory
org.exolab.castor.xml.version=1.1 
```

`setCastorProperties`或通过您特定的方法设置这两个属性`CastorMarshaller`。

但是请注意，[浏览器不接受 XML 1.1，](https://stackoverflow.com/questions/4508283/xml-version-1-1-not-accepted-by-browsers)并且[并非所有 XML 解析器都可以立即解析 XML 1.1](https://stackoverflow.com/questions/9312517/how-can-i-parse-xml-that-confirms-to-the-1-1-spec-using-java-and-xerces)。

# c# - Linq 查询或 Lambda 表达式？

> ID：16185514
> 
> 赞同：9
> 
> 时间：2013-04-24T07:06:31.150
> 
> 标签：c#, linq, lambda

我在我的 ASP.NET、C#、Web 应用程序中使用实体框架。如果我需要从数据库中选择一条记录（在数据访问层中），我应该使用哪种方法？Linq 查询还是 Lambda 表达式？

例如：-

```
//Linq        
var result = from a in db.myTable.Take(1) where a.Id == varId  select a;
return result.First();

//Lambda
return db.myTable.FirstOrDefault(a => a.Id == varId); 
```

在这种情况下是否有任何首选方式或比其他方式有任何优势？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T07:10:21.827

查询表达式编译为方法表达式（Lambda 表达式），因此在您的代码中应该没有任何区别，尽管您正在访问`First`并且`FirstOrDefault`其行为会有所不同。

请参阅：[LINQ (C#) 中的查询语法和方法语法](http://msdn.microsoft.com/en-us/library/vstudio/bb397947.aspx)

和[LINQ 查询表达式（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb397676(v=vs.100).aspx)

> 在编译时，查询表达式根据 C# 规范中规定的规则转换为标准查询运算符方法调用。任何可以用查询语法表达的查询，也可以用方法语法表达。但是，在大多数情况下，查询语法更具可读性和简洁性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T07:12:39.700

Linq 查询语法只是表达式方法的语法糖。任何编译成表达式方法的 Linq 查询。顺便说一句，您的第一个查询：

```
var query = from a in db.myTable.Take(1) 
            where a.Id == varId  
            select a;
return query.First(); 
```

相当于

```
return db.myTable.Take(1).Where(a => a.Id == varId).First(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T07:13:05.400

您的两次尝试都使用了 Linq。

第一个记录一条记录并检查 id 是否匹配。

第二个获取 id 匹配的第一条记录。

那是有区别的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-08T10:00:01.123

每个查询表达式都可以使用对查询运算符的调用作为扩展方法来表示为 C# 代码。但事实并非如此。只有一小部分标准查询运算符可以用作查询表达式中的关键字。换句话说，查询表达式有一些方法调用机制没有的限制：

1.  一些查询运算符根本没有等效的 C# 查询表达式，例如 ToArray()。
2.  我们不能在 C# 的查询表达式中使用各种重载。例如，有一个 Select() 的重载等待当前迭代对象的索引；您不能在查询表达式中调用此重载。
3.  我们不能在查询表达式中使用语句 lambda。- 这就是将对象和集合初始化器引入 C# 语言的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:11:37.663

我想结果是一样的。Lambda 稍微舒服一点。如果您只需要一张表的结果，则 lambda 表达式非常快速且易读。

# visual-studio-2012 - 在 VS2012 中发布构建事件。运行批处理文件

> ID：16185518
> 
> 赞同：4
> 
> 时间：2013-04-24T07:06:47.327
> 
> 标签：visual-studio-2012, build-automation

我试图在 Visual Studio 的 Post build 事件中运行批处理文件。

参考[我们可以在 Visual Studio 的构建后事件命令行中执行 .bat 文件吗？](https://stackoverflow.com/questions/1491394/can-we-execute-a-bat-file-in-post-build-event-command-line-in-visual-studio)以供参考。

当我发布线路时

```
xcopy "$(ProjectDir)bin" "$(SolutionDir)Deploy\bin" /S in postbuild 
```

我得到了预期的结果

我放入蝙蝠并尝试调用的同一行

```
call "$(SolutionDir)\Deploy.bat" 
```

或者

```
call "Physical path\deploy.bat" 
```

我对代码 1 感到兴奋。我在这里做错了什么？

我可以在批处理文件中指定宏吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T14:34:53.900

您收到 VS 错误，因为它返回的退出代码不是 0。这并不一定意味着存在错误。

返回的错误代码意味着没有文件被复制。这些是 Xcopy 的返回码：

*   退出代码
    *   0 文件复制无误。
    *   1 找不到要复制的文件。
    *   2 用户按下 Ctrl+C 来终止 xcopy。
    *   4 各种错误，包括内存或磁盘空间不足、驱动器名称无效或语法无效。
    *   5 发生磁盘写入错误。

在您的批处理文件中尝试此代码。使用 /Y，这样您就不必处理任何提示。您可以使用另一个操作处理返回代码 1 或仅返回 0。

VS Post Build 命令行代码：

`CALL "$(SolutionDir)"Deploy.bat "$(ProjectDir)bin" "$(SolutionDir)Deploy\bin"`

部署.bat 文件

`Xcopy %1 %2 /S /Y`

`If errorlevel 1 @exit 0`

# jquery - 如何在 jQuery 中使用 this 获取选定的文本值

> ID：16185519
> 
> 赞同：0
> 
> 时间：2013-04-24T07:06:47.457
> 
> 标签：jquery, jquery-selectbox

我需要在选择框的 jQuery 中获取选定的选项文本。我用过

```
 $('#selectId :selected').text(); 
```

它对我来说工作正常。但是我如何通过以下来做到这一点。在这里我正在迭代所有具有特定类的选择框。我使用了以下代码。但它对我不起作用。

```
 $('.className').each(function(index,value){
    alert($(this :selected).text());
  }); 
```

它给出了错误`SyntaxError: missing ) after argument list`

请帮助我。在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:08:46.507

那是不正确的语法。你可以使用：

```
$('.className').each(function(index,value){
    alert($(this).find('option:selected').text());
}); 
```

或作为替代方案：

```
$('.className').each(function(index,value){
    alert($("option:selected", this).text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:25:11.997

请使用这个

```
 $('.className').each(function(index,value){
    if($(this).is(':checked'))
      { alert($(this).val());}
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:16:13.807

See`.className`本身就是一个集合，因此您可以在`change`获取`option:selected`它的事件然后警告它的文本时以这种方式使用它。

```
$('.className').on('change', function(){
   alert($("option:selected", this).text());
}); 
```

# solrcloud - 在 solr cloud (solr 4.1.0) 中创建 Solr 核心

> ID：16185523
> 
> 赞同：2
> 
> 时间：2013-04-24T07:07:10.147
> 
> 标签：solrcloud

我正在尝试通过我在具有两个分片的 solr 云中的 java 应用程序动态创建核心。

```
CloudSolrServer cloudSolrServer = new CloudSolrServer("localhost:9983", new LBHttpSolrServer  ("http://localhost:8983/solr"));
CoreAdminRequest.Create req = new CoreAdminRequest.Create() {

         private static final long serialVersionUID = -8825247378713661625L;

            @Override public SolrParams getParams() { 
            ModifiableSolrParams modifiableSolrParams =      (ModifiableSolrParams) super.getParams();
            modifiableSolrParams.set("collection.configName", "mycore"); 
            return modifiableSolrParams; 
            } 
        };

req.setInstanceDir("/solr/master/mycorepath"); 
req.setCollection("mycore");

CoreAdminResponse res = req.process(cloudSolrServer.getLbServer()); 
```

但是我收到错误消息： **ZooKeeper 中不存在指定的配置：mycore**

当我在 solr 管理控制台中检查时，我发现集合“mycore”没有完全创建[即它没有文件夹符号]，并且没有名为“mycore”的配置。

**我该如何解决这个问题。在 2 分片 solr 云（solr 4.1.0）中动态创建核心的标准方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T09:43:02.440

我已经成功地使用 solr4.4 创建了集合，该集合具有两个分片并且没有使用集合 api 的副本

```
CloudSolrServer cs = new CloudSolrServer("localhost:9983");

CollectionAdminResponse res=CollectionAdminRequest.createCollection("testCollection", 2,   1, 1, "127.0.1.1:7574_solr,127.0.1.1:8983_solr", "myconf", null, cs); 
```

这将创建一个带有compositeID 路由器的集合

**myconf**是集群启动时上传到 zoo keeper 的配置名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T20:32:27.927

我也在使用 Solr 4.1.0，并且在创建核心时遇到了一些麻烦。我只使用一个分片，但我[在这里回答了类似的另一个问题。](https://stackoverflow.com/questions/13069841/creating-collections-in-solr/17820434#17820434)

# c# - 如何从我的应用程序设置中运行另一个 .EXE（VS 2010）

> ID：16185526
> 
> 赞同：0
> 
> 时间：2013-04-24T07:07:14.773
> 
> 标签：c#, .net, visual-studio-2010, installation

我有一个 wpf 应用程序并进行了设置，在安装过程中我需要创建数据库并编辑 Connectionstring (app.config)。所以我做了 `CustomAction`添加`Installer.cs`，`override Install method`它完成了。

现在我需要`SqlServer Express`从我的设置中安装，即在创建数据库之前我应该​​检查机器是否安装了 sqlserver，如果没有，它应该从我的应用程序设置中安装。

据我所知，使用`process.start()`我可以运行 exe，但我面临的问题是我应该在哪里保留 sql.exe 以及如何获取路径

提供任何有用的链接非常感谢

截屏： ![在此处输入图像描述](https://i.stack.imgur.com/C7EcG.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:12:30.177

您可以使用[dotNetInstaller](http://dblock.github.io/dotnetinstaller/)或类似的引导程序。此解决方案仅创建一个安装程序来安装其他先决条件，然后执行您的 Visual Studio 设置。

# asp.net-mvc - ASP.NET MVC 4 Catch-all 仅在本地触发，而不是在远程请求上触发

> ID：16185528
> 
> 赞同：4
> 
> 时间：2013-04-24T07:07:27.560
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4, iis-7.5

在 ASP.NET MVC 4 应用程序中，我们设置了一个包罗万象的路由，如下所示：

```
routes.MapRoute( 
     name: "UnKnown",  
     url: "{*url}",  
     defaults: new { controller = "CatchAll", action = "UnknownUrl" }); 
```

CatchAllController 中的 UnknownUrl 方法在我们的开发环境中正确加载了它的视图。

**但是，如果不存在的远程请求**到达，生产 IIS 7.5 会显示其标准 404 页面。在服务器本身上使用 RDP 发送的**本地请求****工作正常**。

web.config 设置为 tp

```
<customErrors mode="Off"/> 
```

**本地呼叫和远程呼叫之间还有什么区别？**我们如何让 MVC HttpHandler 捕获这些请求？

**提示**可能是我们也无法使 IIS 在远程调用时显示任何详细的状态 500 错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:37:17.200

我遇到了 IIS 显示默认错误而不是 .NET 错误的问题，我已`system.webServer`在 web.config 中使用以下内容进行了修复：

```
<httpErrors existingResponse="PassThrough"/> 
```

我认为如果在你的`UnknownUrl`行动中你正在设置这会发生`Response.StatusCode = 404;`。默认情况下，IIS 会看到您正在返回错误代码，因此会显示默认错误消息，您可以使用该配置设置覆盖该消息。

我不确定这在本地 v 远程上会有所不同，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:07:46.927

您可以尝试设置主机标头 - 我相信这是导致本地和生产之间差异的原因：

```
new { controller = "CatchAll", action = "UnknownUrl", host = HttpContext.Current.Request.Url.Host} 
```

从 Application_BeginRequest 注册此路由`Global.asax`。此外，请确保仅执行一次 - 可能通过类似于以下内容的检查：

```
if (routes["UnKnown"] == null)
        {
            routes.MapRoute( 
                name: "UnKnown",  
                url: "{*url}",
                defaults: new { controller = "CatchAll", action = "UnknownUrl", host = HttpContext.Current.Request.Url.Host}
            );
        } 
```

# fabricjs - 在 Fabric.js 中导入 SVG 无法正常工作

> ID：16185529
> 
> 赞同：1
> 
> 时间：2013-04-24T07:07:28.523
> 
> 标签：fabricjs

我正在创建 SVG 形状并将其导出到数据库。jsfiddle 在这里 - [http://jsfiddle.net/rafi_ccj/MASeK/1/](http://jsfiddle.net/rafi_ccj/MASeK/1/)

代码如下。

HTML部分：

```
<button id="make_svg">toSVG</button>
<div id="canvas-wrapper">
    <canvas id="canvas" width="400px" height="200px"></canvas>
</div> 
```

Javascript部分：

```
var canvas = new fabric.Canvas('canvas');

canvas.add(new fabric.Rect({
    left: 100,
    top: 100,
    angle: 0,
    fill: 'rgba(23,23,125,0.5)',
    strokeWidth: 0.1,
    stroke: '#FF0000',
    width: 200,
    height: 200,
    opacity: 1
}));
canvas.add(new fabric.Circle({
    left: 100,
    top: 100,
    fill: 'rgba(45, 255, 34, 0.5)',
    strokeWidth: 0.1,
    stroke: '#FF0000',
    radius: 100,
    opacity: 1
}));

$("#make_svg").click(function () {
    canvas_data = canvas.toSVG();
    console.log(canvas_data);
}); 
```

然后我将该 svg 导入画布，但它与我创建的不同。jsfiddle 在这里 - [http://jsfiddle.net/rafi_ccj/2vtz2/](http://jsfiddle.net/rafi_ccj/2vtz2/)

代码如下---

html部分

```
<div id="canvas-wrapper">
    <canvas id="canvas" width="900px" height="800px"></canvas>
</div> 
```

javascript部分在这里 -

```
var canvas = new fabric.Canvas('canvas');

var canvas_data = '<?xml version="1.0" standalone="no" ?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="400" height="200" xml:space="preserve"><desc>Created with Fabric.js 1.1.8</desc><defs></defs><rect x="-100" y="-100" rx="0" ry="0" width="200" height="200" style="stroke: #FF0000; stroke-width: 0.1; stroke-dasharray: ; fill: rgba(23,23,125,0.5); opacity: 1;" transform="translate(100 100)"/><circle cx="0" cy="0" r="100" style="stroke: #FF0000; stroke-width: 0.1; stroke-dasharray: ; fill: rgba(45, 255, 34, 0.5); opacity: 1;" transform="translate(100 100)"/></svg> ';

fabric.loadSVGFromString(canvas_data, function (objects, options) {
    var loadedObject = fabric.util.groupSVGElements(objects, options);

    loadedObject.set({
        left: 400,
        top: 200
    });
    loadedObject.setCoords();
    canvas.add(loadedObject);
    canvas.calcOffset();
}); 
```

我还注意到，如果我使用三角形，导入后它不存在，它就消失了。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-26T08:58:55.110

我已经通过使所有对象成为组元素来解决这个问题，并且在使用画布中存在的这些对象创建组之后，我将其保存为设备中的 svg 扩展名以及数据库中的 json 格式。代码如下 -

```
var group = new fabric.Group([],{
      left: 200,
      top: 200
 });

 var canvas_item = canvas.item(0), x = 0;
 while (canvas_item != undefined) {
      group.addWithUpdate(canvas_item);
      x += 1;
      canvas_item = canvas.item(x);
 }
 canvas.clear();
 canvas.add(group);
 //then use canvas.toDatalessJSON(); and save it to database. while importing this data //use following codes

 var canvas_data = JSON.stringify(canvas.toDatalessJSON());

 canvasJSONdata = JSON.stringify(canvas.toDatalessJSON());
 var stringifiedCanvasJSONdata = JSON.parse(canvasJSONdata,'');
 var base_64 = canvas.toDataURL('png'); 
```

现在它工作完美！虽然我遇到了很多问题，但我学到了很多，我很享受！希望这个解决方案有一天会对某人有所帮助。

# entity-relationship - 在关系 ER 建模中有一个循环

> ID：16185533
> 
> 赞同：1
> 
> 时间：2013-04-24T07:07:33.297
> 
> 标签：entity-relationship

在实体关系模型上使用 Chen 的符号，用于数据库设计。这是说明以下关系的正确方法吗？“许多员工向一名员工汇报”：

![在此处输入图像描述](https://i.stack.imgur.com/tAyyU.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T13:22:18.653

我认为下面的图片会更合适

![在此处输入图像描述](https://i.stack.imgur.com/tDuyY.jpg)

**[ER图](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)**

**[数据模型](http://www.edrawsoft.com/datamodel.php)**

**[堆栈类似的问题](https://stackoverflow.com/questions/15896699/one-to-many-relationships-in-er-diagram)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:12:12.040

你不需要钻石。你可以有直接的关系。除非关系本身具有属性，否则不使用菱形。

# ios - 建立一个应用程序，在一年中的不同时间每天提醒 6 次？

> ID：16185538
> 
> 赞同：1
> 
> 时间：2013-04-24T07:07:41.493
> 
> 标签：ios, time, reminders

我是初学者，想为iOS制作一个应用程序。我不知道从哪里开始，但我不确定你是否可以制作一个应用程序，在一年的不同时间每天记住你（我有时间把它们写进去）..？你能做一些可以作为“提醒”程序在后台运行的东西吗？

我也会在另一个选定的城市有不同的..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:14:54.133

您可以为此使用本地通知。

看到[这个](https://www.google.co.in/search?q=nsnotification%20tutorial&aq=1&oq=nsnotification%20&aqs=chrome.2.57j0l3j62l2.6813j0&sourceid=chrome&ie=UTF-8#sclient=psy-ab&q=nsnotification%20tutorial%20%2b%20ios%20sdk&oq=nsnotification%20tutorial%20%2b%20ios%20sdk&gs_l=serp.3..33i29i30.17555.20020.0.20251.10.9.0.0.0.0.437.1505.0j1j0j3j1.5.0...0.0...1c.1.11.psy-ab.TFYQZsf7My0&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.45580626,d.bmk&fp=e43e71261d25a34d&biw=1020&bih=582)。

您可以根据需要设置时差。

即使您的应用程序没有运行，或者不在后台。它会起作用的。

像这样，

```
local.fireDate = [calendar dateFromComponents:dateComps]; 
```

看到这个[链接](http://iphonedevsdk.com/forum/iphone-sdk-development/97768-ios-fire-local-notification-every-day-on-specific-time.html)或者[这个](http://iphonedevsdk.com/forum/iphone-sdk-development/112104-update-alert-body-every-day-on-local-notification.html)，你会得到提示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T07:11:20.690

你不能在IOS中一直在后台运行程序，你可以做两件事：

1.  您可以将提醒添加到日历中，因此您的应用无需一直运行，只需添加一次即可。
2.  您可以使用推送通知并在每次需要时向用户发送推送，因此所有计算都将在某些 php 或 java 或您想要的任何其他服务器上进行。

# java - 未从查询字符串中获取值

> ID：16185544
> 
> 赞同：0
> 
> 时间：2013-04-24T07:07:57.103
> 
> 标签：java, spring, jsf-2, query-string, jakarta-mail

在我的申请中有一个注册表单，提交后，它将被邮寄给管理员接受/拒绝注册。

在邮件发送时间，一个唯一的键是附加的`Accept button`。单击此按钮后`actionListener`，控制器中将触发一个，并且我想从查询字符串中读取唯一键值，但我得到空值，尽管 URL`http://localhost:8080/BridgeFront/app/AproveReq.xhtml?activityId=LFGP13005`包含查询字符串参数。我做错什么了吗？如果有人知道，请告诉我。我想在我的项目中说一件事，我正在使用 spring 框架。

在 web.xml 中我写了这个来过滤：

```
<filter>
    <filter-name>openSessionInView</filter-name>
    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
</filter> 
```

的代码`AproveReq.xhtml`如下：

```
<h:form>
<p:commandButton value="Aprove" action="#{aproveDeny.xyz}"/>
<p:commandButton value="Deny"/>
</h:form> 
```

控制器如下：

```
@ManagedBean(name = "aproveDeny")
@RequestScoped
public class AproveDeny{

@ManagedProperty("#{param.activityId}")

private String activityId;

public void xyz(){
    System.out.println("-------+++"+getActivityId());
}

public String getActivityId() {
    return activityId;
}

public void setActivityId(String activityId) {
    this.activityId = activityId;
}} 
```

以这种方式设置邮件正文（MimeMessage）：

```
MimeMessageHelper mimeMessageHelper = new MimeMessageHelper(mimeMessage, true);
mimeMessageHelper.setTo("xxxxxx.xxxx@gmail.com");
StringBuilder text = new StringBuilder();
StringBuilder text = new StringBuilder();
text.append("<html>");
text.append("<body>");
text.append("<a href="+URL+"?activityId="+ActivityId+">Accept Or Deny request.."+"</a>");
text.append("</body>");
text.append("</html>");
mimeMessageHelper.setText(text.toString(), true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:35:01.537

您不必在视图范围内使用托管 bean。首先将其更改为**请求范围**，然后将您的参数注入到类中的变量中。

```
@ManagedBean(name = "activityEntryController")
@RequestScoped
public class ActivityEntryController{

@ManagedProperty(value="#{param.activityId}")
private String activityId;

public void aproveActivityEntryReq(ActionEvent event){
  // make your work
}  
} 
```

如果您的 url 中有多个参数，您应该向类添加一个变量并使用**ManagedProperty**对其进行注释，例如，如果您还想在 url 参数中发送一封电子邮件

```
@ManagedProperty(value="#{param.email}")
private String email; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:20:23.480

将元数据添加到您的 AproveReq.xhtml 页面会将 activityId 传递给您的托管 bean

```
<f:metadata>
  <f:viewParam name="activityId" value="#{aproveDeny.activityId}"/>
</f:metadata> 
```

元数据标签应该在页面的开头，即在头标签之前。

# c# - 用函数检查 Eval()

> ID：16185545
> 
> 赞同：2
> 
> 时间：2013-04-24T07:08:01.080
> 
> 标签：c#, asp.net

我正在尝试创建一个函数来检查价格是否有折扣，如​​果有，它应该输出一个计算值，但我似乎无法让它工作。有人知道我在做什么错吗？

ASP.NET：（从 DB 中提取按预期工作）

```
<%# DiscountFunction(Eval("status"), Eval("price"), Eval("procent"))%> 
```

后面的代码：

```
public string DiscountFunction(string status, string price, string discount)
    {
        if(status == "True") {
            int price2 = Convert.ToInt32(price);
            int discount2 = Convert.ToInt32(discount);
            int calc = (price2 / 100) * discount2;
            int final_calc = pris2-calc;
            return price + " " + final_calc;
        } else {
            return price.ToString();
        }
    } 
```

我收到我的函数包含无效参数的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:11:35.557

试试这个...

```
<%# DiscountFunction(Eval("status").ToString(), Eval("price").ToString(), Eval("procent").ToString())%> 
```

您必须转换为字符串，因为`Eval`函数的返回对象类型不是字符串，因此您必须在传递给函数之前将其隐式转换为字符串，因为它需要字符串类型参数而不是对象类型。

# .htaccess - htaccess - 如果页面是 HTTPS，则从不同路径获取静态内容

> ID：16185549
> 
> 赞同：1
> 
> 时间：2013-04-24T07:08:25.980
> 
> 标签：.htaccess, redirect, https, static

根据加快站点速度的指南，我已将所有静态内容 (JS|CSS|IMAGES) 卸载到子域 static.example.com。该站点运行良好，但是当我加载安全页面时出现问题。浏览器会针对正在加载到我的页面中的“InsecureContent”发出警告。我们只有根域而不是子域的 ssl。我不能得到另一个，但想以这种方式处理它。由于可以在我想要的根文件夹中访问子域文件夹。

我想用 .htaccess 以这种方式处理这个问题 -> 当引用者是 https://www.example.com/anything.php 时，将 http://static.example.com/folder/file.ex 重写为 https://www .example.com/static/folder/file.ex

有人帮我做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:43:47.420

根本不打算帮忙。为了处理 htaccess 文件中的任何内容，请求必须已被网络服务器*接收*。当您的浏览器弹出“不安全内容”警告时，它还*没有发送请求*。在协商 SSL 连接时会弹出此警告，在您的情况下，您的证书不涵盖请求的域。这意味着在服务器端添加任何类型的重定向都无济于事。你仍然会看到警告。

您需要确保您的内容以`http://static.example.com/`某种方式指向，方法是使用相对 URI 基础或明确指向`http://`.

另一种选择可能是在客户端使用某种 javascript。

# javascript - Firefox 20 中的 getUserMedia

> ID：16185552
> 
> 赞同：1
> 
> 时间：2013-04-24T07:08:37.387
> 
> 标签：javascript, html5-canvas, getusermedia

我在让 getUserMedia 在 Firefox 20 中工作时遇到了严重的麻烦。我需要的是一个简单的网络摄像头捕获。

我在网上尝试了几个例子，这里有一个例子：

[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

是不是 Chrome 实际上是当今唯一正确支持 getUserMedia 的浏览器？我也试过 photobooth.js，但没有运气。周围有什么好的解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:35:42.603

在 webkit 中你必须为 webkit 加上前缀，而在 moz 中你需要前缀 moz 。您可以将[adapter.js](https://apprtc.appspot.com/js/adapter.js)用作 polyfil，这样您就可以调用相同的函数在所有启用 web rtc 的浏览器中工作。并且 web rtc 在 chrome 到 moz 或 moz 到 chrome 对等连接中仍然存在问题

您需要在 chrome 24 或更低版本中启用标志。但是对于 chrome 25+，它是无标志的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:14:05.450

[Chrome 21+、Firefox 17+ 和 Opera 12+ 实际上支持`getUserMedia`](http://caniuse.com/stream)（也一直在使用它）。但是 Chrome 和 Firefox 仍然分别以`webkit`和为前缀`moz`，因此[您需要一个简单的 polyfill](https://github.com/addyosmani/getUserMedia.js)来修补差异。

我之前在某处读过，支持这些功能的这些浏览器的初始版本默认禁用它们。您需要先启用它们。就我使用这些浏览器而言，最新版本已启用它们（FF20 和 GC26）

为了使用`getUserMedia`，它必须托管在 Web 服务器上。如果您尝试在本地运行该页面，则会引发错误。如果你安装了 NodeJS，你可以运行[这个 NodeJS 小脚](https://gist.github.com/rpflorence/701407)本来运行一个可移植的静态文件服务器。

# windows-phone-7 - System.OutOfMemoryException 从隔离存储读取和绑定图像

> ID：16185557
> 
> 赞同：8
> 
> 时间：2013-04-24T07:08:58.360
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

这是我用于在 XAML 中绑定图像的代码

```
 <Border  toolkit:TiltEffect.IsTiltEnabled="true" Height="350" Width="400" Grid.ColumnSpan="3">
                        <Grid  Height="350" Width="400" Margin="70,0,70,0" x:Name="Container1">
                            <Grid.Background>
                                <ImageBrush ImageSource="{Binding ImageCollection[0]}" Stretch="Uniform" AlignmentX="Left" AlignmentY="Center"/>
                            </Grid.Background>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Tap">
                                    <i:InvokeCommandAction Command="{Binding ImageTapCommand}" CommandParameter="CONTAINER0"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </Grid>
                    </Border> 
```

同样，我使用 4 边框来显示我最近的图像。

在我的 ViewModel 中，我使用以下方法从隔离存储中读取图像。

```
 public Stream GetFileStream(string filename, ImageLocation location)
    {
        try
        {
            lock (SyncLock)
            {
                if (location == ImageLocation.RecentImage)
                {
                    filename = Constants.IsoRecentImage + @"\" + filename;
                }
                using (var iSf = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (!iSf.FileExists(filename)) return null;
                    var fs = iSf.OpenFile(filename, FileMode.Open, FileAccess.Read);
                    return fs;
                }
            }

        }
        catch (Exception ex)
        {
                 return null;
        }

    } 
```

在获得流之后，我将使用下面编写的方法四构建`WritableBitmap`用于 UI 绑定

```
 private WriteableBitmap BuildImage(Stream imageStream)
    {
        using (imageStream)
        {
            var image = new BitmapImage();
            image.SetSource(imageStream);
            return new WriteableBitmap(image);
        }
    } 
```

在这种情况下，我的问题是在我的页面导航两到三次之后。应用程序在我使用“image.SetSource(imageStream);”的 BuildImage() 方法上崩溃 方法。我尝试了很多替代方案，但都失败了。我得到的例外是“System.OutOfMemoryException”

我尝试了图像控件而不是图像画笔。

我尝试了 Bitmap 而不是 WritableBitmap 等，但结果是一样的。

如果我使用小图像，应用程序崩溃率会降低。但是通过相机拍摄的图像的崩溃率很高。

上周我正在尝试解决此问题，但没有找到解决此问题的任何替代方法。

我找到了一个讨论类似问题的[链接](http://blogs.developpeur.org/kookiz/archive/2013/02/17/wpdev-memory-leak-with-bitmapimage.aspx)，但没有很多人解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:13:19.373

```
Try this, 

  var bitmapImage = new BitmapImage();
  bitmapImage.SetSource(stream);
  bitmapImage.CreateOptions = BitmapCreateOptions.None;
  var bmp = new WriteableBitmap((BitmapSource) bitmapImage);
  bitmapImage.UriSource = (Uri) null;
  return bmp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T01:08:03.947

您是否尝试过强制垃圾收集器运行以查看是否有任何区别。

```
GC.Collect(); 
```

这不是一种解决方案 - 您永远不必调用`GC.Collect`，但它可能有助于确定您的问题是内存泄漏还是只是内存回收的延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T21:06:13.183

Silverlight 默认缓存图像以提高性能。您应该 `image.UriSource = null`在使用 BitmapImage 处理资源后调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T12:01:08.843

您是否在使用它们后`IsolatedStorageFileStream`重置/处理它们？`IsolatedStorageFile`

# css - CSS 不透明度和背景颜色

> ID：16185558
> 
> 赞同：1
> 
> 时间：2013-04-24T07:09:07.293
> 
> 标签：css, opacity

我在链接图像上使用以下 CSS 代码：

```
a img:hover {
    filter: alpha(opacity=80);
    -khtml-opacity: 0.8;
    -moz-opacity: 0.8;
    opacity: 0.8;
    background: #f00;
} 
```

这个想法是，当用户将鼠标悬停在图像上时，它会被略微染成红色。浏览器似乎忽略了“背景：#f00;” 财产。

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:15:51.290

它不会因为你有图像而工作，所以你需要一个覆盖元素，可能是一个 div

[**演示**](http://jsfiddle.net/UyjyV/)

HTML

```
<div class="wrap">
    <img src="http://images.google.co.in/intl/en_ALL/images/logos/images_logo_lg.gif" />
    <div class="overlay"></div>
</div> 
```

CSS

```
.wrap {
    position: relative;
    display: inline-block;
}

.overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    background: transparent;
    top: 0;
}

.wrap:hover .overlay {
    background: rgba(250, 0, 0, .1);
} 
```

注意：您应该有一个定位的相对容器，否则您的绝对定位的 div 将在野外用完，此外，您可以删除`display: inline-block;`并为容器元素提供相应的高度和宽度，请注意它是否粘在您的图像上，或者您也可以使用过渡来获得平滑的效果

对于过渡，您需要像这样修改类

```
.overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    background: transparent;
    top: 0;
    transition: background 1s;
    -moz-transition: background 1s;
    -webkit-transition: background 1s;
    -o-transition: background 1s;
} 
```

[**演示过渡**](http://jsfiddle.net/UyjyV/1/)

# selenium-ide - 使用 selenium IDE 进行文本框验证

> ID：16185561
> 
> 赞同：0
> 
> 时间：2013-04-24T07:09:17.050
> 
> 标签：selenium-ide

我是 selenium 的新手，想验证用户输入的数据是否正确。例如有电子邮件文本框，所以我会要求用户输入电子邮件地址。比我想验证用户输入的数据是否采用正确的电子邮件地址格式

示例 2 对于联系人 no，所有数据都应为数字

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:10:56.653

```
 Email Validation in selenium IDE

 <tr>
        <td>verifyValue</td>
        <td>id=Emailid</td>
        <td>regexpi:^[_a-z0-9-]+(\\.[_a-z0-9-]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$</td>
    </tr>

    Try this..

    Thank you.. 
```

# iphone - 开店模式与开店模式不兼容，苹果商店发布版

> ID：16185562
> 
> 赞同：13
> 
> 时间：2013-04-24T07:09:16.597
> 
> 标签：iphone, ios, sqlite, core-data

我有一个预先存在 sqlite 数据库的 ios 应用程序，我正在使用核心数据。现在我发布了一个新版本的应用程序，在核心数据预先存在存储（sqlite）中进行了一些属性更改。现在用户更新应用程序，然后应用程序在加载时崩溃并给出下面给出的错误。我通常在 iphone 模拟器中修复此错误，但会重置模拟器。但是现在如何为我的实时用户处理这个问题。

如果我的用户删除应用程序然后安装新版本，那么它工作正常

![在此处输入图像描述](https://i.stack.imgur.com/Kas43.png)

# java - 无法在 Windows 上使用 Java Print Service API 打印 UTF8 文档

> ID：16185566
> 
> 赞同：2
> 
> 时间：2013-04-24T07:09:30.213
> 
> 标签：java

我一直在尝试使用 Windows 操作系统上的 Java Print Service API 打印包含俄语字母的文本文档，但到目前为止还没有成功。打印机打印文件，但 unicode 字符出现乱码。

运行程序时，指定了 VM 参数**-Dfile.encoding=utf8**

## 以下是代码

```
 import java.io.DataInputStream;  
    import java.io.FileInputStream;  
    import java.io.UnsupportedEncodingException;  
    import javax.print.Doc;  
    import javax.print.DocFlavor;  
    import javax.print.DocPrintJob;  
    import javax.print.PrintException;  
    import javax.print.PrintService;  
    import javax.print.PrintServiceLookup;  
    import javax.print.SimpleDoc;  
    import javax.print.attribute.HashPrintRequestAttributeSet;  
    import javax.print.attribute.PrintRequestAttributeSet;  
    import javax.print.attribute.standard.Sides;  

    public class PrintUtf8Doc {

        public static void main(String[] args) throws UnsupportedEncodingException {  
            FileInputStream textstream=null;   
            DataInputStream da=null;  
            byte buff[]=new byte[1024*20];  

            try {  
                textstream = new FileInputStream("D:\\test\\russian.txt");   
                da=new DataInputStream(textstream);  
                da.read(buff);  

            } catch (Exception e) {   
                e.printStackTrace();  
            }   
            if (textstream == null) {   
                return; 
            } 
    //       Set the document type

            DocFlavor myFormat = DocFlavor.BYTE_ARRAY.AUTOSENSE;

    //       Create a Doc
            Doc myDoc = new SimpleDoc(buff, myFormat, null);   
    //       Build a set of attributes  
            PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();   
            aset.add(Sides.DUPLEX);   

            System.out.println("Host Encoding: "+myFormat.hostEncoding);  

            PrintService service = PrintServiceLookup.lookupDefaultPrintService();  
            DocFlavor flavs[]=service.getSupportedDocFlavors();
            for(DocFlavor flavor: flavs){
              System.out.println(flavor.toString());                
            }

            // Create a print job from one of the print services  
            if (service!=null) {   

                DocPrintJob printJob=service.createPrintJob();  
                try {  
                    printJob.print(myDoc, aset);  
                } catch (PrintException e) {  
                    e.printStackTrace();  
                }               

            }

        }
    }

-------------------------------------------------------------------
The supported flavors are printed in the console

Host Encoding: UTF8  
image/gif; class="[B"  
image/gif; class="java.io.InputStream"  
image/gif; class="java.net.URL"  
image/jpeg; class="[B"  
image/jpeg; class="java.io.InputStream"  
image/jpeg; class="java.net.URL"  
image/png; class="[B"  
image/png; class="java.io.InputStream"  
image/png; class="java.net.URL"  
application/x-java-jvm-local-objectref; class="java.awt.print.Pageable"  
application/x-java-jvm-local-objectref; class="java.awt.print.Printable"  
application/octet-stream; class="[B"  
application/octet-stream; class="java.net.URL"  
application/octet-stream; class="java.io.InputStream" 
```

* * *

我什至尝试将 docFlavor 更改为 "application/octet-stream; class="java.io.InputStream" 并将 inputStream 传递给 SimpleDoc() 构造函数，但仍然是同样的问题

看起来即使平台编码设置为 UTF8，Windows 上的 Java 打印服务也无法正确读取字节。

是否有任何设置需要完成或更正？任何建议都会有很大帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:29:39.920

我认为您需要在 russian.txt 中读取`UTF-8`，我认为由于该文件包含`UTF-8`字符但正在读取`windows-1252`（如果未在 Java 中指定，则为默认编码）此转换可能会导致乱码。

您可以使用`InputStreamReader`which 将 charset 作为读取（请参阅下面的最后一个参数）：

```
BufferedReader rd = new BufferedReader(new InputStreamReader(new FileInputStream(f), "UTF-8")); 
```

如果需要 byte[] 那么你需要推断出从上面的阅读器转换它的方法，因为这些公开了`char`基于读取的 API（以及 readLine 以及缓冲阅读器的情况）

# java - 在 Windows XP 上运行的开源 OCR 库

> ID：16185569
> 
> 赞同：0
> 
> 时间：2013-04-24T07:09:35.993
> 
> 标签：java

我正在寻找在 Windows XP 上运行的开源 OCR 库。我需要它来处理图像和 PDF。大多数情况下，我想从 java 接口这个库。知道是否有任何可用的东西吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:12:46.823

检查[正方体](https://code.google.com/p/tesseract-ocr/)

Tesseract 可能是可用的最准确的开源 OCR 引擎。结合 Leptonica 图像处理库，它可以读取多种图像格式并将其转换为 60 多种语言的文本。它是 1995 年 UNLV 精度测试中排名前三的发动机之一。从 1995 年到 2006 年，它几乎没有做任何工作，但从那时起，Google 对其进行了广泛的改进。它是根据 Apache 许可证 2.0 发布的。

> Tesseract 适用于 Linux、**Windows（使用 VC++ Express 或 CygWin）** 和 Mac OSX

这是[来自wiki的比较表](http://en.wikipedia.org/wiki/Comparison_of_optical_character_recognition_software)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:52:58.333

查看[Tess4J](http://tess4j.sourceforge.net/)，一个用于 Tesseract OCR API 的 Java JNA 包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:12:44.627

[http://roncemer.com/software-development/java-ocr/](http://roncemer.com/software-development/java-ocr/)

“Java OCR 是一套用于图像处理和字符识别的纯 Java 库。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:13:05.233

我会看一下 Apache Tika 项目并将其与[Tesseract OCR](http://code.google.com/p/tesseract-ocr/)结合起来。Apache Tika 管理从各种文件类型中打开和提取内容。它具有非常可插拔的设计，因此您可以连接 OCR 进行输入，甚至可以将其输出连接到 Lucene 进行搜索。它是纯Java。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:13:09.580

Heat 在关于 OCR 的研究上做了很多工作，看看[这个](http://www.heatonresearch.com/articles/42/page1.html)

# android - android websocket连接超时与wAsync（气氛）

> ID：16185570
> 
> 赞同：0
> 
> 时间：2013-04-24T07:09:38.613
> 
> 标签：android, android-emulator, websocket, netty, atmosphere

我之前写过一个基于 wAsync 的 Java SE 客户端。它与连接到 Atmosphere 1.1.RC1 的 1.0.RC1 版本非常稳定。我按照 Jeanfrancois 的这个例子来完成[这个任务](https://github.com/Atmosphere/wasync/blob/master/samples/android-chat/src/main/java/org/atmosphere/wasync/andoid/wAsyncChat.java)

一切正常，JSON 编码、订阅、广播和发送 POST 到 URI。目前很好。

但是，将此示例放到 Android 上会在尝试订阅资源时引发超时异常。正如您在日志中看到的，我想打开一个套接字

```
http://localhost:8080/resource/playerpool 
```

同样，这在 Java SE 6 客户端上运行良好。

任何人都有一个线索，为什么这会在 Android 模拟器上遇到超时，同时是来自 Java SE 客户端的确切代码？

我确实在 AndroidManifest.xml 中设置了权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

在 Android 日志下方，尝试打开套接字上的连接时。

```
04-24 06:27:41.043: W/System.err(1512): java.net.ConnectException: connection timed out to ws://localhost:8080/resource/playerpool?X-Atmosphere-Transport=long-polling&X-atmo-protocol=true&X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0&X-Cache-Date=0
04-24 06:27:41.051: W/System.err(1512):     at com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:103)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:427)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:418)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.DefaultChannelFuture.setFailure(DefaultChannelFuture.java:380)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.processConnectTimeout(NioClientBoss.java:139)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:82)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:41)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
04-24 06:27:41.051: W/System.err(1512):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-24 06:27:41.051: W/System.err(1512):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-24 06:27:41.051: W/System.err(1512):     at java.lang.Thread.run(Thread.java:856)
04-24 06:27:41.051: W/System.err(1512): Caused by: java.net.ConnectException: connection timed out
04-24 06:27:41.051: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.processConnectTimeout(NioClientBoss.java:136)
04-24 06:27:41.051: W/System.err(1512):     ... 8 more
04-24 06:27:41.063: W/System.err(1512): java.util.concurrent.ExecutionException: java.net.ConnectException: connection timed out to ws://localhost:8080/rest-group-e/playerpool?X-Atmosphere-Transport=long-polling&X-atmo-protocol=true&X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0&X-Cache-Date=0
04-24 06:27:41.063: W/System.err(1512):     at com.ning.http.client.providers.netty.NettyResponseFuture.abort(NettyResponseFuture.java:327)
04-24 06:27:41.063: W/System.err(1512):     at com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:107)
04-24 06:27:41.063: W/System.err(1512):     at org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:427)
04-24 06:27:41.074: W/System.err(1512):     at org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:418)
04-24 06:27:41.074: W/System.err(1512):     at org.jboss.netty.channel.DefaultChannelFuture.setFailure(DefaultChannelFuture.java:380)
04-24 06:27:41.074: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.processConnectTimeout(NioClientBoss.java:139)
04-24 06:27:41.074: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:82)
04-24 06:27:41.074: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)
04-24 06:27:41.074: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:41)
04-24 06:27:41.074: W/System.err(1512):     at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
04-24 06:27:41.083: W/System.err(1512):     at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
04-24 06:27:41.083: W/System.err(1512):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-24 06:27:41.083: W/System.err(1512):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-24 06:27:41.083: W/System.err(1512):     at java.lang.Thread.run(Thread.java:856)
04-24 06:27:41.083: W/System.err(1512): Caused by: java.net.ConnectException: connection timed out to ws://localhost:8080/rest-group-e/playerpool?X-Atmosphere-Transport=long-polling&X-atmo-protocol=true&X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0&X-Cache-Date=0
04-24 06:27:41.083: W/System.err(1512):     at com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:103)
04-24 06:27:41.083: W/System.err(1512):     ... 12 more
04-24 06:27:41.083: W/System.err(1512): Caused by: java.net.ConnectException: connection timed out
04-24 06:27:41.083: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.processConnectTimeout(NioClientBoss.java:136)
04-24 06:27:41.083: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:82)
04-24 06:27:41.083: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)
04-24 06:27:41.083: W/System.err(1512):     at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:41)
04-24 06:27:41.083: W/System.err(1512):     ... 3 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:25:03.590

`http://localhost:8080/resource/playerpool`

在 Android 模拟器/设备中，此 URL 将尝试连接到在模拟器/设备本身上运行的 HTTP 服务器，除非您有另一个 Android 应用程序充当其上运行的 HTTP 服务器，否则该服务器可能不存在。

您的 Web 服务是否在模拟器的主机上运行？尝试替换`localhost`为`10.0.2.2`. [根据Android Emulator 文档](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)，在模拟器中，此 IP 指的是您的主机

# iphone - 表格单元格的奇怪行为

> ID：16185572
> 
> 赞同：0
> 
> 时间：2013-04-24T07:09:44.830
> 
> 标签：iphone, ios, objective-c, ipad, uitableview

我只是在我的应用程序中实现一个表格视图。我已经多次这样做了，但这次表格单元格显示重复数据并且表格滚动的速度也不好。只是发布我的表格代码。任何有助于防止单元格数据重复和滚动速度优化的帮助将不胜感激。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    int count = [array count];

    if (count%3 == 0)
    {
        return count;
    }
    else
    {
        count = count/3+1;
    }
    NSLog(@"Row count is%i",count);
    return count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:MyIdentifier];
    }
    UIView *testView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 490, 221)];
    int x = 15;
    int y = 15;
    int p = 10;
    int q = 10;
    for (int i = 0; i < 3; i++)
    {
        if ( indexPath.row*3+i < [array count] )
        {
            UIImageView *img = [[UIImageView alloc] init];
            UIButton *btn = [[UIButton alloc] init];
            [img setImageWithURL:[NSURL URLWithString:[array objectAtIndex:indexPath.row*3+i]]
                placeholderImage:[UIImage imageNamed:@"India.png"]
                         success:^(UIImage *image) {}failure:^(NSError *error){}];
            img.frame = CGRectMake(x, y, 140, 201);
            btn.frame = CGRectMake(p, q, 150, 211);
            btn.tag = indexPath.row*3+i;

            [btn setBackgroundImage:[UIImage imageNamed:@"Picframe_N.png"] forState:UIControlStateNormal];
            [btn setBackgroundImage:[UIImage imageNamed:@"Picframe_S.png"] forState:UIControlStateHighlighted];
            [btn addTarget:self action:@selector(Movie_detail:) forControlEvents:UIControlEventTouchUpInside];
            [testView addSubview:img];
            [testView addSubview:btn];

            x = x+160;
            p = p+160;
        }
        else
        {
            NSLog(@"No data");
            break;
        }
    }
    [cell addSubview:testView];
    return cell;
} 
```

单元格中更新的内容是为了在单个单元格中添加 3 个按钮。没有其他的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:17:12.810

**建议**

使用自定义单元格

**修复**：

创建和添加子视图将包含在分配单元格的大括号内

IE

```
 if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:MyIdentifier];
         //CREATING AND ADDING SUBVIEW SHOULD BE HERE
    }
          //Change in values is taken care here 
```

**原因**

否则每次创建子视图时，分配所有对象并在表格滚动时添加到上面

**参考**

[苹果文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:29:41.950

您面临的问题是您将 UIView 添加到进入屏幕的每个单元格。但是，您正在重用单元格，因此旧的“添加”视图仍在它们上。数据的重复是因为滚动时一个单元格上有多层测试视图。

您应该创建一个包含您在每个 cellforrow 添加的 testview 的 CustomCell：或者当单元格仍然是 nil 值时将 testview 添加到 cellviews 中，这样如果它被重用，您就不会再添加另一个 testview 到单元格，它们重叠。这些示例写在此处的其他答案中，但在网络上随处可见。

*不推荐，但：另一个快速但肮脏的修复方法是从单元格中删除所有子视图（或您添加 testview 的任何子视图）`for(UIView *v in [cell(.contentView) subviews]){ [v removeFromSuperView]; }`*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:25:44.187

你好这个问题在你使用的时候是正常的`dequeueReusableCell`

只需按照我在下面的方法中列出的更改..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    UIView *testView;
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:MyIdentifier];
        testView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 490, 221)];
        testView.tag = 111;
        [cell addSubview:testView];
        [testView release];//For Non ARC
    }
    else
    {
        testView = [cell.contentView viewWithTag:111];
        for(UIView * vv in [testView subViews])
        {
            [vv removeFromSuperView];
        }
    }
    int x = 15;
    int y = 15;
    int p = 10;
    int q = 10;
    for (int i = 0; i < 3; i++)
    {
        if ( indexPath.row*3+i < [array count] )
        {
            UIImageView *img = [[UIImageView alloc] init];
            UIButton *btn = [[UIButton alloc] init];
            [img setImageWithURL:[NSURL URLWithString:[array objectAtIndex:indexPath.row*3+i]]
                placeholderImage:[UIImage imageNamed:@"India.png"]
                         success:^(UIImage *image) {}failure:^(NSError *error){}];
            img.frame = CGRectMake(x, y, 140, 201);
            btn.frame = CGRectMake(p, q, 150, 211);
            btn.tag = indexPath.row*3+i;

            [btn setBackgroundImage:[UIImage imageNamed:@"Picframe_N.png"] forState:UIControlStateNormal];
            [btn setBackgroundImage:[UIImage imageNamed:@"Picframe_S.png"] forState:UIControlStateHighlighted];
            [btn addTarget:self action:@selector(Movie_detail:) forControlEvents:UIControlEventTouchUpInside];
            [testView addSubview:img];
            [testView addSubview:btn];

            x = x+160;
            p = p+160;
        }
        else
        {
            NSLog(@"No data");
            break;
        }
    }

    return cell;
} 
```

尝试这个....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:29:29.700

在不同的单元格中重复数据可能是由于相同的“CellIdentifier”，请尝试为不同的单元格视图类型使用不同的“CellIdentifier”。我可以看到不同的单元格视图类型，因为您的代码中有一些条件块。

```
static NSString *MyIdentifier;

MyIdentifier = @"Type1";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:MyIdentifier];
    }

MyIdentifier = @"Type2";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:MyIdentifier];
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:19:06.860

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:MyIdentifier];

        UIView *testView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 490, 221)];
    int x = 15;
    int y = 15;
    int p = 10;
    int q = 10;
    for (int i = 0; i < 3; i++)
    {
        if ( indexPath.row*3+i < [array count] )
        {
            UIImageView *img = [[UIImageView alloc] init];
            UIButton *btn = [[UIButton alloc] init];
            [img setImageWithURL:[NSURL URLWithString:[array objectAtIndex:indexPath.row*3+i]]
                placeholderImage:[UIImage imageNamed:@"India.png"]
                         success:^(UIImage *image) {}failure:^(NSError *error){}];
            img.frame = CGRectMake(x, y, 140, 201);
            btn.frame = CGRectMake(p, q, 150, 211);
            btn.tag = indexPath.row*3+i;

            [btn setBackgroundImage:[UIImage imageNamed:@"Picframe_N.png"] forState:UIControlStateNormal];
            [btn setBackgroundImage:[UIImage imageNamed:@"Picframe_S.png"] forState:UIControlStateHighlighted];
            [btn addTarget:self action:@selector(Movie_detail:) forControlEvents:UIControlEventTouchUpInside];
            [testView addSubview:img];
            [testView addSubview:btn];

            x = x+160;
            p = p+160;
        }
        else
        {
            NSLog(@"No data");
            break;
        }
    }
    [cell addSubview:testView];
    }

    return cell;
} 
```

你不应该在你`cell`被初始化的块之外初始化任何东西，因为当你`scroll`的`tableview`方法`cellForRowAtIndexPath`每次都被调用时，你的视图`testview`每次都会被创建。

在单元格初始化之外，您应该只更新要在单元格中显示的值。

希望上面的作品..

**已编辑** 但更好的方法我建议尝试创建一个`Custom Cell`，以便您可以轻松访问添加到单元格的组件，以在表格视图滚动时更新它们的值..

谢谢。

# unix - ls 文件名在 lftp 中不起作用

> ID：16185575
> 
> 赞同：6
> 
> 时间：2013-04-24T07:09:58.527
> 
> 标签：unix, lftp

我创建了一个 lftp 脚本来将单个文件上传到网络托管服务提供商。

用例是我从存储库根目录调用它，因此这里和远程服务器中的相对路径是相同的。

```
#!/bin/bash

DIRNAME=$(dirname $1)
FILENAME=$(basename $1)
REPO_ROOT=$(pwd)
ABSOLUTE_PATH=${REPO_ROOT}/$1

lftp -u user,passwd -p port sftp://user@hosting <<EOF
cd $DIRNAME
put  $ABSOLUTE_PATH 
ls -l $FILENAME
quit 0
EOF 
```

它有效，有一个小但烦人的错误。为了检查它是否真的上传了文件，我`ls -l`在最后放了一个。它失败了，我不明白为什么：

```
ls: Access failed: No such file(functions.php) 
```

我尝试使用`rels`，`cache flush`但徒劳无功。我正在使用 lftp 4.0.9。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T07:09:58.527

一些谷歌搜索终于在[邮件存档中给出了结果](http://www.mail-archive.com/lftp@uniyar.ac.ru/msg03087.html)

> 这是 lftp 中 SFTP 协议实现的一个限制。它不能列出单个文件，只能列出特定目录。

幸运的是，lftp 允许管道，所以

```
ls -l | grep  "$FILENAME" 
```

解决问题。

# sql-server - 保持更新的汇总表备用的策略（SQL Server）

> ID：16185580
> 
> 赞同：1
> 
> 时间：2013-04-24T07:10:08.963
> 
> 标签：sql-server, web-applications, query-optimization, reporting, portal

我有一个客户端门户项目（我开发的第一个项目，所以基本的最佳实践就是我在这里寻找的，没什么特别的）即将发布。

报告中使用的主要记录类型的简化如下：

```
CREATE TABLE [dbo].[conversions](
    [conversion_id] [nvarchar](128) primary key NOT NULL,
    [click_id] [int] NULL,
    [conversion_date] [datetime] NOT NULL,
    [last_updated] [datetime] NULL,
    [click_date] [datetime] NULL,
    [affiliate_affiliate_id] [int] NOT NULL,
    [advertiser_advertiser_id] [int] NOT NULL,
    [offer_offer_id] [int] NOT NULL,
    [creative_creative_id] [int] NOT NULL,
    [conversion_type] [nvarchar](max) NULL)

CREATE TABLE [dbo].[clicks](
    [click_id] [int] primary key NOT NULL,
    [click_date] [datetime] NOT NULL,
    [affiliate_affiliate_id] [int] NOT NULL,
    [advertiser_advertiser_id] [int] NOT NULL,
    [offer_offer_id] [int] NOT NULL,
    [campaign_id] [int] NOT NULL,
    [creative_creative_id] [int] NOT NULL,
    [ip_address] [nvarchar](max) NULL,
    [user_agent] [nvarchar](max) NULL,
    [referrer_url] [nvarchar](max) NULL,
    [region_region_code] [nvarchar](max) NULL,
    [total_clicks] [int] NOT NULL) 
```

我的具体问题是：鉴于**每个表中有数百万行，**如果您知道可以请求的所有可能报告，那么使用什么机制来*按需快速提供摘要报告？*

起点，性能方面，为最繁忙的客户对价值 18 个月的数据进行原始查询在我的仪表板上产生 3 到 5 秒的延迟，最坏的情况是具有自定义日期范围的摘要报告超过 10 秒跨越所有行。

我知道我可以在第一次点击后缓存它们，但我希望在第一次点击时表现出色。

我的感觉是这是这种性质的应用程序的一个基本方面，并且有大量这样的应用程序，那么是否有一种已经深思熟虑的方法来预先计算已经进行分组和聚合的表？那么如何让它们保持最新状态？您是否使用预先强制计算的 SQL 代理和自定义控制台应用程序？

任何一般的指针将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:47:19.127

两张表都是时间序列。它们似乎被一个 ID 列聚集在一起，对于如何查询时间序列几乎没有价值。时间序列几乎总是按日期范围查询，因此您的集群组织首先应该为此类查询提供服务：按日期集群，将 ID 主键约束移动到非集群中。

```
CREATE TABLE [dbo].[conversions](
    [conversion_id] [nvarchar](128) NOT NULL,
    [conversion_date] [datetime] NOT NULL,
    ...
    constraint pk_conversions nonclustered primary key ([conversion_id]))
go

create clustered index [cdx_conversions] on [dbo].[conversions]([conversion_date]);
go

CREATE TABLE [dbo].[clicks](
    [click_id] [int] NOT NULL,
    [click_date] [datetime] NOT NULL,
    ...
    constraint [pk_clicks] nonclustered [click_id]);
go

create clustered index [cdx_clicks] on [dbo].[clicks]([click_date]); 
```

`[click_date]`此模型将服务于按范围 on和 on过滤的典型查询`[conversion_date]`。对于任何其他查询，答案将非常针对您的查询。

对于像您这样的 OLAP/DW 工作负载，关系行组织模型的有用程度是有限的。专业工具在这方面做得更好。[列存储索引](http://rusanu.com/2012/05/29/inside-the-sql-server-2012-columnstore-indexes/)可以提供惊人的快速响应，但它们[很难更新](http://rusanu.com/2011/07/13/how-to-update-a-table-with-a-columnstore-index/)。创建[MOLAP 多维数据集](http://msdn.microsoft.com/en-us/library/ms175646.aspx)也可以提供出色的结果，但这是一项严肃的项目任务。甚至还有专门的[时间序列数据库](http://en.wikipedia.org/wiki/Time_series_database)。

# sql - 使用 select sql 语句过滤表数据

> ID：16185584
> 
> 赞同：3
> 
> 时间：2013-04-24T07:10:23.747
> 
> 标签：sql, select, stored-procedures

我想使用 select 语句过滤表数据，我有四列，还有四个文本框可以在每列中启用搜索，当我在文本框中输入值时，我可以在任何框中输入值（es ) 我想返回与我输入的值匹配的记录，我该怎么做？

```
ALTER PROCEDURE dbo.test_search

    (
        @ID int,
    @FirstName nvarchar(50),
    @MiddleName nvarchar(50),
    @LastName nvarchar(50)
    )

AS
    SELECT     ID, FirstName, MiddleName, LastName
    FROM         StudentsInformation
    WHERE (@ID IS NULL OR StudentsInformation.ID = @ID) AND
           (@FirstName IS NULL OR StudentsInformation.FirstName = @FirstName )AND
           (@MiddleName IS NULL OR StudentsInformation.MiddleName = @MiddleName )AND
           (@LastName IS NULL OR StudentsInformation.LastName = @LastName )
    RETURN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:16:02.363

编辑：

```
SELECT 
id
, firstname
, middlename
, lastname    
FROM studentsinformation
WHERE id = @id        
OR firstname LIKE '%' + @firstname + '%'
    OR middlename LIKE '%' + @middlename + '%'
    OR lastname LIKE '%' + @lastname + '%' 
```

如果要选择对所有复选框都为真的记录，可以将 OR 交换为 AND。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:39:53.623

我希望这会奏效：

```
Select * from <table-name> 
where 
<Column-name1> Like 'TextBox1%'
or
<Column-name2> Like 'TextBox2%'
or
<Column-name3> Like 'TextBox2%'
or
<Column-name4> Like 'TextBox4%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:14:54.007

~~首先，您需要找到传递`text-box`了哪个**搜索字符串。**~~

根据文本框，查询可以写在**相关**的`column`.

```
select * from table_name where column like '%text-box value%' 
```

 ~~**编辑**

```
SELECT ID,FirstName,MiddleName,LastName
FROM  StudentsInformation
WHERE 1=1
ID=(case when @ID <>0 AND @ID IS NOT NULL then @ID else ID end)
and FirstName=(case when @FirstName<>'' and @FirstName IS NULL then @FirstName 
else FirstName)
and MiddleName=(case when @MiddleName<>'' and @MiddleName IS NULL then @MiddleName 
else MiddleName)
and LastName=(case when @LastName<>'' and @LastName IS NULL then @LastName 
else LastName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:15:46.323

语法取决于您使用的编程语言。

但一般来说：

```
string sql="select * from tableName where"

if((txt1.Text!="")&&(sql=="select * from tableName where")
sql=sql+"colName like % @txt1 %"
else
sql=sql+" and colName like % @txt1 %"

if((txt2.Text!="")&&(sql=="select * from tableName where")
sql=sql+"colName like % @txt2 %"
else
sql=sql+" and colName like % @txt2 %"

if((txt3.Text!="")&&(sql=="select * from tableName where")
sql=sql+"colName like % @txt3 %"
else
sql=sql+" and colName like % @txt3 %" 
```

这样做。~~

# sql - 如何从我的 excel 文件中删除一些行数超过 200k 的唯一记录？

> ID：16185589
> 
> 赞同：1
> 
> 时间：2013-04-24T07:10:47.177
> 
> 标签：sql, filter, ms-word, excel

我有一个 25 列的 excel 文件，其中包含大量数据，超过 200K 行。我拥有的一列具有唯一数据，没有任何重复。**某些**列具有重复值。即使对于同一客户，具有唯一数据的列也具有明显的唯一记录。有什么方法可以从**其他**列中具有**相同**值的**唯一列中****删除**记录。我希望这是有道理的，并且有人能够提供帮助。

 ******我会很感激的。

输入：
id 姓名 地址 手机号码 123 Ran street1 2585658 124 Ran street1 2585658 125 Kidfg Street4 8585558 126 gffhd wert 43646463 127 And street8 258455 128 and street8 258455

预期产出

id 姓名 地址 手机号码 123 Ran street1 2585658 125 Kidfg Street4 8585558 126 gffhd wert 43646463 127 And street8 258455

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:17:44.377

[办公网站](http://office.microsoft.com)上有[解决](http://office.microsoft.com/en-us/excel-help/filter-for-unique-values-or-remove-duplicate-values-HP010073943.aspx#BMremove_duplicate_values)您问题的方法，重复如下：

> 1.  选择单元格区域，或确保活动单元格在表格中。在数据选项卡的数据工具组中，单击删除重复项。
> 
> 执行以下一项或多项操作： 在列下，选择一列或多列。要快速选择所有列，请单击全选。要快速清除所有列，请单击取消全选。如果单元格或表格的范围包含许多列并且您只想选择几列，您可能会发现单击取消全选，然后在“列”下选择这些列更容易。
> 
> 单击确定。将显示一条消息，指示删除了多少重复值以及保留了多少唯一值，或者是否没有删除重复值。
> 
> 单击确定。******

# facebook - 为什么我打开应用程序时 facebook 会尝试发送 POST 请求？

> ID：16185590
> 
> 赞同：0
> 
> 时间：2013-04-24T07:10:48.430
> 
> 标签：facebook, facebook-apps

我刚刚在 facebook 上注册了我的应用程序。[当我尝试通过http://apps.facebook.com/myapplication/](http://apps.facebook.com/myapplication/)之类的浏览器打开它时，出现错误：

```
Cannot POST / 
```

我查看了我的 iframe 参数，发现上面的一个 iframe 发送带有隐藏字段 signed_request 的 POST 请求。这是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:30:35.033

您的问题与这篇[文章](https://stackoverflow.com/questions/9050230/why-is-the-first-request-to-a-facebook-iframe-app-canvas-page-a-post-request)有很大关系，facebook 需要使用身份验证用户信息向您的应用程序发送 signed_request。

您遇到的错误是因为您的应用程序不支持路由 '/' 的 post 方法

# ruby-on-rails - Marshal 没有正确序列化或反序列化嵌套的序列化属性

> ID：16185591
> 
> 赞同：1
> 
> 时间：2013-04-24T07:10:50.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是一个很难解释的问题，因为我真的不知道发生了什么。我制作了一个存储库，其中包含如何重现的说明：

[https://github.com/bricker/cache_nested_serialized_attributes](https://github.com/bricker/cache_nested_serialized_attributes)

基本上：

*   用户 has_many 帖子
*   帖子具有序列化属性：元数据

并重现：

```
users = User.first(2)
users.first.posts.first
users.last.posts.first
dump = Marshal.dump(users)
Marshal.load(dump)
=> [#<User id: 1, name: "bricker", created_at: "2013-04-24 06:26:03", updated_at: "2013-04-24 06:26:03">, 
    :@new_record] 
```

您可以在最后一行看到意外的输出。它似乎只在那些特定条件下发生。只是打电话`users.first.posts`工作正常。根本不打电话`.posts`工作正常。只有当我在转储之前加载用户的特定帖子时才会发生这种情况。

我注意到 Rails 4（正常工作）和 Rails 3.2.13（不工作）之间的主要区别是，`Marshal.dump(users)`在 Rails 3 中调用时，帖子被重新加载：

```
dump = Marshal.dump(users)
  Post Load (0.2ms)  SELECT "posts".* FROM "posts" WHERE "posts"."user_id" = 1
  Post Load (0.2ms)  SELECT "posts".* FROM "posts" WHERE "posts"."user_id" = 2 
```

...这在 Rails 4 中不会发生。

我希望我能解释得更好，但这是一个晦涩难懂的问题。如果您需要澄清，请提出问题，并查看或克隆 repo。

这是在 vanilla Rails 3.2.13 上测试和确认的（参见存储库）。这种行为在 Rails 4 中*不会*发生。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:49:39.333

此问题已在 Rails master 上修复，一个[简单的补丁](https://github.com/rails/rails/pull/9705)正在等待 3-2-stable 的审核。我已经在初始化程序中手动应用了补丁，它解决了这个问题。

补丁见这里：[https ://github.com/rails/rails/issues/10322#issuecomment-16913855](https://github.com/rails/rails/issues/10322#issuecomment-16913855)

# node.js - 循环内的 Node.js http 请求

> ID：16185593
> 
> 赞同：0
> 
> 时间：2013-04-24T07:10:56.290
> 
> 标签：node.js

我正在尝试定期从外部 API 加载一些数据，如下所示：

```
setInterval(function() {
  getData();
}, 60000);

function getData() {
  if (typeof someObject.data === 'object') {
    for (var prop in someObject.data) {
      if (prop === 1 || prop === 2) {
        var options = {
          host: 'somehost.com',
          path: '/somepath?param=' + prop
        };
        var req = http.request(options, function(res) {
          // EXECUTION NEVER REACHES THIS POINT ?!?!
          req.on('end', function() { alert('ended'); });
        });
        req.end();
      }
    }
  }
} 
```

如果我不做任何间隔和循环，那么对同一主机的这样的请求就可以完美地工作。但是，如果我尝试执行如上所示的操作，则请求永远不会调用其回调函数。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:43:54.347

我认为您的条件之一很糟糕，以下对我来说很好。

```
var http = require('http');

setInterval(function() {
  getData();
}, 1000);

function getData() {
  console.log('get');
  //if (typeof someObject.data === 'object') {
    console.log('get 1');
    //for (var prop in someObject.data) {
      console.log('get 2');
      //if (prop === 1 || prop === 2) {
        console.log('get 3');
        var options = {
          host: 'google.com',
          path: '/'
        };
        var req = http.request(options, function(res) {
          console.log('http request', res.statusCode);
          //req.on('end', function() { 
          //  console.log('ended', req); 
          //});
        });
        req.end();
      //}
    //}
  //}
} 
```

如果我是对的，你不需要`req.on('end')`，请求的回调在完成时调用。你也可以使用`http.get`，所以你不需要调用`req.end`

```
 var req = http.get( options.host, function(res) {
      console.log('http request', res.statusCode);
      //req.on('end', function() { 
      //  console.log('ended', req); 
      //});
    }).on('error', function( e ) {
      console.error( 'error', e );
    }) 
```

在[文档中查看更多信息](http://nodejs.org/api/http.html#http_http_request_options_callback)

希望我能帮上忙。

# python - 使用 QT 和 python 运行持续通信

> ID：16185594
> 
> 赞同：1
> 
> 时间：2013-04-24T07:11:05.427
> 
> 标签：python, qt, user-interface, qt-designer, serial-communication

我曾经在我的 GUIS 中使用 TKinter，现在正试图转移到 QT Designer。我也是基于事件的编程的新手。我想做的是在按下开始按钮后连续监听我的串行端口上的通信。

我想调用一个函数 update() 来接收数据并对其进行操作并将其写入文件。然后它必须在再次调用 update() 之前处理排队的任何其他事件。显然，如果我使用 while 循环，我的 CPU 使用率将达到 100%，我的 GUI 变得无响应。在 TKinter 中，我通过使用 after_idle 调用解决了这个问题（混乱），每当 GUI 空闲时调用 update()。

使用 QT 做这种事情的最佳实践方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:30:06.653

使用线程来监控串口。使用适当的机制与 UI（主）广告进行通信。

这样您就可以编写您的通信模块，而不必担心 UI 的事件基础性质。当然你仍然不能使用繁忙的while循环来监听串口。但是使用通常的 read() 方法超时是可以的。

队列非常适合将数据发送到 UI，您可以直接从您的 comm 线程写入文件。

# java - 排序数组列表 by Comparable Interface Actually I want to sort Array List of objects. I am using Comparable interface for this purpose. It is completely working But the problem is that when I am sorting is is giving these two problems. 问问题 问问题 2013-04-24T07:11:31.323 1490 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Actually I want to sort Array List of objects. I am using Comparable interface for this purpose. It is completely working But the problem is that when I am sorting is is giving these two problems. All name who have 1st letter capital are coming together on the top and all name who have 1st letter small are coming together on the bottom. All the sorted Capital letters word are coming together after that all the small letter words are coming at bottom together. Here is my bean MyShares.java public class Myshares implements Comparable<Myshares> { int id, parent; String name, path, type, shared_with, shared_or_not, upload_request; public int getParent() { return parent; } public void setParent(int parent) { this.parent = parent; } public String getUpload_request() { return upload_request; } public void setUpload_request(String upload_request) { this.upload_request = upload_request; } public int getId() { return id; } public void setId(int id) { this.id = id; } public String getName() { return name; } public void setName(String name) { this.name = name; } public String getPath() { return path; } public void setPath(String path) { this.path = path; } public String getType() { return type; } public void setType(String type) { this.type = type; } public String getShared_with() { return shared_with; } public void setShared_with(String shared_with) { this.shared_with = shared_with; } public String getShared_or_not() { return shared_or_not; } public void setShared_or_not(String shared_or_not) { this.shared_or_not = shared_or_not; } @Override public int compareTo(Myshares another) { return this.name.compareTo(another.getName()); } } This is the output I think it is based on ASCII code. I want a complete sorted list. Please take a look. variable should visible to only present function in xtext My output file: reg1 { field a field b } reg2 { field c field d } FOREACH ( X IN reg1 ) { X . a } FOREACH ( Y IN reg2 ) { Now after this if I do ctrl+space I will expect only Y should pop-up. But X and Y both are getting pop-up. How to restrict X to first FOREACH loop? out of first FOREACH loop X and its value should be erased. Please anyone suggest me how to implement this? The related grammar rule is: Model: entities+=Entity+ uses+=Use+ ; Entity: name=ID "{" attributes+=Attr+ "}" ; Attr: "field" name=ID ; Use: "FOREACH" var=conds "{" varref=[cond] "." attr=[Attr] "}" ; conds: "(" cond1=cond ")" | "," cond2=cond ; cond: name=ID "IN" entity=[Entity] ; Scope provider : public class MyDslScopeProvider extends AbstractDeclarativeScopeProvider { IScope scope_Use_attr(Use ctx , EReference ref) { return Scopes.scopeFor(ctx.getVarref().getEntity().getAttributes()); } } javasortingarraylistcomparable 4 5 回答 5 This answer is useful 6 如果您希望进行不区分大小写的排序，我建议您更改您的compareTo()方法以改为使用以下compareToIgnoreCase()方法String- 即： public int compareTo(Myshares another) { return this.name.compareToIgnoreCase(another.getName()); } 于 2013-04-24T07:14:20.590 回答 This answer is useful 5 改变 @Override public int compareTo(Myshares another) { return this.name.compareTo(another.getName()); } 至 @Override public int compareTo(Myshares another) { return String.CASE_INSENSITIVE_ORDER.compare(this.name, another.getName()); } 或使用nullPainter发布的更具可读性且非常好的解决方案。 于 2013-04-24T07:14:25.520 回答 This answer is useful 2 我给了你一些我写的现有比较器的来源，它可以进行完整的字母数字排序，并且可以处理名称中的数字，如 10、1 等 要使用它，你可以这样做： Collections.sort(myList,comparator); 另一种方法是在您的比较方法中将两边都小写。但只要你有数字或符号，它就会被丢弃，所以我会亲自使用比较器。 使用源代码检查 GIST：https ://gist.github.com/gondor/9328de5fa0cce130bc3b 于 2013-04-24T07:20:14.363 回答 This answer is useful 2 你应该调整你的compareTo()方法 return this.name.toLowerCase().compareTo(another.getName().toLowerCase()); 于 2013-04-24T07:15:04.970 回答 This answer is useful 2 将 compareTo 方法替换为： public int compareTo(Myshares another) { return this.name.compareToIgnoreCase(another.getName()); } 于 2013-04-24T07:15:53.263 回答 Related 2 php - 未找到元素 - SQL 语句看起来不错 1 python - 在 django admin 中保留用户的选择 6 ios - 如何在 iPad 的故事书应用中进行页面卷曲 0 html - 如何使用 Outlook 2010 命令行开关附加 HTML 文件而不将文件嵌入电子邮件本身？ 1 svn - 如何在 svn pre-commit hook 中访问标签名称 2 javascript - 如何在 Tizen SDK 中处理页面之间的数据存储/传递值？ 2 java-me - 如何在 J2me 中拨打电话并将 midlet 权限设置为始终允许？ 1 actionscript-3 - AdvancedDataGridColumnGroup 单元格颜色 2 c# - 使用 ASCII 字符绘制 2 个相邻的矩形 1 visual-studio-2012 - Visual Studio 2012 中使用 c# 连接数据库的 system.data.dll 文件中的错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16185601
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, sorting, arraylist, comparable

Actually I want to sort Array List of objects. I am using Comparable interface for this purpose. It is completely working But the problem is that when I am sorting is is giving these two problems.

1.  All name who have 1st letter capital are coming together on the top and all name who have 1st letter small are coming together on the bottom.

2.  All the sorted Capital letters word are coming together after that all the small letter words are coming at bottom together.

**Here is my bean**

**MyShares.java**

```
 public class Myshares implements Comparable<Myshares> {

        int id, parent;
        String name, path, type, shared_with, shared_or_not, upload_request;

        public int getParent() {
            return parent;
        }

        public void setParent(int parent) {
            this.parent = parent;
        }

        public String getUpload_request() {
            return upload_request;
        }

        public void setUpload_request(String upload_request) {
            this.upload_request = upload_request;
        }

        public int getId() {
            return id;
        }

        public void setId(int id) {
            this.id = id;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getPath() {
            return path;
        }

        public void setPath(String path) {
            this.path = path;
        }

        public String getType() {
            return type;
        }

        public void setType(String type) {
            this.type = type;
        }

        public String getShared_with() {
            return shared_with;
        }

        public void setShared_with(String shared_with) {
            this.shared_with = shared_with;
        }

        public String getShared_or_not() {
            return shared_or_not;
        }

        public void setShared_or_not(String shared_or_not) {
            this.shared_or_not = shared_or_not;
        }

        @Override
        public int compareTo(Myshares another) {

            return this.name.compareTo(another.getName());
        }

    } 
```

This is the output

![enter image description here](https://i.stack.imgur.com/qfDIG.png)

I think it is based on ASCII code. I want a complete sorted list. Please take a look.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T07:14:20.590

如果您希望进行不区分大小写的排序，我建议您更改您的`compareTo()`方法以改为使用以下`compareToIgnoreCase()`方法`String`- 即：

```
public int compareTo(Myshares another) {
    return this.name.compareToIgnoreCase(another.getName());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T07:14:25.520

改变

```
@Override
public int compareTo(Myshares another) {
    return this.name.compareTo(another.getName());
} 
```

至

```
@Override
public int compareTo(Myshares another) {
    return String.CASE_INSENSITIVE_ORDER.compare(this.name, another.getName());
} 
```

[或使用nullPainter](https://stackoverflow.com/a/16185665/1749753)发布的更具可读性且非常好的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T07:20:14.363

我给了你一些我写的现有比较器的来源，它可以进行完整的字母数字排序，并且可以处理名称中的数字，如 10、1 等

要使用它，你可以这样做： Collections.sort(myList,comparator);

另一种方法是在您的比较方法中将两边都小写。但只要你有数字或符号，它就会被丢弃，所以我会亲自使用比较器。

使用源代码检查 GIST：[https ://gist.github.com/gondor/9328de5fa0cce130bc3b](https://gist.github.com/gondor/9328de5fa0cce130bc3b)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T07:15:04.970

你应该调整你的`compareTo()`方法

```
return this.name.toLowerCase().compareTo(another.getName().toLowerCase()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T07:15:53.263

将 compareTo 方法替换为：

```
public int compareTo(Myshares another) {
  return this.name.compareToIgnoreCase(another.getName());
} 
```

# jquery - jQuery Endless Loop 更新状态

> ID：16185603
> 
> 赞同：2
> 
> 时间：2013-04-24T07:11:36.100
> 
> 标签：jquery, loops, while-loop

我有一个函数，每次从下拉列表中选择一个复选框 div 时都会调用它。以下是我的功能：

```
function arming(){
            $('#armText').change(function(){
                if ($('#armCB_1').is(':checked')){
                    $.post('/request', {key_pressed:"arming_status"}).done(function(reply){
                        $('#armStatus').empty().append("<h3>The Arming Status is " + reply).show();
                    });
                }
                else{
                    $('#armStatus').hide();
                }
            });
        } 
```

我的问题是，如何在一段时间内更新“armStatus”，并且只有在未选中复选框时才停止更新？另外，我希望程序的其余部分继续运行。是否可以使用 while(1) 作为无限循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:17:37.417

您可以创建一个自循环直到满足条件的函数：

```
function loopFunction() {
    var $ = jQuery,
    if (!$('#armCB_1').is(':checked')){
        //do something
        setTimeout(function() {
            loopFunction();
        }, 500);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:18:25.253

```
var $arm = $('#armStatus'),
    $checkbox = $('#armCB_1');

$checkbox.change(function() {
   $arm.toggle(this.checked);
})

setInterval(function(){
  if ($checkbox.is(':checked')) { // if ($arm.is(':visible')) { 
     $.post('/request', {key_pressed:"arming_status"}).done(function(reply){
           $arn.html("<h3>The Arming Status is " + reply).show();
     });
  }
}, 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:16:12.927

你有两个选择。设置间隔和设置超时。使用 setInterval，您可以使用 clearInterval 来结束循环。

例如

```
setInterval(function(){}, 200) 
```

函数中的代码每 200 毫秒运行一次。以下代码将满足您的要求

```
function arming() {
    var loop = setInterval(function () {
        $.post('/request', {
                key_pressed: "arming_status"
            }).done(function (reply) {
                $('#armStatus').empty().append("<h3>The Arming Status is " + reply).show();
            });
    }, 200)
    $('#armText').change(function () {
        if ($('#armCB_1').is(':checked')) {            
            clearInterval(loop);
        } else {
            $('#armStatus').hide();
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T07:25:33.597

您可以使用 window.setTimeout(action, n)。可以在此处找到更好的解决方案 [link]aktuell.de.selfhtml.org/artikel/javascript/timer/#timer（德语文本，只需查看源代码）。您将“只”必须自己禁用/启用此计时器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T08:23:44.277

所以我的程序的当前解决方案是：

```
function arming() {
var loop = setInterval(function () {
    $.post('/request', {
            key_pressed: "arming_status"
        }).done(function (reply) {
            $('#armStatus').empty().append("<h3>The Arming Status is " + reply).show();
        });
}, 200)
$('#armText').change(function () {
    if (!$('#armCB_1').is(':checked')) {            //if it is unchecked
        clearInterval(loop);
    } 
}); 
```

}

但是，如果我选中并取消选中复选框，它就不会再这样做了...

**更新 - 更好的解决方案：**

```
function arming() {
            var $arm = $('#armStatus'),
                $checkbox = $('#armCB_1');

            $checkbox.change(function() {
               $arm.toggle(this.checked);
            })

            setInterval(function(){
              if ($checkbox.is(':checked')) { 
                 $.post('/request', {key_pressed: "arming_status"}).done(function (reply) {
                    $('#armStatus').empty().append("<h3>The Arming Status is " + reply).show();
                 });
              }
              else {
                  $arm.hide();
              }
            }, 2000);
        } 
```

# jruby - 使用 java.util.UUID 在 Jruby 中生成 UUID？

> ID：16185604
> 
> 赞同：0
> 
> 时间：2013-04-24T07:11:36.360
> 
> 标签：jruby, uuid

是否有任何 Gem 可用于使用 java.util.UUID 在 Jruby 中生成 UUID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:17:08.400

我不知道 gem，但这是 JRuby 中的微不足道的代码：

```
$ jirb
irb(main):001:0> uuid = java.util.UUID.randomUUID
=> #<Java::JavaUtil::UUID:0x37a6af53>
irb(main):002:0> puts uuid
944b0019-d122-4f2b-9e85-23836e0f3d72 
```

# android - Sencha touch android 应用程序包仅适用于 api 级别 17

> ID：16185609
> 
> 赞同：0
> 
> 时间：2013-04-24T07:11:55.327
> 
> 标签：android, extjs, sencha-touch

我为 Android 创建了一个 Sencha Touch 应用程序。我正在使用 Sencha Architect 2.2.1，并使用 Sencha CMD 3.1.1.274 为 Android 打包它。我已经在 Android SDK 上安装了从第 14 级到第 17 级的所有 API。我使用命令提示符和以下命令打包了应用程序： sencha app package build packager.json 问题是它只会在我的输出文件夹中提供一个 APK，如果API 级别设置为 17。如果我保持 API 级别为 16 或 15，则会显示以下错误：

```
Error: Target id is not valid. Use 'android.bat list targets' to get the target
ids.

""C:/Program Files/Android/sdk\tools\android" create project --target android-16
 --name BeatlesLyrics --activity STActivity --path "build/apks\/" --package com.
mycompany.BeatlesLyrics"
Can not open destination file for writing
Failed to copy packager library
Failed to package application
Copy operation failed src=C:\Users\Shaishav\bin\Sencha\Cmd\3.1.1.274\stbuild\st-
res/android/\nimblekit.jar dst=build/apks\\libs\nimblekit.jar

[ERR] stbuild exited with non-zero code : 3 
```

我也在 android sdk 中安装了 API 16 和 15。那么为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T16:08:21.820

1.  使用 android.bat 列表目标
2.  记下“API 级别”
3.  在配置文件的“androidAPILevel”中使用相同的

# hadoop - 将 HDFS 数据写入外部磁盘/磁带

> ID：16185610
> 
> 赞同：1
> 
> 时间：2013-04-24T07:11:57.743
> 
> 标签：hadoop

我在 HDFS 上有 1TB 的数据。我的本地磁盘上没有那么多空间来将数据传输到我的本地。

有什么方法可以将 HDFS 数据直接写入外部硬盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:58:33.173

如果磁盘映射到您的机器上，您应该可以使用 -get 命令来完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T02:59:59.610

您连接的外部驱动器是另一个本地驱动器，它是固定硬盘驱动器的扩展。因此，您可以从命令行使用“hadoop fs”命令的 copyToLocal 选项。这是详细信息的链接

[http://hadoop.apache.org/docs/r0.18.3/hdfs_shell.html#copyToLocal](http://hadoop.apache.org/docs/r0.18.3/hdfs_shell.html#copyToLocal)

此外，Hadoop API 可用于将 HDFS 文件复制到本地驱动器。请参阅下面的 copyToLocalFile() 方法。

[http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#copyToLocalFile](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#copyToLocalFile)

# java - variable should visible to only present function in xtext

> ID：16185613
> 
> 赞同：1
> 
> 时间：2013-04-24T07:12:09.223
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-cdt, xtext

My output file:

```
reg1 {
field a field b
}

reg2 {
field c field d
}

FOREACH ( X IN reg1 ) {
X . a
}

FOREACH ( Y IN reg2 ) { 
```

Now after this if I do ctrl+space I will expect only Y should pop-up. But X and Y both are getting pop-up. How to restrict X to first FOREACH loop? out of first FOREACH loop X and its value should be erased. Please anyone suggest me how to implement this?

The related grammar rule is:

```
Model:
entities+=Entity+
uses+=Use+
;
Entity:
name=ID "{"
attributes+=Attr+
"}"
;
Attr:
"field" name=ID
;
Use:
"FOREACH" var=conds "{"
varref=[cond] "." attr=[Attr]
"}"
;
conds:
"(" cond1=cond ")"
| "," cond2=cond
;
cond:
name=ID "IN" entity=[Entity]
; 
```

Scope provider :

```
public class MyDslScopeProvider extends AbstractDeclarativeScopeProvider {
IScope scope_Use_attr(Use ctx , EReference ref) {
return Scopes.scopeFor(ctx.getVarref().getEntity().getAttributes());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:48:07.197

您是否在作用域实现中设置了断点？您为语法定义了范围实现，`attr`但没有为`varref`语法定义范围实现。沿着这些思路添加一个实现就可以了。

```
IScope scope_Use_varref(Use ctx, EReference ref) {
  return Scopes.scopeFor(Collections.singleton(ctx.getVar().getCond1()));
} 
```

另请注意，解析器规则`conds`似乎是虚假的。

# jsf-2 - primefaces commandbutton in dialog doesn't work

> ID：16185614
> 
> 赞同：0
> 
> 时间：2013-04-24T07:12:10.467
> 
> 标签：jsf-2, primefaces

Here's my .xhtml:

```
 <h:form id="form_edit"  prependId="false">
        <p:commandButton value="#{filt.add}"
                         ajax="true" 
                         icon="ui-icon-plus"
                         update=":messages :form_edit"
                         oncomplete="confDlg.show()"
                         action="#{agentsbean.clearSelectedAgent()}"/>
    </h:form>
    <p:dialog id="dialogId" widgetVar="confDlg" showEffect="fold" hideEffect="fade" 
              appendToBody="false">
        <h:form>
            <p:inputText value="#{agentsbean.selectedAgent.name==null?'null':agentsbean.selectedAgent.name}"/>
            <p:commandButton id="agConfirmSave" value="#{filt.save}" update=":messages @form"
                             actionListener="#{agentsbean.saveAgent}" oncomplete="confDlg.hide();"/>

        </h:form>
    </p:dialog> 
```

actionListener saveAgent :

```
public void saveAgent(ActionEvent actionEvent) {
    System.out.println("SaveAgent");
} 
```

When i click button (agConfirmSave) - dialog close, but action does not start!

*   primmefaces 3.5
*   Apache 7.0.35

**UPD** action work, if remove p:inputText or chang it by h:outputText!!! But i need input same text in dialog...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:23:07.080

这不是“setter”操作的有效值表达式。

```
<p:inputText value="#{agentsbean.selectedAgent.name==null?'null':agentsbean.selectedAgent.name}"/> 
```

如果您作为一名真正的开发人员已经对服务器日志和 HTTP 流量监视器付出了更多的关注和喜爱，那么您应该已经注意到`ELException`/`PropertyNotWritableException`基本上已经是整个答案了。

至于如何解决它；整个表达本身实际上没有任何意义。EL 已经是空安全的。摆脱不必要的条件检查：

```
<p:inputText value="#{agentsbean.selectedAgent.name}"/> 
```

# redis - Redis 事务回滚

> ID：16185620
> 
> 赞同：5
> 
> 时间：2013-04-24T07:12:18.760
> 
> 标签：redis, hiredis

我是redis的新手。我有一个应用程序，其中我有多个 redis 命令来进行事务。如果其中一个失败，redis 是否会像关系数据库一样回滚事务？用户有责任回滚事务吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:20:59.620

Redis 不像关系数据库那样回滚事务。

如果您有关系数据库背景，那么 Redis 命令可能会在事务期间失败，但 Redis 仍会执行其余事务而不是回滚，这对您来说可能看起来很奇怪。

但是，对于这种行为有很好的意见：

*   只有在使用错误的语法（并且在命令排队期间无法检测到问题）或针对持有错误数据类型的键调用时，Redis 命令才会失败：这意味着实际上失败的命令是编程错误的结果，以及一种在开发过程中很可能被检测到的错误，而不是在生产中。

*   Redis 内部简化且速度更快，因为它不需要回滚的能力。

**[`Why redis does not support rollback transactions`](http://redis.io/topics/transactions)**从文档和[**此处**](http://openmymind.net/You-Cant-Rollback-Redis-Transaction/)查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:20:01.683

[文档](http://redis.io/topics/transactions)在这里。Redis 不支持回滚。

# javascript - 如何使用 ExtJs 在窗口中显示网格？

> ID：16185631
> 
> 赞同：1
> 
> 时间：2013-04-24T07:12:54.937
> 
> 标签：javascript, extjs

我的 ExtJs 应用程序有问题。
我想在窗口中显示网格。我说：

立柱型号：

```
 var markCm = new Ext.grid.ColumnModel({
            columns:[{
                header: 'Аннотация',
                dataIndex: 'annotation',
                width: 230,
            },{
                header: 'Дата',
                dataIndex: 'mark_date',
                width: 30
            },{
                header: 'Статус',
                dataIndex: 'status',
                width: 30
            }],
            defaults: {
                flex: 1
            }
        });
        console.log("1"); 
```

网格：

```
 var markGrid = new Ext.grid.GridPanel({
            //store: markStore,
            cm: markCm, 
            selModel: new Ext.grid.RowSelectionModel(),
            stripeRows : true,
            //height: 400,
            //loadMask: true,
            id: 'markGrid',
            autoScroll: true,
        }); 
```

窗户：

```
 console.log("2");
        var markWin = new Ext.Window({
            id: 'markWindow', 
            layout: 'fit',
            title:'Спискок маркеров',
            autoScroll:false,
            //width:600,
            items:[markGrid],
            listeners:{
            }
        });
        console.log("3");
        markWin.show();
        console.log("4"); 
```

在萤火虫中我看到：

```
1
2
3
TypeError: this.ds is undefined
...ng(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(h);k.params=l}e... 
```

有什么问题？

**更新**

[我尝试像在这个例子](http://try.sencha.com/extjs/4.0.7/docs/Ext.window.Window.1/viewer.html)中一样添加商店

```
 var markGrid = new Ext.grid.GridPanel({
            store: Ext.create('Ext.data.ArrayStore', {}),
            cm: markCm, 
            selModel: new Ext.grid.RowSelectionModel(),
            stripeRows : true,
            //height: 400,
            //loadMask: true,
            id: 'markGrid',
            autoScroll: true,
        }); 
```

并得到错误：

```
1
TypeError: d[a] is not a constructor
...ng(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(h);k.params=l}e... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:38:46.290

你错过了一家商店。每个网格都需要一个商店。（this.ds 未定义 => ds 可能是 dataStore）

我不知道你正在使用什么版本。（通过`Ext.versions.extjs.version`在控制台中输入来检查）

如果您正在使用最新的 ExtJS 版本 (4.x)，最好使用`Ext.define`而`Ext.create`不是使用“新”关键字 :)

这是一个[工作小提琴](http://jsfiddle.net/Vandeplas/CUsL6/)

```
Ext.onReady(function () {
    Ext.define('MyApp.model.Mark', {
        extend: 'Ext.data.Model',
        fields: [{
            name: 'id',
            type: 'int'
        }, {
            name: 'annotation',
            type: 'string'
        }, {
            name: 'mark_date',
            type: 'date'
        }, {
            name: 'status',
            type: 'string'
        }]
    });
    Ext.define('MyApp.store.Marks', {
        extend: 'Ext.data.Store',

        //best to require the model if you  put it in separate files
        requires: ['MyApp.model.Mark'],
        model: 'MyApp.model.Mark',
        storeId: 'markStore',
        data: {
            items: [{
                id: 1,
                annotation: "Test",
                mark_date: "2013-04-24 9:28:00",
                status: "Done"
            }]
        },
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: 'items'
            }
        }
    });

    var grid = Ext.create('Ext.grid.Panel', {
        itemId: 'markGrid',
        store: Ext.create('MyApp.store.Marks'),
        loadMask: true,
        width: 400,
        columns: [{
            header: 'Аннотация',
            dataIndex: 'annotation',
            width: 230,
            flex: 1
        }, {
            header: 'Дата',
            dataIndex: 'mark_date',
            width: 30,
            flex: 1
        }, {
            header: 'Статус',
            dataIndex: 'status',
            width: 30,
            flex: 1
        }]
    });

    var window = Ext.create('Ext.window.Window', {
        renderTo: Ext.getBody(),
        items: [grid]
    });

    window.show();
}); 
```

**更新**

您正在使用 Ext 4.x 中的示例 =>`Ext.data.ArrayStore` 无法通过 Ext.create 创建，但在 Ext 版本 < 4.x 中使用 new 关键字 :)

[http://jsfiddle.net/Vandeplas/BZUxa/](http://jsfiddle.net/Vandeplas/BZUxa/)

```
 Ext.onReady(function () {
     var markCm = new Ext.grid.ColumnModel({
         columns: [{
             header: 'Аннотация',
             dataIndex: 'annotation',
             width: 230,
         }, {
             header: 'Дата',
             dataIndex: 'mark_date',
             width: 30
         }, {
             header: 'Статус',
             dataIndex: 'status',
             width: 30
         }],
         defaults: {
             flex: 1
         }
     });
     var markGrid = new Ext.grid.GridPanel({
         store: new Ext.data.ArrayStore({}),
         cm: markCm,
         selModel: new Ext.grid.RowSelectionModel(),
         stripeRows: true,
         //height: 400,
         //loadMask: true,
         id: 'markGrid',
         autoScroll: true,
     });
     var markWin = new Ext.Window({
         id: 'markWindow',
         layout: 'fit',
         title: 'Спискок маркеров',
         autoScroll: false,
         //width:600,
         items: [markGrid],
         listeners: {}
     });

     markWin.show();
 }); 
```

# actionscript-3 - 如何在 adobe Air 中处理 HTML 组件中的外部链接？

> ID：16185635
> 
> 赞同：1
> 
> 时间：2013-04-24T07:13:00.060
> 
> 标签：actionscript-3, apache-flex, air, flex4, flex3

我有一个 AIR 项目，它有一个 HTML 组件。这个 HTML 组件加载一个 URL。加载指定页面后，页面上的一些链接需要在单独的 HTML 选项卡中打开。我的问题是当我点击这些链接中的任何一个时，什么都没有发生。我该如何解决这个问题。我将 HTML 组件创建为：

```
<mx:HTML id="htmlPage" left="0" top="35" right="0" bottom="0" 
    contentBackgroundColor="#1B1B1B"
    paintsDefaultBackground="true"
    location="page URL"        
    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:09:03.710

```
htmlPage.htmlLoader.navigateInSystemBrowser = true 
```

# css - 移动 safari 的硬件加速 CSS 属性列表

> ID：16185639
> 
> 赞同：5
> 
> 时间：2013-04-24T07:13:09.553
> 
> 标签：css, ios6, hardware-acceleration

我在 iOS 6 中查看了 MobileSafari 的更改日志，其中指出：

> WebKit 不再总是使用 -webkit-transform: preserve-3d 选项为元素创建硬件加速层。作者应该停止使用此选项作为获得硬件加速的一种方式

是否存在任何硬件加速 CSS 属性列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T07:16:06.590

GPU 可以加速文档的这些方面：

*   总体布局合成
*   CSS3 过渡
*   CSS3 3D 变换
*   画布绘图
*   WebGL 3D 绘图

更多关于这里[http://www.html5rocks.com/en/tutorials/speed/html5/](http://www.html5rocks.com/en/tutorials/speed/html5/)

也许这篇文章也会有所帮助[http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/](http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/)

而这个[http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/](http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-17T11:59:19.757

Paul Lewis 和 Paul Irish 有一篇关于高性能动画的非常好的文章。

> “我们将直接切入正题。现代浏览器可以非常便宜地为四件事设置动画：位置、缩放、旋转和不透明度。如果你为其他任何东西设置动画，风险自负，而且你很可能不会去达到如*丝般顺滑的 60fps*。”

# **浏览器可以廉价制作动画的 4 件事**

**位置**- 变换：translate( *n* px, *n* px);

**比例** - 变换：比例（*n*）；

**旋转**- 变换：旋转（*n*度）；

**不透明度**- 不透明度：*0..1*；

可能需要 TranslateZ() 或 Translate3D()。

* * *

*来源：[http ://www.html5rocks.com/en/tutorials/speed/high-performance-animations/](http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/)*

# octave - Emacs：八度发送行抄送不起作用

> ID：16185640
> 
> 赞同：2
> 
> 时间：2013-04-24T07:13:14.107
> 
> 标签：octave, emacs24

我只是在我的 Emacs 上设置了 Octave，但是我不知道如何将行发送到 Octave 缓冲区......

在 Mx run-octave 之后，我的光标在 a = 1 行上，我输入`C-c i l`它不起作用..

1）`C-c C-i`然后它显示： Cc TAB is undefined ---------- 为什么 Ci 在这里被识别为 TAB？

2）`C-c i`然后它显示： Cc i 未定义

在我输入之前，两个警告都亮了`l`！

任何人都可以帮忙吗？非常感谢任何回应！

PS 我的 octave-mod.el 文件有以下定义：

```
 (define-key map "\C-c\C-il" 'octave-send-line) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-10T17:53:18.603

网上提到的键绑定已经过时了。`'octave-send-line`现在`C-c TAB C-l` 您可以通过 找到所有键绑定`C-h m( or F1 m)`。我在下面粘贴了其中一些以供快速参考。快乐的 Emacs 编辑

```
C-c TAB C-b octave-send-block
C-c TAB C-f octave-send-defun
C-c TAB C-h octave-hide-process-buffer
C-c TAB C-k octave-kill-process
C-c TAB C-l octave-send-line
C-c TAB C-r octave-send-region
C-c TAB C-s octave-show-process-buffer
C-c TAB b   octave-send-block
C-c TAB f   octave-send-defun
C-c TAB h   octave-hide-process-buffer
C-c TAB k   octave-kill-process
C-c TAB l   octave-send-line
C-c TAB r   octave-send-region
C-c TAB s   octave-show-process-buffer 
```

# java - 尝试在 jsp 页面中显示 xy 图形时出错

> ID：16185641
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:13:18.493
> 
> 标签：java, mysql, jsp, servlets, graph

嗨，我有数据库表 job_status，其中包含日期、时间和速度字段。我想在 jsp 页面上显示速度和时间之间的图表，但我遇到错误，所以在这里发布问题。请帮助我

```
<%// required packages  %>
<%@ page import ="DB.*" %>
<%@ page import="java.awt.Image" %>
<%@ page import="java.awt.*"%>
<%@ page import="java.text.SimpleDateFormat"%>
<%@ page import="java.awt.BasicStroke"%>
<%@ page import ="org.jfree.ui.ApplicationFrame"%>
<%@ page import="java.io.*" %>
<%@ page import="java.io.File"%>
<%@ page import="org.jfree.chart.*" %>
<%@ page import="org.jfree.chart.axis.*" %>
<%@ page import="org.jfree.chart.entity.*" %>
<%@ page import="org.jfree.chart.labels.*" %>
<%@ page import="org.jfree.chart.plot.*" %>
<%@ page import="org.jfree.chart.renderer.category.*" %>
<%@ page import="org.jfree.chart.urls.*" %>
<%@ page import="org.jfree.data.category.*" %>
<%@ page import="org.jfree.data.general.*" %>
<%@ page import="org.jfree.data.time.Minute"%>
<%@ page import="org.jfree.data.time.Hour"%>
<%@ page import="org.jfree.data.time.TimeSeries"%>
<%@ page import="org.jfree.data.time.TimeSeriesCollection"%>
<%@ page import="org.jfree.data.xy.XYDataset"%>
<%@ page import="org.jfree.chart.plot.XYPlot"%>
<%@ page import="org.jfree.chart.renderer.xy.StandardXYItemRenderer"%>
<%@ page import="org.jfree.chart.renderer.xy.XYItemRenderer"%>
 <%@ page import=  "java.sql.Connection" %>
<%@ page import  ="java.sql.DriverManager" %>
<%@ page import = "java.sql.SQLException" %>
<%@ page import = "java.sql.PreparedStatement" %>
<%@ page import = "java.sql.ResultSet" %>
<%@ page import = "java.sql.Statement" %>
 <%@ page import=  "javax.servlet.*" %>
<%@ page import  ="javax.servlet.http.*" %>

<%@ page import="java.awt.image.BufferedImage"%>
<%
 try
 {
 File image = File.createTempFile("image", "tmp");

 //chart class instance
Fms fm = new Fms("Graph");

JFreeChart chart = fm.createChart(fm.dataset);
 ChartUtilities.saveChartAsPNG(image, chart, 500, 400);
//get input stream
 FileInputStream fileInStream = new FileInputStream(image);
//output stream foe returning chart as image
 OutputStream outStream = response.getOutputStream();
 long fileLength;
 byte[] byteStream;
 fileLength = image.length();
 byteStream = new byte[(int)fileLength];
//read chart image
 fileInStream.read(byteStream, 0, (int)fileLength);
//returns chart image whenever called
 response.setContentType("image/png");
 response.setContentLength((int)fileLength);
 response.setHeader("Cache-Control","no-store,no-cache, must-revalidate, post-check=0, pre-check=0");
 response.setHeader("Pragma", "no-cache");
 fileInStream.close();
 outStream.write(byteStream);
 outStream.flush();
 outStream.close();
 }
 catch (IOException e)
 {
 System.err.println("Problem occurred creating chart.");
 }
%>
<%! public class Fms extends ApplicationFrame {  
//Main class
   XYDataset dataset= null;
   public Fms(final String title) {
        super(title);
      dataset= createDataset();
        final JFreeChart chart = createChart(dataset);
        final ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(700, 570));
        chartPanel.setMouseZoomable(true, false);
        setContentPane(chartPanel);
    }
//chart creation method
   JFreeChart createChart(final XYDataset dataset) {
        final JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Speed Chart",
            "Time",
            "Speed",
            dataset,
            true,
            true,
            false
        );
        chart.setBackgroundPaint(Color.white);
       final XYPlot plot = chart.getXYPlot();
        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);
        plot.setDomainCrosshairVisible(true);
        plot.setRangeCrosshairVisible(false);
        final XYItemRenderer renderer = plot.getRenderer();
        if (renderer instanceof StandardXYItemRenderer) {
            final StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
            rr.setShapesFilled(true);
            renderer.setSeriesStroke(0, new BasicStroke(1.0f));
            renderer.setSeriesStroke(1, new BasicStroke(1.0f));
           }      
        final DateAxis axis = (DateAxis) plot.getDomainAxis();
        axis.setDateFormatOverride(new SimpleDateFormat("dd:MM"));
        try{
        final ChartRenderingInfo info = new ChartRenderingInfo
(new StandardEntityCollection());
final File file1 = new File("/barchart.png");
ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);
        }catch(Exception e){}
        return chart;
    }  
//data set generation method
    private XYDataset createDataset() {
        final TimeSeriesCollection dataset = new TimeSeriesCollection();
        dataset.setDomainIsPointsInTime(true);      
        final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
         int str = 0;
         int i =0,j= 0 ;
         String str1 = null;
        try{         
            DataBaseConnection db= new DataBaseConnection();
      Connection con=db.connet();
      PreparedStatement st;  
      Statement stmt = con.createStatement();
      String query = "Select * from Job_Status";
      stmt.executeQuery(query);
       ResultSet rs = stmt.executeQuery(query);      
           while( rs.next() )
        {                
         str1= rs.getString("Time");
         String sa = str1.substring(11,13);
         String ha = str1.substring(14,16);
        str= rs.getInt("Speed");
        j=Integer.parseInt(sa);
        i=Integer.parseInt(ha);
        String date = rs.getString("Date");
        String y = date.substring(0,4);
         String m = date.substring(5,7);
          String d = date.substring(8,10);
         s1.add(new Minute(i, j, Integer.parseInt(d), Integer.parseInt(m), Integer.parseInt(y)), str);
          }
          }
          catch(Exception e)
          {            
          }
         System.out.println(str1.substring(11,13));
          System.out.println(str1.substring(14,16)+"\t"+str1);                
        dataset.addSeries(s1);  
        return dataset;
    }
    }
%> 
```

错误是

```
HTTP Status 500 - Unable to compile class for JSP:

type Exception report

message Unable to compile class for JSP:

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: [19] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.ui.ApplicationFrame resolves to a package

An error occurred at line: [31] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.data.time.Minute resolves to a package

An error occurred at line: [32] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.data.time.Hour resolves to a package

An error occurred at line: [33] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.data.time.TimeSeries resolves to a package

An error occurred at line: [34] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.data.time.TimeSeriesCollection resolves to a package

An error occurred at line: [35] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.data.xy.XYDataset resolves to a package

An error occurred at line: [36] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.chart.plot.XYPlot resolves to a package

An error occurred at line: [37] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.chart.renderer.xy.StandardXYItemRenderer resolves to a package

An error occurred at line: [38] in the generated java file: [/home/sukanth/workspace1/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/project1/org/apache/jsp/chart_jsp.java]
Only a type can be imported. org.jfree.chart.renderer.xy.XYItemRenderer resolves to a package

An error occurred at line: 73 in the jsp file: /chart.jsp
ApplicationFrame cannot be resolved to a type
70:  System.err.println("Problem occurred creating chart.");
71:  }
72: %>
73: <%! public class Fms extends ApplicationFrame {  
74: //Main class
75:    XYDataset dataset= null;
76:    public Fms(final String title) {

An error occurred at line: 75 in the jsp file: /chart.jsp
XYDataset cannot be resolved to a type
72: %>
73: <%! public class Fms extends ApplicationFrame {  
74: //Main class
75:    XYDataset dataset= null;
76:    public Fms(final String title) {
77:         super(title);
78:       dataset= createDataset();

An error occurred at line: 78 in the jsp file: /chart.jsp
dataset cannot be resolved to a variable
75:    XYDataset dataset= null;
76:    public Fms(final String title) {
77:         super(title);
78:       dataset= createDataset();
79:         final JFreeChart chart = createChart(dataset);
80:         final ChartPanel chartPanel = new ChartPanel(chart);
81:         chartPanel.setPreferredSize(new java.awt.Dimension(700, 570));

An error occurred at line: 78 in the jsp file: /chart.jsp
The method createDataset() is undefined for the type chart_jsp.Fms
75:    XYDataset dataset= null;
76:    public Fms(final String title) {
77:         super(title);
78:       dataset= createDataset();
79:         final JFreeChart chart = createChart(dataset);
80:         final ChartPanel chartPanel = new ChartPanel(chart);
81:         chartPanel.setPreferredSize(new java.awt.Dimension(700, 570));

An error occurred at line: 79 in the jsp file: /chart.jsp
JFreeChart cannot be resolved to a type
76:    public Fms(final String title) {
77:         super(title);
78:       dataset= createDataset();
79:         final JFreeChart chart = createChart(dataset);
80:         final ChartPanel chartPanel = new ChartPanel(chart);
81:         chartPanel.setPreferredSize(new java.awt.Dimension(700, 570));
82:         chartPanel.setMouseZoomable(true, false);

An error occurred at line: 79 in the jsp file: /chart.jsp
dataset cannot be resolved to a variable
76:    public Fms(final String title) {
77:         super(title);
78:       dataset= createDataset();
79:         final JFreeChart chart = createChart(dataset);
80:         final ChartPanel chartPanel = new ChartPanel(chart);
81:         chartPanel.setPreferredSize(new java.awt.Dimension(700, 570));
82:         chartPanel.setMouseZoomable(true, false);

An error occurred at line: 80 in the jsp file: /chart.jsp
ChartPanel cannot be resolved to a type
77:         super(title);
78:       dataset= createDataset();
79:         final JFreeChart chart = createChart(dataset);
80:         final ChartPanel chartPanel = new ChartPanel(chart);
81:         chartPanel.setPreferredSize(new java.awt.Dimension(700, 570));
82:         chartPanel.setMouseZoomable(true, false);
83:         setContentPane(chartPanel);

An error occurred at line: 80 in the jsp file: /chart.jsp
ChartPanel cannot be resolved to a type
77:         super(title);
78:       dataset= createDataset();
79:         final JFreeChart chart = createChart(dataset);
80:         final ChartPanel chartPanel = new ChartPanel(chart);
81:         chartPanel.setPreferredSize(new java.awt.Dimension(700, 570));
82:         chartPanel.setMouseZoomable(true, false);
83:         setContentPane(chartPanel);

An error occurred at line: 86 in the jsp file: /chart.jsp
JFreeChart cannot be resolved to a type
83:         setContentPane(chartPanel);
84:     }
85: //chart creation method
86:    JFreeChart createChart(final XYDataset dataset) {
87:         final JFreeChart chart = ChartFactory.createTimeSeriesChart(
88:             "Speed Chart",
89:             "Time",

An error occurred at line: 86 in the jsp file: /chart.jsp
XYDataset cannot be resolved to a type
83:         setContentPane(chartPanel);
84:     }
85: //chart creation method
86:    JFreeChart createChart(final XYDataset dataset) {
87:         final JFreeChart chart = ChartFactory.createTimeSeriesChart(
88:             "Speed Chart",
89:             "Time",

An error occurred at line: 87 in the jsp file: /chart.jsp
JFreeChart cannot be resolved to a type
84:     }
85: //chart creation method
86:    JFreeChart createChart(final XYDataset dataset) {
87:         final JFreeChart chart = ChartFactory.createTimeSeriesChart(
88:             "Speed Chart",
89:             "Time",
90:             "Speed",

An error occurred at line: 87 in the jsp file: /chart.jsp
ChartFactory cannot be resolved
84:     }
85: //chart creation method
86:    JFreeChart createChart(final XYDataset dataset) {
87:         final JFreeChart chart = ChartFactory.createTimeSeriesChart(
88:             "Speed Chart",
89:             "Time",
90:             "Speed",

An error occurred at line: 97 in the jsp file: /chart.jsp
XYPlot cannot be resolved to a type
94:             false
95:         );
96:         chart.setBackgroundPaint(Color.white);
97:        final XYPlot plot = chart.getXYPlot();
98:         plot.setBackgroundPaint(Color.lightGray);
99:         plot.setDomainGridlinePaint(Color.white);
100:         plot.setRangeGridlinePaint(Color.white);

An error occurred at line: 103 in the jsp file: /chart.jsp
XYItemRenderer cannot be resolved to a type
100:         plot.setRangeGridlinePaint(Color.white);
101:         plot.setDomainCrosshairVisible(true);
102:         plot.setRangeCrosshairVisible(false);
103:         final XYItemRenderer renderer = plot.getRenderer();
104:         if (renderer instanceof StandardXYItemRenderer) {
105:             final StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
106:             rr.setShapesFilled(true);

An error occurred at line: 104 in the jsp file: /chart.jsp
StandardXYItemRenderer cannot be resolved to a type
101:         plot.setDomainCrosshairVisible(true);
102:         plot.setRangeCrosshairVisible(false);
103:         final XYItemRenderer renderer = plot.getRenderer();
104:         if (renderer instanceof StandardXYItemRenderer) {
105:             final StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
106:             rr.setShapesFilled(true);
107:             renderer.setSeriesStroke(0, new BasicStroke(1.0f));

An error occurred at line: 105 in the jsp file: /chart.jsp
StandardXYItemRenderer cannot be resolved to a type
102:         plot.setRangeCrosshairVisible(false);
103:         final XYItemRenderer renderer = plot.getRenderer();
104:         if (renderer instanceof StandardXYItemRenderer) {
105:             final StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
106:             rr.setShapesFilled(true);
107:             renderer.setSeriesStroke(0, new BasicStroke(1.0f));
108:             renderer.setSeriesStroke(1, new BasicStroke(1.0f));

An error occurred at line: 105 in the jsp file: /chart.jsp
StandardXYItemRenderer cannot be resolved to a type
102:         plot.setRangeCrosshairVisible(false);
103:         final XYItemRenderer renderer = plot.getRenderer();
104:         if (renderer instanceof StandardXYItemRenderer) {
105:             final StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
106:             rr.setShapesFilled(true);
107:             renderer.setSeriesStroke(0, new BasicStroke(1.0f));
108:             renderer.setSeriesStroke(1, new BasicStroke(1.0f));

An error occurred at line: 110 in the jsp file: /chart.jsp
DateAxis cannot be resolved to a type
107:             renderer.setSeriesStroke(0, new BasicStroke(1.0f));
108:             renderer.setSeriesStroke(1, new BasicStroke(1.0f));
109:            }      
110:         final DateAxis axis = (DateAxis) plot.getDomainAxis();
111:         axis.setDateFormatOverride(new SimpleDateFormat("dd:MM"));
112:         try{
113:         final ChartRenderingInfo info = new ChartRenderingInfo

An error occurred at line: 110 in the jsp file: /chart.jsp
DateAxis cannot be resolved to a type
107:             renderer.setSeriesStroke(0, new BasicStroke(1.0f));
108:             renderer.setSeriesStroke(1, new BasicStroke(1.0f));
109:            }      
110:         final DateAxis axis = (DateAxis) plot.getDomainAxis();
111:         axis.setDateFormatOverride(new SimpleDateFormat("dd:MM"));
112:         try{
113:         final ChartRenderingInfo info = new ChartRenderingInfo

An error occurred at line: 113 in the jsp file: /chart.jsp
ChartRenderingInfo cannot be resolved to a type
110:         final DateAxis axis = (DateAxis) plot.getDomainAxis();
111:         axis.setDateFormatOverride(new SimpleDateFormat("dd:MM"));
112:         try{
113:         final ChartRenderingInfo info = new ChartRenderingInfo
114: (new StandardEntityCollection());
115: final File file1 = new File("/barchart.png");
116: ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);

An error occurred at line: 113 in the jsp file: /chart.jsp
ChartRenderingInfo cannot be resolved to a type
110:         final DateAxis axis = (DateAxis) plot.getDomainAxis();
111:         axis.setDateFormatOverride(new SimpleDateFormat("dd:MM"));
112:         try{
113:         final ChartRenderingInfo info = new ChartRenderingInfo
114: (new StandardEntityCollection());
115: final File file1 = new File("/barchart.png");
116: ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);

An error occurred at line: 114 in the jsp file: /chart.jsp
StandardEntityCollection cannot be resolved to a type
111:         axis.setDateFormatOverride(new SimpleDateFormat("dd:MM"));
112:         try{
113:         final ChartRenderingInfo info = new ChartRenderingInfo
114: (new StandardEntityCollection());
115: final File file1 = new File("/barchart.png");
116: ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);
117:         }catch(Exception e){}

An error occurred at line: 116 in the jsp file: /chart.jsp
ChartUtilities cannot be resolved
113:         final ChartRenderingInfo info = new ChartRenderingInfo
114: (new StandardEntityCollection());
115: final File file1 = new File("/barchart.png");
116: ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);
117:         }catch(Exception e){}
118:         return chart;
119:     }  

An error occurred at line: 121 in the jsp file: /chart.jsp
XYDataset cannot be resolved to a type
118:         return chart;
119:     }  
120: //data set generation method
121:     private XYDataset createDataset() {
122:         final TimeSeriesCollection dataset = new TimeSeriesCollection();
123:         dataset.setDomainIsPointsInTime(true);      
124:         final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);

An error occurred at line: 122 in the jsp file: /chart.jsp
TimeSeriesCollection cannot be resolved to a type
119:     }  
120: //data set generation method
121:     private XYDataset createDataset() {
122:         final TimeSeriesCollection dataset = new TimeSeriesCollection();
123:         dataset.setDomainIsPointsInTime(true);      
124:         final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
125:          int str = 0;

An error occurred at line: 122 in the jsp file: /chart.jsp
TimeSeriesCollection cannot be resolved to a type
119:     }  
120: //data set generation method
121:     private XYDataset createDataset() {
122:         final TimeSeriesCollection dataset = new TimeSeriesCollection();
123:         dataset.setDomainIsPointsInTime(true);      
124:         final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
125:          int str = 0;

An error occurred at line: 124 in the jsp file: /chart.jsp
TimeSeries cannot be resolved to a type
121:     private XYDataset createDataset() {
122:         final TimeSeriesCollection dataset = new TimeSeriesCollection();
123:         dataset.setDomainIsPointsInTime(true);      
124:         final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
125:          int str = 0;
126:          int i =0,j= 0 ;
127:          String str1 = null;

An error occurred at line: 124 in the jsp file: /chart.jsp
TimeSeries cannot be resolved to a type
121:     private XYDataset createDataset() {
122:         final TimeSeriesCollection dataset = new TimeSeriesCollection();
123:         dataset.setDomainIsPointsInTime(true);      
124:         final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
125:          int str = 0;
126:          int i =0,j= 0 ;
127:          String str1 = null;

An error occurred at line: 124 in the jsp file: /chart.jsp
Minute cannot be resolved to a type
121:     private XYDataset createDataset() {
122:         final TimeSeriesCollection dataset = new TimeSeriesCollection();
123:         dataset.setDomainIsPointsInTime(true);      
124:         final TimeSeries s1 = new TimeSeries("Series 1", Minute.class);
125:          int str = 0;
126:          int i =0,j= 0 ;
127:          String str1 = null;

An error occurred at line: 148 in the jsp file: /chart.jsp
Minute cannot be resolved to a type
145:         String y = date.substring(0,4);
146:          String m = date.substring(5,7);
147:           String d = date.substring(8,10);
148:          s1.add(new Minute(i, j, Integer.parseInt(d), Integer.parseInt(m), Integer.parseInt(y)), str);
149:           }
150:           }
151:           catch(Exception e)

An error occurred at line: 46 in the jsp file: /chart.jsp
JFreeChart cannot be resolved to a type
43:  //chart class instance
44: Fms fm = new Fms("Graph");
45: 
46: JFreeChart chart = fm.createChart(fm.dataset);
47:  ChartUtilities.saveChartAsPNG(image, chart, 500, 400);
48: //get input stream
49:  FileInputStream fileInStream = new FileInputStream(image);

An error occurred at line: 46 in the jsp file: /chart.jsp
dataset cannot be resolved or is not a field
43:  //chart class instance
44: Fms fm = new Fms("Graph");
45: 
46: JFreeChart chart = fm.createChart(fm.dataset);
47:  ChartUtilities.saveChartAsPNG(image, chart, 500, 400);
48: //get input stream
49:  FileInputStream fileInStream = new FileInputStream(image);

An error occurred at line: 47 in the jsp file: /chart.jsp
ChartUtilities cannot be resolved
44: Fms fm = new Fms("Graph");
45: 
46: JFreeChart chart = fm.createChart(fm.dataset);
47:  ChartUtilities.saveChartAsPNG(image, chart, 500, 400);
48: //get input stream
49:  FileInputStream fileInStream = new FileInputStream(image);
50: //output stream foe returning chart as image

Stacktrace:
    org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:103)
    org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
    org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:468)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.37 logs.

Apache Tomcat/7.0.37 
```

**编辑**没有**编译错误**只有运行时错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T02:43:11.637

Please please please write this as a servlet. You will get multiple benefits including the IDE showing you compile errors.

You state "there are no Compilations errors there are only runtime errors" but the errors are compile errors, happening when the jsp is attempted to be compiled.

# jsf - JSF 数据表和文件上传（文件上传问题）

> ID：16185642
> 
> 赞同：0
> 
> 时间：2013-04-24T07:13:21.260
> 
> 标签：jsf, file-upload, datatable, javabeans

请让我知道你的建议。我想构建具有特定设计的 fileUpload，并且在获取 uploadFile 时遇到问题。

我的设计：

![在此处输入图像描述](https://i.stack.imgur.com/BkvY1.png)

数据模型类：

```
@Named
@SessionScoped
public class NJDataModel implements Serializable {
    private static final long serialVersionUID = 1L;

    private String sectionName;
    private UploadedFile file;

    public NJDataModel(String sectionName) {
        this.sectionName = sectionName;
    }

    public String getSectionName() {
        return sectionName;
    }

    public void setSectionName(String sectionName) {
        this.sectionName = sectionName;
    }

    public UploadedFile getFile() {
        return file;
    }

    public void setFile(UploadedFile file) {
        this.file = file;
    } 
```

}

数据类：

```
@ManagedBean(name = "NJData")
@SessionScoped
public class Data implements Serializable {
    private static final long serialVersionUID = 1L;

    private List<NJDataModel> dataModel;

    @PostConstruct
    public void init() {
        /** defaults */
        dataModel = new ArrayList<NJDataModel>();
        dataModel.add(new NJDataModel("Title page"));
    }

    public void upload() {
        System.out.println("upload method triggered");
        String msg = null;
        for (NJDataModel i : dataModel) {
            UploadedFile file = i.getFile();
            // ERROR: file is always null? so could not get hold of file
            if (file != null) {
                System.out.println("Uploaded file:" + file.getFileName());
                msg += "file:" + file.getFileName() + "size:" + file.getSize() + ", ";
            }
        }
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(msg));
    }
} 
```

XHTML：

```
<p:dataTable var="item" value="#{NJData.dataModel}"
    draggableColumns="true">
    <p:column>
        <p:panel>
            <f:facet name="header">
                <h:outputText value="#{item.sectionName}" />
            </f:facet>
            <p:fileUpload value="#{item.file}" mode="simple" />
        </p:panel>
    </p:column>
</p:dataTable>

<p:commandButton value="Submit" ajax="false"
    actionListener="#{NJData.upload}" /> 
```

最后，我需要在方法中获取文件：NJData.upload() - 我总是在哪里得到空值？

我的控制台输出：

```
file object:null & section name:first page
file object:null & section name:second page 
```

# python - Pandas 系列是否有类似“in”的声明？

> ID：16185652
> 
> 赞同：0
> 
> 时间：2013-04-24T07:13:45.663
> 
> 标签：python, pandas

我可以很容易地检查每个是否等于一个数字：

```
In [20]: s = pd.Series([1, 2, 3])                                                                                                                

In [21]: s == 1
Out[21]: 
0     True
1    False
2    False 
```

我的问题是，是否有类似的功能`s._in([1, 2])`并输出类似的东西

```
0     True
1     True
2     False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:18:16.047

是的，它被称为`isin`. 做`s.isin([1, 2])`。

# iphone - 定位服务在后台执行

> ID：16185661
> 
> 赞同：0
> 
> 时间：2013-04-24T07:14:07.440
> 
> 标签：iphone, ios

我想 24x7 次获取我设备的位置。但根据苹果文档，应用程序最多只能运行 10 分钟。之后，应用程序会自动被杀死。我正在使用以下代码：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
UIApplication * app = [UIApplication sharedApplication];
bgTask = [app beginBackgroundTaskWithExpirationHandler: ^ {
    dispatch_async (dispatch_get_main_queue (), ^ {
        if (bgTask != UIBackgroundTaskInvalid)
        {
            [app endBackgroundTask: bgTask];
            bgTask = UIBackgroundTaskInvalid;
        }
    });
}];

// Start the long-running task and return immediately.

dispatch_async (dispatch_get_global_queue (DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^ {
    lm.locationManager.distanceFilter = kCLDistanceFilterNone;
    lm.locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
    [lm.locationManager startMonitoringSignificantLocationChanges];
    [lm.locationManager startUpdatingLocation];

    dispatch_async (dispatch_get_main_queue (), ^ {
        if (bgTask != UIBackgroundTaskInvalid) {
            [app endBackgroundTask: bgTask];
            bgTask = UIBackgroundTaskInvalid;
        }
    });
});
} 
```

我还将**支持的背景模式**包括为**Requires location**。

但该应用程序仅运行 10 分钟。我怎样才能让应用程序一直运行。请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:37:33.640

`significantLocationChanges`不需要您执行后台任务。只需删除 bgtask 创建并使用 Supported Background Mode 键正常运行它。

计划的 BackgroundTasks 大约在 10 分钟后被操作系统杀死，因此您的位置服务监控。所以你只需要删除你为位置更新创建的 BGTask。

# android - 将可执行文件复制到android中的系统/ bin

> ID：16185664
> 
> 赞同：4
> 
> 时间：2013-04-24T07:14:17.293
> 
> 标签：android, android-build

我正在构建android源代码。我在文件夹中添加了我的自定义代码，`external/myservice`我根据 ping 应用程序更改了 make 文件。我还将 myservice 的路径添加到`build/core/main.mk`. 我的问题是构建完成后，生成的可执行文件不会复制到`system/bin`文件夹中，而是转到`out/target/product/../obj/EXECUTABLES/myservice_intermediates/`文件夹中。

我应该怎么做才能让我生成的可执行文件直接进入`out/target/product/../system/bin`文件夹。？？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T04:39:17.947

最后我找到了答案。

您必须将文件中存在的 PRODUCT_PACKAGES 变量中的可执行文件或包或库名称添加`device/../<device name>/<devicename>.mk`为

```
PRODUCT_PACKAGES += <name of binary or apk or shared library> 
```

`system/bin or system/app or system/lib`该文件将视情况进入文件夹。

# android - 在 Android 中，如何监控其他应用的 sqlite 数据库并更新一些行

> ID：16185666
> 
> 赞同：2
> 
> 时间：2013-04-24T07:14:20.880
> 
> 标签：android

我想实现一个 Android 应用程序，它可以监视另一个特定应用程序的 sqlite 数据库，并从表中删除一些特定行。工作年会如下：

1.  打开特定的社交应用程序（例如 twitter），然后按 Refresh/LoadMore
2.  社交应用程序发送 HTTP 请求以检索数据
3.  社交应用解析结果，并插入 sqlite 数据库
4.  [我的应用] 我的应用监控表的变化，并更新一些行
5.  社交应用程序显示从 sqlite 到 UI 的记录（我的应用程序删除的行将不会显示在 UI 中）。

有可能开发这样的应用程序吗？我了解此应用程序需要 root 访问权限。但是如果应用程序具有root访问权限，我可以实现这个目标吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:49:04.337

仅当其他应用程序已使用`ContentProvider`并授予我们访问权限时才会这样做。

A`ContentProvider`可以在应用程序内部用于访问数据。如果数据应该与另一个应用程序共享，则 ContentProvider 允许这样做。

许多 Android 数据源，例如`contacts`，都可以通过`ContentProviders`.`Typically the implementing classes for a ContentProviders provide public constants for the URIs.`

有关更多详细信息，请查看[Adnroid](http://www.vogella.com/articles/AndroidSQLite/article.html) Developer[一](http://developer.android.com/guide/topics/providers/content-providers.html)和[二的这篇文章和这两篇文章](http://developer.android.com/reference/android/content/ContentProvider.html)

# analyzer - 串并联电路用模型合金

> ID：16185667
> 
> 赞同：0
> 
> 时间：2013-04-24T07:14:24.893
> 
> 标签：analyzer, alloy

我是合金新手。我需要合金串联和并联电路的帮助。我为串联电路建模了一个图，但是当我省略串联的自循环时，它也不起作用，它也只显示了该系列的一个实例。我必须显示开关何时打开，串联灯泡打开......所以它们是状态的签名，并且 On 和 Off 扩展状态..

我的代码是：

```
abstract sig state{}

one sig on extends state{}

one sig off extends state{}

sig CE{}

//one sig battery extends CE{}

abstract sig bulb extends CE{
bs : one state
}

abstract sig switch extends CE{
ss : one state
}

sig Circuit{
battery: one CE,
/*eles: set state,
battery:one eles,   
switch : set eles,
bulb : set eles,
wire: eles one-> one eles*/
wire: CE->CE
}{
//all e:CE | #(e.wire)=1 and #(wire.e)=1
battery.^wire=CE
//no iden & wire
//all e:CE | e->e not in wire
}

pred show{}

run show for 1 Circuit,  5 CE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:31:09.727

我的建议是从一些非常小而简单的事情开始。例如，您可以拥有电线、电池和灯泡，并将灯泡子集到打开或关闭的灯泡中。您的模型看起来有问题的一件事：仅将电线连接到元素是不够的：您需要确定电线连接到元素的哪一侧。

# javascript - 点击添加按钮我只需要八个房间

> ID：16185669
> 
> 赞同：3
> 
> 时间：2013-04-24T07:14:29.270
> 
> 标签：javascript, jquery

我在女巫中有一个代码，我只想在当前索引大于 8 时添加 8 个房间会发出警报，即您不能添加超过 8 个房间。问题是，当我单击索引 8 时，它会显示警报，但之后我单击添加房间它附加房间 10 请帮助这是我在 js fiddle [http://jsfiddle.net/FhyLX/上的代码](http://jsfiddle.net/FhyLX/)

```
<body>
<form id="form1" runat="server">

<div id="guestsRooms" class="clear">
    <label class="label1" for="guestsRoomsSelect">How many people</label>
    <span>
        <span>
            <select id="guestsRoomsSelect" name="GuestsRooms" >
                <option selected="selected" value="RB=1&RA1=1&RCA1=0">1 adult</option>
                <option value="RB=1&RA1=2&RCA1=0">2 adults in 1 room</option>
                <option value="RB=1&RA1=3&RCA1=0">3 adults in 1 room</option>
                <option value="RB=1&RA1=4&RCA1=0">4 adults in 1 room</option>
                <option value="RB=2&RA1=2&RCA1=0&RA2=2&RCA1=0">2 adults in 2 rooms</option>
                <option value="0">Need more rooms or have children?</option>
            </select>
        </span>
    </span>
</div>

   <div id="roomconfig" class="roomconfig_fc">           
   <div id="Addition"></div>
   <div class="btnWrap">
     <a class="addRoom"  style="background-image:none; color:darkred;height:20px; margin-left:20px" href="javascript:void(0);"><img alt="" src="Images/SearchBox/image1.png" class="addimage"  />Add room</a>
   </div>
</div>
    <a id="btnSubmit" class="a" href="javascript:void(0);">Find a hotel</a>
</form>
</body> 
```

```
$(document).ready(function () {
    var counter = 1;
    var IsRoomPreSelected = false;
    var currentIndex = 1;
    var RoomsString = "";

    $('#roomconfig').hide();
    $("#guestsRoomsSelect").find("option[value='2-1']").attr("selected", "selected");
    $('#adults').prop("selectedIndex", 1);
    $('#hc_f_children').prop("selectedIndex", 0);

    $('#guestsRoomsSelect').change(function () {
        if ($(this).val() === '0' && IsRoomPreSelected === false) {
            var $var2 = '<div id="AdultWrapper_' + counter + '" class="class1"> <div class="wrapadults" style="float:left"> <label class="lbl_sm" style="font-size: 0.75em" for="adults">Adults</label>'
            $var2 = $var2 + '<span><select id="AdultDropdown_' + counter + '" class="t_adults" style="margin-left:0px;margin-right:12px; border-right: 0.5px solid #FFFFFF;"><option value="1">1</option><option value="2" selected="selected">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></span></div></div>'
            $var2 = $var2 + '<div id="ChildrenWrapper_' + counter + '" class="child" ><label class="lbl_sm" style="font-size: .75em; padding-left:3px; padding-right:2px;border-right:1px solid #fff;" for="children">Children</label><br/><span style="float: left;width: auto;padding-right:6px;border-right: 1px solid #fff;padding-bottom: 5px;margin: 0PX;"><select id="ChildrenDropdown_' + counter + '" class="tfo_evt_children " style="border-right: 0.5px solid #FFFFFF;margin-right:7px; width:40px;"><option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option><option value="4">4</option> </select> </span><div id="ChildrenAgeWrapper_' + counter + '" class="ch"></div>';
            $("#Addition").prepend('<fieldset id="Roomesfieldset_' + counter + '" data-index="' + counter + '"><legend id="RoomLegend" >Room ' + currentIndex + ':</legend>' + $var2 + '</fieldset>');
            counter = counter + 1;
            IsRoomPreSelected = true;
            $('#roomconfig').show(300);
        }
        else if ($(this).val() === '0' && IsRoomPreSelected === true) {
            $('#roomconfig').show(300);
        }
        else {
            $('#roomconfig').hide(300);
        }
    });

    $(".addRoom").click(function () {
        currentIndex++;
        if('Room'+currentIndex+''>'Room8')
        {
        alert("you can't Add more than 8 rooms");
        }
        else
        {

        var $var1 = '<div id="AdultWrapper_' + counter + '" class="class1"> <div class="wrapadults" style="float:left"><span><select id="AdultDropdown_' + counter + '" class="t_adults" style="margin-left:0px;margin-right:12px; border-right: 0.5px solid #FFFFFF;"><option value="1">1</option><option value="2" selected="selected">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></span></div></div>'
        $var1 = $var1 + '<div id="ChildrenWrapper_' + counter + '" id="child" > <span style="float: left;width: auto;padding-right:6px;border-right: 1px solid #fff;padding-bottom: 5px;margin: 0PX;"><select id="ChildrenDropdown_' + counter + '" class="tfo_evt_children " style="border-right: 0.5px solid #FFFFFF; margin-right:7px; width:40px;"><option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option><option value="4">4</option> </select> </span><div id="ChildrenAgeWrapper_' + counter + '" class="ch"></div></div>'
        $var1 = $var1 + '<div class="btnrmv" id="' + counter + '"> <a id="RemoveRoomAnchor" href="javascript:void(0);" class="removeRoom" style="height:0px; margin:0px;float:right;position:relative;background-image:none; color:#b11500;font-weight:normal;font-size:0.77em;" href="javascript:void(0);"><img src="Images/SearchBox/close.png" alt="Remove" /></a></div>';

        $("#Addition").append('<fieldset id="Roomesfieldset_' + counter + '" data-index="' + counter + '"><legend id="RoomLegend">Room ' + currentIndex + ':</legend>' + $var1 + '</fieldset>');
        counter = counter + 1;
        }

    });

    $("#Addition").on('click', '#RemoveRoomAnchor', function (e) {
        $(this).closest("[id^=Roomesfieldset]").remove();
        $("fieldset").each(function (index) {
            $(this).attr("data-index", index);
            var te = $(this).attr("data-index");
            $(this).children("legend").text('Rooms ' + (++index) + ' :');
            currentIndex = index;
        });
    });

    $("#Addition").on('change', '[id^=ChildrenDropdown]', function (e) {

        $parentElement = $(this).closest("[id^=ChildrenWrapper]").children("[id^=ChildrenAgeWrapper]");         
        var previousChildrenCount = $("#" + $parentElement.attr("id") + " input").size();
        var currentChildrenCount = $(this[this.selectedIndex]).val();
        if (currentChildrenCount > previousChildrenCount)
        {
            for (i = previousChildrenCount; i < currentChildrenCount; i++) 
            {
                var $ctrl = $('<input/>').attr({ type: 'text', class: 'age', name: 'text', value: '', style: 'width:30px;' });
                $parentElement.append($ctrl);
            }
        }
        else if (currentChildrenCount < previousChildrenCount)
        {
            $("#" + $parentElement.attr("id") + " input:gt(" + (currentChildrenCount-1) + ")").remove();             
        }            

        if (currentChildrenCount === '0')
        {
            $("#" + $parentElement.attr("id") + " input").remove();          
        }

    });

    $("#btnSubmit").click(function (e)
    {

        // alert($("#guestsRoomsSelect").val());
        if (($("#guestsRoomsSelect").val()) == 0)
        {
            RoomsString = "";
            var Rooms = 0;
            $("[id^=Roomesfieldset]").each(function (index) {
                // Rooms = Rooms + parseInt($(this).attr("data-index"));
                Rooms = Rooms + 1;
                var adult = $(this).find("[id^=AdultDropdown]").val();
                var child = $(this).find("[id^=ChildrenDropdown]").val();
                //  RoomsString = RoomsString + "&RA" + $(this).attr("data-index") + "=" + adult;
                RoomsString = RoomsString + "&RA" + (index + 1) + "=" + adult;

                if (child > 0)
                {
                    var ageArray = new Array(child);

                    $(this).find("[id^=ChildrenAgeWrapper]").children().each(function (index) {
                        var childAge = $(this).val();
                        ageArray[index] = childAge;                            
                    });

                    //   RoomsString = RoomsString + "&RCA" + $(this).attr("data-index") + "=" + ageArray.toString();
                    RoomsString = RoomsString + "&RCA" + (index + 1) + "=" + ageArray.toString();
                }
                else
                {
                   // RoomsString = RoomsString + "&RCA" + $(this).attr("data-index") + "=" + 0;
                    RoomsString = RoomsString + "&RCA" + (index + 1) + "=" + 0;
                }
            });

            RoomsString = "&RC=" + Rooms + RoomsString;
        }
        else
        {
            RoomsString = $("#guestsRoomsSelect").val();
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:20:27.527

两个字符串比较的结果不是您需要的：字符串比较将逐个比较两个字符串的每个字符，最后确定比较结果。

## 例子 ：

如果比较*'Room10'*和*'* Room8' ，那么当它比较两个字符串时，它会比较两个*'R'*，两个*'o'*，然后再比较*'o'*，然后两个*'m'*，然后它会比较*' 1'*和*'8'*。

在那一刻，*'1'*将比*'8'*更接近字母表的开头，然后您的测试将返回 false，无论后面的字符是什么。

有关更多详细信息，请参阅[本文](http://javascript.about.com/od/decisionmaking/a/des02.htm)。

* * *

改用`int` `currentIndex`：

```
if(currentIndex > 8)
{
   alert("you can't Add more than 8 rooms");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:16:06.417

在您发出警报后，您必须返回 false 以便代码知道何时停止进一步处理。

```
alert("you can't Add more than 8 rooms");
return false; 
```

像这样

```
if(currentIndex>7)
            {
            alert("you can't Add more than 8 rooms");
                return false;
            } 
```

[小提琴](http://jsfiddle.net/FhyLX/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:22:04.983

首先测试房间索引是否大于8然后增加房间索引：

```
$(".addRoom").click(function () {
    if(currentIndex>8){ //test if greater than 8 
       alert("you can't Add more than 8 rooms");
       return false;
    } else {
       currentIndex++
       ... //add the rest of the code here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:27:12.630

在 jquery 中尝试以下代码：

```
$(document).ready(function () {
    var counter = 1;
    var IsRoomPreSelected = false;
    var currentIndex = 1;
    var RoomsString = "";

    $('#roomconfig').hide();
    $("#guestsRoomsSelect").find("option[value='2-1']").attr("selected", "selected");
    $('#adults').prop("selectedIndex", 1);
    $('#hc_f_children').prop("selectedIndex", 0);

    $('#guestsRoomsSelect').change(function () {
        if ($(this).val() === '0' && IsRoomPreSelected === false) {
            var $var2 = '<div id="AdultWrapper_' + counter + '" class="class1"> <div class="wrapadults" style="float:left"> <label class="lbl_sm" style="font-size: 0.75em" for="adults">Adults</label>'
            $var2 = $var2 + '<span><select id="AdultDropdown_' + counter + '" class="t_adults" style="margin-left:0px;margin-right:12px; border-right: 0.5px solid #FFFFFF;"><option value="1">1</option><option value="2" selected="selected">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></span></div></div>'
            $var2 = $var2 + '<div id="ChildrenWrapper_' + counter + '" class="child" ><label class="lbl_sm" style="font-size: .75em; padding-left:3px; padding-right:2px;border-right:1px solid #fff;" for="children">Children</label><br/><span style="float: left;width: auto;padding-right:6px;border-right: 1px solid #fff;padding-bottom: 5px;margin: 0PX;"><select id="ChildrenDropdown_' + counter + '" class="tfo_evt_children " style="border-right: 0.5px solid #FFFFFF;margin-right:7px; width:40px;"><option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option><option value="4">4</option> </select> </span><div id="ChildrenAgeWrapper_' + counter + '" class="ch"></div>';
            $("#Addition").prepend('<fieldset id="Roomesfieldset_' + counter + '" data-index="' + counter + '"><legend id="RoomLegend" >Room ' + currentIndex + ':</legend>' + $var2 + '</fieldset>');
            counter = counter + 1;
            IsRoomPreSelected = true;
            $('#roomconfig').show(300);
        }
        else if ($(this).val() === '0' && IsRoomPreSelected === true) {
            $('#roomconfig').show(300);
        }
        else {
            $('#roomconfig').hide(300);
        }
    });

    $(".addRoom").click(function () {
        currentIndex++;
        $('[id$=hdf]').val(currentIndex);
        alert(currentIndex);
        alert($('[id$=hdf]').val());
        if($('[id$=hdf]').val()>='8')
        {
        alert("you can't Add more than 8 rooms");
        }
        else
        {

        var $var1 = '<div id="AdultWrapper_' + counter + '" class="class1"> <div class="wrapadults" style="float:left"><span><select id="AdultDropdown_' + counter + '" class="t_adults" style="margin-left:0px;margin-right:12px; border-right: 0.5px solid #FFFFFF;"><option value="1">1</option><option value="2" selected="selected">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></span></div></div>'
        $var1 = $var1 + '<div id="ChildrenWrapper_' + counter + '" id="child" > <span style="float: left;width: auto;padding-right:6px;border-right: 1px solid #fff;padding-bottom: 5px;margin: 0PX;"><select id="ChildrenDropdown_' + counter + '" class="tfo_evt_children " style="border-right: 0.5px solid #FFFFFF; margin-right:7px; width:40px;"><option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option><option value="4">4</option> </select> </span><div id="ChildrenAgeWrapper_' + counter + '" class="ch"></div></div>'
        $var1 = $var1 + '<div class="btnrmv" id="' + counter + '"> <a id="RemoveRoomAnchor" href="javascript:void(0);" class="removeRoom" style="height:0px; margin:0px;float:right;position:relative;background-image:none; color:#b11500;font-weight:normal;font-size:0.77em;" href="javascript:void(0);"><img src="Images/SearchBox/close.png" alt="Remove" /></a></div>';

        $("#Addition").append('<fieldset id="Roomesfieldset_' + counter + '" data-index="' + counter + '"><legend id="RoomLegend">Room ' + currentIndex + ':</legend>' + $var1 + '</fieldset>');
        counter = counter + 1;
        }

    });

    $("#Addition").on('click', '#RemoveRoomAnchor', function (e) {
        $(this).closest("[id^=Roomesfieldset]").remove();
        $("fieldset").each(function (index) {
            $(this).attr("data-index", index);
            var te = $(this).attr("data-index");
            $(this).children("legend").text('Rooms ' + (++index) + ' :');
            currentIndex = index;
        });
    });

    $("#Addition").on('change', '[id^=ChildrenDropdown]', function (e) {

        $parentElement = $(this).closest("[id^=ChildrenWrapper]").children("[id^=ChildrenAgeWrapper]");         
        var previousChildrenCount = $("#" + $parentElement.attr("id") + " input").size();
        var currentChildrenCount = $(this[this.selectedIndex]).val();
        if (currentChildrenCount > previousChildrenCount)
        {
            for (i = previousChildrenCount; i < currentChildrenCount; i++) 
            {
                var $ctrl = $('<input/>').attr({ type: 'text', class: 'age', name: 'text', value: '', style: 'width:30px;' });
                $parentElement.append($ctrl);
            }
        }
        else if (currentChildrenCount < previousChildrenCount)
        {
            $("#" + $parentElement.attr("id") + " input:gt(" + (currentChildrenCount-1) + ")").remove();             
        }            

        if (currentChildrenCount === '0')
        {
            $("#" + $parentElement.attr("id") + " input").remove();          
        }

    });

    $("#btnSubmit").click(function (e)
    {

        // alert($("#guestsRoomsSelect").val());
        if (($("#guestsRoomsSelect").val()) == 0)
        {
            RoomsString = "";
            var Rooms = 0;
            $("[id^=Roomesfieldset]").each(function (index) {
                // Rooms = Rooms + parseInt($(this).attr("data-index"));
                Rooms = Rooms + 1;
                var adult = $(this).find("[id^=AdultDropdown]").val();
                var child = $(this).find("[id^=ChildrenDropdown]").val();
                //  RoomsString = RoomsString + "&RA" + $(this).attr("data-index") + "=" + adult;
                RoomsString = RoomsString + "&RA" + (index + 1) + "=" + adult;

                if (child > 0)
                {
                    var ageArray = new Array(child);

                    $(this).find("[id^=ChildrenAgeWrapper]").children().each(function (index) {
                        var childAge = $(this).val();
                        ageArray[index] = childAge;                            
                    });

                    //   RoomsString = RoomsString + "&RCA" + $(this).attr("data-index") + "=" + ageArray.toString();
                    RoomsString = RoomsString + "&RCA" + (index + 1) + "=" + ageArray.toString();
                }
                else
                {
                   // RoomsString = RoomsString + "&RCA" + $(this).attr("data-index") + "=" + 0;
                    RoomsString = RoomsString + "&RCA" + (index + 1) + "=" + 0;
                }
            });

            RoomsString = "&RC=" + Rooms + RoomsString;
        }
        else
        {
            RoomsString = $("#guestsRoomsSelect").val();
        }
    });

}); 
```

菲德尔是 ::[菲德尔](http://fiddle.jshell.net/Yt24r/)

并在html中添加以下代码形式::

```
<input type="hidden"  id="hdf"  /> 
```

或者，如果您不想添加隐藏字段，请使用以下代码：

```
if(currentIndex>=8)
        {
        alert("you can't Add more than 8 rooms");
            return false;
        } 
```

这是它的菲德尔::[菲德尔](http://fiddle.jshell.net/46KLR/)

# blackberry - 黑莓推送通知实现步骤

> ID：16185673
> 
> 赞同：0
> 
> 时间：2013-04-24T07:14:38.467
> 
> 标签：blackberry, push-notification

我打算在 Blackberry (OS 5.0 ,6.0) 中开发一个推送通知应用程序。我在黑莓推送通知服务上做了一点 RnD。

1.  涵盖所有基本信息
    [https://developer.blackberry.com/develop/platform_services/push_overview.html](https://developer.blackberry.com/develop/platform_services/push_overview.html)

2.  Push Essentials VS Push Plus [https://developer.blackberry.com/devzone/develop/platform_services/push_features.html](https://developer.blackberry.com/devzone/develop/platform_services/push_features.html)

3.  我已经注册了虚拟应用程序 [https://www.blackberry.com/profile/?eventId=8121](https://www.blackberry.com/profile/?eventId=8121)

4.  我安装了由 RIm
    [http://developer.blackberry.com/java/documentation/installing_the_sdk.html#jza1355764941890提供的 Push SDK](http://developer.blackberry.com/java/documentation/installing_the_sdk.html#jza1355764941890)

现在我的问题是：

1.  如何将推送 SDK 与我的 BB Eclipse 集成？
2.  如何测试推送通知服务？
3.  BB推送服务和Urban Airship服务有什么区别？我知道如何实现 Urban Airship BB api，但是这次我不想使用 Urban Airship。
4.  如果我们实时实施，上述服务之间的价格差异是多少？因为我还没有找到任何定价文档，这就是我问的原因。

# javascript - 如何知道缩放的 HTML 5 画布上下文的大小？

> ID：16185676
> 
> 赞同：0
> 
> 时间：2013-04-24T07:14:51.660
> 
> 标签：javascript, html, html5-canvas

我正在将图像写入画布，然后缩放上下文并将其重新写入同一画布。一旦将缩放区域写回画布，我无法弄清楚如何获得缩放区域的确切大小。我需要以像素为单位的大小，这样我就可以计算平移偏移量，以使其在画布上居中，无论比例如何。

画布/上下文看起来像这样。

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d'); 
```

我正在应用这样的比例（将其放大 0.1）。

```
scale = scale * '1.1';
img_w = img.width * scale;
img_y = img.height * scale;
ctx.scale('1.1', '1.1'); 
```

然后，我正在使用

```
ctx.drawImage(img, (canvas.width - img_w) / 2, (canvas.height - img_h) / 2); 
```

重绘图像，这是失败的地方，因为我没有缩放区域的确切宽度。

这是一个小提琴[http://jsfiddle.net/robertsdavidb/bGyFT/13/](http://jsfiddle.net/robertsdavidb/bGyFT/13/)

缩放效果很好，但是缩放后如何将其保持在中心？

# css - 收紧特定对的字距？

> ID：16185680
> 
> 赞同：2
> 
> 时间：2013-04-24T07:14:56.727
> 
> 标签：css, fonts, kerning

我需要在网站中使用 Palatino 字体。问题是字体缺少一个重要的字距对 VA，至少在我的机器上：

![字距调整示例](https://i.stack.imgur.com/2ChmH.png)

我可以在主网站标题中解决这种情况。这意味着我可以插入显式标记 ( `<span class="kern">VA</span>LUE`) 并在那里调整字距。但是使用 CSS 属性调整 VA 对`letter-spacing`也会收紧以下对：

![拧紧后紧缩样本](https://i.stack.imgur.com/AZpGK.png)

现在 AL 对是不可接受的（另见[jsFiddle](http://jsfiddle.net/Msdwm/1/)）。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:15:56.497

哈，我是个白痴。显然，只针对第一个字母：

```
<p>VALUE</p>
<p><span class="kern">V</span>ALUE</p> 
```

橡皮鸭调试就这么多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T10:25:31.793

我刚刚为此目的创建了这个项目：

> [杰宁网](http://jerning.com)

用法很简单 - 因此对于您的示例，您将执行以下操作：

```
$('p').jerning("VA", -0.1); 
```

这意味着您不必手动编辑大量文本的跨度。

# android - Android Webview 无法加载 Sharepoint 网站

> ID：16185682
> 
> 赞同：0
> 
> 时间：2013-04-24T07:14:58.903
> 
> 标签：android, sharepoint, webview, android-webview, axd

我在使用共享点站点时遇到问题。我已经对其 ntlm auth 进行了身份验证，并将整个站点转换为字符串，一旦我将其加载到 WebView 中，`loadData();`我就看不到图像了。我认为它与 .axd 文件扩展名有关，因为它隐藏了图像的完整 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T10:45:26.007

我知道如何解决它：

```
package com.example.yourapp;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.net.http.SslError;
import android.os.Bundle;

import android.webkit.*;

@SuppressLint({ "SetJavaScriptEnabled", "NewApi" })
public class Sharepoint extends Activity {

    private WebView webView;

    @SuppressLint("NewApi")
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.sharepoint);
        CookieSyncManager.createInstance(this);

        CookieManager cookieManager = CookieManager.getInstance();
        String cook = null;
        cookieManager.setCookie("yoursite", cook);
        CookieSyncManager.getInstance().sync();
       webView = (WebView) findViewById(R.id.webView);
       webView.setWebViewClient(new WebViewClient()
        {
            public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error)
            {
                handler.proceed();
            }

            public void onProgressChanged(WebView view, int progress)
            {

            }
        });
        webView.getSettings().setDomStorageEnabled(true);
        webView.getSettings().setAllowContentAccess(true);
        webView.getSettings().setAllowFileAccess(true);
        webView.getSettings().setAllowUniversalAccessFromFileURLs(true);          webView.getSettings().setLoadsImagesAutomatically(true);
        webView.getSettings().setBuiltInZoomControls(true);
        webView.getSettings().setJavaScriptEnabled(true);
         webView.getSettings().setAppCacheEnabled(true);

        try {
            Thread.sleep(300);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        webView.loadUrl("yoururl");

    }

} 
```

# javascript - 注入html时Angularjs绑定不起作用

> ID：16185683
> 
> 赞同：4
> 
> 时间：2013-04-24T07:14:59.460
> 
> 标签：javascript, angularjs

我试图查看[文档](http://docs.angularjs.org/api/ng.%24compile) ，但似乎我遗漏了一些东西。我正在尝试注入绑定到 json 的 html。如果声明了 html，它可以正常工作，但是当我注入它时，尽管调用了 $compile 它不起作用。这是代码

```
<!DOCTYPE html>
<html ng-app>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js">        </script>
 <script src="todo.js"></script>
<script> 

 function TodoCtrl($scope)
  {
  $scope.todos = [{text:'LearnAngularJS'}, {text:'Unlearn Angular'},];
 }

 $(document).ready(function()
 {
 $('#div1').html(
$compile('<div ng-controller="TodoCtrl"><ul><li ng-repeat="todo in todos"    compile="text">{{todo.text}}<li><ul><div>')(scope));
 });

 </script>
</head>
<body>
<div ng-controller="TodoCtrl">
<ul>
 <li ng-repeat="todo in todos">
  {{todo.text}}
   <li>
  <ul>
   </div>

 <div id="div1">
 <div>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:49:54.113

[http://plnkr.co/edit/NQQBgQKBWEqKHxGwnI0h?p=preview](http://plnkr.co/edit/NQQBgQKBWEqKHxGwnI0h?p=preview)

正如 Ajay 指出的那样，您必须将您的范围之一与模板相关联。

# c#-4.0 - 带有剑道网格的复选框列

> ID：16185687
> 
> 赞同：11
> 
> 时间：2013-04-24T07:15:16.663
> 
> 标签：c#-4.0, razor, kendo-grid, kendo-asp.net-mvc

我想在网格下方添加一个复选框列作为第一列。有人可以帮助我如何添加它吗？

```
 @(Html.Kendo().Grid(Model)
      .Name("items")
      .Columns(columns =>
      {
          columns.Bound(p => p.itemname).Title("Name");
          columns.Bound(p => p.cost).Title("Cost");
          columns.Bound(p => p.stockinhand).Title("Stock in hand");
          columns.Command(command => command.Destroy()).Width(100);
      })
     .Pageable()
             .DataSource(dataSource => dataSource
                .Server() 
                .Model(model => model.Id(p=>p.Id))
                .Destroy(update => update.Action("EditingInline_Destroy", "Grid"))
            )
) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-29T20:19:51.613

我是这样做的：

```
columns.Template(@<text></text>).ClientTemplate("<input type='checkbox' #= IsAdmin ? checked='checked':'' # class='chkbx' />") 
```

然后在javascript上：

```
 $(function () {
    $('#grid').on('click', '.chkbx', function () {
        var checked = $(this).is(':checked');
        var grid = $('#grid').data().kendoGrid;
        var dataItem = grid.dataItem($(this).closest('tr'));
        dataItem.set('IsAdmin', checked);
    })
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-18T13:37:10.027

我通常在模型中添加一个布尔列；喜欢以下。

```
@(Html.Kendo().Grid(Model)
  .Name("items")
  .Columns(columns =>
  {
      columns.Bound(p => p.status).ClientTemplate("<input type='checkbox' disabled #= status == true ? checked='checked' : '' # />");
      columns.Bound(p => p.itemname).Title("Name");
      columns.Bound(p => p.cost).Title("Cost");
      columns.Bound(p => p.stockinhand).Title("Stock in hand");
      columns.Command(command => command.Destroy()).Width(100);
  })
 .Pageable()
         .DataSource(dataSource => dataSource
            .Server() 
            .Model(model => model.Id(p=>p.Id))
            .Destroy(update => update.Action("EditingInline_Destroy", "Grid"))
        )
) 
```

要禁用它，直到您按下“编辑”按钮，只需在 ClientTemplate 中添加“禁用”。那应该这样做。谢谢。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-30T14:35:48.923

您好，您可以在标题和列中添加复选框，如下所示：

```
columns.Bound(p => p.Status).HeaderTemplate("<input id='selectall' class='chkbx' type='checkbox' onclick='ToggleChkBox(this.checked);' />").ClientTemplate("<input id='checkbox' onclick='grdChkBoxClick(this); ' class='chkbxq' type='checkbox' />").Sortable(false).Filterable(false).Width(30); 
```

并找到复选框单击如下：

```
//Cell click Checkbox select
$('#Grid').on("click", "td", function (e) {
    var selectedTd = $(e.target).closest("td");
        var grdChkBox = selectedTd.parents('tr').find("td:first").next("td").find('input:checkbox');
        grdChkBox.prop('checked', !grdChkBox.prop('checked'));

}); 
```

并检查所有复选框功能，如下所示：

```
function ToggleChkBox(flag) {
    $('.chkbxq').each(function () {
        $(this).attr('checked', flag);
    });
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-30T09:19:12.807

您可以使用此方法在带有标题的每一行中添加复选框，

```
@(Html.Kendo().Grid<Kendo.Mvc.Examples.Models.ProductViewModel>()
.Name("Grid")
.Columns(columns => {
    columns.Select();
    columns.Bound(p => p.ProductName);
    columns.Bound(p => p.UnitPrice);
    columns.Bound(p => p.UnitsInStock);
    columns.Bound(p => p.Discontinued);
})
.Pageable()
.Sortable()
.Events(ev=>ev.Change("onChange"))
.PersistSelection()
.DataSource(dataSource => dataSource
    .Ajax()
    .Model(model => model.Id(p => p.ProductID))
    .Read(read => read.Action("Selection_Read", "Grid"))
)) 
```

在这里，我们使用 PersistSelection() 在所有页面中持久保存选定的项目。

如果 column.Select() 给出错误或未绑定网格，则升级您的 kendo UI 版本。它会起作用的。

# c++ - c++ 在 if...else 中为 const QList 赋值

> ID：16185691
> 
> 赞同：3
> 
> 时间：2013-04-24T07:15:26.817
> 
> 标签：c++, constants, variable-assignment, conditional-statements, const-correctness

我想`const QList`根据指针的值为 a 赋值。

`invar`是一个指针，如果是`NULL`我想分配第一个值`const QList mylist`，如果不是`NULL`，另一个值。但是观察到 const 正确性：我不打算在`mylist`之后更改值。

有没有可能

```
if(invar)
    const QList<Type> zoneList = invar->getZones();
else
    const QList<Type> zoneList = aList ; 
```

我`zoneList`准确地定义了一次，那么为什么这不起作用？

此外，当我在方法`zoneList`的下一部分中使用时，我得到了这个编译错误：`undeclared identifier`.

但我也不允许这样写

```
 const QList<Type> zoneList ;

    if(invar)
        zoneList = invar->getZones();
    else
        zoneList = NULL ; 
```

我有编译器错误 Error 1

```
error C2678: binary '=' : no operator found which takes a left-hand operand of type 'const QList<T>' (or there is no acceptable conversion) 
```

是否可以根据条件为这个 const QList 分配两个不同的值？那么正确的写法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T07:17:25.893

使用三元运算符`?:`

```
const QList<Type> zoneList(invar ? invar->getZones() : aList); 
```

顺便说一句，`NULL`是`aList`吗？你在上面的代码中都有。

这个

```
if(invar)
    const QList<Type> zoneList = invar->getZones();
else
    const QList<Type> zoneList = aList ; 
```

不起作用，因为每个 zoneList 变量仅在 if 语句中定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T07:17:34.030

有了这样一个简单的条件，您可以只使用三元运算符：

```
const QList<Type> zoneList = invar ? invar->getZones() : aList; 
```

如果初始化变得比这更复杂并且您碰巧使用 C++11，那么您可以使用 lambdas 实现的新习惯用法：

```
const QList<Type> zoneList = [] () -> QList<Type> {
                          // ^^ possibly [&] to capture variables

        // some complex stuff that returns a QList<Type>

    }(); // Note the () that calls the lambda immediately 
```

如果您坚持使用 C++03（或者，Stroustrup forbid，C++98），除了调用另一个函数/方法之外，剩下的解决方案很少，缺点是您必须将任何需要的局部变量作为参数传递计算常量值。

* * *

**编辑：**我意识到我还没有完全回答你的问题。其他人已经解释说你的第一个`if`不能工作，因为这是一个范围问题，我不会添加太多，除了添加大括号可能会让你更清楚（注意这与你的代码完全相同：大括号是当`if`/`else`主体只是单个语句但它们的存在/不存在不会改变代码的语义时是可选的）：

```
if (invar) {
    const QList<Type> zoneList = invar->getZones();
}
else {
    const QList<Type> zoneList = aList;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:18:36.813

如果你这样做

```
if(invar)
    const QList<Type> zoneList = invar->getZones();
else
    const QList<Type> zoneList = aList ; 
```

of 的范围`zoneList`仅限于`if`or`else`分支，在它之外就不存在了。
如果你这样做

```
const QList<Type> zoneList ;

if(invar)
    zoneList = invar->getZones();
else
    zoneList = NULL ; 
```

`zoneList`已声明`const`且不能在`if`/中更改`else`。

您可以使用 hack `const_cast`，但这是不好的做法，因此您必须初始化`zoneList`。

```
zoneList = invar != 0 ? invar->getZones() : 0; //don't use NULL in C++ 
```

# java - 无法从类启动意图 startActivityForResult

> ID：16185694
> 
> 赞同：2
> 
> 时间：2013-04-24T07:15:29.027
> 
> 标签：java, android

如果有人可以帮助我，我会很高兴，因为我是对象编程的新手。我的问题是：我正在编写一些带有蓝牙通信的应用程序。*我在MainActivity.class*中编写了所有方法并成功地在设备之间连接和传输数据。我还有一个*SearchActivity.class*显示列表范围内的所有设备，因此用户可以选择一个。然后设备通过 Intent 传递到*MainActivity*，连接开始的地方。但由于我的应用程序的性质，我必须创建单独的类，仅用于蓝牙通信，称为*BluetoothService.class*。我将蓝牙和其他东西的所有方法移到了*BluetoothService.class。* 现在我什至无法编译我的项目，因为在为 SearchActivity 创建 Intent 时出错，我也得到错误 startActivityForResult 和 onActivityResult 方法。

第一个错误是：*构造函数 Intent(BluetoothService, Class) 未定义*

第二个错误：*方法 startActivityForResult(Intent, int) 未定义 BluetoothService 类型*

```
public void startConnection() {
    // Create an intent for SearchActivity 
    Intent intent = new Intent(this, SearchActivity.class);
    //start SearchActivity through intent and expect for result. 
    //The result is based on result code, which is REQUEST_DISCOVERY
    startActivityForResult(intent, REQUEST_DISCOVERY);              
} 
```

当我从 MainActivity 调用方法*startConnection()*时，一切正常，但现在我没有。我认为问题是，我无法从非活动类创建新活动。

下一个错误出现在 onActivityResult 方法中：*RESULT_OK 无法解析为变量*

```
//on ActivityResult method is called, when other activity returns result through intent!
//when user selected device in SearchActivity, result is passed through intent with //requestCode, resultCode (intent data + requestCode + resultCode)
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode != REQUEST_DISCOVERY) {
    Log.d("Debug", ">>intent REQUEST_DISCOVERY failed!");
    return;
    }
    if (resultCode != RESULT_OK) {
    Log.d("Debug", ">>intent RESULT_OK failed!");
    return;
    }
    Log.d("Debug", ">>onActivityResult!");
    final BluetoothDevice device = data.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

    Log.d(device.getName(), "Name of Selected Bluetoothdevice");

    new Thread () {
        public void run() {
        //call connect function with device argument
        connect(device);
        };
    }.start();
    } 
```

请告诉我如何解决这个问题。如果您需要更多信息或代码，请告诉我。谢谢。

```
public class SearchActivity  extends ListActivity
{
    //name of LxDevices, that will be shown on search
    private String nameOfLxDevice = "DEBUG";

    private Handler handler = new Handler();
    /* Get Default Adapter */
    private BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    /* Storage the BT devices */
    private List<BluetoothDevice> devices = new ArrayList<BluetoothDevice>();
    /* Discovery is Finished */
    private volatile boolean discoveryFinished;

    /* Start search device */ 
    private Runnable discoveryWorker = new Runnable() {
        public void run() 
        {
            //To start discovering devices, simply call startDiscovery(). The process is asynchronous and the method will 
            //immediately return with a boolean indicating whether discovery has successfully started.
            mBluetoothAdapter.startDiscovery();
            Log.d("debug", ">>Starting Discovery");
            for (;;) 
            {
                if (discoveryFinished) 
                {
                    Log.d("debug", ">>Finished");
                    break;
                }
                try 
                {
                    Thread.sleep(100);
                } 
                catch (InterruptedException e){}
            }
        }
    }; 

    /* when discovery is finished, this will be called */
    //Your application must register a BroadcastReceiver for the ACTION_FOUND Intent in order to receive information about each device discovered.
    //For each device, the system will broadcast the ACTION_FOUND Intent. This Intent carries the extra fields EXTRA_DEVICE and EXTRA_CLASS,
    //containing a BluetoothDevice and a BluetoothClass, respectively

    private BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            /* get the search results */
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);               
                //add it on List<BluetoothDevice>
                devices.add(device);
                //show found LxDevice on list
                showDevices();
            }           
        }
    };

    private BroadcastReceiver discoveryReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent)  
        {
            /* unRegister Receiver */
            Log.d("debug", ">>unregisterReceiver");
            unregisterReceiver(mBroadcastReceiver);
            unregisterReceiver(this);
            discoveryFinished = true;
        }
    };

    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_search);

        /* BT isEnable */
        if (!mBluetoothAdapter.isEnabled())
        {
            Log.w("debug", ">>BT is disable!");
            finish();
            return;
        }
        /* Register Receiver*/
        IntentFilter discoveryFilter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
        registerReceiver(discoveryReceiver, discoveryFilter);
        IntentFilter foundFilter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(mBroadcastReceiver, foundFilter);

        /* show a dialog "Scanning..." */ 
        SamplesUtils.indeterminate(SearchActivity.this, handler, "Scanning for LX devices..", discoveryWorker, new OnDismissListener() {
            public void onDismiss(DialogInterface dialog)
            {
                for (; mBluetoothAdapter.isDiscovering();) {
                    // Discovery is resource intensive.  Make sure it isn't going on when you attempt to connect and pass your message.
                    mBluetoothAdapter.cancelDiscovery();
                }
                discoveryFinished = true;
            }
        }, true); 
    }

    /* Show devices list */
    private void showDevices()
    {
        //Create a list of strings
        List<String> list = new ArrayList<String>();
        for (int i = 0, size = devices.size(); i < size; ++i) {
            StringBuilder b = new StringBuilder();
            BluetoothDevice d = devices.get(i);
            b.append(d.getName());
            b.append('\n');
            b.append(d.getAddress());
            String s = b.toString();
            list.add(s);
        }

        Log.d("debug", ">>showDevices");
        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list);
        handler.post(new Runnable() {
            public void run()
            {
                setListAdapter(adapter);
            }
        });
    }

    /* Select device */
    protected void onListItemClick(ListView l, View v, int position, long id) {
        Log.d("debug", ">>Click device");
        Intent result = new Intent();
        result.putExtra(BluetoothDevice.EXTRA_DEVICE, devices.get(position));
        setResult(RESULT_OK, result);
        finish();
    }

} 
```

在 MainActivity 我正在做：

```
// Initialize the BluetoothChatService to perform bluetooth connections
    mBluetoothService = new BluetoothService(this); 
```

BluetoothService 中的构造函数是：

```
 public BluetoothService(Context context) {

    } 
```

连接方法：

```
protected void connect(BluetoothDevice device) {
    try {
    //Create a Socket connection: need the server's UUID number of registered
    BluetoothSocket socket = null;
    socket = device.createRfcommSocketToServiceRecord(MY_UUID);         
    socket.connect();
        //Create temporary input and output stream
         InputStreamtmpIn=socket.getInputStream();                                                      
    OutputStream tmpOut = socket.getOutputStream();

    //for use purposes
    mmSocket = socket;
    mmOutStream = tmpOut;
    mmInStream = tmpIn;

    tmpOut.write("Device connected..".getBytes());

    //start Thread for receiving data over bluetooth
    //dataReceiveThread.start();

    } catch (IOException e) {
        Log.e("Colibri2BB BT", "", e);
    } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T07:35:32.783

你的`BluettoothService`类不是上下文，要初始化一个 Intent 你需要一个上下文。所以尝试像这样创建你的类：

```
 public class BluettoothService{

    Activity activity;

    BluettoothService(Activity activity){
    this.activity=activity;
    }
    public void startConnection() {
    // Create an intent for SearchActivity 
    Intent intent = new Intent(activity, SearchActivity.class);
    //start SearchActivity through intent and expect for result. 
    //The result is based on result code, which is REQUEST_DISCOVERY
    activity.startActivityForResult(intent, REQUEST_DISCOVERY);              
    } 

} 
```

您可以`BluettoothService`从任何活动中以这种方式创建类：

```
BluettoothService bluetooth=new BluettoothService(this); 
```

编辑：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
if (requestCode != REQUEST_DISCOVERY) {
Log.d("Debug", ">>intent REQUEST_DISCOVERY failed!");
return;
}
if (resultCode != Activity.RESULT_OK) {
Log.d("Debug", ">>intent RESULT_OK failed!");
return;
}
Log.d("Debug", ">>onActivityResult!");
final BluetoothDevice device = data.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

Log.d(device.getName(), "Name of Selected Bluetoothdevice");

new Thread () {
    public void run() {
    //call connect function with device argument
    connect(device);
    };
}.start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:18:39.973

您不能使用 `this`服务来启动`ActivityForResult`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:35:32.117

您应该`@override`为`onActivityResult()`.

您的代码应放入扩展“活动”（android.app.Activity）的类中。这是因为你也有这个：

```
Next error is in onActivityResult method: *RESULT_OK cannot be resolved to a variable* 
```

这无法解决，因为**您的课程没有扩展“活动”**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:46:52.363

//创建这个持有应用程序上下文的类。

```
public class Application_Manager extends Application {

    private static Context context;

    public void onCreate() {
        super.onCreate();
        Application_Manager.context = getApplicationContext();

    }

    public static Context getAppContext() {
        return Application_Manager.context;
    }
} 
```

//使用这个类 getAppcontext() 在非活动类中获取上下文。

```
public class BluettoothService{

    static Context context=Application_Manager.getAppContext();
    public void startConnection() {
    Intent intent = new Intent(context, SearchActivity.class);
    context.startActivityForResult(intent, REQUEST_DISCOVERY);//change edited              
    } 

} 
```

# facebook - 在 xmpp4r_facebook 上进行身份验证时出现“IOError：关闭的流”错误

> ID：16185696
> 
> 赞同：2
> 
> 时间：2013-04-24T07:15:35.210
> 
> 标签：facebook, xmpp, xmpp4r

这很奇怪，因为它以前可以工作，现在不行了。如果是“未授权”错误，那会很容易，但是对于“IOError：关闭的流”，我很难过。

我认为这可能是由于令牌过期，但每当用户使用 Facebook 登录时，访问令牌都会更新。

由于遇到错误，我一步一步尝试，发现它是在调用 auth_sasl 方法时发生的。

```
1.9.3p194 :073 > c = Jabber::Client.new(Jabber::JID.new("-[FB_ID]@chat.facebook.com"))
[output omitted]
1.9.3p194 :074 > c.connect
[output omitted]
1.9.3p194 :079 > c.is_connected?
=> true 
1.9.3p194 :080 > c.auth_sasl(Jabber::SASL::XFacebookPlatform.new(c, [FB_KEY], [TOKEN], [FB_SECRET]), nil)
IOError: closed stream
    from /Users/yangtheman/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb:318:in `syswrite'
    from /Users/yangtheman/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb:318:in `do_write'
    from /Users/yangtheman/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb:383:in `<<'
    from /Users/yangtheman/.rvm/gems/ruby-1.9.3-p194@global/gems/xmpp4r-0.5/lib/xmpp4r/stream.rb:346:in `block in send_data'
    from <internal:prelude>:10:in `synchronize'
    from /Users/yangtheman/.rvm/gems/ruby-1.9.3-p194@global/gems/xmpp4r-0.5/lib/xmpp4r/stream.rb:344:in `send_data'
    from /Users/yangtheman/.rvm/gems/ruby-1.9.3-p194@global/gems/xmpp4r-0.5/lib/xmpp4r/stream.rb:378:in `send'
    from /Users/yangtheman/.rvm/gems/ruby-1.9.3-p194@global/gems/xmpp4r_facebook-0.1.1/lib/xmpp4r_facebook.rb:11:in `initialize'
    from (irb):80:in `new'
    from (irb):80
    from /Users/yangtheman/.rvm/gems/ruby-1.9.3-p194@global/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
    from /Users/yangtheman/.rvm/gems/ruby-1.9.3-p194@global/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
    from /Users/yangtheman/.rvm/gems/ruby-1.9.3-p194@global/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.3p194 :081 > c.is_connected?
=> false 
```

谁能解释一下为什么会发生这种情况？其他人有相同或类似的问题吗？

**编辑：**我打开了调试，以下是我收到的“错误”消息。同样，似乎很多人都有同样的问题，但我找不到任何解决方案或解释该问题。大的 ：（。

```
<subject>Sorry, your account isn&apos;t available</subject><body>Your account is temporarily unavailable. Regain access by logging into your account from a web browser.</body></message> 
```

任何帮助将非常感激！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T02:49:14.023

在多个操作系统和客户端上一直在努力解决同样的问题 -*绝对*是服务器端问题，但没有得到 FB 对此问题的任何回应。在我在 FB 中启用 2FA 后问题开始出现 - 不确定这是否是根本原因。聊天很重要，但 FB 提供的小“安全”更重要。

# java - 在java中使用IP地址查找位置的示例代码？

> ID：16185703
> 
> 赞同：4
> 
> 时间：2013-04-24T07:15:49.900
> 
> 标签：java, location, ip

我正在寻找示例代码来获取 IP 的确切位置。我做了护目镜，但没有找到任何示例代码。谢谢你..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:17:23.510

我以前使用 MaxMind GeoIP Lite 数据库取得了很大的成功。[城市和国家数据库](http://dev.maxmind.com/geoip/geolite)和[API](http://dev.maxmind.com/geoip/downloadable)都可用。

一个使用示例是：

```
File dbfile = new File("db/GeoLiteCity.dat");
LookupService lookupService = new LookupService(dbfile, LookupService.GEOIP_MEMORY_CACHE);

Location location = lookupService.getLocation(ipAddress);

// Populate region. Note that regionName is a MaxMind class, not an instance variable
if (location != null) {
    location.region = regionName.regionNameByCode(location.countryCode, location.region);
} 
```

# vb.net - VB.NET 代码将共享本地路径转换为 UNC 路径

> ID：16185716
> 
> 赞同：2
> 
> 时间：2013-04-24T07:16:23.543
> 
> 标签：vb.net, unc, shared-directory

我们有`windows 2003`名为 pc2 的服务器 Pc，其中本地驱动器以不同的名称共享。例如，本地驱动器 E 与名称 'datapath' 共享，以便所有用户`network`使用网络路径访问该驱动器 ' `\\pc2\datapath\'`。我们需要 VB.net 代码将本地路径转换为共享路径，`UNC path`即如果我们输入 'E:\netuse'，代码必须返回 ' `\\pc2\datapath\netuse'`。

有没有办法做到这一点`VB.net`？

编辑：驱动器 E 没有映射，它只是共享的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:20:06.137

刚刚创建了一个似乎可以工作的小应用程序。

它需要一个具有非 unc 值的文本框并将其转换，然后设置一个标签

如果您还没有，请记住包含以下命名空间；

```
Imports System.Text
Imports System.IO 
```

这是完成所有工作的方法；

```
Private Function GetUNCPath(ByVal sFilePath As String) As String

Dim allDrives() As DriveInfo = DriveInfo.GetDrives()
Dim d As DriveInfo
Dim DriveType, Ctr As Integer
Dim DriveLtr, UNCName As String
Dim StrBldr As New StringBuilder

If sFilePath.StartsWith("\\") Then Return sFilePath

UNCName = Space(160)
GetUNCPath = ""

DriveLtr = sFilePath.Substring(0, 3)

For Each d In allDrives
  If d.Name = DriveLtr Then
    DriveType = d.DriveType
    Exit For
  End If
Next

If DriveType = 4 Then

  Ctr = WNetGetConnection(sFilePath.Substring(0, 2), UNCName, UNCName.Length)

  If Ctr = 0 Then
    UNCName = UNCName.Trim
    For Ctr = 0 To UNCName.Length - 1
      Dim SingleChar As Char = UNCName(Ctr)
      Dim asciiValue As Integer = Asc(SingleChar)
      If asciiValue > 0 Then
        StrBldr.Append(SingleChar)
      Else
        Exit For
      End If
    Next
    StrBldr.Append(sFilePath.Substring(2))
    GetUNCPath = StrBldr.ToString
  Else
    MsgBox("Cannot Retrieve UNC path" & vbCrLf & "Must Use Mapped Drive of SQLServer", MsgBoxStyle.Critical)
  End If
Else
  MsgBox("Cannot Use Local Drive" & vbCrLf & "Must Use Mapped Drive of SQLServer", MsgBoxStyle.Critical)
End If

End Function 
```

声明这个函数；

```
 Declare Function WNetGetConnection Lib "mpr.dll" Alias "WNetGetConnectionA" (ByVal lpszLocalName As String, _
       ByVal lpszRemoteName As String, ByRef cbRemoteName As Integer) As Integer 
```

通过单击按钮调用代码；

```
 Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
     Dim RealFileName As String = GetUNCPath(txtFileName.Text)
     lblUNC.Text = RealFileName
  End Sub 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-30T07:22:25.347

这段代码工作得很好

```
 Dim SharePath As String = "e:\Netuse"
        Dim SplitPath() As String = Split(SharePath, "\")
        Dim CurrentPath As String = String.Empty
        Dim ShareName As String = String.Empty
        Dim CurrentFolderIndex As Integer
        Dim UNCPath As String = String.Empty

        For CurrentFolderIndex = 0 To SplitPath.GetUpperBound(0)
            If CurrentPath = String.Empty Then
                CurrentPath = String.Concat(SplitPath(CurrentFolderIndex), "\\")
            Else
                CurrentPath += String.Concat(SplitPath(CurrentFolderIndex), "\\")
            End If
            ShareName = GetShareName(CurrentPath)
            If ShareName <> String.Empty Then
                CurrentFolderIndex += 1
                Exit For
            End If
        Next

        UNCPath = String.Concat("\\", My.Computer.Name, "\", ShareName)

        For SubPathIndex As Integer = CurrentFolderIndex To SplitPath.GetUpperBound(0)
            UNCPath = String.Concat(UNCPath, "\", SplitPath(SubPathIndex))
        Next

        Console.WriteLine(UNCPath)

    Public Function GetShareName(ByVal FolderPath As String) As String

        Dim Searcher As New ManagementObjectSearcher(String.Concat("select * from win32_share WHERE Path = '", FolderPath, "'"))
        Dim ShareName As String = String.Empty

        For Each Share As ManagementObject In Searcher.Get()
            ShareName = Share("Name").ToString
        Next

        Return ShareName

    End Function 
```

# windows - 如何更改 IFileSaveDialog 的布局 - MFC

> ID：16185718
> 
> 赞同：0
> 
> 时间：2013-04-24T07:16:29.497
> 
> 标签：windows, visual-c++, layout, mfc

我想`IFileSaveDialog`在 mfc 中更改我的自定义布局。

我想更改语言的`Right-to-left`布局。`IFileSaveDialog``Arabic`

他们的任何属性是否直接改变？

我没有找到任何方法来做到这一点，请帮助我。

提前致谢。

**编辑**

需要更多帮助，我该如何`CComptr IFileSaveDialog`处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:45:41.140

似乎文件对话框不会从父窗口继承其布局。我对此感到有些惊讶。

我认为您可能需要通过添加`WS_EX_LAYOUTRTL`到对话窗口来强制解决问题。这并不容易做到，因为文件对话框界面没有为您提供窗口句柄。您可以使用 CBT 挂钩来解决此问题。

这是一个对所有对话框（具有类名`#32770`）强制 RTL 的示例。我用 Delphi 编写了这个例子，因为这是我个人最熟悉的。我相信你可以将它翻译到你的 MFC 环境中。

首先安装钩子：

```
hook := SetWindowsHookEx(WH_CBT, CBTProc, 0, GetCurrentThreadId); 
```

当您需要卸载它时：

```
UnhookWindowsHookEx(hook); 
```

和钩子程序：

```
function CBTProc(nCode: Integer; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
var
  wnd: HWND;
  ClassName: array [0..63] of Char;
  Style: DWORD;
begin
  if nCode=HCBT_ACTIVATE then begin
    wnd := wParam;
    GetClassName(wnd, ClassName, Length(ClassName));
    if ClassName='#32770' then begin
      Style := GetWindowLongPtr(wnd, GWL_EXSTYLE);
      SetWindowLongPtr(wnd, GWL_EXSTYLE, Style or WS_EX_LAYOUTRTL);
    end;
  end;
  Result := CallNextHookEx(hook, nCode, wParam, lParam);
end; 
```

这就是我从左到右的英文操作系统上的样子：

![在此处输入图像描述](https://i.stack.imgur.com/ZbPMP.png)

# encryption - 使用 Wireshark 解密 TLS (Diffie-Hellman) 消息？

> ID：16185720
> 
> 赞同：2
> 
> 时间：2013-04-24T07:16:30.120
> 
> 标签：encryption, public-key-encryption

是否可以使用 Wireshark 使用 Diffie-Hellman 算法解密和查看通过 TLS 加密的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-10T21:31:04.410

您**可以**解密 DHE_RSA 密码套件。我自己在这里做了（通过 socks5-ssh 隧道的 https 连接）。请注意，隧道和 https 连接都在我自己的完全控制下，即您必须在运行 Wireshark 跟踪的情况下启动隧道。

在我的情况下，我需要一个比我的操作系统的默认 Wireshark 安装（1.10 左右）更新的版本，所以从源代码编译 1.12.1 并且令人惊喜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:50:29.463

不会。受 TLS 保护的消息不易受到窥探攻击。

使用参与者的公钥来保护密钥材料的初始交换。随后的数据交换受到只有这些参与者知道的会话密钥的保护。

# iphone - iOS注册时需要的邮箱

> ID：16185722
> 
> 赞同：1
> 
> 时间：2013-04-24T07:16:41.587
> 
> 标签：iphone, ios, registration

我正在开发需要用户先注册的 iOS 应用程序。设计要求之一是要求用户提供电子邮件地址，该地址随后应由后端服务器验证。

我被警告过，Apple 禁止 iOS 应用程序要求用户发送电子邮件。但是，我在 Apple 网站上的任何地方都找不到对此类声明的任何引用。

这个说法是真的吗？我可以要求输入电子邮件地址吗？如果这是真的，我需要对此进行真正的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:20:23.977

当然可以。大多数需要注册的应用程序都会要求用户提供电子邮件/密码对或用户名/密码。就我而言，以及我一直在做的申请数量，我对这种要求从来没有任何问题。

仍然：

> 17.2：要求用户分享个人信息（例如电子邮件地址和出生日期）才能正常运行的应用程序将被拒绝
> 
> 我们发现您的应用要求客户注册个人信息才能访问非基于帐户的功能，这不符合 App Store 审核指南。
> 
> 应用程序在允许访问与用户无关的应用程序功能和内容之前不能要求用户注册。需要共享个人信息的用户注册必须是可选的或与帐户特定的功能相关联。此外，请求的信息必须与功能相关。
> 
> 尽管 App Store Review Guidelines 的第 11.6 条要求应用程序向单个用户拥有的所有 iOS 设备提供订阅内容，但强制用户注册以满足此要求是不合适的；此类用户注册必须是可选的。
> 
> 向用户明确说明，注册将使他们能够从任何 iOS 设备访问内容，并为他们提供随时注册的方式，如果他们希望以后扩展对其他 iOS 设备的访问权限

# python - 在 GTk python 中禁用文本框的输入

> ID：16185724
> 
> 赞同：1
> 
> 时间：2013-04-24T07:16:46.577
> 
> 标签：python, user-interface, gtk

我正在使用 Gtk 在 python 中开发一个简单的计算器。`4*3`在该计算器中，如果输入并`=`按下诸如此类的表达式，则会显示结果。但在那之后，如果按下任何其他按钮，数字会附加在屏幕上（即）如果我按下`4*3` `=`它会显示`12`，然后我按下 3 并得到`123`。我用了

```
tb.set_editable(False) 
```

但它只停止了键盘输入，当我按下任何按钮时问题仍然存在。我想改变它，如果按下一个新条目，屏幕应该清除......

请帮我看看我能做些什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:04:59.700

有一个最初设置为 False 的变量，比如说我们称之为计算。

在您的按键事件回调中：

*   如果按键是“=”，则附加计算值并将计算设置为 True。

*   如果计算为 True 并且按键不是“=”，请在设置之前清除该值并将计算设置为 False。

# web-services - “AMP 堆栈”和 WAMP 之间有什么区别吗？

> ID：16185725
> 
> 赞同：0
> 
> 时间：2013-04-24T07:16:48.977
> 
> 标签：web-services

我为我缺乏知识而道歉，但我要设置一个网络服务器并需要一些帮助。截至目前，我使用 Acquai Dev Desktop，即我使用带有“AMP 堆栈”的 Drupal。我也读过关于 wamp 的文章，但我真的不明白有什么区别。感谢任何可能的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T20:21:16.850

由于尚未回答此问题，因此从我的评论转移并扩展：

*AMP 通常表示 LAMP、MAMP 或 WAMP，首字母分别表示 Linux、Mac 和 Windows。

因此，书面要求是说 Drupal 需要 Apache ¹、MySQL 和 PHP，但它可以在任何支持 AMP 的操作系统上运行。在市场的低端，Linux 运行起来更便宜，因为您（通常）不需要支付许可费，但随着您的需求增长，您可能有理由运行 Windows Server 或 OS X。PHP 有传统上在 Unix/Linux 上运行得更好，但最近 Zend 和 Microsoft 一直在提高 Windows 上的稳定性和性能。

您也可以在 Mac 上托管，但在我看来，这被认为是相对小众的。由于可以存储在服务器机柜内的机器数量，许多主机提供“Mac Mini 托管”。我希望这会非常稳定，因为操作系统是基于 Unix 的。

¹通常对 Apache 的要求只是使用`.htaccess`和`mod_rewrite`. 如果您对编写和使用 IIS 替代品有信心，您可以根据需要从 Apache 切换。

# drools - JBPM 5 - 流程实例变量更改命令

> ID：16185729
> 
> 赞同：0
> 
> 时间：2013-04-24T07:17:11.743
> 
> 标签：drools, jbpm

如何在 JBPM 中设置/修改正在运行的流程实例的流程实例变量？是否有任何预定义的命令类来设置 process-instance-variables ？

我可以看到一些命令，例如`org.drools.command.SetVariableCommandFromLastReturn`&& `org.drools.command.SetVariableCommandFromCommand`

我可以使用这些命令吗？如何使用这个命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:49:26.263

截至目前，我正在使用`GenericCommand`.

```
kSession.execute(new GenericCommand<Boolean>() {
            public Boolean execute(Context context) {
                //Get session in the command context
                StatefulKnowledgeSession ksession = ((KnowledgeCommandContext) context).getStatefulKnowledgesession();
                //Get the process instance
                ProcessInstance processInstance = (ProcessInstance) ksession.getProcessInstance(processInstanceId);
                //Get variable scoprts
                VariableScopeInstance variableScope = (VariableScopeInstance) processInstance.getContextInstance(VariableScope.VARIABLE_SCOPE);
                Iterator<String> piStateItr=piStateVariables.keySet().iterator();
                //Modify required variables
                while(piStateItr.hasNext()){
                    String variableName=piStateItr.next();
                    String variableValue=piStateVariables.get(variableName);
                    logger.debug(">>> Setting State - key "+variableName +" , to "+variableValue );
                    variableScope.setVariable(variableName, variableValue);
                }
                return true;
            }
        }); 
```

# iphone - 同一标签栏项目的多个视图

> ID：16185734
> 
> 赞同：0
> 
> 时间：2013-04-24T07:17:21.907
> 
> 标签：iphone, uiviewcontroller, uinavigationcontroller, uitabbarcontroller, storyboard

我很抱歉我的英语。我正在尝试开发我的第一个应用程序，并且我有一个连接到某个视图控制器的标签栏控制器。在其中一个中，我有一些图像，当我单击图像时，UITapGestureRecognizer 导航到导航控制器，如此链接中的情节提要：

[http://www.manuelragazzini.it/storyboard_navigation.png](http://www.manuelragazzini.it/storyboard_navigation.png)

这是可行的，但有一个问题。在导航控制器视图中没有标签栏。我想将标签栏控制器也保留在“导航控制器视图”中。有办法保留标签栏吗？

如果可能的话，我想保留第一个视图控制器而没有导航控制器，并且只有当用户点击图像时，导航控制器才会在新视图控制器中出现标签栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:32:07.720

您的地图视图和导航控制器之间的 segue 是 Modal Segue，因此您看不到标签栏是正常的。我认为您应该在第一个屏幕上使用导航控制器并隐藏您不想使用的内容，这是做您想做的事情的更简单方法。

编辑：你的故事板应该是这样的：

![故事板](https://i.stack.imgur.com/crXq3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:40:57.567

您对 UINavigation 工作原理的误解。当您移动到一个新的视图控制器时，最后一个视图控制器被压入堆栈，新的视图控制器可见。如果你想显示一个带有标签栏的新控制器，那么也将标签栏添加到你的新控制器中。请务必仔细阅读此内容

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

# java - Java查找列表的重复纬度/经度 并保留每个条目的计数

> ID：16185738
> 
> 赞同：0
> 
> 时间：2013-04-24T07:17:26.733
> 
> 标签：java, collections

我有一个场景，其中我有一个列表，我必须在其中找到重复的条目（重复的纬度/经度）并存储每个条目的计数。

所以可以说我这里有 6 个条目

```
LatLongObject1  -- >  "lat": 30.54203,"lon": -87.845879
LatLongObject2  -- >  "lat": 31.54203,"lon": -86.845879
LatLongObject3  -- >  "lat": 32.54203,"lon": -88.845879
LatLongObject4  -- >  "lat": 33.54203,"lon": -89.845879
LatLongObject5  -- >  "lat": 34.54203,"lon": -85.845879
LatLongObject6  -- >  "lat": 30.54203,"lon": -87.845879 
```

所以我可以得到类似的东西：

```
LatLongObject1  -- >  Count 2
LatLongObject2  -- >  Count 1
LatLongObject3  -- >  Count 1
LatLongObject4  -- >  Count 1
LatLongObject5  -- >  Count 1
LatLongObject6  -- >  Count 2 
```

我知道这可以使用两个 for 循环来实现，但我不想这样做，因为时间复杂度太高。请有更好的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:22:36.033

使用`Map<LatLongObject1, Integer>`代替`list`并更新您找到的每个键的值。

# javascript - jqgrid：保存后的事件

> ID：16185741
> 
> 赞同：0
> 
> 时间：2013-04-24T07:17:30.963
> 
> 标签：javascript, jqgrid

在我编辑一行并按 Enter 键保存更改后，我想做一些额外的 ajax 处理。我该怎么做呢？

我有这个代码，但它只在我按下内联导航上的保存按钮时才有效

```
$("#"+tbl).jqGrid('inlineNav',"#"+nav, {
        edittext:"Edit",
        addtext:"Add", 
        savetext:"Save", 
        canceltext:"Cancel",
        addParams:{
            useDefValues: true,
            addRowParams: {
                keys: true,
                extraparam:{cid:$_GET['cid'], tbl:tbl},
                oneditfunc: setFareDefaults
            }

        },
        editParams:{
            keys: true,
            extraparam:{cid:$_GET['cid'], tbl:tbl},
            aftersavefunc : function(id){

                $.post('svc/check_pub.php',{cid:$_GET["cid"]}, function(data){
                    var ret = parseInt(data);
                    if(ret) {
                        $("#pubtxt").html("<small style='font-weight:normal;float:right;color:orange'>[this campaign is unpublished]</small>");
                    } else {
                        $("#pubtxt").html("<small style='font-weight:normal;float:right;color:green'>[this campaign is published]</small>");
                    }
                },"text");  
            },

            oneditfunc: setFareDefaults
        }

    }); 
```

# symfony - Symfony 2.2 通过服务创建表单

> ID：16185743
> 
> 赞同：1
> 
> 时间：2013-04-24T07:17:34.543
> 
> 标签：symfony, symfony-forms

我在 Symfony 2.2 中我想通过服务创建一个小联系表。我玩弄了服务配置和表单组件工厂，但每次我遇到以下异常：

```
An exception has been thrown during the rendering of a template ("Catchable Fatal Error: Argument 1 passed to Symfony\Component\Form\Form::__construct() must be an instance of Symfony\Component\Form\FormConfigInterface, string given

parameters:
  anchorbrands_common.contact.form.type.class: Anchorbrands\Bundle\CommonBundle\Form\Type\ContactFormType
  anchorbrands_common.contact.form.name: anchorbrands_commonbundle_contactformtype

services:
  anchorbrands_common.footer.contact.form:
    class: Symfony\Component\Form\Form
    factory-method: createNamed
    factory-service: form.factory
    arguments: ["%anchorbrands_common.contact.form.type.class%", "null"]

  anchorbrands_common.footer.contact.form.type:
    class: %anchorbrands_common.contact.form.type.class%
    arguments: ["null"]
    tags:
        - { name: form.type, alias: %anchorbrands_common.contact.form.name% } 
```

如果有人能给我一些建议，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T14:55:00.817

由于拼写错误，我遇到了同样的问题：

*   `factory-method`并且`factory-service`是错误的，`factory_method`并且`factory_service`是正确的。

我不确定您是否可以将 a`%parameter%`用作`alias`您的`form.type`标签：

*   如果您仍然有疑虑，请尝试使用原始字符串（`anchorbrands_commonbundle_contactformtype`在您的情况下）。

您的服务中缺少一个参数`anchorbrands_common.footer.contact.form`，第一个参数似乎是错误的：

*   请尝试：（`[anchorbrands_commonbundle_contactformtype, anchorbrands_commonbundle_contactformtype, null]`表单名称和表单类型的别名可以相同）

*   如果可行，请尝试使用`%anchorbrands_common.contact.form.name%`等效参数。

我希望这可以帮助你。

参考：[将 Symfony 2 表单定义为服务](http://www.webtipblog.com/define-a-symfony-2-form-as-a-service/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:32:04.167

你为什么用双倍配额来围绕你的论点？

尝试以这种方式更改（您不需要字符串，但我想您根本不需要字符串）参数段落：

```
services:
  anchorbrands_common.footer.contact.form:
    class: Symfony\Component\Form\Form
    factory-method: createNamed
    factory-service: form.factory
    arguments: [%anchorbrands_common.contact.form.type.class%, null]

  anchorbrands_common.footer.contact.form.type:
    class: %anchorbrands_common.contact.form.type.class%
    arguments: [null]
    tags:
        - { name: form.type, alias: %anchorbrands_common.contact.form.name% } 
```

## 记住

错误报告很重要，您应该仔细阅读它们，因为它们可以帮助您很多

# c# - 资源文件，但不在文化代码上

> ID：16185750
> 
> 赞同：0
> 
> 时间：2013-04-24T07:17:58.417
> 
> 标签：c#, asp.net-mvc-4, localization

使用资源文件，您可以轻松更改视图中的文本以显示本地化语言。但据我所知，它始终适用于现有文化（EG：`nl-NL`或`en-US`或只是`fr`）。

然而，我们的应用程序不需要基于文化的不同资源文件，而是基于组织。是否可以定义像“resource.company1.xml”、“resource.company2.xml”这样的资源文件？

选项 2：这些组织通过单独的网站/应用程序池访问相同的代码，因此它们都有自己的私有静态类。在应用程序启动时将所有字符串加载到静态类中然后从那里访问它们是否是一种好方法？一旦它们被设置，它们就不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:20:17.893

> 是否可以定义像“resource.company1.xml”、“resource.company2.xml”这样的资源文件？

不，资源与文化一起使用。

> 选项 2：这些组织通过单独的网站/应用程序池访问相同的代码，因此它们都有自己的私有静态类。在应用程序启动时将所有字符串加载到静态类中然后从那里访问它们是否是一种好方法？

是的，这是一种可能的解决方案。您可以通过解析相应的 XML 文件来加载这些值，`Application_Start`并将它们存储为您以后可以访问的静态属性。

# jquery - 如何为 Handsontable 创建动态列？

> ID：16185751
> 
> 赞同：4
> 
> 时间：2013-04-24T07:17:59.487
> 
> 标签：jquery, handsontable

我正在使用 Handsontable 创建一个可以在 web 和 excel 之间复制/粘贴的 web 网格，我尝试使用下面的代码，它工作正常：

```
 var first = true;
  var exampleGrid = $("#exampleGrid");
  exampleGrid.handsontable({
      rowHeaders: true,
      colHeaders: true,
      stretchH: 'all',
      minSpareCols: 0,
      minSpareRows: 0,
      height: 600,
      columns: [
      { data: "Id", title: "ID", type: "text" }, //'text' is default, you don't actually have to declare it
      { data: "Name", title: "Name", type: "text" },
      { data: "DisplayColor",
      title: "Display Color",
      type: 'autocomplete',
      source: ["yellow", "red", "orange", "green", "blue", "gray", "black", "white"]
      },
      { data: "Description", title: "Description", type: 'text' },
      { data: "IsDeleted", title: "Is Deleted", type: 'checkbox' }
      ],
      colWidths: [400, 100, 60, 100, 50, 40, 40, 60], //can also be a number or a function
      contextMenu: false,
  }); 
```

现在我需要创建带有动态列的网络网格，我尝试用下面的函数替换列列表，但它不起作用：

```
 columns:
        function () {
            var cols = [];
            for (var i = 0; i < 1; i++) {
                var col = new Object();

                col.data = "Name";
                col.title = "Name" + i.toString();
                col.type = "text";
                cols[i] = col;
            }
            return cols;
        }, 
```

是否可以在 Handsontable 网格中创建动态列？怎么做？

我是 JavaScript 初学者，如果我犯了任何错误，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T02:11:04.997

自己解决了这个问题，函数不能直接在列定义中使用，但是变量是允许的，所以下面的代码有效：

```
var dynamicColumns = [];
for (var i = 0; i < 366; i++) {
    var col = new Object();
    col.data = "Name";
    col.title = "Name " + i.toString();
    col.type = "text";
    dynamicColumns.push(col);
}

skillGrid.handsontable({
    // ...
    columns: dynamicColumns,
    // ... 
```

# log4cxx - log4cxx configureandwatch没有效果？

> ID：16185752
> 
> 赞同：0
> 
> 时间：2013-04-24T07:18:02.830
> 
> 标签：log4cxx, propertyconfigurator

我的配置功能有问题。单击按钮时，我想重新加载配置文件。

我调用函数

```
std::string filepath = "../../configurationfile.txt"
log4cxx::PropertyConfigurator::configureAndWatch(log4cxx::File(filepath)); 
```

我也试试这个：

```
log4cxx::PropertyConfigurator::configure(log4cxx::File(filepath)); 
```

但文件仅在 60 秒后重新加载。

您对如何强制重新加载文件有任何想法吗？第一次，我使用 configureAndWatch 功能进行配置。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T18:20:40.823

我不知道你是否在这个问题上需要帮助，但我还是会继续回答这个问题。

configureAndWatch() 通常用于生成一个线程，该线程将定期检查配置文件的更改。默认延迟为 60 秒，您可以使用此修改该值

```
int delay_in_milliseconds = /* Small delay value */
log4cxx::PropertyConfigurator::configure(log4cxx::File(filepath), delay_in_milliseconds); 
```

但是，我建议不要使用这种技术，因为它会产生不必要的检查。而是尝试使用与调用的按钮相关联的单独函数

```
LogManager.resetConfiguration(); 
```

其次是

```
PropertyConfigurator.configure(filepath); 
```

原因是使用 configure() 调用现有配置不会立即清除或重置。虽然，我还没有尝试过，但我相信调用 resetConfiguration() 函数应该在那一刻应用更改。

# javascript - angular.js：模型更新不会触发视图更新

> ID：16185753
> 
> 赞同：24
> 
> 时间：2013-04-24T07:18:11.827
> 
> 标签：javascript, angularjs, angularjs-scope

我目前正在开发基于 Web 的 twitter 客户端，因此我使用了 angular.js、node.js 和 socket.io。我通过 socket.io 将新推文推送到我的客户端，服务等待新推文。当一条新推文到达时，服务会通过 $broadcast 发送一个事件。

在我的控制器中是一个事件侦听器，其中传入的推文正在一个单独的函数中处理。这个函数只是将新推文推送到我的推文范围内。

现在，我的问题是，我的观点没有更新，但我可以看到我的范围在扩大。也许你们中的一个人有一个想法，我该如何解决这个问题？

另外我的代码：

服务：

```
(function () {
    app.factory('Push', ['$rootScope', function ($rootScope) {
        socket.on('new-tweet', function (msg) {
            $rootScope.$broadcast('new-tweet', msg);
        });
    }]);
}()); 
```

控制器：

```
(function () {
    app.controller("StreamCtrl", function StreamCtrl ($scope, $rootScope, $http, Push) {
        $scope.tweets = [];

        $http
            .get('/stream')
            .then(function (res) {
                $scope.tweets = res.data;
            });

        $scope.addTweet = function (data) {
            $scope.tweets.push(data);
            console.log($scope.tweets);
        };

        $rootScope.$on('new-tweet', function (event, data) {
            if (!data.friends) {
                $scope.addTweet(data);
            }
        });
    });
}()); 
```

整个项目在这里：[https ://github.com/hochitom/node-twitter-client](https://github.com/hochitom/node-twitter-client)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-24T09:06:37.867

在 addTweet 中添加下面的代码行，问题就解决了

```
$scope.addTweet = function (data) {
            $scope.tweets.push(data);
            $scope.$apply();
            console.log($scope.tweets);
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-18T20:25:18.797

我更喜欢使用[`$timeout`](https://docs.angularjs.org/api/ng/service/$timeout)（不要忘记将其注入您的控制器）而不是`$apply`：

```
 app.controller("StreamCtrl", function StreamCtrl ($scope, $timeout $rootScope, $http, Push) {

    //...

    $scope.addTweet = function (data) {
        $timeout(function() {
            $scope.tweets.push(data);
            console.log($scope.tweets);
        });
    };

    //...

}); 
```

# jquery - 使用 jquery ajax 生成动态 div id

> ID：16185755
> 
> 赞同：0
> 
> 时间：2013-04-24T07:18:17.457
> 
> 标签：jquery, ajax

我想将唯一 id 分配到由 jquery Ajax 动态创建的 HTML DIV 中。

```
$.ajax({
        type: 'xxx',
        data: 'xxx',
        url: 'xxx',
        success: function(data) {

                var repeatID =1;

                $.each(data.data, function(i, v){

                    repeatID++;

                    //alert(repeatID);

                    $("#divId").append('<div class="single" id="my_test_' + repeatID + '">'
                                                    +'<div class="any_name"> '+ v.Name +' </div></div>');
                });
        error:...
}); 
```

我需要为“single”类分配一个唯一的 id。在每个循环中，repeatID 在追加之外增加（例如，如果我取消注释警报并且服务器返回了 3 个数组，那么它将发出警报消息 3 次。）。但是在 append 里面它并没有增加。所有值都保持最初分配的值 1。因此，对于三个 DIV，我得到了 id 'my_test_1'。

如果有 3 个数组，我期望得到 'my_test_1'、'my_test_2'、'my_test_3'。我在哪里做错了？

请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:26:49.627

您可以只使用 index 参数（在您的情况下`i`为 ）作为计数器。您不需要`repeatID`，因为函数中的回调参数`each`带有您想要的功能。

```
$.each(data.data, function(i, v){
    $("#divId").append('<div class="single" id="my_test_' + (i+1) + '">'
                          +'<div class="any_name"> '+ v.Name +' </div></div>');
} 
```

*我已经使用`(i+1)`了，因为您似乎希望它是基于 1 的。*

**小提琴：http:**
[//jsfiddle.net/3wFE4/](http://jsfiddle.net/3wFE4/)

**更多关于 jQuery 的信息：http `each`:**
[//api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

> jQuery.each（集合，回调（indexInArray，valueOfElement））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:27:21.620

您可以尝试将增量放在`append()`：

```
var repeatID =1;
$.each(data.data, function(i, v){
  $("#divId").append('<div class="single" id="my_test_' + repeatID + '">'+
   '<div class="any_name"> '+ v.Name +' </div></div>');
   repeatID++;
}); 
```

* * *

不知道你的问题，但第二个对我来说绝对没问题。

### [如果你想在这里的演示小提琴中看到这个](http://jsfiddle.net/2Dzpd/)

# android - 如何在数组列表中获取微调器值

> ID：16185757
> 
> 赞同：0
> 
> 时间：2013-04-24T07:18:18.173
> 
> 标签：android, arraylist, spinner

我有这段代码，其中有一个带有国家/地区名称的微调器。我在 strings.xml 文件中声明了这些名称。现在，我想要的是当用户选择一个国家/地区时，将值发送到 arraylist，然后使用 post 参数我想执行一个 xml 文件。这是我的代码：

```
public class AddBank extends Activity implements
AdapterView.OnItemSelectedListener{

    EditText et1,et2,et3,et4,et5,et6,et7,et8,et9;
    Spinner spinner1;
    Button add;
    String userpin;
    TextView country;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addbank);

        Bundle gotuser= getIntent().getExtras();
        userpin= gotuser.getString("username");  

      et1=(EditText)findViewById(R.id.editText1);  
      et2=(EditText)findViewById(R.id.editText2);
      et3=(EditText)findViewById(R.id.editText3);
      et4=(EditText)findViewById(R.id.editText4);
      et5=(EditText)findViewById(R.id.editText5);
      et6=(EditText)findViewById(R.id.editText6);
      et7=(EditText)findViewById(R.id.editText7);
      et8=(EditText)findViewById(R.id.editText8);
      et9=(EditText)findViewById(R.id.editText9);
      spinner1=(Spinner)findViewById(R.id.spinner1);
      add=(Button)findViewById(R.id.button1);
      country=(TextView)findViewById(R.id.textView11);

      ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
              this, R.array.country_array, android.R.layout.simple_spinner_item);
      adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      spinner1.setAdapter(adapter);

         add.setOnClickListener(new OnClickListener() { 

                @SuppressWarnings("deprecation")
                public void onClick(View v) { 

                    if(et1.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Account Type field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et2.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Bank Name field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et3.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Account Name field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et4.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Account Number field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et5.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Bank Address field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et6.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Bank City field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et7.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Bank Zip field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et8.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Bank SWIFT field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else if(et9.getText().toString().equals("")){
                        AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                        alertDialog.setTitle("oops!");
                        alertDialog.setMessage("Bank IFSC field is empty");
                        alertDialog.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                  //dismiss the dialog  
                                }
                            });
                        alertDialog.show();
                    }
                    else {

                            AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create(); 
                            alertDialog.setTitle("ModeooPay:");
                            alertDialog.setMessage("Are you sure you want to send this money?");
                            alertDialog.setButton( Dialog.BUTTON_POSITIVE, "Yes", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {

                                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

                                postParameters.add(new BasicNameValuePair("femail",  
                                        et1.getText().toString()));

                                postParameters.add(new BasicNameValuePair("amount",   
                                        et2.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        et3.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        et4.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        et5.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        et6.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        et7.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        et8.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        et9.getText().toString()));

                                postParameters.add(new BasicNameValuePair("des",   
                                        country.getText().toString()));

                                postParameters.add(new BasicNameValuePair("username",  
                                        userpin));

                                 /*            String valid = "1";*/      

                                String response = null;

                                try {

                                   response = CustomHttpClient.executeHttpPost("http://192.168.0.2:11132/androidxml/confirmtransfer.php",postParameters);

                                   String res = response.toString();

                                   //res = res.trim();

                                   res = res.replaceAll("\\s+","");
                                   Log.i("log_tag", "reedem voucher  " + res);

                                   // error.setText(res);

                                   if (res.equals("1")) {

                                       AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                                        alertDialog.setTitle("Successfull");
                                        alertDialog.setMessage("Bank Added Successfully.");
                                        alertDialog.setButton("Ok",
                                        new DialogInterface.OnClickListener() {
                                              public void onClick(DialogInterface dialog, int which) {
                                                  dialog.cancel();
                                              }
                                        });
                                        alertDialog.show();

                                   }

                                else {

                                       AlertDialog alertDialog = new AlertDialog.Builder(AddBank.this).create();
                                        alertDialog.setTitle("Authentication");
                                        alertDialog.setMessage("Bank with this information already exists.");
                                        alertDialog.setButton("Ok",
                                        new DialogInterface.OnClickListener() {
                                              public void onClick(DialogInterface dialog, int which) {
                                                 dialog.cancel();
                                              }
                                        });
                                        alertDialog.show();
                                   }

                                } 

                                catch (Exception e) {

                                }

                               }
                               });

                            alertDialog.setButton( Dialog.BUTTON_NEGATIVE, "NO", new DialogInterface.OnClickListener()    {
                                  public void onClick(DialogInterface dialog, int which) {

                                      dialog.cancel();

                                  }
                                  });

                                alertDialog.show();

                    }
                }

             });   

    }

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        country.setText(country_array[arg2]);
        // TODO Auto-generated method stub

    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
        country.setText("");

    }

} 
```

现在，在检索微调器值的方法中，我收到“country_array 无法解析为变量”的错误。请在这里帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:25:43.060

希望这可以帮到你。

```
Resources res = getResources();
String[] country_array = res.getStringArray(R.array.country_array);
.....    
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    country.setText(country_array[arg2]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:31:42.087

在您的活动中声明 country_array：

```
AdapterView.OnItemSelectedListener{

EditText et1,et2,et3,et4,et5,et6,et7,et8,et9;
Spinner spinner1;
Button add;
String userpin;
TextView country;

//add this
String [] country_array;

@Override
public void onCreate(Bundle savedInstanceState) {
...
country_array = res.getStringArray(R.array.country_array);
...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T07:23:17.587

在将数组传递给您的数组适配器时，请给出：

```
getResources().getStringArray(R.array.country_array) 
```

# c# - '#' 字符串中的运算符

> ID：16185759
> 
> 赞同：-2
> 
> 时间：2013-04-24T07:18:24.800
> 
> 标签：c#, string

我有一段代码，我试图找出`hash(#)`字符串里面的内容。
以下是一段代码。

```
var key = string.Format( "{0}#{1}#{2}", value1, value2, value3);

if ( !instance.Map.ContainsKey( key ) )
{
   throw new Exception("Dear Customer, your  order cant be identified.");
} 
```

我想我从来没有`#`用过`C#`

如果我没有提供`value3`它仍然可以找到密钥。因此我认为 # 表示强制或其中的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T07:20:16.040

没什么，假设您有，它们只会在输出字符串中：

```
var key = string.Format("{0}#{1}#{2}", 1, 2, 3); 
```

您的输出字符串将是：

```
1#2#3 
```

它 ( `#`) 将用作结果字符串中的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:24:02.647

在这里，开发人员希望`#`在值之间附加这个字符串。在这段代码中，C# 中的 # 没有特殊用途，所以不要因此而混淆自己。你的`#`输出可以是这样的

```
int value1= 1;
int value1= 1;
int value1= 1;
var key = string.Format( "{0}#{1}#{2}", value1, value2, value3);

Output:1#1#1 
```

所以它只是字面上没什么特别的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:24:27.980

它只是文字输出的一部分，并没有被解释为任何特殊的东西。

如果您对此进行了测试，您会立即看到每个参数 ( `{n}`) 都被参数参数数组中指定的适当值替换，并且`#`保持原样 - 逐字输出。

# arrays - 您如何从算法中表示大型矩阵以在调试时帮助您？

> ID：16185761
> 
> 赞同：4
> 
> 时间：2013-04-24T07:18:25.707
> 
> 标签：arrays, matrix, sparse-matrix, data-representation

对此的基本方法是打印矩阵。但是当你得到更大的数字时，即使你正在调试（该算法可能不适用于 2 x 2 或 4 x 4 矩阵），它开始变得非常快。

这可以是特定于语言的或与语言无关的，因为我总是可以在调试时将结果打印出来并将它们传送到其他程序。

在这种情况下，您使用什么技巧来发现差异？你使用规范吗？声音的？视频？其他（混合）表示？

我知道这有点含糊，但我不在乎它是否适用于我目前的情况。它可能会在未来出现，而且看看其他人如何进行调试总是很有成效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T13:04:48.157

根据我的经验，矩阵以表示其实际内容的方式打印 - 您可以创建表示其所有值的字符串，并且在知道它们的大小后，使用空格来调整所有这些值的位置。但是正如您注意到的那样，大矩阵将具有巨大的打印尺寸。

或者，您可以只打印它们的尺寸以及您拥有的一些关于它们的信息 - 如果您创建了 Hilbert 矩阵并且您没有更改任何内容，您可以显示有关此的通知。

如果您受限于`toString()`方法或其等效方法，您必须决定哪些信息对您最重要。但通常——无论是客观语言还是结构化语言——您都可以简单地创建一些专门用于显示不同部分信息的类/函数。

更重要的是，在调试过程中，例如 Java，您可以使用表达式调用对象上的某些方法，因此可以仅显示维度，`toString()`但可以创建单独的方法 ( `dump()`?) 以完整显示其内容。

如果您不能使用表达式和/或断点，您可以 - 仅出于调试目的 - 将所有附加信息写入文件而不是控制台。例如，在 C 中，您可以在输出流中使用一些全局变量 - 例如 null 表示根本不显示任何内容，或者如果您设置了标准输出/文件。

总而言之，这在很大程度上取决于您选择的语言。它会自动确定哪些方法被确认为*干净*或*脏*。但是存储附加信息、创建多种显示方式或级别并选择您需要的信息，对我来说听起来是个好主意。

例如，我将如何在 Java 中解决这个问题：

*   覆盖`toString()`以显示类似的内容`[matrix: 4x4, square(det = 5.33323, dim = 3)]`，

*   创建`dump()`方法以返回具有所有值的格式化字符串，

*   创建`dumpForMatlab(File)`以 Matlab/Octave 格式存储矩阵的方法。

调试期间：

*   基本信息将在对象预览中可用，

*   表达式将显示完整的矩阵，当我想看看它内部是否发生了变化时，

*   更深入的分析将由 Matlab/Octave 或其他专用于处理矩阵的工具完成。

当然，如果我使用 CI 会改变我的方法以匹配语言和可用工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T10:09:29.433

可能[这](http://publik.tuwien.ac.at/files/PubDat_207584.pdf)会有所帮助。它提供了一个插件，可以在调试时可视化大型数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T13:53:57.700

如果您的矩阵表示高维数据，例如每一行都是一个数据样本，其中每个数据点都是高维的。执行主成分分析很有用。这会降低数据的维度。因此，您可以将其降低到二维并在图表上打印数据。如果您想为数据拟合曲线，但不知道要拟合哪种曲线（线性、多项式、正弦曲线等），这非常有用。查看此[链接](https://en.wikipedia.org/wiki/Principal_component_analysis)以了解有关 PCA 的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T15:42:21.657

有一个重要规则：检索您在数据中查找的内容的时间。这通常包括：

*   导出数据的时间（序列化/转储）
*   处理数据的时间（导入和清理/过滤）
*   寻找你正在寻找的东西的时间（定位）

根据您想要显示的内容，我通常会这样：

*   聚合/减少数据集，以便您可以只显示您想看到的内容。例如：a 到 b 之间的值、日期在 D 之前等……</li>
*   以有效的方式显示数据。显然，NxN 通常可以表示为图像，这是在屏幕上显示某个东西的最自然方式，如果它是 1xN，是否有可以依赖的周期性来制作矩阵而不是这个数组？
*   使用颜色：为您感兴趣的值着色。使用颜色可以有效地让大脑定位相关值。想想赤字以红色显示的会计。
*   Unse动画：比颜色更难，闪烁值与颜色一样快。

注意：我可能会继续使用 3D，即将 3D 中的数据转换为更好地可视化它而不是音频（只要您的数据集显然与音频本身没有直接关系）。

在编码方面：

*   仍然有内部调试器，使用 GCC，您可以在控制台中调用一些功能，例如打印对象或编辑摘要格式。当您处于断点并且只是想知道什么是某事时，这些是有效的[某处]；或者只是愿意更好地显示您的自定义数据块结构。在任何脚本语言中，您都可以在断点中或在数据存在时随时执行此操作。使用外部工具如下：
*   最快但最糟糕的方法是将当前内存转储到文件中，然后您将能够分析或读取它，例如十六进制阅读器（某些代码编辑器确实具有此功能）。
*   第二种方法是为此任务使用电子表格，然后您可以将数据导出为 CVS 格式，您只需要编写正确的序列化程序即可。这很好，特别是如果您想制作一些数据图表……</li>
*   我有时使用的第三种方法是以 JSON 格式导出数据，JSON 格式比 XML 更好，因为任何序列化的内容都可以被解析回来并使用与导出相同的结构。无论如何......然后构建一个小网页来加载和显示您的数据非常容易。当我使用 http 时，我经常使用这个技巧来验证算法的正确性。对于大量转储，您还可以将 jSON 导入到 nosql 数据库，例如 MongoDB（用于 JSON），或者如果您在 CVS 中导出到 sql 数据库中。
*   显然，如果您使用带有 GUI 的语言，则在画布中编写自己的绘图可能是一种选择，快速可视化但需要长时间编码才能获得结果（考虑为此使用框架）。
*   导出为 Mathlab / GNU Octave 格式将允许您使用它内置的可视化分析工具和绘图
*   我有时使用并且我真正喜欢的一个很好的交易是将数据导出为 32 位图像。然后可以在包括 mathlab 在内的任何图像编辑器中打开此图像，也可以在任何图像编辑器（如 gimp / photoshop）中打开此图像。如果您需要编写自己的图像分析器，您可以尝试 ImageJ 或（更有趣）简单地使用着色器构建器，例如[http://glsl.heroku.com](http://glsl.heroku.com)最后一个选项是一个很好的选项，因为您仍然可以同时处理数据和代码来处理/显示它。对于 OSX 用户，有 OpenGL Shader Builder，它也可以作为桌面应用程序。最后一种方法对我来说真的很重要，因为您可以真正通过纹理导入数据，然后对着色器进行编码，最后调整输入参数（例如可能是阈值）以实时查看结果。正如我在一开始所写的那样，从导出到本地化您要查找的内容之间的时间很重要。由于您的 OpenGL 和大脑，使用这种方法可以大大减少搜索的处理和时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-06T12:29:12.783

我更喜欢使用图形绘图库。很容易缩放输入，并以所需的间隔查看样本，或查看整个图片。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-11-25T13:37:45.807

在我看来，算法中的大矩阵让你了解算法结构。如果您想查看结果，控制台和打印结果字符串都可以。

# string - 将数据库中的字段读入字符串会得到我无法删除的空格

> ID：16185763
> 
> 赞同：0
> 
> 时间：2013-04-24T07:18:34.677
> 
> 标签：string, vb6

我正在使用一家名为 Visma 的公司的 API。当我从他们的数据库中读取数据时，我需要在字符串中分配空间，具体取决于该字段中可以有多少个最大字符以便从中读取。

是这样的：

```
dim CustomerName as string
CustomerName = Space(50)

AdkGetStr(pData, ADK_CUSTOMER_NAME, CustomerName, 50) 
```

我必须指定我允许读取多少个字符，问题是如果我读取一堆客户名称，几乎所有人都不会使用允许的最大字符数，而且我无法摆脱多余的空间。

我曾尝试修剪并将“”替换为“”，但没有结果。

然后我尝试输入一个名为“test”的客户，我知道这个字符串中的前 4 个字符是字母，第五个（5）是我无法摆脱的空格。

然后我做了这个测试：

```
CustomerName = Mid$(CustomerName, 5, 1)
'reading the first space after my customername

templength = Len(temp)
'templength is 1 
```

所以我的客户名后面有一个空格，长度为 1，但看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/0xh5f.jpg)

而且我无法让我的 MsgBox 显示。看起来它比 len = 1 长……而且它不等于制表符或空或空？这到底是什么？

字符串不可能是唯一的，是吗？所以它必须等于某个东西......如果我知道那是什么，我可以从我的字符串中删除空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:38:30.187

If you have no way of getting the length of the string from the database, you will have to clean the string yourself by searching for the character's position:

```
Function CleanString(ByRef str As String) As String

    Dim posNullChar As Long
    posNullChar = InStr(1, str, vbNullChar)
    If posNullChar > 0 Then
         CleanString = Left$(str, posNullChar - 1)
    Else
         CleanString = str
    End If

End Function 
```

# asp.net - 如何使用json执行sql server存储过程？

> ID：16185771
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:19:06.290
> 
> 标签：asp.net, sql, jquery

我正在为 Asp.net 中的餐厅管理系统创建销售点表单，我有两个部分，第一部分是具有饮料、比萨等按钮的类别，第二部分是类别的子菜单，例如单击饮料它应该从 sql server 表中打开子菜单 Pepsi、Coke、Mirinda 等。

我已经创建了类别的运行时按钮，现在我想使用 json 执行存储过程以在单击类别按钮时显示项目中的子菜单。请解释与 sql server 的连接过程并使用 json 执行存储过程。提前致谢。问候 saqib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:27:19.270

`JSON`不会执行命令。它只是一种以文本形式存储数据的方式，开发人员易于阅读。`WebMethod`如果要用于`JSON`存储`DropDown`s 的值或将数据返回到s，则需要创建一个`DropDown`。下面的代码展示了如何创建一个 Web 服务并使用`JSON`它来从数据库中返回结果。您将使用`DataContractJsonSerializer`该类来阅读`JSON`. 这个例子来自[`Using JSON with ASP.NET 3.5`](http://dotnetslackers.com/articles/aspnet/Using-JSON-With-ASPNET-35.aspx#Using_JSON_with_AJAX_Enabled_ASP.NET_Web_Service)

```
using System;
using System.IO;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.Data.SqlClient;
using System.Runtime.Serialization.Json;
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class ProductService
{   
 [OperationContract]    
 public string GetProductDetailsByProductID(int productID)
 {
   Product prod = new Product();        
   string connectionString = 
     "server=localhost;uid=sa;pwd=thiru;database=AdventureWorks;";
   using (SqlConnection connection = new SqlConnection(connectionString))
   {
     string sql = "Select Name, ProductNumber from Production.Product " +
       " Where ProductID = " + productID.ToString();
     connection.Open();
     SqlCommand command = new SqlCommand(sql, connection); 
     SqlDataReader reader = command.ExecuteReader();
     while (reader.Read())
     {
       prod.Name = reader["Name"].ToString();
       prod.ProductNumber = reader["ProductNumber"].ToString();
       prod.ProductID = productID;
     }
    }
    MemoryStream stream = new MemoryStream();
    DataContractJsonSerializer serializer = new 
      DataContractJsonSerializer(typeof(Product));
    serializer.WriteObject(stream, prod);
    stream.Position = 0;
    StreamReader streamReader = new StreamReader(stream);
    return streamReader.ReadToEnd();        
  } 
}
[DataContract]
public class Product
{
    [DataMember]
    public int ProductID;
    [DataMember]
    public string Name;
    [DataMember]
    public string ProductNumber;
} 
```

# c# - 模拟 NewThreadScheduler.Default

> ID：16185780
> 
> 赞同：1
> 
> 时间：2013-04-24T07:19:34.270
> 
> 标签：c#, system.reactive, reactive-programming, reactiveui

我有一个代码

```
var i = 0;
_searchService.FindAll()
    .SubscribeOn(NewThreadScheduler.Default)
    .Subscribe(i => { i++ }, () => { i *= 2; }); 
```

据我所知，应用*.SubscribeOn(NewThreadScheduler.Default)*使 IObserver 在新线程中运行。一切正常，但我对单元测试有疑问。

我进行了必要的更改，但在另一个线程中运行的此订阅不会等待。如何取消*.SubscribeOn(NewThreadScheduler.Default)*进行单元测试。没有这个任命，代码运行良好。

我已经尝试过响应式 UI *testScheduler.With((scheduler)=>{... 在此处编写此代码...});* 但没有成功。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:40:53.877

您将希望使用 TestScheduler 代替 NewThreadScheduler 进行单元测试。我假设您使用 IoC 作为设计模式来启用您的单元测试，那么您需要做的就是创建一个 ISchedulerProvider/ISchedulerService/... 接口来公开您的需求。这是我使用的东西

```
public interface ISchedulerProvider
{
    /// <summary>
    /// Provides access to scheduling onto the UI Dispatcher. 
    /// </summary>
    IScheduler Dispatcher { get; }

    /// <summary>
    /// Provides concurrent scheduling. Will use the thread pool or the task pool if available.
    /// </summary>
    IScheduler Concurrent { get; }

    /// <summary>
    /// Provides concurrent scheduling for starting long running tasks. Will use a new thread or a long running task if available. Can be used to run loops more efficiently than using recursive scheduling.
    /// </summary>
    ISchedulerLongRunning LongRunning { get; }

    /// <summary>
    /// Provides support for scheduling periodic tasks. Can be used to run timers more efficiently than using recursive scheduling.
    /// </summary>
    ISchedulerPeriodic Periodic { get; }
}

public sealed class SchedulerProvider : ISchedulerProvider
{
    private readonly IScheduler _dispatcherScheduler;

    public SchedulerProvider()
    {
        var currentDispatcher = System.Windows.Threading.Dispatcher.CurrentDispatcher;
        _dispatcherScheduler = new DispatcherScheduler(currentDispatcher);
    }

    public IScheduler Dispatcher
    {
        get { return _dispatcherScheduler; }
    }

    public IScheduler Concurrent
    {
        get { return TaskPoolScheduler.Default; }
    }

    public ISchedulerLongRunning LongRunning
    {
        get { return TaskPoolScheduler.Default.AsLongRunning(); }
    }

    public ISchedulerPeriodic Periodic
    {
        get { return TaskPoolScheduler.Default.AsPeriodic(); }
    }
} 
```

然后在您的测试中，您将使用返回 TestScheduler 实现的实现。

```
public sealed class TestSchedulerProvider : ISchedulerProvider
{
    private readonly TestScheduler _dispatcher = new TestScheduler();
    private readonly TestScheduler _concurrent = new TestScheduler();
    private readonly TestScheduler _longRunning = new TestScheduler();
    private readonly TestScheduler _periodic = new TestScheduler();

    IScheduler ISchedulerProvider.Dispatcher
    {
        get { return _dispatcher; }
    }
    public TestScheduler Dispatcher
    {
        get { return _dispatcher; }
    }

    IScheduler ISchedulerProvider.Concurrent
    {
        get { return _concurrent; }
    }
    public TestScheduler Concurrent
    {
        get { return _concurrent; }
    }

    ISchedulerLongRunning ISchedulerProvider.LongRunning
    {
        get { return _longRunning.AsLongRunning(); }
    }
    public TestScheduler LongRunning
    {
        get { return _longRunning; }
    }

    ISchedulerPeriodic ISchedulerProvider.Periodic
    {
        get { return _periodic.AsPeriodic(); }
    }
    public TestScheduler Periodic
    {
        get { return _periodic; }
    }
} 
```

如您所见，这是针对 WPF 项目的，但您可以根据需要对其进行更改（删除或添加）。

我试图详细解释如何在我的网站上使用 TestScheduler 测试 Rx [http://introtorx.com/Content/v1.0.10621.0/16_TestingRx.html](http://introtorx.com/Content/v1.0.10621.0/16_TestingRx.html)

我不太了解您的示例代码在做什么，但我认为您可能想将其更新为

```
var testScheduler = new TestScheduler();
var i = 0;
var subscription = _searchService
              .FindAll()
              .SubscribeOn(testScheduler)
              .Subscribe(
                 i =>i++, 
                 () => i*=2);
Assert.AreEqual(0, i);
testScheduler.AdvanceBy(1);
Assert.AreEqual(1, i);
subscription.Dispose(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:55:03.003

`Scheduler.With(block => ....`仅当您的代码始终使用`RxApp.TaskPoolScheduler`或`RxApp.DeferredScheduler`（对于 UI 线程）时才有效。如果您更改`NewThreadScheduler.Default`为`RxApp.TaskPoolScheduler`，它应该可以按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T21:29:23.717

我通过创建一个 NuGet 包解决了同样的问题，该包实现了一种类似于@Lee Campbell 建议的 ISchedulerProvider 的方法。它由一个“ *switch* ”类组成，我将其用作`Scheduler`该类的替代品。[为方便起见，我已在https://nuget.org/packages/RxSchedulers.Switch/](https://nuget.org/packages/RxSchedulers.Switch/)将其作为 NuGet 包发布。

要使用它，请按如下方式调整您的代码：

```
var i = 0;
_searchService.FindAll()
              .SubscribeOn(SchedulerSwitch.GetNewThreadScheduler())
              .Subscribe(i =>
                             {
                                i++
                             }, () =>
                             {
                                i*=2; }); 
```

默认情况下，`SchedulerSwitch`lambda 映射到相应的运行时调度程序。但是，在设置测试上下文时，您可以将运行时调度程序替换为您选择的一种（例如 a`TestScheduler`或`ImmediateScheduler`）：

```
testScheduler = new TestScheduler();
SchedulerSwitch.GetNewThreadScheduler = () => testScheduler; 
```

# java - Spring，将文件上传到服务器根目录？

> ID：16185781
> 
> 赞同：1
> 
> 时间：2013-04-24T07:19:34.187
> 
> 标签：java, spring, file, file-upload

在我的 Spring 应用程序中，我有上传选项，

当文件上传到本地目录时，它工作正常并且低于工作代码。

```
 String orginalName = file.getOriginalFilename();
 String filePath = "C:SpringDemo/WebContent/WEB-INF/UploadedFiles/"+orginalName;
 File destination = new File(filePath);
 file.transferTo(destination); 
```

但我想在我的服务器根目录中上传，我正在这样做，

```
 String orginalName = file.getOriginalFilename();
 String filePath = "http://localhost:8080/SpringDemo/WebContent/WEB-INF/UploadedFiles/"+orginalName;
 File destination = new File(filePath);
 file.transferTo(destination); 
```

此代码不起作用..它给出了文件目录不存在的错误。

那么如何在我的服务器目录中添加文件？

# ios - 你如何将 int 转换为 int64_t

> ID：16185782
> 
> 赞同：0
> 
> 时间：2013-04-24T07:19:39.780
> 
> 标签：ios, game-center

我正在创建一个游戏，我想将 Game Center 集成到其中。我看过了，结果你要提交的整数必须是`int64_t`. 我`int`使用的是标准的int。我如何将我的高分转换`int`为`int64_t`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:36:45.257

您可以尝试将其`int`转换为`int64_t`：

```
int a = 12345;
int64_t b = (int64_t)a; 
```

# php - 由内而外走混合变量 PHP

> ID：16185786
> 
> 赞同：0
> 
> 时间：2013-04-24T07:19:51.567
> 
> 标签：php, recursion

我在 PHP 中有以下对象/数组结构：

```
目的
(
    id => *随机数 10000-99999*
    名字 =>
    parent => *对父对象的引用* // null，所以这是根元素
    孩子 => 数组
        (
            [0] => 对象
                (
                    id => *随机数 10000-99999*
                    名称 => 行
                    parent => *对父对象的引用* // 指向根元素
                    孩子 => 数组
                        (
                            [0] => 对象
                                (
                                    id => *随机数 10000-99999*
                                    名称 => 列
                                    parent => *对父对象的引用* //行
                                    孩子 => 数组
                                        (
                                            [0] => 对象
                                                (
                                                    id => *随机数 10000-99999*
                                                    名称 => 链接
                                                    parent => *对父对象的引用* //列
                                                    孩子 => 数组 ()
                                                )
                                        )
                                )
                            [1] => 对象
                                (
                                    id => *随机数 10000-99999*
                                    名称 => 列 2
                                    parent => *对父对象的引用* //行
                                    孩子 => 数组
                                        (
                                            [0] => 对象
                                                (
                                                    id = *随机数10000-99999*
                                                    名称 = 文章
                                                    parent => *对父对象的引用* // column2
                                                    孩子 => 数组 ()
                                                )
                                        )
                                )
                            [2] => 对象
                                (
                                    id = *随机数10000-99999*
                                    名称 = 列 3
                                    parent => *对父对象的引用* //行
                                    孩子 => 数组 ()
                                )
                        )
                )
            [1] => 对象
                (
                    id = *随机数10000-99999*
                    名称 = 链接 2
                    parent => *对父对象的引用* // 指向根元素
                    孩子 => 数组 ()
                )
        )
)

```

我想从最深的对象处理这个变量。进出。像这样：

1.  关联
2.  柱子
3.  文章
4.  第 2 列
5.  第 3 列
6.  排
7.  关联

有没有人对此有很好的解决方案？我可以为此编写合适的算法。我只想知道是否有人有经过验证的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:31:08.933

无论解决方案如何，您可能都需要迭代到数组中以找到最深的“名称”，然后再迭代回来。您可以通过存储第一次迭代来最小化开销，并在找到最深时自动反转它。

抱歉，午餐迫在眉睫，所以没有时间提供一个工作示例；）

# c# - Monodroid：执行完整的 GC

> ID：16185788
> 
> 赞同：4
> 
> 时间：2013-04-24T07:19:58.047
> 
> 标签：c#, android, garbage-collection, xamarin.android

我尝试创建我的小粒子系统。我有带有粒子列表的 ParticleManager 并在画布上绘制我的粒子。我只需在 init() 函数中创建任何新对象，如 Paint 等！如果粒度 < 0，我将其删除：

```
for (int particle = 0; particle < particles.Count; particle++)
    {
        particles[particle].Update(); //particle size--;
        if (!particles[particle].state) // size > 0 ? true : false
        {
            particles[particle] = null; 
            //here I tried all variations like 
            //((IDisposable)particles[particle]).Dispose();
            //GC.SuppressFinalize(particles[particle]); 
            //System.GC.ReRegisterForFinalize(particles[particle]);
            //((Java.Lang.Object)particles[particle]).Dispose(); and etc             

            particles.Remove(particles[particle]);
        } 
```

然后我创建新的粒子并将其添加到我的列表中。我在日志中看到的内容：

```
GC cleanup summary: 1063 objects tested - resurrecting 1002.
GC cleanup summary: 1053 objects tested - resurrecting 992.
...
GC cleanup summary: 1052 objects tested - resurrecting 988.
46800 outstanding GREFs. Performing a full GC! 
```

然后我的渲染线程中有 10-15（！！！）秒暂停！！！我阅读了官方文档，但没有任何解决方案。我分析并比较了我的代码与单 JetBoy 示例，但 JetBoy 的日志没有关于 GC 的任何内容。虽然我用 JetBoy 的例子写了我的程序。如何解决完整的 GC 问题？

* * *

编辑：MainThread.cs

```
public override void Run()
    {
        Log.Verbose("Run()", "r");
        Canvas c;
        while (mRun) {
            c = null;
            mPassedTime = DateTime.Now.Ticks / TimeSpan.TicksPerMillisecond;
            if (mTimerTask == null) {
                mTimerTask = new CountDownTimerTask(this);
                mTimer.Schedule(mTimerTask, mTaskIntervalInMillis);
            }
            try {
                c = mSurfaceHolder.LockCanvas(null);

                lock (mSurfaceHolder)
                    DoDrawRunning(c);
            } finally {
                if (c != null)
                    mSurfaceHolder.UnlockCanvasAndPost(c);
            }
        }
    }
    private void DoDrawRunning(Canvas canvas)
    {
        #region particles
        for (int eng = 0; eng < engines.Count; eng++)
        {   
            engines[eng].Update();
            engines[eng].Draw(canvas);
        }
        #endregion
    } 
```

粒子工程.cs

```
public void Update() {
        if (particles.Count < maxTotal) {
            for (int i = 0; i < total; i++) {
                if (addNewB)
                    particles.Add(GenerateNewParticle()); // return new Particle
            }
        }

        for (int particle = 0; particle < particles.Count; particle++) {
            particles[particle].Update(); // position and size update
            if (!particles[particle].state)  // size > 0 ?
                particles.RemoveAt(particle);
        }
    }
public void Draw(Canvas canvas) {
        for (int j = 0; j < 3; j++)  // 3 particle color-levels draw
            for (int index = 0; index < particles.Count; index++) 
                particles[index].Draw(canvas, j);
    } 
```

粒子.cs

```
public void Draw(Canvas canvas) {
    mPaint.StrokeWidth = mSize;
    mPaint.Color = Color.Blue;
    canvas.DrawPoint(posX, posY, mPaint);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-30T03:43:52.260

主要问题是一次有太多的`Java.Lang.Object`实例处于活动状态，因为每个`Java.Lang.Object`实例都会增加 JNI 全局引用计数，这也会增加 GC 开销。想要减少 GC 开销？减少您使用的 GREF 数量。

[您可以通过启用 gref 日志记录](http://docs.xamarin.com/guides/android/deployment%2c_testing%2c_and_metrics/diagnostics#3.android-debug-log-output)来跟踪 GREF 计数

```
adb shell setprop debug.mono.log gref 
```

我认为这`Particle`是一个`Java.Lang.Object`子类，这意味着您*至少* `particles.Count`同时拥有GREF。

解决方案是*不*创建`Particle`子`Java.Lang.Object`类，并以任何方式更改您的架构以确保`Particle`不是子类。

如果`Particle`不是一个`Java.Lang.Object`实例，那么我们缺乏足够的信息来重现问题并提出解决方案。GREF 日志输出将是一个方便的开始（您一次有多少个 GREF *？*），因为它还可以帮助您确定正在创建哪些类型，以便您可以考虑缩短它们的生命周期。

[这个阅读 gref 日志输出的指南](http://forums.xamarin.com/discussion/comment/8938/#Comment_8938)也可能很方便。

# c++ - 带有默认目录的 QFileDialog

> ID：16185791
> 
> 赞同：6
> 
> 时间：2013-04-24T07:20:06.447
> 
> 标签：c++, qt, user-interface, qt4, cross-platform

如何`QFileDialog`使用默认目录创建跨平台？

我有一个类似的代码

```
QFileDialog::getSaveFileName(this,"Save File","/home",tr("Any File (*.*);;Text file (*.txt);;Compressed file (*.zip *.tar *.rar);;Image (*.png *.xpm *.jpg *.tiff)")) 
```

这适用于 Linux。但在 Windows 中，用户目录将是`"C:\Users"`. 我不知道在 Mac 上。我需要这个默认目录作为用户文件夹的对话。怎么做？

我看到了，`toNativeSeparators()`但这需要更多的代码行。有没有最简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:24:42.373

使用[`QDir::home()`](http://qt-project.org/doc/qt-4.8/qdir.html#home), 然后[`QDir::cdUp()`](http://qt-project.org/doc/qt-4.8/qdir.html#cdUp)上一格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T08:37:43.207

您还可以使用：

`QDesktopServices::storageLocation(QDesktopServices::HomeLocation)`

它返回用户的主目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-14T07:41:38.307

这是我的代码

```
QString pathExport = dialog->getExistingDirectory(this, "Pilih Folder Export",QDir::homePath(),QFileDialog::ShowDirsOnly)+"/"+fileExport; 
```

# doctrine - 可以在没有 where() 的情况下使用 Doctrine QueryBuilder 和 Where() 吗？

> ID：16185797
> 
> 赞同：3
> 
> 时间：2013-04-24T07:20:17.947
> 
> 标签：doctrine, query-builder, doctrine-query

在 Doctrine 中，当使用 QueryBuilder 构建查询时，第一个`where`子句是否必须定义`$qb->where()`或者我可以`$qb->andWhere()`直接使用。例如，这是否有效：

```
$qb->select('Mystuff\Entity\User','u');
$qb->andWhere('usertype = :usertype');
$qb->andWhere('usercategory = :usercategory'); 
```

或者，作为一个更相关的例子：

```
$filter = array('usertype'=>'basic','usercategory'=>'business');
$qb->select('Mystuff\Entity\User','u');
foreach ($filter as $fkey => $fval) {
   $qb->andWhere($fkey.' = :'.$fval);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-22T09:22:09.950

是的，这会奏效。`where()`在添加提交的条件之前删除任何其他条件，同时`andWhere()`附加到`AND`具有任何现有条件的表达式。

# css - 使用 CSS 选择没有类和 id 的元素？

> ID：16185799
> 
> 赞同：0
> 
> 时间：2013-04-24T07:20:19.117
> 
> 标签：css, selector

我有这个 HTML：

```
<li>
    <a href="...">link</a>
</li>
some text 
```

我想在 li 之后选择“一些文本”并在其上应用一些样式。那可能吗？li 在一个带有类的 div 中，如果有任何帮助的话。

顺便说一句：我不能将它包装在跨度或 div 中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:27:35.030

假设您应该修改您的标记（它是无效的）并将该文本包装在它自己的元素中，使用给定标记的唯一方法是将样式应用于您的`div`元素，然后在 上恢复它`li`，例如 - 如果您需要“一些文本“用斜体字你可以做

```
div { font-style: italic; }
div li { font-style: normal; } 
```

# ios - TI Sensortag，如何使用按钮？

> ID：16185803
> 
> 赞同：2
> 
> 时间：2013-04-24T07:20:46.343
> 
> 标签：ios, xcode, core-bluetooth, bluetooth-lowenergy

我正在使用新的[TI Sensortag](http://www.ti.com/ww/en/wireless_connectivity/sensortag/index.shtml?INTC=SensorTag&HQS=sensortag-bt1)。我正在尝试做一个简单的 iOS 应用程序来读取这些按钮的状态。我找到了很多关于使用 Sensortag 传感器（湿度、红外温度等）的指南、教程等，但没有人谈论他顶部的按钮。有人对他们有想法吗？

非常喜欢你

雷达

PS 我用的是 iPhone 5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T17:06:24.067

0xFFE1 SK_KEY_PRESSED GATT_PERMIT_READ 左/右键，仅在测试模式下作为位 2 的侧键。

[http://processors.wiki.ti.com/index.php/File:BLE_SensorTag_GATT_Server.pdf](http://processors.wiki.ti.com/index.php/File:BLE_SensorTag_GATT_Server.pdf)

按键在原理图上列为“按钮碳”S2 和 S3，通过透明塑料盖中的切去插入物和凸起的凸块进行访问（我不认为它是盲文，但那会是一个很好的接触）在“口红红”的情况下。通过 BLE 设备监视器连接并在测试模式下运行以查看是否检测到它们，因为在此模式下检查了所有三个开关并显示事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T13:54:05.763

侧边按钮的默认行为（如果未重新编程）是：

> 未连接时，此按钮用于打开和关闭广告。在连接中推送时，连接被断开，传感器重置并且所有数据值设置为零>（软重置）。

前面的孔不是实际的按钮，而是红外温度传感器能够进行远程温度测量的开口。

来源： http: [//processors.wiki.ti.com/index.php/SensorTag_User_Guide](http://processors.wiki.ti.com/index.php/SensorTag_User_Guide)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T02:41:24.623

看看 YmsCoreBluetooth，这是我为构建 iOS CoreBluetooth 应用程序而编写的框架。我有一个使用 TI SensorTag 的示例，它支持按钮。

[http://kickingvegas.github.io/YmsCoreBluetooth/](http://kickingvegas.github.io/YmsCoreBluetooth/)

# php - php注册码不能正常工作

> ID：16185804
> 
> 赞同：0
> 
> 时间：2013-04-24T07:20:48.323
> 
> 标签：php, registration

单击提交按钮时，下面的代码应该在表单上方给出错误或确定。但问题是它不会做任何事情。谁能告诉我我在这里做错了什么？

```
<?php
include 'ini.php';
?>

<?php
if(isset ( $_POST['reg_u_name'],$_POST['reg_email'], $_POST['reg_password'] )) {
$reg_u_name = $_POST['reg_u_name'];
$reg_email = $_POST['reg_email'];
$reg_password = $_POST['reg_password'];

$errors = array();

if (empty($reg_u_name) || empty($reg_email) || empty($reg_password)) {
    $errors[] = 'All fields required';
}else{
    echo 'OK';
}

}
?>

<form action="" method="post">
<p>Username:<br/><input type="text" name="reg_u_name" maxlength="20"  ></p>
<p>Email:<br/><input type="text" name="reg_email" maxlength="20" ></p>
<p>Password:<br/><input type="password" name="reg_password" maxlength="20" ></p>
<p><input type="submit" value="Register"></p>
</form> 
```

ini.php 文件

```
<?php
session_start();
error_reporting(0);
require 'connect.php';
include 'user.func.php';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:30:11.610

现在试试。这行得通。

```
 <?php
//include 'ini.php';
if(isset($_POST['subBtn']))
{
if(isset($_POST['reg_u_name'] ,$_POST['reg_email'], $_POST['reg_password'] ))
 {
$reg_u_name = $_POST['reg_u_name'];
$reg_email = $_POST['reg_email'];
$reg_password = $_POST['reg_password'];

if (empty($reg_u_name) || empty($reg_email) || empty($reg_password)) {
    echo 'All fields required';
}else{
    echo 'OK';
 }
 }
}
?>

<form action="" method="post">
<p>Username:<br/><input type="text" name="reg_u_name" maxlength="20"  ></p>
<p>Email:<br/><input type="text" name="reg_email" maxlength="20" ></p>
<p>Password:<br/><input type="password" name="reg_password" maxlength="20" ></p>
<p><input type="submit" value="Register" name="subBtn"></p>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:26:09.257

如果您的 post 数组中只有**一个**值未设置，那么您的 if 条件永远不会满足，这意味着您将不会获得任何您期望的显示。

我建议单独检查以设置您的个人变量并执行`if`on `$_POST['submit']`。 *此外*`$errors`，如果它确实被分配，你永远不会对你的数组做任何事情。^^

以下对我有用：

```
<?php

if(isset ( $_POST['reg_u_name'],$_POST['reg_email'], $_POST['reg_password'] )) {
$reg_u_name = $_POST['reg_u_name'];
$reg_email = $_POST['reg_email'];
$reg_password = $_POST['reg_password'];

$errors = array();

if (empty($reg_u_name) || empty($reg_email) || empty($reg_password)) {
    echo 'All fields required';
}else{
    echo 'OK';
}

}
?>

<form action="" method="post">
<p>Username:<br/><input type="text" name="reg_u_name" maxlength="20"  ></p>
<p>Email:<br/><input type="text" name="reg_email" maxlength="20" ></p>
<p>Password:<br/><input type="password" name="reg_password" maxlength="20" ></p>
<p><input type="submit" value="Register"></p>
</form> 
```

[PHPFiddle](http://phpfiddle.org/main/code/tvw-gej)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:34:08.610

输入名称属性以输入提交类型，例如

```
 <input type="submit" name="regist" value="Register"> 
```

并更改为此代码

```
<?php
if(isset($_POST['regist']))
{
  $reg_u_name = $_POST['reg_u_name'];
  $reg_email = $_POST['reg_email'];
  $reg_password = $_POST['reg_password'];

  $errors = array();

  if (empty($reg_u_name) || empty($reg_email) || empty($reg_password)) {
   $errors[] = 'All fields required';
  }else{
    echo 'OK';
  }
}
?> 
```

如果填写了所有表格，它将回显“确定”。

# google-maps - 如何将引脚设置为仅在一个世界上显示而无需手动计算？

> ID：16185816
> 
> 赞同：1
> 
> 时间：2013-04-24T07:21:31.437
> 
> 标签：google-maps, google-maps-api-3, cycle

我正在研究谷歌地图 api V3。当我加载所有引脚并设置 fitbounds 时，我的地图正在加载两个世界。有两个世界很好，但两张地图上都有别针。拥有多个带有别针的世界真的很令人困惑。

我已经提到[过这里](https://stackoverflow.com/questions/13574222/google-maps-api-v3-bound-world-to-fit-area-and-disable-map-repeat)。但它没有用，因为我无法设置缩放级别，因为它隐藏了缩放级别 1 上的引脚并显示了缩放级别为 0 的两个世界。

有没有办法只在一个世界上有别针（我不介意显示两个世界）。

**注意：**我无法控制加载地图的 div 的宽度和高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T07:42:55.030

我没有找到任何使用 google map api 实现这一点的具体方法。但我做了一个手动计算来带一张地图。但这也不是一个完全灵活的解决方案，因为它没有展示整个世界。

基于这个想法，瓷砖大小为 256 * 256，我尝试了以下方法。通过使用它，我不会让用户低于特定的缩放级别。它部分满足了我的要求，因为 minZoom 级别是根据设备的宽度放置的。

```
var minZoomLevel = Math.floor(parseInt($(window).width())/256); 
```

# java - Optimized Permutation Code in Java

> ID：16185817
> 
> 赞同：0
> 
> 时间：2013-04-24T07:21:33.607
> 
> 标签：java, memory-management, permutation, executable-jar, performance

This is a code that I got from internet.

 `````
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class Test<T> {
    public static void main(String args[]) {
        Test<Integer> obj = new Test<Integer>();
        Collection<Integer> input = new ArrayList<Integer>();
        for (int i = 0; i < 14; i++) {
                       input.add(i);

        }

        Collection<List<Integer>> output = obj.permute(input);
        int k = 0;
        Set<List<Integer>> pnr = null;
        for (int i = 0; i <= input.size(); i++)
        {
            pnr = new HashSet<List<Integer>>();
            for(List<Integer> integers : output){
            pnr.add(integers.subList(i, integers.size()));
            }
            k = input.size()- i;
            System.out.println("P("+input.size()+","+k+") :"+ 
            "Count ("+pnr.size()+") :- "+pnr);
        }
    }
    public Collection<List<T>> permute(Collection<T> input) {
        Collection<List<T>> output = new ArrayList<List<T>>();
        if (input.isEmpty()) {
            output.add(new ArrayList<T>());
            return output;
        }
        List<T> list = new ArrayList<T>(input);
        T head = list.get(0);
        List<T> rest = list.subList(1, list.size());
        for (List<T> permutations : permute(rest)) {
            List<List<T>> subLists = new ArrayList<List<T>>();
            for (int i = 0; i <= permutations.size(); i++) {
                List<T> subList = new ArrayList<T>();
                subList.addAll(permutations);
                subList.add(i, head);
                subLists.add(subList);
            }
            output.addAll(subLists);
        }
        return output;
    }
} 
````  `When I tried executing it, it took long time for the elements of count 7\. But when I tried for 14, I got below exception.

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2219)
    at java.util.ArrayList.toArray(ArrayList.java:329)
    at java.util.ArrayList.addAll(ArrayList.java:530)
    at Test.permute(Test.java:45)
    at Test.permute(Test.java:41)
    at Test.permute(Test.java:41)
    at Test.permute(Test.java:41)
    at Test.main(Test.java:18)
Java Result: 1

```

My system configuration is 3rd Gen i5, 8GB RAM. While the program was running, CPU consumption was 98-100%.

**So my question is:**

*   Is there any jar available for doing permutation efficiently?
*   What can I do in this code to improve the performance?

**My requirement:**

*   Need to permute a group (ie, more than 30) of integer values.

Downvoters please comment reason

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:27:43.840

Instead of generating all permutations first (as this has an exponentially growing amount of memory required) I suggest you process each permutation as you generate it. This means you only need to store one combination at a time.

You can generate all permutations of size 1 (or zero if that is allowed) and grow up to all permutations of all sizes.

Note: for your output you only need to calculate the number you would generate, you don't have to actually generate them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:28:55.493

You could increase the heap size a little: in [Eclipse](https://stackoverflow.com/questions/8600972/increasing-heap-space-in-eclipse-java-lang-outofmemoryerror), or from the [command line](https://stackoverflow.com/questions/1565388/increase-heap-size-in-java).

However, if you want *all* permutations of 30 elements, you'll need `30! * 30 * 4` bytes of memory, which is 3e+22 TB...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:51:38.147

I think maybe there is a point being missed here. You keep asking if there is a more 'efficient' or 'optimized' way to find all permutations of a set of numbers.

The number of possible permutations for 30 integers is a number with approximately 32 digits. One gigabyte of ram is a number of bytes with 10 digits. If you are talking about storing ALL the answers to this problem in memory at once, **it is conceivable that you could not do this even if you literally had all the RAM in the entire world.**

Peter's answer recognizes this in stating that while it is impossible to store the entire solution for >30 numbers, (never mind the time to calculate this), it IS possible to calculate a portion of the answer and generate more as needed.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-09T00:19:15.133

This will work for what you are doing. However I can't see a way of reducing the method to reduce processing. So this is about as efficient as you can get it.

```
public static ArrayList<Integer> calPermutations (ArrayList<ArrayList<Integer>> n) {
    if (n.size() <= 0 || n == null) {
        return null;
    }
    ArrayList<Integer> Result = new ArrayList<Integer>();
    for (int i = 0; i < n.size(); i++) {
        Integer num = n.get(i).get(0);
        for (int x = 1; x < n.get(i).size(); x++) {
            num *= n.get(i).get(x);
        }
        Result.add(num);
    }
    return Result;
} 
```

However if the Java heap space error continues in Eclipse you can go to:

**Run->Run Configurations->Arguments**

Go to VM arguments and try:

```
-Xmx2048M 
```

If this is too large for your RAM just decrease the numbers until you can find something that suits. More information [here](https://stackoverflow.com/questions/15313393/how-to-increase-application-heap-size-in-eclipse).``

# sql - 删除一个表中存在而另一个表中不存在的数据？

> ID：16185824
> 
> 赞同：2
> 
> 时间：2013-04-24T07:21:54.220
> 
> 标签：sql, tsql, informix

我想选择特定表中存在且其他表中不存在的所有行来删除它们。

我编写了以下查询，但两个表中都存在行！

```
SELECT  UNIQUE b.values_key FROM request_fo a INNER JOIN rm_trans  b 
ON b.values_key != a.req_year || ',' || a.req_ser
AND b.taskcode = 19
AND  b.values_key IS NOT NULL
AND a.req_year IS NOT NULL 
AND a.req_ser IS NOT NULL 
```

* * *

我想使用以下内容删除存在于`request_fo`和不存在于的数据`rm_trans`：

```
DELETE request_fo 
FROM request_fo a
INNER JOIN
rm_trans  b 
ON b.values_key != a.req_year || ',' || a.req_ser
AND b.taskcode = 19
AND  b.values_key IS NOT NULL
AND a.req_year IS NOT NULL 
AND a.req_ser IS NOT NULL 
```

这是正确的吗 ？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:47:09.223

如果您不能使用连接语法，您也可以使用子选择。

```
delete from t1
where t1 = something
and not exists
(
   select 1
   from t2
   where t1.key = t2.key
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T03:24:37.250

当你想要执行这种操作时，你必须在集合中思考。您在`!=`需要时使用`NOT IN (...)`或`NOT EXISTS (...)`.

您的子句`b.values_key != a.req_year || ',' || a.req_ser`正在比较中的每一行`a`与中的每一行`b`。在大多数情况下，它们不会等同。但是会有很多示例，其中`values_key`此特定行中的与当前正在比较的行之外的`a.req_year || ',' || a.req_ser`其他行匹配。`a`这就是为什么您返回的数据确实存在于两个表中。

你想尝试这样的事情：

```
DELETE FROM a
  WHERE NOT EXISTS (SELECT 1 FROM b
                    WHERE b.values_key = a.req_year || ',' || a.req_ser
                       AND b.task_code = 19) 
```

您还应该`SELECT * FROM a WHERE NOT EXISTS (...)`先运行它来验证它。我会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:23:20.897

这是执行此操作的 T-SQL 语法：

在子句中使用`LEFT JOIN`with `b.values_key IS NULL`predicate `WHERE`，并在子句中使用别名`a`而不是表名`DELETE`：

```
DELETE a 
FROM request_fo a
LEFT JOIN rm_trans  b  ON b.values_key = a.req_year + ',' + a.req_ser
                      AND b.taskcode = 19
WHERE  b.values_key IS  NULL; 
```

在这里查看它的实际效果：

*   [**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/0d9e7/1)。

假设`req_ser`和`req_year`是数据类型字符串，如果它们是整数则强制转换它们。

* * *

**这个怎么运作？**

`LEFT JOIN`将包括`request_fo`左侧第一个表中的那些不匹配的行`LEFT JOIN`，即使没有满足条件的`JOIN`条目，在这种情况下，`values_key`值将是`NULL`那些不匹配的行。

例如，请参阅[**此演示**](http://www.sqlfiddle.com/#!3/e945d/6)，`2013 4`第一个表中的第一个表不存在于第二个表中，因此`values_key`它将存在`NULL`，因此添加[`WHERE b.values_key IS NULL`](http://www.sqlfiddle.com/#!3/e945d/7)将为您提供在第一个表中找到但在第二个表中未找到的那些。

# .net - ParameterInfo.DefaultValue 和 ParameterInfo.RawDefaultValue 之间的区别

> ID：16185826
> 
> 赞同：14
> 
> 时间：2013-04-24T07:22:03.923
> 
> 标签：.net, reflection, default-value, optional-parameters

[这是如何获取可选参数的默认值的](https://stackoverflow.com/questions/16185124/how-do-i-get-default-values-of-optional-parameters)后续问题？

从[文档中， DefaultValue](http://msdn.microsoft.com/en-IN/library/system.reflection.parameterinfo.defaultvalue.aspx)：

> 如果参数具有默认值，则获取指示默认值的值。
> 
> 此属性仅在执行上下文中使用。在仅反射上下文中，请改用 RawDefaultValue 属性。
> 
> 当方法调用中未指定实际值时使用默认值。参数可以有一个默认值为 null。这与未定义默认值的情况不同。

从[文档中， RawDefaultValue](http://msdn.microsoft.com/en-IN/library/system.reflection.parameterinfo.rawdefaultvalue.aspx)：

> 如果参数具有默认值，则获取指示默认值的值。
> 
> 此属性可以在执行上下文和仅反射上下文中使用。
> 
> 当方法调用中未指定实际值时使用默认值。参数可以有一个默认值为 null。这与未定义默认值的情况不同。

文档非常相似，除了一个用于反射上下文而另一个不是。那有什么区别？什么时候`DefaultValue`在没有反射的情况下使用过？我的意思是我们如何在没有反射的情况下获得默认值？我错过了什么吗？

**更新**

我创建了两个这样的重载：

```
public void Required(string value)
{

}
public void Optional(string value = "", int i = -1)
{

} 
```

我测试过：

```
var f = requiredInfo.GetParameters().Select(p => p.DefaultValue).ToArray();
var g = requiredInfo.GetParameters().Select(p => p.RawDefaultValue).ToArray();

var h = optionalInfo.GetParameters().Select(p => p.DefaultValue).ToArray();
var i = optionalInfo.GetParameters().Select(p => p.RawDefaultValue).ToArray();

//f equals g and h equals i in every way! 
```

那么鉴于我的测试显示（全部在反射上下文中）根本没有区别，有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T07:45:30.927

“在反射的上下文中”和“仅反射的上下文”之间存在细微但显着的区别。“仅反映上下文”指的是非常具体的东西：

*   [如何：将程序集加载到仅反射上下文中](http://msdn.microsoft.com/en-us/library/ms172331.aspx)

这是一种加载程序集仅用于检查的方法，并且具有不需要加载甚至不存在任何依赖程序集的明显优势。

由于您似乎有意执行一些您正在反射的代码，因此仅反射上下文对您的用处有限。

# java - 如何在 RMI 服务器中使用机器别名

> ID：16185830
> 
> 赞同：0
> 
> 时间：2013-04-24T07:22:06.767
> 
> 标签：java, rmi

我在作为集群一部分的机器上运行我的 rmi 服务器。IP 可能会更改，因此通过此过程进行连接是不可靠的。

直到现在，在工作中的开发盒上，基于 IP 的连接都很好，但是转移到 UAT 我需要更改它，但我不知道该怎么做。

下面我有服务器和客户端类的代码。在这里你可以看到我使用机器 ip 连接。我如何用机器别名替换它？这是可能的还是我感到困惑？

谢谢

```
private final String address = "111.111.111.111";
private Registry registry;
private int port = 6789;
private static Logger logger = Logger.getLogger(RmiServer.class);

public RmiServer() throws RemoteException {
    try {
        registry = LocateRegistry.createRegistry(port);
        registry.rebind("rmiServer", this);
        logger.info("Server is Ready! Connected on: " + address + ":" + port + " ." +
    } catch (RemoteException e) {
        logger.error("Unable to start the server. Exiting the application.", e);
        System.exit(-1);
    }
}

private final String serverAddress = "111.111.111.111";
private String serverPort = "6789";
private ReceiveMessageInterface rmiServer;
private Registry registry;
private Logger logger = Logger.getLogger(RMIClient.class);

public RMIClient(){
    try {
        registry = LocateRegistry.getRegistry(serverAddress, (new Integer(serverPort)).intValue());
        rmiServer = (ReceiveMessageInterface) (registry.lookup("rmiServer"));

        logger.info("Client started correctly");
    } catch (RemoteException e) {
        logger.error("Remote object exception occured when connecting to server. Exiting application", e);
        System.exit(-1);
    } catch (NotBoundException e) {
        logger.error("Not Bound Exception occured when connecting to server. Exiting application", e);
        System.exit(-1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:47:18.850

1.  如果您询问您必须对服务器执行什么操作才能导出其中包含正确 IP 地址的存根，那么这就是该`java.rmi.server.hostname`属性的用途。在导出任何注册表或远程对象之前，将其设置为服务器 JVM 中所需的主机名或 IP 地址。

2.  如果您询问如何在服务器更改其 IP 地址后让客户端知道注册表在哪里，那么没有一个公认的解决方案。您可以让服务器定期组播其 IP 地址，或者采用一些sneakernet 方法。

# javafx-2 - 如何在 JavaFX 中的手风琴和表格之间添加视觉分隔符

> ID：16185832
> 
> 赞同：0
> 
> 时间：2013-04-24T07:22:11.110
> 
> 标签：javafx-2, javafx

我想添加可以被使用者拖动和调整大小的视觉分隔符。我测试了这段代码：

```
public class VerticalSeparator {

    public void initVSeparator(Stage primaryStage, Group root, Scene scene) {

        //Vertical separator
        Separator separator2 = new Separator();
        separator2.setLayoutX(300);
        separator2.setLayoutY(300);

        separator2.setOrientation(Orientation.VERTICAL);

        root.getChildren().add(separator2);

    }
} 
```

但由于某种原因，我没有进入初级阶段。你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:32:50.727

有提供可拖动分隔符的[SplitPane控件。](http://docs.oracle.com/javafx/2/api/javafx/scene/control/SplitPane.html)

```
 SplitPane pane = new SplitPane();
    pane.getItems().addAll(myTable, myAccordion); 
```

PS：如果不查看类的用法，很难判断您的代码有什么问题`VerticalSeparator`。

# java - 从 JSP 读取 Servlet 中的输入文本参数以进行文件上传多部分

> ID：16185835
> 
> 赞同：0
> 
> 时间：2013-04-24T07:22:26.863
> 
> 标签：java, jquery, jsp, servlets, multipartform-data

我正在创建一个 JSP 页面来上传 CSV 或 TXT 文件。文件数据由一些分隔符分隔。我正在使用复选框从用户那里检索，并且基于选中的复选框，我将文本字段值设置为受尊重的复选框值。我还为自定义分隔符添加了一个复选框。当用户选择该复选框时，将显示相同的文本字段（我在其中设置其他复选框的值），并且允许用户输入他们的自定义分隔符。

我还设置了一些其他输入隐藏字段，以将字符串值和 Java 对象从前一个 servlet 传递到下一个 servlet。

由于 JSP 用于文件上传，我无法使用`request.getParameter()`. 但我能够阅读文本字段。我的意思是当用户检查除自定义之外的分隔符复选框时，servlet 正在读取文本输入。但是当用户检查自定义复选框并输入自定义分隔符值时，它无法正确读取文本输入。

这是我的 JSP `(FileUpload.jsp)`代码

```
<form class="form-horizontal" name="fileupload"
            action="GenericFileUpload" onsubmit="return validateFile(this)"
            enctype="multipart/form-data" method="post">
            <div class="control-group">
                <label class="control-label">Please choose delimiter:</label>
                <div class="controls">
                    <ul class="nav nav-list">
                        <li><input type="checkbox" id="," value="," />&nbsp;Comma(,)</li>
                        <li><input type="checkbox" id="|" value="|" />&nbsp;Pipe
                            Delimiter(|)</li>
                        <li><input type="checkbox" name="delimeter" id="custom" />&nbsp;Custom(Specify)</li>
                    </ul>
                </div>
            </div>

            <div id="specify" class="control-group" style="display: none;">
                <label class="control-label" for="delimiter">Please provide
                    the delimiter:</label>
                <div class="controls">
                    <input id="customdelimiter" type="text" name="delimiter"
                        placeholder="Specify Delimiter" />
                </div>
            </div>

            <input type="hidden" name="transportTab"
                value="<c:if test="${transportTab != null}">${transportTab}</c:if>">

            <input type="hidden" name="scheduleData" value="${scheduleData}">

            <div class="control-group">
                <label class="control-label" for="file">Please upload a
                    file:</label>
                <div class="controls">
                    <input type="file" name="file" />
                </div>
            </div>

            <div class="control-group">
                <div class="controls">
                    <button type="submit" class="btn btn-primary">Continue</button>
                </div>
            </div>
        </form> 
```

这是我用于复选框的 JQuery（我知道更好的方法是使用无线电 nuttons。但我正在使用这个）

```
<script>
        $(document).ready(function() {
            $('input[type=checkbox]').change(function() {
                if ($(this).is(':checked')) {
                    $('input[type=checkbox]').attr('disabled', true);
                    $(this).attr('disabled', false);
                    var delValue = $(this).val();
                    $('#customdelimiter').attr('value', delValue);

                } else {
                    $('input[type=checkbox]').attr('disabled', false);
                    $('#customdelimiter').attr('value', '');
                }
            });
            $('#custom').change(function() {
                if ($(this).is(':checked')) {
                    $('#customdelimiter').attr('value', '');
                    $('#specify').slideDown("slow");
                } else {
                    $('#specify').slideUp("slow");
                    $('#customdelimiter').attr('value', '');
                }
            });
        });
    </script> 
```

根据选定的复选框值，我将文本框的值设置为该值。

我的 servlet ( `FileUploadServlet.java`) 读取输入值的一部分是，

```
FileItem fileItem=null;

        if ((contentType != null) && (contentType.indexOf("multipart/form-data") >= 0)) 
        {
            try
            {
             List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
             String itemList[]=new String[items.size()];
             for(int i=0;i<items.size();i++)
             {
                 itemList[i]=new String();
             }
             int i=0;
             for (FileItem item : items) {

                    if (item.isFormField()) {
                        // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
                       itemList[i]=item.getString();
                       i++;

                    } else {

                        String delimiter=itemList[0];
                     System.out.println("delimiter value is "+delimiter);

                      String transportTab=itemList[1];
                   System.out.println("dataload value is "+transportTab);
                    String  scheduleDataString= itemList[3]; 
```

如果我选择自定义，并输入一些值（比如`:`），字符串分隔符 bcomes on，transportTab 变为`:` 意味着添加自定义时数组索引更改。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:45:59.550

使用数组索引获取字段值不是一个好主意。您可以使用`getFieldName()`来获取字段名称并提取值。

getFieldName() 将返回元素`name`属性。对于您的情况：

```
String delimiter =null, transportTab = null;
if("delimiter".equals(item.getFieldName()){
   delimiter = item.getString();
}
if("transportTab".equals(item.getFieldName()){
   transportTab = item.getString();
} 
```

这样，您可以获得所需属性的正确值。

# asp.net - 将 DISTINCT 与 EntityDataSource 一起使用

> ID：16185840
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:22:48.610
> 
> 标签：asp.net, entitydatasource

我在 .NET v4 aspx 页面上有一个实体数据源（连接到 SQL Server 2012 数据库）。我的数据源声明如下所示：

```
<asp:EntityDataSource ID="BlahBlah" runat="server" 
    ConnectionString="name=BlahBlah" 
    DefaultContainerName="BlahBlah" EnableFlattening="False" 
    EntitySetName="vw_shop_ProductListWithIndivCats" 
    Where="it.Display =true" OrderBy="it.[DisplayPriority]" 
    Select="DISTINCT it.[ProductID], it.[Name], it.[Short_rubric],  it.[Price],  it.[Available], it.[Display], it.[ProductDetailLayoutID], it.[DisplayPriority] " > 
```

`WHERE`当用户与站点交互时，该值在代码中被修改。实体的列数多于`SELECT`语句中的列数

数据显示在gridview 中并且工作得很好，除了`DISTINCT`关键字不被尊重，即表中的重复行显示在gridview 中。

有什么建议么？

问题的更多细节。实体（即视图）中的列`vw_shop_ProductListWithIndivCats`是：

```
ProductID
Name
Short_rubric
Rubric
Price
Postage
Image_small
Image_Large
ImageType
Available
Display
ProductDetailLayoutID
DisplayPriority
CategoryID
Category 
```

大多数字段都是从产品表中派生的。在视图中有一个多对多连接到一个`Categories`表，其中最后两个字段通过通常的链接表进行调解。

在用户界面中，用户可以按类别选择产品，并且由于产品可能有多个类别，例如 n 个类别，selct 语句（没有 distinct）产生 x 行，因为视图仅包含字段形式，产品表将包含 n 个重复行. 我期待 DISTINCT 或 GROUP BY 对行进行重复数据删除，但两者都没有。我已经通过临时放入一个显示每一列的列表视图来确认我拥有我认为拥有的列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:44:15.150

为什么不尝试添加一个`GROUP BY`包含所有列的子句？[MSDN 链接](http://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.entitydatasource.groupby%28v=vs.100%29.aspx)这里是主要[EntityDataSource 文章的链接](http://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.entitydatasource%28v=vs.100%29.aspx)

您可能知道，在这种情况下，两者`GROUP BY`都`DISTINCT`可能在 SQL Server 中生成 ame 查询计划。

所以你可以把它改成这样（去掉`DISTINCT`）：

```
<asp:EntityDataSource ID="BlahBlah" runat="server" 
    ConnectionString="name=BlahBlah" 
    DefaultContainerName="BlahBlah" EnableFlattening="False" 
    EntitySetName="vw_shop_ProductListWithIndivCats" 
    Where="it.Display =true" OrderBy="it.[DisplayPriority]" 
    Select="it.[ProductID], it.[Name], it.[Short_rubric],  it.[Price],  it.[Available], [Display], it.[ProductDetailLayoutID], it.[DisplayPriority]"
    GroupBy="it.[ProductID], it.[Name], it.[Short_rubric],  it.[Price],  it.[Available], it.[Display], it.[ProductDetailLayoutID], it.[DisplayPriority]" /> 
```

# python - 我不明白 Python 原始字符串

> ID：16185841
> 
> 赞同：0
> 
> 时间：2013-04-24T07:22:50.707
> 
> 标签：python

python 文档说：

> 如果我们将字符串文字设为“原始”字符串，`\n`则序列不会转换为换行符，但行尾的反斜杠和源中的换行符都作为数据包含在字符串中。因此，示例：

我不太明白，因为它说*源中的换行符作为 data 包含在字符串中*，但`\n`只是按字面意思打印，如下例所示。

```
hello = r"This is a rather long string containing\n\
several lines of text much as you would do in C."

print(hello) 
```

任何一种帮助者都可以帮助我理解*，但行尾的反斜杠和源代码中的换行符都作为数据包含在字符串中吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:25:22.233

您在字符串中同时包含`\n`（两个字符）**和**换行符：

```
>>> hello
'This is a rather long string containing\\n\\\nseveral lines of text much as you would do in C.' 
```

将其缩减为仅`\n\`部分（在第二个斜杠后加上换行符：

```
>>> hello = r'\n\
... '
>>> hello
'\\n\\\n'
>>> len(hello)
4
>>> list(hello)
['\\', 'n', '\\', '\n'] 
```

那里有4个字符。一个反斜杠（在表示中加倍以使其成为有效的 Python 字符串）、一个`n`、另一个反斜杠和一个*换行符*。

你可以进一步分解它；源中文字换行符之前的反斜杠创建一个带有反斜杠和换行符的字符串：

```
>>> hello = r'\
... '
>>> hello
'\\\n'
>>> len(hello)
2
>>> list(hello)
['\\', '\n'] 
```

`r'\n'`另一方面，原始文字创建反斜杠和文字字符`n`：

```
>>> hello = r'\n'
>>> hello
'\\n'
>>> len(hello)
2
>>> list(hello)
['\\', 'n'] 
```

# ssas - SSAS MDX 获取从一个维度成员移动到另一个维度的项目数

> ID：16185844
> 
> 赞同：0
> 
> 时间：2013-04-24T07:22:58.270
> 
> 标签：ssas, mdx, transitions

我们已经为物品实施了生命周期。为此，我们有一个项目维度、一个阶段维度、一个日期维度和一个事实表，该事实表将项目分配给每个日期的阶段，从而产生一个 [#Items] 度量。到目前为止一切顺利，我现在可以看到随着时间的推移在一个阶段中存在多少项目。现在的问题是：

1) 我想知道本月处于特定阶段的项目有多少，上个月处于另一个阶段。（例如，项目从介绍阶段进入成熟阶段，或者它们已经成熟）

2) 反过来，有多少项目在上个月处于特定阶段但本月不再存在（例如，项目从上个月的成熟转移到本月的淘汰）

我真的很困惑如何在这里开始使用 MDX，有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:21:00.447

那么，您对 MDX 有任何了解吗？否则，您可以查看以下资源：

[http://www.fing.edu.uy/inco/grupos/csi/esp/Cursos/cursos_act/2005/DAP_SistDW/Material/2-SDW-Laboratorio1-2005.pdf](http://www.fing.edu.uy/inco/grupos/csi/esp/Cursos/cursos_act/2005/DAP_SistDW/Material/2-SDW-Laboratorio1-2005.pdf)

[http://www.iccube.com/support/documentation/mdx_tutorial/gentle_introduction.html](http://www.iccube.com/support/documentation/mdx_tutorial/gentle_introduction.html)

如果您需要有关特定查询的帮助，请显示一些代码和/或一些表/列图，以便我们提供帮助。

# sqlalchemy - 使用简化的关联对象访问多对多关系中的额外列

> ID：16185846
> 
> 赞同：2
> 
> 时间：2013-04-24T07:23:00.647
> 
> 标签：sqlalchemy

我正在尝试使用[SQLAlchemy 文档中的示例：简化关联对象](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/associationproxy.html#simplifying-association-objects)

我正在努力理解的是如何访问 special_key。最终我希望能够做这样的事情：

```
for user in users
    for keyword in user.keywords
        keyword.special_key 
```

以下是示例中的代码：

```
class User(Base):
__tablename__ = 'user'
id = Column(Integer, primary_key=True)
name = Column(String(64))

# association proxy of "user_keywords" collection
# to "keyword" attribute
keywords = association_proxy('user_keywords', 'keyword')

def __init__(self, name):
    self.name = name

class UserKeyword(Base):
__tablename__ = 'user_keyword'
user_id = Column(Integer, ForeignKey('user.id'), primary_key=True)
keyword_id = Column(Integer, ForeignKey('keyword.id'), primary_key=True)
special_key = Column(String(50))

# bidirectional attribute/collection of "user"/"user_keywords"
user = relationship(User,
            backref=backref("user_keywords",
                            cascade="all, delete-orphan")
        )

# reference to the "Keyword" object
keyword = relationship("Keyword")

def __init__(self, keyword=None, user=None, special_key=None):
    self.user = user
    self.keyword = keyword
    self.special_key = special_key

class Keyword(Base):
__tablename__ = 'keyword'
id = Column(Integer, primary_key=True)
keyword = Column('keyword', String(64))

def __init__(self, keyword):
    self.keyword = keyword

def __repr__(self):
    return 'Keyword(%s)' % repr(self.keyword) 
```

我在这里遵循这种模式是否走在正确的轨道上？

我的目标本质上是多对多，带有一个包含布尔值的额外列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:06:47.493

这应该有效：

```
for user in users:
    for keyword in user.user_keywords:
        print keyword.special_key 
```

# vb.net - 监视组合框以更改 vb.net

> ID：16185847
> 
> 赞同：0
> 
> 时间：2013-04-24T07:23:01.927
> 
> 标签：vb.net, combobox

如何监视 ComboBox 的更改？

SelectedIndexChanged 事件仅在通过从组合框中选择不同的值来更改选择时触发，我想在手动删除选择并且未选择任何值时监视 chaes。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:18:53.573

简单，只需使用事件`TextChanged`：

> 在 Text 属性值更改时发生。

请参阅有关它的[MSDN 文档](http://msdn.microsoft.com/es-es/library/ms158340.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:57:38.330

只需扩展组合框类并覆盖 SelectedIndexChange 事件即可满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:27:31.953

您可以选择`Indexchange or Valuechange or Textchange`

然后，您可以尝试放置一些代码。喜欢记录它的每一个变化。

就像将下面的代码添加到`Valuechange`

```
listbox1.items.add = combobox1.selecteditem 
```

当然，您必须将可见变为错误

# javascript - 如果向下滚动，弹出位置会改变

> ID：16185848
> 
> 赞同：0
> 
> 时间：2013-04-24T07:23:02.057
> 
> 标签：javascript, jquery, html, css

我有一个弹出 div，它在单击图像时显示，我想在单击的位置显示 div。现在只有当页面处于默认位置时才有效，即不滚动或不缩放。如果滚动或缩放，则弹出窗口的位置正在改变。

正常弹窗

![在此处输入图像描述](https://i.stack.imgur.com/0d2UO.jpg)

没关系。

现在，当我向下滚动页面并单击齿轮图像（设置）时。就像这样。

![在此处输入图像描述](https://i.stack.imgur.com/P4SMt.jpg)

请查看页面滚动和问题。另一个是当我放大它时。如果放大它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/dbhca.jpg)

我的js是：

```
$('.settings img').live('click', function (event) {
            $('.set_pop').css('left',event.pageX);     
            $('.set_pop').css('top',event.pageY);
            $('.set_pop').css('display','inline');     
            $(".set_pop").css("position", "fixed");  
            $(".set_pop").show();
        }); 
```

我的CSS：和蓝色（标题）它的位置是固定的

```
.settings{
                float:right;
                margin-right: 3%;
                border: none;
                margin-top: 5px;
                cursor: pointer;

            }
            .set_pop{
                position:absolute;
                margin-right: 50px;
                margin-top:10px;
                width:100px;
                -webkit-box-shadow: #666 0px 2px 3px;
                -moz-box-shadow: #666 0px 2px 3px;
                box-shadow: #666 0px 2px 3px;
                border-radius:5px;
                -moz-border-radius:5px;
                -webkit-border-radius:5px;
                z-index:10;
                background-color: #ffffff;
                color:#000;
            } 
```

**html**

```
<div class="settings">
             <img src="images/setting.png" alt="settings" width="30px" height="30px"/>
               <div class="set_pop">
                   <ul class="strip">
                       <li onclick="location.href='register'">Manage Users</li>
                   <li>test</li>
                   <li>test</li>
                   <li>test</li>
                   </ul>
            </div>
         </div> 
```

抱歉发布所有内容，实际上我无法解决问题，我尝试了各种脚本并更改了所有位置。我希望这里有人可以帮助我。

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:35:13.310

将您的课程更改为：

```
.set_pop {
background-color: #FFFFFF;
border-radius: 5px 5px 5px 5px;
box-shadow: 0 2px 3px #666666;
color: #000000;
margin-right: 50px;
margin-top: 10px;
position: fixed;
width: 100px;
z-index: 10;
top: 40px;
z-index: 10; 
```

}

我所做的是，我改变了**位置：绝对；****定位：固定**；并添加了“top”和“right”以正确定位它。您可以相应地更改顶部/右侧。

*   绝对相对于文档显示（或者，如果另一个元素内部是相对于该元素，只要它不是静态的）

*   相对是相对于文档的，但可以使用左上角和右下角属性定位并随页面滚动

*   固定显示在浏览器窗口中，因此如果您调整窗口大小，它不会滚动但会移动

[详细解释请点击这里](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

# linux - 在linux中修改文件之前检查文件的内容

> ID：16185849
> 
> 赞同：0
> 
> 时间：2013-04-24T07:23:05.657
> 
> 标签：linux

我想知道在linux中修改文件之前是否有任何方法可以检查文件的内容。假设我有一个名为 example.cpp 的文件，其中我有一个 C++ 代码。现在，如果我进行了一些更改并保存了它，是否可以在不进行更改的情况下检查旧的 example.cpp 文件？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:26:07.797

不，这是不可能的。Linux 不存储文件的版本副本。

您可以做的是将源文件存储在源代码控制系统中，例如`git`、`subversion`或`cvs`. 这些提供存储在其存储库中的所有文件的完整版本控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:25:33.420

文件系统不进行备份或进行版本控制。但是，一些编辑在保存之前会进行备份。至少 Gedit 将备份保存`example.cpp`为`example.cpp~`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:27:14.060

有两种方法可以实现您的目标：

1.  使用[版本控制文件系统](http://en.wikipedia.org/wiki/Versioning_file_system#Linux)。然后你想做的事情就会自动发生。

2.  使用 VCS，例如 Subversion、Mercurial 或 Git，并在每次更改之后（分别在之前）提交。

# android - Android 上的 SQLite：运行时与 SQLite 管理员的不同结果集

> ID：16185850
> 
> 赞同：2
> 
> 时间：2013-04-24T07:23:07.553
> 
> 标签：android, sqlite, android-sqlite

我正在构建一个带有内部 SQLite DB 的 Android 应用程序。这是架构：

```
CREATE TABLE IF NOT EXISTS [tblImageVideoLink] (
[LinkID] INTEGER  NOT NULL PRIMARY KEY,
[ImageID] INTEGER  UNIQUE NOT NULL,
[VideoID] INTEGER  NULL
);

CREATE TABLE IF NOT EXISTS [tblImages] (
[ID] INTEGER  PRIMARY KEY NOT NULL,
[ImageName] VARCHAR(50)  NOT NULL,
[ImageDescription] VARCHAR(100)  NULL,
[Page] INTEGER  NULL
);

CREATE TABLE IF NOT EXISTS [tblPages] (
[ID] INTEGER  NOT NULL PRIMARY KEY,
[PageName] VARCHAR(30)  NULL
);

CREATE TABLE IF NOT EXISTS [tblVideos] (
[ID] INTEGER  NOT NULL PRIMARY KEY,
[VideoName] VARCHAR(150)  NOT NULL,
[VideoDescription] VARCHAR(100)  NULL,
[VideoType] VARCHAR(10)  NULL
);

CREATE INDEX IF NOT EXISTS [IDX_TBLIMAGEVIDEOLINK_IMAGEID] ON [tblImageVideoLink](
[ImageID]  DESC,
[VideoID]  DESC
);

CREATE INDEX IF NOT EXISTS [IDX_TBLIMAGES_PAGE] ON [tblImages](
[Page]  DESC
); 
```

这是我在表格中的相关数据：

```
INSERT INTO tblImages (ID, ImageName, Page) VALUES (1, 'Beach.jpg', 1);
INSERT INTO tblImages (ID, ImageName, Page) VALUES (2, 'Bowling.jpg', 1);
INSERT INTO tblImages (ID, ImageName, Page) VALUES (3, 'Car.jpg', 1);
INSERT INTO tblVideos (ID, VideoName) VALUES (2, 'Bowling.3gp');
INSERT INTO tblVideos (ID, VideoName) VALUES (3, 'Car.3gp');
INSERT INTO tblImageVideoLink (LinkID, ImageID, VideoID) VALUES (1, 2, 2);
INSERT INTO tblImageVideoLink (LinkID, ImageID, VideoID) VALUES (2, 3, 3);
INSERT INTO tblPages (ID, PageName) VALUES (1, 'Misc'); 
```

我正在尝试运行此查询以获取具有特定页面的所有图像及其相关视频：

```
SELECT DISTINCT I.ID AS 'Image ID', I.ImageName, V.ID AS 'Video ID', V.VideoName
FROM tblImages I
LEFT JOIN tblImageVideoLink L ON L.VideoID=V.ID
LEFT JOIN tblVideos V ON L.ImageID=I.ID
WHERE I.Page=1; 
```

当我在[SQLite Administrator](http://sqliteadmin.orbmu2k.de/)中对其进行测试时，我得到了**所需**的结果集，即： ![在此处输入图像描述](https://i.stack.imgur.com/WgkAo.jpg)

当我在 App （或[SQLiteSpy](http://www.yunqa.de/delphi/doku.php/products/sqlitespy/index)）中测试它时，我得到了*不同*的结果集： ![在此处输入图像描述](https://i.stack.imgur.com/GDLxr.jpg)

我已经尝试了我所知道的一切，包括 GROUP BY、删除 DISTINCT、不同的 JOIN 类型等。

顺便说一句，SQLiteSpy 在底部写：SQLite 3.7.8，而 SQLite Administrator 写 SQLite 3.5.1。我不知道这是否重要。

请帮助，并请解释为什么两个 SQLite 工具之间存在差异......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:29:58.560

我亲爱的朋友和 DBA 帮助我发现了我的问题。这是连接两个表并获取我想要的数据集的工作查询：

```
SELECT DISTINCT I.ID AS 'Image ID', I.ImageName, V.ID AS 'Video ID', V.VideoName
FROM tblImages I
LEFT JOIN tblImageVideoLink L ON L.ImageID=I.ID
LEFT JOIN tblVideos V ON L.VideoID=V.ID
WHERE I.Page=1; 
```

感谢大家尝试提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:43:18.183

您在 SQLLite Admin 中看到的内容（考虑到您的输出）与 `SELECT DISTINCT(I.ImageName), V.VideoName`

您在应用程序中实际看到的（考虑到您的输出）与 `SELECT DISTINCT(I.ImageName, V.VideoName)`

试试括号

# vim - 输入 shebang 行后 Vim 更改文件类型

> ID：16185853
> 
> 赞同：1
> 
> 时间：2013-04-24T07:23:21.583
> 
> 标签：vim, file-type

当我在新缓冲区的第一行`filetype`键入 shebang 行（例如 ）时，我希望 Vim 更改。`#!/bin/bash`

目前我正在使用`vim-shebang`插件来更改文件类型，但它仅在打开新缓冲区时才有效。

**澄清：**我有兴趣通过`<CR>`在插入模式下映射来实现所需的结果。我想要的是当我`#!/bin/bash<CR>`在缓冲区的第一行键入以自动执行`:filetype detect`并返回编辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T08:17:11.337

您可以使用

```
:filetype detect 
```

在编写 shebang 行后重新触发文件类型检测。

这可以通过 自动执行`:autocmd`，例如在`BufWritePost`仍然`&filetype`为空时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:52:52.333

我建议[阅读 Vim 的（总是很棒的）文档](http://vimdoc.sourceforge.net/htmldoc/filetype.html#new-filetype-scripts)（我在下面引用）：

```
:help new-filetype-scripts 
```

这可能会帮助你。

> 如果您的文件类型只能通过检查文件的内容来检测。
> 
> 1.  创建您的用户运行时目录。您通常会使用选项的第一项`'runtimepath'`。Unix 示例：`:!mkdir ~/.vim`
>     
>     
> 2.  为此创建一个 vim 脚本文件。例子：
>     
>     
>     
>     ```
>      if did_filetype()    " filetype already set..
>        finish     " ..don't do these checks
>      endif
>      if getline(1) =~ '^#!.*\<mine\>'
>        setfiletype mine
>      elseif getline(1) =~? '\<drawing\>'
>        setfiletype drawing
>      endif 
>     ```
>     
>     
>     
>     有关`$VIMRUNTIME/scripts.vim`更多示例，请参阅。
>     
>     
>     
>     在您的用户运行时目录中将此文件写为“scripts.vim”。例如，对于 Unix：
>     
>     
>     
>     ```
>      :w ~/.vim/scripts.vim 
>     ```

*更新*（在原始问题的编辑之后）：我建议不要映射`，但你可以这样做`

```
:inoremap <CR> YOUR_SPECIAL_FUNCTION_WHICH_DETECS_THE_CURRENT_LINE_AND_RUNS_FILETYPE_DETECT 
```

上面的代码片段 ( `if getline(1)`... 足以让您入门。我们不是 writethecodeformeforfree.com 社区。

# android - Eclipse 无法在三星 Galaxy Y 上安装 Android 应用程序

> ID：16185857
> 
> 赞同：0
> 
> 时间：2013-04-24T07:23:46.317
> 
> 标签：android, eclipse

你好Android爱好者，

我处于一个有趣的境地，似乎我陷入了困境。我一直在 Eclipse 上开发简单的 Android 应用程序并在模拟器上运行得很好。但最近我尝试在真实设备（三星 Galaxy Y）上安装和运行它们一次又一次失败。

我停止了模拟器并使用 USB 电缆将我的真实设备插入计算机。一旦我这样做了，我就会看到“正在安装设备驱动程序软件”通知，它会抱怨抽象控制模型的驱动程序 ACM 丢失。

有几次我忽略了通知并试图在我的手机上启动一个应用程序。但是 Eclipse 会简单地忽略我的读取设备，启动模拟器，然后在其上运行应用程序。

我知道这不是 Eclipse 问题。但是，根据许多人在各个网站上留下的评论，我如何解决这个似乎是三星设备上常见问题的 USB 问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:27:02.283

您需要为您的 android 设备安装适当的 USB 驱动程序首先通过此链接[设置用于开发的设备](http://developer.android.com/tools/device.html)并[安装 USB 驱动程序](http://developer.android.com/tools/extras/oem-usb.html)

# c# - 验证和存储逗号分隔值

> ID：16185859
> 
> 赞同：0
> 
> 时间：2013-04-24T07:23:50.553
> 
> 标签：c#, string, csv, validating

我有一个拆分字符串，

```
 string s = Console.ReadLine();
 string[] values = s.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

s 应该收到这样的输入：

字符串文字、数值、数值、数值或字符串文字

我意识到所有这些输入都作为字符串读取，但我正在尝试验证字符串中的数字（检查 > 0），并将字符串中的每个值分配给一个变量。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:30:33.610

您正在寻找特定的模式。我建议使用正则表达式，然后获取数字组 - 并进行 > 0 验证检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:33:19.973

```
string s = Console.ReadLine();
string[] values = s.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
string stringValue0 = values[0];
int numericValue1 = int.Parse(value[1]); // Assuming the value is an valid interger.
int numericValue2 = int.Parse(value[2]); // Assuming the value is an valid interger.
int numericvalue3;
string stringValue3;
if (!int.TryParse(values[3], out numericValue3) // Trying to convert the text to an interger. If it fails, assign it to the stringValue3.
    stringValue3 = values[3]; 
```

您始终可以使用`int.TryParse`来验证文本是否包含数字。

# html - 在一个 HTML 元素中有很多类是不是很糟糕？

> ID：16185863
> 
> 赞同：4
> 
> 时间：2013-04-24T07:24:04.007
> 
> 标签：html, css, browser, rendering

在现代 HTML 编码中，向一个元素添加几个类名是很流行的，例如

```
<div class="class1 class2 class3 class4 ..."
</div> 
```

这为我们提供了很大的灵活性，可以混合 CSS 属性，而无需为不同的类重复它们。

从逻辑上讲，浏览器会消耗更多的资源来收集不同类的 CSS 属性以应用于相应的元素。

由于很难对此进行可靠的基准测试，因此我从理论的角度提出了这个问题。想象一下，一个页面的大部分 HTML 元素都有几个类（例如 10 个类）。这是否会使页面呈现更困难和更慢？这种放缓是否合理且可观？

一般来说，浏览器从不同类中读取属性的常见流程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:31:14.630

添加许多类的兴趣在于为单独的样式设置单独的类，而不是重复/创建用于相同用途的新类。

例如，如果我有一个按钮，我可以有 3 个类，比如`.btn .big .grey`. 如果我想创建另一个按钮，我只需要重复 .btn 类，并添加我的其他自定义类，如`.medium`和`.green`。它被称为 OOCSS（面向对象 CSS）。

关于性能，我推荐你看这个小例子[http://www.css-101.org/descendant-selector/go_fetch_yourself.php](http://www.css-101.org/descendant-selector/go_fetch_yourself.php) , [http://csswizardry.com/2011/09/writing-efficient-css-选择器](http://csswizardry.com/2011/09/writing-efficient-css-selectors)，你可以找到很多关于 ids 和 classes 性能的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:10:38.770

多个类可以更轻松地为元素添加特殊效果，而无需为该元素创建全新的样式。例如，您可能希望能够快速向左或向右浮动元素。你可以用“float:left;”写两个类“left”和“right”。和“浮动：对；” 在他们中。然后，每当您有一个需要向左浮动的元素时，您只需将类“left”添加到其类列表中。

我喜欢将多个类用于我想在整个站点中保持标准的东西。例如，如果我总是希望具有下边距的元素的下边距为 10px。通过创建一个只包含bottom-margin:10px的类；我可以在需要的地方添加它。

多类的缺点

虽然它们在主要浏览器中受支持，但真正的旧浏览器不支持它们。因此，您应该确保您列出的第一个类是具有该元素最具体信息的类。

当您对一个元素应用越来越多的类时，多个类也会变得非常混乱。

[更多的...](http://webdesign.about.com/od/css/qt/tipcssmulticlas.htm)

概括：

*   减少选择器的总数（包括 IE 相关的样式：.ie7 .foo .bar）
*   避免通用选择器（包括不合格的属性选择器：[type="url"]）
*   页面缩放会影响某些浏览器（例如 Opera）中的 CSS 性能
*   窗口大小会影响某些浏览器（例如 Chrome）中的 CSS 性能
*   页面重新加载会对某些浏览器（例如 Opera）中的 CSS 性能产生负面影响
*   “border-radius”和“transform”是最昂贵的属性（至少在 WebKit 和 Opera 中）
*   基于 WebKit 的浏览器中的“时间线”选项卡可以揭示总的重新计算/重排/重绘时间
*   选择器匹配在 WebKit 中要快得多

[http://perfectkills.com/](http://perfectionkills.com/)

# android - Android：在画布上绘制图形

> ID：16185869
> 
> 赞同：2
> 
> 时间：2013-04-24T07:24:36.617
> 
> 标签：android, android-canvas

我正在画布上工作。在这里，我只想在画布上绘制一些几何图形，这些图形可以根据 touch_move 位置调整大小。通过数字，我只是指三角形、矩形、圆形和一些多边形。有没有办法做到这一点？. 我还没有见过这样的应用程序可以在画布上绘制这些数字。所以这似乎很复杂..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:13:16.050

请参阅[此](http://www.betaful.com/2012/01/programmatic-shapes-in-android/)链接。

如果您的应用程序不需要大量的处理或帧速率（可能是象棋游戏、蛇游戏或其他慢速动画应用程序），那么您应该考虑创建一个自定义 View 组件并使用 Canvas 进行绘图`View.onDraw()`. 这样做最方便的方面是 Android 框架将为您提供一个预定义的 Canvas，您可以在其中放置绘图调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:44:20.510

如果您尝试一下，我相信您可以找到一些开箱即用的开源解决方案。

如果你真的想学习一些东西，你应该阅读每个示例的教程；

-[自定义视图](http://developer.android.com/training/custom-views/index.html)

- [OpenGL](http://developer.android.com/training/graphics/opengl/index.html)

完成教程后，您将有 2 种方法来绘制基本形状，我相信三角形和圆形已经完成。

# google-maps - 融合表地图图层热图

> ID：16185871
> 
> 赞同：0
> 
> 时间：2013-04-24T07:24:44.447
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables, zooming, heatmap

我有一个融合表层，我按如下方式启用了热图，它在我的地图层中运行良好。

```
 layer = new google.maps.FusionTablesLayer({
      query: {
        select: 'Lat', 
        from: FT_TableID
      },
       map: map,
    //  suppressInfoWindows: true
    heatmap: { enabled: true },
      options: {
        styleId: 2,
        templateId: 2
      }
    }); 
```

是否可以在特定缩放级别（例如 13）之后禁用热图，以便在缩放级别 = 13 之后我可以查看融合表中的实际标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:32:27.623

是的，确实如此！您只需为地图对象 zoom_changed 事件设置一个事件侦听器并检查地图缩放级别。然后使用图层的 setOptions() 方法重新设置图层的热图启用属性。因此，将您的代码更改为以下内容：

```
layer = new google.maps.FusionTablesLayer({
    query: {
        select: 'Lat',
        from: FT_TableID
    },
    map: map,
    //  suppressInfoWindows: true
    heatmap: {
        enabled: true
    },
    options: {
        styleId: 2,
        templateId: 2
    }
});
var heatMapIsOn = true;
google.maps.event.addListener(map, 'zoom_changed', function () {
    var zoom = map.getZoom();
    //we could just reset the layers options at every zoom change, but that would be
    //a bit redundant, so we will only reset layers options at zoom level 13
    if (heatMapIsOn && zoom >= 13) {
        layer.setOptions({heatmap: {enabled:false}});
        heatMapIsOn = false;
    } else if (!heatMapIsOn && zoom < 13) {
        layer.setOptions({heatmap: {enabled:true}});
        heatMapIsOn = true;
    }
}); 
```

# javascript - Slickgrid：获取值更改事件。？

> ID：16185872
> 
> 赞同：2
> 
> 时间：2013-04-24T07:24:44.840
> 
> 标签：javascript, slickgrid

如何在 slickgrid 中获取值更改事件。我在示例中找到“grid.onclick”，但它猜测它的名称显示每次单击网格时它都会触发。

例如，我有一个包含三列名称、姓氏和选择（复选框）的网格。我想在用户选择/取消选择（更改复选框的值）复选框时收到通知。

```
var cols = [  
    {id:"fname", name:"First Name", field:"fname"},  
    {id:"lname", name:"Last Name", field:"lname"},
    {id: "select", name: "CheckBox",cssClass: "cell-effort-driven", field: "select", formatter: Slick.Formatters.Checkmark, editor: Slick.Editors.Checkbox}
];

var data = [
    {fname:"Jimmy", lname:"Page", select: true},  
    {fname:"Ritchie", lname:"Blackmore", select: false},  
    {fname:"Michael", lname:"Schenker", select: true}
]; 
```

我查看了 SlickGrid 对象，它有 onCellChange 事件。它不适用于复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-08T17:38:15.357

您可以按如下方式实现，

```
grid.onCellChange.subscribe(function (e, args) {
    if (args.cell == 3) { // 假设您的复选框是第 3 列
        //您的复选框更改事件
    }
}

```

# vim - 如何在 Vim 中以给定字符开头的行？

> ID：16185879
> 
> 赞同：2
> 
> 时间：2013-04-24T07:25:08.953
> 
> 标签：vim

最近我发现`f`对我来说真的很方便，所以我想知道 Vim 中是否有类似的命令可以转到以给定字符开头的行

`gi`#go 之类的东西`i`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:34:02.123

要跳到以字母 L 开头的下一行：

```
/^L 
```

/ 是向前搜索， ^ 是一行的开头，然后是您希望行开头的任何字符串。

n 表示下次出现

N 表示先前出现

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T08:42:01.577

1）通过搜索。 `/^[your char]`或`?^[your char]`（相反）

这样做的**好处**是，它可能会将您引导到当前屏幕中未显示的行。

**缺点**是，还需要`char`按几次`n`

*****如果此选项适合您，请考虑接受 sjas 或 AI 的回答***

2) 易动[http://www.vim.org/scripts/script.php?script_id=3526](http://www.vim.org/scripts/script.php?script_id=3526)

```
<leader><leader>j 
```

或者

```
<leader><leader>k 
```

这个插件非常好，它可以非常快速地导航到当前屏幕上的某个位置。除了上面提到的两个快捷键外，它还有

```
<leader><leader>f
<leader><leader>w
<leader><leader>F
... 
```

试试这个插件。你会喜欢它。

**缺点**：如果您要走的线路在当前屏幕之外，则难以处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:34:46.770

```
gg/^<character> 
```

应该这样做，它是 gg （转到第一行）和 /^... （简单搜索）。

# html - HTML5 不是基于 SGML，那么它是基于什么的呢？

> ID：16185880
> 
> 赞同：16
> 
> 时间：2013-04-24T07:25:11.683
> 
> 标签：html, sgml

[http://www.w3schools.com/tags/tag_doctype.asp](http://www.w3schools.com/tags/tag_doctype.asp)

> HTML5 不是基于 SGML，因此不需要引用 DTD。

如果不是基于 SGML，HTML 5 基于什么标准？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-24T07:34:58.990

HTML5 标准规定了 HTML5 的[两种序列化](http://www.w3.org/QA/2008/01/html5-is-html-and-xml.html)：“html”和“xml”。“xml”是一个有效的 XML 序列化（它又是 SGML 的一个子集）。“html”不再基于任何特定的序列化标准，[它有自己完整的序列化](http://www.w3.org/html/wg/drafts/html/master/syntax.html#syntax)。区别就在这里：HTML4 有“sgml”序列化和“xml”序列化（称为 XHTML 1.0）

当然，HTML5 很大程度上是基于 HTML4（基于 SGML）和 XHTML（基于 HTML4 和 XML）。

另请参阅HTML5 规范的[历史部分](https://html.spec.whatwg.org/multipage/introduction.html#history-2)

# c# - 如果 Excel 未打开，则无法更新 Excel 文件？

> ID：16185884
> 
> 赞同：2
> 
> 时间：2013-04-24T07:25:22.623
> 
> 标签：c#, asp.net, web-services, excel, ms-office

我正在尝试在 C# 中使用 Oledb 和 Dataset 读取和更新 Excel。

即使 Excel 文件是否打开，读取操作也能正常工作。

更新操作仅在文件打开时有效，但**更新操作在 Excel 文件未打开时出错**

```
Code :
string query2 = "SELECT * FROM [Fixtures Input$A:IP]";
        string qupdate;        
        string conStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Server.MapPath("SAE.xls") + ";Mode=ReadWrite;" + "Extended 
Properties=\"Excel 8.0;IMEX=0;HDR=YES;TypeGuessRows=0;ImportMixedTypes=Text\"";
        con = new OleDbConnection(conStr);
        con.Open();
        cmd2 = new OleDbCommand(query2, con);
        adap2 = new OleDbDataAdapter(cmd2);
        ds2 = new DataSet();
        adap2.Fill(ds2, "Fixtures Input");

        #region "DoingRowEmpty"
        for (int i = 1; i <= 10; i++)
        {
            DataRow aaa = ds2.Tables[0].Rows[i];
            aaa.BeginEdit();
            //aaa.ItemArray[2] = "test";
            aaa.EndEdit();
            id = Convert.ToString(i);

            qupdate = "UPDATE [Fixtures Input$] SET [Fixtures] = '', [Fixture Type] = '', [x] = '' , [(R/N)] = '' , [Fixture Quantity] = '' ,"
                      + " [Quantity of Gangs] = '' , [Sensor mount] = '' , [new lamps] = '', [High bay] = '', [burn/year] = '' ,[Ladder] = ''  where [id] = '" + id + "'";

            adap2.UpdateCommand = new OleDbCommand(qupdate, con);

            adap2.Update(ds2.Tables[0]);
}
#endregion 
```

**有什么建议吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:29:04.937

在运行程序之前是否需要打开 Excel 文件？

# kendo-ui - Kendo 数据源模型 - _data[0] 和 get(0) 之间的区别

> ID：16185896
> 
> 赞同：0
> 
> 时间：2013-04-24T07:25:50.537
> 
> 标签：kendo-ui

我想知道两者的区别

```
$("#uploadedFile").val(e.files[0].name);
var model = $("#blueprint_listview").data("kendoListView").dataSource.get(0);        
model.set("filename", $("#uploadedFile").val()); 
```

和

```
$("#uploadedFile").val(e.files[0].name);
var model = $("#blueprint_listview").data("kendoListView").dataSource._data[0];        
model.set("filename", $("#uploadedFile").val()); 
```

我有一个上传的可编辑列表视图。

而上面的代码是写在剑道上传成功事件上的。

第二个代码适用于插入和更新。

但是，第一个代码可以正常插入，但是对于更新，它会显示一个错误，上面写着 - “模型未定义”

我想知道可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:03:13.270

如[文档](http://docs.kendoui.com/api/framework/datasource#methods-get)中所述，`get`检索具有相应 id 的记录。这样，当插入新记录时，它的默认 ID 似乎为 0，这就是为什么`get(0) === _data[0]`但是当您更新列表视图时，会为您的新行提供一个“真实”ID（> = 1）并且没有id=0 的项目更长，`model`则为空。

另一方面，内部方法`_data`是一个数组，列表视图的所有行都按照它们在列表视图中的位置顺序排列。但是如果你想访问这个属性，等效的“公共”方法是[`at`](http://docs.kendoui.com/api/framework/datasource#methods-at)：

```
$("#blueprint_listview").data("kendoListView").dataSource._data[0] === 
   $("#blueprint_listview").data("kendoListView").dataSource.at(0); // allways true 
```

# firefox - 使用 Zurb 的 Foundation 框架看不到文本框输入（仅限 Firefox）

> ID：16185900
> 
> 赞同：0
> 
> 时间：2013-04-24T07:26:04.460
> 
> 标签：firefox, textbox, zurb-foundation

我在查看我在文本框中编写的输入时遇到问题。我正在使用 Zurb [http://foundation.zurb.com/的 Foundation Framework](http://foundation.zurb.com/)

我在这里放了一个简单的版本[http://mybookmarklet.herokuapp.com](http://mybookmarklet.herokuapp.com)

（名称的小书签部分与此问题无关）

如果您在文本框中输入一些文本，然后单击“scrape”（使用 Firefox），您将看到问题 - 输入被警告，这是应该发生的。但是，实际上无法查看文本框中的文本。

有谁知道这是否可以修复？

PS。这实际上并不是在进行屏幕抓取——事后看来，scrape 这个词并不是最好的选择。

聚苯乙烯。使用 Firefox 20、Mac OS 10.6.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:37:57.267

您在文本框上应用了太多填充：

```
<input id="txt-scrape" type="text" style="padding:22px;" placeholder="http://"> 
```

您可以使文本框的高度更大`62px`（该值实际上将显示文本）或使您的填充更小，`7px`这是您可以根据您的样式应用的最大值。

# php - 如何在php中获取正确的日期而不是系统日期

> ID：16185901
> 
> 赞同：1
> 
> 时间：2013-04-24T07:26:05.990
> 
> 标签：php

如何在php中获取正确的日期而不是系统日期

例如：实际日期是`24/4/2013`，但我更改了我的系统日期是`25/4/2013`。

**如何获得正确的日期，即`24/4/2013`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:27:54.657

[http://tf.nist.gov/tf-cgi/servers.cgi](http://tf.nist.gov/tf-cgi/servers.cgi)

,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:47:07.153

PHP 不能天生就知道您的系统时间不正确。正如其他人指出的那样，您可以改为查询权威来源（类似于[此处提供的解决方案](https://stackoverflow.com/questions/6959114/get-time-from-timeserver)）。

编辑：[时间服务器查询示例的快捷方式](http://www.kloth.net/software/timesrv1.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:48:01.717

`date()`在使用该功能之前设置默认时区。

例如：

```
date_default_timezone_set('UTC');
// or 
// date_default_timezone_set('Europe/Madrid')

echo date("Y-m-d H:i:s"); 
```

# java - java从php设置类路径

> ID：16185903
> 
> 赞同：2
> 
> 时间：2013-04-24T07:26:07.970
> 
> 标签：java, php, classpath

我有这个文件夹结构

```
C:\a\b.java
C:\a\b.class
C:\a\c.java
C:\a\c.class
C:\a\ftp.jar 
```

在 PHP 中，我使用`exec("java b");`了这个执行`b.class`的文件。那也行。现在我应该`c.class`从 PHP 执行文件。在 c.java 中，我为 ftp.jar 中的类创建了一个对象。所以我应该为此设置类路径。但我无法从 PHP 设置类路径

但是当我从 cmd 执行此操作时，一切正常。请告诉我如何从 PHP 设置类路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:34:42.537

这可能有效（提供明确`cp`的论点，但我没有尝试过）：

```
exec("java -cp  C:\a\d.jar c"); //if d.jar contains c.class 
```

或者

```
exec("java -cp  C:\a c"); //if d.jar doesn't contain c.class 
```

# javascript - 使用 javascript 保存页面

> ID：16185908
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:26:26.267
> 
> 标签：javascript

我有一个 jsp 页面，其中包含一个 ID 为“部门”的表。有一个名为“保存”的按钮。当我单击“保存”按钮时，它应该提供将部门表保存为文本文件或 pdf 的选项。为此，我编写了一个 javascript 函数。但它不起作用。有谁能够帮我？我的javascript函数如下 -

```
function Save() {
    var saveContent = document.getElementById("department");
    document.execCommand("SaveAs",true, saveContent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:32:34.323

您应该同意内容

```
var content = saveContent. innerHTML 
```

现在您可以使用此内容了吗？使用 Ajax 发送或执行命令。

# c - MAX 值过大的 Programm Crash 案例

> ID：16185910
> 
> 赞同：1
> 
> 时间：2013-04-24T07:26:31.400
> 
> 标签：c, dev-c++

我实施[了 Eratosthenes 筛法](https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)，效果很好。但是，如果我将 MAX 值增加到 50000 之类的值，则应用程序崩溃并出现未处理的 win32 异常。我认为这是因为堆栈溢出而发生的。

现在我的问题是如何防止这种情况发生？

```
#define MAX 50000
void Sieb_des_Eratosthenes()
{
    char Zahlen[MAX + 1] = {0};
    int i, j, x;

    for(i = 2; i <= MAX; i++)
    {
       if(Zahlen[i] == 0)     
       {
           Zahlen[i] = 1;
           for(j = i * i; j <= MAX; j += i)
           {
                 Zahlen[j] = -1;
           }      
       }
    }
} 
```

我的想法是分配内存，但这不起作用

```
#define MAX 50000
int Sieb_des_Eratosthenes()
{
    int i, j, x;
    char *array;
    array = malloc((MAX + 1) * sizeof(*array));
    if (array==NULL) {
       printf("Error allocating memory!\n");
       return -1; //return with failure
    }

    for(i = 2; i <= MAX; i++)
    {
       if(array[i] == 0)     
       {
           array[i] = 1;
           for(j = i * i; j <= MAX; j += i)
           {
                 array[j] = -1;
           }      
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:42:17.300

您的函数失败的原始问题是在这个 for 循环中。

```
for(j = i * i; j <= MAX; j += i) 
```

当 i 等于或大于 46349 时，结果`i * i`溢出并且 j 获取值`-2146737495`然后失败`Zahlen[j] = -1;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:41:43.903

一个 int 最多只能容纳 -2^31 到 2^31： [http://en.wikipedia.org/wiki/Integer_(computer_science)](http://en.wikipedia.org/wiki/Integer_(computer_science))

你溢出了int

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:03:20.633

虽然所有其他答案都是正确的。实际原因（整数溢出），您只是错过了 wiki 中伪代码提供的一些实现细节。以下作品：

*   用于`calloc`分配内存。然后，所有值都被初始化为wiki 伪代码意义上的`0`意思`true`。
*   在外循环中，仅循环直到`sqrt(MAX)`- 请参阅 wiki 文章中的伪代码。
*   在内部循环中，`i`用`1`（`false`在维基伪代码的意义上）标记所有倍数。

```
for(i = 2; i <= sqrt(MAX); i++) {
   if(array[i] == 0) { // "true"
       for(j = i*i; j <= MAX; j += i) {
             array[j] = 1;  // "false"
       }      
   }
} 
```

*   然后，所有仍然`0`是素数的元素。

另外，没有必要使用 (signed) `int`- 所有数字都是正数，所以你应该使用`unsigned int`.

使用这种方法，您应该能够将整个范围`unsigned int`用于`MAX`值（直到`4294967295`if`unsigned int`是 32 位）

# c++ - 遍历包含队列的 C++ 嵌套映射

> ID：16185913
> 
> 赞同：0
> 
> 时间：2013-04-24T07:26:44.633
> 
> 标签：c++, map, iterator, queue, nested

我有一个`map<int, map<int, queue<string>>`保存客户端消息的映射 - 第一个映射保存消息类别（1-7），第二个保存源客户端的 ID（客户端的 0），队列保存消息本身。

收到的消息将被推送到队列中：

```
map<int, map<int, queue<string>>> msg_map; //map holding messages
//receive message from client
int msg = receive_fr_client(cli_id); //function to receive message from client
int msg_category = cat_check(msg); //function to process message attribute

msg_map[msg_category][cli_id].push(msg); 
```

我需要能够遍历这个嵌套映射以检查队列是否为空 - 本质上，我需要知道最高类别中的哪些客户端有消息要发送。之后，我将选择一个客户端（通过另一个算法，但在这里无关，所以我随机选择一个）来处理来自的消息。

我已经概念化了以下内容：有更好的方法吗？我在 VS2012 工作，如果可能的话，我想远离 boost。

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <map>
#include <queue>
#include <vector>

using namespace std;

int main()
{
    map<int, map<int, queue<int>>> msg_map;
    msg_map[2][3].push(3);
    msg_map[3][4].push(5);
    msg_map[3][4].push(7);
    msg_map[3][7].push(9);
    msg_map[3][11].push(11);

    int count = 1;
    int rand_cli;

    for (int i=7; i>0 && count > 0 ; i--)
    {
        if (msg_map.find(i) != msg_map.end())
        {
            map<int, queue<int>>::iterator iter;
            vector<int> cli_index;

            for (iter = msg_map[i].begin(); iter != msg_map[i].end(); iter++)
            {
                if (!iter->second.empty())
                {
                    cli_index.push_back(iter->first);
                }
            }

            int index_size = cli_index.size();
            int rand_pos = rand() % index_size;
            rand_cli = cli_index[rand_pos];

            count--;
        }
    }

    cout << rand_cli;

    return 0;
} 
```

# sql-server - Oracle 中的 SQL Server 等效项

> ID：16185917
> 
> 赞同：1
> 
> 时间：2013-04-24T07:26:53.330
> 
> 标签：sql-server, oracle

我是 Oracle 数据库的新手。我需要的是 Oracle 中的等效查询，例如 SQL Server 中的这个示例（在 Management Studio 中读取结果）。在 Oracle 方面，我使用的是 Benthic Software 的 Golden6。

```
declare @n integer
set @n = 100;
select * from table where id >= @n and id <= @n + 50 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:03:31.600

试试这个——

```
CREATE TABLE tbl (ID NUMBER);
INSERT INTO tbl VALUES (100);
INSERT INTO tbl VALUES (10);

DEFINE n = 100;

SELECT * 
FROM tbl 
WHERE id BETWEEN &n AND &n + 50; 
```

![教授](https://i.stack.imgur.com/Z05l5.png)

您可以尝试在[dbForge Studio for Oracle](http://www.devart.com/dbforge/oracle/studio/)（试用版或免费快递版）中运行此脚本。

# c - 将服务器的输出重定向到客户端套接字

> ID：16185919
> 
> 赞同：2
> 
> 时间：2013-04-24T07:27:01.930
> 
> 标签：c, linux, sockets, gcc

我正在通过**套接字编程**并很好地实现它..现在我想在`ls`其中实现一个系统调用..

当输入`ls`在**客户端机器**上给出时，服务器的输出应该打印在客户端机器上（即命令应该在服务器端执行，输出应该重定向到客户端......）

我如何收集服务器机器的输出？

我只需要提示..谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:33:59.410

您可以使用[dup2](http://linux.die.net/man/2/dup2)将`stdout`（或任何其他现有 fd）重定向到您的套接字 fd。例子：

```
int client_fd = accept(server_fd, 0, 0);
assert(client_fd != -1);
close(0); // Close stdout
dup2(client_fd, 0); // Redirect stdout to client_fd 
```

这应该可以解决问题:-)

**编辑 1**下面的示例显示了一个连接到 127.0.0.1:1234 的客户端程序，生成一个 shell 进程，并重定向 IO，以便 shell 自动为您处理所有通信。[您可以通过在另一个终端中运行netcat -l 1234](http://en.wikipedia.org/wiki/Netcat)来测试它，然后运行该程序并发送`ls`来自 netcat 的命令。将其调整为在服务器端工作留作练习。

**重要提示**：此程序提供对机器外壳的未经身份*验证的访问。*

```
#include <assert.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <unistd.h>

int exec_shell(int sock_fd) {
    // Redirect IO
    dup2(sock_fd, 0);
    dup2(sock_fd, 1);
    dup2(sock_fd, 2);

    // Execute shell
    execl("/bin/sh", "sh", NULL);

    return 0;
}

int main() {
    int fd = socket(AF_INET, SOCK_STREAM, 0);

    struct sockaddr_in sa_dst;
    memset(&sa_dst, 0, sizeof(struct sockaddr_in));
    sa_dst.sin_family = AF_INET;
    sa_dst.sin_port = htons(1234);
    sa_dst.sin_addr.s_addr = inet_addr("127.0.0.1");

    int ret = connect(fd, (struct sockaddr *)&sa_dst, sizeof(struct sockaddr));
    assert(ret != -1);
    exec_shell(fd);
    close(fd);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:37:49.170

create the empty file like cat > file and ctrl+d the filename is file

client:

Get the Input from the user

```
ls 
```

n=send(sockfd, msg, 1000,0); //msg contains the ls

send function using send the message to the server

Server:

Receive function using receive the client message

n=receive(sockfd, msg, 1000,0);

```
 FILE *fp;       

  recvbuf[strlen(recvbuf)-1]=0; // client msg received  and delete the \n
   strcat(recvbuf,">file");  // add to redirected file
   printf("Recvbuf:%s\n",recvbuf); // ls>file
     int status=0; 
   pid_t pid=vfork();
   if(pid==0)
    execlp("sh","sh","-c",recvbuf,(char *)0); // executed the ls command and redirected to  file 
        else
        {
        wait(&status);
     fp=fopen("file","r"); //open the file read the content and stored to buffer
       while((c=getc(fp))!=EOF)
           buf1[i++]=c;
           buf1[i]='\0';
            printf("%s\n",buf1);
           fclose(fp);
          } 
```

Again server send the buffer to the clientfd so the output redirected to client.

send(sockfd,buf1,1000,0);

Finally client receive the output of command

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:39:19.777

如果我正确理解了这个问题，我的“提示”将是使用以下内容：

1.  用于在服务器上`popen()`执行*ls*命令。
2.  获取 FILE * 流 fd 与`fileno()`.
3.  用于`sendfile()`将其复制到 client_fd。

**Edit**: `sendfile()` is non-standard and might not be portable. You can replace it with a read-write loop (reading the FILE * writing into client_fd), if you want, but its more work.

# xaml - 如何将照片位置或实际照片保存为类变量？

> ID：16185921
> 
> 赞同：0
> 
> 时间：2013-04-24T07:27:03.250
> 
> 标签：xaml, c#-4.0, windows-runtime, windows-phone-8, winrt-xaml

我有一个带有名为 Photo 的变量的类。用户正在使用 PhotoChooserTask 选择照片，并显示在 Image 控件中。应用程序的这一部分，选择器和显示，工作正常。

我想保存所选照片的​​位置/路径或实际照片，以便在用户稍后运行应用程序时可以将其显示到 Image 控件中。整个类是使用序列化保存的，我不知道如何以这种方式保存/序列化照片（或照片路径）。

用户也应该可以通过相机胶卷使用该照片。

任何帮助、链接或代码，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:38:21.593

If you're using a [PhotoChooserTask](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.tasks.photochoosertask%28v=vs.105%29.aspx) you will will get a [PhotoResult](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.photoresult%28v=vs.105%29.aspx) instance from the [PhotoChooserTask.Completed](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff707989%28v=vs.105%29.aspx) event.

You can then [PhotoResult.ChosenPhoto](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.photoresult.chosenphoto%28v=vs.105%29.aspx) stream and save the content to a byte array (easy serialization) or a file in Isolated Storage.

# c# - 如何获得包含定义数量的空格的字符串？

> ID：16185922
> 
> 赞同：2
> 
> 时间：2013-04-24T07:27:07.177
> 
> 标签：c#, .net

在另一种语言中，我使用了 function `SPACE(10)`，给我一个 10 个空格的字符串。我想将其转换为 C#.NET。

我用过`string.Empty().PadLeft(10)`。

这个对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:28:34.870

只需使用：

```
new String(' ', 10); 
```

这是 MSDN 文档：

> [`String`构造函数 ( `Char`, `Int32`)](http://msdn.microsoft.com/en-gb/library/xsa4321w.aspx)
> 
> 将类的新实例初始化`String`为由重复指定次数的指定 Unicode 字符指示的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T07:29:00.900

为此，[构造函数](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)有一个[重载：`string`](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)

```
var spaces = new string(' ', 10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:31:27.090

您可以使用[`String Constructor (Char, Int32)`](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)

> 将 String 类的新实例初始化为由**重复指定次数的**指定 Unicode 字符指示的值。

```
string s = new string(' ', 10); 
```

# c# - ArgumentException on Image.Dispose()

> ID：16185923
> 
> 赞同：1
> 
> 时间：2013-04-24T07:27:11.613
> 
> 标签：c#, winforms

I am making an album application with windows forms and I have a problem that I can't solve. First of all I have a form where I create a TableLayoutPanel. After that I create a method where I generate the same amount of picture boxes as the amount of the images in the directory which I have opened. The problem occurs when I am trying to dispose the image which I load in the picturebox because I need to free its memory. Here is the code of the method:

```
public void createPictureBoxes()
    {
        Image loadedImage;
        int imageCounter = 0;
        for (int i = 0; i < rowCounter; i++)
            for(int p = 0; p < imagesTable.ColumnCount; p++)
            {
                PictureBox pb = new PictureBox();
                pb.SizeMode = PictureBoxSizeMode.Zoom;
                pb.Width = imagesTable.GetColumnWidths()[p];
                pb.Height = imagesTable.GetRowHeights()[i];
                pb.Click += new EventHandler(enlargeThumbnail);
                try
                {
                    loadedImage = Image.FromFile(images[imageCounter++]);
                    pb.Image = loadedImage;
                    loadedImage.Dispose();
                    imagesTable.Controls.Add(pb);
                    loadedImage.Dispose();
                }
                catch (IndexOutOfRangeException)
                {
                    break;
                }
            }
    } 
```

The program throws an ArgumentException on method Show() of the form telling me that the argument is not valid. Without the dispose method all works fine but if i try to load a large amount of images the program uses gigabytes of memory. I suppose that it is not right to dispose the image memory that way, but I can't come out with another idea. If someone could help I would be very grateful

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:30:47.460

两个问题：您要处理两次，而且只要父控件容器需要使用它，您将无法处理图像控件。当表单被释放时，它将导致所有属于其容器的控件都被释放。

因此，与其尝试处理两次，不如根本不处理（这里就是）！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:33:26.340

您无法在显示图像时对其进行处置。如果这样做，表单将无法显示它。

当您将实例分配给属性时，它`PictureBox`不会复制实例。它保留了实例，因此在您从图片框中删除图像之前，您无法处置它。`Image``Image`

# javascript - 在 Breeze 中创建依赖于其他实体的实体

> ID：16185924
> 
> 赞同：0
> 
> 时间：2013-04-24T07:27:11.893
> 
> 标签：javascript, breeze, durandal

我正在将 BreezeJS 与 Durandal 结合使用。这一切都很好，但我有一个关于创建与另一个实体有关系的新实体的问题。

假设我们有一个实体客户和订单。当我创建一个依赖于客户的新订单时，它有 2 个字段，一个用于 customerID，一个用于 Customer 它自己！customerID 正确给出，但由于没有 Customer 对象而崩溃！我该如何解决这个问题？

我的 Dataservice.createT 是：

```
 // This function creates an entity for the specific table (entity)
        // that is passed as an parameter. The entity is the same as the table name 
        //in the map folders. So for creating a new Memo entity should be tblMemo
        Dataservice.prototype.createT = function (initialValues, entity) {
            return this.manager.createEntity(entity, initialValues);
        };

var repairOrderLineN = dataservice.createT({
                        RepairOrderID: '1', CustomerID: result[0].CustomerId,
                        Description: result[0].Description, InternalCode: result[0].Code,
                        Hours: result[0].Hours, Tariff: result[0].Tariff,
                        Costs: result[0].Costs, Quantity: result[0].Qty,
                        DamageCode: result[0].Dam, RepairCode: result[0].Rep,
                        MaterialCode: result[0].Mat, LocationCode: result[0].Location,
                        IsAgreement: result[0].IsAgreement, IsAuthorized: result[0].IsAuthorized,
                        DoRepair: result[0].DoRepair
                    }, 'tblRepairOrderLine');

                    if (repairOrderLineN.entityAspect.validateEntity()) {
                        extendItem(repairOrderLineN);
                        repairorderlines.push(new repairorderline(repairOrderLineN));
                        dataservice.saveChanges();
                        updateFinance();
                    } 
```

从模态中给出一个 JSON 来创建实体，当然我知道客户对象不在其中！该死的我迷路了:S帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:54:52.817

我需要有关您的案例的更多信息，特别是您所说的“崩溃”是什么意思。

我不知道你是做什么的`dataservice.createT`。它实际上有点太复杂，无法在这里轻松回答。你能为我们简化一个测试用例吗？

同时，这是一个通过测试，我添加到[DocCode 示例的“](http://www.breezejs.com/samples/doccode) *entityTests.js* ”中，该示例演示了您使用 Northwind 的场景。

```
/************************************************* ********
 * 添加一个带有初始化器的订单，通过 Id 设置其父客户
 ****************************************************** *******/
 test("添加使用具有父客户 ID 的初始化程序创建的客户", 4, function () {
     var em = newEm();

     // 创建一个新的父客户
     var parentCustomer = em.createEntity("客户", {
          客户 ID：breeze.core.getUuid()，
          公司名称：'TestCo'
     });

     // 一个新订单，它是父客户的子订单
     var newOrder = em.createEntity("Order", { CustomerID: parentCustomer.CustomerID() });

     ok(newOrder.entityAspect.entityState.isAdded(), "newOrder 应该被'添加'");
     ok(parentCustomer.entityAspect.entityState.isAdded(), "parentCustomer 应该被'添加'");

     var orderCustomer = newOrder.Customer();
     ok(orderCustomer, "newOrder 的父 'Customer' 属性应该返回一个客户实体");
     好的（orderCustomer === parentCustomer，
         "newOrder 的父客户应该是 " + parentCustomer.CompanyName());
 });

```

如果父客户先前存在（例如，已被获取），它也可以正常工作。

顺便说一句，我必须初始化`parentCustomer.CustomerID`，因为它在元数据中定义为客户端生成的密钥。在我们的大多数示例中，实体键是存储生成的（例如，`Order.OrderID`）并且不会被指定。

## 2013 年 4 月 30 日更新

我怀疑你的初始化对象中的某个`result[0].something`地方**`something`**是一个实体而不是**一个简单的数据值**（例如，一个整数`id`）。

在我写的`createEntity`时候，如果任何初始化器值是 Breeze 实体，就会爆炸。这将在很快发布的 v.1.3.2 中得到修复。请注意，此新功能最初将是测试版。API 不会改变，但是有很多边缘条件，很难涵盖所有这些条件。消除挥之不去的错误需要时间。

无论如何，您今天都有其他选择。如果您只是使用相关实体的外键 ID 进行初始化，而不是使用相关实体本身进行初始化，那么您会很好。或者您可以在第一次创建实体*后*分配相关实体，如下所示：

```
...
  var thing = manager.createEntity('Thing', {
        ...用简单的数据值初始化
      }

  var thing.relatedEntityA = relatedEntityA;
  var thing.relatedEntityB = relatedEntityB;

...

```

# c++ - SYMBIAN、QT、C++

> ID：16185931
> 
> 赞同：-4
> 
> 时间：2013-04-24T07:27:30.377
> 
> 标签：c++, qt, symbian

我需要为 symbian 编写简单的应用程序，但我找不到任何信息如何为此准备环境。我真的需要简单的如何将“hello world”编码到 symbian，并说明如何为任何操作系统准备环境（linux，只有没有 ios 的 windows）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:33:26.343

你会花更少的时间在谷歌上搜索“Symbian hello world”： http: [//www.developer.nokia.com/Community/Wiki/Symbian_C%2B%2B_Hello_World](http://www.developer.nokia.com/Community/Wiki/Symbian_C%2B%2B_Hello_World)

这是完整的 api，包括“入门”部分： http: [//www.developer.nokia.com/document/Cpp_Developers_Library/](http://www.developer.nokia.com/document/Cpp_Developers_Library/)

# jquery - 在输入之外隐藏 ipad 键盘

> ID：16185934
> 
> 赞同：4
> 
> 时间：2013-04-24T07:27:44.013
> 
> 标签：jquery, ipad, focus

我试图弄清楚当用户在输入之外触摸时如何关闭键盘。我尝试了很多没有快乐的事情。

www.bbc.co.uk 确实做得很好，但看不到它在哪里完成？

```
$("input").focus(); works but if I do a body on click function it never shows. 
```

我怎样才能有效地做到这一点？

# java - 在java中使用字典操作组合框

> ID：16185935
> 
> 赞同：0
> 
> 时间：2013-04-24T07:27:44.340
> 
> 标签：java, wcf, web-services, dictionary, combobox

我正在使用一个 Web 服务，它返回“ArrayOfKeyValueOfintstring”类型的结果

我很困惑如何将这些数据添加到我的 java 组合框中。

这是我的代码

```
 org.tempuri.ThirdPartyService service = new org.tempuri.ThirdPartyService();
 org.tempuri.IThirdPartyService port = service.getBasicHttpBindingIThirdPartyService();
 // TODO initialize WS operation arguments here
 java.lang.String key = line.trim();
 // TODO process result here
 String>)port.getTests(key).getKeyValueOfintstring();
 com.microsoft.schemas._2003._10.serialization.arrays.ArrayOfKeyValueOfintstring result = port.getVulnerabilities(key); 
```

**编辑**

```
for(int i=0;i<=result.getKeyValueOfintstring().size();i++)
{
   result.getKeyValueOfintstring().get(i).getKey();
   result.getKeyValueOfintstring().get(i).getValue();
   JOptionPane.showMessageDialog(null, "key is"+result.getKeyValueOfintstring().get(i).getKey());
   JOptionPane.showMessageDialog(null, "Value is"+result.getKeyValueOfintstring().get(i).getValue());
   model.addElement(new Item(key, value));

 } 
```

我试图在对话框中获取密钥对并且我得到了正确的。但现在我不知道如何将它们添加到我的 ComboBox 中。我创建了表“向量模型 = 新向量（）；” 并将其添加到组合框中，如“cbTestName = new JComboBox(model);”

这是正确的方法还是我需要应用其他任何东西来将键值对添加到我的组合框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:45:13.450

如果你去声明

`port.getTests(key).getKeyValueOfintstring()`,

你可能会发现它被实现为

```
List<KeyValuePairOfintstring> 
```

看起来`KeyValuePairOfintstring`像

```
...

    protected Integer key;
...  
    protected String value; 
```

因此，您可以做的其中一种方法是`port.getTests(key).getKeyValueOfintstring()`在循环中运行，并使用您希望在组合框中显示的 java 业务对象构建您的地图。

您可以覆盖对象的 toString 方法，这是控制它们在 ComboBox 中的外观的最简单方法。

# android - Android menu option overlapping dialog

> ID：16185937
> 
> 赞同：0
> 
> 时间：2013-04-24T07:27:57.837
> 
> 标签：android, android-alertdialog

I have created two dialog and I am shoing those dialog in menu otions. But when I am clicking on search meu option it is overlapping with sync menu option. I have tried everything but no solution. can anybody tell me the solution.

My code:

```
 @Override
 public boolean onCreateOptionsMenu(Menu menu) 
 {
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.action_menu, menu);
    return super.onCreateOptionsMenu(menu);
}       
   @Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {    
        // Handle item selection
        case R.id.Synch:
            showDialog(SYNC_ALERT);     
            return true;
        case R.id.searchid:
            showDialog(SEARCH_ALERT);   
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}
protected Dialog onCreateDialog(int id)
{
    switch (id) 
    {
        case SEARCH_ALERT:
        // Create out AlterDialog
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Search");
        builder.setCancelable(true);
        LayoutInflater inflater = this.getLayoutInflater();
        View searchView= inflater.inflate(R.layout.search_dialog, null);
        builder.setView(searchView);
        Searchtxt = (EditText) searchView.findViewById(R.id.search_text);
        builder.setPositiveButton("Search", new searchOkOnClickListener());
        builder.setNegativeButton("Cancel", new searchCancelOnClickListener());
        AlertDialog dialog = builder.create();
        dialog.show();

        case SYNC_ALERT:
        AlertDialog.Builder alertbuilder = new AlertDialog.Builder(this);
        alertbuilder.setMessage("Synchronization");
        alertbuilder.setCancelable(true);
        LayoutInflater buildinflater = this.getLayoutInflater();
        View SyncView= buildinflater.inflate(R.layout.sync_layout, null);
        alertbuilder.setView(SyncView);
        defaultchkbox = (CheckBox)SyncView.findViewById(R.id.defaultchkbox);
        after15mint = (CheckBox)SyncView.findViewById(R.id.after15mint);
        afternmint = (CheckBox)SyncView.findViewById(R.id.afternmint);
        alertbuilder.setPositiveButton("Save Changes", new syncOkClickListener());
        alertbuilder.setNegativeButton("Cancel", new syncCancelClickListener());
        AlertDialog alertdialog = alertbuilder.create();
        alertdialog.show();
    }
            return super.onCreateDialog(id);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:52:18.870

我不太确定您的问题，因此我假设您在单击搜索菜单选项时会看到同步对话框。如果是这种情况，您应该在 switch 的每个 case 之间放置 break。

```
switch (id) 
{
    case SEARCH_ALERT:
    ..................
    break;

    case SYNC_ALERT:
    .................

} 
```

# mysql - MySQL 1064 error on creating table

> ID：16185939
> 
> 赞同：0
> 
> 时间：2013-04-24T07:28:09.330
> 
> 标签：mysql

I have an MySQL command:

```
use hsm_thilisar_cz; CREATE TABLE GODS (
      id INT NOT NULL AUTO _INCREMENT ,
      name TEXT ,
      range BOOL ,
      free BOOL ,
      lore LONGTEXT ,
      PRIMARY KEY ( id )
); 
```

but if I execute it, i would get an error: (translated from Czech because of Czech MySQL server)

```
#1064-Your syntax is strange near `range BOOL ,free BOOL ,lore LONGTEXT ,
PRIMARY KEY ( id ));` on line 4 
```

Is there any idea, what I have wrong? Thank you for your answers. **^Solved^**

But another problem...

```
CREATE TABLE GUIDE ( 
   id INT NOT NULL AUTO_INCREMENT,
   godId INT NOT NULL,
   userId INT NOT NULL,
   item1 INT,
   item2 INT,
   item3 INT,
   item4 INT,
   item5 INT,
   item6 INT,
   itemA1 INT,
   itemA2 INT,
   itemC1 INT,
   itemC2 INT,
   notes LONGTEXT,
   mode TEXT,
   guideTimeDate TIMESTAMP,
   PRIMARY KEY(id); 
```

an error on line 18

```
#1064-Your syntax is strange near '' on line 18. 
```

How can I solve this issue, when MySQL doesn't tell me, where is my syntax incorrect... Thank for your time, that you spent on solving this problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:29:26.657

`RANGE`是保留关键字，恰好是您的列的名称。为了避免语法错误，应使用反引号对列名进行转义。前任，

```
use hsm_thilisar_cz; 
CREATE TABLE GODS 
(
      id INT NOT NULL AUTO _INCREMENT ,
      name TEXT ,
      `range` BOOL ,          -- wrap with backticks
      free BOOL ,
      lore LONGTEXT ,
      PRIMARY KEY ( id )
); 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

我宁愿更改不在*保留关键字列表*中的列名，以防止将来再次出现相同的错误。

```
use hsm_thilisar_cz; 
CREATE TABLE GODS 
(
      id INT NOT NULL AUTO _INCREMENT ,
      name TEXT ,
      gods_range BOOL ,         
      free BOOL ,
      lore LONGTEXT ,
      PRIMARY KEY ( id )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:31:45.003

“范围”是一个 MySql 关键字。你不能使用它。我试过了，它奏效了：

```
CREATE TABLE GODS (
      id INT NOT NULL AUTO_INCREMENT ,
      name TEXT ,
      myrange BOOL ,
      free BOOL ,
      lore LONGTEXT ,
      PRIMARY KEY ( id )
); 
```

# asp.net-web-api - asp.net web api self hosting : what does the threading model look like?

> ID：16185940
> 
> 赞同：2
> 
> 时间：2013-04-24T07:28:10.963
> 
> 标签：asp.net-web-api

I'm using self hosting asp.net web api from a WPF appliaction that serves as a server. I'm wondering what the scaling will be like for many clients when self hosted, does the web api manage a thread pool & recycle those? Or is it single threaded by default? Does it use 1 thread per call or does it have a limit etc etc. Any information on this would be great as well as any information on the configurability of the threading behavior.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:29:23.173

它使用线程池并对其进行管理。一个调用可能涉及多个线程。如果您期望相当高的请求并发，那么我建议您考虑使用 Owin 来托管您的 WebApi。

# objective-c - UIWebView加载服务器HTML，如何加载本地图片？

> ID：16185943
> 
> 赞同：1
> 
> 时间：2013-04-24T07:28:22.243
> 
> 标签：objective-c, xcode, cocoa, uiwebview

这是加载的 HTML 代码

```
UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
[[NSBundle mainBundle] pathForResource:@"111" ofType:@"jpg"];
NSURLRequest *repuest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://192.168.0.5/index.html"]];
[webView loadRequest:repuest];
[self.view addSubview:webView]; 
```

这是HTML代码

```
<img src="111.jpg" />
<hr /> 
```

这样做无法加载图像。在这种情况下，如何使 HTML 加载到图片中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:04:09.050

好的，这是久经考验的代码。应该为你工作。

```
NSString *imagePath;
NSBundle *bundle = [NSBundle mainBundle];
NSString *path = [bundle bundlePath];
imagePath = [NSBundle pathForResource:@"111" ofType:@"jpg" inDirectory:path];

NSString *fixedURL = [imagePath stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
fixedURL = [NSString stringWithFormat:@"file://%@",fixedURL];
NSString *commentHtml = [NSString stringWithFormat:@"<img src=\"%@\"/>", fixedURL];
NSString *html3 = [NSString stringWithFormat:@"<html><head/><body><div><b>COMMENTS:</b></div>%@</body></html>", commentHtml];

[webView loadHTMLString:html3 baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:51:07.660

如果它只有一个 html 页面，除了图像之外没有其他任何内容的相对链接，您可以为请求设置基本 url

这意味着：所有相对 url 都被认为是相对于这个基本 url

* * *

但是，如果您的 html 在服务器和本地图像上使用 css/js/html 文件，您将需要 2 个基本 url，这是不可能的。

您唯一的选择是重写 html 以仅将绝对 URL 用于非本地的任何内容，然后设置基本 url。

# c++ - Multiple inheritance and pointer implementation

> ID：16185945
> 
> 赞同：3
> 
> 时间：2013-04-24T07:28:23.620
> 
> 标签：c++

Given the following code:

```
namespace Example1 {

class A {
public:
    A() {}
    virtual ~A() {}
private:
    float data_A;
};

class B {
public:
    B() {}
    virtual ~B() {}
protected:
    float data_B;
};

class Derived : public A, public B {
public:
    Derived() {}
    virtual ~Derived() {}
protected:
    float data_Derived;
};

}

int main (void)
{
using namespace Example1;
B* pb = new Derived;
delete pb;
} 
```

`pb` should now point to the `B` part of the `Derived` object. But the derived object also derives from `A`, means it has `A` sub-object.. and that `A` sub-object should be "first" because the `Derived` class first inherits from `A`.

How does the compiler approves that? what does it add in order to make it work correctly?

and also, how does it free the memory correctly when deleting the object?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:40:58.840

The short answer is: By magic.

The medium answer is: It's not for you to worry about. The Standard says that this works, and it's up to the compiler to figure out a way to make it work.

The long answer: Since this depends on your compiler, read up your compiler's documentation! Many C++ compilers implement the Itanium C++ ABI, so that's a start. As part of polymorphic inheritance, each class usually has a so-called *vtable*, which stores a bunch of function pointers, but it also stores RTTI information and joined virtual-destruction and memory-deallocation logic. Think about it: `delete pb;` doesn't just have to call the right destructors in the right order, but it also has to pass the *correct* pointer to the deallocation function. All this information is included in the various vtables of the class hierarchy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:37:12.387

Paragraph `§10.1/2`

> [Note: The order of derivation is not significant except as specified by the semantics of initialization by constructor (12.6.2), cleanup (12.4), and storage layout (9.2, 11.1). —end note ]

therefore

```
class Derived : public A, public B {
                ^^^^^^^^  ^^^^^^^^
                  first    second 
```

Then calls derived constructor. Also, destructors will invoked in reverse order.

```
Construction
A()
B()
D()

Destruction
~D()
~B()
~A() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:43:04.610

It doesn't matter, which class you type first in derived class declaration. "A should be first" is not correct, as they are equally base classes. The only difference is, which constructor / destructor is called first (in the order / reversed order they were declared as base classes).

You can refer to [why multiple inheritance is a bad idea](https://stackoverflow.com/questions/406081/why-should-i-avoid-multiple-inheritance-in-c)

Perhaps what could be well suited for you is single inheritance, with B class deriving from A and C deriving from B.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:43:41.727

Source from a french site : [C++ FAQ](http://cpp.developpez.com/faq/cpp/?page=heritage#CONSTRUCTEUR_ordre)

> Les constructeurs sont appelés dans l'ordre suivant :
> 
> ```
> le constructeur des classes de base héritées virtuellement en profondeur croissante et de gauche à droite ;
> le constructeur des classes de base héritées non virtuellement en profondeur croissante et de gauche à droite ;
> le constructeur des membres dans l'ordre de leur déclaration ;
> le constructeur de la classe. 
> ```
> 
> Order of constructors' calls :
> 
> ```
> base class constructors from virtual inheritance (BFS style and from left to rigth);
> base class constructors from non virtual inheritance (BFS style and from left to rigth);
> instances constructor in the order of their declaration;
> Class constructor 
> ```

I'm guessing the destructors' calls order is the reverse of this order.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:49:35.093

Since your destructors are (correctly) virtual here, the compiler has no problem at all. It just calls the right destructor (`~Derived()` in this case) and everything works fine.

The standard does not force any implementation, but a popular one used in many computers is a virtual table. All objects that belong to a class with at least one virtual function (as is the case here) have a pointer (`vptr`) to the virtual table (`vtbl`) corresponding to their class. This `vtbl` has references to the correct overrides of all virtual functions for the object class. Here I am talking about dynamic class (i.e.: the real class of the object), not static class (the class of the pointer). In this case:

*   The dynamic type of `pb` is `Derived`, since it points to a `Derived` instance
*   The static type of `pb` is `B`, since it was declared as `B*`

As you can see, the compiler does not care about the static type in this case. It interprets the instruction `delete pb` as this (pseudocode):

```
pb->vptr->destructor();
operator delete(pb); // Not exactly, but this is immaterial in this case 
```

You can disregard the second line for our purposes. The runtime will go through this chain and find the right destructor to call (`Derived()`). `Derived()` will in turn call `~A()` and `~B()` in the right order.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T07:58:16.947

The general answer is that it works, but the actual implementation is compiler dependant and you shouldn't rely on the details (but it is still a good thing to keep in mind so you don't make incorrect assumptions when dealing with pointers).

When multiple inheritance is used, simple line such as `B* pb = new Derived` implicitly changes the actual value of the pointer. In this particular case, since the compiler knows it has to convert a `Derived` pointer to `B*`, it knows exactly by how much it needs to change the pointer (e.g. `sizeof(A)`, of course the actual value is probably different).

If you are using virtual inheritance (which is guarantees that a common base class is only included once, e.g. if both `A` and `B` inherited from `CommonBase`), then simple pointer conversion becomes even more complex, and the compiler does a vtable lookup to find the actual offset it should use for pointer conversion.

If you are using Visual Studio, you can make a breakpoint on this line and press Alt+8 to see the disassembly, which will reveal the 'magic' behind pointer conversion.

# jquery - 在第二行插入元素

> ID：16185946
> 
> 赞同：0
> 
> 时间：2013-04-24T07:28:29.063
> 
> 标签：jquery, function

我怎样才能制作一个函数，使我的行“**仅每秒输出**”将在每秒输出之后显示？

```
$.get(dataurl + '?service=plug1&device1=' + device1 + '&device2=' + device2 + '', function(d){
    var myText = ''
    $(d).find('plug').each(function(){
        myText += 'every output'
        myText += 'only every second output'
    });
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:30:11.597

您可以使用索引：

```
$(d).find('plug').each(function(i) {
    myText += 'every output'

    if (i % 2 == 0) {
        myText += 'only every second output'
    }
}); 
```

另外，不要手动构建查询字符串。它可能无法正确转义，而另一种方式看起来更好：

```
$.get(dataUrl, {
    service: plug1,
    device1: device1,
    device2: device2
}, function(data) {
    ...
}); 
```

# java - 使用java优化下载速度

> ID：16185949
> 
> 赞同：3
> 
> 时间：2013-04-24T07:28:38.573
> 
> 标签：java, performance, download

嗨，我正在开发一个下载工具，我发现下载速度太慢了。我已经检查过下载速度看起来很慢。我的代码如下，

```
 float fileSize = Float.parseFloat(uc.getHeaderField("Content-Length"));

        in = new BufferedInputStream(uc.getInputStream());

        System.out.println("File size : " + fileSize);

        fout = new FileOutputStream(settingsForm.downloadDirectoryText.getText() + File.separatorChar + fileName);
        int BUFFER_SIZE = 10240;
        byte data[] = new byte[BUFFER_SIZE];
        int count = 0;
        int totalDownloaded = 0;

        long downloadStartTime = System.currentTimeMillis();
        long remainingTime = 0;

        while ((count = in.read(data, 0, BUFFER_SIZE)) != -1) {

            totalDownloaded += count;
            long elapsedTime = System.currentTimeMillis() - downloadStartTime;

            float speedInBytes = 1000f * totalDownloaded / elapsedTime;
            float tmpSpeed = speedInBytes;
            if (tmpSpeed > 1024) {
                tmpSpeed = tmpSpeed / 1024;
            }
            if (tmpSpeed > 1024 * 1024) {
                tmpSpeed = tmpSpeed / (1024 * 1024);
            }
            System.out.println("Speed : " + tmpSpeed);
            System.out.println("Remaining Time : " + (fileSize - totalDownloaded) / speedInBytes + " seconds");
            int downloadPercentage = (int) ((totalDownloaded / fileSize) * 100);

            fout.write(data, 0, count);
        } 
```

我发现下载需要 90 秒，平均下载速度为 60-70kbps。

我已将下载链接提供给[免费下载管理器](http://www.freedownloadmanager.org/)，该管理器可在 10 秒内下载相同的文件。它可以以超过 400kpbs 的下载速度下载相同的文件。

为什么我不能以这么快的速度下载？

我的代码有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:29:17.917

即使没有修改，您的代码也应该比 60 KB/s 快得多。您可以添加 BufferedWriter，但差异可以忽略不计。您使用更快的方法来复制：使用字节缓冲区读/写。当您使用 read() 方法（每个字符读取一个字符）时，BufferedReader 会增加速度。然而缓冲区的大小可以改善这个过程，我用 64 * 1024 有很好的结果。

您还可以删除您的 if (tmpSpeed > 1024 ... 并替换为 (no 'if' is required here)：

```
double tmpSpeed = speedInBytes / 1024; 
```

我已经在我的机器上从一个 HD 到另一个 HD 测试了我们的程序，我用 1GB 的文件获得了以下速度：

```
21057ms
49797 KB/s  >>> 60 KB/s 
```

这不是你的代码问题，慢来自网络。尝试使用来自不同服务器的不同文件等...

# android - 在 SD 卡 android 中保存捕获图像

> ID：16185950
> 
> 赞同：2
> 
> 时间：2013-04-24T07:28:43.617
> 
> 标签：android, android-camera

我调用相机意图并尝试将捕获图像保存在 sd 卡中。但是相机意图给我空数据。我无法理解的问题是什么。我的代码如下

```
imgBtnPicture.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            String fileName="ashraful.jpg";

            String root = Environment.getExternalStorageDirectory().toString();
            new File(root + "/photofolder").mkdirs();
            File outputfile=new File(root+"/photofolder/", fileName);
            Uri outputFileUri = Uri.fromFile(outputfile);
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
            startActivityForResult(cameraIntent, CAMERA_REQUEST); 
        }
    }); 

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data); 
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) { 

        if(data!=null)
        {
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            Bitmap icon1=ResizeBitmap(photo,200,200);
            imgBtnPicture.setImageBitmap(icon1);
        }
    }  
} 
```

但我得到空数据？如何解决我的问题？请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:35:51.290

```
private void takeNewPicture() {

    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    ContentValues values = new ContentValues(3);

    values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg");
    cameraImagePath = getContentResolver().insert(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
    takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, cameraImagePath);
    startActivityForResult(takePictureIntent, CAMERA_REQUEST);
}
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data); 
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) { 

    String[] filePathColumn = { MediaStore.Images.Media.DATA };
    Uri imageFilePathUri = null;
    if (cameraImagePath != null) {
        Cursor imageCursor = getContentResolver().query(
            cameraImagePath, filePathColumn, null, null, null);
    if (imageCursor != null && imageCursor.moveToFirst()) {
        int columnIndex = imageCursor.getColumnIndex(filePathColumn[0]);
        String filePath = imageCursor.getString(columnIndex);
        imageCursor.close();
        imageFilePathUri = filePath != null ? Uri
                .parse(filePath) : null;
    }

   }

    }
} 
```

`cameraImagePath`是一个`Uri`对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:35:58.133

仔细阅读[这篇](http://developer.android.com/training/camera/photobasics.html)Android 培训帖子以找出答案。正如帖子所说，

> 如果你给它一个文件来保存，Android 相机应用程序会保存一张全尺寸的照片。

所以如果你确实传递了`Uri`一个文件，你应该使用这个来访问图像`Uri`。

# image - 叠加图像 MATLAB（带颜色的灰色）

> ID：16185953
> 
> 赞同：1
> 
> 时间：2013-04-24T07:28:50.673
> 
> 标签：image, matlab, dicom

我有两个矩阵，第一个是来自 dicom 图像（灰度）的 ROI，第二个是值在 0-1 之间的矩阵。

在第二个矩阵中，我做了一个阈值处理，只保留了一个范围（0.6 -1.0）的值。我想叠加两个矩阵图像并将结果显示为一个数字，这意味着背景灰色图像和叠加彩色图像（在非零值区域）。

你能给我一些帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:32:20.973

怎么样

```
figure;
imshow( first(:,:,[1 1 1]) ); % make the first a grey-scale image with three channels so it will not be affected by the colormap later on
hold on;
t_second = second .* ( second >= .6 & second <= 1.0 ); % threshold second image
ih = imshow( t_second );
set( ih, 'AlphaData', t_second );
colormap jet 
```

# wpf - 如何将选项卡控件绑定到多个用户控件

> ID：16185954
> 
> 赞同：0
> 
> 时间：2013-04-24T07:28:52.090
> 
> 标签：wpf, tabcontrol

我想将 TabControl 绑定到用户控件，以便将每个用户控件都放在 TabItem 中。

这可能吗，知道 TabControl 本身就在 UserControl 中吗？

这是 UserControl 中的依赖属性：

```
public IList<UserControl> ListUserControls
    {
        get { return (IList<UserControl>)GetValue(ListUserControlsProperty); }
        set { SetValue(ListUserControlsProperty, value); }
    }

    // Using a DependencyProperty as the backing store for ListUserControls.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ListUserControlsProperty =
        DependencyProperty.Register("ListUserControls", typeof(IList<UserControl>), typeof(NavigationPane), new PropertyMetadata(new List<UserControl>())); 
```

在 MainWindow 中 UserControl 的位置：

```
<pyRGC:NavigationPane.ListUserControls>
    <pyRGCTest:UC_1 />
</pyRGC:NavigationPane.ListUserControls> 
```

当我对此进行编码时，它显示我：“预期以下类型：“IList'1””。我没有找到如何在 XAML 中使用 IList。

我能怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T08:15:23.737

由于您想显示固定数量的选项卡并且您没有使用`MVVM`，因此您必须提供`TabControl`项目 in`XAML`而不是 via `Binding`。

示例代码如下：

```
<TabControl>
    <TabControl.Items>
        <TabItem Header="Tab One">
            <local:UserControl1 />
        </TabItem>

        <TabItem Header="Tab Two">
            <local:UserControl2 />
        </TabItem>
    </TabControl.Items>
</TabControl> 
```

# java - 如何使用 JSP 变量检查条件？

> ID：16185956
> 
> 赞同：0
> 
> 时间：2013-04-24T07:28:54.447
> 
> 标签：java, jsp

您好，我是新 jsp，我想检查 jsp 中的条件。值是否为空。？我在jsp页面中写了以下代码

```
 <% String s = request.getParameter("search"); %>
    <%=s %>
    <% if (<%=s ==null) { %> 
     <div>textbox is empty</div>

   <% } else { %>
   <div>textbox value..
    <% } %> 
```

如果文本框值为空，我会在变量中获取文本框值，那么它应该显示第一条消息，否则显示第二条消息。告诉我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T07:40:06.823

最好的方法是使用[JSTL](http://docs.oracle.com/javaee/5/tutorial/doc/bnake.html)。**[请避免在 JSP 中使用 scriptlet](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)**。

```
<c:choose>
  <c:when test="${empty search}">
   <div>textbox is empty</div>
  </c:when>
  <c:otherwise>
    <div>textbox value is ${search}</div>
  </c:otherwise>
</c:choose> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T07:31:06.083

```
 <% String s = request.getParameter("search"); %>
    <%=s %>
    <% if (s==null || s.isEmpty()) { %> 
     <div>textbox is empty</div>

   <% } else { %>
   <div>textbox value..
    <% } %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T07:30:40.060

它甚至可以编译吗？`<% if (<%=s ==null) { %>`至少应该是

```
<% if (s == null) { %> 
```

如果您还想检查空字符串，请执行

```
<% if(s == null || s.trim().length == 0) { %> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T07:31:37.143

```
<% String s = request.getParameter("search"); 
     if (s ==null) { %> 
     <div>textbox is empty</div>

   <% } else { %>
   <div><span><%=s%></span></div>
    <% } %> 
```

**编辑为包含空字符串**

```
<% 
       String s="";
     if(request.getParameter("search")!=null)
      {
          s=request.getParamater("search");
      }
     if(s.trim().length()==0)
        {%>
           <div>Empty Field</div>
        <%}
          else{%>
              <div><span><%=s%></div>
           <%}%> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T07:35:20.740

```
<% String s = request.getParameter("search"); %>
    <%=s %>
    <% if (s ==null) { %> 
     <div>textbox is empty</div>

   <% } else { %>
   <div>textbox value..
    <% } %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-02T08:30:35.937

在`jsp`中，很容易检查是否为`variable is empty or not`.

```
String search;
if(search.isEmpty()){
out.println("The variable is empty ?");
}
else{
out.println("The variable is Not empty ?");  
} 
```

# php - 将 xml 从 vb.net 发送到 php 文件

> ID：16185958
> 
> 赞同：1
> 
> 时间：2013-04-24T07:28:59.053
> 
> 标签：php, xml, vb.net, http-post

如何从 vb.net 发送可以`$HTTP_ROW_POST`在 PHP 中使用的 xml 文件？

我的脚本是：

```
Public Function PHP(ByVal url As String, ByVal method As String, ByVal data As String)

    Try

        Dim request As System.Net.WebRequest = System.Net.WebRequest.Create(url)
        request.Method = method
        Dim postData = data
        Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
        request.ContentType = "application/x-www-form-urlencoded"
        request.ContentLength = byteArray.Length
        Dim dataStream As Stream = request.GetRequestStream()
        dataStream.Write(byteArray, 0, byteArray.Length)
        dataStream.Close()
        Dim response As WebResponse = request.GetResponse()
        dataStream = response.GetResponseStream()
        Dim reader As New StreamReader(dataStream)
        Dim responseFromServer As String = reader.ReadToEnd()
        reader.Close()
        dataStream.Close()
        response.Close()
        Return (responseFromServer)
    Catch ex As Exception
        Dim error1 As String = ErrorToString()
        If error1 = "Invalid URI: The format of the URI could not be determined." Then
            MsgBox("ERROR! Must have HTTP:// before the URL.")
        Else
            MsgBox(error1)
        End If
        Return ("ERROR")
    End Try
End Function 
```

但我无法在 PHP 文件中使用`$HTTP_ROW_POST`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:01:54.023

不要将内容类型设置为，`application/x-www-form-urlencoded`因为它意味着`key=value`在请求正文中发送对。将其设置为，`application/xml`因为这就是您要发送的内容。

```
Imports System.Text
Imports System.IO
Imports System.Net

Module Module1

    Sub Main()
        Dim resp As String = PHP("http://localhost/test.php", "POST", "<xml>test</xml")
        System.Console.WriteLine(resp)
    End Sub

    Public Function PHP(ByVal url As String, ByVal method As String, ByVal data As String)
        Try
            Dim byteArray As Byte() = Encoding.UTF8.GetBytes(data)
            Dim request As System.Net.WebRequest = System.Net.WebRequest.Create(url)
            request.Method = method
            request.ContentType = "application/xml"
            request.ContentLength = byteArray.Length
            request.GetRequestStream().Write(byteArray, 0, byteArray.Length)

            Dim response As WebResponse = request.GetResponse()
            Dim responseFromServer As String = (New StreamReader(response.GetResponseStream())).ReadToEnd()

            response.Close()
            Return (responseFromServer)
        Catch ex As Exception
            Dim error1 As String = ErrorToString()
            If error1 = "Invalid URI: The format of the URI could not be determined." Then
                MsgBox("ERROR! Must have HTTP:// before the URL.")
            Else
                MsgBox(error1)
            End If
            Return ("ERROR")
        End Try
    End Function

End Module 
```

适用于 php 服务器脚本

```
<?php
$c = file_get_contents('php://input');
echo 'got: ', $c; 
```

另见：[http ://docs.php.net/wrappers.php.php](http://docs.php.net/wrappers.php.php)

# c# - 在 c#、mysql 中使用 linq 查找最新插入日期的数据

> ID：16185961
> 
> 赞同：1
> 
> 时间：2013-04-24T07:29:03.483
> 
> 标签：c#, mysql, linq

我的 mySql 表中有这个表“CommonData”

![在此处输入图像描述](https://i.stack.imgur.com/q6qiC.png)

我想使用 linq 从 c# 查询以从最新插入的日期中查找“Id”列表。即这里最新插入日期是“22-04-2013”​​，所以我应该得到插入日期是“22-04-2013”​​的ID列表。

我正在使用 Linq。

有些我无法做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:31:52.460

添加一个检索最大日期的子查询，然后在此日期上过滤：

```
var ids = ctx.CommonDatas
             .Where(c => c.InsertDate == 
                               ctx.CommonDatas
                                  .Max(c2 => c2.InsertDate)
                   )
             .Select(c => c.Id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:23:42.743

一个简单的可能正在使用**`OrderByDescending`**

```
var result = CommonData.OrderByDescending(c=> c.InsertDate).Select(c => c.Id); 
```

# security - 将同一服务器 SSL 证书用于多种用途

> ID：16185966
> 
> 赞同：1
> 
> 时间：2013-04-24T07:29:22.530
> 
> 标签：security, windows-phone-8, push-notification, ssl-certificate, apple-push-notifications

我们有一个后端服务器，它为将在 iOS、Windows 8、Windows Phone 8 和 Android 上启动的多平台应用程序提供服务。我们希望在生产中使用尽可能少的证书（最好只有一个）以达到以下目的：

*   与客户端应用程序的安全通信 (HTTPS)
*   对 Windows Phone 推送通知服务的身份验证
*   对 Apple 推送通知服务的身份验证

除了注意证书是由一个共同的受信任的根颁发机构颁发的之外，是否还有其他障碍可以阻止单个证书同时用于所有这些？这是一种可行的可能性，还是有必要为上述每个目的使用一个证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:37:53.607

Gabriel I guess there is a problem. Main one is that `HTTPS` certificate private key cannot be coded by a secret this kind of certificate contain `*.crt` and `*.key` file which are not secured. When You want authenticate yourself or server in some Service for example Windows phone push like you have listed there is need to create hash for your private key with secret aka pin or password. What make You use at least two different certificates.

Second thing is that purpose of using certificates is to validate the issuer and to authenticate user/service provider. `HTTPS` ssl certificate issued by a trusted `CA` show to the user `Hey this is trusted website You should not be afraid passing sensitive data through the service`, and the certificates which are used to authenticate are just saying `Hey its me I am authorized to use this application`
Purpose of those certificates and different so certificates them self should be different. Using the same `cert` for actions like You have listed cause necessaries vulnerabilities and is highly NOT RECOMMENDED

# jquery - 在网站中显示具有自动授权的 Google Analytics 数据？

> ID：16185971
> 
> 赞同：3
> 
> 时间：2013-04-24T07:29:32.097
> 
> 标签：jquery, curl, oauth, google-analytics, google-analytics-api

我有这个 js 使用 [ga-ez-dash 库](http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/docs/user-documentation.html#copypaste)从下面的 Google Analytics 数据中呈现图表，以显示用户访问历史、浏览器历史等。我能够呈现图表，但问题是我不希望我的所有客户都登录使用我们的 Google Analytics 帐户。有什么方法可以通过 jquery post/curl php 等自动登录，或者我可以公开 Google Analytics 数据。任何人都可以建议实现这一目标的最佳方法。任何帮助将不胜感激！

```
var API_KEY = 'Enter Your API Key Here';
    var CLIENT_ID = 'Enter Your Client ID Here';
    var TABLE_ID = 'Enter your Table ID here';
    // Format of table ID is ga:xxx where xxx is the profile ID.

gadash.configKeys({
  'apiKey': API_KEY,
  'clientId': CLIENT_ID
});

// Create a new Chart that queries visitors for the last 30 days and plots
// visualizes in a line chart.
var chart1 = new gadash.Chart({
  'type': 'LineChart',
  'divContainer': 'line-chart-example',
  'last-n-days':30,
  'query': {
    'ids': TABLE_ID,
    'metrics': 'ga:visitors',
    'dimensions': 'ga:date'
  },
  'chartOptions': {
    height:600,
    title: 'Visits in January 2011',
    hAxis: {title:'Date'},
    vAxis: {title:'Visits'},
    curveType: 'function'
  }
}).render(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T09:44:13.937

您可以[使用 OAuth2 令牌登录 Google 服务](https://developers.google.com/accounts/docs/OAuth2)；只需让用户登录他们的 Google 帐户一次，批准您的访问并存储令牌。然后，您可以自动登录到您有权访问的帐户部分。

PS 要在 Javascript 中执行此操作，他们提供了[客户端 API](https://developers.google.com/api-client-library/javascript/features/authentication)。我链接到的第一页底部列出的所有客户端 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T15:49:53.577

问题是像 ez-dash 库这样的服务使用客户端 oauth 进行身份验证。为了使用固定的用户名/密码，您需要在 Google API 控制台 ( [https://code.google.com/apis/console/](https://code.google.com/apis/console/) ) 上设置“服务帐户”以允许服务器到服务器的通信.

如果您正在寻找一种开源解决方案，它可以让您在您网站的图表中显示 Google Analytics 数据，那么您可以查看我的新项目（尽管这是基于 .NET，而不是基于 PHP）[https:// code.google.com/p/google-analytics-charts-aspnet/](https://code.google.com/p/google-analytics-charts-aspnet/)，或在此处下载 nuGet 包[https://www.nuget.org/packages/GoogleAnalytics.GoogleCharts.NET/](https://www.nuget.org/packages/GoogleAnalytics.GoogleCharts.NET/)。

对于 PHP 解决方案，尽管我没有使用它，但我确实找到了它[https://github.com/mikhailkozlov/Show-Analytics-Data-With-Google-Chart-Tools](https://github.com/mikhailkozlov/Show-Analytics-Data-With-Google-Chart-Tools)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-21T21:21:43.337

查看[嵌入式分析](http://www.embeddedanalytics.com)。 *（免责声明 - 我与他们合作）*

这是我们开发的一项服务，因此像您这样的开发人员不需要熟悉 API。您所要做的就是在我们的网站上创建一个图表，获取一段代码，然后将其嵌入到您希望图表显示的网站上。我们支持所有不同的图表类型，并且图表本身能够进行动态查询（即，如果您希望图表显示最近 7 天、30 天、一年等）。

# node.js - Foreach 数组并在回调中使用数组成员

> ID：16185972
> 
> 赞同：1
> 
> 时间：2013-04-24T07:29:36.603
> 
> 标签：node.js, coffeescript

我有一系列远程文件地址。我只是使用 for in 到 foreach 数组和 foreach 的正文中，我开始 HTTP GET 请求以进行数据下载。但一切都是异步的，我需要知道文件名才能将文件保存在请求回调中。

解决此问题的最佳做法是什么？

演示代码：

```
files = ["url.com/file.png", "url.com/file.doc"]

for file in files
  req = http.get file, (response) =>
    response.setEncoding 'binary'
    body = ""

    response.on "data", (chunk) =>
      body += chunk

    response.on "end", () =>
      #Here I needs to know the file name to save it
      fs.writeFileSync @currentFolder + "/Files/" + file, body, "binary" 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:08:02.383

你必须确定它的范围。使用这样的函数：

```
files = ["url.com/file.png", "url.com/file.doc"]

for file in files
    ((file) ->
        req = http.get file, (response) =>
            response.setEncoding 'binary'
            body = ""

        response.on "data", (chunk) =>
            body += chunk

        response.on "end", () =>
            fs.writeFileSync @currentFolder + "/Files/" + file, body, "binary"
    ).call @, file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:32:55.827

在 CoffeeScript 中执行此操作的正确方法是`do`调用。还将编码设置为`'binary'`没有意义，只会创建额外的工作来将数据从缓冲区和字符串来回转换。

```
for file in files
  do (file) =>
    req = http.get file, (response) =>
      parts = []

      response.on "data", (chunk) =>
        parts.push chunk

      response.on "end", () =>
        body = Buffer.concat parts
        fs.writeFileSync @currentFolder + "/Files/" + file, body 
```

# android - 屏幕锁定时获取Home键长按事件？

> ID：16185973
> 
> 赞同：2
> 
> 时间：2013-04-24T07:29:39.033
> 
> 标签：android

我正在开发一个应用程序，当屏幕处于锁定模式时，我必须控制 Home 键长按才能执行操作。有没有可能的方法来做到这一点。请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:41:45.040

该密钥由框架处理，因此您的应用程序无法处理它。

# javascript - jqChart 中 stringFormat 的文档

> ID：16185975
> 
> 赞同：4
> 
> 时间：2013-04-24T07:29:40.250
> 
> 标签：javascript, jquery, charts, string-formatting, jqchart

`stringFormat`jqChart中的工作方式是否有某种文档？我在他们的网站上没有找到任何东西，甚至没有提示。

提前致谢。

**编辑：** 刚刚自己找到了文档：[http ://www.jqchart.com/documentation/userguide/default.aspx#!LabelsFormatting](http://www.jqchart.com/documentation/userguide/default.aspx#!LabelsFormatting)

# sql - 从 Xml 中选择所有具有类似图形的内容的路径

> ID：16185977
> 
> 赞同：4
> 
> 时间：2013-04-24T07:29:41.547
> 
> 标签：sql, xml, sql-server-2008, xquery

我有一个包含如下元素的 XML 列：

```
<Root>
    <Word Type="pre1" Value="A" />
    <Word Type="pre1" Value="D" />

    <Word Type="base" Value="B" />

    <Word Type="post1" Value="C" />
    <Word Type="post1" Value="E" />
    <Word Type="post1" Value="F" />
</Root> 
```

该模型类似于：

![在此处输入图像描述](https://i.stack.imgur.com/lGsut.gif)

并希望在 MSSQL 中使用 XQuery 选择所有可能的路径以获得类似以下结果：

> ABC ABE ABF DBC DBE DBF

或类似的东西：

```
<Root>
    <Word Type="pre1" Value="A" />
    <Word Type="pre1" Value="D" />

    <Word Type="pre2" Value="G" />
    <Word Type="pre2" Value="H" />

    <Word Type="base" Value="B" />

    <Word Type="post1" Value="C" />
    <Word Type="post1" Value="E" />
    <Word Type="post1" Value="F" />
</Root> 
```

![在此处输入图像描述](https://i.stack.imgur.com/EP8NG.gif)

结果：

> AHBC AHBE AHBF DHBC DHBE DHBF AGBC AGBE AGBF DGBC DGBE DGBF

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:51:05.843

您可以使用 CTE 构建唯一类型列表，然后在递归 CTE 中使用它来构建字符串。最后，您挑选出上一次迭代中生成的字符串。

```
with Types as
(
  select row_number() over(order by T.N) as ID,
         T.N.value('.', 'varchar(10)') as Type
  from (select @XML.query('for $t in distinct-values(/Root/Word/@Type) 
                           return <T>{$t}</T>')
       ) as X(T)
    cross apply X.T.nodes('/T') as T(N)
),
Recu as
(
  select T.Type,
         T.ID,
         X.N.value('@Value', 'varchar(max)')  as Value
  from Types as T
    cross apply @XML.nodes('/Root/Word[@Type=sql:column("T.Type")]') as X(N)
  where T.ID = 1
  union all
  select T.Type,
         T.ID,
         R.Value+X.N.value('@Value', 'varchar(max)') as Value
  from Types as T
    inner join Recu as R
      on T.ID = R.ID + 1
    cross apply @XML.nodes('/Root/Word[@Type=sql:column("T.Type")]') as X(N)    
)
select R.Value
from Recu as R
where R.ID = (select max(T.ID) from Types as T)
order by R.Value 
```

[SQL小提琴](http://sqlfiddle.com/#!6/d41d8/3746)

**更新**

这是一个性能更好的版本。它将 XML 分解为两个临时表。每种类型一个，所有单词一个。仍然需要递归 CTE，但它使用表而不是 XML。CTE 中的连接使用的每个临时表上还有一个索引。

```
-- Table to hold all values
create table #Values
(
  Type varchar(10),
  Value varchar(10)
);

-- Clustered index on Type is used in the CTE
create clustered index IX_#Values_Type on #Values(Type)

insert into #Values(Type, Value)
select T.N.value('@Type', 'varchar(10)'),
       T.N.value('@Value', 'varchar(10)')
from @XML.nodes('/Root/Word') as T(N);

-- Table that holds one row for each Type
create table #Types
(
  ID int identity,
  Type varchar(10),
  primary key (ID)
);

-- Add types by document order
-- Table-Valued Function Showplan Operator for nodes guarantees document order
insert into #Types(Type)
select T.Type
from (
     select row_number() over(order by T.N) as rn,
            T.N.value('@Type', 'varchar(10)') as Type
     from @XML.nodes('/Root/Word') as T(N)
     ) as T
group by T.Type
order by min(T.rn);

-- Last level of types
declare @MaxID int;
set @MaxID = (select max(ID) from #Types);

-- Recursive CTE that builds the strings
with C as 
(
  select T.ID,
         T.Type,
         cast(V.Value as varchar(max)) as Value
  from #Types as T
    inner join #Values as V
      on T.Type = V.Type
  where T.ID = 1
  union all
  select T.ID,
         T.Type,
         C.Value + V.Value
  from #Types as T
    inner join C
      on T.ID = C.ID + 1
    inner join #Values as V
      on T.Type = V.Type
)
select C.Value
from C
where C.ID = @MaxID
order by C.Value;

-- Cleanup
drop table #Types;
drop table #Values; 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/12808)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T08:56:36.803

你需要这三个元素集的叉积，所以基本上写一个无条件的join：

```
for $pre  in //Word[@Type="pre1"]
for $base in //Word[@Type="base"]
for $post in //Word[@Type="post1"]
return concat($pre/@Value, $base/@Value, $post/@Value) 
```

对于扩展版本，我使用了两个辅助函数来获取所有属性，然后递归地连接结果。

*似乎 MSSQL 不允许自定义 XQuery 函数。此代码对符合 XQuery 1.0（和更新的）处理器有效。*

```
declare function local:call($prefix as xs:string) as xs:string* {
  local:recursion('', 
    for $value in distinct-values(//Word/@Type[starts-with(., $prefix)])
    order by $value
    return $value
  )
};

declare function local:recursion($strings as xs:string*, $attributes as xs:string*) as xs:string* {
  if (empty($attributes))
  then $strings
  else
    for $string in $strings
    for $append in //Word[@Type=$attributes[1]]
    return local:recursion(concat($string, $append/@Value), $attributes[position() != 1])
};

for $pre in local:call('pre')
for $base in local:call('base')
for $post in local:call('post')
return concat($pre, $base, $post) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T22:42:57.870

如果我正确理解您的 XML，那么您的所有图表本质上都是步骤序列，其中没有任何步骤可以省略，并且每个步骤都可能有多种选择。（因此，通过该图的一组路径本质上是各种备选方案的笛卡尔积。）如果这不是真的，那么接下来的就不是你想要的了。

在这里获得笛卡尔积的最简单方法是使用 XQuery FLWOR 表达式，其中`for`笛卡尔积中的每个因子都有一个子句，如 Jens Erat 的初始答案所示。

如果您事先不知道会有多少因子（因为您不知道图中可能出现的“类型”值序列），并且不想每次都重新制定查询，那么最简单的做法是编写一个递归函数，它将一系列“类型”值作为一个参数，将您正在处理的“根”元素作为另一个参数，并一次处理一个因素。

对于您的示例输入，此功能完成了这项工作：

```
declare function local:cartesian-product(
  $doc as element(),
  $types as xs:string*
) as xs:string* {

  (: If we have no $types left, we are done.
     Return the empty string. :)
  if (empty($types)) then 
     ''

  (: Otherwise, take the first value off the 
     sequence of types and return the Cartesian
     product of all Words with that type and
     the Cartesian product of all the remaining
     types. :)
  else
     let $t := $types[1],
         $rest := $types[position() > 1]
     for $val in $doc/Word[@Type = $t]/@Value
     for $suffix in 
         local:cartesian-product($doc,$rest)
     return concat($val, $suffix)
  }; 
```

唯一剩下的问题是按文档顺序获取不同“类型”值的序列有点棘手。我们可以调用`distinct-values($doc//Word/@Type)`来获取值，但不能保证它们会按文档顺序排列。

借用[Dimitre Novatchev 对相关问题的解决方案](https://dnovatchev.wordpress.com/2008/11/16/xpath-2-0-gems-find-all-duplicate-values-in-a-sequence-part-2/)，我们可以计算出适当的“类型”值序列，如下所示：

```
let $doc := <Root>
    <Word Type="pre1" Value="A" />
    <Word Type="pre1" Value="D" />

    <Word Type="pre2" Value="G" />
    <Word Type="pre2" Value="H" />

    <Word Type="base" Value="B" />

    <Word Type="post1" Value="C" />
    <Word Type="post1" Value="E" />
    <Word Type="post1" Value="F" />
</Root>

let $types0 := ($doc/Word/@Type),
    $types  := $types0[index-of($types0,.)[1]] 
```

这将按文档顺序返回不同的值。

现在我们准备计算您想要的结果：

```
return local:cartesian-product($doc, $types) 
```

结果的返回顺序与您给出的顺序略有不同；我假设您不关心结果的顺序：

AGBC AGBE AGBF AHBC AHBE AHBF DGBC DGBE DGBF DHBC DHBE DHBF

# c# - ASP.NET 中继器并不总是显示所有结果

> ID：16185978
> 
> 赞同：0
> 
> 时间：2013-04-24T07:29:46.220
> 
> 标签：c#, asp.net, repeater, indexing-service

我有一个应用程序（带有 C# 的 ASP.NET），我在其中从数据库（来自 Microsoft 索引服务的索引）中获取结果，然后在 asp:Repeater 中显示该结果。通常我会得到想要的结果，例如中继器显示 1500 个结果中的 1500 个，但有时查询会找到 300 个结果，而中继器只显示其中的 200 个。

这就是我获取结果记录数的方式：

```
foreach (DataTable dt in queryResult.Tables)
{

   foreach (DataRow row in dt.Rows)
   {
       rows++;
   }
} 
```

这就是我将数据绑定到中继器的方式：

```
if (queryResult.Tables.Count > 0)
{
   Result.DataSource = queryResult;
   Result.DataBind();
} 
```

有谁知道什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:22:45.040

问题解决了。不是中继器而是 Microsoft 索引服务填满了服务器硬盘上的所有空间，然后无法返回正确的结果。我将索引移动到具有更多空间的分区，一切正常。

# jquery - html 使用 jquery 问题选择 appendto

> ID：16185983
> 
> 赞同：0
> 
> 时间：2013-04-24T07:30:01.750
> 
> 标签：jquery, select, appendto

我有一个选择框，比如 teamproj，它最初从后端 mysql db 表中加载了值。我通过使用另一个选择框（例如 teampool）使其用户可编辑，可以使用按钮在 teamproj 框中添加和删除选项，其中 id 为“movetoproj”和“movetopool”......示例如下。

```
$('#movetoproj').click(function() {  
    return !$('#teampool option:selected').remove().appendTo('#teamproj');  
});

 $('#movetopool').click(function() {  
    return !$('#teamproj option:selected').remove().appendTo('#teampool');  
 }); 
```

在此之后，我需要使用 teamproj 名称 attr 将“teamproj”的最终选项列表传递到另一个 php 页面。这里的问题是，无论用户添加或删除了什么，都会通过，但是加载到 teamproj 框中的初始值列表会被忽略。

我不太确定，因为 jquery 只附加选项，但现有选项被忽略。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:10:16.483

由于您只能从新下拉列表中发布所选选项，因此您可能应该有一个隐藏输入，用于将值填充为逗号分隔列表或类似的东西。

唯一的其他解决方案是使用 jquery $.post 发布值。这样，您将能够在允许 jquery 使用您自己的值提交表单之前循环选择并找到它们的选项具有哪些值。

# ios - 使用 MPMoviePlayerController 播放 mp3 和 mp4 文件

> ID：16185985
> 
> 赞同：0
> 
> 时间：2013-04-24T07:30:10.413
> 
> 标签：ios, objective-c, mpmovieplayercontroller

我在 url 中有`mp3`和`mp4`dat。我试着在我的so中玩这个，我`ViewController`创建了两个玩家

```
audioPlayer = [[MPMoviePlayerController alloc]init];
videoPlayer  = [[MPMoviePlayerController alloc]init]; 
```

并将这些链接分配给玩家 -

*视频*

```
videoPlayer.contentURL = [NSURL URLWithString:video];
[videoPlayer prepareToPlay]; 
```

*声音的*

```
audioPlayer.contentURL = [NSURL URLWithString:audio];
[audioPlayer prepareToPlay]; 
```

在这里，我面临一个问题，我可以从上面播放其中一个。它不会播放任何一个在播放后停止或最初不允许同时播放它们。

我该如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:05:12.023

嗨，Praveen，如果任务，您必须使用`AVAudioPlayer`这种类型。请查看以下参考：

[http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

您可以使用以下代码播放您的 mp3 文件并导入`AVFoundation.framework`：-

```
 NSString *strURlString =@"yoururlwith.mp3"

    NSLog(@"%@",strURlString);

    strURlString =[strURlString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

    NSLog(@"img url ==%@",strURlString);

    NSData *_objectData = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURlString]];
    NSError *error;

    audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
    audioPlayer.numberOfLoops = 0;
    audioPlayer.volume = 1.0f;
    [audioPlayer prepareToPlay];

    if (audioPlayer == nil)
        NSLog(@"%@", [error description]);
    else
        [audioPlayer play]; 
```

# select - Where 子句的字段顺序

> ID：16185986
> 
> 赞同：4
> 
> 时间：2013-04-24T07:30:10.773
> 
> 标签：select, abap, database-performance

我发现，字段顺序会影响 Select 性能。比如我想`V_EUQI`通过`TPLNR`(500)、`DATBI`(1)和`EQTYP`(1)从视图中提取数据，语句：

```
SELECT ... FROM v_equi INTO itab
 WHERE eqtyp IN rg_eqtyp
   AND datbi IN rg_datbi
   AND tplnr IN rg_tplnr 
```

运行速度比相同的选择快得多，但字段顺序`TPLNR`- `EQTYP`- `DATBI`。

如何解释这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T15:31:27.963

它几乎肯定与索引有关。从透明表中读取时，为了获得最佳性能，`WHERE`子句中字段的顺序应该匹配索引的顺序或表中字段的从左到右的顺序（利用从主键）。不能为视图定义索引，但肯定会使用为基础表定义的任何索引。

您应该能够使用 SQL 跟踪并确认使用了哪些索引来确认这一点。

# php - 如何使用 PHP 中的类从字符串中提取标题标签值和 div 内的特定文本

> ID：16185991
> 
> 赞同：1
> 
> 时间：2013-04-24T07:30:21.940
> 
> 标签：php, regex

我必须使用 div 标签内的正则表达式标题来解析一个 html 文件，这是我试图解析的 html 标签

```
<div class="descriptionArea-2" style="visibility: visible;">
<img src="(image Url Here)" />
<br />
<h2>"Product Title"</h2>
        <div class="displayDescription">"product description here."<div class="icons">icons</div></div>

</div> 
```

我在这个中尝试了很多时间来获取“产品标题”和“产品描述”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:38:03.223

我不知道这些页面有多通用，但这些表达式可以工作：

产品名称：

```
/<h2>"(.*)"<\/h2>/ 
```

描述：

```
/<div class="displayDescription">"(.*)"<div class="icons">/ 
```

也许是一种更通用的方式来获取描述：

```
/<div class="displayDescription">([^<]*)/ 
```

使用 preg_match(_all) 获取您想要的值

```
preg_match_all('/<h2>"(.*)"<\/h2>/',$string,$matches)
$matches[1][0] //gets the first title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:37:07.423

这是使用正则表达式获得所需内容的一种可能方法：

```
/<div class="descriptionArea-2"[^>]*>(?: *<[^h][^2][^>]*>\/>)*<h2>([^<]*)<\/h2>[^<]*<div class="displayDescription">([^<]*)</ 
```

以上尝试匹配与问题中提供的示例 html 完全相同的层次结构。根据需要替换类字符串。如果`h2`和嵌套`div`标签（带有`displayDescription`类的标签）顺序相反，或者中间有任何其他标签，则正则表达式将不起作用。

第一个返回值是`h2`文本，第二个是内部`div`文本。

* * *

如果您的 html 文档格式正确，另一种选择是使用[xpath 。](http://en.wikipedia.org/wiki/Xpath)以下是每个字符串的 xpath 解决方案：

```
//div[@class="descriptionArea-2"]/h2/text()

//div[@class="descriptionArea-2"]/div[@class="displayDescription"]/text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:37:30.323

为此的正则表达式

```
'/<h2>"([^"]*?)"<\/h2>/' 
```

使用函数 preg_match_all

你确定标题总是用双引号括起来吗？

您的 html 代码无效，没有带有描述的 div 结束标记

# air - Adobe air APNs remoteNotificationEvent 不起作用

> ID：16185992
> 
> 赞同：0
> 
> 时间：2013-04-24T07:30:24.990
> 
> 标签：air, apple-push-notifications

我使用 apns 使用 Air 3.6 和`RemoteNotificaitonEvent`.

虽然事件侦听是由`TOKEN`, `NOTIFICATION`, 和执行的，但`STATUS`事件不会传给任何侦听器。

教教怎么解决？

以下网站的代码片段按原样使用。 [http://blogs.adobe.com/airodynamics/2012/05/29/push-notifications-support-in-ios/](http://blogs.adobe.com/airodynamics/2012/05/29/push-notifications-support-in-ios/)

# ruby-on-rails - 无法在本地机器上配置 postgres 以使用 rails 应用程序

> ID：16185993
> 
> 赞同：0
> 
> 时间：2013-04-24T07:30:25.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, configuration, installation, rails-postgresql

我有一个现有的 Rails 应用程序。我的数据库和应用程序似乎在远程数据库上运行良好（我在本地计算机上进行了更改，但仍连接到远程数据库），但我似乎无法在本地计算机上配置数据库。

我试图找出我在我的机器上运行的 PostgreSQL。我相信我的 Mac 10.7.5 上预装了一个，我最近用 Homebrew 安装了一个。

我运行`which psql`并在我的机器上预先安装了一个：`/usr/bin/psql` 我尝试更改 PATH ，`~/.bash_profile`但这并没有改变任何东西。

当我跑步时，`ps -ef | grep postgres`我得到：

```
 502  5775   123   0  9:05AM ??         0:00.03 /usr/local/opt/postgresql/bin/postgres -D /usr/local/var/postgres -r /usr/local/var/postgres/server.log
  502  5777  5775   0  9:05AM ??         0:00.00 postgres: checkpointer process       
  502  5778  5775   0  9:05AM ??         0:00.03 postgres: writer process       
  502  5779  5775   0  9:05AM ??         0:00.03 postgres: wal writer process       
  502  5780  5775   0  9:05AM ??         0:00.03 postgres: autovacuum launcher process       
  502  5781  5775   0  9:05AM ??         0:00.05 postgres: stats collector process       
  502  5956  5852   0  9:28AM ttys000    0:00.00 grep postgres 
```

但是当我跑步时，`psql appname`我得到：

```
psql: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我不确定我的机器上当前正在使用哪个数据库（sqlite 可能是默认的），以及哪个版本的 postgres（预装或自制）。我该如何改变它并让它工作。另外，我如何让它与我的应用程序一起工作。此外，我正在将 database.yml 文件（当前具有远程服务器）编辑到我的本地主机，但我不知道在 下使用什么，我被告知`username`我尝试的任何东西（即`postgres`，， ） 。`root``mymacusername``doesn't exist`

# linux - 在 Python3 中使用 HTMLParser 解析 HTML

> ID：16185995
> 
> 赞同：0
> 
> 时间：2013-04-24T07:30:31.723
> 
> 标签：linux, windows, parsing, python-3.x, html-parsing

我在 Python 3 中有一段代码可以在 Windows 中使用 HTMLParser 成功解析 HTML，问题是我也想在 Linux 中运行该脚本，但它似乎不起作用。

我使用以下内容检索 HTML 代码：

```
html = urllib.request.urlopen(url).read()
html_str = str(html)
parse = MyHTMLParser()
parse.feed(html_str) 
```

的原始输出`html`如下：

```
b'\n \n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\n
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n
    <html xmlns="http://www.w3.org/1999/xhtml">\n
        <head>\n 
```

`html`是二进制的，所以我把它转换成`string`这样`parse.feed`就不会抱怨了。问题是我在转换为字符串时得到的 html 是这样的：

```
'b\'\\n \\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\\n
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\\n
<html xmlns="http://www.w3.org/1999/xhtml">\\n
    <head>\\n 
```

正如你所看到的，我有几个`\\n`Windows 并不在乎它们，但对于 Linux，它们是转义序列，因此无法解析 html。我现在不记得确切的错误，但它类似于`can't parse \\`

我已经尝试使用`re`删除多余的`\`with`re.sub("\\","",html_str)`但在 Windows 中似乎没有做任何事情，在 Linux 中我也得到一个错误。

这是我在 Linux 中尝试`re.sub`使用 html 时遇到的错误：

```
>>> re.sub("\\","",html_str)
Traceback (most recent call last):
  File "/usr/lib/python3.1/sre_parse.py", line 194, in __next
    c = self.string[self.index + 1]
IndexError: string index out of range 
```

知道如何删除多余的`\`in`html_str`以便在 Linux 中解析它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:52:59.710

在 python3 中，你不能像你正在做的那样`bytes`转换：`str`

```
html_str = str(html) 
```

这在 python2 中有效，因为`bytes`和`str`是相同的，但现在您将获得原始字符串的表示。要解码字符串，您要么需要提供[`encoding`](http://docs.python.org/3/library/stdtypes.html#str)参数，要么使用：

```
hmtl_str = html.decode(encoding) 
```

如果您无法从 http 标头中获取字符集，您可以尝试猜测，或者使用[chardet](https://pypi.python.org/pypi/chardet)来确定正确的编码。