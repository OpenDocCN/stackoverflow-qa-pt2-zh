# StackOverflow 问答 15270000-15270999

# objective-c - Web 服务的 wsmethodinvocationRef 未声明标识符错误

> ID：15270004
> 
> 赞同：1
> 
> 时间：2013-03-07T11:28:59.927
> 
> 标签：objective-c, web-services

为什么使用 wsmethodInvocationref 调用 Web 服务时出现未声明的标识符错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:14:31.573

有关如何“使用 WSMethodInvocationRef”的更多详细信息会有所帮助。

[您是否包含了Web 服务核心参考](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/WebServicesReference/Reference/reference.html)中描述的标头

*   WSMethodInvocation.h
*   WSProtocolHandler.h
*   WSTypes.h

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-30T03:10:19.540

此 WSMethodInvocationRef 在 iOS 中不支持，仅适用于 OS X。

# perl - 如何使用 Perl 的三元条件运算符构造单词的复数形式？

> ID：15270007
> 
> 赞同：2
> 
> 时间：2013-03-07T11:29:24.803
> 
> 标签：perl, if-statement, nlp, conditional-operator

我在制作涉及链式三元条件运算符的语句时遇到了一些麻烦。

显然我可以用标准的方式编写它们，但是知道它们为什么不能正常工作会很有用。

我想做的伪代码：

> 如果 $feature 以 's' 结尾，则使 $group = 大写 $feature
> 
> 如果 $feature 以 'y' 结尾，则在 $group = 大写 $feature 之前删除 y 并替换为 'ies'
> 
> 如果 $feature 以其他任何内容结尾，则添加一个 's' 并使 $group = 大写 $feature。

我尝试过使用 c 风格的 ifs：

```
substr($feature,-1) eq 'y' ? $group = uc(chop($feature)).'IES'
                           : substr($feature,-1) ne 's' ? $group = uc($feature).'S'
                                                        : $group = uc($feature); 
```

和

```
substr($feature,-1) ne 's' ? substr($feature,-1) eq 'y' ? $group = uc(chop($feature)).'IES'
                                                        : $group = uc($feature).'S'
                           : $group = uc($feature); 
```

发生的情况是，如果我在 $feature 中有一个以 say `e`or结尾的字符串`n`，它不会找到`$group = uc($feature).'S'`. 我尝试更改并使用它，`eq 's'`但随后它`S`在已经以`s`.

任何帮助表示赞赏！

编辑：

这要归功于`dan1111`：

```
$group = substr($feature,-1) ne 's' ? substr($feature,-1) eq 'y' ? uc(chop($feature)).'IES'
                                    : uc($feature).'S'
         : uc($feature); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:48:56.180

Perl 的一个怪癖是您实际上可以分配给三元运算符：

```
condition ? $a : $b = 2; 
```

这分配`2`给`$a`或`$b`取决于条件是否为真。

同样，在您的代码`uc($feature)`中被分配给条件的不同部分，具体取决于什么是真实的。

因此，如果`substr($feature,-1) ne 's'`在您的代码中为 true，Perl 会执行以下操作：

```
($group = uc($feature).'S') = uc($feature); 
```

分配`uc($feature)`给`$group`.

我觉得 Perl 的这个特性很傻，也有些遗憾。尽管如此，您确实不应该将三元运算符用于控制流。仅用于简单检查：

```
print $result == 1 ? 'yes' : 'no'; 
```

您当然不应该将多个三元运算符组合在一起，因为它非常令人困惑。这有什么问题？

```
if (substr($feature,-1) eq 'y')
{
    $group = uc(chop($feature)).'IES';
}
elsif (substr($feature,-1) ne 's')
{
    $group = uc($feature).'S';
}
else
{
    $group = uc($feature);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T12:04:25.603

这是您当前问题的解决方案：

```
#!/usr/bin/env perl

use strict;
use warnings;

use feature 'say';

say make_group($_) for qw( curly status color );

=for specification

if $feature ends with 's', make $group = upper case $feature

if $feature ends with 'y', remove the y & replace with 'ies' before making $group = upper case $feature

if $feature ends with anything else, add an 's' and make $group = upper case $feature.

=cut

sub make_group {
    my ($feature) = @_;
    my $last = substr($feature, -1);

    my $group = $last eq 's' ? uc($feature)
              : $last eq 'y' ? do { chop($feature); uc("${feature}ies") }
              : uc("${feature}s")
    ;

    return $group;
}

__END__ 
```

但是，我会使用[Lingua::EN::Inflect](http://search.cpan.org/perldoc/Lingua%3a%3aEN%3a%3aInflect)：

```
#!/usr/bin/env perl

use strict;
use warnings;

use feature 'say';
use Lingua::EN::Inflect 'PL_N';

say uc(PL_N $_) for qw( curly status color );

__END__ 
```

# jquery - jquery 无法读取 json 对象并显示数据

> ID：15270011
> 
> 赞同：0
> 
> 时间：2013-03-07T11:29:36.410
> 
> 标签：jquery, asp.net

我正在尝试调用 webmethod 并获取 json 对象并使用 jquery 在 aspx 文件中显示数据。但是出了点问题，它不起作用。我会用下面的代码解释

这是网络方法

```
Database db = DatabaseFactory.CreateDatabase("Connection String2");
        DbCommand dbCommand;
        dbCommand = db.GetStoredProcCommand("MedBul_Select_Selected_Professional");
        db.AddInParameter(dbCommand, "id", DbType.Int16, Convert.ToInt16(id));
        IDataReader dr = db.ExecuteReader(dbCommand);
        if(dr.Read())
        {
            int p_id = Convert.ToInt16(dr["ProfessionalID"].ToString());
            string firstname = dr["ProfessionalName"].ToString();
            string lastname = dr["ProfessionalSurname"].ToString();
            int prefix = Convert.ToInt16(dr["PrefixID"].ToString());
            int gender = Convert.ToInt16(dr["Gender"].ToString());
            string birthdate = dr["BirthDate"].ToString();
            string mobilephone = dr["MobilePhone"].ToString();
            string email = dr["Email"].ToString();
            string diplomano = dr["DiplomaNo"].ToString();

            return_str += "[{\"id\":\"" + p_id + "\",\"firstname\":\"" + firstname + "\",\"lastname\":\"" + lastname + "\",\"prefix\":\"" + prefix + "\",\"gender\":\"" + gender + "\",\"birthdate\":\"" + birthdate + "\",\"mobilephone\":\"" + mobilephone + "\",\"email\":\"" + email + "\",\"diplomano\":\"" + diplomano + "\"}]";
        } 
```

这是jquery代码。

```
 $('#btn_second').click(function () {
            //$('#txt_isim_4').val('test arif');
            $.ajax({
                type: "POST",
                url: "Registration.aspx/get_selected_professional",
                data: "{'id':'2'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $.each(data, function (index, value) {
                        alert(value);
                        alert(value.d);
                        alert(index);
                        alert(value.firstname);
                    });

                }
            });
        }); 
```

我正在尝试 alert() 返回的内容，但它不显示任何内容。我很确定我可以从数据库中获取数据并正确解析它......

我的代码有什么问题？如何完成以显示 json 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:36:46.533

看到你的回复。。

```
return_str += "[{\"id\":\"" + p_id + "\",\"firstname\":\"" + firstname + "\",\"lastname\":\"" + lastname + "\",\"prefix\":\"" + prefix + "\",\"gender\":\"" + gender + "\",\"birthdate\":\"" + birthdate + "\",\"mobilephone\":\"" + mobilephone + "\",\"email\":\"" + email + "\",\"diplomano\":\"" + diplomano + "\"}]"; 
```

不需要使用`each`循环..因为`ajax`你提到`dataType`了`json`..使用`.`运算符来获取对象

试试这个

```
success: function (data) {
              alert(data.id);
              alert(data.firstname); // similar for others
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:37:01.167

我假设返回的 json 看起来像

```
var $json ='[{"id":"1","name":"john"},{"id":"2","name":"smith"}]';
var json = $.parseJSON($json);//will already be parsed in your callback function bcoz of the dataType:json 
```

尝试修改你的循环

```
$.each(json,function(i,j){
    $(j).each(function(k,v){
     console.log(v.id);
     console.log(v.name);
    });
}); 
```

[http://jsfiddle.net/Eu9Pp/](http://jsfiddle.net/Eu9Pp/)

# macros - 如何在 Notepad++ 中镜像语句

> ID：15270013
> 
> 赞同：-1
> 
> 时间：2013-03-07T11:29:45.573
> 
> 标签：macros, notepad++

我有一个包含数百个此类语句的文件：

*   If Description = "Approach light" Then Obstakelcode = "AL"
*   If Description = "Common mast" Then Obstakelcode = "CoM"
*   等等

使用 Notepad++ 宏，我尝试将这些语句“镜像”到：

*   If Obstakelcode = "AL" Then Description = "Approach light"
*   If Obstakelcode = "CoM" Then Description = "Common mast"
*   等等

然而，我失败了。谁能告诉我这是否可以用 Notepad++ 轻松完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:55:58.077

在 Notepad++ 查找/替换屏幕上，`Regular expression`选中后，请键入

找什么

```
If\s(Description\s+=\s+\"[^\"]+\")\s+Then\s(Obstakelcode\s=\s\"[^\"]+\") 
```

用。。。来代替

```
If \2 Then \1 
```

`If`和之间的表达式`Then`被捕获为组，直到结束`\1`之间的表达式被捕获为。Replace 命令根据您的要求对其进行镜像。`Then``"``\2`

# svn - TeamCity“更改”页面

> ID：15270016
> 
> 赞同：0
> 
> 时间：2013-03-07T11:30:06.723
> 
> 标签：svn, version-control, teamcity

我将 TeamCity 连接到 Subversion。它是为计划的触发器构建的，但不是为 VCS 触发器构建的。我想我篡改了 VCS 用户名设置。

VCS 用户名设置页面中的名称应该是什么？

它在“项目”页面右侧的“更改”页面中没有显示任何内容。

正常的构建运行正在发生，但 VCS 触发器没有发生。我没有使用自定义路径进行结帐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:52:39.417

您的 VCS 设置很可能没有正确设置。您需要一个对 VCS 具有基本完全权限的用户名/密码。还有一个“测试连接”按钮 - 我假设它失败了。

[以下](http://confluence.jetbrains.com/display/TCD7/Subversion)是将 SVN 设置为 VCS 根的说明。请务必遵循这些。

# matlab - 我想根据第 n+1 列的重复值对前 n 列进行平均

> ID：15270019
> 
> 赞同：0
> 
> 时间：2013-03-07T11:30:14.390
> 
> 标签：matlab, matrix, average

我在其中一列中有一个重复数字的矩阵。我想对具有重复数字的行进行平均。例如，我`A`在第 3 列的矩阵中有重复值：

```
A =   
    1         2         1
    4         4         2
    5         4         2
    4         5         2
    5         5         3
    10        3         3 
```

我想得到

```
B =
    1         2         1
    4.3333    4.3333    2.0000
    7.5000    4.0000    3.0000 
```

其中每一行是第 3 列重复行的平均值。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:52:45.100

以下单行对 column 中具有重复值的所有行进行平均`N`。

```
cell2mat(arrayfun(@(x)mean(A(A(:, N)==x,:),1), unique(A(:, N)), 'Uniform', 0)) 
```

### 例子

让我们按照您的示例对第 3 列中所有重复的行进行平均：

```
A = [1 2 1; 4 4 2; 5 4 2; 4 5 2; 5 5 3; 10 3 3];
N = 3;
B = cell2mat(arrayfun(@(x)mean(A(A(:, N)==x,:),1), unique(A(:,N)), 'Uniform', 0)) 
```

结果是：

```
B =
    1.0000   2.0000   1.0000
    4.3333   4.3333   2.0000
    7.5000   4.0000   3.0000 
```

# c# - 仅在服务器上使用 mvc webgrid 间歇性接收失败

> ID：15270022
> 
> 赞同：10
> 
> 时间：2013-03-07T11:30:21.427
> 
> 标签：c#, asp.net-mvc, iis, webgrid

我`System.Web.Helpers.WebGrid`在我们的应用程序中广泛使用它，并且在大多数情况下它很好，实际上在本地运行它总是很好，或者在服务器上使用自 SSL 它也很好。所以我不知道问题是否真的可能出在 IIS 或防火墙上，或者实际的网格上，或者我需要做些什么来修复它。

在所有浏览器上，虽然结果略有不同，但 WebGrid 上的连续 ajax 排序和分页最终会导致它挂起，当我在 Fiddler 中检查响应时，我得到

> [Fiddler]`ReadResponse()`失败：服务器没有为此请求返回响应。

如果我将 url 直接复制并粘贴到浏览器中，它将加载，但如果我不断按 F5，我最终会在 chrome 中收到一条消息，指出*“此网页不可用”*（带有 Error `103 ERR_CONNECTION_ABORTED`）或“Internet Explorer 无法显示网页” IE。

网址相当长且令人费解，例如`http://app.myapp.com/mygrid/9e3b2ae5-cbe1-4a4a-a355-a14f00d26e24?mylayout=true&myid=634982439599769687&readonly=False&search=-&__=634982439708207187&sort=Name&dir=ASC`

如果在服务器上安装了 SSL 证书，这个问题似乎就消失了，并且在本地根本不会发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:52:58.617

你问题的最后一段

> 如果在服务器上安装了 SSL 证书，这个问题似乎就消失了，并且在本地根本不会发生。

立即让我想到了可能的问题`DEFLATE`和`GZIP`问题，知道它们会在加密连接上被禁用，而且很可能也适用于本地连接，因为你不能真正将相同的证书从服务器环境移动到本地开发环境（这将超出了他们的目的），并且必须创建一个新的自签名证书用于测试目的，如果这是一个要求。

我也碰巧在之前的 .NET 4.0 版本 4.0.30319.236 之一之前偶然发现[GZipStream 或 DeflateStream 问题中可能会发生无限循环。](https://connect.microsoft.com/VisualStudio/feedback/details/707654/an-infinite-loop-may-occur-in-gzipstream-or-deflatestream)这些问题已在以后的 .NET 4.0 版本中得到解决，并且可以通过在 4.0 安装之上安装 .NET 4.5 来避免。如果这就是导致您的问题的原因，那么仍然很难说，并且可能是其他一些服务器端设置导致了它，例如现在停止使用 IIS Lockdown Tool，甚至[URLScan](http://www.iis.net/downloads/microsoft/urlscan)在启用压缩时不接受冗长的 URL 请求。

**TL;DR** - 无论哪种情况，显而易见的结论是尝试在文件中`urlCompression`为这些请求（和/或`httpCompression`）禁用 IIS 服务器`Web.config`，并查看问题是否仍然存在：

```
<configuration>
   <system.webServer>
      <urlCompression doStaticCompression="false" doDynamicCompression="false" />
   </system.webServer>
</configuration> 
```

这显然是一个黑客解决方案，应该通过比较服务器和本地环境之间的差异来进一步研究，如果可能的话。服务器也很可能没有更新所有最新的库，这样做也可以解决它。

**免责声明**：我意识到这并不是一个 100% 防弹的答案，但是 OP 在评论中建议它成功了。我昨天也在[DMZ上](https://chat.stackexchange.com/rooms/151/the-dmz)[发布了这个问题和一个可能的答案](https://chat.stackexchange.com/transcript/151?m=8557567#8557567)，询问其他人是否会知道更好的答案，并且知道我们的[IT 安全](https://security.stackexchange.com/)向导会立即识别这些问题，但圣帕特里克节似乎已经过去了它的收费:)

干杯!

# c# - 远程主机在 udpClient.BiginReceive 方法中强制关闭现有连接

> ID：15270024
> 
> 赞同：1
> 
> 时间：2013-03-07T11:30:23.233
> 
> 标签：c#, asynchronous, udpclient, beginreceive

我在 UdpClient.BeginReceive 方法中收到“现有连接被远程主机强制关闭”错误。可能是什么问题？

此代码在网络中的某些 ip 中工作，但在某些 ip 中不起作用

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.Net.NetworkInformation;
using System.IO;
using System.Runtime.InteropServices;
using System.Runtime.Serialization.Formatters.Binary;

namespace ConsoleApplication1
{
    public struct scnHeader
    {
        public uint signature; // 0x19141287

        public ushort sequence; // unique sequence number per packet
        public byte count; // retry count for the same sequence
        public byte type; // packet type

        public ushort length; // length of data
        public byte protocol; // protocol type unique to scintilla
        public byte id; // unique value per protocol to identify a packet

        public byte medium; // type of medium
        public byte role; // registrant role type  
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
        public byte[] reserved1;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]
        public byte[] serialNumber;// Unique device serial number
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]
        public byte[] reserved2;
    }
    public struct scnPlugModifyReq
    {
        public scnHeader header; // id=102, type=1(req)
        public byte totalPlugs; // number of plugs returned in status
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
        public byte[] reserved1; // reserved            
        public uint plugMask; // Plug state change value
        public uint plugState;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
        public byte[] reserved2;
    }
    public struct scnPlugModifyRsp
    {
        public scnHeader header; // id=102, type=1(req)
        public byte totalPlugs; // number of plugs returned in status
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 5)]
        public byte[] reserved1; // reserved           
        public uint plugState;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
        public byte[] reserved2;
    }

    public class UdpState
    {
        public UdpClient u;
        public IPEndPoint e;
    }

    class Program
    {
        public static uint SwapUint(uint value)
        {
            return (uint)(((value & 0xFFU) << 24) | ((value >> 24) & 0xFFU)
                        | ((value & 0xFF00U) << 8) | ((value >> 8) & 0xFF00U));
        }

        public static ulong ReverseBytes2(ulong value)
        {
            return (value & 0x00000000000000FFUL) << 56 | (value & 0x000000000000FF00UL) << 40 |
                   (value & 0x0000000000FF0000UL) << 24 | (value & 0x00000000FF000000UL) << 8 |
                   (value & 0x000000FF00000000UL) >> 8 | (value & 0x0000FF0000000000UL) >> 24 |
                   (value & 0x00FF000000000000UL) >> 40 | (value & 0xFF00000000000000UL) >> 56;
        }

        public static ushort SwapUshort(ushort value)
        {
            return (ushort)(((value & 0xFFU) << 8) | ((value & 0xFF00U) >> 8));
        }
        public static scnPlugModifyReq tx7;
        public static scnPlugModifyRsp rx7;

        public static byte[] data;
        public static byte[] datar;
        public static Socket clientSocket;    

        public static byte[] getBytesfromstruct(object o)
        {
            int size = Marshal.SizeOf(o);
            byte[] arr = new byte[size];
            IntPtr ptr = Marshal.AllocHGlobal(size);
            Marshal.StructureToPtr(o, ptr, true);
            Marshal.Copy(ptr, arr, 0, size);
            Marshal.FreeHGlobal(ptr);
            return arr;
        }
        public static object fromBytes(byte[] arr, object o)
        {
            object str = new object();
            int size = Marshal.SizeOf(o);
            IntPtr ptr = Marshal.AllocHGlobal(size);
            Marshal.Copy(arr, 0, ptr, size);
            o = (object)Marshal.PtrToStructure(ptr, o.GetType());
            Marshal.FreeHGlobal(ptr);
            return o;
        }
        public static void prescnPlugModifyReq()
        {
            tx7.header.count = 0x00;
            tx7.header.id = 0x65;
            tx7.header.length = Program.SwapUshort((ushort)Marshal.SizeOf(tx7));
            tx7.header.medium = 0x01;
            tx7.header.protocol = 0x01;
            tx7.header.reserved1 = new byte[] { 0x0, 0x0 };
            tx7.header.reserved2 = new byte[] { 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 };
            tx7.header.role = 0x03;
            tx7.header.sequence = 0x0;
            tx7.header.serialNumber = new byte[] { 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 };
            tx7.header.signature = Program.SwapUint((uint)0x19141287);
            tx7.header.type = 0x01;
            tx7.totalPlugs = 0x04;
            tx7.reserved1 = new byte[] { 0x0, 0x0, 0x0 };
            tx7.plugMask = Program.SwapUint(0);
            tx7.plugState = Program.SwapUint(0);
            tx7.reserved2 = new byte[] { 0x0, 0x0, 0x0, 0x0 };
        }

        public static bool messageReceived;
        public static IPEndPoint URJAIP;
        public static IPEndPoint Sender;
        public static byte[] send_buffer;
        public static byte[] recv_buffer;
        public static IPAddress[] UrjaDevices = new IPAddress[30];
        public static string myHost = System.Net.Dns.GetHostName();
        public static string myIP = Dns.GetHostByName(myHost).AddressList[0].ToString();
        public static int count;
        public static void sendPacket(object o, IPAddress[] addr, int port)
        {
            try
            {
                count = addr.Count(x => x != null);
                byte[] send_buffer = Program.getBytesfromstruct(o);          
                int i = 0;
                count = addr.Count(t => t != null);
            here1:
                messageReceived = false;
                while (i < count)
                {
                    UdpClient device = new UdpClient(addr[i].ToString(), port);
                    Sender = new IPEndPoint(IPAddress.Parse(myIP), 19012);
                    if (addr[i].ToString() == myIP)
                    {
                        i++;
                        continue;
                    };
                    int ret = device.Send(send_buffer, send_buffer.Length);

                    UdpState s = new UdpState();
                    s.u = device;
                    s.e = Sender;
                    device.BeginReceive(new AsyncCallback(recvPacket), s);//at this point I get exception which is have given at title
                    if (messageReceived == false)
                    {
                        Thread.Sleep(10);
                        i++;
                        goto here1;
                    }

                }

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
                Console.ReadLine();
            }

        }

        public static void recvPacket(IAsyncResult ar)
        {
            UdpClient dev = (UdpClient)((UdpState)(ar.AsyncState)).u;
            IPEndPoint sen = (IPEndPoint)((UdpState)(ar.AsyncState)).e;
            Console.WriteLine("Message Received!{0}",dev.Client.RemoteEndPoint.ToString());
            messageReceived = true;
        }

        public static void Main()
        {
            prescnPlugModifyReq();
            byte[] data = getBytesfromstruct(tx7);
            IPAddress[] temp = new IPAddress[11];            
            temp[0] = IPAddress.Parse("192.168.1.1");
            temp[1] = IPAddress.Parse("192.168.1.100");
            temp[2] = IPAddress.Parse("192.168.1.111");
            temp[3] = IPAddress.Parse("192.168.1.200");
            temp[4] = IPAddress.Parse("192.168.1.9");
            temp[5] = IPAddress.Parse("192.168.1.10");
            temp[6] = IPAddress.Parse("192.168.1.106");
            temp[7] = IPAddress.Parse("192.168.1.112");
            temp[8] = IPAddress.Parse("192.168.1.110");
            temp[9] = IPAddress.Parse("192.168.1.109");
            temp[10] = IPAddress.Parse("192.168.1.105");  
            sendPacket(tx7,temp,19012);
            Console.ReadLine();          
        }                
    }
} 
```

# linux-kernel - 有没有办法显示从引导加载程序（ARM）传递给内核的标签列表？

> ID：15270026
> 
> 赞同：0
> 
> 时间：2013-03-07T11:30:26.347
> 
> 标签：linux-kernel, arm, bootloader

我想查看从引导加载程序传递给内核的标签列表（特别是 ATAG_MEM）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:45:44.683

初始入口代码将在启动 MMU 后将[`head-common.S`](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/kernel/head-common.S)引导加载程序传递的物理地址放入内核变量中。`__atags_pointer`这就是后面的步骤，`setup_arch()`调用`setup_machine_*()`(in [`arch/arm/kernel/atags_parse.c`](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/kernel/atags_parse.c)) 然后从中检索它。参见那里了解如何访问物理映射的内存。

在这个阶段“看到”它们需要一些早期引导`printk`支持、JTAG 调试器或其他一些机制，以便在驱动程序堆栈完全初始化之前从设备中提取跟踪/诊断。如果那（在设备启动早期提取诊断的能力）是您的问题，请澄清问题。

# sql-server-2008 - 无法连接到远程服务器

> ID：15270028
> 
> 赞同：0
> 
> 时间：2013-03-07T11:30:29.770
> 
> 标签：sql-server-2008, remote-server

我在两个不同的服务器上有两个 SQL Server：

```
SERVER 1: SQL Server Enterprise edition 2008 r2 64bit
SERVER 2: SQL Server Standard edition 2008 64bit 
```

我在两个 SQL Server 上都有 db_admin 权限，当我从服务器 2 连接服务器 1 时，它正在连接（意味着从标准连接企业）但是当我做反向时它没有连接。我该如何解决？

注意：当我从具有相同 SQL Server 版本的其他服务器连接 SERVER 1 时，反之亦然，它连接良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:23:45.640

如果您使用的是 SSMS，则该版本无关紧要。当您无法连接时，问题通常是配置问题，但如果它同时适用于其他服务器，则情况可能并非如此。先试试下面的。

在服务器 2 的服务器属性对话框中，转到左侧的连接选项卡。大约 3/4 的路径是“允许远程连接到此服务器”的选项。应该检查一下。

如果选中，接下来要做的是验证服务器在哪个端口上。如果不在标准 1433 上，则需要将端口添加到连接（例如 MyServer,1234）

# c# - 如何本地化数据类型消息

> ID：15270029
> 
> 赞同：6
> 
> 时间：2013-03-07T11:30:31.773
> 
> 标签：c#, asp.net-mvc-4

如何在 MVC4“字段日期必须是日期”中本地化数据类型消息。

```
<input data-val="true" data-val-date="The field Date be a date." id="Date" name="Date"  value="" > 
```

我使用：

```
public class LocalizedDataTypeAttributeAdapter : DataAnnotationsModelValidator<DataTypeAttribute>

        {
            public LocalizedDataTypeAttributeAdapter(ModelMetadata metadata, ControllerContext context, DataTypeAttribute attribute) : base(metadata, con

text, attribute)
        {
            attribute.ErrorMessageResourceType = typeof(Localization.Global);
            attribute.ErrorMessageResourceName = "PropertyDataFormat";
        }

    } 
```

也在 Global.asax 中注册 LocalizedDataTypeAttributeAdapter

```
DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(DataTypeAttribute), typeof(LocalizedDataTypeAttributeAdapter)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T17:03:03.687

您需要重写 ClientDataTypeModelValidatorProvider

拿它[https://github.com/mono/aspnetwebstack/blob/master/src/System.Web.Mvc/ClientDataTypeModelValidatorProvider.cs](https://github.com/mono/aspnetwebstack/blob/master/src/System.Web.Mvc/ClientDataTypeModelValidatorProvider.cs)

和改变

```
private static string GetUserResourceString(ControllerContext controllerContext, string resourceName)
        {
            string result = null;

            if (!String.IsNullOrEmpty(ResourceClassKey) && (controllerContext != null) && (controllerContext.HttpContext != null))
            {
                //result = controllerContext.HttpContext.GetGlobalResourceObject(ResourceClassKey, resourceName, CultureInfo.CurrentUICulture) as string;
                result = GlobalRes.ResourceManager.GetString(resourceName);
            }

            return result;
        } 
```

然后将其设置为`DefaultModelBinder`在`Application_Start`Global.asax 中：

```
protected void Application_Start()
{

   var existingProvider = ModelValidatorProviders.Providers.Single(x => x is ClientDataTypeModelValidatorProvider);
   ModelValidatorProviders.Providers.Remove(existingProvider);
   ModelValidatorProviders.Providers.Add(new myClientDataTypeModelValidatorProvider()); //!!
   myClientDataTypeModelValidatorProvider.ResourceClassKey = typeof(GlobalRes).Name;
   DefaultModelBinder.ResourceClassKey = typeof(GlobalRes).Name;
} 
```

# c++ - 转换 std::tuple 到 T

> ID：15270032
> 
> 赞同：4
> 
> 时间：2013-03-07T11:30:43.257
> 
> 标签：c++, templates, c++11, stdtuple

所以我得到了一个`std::tuple<T...>`，我想创建一个接受的函数指针`T...`，目前这就是我所拥有的；

```
template<typename... Arguments>
using FunctionPointer = void (*)(Arguments...);

using FunctionPtr = FunctionPointer<typename std::tuple_element<0, V>::type,
                                    typename std::tuple_element<1, V>::type,
                                    typename std::tuple_element<2, V>::type>; 
```

但是，如果不手动输入`0, ..., tuple_size<V>::value`. FunctionPtr 在上下文中定义，其中`V=std::tuple<T...>`（也已经有一个可变参数模板（因此我不能直接传递`T...`））

我想我需要生成一些索引列表，并做一些黑魔法..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:34:10.690

这是一个可能的解决方案：

```
#include <tuple>

// This is what you already have...
template<typename... Arguments>
using FunctionPointer = void (*)(Arguments...);

// Some new machinery the end user does not need to no about
namespace detail
{
    template<typename>
    struct from_tuple { };

    template<typename... Ts>
    struct from_tuple<std::tuple<Ts...>>
    {
        using FunctionPtr = FunctionPointer<Ts...>;
    };
}

//=================================================================
// This is how your original alias template ends up being rewritten
//=================================================================
template<typename T>
using FunctionPtr = typename detail::from_tuple<T>::FunctionPtr; 
```

以下是您将如何使用它：

```
// Some function to test if the alias template works correctly
void foo(int, double, bool) { }

int main()
{
    // Given a tuple type...
    using my_tuple = std::tuple<int, double, bool>;

    // Retrieve the associated function pointer type...
    using my_fxn_ptr = FunctionPtr<my_tuple>; // <== This should be what you want

    // And verify the function pointer type is correct!
    my_fxn_ptr ptr = &foo;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T11:37:33.503

一个简单的特征可能会奏效：

```
#include <tuple>

template <typename> struct tuple_to_function;

template <typename ...Args>
struct tuple_to_function<std::tuple<Args...>>
{
    typedef void (*type)(Args...);
}; 
```

用法：

```
typedef std::tuple<Foo, Bar, int> myTuple;

tuple_to_function<myTuple>::type fp; // is a void (*)(Foo, Bar, int) 
```

# asp.net - 将转发器中的标头设置为 visible.false

> ID：15270033
> 
> 赞同：1
> 
> 时间：2013-03-07T11:30:48.813
> 
> 标签：asp.net, header, repeater

使用中继器显示列表，如果列表返回空表将为空，所以我显示了一条消息“表为空”，但我也想将表头的可见性设置为 false，是否有一个属性是吗？

repeater.header 什么的？

谢谢

* * *

编辑：对于那些不能在黑暗中编程的人

```
<asp:Repeater id="rptSelectedUtilities" runat="server">
    <HeaderTemplate>
        <table class="detailstable FadeOutOnEdit">
            <tr>   
                <th style="width:200px;">Utility</th>    
                <th style="width:200px;">Contacted</th>   
                <th style="width:200px;">Comment</th>    
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
            <tr>
                <th style="width:200px;"><%# Eval("Name") %></th>
                <th style="width:200px;"><asp:CheckBox ID="chkMyCheck" runat="server" Checked='<%# Convert.ToBoolean(Eval("Checked")) %>'/></th>   
                <th style="width:200px;"><%# Eval("Comment") %></th>  
            </tr>
            <asp:Label id="labelTableEmpty" runat="server" Text="There are currently no items in this table." />
    </ItemTemplate>
    <FooterTemplate>
            <asp:Label id="labelTableEmpty" runat="server" Text="There are currently no items in this table." />
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:15:38.973

好吧，让我们稍微改变一下。我们将使中继器整体不可见，然后在标记中添加另一个标签，并在必要时使其可见。用这个替换转发器代码：

```
<asp:Repeater id="rptSelectedUtilities" runat="server">
    <HeaderTemplate>
        <table class="detailstable FadeOutOnEdit">
            <tr>   
                <th style="width:200px;">Utility</th>    
                <th style="width:200px;">Contacted</th>   
                <th style="width:200px;">Comment</th>    
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
            <tr>
                <th style="width:200px;"><%# Eval("Name") %></th>
                <th style="width:200px;"><asp:CheckBox ID="chkMyCheck" runat="server" Checked='<%# Convert.ToBoolean(Eval("Checked")) %>'/></th>   
                <th style="width:200px;"><%# Eval("Comment") %></th>  
            </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

然后在中继器之后添加这个（你当然可以改变措辞）：

```
<asp:Label id="labelTableEmpty" runat="server" Text="There are currently no items in this table." /> 
```

然后在`OnPreRender`web 表单中，我们将编写一些代码：

```
protected override void OnPreRender(EventArgs e)
{
    if (rptSelectedUtilities.Items.Count == 0)
    {
        rptSelectedUtilities.Visislbe = false;
        labelTableEmpty.Visible = true;
    }
    else
    {
        rptSelectedUtilities.Visislbe = true;
        labelTableEmpty.Visible = false;
    }
} 
```

# c# - 如何从 IQueryable 中检索不同的对象类型

> ID：15270034
> 
> 赞同：1
> 
> 时间：2013-03-07T11:30:49.013
> 
> 标签：c#, linq, entity-framework, ado.net, linq-to-entities

我首先使用 Entity Framework 5 代码。我有以下查询返回 2 个不同的对象：

```
var query = (from s in DatabaseContext.Servers
             join c in DatabaseContext.CommandExecutionServers on s.Domain equals c.Domain
             where s.Id == serverId && c.Active == active
             select new { s, c }); 
```

s 是 a `Server class`， c 是 a `CEServer class`。

如何从查询中检索 s 和 c 对象，因为我需要使用它们。我需要类似的东西：

```
Server server = s;  // first check for nulls and
server.CEServer = c;  // check for nulls as well 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:34:08.473

由于您的查询返回一系列*匿名*类对象，因此您可以枚举您的查询，并从每个返回的行访问和，如下所示`s`：`c`

```
foreach (var row in query) {
    Server s = row.s;
    // Check the server...
    CEServer c = row.c;
    // Use CEServer...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:36:15.737

如果你确定你只会得到一对，你可以使用这个：

```
Server server = query.Single().s;  // first check for nulls and
server.CEServer = query.Single().c; 
```

如果没有，你会得到**异常**。

# oracle - 尝试设置 ComboBox 控件的文本时出错

> ID：15270035
> 
> 赞同：0
> 
> 时间：2013-03-07T11:30:52.327
> 
> 标签：oracle, listview, vb6, combobox

这是我的代码，当我单击 ListView 中的项目时，它尝试设置 ComboBox 的文本。

```
Private Sub ListView1_Click()
  If ListView1.ListItems.Count > 0 Then
    Text1.Text = ListView1.ListItems(ListView1.SelectedItem.Index).Text
    Text2.Text = ListView1.ListItems(ListView1.SelectedItem.Index).ListSubItems(1).Text

    Sql = "SELECT A.AID,B.LOC_NAME,C.SNAME FROM ASSET A,LOCATION B,SUPPLIER C WHERE "
    Sql = Sql + "A.LOC_ID=B.LOC_ID AND A.SUP_ID=C.SUP_ID AND AID=" & Text1.Text
    RS.Open Sql, CON, 1, 2

    COM1
    Combo1.Text = RS!LOC_NAME                       //combo with style - 2
    COM5
    Combo5.Text = RS!SNAME                          //combo with style - 2
  End If
End Sub

Private Sub COM5()
   If Combo5.ListIndex = -1 Then
     For I = 0 To Combo5.ListCount - 1
       Combo5.ListIndex = I
     Next
    End If
End Sub

Private Sub COM1()
 If Combo1.ListIndex = -1 Then
   For I = 0 To Combo1.ListCount - 1
      Combo1.ListIndex = I
    Next
  End If
End Sub 
```

但是，当我单击 ListView1 时，出现此错误：

> 'text' 属性是只读的

谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:49:32.600

对于具有*下拉列表*`.text`样式的组合框，如果该项目已存在，您只能选择该项目，因此如果列表中不存在则`combo1.text = "xxx"`错误。`"xxx"`

根据存在选择*或添加，您可以；*

```
Private Sub SelectOrAddToCombo(combo As ComboBox, value As String)
    Dim i As Long
    With combo
        For i = 0 To combo.ListCount - 1
            If StrComp(.List(i), value, vbTextCompare) = 0 Then
                combo.ListIndex = i
                Exit Sub
            End If
        Next
        .AddItem value
        .ListIndex = .NewIndex
    End With
End Sub

...

SelectOrAddToCombo Combo1, RS!LOC_NAME
SelectOrAddToCombo Combo5, RS!SNAME 
```

目前尚不清楚您的`COM5()`/`COM1()`例程的意义是什么。

对于列表视图，而不是单击查看

`ListView1_ItemClick(ByVal Item As MSComctlLib.ListItem)`

将单击的项目传递给您的事件否定了它的需要`ListView1.SelectedItem`（如果它可能会导致错误`Nothing`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T17:31:49.607

是的，在设置 .text 属性之前，您必须使用数组（使用 additem 值）填充组合框，如果要在组合框上设置的文本未在数组中存在，则会出现此错误

# android - Android - 用户登录认证过程中的 Asynctask 和 ThreadPoolExecutor 异常

> ID：15270038
> 
> 赞同：1
> 
> 时间：2013-03-07T11:31:07.180
> 
> 标签：android, android-asynctask, threadpoolexecutor

在 LoginActivity 类中，我使用 Asynctask 类对获取的电子邮件地址和密码进行身份验证。

这是调用尝试登录函数的主要活动类，该函数又将控制权传递给扩展了 Asynctask 类的 UserLoginTask 类，以对用户进行身份验证。

但是执行总是在之后停止，`Log.d(TAG, mUsername+ "--" + mPassword);`并为 ThreadPoolExecutor 抛出异常。

我是android开发的新手，所以请帮助我理解代码中的问题。

```
public class LoginActivity extends Activity {
    // Values for email and password at the time of the login attempt.
private String mUsername;
private String mPassword;

@Override
protected void onCreate(Bundle savedInstanceState) {
            ......

    // Set up the login form.
    mUsername = getIntent().getStringExtra(EXTRA_EMAIL);
    mUsernameView = (EditText) findViewById(R.id.email);\

            ......

    findViewById(R.id.sign_in_button).setOnClickListener(
            new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    attemptLogin();
                }
            });
}

/**
 * Attempts to sign in or register the account specified by the login form.
 * If there are form errors (invalid email, missing fields, etc.), the
 * errors are presented and no actual login attempt is made.
 */
public void attemptLogin() {
    if (mAuthTask != null) {
        return;
    }

    // Reset errors.
    mUsernameView.setError(null);
    mPasswordView.setError(null);

    // Store values at the time of the login attempt.
    mUsername = mUsernameView.getText().toString();
    mPassword = mPasswordView.getText().toString();

            ..........

    if (cancel) {
        // There was an error; don't attempt login and focus the first
        // form field with an error.
        focusView.requestFocus();
    } else {

        // Show a progress spinner, and kick off a background task to
        // perform the user login attempt.
            mLoginStatusMessageView.setText(R.string.login_progress_signing_in);
        showProgress(true);
        try {
        mAuthTask = new UserLoginTask();
        mAuthTask.execute(mUsername, mPassword);
        } catch(Exception e) {
            Log.e(TAG, e.toString());
        }
        //mAuthTask.execute((Void) null);
    }
}

/**
 * Represents an asynchronous login/registration task used to authenticate
 * the user.
 */
public class UserLoginTask extends AsyncTask<String, Void, Boolean> {
    UserFunctions userFunction;

    private String isUserLoggedIn;
    private String TAG = "Feedback App";
    private String KEY_SUCCESS = "success";
    private String result;

    @Override
    protected Boolean doInBackground(String... loginVars) {
        // TODO: attempt authentication against a network service.
        mUsername = loginVars[0];
        mPassword = loginVars[1];

        try {
            // Simulate network access.
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            return false;
        }

                    Log.d(TAG, mUsername+ "--" + mPassword);

        JSONObject json = userFunction.loginUser(mUsername, mPassword);
        Log.e(TAG, "fetched json" + json.toString());

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {

                                            ........
                // Close Login Screen
                finish();
            } else {
                // Error in login
                //loginErrorMsg.setText("Incorrect username/password");
                return false;
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        // TODO: register the new account here.
        return true;
    }

    @Override
    protected void onPostExecute(final Boolean success) {
        mAuthTask = null;
        showProgress(false);

        if (success) {
            finish();
        } else {
            mPasswordView.requestFocus();
        }
    }

    @Override
    protected void onCancelled() {
        mAuthTask = null;
        showProgress(false);
    }
}
} 
```

这是用于身份验证的功能

```
public JSONObject loginUser(String username, String password) {
    Log.d(TAG, "jsonparser class - in login");

    // Building Parameters      
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("username", username));
    params.add(new BasicNameValuePair("password", password));

    JSONObject json = jsonParser.getJSONFromUrl(serverURL, params);
    return json;
} 
```

抛出的异常是，

```
03-07 11:22:26.002: E/ActivityThread(650): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d06618 that was originally bound here
03-07 11:22:26.002: E/ActivityThread(650): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d06618 that was originally bound here
03-07 11:22:26.002: E/ActivityThread(650):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-07 11:22:26.002: E/ActivityThread(650):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-07 11:22:26.002: E/ActivityThread(650):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-07 11:22:26.002: E/ActivityThread(650):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-07 11:22:26.002: E/ActivityThread(650):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-07 11:22:26.002: E/ActivityThread(650):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-07 11:22:26.002: E/ActivityThread(650):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-07 11:22:26.002: E/ActivityThread(650):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-07 11:22:26.002: E/ActivityThread(650):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-07 11:22:26.002: E/ActivityThread(650):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-07 11:22:26.002: E/ActivityThread(650):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-07 11:22:26.002: E/ActivityThread(650):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-07 11:22:26.002: E/ActivityThread(650):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-07 11:22:26.002: E/ActivityThread(650):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-07 11:22:26.002: E/ActivityThread(650):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-07 11:22:26.002: E/ActivityThread(650):  at java.lang.Thread.run(Thread.java:856)
03-07 11:22:26.772: E/StrictMode(650): null
03-07 11:22:26.772: E/StrictMode(650): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d06618 that was originally bound here
03-07 11:22:26.772: E/StrictMode(650):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-07 11:22:26.772: E/StrictMode(650):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-07 11:22:26.772: E/StrictMode(650):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-07 11:22:26.772: E/StrictMode(650):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-07 11:22:26.772: E/StrictMode(650):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-07 11:22:26.772: E/StrictMode(650):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-07 11:22:26.772: E/StrictMode(650):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-07 11:22:26.772: E/StrictMode(650):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-07 11:22:26.772: E/StrictMode(650):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-07 11:22:26.772: E/StrictMode(650):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-07 11:22:26.772: E/StrictMode(650):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-07 11:22:26.772: E/StrictMode(650):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-07 11:22:26.772: E/StrictMode(650):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-07 11:22:26.772: E/StrictMode(650):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-07 11:22:26.772: E/StrictMode(650):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-07 11:22:26.772: E/StrictMode(650):  at java.lang.Thread.run(Thread.java:856) 
```

并打开此 ThredPoolExecutor 选项卡，显示

```
public class java.util.concurrent.ThreadPoolExecutor extends java.util.concurrent.AbstractExecutorService {
// Method descriptor #17 (IIJLjava/util/concurrent/TimeUnit;Ljava/util/concurrent/BlockingQueue;)V
// Signature: (IIJLjava/util/concurrent/TimeUnit;Ljava/util/concurrent/BlockingQueue<Ljava/lang/Runnable;>;)V
// Stack: 3, Locals: 7
public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, java.util.concurrent.TimeUnit unit, java.util.concurrent.BlockingQueue workQueue);
 0  aload_0 [this]
 1  invokespecial java.util.concurrent.AbstractExecutorService() [1]
 4  new java.lang.RuntimeException [2]
 7  dup
 8  ldc <String "Stub!"> [3]
10  invokespecial java.lang.RuntimeException(java.lang.String) [4]
13  athrow
  Line numbers:
    [pc: 0, line: 29]
  Local variable table:
    [pc: 0, pc: 14] local: this index: 0 type: java.util.concurrent.ThreadPoolExecutor
    [pc: 0, pc: 14] local: corePoolSize index: 1 type: int
    [pc: 0, pc: 14] local: maximumPoolSize index: 2 type: int
    [pc: 0, pc: 14] local: keepAliveTime index: 3 type: long
    [pc: 0, pc: 14] local: unit index: 5 type: java.util.concurrent.TimeUnit
    [pc: 0, pc: 14] local: workQueue index: 6 type: java.util.concurrent.BlockingQueue
  Local variable type table:
    [pc: 0, pc: 14] local: workQueue index: 6 type: java.util.concurrent.BlockingQueue<java.lang.Runnable>

// Method descriptor #36 (IIJLjava/util/concurrent/TimeUnit;Ljava/util/concurrent/BlockingQueue;Ljava/util/concurrent/ThreadFactory;)V
// Signature: (IIJLjava/util/concurrent/TimeUnit;Ljava/util/concurrent/BlockingQueue<Ljava/lang/Runnable;>;Ljava/util/concurrent/ThreadFactory;)V
// Stack: 3, Locals: 8
public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, java.util.concurrent.TimeUnit unit, java.util.concurrent.BlockingQueue workQueue, java.util.concurrent.ThreadFactory threadFactory);
 0  aload_0 [this]
 1  invokespecial java.util.concurrent.AbstractExecutorService() [1]
 4  new java.lang.RuntimeException [2]
 7  dup
 8  ldc <String "Stub!"> [3]
10  invokespecial java.lang.RuntimeException(java.lang.String) [4]
13  athrow
  Line numbers:
    [pc: 0, line: 30]
  Local variable table:
    [pc: 0, pc: 14] local: this index: 0 type: java.util.concurrent.ThreadPoolExecutor
    [pc: 0, pc: 14] local: corePoolSize index: 1 type: int
    [pc: 0, pc: 14] local: maximumPoolSize index: 2 type: int
    [pc: 0, pc: 14] local: keepAliveTime index: 3 type: long
    [pc: 0, pc: 14] local: unit index: 5 type: java.util.concurrent.TimeUnit
    [pc: 0, pc: 14] local: workQueue index: 6 type: java.util.concurrent.BlockingQueue
    [pc: 0, pc: 14] local: threadFactory index: 7 type: java.util.concurrent.ThreadFactory
  Local variable type table:
    [pc: 0, pc: 14] local: workQueue index: 6 type: java.util.concurrent.BlockingQueue<java.lang.Runnable>

Inner classes:
[inner class info: #7 java/util/concurrent/ThreadPoolExecutor$DiscardOldestPolicy, outer class info: #5 java/util/concurrent/ThreadPoolExecutor
 inner name: #8 DiscardOldestPolicy, accessflags: 9 public static],
[inner class info: #10 java/util/concurrent/ThreadPoolExecutor$DiscardPolicy, outer class info: #5 java/util/concurrent/ThreadPoolExecutor
 inner name: #11 DiscardPolicy, accessflags: 9 public static],
[inner class info: #12 java/util/concurrent/ThreadPoolExecutor$AbortPolicy, outer class info: #5 java/util/concurrent/ThreadPoolExecutor
 inner name: #13 AbortPolicy, accessflags: 9 public static],
[inner class info: #14 java/util/concurrent/ThreadPoolExecutor$CallerRunsPolicy, outer class info: #5 java/util/concurrent/ThreadPoolExecutor
 inner name: #15 CallerRunsPolicy, accessflags: 9 public static]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:43:16.097

这似乎不是（因为）您的代码中引发的异常。检查您的应用程序的 PID，并将其与 logcat 异常消息中显示的 PID 进行比较（例如：E/StrictMode( **650** ) - 这里的 PID 是**650**）。

但是，我认为您做错的一件事是从AsyncTask 的**doInBackground调用****finish()**。我相信你不应该这样做，因为**doInBackground**在它自己的线程中运行，并且可能应该从 UI 线程调用**finish** () （即应该在**onPostExecute() 中调用）**

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T20:42:28.157

尝试在 LoginActivity 中集成其他类的所有功能。例如，来自 UserFunctions 类的 loginUser 函数和来自 JSONParser 类的 getJSONFromUrl。

如果需要，不要忘记声明您的 serverURL 字符串并添加导入。

```
 public class LoginActivity extends Activity {
    // Values for email and password at the time of the login attempt.
private String mUsername;
private String mPassword;

 private static String serverURL = "YOUR URL";

    //private JSONParser jsonParser;

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

@Override
protected void onCreate(Bundle savedInstanceState) {
            ......

    // Set up the login form.
    mUsername = getIntent().getStringExtra(EXTRA_EMAIL);
    mUsernameView = (EditText) findViewById(R.id.email);\

            ......

    findViewById(R.id.sign_in_button).setOnClickListener(
            new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    attemptLogin();
                }
            });
}

/**
 * Attempts to sign in or register the account specified by the login form.
 * If there are form errors (invalid email, missing fields, etc.), the
 * errors are presented and no actual login attempt is made.
 */
public void attemptLogin() {
    if (mAuthTask != null) {
        return;
    }

    // Reset errors.
    mUsernameView.setError(null);
    mPasswordView.setError(null);

    // Store values at the time of the login attempt.
    mUsername = mUsernameView.getText().toString();
    mPassword = mPasswordView.getText().toString();

            ..........

    if (cancel) {
        // There was an error; don't attempt login and focus the first
        // form field with an error.
        focusView.requestFocus();
    } else {

        // Show a progress spinner, and kick off a background task to
        // perform the user login attempt.
            mLoginStatusMessageView.setText(R.string.login_progress_signing_in);
        showProgress(true);
        try {
        mAuthTask = new UserLoginTask();
        mAuthTask.execute(mUsername, mPassword);
        } catch(Exception e) {
            Log.e(TAG, e.toString());
        }
        //mAuthTask.execute((Void) null);
    }
}

public JSONObject loginUser(String username, String password) {
    Log.d(TAG, "jsonparser class - in login");

    // Building Parameters      
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("username", username));
    params.add(new BasicNameValuePair("password", password));

    JSONObject json = jsonParser.getJSONFromUrl(serverURL, params);
    return json;
}

/**
 * Represents an asynchronous login/registration task used to authenticate
 * the user.
 */
public class UserLoginTask extends AsyncTask<String, Void, Boolean> {
    UserFunctions userFunction;

    private String isUserLoggedIn;
    private String TAG = "Feedback App";
    private String KEY_SUCCESS = "success";
    private String result;

    @Override
    protected Boolean doInBackground(String... loginVars) {
        // TODO: attempt authentication against a network service.
        mUsername = loginVars[0];
        mPassword = loginVars[1];

        try {
            // Simulate network access.
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            return false;
        }

                    Log.d(TAG, mUsername+ "--" + mPassword);

        JSONObject json = userFunction.loginUser(mUsername, mPassword);
        Log.e(TAG, "fetched json" + json.toString());

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {

                                            ........
                // Close Login Screen
                finish();
            } else {
                // Error in login
                //loginErrorMsg.setText("Incorrect username/password");
                return false;
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        // TODO: register the new account here.
        return true;
    }

    @Override
    protected void onPostExecute(final Boolean success) {
        mAuthTask = null;
        showProgress(false);

        if (success) {
            finish();
        } else {
            mPasswordView.requestFocus();
        }
    }

    @Override
    protected void onCancelled() {
        mAuthTask = null;
        showProgress(false);
    }
}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) 
    {
        // Making HTTP request
        try 
        {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            /*
             *  if you are referring to a localhost from your device than use the http://10.0.2.2/ 
             *  instead of the http://127.0.0.1/ or http://localhost/. Because your Android emulator is running
             *  on a Virtual Machine(QEMU) and you can not connect to a server directly running on your PC.
             *  So your code snippet will be like this:
             *  HttpPost httpMethod = new HttpPost("http://10.0.2.2:8080/ + address insteda of the normal website name");
             *  Modify your url from the previous activity
             */
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            /*  If you come across connection problems and any action requiring data transfer silently fails
             *  the following line of code could be the reason of the issue. Add a line breakpoint and check 
             *  whether the request has been sent or not. Check your server ip, and make sure that your
             *  machine is visible.
             */
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }
        catch (UnsupportedEncodingException e) 
        {
            e.printStackTrace();
        }
        catch (ClientProtocolException e)
        {
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }

        try 
        {
            /*
             *  Here you should receive the response from the web, check out reader response from BufferedReader class
             *  If you receive a html page response then your server is not online or reachable.
             */
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) 
            {
                Log.e("JSON PARSER:","line : "+ line);
                sb.append(line + "n");
            }
            is.close();
            json = sb.toString();
            //Log.e("JSON", json);
        } 
        catch (Exception e) 
        {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }
        // try parse the string to a JSON object
        try 
        {
            jObj = new JSONObject(json);
        } 
        catch (JSONException e) 
        {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }

} 
```******

# jquery - 图片库/滑块，仅显示一个缩略图，但单击时显示画廊？

> ID：15270043
> 
> 赞同：0
> 
> 时间：2013-03-07T11:31:27.367
> 
> 标签：jquery, html, css, jquery-plugins, wordpress

所以就像标题所说的那样。我也想要三个“缩略图”或图片，然后当您单击其中的八个时，会弹出一个画廊的幻灯片（每个缩略图/图片都有不同的画廊）。任何人都可以为此推荐一个好的插件吗？javascript/jquery/wordpress 如果它是响应式/流畅的并且适用于大多数手机，那就太好了 谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:47:16.097

[图库查看](http://spaceforaname.com/galleryview)

[漂亮的照片](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

[广告画廊](http://coffeescripter.com/2009/07/ad-gallery-a-jquery-gallery-plugin/)

[花式盒](http://fancybox.net/)

[全屏画廊](http://devkick.com/blog/full-screen-image-gallery-using-jquery-and-flickr/)

[滑块查看器专业版](http://www.gcmingati.net/wordpress/wp-content/lab/jquery/svwt/index.html)

[带描述的图像旋转器](http://www.sohtanaka.com/web-design/create-an-image-rotator/)

[皮卡选择](http://pikachoose.com/)

[画廊](http://devkick.com/lab/galleria/demo_01.htm#img/grass-blades.jpg)

[Apple Like 画廊](http://tutorialzine.com/2009/11/beautiful-apple-gallery-slideshow/)

[具有许多功能的横幅旋转器](http://codecanyon.net/item/jquery-banner-rotator-content-slider-carousel/full_screen_preview/1534434)

[响应式多点触控滑块](http://codecanyon.net/item/zuper-responsive-multitouch-slider/full_screen_preview/2028436)

最后从我身边

[尼沃斯莱德](http://nivozoom.dev7studios.com/)

# java - 使用嵌入式 OSGi 框架中的服务

> ID：15270044
> 
> 赞同：0
> 
> 时间：2013-03-07T11:31:27.973
> 
> 标签：java, osgi

我有可嵌入的 Felix。我有一些 API 包和 Impl。API 导出接口`C`.Impl 导入该接口并在激活器中注册 impl。现在我想要 C impl otside OSGi

```
 FrameworkFactory ff = new FrameworkFactory();
  ...
  BundleContext bc = fwk.getBundleContext();
  ...
  final ServiceReference[] serviceReferences = bc.getServiceReferences(C.class.getName(), "(objectclass=" + C.class.getName() + ")");
  for(ServiceReference serviceReference : serviceReferences){
     final Object service = bc.getService(serviceReference);
     ...
  } 
```

现在我想和它互动。我可以通过反思来做到这一点

```
 System.out.println(service.getClass().getMethod("some").invoke(service)); //using 
```

但我不能投

```
 System.out.println(service instanceof C); //prints false 
```

我猜这来自不同的类加载器。但是我该如何解决呢？我们如何从外部与 OSGi 上下文交互？或者我们可以将其全部放入 OSGi 容器中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:44:16.010

如果您正在嵌入 OSGi，则服务的 API（即接口“C”）必须对外部应用程序可见，并通过系统捆绑导出导出到 OSGi。外部应用程序无法从包含在 OSGi 框架内的包中导入包。

# jquery - fancybox2 中没有滚动条，并且设置了大小

> ID：15270047
> 
> 赞同：2
> 
> 时间：2013-03-07T11:31:35.383
> 
> 标签：jquery, html, fancybox, fancybox-2

我一直试图让滚动条不出现在fancybox中。我已经在[Fancybox inline 尝试了没有滚动条并且 100% 和“固定”](https://stackoverflow.com/questions/12423954/fancybox-inline-to-have-no-scrollbars-and-be-100-and-fixed?answertab=oldest#tab-top)的解决方案， 但我无法让它工作。

我正在使用的是[http://home.nith.no/~setkin11/advancedsearc1.html](http://home.nith.no/~setkin11/advancedsearc1.html) 我希望将大小设置为常数，并且滚动条在弹出时根本不显示。

**脚本**

```
 $(document).ready(function() {
        $('#smallAdvanced_container').bind('click', function(){
            var container = $('#advanced_container');
            if($('#advanced_container').is(':hidden')) {
                $('#advanced_container').show();
                $.fancybox.open([container]);
            }
            else {
                $('#advanced_container').hide();
                $.fancybox.open([container]);    
            }
        });
        //$('#advanced_container').fancybox();
    });

    $('#advanced_container').fancybox({
         type: 'html', 
         width: 410, 
         height: 620,
         autoSize : false, 
         autoCenter: false, 
         fitToView : false,  
         scrolling : 'no' 
    }); 
```

**HTML**

```
<div id="smallAdvanced_container">
    <img src="ribbon.png" alt="Search ribbon">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:14:03.320

根据 Jame 的回答，但如果您设置`overflow: auto !important`了滚动条，您将在需要时获得滚动条，而不是在不需要时获得滚动条。IE：

```
.fancybox-inner {
  overflow: auto !important;
} 
```

您还可以通过使用特定的 css 父选择器将其限制为您可能正在显示的特定类型的幻想框，例如，仅影响显示 iFrame 内容的幻想框，请使用：

```
.fancybox-type-iframe .fancybox-inner {
    overflow: auto !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:04:43.910

在我看来，您好像在正确使用 API，但我不确定您是否可以在不更改插件代码的情况下做到这一点。

我知道一种 CSS 方法，但它必须使用 !important，这有点 hack。只需在您的 CSS 中包含以下内容

```
.fancybox-inner {
  overflow: hidden !important;
} 
```

# sql - 子表没有从 phpMyAdmin 中的父级接收数据

> ID：15270049
> 
> 赞同：0
> 
> 时间：2013-03-07T11:31:42.863
> 
> 标签：sql, database, phpmyadmin

我对phpMyAdmin相当陌生，我遇到了一个问题......

我的数据库中有两个表，`Parent`并且`Child`. 两者都有一个 ID 和用户名字段，并且我已经按工作顺序设置了外键（例如，如果我更改了`Parent.id`，则`Child.id`get 也更改了。

但是，我希望 Child 表会自动为父级中的每个新条目创建一个新记录。所以如果我创建一个新的`Parent.id`，`Child`应该显示新创建的`Parent.id`。

例如，当我向 Parent 中插入一个新用户名时，它将获得 ID 1 和用户名“Daniel”。我希望孩子在`Child.id`和`Child.username`分别拥有这些值，所以孩子也被填满 1，“丹尼尔”。

就目前而言，Child 对于我插入到 Parent 的每条记录都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:34:26.050

父母和孩子之间有1:1的关系吗？（通常我们使用术语“父母”和“孩子”来指代 1:M 关系的两个方面，所以这有点令人困惑。）

你考虑过触发器吗？每次您对父母做某事时，触发器都会以您想要的方式更新孩子。下面介绍[如何](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)在 MySQL 中的 insert 命令中添加触发器。

# c++ - 如何初始化一个管理其数据类型在实例化时传递的缓冲区的类。

> ID：15270050
> 
> 赞同：-3
> 
> 时间：2013-03-07T11:31:42.977
> 
> 标签：c++, variable-types

我需要创建一个 Buffer 类，其构成托管缓冲区的变量类型是在实例化时确定的。因此，我需要一个长 int 字节的缓冲区类，长度为 30 个元素，我将实例化如下内容：

GeneralBuffer myLongBuffer(long int, 30); 或 GeneralBuffer myLongBuffer(LONG, 30);

而如果我需要一个无符号的浮动类型：

GeneralBuffer myFloatingBuffer(unsigend float, 30); 或 GeneralBuffer myLongBuffer(UFLOATING, 30);

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:35:11.733

由于类型是编译时构造，因此您不能将它们作为参数传递给函数。相反，您需要模板。模板允许根据您传递给它的模板类型参数来实例化类或函数的不同实现。因此，如果您有：

```
template <typename T>
class GeneralBuffer
{
  private:
    T* internal_buffer;
  public:
    GeneralBuffer(size_t size);
}; 
```

您可以像这样实例化`GeneralBuffer`并`int`创建该类型的对象：

```
GeneralBuffer<int> my_int_buffer(30); 
```

但是，这看起来像是对[`std::vector`](http://en.cppreference.com/w/cpp/container/vector).

或者，如果缓冲区的大小也是编译时常量，您也可以将其作为模板参数传递：

```
template <typename T, std::size_t N>
class GeneralBuffer
{
  private:
    T internal_array[N];
  public:
    GeneralBuffer();
}; 
```

你会这样使用：

```
GeneralBuffer<int, 30> my_int_buffer; 
```

但是，这看起来像是对[`std::array`](http://en.cppreference.com/w/cpp/container/array).

# arrays - Perl-遍历带有方括号的哈希数组

> ID：15270055
> 
> 赞同：-1
> 
> 时间：2013-03-07T11:32:01.827
> 
> 标签：arrays, perl, hash

我有一个哈希，其键是字符串，键是数组（复杂之处在于数组是在方括号中定义的），所以我的哈希是这样的。

```
model = {
       'add'     =>  [
                      {'name' => 'abc1', 'value' => 'def' },
                      {'name' => 'abc2', value => 'ghi'} 
                     ],
       'remove'  =>  [
                       {'name' => 'abc1', 'value' => 'def' },
                       {'name' => 'abc2', value => 'ghi'}
                     ]
     }; 
```

所以我想要实现的是，当我尝试遍历数组 model->{add} 的哈希时

```
print $_->{name} foreach(model->{add}) 
```

它不起作用。我猜这是因为数组在 [] 而不是 () 中。考虑到输入不能改变。请让我知道如何度过这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:54:09.607

```
$model = { 'add' => [ {'name' => 'abc1', 'value' => 'def' },
                  {'name' => 'abc2', 'value' => 'ghi'} ],
       'remove' => [ {'name' => 'abc1', 'value' => 'def' },
                     {'name' => 'abc2', 'value' => 'ghi'} ] };

print $_->{name} foreach( @{ $model->{add} } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:01:09.867

您有一个 3 级嵌套结构：包含 ArrayRefs 的 HashRef 包含 HashRefs。

```
my $model = { 
    'add' => [ 
        {
            'name' => 'abc1', 
            'value' => 'def' 
        }, {
            'name' => 'abc2', 
            value => 'ghi'
        } 
    ], 
    'remove' => [ 
        {
            'name' => 'abc1', 
            'value' => 'def' 
        }, {
            'name' => 'abc2', 
            value => 'ghi'
        } 
    ] 
}; 
```

要访问这些嵌套数组和散列，您需要通过添加`%`或`@`在其前面取消引用它们，具体取决于它是散列还是数组。

```
my $arrayref = $model->{add};

foreach my $hashref (@$arrayref) {
    print $hashref->{name}, "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:10:32.747

该声明：

```
print $_->{name} foreach(model->{add}) 
```

不起作用，因为`model`它是一个裸词，而不是变量。如果您的代码中有这两个编译指示：

```
use strict;
use warnings; 
```

你将不能犯这样的错误。`warnings`会告诉你：

```
Unquoted string "model" may clash with future reserved word at ...
Name "main::model" used only once: possible typo at ...
Use of uninitialized value in print at ... 
```

并且`strict`会告诉你：

```
Can't use bareword ("model") as a HASH ref while "strict refs" in use at ... 
```

然而，如果你没有启用这两个 pragma，Perl 会很高兴地打印空字符串并对整个事情保持沉默。这使得错误很难被发现。

处理此问题的正确方法是从哈希中获取正确的标量值，并使用正确的符号取消引用它。如果你看关键`'add'`：

```
'add'     =>  [ 
```

您会看到其中存储了一个数组引用，这意味着要使用的符号是`@`. 您需要支持花括号来消除引用的歧义。此外，您必须将变量称为`$model`.

```
print $_->{name} for @{ $model->{add} }; 
```

这与

```
my $adds = $model->{add};
print $_->{name} for @$adds; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:39:27.100

首先也是最重要的用途`use strict; use warnings;`

标量`model`应写为

```
my $model = { 'add' => [ {'name' => 'abc1', 'value' => 'def' }, {'name' => 'abc2', value => 'ghi'} ], 'remove' => [ {'name' => 'abc1', 'value' => 'def' }, {'name' => 'abc2', value => 'ghi'} ] }; 
```

和

```
print $_->{name} foreach( ( @{ $model->{ add } } ) ); 
```

# iphone - 控制台错误：UICollectionView 必须使用非零布局参数初始化

> ID：15270058
> 
> 赞同：3
> 
> 时间：2013-03-07T11:32:14.467
> 
> 标签：iphone, objective-c, xcode, uicollectionview

我是新手`UICollectionView`，我正在学习在 Youtube 上找到的教程，但我遇到了一个我无法弄清楚的错误。

当我使用此代码运行应用程序时：

```
-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {

        return 1;

    }

    -(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {

        return [self.array count];

    }

    -(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

        CollectionCell *aCell = (CollectionCell *)[collectionView dequeueReusableCellWithReuseIdentifier:@"myCell" forIndexPath:indexPath];

        aCell.title.text = self.array[indexPath.row];

        return aCell;

    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.array = @[@"First", @"Second", @"Thirth", @"Fourth"];

    } 
```

在.h中：

```
@property (strong, nonatomic) NSArray *array; 
```

在控制台中，我收到以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'UICollectionView must be initialized with a non-nil layout parameter' 
```

我没有使用情节提要，并且自定义了 CollectionView 您可以在此处看到的内容：

![图片](../Images/4f65e8149426b0a7d4a836563ed6db53.png)

有谁知道为什么我会收到此错误？欢迎一切！

编辑：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.array = @[@"First", @"Second", @"Thirth", @"Fourth"];

    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"myCell"];

    UICollectionViewFlowLayout *flow = [[UICollectionViewFlowLayout alloc] init];
    [flow setItemSize:CGSizeMake(60, 60)];
    [flow setScrollDirection:UICollectionViewScrollDirectionVertical];

    [self.collectionView setCollectionViewLayout:flow];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:39:02.937

注册 uicollectionviewcell 视图类时出错。要解决，请将以下行放入您的代码中：

```
[self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"myCell"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:44:02.433

在方法中注册集合单元`viewDidLoad`::

```
[self.collView registerClass:[mineCell class] forCellWithReuseIdentifier:@"cvCell"]; 
```

在上面的行之后试试这个：

```
UICollectionViewFlowLayout *flow = [[UICollectionViewFlowLayout alloc] init];
[flow setItemSize:CGSizeMake(60, 60)];
[flow setScrollDirection:UICollectionViewScrollDirectionVertical];

[self.collView setCollectionViewLayout:flow]; 
```

这里，`mineCell`是我自定义的collectionViewCell，也可以`[UICollectionViewCell class]`直接使用。

谢谢。

# java - 在java中减去时的最高、最低和答案

> ID：15270061
> 
> 赞同：-4
> 
> 时间：2013-03-07T11:32:30.400
> 
> 标签：java, loops, highest

编写一个程序，接受用户想要输入的整数。确定最高和最低数字，并从最高数字中减去所有其他数字。我无法理解差异。我知道这里不见了。请帮我。

```
import java.util.*;
//Misty Stewart
public class HighestLowestDifference2324 {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        double maxValue = Double.MIN_VALUE;
        double minValue = Double.MAX_VALUE;
        double minValue1 = Double.MAX_VALUE;
        double minValue2 = Double.MAX_VALUE;

        int count = 0;
        double difference = 0;

        System.out.println("Enter numbers. Terminate with Q.");
        while (input.hasNextDouble()) {

            double Value = input.nextDouble();

            if (Value > maxValue) {
                maxValue = Value;
            }
            if (Value < minValue) {
                minValue = Value;
            }
            if (Value < minValue) {
                minValue1 = Value;
            }
            if (minValue == minValue1) {
                minValue = Value;
            }
            if (Value < minValue1) {
                minValue2 = Value;
            }
            if (minValue1 == minValue2) {
                minValue1 = Value;
            }
        }
        count++;
        difference = maxValue - minValue;
        {
            if (count > 0) {
                System.out.println("Highest no. is: " + maxValue);
                System.out.println("Lowest no. is: " + minValue);
                System.out.println("The difference from the highest is: \n" + difference);
            } else {
                System.out.println("Have a good day!");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:41:49.583

您需要将用户输入的值存储在一个数组中。然后，一旦你有了`maxVAlue`，用循环遍历数组并计算并显示差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:42:24.263

```
while (input.hasNextDouble()) {
 num = input.nextDouble();
 if ( num > max ) max = num;
 if ( num < min ) min = num;
}

difference = max -min; 
```

上面的代码可用于从数字列表中获取最高、最低和它们的差异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:43:31.530

您可能应该将所有输入数字存储在 a`Collection`中，例如 an `ArrayList`，然后进行分析：

```
ArrayList<Double> list = new ArrayList<Double>();
while (input.hasNextDouble()) {
  double value = input.nextDouble();

  // logic for determining largest & smallest

  list.add(value);
} 
```

然后迭代`ArrayList`以获得您想要的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:56:25.303

这个怎么样：

```
 double maxValue = Double.MIN_VALUE;
    double minValue = Double.MAX_VALUE;
    List<Double> allValues = new ArrayList<Double>();
    while (input.hasNextDouble()) {
        double value = input.nextDouble();
        maxValue = Math.max(maxValue, value);
        minValue = Math.min(minValue, value);

        allValues.add(value);
    }

    System.out.println("Highest no. is: " + maxValue);
    System.out.println("Lowest no. is: " + minValue);
    System.out.println("The difference from the highest is:" + (maxValue - minValue));
    for (Double value : allValues) {
        System.out.println("The difference from the highest is:" + (maxValue - value));
    } 
```

# ajax - 为什么我的 ajax 内容没有被谷歌索引

> ID：15270069
> 
> 赞同：0
> 
> 时间：2013-03-07T11:32:42.543
> 
> 标签：ajax, seo, google-crawlers

我已尝试根据此处列出的指南设置我的网站（ [http://www.diablo3values.com ）：](http://www.diablo3values.com) [https](https://developers.google.com/webmasters/ajax-crawling/) ://developers.google.com/webmasters/ajax-crawling/ 但是，谷歌似乎已经更新了他们的索引（因为我看到了对元描述标签的修订），但是 ajax 内容没有出现在索引中。

我正在尝试使用“处理没有散列片段的页面”选项。

如果您查看以下任一情况：

[http://www.diablo3values.com/?_escaped_fragment_=](http://www.diablo3values.com/?_escaped_fragment_=)

[http://www.diablo3values.com/about?_escaped_fragment_=](http://www.diablo3values.com/about?_escaped_fragment_=)

您将正确地看到包含我的内容的 HTML 快照。（这是我最关心的两页）。

有任何想法吗？难道我做错了什么？你如何让谷歌正确识别标签。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-06T13:37:35.060

我正在输入这个作为答案，因为它有点太长才能成为评论。

首先，您的链接似乎指向`localhost:8080/about`，而不是`/about`，这可能是谷歌一开始不索引它的原因。

其次，这是我对 pushstate url 和 Google AJAX 抓取的经验：

我的经验是，谷歌对使用 pushstate url 的 ajax 爬行的处理方式与使用 hashbang url 的处理方式略有不同。由于 google 不会知道您的 url 是 pushstate url（因为它看起来就像一个常规 url），所以您需要添加`<meta name="fragment" content="!">`到所有页面，而不仅仅是“根”页面。而且 google 似乎并不知道这些页面是同一个应用程序的一部分，因此它将每个页面都视为一个单独的 Ajax 应用程序。因此，Google bot 永远不会真正在内部创建导航结构`_escaped_fragment_`，例如`_escaped_fragment_=/about`使用 hashbang url ( `#!/about`)。相反，它会请求`/about?_escaped_fragment_=`（您显然已经设置了）。这适用于您的所有“深层链接”。而不是`/?_escaped_fragment_=/thelink`，google 将始终请求`/thelink?_escaped_fragment_=`.

但正如最初所说，它对您不起作用的原因可能是因为您在生成的 html中有`localhost:8080`url 。`_escaped_fragment_`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:57:39.873

如果您的 url 符合 hash bang 标准，Googlebot 只知道抓取转义的片段。当用户浏览您的网站时，您的网址需要：

```
http://www.diablo3values.com/
http://www.diablo3values.com/#!contact
http://www.diablo3values.com/#!about 
```

Googlebot 实际上需要在源代码中查看这些 url，以便它可以跟踪它们。然后它知道下载以下网址：

```
http://www.diablo3values.com/?_escaped_fragment=contact
http://www.diablo3values.com/?_escaped_fragment=about 
```

在您的网站上，您似乎在每次点击时加载一个新页面，然后也通过 AJAX 加载每个页面的内容。这不是我期望 AJAX 站点工作的方式。通常使用 AJAX 的目的是让用户永远不必加载一个全新的页面。当用户点击时，新的内容部分被加载并插入到页面中。*您提供一次*导航，然后只提供内容的转义片段。

# javascript - 使用 HTML 标签或 javascript 缩放网页

> ID：15270074
> 
> 赞同：1
> 
> 时间：2013-03-07T11:32:55.980
> 
> 标签：javascript, html

如何使用 HTML 标签或 javascript 设置网页的缩放。我需要在 Internet Explorer 9 上渲染一个具有 85% 缩放属性的网页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:34:37.813

使用Javascript；简单的例子

`document.body.style.zoom="85%"`

或 CSS：

```
body {
  zoom: 85%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:34:57.283

试试这个

document.body.style.zoom = "85%";

# node.js - Express js：Google Oauth Api 返回“临时移动”

> ID：15270079
> 
> 赞同：0
> 
> 时间：2013-03-07T11:33:34.087
> 
> 标签：node.js, express, google-oauth

我正在尝试使用 google oauth api 登录到我的网站。我正在使用 HTTP 请求，但我得到一个 302 http 代码（重定向/临时移动），我不知道该做什么以及如何去做。我想我应该使用新位置发出另一个 http 请求，但我不知道如何获取它。

这是我正在使用的核心：

```
var redirectUri = encodeURIComponent("http://localhost:3000/user/login/oauth2"); 
var clientId = "322263763991.apps.googleusercontent.com";
var clientSecret = "********************";

var dataPath    = "/o/oauth2/token"
                            + "?code="                  + cod 
                            + "&client_id="         + clientId 
                            + "&client_secret=" + clientSecret 
                            + "&redirect_uri="  + redirectUri 
                            + "&grant_type=authorization_code";

var options = {
      host: 'accounts.google.com',
      path: dataPath,
      method: 'POST'
    };

    var req = http.request(options, function(res) {

      console.log('STATUS: ' + res.statusCode);
      console.log('HEADERS: ' + JSON.stringify(res.headers));
      res.setEncoding('utf8');
      res.on('data', function (chunk) {
        console.log('X_BODY: ' + chunk);
      });
    });

    req.on('error', function(e) {
      console.log('problem with request: ' + e.message);
    });

    req.write('data\n');
    req.write('data\n');
    req.end(); 
```

# android - 在自动完成文本视图中添加一个字符正在进入谷歌搜索屏幕 android

> ID：15270082
> 
> 赞同：3
> 
> 时间：2013-03-07T11:33:38.383
> 
> 标签：android, autocompletetextview, google-search, android-keypad

当我输入一个字符时，我有一个 AutoCompleteTextview，然后有时它会导致 android 的 Google 搜索屏幕。我不知道你是这样的。

AutoCompleteTextview 的布局声明为：

```
 <AutoCompleteTextView
        android:id="@+id/search_box"
        style="@style/AutoSuggestList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bar_search"
        android:maxLength="1024" 
        android:dropDownWidth="match_parent"
        android:ellipsize="end"
        android:hint="@string/hint_In_searchBar"
        android:inputType="text|textNoSuggestions"
        android:paddingLeft="11dp"
        android:layout_alignParentRight="true"
        android:singleLine="true"
         >

    </AutoCompleteTextView> 
```

此视图的右上角还有一个搜索图标。但仅输入一个字符本身就会导致 Google 搜索。示例图片：（[来源：][[fonearena.com](http://images.fonearena.com/blog/wp-content/uploads/2012/01/Google-Search-for-Android.jpg)][）][![谷歌搜索示例图片](../Images/448c58bdbef0c2271386724846278bae.png)](https://i.stack.imgur.com/loiVF.jpg)

我发现此问题的设备：三星 Galaxy S，操作系统版本：2.3.4

请有相同的建议。？

# java - 选择声卡通道输出

> ID：15270083
> 
> 赞同：1
> 
> 时间：2013-03-07T11:33:38.327
> 
> 标签：java, audio, javasound, javax.sound.sampled

我将在 java 程序中将一些音频输出到具有多个通道（8 个通道）的声卡。为此，我想在声卡上的不同通道上发送不同的声音（以便可以在不同的扬声器上播放）发送的音频是不同的文件（可能是 mp3）。

有人对如何使用 java 执行此操作有任何建议吗？到目前为止，我尝试过的是 javax.sound.sampled 库。我确实设法在扬声器上发出了一些声音，但没有决定使用哪些频道。我尝试过使用 Port.Info，但似乎无法处理它的语法。

这是到目前为止的代码，这项工作：

```
// open up an audio stream
private static void init() {
    try {
        // 44,100 samples per second, 16-bit audio, mono, signed PCM, little Endian
        AudioFormat format = new AudioFormat((float) SAMPLE_RATE, BITS_PER_SAMPLE, 1, true, false);
        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);
        //Port.Info port = new Port.Info((Port.class), Port.Info.SPEAKER, false);

        //Port.Info pi = new Port.Info((Port.class), "HEADPHONES", false);

        line = (SourceDataLine) AudioSystem.getLine(info);
        //line = (SourceDataLine) AudioSystem.getLine(port);
        line.open(format, SAMPLE_BUFFER_SIZE * BYTES_PER_SAMPLE);

        // the internal buffer is a fraction of the actual buffer size, this choice is arbitrary
        // it gets divided because we can't expect the buffered data to line up exactly with when
        // the sound card decides to push out its samples.
        buffer = new byte[SAMPLE_BUFFER_SIZE * BYTES_PER_SAMPLE/3];
    } catch (Exception e) {
        System.out.println(e.getMessage());
        System.exit(1);
    }

    // no sound gets made before this call
    line.start();
} 
```

# android - 如何知道我的 Activity 何时完全创建？

> ID：15270084
> 
> 赞同：3
> 
> 时间：2013-03-07T11:33:38.820
> 
> 标签：android, multithreading, android-activity

我有一个包含大量数据和元素的活动。

当它有太多信息时，**活动等待**显示为白色，这不是我想要的，我实际上想在**加载数据时显示一个活动**。

那么，我怎样才能知道我的活动何时完全创建？

我的意图是在第二个线程中启动整个等待活动的活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:39:53.063

如果需要很长时间来加载，您应该在另一个线程中异步加载该数据。启动另一个线程（通过使用 AsyncTask 例如普通的 Java 线程），加载数据并在 Activity 上显示一些加载视图，通知用户后台正在发生某些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:37:57.633

在活动中创建后调用此方法

```
@Override
    public void onStart() {
        super.onStart();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:42:54.517

您可以使用 AsyncTask 并显示进度对话框，直到加载数据。

```
private class FetchRSSFeeds extends AsyncTask<String, Void, Boolean> {

  private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

  protected void onPreExecute() {
    this.dialog.setMessage(getResources().getString(
            R.string.Loading_String));
    this.dialog.show();
  }

protected Boolean doInBackground(final String... args) {
    try {

        // Fetch the data from URL
        // do background process

        return true;
    } catch (Exception e) {
        Log.e("tag", "error", e);
        return false;
    }
}

@Override
protected void onPostExecute(final Boolean success) {

    if (dialog.isShowing()) {
        dialog.dismiss();
    }

    if (success) {
        // Setting data to list adaptar
        setListData();
    }
} 
```

# ios - 在没有 segues 的视图控制器之间传递数据

> ID：15270085
> 
> 赞同：3
> 
> 时间：2013-03-07T11:33:41.690
> 
> 标签：ios, uiviewcontroller

我正在使用情节提要，并且我有一个加载动态按钮的视图。单击此按钮时，我需要加载第二个视图控制器并传递数据。我不能使用 segue 作为它的动态按钮。

我使用以下代码加载第二个视图控制器

```
UIStoryboard*  sb1 = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone"
                                                           bundle:nil];
UIViewController* vc1 = [sb1 instantiateViewControllerWithIdentifier:@"SecondViewController"];

[self.navigationController pushViewController:vc1 animated:YES]; 
```

在第二个视图控制器中，我需要从第一个视图控制器访问大约 5 个字段。我如何传递数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:38:54.913

尝试这样的事情：

A级

```
// CLASS_A.h
#import <UIKit/UIKit.h>
@interface CLASS_A : UIViewController {
    ...
}
- (IBAction)Btn_PushPressed:(id)sender;
...
@end

// CLASS_A.m
#import "CLASS_A.h"
#import "CLASS_B.h"
@implementation CLASS_A

- (IBAction)Btn_PushPressed:(id)sender
{
    UIStoryboard*  sb1 = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone"
                                                       bundle:nil];
    CLASS_B* vc1 = [sb1 instantiateViewControllerWithIdentifier:@"SecondViewController"];
    vc1.delegate = self;
    [self.navigationController pushViewController:vc1 animated:TRUE];
}

....
@end 
```

B类

```
// CLASS_B.h
#import <UIKit/UIKit.h>
@class CLASS_A;
@interface CLASS_B : UIViewController {
    ...
}
@property (weak, nonatomic) CLASS_A *delegate;
....
@end

// CLASS_B.m
#import "CLASS_B.h"
#import "CLASS_A.h"
@implementation CLASS_B
....
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:13:06.233

您可以通过 ctrl+拖动从第一个控制器到第二个控制器创建一个不绑定到按钮的 Segue（不要忘记提供此 segue 和标识符）。

Next 在按钮的 IBAction 中（通过 Interface Builder 或 via 设置`addTarget:self action:forControlEvents:`），您可以调用`[self performSegueWithIdentifier:@"YourSegueIdentifier" sender:button];`

您可以像往常一样将数据传递给第二个控制器`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-29T13:21:20.260

这就是在 Swift 2.0 中的做法。而不是使用`prepareForSegue`,

> **斯威夫特 3.0**

```
let someViewConroller = self.storyboard?.instantiateViewController(withIdentifier: "SomeViewController") as! SomeViewController
someViewConroller.someObject = self.someObject!
self.navigationController?.pushViewController(someViewConroller, animated: true) 
```

> **斯威夫特 2.0**

```
let someViewConroller = self.storyboard?.instantiateViewControllerWithIdentifier("SomeViewController") as! SomeViewController
someViewConroller.someObject = self.someObject!
self.navigationController?.pushViewController(someViewConroller, animated: true) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-28T11:08:57.493

斯威夫特 3

```
let destinationView = self.storyboard?.instantiateViewController(withIdentifier: "ID") as! ViewController2
destinationView.Value2 = Value1
self.present(destinationView, animated: true, completion: nil) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-03T09:57:10.950

你可以简单地使用

> NSUserDefaults

存储数据并在您需要的任何页面中检索

在视图控制器 A

```
[[NSUserDefaults standardUserDefaults] setObject:aData forKey:@"DATA"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

在目标控制器中

```
NSData * aData = [[NSUserDefaults standardUserDefaults] valueForKey:@"DATA"]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T11:42:13.623

首先，即使您有动态按钮，您也可以使用 segue，只需将目标方法添加到 UIButtons 并在该方法中使用 segue 推送视图控制器。在第二个视图控制器中，在推送第二个视图控制器之前获取一些属性并为这些属性分配值。像：

```
UIStoryboard*  sb1 = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone"
                                               bundle:nil];
UIViewController* vc2 = [sb1 instantiateViewControllerWithIdentifier:@"SecondViewController"];

[vc2 setName:@"name"];
[self.navigationController pushViewController:vc2 animated:YES]; 
```

在此之前，您需要将属性分配给 SecondViewController 中的 NSString *name

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-05T04:02:02.297

你可以定义一个协议：PassValueDelegate，在第一个viewController中你可以实现这个协议。

```
UIStoryboard*  sb1 = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
UIViewController* vc1 = [sb1 instantiateViewControllerWithIdentifier:@"SecondViewController"];
//set the delegate for the second view controller,so you can access the values in the first controller
vc1.delegate = self;
[self.navigationController pushViewController:vc1 animated:YES]; 
```

# java - getEmbeddedPicture：当我放置多个 mp3 文件时，调用 getEmbeddedPicture 失败

> ID：15270088
> 
> 赞同：1
> 
> 时间：2013-03-07T11:33:46.660
> 
> 标签：java, android, android-file

我有一个问题：我实现了一个 android 项目，当我按下按钮时它会播放一首歌曲。它还在另一个视图（应用程序有两个片段）中显示 mp3 文件的元数据。我的意思是元数据解释器的名称，songcover ...我在原始目录中只有一个 mp3 文件。但是当我在原始目录中放置另一个 mp3 文件时（仅此而不更改代码），元信息突然消失了。结果为空。这些不再显示。当我删除一个 mp3 文件时，它再次显示元数据。能告诉我为什么我不能在原始目录中放另一个 mp3 文件吗？我不明白。:( 我没有改变代码，只放了另一个 mp3 文件。然后它不起作用。

我该如何解决？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T05:17:57.543

尝试像在 AsyncTask 中加载每个：

```
private class LoadImageTask extends AsyncTask<String, Void, Bitmap>{

    private ImageView artImage;

    public LoadImageTask(ImageView image){
        artImage = image;
    }

    @Override
    protected void onPreExecute() {
        retriever = new MediaMetadataRetriever();
    }

    @Override
    protected Bitmap doInBackground(String... params) {
        retriever.setDataSource(params[0]);
        byte[] art = retriever.getEmbeddedPicture();
        Bitmap bitmap = null;
        if( art != null ){
            bitmap = BitmapFactory.decodeByteArray(art, 0, art.length);
        }
        return bitmap;
    }

    @Override
    protected void onPostExecute(Bitmap bm) {
        if( bm != null ){
            artImage.setImageBitmap(bm);
        }
        else{
            artImage.setImageResource(R.drawable.no_image);
        }
    }

} 
```

# ruby-on-rails - 将 current_user 添加到评论中

> ID：15270092
> 
> 赞同：0
> 
> 时间：2013-03-07T11:33:51.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3

编辑：我在我的 rails 应用程序中创建了一个新模型，用户可以在其中评论指南。我希望它自动将 current_user 分配为评论者。我在确定如何分配“评论者”（无论是否为 current_user）方面遇到了真正的问题。我现在对属性和关系完全感到困惑，如果有人可以提供帮助，我将不胜感激

正如下面的代码所示 - 我似乎无法分配任何内容作为评论者。我可以创建一个新的评论（正文），但似乎根本无法分配评论者（它的值为'nil）

评论控制器.rb

```
 def create
            @guideline = Guideline.find(params[:guideline_id])
            @comment = @guideline.comments.create params[:comment].merge(commenter: current_user)
            redirect_to guideline_path(@guideline)
        end 
```

评论.rb（模型）

```
class Comment < ActiveRecord::Base
 belongs_to :guideline
 belongs_to :commenter, class_name: 'User'
 belongs_to :user

  attr_accessible :body, :commenter
    end 
```

guideline.rb（模型）

```
belongs_to :user
has_many :favourite_guidelines
has_many :comments, :dependent => :destroy 
```

数据库迁移有

```
create_table :comments do |t|
      t.string :commenter
      t.text :body
      t.references :guideline

      t.timestamps
    end
    add_index :comments, :guideline_id 
```

我的 _form 有

```
<%= f.input :commenter %>
<%= f.input :body, label: 'Comment', as: :text, :input_html => { :cols => 200, :rows => 3 } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:34:24.980

您的评论者属性是一个字符串，它不起作用。将您的迁移更改为：

```
create_table :comments do |t|
  t.references :commenter
  # ...
end 
```

此外，`belongs_to :user`从您的 Comment 模型中删除该位，`:commenter_id`而不是添加`:commenter`到您的 attr_accessible 并更改创建评论的方式：

```
@comment = @guideline.comments.build params[:comment].merge(commenter_id: current_user.id)
@comment.save 
```

在这些更改之后，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:40:23.780

假设以下关联

```
# comment.rb
belongs_to :commenter, class_name: 'User' 
```

尝试

```
# controller
@comment = @guideline.comments.create params[:comment].merge(commenter_id: current_user.id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:37:55.260

```
class Comment < ActiveRecord::Base
  before_validation :current_user_makes_the_comment

  private
    def current_user_makes_the_comment
      self.user_id = current_user.id
    end
end 
```

或尝试使用`current_user.build`语法并`guideline_id`在`create`方法中传递

# asp.net-web-api - 内存中 HTTP 服务器 Asp.net WebAPI

> ID：15270096
> 
> 赞同：2
> 
> 时间：2013-03-07T11:33:59.520
> 
> 标签：asp.net-web-api, integration-testing

我试图了解基于自主机配置的集成测试是如何运行的。

在下面的代码中，我是否应该使用 WebApiConfig 注册我的配置。注册与否似乎没有区别。

整个管道真的在测试还是这是一种错觉？因为，如果我没有使用我的 API 中定义的配置和路由，而是像我在这里所做的那样声明我自己的，我可能只是没有测试完整的管道。

有没有其他方法可以完全测试 api。除了我的管道（如客户端、SelfHosting 等）之外，下面的代码还测试了很多东西。这对我来说似乎有点矫枉过正。有任何想法吗 ？

```
var config = new HttpSelfHostConfiguration("http://localhost:9090/");

                config.Routes.MapHttpRoute("Default", "{api}/{controller}/{id}", new { id =  RouteParameter.Optional });

            config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;

            MyApiProject.WebApiConfig.Register(config);

            using (var server = new HttpSelfHostServer(config))
            {
                server.OpenAsync().Wait();
                using (var client = new HttpClient())
                {
                    using (var response = client.PostAsync("http://localhost:9090/api/login",
                                            new FormUrlEncodedContent(new List<KeyValuePair<string,string>>                                                                        {      new KeyValuePair<string, strin("Foo","Bar)}), CancellationToken.None).Result)
                    {
                        Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
                    }

                    using (var response = client.GetAsync("http://localhost:9090/api/login").Result)
                    {
                        Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
                    }
                }
                server.CloseAsync().Wait();
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:06:09.123

如果你只是想测试你的控制器，你可以编写更有针对性的单元测试来测试它们。如果你想测试完整的管道，你的代码看起来不错，除了使用 selfhost，你可以只使用 HttpServer 来节省网络开销。此外，如果您正在测试完整的管道，最好使用实际应用程序中的路由，而不是添加新路由，因为这也会测试路由。

此外，有关测试 Web API 的一些想法，请参阅 Youssef 的这篇博客[文章](http://blogs.msdn.com/b/youssefm/archive/2013/01/28/writing-tests-for-an-asp-net-webapi-service.aspx)。

# mongodb - 通过命令行正确卸载 MongoDB

> ID：15270103
> 
> 赞同：0
> 
> 时间：2013-03-07T11:34:14.363
> 
> 标签：mongodb, ubuntu

我已经在 Ubuntu 12.10 盒子中从源代码安装了 MongoDB 版本**i686-2.2.3 。**现在我想删除它。

我怎样才能正确地做到这一点？

最良好的祝愿，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:38:13.467

如果您从源代码安装，您将不会编译它，而是只需提取它进来的 tar 并运行它。

您需要做的第一件事是弄清楚您放了哪些额外的东西，即：`init.d`脚本。

一旦您删除了您创建的所有其他线程，您可以删除包含 mongo 二进制文件的目录，通常是`mongo`在大多数系统上调用的文件夹，然后您需要删除您的数据目录，通常`/data/db/`在源版本下。

当然，这假设您是从源代码而不是软件包安装的，如果您是从软件包安装的，您可以执行以下操作：

```
apt-get remove --purge mongodb 
```

### 编辑

或者，如果您使用的是`autoremove`：

```
apt-get autoremove --purge mongodb 
```

# jquery - jQuery qTip 调整滚动和目标鼠标

> ID：15270104
> 
> 赞同：0
> 
> 时间：2013-03-07T11:34:16.047
> 
> 标签：jquery, scroll, qtip

如何将 qTip 插件 ( [http://craigsworks.com/projects/qtip/](http://craigsworks.com/projects/qtip/) ) 与目标鼠标一起使用并滚动调整为假？

我把我的例子放在这里：http: [//jsfiddle.net/3XyZL/](http://jsfiddle.net/3XyZL/) 只需点击 div 并向下或向上滚动。我希望那个 qtip 不动。

我的 qtip 配置是：

```
$('#chart_div').qtip({
    position: {
        adjust: { 
            mouse : false,
            scroll: false
        },
        target: 'mouse'
    },
    style: { width: { min: 485 } },
    content:{
        title: {
            text: 'TITLE',
            button: 'X'
        },
    },
    show:{
        when : false
    },
    hide: { when: 'click'}
}); 
```

提前致谢

# javascript - 如何将 Google Maps 设置为两色地图？

> ID：15270105
> 
> 赞同：4
> 
> 时间：2013-03-07T11:34:17.893
> 
> 标签：javascript, google-maps-api-3

我正在尝试使用 Google Maps API 创建一个双色调地图。我尝试使用此向导创建自定义代码，但是当您放大地图时，您可以看到某些区域（我不确定它们是什么）为白色或绿色。我想知道是否有一种快捷方式可以只为土地指定一种颜色，为水指定一种颜色。

这是我的样式代码。

```
var styles = [
            {
                featureType: "water",
                elementType: "geometry",
                stylers: [
                    { color: '#193a70' },
                    { visibility: "on" }
                ]
            },{
                featureType: "landscape",
                 elementType: "geometry.fill",
                stylers: [
                    { "color": "#2c5ca5" }
                ]

            }
        ]; 
```

[JSFiddle 中的示例](http://jsfiddle.net/xrHar/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:43:54.590

[更新了 JSFiddle](http://jsfiddle.net/xrHar/2/)

这是修复，我缺少“兴趣点”或“poi”以及其他各种元素。

```
 var styles = [
            {
                featureType: "water",
                elementType: "all",
                stylers: [
                    { color: '#193a70' },
                    { visibility: "on" }
                ]
            },
            {
             featureType: "road",
              stylers: [
               { "visibility": "off" }
                  ]
                 },
          {
              featureType: "transit",
   stylers: [
   { "visibility": "off" }
      ]
    },{
       featureType: "administrative",
 stylers: [
   { "visibility": "off" }
    ]
 },  {
    featureType: "landscape",
                 elementType: "all",
                stylers: [
                    { "color": "#2c5ca5" }
                ]
                },{
                featureType: "poi",
                 stylers: [
                 { "color": "#2c5ca5" }

                ]
            },
            {
     elementType: "labels",
stylers: [
  { "visibility": "off" }
]
}
        ]; 
```

# r - R - 获取 RasterLayer 的特定波段

> ID：15270107
> 
> 赞同：3
> 
> 时间：2013-03-07T11:34:24.050
> 
> 标签：r, raster

A 有一个带有 4 个波段的 RasterLayer：

```
 >rx<-raster("/media/karimdion/Passport/Essais/po_3804017_bgrn_0000000 tif")
    > str(rx)
      Formal class 'RasterLayer' [package "raster"] with 12 slots
  @ file    :Formal class '.RasterFile' [package "raster"] with 12 slots
      @ nbands      : int 4
      @ bandorder   : chr "BIL"
 @ data    :Formal class '.SingleLayerData' [package "raster"] with 13 slots
      @ min       : num 0
      @ max       : num 65535
      @ band      : int 1
@ history : list()
@ title   : chr(0) 
@ extent  :Formal class 'Extent' [package "raster"] with 4 slots
      @ xmin: num 655781
      @ xmax: num 666701
      @ ymin: num 4071522
      @ ymax: num 4084598
@ rotated : logi FALSE
@ rotation:Formal class '.Rotation' [package "raster"] with 2 slots
      @ geotrans: num(0) 
      @ transfun:function ()  
@ ncols   : int 5460
@ nrows   : int 6538
@ crs     :Formal class 'CRS' [package "sp"] with 1 slots
      @ projargs: chr "+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"
@ z       : list() 
```

我想将单个变量中的每个波段作为 RasterLayer。因此，我将得到 4 个具有 1 个波段的 RasterLayers。我怎么能用 R 做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-12T17:19:15.253

使用文件名 f（此处使用示例文件进行重现）

```
 f <- system.file("external/rlogo.grd", package="raster") 
```

对于特定的乐队，你可以做

```
 r <- raster(f, band=2) 
```

或适用于所有乐队

```
 b <- brick(f) 
```

或（效率较低）：

```
 s <- stack(f) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T11:48:12.103

你应该能够做到：

```
f <- "/media/karimdion/Passport/Essais/po_3804017_bgrn_0000000 tif"
rx<-raster(f)
for( i in 1:rx@file@nbands ){
  assign( paste("rx" , i , sep = "." , raster(f, band=i)
} 
```

这应该为您提供四个文件，`rx.1`, `rx.2`, `rx.3`, `rx.4`，一个用于光栅文件的每个波段。我确信有一种更好（更有效和更正确的“光栅”）方法可以做到这一点，但我现在不记得了。

# login - Parse.com - 仅使用电子邮件进行用户登录

> ID：15270109
> 
> 赞同：2
> 
> 时间：2013-03-07T11:34:29.473
> 
> 标签：login, parse-platform

使用 Parse 提供的默认登录和注册视图，我是否可以避免要求用户选择用户名而只使用电子邮件作为用户标识符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:34:29.473

[由 Parse 支持团队] 您可以将用户名字段上的占位符标签更改为“电子邮件地址”，您可以隐藏登录视图控制器上的正常电子邮件地址字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-03T02:01:19.017

```
signUpController.signUpView.emailAsUsername = true 
```

# sql - 在部门和等级的分组后获取每个部门的计数的最大值

> ID：15270114
> 
> 赞同：0
> 
> 时间：2013-03-07T11:34:42.870
> 
> 标签：sql

我的查询获取每个年级每个部门的员工人数。

```
select dept , grade , count(1) CNT
from mytable 
group by dept , grade
order by dept , cnt desc; 
```

现在我需要从中获得每个部门的最大数量的成绩。

输出应该是

```
dept  grades MAX(count) 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:37:33.937

最好的方法是使用以下`row_number()`功能：

```
select dept, grade, cnt
from (select dept, grade, count(*) as cnt,
             row_number() over (partition by dept order by count(*) desc) as seqnum
      from mytable t
      group by dept, grade
     ) t
where seqnum = 1 
```

# sql - sql - 同一基础上的关联表

> ID：15270119
> 
> 赞同：1
> 
> 时间：2013-03-07T11:34:58.247
> 
> 标签：sql

我们有一个名为的表`Users`，其中包含一个简单的 ID 作为主键。我们将如何实现一个表来描述用户朋友？关联表将是我们当前的方法，但是让两个外键都指向同一个主键对我来说似乎有点奇怪。

关于如何实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:38:56.387

这里没什么奇怪的，应该是这样的：

```
create table Friends (
    userId INT references Users(ID),
    friendId INT references Users(ID)
) 
```

# mysql - ActiveRecord：从自定义查询中获取插入的行数

> ID：15270122
> 
> 赞同：0
> 
> 时间：2013-03-07T11:35:04.243
> 
> 标签：mysql, ruby-on-rails, activerecord

我有一些自定义查询使用`LOAD DATA INFILE and INSERT INTO ... SELECT syntax`（当然，有充分的理由）。

目前，我使用`MyModelName.connection.execute`. 但是，我想获得用于跟踪的插入数量。

当我使用`MyModelName.connection.insert_sql`时，它总是返回 0。

当我使用`MyModelName.connection.update_sql`, 对于 INSERT IGNORE 它返回未忽略的行数，这是我第一次想要的，但是在更新有几个未修改的条目时，它太低了。对于 REPLACE，这甚至会返回两倍的数字（我猜它对非重复行计为 1，当存在重复时，它对删除计为 1，对插入部分计为 1）。

计算导入 CSV 中的行数或之后运行 COUNT 请求是可能的，但两者都会花费不必要的时间，我希望 MySQL 可能会返回一些我可以使用的东西。

# objective-c - 核心数据 - 使用数组的确切元素获取对象过滤数据

> ID：15270124
> 
> 赞同：2
> 
> 时间：2013-03-07T11:35:07.980
> 
> 标签：objective-c, core-data, nspredicate, one-to-many, nsexpression

我有 3 个实体：`object`、`object_tag`和`tag`，并且我必须仅通过其 id 获取与标签数组匹配的对象，而不仅仅是一个标签，而是与数组中的所有标签完全匹配。如果数组有 3 个标签，则返回具有这 3 个标签的所有对象，不多不少。

实体如下：

```
object
{
    id
    name
    -----
    tags <--->> object_tags
}

object_tag
{
    id
    id_object
    id_tag
    -----
    object <---> tags
    tag <---> objects
}

tag
{
    id
    name
    -----
    objects <--->> object_tags
} 
```

使用谓词和/或表达式我怎样才能得到我想要的？我尝试了很多方法，但我得到的只是包含数组中任何标签的对象，但不是一次包含所有标签。

**编辑1：**

对不起，我忘了澄清一些关于人际关系的事情。实体`object`和`tag`指向`object_tag`包含对象标签对的中间实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:32:03.437

*对象*实体的以下谓词*应该*起作用：

```
NSArray *tagIds = @[ @1, @4, @7 ]; // Your set of tag ids
[NSPredicate predicateWithFormat:@"(object_tags.@count == %d) AND (SUBQUERY(object_tags, $x, $x.tag.id IN %@).@count == %d)",
                      tagIds.count, tagIds, tagIds.count]; 
```

其中是从*object*到 *object_tag*`object_tags`的一对多关系，是从 *object_tag* 到*tag*的一对一关系。*`tag`*

 **`object`如果您将对象模型简化为和之间的多对多关系`tag`（正如 David Ravetti 在评论中所建议的那样），那么谓词将如下所示：

```
[NSPredicate predicateWithFormat:@"(tags.@count == %d) AND (SUBQUERY(tags, $x, $x.id IN %@).@count == %d)",
                      tagIds.count, tagIds, tagIds.count]; 
```

如果您只想检查对象是否具有给定数组中的所有标签（但可能有更多标签），那么您可以将查询简化为

```
[NSPredicate predicateWithFormat:@"SUBQUERY(tags, $x, $x.id IN %@).@count == %d",
                      tagIds, tagIds.count]; 
```**

# java - 动态指定返回数组列表的对象类型

> ID：15270133
> 
> 赞同：0
> 
> 时间：2013-03-07T11:35:38.507
> 
> 标签：java, types, casting, arraylist

我有以下类，它接受一个接口并执行一些功能：

```
public class MSSQLHandler {

    IMSSQLStatement statement;

    public MSSQLHandler(IMSSQLStatement statement) {
        this.statement = statement;
    }

    public void invoke() throws SQLException {
        statement.executeStatement();
    }

    public List<?> getDataList() throws SQLException {
        return statement.getDataList();
    }
} 
```

该接口由一个抽象类实现：

```
public abstract class MSSQLStatement implements IMSSQLStatement {

    protected Connection conn = null;
    protected ResultSet rs = null;

    protected abstract String createStatement() throws SQLSyntaxErrorException;

    public MSSQLStatement(Connection conn) {    
       this.conn = conn;
    }

    public void executeStatement() throws SQLException {    
       Statement st = conn.createStatement();
       String sql = createStatement();
       if(sql != null) {
          rs = st.executeQuery(createStatement());
       } else {
          throw new SQLException("Method 'createStatement()' has to be implemented.");
       }
    }    
} 
```

传递给处理程序类的类（或接口）从上面扩展抽象类：

```
public class MSSQLTaskStatement extends MSSQLStatement {

    public MSSQLTaskStatement(Connection conn) {
    super(conn);
    }

    private String projectName = null;

    public void setProjectName(String projectName) {
    this.projectName = projectName;
    }

    protected String createStatement() throws SQLSyntaxErrorException {
      // Create SQL query
    }

    @Override
    public List<MyObjectData> getDataList() throws SQLException {
      // Wrap results into a data object and save it to an array list
      List<MyObjectData> l = new ArrayList<MyObjectData>()
      while(rs.next()) {
         MyObjectData o = new MyObjectData();
         o.setColumn1(rs.getString(1))
         l.add(o);
      }
      return l;
    }
} 
```

问题是是否可以将被覆盖方法`MyObjectData`的返回列表的对象类型（）从类传递给处理程序类方法？`getDataList()``MSSQLTaskStatement``public List<?> getDataList() throws SQLException`

最好的问候， 桑德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:52:32.863

给and添加类型参数`<T>`or ，把IMSSQLStatement中的getDataList方法改成and使用。`<T extends ObjectDataBaseClass>``IMSSQLStatement``MSSQLStatement``List<T> getDataList()``public class MSSQLTaskStatement extends MSSQLStatement<MyObjectData>`

Then, if your `MSSQLHandler` has a field `IMSSQLStatement<MyObjectData> statement`, its own `getDataList()` can type-safely return a `List<MyObjectData>` (or you can make `MSSQLHandler` generic too, if you want to use it with statements that do not build on `MyObjectData`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:03:59.577

Please refer Spring's [JdbcTemplate](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html) class. There is required functionality that you can use even without using Spring at all. Or you can just use it as a helpful guide to build your own persistent layer implementation.

# javascript - 基于安全功能的浏览器检测

> ID：15270134
> 
> 赞同：0
> 
> 时间：2013-03-07T11:35:44.247
> 
> 标签：javascript, browser-detection

我一直在对安全可靠的浏览器检测进行一些研究。鉴于解析`navigator.userAgent`是最糟糕的方式，因为它很容易被用户欺骗，最好的选择似乎是使用特征检测。因此，根据 StackOveflow 和其他地方的各种文章，最终的结果是这样的：

```
IE: /*@cc_on!@*/false
Firefox: -moz-box-sizing
Safari: window.getComputedStyle && !window.globalStorage && !window.opera
Opera: window.opera && window.opera.version
Chrome: window.chrome 
```

鉴于这些将在浏览器的未来版本中得到维护和监控（当一个人可能禁用我们现在用来检测它的功能时，或者可能是其他浏览器可能实现它，因此该浏览器的测试也将返回 true），这种方法有什么注意事项吗？用户可以以任何方式做一些事情，即使这些也会返回错误的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:06:01.623

> *这些*方法有什么注意事项吗？用户可以以任何方式做一些事情，即使这些也会返回错误的结果？

AFAIK 你必须考虑两件事。首先，根据浏览器的不同，ID 可能会[污染全局范围](https://www.w3.org/Bugs/Public/show_bug.cgi?id=11960)。其次，您不能再[相信前缀](http://dev.opera.com/articles/view/opera-mobile-emulator-experimental-webkit-prefix-support/)[是](https://stackoverflow.com/a/11759353/248058)特定于浏览器的。正如其他用户在评论中指出的那样，我建议改用特征检测（您正在做的是相关推理）。

附带说明一下，您的 Safari 过滤器不可靠。

# javascript - Jquery拖放并在ul上交换

> ID：15270135
> 
> 赞同：0
> 
> 时间：2013-03-07T11:35:49.793
> 
> 标签：javascript, jquery, drag-and-drop, swap

我有一个 5*5 的正方形网格`ul`，看起来像一张桌子。当我将一个正方形拖放到另一个正方形上时，我想交换两个正方形（即），这两个正方形都应该交换以改变它们的位置。PFB 我想知道这是否可以完成的列表，

a) 通过交换它们的索引来交换两个方块
b) 在某些方块上停止拖放

我尝试排序，但它也改变了其他方块的位置。有什么建议可以在 jquery 中完成吗？

# neo4j - 如何在 Neo4J 的 cypher rest API 中检索完全表示的路径

> ID：15270138
> 
> 赞同：3
> 
> 时间：2013-03-07T11:36:10.897
> 
> 标签：neo4j

在[这个问题](https://stackoverflow.com/questions/15108301/how-do-i-retrieve-a-path-in-neo4jclient)中讨论了 .NET 中的检索路径之后，我明白了为什么我遇到了困难。我开始直接针对 REST 运行密码查询，发现当您的查询返回路径时，它以 RESTful 方式返回，即相关节点和关系的 URI。

这给我带来了相当多的麻烦。我需要检索节点本身及其关系。我知道服务器可以做到这一点，因为在服务器外壳上运行任何路径样式的查询都会获取 JSON 对象，其中包含我所追求的所有病态。我认为 Neo4JClient 对此没有任何办法，因为没有什么可以通过 REST 检索路径的节点和关系本身，至少据我所知。

如果有上下文有帮助，我会尝试从数据库中检索路径以显示在前端。

是否有任何方法可以检索路径中的节点和关系，例如可以在 shell 或 Java 等中完成？如果没有，我最好的选择是什么？我应该尝试写一个插件吗？

下面是一个简单的示例 REST 请求（从 webadmin rest 控制台复制）：

```
post /db/data/cypher { "query" : "start n = node:myindex(ID='1') MATCH p = n<-[:RELATED_TO]-m RETURN p;" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:16:24.733

也许您可以只返回 Cypher 中的节点 ID，如下所示：

```
start n=node:node_auto_index(name='Neo') 
match p=n-[r:KNOWS*]-m 
return EXTRACT( n in nodes(p) : id(n) ) as node_ids_on_path 
```

? 有关示例，请参见[http://console.neo4j.org/r/5a02od](http://console.neo4j.org/r/5a02od)

# machine-learning - 用于情绪分析的 Mahout

> ID：15270145
> 
> 赞同：6
> 
> 时间：2013-03-07T11:36:29.990
> 
> 标签：machine-learning, mahout, sentiment-analysis

使用 mahout 我可以对数据的情绪进行分类。但我被一个混淆矩阵困住了。

我正在使用 mahout 0.7 朴素贝叶斯算法对推文的情绪进行分类。我使用朴素贝叶斯分类器来训练分类器并将推文的情绪分类为“正面”、“负面”或“中性” `trainnb`。`testnb`

样本正训练集

```
 'positive','i love my i phone'
      'positive' , it's pleasure to have i phone' 
```

同样，我准备了负面和中性的训练样本，这是一个巨大的数据集。

我提供的示例测试数据推文不包括情绪。

```
 'it is nice model'
  'simply fantastic ' 
```

我能够运行 mahout 分类算法，它将分类实例的输出作为混淆矩阵提供。

下一步我需要找出哪些推文表现出积极的情绪，哪些是消极的。使用分类的预期输出：用情绪标记文本。

```
 'negative','very bad btr life time'
      'positive' , 'i phone has excellent design features' 
```

在 mahout 中，我需要实现哪种算法才能以上述格式获得输出。或需要任何自定义源实现。

要“友好地”显示数据，建议我使用 apache mahout 提供的算法，这将适用于我的 twitter 数据情感分析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:01:32.487

通常，要对某些文本进行分类，您需要使用不同的先验（在您的情况下为正和负）运行朴素贝叶斯，然后只选择产生更大价值的那个。

[Mahout 书中的这段摘录](http://www.oracle.com/technetwork/community/join/member-discounts/523387)有一些例子。请参见清单 2：

```
Parameters p = new Parameters();
p.set("basePath", modelDir.getCanonicalPath());9
Datastore ds = new InMemoryBayesDatastore(p);
Algorithm a = new BayesAlgorithm();
ClassifierContext ctx = new ClassifierContext(a,ds);
ctx.initialize();

....

ClassifierResult result = ctx.classifyDocument(tokens, defaultCategory); 
```

这里的结果应该包含“正面”或“负面”标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:58:22.450

我不确定我能否为您提供全面的帮助，但我希望我能给您一些切入点。一般来说，我对您的建议是下载 Mahout 的源代码并查看示例和目标类是如何实现的。这并不容易，但您应该准备好 Mahout 没有简单的入口门。但是一旦你进入他们的学习曲线会很快。

首先，这取决于您使用的 Mahout 版本。我自己使用的是 0.7，所以我的解释是关于 0.7。

```
public void classify(String modelLocation, RawEntry unclassifiedInstanceRaw) throws IOException {

    Configuration conf = new Configuration();

    NaiveBayesModel model = NaiveBayesModel.materialize(new Path(modelLocation), conf);
    AbstractNaiveBayesClassifier classifier = new StandardNaiveBayesClassifier(model);

    String unclassifiedInstanceFeatures = RawEntry.toNaiveBayesTrainingFormat(unclassifiedInstanceRaw);

    FeatureVectorEncoder vectorEncoder = new AdaptiveWordValueEncoder("features");
    vectorEncoder.setProbes(1); // my features vectors are tiny

    Vector unclassifiedInstanceVector = new RandomAccessSparseVector(unclassifiedInstanceFeatures.split(" ").length());

    for (String feature: unclassifiedInstanceFeatures) {
        vectorEncoder.addToVector(feature, unclassifiedInstanceVector);
    }

    Vector classificationResult = classifier.classifyFull(unclassifiedInstanceVector);

    System.out.println(classificationResult.asFormatString());

} 
```

这里会发生什么：

1）首先，你加载你通过trainnb得到的模型。该模型保存在您在调用 trainnb 时使用 -o 参数指定的位置。模型是 .bin 文件。

2) StandardNaiveBayesClassifier 是使用您的模型创建的

3) RawEntry 是我的自定义类，它只是我的数据原始字符串的包装器。toNaiveBayesTrainingFormar 获取我想要分类的字符串，根据我的需要从中去除噪音，然后简单地返回一个特征字符串“word1 word2 word3 word4”。因此，我未分类的原始字符串被转换为适用的分类格式。

4) 现在需要将特征字符串编码为 Mahout 的向量，因为分类器输入仅在向量中

5）将向量传递给分类器 - 魔术。

这是第一部分。现在，分类器返回您 Vector ，其中包含具有概率的类（在您的情况下是情绪）。你想要特定的输出。最直接的实现（但我认为不是最有效和最时尚的）将是下一步：

1）您创建 map reduce 作业，该作业遍历您要分类的所有数据

2）对于您调用分类方法的每个实例（不要忘记做一些更改，不要为每个实例创建 StandardNaiveBayesClassifier）

3）拥有分类结果向量，您可以在地图减少作业中以任何格式输出数据

4) 这里有用的设置是 jC.set("mapreduce.textoutputformat.separator", " "); 其中 jC 是 JobConf。这允许您从 mapreduce 作业中为输出文件选择分隔符。在您的情况下，这是“，”。

同样，这一切都适用于 Mahout 0.7。不能保证它会按原样为您工作。不过它对我有用。

一般来说，我从来没有在命令行中使用过 Mahout，对我来说，Java 中的 Mahout 是要走的路。

# c# - WindowsService 和 NamedPipes：UnauthorizedAccessException

> ID：15270146
> 
> 赞同：1
> 
> 时间：2013-03-07T11:36:37.037
> 
> 标签：c#, .net, windows-services, named-pipes

当我尝试从 WPF-Testapp 访问 NamedPipeServer（作为 WindowsService 运行）时，我总是得到 UnauthorizedAccessException。

服务器：

```
 class PipeConnector
    {
        private volatile bool _shouldStop;
        NamedPipeServerStream pipeServer;
        public PipeConnector()
        {
            _shouldStop = false;
            PipeSecurity ps = new PipeSecurity();
            ps.AddAccessRule(new PipeAccessRule(WindowsIdentity.GetCurrent().Name, PipeAccessRights.ReadWrite, AccessControlType.Allow));
            pipeServer = new NamedPipeServerStream("ConnectorPipe", PipeDirection.InOut, 10,
                                    PipeTransmissionMode.Message,
                                    PipeOptions.WriteThrough, 4028, 4028, ps);    
        }

        public void Start()
        {
            pipeServer.WaitForConnection();

            StreamWriter sw = new StreamWriter(pipeServer);

            while (!_shouldStop)
            {
                sw.WriteLine("Here is Server, I'm working");
                sw.Flush();
                Thread.Sleep(5000);
            }
            this.pipeServer.Close();
        }

        public void RequestStop()
        {
            this._shouldStop = true;
            this.pipeServer.Close();
        }
    } 
```

客户：

```
public delegate void Notification(string text);
    class PipeConnector
    {

        NamedPipeClientStream pipeClient;
        public Notification notify;
        public PipeConnector()
        {
             pipeClient =
                    new NamedPipeClientStream(".", "ConnectorPipe",
                        PipeDirection.InOut);
        }

        public void Start()
        { 
            pipeClient.Connect();
            StreamReader sr = new StreamReader(pipeClient);

            while (true)
            {
                string text = sr.ReadLine();
                notify(text);
            }

        }
    } 
```

我找到了很多类似问题的解决方案，但没有人为我工作..

我也试过这个：http: [//support.microsoft.com/kb/126645/en-us](http://support.microsoft.com/kb/126645/en-us)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:18:36.197

嗯..我得到它的工作。

解决方案：

而不是`WindowsIdentity.GetCurrent().Name`我用`new SecurityIdentifier(WellKnownSidType.BuiltinUsersSid, null)`

# opencv - 读取和显示openCV IplImage

> ID：15270148
> 
> 赞同：0
> 
> 时间：2013-03-07T11:36:46.620
> 
> 标签：opencv

在客户端，我使用 openCV 创建 IplImage 并通过 TCP 套接字将其作为二进制数据发送。

```
IplImage *img = cvCreateImage(cvSize(480, 360), IPL_DEPTH_8U, 4); 
```

我在服务器上收到数据后，如何读取并显示？

```
IplImage *img = ???
cvNamedWindow("image", CV_WINDOW_AUTOSIZE);
cvShowImage("image", img);
cvWaitKey();
cvDestroyWindow("image"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:06:42.057

也通过套接字发送图像的大小、深度和 nChannels。您可以在服务器端创建图像，并使用 memcpy() 或将 img 的指针设置为指向接收到的二进制数据的指针。

# symfony - Symfony2 中的社交登录

> ID：15270150
> 
> 赞同：1
> 
> 时间：2013-03-07T11:36:54.357
> 
> 标签：symfony, oauth, hwioauthbundle

现在，我正在尝试在我正在开发的网站中设置一些社交登录（facebook 和 twitter）。

但现在，我陷入了困境。我只是关注 HWIOAuthBundle 的文档： [https](https://github.com/hwi/HWIOAuthBundle/blob/master/Resources/doc/3-configuring_the_security_layer.md) ://github.com/hwi/HWIOAuthBundle/blob/master/Resources/doc/3-configuring_the_security_layer.md 但我被困在第 3-A 步。

我“不能”理解这一点。我没有创建服务的经验，也没有使用它们......第一段是什么意思？

所以伙计们，你知道任何一步一步的指南来实现我想要做的事情吗？

我会在附近，刷新这个问题，所以我可以尽快回答你可能问我的任何问题。

谢谢你。

PS：对不起，如果我不清楚，或者我没有提供任何必要的信息。我在 Symfony 方面没有太多经验，我只知道基础知识（路由、控制器、实体、存储库），所以请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T10:35:49.050

一方面，如果你想使用 HWIOAuthBundle，请阅读[这篇](http://www.diegocaprioli.com/adding-hwioauthbundle-to-your-symfony2-project/)关于安装这个包的个人经验的文章。

我一步一步地按照这些说明进行操作，它对我有用。

另一方面，您可以使用 Daniel 提出的 FOS 捆绑包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:51:50.833

请考虑使用[Friends of Symfony](https://github.com/FriendsOfSymfony)捆绑包。

对于 Facebook，[FOSFacebookBundle](https://github.com/FriendsOfSymfony/FOSFacebookBundle)。

对于 Twitter，请考虑[FOSTwitterBundle](https://github.com/FriendsOfSymfony/FOSTwitterBundle)。

这样你的生活就会好很多。

# c# - 来自第二种形式的 C#“回调”

> ID：15270151
> 
> 赞同：2
> 
> 时间：2013-03-07T11:36:55.170
> 
> 标签：c#, .net, callback

我正在尝试从 C# 中的第二种形式回调，但是没有做到，有人可以帮忙吗？

```
 // Form 1 (Main form)
    public void CallBack()
    {
         if (radioBox1.Checked)
         {
              RefreshForm("TRUE");
         }
         else if (radioBox2.Checked)
         {
              RefreshForm("FALSE");
         }
    }

    private void RefreshForm(string Options)
    {
         // Do something here
    } 
```

现在是第二种形式

```
 // Form 2 (Child Form)
    Form1 form1 = new form1();
    private void timer1_Tick(object sender, EventArgs e)
    {
          form1.CallBack();
    } 
```

可悲的是，回调不起作用，有什么我写错了吗？请帮助...非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:41:47.010

它不起作用，因为您正在调用刚刚创建`CallBack`的新实例，`Form1`该实例与主窗体不同。

您需要以某种方式引用主表单，例如：

```
(Application.OpenForms[0] as Form1).CallBack(); 
```

这是假设主窗体 (Form1) 是您的应用程序的第一个打开的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:40:45.717

在方法中写下一个消息框`CallBack()`，它会一直显示。

在 Form1 的新实例上，既不检查`radioBox1`或`radioBox2`也不检查，所以调用到`Callback`Method 但什么也没发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:43:14.407

该`callback`方法正在调用`new instance`，`Form1`而不是您需要的方法。

由于您使用的是 MDI 接口，您可以将方法更新为：

```
private void timer1_Tick(object sender, EventArgs e)
{
      (this.MdiParent as Form1).CallBack();
} 
```

# php - 从加载的 php 文件中隐藏 div

> ID：15270152
> 
> 赞同：1
> 
> 时间：2013-03-07T11:36:56.180
> 
> 标签：php, ajax

我在页面上有一个 div，当用户单击链接时，它使用 Ajax 将 PHP 文件加载到其中。这很好用，但我想做的是`onclick`在加载的 PHP 文件中有一个事件，以便能够在页面上隐藏相同的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:53:50.157

如果我理解正确，您想使用通过 ajax 加载到 div 中的按钮来隐藏 div。

你可以利用`.on`这个。

在你的ajax文件中添加`button`一个类`close`

`<button class="close">Close</button>`

在您发出请求的页面中添加这一点 jQuery

```
$(function(){

    $(document).on('click', 'button.close', function(){
        $(this).parents('div').hide();
    });

}); 
```

显然，您可能需要更改 .parents() 调用中的选择器以匹配您的父 div，您始终可以向 div 添加一个类并将其作为目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:42:58.833

尝试这个 ：

```
1\. Add a button or link in loaded php file content
2\. Write a onclick event to hide the div
3\. As the php file content is loaded through AJAX, it will not bind to document, 
   So you need to use on or delegate function of jQuery to work it properly 
```

参考：[http](http://api.jquery.com/on/) ://api.jquery.com/on/和[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:44:27.897

只需在加载的 php 文件中编写一些相应的 javascript。例如：

调用 ajax 之前的 HTML：

```
<div id="my_container"></div>

<script type="text/javascript">
    //using jQuery
    $("#hide_parent").live('click', function(){
        $("my_container").hide();
    });
</script> 
```

在您的 php 脚本中：

```
<a href="#" id="hide_parent">Hide me away</a> 
```

# php - PHP $_SESSIONS 是否适用于包含的页面？

> ID：15270153
> 
> 赞同：2
> 
> 时间：2013-03-07T11:36:56.370
> 
> 标签：php, session

假设我有 header.tpl 和 footer.tpl，在这两者之间是 body.tpl。

假设我想通过检查是否设置了特定会话来限制对 body.tpl 的访问，例如：

```
session_start();
if (isset($_SESSION['limited'])) {
  //render body.tpl
} else {
  //direct somewhere else
} 
```

如果该`session_start(); if (isset()) {`部分位于 header.tpl 并且`} else {}`位于 footer.tpl 文件中，这会起作用吗？

我的计划是我在每个页面中包含的页眉和页脚中进行会话检查，因此我不必在呈现模板的 PHP 文件中执行此操作。

像这样（body.tpl 的内容）：

```
<?php require_once(TEMPLATE_PATH. "/header.tpl"); ?>
//body.tpl contents
<?php require_once(TEMPLATE_PATH. "/footer.tpl"); ?> 
```

body.tpl 通过一个 PHP 文件调用，该文件包含`requires`所有必要的文件，并实例化将用于填写 tpl 文件的所有类。如果我在 PHP 文件中进行会话检查，它会按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:47:13.047

如果你使用模板引擎，你会做得更好（试试[http://www.smarty.net/](http://www.smarty.net/)）

您将能够轻松地做到这一点以及更多。您将能够按照这些思路做一些事情。

假设您要显示页面 foo.tpl，并且您有两个其他 smarty 模板 1\. header.tpl 2\. footer.tpl

foo.tpl 看起来像这样

```
{include file="header.tpl"}

{$foo}

{include file="footer.tpl"} 
```

然后在您的 php 页面中，执行您想要的任何逻辑，通过以下方式将输出加载到变量中

```
$smarty-assign('foo',$my_content);
$smarty->display( "foo.tpl" ); 
```

这将呈现 foo.tpl，包括 header.tpl 和 footer.tpl 的内容以及 $foo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:41:55.790

您可以在执行请求时从任何 PHP 代码访问 $_SESSION 对象。确保只调用 session_start 一次。

附言。这种方法会带来代码重复，你会后悔的。

# c# - 生成动态文本框和标签

> ID：15270157
> 
> 赞同：-4
> 
> 时间：2013-03-07T11:37:09.757
> 
> 标签：c#

当我在 C# 中的 datagridview 中添加列时，我想生成动态文本框和标签。我还希望稍后编写一个 SQL 查询，它将我新生成的文本框作为参数/新列名。发生的错误说“参数超出范围异常未处理”。

请帮忙

```
public void CreateLabels()
    {
        Label lb = new Label();
        this.Controls.Add(lb);
        int p= dataGridView1.ColumnCount;
        for (int k = p; k <= dataGridView1.ColumnCount; k++)
        {
            for (int z =p; z <= dataGridView1.ColumnCount; z++)
            {
                dataGridView1.Refresh();
                lb.Text = dataGridView1.Columns[z++].HeaderText;
            }
            lb.Show();
            lb.Visible = true;
        }
        lb.Location = new Point(m,n=n+25);
        lb.Width = 199;
        lb.Height = 20;
    }
    public void CreateTextBoxes()
    {
        TextBox tb = new TextBox();
        this.Controls.Add(tb);
        for (int i = 5; i <= dataGridView1.ColumnCount; i++)
        {
            dataGridView1.Refresh();
            tb.Name = "textBox" + i;
            MessageBox.Show(tb.Name);
        }
        tb.Location = new Point(x, y = y + 25);
        tb.Show();
        tb.Visible = true;         
    }*/

    //Below  method is used to get data in datagridview1 and to reflect in runtime text boxes and labels;the visible property is kept false 

    /*private void displayRec()
    {
        try
        {
            string str = System.Environment.MachineName;
            SqlConnection sconn = new SqlConnection("Data Source='" + str + "';Initial Catalog=main;Integrated Security=True");
            DataTable dt = new DataTable();
            SqlDataAdapter da = new SqlDataAdapter("Select * from invent", sconn);
            da.Fill(dt);

            dataGridView1.DataSource = dt.DefaultView;
            //dataGridView1.Refresh();
        }
        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:08:51.193

老实说，我不明白你的循环的想法。它们具有相同的条件，您从不使用“k”；
然而，两个循环都从最后一列 +1 开始；并且在 lb.Text 的分配中，您试图获取不存在的列的 HeaderText。这就是为什么你有超出范围的异常。

# c# - 如何在 TFS 自定义构建活动中获取构建项目

> ID：15270160
> 
> 赞同：3
> 
> 时间：2013-03-07T11:37:18.100
> 
> 标签：c#, build, tfs

我正在创建一个自定义构建定义，我想在签入时使用它来增加我的程序集编号。我关注[了这个博客](http://www.richard-banks.org/2010/07/how-to-versioning-builds-with-tfs-2010.html)`Workspace`，其中说明了在更改`ReadOnly`文件时要传入的状态。我有一个像这样的源代码控制结构：

*   团队协作
    *   解决方案 A
        *   项目A
        *   项目 B
    *   解决方案 B
        *   项目A
        *   项目 B

我已经在解决方案**B中为****Project B**设置了我的自定义构建。我已经实现了一个记录器来记录正在发生的操作，以便使用以下代码进行测试：

 **```
protected void TrackMessage(CodeActivityContext context, string message)
{
  context.Track(new BuildInformationRecord<BuildMessage>()
  {
    Value = new BuildMessage()
    {
      Message = message,
      Importance = BuildMessageImportance.High
    }
  });
} 
```

从根本上说，当`override execute`我得到：

```
Workspace workspace = context.GetValue<Workspace>(CurrentWorkspace);
foreach (WorkingFolder folder in workspace.Folders)
{
  TrackMessage(context, string.Format("Working Folder: {0}", folder.LocalItem));
  //Then get all directories for this working folder
} 
```

我的工作文件夹出来`Team collaboration`，然后获取`AssemblyInfo.*`整个协作项目中的所有文件！我不知道我必须传递什么属性以及它是什么类型，我试图研究它以找到要使用哪个属性来`TeamCollaboration\Solution B\Project B`进入我的文件夹。

关于我正在寻找什么类型和属性来实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:58:59.597

我认为您可以通过缩小`build configuration`. 尝试如下设置：

*   编辑构建配置
*   单击源设置（VS 2012），工作区（VS 2010）
*   使您的映射如下所示：

`Status``Source Control Folder                 ``Build Agent Folder                `
`Active``$/Team collaboration/Solution B  ``$(SourceDir)\                        `

这将使此构建的工作空间仅限于您希望构建的解决方案。因此，您的构建活动只能看到该目录下的 AssemblyInfo 文件。

希望这可以帮助。**

# db2 - DB2 9.7 安装失败，出现分段错误

> ID：15270161
> 
> 赞同：-1
> 
> 时间：2013-03-07T11:37:19.307
> 
> 标签：db2, installation, fault

当我在我的 ubuntu10.04-64bit 上安装 DB2v9.7 时，出现以下错误：

**分段故障**

只有这两个字，我不知道如何解决。

我使用静默方法，当我执行 sudo ./db2setup -r db2ese.rsp 时，错误来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:39:59.270

问题已经解决了！必须保持主机名和/etc/hosts的内容对称，我的主机名是ubuntu，所以我在/etc/hosts中添加一行：127.0.0.1 ubuntu 可以！谢谢大家帮助我！亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:35:49.703

DB2 是否成功安装在机器上，并且您在启动 DB2 实例时遇到分段错误？或者您在仅启动 v9.7 安装程序时看到错误..请清除此..

如果您在启动安装程序时遇到此问题，请使用 -t 选项再次运行安装实用程序并将跟踪文件发送到 db2.luw@gmail.com。我会尽快回复你。

如果您在启动 db2 实例时遇到错误，请附加 db2diag.log 文件。

谢谢

# visual-studio-2012 - ClickOnce 安装程序立即停止执行

> ID：15270164
> 
> 赞同：0
> 
> 时间：2013-03-07T11:37:22.773
> 
> 标签：visual-studio-2012, vsto, clickonce, add-in, .net-4.5

我的 ClickOnce 设置有问题，完全不知道我做错了什么......

我正在尝试使用 VS2012 为 Outlook 2013 发布 VSTO 插件。但是，当我单击由 ClickOnce Publish 创建的 Setup.exe 时，安装程​​序会显示大约半秒钟的小安装窗口，然后立即再次消失。这根本不会显示任何错误消息或生成任何事件日志条目。

*   ClickOnce 清单使用测试证书（自签名证书）进行签名。
*   该程序集未签名。（但是，如果我选择签名，什么都不会改变）
*   我使用 CD 或 DVD-ROM 作为安装路径发布到文件系统（发布到 IIS 会导致同样的问题）

昨天这已经奏效了。今天不会了。从那以后什么都没有改变...

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:08:20.667

终于找到了答案......经过多次尝试重现问题后，我注意到以下内容：

如果我创建一个新项目，除了手动创建一个测试证书之外什么都不做，那么发布的设置就不会运行，但是如果我什么都不做，它就可以工作......

当 ClickOnce 创建用于签署清单的证书时，我开始比较这些证书之间的差异。出来了：哈希算法必须是sha1

该证书无效。并且安装程序将中止，而不会提示出现了什么问题：

![SHA256 证书](../Images/26b90c69b64db6b9caa976809578608a.png)

该证书有效。

![SHA1 证书](../Images/77dab11e8f34d226472ac5e5c10af203.png)

有人可能会认为安装程序至少会提示可能出现的问题，而不仅仅是中止。

我希望如果其他人偶然发现这个问题，这可能会有所帮助:)

# deployment - 使用 MSBuild 在远程服务器上部署网站

> ID：15270165
> 
> 赞同：0
> 
> 时间：2013-03-07T11:37:32.407
> 
> 标签：deployment, msbuild, msbuildextensionpack

我已经为一个项目创建了部署包，现在我需要将它部署在远程服务器上。所有这些都必须使用 MSBuild 来完成。我使用 MSBuild 创建包并将其部署在本地计算机上。作为 .net 和 MSBuild 的新手，我不知道该怎么做。可以使用 MSBuildExtensionsPack 完成吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:57:58.473

我想基本步骤是：

1.  停止远程服务器上的 IIS。
2.  移动新文件。
3.  在远程服务器上启动 IIS。
4.  （可选）某种烟幕测试。

停止和启动 IIS

[从构建脚本停止 IIS 7 应用程序池](https://stackoverflow.com/questions/1395498/stop-iis-7-application-pool-from-build-script)

```
 <AppPoolController ApplicationPoolName="AnAppPool" Action="Restart" ServerName="MyServer"/> 
```

ftp新代码？

[MSBuild 社区任务文档](https://stackoverflow.com/questions/3762839/msbuild-community-tasks-documentation)

（或使用 msbuild 复制任务通过网络复制）

# php - 对 php 文件的 Ajax 调用不适用于该文件中的“require_once”

> ID：15270174
> 
> 赞同：4
> 
> 时间：2013-03-07T11:37:45.510
> 
> 标签：php, jquery, ajax

我基本上有一个对 php 文件的 ajax 调用：

```
$("#acceptBtn").click(function(){
     $.ajax({
     type: "POST",
     url:"acceptOfferFunction.php",
     data: {hash2: getURLParameter('hash2')},
     success:function(result){
         alert(result);
     }
}); 
```

为了清楚起见，这里是该文件的简化版本，说明了问题：

```
<?php
     session_start();   
   //require_once 'AcceptAnOfferFromEditor.php';
     echo('foo');
 ?> 
```

这行得通，'foo' 会收到警报，但是如果我取消注释该`require_once`语句，它就不会了。

包含的文件是一个具有许多功能的 php 类。能够打电话给他们会很方便。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T11:39:50.770

您所需的文件中可能有错误。启用[错误报告](http://php.net/manual/en/function.error-reporting.php)以对此进行调试：

```
<?php
    session_start();   
    ini_set('display_errors', 1);
    error_reporting(E_ALL);
    require_once 'AcceptAnOfferFromEditor.php';
    echo('foo'); 
```

或者，文件中可能有一个`die()`or`exit`调用。

# html - 从移动网站启动地图应用程序

> ID：15270175
> 
> 赞同：1
> 
> 时间：2013-03-07T11:37:45.480
> 
> 标签：html, mobile, maps, protocols

我希望允许用户单击邮政编码并启动他们的本地地图应用程序。

我见过的所有解决方案都是特定于供应商的。是否有“地图”协议在调用时会启动本机应用程序？

像“地图：//”之类的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:18:33.870

没有标准约定，每个移动操作系统都以不同的方式实现这一点。您必须检测设备并相应地更新您的链接。

例如，假设我们要查找邮政编码 W1J 7NT

*   **IOS：**

    网址：`http://maps.apple.com/?q=W1J7NT`

    请参阅：[Apple URL 方案参考 - 地图链接](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1)

*   **安卓：**

    网址：`geo:0,0?q=W1J7NT`

    请参阅：[意图列表：在 Android 设备上调用 Google 应用程序](https://developer.android.com/guide/appendix/g-app-intents.htmlhttps://developer.android.com/guide/appendix/g-app-intents.html)

*   **Windows 手机：**

    网址：`maps:W1J7NT`

    请参阅：[从移动浏览器打开本地地图应用程序](http://habaneroconsulting.com/Blog/Posts/Opening_native_map_apps_from_the_mobile_browser.aspx)

*   **黑莓：**

    网址：`javascript:blackberry.launch.newMap({'address':{'zipPostal':'W1J7NT'}});`

    请参阅：[从移动浏览器打开本地地图应用程序](http://habaneroconsulting.com/Blog/Posts/Opening_native_map_apps_from_the_mobile_browser.aspx)

您还必须考虑操作系统版本，因为这些 URI 在每个操作系统的早期版本中可能已更改。

# postgresql - 如何修复混合纬度/经度顺序

> ID：15270180
> 
> 赞同：1
> 
> 时间：2013-03-07T11:37:56.713
> 
> 标签：postgresql, map, postgis, openstreetmap

我有一些用 osm2pgsql 导入的 OSM 数据：

```
osm2pgsql -d geomdb -l -U DBUSER -H DBHOST -S my.style germany.shp 
```

默认 srid 为 4326：

```
GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]] 
```

openstreetmap、mapquest、google 也使用它（我在某处读过这个）。现在我的数据库中的几何图形看起来像（例如）

```
LINESTRING(10.02 54.34,10.01 54.33,10.03 54.38) 
```

代替：

```
LINESTRING(54.34 10.02,54.33 10.01,54.38 10.03) 
```

切换每个点的 lat / lng 值。为什么？我可以在不重新导入数据的情况下解决此问题吗？

我不想在每个查询之前/之后在我的应用程序中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T23:32:46.353

使用函数[ST_FlipCoordinates](http://postgis.net/docs/ST_FlipCoordinates.html)将 YX 交换到 XY 轴顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:57:40.850

当然可以，你必须将线串分成单独的点，然后通过切换 X 和 Y 来创建一个新点，再次创建一个线串，然后用新的线串替换该线串。像这样，只需将名称替换为您的名称即可。

```
UPDATE the_table AS t
SET the_linestring=l.the_linestring
FROM
  (SELECT id,
          st_makeline(point) AS the_linestring
   FROM
     ( SELECT t.id,
              st_makepoint(st_y(st_pointn(the_linestring,buz)) ,st_x(st_pointn(the_linestring,index_num))) AS point
      FROM the_table t
      JOIN
        (SELECT id,
                generate_series(1,st_npoints(the_linestring)) AS index_num
         FROM the_table) AS q ON t.id=q.id ) AS q
   GROUP BY q.id ) AS l
WHERE t.id=l.id; 
```

# plc - & 符号是什么意思？

> ID：15270182
> 
> 赞同：1
> 
> 时间：2013-03-07T11:37:58.050
> 
> 标签：plc

在某些欧姆龙 plc 逻辑中，我有一个如下所示的移动语句

```
----------
|@Mov(021)
|        |
|        |
|&110    |
|        |
|        |
|D5000   |  
|        |
|(value) |
|        |
---------- 
```

对 @ 符号和 & 符号的含义感到困惑？

我问的原因是，值始终是 0 、 110 、 120 （数字），但我发现的唯一动作是 0 和 &110 ，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:23:21.170

`@`符号（在这种**情况下！！！** *）表示差分指令。这意味着该指令仅在输入进行 OFF 到 ON 转换时执行。

例子：

```
 12.34

---| | -------------------| MOV  |
                          | &110 |
                          | D5000| 
```

对于上述情况，任何时间`12.34`为 ON，十进制值（由 表示`&`）110 将移动到`D5000`。它将被存储为`[x006E]`. 如果您改为使用`#110`它，它将作为 HEX 或 BCD 值移动（即：`D5000`将包含`[x0110]`- BCD 值 110 或十进制值 272，取决于它的解释方式）

现在考虑

```
 12.34

---| | -------------------| @MOV |
                          | &110 |
                          | D5000| 
```

当从 OFF 变为 ON时，这只会将值移动`&110`到`D5000`单个 PLC 扫描。如果另一条指令稍后在保持 ON 的情况下`12.34`写入，则上述指令不会覆盖它，除非再次关闭，然后再重新打开。然后，该指令使指令成为一次性指令-它不会连续工作，而是每次完全满足输入条件时才工作一次。`D5000``12.32``12.34``@`

虽然含义和实现不同，但上述梯级的工作方式与例如：

```
 12.34

---|↑| -------------------|  MOV |
                          | &110 |
                          | D5000| 
```

在上述情况下，触点是差分的，并且仅在进行 OFF->ON 转换`12.34`时打开一次扫描。`12.34`但是，您通常可能有更复杂的输入逻辑，因此差分`@MOV`指令代替差分触点更方便、更明智，甚至是所需行为所必需的。

**如果您在内存位置发现神秘值，您可以使用 CX-Programmer 中的地址参考工具（查看 -> Windows -> 地址参考工具** -- 或*ALT+4* ）追踪它们的来源。单击 Ladder 中的 D-Memory 位置将列出使用该地址的所有梯级。这应该可以帮助您找到它在程序中的写入位置：

![地址参考工具](../Images/df38a37d794fe78fa05a6f5c94169195.png)

*** 注意欧姆龙 PLC 中 @ 的其他用途**- [请参见此处](https://stackoverflow.com/q/9327806/327083)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:01:35.467

& 符号表示该值为小数。

# c# - 使用 datalist 将数据显示为组

> ID：15270191
> 
> 赞同：0
> 
> 时间：2013-03-07T11:38:25.013
> 
> 标签：c#, asp.net, datalist

我有一个看起来像这样的数据表..

```
s.no product categoryno 

1\.   product1    1
2\.   product2    1
3\.   product3    1
4\.   Product4    2
5\.   Product5    2
6\.   product6    2 
```

现在我想将此数据表绑定到数据列表

```
some tittle:

 product1
 product2
 product3

some tittle:

 product4
 product5
 product6 
```

我需要根据列（如上例中的类别）分隔数据并使用 datalist 显示它。任何建议都将不胜感激。

**注意**：产品表示其路径在数据库中的产品的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:58:51.273

如果您有两个`DataTables`（根据评论），您可以使用添加两个表之间的关系`categoryno`，然后将其绑定到`Datalist`如下。

```
//Assuming your datatables are in ds (DataSet)

ds.Tables[0].TableName = "Cats";
ds.Tables[1].TableName = "Products";
ds.Relations.Add("children", ds.Tables["Cats"].Columns["categoryno"],
                             ds.Tables["Products"].Columns["categoryno"]);
YourDataList.DataSource = ds;
YourDataList.DataBind(); 
```

**更新：**根据最近的评论，我认为您只需要将行从一个添加到另一个。

```
foreach(DataRow dr2 in Table2.Rows)
{
   DataRow dr1 = Table1.NewRow(); 
   dr1[0] = dr2[0];
   dr1[1] = dr2[1];
   dr1[2] = dr2[2];
   //... if you have many columns 
   Table1.Rows.Add(dr1);
}
//Bind Table1 here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:49:08.413

```
 ds.Tables[0].TableName = "Cats";
    ds.Tables[1].TableName = "Products";
    ds.Relations.Add("children",       ds.Tables["Cats"].Columns["categoryno"],ds.Tables["Products"].Columns["categoryno"]);
    YourDataList.DataSource = ds;
    YourDataList.DataBind(); 
```

# xpath - Selenium - 检查链接的href

> ID：15270192
> 
> 赞同：0
> 
> 时间：2013-03-07T11:38:25.027
> 
> 标签：xpath, selenium, playframework, css-selectors

我正在使用播放框架和 {selenium} 标签中使用的硒。

到目前为止，我有这个：

```
verifyText(css=a:contains('Remove'), ' href="/node/remove?uuXXid=yftest5"') 
```

但是，这只会返回文本 Remove，它是链接的标签。

我想得到href。所以我尝试了：

```
css=a:contains('Remove')@href 
```

但是，然后抱怨说没有找到元素。

我也见过，`GetAttribute`但我似乎找不到在这个 playframework selenium 标记环境中工作的任何组合。

不幸的是，游戏网站上的文档很差！

我也试过这个 xPath，但它似乎找到了它返回的元素''：

```
//a[text()='Remove']/@href 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T18:49:15.143

在IDE中你可以这样做

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>verifyAttribute</td>
    <td>//div[@id='top-stories']/div/div/div/div/div/div/ul/li[2]/a@href</td>
    <td>/2013/10/24/twitters-ipo-could-raise-14-billion</td>
</tr>
<tr>
    <td>storeAttribute</td>
    <td>//div[@id='top-stories']/div/div/div/div/div/div/ul/li[2]/a@href</td>
    <td>href</td>
</tr>
<tr>
    <td>echo</td>
    <td>${href}</td>
    <td></td>
</tr>

</tbody></table>
</body>
</html> 
```

网络驱动程序 python

```
driver.find_element_by_xpath("//div[@id='top-stories']/div/div/div/div/div/div[2]/div/a/img").get_attribute("src"), '/2013/10/24/twitters-ipo-could-raise-14-billion") 
```

希望这可以帮助

# java - 名称值对排序

> ID：15270194
> 
> 赞同：5
> 
> 时间：2013-03-07T11:38:29.087
> 
> 标签：java, apache

如何`NameValuePair`按键对这样的对象进行排序

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(7)

nameValuePairs.add(new BasicNameValuePair("api_key", "1"));
nameValuePairs.add(new BasicNameValuePair("merchant", "4"));
nameValuePairs.add(new BasicNameValuePair("format", "json"));
nameValuePairs.add(new BasicNameValuePair("method", method));
nameValuePairs.add(new BasicNameValuePair("cid", "0")); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T11:44:59.423

`NameValuePair`传入比较器，它按键对两个 s 进行排序。就像是

```
Comparator<NameValuePair> comp = new Comparator<NameValuePair>() {        // solution than making method synchronized
    @Override
    public int compare(NameValuePair p1, NameValuePair p2) {
      return p1.getName().compareTo(p2.getName());
    }
}

// and then
Collections.sort(pairs, comp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-02T07:48:58.253

在 Java 8 中，您可以使用

```
Collections.sort(pairs, Comparator.comparing(NameValuePair::getName)); 
```

# matlab - 将 CSV 文件中的值导入一个元胞数组

> ID：15270195
> 
> 赞同：1
> 
> 时间：2013-03-07T11:38:29.287
> 
> 标签：matlab, csv

我有一个类似于以下内容的 .dat 文件：

```
* ID=Minilog-T
* Serial Number=1328
* Study ID=Rostherne 2008
* Start Time=13-11-2008,14:23:14
* Finish Time=09-12-2009,13:01:53
* Sample Period=02:00:00
* Number of Deployments=9
* Date(dd-mm-yyyy),Time(hh:mm:ss),Celsius (°C)
13-11-2008,14:23:14,20.6
13-11-2008,16:23:14,15.3 
```

我想将数据插入到我拥有的单元格数组中：

```
dat = {'13-11-2008','14:23:14','20.6';'13-11-2008','16:23:14','15.3'};

dat = 

    '13-11-2008'    '14:23:14'    '20.6'
    '13-11-2008'    '16:23:14'    '15.3' 
```

我试过了：

```
fid = fopen(...);
dat = textscan(fid,'%s%s%s','headerlines',8); 
```

但是，这会将所有内容导入到 3 个单独的单元格数组中，即它不采用与矩阵相同的格式。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:26:42.860

问题是`textscan`将每个提取的列放在自己的单元格中，因此需要稍微不同的方法。

一种可能的方法是使用`textscan`提取相关行，然后使用 将每一行拆分为逗号分隔的字符串[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)：

```
dat = textscan(fid, '%s', 'headerlines', 8, 'delimiter', '\n')
C = regexp(dat{1}, ',', 'split');
dat = vertcat(C{:}) 
```

# java - 如何使用 Java 邮件获取未答复的邮件？

> ID：15270198
> 
> 赞同：1
> 
> 时间：2013-03-07T11:38:38.087
> 
> 标签：java, email, jakarta-mail, flags

我努力了

```
ft = new FlagTerm(new Flags(Flags.Flag.ANSWERED), false); 
```

从收件箱中获取未答复的邮件列表，但从收件箱返回所有邮件。

```
message.isSet(Flags.Flag.ANSWERED); 
```

也给出相同的输出。

如何列出收件箱中已读但未回复的邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:03:45.867

你在使用 IMAP 吗？如果没有，这将不起作用。

当您回复该消息时，由邮件阅读器在该消息上设置 ANSWERED 标志。一些邮件阅读器可能不会这样做。你用的是什么邮件阅读器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T07:25:37.363

下载 JavaMail API 并确保相关的 jar 文件在您的类路径中。

使用 gmail.com Web 界面，您需要将设置阻止更改为未阻止到 gmail 帐户。导入 java.util。*; 导入 javax.mail。*; 导入 javax.mail.internet.*；

公共类主要{

```
private static String USER_NAME = "*****";  // GMail user name (just the part before "@gmail.com")
private static String PASSWORD = "********"; // GMail password
private static String RECIPIENT = "lizard.bill@myschool.edu";

public static void main(String[] args) {
    String from = USER_NAME;
    String pass = PASSWORD;
    String[] to = { RECIPIENT }; // list of recipient email addresses
    String subject = "Java send mail example";
    String body = "Welcome to JavaMail!";

    sendFromGMail(from, pass, to, subject, body);
}

private static void sendFromGMail(String from, String pass, String[] to, String subject, String body) {
    Properties props = System.getProperties();
    String host = "smtp.gmail.com";
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", host);
    props.put("mail.smtp.user", from);
    props.put("mail.smtp.password", pass);
    props.put("mail.smtp.port", "587");
    props.put("mail.smtp.auth", "true");

    Session session = Session.getDefaultInstance(props);
    MimeMessage message = new MimeMessage(session);

    try {
        message.setFrom(new InternetAddress(from));
        InternetAddress[] toAddress = new InternetAddress[to.length];

        // To get the array of addresses
        for( int i = 0; i < to.length; i++ ) {
            toAddress[i] = new InternetAddress(to[i]);
        }

        for( int i = 0; i < toAddress.length; i++) {
            message.addRecipient(Message.RecipientType.TO, toAddress[i]);
        }

        message.setSubject(subject);
        message.setText(body);
        Transport transport = session.getTransport("smtp");
        transport.connect(host, from, pass);
        transport.sendMessage(message, message.getAllRecipients());
        transport.close();
    }
    catch (AddressException ae) {
        ae.printStackTrace();
    }
    catch (MessagingException me) {
        me.printStackTrace();
    }
} 
```

}

# ruby-on-rails - 在 rails/mongodb 中搜索找到的记录

> ID：15270205
> 
> 赞同：0
> 
> 时间：2013-03-07T11:38:54.517
> 
> 标签：ruby-on-rails, mongodb

我有一个搜索表单，可以在其中搜索 Scans 中的名称。如果找到名称（其唯一性），它会检查包含该名称代码的可能记录。

扫描模型包含：

```
 def self.search(search)
    where(name: /#{search}/i)
  end

  def self.search_by_code(search)
    where(code: /#{search}/i)
  end 
```

扫描控制器：

```
 def search    
    respond_to do |format|
      # format.html {
      #   @scans = Scan.search(params[:search])
      #   render html: @scans
      # }
      format.json { 
        @original = Scan.search(params[:search])
        if @original
          @scans = Scan.search_by_code(@original.code)
          render json: @scans
        else
          render json: "no"
        end
        }
    end
  end 
```

我究竟做错了什么？如何正确执行此操作？

这个想法是得到：

```
[
{"code":"29304","name":"Albert"}, 
{"code":"23094","name":"Jackie"},
{"code":"29304","name":"Nora"}
] 
```

# jquery - Jquery easyticker 脚本不工作

> ID：15270214
> 
> 赞同：0
> 
> 时间：2013-03-07T11:39:15.013
> 
> 标签：jquery, asp.net, signalr

我们最近一直在为我们的 Web 应用程序开发一个仪表板。Dashboard 主要使用 ASP.NET SignalR，因此信息可以实时更改，而无需刷新浏览器。

要求之一是拥有一个显示留言板概览的 facebook 风格的新闻自动收报机。我最近遇到了一个名为 Easy ticker 的 jQuery 插件。基本上它时不时地在 div 中显示元素。

最初，div 内容是空的，并且在信息可用时被注入，这是通过 SignalR 完成的。但是每当我引用easyticker插件时，什么都没有出现。我使用了萤火虫，所以看看输出，一切似乎都很好，我做错了什么吗？谢谢

```
 <html>

<body>
<div id="latest-messages">

   <div class="message-content" style="position: absolute; margin: 0px; top:      51.911805555555546px;">
   </div>

</div>

<script src="js/json2.js" type="text/javascript"></script>
<script src="js/jquery-1.6.4.min.js" type="text/javascript"></script>

<script src="js/jquery.easy-ticker.js" type="text/javascript"></script>
<script src="js/jquery.signalR-1.0.1.min.js" type="text/javascript"></script>
<script src="/signalr/hubs"></script>
<script type="text/javascript">

      $('#latest-messages').easyTicker({

            direction: 'down',
            interval: 7000          

      });

      // Declare a proxy to reference the hub
      var hub = $.connection.messageHub;

      // Create a function the hub can call to send messages
      hub.client.receiveMessage = function (message) {

      // Html encode the message
      var encodedMessage = $('<div />').text(message).html();

      var data = JSON.parse(encodedMessage);

      // Clear previous messages
      $('.message-content').empty();

       // Display each item
       // in the json-array
       $.each(data, function () {

           $('.message-content').append(
              '<div>' +
              '<b>' + this['Subject'] + '</b>' + '<br/>'
              + 'Date Created: ' + this['DateCreated'] + '<br/>'
              + 'Sent by: ' + this['SentBy'] + '</div>'

              );

           });

        };

        // Start the connection
        $.connection.hub.start();
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:33:04.720

从 SignalR 发送到您的 receiveMessage 客户端方法的数据可能不是`stringified`普通的 JavaScript 对象。`stringify`在 HTML 编码之前尝试一下：

```
 hub.client.receiveMessage = function (message) {

      // Html encode the message
      var stringifiedMessage = JSON.stringify(message);
      var encodedMessage = $('<div />').text(stringifiedMessage).html();
      // ... 
```

# linux - 如何将 '<' 和 '>' 传递给 bash 脚本？

> ID：15270219
> 
> 赞同：0
> 
> 时间：2013-03-07T11:39:40.037
> 
> 标签：linux, bash

我有 bash 脚本可以在另一个线程中运行进程并杀死它，如果它在超时后挂起。一切正常，但是当进程需要'<'作为输入或'>'输出到另一个文件时，它不计算它们。代码：

```
#!/bin/bash
($1)&
PID=$!
echo "Program '"$1"' started, PID="$PID
i=1
while [ $i -le 600 ]
    do
    ps -p $PID >> /dev/null
    if [ $? -ne 0 ]
      then
      wait $PID
      exit $? #success, return rc of program
    fi
    i=$(($i+1))
    echo "waiting 1 second..."
    sleep 1
done

#program does not want to exit itself, kill it
echo "killing program..."
kill $PID
exit 1 #failed 
```

我像这样使用它：

```
safestart.sh './bzip2 -d  sample2.bz2 -k' 
```

一切都如预期的那样，但如果我使用这样的东西：

```
safestart.sh './cc_dry2 < dhryinput > results' 
```

它没有'<'或'>'符号。我已经用“”试过了。同样的结果，我完全迷失在这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:52:40.340

### 解决方案

问题是这条线：

```
($1)& 
```

您应该改用：

```
eval $1 & 
```

另请参阅以下示例以更好地理解问题。

### 例子

```
cmd="echo TEST"
$(${cmd}) 
```

给出：

> 测试：找不到命令

```
cmd="echo TEST"
eval ${cmd} 
```

给出：

> 测试

# php - PHP var_dump 显示 string(2) "55" 。如何回显该值并分配给变量？

> ID：15270223
> 
> 赞同：0
> 
> 时间：2013-03-07T11:39:49.740
> 
> 标签：php

当我运行代码时

```
var_dump($data); 
```

这就是我得到的：

```
string(2) "55" 
```

如何回显这个并将“55”分配给变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:42:00.243

您可以直接分配和直接打印。

```
 echo $data;
 $var = $data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:47:49.127

您可以使用 echo 打印分配给变量的值。

```
echo($data); 
```

# php - PHP pg_query 未执行

> ID：15270230
> 
> 赞同：1
> 
> 时间：2013-03-07T11:40:00.020
> 
> 标签：php, sql, postgresql

我在 PostgreSQL 中有这个问题，我正在解析网页元标记，然后将请求输入到 pg_query 中。在此示例中为简洁起见，未对数据进行清理。

所以是这样的：

```
foreach ($metas as $meta) {
    $property = $meta->getAttribute('property');
    $content = $meta->getAttribute('content');

$query = "UPDATE " . $tablename . " SET article_meta = article_meta || '$property=>$content'::hstore where article_id = '{$this -> article_id}' ;";

pg_query($conn, $query);

} 
```

问题是，查询不会执行，也不会失败或抛出任何错误。但是，如果我复制已执行的查询并通过 pgadmin 之类的东西运行它，它就可以工作。所以查询不是无效的。关于为什么会发生这种情况的任何想法？

我应该提到，当我添加触发器以更新全文搜索 tsvector 时，这种行为可能已经开始，但我看不出这是如何相关的。

更新

另外我想补充一点，我有一个同步功能，它稍后会运行，但只执行元标记的解析，并且查询有效。所以某处阻止了查询的执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:26:13.250

现在您说数据块正在运行，因为您可以将查询回显到屏幕并运行。这大大缩小了可能性。

在我看来，最有可能的情况就是您忘记提交交易。尝试：

```
pg_query('commit'); 
```

循环之后。这可能会解决您的问题。

另一种可能性是连接已关闭，但通常 IME 在这种情况下至少会引发警告。您可能想在同一连接上尝试一些选择查询，以确保它是打开的。

最后，您可能想尝试使用网络分析器来观察进出数据库的流量（假设您没有使用本地套接字）。这应该让您更深入地了解到底发生了什么。

# ios - 在 2 个文本视图中拆分字符串

> ID：15270238
> 
> 赞同：1
> 
> 时间：2013-03-07T11:40:30.493
> 
> 标签：ios, cocoa-touch, text, nsstring, textview

我正在使用 3 个文本视图在我的 iOS 应用程序中创建简单的列。我正在尝试将我的字符串（根据文章长度不同）拆分为 3。

这个想法是，当一个文本视图被填充时，它会开始填充下一个，等等。

我已经尝试过字符计数，这不考虑换行符，因此不起作用，因为我希望它在不滚动的情况下被修复。

# html - 完成 Paypal 付款后，用户检索订单描述

> ID：15270239
> 
> 赞同：0
> 
> 时间：2013-03-07T11:40:43.297
> 
> 标签：html, database, paypal

我有一个“热点”系统，用户通过 PayPal 支付互联网访问费用。付款后，您将被引导回热点并提供您的代码。

我遇到的问题是人们忘记或没有写下他们的代码。我希望他们访问我的网站并输入他们的姓名、电子邮件和订单日期，然后向他们提供他们的代码（这是 PayPal 中的订单描述）。

我只有基本的 HTML 知识，但往往能够自己解决问题，但这有点远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:28:40.057

您可以使用 IPN 将用户的代码发送到他们的电子邮件。这样，如果他们不写下来，他们可以去检查他们的电子邮件并获取代码。基本上，当买家完成付款时会发送 IPN，一旦您的 IPN 系统确认这一点，您只需将其设置为向用户发送一封包含其代码的电子邮件。

# objective-c - 当我有来自服务器的图像时，滚动速度较慢

> ID：15270243
> 
> 赞同：0
> 
> 时间：2013-03-07T11:40:57.617
> 
> 标签：objective-c, uitableview, ios6, uiimageview

我拥有的是tableView。在每个单元格中，我都在旁边显示图像和名称以及一些细节。图片在服务器上。对于图像，我正在做的是下面。

```
UIImageView *imagePathImage = (UIImageView *)[cell viewWithTag:9999999984];
test1 = [NSString stringWithFormat:@"%@", [[news objectAtIndex:indexPath.row] objectForKey:@"imagePath"]];
if ([test1 isEqualToString:@"missing"]) {
    imagePathImage.image = [UIImage imageNamed:@"no_image.png"];
} else {
    imagePathImage.image = [[UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:[NSString stringWithFormat:@"http://www.mysite.com/sama/myImages/image%@.jpg", [[news objectAtIndex:indexPath.row] objectForKey:@"id"] ]]]] retain];
} 
```

我正在以 JSON 格式提取数据。

问题是当我向下滚动时，加载下一项需要时间，因为我提供了服务器路径的图像。如果我隐藏图像代码，滚动会快得多。但是，当我有图像时，加载图像需要时间。

我的问题是，iPhone 应用程序中的这种行为是可以的，还是我应该先下载图像（本地）然后显示它们？

或者

在存储图像时，我应该将图像的分辨率更改为 60x60，因为我的图像图标大小为 60x60。

* * *

## 编辑 1

我用迈克尔罗宾逊的答案。为了调整大小，我使用了下面链接中的代码。

[调整图像大小](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:43:35.417

将您的图像大小调整为不大于您在应用程序中使用的最大尺寸，这将节省内存并减少下载时间。

如果这没有帮助或不能充分提高性能，请在滚动到视图时调查延迟加载图像。

**编辑**：正如其他人所说，您还应该在另一个线程上异步加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:48:45.490

尝试延迟加载图像。[你可以在这里](http://codeshape.wordpress.com/2011/05/10/creating-a-lazy-loading-uiimageview-for-ios/)得到一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:50:20.800

我会异步加载它们。

看看这个教程。它很容易理解，并且几乎完全符合您的需要。 [http://www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:51:32.143

**首先，使用**[EGOImageView](https://github.com/enormego/EGOImageLoading/tree/master/EGOImageView)异步加载图像，或者使用 NSThread 将图像分离到线程中。

```
NSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(requestImageFromServer) object:nil];
[thread start]; 
```

**其次**，缓存已经加载的图像。EGOImageView 已经有了。使用您自己的逻辑 - 将图像保存到文件系统并获取它们，之前与 nil 进行比较（使用 NSFileManager）。

# iphone - 我想从短信打开我的应用

> ID：15270247
> 
> 赞同：0
> 
> 时间：2013-03-07T11:41:08.503
> 
> 标签：iphone, ios

我正在创建一个通过短信发送数据的应用程序。现在我希望当用户点击该短信时，我的应用程序将打开，并在短信中的链接中发送该数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:45:34.417

您可以使用[自定义 URL 方案](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:07:03.100

您可以使用 URL 方案实现此目的。作为参考，您可以查看此[Apple 文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)。对于实施结帐这个[mobile.tutsplus 教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)。而且[这个链接](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)也是学习 URL scheme 的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:15:10.093

允许您的应用程序响应某个 url（例如： myapp://launch ）并在 SMS 中包含该 url，当用户启动该 URL 时，您的应用程序将启动。

看看这个[launch-application-via-url-scheme](http://inchoo.net/mobile-development/iphone-development/launching-application-via-url-scheme/)

享受编程！！

# c# - 如何在 c#.net 中使用单个变量而不是使用多个变量

> ID：15270250
> 
> 赞同：1
> 
> 时间：2013-03-07T11:41:12.410
> 
> 标签：c#

```
Decimal Basic, Da, HRA, CCA, convey, splall, deduction1, deduction2, deduction3, deduction4, deduction5;
Decimal.TryParse(txtBasicSalary.Text, out Basic);
Decimal.TryParse(txtDA.Text, out Da);
Decimal.TryParse(txtHRA.Text, out HRA);
Decimal.TryParse(txtCCA.Text, out CCA);
Decimal.TryParse(txtConvey.Text, out Convey);
Decimal.TryParse(txtSplAll.Text, out splall);
Decimal.TryParse(txtdeduction1.Text, out deduction1);
Decimal.TryParse(txtdeduction2.Text, out deduction2);
Decimal.TryParse(txtdeduction3.Text, out deduction3);
Decimal.TryParse(txtdeduction3.Text, out deduction4);
Decimal.TryParse(txtdeduction5.Text, out deduction5);
drTmp["empl_Basic"] = Basic;
drTmp["empl_DA"] = Da;
drTmp["empl_HRA"] = HRA;
drTmp["empl_CCA"] = CCA;
drTmp["empl_Convey"] = convey;
drTmp["empl_Splall"] = splall;
drTmp["empl_Deduction1"] = deduction1;
drTmp["empl_Deduction2"] = deduction2;
drTmp["empl_Deduction3"] = deduction3;
drTmp["empl_Deduction4"] = deduction4;
drTmp["empl_Deduction5"] = deduction5; 
```

我使用上面的代码进行十进制转换，对于所有文本框，我使用多个变量并传递这些变量，而不是我可以对所有人使用相同的变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:45:23.653

您可以编写一个实用方法：

```
static decimal TryParse(
  string value, decimal @default = 0M)
{
    decimal ret;
    return decimal.TryParse(value, out ret) ? ret : @default;
} 
```

并使用它：

```
drTmp["empl_Basic"] = TryParse(txtBasicSalary.Text);
drTmp["empl_DA"] = TryParse(txtDA.Text);
drTmp["empl_HRA"] = TryParse(txtHRA.Text); 
```

下面的用法还允许对无效数据进行非零处理：

```
drTmp["empl_HRA"] = TryParse(txtHRA.Text, 6.5M); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:47:46.920

您可以根据需要使用方法，例如作为扩展方法：

```
public static Decimal? TryGetDecimal(this string item)
{
    Decimal d;
    bool success = Decimal.TryParse(item, out d);
    return success ? (Decimal?)d : (Decimal?)null;
} 
```

现在您根本不需要显式变量声明，只需使用返回值：

```
drTmp["empl_Basic"] = txtBasicSalary.Text.TryGetDecimal() ?? 0;
drTmp["empl_DA"] = txtDA.Text.TryGetDecimal() ?? 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:46:33.840

是的你可以。我曾经遇到过您的问题并为 Textbox 控件实现了扩展。它是一种通用方法，可以转换十进制、整数、任何值类型。

```
public static T? GetTextOrNullStruct<T>(this TextBox txt, GlobalSist.Common.Utils.ParserCondition? parserCondition, bool throwOnValidation)
    where T : struct, IComparable<T>
{
    return GlobalSist.Common.Utils.Parsers.ConvertStruct<T>(
        GetTextOrNull(txt), parserCondition, throwOnValidation);
}

public static T? ConvertStruct<T>(IConvertible value, ParserCondition? parserCondition, bool throwOnValidation)
    where T : struct, IComparable<T>
{
    try
    {
        if ((value == null) ||
            (value is string && string.IsNullOrEmpty((string)value)))
        {
            if (throwOnValidation)
                throw new ArgumentNullException("value");
            else
                return null;
        }
        return Parsers.Convert<T>(value, parserCondition, true);
    }
    catch (ArgumentOutOfRangeException)
    {
        if (throwOnValidation)
            throw;
        else
            return null;
    }
} 
```

这是转换为字符串的方法

```
public static T Convert<T>(IConvertible value, ParserCondition? parserCondition, bool throwOnValidation)
            where T : IComparable<T>
        {
            T convertedValue;
            try
            {
                convertedValue = (T)value.ToType(typeof(T), null);
            }
            catch (Exception ex)
            {
                if (throwOnValidation)
                    throw new ArgumentOutOfRangeException(ex.Message, ex);
                else
                    return default(T);
            }
            return ValidateParserCondition<T>(convertedValue, parserCondition, throwOnValidation);
        } 
```

* * *

编辑：忘记粘贴最后调用的方法

* * *

```
private static T ValidateParserCondition<T>(T value, ParserCondition? parserCondition, bool throwOnValidation)
    where T : IComparable<T>
{
    if (parserCondition == null)
        return value;
    else
    {
        int comparingToZero = value.CompareTo(default(T));
        switch (parserCondition.Value)
        {
            case ParserCondition.GreaterOrEqualToZero:
                if (comparingToZero >= 0)
                    return value;
                break;
            case ParserCondition.GreaterThanZero:
                if (comparingToZero > 0)
                    return value;
                break;
            case ParserCondition.LessOrEqualToZero:
                if (comparingToZero <= 0)
                    return value;
                break;
            case ParserCondition.LessThanZero:
                if (comparingToZero < 0)
                    return value;
                break;
            default:
                throw new NotImplementedException("ParserCondition at ValidateParserCondition");
        }
        if (throwOnValidation)
            throw new ArgumentOutOfRangeException(
                string.Format("value {0} not in accordance with ParserCondition {1}",
                value, parserCondition.Value.ToString()));
        else
            return default(T);
    }

} 
```

枚举声明是：

```
public enum ParserCondition
{
    /// <summary>
    /// &gt;=0
    /// </summary>
    GreaterOrEqualToZero,
    /// <summary>
    /// &gt;0
    /// </summary>
    GreaterThanZero,
    /// <summary>
    /// &lt;=0
    /// </summary>
    LessOrEqualToZero,
    /// <summary>
    /// &lt;0
    /// </summary>
    LessThanZero,

} 
```

# gtk - gtk_init() 意外失败

> ID：15270251
> 
> 赞同：1
> 
> 时间：2013-03-07T11:41:17.383
> 
> 标签：gtk, x11, raspberry-pi

我正在使用带有 GTK+ 的树莓派，意思是 ARM+Debian+GTK+。但即使是 GTK 网站的示例在我的环境中也总是失败。像：

```
#include <gtk/gtk.h>

int main( int   argc,
      char *argv[] )
{
GtkWidget *window;

//gtk_init (&argc, &argv);
gtk_init_check(&argc, &argv);

window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
gtk_widget_show  (window);

gtk_main ();

return(0);
} 
```

我编译了这个

```
gcc -g gtktest.cpp -o base `pkg-config gtk+-2.0 --cflags --libs` 
```

并成功。运行它时，我得到：

```
(base:12760): GLib-GObject-WARNING **: invalid (NULL) pointer instance

(base:12760): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion `G_TYPE_CHECK_INSTANCE (instance)' failed

(base:12760): Gtk-WARNING **: Screen for GtkWindow not set; you must always set
a screen for a GtkWindow before using the window

(base:12760): Gdk-CRITICAL **: IA__gdk_screen_get_default_colormap: assertion `GDK_IS_SCREEN (screen)' failed

(base:12760): Gdk-CRITICAL **: IA__gdk_colormap_get_visual: assertion `GDK_IS_COLORMAP (colormap)' failed

(base:12760): Gdk-CRITICAL **: IA__gdk_screen_get_default_colormap: assertion `GDK_IS_SCREEN (screen)' failed

(base:12760): Gdk-CRITICAL **: IA__gdk_screen_get_root_window: assertion `GDK_IS_SCREEN (screen)' failed

(base:12760): Gdk-CRITICAL **: IA__gdk_screen_get_root_window: assertion `GDK_IS_SCREEN (screen)' failed

(base:12760): Gdk-CRITICAL **: IA__gdk_window_new: assertion `GDK_IS_WINDOW (parent)' failed
Segmentation fault 
```

只使用 gtk_init() 也会导致错误。我检查了 DISPLAY 变量并尝试将其设置为 < my IP >:0.0 但没有效果。我怀疑这可能是GTK无法获取显示资源的问题，但我没有找到解决这个问题的方法。

仅供参考，我正在使用腻子 SSH 连接到树莓派。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:49:15.437

你似乎对你所做的事情很陌生，所以我想到了两件事

*   （如前所述）您需要一个正在运行的 xserver 实例
*   您的`DISPLAY`bash 变量是否产生正确的显示（AFAIK gtk+-2.0 尊重这一点，还要确保它被正确导出）
*   `xhost +`允许从另一个终端访问您当前的 xserver（**请注意**，这有严重的安全问题，有关详细信息，请阅读[http://www.tldp.org/LDP/intro-linux/html/sect_10_05.html](http://www.tldp.org/LDP/intro-linux/html/sect_10_05.html)并参考 xhost 手册页 - 否捷径！）

有关详细信息，请阅读[http://www.hungry.com/~jamie/xexport.html](http://www.hungry.com/~jamie/xexport.html)

并且要小心 xserver 文档/主题，网上有很多过时的东西。

# ruby - 获取 rspec 文件的执行持续时间

> ID：15270252
> 
> 赞同：0
> 
> 时间：2013-03-07T11:41:25.743
> 
> 标签：ruby, rspec

从终端运行 rspec 文件后 - 您可以从终端输出查看所有测试的执行持续时间。它看起来像这样：

```
3 examples, 0 failures, 3 passed
Finished in 65.007918085 seconds 
```

有什么方法可以将该持续时间保存到变量中（例如 - 将测试时间统计信息发送到数据库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:33:05.983

我相信您可以使用 rspec 自定义格式化程序来访问这些数据，并控制输出的显示方式。如果你幸运的话，其他人可能已经写了一个你可以重复使用的。或者，您可能只需要对您已经使用的格式化程序进行子类化，并扩展方法 start_dump 以对持续时间数据做一些有趣的事情，然后调用 super.

要调用自定义格式化程序，您只需执行

```
rspec -f MyFormatter name_of_test_spec.rb 
```

有关 rspec 自定义格式化程序的更多信息：

[https://www.relishapp.com/rspec/rspec-core/docs/formatters/custom-formatters](https://www.relishapp.com/rspec/rspec-core/docs/formatters/custom-formatters)

[http://rubydoc.info/gems/rspec-core/2.6.4/RSpec/Core/Formatters/BaseFormatter](http://rubydoc.info/gems/rspec-core/2.6.4/RSpec/Core/Formatters/BaseFormatter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:12:13.700

将输出通过管道传输到 shell 并使用正则表达式来提取持续时间。

# python - zerodivisionerror-浮点除法误差

> ID：15270254
> 
> 赞同：-3
> 
> 时间：2013-03-07T11:41:42.647
> 
> 标签：python

```
ctr=0.0
i=0
pc=0.0
pi=0.0
nc=0.0
ni=0.0

for line in fileinput.input(['/pro/file1']):
    line = line.replace("\n", "")
    if (i < len(revs)): 
        if('pos' in revs[i]):
            if(float(line) > 0):
                ctr=ctr+1
                pc=pc+1

            else:
                                pi=pi+1

        elif('neg' in revs[i]):
            if(float(line) < 0):
                ctr=ctr+1
                nc=nc+1

            else:
                                ni=ni+1

    i=i+1
precision = pc/(pc+pi)
recall = pc/(ni+pc) 
```

这段代码是关于情绪分析的。当我尝试查找准确性和召回时，我得到**ZeroDivisionError:Float 除以零。如何修复它？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:47:55.943

不知道这是否适合您的情况，解决此问题的一种方法是执行类似的操作

```
precision = pc/(pc+pi) if (pc+pi) else 0
recall = pc/(ni+pc) if (ni+pc) else 0 
```

在没有可除的情况下，这将给出一个零。可能是您需要的，可能是可怕地隐藏了一个真正的错误。

编辑：如果您的数据使您每次都采用“neg”分支，则 pc 和 pi 将为零，因此您将在 div/0 错误

```
precision = pc/(pc+pi) 
```

...所以这就是*原因*。

# objective-c - SimpleFTPSample - 如果用户名有空格，则登录不正确

> ID：15270265
> 
> 赞同：1
> 
> 时间：2013-03-07T11:42:01.027
> 
> 标签：objective-c, cocoa, ftp, whitespace

在 Apple 的[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)中，如果用于登录 FTP 的用户名有空格，则会出现错误消息。可以使用带有空格的用户名登录 FTP，因为`filezilla`我可以登录。必须/如何编辑此示例才能使用用户名中的空格？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T12:45:38.687

在 Apple 的 SimpleFTPSample 中，ftp URL 用于提供用户名和密码。

就像是：

```
CFURLRef url = (CFURLRef) [NSURL urlWithString:@"ftp://username:password@host/folder/"];
CFReadStreamRef stream = CFReadStreamCreateWithFTPURL(NULL, url); 
```

但是你可以明确地提供它们

```
CFURLRef url = (CFURLRef) [NSURL urlWithString:@"ftp://host/folder/"];
CFReadStreamCreateWithFTPURL(NULL, url);
CFReadStreamSetProperty(stream, kCFStreamPropertyFTPUserName, CFSTR("user name"));
CFReadStreamSetProperty(stream, kCFStreamPropertyFTPPassword, CFSTR("password")); 
```

以我的经验，当“用户名”中有空格时，这有效

# c# - Plupload保存数据到控制器

> ID：15270266
> 
> 赞同：1
> 
> 时间：2013-03-07T11:42:03.957
> 
> 标签：c#, javascript, asp.net-mvc, amazon-s3, plupload

我在尝试使用 Plupload 将数据上传到 Amazon S3 并将文件名保存到我的控制器时遇到问题。

表格看起来像这样......

```
@using (Html.BeginForm("SavePhotos", "QuoteWizard", FormMethod.Post, new { enctype =   "multipart/form-data"}))
{

<div id="uploader">
    <p>You browser doesn't have Flash, Silverlight, Gears, BrowserPlus or HTML5 support.</p>
</div>

<input type="hidden" name="key" value="@Model.FileId-${filename}">
<input type="hidden" name="AWSAccessKeyId" value="@Model.PublicKey"> 
<input type="hidden" name="acl" value="@Model.Acl"> 
<input type="hidden" name="success_action_redirect" value="@Model.RedirectUrl">
<input type="hidden" name="policy" value="@Model.Policy">
<input type="hidden" name="signature" value="@Model.Signature">
<input type="file" name="file" /> 
```

}

像这样的脚本...

```
$(document).ready(function() {

        $("#uploader").plupload({
            //amazon settings.
            runtimes: 'flash,silverlight',
            url: 'https://[mybucket].s3-eu-west-1.amazonaws.com',
            max_file_size: '10mb',
            multipart: true,
            multipart_params: {
                'key': '${filename}', // use filename as a key
                'Filename': '${filename}', // adding this to keep consistency across the runtimes
                'acl': $('#Acl').val(),
                'Content-Type': 'binary/octet-stream',
                'success_action_status': '201',
                'AWSAccessKeyId': $('#AWSAccessKeyId').val(),
                'policy': $('#Policy').val(),
                'signature': $('#Signature').val()
            },
            preinit: attachCallbacks,
            // optional, but better be specified directly
            //file_data_name: 'file',
            // re-use widget (not related to S3, but to Plupload UI Widget)
            //multiple_queues: true,

            // Resize images on clientside if we can
            //resize: { width: 320, height: 240, quality: 90 },

            // Specify what files to browse for
            filters: [
                // { title: "Video files", extensions: "mp4,m4v,wmv,avi,mov,mpg,mpeg,mkv" }
                { title: "Image files", extensions: "jpg,gif,png" }
            ],

            // Flash settings
            flash_swf_url: '/RAPPMBCVSite/Scripts/plupload/plupload.flash.swf',

            // Silverlight settings
            silverlight_xap_url: '/RAPPMBCVSite/Scripts/plupload/plupload.silverlight.xap'
        });
    });

    function attachCallbacks(Uploader) {
        Uploader.bind('FileUploaded', function(Up, File, Response) {
            if ((Uploader.total.uploaded + 1) == Uploader.files.length) {
                $('form')[0].submit();
                //window.location = 'http://localhost/RAPPMBCVSite/QuoteWizard/LabelPhoto';
            }
        });

    } 
```

像这样的控制器（目前最小）

```
[HttpPost]
    public virtual ActionResult SavePhotos(HttpPostedFileBase file)
    {
        HttpPostedFileBase FileData = Request.Files[0];
        return RedirectToAction(MVC.QuoteWizard.LabelPhoto());
    } 
```

我在 Stack Exchange 上找到了几个答案，但没有一个有效。

目前传递给控制器​​的数据为空。

提前感谢您的帮助。

# asp.net - 什么 Jenkins 插件可用于 .NET 网站部署？

> ID：15270268
> 
> 赞同：14
> 
> 时间：2013-03-07T11:42:09.533
> 
> 标签：asp.net, msbuild, jenkins, web-deployment, microsoft-web-deploy

我们使用： - SVN - Jenkins - MS Build 插件

我们有几个 Web 窗体/MVC/Web 服务。

我们将设置 Microsoft Web Deploy 并从 Jenkins 运行 bat 文件。

也许有人可以提出更好的方法来做到这一点，或者这看起来是最有效的解决方案？

先感谢您。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-10T16:03:28.157

*WebDeploy 绝对*是部署 Web 应用程序的**正确方法。**

从*VS2010*开始，在简单场景中运行 Web 部署的目标“内置”到项目文件（以及 PC 上的 msbuild 扩展文件）中。从*VS2012*开始，您还可以使用*发布配置文件*功能，该功能允许将发布详细信息存储在一个简单的文件中。例如，您可以运行类似的东西：

```
msbuild MyProject.csproj /p:DeployOnBuild=true /p:PublishProfile=<profile-name> /p:Password=<insert-password> /p:VisualStudioVersion=11.0 
```

这将构建应用程序并使用`profile-name`发布配置文件发布它。

*   查看[本文](http://msdn.microsoft.com/en-us/library/dd465337.aspx)的*“创建发布配置文件”*部分，了解有关创建发布配置文件的更多信息。
*   查看 Sayed Ibrahim Hashimi 的这篇[文章](http://sedodream.com/2013/01/06/CommandLineWebProjectPublishing.aspx)，以获取有关使用 VS 2012 发布自动化的参考。
*   Troy Hunt也有[一系列](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_11.html)关于使用 TeamCity 自动部署的博客文章（他使用 vs2010，因此如果您使用的是 VS2010，这可能会有所帮助）

当我们被限制为没有项目文件 web 部署集成的*.NET 3.5*和*VS2008时，我们使用 bat 文件直接运行 webdeploy 命令。*

希望能帮助到你，

伊万

# objective-c - 将图像存储在具有相同名称和扩展名的文档目录路径中

> ID：15270270
> 
> 赞同：-1
> 
> 时间：2013-03-07T11:42:12.233
> 
> 标签：objective-c, cocoa-touch

我有一个 url，它从服务器下载图像并将
其`NSData`存储到我的本地路径。

```
thedata = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",[CNPlayerURL getUniqueIdAvailable],imageUrl]]];

[thedata writeToFile:localFilePath atomically:YES]; 
```

现在我的问题是我是否可以下载存储在路径中的图像的名称和扩展名。因为现在我`localFilePath`的文档目录路径附加了图像名（我给它一个带有`.jpg`扩展名的唯一 ID）

就像我在浏览器中使用我的 url

```
http:/myserverurl/groupid/199/blob 
```

它正在下载此图像：

![在此处输入图像描述](../Images/d7b786389af60773769ce21783098fa7.png)

现在我想用这个名称和扩展名保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:54:38.660

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *jpgFilePath = [NSString stringWithFormat:@"/%@/%@", YourDirectoryName,[imageUrl lastPathComponent]];
NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:jpgFilePath];
NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath:getImagePath]) {
        NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(image)];
        [data1 writeToFile:getImagePath atomically:YES];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:33:51.963

`suggestedFilename`您可以使用这样的方法获取“可下载文件名” `NSURLResponse`。

```
-(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"Downloadable FileName: %@",[response suggestedFilename]);
    NSLog(@"Downloadable MIMEType: %@",[response MIMEType]);
    NSLog(@"Downloadable ContentLength: %lld",[response expectedContentLength]);
    [webData setLength:0];
} 
```

# mdx - 使用 Order 子句时出现 MDX 查询错误 - 函数参数需要表达式，但未检测到表达式

> ID：15270272
> 
> 赞同：0
> 
> 时间：2013-03-07T11:42:16.023
> 
> 标签：mdx

我有这个 MDX 查询，我试图在这个查询中添加 Order 子句。我得到的错误是：函数参数需要一个表达式，但没有检测到表达式。

请建议如何在此查询中添加 order 子句。

```
WITH 
MEMBER [Measures].[DateMax] AS
    DateAdd('s', -1, DateAdd('h', 1, [TIME].[TIME].LastChild.PrevMember.Member_VALUE))

SELECT
non empty { [Measures].[DURATION], 
    [Measures].[SELL], 
    [Measures].[BUY], 
    [Measures].[PROFIT], 
    [Measures].[PROFIT PERCENTAGE]}  on columns,
non empty (                         
    ([CUSTOMERS].[CUSTOMER].[CUSTOMER])
  -- ORDER([CUSTOMERS].[CUSTOMER].[CUSTOMER], ASC)
  ) on rows
FROM [PROFIT] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:43:52.203

您错过了`[Order]`语句的参数。[这](http://msdn.microsoft.com/library/ms145587.aspx)是文档

```
ORDER([CUSTOMERS].[CUSTOMER].[CUSTOMER], [Measures].[SELL], ASC) 
```

可能会解决你的问题。您需要一个数字或字符串表达式来排序：在我的示例中，您将按 SELL 度量值排序。

# java - boolean[] 无法解析为变量

> ID：15270278
> 
> 赞同：1
> 
> 时间：2013-03-07T11:42:27.103
> 
> 标签：java

在课堂`SitoEratostenesaTest`上，我有：

```
SitoEratostenesa myObj = new SitoEratostenesa(liczby[x]);

for(i=1; i<ilosc; i++)
{
    if(tab[i])
    {
        System.out.println((i+1)+" jest liczba pierwsza");
    }
    else
    {
        System.out.println((i+1)+" jest liczba zlozona");
    }
} 
```

`boolean tab[]`是在课堂上创建的`SitoEratostenesa`。在我的情况下如何使用这张桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:46:32.967

您需要在课堂上使用`myObj.tab[i]`来引用`tab[]`。没有您的对象，它没有参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:47:18.030

是`SitoEratostenesa.tab`静态的吗？如果不是，您将需要引用`SitoEratostenesa`first 的实例。

假设`SitoEratostenesa.tab`可以访问（例如公共）`SitoEratostenesaTest`，那么以下应该有效：

```
 if(SitoEratostenesa.tab[i]) 
```

如果`tab`不是静态的，则需要通过 SitoEratostenesa 的实例来访问它：

```
SitoEratostenesa yourInstance = ...

if(yourInstance.tab[i]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:49:56.930

尝试从 SitoEratostenesa 获取选项卡数组，例如使用`myObj.getTab()`和使用它`myObj.getTab()[i]`。如果它不在那里，它可能会直接到达，这通常不是一个好习惯，那么它被称为 like `myObj.tab[i]`。如果它们都不存在，那么您需要（如果允许）创建一个返回`tab`.

# android - 我可以在 android 应用程序的主题中设置 android:textColor，但我不能设置 android:text - 为什么？

> ID：15270280
> 
> 赞同：0
> 
> 时间：2013-03-07T11:42:46.557
> 
> 标签：android, android-ui

当我在我的 Android 应用程序中创建自己的主题时，我可以设置默认的 textColor：

```
<style name="MyStyle">
    <item name="android:textColor">#ffff00</item>
</style> 
```

但是，当我尝试 - 只是为了实验 - 设置默认文本时，它不起作用：

```
<style name="MyStyle">
    <item name="android:text">tralala</item>
</style> 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:58:28.730

我认为样式用于 UI 属性和可重用性，

```
<style name="MyStyle">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">fill_parent</item>
        <item name="android:gravity">center</item>
        <item name="android:layout_weight">1</item>
        <item name="android:textAppearance">?android:attr/textAppearanceMedium</item>
        <item name="android:textSize">15sp</item>
        <item name="android:textColor">@color/survey_list_item_heading</item>
    </style> 
```

如果你会使用

```
<item name="android:text">tralala</item> 
```

然后它不会被其他 TextView 重用。所以最好定义除文本之外的所有标签，以便其他 TextView 也一样。

```
 <TextView
                android:id="@+id/ptr_id_last_updated"
                style="@style/MyStyle"
                android:text="Your Text" /> 
```

希望你能照顾好这些事情。谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:54:27.833

style 资源用于定义 UI 的外观和感觉，而不是定义默认文本。为此使用字符串资源

# java - hibernate-查询行，具有来自两列的不同值对

> ID：15270281
> 
> 赞同：3
> 
> 时间：2013-03-07T11:42:48.070
> 
> 标签：java, spring-mvc, hibernate-4.x

我有一张像这样的桌子：

```
id|column_1|column_2|column_3|
 0|   A    |   100  |   10   |
 1|   B    |   100  |   20   |
 2|   C    |   1000 |   10   |
 3|   D    |   100  |   10   | 
```

我想查询这样我想要不同的（column_2 和 column_3），意味着**column_2 和 column_3 的组合必须是不同的**。所以我想要的结果是：

```
id|column_1|column_2|column_3|
 0|   A    |   100  |   10   |
 1|   B    |   100  |   20   |
 2|   C    |   1000 |   10   | 
```

我正在使用带有 mysql 的 STS MVC & hibernate4。任何建议表示赞赏。

我现在使用的代码是：

```
Session ses=sf.getCurrentSession();
Criteria criteria=ses.createCriteria(myclass.class);
ProjectionList projList = Projections.projectionList();
projList.add(Projections.property("column_2"));
projList.add(Projections.property("column_3"));
criteria.setProjection(Projections.distinct(projList)); 
```

但它只是返回不同的值，我想要完整的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:34:07.667

试试这个：

```
select column1, column2, column3 from table group by column2, column3 
```

问候， 阿伦

# c# - 从 Web 项目外部的 Web 内容文件夹中获取图像

> ID：15270283
> 
> 赞同：1
> 
> 时间：2013-03-07T11:42:56.767
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

**目标**

我在同一个解决方案中有 2 个项目，目标是从域项目的 Web 项目中获取图像。

1.  Project.web ("web application") *"这里是图片 /Content/Images"*
2.  Project.domain ("所有域实体") *"我要从这里拿走！！"*

**我试图从我的 Web“内容/图像”文件夹中读取的问题**
，但我不知道如何设置 url 以及是否可以这样做。

有效的丑陋和肮脏的代码是这样的：但我不想修复文件夹上的图像>

```
Image logo = Image.FromFile(@"c:\folder\img.png"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-13T14:45:50.970

我花了一些时间搜索**服务器**变量，享受！:)

```
public async Task<IHttpActionResult> GetRenderImage(long id, int size = 0)
    {
        // Load template           
        var file = HttpContext.Current.Server.MapPath("~/Content/media/template.png"); 
        WebImage img = new WebImage(file);

        // some operations with image, for sample scale or crop
        ...

        // get image data
        var bytes = img.GetBytes("image/jpeg");

        // Save to blob
        var p = getCloudBlobContainer("RenderImg");
        CloudBlockBlob blob = p.GetBlockBlobReference(String.Format("{0}.jpg", id);
        blob.Properties.ContentType = "image/jpeg";

        await blob.UploadFromByteArrayAsync(bytes, 0, bytes.Length);
        var url = blob.Uri.ToString();

        // Redirect to Azure blob image
        return Redirect(url);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:44:17.683

您意识到，当您在 IIS 中部署应用程序时，不再有*其他项目*的概念。因此，您应该将此图像作为 ASP.NET 应用程序的一部分。例如，您可以有一个构建后编译步骤，它将图像从您的 ASP.NET MVC 应用程序复制`Project.domain`到您的 ASP.NET MVC 应用程序（例如在`App_Data`文件夹内），以便在您的 MVC 应用程序中，您将能够使用 Server.MapPath 方法来访问图片：

```
using (var image = Image.FromFile(Server.MapPath("~/App_Data/img.png")))
{
    ...
} 
```

# php - 使用 PHP 获取最后 3 条推文

> ID：15270297
> 
> 赞同：1
> 
> 时间：2013-03-07T11:43:23.930
> 
> 标签：php, twitter

我有一个相当简单的任务，而且很好。我不知道如何得到我想要的结果。

我在网上找到了一些代码，如下所示：

```
<?php

function parse_feed($feed) {
 $stepOne = explode("<content type=\"html\">", $feed);
 $stepTwo = explode("</content>", $stepOne[1]);
 $tweet = $stepTwo[0];
 $tweet = html_entity_decode($tweet);
 return $tweet;
}

function showTwitter($username) {
$feed = "http://search.twitter.com/search.atom?q=from:" . $username . "&rpp=1";
 $twitterFeed = file_get_contents($feed);
 return stripslashes(parse_feed($twitterFeed));
}

echo showTwitter("brandrally");

?> 
```

它工作得很好，因为它返回**一个**结果，例如

```
@<a class=" " href="https://twitter.com/jackie_elliott1">jackie_elliott1</a> Best of luck for tomorrow! 
```

我真正想要的是从我们的时间线中检索最后**三条推文**并将它们输出到单独的 div 或 li 中。例如

```
<li>tweet 1</li>
<li>tweet 2</li>
<li>tweet 3</li> 
```

虽然我不知道从哪里开始，但这似乎很简单。任何帮助将不胜感激。

亲切的问候，

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:03:57.393

一些想法适合你：

```
<script src="http://twitter.com/javascripts/blogger.js" type="text/javascript"></script>
<script type="text/javascript"> 
(function() {
   var e = document.createElement('script'); 
   e.type = 'text/javascript';
  e.async = true;
    e.src = 'http://twitter.com/statuses/user_timeline/YOUR_USERNAME_HERE.json?
callback=twitterCallback2&count=3';
   document.getElementById('twitter_update_list').appendChild(e);
}());
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:45:28.650

您是否尝试过添加`&count=3`到您的`$feed`网址？

# java - 标记哈希图中的值

> ID：15270299
> 
> 赞同：1
> 
> 时间：2013-03-07T11:43:25.423
> 
> 标签：java, hashmap, stringtokenizer

我有一张地图，其中的键值和字符串一样长。地图的值是从数据库中获得的，格式如下。

```
1: BusinessPartner.name1,BusinessPartner.name2,BusinessPartner.name3,BusinessPartner.name4
2: BusinessPartner.name1,BusinessPartner.name2,BusinessPartner.name3
6: ADDRESS.addressline1,ADDRESS.addressline2,ADDRESS.addressline3 
```

其中 1,2,6 是键。

我需要对键 1 的字符串进行标记，结果应该是 Businesspartner，其他值应该是 name1、name2、name3、name4。我这样做是因为我需要将这些值放入另一个地图 Map(name1,name2,name3,name4)> 我可以拆分字符串，但如何将 Businesspartner 作为其他实体的公共值

谁能告诉我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:03:50.517

这对你的要求有用吗？

```
public class Tokenize {

    static Long keysFromDB[] = {1L, 2L, 6L};
    static String stringsFromDB[] = {
        "BusinessPartner.name1,BusinessPartner.name2,BusinessPartner.name3,BusinessPartner.name4",
        "BusinessPartner.name1,BusinessPartner.name2,BusinessPartner.name3",
        "ADDRESS.addressline1,ADDRESS.addressline2,ADDRESS.addressline3"};

    @Test
    public void tokenize() {
        // use linked hashmap to preserve the order
        Map<Long, Set<String>> tokenized = new LinkedHashMap<Long, Set<String>>();
        int c = 0;
        for(Long key : keysFromDB) {
            // use linked hashset to preserve the order
            Set<String> record = new LinkedHashSet<String>();
            String splitedDBStrings[] = stringsFromDB[c++].split("\\.|,");
            System.out.println("List: " + Arrays.asList(splitedDBStrings));
            for(String s : splitedDBStrings) {
                record.add(s);
            }
            System.out.println("Set:  " + record);
            tokenized.put(key, record);
        }

        System.out.println(tokenized);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:07:25.413

让我们从头开始：

```
final Pattern pattern = Pattern.compile("[,\\s*]?([^.]+)\\.([^,]+)[,\\s*]?");
final Map<Long, String> myMap = getMapFromSomewhere();    

for(final Map.Entry<Long, String> entry : myMap.entrySet()) {
  final String myString = entry.getValue(); 
  final Matcher matcher = pattern.matcher(myString);      
  final Map<String, List<String>> tokenised = new HashMap<String, List<String>>();
  while (matcher.find()) {
    final String key = matcher.group(1);
    List<String> names = tokenised.get(key);
    if(names == null) {
       names = new LinkedList<String>();
       tokenised.put(key, names)
    }
    names.add(matcher.group(2));
  }
  //do stuff with map.
} 
```

正则表达式分解如下：

*   `[,\\s*]?`可选地匹配逗号后跟未知（或零）长度的空格
*   `([^.]+)\\.`匹配到下一站的所有内容，后跟“。”
*   `([^,]+)`将所有内容带到匹配组中的下一个逗号
*   `[,\\s*]?`可选地匹配逗号后跟未知（或零）长度的空格

测试用例：

```
public static void main(String[] args) {

    final Pattern pattern = Pattern.compile("[,\\s*]?([^.]+)\\.([^,]+)[,\\s*]?");

    final String myString = "BusinessPartner.name1,BusinessPartner.name2,BusinessPartner.name3,BusinessPartner.name4";
    final Matcher matcher = pattern.matcher(myString);

    while (matcher.find()) {
        System.out.println(matcher.group(1));
        System.out.println(matcher.group(2));
    }
} 
```

输出：

```
BusinessPartner
name1
BusinessPartner
name2
BusinessPartner
name3
BusinessPartner
name4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:11:41.050

运行这个

```
public static void main(String[] args){
    Map<Long, String> dbmap = new HashMap<Long, String>();
    dbmap.put((long) 1, "BusinessPartner.name1,BusinessPartner.name2,BusinessPartner.name3,BusinessPartner.name4");
    dbmap.put((long) 2, "BusinessPartner.name1,BusinessPartner.name2,BusinessPartner.name3");
    dbmap.put((long) 6, "ADDRESS.addressline1,ADDRESS.addressline2,ADDRESS.addressline3");

    //Loop through the Map
    Iterator<Entry<Long, String>> iterator = dbmap.entrySet().iterator();
    while(iterator.hasNext()){

        Map.Entry<Long, String> entry = (Map.Entry<Long, String>) iterator.next();

        //Split the string on comma ','
        //result entries should be 'BusinessPartner.name1', 'BusinessPartner.name2' etc
        String[] commaSplit = entry.getValue().split(",");

        //loop through each entry
        for(int x=0; x<commaSplit.length; x++){

            //Split on Full Stop
            //Result should be 'BusinessPartner', 'name2'
            String[] dotSplit = commaSplit[x].split("\\.");

            //print out common Value
            System.out.println("Common Value is : " + dotSplit[0]);

            //print out second value
            System.out.println("Second Value is : " + dotSplit[1]);

            System.out.println();
        }
    }
} 
```

输出是这样的

> ```
> Common Value is : BusinessPartner
> Second Value is : name1
> 
> Common Value is : BusinessPartner
> Second Value is : name2
> 
> Common Value is : BusinessPartner
> Second Value is : name3
> 
> Common Value is : BusinessPartner
> Second Value is : name4
> 
> Common Value is : BusinessPartner
> Second Value is : name1
> 
> Common Value is : BusinessPartner
> Second Value is : name2
> 
> Common Value is : BusinessPartner
> Second Value is : name3
> 
> Common Value is : ADDRESS
> Second Value is : addressline1
> 
> Common Value is : ADDRESS
> Second Value is : addressline2
> 
> Common Value is : ADDRESS
> Second Value is : addressline3 
> ```

# windows-mobile-6 - 如何在 windows mobile 6 中捕捉 F1 和 F2？

> ID：15270300
> 
> 赞同：0
> 
> 时间：2013-03-07T11:43:29.617
> 
> 标签：windows-mobile-6

如何在我的设备中捕捉 F2 和 F1？

我必须在我的应用程序中使用它，但它不起作用

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:58:10.207

如果您是 C/C++ 程序员，您只需调用 AllKeys(TRUE); 在 WinMain 或您的启动代码中。

如果您是 .NET 程序员，您可以在此处阅读全文：[http ://www.hjgode.de/wp/2012/09/20/windows-mobile-cf-how-to-catch-f1-and- f2-in-weh/](http://www.hjgode.de/wp/2012/09/20/windows-mobile-cf-how-to-catch-f1-and-f2-in-weh/)

很抱歉仅提供链接，但在 .NET Compact Framework 中捕获 F1 和 F2 并不是那么简单。

# java - XML SAXParser 重新格式化 if else Java/Android

> ID：15270303
> 
> 赞同：0
> 
> 时间：2013-03-07T11:43:34.277
> 
> 标签：java, android, xml-parsing, sax

我有以下问题：

我正在使用 XML SAXParser 来解析 xml 文件并动态创建类并设置它们的属性。

我已经编写了现在可以创建 4 个类并设置类的属性的代码，但问题是代码是一个很大的条件案例（if/else if/else）并且很难阅读。

我想解析 xml，这样我就可以创建 15 个不同的类，所以代码变得非常大。

现在确切的问题是如何将 if/elseif/else 重构为可读性更好的代码？我已经搜索了一段时间，发现了一些方法，例如使用地图或命令模式，但我不明白如何使用它？

这是我目前正在使用的代码，并且正在运行：

```
public class XmlParserSax extends DefaultHandler {

List<Fragment> fragments = null;
String atType = null;
String typeObject;
String currentelement = null;
String atColor = null;
RouteFragment route = null;
ChapterFragment chapter = null;
FirstFragment first = null;
ExecuteFragment execute = null;
StringBuilder textBuilder;

public XmlParserSax() {
    fragments = new ArrayList<Fragment>();
    try {
        /**
         * Create a new instance of the SAX parser
         **/
        SAXParserFactory saxPF = SAXParserFactory.newInstance();
        SAXParser sp = saxPF.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        /**
         * Create the Handler to handle each of the XML tags.
         **/

        String file = "assets/test.xml";
        InputStream in = this.getClass().getClassLoader()
                .getResourceAsStream(file);

        xr.setContentHandler(this);
        xr.parse(new InputSource(in));

    } catch (Exception e) {
        System.out.println(e);
    }
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    atColor = attributes.getValue("color");
    atType = attributes.getValue("type");
    currentelement = localName;
    textBuilder = new StringBuilder();

    if (localName.equalsIgnoreCase("template")) {

        if (atType.equalsIgnoreCase("route")) {

            route = new RouteFragment();
            typeObject = "route";
        } else if (atType.equalsIgnoreCase("chapter")) {

            chapter = new ChapterFragment();
            typeObject = "chapter";
        } else if (atType.equalsIgnoreCase("first")) {
            first = new FirstFragment();
            typeObject = "first";
        } else if (atType.equalsIgnoreCase("execute")) {
            execute = new ExecuteFragment();
            typeObject = "execute";
        }
    } else if (localName.equalsIgnoreCase("number")) {
        if (typeObject.equalsIgnoreCase("chapter")) {
            chapter.setNumberTextcolor("#" + atColor);
        }
    } else if (localName.equalsIgnoreCase("maxnumber")) {
        if (typeObject.equalsIgnoreCase("chapter")) {
            chapter.setMaxNumberColor("#" + atColor);
        }

    } else if (localName.equalsIgnoreCase("title")) {
        if (typeObject.equalsIgnoreCase("chapter")) {
            chapter.setTitleColor("#" + atColor);
        } else if (typeObject.equalsIgnoreCase("first")) {
            first.setTitleColor("#" + atColor);
        }
    } else if (localName.equalsIgnoreCase("subtitle")) {
        if (typeObject.equalsIgnoreCase("first")) {
            first.setSubtitleColor("#" + atColor);
        }
    } else if (localName.equalsIgnoreCase("text")) {
        if (typeObject.equalsIgnoreCase("execute")) {
            execute.setTextColor("#" + atColor);
        }
    }

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    String text = textBuilder.toString();
    if (localName.equalsIgnoreCase("template")) {
        if (typeObject.equalsIgnoreCase("route")) {
            fragments.add(route); // nieuw routefragment
                                    // toevoegen aan de lijst

        } else if (typeObject.equalsIgnoreCase("chapter")) {
            fragments.add(chapter); // nieuw chapterfragment
                                    // toevoegen aan de lijst

        } else if (typeObject.equalsIgnoreCase("first")) {
            fragments.add(first);
        } else if (typeObject.equalsIgnoreCase("execute")) {
            fragments.add(execute);
        }
    } else if (localName.equalsIgnoreCase("text")) {
        if (typeObject.equalsIgnoreCase("route")) {
            // route.setOmschrijving(text);
        } else if (typeObject.equalsIgnoreCase("execute")) {
            execute.setText(text);
        }
    } else if (localName.equalsIgnoreCase("background")) {
        if (typeObject.equalsIgnoreCase("route")) {
            // route.setKleur("#" + text);
        } else if (typeObject.equalsIgnoreCase("chapter")) {
            chapter.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("first")) {
            first.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("execute")) {
            execute.setBackgroundColor("#" + text);

        }
    } else if (localName.equalsIgnoreCase("number")) {
        if (typeObject.equalsIgnoreCase("chapter")) {
            chapter.setNumber(text);
        }
    } else if (localName.equalsIgnoreCase("maxnumber")) {
        if (typeObject.equalsIgnoreCase("chapter")) {
            chapter.setMaxNumber(text);
        }
    } else if (localName.equalsIgnoreCase("title")) {
        if (typeObject.equalsIgnoreCase("chapter")) {
            chapter.setTitle(text);
        } else if (typeObject.equalsIgnoreCase("first")) {
            first.setTitle(text);
        }
    } else if (localName.equalsIgnoreCase("subtitle")) {
        if (typeObject.equalsIgnoreCase("first")) {
            first.setSubtitle(text);
        }
    } else if (localName.equalsIgnoreCase("square")) {
        if (typeObject.equalsIgnoreCase("execute")) {
            execute.setBorderColor("#" + text);

        }
    }
}

public List<Fragment> getList() {
    return fragments;

}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

    textBuilder.append(ch, start, length);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:39:46.860

还有另一种方法可以做到这一点；使用 startElementListener 和 EndTextElementListeners

首先定义你的根元素：

```
 RootElement root = new RootElement("root"); 
```

定义你的子元素

```
 Element nodeA = root.getChild("nodeA");
    Element nodeB = root.getChild("nodeB");
    Element nodeC = root.getChild("nodeC"); 
```

现在设置监听器

```
 root.setStartElementListener(new StartElementListener() {
            public void start(Attributes attributes) {
                foundElement = true;// tells you that you are parsing the intended xml
            }
        });

    nodeA.setEndTextElementListener(new EndTextElementListener() {
            public void end(String body) {
                //populate your pojo
            }
        }); 
```

通过这种方式，您可以取消所有那些 if-else 语句和布尔值，但您必须忍受 N 数量的听众。

# java - 遍历Java中的字符数组 - 改进算法

> ID：15270309
> 
> 赞同：2
> 
> 时间：2013-03-07T11:43:40.703
> 
> 标签：java, arrays, algorithm, recursion, char

我正在尝试遍历我的数组以生成给定 char 数组的所有可能组合。

如果我指定的长度是 4，那么我希望它遍历数组中字符的所有组合，直到长度为 4。

它看起来像这样：

```
char[] charArray = "abcdefghijklmnopqrstuvwxyz".toCharArray(); 
```

我想要的方法的输出：

a, b, c, ..., x, y, z, aa, ab, ac, ..., ax, ay, az, ba, bb, bc, ..., bx, by, bz, ca, cb, cc, ... zzzx, zzzy, zzzz

这是一些代码：

```
cs = charArray;
cg = new char[4]; // 4 up to 4 characters to guess

int indexOfCharset = 0; // should I be using all these?
int indexOfCurrentGuess = 0;
int positionInString = 0;

public void incrementNew() {
    // 1 DIGIT guesses
    if (cg.length == 0) {
        if (indexOfCharset == cs.length) {
            cg = new char[cg.length + 1];
        } else {
            cg[positionInString] = nextChar();
        }
    }
    // 2 DIGIT guesses
    else if (cg.length == 1) {
        if (cg[0] == cs.length && cg[1] == cs.length) {
            cg = new char[cg.length + 1];
        } else {
            ... Something goes here <-
            cg[positionInString] = nextChar();
        }
    }
    System.out.println("cg[0]=" + cg[0]);
}

public char nextChar() {
    char nextChar;
    if (indexOfCharset < cs.length) {
        nextChar = cs[indexOfCharset];
    } else {
        indexOfCharset = 0;
        nextChar = cs[indexOfCharset];
    }
    indexOfCharset++;
    //System.out.println("nextChar = " + nextChar);
    return nextChar;

} 
```

我能想到的唯一方法是使用大量 IF 语句 - 有没有一种算法或方法可以让它更整洁？如果没有，那么关于如何处理两个或更多字符的任何建议？

编辑：

我希望它适用于任何未排序的字符数组，而不仅仅是 az。

我发现的所有实现只适用于排序数组..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:12:09.383

你可以试试这个：

```
static char[] letters = "abcdefghijklmnopqrstuvwxyz".toCharArray();

static void getChars(char[] lastChars, int pos, int length) {
    for (char c : letters) {
        char[] newChars = lastChars.clone();
        newChars[pos] = c; // if you have "aa" for example and the current length is 4\. If c = "a", newChars is now "aaa"
        if (pos + 1 < length) { // as your lenths is 4 and you still have only 3 letters, getChars adds the missing ones
            getChars(newChars, pos + 1, length);
        } else {
            System.out.println(newChars);
        }
    }
}

public static void main(String[] args) {
    int maxLength = 4;

    for (int length = 1; length <= maxLength; length++) {
        for (char c : letters) {
            if (length > 1) {
                char[] chars = new char[length];
                chars[0] = c;
                getChars(chars, 1, length);
            } else {
                System.out.println(c);
            }
        }
    }

} 
```

# javascript - AngularJS - DI 系统如何知道参数的名称？

> ID：15270311
> 
> 赞同：21
> 
> 时间：2013-03-07T11:43:53.667
> 
> 标签：javascript, dependency-injection, angularjs

直接来自官方网站的示例：

```
function PhoneListCtrl ($scope, $http) {
    $http.get('phones/phones.json').success(function(data) {
        $scope.phones = data;
    });

    $scope.orderProp = 'age';
} 
```

`$scope`和参数是用于在 DI 系统中定位相应 AngularJS 服务的`$http`唯一标识符。那么 DI 系统如何准确地检索这些参数的变量名呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-07T12:07:27.637

这是方式的精简版

```
var FN_ARGS = /^function\s*[^\(]*\(\s*([^\)]*)\)/m;
var FN_ARG_SPLIT = /,/;
var FN_ARG = /^\s*(_?)(\S+?)\1\s*$/;
var STRIP_COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;

function annotate(fn){
    var $inject
    if (!($inject = fn.$inject)) {
        $inject = [];
        fnText = fn.toString().replace(STRIP_COMMENTS, '');
        argDecl = fnText.match(FN_ARGS);
        angular.forEach(argDecl[1].split(FN_ARG_SPLIT), function(arg){
            arg.replace(FN_ARG, function(all, underscore, name){
                $inject.push(name);
            });
        });
        fn.$inject = $inject;
    }

    return fn.$inject;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/p6qQT/1/)（见控制台）；

步骤：
1\. 调用`toString`函数返回函数源
2\. 使用正则表达式删除所有注释
3\. 使用正则表达式从源中提取参数

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-07T11:59:25.143

直接来自源代码[@GitHub](https://github.com/angular/angular.js/blob/master/src/auto/injector.js)：

> 最简单的形式是从函数的参数中提取依赖关系。这是通过使用`toString()`方法将函数转换为字符串并提取参数名称来完成的。
> 
> ```
> // Given
> function MyController($scope, $route) {
>     // ...
> }
> // Then
> expect(injector.annotate(MyController)).toEqual(['$scope', '$route']); 
> ```

和注释功能

```
function annotate(fn) {
  var $inject,
  fnText,
  argDecl,
  last;

  if (typeof fn == 'function') {
    if (!($inject = fn.$inject)) {
      $inject = [];
      fnText = fn.toString().replace(STRIP_COMMENTS, '');
      argDecl = fnText.match(FN_ARGS);
      forEach(argDecl[1].split(FN_ARG_SPLIT), function(arg){
        arg.replace(FN_ARG, function(all, underscore, name){
        $inject.push(name);
      });
    });
    fn.$inject = $inject;
    }
  } else if (isArray(fn)) {
    last = fn.length - 1;
    assertArgFn(fn[last], 'fn')
    $inject = fn.slice(0, last);
  } else {
    assertArgFn(fn, 'fn', true);
  }
  return $inject;
} 
```

如第 45 行及以后所示

# git - 使用 git 来 VC 一个包含多个位置文件的实时网站

> ID：15270314
> 
> 赞同：1
> 
> 时间：2013-03-07T11:43:55.090
> 
> 标签：git, version-control, web

我见过很多人使用 git 直接 VC 他们的网站，并且在一些情况下我一直在考虑这样做。但是，我无法弄清楚如何执行以下操作：

假设我在一台机器上有两个网站，html 等位于：

*   /var/www/html/prj_a
*   /var/www/html/prj_b

我在以下位置有 cgi 脚本：

*   /var/www/cgi-bin/prj_a/
*   /var/www/cgi-bin/prj_b/

所以我实际上在 /var/www/ 下有两个“并行”的 git 项目我想有人已经弄清楚了，但我无法通过谷歌找到那么多......

解决此问题的最佳方法是什么？

我想过的方法：

*   在不同的存储库中使用保存 cgi 和 html
*   像这样保存网站：

    *   网站/a/html
    *   网站/a/cgi-bin/
    *   ...

    然后将这些文件夹符号链接到 /var/www/{html,cgi-bin}/project 下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T15:19:27.330

在某些情况下，无论出于何种原因将项目集中在一个位置并将不同的位置符号链接到该位置，我在几次情况下所做的是，我为 git 及其`mount --bind`下的位置创建了一个单独的项目目录（如符号链接，但对 git 不可见） ）。

在我上面的示例中，除非服务器配置禁止符号链接，否则创建符号链接`/var/www/cgi-bin/prj_a/`可能`projects/prj_a/cgi-bin/`更有意义，但我会坚持这个例子。

示例项目结构：

```
HTML code and assets
/var/www/html/prj_a  
/var/www/html/prj_b

CGI-scripts
/var/www/cgi-bin/prj_a/  
/var/www/cgi-bin/prj_b/ 
```

我在其他地方创建了一个目录：

```
projects/prj_a/ 
```

挂载该目录下的其他目录

```
mkdir projects/prj_a/{html,cgi-bin}
mount --bind /var/www/cgi-bin/prj_a/ projects/prj_a/cgi-bin
mount --bind /var/www/html/prj_a/ projects/prj_a/html 
```

现在我有一个目录结构：

```
projects/
    prj_a/
        cgi-bin/ (points to /var/www/cgi-bin/prj_a/)
        html/    (points to /var/www/html/prj_a/) 
```

现在我可以`projects/prj_a/`用作 git 存储库。Git 看不到文件位于其他位置。

# php - PHP - 如何加载 HTML 文件？

> ID：15270327
> 
> 赞同：10
> 
> 时间：2013-03-07T11:44:30.257
> 
> 标签：php, html

目前我有一个这样的文件

```
<?php
if(some condition)
{
    //Dont allow access
}
else
{
    echo "<html>My HTML Code</html>";
}
?> 
```

但我想做这样的事情来保持我的 php 文件简短而干净。

```
<?php
if(some condition)
{
    //Dont allow access
}
else
{
    //print the code from ..html/myFile.html
}
?> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T11:45:18.883

将您的 html 内容保存为单独的模板并简单地包含它

```
<?php
if(some condition)
{
    //Dont allow access
}
else
{
    include ("your_file.html");
}
?> 
```

或者

```
<?php
if(some condition)
{
    //Dont allow access
}
else
{
    readfile("your_file.html");
}
?> 
```

`readfile`比`file_get_contents`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-07T11:51:01.853

您可以看看[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)，这似乎是您需要的好主意！例子：

```
// Create a DOM object from a string
$html = str_get_html('<html><body>Hello!</body></html>');

// Create a DOM object from a URL
$html = file_get_html('http://www.google.com/');

// Create a DOM object from a HTML file
$html = file_get_html('test.htm'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T11:49:52.143

使用此代码

```
如果（某些条件）
{
    //不允许访问
}
别的
{
    echo file_get_contents("your_file.html");
}

```

或者

```
如果（某些条件）
{
    //不允许访问
}
别的
{
    require_once("your_file.html");
}

```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-07T11:56:36.847

使用类似的功能

```
include()
include_once()
require()
require_once()
file_get_contents() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T11:45:56.693

```
<?php
if(some condition)
{
    //Dont allow access
}
else
{
    echo file_get_contents("your_file.html");
}
?> 
```

这应该可以解决问题

或者，正如[nauphal](https://stackoverflow.com/users/932319/nauphal)的回答所说，只需使用`include()`

不要忘记，如果文件不存在，你可能会遇到一些麻烦（所以，也许，在包含或获取内容之前检查）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-07T11:50:08.307

扩展 nauphal 的答案以获得更强大的解决方案..

```
<?php
if(some condition)
{
    //Dont allow access
}
else
{
    if(file_exists("your_file.html"))
    {
       include "your_file.html";
    }
    else
    {
      echo 'Opps! File not found. Please check the path again';
    }
}
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-07T11:46:49.060

我想你想包含你的 HTML 文件或者我误解了这个问题。

```
<?php
if(some condition)
{
    //Dont allow access
}
else
{
    include ("..html/myFile.html");
}
?> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-07T11:59:18.450

方式一：

```
ob_start();
include "yourfile.html";
$return = ob_get_contents();
ob_clean();

echo $return; 
```

方式 2：使用模板，如*CTPP*，*Smarty*等...模板可用于将一些逻辑从 php 转移到模板，例如，在 CTPP 中：

```
$Templater -> params('ok' => true);
$Template -> output('template.html'); 
```

在模板 html 中：

```
<TMPL_if (ok) >
ok is true
<TMPL_else>
ok not true
</TMPL_if> 
```

其他模板中也有相同的想法。模板更好，因为它可以帮助您标准化模板并将所有原始逻辑发送给它们。

# linq - 我可以转换一个 Func 到一个函数 其中 T 和 U 是 POCO 类，我可以在其中将一个属性映射到另一个？如果是这样，怎么做？

> ID：15270332
> 
> 赞同：1
> 
> 时间：2013-03-07T11:44:52.313
> 
> 标签：linq, entity-framework-4, linq-to-entities

我有一个场景，其中一个方法将采用*Func< T, bool >*类型的谓词，因为类型 T 是暴露给外部世界的谓词，但是当实际使用该谓词时，我需要该方法来调用另一个方法采用*Func< U, bool >*其中 T 的属性映射到 U 的属性。

一个更具体的例子是：

```
public IEnumerable<ClientEntity> Search(Func<ClientEntity, bool> predicate)
{
    IList<ClientEntity> result = new List<ClientEntity>();

    // Somehow translate predicate into Func<Client, bool> which I will call realPredicate.
    _dataFacade.Clients.Where(realPredicate).ToList().ForEach(c => result.Add(new ClientEntity() { Id = c.Id, Name = c.Name }));

    return result.AsEnumerable();
} 
```

那可能吗？

请注意，ClientEntity 是我自己定义的 POCO 类，而 Client 是由模型创建的实体框架类（DB 优先）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:29:29.313

我曾经尝试过这个。当表达式树包含更简单的操作（等于、大于、小于等）时，它导致了一个不太糟糕的表达式树重写器。

可以在[这里](http://pastebin.com/KyhwKHBJ)找到。

您可以将其用作：

```
Expression<Func<Poco1>> where1 = p => p.Name == "fred";
Expression<Func<Poco2>> where2 = ExpressionRewriter.CastParam<Poco1, Poco2>(where1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:20:27.363

EF 不使用 lambdas - 它使用[`Expression Trees`](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

```
Func<T, bool> lambda = ( o => o.Name == "fred" );
Expression<Func<T, bool>> expressionTree = ( o => o.Name == "fred" ); 
```

表达式树是表示给定表达式的内存对象图。

由于它们只是对象，您可以创建或修改它们。

这是另一个链接：[`MSDN: How to: Modify Expression Trees`](http://msdn.microsoft.com/en-us/library/bb546136.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:39:30.070

我最终做的不需要使用表达式树：

```
public IEnumerable<ClientEntity> Search(Func<ClientEntity, bool> predicate)
{
    IList<ClientEntity> result = new List<ClientEntity>();

    Func<Client, bool> realPredicate = (c => predicate(ConvertFromClient(c)));        
    _dataFacade.Clients.Where(realPredicate).ToList().ForEach(c => result.Add(ConvertFromClient(c)));

    return result.AsEnumerable();
}

private static ClientEntity ConvertFromClient(Client client)
{
    ClientEntity result = new ClientEntity();

    if (client != null)
    {
        // I actually used AutoMapper from http://automapper.org/ here instead of assigning every property.
        result.Id = client.Id;
        result.Name = client.Name;
    }

    return result;
} 
```

# codeigniter - Codeigniter Active Record 返回类型

> ID：15270334
> 
> 赞同：0
> 
> 时间：2013-03-07T11:44:54.353
> 
> 标签：codeigniter, activerecord

我试图`umat_id`用这个 SQL 查询得到一个：

```
SELECT umat_id FROM msumat WHERE nama = $nama 
```

我将此 SQL 查询转换为 CI 的 Active Record：

```
$this->db->select('umat_id');
$terdaftar = $this->db->get_where('msumat', array('nama' => $nama)); 
```

所以这个查询应该返回一个字符串（例如：“John”）。

但是当我尝试回显它时出现错误： **CI_DB_mysql_result 类的对象无法转换为字符串**

我尝试过这样`echo (string)$terdaftar;`的事情 : ，但它不起作用。

我想要的只是呼应“约翰”

**编辑** 刚才说我想将“约翰”插入变量中。怎么做？

```
$john = ???? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:02:34.943

由于一些用户已经指出了解决方案，我只是在解释为什么您确实收到此错误，以便您可以更好地理解 codeigniter 提供的查询结果。

这个错误：

> 但是当我尝试回显它时出现错误：CI_DB_mysql_result 类的对象无法转换为字符串

发生是因为您试图回显一个对象。

这段代码

```
$terdaftar = $this->db->get_where('msumat', array('nama' => $nama)); 
```

将返回一个对象，该对象将包含有关您已完成查询的信息。使用此对象，您可以获得结果（行）作为执行此操作的对象：

```
$results = $terdaftar->result(); 
```

或者，如果您对数组感觉更舒服，您可以将结果（行）作为数组返回，执行以下操作：

```
$results = $terdaftar->result_array(); 
```

您还可以获得执行此操作的结果数量：

```
$number_results = $terdaftar->num_rows() 
```

这只是一个示例，您可以在此处阅读有关结果的更多信息 [http://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

**编辑** 更好的解释：假设我们使用 result_array() 函数以纯数组格式获取结果：

```
$results = $terdaftar->result_array(); 
```

现在您的变量 $results 是一个数组，要遍历它并获取您想要的数据，您将执行以下操作：

```
foreach ($results as $key => $row) {
    //the row variable will have each row of your database returned by your query
    //so if you want to access a field from that row, 
    //let's say for example the name field. You would do something like this
    if($row['name']=='John')
        echo $row['name'];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:49:09.877

尝试：

```
$this->db->select('umat_id');
$terdaftar = $this->db->get_where('msumat', array('nama' => $nama));

foreach ($terdaftar->result() as $row)
{
    echo $row->umat_id;
} 
```

阅读[文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:49:35.353

试试这个：

```
 $this->db->select('umat_id');
 $terdaftar = $this->db->get_where('msumat', array('nama' => $nama));
 $row = $terdaftar->row_array();
 $your_variable = $row['umat_id']; /*Here comes your john*/ 
```

# android - 摩托罗拉附加组件网站获取未知主机

> ID：15270335
> 
> 赞同：1
> 
> 时间：2013-03-07T11:44:56.200
> 
> 标签：android, motorola-droid

摩托罗拉的 Android[附加网站](http://android-sdk-addons.motodevupdate.com/addons.xml)返回

Blockquote 获取[URL失败](http://android-sdk-addons.motodevupdate.com/addons.xml/addon.xml)

原因：

```
IO Unknown Host android-sdk-addons.motodevupdate.com 
```

在 Android SDK 管理器日志的 R21 中添加为用户定义的站点时。

1.  我有错误的地址吗？

2.  其他人有同样的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T14:15:00.490

看起来您需要手动执行此操作。

您可以在其中下载附加组件的页面。

[http://www.motorola.com/sites/motodev/us-en/motodev_lp.html](http://www.motorola.com/sites/motodev/us-en/motodev_lp.html)

安装说明：

[http://www.motorola.com/sites/motodev/SDK_Addons/installation.html](http://www.motorola.com/sites/motodev/SDK_Addons/installation.html)

# mysql - 无法连接数据库 - MAMP

> ID：15270340
> 
> 赞同：2
> 
> 时间：2013-03-07T11:45:01.547
> 
> 标签：mysql, database, wordpress, root, mamp

我正在使用 MAMP 和 Sequel Pro，并且无法将我的数据库与 wordpress 连接以进行本地主题开发。在 MAMP 中，我的灯是绿色的。在 Sequel Pro 中，我似乎能够使用 localhost、root 和我在终端中重置的密码通过套接字进行连接（root 没有给我访问权限）。然后当我尝试在浏览器中加载时

```
http://localhost:8888/wordpress/ 
```

在 sequel pro 中使用 'wordpress' 作为我的数据库名称，我得到“建立数据库连接时出错”

我在 wp-config 文件中更改了 MySQL 用户密码，以反映密码更改没有有意义的结果：

```
define('DB_NAME', 'wordpress'); ( as I assigned in sequel pro)

/** MySQL database username */
define('DB_USER', 'root');

/** MySQL database password */
define('DB_PASSWORD', 'my password');

/** MySQL hostname */
define('DB_HOST', 'localhost'); 
```

我整晚都在寻找各种途径，但没有运气。

在我最近升级到 Pro 并被提示重置密码之前，我在 MAMP 上做得很好。从那时起，尽管努力在终端中重置，但没有骰子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T17:09:55.563

这是一个老问题，但如果有人通过谷歌遇到这个问题，解决方案是确保您指向正确的套接字。Sequel Pro 默认在 /tmp/mysql.sock 中查找以进行连接，如果您不使用 MAMP PRO，则安装 mysql 的位置。

在 Sequel Pro 中，使用套接字连接并将套接字指向 /Applications/MAMP/tmp/mysql/mysql.sock 它应该都能正常工作。

# java - 什么时候最好在Java中使用全名的声明，包括一行的库，而不是在顶部导入任何东西？

> ID：15270341
> 
> 赞同：2
> 
> 时间：2013-03-07T11:45:05.723
> 
> 标签：java, import, declaration

当这种声明方式

```
java.util.ArrayList example = new java.util.ArrayList(); 
```

比

```
import java.util.ArrayList; 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T11:46:34.430

非常稀有。

只有当我使用两个具有相同名称但不同包的类时，我才会完全符合条件。例如`java.awt.List`和`java.util.List`

在这种情况下，我会简单地导入更常用的，并完全限定使用较少的那个。和/或重构以使两者不共存（如果可能且可行）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T11:46:36.023

当您使用两个或多个具有相同名称但来自不同包的不同类时，您需要使用完全限定名称来告诉 JVM 您要使用哪一个。
例如，在同一个地方使用`java.util.Date`and`java.sql.Date`时。

如果您没有使用这样**的 different_but_same_name_classes**，那么 import 比完全限定的路径名​​更可取。

# c# - 如何在 Linq 中循环遍历数据表？

> ID：15270344
> 
> 赞同：3
> 
> 时间：2013-03-07T11:45:10.727
> 
> 标签：c#, .net, linq

我正在尝试对我拥有的数据表执行内部联接

我的代码如下

```
 var Result = from row1 in t1
              join row2 in t2 on row1.ID equals row2.ID
              join row3 in t3 on row1.ID equals row3.ID
              select new { Emp.ID = row1.ID, Col1 = row2.col1, Col2 = row3.col2 
```

在此代码段中只有 3 个表而我的表数不固定

我可以遍历表并执行联接吗？

这会是最好的方法吗？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:46:29.160

以下方法使用`DataTable`列表来处理动态数量的数据表。该代码产生一个`List`of `IEnumerable<object>`。此示例假设将添加到连接中每个其他数据表的最终项结构的列值位于相同的位置（在我们的示例中，我使用了`row2[1]`，因此我占据了第二个位置）。

**[编辑]**我还添加了一个连接多个列/连接表的示例

```
 // create the collection
    List<DataTable> dts = new List<DataTable>();

    // add some test datatables
    for (int i = 0; i < 10; i++)
    {
        var dt = new DataTable();
        dt.TableName = i.ToString();
        dt.Columns.Add("ID");
        dt.Columns.Add("col" + i.ToString());
        dt.Columns.Add("otherCol" + i.ToString());
        dt.Rows.Add(1, "x1" + i.ToString(), DateTime.Now);
        dt.Rows.Add(2, "x2" + i.ToString(), DateTime.Now);
        dts.Add(dt);
    }

    // get the ID column position in the first table
    var idPosition = dts[0].Columns["ID"].Ordinal;

    // used for storing the results
    var results = new List<IEnumerable<object>>();

    // add the columns from the first table
    results = dts[0].AsEnumerable()
        .Select(j => j.ItemArray.AsEnumerable()).ToList();

    // join all tables
    dts.Skip(1).ToList().ForEach((list) =>
    {
        results = results
        .AsEnumerable()
        .Join(
            list.AsEnumerable(),
            x => x.Skip(idPosition).First(),
            x => x["ID"],
            // select the second column
            (row1, row2) => row1.Concat(new[] { row2[1] }))
            // replace the preceding line with 
            // the following one to select the second and the third column
            //(row1, row2) => row1.Concat(new[] { row2[1], row2[2] }))
        .ToList();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:45:28.680

一种方法（可能被标记为困难方法）是使用 Linq 的扩展方法构建连接组合。通过这种方式，您可以遍历您的集合（表），并添加任何必要的内容。

例如，这个：

```
from t1 in Table1
join t2 in Table2 on t1.ID equals t2.ID
join t3 in Table3 on t2.ID equals t3.ID
select new { t1, t2, t3 } 
```

可以重写为（使用 LinqPad 很容易做到）：

```
var query = Table1
   .Join (
      Table2, 
      t1 => t1.ID, 
      t2 => t2.ID, 
      (t1, t2) => new  { t1 = t1, t2 = t2 }
   )
   .Join (
      Table3, 
      temp0 => temp0.t2.ID, 
      t3 => t3.ID, 
      (temp0, t3) => new { t1 = temp0.t1, t2 = temp0.t2, t3 = t3 }
   )
; 
```

这可以拆分，我想您可以在循环一组集合（您的 t1/t2/t3）时完成这项工作：

```
var query1 = Table1
   .Join (
      Table2, 
      t1 => t1.ID, 
      t2 => t2.ID, 
      (t1, t2) => new  { t1 = t1, t2 = t2 }
   );
var query2 = query1
   .Join (
      Table3, 
      temp0 => temp0.t2.ID, 
      t3 => t3.ID, 
      (temp0, t3) => new { t1 = temp0.t1, t2 = temp0.t2, t3 = t3 }
   ); 
```

不是一个完整的解决方案，但这是我试图解释的想法。

因此，您可以在循环一组集合时执行相同的操作，而不是“硬编码”query1、query2 等。

听起来很难，我相信它会是。

# uiviewcontroller - 如何导航到 iPhone 中的下一个视图控制器

> ID：15270346
> 
> 赞同：1
> 
> 时间：2013-03-07T11:45:13.200
> 
> 标签：uiviewcontroller, uinavigationcontroller, navigation, uistoryboard, pushviewcontroller

我是 iOS 开发的新手。我的应用程序中有两个视图控制器。我正在尝试在我的应用程序中从第一个视图控制器导航到第二个视图控制器。

```
SecondView *ss=[[SecondView alloc] initWithNibName:@"Second Page" bundle:nil];
    [self.navigationController pushViewController:ss animated:YES]; 
```

我在“堆栈溢出”中找到了这段代码，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:31:10.660

您收到此错误是因为您可能尝试使用 Navigator 控制器代码（推送）从一个 VC 转到另一个 VC，并且您可能没有在代码或 Interface Builder 中设置导航控制器。

你可以在不使用导航控制器的情况下展示/关闭 VC，我建议你从这个开始。

注意术语：push/pop 用于导航控制器堆栈上的 VC，present/dismiss 用于其他 VC（而不是导航控制器堆栈）上的 VC。

有几种方法可以在另一个 VC 的“顶部”呈现 VC，这取决于该 VC 是否也存在于您的 SB 上：

1- 如果您的 IB 中不存在 VC，而您只是以编程方式创建和展示 VC，您可以执行以下操作：

```
 MyUIViewControllerSubclass *myLittleSubclass=[[MyUIViewControllerSubclass alloc]init];
 myLittleSubclass.view.frame=self.view.frame; //this is for example only
 [self presentViewController:myLittleSubclass animated:YES completion:nil]; 
```

有了上述内容，您显然必须首先将 MyUIViewControllerSubclass Objective C 类添加到您的项目中（使用添加文件）并将其导入到您放置上述代码的任何类中。

稍后要关闭它，您可以使用 MyUIViewControllerSubclass 类本身的以下代码。

```
 [self.parentViewController dismissViewControllerAnimated:YES completion:nil]; 
```

2- 如果您已经将 MyUIViewControllerSubclass Objective C 类添加到您的项目中（使用添加文件）但您打算使用 IB 来设计它并且您已经在 IB 中添加了 VC 并将其在 IB 中的类更改为 MyUIViewControllerSubclass，您然后可以使用此代码：

```
mySubclass *myLittleSubclass=[self.storyboard instantiateViewControllerWithIdentifier:@"theVC"];
[self presentViewController:myLittleSubclass animated:YES completion:nil]; 
```

您可以像上面一样解雇。确保在 SB 和身份检查器中单击 VC，将 SB ID 设置为“theVC”并选中“使用 SB ID”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:38:31.023

确保您的笔尖名称带有`Second Page`. 您的班级名称是`SecondView`并且 nib(xib) 名称是 Second Page 然后只有它会导航。

# django - haystack.exceptions.SearchBackendError：在任何 search_indexes 中都找不到字段。请在尝试搜索之前更正此问题

> ID：15270347
> 
> 赞同：5
> 
> 时间：2013-03-07T11:45:18.120
> 
> 标签：django, search, django-haystack

我正在尝试用嗖嗖声来实现 Haystack。

尽管一切似乎都配置得很好，但我一直收到此错误。我得到错误：

```
haystack.exceptions.SearchBackendError: No fields were found in any search_indexes. Please correct this before attempting to search. 
```

...当我尝试做**./manage.py rebuild_index**

配置：

```
HAYSTACK_SITECONF = 'myproject'
HAYSTACK_SEARCH_ENGINE = 'whoosh'
HAYSTACK_WHOOSH_PATH = cwd + '/whoosh/mysite_index' 
```

在我的项目的根文件夹中成功创建了**whoosh/mysite_index**目录。

*search_sites.py*

```
import haystack
haystack.autodiscover() 
```

*search_indexes.py*

```
from haystack.indexes import *
from haystack import site
from myproject.models import *

class ResearchersIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    name = CharFIeld(model_attr='name')

class SubjectIndex(SearchIndex):
    short_name = CharField(model_attr='short_name')
    name = CharField(model_attr='name')
    text = CharField(document=True, use_template=True)

class ResearchIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    abstract = TextField(model_attr='abstract')
    methodology = TextField(model_attr='methodology')
    year = IntegerField(model_attr='year')
    name = CharField(model_attr='name')

class Graph(SearchIndex):
    text = CharField(document=True, use_template=True)
    explanation = TextField(model_attr='explanation')
    type = CharField(model_attr='type')
    name = CharField(model_attr='name')

site.register(Researchers, ResearchersIndex)
site.register(Subject, SubjectIndex)
site.register(Research, ResearchIndex)
site.register(Graph, GraphIndex) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:36:53.607

问题出在你的`HAYSTACK_SITECONF`. 它必须是`search_sites`文件的路径。解决这个问题，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-31T14:40:03.840

确保您`site_indexes.py`在您已`INSTALLED_APPS`在 settings.py中注册的应用程序中

# r - 在将结果分配给R中的向量之前如何使用while循环？

> ID：15270350
> 
> 赞同：1
> 
> 时间：2013-03-07T11:45:21.293
> 
> 标签：r, statistics, probability

我的模拟实验如下：

1.  掷一个公平的骰子，得到一个介于 1 到 6 之间的数字 X。
2.  将一枚公平的硬币翻转 X 次（即掷骰子的数量）并记录正面的数量。

这是我的实验的代码（在循环内）：

```
Youtcomes <- rep(0, 100)
for (i in 1:100) {
    X <- sample(1:6, 1, replace=TRUE, rep(1,6)/6)
    Y <- sample(c("H", "T"), X, replace=TRUE, rep(1,2)/2)
    # assign output inside the loop with [i] indexing
    Youtcomes[i] <- sum(Y == "T")
} 
```

我确信这不是最有效的循环，但不幸的是，我被指示这样做。

然后我需要创建一个随机变量 N，它定义为实验的运行次数，直到`Y>=5`第一次出现结果。

我将如何设计一个循环来模拟这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:00:27.510

`while`您可以按如下方式使用循环：

```
one.simulation <- function() {
    N <- 0
    Y <- 0
    while (Y < 5) {
        X <- sample(6, 1)
        Y <- sum(sample(c(Heads = 1, Tails = 0), X, replace=TRUE))
        N <- N+1
    }
    N
}

set.seed(1234)
one.simulation()
# [1] 50

replicate(100, one.simulation())
#   [1]  20   9  11  57  35  35  14 106  11  14   6 113   8  28 125  29   4  12   3
#  [20]  19  39   4  13  32  23  96  19  20  47  68  96  65  18  71  39  51   6  22
#  [39] 111   3 109   9  22  18  99   1 151  85   3   2 102  46  18  31  41  21  14
#  [58]  75  10  56   3  63  79  12  59  68  31  47  35  15  14  38  11  36  26  24
#  [77]  24  45  43  15  81   1  16  57  29   6  64  11  15  47 107 116   8  62 146
#  [96] 217  78  28   9 141 
```

# django - 带有 Johnny Cache 任务的 Django Celery 因奇怪的错误而失败

> ID：15270356
> 
> 赞同：2
> 
> 时间：2013-03-07T11:45:38.873
> 
> 标签：django, django-celery, django-johnny-cache

我正在运行 Django 1.4.5、Celery 3.0.15、Django Celery 3.0.11、Johnny Cache 1.4。

celery 任务中对 ORM 的调用有时会失败，并出现奇怪的错误，例如`invalid literal for int() with base 10: 'a'"`or `<MaybeEncodingError: Error sending result: ''<ExceptionInfo: ObjectDoesNotExist()>''. Reason: ''PicklingError("Can\'t pickle <class \'scsite.models.DoesNotExist\'>: attribute lookup scsite.models.DoesNotExist failed",)''.>`：

这是一个示例堆栈跟踪：

```
Task scsite.tasks.send_signup_email[aecf0561-65af-4d11-a3a0-63d88b7e1a70] raised exception: ValueError("invalid literal for int() with base 10: 'd'",)

Task scsite.tasks.send_signup_email[aecf0561-65af-4d11-a3a0-63d88b7e1a70] raised exception: ValueError("invalid literal for int() with base 10: 'd'",)

Stacktrace (most recent call last):

  File "celery/execute/trace.py", line 192, in trace_task
    R = I.handle_error_state(task, eager=eager)
  File "scsite/tasks.py", line 537, in send_signup_email
    email_html = email_template.render(Context(data))
  File "django/template/base.py", line 142, in render
    context.render_context.pop()
  File "django/template/base.py", line 134, in _render
    return self.nodelist.render(context)
  File "django/template/base.py", line 823, in render
    bit = self.render_node(node, context)
  File "django/template/base.py", line 837, in render_node
    return node.render(context)
  File "django/template/loader_tags.py", line 155, in render
    return self.render_template(self.template, context)
  File "django/template/loader_tags.py", line 137, in render_template
    output = template.render(context)
  File "django/template/base.py", line 142, in render
    context.render_context.pop()
  File "django/template/base.py", line 134, in _render
    return self.nodelist.render(context)
  File "django/template/base.py", line 823, in render
    bit = self.render_node(node, context)
  File "django/template/base.py", line 837, in render_node
    return node.render(context)
  File "django/template/defaulttags.py", line 192, in render
    nodelist.append(node.render(context))
  File "django/template/defaulttags.py", line 474, in render
    self.extra_context.iteritems()])
  File "django/template/base.py", line 584, in resolve
    obj = settings.TEMPLATE_STRING_IF_INVALID
  File "django/template/base.py", line 721, in resolve
    value = self._resolve_lookup(context)
  File "django/template/base.py", line 781, in _resolve_lookup
    raise
  File "django/db/models/manager.py", line 119, in count
    return self.get_query_set().count()
  File "django/db/models/fields/related.py", line 461, in get_query_set
    return super(RelatedManager, self).get_query_set().using(db).filter(**self.core_filters)
  File "django/db/models/query.py", line 624, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "django/db/models/query.py", line 642, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "django/db/models/sql/query.py", line 1250, in add_q
    can_reuse=used_aliases, force_having=force_having)
  File "django/db/models/sql/query.py", line 1185, in add_filter
    connector)
  File "django/db/models/sql/where.py", line 69, in add
    value = obj.prepare(lookup_type, value)
  File "django/db/models/sql/where.py", line 320, in prepare
    return self.field.get_prep_lookup(lookup_type, value)
  File "django/db/models/fields/__init__.py", line 310, in get_prep_lookup
    return self.get_prep_value(value)
  File "django/db/models/fields/__init__.py", line 537, in get_prep_value
    return int(value)

Task scsite.tasks.update_various_denorm_fields[edddb260-041d-4195-83d7-f2e731e5d1a5] raised exception: ValueError("invalid literal for int() with base 10: 'a'",)

Stacktrace (most recent call last):

  File "celery/task/trace.py", line 242, in trace_task
    R = I.handle_error_state(task, eager=eager)
  File "celery/task/trace.py", line 415, in __protected_call__
    return self.run(*args, **kwargs)
  File "scsite/tasks.py", line 470, in update_various_denorm_fields
    Person.objects.update_question_counts()
  File "scsite/managers.py", line 715, in update_question_counts
    person.update_question_count_denorm()
  File "scsite/models.py", line 2712, in update_question_count_denorm
    self.question_count_denorm = self.questions.count()
  File "django/db/models/manager.py", line 119, in count
    return self.get_query_set().count()
  File "django/db/models/fields/related.py", line 567, in get_query_set
    return super(ManyRelatedManager, self).get_query_set().using(db)._next_is_sticky().filter(**self.core_filters)
  File "django/db/models/query.py", line 624, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "django/db/models/query.py", line 642, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "django/db/models/sql/query.py", line 1250, in add_q
    can_reuse=used_aliases, force_having=force_having)
  File "django/db/models/sql/query.py", line 1185, in add_filter
    connector)
  File "django/db/models/sql/where.py", line 69, in add
    value = obj.prepare(lookup_type, value)
  File "django/db/models/sql/where.py", line 320, in prepare
    return self.field.get_prep_lookup(lookup_type, value)
  File "django/db/models/fields/__init__.py", line 310, in get_prep_lookup
    return self.get_prep_value(value)
  File "django/db/models/fields/__init__.py", line 537, in get_prep_value
    return int(value) 
```

我相信错误不在我的代码中，看起来缓存由于某种原因损坏了，并且发生了以下情况：

*   检索 pk=123 的 CustomModel。
*   它被传递给 Celery 进行处理。
*   出于某种原因，Custom 模型的 pk 变成了 'a'、'd' 之类的字符，而不是 123。另一个调用是 with`MyModel.objects.get(pk='a')`并且显然失败了。

实际上，重新访问此代码，似乎我并没有像上面提到的那样将对象传递给 Celery，只是从一个简单的 celery 任务中运行以下管理器方法。

```
@task
def mytask():
   Person.objects.update_question_count()

class PersonManager(models.Manager):
   def update_question_counts(self): 
        persons = self.all() # 1
        for person in persons: 
           person.update_question_count_denorm() #3 
```

我的猜测如下：当第 1 行运行时，人员是从缓存中获取的，但在处理第 3 行时，第 1 行中获得的缓存已损坏。

# java - GWT 动态菜单项列表

> ID：15270357
> 
> 赞同：-1
> 
> 时间：2013-03-07T11:45:43.230
> 
> 标签：java, gwt, menuitem

我需要从字符串列表中创建一个动态列表，并将列表项用作菜单项条目。这是否可能像在完整列表上循环然后

```
new MenuItem(list-entry, new Command(){} ) 
```

之后我想像复选框一样选择它（只是用法不是实际的复选框）。我的思考进展是否合理，还是我需要重新思考一切？感谢任何帮助，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:04:13.687

是的，你可以循环播放

```
MenuBar mymenubar = new MenuBar(true);
            for(final String string : myListOfStrings){

                MenuItem menuItem = new MenuItem(string , new Command() {
                    @Override
                    public void execute() {
                         //Do some thing on each menu
                    }
                });

                mymenubar .addItem(menuItem);
            } 
```

像复选框一样选择（在菜单项上）不是一个好主意。在菜单中，您一次只能选择一个菜单项。

# extjs - 使 ExtJS 输入字段失去焦点

> ID：15270360
> 
> 赞同：4
> 
> 时间：2013-03-07T11:45:47.723
> 
> 标签：extjs, extjs4

我有一个`numberfield`输入，当用户按下回车键时我想失去焦点。

这是当前的配置：

```
{
  xtype: 'numberfield',
  minValue: 0,
  maxValue: 99999,
  hideTrigger: true,
  keyNavEnabled: false,
  mouseWheelEnabled: false,
  enableKeyEvents: true,

  listeners: {
    specialkey: function(f, e) {
      if (e.getKey() == e.ENTER)
        f.blur();
    }
  }
} 
```

处理程序工作，按预期`specialkey`调用`blur()`，但唯一的结果是插入符号从输入中消失（表明 DOM 文本输入元素已被模糊）。该字段仍然具有所有`x-form-focus`etc css 类，并且检查对象表明私有`hasFocus`属性仍然为真。

有什么建议么？

我曾尝试`f.onBlur()`在通话后明确`blur()`拨打电话，但没有任何区别。

（顺便说一句，该字段不属于表单，因此没有要提交的表单。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:36:25.263

修复。`'triggerBlur()'`该问题是由 Ext.form.field.Trigger 类中的一种奇怪行为引起的，在该类中，调用常规`'blur()'`函数时它们不会触发。很有意思：

```
listeners: {
    specialkey: function(f, e) {
        if (e.getKey() == e.ENTER)
        {
            f.triggerBlur();
            f.blur();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T03:08:51.743

这对我有用：

```
specialkey: function(field,events) {
    if (events.getKey() == events.ENTER) {
        var nextfld = field.nextSibling(); 
        nextfld.focus(true,100);
    }
} 
```

specialkey - 是诸如 textfield、textare、datefield 等组件的侦听器，

events.getKey - 获取用户键盘输入

events.ENTER - 我使用它，当键盘中的“ENTER”时触发

field.nextSibling - 字段引用当前组件，组件的 nextSibling 属性告诉谁将成为下一个组件

最后是 nextfld.focus 关注下一个组件

# ios - 如何使按钮在 UIScrollView 内滚动？

> ID：15270377
> 
> 赞同：0
> 
> 时间：2013-03-07T11:46:40.577
> 
> 标签：ios, objective-c, uiscrollview

可以在滚动视图中放置一个按钮并使其与视图一起滚动吗？

我试图解释这个问题。我有一个滚动视图，其中包含一个显示一些文本的 textView。在文本中有一个链接，我有一个按钮，放在这个链接旁边，按下时，在 safari 中打开链接。现在，文本比 textView 长，所以我不得不将 Text 视图放在 Scroll View 中以使其滚动。我也尝试将按钮放在 scrollView 内，但是当我滚动时，只有文本滚动并且按钮保持不动那是在文本中。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:50:44.320

据我所知，您不能将控件放在`UITextView`.

您可以通过在 textView 的[`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate) 委托方法期间移动按钮来实现所需的行为。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Move button according to scroll position, using scrollView.contentOffset
} 
```

# html - 在模型中编写一个在视图中输出 HTML 的 Ruby 方法

> ID：15270380
> 
> 赞同：0
> 
> 时间：2013-03-07T11:46:43.900
> 
> 标签：html, ruby-on-rails, ruby

在我看来，我有一个方法可以根据它获得的对象的类来决定打印出哪个 HTML：

```
<% def laybricks(c,stream) %>
  <% if c.is_a?(Post) %>
    <article>
      // Tons more HTML unique to posts
    </article>
  <% elsif c.is_a?(Photograph) %>
    <article>
      // Tons more HTML unique to photographs
    </article>
  <% end %>
<% end> 
```

但是自从编写 Rails 以来，我现在对它有了更多的了解。如何将它传输到我的模型，以便我可以在视图中调用该方法并让它打印相同的 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:57:21.350

视图中的方法肯​​定会更好地移到助手中。

但是对于您的需要，最好的解决方案是使用一些**rails**魔法的部分：

```
<%= render @c %> 
```

`_post.html.erb`如果`@c`是一个实例并且`Post`如果`_photograph.html.erb`它是`Photograph`. 这些部分应该在同一个视图文件夹中，您可以分别在每个部分中引用您的`post`对象`photograph`。

有关详细信息，请参阅[Rails 渲染指南](http://guides.rubyonrails.org/layouts_and_rendering.html)。

* * *

*添加在：*

> 如何将其传输到我的模型，以便我可以在视图中调用该方法并让它打印 HTML

生成 HTML 通常不是模型的责任，但如果您最终想要这样做，最好的方法是使用通常称为 Presenter 或 Decorator 的设计模式。例如`draper`gem 为此而存在，但也有许多其他的。Rails 社区中有很多讨论应该如何调用这种模式，应该如何实现它以及是否值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:58:06.203

更新：

**应用程序助手**

```
def laybricks(c,stream) 
    content = []
      if c.is_a?(Post) 
       content << "<article> </article>"
      elsif c.is_a?(Photograph) 
       content << "<article> </article>"
      end 
end 
```

**你的看法**

```
<%= raw laybricks %> 
```

或者

```
 <%= laybricks.html_safe %> 
```

**注意：**原始助手将允许解释纯 html。您也可以使用`html_safe`方法来解释相同的内容。

# performance - 优化 CUDA 插值

> ID：15270382
> 
> 赞同：0
> 
> 时间：2013-03-07T11:46:49.663
> 
> 标签：performance, optimization, cuda, interpolation

我已经用 CUDA 开发了以下插值，我正在寻找一种改进这种插值的方法。由于某些原因，我不想使用 CUDA 纹理。

由于某些未知原因，我注意到的另一点是，在我的情况下，如果向量的大小优于线程数（例如，大小为 1000 的向量，和等于512的线程数。一个线程完成它的第一项工作，仅此而已。我想优化singleInterp函数。

这是我的代码：

```
__device__ float singleInterp(float* data, float x, int lx_data) { 

float res = 0;    
int i1=0;
int j=lx_data; 
int imid;

while (j>i1+1)  
{  
    imid = (int)(i1+j+1)/2;
    if (data[imid]<x) 
         i1=imid;
    else 
        j=imid;
} 
if (i1==j)
    res = data[i1+lx_data];
else
    res =__fmaf_rn( __fdividef(data[j+lx_data]-data[i1+lx_data],(data[j]-data[i1])),x-data[i1], data[i1+lx_data]);

return res;

} 
```

核心：

```
__global__ void linearInterpolation(float* data, float* x_in, int lx_data) {

int i = threadIdx.x + blockDim.x * blockIdx.x; 
int index = i; 
if (index < lx_data) 
    x_in[index] = singleInterp(data, x_in[index], lx_data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:57:14.207

您似乎对一维线性插值感兴趣。我已经遇到了优化这种插值的问题，最后得到了以下代码

```
__global__ void linear_interpolation_kernel_function_GPU(double* __restrict__ result_d, const double* __restrict__ data_d, const double* __restrict__ x_out_d, const int M, const int N)
{
    int j = threadIdx.x + blockDim.x * blockIdx.x;

    if(j<N)
    {
        double reg_x_out = x_out_d[j/2]+M/2;
        int k = floor(reg_x_out);
        double a = (reg_x_out)-floor(reg_x_out);
        double dk = data_d[2*k+(j&1)];
        double dkp1 = data_d[2*k+2+(j&1)];
        result_d[j] = a * dkp1 + (-dk * a + dk);
    } 
 } 
```

假设数据在`-M/2`和之间的整数节点处采样`M/2`。该代码“等效于”一维纹理插值，如下面[的网页](http://www.orangeowlsolutions.com/?s=interpolation)所述。[对于 1D 线性纹理插值，请参见CUDA-Programming-Guide](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#texture-functions)的图 13 。有关不同解决方案之间的比较，请参阅以下[线程](https://devtalk.nvidia.com/default/topic/528016/accuracy-of-1d-linear-interpolation-by-cuda-texture-interpolation/)。

# c# - 在控制台应用程序中浏览文件夹

> ID：15270387
> 
> 赞同：21
> 
> 时间：2013-03-07T11:46:58.970
> 
> 标签：c#, file-upload

我目前必须编写代码以允许我读取文件夹的所有文件并将它们写入控制台。下面，我还获得了使用浏览器从目录中选择单个文件的代码。我想知道如何使用浏览按钮选择文件夹。

**检查所有文件的代码**

```
 foreach(var path in Directory.GetFiles(@"C:\Name\Folder\"))
    {
       Console.WriteLine(path); // full path
       Console.WriteLine(System.IO.Path.GetFileName(path)); // file name
    } 
```

**打开对话框的代码**

```
OpenFileDialog fileSelectPopUp = new OpenFileDialog();
            fileSelectPopUp.Title = "";
            fileSelectPopUp.InitialDirectory = @"c:\";
            fileSelectPopUp.Filter = "All EXCEL FILES (*.xlsx*)|*.xlsx*|All files (*.*)|*.*";
            fileSelectPopUp.FilterIndex = 2;
            fileSelectPopUp.RestoreDirectory = true;
            if (fileSelectPopUp.ShowDialog() == DialogResult.OK)
            {
                textBox1.Text = fileSelectPopUp.FileName;
            } 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-07T11:51:32.770

首先，您需要添加对`System.Windows.Forms`

然后，将`STAThread`属性添加到 main 方法。这表明您的程序是单线程的，并使其能够与 COM 组件（系统对话框使用）一起工作。

之后，只有您可以将`FolderBrowserDialog`与控制台应用程序一起使用

```
static class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        FolderBrowserDialog fbd = new FolderBrowserDialog();
        if (fbd.ShowDialog() == DialogResult.OK)
        {
            foreach (var path in Directory.GetFiles(fbd.SelectedPath))
            {
                Console.WriteLine(path); // full path
                Console.WriteLine(System.IO.Path.GetFileName(path)); // file name
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:51:08.693

用户`FolderBrowserDialog`

```
FolderBrowserDialog b = new FolderBrowserDialog();

if(b.ShowDialog() == DialogResult.OK)
{
  var folderName = b.SelectedPath;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-16T14:23:26.860

[虽然，您可以使用DotImaging.UI](https://www.nuget.org/packages/DotImaging.UI/)进行图像 UI 操作：

```
string fileName = UI.OpenFile(); //open-file dialog 
```

# php - KCFinder - browse.php 下载而不是显示页面

> ID：15270389
> 
> 赞同：3
> 
> 时间：2013-03-07T11:47:02.223
> 
> 标签：php, javascript, file-upload, upload, ckeditor

我已将最新版本的 KCFinder 集成到 CKEditor 中 - 每当我单击 CKEditor 工具栏上的“浏览服务器”按钮时，它都会打开 KCFinder 对话框并下载“browse.php”文件，而不是显示目录的内容。

好像由于某种原因 PHP 引擎暂时停止工作 - 我没有修改任何 htaccess 文件。

我目前正在使用 kcfinder 目录中的标准 config.php - 有人知道可能是什么原因造成的以及如何解决它吗？

// kcfinder/config.php

```
$_CONFIG = array(

'disabled' => true,
'denyZipDownload' => false,
'denyUpdateCheck' => false,
'denyExtensionRename' => false,

'theme' => "oxygen",

'uploadURL' => "",
'uploadDir' => "",

'dirPerms' => 0755,
'filePerms' => 0644,

'access' => array(

    'files' => array(
        'upload' => true,
        'delete' => true,
        'copy' => true,
        'move' => true,
        'rename' => true
    ),

    'dirs' => array(
        'create' => true,
        'delete' => true,
        'rename' => true
    )
),

'deniedExts' => "exe com msi bat php phps phtml php3 php4 cgi pl",

'types' => array(

    // CKEditor & FCKEditor types
    'files'   =>  "",
    'flash'   =>  "swf",
    'images'  =>  "*img",

    // TinyMCE types
    'file'    =>  "",
    'media'   =>  "swf flv avi mpg mpeg qt mov wmv asf rm",
    'image'   =>  "*img",
),

'filenameChangeChars' => array(/*
    ' ' => "_",
    ':' => "."
*/),

'dirnameChangeChars' => array(/*
    ' ' => "_",
    ':' => "."
*/),

'mime_magic' => "",

'maxImageWidth' => 0,
'maxImageHeight' => 0,

'thumbWidth' => 100,
'thumbHeight' => 100,

'thumbsDir' => ".thumbs",

'jpegQuality' => 90,

'cookieDomain' => "",
'cookiePath' => "",
'cookiePrefix' => 'KCFINDER_',

// THE FOLLOWING SETTINGS CANNOT BE OVERRIDED WITH SESSION CONFIGURATION
'_check4htaccess' => true,
//'_tinyMCEPath' => "/tiny_mce",

'_sessionVar' => &$_SESSION['KCFINDER'],
//'_sessionLifetime' => 30,
//'_sessionDir' => "/full/directory/path",

//'_sessionDomain' => ".mysite.com",
//'_sessionPath' => "/my/path", 
```

);

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:14:38.627

我遇到了同样的问题，我发现 kcfinder 目录中的 .htaccess 文件恰好关闭了 php 引擎。我删除了 .htaccess 文件，然后它工作了。我不明白为什么需要关闭。安全？？好吧，我仍然无法指向正确的目录，但现在我看到了一些东西！

这里有一条关于上面的 CONFIG 数组的评论。属性 disabled 必须设置为 false，通常建议通过 SESSION 变量（放在`$_SESSION['KCFINDER'] = array();` `$_SESSION['KCFINDER']['disabled'] = false;`session_start() 之后）完成，而不是直接在配置文件中。

# ios - 如何进行多线程以更快地将图像加载到tableView？

> ID：15270395
> 
> 赞同：2
> 
> 时间：2013-03-07T11:47:17.917
> 
> 标签：ios, objective-c, cocoa-touch

我正在将图像加载到tableView，每次功能

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

被执行，图像的不同 url 将出现..

我的问题是加载图像需要花费大量时间..

我的代码是..

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.tableView1 = tableView;
    static NSString *simpleTableIdentifier = @"SimpleTableCell";
    SimpleTableCell *cell = (SimpleTableCell *)[tableView1 dequeueReusableCellWithIdentifier:simpleTableIdentifier];
if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}

    cell.nameLabel.text = title;

    NSString *imageURL = [NSString stringWithFormat: @"http://www.xyz.com/image1.png];

     cell.thumbnailImageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:fullURL]]];
}
return cell;
} 
```

每次图片 url 都会改变，加载每张图片都需要时间..

任何人都可以提出解决这个问题的任何想法吗？多线程将如何使用此代码？我应该在代码中编辑的位置和内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:54:00.690

您必须在后台下载图像，例如：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *simpleTableIdentifier = @"SimpleTableCell";
    SimpleTableCell *cell = (SimpleTableCell *)[tableView1 dequeueReusableCellWithIdentifier:simpleTableIdentifier];   
         dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,  0ul);
        dispatch_async(queue, ^{

            NSString *u=[NSString stringWithContentsOfFile:r.url encoding:NSUTF8StringEncoding error:nil];
            NSURL *imageURL=[NSURL URLWithString:u];
            NSData *imageData=[NSData dataWithContentsOfURL:imageURL];
            dispatch_sync(dispatch_get_main_queue(), ^{
                SimpleTableCell *cell = (SimpleTableCell *)[tableView cellForRowAtIndexPath:indexPath];
                 cell.thumbnailImageView.image=[UIImage imageWithData:imageData];
                [cell setNeedsLayout];

            });
        });

    }

    return cell;
} 
```

只需在您的表格视图方法中使用上面的代码并进行必要的编辑，这应该适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:06:55.490

你不需要多线程。至少你不需要自己做。

看看这个教程。当我开始使用应用程序时，这对我很有帮助。 [http://www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

或者子类 UIImageView 并执行此操作： [http ://codeshape.wordpress.com/2011/05/10/creating-a-lazy-loading-uiimageview-for-ios/](http://codeshape.wordpress.com/2011/05/10/creating-a-lazy-loading-uiimageview-for-ios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:50:58.560

看一下 SDWebImage 框架：

[SDWebImage 框架](https://github.com/rs/SDWebImage)

也许它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:55:53.473

我之前使用过的 Jeremy 答案的替代方案是[HJCache](https://github.com/markofjohnson/HJCache)框架

可以只使用 HJManagedImage 对象，它会为你异步下载和缓存图像

# java - 如何从 twilio 第三方 API 获取传入号码

> ID：15270398
> 
> 赞同：1
> 
> 时间：2013-03-07T11:47:26.560
> 
> 标签：java, android

当使用 Twilio 作为第三方集成从 Twilio 号码到应用程序中的另一个 Twilio 号码进行呼叫时，我在获取传入号码方面做了很多研发工作。

但是我没有收到关于该来电号码的任何信息，我接到了来自另一个 Twilio 号码的电话，设备正在收听来电，但无法识别来电号码，因为我正在使用这种方法`connectionCall.IncomingParameterFromKey`，它只返回我“从”。

下面是使用 Twilio 集成在应用程序中接收呼叫的代码。

```
public class Call_Answer extends Activity implements OnClickListener{

String sub_sid="",sub_auth_token="",call_from="";
SharedPreferences sharedPref;
SharedPreferences.Editor prefEdit;
TextView callanswer_btn,callreject_btn;
private Connection connectionCall;
IncomingCall phone;
private Device device;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // Method onCreate created by vk hooda on Oct 30, 2012
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.callanswer);

    sharedPrefValues();
    initializeView();

}

private void sharedPrefValues() {
    // Method sharedPrefValues created by vk hooda on Oct 31, 2012

    sharedPref=PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    prefEdit=sharedPref.edit();
    sub_sid=sharedPref.getString(Constant_Variables.using_sub_sid,"");
    sub_auth_token=sharedPref.getString(Constant_Variables.using_sub_auth_token,"");
    call_from=sharedPref.getString(Constant_Variables.using_phone_number, "");

    //Initialize Calls
    phone=new IncomingCall(sub_sid,sub_auth_token,call_from,getApplicationContext());

    //phone=new IncomingCall(Constants.account_SID,Constants.account_Token,Constants.karl_number,getApplicationContext());

}

private void initializeView() {
    // Method initializeView created by vk hooda on Oct 30, 2012

    callanswer_btn=(TextView)findViewById(R.id.callanswer_btn);
    callreject_btn=(TextView)findViewById(R.id.callreject_btn);

    callanswer_btn.setOnClickListener(this);
    callreject_btn.setOnClickListener(this);
}

@Override
public void onNewIntent(Intent intent)
{
    super.onNewIntent(intent);
    setIntent(intent);
}

@Override
public void onResume()
{
    super.onResume();

    Intent intent = getIntent();
    Device device = intent.getParcelableExtra(Device.EXTRA_DEVICE);
    Connection connection = intent.getParcelableExtra(Device.EXTRA_CONNECTION);
    if (device != null && connection != null) {
        intent.removeExtra(Device.EXTRA_DEVICE);
        intent.removeExtra(Device.EXTRA_CONNECTION);
        handleIncomingConnection(device, connection);

        //              ringingPhone(intent);

    }
}

public void handleIncomingConnection(Device inDevice, Connection inConnection)
{
    Log.i("Handle incoming call", "Device received incoming connection");
    connectionCall=inConnection;
    device=inDevice;
    if (connectionCall != null)
    {
        connectionCall.disconnect();
        connectionCall = inConnection;
//          connectionCall.reject();

        Log.i("Blocktimer.blocking_call",""+Blocktimer.blocking_call);

        if(Blocktimer.blocking_call == true)
        {
            connectionCall.reject();
            Blocktimer.blocking_call = false;
        }

        Log.i("connectionIIIIII",""+ connectionCall.IncomingParameterAccountSIDKey);
        Log.i("connectionIIIIII",""+ connectionCall.IncomingParameterAPIVersionKey);
        Log.i("connectionIIIIII",""+ connectionCall.IncomingParameterCallSIDKey);
        Log.i("connectionIIIIII",""+ connectionCall.IncomingParameterFromKey);
        Log.i("connectionIIIIII",""+ connectionCall.IncomingParameterToKey);
        Log.i("connectionIIIIII",""+ connectionCall.hashCode());
        Log.i("connectionIIIIII",""+ connectionCall.CONTENTS_FILE_DESCRIPTOR);
        Log.i("connectionIIIIII",""+ connectionCall.PARCELABLE_WRITE_RETURN_VALUE);
        Log.i("connectionIIIIII",""+ connectionCall.getState());
        Log.i("connectionIIIIII",""+ connectionCall.isIncoming());
        Log.i("connectionIIIIII",""+ connectionCall.isMuted());

        Log.v("Handling Incoming Call","Someone calling you.you have accepted it here.");
    }

}

public void onClick(View v) {
    // Method onClick created by vk hooda on Oct 30, 2012

    if(v==callanswer_btn)
    {

        if (connectionCall != null)
        { 
            connectionCall.accept();
            Log.i("connectionaccept",""+ connectionCall.getState());
            Log.v("calling answer","Conversation start.....");
        }
    }

    if(v==callreject_btn)
    {
        //connectionCall.disconnect();
        Log.v("calling disconnect","Conversation disconnect.....");

        if (connectionCall != null)
        { 
            connectionCall.disconnect();
            Log.i("connectionReject",""+ connectionCall.getState());
            connectionCall=null;

            Log.v("Disconnect","Disconnecting in finalize method");
        }
        if (device != null)
        {
            Log.v("Disconnect","Release in finalize method");
            device.release();
            device=null;
        }

        finish();
    }   
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T07:06:03.823

我也遇到了同样的问题，我通过使用此代码进行纠正， `connection.IncomingParameterFromKey`只会返回您需要将该名称传递给连接参数的参数名称。

**代码 ：**

> connection.getParameters().get(connection.IncomingParameterFromKey).replace("%2B", "");

# c# - 当符号为@或#时检测RichTextBox中的超链接

> ID：15270406
> 
> 赞同：3
> 
> 时间：2013-03-07T11:47:57.490
> 
> 标签：c#, windows-phone-7, twitter, richtextbox

我正在开发用于阅读 Twitter 的 wp8 应用程序。我读了，`RichTextBox`可以检测链接，很好。但是，我想做下一个功能：如果在推文中存在符号“@” - 在“@”之后创建一个与世界的超链接，这将打开一个新页面，`/DetailsPage.xaml?name=@name`并显示有关用户的其他信息。与 # 相同，但打开带有此标签的推文的页面。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:46:31.540

很简单，使用下面的 XAML：

```
<RichTextBox>
    <Paragraph>
        <Hyperlink NavigateUri="/Page1.xaml">click me!</Hyperlink>
    </Paragraph>
</RichTextBox> 
```

这将显示文本点击我！它看起来像一个超链接，可以点击。单击后，它将带您到项目中的 Page1.xaml。

您显然需要为 RichTextBox 动态创建内容，但我将把它留作练习。

# wpf - WPF EditableTextBlock 的内部 paddig 不起作用

> ID：15270408
> 
> 赞同：1
> 
> 时间：2013-03-07T11:48:07.987
> 
> 标签：wpf, padding, textblock

我的 XAML 中有以下内容：

```
 <DataTemplate x:Key="ValueParserTemplate">
        <v:EditableTextBlock x:Name ="scalarEditorTextBox" Margin="17,3,0,0" Width="134" Height="29" 
                 FontFamily="Microsoft Sans Serif" FontSize="13"
                 Visibility="{Binding IsValueEditorVisible,Converter={StaticResource BoolToVisibility}}"
                 Text="{Binding Path=DisplayValue, UpdateSourceTrigger=Explicit, Mode=TwoWay,
                 ValidatesOnDataErrors=True,
                 ValidatesOnExceptions=True}"
                 Focusable="True"
                 TextAlignment="{Binding PxValueDefinition,Converter={StaticResource aignmentConverter}}"
                 ReadOnly="{Binding IsOutput, RelativeSource={RelativeSource AncestorType={x:Type vo:OutputTreeView}}}"
                 ScalarDataType="{Binding Path=PxValueDefinition}"
                 TextBlockBackgroundColor="{StaticResource ScalarBackground}"
                 TextBoxBackgroundColor="{StaticResource ScalarBackground}"
                 Background="{StaticResource ScalarBackground}"
                 BorderBrush ="Black" BorderThickness="1,1,1,1"/> 
    </DataTemplate> 
```

我想为 TextBlock 的文本进行内部填充。我尝试添加：

```
padding="5,5,5,5" -> no success
padding="50"      -> no success 
```

没有任何效果。看：

![结果](../Images/952cb3ada5459b12d44298cae00f9f0d.png)

你知道我怎样才能得到我想要的吗？

谢谢你。

* * *

编辑：啊……我想我必须在 EditableTextBlock 中添加填充！可编辑文本块 XAML：

```
 <Style TargetType="{x:Type v:EditableTextBlock}">
        <Setter Property="MinWidth" Value="134"/>
        <Setter Property="MinHeight" Value="16"/>
        <Setter Property="AllowDrop" Value="true"/>            
        <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type v:EditableTextBlock}">
                    <Border Name="Border" BorderBrush="{Binding BorderBrush, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" BorderThickness="{Binding BorderThickness, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" SnapsToDevicePixels="True">
                        <Grid x:Name="PART_GridContainer" Background="{TemplateBinding Background}" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                            <TextBlock x:Name="PART_TbDisplayText" Visibility="Visible" 
                                       Background="{Binding TextBlockBackgroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                       Foreground="{Binding TextBlockForegroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                       Text="{Binding Text, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}, Mode=TwoWay}" 
                                       VerticalAlignment="Center" Padding="0,0,3,0"/>
                            <TextBox x:Name="PART_TbEditText" 
                                     Visibility="Hidden" 
                                     Background="{Binding TextBoxBackgroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                     Foreground="{Binding TextBoxForegroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                     Text="{Binding Text, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}, Mode=TwoWay}" 
                                     BorderThickness="0" VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Border" Property="Background" Value="LightGray"/>
                            <Setter TargetName="Border" Property="BorderBrush" Value="Black"/>
                            <Setter Property="Foreground" Value="Gray"/>
                        </Trigger>
                        <Trigger Property="Validation.HasError" Value="true">
                            <Setter TargetName="Border" Property="BorderBrush" 
                            Value="Red"/>
                        </Trigger>
                        <Trigger Property="IsFocused" Value="True">
                            <Setter Property="ShowFocusVisual" Value="True"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
                    Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                    Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:29:37.060

您应该在模板中将 TextBlock 和 TextBox 的边距设置为绑定到其父级的 Padding 属性：

```
 <Border Name="Border" BorderBrush="{Binding BorderBrush, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" BorderThickness="{Binding BorderThickness, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" SnapsToDevicePixels="True">
        <Grid x:Name="PART_GridContainer" Background="{TemplateBinding Background}" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
            <TextBlock x:Name="PART_TbDisplayText" Visibility="Visible"
                                   Margin="{TemplateBinding Padding}"
                                   Background="{Binding TextBlockBackgroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                   Foreground="{Binding TextBlockForegroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                   Text="{Binding Text, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}, Mode=TwoWay}" 
                                   VerticalAlignment="Center" Padding="0,0,3,0"/>
            <TextBox x:Name="PART_TbEditText" 
                                 Visibility="Hidden" 
                                 Margin="{TemplateBinding Padding}"
                                 Background="{Binding TextBoxBackgroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                 Foreground="{Binding TextBoxForegroundColor, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}}" 
                                 Text="{Binding Text, RelativeSource={RelativeSource AncestorType={x:Type v:EditableTextBlock}}, Mode=TwoWay}" 
                                 BorderThickness="0" VerticalAlignment="Center"/>
        </Grid>
    </Border> 
```

# jquery - 如何利用来自不同页面的加载 gif？

> ID：15270410
> 
> 赞同：1
> 
> 时间：2013-03-07T11:48:12.940
> 
> 标签：jquery, iframe, qlikview

对于解决这个大脑戏弄问题的帮助，我将不胜感激！

*   我们有一个托管在一台服务器上的网站。
*   我们还有一个基于 Web 的应用程序，它托管在不同的服务器上，因为它使用不同的技术 (QlikView)。

我们所做的是通过使用 iFrame 拉入应用程序，使应用程序*看起来*像是网站的一部分。我们用来执行此操作的代码如下所示：

```
<iframe src="http://www.application_blah.co.uk" width="1190px" height="900px" style="margin: 17px 0 0 -10px; border:none;" scrolling="no" ></iframe> 
```

这工作正常。但是该应用程序需要 20 秒才能加载。在此期间，用户会看到网站的页眉和页脚，但除此之外它只是空白。没有任何迹象表明正在发生任何事情或应用程序正在加载。

如果您直接而不是通过 iFram 查看应用程序，它在加载时确实有一个加载 gif，但它位于页面的右上角，因此它完全不在 iFrame 的视图中。加载 gif 出现在 id="InitialLoader" 的 div 中。

我们无法控制应用程序的代码（例如移动加载 gif）。但是我们可以在网站上编辑代码。我想知道是否有可能以某种方式利用该加载符号并显示我们自己的加载符号（或者实际上是相同的符号），只要它在应用程序中可见？

我的一个想法是使用 jQuery .load，但不确定这是否可行？加载符号不会永久显示，仅在加载页面时。我想在特定用户加载它时在我们的网页上显示它。这是我正在考虑的代码示例：

**jQuery**

```
 <script>
jQuery(document).ready(function(){
    jQuery("#loading").load('http://www.application_blah.co.uk #InitialLoader');
});
</script> 
```

**html**

```
<div id="loading"></div> 
```

如果有其他方法，我非常愿意接受建议！最好知道上述是否可行？由于我们的代理机构向我收取费用，因此我很难在网站上进行测试，因此在提交之前要确定！

非常感谢，

凯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:13:53.153

好的，我相信您遇到的问题是您正在执行以下操作：

1）您正在加载一个 iframe，其中设置了一个 img 标签...

2) 使用 jquery 询问 img 是否已加载，或对其应用 onload 属性只会失败，因为标签已全部呈现并且 DOM 似乎不支持此逻辑。

我发现的一个选项是在为 img 加载文档后手动设置源（如果可能的话），jFiddle 提供了一个快速示例。

```
$(document).ready(function(){
    $('img').attr('src', 'http://onerahi.cabu.school.nz/files/2012/09/goes-12-firstimage-large081701.jpg').load(function() { alert('loaded'); });
}
); 
```

[http://jsfiddle.net/7E6zQ/](http://jsfiddle.net/7E6zQ/)

#

好的，所以，获取现有图像并重新制作并使用新的 onload 函数将其添加到 dom 中，我认为这可以实现您的结果，附加新的小提琴。

[http://jsfiddle.net/yNGV7/](http://jsfiddle.net/yNGV7/)

```
$('document').ready(function(){
    var newimg = new Image();
    newimg.src = $('img').attr('src');
    newimg.onload = function() {
         //remove loading msg
        $('.ctx-menu-text').remove();

            //hide the div
        $('#InitialLoader').fadeOut(1000);
    }

    $('img').replaceWith(newimg);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:46:50.313

感谢 John 的示例 - 能够在 jsfiddle 上看到它真是太好了！

据我了解，您已经创建了一些代码，当图像完成加载时会显示警报。也许这可以通过一些调整来用于我的目的？我不确定如何。这是我需要实现的目标：

**在加载应用程序时**

在加载应用程序时，www.application-blah.co.uk 上的加载 gif 容器 div 如下所示：

```
<div id="InitialLoader">
<img src="working.gif">
<span class=ctx-menu-text">Loading...</span>
</div> 
```

我希望在 www.mysite.com 上显示加载消息，同时在 www.application-blah.co.uk 上可以看到这个 div。

**应用程序完成加载后**

加载应用程序后，包含加载 gif 的 div 的样式将更改为 style="display:none"，如下所示。

```
<div id="InitialLoader" style="display:none">
<img src="working.gif">
<span class=ctx-menu-text">Loading...</span>
</div> 
```

当这种情况发生时，我希望 www.mysite.com 上的加载消息消失。

希望这是有道理的！我知道这不是一个理想的情况！

再次感谢！

凯蒂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:21:44.983

您实际上可以尝试在框架本身中移动 DIV。DIV“InitialLoader”由 Qlikview 中的 CSS 控制。可以编辑 CSS 以将 DIV 定位在页面的中心。然后您可以在“opendoc.htm”中将“Loading...”文本编辑为其他内容。

# .net - Nuget 包的意义何在？

> ID：15270416
> 
> 赞同：11
> 
> 时间：2013-03-07T11:48:33.343
> 
> 标签：.net, package, nuget, nuget-package

也许我做错了什么或表达了纯粹的无知，但我真的看不出 Nuget 包有什么好处？我最近决定安装一些 Nuget 包来替换我的应用程序中的静态 DLL。当我检查由包创建的文件夹时，它们似乎包含许多不同版本的 DLL，它们都嵌套在一组子目录下。

难道所有这些文件，其中许多似乎是多余的，会增加应用程序的整体大小并减慢发布和部署例程吗？还有哪些项目应该放在源代码管理中？

就像我说的那样，我可能在这里遗漏了一些东西，但有人能告诉我 Nuget 包的优点吗？我开始认为 bin 文件夹中的一个简单的 dll 工作得很好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T11:51:34.150

1.  每个包都知道它依赖于哪些其他包——特别是它们的版本。这有助于确保所有库都兼容。
2.  您仍然应该只部署您实际需要的 DLL 版本
3.  您可以决定不将*任何*DLL 放入源代码管理，因为 NuGet 具有“包还原”功能，可在构建时自动加载缺失的包。
4.  您拥有所有依赖项的中心位置：只需右键单击您的项目并选择您需要的包。不再搜索下载链接等。

# android - finish() 正在关闭两个活动而不是一个

> ID：15270419
> 
> 赞同：0
> 
> 时间：2013-03-07T11:48:38.617
> 
> 标签：android, android-activity, activity-finish

我制作了一个执行以下操作的应用程序：

活动 A --> 活动 B --> 活动 C

活动 A --> 活动 B2 --> 活动 C

当您关闭 B、B2 或 C 时，它会转到上一个活动。如果您关闭 A，它将从应用程序中退出。

如果你从 B 到达 C，C 以一种方式工作，但如果你从 B2 到达，C 以一种不同的方式工作。

这在模拟器和我可以检查的所有设备中完美运行，但是在两个带有 android 4.0.4 的 Xperia（型号 ARC 和 U）中出现了问题。

当他们从 B 到达 C 时，问题就出现了。当他们关闭 C 时，他们回到 A 而不是 B。如果他们从 B2 到达 C，当他们关闭时又回到 B2。

我无法理解。假设 C 在这两种情况下都必须以相同的方式工作。

另一个问题是：该应用程序如何在除这两个设备之外的所有设备上完美运行？

任何的想法？我怎么解决这个问题？

编辑添加代码：

从 B 打开 C：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    // TODO Auto-generated method stub
    switch (position+1) {
    case 1:
        if(random == true){
            AnimalsBD.cmpt = Integer.parseInt(ABD.getNAct(Integer.toString(Aguila.ordre)))+1;
            }
        Intent a = new Intent ("com.android.JIA.Animals.1");
        startActivity(a);
    break;
    case 2:
        if(random == true){
            AnimalsBD.cmpt = Integer.parseInt(ABD.getNAct(Integer.toString(Anec.ordre)))+1;
            }
        Intent b = new Intent ("com.android.JIA.Animals.2");
        startActivity(b);
    break; 
```

从 B2 打开 C：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {     
    // TODO Auto-generated method stub

    mpCorrecte = MediaPlayer.create(this, R.raw.correcte);
    mpIncorrecte = MediaPlayer.create(this, R.raw.incorrecte);

    if(start){
    switch (position+1) {
    case 1:
        if(numSo==1){
            start = false;
            mpCorrecte.start();
            mpCorrecte.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                public void onCompletion(MediaPlayer mp) {
                    Intent a = new Intent ("com.android.JIA.Animals.1");
                    startActivity(a);}                  
            });
        }else{
            mpIncorrecte.start();
        }
    break;
    case 2:
        if(numSo==2){
            start = false;
            mpCorrecte.start();
            mpCorrecte.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                public void onCompletion(MediaPlayer mp) {
                    Intent a = new Intent ("com.android.JIA.Animals.2");
                    startActivity(a);}                  
            });
        }else{
            mpIncorrecte.start();
        }
    break; 
```

在这两种情况下，我都会从 gridview 打开最终活动。所有最后的活动都是平等的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:38:42.537

最后，我已经可以解决问题了。

在 OnDestroy() 方法中有一个 finish() 丢失，如下所示：

```
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    ABD.erase();
            finish();
} 
```

感谢您的帮助。

现在的问题是：为什么除了这两个模型之外，finish() 在任何设备上都没有做任何事情？

未解之谜...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:16:20.793

使用此代码打开新活动。

```
 Intent i = new Intent(CurrentActivity.this,
            OpeningActivity.class);
    startActivity(i); 
```

更换`CurrentActivity`和`OpeningActivity`

**该应用程序如何在除这两个设备之外的所有设备上完美运行？**
您必须通过选择不同类型的手机（例如不同的平台、不同的屏幕尺寸和不同的规格）来手动检查它。

# python - 为什么 XGrabKey 会生成额外的聚焦和聚焦事件？

> ID：15270420
> 
> 赞同：41
> 
> 时间：2013-03-07T11:48:39.277
> 
> 标签：python, linux, x11, xlib

有谁知道 xlib 函数可以在不丢失原始焦点的情况下捕获按键事件？如何摆脱它？

（或“使用 XGrabKey() 而不生成 Grab 式焦点”？）

（或“如何在系统级别摆脱 NotifyGrab 和 NotifyUngrab 焦点事件？）

XGrabKey 将失去对按下键的关注并恢复对释放键的关注。

而且我想捕获按键而不会将其泄漏到原始窗口（就像 XGrabKey 可以做到的那样）。

参考：

1.  ...XGrabKey 将窃取焦点... [https://bugs.launchpad.net/gtkhotkey/+bug/390552/comments/8](https://bugs.launchpad.net/gtkhotkey/+bug/390552/comments/8)

2.  ...程序接收控制以响应组合键执行某些操作。同时，程序暂时被聚焦... [在XGrabKey(board)期间，发现哪个窗口被聚焦](https://stackoverflow.com/questions/13504593/during-xgrabkeyboard-discover-which-window-had-been-focused)

3.  ...XGrabKeyboard 功能主动控制键盘并生成 FocusIn 和 FocusOut 事件... [http://www.x.org/archive/X11R6.8.0/doc/XGrabKeyboard.3.html#toc3](http://www.x.org/archive/X11R6.8.0/doc/XGrabKeyboard.3.html#toc3)

4.  ...我看不到一种方法来提供 metacity 当前的桌面更改行为（同时更改和显示弹出对话框）而不导致窗口上出现 Grab 类型的焦点... [https://mail.gnome .org/archives/wm-spec-list/2007-May/msg00000.html](https://mail.gnome.org/archives/wm-spec-list/2007-May/msg00000.html)

5.  ...全屏模式不应在使用 NotifyGrab 的 FocusOut 事件上退出... [https://bugzilla.mozilla.org/show_bug.cgi?id=578265](https://bugzilla.mozilla.org/show_bug.cgi?id=578265)

6.  抓取键盘不允许改变焦点... [抓取键盘不允许改变焦点](https://stackoverflow.com/questions/18160990/grabbing-keyboard-doesnt-allow-changing-focus)

7.  Grabs 生成的焦点事件（XGrabKeyboard 的主动抓取和 XGrabKey 的被动抓取） [http://www.x.org/releases/X11R7.6/doc/libX11/specs/libX11/libX11.html#Focus_Events_Generated_by_Grabs](http://www.x.org/releases/X11R7.6/doc/libX11/specs/libX11/libX11.html#Focus_Events_Generated_by_Grabs)

8.  XGrabKey 源代码：[http](http://cgit.freedesktop.org/xorg/lib/libX11/tree/src/GrKey.c) ://cgit.freedesktop.org/xorg/lib/libX11/tree/src/GrKey.c也许我们可以修改它以摆脱聚焦事件？

9.  有“DoFocusEvents（keybd，oldWin，grab->window，NotifyGrab）；” 在 ActivateKeyboardGrab() 中： [http ://cgit.freedesktop.org/xorg/xserver/tree/dix/events.c](http://cgit.freedesktop.org/xorg/xserver/tree/dix/events.c)

我正在写一个按键组合（和鼠标移动）映射软件：[https ://code.google.com/p/diyism-myboard/](https://code.google.com/p/diyism-myboard/)

我已经在 Windows 中使用 RegisterHotKey() 和 UnRegisterHotKey() 实现了这一点：[https ://code.google.com/p/diyism-myboard/downloads/detail?name=MyBoard.pas](https://code.google.com/p/diyism-myboard/downloads/detail?name=MyBoard.pas)

我想用 XGrabKey() 和 XUngrabKey() 将它迁移到 Linux：[https ://code.google.com/p/diyism-myboard/downloads/detail?name=myboard.py](https://code.google.com/p/diyism-myboard/downloads/detail?name=myboard.py)

我已经创建了 10 美元的赏金来解决这个问题。我们需要更多的支持者来发放赏金。 [https://www.bountysource.com/issues/1072081-right-button-menu-flashes-while-jkli-keys-move-the-mouse-pointer](https://www.bountysource.com/issues/1072081-right-button-menu-flashes-while-jkli-keys-move-the-mouse-pointer)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T08:30:10.530

我当前的代码（来自[http://diyism-myboard.googlecode.com/files/myboard.py](http://diyism-myboard.googlecode.com/files/myboard.py)）：

```
disp=Display()
screen=disp.screen()
root=screen.root

def grab_key(key, mod):
    key_code=string_to_keycode(key)
    #3rd: bool owner_events, 4th: pointer_mode, 5th: keyboard_mode, X.GrabModeSync, X.GrabModeAsync
    root.grab_key(key_code, mod, 0, X.GrabModeAsync, X.GrabModeAsync)
    root.grab_key(key_code, mod|X.LockMask, 0, X.GrabModeAsync, X.GrabModeAsync) #caps lock
    root.grab_key(key_code, mod|X.Mod2Mask, 0, X.GrabModeAsync, X.GrabModeAsync) #num lock
    root.grab_key(key_code, mod|X.LockMask|X.Mod2Mask, 0, X.GrabModeAsync, X.GrabModeAsync)

def main():
    grab_key('Shift_L', X.NONE)
    grab_key('Shift_R', X.NONE)
    while 1:
          evt=root.display.next_event()
          if evt.type in [X.KeyPress, X.KeyRelease]: #ignore X.MappingNotify(=34)
             handle_event(evt)

if __name__ == '__main__':
   main() 
```

当我按下“shift”键时，焦点丢失，当我松开它时，焦点又回来了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-10T13:34:37.407

早在 90 年代初期，我就查看了 Irix、ultrix 和 solaris 的全局热键，因为在我的 Acorn BBC 计算机上很容易做到这一点。最终，我们决定在低于 xlib 的级别上使用一些专有代码以不可移植的方式解决这个问题。由于无论如何我们的软件安装都需要超级用户权限，因此我们能够插入适当的软件挂钩作为守护进程。

对于 Linux（现在），您可能应该通过在操作系统级别处理键盘事件来寻找软件解决方案。我会先看看这里：[http ://code.google.com/p/logkeys/](http://code.google.com/p/logkeys/)

更通用的解决方案是使用带有 USB 输入和 USB 输出的小型 PC 板，它对计算机充当鼠标和键盘，并在必要时转换键盘按键。但是，如果您想经常更改映射，这不会那么灵活。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-19T12:22:17.317

最后，你知道 linux 意味着自由，我修改了 xserver 以摆脱抓取式的焦点输出：

```
sudo apt-get build-dep xorg-server
apt-get source xorg-server
cd xorg-server-*
#modify or patch dix/events.c: comment off "DoFocusEvents(keybd, oldWin, grab->window, NotifyGrab);" in ActivateKeyboardGrab(), comment off "DoFocusEvents(keybd, grab->window, focusWin, NotifyUngrab);" in DeactivateKeyboardGrab()
sudo apt-get install devscripts
debuild -us -uc    #"-us -uc" to avoid the signature step
cd ..
sudo dpkg --install xserver-xorg-core_*.deb
#clear dependencies:
sudo apt-mark auto $(apt-cache showsrc xorg-server | grep Build-Depends | perl -p -e 's/(?:[\[(].+?[\])]|Build-Depends:|,|\|)//g')
sudo apt-get autoremove 
```

而且我还需要在 gtk 上下文菜单中删除 XGrabKeyboard：

```
sudo apt-get build-dep gtk+2.0
apt-get source gtk+2.0
cd gtk+2.0-*
#modify or patch it: add "return TRUE;" in first line of popup_grab_on_window() of gtk/gtkmenu.c
dpkg-source --commit
debuild -us -uc  #"-us -uc" to avoid the signature step, maybe need: sudo apt-get install devscripts
cd ..
sudo dpkg --install libgtk2.0-0_*.deb
#clear dependencies:
sudo apt-mark auto $(apt-cache showsrc gtk+2.0 | grep Build-Depends | perl -p -e 's/(?:[\[(].+?[\])]|Build-Depends:|,|\|)//g')
sudo apt-get autoremove 
```

现在 myboard.py 运行良好。

如果您使用的是 ubuntu raring-updates 版本，您可以尝试：

[https://code.google.com/p/diyism-myboard/downloads/detail?name=xserver-xorg-core_1.13.3-0ubuntu6.2_i386.deb](https://code.google.com/p/diyism-myboard/downloads/detail?name=xserver-xorg-core_1.13.3-0ubuntu6.2_i386.deb)

和：

[https://code.google.com/p/diyism-myboard/downloads/detail?name=libgtk2.0-0_2.24.17-0ubuntu2_i386.deb](https://code.google.com/p/diyism-myboard/downloads/detail?name=libgtk2.0-0_2.24.17-0ubuntu2_i386.deb)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-10T13:43:25.570

看起来 XQueryKeymap 会给你排序。[有关我发现的 C++ 源代码](http://pastebin.com/sk7FZ6AP)，请参见下文：

```
/* compile with g++ keytest.cpp -LX11 -o keytest */
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/time.h>

double gettime() {
 timeval tim;
 gettimeofday(&tim, NULL);
 double t1=tim.tv_sec+(tim.tv_usec/1000000.0);
 return t1;
}

int main() {
 Display *display_name;
 int depth,screen,connection;
 display_name = XOpenDisplay(NULL);
 screen = DefaultScreen(display_name);
 depth = DefaultDepth(display_name,screen);
 connection = ConnectionNumber(display_name);
 printf("Keylogger started\n\nInfo about X11 connection:\n");
 printf(" The display is::%s\n",XDisplayName((char*)display_name));
 printf(" Width::%d\tHeight::%d\n",
 DisplayWidth(display_name,screen),
 DisplayHeight(display_name,screen));
 printf(" Connection number is %d\n",connection);

 if(depth == 1)
  printf(" You live in prehistoric times\n");
 else
  printf(" You've got a coloured monitor with depth of %d\n",depth);

 printf("\n\nLogging started.\n\n");

 char keys_return[32];
 while(1) {
  XQueryKeymap(display_name,keys_return);
  for (int i=0; i<32; i++) {
   if (keys_return[i] != 0) {
    int pos = 0;
    int num = keys_return[i];
    printf("%.20f: ",gettime());
    while (pos < 8) {
     if ((num & 0x01) == 1) {
      printf("%d ",i*8+pos);
     }
     pos++; num /= 2;
    }
    printf("\n");
   }
  }
  usleep(30000);
 }
 XCloseDisplay(display_name);
} 
```

请注意，这不是经过测试的代码，也不是我的——我只是在 Internet 上找到的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-16T05:41:03.380

我有一个想法，我很确定会工作，但我必须上床睡觉，不能自己测试它，而且它不漂亮，因为我认为没有任何方法可以做你做的事想要在 X 中。这是我想到的步骤。简而言之：禁用 X 中的键盘，从较低级别的 api 读取事件，并自己有选择地将它们提供给 X。您必须在 X 中禁用键盘，否则，您可以查看事件，但不能停止它；你会在 X 旁边阅读它，而不是截取它。

所以在这里分解：

1) 运行`xinput -list`以获取 X 正在使用的键盘

2) 运行`xinput list-props`id 找到 Device Enabled 属性

3）运行`xinput set-prop id prop 0`以禁用X中的设备：

```
xinput -list
xinput list-props 12 # 12 is the id of the keyboard in the list... (example # btw)
xinput set-prop 12 119 0 # 119 is the "Device Enabled" prop, we turn it off 
```

我不知道 xinput 在 xlib 级别上是如何工作的，为了简单起见，我只是将其调用到 shell 中。

4) Open `/dev/input/eventX`，其中 X 是键盘设备。我实际上会在 /dev/input/by-id 下搜索名称（在 xinput -list 中给出）并以这种方式打开它。这可能在某些时候需要root，因为这些权限通常非常严格。

5）从那里读取键盘输入：

输入事件的数据格式为：

```
struct input_event {
    int tv_sec; // time of the event
    int tv_usec; // ditto
    ushort type; // == 1 for key event
    ushort code; // key code, not the same as X keysyms, you should check it experimentally. 42 is left shift on mine, 54 is right shift
    int value; // for keys, 1 == pressed, 0 == released, 2 == repeat
} 
```

int 是 32 位，ushorts 是 16 位。由于您只对键盘输入感兴趣，因此您可以非常简单地执行此操作：

*   读取并忽略 8 个字节。

*   下一个字节应该是1，然后下一个是0。如果不是，跳过这个事件

*   下一个字节是键码的小端，因为有 < 255 个键，这就足够了

*   跳过下一个字节。

*   读取下一个字节以查看是按下还是释放

*   跳过接下来的三个字节

6）当你遇到一个你感兴趣的事件时，你自己处理它。否则，使用 XSendEvent 将其发送到 X 以便可以正常处理。将您从 /dev/input 获得的硬件代码映射到适当的键符可能是一个技巧，但我相当肯定 xlib 中有一个函数可以帮助解决这个问题。

7）转到5并循环直到你完成

8) 确保将所有内容设置回退出时的状态，否则可能会将用户的键盘输入中断为 X！

我建议使用第二个 USB 键盘对此进行测试，您可以使用 /dev/input 和 xinput 彼此独立地禁用和收听键盘，因此如果您崩溃，您仍然可以使用第一个键盘并正常工作。（实际上，我认为故意用第二个键盘来做这件事会很酷，热键加倍！）

但是，是的，需要 root 并可能将键盘与 X “分离”一点都不漂亮，而且使用 SendKey 进行转发可能说起来容易做起来难，但我很确定这*会*奏效并为您提供最大的灵活性.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-04T11:38:27.870

对于写一个键（快捷键）映射软件也看看`[libtermkey](http://leonerds-code.blogspot.de/2011/05/libtermkey-read-keypresses-from.html)`，一个终端键输入库（用C写的），它识别XTerm风格的鼠标位置/按钮报告，特殊键（如箭头和功能键），包括“修改“键之类的`Ctrl-Left`。

例如，有`[POE::Wheel::TermKey](http://cpansearch.perl.org/src/PEVANS/POE-Wheel-TermKey-0.02/README)`一个“围绕`libtermkey`库的异步 perl 包装器，它提供了一种在基于终端的程序中读取按键事件的抽象方法”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-16T07:50:39.360

您可以使用[XQueryKeymap](http://tronche.com/gui/x/xlib/input/XQueryKeymap.html)读取事件，然后您可以使用[XTestKey](http://linux.die.net/man/3/xtestfakekeyevent)发送退格键事件，然后发送您想要按下的键。更好的是，您可以为所有键盘事件[注册热键](https://stackoverflow.com/q/4037230/443348)，然后使用 XTestKey 生成键事件。顺便说一句，KDE 的“自定义快捷方式”控制模块允许使用快捷方式来生成按键。[源代码](https://projects.kde.org/projects/kde/kde-workspace/repository/revisions/master/show/khotkeys)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-17T00:46:06.107

虽然我看到这个问题很老，但它仍然是相关的，我找到了一种比修改 xorg-server 更便携的解决方法。

基本上，当抓取窗口是主动聚焦窗口时，XGrabKey 不会发送焦点事件。

如果您观看活动窗口并在焦点更改为新窗口时重置您的抓取，则不会生成事件。我发现监视`PropertyNotify` 事件并查看`_NET_ACTIVE_WINDOW`窗口属性可以很好地获取该信息。

我还没有发现将抓取设置为当前活动窗口的任何不利影响，或者坦率地说有任何影响。

# python - 预期异常后python返回尝试块

> ID：15270421
> 
> 赞同：1
> 
> 时间：2013-03-07T11:48:42.020
> 
> 标签：python, python-2.7, try-catch

我跟踪了装饰器的一些递归函数。我想知道返回 try 块的方法。我已经尝试过while循环，但它对我不起作用，因为我的函数是递归的，谁能告诉我如何处理它？问题是当函数 change_t 引发异常时，我想继续执行我的 try 块

这是我的装饰器和功能

正确的结果：

```
,- change_t([9, 7, 5], 44)
| ,- change_t([9, 7, 5], 35)
| | ,- change_t([9, 7, 5], 26)
| | | ,- change_t([9, 7, 5], 17)
| | | | ,- change_t([9, 7, 5], 8)
| | | | | ,- change_t([7, 5], 8)
| | | | | | ,- change_t([7, 5], 1)
| | | | | | | ,- change_t([5], 1)
| | | | | | | | ,- change_t([], 1)
| | | | | | ,- change_t([5], 8)
| | | | | | | ,- change_t([5], 3)
| | | | | | | | ,- change_t([], 3)
| | | | | | | ,- change_t([], 8)
| | | | ,- change_t([7, 5], 17)
| | | | | ,- change_t([7, 5], 10)
| | | | | | ,- change_t([7, 5], 3)
| | | | | | | ,- change_t([5], 3)
| | | | | | | | ,- change_t([], 3)
| | | | | | ,- change_t([5], 10)
| | | | | | | ,- change_t([5], 5)
| | | | | | | | ,- change_t([5], 0)
| | | | | | | | `- []
| | | | | | | `- [5]
| | | | | | `- [5, 5]
| | | | | `- [5, 5]
| | | | `- [7, 5, 5]
| | | `- [7, 5, 5]
| | `- [9, 7, 5, 5]
| `- [9, 9, 7, 5, 5]
`- [9, 9, 9, 7, 5, 5] 
```

这就是我得到的：它在我期待异常之后立即停止

```
change_t([9, 7, 5], 44)
,- change_t ([9, 7, 5], 44)
| ,- change_t ([9, 7, 5], 35)
| | ,- change_t ([9, 7, 5], 26)
| | | ,- change_t ([9, 7, 5], 17)
| | | | ,- change_t ([9, 7, 5], 8)
| | | | | ,- change_t ([7, 5], 8)
| | | | | | ,- change_t ([7, 5], 1)
| | | | | | | ,- change_t ([5], 1)
| | | | | | | | ,- change_t ([], 1)
| | | | | | `- 1
| | | | | `- 1
| | | | `- 1
| `- 8
`- 8
`- 17
`- 26
`- 35
`- 44
44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:04:40.030

正如我在评论中所说，您需要重新引发异常，以便原始函数实际上可以捕获并继续。您只想在 except 处理程序中将缩进减少一个，这样您就不会在左侧太远：

```
class traced(object):
    indent =0
    def __init__(self,f):
        self.__name__=f.__name__
        self.indent=0
        self.f=f         
    def __call__(self,*args,**kwargs):
        string=""           
        if kwargs:
           l=[]
           for (key, value) in kwargs.items():
               l.append(str(key) + "=" + str(value))
           a=', '.join(l)
           string = '('+a+')'              
        else:
             l=[]
             for value in args:
                 l.append(str(value))
             a=', '.join(l)
             string = '('+a+')'       
        print('| ' * traced.indent + ',- '+ self.__name__+' '+string)   
        try:
            traced.indent+=1
            value = self.f(*args,**kwargs)                
        except Exception:
            traced.indent-=1  # <-- only decrement by one
            raise             # <-- reraise the exception so the original function can catch it
        traced.indent-=1
        print('| '* traced.indent + "`- "+ repr(value))          
        return value 
```

然后它起作用了：

```
>>> change_t([9, 7, 5], 44)
,- change_t ([9, 7, 5], 44)
| ,- change_t ([9, 7, 5], 35)
| | ,- change_t ([9, 7, 5], 26)
| | | ,- change_t ([9, 7, 5], 17)
| | | | ,- change_t ([9, 7, 5], 8)
| | | | | ,- change_t ([7, 5], 8)
| | | | | | ,- change_t ([7, 5], 1)
| | | | | | | ,- change_t ([5], 1)
| | | | | | | | ,- change_t ([], 1)
| | | | | | ,- change_t ([5], 8)
| | | | | | | ,- change_t ([5], 3)
| | | | | | | | ,- change_t ([], 3)
| | | | | | | ,- change_t ([], 8)
| | | | ,- change_t ([7, 5], 17)
| | | | | ,- change_t ([7, 5], 10)
| | | | | | ,- change_t ([7, 5], 3)
| | | | | | | ,- change_t ([5], 3)
| | | | | | | | ,- change_t ([], 3)
| | | | | | ,- change_t ([5], 10)
| | | | | | | ,- change_t ([5], 5)
| | | | | | | | ,- change_t ([5], 0)
| | | | | | | | `- []
| | | | | | | `- [5]
| | | | | | `- [5, 5]
| | | | | `- [5, 5]
| | | | `- [7, 5, 5]
| | | `- [7, 5, 5]
| | `- [9, 7, 5, 5]
| `- [9, 9, 7, 5, 5]
`- [9, 9, 9, 7, 5, 5]
[9, 9, 9, 7, 5, 5] 
```

最后，我会稍微清理一下装饰器，使其更简洁明了你在做什么：

```
class traced(object):
    indent = 0

    def __init__(self, f):
        self.__name__ = f.__name__
        self.f = f

    def __call__(self, *args, **kwargs):
        if kwargs:
            l = [str(key) + '=' + str(value) for key, value in kwargs.items()]
        else:
            l = list(map(str, args))
        print('| ' * traced.indent + ',- {0} ({1})'.format(self.__name__, ', '.join(l)))
        try:
            traced.indent += 1
            value = self.f(*args,**kwargs)                
        finally:
            traced.indent -= 1

        print('| ' * traced.indent + '`- ' + repr(value))
        return value 
```

在这里，我简化了整个参数聚合以使用列表理解。我还使用了字符串格式来使格式更清晰。这样，您还可以组合必须放在列表内容周围的括号（顺便说一句，您在这两种情况下都这样做了）。当您在没有真正查看异常的情况下重新提出异常时，我们不需要一开始就捕获它，只需确保我们调整 finally 块中的缩进即可。

实际上，为什么要检查变量参数*或*关键字参数*？*只接受两者：

```
l = list(map(str, args))
l.extend([str(key) + '=' + str(value) for key, value in kwargs.items()]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:04:17.603

当引发异常时，控制权将从引发异常的代码中放弃。而是将其移交给捕获该异常的第一个 catch 块，或移交给主解释器循环。

看看你的代码：

```
if a==0:
    return []
elif len(l)==0:
    raise ChangeException()
elif l[0]>a:
    return change_t(l[1:],a) 
```

当第三个条件为真`l[0]>a`时，即 l 的长度为 1 时会发生什么？然后在下一次调用时，即`return change_t(l[1:],a)`它会引发一个异常，除了主循环之外的任何人都不会捕获该异常：这就是您的代码失败的原因。您需要将第三个条件包装在 try catch 子句中，具体取决于您想要实现的目标。

# tsql - 如何在 sql server 2005 中停止代码执行

> ID：15270425
> 
> 赞同：-2
> 
> 时间：2013-03-07T11:48:54.100
> 
> 标签：tsql, sql-server-2005

SQL Server 2005 中停止进一步行代码执行的类似方法是什么，就像我们在 c#.net 中使用“return”或“break”一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:52:22.517

尝试使用 raiserror，它将终止连接。

[http://msdn.microsoft.com/en-us/library/ms178592.aspx](http://msdn.microsoft.com/en-us/library/ms178592.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:53:33.037

尝试[raiseerror](http://msdn.microsoft.com/en-us/library/ms177497%28v=sql.90%29.aspx "引发错误") 命令。这将终止连接，从而停止脚本的其余部分运行。

# c++ - 调用“查找”没有匹配的函数

> ID：15270430
> 
> 赞同：4
> 
> 时间：2013-03-07T11:49:04.243
> 
> 标签：c++, compiler-errors, find, stl-algorithm

我有以下代码：

```
#include <algorithm>
#include <vector>
#include <iostream>
#include <stdio.h>

using namespace std;

int main()
{   
    typedef vector<int> IntContainer;
    typedef IntContainer::iterator IntIterator;

    IntContainer vw;

    IntIterator i = find(vw.begin(), vw.end(), 5);

    if (i != vw.end()) 
        {
        printf("Find 5 in vector\n");   // found it
      }
        else 
        {
            printf("Couldn't find 5 in vector\n");  // couldn't found it
        }

    return 0;
} 
```

我尝试在 Ubuntu 上使用 gcc 4.7.1 编译它并得到以下错误：

```
vec_test.cpp: In function ‘int main()’:
vec_test.cpp:27:46: error: no matching function for call to ‘find(std::vector<int>::iterator, std::vector<int>::iterator, int)’
vec_test.cpp:27:46: note: candidate is:
In file included from /usr/local/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/locale_facets.h:50:0,
                 from /usr/local/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/basic_ios.h:39,
                 from /usr/local/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/ios:45,
                 from /usr/local/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/ostream:40,
                 from /usr/local/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/iostream:40,
                 from vec_test.cpp:3:
/usr/local/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/streambuf_iterator.h:371:5: note: template<class _CharT2> typename __gnu_cxx::__enable_if<std::__is_char<_CharT2>::__value, std::istreambuf_iterator<_CharT2, std::char_traits<_CharT> > >::__type std::find(std::istreambuf_iterator<_CharT2, std::char_traits<_CharT> >, std::istreambuf_iterator<_CharT2, std::char_traits<_CharT> >, const _CharT2&)
/usr/local/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/streambuf_iterator.h:371:5: note:   template argument deduction/substitution failed:
vec_test.cpp:27:46: note:   ‘__gnu_cxx::__normal_iterator<int*, std::vector<int> >’ is not derived from ‘std::istreambuf_iterator<_CharT2, std::char_traits<_CharT> >’ 
```

这段代码没有做任何事情，因为向量没有用任何内容初始化，但它应该编译。

我怀疑这是一个 gcc 问题，但经过大量挖掘后，我绝望了。如果有人遇到此问题并知道如何解决，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T13:36:41.530

也许某些文件在全局命名空间中定义了一个函数*find ？*

您是否尝试过指定全范围？也就是说，*std::find*而不是*find*。它可以帮助[删除那条奇怪的行](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice)：

```
using namespace std; 
```

然而，这不是我所期望的。我会称之为错误。

# c++ - 什么是 C++11 标准中的消费操作？

> ID：15270432
> 
> 赞同：15
> 
> 时间：2013-03-07T11:49:08.513
> 
> 标签：c++, multithreading, c++11, semantics, memory-model

我已经看到[这个关于获取、释放、消费等的问题](https://stackoverflow.com/questions/10526419/does-the-c11-standard-formally-define-acquire-release-and-consume-operations)存在，但是，没有答案真正定义“消费操作”实际上是什么。

在 1.10 第 5 段中，它指出：

> 一个或多个内存位置上的同步操作是消耗操作、获取操作、释放操作或获取和释放操作。

我想知道是否有人可以解释 C++11 标准第 1.10 节中使用的这是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T12:26:20.487

显然，经过一番搜索，“消费操作”是一种内存操作，其中在多次操作中加载后使用从内存中读取的值，并创建数据依赖关系。

能够在不引入显式内存围栏的情况下对操作进行排序，是`memory_order_consume`.

> 使用`memory_order_consume`，编译器和 CPU*需要*仅针对那些其地址或值是根据加载的值计算得出的后续加载和存储来对有问题的加载进行排序。 [来源](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1525.htm)

在本文后面它说：

```
/*Example code elided */ 
```

> 关键点是`atomic_load_explicit()`using`memory_order_consume`保证后续访问将看到由 执行的任何初始化`insert_foo()`，即使它们同时执行，并且没有显式内存栅栏指令的开销。相反，`memory_order_acquire`在弱排序系统上需要显式内存屏障，并且会过度约束所有系统上的编译器优化。

C++11 标准草案 n3485 定义`memory_order_consume`为：

**29.3 顺序和一致性 [atomics.order]**

> memory_order_consume：加载操作对受影响的内存位置执行消耗操作。

因此，据我了解，它是对内存加载进行排序，以便使用该加载的后续加载和存储确实是*后续*的。换句话说，负载正在被*消耗*。

# facebook - 其他网站上的 Facebook 见解和社交插件

> ID：15270442
> 
> 赞同：0
> 
> 时间：2013-03-07T11:49:46.350
> 
> 标签：facebook, plugins, social

Facebook Insights 中是否有报告可以显示在其他网站上实施的社交插件的活动？

有人通过它发表评论吗？有人喜欢我的页面吗？

例如，如果我的 5 个网站上有赞框，我可以查看哪个网站生成最多的赞/评论吗？

谢谢你的帮助！

找到它：[https](https://www.facebook.com/insights/) ://www.facebook.com/insights/ 现在我只需要找到创建此应用程序的登录名，这样我就可以查看统计信息...如果我知道 AppID，我可以追踪谁创建它或者谁是管理员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:32:18.553

在[https://facebook.com/insights](https://facebook.com/insights)页面上，您是否看到右上角的“您的网站的见解”按钮。点击那个。它将向您展示如何`fb:admins` `meta`在您的网站上放置标签以证明您对它的所有权。

# c++ - 在 cuda 内核中使用 cuDoubleComplex 进行操作

> ID：15270449
> 
> 赞同：1
> 
> 时间：2013-03-07T11:50:04.003
> 
> 标签：c++, cuda, complex-numbers, cublas

我对 cuda 内核的实现有疑问。

我生成了一个 cude 内核，我想在其中添加 cuDoubleComplex 变量的元素。后来我也想对元素做一些乘法。

我尝试了几种方法，但找不到解决方案。

我的功能是：

```
 __global__ void process(double *fieldRange, double *fieldAzimut, double **recPosition, double **transPosition, double *TimeAxisPulse, double timeStep, cuDoubleComplex *rawData, int nmbrPulses, int nmbrSamples, double carrierFrequency, cuDoubleComplex *result) 
```

我尝试做类似的事情

```
result[tid]=result[tid]+newValue 
```

其中 newValue 也是一个 cuDoubleComplex。我尝试使用 cublasZaxpy 函数，但我被告知不允许从全局函数调用主机函数

我可以用 cuDoubleComplex 变量在内核中做一个简单的加法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:07:29.080

您可以调用该函数`cuCadd`，例如：

```
result[tid]=cuCadd(result[tid],newValue); 
```

并确保您拥有`#include "cuComplex.h"`或`#include <cuComplex.h>`根据您的路径设置工作。

# php - 生成的 xml 文件对计算机有害吗？

> ID：15270454
> 
> 赞同：2
> 
> 时间：2013-03-07T11:50:26.817
> 
> 标签：php, xml, header, http-headers, header-files

我做了一个xml文件并通过这些标题强制下载它：

```
header('Content-disposition: attachment; filename="export.xml"');
header('Content-type: application/xml; charset=utf8');
readfile('export.xml'); 
```

但是在下载之前我看到一个对话框，这个文件可能对我的电脑有害？如何摆脱这个对话框？也许我的标题是错误的？

**upd**好吧，什么都做不了，我在我的测试主机上做了一个测试，你可以在这里检查它：[带有生成链接的站点](http://wpxchange.host56.com)，以及一个 xml 文件原样：[export.xml](http://wpxchange.host56.com/export.xml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:55:24.920

尝试更改`application/xml`为`text/xml`. 可能您的浏览器认为这`application`意味着可执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:56:22.917

尝试这个 ：

```
<?php 
header('Content-disposition: attachment; filename="export.xml"');
header('Content-type: "text/xml"; charset="utf8"');
readfile('export.xml');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:12:17.540

> ***注意：**这并不能解决您的问题，但它确实解决了我在发出该通知的计算机上遇到的问题（windows、chrome、apache webserver、PHP 5.4.10）。我把它留在这里给未来的访客。*

一些浏览器不仅会查找标头，还会查找 URL 中的“文件名”。

例如，如果您下载一个*包含*XML 的 PHP 文件，浏览器可能会将其识别为危险文件（因为它可以在您的系统上执行，或者不在某个白名单中或其他）：

```
http://example.com/xml-download.php 
```

一个简单的解决方案是使该文件不再以`.php`任何结尾，例如通过添加`?`：

```
http://example.com/xml-download.php? 
```

并继续以这种方式发出文件名：

```
http://example.com/xml-download.php?export.xml 
```

（最后一个不是必需的，但对于一些较旧的浏览器尤其有用）

# jquery - 在 jquery Ui-dialog 插件中添加自定义验证消息（不带 jquery 验证插件）

> ID：15270457
> 
> 赞同：0
> 
> 时间：2013-03-07T11:50:48.033
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我正在使用 jquery ui 对话框插件。我想添加自定义验证消息（不使用 jquery 验证插件）。当前出现错误时输入框边框变为红色。是否可以添加消息进行验证？

```
 $('.passwordpopup').dialog({
                                    modal:true,
                                    resizable: false,
                                    width:360,
                                    height:200,
                                    draggable:false,
                                    create: function(){
                                        $('.ui-dialog').wrap('<div class="password-class" />');

                                    },
                                    buttons: {
                                        "Ok": function() 
                                        {

                                            var pass =    $('#password').val();
                                            $.ajax({
                                                url: url+'ddm/passcheck',
                                                type: "POST",
                                                //dataType:"json",
                                                data:{
                                                    password:pass,
                                                    user_id:3

                                                },
                                                success: function(data)
                                                {
                                                    if(data == 1){

                                                        $('#password').removeClass( "ui-state-error" );
                                                        $('.passwordpopup').dialog("close");
                                                        $('#password').val('');
                                                        $('#text').fadeIn();
    }
    }
});
}}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:30:57.780

我通过在 html 中添加一个额外的 div（将其设置为 display:none 默认值）并在发生错误时显示 div 来使其完美地工作。

**html**

```
 <div class="val" style="display:none; color:red; font-size: 14px;">Password is Incorrect</div> 
```

**jQuery**

```
success: function(data)
    {
        if(data==1){
            $('.val').hide();//added code for showing error message
            $('.passwordpopup').dialog("close");
            $('.right-side-symptom-holder').hide();
            alert("Patient session saved successfully");
        }else{
            $('#text').hide();
            $('.val').fadeIn();//Added code for showing error message
            $('#password').addClass( "ui-state-error" );

        }
    } 
```

# graphics - 具有固定长度的立方贝塞尔曲线。如何将控制点限制在一定范围内？

> ID：15270458
> 
> 赞同：0
> 
> 时间：2013-03-07T11:50:48.990
> 
> 标签：graphics, graphics2d

我知道。这个问题已经回答了，但我不是数学家，我真的不明白答案。我需要一个三次贝塞尔曲线，并且需要修复 2 个控制点，以便曲线的总长度永远不会改变。所以我需要将控制点限制在我想的某些范围内。如何以起点始终固定而终点可变的方式来确定控制点的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:49:20.490

三次贝塞尔样条曲线由四个点定义：`P0`、`P1`、`P2`、`P3`。其中`P0`是起点，`P1`是`P2`控制点，`P3`是曲线的终点。一般来说，线性样条的长度`P0``P1``P2``P3`是贝塞尔曲线长度的上限，而长度`P0``P3`是下限。换句话说，所有长度`P0``P1``P2``P3`相等的贝塞尔曲线也具有相同的贝塞尔曲线长度。

考虑具有固定起点`P0`和终点的二次贝塞尔样条`P2`，那么所有可能`P1`的固定长度贝塞尔曲线的几何位置将是一个椭圆，其焦点位于`P0`和`P2`。

考虑具有固定起点`P0`和终点的三次贝塞尔样条曲线，固定长度贝塞尔曲线的`P2`几何位置不再是曲线，而是子空间。但是应用额外的限制，例如 fix ，会将其简化为平面曲线。这将再次是一个椭圆，焦点位于和中。`P1``P2``P2``P0``P2`

# python - 在 Flask 的设置/配置文件中自定义模块、常量和数据库

> ID：15270460
> 
> 赞同：0
> 
> 时间：2013-03-07T11:50:50.340
> 
> 标签：python, settings, flask

过去一周我一直在玩 Flask。为了好玩，我正在尝试实现以下内容。是的，我知道它非常具有 Django 风格，并且可能不适合微框架。

这是我正在尝试做的一个示例：

```
STATIC_PATH = '/static/'
TEMPLATE_URL = '/template/'
DATABASES = {
  'DEBUG': {
    'ENGINE': 'bla.sqlite3',
    'NAME': 'koopics.db'
  },
  'DEMO': {
    'ENGINE': 'bla.sqlite3',
    'NAME': 'somedb'
  },
  'PRODUCTION': {
    'ENGINE': 'bla.psycopg2',
    'NAME': 'somedb',
    'host': 'host',
    'username': 'host',
    'password': 'host',
  },
}

MODE = 'Demo'

#TODO: put an IF statement here to provide  the connection mechanism for the db
#      depending on what is required    

INSTALLED_APPS = [
  'Flask-SQLAlchemy',
  'Flask-DebugToolbar',
  'Flask-Mail',
  'Flask-Cache',
  'Flask-Celery',
  'my_custom_module',
] 
```

我目前在他们自己的文件夹中定义了我的自定义应用程序`__init__.py`。

**问题：**是否可以让数据库工作并将“应用程序”作为设置和 app.py 的一部分加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:33:37.243

首先加载您的设置，然后再处理其他任何内容。如果要根据请求切换 DB，则需要将其放入`if`模型/视图逻辑中。

根据[文档](http://pythonhosted.org/Flask-SQLAlchemy/binds.html)（您的设置看起来`django`比常规设置更像，`flask`所以我不确定这是否会起作用）您可以在模型中使用`__bind_key__`该模型将该模型定向到特定数据库

```
# settings.py
SQLALCHEMY_BINDS = {
    'DEBUG': 'sqlite:////path/to/koopics.db',
    'DEMO': 'sqlite:////path/to/somedb.db'
} 
```

在你的模型中

```
# model
class DebugModel(db.Model):
    __bind_key__ = 'DEBUG'
    id = db.Column(db.Integer, primary_key=True)
    debug_value = db.Column(db.String(80), unique=True) 
```

但是，如果您的意思是希望它以一种方式访问​​数据库进行生产，另一种方式用于开发，那么类似

```
import os

if os.environ('MACHINE_NAME', '') == 'PRODUCTION':
    # set up production db
else:
    # set up development db 
```

那么`if`你的设置中的一个是合适的。

# tomcat - 在Tomcat 6中更改应用程序的路径

> ID：15270462
> 
> 赞同：2
> 
> 时间：2013-03-07T11:50:58.760
> 
> 标签：tomcat, contextpath

我有我的 Web 应用程序，其名称是`myApp.war`. 我将我的战争文件复制到`$CATALINA_BASE/webapps`. 现在我可以使用 URL 打开我的网站：

```
http://localhost:8080/myApp/ 
```

但是我想更改我的应用程序的路径（例如：）`newName`，所以我`ROOT.xml`在`$CATALINA_BASE/conf/Catalina/localhost`.

这是代码：

```
<Context docBase="myApp" path="/newName" debug="0" reloadable="true"/> 
```

现在我使用新的 URL：

```
http://localhost:8080/newName/ 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:42:07.857

`server.xml`在您的:中添加以下行

```
<Context docBase="myApp" path="/newName" debug="0" reloadable="true"/> 
```

喜欢：

```
<Host>
  .
  .
  .
  <Context docBase="myApp" path="/newName" debug="0" reloadable="true"/>
</Host>
</Engine>
</Service>
</Server> 
```

我会建议使用 Apache Web 服务器的另一种方法。编辑`httpd.conf`和编写：

```
ProxyPass /newName http://localhost:8080/myApp
ProxyPassReverse /newName http://localhost:8080/myApp 
```

您可以通过 访问您的应用程序`http://localhost/newName`。

**注意：** Apache 在 80 端口上运行，因此您无需`localhost`在访问后提供端口号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:28:56.893

尝试将 ROOT.xml 重命名为 newName.xml 并将其放在“$CATALINA_BASE/conf/Catalina/localhost”文件夹中。Tomcat 尝试查找相同的 appName 和 xml 文件。我希望它对您的要求有用。

[Tomcat 6 文档 - 上下文](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)

请参阅简介标题：“[...]在 $CATALINA_BASE/conf/[enginename]/[hostname]/ 目录中的单个文件（带有“.xml”扩展名）中。文件的名称（减去 .xml 扩展名） ) 将用作上下文路径[...]"

告诉我它是否有效，问候。

对不起我的英语！！;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:52:59.233

你有没有在tomcat webapps 路径中添加NewName 目录并将内容复制到里面？我希望这能解决您的问题。

# asp.net - 如何在没有 aspnetdb 的情况下使用表单身份验证？

> ID：15270470
> 
> 赞同：0
> 
> 时间：2013-03-07T11:51:24.020
> 
> 标签：asp.net, aspnetdb, form-authentication

我正在开发一个小型网站，它将成为大型网站的一部分。它没有自己的身份验证和数据库，但我想对它使用表单身份验证。我在 web.config 中添加了几行

```
<authentication mode="Forms">
  <forms loginUrl="Login.aspx" timeout="2880" defaultUrl="Default.aspx" />
</authentication>
<authorization>
    <deny users="?"/>
</authorization> 
```

在代码中，我需要什么？？？？？？？地方？目前，它只会停留在登录页面，不会重定向到默认页面。顺便说一句，登录页面并不是真正的登录页面，它只是一个将从大网站调用并检查用户是否被授权的页面。

```
If everything is fine Then

                ?????????????????
                FormsAuthentication.SetAuthCookie("UserName", True)
                FormsAuthentication.RedirectFromLoginPage("UserName", True)

 Else
         'show error

 End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:59:14.343

我不确定我的代码有多好，但它现在确实有效......

```
Protected Sub DoLogin()

    Dim authCookie As HttpCookie = FormsAuthentication.GetAuthCookie(UserName, False)
    Dim ticket As FormsAuthenticationTicket = FormsAuthentication.Decrypt(authCookie.Value)
    Dim newTicket As New FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, ticket.Expiration, ticket.IsPersistent, "")
    authCookie.Value = FormsAuthentication.Encrypt(newTicket)
    Response.Cookies.Add(authCookie)
    Response.Redirect("Default.aspx", False)

End Sub 
```

# math - 我对这种重复的替代解决方案是否正确？

> ID：15270472
> 
> 赞同：2
> 
> 时间：2013-03-07T11:51:26.967
> 
> 标签：math, complexity-theory, big-o, recurrence, master-theorem

我有一个递归关系，如下所示：

T(e ^n ) = 2(T(e ^(n-1) )) + e ^n，其中 e 是自然对数。

为了解决这个问题并找到一个 Θ 界限，我尝试了以下方法：我输入 k=en ^，等式转换为：

T(k)=2T(k/e)+k

然后，我尝试使用主定理。根据主定理，a=2，b=e>2，f(k)=k。因此，对于某些 ε>0，我们有 f(k)=Ω(n ^(log [b] a+ε) ) 的情况，因此我们有 T(k)=Θ(f(k))=Θ(k)。然后设 k=n，我们有 T(n)=Θ(n)。我的解决方案有任何错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T18:09:28.470

让我们一步一步完成。

你有复发

> T(e ^n ) = 2 T(e ^(n-1) ) + e ^n

现在，让我们进行变量替换。定义 k = e ^n。然后我们得到

> T(k) = 2T(k / e) + k

在这种情况下，使用主定理，我们得到 a = 2、b = e 和 f(k) = k。由于 logb a = ln 2 < 1 且 f(k) = Θ(k)，根据主定理，递归求解为 S(k) = Θ(k)。

如果我们现在设置 k = n'，其中 n' 是函数的实际输入，那么我们得到 T(n') = Θ(n)，我们就完成了。所以，是的，数学检查出来了。

希望这可以帮助！

# android - 更新后地图不可见

> ID：15270477
> 
> 赞同：0
> 
> 时间：2013-03-07T11:51:31.297
> 
> 标签：android, google-maps

昨天我更新了我的应用程序，这是第 7 次更新，直到第 6 版地图可见，但从今天开始我遇到了这个问题。我也在发布模式下创建了地图 API 密钥。我正在使用地图 api 的 v1 任何想法。提前致谢

# ajax - Rails 表单，加载新记录页面而不是重定向到它

> ID：15270481
> 
> 赞同：0
> 
> 时间：2013-03-07T11:51:37.437
> 
> 标签：ajax, ruby-on-rails-3

我在 Rails 中创建我的第一个应用程序。基本上，我有一个新客户表格，通常当您输入新客户时，您会被重定向到您创建的记录。

但是，当我通过 ajax 加载所有页面时，我想加载新记录而不是重定向到它。

我已经通过 ajax 触发了表单，我只需要知道如何访问新记录 URL 以将其加载到我的容器中。

希望这是有道理的。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:19:34.023

您可以在 form_for 辅助方法中添加一个选项 :remote => true ，以便通过 ajax 发布表单而不是页面重定向。例如：

```
<%= form_for(@post, :remote => true) do |f| %>
  ...
<% end %> 
```

然后创建一个名为 create.js.erb 的新模板，该模板将在执行 create 方法后呈现。

在此模板中，您可以显示您创建的新记录的详细信息。

例如：

```
$('some_element').replaceWith('<%=@posts.name %>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:00:02.407

编辑：您提到在您的 javascript 中使用负载。我通常会避免这种情况，因为您要对服务器进行两次往返。1) 创建 2) 获取要加载到 div 的 html。此外，如果发生错误，无论是什么，都将更难捕捉并做“好事”。

将 remote: true 选项添加到表单后，您需要处理服务器端发生的事情。

假设您使用 REST，您将拥有一个控制器，其中包含一个创建操作。通常，此方法创建项目，然后返回创建页面的 HTML。取而代之的是，我们需要为操作创建一个 javascript 视图。这将告诉调用页面当这个动作被击中时要做什么。

假设您的表单有一个名为“new_record_form”的 div，并且您还有另一个名为“new_records”的 div。您需要清空表单中的表单元素，从而有效地重置它。您还需要将新记录添加到“new_records”div。

要将记录添加到新记录 div，您可以执行以下操作。

```
$("#new_records").append("#{@new_record.name}"); 
```

当您提交表单时，您应该会看到添加的内容。调试问题的一种好方法是使用检查器。如果您使用的是 chrome，请右键单击任意位置，检查元素并选择网络。在提交表单之前执行此操作。您将能够看到 ajax 调用和响应。您的日志也会有所帮助。

不要忘记也将表格填空。

注意：您提到您的所有页面都是 ajax，但由于产生的各种问题，我强烈建议您评估这是否 100% 有意义。并不是说这是关于该主题的最佳[文章](http://webdesign.about.com/od/ajax/a/aa092506.htm)，但可能值得一读。

# r - 字符串到R中的变量名

> ID：15270482
> 
> 赞同：9
> 
> 时间：2013-03-07T11:51:46.093
> 
> 标签：r, string-concatenation

我正在清理数据集，我需要根据另一个变量选择变量。假设如果`ID = 1`，我需要在数据框中引入变量`VAR01`，如果`ID = 2`，我需要`VAR02`，等等。

因此，我正在执行一个 for 循环，在其中将带有 ID 号的变量名“VAR”粘贴到`stringf`函数中。问题是我需要 R 将字符串理解为函数名。

我在论坛中找到了这个解决方案，它对我不起作用：

```
> variable1 = c("monday", "tuesday", "wednesday")

> var_name = "variable1"

> eval(parse(text=var_name))
[1] "monday"    "tuesday"   "wednesday" 
```

问题是我不能用它来引用变量：

```
> eval(parse(text=var_name)) = c(1,2,3)
Error in file(filename, "r") : cannot open the connection
In addition: Warning message:
In file(filename, "r") :
cannot open file 'variable1': No such file or directory 
```

有没有人有解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T12:12:56.727

您可以使用`assign()`

```
var_name <- 'test'
assign(var_name,1:3)
test 
```

注意：`assign`这样会在它被调用的环境中创建变量。因此，如果您要`assign`在这样的函数中调用：

```
myfun <- function(var) { 
    assign(eval(substitute(var)), 5)
    print(get(var)) 
} 
```

调用该函数会在函数内分配`my_var`一个值 5，其环境仅在函数运行时创建并在之后销毁。

```
> myfun("my_var")
# [1] 5

> my_var
# Error: object 'my_var' not found 
```

因此，如果您想在函数调用后保留该值，那么您必须指定一个环境，您将在任务运行时拥有变量 thro'。例如，在`global environment`：

```
myfun <- function(var, env = globalenv()) {
    assign(eval(substitute(var)), 5, envir = env)
    print(get(var))
}

> myfun("my_var")
# [1] 5
>  my_var
# [1] 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T11:58:32.750

您可以使用`get`：

```
result = get(var_name) 
```

尽管大量使用`get`and`set`建议您可能希望开始使用`list`'s of variables 来代替：

```
l = list(variable1 = c(1,2,3))
l$variable1 = c(4,5,6) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T23:00:05.890

这是常见问题解答 7.21。

该常见问题解答中最重要的部分是它告诉您使用列表而不是在全局环境中这样做的结尾。您提到您想在数据框（已经是一个列表）中执行此操作，因此这变得更简单。尝试类似：

```
mydf <- data.frame( g=c('a','b','c') )
ID <- 1

mydf[[ sprintf("VAR%02d",ID) ]] <- 1:3
mydf 
```

在这种情况下使用`eval(parse(text=...))`就像说您知道如何从纽约市到波士顿，因此询问从您的出发地到纽约的路线以及从波士顿到您的目的地的路线。在某些情况下，这可能并不算太糟糕，但如果您试图从伦敦到巴黎（您的示例是您从纽约经火星前往波士顿），那就有点偏了。见`fortune(106)`。

# jquery - 两个相互依赖的下拉列表的 jQuery 代码

> ID：15270484
> 
> 赞同：1
> 
> 时间：2013-03-07T11:52:00.123
> 
> 标签：jquery

我正在努力为两个相互依赖的下拉列表编写代码，我需要一些帮助：

```
 // Question 1
    var test1 = ['|Please Select','1|1','2|2','3|3']

    // Question 2

    var test2 = []
    var test2a = ['|Please Select','1a|1a','2a|2a','3a|3a']
    var test2b = ['|Please Select','1b|1b','2b|2b','3b|3b']
    var test2c = ['|Please Select','1c|1c','2c|2c','3c|3c']

    // Set the options from Question 1 using the values from the array test1

    val = "test1";
    function add_options(val){
        arr = window[val];
        var the_id = "#"+val;
        $.each(arr, function(key,val){
            options = val.split('|');
            $(the_id).append(
                $('<option></option>')
                .val(options[0])
                .html(options[1])
            );
        });
    } 
```

我需要帮助

当用户单击 test1 中的选项时，获取选定的选项。

知道所选选项后，我可以为问题 2 构建数组：

```
 if(selected == "1"){
        var test2 = test2a;
    } else if (selected == "2") {
        var test2 = test2b;
    } else if (selected == "3") {
        var test2 = test2c;
    }

    val = "test2";
    function add_options(val){
        arr = window[val];
        var the_id = "#"+val;
        $.each(arr, function(key,val){
            options = val.split('|');
            $(the_id).append(
                $('<option></option>')
                .val(options[0])
                .html(options[1])
            );
        });
    } 
```

希望你能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:16:28.020

试试这个（编辑）：

```
// Question 1
var test1 = ['|Please Select', '1|1', '2|2', '3|3']

// Question 2
var test2 = [];
var test2a = ['|Please Select', '1a|1a', '2a|2a', '3a|3a'];
var test2b = ['|Please Select', '1b|1b', '2b|2b', '3b|3b'];
var test2c = ['|Please Select', '1c|1c', '2c|2c', '3c|3c'];

// Set the options from Question 1 using the values from the array test1
function add_options(val) {
var arr = window[val];
var the_id = "#" + val;
$(the_id).text("");
$.each(arr, function (key, val) {
    var options = val.split('|');
    $(the_id).append(
            $('<option></option>')
            .val(options[0])
            .html(options[1])
        );
});
}

$(document).ready(function () {
var val = "test1";
add_options(val);
$("#test1").change(function () {
    var selected = $(this).val();
    if (selected == "1") {
        test2 = test2a;
    } else if (selected == "2") {
        test2 = test2b;
    } else if (selected == "3") {
        test2 = test2c;
    }

    val = "test2";
    add_options(val);
});
} 
```

# ocaml - 使用类型别名扩展模块

> ID：15270487
> 
> 赞同：2
> 
> 时间：2013-03-07T11:52:02.283
> 
> 标签：ocaml

我正在尝试使用[ocaml-inotify](https://github.com/vincenthz/ocaml-inotify)包。这个问题的相关部分可以定义如下

```
module Inotify : sig
  type wd
  val int_of_wd : wd -> int
end = struct
  type wd = int
  let int_of_wd wd = wd
end 
```

这项工作是在一个 setuid 脚本中进行的，我希望 inotify 部分以非特权方式处理，因此我将分叉然后 setuid-ing 到子级中的非特权用户。但是，这意味着我需要通过管道将 wd 实体传递回父级，因此需要对它们进行序列化和反序列化，这需要一个`int_to_wd`函数。

我尝试按如下方式扩展模块：

```
module Rich_Inotify : sig 
  include module type of Inotify with type wd := int
  val wd_of_int : int -> wd
end = struct
  include Inotify
  let wd_of_int (wd:int) : wd = wd 
end
module Inotify = Rich_Inotify 
```

但是，编译器抱怨那`wd`是一个`int`而不是一个`wd`。我如何说服它这些类型是相同的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:55:31.657

如果`Inotify`模块真的是用这个签名定义的，也就是用抽象类型密封的，那么你就无法打破它的抽象来将它重新定义为一个 int。我的意思是您的签名`(module type of Foo with wd := int)`很聪明并且描述了您想要的接口，但实现`Foo`不满足它：如果类型检查器允许这样做，那么根本*就不*会有类型抽象。

您应该请求`ocaml-inotify`维护者添加编组原语（如果需要，可能会在本地分叉它）。`wd = int`他或她可以将转换函数发布到和从`int`（以便将来的实现更改仍然可以实现这些功能），或者直接发布到和从`string`如果您只对编组感兴趣并希望公开较少的内部函数，而不是暴露这一事实细节。

有一种解决方案可以公开更多内部细节，即来回转换为抽象类型，即使用[私有类型缩写](http://caml.inria.fr/pub/docs/manual-ocaml/manual021.html#s-private-types-abbrev)：

```
sig
  type t = private int
  val mk : int -> t
end 
```

This signature exposes that the internal representation is `int`, and allows to cast from `t` to `int` explicitly with `(foo :> int)` or `(foo : t :> int)` (you know that this is a no-op at runtime), but does not allow the inverse cast, so you are forced to use the `mk` function which, I assume, will do some kind of range checking to make sure that this is a valid descriptor.

(Some people will probably suggest that, as a workaround, you break the type safety of the language by using an unsafe cast that should not be named. Do not; this is bad advice.)

# jsf-2 - 在另一个 ManagedBean 中获取 Session Scoped Bean 数据

> ID：15270489
> 
> 赞同：8
> 
> 时间：2013-03-07T11:52:06.780
> 
> 标签：jsf-2

我正在尝试在另一个托管 bean 中获取会话范围的 bean 数据。当我这样做时，该值将变为 null 并给出 java.lang.NullPointerException 错误。我是 JSF 的新手，所以请记住，我可能会遗漏一些简单的东西。

这是 SessionScoped Bean

```
 @ManagedBean
    @SessionScoped

    public class UserSessionBean {
      private superProcessId;

      //getter setter and other code
    } 
```

这是我正在尝试获取此数据的托管 Bean

```
@ManagedBean
public class AddProcessBean {
  @ManagedProperty(value="#{UserSessionBean}")
  private UserSessionBean sessionData;

  //Getter Setter for sessionData
  public UserSessionBean getSessionData() {
    return sessionData;
  }

  public void setSessionData(UserSessionBean sessionData) {
    this.sessionData = sessionData;
  }

  public void addAction() {
    System.out.println(getSessionData().getSuperProcessId());
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T12:27:54.107

你的价值不高`@ManagedProperty`。采用：

```
@ManagedProperty(value="#{userSessionBean}") 
```

bean 的默认名称与具有较低首字母的类名称相同。托管属性的 bean 的范围也应该是会话或更低（视图、请求）。

# c# - 在asp.net c#网页中播放存储的.avi文件

> ID：15270490
> 
> 赞同：1
> 
> 时间：2013-03-07T11:52:12.827
> 
> 标签：c#, asp.net

我使用了 asp.net C# (4.0) VS 2010。我的源代码中已经存储了**.avi**视频文件。我想在页面加载时播放该视频。

我已经用**谷歌**尝试了太多次，但对结果并不满意。我需要一步一步的解决方案来遵循。有什么我必须导入或我想知道的吗？

我可以使用 YouTube 链接播放视频，但我不想这样做。

我已经尝试过

```
 string path = "MYFILE.avi";
    Page.Controls.Add(new LiteralControl("<video width='320' height='240' controls='controls'><source src=" + path + " type='video/avi'></video>")); 
```

但这给了我以下错误

```
No video with supported format and MIME type found 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:00:39.870

这与 SO 上的这个问题有关：[HTML5 <video> 播放是否支持 .avi 格式？](https://stackoverflow.com/questions/4129674/does-html5-video-playback-support-the-avi-format)

通过该问题中的链接阅读它，您会发现讨论的唯一格式是 WebM、MP4/H264 和 Ogg/Theora。目前（据我所知）没有浏览器支持播放带有视频标签的 .avi 文件。将其转换为一种受支持的格式或使用嵌入标签来包含它（尽管这是一种非常古老的方法。您可以在此处阅读：[http ://www.templatemonster.com/help/how -to-embed-video-into-html-page.html](http://www.templatemonster.com/help/how-to-embed-video-into-html-page.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:20:07.067

这不是 C# 或 Asp.net 问题，而是 HTML/HTML5 问题。

我可以很容易地说不要使用 AVI，因为它不是跨平台的，但我不知道你的情况。

你可以试试 ：

```
<embed type="video/x-msvideo" src="MYFILE.AVI" autoplay="false" autostart="false" width="600" height="420"> 
```

您应该使用 FireFox 或 Chrome 尝试现有的解决方案，它也可能有效，

最有趣的笑话是 WAV 和 AVI 是 Microsoft 专有的，但 IE 无法识别带有 HTML5 的 wav 和 AVI，而其他浏览器则可以。我试过 WAV 但不是 AVI。

您可以制定一个通用解决方案，例如：

```
if (browser = ie) then
<embed ...
else
<video width='320' height='240' ...
end if 
```

# spring - HibernateTransactionManager 中的保存点

> ID：15270493
> 
> 赞同：1
> 
> 时间：2013-03-07T11:52:20.907
> 
> 标签：spring, hibernate, transactionmanager

有两组插入语句，名称为 A 和 B。如果没有异常，则 A 和 B 都被提交。如果在 B 中插入时出现异常，则应单独提交 A。为此，我使用了 HibernateTransactionManager。

我使用`rollbackToSavepoint(Object savePoint)`了 TransactionStatus 中可用的方法。当 B 中出现异常时，它不会像它所说的那样回滚。它提交在异常发生之前执行的所有查询，即使在使用`rollbackToSavepoint()`方法时应该回滚它。

我是休眠的新手。

# c# - 如何在不使用 C# 中的 ODBC 的情况下将特定 Excel 工作表中的所有数据行读入 ADO.NET 数据表

> ID：15270498
> 
> 赞同：3
> 
> 时间：2013-03-07T11:52:26.320
> 
> 标签：c#, file-io, ado.net, streamreader

使用 C# 将特定 Excel 工作簿表中的所有数据行读取到 ADO.NET 数据表中的**最快**方法是什么。Excel 工作簿大约为 30MB。

我不想使用 ODBC，因为在服务器机器上安装它会有问题。

我的首选是使用 StreamReader 类的解决方案，但任何不使用 StreamReader 的解决方案都是受欢迎的，但使用 ODBC 的解决方案除外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:09:16.393

如果服务器上安装了 ms office，最快的方法是将 excel 表导出为 CSV 文件，然后使用文件 IO 将其导入数据库。

您可以通过 COM Interop 打开 excel 并将工作簿导出为 CSV。stackoverflow 上的其他人讨论了这个过程：[Save an excel file to a csv file in C# code](https://stackoverflow.com/questions/5034717/save-an-excel-file-to-a-csv-file-in-c-sharp-code)

我的经验是直接通过 com interop 从 excel 中获取数据非常慢。excel 导出 csv 的速度非常快。

[编辑] 一个非常好的办公包装是 NetOffice。它的工作方式类似于 COM 互操作接口，但速度更快，功能更多：http: [//netoffice.codeplex.com/](http://netoffice.codeplex.com/)

由于您更喜欢流阅读器，codeplex 上也有一个 excel 二进制阅读器：http: [//exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/) [/edit]

# jsf - 日历中的有限日期 - primefaces

> ID：15270503
> 
> 赞同：6
> 
> 时间：2013-03-07T11:52:46.133
> 
> 标签：jsf, primefaces, calendar

我正在使用 primefaces 日历，但我遇到了年份问题。选择组件仅列出最后（和下一个）10 年，因此在 2003 年到 2023 年之间。在生日领域可能会很糟糕.. 跟随组件的打印。我该如何解决？

![日历组件的打印屏幕](../Images/4330b16cbfeca8be933a935a93b844c1.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T12:15:25.273

我设法解决了这个问题！

我刚刚定义了属性 yearRange。默认值为 yearRange="c-10:c+10" 所以我这样写：

yearRange="c-70:c+10"

# ios6 - 无法更改 UISearchBar 的颜色

> ID：15270505
> 
> 赞同：1
> 
> 时间：2013-03-07T11:52:58.267
> 
> 标签：ios6, xcode4.5

我`UISearchBar`在我的应用程序中使用它的外观如下 ![在此处输入图像描述](../Images/8a7a0337aff27aa2ffa578822cb0ccf1.png)

我希望`UISearchBar`颜色是清晰的颜色我尝试了以下 `search.backgroundColor = [UIColor blackColor];` 但结果是一样的任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:19:38.150

尝试 tintColor：

```
 search.tintColor = [UIColor blackColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T10:12:06.443

```
UIColor *color = [UIColor redColor];

if (floor(NSFoundationVersionNumber) > NSFoundationVersionNumber_iOS_6_1) {
    searchBar.barTintColor = color; //for iOS 7
} else {
    searchBar.tintColor = color; //for earlier than iOS 7
} 
```

# java - 用键读取数组

> ID：15270507
> 
> 赞同：-3
> 
> 时间：2013-03-07T11:52:59.473
> 
> 标签：java, arrays

**Java中有没有一种方法可以在没有循环**的情况下读取数组，例如获取第一个带有索引的条目？

```
Object[] array = keySet.toArray(); 
```

就像是

```
array.get(5); 
```

我知道 get 不适用于当前的 APi，但也许有不同的方法来实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:54:30.220

使用方括号语法

```
Object first = array[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:55:30.243

**尝试`array[5]`获取我们可以通过索引获取数组值的值。**
As`array[5]`本身就是一个对象，您可以将其分配给任何其他对象，例如

```
`Object obj = array[5];

obj.callMethods()` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:55:27.660

我想你正在寻找的是`array[5]`.

# c# - 无法投射列表

> ID：15270508
> 
> 赞同：3
> 
> 时间：2013-03-07T11:53:03.180
> 
> 标签：c#, list

我在下面的行中遇到错误。

```
 temp.day1_veh_p = string.Join(Environment.NewLine, day1.Where(x => x.plannedTriips == 1).Select(x => new {value=x.vehicleNumber+":"+x.shiftCompletedOn }).Cast<string>().ToArray()); 
```

错误消息是

```
Unable to cast object of type '<>f__AnonymousType0`1[System.String]' to type 'System.String'. 
```

列表 day1 的类型

```
public class tripDetails
{
    public string accountID { get; set; }
    public string supplierName { get; set; }
    public string supplierCode { get; set; }
    public DateTime shiftFrom { get; set; }
    public DateTime shiftTo { get; set; }
    public int plannedTriips { get; set; }
    public int actualTrips { get; set; }
    public DateTime forDate { get; set; }
    public string vehicleNumber { get; set; }
    public string shiftCompletedOn { get; set; }
    public class Comparer : IEqualityComparer<tripDetails>
    {
        public bool Equals(tripDetails x, tripDetails y)
        {
            return x.supplierCode == y.supplierCode;
        }

        public int GetHashCode(tripDetails obj)
        {
            return (obj.supplierCode).GetHashCode();
        }
    }
} 
```

我到底做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:56:00.767

问题是`new { value = ... }`

代替：

```
Select(x => new {value=x.vehicleNumber+":"+x.shiftCompletedOn }).Cast<string>() 
```

和

```
Select(x => x.vehicleNumber+":"+x.shiftCompletedOn) 
```

你被排序了。你根本不需要`Cast<string>()`。

您的原始代码为每条记录创建一个匿名类型的新实例，该实例具有`value`使用所需字符串调用的成员；第二个版本只是创建字符串。

在某种程度上，尝试这样做并没有什么不同：

```
class Foo
{
    public string Bar {get;set;}
}
...
var foo = new Foo { Bar = "abc" };
string s = (string)foo; // doesn't compile 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T11:55:07.427

是的，匿名类型不是字符串，所以替换这个

```
 .Select(x => new { value = x.vehicleNumber + ":" + x.shiftCompletedOn }) 
```

和

```
 .Select(x => x.vehicleNumber + ":" + x.shiftCompletedOn) 
```

然后您可以使用查询（您不需要创建新数组）为`string.Join`.

使用多行也很有帮助，它使您的代码更具可读性：

```
var vehicles = day1.Where(x => x.plannedTriips == 1)
              .Select(x => x.vehicleNumber + ":" + x.shiftCompletedOn);
string str = string.Join(Environment.NewLine, vehicles); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T11:55:39.753

替换这个

```
(x => new {value=x.vehicleNumber+":"+x.shiftCompletedOn }).Cast<string>() 
```

这样

```
(x => String.Format("{0}\:{1}", x.vehicleNumber, x.shiftCompletedOn)) 
```

当您这样做时，`new { ... }`您正在创建匿名类型的项目，然后 ( `Cast<string()`) 尝试显式`string`转换为并且未定义此类转换 - youn 最终会出现适当的异常。

# javascript - 我可以选择第 n 个 CSS 列吗？

> ID：15270509
> 
> 赞同：6
> 
> 时间：2013-03-07T11:53:07.257
> 
> 标签：javascript, jquery, css, css-selectors

我有一个`div`4 css`columns`并且我想选择第 3 列和第 4 列以使文本稍微变暗，因为我在文本和`background-image`. 这可能吗？我可以接受任何 css 或 js 解决方案。

这是[演示](http://jsfiddle.net/8fKs5/)。

**- 编辑 -**

似乎不可能找到*伪块*的选择器（如果我可以说的话），但是我仍然需要找出一种创建响应块（如列）的方法，该方法将在浏览器打开时平均分割文本（宽度）调整大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:01:42.440

据我所知，您将无法将样式应用于列。但是，您可以尝试使用渐变作为背景，使第 3 列和第 4 列成为另一种颜色。

```
#columns {
    background: -webkit-linear-gradient(left, rgba(0,0,0,0) 50%, blue 50%);
    /*... appropriate css for other browser engines*/
} 
```

[更新 jsFiddle](http://jsfiddle.net/8fKs5/4/) 更新所有浏览器支持渐变

**- 编辑 -**

由于意图实际上是更改文本颜色而不是第三列和第四列的背景，因此有一些额外的想法。

现在似乎不可能将样式应用于容器内的单个列。更改特定列中文本颜色的一种可能解决方法是将每个单词放在`span`. 然后使用 JavaScript 遍历单词并确定新列的开始位置。为第三列中的第一个元素分配一个新类将可以使用不同的文本颜色设置该元素和以下同级元素的样式。

因为容器是响应式布局的一部分并且大小可能会发生变化，所以脚本必须在 resize 事件上重新运行以考虑更改列宽。

代码示例的目的是概述如何实现这样的解决方案，并且应该改进以在实际应用程序中使用（例如，`span`每次`styleCols`运行时都会重新创建 s，大量控制台输出......）。

**JavaScript**

```
function styleCols() {
    // get #columns
    var columns = document.getElementById('columns');
    // split the text into words
    var words = columns.innerText.split(' ');
    // remove the text from #columns
    columns.innerText = '';

    // readd the text to #columns with one span per word
    var spans = []
    for (var i=0;i<words.length;i++) {
        var span = document.createElement('span');
        span.innerText = words[i] + ' ';
        spans.push(span);
        columns.appendChild(span);
    }

    // offset of the previous word
    var prev = null;
    // offset of the column
    var colStart = null;
    // number of the column
    var colCount = 0;
    // first element with a specific offset
    var firsts = [];
    // loop through the spans
    for (var i=0;i<spans.length;i++) {
        var first = false;
        var oL = spans[i].offsetLeft;
        console.info(spans[i].innerText, oL);
        // test if this is the first span with this offset
        if (firsts[oL] === undefined) {
            console.info('-- first');
            // add span to firsts
            firsts[oL] = spans[i];
            first = true;
        }
        // if the offset is smaller or equal to the previous offset this
        // is a new line
        // if the offset is also greater than the column offset we are in
        // (the second row of) a new column
        if ((prev === null || oL <= prev) && (colStart === null || oL > colStart)) {
            console.info('-- col++', colCount + 1);
            // update the column offset
            colStart = oL;
            // raise the column count
            colCount++;
        }
        // if we have reached the third column
        if (colCount == 3) {
            // add our new class to the first span with the column offset
            // (this is the first span in the current column
            firsts[oL].classList.add('first-in-col3');
            return;
        }
        // update prev to reflect the current offset
        prev = oL;
    }
}
styleCols();
addEventListener('resize', styleCols, false); 
```

**CSS**

```
.first-in-col3, .first-in-col3~span {
    color: red;
} 
```

[jsFiddle](http://jsfiddle.net/8fKs5/7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:59:10.130

现在我不认为你能做到，这里[https://bugzilla.mozilla.org/show_bug.cgi?id=371323](https://bugzilla.mozilla.org/show_bug.cgi?id=371323)是一个开放的错误/功能请求，你可以投票给它。在此之前，您可以考虑使用表格。

附言

只是为了幽默而[放弃并使用表格:)](http://giveupandusetables.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:39:33.760

我能想到的唯一解决方案是为中间列添加所需颜色的背景，根据大小和位置对其进行自定义，使其位于中间列的后面并制作`background-clip:text`。不幸的是，它没有得到很好的支持。[你可以在这里](http://tympanus.net/codrops/2011/12/12/experiments-with-background-clip-text/)找到更多的解释。

# c# - 如何在未选中 ShowCheckBox 的情况下加载 DateTimePicker

> ID：15270511
> 
> 赞同：2
> 
> 时间：2013-03-07T11:53:15.217
> 
> 标签：c#, winforms, datetimepicker

我有一个将 ShowCheckBox 设置为 true 的 DateTimePicker 控件。

```
DateTimePicker dateTimePicker1 = new DateTimePicker();
dateTimePicker1.ShowCheckBox = true; 
```

执行此操作时，复选框将显示在所选日期的左侧并被选中。

**是否可以在未选中**此复选框的情况下加载 DateTimePicker ，因此在加载表单时将禁用 DateTimePicker 控件，并且用户必须选中该复选框才能启用它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:55:59.543

您可以为此设置[DateTimePicker.Checked](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.checked.aspx)属性，您可以使用以下代码：

```
DateTimePicker dateTimePicker1 = new DateTimePicker();
dateTimePicker1.ShowCheckBox = true;
dateTimePicker1.Checked= false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:55:45.133

使用[DateTimePicker.Checked](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.checked.aspx)属性设置选中状态：

```
dateTimePicker1.Checked = false; 
```

# c++ - 为什么这个二进制 apply_visitor 不起作用？

> ID：15270512
> 
> 赞同：3
> 
> 时间：2013-03-07T11:53:16.057
> 
> 标签：c++, boost, apply-visitor

```
#include <string>
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

using namespace std;

class Base
{
public:
    Base(){}
    ~Base(){}
    void AddField(int tag, int value){std::cout << "Base::AddField " << tag << ", " << value << std::endl;}
    void AddField(int tag, string value){std::cout << "Base::AddField " << tag << ", " << value << std::endl;}
};

class A : public Base
{
public:
    A(){}
    ~A(){}
};
class B : public Base
{
public:
    B(){}
    ~B(){}
};

class foo_visitor
    : public boost::static_visitor<>
{
public:
    foo_visitor(int tag){mTag = tag;}
    template <typename T>
    void operator()(T &a, int &v) const {
        a->AddField(mTag, v);
    }
private:
    int mTag;
};

int main(int argc, char **argv) 
{
    typedef boost::variant<A*,B*> AB;
    AB ab = new A();    
    int tag = 1;
    int v = 2;
    boost::apply_visitor(foo_visitor(tag), ab, v);
    return 0;
} 
```

我收到此编译错误：

> apply_visitor_unary.hpp:60:43: 错误：在“visitable”中请求成员“apply_visitor”，它是非类类型“int”</p>

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:05:36.787

`int`不是`variant`真的。

> 接受两个操作数的重载在给定变体操作数的内容上调用给定访问者的二进制函数调用运算符。

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost/apply_visitor.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/apply_visitor.html)

# meteor - 有没有一种很好的方法可以将每个 Meteor.user 包装在具有原型函数等的对象中？

> ID：15270517
> 
> 赞同：5
> 
> 时间：2013-03-07T11:53:34.273
> 
> 标签：meteor

我试图想出一个很好的方法来将我从 Meteor Accounts 集合中获取的每个用户包装在一个函数中，包括一些原型帮助函数和来自其他集合的计数等。描述这一点的最佳方法是在代码中。

**我想包装每个用户的用户函数看起来像这样：**

```
// - - - - - -
// USER OBJECT
// - - - - - -

var currentUser = null; // holds the currentUser object when aplicable

function User(fbId) {
    var self   = this,
        u      = (typeof id_or_obj == 'string' || id_or_obj instanceof String ? Meteor.users.findOne({'profile.facebook.id': id_or_obj}) : id_or_obj);

    self.fb_id = parseInt(u.profile.facebook.id, 10),

    // Basic info
    self.first_name = u.profile.facebook.first_name,
    self.last_name  = u.profile.facebook.last_name,
    self.name       = u.name,
    self.birthday   = u.birthday,
    self.email      = u.profile.facebook.email,

    // Quotes
    self.likeCount  = Likes.find({fb_id: self.fb_id}).count() || 0;
}

// - - - - - - -
// USER FUNCTIONS
// - - - - - - -

User.prototype = {

    // Get users avatar
    getAvatar: function() {
        return '//graph.facebook.com/' + this.fb_id + '/picture';
    },

    getName: function(first_only) {
        return (first_only ? this.first_name : this.name);
    }

}; 
```

**我可以轻松地拥有一个全局“currentUser”变量，它保存有关客户端当前登录用户的信息，如下所示：**

```
Meteor.autorun(function() {
    if (Meteor.user()) {
        currentUser = new User(Meteor.user().profile.facebook.id);
    }
}); 
```

**将它实现到 Handlebars 助手中也很容易，替换使用`{{currentUser}}`如下：**

```
Handlebars.registerHelper('thisUser', function() {
    if (Meteor.user()) {
        return new User(Meteor.user());
    } else {
        return false;
    }
}); 
```

除此之外，我想做的是让 Meteor 返回 Meteor.user() 或 Meteor.users.find({}).fetch() 时，它包含这些帮助函数和 first_name、last_name 的短句柄， ETC。

我可以以某种方式扩展 Meteor.user() 还是有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:49:36.503

在 Meteor 0.5.8 中，您可以像这样添加一个变换函数：

```
Meteor.users._transform = function(user) { 
  // attach methods, instantiate a user class, etc.
  // return the object
  // e.g.: 
  return new User(user);
} 
```

您可以对非用户集合执行相同操作，但在实例化集合时也可以这样做：

```
Activities = new Meteor.Collection("Activities", {
  transform: function (activity) { return new Activity(activity); }
}); 
```

（这种方式似乎不适用于“特殊”用户集合）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T00:42:52.020

你可以使用流星包[宇宙收藏](https://atmospherejs.com/vazco/universe-collection)

并这样做：

```
UniUsers.UniUser.prototype = {
    getAvatar: function() {
        return '//graph.facebook.com/' + this.fb_id + '/picture';
    }
};

var user = UniUsers.findOne();
console.log(user.getAvatar()); 
```

UniUsers 是 Meteor.users 的扩展集合

# javascript - 如果值不在数组中，则采取行动

> ID：15270519
> 
> 赞同：0
> 
> 时间：2013-03-07T11:53:52.807
> 
> 标签：javascript, jquery, html

我正在使用 jQuery Vector Map 用户选择的区域名称，我必须在 div 标签中添加。我做了那部分。

但用户不应多次添加同一区域（如果已添加区域）。所以我将所有区域名称存储在数组中。

例如，当我单击亚利桑那地区时 - 在控制台中显示 3 次“false”和 1 次“true”。在 div 中添加 3 次的 arizona region 值。

如果我再次单击同一区域，它将再次添加 3 次。

```
var regionList = new Array('Alaska','Alabama','Arkansas','Arizona') /* sample array*/

for(i=0;i<regionList.length;i++)
{
    if(region == regionList[i])
    {
      console.log(true);
      alert("Region already assigned");
    }
    else
    {   
      console.log(false);
      $('<li>' + region + '</li>').appendTo('ul#location-selected');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:57:08.780

我会写它完全不同，但保持你的方式：

```
var regionList = new Array('Alaska','Alabama','Arkansas','Arizona') /* sample array*/
//  region isn't in region list.
if($.inArray(region,regionList) == -1)
{
    console.log(true);
    alert("Region already assigned");
}
//  region is in region list.
else
{   console.log(false);
    $('<li>' + region + '</li>').appendTo('ul#location-selected');
} 
```

[数组](http://api.jquery.com/jQuery.inArray/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:00:08.573

你也可以通过使用 js 对象来实现你想要的：

```
var regionList = {'Alaska': true,'Alabama': true,'Arkansas': true,'Arizona': true};
if(regionList[region])
{
    alert("Region already assigned");
}
else
{   
    regionList[region] = true;
    $('<li>' + region + '</li>').appendTo('ul#location-selected');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:18:42.577

你真的不需要 for 循环只要 region 只有一个字符串，即 'Arizona' 或 'failString'

```
var regionList = ['Alaska', 'Alabama', 'Arkansas', 'Arizona']
if (regionList.indexOf(region) != -1) {
    // If region exists in the array
    console.log('true');
} else {
    // If region doesn't exist in the array
    console.log('false');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:59:04.043

问题是 Arizona 将匹配一次，但其他 3 次失败，因此 else 被执行 3 次，如果只执行一次。尝试这个：

```
var flag=0;
var regionList = new Array('Alaska','Alabama','Arkansas','Arizona') /* sample array*/
                for(i=0;i<regionList.length;i++)
                {
                    if(region == regionList[i])
                    {
                        console.log(true);
                        alert("Region already assigned");
                        flag=1;
                    }
                }
if(flag==0)
{   console.log(false);
                        $('<li>' + region + '</li>').appendTo('ul#location-selected');
                    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:59:20.240

是否将区域添加到列表的逻辑应该在循环之外。在循环中，您只是找出该区域是否不存在。这是一个示例，但我也会`inArray`按照@gdoron 的回答使用jQuery 函数。

```
var regionList = new Array('Alaska','Alabama','Arkansas','Arizona')
var isNewRegion = true;
for(i=0;i<regionList.length;i++)
{
    if(region == regionList[i])
    {
        isNewRegion = false;
        console.log(true);
        alert("Region already assigned");
     }
}

if (isNewRegion )
{   
    console.log(false);
    $('<li>' + region + '</li>').appendTo('ul#location-selected');
} 
```

# ruby-on-rails - Active Record 和文件：如何用我的数据编写 Json 文件？

> ID：15270522
> 
> 赞同：8
> 
> 时间：2013-03-07T11:53:54.853
> 
> 标签：ruby-on-rails, postgresql, activerecord

如何将表事件中的数据写入 json 文件？请看这段代码：

在模型 event.rb

```
 class Event < ActiveRecord::Base
  attr_accessible :name, :event_description, :start_at, :end_at, :status, :eventable_id
  has_event_calendar
  belongs_to :eventable, polymorphic: true
  after_save :write_json

end
def write_json
    Event.all.each do |event|
            @eventJson = {
            "id" => event.id,
            "start" => event.start_at,
            "end" => event.end_at,
            "title" => event.name,
            "body" => event.event_description,
            "status" => event.status
            } 

    end
    File.open("public/event.json","w") do |f|
      f.write(@eventJson.to_json)
    end 

 end 
```

在文件`Json`中有一条记录，但在表`event`中有很多记录。保存记录后如何将表中的所有记录写入`event`event.json 文件？

公共/事件.json

```
{"id":35,"start":"2013-03-28T00:00:00Z","end":"2013-03-28T00:00:00Z","title":"1345edrewrewr","body":"123124","status":"Confirm"} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T15:06:47.087

问题是您`@eventJson`在循环中分配了一个值，因此以前的值会丢失。你应该使用一个数组：

```
def write_json
  events_json = []
  Event.all.each do |event|
    event_json = {
      "id" => event.id,
      "start" => event.start_at,
      "end" => event.end_at,
      "title" => event.name,
      "body" => event.event_description,
      "status" => event.status
    } 
    events_json << event_json
  end
  File.open("public/event.json","w") do |f|
    f.write(events_json.to_json)
  end 
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-27T19:12:14.223

在这种情况下，您可能想要使用`map`而不是`each`-- 它更清洁。鉴于您说该方法在模型中，这就是它的外观。

```
class Event < ActiveRecord::Base
    ...

    def self.write_json
      record_json = self.all.map{ |record| { self.name => record.attributes } }.to_json
      File.open("#{Rails.root}/#{(self.name.underscore)}.json", "w") do |f|
        f.write record_json
      end 
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-18T14:09:59.763

您可以通过以下方式进行操作：

```
 def write_json
    File.open('public/event.json', 'w') { |f| f.write(Event.all.to_json) }
  end 
```

如果要保存特定字段，可以这样操作：

```
 def write_json
    File.open('public/event.json', 'w') do |f|
      f.write(Event.select(:id, :start, :end, :title, :body, :status).to_json)
    end
  end 
```

# iphone - CLLocationManager 没有得到城市名称

> ID：15270527
> 
> 赞同：6
> 
> 时间：2013-03-07T11:54:13.840
> 
> 标签：iphone, ios, objective-c, cocoa-touch, cllocationmanager

我正在尝试使用`CLLocationManager`以下代码获取当前的城市和国家 -

```
#pragma mark - Core Location Delegate Methods
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    CLGeocoder *reverseGeocoder = [[CLGeocoder alloc] init];

    [reverseGeocoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error)
     {
         NSLog(@"reverseGeocodeLocation:completionHandler: Completion Handler called!");
         if (error){
             NSLog(@"Geocode failed with error: %@", error);
             return;
         }

         NSLog(@"Received placemarks: %@", placemarks);

         CLPlacemark *myPlacemark = [placemarks objectAtIndex:0];
         NSString *countryCode = myPlacemark.ISOcountryCode;
         NSString *countryName = myPlacemark.country;
         NSString *city1 = myPlacemark.subLocality;
         NSString *city2 = myPlacemark.locality;
         NSLog(@"My country code: %@, countryName: %@, city1: %@, city2: %@", countryCode, countryName, city1, city2);
     }];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{
    CLLocationDirection th=[newHeading trueHeading];
    NSLog(@"True Heading value is=%f",th);
    CLLocationDirection magnetic=[newHeading magneticHeading];
    NSLog(@"Magnetic Heading value is=%f",magnetic);
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSString *errorType = (error.code == kCLErrorDenied) ? NSLocalizedString(@"access_denied", @"") : NSLocalizedString(@"unknown_error", @"");
    UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:NSLocalizedString(@"error_getting_location", @"")
                      message:errorType
                      delegate:nil
                      cancelButtonTitle:NSLocalizedString(@"ok", @"")
                      otherButtonTitles:nil];
    [alert show];
} 
```

它总是给出结果 -

> 我的国家代码：IN，countryName：印度，city1：（null），city2：（null）

我不知道这可能是什么问题。有没有人遇到过这个无法使用城市名称的问题`CLLocationManager`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:00:02.967

**编辑：**

```
- (void) getReverseGeocode
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    if(currentLatLong.count > 0)
    {
        CLLocationCoordinate2D myCoOrdinate;

        myCoOrdinate.latitude = LatValue;
        myCoOrdinate.longitude = LangValue;

        CLLocation *location = [[CLLocation alloc] initWithLatitude:myCoOrdinate.latitude longitude:myCoOrdinate.longitude];
        [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error)
         {
             if (error)
             {
                 NSLog(@"failed with error: %@", error);
                 return;
             }
             if(placemarks.count > 0)
             {
                 NSString *MyAddress = @"";
                 NSString *city = @"";

                 if([placemark.addressDictionary objectForKey:@"FormattedAddressLines"] != NULL)
                     MyAddress = [[placemark.addressDictionary objectForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];
                 else
                     MyAddress = @"Address Not founded";

                 if([placemark.addressDictionary objectForKey:@"SubAdministrativeArea"] != NULL)
                     city = [placemark.addressDictionary objectForKey:@"SubAdministrativeArea"];
                 else if([placemark.addressDictionary objectForKey:@"City"] != NULL)
                     city = [placemark.addressDictionary objectForKey:@"City"];
                 else if([placemark.addressDictionary objectForKey:@"Country"] != NULL)
                     city = [placemark.addressDictionary objectForKey:@"Country"];
                 else
                     city = @"City Not founded";

               NSLog(@"%@",city);
               NSLog(@"%@", MyAddress);
             }
         }];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T07:56:36.137

即使我注意到了同样的问题。经过多次跟踪和错误后，我发现我使用的 wifi 存在问题。如果信号强度低，您将获得 city 为零。尝试更改您的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:20:21.840

在 .h 文件中

```
#import <CoreLocation/CoreLocation.h>

@interface ClassDemo : NSObject<NSXMLParserDelegate,CLLocationManagerDelegate>
{
BOOL got;
BOOL needParser;
NSMutableArray *currentplaceArray; 
}
@property (nonatomic, retain) CLLocation  *currentLocation;
@property (nonatomic, getter = isResultsLoaded) BOOL resultsLoaded;
@property (strong, nonatomic)  CLLocationManager *locationManager;
@property (strong, nonatomic) CLGeocoder *geoCoder; 
```

米

```
@synthesize locationManager,currentLocation;
- (void)viewDidLoad 
{
 got=NO;
needParser=YES;

currentplaceArray=[[NSMutableArray alloc]init];
//******** Location MAnager Allocation And Intialization********//
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate=self;
[locationManager startUpdatingLocation];
}
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{

if ([self isResultsLoaded])
{
    return;
}

[self setResultsLoaded:YES];

currentLocation = newLocation;
NSLog(@"%@",currentLocation);

NSXMLParser *parser = [[NSXMLParser alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat: @"http://maps.googleapis.com/maps/api/geocode/xml?latlng=%f,%f&sensor=false",newLocation.coordinate.latitude,newLocation.coordinate.longitude]]];

[parser setDelegate:self];
[parser parse];

}
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
NSLog(@"%@",elementName);
if([elementName isEqualToString:@"formatted_address"])
{
    got = YES; //got is a BOOL
}
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
if(got&&needParser){
    got=NO;
    NSLog(@"the address is = %@",string);
    NSArray *tempPlaceArray=[string componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@",/"]];
    NSLog(@"%@",tempPlaceArray);
    for(int i=0; i <[tempPlaceArray count]; i++)
    {

        NSString *tempString=[[tempPlaceArray objectAtIndex:i]stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
        NSLog(@"%@",tempString);
        if (![currentplaceArray containsObject:tempString])
        {
            if ([tempString length]!=0)
            {
                [currentplaceArray addObject:tempString];

            }
        }
    }
    needParser=NO;
    TempLocation *obj=[[TempLocation alloc]init];
    obj.countryName=[currentplaceArray objectAtIndex:[currentplaceArray count]-1];
    obj.stateName=[currentplaceArray objectAtIndex:[currentplaceArray count]-2];
    obj.cityName=[currentplaceArray objectAtIndex:[currentplaceArray count]-3];
    obj.fullAdd=string;
    [[Database getDBObject]insertIntoCurrentLocationTable:obj.cityName :obj.stateName :obj.countryName:obj.fullAdd];

}

} 
```

为临时存储创建一个临时位置类。并且您还可以保存到数据库中。享受编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:14:54.213

您了解苹果地图和该位置的数据库，最好尝试使用[google places api](https://developers.google.com/places/documentation/)以获得更准确和详细的反向地理编码信息。我尝试过同样的方法来自动填充地名，但没有成功，所以使用了 google places api，还有一个免费的 api 试试[geonames.org](http://www.geonames.org/)

# html - 剑道编辑器，负值限制

> ID：15270529
> 
> 赞同：0
> 
> 时间：2013-03-07T11:54:15.697
> 
> 标签：html, .net, asp.net-mvc, asp.net-mvc-4, kendo-ui

我正在为一个带有 MVC4 的项目工作。

我正在使用剑道编辑器模板进行`Incell`编辑。这是一个在编辑时接受负值的列。

**我正在使用的代码**-

```
 @(Html.Kendo().Grid<Dev.Crm.Web.Models.ViewModel.ProjectViewModel>()
        .Name("_projectGrid")
        .Editable(editable => editable.Mode(GridEditMode.InCell))

        .Columns(columns =>
        {

          columns.Bound(p => p.FixedPrice).Title(@Dev.Crm.Web.Resources.Shared.Project.Label_FixedPrice).EditorViewData(new { OnChangeCallback = "Product_List_updateProjectChanges" }).Width("15%").EditorTemplateName("Number");

        })

        .Pageable()
        .Sortable()
        .Selectable()
                    .DataSource(dataSource => dataSource

                        .Ajax() 
.Model(model =>model.Id(p => p.TaskID))
                        .Batch(true)
                                  .Model(model =>
                                  {
                                      model.Id(p => p.ProjectID);
                                      model.Field(p => p.ProjectID).Editable(false);

                                  })
        .Read(read => read.Url(@Url.Project_Operation_Read()).Data("Project_List_searchData"))// the name of the javascript function which will return the additional data.      
                        //.Destroy(destroy => destroy.Action("Delete", "Project"))
        .Update(update => update.Url(@Url.Project_Operation_SaveCellEdit()))

        )
                          .Events(e => { e.DataBound("Grid_DataBound"); })

      ) 
```

在单元格编辑中，我可以编辑此单元格，但是如何限制它接受负值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:00:27.383

基本上我假设您的项目在 Shared/EditorTemplate 文件夹下有 EditorTemplates。如果你有它们，那么对于数字，你应该使用 KendoNumericTextBox 小部件。

如果您不使用 Kendo NumbericTextBox 作为编辑器 - 您最好[找到如何操作。](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/editor-templates)

应用该编辑器模板后，您可以将**[Min](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/numerictextbox/overview)**选项设置为 0。

# jquery - JQuery UI 可调整大小和固定高度可滚动 为大型数据集构建 UI。理想的情况是有一个固定高度的表格，该表格可滚动以容纳 200 多行数据。一个好处是使用 JQuery UI 使用户能够拖动表格的高度以显示更多或更少的行。 到目前为止我所拥有的 JSFiddle：http: //jsfiddle.net/jonbrownm/j5 问问题 问问题 2013-03-07T11:54:29.227 1616 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 为大型数据集构建 UI。理想的情况是有一个固定高度的表格，该表格可滚动以容纳 200 多行数据。一个好处是使用 JQuery UI 使用户能够拖动表格的高度以显示更多或更少的行。 到目前为止我所拥有的 JSFiddle：http: //jsfiddle.net/jonbrownm/j5cdx/ HTML...

| Clementine | Bradford | neque@in.org |

查询 $(function () { $("div").resizable({ handles: "s" }); }); CSS div { width:100%; height: 100px; overflow-y:auto; overflow-x:hidden; } div .ui-resizable-s { height: 20px; background: red; cursor: s-resize; border: solid 1px red; width: 100%; bottom: -5px; left: 0; } 那里有 50%。您可以调整表格的大小，但是当您滚动时，手柄会随滚动表格一起拖动。我尝试过设置.ui-resizable-s相对于 div 的绝对值，但没有运气。 有没有人遇到过这个或任何合适的解决方案？ 我认为这是因为您的滚动与调整大小位于相同的 div 上。尝试将外部 div 设置为可调整大小，并使用滚动条设置高度为 100% 的内部 div。然后相对于可调整大小的 div 定位句柄。 应该这样做，我会和你的 jsFiddle 一起玩，这样你就可以明白我的意思了。 编辑：我将您的小提琴更新为以下内容：http: //jsfiddle.net/j5cdx/4/ Why do I need to accompany my fiddle link with code stack overflow?? jqueryjquery-uiscrollhtml-tableresizable 4 1 回答 1 This answer is useful 1 我认为这是因为您的滚动与调整大小位于相同的 div 上。尝试将外部 div 设置为可调整大小，并使用滚动条设置高度为 100% 的内部 div。然后相对于可调整大小的 div 定位句柄。 应该这样做，我会和你的 jsFiddle 一起玩，这样你就可以明白我的意思了。 编辑：我将您的小提琴更新为以下内容：http: //jsfiddle.net/j5cdx/4/ Why do I need to accompany my fiddle link with code stack overflow?? 于 2013-03-07T12:07:20.950 回答 Related 1 php - .htaccess 重写托管在 Bitnami/EC2 上的 Wordpress 主机 7 git - 如何使用 ssh 设置 tortoisegit 不需要密码 2 ruby-on-rails - 如何在创建用户资源的同时创建具有默认参数的帐户资源？ 1 java - 使两个类在 Java 中一起工作 1 wpf - 相邻的两个扩展器不会扩展后者 1 java - Simple 生成的漂亮 XML 格式（Java Lib） 1 jquery - jQuery each() 只返回第一个找到的值 1 jquery - 有 2 张不同尺寸的图像，具体取决于使用 fancybox 的屏幕尺寸 1 python - 如何模拟流式 API？ 0 html - Facebook没有加载@font-face Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15270536
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, jquery-ui, scroll, html-table, resizable

为大型数据集构建 UI。理想的情况是有一个固定高度的表格，该表格可滚动以容纳 200 多行数据。一个好处是使用 JQuery UI 使用户能够拖动表格的高度以显示更多或更少的行。

到目前为止我所拥有的 JSFiddle：http: [//jsfiddle.net/jonbrownm/j5cdx/](http://jsfiddle.net/jonbrownm/j5cdx/)

**HTML**

```
<div>
<table>
    <tbody>
        <tr>
            <td>Clementine</td>
            <td>Bradford</td>
            <td>neque@in.org</td>
        </tr>
        ...
    </tbody>
</table> 
```

**查询**

```
$(function () {
  $("div").resizable({
    handles: "s"
  });
}); 
```

**CSS**

```
div {
  width:100%;
  height: 100px;
  overflow-y:auto;
  overflow-x:hidden;
}
div .ui-resizable-s {
  height: 20px;
  background: red;
  cursor: s-resize;
  border: solid 1px red;
  width: 100%;
  bottom: -5px;
  left: 0;
} 
```

那里有 50%。您可以调整表格的大小，但是当您滚动时，手柄会随滚动表格一起拖动。我尝试过设置`.ui-resizable-s`相对于 div 的绝对值，但没有运气。

有没有人遇到过这个或任何合适的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:07:20.950

我认为这是因为您的滚动与调整大小位于相同的 div 上。尝试将外部 div 设置为可调整大小，并使用滚动条设置高度为 100% 的内部 div。然后相对于可调整大小的 div 定位句柄。

应该这样做，我会和你的 jsFiddle 一起玩，这样你就可以明白我的意思了。

编辑：我将您的小提琴更新为以下内容：http: [//jsfiddle.net/j5cdx/4/](http://jsfiddle.net/j5cdx/4/)

```
Why do I need to accompany my fiddle link with code stack overflow?? 
```

# python - mpz 变量的算术运算结果是什么？

> ID：15270546
> 
> 赞同：1
> 
> 时间：2013-03-07T11:54:55.690
> 
> 标签：python, python-2.7, gmp

我正在尝试在 python 中使用 gmpy2 做一些算术运算。不幸的是，我不知道这个算术的返回值的类型是什么。例如：

```
x=float(gmpy2.comb(100,50))/gmpy2.comb(200,100)
print x
print isinstance(x, (int, long, float, complex)) 
```

给我：

```
1.114224180581451e-30
False 
```

当我搜索了一下时，我找不到任何有用的信息。一般来说，有没有一种方法可以让我在 python 中获取对象类型？否则，这个值的确切类型是什么？是mpz吗？最后一个问题，当我对 mpz 值（例如 float）进行算术运算时，它是否总是将类型转换为 mpz？

PS 我不知道 mpz 是否是我在这里使用的正确术语！如果有高声誉的人将 gmpy 添加到 stackoverflow 中的标签以使了解 gmpy 的人更容易访问这些问题，我也会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:04:38.837

我不知道，`gmpy2`但你可以在 Python 中使用`x.__class__`.

使用新型类，您还可以使用`type(x)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:34:36.343

gmpy2 引入了几种新的数据类型：mpz、mpq、mpfr 和 mpc。它们类似于 Python 的 int/long、fractions.Fraction、float 和 complex 类型。因此，涉及 mpz 的除法通常会产生 mpfr。

在您的示例中，您创建了一个 mpz，将其转换为浮点数，然后将其除以 mpz。执行除法时，gmpy2 将浮点数转换为 mpfr，然后执行除法。如果你想要一个浮点结果，你应该将 float() 应用于整个结果，而不仅仅是 gmpy2.comb(100,50)。注意括号中的差异。

```
>>> float(gmpy2.comb(100,50))/gmpy2.comb(200,100)
mpfr('1.114224180581451e-30')
>>> float(gmpy2.comb(100,50)/gmpy2.comb(200,100))
1.114224180581451e-30 
```

为什么要从 float 转换为 mpfr？mpfr 数据类型可以支持更高的精度，并且具有比浮点数更大的范围。只要mpfr的精度大于等于一个float的精度（即53），那么转换是无损的。

免责声明：我维护 gmpy 和 gmpy2。

# php - 为什么 ${0x0} 正确？

> ID：15270547
> 
> 赞同：37
> 
> 时间：2013-03-07T11:54:56.973
> 
> 标签：php

以下代码运行良好：

```
${0x0} = 'test';
echo ${0x0}; // prints "test" 
```

但我不知道为什么。`0x0`（或者`0`，正如非十六进制的人所说的那样）是一个随机容器，它可以是任何数字，但 php 变量不能以数字开头。这里使用的有什么特别之处`{ }`，它们的局限性是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-07T12:20:11.827

首先，`0x0`它只是一个`0`十六进制表示的正则，在`'0'`与变量变量语法一起使用时被转换为字符串：

```
var_dump(0x0===0); // prints "bool(true)"

${0x0} = 'test';
echo ${0x0}; // prints "test"
echo ${'0'}; // prints "test" as well
var_dump(get_defined_vars()); // contains ["0"] => string(4) "test" 
```

你是对的，你说它不是一个[有效的变量名](http://www.php.net/manual/en/language.variables.basics.php)：

> 变量名称遵循与 PHP 中其他标签相同的规则。有效的变量名称以字母或下划线开头，后跟任意数量的字母、数字或下划线。作为正则表达式，它会这样表达：'[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*'

这就是`$0foo = 'Test';`触发解析错误的原因。

[对变量变量语法](http://www.php.net/manual/en/language.variables.variable.php)的一些快速测试表明，事实上，PHP 似乎并不真正关心变量名称，因为它们是字符串：

```
${'123 abc xyz    '} = 'Test';
echo ${'123 abc xyz    '}; // Test
echo ${'123 abc xyz   '}; // PHP Notice:  Undefined variable: 123 abc xyz    in ...
var_dump(get_defined_vars()); // ["123 abc xyz    "] => string(4) "Test" 
```

我的猜测是上述命名限制是由源代码解析器而不是语言核心施加的。在分析 PHP 代码时，它需要这样的规则来区分变量。在内部，支持 PHP 的 Zend 引擎将[变量](http://www.php.net/manual/en/internals2.variables.intro.php)作为哈希映射处理：

> PHP 变量通常由两部分组成：标签，例如，可能是符号表中的条目，以及实际的变量容器。

因此，只要它接收到标签的有效字符串，它就会很高兴。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-07T12:01:28.420

从[文档](http://php.net/manual/en/language.variables.variable.php)中：

> 也可以使用花括号来明确界定属性名称。当访问包含数组的属性中的值时，当属性名称由多个部分组成时，或者**当属性名称包含在其他方面无效的字符时**（例如，来自 json_decode() 或 SimpleXML），它们最有用。

对我来说，这意味着如果您使用`${...}`，则对于变量名中可以使用的字符没有任何限制。然而你是否应该...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T12:02:48.440

PHP 解析器提供了一种特殊的语法来从任何返回字符串（或可以转换为字符串）的表达式创建变量名，例如：

```
<?php

define('A', 'aaa');

${'    _   '} = 'blah';
${'test' . A . (2 + 6)} = 'var';

echo ${'    _   '}; // blah
echo ${'testaaa8'}; // var

${'123'} = 'blah';
echo ${100 + 23}; // blah

function returnVarName() {
    return 'myVar';
}

$myVar = 12;
echo ${returnVarName()}; // 12 
```

此语法也可用于对象属性：

```
$object->{' some property    ... with strage name'}; 
```

* * *

`0x0`只是`0`文字的十六进制表示。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-07T12:09:04.020

换句话说，在这种情况下，花括号内的所有内容都是字符串！

所以 s`0x0`确实是十六进制版本，`0`但这里都是字符串！这就是为什么`${0x0}`或`${0}`工作，在哪里`$0`或`$0x0`不会！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-07T12:03:52.903

除了@Michael Robinson 所说的之外，在您的示例中，这也是有效的：

```
${0x0} = 'test';
$var = "0";
echo $$var; // prints "test" 
```

# jsf-2 - Primefaces 日历 - 侦听器之前的验证

> ID：15270550
> 
> 赞同：0
> 
> 时间：2013-03-07T11:55:05.847
> 
> 标签：jsf-2, primefaces

我想在任何验证之前双击触发bean的方法并用当前日期填充日历输入：

```
 <p:calendar id="idInputDueDate" value="#{newMeasureMB.measure.termin}"                      
                        required="true" immediate="true">           

                    <p:ajax event="dblclick"  listener="#{newMeasureMB.terminToCurrent}" 
                        global="false" update="idInputDueDate" immediate="true"/>       

                </p:calendar> 
```

支持bean的方法：

```
public void terminToCurrent(){
    measure.setTermin(new Date());      
} 
```

它仅在我删除“required = true”时才有效，否则总是会发生验证。我正在使用 primefaces 3.3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:32:27.700

默认情况下`process`，此属性`p:ajax`是`@this`这样处理您的日历的。添加`process="@none"`到 no`p:ajax`或从中删除`immediate="true"`，`p:calendar`以便不处理其所需的验证（如果根据您的用例可能的话）。

# c# - 通过jquery发布文件并使用c#保存

> ID：15270552
> 
> 赞同：0
> 
> 时间：2013-03-07T11:55:12.447
> 
> 标签：c#, jquery, asp.net, post

我已经使用 $.post 数千次了。但这次除了发布数据，我还想发布一个 GIF 图像文件。并使用 asp.net C# 我需要将文件保存在服务器上，但我不知道如何使用 jquery 发送文件以及如何使用 c# 获取它。我想做这样的事情：

```
<input type="file" id="img"  />

$.post('request.aspx',{name: 'someValue', price: somePrice, img: $('#img').val()}, function(){
alert('data saved');
}); 
```

并在 request.aspx 中使用 c# 获取发布的数据并使用它们：

```
 string name = Request.Form["name"];
 string price = Request.Form["price"];
 //and some how get the image... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:00:29.553

我做了类似的事情，但使用 Canvas 元素来实现它：

```
 dataURL = canvas.toDataURL("image/png");
                    dataURL = dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
                    jQuery.post("/admin/Handlers/HelpImageUpload.ashx", { img: dataURL }, function (data) {

                        pcHelp.Show();
                    }); 
```

在处理程序上：

var bytes = Convert.FromBase64String(context.Request["img"]);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:09:23.550

如果您想使用 POST 请求上传文件，我建议您将上传控件嵌入到表单中并进行简单的表单提交。如果要处理表单帖子的回调，请使用[jQuery From 插件](http://www.malsup.com/jquery/form/)

# c++ - UDP 一次性读取整个套接字缓冲区

> ID：15270554
> 
> 赞同：1
> 
> 时间：2013-03-07T11:55:17.227
> 
> 标签：c++, udp

我有 3 个组件客户端-代理-服务器，有时当代理负载过重时，套接字缓冲区配置为 1 MB 被填充。有没有办法一次性读取整个缓冲区 1 MB 然后进行处理？

供参考：

1.  所有数据包都不会超过 MTU 大小，都是按定义的结构格式，其中还添加了每个数据包的长度。

2.  代理在客户端和服务器之间路由数据，因此尝试使用生产者和消费者线程但问题未解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:07:13.563

*简短的回答*：不。

*长答案*：伯克利风格的套接字实现允许每次调用只接收或发送一个数据包。因此，不可能读取完整的网络流并在另一端重播。

原因之一是您的 UDP 套接字可以从多个来源接收数据。该接口应该能够将元信息（如发送方套接字地址，以及至少数据包大小）传递给调用方。这是一堆数据应该被解析，你会选择符合标准的数据包。最后，您可以构建要发送的数据包。

由于您必须有可能检查每个数据包，因此如果确实需要该数据包，则需要一个函数来从该数据包中读取数据包。这就是功能`recvfrom`。

# objective-c - NSString 作为多个类之间的参数

> ID：15270559
> 
> 赞同：0
> 
> 时间：2013-03-07T11:55:25.197
> 
> 标签：objective-c

我`NSStrings`在课间发送了很多次，我想我正在失去它们。

可以说我有：`classA ,classB, classC`

`classA`有`classB`（已分配）的实例，他正在调用 B 类中的函数，B 中的函数：

```
-(NSMutableData*)setProtocolDataForString:(NSString*)data WithCommand:(int)comm
{ //here i can see and log the string 'data', but i am sending him to classC from here
  [classCInstance send:data];
} 
```

`classA`调用该函数：`..setProtocolDataForString:@"ran"];`

正如我在里面写的那样，我可以看到 classB 得到了字符串，但是在他将他传递给另一个 classC 之后，我认为它正在丢失。函数究竟如何保存/保留`NS`它们获得的参数的值？我该怎么做才能让这个字符串在无限类之间传递而不被释放？

**不知道它是否重要，但classA/B不使用ARC，但classC使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:04:15.103

Class`B`需要拥有它自己传递给 class 的字符串的副本`C`。由于`NSString`实例被认为是值对象，因此您不能简单地保留字符串，而是创建一个副本。

`NSString newString = [aString copy];`在这种情况下`aString`可以安全地释放，因为您已经拥有一个具有自己保留计数的副本，该副本不会被释放。

不要忘记发布/自动发布您的副本。这不会自动为您完成。如果您忘记了这一点，您的应用程序将泄漏内存。

以下代码应该适合您：

```
[classCInstance send:[[data copy] autorelease]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:04:39.270

在将其传递给类方法之前分配或保留**NSString对象。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:12:31.360

您必须保留该字符串，因为 A 类和 B 类未启用 ARC。

```
-(NSMutableData*)setProtocolDataForString:(NSString*)data WithCommand:(int)comm
{ //here I can see and log the string 'data', but I am sending him to classC from here
   [data retain];
  [classCInstance send:data];
} 
```

# android - 安卓用户权限

> ID：15270566
> 
> 赞同：0
> 
> 时间：2013-03-07T11:55:41.377
> 
> 标签：android

我是 android 开发的新手，我正在为大学的一个项目制作井字游戏。

我知道这是一个简单的游戏，但我需要为其添加权限，以便我可以证明 android 具有某种安全性。

我在想屏幕不会自动锁定的东西，WAKE_LOCK 或类似的东西。

如何实施？除了将代码添加到 xml 文件的方法之外，还有其他方法吗？

我的意思是与`<user-permissions.... />`清单有关的东西，因此用户可以看到带有接受的弹出窗口？

将该行添加到清单文件中是否足够或需要编码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:14:49.223

这就够了

```
<manifest xlmns:android...>
...
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

# javascript - 使用 javascript 显示相关的下拉菜单

> ID：15270570
> 
> 赞同：0
> 
> 时间：2013-03-07T11:55:46.673
> 
> 标签：javascript, html, jsp, css

我有 3 个下拉框，其中包含年龄、运动和关系的值，当我们打开网页时，它们的所有元素都会被加载。

年龄 = [0-10, 10-20, 20-30, 30-40]

运动 = [足球、网球、高尔夫、国际象棋]

关系 = [儿子、兄弟、父亲、朋友]

现在，所有三个元素都与映射相互关联。例如，20-30 岁的人可以是儿子、兄弟或朋友；并且可以踢足球、网球或国际象棋。

我希望这些下拉列表是动态的，即，在选择任何下拉列表的任何值时，相关选项将显示在其他两个下拉列表中。我认为不应该是 ajax 调用，因为所有字段都已加载到客户端。

谁能告诉我如何使用 javascript（或任何其他方式）在 HTML 中完成此操作？任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:05:16.430

您需要在此代码中推送 java 脚本。您使用哪种格式。我将用代码发送您问题的答案

# clojure - 将 fns 的 seq 映射到输入的更好的 clojure 习惯用法

> ID：15270571
> 
> 赞同：3
> 
> 时间：2013-03-07T11:55:47.987
> 
> 标签：clojure

我在我的代码中经常遇到这种模式，`(map #(% a) fns)`其中 a 是一个变量，比如一个字符串，而 fns 是一个 fns 的序列，例如`[count #(split ",")]`. 有没有更简洁的方式来表达这种模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:08:50.837

更简洁？可能不是。更好的成语？要看。`juxt`将采用任意数量的 fns 作为参数，并提供一个函数，即它们的并置。所以，你可以用它来代替你`map`喜欢的

```
(def a "foo,bar,baz")

(map #(% a) [count #(split % #",")])
;=> (11 ["foo" "bar" "baz"])

((juxt count #(split % #",")) a)
;=> [11 ["foo" "bar" "baz"]] 
```

一方面，你有一个惰性的应用程序序列，另一方面你有功能组合。哪个更好取决于需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:36:34.810

一种直接的表达方式：`(for [f fns] (f a))`

仅为了完整性而添加，它与`map`基于 - 的表达式一样好，除非您喜欢`for`的不仅仅是匿名函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:27:16.680

图案已经很简洁了。但是如果你想创建一个代表 a`function collection`并且也是可调用的抽象，你可以尝试这样的事情：

```
(defmacro function-coll [param-count]
  (let [params (repeatedly param-count gensym)
        name (symbol (str "Functions-" param-count))]
    `(deftype ~name [fns#]
       clojure.lang.IFn
       (invoke [_ ~@params] (map #(% ~@params) fns#)))))

(function-coll 1)
(def one-fns (->Functions-1 [inc dec]))
(one-fns 10)

(function-coll 2)
(def two-fns (->Functions-2 [str vector]))
(two-fns :hello :world) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:29:40.730

我认为这里需要画眉操作员。

```
user=> (-> "a b c d" 
       .toUpperCase 
       (.replace "A" "X") 
       (.split " ") 
       first)
"X" 
```

[http://clojuredocs.org/clojure_core/clojure.core/-%3E](http://clojuredocs.org/clojure_core/clojure.core/-%3E)

[http://clojuredocs.org/clojure_core/clojure.core/-%3E%3E](http://clojuredocs.org/clojure_core/clojure.core/-%3E%3E)

# c++ - 递归共享库加载 - 无法打开共享对象文件

> ID：15270573
> 
> 赞同：1
> 
> 时间：2013-03-07T11:55:51.717
> 
> 标签：c++, gcc, dll, shared-libraries, codeblocks

我正在编译一个由多个项目组成的应用程序，这些项目生成动态库（LINUX 上的共享库）。当然，不同的项目正在链接到我编译的其他项目。我在 Ubuntu 下使用 CodeBlocks 10，使用 GCC 编译器。

由于根据用户指定的参数，应加载不同的库，在我的主应用程序中，我正在加载适当的库，根据决定，使用以下行：

```
dll = dlopen("my_library.so", RTLD_LAZY); 
```

如文档中所述，dlopen 会自动加载库如果库依赖于其他共享库并且该过程以递归方式完成。

问题是，在我的 dlopen 之后，我调用 dlerror() 以了解发生了什么，我收到以下错误：

> ../../../../gccDebug/os.so：无法打开共享对象文件：没有这样的文件或目录。

只看错误，我就完全理解了，因为它在下面的 2 个文件夹比它应该的要多。问题是为什么？

我的意思是：我使用相对路径在项目上显式加载共享库。在我的主应用程序上，工作目录是 ../../gccDebug。我使用 dlopen 加载 mylibrary.so，它显式加载（在项目选项中）../../gccDebug/gui.so。然后这个 gui.so 也显式加载（在项目选项中）../../gccDebug/so.os

在我看来，正在发生的事情是，他正在附加路径，使其在第 3 次“迭代”中实现，他正在寻找一条已经在搜索太多文件夹的路径。如果第一次递归加载（gui.so）工作得很好，为什么第二次递归加载（so.os）给出了一个奇怪的路径？

使用 dlopen 函数递归加载共享库有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:19:40.770

每个路径都应该与执行加载的库相关，因此要`../../gccDebug/gui.so`在它应该加载的同一目录中加载某些内容`./gui.so`

额外`../..`的是因为你已经告诉了一些`../../gccDebug`东西在 ../../gccDebug `_relative to itself_ which relative to your program's working directory is`../../gccDebug/../../gccDebug `i.e.`../../../gccDebug`

对不同的库执行几次，您将获得`..`所看到的不需要的组件的数量。

你确定`gui.so`实际加载了吗？难道是在链接时`mylibrary.so`复制了`../../gccDebug/os.so`依赖关系`gui.so`，所以在运行时试图在加载之前加载它`gui.so`？

你有没有`ldd mylibrary.so`看过它试图找到什么？您还可以使用`readelf -d mylibrary.so`来查看库的动态部分的内容。

# android - 使用多个可点击按钮在 ListView 中获取准确点击的按钮

> ID：15270576
> 
> 赞同：1
> 
> 时间：2013-03-07T11:55:56.193
> 
> 标签：android, listview, android-arrayadapter, onitemclicklistener

我用自定义 ArrayAdapter 创建了一个列表视图。这个列表视图由文本视图和两个按钮组成。为了能够应用所需的操作，我需要知道如何获取这两个按钮中的哪个按钮被单击。我可以单击任何行，并且可以接收要运行的 onItemClickListener 方法。但我找不到如何让代码获取点击了哪个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:11:35.607

在此链接中查看此链接，您将找到如何找到按钮的 onclick

[http://tausiq.wordpress.com/2012/08/22/android-listview-example-with-custom-adapter/](http://tausiq.wordpress.com/2012/08/22/android-listview-example-with-custom-adapter/)

[http://android-helper.blogspot.in/search/label/ListView](http://android-helper.blogspot.in/search/label/ListView)

# mysql - MySql 并发问题

> ID：15270580
> 
> 赞同：1
> 
> 时间：2013-03-07T11:56:01.790
> 
> 标签：mysql, sql

我正在使用此查询来检索“invoiceNo”的自动递增键值

```
 "SELECT AUTO_INCREMENT FROM information_schema.TABLES 
 where TABLE_SCHEMA='DB_NAME' and TABLE_NAME='invoice';" 
```

并将该值用作外键并插入 invoice_sub 表

![桌子](../Images/3dda70e418a9449ecfcefbb40700fca2.png)
我使用以下查询插入 invoice 和 invoice_sub 表

```
 insert into invoice(netAmount)            
  insert into invoice_sub(PK, itemDescr, itemPrice)<br>
  PK= AUTO_INCREMENT value 
```

如果两个或更多用户同时插入怎么办

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:58:29.667

不要那样做！

1.  插入`invoice`. ID 将自动计算。
2.  [从最后一个插入中](http://dev.mysql.com/doc/refman/5.0/en/mysql-insert-id.html)获取该 ID
3.  使用该 ID 插入`invoice_sub`

# php - 使用内联编码输入按键时的内联 javascript 警报

> ID：15270585
> 
> 赞同：4
> 
> 时间：2013-03-07T11:56:13.960
> 
> 标签：php, javascript, jquery, html

我正在尝试在输入按键时提醒 1 任何人都可以帮我解决这个问题吗？我这样做是内联的，因为要在行中工作并且每次输入按键时都会发送带有该请求的行号

```
 <input type="text" id="tt" name="tt" onkeydown="javascript: if (keyCode == 13) alert(1)"/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T12:06:38.343

如果您想使用内联 js，只需将 event.keycode 替换为您可以使用的 keycode：

```
<input type="text" id="tt" name="tt" onkeydown="javascript: if(event.keyCode == 13) alert(1);"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T12:00:12.877

为什么内联？？什么时候可以在 jquery 中调用事件

试试这个

```
$('#tt').keydown(function(e){
    if (e.keyCode == 13) 
    {
      alert(1);
    }
} 
```

如果您需要内联...您需要调用`event.keyCode`以获取按键的键码

```
 <input..name="tt" onkeydown="yourFuncName(event)"....>

 function yourFuncName(e){
     if (e.keyCode == 13) 
     {
        alert(1);
    }
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T12:03:46.463

```
<input type="text" id="tt" name="tt" onkeydown="myFunction(event)"/>

<script type="text/javascript">
    function myFunction(e) {
        if (e.which === 13 || e.charCode === 13 || e.keyCode === 13)
            alert(1);
    }
</script> 
```

请注意，并非所有浏览器都支持`keyCode`. 有些人使用`which`，有些人使用`charCode`.

# android - Eclipse 中的 Google Play 服务已停止工作

> ID：15270586
> 
> 赞同：2
> 
> 时间：2013-03-07T11:56:20.293
> 
> 标签：android, eclipse, google-play-services

`google-play-services_lib`在包资源管理器中单击导入时出现以下错误：

```
The project description file (.project) for 'google-play-services_lib' is missing.  
This file contains important information about the project.  
The project will not function properly until this file is restored. 
```

我已经从 SDK 中删除了 Google Play Services 并重新安装了它，但还是出现了同样的错误。

编辑：问题已解决。该`google-play-services_lib`文件夹缺少一个名为`.project`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-19T01:41:19.873

1.  select the project **google-play-services_lib** and delete it from **eclipse**, but **don't** select **delete from hard disk**
2.  Select File > Import > Android > Existing Android Code Into Workspace and click Next.
3.  Select Browse.... Enter /extras/google/google_play_services/libproject.

if it still not working clean project and restart eclipse

source of my answer is redo step two in [here](https://developers.google.com/+/mobile/android/getting-started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T21:01:38.450

当我在没有“将文件复制到工作区”的情况下导入时为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T06:51:55.523

我做了什么。我刚刚复制了 `extras\google\google_play_services\libproject\google-play-services_lib` to`google_play_services\`文件夹的内容。

现在清理并构建`lay_service_lib`并再次将该库引用到您的项目中。再次清理并构建您的项目并完成..

我的 WorkSpace 现在正在使用此帮助。

# c# - 如何在 TableAdapter 查询中使用命名参数？

> ID：15270591
> 
> 赞同：1
> 
> 时间：2013-03-07T11:56:34.140
> 
> 标签：c#, ms-access, oledb

我正在通过查询向导配置数据集。我想生成参数化查询。我的查询如下所示：

```
SELECT 
    Field1, Field2, Field3 
FROM
    SomeTable
WHERE
    Field1 = @field1 
```

正在从 Access 2007 数据库中获取数据，该查询在该数据库中成功执行。但是，从代码中，我收到了错误：

> '@' 附近的 WHERE 子句出错。无法解析查询文本。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:21:26.830

Access 不支持命名参数并使用`?`而不是`@`（如 SQL-Server）。

所以这应该工作：

```
...
WHERE
    Field1 = ? 
```

另请参阅[如何：创建参数化 TableAdapter 查询](http://msdn.microsoft.com/en-us/library/ms171905(v=vs.110).aspx)：

> 构造参数化查询时，请使用特定于您正在编码的数据库的参数表示法。
> 
> 例如，Access 和 OleDb 数据源使用问号`'?'`来表示参数，因此`WHERE`子句看起来像这样：`WHERE City = ?`.

# android - 无法动态传递 unicode DroidText, AAndroid

> ID：15270592
> 
> 赞同：2
> 
> 时间：2013-03-07T11:56:35.317
> 
> 标签：android, unicode

我正在尝试用中文文本创建一个pdf，所以最初我将中文转换为unicode，然后将它添加到pdf。但我只能将静态变量写入pdf。我的英语有点差，所以请检查我从创建的 pdf 中获得的代码和输出。

```
 Document document = new Document();
 PdfWriter.getInstance(document,new FileOutputStream(filepath));
 document.open();

 Paragraph p = new Paragraph();

             String   name= "\\u" + Integer.toHexString('取'| 0x10000).substring(1) ;
             String temp="\u53d6";
          //  Log.d( name , temp);
             InputStream inputStream = this.getResources().openRawResource(R.raw.koz);
             byte[] buffer = new byte[inputStream.available()];
             inputStream.read(buffer);
             BaseFont bfComic = BaseFont.createFont("koz.ttf", BaseFont.IDENTITY_H, true, false, buffer, null);
             Font font = new Font(bfComic, 12);
             p.setFont(FontChinese);
             p.add(temp);
             document.add(p); // adding unicode staticaly
             p.add(name);
             document.add(p); // adding dynamically
             document.close(); 
```

输出：
取
\u53d6

# c# - Microsoft JScript 运行时错误：从代码隐藏调用时应抛出对象

> ID：15270599
> 
> 赞同：2
> 
> 时间：2013-03-07T11:56:51.837
> 
> 标签：c#, javascript

我正在使用 jquery ui 选项卡和工具提示，它运行良好。这是 jquery-ui 选项卡的代码

```
$(function() {
  $( "#tabs" ).tabs();
  $(document).tooltip(); 
}); 
```

我写了另一个函数，我想从按钮点击事件后面的代码中调用它

```
function setDiv(type){
    alert(type);         
} 
```

这是我的代码隐藏功能。

```
protected void btnNext_Click(object sender, EventArgs e)
{
    pnlResult.Visible=True;
    ScriptManager.RegisterClientScriptBlock(Page, typeof(Page), "script type='text/javascript' language='javascript'",
    "setDiv('highlight')();", true);
} 
```

问题是当我单击 btnNext 按钮时，提示正在显示突出显示。之后我在 aspx 页面上收到**对象预期错误**，并且错误点在

```
<div id="tabs-1">(div used for creating tabs) 
```

这是我的 aspx 页面

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
<div id="tabs-1">//Here's where i am getting the error
    <p>
        <asp:Panel ID="pnlResult" runat="server" Visible="false">
            <div id="divResult"  runat="server">
                <span id="spIcon"   style="float:left;margin-left:3px;"></span>
                Successfully inserted
            </div>
        </asp:Panel>
        <table style="width:50%" id="tbl" runat="server" >
            <tr>
                <td>
                   Your Name:
                </td>
                <td>
                    <input id="name" title="Enter your name here" />
                </td>
            </tr>
            <tr>
                <td >
                    <span class="ui-icon ui-icon-alert"  style="float:left;margin-left:3px;"></span>
                    <input type="button" id="btnSubmit" value="Submit" />
                </td>
            </tr>
        </table>
    </p>
</div>
<div id="tabs-2">
    <p>Tab2.</p>
</div>
<div id="tabs-3">
    <p>Tab3.</p>
    <p>Tab is placed.</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:00:47.230

您在后面的代码中构建的脚本格式错误，试试这个：

```
ScriptManager.RegisterClientScriptBlock(
    Page, 
    typeof(Page), 
    "setDiv",
    "<script type='text/javascript'>setDiv('highlight');</script>",
     false); 
```

# c# - StructureMap：“AddAllTypesOf”未将程序集添加到 ObjectFactory？

> ID：15270606
> 
> 赞同：5
> 
> 时间：2013-03-07T11:57:18.140
> 
> 标签：c#, structuremap, .net-assembly

我正在尝试构建一个控制台应用程序，该应用程序在运行时加载一个实现接口的程序集。重点是创建一个带有指令的 .dll，可以通过更改 .dll 来更改该指令。

我的 VS2012 解决方案包含 3 个项目：接口、实现它的库和控制台应用程序。（正因为如此，这三个都有自己的命名空间，也许这是个问题？）库和控制台应用程序都有对接口项目的引用。

将程序集添加到 后`ObjectFactory`，使用时找不到`GetAllInstances`。使用时会发现它们`AssembliesFromPath`，但添加似乎不起作用。

这是我的代码：

```
var dir = "..\\..\\..\\ComputeLibrary\\bin\\Debug";
ObjectFactory.Initialize(cfg =>
{
    cfg.Scan(scanner =>
    {
        scanner.AssembliesFromPath(dir);
        scanner.AddAllTypesOf(typeof(ICompute)).NameBy(i => i.Name);
    });
});
var list = ObjectFactory.GetAllInstances<ICompute>().ToList();
list.ForEach(item => item.Test()); 
```

如果有人想查看整个解决方案，请[点击此处](https://dl.dropbox.com/u/1168498/Uploaded/LoadLibrary.zip)。

我可能在这里做错了什么，但我似乎无法找到它是什么。这是应该如何使用的吗？或者我应该期待 MEF 做这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:52:05.987

这让我困惑了一段时间，直到我想起了 Structuremap google group 中的[这个帖子](https://groups.google.com/forum/?fromgroups=#!topic/structuremap-users/c64UWzdmv7E)。

运行应用程序时，会加载 ComputeInterface.dll 程序集。当您扫描 ComputeLibrary 文件夹时，会再次加载相同的程序集，这会混淆 Structuremap，因为该接口只能从一个程序集实现。尝试从 ComputeLibrary\bin\Debug 文件夹中删除 ComputeInterface.dll，它会起作用。

# java - Java - 布尔状态不变

> ID：15270609
> 
> 赞同：-6
> 
> 时间：2013-03-07T11:57:44.817
> 
> 标签：java, boolean, state

我在这里有这段代码：

```
if ( event.getSource() == Square0 ) 
        {

            if ( PlayerOneTurn == true ) Square0.setBackground(Color.red);
            if ( PlayerOneTurn == true ) PlayerOneTurn = false ;

            if ( PlayerOneTurn == false ) Square0.setBackground(Color.blue) ;

        } 
```

如果不清楚，我希望背景变为红色，并且 PlayerOneTurn 的状态变为 false，所以当我再次单击它时它变为蓝色。它有效，但`if ( PlayerOneTurn == true ) PlayerOneTurn = false ;`似乎并没有改变变量的值。我是否使用了完全错误的陈述或遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:00:33.483

您正在将颜色更改为红色，第一个并使用第三个语句`if`将其更改回蓝色，通过更改为这样来修改您的代码`if``if``if-else`

```
if ( PlayerOneTurn == true ) 
{
     Square0.setBackground(Color.red);
     PlayerOneTurn = false;
}
else
{
     Square0.setBackground(Color.blue) ;
     PlayerOneTurn = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:59:39.473

使用`else if`和类似的构造。

您**覆盖**第 3 行中的值`PlayerOneTurn`。

还要确保在更改视觉效果时触发重绘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:03:26.060

目前，您的代码将颜色设置为红色，然后设置`PlayerOneTurn`为 false，然后再次将颜色设置为蓝色，因为`PlayerOneTurn`现在是 false。

你想要的是

```
if ( event.getSource() == Square0 ) {

        if ( PlayerOneTurn == true ) {
            Square0.setBackground(Color.red);
            PlayerOneTurn = false ;
        } else {
            Square0.setBackground(Color.blue) ;
            PlayerOneTurn = true;
        }
    } 
```

或者，关于布尔值更惯用：

```
if ( event.getSource() == Square0 ) {

        if ( PlayerOneTurn ) {
            Square0.setBackground(Color.red);
        } else {
            Square0.setBackground(Color.blue) ;
        }

        PlayerOneTurn = !PlayerOneTurn;  // True becomes false and false becomes true
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:01:10.300

使用 else if

```
if (PlayerOneTurn) {
 Square0.setBackground(Color.red);
PlayerOneTurn = false;
}
else
{
 Square0.setBackground(Color.blue) 
} 
```

# javascript - 比较两个时间值 (hh:mm am/pm)

> ID：15270614
> 
> 赞同：1
> 
> 时间：2013-03-07T11:57:54.793
> 
> 标签：javascript, html

我有两个从下拉框中选择的时间值。时间格式为`hh:mm am/pm`。我需要比较这两个日期。我已经完成了这段代码，但它对我不起作用。

```
<select id="eventstarttime">
  <option>10:00am</option>
  ........
  <option>3:00pm</option>
 </select>

 <select id="eventstoptime" onblur="return checktime()">
  <option>10:00am</option>
  ........
  <option>3:00pm</option>
 </select> 
```

javascript方法是

```
 function checktime()
{
    var start = document.getElementById("eventstarttime").value;
    var end = document.getElementById("eventstoptime").value;

    if(Date.parse('01/01/2011 '+end) < Date.parse('01/01/2011 '+start))
    {
        alert("End time should exceed the start time");
    }
    else if(Date.parse('01/01/2011 '+end) -Date.parse('01/01/2011 '+start)==0)
    {
        alert("Start time and end time cannot be same");
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:23:05.833

如果您向元素添加 24h 时间`value`属性，例如`option`

```
<select id="eventstarttime">
  <option value="1000">10:00am</option>
  <option value="1215">12:15pm</option>
  <option value="1500">3:00pm</option>
</select>

<select id="eventstoptime" onblur="return checktime()">
  <option value="1000">10:00am</option>
  <option value="1215">12:15pm</option>
  <option value="1500">3:00pm</option>
</select> 
```

您可以使用以下方法轻松比较它们

```
function checktime()
{
    var start = document.getElementById("eventstarttime").value;
    var end = document.getElementById("eventstoptime").value;

    if (end < start)
    {
        alert("End time should exceed the start time");
    }
    else if (end == start)
    {
        alert("Start time and end time cannot be same");
    }
    return false;
} 
```

不需要 JavaScript`Date`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:11:42.387

您必须将`am`和`pm`与时间值分开 a `space`。同样在你的代码变量中`dtEnd`并`dtStart`没有定义。在 else 部分中，如下所示：

```
else if(end == start)
{
   alert("Start time and end time cannot be same");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:06:26.813

试试`strtotime`（[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)）

```
$firstTime="10:00 am";
$secondTime="3:00 am";
$result =strtotime ($firstTime) > strtotime($secondime); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-24T10:34:15.407

**在您的 HTML 代码中，在选择选项**值中的“hh:mm”和“am/pm”之间添加空格

```
 function checktime()
{
    var start = document.getElementById("eventstarttime").value;
    var end = document.getElementById("eventstoptime").value;

    if(Date.parse('01/01/2011 '+end) < Date.parse('01/01/2011 '+start))
    {
        alert("End time should exceed the start time");
    }
    else if(Date.parse('01/01/2011 '+end) -Date.parse('01/01/2011 '+start)==0)
    {
        alert("Start time and end time cannot be same");
    }
    return false;
}
```

```
<select id="eventstarttime">
  <option value='10:00 am'>10:00am</option>
  <option value='3:00 pm'>3:00pm</option>
 </select>

 <select id="eventstoptime" onblur="return checktime()">
  <option value='10:00 am'>10:00am</option>
  <option value='3:00 pm'>3:00pm</option>
 </select>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T12:01:37.400

你可以通过 PHP 来做到这一点，如下所示：

```
var d1 = "15:30";
var d2 = "15:36";
if (new Date(d1) < new Date(d2)) {alert('newer')} 
```

查看参考 URls ：

[jQuery/JS - 如何比较两个日期/时间戳？](https://stackoverflow.com/questions/5174952/jquery-js-how-to-compare-two-date-time-stamps)

[如何获取当前时间，然后使用 jquery 进行比较](https://stackoverflow.com/questions/3595403/how-to-get-current-time-and-then-compare-them-using-jquery)

使用 PHP，您可以这样做：

```
$time1 = strtotime("15:30");
$time2 = strtotime("15:40");

if($time1<$time2)
{
   echo "time 1 is smaller";
}
else if($time1>$time2)
{
   echo "time 2 is smaller";
}
else
{
   echo "both are same";
} 
```

希望对你有帮助

# c# - 使用什么组件来发送带有任何正文的邮件？

> ID：15270618
> 
> 赞同：1
> 
> 时间：2013-03-07T11:58:06.893
> 
> 标签：c#, email, sendmail, document-body

我在 C# 中创建了一个邮件发件人，但邮件正文出现问题。它只发送没有图片、链接和其他元素的文本。更不用说，我用于`RichTextBox`那个目的。

所以现在我的问题是：使用什么组件来发送带有图片、链接等的邮件？

我还启用`IsBodyHtml`了`true`.

我想要做的是从 Microsoft Word 复制图片、链接和文本（具有不同的颜色和大小）并将其粘贴到控件中，当用户收到邮件时，他会得到与我发送邮件完全相同的正文和布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:06:27.223

您需要将其作为 html 发送。将您的 word doc 保存为 html 并使用它。对于文档中的图像，您可以通过它们的绝对 URL（通过 Internet 公开）指向它们。

或者你可以使用这个`LinkedResource`类。

使用 LinkedResource 类，您的图像必须在源中指定一个 cid。

```
var inlineLogo = new LinkedResource("path/myfile.png");
                                inlineLogo.ContentId = Guid.NewGuid().ToString(); 

var imageHtmlFragment = string.Format("<img alt='My Logo'  src='cid:{0}' style='width: 250px;height: 60px;'/>",inlineLogo.ContentId);

var newMail = new MailMessage();

var view = AlternateView.CreateAlternateViewFromString(imageHtmlFragment, null, "text/html");
                        view.LinkedResources.Add(inlineLogo);
                        newMail.AlternateViews.Add(view); 
```

# java - 在 Eclipse 的 Java 代码运行时执行 shell 脚本

> ID：15270621
> 
> 赞同：1
> 
> 时间：2013-03-07T11:58:25.330
> 
> 标签：java, eclipse, shell

我有一个要在 Eclipse 中从 Java 代码执行的 shell 脚本。

我可以使用外部工具来运行脚本，但我希望脚本在 Java 代码执行期间运行，即 Java 代码应该调用脚本。

早些时候我使用“Process Builder”来执行此操作，但似乎 Eclipse 不支持该方法，因为当我授予它所有权限时它显示“找不到文件”。

知道如何从 Eclipse 中的 Java 代码运行脚本吗？

这是代码：

```
 String line1 = null;
        String target = new String("/home/aditya_s/workspace/rs-test/src/iperf_parse.sh " + host + " " + "9000");
        while(line1 == null)
        {
            Process p1 = Runtime.getRuntime().exec(target);
            BufferedReader input1 = new BufferedReader(new InputStreamReader(p1.getInputStream()));
            System.out.println("Ran");
            line1 = input1.readLine();
            p1.destroy();
        }
        BW = Double.parseDouble(line1); 
```

**提示：**右键单击 shell 脚本并转到属性。将“读/写/执行”权限授予“所有者”。默认情况下，“执行”权限不存在。因此，您可能会收到类似“无法执行 script.sh”的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:02:55.723

Eclipse 像往常一样运行您的 java 程序，因此 ProcessBuilder 也可以正常工作。您可能走错了路。如果路径是相对的，它将相对于`System.getProperty("user.dir")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:00:17.307

您应该能够使用以下内容，将 shellscript 替换为您要运行的脚本。

```
String s = "shellscript";
Process proc = Runtime.getRuntime().exec(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:02:16.280

你应该看看[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)

# javascript - 在我们的网站中允许第三方内容的方法

> ID：15270635
> 
> 赞同：0
> 
> 时间：2013-03-07T11:59:05.500
> 
> 标签：javascript, html, ajax, xss

假设我想在我的网站上显示来自其他域的内容。所以我在我的页面上使用 iframe 并说

```
<iframe src="http://www.google.com" /> 
```

现在我想由于同源政策之类的原因，这可能行不通。

我只是想知道我可以通过哪些方式在我的网站上显示 3rd 方域内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:01:43.887

虽然不理想，但`iframe`只要不想修改里面的页面，就可以使用。一个例外情况是，如果您尝试在 iframe 中显示的网站阻止您执行此操作。有围绕这个的framebusting技术，但我不推荐它。

同源策略是允许一个站点在 iframe 内的站点中调用 javascript 的一种方式。出于安全原因，您不能这样做，例如在 google.com 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:03:11.660

您可以提供诸如服务器端代理之类的东西并通过它重定向所有请求

```
<iframe src="webContentProxy/url/encoded(http://www.google.com)" /> 
```

工作流程/架构如下

*   webContentProxy/url/{URL} 是*您*服务器上的某个控制器，它以某种形式将 {url} 作为参数，加载 url 服务器端的内容并将其流式传输回客户端
*   iframe通过控制器从*您的*服务器加载

意味着，浏览器只与您的服务器通信，而您的服务器与外部服务器通信。通过这种方式，您还可以处理更多类似身份验证或 url 重写的问题。

# c# - ASP.NET MVC 将 ViewModel 传递给不同的 ViewModel

> ID：15270636
> 
> 赞同：1
> 
> 时间：2013-03-07T11:59:07.327
> 
> 标签：c#, asp.net-mvc-2, viewmodel

我有一个具有 viewModel 的产品：ProductViewModel

```
private int _id;
private string _name;
private string _type;
private int _selectedID;

public ProductViewModel(int id, string name, string type) 
{
    _ id = id;
    _ name = name;
    _ type = type;
}
public int ProductID
{
    get { return _id; }
    set { _id = value; }
}
public string Name
{
    get { return _name; }
    set { _name = value; }
}
public string Type
{
    get { return _type; }
    set { _type = value; }
}
public int Selected 
{
    get { return _selected; }
    set { _selected = value; }
} 
```

为了显示产品列表，我还有另一个 ViewModel：ProductListViewModel

```
private PagedResult<ProductViewModel> _pagedResult;
private string _sortColumn = "Id";
private string _sortOrder = "ASC";

public LostAssetsListViewModel(PagedResult< ProductViewModel > products) 
{
    _pagedResult = products;
}

public PagedResult<ProductViewModel> List 
{
    get { return _pagedResult; }
    set { _pagedResult = value; }
}
public string SortColumn 
{
    get { return _sortColumn; }
    set { _sortColumn = value; }
}
public string SortOrder 
{
    get { return _sortOrder; }
    set { _sortOrder = value; }
} 
```

在我的视图中，我使用 Product LisViewModel 来显示产品列表。在我想添加单选按钮的每个产品中（选择该产品）

```
<% = Html.RadioButtonFor(m => m.List[i].Selected, "false", Model.List[i]. ProductID)%> 
```

为了在我的控制器中获取所有数据，我创建了 ProductInputModel：

产品输入模型

```
private int _id;
private string _name;
private string _type;
private int _selectedID;

public ProductInputModel(int id, string name, string type) 
{
    _ id = id;
    _ name = name;
    _ type = type;
}
public int ProductID
{
    get { return _id; }
    set { _id = value; }
}
public string Name
{
    get { return _name; }
    set { _name = value; }
}

public string Type
{
    get { return _type; }
    set { _type = value; }
}

public int Selected 
{
    get { return _selected; }
    set { _selected = value; }
} 
```

在我的控制器中输入为空：[HttpPost] public ActionResult Details(ProductInputModel input) {}

我无法弄清楚为什么 ProductViewModel 中的数据没有传递给 ProductInputModel。我应该如何通过 ViewModels 获得选定的产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:01:18.017

如果要将视图模型用作操作参数，则视图模型必须具有默认的无参数构造函数。否则默认模型绑定器将无法实例化它。您应该确保您的`ProductInputModel`.

# ruby-on-rails-3.2 - 如何通过多个has_many关联求和？

> ID：15270642
> 
> 赞同：2
> 
> 时间：2013-03-07T11:59:17.650
> 
> 标签：ruby-on-rails-3.2, sum, has-many

我确实有这样的嵌套关联：

```
# note : irregular inflection (proj_paquet_mesures : proj_paquets_mesures)
class ProjPaquetMesures < ActiveRecord::Base
  ...
  has_many :proj_mesures
end

class ProjMesure < ActiveRecord::Base
  ...
  has_many :proj_projets
end

class Projprojet < ActiveRecord::Base
  ...
  has_many :proj_sous_projets
end

class ProjSousProjet < ActiveRecord::Base
  ...
  has_many :proj_charges
end

class ProjCharge < ActiveRecord::Base
  # integer value
  attr_accessible :montant 
end 
```

我想将所有“montant”的总和嵌套到我的 proj_paquet_mesures 之一中。

我执行了以下不起作用的操作（尽管使用“包含”但对 SQL 查询效率不高）：

```
proj_paquet_mesures = ProjPaquetMesures.includes([{:proj_mesures => {:proj_projets => {:proj_sous_projets => :proj_charges}}}]).find(1)
total_charges_of_my_paquet_mesures = proj_paquet_mesures.proj_mesures.proj_projets.proj_sous_projets.proj_charges.sum(:montant) 
```

第一行代码产生 4 个查询，而不是signle 预期的一个连接查询：

```
 ProjPaquetMesures Load (8.9ms)  SELECT "proj_paquets_mesures".* FROM "proj_paquets_mesures" WHERE "proj_paquets_mesures"."id" = $1 LIMIT 1  [["id", 1]]
  ProjMesure Load (1.4ms)  SELECT "proj_mesures".* FROM "proj_mesures" WHERE "proj_mesures"."proj_paquet_mesures_id" IN (1)
  ProjProjet Load (0.6ms)  SELECT "proj_projets".* FROM "proj_projets" WHERE "proj_projets"."proj_mesure_id" IN (3)
  ProjSousProjet Load (0.8ms)  SELECT "proj_sous_projets".* FROM "proj_sous_projets" WHERE "proj_sous_projets"."proj_projet_id" IN (1)
  ProjCharge Load (2.7ms)  SELECT "proj_charges".* FROM "proj_charges" WHERE "proj_charges"."proj_sous_projet_id" IN (2) 
```

第二行代码根本不起作用。

任何想法 ？

=== 更新 ===

在第一个答案之后，似乎**PostgreSQL 比 MySQL 更符合 SQL 标准，**因此它需要一个“ **GROUP BY** ”子句，用于您希望与聚合函数一起显示的每个选定列。所以我尝试了以下代码：

```
proj_paquet_mesures = ProjPaquetMesures.joins([{:proj_mesures => {:proj_projets => {:proj_sous_projets => :proj_charges}}}]).select("proj_charges.id, sum(proj_charges.montant) as total_montant").group([id]).find(1) 
```

但是 Rails 用`NameError: undefined local variable or method`id' 回复 main:Object`

[官方文档](http://guides.rubyonrails.org/active_record_querying.html#group)不清楚在哪里应用分组方法，并且缺乏解释和示例。

所以我删除了 proj_charges.id 并得到了这个：

```
proj_paquet_mesures = ProjPaquetMesures.joins([{:proj_mesures => {:proj_projets => {:proj_sous_projets => :proj_charges}}}]).select("sum(proj_charges.montant) as total_montant").find(1)
total_charges_of_my_paquet_mesures = proj_paquet_mesures.total_montant 
```

它有效，但如果有一天我想计算每个 proj_charges.id 的总数，这将不起作用。

更多由这 4 级嵌套连接生成的查询计划表明，**Rails 还不够成熟，无法管理专业的复杂数据库**。

当您开始使用“JOIN”sql 命令时，您需要能够告诉数据库您希望她加入表的顺序。否则，如果您不这样做并使用深度嵌套的 JOIN，您将面临数据库的响应问题。

为此，您需要能够在您的 JOIN 指令之间使用括号来指示数据库必须以何种顺序连接哪些表。Rails 还不能让你这样做。

相反，您必须使用 rails find_by_sql 方法来依赖 SQL。

```
ProjSouProjet.find_by_sql ['SELECT sp.id AS "proj_sous_projet_id", SUM(c.montant) AS total FROM proj_charges c JOIN (proj_sous_projets sp JOIN (proj_projets p JOIN (proj_mesures m JOIN proj_paquets_mesures pm ON m.proj_paquet_mesures_id = pm.id AND pm.id = ?) ON p.proj_mesure_id = m.id) ON sp.proj_projet_id = p.id) ON c.proj_sous_projet_id = sp.id GROUP BY sp.id', 1] 
```

[这里](http://www.postgresql.org/docs/9.2/static/explicit-joins.html)有更多关于 Join 和 PostgreSQL 的查询计划的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:40:33.930

这应该有效。单一查询。

```
 proj_paquet_mesures = ProjPaquetMesures.join([{:proj_mesures => {:proj_projets => {:proj_sous_projets => :proj_charges}}}]).select("proj_charges.*, sum(proj_charges.monatent) as total_monatant)").find()
 proj_paquet_mesures.total_monatent 
```

# javascript - 比较 2 个日期一个是 jquery 对象，另一个在文本框中

> ID：15270645
> 
> 赞同：0
> 
> 时间：2013-03-07T11:59:23.437
> 
> 标签：javascript, jquery-ui, date

我正在尝试比较两个日期，一个是在文本框中写成`YYYY-MM-DD`，另一个是 jquery Datepicker 实例

我正在使用自定义包装函数调用该函数

```
datePicker('#edd', {onSelect: function(str, obj){ check_if_edd_less_OD(str, obj); }}); 
```

下面是比较日期的JS函数

```
function check_if_edd_less_OD(s, o) {

    console.clear();

    var eddDate = new Date();
    eddDate.setDate(o.selectedDay);
    eddDate.setMonth(o.selectedMonth);
    eddDate.setYear(o.selectedYear);

    orderDate = $('#orderdate').val().split('-');

    console.log(orderDate);

    var odDate = new Date();
    odDate.setDate(parseInt(orderDate[2], 10));
    odDate.setMonth(parseInt(orderDate[1], 10));
    odDate.setYear(parseInt(orderDate[0], 10));

    console.log(eddDate);
    console.log(odDate);

    if (odDate.getTime() < eddDate.getTime()) {
        console.log('You shall Pass');
    } else {

        console.log('You shall NOT Pass');
    }

} 
```

截至今天，orderdate 输入设置为 2013-03-07，如果我从 datepicker 中选择 5 APR 2013 它不起作用

以下是控制台的输出

```
["2013", "03", "07"]
Date {Fri Apr 05 2013 16:55:23 GMT+0500 (Pakistan Standard Time)}
Date {Sun Apr 07 2013 16:55:23 GMT+0500 (Pakistan Standard Time)}
You shall NOT Pass 
```

如您所见 `console.log(eddDate);`，给出了正确的输出，但`console.log(odDate);`在 2013 年 4 月 7 日给了我。

**问题：**为什么会出现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:34:50.503

[`Date`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)的月份计数是从零开始的（一月：0，...，四月：3）。不确定是什么格式`o.selectedMonth`，但解析的 YYY-MM-DD 日期应该更改为

```
odDate.setMonth(parseInt(orderDate[1], 10)-1); 
```

顺便说一句，您不需要`getTime()`在比较两个`Date`对象之前调用，它们将自动转换为该数字。

# java - 较大的 TextField Java 中的较小的 TextField

> ID：15270647
> 
> 赞同：0
> 
> 时间：2013-03-07T11:59:30.533
> 
> 标签：java, swing, textfield

我想要一个看起来像这样的文本字段：

文本域 。文本域 。文本域。文本域

并在文本字段中输入数字。你能帮我吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:07:17.360

您不需要父文本字段来充当 4 个文本字段的容器。在面板内放置 4 个文本字段。

**在 java swing 中实现这一点的步骤：**
1.创建`JPanel`一个白色背景。
2.添加 4 s，由value`JTextField`分隔（使用 GridLayout 将它们保持在一行中）。3.禁用s 及其[边框](https://stackoverflow.com/questions/2281937/swing-jtextfield-how-to-remove-the-border) 的突出显示 或使文本字段[透明](http://java-program-sample.blogspot.com/2012/05/transparent-jtextfield-simple-and-basic.html)4.当任何s 接受输入时 添加边框。`JLabel``.`
`JTextField`
`JPanel``JTextfield`

# javascript - 客户端脚本和服务器端脚本语言

> ID：15270648
> 
> 赞同：6
> 
> 时间：2013-03-07T11:59:32.333
> 
> 标签：javascript, client-side-scripting, server-side-scripting

*   哪些脚本语言属于客户端，哪些脚本语言属于服务器端？

*   如果 JavaScript 是脚本语言，那么 jquery 呢？jquery 只不过是 javascript 库仪式？所以jquery是客户端脚本？

    我盯着它看，但它仍然令人困惑。在某些站点中，它给出的客户端脚本是 JavaScript 和 vb 脚本，而在其他一些站点中，它只说 JavaScript。在服务器端的情况下，他们也提到了 html。

    我可以对此有一个明确的想法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T12:07:27.397

客户端：

在客户端执行的脚本。在网站的上下文中，它是在用户浏览器中执行的脚本。

例如：Javascript、VB 等。

（JQuery、DOJO 是建立在 Javascript 之上的库，所以它也是客户端。）

服务器端：

在服务器中执行的脚本。在网站的上下文中，它是在应用程序服务器上执行的脚本。

例如：PHP、Python、Ruby 等

我们不能将语言分类为客户端或服务器端。可能存在服务器可以执行 Javascript 并从中呈现 HTML 的场景。在这种情况下，Javascript 成为服务器端语言。我希望我没有混淆你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-12T06:02:21.000

引用了[user61852 的答案中的细微格式更改](https://softwareengineering.stackexchange.com/a/171218)

“这里我只谈网络编程。

**客户端编程**主要与用户交互的用户界面有关。在web开发中是浏览器，在用户的机器上，运行这段代码，主要是用javascript、flash等来完成的。这段代码必须在各种浏览器中运行。

其主要任务是：

验证输入动画 操作 UI 元素 应用样式 不希望页面频繁刷新时会进行一些计算 前端编程负责人必须知道：

javascript css HTML 基本图形设计 Ajax 可能是 Flash 一些 3rd 方 javascript 库，如 JQuery UI 设计信息设计等。

**服务器端编程**与生成动态内容有关。它在服务器上运行。这些服务器中有许多是“无头的”。大多数网页不是静态的，它们搜索数据库以向用户显示更新的个性化信息。这方面与后端交互，比如数据库。

这种编程可以用多种语言完成：

PHP Java 和 jsp asp Perl Python Ruby on Rails 等。此代码必须执行以下操作：

查询数据库 将数据编码成 html 向数据库中插入和更新信息 业务规则和计算 服务器端编程负责人必须知道：

上面提到的一些语言 HTML SQL, linux/unix shell scripting OOP 业务规则等”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-07T12:10:16.867

> 客户端下有哪些脚本语言

出于所有实际目的：JavaScript

> 什么和所有都在服务器端？

阳光下的每种编程语言（包括 JavaScript）

> 如果 JavaScript 是脚本语言，那么 jquery 呢？jquery 只不过是 javascript 库仪式？所以jquery是客户端脚本？

这是一个图书馆。是的。一般来说……它非常适合浏览器，但是（至少在理论上）你可以将它与 PhantomJS 之类的东西一起使用来操作服务器上的网页。

> 我盯着它看，但它仍然令人困惑。在某些站点中，它给出的客户端脚本是 JavaScript 和 vb 脚本，而在其他一些站点中，它只说 JavaScript。在服务器端的情况下，他们也提到了 html。

Internet Explorer（虽然可能只有旧版本）也支持 VBScript 进行客户端编程。在 WWW 上使用它是不切实际的，因为它不在其他任何地方运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-12T06:30:36.520

在客户端脚本中，通常在客户端系统上下载脚本文件，客户端浏览器编译此脚本文件并生成 HTML。并通过浏览器生成 HTML 显示。

EX- JavaScript 文件、Jquery 文件、AngularJs 文件。

在服务器端脚本中，当用户请求显示页面时，脚本在服务器上运行并生成动态 HTMl 文件并将此 HTML 文件发送给用户。

EX-Asp( *.asp)、Asp.Net(* .aspx)、PHP(*.php)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T12:07:14.380

如果代码在客户端机器上编译/运行，则它被视为客户端。服务器端是指在将其发送到浏览器之前在服务器上编译/运行的脚本。jQuery 只是一个 JavaScript 库。这都是客户端。

例如，网络上的一些常用语言。

客户端：JavaScript
服务器端：PHP、Ruby、Perl

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-07T12:14:40.940

请通过以下链接

用于客户端编程和服务器端编程

[https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)

至于客户端脚本和服务器端脚本。我想如果你仔细阅读这个问题的所有答案，你就会有一个清晰的想法。

jQuery 是一个在内部使用 JavaScript 的框架。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-07-09T12:54:52.680

Javascript 不仅仅是一种客户端脚本语言。它被广泛用于它。但这不是它唯一的用途。它只是我们使用 Javascript 来实现我们的功能的方式。认为 Javascript 仅用于客户端脚本是一种误解。

# ios - 需要更改ipad导航栏上的后退按钮名称

> ID：15270654
> 
> 赞同：0
> 
> 时间：2013-03-07T12:00:00.430
> 
> 标签：ios, ipad, cocoa-touch

```
 UIBarButtonItem *barBtnItem = [[UIBarButtonItem alloc]initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(pop)];
    self.navigationItem.backBarButtonItem = barBtnItem; 
```

我将上面的代码放在 iphone 中它正在工作。当我为 ipad 尝试它时它不工作。可能是什么原因？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:38:09.193

这会更改`NavigationBar`文本`BackButton`，在推送新视图控制器之前执行：

```
UIViewController *myViewController = [[UIViewController alloc] init];
UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"My text" style:UIBarButtonItemStylePlain target:nil action:nil];
self.navigationItem.backBarButtonItem = backBarButtonItem;
[self.navigationController pushViewController:myViewController animated:YES]; 
```

它适用于 iPhone 和 iPad 设备。

看起来您将您的`UINavigationController`与 Interface Builder 相关联，您应该看看这个：

![在此处输入图像描述](../Images/c54b41c8557663e4514848aea34ad0ee.png)

# java - import org.apache.lucene.analysis.SimpleAnalyzer symbol not found Apache lucene 中的错误

> ID：15270659
> 
> 赞同：0
> 
> 时间：2013-03-07T12:00:18.980
> 
> 标签：java, jakarta-ee, lucene

大家好，我正在尝试在我的日志解析器项目中使用 Apache Lucene。现在我使用了下面的代码，但我无法导入 org.apache.lucene.analysis.SimpleAnalyzer 我已经包含了 lucene4.1 jar

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package logsearchengine;

import java.io.File;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.FSDirectory;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.FSDirectory;

/**
 *
 * @author maclean
 */
public class LogSearchEngine {

    private int index(File indexDir, File dataDir, String suffix) throws Exception {

        IndexWriter indexWriter = new IndexWriter(FSDirectory.open(indexDir),  new SimpleAnalyzer(),true,IndexWriter.MaxFieldLength.LIMITED);
        indexWriter.setUseCompoundFile(false);

        indexDirectory(indexWriter, dataDir, suffix);

        int numIndexed = indexWriter.maxDoc();
        indexWriter.optimize();
        indexWriter.close();

        return numIndexed;

    }

    private void indexDirectory(IndexWriter indexWriter, File dataDir, 
           String suffix) throws IOException {

        File[] files = dataDir.listFiles();
        for (int i = 0; i < files.length; i++) {
            File f = files[i];
            if (f.isDirectory()) {
                indexDirectory(indexWriter, f, suffix);
            }
            else {
                indexFileWithIndexWriter(indexWriter, f, suffix);
            }
        }

    }

    private void indexFileWithIndexWriter(IndexWriter indexWriter, File f, 
            String suffix) throws IOException {

        if (f.isHidden() || f.isDirectory() || !f.canRead() || !f.exists()) {
            return;
        }
        if (suffix!=null && !f.getName().endsWith(suffix)) {
            return;
        }
        System.out.println("Indexing file " + f.getCanonicalPath());

        Document doc = new Document();
        doc.add(new Field("contents", new FileReader(f)));        
        doc.add(new Field("filename", f.getCanonicalPath(), 
           Field.Store.YES, Field.Index.ANALYZED));

        indexWriter.addDocument(doc);

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
         File indexDir = new File("C:/index/");
        File dataDir = new File("C:/programs/eclipse/workspace/");
        String suffix = "java";

        SimpleFileIndexer indexer = new SimpleFileIndexer();

        int numIndex = indexer.index(indexDir, dataDir, suffix);

        System.out.println("Total files indexed " + numIndex);
    }
} 
```

我只添加了一个 jar 文件，即 lucene-core-4.1.0.jar。我无法导入样本分析器因此我无法创建索引编写器。我错过了什么。我是 lucene 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:35:37.030

您还需要[lucene-analyzers-common-4.1.0.jar](http://repo1.maven.org/maven2/org/apache/lucene/lucene-analyzers-common/4.1.0/)。

# asp.net - 是否可以将 IIS 默认文档请求的两个 MiniProfiler 结果结合起来？

> ID：15270666
> 
> 赞同：2
> 
> 时间：2013-03-07T12:00:35.470
> 
> 标签：asp.net, iis-7.5, mvc-mini-profiler

我在 IIS 7.5 的 ASP.NET 网站中设置了 MiniProfiler，默认文档设置为`Default.aspx`.

如果我`http://localhost/Default.aspx`直接浏览，只会正确显示一个结果。

当我浏览到`http://localhost/`两个 MiniProfiler 时，结果显示如下面的屏幕截图所示。第一个结果实际上是针对前一个请求的（注意时间戳相隔 25 秒）。第二个结果是针对这个请求的，但它似乎不是完整的图片，就像我刷新页面一样，响应包括另一个结果，类似于图中的第一个结果，但时间戳与原始请求相同。

有没有办法在一组结果中显示 MiniProfiler 结果，以及在 IIS 中使用默认文档时的正确响应？

![第一个结果](../Images/a876d6c1fdced5b8189ef40c7175abc9.png) ![第二个结果](../Images/78ef3a99706367bbbc85ccaed8812fd4.png)

# spring - Spring 配置查询

> ID：15270671
> 
> 赞同：1
> 
> 时间：2013-03-07T12:00:43.613
> 
> 标签：spring

我有一个弹簧配置文件，其条目如下...

```
<bean id="beanId" class="a.b.c.d.MyBean">
        <property name="firstProperty" value="report_{date}.xls"/>
</bean> 
```

在我的 java 代码的某个地方，我正在获取这个 bean，然后是它的属性“firstProperty”。

我有点好奇，当我得到属性“firstProperty”的值时，我得到了report_.xls，即report_20130307.xls

我已经搜索了我的所有代码，包括捆绑包、xml，但不清楚我们在哪里设置 {date} 和今天的时间戳。

你知道我们在哪里可以做到这一点吗？

谢谢

斋

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:07:23.807

它是属性占位符机制。

[在http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-context-pphc](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-context-pphc)上阅读更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:08:01.887

在大多数情况下，属性的值是使用表达式语言从属性文件中设置的。像

```
<bean id="dataSource" class="a.b.c.d.DataSource">
    <property name="databaseUrl" value="{db.url}"/>
</bean> 
```

或者如果属性是另一个 bean 的引用，例如 Object B 是 Object A 的成员变量。

```
<bean id="refA" class="a.b.c.d.A">
    <property name="b" ref="refB"/>
</bean>

<bean id="refB" class="a.b.c.d.B">
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T13:03:22.140

它非常简单的家伙......正如我们所知，每个属性都会调用setter。在我的情况下也是如此，在 bean 中，我们设置变量“firstProperty”+今天的时间戳，如下所示。

```
public void setfirstProperty(String firstProperty) {
    this.firstProperty = firstProperty + <methodToReplaceDateStringWithTimeStamp>;
} 
```

谢谢

斋

# perl - 在 perl 脚本中打开 IP 地址或 Web 链接并将值传递给它

> ID：15270676
> 
> 赞同：-6
> 
> 时间：2013-03-07T12:00:48.773
> 
> 标签：perl

我想在 perl 脚本中打开一个（IP 地址或网络链接）并将属性用户名的值传递给该 IP 地址或网络链接。请在我的以下 perl 脚本中添加必要的配置行并附上解释。

注意：在下面的脚本中，要执行一个 exe 文件，我现在不想要这个。相反，请将其替换为打开 ipaddress/weblink 的配置，然后将属性“username”的值传递给此链接或 IP。

```
#!/usr/bin/perl
use warnings;
use strict;
my $p;

print "Hello Radiator is executing the exe file via TKs perl scripting \n";

my $user_name = $p->getUserName;
open my $EX1_PIPE, '|-', "exelocation\file.exe $user_name" 
            or die "location\file.exe $!\n";

print $EX1_PIPE "$_\n" for ($user_name);

close $EX1_PIPE or die $!; 
```

谢谢，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:43:33.700

您提供的脚本不起作用。

1.  `$p`是未定义的。调用该变量的方法后，您将立即收到错误消息。
2.  该字符串`"\f"`将包含换页符，而不是字符序列反斜杠-f。反斜杠引入了转义序列，如果没有这样的转义序列，反斜杠将被忽略。请使用正斜杠分隔路径，即使在 Windows 上也是如此。
3.  您`$username`直接插入到命令字符串中。使用更多参数会更好`open`；即使`$username`包含空格，这也将有更好的工作机会：

    ```
    open my $EX1_PIPE, "|-", "exelocation/file.exe", $username or die ...; 
    ```

4.  您的`for ($username)`陈述没有意义，因为您正在对一个值使用循环。直接做`print {$EX1_PIPE} "$username\n"`。

要打开 HTTP 连接，我建议使用[LWP](https://metacpan.org/module/LWP)库。您可以使用[LWP::UserAgent](https://metacpan.org/module/LWP%3a%3aUserAgent)模块进行复杂的操作，或者使用[LWP::Simple](https://metacpan.org/module/LWP%3a%3aSimple)轻松`GET`创建文档。您可能希望将用户名作为查询字符串中的参数传递；查看[URI::Escape](https://metacpan.org/module/URI%3a%3aEscape)或类似模块以转义任何特殊字符。

代码最终的外观将取决于 HTTP 服务的接口。

通常，您的工作流程将如下所示：

1.  创建一个用户代理实例
2.  转义用户名，并构造 URL
3.  获取该地址
4.  检查有效响应，并返回解码结果。

有关示例，请参阅模块的文档。

# sql-server - 如何对 SSIS 中的输入表执行 SQL 查询

> ID：15270677
> 
> 赞同：1
> 
> 时间：2013-03-07T12:00:53.903
> 
> 标签：sql-server, ssis

我`script component`在 SSIS 中有四个（设置为源），它们生成四个输出表以供进一步处理。

我需要一些组件来允许我对输入​​表运行 SQL 命令，就好像 SQL 数据库中有表一样。

在上述场景中，我应该使用哪个组件（或一组组件）来查询我的输入并生成输出？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:56:03.627

你不能！

有一些组件可以让你“检查”你的数据，比如行采样，甚至是计数来计算行数，但是如果你需要对刚刚从文本文件中读取的数据集运行 SQL 查询，您需要将数据保存在临时表中，对它做任何您需要做的事情，然后将其发送到目的地。

如果您使用的是 SQL Server 2012，并且要对数据运行的查询不会更新它，则可以使用“数据分流”。它基本上所做的是将通过数据流路径的数据发送到文件磁盘上的文件。它很方便，但它更像是一种“调试”机制，您不想将它用于生产并依赖它来完成一项重要任务。它们也仅在您执行部署到 SSISDB 目录的包时可用。

# wcf - 使用 netTcp 绑定时添加服务引用

> ID：15270680
> 
> 赞同：14
> 
> 时间：2013-03-07T12:01:06.057
> 
> 标签：wcf, nettcpbinding, windows-hosting

我有一个 WCF 服务，我通过将其接口复制到示例客户端项目来**进行测试**。
现在我想通过添加服务引用来正常工作。
该服务托管在 Windows 托管中（使用`installUtil`）。
该服务有 2 个项目 - 外部（接口 + 数据合同）和内部（实现）。
由于某种原因，它没有 app.config，所以我手动添加了一个：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="ExecutionService" behaviorConfiguration="Default">
        <endpoint name="TCPEndpoint" address="" binding ="netTcpBinding" contract="Externals.IExecutionService"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:3040/ExecutionService"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

尝试从我的示例客户端添加服务引用会导致以下错误：

```
Metadata contains a reference that cannot be resolved: 'net.tcp://localhost:3040/ExecutionService/Externals.IExecutionService'.
There was no endpoint listening at net.tcp://localhost:3040/ExecutionService/Externals.IExecutionService that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

我在[这里](https://stackoverflow.com/questions/9581881/creating-wcf-service-without-svc-file)看到app.config中不需要。
我有点困惑，我是初学者`WCF`。
一个好的应用程序如何`WPF`引用我的服务？我希望该服务是 Windows 托管的，我不想和我一起拖动 dll。

**编辑**
我添加了一个元数据端点，我的 appconfig 现在看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="ExecutionService" behaviorConfiguration="Default">
        <endpoint name="TCPEndpoint" 
                  address="" 
                  binding ="netTcpBinding" 
                  contract="Externals.IExecutionService"/>
        <endpoint address="mex" 
                  binding="maxHttpBinding" 
                  contract="Externals.IExecutionService"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:3040/ExecutionService"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

我尝试使用添加服务引用`net.tcp://localhost:3040/ExecutionService`，但仍然遇到相同的错误。`net.tcp://localhost:3040/ExecutionService/Externals``net.tcp://localhost:3040/ExecutionService/Externals/IExecutionService`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-15T00:27:34.580

你需要做：

1.  maxHttpBinding -> mexTcpBinding - 你不能在 net.tcp 端点上使用 mexHttpBinding（而且它是 mex 不是 max）
2.  mex 端点的合同必须是 IMetadataExchange - 因为您希望通过此端点获得服务元数据
3.  httpGetEnabled="false" 因为没有 http 端点可以从中获取元数据
4.  当我在一个简单的控制台主机中测试解决方案时，我需要将 <service> 标记中的名称更改为 Externals.ExecutionService （但这取决于您如何实例化服务）

然后您的服务参考将在以下位置可用：`net.tcp://localhost:3040/ExecutionService/mex` 因为基地址`net.tcp://localhost:3040/ExecutionService`和 mex 端点的相对地址设置为`mex`

最终的 app.config 如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
<services>
  <service name="Externals.ExecutionService" behaviorConfiguration="Default">
    <endpoint name="TCPEndpoint"
              address=""
              binding ="netTcpBinding"
              contract="Externals.IExecutionService"/>
    <endpoint address="mex"
              binding="mexTcpBinding"
              contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:3040/ExecutionService"/>
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="Default">
      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel>
</configuration> 
```

为了快速测试配置是否正确，我使用控制台主机应用程序作为服务主机。程序.cs：

```
using System;
using System.ServiceModel;

namespace Externals
{
    class Program
    {
        static void Main(string[] args)
        {

            var sh=new ServiceHost(typeof(ExecutionService));
            sh.Open();
            Console.WriteLine("Service running press any key to terminate...");
            Console.ReadKey();
            sh.Close();
        }
    }
} 
```

运行控制台应用程序并尝试通过`net.tcp://localhost:3040/ExecutionService/mex`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:50:22.273

Change this:

```
<endpoint address="mex" 
                  binding="maxHttpBinding" 
                  contract="Externals.IExecutionService"/> 
```

To:

```
<endpoint address="mex" 
                  binding="mexTcpBinding" 
                  contract="IMetadataExchange"/> 
```

Notice it's not maxHttpBinding but mexTcpBinding, you had typo as well there.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T13:39:25.250

乍一看，您忘记[了元数据端点](http://msdn.microsoft.com/en-us/library/ms788760.aspx)

# android - 在列表中保存数据时出错

> ID：15270685
> 
> 赞同：0
> 
> 时间：2013-03-07T12:01:16.530
> 
> 标签：android

我有一个函数，我用它来计算我的线性函数的点数。我想返回所有值的列表。但是我在某个地方出现了错误，并且在我的列表中只保存了一个点。你能告诉我有什么问题吗？为什么在最后一张表中只保存一分？这是代码：

```
private List<PointF> forumlaOfFunctionCharts(Number[] points){
    List<PointF> listOfPoints = new ArrayList<PointF>();
    PointF xy = new PointF();
    float a = 0, b = 0, y = 0, y1 = 0, y2 = 0;
    for(int i = 0; i<points.length-1; i++){
        y1 = points[i].intValue();
        y2 = points[i+1].intValue();

        a = (y1-y2)/(i-(i+1));
        b = y1 - (a*i);

        Log.v("daneTabela", ""+a+", "+b);
        for(float j = i; j<=i+1; j=j+0.1f){
            y = a * j + b;
            xy.set(j, y);
            listOfPoints.add(xy);
            Log.v("daneTa", ""+xy.x+", "+xy.y);
        }
    }

    return listOfPoints;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:06:43.417

移入 `PointF xy = new PointF();`for 循环以在 ArrayList 中添加新对象：

```
 PointF xy ; 
 //..your code here...
 Log.v("daneTabela", ""+a+", "+b);
        for(float j = i; j<=i+1; j=j+0.1f){
            y = a * j + b;
             xy = new PointF();  //<<< create PointF object here
            xy.set(j, y);

            listOfPoints.add(xy);
            Log.v("daneTa", ""+xy.x+", "+xy.y);
        }
 //...your code here 
```

# xcode - Xcode模拟器添加iphone5

> ID：15270689
> 
> 赞同：1
> 
> 时间：2013-03-07T12:01:22.050
> 
> 标签：xcode, cordova, simulator

我想在 iphone 5 模拟器中测试我的 phonegap-jqm 应用程序。目前该应用程序在 ipad 6.0 模拟器中完美运行。

如何在 xcode 4.5.2 中添加/安装模拟器 (iphone5)

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:11:22.607

**iPhone 5（4 英寸视网膜）**

如果要在 iPhone 5 中测试，请在 iOS Simulator Hardware -> Device 中选择适当的配置

![在此处输入图像描述](../Images/1bc5c207f88aab8337cb74b36799cc55.png)

**下载 iOS 5 模拟器**

如果您想安装其他版本的 iOS 模拟器，请转到 Xcode 首选项 -> 下载并下载您想要的模拟器。

![在此处输入图像描述](../Images/daa590283534728cfb9a360543c93981.png)

确保您的项目目标是 5.x 或更低版本才能在 iOS 5.x 上运行

BR。
尤金

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:05:22.510

它应该默认安装。您应该检查您的应用程序是为 iPhone 和 iPad（通用）构建的，还是仅为 iPad 构建的。在下图中，该应用程序将同时在 iPhone 和 iPad 上运行，但在 iPad 上它将处于 iPhone 模拟模式，`2x`按下按钮。

![在此处输入图像描述](../Images/04e976d2c9c86eff9c35861d4a62b8ec.png)

如果它仅适用于 iPad，您将无法在 iPhone 上对其进行测试。也看看[这个问题](https://stackoverflow.com/questions/15254918/iphone-6-1-simulator/15254945#15254945)。

# java - 正则表达式匹配有或没有 http 和 https 的主机；

> ID：15270690
> 
> 赞同：0
> 
> 时间：2013-03-07T12:01:25.347
> 
> 标签：java, regex

我是 Java 的初学者，我一直在尝试找出与以下内容匹配的正则表达式：

1.  仅主机而不是 IP
2.  主机也可能带有 http 或 https 标签。
3.  主机可以有不同的 TLD。

我试过`[a-z0-9]+|([a-z0-9]+[-]+[a-z0-9]+))[.])+`了，但我没有得到我所期望的。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:04:53.217

```
public static void main(String[] args) {
Pattern pattern = Pattern.compile ("(?:https?://)?(?:[-a-zA-Z0-9_]+\\.)*[-a-zA-Z0-9_]*[-a-zA-Z_][-a-zA-Z0-9_]*(?:\\.[-a-zA-Z0-9_]+)*");

System.out.println(pattern.matcher("127.0.0.1").matches()); // false
System.out.println(pattern.matcher("1.0.0.127.in-addr.arpa").matches()); // true
System.out.println(pattern.matcher("localhost").matches()); // true
System.out.println(pattern.matcher("1-2-3-4").matches()); // true
System.out.println(pattern.matcher("http://1.0.0.127").matches()); // false
System.out.println(pattern.matcher("https://1.0.0.127").matches()); // false
System.out.println(pattern.matcher("ftp://1.0.0.127.in-addr.arpa").matches()); // false
System.out.println(pattern.matcher("http://1.0.0.127.in-addr.arpa").matches()); // true
System.out.println(pattern.matcher("https://1.0.0.127.in-addr.arpa").matches()); // true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:16:03.947

不确定您要完成什么。您需要主机部分，但只需要已解析的部分，即不允许使用 IP 地址。为什么你总是想要它？那么可选的端口号呢？那么可能的登录信息呢？如果您想对解析的数据做任何严肃的事情，我的建议是使用`java.net.URL`（或）对象。`URI`

如果您只想玩正则表达式，请更好地指定您的要求，因为根据输入文本，可能没有正则表达式就足够了。考虑以下输入：

```
Lorem ipsum.Dolor sit amen 
```

应该`ipsum.Dolor`被接受为有效的主机吗？它没有`http://`协议规范，也不是 IP 地址，因此根据您的要求，它应该匹配。

# python - 默认为python类方法中的类变量？

> ID：15270693
> 
> 赞同：3
> 
> 时间：2013-03-07T12:01:28.493
> 
> 标签：python, class, default-value

我正在编写一个类方法，如果没有提供其他值，我想使用类变量

```
def transform_point(self, x=self.x, y=self.y): 
```

但是......这似乎不起作用：

```
NameError: name 'self' is not defined 
```

我觉得有一种更聪明的方法可以做到这一点。你会怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:08:10.103

您需要使用标记值，然后将其替换为所需的实例属性。`None`是一个不错的选择：

```
def transform_point(self, x=None, y=None):
    if x is None:
        x = self.x
    if y is None:
        y = self.y 
```

请注意，函数签名只执行*一次*；您不能将表达式用于默认值，并期望它们随着每次调用函数而改变。

如果您*必须*能够设置`x`或`y`，`None`那么您需要使用不同的、唯一的单例值作为默认值。在这种情况下，使用的实例`object()`通常是一个很好的哨兵：

```
_sentinel = object()

def transform_point(self, x=_sentinel, y=_sentinel):
    if x is _sentinel:
        x = self.x
    if y is _sentinel:
        y = self.y 
```

现在你也可以打电话`.transform_point(None, None)`了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:07:17.720

```
def transform_point(self, x=None, y=None):
    if x is None:
        x = self.x
    if y is None:
        y = self.y 
```

ETC

# c - 跟踪/监控系统

> ID：15270697
> 
> 赞同：0
> 
> 时间：2013-03-07T12:01:36.030
> 
> 标签：c, security, shell, ubuntu, monitoring

我一直在开发一个应用程序，它将跟踪办公室员工的工作历史。

因此，我需要跟踪我的用户 Ubuntu 用户的以下详细信息。

*   应用程序打开。
*   应用程序运行的持续时间。
*   如果应用程序类似于 VLC 之类的文本编辑器/视频编解码器 - 打开了哪些文件以及持续了多长时间。
*   我还想跟踪可移动媒体上文件/文件夹的复制/粘贴历史记录。

谁能帮我建议 C/shell/Perl 中的头文件和函数，这将帮助我跟踪这个？

**请注意：为了隐私，我不希望对击键进行监控。**

可能无法满足其中一些要求，但我们将不胜感激有关可能功能的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:05:23.510

查看“proc”的手册页。procfs 是安装在 /proc 上的文件系统。在该目录下是每个进程的文件夹，按进程 ID。您感兴趣的是每个进程的 fd 文件夹。例如，对于 PID 为 5 的进程，fd 文件夹为

```
/proc/5/fd 
```

fd 文件夹包含进程打开的每个文件句柄的符号链接。要侦听 proc 文件系统上的更改（正在启动的新进程，正在打开的新文件），我建议使用 inotify。但是，它确实有关于 procfs的[限制。](http://inotify.aiken.cz/?section=inotify&page=faq)

# python - 在除了打开（文件）

> ID：15270703
> 
> 赞同：0
> 
> 时间：2013-03-07T12:01:44.070
> 
> 标签：python, python-2.7

在 try...except 块中，我想将异常错误消息记录到 except 路径中的文件中。

```
try:
   doc = etree.parse(urllib2.urlopen(url))
except Exception, e:

   print '%s: %s' % (e, url)
   with open('error.txt', 'a') as f:
     f.write('%s:%s\n' % url, e)
   return 
```

打印显示错误，但 with open ... f.write 未执行。

在同一个脚本中，relaxng 验证被写入文件

```
if not RELAXNG.validate(doc):
  with open('error.txt', 'a') as f:
    f.write('%s\n' % RELAXNG.error_log)
  return 
```

谁能给我解释一下，为什么

```
with open('myfile.txt', 'a') as f
  f.write( ... 
```

可以在*if*语句中使用，但不能在*except*中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:06:10.153

`write()`不接受多个参数；您可能缺少括号：

```
f.write('%s:%s\n' % (url, e)) 
```

除此之外，请使用*绝对*路径，而不是相对路径，否则您可以轻松地将文件写入意外的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:07:36.527

里面的文件操作`except`工作正常。

```
>>> try:
    raise SyntaxError("Hello")
except Exception:
    with open("in.txt") as f:
        print "F"

F 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:11:33.657

它应该工作。试试这个例如：

```
try:
    raise Exception
except Exception:
    with open('error.txt', 'a') as f:
        f.write('foobar') 
```

如果您运行上述程序，您将看到 foobar 已写入文件。

error.txt 是否可由您的进程写入？它没有写入您的文件是有原因的，但这不是因为在 except 块中不允许使用“with”文件上下文。

# android - Android 填充布局中的空白区域

> ID：15270704
> 
> 赞同：1
> 
> 时间：2013-03-07T12:01:47.697
> 
> 标签：android, xml

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout 
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:background="@color/skyblue" >

        <TextView
          android:id="@+id/tvPlaceHeader"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/places"
          android:layout_margin="10dp"
          android:layout_gravity="center"
          android:textAppearance="?android:attr/textAppearanceLarge" />

      <ImageView
         android:contentDescription="@string/search"
         android:id="@+id/ivPlace"
         android:layout_gravity="center"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/logo" />

     <TextView
         android:contentDescription="@string/search"
         android:id="@+id/tvTrivia"
         android:textSize="14sp"
         android:textStyle="bold"
         android:layout_margin="10dp"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="@string/search" />

    </LinearLayout>
</ScrollView> 
```

截图：

![在此处输入图像描述](../Images/93520652db50fd64af609bebde04338c.png)

我的问题是，为什么它没有覆盖整个布局？我的意思是它下面有一个空白，但我在我的 xml 中声明它的背景颜色为蓝色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:04:41.903

更改您的内部 LinearLayout 高度

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="fill_parent" // CHANGED LINE
    android:orientation="vertical"
    android:background="@color/skyblue" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:07:12.150

从 LinearLayout 中删除此行**android:background="@color/skyblue"** 并写入 ScrollView

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/skyblue" 
 > 
```

# r - 可以从 knitr 生成 MediaWiki 标记吗？

> ID：15270706
> 
> 赞同：3
> 
> 时间：2013-03-07T12:01:52.570
> 
> 标签：r, mediawiki, knitr, wiki, markup

我正在制作一份报告，该报告将以 pdf 格式发布。它涉及统计数据，尤其是 R 的使用。因此我使用的是 knitr。我也想将它发布到一个维基上，我只需付出最少的额外努力！

是否可以从 knitr 获取 wiki 标记（MediaWiki）输出？

或者，如果我从 knitr 生成 HTML，是否可以将 HTML 直接提供给 wiki？

这个问题与[这篇文章](https://stackoverflow.com/questions/11068603/what-command-converts-knitr-r-markdown-into-stack-exchange-friendly-markdown)有关。Wiki 标记规则在[此处](http://en.wikipedia.org/wiki/Help:HTML_in_wikitext)，但我不太清楚是否支持完整的 HTML。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:10:13.793

您当然可以在`knitr`输出挂钩中定义标记规则：http: [//yihui.name/knitr/hooks](http://yihui.name/knitr/hooks)作为一个简单的示例，您可以使用以下代码突出显示源代码`<syntaxhighlight>`：

```
knit_hooks$set(source = function(x, options) {
  sprintf('<syntaxhighlight lang=%s>%s</syntaxhighlight>', options$engine, x)
}) 
```

您可以自由设计其余的输出挂钩。但正如 Ben Bolker 指出的那样，我认为你最好使用 Markdown，并通过 Pandoc 将其转换为 Mediawiki。

# html - 在html中格式化ol列表计数

> ID：15270710
> 
> 赞同：2
> 
> 时间：2013-03-07T12:02:01.863
> 
> 标签：html, css, html-lists

如何仅格式化`list-index`使用css的背景？

```
<ol style="list-style-type:decimal">
    <li>Tagesordnung</li>
    <li>Pause</li>
    <li>Vorbesprechung</li>
    <li>Mittagessen</li>
    <li>Vortrag zum Thema "Komme nie zu fr&uuml;h zur Sache!"</li>
    <li>Pause</li>
    <li>Gem&uuml;tlicher Ausklang</li>
</ol> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:06:49.093

使用css`list-style-position: outside;`就够了吗？

您的 HTML 代码的 CSS：

```
ol{
    background-color: red;
    list-style-position: outside;
}
ol li{
    background-color: white;
} 
```

这是 jsfiddle 示例。
[http://jsfiddle.net/RGKnu/1/](http://jsfiddle.net/RGKnu/1/)

PS如果你想在背景和列表项文本之间有更多的空间，你可以使用`text-indent` 带有选择器的css属性`li`。

# youtube-api - Youtube API > 视频搜索 > lr 参数不起作用

> ID：15270711
> 
> 赞同：0
> 
> 时间：2013-03-07T12:02:05.057
> 
> 标签：youtube-api

从今天起 ：

“ [http://gdata.youtube.com/feeds/api/videos?q=nexus&orderby=relevance&start-index=1&max-results=5&v=2&alt=jsonc&lr=fr](http://gdata.youtube.com/feeds/api/videos?q=nexus&orderby=relevance&start-index=1&max-results=5&v=2&alt=jsonc&lr=fr) ”

不给我任何结果，因为“ [http://gdata.youtube.com/feeds/api/videos?q=nexus&orderby=relevance&start-index=1&max-results=5&v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/videos?q=nexus&orderby=relevance&start-index=1&max-results=5&v=2&alt=jsonc) ”确实会返回结果。

我注意到它可以在我的家用笔记本电脑上运行，但不能在我的生产服务器上运行。youtube是否可以将我的服务器IP列入黑名单？但是我得到了没有 LR 参数的结果......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:49:05.127

好的，我知道了，

gdata.youtube.com => 有很多 IP，其中 1 个 IP 有问题；-(

所以解决方案是编辑 /etc/hosts 并在服务器上手动输入我的家庭 youtube IP。

# sql - 使用子查询选择

> ID：15270715
> 
> 赞同：0
> 
> 时间：2013-03-07T12:02:19.537
> 
> 标签：sql, sql-server, tsql, stored-procedures

我的过程中有两个选择，但我只想选择第一个 Select 中的 IDENTIFICACAO_A 与第二个 Select 中的 IDENTIFICACAO_B 相同的行。

询问：

```
SELECT
(CONVERT(VARCHAR,fic.reg_codigo_lotado_atual) + '.' + CONVERT(VARCHAR,fic.cla_codigo) + '.' + CONVERT(VARCHAR,fic.reg_codigo_lotado_origem) + '.' + CONVERT(VARCHAR,fic.fic_numero_livro) + '/' + CONVERT(VARCHAR,fic.fic_versao)) AS IDENTIFICACAO_A,
cla.cla_nome,
fic.fic_ca,
fic.fic_fa,
fic.reg_codigo_lotado_atual,
fic.cla_codigo,
fic.reg_codigo_lotado_origem,
fic.fic_numero_livro,
fic.fic_versao,
fic.fic_ato_oficial,
fic_localizacao_numero,
fic_localizacao_data_em,
qua.qua_nome,
fic.fic_localizacao_do,
adm.adm_codigo_ua,
adm.adm_codigo_uv,
adm.adm_digito,
adm.adm_decodificada,
adm.adm_sigla,
form.for_nome,
fic.fic_ocupacao_data,
fic.fic_ocupacao_do,
fic.fic_ocupacao_data_cessacao,
fic.fic_ocupacao_do_cessacao,
ser.ser_nome,
ser.ser_rg,
ser.ser_cpf,
fic.fic_ocupacao_observacao,
esp.esp_descricao,
fic.fic_alteracao_vigencia,
fic.fic_alteracao_decreto,
fic.fic_alteracao_data,
fic.fic_alteracao_qua_codigo,
fic.fic_alteracao_do,
fic.fic_situacao_vc,
fic.fic_situacao_pp,
fic.fic_situacao_ocupado,
fic.fic_nova_identificacao,
fic.fic_observacoes_gerais
FROM
SICAF.dbo.tab_fichas AS fic
 INNER JOIN
SICAF.dbo.tab_classes AS cla ON cla.cla_codigo = fic.cla_codigo
 LEFT JOIN
SICAF.dbo.tab_sub_quadros AS qua ON qua.qua_codigo = fic.qua_codigo
 LEFT JOIN
SICAF.dbo.tab_unidade_adm AS adm ON adm.adm_codigo = fic.adm_codigo
 LEFT JOIN
SICAF.dbo.tab_formas AS form ON form.for_codigo = fic.for_codigo
 LEFT JOIN
SICAF.dbo.tab_servidores AS ser ON ser.ser_codigo = fic.ser_codigo
 LEFT JOIN
SICAF.dbo.tab_especies AS esp ON esp.esp_codigo = fic.esp_codigo

SELECT
(CONVERT(VARCHAR,fic.reg_codigo_lotado_atual) + '.' + CONVERT(VARCHAR,fic.cla_codigo) + '.' + CONVERT(VARCHAR,fic.reg_codigo_lotado_origem) + '.' + CONVERT(VARCHAR,fic.fic_numero_livro) + '/' + CONVERT(VARCHAR,fic.fic_versao)) AS IDENTIFICACAO_B,
cla.cla_nome,
fic.fic_ca,
fic.fic_fa,
fic.reg_codigo_lotado_atual,
fic.cla_codigo,
fic.reg_codigo_lotado_origem,
fic.fic_numero_livro,
fic.fic_versao,
fic.fic_ato_oficial,
fic_localizacao_numero,
fic_localizacao_data_em,
qua.qua_nome,
fic.fic_localizacao_do,
adm.adm_codigo_ua,
adm.adm_codigo_uv,
adm.adm_digito,
adm.adm_decodificada,
adm.adm_sigla,
form.for_nome,
fic.fic_ocupacao_data,
fic.fic_ocupacao_do,
fic.fic_ocupacao_data_cessacao,
fic.fic_ocupacao_do_cessacao,
ser.ser_nome,
ser.ser_rg,
ser.ser_cpf,
fic.fic_ocupacao_observacao,
esp.esp_descricao,
fic.fic_alteracao_vigencia,
fic.fic_alteracao_decreto,
fic.fic_alteracao_data,
fic.fic_alteracao_qua_codigo,
fic.fic_alteracao_do,
fic.fic_situacao_vc,
fic.fic_situacao_pp,
fic.fic_situacao_ocupado,
fic.fic_nova_identificacao,
fic.fic_observacoes_gerais
FROM
SICAF2.dbo.tab_fichas AS fic
 INNER JOIN
SICAF2.dbo.tab_classes AS cla ON cla.cla_codigo = fic.cla_codigo
 LEFT JOIN
SICAF2.dbo.tab_sub_quadros AS qua ON qua.qua_codigo = fic.qua_codigo
 LEFT JOIN
SICAF2.dbo.tab_unidade_adm AS adm ON adm.adm_codigo = fic.adm_codigo
 LEFT JOIN
SICAF2.dbo.tab_formas AS form ON form.for_codigo = fic.for_codigo
 LEFT JOIN
SICAF2.dbo.tab_servidores AS ser ON ser.ser_codigo = fic.ser_codigo
 LEFT JOIN
SICAF2.dbo.tab_especies AS esp ON esp.esp_codigo = fic.esp_codigo 
```

我能做些什么来返回两个选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:38:12.990

您可以使用 ：

```
select your_fields from table1

intersect

select your_fields from table2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:12:19.727

使用联合。

将两个查询的键列重命名为相同，我还建议将两个查询保存为临时表。

因此，假设您将第一个查询存储在临时表中`q1`，第二个查询存储在`q2`其中，两者的键列都是`id`.

```
select from q1 where q1.id in (select id from q2)
union
select from q2 where q2.id in (select id from q1) 
```

希望我很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:22:25.363

您可以在两个查询之间使用内部联接：

```
Select * From 
(
SELECT
(CONVERT(VARCHAR,fic.reg_codigo_lotado_atual) + '.' + CONVERT(VARCHAR,fic.cla_codigo) + '.' + CONVERT(VARCHAR,fic.reg_codigo_lotado_origem) + '.' + CONVERT(VARCHAR,fic.fic_numero_livro) + '/' + CONVERT(VARCHAR,fic.fic_versao)) AS IDENTIFICACAO_A,
cla.cla_nome,
fic.fic_ca,
fic.fic_fa,
fic.reg_codigo_lotado_atual,
fic.cla_codigo,
fic.reg_codigo_lotado_origem,
fic.fic_numero_livro,
fic.fic_versao,
fic.fic_ato_oficial,
fic_localizacao_numero,
fic_localizacao_data_em,
qua.qua_nome,
fic.fic_localizacao_do,
adm.adm_codigo_ua,
adm.adm_codigo_uv,
adm.adm_digito,
adm.adm_decodificada,
adm.adm_sigla,
form.for_nome,
fic.fic_ocupacao_data,
fic.fic_ocupacao_do,
fic.fic_ocupacao_data_cessacao,
fic.fic_ocupacao_do_cessacao,
ser.ser_nome,
ser.ser_rg,
ser.ser_cpf,
fic.fic_ocupacao_observacao,
esp.esp_descricao,
fic.fic_alteracao_vigencia,
fic.fic_alteracao_decreto,
fic.fic_alteracao_data,
fic.fic_alteracao_qua_codigo,
fic.fic_alteracao_do,
fic.fic_situacao_vc,
fic.fic_situacao_pp,
fic.fic_situacao_ocupado,
fic.fic_nova_identificacao,
fic.fic_observacoes_gerais
FROM
SICAF.dbo.tab_fichas AS fic
 INNER JOIN
SICAF.dbo.tab_classes AS cla ON cla.cla_codigo = fic.cla_codigo
 LEFT JOIN
SICAF.dbo.tab_sub_quadros AS qua ON qua.qua_codigo = fic.qua_codigo
 LEFT JOIN
SICAF.dbo.tab_unidade_adm AS adm ON adm.adm_codigo = fic.adm_codigo
 LEFT JOIN
SICAF.dbo.tab_formas AS form ON form.for_codigo = fic.for_codigo
 LEFT JOIN
SICAF.dbo.tab_servidores AS ser ON ser.ser_codigo = fic.ser_codigo
 LEFT JOIN
SICAF.dbo.tab_especies AS esp ON esp.esp_codigo = fic.esp_codigo
)tbl1

Inner Join 
(
SELECT
(CONVERT(VARCHAR,fic.reg_codigo_lotado_atual) + '.' + CONVERT(VARCHAR,fic.cla_codigo) + '.' + CONVERT(VARCHAR,fic.reg_codigo_lotado_origem) + '.' + CONVERT(VARCHAR,fic.fic_numero_livro) + '/' + CONVERT(VARCHAR,fic.fic_versao)) AS IDENTIFICACAO_B,
cla.cla_nome,
fic.fic_ca,
fic.fic_fa,
fic.reg_codigo_lotado_atual,
fic.cla_codigo,
fic.reg_codigo_lotado_origem,
fic.fic_numero_livro,
fic.fic_versao,
fic.fic_ato_oficial,
fic_localizacao_numero,
fic_localizacao_data_em,
qua.qua_nome,
fic.fic_localizacao_do,
adm.adm_codigo_ua,
adm.adm_codigo_uv,
adm.adm_digito,
adm.adm_decodificada,
adm.adm_sigla,
form.for_nome,
fic.fic_ocupacao_data,
fic.fic_ocupacao_do,
fic.fic_ocupacao_data_cessacao,
fic.fic_ocupacao_do_cessacao,
ser.ser_nome,
ser.ser_rg,
ser.ser_cpf,
fic.fic_ocupacao_observacao,
esp.esp_descricao,
fic.fic_alteracao_vigencia,
fic.fic_alteracao_decreto,
fic.fic_alteracao_data,
fic.fic_alteracao_qua_codigo,
fic.fic_alteracao_do,
fic.fic_situacao_vc,
fic.fic_situacao_pp,
fic.fic_situacao_ocupado,
fic.fic_nova_identificacao,
fic.fic_observacoes_gerais
FROM
SICAF2.dbo.tab_fichas AS fic
 INNER JOIN
SICAF2.dbo.tab_classes AS cla ON cla.cla_codigo = fic.cla_codigo
 LEFT JOIN
SICAF2.dbo.tab_sub_quadros AS qua ON qua.qua_codigo = fic.qua_codigo
 LEFT JOIN
SICAF2.dbo.tab_unidade_adm AS adm ON adm.adm_codigo = fic.adm_codigo
 LEFT JOIN
SICAF2.dbo.tab_formas AS form ON form.for_codigo = fic.for_codigo
 LEFT JOIN
SICAF2.dbo.tab_servidores AS ser ON ser.ser_codigo = fic.ser_codigo
 LEFT JOIN
SICAF2.dbo.tab_especies AS esp ON esp.esp_codigo = fic.esp_codigo
)tbl2
On tbl1.IDENTIFICACAO_A=tbl2.IDENTIFICACAO_B 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:08:49.263

你可以`IN`在这里使用。T1 是来自第一个查询的连接表组，T2 是来自第二个查询的连接表组。语法如下。

```
Select col1,col2,...
From T1
Where IDENTIFICACAO_A in (
   Select IDENTIFICACAO_B
   From T2
) 
```

您可以用它们的连接结果替换`IDENTIFICACAO_A`和列名`IDENTIFICACAO_B`

如果`T1`和`T`2（如上所述）相同，则；

```
SELECT X AS IDENTIFICACAO_A,
   cla.cla_nome,
   fic.fic_ca,...
FROM T1
WHERE X = Y 
```

您可以用它们的字符串连接函数替换`X`和。`Y`

# php - 在构建逻辑时需要帮助

> ID：15270717
> 
> 赞同：0
> 
> 时间：2013-03-07T12:02:23.150
> 
> 标签：php

我需要以数组的形式获取字符串中字符的所有位置。我知道 php 函数`strpos()`，但它不接受数组作为参数。

这是必需的：

```
$name = "australia";            //string that needs to be searched
$positions_to_find_for = "a";   // Find all positions of character "a" in an array 
$positions_array = [0,5,8];     // This should be the output that says character "a" comes at positions 0, 5 and 8 in string "australia" 
```

**问题：**什么循环可以帮助我构建一个可以帮助我实现所需输出的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:04:55.990

无需循环

```
$str = 'australia';
$letter='a';
$letterPositions = array_keys(
    array_intersect(
        str_split($str),
        array($letter)
    )
);

var_dump($letterPositions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:08:09.353

您可以使用 a`for`来循环该字符串：

```
$name = "australia";
$container = array();
$search = 'a';
for($i=0; $i<strlen($name); $i++){
    if($name[$i] == $search) $container[] = $i;
}

print_r($container);

/*
Array
(
    [0] => 0
    [1] => 5
    [2] => 8
)
*/ 
```

[键盘示例](http://codepad.org/Z7Clh4NZ)

# ruby-on-rails - 运行黄瓜文件的shell脚本

> ID：15270718
> 
> 赞同：0
> 
> 时间：2013-03-07T12:02:27.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber, capybara

我有大约 50 个功能文件，我希望测试团队运行它们。我不希望他们一次运行所有文件，也不希望他们获得运行黄瓜的先决条件，即..`bundle install ...rake db:migrate...service postgresql start...... etc`

我想制作一个 shellscript 文件以便他们可以执行它，选择要运行的文件（所有或其他单个文件）的选项，然后脚本将执行先决条件并执行文件并将日志输出到指定文件夹。我想做一个 sh 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:44:08.050

当然，我不知道您的开发环境，也不知道您需要执行哪些命令才能运行测试，但这里有一个示例 shell 脚本：

```
#!/bin/sh

bundle install
rake db:migrate
rake db:test:prepare
rake cucumber "$@" 
```

像这样执行脚本：

```
./script_name.sh 
```

有论据：

```
./script_name.sh features/registration.feature 
```

该`"$@"`部分将传递任何参数，如 features/registration.feature 到`rake cucumber`.

# java - Netbeans Java GUI Builder - 如何防止 pack()？

> ID：15270719
> 
> 赞同：0
> 
> 时间：2013-03-07T12:02:27.680
> 
> 标签：java, swing, netbeans, builder, pack

我正在使用 Netbeans GUI Builder 构建一个应用程序，并且我希望将主 JFrame 最大化，因此设置了：

```
setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

但是，Netbeans 调用 pack() 会导致 JFrame 大小减小。我知道我可以在调用 pack() 后再次使用上面的代码，但无论如何我可以阻止 Netbeans 插入 pack() 行，这样我就可以让我的代码更干净一点？

（Netbeans 将它的 pack() 行放在一个您无法编辑的块中，所以我不能以通常的方式简单地删除它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T17:18:53.993

转到 JFrame 的“设计”，在导航器窗口中单击 JFrame，然后在“属性”选项卡中的“代码”上单击

> 表单大小策略 -> 无调整大小代码

那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:33:49.650

可以强制 GUI 设计者做你想做的事。`Main.JFrame`作为替代方案，在此[示例](https://stackoverflow.com/a/2561540/230513)中管理您自己的顶级容器，并使用设计器来管理各个面板。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-07T12:10:53.457

可能带有布局的东西会更好。但我的解决方案：覆盖 Window.pack :)

```
@Override
public void pack() {
} 
```

# c# - 用于订单屏幕的 Ajax 或 SignalR

> ID：15270721
> 
> 赞同：1
> 
> 时间：2013-03-07T12:02:37.677
> 
> 标签：c#, jquery, asp.net-mvc-4, signalr

目前我有一个用户盯着仪表板的应用程序，仪表板将显示该用户的新订单。我已经推出了测试应用程序，大多数用户都抱怨时间延迟和崩溃。

目前我正在使用`jQuery`和 Ajax 使用`setInterval()`，然后`Ajax`调用以获取订单并每 30 秒更新一次屏幕。但是，在某些订单很多的情况下，`Ajax`调用会重叠。

我偶然发现了一项对我来说似乎是解决方案的新技术，`SignalR`但我查看了示例并且没有看到任何关于性能的评论。

问题 - 性能如何，它是否是当前上述问题的更好解决方案，是否可以将其配置为仅针对特定用户，并且可以对当前登录用户的 ID 执行此操作吗？我正在使用 MVC4。

任何意见将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:21:30.813

您可以使用 SignalR 向特定客户端/用户发送消息。查看此处的文档以了解更多信息：[https](https://github.com/SignalR/SignalR/wiki) ://github.com/SignalR/SignalR/wiki 。SignalR 允许您从客户端和服务器进行远程过程调用 (RPC)，并且您应该能够几乎立即将任何通知/新订单推送到客户端。

SignalR 尚无任何已发布的性能指标，但您可以对其进行测试以了解处理流量的效率。

# c - pcre C API 仅返回第一个匹配项

> ID：15270722
> 
> 赞同：3
> 
> 时间：2013-03-07T12:02:46.587
> 
> 标签：c, regex, pcre

```
#include <stdio.h>
#include <string.h>
#include <pcre.h>
#define OVECCOUNT 30
#define SRCBUFFER 1024*1024

int main(int argc, char **argv){
pcre *re;
const char *error;
int erroffset;
int ovector[OVECCOUNT];
int rc, i;
if (argc != 2){
    fprintf(stderr, "Usage : %s PATTERN\n", argv[0]);
    return 1;
}

char *src=malloc(SRCBUFFER);
int srclen = fread(src, sizeof(char), SRCBUFFER, stdin);
re = pcre_compile(argv[1], 0, &error, &erroffset, NULL);
if (re == NULL){
    fprintf(stderr, "PCRE compilation failed at offset %d: %s\n", erroffset, error);
    return 1;
}

rc = pcre_exec(re, NULL, src, srclen, 0, 0, ovector, OVECCOUNT);
if (rc < 0){
    if (rc == PCRE_ERROR_NOMATCH) fprintf(stderr, "Sorry, no match...\n");
    else fprintf(stderr, "Matching error %d\n", rc);
    return 1;
}

for (i = 0; i < rc; i++){
    char *substring_start = src + ovector[2 * i];
    int substring_length = ovector[2 * i + 1] - ovector[2 * i];
    fprintf(stdout, "%2d: %.*s\n", i, substring_length, substring_start);
}
return 0;
} 
```

运行

> echo "苹果香蕉非洲" | ./program '\ba\w+\b'

它打印

> 0：苹果

我尝试使用 PCRE_MULTILINE 选项，但没有用。如何让它打印所有匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:02:44.977

听起来您正在寻找的内容相当于 Perl`/g`正则表达式标志，以尽可能多地重复匹配并返回所有匹配的结果。我不相信 PCRE 有这样的东西。

相反，您需要在`pcre_exec`. 每次调用它，它都会返回匹配开始和结束的字节偏移量。然后，您希望`pcre_exec`从匹配结束时开始在字符串上再次运行。重复直到`pcre_exec`不匹配。

# html - 由于使用 CSS 更改页面大小，当 div 重新对齐时动态添加边距

> ID：15270729
> 
> 赞同：3
> 
> 时间：2013-03-07T12:02:55.680
> 
> 标签：html, css

我有一个页面，其中我有一个内联块中的 div 结构。现在每个块 div 都有一个最小尺寸，当窗口尺寸减小到小于所有内部 div 最小宽度的总和时，我将一些元素移动到下一行。我现在希望将填充添加到单独移动到下一行的 div 中，并且我不希望使用 js 来实现这一点。我怎样才能在 CSS 中做到这一点？

```
<div width="100%">
   <div style="display:inline-block; width=33%; max-width=300px; min-width=135px">
   <div style="display:inline-block; width=33%; max-width=300px; min-width=135px">
   <div style="display:inline-block; width=33%; max-width=300px; min-width=135px">
</div> 
```

渲染

* * *

```
 -------------------   -------------------  -------------------
   |                   | |                   ||                   |
   |                   | |                   ||                   |
   |     div1          | |     div 2         ||      div 3        |
   |                   | |                   ||                   |
    -------------------   -------------------  ------------------- 
```

* * *

受限空间

* * *

```
 -------------------   ------------------- 
   |                   | |                   |
   |                   | |                   |
   |     div1          | |     div 2         |
   |                   | |                   |
    -------------------   ------------------- 
    <^margin 5px inserted^>
    -------------------
   |                   | 
   |                   | 
   |       div 3       | 
   |                   | 
    ------------------- 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:30:03.263

您可以使用媒体查询根据视口的宽度应用 CSS 规则。

```
@media all and (max-width: _width_value_) {
    /* When the screen size is less than or equal to _width_value_ the css rules here will apply */
} 
```

这是一个[jsfiddle](http://jsfiddle.net/mvJBk/)为您的原始问题提供解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:09:58.603

`margin-bottom`可以解决问题，但是，即使所有 div 都在一行上，它也会存在。没有 JavaScript 恕我直言，别无他法：

```
.innderDiv {
    display:inline-block;
    width: 33%;
    max-width: 300px;
    min-width: 135px;
    border: 1px dashed;
    margin-bottom: 5px;
} 
```

[http://jsfiddle.net/ruslans/KNDFE/](http://jsfiddle.net/ruslans/KNDFE/)

# qt - QMake SUBDIRS 项目：如何从顶级 Makefile 调用 release-clean？

> ID：15270736
> 
> 赞同：6
> 
> 时间：2013-03-07T12:03:18.187
> 
> 标签：qt, makefile, qmake, nmake

我正在使用使用[SUBDIRS](http://doc.qt.digia.com/4.7/qmake-variable-reference.html#subdirs)模板的 Qt .pro 文件（主要遵循[这个答案](https://stackoverflow.com/a/1417859/808151)）。

此外，我正在使用`qmake -recursive MyProject.pro`and构建我的解决方案`nmake Release`。

现在我想提供一个单独的批处理文件来清理发布输出和元文件（虽然不是调试文件）。

问题是，对于顶级`Makefile`，只有`clean`and`distclean`是由`qmake`while 为子目录生成的，还有`release-clean`and `debug-clean`（文件夹也包含一个额外的`Makefile.Debug`and `Makefile.Release`）。

我想做的是打电话

```
nmake Makefile release-clean 
```

从批处理脚本。但是，顶级 makefile 不包含此配置。

现在我可以手动为每个子项目调用等号线，但这显然是我最不喜欢的选择。

有没有办法让 qmake`release-clean`为顶级 makefile 生成目标，或者有另一种方法来简单地清理发布文件？

PS：我使用的是 nmake，所以是的，我在 Windows (XP) 上并使用 MSVC (2008)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:38:49.293

以下批处理脚本完成了这项工作：

```
REM set up environment
SET VISUALDIR=C:\PROGRA~1\MICROS~1.0
PUSHD %VISUALDIR%\VC
CALL vcvarsall.bat x86
POPD

REM clean solution
msbuild yoursolution.sln /p:Configuration=Release /t:clean

REM and you may want to add a build command :
msbuild yoursolution.sln /p:Configuration=Release 
```

# hibernate - 复杂的存储过程，休眠和刷新

> ID：15270744
> 
> 赞同：2
> 
> 时间：2013-03-07T12:03:36.693
> 
> 标签：hibernate, stored-procedures, refresh

我正在开发一个与 Hibernate 一起使用的应用程序，它还使用存储过程来处理一些业务逻辑和数据库操作。

这里的问题是 Hibernate 对象在存储过程 (sp) 执行后没有得到更新。我知道这是很自然的，并且我已经读过我应该在要刷新的实体上使用 session.refresh(obj) 方法（或者我认为这可能已经改变）。

对于简单的情况，我认为这很好，但是......如果 sp 非常复杂并且可以更改许多实体，我认为这是不可行的。

有任何想法吗？提前致谢 ：）

# objective-c - 将 SAFELY 64 位应用程序转换为 32/64 位应用程序

> ID：15270753
> 
> 赞同：0
> 
> 时间：2013-03-07T12:03:57.550
> 
> 标签：objective-c, cocoa, x86, 64-bit, automatic-ref-counting

我制作了一个启用 ARC 的应用程序（我的第一个应用程序），分发（而不是通过应用程序商店）并开始收到报告说它在某些 Mac 上崩溃了。在他们的帮助下尝试和搜索后，我们发现问题在于他们有一个 32 位处理器。所以我禁用了 ARC，将构建设置为 x86_64 并收到大量错误消息。

所有这些都已排序，现在我留下了大量警告（黄色警告）。我担心我会忘记一些东西，把记忆弄得一团糟。您认为从 64 位应用程序升级到 32/64 位应用程序的最佳方式是什么？如果有许多与其不兼容的mac，为什么首先使用ARC？

谢谢！

- - -更新 - - -

根据要求：

```
 Update to recommended settings

 Property 'delegate' requires method 'delegate' to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation

 Property 'delegate' requires method 'setDelegate:' to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation

 '__bridge' casts have no effect when not using ARC

 Variable 'loc_tip' is used uninitialized whenever 'if' condition is false

 Variable 'loc_tip' is used uninitialized whenever '&&' condition is false

 Conflicting parameter types in implementation of 'tableView:toolTipForCell:rect:tableColumn:row:mouseLocation:': 'NSInteger' (aka 'int') vs 'long' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:03:05.907

**前方的大水**

> 所有这些都已排序，现在我留下了大量警告（黄色警告）。

调高警告级别。把它们都修好。

> 我担心我会忘记一些东西，把记忆弄得一团糟。
> 
> 您认为从 64 位应用程序升级到 32/64 位应用程序的最佳方式是什么？

担心是自然的，考虑到问题。

一种快速解决方法是使用启用垃圾收集的 ObjC。这样做并相信它会在没有额外更改的情况下工作是一个错误（阅读：您应该保留大量时间用于测试和寻找错误）。

the other approach, if you really want good support on both 32 and 64, would be to use MRC -- but you should just commit to MRC for both 32 and 64 bit in that case (no ARC). of course, this will require a **lot** of reviewing, fixing, manual testing, and testing for leaks (unless your program is small). this is the preferable solution for an app with good long term support and high quality standards, IMO.

> why is ARC used in the first place if there are many macs that aren't compatible with it?

there really *aren't* a whole lot of macs out there that require 32 bit. if you were releasing a 1.0 today, you should just consider making it 64 bit only.

32 bit should have been supported and tested from the beginning of development, if it was a requirement -- either the ARC option or 32 bit would have been eliminated very early on. it seems odd that this oversight would slip through testing and development.

> Update to recommended settings

Hit "Validate Settings", review, perform changes.

> Property 'delegate' requires method 'delegate' to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation

echo warning message

> Property 'delegate' requires method 'setDelegate:' to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation

echo warning message

> '__bridge' casts have no effect when not using ARC

you would just use a c-style cast in that case

> Variable 'loc_tip' is used uninitialized whenever 'if' condition is false

ARC does this for you. just do what ARC would do:

```
NSSomething * loc_tip = nil; 
```

> Variable 'loc_tip' is used uninitialized whenever '&&' condition is false

echo previous response

> Conflicting parameter types in implementation of 'tableView:toolTipForCell:rect:tableColumn:row:mouseLocation:': 'NSInteger' (aka 'int') vs 'long'

the selector's declaration does not match -- copy the declaration from the header (`NSTableView.h`) and see if that change (of parameter types) requires any other changes to your implementations.

# ios - 核心数据多对多关系查询

> ID：15270755
> 
> 赞同：0
> 
> 时间：2013-03-07T12:03:59.317
> 
> 标签：ios, objective-c, core-data, nspredicate

假设有两个实体：EntityA 和 EntityB，通过多对多关系连接。假设关系属性分别是relatedEntityBs 和relatedEntityAs。我有一个 NSArray 的 EntityB 实例。我想找到与 nsarray 中的所有实例相关的所有 EntityA 实例。也就是说，如果数组是 [entityB1,.....,entityBn]。查找与 entityB1,wntityB2 直到 entityBn 相关的所有 EntityA 实例。我该如何写这种谓词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:53:16.987

这个谓词应该这样做：

```
NSMutablArray *predicateArray = [NSMutableArray array];
for (int i=0;i<entityBArray.count;i++){
     NSPredicate *subPredicate = [NSPredicate predicateWithFormat:@"ANY relatedEntityBs contains %@",[entityBArray objectAtIndex:i];
     [predicateArray addObject:subPredicate] ;
} 
NSCompoundPredicate *daddyPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:predicateArray]; 
```

基本上每个子谓词检查是否`relatedEntityB`包含数组的单个对象，最后`daddyPredicate`用 OR 将它们全部组合起来。

# c# - 在 .net 中获取 ssl 证书

> ID：15270764
> 
> 赞同：26
> 
> 时间：2013-03-07T12:04:27.737
> 
> 标签：c#, asp.net, ssl

我希望从任何给定的域名 SSL 证书中获取数据。例如，我想输入任何网站地址，例如“ [http://stackoverflow.com](http://stackoverflow.com) ”，我的代码将首先检查 SSL 证书是否存在。如果是这样，那么我希望它提取证书的到期日期。[我正在从 DB 读取域名] 示例：[http ://www.digicert.com/help/](http://www.digicert.com/help/)

我需要创建一个 Web 服务来检查到期日期。我该如何实施？- 我查看了很多不同的东西，例如 RequestCertificateValidationCallback 和 ClientCertificates 等。

我可能完全错了（因此我需要帮助）但是我会创建一个 HTTPWebRequest 然后以某种方式请求客户端证书和特定元素吗？

我尝试了提供@ [SSL 证书预取 .NET](https://stackoverflow.com/questions/2509854/ssl-certificate-pre-fetch-net)的示例，但我收到了被禁止的 403 错误。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-11T16:42:10.513

为此，您的项目需要参考`System.Security`：

```
using System.Security;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;

//Do webrequest to get info on secure site
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://mail.google.com");
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
response.Close();

//retrieve the ssl cert and assign it to an X509Certificate object
X509Certificate cert = request.ServicePoint.Certificate;

//convert the X509Certificate to an X509Certificate2 object by passing it into the constructor
X509Certificate2 cert2 = new X509Certificate2(cert);

string cn = cert2.GetIssuerName();
string cedate = cert2.GetExpirationDateString();
string cpub = cert2.GetPublicKeyString();

//display the cert dialog box
X509Certificate2UI.DisplayCertificate(cert2); 
```

**.NET 核心 2.1 - .NET 5**

您可以使用[HttpClientHandler](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclienthandler?view=netcore-2.1)和[ServerCertificateCustomValidationCallback](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclienthandler.servercertificatecustomvalidationcallback?view=netcore-2.1)属性。（此类在 .net 4.7.1 及更高版本中也可用）。

```
var handler = new HttpClientHandler
{
     UseDefaultCredentials = true,

     ServerCertificateCustomValidationCallback = (sender, cert, chain, error) =>
     {

          /// Access cert object.

          return true;
     }
 };

 using (HttpClient client = new HttpClient(handler))
 {
     using (HttpResponseMessage response = await client.GetAsync("https://mail.google.com"))
     {
          using (HttpContent content = response.Content)
          {

          }
      }
 } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-01-06T17:10:58.227

[@cdev 的解决方案](https://stackoverflow.com/a/15343898/5755313)在 .NET Core 2.1 上对我不起作用。.NET Core似乎`HttpWebRequest`不[完全支持](https://blogs.msdn.microsoft.com/henrikn/2012/08/07/httpclient-httpclienthandler-and-webrequesthandler-explained/)它。

这是我**在 .NET Core**上用来获取任何服务器的 X509 证书的函数：

```
// using System;
// using System.Net.Http;
// using System.Security.Cryptography.X509Certificates;
// using System.Threading.Tasks;

static async Task<X509Certificate2> GetServerCertificateAsync(string url)
{
    X509Certificate2 certificate = null;
    var httpClientHandler = new HttpClientHandler
    {
        ServerCertificateCustomValidationCallback = (_, cert, __, ___) =>
        {
            certificate = new X509Certificate2(cert.GetRawCertData());
            return true;
        }
    };

    var httpClient = new HttpClient(httpClientHandler);
    await httpClient.SendAsync(new HttpRequestMessage(HttpMethod.Head, url));

    return certificate ?? throw new NullReferenceException();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-09T03:46:09.863

需要注意的一件事是，您可能需要设置`request.AllowAutoRedirect = False`. 否则，如果服务器将 HTTPS 重定向到 HTTP，您将无法从`HttpWebRequest`对象中获取证书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-09T01:22:48.517

每次`HttpClient`要发出请求时都重新创建非常无效，并且可能会导致性能问题。最好为所有方法创建一个只读客户端。更多信息可以在[这里](https://softwareengineering.stackexchange.com/questions/330364/should-we-create-a-new-single-instance-of-httpclient-for-all-requests)找到。

```
private readonly HttpClientHandler _handler;
private readonly HttpClient _client; 
```

这是我获取证书信息的解决方案：

**构造函数内的代码：**

```
 _handler = new HttpClientHandler {
    ServerCertificateCustomValidationCallback = (sender, cert, chain, sslPolicyErrors) =>
    {
        sender.Properties.Add("Valid", sslPolicyErrors == System.Net.Security.SslPolicyErrors.None);
        sender.Properties.Add("Errors", sslPolicyErrors);
        return true;
    }
 };
 _client = new HttpClient(_handler); 
```

**然后您可以通过以下方式读取所有变量：**

```
using var request = new HttpRequestMessage(HttpMethod.Get, "https://www.google.com/");
var response = await _client.SendAsync(request);
var isCertificateValid = (bool)request.Properties["Valid"]; 
```

# ios - 实例化图像以显示在屏幕上的几个不同点？

> ID：15270766
> 
> 赞同：0
> 
> 时间：2013-03-07T12:04:38.470
> 
> 标签：ios, objective-c, uiimage

我有一个名为 Empty.png 的图像，它是一个很小的方形图块，我如何实例化图像以显示在屏幕上的几个不同点？

提前感谢您的任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:13:45.933

您可以将`UIImageView`'s 放置在您希望图像出现的任何位置。然后将每个图像视图的图像属性设置为该图像。（`UIImage`对象）。

如果您使用的是界面构建器，那么您只需在`imageview`界面构建器的属性检查器中输入文件名。

或者你可以这样做：

```
UIImage *img = [UIImage imageName:@"Empty.png"];
imageView.image = img; //Assuming this is your utlet to the image view. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:14:33.340

这将使您在某个视图中获得一张图像

```
CGPoint position = CGPointMake(x,y);
UIImageView *img = [[UIImageView alloc] init];
img.image = [UIImage imageNamed:@"Empty.png"];
img.frame = CGRectMake(position.x, position.y, img.image.size.width, img.image.size.height);
[someUIView addSubview:img]; 
```

如果你为所有图像的位置 (x,y) 创建一个数组，那么你可以在 for 循环中运行它，它会将图像放入视图中你想要的位置

注意：CGPoints 不能存储在 NSArray 中，因为它不是 NSObject 类型，要么使用 C/C++ 数组，要么使用其他可以放入 NSArray 的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:15:25.713

这取决于你想如何使用它。

如果你只是用核心图形绘制它，比如说in`drawInRect:`左右，那么你只需绘制它几次。

如果您想在一个或多个图像视图中显示它，则实例化您的 UIImageViews 并将相同的对象分配给所有它们。或者让 Interface Builder 为您进行实例化。但是您不能将单个 UIView 对象多次添加到一个或多个子视图层次结构中。如果您将 UIView 作为子视图添加到视图中，那么它将从之前的位置消失。10 个 UIImageView 可能使用相同的 UIView，但您需要 10 个 UIImageView 才能显示所有这些。

这同样适用于 UIButtons 和每个具有图像或背景图像的 UI 事物。

# java - 初始化项目状态错误

> ID：15270775
> 
> 赞同：0
> 
> 时间：2013-03-07T12:04:53.417
> 
> 标签：java, android, eclipse

我最近在我的错误日志中收到此错误。我在手机上安装我的应用程序没有问题，工作正常，但我仍然收到此错误。这是什么意思？

```
java.io.IOException: The filename, directory name, or volume label syntax is incorrect
    at java.io.WinNTFileSystem.canonicalize0(Native Method)
    at java.io.Win32FileSystem.canonicalize(Unknown Source)
    at java.io.File.getCanonicalPath(Unknown Source)
    at java.io.File.getCanonicalFile(Unknown Source)
    at com.android.tools.lint.detector.api.Project.<init>(Project.)
    at com.android.tools.lint.detector.api.Project.create(Project.)
    at com.android.tools.lint.client.api.LintClient.createProject(LintClient.)
    at com.android.tools.lint.client.api.LintClient.getProject(LintClient.)
    at com.android.tools.lint.client.api.LintDriver$LintClientWrapper.getProject(LintDriver.)
    at com.android.tools.lint.client.api.LintDriver.registerProjectFile(LintDriver.)
    at com.android.tools.lint.client.api.LintDriver.computeProjects(LintDriver.)
    at com.android.tools.lint.client.api.LintDriver.analyze(LintDriver.)
    at com.android.ide.eclipse.adt.internal.lint.LintJob.run(LintJob.)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:43:47.767

你用谷歌搜索过吗？这似乎是不同情况下存在的问题，并且正如消息所示，大多数情况下与无效路径有关。看看[这篇文章](https://stackoverflow.com/questions/10615937/android-export-application-using-proguard)，@Jeshurun 的回答，也许它可以帮助你。

# database - Magento：违反完整性约束：1062 键 2 的重复条目“100002112”

> ID：15270777
> 
> 赞同：0
> 
> 时间：2013-03-07T12:04:55.397
> 
> 标签：database, magento

嘿，我是一个完全的 magento 菜鸟，但我们将我们的版本升级到了最新版本，现在当您完成结帐并完成付款时，您会看到此错误。

我已经像每个人都建议的那样截断了日志表，我已经检查了重复的 sku。我已经研究过重新索引我们的产品价格，因为它说需要重新索引，但是当我这样做时，我会看到：“重新索引过程存在问题。”。

这是结帐时的错误。任何帮助或方向将不胜感激！

处理您的请求时出错 SQLSTATE[23000]：完整性约束违规：1062 键的重复条目“100002112”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T13:39:34.767

尝试增加 eav_entity_store 表中的 increment_last_id。确保该值大于当前现有订单的增量 id。

# mysql - SQL 备份问题

> ID：15270780
> 
> 赞同：1
> 
> 时间：2013-03-07T12:04:56.997
> 
> 标签：mysql, sql-server-2008, windows-server-2008

我一直在研究大型（27.678gb）MYSQL 数据库表的最佳备份程序。

目前我们正在使用一个名为 Rapidsync 的程序（这是一个异地备份工具），但它速度很慢，并且它锁定了它当前正在备份的表，因此导致 sql 的停机/缓慢。

我们当前的服务器也在运行 Windows 2008 r2 和 SQL server 2008（在同一个机器上）。

专用服务器的硬件规格为：

16gb Ram CPU intel xeon E3-1230 V2 @ 3.30GHz 1 TB 硬盘

就数据库而言，我们总共有 58 个大小不同的数据库，其中一些需要每周备份一次，甚至每天备份一次。

通过我们使用的名为 Navicat 的程序，您可以使用 SSH 隧道连接到数据库并手动复制数据库，如果我们要将其安装在本地计算机上并复制它们，这是一个可靠且可行的选择吗？或者使用 SQL Dump 会更安全/更有效吗？

我希望我已经提供了所有必要的信息，但请询问您是否需要了解更多信息。

PS 目前只有免费选项，因为我们的预算很紧！:)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:34:18.220

您提到了 SSH，所以我想备份也可以在数据库服务器本身以外的其他服务器上完成。对于 Unix，您可以使用出色的工具[Percona xtrabackup](http://www.percona.com/doc/percona-xtrabackup/index.html)，它是免费的，支持 InnoDB 数据库文件的在线（无锁定）备份以及增量备份。也许也可以在 Windows 上编译它（部分是用 C 编写的，部分是用 Perl 编写的）。

因此，您可以设置每周完整备份和每日增量备份。该工具将跟踪 InnoDB 数据文件的哪些页面已更改，并将仅复制这些页面。

# android - 将数据从 json 对象显示到 android listview

> ID：15270784
> 
> 赞同：2
> 
> 时间：2013-03-07T12:05:11.657
> 
> 标签：android, json

我正在开发一个 android 应用程序，它将简单数据作为 NAME 发送到网络服务器，并且可以从服务器检索 NAMES。使用 php 和 mysql 进行 web 服务。目前我已经完成了从 web 到 android 的发送和接收数据。现在我想将我从我的网站数据库中获得的名称显示到我的 android listview 中。以下是我的代码

```
public class allProducts extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> productsList;

// url to get all products list
private static String url_all_products = "http://10.0.2.2/dinein/Model/getName.php";

// JSON Node names

private static final String TAG_NAME = "name";
//private static final String TAG_SUCCESS = "success";
//private static final String TAG_PRODUCTS = "products";
//private static final String TAG_PID = "pid";

// products JSONArray
JSONArray products = null;
static ArrayList<String> listItems=new ArrayList<String>();

//DEFINING STRING ADAPTER WHICH WILL HANDLE DATA OF LISTVIEW
ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.products);

    // Hashmap for ListView
    productsList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
   /* lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    EditProductActivity.class);
            // sending pid to next activity
            in.putExtra(TAG_PID, pid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });*/

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

 class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(allProducts.this);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json =jParser.makeHttpRequest(url_all_products, "POST", params);

        // Check your log cat for JSON reponse

            // Checking for SUCCESS TAG
            int success = 1;

            if (success == 1) {
                Iterator<String> iter = json.keys();
                Object value=null;
                while (iter.hasNext()) {
                    String key = iter.next();
                    try {
                         value = json.get(key);

                    } catch (JSONException e) {
                        // Something went wrong!
                    }
                }

              }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        allProducts.this, productsList,
                        R.layout.name_list, new String[] {TAG_NAME},
                        new int[] { R.id.pid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

} 
```

我想用列表视图在我的活动中显示我的数据。这是我的 xml 文件的样子

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

和另一个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<TextView
    android:id="@+id/pid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:visibility="gone" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:19:20.997

如果您正在扩展，`ListActivity`那么 ListView id 必须是`android:id="@+id/android:list"`。将您的 xml 更改为：

```
<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

因为`onPostExecute`总是执行`Main UI Thread`然后不需要用于从更改您的 onPostExecute 方法代码的方法`runOnUiThread`更新 UI为：`onPostExecute``doInBackground`

```
protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();

        ListAdapter adapter = new SimpleAdapter(
                        allProducts.this, productsList,
                        R.layout.name_list, new String[] {TAG_NAME},
                        new int[] { R.id.pid, R.id.name });

               ListView listview = allProducts.this.getListView();
                // updating listview
                listview.setListAdapter(adapter);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:35:02.693

我在您的代码中发现了两个错误。

首先，您无法在列表中看到任何内容，因为该**行的 textview 可见性设置为 GONE**。所以，改变它。

```
<TextView
     android:id="@+id/pid"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
    <!-- android:visibility="gone" -->
 /> 
```

其次，您的列表行**只有一个 field(R.id.pid)**，并且您的代码正在**尝试设置两个 fields(R.id.pid, R.id.name)**。很快，您将有两个更改它，或者添加另一个带有`android:id ="@+id/name"`或删除适配器的 R.id.name 的文本视图。

这是一个仅使用您的 pid 字段的示例：

```
 List<Map<String, String>> productsList = new ArrayList<Map<String,String>>();
   HashMap<String, String> p1 = new HashMap<String, String>();
   p1.put("key", "product1");
   HashMap<String, String> p2 = new HashMap<String, String>();
   p2.put("key", "product2");
   HashMap<String, String> p3 = new HashMap<String, String>();
   p3.put("key", "product3");
   productsList.add(p1);
   productsList.add(p2);
   productsList.add(p3);

   ListAdapter adapter = new SimpleAdapter(this, productsList,
            R.layout.row, new String[] {"key"},
            new int[] { R.id.pid});

   ListView listview = getListView();
   listview.setAdapter(adapter); 
```

# android - 在片段中保存和恢复自定义对象

> ID：15270788
> 
> 赞同：0
> 
> 时间：2013-03-07T12:05:17.987
> 
> 标签：android, bundle, fragment

我有两个片段 FragmentA 和 FragmentB。从片段 A 我通过将自定义对象作为参数传递给片段 B 中的方法来更新片段 B 中的视图。例如下面是片段 B：

```
public class FragmentB extends Fragment {

private ArrayList<String> customObj = new ArrayList<String>();

        public void updateViews(ArrayList<String> obj) {
                customObj = obj;

         }

    @Override
        public void onSaveInstanceState(Bundle outState) {
        System.out.println("Custom Object : "+customObj);//custom object is always  empty
        } 
```

现在，每当我旋转屏幕时，自定义对象总是空的。

**注意** 这里我只是更新 Fragment B 的视图。对象作为参数从 Fragment A 传递到 Fragment B 的方法 updateViews。此外，我不期待为自定义对象定义静态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:18:54.480

您可以做两件事 1\. 将自定义对象存储在每次更改方向时都不会创建的某个位置，即应用程序类、服务等。 2\. 将该对象存储在 Bundle 中，作为 OnSaveInstanceState() 中的参数并使用该 Bundle在 OnRestoreInstanceState() 或 OnCreate() 中设置对象...

例如，

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    Logger.d("Dash onCreate");
    super.onCreate(savedInstanceState);

    ...
    // create fragments to use
    if (savedInstanceState != null) {
       //get your Object
    }
    if (yourObject != null)
        //restore the View using yourObject
    ...
} 

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
} 
```

现在，在您的自定义类中，您必须实现 Serializable 或 Parcelable 才能将其存储在 Bundle 中。序列化很简单，但如果您实现 Parcellable，您可以对其进行更多控制。

SO上与此主题相关的其他一些类似主题是

[类似的例子](https://stackoverflow.com/questions/9039877/android-fragment-screen-rotate)

[另一个很好的例子](https://stackoverflow.com/questions/7951730/viewpager-and-fragments-whats-the-right-way-to-store-fragments-state)

[您可以在 Android Documentations for Fragments](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle)中获得类似的示例。

# tinymce - 克隆 TinyMCE 主题预览

> ID：15270790
> 
> 赞同：4
> 
> 时间：2013-03-07T12:05:24.210
> 
> 标签：tinymce, plone

有没有一种“健康”的方法可以让 TinyMCE-Preview-Button 与 plone.app.theming 一起使用？
内容可能处于不同的工作流状态（私有、可见......）

例如：
处理内容 ( [http://edit.example.com](http://edit.example.com) ) -> 单击 TinyMCE 预览按钮 -> 带有主题站点的实时预览 ( [http://www.example.com/](http://www.example.com/) )

感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:04:38.423

我不确定这个问题是否相关。

您将 plone.app.theming 和多域主题混合在一起。

Plone 对多域主题不友好，也不会。

即使是（比如说抛出一个插件），你也必须构建自己的 tinymce 插件才能做到这一点，因为 tinymce 本身并不是一个多域工具。

所以你必须构建一个特定的插件来实现这一点。

# android - 如何结合使用 StaggeredGridView 和 ActionBarSherlock

> ID：15270791
> 
> 赞同：0
> 
> 时间：2013-03-07T12:05:24.727
> 
> 标签：android, actionbarsherlock, slidingmenu

我已经使用“ActionBar Sherlock 和滑动菜单”库实现了带有操作栏的滑动菜单。现在我尝试使用 staggeredGridView。但是我收到错误，因为“StaggeredGridView-Android Support v4 库中存在 JAR MISMATCH”

我如何将 staggeredGridView 与 actionBar sherlock 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:14:27.757

ABS 和 StaggeredGridView 都带有兼容性库，但可能带有不同版本的 JAR。您应该将其中一个兼容 JAR 替换为另一个，Android SDK 将忽略重复的 JAR，只要它们完全匹配。

至于您应该复制哪个 JAR，请始终复制最新版本（可能是 ABS 版本），或者您可以从 SDK 中获取最新版本并覆盖它们。

希望这可以帮助..

# mongodb - 如何在mongodb中更新数组的子数组字段

> ID：15270795
> 
> 赞同：2
> 
> 时间：2013-03-07T12:05:30.810
> 
> 标签：mongodb, meteor

我的对象如下所示：

```
Stats = {
  name: 'filters'
  variants: [
    {
      variant: 'A'
      displayed: 123
      actions: [
        {
          name: 'clicked'
          triggered: 12
        }

      ]
    },
    {
      variant: 'B'
      displayed: 123
      actions: [
        {
          name: 'clicked'
          triggered: 12
        }
      ]
    }
  ]
} 
```

我有一系列变体，其中包含一系列动作。我想增加`triggered`选定`variant`和的字段`actions.name`。我在meteor.js中使用它。

我的查找查询如下所示：

```
Stats.find({
  name: 'filters', 
  variants: {
    $elemMatch: {
      variant: 'A',
      'actions.name': 'clicked'
}}}) 
```

现在，如果对象存在，我想做类似下面的事情，但我知道它不起作用。

```
Stats.update({
  name: 'filters', 
  variants: {
    $elemMatch: {
      variant: 'A',
      'actions.name': 'clicked'
}}},
{
  $inc: {
    'variants.$.actions.$.triggered': 1
}}) 
```

我知道位置 $ 运算符充当更新查询选择器的第一个匹配项的占位符。但也许你有任何其他想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:14:21.067

我最终将结构展平为：

```
Stats = [
  {
    name: 'filters'
    variant: 'A'
    displayed: 123
    actions: [
      {
        name: 'clicked'
        triggered: 12
      }
    ]
  },
  {
    name: 'filters'
    variant: 'B'
    displayed: 123
    actions: [
      {
        name: 'clicked'
        triggered: 12
      }
    ]
  }
] 
```

在这里我可以`triggered`轻松地增加值：

```
Stats.update({
  name: 'filters',
  variant: 'A',
  'actions.name': 'clicked'
}, {
  $inc:  {
    'actions.$.triggered': 1
}}) 
```

我仅在服务器端使用此代码。无论如何，谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:33:50.027

目前该`$`操作员在 minimongo 上不可用，甚至在服务器上也存在一些故障（至少在我上次使用它时）。

这是一个已知问题，看起来它可能很快就会得到修复： [https ://github.com/meteor/meteor/issues/153](https://github.com/meteor/meteor/issues/153)

# c# - SHA512 算法的哈希值是 128 位长？

> ID：15270799
> 
> 赞同：4
> 
> 时间：2013-03-07T12:05:51.390
> 
> 标签：c#, hash, sha512

我有一个奇怪的问题。在我的代码中，我创建了一个 sha512 哈希算法并用它签署了一些数据。现在我希望哈希是 512 位长，但它是 128。我犯了什么错误？

我的代码：

```
var hashAlgorithm = HashAlgorithm.Create( „SHA512“ );
var signedhHash = rsaCryptoServiceProvider.SignData( plainData, hashAlgorithm ); 
```

PS。我已经从使用以下脚本创建的文件中加载了 RSA 密钥：

```
makecert -r -n "CN=myCert" -sky exchange -sy 24 -sv myCert.pvk myCert.cer
cert2spc myCert.cer myCert.spc
pvk2pfx -pvk myCert.pvk -spc myCert.spc -pfx myCert.pfx –f 
```

**编辑：**

我从 得到长度`signedhHash.Length`，等于 128。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:18:19.503

哈希值的大小为 512，但带*符号的哈希值*（来自`SignData`）的大小为 1024。

```
var alg = HashAlgorithm.Create("SHA512");
var hashArr = alg.ComputeHash(ASCIIEncoding.UTF8.GetBytes("test"));
var size = hashArr.Length * 8; //512

var rsaCryptoServiceProvider = new RSACryptoServiceProvider();
var signedValue = rsaCryptoServiceProvider.SignData(ASCIIEncoding.UTF8.GetBytes("test"), alg);
size = signedValue.Length * 8; //1024 
```

（1 字节 = 8 位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:40:10.957

SignData 不返回使用 SHA512 算法生成的散列，它返回使用提供者的 SignatureAlgorithm 属性生成的散列签名 ( [http://www.w3.org/2000/09/xmldsig#rsa-sha1](http://www.w3.org/2000/09/xmldsig#rsa-sha1) )

# html - wordpress 中的 html 转换表太宽，不适合全宽页面模板

> ID：15270801
> 
> 赞同：0
> 
> 时间：2013-03-07T12:05:56.783
> 
> 标签：html, css, wordpress, html-table

我正在尝试在 wordpress 中粘贴一个 xlsx 文件，但存在一些问题。我终于使用 google docs 将其转换为 html，它看起来与它应该的完全一样，只是内容没有填充页面：

[http://www.biomayeutika.org/que/](http://www.biomayeutika.org/que/)

这是表格的开头。我知道这可能是一个蹩脚的问题，但我不知道更好。

```
&nbsp;
</p>

<p>
    &nbsp;
</p>

<p>
    <br />
    <meta content="20130307;3513400" name="CHANGED" />
</p>
<style type="text/css">
<!-- 
        BODY,DIV,TABLE,THEAD,TBODY,TFOOT,TR,TH,TD,P { font-family:"Calibri"; font-size:x-small }
         --></style>
<table border="0" cellspacing="0" cols="10" frame="VOID" rules="NONE" style="width: 1126px; height: 1270px;">
    <colgroup>
        <col width="310" />
        <col width="37" />
        <col width="60" />
        <col width="147" />
        <col width="134" />
        <col width="42" />
        <col width="55" />
        <col width="152" />
        <col width="332" />
        <col width="85" />
    </colgroup>
    <tbody>
        <tr>
            <td align="LEFT" bgcolor="#FF9900" height="23" style="border-top: 3px solid #969696; border-bottom: 3px solid #969696; border-left: 3px solid #969696; border-right: 3px solid #969696" valign="MIDDLE" width="310">
                <b><font color="#000000">Qu&eacute; hacemos </font></b>
            </td>
            <td align="CENTER" bgcolor="#FF9900" style="border-top: 3px solid #969696; border-bottom: 3px solid #969696; border-left: 3px solid #969696; border-right: 3px solid #969696" valign="MIDDLE" width="37">
                <b><font color="#000000">curso</font></b>
            </td>
            <td align="CENTER" bgcolor="#FF9900" style="border-top: 3px solid #969696; border-bottom: 3px solid #969696; border-left: 3px solid #969696; border-right: 3px solid #969696" valign="MIDDLE" width="60">
                <b><font color="#000000">intensivo</font></b>
            </td>
            <td align="CENTER" bgcolor="#FF9900" style="border-top: 3px solid #969696; border-bottom: 3px solid #969696; border-left: 3px solid #969696; border-right: 3px solid #969696" valign="MIDDLE" width="147">
                <b><font color="#000000">fecha</font></b> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:27:35.883

您可以在某处调整这些值以调整一些外观和感觉

```
<colgroup>
        <col width="310" />
        <col width="37" />
        <col width="60" />
        <col width="147" />
        <col width="134" />
        <col width="42" />
        <col width="55" />
        <col width="152" />
        <col width="332" />
        <col width="85" />
    </colgroup> 
```

手动调整宽度

# java - VerifyError：堆栈大小太大（这是什么意思？）

> ID：15270807
> 
> 赞同：2
> 
> 时间：2013-03-07T12:06:28.240
> 
> 标签：java, assembly, bcel

我对 Java 字节码还很陌生。我正在使用 BCEL 生成字节码，但是当我尝试使用生成的代码时收到一条错误消息。（事后看来，ObjectWeb ASM 似乎比 BCEL 更先进、更常用。）

这是错误消息：

```
Exception in thread "main" java.lang.VerifyError: 
(class: cb/io/FileDescriptor, method: set 
 signature: (I)J) 
Stack size too large 
```

这是方法：

```
// Method descriptor #4 (I)J
// Stack: 0, Locals: 1
private static long set(int arg1);
  0  lconst_0
  1  lreturn
    Local variable table:
      [pc: 0, pc: 2] local: arg1 index: 0 type: int 
```

据我了解，局部变量表是正确的，因为它与输入参数匹配。我没有添加“this”变量，因为该方法是静态的。

如果我没记错的话， lconst_0 将一个长值 0 加载到堆栈上，然后 lreturn 使用该值并返回它。

我究竟做错了什么？这里有足够的信息可以告诉吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:09:37.020

您必须声明用于每个 Java 方法的最大堆栈大小。例如 ASM 可以自动计算值，这为您省去了很多麻烦。最大堆栈大小是您在该方法中使用的插槽的绝对最大数量（一次，不累积）。进行分支时，计算可能会变得非常棘手。

你在`long`这里加载一个值，`long`s 消耗 2 个栈槽（实际上每个 64 位值（指针除外）消耗 2 个栈槽），所以你必须在这里设置最大栈大小为 2。

只是告诉您，您的`Stack size too large`方法消耗更多的堆栈槽，如方法描述符中指定的那样。

# google-app-engine - 禁用 Google App Engine 会限制开发吗？

> ID：15270814
> 
> 赞同：0
> 
> 时间：2013-03-07T12:06:40.497
> 
> 标签：google-app-engine, gwt

我正在编写一个必须与现有 mySQL 数据库一起使用的 Web 应用程序。客户希望使用 GWT 开发此应用程序。

我很快发现 GAE 不支持 mySQL，所以我禁用它以便能够使用现有的 mySQL 数据库。由于我是 GWT 的新手，我有点担心和无能为力 - 禁用 GAE 会禁用某些 GWT 功能，还是 GWT 和 GAE 与开发我的应用程序的功能无关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:20:42.660

GAE 是一个云服务器。您可以在 tomcat、jboss 等任何服务器上部署您的 gwt 应用程序。GWT 不受 GAE 约束。

[Google 应用引擎](https://developers.google.com/appengine/)为部署、维护和构建您的应用提供免费支持。并在 www 上提供以 .appspot.com 结尾的免费域名。

之前它只提供数据存储支持。现在支持[Google Cloud Sql](https://developers.google.com/cloud-sql/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:28:24.277

您可以禁用 GAE 支持（我假设在 Eclipse 中）而不会丢失任何 GWT 功能。GWT 是一个 Web 开发工具包，而 GAE 是一个服务器平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:02:37.960

Google App Engine 实际上确实支持 MySQL。他们的 Cloud SQL 版本是一个稍微修改过的 MySQL RDB，因此您可能更容易将 GAE 用于 API 和开箱即用的兼容性。 [https://developers.google.com/cloud-sql/](https://developers.google.com/cloud-sql/)

话虽如此，GWT 与 GAE 无关，因此您可以独立使用两者。

# c++ - 在回调中传递数据

> ID：15270826
> 
> 赞同：1
> 
> 时间：2013-03-07T12:07:17.363
> 
> 标签：c++, dll, callback

我有一个从 (DLL) 调用的回调函数（在 c++ exe 应用程序中定义）。DLL 中的声明（C++ builder 2009）：

```
typedef struct{
INT32      time_stamp;      
INT32      id;              
INT8       len:4;           
INT8       rtr:1;       
INT8       res:3;           
INT8       a_data[8];      
INT8       sts;            
} COTI_CAN_OBJ;

typedef void (__closure __fastcall *COTI_t_UsrRxIntHdlr)(UINT16 count, COTI_CAN_OBJ far * p_obj); 
```

当我在 DLL 中调用此回调时，它执行正常，但在 p_obj 中传递的值不正确，它看起来是从不同的位置（地址）获取而不是传递。

有人可以帮忙吗？

这是由我的 dll（客户端）中的 c++ 应用程序（主机）调用的函数，并作为参数传递回调函数的指针：

```
COTI_t_UsrRxIntHdlr local_int_hdlr;
COTI_CAN_OBJ obj;

extern "C" __declspec(dllexport) __cdecl UINT32 COTI_InitBoard(
    UINT16 board_seg,
    COTI_t_UsrRxIntHdlr fp_int_hdlr,
    COTI_t_UsrExcHdlr fp_exc_hdlr
    )
    {
     local_int_hdlr = fp_int_hdlr;
     local_exc_hdlr = fp_exc_hdlr;

     fp_int_hdlr(0,NULL);

     return 1;
    } 
```

然后在另一个函数中，我将回调称为：

```
...
     obj.id=0x701;
     obj.len=5;
     obj.a_data[0]=10;
     obj.a_data[1]=20;
     obj.a_data[2]=30;
     obj.a_data[3]=40;
     obj.a_data[4]=50;
 local_int_hdlr(1, &obj);
    ... 
```

这是 C++ 应用程序（主机）中回调函数的声明：

```
static void CotiRxHandler(UINT16 count, COTI_CAN_OBJ *p_obj)
{
   ...
   return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:38:29.883

我认为与调用约定有关。你确定你用 __fastcall 调用它，因为默认调用约定是 __stdcall 用于 windows。

**编辑：**

可能存在数据对齐问题。尝试下面给出的解决方案：

添加

```
#pragma pack(push,1) //Add

typedef struct{
INT32      time_stamp;      
INT32      id;              
INT8       len:4;           
INT8       rtr:1;       
INT8       res:3;           
INT8       a_data[8];      
INT8       sts;            
} COTI_CAN_OBJ;

#pragma pack(pop) //Add 
```

到你的结构声明。

**更新 2：**

**改变：**

> 静态无效 CotiRxHandler（UINT16 计数，COTI_CAN_OBJ *p_obj）

至

> 静态无效 __fastcall CotiRxHandler（UINT16 计数，COTI_CAN_OBJ *p_obj）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:54:30.593

除了@CasperGhost 推荐的内容之外，我还建议您调试代码——尤其是在 DLL/EXE 边界附近。查看调用函数时传递的内容（即局部变量的内容`COTI_CAN_OBJ`）。现在，仔细查看被调用函数中相同变量的内容——看看是否一切都匹配。您应该使用`sizeof`数据类型（即`COTI_CAN_OBJ`）来查看它在 DLL 和 EXE（或 DLL）中是否相同。

# c++ - unsigned char inbuf[1024000] 抛出一个 EXEC_BAD_ACCESS

> ID：15270832
> 
> 赞同：1
> 
> 时间：2013-03-07T12:07:25.257
> 
> 标签：c++, ios, objective-c, xcode, exc-bad-access

我正在使用最新的 SDK 开发一个 iOS 应用程序。

这个应用程序有一些 C++ 类。

当我为该类调用方法时，出现错误：

这是 C++ 类的一部分。

```
#ifdef __APPLE__
    const char* path = jFileName ;
    const char* tempPath =  jTempFileName ;

    const char* truckPath = jTruckFileName;
    const char* truckTempPath = jTruckTempFileName;
#endif

    MyFunction(path,tempPath); 
```

On `MyFunction(path,tempPath);`，`path`并且`tempPath`具有有效值。

但是，我在这里得到错误：

```
void MyFunction(const char* inFileName, const char* outFileName)
{
    [ ... ]
    unsigned char inbuf[1024000], outbuf[1024000];

    [ ... ]
} 
```

添加评论我发现错误就在这里：`unsigned char inbuf[1024000], outbuf[1024000];`当我的函数只有那一行时。

此错误仅出现在设备上。

**我怎么知道问题出在哪里？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:57:18.687

你的堆栈不是那么大：

```
 unsigned char inbuf[1024000], outbuf[1024000]; 
```

改用堆分配：

```
std::vector<unsigned char> inbuf(1024000, 0), outbuf(1024000, 0); 
```

或将您的工作分开，以便可以使用较小的堆栈缓冲区。

* * *

*编译器不需要将缓冲区放在堆栈上，但在这种情况下可能有。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:29:44.497

接听

> 我怎么知道问题出在哪里？

尝试**启用异常断点进行调试。**

1.  转到断点导航器
2.  点击“+”号
3.  单击添加异常断点
4.  点击“完成”

还可以尝试使用启用的僵尸对象进行调试。为此，请转到**Product->Edit Scheme**并检查“**启用僵尸对象**”

# hadoop - java.lang.IllegalStateException：未找到集群。检查您的 -c 路径

> ID：15270833
> 
> 赞同：1
> 
> 时间：2013-03-07T12:07:26.567
> 
> 标签：hadoop, machine-learning, cluster-computing, cluster-analysis, mahout

我在命令行中使用以下命令使用 Mahout kmeans 算法对数据进行聚类

```
mahout kmeans -i /vect_out/tfidf-vectors/ -c /out_canopy -o /out_kmeans -dm   
org.apache.mahout.common.distance.SquaredEuclideanDistanceMeasure -cd 1.0 -x 20 -cl 
```

*其中 /out_canopy 是包含使用 Mahout canopy 集群创建的集群的目录，其中包含一个`clusters-0`目录，该目录本身包含一个名为的目录`_logs`和一个名为`part-r-00000`*

但是一直报以下错误

```
java.lang.IllegalStateException: No clusters found. Check your -c path.
at org.apache.mahout.clustering.kmeans.KMeansMapper.setup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:06:20.563

你确定那`/out_canopy`是目录吗？你试过：

```
file /out_canopy 
```

似乎有一个错字，你只想写`out_canopy`或以某种方式相似......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-05T09:48:15.873

这是一个特别令人头疼的问题。

```
1\. Swallow IllegalStateExceptions thrown by removeShutdownHook in FileSystem. The javadoc states:

    public boolean removeShutdownHook(Thread hook)
    Throws:
    IllegalStateException - If the virtual machine is already in the process of shutting down 

So if we are getting this exception, it MEANS we are already in the process of shutdown, so we CANNOT, try what we may, removeShutdownHook. If Runtime had a method Runtime.isShutdownInProgress(), we could have checked for it before the removeShutdownHook call. As it stands, there is no such method. In my opinion, this would be a good patch regardless of the needs for this JIRA.

2\. Not send SIGTERMs from the NM to the MR-AM in the first place. Rather we should expose a mechanism for the NM to politely tell the AM its no longer needed and should shutdown asap. Even after this, if an admin were to kill the MRAppMaster with a SIGTERM, the JobHistory would be lost defeating the purpose of 3614 
```

# java-ee-6 - 使用 Bean Validation（或 JSF）验证字段是否唯一

> ID：15270838
> 
> 赞同：0
> 
> 时间：2013-03-07T12:07:37.437
> 
> 标签：java-ee-6, bean-validation

我有一个有名字的简单对象

```
public class Foo {

    private String name

} 
```

站点上的每个用户最多可以有 10 个 Foo 与之关联。在这种情况下，当创建一个新的 Foo 时，我想验证没有另一个 foo 与已经存在的同一个用户关联。

我可以[创建一个自定义 Bean Validator](http://blog.m1key.me/2010/07/custom-validation-with-bean-validation.html)但是注释需要在编译期间定义参数。**然后我将如何传递现有 Foos 的名称？**

正如各个地方所建议的那样，我可以使用*EL 表达式*作为获取数据的替代方法。这感觉就像用大锤敲碎坚果。它还带来了一大堆潜在问题，首先要考虑的是易于测试。

我可以使用布尔字段进行全类验证

```
@AssertTrue(message="Name already exists")
public boolean isNameUnique() {
    return (existingNames.contains(name));
} 
```

但是验证消息不会显示在名称字段旁边。这是一个表面问题，*这可以作为一个备用计划*。然而，它并不理想。

这让我想到了这个问题：

**有没有一种简单的方法来编写一个 Bean Validator，它可以在字段级别根据一组值检查值并满足以下限制？**

*   **在运行时确定的先前值**
*   **不使用 EL 表达式之类的东西**
*   **字段级别验证而不是类级别。**

编辑回应哈代：

Foo 类是一个持久存在于数据库中的实体。它们通过 DAO 接口被拾取和使用。

我可以遍历实体，但这意味着将 DAO 插入验证器，更不用说如果我有另一个类也有这个约束，我需要再次编写相同的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:17:54.203

这将有助于了解您想如何使用*Foo*类。你能扩展你的示例代码吗？它们是否保存在*Foo*实例列表中。自定义约束似乎很合适。为什么需要将任何参数传递给约束。我只会遍历 foos 并检查名称是否唯一。

# oracle - ORMLite 和 Oracle - 区分大小写的列名

> ID：15270839
> 
> 赞同：1
> 
> 时间：2013-03-07T12:07:38.250
> 
> 标签：oracle, ormlite

我刚刚开始使用 ORMLite，并在家里使用 MySQL 进行实验。现在我决定尝试在 Oracle 上使用它，但注意到列名区分大小写的问题。

使用它时，`TableUtils.createTableIfNotExists()`它似乎会生成将表名和列名用双引号括起来的 CREATE 语句。例如：

> CREATE TABLE "T_SUBURB" ("id" NUMERIC , "description" VARCHAR2(255) NOT NULL , "gnaf" VARCHAR2(255) , PRIMARY KEY ("id") )

这意味着当我尝试在 Oracle SQL Developer 中查询数据库时，我必须使用双引号来指定表名和列名。使用 MySQL 时似乎不会发生这种情况。

我必须承认我是一个 SQL 新手，但是在尝试查询它们时将每个表或列名用双引号括起来似乎并不自然。查看 OracleDatabaseType 实现，在此示例中，实体名称似乎被有意双引号。

有人知道关闭这种行为的方法吗？

我目前正在运行 maven-central 和 Oracle 11g 的 4.43 版。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:08:28.610

> 使用 TableUtils.createTableIfNotExists() 时，它似乎会生成 CREATE 语句，将表名和列名用双引号括起来。

这是正确的。[ORMLite](http://ormlite.com/)面临的挑战是它必须防止特殊字符或保留字作为字段和表名。像`"index"`or之类的词`"create"`可能是很好的字段名称，但会导致无效的 SQL。

但是，根据我的阅读`OracleDatabaseType`应该是生成*大写*的字段名称：

```
@Override
public boolean isEntityNamesMustBeUpCase() {
    return true;
} 
```

如果您的字段是`"description"`这样创建的，那么就有问题了。`DESCRIPTION`代替工作吗？ORMLite 是否生成您的模式并使用 Oracle JDBC URI？就像是：

```
jdbc:oracle:... 
```

如果你没有使用这样的 JDBC URI，那么 ORMLite 可能没有使用 Oracle 数据库类型来创建你的表。如果你需要*强制*它使用 Oracle，你可以创建你的

```
ConnectionSource connectionSource =
    new JdbcConnectionSource(databaseUrl, new OracleDatabaseType()); 
```

希望这可以帮助。

# javascript - Underscore.js 中的加号运算符是什么意思？

> ID：15270843
> 
> 赞同：0
> 
> 时间：2013-03-07T12:07:46.870
> 
> 标签：javascript, underscore.js

当我看到 Underscore.js（1.4.3 版）代码时，我看到了以下几行（79 行）

```
 if (obj.length === +obj.length) {
        for (var i = 0, l = obj.length; i < l; i++) {
            if (iterator.call(context, obj[i], i, obj) === breaker) return;
        }
    } 
```

我不明白为什么`+`在**if**语句中使用运算符。(+obj.length)
而且，这句话不是总是**正确的**吗？
我不认为这是一个错字。必须有一些使用它的目的。如果有人知道这种用法的好处，我想在将来使用它。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:10:01.817

`obj.length`可能是任何类型 - 例如`undefined`. `+obj.length`始终是一个数字。

所以代码基本上检查`length`属性是否存在并且是一个数字。此检查的原因是`_.each()`接受数组和非数组对象。在数组的情况下，`length`属性是迭代其元素所必需的，而`for..in`在非数组对象的情况下循环是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:08:59.433

加号运算符将值转换为数字。

基本上，`a === +a`确保 a 是数字而不是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:13:44.547

它将值转换为数字。我发现这篇文章很有帮助：

[http://www.2ality.com/2012/01/object-plus-object.html](http://www.2ality.com/2012/01/object-plus-object.html)

干杯! :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T12:20:20.467

一元运算`+`符产生与其操作数等效的数字，并且`NaN`如果操作数不能转换为数字。

这是 Javascript 中存在的许多小“技巧”​​之一：

*   `!!foo`- 转换`foo`为布尔值
*   `~~foo`- 转换`foo`为 32 位有符号整数

# wpf - 如何将 byte[] 转换为 BitmapImage？

> ID：15270844
> 
> 赞同：12
> 
> 时间：2013-03-07T12:07:48.610
> 
> 标签：wpf, image, type-conversion, bitmapimage

我有一个`byte[]`代表图像的原始数据的。我想将其转换为`BitmapImage`.

我尝试了几个我发现的例子，但我不断收到以下异常

> “未找到适合完成此操作的成像组件。”

我认为这是因为 my`byte[]`实际上并不代表图像，而仅代表原始位。所以我的问题如上所述是如何将原始位的 byte[] 转换为`BitmapImage`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T12:53:49.593

如问题中所述，下面的代码不会**从**原始像素缓冲区创建 BitmapSource 。

但是，如果您想从 PNG 或 JPEG 等编码帧创建 BitmapImage，您可以这样做：

```
public static BitmapImage LoadFromBytes(byte[] bytes)
{
    using (var stream = new MemoryStream(bytes))
    {
        var image = new BitmapImage();
        image.BeginInit();
        image.CacheOption = BitmapCacheOption.OnLoad;
        image.StreamSource = stream;
        image.EndInit();

        return image;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-07T13:31:42.333

当您的字节数组包含位图的原始像素数据时，您可以通过静态方法创建一个`BitmapSource`（它是 的基类） 。`BitmapImage`[`BitmapSource.Create`](http://msdn.microsoft.com/en-us/library/ms616045.aspx)

但是，您需要指定位图的一些参数。您必须事先知道缓冲区的宽度和高度以及[`PixelFormat`](http://msdn.microsoft.com/en-us/library/system.windows.media.pixelformat.aspx)缓冲区的宽度。

```
byte[] buffer = ...;

var width = 100; // for example
var height = 100; // for example
var dpiX = 96d;
var dpiY = 96d;
var pixelFormat = PixelFormats.Pbgra32; // for example
var stride = (width * pixelFormat.BitsPerPixel + 7) / 8;

var bitmap = BitmapSource.Create(width, height, dpiX, dpiY,
                                 pixelFormat, null, buffer, stride); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-12T01:25:04.360

我遇到了同样的错误，但这是因为我的数组没有被实际数据填充。我有一个字节数组，它等于它应该是的长度，但是这些值仍然是`0`- 它们还没有被写入！

我的特殊问题——我怀疑其他人也遇到了这个问题——是因为`OracleBlob`参数。我认为我不需要它，并认为我可以做类似的事情：

```
DataSet ds = new DataSet();
OracleCommand cmd = new OracleCommand(strQuery, conn);
OracleDataAdapter oraAdpt = new OracleDataAdapter(cmd);
oraAdpt.Fill(ds)

if (ds.Tables[0].Rows.Count > 0)
{
    byte[] myArray = (bytes)ds.Tables[0]["MY_BLOB_COLUMN"];
} 
```

我错了！为了真正获得该 blob 中的实际字节，我需要将该结果实际读入一个`OracleBlob`对象。我没有填充数据集/数据表，而是这样做：

```
OracleBlob oBlob = null;
byte[] myArray = null;
OracleCommand cmd = new OracleCommand(strQuery, conn);
OracleDataReader result = cmd.ExecuteReader();
result.Read();

if (result.HasRows)
{
    oBlob = result.GetOracleBlob(0);
    myArray = new byte[oBlob.Length];
    oBlob.Read(array, 0, Convert.ToInt32(myArray.Length));
    oBlob.Erase();
    oBlob.Close();
    oBlob.Dispose();
} 
```

然后，我可以`myArray`这样做：

```
if (myArray != null)
{
   if (myArray.Length > 0)
   {
       MyImage.Source = LoadBitmapFromBytes(myArray);
   }
} 
```

而我`LoadBitmapFromBytes`从另一个答案修改的功能：

```
public static BitmapImage LoadBitmapFromBytes(byte[] bytes)
{
    var image = new BitmapImage();
    using (var stream = new MemoryStream(bytes))
    {
        stream.Seek(0, SeekOrigin.Begin);
        image.BeginInit();
        image.StreamSource = stream;
        image.CreateOptions = BitmapCreateOptions.PreservePixelFormat;
        image.CacheOption = BitmapCacheOption.OnLoad;
        image.UriSource = null;
        image.EndInit();
    }

    return image;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-07T12:13:01.977

从原始字节创建一个 MemoryStream 并将其传递给您的 Bitmap 构造函数。

像这样：

```
MemoryStream stream = new     MemoryStream(bytes);
Bitmap image = new Bitmap(stream); 
```

# css - 将 CSS URL 重定向到一个没有 www 子域的 URL

> ID：15270845
> 
> 赞同：0
> 
> 时间：2013-03-07T12:07:52.540
> 
> 标签：css, jsf, url-rewriting, glassfish, prettyfaces

我想知道是否有办法在发生请求时删除 www （或添加）。

这是我的问题：

我以这种方式插入 CSS：“//domain.com.br/resources/cssname.css”

如果我访问页面 http，一切正常，但是当我使用“www.domain.com.br”访问页面 https 时，页面不会加载 CSS 文件

如果我像这样插入 CSS：“//WWW.domain.com.br/resources/cssname.css”，则会发生相反的情况，当我使用“domain.com.br”访问页面时，没有 CSS。

我可以在使用删除 wwww 或所有请求添加 www 时更改所有请求吗？

我看到漂亮的脸可以用这个来完成吗？

另外，我正在使用 glassfish，我不知道这是否可以由那里或由提供者完成。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:28:26.820

您根本不必担心所有 CSS/JS/图像资源中的域名或上下文路径。

代替

```
<link rel="stylesheet" href="//domain.com/context/resources/style/some.css" />
<script src="//domain.com/context/resources/script/some.js"></script>
<img src="//domain.com/context/resources/images/some.png" /> 
```

甚至

```
<link rel="stylesheet" href="#{request.contextPath}/resources/style/some.css" />
<script src="#{request.contextPath}/resources/script/some.js"></script>
<img src="#{request.contextPath}/resources/images/some.png" /> 
```

甚至像其他答案所建议的那样笨拙地更长

```
<link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/resources/style/some.css" />
<script src="#{facesContext.externalContext.requestContextPath}/resources/script/some.js"></script>
<img src="#{facesContext.externalContext.requestContextPath}/resources/images/some.png" /> 
```

你*实际上*应该使用

```
<h:outputStylesheet name="style/some.css" />
<h:outputScript name="script/some.js" />
<h:graphicImage name="images/some.png" /> 
```

而且，对于 CSS 背景图像，而不是

```
.some {
    background-image: url("../images/some.png");
} 
```

你*实际上*应该使用

```
.some {
    background-image: url("#{resource['images/some.png']}");
} 
```

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-resource-in-facelets-template/8368727#8368727)
*   [JSF 资源库有什么用途，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)
*   [将 JSF 前缀更改为后缀映射迫使我在 CSS 背景图像上重新应用映射](https://stackoverflow.com/questions/6835499/changing-jsf-prefix-to-suffix-mapping-forces-me-to-reapply-the-mapping-on-css-ba/6835701#6835701)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:15:06.497

就个人而言，我总是使用：

```
#{facesContext.externalContext.requestContextPath}/resources/cssname.css 
```

作为我的任何资源的路径。这样，我确信我总是能找到正确的途径来获取我的资源。

希望这有助于干杯

# c++ - C++ fstream 读取 utf-8 字符集

> ID：15270853
> 
> 赞同：0
> 
> 时间：2013-03-07T12:08:09.470
> 
> 标签：c++, locale, symbols, fstream

我有一个带有立陶宛符号的文本文件，但它无法正确读取。而不是 Ž 我得到了这个……</p>

设置语言环境也不起作用

`setlocale(LC_ALL, "Lithuanian");`

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:24:44.063

语言环境是如何`"Lithuanian"`定义的？特别是，它定义使用什么编码？根据这一点，您可能还必须在语言环境中指定编码。像 `"Lithuanian.UTF-8"`，也许，或 `"Lithuanian_Lithuania.UTF-8"`。在 Windows 下，您可能必须`"65001"`使用`"UTF-8"`. （语言环境名称的常用语法是 . 现代 Windows 正在逐渐转向 Posix 语言环境名称，其中语言和地区使用 ISO 639-1 和 ISO 3166-1 中的代码指定，但根据您的版本，您可以必须使用较旧、较长的名称和代码页，而不是编码。）`*language*_*location*.*encoding*`

# java - 使用具有给定模数和指数的 RSA 算法在 Android 中进行加密

> ID：15270859
> 
> 赞同：4
> 
> 时间：2013-03-07T12:08:22.210
> 
> 标签：java, android, encryption, rsa

我之前在 C# 中使用了 RSACryptoServiceProvider 来加密一些数据，现在我必须在 Android 程序中复制这种加密。我希望我的 Android 程序生成与我在 C# 程序中得到的结果相同的结果。

**公钥：**

```
<RSAKeyValue>
    <Modulus>zz4qdc39y1BHyJgVXUkINJSbsUd1ZJPISyE9nNGjqgR+ZO1a4cE3ViVCSZCw+6dBdVMFNjzZPBxl0mT57GIq7rcuoT0scesZgxOftbMasPbxp0BGrh3HTpbBMJdCopgcYV98CZERakb8Pgbb0ne/DiW9Aq0kfTBE02/iEHRNuqMNfo1GFo55m0OKbxVoM6UBb8AITQ6lbdvfCgeIvMzRlVrHCwxUNrrX5cS6gurEfJ8Da+prKQmwWpFCkwDkPWje2W+bTSPUc9l6Ads0UimYE5sGs4Zsfz6Eocz4rJjR+qCiB8qt6HtdyjKo0auqYzyXIjdRv2950flc9tOh5bRlQQ==
    </Modulus>
    <Exponent>AQAB</Exponent>
</RSAKeyValue> 
```

**Java加密程序：**

```
byte[] modulusBytes = Base64.decode(Modoutput.getBytes("UTF-8"),
        Base64.DEFAULT);
byte[] exponentBytes = Base64.decode(Expoutput.getBytes("UTF-8"),
        Base64.DEFAULT);
BigInteger e = new BigInteger(1, exponentBytes);
BigInteger m = new BigInteger(1, modulusBytes);
RSAPublicKeySpec keySpec = new RSAPublicKeySpec(m, e);
KeyFactory fact = KeyFactory.getInstance("RSA");
PublicKey pubKeyn = fact.generatePublic(keySpec);

Log.i("Publickey", pubKeyn.toString());
Cipher cipher = Cipher.getInstance("RSA/ECB/NoPadding");
cipher.init(Cipher.ENCRYPT_MODE, pubKeyn);
byte[] encryptedByteData = cipher.doFinal(byteData);
String outputEncrypted = Base64.encodeToString(encryptedByteData,
        Base64.NO_WRAP);

Log.i("Encrypteddata", outputEncrypted); 
```

我尝试了上面的代码，但它给出了与 C# 完全不同的输出。谁能告诉我我的代码有什么问题？提前致谢。

* * *

***编辑***：根据要求，这是我试图在 Java 中复制加密输出的 C# 代码：

```
public static string EncryptText(string text, int keySize,
        string publicKeyXml) {
    var encrypted = Encrypt(Encoding.UTF8.GetBytes(text), keySize,
            publicKeyXml);
    return Convert.ToBase64String(encrypted);
}

public static byte[] Encrypt(byte[] data, int keySize, string publicKeyXml) {
    if (data == null || data.Length == 0)
        throw new ArgumentException("Data are empty", "data");
    int maxLength = GetMaxDataLength(keySize);
    if (data.Length > maxLength)
        throw new ArgumentException(String.Format(
                "Maximum data length is {0}", maxLength), "data");
    if (!IsKeySizeValid(keySize))
        throw new ArgumentException("Key size is not valid", "keySize");
    if (String.IsNullOrEmpty(publicKeyXml))
        throw new ArgumentException("Key is null or empty", "publicKeyXml");

    using (var provider = new RSACryptoServiceProvider(keySize)) {
        provider.FromXmlString(publicKeyXml);
        return provider.Encrypt(data, _optimalAsymmetricEncryptionPadding);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:09:22.470

根据定义，加密试图隐藏有关纯文本的所有信息。这包括有关相同纯文本的信息。为此，它在各种填充模式中使用某种随机（例如 PKCS#1 v1.5 兼容填充或[RSA](https://www.rfc-editor.org/rfc/rfc3447)的 OAEP 填充）。所以从密码学的角度来说，如果你得到相同的结果，实现就会被*破坏。*

检查密文是否正确的方法是使用私钥对其进行解密。如果这导致您开始使用纯文本，那么您的实现是正确的。

[编辑] 请注意，您在 C# 代码中使用 OAEP 加密，而 Java 默认使用 PKCS#1 v1.5 兼容方案。您应该使用`"RSA/None/OAEPWithSHA1AndMGF1Padding"`或`"RSA/ECB/OAEPWithSHA1AndMGF1Padding"`。如果它不可用，请添加 Bouncy Castle 提供程序。

# c# - 在 C# 中使用 try catch 处理异常

> ID：15270862
> 
> 赞同：0
> 
> 时间：2013-03-07T12:08:32.433
> 
> 标签：c#, winforms, return, try-catch

我有 3 种方法，我尝试每种方法。如果在第三种方法中发生错误，则会进入异常。

```
private void M1()
{  
   try
   {
     //some code
     //calling M2()
     //some code
   }
   catch(Exception ex)
   {
      MessageBox.Show(ex.Message);
   }
}
private void M2()
{  
   try
   {
     //some code
     //calling M3()
     //some code
   }
   catch(Exception ex)
   {
      throw ex;
   }
}
private void M3()
{  
   try
   {
     //some code
     //Error Occur
     //some code
   }
   catch(Exception ex)
   {
      throw ex;
   }
} 
```

现在它直接进入 M1() 方法并显示异常。另一种方法是

```
private void M1()
{  
   try
   {
     //some code
     //calling M2()
     //some code
   }
   catch(Exception ex)
   {
      MessageBox.Show(ex.Message);
   }
}
private void M2()
{  
   try
   {
     //some code
     //calling M3()
     //some code
   }
   catch(Exception ex)
   {
      MessageBox.Show(ex.Message);
      return;
   }
}
private void M3()
{  
   try
   {
     //some code
     //Error Occur
     //some code
   }
   catch(Exception ex)
   {
      MessageBox.Show(ex.Message);
      return;
   }
} 
```

在异常之后它还会执行 M2() 和 M1() 中的代码。

哪个程序最好...,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:11:19.000

没有好的或坏的设计，只有你的场景决定了最好的方法。

如果您想在 M1 上捕获错误，则不要`Try .. catch`在 M2 和 M3 中写入。

如果要处理引发错误的函数中的错误，则将其放入`Try .. catch`相同的函数中。

# c# - ThinkTecture 身份服务器和 WebDAV

> ID：15270863
> 
> 赞同：0
> 
> 时间：2013-03-07T12:08:32.723
> 
> 标签：c#, webdav, thinktecture-ident-server

以下是我想要实现的东西：

*   处理所有 WebDAV 请求并根据我们的内部逻辑为用户提供服务的自定义 WebDAV 模块。
*   使用 ThinkTecture Identity Server 访问 WebDAV 的 OAuth

我们已将 ThinkTecture ID 服务器配置为与 OAuth 一起使用，并使用 Facebook/Google 作为身份提供者，而依赖方是 WebDAV URL。现在，当我们从浏览器执行获取请求时，客户端被重定向到 ThinkTecture HRD，用户获得身份验证并返回自定义响应。

但是当我们尝试使用 Office 2010/Mini - Redirector 等其他客户端时，它要求我们提供访问证书，我也在[这里](http://brockallen.com/2012/10/18/cors-iis-and-webdav/)阅读了 BrockAllen 的博客，他说我们必须从 Web.Config 中删除 WebDAV 模块为了让 IDP 工作。任何人都可以帮助我解决我们正在努力实现的目标吗？是否可以将 WebDAV 与 ThinkTecture 一起用作身份提供者？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:33:13.960

这是您正在寻找的 [http://www.webdavsystem.com/](http://www.webdavsystem.com/)

我一直在我的项目中使用它，它真是太棒了。

# teamcity - 使用 teamcity 监控网站状态的步骤

> ID：15270872
> 
> 赞同：0
> 
> 时间：2013-03-07T12:08:51.650
> 
> 标签：teamcity

我是teamcity的新手。

我想创建一些步骤，每小时检查给定的 url 和邮件状态。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:14:07.050

您可以创建一个自定义[MSBuild 目标](https://stackoverflow.com/questions/1089452/how-can-i-use-msbuild-to-download-a-file)，获取您选择的 url，并在该 MSBuild 目标中处理信息、邮件或您喜欢的任何内容。

然后您可以使用[Schedule trigger](http://confluence.jetbrains.com/display/TCD6/Configuring+Schedule+Triggers)，并让它在您选择的时间间隔内触发。

# wordpress - wp_get_attachment_url 不起作用

> ID：15270874
> 
> 赞同：0
> 
> 时间：2013-03-07T12:09:00.493
> 
> 标签：wordpress, wordpress-theming

我有一个模板文件，其中显示了一个名为下载的类别的帖子。对于每个帖子，我都附上了一个 pdf 文件。我在页面上提供了下载 pdf 文件的链接。但是当我点击下载链接时，它会转到帖子页面，然后我必须从那里点击下载文件。有什么方法可以不用去帖子直接下载。? 我尝试使用 wp_get_attachment_url 作为超参考。但它不起作用。我使用的代码如下：

```
<?php /*
Template Name: Downloads Template
*/
?>
<?php get_header(); ?>
<?php 
$recent = new WP_Query("cat=7&orderby=title&order=ASC"); 
while($recent->have_posts()):$recent->the_post();
$desc_values = get_post_custom_values("description");
?>
<div id="download_featured_image" class="<?php the_ID(); ?> download_image_title_desc">

       <a href="<?php the_permalink() ?>" rel="title">
    <?php
        if ( has_post_thumbnail() )  { 
            the_post_thumbnail();
        }
    ?></a>
<a href = "" >  <?php if ( is_user_logged_in() ) {
        echo "Download";
     }?></a>
    <a href=" http://localhost/wordpress/login.php"> <?php if( !(is_user_logged_in()) )
    {
        echo "Please signup/login to download this file";
    }
    ?>
</a>

<div id="Download_post_description">
        <?php 
            if( is_array( $desc_values ) )
            {
                foreach($desc_values as $key => $value );
                echo "$value</n>"; 
            }
        ?>
    </div>
</div>
<?php endwhile ?>
<?php get_footer(); ?> 
```

我想在我留空的href中提供上传pdf的链接。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:57:06.820

1.  添加 PDF 附件 ID 作为自定义字段值，例如**attach_pdf_id**。
2.  使用获取 URL`wp_get_attachment_url()`

-

```
<?php
if ( is_user_logged_in() ) {

    $pdf_link = wp_get_attachment_url( get_post_meta( get_the_ID(), 'attached_pdf_id', true ) );

    if ( $pdf_link ) {
        ?><a href = "<?php echo $pdf_link ?>" >Download</a><?php
    } else {
        ?>Sorry, no link available. Please contact the webmaser.<?php
    }
}
?> 
```

# qt - QML 迭代自定义元素和调用函数

> ID：15270875
> 
> 赞同：1
> 
> 时间：2013-03-07T12:09:01.540
> 
> 标签：qt, function, qml, loops

我有一个名为 MenuButton 的自定义元素：

```
import QtQuick 1.1
import VPlay 1.0

Image {
property alias text: buttontext.text
property alias mouseArea: area
property alias fontBold: buttontext.font.bold
property alias textSize: buttontext.font.pixelSize

id: button
source: "img/cloudButton.png"
opacity: 1

Text {
    id: buttontext
    color: "black"
    anchors.verticalCenter: parent.verticalCenter
    anchors.left: parent.left
    anchors.leftMargin: 50
    font.bold: true
}

MouseArea {
    id: area
    anchors.fill: parent

    onPressed: button.opacity = 0.7
    onReleased: button.opacity = 1.0

    onCanceled: button.opacity = 1.0
}

function doStuff {

    // do something here
}

    width: 200
    height: 60
} 
```

现在，在我的主视图中，我有一个包含 5 个菜单按钮的列。我想遍历它们并调用函数 doStuff()。我怎么做？我尝试使用 column.childAt(i) 之类的东西，但没有任何效果。

主视图.qml

```
Rectangle {

width: 480; height: 320
        // HERE IS MY PROBLEM, how do I iterate over all my elements in the column?
        function update() {

              for(var i = 0; i < 5; i++) {
                   column.childAt(i).doStuff(); // THIS IS WHAT I WANT TO DO
              }
        }

        Column {

            id: column
            spacing: 5
            anchors.centerIn: parent

            Repeater {
                id: repeater
                model: 5

                MenuButton {
                    id: levelbutton
                    text: "Level " + (modelData+1);
                    source: "img/cloud4.png"
                }
            }
        }
} 
```

问题出在 MainView.qml 中的更新函数中，我不知道如何迭代元素并调用 doStuff() 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:49:39.473

您可以使用[Component.onCompleted](http://qt-project.org/doc/qt-4.8/qml-component.html#onCompleted-signal)附加信号，如下所示：

```
import QtQuick 1.0

Rectangle {
    height: 600
    width: 600

    Repeater {
        model: 5
        Item {
            Component.onCompleted: console.log('Component ' + index + ' completed!')
        }
    }
} 
```

* * *

但是，请注意，这种命令式操作并不好，因为它会在模型​​更新后一直被调用。可能你有问题 X 并询问如何得到 Y，那（你认为）会解决你的 X？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:05:46.567

从我在[QDeclarativePositioners 类](http://www.qt.gitorious.org/qt/qt/blobs/4.8/src/declarative/graphicsitems/qdeclarativepositioners_p.h)的源代码中看到的内容，您无法访问子元素！

但是您可以改变调用 doStuff() 方法的方式：您希望何时调用它？经过一段时间后（然后将 Timer 元素添加到您的 MenuButton），或者当信号发生时？在后一种情况下，您可以使用 Connections 元素并收听在您使用 Column 和 Repeater 的调用 qml 文件中发出的信号。

干杯，克里斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:37:32.683

您可以通过所有 QtObjects 上的 children 属性访问元素的子元素。它包含一组子元素，可以在 javascript 中自由访问。

例如。element.children[0].doStuff()

一般来说，您应该避免需要手动迭代子级的操作。但是，如果您尝试编写对每个孩子进行通用调用的代码，您并不总是有选择的余地。

# wcf - WPF 应用程序中的 UseDefaultWebProxy 功能

> ID：15270876
> 
> 赞同：0
> 
> 时间：2013-03-07T12:09:03.257
> 
> 标签：wcf, wcf-binding

我在我的 wpf 应用程序中使用了一个 web 服务。在 app.config 中，Web 服务的绑定设置有一个属性为 UseDefaultWebProxy=true，现在我的问题是我希望必须从我的默认 Web 浏览器使用默认代理设置，比如 firefox、safari 等，但不能来自 Internet Explorer（现在这不是默认值）。

请建议。

# c# - 换出 JavaScript 中的 MVC4 Razor 标记

> ID：15270881
> 
> 赞同：0
> 
> 时间：2013-03-07T12:09:13.770
> 
> 标签：c#, javascript, asp.net-mvc

我有一个使用换出 JavaScript 的视图

```
@section JavaScript {
    <script type="text/javascript" src="@Url.Content("/Scripts/Index.js")" />
} 
```

我知道我可以直接在我的视图中的 JavaScript 部分中调用 Razor 命令，如下所示：

```
<script type="text/javascript">
    var someVariable = '@(Model.Name)'
</script> 
```

现在，我需要调用一个自定义 HtmlHelperExtension 方法，从我换出的 .js 文件中返回一个字符串值，但是当我这样写下来时：

```
var someVariable = '@(Html.someHtmlFunction())' 
```

'@(Html.someHtmlFunction())' 部分被解释为字符串本身，我的 someVariable 看起来像“@(Html.someHtmlFunction())”而不是“someReturnValue”。

是否可以从换出的 JavaScript 文件中调用 Razor 命令，还是必须在视图中包含 JavaScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:14:10.517

不，您不能在 .js 文件中执行此操作。在这些场景中，我通常会在页面上设置 JavaScript 变量并在 .js 文件中引用它。即使用`global`变量：

在 .cshtml 中：

```
var someVariable = '@(Html.someHtmlFunction())' // make sure this is before .js
@section JavaScript {
    <script type="text/javascript" src="@Url.Content("/Scripts/Index.js")" />
} 
```

在 Index.js 中：

```
console.log(someVariable); 
```

# iphone - 将 NSLayoutConstraints 应用于 UIView 子类

> ID：15270883
> 
> 赞同：5
> 
> 时间：2013-03-07T12:09:16.477
> 
> 标签：iphone, ios, autolayout, nslayoutconstraint

我之前尝试过在 IB 中使用 AutoLayout 约束，我了解它们是如何工作的，并且它们需要明确等...

但是，当您有多个视图时，它会变得有点复杂并且容易中断。

所以，我刚刚阅读了一篇关于一个人有同样问题并使用 ASCII 代码来创建约束的博客。

我有一个带有自定义 UITableViewCell 的 UITableView，它具有基于内容量的动态大小。自动布局的完美候选者。

所以，我尝试了几种方法，现在我已经减少了内容，以便单元格中只有一个标签。

如果标签用边框填充单元格，我想要什么。

即标准尺寸从单元格的每个边缘指向。

我已经这样做了......

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        _label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];
        _label.textColor = [UIColor colorWithWhite:0.53 alpha:1.0];
        _label.backgroundColor = [UIColor yellowColor];
        [self addSubview:_label];

        NSDictionary *views = NSDictionaryOfVariableBindings(_label);

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[_label]-|"
                                                                     options:0
                                                                     metrics:nil
                                                                       views:views]];

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|-[_label]-|"
                                                                     options:0
                                                                     metrics:nil
                                                                       views:views]];

        self.backgroundView = [[UIView alloc] initWithFrame:CGRectZero];
        self.backgroundColor = [UIColor clearColor];
    }
    return self;
} 
```

但是当显示单元格时，标签位于左上角，就像我用来初始化它的 CGRect 一样，我得到了关于约束的大量错误......

```
Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x1f859e40 h=--& v=--& UILabel:0x1f864a00.midX == + 5>",
    "<NSLayoutConstraint:0x1f86a4f0 H:|-(NSSpace(20))-[UILabel:0x1f864a00]   (Names: '|':MyCell:0x1f857740 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1f86a4f0 H:|-(NSSpace(20))-[UILabel:0x1f864a00]   (Names: '|':MyCell:0x1f857740 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-03-07 11:56:14.841 unasys[13082:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x1f85f7b0 V:|-(NSSpace(20))-[UILabel:0x1f864a00]   (Names: '|':MyCell:0x1f857740 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1f859ec0 h=--& v=--& UILabel:0x1f864a00.midY == + 5>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1f85f7b0 V:|-(NSSpace(20))-[UILabel:0x1f864a00]   (Names: '|':MyCell:0x1f857740 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-03-07 11:56:14.854 unasys[13082:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x1f86a540 H:[UILabel:0x1f864a00]-(NSSpace(20))-|   (Names: '|':MyCell:0x1f857740 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1f859e40 h=--& v=--& UILabel:0x1f864a00.midX == + 5>",
    "<NSAutoresizingMaskLayoutConstraint:0x1f859e80 h=--& v=--& H:[UILabel:0x1f864a00(10)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x1ed8e150 h=--& v=--& H:[MyCell:0x1f857740(320)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1f86a540 H:[UILabel:0x1f864a00]-(NSSpace(20))-|   (Names: '|':MyCell:0x1f857740 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-03-07 11:56:14.858 unasys[13082:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x1eda7260 h=--& v=--& V:[MyCell:0x1f857740(143)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x1f859f00 h=--& v=--& V:[UILabel:0x1f864a00(10)]>",
    "<NSLayoutConstraint:0x1f85f870 V:[UILabel:0x1f864a00]-(NSSpace(20))-|   (Names: '|':MyCell:0x1f857740 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1f859ec0 h=--& v=--& UILabel:0x1f864a00.midY == + 5>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1f85f870 V:[UILabel:0x1f864a00]-(NSSpace(20))-|   (Names: '|':MyCell:0x1f857740 )> 
```

而且我不知道从哪里开始调试它。约束绝对是最小的，但仍然完全失败。

有人能指出我如何让​​这个约束发挥作用的正确方向吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T12:15:59.403

线后

```
_label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 10, 10)]; 
```

添加

```
[_label setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

默认情况下，自动调整掩码也会变成约束，这与您设置的约束冲突，使其模棱两可

文档在这里：[setTranslatesAutoresizingMaskIntoConstraints](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

# f# - 是否有适用于 Oracle 的 F# 类型提供程序？

> ID：15270888
> 
> 赞同：5
> 
> 时间：2013-03-07T12:09:29.857
> 
> 标签：f#, type-providers, f#-3.0

是否有适用于 Oracle 的 F# 类型提供程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:36:17.257

嗯，有一个实体框架上下文的类型提供程序，EF 与 Oracle 一起工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-31T17:38:37.713

我推荐使用 SQLProvider，[https: //fsprojects.github.io/SQLProvider/](https://fsprojects.github.io/SQLProvider/)

从他们的页面：

```
#r "FSharp.Data.SqlProvider.dll" // only needed in .fsx script files

open FSharp.Data.Sql

type sql = SqlDataProvider<Common.DatabaseProviderTypes.ORACLE, connectionString, ResolutionPath = resolutionPath>
let ctx = sql.GetDataContext()

let customers = ctx.Customers |> Seq.toArray 
```

我什至使用 SQLProvider 对 Oracle 数据库中的函数进行单元测试，而不仅仅是获取实体。

同样来自他们的页面：

```
ctx.Functions.UfnGetSalesOrderStatusText.Invoke(0uy) 
```

# java - 覆盖/禁用超级接口方法

> ID：15270889
> 
> 赞同：3
> 
> 时间：2013-03-07T12:09:31.137
> 
> 标签：java, interface

考虑接口

```
public interface SuperInterface {

  public void execute(Map<String,object> argument);

}

public interface SubInterface extends SuperInterface {

  public void execute(Argument extra , Map<String,Object> args);

} 
```

即使它有不同的参数`SuperInterfaces.execute`，是否可以完全覆盖？`SubInterface.execute`

或者

我做错了吗？设计此规范的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:12:41.457

不可以。当您覆盖一个方法时，它必须具有相同数量和类型的参数。目前，您正在*重载*`execute`.`SubInterface`

但是，您可以`execute(Map<String, Object> args)`从.`execute(Argument extra , Map<String, Object> args)``SubInterface`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:15:50.707

> 是否可以用 SubInterface.execute 完全覆盖 SuperInterfaces.execute ，即使它有不同的参数？

如果您被允许这样做，您将违反协议。

> 我做错了吗？

是的当然。

> 设计此规范的正确方法是什么？

你不能不遵守协议。所以，你不能这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:19:55.650

我怀疑我是否理解你的问题。覆盖是重新定义具有相同参数（或子类型参数）的子类/接口中的方法。在这里，您正在重载方法。

作为一个接口，它不允许覆盖。bcz 覆盖是一个与定义相关的术语，但接口方法没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T12:14:17.417

你`SubInterface`应该是一`abstract`堂课。

然后你可以有一个默认值和实际调用`final`的实现。`one-arg execute``two-arg execute`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-31T10:33:52.777

您可以做的最好的事情是 @Deprecate(d) 该方法。

例如

```
 public interface SuperInterface {

      public void execute(Map<String,object> argument);

    }

    public interface SubInterface extends SuperInterface {

      @Deprecated
      public void execute(Map<String,object> argument);
      public void execute(Argument extra , Map<String,Object> args);

    } 
```

这样，您（和其他人）将收到有关类方法的无效使用的通知。如果您等待Java8，我认为您还可以在子接口中为该方法创建一个默认方法，并在有人执行它时抛出异常（当然实现类不应该实现该方法:)

# vba - 使用 VBA 在 Excel 中合并重复的单元格值及其总和

> ID：15270896
> 
> 赞同：0
> 
> 时间：2013-03-07T12:10:00.693
> 
> 标签：vba, excel, merge, duplicates

我正在尝试使用 VBA 在 Excel 中合并重复的单元格值。以下是数据示例：

> Col1 Col2
> 运行 1
> 运行 2
> 见 9
> 去 5
> 见 1

我需要合并这些信息，以便数据如下：

> Col1 Col2
> 跑 3
> 见 10
> 去 5

意思是，我需要合并第 1 列中的重复值，并在第 2 列中对它们的对应值求和。

我已经在这里咨询并尝试过类似的情况：[How to SUM / merge similar rows in Excel using VBA?](https://stackoverflow.com/questions/6409738/how-to-sum-merge-similar-rows-in-excel-using-vba?rq=1)

其中一项建议是以下宏：

```
Sub Macro1()
Dim ColumnsCount As Integer

ColumnsCount = ActiveSheet.UsedRange.Columns.Count

ActiveSheet.UsedRange.Activate

Do While ActiveCell.Row <= ActiveSheet.UsedRange.Rows.Count
    If ActiveCell.Value = ActiveCell.Offset(1, 0).Value Then
        For i = 1 To ColumnsCount - 1
            ActiveCell.Offset(0, i).Value = ActiveCell.Offset(0, i).Value + ActiveCell.Offset(1, i).Value
        Next
        ActiveCell.Offset(1, 0).EntireRow.Delete shift:=xlShiftUp
    Else
        ActiveCell.Offset(1, 0).Select
    End If
Loop
End Sub 
```

但是，它似乎正在创建一个无限循环，导致我的 excel 崩溃，而实际上没有合并任何东西。

有人对我如何调整此代码以达到我需要的合并解决方案有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:56:45.943

以下假设您的表格从单元格 A1 开始，并且从 C 列开始为空（如果不是，您将丢失合并行上的数据）

```
Sub mergeCategoryValues()
Dim lngRow As Long

With ActiveSheet

    lngRow = .Cells(.LastCell.Row, 1).End(xlUp).Row

    .Cells(1).CurrentRegion.Sort key1:=.Cells(1), header:=xlNo 'change this to xlYes if your table has header cells

    Do

        If .Cells(lngRow - 1, 1) = .Cells(lngRow, 1) Then
            .Cells(lngRow - 1, 2) = .Cells(lngRow - 1, 2) + .Cells(lngRow, 2)
            .Rows(lngRow).Delete
        End If

        lngRow = lngRow - 1

    Loop Until lngRow < 2

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T12:45:50.587

试试这个（先排序，然后运行你的代码）：

```
Sub Merge()

Dim ColumnsCount As Integer
Dim i As Integer

Range("A1").Sort Key1:=Range("A1"), Order1:=xlAscending, Header:=xlGuess, _
    OrderCustom:=1, Orientation:=xlTopToBottom, DataOption1:=xlSortNormal

Do While ActiveCell.Row <= ActiveSheet.UsedRange.Rows.Count
    If ActiveCell.Value = ActiveCell.Offset(1, 0).Value Then
        For i = 1 To ColumnsCount - 1
            ActiveCell.Offset(0, i).Value = ActiveCell.Offset(0, i).Value +     ActiveCell.Offset(1, i).Value
        Next
        ActiveCell.Offset(1, 0).EntireRow.Delete shift:=xlShiftUp
    Else
        ActiveCell.Offset(1, 0).Select
    End If
Loop

End Sub 
```

# c# - 将项目添加到 Sitecore 组合框

> ID：15270898
> 
> 赞同：2
> 
> 时间：2013-03-07T12:10:11.307
> 
> 标签：c#, sitecore, sitecore6

我正在创建一个具有这样标记的 Sitecore Sheer UI 向导

```
<WizardFormIndent>
   <GridPanel ID="FieldsAction" Columns="2" Width="100%" CellPadding="2">
      <Literal Text="Brand:" GridPanel.NoWrap="true" Width="100%" />
      <Combobox ID="Brand" GridPanel.Width="100%" Width="100%">
         <!-- Leave empty as I want to populate available options in code -->
      </Combobox>
   <!-- Etc. -->
</WizardFormIndent> 
```

但是我似乎找不到在旁边的代码中向组合框“品牌”添加选项的方法。有谁知道如何完成下面的代码？

```
[Serializable]
public class MySitecorePage : WizardForm
{
    // Filled in by the sheer UI framework
    protected ComboBox Brands;

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        if (!Context.ClientPage.IsEvent)
        {
             IEnumerable<Brand> brandsInSqlDb = GetBrands();

             // this.Brands doesn't seem to have any methods
             // to add options
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:48:02.107

首先，我假设您使用的是 Sitecore.Web.UI.HtmlControls 中的 Sitecore Combobox（而不是 Telerik 控件）？

查看反射器，它最终会做这样的事情：

```
foreach (Control control in this.Controls)
{
    if (control is ListItem)
    {
        list.Add(control);
    }
} 
```

所以我希望你需要通过你的brandsInSqlDb建立一个循环，实例化一个ListItem并将它添加到你的Brands Combobox。类似的东西

```
foreach (var brand in brandsInSqlDb)
{
    var item = new ListItem();
    item.Header = brand.Name; // Set the text
    item.Value = brand.Value; // Set the value

    Brands.Controls.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:44:49.273

它应该是小写的**B**（Combobox 不是 ComboBox）。完整的命名空间是：

```
protected Sitecore.Web.UI.HtmlControls.Combobox Brands; 
```

然后您可以添加选项，例如：

```
ListItem listItem = new ListItem();
this.Brands.Controls.Add((System.Web.UI.Control) listItem);
listItem.ID = Sitecore.Web.UI.HtmlControls.Control.GetUniqueID("ListItem");
listItem.Header = name;
listItem.Value = name;
listItem.Selected = name == selectedName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:08:20.347

我这样做的方式是首先从页面访问该`Combo`框：

```
ComboBox comboBox = Page.Controls.FindControl("idOfYourComboBox") as ComboBox 
```

现在您可以访问您在页面中定义的控件。现在你要做的就是给它赋值：

```
 foreach (var brand in brandsInSqlDb)
{
    comboBox .Header = brand.Name; // Set the text
    comboBox .Value = brand.Value; // Set the value
    Brands.Controls.Add(item);
} 
```

# node.js - 检查 NodeJs 中的互联网连接

> ID：15270902
> 
> 赞同：40
> 
> 时间：2013-03-07T12:10:28.103
> 
> 标签：node.js, networking, raspberry-pi

在 Raspberry Pi 上安装了 NodeJS，有没有办法检查 rPi 是否通过 NodeJs 连接到互联网？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-07T12:48:59.873

一种快速而肮脏的方法是检查 Node 是否可以解决`www.google.com`：

```
require('dns').resolve('www.google.com', function(err) {
  if (err) {
     console.log("No connection");
  } else {
     console.log("Connected");
  }
}); 
```

这并不是万无一失的，因为您的 RaspPi 可以连接到 Internet 但由于`www.google.com`某种原因无法解析，您可能还需要检查`err.type`以区分“无法解析”和“无法连接到名称服务器，因此连接可能下来”）。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-02-25T11:46:58.650

虽然 robertklep 的解决方案有效，但它远非最佳选择。`dns.resolve`如果您没有互联网连接，超时并给出错误大约需要 3 分钟，而`dns.lookup`几乎立即响应错误`ENOTFOUND`。

所以我做了这个功能：

```
function checkInternet(cb) {
    require('dns').lookup('google.com',function(err) {
        if (err && err.code == "ENOTFOUND") {
            cb(false);
        } else {
            cb(true);
        }
    })
}

// example usage:
checkInternet(function(isConnected) {
    if (isConnected) {
        // connected to the internet
    } else {
        // not connected to the internet
    }
}); 
```

这是迄今为止检查互联网连接的最快方法，它避免了所有与互联网连接无关的错误。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-07T13:13:29.583

前段时间我不得不在 NodeJS 应用程序中构建类似的东西。我这样做的方法是首先使用[networkInterfaces()](http://nodejs.org/api/os.html#os_os_networkinterfaces)函数是操作系统模块，然后检查一个或多个接口是否具有非内部 IP。

如果这是真的，那么我使用[exec()](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)开始 ping 一个定义明确的服务器（我喜欢 Google 的 DNS 服务器）。通过检查 exec() 的返回值，我知道 ping 是否成功。我根据接口类型调整了 ping 的数量。分叉一个进程会带来一些开销，但由于这个测试在我的应用程序中执行的并不频繁，我可以负担得起。此外，通过使用 ping 和 IP 地址，您不必依赖正在配置的 DNS。这是一个例子：

```
var exec = require('child_process').exec, child;
child = exec('ping -c 1 128.39.36.96', function(error, stdout, stderr){
     if(error !== null)
          console.log("Not available")
      else
          console.log("Available")
}); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-01-26T13:56:27.463

它不是尽可能万无一失，但可以完成工作：

```
var dns = require('dns');
dns.lookupService('8.8.8.8', 53, function(err, hostname, service){
  console.log(hostname, service);
    // google-public-dns-a.google.com domain
}); 
```

只需使用简单`if(err)`的并充分对待响应。:)

ps.：请不要告诉我 8.8.8.8 不是要解析的名称，它只是从 google 查找高可用性 dns 服务器。目的是检查连接性，而不是名称解析。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-09-05T16:47:01.243

这是一个单行：（节点 10.6+）

```
let isConnected = !!await require('dns').promises.resolve('google.com').catch(()=>{}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-03-28T15:28:43.217

由于我在这里关注其他解决方案中的 DNS 缓存，因此我尝试使用 http2 进行实际连接测试。我认为这是测试互联网连接的最佳方式，因为它不会发送太多数据，也不依赖单独的 DNS 解析，而且速度非常快。

请注意，这是[在 v8.4.0 中添加的](https://nodejs.org/api/http2.html)

```
const http2 = require('http2');

function isConnected() {
  return new Promise((resolve) => {
    const client = http2.connect('https://www.google.com');
    client.on('connect', () => {
      resolve(true);
      client.destroy();
    });
    client.on('error', () => {
      resolve(false);
      client.destroy();
    });
  });
};

isConnected().then(console.log); 
```

编辑：如果有人感兴趣，我把它做成[一个包。](https://www.npmjs.com/package/is-internet-available)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-05T13:16:09.017

我找到了一个伟大而简单的 npm 工具来检测互联网连接。它看起来更可靠。

首先你需要安装 `npm i check-internet-connected`

然后你可以像下面这样调用它

```
 const checkInternetConnected = require('check-internet-connected');

  const config = {
    timeout: 5000, //timeout connecting to each server(A and AAAA), each try (default 5000)
    retries: 5,//number of retries to do before failing (default 5)
    domain: 'google.com'//the domain to check DNS record of
  }

  checkInternetConnected(config)
    .then(() => {
      console.log("Internet available");          
    }).catch((error) => {
      console.log("No internet", error);
    }); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-10T18:11:15.520

从 2019 年起，您可以使用[DNS 承诺查找](https://nodejs.org/api/dns.html#dns_dnspromises_lookup_hostname_options)。

**注意**此 API 是实验性的。

```
const dns = require('dns').promises;

exports.checkInternet = function checkInternet() {
    return dns.lookup('google.com')
        .then(() => true)
        .catch(() => false);
}; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-23T05:17:02.557

检查我们的浏览器的互联网连接是否可用非常有帮助。

```
var internetAvailable = require("internet-available");

internetAvailable().then(function(){
    console.log("Internet available",internetAvailable);
}).catch(function(){
    console.log("No internet");
}); 
```

更多[互联网可用][1]：[https ://www.npmjs.com/package/internet-available](https://www.npmjs.com/package/internet-available)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-11-13T13:20:55.923

这是一个非常简单的函数，不导入任何东西，而是利用JS内置函数，并且只能在调用时执行，它不监控丢失/互联网连接；与使用缓存的某些答案不同，此结果是准确的，因为它不返回缓存结果。

```
const connected = fetch("https://google.com", {
    method: "FET",
    cache: "no-cache",
    headers: { "Content-Type": "application/json" },
    referrerPolicy: "no-referrer",
}).then(() => true)
  .catch(() => false); 
```

使用 await 调用它（确保你在异步函数中，否则你会得到一个承诺）

```
console.log(await connected); 
```

# java - 空吐司消息

> ID：15270909
> 
> 赞同：0
> 
> 时间：2013-03-07T12:10:44.707
> 
> 标签：java, android, android-layout

我有一个“行”视图，它有两个文本视图和一个复选框。我正在尝试实现它，以便在单击复选框时，它会在同一行中显示两个文本视图的字符串。

我已经实现了一个 for 循环来获取复选框视图的父级，然后迭代所有父级视图子级并从它们内部获取字符串。但是，我收到的不是文本，而是一条空的 Toast 消息。

我的第一堂课代码：

```
public class InteractiveArrayAdapter extends ArrayAdapter<model> implements
        OnClickListener {

    private final List<model> list;
    private final Activity context;

    public InteractiveArrayAdapter(Activity context, List<model> list) {
        super(context, R.layout.rep, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.rep, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.TextView07);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.CheckBox05);

            view.getParent();

            viewHolder.checkbox
                    .setOnClickListener(new CompoundButton.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            boolean h = ((CompoundButton) v).isChecked();
                            model element = (model) viewHolder.checkbox
                                    .getTag();
                            element.setSelected(h);

                            ViewGroup row = (ViewGroup) viewHolder.checkbox
                                    .getParent();

                            for (int itemPos = 0; itemPos < ((ViewGroup) row)
                                    .getChildCount(); itemPos++) {
                                View view = ((ViewGroup) row)
                                        .getChildAt(itemPos);
                                if (view instanceof TextView) {
                                    viewHolder.text = (TextView) view; //Found it!
                                    Toast.makeText(context,
                                            viewHolder.text.getText(), 10000)
                                            .show();

                                    break;
                                }
                            }
                        }
                    });

            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    }
} 
```

我的二等车型：

```
public class ListActivity1 extends ListActivity {

    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.activity_list);
        // Create an array of Strings, that will be put to our ListActivity
        InteractiveArrayAdapter adapter = new InteractiveArrayAdapter(this,
                getModel());
        setListAdapter(adapter);
    }

    private List<model> getModel() {
        List<model> list = new ArrayList<model>();
        list.add(get("Linux"));
        list.add(get("Windows7"));
        list.add(get("Suse"));
        list.add(get("Eclipse"));
        list.add(get("Ubuntu"));
        list.add(get("Solaris"));
        list.add(get("Android"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));
        list.add(get("iPhone"));

        // Initially select one of the items
        list.get(1).setSelected(true);
        return list;
    }

    private model get(String s) {
        return new model(s);
    }
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:09:42.907

请尝试使用此适配器而不是您的自定义适配器。

```
public class ListAdapter<T extends BaseEntity> extends ArrayAdapter {
    @SuppressWarnings("unused")
    private final List<T> objects;
    private Activity activity;

    private final List<T> checkboxStatusListOfObject;

    private OnClickListener listener;

    @SuppressWarnings("unchecked")
    public ListAdapter(Activity activity, List<T> objects,
        OnClickListener listener, List<T> checkboxStatusListOfObject) {
        super( R.layout.simple_row_checkbox_1_item_listview , objects);
        this.objects = objects;
        this.activity = activity;
        this.listener = listener;
        this.checkboxStatusListOfObject = checkboxStatusListOfObject;

        getFilter();
    }

    @SuppressWarnings("unchecked")
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        ObjectViews sqView = null;

        if(rowView == null)
        {
            // Get a new instance of the row layout view
            LayoutInflater inflater = this.activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.YourCustomLAyout, null);

            // Hold the view objects in an object,
            // so they don't need to be re-fetched
            sqView = new ObjectViews();
            sqView.checbox = (CheckBox) rowView.findViewById(R.id.checkbox);
            if(this.listener !=null){
            sqView.checbox.setOnClickListener( this.listener);
            }
            sqView.text1 = (TextView) rowView.findViewById(R.id.text);
            sqView.dataObject = new Object();

            // Cache the view objects in the tag,
            // so they can be re-accessed later
            rowView.setTag(sqView);
        } else {
            sqView = (ObjectViews) rowView.getTag();
        }

        // Transfer the stock data from the data object
        // to the view objects
        T object = (T) objects.get(position);
        sqView.text1.setText(object.toString());

        sqView.checbox.setText("");
        sqView.checbox.setTag(sqView);
        sqView.dataObject = object;

        if(sqView.getChecbox().isChecked()){
            if(this.checkboxStatusListOfObject.indexOf( sqView.dataObject) != -1 ){
            sqView.getChecbox().setChecked(true);
            }
            else{
            sqView.getChecbox().setChecked(false);
            }
        }
        return rowView;
    }

    public class ObjectViews {
        Object dataObject;
    CheckBox checbox;
        TextView text1;
    public Object getDataObject() {
        return dataObject;
    }
    public void setDataObject(Object dataObject) {
        this.dataObject = dataObject;
    }
    public CheckBox getChecbox() {
        return checbox;
    }
    public void setChecbox(CheckBox checbox) {
        this.checbox = checbox;
    }
    public TextView getText1() {
        return text1;
    }
    public void setText1(TextView text1) {
        this.text1 = text1;
    }

    } 
```

在活动中定义您的侦听器并发送到适配器。

```
OnClickListener listener = new OnClickListener() {

        @Override
        public void onClick(View v) {
             CheckBox cb = (CheckBox) v ;  
             // here your code
             if(cb.isChecked()){
                  ObjectViews object = (ObjectViews) cb.getTag();
                  String text = object.getText1().getText();
                  Toast.makeText(context,text, Toast.LENGTH_LONG).show();
             }
        }
    }; 
```

//你可以配置这个适配器构造函数。这只是一个例子

```
yourListView.setAdapter(
        new ListAdapter(getApplicationContext(), yourObjectList
            listener, YourSelectedObjectList)); 
```

和布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <CheckBox
        android:id="@+id/checkbox"
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:layout_weight="1"
        android:textSize="20dp" />

    <TextView
        android:id="@+id/text"
        android:layout_width="0dp"
        android:layout_marginLeft="10dp"
        android:layout_height="wrap_content"
        android:layout_weight="4"
        android:textSize="20dp" />

</LinearLayout> 
```

# javascript - 禁用html中的自动输入文本

> ID：15270913
> 
> 赞同：0
> 
> 时间：2013-03-07T12:10:58.497
> 
> 标签：javascript, html, authentication

我正在用 html 构建一个身份验证（用户名和密码）页面，我想确保用户插入其用户名/密码组合的所有字符（没有复制和粘贴、自动完成等...）

但我对密码管理器扩展（例如 lastpass）有疑问。如何防止他们自动写入用户名/密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:28:58.427

使用 html5 可以防止自动完成

要确保您的 html 文档是 html，请使用以下 doctype

要使输入字段阻止自动完成：

```
<input type="password" name="passw" autocomplete="off"> 
```

# ruby-on-rails - 将多个 activerecord 对象从控制器传递到视图的方法应该是什么？

> ID：15270914
> 
> 赞同：0
> 
> 时间：2013-03-07T12:10:59.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我举个例子。

假设我有 Category 和 Product 作为我的两个模型，另一个 ChosenProduct 指定/处理它们之间的多对多关系。现在，当我有某些类别并且我在这些类别上循环迭代以获得相应的产品时。如何在我的视图中访问这些多个产品对象？

我是 Rails 和 MVC 的新手，所以现在我自己在做这个任务。但我认为这不应该是正确的方式。我应该如何处理这个？

我正在按要求添加我的视图代码。现在这对我来说很好。但我不认为它漂亮。

```
 <ul>
    <% @categories.each do |category| %>
    <li>
    <%= image_submit_tag("add.png", :height => "20", :width => '20', :name=>"add_product_to_#{category.id}", :id=>"add_product_to_#{category.id}" ) %>

    <%= category.category_name %>
    <% @chosen_products = category.chosen_products %>
    <% @chosen_products.each do |chosen_product| %>
        <% @products = Product.where(:id => chosen_product.product_id).all %>
        <% @products.each do |product| %>
            <ul>
                <li><%= product.product_name %>
                    <ul>
                        <li><%= image_tag("#{product.product_image_url}", :size => "200x200", :alt => "Can not load image!") %></li>
                        <li><%= product.product_image_url %></li>
                    </ul>
                </li>
            </ul>
        <% end %>
    <% end %>
<% end %>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:50:34.470

我假设您已将模型之间的关联定义为

应用程序/模型/chosen_product.rb

```
class ChosenProduct < ActiveRecord::Base
  belongs_to :category
  belongs_to :product
end 
```

应用程序/模型/category.rb

```
class Category < ActiveRecord::Base
  has_many :chosen_products
  has_many :products, through: :chosen_products
end 
```

所以在你看来你可以做

```
<ul>
  <% @categories.each do |category| %>
  <li>
    <%= image_submit_tag("add.png", :height => "20", :width => '20', :name=>"add_product_to_#{category.id}", :id=>"add_product_to_#{category.id}" ) %>

    <%= category.category_name %>
    <% category.products.each do |product| %>
      <ul>
         <li><%= product.product_name %>
            <ul>
               <li><%= image_tag("#{product.product_image_url}", :size => "200x200", :alt => "Can not load image!") %></li>
               <li><%= product.product_image_url %></li>
            </ul>
         </li>
      </ul>
    <% end %>
 </li>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:10:18.153

要遍历同一类的对象集合，您必须使用部分对象，它将为您遍历您的集合。假设：

```
#controller
def index
 @categories = Category.all
end 
```

然后，您将需要`_category.html.erb`在您的视图/类别/中调用一个局部视图，其中包含您的视图逻辑。让我们假设你的部分是：

```
 <div class="info">
       <p class="name"><%= category.name %></p>
</div> 
```

部分将接收一个类别的集合，它会自动迭代该集合。因此，在部分中，您必须以单数形式调用对象，在这种情况下`category`是指正在渲染的实际对象。

然后在您`index.html.erb`看来，您所需要的只是渲染部分。

```
<%= render @categories %> 
```

或者

```
<%= render(partial: "categories/category", collection: @categories) || "<h1>There are no categories</h1>".html_safe %> 
```

`||`如果集合`@categories`为空，第二个选项将呈现旁边的内容。

# sql-server - 使用 SQL Server 在 Access 中写入冲突

> ID：15270919
> 
> 赞同：2
> 
> 时间：2013-03-07T12:11:13.567
> 
> 标签：sql-server, ms-access

这个网站上还有其他问题确实与我要问的问题非常接近，但我的问题略有不同（如果有人知道存在的问题完全涵盖了这个问题，那么请指导我）。

我有 Windows Server 2003，上面有 SQL Server 2000（我认为）。在那个 SQL Server 上，我有 5 个数据库，其中四个是我目前使用的。现在，我还有一台笔记本电脑（win xp pro），上面安装了企业管理器的副本，我通过笔记本电脑维护 SQL 数据库，没有任何问题（通过网络，换句话说）。

我在笔记本电脑上还有一个带有 ODBC 链接的 Access 中的“前端”，这样我就可以使用 Access 中的表单来查看 SQL 中表的内容。几个星期以来，我对这个设置没有任何问题（因为我实际上创建了数据库）。

但是，我在 Access 中遇到的问题是我能够更改其中两个数据库中的信息，但不能更改另外两个数据库中的信息。当我尝试更改两个 NON 工作中的任何一个时，我得到一个“写入冲突 - 此记录已被另一个用户更改......”，但是我是唯一的用户！我使用的是 SQL Server 登录名，每次打开 Access 前端时都必须输入该登录名。这里发生了什么？我已经阅读了有关时间戳字段的内容，但我不明白为什么我可能必须实施或实际上如何实施？这个问题快把我逼疯了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:25:10.040

您正在修改的表在 2 个不起作用的数据库中是否具有正确的主键？我问的原因是，如果 Access 无法确定您正在更新的确切记录（由于缺少主键或其他唯一字段），它通常会给出“写入冲突”错误。正如您所提到的，人们经常在出现此问题时建议使用时间戳字段，但根据我的经验，这仅在处理 Access 和 MySQL 时有所帮助，而不是 SQL Server。

另外，您使用的是哪个版本（和服务包）的 Access？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-29T16:28:57.123

如果您有任何 BIT 字段，如果您正在对表进行更新，则必须在 BIT 字段中插入一个值，即在每个字段中插入“0”。它们不能为空。

# javascript - Express / Node.js - 使用数据渲染页面

> ID：15270922
> 
> 赞同：0
> 
> 时间：2013-03-07T12:11:16.057
> 
> 标签：javascript, node.js, express

我的页面上有一个`Teams`显示为链接列表的列表，目前，我有一个文本框....当单击该链接时，该链接`Team`被`Key`获取`Team`并发送到该`/team/:key`路线，它会搜索`Team`by `Key`，获取数据并将数据发回。如果数据成功发送回 JS 文件，则`Team`名称将输出到文本框。

我想改变这一点，当点击链接并使用`Team.findByKey`我想呈现一个新页面（'teamDetails'）检索数据并将其传递给它的数据时`Team`。通过这种方式，我可以使每个链接都指向单个页面的`Team`链接，其中`Team's`包含完整的详细信息。

知道我将如何调整这`/team/:key`条路线来做到这一点吗？

`JS file`

```
// Setup teamsLink to retrieve Team info for whichever Team was clicked
Team.initTeamsLink = function(){
  $("a.teamLink").live("click", function(e){
    e.preventDefault();
    var teamId = ($(this)[0]).getAttribute('id');

    $.get('/team/'+teamId, function(response){
      if(response.retStatus === 'success'){
        var teamData = response.teamData;
        $('#teamId').val(teamData.key);
        $('#teamName').val(teamData.name);
      } else if(response.retStatus === 'failure'){

      }
    });  
  });
 }; 
```

`Route`

```
 app.get('/team/:key', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    Team.findByKey(req.params.key, function(err, teamData){
      if(!err && teamData){
        teamData = teamData;
        res.json({
          'retStatus' : 'success',
          'teamData' : teamData
        });
      } else {
        util.log('Error in fetching Team by key : ' + req.params.key);
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team by key ' + req.params.key
        });
      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:06:05.237

使用车把模板 - [http://handlebarsjs.com/](http://handlebarsjs.com/)

```
npm install handlebars
npm install hbs 
```

咖啡脚本：

```
hbs = require 'hbs'

app.set 'views', __dirname + '/app/views' #folder with your views
app.set 'view engine', 'hbs'
app.use express.bodyParser()
app.use express.methodOverride() 
```

在路由器中：

```
res.render 'index', {title: 'index'} #view name and context 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:21:36.843

代替`res.json()`，您可以使用模板引擎来呈现单个团队的页面。假设你想使用[EJS](https://github.com/visionmedia/ejs)模板：

```
npm install ejs 
```

接下来， create `views/team.ejs`，它将包含团队的 EJS 模板。在您的路线中，替换`res.json()`为对模板引擎的调用：

```
res.render('team.ejs', { 'teamData' : teamData }); 
```

**编辑**：只需阅读您关于使用 Jade 模板的评论：代码非常相似，只需替换`team.ejs`为`teamDetails.jade`.

此外，您可能可以删除处理链接上的点击事件的客户端代码，因为您不想再执行 AJAX 请求。

# php - 如何将相同的产品添加到购物车页面但产品尺寸不同？

> ID：15270926
> 
> 赞同：0
> 
> 时间：2013-03-07T12:11:31.040
> 
> 标签：php, shopping-cart

我想在购物车页面中添加不同类型的产品？如何将相同的产品添加到购物车页面但产品尺寸不同？

**我想要这个购物车**

1) 产品 A 1950 小 2) 产品 A 1950 大 3) 产品 A 1950 XL

* *javascript **

```
<script language="javascript">
function addtocart(id){
document.form1.id.value=id;
document.form1.command.value='add';
document.form1.submit();
}
</script> 
```

**php代码**

```
$sizes=$_POST['size'];
include("cart/functions.php");
if($_REQUEST['command']=='add' && $_REQUEST['id']>0){
$id=$_REQUEST['id'];
addtocart($id,1);
header('location:shoppingcart.php?size='.$sizes.'');    
exit();
} 
```

**加入购物车的表格 1**

```
<form name="form1" method="post">
<input type="hidden" name="id" />
<input type="hidden" name="command" />
</form> 
```

**尺寸表**

```
<form action="" id="size1" name="size1" method="post">
<div class="details clearfix">
<p class="item">
<label style="font-family:Arial,Helvetica,sans-serif; font-size:12px; font-weight:bold; ">Choose your size:</label>
<select style="background-color:#CCC" name="size" id="size" >
<option>Select</option>
<option value="Small">Small</option>
<option value="Medium">Medium</option>
<option value="Large">Large</option>
<option value="XL">XL</option>
</select>
</div> 
```

**添加到购物车按钮**

```
<div class="buy">
<?php 
$query3=mysql_query("select * from products WHERE id='$id' ");
$row3=mysql_fetch_array($query3);
?>
<input type="button" class="button1" value="Add To Cart" >
</div>
</form> 
```

**购物车页面**

```
<?php
if(is_array($_SESSION['cart'])){
echo '<tr bgcolor="#FFFFFF" style="font-weight:bold"><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Name</font></td>
<td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Image</font></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Price</font></td>
<td><div><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Size</font></div></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Amount</font></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Options</font></td></tr>';

$max=count($_SESSION['cart']);
or($i=0;$i<$max;$i++){
$id=$_SESSION['cart'][$i]['id'];
$q=$_SESSION['cart'][$i]['qty'];
$product=get_product_name($id);
$image=get_product_image($id);
$ids=get_id($id);
$itemcode=get_itemcode($id);
$size=get_size($id);
if($q==0) continue;
?>

<tr bgcolor="#FFFFFF"><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><input type="hidden" name="itemcode[]" value="<?php echo $itemcode?>" /><input type="hidden" name="ids[]" value="<?php echo $ids?>" /><input type="hidden" name="product[]" value="<?php echo $product?>" /><?php echo $product?></font></td><td align="center"><input type="hidden" name="image[]" id="image"  value="<?php echo $image?>"  /><img name="image" id="image" src="admin/uploads/small0_<?php echo $image?>" width="150" height="150"></td>

   <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">  <input type="hidden" name="price[]" id="price" value="<?php echo get_price($id)?>"/>Rs.<?php echo get_price($id)?></font></td>
  <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><?php echo $size ?></font><input type="hidden" name="size" value="<?php echo $size?>" /></td>                    
 <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><input type="hidden" name="amt[]"  value="<?php echo get_price($id)*$q?>"/> Rs.<?php echo get_price($id)*$q?></font></td>
   <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><a href="javascript:del(<?php echo $id?>)"><input type="button" class="button5" value="Remove" /></a></font></td></tr>
  <?php                 
  }
  ?>

  <tr><td colspan="6" align="right"><b><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><input type="hidden" name="total" id="total" value="<?php echo get_order_total()?>"/>Order Total:Rs.<?php echo get_order_total()?></font></b></td></tr>        
  <tr><td colspan="6" align="right"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000; !important">Cash On Delivery & Free Shipping</font></td></tr>  
 <tr><td colspan="6" align="right">

 <?php  $query1=mysql_query("SELECT * FROM category ORDER BY id ") or die ('Product Query Problem');
  $row4=mysql_fetch_array($query1);$ids=$row4['id'];$cat_name=$row4['categories'];?><input type="button" class="button1" value="Continue Shopping"  onclick="window.location='product.php'" /><input type="button" class="button2"  value="Clear Cart" onclick="clear_cart()"><input type="button" class="button3" value="Update Cart" onclick="update_cart()"><input type="submit" class="button4" name="order" id="order" value="Place Order"></td></tr>

   <?php
   }
  else{
  echo "<tr bgColor='#FFFFFF'><td><font style='font-family:Arial,Helvetica,sans-serif; font-size:15px; color:#000;'>There are no items in your shopping cart!</font></td>";
  }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:17:26.617

相反，您可以使用会话来执行此操作，并在成功购买后将其添加到数据库中。

**例子**

```
if(isset($_SESSION['items'][$_GET['item_id']])) {
    $_SESSION['items'][$_GET['item_id']]++;
    //multiply price code 
} else {
    $_SESSION['items'][$_GET['item_id']] = 1; //If added for the first time
    //set session for price
} 
```

参考。

[http://www.php-shopping-cart-tutorial.com/shopping-cart.htm](http://www.php-shopping-cart-tutorial.com/shopping-cart.htm)

[http://jameshamilton.eu/content/simple-php-shopping-cart-tutorial](http://jameshamilton.eu/content/simple-php-shopping-cart-tutorial)

[http://v3.thewatchmakerproject.com/journal/276/](http://v3.thewatchmakerproject.com/journal/276/)

# shell - 在 shell 脚本中调用的脚本文件中调用主脚本函数

> ID：15270934
> 
> 赞同：2
> 
> 时间：2013-03-07T12:11:42.473
> 
> 标签：shell

我还在学习编写 shell 脚本，所以我不知道这是否可以完成。

我有一个名为 main.sh 的主脚本

**主文件**

```
#!/bin/bash
function log {
    echo "[${USER}][`date`] - ${*}" >> ${LOG_FILE}
}

home/script/loadFile.sh && home/script/processData.sh 
```

所以我的问题是我可以在 loadFile.sh 和 processData.sh 脚本文件中调用我的 main.sh 日志函数吗？我试过了，但我得到了错误

> 第 1 行：日志：找不到命令

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:23:42.777

这不是可移植的，但`bash`您可以简单地导出函数定义：

```
export -f log
home/script/loadFile.sh && home/script/processData.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:18:18.410

你需要这样提示：

```
. home/script/loadFile.sh && . home/script/processData.sh 
```

但是，如果您`exit`的 loadFile.sh 或 processData.sh 中有一个命令，那么您的 main.sh 也将存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:25:59.093

当您启动`loadFile.sh`并`processData.sh`像您一样启动它们时，它们将作为普通可执行文件启动，因此父 shell 不会将其识别为 shell 脚本，并且会为每个脚本启动新的 shell 解释器实例。`log`新的 shell 解释器对你的函数一无所知。

当你像这样运行`loadFile.sh`时`processData.sh`：

```
. home/script/loadFile.sh && . home/script/processData.sh 
```

Shell 将它们视为 shell 脚本而不是普通的可执行文件并在当前上下文中执行，从而使函数`log`对它们可见。此外，任何在内部定义的函数/变量在退出`loadFile.sh`后`processData.sh`都会在父 shell 中可见，因此这些脚本有很多方法来破坏父 shell，这在某些情况下会导致这种方式不安全。

# java - Hibernate 和 playframework 给出 IllegalArgumentException ... 与 java.util.Map 类型不匹配

> ID：15270937
> 
> 赞同：1
> 
> 时间：2013-03-07T12:12:00.807
> 
> 标签：java, hibernate, jpa, playframework-2.1

当我将应用程序从 2.0.4 迁移到 2.1.0 时，会引发此异常：

```
play.api.Application$$anon$1: Execution exception[[IllegalArgumentException: Parameter value [shared.models.Restaurant@f59fc] was not matching type [java.util.Map]]]
    at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10-2.1.0.jar:2.1.0]
    at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10-2.1.0.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:132) [play_2.10-2.1.0.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:128) [play_2.10-2.1.0.jar:2.1.0]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10-2.1.0.jar:2.1.0]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10-2.1.0.jar:2.1.0]
java.lang.IllegalArgumentException: Parameter value [shared.models.Restaurant@f59fc] was not matching type [java.util.Map]
    at org.hibernate.ejb.AbstractQueryImpl.registerParameterBinding(AbstractQueryImpl.java:360) ~[hibernate-entitymanager-3.6.9.Final.jar:3.6.9.Final]
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:364) ~[hibernate-entitymanager-3.6.9.Final.jar:3.6.9.Final]
    at org.hibernate.ejb.criteria.CriteriaQueryCompiler$1$1.bind(CriteriaQueryCompiler.java:194) ~[hibernate-entitymanager-3.6.9.Final.jar:3.6.9.Final]
    at org.hibernate.ejb.criteria.CriteriaQueryCompiler.compile(CriteriaQueryCompiler.java:247) ~[hibernate-entitymanager-3.6.9.Final.jar:3.6.9.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:603) ~[hibernate-entitymanager-3.6.9.Final.jar:3.6.9.Final]
    at shared.dao.impl.GenericDAOImpl$QueryQuery.selectCount(GenericDAOImpl.java:273) ~[na:na] 
```

所有的 modelDao 都扩展了 this `GenericDAOImpl`。方法广告第 273 行是：

```
 Long selectCount(){
        CriteriaBuilder builder = JPA.em().getCriteriaBuilder();
        CriteriaQuery<Long> criteria = builder.createQuery(Long.class);
        Root<T> root = criteria.from( clazz );
        criteria.select(builder.count(root));
        criteria.where(buildWhere(builder, root));
        //buildSelectWhere(builder, root, criteria);
        return JPA.em().createQuery(criteria).getSingleResult();
    } 
```

该`clazz`变量是扩展 DAO 模型的一个 .class。我有点迷失在真正的问题是什么。顺便说一句，在 2.0.4 中，这工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T12:00:48.773

感谢 Play 开发者的出色工作，这一问题已在 2.1.2 版本中得到修复：

[https://github.com/playframework/playframework/pull/851](https://github.com/playframework/playframework/pull/851)

# mysql - SELECT 查询中的 IF 和 CASE 语句，其中包含子查询

> ID：15270942
> 
> 赞同：6
> 
> 时间：2013-03-07T12:12:10.803
> 
> 标签：mysql, subquery, inner-join

`menu_items.parent`如果不是**0** ，则下面的查询返回 NULL ，这是错误的。

我在这里要做的是，如果`menu_items.parent`行的值为**0** ，则将其作为原始值返回，但如果该值不为**0**，则返回该值的相应行的名称（varchar）。

知道为什么我一直得到 NULL 吗？

注意：所有其他选定的列都是正常的，因此查询本身很好。

谢谢

**示例 1：**

```
SELECT
...
...
(
   CASE
      WHEN menu_items.parent = '0' THEN menu_items.parent
      ELSE (SELECT name FROM menu_items WHERE id = menu_items.parent)
   END
) AS ParentID
...
...
FROM menus
INNER JOIN menu_items ...
...
... 
```

**示例 2：**

```
SELECT
...
...
IF
(
   menu_items.parent = '0',
      menu_items.parent,
      (SELECT name FROM menu_items WHERE id = menu_items.parent)
) ParentID
...
...
FROM menus
INNER JOIN menu_items ...
...
... 
```

**实际查询：**

```
SELECT
menus.name AS MenuName,
menu_items.id AS MenuItemsId,
menu_items.name AS MenuItemsName

/*
Sub section should go here
*/

FROM users
INNER JOIN assigned_menus ON assigned_menus.fk_users_id = users.id
INNER JOIN menu_items ON menu_items.id = assigned_menus.fk_menu_items_id
INNER JOIN menus ON menus.id = menu_items.fk_menus_id
WHERE
users.id = ? AND
users.is_active = 'YES' AND
menu_items.is_active = 'YES' AND
menus.is_active = 'YES'
ORDER BY
MenuName,
MenuItemsName 
```

**菜单项表**

```
ID      name                    parent       fk_menu_items_id
1   Menus           0       1
2   Roles           0       1
3   Permissions     0       1
4   Users           0       1
5   Files           0       1
6   File Uploads        0       1
7   University      6       1
8   Details         6       1
9   Progress        6       1
10  Assg            6       1
11  Applications        0       2
12  New             11      2
13  Edit            11      2
14  Rejected        11      2
15  Approved        11      2
16  Exs         0       2
17  Assm            16      2
18  Stf         0       3
19  Std         0       3
20  Prg         19      3
21  Comm            0       4
22  Sms         21      4
23  Sms2            21      4
24  New2            0       4
25  Act         0       4 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T12:15:02.077

```
 SELECT
...
...
(
   CASE
      WHEN menu_items.parent = '0' THEN menu_items.parent
      ELSE (SELECT mi.name FROM menu_items mi WHERE mi.id = menu_items.parent)
   END
) AS ParentID
...
...
FROM menus
INNER JOIN menu_items ...
...
... 
```

# javascript - 查找两个字符之间的文本，并为每个字符做一些事情

> ID：15270953
> 
> 赞同：2
> 
> 时间：2013-03-07T12:12:40.053
> 
> 标签：javascript, jquery

我有一个完整的文件，其中包含以下格式的文本：（忽略它是 CSS 的事实）我需要获取两者之间的字符串 | 字符，每次，做一些事情：

```
<div id="unused">
  |#main|
  #header|
  .bananas|
  #nav|
  etc
</div> 
```

我的代码是这样的：

```
var test_str = $('#unused').text();
var start_pos = test_str.indexOf('|') + 1;
var end_pos = test_str.indexOf('|',start_pos);
var text_to_get = test_str.substring(start_pos,end_pos);
//I want to do something with each string here 
```

这只是得到第一个字符串。如何在其中添加逻辑来为每个字符串做一些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:13:50.333

您可以使用 split 方法来获取之间的字符串数组`|`

**[现场演示](http://jsfiddle.net/ucCbY/)**

```
arr = $('#unused').text().split('|'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:14:21.567

你可以像这样拆分

```
var my_splitted_var = $('#unused').text().split('|'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T12:16:08.450

单程;

```
$.each($("#unused").text().split("|"), function(ix, val) {
    val = $.trim(val); //remove \r|\n
    if (val !== "")
        alert(val);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T12:25:52.150

单程 ：

```
 var test_str = $('#unused').text();

while(!test_str.indexOf('|'))
{
var start_pos = test_str.indexOf('|') + 1;
var end_pos = test_str.indexOf('|',start_pos);
var text_to_get = test_str.substring(start_pos,end_pos);
test_str  = test_str.slice(end_pos,test_str.length);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T13:14:49.677

正则表达式版本：

**[现场演示（jsfiddle.net）](http://jsfiddle.net/Gj9LT/)**

```
var trimmedHtml = $("#unused").html().replace(/\s/g, '');

var result = new Array();

var regExp = /\|(.+?)(?=\|)/g;
var match = regExp.exec(trimmedHtml);
result.push(match[1]);
while (match != null) {
    match = regExp.exec(trimmedHtml);
    if (match != null) result.push(match[1]);
}

alert(result); 
```

所以你只能得到管道之间的元素（`|`）。在我的示例中，我将每个匹配结果推送到一个数组。您现在可以对其进行迭代以获得结果。

# ruby - Ruby 变量范围

> ID：15270956
> 
> 赞同：4
> 
> 时间：2013-03-07T12:12:44.637
> 
> 标签：ruby, scope

我一直在考虑学习一种用于 Web 开发的新动态脚本语言，在为 Python 和 Ruby 苦恼之后，因为我真的很喜欢这两种语言，我决定选择 Ruby（这几乎可以归结为抛硬币和事实在英国，RoR 工作比 Python/Django 多）。我的问题是关于 Ruby 的范围。我是否必须在方法中声明一个类属性才能从其他方法访问它？

例如，我不能做

```
class Notes
  @notes = ["Pick up some milk"]

  def print_notes
    puts @notes
  end
end 
```

看来我必须声明我想在构造函数中使用的属性？这个例子有效：

```
class Notes
  def initialize
    @notes = ["Pick up some milk"]
  end

  def print_notes
    puts @notes
  end
end 
```

这是正确的吗？我注意到用@@ 而不是@ 为示例一添加前缀有效，但据我了解，如果该类有一个子类（例如，Memo），那么对Notes 中以@@ 为前缀的属性的任何更改都会改变Memo 中的值？

对不起，如果这是一个重复的问题，只是一个迷路的菜鸟:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:22:01.837

当您`@notes`在类中声明，但不在构造函数或任何实例方法中声明时，您正在*为类*本身`@notes`的实例创建一个实例变量。每个类都作为一个实例存在。*`Class`*

 *```
class Notes
  @notes = ["Pick up some milk"]

      def print_notes
        puts @notes
      end
  end
# => nil
Notes.instance_variable_get(:"@notes")
# => ["Pick up some milk"] 
```

所以答案是肯定的，您确实需要在构造函数或其他一些实例方法中声明实例变量。我认为您更愿意这样做：

```
class Notes
  def notes
    @notes ||= []
  end

  def print_notes
    puts @notes
  end
end

note = Notes.new
note.notes << "Pick up some milk"
note.notes
# => ["Pick up some milk"] 
```

* * *

此外：

只需避免类变量，例如`@@notes`. 改用类实例变量（这是您无意中所做的）。

做这个：

```
class Notes
  def self.notes
    @notes ||= []
  end
end 
```

不是这个：

```
class Notes
  def notes
    @@notes ||= []
  end
end 
```

当你想要一个类变量时。后者会给你带来麻烦。（但我认为这是一个不同的对话。）*

# c# - 特殊字符未保存在 MS SQL 中

> ID：15270966
> 
> 赞同：2
> 
> 时间：2013-03-07T12:13:14.870
> 
> 标签：c#, sql-server-2008, unicode, encoding, character-encoding

我对这个捷克字符有一个小问题`ů`。当从我的 C# 代码触发更新时，这个小虫子不会保存到我的 MS SQL 表中。

如果我在 SQL Management Studio 中手动添加它，它会按原样保存，并且它也会正常显示在网站上。

但是从 C# 中保存它的过程仅以`u`保存在表中的字符作为结束，而不是`ů`.

我的 DB 字段是 type`nvarchar`并且`ntext`DB 的排序规则是`French_CI_AS`. 我正在使用 MSSQL 2008。

代码：

```
SqlCommand sqlcomLoggedIn = new SqlCommand("UPDATE Table SET id = 1, title = 'Title with ů' WHERE id = 1", sqlCon, sqlTrans);
int status = sqlcomLoggedIn.ExecuteNonQuery(); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:16:59.533

直接的问题是您没有使用 unicode 文字。它必须是：

```
UPDATE Table SET id = 1, title = N'Title with ů' WHERE id = 1 
```

这`N`很重要。

**更大的**问题是您应该使用参数：

```
int id = 1;
string title = "Title with ů";
// ^^ probably coming from C# parameters

using(var sqlcomLoggedIn = new SqlCommand(
    "UPDATE Table SET title = @title WHERE id = @id", sqlCon, sqlTrans))
{
    sqlcomLoggedIn.Parameters.AddWithValue("id", id);
    sqlcomLoggedIn.Parameters.AddWithValue("title", title);
    int status = sqlcomLoggedIn.ExecuteNonQuery();
} 
```

然后问题就消失了，您可以使用缓存的查询计划，*并*避免 sql 注入

# php - 通过 curl 连接 youtube？

> ID：15270967
> 
> 赞同：2
> 
> 时间：2013-03-07T12:13:16.463
> 
> 标签：php, curl, youtube-api

我已经通过 curl 连接了 youtube 以从我的服务器上传视频，以下是我的代码

```
<?php
$youtube_email = "------------------------"; // Change this to your youtube sign in email.
$youtube_password = "----------------"; // Change this to your youtube sign in password.

$postdata = "Email=".$youtube_email."&Passwd=".$youtube_password."&service=youtube&source=Example";
$curl = curl_init("https://www.google.com/youtube/accounts/ClientLogin");
curl_setopt($curl, CURLOPT_HEADER, "Content-Type:application/x-www-form-urlencoded");
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 1);
$rr= curl_getinfo($curl);

$response = curl_exec($curl);

curl_close($curl);
 print_r($response);
? 
```

它在我的本地主机中完美运行，但在我的服务器中出现以下错误，

```
Error=BadAuthentication Url=https://www.google.com/accounts/ServiceLogin?service=youtube#Email=xxxx@gmail.com 
```

这里有什么问题？

# sql - Oracle：声明错误

> ID：15270968
> 
> 赞同：0
> 
> 时间：2013-03-07T12:13:21.953
> 
> 标签：sql, oracle, plsql, oracle11g, plsqldeveloper

我正在尝试在 PL/SQL 开发人员中执行以下查询：

```
DECLARE 
 P_FILENAME VARCHAR2(200):= 'file1.csv';
 P_DIRECTORY VARCHAR2(200):= 'ORA_DIR';
 P_IGNORE_HEADERLINES NUMBER := 1;

BEGIN
 Load_file( P_FILENAME => P_FILENAME, P_DIRECTORY => P_DIRECTORY, P_IGNORE_HEADERLINES =>     P_IGNORE_HEADERLINES );
END 
```

我得到错误：

```
ORA-06550: line 9, column 0:
PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following:
; <an identifier> <a double-quoted delimited-identifier>
The symbol ";" was substituted for "end-of-file" to continue. 
```

我在哪里错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:23:53.863

`end`您在语句中缺少一个分号：

```
DECLARE 
 P_FILENAME VARCHAR2(200):= 'file1.csv';
 P_DIRECTORY VARCHAR2(200):= 'ORA_DIR';
 P_IGNORE_HEADERLINES NUMBER := 1;

BEGIN
 Load_file( P_FILENAME => P_FILENAME, P_DIRECTORY => P_DIRECTORY, 
           P_IGNORE_HEADERLINES =>     P_IGNORE_HEADERLINES );
END;
/ 
```

# git - 是否可以根据标准输入对文件进行 git-diff 比较？

> ID：15270970
> 
> 赞同：10
> 
> 时间：2013-03-07T12:13:42.293
> 
> 标签：git

假设我正在编辑一个文件。如果我保存文件，`git-diff`会给我它相对于索引的更改。我想在不先保存文件的情况下获取相对于索引的更改——对于“实时”差异。

一种解决方案是将未保存的更改写入临时文件（即将文件保存在其他位置），`git show :file > tempfile2`然后将暂存文件写入另一个临时文件（ ）`git-diff tempfile tempfile2`。然而，这似乎不优雅。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-11T16:19:33.533

自[git 1.5.1](https://git.kernel.org/cgit/git/git.git/tree/Documentation/RelNotes/1.5.1.txt?id=v1.8.2#n29)以来，有一个选项可以区分标准输入 - 它只是没有记录在案

`$ echo foo | git diff --no-index -- my_file -`

在玩这个多一点时，我意识到这可能不是 OP（或我）想要的 - 它将文件的当前状态差异到标准输入，而不是文件的最后提交状态到标准输入。像这样的事情会做到这一点

`$ echo foo | diff -u <(git show :my_file) -`

请注意，这确实意味着直接调用 diff 可能不会在您的 git 配置中获取某些设置。基本上正如 ams 在他的回答中所说的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-22T20:07:44.277

改进 Ash Berlin 的回答。

这允许您使用 git-diff 的优秀功能。

```
git show :file | git diff --no-index -- - temp_saved_path 
```

请注意，这仍然可能不像您希望的那样方便，因为您仍然必须写入临时文件。在您保存文件之前，这些更改要么根本不在磁盘上（仅在内存中），要么在某种依赖于编辑器的临时文件中。Vim 有可能一步无缝地做到这一点，但我还不够熟悉。

# mysql - mysql查询输出正确，计数错误

> ID：15270975
> 
> 赞同：1
> 
> 时间：2013-03-07T12:13:46.913
> 
> 标签：mysql

```
SELECT 
    count(A.gross_c) AS cnt, 
    SUM(A.gross_c) AS Gross_c, 
    B.store_name
FROM hr_location_c_verified A 
JOIN hr_stores B ON A.c_location = B.id
WHERE A.c_ref_fkid IS NULL
GROUP BY A.c_location 
```

我正在执行此查询，输出结果正确，但计数显示错误。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:17:29.847

这可能是因为您的**JOIN**产生了更多行。

一种方法是使用**DISTINCT**关键字。

```
SELECT 
    count(DISTINCT A.gross_c) AS cnt, 
    SUM(A.gross_c) AS Gross_c, 
    B.store_name FROM hr_location_c_verified A 
JOIN hr_stores B ON A.c_location = B.id
WHERE A.c_ref_fkid IS NULL
GROUP BY A.c_location 
```

# ravendb - LineString 的 RavenDB 空间索引

> ID：15270976
> 
> 赞同：2
> 
> 时间：2013-03-07T12:13:49.677
> 
> 标签：ravendb, spatial-index

如何为 LineString 地理数据创建 RavenDB 空间索引？

我正在尝试为地理数据的 LINESTRING 创建空间索引，但搜索查询不返回任何数据。

请使用以下测试用例作为参考，因为我是 RavenDb 的新手，我不确定我的搜索查询是否正确或 RavenDB 上的错误

```
using System.Collections.Generic;
using System.Linq;
using NUnit.Framework;
using Raven.Abstractions.Indexing;
using Raven.Client;
using Raven.Client.Embedded;
using Raven.Client.Indexes;

namespace GeoDataLoading.Test
{
    [TestFixture]
    public class SpatialTest
    {
        public class GeoDocument
        {
            public string WKT { get; set; }
        }

        public class GeoIndex : AbstractIndexCreationTask<GeoDocument>
        {
            public GeoIndex()
            {
                Map = docs => from doc in docs
                              select new {_ = SpatialGenerate("WKT", doc.WKT, SpatialSearchStrategy.GeohashPrefixTree)};
            }
        }

        [Test]
        public void LineStringsShouldNearest()
        {
            using (var store = new EmbeddableDocumentStore {RunInMemory = true})
            {
                store.Initialize();
                store.ExecuteIndex(new GeoIndex());

                using (IDocumentSession session = store.OpenSession())
                {
                    session.Store(new GeoDocument
                        {
                            WKT =
                                "LINESTRING (-0.20854 51.80315, -0.20811 51.80395, -0.20811 51.80402, -0.20814 51.80407, -0.20823 51.80419, -0.20888 51.80435, -0.20978 51.80455, -0.21033 51.80463, -0.21088 51.80467, -0.2116 51.80463, -0.21199 51.80457, -0.21246 51.80453, -0.2131 51.80448, -0.21351 51.80442, -0.2143 51.80433, -0.21436 51.80372, -0.21454 51.80321, -0.21468 51.80295)"
                        });
                    session.SaveChanges();
                }

                using (IDocumentSession session = store.OpenSession())
                {
                    List<GeoDocument> result = session.Advanced.LuceneQuery<GeoDocument>("GeoIndex")
                                                      .WaitForNonStaleResults()
                                                      .WithinRadiusOf(1.2, -0.20854f, 51.80315f)
                                                      .SortByDistance()
                                                      .ToList();

                    Assert.IsTrue(result.Count > 0);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:56:36.613

```
public class YourDocumentType_SpatialIndex : AbstractIndexCreationTask<YourDocumentType>
{
    public SpatialIndex()
    {
        Map = documents => from document in documents
                    select new
                     {
                        document.LinkId,
                        _ = SpatialGenerate(fieldName: "Geometry", shapeWKT: document.Geometry, strategy: SpatialSearchStrategy.GeohashPrefixTree, maxTreeLevel: 12)
                     };
    }
} 
```

公平的警告，我没有对此进行测试。

# sql-server - 总结以前的行sql server

> ID：15270988
> 
> 赞同：0
> 
> 时间：2013-03-07T12:14:24.187
> 
> 标签：sql-server

我需要总结 sql 2005 中的前几行。这是我的表

```
id  date     valuein     valueout    misstotal     
5   2/2/2013    0            500       -500    
2  25/2/2013    0            300       -300
7  25/2/2013    900          0          900
4  25/2/2013   2000          0          2000 
```

`misstotal = ( valuein - valueout)`

这不是问题

我希望一列的总余额如下表所示`total`。

```
id  date     valuein     valueout    misstotal     total
5   2/2/2013    0            500       -500         -500
2  25/2/2013    0            300       -300         -800
7  25/2/2013    900          0          900          100
4  25/2/2013   2000          0          2000         2100 
```

那么做这个总和的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:22:40.357

这篇博文为您提供了一些用于计算 SQL Server 2005 中运行总计的选项：

[http://geekswithblogs.net/Rhames/archive/2008/10/28/calculating-running-totals-in-sql-server-2005---the-optimal.aspx](http://geekswithblogs.net/Rhames/archive/2008/10/28/calculating-running-totals-in-sql-server-2005---the-optimal.aspx)

一个好方法是将数据插入临时表，然后更新此表以填充运行总计列，如下所示：

```
SET @RunningTotal = 0 

UPDATE @TmpTable
SET @RunningTotal = total = @RunningTotal + misstotal
FROM @TmpTable

SELECT * FROM @TmpTable 
```

# asp.net-mvc - 如何在 asp.net 中设置与文本框字符串相关的下拉列表值？

> ID：15270990
> 
> 赞同：0
> 
> 时间：2013-03-07T12:14:27.410
> 
> 标签：asp.net-mvc, drop-down-menu, textbox, database-relations

我有一个小问题：我在 asp.net mvc4 中工作，我需要解决这种情况：

我有一个带有文本框和多个下拉列表的页面。这些下拉列表的值与用户在文本框中输入的内容有关。IE：

如果在文本框中有`'foo'`我想要`ddl1`设置 on `'A'`，`ddl2`on`'1'`和`ddl3`on `'True'`。

当文本框包含主键时，这些值被绑定到一个 sql 数据库中。所以我有一个这样的数据库：

```
'foo' (key) , 'A', '1', 'True'
'bar'       , 'B', '1', 'False'
'qux'       , 'C', '2', 'True' 
```

等等。

我只想根据文本框中的内容，将页面设置`ddls`为对应的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:31:25.967

根据您在数据库中有多少行，您应该做的第一件事是获取所有行并缓存数据，这样您就不会对每个 ddl 都有数据库请求。

然后，您需要决定为文本框捕获哪个事件。我建议您使用 KeyUp（过滤 Tab 或 Enter）。

然后在此事件处理程序中更改第一个 ddl 的 SelectedValue 并为其显式触发“SelectedValueChanged”（检查是否必须显式完成）。

这样，您可以级联您拥有的所有 ddls。

我不确定存储值的最佳方式是什么。您可以创建一个也处理关系的类或使用多个列表（非常松散耦合）。第一个肯定是更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:17:25.883

尝试`Knockout`或其他 JavaScript MVVM 绑定框架。

您必须将（当前数据库）数据作为 JSON 转储到 JavaScript 中，然后将其绑定到适当的元素。

见这里： http: [//knockoutjs.com/](http://knockoutjs.com/)

# asp.net-mvc - 在 IIS 7 上部署 MVC 应用程序时出错

> ID：15270996
> 
> 赞同：0
> 
> 时间：2013-03-07T12:14:45.980
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7

我在 VS 2012 中构建了一个 MVC 应用程序。

我正在尝试在 IIS 7 上部署应用程序。

我执行以下步骤：

1.  我去IIS服务器。
2.  站点`->`转到默认站点。
3.  右键单击默认站点并部署`->`导入应用程序
4.  选择压缩文件。并单击下一步按钮。

之后开始显示错误...

> 所选软件包包含无法在服务器级别安装的应用程序。选择一个站点并在站点内安装包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T13:55:59.290

导入过程出错，将所选节点导入而不是您右键单击的节点。尝试在树视图中选择网站，然后点击右侧的导入。

见：[http ://forums.iis.net/t/1169043.aspx](http://forums.iis.net/t/1169043.aspx)

# c++ - 非标准代码，还是 g++ 错误？

> ID：15270998
> 
> 赞同：1
> 
> 时间：2013-03-07T12:14:51.470
> 
> 标签：c++, gcc, c++11, clang

好的，我已经开发了一些代码；

[联动](http://liveworkspace.org/code/NhL3i%240)（相当长）

当我用 Clang++ 3.2 编译它时，它会运行并产生结果；

```
stdout: 
print: C-3PO
print: R2D2 
```

但是，如果我尝试使用 G++ 4.7.2 编译它，我会收到这些错误；

```
Compilation finished with errors:
source.cpp: In function 'int main()':
source.cpp:90:71: error: no matching function for call to 'makeRunnable(int (&)(char, int, const char*), char, int)'
source.cpp:90:71: note: candidate is:
source.cpp:74:27: note: template<class ... RUN_TIME, class T, class ... CONSTRUCTION_TIME> Runnable<T, RUN_TIME ...>* makeRunnable(T (*)(CONSTRUCTION_TIME ..., RUN_TIME ...), CONSTRUCTION_TIME ...)
source.cpp:74:27: note:   template argument deduction/substitution failed:
source.cpp:90:71: note:   mismatched types 'const char*' and 'char'
source.cpp:90:71: error: unable to deduce 'auto' from '<expression error>'
source.cpp:92:72: error: no matching function for call to 'makeRunnable(int (&)(char, int, const char*), char)'
source.cpp:92:72: note: candidate is:
source.cpp:74:27: note: template<class ... RUN_TIME, class T, class ... CONSTRUCTION_TIME> Runnable<T, RUN_TIME ...>* makeRunnable(T (*)(CONSTRUCTION_TIME ..., RUN_TIME ...), CONSTRUCTION_TIME ...)
source.cpp:74:27: note:   template argument deduction/substitution failed:
source.cpp:92:72: note:   mismatched types 'int' and 'char'
source.cpp:92:72: error: unable to deduce 'auto' from '<expression error>' 
```

与 G++ 4.8.0 几乎相同（尽管格式更漂亮）。

所以问题是；

这个代码标准符合吗？- 如果不是为什么？

**从链接编辑**相关代码：

```
template<typename... RUN_TIME, typename T, typename... CONSTRUCTION_TIME> 
Runnable<T, RUN_TIME...>* makeRunnable(T (*FunctionType)(CONSTRUCTION_TIME..., RUN_TIME...), CONSTRUCTION_TIME... ct_args)  // Line 74
{
    return new FunctionDelegate<T,
                                std::tuple<CONSTRUCTION_TIME...>,
                                std::tuple<CONSTRUCTION_TIME..., RUN_TIME...>,
                                RUN_TIME...>(FunctionType, std::make_tuple(ct_args...));
}

int print_function(char arg1, int arg2, const char* arg3)
{
    std::cout << "print: " << arg1 << arg2 << arg3 << std::endl;
    return 2;
}

int main()
{   
    auto function1 = makeRunnable<const char*>(print_function, 'C', -3);  // Line 90
    int n = function1->invoke("PO");
    auto function2 = makeRunnable<int, const char*>(print_function, 'R');  // Line 92
    function2->invoke(n, "D2");
} 
```

这个问题的重点并不是真正有问题的实现，更多的是 Clang++ 和 G++ 在这是否是错误方面没有分歧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:46:23.123

稍微玩过代码后，似乎 g++ 无法处理可变参数模板连接的推导（在`|!|`.

```
Runnable<T, RUN_TIME...>* makeRunnable(T (*FunctionType)|!|(CONSTRUCTION_TIME..., RUN_TIME...)|!|, CONSTRUCTION_TIME... ct_args) 
```

并且代码是可修复的，通过添加另一个可变参数模板参数，使得 g++ 可以直接推导出模板。